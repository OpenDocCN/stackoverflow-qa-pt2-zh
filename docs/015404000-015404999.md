# StackOverflow 问答 15404000-15404999

# android - 访问另一个应用程序的共享首选项

> ID：15404003
> 
> 赞同：1
> 
> 时间：2013-03-14T08:05:01.203
> 
> 标签：android, android-intent

我用代码调用不同的应用程序：

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.setComponent(new ComponentName("com.mypackage","com.mypackage.UI.SplashActivity"));
intent.putExtra("URI", path);
startActivity(intent); 
```

然后在被调用的应用程序中有代码：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
int currentResolution = prefs.getInt(Values.CURRENT_RESOLUTION_SETTING, 1200); 
```

它总是给我1200。我认为这是因为我不直接启动应用程序。如何访问首选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:13:15.903

无论您做什么，您都无法访问其他应用程序的数据，除非：

*   应用程序本身提供了一个接口（如`ContentResolver`广播或服务绑定）以使其数据可用
*   *您的设备已植根，因此您可以使用超级用户*权限访问其数据文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:47:26.703

Waqas 说的是正确的，除非以某种方式共享，否则您不能使用其他应用程序数据/共享首选项。但是，如果您可以访问这两个应用程序，则不应使用：

```
PreferenceManager.getDefaultSharedPreferences(); 
```

由于默认使用 MODE.PRIVATE，这意味着您只能从初始化它的应用程序中读取共享首选项。

如果您可以访问这两个应用程序，则可以使用：

```
PreferenceManager.setDefaultValues(); 
```

为了更改默认模式或使用带有名称和模式的首选项，而不是获取默认使用：

```
getSharedPreferences(NAME, MODE); 
```

您可以在[文档](http://developer.android.com/reference/android/preference/PreferenceManager.html)中阅读更多内容，也许可以确定它是否适合您的需求。

# php - 如何使用 url 在 Internet Explorer 上下载 Excel 文件

> ID：15404004
> 
> 赞同：0
> 
> 时间：2013-03-14T08:05:04.073
> 
> 标签：php, javascript, excel, internet-explorer

当我使用 URL 使用 Internet Explorer 从我的服务器下载 Excel 文件时遇到问题。
我的 PHP 脚本上有以下代码

```
echo "<script>
        window.location='http://localhost/complaint/export/export_complaint.xls';
    </script>"; 
```

当我使用 Chrome 作为浏览器时，此脚本可以创建自动下载操作，但不能在 Internet Explorer 中运行。
我使用 Internet Explorer 9。
如果对此问题有任何建议，请告知。非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:08:25.597

为此使用 jQuery

**在 jQuery 中：**

```
$('a#someID').attr({target: '_blank', 
                    href  : 'http://localhost/complaint/export/export_complaint.xls'}); 
```

每当单击该链接时，它将在新选项卡/窗口中下载文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:23:38.527

如果您不需要完成重定向，`javascript`您可以`PHP`像这样重定向：

```
header("Location: http://localhost/complaint/export/export_complaint.xls") 
```

# xcode - 目标 VC 找不到 prepareForSegue 提供的 ivars

> ID：15404014
> 
> 赞同：0
> 
> 时间：2013-03-14T08:06:06.007
> 
> 标签：xcode

我有两个视图控制器：`BSViewController`其中包含源 ivars`number`和`array`，以及`BSotherViewController`作为目标需要接收 ivars 。 [这个问题提供了一种产生预期结果的方法](https://stackoverflow.com/questions/15372796/putting-ivars-into-init)。建议是使用 prepareForSegue 方法，我已经部分实现了该方法，但 ivars 并没有完全达到`BSotherViewController`.

BSViewController.m

```
#import "BSViewController.h"
#import "BSData.h"
@interface BSViewController ()
@end
@implementation BSViewController
@synthesize number;
@synthesize array;

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    NSLog(@"identifier=%@ destination=%@", segue.identifier, segue.destinationViewController);
    if ([segue.identifier isEqualToString:@"goToOtherVC"]) {
        BSData *data;
        data = [[BSData alloc] initWithNumber:self.number array:self.array];
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSArray* _array = [NSArray arrayWithObjects: @"manny",@"moe",nil];
    self.array = _array;
    self.number = 25;
}
@end 
```

我有一个名为 BSData 的模型类。

BSData.h

```
#import <Foundation/Foundation.h>
@interface BSData : NSObject
@property (nonatomic) NSInteger number;
@property (nonatomic, copy) NSArray * array;
- (id)initWithNumber:(NSInteger)number array:(NSArray *)array;
@end 
```

BSData.m

```
#import "BSData.h"

@implementation BSData
- (id)initWithNumber:(NSInteger)number array:(NSArray *)array
{
    self = [super init];
    if (self) {
        _number = number;
        _array = array;

        NSLog(@"data number: %d", number);
        NSLog(@"data array: %@", array);
        return self;
    }
    return nil;
}
@end 
```

由此产生的控制台读数如下，并向我表明该`initWithNumber:array:`部分`prepareForSegue`工作正常。

```
2013-03-14 03:06:28.023 tester[42514:11303] data number: 25
2013-03-14 03:06:28.023 tester[42514:11303] data array: (
    manny,
    moe
) 
```

但目标`BSotherViewController`没有收到 ivars。

BSotherViewController.h

```
#import <UIKit/UIKit.h>
@class BSData;
@interface BSotherViewController : UIViewController <UINavigationControllerDelegate>
@property (nonatomic) NSInteger number;
@property (nonatomic, weak) NSArray * array;
@property (strong, nonatomic) BSData *data;
@end 
```

BSotherViewController.m

```
#import "BSData.h"
#import "BSotherViewController.h"
@interface BSotherViewController ()
- (void)configureView;
@end

@implementation BSotherViewController
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    }
    return self;
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"other view: %@", self.data);
    NSLog(@"other number: %d", self.number);
    NSLog(@"other array: %@", self.array);
}
@end 
```

由此产生的控制台读数如下，并向我表明情节提要“新参考插座”项目可能有问题，但我无法连接该项目，因为没有控制拖动“需要”。但这可能根本不是问题。

```
2013-03-14 03:51:54.423 tester[43130:11303] other view: (null)
2013-03-14 03:51:54.424 tester[43130:11303] other number: 0
2013-03-14 03:51:54.425 tester[43130:11303] other array: (null) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:27:50.930

在您中`prepareForSegue:sender:`，您创建一个 BSData 对象并且对它不做任何事情。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    NSLog(@"identifier=%@ destination=%@", segue.identifier, segue.destinationViewController);
    if ([segue.identifier isEqualToString:@"goToOtherVC"]) {
        // local variable is declared
        BSData *data;
        // local variable is initialized with newly created BSData object
        data = [[BSData alloc] initWithNumber:self.number array:self.array];
        // now what?
    }
} 
```

您应该从 segue 获取目标控制器并为其属性分配值。您链接的答案显示了如何执行此操作。

# java-me - 如何制作在后台运行的 j2me 应用程序

> ID：15404017
> 
> 赞同：0
> 
> 时间：2013-03-14T08:06:26.920
> 
> 标签：java-me, background, gps

我正在 j2me 中开发 Loaction Alarm 应用程序。我的应用程序的目的是在用户到达他/她设置提醒的所需位置时提醒用户。我希望这必须在用户关闭应用程序时发生。为此，我必须在后台运行我的代码，不断检查来自 GPS 的坐标是否与提醒中设置的坐标相同。一旦条件成立，应用程序将自动提示带有音乐音调的地图（显示在画布上）和警报框或表单（显示提醒文本）。我该怎么做？？？？在此之前是否有人这样做过，请尽快分享您的经验或代码....

**注意：在应用程序中，用户最多可以设置 5 个提醒，这样我就必须连续并同时检查 5 个提醒坐标。**

而且我还希望当用户关闭应用程序时，不包括后台运行代码，其他表单和控件应该释放他们正在使用的资源（应该被删除）并且应该在用户启动应用程序时再次创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:45:16.763

另请注意，如果您的目标是诺基亚 S40 手机，则无法运行后台应用程序，因为它不是多任务操作系统。看看下面，看看是否有帮助： [http ://www.dailyteck.com/how-can-be-run-multitasking-or-minimizing-application-in-nokia-s40-mobile-phones/](http://www.dailyteck.com/how-can-be-run-multitasking-or-minimizing-application-in-nokia-s40-mobile-phones/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:29:51.310

可以使用 PushRegistry 自动启动 JavaME 应用程序。但是 PushRegistry 的方法有限。例如，您可以通过短信或闹钟启动应用程序。但是 PushRegistry 中没有 GPS 位置自动启动功能，因此您不能使用 PushRegistry 作为解决方案。换句话说：一旦您的 JavaME 关闭，它就会关闭，并且当 GPS 数据与某个位置匹配时，您无法再次自动启动它。

因此，您必须让您的应用程序在后台运行，并让它获取 GPS 数据。您可以创建一个“隐藏”按钮，而不是“关闭”按钮。你像这样隐藏你的应用程序：

```
Display.setCurrent(null); 
```

（尽管它（就像 JavaME 中的其他任何东西一样）并不适用于所有设备）。当 GPS 数据与某个位置匹配时，您就可以

```
Display.setCurrent(yourDisplayable); 
```

然后显示警报。

# c# - c#继承，静态全局存储

> ID：15404019
> 
> 赞同：-1
> 
> 时间：2013-03-14T08:06:29.997
> 
> 标签：c#

有什么想法可以简化代码吗？抱歉，添加了，是 Web 应用程序，例如，我有一个在登录时存储的 userID 值，我会话该值，但关键是，我有这么多类将使用相同的变量进行进一步检查，我该如何减少编码？

```
string xxx= session("UserID");

Logon.checkUser(xxx);
Attempt.Check(xxx);
NNN.Check(xxx);
yyy.dosomething(xxx); 
```

我尝试继承该类，但经过下一个类之后的值，除非需要再次传入该值。

我尝试使用静态并继承它，值保留在基类中并且效果很好，减少了重复工作，但是可以使用静态存储所有值吗？还是有更好的主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:20:41.307

尝试实用程序类

```
 public static class  HelperUtility
{
    public static  string GetUserId()
    {
        return Session["UserId"];
    }
} 
```

# c# - 在 c# windows 窗体应用程序中加载位图图像

> ID：15404021
> 
> 赞同：0
> 
> 时间：2013-03-14T08:06:35.443
> 
> 标签：c#

我有一个带有几个按钮的 Windows 窗体应用程序，当我单击一个按钮时，我希望在窗体屏幕上显示位图图像。所以，基本上我所做的是：

```
public static Bitmap[] images;

 Bitmap tileSheet = new Bitmap(filename);
            images = new Bitmap[256];

 public static void LoadImages(string filename)
        {
            Bitmap tileSheet = new Bitmap(filename);
            images = new Bitmap[256];

            for (int y = 0; y < 16; y++)
            {
                for (int x = 0; x < 16; x++)
                {
                    images[y * 16 + x] = new Bitmap(32, 32);
                    Graphics g = Graphics.FromImage(images[y * 16 + x]);
                    g.DrawImage(tileSheet, new Rectangle(0, 0, 32, 32), new Rectangle(x * 32, y * 32, 32, 32), GraphicsUnit.Pixel);
                }
            }

        } 
```

该函数告诉我图像的大小应该是多少，并且我已经声明了位图，但是如何从我的计算机上实际加载图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:10:17.467

使用 openFileDialog 让用户选择图像。示例： http: [//www.dotnetperls.com/openfiledialog](http://www.dotnetperls.com/openfiledialog)

或者您可以将图像的路径加载到您的文件名。示例：如果您的图像位于：C:\Image\Pic.jpg 则将其添加到变量中。

# android - 在服务中捕捉拨出电话

> ID：15404032
> 
> 赞同：2
> 
> 时间：2013-03-14T08:07:25.647
> 
> 标签：android, service, broadcastreceiver

我正在尝试在服务中捕获拨出电话，现在我希望调试器控制台中有一些东西。

我创建了一个`DailerReceiver`（在清单中添加并扩展了`BroadcastReceiver`）。然后我添加一个`IntentFilter`并`android.intent.action.NEW_OUT_GOING_CALL`注册接收器。我还在清单中启用了该服务。我希望这些是必需的步骤。

清单中还有更多信息。我不确定这是否真的有必要，但在示例中添加了它以获得整个画面。

服务部分：

```
public class BackgroundService extends Service {

    @Override
    public void onCreate() {
        DialerReceiver mReceiver = new DialerReceiver();
        IntentFilter filter = new IntentFilter();
        filter.addAction("android.intent.action.NEW_OUTGOING_CALL");
        this.registerReceiver(mReceiver, filter);
    }
} 
```

类`DialerReceiver`：

```
public class DialerReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        // TODO Auto-generated method stub
        debugOut("arg0: " + arg0.toString());
        debugOut("arg1: " + arg1.toString());
        debugOut("isOrderedBroadcast = " + isOrderedBroadcast());
    }

    private static void debugOut(String str) {
        Log.d("DialerReceiver", str);
    }
} 
```

清单的一部分：

```
<uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" />

<receiver 
    android:name=".DialerReceiver"
    android:enabled="true">
    <intent-filter android:priority="2147483647">
        <action android:name="android.intent.action.NEW_OUTGOING_CALL"/>
    </intent-filter>
</receiver>

<service
    android:name=".BackgroundService"
    android:enabled="true">            
    <intent-filer>
        <action android:name="android.intent.action.NEW_OUTGOING_CALL"/>                
    </intent-filer>
</service> 
```

从发生测试呼叫的那一刻起的完整错误日志：

```
03-14 09:28:32.095: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount before onRestoreInstanceState0
03-14 09:28:32.095: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount after onRestoreInstanceState0
03-14 09:28:32.140: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount before onRestoreInstanceState0
03-14 09:28:32.140: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount after onRestoreInstanceState0
03-14 09:28:32.370: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount before onRestoreInstanceState36
03-14 09:28:32.370: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount after onRestoreInstanceState36
03-14 09:28:32.420: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount before onRestoreInstanceState32
03-14 09:28:32.420: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount after onRestoreInstanceState32
03-14 09:28:32.880: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount before onRestoreInstanceState779
03-14 09:28:32.880: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount after onRestoreInstanceState779
03-14 09:28:33.065: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount before onRestoreInstanceState779
03-14 09:28:33.065: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount after onRestoreInstanceState779
03-14 09:28:33.730: E/SpannableStringBuilder(31997): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-14 09:28:33.730: E/SpannableStringBuilder(31997): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-14 09:28:35.195: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount before onRestoreInstanceState5
03-14 09:28:35.195: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount after onRestoreInstanceState5
03-14 09:28:35.300: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount before onRestoreInstanceState154
03-14 09:28:35.300: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount after onRestoreInstanceState154
03-14 09:28:35.405: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount before onRestoreInstanceState154
03-14 09:28:35.405: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount after onRestoreInstanceState154
03-14 09:28:35.530: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount before onRestoreInstanceState154
03-14 09:28:35.530: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount after onRestoreInstanceState154
03-14 09:28:35.620: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount before onRestoreInstanceState37
03-14 09:28:35.620: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount after onRestoreInstanceState37
03-14 09:28:35.765: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount before onRestoreInstanceState37
03-14 09:28:35.765: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount after onRestoreInstanceState37
03-14 09:28:35.850: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount before onRestoreInstanceState7
03-14 09:28:35.855: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount after onRestoreInstanceState7
03-14 09:28:35.995: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount before onRestoreInstanceState7
03-14 09:28:35.995: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount after onRestoreInstanceState7
03-14 09:28:36.050: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount before onRestoreInstanceState7
03-14 09:28:36.050: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount after onRestoreInstanceState7
03-14 09:28:37.735: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount before onRestoreInstanceState5
03-14 09:28:37.735: E/TwAdapterView(31997): TwAdapterView AdapterDataSetObserver onChanged ItemCount after onRestoreInstanceState5
03-14 09:28:37.775: E/SpannableStringBuilder(31997): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-14 09:28:37.775: E/SpannableStringBuilder(31997): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-14 09:28:39.155: E/Bluetooth HS/HF(2853): handlePreciseCallStateChange() mPhone=OFFHOOK, mFCall=DIALING, mBCall=IDLE, mRCall=IDLE, mCallsetup=0, mCall=0, mCallheld=0
03-14 09:28:39.155: E/Bluetooth HS/HF(2853): audioOn()
03-14 09:28:39.155: E/Bluetooth HS/HF(2853): audioOn(): headset is not connected!
03-14 09:28:39.170: E/TinyUCM(1921): There aren't inputs in map or set stereo(0)
03-14 09:28:39.170: E/TinyUCM(1921): Stereo is already enabled
03-14 09:28:39.170: E/TinyUCM(1921): modifier doesn't exists any more
03-14 09:28:39.205: E/Bluetooth HS/HF(2853): handlePreciseCallStateChange() mPhone=OFFHOOK, mFCall=DIALING, mBCall=IDLE, mRCall=IDLE, mCallsetup=2, mCall=0, mCallheld=0
03-14 09:28:39.205: E/Bluetooth HS/HF(2853): audioOn()
03-14 09:28:39.205: E/Bluetooth HS/HF(2853): audioOn(): headset is not connected!
03-14 09:28:39.390: E/Bluetooth HS/HF(2853): handlePreciseCallStateChange() mPhone=OFFHOOK, mFCall=DIALING, mBCall=IDLE, mRCall=IDLE, mCallsetup=2, mCall=0, mCallheld=0
03-14 09:28:39.390: E/Bluetooth HS/HF(2853): audioOn()
03-14 09:28:39.390: E/Bluetooth HS/HF(2853): audioOn(): headset is not connected!
03-14 09:28:39.435: E/Bluetooth HS/HF(2853): handlePreciseCallStateChange() mPhone=OFFHOOK, mFCall=DIALING, mBCall=IDLE, mRCall=IDLE, mCallsetup=2, mCall=0, mCallheld=0
03-14 09:28:39.435: E/Bluetooth HS/HF(2853): audioOn()
03-14 09:28:39.435: E/Bluetooth HS/HF(2853): audioOn(): headset is not connected!
03-14 09:28:41.820: E/TinyUCM(1921): modifier doesn't exists any more
03-14 09:28:42.920: E/Bluetooth HS/HF(2853): handlePreciseCallStateChange() mPhone=OFFHOOK, mFCall=ALERTING, mBCall=IDLE, mRCall=IDLE, mCallsetup=2, mCall=0, mCallheld=0
03-14 09:28:44.300: E/TinyUCM(1921): There aren't inputs in map or set stereo(2100000)
03-14 09:28:44.300: E/TinyUCM(1921): Stereo is already enabled
03-14 09:28:44.300: E/TinyUCM(1921): modifier doesn't exists any more
03-14 09:28:45.205: E/Watchdog(2277): !@Sync 1113
03-14 09:28:46.555: E/Bluetooth HS/HF(2853): handlePreciseCallStateChange() mPhone=OFFHOOK, mFCall=ACTIVE, mBCall=IDLE, mRCall=IDLE, mCallsetup=3, mCall=0, mCallheld=0
03-14 09:28:46.555: E/Bluetooth HS/HF(2853): audioOn()
03-14 09:28:46.555: E/Bluetooth HS/HF(2853): audioOn(): headset is not connected!
03-14 09:28:50.105: E/Bluetooth HS/HF(2853): handlePreciseCallStateChange() mPhone=OFFHOOK, mFCall=DISCONNECTING, mBCall=IDLE, mRCall=IDLE, mCallsetup=0, mCall=1, mCallheld=0
03-14 09:28:50.555: E/Bluetooth HS/HF(2853): audioOff(): mPendingScoForA2dp: false, mPendingScoForWbs: false, mConnectedSco: null, mA2dpState: 11, mA2dpSuspended: false, mVoiceRecognitionStarted: false
03-14 09:28:50.605: E/TinyUCM(1921): modifier doesn't exists any more
03-14 09:28:50.605: E/TinyUCM(1921): modifier doesn't exists any more
03-14 09:28:50.605: E/TinyUCM(1921): Builtin Mic: active count 1
03-14 09:28:50.605: E/TinyUCM(1921): Back Mic: active count 1
03-14 09:28:50.605: E/TinyUCM(1921): modifier doesn't exists any more
03-14 09:28:50.840: E/ActivityThread(2853): Failed to find provider info for com.cequint.ecid
03-14 09:28:55.470: E/BargeInRecognizer(2853): stopBargeIn
03-14 09:28:55.515: E/Bluetooth HS/HF(2853): handlePreciseCallStateChange() mPhone=IDLE, mFCall=IDLE, mBCall=IDLE, mRCall=IDLE, mCallsetup=0, mCall=0, mCallheld=0
03-14 09:28:55.515: E/Bluetooth HS/HF(2853): audioOff(): mPendingScoForA2dp: false, mPendingScoForWbs: false, mConnectedSco: null, mA2dpState: 11, mA2dpSuspended: false, mVoiceRecognitionStarted: false
03-14 09:28:55.900: E/WifiP2pStateTracker(2277): getNetworkInfo : NetworkInfo: type: WIFI_P2P[], state: UNKNOWN/IDLE, reason: (unspecified), extra: (none), roaming: false, failover: false, isAvailable: true
03-14 09:28:58.175: E/WifiHW(2277): ##################### set firmware type 0 #####################
03-14 09:28:58.385: E/WifiHW(2277): ##################### set firmware type 0 ##################### 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:13:24.080

您尝试在服务中注册广播接收器的任何原因。而且 - 你是从你的活动中调用 startService() 吗？如果是这样 - 你不需要

```
<intent-filer>
    <action android:name="android.intent.action.NEW_OUTGOING_CALL"/>                
</intent-filer> 
```

在服务清单中。我刚刚使用您的代码创建了一个示例应用程序，不包括服务的意图过滤器，并且我的 onRecieve 工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:09:58.093

你不需要添加这个

```
 <intent-filer>
        <action android:name="android.intent.action.NEW_OUTGOING_CALL"/>                
    </intent-filer> 
```

在清单中。因为您正在服务的 onCreate() 中注册接收器。

由于同样的原因，您也不需要在清单中注册接收者。

检查您是否在清单中添加了**android.permission.PROCESS_OUTGOING_CALLS权限。**

尝试替代方法：检查[一下](http://smartandroidians.blogspot.in/2010/07/listening-to-phone-calls-using.html)。

# sql - 在多连接查询中对单个列进行分组

> ID：15404035
> 
> 赞同：0
> 
> 时间：2013-03-14T08:07:35.990
> 
> 标签：sql

我写了一个 sql 查询，它连接了许多表，我只想对表的单个列进行分组。这是我的 slq 查询。

```
select us.Username, ro.Role, ca.CartName, ca.Date from Users us
left join Roles ro on ro.RoleID = us.RoleID
left join Carts ca on ca.UserId = us.ID
group by ca.Date; 
```

这是桌子的破坏：

//表用户

```
ID           Username           RoleID
1            Tri                1
2            Lan                1
3            Nhu                1
4            Lac                1
5            Linhchi            2 
```

//表角色

```
RoleID       Role               Description
1            Admin              Someone in administrator board
2            User               Someone who has an account
3            Guess              Someone who just view the website 
```

//餐桌推车

```
CartId       CartName           CartDescription              UserId           Date
1            Computer           Computer CMS                 1                2/11/2013 12:00:00 AM
2            Desk               Writing Desk                 2                2/11/2013 12:00:00 AM
3            Print Paper        Company's print paper        3                3/11/2013 12:00:00 AM
4            Headphone          Small headphone              3                2/11/2013 12:00:00 AM
5            MP3Player          MP3Player Portable           4                4/11/2013 12:00:00 AM 
```

//运行查询后的DesireTable

```
Username         Role          CartName              Date
Tri              Admin         Computer              2/11/2013 12:00:00 AM
Lan              Admin         Desk                  2/11/2013 12:00:00 AM
Lan              Admin         Headphone             2/11/2013 12:00:00 AM
Nhu              Admin         Print Paper           3/11/2013 12:00:00 AM
Lac              Admin         MP3Player             4/11/2013 12:00:00 AM 
```

因此，结果必须按“购物车”表中的“日期”列分组。但是查询生成了错误消息*“列 'Carts.Date' 在选择列表中无效，因为它既不包含在聚合函数或 GROUP BY 子句中。”* 我被困在当前的环境中，我需要你的帮助来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:57:20.837

在我的问题中，我只想对一列“日期”进行分组，但如果我在 group by 语句中只插入一列日期，则会产生错误。因此，我会将连接表中的所有列插入到 group by 子句中。

```
select us.Username, ro.Role, ca.CartName, ca.Date from Users us
left join Roles ro on ro.RoleID = us.RoleID
left join Carts ca on ca.UserId = us.ID
group by ca.Date, us.Username, ro.Role, ca.CartName; 
```

只对我想要分组的一列进行分组的技巧是将该列放在 group by 子句的第一位，这样它就会先对该列进行分组，然后再对另一列进行分组。通过这样做，我可以根据需要控制组信息​​。

# caching - 首次部署后，露天模型部署不起作用

> ID：15404036
> 
> 赞同：0
> 
> 时间：2013-03-14T08:07:36.253
> 
> 标签：caching, alfresco, activiti

我有一个 workflowModel-custom.xml 文件，我在其中定义了一个工作流模型。我用了

```
http://localhost:4080/alfresco/faces/jsp/admin/repoadmin-console.jsp 
```

部署模型；

```
deploy model alfresco/workflow/workflowModel-custom.xml 
```

第一次效果很好，但第一次之后，我的更改似乎对部署没有影响，直到我重新启动我的 tomcat。露天是否有一些缓存来保存文件，如果有，如何禁用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:27:54.450

有几件事情要考虑。假设您部署了工作流版本 1.0

*   当前工作流实例。

您部署的任何工作流实例都是 1.0 版。

因此，当您部署新的工作流版本时，所有旧实例仍将使用旧版本。

*   重新部署工作流。

当您要部署新版本时，您必须设置“重新部署”标志（或在工作流控制台中重新部署。）。

*   取消部署工作流

您可以在此处执行其他操作：取消部署工作流模型。如果这样做，所有正在运行的实例都将被终止。

[在此处](https://wiki.alfresco.com/wiki/WorkflowAdministration#Redeploying_a_Process_Definition)和[此处](http://wiki.alfresco.com/wiki/Workflow_Console)阅读有关工作流程的更多信息。

# java - 泽西 REST 标志 xml

> ID：15404039
> 
> 赞同：0
> 
> 时间：2013-03-14T08:07:42.010
> 
> 标签：java, xml, rest, jersey, signing

我使用 jersey 实现了我的 REST 服务。通信层使用 ssl 保护。在客户端，我要求在调用服务并验证服务器端的请求之前对 xml 进行签名。 [http://docs.oracle.com/javase/6/docs/technotes/guides/security/xmldsig/XMLDigitalSignature.html](http://docs.oracle.com/javase/6/docs/technotes/guides/security/xmldsig/XMLDigitalSignature.html)

我现在的服务：

```
@POST
@Path(CONFIRM_PATH)
@Produces({ MediaType.APPLICATION_XML })
public ConfirmResponse confirm(ConfirmRequest request){
   // verify the signed confirm request
} 
```

客户端代码（保留缓存服务实例以提高可读性：

```
ClientConfig config = new DefaultClientConfig();
Client client = Client.create(config);
client.setConnectTimeout(CLIENT_CONNECT_TIMEOUT);
client.setReadTimeout(CLIENT_READ_TIMEOUT);

URI uri = UriBuilder.fromUri(url).build();
WebResource service = client.resource(uri);
// sign should happen here
ConfirmResponse  response = service.post(ConfirmRequest.class, confirmRequest); 
```

处理这个问题的最佳方法是什么？我可以简单地将类型更改为 String 以获取完整的 xml，对其进行验证，然后使用 jaxb 来获取对象。在客户端，我还可以手动创建 xml 并发布一个字符串。

这个解决方案听起来让我很失望。有任何想法吗？

最好的问候，米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:22:45.750

在传出请求上使用过滤器并在那里签名。更友好的是您不需要复制代码并且您拥有中央控制权。

# ruby - Sinatra - 覆盖机架类

> ID：15404041
> 
> 赞同：2
> 
> 时间：2013-03-14T08:07:52.000
> 
> 标签：ruby, sinatra, rack

我有一个很小的 ​​Sinatra 项目，我需要在其中覆盖`Rack::Auth::Basic#valid?`. 目前我已经将此覆盖放在我的应用程序的主文件中，但是随着事情变得越来越大，这似乎使源代码变得混乱......

```
require "sinatra/base"

module Rack::Auth
  class Basic
    def valid?(auth)
      # My overrides go here...
    end
  end
end

class App < Sinatra::Base
  use Rack::Auth::Basic, "CustomRealm" do |username, password|
    # Authentication
  end

  get "/" do
    erb :index
  end
end 
```

我想将覆盖移动到外部文件。我的项目结构类似于

```
* views
|------ index.erb
* config.ru
* app.rb
* README.md
* LICENSE.md
* Gemfile
* Gemfile.lock 
```

我可以在哪里移动`Rack::Auth`覆盖以便我可以从内部使用它们`app.rb`？我试过穿上它们，`lib/rack/auth/basic.rb`但根本没有用……Sinatra 的标准是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:35:29.890

我不相信在 Sinatra 中有一个“标准”。但这不应该太难做到。

您可以做的最简单的事情是`rack_overrides.rb`从您的`app.rb`.

Sinatra 没有自动加载等功能（就像 Rails 那样），因此它不会神奇地从`lib/`其他目录或其他目录中获取内容。

哦，只是出于好奇：为什么需要覆盖`Rack::Auth::Basic#valid?`？

# java - 如何将 H.264 UDP 数据包转换为可播放的媒体流或文件（碎片整理）

> ID：15404047
> 
> 赞同：5
> 
> 时间：2013-03-14T08:08:11.013
> 
> 标签：java, udp, h.264, rtp, sdp

在将 SDP 会话的 UDP 流转换为可解码的 H.264 流时，我缺少一些基本的东西。我正在使用支持 H.264 的相机进行测试，并且可以直接使用播放器播放流。当我尝试播放翻译后的流时，播放器将无法识别它（缺少标题错误）。但是，我必须对 UDP 流进行解码，以便能够将其集成到 Java 应用程序中，该应用程序周围有一些解码器。

我已经看到以下问题的非常好的答案：

1.  [如何处理原始 UDP 数据包，以便它们可以被 directshow 源过滤器中的解码器过滤器解码](https://stackoverflow.com/questions/7665217/how-to-process-raw-udp-packets-so-that-they-can-be-decoded-by-a-decoder-filter-i)
2.  [使用 ffmpeg (libavcodec) 通过 RTP 解码 H264 视频的问题](https://stackoverflow.com/questions/3493742/problem-to-decode-h264-video-over-rtp-with-ffmpeg-libavcodec)

两者都有一些令人困惑的小差异（见下文）。

但首先让我们看一下简单的部分。正如我从相机看到的，发送了 SPS 和 PPS 数据包。所有剩余的数据包都是索引或不索引的分段帧。

对于所有没有帧的数据包（在我的情况下只有 NALUnitType 7 和 8），我去掉 RTP 标头（12 字节）并在前面添加起始字节 3 x 0 字节和 1 x 1（00 00 00 01）。

对于所有分段的帧数据包，我根据答案 1 的描述重建它们。所以详细地说，这意味着： RTP 标头的剥离（仅用于数据验证）。然后从有效载荷中解码片段信息：

第一个字节：[ 3 NAL UNIT BITS | 5 FRAGMENT TYPE BITS]
第二个字节：[ START BIT | 结束位 | 保留位 | 5 NAL 单位位]

如果设置了起始位，则会有一个新的有效载荷头构造如下：[3 NAL UNIT BITS（从第一个字节）| 5 NAL UNIT BITS（从第二个字节开始）]
这为我们提供了 NALUnitType 1 用于非 idr 切片或 5 用于 idr 切片。这是根据规范。

我采用这个新的有效负载标头（1 个字节）并将没有 2 个字节标头的有效负载附加到一个新包中。所有连续的片段都以相同的方式添加（12 字节 RTP 标头条，2 字节单元类型信息条），直到看到结束位信息。当看到结束时，我将开始字节（00 00 00 01）放在这个数据包的前面，并将它写到流中。

问题是由于未知原因无法解码。我读过的答案的答案 2 的不同之处在于，有效载荷标头的第二个字节也可能被放入转换后的数据包中。但我都尝试了，但仍然没有运气。

新建的流中可能还缺少其他东西吗？还是我在碎片整理中犯了错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-10T20:22:38.677

托马斯，

我试图自己理解这一切。在我看来，从阅读以下内容：[如何处理原始 UDP 数据包，以便它们可以被直接显示源过滤器中的解码器过滤器解码](https://stackoverflow.com/questions/7665217/how-to-process-raw-udp-packets-so-that-they-can-be-decoded-by-a-decoder-filter-i)，您的“起始字节”关闭了一个字节。我认为它是 3 个字节，而不是 4 个......如：00 00 01

也许这就是它遇到麻烦的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-14T19:00:33.203

有关答案，请参阅[使用 ffmpeg (libavcodec) 通过 RTP 解码 H264 视频](https://stackoverflow.com/questions/3493742/problem-to-decode-h264-video-over-rtp-with-ffmpeg-libavcodec?lq=1)的问题。它有正确的实现！

@Thomas，是的，如果存在 SPS、PPS 或 SEI NAL，它确实有 4 个。

# encryption - 如何保护 AesCryptoServiceProvider 的 rgbKey？

> ID：15404055
> 
> 赞同：1
> 
> 时间：2013-03-14T08:08:31.767
> 
> 标签：encryption, key, protection, dpapi, aescryptoserviceprovider

我们有一个表格，我们保存用户/密码和其他一些数据。每条记录的密码字段都必须加密。我们决定使用 AesCryptoServiceProvider 进行加密，并手动创建了一次 rgbKey。然后加密所有用户密码并将记录插入到我们的表中，其中密码字段使用我们的 rgbKey 加密。

我们在负载均衡器后面有几台服务器，每台服务器都应该读取这些记录并可以解密密码字段值。一开始我们将base64StringFormat中的rgbKey放入我们的dll（API）中，同样所有的服务器都将使用这个API并且可以解密加密的值。

但是，将 rgbKey 保存在 dll 文件中是非常不安全的。我们讨论了是否将密钥保留在 DPAPI 中。在解密时，在我们的任何服务器上，我们将从 DPAPI 获取我们的密钥并成功解密加密值。

我认为我可以在具有当前用户模式的任何服务器中生成一次受保护的密钥，然后将其保存在我们的通用 dll 中。每个使用公共 dll 的服务器，将这个受保护的密钥（字节 []）提供给具有相同用户的 DPAPI，可以获得不受保护的密钥值。但是它只在受保护的机器上工作，在其他机器上它给出错误：“密钥在指定状态下无效。”

### 我的问题是如何保护我的永久 rgbKey 以便我可以从所有机器访问它？看看下面类似的测试控制台应用程序，我的方法有什么问题？

我为我的测试控制台应用程序提供了一个示例代码：

首先，我在本地机器上运行我的 PDPAPI() 函数：

```
 static void PDPAPI() {
        System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
        byte[] rgbKey = encoding.GetBytes( "MyRgbKey" );
        byte[] protectedData = ProtectedData.Protect( rgbKey, null, DataProtectionScope.CurrentUser );
        string base64ProtectedData = Convert.ToBase64String( protectedData );
        Console.WriteLine( "base64ProtectedData:{0}", base64ProtectedData );            
    } 
```

然后硬编码添加到我的 UDPAPI() 函数 base64ProtectedData 从上述执行中获得的值，重建解决方案：

```
 static void UDPAPI() {
        string base64ProtectedData = "****";
        byte[] protectedData = Convert.FromBase64String( base64ProtectedData );
        byte[] unProtectedData = ProtectedData.Unprotect( protectedData, null, DataProtectionScope.CurrentUser );
        string base64unProtectedData = Convert.ToBase64String( unProtectedData );
        Console.WriteLine( "base64unProtectedData:{0}", base64unProtectedData );
    } 
```

现在，如果我在本地机器上运行 UDPAPI() 函数，它会成功取消保护数据，但是如果我将控制台应用程序迁移到任何其他服务器，并使用我的网络用户登录该服务器，控制台应用程序会给出错误“密钥无效在指定状态下使用。”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:19:02.853

老实说，对于密码加密，如果您使用单向哈希而不是使用密码的明文，只需哈希用户输入并进行比较，您将不会遇到密钥存储问题。在 C# 中使用的典型内容是 PBKDF2 ( [Rfc2898DeriveBytes](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx) )。有关其他选项，请参阅[Crypto：什么使散列函数适合密码散列？](https://crypto.stackexchange.com/q/24/1934)

密钥存储问题总是很困难，DPAPI 是一个相当不错的选择，它可以保护同一台机器上其他用户的密钥，并且比将其存储在 DLL 中要好得多，但要了解它在做什么，它是用您正在运行的任何 Windows 用户的密码哈希（实际上它从密码哈希中做更多的事情，密钥派生、轮换等），这就是为什么您不能直接在服务器上使用从本地计算机加密的数据的原因。要使用 DPAPI，您必须在每台服务器上单独加密您的密钥（这不是一件坏事）。

最好不要对您的密钥进行硬编码，不是因为它可以访问，而是因为在您需要时或在不同的设置中更容易更改。通常，如果没有专门的硬件，您最多只能将密钥与数据分开。您可以通过加密密钥使事情变得更加困难，但您只是添加了另一个攻击者也必须访问的密钥，没有理想的解决方案。

如果您想要一种能够随时间更改密钥的简单方法，我已将[keyczar 框架移植到 c#](http://jbtule.github.com/keyczar-dotnet/)，它具有旋转密钥所需的机制，以便您在加密新数据时仍然可以解密旧数据，但它没有确实在密钥存储可访问性方面提供了更多安全性。

# extjs - EXT.net.Mask.show 在页面上的位置

> ID：15404067
> 
> 赞同：3
> 
> 时间：2013-03-14T08:09:13.347
> 
> 标签：extjs, ext.net

希望在网页上放置带有消息的 EXT.net（基于 EXT JS），因此它不是居中的默认设置。

```
e.g.

Ext.net.Mask.Show('Loading...'); 
```

1.6 版 [http://examples1.ext.net/](http://examples1.ext.net/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:58:14.987

这是一个很好的问题。

默认情况下，Mask 被强制居中，并且没有覆盖，但您可以在显示后立即重新定位。

**例子**

```
Ext.net.Mask.show({ msg : 'testing' });

Ext.fly(Ext.dom.Query.selectNode(".x-mask-msg")).setStyle({ top: "30px", left: "30px"}); 
```

希望这可以帮助。

# c# - 在一个 CMS/多个网站系统中管理数据库的最佳方法是什么

> ID：15404070
> 
> 赞同：3
> 
> 时间：2013-03-14T08:09:22.197
> 
> 标签：c#, sql-server, asp.net-mvc-3, sql-server-2005, entity-framework-4.1

我正在开发内容管理系统 (CMS)。但这与其他 CMS 不同。我可以维护一个 CMS 并将内容定义到多个网站。就像一个博客。但是有些网站有不同的表格。

我当前的 CMS 有一个数据库（MS SQL 2005）

数据库包括很多表：

主表

*   用户
*   页
*   模块
*   传送门
    等...

Web 1 表

*   web1Post
*   web1CustomTable
*   web1Table2 等...

Web 2 表

*   web2自定义表3
*   web2CustomTable4
*   web2Table4 等...

每个自定义表都加入了 User、Portal 和其他一些表。这是成功的作品。

但我想将数据库分离到 MainDatabase、web1database、web2database 等......

我正在尝试分离数据库。但问题是用户、门户和连接的表有问题

我正在使用 EntityFramework，Asp.net MVC

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:06:25.343

没有“最好”的方法来解决这个问题。只需分离数据库，然后开始修复应用程序中的代码。

你需要

*   为新数据库创建实体框架映射
*   更新代码并删除对现有数据库的引用
*   添加引用新数据库的新代码

但是，我建议您不要分离数据库，而是在现有架构中进行更改以支持自定义。也许您可以使用 xml 列来存储自定义数据，甚至可以创建应用程序层，以便它可以动态更新数据库结构。这就是 TFS 和 Dynamics CRM 处理定制的方式——它们在数据库中有主模式，而元数据 shcema 则存储有关定制的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T14:40:20.067

下载并安装 Kentico CMS 并探索它如何解决这个问题。如果您想让一个多租户数据库为每个租户/网站定义/复制不同的架构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T08:49:19.283

您无法解决来自不同数据库的相关表的问题。不要为单个网站创建数据库，例如 SharePoint 不会为子网站创建数据库。只需在 subweb 的每个表中创建一个外键，例如 SubwebId。当您决定拥有单独的数据库时，您必须创建用于生成子网站数据库的存储过程、在 IIS 下创建网站的方法（还需要将域绑定到子网站）、从模板生成网站文件的方法通过替换所有连接字符串。你真的想做吗？我认为这不是一个好主意。（对不起英语不好）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T16:47:09.737

从您目前的描述来看，我觉得您拥有一个 CMS 数据库和几个相关网站。您可以使用 SCHEMA 来分离不同站点的数据。因此，您可以将 [dbo] 模式用于与所有站点相关的表。然后 [website1] 用于特定于 website1 的表，依此类推。

各个数据库应该大部分是相互独立的。ACID 并不总是跨数据库工作。各个数据库将有单独的备份时间。每个数据库都可以移动到不同的服务器。每个数据库可能处于不同的状态。您不能在数据库之间建立良好的干净可靠的外键关系。只要您需要 [User] 和其他表之间的依赖关系，那些其他表就必须在同一个数据库中。

# linq - LINQ to Entities 查询相关实体

> ID：15404077
> 
> 赞同：1
> 
> 时间：2013-03-14T08:09:43.000
> 
> 标签：linq, entity-framework

我有 3 个 EF 对象集：父母、孩子和宠物，具有一对多的关联（父母可以有可能的孩子，孩子可以有很多宠物）。对于给定的父母，我需要获取该父母的所有孩子拥有的所有宠物。

我担心这个查询是正确的还是可以提高效率：

```
Dim query = From par In context.Parents
            From child In par.Childrens
            From pet In child.Pets
            Where par.parent_id = 1
            Select pet 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:43:29.157

这个查询是正确的，尽管它的一个`cross-join`- 只是`Cartesian product`两个集合中的一个 -。

您可以显式指定一个`join`基于`equality`条件。

```
var query = from par  in context.Parents
            join child  in context.Childrens on child.ParentID equals par.ID
            join pet  in context.Products on child.ID equals pet.ChildID
            Where par.parent_id = 1
            select new { par.Name, par.Id }; 
```

# javascript - 为什么建议在switch和jquery中使用else if

> ID：15404079
> 
> 赞同：0
> 
> 时间：2013-03-14T08:09:48.233
> 
> 标签：javascript, jquery, performance, if-statement, switch-statement

为什么会更方便：

```
var cnt = $("#div1 p").length;
alert(cnt);
if (cnt >= 10 && cnt <= 20)      alert('10');
else if (cnt >= 21 && cnt <= 30) alert('21');
else if (cnt >= 31 && cnt <= 40) alert('31');
else alert('>41'); 
```

代替：

```
switch (cnt) {
    case 1: ....
    case 2: ....
    case 3: ....
} 
```

甚至

```
var cnt = $("#div1 p").length;
alert(cnt);
if (cnt >= 10 && cnt <= 20)      alert('10');
if (cnt >= 21 && cnt <= 30) alert('21');
if (cnt >= 31 && cnt <= 40) alert('31');
else alert('>41'); 
```

所以看起来如果有很多情况，switch语句看起来更干净。当你有多个值并且你想要相同的行为时，这也很好 - 只使用多个“case”语句，这些语句落入单个实现比 if( this || that || someotherthing || .. . )

那么对于几种情况，哪种选择更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:17:54.370

为了您的目的，该`switch`语句将进行更多比较，因为它只能测试严格等价 ( `===`)。

但是`if ... else if`结构更好，因为它在第一个真表达式之后停止比较。它可能不适合某些情况，但它适合您的情况。

另外，作为次要建议，我建议将您认为最有可能成为真的条件放在首位。例如：

```
if (age >= 18 && age < 60) { // Mainstream
    ...
} else if (age >= 12 && age < 18) { // Smart kids
    ...
} else if (age >= 60 && age < 99) { // Savvy old people
    ...
} else { // ... Aliens?!
    ...
} 
```

如上例所示，这最适用于互斥条件。如果这不是真的，它可能会导致混乱：

```
var t = $(element);
if (t.is("div > p")) {
    ...
} else if (t.is("p")) {
    ...
} 
```

上面的例子**不是**一回事

```
var t = $(element);
if (t.is("p")) {
    ...
} else if (t.is("div > p")) {
    ...
} 
```

因为`t.is("div > p")`和`t.is("p")`不是*相互*排斥的。尝试将条件更改为这样，例如：`t.is("p")`=> `t.is(":not(div) > p")`。

switch 通常最适合单例比较，例如：

```
var d = new Date().getDay(), t;
switch (d) {
    case 0: t = "Sunday"; break;
    case 1: t = "Monday"; break;
    case 2: t = "Tuesday"; break;
    ...
} 
```

绝对比

```
var d = new Date().getDay(), t;
if (d === 0) t = "Sunday";
else if (d === 1) t = "Monday";
else if (d === 2) t = "Tuesday";
... 
```

我听到的唯一反对使用`switch`单例比较的是，曾经`switch`在几个 Javascript 引擎上相当慢。不过，这已经不是几年了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:22:32.950

如果它们相互排斥，则使用`else if`而不是多个`if`语句基本上是一个好主意：

```
if(x >= 10 && x <= 20) { 
    ... 
} else if (x >= 21 && x <= 30) { ... } 
```

这样，`if`只有第一个为假时，才会检查第二个。这是一个坏主意：

```
if(x >= 10 && x <= 20) { ... }
if (x >= 21 && x <= 30) { ... } // will be checked also if the 1st if is true 
```

`switch`几乎不能用于值范围 ( `x >= 21 && x <= 30`)，但更适合检查许多唯一值 (`x===10`等`x===11`)。`switch`将在第一个之后停止执行`break`：

```
switch(x){
    case 1:
        console.log("one");
    case 2:
        console.log("two");
        break;
    case 3:
        console.log("three");
        break;
} 
```

输出取决于 的值`x`：

*   1：`one two`
*   2：`two`
*   3：`three`
*   4：（无输出）

有关 switch 语句的更多信息可以在[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch)上找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T08:28:18.170

你也可以试试三元运算符：test? VALue_If_True_Statement：value_if_false_Statement；这是重构代码的好方法。

# android - Android 应用程序的动态加密

> ID：15404081
> 
> 赞同：0
> 
> 时间：2013-03-14T08:10:01.943
> 
> 标签：android, sqlite, cordova, encryption

我有一个项目 Native 或 HTML5 Android 项目（我现在正在考虑哪种解决方案），它是一个英语课程应用程序：您下载 leesons 并完成它们。信息下载有权利，不想被任何人破解，所以我想下载（可能通过网络服务）并将其存储在应用程序内的数据库中。是否有任何加密解决方案可以解密对数据库的访问，以避免下载的课程被黑客入侵？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:14:43.163

SQlcipher 可用于加密数据库文件。它是 SQLite 的扩展，所以我认为它很快。

[http://sqlcipher.net/](http://sqlcipher.net/)

还要检查 Android， [http://sqlcipher.net/sqlcipher-for-android/](http://sqlcipher.net/sqlcipher-for-android/)

# c# - LINQ 选择表达式 IEnumerable

> ID：15404084
> 
> 赞同：2
> 
> 时间：2013-03-14T08:10:12.697
> 
> 标签：c#, linq, select, expression

我正在尝试使用 a 的`Expression`内部`LINQ` `Select`。这是我的代码示例

```
Expression<Func<user, string>> expr = d => d.user.username;
Message.Select(b => new { name = b.user.Select(expr) }); 
```

消息是类型`IEnumerable`，在运行时我收到以下错误： `The exception message is ''System.Collections.Generic.List<W.Models.user>' does not contain a definition for 'Select'`

我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T08:11:25.503

听起来您`using System.Linq;`在代码文件的顶部缺少 a 。但请注意，这`List<T>`是 LINQ-to-Objects；失去`Expression`：

```
Func<user, string> expr = d => d.user.username;
Message.Select(b => new { name = b.user.Select(expr) }); 
```

最后的想法；虽然关于的消息`System.Collections.Generic.List<W.Models.user>`建议了一个列表，但您的代码 ( `b.User.Select`/ `Message.Select`) 建议了单个对象。这……令人困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:41:46.280

请看一下[为什么要使用 Expression<Func<T>> 而不是 Func<T>？](https://stackoverflow.com/questions/793571/why-would-you-use-expressionfunct-rather-than-funct).

接受的答案描述了它`Func<T>`是返回 a 的方法的委托`T`。`Expression<Func<T>>`然而实际上是对如何评估该委托的**描述。**例如，您可以[将表达式编译](http://msdn.microsoft.com/library/bb345362.aspx)为实际的委托：

```
Expression<Func<int, bool>> expr = i => i < 5;
Func<int, bool> deleg = expr.Compile();
Console.WriteLine("deleg(4) = {0}", deleg(4)); 
```

你甚至可以写：

```
Console.WriteLine("deleg(4) = {0}", expr.Compile()(4)); 
```

所以如果你真的需要一个表达式，你需要将它编译成实际的委托，否则首先使用委托。

（顺便说一句：您的代码示例将无法编译，因为`Select`a没有`List<user>`采用表达式的方法，也`d => d.user.username`可能是错误的。既然`d`是 a`user`它应该是`d => d.username`）。

但是 linq to entity 不支持委托调用。因此，您必须通过添加切换到**linq to objects**`AsEnumerable()`：

```
Expression<Func<user, string>> expr = d => d.username;
Func<user, string> func = expr.Compile();

var result = context.Message.AsEnumerable()
                            .Select(b => new { name = b.user.Select(func) }); 
```

使用 linq to 实体访问数据、简单排序、过滤等。这样它可以优化数据库的查询，但如果您需要更多，然后切换到 linq to objects。

PS：lambda`d => d.username`被编译成一个委托。如果您将其显式放入表达式`b.user.Select(u => u.username)`中，它将正常工作，因为现在这也编译为 linq to entity 无需调用委托即可处理的表达式。

# linux - 如何在 Windows 上为 Linux 生成可执行文件？

> ID：15404085
> 
> 赞同：-1
> 
> 时间：2013-03-14T08:10:14.363
> 
> 标签：linux, x86, embedded

我有一个运行 Linux 的 x86 开发板，但我不知道如何从装有 Windows 的 PC 上为它开发应用程序。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:11:59.197

您应该使用 Cygwin 并在其上安装 GCC！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:13:59.303

使用[VirtualBox](http://www.virtualbox.org/)等虚拟化软件在您的 Windows 机器中将 Linux 作为来宾操作系统运行。然后，您可以在客户机中为您的开发板创建所有可执行文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:41:06.390

你有网络连接到开发板吗？

您可以通过 SSH 在目标上远程构建和测试您的应用程序。许多IDE（如eclipse）无缝支持。

当您获得与目标 linux 发行版完全相同的构建环境以及目标系统的实时特性时，这会好很多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T10:45:11.033

您可以在 (Windows) 开发 PC 上编写代码，但要为 Linux 构建可执行二进制文件，您需要在 Linux 机器上进行编译。这也意味着您可能需要使用跨平台语言（可能是 C++、Qt 或 Mono）编写，以便在部署之前在 Windows 机器上进行测试（除非您真的只想在 Windows 上编辑文件PC，在这种情况下我会问：为什么？）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T11:09:57.817

你需要的是一个交叉编译器。在机器 A 上运行但为机器 b 编译的编译器。我建议你试试 cygwin 或 mingw，它安装了编译 linux 所需的所有工具。模拟所有与 linux 相关的系统调用。

# java - 向 ADT 列表添加私有函数导致错误，奇怪的修复

> ID：15404092
> 
> 赞同：0
> 
> 时间：2013-03-14T08:10:50.990
> 
> 标签：java, debugging, data-structures

我正在学习关于 Java 数据结构的课程，我们必须添加一个方法，

```
 private boolean contains(T anEntry, Node startNode) 
```

到您可以在下面的代码中找到的 LList2.java，但是添加此方法会导致 Eclipse IDE 显示错误和警告。我能够通过添加函数来修复错误：

错误：

```
 The type LList2<T> must implement the inherited abstract method ListInterface<T>.contains(T)  LList.java 
```

添加：

```
 public boolean contains(T anEntry) {
            return false;
    } 
```

还更改公共布尔包含（T anEntry）；公共到私人会导致很多错误。我不明白发生了什么以及为什么这解决了问题并允许我编译。在测试中，一切似乎都正常工作。谁能解释发生了什么，以及如何解决它，所以我不需要这个额外的方法？

我在这里将 3 个 java 源文件放在 PasteBin 中： LList2.java - [http://pastebin.com/HnABCsj4](http://pastebin.com/HnABCsj4) ListInterface.java - [http://pastebin.com/yhTviUAH](http://pastebin.com/yhTviUAH) TestList2.java - [http://pastebin.com/ 9EgTV2mB](http://pastebin.com/9EgTV2mB)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:15:45.063

`ListInterface`有`public boolean contains(T anEntry);`你必须重写的方法。您只有`public boolean contains2(T anEntry)`或`public boolean contains(T anEntry, Node startNode)`在您的`LList2`班级中，两者都不会覆盖接口方法。

所以你也需要实现这个方法。当您将方法更改为私有时，这也是错误，因为在接口中它被声明为公共。

顺便说一句，非常建议您为`@Override`所有覆盖接口方法的方法添加注释。这样你会看到 contains2 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:19:16.937

接口 ListInterface 中所有未实现的方法必须在子类中实现。编译器将抱怨任何缺少的实现。

# php - Skdate 自定义 PHP 页面

> ID：15404093
> 
> 赞同：1
> 
> 时间：2013-03-14T08:10:55.590
> 
> 标签：php, html, smarty

我是 skadate（约会脚本）的新手。我想知道有一种方法可以在 SkaDate 中创建自定义 PHP 页面，这样我就可以在那里添加一些 php 和 HTML 代码。

提前致谢。

# mysql - 拥有和在哪里

> ID：15404095
> 
> 赞同：0
> 
> 时间：2013-03-14T08:11:00.237
> 
> 标签：mysql, sql, group-by, aggregate-functions, having-clause

我们`HAVING`用于行组和`WHERE`单个行。
但以下是有效的：

```
SELECT Salesperson, SUM(TotalSale)  
   FROM SALES  
   GROUP BY Salesperson  
   HAVING Salesperson <> 'Georgio'; 
```

即`HAVING`不使用聚合函数。那么我们不能也使用它`WHERE Salesperson <> 'Georgio';`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:13:38.657

最简单的答案是，`HAVING`同时支持条件（*简单条件和聚合条件*），而`WHERE`不能支持聚合条件。

此外，`HAVING`在对记录进行分组后进行评估。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T08:14:24.350

是的。不同之处在于，子句在聚合*之后*`HAVING`进行评估，而子句*在 之前*。*`WHERE`*

 **这通常会通过使用 来提高性能`WHERE`，但并非总是 100% 如此。例如，采取[以下](http://www.sqlfiddle.com/#!2/4f0a2)措施：

```
create table foo(type int, data int);
create index bar on foo(id);

insert into foo values(1,3);

insert into foo values(2,3);
insert into foo values(2,3);
insert into foo values(2,3);
insert into foo values(2,3);
insert into foo values(2,3);

insert into foo values(3,3);

insert into foo values(5,3); 
```

* * *

[这个查询](http://www.sqlfiddle.com/#!2/4f0a2/3)更好`WHERE`：

```
select type, sum(data)
from foo
where type = 5
group by type; 
```

```
ID SELECT_TYPE TABLE TYPE POSSIBLE_KEYS KEY KEY_LEN REF ROWS FILTERED EXTRA
1 SIMPLE foo ref bar bar 5 const 1 100 使用 where

```

```
select type, sum(data)
from foo
group by type
having type = 5; 
```

```
ID SELECT_TYPE TABLE TYPE POSSIBLE_KEYS KEY KEY_LEN REF ROWS FILTERED EXTRA
1 SIMPLE foo 索引栏 5 8 100

```

* * *

但[这个查询](http://www.sqlfiddle.com/#!2/4f0a2/3)实际上作为 a 的性能更好`HAVING`，因为该值`type=2`的选择性不够：

```
select type, sum(data)
from foo
where type = 2
group by type; 
```

```
ID SELECT_TYPE TABLE TYPE POSSIBLE_KEYS KEY KEY_LEN REF ROWS FILTERED EXTRA
1 SIMPLE foo ALL bar 8 62.5 使用 where

```

```
select type, sum(data)
from foo
group by type
having type = 2; 
```

```
ID SELECT_TYPE TABLE TYPE POSSIBLE_KEYS KEY KEY_LEN REF ROWS FILTERED EXTRA
1 SIMPLE foo 索引栏 5 8 100

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T08:24:26.577

对于您的特定查询，答案是肯定的

像这样看，分组/聚合的数据越少，sql server 的负担就越小，所以。"where" 提供更好的性能，因为要做的工作更少，

但是，在您的查询中，您使用 <> / 不等于这是 sql 服务器执行的（硬）过滤器，因此您最终可能会遇到更快的 having 子句，因为服务器发现将所有内容分组更容易然后删除这个例子，

但是我怀疑，查询优化器说什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T08:13:31.433

你可以有，但你会失去对每个销售人员的总销售额求和的能力；）

最好同时使用 WHERE 和 HAVING....**

# c# - 将光标设置在 Word 文档中的句子末尾

> ID：15404096
> 
> 赞同：-1
> 
> 时间：2013-03-14T08:11:13.513
> 
> 标签：c#, ms-word

我正在用 c# 编码以将 PDF 文档转换为 MS Word 并根据我的需要格式化 word 文档。

谁能建议我如何

1.  将光标焦点设置到每个句子的末尾，并在每个句子的末尾按回车键。
2.  仅选择并格式化每个段落的第一个字母。

这是我正在使用的代码：

```
for (int i = 0; i < selectedFiles; i++)
{

    inFileName = openFile.SafeFileNames[i];
    outFileName = inFileName;
    pos = inFileName.LastIndexOf('.');
    if (pos > 0)
        outFileName = outFileName.Substring(0, pos);
    outFileName += ".doc";

    //outFileName = savePDFFile.FileName;

    //Convert(openFile.SafeFileNames[i], outFileName);
    Convert(cPath + inFileName, cPath + outFileName);

    Object oMissing = System.Reflection.Missing.Value;
    //OBJECTS OF FALSE AND TRUE
    Object oTrue = true;
    Object oFalse = false;
    //Create word document  

    Word.Application oWord = new Word.Application();
    Word.Document oWordDoc = new Word.Document();
    Object oTemplatePath = cPath + outFileName;

    oWordDoc = oWord.Documents.Add(ref oTemplatePath, ref oMissing, ref oMissing, ref oMissing);

    #region Replace Keyword
    this.FindAndReplace(oWord, "   ", " ");
    this.FindAndReplace(oWord, ". ", ".");
    this.FindAndReplace(oWord, " . ", ".");
    this.FindAndReplace(oWord, " .", ".");
    this.FindAndReplace(oWord, "-", " – ");
    this.FindAndReplace(oWord, ",", " ,");
    this.FindAndReplace(oWord, " , ", " ,");
    this.FindAndReplace(oWord, " -", "-");
    this.FindAndReplace(oWord, " - ", "-");
    this.FindAndReplace(oWord, "- ", "-");
    #endregion Replace Keyword
    Word.Range rng = null;
    if (oWordDoc.Sentences.Count > 0)
    {
        object startLocation = oWordDoc.Sentences[1].Start;
        object endLocation = oWordDoc.Sentences[1].End;
        // Supply a Start and End value for the Range. 
        rng = oWordDoc.Range(ref startLocation, ref endLocation);
        // Select the Range.
        rng.Select();
    }
    object missing = Missing.Value;
    object what = Word.WdGoToItem.wdGoToLine;
    object which = Word.WdGoToDirection.wdGoToLast;
    oWordDoc.GoTo(ref what, ref which, ref missing, ref missing);
    for (int j = 0; j < oWordDoc.Sentences.Count; j++)
    {
        //oWordDoc.Sentences[j].Text = oWordDoc.Sentences[j].Text.ToString() + "\n";
    }
    // add header
    foreach (Section section in oWordDoc.Sections)
    {
        Range headerRange = section.Headers[WdHeaderFooterIndex.wdHeaderFooterPrimary].Range;
        headerRange.ParagraphFormat.Alignment = WdParagraphAlignment.wdAlignParagraphLeft;
        headerRange.Font.Size = 12;
        headerRange.Font.Name = "Ariel";

        if (rng != null)
            headerRange.Text = rng.Text.Trim();
    }
    rng.Text = "";
    object findStr = "rr"; //sonething to find
    while (oWord.Selection.Find.Execute(ref findStr))  //found...
    {
        //change font and format of matched words
        oWord.Selection.Font.Name = "Tahoma"; //change font to Tahoma
        oWord.Selection.Font.Size = 48;
        oWord.ActiveWindow.Selection.ParagraphFormat.LineSpacingRule = Word.WdLineSpacing.wdLineSpaceSingle;
        //oWord.ActiveWindow.Selection.ParagraphFormat.SpaceAfter = 0.0F;
        oWord.Selection.Font.ColorIndex = Microsoft.Office.Interop.Word.WdColorIndex.wdRed;  //change color to red
    }
    oWordDoc.Content.Font.Name = "Franklin Gothic Book";
    oWordDoc.Content.Font.Size = 11.5F;
    oWordDoc.Content.ParagraphFormat.Alignment = Word.WdParagraphAlignment.wdAlignParagraphJustify;
    //oWordDoc.Content.Start = 0;
    oWordDoc.ShowGrammaticalErrors = false;
    oWordDoc.ShowSpellingErrors = false;
    //oWordDoc.Content.Sections.First
    oWordDoc.SaveAs(cPath + outFileName);
    progressBar1.Value = (((i + 1) * 100) / selectedFiles);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:26:31.977

您可以使用[InsertParagraphAfter](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.selection.insertparagraphafter.aspx)函数在每个句子后添加新行。

就像是：

```
 int count = oWordDoc.Sentences.Count;
       for(int i=1; i<=count;i++)
       {
          object startLocation = oWordDoc.Sentences[i].Start;
          object endLocation = oWordDoc.Sentences[i].End;
          // Supply a Start and End value for the Range. 
          rng = oWordDoc.Range(ref startLocation, ref endLocation);
          // Select the Range.
          rng.Select();
          rng.InsertParagraphAfter();
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-22T13:23:14.880

使用 Range.Move 方法在句首或句尾之间移动光标。

试试下面的代码。

```
oRange.Move(WdUnits.wdSentence, -1); 
```

如果有帮助，请将答案标记为肯定。

谢谢

# java - 不能在不同方法中定义的内部类中引用非最终变量名

> ID：15404098
> 
> 赞同：0
> 
> 时间：2013-03-14T08:11:18.027
> 
> 标签：java, android, compiler-errors

我正在尝试创建我的联系人列表的 CSV 文件。这是我为此编写的代码：

```
protected Void doInBackground(Void... params) {
    String name = "";
    String phone = "";
    ContentResolver cr = ReadContactsActivity.this.getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
            null, null, null);

    File folder = new File(Environment.getExternalStorageDirectory()
            + File.separator + getString(R.string.app_name));
    boolean var = false;
    if (!folder.exists())
        var = folder.mkdir();

    final String filename = folder.toString() + "/" + "Test.csv";

    if (cur.getCount() > 0) {
        while (cur.moveToNext()) {
            String id = cur.getString(cur
                    .getColumnIndex(ContactsContract.Contacts._ID));
            name = cur
                    .getString(cur
                            .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
            if (Integer
                    .parseInt(cur.getString(cur
                            .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                Cursor pCur = cr.query(
                        ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                        null,
                        ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                + " = ?", new String[] { id }, null);
                while (pCur.moveToNext()) {
                    phone = pCur
                            .getString(pCur
                                    .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                    // objItem = new listBean();

                    // objItem.setName(name);
                    // objItem.setNumber(phone);
                    // listArray.add(objItem);
                    new Thread() {

                        public void run() {
                            try {
                                FileWriter writer = new FileWriter(filename);
                                writer.append(name);
                                writer.append(',');
                                writer.append(phone);
                                writer.append('\n');
                                // generate whatever data you want

                                writer.flush();
                                writer.close();
                            } catch (Exception e) {
                            }
                        }
                    }.start();
                }
                pCur.close();
            }
        }
    }
    return null;
} 
```

现在我在`run()`方法中传递了姓名和电话时收到此错误：

```
Cannot refer to a non-final variable name inside an inner class defined in a different method 
```

请建议如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:13:32.580

`doInBackground`已经在一个新任务中运行。您可以使用新的`thread`.

只需摆脱：

```
 new Thread() {
                    public void run() {
                        try { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:19:21.697

在 Java 中，

在外部类的不同方法中定义的内部类内部使用的变量应该是最终的。

因此，将在 run 方法中使用的名称、电话、文件名声明为 final。

# c++ - 如何在编译时切换/选择类型？

> ID：15404102
> 
> 赞同：38
> 
> 时间：2013-03-14T08:11:27.990
> 
> 标签：c++, templates, c++11, compile-time, typetraits

**有没有一种标准方法可以让我在编译时**在 c++11 中的无符号索引上选择一种类型？

例如，类似：

```
using type_0 = static_switch<0,T,U>;  // yields type T
using type_1 = static_switch<1,T,U>;  // yields type U 
```

如果有可变参数模板版本，那将非常有用。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-14T08:14:28.760

这应该有效：

```
template<std::size_t N, typename... T>
using static_switch = typename std::tuple_element<N, std::tuple<T...> >::type; 
```

另一种方法：

```
template<std::size_t N, typename T, typename... Ts>
struct static_switch {
  using type = typename static_switch<N - 1, Ts...>::type;
};
template<typename T, typename... Ts>
struct static_switch<0, T, Ts...> {
  using type = T;
}; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-14T08:16:12.360

您可能可以使用 a`boost::mpl::vector`来存储您的类型并使用`boost::mpl::at<v,n>::type`从索引中获取类型。

```
template<std::size_t N, typename... T>
using static_switch = typename boost::mpl::at<boost::mpl::vector<T...>, N>::type; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-14T08:18:49.820

怎么样

```
 template<size_t N, typename T, typename U>
 struct static_switch {};

 template<typename T, typename U>
 struct static_switch<0, T, U>{typedef T type;};

 template<typename T, typename U>
 struct static_switch<1, T, U>{typedef U type;}; 
```

您可以按如下方式使用它：

```
using type_0 = static_switch<0,T,U>::type;  // yields type T
using type_1 = static_switch<1,T,U>::type;  // yields type U 
```

这或多或少在[std::conditional](http://en.cppreference.com/w/cpp/types/conditional)中为您实现。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-22T18:04:43.397

使用 C++17，您还可以采用另一种方式。您可以直接使用`constexpr if`和执行不同的操作（包括返回不同的类型），而不是显式计算类型：

```
template<size_t N>
decltype(auto) foo(){
  if constexpr(N%2==0){
      return std::string("Hello I'm even");
  }else{
      return std::pair(
           std::vector<char>{'O','d','d',' ','v','a','l','u','e'},
           [](){ return N; });         
  }
}

foo<0>()           // "Hello I'm even"
foo<21>().second() // 21 
```

您也可以使用它来获取类型：

```
using type_0 = decltype(foo<0>());
using type_1 = decltype(foo<1>()); 
```

# replace - tr 和括号

> ID：15404106
> 
> 赞同：0
> 
> 时间：2013-03-14T08:11:46.387
> 
> 标签：replace, parentheses, tr

我有一个巨大的文件，每行都有 SQL 查询。但是该文件有一些错误，重新创建它会花费太多时间。我有一些缺少分号的行。我看到这些行总是以 ) 结尾，然后是换行符。所以我所做的是：

```
cat file.sql | tr ')\n' ');\n' > new_file.sql 
```

但这只是在所有行上添加分号。我不明白，它似乎没有检测到括号。我只是想找到所有以括号结尾但不带分号的行，并将其添加到换行符之前。

我怎样才能做到这一点？我知道`sed`不能处理换行符，所以我认为`tr`是最好的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:14:29.567

不要`tr`为此使用，它适用于*字符集*而不是字符串 - 您拥有的命令将全部`)`转换为`)`并全部`\n`转换为`;`，忽略集合 2 中的多余字符：

```
pax> echo 'line1()
...> line2();
...> line3()' | tr ')\n' ');\n'

line1();line2();;line3(); 
```

`sed`是这项工作的更好工具：

```
sed 's/)$/);/' file.sql > new_file.sql 
```

这样做是将任何`)$`序列（在行尾的右括号）替换为`);`. 您可以在以下记录中看到它的实际效果：

```
pax> echo 'line1()
...> line2();
...> line3()' | sed 's/)$/);/'

line1();
line2();
line3(); 
```

# java - 需要帮助-struts 2中的方法特定验证

> ID：15404114
> 
> 赞同：3
> 
> 时间：2013-03-14T08:12:18.387
> 
> 标签：java, validation, struts2

我正在同一个操作类（Employee.java）中创建一个具有两种方法（execute、addEmployee）的示例应用程序。我需要验证这两种方法中的一些公共字段，并且我有一些特定于方法的验证。我的 Employee.java 代码是：

```
public class Employee extends ActionSupport{
   public String execute() 
   {
       return SUCCESS;
   }

   public String addEmployee()
   {
       return SUCCESS;
   }
} 
```

和验证文件：

Employee-validation.xml 代码，用于验证姓名和年龄字段的必需字段验证。

**员工执行验证.xml**

```
 <field name="age">
    <field-validator type="int">
    <param name="min">10</param>
    <param name="max">40</param>
    <message>Age must be in between 10 and 40</message>
    </field-validator>
    </field> 
```

**员工添加员工验证.xml**

```
 <field name="gender">
    <field-validator type="int">
    <param name="min">1</param>
    <message>Please select a value</message>
    </field-validator>
    </field> 
```

但是在运行时，只有 Employee-validation.xml 中定义的规则有效。

请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:23:13.273

验证可以按动作别名而不是按方法定义。

```
<actionClass>-<actionAlias>-validation.xml 
```

这里`actionAlias`指的是配置中的动作名称，而不是动作类中的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:28:29.003

您正在操作级别进行验证，因此将您的 {youractionfile}-validation.xml 放在您的操作类的同一包中。一个 Action 类可以有一个验证。尝试这个！！

> 员工验证.xml

```
<validators>
<field name="age">
    <field-validator type="int">
    <param name="min">10</param>
    <param name="max">40</param>
    <message>Age must be in between 10 and 40</message>
    </field-validator>
    </field> 
<field name="gender">
    <field-validator type="int">
    <param name="min">1</param>
    <message>Please select a value</message>
    </field-validator>
    </field>
</validators> 
```

# sql - Oracle 用虚拟列创建表

> ID：15404120
> 
> 赞同：1
> 
> 时间：2013-03-14T08:12:43.473
> 
> 标签：sql, oracle

我在 Oracle（Oracle 数据库 11g 企业版版本 11.1.0.7.0 - 64 位生产）上运行此 SQL：

```
CREATE TABLE R_SEQUENCES_COUNT1
  (
    DS_ID NUMBER,
    LINE_TIME TIMESTAMP(6),
    DAY_ID  DATE GENERATED ALWAYS   AS (TRUNC(LINE_TIME)),
    HOUR_ID  DATE GENERATED ALWAYS  AS (TRUNC(LINE_TIME,'HH24')) ,
    MINUTE_ID DATE GENERATED ALWAYS AS (TRUNC(LINE_TIME,'MI')) ,
    SECOND_ID DATE GENERATED ALWAYS AS (LINE_TIME),
    R_ID       NUMBER,
    SEQUENCE_ID NUMBER
  )NOLOGGING
  TABLESPACE TWC_DATA_SPACE
  PARTITION BY LIST (DS_ID)
  SUBPARTITION BY LIST(DAY_ID)
  (PARTITION DS_ID_OTHER VALUES (DEFAULT) 
  (SUBPARTITION DS_ID_OTHER_DAY_ID_OTHER VALUES (DEFAULT))) 
```

并得到这个错误：

```
Error at Command Line:8 Column:40
Error report:
SQL Error: ORA-54016: Invalid column expression was specified 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:25:31.133

如您所愿，请使用：

```
SECOND_ID DATE GENERATED ALWAYS AS (cast(LINE_TIME as date)), 
```

否则你可以这样做：

```
SECOND_ID TIMESTAMP GENERATED ALWAYS AS (LINE_TIME + numtodsinterval(0, 'day')), 
```

虽然在那种情况下不确定为什么您想要该列的精确副本？

例如第二个：

```
SQL> CREATE TABLE R_SEQUENCES_COUNT1
  2    (
  3      DS_ID NUMBER,
  4      LINE_TIME TIMESTAMP(6),
  5      DAY_ID  DATE GENERATED ALWAYS   AS (TRUNC(LINE_TIME)),
  6      HOUR_ID  DATE GENERATED ALWAYS  AS (TRUNC(LINE_TIME,'HH24')) ,
  7      MINUTE_ID DATE GENERATED ALWAYS AS (TRUNC(LINE_TIME,'MI')) ,
  8      SECOND_ID TIMESTAMP GENERATED ALWAYS AS (LINE_TIME+numtodsinterval(0, 'day')),
  9      R_ID       NUMBER,
 10      SEQUENCE_ID NUMBER
 11    )NOLOGGING
 12  /

Table created.

SQL> insert into  R_SEQUENCES_COUNT1 (ds_id, line_time) values (1, systimestamp);

1 row created.

SQL> @print_Table "select * from  R_SEQUENCES_COUNT1"
DS_ID                         : 1
LINE_TIME                     : 14-mar-2013 09:56:31.104921
DAY_ID                        : 14-mar-2013 00:00:00
HOUR_ID                       : 14-mar-2013 09:00:00
MINUTE_ID                     : 14-mar-2013 09:56:00
SECOND_ID                     : 14-mar-2013 09:56:31.104921
R_ID                          :
SEQUENCE_ID                   :
----------------- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:32:41.697

在你的创作中

```
//set condition is invalid
SECOND_ID DATE GENERATED ALWAYS AS (LINE_TIME)

// change to this...
SECOND_ID DATE GENERATED ALWAYS AS (TIMESTAMP) 
```

数据类型`TIMESTAMP`允许几分之一秒。如果将其转换为 DATE 小数秒将被删除 - 例如

所以在选择秒..

```
select cast(systimestamp as date) from dual; 
```

我认为的另一种方式是...

是`TRUNC()`时间戳到秒，您可以将其转换为日期

```
CAST( timestamp AS DATE) 
```

然后像这样执行TRUNC：

```
TRUNC(CAST(timestamp AS DATE), 'YEAR') 
```

# java - 还有一个 Ant/junit ClassNotFoundException

> ID：15404126
> 
> 赞同：0
> 
> 时间：2013-03-14T08:13:06.987
> 
> 标签：java, ant, junit

我有两个相同的构建文件，看起来像这样

构建.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="Tryout" default="test1" basedir="."> 
    <property name="src" location="src"/>
    <property name="build" location="bin"/>
    <property name="junit" location="junit-4.10.jar"/>
    <target name="compile" description="compile the source" >
        <javac srcdir="${src}" destdir="${build}" debug="on">
            <classpath location="junit-4.10.jar"/>
            <classpath location="${build}"/>
        </javac>
    </target>
    <target name="test1" depends="compile">
        <junit printsummary="yes" fork="no" haltonfailure="no">
            <classpath location="${build}"/>
            <classpath location="junit-4.10.jar"/> 
            <formatter type="plain"/>
            <test name="TestOne"/> 
            <test name="TestTwo"/>
        </junit>
    </target>
</project> 
```

唯一的区别是在 Trial1 中的类在`bin`，而在 Trial2 中的类在`bin/one/two/three`并且所有的类都在包中`one.two.three`。Trial1 运行良好，junit 测试运行并将结果打印到 txt 文件。Trial2 能够将源代码编译到适当的文件夹，但在 junit 执行时会失败。这是错误：

```
Testsuite: TestOne
Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec

    Caused an ERROR
TestOne
java.lang.ClassNotFoundException: TestOne
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264) 
```

这是我认为相关的调试的一部分

```
Class java.util.ArrayList loaded from parent loader (parentFirst)
Finding class org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner$3
Loaded from /usr/share/ant/lib/ant-junit.jar org/apache/tools/ant/taskdefs/optional/junit/JUnitTestRunner$3.class
Finding class TestOne
Class java.lang.System loaded from parent loader (parentFirst)
Class java.lang.StringBuffer loaded from parent loader (parentFirst)
    [junit] Running TestOne
Class org.apache.tools.ant.util.StringUtils loaded from parent loader (parentFirst)
Class org.apache.tools.ant.util.FileUtils loaded from parent loader (parentFirst)
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec
    [junit] Test TestOne FAILED 
```

任何帮助我指出正确方向的帮助将不胜感激！感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:41:40.593

应该是`<test name="one.two.three.TestOne"/>`因为您的测试类的名称是`one.two.three.TestOne`.

如果您希望 Ant 找到测试所在的位置，请使用以下内容：

```
<batchtest>
  <fileset dir="${src}">
    <include name="**/Test*.java"/>
  </fileset>
</batchtest> 
```

# jquery - 如何在单击元素时传递 jquery 范围？

> ID：15404127
> 
> 赞同：1
> 
> 时间：2013-03-14T08:13:13.713
> 
> 标签：jquery, function, button, scope, click

我有这个例子”

```
<div class="tmpl">
    <a href="javascript:button()" class="qwe">Button</a>
</div>

function button(){
    $(this).attr('class');
} 
```

看起来我无法访问`attr`或其他任何东西，`$(this)`或者`this`似乎不在 jQuery 范围内。

任何想法如何使用`on("click", function...)`方法来完成这项工作？

编辑：html片段是动态添加的，所以可能有`live`问题？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:16:06.793

你为什么不使用

```
<div class="tmpl">
    <a href="#" onclick="button(event)" class="qwe">Button</a>
</div>

function button(event){
    event = event || window.event;
    alert($(event.target).attr('class'));
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/ucJRA/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:20:03.040

传入参数：

```
 <div class="tmpl"> 
   <a href='#' onclick="button(this)" class="qwe">Button</a>
   <a href='#' onclick="button(this)" class="qqq">Button2</a>
   <a href='#' onclick="button(this)" class="666">Button3</a>
</div>       //^^^^^^^^^^^^^^^^^^^^^----use onclick event instead 
```

然后：

```
function button(elem) {
   alert($(elem).attr('class'));
} 
```

### [检查更新的小提琴](http://jsfiddle.net/dUufv/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T08:23:17.840

您的问题是`this`inside`button`指的是`window`，而不是点击的元素。

属性中的脚本`href`就像普通函数一样在全局范围内执行。您将无法从那里访问单击的元素。

如果您想通过属性（无论出于何种原因）绑定事件处理程序并访问该元素，则必须使用适当的内联事件处理程序：

```
<a href="#" onclick="button.call(this)" class="qwe">Button</a> 
```

[**演示**](http://jsfiddle.net/p4brV/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T08:18:10.527

qwe 不是属性而是类名，试试`$(elem).attr('class')`

**按照其他人的说明进行更新** ，您还需要更改 onclick：
`<a href="javascript:button(this)" class="qwe">Button</a>`

# html - 将html TD宽度设置为字符数

> ID：15404133
> 
> 赞同：0
> 
> 时间：2013-03-14T08:13:30.007
> 
> 标签：html, css, html-table

我想将 TD 宽度设置为字符数，例如，如果我设置为 11，则只能显示 11 个字符，其余字符必须在新行中。我尝试了 width 属性，但它在不同的浏览器/分辨率中显示不同。

```
<table border="1">
    <tr>
<td>test1</td>
<td>CRTAX_G</td>
    <td>
    28-FEB-2013, 11-MAR-2013, 13-MAR-2013
    </td>
    </tr>
<tr>
<td>test1</td>
<td>CRTAX_G</td>
    <td>
    28-FEB-2013, 11-MAR-2013, 13-MAR-2013
    </td>
    </tr>
<tr>
<td>test1</td>
<td>CRTAX_G</td>
    <td>
    28-FEB-2013, 04-MAR-2013, 05-MAR-2013, 07-MAR-2013, 11-MAR-2013, 13-MAR-2013, 12-MAR-2013, 08-MAR-2013, 06-MAR-2013
    </td>
    </tr>
<tr>
<td>test1</td>
<td>CRTAX_G</td>
    <td>
    28-FEB-2013, 11-MAR-2013, 13-MAR-2013
    </td>
    </tr>
<tr>
<td>test1</td>
<td>CRTAX_G</td>
    <td>
    28-FEB-2013, 06-MAR-2013, 08-MAR-2013, 12-MAR-2013, 13-MAR-2013, 11-MAR-2013, 07-MAR-2013, 05-MAR-2013, 01-MAR-2013
    </td>
    </tr>
    <table> 
```

它将表格中的日期在一行中显示为，

```
28-FEB-2013, 06-MAR-2013, 08-MAR-2013, 12-MAR-2013, 
```

我希望它显示为

```
 28-FEB-2013,
   11-MAR-2013,
   13-MAR-2013, 
```

每个日期都必须换行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:31:41.603

我能想象的最简单的解决方案是：

```
table tr td+td+td {
  font-size: 100%;
  font-family: monospace;
  width: 8em;
} 
```

[http://jsbin.com/elaleg/1/edit](http://jsbin.com/elaleg/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:27:36.923

您可以使用以下样式将文本包装在标签或其他任何内容中：

```
display: inline-block; width: 11em; 
```

检查[JsFiddle](http://jsfiddle.net/kbxvG/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T08:27:19.577

```
<html>
 <body>
   <table border="1">
    <tr>
        <td style="width:103px;word-wrap:break-word;">28-FEB-2013, 11-MAR-2013, 13-MAR-2013</td>
    </tr>
</table>
 </body>
</html> 
```

试试这个，我希望你能得到解决方案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T08:27:44.143

你可以[检查这个](https://stackoverflow.com/a/6843437/1371631)

或有效地尝试 css 样式的空白

```
white-space: nowrap; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-04T11:23:09.440

这是一种对我有用的解决方案。假设 td 有一个指定的类名（比如 payerName），并且表有一个 id（比如 sortable）。

```
$(".payerName").css({"white-space":"nowrap"});
$(".payerName").css({"overflow":"hidden"});
$(".payerName").css({"text-overflow":"ellipsis"});
$("#sortable").css("table-layout","fixed"); 
```

这是一组可用于避免长字符串进入 td 的步骤。ellipsis 属性将在字符串/值的末尾添加一个“...”。您可以添加 title 属性，以便在鼠标悬停时显示实际值。

希望这可以帮助！

# c# - 实体框架查询的嵌套新结果

> ID：15404137
> 
> 赞同：1
> 
> 时间：2013-03-14T08:13:34.797
> 
> 标签：c#, linq, entity-framework

我有一个按关键字和区域过滤“检查员”的功能。“Inspectors”和“Areas”之间的关系是多对多的。

```
public IQueryable<Inspector> Search(string keywords, int? areaId)
{
    var qry = this.GetAllInspectors();

    if (!String.IsNullOrEmpty(keywords))
       qry = qry.Search(keywords);

    if (areaId.HasValue)
       qry = qry.ByAreaId(areaId.Value);

    var search = from a in _entities.Areas
                 select new InspectorSearchResult
                 {
                     Area = i.Areas,
                     Inspectors = (.....).ToList()
                  };  // ??

    return qry.OrderBy(i => i.LastName).ThenBy(i => i.FirstName);
} 
```

InspectorSearchResult.cs

```
public class InspectorSearchResult
{
    public Area Area { get; set; }
    public List<Inspector> Inspectors { get; set; }
} 
```

如何修改该查询仅以嵌套形式获取“按区域检查员”？

更新：

试过这个但得到：“......方法不能被翻译成商店表达式。”

```
public List<InspectorSearchResult> Search(string keywords, int? areaId)
{
       var qry = this.GetAllInspectors();

       if (!String.IsNullOrEmpty(keywords))
          qry = qry.Search(keywords);

       if (areaId.HasValue)
          qry = qry.ByAreaId(areaId.Value);

       var search = from i in qry
                    from a in i.Areas
                    orderby a.AreaName
                    select new InspectorSearchResult
                     {
                         Area = a,
                         Inspectors = (from ins in a.Inspectors
                                       orderby ins.LastName, ins.FirstName
                                       select ins).ToList()
                     };

        return search.ToList();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:44:28.013

这是你想要达到的目标吗？

```
public List<InspectorSearchResult> Search(string keywords, int? areaId)
{
    var qry = this.GetAllInspectors();

    if (!String.IsNullOrEmpty(keywords))
        qry = qry.Search(keywords);

    if (areaId.HasValue)
        qry = qry.ByAreaId(areaId.Value);

    var search = from i in qry
        from a in i.Areas
        orderby a.AreaName
        select new InspectorSearchResult
        {
            Area = a
        };

    foreach(var x in search)
    {
        x.Inspectors = (
            from ins in a.Inspectors
            orderby ins.LastName, ins.FirstName
            select ins)
            .ToList();
    }

    return search.ToList();
} 
```

# linux - 完成 sge 作业后运行脚本

> ID：15404139
> 
> 赞同：1
> 
> 时间：2013-03-14T08:13:41.897
> 
> 标签：linux, unix, sungridengine

我正在使用太阳网格引擎 6.2u5 版本。要求是当我在完成作业上使用 qsub 命令提交作业时，我想运行一些脚本（bash 脚本）。

我如何使用 -notify 选项或任何其他方式来跟踪作业完成并在完成后执行脚本。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:21:37.757

我认为 hold_jid 是您正在寻找的：

```
qsub -hold_jid jobToWaitFor bashScript 
```

您还可以通过用逗号分隔多个作业来指定要等待的作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T10:06:40.327

在队列配置中有一个专门的选项。您可以设置将分别在作业之前和之后执行的“Prolog”或“Epilog”脚本。请参阅`man queue_conf`或[http://gridscheduler.sourceforge.net/htmlman/htmlman5/queue_conf.html](http://gridscheduler.sourceforge.net/htmlman/htmlman5/queue_conf.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T21:13:24.917

如果您的系统上没有“-hold_jid”，您可以尝试“-depend”，但它需要两个命令。

```
>> qsub script_a.sh
555.server.domain.com 

>> qsub -W depend=afterok:555.server.address.com script_b.sh
556.server.domain.com 
```

检查[此](https://stackoverflow.com/questions/3886168/how-to-automatically-run-a-bash-script-when-my-qsub-jobs-are-finished-on-a-serve)答案以等待多个作业的完成。

# android - Android中HH:MM:SS格式的倒数计时器

> ID：15404143
> 
> 赞同：18
> 
> 时间：2013-03-14T08:14:09.733
> 
> 标签：android, timer, countdowntimer, milliseconds

我正在尝试在android中开发一个倒数计时器。在此示例中，我输入了分钟数作为倒数计时器中显示的参数。

问题是当我输入分钟时，例如 65，那么计数器将是 65:00。我希望计数器以 HH:MM:SS 格式显示 1:05:00 即。

```
public class MainActivity extends Activity implements OnClickListener {

private Button buttonStartTime, buttonStopTime;
private EditText edtTimerValue;
private TextView textViewShowTime; // will show the time
private CountDownTimer countDownTimer; // built in android class
                                        // CountDownTimer
private long totalTimeCountInMilliseconds; // total count down time in
                                            // milliseconds
private long timeBlinkInMilliseconds; // start time of start blinking
private boolean blink; // controls the blinking .. on and off

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    buttonStartTime = (Button) findViewById(R.id.btnStartTime);
    buttonStopTime = (Button) findViewById(R.id.btnStopTime);
    textViewShowTime = (TextView) findViewById(R.id.tvTimeCount);
    edtTimerValue = (EditText) findViewById(R.id.edtTimerValue);

    buttonStartTime.setOnClickListener(this);
    buttonStopTime.setOnClickListener(this);

}

@Override
public void onClick(View v) {
    if (v.getId() == R.id.btnStartTime) {
        textViewShowTime.setTextAppearance(getApplicationContext(),
                R.style.normalText);
        setTimer();
        buttonStopTime.setVisibility(View.VISIBLE);
        buttonStartTime.setVisibility(View.GONE);
        edtTimerValue.setVisibility(View.GONE);
        edtTimerValue.setText("");
        startTimer();

    } else if (v.getId() == R.id.btnStopTime) {
        countDownTimer.cancel();
        buttonStartTime.setVisibility(View.VISIBLE);
        buttonStopTime.setVisibility(View.GONE);
        edtTimerValue.setVisibility(View.VISIBLE);
    }
}

private void setTimer() {
    int time = 0;
    if (!edtTimerValue.getText().toString().equals("")) {
        time = Integer.parseInt(edtTimerValue.getText().toString());
    } else
        Toast.makeText(MainActivity.this, "Please Enter Minutes...",
                Toast.LENGTH_LONG).show();

    totalTimeCountInMilliseconds = 60 * time * 1000;

    timeBlinkInMilliseconds = 30 * 1000;
}

private void startTimer() {
    countDownTimer = new CountDownTimer(totalTimeCountInMilliseconds, 500) {
        // 500 means, onTick function will be called at every 500
        // milliseconds

        @Override
        public void onTick(long leftTimeInMilliseconds) {
            long seconds = leftTimeInMilliseconds / 1000;

            if (leftTimeInMilliseconds < timeBlinkInMilliseconds) {
                textViewShowTime.setTextAppearance(getApplicationContext(),
                        R.style.blinkText);
                // change the style of the textview .. giving a red
                // alert style

                if (blink) {
                    textViewShowTime.setVisibility(View.VISIBLE);
                    // if blink is true, textview will be visible
                } else {
                    textViewShowTime.setVisibility(View.INVISIBLE);
                }

                blink = !blink; // toggle the value of blink
            }

            textViewShowTime.setText(String.format("%02d", seconds / 60)
                    + ":" + String.format("%02d", seconds % 60));
            // format the textview to show the easily readable format

        }

        @Override
        public void onFinish() {
            // this function will be called when the timecount is finished
            textViewShowTime.setText("Time up!");
            textViewShowTime.setVisibility(View.VISIBLE);
            buttonStartTime.setVisibility(View.VISIBLE);
            buttonStopTime.setVisibility(View.GONE);
            edtTimerValue.setVisibility(View.VISIBLE);
        }

    }.start();

}
} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-14T08:26:27.440

我正在使用下面的代码将持续时间转换`seconds`为格式`HH:MM:SS`。

```
String.format("%02d:%02d:%02d", durationSeconds / 3600,
                (durationSeconds % 3600) / 60, (durationSeconds % 60)); 
```

您可以轻松调整它以接受输入，`minutes`但您的输出将采用格式，`HH:MM:00`因为您没有秒数，例如：

```
String.format("%02d:%02d:%02d", durationMinutes / 60, durationMinutes % 60, 0); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-02-21T12:02:41.627

```
String.format("%02d:%02d:%02d",
            TimeUnit.MILLISECONDS.toHours(duration)%60,
            TimeUnit.MILLISECONDS.toMinutes(duration)%60,
            TimeUnit.MILLISECONDS.toSeconds(duration) % 60) 
```

# android - WiEngine Android中的随机运动

> ID：15404144
> 
> 赞同：3
> 
> 时间：2013-03-14T08:14:10.567
> 
> 标签：android

我正在使用 WiEngine 在 Android 中开发游戏。我想知道游戏中的精灵会如何随机移动？我正在使用随机函数。

```
 Random gen=new Random();
   xPos=gen.nextInt(widthX);
   yPos=gen.nextInt(widthY);
   sp1=Sprite.make(texture);
   sp1.SetPosition(xPos,yPos);
   sp1.setVelocityX(30);
   sp1.setVelocity(40); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-24T09:54:32.457

要以随机运动移动精灵，您可以`MoveTo`使用`WiEngine`. `MoveTo`方法给 ua 直线运动。

```
MoveTo move=(MoveTo)MoveTo.make(duration,startX, startY,endX,endY);
sprite.runAction(move); 
```

在中`startX`，`startY`你可以把你想放的 x,y 值

# php - 使用php将数据库从我的实时服务器导出到我的本地主机？

> ID：15404145
> 
> 赞同：0
> 
> 时间：2013-03-14T08:14:13.813
> 
> 标签：php, mysql, import, phpmyadmin, export

我有一个大型 sql 数据库，它在“实时”服务器中运行。如果发生任何错误，我通常从 phpmyadmin 手动导出数据库（查看输出文本）然后我删除 localhost 数据库并导入输出转储并导入程序。我想制作一个 PHP 文件，只需单击一下即可。你能帮我如何连接到实时服务器。导出我想要的数据库。连接到我的本地主机后，删除当前导出先前制作的 SQL 文件并导入当前程序？

谢谢对不起英语不好，这是我的第一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:19:09.527

无法将数据库从实时服务器复制到您的本地主机。但是你可以做这个技巧。

`QA database`在同一台服务器上创建另一个。使用 .将 PROD 数据库复制到该数据库中`PHP script`。连接你`localhost`的那个`QA database`。

# azure - Azure 服务 - 我可以为第二个域名添加第二个 SSL 证书吗？

> ID：15404148
> 
> 赞同：2
> 
> 时间：2013-03-14T08:14:22.283
> 
> 标签：azure, ssl-certificate

**背景：**

我有一个运行 MVC 网站的 Azure 服务帐户。它具有用于安全访问的 SSL 证书：[https ://www.caselines.co.uk](https://www.caselines.co.uk)

这很好用。

我们被要求通过另一个域提供对网站的访问，例如 www.anotherdomain.com

通过将第二个域名指向服务帐户（使用域的 www cname 属性），我们可以使用 www.anotherdomain.com 访问该网站

如果我们使用[https://www.anotherdomain.com](https://www.anotherdomain.com)，我们会收到消息“此网站的安全证书存在问题”。如果我们继续，那么该站点运行良好，但地址栏正确识别出存在证书错误。

**问题：**

问题是：如果我将第二个 SSL 证书（对于 www.anotherdomain.com）加载到服务帐户中，并在服务配置和服务定义文件的证书部分添加第二个条目，这会解决证书错误问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:16:27.847

在 Windows Azure 云服务中，SSL 证书首先作为外部绑定到您在服务中启用的端口，在您的情况下为 443。并且只有一个 443 端口，因此只有一个证书可以绑定到它。现在，在您的情况下，您有另一个 SSL 证书并想绑定到相同的 443 端口，这是因为您已经通过绑定以前的证书使用了端口 443 并且它不起作用。

当 IIS 服务器支持其中的多个网站时，它会在内部的不同端口（http 和 https）上运行所有这些网站，并根据传入的标头将请求在内部发送到不同的站点/域，这样可以正常工作。

但是，如果您的 IIS 中只有一个站点配置为使用 HTTP 和 HTTPS（带有证书），则您只能根据绑定到该 HTTPS 端口的任何证书使用一个 SSL 证书进行身份验证。

如果您有两个证书（具有相同的 CA 根），那么您可以将它们链接到一个证书中。使用 HTTPS 端口，您肯定可以使用链式证书，因此您可以尝试看看这是否满足您的要求并且两者都适用。注意：我没有尝试过类似的事情，即有两个单独的域 SSL 证书指向相同的 HTTPS 端口，所以不确定结果可能是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:11:51.990

AvkashChauhan's answer is right regarding that you can have only one binding per port, but you can use hostheaders in order to have multiple websites listening to the same port.

And now, with IIS 8 (Windows Server 2012) supporting SNI, you can have "HTTPS hostheaders".

The only problem is that you will need to automate the certificate installation and the IIS binding configuration.

I'm a Microsoft Technical Evangelist and I have posted a detailed explanation and a sample "plug & play" source-code at: [http://www.vic.ms/microsoft/windows-azure/multiples-ssl-certificates-on-windows-azure-cloud-services/](http://www.vic.ms/microsoft/windows-azure/multiples-ssl-certificates-on-windows-azure-cloud-services/)

# c++ - Cuda cudaGetTextureReference 返回“无效的纹理参考”

> ID：15404150
> 
> 赞同：2
> 
> 时间：2013-03-14T08:14:23.960
> 
> 标签：c++, parallel-processing, cuda, gpgpu, cuda-arrays

我正在开发一个小的 cuda lib，被这个烦人的 tex ref 问题所困扰。

这是 Cuda C 编程指南第 43~44 页的示例代码：

```
texture<float, cudaTextureType2D,cudaReadModeElementType> texRef;
textureReference* texRefPtr;
cudaGetTextureReference(&texRefPtr, "texRef");
cudaChannelFormatDesc channelDesc;
cudaGetChannelDesc(&channelDesc, cuArray);
cudaBindTextureToArray(texRef, cuArray, &channelDesc); 
```

当我执行它时，cudaGetTextureReference(...) 行返回错误代码`cudaErrorInvalidTexture`。我在互联网上找不到很多关于 cudaGetTextureReference 的其他示例，其中大多数都遵循与上面示例代码完全相同的过程。

沮丧的是，我后来尝试了高级 API：

```
texture<float, cudaTextureType2D,cudaReadModeElementType> texRef;
cudaBindTextureToArray(texRef, cuArray); 
```

同样的问题。如果从内核中的那个纹理读取，我得到的只是零值。

我的完整玩具测试代码，100% 重现率：（win7，cuda 5.0）

```
texture<float, cudaTextureType2D, cudaReadModeElementType> texRef;

int main ()
{
    const textureReference *tref = NULL;
    checkSuccess( cudaGetTextureReference( &tref, "texRef" ) );
    pauseConsole();
    return 0;
} 
```

对此问题的任何见解将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T08:30:48.533

> 在 CUDA 5.0 中删除了使用命名变量作为符号参数的字符串。

在[CUDA Toolkit Reference Manual 5.0](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__TEXTURE_1g2caa86a0bf6975b64c0028462301924c)的第 5.20.2.8 节/注中说明。

请改为执行以下操作：

```
cudaGetTextureReference( &tref, &texRef ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T08:31:31.790

直接传递符号，而不是作为字符串。字符串查找方法是 API 的弃用版本，已在 CUDA 5 中完全删除。您的纹理查找应写为

```
cudaGetTextureReference( &tref, &texRef ); 
```

# ios - 应用程序在 iphone 和 iPad 模拟器中运行，但在 iPad 中崩溃

> ID：15404157
> 
> 赞同：1
> 
> 时间：2013-03-14T08:14:35.400
> 
> 标签：ios, ios5, ios6, crash

我的应用程序在 iPhone 和 iPad 的模拟器中运行良好。但是应用程序在 iPad 上的启动画面崩溃，控制甚至没有达到 DidFinishLaunchingWithOptions。

这是我通过控制台收到的崩溃日志-

> 3 月 14 日 13:26:45 未知 UIKitApplication:com.beTools.dinoLearns[0x1655][197]：dyld：库未加载：/System/Library/Frameworks/AdSupport.framework/AdSupport 引用自：/var/mobile/Applications/ 74BD670F-D780-420D-8BFB-107B73798 6B3/PopLetters.app/PopLetters
> 
> 3 月 14 日 13:26:45 未知 UIKitApplication:com.beTools.dinoLearns[0x1655][197]：原因：找不到图像 3 月 14 日 13:26:45 未知 ReportCrash[196]：为进程 PopLetters[197] 制定崩溃报告14 13:26:45 未知 com.apple.launchd[1] : (UIKitApplication:com.beTools.dinoLearns[0x1655]) 作业似乎已崩溃：跟踪/BPT 陷阱：5

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:22:21.263

将您的 AdSupport 框架设置为可选而不是必需的。它对我有用。

点击项目而不是转到 Targets-> Build Phases-> Link Binary with Libraries

AdSupport 框架的状态设置为可选（可以通过点击箭头来完成）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:34:02.023

从 iOS6 可以使用 AdSupport 框架。因此，为了防止应用程序崩溃，您可以从 Project **Build Phases**中选择**Link Binary With Libraries**并将**AdSupport**标记为 Optional。

希望这会帮助你。

祝一切顺利 ！！！

# c# - 无法通过 websocket 从服务器向客户端发送数据

> ID：15404160
> 
> 赞同：2
> 
> 时间：2013-03-14T08:14:45.143
> 
> 标签：c#, .net, html, websocket

我想我需要帮助。我的理解是，一旦我将数据发送给我的客户，`onmessage()`就会被解雇。

我用 C# 创建了我的 websocket 服务器，用 HTML5 创建了我的客户端。我可以成功建立 websocket 连接，但无法向客户端发送数据。或者，我已经在发送，但没有在阅读。好吧，它只是不会激发我的`onmessage()`. 请帮忙。

C#（.net 4.0 版本）：

```
using System;
using System.Collections.Generic;
using System.Net.Sockets;
using System.Net;
using System.IO;
using System.Security.Cryptography;
using System.Threading;

namespace WebSocketServer
{
    public enum ServerLogLevel { Nothing, Subtle, Verbose };
    public delegate void ClientConnectedEventHandler(WebSocketConnection sender, EventArgs e);

    public class WebSocketServer
    {
        #region private members
        private string webSocketOrigin;     // location for the protocol handshake
        private string webSocketLocation;   // location for the protocol handshake
        #endregion
        static private string guid = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11";
        static IPEndPoint ipLocal;

        public event ClientConnectedEventHandler ClientConnected;

        /// <summary>
        /// TextWriter used for logging
        /// </summary>
        public TextWriter Logger { get; set; }     // stream used for logging

        /// <summary>
        /// How much information do you want, the server to post to the stream
        /// </summary>
        public ServerLogLevel LogLevel = ServerLogLevel.Subtle;

        /// <summary>
        /// Gets the connections of the server
        /// </summary>
        public List<WebSocketConnection> Connections { get; private set; }

        /// <summary>
        /// Gets the listener socket. This socket is used to listen for new client connections
        /// </summary>
        public Socket ListenerSocker { get; private set; }

        /// <summary>
        /// Get the port of the server
        /// </summary>
        public int Port { get; private set; }

        public WebSocketServer(int port, string origin, string location)
        {
            Port = port;
            Connections = new List<WebSocketConnection>();
            webSocketOrigin = origin;
            webSocketLocation = location;
        }

        /// <summary>
        /// Starts the server - making it listen for connections
        /// </summary>
        public void Start()
        {
            // create the main server socket, bind it to the local ip address and start listening for clients
            ListenerSocker = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);
            ipLocal = new IPEndPoint(IPAddress.Loopback, Port);
            ListenerSocker.Bind(ipLocal);
            ListenerSocker.Listen(100);

            LogLine(DateTime.Now + "> server stated on " + ListenerSocker.LocalEndPoint, ServerLogLevel.Subtle);

            ListenForClients();
        }

        // look for connecting clients
        private void ListenForClients()
        {
            ListenerSocker.BeginAccept(new AsyncCallback(OnClientConnect), null);
        }

        private void OnClientConnect(IAsyncResult asyn)
        {

            byte[] buffer = new byte[1024];
            string headerResponse = "";

            // create a new socket for the connection
            var clientSocket = ListenerSocker.EndAccept(asyn);
            var i = clientSocket.Receive(buffer);
            headerResponse = (System.Text.Encoding.UTF8.GetString(buffer)).Substring(0, i);
            //Console.WriteLine(headerResponse);

            if (clientSocket != null)
            {

                // Console.WriteLine("HEADER RESPONSE:"+headerResponse);
                var key = headerResponse.Replace("ey:", "`")
                              .Split('`')[1]                     // dGhlIHNhbXBsZSBub25jZQ== \r\n .......
                              .Replace("\r", "").Split('\n')[0]  // dGhlIHNhbXBsZSBub25jZQ==
                              .Trim();
                var test1 = AcceptKey(ref key);
                var newLine = "\r\n";
                var name = "Charmaine";
                var response = "HTTP/1.1 101 Switching Protocols" + newLine
                         + "Upgrade: websocket" + newLine
                         + "Connection: Upgrade" + newLine
                         + "Sec-WebSocket-Accept: " + test1 + newLine + newLine
                         + "Testing lang naman po:" + name
                         ;

                // which one should I use? none of them fires the onopen method
                clientSocket.Send(System.Text.Encoding.UTF8.GetBytes(response));
            }

            // keep track of the new guy
            var clientConnection = new WebSocketConnection(clientSocket);
            Connections.Add(clientConnection);
            // clientConnection.Disconnected += new WebSocketDisconnectedEventHandler(ClientDisconnected);
            Console.WriteLine("New user: " + ipLocal);
            // invoke the connection event
            if (ClientConnected != null)
                ClientConnected(clientConnection, EventArgs.Empty);

            if (LogLevel != ServerLogLevel.Nothing)
                clientConnection.DataReceived += new DataReceivedEventHandler(DataReceivedFromClient);

            // listen for more clients
            ListenForClients();

        }

        void ClientDisconnected(WebSocketConnection sender, EventArgs e)
        {
            Connections.Remove(sender);
            LogLine(DateTime.Now + "> " + sender.ConnectionSocket.LocalEndPoint + " disconnected", ServerLogLevel.Subtle);
        }

        void DataReceivedFromClient(WebSocketConnection sender, DataReceivedEventArgs e)
        {
            Log(DateTime.Now + "> data from " + sender.ConnectionSocket.LocalEndPoint, ServerLogLevel.Subtle);
            Log(": " + e.Data + "\n" + e.Size + " bytes", ServerLogLevel.Verbose);
            LogLine("", ServerLogLevel.Subtle);
        }

        /// <summary>
        /// send a string to all the clients (you spammer!)
        /// </summary>
        /// <param name="data">the string to send</param>
        public void SendToAll(string data)
        {
            Connections.ForEach(a => a.Send(data));
        }

        /// <summary>
        /// send a string to all the clients except one
        /// </summary>
        /// <param name="data">the string to send</param>
        /// <param name="indifferent">the client that doesn't care</param>
        public void SendToAllExceptOne(string data, WebSocketConnection indifferent)
        {
            foreach (var client in Connections)
            {
                if (client != indifferent)
                    client.Send(data);
            }
        }

        /// <summary>
        /// Takes care of the initial handshaking between the the client and the server
        /// </summary>

        private void Log(string str, ServerLogLevel level)
        {
            if (Logger != null && (int)LogLevel >= (int)level)
            {
                Logger.Write(str);
            }
        }

        private void LogLine(string str, ServerLogLevel level)
        {
            Log(str + "\r\n", level);
        }

        private static string AcceptKey(ref string key)
        {
            string longKey = key + guid;
            byte[] hashBytes = ComputeHash(longKey);
            return Convert.ToBase64String(hashBytes);
        }
        static SHA1 sha1 = SHA1CryptoServiceProvider.Create();
        private static byte[] ComputeHash(string str)
        {
            return sha1.ComputeHash(System.Text.Encoding.ASCII.GetBytes(str));
        }

        private void ShakeHands(Socket conn)
        {
            using (var stream = new NetworkStream(conn))
            using (var reader = new StreamReader(stream))
            using (var writer = new StreamWriter(stream))
            {
                //read handshake from client (no need to actually read it, we know its there):
                LogLine("Reading client handshake:", ServerLogLevel.Verbose);
                string r = null;
                while (r != "")
                {
                    r = reader.ReadLine();
                    LogLine(r, ServerLogLevel.Verbose);
                }

                // send handshake to the client
                writer.WriteLine("HTTP/1.1 101 Web Socket Protocol Handshake");
                writer.WriteLine("Upgrade: WebSocket");
                writer.WriteLine("Connection: Upgrade");
                writer.WriteLine("WebSocket-Origin: " + webSocketOrigin);
                writer.WriteLine("WebSocket-Location: " + webSocketLocation);
                writer.WriteLine("");
            }

            // tell the nerds whats going on
            LogLine("Sending handshake:", ServerLogLevel.Verbose);
            LogLine("HTTP/1.1 101 Web Socket Protocol Handshake", ServerLogLevel.Verbose);
            LogLine("Upgrade: WebSocket", ServerLogLevel.Verbose);
            LogLine("Connection: Upgrade", ServerLogLevel.Verbose);
            LogLine("WebSocket-Origin: " + webSocketOrigin, ServerLogLevel.Verbose);
            LogLine("WebSocket-Location: " + webSocketLocation, ServerLogLevel.Verbose);
            LogLine("", ServerLogLevel.Verbose);

            LogLine("Started listening to client", ServerLogLevel.Verbose);
            //conn.Listen();
        }

    }
} 
```

HTML5：

```
<!HTML>
    <head>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
        </script>

        <script language="javascript" type="text/javascript">  

        jQuery(document).ready(function(){
            var socket = new WebSocket("ws://127.0.0.1:8080");  
            socket.onopen = function(evt){  
                alert("Socket has been opened!");  

            }  
            socket.onmessage = function(evt) {      
                alert("On message fired up!");
            };
        });
        </script>  
    </head>
</HTML> 
```

这就是我在响应标头中得到的：

![请求-响应标头](../Images/865f70c100b97d5c24763ebe6188f80f.png)

这是我的发送方法：

```
public void Send(string str)
        {
            if (ConnectionSocket.Connected)
            {
                try
                {

                    // start with a 0x00
                    ConnectionSocket.Send(new byte[] { (byte)WrapperBytes.Start }, 1, 0);
                    // send the string
                    ConnectionSocket.Send(Encoding.UTF8.GetBytes(str));
                    /*
                    writer.Write(str);
                    writer.Flush();*/

                    // end with a 0xFF
                    ConnectionSocket.Send(new byte[] { (byte)WrapperBytes.End }, 1, 0);
                }
                catch
                {
                    if (Disconnected != null)

                        Disconnected(this, EventArgs.Empty);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:39:21.487

websocket 协议在早期草案之间经历了一些不兼容的变化。看起来您的代码分为支持最新版本和早期版本。握手基于[RFC6455](https://www.rfc-editor.org/rfc/rfc6455)（或其早期的 Hybi 草案）出现；消息发送似乎基于较早的、不兼容[的 Hixie-76](https://datatracker.ietf.org/doc/html/draft-hixie-thewebsocketprotocol-76)变体。

可以在您的服务器中支持多种协议变体。几乎所有浏览器（Windows 版 Safari 可能是一个例外）现在都支持更新的变体，所以我认为这是您想要优先考虑的版本。

要支持最新的协议变体，您需要按照 RFC6455的[数据成帧部分](https://www.rfc-editor.org/rfc/rfc6455#section-5.2)`WebSocketConnection.Send`所述进行更改以实现成帧。

接收消息的代码`WebSocketConnection`可能需要类似的更改。

# sql-server - 使用 SQLServer 存储身份验证时丢失身份验证

> ID：15404166
> 
> 赞同：0
> 
> 时间：2013-03-14T08:15:01.990
> 
> 标签：sql-server, asp.net-mvc-3, session, session-storage

我使用 InProc 模式在我的 mvc3 应用程序中存储会话，但由于大约每 20 分钟重新启动 IIS，因此更改了对 SQLServer 的存储身份验证。与数据库的连接很好，会话正在存储，但身份验证不会持续很长时间，重启后会丢失

网络配置

```
<sessionState mode="SQLServer" timeout="2880" allowCustomSqlDatabase="true"
    sqlConnectionString="data source=mydatasource;initial catalog=mydb;user id=userid;password=password;
integrated security=False;MultipleActiveResultSets=True;"
cookieless="true" />

<authentication mode="Forms">
        <forms loginUrl="~/Account/Login" timeout="2880" slidingExpiration="true" protection="All" cookieless="UseCookies"/>
    </authentication> 
```

![我的数据库截图](../Images/7a5aea8fede502e65b591256a1873b40.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:56:06.113

好吧，我终于发现了真正的问题。我有 machineKey 的随机生成器，当重新启动 IIS 时，生成了新的 machineKey，所以我无法解密 auth cookie。解决方案很简单 -> 如果您的安全级别较低，请使用静态密钥

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:17:49.150

身份验证和会话是两个完全不同的东西：

1.  [`Forms Authentication`](http://msdn.microsoft.com/en-us/library/ff647070.aspx)
2.  [`ASP.NET Session`](http://msdn.microsoft.com/en-us/library/ms972429.aspx)

区分它们是非常重要的。第一个用于跟踪您网站上经过身份验证的用户。它`<authentication>`在您的 web.config 部分中配置，您可以在其中指定 cookie 的超时和有效性。

另一方面，ASP.NET Session 可以独立使用。表单身份验证。在您的示例中，您似乎在您的应用程序中同时使用了两者。因此，请确保它们都具有相同的超时值。

从我可以看到您已将 ASP.NET 会话的超时设置为 2880。确保您的表单身份验证 cookie 也配置为相同的数量：

```
<authentication mode="Forms">
    <forms loginUrl="~/Account/Login" timeout="2880" />
</authentication> 
```

如果您没有使用表单身份验证，而是使用其他一些机制来跟踪您的身份验证用户，那么问题可能出在其他地方。

# build - Dojo 1.8 和构建（或缺少）

> ID：15404173
> 
> 赞同：14
> 
> 时间：2013-03-14T08:15:35.613
> 
> 标签：build, dojo, compilation

我真的不知道从哪里开始。

我已经阅读了每篇教程、文章和博客文章，试图让 dojo 能够让它发挥作用，而且我从来没有遇到过这样的问题，至少只是一点点。我发现文档和工作脚本的人之间存在激烈的争吵，但没有任何发布或概述。在 SO，我发现这是一个非常普遍的问题，但有一半的时间没有解决。

免责声明：忘记 1.6。我从来没有用过1.6。因此，我在网上找到的一半资源都是无效的，我的书也是如此。开始了。

# 问题 1

很多关于使用这种格式的帖子有什么区别：

```
dependencies = {
    stripConsole: "all",
    action: "release",
    optimize: "shrinksafe",
    // Omitted options...
    layers: [{
        name: "dojo.js",
        customBase : true,
            dependencies: [ 
              "dojox.gauges.AnalogNeedleIndicator",
              "myApp.smartmix"]           
        }
    ],
    prefixes: [
        [ "dijit", "../dijit" ], 
        [ "dojox", "../dojox" ],
        [ "myApp", "../../../myApp" ]
    ]
}; 
```

...与这种格式：

```
var profile = {
    basePath: './',
    stripConsole: 'all',
    selectorEngine: 'lite',
    layers: {
        'dojo/dojo': {
            include: ['dojo/dojo', 'dojo/domReady', 'dojo/_base/declare'],
            boot: true,
            customBase: true
        },
        'dgrid/dgrid': {
            include: ["dgrid/List", "dgrid/OnDemandGrid", "dgrid/Selection", "dgrid/Keyboard", "dgrid/test/data/perf"]
        }
    }
    // static-has-features removed
}; 
```

两者之间的对象有两个非常重要的区别`layers`：A）每个人似乎都只是“知道”，没有任何理由或理性，或 B）人们似乎只是“知道”。我还没有找到关于这两种语法（语法？语法？）之间差异的任何文章，这些差异与新的 AMD 结构和构建系统的重写有关。

我见过的最接近的是对象名称无关紧要，声明也无关紧要。它可以是“全局”变量（省略`var`关键字），也可以不是，只要返回的对象包含必要的信息，名称就无关紧要。

第二种格式给了我一个“意外字符串”错误，并且 99% 的时间都失败了，即使是复制/粘贴的配置文件也是如此。

# 问题2

具体需要什么？！Dojo 的文档说 package.json 和 appName.profile.js 文件是必需的，但在我见过的所有教程中，只需要和使用配置文件。因此，Dojo 的主要网站上有一半关于建筑的信息没有被使用。所以........？

Dojo 网站说要使用该`src`版本进行构建。Nabble 的一个人说你必须得到这个`svn`版本，因为 src 版本已经“构建”了。

……那么谁先上？

# 问题 3

`profile.js`有没有人，任何人，有一个他们愿意分享的工作目录结构和文件？我已经尝试了一切。我的意思是一切，得到一个构建。一个建议是使用一个空的配置文件对象。这行得通，而且没用。

另一个建议是使用 dojo 样板构建。如果任何更改破坏了模板，它有什么用？ **你所尝试**的只是一个有争议的问题，正如我所尝试的那样，用 Tony Stark 的话来说，“每个已知 [javascript 对象变体] 的每个排列。没有任何效果。”

我很快就会失去信心。不是因为经过数小时的反复试验我无法弄清楚，而是因为很多人都在同一条船上。下沉了

## 最后的问题

所以，我的最后一个请求是，有人可以解释一下这个构建系统是如何工作的，而不仅仅是指向在谷歌上可以找到的已经紫色的阅读和重新阅读的链接？

如何...您...配置 Dojo 构建配置文件...并执行它...没有错误？！这个系统的糟糕程度太疯狂了 A) 记录在案和 B) 实施，而我在做的时候 C) 教过。真累。

我访问过的一些（许多）网站：

*   [Nabble SVN 与 SDK](http://dojo-toolkit.33424.n3.nabble.com/custom-build-error-quot-location-is-not-defined-quot-td3986136.html)
*   [SitePen 教程...不产生。](http://www.sitepen.com/blog/2012/06/11/dgrid-and-dojo-nano-build/)
*   [一个“样板”配置文件（来自 SitePen）](https://github.com/csnover/dojo-boilerplate/blob/master/profiles/app.profile.js)
*   [Dojo 样板配置文件 (github)](https://github.com/csnover/dojo-boilerplate)
*   [道场教程](http://dojotoolkit.org/documentation/tutorials/1.8/build/)

## 更新

非常感谢@xesxz 和@Craig Swing。在做了一些小事之后，我得到了一个构建配置文件，它可以提供我需要的东西！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T10:37:43.167

> 很多关于使用这种格式的帖子有什么区别......

您的第一个示例是针对 Dojo 1.7 之前的构建。如果您使用的是 1.7 或更高版本，则需要第二个示例。

> Dojo 网站说使用 src 版本进行构建。Nabble 的一个人说您必须获得 svn 版本，因为 src 版本已经“构建”。
> 
> ……那么谁先上？

[您需要来自http://dojotoolkit.org/download/](http://dojotoolkit.org/download/)的 SDK

在页面上，它被标记为“来源”。这包含一个包含所有构建脚本的 util 目录，以及包含 dojo 文件的非构建版本的其他目录。

> 有没有人，任何人，有一个他们愿意分享的工作目录结构和 profile.js 文件？

我正在从事的项目与@xesxz 发布的项目具有相似的结构。但是，我试过使用`boot: true, customBase: true`没有成功。以下是我的个人资料。（我的目录结构有点不同，所以路径与@xesxz 发布的不匹配）。

在我的应用程序中，我将包括以下内容

*   道场/道场.js
*   myCore/core.js
*   myAppModuleX/app.js，其中 X 是我在页面上使用的特定模块。

core.profile.js（用于构建）

```
var profile = (function(){
     var coreRequires = [
        "dojo/_base/declare",
        "dojo/_base/fx",
        "dojo/_base/lang",
        "dojo/currency",
        "dojo/fx",
        "dojo/number",
        "dojo/on",
        "dojo/query",

        "dijit/dijit",

        "myCore/ACoreWidget"
    ];

    return {
        basePath:       "./dojo-release-1.8.3-src",
        releaseDir:     "../../DEV-REL",
        action:         "release",
        cssOptimize:    "comments",
        selectorEngine: "acme",

        packages:[{
            name: "dojo",
            location: "dojo"
        },{
            name: "dijit",
            location: "dijit"
        },{
            name: "dojox",
            location: "dojox"
        },{
            name: "myCoreModule",
            location: "../myCore"
        },{
            name: "myAppModule1",
            location: "../myAppModule1"
        },{
            name: "myAppModule2",
            location: "../myAppModule2"
        }],

        layers: {
            "myCore/core": {
                include:    coreRequires
            },

            "myAppModule1/app": {
                include:    [
                    "myAppModule1/WidgetX"
                ],
                exclude: coreRequires
            },

            "myAppModule2/app": {
                include:    [
                    "myAppModule2/WidgetY"
                ],
                exclude: coreRequires
            }
        }
    };
})(); 
```

> 如何...您...配置 Dojo 构建配置文件...并执行它...没有错误？

我使用节点来构建。这将在包含构建配置文件的目录中执行。

```
node dojo-release-1.8.3-src/dojo/dojo.js load=build --profile core.profile.js --release --version=1.8.3 
```

* * *

我的建议是尝试使用非常简单的单个自定义小部件来完成构建。如果可行，那么您真正的小部件

关于`unexpected String`,

*   您的所有小部件都使用新的 AMD 语法吗？
*   你有 dgrid，但我相信它依赖于`put-selector`和`xStyle`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T09:19:19.053

我最近刚刚经历了这个过程，我完全可以理解你的沮丧。我尝试了 Dojo 样板，但没有成功。然后我按照 Dojo 教程进行操作。我的目录是平的，像这样，

```
 ____app
 |   |__app.profile.js
 |   |__package.json
 |   |__app.js (main js file, which requires other modules)
 |   |__other.js
 | 
 |__dojo
 |__dijit
 |__dojox
 |__util
 |__application.profile.js 
```

应用程序构建配置文件 (application.profile.js) 是从 Dojo Boilerplate 复制的，如下所示，

```
var profile = {
    basePath: '.',
    action: 'release',
    cssOptimize: 'comments',
    mini: true,
    optimize: 'closure',
    layerOptimize: 'closure',
    stripConsole: 'none',
    selectorEngine: 'acme',
    packages: [
        {name: 'dojo', location: 'dojo'},
        {name: 'dijit', location: 'dijit'},
        {name: 'dojox', location: 'dojox'},
        {name: 'util', location: 'util'},
        {name: 'app', location: 'app'}
    ],

    layers: {
        'dojo/dojo': {
            include: ['dojo/i18n', 'dojo/domReady'],
            boot: true,
            customBase: true
        },
        'app/app': {}
    },
    staticHasFeatures: {
        'dojo-trace-api': 0,
        'dojo-log-api': 0,
        'dojo-publish-privates': 0,
        'dojo-sync-loader': 0,
        'dojo-xhr-factory': 0,
        'dojo-test-sniff': 0
    }
}; 
```

在我自己的应用程序目录中，我有 package.json（它指定“dojoBuild”：“package.js”属性）和包构建配置文件 package.js 文件，看起来像这样，

```
var profile = {
resourceTags: {
    test: function (filename, mid) {
        return false;
    },
    copyOnly: function (filename, mid) {
        return (!/\.js$/.test(filename) && !/\.css$/.test(filename));
    },
    amd: function (filename, mid) {
        return !this.copyOnly(filename, mid) && /\.js$/.test(filename);
    },

    miniExclude: function (filename, mid) {
        return mid in {
            'app/package': 1
        };
    }
}; 
```

然后我运行 until/buildscripts/build.sh --profile application.profile.js。我仍然遇到很多错误，但最后，我在发布目录中有我的构建，它似乎工作正常。对我来说，下一步是找出这些错误。我希望这有帮助。

# jenkins - 设置一个 Jenkins 让另一个 Jenkins 发送电子邮件

> ID：15404177
> 
> 赞同：0
> 
> 时间：2013-03-14T08:15:58.617
> 
> 标签：jenkins

我有两台 Jenkins 服务器 A 和 B，在不同的网络中运行。“A”服务器还包含我们的 SVN。“A”运行我们常见的 Jenkins 构建，而“B”主要用于部署。但是，服务器“A”无法访问（我认为）我们的 SMTP 服务器，而“B”可以。

是否可以设置“A”和“B”以便“A”构建工作，如果它失败，它会以某种方式触发“B”向破坏构建的开发人员发送电子邮件？电子邮件发送以前仅在服务器“B”上完成，所以我不确定：1）B 是否可以由 A 触发，以及 2）B 是否可以以某种方式从 A 获取电子邮件地址列表被送到

# python - 无法执行功能

> ID：15404185
> 
> 赞同：0
> 
> 时间：2013-03-14T08:16:28.853
> 
> 标签：python, class, function, openerp

这是我的课程和方法。我只是为获取记录而写，需要打印它们。但是在调试模式下运行 openerp 时。它不起作用，也不适用该方法。& 还需要澄清 OpenERP 7 的获取方法

```
class namelistupdate(osv.osv):
def _mytest_query(self, cr, uid, ids, name, args, context=None):
    print ('here is demo sql query function result ')
    cr.execute("""SELECT module,(id*5000)as result FROM ir_model_data WHERE id=1""")
    res = cr.dictfetchall()
    print ('here is demo sql query function result ')
    print (res)

def _invoiced_rate(self, cr, uid, ids, name, args, context):
    self._mytest_query(self, cr, uid, ids, name, args, context)
    amount_untaxed = 1
    record_id = ids[0]
    res = {record_id: 0.0}
    if amount_untaxed == 0:
        res[record_id] = 100.0
    else:
        res[record_id] = 50.0
    return res

_name = "checkroll.namelist.update"
_description = "This table is for keeping Name list updates"
_columns = {        
    'date': fields.date("Date"),
    'val': fields.function(_invoiced_rate, method=True, type='float', string='Test', store=True),
} 
```

名单更新（）

错误如下

```
客户端回溯（最近一次通话最后一次）：文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/addons/web/http.py”，第 203 行，在调度中
    响应[“结果”] = 方法（自我，**self.params）文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/addons/web/controllers/main.py”，第 1074 行，在 call_kw
    return self._call_kw(req, model, method, args, kwargs) 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/addons/web/controllers/main.py”，第 1066 行，在 _call_kw
    返回 getattr(req.session.model(model), method)(*args, **kwargs) 文件 "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/addons/web/session.py",第 43 行，在代理中
    结果=self.proxy.execute_kw（self.session._db，self.session._uid，self.session._password，self.model，方法，args，kw）文件“/home/priyan/Software/openerp-7.0-20130309 -002120/openerp/addons/web/session.py”，第 31 行，在 proxy_method 中
    结果 = self.session.send(self.service_name, method, *args) 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/addons/web/session.py”，第 104 行，在发送中
    引发 xmlrpclib.Fault(openerp.tools.ustr(e), formatted_info)

服务器回溯（最近一次通话最后一次）：文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/addons/web/session.py”，第 90 行，在发送中
    返回 openerp.netsvc.dispatch_rpc(service_name, method, args) File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/netsvc.py", line 293, in dispatch_rpc
    结果 = ExportService.getService(service_name).dispatch(method, params) 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/service/web_services.py”，第 618 行，在调度中
    res = fn(db, uid, *params) 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/osv.py”，第 188 行，在 execute_kw
    return self.execute(db, uid, obj, method, *args, **kw or {}) File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/osv.py", line 131，在包装中
    返回 f(self, dbname, *args, **kwargs) 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/osv.py”，第 197 行，执行
    res = self.execute_cr(cr, uid, obj, method, *args, **kw) 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/osv.py”，第 185 行，在执行_cr
    返回 getattr(object, method)(cr, uid, *args, **kw) File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/orm.py", line 4479, in create
    self.pool.get(object)._store_set_values(cr, user, ids, fields2, context) 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/orm.py”，第 4627 行，在 _store_set_values
    结果 = self._columns[f].get(cr, self, ids, f, SUPERUSER_ID, context=context) 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/fields.py” ，第 1131 行，在获取
    结果= self._fnct（obj，cr，uid，ids，名称，self._arg，上下文）文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/addons/checkroll/checkroll.py”，第 55 行，在 _invoiced_rate
    self._mytest_query(self, cr, uid, ids, name, args, context) TypeError: _mytest_query() 需要 7 个参数（给定 8 个）

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:36:42.790

删除参数列表中的*self*关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:51:57.883

您在代码中为从函数调用函数所做的操作是完全错误的吗？

在python中调用函数，我们用圆括号指定函数名，你没有指定。

其次需要将参数作为函数中的参数数量传递。

所以你的代码必须是这样的：

```
def _invoiced_rate(self, cr, uid, ids, name, args, context):
        self._mytest_query(cr, uid, ids, name, args, context)
        amount_untaxed = 1
        record_id = ids[0]
        res = {record_id: 0.0}
        if amount_untaxed == 0:
            res[record_id] = 100.0
        else:
            res[record_id] = 50.0
        return res 
```

并且在完成函数返回语句之后需要否则返回 None 为默认值。

您可以参考如何在 python 中定义函数：http: [//docs.python.org/2/tutorial/controlflow.html#defining-functions](http://docs.python.org/2/tutorial/controlflow.html#defining-functions)

对于 openerp 功能，您可以在此处获得详细说明：http://doc.openerp.com/v6.1/developer/03_modules_2.html[在](http://doc.openerp.com/v6.1/developer/03_modules_2.html)“功能字段”标签下。希望这有帮助

# javascript - 切换 jQuery 矢量地图中的函数

> ID：15404186
> 
> 赞同：2
> 
> 时间：2013-03-14T08:16:46.483
> 
> 标签：javascript, jquery, html, css

如何在jQuery矢量图中实现切换功能，

我的要求在这里：如果用户选择了任何区域，它应该用颜色突出显示。如果用户单击同一区域，它应该进入旧状态（没有颜色或默认状态）。

我可以使用 JS 和 jQuery 来实现这一点，还是需要任何其他插件帮助。

非常感谢任何想法、建议和指导。谢谢

## 示例代码：

```
<script src="Mobile Portal Management Tool (MPMT)_files/jqvmap/maps/jquery.vmap.usa.js" type="text/javascript"></script>
<script type="text/javascript">

jQuery(document).ready(function() {
    jQuery('#vmap').vectorMap({
        map: 'usa_en',
        enableZoom: true,
        showTooltip: true,
    //    selectedRegion: 'MO'
        onRegionClick: function(event, code, region)
        {
           /* var message = 'You selected "'
                + region 
                + '" which has the code: '
                + code.toUpperCase()
     //       alert(message);
            $('#location-selected').html(message); */

            var ul = $('#location-selected');
            var list = ul.children('li');
            var isInList = false;
            for(var i = 0; i < list.length; i++){
                if(list[i].innerHTML === region) {
                    isInList = true;
                    break;
                }
            }
            if(isInList)
                alert("User selected region already in the list")
            else
                var newli = $('<li></li>').html(region).appendTo(ul);       

            $('ul').children('li').on('dblclick',function()
            {
                //alert("Selected list item will be removed from the list...")
                $(this).remove();
            });
         }

    });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:36:37.917

您可以通过将属性分配给`colors`选定区域来执行此操作。例如，要使加利福尼亚蓝，你可以写这样的东西

```
 var highlight = {colors: {ca : '#0000ff'}} 
```

要从时钟回调设置颜色属性，您可以调用它

```
 onRegionClick: function(element, code, region) {
        $('#vmap').vectorMap('set', 'colors', highlight);
    } 
```

And to toggle the colors you can add in a if switch that just checks if the element has the highlight color set. And this you can also use to append/remove the region to/from the list.

```
 $(document).ready(function() {
        highlight = {};
        $('#vmap').vectorMap({
            map: 'usa_en',
            enableZoom: true,
            showTooltip: true,
            color: '#f4f3f0',
            onRegionClick: function(element, code, region) {
                if(highlight[code]!=='#0000ff'){
                    highlight[code]='#0000ff';
                    $('<li id=\"li_'+code+'\"></li>').html(region).appendTo($('#location-selected'));
                } else {
                    highlight[code]='#f4f3f0';
                    $('#li_'+code).remove();
                }
                $('#vmap').vectorMap('set', 'colors', highlight);
            },
             onRegionOut: function(element, code, region){
                 $('#vmap').vectorMap('set', 'colors', highlight);
             },
        });
    }); 
```

I also put this on jsfiddle for a quick illustration: [**http://jsfiddle.net/FxVzG/**](http://jsfiddle.net/FxVzG/)

For it to work properly you need to set the colors also in the `onRegionOut`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:23:54.247

创建一个 CSS 类来突出显示然后使用 JS 或 jQuery 来切换？

**CSS 高亮类：**

```
.highlighted {
    -webkit-box-shadow: 0 0 8px #FFD700;
    -moz-box-shadow: 0 0 8px #FFD700;
    box-shadow: 0 0 8px #FFD700;
    cursor:pointer;
} 
```

**jQuery 切换**

```
$(document).ready(function(){
    $('#text').click(function(){
        $(this).toggleClass('highlighted');
    });
}); 
```

取自 Codecademy 的示例：[JSFiddle](http://jsfiddle.net/bHemN)

# android - IBM Worklight：Android 设备上的推送通知错误

> ID：15404190
> 
> 赞同：0
> 
> 时间：2013-03-14T08:17:02.830
> 
> 标签：android, ibm-mobilefirst

我已经下载了推送通知模块的示例应用程序，并尝试在三星 Tab 2 上运行它。我发现它需要 senderId 和 Key，所以我使用 Google 的 GCM 控制台创建了这些值。然后，我运行了应用程序，它成功了。然后我通过示例应用程序订阅并按下登录按钮。登录后，我的 LogCat 显示以下内容：

> 03-14 13:03:10.648: V/GCMRegistrar(9351): Saving regId on app version 1 03-14 13:03:10.648: D/WLDroidGap(9351): Registered at the GCM server with registration id APA91bEUF25J1woHwcfEhG-73XXUyRJw6ul26VF0GQJBJQ9gtgjg0QK5gQ9Nq2sAeHiOKCJGRlJJvZ_0CvibjwS_eg9IUkHKez9zVxbgCtPsWj85DuHv6JbzydQY182- HvkbfM45lGG8cF_ndknxnG8XpyaZnh55eQ
> 
> 03-14 13:03:10.671: D/WLDroidGap(9351): 通知 javascript 注册成功
> 
> 03-14 13:03:10.679：D/PushApplication(9351)：推送通知设备令牌已更改，正在更新服务器通知令牌 ID。
> 
> 03-14 13:03:10.687: D/PushApplication(9351): 请求 [http://192.168.1.206:8080/apps/services/api/PushApplication/android/notifications]
> 
> 03-14 13:03:10.710: D/PushApplication(9351): 响应 [http://192.168.1.206:8080/apps/services/api/PushApplication/android/notifications] 成功：/*-secure-
> 
> 03-14 13:03:10.710: D/PushApplication(9351): {"errors":[],"isSuccessful":true,"warnings":[],"info":[]}*/
> 
> 03-14 13:03:12.914: D/PushApplication(9351): 请求 [http://192.168.1.206:8080/apps/services/api/PushApplication/android/notifications]
> 
> 03-14 13:03:12.929: D/WLDroidGap(9351): Javascript 脚本请求调度到 WL.Client.Push.__onmessage
> 
> 03-14 13:03:52.625: D/PushApplication(9351): 请求 [登录]
> 
> 03-14 13:03:52.695: D/PushApplication(9351): 请求 [http://192.168.1.206:8080/apps/services/api/PushApplication/android/notifications]
> 
> 03-14 13:03:52.750: D/PushApplication(9351): 响应 [http://192.168.1.206:8080/apps/services/api/PushApplication/android/notifications] 成功：/*-secure-
> 
> 03-14 13:03:52.750: D/PushApplication(9351): {"isSuccessful":true,"WL-Authentication-Success":{"PushAppRealm":{"userId":"hello_13@gmail.com","属性":{},"isUserAuthenticated":1,"displayName":"hello_13@gmail.com"}}}*/

然后过了一段时间我的日志猫显示：

> unregisterReceivers：接收方未注册：com.worklight.androidgap.plugin.Push$1@4128e920

和网络控制台上的这个错误：

> {"WL-Authentication-Success":{"wl_deviceNoProvisioningRealm":{"userId":"device","attributes":{"mobileClientData":"com.worklight.core.auth.impl.MobileClientData@e0d191"}," isUserAuthenticated":1,"displayName":"device"}},,"WL-Authentication-Failure":{"wl_remoteDisableRealm":{"reason":"登录失败"}}}*/

接下来登录并订阅后，它不会显示任何可以让我知道通知是否已成功推送的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:08:02.660

流程是错误的。在将其登录到应用程序之前，您无法订阅。您首先登录，然后单击订阅按钮，该按钮应显示一个弹出窗口，说明订阅成功。然后，您可以单击 isPushSupported 和 isSubscribed 按钮来验证这一点。

之后发送通知也应该成功。

谷歌可能会自行取消注册有一段时间没有收到推送通知的用户（它不会在这样做多长时间后透露），这可能是您的问题。您没有指定足够清晰的复制步骤。

# android - java.lang.string 无法转换为 jsonarray asp.net

> ID：15404196
> 
> 赞同：1
> 
> 时间：2013-03-14T08:17:34.303
> 
> 标签：android, asp.net, json

我有一个 asp.net WCF，其中包含一个函数，该函数将序列化 LINQ 结果并返回这个 json 字符串

```
"[{\"intPromoter\":1,\"varID\":\"DP900001\",\"varName\":\"Jay Chou\"}]" 
```

但这似乎与我正在学习的 json 有点不同，所以我在 android java 中用这段代码添加了“行”

```
 text = "{\"rows\":" + text  + "}"; 
```

它变成了这样

```
{"rows":"[{\"intPromoter\":1,\"varID\":\"DP900001\",\"varName\":\"Jay Chou\"}]"} 
```

所以当我使用下面的函数解析成 json 数组时，它给了我 java.lang.string 无法转换为 jsonarray。所以我不确定来自.net的字符串是否需要在json读取之前更改为某种格式，或者是否有直接的方法而不在开头添加“行”。提前致谢。

```
JSONObject jObject = new JSONObject(results);
JSONArray jArray = jObject.getJSONArray("rows"); //This LINE GIVE error,

for (int i=0; i < jArray.length(); i++)
{
JSONObject oneObject = jArray.getJSONObject(i);

int intPromoter =Integer.parseInt(oneObject.getString("KEY_intPromoter"));
String varID = oneObject.getString("KEY_varID");
String varName = oneObject.getString("KEY_varName");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:23:19.393

您的最终字符串将数组括在双引号中，这意味着它是字符串而不是数组。删除这些，它应该可以正常工作。

例如

```
{"rows":[{"intPromoter":1,"varID":"DP900001","varName":"Jay Chou"}]} 
```

此外，您应该能够通过直接从服务器的字符串中实例化 JSONArray 来完全消除对 JSONObject 的需求，例如

```
JSONArray rows = new JSONArray(json); 
```

有关详细信息，请参阅以下文档：

[http://developer.android.com/reference/org/json/JSONArray.html](http://developer.android.com/reference/org/json/JSONArray.html)

# c# - 使用 PhpMyAdmin 验证登录

> ID：15404198
> 
> 赞同：1
> 
> 时间：2013-03-14T08:17:44.790
> 
> 标签：c#, mysql, login, phpmyadmin

我有一个这样的示例表格：

![图片](../Images/f7539a1bff06f9cbe5ebd38c815b09c0.png)

我`dbconnect`用 select 方法创建了类，它是这样的：

```
public List<string>[] Select(string username, string password)
{
    string query = "SELECT * FROM ms_user where username = '" + username + 
        "' and password = '" + password + "'";

    //Create a list to store the result
    List<string>[] list = new List<string>[2];
    list[0] = new List<string>();
    list[1] = new List<string>();           

    //Open connection
    if (this.OpenConnection() == true)
    {
        //Create Command
        MySqlCommand cmd = new MySqlCommand(query, connection);
        //Create a data reader and Execute the command
        MySqlDataReader dataReader = cmd.ExecuteReader();

        //Read the data and store them in the list
        while (dataReader.Read())
        {
            list[0].Add(dataReader["username"] + "");
            list[1].Add(dataReader["password"] + "");                    
        }

        //close Data Reader
        dataReader.Close();

        //close Connection
        this.CloseConnection();

        //return list to be displayed
        return list;
    }
    else
    {
        return list;
    }
} 
```

如何使用此方法登录？因为该方法返回一个列表而不是`true`检查`false`数据库中是否存在该值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:24:59.183

```
Boolean loginSuccessful = Select(username, password).Count > 0; 
```

但是，请查看有关如何在数据库中存储密码（例如，[这个](https://stackoverflow.com/questions/1054022/best-way-to-store-password-in-database)）和 SQL 注入（例如，[这个](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)）的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:34:41.650

我认为与其直接回答您的问题（因为这很简单——如果找不到用户，您只需返回 null 而不是 List），您最好获取一些资源来获取更多阅读材料。

如果您阅读一些有关 SQL 注入的信息，我认为您会特别受益： [http ://www.unixwiz.net/techtips/sql-injection.html](http://www.unixwiz.net/techtips/sql-injection.html)

之后阅读以下教程 - 它非常好：http: [//zetcode.com/db/mysqlcsharptutorial/](http://zetcode.com/db/mysqlcsharptutorial/)

最后，我建议至少在您获得一些经验之前，在将值传递到 SQL 时始终坚持使用 MySqlParameter。[在 StackOverflow -> Parameterized Query for MySQL with C#](https://stackoverflow.com/questions/652978/parameterized-query-for-mysql-with-c-sharp)上查看这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T08:22:53.643

我会在阅读器中添加一个变量，只要找到并匹配用户帐户，该变量就会增加。

```
 x int = 0;
    if (this.OpenConnection() == true)
    {
        //Create Command
        MySqlCommand cmd = new MySqlCommand(query, connection);
        //Create a data reader and Execute the command
        MySqlDataReader dataReader = cmd.ExecuteReader();

        //Read the data and store them in the list
        while (dataReader.Read())
        {
            list[0].Add(dataReader["username"] + "");
            list[1].Add(dataReader["password"] + ""); 
            x++;
        }

        //close Data Reader
        dataReader.Close();

        //close Connection
        this.CloseConnection();

        //return list to be displayed
        return x;
    } 
```

然后，在您的应用程序中使用控制结构来检查 x > 0。如果是，请登录用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T08:24:15.540

哇，看来您需要学习构建查询和 sql 注入。

还有密码、哈希、加密和盐。

然后异常。

然后删除不适合类型语言的（+“”），并且在大多数情况下都是糟糕的形式。

然后 == true 测试是不好的风格，多余的。

# python - Django - 自定义管理操作日志

> ID：15404199
> 
> 赞同：13
> 
> 时间：2013-03-14T08:17:45.407
> 
> 标签：python, django

您在 Django Admin 中所做的所有更改都记录在 django_admin_table 表中，您还可以在“最近的操作”中查看您最近的更改。

但是，当您编写自己的“管理操作”并通过它们进行更改时，默认情况下不会记录任何内容。

例子：

```
def make_checked(modeladmin, request, queryset):
    queryset.update(checked = 1)
make_checked.short_description = 'Mark selected products as checked' 
```

我现在的问题是是否可以记录自定义管理员操作，如果可以，如何？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-14T08:28:45.993

查看管理员的[`LogEntry`](https://github.com/django/django/blob/master/django/contrib/admin/models.py#L23)模型，更重要的是[`LogEntryManager`](https://github.com/django/django/blob/master/django/contrib/admin/models.py#L16). 模型管理器提供了一种`log_action`方法，可以很容易地添加您自己的日志条目（这是未经测试的，但应该给你的想法）：

```
from django.contrib.admin.models import LogEntry, CHANGE
from django.contrib.contenttypes.models import ContentType

def make_checked(modeladmin, request, queryset):
    queryset.update(checked = 1)

    ct = ContentType.objects.get_for_model(queryset.model)
    for obj in queryset:
        LogEntry.objects.log_action(
            user_id=request.user.id, 
            content_type_id=ct.pk,
            object_id=obj.pk,
            object_repr=obj.description,
            action_flag=CHANGE,
            change_message="You have ...") 
make_checked.short_description = 'Mark selected products as checked' 
```

您可以看到一些[在普通 django admin 中使用的日志记录](https://github.com/django/django/blob/stable/3.2.x/django/contrib/admin/options.py#L804)示例。如果您只想`LogEntry`为整个查询集添加一个，您可以手动完成（因为`log_entry`上面需要一组特定的参数来记录单个对象）：

```
l = LogEntry(user_id=request.user.id, actions_flag=CHANGE, change_message="...")
l.save() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-06-21T14:17:42.137

实际上，现在有一种比接受的答案更简单的方法，只要您有一个`ModelAdmin`可用的方法，您可以在自定义操作的情况下执行此操作。

该类`ModelAdmin`没有很好的文档记录，但它实际上[提供了这些方法](https://docs.djangoproject.com/en/2.2/_modules/django/contrib/admin/options/#ModelAdmin)作为快捷方式：

```
def log_addition(self, request, object, message):
    """
    Log that an object has been successfully added.

    The default implementation creates an admin LogEntry object.
    """

def log_change(self, request, object, message):
    """
    Log that an object has been successfully changed.

    The default implementation creates an admin LogEntry object.
    """

def log_deletion(self, request, object, object_repr):
    """
    Log that an object will be deleted. Note that this method must be
    called before the deletion.

    The default implementation creates an admin LogEntry object.
    """ 
```

这些都很容易使用。继续问题中的示例：

```
def make_checked(modeladmin, request, queryset):
    queryset.update(checked = 1)
    for obj in queryset:
        modeladmin.log_change(request, obj, 'Marked checked: ' + str(obj))
make_checked.short_description = 'Mark selected products as checked' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T18:04:10.687

谢谢！经过一些小改动后完美运行：

```
def make_checked(modeladmin, request, queryset):
    queryset.update(checked = 1)

    ct = ContentType.objects.get_for_model(queryset.model) # for_model --> get_for_model
    for obj in queryset:
        LogEntry.objects.log_action( # log_entry --> log_action
            user_id = request.user.id,
            content_type_id = ct.pk,
            object_id = obj.pk,
            object_repr = obj.title,
            action_flag = CHANGE, # actions_flag --> action_flag
            change_message = 'Changed checked.')
make_checked.short_description = 'Mark selected products as checked' 
```

# java - 在 Android 中使用 ArrayList 填充 Spinner

> ID：15404206
> 
> 赞同：5
> 
> 时间：2013-03-14T08:18:31.020
> 
> 标签：java, android, arraylist, spinner

我有一个活动，我必须解析 XML 并使用解析的数据填充 Spinner。

我完成了对 XML 的解析。这是方法：

```
void parse_ExamList()
                    {

                        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

                        XMLParser parser = new XMLParser();
                        //String xml = parser.getXmlFromUrl(URL); // getting XML
                        Document doc = parser.getDomElement(xmlContent); // getting DOM element

                        //count_questions=2;

                        NodeList nl = doc.getElementsByTagName(KEY_EXAMSET);
                        // looping through all item nodes <item>
                        for ( int i = 0; i < nl.getLength();i++) {

//                      while(counter< nl.getLength())
//                      {
                            // creating new HashMap
                            HashMap<String, String> map = new HashMap<String, String>();

                            Element e = (Element) nl.item(i);
                            // adding each child node to HashMap key => value
                            //map.put(KEY_EXAMSET, parser.getValue(e, KEY_EXAMSET));
                            map.put(KEY_SETID, parser.getValue(e, KEY_SETID));
                            map.put(KEY_SETNAME, parser.getValue(e, KEY_SETNAME));
                            //Log.i("Set ID: ", parser.getValue(e, KEY_SETID));
                            //Log.i("Set Name: ", parser.getValue(e, KEY_SETNAME));

                            menuItems.add(map);
                        }

                    } 
```

如果您注意到，您可以在数组列表中看到**KEY_SETID**和**KEY_SETNAME**。我必须使用**KEY_SETNAME**填充微调器，并且**KEY_SETID**不会显示在微调器中。但是如果单击该项目，则应获取与名称对应的 id 以便发送到服务器。

我有一种填充微调器的方法，如下所示：

```
// add items into exam list spinner dynamically
                    public void addItemsOnExamListSpinner()
                    {
                        List<String> list = new ArrayList<String>();
                        list.add("Speed Test 150(min) PO Set-01");

                        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
                        android.R.layout.simple_spinner_item, list);
                        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                        exam_list_spinner.setAdapter(dataAdapter);
                    } 
```

**我应该如何使用解析 XML 时获得的 ArrayList 填充微调器？**

这是**完整的活动**：

```
public class SpeedTestExamNameActivity extends Activity {

    Spinner exam_list_spinner;
    Button  detailsBtn;
    TextView showUser;
    String full_name;

    //variables to get response from server
    String responseBody;

    //variables required for parsing the XML
    String xmlContent=null;

 // XML node keys
    static final String KEY_EXAMSET = "ExamSet"; // parent node
    static final String KEY_SETID = "SetId";
    static final String KEY_SETNAME = "SetName";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_speed_test_exam_name);

        //checking internet connectivity to download list
        isOnline_downloadList();

        //Showing user full name after login
        full_name=getFromPreference("user_name");
        //textview to show user name
        showUser=(TextView)findViewById(R.id.speed_username_textView);
        showUser.setText("Welcome, "+full_name);
        //spinner
        exam_list_spinner = (Spinner) findViewById(R.id.speed_examlist_spinner);
        //adding items to spinners
        addItemsOnExamListSpinner();

        // onclick details button
        detailsBtn = (Button) findViewById(R.id.speed_exam_details_button);
        detailsBtn.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        Toast.makeText(SpeedTestExamNameActivity.this,                      
                                "Exam List Spinner: "+ String.valueOf(exam_list_spinner.getSelectedItem()),
                                Toast.LENGTH_SHORT).show();

                        Intent intent = new Intent(SpeedTestExamNameActivity.this, SpeedTestActivity.class);
                        SpeedTestExamNameActivity.this.startActivity(intent);
                    }
                  });
    }

    //getting content from preferences
        public String getFromPreference(String variable_name)
        {
            String preference_return;
            SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
            preference_return = preferences.getString(variable_name,"");

           return preference_return;
        }

        //check connection
        public boolean isOnline_downloadList() {
            ConnectivityManager cm =(ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo netInfo = cm.getActiveNetworkInfo();
            if (netInfo != null && netInfo.isConnectedOrConnecting()) {

                //sending request for login
                new MyAsyncTask().execute(getFromPreference("student_code"));

                return true;
            }

          //alert box to show internet connection error
            AlertDialog.Builder Internet_Alert = new AlertDialog.Builder(SpeedTestExamNameActivity.this);
            // set title
            Internet_Alert.setCancelable(false);
            Internet_Alert.setTitle("Attention!");
            Internet_Alert.setMessage("This application requires internet connectivity, no internet connection detected");
            Internet_Alert.setPositiveButton("Quit", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface arg0, int arg1) 
                {
                    Intent intent = new Intent(Intent.ACTION_MAIN);
                    intent.addCategory(Intent.CATEGORY_HOME);
                    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(intent);
                    onQuitPressed(); 
                }
            });

            Internet_Alert.create().show();
            return false;
        }

        //to remove application from task manager
        public void onQuitPressed() {

            int pid = android.os.Process.myPid();
            android.os.Process.killProcess(pid);
        }

        //===================================================================================================================================
        //sending student code to server to get exam list
        //===================================================================================================================================
        private class MyAsyncTask extends AsyncTask<String, Integer, Double>{

            @Override
            protected Double doInBackground(String... params) {
                // TODO Auto-generated method stub
                postData(params[0]);
                return null;
            }

            protected void onPostExecute(Double result){

                //Toast.makeText(getApplicationContext(), responseBody, Toast.LENGTH_LONG).show();
                //Log.i("response: ", responseBody);
                //processResponce(responseBody);
                //going to next activity
                xmlContent=responseBody;
                parse_ExamList();
            }

            protected void onProgressUpdate(Integer... progress){

            }

            public void postData(String student_code) {
                // Create a new HttpClient and Post Header
                HttpClient httpclient = new DefaultHttpClient();
                //HttpPost httppost = new HttpPost("http://icaerp.com/AndroidDataService/dataServiceAndroid.asmx/login");

                SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(SpeedTestExamNameActivity.this);
                  final String url_first = preferences.getString("URLFirstPart","");
                HttpPost httppost = new HttpPost(url_first+"ExamList");

                try {
                    // Data that I am sending
                    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                    nameValuePairs.add(new BasicNameValuePair("StudentCode", student_code));
                    //nameValuePairs.add(new BasicNameValuePair("Password", passwrd));
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                    // Execute HTTP Post Request
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                    HttpResponse response = httpclient.execute(httppost);
                    responseBody = EntityUtils.toString(response.getEntity());

                    Log.d("result", responseBody);
                } 
                catch (Throwable t ) {
                    //Toast.makeText( getApplicationContext(),""+t,Toast.LENGTH_LONG).show();
                    Log.d("Error Time of Login",t+"");
                } 
            }
        }
        //===================================================================================================================================
        //END sending EmailAddress and Password to server 
        //===================================================================================================================================

        // function to populate SPINNER with exam list from xml
                    void parse_ExamList()
                    {

                        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

                        XMLParser parser = new XMLParser();
                        //String xml = parser.getXmlFromUrl(URL); // getting XML
                        Document doc = parser.getDomElement(xmlContent); // getting DOM element

                        //count_questions=2;

                        NodeList nl = doc.getElementsByTagName(KEY_EXAMSET);
                        // looping through all item nodes <item>
                        for ( int i = 0; i < nl.getLength();i++) {

//                      while(counter< nl.getLength())
//                      {
                            // creating new HashMap
                            HashMap<String, String> map = new HashMap<String, String>();

                            Element e = (Element) nl.item(i);
                            // adding each child node to HashMap key => value
                            //map.put(KEY_EXAMSET, parser.getValue(e, KEY_EXAMSET));
                            map.put(KEY_SETID, parser.getValue(e, KEY_SETID));
                            map.put(KEY_SETNAME, parser.getValue(e, KEY_SETNAME));
                            //Log.i("Set ID: ", parser.getValue(e, KEY_SETID));
                            //Log.i("Set Name: ", parser.getValue(e, KEY_SETNAME));

                            menuItems.add(map);
                        }

                    }

                    // add items into exam list spinner dynamically
                    public void addItemsOnExamListSpinner()
                    {
                        List<String> list = new ArrayList<String>();
                        list.add("Speed Test 150(min) PO Set-01");

                        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
                        android.R.layout.simple_spinner_item, list);
                        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                        exam_list_spinner.setAdapter(dataAdapter);
                    }

} 
```

这是**布局文件**：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".SpeedTestExamNameActivity" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="30dp"
        android:text="@string/speed_choose_exam"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Spinner
        android:id="@+id/speed_examlist_spinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="68dp" />

    <Button
        android:id="@+id/speed_exam_details_button"
        android:layout_width="95dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/speed_examlist_spinner"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="36dp"
        android:text="@string/details" />

    <TextView
        android:id="@+id/speed_username_textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Name Title"
        android:textAppearance="?android:attr/textAppearanceSmall" />

</RelativeLayout> 
```

**我应该怎么做才能从 XML 解析方法返回的 Arraylist 中填充 Spinner？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T08:43:02.340

这就是你可以这样做的方法。

首先，创建一个 POJO `MyObject`，它有 2 个字段**KEY_SETID**和**KEY_SETNAME**及其相关`getter/setter`。覆盖`toString()`, 以返回`KEY_SETNAME`，因为您希望将其显示为 中的项目名称`Spinner`。

然后通过解析您的 XML创建一个`ArrayList`您的`MyObject`, 从您填充的。`HashMap`

然后使用下面的示例代码片段，在您的`Spinner`.

```
Spinner s = (Spinner) findViewById(R.id.SpinnerSpcial);
ArrayList<MyObject> objects = new ArrayList<MyObject>(); // This is actually the list created from the HashMap
ArrayAdapter<MyObject> adapter = new ArrayAdapter<ObjectName>(this, android.R.layout.simple_spinner_item, objects);
s.setAdapter(adapter); 
```

现在要选择项目，请使用以下代码。

```
MyObject selectedItem = (MyObject) s.getSelectedItem(); // Object which was selected.
selectedItem.getKEY_SETID(); // This will give you the ID of the item selected. Do whatever you wish with to do. 
```

试试看，让我知道，如果你卡在任何地方。

**更新：-**

你的 POJO 会是这样的。

```
public class MyObject {
    private String KEY_SETID;
    private String KEY_SETNAME;

    public String getKEY_SETID() {
        return KEY_SETID;
    }

    public void setKEY_SETID(String kEY_SETID) {
        KEY_SETID = kEY_SETID;
    }

    public String getKEY_SETNAME() {
        return KEY_SETNAME;
    }

    public void setKEY_SETNAME(String kEY_SETNAME) {
        KEY_SETNAME = kEY_SETNAME;
    }

    @Override
    public String toString() {
        return this.KEY_SETNAME; // Value to be displayed in the Spinner
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T08:43:58.050

提示：尝试使代码简单且有效。因此，首先，在您的解析函数中，而不是在..中`HashMap`添加`ArrayList`a .所以你的代码代表：`ArrayList``ArrayList``Spinner``Activity`

```
 public class SpeedTestExamNameActivity extends Activity {

        Spinner exam_list_spinner;
        Button  detailsBtn;
        TextView showUser;
    String full_name;
    ArrayList<String> menuItems = new ArrayList<String>();
    ArrayList<String> menuKeys = new ArrayList<String>();

    //variables to get response from server
    String responseBody;

    //variables required for parsing the XML
    String xmlContent=null;

     // XML node keys
        static final String KEY_EXAMSET = "ExamSet"; // parent node
        static final String KEY_SETID = "SetId";
        static final String KEY_SETNAME = "SetName";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_speed_test_exam_name);

        //checking internet connectivity to download list
        isOnline_downloadList();

        //Showing user full name after login
        full_name=getFromPreference("user_name");
        //textview to show user name
        showUser=(TextView)findViewById(R.id.speed_username_textView);
        showUser.setText("Welcome, "+full_name);
        //spinner
        exam_list_spinner = (Spinner) findViewById(R.id.speed_examlist_spinner);
        //adding items to spinners
        addItemsOnExamListSpinner();

        // onclick details button
        detailsBtn = (Button) findViewById(R.id.speed_exam_details_button);
        detailsBtn.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        Toast.makeText(SpeedTestExamNameActivity.this,                      
                                "Exam List Spinner: "+ 

    String.valueOf(exam_list_spinner.getSelectedItem()),
                                    Toast.LENGTH_SHORT).show();
    //here you get the menuKey too
    Toast.makeText(SpeedTestExamNameActivity.this,                      
                                    "Exam List Spinner Key: "+ menuKeys.get(exam_list_spinner.getSelectedItemPosition()),
                                    Toast.LENGTH_SHORT).show();
                        Intent intent = new Intent(SpeedTestExamNameActivity.this, SpeedTestActivity.class);
                        SpeedTestExamNameActivity.this.startActivity(intent);
                    }
                  });
    }

    //getting content from preferences
        public String getFromPreference(String variable_name)
        {
            String preference_return;
            SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
            preference_return = preferences.getString(variable_name,"");

           return preference_return;
        }

        //check connection
        public boolean isOnline_downloadList() {
            ConnectivityManager cm =(ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo netInfo = cm.getActiveNetworkInfo();
            if (netInfo != null && netInfo.isConnectedOrConnecting()) {

                //sending request for login
                new MyAsyncTask().execute(getFromPreference("student_code"));

                return true;
            }

          //alert box to show internet connection error
            AlertDialog.Builder Internet_Alert = new AlertDialog.Builder(SpeedTestExamNameActivity.this);
            // set title
            Internet_Alert.setCancelable(false);
            Internet_Alert.setTitle("Attention!");
            Internet_Alert.setMessage("This application requires internet connectivity, no internet connection detected");
            Internet_Alert.setPositiveButton("Quit", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface arg0, int arg1) 
                {
                    Intent intent = new Intent(Intent.ACTION_MAIN);
                    intent.addCategory(Intent.CATEGORY_HOME);
                    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(intent);
                    onQuitPressed(); 
                }
            });

            Internet_Alert.create().show();
            return false;
        }

        //to remove application from task manager
        public void onQuitPressed() {

            int pid = android.os.Process.myPid();
            android.os.Process.killProcess(pid);
        }

        //===================================================================================================================================
        //sending student code to server to get exam list
        //===================================================================================================================================
        private class MyAsyncTask extends AsyncTask<String, Integer, Double>{

            @Override
            protected Double doInBackground(String... params) {
                // TODO Auto-generated method stub
                postData(params[0]);
                return null;
            }

            protected void onPostExecute(Double result){

                //Toast.makeText(getApplicationContext(), responseBody, Toast.LENGTH_LONG).show();
                //Log.i("response: ", responseBody);
                //processResponce(responseBody);
                //going to next activity
                xmlContent=responseBody;
                parse_ExamList();
            }

            protected void onProgressUpdate(Integer... progress){

            }

            public void postData(String student_code) {
                // Create a new HttpClient and Post Header
                HttpClient httpclient = new DefaultHttpClient();
                //HttpPost httppost = new HttpPost("http://icaerp.com/AndroidDataService/dataServiceAndroid.asmx/login");

                SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(SpeedTestExamNameActivity.this);
                  final String url_first = preferences.getString("URLFirstPart","");
                HttpPost httppost = new HttpPost(url_first+"ExamList");

                try {
                    // Data that I am sending
                    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                    nameValuePairs.add(new BasicNameValuePair("StudentCode", student_code));
                    //nameValuePairs.add(new BasicNameValuePair("Password", passwrd));
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                    // Execute HTTP Post Request
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                    HttpResponse response = httpclient.execute(httppost);
                    responseBody = EntityUtils.toString(response.getEntity());

                    Log.d("result", responseBody);
                } 
                catch (Throwable t ) {
                    //Toast.makeText( getApplicationContext(),""+t,Toast.LENGTH_LONG).show();
                    Log.d("Error Time of Login",t+"");
                } 
            }
        }
        //===================================================================================================================================
        //END sending EmailAddress and Password to server 
        //===================================================================================================================================

        // function to populate SPINNER with exam list from xml
                    void parse_ExamList()
                    {

                        XMLParser parser = new XMLParser();
                        //String xml = parser.getXmlFromUrl(URL); // getting XML
                        Document doc = parser.getDomElement(xmlContent); // getting DOM element

                        //count_questions=2;

                        NodeList nl = doc.getElementsByTagName(KEY_EXAMSET);
                        // looping through all item nodes <item>
                        for ( int i = 0; i < nl.getLength();i++) {

//                      while(counter< nl.getLength())
//                      {

                            Element e = (Element) nl.item(i);
                            // adding each child node to HashMap key => value
                            //map.put(KEY_EXAMSET, parser.getValue(e, KEY_EXAMSET));
                            menuKeys.add( parser.getValue(e, KEY_SETID));
                            menuItems.add( parser.getValue(e, KEY_SETNAME));
                            //Log.i("Set ID: ", parser.getValue(e, KEY_SETID));
                            //Log.i("Set Name: ", parser.getValue(e, KEY_SETNAME));

                        }

                    }

                    // add items into exam list spinner dynamically
                    public void addItemsOnExamListSpinner()
                    {
                        List<String> list = new ArrayList<String>();
                        list.add("Speed Test 150(min) PO Set-01");

                        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
                        android.R.layout.simple_spinner_item, menuItems);
                        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                        exam_list_spinner.setAdapter(dataAdapter);
                    }

} 
```

**注意：**简单的替换就可以了。我只更改了代码`detailsBtn.setOnClickListener(new View.OnClickListener() {`和你的代码，`parseExamList()`并且刚刚`ArrayLists`在类级别声明了两个。试试看，在启动新活动之前，你是否在单击详细信息按钮时获得了两个 Toasts。

**更新：**我假设你已经按照[android hive 教程](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)来解析 XML。只需`getValue`在你的类中更改函数`XMLParser`：

```
public String getValue(Element item, String str) {
    NodeList n = item.getElementsByTagName(str);
    return this.getElementValue(n.item(0));
} 
```

但是，如果您没有遵循..然后按照该教程构建解析器将解决您的问题。Insha Allah。如果我帮助您找到了解决方案，那么请将其标记为答案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T08:50:57.730

```
Spinner spinnerLocation;
spinnerLocation = (Spinner)findViewById(R.id.spinnerLocation);
    ArrayList<String> locationArray = new ArrayList<String>();
    for(int i=0;i<10;i++)
    {
        locationArray.add("value "+i);
    } 
    ArrayAdapter<String> locationAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, locationArray);
            locationAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            spinnerLocation = (Spinner)findViewById(R.id.spinnerLocation);
            spinnerLocation.setAdapter(locationAdapter);
            spinnerLocation.setAdapter(locationAdapter);
            spinnerLocation.setOnItemSelectedListener(new OnItemSelectedListener() {
                int count=0;
                @Override
                public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) 
            {
                    System.out.println("whatever you wanna do");

                }
                @Override
                public void onNothingSelected(AdapterView<?> arg0) {
                    Toast.makeText(getBaseContext(),"inside no item selected ",Toast.LENGTH_SHORT).show();
                }
            }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T10:40:55.060

我通过将我的代码 xml 解析代码更改为以下方式来解决此问题：

```
void parse_ExamList()
{

ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();
    XMLParser parser = new XMLParser();
    Document doc = parser.getDomElement(xmlContent); // getting DOM element

    //list object to populate spinner
    List<String> list = new ArrayList<String>();

    NodeList nl = doc.getElementsByTagName(KEY_EXAMSET);
    // looping through all item nodes <item>
    for ( int i = 0; i < nl.getLength();i++) {

    // creating new HashMap
    HashMap<String, String> map = new HashMap<String, String>();

    Element e = (Element) nl.item(i);
    // adding each child node to HashMap key => value
    //map.put(KEY_EXAMSET, parser.getValue(e, KEY_EXAMSET));
    map.put(KEY_SETID, parser.getValue(e, KEY_SETID));
    map.put(KEY_SETNAME, parser.getValue(e, KEY_SETNAME));
    //adding items to spinners
    list.add("("+parser.getValue(e, KEY_SETID)+") "+parser.getValue(e, KEY_SETNAME));
    menuItems.add(map);
    }

    //populating the spinner with the list items
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
    android.R.layout.simple_spinner_item, list);
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    exam_list_spinner.setAdapter(dataAdapter);

    } 
```

但问题是，id 和 name 都显示在微调器中，我只想显示名称并在显示时隐藏 id。但稍后我将需要具有所选名称的 id

# android - Sphero：多个数据集的异步数据流

> ID：15404213
> 
> 赞同：2
> 
> 时间：2013-03-14T08:19:12.543
> 
> 标签：android, sphero-api

我正在开发一个应用程序，它通过沿房间边缘操纵 Sphero 机器人球来映射房间。

为此，我需要三个数据集从 sphero 连续流式传输到（android）应用程序：

*   碰撞检测以检测进入房间“内部”的角落
*   定位器数据以了解检测到的角落在哪里
*   Sphero 向一侧移动，同时驱动稍微向边缘倾斜，以检测房间“外面”的角落。

我的碰撞检测和定位器数据流的实现没有问题，但是关于额外的流运动数据有一些问题。

第一个大问题是如何做到这一点，因为定位数据和移动数据通过异步数据流以相同的方式流式传输。当我通过电子邮件联系 Sphero 支持时，这个问题已经得到解答：

通过按位或 (|) 链接在 SetDataStreamingCommand 中声明的多个数据流掩码，可以将 Sphero 配置为同时流式传输多个数据集。

但是，我仍有未解决的问题：

1.  我计划使用velocity-x 掩码来获取运动数据，这些数据是相对于球体（与行驶方向成90° 角的运动）还是相对于世界（如定位器速度数据）？

2.  在传递给侦听器的事件数据中，velocity-x 数据将存储在哪里？

谢谢你的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:19:19.740

速度 X 值是定位器的一部分，因此它是相对于定位器网格的速度。

当您在 AsyncDataListener 中取回数据时，您可以在用于定位器信息的同一 LocatorData 对象中找到值：

```
LocatorData#getVelocityX():float 
```

像这样：

```
data.getVelocityX(); 
```

然而，这一次，这些值实际上将包含信息而不是零，因为您之前在 SetDataStreamingCommand 中询问了速度。

# jsf - 如何使用 PrimeFaces 加载嵌套列表

> ID：15404222
> 
> 赞同：2
> 
> 时间：2013-03-14T08:19:34.877
> 
> 标签：jsf, primefaces, datatable

我想显示带有单选的项目列表。在选择一个项目时，应该会出现一个对话框，显示该项目的详细信息。到目前为止，列表和选择甚至一些细节都在显示，但嵌套列表是空的。

JSF 来源：

```
<f:view>
      <h:form id="studyListForm">
        <!-- Main list with selectable Items -->
        <h:outputText value="Study List"/>
        <p:dataTable id="studyList" selection="#{studyRepositoryController.selectedStudy}" selectionMode="single" value="#{studyRepositoryController.studyList}" var="item">

          <p:ajax event="rowSelect" listener="#{studyRepositoryController.onRowSelect}"   
              update=":studyListForm:display :studyListForm:studyPropertyList :headnavigation:growl" oncomplete="studyDialog.show()" />  

          <p:ajax event="rowUnselect" listener="#{studyRepositoryController.onRowUnselect}" update=":headnavigation:growl" />

          <p:column headerText="ID" >
            <h:outputText value="#{item.id}"/>
          </p:column>
          <p:column headerText="Name">
            <h:outputText value="#{item.name}"/>
          </p:column>
        </p:dataTable>

        <!-- The dialog for a single item -->
        <p:dialog id="dialog" width="600" height="400" header="Study" widgetVar="studyDialog" resizable="true" showEffect="fade" hideEffect="explode">
          <!-- Study Details -->
          <h:panelGrid id="display" columns="2" cellpadding="4" rowClasses="aligntop">
            <h:outputText value="ID"/>
            <h:outputText value="#{studyRepositoryController.selectedStudy.id}"/>

            <h:outputText value="Name"/>
            <h:outputText value="#{studyRepositoryController.selectedStudy.name}"/>

          </h:panelGrid>

          <!-- Property List -->
          <p:dataTable id="studyPropertyList" value="#{studyRepositoryController.selectedStudy.studyPropertyList}" var="item">
            <p:column headerText="ID" >
              <h:outputText value="#{item.id}"/>
            </p:column>
            <p:column headerText="property" >
              <h:outputText value="#{item.property}"/>
            </p:column>
            <p:column headerText="text_value" >
              <h:outputText value="#{item.textValue}"/>
            </p:column>
          </p:dataTable>
        </p:dialog>
      </h:form>
    </f:view> 
```

正如所解释的，它大部分都有效。显示主列表，当我单击一个项目时，会出现显示所选项目的 ID 和名称的对话框。但是嵌套列表

```
#{studyRepositoryController.selectedStudy.studyPropertyList} 
```

是空的。所以数据表没有显示任何行： ![在此处输入图像描述](../Images/20b22938e642126853061f4533b0ac92.png)

列表本身是一个简单的数据库实体：

```
 public PrimeStudy getStudyList(){
    log.info("-!-");
    List<Study> list = (List<Study>) em.createNamedQuery("Study.findAll").getResultList();

    Iterator<Study> it = list.iterator();
    while(it.hasNext()){
      Study s = it.next();
      log.debug("Study " + s.getId() + " PropertyListSize:" + s.getStudyPropertyList().size());
    }
    PrimeStudy modelList = new PrimeStudy(list);

    return modelList;
  } 
```

调试输出显示：

```
 -!-
 Study 1 PropertyListSize:2
 Study 2 PropertyListSize:0
 Study 3 PropertyListSize:0
 Study 4 PropertyListSize:0
 Study 5 PropertyListSize:0 
```

有什么建议么？

**[更新]** 我按照 partlov 的建议在 ajax 事件中添加了缺少的 dataTable 更新，以显示一个有效的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:24:51.000

如我所见，您没有更新您的 second `dataTable`。添加`studyPropertyList`到您的事件更新列表`p:ajax`以选择行。此外，您真的不应该在 getter 中创建列表，而是在`@PostConstruct`方法中执行此操作，因为在页面生命周期中多次调用 getter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:04:07.577

不要在 Getter 方法中创建新列表。在 Bean 的构造函数中预先生成列表，或者如 partlov 所说，使用 @PostConstruct 方法。

# elasticsearch - 我们可以在不为 Elasticsearch 指定文档 ID 的情况下进行批量索引吗？

> ID：15404225
> 
> 赞同：19
> 
> 时间：2013-03-14T08:19:46.503
> 
> 标签：elasticsearch

是否可以在不指定文档 ID 的情况下进行批量索引？我希望 Elasticsearch 在索引时为我生成一个随机 ID，但可以这样做吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-14T09:05:37.450

是的你可以！

在 0.90.0.Beta1 上测试：

```
$ cat requests 
{ "index" : { "_index" : "test", "_type" : "type1" } }
{ "field1" : "value1" }

$ curl -s -XPOST localhost:9200/_bulk --data-binary @requests; echo
{"took":6,"items":[{"create":{"_index":"test","_type":"type1","_id":"IWqsRqyhRVq-F69OLIngTA","_version":1,"ok":true}}]} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-19T15:24:23.320

这是另一个不指定 _id 的批量上传示例。

`

```
curl -XPOST "http://localhost:9200/_bulk" -d'
    { "index" : { "_index" : "test", "_type" : "demo" } }
    { "title" : "Quick brown rabbits", "content" : "Brown rabbits are commonly seen" }
    { "index" : { "_index" : "test", "_type" : "demo" } }
    { "title" : "Keeping pets healthy", "content" : "My quick brown fox eats rabbits 
```

`

回复如下

`

```
{
  "took": 451,
  "errors": false,
  "items": [
    {
      "create": {
        "_index": "test",
        "_type": "demo",
        "_id": "AVYDtp_fxosF2Bdj7ghV",
        "_version": 1,
        "_shards": {
          "total": 2,
          "successful": 1,
          "failed": 0
        },
        "status": 201
      }
    },
    {
      "create": {
        "_index": "test",
        "_type": "demo",
        "_id": "AVYDtp_fxosF2Bdj7ghW",
        "_version": 1,
        "_shards": {
          "total": 2,
          "successful": 1,
          "failed": 0
        },
        "status": 201
      }
    }
  ]
} 
```

`

# php - PHP数组json_encode添加额外的引号

> ID：15404232
> 
> 赞同：1
> 
> 时间：2013-03-14T08:20:26.510
> 
> 标签：php, arrays, json

我有以下 php 数组，并希望将其打印为干净的 JSON 文件，但括号和逗号周围有额外的引号。虽然我得到的当前 JSON 是有效的 JSON，但它不是我想要的格式。请参阅下面的 PHP 数组、我的 json_encode 输出和首选 json 输出：

```
 Array
 (
[0] =>             {
[1] =>                 code : "EU27",
[2] =>                 debtA : 967576248244,
[3] =>                 debtB : 6971817122583,
[4] =>                 id : "eur",
[5] =>                 name : "EU",
[6] =>                 popY : 8584663069945,
[7] =>                 popZ : 7565913300548            }
[8] =>             ,
[9] =>             {
[10] =>                 code : "US",
[11] =>                 debtA : 9090198981283,
[12] =>                 debtB : 92189801202,
[13] =>                 id : "usa",
[14] =>                 name : "United States",
[15] =>                 popY : 4514703786570,
[16] =>                 popZ : 774697283542            }
    ) 
```

当前 json_encode 输出：

```
 [
" {",
" code : \"EU27\",",
" debtA : 1739414366187,",
" debtB : 8719158563660,",
" id : \"eur\",",
" name : \"EU\",",
" popY : 460572909944,",
" popZ : 2396933253407 }",
" ,",
" {",
" code : \"US\",",
" debtA : 7810766144794,",
" debtB : 10536751929567,",
" id : \"usa\",",
" name : \"United States\",",
" popY : 8571487476842,",
" popZ : 1716024078740 }"
    ] 
```

首选 JSON 输出：

```
 [
 {
  code : "EU27",
  debtA : 1739414366187,
  debtB : 8719158563660,
  id : "eur",
  name : "EU",
  popY : 460572909944,
  popZ : 2396933253407 },
{
  code : "US",
  debtA : 7810766144794,
  debtB : 10536751929567,
  id : "usa",
  name : "United States",
  popY : 8571487476842,
  popZ : 1716024078740 }
   ] 
```

我一直在搜索 stackoverflow 并发现了类似的问题，但无法使其正常工作。可能是因为我对php和php数组的理解。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:25:25.207

首先，您正在制作一系列不正确的语法：

`[0] => {`

其次，您正在寻找的结果是一组对象。这说；您将需要执行以下操作：

```
$array = array();

$array[0] = new StdObject;
$array[0] -> code = "EU27";
// other values added to object

$array[1] = new StdObject;
$array[1] -> code = "US";
// other values added to second object

$json = json_encode( $array ); 
```

或者，您也可以使用数组而不是对象：

```
$array = array();

$array[0] = array(
"code" => "EU27",
// other values
);

$array[1] = array(
"code" => "US",
// other values
);

$json = json_encode( $array ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:27:28.967

您可以轻松实现这一目标。

首先以关联形式使用数组，方法如下：

```
 $a = [ 
 [
 'code'=>'EU27',
 'debtA' => 967576248244, .... etc
 ], 
 [
 'code'=>'Something',
 'debtA' => 874376347, .... etc
 ]
 ]; 
```

然后将内部数组转换为对象

```
 foreach($a as $k = $v)$a[$k] = (object)$v; 
```

然后json编码它......悲剧的结束。
这是我尝试的示例：

```
 $a = [ 
 [
 'code'=>'EU27',
 'debtA' => 967576248244//, .... etc
 ], 
 [
 'code'=>'Something',
 'debtA' => 874376347//, .... etc
 ]
 ];

 foreach($a as $k => $v)$a[$k]=(object)$a[$k];
 echo json_encode($a); 
```

这就是我得到的：

```
 [{"code":"EU27","debtA":967576248244},{"code":"Something","debtA":874376347}] 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T08:31:26.440

您获得的 JSON 字符串是 100% 有效的，并且与您构建的输入数组完全对应。`json_encode()`永远不会尝试做你认为理所当然的猜谜游戏：如果你有一个包含`{`PHP 的字符串，它将生成一个包含`{`- 它甚至不会考虑启动对象的可能性！

您显然需要以这种方式构建您的数组：

```
$input = array(
    array(
        'code' => 'EU27',
        'debtA' => '1739414366187',
        'debtB' => '8719158563660',
        'id' => 'eur',
        'name' => 'EU',
        'popY' => '460572909944',
        'popZ' => '2396933253407',
    ),
    array(
        'code' => 'US',
        'debtA' => '7810766144794',
        'debtB' => '10536751929567',
        'id' => 'usa',
        'name' => 'United States',
        'popY' => '8571487476842',
        'popZ' => '1716024078740',
    ),
);

$output = json_encode($input); 
```

此外，*必须*引用键名——<a href="http://json.org/" rel="nofollow">这不是一个选项，因为它们是字符串：

> 字符串是零个或多个 Unicode 字符的序列，**用双引号括起来**，使用反斜杠转义。字符表示为单个字符串。字符串与 C 或 Java 字符串非常相似。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T08:45:20.247

你想要的正确的json是

```
'             [
                  {
                   "code" : "EU27",
                   "debtA" : "1739414366187",
                   "debtB" : "8719158563660",
                   "id" : "eur",
                   "name" : "EU",
                   "popY" : "460572909944",
                   "popZ" : "2396933253407" },
                 {
                   "code" : "US",
                   "debtA" : "7810766144794",
                   "debtB" : "10536751929567",
                   "id" : "usa",
                   "name" : "United States",
                   "popY" : "8571487476842",
                   "popZ" : "1716024078740" }
                    ] 
```

这个 json 对应于多维数组，应该是这样的：`

```
 Array
              (
                  [0] => Array
                      (
                          [code] => EU27
                          [debtA] => 1739414366187
                          [debtB] => 8719158563660
                          [id] => eur
                          [name] => EU
                          [popY] => 460572909944
                          [popZ] => 2396933253407
                      )

                  [1] => Array
                      (
                          [code] => US
                          [debtA] => 7810766144794
                          [debtB] => 10536751929567
                          [id] => usa
                          [name] => United States
                          [popY] => 8571487476842
                          [popZ] => 1716024078740
                      )

              )` 
```

为了更好地理解，请参见这里[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php) '

# ruby-on-rails - 运行 Cucumber 功能文件时权限被拒绝错误

> ID：15404233
> 
> 赞同：1
> 
> 时间：2013-03-14T08:20:28.790
> 
> 标签：ruby-on-rails, ruby, cucumber, aptana3

使用 Aptana studio 3 运行单个功能文件时出现以下错误：

```
$ cucumber features/ShopAndBrowse/MCOM/SearchMCOM.feature URL=http://www1.preprod7macys.fds.com/ SITE=MCOM ENV=13B DB2=YES
Using the default profile...
DB2 DATABASE CONNECTION ESTABLISHED - MLQ10
Feature: Search Feature

  ←[36m@high_MCOM←[0m ←[36m@regression_MCOM←[0m
  Scenario: verify that user should be able to search and compare  for Items in domestic mode←[90m # features\ShopAndBrowse\MCOM\SearchMCOM.feature
:5←[0m
←[31m Permission denied - C:\ProgramData/ruby-uuid (Errno::EACCES)←[0m
←[31m org/jruby/RubyFile.java:315:in `initialize'←[0m
←[31m org/jruby/RubyIO.java:1176:in `open'←[0m
←[31m c:/jruby-1.7.0/lib/ruby/gems/shared/gems/uuid-2.3.7/lib/uuid.rb:364:in `open_lock'←[0m 
```

*   使用 Windows 7 64 位操作系统
*   使用 Aptana Studio 3
*   已经以“以管理员身份运行”身份运行
*   使用“jruby-1.7.0”

# javascript - .sortable 可以应用于动态添加的对象吗？

> ID：15404235
> 
> 赞同：2
> 
> 时间：2013-03-14T08:20:34.033
> 
> 标签：javascript, jquery

谁能解释一下是否`.sortable`可以应用于将动态添加的未来 jQuery 对象，这意味着它在**当前**DOM 中不存在，就像不推荐使用的`.live`函数一样？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T08:26:43.660

简而言之：没有。

请注意以下几点：[`.live`](http://api.jquery.com/live/)自 jQuery 1.7 起已被弃用，并在 jQuery 1.9 中被删除。该功能已被该[`.on`](http://api.jquery.com/on/)方法移动/替换。此方法只能检测**事件处理程序**，例如`click`etc.`.sortable`不是事件处理程序，所以这不起作用。

您唯一能做的就是[`.sortable`](http://jqueryui.com/sortable/)在创建元素后调用该方法（来自 jQuery UI）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-24T16:56:16.587

在 2018 年回答，您可以通过在将新元素添加到 dom 后初始化可排序来实现这一点。在我的例子中，我正在开发一个表单布局插件，可以在其中添加列和字段并需要对它们进行排序。所以在创建（动态）一个新列之后，我重新应用我已经变成一个函数的代码：

```
function g2f_reload_sortable() {
    // reapply sortable to new items
    $('#g2f-form-fields div[class^="col"]').sortable({
        placeholder: "ui-state-highlight",
        forcePlaceholderSize: true,
        connectWith: "#g2f-form-fields div[class^='col']",
        handle: ".g2f-field-move"
    });
    $('#g2f-form-fields div[class^="col"]').disableSelection();
} 
```

这对我有用。

# mysql - 我想使用 javascript 打印 mysql 查询的结果

> ID：15404238
> 
> 赞同：0
> 
> 时间：2013-03-14T08:20:40.400
> 
> 标签：mysql, xml, ajax

我正在开发房地产网站，并且在您在我们的数据库中搜索房产的页面中，我在将结果打印到表格之前制作了它，但现在我希望以更设计的方式获得结果。我使用此代码生成 xml

```
<?php function parseToXML($htmlStr)
   { 
      $xmlStr=str_replace('<','&lt;',$htmlStr); 
      $xmlStr=str_replace('>','&gt;',$xmlStr); 
      $xmlStr=str_replace('"','&quot;',$xmlStr); 
      $xmlStr=str_replace("'",'&#39;',$xmlStr); 
      $xmlStr=str_replace("&",'&amp;',$xmlStr); 
  return $xmlStr; 
   } 
 // Opens a connection to a MySQL server
$connection=mysql_connect ('localhost', 'root', '');
if (!$connection) {
die('Not connected : ' . mysql_error());
  }

// Set the active MySQL database
$db_selected = mysql_select_db('realestate', $connection);
 if (!$db_selected) {
die ('Can\'t use db : ' . mysql_error());
}

 // Select all the rows in the markers table
  $locality = htmlentities($_POST['locality']);

 $sellorrent = htmlentities($_POST['sell']);
 $price = htmlentities($_POST['price']);

 $type = htmlentities($_POST['ptype']);

    $query = "SELECT * FROM `property` WHERE  locality= '".$locality."' and sellorrent='".$sellorrent."' and type='".$type."' and price<= '".$price."' ";

$result = mysql_query($query, $connection); 

$row = mysql_fetch_array($result);

   header("Content-type: text/xml");

  // Start XML file, echo parent node
   echo '<properties>';

 // Iterate through the rows, printing XML nodes for each 

   while ($row = @mysql_fetch_assoc($result)){

  // ADD TO XML DOCUMENT NODE

  echo '<property ';
  echo 'id="' . parseToXML($row['id']) . '" ';
  echo 'seller_id="' . parseToXML($row['seller_id']) . '" ';
  echo 'bedrooms="' . parseToXML($row['bedrooms']) . '" ';
  echo 'year="' . parseToXML($row['year']) . '" ';
  echo 'locality="' .parseToXML($row['locality']) . '" ';
  echo 'type="' .parseToXML($row['type']) . '" ';
  echo 'price="' .parseToXML($row['price']) . '" ';
  echo 'sellorrent="' .parseToXML($row['sellorrent']) . '" ';

  echo '/>';
}

// End XML file
echo '</properties>';

?> 
```

xml 文件完美运行并从表单页面获取结果现在我使用 javascript 创建此页面以输出来自 xml 的结果

```
<!DOCTYPE html >

<head>

<script type="text/javascript">

function load() {
downloadUrl("searchxml.php", function(data) {
    var xml = data.responseXML;
    var properties= xml.documentElement.getElementsByTagName("property");
    for (var i = 0; i < properties.length; i++) {
      var id = properties[i].getAttribute("locality");
      var address = properties[i].getAttribute("price");

       var bedrooms = properties[i].getAttribute("bedrooms");
         var seller_id = properties[i].getAttribute("seller_id");

         var property_id = properties[i].getAttribute("id");
          var type = properties[i].getAttribute("type");
         var year = properties[i].getAttribute("year");
         var sell = properties[i].getAttribute("sellorrent");
      document.write( type + " for " + sell + " in " + id + "</h3><br>");

      }
  });
  }
  function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}

      </script>
</head>

<body onload="load()">

      </body>
      </html> 
```

但什么都没有显示给我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:40:44.633

要回答您的问题，只需阅读[jQuery ajax doc](http://api.jquery.com/jQuery.ajax/) ...但对于简短的回答，它会有点像

```
$(document).ready(function() {
    $.ajax({
        type:'POST',
        url:"searchxml.php",
        data : {}, //you can add posted data, in an inline Javascript array form
        success : function(response) {
             var xml = response;
             var properties= xml.documentElement.getElementsByTagName("property");
             for (var i = 0; i < properties.length; i++) {
                 var id = properties[i].getAttribute("locality");
                 var address = properties[i].getAttribute("price");

                 var bedrooms = properties[i].getAttribute("bedrooms");
                 var seller_id = properties[i].getAttribute("seller_id");

                 var property_id = properties[i].getAttribute("id");
                 var type = properties[i].getAttribute("type");
                 var year = properties[i].getAttribute("year");
                 var sell = properties[i].getAttribute("sellorrent");

                 $('body').append($('<h3/>').text( type + " for " + sell + " in " + id + "<br />"));
        }
    });

}); 
```

# c# - MonoTouch 中的 MKMapPointForCoordinate 在哪里

> ID：15404240
> 
> 赞同：2
> 
> 时间：2013-03-14T08:20:41.677
> 
> 标签：c#, ios, xamarin.ios, mapkit, mkoverlay

正在实现一个扩展类`MKOverlay`，我找不到`MKMapPointForCoordinate`要执行的功能：

```
public override MKMapRect BoundingMapRect() {
    MKMapPoint upperLeft = MKMapPointForCoordinate(CLLocationCoordinate2DMake(Coordinate));
    return new MKMapRect();
} 
```

请问这个方法在哪里？

我的最终结果是我想将图像作为叠加层放置在地图上。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T12:31:04.230

在 Xamarin.iOS 中，本机函数`MKMapPointForCoordinate`公开为`MKMapPoint.FromCoordinate`.

# java - Mtom Java EE DataHandler - 新线程创建

> ID：15404242
> 
> 赞同：2
> 
> 时间：2013-03-14T08:20:49.013
> 
> 标签：java, performance, web-services, jakarta-ee, mtom

我正在使用 MTOM 通过 WebService 将某些文件的内容流式传输到客户端。

前端调用后端服务器上的 WS 并将文件流式传输到客户端。

然而，该应用程序是一个 Java EE 环境（WebLogic），据我所知，这是不允许的（或被认为是创建新线程的好做法），但 MTOM 使用的 DataHandler 的代码可以做到这一点：

```
 // there is none but the default^^^^^^^^^^^^^^^^
  252               final DataContentHandler fdch = dch;
  253   
  254               // from bill s.
  255               // ce n'est pas une pipe!
  256               //
  257               // NOTE: This block of code needs to throw exceptions, but
  258               // can't because it is in another thread!!! ARG!
  259               //
  260               final PipedOutputStream pos = new PipedOutputStream();
  261               PipedInputStream pin = new PipedInputStream(pos);
  262               new Thread(
  263                          new Runnable() {
  264                   public void run() {
  265                       try {
  266                           fdch.writeTo(object, objectMimeType, pos);
  267                       } catch (IOException e) {
  268   
  269                       } finally {
  270                           try {
  271                               pos.close();
  272                           } catch (IOException ie) { }
  273                       }
  274                   }
  275               },
  276                         "DataHandler.getInputStream").start();
  277               ins = pin; 
```

[http://www.docjar.org/html/api/javax/activation/DataHandler.java.html](http://www.docjar.org/html/api/javax/activation/DataHandler.java.html) [http://docs.oracle.com/javaee/1.4/api/javax/activation/DataHandler.html](http://docs.oracle.com/javaee/1.4/api/javax/activation/DataHandler.html)

那么在 Java EE 中使用 MTOM 和流安全吗？容器不创建新线程这一事实可能根本不危险？

# iphone - PageviewController 未按正确顺序显示视图控制器

> ID：15404243
> 
> 赞同：3
> 
> 时间：2013-03-14T08:20:52.833
> 
> 标签：iphone, ios, objective-c, uipageviewcontroller

我正在尝试使用`PageviewController`. 我有4个`ViewControllers`，但它们都不一样。在一个我有一个图像，在第二个我有一个 tableview，......

我想用`pageviewController`. 所以我做的是以下。我已将它们添加到`modelArray`.

```
ViewOneViewController *viewOne = (ViewOneViewController *)[self.storyboard instantiateViewControllerWithIdentifier:@"ViewOne"];
ViewTwoViewController *viewTwo = (ViewTwoViewController *)[self.storyboard instantiateViewControllerWithIdentifier:@"ViewTwo"];
ViewThreeViewController *viewThree = (ViewThreeViewController *)[self.storyboard instantiateViewControllerWithIdentifier:@"ViewThree"];
ViewFourViewController *viewFour =(ViewFourViewController *) [self.storyboard instantiateViewControllerWithIdentifier:@"ViewFour"];

self.modelArray = [[NSMutableArray alloc] initWithObjects:viewOne,viewTwo,viewThree,viewFour,nil]; 
```

接下来我像这样设置我的 pageviewController。

```
 ViewOneViewController *cVC = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewOne"];
    NSArray *viewControllers = [NSArray arrayWithObject:cVC];
    [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:nil]; 
```

现在浏览 pageviewViewController 我有以下功能。

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController
      viewControllerBeforeViewController:(UIViewController *)viewController
{
    indexValue--;
    if (indexValue < 0) {
        return nil;
    }
    return [self.modelArray objectAtIndex:indexValue];
}
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController
       viewControllerAfterViewController:(UIViewController *)viewController
{
    indexValue++;
    if (indexValue > self.modelArray.count) {
        NSLog(@"crash");
        return nil;
    }
    return [self.modelArray objectAtIndex:indexValue];
} 
```

我已声明并综合`indexValue`为`int`. 但由于某种原因，它有时会向我显示两次 ViewOneController 或者它从 ViewOneController 转到 ViewThreeController 等等。

有人能帮我吗？

亲切的问候

**编辑**

当我这样做时。

```
[self.pageViewController setViewControllers:self.modelArray direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:nil]; 
```

它因此错误而崩溃

**'提供的视图控制器数量 (4) 与请求的转换所需的数量 (1) 不匹配'**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-28T13:04:12.440

您的代码中有一些错误。

1.  该方法`setViewControllers:`设置当前控制器可见。设置`self.modelArray`不正确，因为它包含您拥有的所有页面。您需要在 UIPageViewController 初始化后使用它（如果您想强制更改当前页面）。

2.  你用`UIPageViewControllerDelegate`的方法不对。`indexValue`班级成员不需要。在此方法中，您应该找出哪个控制器是下一个（来自`viewController`方法参数）或上一个控制器，并返回另一个控制器。

看看这段代码：

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController
      viewControllerBeforeViewController:(UIViewController *)viewController
{
    if ([viewController isKindOfClass:[ViewOneViewController class]]) {
        return nil;
    } else if ([viewController isKindOfClass:[ViewTwoViewController class]]) {
        return [self.modelArray objectAtIndex:0]; // return ViewOneViewController class instance
    } else if 
    //... etc
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController
       viewControllerAfterViewController:(UIViewController *)viewController
{
    // vice versa
} 
```

3.  当您将所有控制器存储在一个阵列中时，它可能会使用大量内存。我建议你不要保留`modelArray`属性，而是在`UIPageViewControllerDelegate`协议方法中实例化它。

祝你好运。

# actionscript - 主 mxml 文件和 as 文件 - 如何交换数据

> ID：15404244
> 
> 赞同：1
> 
> 时间：2013-03-14T08:20:52.883
> 
> 标签：actionscript, flex4, flash-builder

我有一个主 mxml 文件和一个 phpconnect.as 文件。当我从 mxml 文件调用 phpconnect 函数时，连接工作正常，控制台中的跟踪也工作正常。但是将 phpconnect.as 文件的结果返回到 mxml 文件的最佳方法是什么。

下面是代码 main mxml Test02HomeView.mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" title="HomeView">
    <fx:Declarations>
        <!-- Platzieren Sie nichtvisuelle Elemente (z. B. Dienste, Wertobjekte) hier -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[

            import comps.PHPConnect;

            protected function phpConnect_btn_clickHandler(event:MouseEvent):void
            {
                // TODO Auto-generated method stub
                var phpconnect:PHPConnect = new PHPConnect();
                phpconnect.phpconnect();
            }

        ]]>
    </fx:Script>

    <s:TextArea id="log_txt" x="10" y="128" height="104"/>
    <s:Button id="phpConnect_btn" x="180" y="256" width="130" label="PHPConnect" click="phpConnect_btn_clickHandler(event)"/>

</s:View> 
```

这是来自 phpconnect.as 的代码

```
package comps
{
    import flash.events.Event;
    import flash.events.HTTPStatusEvent;
    import flash.events.IEventDispatcher;
    import flash.events.IOErrorEvent;
    import flash.events.ProgressEvent;
    import flash.events.SecurityErrorEvent;
    import flash.net.URLLoader;
    import flash.net.URLRequest;

    public class PHPConnect
    {
        public function PHPConnect()
        {
        }

        public function phpconnect():void
        {
            // TODO Auto-generated method stub
            var loader:URLLoader = new URLLoader();
            configureListeners(loader);

            var request:URLRequest = new URLRequest("http://localhost/file.php");
            try {
                loader.load(request);
            } catch (error:Error) {
                trace("Unable to load requested data.");
            }

        }

        private function configureListeners(dispatcher:IEventDispatcher):void
        {
            dispatcher.addEventListener(Event.COMPLETE, completeHandler);
            dispatcher.addEventListener(Event.OPEN, openHandler);
            dispatcher.addEventListener(ProgressEvent.PROGRESS, progressHandler);
            dispatcher.addEventListener(SecurityErrorEvent.SECURITY_ERROR, securityErrorHandler);
            dispatcher.addEventListener(HTTPStatusEvent.HTTP_STATUS, httpStatusHandler);
            dispatcher.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler);
        }

        private function completeHandler(event:Event):void {
            var loader:URLLoader = URLLoader(event.target);
            trace("completeHandler: " + loader.data);
            // log_txt.text = loader.data;
        }

        private function openHandler(event:Event):void {
            trace("openHandler: " + event);
        }

        private function progressHandler(event:ProgressEvent):void {
            trace("progressHandler loaded:" + event.bytesLoaded + " total: " + event.bytesTotal);
        }

        private function securityErrorHandler(event:SecurityErrorEvent):void {
            trace("securityErrorHandler: " + event);
        }

        private function httpStatusHandler(event:HTTPStatusEvent):void {
            trace("httpStatusHandler: " + event);
        }

        private function ioErrorHandler(event:IOErrorEvent):void {
            trace("ioErrorHandler: " + event);
        }

    }
} 
```

对于使用 actionscript 和 FlashBuilder 的人来说，这可能是一个简单的问题。对我来说，解决这个问题会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:34:09.140

[按照此处](https://stackoverflow.com/questions/1431230/generic-events-and-additional-parameters-in-actionscript-3-0)的说明创建一个自定义事件类，并在您的`PHPConnect`类成功加载可以作为事件属性传递的数据时调度它。您现在可以在主 mxml 类中订阅该事件并通过事件对象访问加载的数据。

或者/另外，您可以将数据设置为类的公共属性的值，`PHPConnect`并通过实例而不是通过事件对象访问它。

**Test02HomeView.mxml：**

```
protected function phpConnect_btn_clickHandler(event:MouseEvent):void
{
    // TODO Auto-generated method stub
    var phpconnect:PHPConnect = new PHPConnect();
    phpconnect.addEventListener(CustomEvent.LOADED, this.dataLoadedHandler);
    phpconnect.phpconnect();
}

private function dataLoadedHandler(event:CustomEvent):void
{
    trace("Data loaded:", event.data);

    // Or, assuming instance of phpconnect is in scope and has public data property
    //trace("Data loaded:", phpconnect.data);
} 
```

**PhpConnect.as：**

```
private function completeHandler(event:Event):void {
    //var loader:URLLoader = URLLoader(event.target);
    trace("completeHandler: " + data);
    // log_txt.text = loader.data;

    // Don't need to create a new instance of loader, just cast the target property
    // Now dispatch a custom event with the data as the payload
    dispatchEvent(new CustomEvent(CustomEvent.LOADED, URLLoader(event.target).data));
} 
```

# android - JSON格式错误

> ID：15404245
> 
> 赞同：2
> 
> 时间：2013-03-14T08:20:53.377
> 
> 标签：android

我想传递地址并想要 lat 和 long 。但我从 maps.google.com 获得了完整的字符串。但是JSON格式有错误。

我尝试下面的代码

```
Error :Couldn't get connection factory client 
```

getLocationInfo("3 cité Nollez Paris France");

```
public static void getLocationInfo(String address) {
        StringBuilder stringBuilder = new StringBuilder();
        try {

        address = address.replaceAll(" ","%20");    

        HttpPost httppost = new HttpPost("http://maps.google.com/maps/api/geocode/json?address=" + address + "&sensor=false");
        HttpClient client = new DefaultHttpClient();
        HttpResponse response;
        stringBuilder = new StringBuilder();

            response = client.execute(httppost);
            HttpEntity entity = response.getEntity();
            InputStream stream = entity.getContent();
            int b;
            while ((b = stream.read()) != -1) {
                stringBuilder.append((char) b);
            }

            System.out.print(stringBuilder);
        } catch (ClientProtocolException e) {
        } catch (IOException e) {
        }

        JSONObject jsonObject = new JSONObject();
        try {

            jsonObject = new JSONObject(stringBuilder.toString());

            longitute = ((JSONArray)jsonObject.get("results")).getJSONObject(0)
                    .getJSONObject("geometry").getJSONObject("location")
                    .getDouble("lng");

                System.out.print(longitute);

                latitude = ((JSONArray)jsonObject.get("results")).getJSONObject(0)
                    .getJSONObject("geometry").getJSONObject("location")
                    .getDouble("lat");

                System.out.print(latitude);

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

      //  return jsonObject;
    } 
```

LOGCAT

```
{
   "results" : [
      {
         "address_components" : [
            {
                "long_name" : "3",
                "short_name" : "3",
                "types" : [ "street_number" ]
             },
             {
                "long_name" : "CitÃ© Nollez",
                "short_name" : "CitÃ© Nollez",
                "types" : [ "route" ]
             },
             {
                "long_name" : "18th arrondissement of Paris",
                "short_name" : "18th arrondissement of Paris",
                "types" : [ "sublocality", "political" ]
             },
             {
                "long_name" : "Paris",
                "short_name" : "Paris",
               "types" : [ "locality", "political" ]
             },
             {
              "long_name" : "Paris",
                "short_name" : "75",
                "types" : [ "administrative_area_level_2", "political" ]
             },
             {
                "long_name" : "Ã?le-de-France",
                "short_name" : "IdF",
                "types" : [ "administrative_area_level_1", "political" ]
             },
             {
                "long_name" : "France",
                "short_name" : "FR",
               "types" : [ "country", "political" ]
            },
             {
             "long_name" : "75018",
              "short_name" : "75018",
               "types" : [ "postal_code" ]
            }
         ],
         "formatted_address" : "3 CitÃ© Nollez, 75018 Paris, France",
         "geometry" : {
            "location" : {
               "lat" : 48.89376110,
               "lng" : 2.33742180
            },
            "location_type" : "ROOFTOP",
            "viewport" : {
               "northeast" : {
                  "lat" : 48.89511008029150,
                  "lng" : 2.338770780291502
               },
               "southwest" : {
                  "lat" : 48.89241211970850,
                  "lng" : 2.336072819708498
               }
            }
         },
         "types" : [ "street_address" ]
      }
   ],
   "status" : "OK"
}
03-14 13:51:35.776: I/MapActivity(1430): Handling network change notification:CONNECTED
03-14 13:51:35.776: E/MapActivity(1430): Couldn't get connection factory client 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:49:54.193

在您的 Map 活动中添加以下代码在 super.onCreate() 之前

**示例活动：-**

```
 public class ExampleActivity extends Activity {

    // url to make request
    private static String url = "http://maps.googleapis.com/maps/api/geocode/json?address="+address.replace(" ", "%20")+"&sensor=true";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tvlat = (TextView) findViewById(R.id.tvlat);
        tvlng = (TextView) findViewById(R.id.tvlng);

        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
             System.out.println("Location Latitude"
                + json.getJSONArray("results").getJSONObject(0)
                        .getJSONObject("geometry")
                        .getJSONObject("location").getString("lat"));

               System.out.println("Location Longitude"
                + json.getJSONArray("results").getJSONObject(0)
                        .getJSONObject("geometry")
                        .getJSONObject("location").getString("lng"));    
        } catch (JSONException e) {
            e.printStackTrace();
        }

    }
} 
```

**JSONPareser：-**

```
public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();            

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

然后运行你的应用程序，它对我来说很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:25:46.097

您是否启用了这些权限。

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:33:30.350

如果在使用地图时“无法获得连接错误”，则无需担心。即使发生这种情况，它也会正常工作。如果您的代码不起作用，那么还有其他原因。检查它..

# c - 在 gcc 上编译时目标文件出错

> ID：15404246
> 
> 赞同：0
> 
> 时间：2013-03-14T08:20:56.090
> 
> 标签：c, gcc, linker

我有几个 .h 文件，它们包含在 .c 文件的开头。

当我使用 -c 标志编译 .c 文件时：

```
gcc -Wall -c parserv9-3.c 
```

没有错误或任何警告。

但是，当我删除 -c 标志时，它会在临时目标文件中出现错误。

也就是说，当我跑步时

```
gcc -Wall parserv9-3.c 
```

我收到以下错误：

```
/tmp/cc5IWBiC.o: In function `parseInputSourceCode':
parserv9-3.c:(.text+0x204b): undefined reference to `getStream'
collect2: error: ld returned 1 exit status 
```

问题是什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:22:48.903

`-c`flag 表示仅编译，而不是链接。当您删除它时 - gcc 还会将该对象链接到可执行文件（而是调用 ld 命令），然后它必须找到所有引用的外部符号。

在您的情况下，该符号`getStream`不存在。它可能在不同的 .c 文件中。

# typo3 - Typo3：我如何找到在typo3.org 中列出的我上传的扩展程序

> ID：15404247
> 
> 赞同：0
> 
> 时间：2013-03-14T08:21:04.607
> 
> 标签：typo3

我已经在typo3.org-> [Extension中上传了我的typo3 扩展](http://typo3.org/extensions/repository/)

它在特定类别下列出。但是我在我们导入扩展名的typo3后端找不到相同的扩展名。是否可以从我的typo3站点的后端导入我的扩展名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:27:42.503

很可能您需要检索/更新`Extenion Manager`目标机器上的扩展列表。还请记住，默认情况下 EM 选择随机镜像，因此如果您的扩展程序是之前上传的，则可能需要一些时间才能在每个镜像上可用。

另一方面...

如果您只想在多个实例之间共享，则无需将其发布到 TER，只需将其在源计算机上导出为 t3x 文件，然后从文件中导入。您也可以将整个扩展文件夹从`typo3conf/ext`源计算机的文件夹复制到目标计算机上的同一文件夹，然后它将处于与从 repo 下载但尚未安装的相同状态。

# xslt - 将当前日期与节点的日期进行比较

> ID：15404248
> 
> 赞同：0
> 
> 时间：2013-03-14T08:21:05.420
> 
> 标签：xslt

我对 XSLT 有一个小问题......

基本上我有以下xml：

```
<Root>
 <Node>
  <Prop1></Prop1>
  <Prop2></Prop2>
  <Date>03/05/2013</Date>
  ...
 </Node>
 <Node>
  <Prop1></Prop1>
  <Prop2></Prop2>
  <Date>01/01/2012</Date>
  ...
 </Node>
</Root> 
```

从这里我生成一个表，它看起来像这样：

```
<table>
<tr>       
    <th colspan="2" style="text-align:left;">
        <u>
        Table: 
        </u>    
    </th>
</tr> 
<xsl:for-each select="Root/Node[current-date() < date]">    
    <xsl:sort select="date" />          
            <tr>                
                <td><xsl:value-of select="prop1"/></td>
                <td>
                        ...       
                </td>
                <td><xsl:value-of select="date"/></td>
            </tr> 
</xsl:for-each>
</table> 
```

我只想获取日期过期的节点，基本上是 date < currentdate

知道如何实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:35:57.467

请首先记住，XPath 区分大小写，`Node`如果元素的名称实际上是`Node1`or ，它将不匹配元素`Node2`。

假设您正在使用 XSLT 1.0，没有内置方法可以获取当前日期，因此您需要将其作为参数传递。如果你能让它工作，这样的事情应该可以解决问题：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:param name="currentDate" />

  <xsl:template match="/">
    <table>
      <tr>
        <th colspan="2" style="text-align:left;">
          <u>
            Table:
          </u>
        </th>
      </tr>
      <xsl:apply-templates select="Root/*[translate($currentDate, 'T:-', '') &lt; 
                                          translate(Date, 'T:-', '')]">
        <xsl:sort select="Date" />
      </xsl:apply-templates>
    </table>
  </xsl:template>

  <xsl:template match="Root/*">
    <tr>
      <td>
        <xsl:value-of select="Prop1"/>
      </td>
      <td>
        ...
      </td>
      <td>
        <xsl:value-of select="Date"/>
      </td>
    </tr>
  </xsl:template>
</xsl:stylesheet> 
```

# ios - UITextField 输入格式

> ID：15404255
> 
> 赞同：0
> 
> 时间：2013-03-14T08:21:41.103
> 
> 标签：ios, time, uitextfield

我正在编写一个小应用程序，这将对我的日常工作有所帮助。因此应用程序应该计算时间值。我在应用程序顶部有一个 uitextfield。

现在我想在输入时格式化用户的输入。在每 2 位数字之后，我想插入一个：

就像神奇的应用程序“时间码”一样。

请给我一个提示，如何实现我的愿望？

![截屏](../Images/8e56897a5d79428604b8a008eb537c12.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:33:01.730

您需要使用`shouldChangeCharactersInRange:`委托方法`UITextField`

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
     NSString *tempString = [textField.text stringByReplacingCharactersInRange:range withString:string];
     NSArray *temp  = [tempString componentsSeparatedByString:@":"];
     NSString *test = [temp lastObject];
     if([test length] == 2)
     {
          test = [NSString stringWithFormat:@"%@:",test];
          tempString = @"";
          for(int loop = 0;loop<[temp count]-1;loop++)
          {
              tempString = [tempString stringByAppendingFormat:@"%@:",[temp objectAtIndex:loop]];
          }
          if([temp count] != 1)
              tempString = [tempString stringByAppendingFormat:@"%@",test];
          else
              tempString = test;
      }
    textField.text = tempString;
    return NO;
} 
```

上面的代码将在正常情况下工作。如果用户在字符之间进行编辑，则会出现问题，您还需要对其进行管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:59:50.443

此代码将为您工作....

```
-(BOOL)textField:(UITextField*)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSCharacterSet *numberSet = [NSCharacterSet characterSetWithCharactersInString:@"0123456789"];
    if(string.length == 0)
    {
        return YES;
    }
    else if([string rangeOfCharacterFromSet:numberSet].location == NSNotFound)
    {
        return NO;
    }

    NSString *textFieldText = [textField.text stringByReplacingOccurrencesOfString:@":" withString:@""];

    if((string.length == 1) && (textFieldText.length > 0) && (textFieldText.length % 2) == 0)
        textField.text = [NSString stringWithFormat:@"%@:",textField.text];

    return YES;

} 
```

我检查并正常工作以满足您的要求。

# python - 更改 python 对象的类（强制转换）

> ID：15404256
> 
> 赞同：30
> 
> 时间：2013-03-14T08:21:52.343
> 
> 标签：python, python-3.x

在这个[python 文档页面上](http://docs.python.org/3.3/reference/datamodel.html)它说：

> 像它的身份一样，对象的类型也是不可更改的。

我试试这个脚本，

```
#!python3  

class Foo:
  num = 1
  pass

class Bar:
  num = 2
  pass

f1,f2= Foo(), Foo()

f2.__class__ = Bar
print( type(f1), type(f2), f1.num, f2.num ) 
```

结果显示：

`<class '__main__.Foo'> <class '__main__.Bar'> 1 2`

我想我改变`type`了`f2`.
怎么了，我错过了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-14T08:41:43.360

该页的脚注说：

> [1] 在某些受控条件下，在某些情况下可以更改对象的类型。不过，这通常不是一个好主意，因为如果处理不当，可能会导致一些非常奇怪的行为。

如果您尝试将`__class__`f2 更改为`list`：

```
f2.__class__ = list 
```

引发 TypeError：

```
TypeError: __class__ assignment: only for heap types 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-04-12T11:56:12.030

## 何时以及如何执行此操作

如果您想向由某些无法更改的代码创建的对象**添加功能**，则更改类型（“强制转换”）是有意义的。

假设某些语句`obj = some_call_to_a_library()`为您提供了 class 的对象`A`。您希望它具有附加功能，例如`mymethod()`. 然后你可以引入这样的子`MyA`类（Python 3 风格）：

```
class MyA(A):
    @classmethod
    def cast(cls, some_a: A):
        """Cast an A into a MyA."""
        assert isinstance(some_a, A)
        some_a.__class__ = cls  # now mymethod() is available
        assert isinstance(some_a, MyA)
        return some_a

    def mymethod(self):
        ... 
```

然后写`obj = MyA.cast(some_call_to_a_library())`。如果`MyA`依赖于其他属性，`cast`（这是一种工厂方法）应该创建它们。

`requests.Response`当我需要一个可以持续存在并从文件中检索响应的版本时，我只是做了类似的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-12-01T17:31:13.437

今天有个同事问我这个问题。他有一个父类，希望根据初始化时的输入自动将自己提升为它的子类之一。以下脚本用作概念证明：

```
class ClassB(object):

    def __init__(self):
        self.__class__ = ClassA

    def blah2(self,t):
        print('I give you',t)
        return 'You are welcome'

class ClassA(ClassB):

   def blah(self, t):
       print('you gave me',t)
       return 'Thankyou'

a = ClassB()
print(type(a))
print(a.blah('sausage'))
print(a.blah2('cabbage')) 
```

结果显示：

```
<class '__main__.ClassA'>
you gave me sausage
Thankyou
I give you cabbage
You are welcome 
```

这表明父函数和子函数现在都可用于`A`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-03-08T09:39:25.650

老问题，但这是一种安全扩展python对象类型的技术。

```
def extendObject(obj):
    # Our extended type is explicitly derived from our existing type.
    class Extended(obj.__class__):
        # Whatever extensions you want to make.
        def someMethod(self):
            pass
    # Change the type of the object.
    obj.__class__ = Extended
    return obj 
```

# c# - 播放录音时需要有关 FastAGI 的帮助

> ID：15404258
> 
> 赞同：0
> 
> 时间：2013-03-14T08:22:20.043
> 
> 标签：c#, .net, asterisk, fastagi

在遇到这个问题之前，我一直在玩 Asterisk `FastAGI()`。

所以我有一个使用`FastAGI()`. 我在播放文件或其中的快速消息时没有问题。但是，如果有两个电话打进来，我会为两个频道播放一条消息。它不会同时播放。它仅在第一个接听电话时播放，然后在将消息播放到第一个电话后，它会在第二个电话上播放。所以我有点想同时播放他们两个的消息/录音，或者至少不等待另一个完成。

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:01:01.977

它与 FastAGI 没有任何关系。

没有拨号方案就无法说出你做错了什么，但你总是可以使用会议在同一时间向不同的人播放一条消息。

# c# - PropertyInfo GetCustomAttributes 返回 0 个对象

> ID：15404261
> 
> 赞同：1
> 
> 时间：2013-03-14T08:22:24.020
> 
> 标签：c#, attributes, propertyinfo

所以这是我第一次在这里问，请多多包涵。我正在尝试学习如何将属性附加到我的对象，但我无法检索它们。所以这是我的属性类：

```
[AttributeUsage(AttributeTargets.Property)]
public class attr : System.Attribute
{
    public readonly Boolean Required;

    public string formID { get; set; }

    public attr(Boolean required)
    {
        this.Required = required;
    }

    public attr(Boolean required, string formID)
    {
        this.Required = required;
        this.formID = formID;
    }
} 
```

我如何将它“附加”到我的一个对象上的属性的示例：

```
public class MyObject
{
    [attr(true, "formRequireField")]
    public int RequiredField { get { return REQUIREDFIELD; } set { REQUIREDFIELD = value; } }
} 
```

以及我当前如何检索属性的代码：

```
foreach (PropertyInfo property in typeof(MyObject).GetProperties())
{
    Attribute[] attributes = Attribute.GetCustomAttributes(property, false);
    foreach (Attribute attribute in attributes)
    {
        if (attribute is attr)
        {
            attr propAttr = (attr)attribute;
            if (propAttr.Required)
            {
                Page.Form.FindControl(propAttr.formID);
            }
        }
    } 
```

我也试过这种格式

```
 object[] attributes = property.GetCustomAttributes(true);
    foreach (object attribute in attributes)
    {
        if (attribute is attr)
        {
            attr propAttr = (attr)attribute;
            if (propAttr.Required)
            {
                Page.Form.FindControl(propAttr.formID);
            }
        }
    }
} 
```

它们都返回 0 个对象。所以我不确定发生了什么？

提前致谢。

# java - 没有数据从自己的 HTTP 服务器发送到浏览器

> ID：15404265
> 
> 赞同：0
> 
> 时间：2013-03-14T08:22:45.133
> 
> 标签：java, ajax, sockets, http

我创建了简单的 Java 服务器，它使用 HTTP 协议通过端口 4567 接受连接并（至少现在）向浏览器发送硬编码响应：

```
public class Connection extends Thread {
    private boolean stop;
    private Socket socket;
    private BufferedWriter output;
    private BufferedReader input;

    public Connection(Socket socket) {
        try {
            this.socket = socket;
            output = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
            input = new BufferedReader(new InputStreamReader(socket.getInputStream()));
        } catch (IOException ex) {
            System.out.println("Could not create input/output readers: " + ex);
        }
    }

    @Override
    public void run() {
        //while (!stop) {
            try {
                String data = "{'success': 'yes'}".replaceAll("'", "\"");
                String read;

                // printing request on screen; it's ignored
                while (!(read = input.readLine()).equals("")) {
                    System.out.println(read);
                }

                // Last empty line send by browser won't be printed 
                System.out.println();

                // Writing hardcoded response
                writeln("HTTP/1.1 200 OK");
                writeln("Content-Type: application/json; charset=utf-8");
                writeln("Content-Length: " + data.length());
                writeln();
                writeln(data);
                output.flush();
                input.close();
                output.close();
            } catch (IOException ex) {
                System.out.println("IO Error: " + ex);
            }
        //}
    }    

    private void writeln(String... lines) throws IOException {        
        if (lines.length == 0) {
            System.out.println("Writing:");
            output.write("\n");
        }

        for (String line : lines) {
            System.out.println("Writing: " + line);
            output.write(line + '\n');
        }
    }

    public void setStop(boolean stop) {
        this.stop = stop;
    }
} 
```

连接实例是在另一个线程中创建的，它只是`new Connection(serversocket.accept()).start();`

在浏览器端，通过以下代码发送 AJAX 请求：

```
$(document).ready(function() {
    $.ajax({
        url: "http://192.168.1.212:4567",
        crossDomain: true,
        success: function(data) {
            console.log("Success: " + data);
        },
        error: function (xhr, ajaxOptions, thrownError) {
            console.log("Text: " + xhr.responseText);
            console.log("Status: " + xhr.status);
            console.log("Error: " + thrownError);
      }
    });
}); 
```

浏览器是这么说的：

![在此处输入图像描述](../Images/be3194c04e58b380ed3b7234523e344b.png)

这就是服务器所说的：

```
GET / HTTP/1.1
Host: 192.168.1.212:4567
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:10.0.4) Gecko/20120425 Firefox/10.0.4
Accept: */*
Accept-Language: pl,en-us;q=0.7,en;q=0.3
Accept-Encoding: gzip, deflate
Connection: keep-alive
Referer: http://localhost:8383/Client/index.html
Origin: http://localhost:8383

Writing: HTTP/1.1 200 OK
Writing: Content-Type: application/json; charset=utf-8
Writing: Content-Length: 18
Writing:
Writing: {"success": "yes"} 
```

我知道有跨域请求，这是我项目中非常重要的一部分。所有标头都已发送，但没有响应数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:29:30.610

您粘贴为“服务器所说的内容”的内容是正常的浏览器请求，而不是响应。最小的**响应**如下所示：

```
HTTP/1.0 200 OK
Content-Type: text/html; charset=utf-8
Cache-Control: no-cache
Date: Sun, 01 Mar 2012 00:00:00 GMT
Server: IAMME
Content-Length: 14444
Connection: Close 

some content here... 
```

我还可以看到您没有发送任何状态（它是“0”）.. 请参阅上面块的第一行。

# asp.net-mvc - ModelState.AddModelError 未显示任何消息

> ID：15404270
> 
> 赞同：10
> 
> 时间：2013-03-14T08:23:09.003
> 
> 标签：asp.net-mvc, telerik-grid, telerik-mvc

我正在使用 Telerik mvc 网格。在我的表中，我为字段定义了唯一键。在控制器中，我在 DbUpdateException 中使用 try ... catch 来捕获错误。

在 catch 块中，我想处理错误并在视图中显示错误消息。所以使用以下行，

```
ModelState.AddModelError("PROGRAM_ID", "Access for this program already exists.");
return View(); 
```

但这没有显示错误消息。知道为什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T08:25:59.043

确保`ValidationMessage`您的视图中有一个具有相同键的对应项：

```
@Html.ValidationMessage("PROGRAM_ID") 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-06-26T00:50:38.323

ValidationSummary 将仅显示 ModelErrors for string.empty 作为键。要在验证摘要中显示使用 ModelState.AddModelError 添加的错误，请将代码更改为：

```
ModelState.AddModelError(string.Empty, "Access for this program already exists."); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-28T01:12:20.873

遵循2个步骤：（达林的解决方案有效）

1.  在控制器中添加： `ModelState.AddModelError("PROGRAM_ID", "Error Msg");`
2.  在视图中添加： `@Html.ValidationMessage("PROGRAM_ID")`

# cassandra - 如果不鼓励在 cassandra 1.2/Cql3 中使用动态列，那么它在功能上比 Mysql 好多少？

> ID：15404280
> 
> 赞同：10
> 
> 时间：2013-03-14T08:23:39.407
> 
> 标签：cassandra, cql3

最初我开始学习 Cassandra，因为动态列引起了我的注意。随着我开始学习更多，我了解到复合主键比动态列更受欢迎，并且 Cassandra 正在转向基于模式（模式是可选的，不是强制性的，但建议使用）。在 cql3 中，这是强制性的，我读到 cql3 是 cassandra 中新应用程序的最佳方法。

这是我面临一个有趣问题的地方。我正在阅读一张特定的幻灯片（Mysql vs Casssandra）-http://lanyrd.com/2012/austin-mysql-meetup-january/spdrx/ [（](http://lanyrd.com/2012/austin-mysql-meetup-january/spdrx/)跳转到第 31 张幻灯片），其中讨论了欺诈检测用例。

“在 FraudDetection 中，为了计算风险，通常需要知道有关帐户曾经使用过的所有电子邮件、目的地、来源、设备、位置、电话号码等。”

解释了我们如何在关系世界中维护电子邮件、目的地、来源等的单个表，以及在 cassandra 世界中使用动态列键和值是多么容易。（31-34 张幻灯片）。

既然动态列的键和值都被劝阻了，我们该如何解决这个问题呢？我们是否应该为每个电子邮件、目的地等维护单独的列族？那么它与关系世界有什么不同呢？仅与可扩展性有关吗？我们还能继续使用无模式方法吗？这是“架构是可选的和推荐的，但不是强制性的”的黄金法则吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T19:58:03.827

很抱歉在这里造成混乱。事实证明，我没有正确理解基本概念。这是答案

动态列是 Cassandra 的核心。它们仍然受到支持并且仍然是核心 :) 只是在节俭中您直接执行，而在 CQL 中您以不同的方式执行（通过模式方式）。但是你仍然这样做:) - 阅读这个 - [http://www.datastax.com/dev/blog/thrift-to-cql3](http://www.datastax.com/dev/blog/thrift-to-cql3)

关于 Cassandra 如何优于 Mysql - 阅读此[http://lanyrd.com/2012/austin-mysql-meetup-january/spdrx/（16-24](http://lanyrd.com/2012/austin-mysql-meetup-january/spdrx/)张幻灯片）

谢谢 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:39:42.127

如果您使用 Thrift API 而不是 CQL，您仍然可以使用无模式方法。作为一名长期使用 Cassandra 的用户，我还发现推动预先定义模式的做法值得商榷。但幸运的是，底层存储机制是相同的，并且我所知道的所有客户端都支持使用基于 Thrift 的调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T05:58:52.127

取而代之的是动态列，有支持集合的东西，如集合、列表、地图。动态性还不够吗

# mysql - 执行 where 子句

> ID：15404286
> 
> 赞同：0
> 
> 时间：2013-03-14T08:23:59.433
> 
> 标签：mysql, sql, select

我有这个客户表：

```
+----------+----------+---------+
| cliecode | cliename | deleted |
+----------+----------+---------+
|    00001 | ABC      |         |
|    00002 | DEF      |         |
|    00003 | GHI      | yes     |
|    00004 | JKL      |         |
+----------+----------+---------+ 
```

我正在执行这样的搜索查询：

```
SELECT * 
FROM client 
WHERE deleted ='' 
      AND cliecode LIKE '%$_POST[key]%' OR cliename LIKE '%$_POST[key]%' 
```

我想`deleted = ''`在条件之前获取第一个`like`。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T08:25:04.020

然后`OR`通过将它们放在括号内来对您的条件进行分组，

```
select  * 
from    client 
where   deleted ='' and 
       (cliecode like '%$_POST[key]%' or cliename like '%$_POST[key]%') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:28:30.777

您是否在已删除字段中设置了任何默认值？

如果不 -

那么您的查询应该是 -

```
select * from client 
where 
deleted is null 
and cliecode like '%$_POST[key]%' 
or cliename like '%$_POST[key]%' 
```

# perl - 如何检查这样的文件

> ID：15404287
> 
> 赞同：0
> 
> 时间：2013-03-14T08:24:05.920
> 
> 标签：perl, file, localtime

我每天都在我的数据库上进行备份，文件名如下所示

```
AWDRT.0.db2inst1.NODE0000.CATN0000.20130312095740.001
AWDRT.0.db2inst1.NODE0000.CATN0000.20130313100330.001
GSRTC.0.db2inst1.NODE0000.CATN0000.20130313102253.001 
```

如果在附加时间戳之后看到，我如何检查今天是否进行了备份，`CATN0000`即`YYYYMMDD`。所以我可以检查备份文件是否存在

在shell中我曾经这样做过

```
/home/ftpusr/backup/AWDRT.0.db2inst1.NODE0000.CATN0000.`date +%Y%m%d`* 
```

我如何在 perl 中执行此操作以及如何清除我在 shell 中执行的旧备份，如下所示

```
/home/ftpusr/backup/AWDRT.0.db2inst1.NODE0000.CATN0000.`date +%Y%m%d -d "$i days ago"` 
```

帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:04:51.900

首先将 dir 更改为备份所在的位置（要添加到两个脚本中）

```
chdir ('/home/backups/vital'); 
```

列出今天的备份（当地时间）

```
$now = time();
($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime($now);
$ymd = sprintf("%4d%02d%02d", $year+1900, $mon+1, $mday);

@backup = glob("*.CATN0000.$ymd*");

if ($#backup >= 0) {
  print("Backup at $ymd: @backup\n");
}
else {
  print("No backup at $ymd\n");
} 
```

然后查找并删除n天前的文件（如果多个文件匹配，则仅删除列表中的第一个）

```
$daysago = 3; # 3 days ago
$now = time();

($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime($now - $daysago*3600*24);
$old = sprintf("%4d%02d%02d", $year+1900, $mon+1, $mday);

@oldbackup = glob("*.CATN0000.$old*");

if ($#oldbackup >= 0) {
  print("Old Backup at $old: @oldbackup - removing (first one)\n");
  unlink( $oldbackup[0] );
}
else {
  print("No old backup at $old\n");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:44:44.483

您也可以在 perl 中使用反引号。

```
$ perl -e"print qq(`date "+%Y%m%d"`)" 
```

可以使用 unlink() 从 perl 中删除文件。

检查文件是否存在是通过例如

```
if ( -e $filename ) { die("File $filename exists") }; 
```

更新：

您还可以使用 readdir 并在文件名上使用正则表达式来完成它。

```
use Time::localtime

opendir(DIR, "/cygdrive/d/test/") || die("Error");
$backup_exists = 0;
$prefix = "CATN0000.";
while ($f = readdir(DIR)) {
  $today_timestamp = sprintf('%4d%02d%02d', localtime->year()+1900, localtime->mon()+1, localtime->mday());
  if ( $f =~ /$prefix$today_timestamp/ ) {
    $backup_exists = 1;
  }
}
closedir(DIR);

if ( $backup_exists ) {
  print "Backup exists\n";
} else {
  print "Backup does not exist\n";
} 
```

更新 2：但上面的 glob() 版本更有效。用那个。

# php - 使用权重因子按多列对查询结果进行排序以进行标准化

> ID：15404288
> 
> 赞同：3
> 
> 时间：2013-03-14T08:24:06.093
> 
> 标签：php, sql, database, sorting

我知道标题有点复杂，但我想说的是：

我有一张存储不同广告横幅的表格，将显示在网页上。我试图想出一种方法来以最好的方式对这些广告进行排序，以满足网站订阅者的需求。所以，我想到的一个例子是：

该表包含广告名称、目标受众、坐标、流行度和展示激励。假设我只想显示与当前用户登录的目标受众相同的广告。我还想只显示那些人气至少为 5 且与会员的距离 < 80 英里的事件。与会员的距离越短越好，人气越高也越好。我知道我可以通过 Descending Popularity 和 Ascending Distance 对查询结果进行排序。

但是，这对于我正在尝试做的事情并不理想。如果我按照刚才描述的方式进行操作，我认为我可能会遇到距离用户 6 英里的结果出现的问题，但受欢迎程度仅为 5。我不希望这个结果成为第一个排序的查询结果出现。

我认为很酷的是使用归一化加权乘数来对查询结果进行排序，从而得出一个综合分数。比如说，我希望“人气”的权重因子为 0.7，而“距离”的权重因子为 0.3。现在，查询的结果将按最大的综合得分 Desc 排序。我已经知道，要让它适用于距离，我必须将最低距离除以查询结果中的所有距离值，这样实际最低距离的得分为 1。这将是最高得分这部分算法。然后，当然，该 1 和所有其他距离值将乘以 0.3 以使加权乘数生效。反之亦然

我知道这听起来很复杂，但它必须以某种方式成为可能。我之前用求解器在 Excel 电子表格中完成了它，但现在我必须将它翻译成 SQL。非常感谢任何和所有反馈。

我预计的一个问题是从 Ads 表中获取坐标并将其与登录到我的网页的用户的当前位置进行比较。这必须在显示查询结果之前完成，因为查询不是询问坐标而是询问与用户的距离。现在，我想想。这部分不应该太难编码。也许我只需要语法方面的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:51:10.660

因此，如果您的评分介于 [0 - 5] 和距离之间，

所以你会按这个排序吗？((人气*0.7)*((距离MAX-距离)*0.3))

甚至可能将这些权重设置为服务器变量，这只是一个建议（在我的 excel 文档中制定，呵呵）

```
select field1, field2, field3
from stuff
order by ((popularity*0.7)*((distanceMAX-distance)*0.3)) desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:49:38.197

你可以试试这样的

```
SELECT ad.*, ((ad.popularity * 0.7) + (ad.distance * 0.3)) AS relevance
FROM ad
WHERE popularity >= 5
ORDER BY relevance, popularity DESC 
```

未经测试，但也许它可以帮助您进行更多实验？

# c# - 从 javascript 读取数据表

> ID：15404292
> 
> 赞同：0
> 
> 时间：2013-03-14T08:24:31.867
> 
> 标签：c#, javascript, ajax

我有一个 ajax 函数，它从 sql 查询中填充 DataTable 并返回它我的问题是我找不到从 javascript 读取 DataTable 的解决方案，他们有什么特殊的方法可以做到这一点吗？

编码 ：

```
 [WebMethod]
public static DataTable SendOnlineContacts(int ClientID)
{

    string query = " Select fr.FRIEND_ID,cl.USER_NAME,cl.PROFILE_PIC "
                   +" from clients cl inner join friends fr on cl.CLIENT_ID =fr.FRIEND_ID "
                    +"  where fr.CLIENT_ID= "+ ClientID ;
    return  new SQLHelper(SQLHelper.ConnectionStrings.WebSiteConnectionString).getQueryResult(query);
} 
```

SQLHelper(SQLHelper.ConnectionStrings.WebSiteConnectionString).getQueryResult(query) 是我创建的一个类，只是为了简化我的工作，这个函数默认返回一个 DataTable

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:48:29.173

我刚刚找到了解决这个问题的好方法:) 它可能对其他用户有帮助，所以如果 DataTable 返回多行，我会将其作为答案发布，我会将每一行作为字符串读取并放置一个 ';' 在它的末尾，而不是在该行的每一列上，我会放“，”所以我以后可以阅读它们，我将在代码中显示

服务器端 ：

```
[WebMethod]
public static string SendOnlineContacts(int ClientID)
{
    string result="";
string query = " Select fr.FRIEND_ID,cl.USER_NAME,cl.PROFILE_PIC "
               +" from clients cl inner join friends fr on cl.CLIENT_ID =fr.FRIEND_ID "
                +"  where fr.CLIENT_ID= "+ ClientID ;
DataTable Dt= SQLHelper(SQLHelper.ConnectionStrings.WebSiteConnectionString).getQueryResult(query);
 if(Dt.Rows.Count>0)
  {
      for(int i=0;i<Dt.Rows.Count;i++)
    {
        result+=Dt.Rows[i][0]+","+Dt.Rows[i][1]+";" ;
    }
   return result;
   }
} 
```

客户端

```
 $.ajax({
    type: 'POST',
    url: 'ChatPageTest.aspx/SendOnlineContacts',
    data: '{ClientID:"' + ClientID+ '"}',
    contentType: 'application/json; charset=utf-8',
    dataType: 'json',
    success: function (data) {
      var Res=data.d.split(';');
       for(i=0;i<Res.length;i++)
       {
          var Fres=Res[i].split(',');

       }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:21:26.980

我建议您使用标准格式在服务器端和客户端之间交换数据。.net 数据表是一个强大而复杂的对象。但是客户端不需要数据表本身，而是客户端需要它的数据。所以我认为重点是：如何将数据从服务器传递到客户端。

如果您管理的数据结构是普通结构，则使用字符串是一个简单的解决方案。但是，如果您想要更大的灵活性和更通用的方法，那么字符串操作可能很容易变成地狱。所以我认为使用结构化格式（例如 JSON）可能是一个更好的解决方案。

最终，您需要将数据呈现给客户端。我通常使用[Jayrock](http://jayrock.berlios.de/)将 JSON 格式的数据呈现给客户端。看一看。

实施您的解决方案的步骤可能是：

1.  [*服务器端*] 实现一个处理程序：从后端检索数据，将它们序列化为 JSON 并公开它们
2.  [*客户端*] 实现一个调用处理程序、检索数据并在 DOM 中呈现它们的 javascript 客户端（如果您喜欢这个解决方案，可以使用 Jayrock 代理）。

# javascript - .net 的库，可以接受来自 javascript 的查询

> ID：15404293
> 
> 赞同：0
> 
> 时间：2013-03-14T08:24:43.290
> 
> 标签：javascript, .net

我很难清楚地表达自己，请允许我举个例子。（是的，这样做非常危险）

客户端：

```
$.ajax({
  type: "POST",
  url: "/customer/query",
  data: { sql: "SELECT * FROM CUSTOMER" }
}); 
```

服务器端：

```
public JSonResult query(string sql)
{
  var dataset = MySqlConnection.Execute(sql);

  return ConvertDataSetToJson(dataset);
} 
```

虽然这显然是一个非常简单（而且很危险！）的例子，但我认为它说明了我在寻找什么；某种具有.net 标准化查询语言的库，可以解析来自 javascript 的查询。

我显然不想像示例中那样直接使用 SQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:59:42.640

[OData](http://www.odata.org/)允许您通过 HTTP 提供数据源。Visual Studio 附带了一个名为[WCF Data Service](http://msdn.microsoft.com/en-us/library/cc668792.aspx)的 OData 项目模板。OData 允许安全访问数据源（对于所有 CRUD 操作）。

有一些[主要网站](http://www.odata.org/ecosystem#liveservices)提供 OData 服务，例如[StackExchange](https://data.stackexchange.com/)或[eBay](http://ebayodata.cloudapp.net/)。查询 StackOverflow OData 服务的示例：[名为 Jon Skeet 的 SO 上的用户](https://data.stackexchange.com/stackoverflow/atom/Users?$filter=DisplayName%20eq%20%27Jon%20Skeet%27)。

根据[OData 网站](http://www.odata.org/blog/2011/2/9/new-javascript-library-for-odata-and-beyond)，支持 JavaScript 作为客户端语言。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T08:28:36.550

您可以为此使用 JSON-RPC，这里是[C#](http://jayrock.berlios.de/)的 JSON-RPC 。您可以在 Wikipedia 上阅读有关[JSON-RPC 的](https://en.wikipedia.org/wiki/JSON-RPC)更多信息。

# regex - PCRE 匹配带有或不带有 args 的 url

> ID：15404300
> 
> 赞同：0
> 
> 时间：2013-03-14T08:25:14.223
> 
> 标签：regex, pcre

假设 JS/CSS 文件的给定 URL 有时会以 '?v=xyz' 之类的结尾。

我如何在 PCRE 中捕获这两种情况，即对于

```
"/my/path/lib.js" 
```

以下

```
"\.[js|css]$" 
```

工作得很好。我想包括以下案例：

```
"/my/path/lib.js?v=1.4" 
```

和

```
"/my/path/style.css?v=3" 
```

我正在使用 Lua-5.1 PCRE 库

```
> rex_pcre = require "rex_pcre"
> return rex_pcre.find("/my/path/jquery.css", "\.(?:js|css)(?:$|\?)")
stdin:1: nothing to repeat (pattern offset: 17)
stack traceback:
        [C]: in function 'find'
        stdin:1: in main chunk
        [C]: ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:26:27.113

你可以使用：

```
\.(?:js|css)(?:$|\?) 
```

请注意，这`[js|css]`不是您认为的那样。它是一个字符类，它匹配 的一个字符`cjs|`，你想要一个组：`(?:js|css)`。

# android - 如何在单个活动 android 中将列表项设置为全屏？

> ID：15404301
> 
> 赞同：-1
> 
> 时间：2013-03-14T08:25:14.537
> 
> 标签：android, listview, listviewitem, custom-adapter

实际上我有一堆图像，我将这些图像传递给我的自定义数组适配器以显示在列表视图中，我在列表视图中获得了精彩的图像演示。但我想要的是一次显示一张图像以全屏显示在列表中。意味着我想在（100%）全屏活动中显示我的一行。我为此浪费了 2 天时间，但仍然没有得到解决方案。

当我在相对布局（id = subparent）中给出 android:layout_height="wrap_content" 时，它会重叠而不是我想要的，当我给出 android:layout_height="430dp" 时，它看起来就像我想要的。但我不能这样做，因为我不知道它会在哪个设备上运行？

我的 XML 文件如下：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
     >

    <RelativeLayout
        android:id="@+id/subparent"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentTop="true" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:src="@drawable/img2" />

        <FrameLayout
            android:id="@+id/flbotom"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:background="@drawable/bottom_nav"
            android:layout_alignParentBottom="true">
        </FrameLayout>

    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T07:00:49.353

我通过简单地放置虚假视图找到了解决方案。

# c++ - c++中的资源文件管理

> ID：15404302
> 
> 赞同：1
> 
> 时间：2013-03-14T08:25:17.397
> 
> 标签：c++, linux, macos

我是 C++ 新手，我来自 JAVA。

c++中资源文件是如何管理的？

在 java 中，我们使用单独的源文件夹“resources”并使用相同的包名。

```
src
 com.example.test
   Example.java
resources
 com.example.test
   config.xml 
```

我们可以使用 Example.java 获取 config.xml`getClass().getResource("config.png"));`

怎样才能做到这一点或有什么方法可以实现这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:39:01.423

C++ 不支持资源。但是你可以使用一些框架来实现类似的功能。使用Qt，例如：[Qt资源系统](http://qt-project.org/doc/qt-4.8/resources.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:33:34.500

您可以使用单个资源文件将项目所需的所有资源存储在一起。[这](http://content.gpwiki.org/index.php/C%3aCustom_Resource_Files)是一个很好的模板，您可以按原样使用，也可以根据需要进行更改。我个人在我自己最近的一个项目中使用了它的修改版本。对于 C++，您可以更新库调用以使用 C++ STL，或者只使用 C 库。[这里](http://www.sfml-dev.org/wiki/en/tutorials/formatdat)还有另一个模板。

# php - 正则表达式 - 获取元素的所有属性

> ID：15404312
> 
> 赞同：1
> 
> 时间：2013-03-14T08:25:50.103
> 
> 标签：php, regex, pcre

我有一个包含一些 html 实体的字符串

```
<listing name="name goes there" phone="321321" >Text description</listing>
<anytag name="another name" phone="any phone" attr1="value 1" attr2="value 2">any can be written&nbsp; where &copy;MyRight</anytag>
<anytag name="another name line 2" phone="65851566" attr1="value &euml;" attr2="value 2">any can be written&nbsp; where &reg;MyRight&euml;ous</anytag> 
```

我想在 PHP 的单个正则表达式中获取这些元素的所有属性，

如果我尝试`HtmlDom`它会给我错误，`undefined tags`如果我使用`SimpleXml`它拒绝解析 html 实体。

所以我想尝试 RegExp 但找不到解决方案。

RegExp 以外的解决方案也受到欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T08:37:32.897

您可以使用以下基于 DOM 解析器的代码来列出给定标签名称的所有属性：

```
$str = <<<EOF
<listing name="name goes there" phone="321321" phone="any phone" attr1="value 1" attr2="value 2">Text description</listing>
<anytag name="another name" phone="any phone" attr1="value 1" attr2="value 2">any can be written&nbsp; where &copy;MyRight</anytag>
<anytag name="another name line 2" phone="65851566" attr1="value &euml;" attr2="value 2">any can be written&nbsp; where &reg;MyRight&euml;ous</anytag>
EOF;
$dom = new DOMDocument();
libxml_use_internal_errors(true);
$dom->loadHTML($str);

$nodeList = $dom->getElementsByTagName('anytag');
for($i=0; $i < $nodeList->length; $i++) {
    $node = $nodeList->item($i);
    if ($node->hasAttributes())
       echo $node->nodeName . " =>\n";
       foreach ($node->attributes as $attr) {
          $name = $attr->nodeName;
          $value = $attr->nodeValue;
          echo "Attribute '$name'='$value'\n";
       }
} 
```

### 现场演示：http: [//ideone.com/k8SLhr](http://ideone.com/k8SLhr)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T08:42:45.533

这个怎么样：

```
<?php
  $str = 'your string here';
  $lines = explode("\n", $str);

  foreach ($lines as $line){
      preg_match_all("@\s+(?<attr_name>)\w+\=\"(?<attr_value>[^\"]+)\"@msi", $line, $results);

      echo "<pre>";
      print_r($results);
      echo "</pre>";
  }

?> 
```

# ms-access - 同一事件上的宏和 VBA

> ID：15404313
> 
> 赞同：1
> 
> 时间：2013-03-14T08:25:52.973
> 
> 标签：ms-access

我使用组合框向导允许组合框确定表单上显示的记录。

该向导似乎在组合框的 AfterUpdate 事件上构建了一个宏，以允许这种情况发生。我也希望能够在 AfterUpdate 事件中添加一些 VBA，但从外观上看，Access 一次只能让您从 Expression/Macro/Code 中选择 1 个选项。

有什么方法可以保持向导创建的组合框的效果，并且还可以自由地将更多 vba 代码添加到 AfterUpdate 事件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:25:37.967

我不能说这件事的简单方法。我对新的嵌入式宏“功能”并不生气。

可以打开宏，ctrl+A全选，ctrl+C复制到剪贴板然后关闭。使用功能区，选择创建宏并按 ctrl+V 粘贴嵌入的宏。您现在可以将其另存为 VBA，从功能区将宏转换为 Visual Basic。你会得到：

```
DoCmd.SearchForRecord , "", acFirst, "[ID] = " & Str(Nz(Screen.ActiveControl, 0)) 
```

还有一些错误编码。然后是我更喜欢的方式，在这些行中，通过选择 [Event Procedure] 并键入来创建。当然，您应该添加错误编码。

```
If Not IsNull(Me.TheComboName) Then
    ''Force a save
    If Me.Dirty Then
       Me.Dirty = False
    End If

    ''This will go to first record if not found.
    ''You will need quotes for a text data type
    Me.Recordset.FindFirst "ID=" & Me.TheComboName 
Else
   ''This probably should not happen, so you may have 
   ''problems, it's up to you
End If 
```

您可能想在[这里阅读已故 D Fenton 的回答](https://stackoverflow.com/questions/3401645/how-do-i-bring-up-a-record-based-on-a-combobox-in-access)

完成上述操作后，您现在有了一个查找记录的事件过程，您可以添加任何需要的额外代码。

# android - 在gridview中如何使用拖放事件交换图像

> ID：15404314
> 
> 赞同：0
> 
> 时间：2013-03-14T08:25:55.737
> 
> 标签：android

我是android新手，现在想实现拖放。我有gridview持有图像，需要通过拖放操作交换图像。不知何故能够拖动图像，现在拖动对象怎么能放置在其他图像（对象）位置，并且被替换的第二个图像代替拖动图像。

如果代码需要，请告诉我。

任何回复都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:31:34.927

一步一步开始，比如先实现拖放，然后实现交换功能。对于拖放，请查看 Android 的开发者网站：http: [//developer.android.com/guide/topics/ui/drag-drop.html](http://developer.android.com/guide/topics/ui/drag-drop.html)

然后，当您进行该工作时，您可以考虑交换的逻辑。例如

*   开始拖动记住当前位置，或者ImageView。
*   释放放置动作时，查看触摸位置下方的 ImageView 是什么。
*   附加图像拖放到 ImageView 并将图像交换附加到拖动 imageview

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:30:29.157

这将对您有所帮助： [http ://www.androidviews.net/2012/12/pageddragdropgrid/](http://www.androidviews.net/2012/12/pageddragdropgrid/)

Git 在这里：[https ://github.com/mrKlar/PagedDragDropGrid](https://github.com/mrKlar/PagedDragDropGrid)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T08:30:58.487

您可以通过谷歌搜索“android gridview drap drop”找到许多解决方案。这里有一些例子：

*   [http://blahti.wordpress.com/2011/10/03/drag-drop-for-android-gridview/](http://blahti.wordpress.com/2011/10/03/drag-drop-for-android-gridview/)
*   [PagedDragDropGrid](https://github.com/mrKlar/PagedDragDropGrid)

# apache-flex - Flex - 如何使用 MVC / MVP 模式进行项目

> ID：15404320
> 
> 赞同：0
> 
> 时间：2013-03-14T08:26:09.830
> 
> 标签：apache-flex, model-view-controller, mvp

我想知道使用 MVC / MVP 模式构建 FLEX 应用程序的最佳实践是什么。我在谷歌上找不到任何好的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:32:20.823

选择框架取决于您的要求。要了解差异，请参阅[文章](http://joel.inpointform.net/software-development/mvvm-vs-mvp-vs-mvc-the-differences-explained/)

我正在使用遵循 MVC 模式的 Robotlegs-Framework，用于富 Internet 应用程序的轻量级微架构。

# actionscript-3 - 如何在 actionscript 中将项目添加到 ArrayList

> ID：15404321
> 
> 赞同：0
> 
> 时间：2013-03-14T08:26:10.607
> 
> 标签：actionscript-3, arraylist

我有一些数组：

```
var dataProvider:IList = new ArrayList();
var labelArr:Array = [IT, Business, Doctor, Teacher, Engineer, IT, Business, Doctor, Teacher, Engineer];
var valueArr:Array = [50,46,64,85,98,37,58,48,14,28]; 
```

dataArr.addItem() 如何从两个数组到具有类似以下结果数据的 arrayList：

```
dataProvider = ([
           {data:[
               {label:'IT', value: 50},
               {label:'Business', value: 46},
               {label:'Doctor', value: 64},
               {label:'Teacher', value: 85},
               {label:'Engineer', value: 98} ]},
           {data:[
               {label:'IT', value: 37},
               {label:'Business', value: 58},
               {label:'Doctor', value: 48},
               {label:'Teacher', value: 14},
               {label:'Engineer', value: 28} ]}
           ]); 
```

我想要上面的结果来获取数据数组进行绘制

# javascript - jQuery，如何创建复制按钮？

> ID：15404322
> 
> 赞同：0
> 
> 时间：2013-03-14T08:26:11.570
> 
> 标签：javascript, jquery, html

我正在研究这个结构：

```
<script type="text/javascript" src="js/jquery.js"></script> 
<script type="text/javascript" src="js/jquery.zclip.js"></script> 
<script language="JavaScript">
    var clip = new ZeroClipboard.Client();
    var myTextToCopy = "Hi, this is the text to copy!";
    clip.setText(myTextToCopy);
    clip.glue('d_clip_button');
</script>
<div id="d_clip_button" style="border:1px solid black; padding:20px;">Copy To Clipboard</div> 
```

但它不起作用，需要你的帮助来解决这个问题。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:27:21.483

将您的 jquery 代码包含在`document.ready()`处理程序中。

```
$(document).ready(function() {
                var clip = new ZeroClipboard.Client();
                var myTextToCopy = "Hi, this is the text to copy!";
                clip.setText( myTextToCopy );
                clip.glue( 'd_clip_button' );
}); 
```

以便等待 DOM 被加载，以便在`#d_clip_button`从 jquery 访问它时出现您的元素。

# resize - 弄乱 Jcrop 大小

> ID：15404323
> 
> 赞同：0
> 
> 时间：2013-03-14T08:26:20.747
> 
> 标签：resize, photo, crop, jcrop

我在我正在构建的项目中使用 Jcrop。该网站允许用户上传个人资料照片并以适合我显示照片的位置的纵横比进行裁剪，fx。论坛帖子，标签墙帖子等。

但是，由于 Jcrop 将裁剪坐标作为 POST 变量发送，我认为在选择照片的一部分后，可以使用 Tamper Data 之类的东西来修改裁剪大小，以修改发送到服务器的请求。想。

您将如何处理并确保照片正确显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:00:34.527

好的，我现在解决了这个问题。现在我只是检查 Jcrop 发送的高度和宽度是否符合我想要的纵横比！

如果其他人需要这个：

```
function GCD($a, $b) {
    while ($b != 0) {
        $remainder = $a % $b;
        $a = $b;
        $b = $remainder;
    }
    $a = abs($a);
    return $a;
}

$a = $_POST['w']; // width
$b = $_POST['h']; // height
$gcd = GCD($a, $b);
$a = $a / $gcd;
$b = $b / $gcd;
$ratio = $a . ":" . $b; 
```

# sql-server - Codeigniter / linux / mssql 2005 - 没有本地字符（区分符号）

> ID：15404326
> 
> 赞同：1
> 
> 时间：2013-03-14T08:26:27.297
> 
> 标签：sql-server, codeigniter, activerecord, character-encoding, collation

我在 linux 上设置与 mssql 2005 数据库的 codeigniter 连接时遇到问题。我设法建立了连接，但 Codeigniter 函数返回/解析的数据缺少所有变音符号，如 [ąężźćäöüß]。在萤火虫中，它们被矩形内的问号替换，在记事本中被黑色菱形替换。例子：

```
 [2] => Array
        (
            [id] => *
            [zid] => *
            [keyid] => AEDF
            [status] => A
            [txt] => 20.000, je�eli > 50 lat + 15 lat sta�u
        ) 
```

我玩了很多配置。

```
$db['loga']['hostname'] = '10.0.0.90:4113';
$db['loga']['username'] = 'user';
$db['loga']['password'] = 'password';
$db['loga']['database'] = 'TESTDB';
$db['loga']['dbdriver'] = 'mssql';
$db['loga']['dbprefix'] = '';
$db['loga']['pconnect'] = FALSE;
$db['loga']['db_debug'] = TRUE;
$db['loga']['cache_on'] = FALSE;
$db['loga']['cachedir'] = '';
$db['loga']['char_set'] = 'utf-8';
$db['loga']['dbcollat'] = 'Polish_CI_AS';
$db['loga']['swap_pre'] = '';
$db['loga']['autoinit'] = TRUE;
$db['loga']['stricton'] = FALSE;

/* End of file database.php */ 
```

数据库排序规则设置为 Polish_CI_AS - 并且无法更改 (cp1250)。我已经很困惑如何解释 CI 数据库配置文件中的所有参数。我假设 $db['loga']['dbcollat​​'] 代表数据库排序规则，其中 char_set 是......我不知道了:)

最后，我希望数据采用 UTF-8 格式（因此它们可以正确显示在浏览器中）。

我也做了功课并尝试使用：@ini_set('mssql.charset', 'utf-8');

这对我不起作用 - 对结果没有明显影响。我还试图弄乱 freeTDS 配置文件（设置 'client charset = UTF-8' ） - 仍然没有结果。

值得一提的是，我只知道 linux 操作系统的基础知识，所以我可能错过了一些东西。我在 php.ini 文件中发现 mssql.charset 参数仅在使用 freeTDS 编译 php 时才能按预期工作。我只能假设是这样。

无论如何，在 Windows Server 上运行脚本（并使用 sqlsrv 驱动程序）时，我对脚本没有任何问题。

有什么建议可以在哪里找到解决方案？什么我不理解或理解不正确？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-25T09:32:02.427

在 Ubuntu 上的 /etc/freetds/freetds.conf 中，我添加了这两行并重新加载 Apache。

```
[global]
tds version = 8.0
client charset = UTF-8 
```

这个对我有用。

# html - 更改输入文本边框颜色而不更改其高度

> ID：15404330
> 
> 赞同：14
> 
> 时间：2013-03-14T08:26:33.077
> 
> 标签：html, css, border

假设我有一个没有任何 CSS 的默认文本输入

```
<input type="text" /> 
```

我想将其边框颜色更改为红色，所以我添加了一个样式

```
<input type="text" style="border-color:red" /> 
```

之后边框为红色，但其大小为 2px。如果我将边框更改为 1px，则输入的高度将小于默认值。

如何将我的边框更改为 1px 并确保输入的真实高度（包括边框）与默认高度相同？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-14T08:54:26.473

使用这个，它不会影响高度：

```
<input type="text" style="border:1px solid #ff0000" /> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-14T08:35:52.837

尝试这个

```
<input type="text"/> 
```

它将在所有跨浏览器（如 mozilla、chrome 和 Internet Explorer）中显示相同。

```
<style>
    input{
       border:2px solid #FF0000;
    }
</style> 
```

**不要添加样式内联，因为它不是很好的做法，使用类为您的输入框添加样式。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T08:55:17.197

设置透明边框，然后更改它：

```
.default{
border: 2px solid transparent;
}

.new{
border: 2px solid red;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-02T13:41:41.970

这个css解决方案对我有用：

```
input:active,
input:focus {
    border: 1px solid #red
}

input:active,
input:focus {
    padding: 2px solid #red /*for firefox and chrome*/
}

/* .ie is a class you would need to set at the html root level */
.ie input:active,
.ie input:focus {
    padding: 3px solid #red /* IE needs 1px extra padding*/
} 
```

我知道在 FF 和 Chrome 上没有必要，但 IE 需要它。在某些情况下您需要它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-24T09:25:08.333

这是你想要的。

```
$("input.address_field").on('click', function(){  
     $(this).css('border', '2px solid red');
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-10T17:01:38.383

这在类似的情况下对我有用：

```
input:focus { 
   outline-offset: -2px; // negative value to 'squeeze' it inside 
   outline-color: orangered; // new desired color 
```

}

# java - 为 jdk7 分析 java 应用程序的方法

> ID：15404337
> 
> 赞同：0
> 
> 时间：2013-03-14T08:26:58.070
> 
> 标签：java, profiling, java-7, javaagents

我一直在用 javaagent 分析我的 java 应用程序。但我发现 JDK 7 加强了对堆栈映射帧执行的检查，当字节码被不知道这些更改的工具修改时，这可能导致 VerifyError 异常。我们可以使用 -XX:-UseSplitVerifier" 开关将验证器更改回 JDK 6 版本。但我发现没有 javaagent 的 java 应用程序的执行时间比 javaagent 运行的同一个 java 应用程序的执行时间要短。有没有其他方法可以profile? JVMTI 提供了更好的选择，但我不太擅长使用本机（c，c++）语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:52:07.613

您可以尝试包含在 oracle jdk 中的 jvisualvm

（如果您使用的是JDK 6 版本，请更新7 或更高版本）

> 但我发现没有 javaagent 的 java 应用程序的执行时间比 javaagent 运行的同一个 java 应用程序的执行时间要短

任何分析器都会有一些开销（如果它正在做某事，它必须使用 cpu 和一些内存本身）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T08:37:37.847

[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)适用于 Java 7。

# angularjs - 如何在包含 ng 的部分访问父范围中定义的元素

> ID：15404338
> 
> 赞同：0
> 
> 时间：2013-03-14T08:26:58.420
> 
> 标签：angularjs

我正在尝试对我的应用程序中的几个视图使用通用的部分模板。但是由于某种原因，部分不会加载父范围中定义的元素（很可能是因为 ng-include 创建了一个新的子范围）。如何访问在父范围下定义的元素。

## 例子：

### *主要.html*：

```
<div id="application" ng-app="myapp">
    <div id="content">
        <!-- Main Application View for Auto Updating -->
        <div ng-view></div>
    </div>
</div> 
```

### *一些观点*：

```
<!-- some html -->
<div ng-include="'/partials/common_partial.html'"></div> 
```

### *常见的 partial.html*：

```
{{ item.name }}
{{ item.code }}
{{ item.expiry }} 
```

现在我想将 common_partials.html 添加到不同的视图/控制器中，在控制器范围内我设置元素项。说，在上面视图的控制器中我做`$scope.item = {'name': 'Test', 'code': 'DS3F432DI', 'expiry': '30 Days'}`

现在，如果我直接`{{item.name}}`在视图中调用它会呈现名称但不在使用`ng-include`我如何`{{item.foo}}`在 common_template.html 中访问的部分添加？

# silverlight - 将 Silverlight RootVisual 与 Enterprise Library 5 一起使用时出错

> ID：15404341
> 
> 赞同：2
> 
> 时间：2013-03-14T08:27:07.387
> 
> 标签：silverlight, unity-container, enterprise-library, enterprise-library-5, service-locator

我最初发布： [https ://stackoverflow.com/questions/15351024/intermittent-errors-with-enterprise-library-using-silverlight-calling-rootvisual](https://stackoverflow.com/questions/15351024/intermittent-errors-with-enterprise-library-using-silverlight-calling-rootvisual)

它的标题是 Activation issue like this question [Activation error occurred while trying to get instance of type LogWriter](https://stackoverflow.com/questions/2900403/activation-error-occured-while-trying-to-get-instance-of-type-logwriter)

然而，我的工作在 90% 的时间里都能正常工作。这是在进行某些类型的 ajax 调用时。就像某些东西被缓存而不被清除一样。

违规行是

```
this.RootVisual = EnterpriseLibraryContainer.Current.GetInstance<MainPage>(); 
```

我确实切换到使用 Unity 容器，但我最终得到了一个关于容器而不是激活的不同错误。似乎应该有一种方法可以清除发生的任何 DOM 或缓存​​，以便仅针对 silverlight 甚至在 WPF 中都没有的“this.RootVisual”可以准备使用 Current 的服务定位器或容器.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:57:03.640

您正在正确执行此部分：

```
this.RootVisual = EnterpriseLibraryContainer.Current.GetInstance<MainPage>(); 
```

它必须是你调用它的方式。如果没有您的代码库并与您的团队一起处理您的项目，这很难说。我在 Silverlight 中使用此代码时没有任何问题（RootVisual 仅在 Silverlight 中，甚至在 WPF 中也不存在）。

可悲的是，根据我对这个问题的研究，即使您改用 Unity Container，最终也会遇到与使用“Current”相同的容器实例化问题。

如果你不喜欢它，你真的将不得不深入挖掘并使用 Fiddler 等并导航 DOM 等。然后弄清楚。那或停止使用 Silverlight 等...

该代码非常常用，没有来自“大多数人”的问题 这是一个示例 [http://entlib.codeplex.com/discussions/285472](http://entlib.codeplex.com/discussions/285472)

希望这会有所帮助，我希望我能解决你的问题。

# web-services - 当通过 web 服务传递空值时，为什么标记为“业务必需”的字段不会引发错误？

> ID：15404343
> 
> 赞同：0
> 
> 时间：2013-03-14T08:27:19.760
> 
> 标签：web-services, dynamics-crm-2011, required-field

在 MS Dynamics CRM 2011 中，当实体上的字段标记为“业务必需”时，我可以通过 Web 服务 SDK 创建实体，而无需提供值。我已经读到这是众所周知的（并且出于某种原因可以接受），但我在任何 MS 文档中都看不到它。显然，业务必填字段也将接受空值，以便通过插件、数据导入和工作流进行访问。

*   这背后的原因是什么？对 MS 文档的任何参考将不胜感激。

*   如果您对第一个问题的回答是允许灵活性，那么为什么在“业务要求”约束不适用的情况下还要遵守其他约束，例如“单行文本”的字段长度约束？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T08:57:07.197

'requried' 字段是一个仅适用于客户端的概念（例如，在表单上）。当您通过 SDK（或插件或工作流）创建实体时，不会调用客户端脚本，因此不会检查字段的所需状态。

因此，它不像不可能那样灵活。

其他约束，例如字段长度，作为在数据库级别强制执行的概念。因此，这些将通过 SDK、插件等调用。

如果您想强制执行必填字段，这相当简单 - 添加一个预创建插件。检查所需值中的值。如果没有找到，抛出异常。

# google-apps-script - 根据导入的单元格值隐藏行

> ID：15404345
> 
> 赞同：0
> 
> 时间：2013-03-14T08:27:23.210
> 
> 标签：google-apps-script, google-sheets

我试图隐藏 L 列（第 12 列）中包含“no”的所有行。每次打开我的文档时，我都会尝试让这个脚本工作。代码是：

```
function onOpen(e){
  var sheet = e.source.getActiveSheet();
  var r = sheet.getActiveRange();
  if (r.getColumnIndex() == 12 && r.getValue() == "no") {
    sheet.hideRows(r.getRowIndex(),1);
}
} 
```

不幸的是，脚本不起作用。有人可以解释一下这个问题吗？

**重要的提示！L 列中的所有值都是通过 ImportRange 函数从另一个工作表导入的。请问是不是有问题...**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T01:52:51.950

当您第一次打开工作表时，传递给您的 onOpen 触发器的事件没有有用的活动范围。该值`r.getColumnIndex()`将始终为 1，因为活动范围为 A1。（它会报告用户在哪个单元格，他们还没有机会移动。）

这是一种可以修改函数以执行所需操作的方法。请注意，它仅适用于多表电子表格中的第一张表。

```
function onOpen(e){
  var sheet = e.source.getActiveSheet();
  var values = sheet.getDataValues();
  // Check all rows except the first header row.
  for (var row = values.length-1; row > 0; row--) {
    // Check if the twelfth column contains "no"
    // Since arrays start at 0 but spreadsheet rows & columns
    // start at 1, we need to adjust by 1.
    if (values[row].length >= (12-1) && values[row][12-1] == "no") {
      // The data in column 12 of this row contains "no", so hide it.
      sheet.hideRows(row+1,1);
    }
  }
} 
```

# python - 在 Python 中将字符串转换为字典或列表？

> ID：15404352
> 
> 赞同：0
> 
> 时间：2013-03-14T08:27:39.717
> 
> 标签：python, list, dictionary

将此字符串转换为python中的列表或字典？

```
['[', '{', 'u', "'", 'f', 'i', 'r', 's', 't', '_', 'n', 'a', 'm', 'e', "'", ':', ' ', 'u', "'", 'j', 'o', 'h', 'n', "'", ',', ' ', 'u', "'", 'l', 'a', 's', 't', '_', 'n', 'a', 'm', 'e', "'", ':', ' ', 'u', "'", 's', 'm', 'i', 't', 'h', "'", ',', ' ', 'u', "'", 'a', 'g', 'e', "'", ':', ' ', '2', '0', ',', ' ', 'u', "'", 'm', 'o', 'b', 'n', 'u', 'm', "'", ':', ' ', 'u', "'", '1', '2', '3', '4', '1', '9', '0', '8', "'", ',', ' ', 'u', "'", '_', 'i', 'd', "'", ':', ' ', '1', ',', ' ', 'u', "'", 'e', 'm', 'a', 'i', 'l', "'", ':', ' ', 'u', "'", 's', 'm', 'i', 't', 'h', '@', 'g', 'm', 'a', 'i', 'l', '.', 'c', 'o', 'm', "'", '}', ']'] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T08:33:15.693

```
>>> a = ['[', '{', 'u', "'", 'f', 'i', 'r', 's', 't', '_', 'n', 'a', 'm', 'e', "'", ':', ' ', 'u', "'", 'j', 'o', 'h', 'n', "'", ',', ' ', 'u', "'", 'l', 'a', 's', 't', '_', 'n', 'a', 'm', 'e', "'", ':', ' ', 'u', "'", 's', 'm', 'i', 't', 'h', "'", ',', ' ', 'u', "'", 'a', 'g', 'e', "'", ':', ' ', '2', '0', ',', ' ', 'u', "'", 'm', 'o', 'b', 'n', 'u', 'm', "'", ':', ' ', 'u', "'", '1', '2', '3', '4', '1', '9', '0', '8', "'", ',', ' ', 'u', "'", '_', 'i', 'd', "'", ':', ' ', '1', ',', ' ', 'u', "'", 'e', 'm', 'a', 'i', 'l', "'", ':', ' ', 'u', "'", 's', 'm', 'i', 't', 'h', '@', 'g', 'm', 'a', 'i', 'l', '.', 'c', 'o', 'm', "'", '}', ']']

>>> ''.join(a)
     "[{u'first_name': u'john', u'last_name': u'smith', u'age': 20, u'mobnum': u'12341908', u'_id': 1, u'email': u'smith@gmail.com'}]"

>>> import ast
>>> ast.literal_eval(''.join(a))
 [{u'_id': 1,
  u'age': 20,
  u'email': u'smith@gmail.com',
  u'first_name': u'john',
  u'last_name': u'smith',
  u'mobnum': u'12341908'}] 
```

你是怎么做到的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:05:26.627

它本身就是一个列表，您说要将其转换为列表！通过将给定的代码分配为*a来**尝试打印 type(a* ) 然后你会得到

 *```
<type 'list'> 
```

作为输出！*

# java - 在 Websphere Application Server 上运行基于 Filenet 的 Web 应用程序时出现凭据异常

> ID：15404357
> 
> 赞同：3
> 
> 时间：2013-03-14T08:27:59.297
> 
> 标签：java, websphere, jaas, filenet-p8, filenet

我开发了一个 REST 服务，可以从内容引擎存储中检索数据。为简单起见，我创建了具有只读权限的用户帐户并将其用于 CE 授权，使用以下代码：

```
UserContext context = UserContext.get();
Connection connection = Factory.Connection.getConnection("connection.url");
Subject subject = UserContext.createSubject(connection, "connection.username", "connection.password", "connection.stanza");
context.pushSubject(subject); 
```

在开发过程中，我在本地 Tomcat 服务器上测试了我的服务，一切正常。现在我已经在 ContentEngine 所在的 Websphere Application Server 上部署了该服务，当我尝试访问我的 REST 服务时，出现以下异常：

> 错误 500：org.springframework.web.util.NestedServletException：请求处理失败；嵌套异常是 com.filenet.api.exception.EngineRuntimeException: FNRCS0005E: SECURITY_INVALID_CREDENTIALS: 不允许访问内容引擎，因为内容引擎 API 库或 Web 服务接口 (WSI) 侦听器找不到所需的安全上下文信息。在安全上下文中找不到预期的凭据。

WAS 是否需要任何额外的配置才能使这种方法起作用？或者也许存在解决授权问题的更好方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T08:48:30.300

我已经设法通过使用不同的节来解决这个问题。我使用的那个（*FileNetP8*，默认值）出于某种原因与 Tomcat 完美配合，但在 Websphere Application Server 上出现了问题。在 WAS 安全登录配置中，我找到了解决问题的*FileNetP8WSI*节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:33:03.033

我使用几乎完全相同的代码通过 WebSphere 成功连接到 CE，但我使用了一个空节

```
Subject subject = UserContext.createSubject(connection, username, password, null); 
```

这对你有影响吗？

# java - 多匹配中的正则表达式

> ID：15404359
> 
> 赞同：0
> 
> 时间：2013-03-14T08:28:09.043
> 
> 标签：java, regex

你们中的任何人都可以帮帮我吗？我有一个字符串下载到“**结果**”，如下所示：

```
DrawDate,Ball 1,Ball 2,Ball 3,Ball 4,Ball 5,Ball 6,Bonus Ball,Ball Set,Machine27-Feb-2013,2,24,14,23,20,30,22,6,MERLIN23-Feb-2013,31,25,32,2,30,16,36,5,MERLIN20-Feb-2013,36,45,3,6,44,48,47,8,MERLIN16-Feb-2013,7,27,48,46,39,20,49,6,ARTHUR13-Feb-2013,6,49,23,29,14,20,48,8,MERLIN09-Feb-2013,10,8,34,40,27,41,48,7,MERLIN06-Feb-2013,9,18,10,16,27,42,43,6,ARTHUR02-Feb-2013,2,13,14,21,12,30,39,7,ARTHUR30-Jan-2013,10,9,43,48,47,24,5,5,ARTHUR26-Jan-2013,2,6,21,29,47,34,11,5,ARTHUR
23-Jan-2013,10,6,32,24,41,14,29,8,MERLIN19-Jan-2013,35,5,9,13,39,16,11,7,ARTHUR16-Jan-2013,13,38,47,12,35,5,45,3,MERLIN12-Jan-2013,3,11,27,24,12,7,13,8,ARTHUR09-Jan-2013,48,39,24,21,5,25,32,6,MERLIN05-Jan-2013,15,37,10,21,17,47,2,5,ARTHUR02-Jan-2013,37,20,30,21,7,9,42,7,MERLIN29-Dec-2012,40,31,6,37,8,48,36,5,GUINEVERE26-Dec-2012,3,11,49,39,47,17,34,6,LANCELOT22-Dec-2012,34,28,4,44,43,14,13,4,LANCELOT 
```

然后使用下面的**正则表达式**：

```
Pattern p = Pattern.compile("(Machine|GUINEVERE|LANCELOT|ARTHUR|MERLIN)(.*?)(GUINEVERE|LANCELOT|ARTHUR|MERLIN)"); 

Matcher m = p.matcher(result);

while (m.find())
{
matchesList.add(m.group()); 
} 
```

这就是我的**列表视图**的结果：

```
1, Machine27-Feb-2013,2,24,14,23,20,30,22,6,LANCELOT

2, MERLIN20-Feb-2013,36,45,3,6,44,48,47,8,GUINEVER

3, ARTHUR13-Feb-2013,6,49,23,29,14,20,48,8,MERLIN 
```

但是**正则表达式错过了每一行**：

```
1, Machine27-Feb-2013,2,24,14,23,20,30,22,6,LANCELOT

2, 23-Feb-2013,31,25,32,2,30,16,36,5,

3, MERLIN20-Feb-2013,36,45,3,6,44,48,47,8,GUINEVER

4, 16-Feb-2013,7,27,48,46,39,20,49,6,

5, ARTHUR13-Feb-2013,6,49,23,29,14,20,48,8,MERLIN

6, 09-Feb-2013,10,8,34,40,27,41,48,7, 
```

这就是我所追求的：

```
1, 27-Feb-2013,2,24,14,23,20,30,22,6

2, 23-Feb-2013,31,25,32,2,30,16,36,5

3, 20-Feb-2013,36,45,3,6,44,48,47,8

4, 16-Feb-2013,7,27,48,46,39,20,49,6

5, 13-Feb-2013,6,49,23,29,14,20,48,8

6, 09-Feb-2013,10,8,34,40,27,41,48,7 
```

这适用于**C#** `"(?s)(?<=Machine|GUINEVERE|LANCELOT|ARTHUR|MERLIN).*?(GUINEVERE|LANCELOT|ARTHUR|MERLIN)"` 但**不适**用于**Java**，

从网上试了很多方法都无济于事。试过**^**和**$**但不明白如何工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:46:16.097

正则表达式的“(machine|GUINEVERE|...)”部分是捕获组。这意味着 (1) 它们包含在结果中，并且 (2) 下一场比赛*在*它们之后开始。

在 c# 版本中，您对第一个机器块 ("(?<=...)") 使用“零宽度正向后视”分组，这很有帮助。现在您只需对尾随组使用零宽度正向前瞻。这会将正则表达式更改为：

```
(?<=Machine|GUINEVERE|LANCELOT|ARTHUR|MERLIN)(.*?)(?=GUINEVERE|LANCELOT|ARTHUR|MERLIN) 
```

这*几乎*可以满足您的需求。它仍然在输出中产生尾随逗号和前导空格。因此，将正则表达式更改为：

```
(?<=Machine|GUINEVERE|LANCELOT|ARTHUR|MERLIN)\\s*(.*?),?(?=GUINEVERE|LANCELOT|ARTHUR|MERLIN) 
```

并访问“m.group(1)”而不是“m.group()”。这样你只能得到与“（。*？）”匹配的部分。

这个特定示例的替代方法是

```
String[] parts = result.split("[\\s,]*(Machine|GUINEVERE|LANCELOT|ARTHUR|MERLIN)[\\s,]*"); 
```

并丢弃第一个结果（“DrawDate，...”）。

# ruby-on-rails - 使用 send_data 在 Rails 中显示所有格式文件

> ID：15404364
> 
> 赞同：1
> 
> 时间：2013-03-14T08:28:20.923
> 
> 标签：ruby-on-rails, file-format

我有一个应用程序必须显示不同格式的文件。格式列表可能有限，但它们由不同的格式组成。它们可以是 .pdf、.docx、.odt、.png 等。

在我的控制器中，显示操作如下所示。“内容”是从包含不同格式文件的给定网站呈现的。

```
 def show 
     send_data(content, :disposition => 'inline', :type => format_finder(params[:format]))
    end

    def format_finder(format)
        formats={"pdf" => "application/pdf",
       "docx" => "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
       "png" => "image/png",
       "html" => "text/html",
       "odt" => "application/vnd.oasis.opendocument.text",
       "ods" => "application/vnd.oasis.opendocument.spreadsheet",
       "jpg" => 'image/jpeg'}
     if formats.has_key?(format)
       return formats[format]
     end
   end 
```

问题是浏览器（chrome）正在下载文件而不是显示它们，PDF除外。我该如何解决这个问题？Firefox 正在下载所有文件，即使它是 PDF 文件。

# javascript - 从asp.net调用html页面中的javascript函数

> ID：15404371
> 
> 赞同：-1
> 
> 时间：2013-03-14T08:28:45.420
> 
> 标签：javascript, asp.net, html

在我的 asp.net 项目中，我添加了一个 html 文件。我正在使用“iframes”显示该 html 文件。该 html 文件显示谷歌地图并包含 javascript 函数。我的问题是，我怎样才能从后面的代码中调用那些 javascript 函数？？？提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:31:44.507

您需要先获取 iFrame 的 DOM 元素：

```
var myframe = document.getElementById('iframeid'); 
```

然后你访问它的窗口元素，并调用一个函数：

```
myframe.contentWindow.myFunc(); 
```

那应该行得通。

# c# - 将公式映射到 IEnumerable bycode

> ID：15404376
> 
> 赞同：2
> 
> 时间：2013-03-14T08:29:07.390
> 
> 标签：c#, nhibernate, nhibernate-mapping

我正在尝试使用公式来映射 ICollection 类型的属性，但是，无论我使用哪种方法来确定映射 nHibernate 中的类型都会引发错误。

`No parameterless constructor defined for this object.`

这是映射文件

```
this.Property(
  x => x.AllChildIds,
  m =>
    {
      m.Type<NHibernate.Type.ListType>();
      m.Access(Accessor.Field);
      m.Formula(@"(WITH [Child] ([Id], [ParentId])
           AS (SELECT [hs0].[Id],
                      [hs0].[ParentId]
               FROM   [Client].[dbo].[HierarchySet] [hs0] (NOLOCK)
               WHERE  [hs0].[ParentId] IN (SELECT [hs1].[Id]
                                     FROM   [Client].[dbo].[HierarchySet] [hs1] (NOLOCK)
                                     WHERE  [hs1].[Id] = Id /* @p0 */)
               UNION ALL

               SELECT [Children].[Id],
                      [Children].[ParentId]
               FROM   [Client].[dbo].[HierarchySet](NOLOCK) AS [Children]
                      JOIN [Child]
                        ON [Children].[ParentId] = [Child].[Id])

      SELECT [Child].[Id]
      FROM   [Child]
      )");
}); 
```

这是我的课

```
private readonly ICollection<long> allChildIds;
public virtual IEnumerable<long> AllChildIds { get { return this.allChildIds; } } 
```

如果我将映射文件中的类型更改为

`m.Type<NHibernate.Type.GenericListType<NHibernate.Type.Int64Type>>();`

然后我得到一个`Could not determine type for: System.Collections.Generic.IEnumerable`错误

我知道 SQL 很复杂，但肯定不会影响它？

**编辑**我的 NHibernate 会话配置

```
private static Configuration ConfigureNHibernate()
{
  var configration = new Configuration();

  configration.SessionFactoryName("SessionFactoryName");
  configration.DataBaseIntegration(db =>
                                     {
                                       db.Dialect<MsSql2005Dialect>();
                                       db.Driver<SqlClientDriver>();

                                       db.IsolationLevel = IsolationLevel.ReadUncommitted;
                                       db.ConnectionStringName = "database";
                                       db.BatchSize = 20;
                                       db.KeywordsAutoImport = Hbm2DDLKeyWords.AutoQuote;
                                     });

  if (ConfigurationManager.AppSettings["nhibernate-cache"] != null)
  {
    configration.Cache(
                       x =>
                         {
                           x.DefaultExpiration = 300;
                           x.UseMinimalPuts = true;
                           x.RegionsPrefix = "client-";
                           x.Provider<SysCacheProvider>();
                           x.UseQueryCache = true;
                         });
  }

  var mapper = new ModelMapper();
  mapper.AddMappings(typeof(MessageInMap).Assembly.GetTypes());
  var domainMapping = mapper.CompileMappingForAllExplicitlyAddedEntities();

  configration.AddMapping(domainMapping);

    configration.AddAuxiliaryDatabaseObject(new SimpleAuxiliaryDatabaseObject(@"
                            CREATE VIEW [Children]
                            AS 
                            WITH [Child] ([Id], [ParentId])
                            AS (
                                    SELECT 
                                            [hs0].[Id],
                                            [hs0].[ParentId]
                                    FROM   
                                            [isnapshot.Client].[dbo].[HierarchySet] (NOLOCK) AS [hs0]

                                    UNION ALL

                                    SELECT 
                                            [Children_].[Id],
                                            [Children_].[ParentId]
                                    FROM   
                                            [isnapshot.Client].[dbo].[HierarchySet] (NOLOCK) AS [Children_]
                                    JOIN [Child] ON [Children_].[ParentId] = [Child].[Id]
                            )
                            GO", "DROP VIEW [Children]"));

  return configration;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T23:38:54.150

您需要将其映射为组件的集合（包、列表等），而不是属性。然后使用子选择来获取它。

我的第一个假设是将其映射如下

```
c.Set(m => m.ChildrenIds,
    x =>
        {
            x.Access(Accessor.Field);
            x.Key(k => k.Column("ParentId"));
            x.Subselect(@"WITH [Child] ([Id], [ParentId])
AS 
(
    SELECT 
        [hs0].[Id],
        [hs0].[ParentId]
    FROM   
        [HierarchySet] (NOLOCK) AS [hs0]

    UNION ALL

    SELECT 
        [Children].[Id],
        [Children].[ParentId]
    FROM   
        [HierarchySet] (NOLOCK) AS [Children]
    JOIN 
        [Child] ON [Children].[ParentId] = [Child].[Id]
)

SELECT *
FROM [Child]");
        },
    x => x.Element(e => e.Column("Id"))); 
```

但是它不起作用，因为`WITH`子句不想在子选择中。生成的查询：

```
SELECT 
    childrenid0_.ParentId as ParentId0_, 
    childrenid0_.Id as Id0_ 
FROM ( WITH [Child] ([Id], [ParentId])
AS 
(
    SELECT 
        [hs0].[Id],
        [hs0].[ParentId]
    FROM   
        [HierarchySet] (NOLOCK) AS [hs0]

    UNION ALL

    SELECT 
        [Children].[Id],
        [Children].[ParentId]
    FROM   
        [HierarchySet] (NOLOCK) AS [Children]
    JOIN 
        [Child] ON [Children].[ParentId] = [Child].[Id]
)

SELECT *
FROM [Child] ) childrenid0_ 
WHERE childrenid0_.ParentId=@p0;@p0 = 2 [Type: Int32 (0)] 
```

所以在这种情况下唯一的解决方案 - 创建一个视图，并映射到它。

将数据库对象添加到配置中

```
configuration.AddAuxiliaryDatabaseObject(new SimpleAuxiliaryDatabaseObject(@"
    CREATE VIEW [Children]
    AS 
    WITH [Child] ([Id], [ParentId])
    AS (
        SELECT 
            [hs0].[Id],
            [hs0].[ParentId]
        FROM   
            [HierarchySet] (NOLOCK) AS [hs0]

        UNION ALL

        SELECT 
            [Children].[Id],
            [Children].[ParentId]
        FROM   
            [HierarchySet] (NOLOCK) AS [Children]
        JOIN [Child] ON [Children].[ParentId] = [Child].[Id]
    )

    SELECT *
    FROM [Child]", "DROP VIEW [Children]")); 
```

如果您使用 SchemaExport/SchemaUpdate 功能来创建/更新您的数据库模式 - NHibernate 将创建视图。**如果您不使用 SchemaExport/SchemaUpdate 功能，则需要手动创建视图。**

```
CREATE VIEW [Children]
AS 
    WITH [Child] ([Id], [ParentId])
    AS (
        SELECT 
            [hs0].[Id],
            [hs0].[ParentId]
        FROM   
            [HierarchySet] (NOLOCK) AS [hs0]

        UNION ALL

        SELECT 
            [Children].[Id],
            [Children].[ParentId]
        FROM   
            [HierarchySet] (NOLOCK) AS [Children]
        JOIN [Child] ON [Children].[ParentId] = [Child].[Id]
    )

    SELECT *
    FROM   [Child] 
```

映射：

```
c.Set(m => m.ChildrenIds,
    x =>
        {
            x.Access(Accessor.Field);
            x.Key(k => k.Column("ParentId"));
            x.Table("Children"); // or x.Subselect("select * from Children") 
        },
    x => x.Element(e => e.Column("Id"))); 
```

# database - 通过调用->选择两次来更改选择参数？

> ID：15404377
> 
> 赞同：0
> 
> 时间：2013-03-14T08:29:09.377
> 
> 标签：database, yii

我有一个疑问：

```
$query = 
  Yii::app()->db->createCommand()->setFetchMode(PDO::FETCH_OBJ)
    ->select('*')
    ->from('products p')
    ->limit(5); 
```

然后我得到了结果：

```
$result = $query->queryAll(); 
```

如何在不重写的情况下使用现有查询对象来重新实例化“select”和“limit”的值。我想将选择更改为“count(p.productid)”并取消设置限制。我尝试了以下方法，但它不起作用：

```
$query = 
  Yii::app()->db->createCommand()->setFetchMode(PDO::FETCH_OBJ)
    ->select('*')
    ->from('products p')
    ->limit(5);

$result = $query->queryAll();

$query = 
  $query
    ->select('count(p.productid)')
    ->limit(-1);
$result2 = $query->queryRow(); 
```

这仍然返回第一个选择的结果？

**编辑**

基本上，我想重置选择。看起来它建立在选择之上。所以，我认为你可以这样做：

```
$query = 
 $query->select('something')
    ->select('somethingElse')
    ->select('somethingMoreStuff'); 
```

我的问题是我想“重置”选择。所以基本上UNDO这些选择。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:52:34.143

你为什么不这样做：

```
$intialQuery = 
  Yii::app()->db->createCommand()->setFetchMode(PDO::FETCH_OBJ)
    ->from('products p');

$query = $intialQuery 
    ->select('*')
    ->limit(5);

$query2 = $intialQuery
    ->select('count(p.productid) as number')
    ->limit(-1);

$result = $query->queryAll();
$result2 = $query2->queryRow(); 
```

# spring - 使用@Transactional：即使抛出异常，事务也会被提交

> ID：15404378
> 
> 赞同：2
> 
> 时间：2013-03-14T08:29:10.500
> 
> 标签：spring, struts2, mybatis

我正在使用 struts2 - spring 3.2.2 和 mybatis。

首先我的要求是：

制作一个事务管理实用程序，其中

1.  如果在当前事务的其他语句中抛出任何异常，则必须回滚事务。（其他数据库操作可以通过不同的类来执行，即不在同一个类中。）

按照要求，我创建了简单的程序。我的 applicationContext.xml 文件：

* * *

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:aop="http://www.springframework.org/schema/aop"
     xmlns:tx="http://www.springframework.org/schema/tx"
     xsi:schemaLocation="
     http://www.springframework.org/schema/beans
     http://www.springframework.org/schema/beans/spring-beans.xsd
     http://www.springframework.org/schema/tx
     http://www.springframework.org/schema/tx/spring-tx.xsd
     http://www.springframework.org/schema/aop
     http://www.springframework.org/schema/aop/spring-aop.xsd">

    <tx:annotation-driven transaction-manager="transactionManager"/>
        <!-- Initialization for data source -->
   <bean id="dataSource" 
      class="org.springframework.jdbc.datasource.DriverManagerDataSource">
      <property name="driverClassName" value="com.microsoft.sqlserver.jdbc.SQLServerDriver"/>
      <property name="url" value="jdbc:sqlserver://localhost;database=master;integratedSecurity=true;"/>
      <property name="username" value="Jaydeep"/>
      <property name="password" value="Acty#System123"/>
   </bean>

    <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />

        <property name='mapperLocations' value='classpath*:test/xml/*.xml' />
    </bean>

    <bean class='org.mybatis.spring.mapper.MapperScannerConfigurer'>
      <property name='basePackage' value='test.dao' />
    </bean>

    <bean id='sqlSession' class='org.mybatis.spring.SqlSessionTemplate'>
      <constructor-arg index='0' ref='sqlSessionFactory' />
    </bean>

   <bean id="transactionManager"
        class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource" />
    </bean>

   <bean id="serviceProvider"
      class="DataServiceProvider">
      <property name="sqlSession"  ref="sqlSession" />    
   </bean>

    <bean id="updutil" class="MyUpdateUtil">
        <property name="serviceProvider" ref="serviceProvider"></property>
    </bean>

</beans> 
```

//DataServiceProvider.java

```
import org.apache.ibatis.session.SqlSession;
import test.dao.DepartmentMapper;
import test.dao.EmployeeMapper;

public class DataServiceProvider {
    private SqlSession sqlSession;
    public DepartmentMapper getDeptMapper() {
        if(sqlSession != null)
            return sqlSession.getMapper(DepartmentMapper.class);
        else
            System.out.println("session null");
        return null;
    }
    public EmployeeMapper getEmpMapper() {
        if(sqlSession != null)
            return sqlSession.getMapper(EmployeeMapper.class);
        else
            System.out.println("session null");
        return null;
    }

    public SqlSession getSqlSession() {
        return sqlSession;
    }

    public void setSqlSession(SqlSession sqlSession) {
        this.sqlSession = sqlSession;
    }
} 
```

//接口：fooService.java

```
import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import org.springframework.transaction.annotation.Transactional;
import test.model.Department;

@Transactional
public interface fooService {

    public void update(boolean isThrow) throws ClassNotFoundException, IllegalAccessException, IllegalArgumentException, InvocationTargetException, NoSuchMethodException, SecurityException, IOException;

    public void insert(Department dept) throws IOException, ClassNotFoundException, IllegalAccessException, IllegalArgumentException, InvocationTargetException, NoSuchMethodException, SecurityException;

    public void select() throws IOException;
} 
```

//将在其中执行所有db相关操作的实用程序类 //MyUpdateUtil.java

```
import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import java.math.BigDecimal;
import java.util.List;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.transaction.annotation.Transactional;
import test.model.Department;
import test.model.Employee;
import test.model.EmployeeExample;

@Transactional
public class MyUpdateUtil implements fooService {

    public void update(boolean isThrow) throws ClassNotFoundException, IllegalAccessException, IllegalArgumentException, InvocationTargetException, NoSuchMethodException, SecurityException, IOException  {
        System.out.println("Updating...................Transaction alive? ..." + StartTransAction.isActive());
        if(isThrow)
            throw new RuntimeException("simulate Error condition") ;
        Employee record = new Employee();
        EmployeeExample example = new EmployeeExample();
        example.createCriteria().andDeptidEqualTo(1L);

        record.setEmpid(1L);
        record.setDeptid(1L);
        record.setEmpname("jaydeep");
        record.setSalary(BigDecimal.valueOf(2000));

        getServiceProvider().getEmpMapper().updateByExampleWithBLOBs(record, example);
    }
    @Transactional
    public void insert(Department dept) throws IOException, ClassNotFoundException, IllegalAccessException, IllegalArgumentException, InvocationTargetException, NoSuchMethodException, SecurityException {
        System.out.println("Inserting....................Transaction alive? .." + StartTransAction.isActive());
        getServiceProvider().getDeptMapper().insert(dept);
    }

    public void select() throws IOException {
        System.out.println("Dept Info");
        List<Department> deptList = getServiceProvider().getDeptMapper().selectByExampleWithBLOBs(null);
        for(Department d : deptList) {
            System.out.println("Dept ID: " + d.getDeptid());
            System.out.println("Dept Name: " + d.getDeptname());
        }
        System.out.println("Emp Info");
        List<Employee> empList = getServiceProvider().getEmpMapper().selectByExampleWithBLOBs(null);
        for(Employee e : empList) {
            System.out.println("Emp ID: " + e.getEmpid());
            System.out.println("Dept ID: " + e.getDeptid());
            System.out.println("Emp Name: " + e.getEmpname());
        }
    }   
    @Autowired(required=true)
    private DataServiceProvider serviceProvider;
    public DataServiceProvider getServiceProvider() {
        return serviceProvider;
    }

    public void setServiceProvider(DataServiceProvider serviceProvider) {
        this.serviceProvider = serviceProvider;
    }
} 
```

//以及当我单击jsp页面中的链接时执行的主要操作...... //StartTransAction.java

```
import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import java.util.Random;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.datasource.DataSourceTransactionManager;
import test.model.Department;

import com.opensymphony.xwork2.ActionSupport;

public class StartTransAction extends ActionSupport {
    private static final long serialVersionUID = 1L;

    public String execute() throws ClassNotFoundException, IllegalAccessException, IllegalArgumentException, InvocationTargetException, NoSuchMethodException, SecurityException, IOException {      
        Department dept = new Department();
        dept.setDeptid(Long.valueOf(String.valueOf(new Random().nextInt(500))));
        dept.setDeptname("esb");
        System.out.println("before Insert..................Transaction alive? ...." + isActive());
        try {
            updutil.insert(dept);

            System.out.println("After Insert..................Transaction alive? ...." + isActive());
            updutil.select();
            updutil.update(true);
        } catch (Exception e) {
            System.out.println(e.toString());
        }finally{
            System.out.println("After Update.................Transaction alive? ....." + isActive());
            updutil.select();
        }
        return SUCCESS;
    }
    @Autowired
    fooService updutil;

    public fooService getUpdutil() {
        return new MyUpdateUtil();
    }
    public void setUpdutil(fooService updutil) {
        this.updutil = updutil;
    }
    private DataSourceTransactionManager transactionManager;

    public DataSourceTransactionManager getTransactionManager() {
        return transactionManager;
    }
    public void setTransactionManager(
            DataSourceTransactionManager transactionManager) {
        this.transactionManager = transactionManager;
    }   

    public static boolean isActive() throws IOException, ClassNotFoundException, IllegalAccessException, IllegalArgumentException, InvocationTargetException, NoSuchMethodException, SecurityException  {
        ClassLoader contextClassLoader = Thread.currentThread().getContextClassLoader();
         Class tsmClass = contextClassLoader.loadClass("org.springframework.transaction.support.TransactionSynchronizationManager");
         Boolean isActive = (Boolean) tsmClass.getMethod("isActualTransactionActive", null).invoke(null, null);
         return isActive;
    }
} 
```

现在当我运行程序时......输出是这样的：

在插入之前............事务还活着吗？.....false
正在插入............事务还活着吗？....true
插入后......事务还活着吗？......false
Dept Info
Dept ID: 1
Dept Name: si
Dept ID: 251
Dept Name: esb
***Dept ID: 293
Dept Name: esb***
Emp Info
Emp ID: 1
Dept ID: 1
Emp Name: s
Updating.. ......交易还活着吗？.....真正的
java.lang.RuntimeException：模拟
更新后的错误条件............事务还活着？.....false
部门信息
部门 ID：1
部门名称：si
部门 ID：251
部门名称：esb
***部门 ID：293
部门名称：esb***
Emp Info
Emp ID：1
部门 ID：1
Emp 名称：s

* * *

较粗的部分是插入的新记录。

**抛出运行时异常后，我需要插入的记录必须回滚。**但如输出所示，即使抛出异常，记录也会被提交。正如我们所见，事务也在 update() 方法中继续进行。

请帮助我实现这一目标。我尝试了很多，但没有工作。如果可能的话，给我上述问题的工作代码....

* * *

编辑：我完全替换了上面的代码。

现在我有以下文件：

//applicationContext.xml:

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:aop="http://www.springframework.org/schema/aop"
     xmlns:tx="http://www.springframework.org/schema/tx"
     xsi:schemaLocation="
     http://www.springframework.org/schema/beans
     http://www.springframework.org/schema/beans/spring-beans.xsd
     http://www.springframework.org/schema/tx
     http://www.springframework.org/schema/tx/spring-tx.xsd
     http://www.springframework.org/schema/aop
     http://www.springframework.org/schema/aop/spring-aop.xsd">

    <tx:annotation-driven transaction-manager="transactionManager"/>
       <!-- bean id="serviceProvider" class="DataServiceProvider"></bean-->
        <!-- Initialization for data source -->
   <bean id="dataSource" 
      class="org.springframework.jdbc.datasource.DriverManagerDataSource">
      <property name="driverClassName" value="com.microsoft.sqlserver.jdbc.SQLServerDriver"/>
      <property name="url" value="jdbc:sqlserver://localhost;database=master;integratedSecurity=true;"/>
      <property name="username" value="Jaydeep"/>
      <property name="password" value="Acty#System123"/>

   </bean>

    <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name='mapperLocations' value='classpath*:test/xml/*.xml' />
    </bean>

    <bean class='org.mybatis.spring.mapper.MapperScannerConfigurer'>
      <property name='basePackage' value='test.dao' />
      <property name="sqlSessionFactoryBeanName" value="sqlSessionFactory" />
    </bean>

    <bean id='sqlSession' class='org.mybatis.spring.SqlSessionTemplate'>
      <constructor-arg index='0' ref='sqlSessionFactory' />
    </bean>

   <bean id="transactionManager"
        class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource" />
        <property name="nestedTransactionAllowed" value="true" />
        <property name="validateExistingTransaction" value="true" />
    </bean>

    <bean id="sqlSessionTemplate" class="org.mybatis.spring.SqlSessionTemplate">
        <constructor-arg index='0' ref='sqlSessionFactory' />
    </bean>

    <bean id="myService" class="service.MyService">
        <property name="sqlSessionTemplate" ref="sqlSessionTemplate" />
    </bean>
</beans> 
```

//StartTransAction.java

```
package com.acty;
import java.lang.reflect.InvocationTargetException;
import service.MyService;

import com.opensymphony.xwork2.ActionSupport;

public class StartTransAction extends ActionSupport {
    private static final long serialVersionUID = 1L;

    public String execute(){
        myService.startOperations();
        return SUCCESS;
    }

    public static boolean isActive() {
        ClassLoader contextClassLoader = Thread.currentThread().getContextClassLoader();
         Class tsmClass = null;
        try {
            tsmClass = contextClassLoader.loadClass("org.springframework.transaction.support.TransactionSynchronizationManager");
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
         Boolean isActive = null;
        try {
            isActive = (Boolean) tsmClass.getMethod("isActualTransactionActive", null).invoke(null, null);
        } catch (IllegalAccessException | IllegalArgumentException
                | InvocationTargetException | NoSuchMethodException
                | SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
         return isActive;
    }

    private MyService myService;

    public void setMyService(MyService myService) {
        this.myService = myService;
    }
} 
```

和 //MyService.java

```
package service;

import java.util.List;
import java.util.Scanner;

import org.mybatis.spring.SqlSessionTemplate;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.EnableTransactionManagement;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

import test.dao.DepartmentMapper;
import test.dao.EmployeeMapper;
import test.model.Department;
import test.model.Employee;
import test.model.EmployeeExample;

@Service
@EnableTransactionManagement
@Transactional(propagation=Propagation.REQUIRED)
public class MyService {
    @Autowired
    private SqlSessionTemplate sqlSessionTemplate;

    public void setSqlSessionTemplate(SqlSessionTemplate sqlSessionTemplate) {
        this.sqlSessionTemplate = sqlSessionTemplate;
    }
    @Transactional(propagation=Propagation.REQUIRED)
    public void startOperations() {
        DepartmentMapper deptMapper = sqlSessionTemplate.getMapper(DepartmentMapper.class);
        EmployeeMapper empMapper = sqlSessionTemplate.getMapper(EmployeeMapper.class);

        System.out.println("Before Insert Dept" + com.acty.StartTransAction.isActive());

        this.select(deptMapper, empMapper);

        Department dept = new Department();
        //insert new dept
        Scanner sc = new Scanner(System.in);
        System.out.println("Enter dept id ");
        dept.setDeptid(sc.nextLong());
        System.out.println("Enter dept Name ");
        dept.setDeptname(sc.next());

        deptMapper.insert(dept);

        System.out.println("After Insert Dept" + com.acty.StartTransAction.isActive());

        this.select(deptMapper, empMapper);

        this.select(deptMapper, empMapper);
        //now update employee

        EmployeeExample example = new EmployeeExample();
        example.createCriteria().andEmpidEqualTo(1L);

        Employee emp = new Employee();
        emp.setEmpname("jjj");

        try {
        //empMapper.updateByExampleSelective(emp, example);
        empMapper.updateByExampleWithBLOBs(emp, example);
        }catch(Exception e) {
            e.printStackTrace();
        }
        System.out.println("After Update Emp");

        this.select(deptMapper, empMapper);
    }
    public void select(DepartmentMapper deptMapper, EmployeeMapper empMapper) {
        System.out.println("\nDeptartment\n");
        List<Department> deptList= deptMapper.selectByExampleWithBLOBs(null);
        for(Department de : deptList) {
            System.out.println(" Dept Id : " + de.getDeptid());
            System.out.println(" Dept Name : " + de.getDeptname());
        }
        System.out.println("\nEmployee\n");
        List<Employee> empList= empMapper.selectByExampleWithBLOBs(null);
        for(Employee emp : empList) {
            System.out.println(" Emp Id : " + emp.getEmpid());
            System.out.println(" Emp Name : " + emp.getEmpname());
        }
    }
} 
```

//现在我在服务层做事。所有 DAO 都在其他包中，我是从 spring 注入的。

然后这个技巧也不起作用。查看输出：
在 Insert Dept true

Deptartment之前

Dept Id : 1
Dept Name : si
Dept Id : 2
Dept Name : esb
Dept Id : 3

Employee

Emp Id : 1
Emp Name : kkkkk
Enter dept id
4
Enter dept Name
asdwe
After Insert Depttrue

Deptartment

部门 ID：1
部门名称：si
部门 ID：2
部门名称：esb
部门 ID：3
部门名称：esb
部门 ID：4
部门名称：asdwe

-- 这里发生异常
org.springframework.dao.DataIntegrityViolationException:

### 更新数据库时出错。原因：com.microsoft.sqlserver.jdbc.SQLServerException: Ca

## ......

更新后 Emp

部门 ID：1
部门名称：si
部门 ID：2
部门名称：esb
部门 ID：3
部门名称：esb
部门 ID：4
部门名称：asdwe

...看这里，之前插入的部门，这里没有回滚.....（这里我们可以对sqlSessionTemplate使用回滚的方法，但是那spring自动事务管理有什么用呢？？这样做没有任何意义，我相信！）有什么问题，我真的没有得到......

请提供一些工作解决方案...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:44:52.167

当您在更新中抛出异常时，第一个事务（插入您的行）早已结束并提交。您可能想要实现的是在 try/catch 中`StartTransAction.execute`作为单个事务运行整个块。

一般来说，不建议在 dao 级别定义事务 - 而且您`MyUpdateUtil`看起来像带有 select/insert/update 方法的 dao 对象。您应该在服务层管理事务。

首先，将这些行移到新方法中`MyUpdateUtil`：

```
@Transactional
public void insertAndUpdate(Department dept) {
  this.insert(dept);
  this.select();
  this.update(true);
} 
```

然后从`execute`try/catch 块中调用它。这将为您提供进一步完善代码的工作起点。

# vb.net - OleDbException 未处理：INSERT INTO 语句中的语法错误

> ID：15404380
> 
> 赞同：0
> 
> 时间：2013-03-14T08:29:17.127
> 
> 标签：vb.net

```
con.Open()
            cmd.CommandText = "Insert Into tblEmp (FN,MN,LN,PAddHN,PAddSB,PAddMun,VPA,BD,BP,Tel,Rel,Cit,Height,Weight,Gend,SN,SOcc,NoC,AgeC,Stat,DS,FaN,FaOcc,MaN,MaOcc,PAdd,PTCN,PTCP,SSS,TIN,PHILH,PAGIBIG,CPNo,Sued,Age,BankAcc,empRfID,Principal,Department,Position,DRate,empID,OffT) Values('" & zfn & "','" & zmn & "','" & zln & "','" & zpaddhn & "','" & zpaddsb & "','" & zpaddmun & "','" & zvpa & "','" & zbd & "','" & zbp & "','" & ztel & "','" & zrel & "','" & zcit & "','" & zheight & "','" & zweight & "','" & zgend & "','" & zsn & "','" & zsocc & "','" & znoc & "','" & zagec & "','" & zstat & "','" & zds & "','" & zfan & "','" & zfaocc & "','" & zman & "','" & zmaocc & "','" & zpadd & "','" & zptcn & "','" & zptcp & "','" & zsss & "','" & ztin & "','" & zphilh & "','" & zpagibig & "','" & zcpno & "','" & zsued & "','" & zage & "','" & txtBankAcc.Text & "','" & zempRefID & "','" & cmbPrin.SelectedItem & "','" & cmbDept.SelectedItem & "','" & txtPos.Text & "','" & txtDRate.Text & "','" & empID & "','" & zOffTime & "')"
            cmd.ExecuteNonQuery()
            con.Close() 
```

在我的程序中运行它时出现错误。但是当我将命令粘贴到我的 ms 访问查询中并且它运行成功时。我的代码有什么问题吗？请帮助tnx。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:33:33.710

你的 add 参数值在哪里？

你可以试试这个

```
 Try
                    con = New OleDb.OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Dir\DB.accdb")
                    Dim command As String
                    command = "INSERT INTO Table (NOTIF, EMP_NO, EMP_NAME, [POSITION]) VALUES (@NOTIF, @EMP_NO, @EMP_NAME, @POSITION)"
                    con.Open()
                    Dim cmd As OleDbCommand
                    cmd = New OleDbCommand(command, con)
                    cmd.Parameters.AddWithValue("@NOTIF", NOTIFTextBox.Text)
                    cmd.Parameters.AddWithValue("@EMP_NO", EMP_NOTextBox.Text)
                    cmd.Parameters.AddWithValue("@EMP_NAME", EMP_NAMETextBox.Text)
                    cmd.Parameters.AddWithValue("@POSITION", POSITIONTextBox.Text)

                    cmd.ExecuteNonQuery()
                Catch exceptionObject As Exception
                    MessageBox.Show(exceptionObject.Message)
                Finally
                    con.Close()
                End Try 
```

这个代码我以前用过，它工作得很好

此外，您的字段名称看起来包含对 VB.net 的非法值，所以必须像这样

[Height],[Weight],.... 您可以尝试在 DATASET > Configure > Select Statement > Insert 中检查它，您会看到非法值。就像我的 POSITION 字段一样，它是非法的，所以必须包含“[]”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:00:26.760

如果数据类型类似于数字，则不能使用“'”。如果我解释正确，您的某些字段是数字。

```
con.Open()
cmd.CommandText = "Insert Into tblEmp (someInt, someString) VALUES (12, 'asdf')"
cmd.ExecuteNonQuery()
con.Close() 
```

除此之外，如果再次运行 Query，您应该在 Acces 中得到相同的错误。使用调试器并在“cmd.ExecuteNonQuery()”处添加断点，以获取包含所有“'”的已完成查询命令字符串。

# java-me - 在 j2me 中单击按钮后如何调用 Midlet 类？

> ID：15404381
> 
> 赞同：0
> 
> 时间：2013-03-14T08:29:20.957
> 
> 标签：java-me, midlet

当我单击第一个 midlet 类中的按钮时，我需要重定向到下一个 midlet 类。这个怎么做

```
if(sb.toString().equals("SUCCESS")){

              Alert success = new Alert("Login Successfully", 
                      "Your Login Process is completed!", 
                       image, AlertType.INFO);
                    //  success.setImage(image);
                      userName.setString("");
                      password.setString("");
                      display.setCurrent(success, form); 
        // here i move to next midlet       

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:31:02.923

如果两个 MIDlet 都是同一个 MIDlet 套件的一部分，那么它们应该能够使用 Class.forName() 相互启动。

引用 Sun 当年的话说：“出于安全原因，假设 MIDletSuite 中的 MIDlet 出于某种原因打包在一起并且应该能够互操作。这里暗示的是 MIDlet 共享一个名称空间；换句话说， MidletSuite 中的每个 MIDlet 都可以“看到”彼此。因为它们可以看到彼此，所以它们可以相互启动（Class.forName 隐喻）。

如果这两个 MIDlet 不是同一个 MIDlet 套件的一部分，那么就有以下技巧。虽然我自己没有尝试过，所以这只是理论上的：

对于您希望从另一个 MIDlet 启动的 MIDlet，您在 JAD 中放置一个 PushRegistry 条目（或通过代码注册它），侦听某个端口上的套接字连接。然后要从另一个 MIDlet 启动 MIDlet，您只需使用 localhost 或 127.0.0.1 作为地址在该端口上创建一个套接字连接。从理论上讲，这应该使另一个 MIDlet 启动。

# android - 使用 onConfigurationChanged 方法；半屏在android中变黑

> ID：15404382
> 
> 赞同：5
> 
> 时间：2013-03-14T08:29:28.907
> 
> 标签：android

我的问题是，我正在使用 android 的 onConfigurationChanged 方法来处理方向，但是当我将屏幕从纵向旋转到横向时，屏幕的一半会变黑几秒钟（大约 10-15 秒）。我所做的是，当方向改变时，我会处理一些视图的可见性。有没有人可以帮助解决这个问题。任何建议表示赞赏...在此先感谢。

# silverlight - 如何在 Silverlight 中重新绑定 App.xaml.cs 中的全局声明列表

> ID：15404386
> 
> 赞同：0
> 
> 时间：2013-03-14T08:29:40.430
> 
> 标签：silverlight, list, global

我在 App.xaml.cs 中全局声明了自定义类列表并在第一个按钮单击时绑定，这样它工作正常，但在第二个按钮单击时我想清除列表项并重新绑定新项，但它显示以前的绑定元素,

我试图在绑定之前先清除，但它什么也没显示（我认为它只为应用程序初始化一次）

DeptWiseidAndName 此列表在 App.xaml.cs 中声明为公共

列表 EditList = new List();

```
 EditList = App_Object.DeptWiseidAndName;
        App_Object.DeptWiseidAndName.Clear(); 
```

请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:03:14.173

尝试使用 ObservableCollection 而不是 List。ObservableCollection 将其内容的更改通知给绑定到它的对象。

# ios6 - 当用户点击 BACK 时，导航控制器中 transitionWithView 的最佳实现

> ID：15404397
> 
> 赞同：1
> 
> 时间：2013-03-14T08:30:15.943
> 
> 标签：ios6, uiviewcontroller, uinavigationcontroller, uiviewanimation

我在 NavigationController 中有 2 个 UIViewController。

第一个，A，在 tableView 顶部只有一个 UISearchBar，作为 tableHeader。第二个，B，在屏幕的上部有一个视图（我们称它为自定义 TableHeader）和该视图下方的一个表格。

我想在从 UIViewController A 推送到 UIViewControllerB 时模拟模态 transitionFlipFromRight，并在用户点击 navigationItem.backBarButtonItem 从 UIViewController B 弹出到 UIViewController A 时模拟模态 transitionFlipFromLeft。

推侧没问题：

```
UIViewController *vcB = [UIViewController alloc] init];

[self.navigationController pushViewController: vcB animated: NO];

[UIView transitionWithView:self.navigationController.view
           duration:0.8
           options:UIViewAnimationOptionTransitionFlipFromRight
           animations:nil
           completion:nil]; 
```

它按预期工作。

我在实现弹出时遇到问题，从 UIViewController B 切换回 UIViewController A。

我在 UIViewController B 中添加了这段代码：

```
 -(void) viewWillDisappear: (BOOL) animated
 {
  [super viewWilDisappear: NO]
  [UIView transitionWithView:self.navigationController.view
           duration:0.8
           options:UIViewAnimationOptionTransitionFlipFromLeft
           animations:nil
           completion:nil];

 } 
```

我可以看到翻转，但我对结果不满意，因为在从 B 切换到 AI 后的几分之一秒内，仍然可以看到 B 自定义 tableHeader，从左边框移动了 10 个点。

我应该在 viewWillDisappear 中管理从 B 到 A 的过渡，还是我这样做完全错误？如果我错了，处理弹出动画的正确方法是什么？

谢谢

尼古拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:58:53.107

你为什么不在你的 viewWillDisappear 中尝试这个并检查它是否有效？

```
UIViewController *vcA = [UIViewController alloc] init];

[[self retain] autorelease];

[self.navigationController pushViewController: vcA animated: NO];

[UIView transitionWithView:self.navigationController.view
       duration:0.8
       options:UIViewAnimationOptionTransitionFlipFromLeft
       animations:nil
       completion:nil];
[self.navigationController popViewControllerAnimated:NO]; 
```

这是经过测试的代码。所以它工作正常。这应该可以帮助你。

# c# - 无法上传图片（HttpPostedFileBase 为空）

> ID：15404398
> 
> 赞同：3
> 
> 时间：2013-03-14T08:30:21.557
> 
> 标签：c#, asp.net-mvc-3, image, file-upload

我尝试使用图像上传器，但是当我单击浏览并选择图像然后提交我的表单时，HttpPostedFileBase 为空。我的实现是否缺少？请帮忙。

**看法**

```
<form action="Home/UploadImage" method="POST">
    <p>
        <input type="file" accept="image/x-png, image/gif, image/jpeg" name="projectBgImage" id="projectBgImage"/>
    </p>
    <input type="submit" value="submit"/>
</form> 
```

**家庭控制器**

```
 public ActionResult UploadImage(HttpPostedFileBase projectBgImage)
    {
        return View();
    } 
```

**调试图像**

![在此处输入图像描述](../Images/186d0cbba2121cc5b6df9c5caca3cd31.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T08:32:52.887

添加`enctype attribute`你的`form`元素

```
<form action="Home/UploadImage" method="POST" enctype="multipart/form-data"> 
```

我建议你像这样使用`BeginForm`html-helper：

```
@using (Html.BeginForm("UploadImage", "Home", FormMethod.Post, new { id = "form", enctype="multipart/form-data" }))
{
    <p>
        <input type="file" accept="image/x-png, image/gif, image/jpeg" name="projectBgImage" id="projectBgImage"/>
    </p>
    <input type="submit" value="submit"/>
} 
```

`[HttpPost]`和带有注释的动作方法

```
[HttpPost]
public ActionResult UploadImage(HttpPostedFileBase projectBgImage)
{
    return View();
} 
```

额外信息：Phil Haack 的一篇不错的博客文章 [Asp.net MVC 上传](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T08:35:08.343

在视图中，`enctype`需要将属性设置为`multipart/form-data`

```
using (Html.BeginForm("ImageUp", "YourUpController", FormMethod.Post, new { enctype = "multipart/form-data" })) 
```

其次，在您的操作方法之上，请确保您具有该`HTTPPOST`属性。

```
[HttpPost]
public ActionResult SaveFile(HttpPostedFileBase projectBgImage) 
```

# linux - 如何在循环中更改文件名？

> ID：15404400
> 
> 赞同：0
> 
> 时间：2013-03-14T08:30:25.163
> 
> 标签：linux, bash

我在文件夹 /root 中有文件

```
file0001
file0002
file0010
file0011
file0100
file0121 
```

我有这个代码

```
for (( i=1; i<=1000; i++))
do
file='/root/file'$i
done 
```

我需要在循环中更改文件名

```
file0001 --> file1
file0010 --> file10
file0100 --> file100 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:34:29.493

您可以使用以下[`printf`](http://linux.die.net/man/1/printf)命令：

```
file=$(printf "/root/file%04d" $i) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:45:42.330

如果你想修剪前导零，简单的 bash 脚本可以解决问题：

```
#!/bin/bash
while read line           
do           
    name=`echo $line | cut -c5- | sed 's/^[0]*//'`
    echo "file$name"
done <your_file.txt 
```

结果： ....
file0100->file100
file0121->file121

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T09:05:50.853

尝试：

```
cd /root
for f in file*
do
  echo mv "$f" "${f%%[0-9]*}${f#"${f%%[1-9]*}"}"
done 
```

如果确定，请删除回声...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T09:00:32.187

顶部从文件名的数字部分删除尾随零使用：

```
rename 's/^file0*/file/' file* 
```

# java - 在 JPA 中，EntityManager.refresh() 对禁用的缓存有用吗

> ID：15404410
> 
> 赞同：0
> 
> 时间：2013-03-14T08:31:22.307
> 
> 标签：java, caching, jpa

有一些新手问题。在 JPA 中，如果缓存被禁用，那么调用`EntityManager.refresh()`不再有任何用处总是真的吗？

我正在维护这个应用程序，其中缓存被禁用，但它仍然调用刷新。我正在考虑删除刷新调用，因为我认为它不需要并且不必要地添加到处理中，但由于它不是我的原始代码，所以有一些疑问是否有任何影响。

感谢您的评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T08:42:40.027

您应该注意的一件事是涉及多层缓存（我想您指的是二级缓存）。实体管理器也是一级缓存——其范围要么绑定到事务，要么绑定到扩展持久性上下文的生命周期。

该`refresh()`方法用于使用其他实体管理器对数据库所做的更改来更新现有和托管（当前 EM 的持久性上下文的一部分）实体。因此，是否存在二级缓存与 refresh() 调用的意义和无意义无关。

# html - 将 div 元素的宽度扩展到 Bootstrap 的容器类之外

> ID：15404419
> 
> 赞同：4
> 
> 时间：2013-03-14T08:32:06.083
> 
> 标签：html, css, twitter-bootstrap

Bootstrap 的容器类的宽度为 1170 像素，非常适合显示信息，但我希望我的页脚背景延伸到页面边缘，无论屏幕大小如何。我已经看到建议我将宽度设置为 2000 像素的解决方案，但我更喜欢更干净的解决方案，以防有人使用具有大屏幕宽度的显示器。我也不想覆盖 Bootstrap 的容器类的宽度，因为这会弄乱我的元素的定位。

CSS中有没有办法告诉背景溢出它包含的div？

**这是一个[JSFiddle](http://jsfiddle.net/bfMtX/2/)**

这是我当前`.footer`的课程，受 Bootstrap`.container`课程的约束：

```
.footer {
    float: left;
    background: #000;
    margin-top:40px;
    width: 100% !important;
    height: 500px;
    position: absolute;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:13:59.363

稍微改变你的设计

```
 <!-- .footer's old home -->
    </container>
    <footer>
        <container>Your previous footer kids</container>
    </footer>
</body> 
```

`.container`是一个类，所以它可以有多次出现。

实际上，我敢打赌这就是为什么 Bootstrap 将 .container 设为一个类，而不是一个 id。

一个小提琴：http: [//jsfiddle.net/V7Yyf/](http://jsfiddle.net/V7Yyf/)

顺便说一句 -`.container`在某些视口大小下具有“自动”宽度（参见：bootstrap-responsive.css 的第 825 行）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:54:11.747

试试这个：

```
.footer {
    float: left;
    background: #000;
    margin-top:40px;
    width: 100% !important;
    height: 500px;
    margin-left: -83px;
    position: absolute;
} 
```

该`!important`选项基本上优先于可能覆盖它的任何其他属性。

还可以在 bootstrap.css 中编辑容器类

```
.container {
  margin-right: auto;
  margin-left: auto;
  *zoom: 1;
  display: block;
  width: 100% !important;
  position:absolute;
} 
```

# xpages - XPages：向数据视图自定义控件添加按钮

> ID：15404423
> 
> 赞同：0
> 
> 时间：2013-03-14T08:32:13.460
> 
> 标签：xpages, dataview

我正在使用扩展库来创建 XPage，我想使用一个视图，我可以在其中使用一些内联按钮（视图每一行中的按钮），我还想使用数据视图的功能，我可以在其中展开当前行的内容。

我想使用其中一个内联按钮来扩展这一行的内容，因为在执行此按钮的功能之前，用户必须在 inputText 字段中输入一些数据。

那么问题是什么？- 如何将内联按钮（使用 SSJS）添加到数据视图？- 你知道有什么其他方法可以解决我的问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:06:19.813

在 Extlib 数据库中，自定义表单的扩展是使用链接完成的。我会坚持链接-> 为您提供最多的选项（客户端、服务器端）。坚持那些。如果你真的需要那种“纽扣式”的外观（恕我直言，这看起来不太像 Web 应用程序），请使用 CSS 将链接样式设置为看起来像一个按钮。OneUI[对此](http://infolib.lotus.com/resources/oneui/2.1/docPublic/components/buttons.htm)有说明（或从 Twitter 引导程序中窃取它们）。

OneUI 值得一看[，](http://infolib.lotus.com/resources/oneui/2.1/docPublic/examples/interactive.htm)它为展开/折叠提供了不同的视觉线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:37:57.373

您应该能够在 dataView 的范围内通过为“详细信息”添加一个方面并使用可折叠的详细信息来执行此操作。

对于dataView，设置collapsibleDetail="true"，添加一个面板到detail facet，然后把你想在点击展开时显示的元素放到那个面板中。

```
<xe:dataView id="dataView1" collapsibleDetail="true" detailsOnClient="true">
    <xp:this.facets>
        <xp:panel xp:key="detail">
            <xp:button id="Mybutton" value="My button"></xp:button>
            <xp:label value="This is the label" id="label1" for="Mybutton"></xp:label>
        </xp:panel>
    </xp:this.facets>
    <xe:this.summaryColumn>
        <xe:viewSummaryColumn columnName="lastname"></xe:viewSummaryColumn>
    </xe:this.summaryColumn>
    <xe:this.extraColumns>
        <xe:viewExtraColumn columnName="city"></xe:viewExtraColumn>
        <xe:viewExtraColumn columnName="state"></xe:viewExtraColumn>
        <xe:viewExtraColumn columnName="zip"></xe:viewExtraColumn>
    </xe:this.extraColumns>
    <xe:this.data>
        <xp:dominoView var="view2" viewName="ByName-First"></xp:dominoView>
    </xe:this.data>
</xe:dataView> 
```

现在，我不确定如何将其绑定到显示的文档内容，但我确信有办法。我知道如何重复访问文档，但不是在 dataView 中，所以我可能会重复访问（除非你弄清楚并在这里发布给我们！）

希望这能让你朝着正确的方向前进。

# android - 帧动画在 Android 2.2 中不起作用

> ID：15404427
> 
> 赞同：1
> 
> 时间：2013-03-14T08:32:34.847
> 
> 标签：android, android-animation, android-2.2-froyo

我正在制作一个包含帧动画的 android 项目。我的动画在 4.0 中运行良好，但在 2.2 中没有显示。有什么办法可以让它在 2.2/2.3 中工作吗？2.2 的任何工作代码片段都会很棒。

如果需要，可以发布我的代码。

**编辑：** 这是我的工作代码

```
public class FrameAnimationExample extends Activity {
     AnimationDrawable animation;
    @Override
       public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);
           setContentView(R.layout.main);

           Button btnStart = (Button) findViewById(R.id.btnStart);
           final ImageView imgView = (ImageView)findViewById(R.id.img);

           btnStart.setOnClickListener(new View.OnClickListener() {
             @Override
              public void onClick(View v) {
                 startAnimation();
              }
           });
           imgView.setOnClickListener(new View.OnClickListener() {
      @Override
      public void onClick(View v) {

       }
        });
       }

    class Starter implements Runnable {
          public void run() {
               animation.start();
           }
       }

       private void startAnimation(){
           animation = new AnimationDrawable();
           animation.addFrame(getResources().getDrawable(R.drawable.hud_bubble_fill_line), 100);
           animation.addFrame(getResources().getDrawable(R.drawable.hud_bubble_fill), 100);
           animation.addFrame(getResources().getDrawable(R.drawable.medal_brown), 100);
           animation.addFrame(getResources().getDrawable(R.drawable.medal_silver), 100);
           animation.addFrame(getResources().getDrawable(R.drawable.medal_gold), 100);
           animation.setOneShot(true);

           ImageView imageView = (ImageView) findViewById(R.id.img);
           RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(80, 90);
           params.alignWithParent = true;
           params.addRule(RelativeLayout.CENTER_IN_PARENT);       

           imageView.setLayoutParams(params);
           imageView.setImageDrawable(animation);
           imageView.post(new Starter());
       }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T17:38:28.583

你可以试试

```
// animation call
ImageView img = (ImageView) findViewById(R.id.img);
img.post(animateMe);

final Runnable animateMe = new Runnable() {

@Override
public void run() {
    ImageView imageView = (ImageView) findViewById(R.id.img);
    imageView.setBackgroundResource(R.anim.img_animation);
    AnimationDrawable frameAnimation = (AnimationDrawable) imageView.getBackground();
    frameAnimation.start();
    }
}; 
```

并使用 img_animation.xml 像：

```
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/selected" 
    android:oneshot="true">

<!-- ur anim images here -->
<item android:drawable="@drawable/hud_bubble_fill_line" android:duration="100" />
<item android:drawable="@drawable/hud_bubble_fill" android:duration="100" />
<!-- and so on -->

</animation-list> 
```

# android - 如何创建 android 应用程序，它会告诉我每个已安装的应用程序正在使用多少电池

> ID：15404430
> 
> 赞同：-5
> 
> 时间：2013-03-14T08:32:45.193
> 
> 标签：android, performance

如何创建 android 应用程序，它会告诉我每个已安装的应用程序使用了多少**电池**。请建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:36:49.873

没有 API 可以检索它。在设置应用程序中为电池统计 UI 所做的计算是一个复杂的近似值（在某种程度上考虑到 CPU 步进等），并且非常近似。谷歌通过 API 提供它是不够准确的。

简而言之，正如谷歌员工[在这里](http://grokbase.com/p/gg/android-developers/128pee7q49/how-to-get-battery-usage-from-cpu-usage-in-android)所说的那样，没有办法做到这一点。

# php - PHP - 安全地替换一个类

> ID：15404431
> 
> 赞同：0
> 
> 时间：2013-03-14T08:32:46.687
> 
> 标签：php, class, extends

假设我做了一个类：

```
class abc {
   function a() { .. }
} 
```

将来，比如说更新，我制作了这个类的更新版本，所有相同的函数加上一些新函数和私有变量：

```
class abc2 {
    function a() { .. }
} 
```

现在，我想要的不是更新我的整个代码以查找旧类`abc`并将其替换为`abc2`，有没有什么方法可以在我的旧代码中`abc`调用一个对象，它应该返回`abc2`. 这样我就不必`abc`在我的代码中的所有实例中更新类名。

我知道我可以`extends`在 class 中使用关键字`abc2`，但我担心我的私有变量或函数将无法访问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T08:36:53.020

```
class abc extends abc2 {
// don't add any methods or whatever
}

class abc2 {
   function a() { .. }
} 
```

这样，abc2 的所有方法都与 abc 相同。至于私人问题，没有简单的方法可以解决。要么重写所有代码来修复类，要么保护私有方法。至少尝试使用这种extend方法，看看是否发生任何冲突，我当然不希望如此。

一个解决方案是拥有命名空间，您可以在其中重新编码以使用 newnamespace\abc; 而不是 oldnamespace\abc; 在你的代码中。然而，这也意味着重写代码。

# java - 同一个tomcat的webapps之间的共享对象

> ID：15404432
> 
> 赞同：6
> 
> 时间：2013-03-14T08:32:48.657
> 
> 标签：java, web-applications, servlets, tomcat6

我有 2 个 webapps 在两个上下文中运行：c1、c2（都紧跟在根之后）。我在 c1 中放了一个 startupListener 来共享一个变量，在 c2 中放另一个来检索它。

我在 c1 中的启动监听器是：

```
 public void contextInitialized(ServletContextEvent sce) {  
            HashMap <String,Object> database ;
            //some code to init database 
            ServletContext context = sce.getServletContext().getContext("/c1");
            if (context!=null)
            {
                context.setAttribute("crossContext", true);
                context.setAttribute("cache", database);
            }

    } 
```

在 c2 应用程序中，它是这样的：

```
 public void contextInitialized(ServletContextEvent sce) {
            ServletContext context = sce.getServletContext().getContext("/c1");
            HashMap<String,Object> database = (HashMap) context.getAttribute("cache");

      } 
```

c2 的 startupListener 中的上下文总是空的，我试过'/c1'，'c1'。我错过了什么？（我正在使用 tomcat6，如果这很重要）谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:53:32.510

您需要设置 crossContext=true。来自 tomcat 文档：

> 如果您希望在此应用程序中调用 ServletContext.getContext() 以成功地为在此虚拟主机上运行的其他 Web 应用程序返回请求调度程序，则设置为 true。在有安全意识的环境中设置为 false（默认值），以使 getContext() 始终返回 null。

[http://tomcat.apache.org/tomcat-7.0-doc/config/context.html](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:44:51.327

问题：

app初始化不匹配可能是app2在app1之前初始化。

有一个潜在的“解决方法”：如果您实际上有两个（或更多）应用程序相互依赖，您可能会决定在您的应用程序中启动多个服务`server.xml:`

```
<Service name="app1">
  <Connector .../>

  <Engine ...>
     <Host appbase="app1" ...>
       ...        
     </Host>
  </Engine>
</Service>
<Service name="app2">
  <Connector .../>

  <Engine ...>
     <Host appbase="app2" ...>
       ...        
     </Host>
  </Engine>
</Service> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T08:44:12.790

另一种选择是使用序列化。在一个应用程序中序列化数据并在另一个应用程序中读取相同的数据。

# android - Eclipse LogCat 不可读 - OpenCV / Android NDK

> ID：15404434
> 
> 赞同：0
> 
> 时间：2013-03-14T08:32:51.213
> 
> 标签：android, eclipse, opencv, android-ndk

我对 Eclipse 和 Android 开发人员还很陌生，最近才安装了 NDK 和 OpenCV，自从我一直在战斗以来。Win8/Eclipse Juno/NDK R8D/OpenCV 2.4.4

项目文件夹有这个红色感叹号，但其中没有文件显示任何错误。CDT 可以很好地构建应用程序！这是 LogCat 给我的：

有什么线索吗？干杯

编辑：在我听从你的建议后，我得到了以下结果：

```
Description Resource    Path    Location    Type
Project 'OpenCV Library - 2.4.4' is missing required library: 'C:\Program Files (x86)\Android\android-sdk\platforms\android-17\android.jar' OpenCV Library - 2.4.4      Build path  Build Path Problem
The container 'Android Dependencies' references non existing library 'C:\Android\android-opencv-2-4-4\sdk\java\bin\opencv library - 2.4.4.jar'  Test1       Build path  Build Path Problem 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:40:44.013

如果项目文件夹显示红色感叹号，请尝试转到窗口 > 显示视图 > 问题，可能会有更好的问题描述。

上面的日志看起来像是来自您设备的一般日志。如果您想从特定运行的应用程序登录，请从 eclipse 在设备上运行该应用程序，然后在 LogCat 输出上方的文本字段中键入 app:com.yourpackagename。

# php - 注销后单击返回按钮时避免进入主页

> ID：15404435
> 
> 赞同：-1
> 
> 时间：2013-03-14T08:32:51.480
> 
> 标签：php, codeigniter, codeigniter-2

我正在使用 Codeigniter 最新版本。我正在使用 php 进行 facebook 连接。我按照 phpacademy 的视频教程进行了 facebook 登录。一切正常，但是在我点击注销后，我调用了一个函数注销：

```
$this->session->unset_userdata('is_logged_in');
session_destroy();
redirect('main/fb_login','refresh'); 
```

并激活登录功能并返回登录视图。但我的问题是，单击浏览器上的“返回”按钮后，我的主页带有“注销”按钮，并且根本没有刷新。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:16:55.343

希望您在视图中使用模板，这将是无痛的，但请确保它位于您不希望通过后退按钮访问的每个页面的头部。

```
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE, NO-STORE, must-revalidate">
<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">
<META HTTP-EQUIV="EXPIRES" CONTENT=0> 
```

只是为了解释发生了什么。该页面正在从您的浏览器缓存加载，这意味着浏览器认为您的用户仍处于登录状态。上述行使浏览器在每次加载时重新验证页面，并且不会从其自己的缓存中加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:45:58.453

在主页函数的开头添加以下代码行：

> ```
>  if(!$this->session->userdata('username')) header('location: main/fb_login'); 
> ```

编辑：尝试以下代码。

```
 public function home() 
    { 
        if(!$this->session->userdata('username')) header('location: main/fb_login');
        $this->load->view('home');
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T08:40:40.893

您必须使用 if 条件检查用户是否已登录：

```
 function homepage(){     
     if($this->session->userdata('is_logged_in')){
        //code for homepage
        $this->load->view('homepage');//there should be file in you view folder homepage.php
     }else{
        redirect('main/fb_login','refresh');
     }
  } 
```

这将阻止进入主页。

并确保您已加载会话库：

```
 $autoload['libraries'] = array('database', 'session','form_validation'); 
```

如果上述陈述中的每件事都很好，那么请尝试编写

```
 session_start(); 
```

在此语句之后的构造函数中

```
 parent::__construct(); 
```

希望它会有所帮助！

# c# - ListView 刷新 GetView()

> ID：15404443
> 
> 赞同：0
> 
> 时间：2013-03-14T08:33:29.340
> 
> 标签：c#, android, listview, xamarin

在我的应用程序中，我有一个带有“部分”的 ListView。对于每个项目，我添加了一个字母，但它们仅对以该字母开头的第一个单词可见。它工作正常，但如果我在我的 ListView 中向下滚动，顺序会发生变化，这意味着这封信将转到下一项。

例子：

```
A
--

 - Alligator
 - Ant
 - Antelope
 - Ape 
```

但是当我向下滚动时，会发生以下情况：

```
 - Aligator

A
--
 - Ant
 - Antelope
 - Ape 
```

添加我在 GetView() 中实现的字母的函数

我怎么解决这个问题？我读到 ListView 在滚动时正在刷新，如何禁用刷新？还是有其他方法可以解决这个问题？

```
protected string old_char = "";
        public override View GetView(int position, View convertView, ViewGroup parent)
        {
                var item = sw_items [position];
                View view;

          convertView = null;

                view = (convertView ??
                    this.context.LayoutInflater.Inflate (Resource.Layout.ItemLayout,
                  parent,
                  false)) as LinearLayout;

                var txtTitle = view.FindViewById<TextView> (Resource.Id.txtTitle);
                txtTitle.SetText (sw_items [position].name, TextView.BufferType.Normal);

                var alfabet = view.FindViewById<TextView> (Resource.Id.alfabet);
                var linAlfabet = view.FindViewById<LinearLayout> (Resource.Id.Lin_Alfabet);

          if (convertView == null) {  
            string cnv_char = item.name [0].ToString ().ToUpper ();
            alfabet.Text = cnv_char;
            if (cnv_char != old_char) {
              alfabet.Visibility = ViewStates.Visible;
              linAlfabet.Visibility = ViewStates.Visible;
            } else {
              alfabet.Visibility = ViewStates.Gone;
              linAlfabet.Visibility = ViewStates.Gone;
            }

            //saving previous char
            old_char = cnv_char;
          }

                return view;

        }

      } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:12:51.990

**修改**

**首先**，实现的基本方案`getView()`如下。

```
if (convertView == null) {
    // the system does not want me to recycle a view object, so create a new one
    LayoutInflater inflater = (LayyoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    convertView = inflater.inflate(R.layout.your_layout_file, parent, false);
}
// here, set up the convertView object, no matter whether it was recycled or not
...
return convertView; 
```

鉴于您发布的代码片段，您可能需要做的就是： 1\. 删除`convertVire = null;`Yatin 建议的语句，以及 2\. 删除周围的环境，包括在块周围`if (convertView == null) {`关闭。确保为 正确设置所有内容，因为不能保证它是新对象。`}``string cnv_char... old_char = cnv_char``convertView`

**其次**，您的代码依赖于`getView()`以特定顺序调用，但事实并非如此。目前，您依赖于`old_char`设置为最后一项的起始字母（按照它们在列表中出现的顺序）。这是没有保证的。

我建议您使用`position`参数访问列表的前一个条目（当然，第一个条目除外）并检查差异，如果没有前任或以不同的字母开头，则显示当前项目的起始字母.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:30:19.113

ListView 重用堆栈中的视图来替换向上滚动以将其再次放置在底部的视图

尝试在之前的代码中添加以下语句：-

**转换视图=空；**

在它检查之前

**if(convertView==null);**

# windows-7 - Windows 7：批处理文件如果位于驱动器 c: 上可以工作，但如果位于驱动器 d: 上则不能工作。为什么？

> ID：15404450
> 
> 赞同：0
> 
> 时间：2013-03-14T08:33:53.020
> 
> 标签：windows-7, batch-file, access-denied

批处理文件包含：

```
start "" "C:\Program Files\TrueCrypt\TrueCrypt.exe" 
```

如果该批次位于驱动器 c:，我可以成功执行该批次。

当我将该批处理文件复制到驱动器 d 时：我总是收到错误消息（在 dosbox 中）：“Zugriff verweigert”（en：“访问被拒绝”）。即使我以管理员身份运行批处理。

用户帐户控制 (UAC) (de: "Benutzerkontensteuerung") 被禁用。

如何从驱动器d成功运行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:39:29.993

经过一番研究：安装的个人文件墙（COMODO 防火墙）有一个名为 Defense+ 的功能，可以检查本地批处理执行情况。从“受信任的文件”中删除批处理并从“自己的安全规则”中删除会使弹出窗口重新决定允许的内容和不允许的内容。

问题已修复。

# android - R 不能仅在一行中解析为变量

> ID：15404454
> 
> 赞同：1
> 
> 时间：2013-03-14T08:34:17.833
> 
> 标签：android, windows, eclipse, facebook

我的朋友使用`phonegap`,`jquery`和`facebook sdk`在 eclipse 中创建了一个 android 应用程序。我想在我的计算机上运行该应用程序。所以我把整个项目导入了eclipse。我下载了所有必要的 API。最初我遇到了很多错误，但我解决了大部分错误。
现在我只遇到一个错误。它在`src/com.facebook.android./FbDialog.java`文件中。一个特定的行

```
Drawable crossDrawable = getContext().getResources().getDrawable(R.drawable.close); 
```

给出错误 R 无法解析为变量。

我在这个网站以及其他网站上遇到了很多类似的问题。我已经无数次清理了这个项目。R.java 文件构建成功。另外，我的朋友在他的笔记本电脑上运行相同的项目时没有收到任何错误。所以我认为编码部分没有任何问题。
我肯定错过了一些重要的设置或下载。请帮忙。这个错误让我很头疼。
我是她的新用户，所以不能上传截图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:08:51.007

第一个。`res/drawable`文件夹 ( `ldpi`, `mdpi`, `hdpi`) 必须包含一个名为 的图像`close`，如果不添加它。为了克服错误，我并不真正关心文件存在于哪个错误中。

但为了正确使用资源，请参阅[此处的 Android 文档](http://developer.android.com/guide/topics/resources/providing-resources.html#Compatibility)

第二。文件`FbDialog.java`必须有一个`import`有时`R.java`R 导入与 clean & built 混合，而不是`import your.package.com.R;`包含`import android.R;`

根据依赖库或主项目的相关项目，`close`文件资源可能是其他库的一部分，在这种情况下您将需要`import that.package.com.R;`. 因此，如果它是 Facebook SDK 的一部分，那么您将需要`import com.facebook.android.R;`

我希望您了解 R 导入如何工作的逻辑。

* * *

**更新：**让我们强制它工作，将行更改为：

`Drawable crossDrawable = getContext().getResources().getDrawable(your.package.com.R.drawable.close);`

# c - 无法链接共享库

> ID：15404455
> 
> 赞同：0
> 
> 时间：2013-03-14T08:34:19.590
> 
> 标签：c, shared-libraries

我想为另一个共享库制作包装器。

elsymobileclient.h

```
extern void* CreateClass(void); 
```

elsymobileclientwrapper.c

```
#include <AnswStruct.h>
#include <elsymobileclient.h>

void * W_CreateClass() {
  return CreateClass();
} 
```

编译：

```
$ gcc -I. -L. elsymobileclientwrapper.c -lelsymobileclient 
```

/tmp/ccDxlXsd.o: 在函数`W_CreateClass': elsymobileclientwrapper.c:(.text+0x7): undefined reference to`CreateClass'collect2: ld 返回 1 退出状态

哪里错了？

# vba - 使用 VBA 将 Excel xlsm 文件上传到 php 脚本

> ID：15404460
> 
> 赞同：2
> 
> 时间：2013-03-14T08:34:35.737
> 
> 标签：vba, excel, winhttp, winhttprequest

我想从 VBA 将 Excel xlsm 文件上传到 php 脚本。我找到了以下代码：

```
Dim WinHttpReq As Object
Set WinHttpReq = CreateObject("WinHttp.WinHttpRequest.5.1")

Dim strURL As String
Dim StrFileName As String
Dim FormFields As String
Dim path As String
Dim name As String

   StrFileName = "c:\temp\ctc1output.xls"
   strURL = "http://www.tri-simulation.com/P3/"

   WinHttpReq.Open "POST", strURL, False

   ' Set the header
  WinHttpReq.SetRequestHeader "Content-Type", "application/x-www-form-urlencoded"

   FormFields = """fileulp=" & StrFileName & """"
   FormFields = FormFields + "&"
   FormFields = FormFields + """sfpath=P3"""

   WinHttpReq.Send FormFields

   ' Display the status code and response headers.
   MsgBox WinHttpReq.GetAllResponseHeaders
   MsgBox WinHttpReq.ResponseText 
```

1.  我应该将文件作为二进制文件还是其他类型的文件来处理？
2.  我可以在文件仍然打开时上传文件吗（我想上传运行 VBA 的文件）？

我不确定我是否走在正确的轨道上。我也不确定标题和表单字段应该是什么。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T20:26:01.897

您不需要对任何内容进行 base64 编码。按照[您找到的示例代码，](http://wqweto.wordpress.com/2011/07/12/vb6-using-wininet-to-post-binary-file/)但在准备文件之前（在*'---prepare body* comment 之前）只需像这样添加其他文本（表单条目）

```
sPostData = sPostData & "--" & STR_BOUNDARY & vbCrLf & _
     "Content-Disposition: form-data; name=""" & Name & """"
sPostData = sPostData & vbCrLf & vbCrLf & _
     pvToUtf8(Value) & vbCrLf 
```

...在哪里`Name`和`Value`是您想要包含在服务请求中的设计名称和实际文本。有关功能`pvToUtf8`实现，请查看[此 Google Cloud Print 服务连接器](https://github.com/wqweto/VbGcp/blob/master/Src/cGcpService.cls)。上面的代码片段取自`pvRestAddParam`同一连接器的功能。

# cocos2d-x - 用精灵移动瓷砖地图？

> ID：15404465
> 
> 赞同：1
> 
> 时间：2013-03-14T08:35:03.647
> 
> 标签：cocos2d-x

我想显示生成我的精灵的平铺地图部分，然后通过精灵移动移动精灵地图。我如何在 cocos2dx 中实现这一点。我尝试 ccfollow 但没有成功。

```
_tileMap->runAction(CCFollow::actionWithTarget(_player)); 
```

# android - 应用程序崩溃：无法在未调用 Looper.prepare() 的线程内创建处理程序

> ID：15404467
> 
> 赞同：0
> 
> 时间：2013-03-14T08:35:17.407
> 
> 标签：android, android-asynctask, crash-reports, android-location

我有一个 AsyncTask 会调用

```
public static String getRequestURL(String urlName) {
    String url = "";
    if(GetUserLocation.userLocation == null){
        GetUserLocation gul = new GetUserLocation();

        LocationResult lResult = new LocationResult() {

            @Override
            public void gotLocation(Location location) {
                if(location != null) {
                    GetUserLocation.userLocation = location;
                }

            }
        };

        gul.getLocation(NLocateApplication.context, lResult);
        long timeOfLoad = Calendar.getInstance().getTimeInMillis();

        while(GetUserLocation.userLocation == null
                && Calendar.getInstance().getTimeInMillis() - timeOfLoad < 30000) {

        }
        Log.d("ServiceHelper.getRequestURL", "userlocation NULL");
    }

    url += ServiceHelpers.BASE_URL.toString() + urlName + "?"
            + "lattitude=" + GetUserLocation.userLocation.getLatitude()
            + "&longitude=" + GetUserLocation.userLocation.getLongitude()
            + "&type=" + Build.MANUFACTURER.toUpperCase() + "-" + Build.MODEL.replaceAll("\\s", "_")
            + "&uuid=" + NLocateApplication.UUID;

    return url;
} 
```

doInBackground 方法中的方法。GetUserLocation 类将尝试获取用户位置。但有时我收到`Can't create handler inside thread that has not called Looper.prepare()`错误并且应用程序崩溃。

如何解决这个问题？任何帮助将不胜感激。

# 日志猫

`java.lang.RuntimeException: An error occured while executing doInBackground() at android.os.AsyncTask$3.done(AsyncTask.java:299) at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273) at java.util.concurrent.FutureTask.setException(FutureTask.java:124) at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307) at java.util.concurrent.FutureTask.run(FutureTask.java:137) at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569) at java.lang.Thread.run(Thread.java:856) Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare() at android.os.Handler.<init>(Handler.java:121) at android.app.Activity.<init>(Activity.java:772) at com.nepways.nlocate.location.GetUserLocation.<init>(GetUserLocation.java:16) at com.nepways.nlocate.helpers.ServiceHelpers.getRequestURL(ServiceHelpers.java:60) at com.nepways.nlocate.tasks.LocationsTask.getDataFromService(LocationsTask.java:127) at com.nepways.nlocate.tasks.LocationsTask.doInBackground(LocationsTask.java:78) at com.nepways.nlocate.tasks.LocationsTask.doInBackground(LocationsTask.java:1) at android.os.AsyncTask$2.call(AsyncTask.java:287) at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) ... 5 more`

获取用户位置.java

```
public class GetUserLocation {

private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1;
private static final long MINIMUM_TIME_BETWEEN_UPDATES = 30000;

Timer timer1;

LocationManager locationManager = null;
LocationResult locationResult;
boolean gpsEnabled = false;
boolean networkEnabled = false;
public static Location userLocation = null;

public boolean getLocation(Context context, LocationResult result) {
    locationResult = result;

    if (locationManager == null) {
        locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
    }

    // exceptions will be thrown if provider is not permitted.
    try {
        gpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    } catch (Exception ex) {

    }

    try {
        networkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
    } catch (Exception ex) {
    }

    // don't start listeners if no provider is enabled
    if (!gpsEnabled && !networkEnabled)
        return false;

    if (gpsEnabled) {
        locationManager.removeUpdates(locationListenerGps);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 
                MINIMUM_TIME_BETWEEN_UPDATES, 
                MINIMUM_DISTANCE_CHANGE_FOR_UPDATES, 
                locationListenerGps);
    }

    if (networkEnabled) {
        locationManager.removeUpdates(locationListenerNetwork);
        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 
                MINIMUM_TIME_BETWEEN_UPDATES, 
                MINIMUM_DISTANCE_CHANGE_FOR_UPDATES, 
                locationListenerNetwork);
    }

    timer1 = new Timer();
    timer1.schedule(new GetLastLocation(), 30000);

    return true;
}

LocationListener locationListenerGps = new LocationListener() {

    @Override
    public void onLocationChanged(Location location) {
        timer1.cancel();

        locationResult.gotLocation(location);
        locationManager.removeUpdates(this);
        locationManager.removeUpdates(locationListenerNetwork);
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
};

LocationListener locationListenerNetwork = new LocationListener() {
    @Override
    public void onLocationChanged(Location location) {
        timer1.cancel();

        locationResult.gotLocation(location);
        locationManager.removeUpdates(this);
        locationManager.removeUpdates(locationListenerGps);
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
};

class GetLastLocation extends TimerTask {
    @Override
    public void run() {

        locationManager.removeUpdates(locationListenerGps);
        locationManager.removeUpdates(locationListenerNetwork);

        Location networkLocation = null, gpsLocation = null;
        if (gpsEnabled) {
            //t = Calendar.getInstance().getTimeInMillis();
            gpsLocation = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        }

        if (networkEnabled) {
            networkLocation = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
        }

        // if there are both values use the latest one
        if (gpsLocation != null && networkLocation != null) {

            if (gpsLocation.getTime() > networkLocation.getTime())
                locationResult.gotLocation(gpsLocation);
            else
                locationResult.gotLocation(networkLocation);

            return;
        }

        if (gpsLocation != null) {
            locationResult.gotLocation(gpsLocation);
            return;
        }

        if (networkLocation != null) {
            locationResult.gotLocation(networkLocation);
            return;
        }

        locationResult.gotLocation(null);
    }
}

public static abstract class LocationResult {
    public abstract void gotLocation(Location location);
}

public void removeUpdates() {
    if(timer1!=null) {
        timer1.cancel();
    }
    locationManager.removeUpdates(locationListenerGps);
    locationManager.removeUpdates(locationListenerNetwork);
    userLocation = null;
    locationResult.gotLocation(null);
}

public Timer getTimer() {
    return this.timer1;
}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:47:11.807

> 无法在未调用 Looper.prepare() 错误且应用程序崩溃的线程内创建处理程序。

很可能您正在从非起源（非 UI）线程但从后台/工作线程执行某些操作，`UI`这是不允许的。修复它应该可以解决您的问题。

# android - android将文本设置为textviews的arraylist

> ID：15404470
> 
> 赞同：0
> 
> 时间：2013-03-14T08:35:33.680
> 
> 标签：android, arraylist, textview, settext

如何将文本设置为 TextViews 数组。

这是我做的：

```
public void onClickButtons(View view) {

    if(view==mBtnGuess) {
        int i;
        String word = "someword";
        String getInput = mEtxtUserInput.getText().toString();
        char[] wordChars = word.toCharArray();
        if(getInput.length()>0) {

            if(getInput.length()==1) {
                List<TextView> txtCharArr= new ArrayList<TextView>();
                txtCharArr.add(mChar1);
                txtCharArr.add(mChar2);
                txtCharArr.add(mChar3);
                txtCharArr.add(mChar4);
                txtCharArr.add(mChar5);
                txtCharArr.add(mChar6);
                txtCharArr.add(mChar7);
                txtCharArr.add(mChar8);
                txtCharArr.add(mChar9);
                txtCharArr.add(mChar10);
                txtCharArr.add(mChar11);
                txtCharArr.add(mChar12);
                StringBuilder sb = new StringBuilder();
                for(i=0;i<wordChars.length;i++) {
                    if(wordChars[i]==(word.charAt(i))) {
                        txtCharArr.get(i).setText(word.charAt(i));
                        sb.append(word.charAt(i));
                    }
                }
            }
        }
    }
} 
```

stringbuilder 只是保存所有相等的字符。上面的代码给出了一个错误：

```
03-14 07:44:27.387: E/AndroidRuntime(1893): FATAL EXCEPTION: main
03-14 07:44:27.387: E/AndroidRuntime(1893): java.lang.IllegalStateException: Could not     execute method of the activity
03-14 07:44:27.387: E/AndroidRuntime(1893):     at android.view.View$1.onClick(View.java:3591)
03-14 07:44:27.387: E/AndroidRuntime(1893):     at android.view.View.performClick(View.java:4084)
03-14 07:44:27.387: E/AndroidRuntime(1893):     at android.view.View$PerformClick.run(View.java:16966)
03-14 07:44:27.387: E/AndroidRuntime(1893):     at android.os.Handler.handleCallback(Handler.java:615)
03-14 07:44:27.387: E/AndroidRuntime(1893):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-14 07:44:27.387: E/AndroidRuntime(1893):     at android.os.Looper.loop(Looper.java:137)
03-14 07:44:27.387: E/AndroidRuntime(1893):     at android.app.ActivityThread.main(ActivityThread.java:4745)
03-14 07:44:27.387: E/AndroidRuntime(1893):     at java.lang.reflect.Method.invokeNative(Native Method)
03-14 07:44:27.387: E/AndroidRuntime(1893):     at java.lang.reflect.Method.invoke(Method.java:511)
03-14 07:44:27.387: E/AndroidRuntime(1893):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-14 07:44:27.387: E/AndroidRuntime(1893):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-14 07:44:27.387: E/AndroidRuntime(1893):     at dalvik.system.NativeStart.main(Native Method)
03-14 07:44:27.387: E/AndroidRuntime(1893): Caused by: java.lang.reflect.InvocationTargetException
03-14 07:44:27.387: E/AndroidRuntime(1893):     at java.lang.reflect.Method.invokeNative(Native Method)
03-14 07:44:27.387: E/AndroidRuntime(1893):     at java.lang.reflect.Method.invoke(Method.java:511)
03-14 07:44:27.387: E/AndroidRuntime(1893):     at android.view.View$1.onClick(View.java:3586)
03-14 07:44:27.387: E/AndroidRuntime(1893):     ... 11 more
03-14 07:44:27.387: E/AndroidRuntime(1893): Caused by: android.content.res.Resources$NotFoundException: String resource ID #0x76
03-14 07:44:27.387: E/AndroidRuntime(1893):     at android.content.res.Resources.getText(Resources.java:229)
03-14 07:44:27.387: E/AndroidRuntime(1893):     at android.widget.TextView.setText(TextView.java:3620)
03-14 07:44:27.387: E/AndroidRuntime(1893):     at  me.mikey.my.games.galgjex.Galgje.onClickButtons(Galgje.java:232) 
```

第 232 行是：

```
txtCharArr.get(i).setText(word.charAt(i)); 
```

我也试过：

```
public void onClickButtons(View view) {

        if(view==mBtnGuess) {
            int i;
            String word = "someword";
            String getInput = mEtxtUserInput.getText().toString();
            if(getInput.length()>0) {

                if(getInput.length()==1) {
                    List<TextView> txtCharArr= new ArrayList<TextView>();
                    txtCharArr.add(mChar1);
                    txtCharArr.add(mChar2);
                    txtCharArr.add(mChar3);
                    txtCharArr.add(mChar4);
                    txtCharArr.add(mChar5);
                    txtCharArr.add(mChar6);
                    txtCharArr.add(mChar7);
                    txtCharArr.add(mChar8);
                    txtCharArr.add(mChar9);
                    txtCharArr.add(mChar10);
                    txtCharArr.add(mChar11);
                    txtCharArr.add(mChar12);
                    StringBuilder sb = new StringBuilder();
                    for(i=0;i<getInput.length();i++) {
                        if(getInput.equals(word.charAt(i))) {
                            txtCharArr.get(i).setText(word.charAt(i));
                            sb.append(word.charAt(i));
                        }
                    }
                }
            }
        }
    } 
```

但这并没有显示任何东西。StringBuilder 是空的，当我输入一个应该匹配的字符时，textViews 中没有显示任何字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:41:26.223

因为没有`TextView.setText(char x)`char ，所以您的 char 被强制转换为 int 并被`TextView.setText(int x)`调用，它搜索具有 id 的资源`x`。

您应该将 String 传递给该`setText()`方法。你可以试试

`txtCharArr.get(i).setText(Character.toString(word.charAt(i)));`

或者

`txtCharArr.get(i).setText(word.subString(i, i+1)));`

# labview - 编辑labview数组的内容

> ID：15404480
> 
> 赞同：4
> 
> 时间：2013-03-14T08:36:17.170
> 
> 标签：labview

我正在尝试将特定元素增加 1，以便在结果进入时记录它们。我正在尝试读取一个元素，将其加 1，然后将其写回相同的内存地址。为什么这不简单？

在代码中，它会很简单：

```
array1[element1] = (array1[element1]+1) 
```

或者

```
array1[element1]++ 
```

数组似乎是读取（指标）或写入（控件）？这真是令人沮丧，并且在线帮助很少。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T11:00:35.650

您可以在“就地元素结构”中使用“数组索引/替换”元素：

![就地元素结构的使用](../Images/c1fd6115957f7e6e352b6fcde11ee1a1.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T11:04:33.030

您应该在“阵列”面板中使用 ReplaceArraySubset。对于简单的替换，它比 In Place Element Structure 快得多 ![替换数组子集示例。](../Images/8eaec86b43a6207b3d146210717837f7.png)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-02-10T00:55:12.717

作为一个不常见的 Labview 新手用户，我遇到了同样的问题……直到我找到了 10 年前使用的代码。当然，sgccarey 的答案是：- 右键单击​​数组控件或指示器并“创建局部变量” 此变量将出现在程序框图上，可以根据需要设置为“更改为写入”或“更改为读取”以使用作为简单的“替换数组子集”的输入和/或输出数组。这样阵列数据只会在前面板出现一次，并根据需要进行更新。我不知道使用局部变量是否会影响运行时效率，但它对我有用。希望这可以帮助。

# soap - Dynamics CRM 2011 SOAP 服务/web

> ID：15404484
> 
> 赞同：4
> 
> 时间：2013-03-14T08:36:31.657
> 
> 标签：soap, dynamics-crm-2011

**我在我的Windows Server 2008 R2 服务器**上安装的**本地****Dynamics CRM 2011的****SOAP 服务**有问题。

 ******如果我**用**

```
"http://crmdevsvr/Contoso/XRMServices/2011/Organization.svc" 
```

或者

```
"http://crmdevsvr/Contoso/XRMServices/2011/Organization.svc?wsdl" 
```

它变成了回应。

否则，如果我用我的**Silverlight-Resource**调用我的**SOAP-Service**，它会使用函数 **GetSoapService()**在内部构建一个**URL**

 ******```
"Uri serviceUrl = CombineUrl(GetServerBaseUrl(), "/XRMServices/2011/Organization.svc/web");" 
```

当我尝试调用**URL**时，它不起作用：

```
"http://crmdevsvr/Contoso/XRMServices/2011/Organization.svc/web" 
```

现在，有趣（或不有趣）的问题是，以**/web**结尾的**URL****有时**只能工作。

 ******网址**末尾的**/web**是什么意思？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-06T02:57:32.083

不久前我使用了 /web 端点，这是我的理解：

OrganizationService 是一个服务器端端点，这意味着您需要先在服务器端代码中引用它，然后才能调用 Web 方法。您可以通过将 dll 或 Web 引用添加到您的项目来执行此操作。

如果要从客户端调用 Web 方法，则需要使用 /web 方法。它基本上是 JavaScript 和 Silverlight 的 OrganizationService 方法的包装器。******************

# c++ - 如何为 boolinq 实现 First 和 FirstOrDefault？

> ID：15404486
> 
> 赞同：2
> 
> 时间：2013-03-14T08:36:49.017
> 
> 标签：c++, visual-studio-2010, linq, c++11

我有[boolinq](https://code.google.com/p/boolinq/) - grate 开源 LINQ C++ 实现与 vs2010 兼容。我喜欢它的语法——它看起来和 C# 一样接近（从对[所有其他 VS2010 LINQ C++ 实现](https://stackoverflow.com/questions/232222/is-there-a-linq-library-for-c)的简短了解）。然而，它确实缺少一些基本的 LINQ 函数。我想知道如何实施`.First(lambda expression)`或`.FirstOrDefault(lambda expression)`支持它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:57:43.270

由于 c++ 向量具有`front()`和`empty()`方法，因此您只需执行以下操作：

*   对于`.First(lambda)`，你只需要检查`.Where(lambda).ToVector().empty()`。如果为真则抛出异常，否则返回`.Where(lambda).ToVector().front()`

*   对于`.FirstOrDefault(lambda)`，你只需要检查`.Where(lambda).ToVector().empty()`。如果为真则返回默认值，否则返回`.Where(lambda).ToVector().front()`

# algorithm - 在什么情况下使用这些排序算法？

> ID：15404487
> 
> 赞同：6
> 
> 时间：2013-03-14T08:36:49.513
> 
> 标签：algorithm, sorting, implementation

我知道大多数这些算法的实现，但我不知道将它们用于什么大小的数据集（以及包含的数据）：

1.  合并排序
2.  冒泡排序（我知道，不经常）
3.  快速排序
4.  插入排序
5.  选择排序
6.  基数排序

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T08:43:56.310

首先，您将所有具有`O(n2)`复杂性的排序算法都扔掉。

然后，您必须研究排序算法的几种特性，并确定它们中的每一种是否更适合您要解决的问题。最重要的是：

**算法到位了吗？**这意味着排序算法不使用任何（`O(1)`实际上）额外的内存。当您运行内存关键型应用程序时，此属性非常重要。

冒泡排序、插入排序和选择排序使用常量内存。合并排序也有一个就地变体。

**算法稳定吗？**这意味着如果给定比较方法的两个元素`x`和`y`相等，并且在输入`x`中找到之前`y`，那么在输出`x`中将找到之前`y`。

合并排序、冒泡排序和插入排序是稳定的。

**算法可以并行化吗？**如果您正在构建的应用程序可以使用并行计算，您可能需要选择可并行排序算法。

更多信息[在这里](http://en.wikipedia.org/wiki/Sorting_algorithm)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T09:29:28.937

仅当要排序的数据存储在转鼓内存中时才使用冒泡排序。它最适合该目的，但不适用于随机存取存储器。如今，这相当于“不要使用冒泡排序”。

使用插入排序或选择排序，直到您通过针对您可用的其他排序进行测试而确定的某个大小。这通常是大约 20-30 个项目，但 YMMV。特别是，在实现像合并排序和快速排序这样的分治排序时，当当前数据块足够小时，您应该“突破”到插入排序或选择排序。

还要对几乎排序的数据使用插入排序，例如，如果您以某种方式知道您的数据曾经是排序的，并且此后没有太大变化。

当您需要稳定的排序时使用合并排序（在对链表进行排序时也很好），请注意对于数组，它会使用大量额外的内存。

通常，您根本不使用“普通”快速排序，因为即使智能选择枢轴，它仍然有`Omega(n^2)`最坏的情况，但与插入排序不同，它没有任何有用的最佳情况。“杀手”案例可以系统地构建，因此如果您正在对“不可信”数据进行排序，那么某些用户可能会故意破坏您的性能，并且无论如何可能存在某些特定领域的原因导致您的数据接近杀手案例。如果您选择随机枢轴，那么致命案例的概率可以忽略不计，因此这是一个选项，但通常的方法是“IntroSort”——一种检测不良案例并切换到堆排序的快速排序。

基数排序有点奇怪。很难找到最适合的常见问题，但它对于固定宽度数据（`O(n)`，比较排序是`Omega(n log n)`）具有良好的渐近限制。如果您的数据是固定宽度的，并且输入大于可能值的数量（例如，超过 40 亿个 32 位整数），那么某些种类的基数排序就有可能表现良好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T08:43:36.437

1.  当使用等于数组大小的额外空间时不是问题
2.  仅在非常小的数据集上
3.  当您需要就地排序且不需要稳定排序时
4.  仅在非常小的数据集上，或者如果数组很可能已经排序
5.  仅在非常小的数据集上
6.  当取值范围与项数比值较小时（建议实验）

请注意，通常合并或快速排序实现对子例程中子数组非常小的部分使用插入排序。

# oracle - 在 oracle 查询中复制行

> ID：15404490
> 
> 赞同：-1
> 
> 时间：2013-03-14T08:37:03.163
> 
> 标签：oracle

我要创建一个查询，用于在我们的项目中打印标签，但发现它很困难，因为标签数量的计数是基于字符串的。我做了一个如下所示的查询：

```
SELECT 
  wipdatavalue
  , containername
  , l
  , q as qtybox
  , d
  , qtyperbox AS q
  , productname
  , dt
  , dsn
  , CASE
      WHEN instr(wipdatavalue, '-') = 0
        THEN
          to_number(wipdatavalue)
      ELSE
          to_number(substr(wipdatavalue, 1, instr(wipdatavalue, '-') - 1))
    END AS una
  , CASE
      WHEN instr(wipdatavalue, '-') = 0 
        THEN
          to_number(wipdatavalue)
      ELSE
        to_number(substr(wipdatavalue, instr(wipdatavalue, '-') + 1))
    END AS dulo  
  , ROW_NUMBER() OVER (ORDER BY containername) AS n
  , count(*) over() m
FROM trprinting_ls
WHERE containername = 'TRALTESTU0A'
GROUP BY wipdatavalue, containername, l, q, d, qtyperbox, productname, dt, dsn
ORDER BY wipdatavalue 
```

上面的查询将导致以下结果：

![在此处输入图像描述](../Images/db3e360e806701d223bd34cca76797e1.png)

但实际上，我不仅要显示第一个项目（Wipdatavalue 1-4），还要显示四次才能看起来像这样：

![在此处输入图像描述](../Images/3b222abebeaa361b37691d0272601cbe.png)

我尝试了另一个运行良好的查询，但是当我尝试在我们的项目中加载它时，它不会打印标签。我们发现这是因为 WITH 语句，我们不知道为什么。查询是：

```
WITH DATA (WIPDATAVALUE, CONTAINERNAME, L, Q, D, QTYBOX, PRODUCTNAME, DT, una, dulo, m1, n)
     AS (SELECT WIPDATAVALUE, CONTAINERNAME, L, Q, D, QTYBOX, PRODUCTNAME, DT, una, dulo,(dulo - una) + 1 AS m1,una n
           FROM (SELECT WIPDATAVALUE, CONTAINERNAME, L, Q, D, QTYPERBOX AS QTYBOX, PRODUCTNAME, DT,
                        CASE
                          WHEN instr(wipdatavalue, '-') = 0
                          THEN
                            to_number(wipdatavalue)
                          ELSE
                            to_number(substr(wipdatavalue, 1, instr(wipdatavalue, '-') - 1))
                          END AS una,
                          CASE
                            WHEN instr(wipdatavalue, '-') = 0 
                            THEN
                              to_number(wipdatavalue)
                            ELSE
                              to_number(substr(wipdatavalue, instr(wipdatavalue, '-') + 1))
                          END AS dulo
                   FROM trprinting_ls
                  WHERE containername = 'TRALTESTU0A'
                  )
         UNION ALL
         SELECT WIPDATAVALUE, CONTAINERNAME, L, Q, D, QTYBOX, PRODUCTNAME, DT, una, dulo, m1, n + 1
           FROM DATA
          WHERE n + 1 <= dulo)
SELECT WIPDATAVALUE, CONTAINERNAME, L, Q, D, QTYBOX, PRODUCTNAME, DT, una, dulo, n,
       count(*) OVER () m
FROM DATA
ORDER BY n, wipdatavalue 
```

谢谢大家帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:41:15.277

**试试这个查询**

```
select column_name, count(column_name)
from table
group by column_name
having count (column_name) > 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:23:48.193

试试这个

```
select * 
from your_data
start with instr(Wipdatavalue, '1') > 0
connect by level between regexp_substr(Wipdatavalue, '^\d+') 
and regexp_substr(Wipdatavalue, '\d+$') 
```

这是一个简化的例子

如果您愿意，可以用 substr 和 instr 替换 regexp_substr（也可能更快）

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/d54e2/4)

# javascript - 绑定、应用和调用方法之间的区别？

> ID：15404493
> 
> 赞同：12
> 
> 时间：2013-03-14T08:37:14.157
> 
> 标签：javascript

我在 stackoverflow 和网络上搜索，无法得到正确的结果或解释这三种方法之间的位置差异。

据我了解，他们都执行相同的操作`function/method in different context.`

```
var google = {  
    makeBeer : function(arg1,arg2){     
         alert([arg1, arg2]);        
    }    
}

google.makeBeer('water','soda'); 
```

这是我的google对象的正常功能。现在，当我在这里使用调用和绑定方法时，这是输出。

```
var google = {
    makeBeer: function (arg1, arg2) {
        alert([arg1, arg2]);
    }
}

google.makeBeer('water', 'soda');

function yahoo() {}

var yah = new yahoo();
google.makeBeer.call(yah, 'pepsi', 'coke');

function msn() {

}

var msn = new msn();
google.makeBeer.call(msn, 'sprite', 'limca'); 
```

我仍然没有看到这样做的目的，我可以继续打电话给`google.makeBeer three times with different arguments.`

任何人都可以在这方面给我更多启发。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T12:58:04.077

`apply`并且`call`是相同的东西，除了一个接受要以数组形式传递给函数的参数，另一个接受参数形式。

`bind`与您使用的框架执行相同的操作`call`或`apply`根据您使用的框架执行相同的操作，但不会立即调用该函数，而是返回一个绑定了您的参数的新函数，`this`并且当从新范围或上下文调用该函数时，`this`仍将保持不变你绑定到它。绑定还允许您防止您的构造函数被`apply`or “黑客”，`call`因为`this`无论有人发送什么试图`this`通过`call`or覆盖它，它都将始终使用绑定的参数`apply`。

这是一个例子：

```
function Profile(u) {
    this.user = u;
    this.getUser = function () {
        return this.user;
    };
}

function Profile2(u) {
    this.user = u;
    this.getUser = (function () {
        return this.user;
    });
}

function Profile3(u) {
    this.user = u;
    this.getUser = (function () {
        return this.user;
    });
}

var x = new Profile('guest');
var x2 = new Profile2('guest');
var x3 = new Profile3('guest');

alert(x.getUser.apply({
    user: 'Vinoth'
})); // Vinoth
alert(x2.getUser.call({
    user: 'Babu'
})); // babu
alert(x3.getUser.bind(x3).call({
    user: 'Nandan'
})); // Guest 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T08:43:35.867

`bind`创建一个具有相同函数体的新函数，然后返回新函数
`call`在不同的传递上下文中调用相同的函数，并且必须显式编写参数 在不同的传递上下文中 `apply`调用相同的函数，但参数必须在数组

```
var f = function(p1, p2) {
    var s = this;
}

var newFunc = f.bind(window, 1, 2);
// here newFunc is a function which when you will call will have this as window and p1 = 1 and p2 = 2

f.call(window, 1, 2);
// by executing this line this = window p1 = 1 and p2 = 2

f.call(document, 2, 3);
// by executing this line this = document p1 = 2 and p2 = 3

f.apply(window, [1, 2]);
// by executing this line this = window p1 = 1 and p2 = 2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T08:45:53.457

简单地说 apply() 和 call() 之间没有区别，唯一不同的是您传递的参数。在 apply() 中，您必须将参数作为数组传递，而在 call() 方法中，您以逗号分隔的形式传递参数.

说到 bind 方法，这是 EcmaScript5 中引入的新方法，专门用于`this`在调用 objects 方法时解析作用域。`this`在异步方法调用中特别有用。

# java - 如何在我的 Android 代码中删除 [[ , , , , ]]

> ID：15404495
> 
> 赞同：-2
> 
> 时间：2013-03-14T08:37:21.510
> 
> 标签：java, android, random

我需要`[[, , , ,]]`在生成的随机数的输出中删除。

我的代码如下：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final Random myRandom = new Random();

    Button buttonGenerate = (Button)findViewById(R.id.generateme);
    final TextView textGenerateNumber = (TextView)findViewById(R.id.generatenumber);

    buttonGenerate.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {
            ArrayList<Object> Arry1 = new ArrayList<Object>();
            for(int i=0;i<1;i++){
                ArrayList<Integer> Arry = new ArrayList<Integer>();
                for(int k=0;k<7;k++){
                    Arry.add(myRandom.nextInt(10));
                }
                Arry1.add(Arry);
            }
            textGenerateNumber.setText(String.valueOf(Arry1));
        }
    });  
} 
```

![这是模拟器上的输出](../Images/ec3b4e26d65b41067f2fe12e13637919.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:41:32.980

您的代码没有任何意义，因此我建议您阅读更多（并查看示例）关于 java 变量类型和数组的内容。

对于您的要求，您可以使用：

```
 @Override
     public void onClick(View v) {
         String text = "";
         for(int k=0;k<6;k++){
             text += myRandom.nextInt(10)) + " ";
         }
         text += myRandom.nextInt(10))
         textGenerateNumber.setText(text);
     } 
```

这将输出所有以空格分隔的数字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:41:56.303

```
StringBuilder builder = new StringBuilder();
for(Integer i : Arry) {
    builder.append(i);
}
textGenerateNumber.setText(builder.toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T08:42:52.880

将您的随机生成代码更改为：

```
 String rand = "";

               for(int k=0;k<7;k++){
                   rand += myRandom.nextInt(10);
               }                       

               textGenerateNumber.setText(rand); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T08:44:03.760

您可以使用一个简单的逻辑 -

```
String concat ="";
for(int i = 0;i<Arry1.length;i++)
{
   concat = concat + Arry1[i];
} 
```

前

```
textGenerateNumber.setText(concat); 
```

希望这可以帮到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T08:49:06.120

```
buttonGenerate.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        StringBuilder builder = new StringBuilder();

        for (int k = 0; k < 6; k++) {
            builder.append(myRandom.nextInt(10));
            builder.append(" ");
        }

        builder.append(myRandom.nextInt(10));

        textGenerateNumber.setText(builder.toString());
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T08:49:46.157

可以`replaceAll("\\[", "").replaceAll("\\]","").replace(",", "");`如下图使用

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final Random myRandom = new Random();

    Button buttonGenerate = (Button)findViewById(R.id.generateme);
    final TextView textGenerateNumber = (TextView)findViewById(R.id.generatenumber);

    buttonGenerate.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {
            ArrayList<Object> Arry1 = new ArrayList<Object>();
            for(int i=0;i<1;i++){
                ArrayList<Integer> Arry = new ArrayList<Integer>();
                for(int k=0;k<7;k++){
                    Arry.add(myRandom.nextInt(10));
                }
                Arry1.add(Arry);
            }

            String value = String.valueOf(Arry1);//changes here
            value = value.replaceAll("\\[", "").replaceAll("\\]","").replace(",", "");//changes here

            textGenerateNumber.setText(value );
        }
    });  
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-14T08:54:29.663

Android 中有一个专门的方法，TextUtils.join。

我不会复制文档，但简而言之，它通过将列表和数组与链接字符串连接起来来格式化它们。

通常，

```
int[] ints = new int[] {1, 2, 3, 4}
Log.d("", TextUtils.join(ints, " - ")); 
```

结果是

```
1 - 2 - 3 - 4 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-14T08:42:30.003

所以只需一个一个打印数字

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final Random myRandom = new Random();

     Button buttonGenerate = (Button)findViewById(R.id.generateme);
    final TextView textGenerateNumber = (TextView)findViewById(R.id.generatenumber);

    buttonGenerate.setOnClickListener(new OnClickListener(){

             @Override
             public void onClick(View v) {
                 ArrayList<Object> Arry1 = new ArrayList<Object>();
                    for(int i=0;i<1;i++){
                   ArrayList<Integer> Arry = new ArrayList<Integer>();
                   for(int k=0;k<7;k++){
                       textGenerateNumber.setText(myRandom.nextInt(10));
                   }
                       Arry1.add(Arry);
                   }

                       }
                       });  
                    }
                 } 
```

# c# - 实体框架表主键

> ID：15404500
> 
> 赞同：1
> 
> 时间：2013-03-14T08:37:29.853
> 
> 标签：c#, asp.net, entity-framework

这是我的桌子

信息 ![在此处输入图像描述](../Images/a4bc4bb1529c81281b2752541ad46c46.png)

人

![在此处输入图像描述](../Images/818c57f85e27513a7eb305a8200f3ac3.png)

这是我的 Gridview 源

```
<asp:TemplateField ShowHeader="False">
            <ItemTemplate>
                <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" 
                    CommandName="Select" Text="Select"></asp:LinkButton>
                <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                    CommandName="Delete" Text="Delete"></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="RecipientID" SortExpression="Person.LastName">
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%# Bind("Person.LastName") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="Subject" HeaderText="Subject" 
            SortExpression="Subject" />
        <asp:BoundField DataField="Message1" HeaderText="Message" 
            SortExpression="Message1" />
        <asp:BoundField DataField="Status" HeaderText="Status" 
            SortExpression="Status" />
        <asp:BoundField DataField="Date" HeaderText="Date" SortExpression="Date" />
        <asp:TemplateField HeaderText="SenderID" SortExpression="Person.LastName">
            <ItemTemplate>
                <asp:Label ID="Label2" runat="server" Text='<%# Bind("Person.LastName") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField> 
```

这是结果 ![在此处输入图像描述](../Images/f0522d2ac7ce08c77afe74e632d42c31.png)

你们能帮我显示发件人的名字吗？:) 提前谢谢你们！我正在使用实体数据源

**更新**

我以用户 Carlo 的身份登录

![在此处输入图像描述](../Images/7897a548f78dc9558477ec9b0014d93b.png)

发件人在消息表中显示登录的用户而不是真正的发件人

这是我的实体模型

![在此处输入图像描述](../Images/7593aacb08d3f4cec2189a95a6cd6e2f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:37:40.967

您已经获得了所需的导航属性，但它们的名称隐藏了它们的作用。你`Message.Person`用来获取发件人的姓名，同样你可以用用户`Message.Person1`来获取收件人的姓名。

我会分别将属性`Person`和重命名`Person1`为`Sender`和`Recipient`。因此，它们匹配原始外键名称`SenderID`和`RecipientID`. 同样，您可以将`Person.Messages`属性重命名为`MessagesSent`and `MessagesReceived`。

在模板中，您可以使用`Sender.LastName`和`Recipient.LastName`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:44:11.150

使用此查询

```
select m.MessageID,m.ReceipientID,m.Subject,m.senderID,p.UserName,p.FirseName from Message m inner join Person p on m.SenderID= p.ID 
```

# git - 将源代码树与 git 存储库进行比较？

> ID：15404505
> 
> 赞同：0
> 
> 时间：2013-03-14T08:37:57.480
> 
> 标签：git

我们有一个接收后挂钩，可以将源代码放入特定的工作树中。其中一部分看起来像这样：

```
git --work-tree=$ur checkout -f $b
echo "-- your changes were checked out to UAT: branch $b: root: $ur" 
```

我们如何查看是否有人更改了此目录中的文件？

我试过这个：

```
git --git-dir=$repo --work-tree=$work_tree  status 
```

更改了一个文件，尽管未标记更改的文件。

```
# On branch 1.1.x
nothing to commit (working directory clean) 
```

这确实会检测到新文件，但不会检测到更改的文件。例如，一个新文件给出：

```
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#    web/sites/what.txt
nothing added to commit but untracked files present (use "git add" to track) 
```

git 版本是 1.7.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:13:07.983

我正在测试更改的文件位于 .gitignore

# c# - 设置网络摄像头属性

> ID：15404508
> 
> 赞同：1
> 
> 时间：2013-03-14T08:38:25.097
> 
> 标签：c#, webcam

我正在编写一个`Windows Form`与网络摄像头通信的 C# 应用程序。

但是，我想在按钮`click`功能中调整网络摄像头属性。`brightness`这些属性的示例是`saturation`和`sharpness`。

我发现`IAMVideoProcAmp::Set`这可能对我有帮助。但是，我不太明白如何实现这一点。任何人都可以帮助我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:40:06.930

您需要做的是包装对某些 API（无论是 Windows、DirectX 等）的调用，这对于 C# 来说说起来容易做起来难。

幸运的是，这个问题已经解决了很多次（正如您可以通过此处的网络摄像头问题看到的那样） - 您可以在以下文章中找到一种好方法： [Versatile WebCam C# library](http://www.codeproject.com/Articles/125478/Versatile-WebCam-C-library)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:02:34.320

查看“[如何以编程方式更改对比度和饱和度？](http://social.msdn.microsoft.com/Forums/en-US/windowsdirectshowdevelopment/thread/de6cc000-93b9-457d-85c2-97589fde38c1/) ”

# c# - 通过 windowclass 名称和窗口名称查找进程，但如果 wname 更改了怎么办

> ID：15404514
> 
> 赞同：0
> 
> 时间：2013-03-14T08:38:51.990
> 
> 标签：c#, process, system.diagnostics

我有一个通过窗口类名称和窗口名称查找进程的函数，但有时用户正在更改窗口名称，而我的函数什么也不做。

有没有其他方法可以找到这个过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:48:52.723

您可以使用`System.Diagnostics.Process`类来查找进程，然后您可以使用 WindowName、Handle、Module 等查找。

```
var process = System.Diagnostics.Process.GetProcessesByName("MyProcess").FirstOrDefault();

var process = System.Diagnostics.Process.GetProcesses().FirstOrDefault(p => p.Modules[0].ModuleName == "MyModule");

var process = Process.GetProcesses().FirstOrDefault(p => p.MainWindowTitle == "NotePad");
if (process != null)
{
    SetWindowPos(process.MainWindowHandle);
} 
```

等等。

# python - Python Socket 异步收发设计

> ID：15404517
> 
> 赞同：4
> 
> 时间：2013-03-14T08:39:19.797
> 
> 标签：python, sockets

我正在编写一个 python 套接字客户端

1.  每 5 秒发送一次`message one`（例如 Hello），每15 秒发送一次`message two`（例如 15 秒）
2.  随时接收消息

我的意思是在不同的线程中进行发送和接收。但是，它仍然处于阻塞状态。有人有建议吗？

线程#1

```
threading.Thread(target=Thread2, args=(sock)).start()
sock.recv(1024) 
```

线程#2

```
def Thread2(sock):
    count = 0
    while True:
        sleep(5)
        count = count + 5
        sock.send('Hello')
        if count % 15 == 0
            sock.send('15 seconds') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:38:06.233

它没有阻塞。只是你的主线程在 first 之后什么都不做`sock.recv(1024)`。您必须告诉它不断收集数据：

**主线**

```
threading.Thread(target=Thread2, args=(sock,)).start()
while True:
    data = sock.recv(1024)
    if not data:
        break
    print data 
```

请注意，您将无法轻松中断该过程。为此，您需要将线程设置为守护进程：

**主线**

```
t = threading.Thread(target=Thread2, args=(sock,))
t.daemon = True
t.start()
while True:
    data = sock.recv(1024)
    if not data:
        break
    print data 
```

另外，当您传递时，`args`请记住传递一个元组，即`args=(sock,)`而不是`args=(sock)`. 对于 Python `args=(sock)`，相当于`args=sock`. 这大概就是罪魁祸首吧！

我在您的代码中看不到更多问题。

# google-chrome - Chrome 扩展同步 IndexedDB

> ID：15404518
> 
> 赞同：2
> 
> 时间：2013-03-14T08:39:23.530
> 
> 标签：google-chrome, google-chrome-extension, sync, indexeddb

从 Chrome 扩展同步 indexeddb 数据的最有效方法是什么？

*   第一个也是最明显的选择是使用[chrome.storage.sync](https://developer.chrome.com/extensions/storage.html)。
*   第二个想法是使用[chrome.syncFileSystem](http://developer.chrome.com/dev/apps/syncFileSystem.html)并将数据库转储到 json 中。
*   还有第三个选项可以使用我不想使用的第三方服务器。

问题是数据库可以包含数千条记录以及多个索引等，所以我认为前两个选择都不是有效的。并不是说 chrome.storage 只是一个本地存储，并且将数据转储并解析为 json 以供第二选择会变得非常混乱和低效。

# jquery - CSS关键帧动画：动画开始前隐藏元素

> ID：15404520
> 
> 赞同：12
> 
> 时间：2013-03-14T08:39:44.460
> 
> 标签：jquery, css, css-animations

有没有一种 CSS 方法可以隐藏一个元素并在 x 秒后用关键帧动画淡入它？或者我需要 JavaScript/jQuery 吗？怎么做？

目前，它也是在动画开始之前显示，如果我设置`opacity: 0;`，动画完成后动画会跳回到那个值。

[小提琴](http://jsfiddle.net/uKe2t/)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-14T10:48:05.110

你很亲密。一种简单的方法是添加`animation-fill-mode: forwards;`将保留最后一个关键帧的内容，在这种情况下保持 div 可见。

[这是您的Fiddle](http://jsfiddle.net/uKe2t/2/)的更新版本，其中动画在 4 秒后开始（如您指定）并保持 div 可见而不是跳回其原始状态（`opacity: 0;`）。

希望有帮助！

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-08-26T18:12:17.193

最简单的方法就是将其添加到 CSS 中：

```
 animation-fill-mode: both; 
```

将保持动画前后。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-14T08:52:26.350

如果要使用`@keyframes`，请使用关键帧应用延迟。

您可以将 4 秒的延迟和 1 秒的动画持续时间更改为 5 秒的动画，其中关键帧从 80% 开始。

见[小提琴](http://jsfiddle.net/88G8P/)。

```
@-webkit-keyframes slidein {
    0% { opacity: 0; }
    80% { opacity: 0; }
    100% { opacity: 1; }
}

@-moz-keyframes slidein {
    0% { opacity: 0; }
    80% { opacity: 0; }
    100% { opacity: 1; }
}

@-o-keyframes slidein {
    0% { opacity: 0; }
    80% { opacity: 0; }
    100% { opacity: 1; }
}

@keyframes slidein {
    0% { opacity: 0; }
    80% { opacity: 0; }
    100% { opacity: 1; }
}

div {
    position: absolute;
    width: 50px;
    height: 50px;
    top: 150px;
    right: 150px;
    background-color: black;
    -webkit-animation: slidein 5s ease 1 normal;
       -moz-animation: slidein 5s ease 1 normal;
         -o-animation: slidein 5s ease 1 normal;
            animation: slidein 5s ease 1 normal;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-15T15:33:10.400

如果您希望您的动画与使用不透明度的淡入不同，例如为宽度设置动画；你可以把`opacity:1;`动画的 1% 放在上面：

```
@keyframes slidein {
  0% {
    opacity:0;
    width:0;
  }
  1% {
    opacity:1;
  }
  100% {
    opacity:1;
    width:100px;
  }
} 
```

请注意，您必须`opacity:1;`在动画结束时重复 ，即 100%。否则它将淡出该元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T08:45:46.193

您可能正在考虑使用[CSS 过渡](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transitions)- 此页面可能有您正在寻找的答案。

# json - 具有一个元素的 jaxb 列表

> ID：15404528
> 
> 赞同：3
> 
> 时间：2013-03-14T08:40:08.577
> 
> 标签：json, list, jaxb, singleton

我生成带有 List<> 成员的 JSON。它被编组了。

但是，当列表只有一个元素时，我的消费（第三方）方抱怨缺少 [] 对。我生产的是这样的：

```
"mylist":{"id":104,"name":"Only one found"} // produced 
```

而我的消费者期望：

```
"mylist":[{"id":104,"name":"Only one found"}] // expected by third party 
```

我的实现是否产生了不正确的 JSON？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:22:28.883

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

JAXB (JSR-222) 规范不包括 JSON 绑定。您看到的行为很可能是因为 JAXB 实现与 Jettison 之类的库一起使用。Jettison 将 StAX 事件转换为 JSON 或从 JSON 转换，并且只能在元素出现多次时检测列表（请参阅： [http](http://blog.bdoughan.com/2011/04/jaxb-and-json-via-jettison.html) ://blog.bdoughan.com/2011/04/jaxb-and-json-via-jettison.html ） . EclipseLink JAXB 提供原生 JSON 绑定，可以正确表示大小为 1 的数组。

**JAVA模型**

**富**

```
import java.util.List;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Foo {

    private List<Bar> mylist;

} 
```

**酒吧**

```
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Bar {

    private int id;
    private String name;

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅：[http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -你的.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)）：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示代码**

**演示**

```
import java.util.*;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(2);
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Foo.class}, properties);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StreamSource json = new StreamSource("src/forum15404528/input.json");
        Foo foo = unmarshaller.unmarshal(json, Foo.class).getValue();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(foo, System.out);
    }

} 
```

**输入.json/输出**

我们看到`mylist`正确地表示为 JSON 数组。

```
{
   "mylist" : [ {
      "id" : 104,
      "name" : "Only one found"
   } ]
} 
```

**附加信息**

*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)
*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)

# ruby-on-rails - 自定义 Rails 路线不使用 :id 列

> ID：15404531
> 
> 赞同：0
> 
> 时间：2013-03-14T08:40:23.440
> 
> 标签：ruby-on-rails, routes

我正在尝试创建一个自定义 rails 路线，允许我根据 url 显示信息。例如，我在具有`category_id`s 和`country`of origin 字段的数据库中有产品。我希望能够输入类似`/products/(category_id)/canada`或其他内容来列出与该类别和国家匹配的项目，但是我的尝试（显然）没有成功。

到目前为止，我已经尝试过

```
match 'products/:category_id/:country', to: "products#var_show" 
```

并没有运气。

我什至只是尝试创建一条通过序列码显示产品的路线，但即使我在路线和控制器中指定了该字段，rails 似乎认为我正在寻找一个 id。

```
match 'products/:serial', to: "products#show" 
```

有人可以引导我朝着正确的方向前进并告诉我我做错了什么吗？谢谢。

**编辑：**

无论我在路由和控制器中如何称呼它，Rails 似乎都会设置参数 :id

```
Processing by ProductsController#show as HTML
Parameters: {"id"=>"481598745"} 
```

理想情况下，这将是`Parameters : {"serial" => "481598745"}` 我询问的第二种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:03:40.730

试试这个，

```
match 'products/:category_id/:country' => 'products#show',:as => :show 
```

# c# - WP8 页面转换缓慢

> ID：15404532
> 
> 赞同：2
> 
> 时间：2013-03-14T08:40:27.070
> 
> 标签：c#, windows-phone-8

我正在开发一个应用程序，该应用程序由 PivotControl 中的多个 PivotElements（大约 5 个）组成，每个 PivotElements 都包含一个 LongListSelector（点击时）会打开另一个页面，其中包含有关所选项目的详细信息（项目由 3 个标签和一个图像组成）。

页面到详细信息页面的过渡已经很慢（这意味着 SlideIn/SlideOut 动画之间有片刻的黑屏，只是有点太长了），但返回到数据透视页面的过渡时间更长。

在这种情况下，有什么方法可以提高性能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T06:58:38.540

减少 Visual Tree 中的元素数量，显然布局传递花费的时间太长。My first step would be loading and unloading the LLS's on demand, when that pivot is selected.

# git - 如何 git reset --hard 一个子目录？

> ID：15404535
> 
> 赞同：247
> 
> 时间：2013-03-14T08:40:35.827
> 
> 标签：git, reset, git-reset, sparse-checkout

> **更新²**：使用 Git 2.23（2019 年 8 月），有一个新命令`git restore`可以执行此操作，请参阅[接受的答案](https://stackoverflow.com/a/15404733/946850)。
> 
> **更新**：从 Git 1.8.3 开始，这将更直观地工作，请参阅[我自己的答案](https://stackoverflow.com/a/16589534/946850)。

想象以下用例：我想删除 Git 工作树的特定子目录中的所有更改，而保留所有其他子目录不变。

*   我可以`git checkout .`，但是[git checkout 。添加稀疏结帐排除的目录](https://stackoverflow.com/questions/15251638/git-checkout-adds-directories-excluded-by-sparse-checkout)

*   有`git reset --hard`，但它不会让我为子目录这样做：

    ```
    > git reset --hard .
    fatal: Cannot do hard reset with paths. 
    ```

    再次：[为什么 git 不能通过路径进行硬/软重置？](https://stackoverflow.com/questions/11200839/why-git-cant-do-hard-soft-resets-by-path)

*   我可以使用 反向修补当前状态`git diff subdir | patch -p1 -R`，但这是一种相当奇怪的方法。

此操作的正确 Git 命令是什么？

下面的脚本说明了这个问题。在注释下方插入正确的命令`How to make files`——当前命令将恢复`a/c/ac`应该被稀疏检出排除的文件。请注意，我*不想*显式恢复`a/a`and `a/b`，我只“知道”`a`并想恢复下面的所有内容。**编辑**：而且我也不“知道” `b`，或者哪些其他目录与`a`.

```
#!/bin/sh

rm -rf repo; git init repo; cd repo
for f in a b; do
  for g in a b c; do
    mkdir -p $f/$g
    touch $f/$g/$f$g
    git add $f/$g
    git commit -m "added $f/$g"
  done
done
git config core.sparsecheckout true
echo a/a > .git/info/sparse-checkout
echo a/b >> .git/info/sparse-checkout
echo b/a >> .git/info/sparse-checkout
git read-tree -m -u HEAD
echo "After read-tree:"
find * -type f

rm a/a/aa
rm a/b/ab
echo >> b/a/ba
echo "After modifying:"
find * -type f
git status

# How to make files a/* reappear without changing b and without recreating a/c?
git checkout -- a

echo "After checkout:"
git status
find * -type f 
```

* * *

## 回答 #1

> 赞同：248
> 
> 时间：2013-03-14T08:51:14.530

使用 Git 2.23（2019 年 8 月），您将拥有[新命令`git restore`](https://stackoverflow.com/a/57066072/6309)（也在[此处介绍](https://stackoverflow.com/a/58003889/6309)）

```
git restore --source=HEAD --staged --worktree -- aDirectory
# or, shorter
git restore -s@ -SW  -- aDirectory 
```

这将用内容替换索引和工作树`HEAD`，就像`reset --hard`一个特定的路径一样。

* * *

原始答案（2013）

请注意（如[Dan Fabulich](https://stackoverflow.com/users/54829/dan-fabulich)所[评论](https://stackoverflow.com/questions/11200839/why-git-cant-do-hard-soft-resets-by-path#comment17212802_11200860)）：

*   `git checkout -- <path>`不进行硬重置：它将工作树内容替换为暂存内容。
*   `git checkout HEAD -- <path>`对路径进行硬重置，用`HEAD`提交中的版本替换索引和工作树。

正如[Ajedi32](https://stackoverflow.com/users/1157054/ajedi32)[回答](https://stackoverflow.com/a/27988725/6309)的那样，两种结帐表格**都不会删除在目标修订中删除的文件**。 如果工作树中有 HEAD 中不存在的额外文件，则不会删除它们。 **`git checkout HEAD -- <path>`**

 **注意：使用[`git checkout --overlay HEAD -- <path>`(Git 2.22, Q1 2019)](https://stackoverflow.com/a/55083251/6309)，会删除出现在索引和工作树中但不在其中的`<tree-ish>`文件，以使它们`<tree-ish>`完全匹配。

但是该结帐可以尊重 a `git update-index --skip-worktree`（对于您想要忽略的那些目录），如“[为什么排除的文件不断重新出现在我的 git sparse 结帐？](https://stackoverflow.com/questions/11148579/why-do-excluded-files-keep-reappearing-in-my-git-sparse-checkout) ”中所述。

* * *

## 回答 #2

> 赞同：138
> 
> 时间：2013-05-16T14:00:27.297

根据 Git 开发人员 Duy Nguyen 的说法，他善意地实现[了该功能和兼容性开关，从](https://git.coe.so/git/commit/?id=08d595dc1cdf6f0d8e6022a69c4fcdd2fba628cf)[Git 1.8.3 开始](https://github.com/git/git/blob/master/Documentation/RelNotes/1.8.3.txt)，以下工作按预期工作：

```
git checkout -- a 
```

（`a`您要硬重置的目录在哪里）。可以通过以下方式访问原始行为

```
git checkout --ignore-skip-worktree-bits -- a 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2013-03-16T22:26:45.180

尝试改变

```
git checkout -- a 
```

到

```
git checkout -- `git ls-files -m -- a` 
```

从 1.7.0 版本开始，Git[采用了 skip-worktree 标志](https://github.com/git/git/commit/b4d1690df11ae6ce382b93778616b1a20f1774ff)。[`ls-files`](https://www.kernel.org/pub/software/scm/git/docs/git-ls-files.html)

运行你的测试脚本（有一些小的调整改变`git commit`... 到`git commit -q`和`git status`到`git status --short`）输出：

```
Initialized empty Git repository in /home/user/repo/.git/
After read-tree:
a/a/aa
a/b/ab
b/a/ba
After modifying:
b/a/ba
 D a/a/aa
 D a/b/ab
 M b/a/ba
After checkout:
 M b/a/ba
a/a/aa
a/c/ac
a/b/ab
b/a/ba 
```

`checkout`使用建议的更改输出运行测试脚本：

```
Initialized empty Git repository in /home/user/repo/.git/
After read-tree:
a/a/aa
a/b/ab
b/a/ba
After modifying:
b/a/ba
 D a/a/aa
 D a/b/ab
 M b/a/ba
After checkout:
 M b/a/ba
a/a/aa
a/b/ab
b/a/ba 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-01-16T16:45:17.727

对于简单地丢弃更改的情况，其他答案建议的`git checkout -- path/`or`git checkout HEAD -- path/`命令效果很好。但是，当您希望将目录重置为 HEAD 以外的修订版时，该解决方案存在一个重大问题：它不会删除在目标修订版中删除的文件。

因此，我开始使用以下命令：

> [`git diff`](http://git-scm.com/docs/git-diff) `--cached` *`commit`* `--` *`subdir`* `|` [`git apply`](http://git-scm.com/docs/git-apply) `-R --index`

这是通过查找目标提交和索引之间的差异，然后将该差异反向应用到工作目录和索引来实现的。基本上，这意味着它使索引的内容与您指定的修订内容相匹配。采用路径参数的事实`git diff`允许您将此效果限制为特定文件或目录。

由于这个命令相当长并且我打算经常使用它，我为它设置了一个别名，我将其命名为`reset-checkout`：

```
git config --global alias.reset-checkout '!f() { git diff --cached "$@" | git apply -R --index; }; f' 
```

你可以像这样使用它：

```
git reset-checkout 451a9a4 -- path/to/directory 
```

要不就：

```
git reset-checkout 451a9a4 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-09-13T23:21:27.123

我将在这里提供一个糟糕的选择，因为我不知道如何用 git 做任何事情，除了`add` `commit`and `push`，这就是我“恢复”子目录的方式：

我在本地 pc 上启动了一个新的存储库，将整个内容还原为我想要从中复制代码的提交，然后将这些文件复制到我的工作目录中，`add` `commit` `push`等等。不要恨玩家，恨 Torvalds 先生比我们都聪明。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-16T22:26:00.547

重置通常会改变一切，但您可以使用它[`git stash`](https://www.kernel.org/pub/software/scm/git/docs/git-stash.html)来选择您想要保留的内容。正如您所提到的，`stash`它不直接接受路径，但它仍然可以用于保留带有`--keep-index`标志的特定路径。在您的示例中，您将隐藏 b 目录，然后重置其他所有内容。

```
# How to make files a/* reappear without changing b and without recreating a/c?
git add b               #add the directory you want to keep
git stash --keep-index  #stash anything that isn't added
git reset               #unstage the b directory
git stash drop          #clean up the stash (optional) 
```

这使您到达脚本的最后一部分将输出以下内容的地步：

```
After checkout:
# On branch master
# Changes not staged for commit:
#
#   modified:   b/a/ba
#
no changes added to commit (use "git add" and/or "git commit -a")
a/a/aa
a/b/ab
b/a/ba 
```

我相信这是目标结果（b 保持修改，a/* 文件返回，a/c 未重新创建）。

这种方法的另一个好处是非常灵活。您可以根据需要在目录中添加特定文件，但不能添加其他文件。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-07-07T18:37:32.170

如果子目录的大小不是特别大，并且您希望远离 CLI，这里有一个**手动**重置子目录的快速解决方案：

1.  切换到 master 分支并复制要重置的子目录。
2.  现在切换回您的功能分支并将子目录替换为您刚刚在步骤 1 中创建的副本。
3.  提交更改。

干杯。您只需手动将功能分支中的子目录重置为与主分支相同！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-01-03T14:55:34.947

[Ajedi32](https://stackoverflow.com/users/1157054/ajedi32)的[答案](https://stackoverflow.com/a/27988725/559811)是我一直在寻找的，但是对于某些提交，我遇到了这个错误：

`error: cannot apply binary patch to 'path/to/directory' without full index line`

可能是因为该目录的某些文件是二进制文件。将“--binary”选项添加到 git diff 命令修复它：

```
git diff --binary --cached commit -- path/to/directory | git apply -R --index 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-19T14:23:18.567

关于什么

```
subdir=thesubdir
for fn in $(find $subdir); do
  git ls-files --error-unmatch $fn 2>/dev/null >/dev/null;
  if [ "$?" = "1" ]; then
    continue;
  fi
  echo "Restoring $fn";
  git show HEAD:$fn > $fn;
done 
```**

# android - 作为蜂窝/移动服务提供商，我如何在不要求用户输入身份验证信息的情况下安全地识别用户？

> ID：15404538
> 
> 赞同：0
> 
> 时间：2013-03-14T08:40:41.890
> 
> 标签：android, mobile

蜂窝移动数据提供商如何在他们提供的 Android 应用程序中安全地识别用户，而无需在他们的数据网络（不是 wifi）上询问用户名和密码？

这通常是蜂窝/移动运营商提供的数据使用应用程序的情况。

# python - 为什么我得到“无”

> ID：15404544
> 
> 赞同：3
> 
> 时间：2013-03-14T08:40:57.897
> 
> 标签：python, function, return, calculator, addition

```
from __future__ import division
from math import*

def add(*args):
    return sum(args)

def times(*args):
    s=1
    for i in range(len(args)-1):
        s*=args[i]*args[i+1]
    return s

def divide(*args):
    s=1
    for i in range(len(args)-1):
        s=args[i]/args[i+1]/s
    return s

def sqroot(arg):
    return sqrt(arg)

def get(data,s):
   if len(data)==1:
        s=add(s,int(data))
        return s

    s=add(s,int(data[data.index('+')-1]))
    cut=data[(data.index('+')+1):]
    get(cut,s)

user=raw_input()
print str(get(user,0)) 
```

为什么函数返回`None`而不是`s` *（如果我打印`s`的值是正确的）的值*？该函数只是解析一个表达式，如`1+1+1`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:45:56.783

如果 len > 1，您忘记返回值。试试这个：

```
def get(data,s):
    if len(data) == 1:
        return add(s, int(data))

    s = add(s, int(data[data.index('+')-1]))
    cut = data[(data.index('+')+1):]
    return get(cut,s) 
```

您还需要考虑字符串拆分，您的索引不安全。您可以查看 RPN 或至少尝试类似的方法（如果您的 expr 只有 +）：

```
add(*[int(x) for x in data.split('+')]) 
```

# android - 相机图片到位图导致图像混乱

> ID：15404547
> 
> 赞同：13
> 
> 时间：2013-03-14T08:41:16.757
> 
> 标签：android, bitmap, android-camera

这是我用来将图像保存到`Bitmap`. 这段代码是基于 CyanogenMod 的相机应用程序的代码，所以我认为它可以正常工作，但不是。关于这个问题最重要的一点是，在 Nexus 4 上进行测试时，*`Bitmap`可以为使用后置摄像头拍摄的照片正确创建，但使用前置摄像头会导致您在下面看到的内容。*

我用来创建的代码`Bitmap`：

```
private class XyzPictureCallback implements Camera.PictureCallback {

    @Override
    public void onPictureTaken (byte [] data, Camera camera) {
        Options options = new Options();
        options.inDither = false;
        options.inPreferredConfig = Bitmap.Config.ARGB_8888;

        Bitmap image = BitmapFactory.decodeByteArray(data, 0, data.length, options);
    }
} 
```

我尝试使用不同的`Options`（根本没有），但没有帮助。这可能与两个不同相机返回的像素格式有关，但是当我运行`getSupportedPictureFormats()`它们时它们都返回了`ImageFormat.JPEG`......

我的想法不多了...

我可能还应该提到`data`直接使用 a保存`FileOutputStream`是创建正确的 JPEG 图像。所以问题一定出`BitmapFactory`在我创建`Bitmap`.

这是此代码生成的位图：

![损坏的图像](../Images/064f8d2fb107bbb143bd5af37f487eff.png)

**编辑（24.03.2013）：**

在花了几个小时试图解决这个问题后，我仍然没有真正的解决方案。我发现只有当我将图片大小（使用`Camera.Parameters.setPictureSize(int width, int height)`）设置为前置摄像头可用的最高分辨率时才会出现问题，我通过调用`Camera.Parameters.getSupportedPictureSizes()`.

导致问题的分辨率是 1280x960。正如我之前提到的，它是最高分辨率。第二高的是 1280x720，当我使用这个时，输出图片很好。我确实检查了相机吐出的格式，它一直是 ImageFormat.JPEG 所以我不认为像素格式是这里的问题......

**编辑（2013 年 3 月 8 日）：** 调用图片：

```
private class XyzAutoFocusCallback implements Camera.AutoFocusCallback {

            @Override
            public void onAutoFocus(boolean success, Camera camera) {
                    if (takingPicture) {
                            camera.takePicture(null, null, myPictureCallback);
                    } else {
                    ...
            }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T18:03:15.830

该相机不支持高度和宽度。这就是为什么它看起来像这样以及为什么 1280x720 设置有效。就像您将星际争霸设置为以显示器不支持的分辨率运行一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:48:07.687

尝试这个

```
Bitmap bmp = BitmapFactory.decodeByteArray(data, 0, data.length);
imv.setImageBitmap(bmp);

ByteArrayOutputStream bos = new ByteArrayOutputStream();
bmp.compress(CompressFormat.JPEG, 70, bos); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T07:09:57.063

> 我可能还应该提到直接使用 FileOutputStream 保存数据正在创建正确的 JPEG 图像。所以问题一定出在 BitmapFactory 和我创建 Bitmap 的方式上。

相机输出完全处理的 JPEG 数据（希望如此），您可以将其写入磁盘。现在你应该尝试什么：

1.  将文件转储到磁盘。
2.  使用[验证工具](http://jhove.sourceforge.net/jpeg-hul.html)或 PC 上的某些图像编辑器检查该文件。
3.  如果图像编辑器可以正常打开图像，请使用标准 JPEG 配置文件从该图像编辑器保存一份副本。
4.  已经`BitmapFactory`处理了图像编辑器保存的原始文件和文件，看看你是否得到了一个坏的位图。

如果图像是有效的 JPEG 并且`BitmapFactory`仍然产生错误的位图，则问题出在`BitmapFactory`（不太可能），如果相机输出的文件是无效的 JPEG，则问题出在相机（更有可能）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T18:24:58.973

您是否尝试将 null 放在您的选项中？试试看：

```
@Override
public void onPictureTaken(final byte[] data, Camera camera) {
    Bitmap bm = BitmapFactory.decodeByteArray(data, 0, data.length, null);
    try {
        FileOutputStream out = new FileOutputStream(Environment.getExternalStorageDirectory().getAbsolutePath()+"/image.jpg");
        bm.compress(Bitmap.CompressFormat.JPEG, 95, out);
        out.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T02:54:34.227

你是在设置后置摄像头到前置摄像头的参数吗？还有一点要测试的是前置摄像头，先试试不设置任何参数，用默认设置看看能不能用。我在三星设备上遇到了类似的问题，但那是后置摄像头。此外，您可能需要旋转使用前置摄像头拍摄的图像（三星设备的后置摄像头也需要）

```
public static Bitmap rotate(Bitmap bitmap, int degree) {
        int w = bitmap.getWidth();
        int h = bitmap.getHeight();

        Matrix mtx = new Matrix();
        mtx.postRotate(degree);

        return Bitmap.createBitmap(bitmap, 0, 0, w, h, mtx, true);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-30T18:17:49.990

我建议不要在代码中设置图片大小，让相机返回它可以捕获的最佳图片。检查此处答案中给出的代码。 [https://stackoverflow.com/a/9745780/2107118](https://stackoverflow.com/a/9745780/2107118)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-14T14:37:00.017

这是我的代码，我用来拍照，并将它们保存在数据库中，而不改变其质量。

首先你需要这个变量：

```
 private static final int CAMERA_PIC_REQUEST = 2500;
private Rect Padding = new Rect(-1,-1,-1,-1);
private Matrix matrix = new Matrix();
private Bitmap rotatedBitmap = null;
private Bitmap bm = null;
private Bitmap scaledBitmap= null;
private ExifInterface exif ;
private int rotation=0;
private final BitmapFactory.Options options = new BitmapFactory.Options(); 
```

然后根据您的应用程序从按钮、活动或片段设置请求（我的使用按钮）

```
btn_camera.setOnClickListener(new View.OnClickListener() {
          @Override
          public void onClick(View view) {

              Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
              startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);

          }
    }
    ); 
```

现在，当我从片段请求 CAMERA _PIC_REQUEST 时，我在 OnActivityResult() 上实现此代码

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == CAMERA_PIC_REQUEST)
        if (data != null) {
        imageuri = data.getData();
        //Bitmap image = (Bitmap) data.getExtras().get("data");

        try {
            options.inSampleSize = 2;
            exif = new ExifInterface(getRealPathFromURI(imageuri));
            rotation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_NORMAL);
            rotation = exifToDegrees(rotation);

            bm = BitmapFactory.decodeStream(
                    getActivity().getContentResolver().openInputStream(imageuri),Padding,options);

            scaledBitmap = Bitmap.createScaledBitmap(bm, 400,400, true);

            if (rotation != 0)
            {matrix.postRotate(rotation);}
            //matrix.postRotate(180);
            rotatedBitmap = Bitmap.createBitmap(scaledBitmap , 0, 0, scaledBitmap .getWidth(), scaledBitmap .getHeight(), matrix, true);

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        mIvFoto.setImageBitmap(rotatedBitmap);

     }
 } 
```

旋转和矩阵用于将拍摄的图片缩放到 ImageView，因此我可以在保存之前预览照片。这不影响图片的质量。它仅用于预览位图。所以在ScaledBitmap变量中你可以看到，在CreatingScaledBitmap的时候，我把图片的尺寸设置为400400，你可以放置你想要的图片的尺寸，一定要旋转位图，这样你才能得到正确的图片，即使您以纵向模式拍摄照片。

最后是从相机保存的路径中旋转和获取图片的方法。

```
private static int exifToDegrees(int exifOrientation) {
    if (exifOrientation == ExifInterface.ORIENTATION_ROTATE_90) { return 90; }
    else if (exifOrientation == ExifInterface.ORIENTATION_ROTATE_180) {  return 180; }
    else if (exifOrientation == ExifInterface.ORIENTATION_ROTATE_270) {  return 270; }
    return 0;
}

private String getRealPathFromURI(Uri contentURI) {
    String result;
    Cursor cursor =getActivity().getContentResolver().query(contentURI, null, null, null, null);
    if (cursor == null) { // Source is Dropbox or other similar local file path
        result = contentURI.getPath();
    } else {
        cursor.moveToFirst();
        int idx = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA);
        result = cursor.getString(idx);
        cursor.close();
    }
    return result;
} 
```

我希望这可以帮助你。

# android - Android 嵌套布局

> ID：15404552
> 
> 赞同：8
> 
> 时间：2013-03-14T08:41:33.777
> 
> 标签：android, android-layout, android-relativelayout, nestedlayout

我是android布局的新手，请告诉我使用嵌套布局而不是使用下面的布局，上面的布局，布局右，布局左属性的组件相对布局时应用程序的性能如何。

例如：

```
<RelativeLayout>
    <scrollView>
       <RelativeLayout>
          <LinearLayout> Header<LinearLayout>
           <TextView/>  <TextView/>
           <TableLayout>
                   <TableRow><ImageView/> <TextView> <Spinner><TableRow>
                   <TableRow><ImageView/> <TextView> <Spinner><TableRow>
                   <TableRow><ImageView/> <TextView> <Spinner><TableRow>
                   <TableRow><ImageView/> <TextView> <Spinner><TableRow>
          </TableLayout>

          <TextView>
          <TableLayout>
                 <TableRow>
                    <LinearLayout> <ImageView><TextView></LinearLayout> 
                    <EditText>
                 </TableRow>
                 <TableRow>
                    <LinearLayout> <ImageView><TextView></LinearLayout>
                    <EditText>
                </TableRow>
                <TableRow>
                   <TextView> 
                   < Spinner>
                </TableRow>
                <TableRow><TextView> <Spinner></TableRow>
          </TableLayout>

           <TableLayouts>---</TableLayout>

          <LinearLayout> footer</LinearLayout>
</RelativeLayout>
<ScrollView>
</RelativeLayout> 
```

感谢和问候亚米尼

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T09:20:25.200

好吧，有些布局只能通过一定程度的嵌套来制作。但是你应该避免有太多嵌套的线性布局，更重要的是永远不要用权重嵌套线性布局。[您可以在官方文档](http://developer.android.com/training/improving-layouts/optimizing-layout.html)中阅读更多关于优化布局的信息。

就我个人而言，我将 LinearLayouts 用于简单的东西，并在布局变得更复杂时开始使用 RelativeLayout。没有一个答案，因为这是一个偏好问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:19:32.753

强烈向您推荐一个名为 Hierarchy Viewer 的工具。它与 SDK 捆绑在一起，您可以在 android-sdk/tools 目录下找到它。简而言之，它通过测量处理它们的时间来帮助发现布局中的问题。可以在[此处](http://developer.android.com/tools/debugging/debugging-ui.html)找到对 Hierarchy Viewer 的更广泛描述。希望这可以帮助。

# java - 带有重复注释的 Java 类。这是可能的？

> ID：15404555
> 
> 赞同：0
> 
> 时间：2013-03-14T08:41:44.010
> 
> 标签：java, reflection, annotations

可以用相同的注释定义一个类两次吗？

例如，我有我的@interface 注释

```
@Annotation(value = 1)
@Annotation(value = 2)
public class MyClass{
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:51:44.510

是的，您需要定义一个 Wrapper-Annotation：

```
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Target({ElementType.TYPE})
public @interface AnotationList {
    Anotation[] value () default {};
} 
```

然后你可以像这样使用它：

```
@AnotationList({
    @Anotation(value = 1),
    @Anotation(value = 2)
})
public class MyClass{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T08:51:18.430

您可以定义另一个注释`@Annotations`，其值是一个数组`@Annotation`：

```
public @interface Annotations
{
  public Annotation[] value();
} 
```

它被用作

```
@Annotations
(
  {
    @Anotation(value = 1)
  , @Anotation(value = 2)
  }
)
public class MyClass {
} 
```

# rest - 如何通过传递现有的身份验证令牌在浏览器中打开评论

> ID：15404556
> 
> 赞同：2
> 
> 时间：2013-03-14T08:41:46.710
> 
> 标签：rest, authentication, python-2.7, atlassian-crucible

我编写了一个 python 脚本来登录坩埚以访问各种 API，该脚本工作正常并返回一个 resposne token 。

我可以成功调用坩埚休息 API 并使用 FEAUTH=token 创建评论。

现在我想在浏览器窗口中打开这个特别的评论，以便用户可以提供各种其他信息。

**代码示例是：**

```
auth = urllib.urlencode({'FEAUTH': token})

url = "fisheye/cru/"+permaId+"?" auth

webbrowser.open(url, new=0, autoraise=True) 
```

浏览器窗口打开，但要求登录。

有人可以告诉我如何使用现有的身份验证令牌打开此 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:40:01.463

例如像这样

```
http://<your url>?access_token=7f813af1-381d-4dd7-b70b-b6a8399b2c00 
```

# jakarta-ee - 在 WEB-INF/classes 文件夹中只保留 .class 和 .properties 文件

> ID：15404557
> 
> 赞同：2
> 
> 时间：2013-03-14T08:41:49.967
> 
> 标签：jakarta-ee, maven

我正在将我当前的 java EE 项目移植到 maven。我正在研究由 maven 创建的战争的文件夹结构，不知何故被卡住了。

Maven 将我的所有文件复制到 webapps 中，包括 WEB-INF/classes 文件夹中的 .css、.js 等。我为他们保留了不同的文件夹资源，并且只希望将 .class 和 .properties 文件复制到 classes 文件夹中。

有什么想法我怎么能做到这一点？

-- 添加更多数据 --

使用

```
 <webResources>
<resource>
<directory>${basedir}/src/main/resources</directory>
<targetPath>resources</targetPath>
<includes>
<include>**/*.*</include>
</includes>
</resource>
 </webResources> 
```

在我的战争中创建一个资源文件夹并将所有这些文件保存在资源文件夹中，但不知何故，它们的副本也在 WEB-INF/classes 中创建

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:53:13.597

您可以配置`maven-war-plugin`以从打包中排除某些文件。检查[文档](http://maven.apache.org/plugins/maven-war-plugin/examples/including-excluding-files-from-war.html)。

但是，通常您将 Web 资源保存在应用程序目录中的类路径之外（因此不在 中`src/main/resources`） 。`webapp`

资源被复制到`classes`目录中，因为`src/main/resources`目标是接收您希望在类路径上可用的文件（`properties`文件、xml 配置文件等）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T09:09:30.803

正如@benzonico 提到的，您应该将`webapp`资源保留在`src/main/webapp`而不是`src/main/resources`. 如果您无法更改它，您可以添加类似于以下内容的内容，以排除`js`和`css`文件被复制到类文件夹。

```
 <build>
    ...
    <resources>
      <resource>
        <directory>src/main/resources</directory>
        <excludes>
          <exclude>*.css</exclude>
          <exclude>*.js</exclude>
        </excludes>
      </resource>
      ...
    </resources>
    ...
  </build> 
```

# java - JFrame的内容不显示

> ID：15404558
> 
> 赞同：1
> 
> 时间：2013-03-14T08:41:50.050
> 
> 标签：java, swing, user-interface, jframe, visibility

我正在使用显示消息的框架，但不显示框架的内容。下面是我的 MessageBox 框架的代码。

```
public class MessageBox extends javax.swing.JFrame {

/**
 * Creates new form MessageBox
 */
 public static String title=null,message=null;

public MessageBox(String message,String title) {

    initComponents();

}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    txtMessage = new javax.swing.JTextField();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    addWindowListener(new java.awt.event.WindowAdapter() {
        public void windowOpened(java.awt.event.WindowEvent evt) {
            formWindowOpened(evt);
        }
    });

    txtMessage.setBackground(new java.awt.Color(236, 233, 216));
    txtMessage.setOpaque(false);
    txtMessage.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            txtMessageActionPerformed(evt);
        }
    });

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(18, 18, 18)
            .addComponent(txtMessage, javax.swing.GroupLayout.PREFERRED_SIZE, 380, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(31, 31, 31)
            .addComponent(txtMessage, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(24, Short.MAX_VALUE))
    );

    pack();
}// </editor-fold>

private void txtMessageActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:
}

private void formWindowOpened(java.awt.event.WindowEvent evt) {
    // TODO add your handling code here:
   this.setTitle(title);
   txtMessage.setText(message);
   txtMessage.revalidate();
   txtMessage.repaint();
   this.repaint();
}

/**
 * @param args the command line arguments
 */

// Variables declaration - do not modify
private javax.swing.JTextField txtMessage;
// End of variables declaration

public static void main(String args[]) {
    /*
     * Set the Nimbus look and feel
     */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /*
     * If Nimbus (introduced in Java SE 6) is not available, stay with the
     * default look and feel. For details see
     * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
     */

    //</editor-fold>

    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            //  new ERPMainMenu().setVisible(true);
          new MessageBox(title,message).setVisible(true);
        }
    });
} 
```

}

```
 public Class CallingClass
   {
        public CallingClass(){
   }
public caller(){
         MessageBox mb =new MessageBox("The  Data is saved successfully", "Success");

            mb.setLocation(400, 300);   
            mb.setVisible(true);
        try {
            Thread.sleep(5000);
 } catch(InterruptedException ex) {
Thread.currentThread().interrupt();
 }
            mb.setVisible(false); 

  }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:12:22.103

使用[javax.swing.Timer](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html)代替`Thread.sleep()`. 您的所有代码将如下所示：

**MessageBox.java**

```
import javax.swing.*;
import java.awt.event.*;
public class MessageBox extends javax.swing.JFrame 
{
    /**
    * Creates new form MessageBox
    */
    public static String title=null,message=null;
    public MessageBox(String message,String title) 
    {
        this.message = message;
        this.title = title;
        initComponents();
    }
    /**
    * This method is called from within the constructor to initialize the form.
    * WARNING: Do NOT modify this code. The content of this method is always
    * regenerated by the Form Editor.
    */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() 
    {

        txtMessage = new javax.swing.JTextField();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        addWindowListener(new java.awt.event.WindowAdapter() 
        {
            public void windowOpened(java.awt.event.WindowEvent evt) 
            {
                formWindowOpened(evt);
            }
        });
        txtMessage.setBackground(new java.awt.Color(236, 233, 216));
        txtMessage.setOpaque(false);
        txtMessage.addActionListener(new java.awt.event.ActionListener() 
        {
            public void actionPerformed(java.awt.event.ActionEvent evt) 
            {
                txtMessageActionPerformed(evt);
            }
        });
        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
        .addGap(18, 18, 18)
        .addComponent(txtMessage, javax.swing.GroupLayout.PREFERRED_SIZE, 380, javax.swing.GroupLayout.PREFERRED_SIZE)
        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
        .addGap(31, 31, 31)
        .addComponent(txtMessage, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)
        .addContainerGap(24, Short.MAX_VALUE))
        );
        pack();
    }// </editor-fold>
    private void txtMessageActionPerformed(java.awt.event.ActionEvent evt) 
    {
        // TODO add your handling code here:
    }
    private void formWindowOpened(java.awt.event.WindowEvent evt) 
    {
        // TODO add your handling code here:
        this.setTitle(title);
        txtMessage.setText(message);
        txtMessage.revalidate();
        txtMessage.repaint();
        this.repaint();
    }
    /**
    * @param args the command line arguments
    */
    // Variables declaration - do not modify
    private javax.swing.JTextField txtMessage;
    // End of variables declaration
    public static void main(String args[]) 
    {
        /*
        * Set the Nimbus look and feel
        */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
        * If Nimbus (introduced in Java SE 6) is not available, stay with the
        * default look and feel. For details see
        * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
        */

        //</editor-fold>
        java.awt.EventQueue.invokeLater(new Runnable() 
        {
            public void run() 
            {
                CallingClass cl = new CallingClass();
                cl.caller();
            }
        });
    }
} 
```

**调用类.java**

```
class CallingClass
{
    public CallingClass(){}
    public void caller()
    {
        final MessageBox mb =new MessageBox("The  Data is saved successfully", "Success");
        mb.setLocation(400, 300);   
        javax.swing.Timer timer = new javax.swing.Timer(5000,new ActionListener()
        {
            public void actionPerformed(ActionEvent evt)
            {
                mb.setVisible(false);
            }
        });
        timer.start();
        mb.setVisible(true);
    }
} 
```

> **注意：**正如 Camickr 所建议的，我已经在`JFrame`显示之前启动了 Timer。这会提高持续时间（在您的情况下为 5 秒）的准确性，直到该持续时间`JFrame`可见。

# c# - Datagrid 中的 FlowDocumentScrollViewer

> ID：15404563
> 
> 赞同：1
> 
> 时间：2013-03-14T08:42:13.003
> 
> 标签：c#, wpf, datagrid, flowdocument, flowdocumentscrollviewer

我收到以下错误消息：**“在附加到新的父视觉之前，必须断开指定子与当前父视觉的连接”**

我知道问题出在哪里，但我无法在我的实际应用程序中修复它，我使用`BeginningEdit()`事件弹出一个新窗口来编辑包含麻烦制造者的 myObject`Flowdocument`

我也使用我的克隆扩展来创建一个`new Flowdocument`，希望能否认这个错误，但它不会改变任何东西

## XAML

```
<DataGrid AutoGenerateColumns="False" Name="myDGrid">        
            <DataGrid.Columns>
                <DataGridTemplateColumn Header="myHeader">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <FlowDocumentScrollViewer Width="100" Height="50"                                
                                                      HorizontalScrollBarVisibility="Hidden" 
                                                      VerticalScrollBarVisibility="Hidden" 
                                                      FontStretch="Normal" FontSize="13" FontWeight="Bold" 
                                                      HorizontalContentAlignment="Center" 
                                                      VerticalContentAlignment="Center"  
                                                      IsManipulationEnabled="False" IsSelectionEnabled="False"
                                                     Document="{Binding}">                                
                            </FlowDocumentScrollViewer>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>

                <DataGridTemplateColumn.CellEditingTemplate>
                    <DataTemplate>
                        <Label/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellEditingTemplate>

                </DataGridTemplateColumn>
            </DataGrid.Columns>               
        </DataGrid> 
```

## 代码隐藏

```
 public string myFlowString
    {
        get
        {
            return (@"<FlowDocument PagePadding='0,0,0,0' Background='Green' AllowDrop='True' xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation'>
                            <Paragraph Background='Red' TextAlignment='Center'> some text befor <LineBreak/> Komponente 1<Run FontFamily='Palatino Linotype' Typography.Variants='Superscript'>1,2,3,4</Run>
                                <LineBreak/> Nachtisch</Paragraph> </FlowDocument>");
        }
    }

    public MainWindow()
    {
        InitializeComponent();

         var _mylist = new List<FlowDocument>();

        var myFlowDoc = XamlReader.Load(XmlReader.Create(new StringReader(myFlowString))) as FlowDocument;

        for (int i = 0; i < 10;i++ )
            _mylist.Add(myFlowDoc.Clone());

        myDGrid.ItemsSource = _mylist;
    }

}

public static class Extension
{
    public static FlowDocument Clone(this FlowDocument flowdoc)
    {
        var xml = XamlWriter.Save(flowdoc);
        return xml.toFlowDocument();
    }

    public static FlowDocument toFlowDocument(this string xamlString)
    {
        var stringReader = new StringReader(xamlString);
        var xmlReader = System.Xml.XmlReader.Create(stringReader);

        return XamlReader.Load(xmlReader) as FlowDocument;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:42:54.800

可以解决这个问题，你应该使用 2 个属性，每个属性`DataGridCell`
为你的`CellTemplate`，
一个为你的`CellEditingTemplate`

每次调用您的 getter 时，您都必须创建一个新的`FlowDocument`，因为它看起来像是在`DataGridCell`保存此类数据的方式上存在错误/故障。

# ios - Worklight 的临时推送通知和开发

> ID：15404569
> 
> 赞同：1
> 
> 时间：2013-03-14T08:42:30.407
> 
> 标签：ios, push-notification, certificate, ibm-mobilefirst

Worklight 是否支持对同一个项目使用两个推送证书？

我需要在开发和生产模式下测试我的项目，所以我需要放置两个 .p12 文件。

Worklight 文档说我们需要将证书命名为“apns-certificate-sandbox.p12”，并将其放在特定文件夹中，但是如果我也想使用非沙盒证书怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:03:58.283

您不能将这两个证书放在项目中。开发测试时放置开发证书，生产测试时将证书替换为生产证书。

用于开发：apns-certificate-sandbox.p12

用于生产：apns-certificate-production.12

Worklight 将检测到这一点并选择要使用的正确 APNS 服务器。

# c# - 方法的扩展方法不在 IntelliSense 中显示

> ID：15404572
> 
> 赞同：3
> 
> 时间：2013-03-14T08:42:45.173
> 
> 标签：c#, .net, function, extension-methods, timing

如何创建可以稍后执行给定函数的扩展方法？我想出了以下代码，但是当您键入`MyFunc.DoLater()`.

我已经在静态类中声明了扩展方法......

```
using TTimer = System.Timers.Timer; // to prevent confusion with Windows.Forms.Timer

public static void DoLater(this Action handler, int delay) {
    TTimer timer = new TTimer(delay);
    timer.Elapsed += delegate {
       handler();
       timer.Dispose();
    };
    timer.Start();
} 
```

...并且`MyFunc`只是一个`Form`没有参数的类中的方法。

```
public void MyFunc(){
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:17:42.313

您需要一个操作实例来执行您的扩展方法：

```
var a = new Action(() => MyFunc());
a.DoLater(); 
```

但我会建议一种更好、更通用的方法：

```
public static class DoLaterExtension
{
    public static void DoLater<T>(this T x, int delay, Action<T> action)
    {
        // TODO: Impelement timer logic
        action.Invoke(x);
    }
}

private void Example()
{
    var instance = new MyForm();
    instance.DoLater(1000, x => x.MyFunc());
} 
```

请记住，您最好使用 a`System.Windows.Fomrs.Timer`来避免线程问题。或 TPL 方式（如果您使用的是 .net 4.0，我建议您这样做）。

```
public static void DoLater<T>(this T x, int delay, Action<T> action)
{
    var scheduler = TaskScheduler.FromCurrentSynchronizationContext();
    Task.Factory.StartNew(() =>
    {
        System.Threading.Thread.Sleep(delay);   
    }).ContinueWith(t =>
    {
        action.Invoke(x);
    }, scheduler);
} 
```

如果您使用 .net 4.5，您甚至可以使用`Task.Delay` [http://msdn.microsoft.com/en-us/library/hh194845.aspx](http://msdn.microsoft.com/en-us/library/hh194845.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:19:51.857

好主意。我使用 System.Timers.Timer 进行了尝试，它工作正常。

```
static class Program
{
    static System.Timers.Timer _timer;

    static void Main(string[] args)
    {
        DoLater(SayHello, 5000);
        Console.ReadLine();
    }

    public static void DoLater(this Action handler, int delay)
    {
        _timer = new System.Timers.Timer(delay);
        _timer.Elapsed += new ElapsedEventHandler(delegate {
                                   handler();
                                   _timer.Dispose();
                                });
        _timer.Enabled = true;
    }

    public static void SayHello()
    {
        MessageBox.Show("Hello World");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T00:48:10.083

将该方法转换为`Action`.

```
((Action)MyMethod).DoLater(10000); 
```

要使用扩展方法，编译器需要一个类型为 的对象`Action`。我不完全确定方法成员和`Action`成员之间的区别是什么，但我猜有一个从方法到`Action`.

# javascript - 如何在 Rails ERB 标记中调用 javascript 变量

> ID：15404578
> 
> 赞同：1
> 
> 时间：2013-03-14T08:42:57.217
> 
> 标签：javascript, ruby-on-rails, json, erb

我通过使用 Sunspot solr 作为 JSON 从我的 Rails 操作中获取工作搜索结果，并通过解析 JSON 数据并使用 Javascript 创建 HTML 元素在客户端创建结果视图。但是从响应 JSON 我们无法获得工作关联对象，因此通过使用响应 JSON 中的 company_id 字段，我试图借助嵌入的 ruby​​ 标记从 javascript 本身访问公司。

```
 function submitForm() {
   var valuesToSubmit = $('#FRM_JOB_SEARCH').serialize();
    jQuery.ajax({
    type: "POST",
    url: $('#FRM_JOB_SEARCH').attr('action'),
    data :valuesToSubmit,
    success : function(json){
      var data = JSON.parse(json);
          $.each(data, function(key, val) {
                          create_blocks(key , val);
        });
    } ,
    dataype : 'json' ,
    remote : true });

    }

  function create_blocks(key , value) {
       var feeds = eval(value)
          var company_id = feeds["company_id"];
          var company_name = '<%= Company.find_by_id('company_id').name %>';
          console.log(company_name);
   } 
```

但是这个变量在 ERB 标签内是不可访问的。我们如何访问 RAILS erb 标签内的 javascript 变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:01:19.587

你不能这样做，因为 javascript 在客户端，而 erb 在服务器幻灯片上。

通常，如果您想将某个变量传递给 erb ，您可以在控制器中以特定操作（如果您愿意）获取该变量，然后将该数据传递给 erb。

您可以在[此处](http://railscasts.com/episodes/324-passing-data-to-javascript?autoplay=true)查看 railcasts如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:38:43.493

正如 Aleks 所说，您不能这样做，因为您在回调中调用的函数中使用了 ruby​​ 代码。实现您想要做的最简单的方法是在您从服务器获得的 json 数据中传递公司名称。

如果您`to_json`用于呈现 json 响应，请尝试以下操作

```
 render json: @records.to_json(methods: [:company_name]) 
```

然后在模型中，添加`company_name`方法

```
 def company_name
   company.name
 end 
```

# python - Django：没有名为“app”的模块

> ID：15404580
> 
> 赞同：8
> 
> 时间：2013-03-14T08:43:01.343
> 
> 标签：python, django, runtime-error

Django 与

```
ImportError at /store/
No module named store 
```

但是那里有调试消息，那里有设置

```
INSTALLED_APPS = 
  ('django.contrib.auth',
  'django.contrib.contenttypes',
  'django.contrib.sessions',
  'django.contrib.sites',
  'django.contrib.messages',
  'django.contrib.staticfiles',
  'django.contrib.admin',
  'django.contrib.admindocs',
  'store')

Environment:

Request Method: GET
Request URL: http://localhost:8000/

Django Version: 1.4.5
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'store')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/usr/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/paul/cs462/store/store/views.py" in main
  37\.   return redirect(reverse('django.contrib.auth.views.login'))
File "/usr/lib/python2.7/site-packages/django/core/urlresolvers.py" in reverse
  476\.     return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs))
File "/usr/lib/python2.7/site-packages/django/core/urlresolvers.py" in _reverse_with_prefix
  363\.         possibilities = self.reverse_dict.getlist(lookup_view)
File "/usr/lib/python2.7/site-packages/django/core/urlresolvers.py" in reverse_dict
  276\.             self._populate()
File "/usr/lib/python2.7/site-packages/django/core/urlresolvers.py" in _populate
  253\.                     for name in pattern.reverse_dict:
File "/usr/lib/python2.7/site-packages/django/core/urlresolvers.py" in reverse_dict
  276\.             self._populate()
File "/usr/lib/python2.7/site-packages/django/core/urlresolvers.py" in _populate
  265\.                 lookups.appendlist(pattern.callback, (bits, p_pattern, pattern.default_args))
File "/usr/lib/python2.7/site-packages/django/core/urlresolvers.py" in callback
  216\.         self._callback = get_callable(self._callback_str)
File "/usr/lib/python2.7/site-packages/django/utils/functional.py" in wrapper
  27\.         result = func(*args)
File "/usr/lib/python2.7/site-packages/django/core/urlresolvers.py" in get_callable
  105\.                     not module_has_submodule(import_module(parentmod), submod)):
File "/usr/lib/python2.7/site-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)

Exception Type: ImportError at /
Exception Value: No module named store 
```

外壳工作得很好（我尝试过），但是这个错误显示在我拥有的每一页上。应用程序中没有“商店”是否意味着模块已导入？？？

编辑：我多次使用 Django 进行项目。这是几个小时前的工作。store/中有一个空白`__init__.py`文件。此外，通过使用 print 语句，我能够确定它被执行（两次）。`urls.py`并且`models.py`也被执行（但不是`views.py`）。我不知道我能做些什么来得到这个错误。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-14T09:59:56.540

如果不是版本控制，我永远不会发现这个。事实上，我花了将近一个小时才找到它。

错误出现在 store/urls.py 中：

```
urlpatterns = patterns('store.views',
    url(r'^$', 'main'),
    url(r'^new_delivery_user/$', 'new_delivery_user'),
    ...
    url(r'^event_signal/$', 'store.views.event_signal'), # problem
) 
```

我已将项目 url.py 中的最后一个 URL 移动到这个应用程序特定的 URL，它使用简写“store.views”来添加每个视图。

它应该出现：

```
 url(r'^event_signal/$', 'event_signal'), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-27T16:57:43.930

感谢 Paul Draper，在我更改了

```
re_path('api/(?P<version>(v1|v2))/', include('music.urls')) 
```

进入 ：

```
 re_path('api/(?P<version>(v1|v2))/', include('musicservices.music.urls')) 
```

问题解决了。

# mysql - 使用动态 SQL 查询选择数据

> ID：15404587
> 
> 赞同：0
> 
> 时间：2013-03-14T08:43:31.700
> 
> 标签：mysql

我有一个表，其中有一个名为“类型”的列。我在该列中保留表名（作为类型名称）。我想检查一行的类型（表名）并使用 id 从该表中获取数据。是否可以在一个查询中完成？

这是主表的结构 -

```
 CREATE TABLE `post` (
  `post_id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `column` enum('1','2','3') NOT NULL,
  `type` enum('post_image','post_video') NOT NULL,
  `title` varchar(255) CHARACTER SET utf8 NOT NULL,
  `description` text CHARACTER SET utf8 NOT NULL,
  `thumb` varchar(255) NOT NULL,
  `post_date` datetime NOT NULL,
  `views` int(11) NOT NULL,
  `status` int(11) NOT NULL,
  PRIMARY KEY (`post_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1; 
```

这是上列中两种不同类型的两个表-

```
 CREATE TABLE `post_image` (
  `post_image_id` int(11) NOT NULL AUTO_INCREMENT,
  `post_id` int(11) NOT NULL,
  `image` varchar(255) NOT NULL,
  PRIMARY KEY (`post_image_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1;

    CREATE TABLE `post_video` (
  `video_remote_id` int(11) NOT NULL AUTO_INCREMENT,
  `post_id` int(11) NOT NULL,
  `video_type` enum('vimeo','youtube') NOT NULL,
  `video_id` int(11) NOT NULL,
  `video_url` varchar(255) NOT NULL,
  `video_title` int(11) NOT NULL,
  `video_duration` int(11) NOT NULL,
  PRIMARY KEY (`video_remote_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:51:40.963

在单个查询中 - 否。

尝试使用[准备语句](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-prepared-statements.html)。将表的名称读入变量中，构建 SELECT 查询字符串并使用 EXECUTE 命令执行它。

# android - 一个简单的“Hello World”项目的 17.8 MiB 堆分配？

> ID：15404591
> 
> 赞同：6
> 
> 时间：2013-03-14T08:43:39.907
> 
> 标签：android, garbage-collection, heap-memory, eclipse-memory-analyzer

我猜这里有一个明显的答案......我对这个感到困惑：

当我所做的只是：

1.  *使用 Eclipse 的New Project*选项创建了一个简单的“Hello World”项目。
2.  并添加了 56 KiB 背景图片。

如果我取出`android:background="@drawable/background4"`线路，分配的内存将下降到 11.9 MiB。

*   系统分配这么多内存是否正常？我应该担心吗？
*   什么会占用这么多的堆空间？

![](../Images/27b74c2943243a8c6c7e651bc5e8df1a.png)

我还对此进行了 MAT 报告，但我不确定从中得出什么结论：

![](../Images/0da3bd2b49821c2ebdfc4eb9ef954d7d.png)

提前致谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:16:10.323

> 并添加了 56 KiB 背景图片。

不，您添加了一个 56 KiB*文件*，用作背景图像。

位图占用的实际堆空间是每个像素三个字节。使用 ~6MB 位图（每个 MAT 屏幕），您正在相当高分辨率的设备或模拟器上运行您的应用程序（1080p 应该产生 ~8MB，IIRC）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:03:53.103

AFAIK Android 会在您的布局膨胀时将您布局中的图像转换为字节数组。

它需要背景图像扩展以适应您的屏幕，这样做需要额外的内存..所以这就是它分配那么多内存的原因。我可能不对，但如果我错了，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:04:04.653

好的，我在这里的数字可能是错误的，但任何高于 Android 3 的东西都会有 24mb（之前为 16mb，并且因设备而异）的内存堆限制。与每个 JVM 一样，内存将几乎全部分配，因此您的应用程序在其生命周期内不需要进行重新分配。

这并不是说您的应用程序实际上以 24mb 运行，而是在需要时分配了它。

我知道您还可以增加应用程序可以使用的堆内存量，但我建议您重新访问您的代码，以防您觉得有必要这样做。

显然，一旦您的应用程序关闭，所有这些都会被垃圾收集。

**更新** 如果需要，这是增加堆的方法：

```
android:largeHeap="true" 
```

# apache-commons-dbutils - 如何使用 Apache DbUtils 获取一对多关联和父子类型关联？

> ID：15404593
> 
> 赞同：1
> 
> 时间：2013-03-14T08:43:50.913
> 
> 标签：apache-commons-dbutils

有人可以解释一种使用 Apache DbUtils 获取一对多关联和父子类型关联的方法吗？我尝试搜索但找不到一对多关联的示例？DbUtils 页面上的文档也没有显示这种情况的示例？

例如

```
class Category {
    String code;
    List<Product> products;
    List<Category> subCategories;
} 
```

假设我有`categories`一个表，其中包含一个`parent_category`父子关系列、一个表和一个仅包含 category_code 和 product_code`products`的关联表。`category_products`假设我的查询正常工作，并且想一次性获取所有子类别和产品的类别。DbUtils 有可能吗？我有很多这样的情况，那么是否有一种通用的、更简洁的方法，或者我们必须在每种情况下编写大量自定义代码？即便如此，你能给我举个例子吗？

谢谢，
稻田

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-19T20:39:41.847

DbUtils 有一些 proto Sql 映射能力。

使用 BeanHandler 和 BeanListHandler，您可以将查询返回的行映射到您传递给处理程序的类的实例上。

映射很容易实现，逻辑可以封装在传递给处理程序的类中。该类必须如下：

*   这是一个JavaBean
*   每个属性的名称必须映射 select 语句的列别名（因此，将别名写在 camelCase 中，就像 JavaBean 属性一样）
*   每个属性的类型必须是从 jdbc 驱动程序管理的类型之一（如果您愿意，您可以覆盖实现您自己的 bean 行处理器的映射）

如果您的域模型被设计为对象的组合，但您想优化查询执行（1:n 或 m:n），您可以按照以下步骤进行： - 创建一个 JavaBean，它映射从查询返回的所有列，例如 CategoryRelational -使用这样的方法创建数据映射器对象`List<Category> mapCategory(List<CategoryRelational>)`，该方法接收平面对象的集合并返回分层对象的集合

映射的逻辑很简单，但显然与查询耦合：

*   如果下一行代表新类别，则在同一行上创建具有第一个产品和第一个子类别的新类别对象（如果您使用左连接而不是连接第一个产品或第一个子类别）
*   如果下一行代表与前一行相同的类别，则仅创建新产品和新类别（如果您使用左连接...）

我在一个大项目中使用过这种方法，当您的数据库频繁更改时，我发现它非常灵活。

# matlab - Matlab代码理解

> ID：15404596
> 
> 赞同：1
> 
> 时间：2013-03-14T08:43:58.450
> 
> 标签：matlab, image-processing

我有一个 matlab 代码，其中用最小值减去图像，然后除以最大值。

我们为什么要这样做？

它看起来像这样：

```
I1 = I1 - min(I1(:));
I1 = I1 / max(I1(:)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:13:12.723

比较不同的图像是图像处理中的一项常见任务。例如，考虑在不同照明条件下拍摄的物体的两张照片。为了比较图像，我们希望对图像进行归一化，使像素值共享一个共同的比例。

# c# - WIX 自定义操作调试不起作用

> ID：15404598
> 
> 赞同：24
> 
> 时间：2013-03-14T08:44:00.090
> 
> 标签：c#, wix, windows-installer

我试图调试我的自定义操作。我将 Debugger.Break() 放入自定义操作 cs 中。当我构建自定义操作时，它会创建以下文件：

```
myCustomAction.dll
myCustomAction.CA.dll
myCustomAction.pdb 
```

在 wix 项目中，我在二进制标签（不是 myCustomAction.dll）中引用了 myCustomAction.CA.dll。由于不存在 myCustomAction.CA.pdb 这就是调试不起作用的原因吗？当显示消息框时，我也尝试过使用消息框并附加到进程。但我收到以下消息：找不到或打开 PDB 文件。

我做错了什么？我有 wix 3.5 版本和 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-05-18T09:32:51.997

这是帮助我[的文章。](http://techfindings-prem.blogspot.com/2011/03/how-to-debug-wix-cusom-actions.html)

只需将以下代码添加到自定义操作的第一行：

```
System.Diagnostics.Debugger.Launch(); 
```

然后只需运行安装程序。当它开始执行您的操作时，将出现弹出窗口，建议启动 Visual Studio 进行调试。

您的参考库是正确的，它必须是*.CA.dll。MessageBox 的方法也可以，但您需要附加到 rundll32 进程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T13:28:47.117

使用 DTF 自定义操作，这两种技术是：

1) 在您的自定义操作中放置一个 MessageBox，然后将 Visual Studio 附加到该进程。附加时，查找加载了本机和 CLR 的 rundll32 进程。

2) 将 MsiBreak 环境变量设置为您的入口点的名称并重新启动机器。当调用该自定义操作时，DTF 将调用调试器。

否则，我的一般建议是让您的入口点成为一个非常薄的单板，将可重用的类连接到 MSI。我通常会创建一个独立的类，我可以在控制台应用程序中提供数据并测试所有内容，然后将该类连接到 DTF。我几乎从不需要调试安装程序自定义操作。

否则，我通常知道这是可行的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-14T11:49:33.787

不确定您的问题是什么，但这里有一篇文章，其中包含示例自定义操作和调试方法。它应该按照以下文章中的说明工作：http: [//www.advancedinstaller.com/user-guide/qa-c-sharp-ca.html](http://www.advancedinstaller.com/user-guide/qa-c-sharp-ca.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-15T18:39:17.807

这是除了使用

```
System.Diagnostics.Debugger.Launch(); 
```

以一种改进远程系统（如 VM）上的调试的方式。我对用于打包 .CA.dll 的 wix 目标文件进行了一些更改，结果很好。

在第一个创建项目的条件中，我添加了一个检查 %(ReferenceCopyLocalPaths.extension)' == '.pdb' 这样我的大部分依赖项 .pdb 现在都包含在我的 .CA.dll 中，并允许更轻松的调试体验远程系统。

C:\Program Files (x86)\MSBuild\Microsoft\WiX\v3.x\wix.ca.targets

```
<Target Name="PackCustomAction"
   Inputs="@(IntermediateAssembly);@(Content);$(CustomActionContents)"
   Outputs="$(IntermediateOutputPath)$(TargetCAFileName)">

    <!-- Find all referenced items marked CopyLocal, but exclude non-binary files. -->
    <CreateItem
     Include="@(ReferenceCopyLocalPaths)"
     Condition=" '%(ReferenceCopyLocalPaths.extension)' == '.pdb' or '%(ReferenceCopyLocalPaths.extension)' == '.dll' or '%(ReferenceCopyLocalPaths.extension)' == '.exe'">
      <Output TaskParameter="Include" ItemName="CustomActionReferenceContents"/>
    </CreateItem> 
```

# c++ - C ++中的循环引用内存泄漏

> ID：15404602
> 
> 赞同：0
> 
> 时间：2013-03-14T08:44:09.550
> 
> 标签：c++

我正在阅读安全的 C++，作者提到了如下循环引用。

考虑两个包含彼此指针的对象

```
class A;

class B { public: A* a; };

class A { public: B* b; }; 
```

这种情况被称为“循环引用”。指向 A 和 B 的指针存在，但如果没有其他指针指向来自其他地方的这些对象中的至少一个，则无法为任一变量回收内存，因此会造成内存泄漏。这两个对象将永远幸福地生活，永远不会被摧毁。

我的问题

1.  为什么会出现内存泄漏？为什么在相应类的析构函数中删除内存是个坏主意？
2.  作者在什么基础上提到两个物体从此存在？

感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T08:56:21.013

有一些垃圾收集算法非常简单，以至于它们无法收集两个相互引用的无法访问的对象（基本上，如果 gc 仅使用引用计数）。

但是，C++ 根本不保证提供任何垃圾收集。而且您显示的代码甚至不使用引用计数。因此，就您所展示的内容而言，泄漏对象（如果泄漏任何对象）的原因与循环引用无关，这是因为您没有释放它们。

您引用的书似乎是在您选择不在此问题中显示的一些附加信息的背景下说的——可能书中有一些参考计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:08:34.867

有问题的概念是可达性。基本上，从一组基本指针（活动变量等）开始，您可以直接或间接访问相关对象。如果不是，则该对象不可访问。

一个不可达对象的简单例子是没有指针的对象。循环引用示例是另一个示例：存在指向两个对象的指针，但对象仍然不可访问。

在大多数语言中，如果一个对象是不可访问的，它迟早会被垃圾回收。在 C++ 中，您需要在任何动态分配的对象变得无法访问之前显式删除它；否则，您永远无法删除它（并且内存已泄漏）。一种常用的 C++ 模拟垃圾收集技术是引用计数指针。这种技术（与其他垃圾收集技术不同）不能正确处理循环引用，因此会泄漏内存。

虽然 C++ 会从垃圾收集中受益，但重要的是要意识到这在 C++ 中*不像*在大多数其他语言中那样严重。在 C++ 中，动态分配的对象通常只对应于具有定义生命周期的对象，并且会在响应某些外部事件时显式销毁（或者永远不会被销毁，因为一旦程序完成了它们，程序就完成了，时期——想想编译器中的解析树）。因为 C++ 支持值语义，所以大多数其他对象*不支持* 动态分配，而是局部变量，或更大对象的数据成员，并自动管理其生命周期。尽管 C++ 有许多“智能”指针来自动管理删除内存，但如果您发现自己被广泛使用它们所吸引，那么您可能正在滥用动态分配。

# c# - 在 Datagridview 中显示数据库中的数据

> ID：15404603
> 
> 赞同：0
> 
> 时间：2013-03-14T08:44:09.737
> 
> 标签：c#

在我的 DataGridView (dataGridView1) 中显示数据库中的数据时出现问题。我有一个按钮（btnInsert），它将输入数据保存到数据库，但要在 datagridview 中显示数据，我必须重新启动应用程序。我该怎么办 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:46:37.437

在您的保存按钮处，再次重新绑定启动代码。

```
 BindingSource binding = new BindingSource(); //req. by win forms
 DataTable dt = new DataTable();
 dt.Load(sql_command.ExecuteReader()); 
```

this.ticket_1 TableAdapter.Fill(this.ticketDataSet2.Ticket_1); dgv.DataSource = dt;

这是我发现在 win 表单中执行此操作的最佳方法，.update 不起作用，因为它实际上需要从 SQL 中重新提取数据。或者您可以尝试检查此[链接](https://stackoverflow.com/questions/14374348/refresh-button-refreshing-data-grid-view-after-inserting-deleting-updating)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:38:53.960

触发事件处理程序后，您需要使用包含来自查询的数据的数据表设置数据网格的数据源属性。完成后，像这样绑定你的数据网格：

```
dataGrid1.DataSource = new BindingSource(dt, null); 
```

# rest - Spring RestTemplate 调用带有错误的 web 服务并分析状态码

> ID：15404605
> 
> 赞同：31
> 
> 时间：2013-03-14T08:44:11.413
> 
> 标签：rest, spring-mvc, http-status-code-401, resttemplate

我设计了一个 Web 服务，如果请求参数正常，则执行任务，如果请求参数错误或为空，则返回 401 Unauthorized HTTP 状态代码。

我正在使用`RestTemplate`执行测试，如果 web 服务回复成功，我可以验证 HTTP 200 OK 状态。但是，我无法测试 HTTP 401 错误，因为`RestTemplate`它本身会引发异常。

我的测试方法是

```
@Test
public void testUnauthorized()
{
    Map<String, Object> params = new HashMap<String, Object>();
    ResponseEntity response = restTemplate.postForEntity(url, params, Map.class);
    Assert.assertEquals(HttpStatus.UNAUTHORIZED, response.getStatusCode());
    Assert.assertNotNull(response.getBody());
} 
```

异常日志是

```
org.springframework.web.client.HttpClientErrorException: 401 Unauthorized
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:88)
at org.springframework.web.client.RestTemplate.handleResponseError(RestTemplate.java:533)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:489)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:447)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:318) 
```

如何测试 Web 服务是否回复 HTTP 状态代码 401？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-28T15:33:58.090

当您使用 rest 模板从服务获取非 2xx 响应代码时，您需要实现`ResponseErrorHandler`以拦截响应代码、正文和标头。复制您需要的所有信息，将其附加到您的自定义异常并抛出它，以便您可以在测试中捕获它。

```
public class CustomResponseErrorHandler implements ResponseErrorHandler {

    private ResponseErrorHandler errorHandler = new DefaultResponseErrorHandler();

    public boolean hasError(ClientHttpResponse response) throws IOException {
        return errorHandler.hasError(response);
    }

    public void handleError(ClientHttpResponse response) throws IOException {
        String theString = IOUtils.toString(response.getBody());
        CustomException exception = new CustomException();
        Map<String, Object> properties = new HashMap<String, Object>();
        properties.put("code", response.getStatusCode().toString());
        properties.put("body", theString);
        properties.put("header", response.getHeaders());
        exception.setProperties(properties);
        throw exception;
    }
} 
```

现在你需要在你的测试中做的是，在 RestTemplate 中设置这个 ResponseErrorHandler 像，

```
RestTemplate restclient = new RestTemplate();
restclient.setErrorHandler(new CustomResponseErrorHandler());
try {
    POJO pojo = restclient.getForObject(url, POJO.class); 
} catch (CustomException e) {
    Assert.isTrue(e.getProperties().get("body")
                    .equals("bad response"));
    Assert.isTrue(e.getProperties().get("code").equals("400"));
    Assert.isTrue(((HttpHeaders) e.getProperties().get("header"))
                    .get("fancyheader").toString().equals("[nilesh]"));
} 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-11-18T09:23:54.097

作为 nilesh 提出的解决方案的替代方案，您还可以使用 spring 类 DefaultResponseErrorHandler。您还需要覆盖它的 hasError(HttpStatus) 方法，这样它就不会在不成功的结果上抛出异常。

```
restTemplate.setErrorHandler(new DefaultResponseErrorHandler(){
    protected boolean hasError(HttpStatus statusCode) {
        return false;
    }}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-22T08:24:20.197

在我的休息服务中，我捕获`HttpStatusCodeException`而不是`Exception` 因为`HttpStatusCodeException`有一种获取状态代码的方法

```
catch(HttpStatusCodeException e) {
    log.debug("Status Code", e.getStatusCode());
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-14T09:55:15.790

您可以使用弹簧测试。这要容易得多：

```
@WebAppConfiguration
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:your-context.xml")
public class BasicControllerTest {

        @Autowired
        protected WebApplicationContext wac;
        protected MockMvc mockMvc;

        @Before
        public void setUp() throws Exception {
        mockMvc = MockMvcBuilders.webAppContextSetup(this.wac).build();
        }

        @Test
        public void testUnauthorized(){

        mockMvc.perform(MockMvcRequestBuilders
                            .post("your_url")
                            .param("name", "values")
        .andDo(MockMvcResultHandlers.print())
        .andExpect(MockMvcResultMatchers.status().isUnauthorized()
        .andExpect(MockMvcResultMatchers.content().string(Matchers.notNullValue()));
        }
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-09-05T06:47:06.677

从 Spring 4.3 开始，有一个`RestClientResponseException`包含实际的 HTTP 响应数据，例如状态码、响应正文和标头。你可以抓住它。

[RestClientResponseException Java 文档](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/client/RestClientResponseException.html)

# javascript - 通过地理位置计算哪个商店离用户最近

> ID：15404608
> 
> 赞同：0
> 
> 时间：2013-03-14T08:44:18.300
> 
> 标签：javascript, html, geolocation

我正在开发一个网站，在联系人页面中，我需要帮助用户找到最近的商店，并在谷歌地图上为用户提供前往它的路线！

该公司在该市有 4 家商店（我有所有商店的纬度和经度）。

当用户按下按钮时，我得到用户的纬度和经度。

到目前为止，一切都很好！现在我需要计算哪个商店离用户最近。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:53:55.103

就直线距离而言，您可以使用 Haversine 公式计算两个点之间的距离，每个点由纬度和经度定义

[PHP](https://stackoverflow.com/questions/15140579/distance-between-two-coordinates-in-php-using-haversine)中的 Haversine 或 [Python中的 Haversine](https://stackoverflow.com/questions/4913349/haversine-formula-in-python-bearing-and-distance-between-two-gps-points)

# three.js - 网格组不可见 Three.JS ColladaLoader

> ID：15404609
> 
> 赞同：1
> 
> 时间：2013-03-14T08:44:19.280
> 
> 标签：three.js, collada

Sketchup 允许制作组件以促进几何图形的重用。例如，可以将一个汽车车轮制成一个组件，并且该组件的 4 个实例可以用于汽车的 4 个车轮。

问题是如何将每个重复使用的组件放入自己单独的 THREE.Object3d 实例中（然后可以旋转、定位......即单独控制）

即如何将汽车的 4 个轮子中的每一个检索为 4 个单独的 THREE.Object3D 实例。

为此，我从sketchup 中导出了一个DAE，并使用Three.js ColladaLoader 加载它。但是，Three.js 不会呈现分组的几何图形。同一 dae 中未分组的几何图形呈现正常。

尝试了一些解决方法，例如将 dae 导入 belnder 并使用 three.js blender exporter 进一步导出到 .obj 和 JSON。使用这些变通方法，分组信息会丢失。

我正在尝试深入研究 ColladaLoader.js 代码，看看是否有解决方案。

[这个stackoverflow问题](https://stackoverflow.com/questions/14353427/positioning-children-objects-in-scene-car-wheels-hierarchy)看起来很相似（对于blender而不是sketchup）并且有一个答案，但答案不是我想要的。

顺便说一句，可以在下面的片段中看到 DAE 中的分组和未分组几何的示例。

> ```
> <library_visual_scenes>
>     <visual_scene id="ID1">
>         <node name="SketchUp">
>             <instance_geometry url="#ID19"> <!-- UN-GROUPED GEOMETRY -->
>                 <bind_material>
>                     <technique_common>
>                         <instance_material symbol="Material2" target="#ID6">
>                             <bind_vertex_input semantic="UVSET0" input_semantic="TEXCOORD" input_set="0" />
>                         </instance_material>
>                     </technique_common>
>                 </bind_material>
>             </instance_geometry>
>             <node id="ID2" name="wheel1">  <!-- A RE-USE OF A COMPONENT -->
>                 <matrix>1.0000000 0.0000000 0.0000000 7.0639700 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 0.0000000 1.0000000</matrix>
>                 <instance_node url="#ID3" />
>             </node>
>         </node>
>     </visual_scene>
> </library_visual_scenes> 
> ```

上面的 DAE 片段仅显示了组件的重用。组件的实际几何形状出现在 dae 下`<library_nodes>`。

> ```
> </library_visual_scenes>
> <library_nodes>
>     <node id="ID3" name="WheelComponent">
>         <instance_geometry url="#ID4"> <!-- GEOMETRY OF A GROUP (COMPONENT) -->
>             <bind_material>
>                 <technique_common>
>                 ... 
> ```

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T05:21:53.890

问题解决了。这是发生的事情：

加载场景 (collada.scene.children[0]) 中的对象似乎按 0.025 倍缩放。即按比例缩小。这不是问题，因为在设置正确的变焦、相机距离等之后，物体变得可见......

此时，Sketchup 对象（不是 Sketchup 组件的对象）可见，但 Sketchup**组件**不可见。

原因是 SketchUp 组件和组**进一步**按相同的因子 0.025 进行缩放。即，与不是组件的对象相比，组件按因子 0.025 缩放。

这意味着与非组件相比，组件的尺寸要小得多。

解决方案很简单。

加载 collada 后，遍历所有组件以及非组件并将它们的比例设置为 1。还有一件事要做。此时组件是可见的，但它们没有出现在正确的位置。这可以通过将位置以与它们放大的相同比例相乘来解决。即将组件内所有对象的位置乘以（1/0.025）

# php - PHP lastInsertId() - 返回上一条记录号

> ID：15404610
> 
> 赞同：2
> 
> 时间：2013-03-14T08:44:25.330
> 
> 标签：php, pdo, auto-increment

我有以下代码（删除了实际数据），它成功地将一条记录写入我的表中。

```
$db = new database('db_name');
$sql='INSERT INTO table (fieldshere);';
$pds=$db->pdo->prepare($sql);
$pds->execute(array(datahere));

$_SESSION['userid'] = $db->pdo->lastInsertId(); 
```

我遇到的问题是它返回前一个记录号 - 例如：如果它刚刚写入记录号 100，它返回号 99。

我可以在表格行号上看到自动增量，这看起来很正常。例如：如果表行当前为 100，则自动增量为 101（用于下一行）。

该表从 0 号开始，但仍不确定这是否有任何问题。

任何事情都是该表有一个用户标识列，该列具有自动增量，这是我需要的数字。

有什么理由让我得到前一个行号？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:26:20.630

如果您使用的是 postgreSQL，您可能会在此处发布相同的问题： [Get last insert id after a prepare insert with PDO](https://stackoverflow.com/questions/5057954/get-last-insert-id-after-a-prepared-insert-with-pdo)

您可能应该指定 lastInsertId() 方法的“名称”参数：“应该从中返回 ID 的序列对象的名称。”

# jquery - 如何检查 DIV 是否包含具有相对 src 路径的 IMG 标签？

> ID：15404611
> 
> 赞同：1
> 
> 时间：2013-03-14T08:44:25.927
> 
> 标签：jquery, html, image

我正在将一个 HTML 页面拉到一个包含各种标签（img、div 等）的服务器上。

在客户端，我将它插入到一个 div 中，以便它完全像 html 文件一样显示。它可能包含图像和文本。但有时也有 img 标签，其 src 有相对路径。

如何识别这些不引用完整 http/https（绝对路径）而是以“/”开头的 img 标签以识别它是相对的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:53:08.943

如果您用来显示它的 DIV 有一个标识符，那么您可以尝试通过使用来获取该 div 的子项

```
$("#divID").children().find("img").each(function(){ 
    if(($(this).attr("src")).indexOf("PATH")>0) 
    { Do whatever.. } 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:47:51.217

*   您可以使用[`.find()`](http://api.jquery.com/find/)方法来检查 div 是否包含`img`
*   您可以使用[`.attr()`](http://api.jquery.com/attr/)方法来获取`src`

您可以使用字符串函数/正则表达式来检查`src`属性是否以 开头`http`，`https`或者`/`相应地更改它。

例子：

```
$("#div1").find("img").length                  // returns the number of images inside #div1
$("#div1").find("img").each(function () {
    var src = $(this).attr("src");             // grab the src "attribute"
    console.log(src);
    console.log(src.indexOf("/") == 0);        // true -> starts with /
    console.log(src.indexOf("http://") == 0);  // true -> starts with http://
    console.log(src.indexOf("https://") == 0); // true -> starts with https://
}); 
```

# c# - 通过正则表达式获取带有类名的方法名

> ID：15404612
> 
> 赞同：0
> 
> 时间：2013-03-14T08:44:34.430
> 
> 标签：c#, regex, pattern-matching

我有一个 .cs 文件，其中包含以下代码

```
namespace Automate
{
    class Class1
    {
        public string GetString
        {
            get;
            set;
        }
        private bool flag1;
        private bool flag2;
        public void Method(bool param1)
        {
            bool flag = false;
        }
    }
    class Class2
    {
        private bool flag1;
        private bool flag2;
        public void Method(bool param1)
        {
            bool flag = false;
        }
    }
} 
```

现在我想要一个正则表达式，它返回每个方法名、属性名和全局变量及其关联的类名和命名空间。

谁能告诉我任何可能的解决方案或想法。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:53:00.840

好的，正如@volpav 所写，不建议使用这种正则表达式......但我创建了一个符合您的一些期望的正则表达式。然而这是我匆忙拼凑起来的东西，我非常有信心这里有很多人可以编写无法匹配的代码。我只能给你一个起点，然后你必须从那里弄清楚。（例如，这将不匹配没有任何访问修饰符的函数，您必须对其进行整理）

无论如何，这是我的建议：

`\s*(static)?\s*(public|private)\s*\w+\s*(\w+)\s*(\(\s*\w*(,?\s*\w+)*\))?`

但是，我真的可以推荐您使用以下页面： http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)来帮助您使用正则表达式！

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:54:10.710

不要使用正则表达式进行这种分析。您将无法构建一个健壮的解析器（例如，返回具有完全限定类型名称的结果的方法、返回泛型类型的泛型方法等。当然，这一切都取决于您的任务的具体情况）。

如果您在 .NET 4.5 下进行开发，我会使用[Roslyn](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx) - 它是完成此类工作的完美工具，而且相对容易上手。另一种方法是编写一个简单的[标记](http://en.wikipedia.org/wiki/Tokenization)器并用它收集类结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:34:09.360

实际上，有时您可能需要在编译之前从源代码中提取信息（因此反射已结束），并且您可能无法使用 Roslyn。特别是，当您需要 T4 模板中的信息来生成将与源代码一起编译的代码时。

我为 VB.NET 编写了以下代码（尚未测试），以便将类名、属性名和类型提取到命名的捕获组中：

```
Static regexClassName As New Regex("(?<=^[^']*\bclass\s)(?<class>\b\w*)", RegexOptions.Compiled Or RegexOptions.CultureInvariant Or RegexOptions.IgnoreCase Or RegexOptions.Multiline)
Static regexProperty As New Regex("(?<=^[^']*\bproperty\s)(?<property>\b\w*)\s[Aa]s\s(?<type>\b\w*)", RegexOptions.Compiled Or RegexOptions.CultureInvariant Or RegexOptions.IgnoreCase Or RegexOptions.Multiline) 
```

这些正则表达式不应匹配注释掉的代码。

C# 等效项应该类似于`(?<=^[^/]*\bclass\s)(?<class>\b\w*)`获取类名称。

# c - 无法使用 SSL 支持连接到 RabbitMq-c

> ID：15404613
> 
> 赞同：0
> 
> 时间：2013-03-14T08:44:42.230
> 
> 标签：c, ssl, openssl, rabbitmq

我正在尝试使用命令行在[rabbitmq-c 库](https://github.com/alanxz/rabbitmq-c)（ssl-plumbing 分支）中运行 SSL 示例“amqps_listenq”

```
$./amqps_listenq [ServerIP]  5671 hello ./cacert.pem ./key.pem ./cert.pem 
```

我收到以下错误

```
opening SSL/TLS connection 
```

当我尝试调试代码时，它在 main 的以下块中失败

```
status = amqp_socket_open(socket, hostname, port);
if (status) {
    die("opening SSL/TLS connection");
} 
```

当我调试“amqp_socket_open”方法时，我发现它在 amqp_openssl.c 的以下块中失败

```
if (self->verify) {
    int status = amqp_ssl_socket_verify(self, host);
    if (status) {
        return -1;
    }
} 
```

我追踪了 amqp_ssl_socket_verify 里面的错误，发现我在下面的块中失败了

```
#ifdef _MSC_VER
#define strcasecmp _stricmp
#endif
    if (strcasecmp(host, (char *)utf8_value)) {
        goto error; //<-- it fails here
    }
#ifdef _MSC_VER
#undef strcasecmp
#endif
exit:
    OPENSSL_free(utf8_value);
    return status;
error:
    status = -1;
    goto exit; 
```

状态等于-1 知道问题出在哪里吗？

请注意，即使我没有使用以下代码设置证书，我也可以使用 java 在同一服务器上使用 SSL 轻松连接到 RabbitMq

```
ConnectionFactory factory = new ConnectionFactory();
factory.setHost("[ServerIP]");
factory.setPort(5671);
factory.useSslProtocol();
factory.setUsername("guest");
factory.setPassword("guest");
Connection connection = factory.newConnection();
Channel channel = connection.createChannel();

channel.queueDeclare("hello_ssl", false, false, false, null);
System.out.println(" [*] Waiting for messages. To exit press CTRL+C");

QueueingConsumer consumer = new QueueingConsumer(channel);
channel.basicConsume(QUEUE_NAME, true, consumer);

while (true){
  QueueingConsumer.Delivery delivery = consumer.nextDelivery();
  String message = new String(delivery.getBody());
  System.out.println(" [" + i + "] Received '" + message + "'");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T21:31:33.150

我一直在调试 librabbitmq，我看到了完全相同的行为。utf8_value 变量包含“amqp”，而主机变量包含 amqp 服务器主机名。

我有一个解决方法：

```
-  if (strcasecmp(host, (char *)utf8_value)) {
-    goto error;
+
+  if(strcasecmp((char *)utf8_value, "amqp")) {
+    if (strcasecmp(host, (char *)utf8_value) ) {
+      goto error;
+    }
   } 
```

我在这里分叉和修补：[https ://github.com/drainware/rabbitmq-c](https://github.com/drainware/rabbitmq-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-09T08:29:38.720

问题出在证书上，验证证书详细信息中的域是否匹配。

# metrics - Graphite - 多档案级检索问题

> ID：15404618
> 
> 赞同：2
> 
> 时间：2013-03-14T08:45:10.973
> 
> 标签：metrics, graphite, statsd, ganglia

我使用以下保留设置配置了我的文件：

```
retentions = 10s:7d,1m:30d,5m:1y 
```

这确实有效，但是我的问题是网络应用程序决定从较低的存档而不是较高的存档中获取数据。例如：由于我的分辨率为每 1 周 10 秒，我希望如果我查看的时间少于 1 周（在我的情况下，我只是查看数据 1 天），那么将从第一级检索数据（精确到 10 秒），但是网络应用程序从下一级提取数据，因此我得到的是平均数据。

我在文档中找到了这个：

“检索数据时（按时间范围），使用第一个可以满足整个时间段的存档。如果时间段与存档边界重叠，将使用**较低分辨率的**存档。这允许更简单的行为同时检索数据，因为数据的分辨率在整个返回的系列中是一致的。”

我怎样才能让石墨从最高分辨率的档案中获取数据？我的意图是在 1 周（10 秒）内获得高分辨率，而下一个级别是 30 天，以获得 1 分钟的分辨率。

有没有办法实现这一点，或者重新配置我的存储模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:22:38.917

经过进一步调查，我发现了问题。

当我通过“Fetch”命令直接查询 Whisper 时，它确实按预期从更高级别获得了值。当我使用渲染 API 时，它也按预期工作，但是当我使用 web 应用程序图（或 SVG 格式的 API）时，它对图进行了一些平滑处理，导致它松动尖峰。当我在此期间进行一些深入研究（2 小时分辨率）时，我只能看到这些峰值。

解决方案是为每个图形使用**minXStep**属性并将其设置为 0（0.1 也足够好）。如果您使用渲染 API，只需使用 minXStep 属性（默认为 1），如果您使用仪表板区域，请转到“渲染选项”->“X 轴”->“点宽度合并阈值”并设置它一些低于 1 的值。

有关详细信息，请参阅[http://graphite.readthedocs.org/en/latest/render_api.html#minxstep](http://graphite.readthedocs.org/en/latest/render_api.html#minxstep)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:53:01.280

很高兴看到你解决了你的问题。我会发布我*会*给出的答案，因为它可能对其他人有用（即使听起来它不会在你的情况下）。

通常会发生的情况是，例如，您今天寻找一个小时，并且您获得了预期的精细分辨率，但是如果您在两周前寻找一个小时，您会获得较粗略的分辨率，因为这就是 Graphite 可用的全部。当您查看超出保留策略边界的日期范围时，您还可以发现它选择了较粗略的分辨率。在您的情况下，如果您查看过去 8 天的分辨率，您会得到 1m 的分辨率，因为即使它在*大多数*情况下都具有 10s 的分辨率，但它在第 8 天只有 1m 的分辨率，因此它对所有内容都使用 1m 分辨率.

# hadoop - 阅读 Hadoop SequenceFile：奇怪的十六进制数字流

> ID：15404622
> 
> 赞同：0
> 
> 时间：2013-03-14T08:45:25.083
> 
> 标签：hadoop, sequencefile

我正在尝试使用以下代码将一段 Hadoop SequenceFile 转换为纯文本：

```
 Configuration config = new Configuration();
    Path path = new Path( inputPath );
    SequenceFile.Reader reader = new SequenceFile.Reader(FileSystem.get(config), path, config);
    WritableComparable key = (WritableComparable) reader.getKeyClass().newInstance();
    Writable value = (Writable) reader.getValueClass().newInstance();

    File output = new File(outputPath);
    if(!output.exists()) output.createNewFile();

    FileOutputStream fos = new FileOutputStream(output);
    BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(fos, "utf-8"));

    int count = 0;

    try {
        while(reader.next(key,value) && count < 1000)
        {
            bw.write("Key::: " + key);
            bw.newLine();
            bw.write("Value::: " + value);
            bw.newLine();
            bw.newLine();
            count++;
        }
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    reader.close();
    bw.close(); 
```

密钥可以正确转换。但是，这些值将转换为奇怪的 HEX 数字流。一个样本是：

```
Value::: 1f 8b 08 00 00 00 00 00 00 03 e5 bd f9 7b 13 47 d6 28 fc 73 e6 79 e6 7f e8 28 17 6c 5f bc 68 5f 6c e4 5c 96 64 26 33 c9 24 37 cb bc ef 3b 0c 9f 9f 56 77 cb ee 58 96 34 5a 20 8e e3 3f 46 56 c2 10 30 c4 8b e4 4d 5e b1 6c 4b f2 22 59 b2 65 63 48 08 04 42 12 c2 9e 00 21 cb f3 9d 53 d5 2d b5 64 4b 16 33 
```

真正的流比这要长得多。我所知道的是，键存储为`Hadoop Text`格式，值存储为`Hadoop BytesWritable`. 这些值可能是中文的，但我不确定。

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:14:28.870

您说这些值存储为`BytesWritable`. 这映射到`byte[]`Java 中的一个字节数组——这正是正在打印的内容，因为该`toString()`方法被重载来执行此操作。

您还提到字节可能是中文文本。如果要输出，则需要将字节编码为`String`. 你应该换行

```
bw.write("Value::: " + value); 
```

给其他几个人。

```
byte[] strBytes = ((BytesWritable) value).getBytes();
bw.write("Value::: " + new String(strBytes, Charset.forName("UTF-8"))); 
```

这假设中文字符串是使用“UTF-8”编码的，现在可能就是这种情况。如果您不知道确切的编码，您将不得不尝试不同的编码并查看哪些有效。

# sql-server - 使用关系表 MS-SQL 过滤表

> ID：15404623
> 
> 赞同：2
> 
> 时间：2013-03-14T08:45:32.457
> 
> 标签：sql-server

我需要在 MS-SQL 数据库中过滤带有关系表的表。

我得到：

```
persId  persName1   catId

 4        Hans        0
 4        Hans        51
 4        Hans        73
 5        Torleif     0
 5        Torleif     5
 5        Torleif    73
 5        Torleif    76
 6        Peter       0
 6        Peter      51
 6        Peter      73
 7        Jonas       0
 7        Jonas      16
 7        Jonas      73 
```

和：

```
SELECT   distinct  tblPerson.persId
, tblPerson.persName1
, relCatPers.catId
FROM         tblPerson LEFT OUTER JOIN
             relCatPers ON tblPerson.persId = relCatPers.persId 
```

* * *

但是我需要。删除 catId 为 51 的那些。并且名称和 ID 仅出现 1 次：

```
persId  persName1

  5         Torleif
  7         Jonas 
```

桌子：

```
CREATE TABLE [dbo].[tblPerson](
    [persId] [int] IDENTITY(1,1) NOT NULL,
    [persName1] [varchar](255) NULL,
CONSTRAINT [PK_tblPerson] PRIMARY KEY CLUSTERED 
)

CREATE TABLE [dbo].[relCatPers](
    [rcpId] [int] IDENTITY(1,1) NOT NULL,
    [catId] [int] NOT NULL,
    [persId] [int] NOT NULL,
CONSTRAINT [PK_relCatPers] PRIMARY KEY CLUSTERED
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:48:02.887

尝试这个：

[**Fiddle 1 演示在这里**](http://sqlfiddle.com/#!3/a0dc6/15)

```
select distinct p.persId, p.persName1 
from   tblPerson p left join 
         relCatPers c on p.persId = c.persId
where  p.persId not in
       (select persId from relCatPers where catId = 51) 
```

或者您可以忽略`relCatPers`表格并执行以下操作

**[Fiddle 2 演示在这里](http://sqlfiddle.com/#!3/a0dc6/23)**

```
select p.persId, p.persName1 
from   tblPerson p 
where  p.persId not in
       (select persId from relCatPers where catId = 51) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:50:32.397

尝试这个 ：

```
With cte as 
(Select persId,persName1,
        row_number() over (partition by persId,persName1 order by persID) as rn
 from tblPerson 
)
Select cte.persID,cte.persName1
from relCatPers
left join cte
on tblPerson.persId = relCatPers.persId
where relCatPers.catid=51  and
rn=1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T09:16:14.737

我已经编辑了查询，因此它不会返回您的问题中定义的 catId：

```
SELECT distinct
       tblPerson.persId
       ,tblPerson.persName1
FROM   tblPerson
LEFT OUTER JOIN relCatPers ON tblPerson.persId = relCatPers.persId
WHERE  tblPerson.persId NOT IN 
       (SELECT persId FROM relCatPers WHERE catId = 51); 
```

如果您想添加额外的 catId 以排除人员，您可以`WHERE`将子查询中的子句更改为 example `WHERE catId IN (16, 23, 51)`。

# hibernate - 无法更改 Java Web 应用程序的时区

> ID：15404624
> 
> 赞同：0
> 
> 时间：2013-03-14T08:45:34.913
> 
> 标签：hibernate, jsf, web-applications, time, zone

我有网络应用程序。它显示的是美国时间。我希望它显示印度时间。我已经尝试设置属性使用`System.getProperty().setProperty("user.country","IN");`，`System.getProperty().setProperty("user.variant","IN");`但它仍然显示使用时间。

我什至尝试过`Locale.setDefault(new Locale("en", "IN"));`但徒劳无功。

当我这样做时

```
SimpleDateFormat format = new SimpleDateFormat("yyyyy.MMMMM.dd GGG hh:mm aaa -- z");
System.out.println("Date: "+format.format(new Date())); 
```

结果是`Date: 02013.March.14 AD 12:29 AM -- GMT-08:00`。我究竟做错了什么。

它是部署在 tomcat 6 中的 JSF 1.1 和 Hibernate 3 项目。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:51:02.017

尝试这个

```
 SimpleDateFormat f = new SimpleDateFormat("yyyyy.MMMMM.dd GGG hh:mm aaa -- z");
    f.setTimeZone(TimeZone.getTimeZone("IST"));
    System.out.println(f.format(new Date())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:51:58.787

添加这一行：

```
format.setTimeZone(TimeZone.getTimeZone("IST")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:11:26.503

你的问题令人困惑。真的是美国时间吗？JSF 默认为 UTC。如果确实是美国时间（例如 EDT），那么它应该在所有标签的`timeZone`属性中明确配置为这样。`<f:convertDateTime>`您需要做的就是将“EDT”更改为“IST”。但这是一个非常明显的解决方案，我认为你实际上不是在运行美国时间，而只是在运行 UTC。

您解决问题的尝试也令人困惑。您说并标记了您正在使用 JSF，但您不是试图用 JSF 方式解决它，而是用普通的 Java 方式来解决它。这实际上不是您应该在 JSF 中转换日期/时间的方式。您应该`<f:convertDateTime>`用于工作而不是`SimpleDateFormat`.

在任何情况下，您都需要配置所有`<f:convertDateTime>`标签以将`timeZone`属性显式设置为`IST`.

```
<h:outputText value="#{bean.date}">
    <f:convertDateTime timeZone="IST" />
</h:outputText> 
```

请注意，如果您使用的是 JSF 2.x，那么您还可以设置一个`web.xml`上下文参数以在应用程序范围内应用此更改。另请参阅[为 f:convertDateTime 设置默认时区](https://stackoverflow.com/questions/7490954/set-a-default-timezone-for-fconvertdatetime/7491706#7491706)。

# php - 调用未定义的方法 dbConnection::query() - 如何解决？

> ID：15404626
> 
> 赞同：0
> 
> 时间：2013-03-14T08:45:45.047
> 
> 标签：php, mysql, database, oop, web

我刚来这地方。我正在开发的网站有问题。你能帮我解决一下吗。

这是完整的错误声明：

> 致命错误：在第 20 行的 C:\xampp\htdocs\koa\classes\class.ManageUsers.php 中调用未定义的方法 dbConnection::query()。

我以面向对象的方式使用 PHP 和 MySQL。

这是错误指向的 class.ManageUsers.php 中的代码。我将把整个函数放在这里：。

```
function LoginUsers($username,$password){
    $query = $this->db->query("SELECT * FROM users WHERE username = '$username' AND password = '$password'");
    $num_rows = $this->link->fetchRows();
    return $num_rows;
} 
```

第 20 行是：

```
$query = $this->db->query("SELECT * FROM users WHERE username = '$username' AND password = '$password'"); 
```

还有这里的构造函数：

```
function __construct(){
    $this->db = new dbConnection();
    $this->db->connect();
} 
```

dbConnection 类是这样的：

```
class dbConnection{
    protected $db_conn, $_query, $_numRows, $_fetchAll;
    public $db_name = '******';
    public $db_user = '******';
    public $db_pass = '******';
    public $db_host = '******';

    function connect(){ 
        $this->db_conn = mysql_connect($db_host, $db_user, $db_pass);
        mysql_select_db($db_name, $this->db_conn);
        if(mysql_errno($this->db_conn){
            return mysql_error($this->db_conn);
        }
        else{
            return $this->db_conn;
        }
    }

    public function query($sql){
        $this->_query = mysql_query($sql, $this->db_conn);
        $this->_numRows = mysql_num_rows($this->_query);
        $this->_fetchAll = mysql_fetch_array($this->_query);
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:55:54.277

请尝试使用下面的代码给出 dbConnection.php 文件的正确路径，这只是示例代码。

```
function __construct(){
include_once('dbConnection.php");
    $this->db = new dbConnection();
    $this->db->connect();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:38:35.390

看起来您没有使用您期望的课程版本。您可以通过以下方式进行测试

```
class ... {
  function LoginUsers($username,$password){
    ..
    foo($this->db, 'query');
    $query = $this->db->query("SELECT * FROM users ...")
    ..
  }
  ...
}

function foo($obj, $testFnExists=null) {
    $abort = false;
    $ro = new ReflectionObject($obj);
    printf("<pre>\nClass: %s\n", $ro->getName()); 
    printf("defined at %s@%d\n", $ro->getFileName(), $ro->getStartLine());
    printf("object has the following public methods:\n");
    foreach( $ro->getMethods(Reflectionmethod::IS_PUBLIC) as $m ) {
        printf("  %s\n", $m->getName());
    }
    if ( !is_null($testFnExists) ) {
        if ( !$ro->hasMethod($testFnExists) ) {
            $abort = true;
            $methodExists = 'no';
        }
        else {
            $methodExists = 'yes';
        }
        printf("method '%s' exists: %s\n", $testFnExists, $methodExists);
    }
    printf("</pre>\n");
    flush();
    if ( $abort ) {
        die;
    }
} 
```

输出应该类似于

```
<pre>
Class: dbConnection
defined at test.php@4
object has the following public methods:
  foo1
  foo2
method 'query' exists: no
</pre> 
```

# statistics - 如何在 gnuplot 中生成具有可变框宽的盒须图？

> ID：15404628
> 
> 赞同：7
> 
> 时间：2013-03-14T08:12:43.573
> 
> 标签：statistics, gnuplot, data-visualization, boxplot

我正在尝试使用 gnuplot 可视化我拥有的数据集（在 Java 中，但这并不重要）。我可以问几个不同的问题，但现在：假设我的数据是分类的，对于每个类别，我有四分位数 1、2、3、最小值和最大值，以及该类别中样本的总权重（但不是实际样本数据）。我想用 GNUplot 'candlesticks' 来绘制它。我几乎可以得到这个：

![“烛台”情节](../Images/2f1651e78d3b5126e28276293803a202.png)

除了使用框宽度可视化样本的重量。

这可以在 gnuplot '烛台' 情节中完成吗？还有什么办法？

**注意：**我最感兴趣的是用 gnuplot 来做这件事。仅当其他建议易于编写脚本并且不需要安装太多附加软件时，它们才会受到欢迎。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T08:37:06.980

好的，我知道了。

示例脚本：

```
set terminal pngcairo  transparent enhanced font "arial,10" fontscale 1.0 size 500,    350 
set output 'candlesticks.png'
set boxwidth 0.2 absolute
set title "Box-and-whisker plot with median bar, whiskerbars, and variable box width" 
set xrange[0:5]
set yrange[0:25]

# Data columns: X Min 1stQuartile Median 3rdQuartile Max BoxWidth Titles

# set bars 4.0
set style fill empty
plot 'data.txt' using 1:3:2:6:5:7:xticlabels(8) with candlesticks title 'Quartiles' whiskerbars, \
  ''         using 1:4:4:4:4:7 with candlesticks lt -1 notitle 
```

样本内容`data.txt`：

```
# Data columns: X Min 1stQuartile Median 3rdQuartile Max BoxWidth Titles
1 5 7 10 15 24 0.3 Quick
2 6 8 11 16 23 0.4 Fox
3 5 7 11 17 22 0.5 Lazy
4 6 9 10 18 21 0.3 Dog 
```

（请注意，`#`行只是注释，我们并没有真正指定列名。）

结果：

![阴谋](../Images/06707b2efc1a4fd326b6e51030c1ff84.png)

# c# - 如何获取具有指定属性的所有字段的列表？

> ID：15404634
> 
> 赞同：6
> 
> 时间：2013-03-14T08:46:01.090
> 
> 标签：c#, attributes, field, roslyn

我正在尝试查找具有指定属性的字段。我尝试修改 FirstQuickFix 示例，因为我认为这可能是一个很好的起点。但是如果我运行代码，什么都不会发生。任何想法我的主要问题是什么？

在阅读了项目概述和演练文档后，我的理解是，我能够请求令牌的属性，这是我在语法树中找到的。语法树是源代码的精确树表示。字段声明及其属性的连接可通过语义访问。还是我的理解完全错误？

```
[ExportCodeIssueProvider("FirstQuickFix_", LanguageNames.CSharp)]
class CodeIssueProvider : ICodeIssueProvider
{
    public IEnumerable<CodeIssue> GetIssues
      (IDocument document, CommonSyntaxNode node, CancellationToken cancellationToken)
    {
        var tokens = from nodeOrToken in node.ChildNodesAndTokens()
                     where nodeOrToken.HasAnnotations(Type.GetType("myAttribute"))
                     select nodeOrToken.AsToken();

        foreach (var token in tokens)
        {
            var issueDescription = string.Format("found!!!");
            yield return new CodeIssue(CodeIssueKind.Info, token.Span, issueDescription);
        }
    }
} 
```

编辑：

我想要实现的，就是找到ie。具有属性 myAttribute 的所有字段：

```
namespace ConsoleApplication
{
    class Program
    {
        [myAttribute]
        string myField = "test";

        public void testing()
        {
            Console.WriteLine(myField);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T19:33:31.357

为此，您可以使用 LINQ 获取`AttributeSyntax`具有指定名称的所有节点，然后使用`Parent`(两次) 获取表示该字段的节点：

```
var fields = root.DescendantNodes()
                 .OfType<AttributeSyntax>()
                 .Where(a => a.Name.ToString() == "myAttribute")
                 .Select(a => a.Parent.Parent)
                 .Cast<FieldDeclarationSyntax>(); 
```

这是最原始的版本，仅适用于句法级别，因此如果您在另一个命名空间中有同名的属性，使用属性的全名（包括命名空间）或`using`使用使用别名引用属性类型。

如果您想支持它，您将需要获取语义模型，然后获取表示属性类型的符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-30T21:52:02.573

对于您提供的已编辑示例，您可以将 LINQ 查询与 Type.GetField 方法结合使用：

```
using System.Collections.Generic;
using System.Linq;

class TestAttribute : System.Attribute { }

class State
{
    [Test] string name;
    [Test] string address;
    [Test] public string name2;
    [Test] public string address2;
    float height;
    public State(string name_, string address_, float height_)
    {
        name = name_;
        address = address_;
        height = height_;
        name2 = name_ + "2";
        address2 = address_ + "2";
    }
}

public class Program
{
    static void ShowFields<T>(IEnumerable<T> fieldList)
    {
        foreach (var field in fieldList)
        {
            System.Console.WriteLine(field.ToString());
        }
    }

    public static void Main(string[] args)
    {            
        State s = new State("Bob", "221 B Baker Street", 5.4f);
        System.Type stateType = typeof(State);
        System.Reflection.FieldInfo[] publicFieldList = stateType.GetFields();
        System.Console.WriteLine("----all public fields----");
        ShowFields(publicFieldList);

        System.Console.WriteLine("----all non public or instance fields----");
        System.Reflection.FieldInfo[] nonPublicFieldList;
        nonPublicFieldList = stateType.GetFields(System.Reflection.BindingFlags.NonPublic| System.Reflection.BindingFlags.Instance);
        ShowFields(nonPublicFieldList);

        var customAttributeFieldList = from t in stateType.GetFields()
        where t.GetCustomAttributes(false).Any(a => a is TestAttribute)
        select t;
        System.Console.WriteLine("----only public fields marked with a particular custom attribute----");
        ShowFields(customAttributeFieldList);
    }
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-15T03:21:06.983

这是工作代码示例，用于迭代类中具有自定义属性的属性。您可以将此提示用于“如何获取具有指定属性的所有字段的列表？”。

```
class Program
{
    static void Main(string[] args)
    {
        MyClass myClass = new MyClass();

        var type = myClass.GetType();

        foreach (var property in type.GetProperties())
        {
            //Get ALL custom attributes of the property
            var propattr = property.GetCustomAttributes(false);

            //Get MyAttribute Attribute of the Property
            object attr =
                (from row in propattr
                 where row.GetType() == typeof(MyAttribute)
                 select row).FirstOrDefault();
            if (attr == null || !(attr is MyAttribute))
                continue;

            var myAttribute = attr as MyAttribute;

            //output: NameAttrValue and AgeAttrValue 
            Console.WriteLine(myAttribute.Val);

            //Output: Name and Age
            Console.WriteLine(property.Name);
        }
    }
}

public class MyClass
{
    [My("NameAttrValue")]
    public string Name { get; set; }

    [My("AgeAttrValue")]
    public int Age { get; set; }

    public MyClass()
    {
        this.Name = "Jac";
        this.Age = 27;
    }
}

public class MyAttribute : Attribute
{
    public MyAttribute(string val)
    {
        this.Val = val;
    }

    public string Val { get; set; }
} 
```

# java - JPA Eclipselink 获得错误的序列号

> ID：15404636
> 
> 赞同：3
> 
> 时间：2013-03-14T08:46:18.290
> 
> 标签：java, jpa, eclipselink, sequence

我正在使用一些映射到 Oracle DB 表的实体。对于 ID-Generation，我使用了一个序列生成器，注释如下：

```
@Id
@SequenceGenerator(name = "SEQ_RULES", sequenceName = "SEQUENZ_RULES")
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "SEQ_RULES")
@Column(name = "SERIALNO")
protected Long serialno; 
```

在程序执行期间，我从我的实体创建了一个新实例，并希望保留这个生成的实例。重新启动数据库后，我通过 JPA-EclipseLink 获得了错误的序列号，但不是直接通过数据库上的控制台。

我在 persistence.xml 中打开了以下属性，以获取生成语句中使用的绑定参数。

```
<properties>
  <property name="eclipselink.logging.level" value="FINE"/>
  <property name="eclipselink.logging.parameters" value="true"/>
</properties> 
```

例如：如果我生成我的实体的一个新实例并希望保留这个实例，我会得到 2717 的 serialNo 并且如果我执行

```
SELECT SEQUENZ_RULES.NEXTVAL FROM DUAL 
```

我得到 2767 作为 nextval。问题是 JPA 生成的序列号必须是唯一的，现在我还有一些带有这个序列号的数据集。我得到一个例外：

```
java.sql.SQLIntegrityConstraintViolationException: ORA-00001: unique constraint (JASON.SYS_C0084866) violated 
```

非 Eclipse 是否有任何影响序列生成的缓存，或者这可能是什么错误？

*使用的组件：
GlassFish 3.1.1
EclipseLink 2.3.0.v20110604-r9504
数据库：Oracle 版本：Oracle 数据库 11g 版本 11.1.0.7.0 - 64 位
驱动程序：Oracle JDBC 驱动程序版本：11.2.0.1.0*

**提前致谢**

*亚当*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T08:52:51.453

创建序列时，您指定了要递增的大小。例如，此序列以 1 递增。

```
CREATE SEQUENCE supplier_seq
  MINVALUE 1
  MAXVALUE 999999999999999999999999999
  START WITH 1
  INCREMENT BY 1
  CACHE 20; 
```

在 JPA 中使用`SequenceGenerator`注解时，您可以指定分配大小。

```
@Id
@SequenceGenerator(name = "SEQ_RULES", sequenceName = "SEQUENZ_RULES",
    allocationSize=1)
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "SEQ_RULES")
@Column(name = "SERIALNO")
protected Long serialno; 
```

确保 JPA 和 Sequence DDL 之间的分配大小和增量匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-10T20:39:00.837

**将 allocationSize= 1**更改为 allocationSize= **2**，这是一个 Eclipselink 错误。

# css - excel文件中应该使用什么公式

> ID：15404642
> 
> 赞同：0
> 
> 时间：2013-03-14T08:46:44.610
> 
> 标签：css, excel

我需要从我的样式中删除未使用的 CSS 类。

因此，我浏览了所有页面，并从每个页面中收集了未使用的 css，并将其列在一个 excel 文件中。现在我只想过滤整个网站中未使用的 css 类。

我应该在这里使用什么公式来解决我的问题？如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:07:12.240

css lint 是开源的，mo betta [http://csslint.net/](http://csslint.net/)

# java - org.apache.solr.analysis.BufferedTokenStream 类在 solr 4.x 中移动或删除？

> ID：15404643
> 
> 赞同：2
> 
> 时间：2013-03-14T08:46:46.490
> 
> 标签：java, solr, lexical-analysis, solr4

我正在从 solr 3.6.2 升级到 solr 4.1.0。我在使用`BufferedTokenStream`类时遇到了这个问题。这个类是否在 solr 4.1.0 中被删除、移动或重命名？

我遇到的错误是：

> java.lang.NoClassDefFoundError: org/apache/solr/analysis/BufferedTokenStream

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:12:24.967

`org.apache.solr.analysis.BufferedTokenStream`在 solr 3.6.2 中已弃用。

[http://lucene.apache.org/solr/api-3_6_2/deprecated-list.html#class](http://lucene.apache.org/solr/api-3_6_2/deprecated-list.html#class)

`Deprecated`通常是指：

*   不推荐使用这个类
*   将来可能会删除此类

我建议`org.apache.solr.analysis.BufferedTokenStream`根据 Apache 的建议更改用法：

> 此类不支持自定义属性。而是使用支持所有属性的 AttributeSource.captureState() 和 AttributeSource.restoreState(State) 扩展 TokenFilter。

# javascript - Javascript仅在浏览器关闭时显示onunload

> ID：15404644
> 
> 赞同：1
> 
> 时间：2013-03-14T08:46:46.687
> 
> 标签：javascript, browser, cart, onunload

我目前有一个网站，它使用类似购物车的系统来临时进行查询。我目前使用 Javascript onunload 函数来阻止用户离开页面并在购物车中丢失他/她的查询。

我唯一的问题是购物车跨越多个页面，这很好，因为它是基于会话的，但是每当我尝试更改页面时，onunload 甚至会弹出并且可能非常烦人。

是否可以将 onunload 事件设置为浏览器上的关闭按钮，以便仅在他们尝试关闭它时才显示？

我希望我们能找到一些东西，因为重新设计网站并不是一个真正的选择，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:03:39.227

也许您可以使用全局变量来判断您是否要离开页面以进入购物车的下一步。

例如，在每个购物车页面中的“下一步”按钮的`onclick`或`onsubmit`事件中，您可以设置一个全局变量，指示您应该让用户离开该页面。然后，`onunload`如果您要检查是否已设置此全局，则仅在未设置时显示警告。

# xml - 尝试使用 ChildNodes.FindNode 在 XML 中查找节点

> ID：15404645
> 
> 赞同：5
> 
> 时间：2013-03-14T08:46:58.247
> 
> 标签：xml, delphi

我是 XML 新手，正在尝试使用 Delphi XE TXMLDocument 访问以下 XML 中的数据

```
<?xml version="1.0" encoding="UTF-8" ?>
<sfc:SFC xmlns:sfc="AWS_SFC">
    <ID>4294967295</ID>
    <SFC_TYPE>
        <WindSpeed>18</WindSpeed>
        <WindDir>123.6</WindDir>
        <Temperature>22.9</Temperature>
        <Pressure>1013.25</Pressure>
        <Humidity>57.9</Humidity>
        <DewPoint>16.8</DewPoint>
    </SFC_TYPE>'
    <Location>
        <longitude>18.5</longitude>
        <latitude>-34.5</latitude>
        <altitude>50.8</altitude>
    </Location>
    <StampDateTime>2012-12-17T09:30:47.0Z</StampDateTime>
</sfc:SFC> 
```

我的代码是这样开始的：

```
var
  SFC_Info: IXMLNode;
  SFC_Type: IXMLNode;
begin
  SFC_Info := XMLDocument1.DocumentElement;
  SFC_Type := SFC_Info.ChildNodes.First;
  while (SFC_Type.NodeName <> 'SFC_TYPE') do
    SFC_Type := SFC_TYPE.NextSibling;
  memDebug.Lines.Add('Wind speed = ' + SFC_Type.ChildNodes.FindNode('WindSpeed').Text);
  etc 
```

这可以满足我的要求，但是使用循环似乎很乱。我原以为可以通过以下方式访问“SFC_TYPE”节点

```
 SFC_Type := SFC_Info.ChildNodes.FindNode('SFC_TYPE'); 
```

但这返回零。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T09:56:32.590

根节点使用命名空间 (AWS_SFC)。因此，XML 文档中的子节点必须携带相同的名称空间，而您的 XML 文档中并非如此。

只需在过程中添加一个空白`NameSpaceURI`参数`FindNode`，它就会找到节点：

```
SFC_Type := SFC_Info.ChildNodes.FindNode('SFC_TYPE', ''); 
```

# html - 如何复制 dijit.Tooltip 中的文本

> ID：15404648
> 
> 赞同：0
> 
> 时间：2013-03-14T08:47:05.677
> 
> 标签：html, tooltip, dojo

*   在鼠标悬停时，我在工具提示中显示一些文本。
*   单击鼠标时，我想复制工具提示中的文本。是否可以复制工具提示中的文本。

工具提示代码：

```
 <img id="tooltipicon1" onclick="toolTipProperty('toolTipMain1')" src="images/tooltip_icon.gif" onmouseover="dijit.Tooltip.defaultPosition=['after','before']">
<div connectid="tooltipicon1" dojotype="dijit.Tooltip" id="toolTipMain1" label="">
<p style="width:250px;">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut Tip With Caption enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:03:12.407

我得到了解决方案。可以使用 dijit/TooltipDialog 完成

html:

```
<div id="thenode">Move the mouse over me to pop up the dialog.</div> 
```

脚本：

```
 require([
    "dijit/TooltipDialog",
    "dijit/popup",
    "dojo/on",
    "dojo/dom",
    "dojo/domReady!"
    ], function(TooltipDialog, popup, on, dom){
    var myTooltipDialog = new TooltipDialog({
        id: 'myTooltipDialog',
        style: "width: 300px;",
        content: "<p>I have a mouse leave event handler that will close the dialog.",
        onMouseLeave: function(){
            popup.close(myTooltipDialog);
        }
    });

    on(dom.byId('thenode'), 'mouseover', function(){
        popup.open({
            popup: myTooltipDialog,
            around: dom.byId('thenode')
        });
    });
}); 
```

# lambda - Lambda 架构——这个名字的由来是什么？

> ID：15404649
> 
> 赞同：16
> 
> 时间：2013-03-14T08:47:08.620
> 
> 标签：lambda, bigdata, lambda-architecture

我已经阅读了 Manning 的大数据 Lambda 架构 ( [http://www.manning.com/marz/BD_meap_ch01.pdf](http://www.manning.com/marz/BD_meap_ch01.pdf) )，但仍然无法理解为什么它被命名为“Lambda”。它是这个架构所基于的系统的代号或名称吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-16T04:29:36.320

在我看来，Lambada Architecture 的两个核心原则是

1.  拥抱数据不变性
2.  所有查询都可以在整个数据集上被表述为纯函数（没有副作用）

这些不变性和纯函数的属性是函数式编程的核心原则，而函数式编程又起源于 Alonzo Church 的 Lambda Calculus。因此，Nathan Marz 必须将此架构命名为 Lambda 架构。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-14T09:11:43.580

它是由美国数学家 Alonzo Church 选择的，他在 1930 年代发展计算理论时需要一个希腊字母来表示函数抽象的运算符。不同的人问他为什么选择那封信，他给了他们不同的答案（但最重要的是，他并不是很在意）。有关更多详细信息和一些链接，请参阅[http://www.lambdafaq.org/why-are-lambda-expressions-so-called/](http://www.lambdafaq.org/why-are-lambda-expressions-so-called/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-31T19:20:41.067

我认为它只是字母“Lambda”。看起来数据分为两个流。

# jquery - Jquery 工具提示始终保持打开状态

> ID：15404654
> 
> 赞同：-3
> 
> 时间：2013-03-14T08:47:16.623
> 
> 标签：jquery, tooltip

在我访问页面的整个过程中，我是否可以让内置的 jquery 工具提示保持打开状态？

我不想使用任何外部库。

编辑：我想实现类似信息泡泡的东西，它会在按钮上方保持打开状态以获取更多信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T09:21:57.780

要防止工具提示关闭，您可以阻止`mouseleave`事件冒泡（导致工具提示关闭）。

```
$("a").on('mouseleave', function (event) {
    event.stopImmediatePropagation();
}).tooltip(); 
```

[JSF](http://jsfiddle.net/jRwf7/)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:07:05.720

我猜你正在寻找这样的东西

[http://jsfiddle.net/nLBHd/1/](http://jsfiddle.net/nLBHd/1/)

```
$(".navTabs").on({
mouseenter : function() {
   var topMeasure=$(this).offset().top +  $(this).height() + 2;
    var leftMeasure=$(this).offset().left;

    $(".arrow-up").css({
         top: topMeasure,
         left : leftMeasure+10,
        "visibility":"visible"
         })
         .show();

    $("#toolbarPopUp")
     .html($(this).attr('id'))
     .css({
     top: topMeasure + 5,
     left: leftMeasure,
     "visibility":"visible"
     })
     .show();
},
mouseleave : function() {
    $("#toolbarPopUp").hide();
    $(".arrow-up").hide();
} 
```

});

```
<div id="tabRight">
<ul>
    <li class="navTabs" id="newsFeedTab">ToolBar</li>
</ul>
</div>
<div class="arrow-up"></div>
<div id="toolbarPopUp"></div> 
```

查看 jsfiddle 链接中的实时示例......它的纯 jquery 没有额外的插件

# drupal - 更改 Drupal 的散列方法

> ID：15404664
> 
> 赞同：0
> 
> 时间：2013-03-14T08:47:37.140
> 
> 标签：drupal, hash, passwords

是否可以更改 Drupal 的密码散列方法？

# javascript - 如何使用 jquery 或 javascript 更改以下按钮的值？

> ID：15404665
> 
> 赞同：0
> 
> 时间：2013-03-14T08:47:38.560
> 
> 标签：javascript, jquery

我有两个这样的按钮：

```
 <button class="next_prev" onclick="" id="first_button" disabled>{{ pages.first }}</button>
<button class="next_prev" onclick="" id="last_button" disabled>{{ pages.last }}</button> 
```

它们将第一个和最后一个按钮显示为页码。即 1 或 5。按钮始终具有价值。我想将它们的值替换为：`|<`第一个和`>|`最后一个。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:04:44.897

使用`HTML ASCII`如下代码并使用`.html()`将其添加为 HTML，

```
$("#first_button").html('&#124; &lt;');
$("#last_button").html('&gt; &#124;'); 
```

`&#124;`是为了`|`

`&lt;`是为了`<`

`&gt;`是为了`>`

完整列表`[**`Read`**](http://ascii.cl/htmlcodes.htm)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:50:44.260

试试这个 ：

```
$('#first_button').html('new_name1');
$('#last_button').html('new_name2'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T08:51:31.097

```
$("#first_button").text('|&lt;');
$("#last_button").text('&gt;|'); 
```

# jquery - jQuery ColorBox 关闭按钮触发回发

> ID：15404666
> 
> 赞同：0
> 
> 时间：2013-03-14T08:47:40.303
> 
> 标签：jquery, asp.net

我有一个 jQuery colorBox，它会弹出一个 userControl，里面有一些 html 控件。

当用户单击带有“colorBoxLink”类的链接时，会启动颜色框：

```
$j(".colorBoxLink").click((function () {
            $j("div#popup").show();
            var editor = new wysihtml5.Editor("wysihtml5_textarea", { // id of textarea element
                toolbar: "wysihtml5-toolbar", // id of toolbar element
                parserRules: wysihtml5ParserRules, // defined in parser rules set 
                stylesheets: ["Styles/wysihtml5.css", "Styles/wysihtml5.css"]
            });

            $j.colorbox({
                inline: true,
                href: "#popup",
                modal: true,
                scrolling: false,
                onCleanup: function () {
                    $j("div#popup").hide();
                }

            });

        })); 
```

如果我单击控件，它会根据需要关闭（即，如果用户决定不添加任何内容）。但是，如果用户单击 colorBox 上的“x”按钮，则会导致回发并重新加载页面。

我该如何阻止这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:50:06.587

在javascript函数中。然后它不会回发。

```
 $j(".colorBoxLink").click((function () {
        $j("div#popup").show();
        var editor = new wysihtml5.Editor("wysihtml5_textarea", { // id of textarea element
            toolbar: "wysihtml5-toolbar", // id of toolbar element
            parserRules: wysihtml5ParserRules, // defined in parser rules set 
            stylesheets: ["Styles/wysihtml5.css", "Styles/wysihtml5.css"]
        });

        $j.colorbox({
            inline: true,
            href: "#popup",
            modal: true,
            scrolling: false,
            onCleanup: function () {
                $j("div#popup").hide();
            }

        });
        return false;
    })); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:32:05.023

Colorbox 的关闭按钮实际上是一个按钮元素，它使 ASP 将其解释为表单的一部分并尝试提交页面上的内容。您需要创建一个看起来相同的假关闭按钮（查看 colorbox.css 代码），但要么是 a 要么是标签而不是标签，然后通过 javascript 删除关闭按钮或将其隐藏在 css 中一个 !important 标签。您可以使用 ID“cboxClose”引用关闭按钮。你的假关闭按钮应该调用 jQuery.colorbox.close(); 点击。

# android - 在 Sample SoftKeyboard android IME 中看不到候选人

> ID：15404669
> 
> 赞同：1
> 
> 时间：2013-03-14T08:47:54.627
> 
> 标签：android, android-softkeyboard, ime

当我使用 Android 示例中给出的 Sample SoftKeyboard 时，不会像普通键盘那样生成候选字（单词建议）。为什么是这样？我如何获得单词建议？我正在尝试通过修改示例软键盘来实现自己的 IME，但需要单词预测。

我是否必须为 Candidate View 类提供一个单词和频率列表，如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T12:54:56.103

关于这一点有一个 tut，其中还包括候选检测（检查[[LINK]](http://www.java2s.com/Code/Android/User-Event/Exampleofwritinganinputmethodforasoftkeyboard.htm)）。另外要知道的是，所有文本区域默认启用“建议”，但会遵循全局设置，因此应用程序无法以任何方式强制启用建议。如果您关闭了全局设置，那么它们在任何地方都会关闭。因此，您可以查看在您的情况下是否也没有关闭此选项。

# c# - 使用 htmlAgilityPack 和 XPath 进行屏幕抓取

> ID：15404670
> 
> 赞同：1
> 
> 时间：2013-03-14T08:47:59.323
> 
> 标签：c#, xpath, html-agility-pack

[这个问题有一个亲戚：[使用 HTMLAgilityPack 和 XPath 进行选择性屏幕抓取](https://stackoverflow.com/questions/15404839/selective-screen-scraping-with-htmlagilitypack-and-xpath)]

我有一些要解析的 HTML，其一般外观如下：

```
...
<tr>
<td><a href="" title="">Text Data here (1)</a></td>
<td>Text Data here(2)</td>
<td>Text Data here(3)</td>
<td>Text Data here(4)</td>
<td>Text Data here(5)</td>
<td>Text Data here(6)</td>
<td><a href="link here {1}" class="image"><img alt="" src="" /></a></td>
</tr>
<tr>
<td><a href="" title="">Text Data here (1)</a></td>
<td>Text Data here(2)</td>
<td>Text Data here(3)</td>
<td>Text Data here(4)</td>
<td>Text Data here(5)</td>
<td>Text Data here(6)</td>
<td><a href="link here {1}" class="image"><img alt="" src="" /></a></td>
</tr>
... 
```

我正在寻找一种可以将其解析为有意义的块的方法，如下所示：

(1), (2), (3), (4), (5), (6), {1} `CRLF`
(1), (2), (3), (4), (5), (6) , {1}`CRLF`
等等

我尝试了两种方式：
方式1：

```
var dataList = currentDoc.DocumentNode.Descendants("tr")
                .Select
                 (
                  tr => tr.Descendants("td").Select(td => td.InnerText).ToList()
                 ).ToList(); 
```

它获取了`td`s 的内部文本，但无法获取链接 {1}。在这里，创建了一个包含许多列表的列表。我可以使用嵌套的 foreach 来管理它。

方式2：

```
var dataList = currentDoc.DocumentNode
               .SelectNodes("//tr//td//text()|//tr//td//a//@href"); 
```

which does get me the link {1} and all data but it becomes unorganized. Here, all the data is present in big chunk. Since, the data in one `tr` is relative, I now loose that relation.

So, how can I solve this problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:12:24.283

Following query selects `a` element with non-empty `href` attribute from each cell. If there is no such element, then inner text of cell is used:

```
var dataList = 
     currentDoc.DocumentNode.Descendants("tr")
               .Select(tr => from td in tr.Descendants("td")
                             let a = td.SelectSingleNode("a[@href!='']")
                             select a == null ? td.InnerText : 
                                                a.Attributes["href"].Value); 
```

Feel free to add `ToList()` calls.

# php - 带有 HTML 按钮的 MySQL

> ID：15404671
> 
> 赞同：0
> 
> 时间：2013-03-14T08:48:02.737
> 
> 标签：php, javascript, mysql, sql-update, htmlbutton

我在一个页面中有 2 个按钮。其中一个按钮保存通过 3 个文本框输入的日期。另一个调用一个函数来进行一些数据操作。

这就是我从上面提到的第一个按钮中得到的。

```
<input type="submit" name="gravarnext" value="Gravar" />

<?php
if (isset($_POST['gravarnext'])) { 
    if ($_POST['atextfield1'] <= 0 OR $_POST['atextfield2'] <= 0 OR $_POST['atextfield3'] <= 0 OR $_POST['atextfield1'] > 31 OR $_POST['atextfield2'] > 12 OR $_POST['atextfield3'] < 2013){ ?>
        <script>window.alert("Um ou mais valores são inválidos (Dia 1-31 / Mês 1-12 / Ano 2013+).");</script>
    <?php } else {
                $qp = "UPDATE login.next SET dia = '".$_POST['atextfield1']."'";
                $rqp = mysql_query($qp);
                $qp = "UPDATE login.next SET mes = '".$_POST['atextfield2']."'";
                $rqp = mysql_query($qp);
                $qp = "UPDATE login.next SET ano = '".$_POST['atextfield3']."'";
                $rqp = mysql_query($qp);
                echo $_SERVER['PHP_SELF']; ?>
                <script>window.alert("Data do próximo sorteio atualizada com sucesso!");</script>
    <?php } 
} 
```

这是第二个按钮的相应代码

```
<button onclick="myFunction()">Finalizar</button>

<script>
    function myFunction()
    {
        var r=confirm("Depois de carregar 'ok', todas as ações tomadas são irreversíveis. Desejas continuar?");
        if (r==true)
        {
            <?php
            //Refresha o palpite do utilizador para 0 e guarda o palpite antigo como ultpalpite
            $qp5 = "UPDATE login.users SET ultpalpite = palpiteatual";
            $rqp5 = mysql_query($qp5);
            //Gera o número sorteado
            $numsort = rand(1,50);
            $qp2 = "UPDATE login.sorteio SET ultsorteio = '".$numsort."'";
            $rqp2 = mysql_query($qp2);
            $qp3 = "UPDATE login.next SET numsorteado = '".$numsort."'";
            $rqp3 = mysql_query($qp3); 
            //Adiciona +1 ao vezesganhou do(s) vencedor(es)
            $qp4 = "UPDATE login.users SET vezesganhou = vezesganhou + 1 WHERE ultpalpite = '".$numsort."'";
            $rqp4 = mysql_query($qp4);
            //Atualiza data do ultimo sorteio
            $d = date('j');
            $m = date('n');
            $y = date('Y');
            $aqp1 = "UPDATE login.sorteio SET diaultsort = '".$d."', mesultsort = '".$m."', anoultsort = '".$y."'";
            $arqp1 = mysql_query($aqp1);
            ?>
        }
        else
        {
            return 1;
        }
    }
</script> 
```

所以，我的问题是，每当我单击第一个按钮（称为“Gravar”）时，除了与第二个按钮（称为“Finalizar”）关联的函数也运行之外，一切都运行得很好。这可能是什么原因造成的？不要担心 sql 漏洞和/或错误的编码。这仅用于测试目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:54:45.197

您的按钮 Finalizar 总是运行，原因很简单。

您不能将 PHP 代码与 Javascript 函数结合使用。PHP 代码在发送到客户端之前运行（因此它被称为服务器端语言）。

如果您有以下脚本：

```
function myJavascriptFunction() {
     <?php echo 'This is some PHP'; ?>
} 
```

客户将其解释为：

```
function myJavascriptFunction() {
    This is some PHP
} 
```

这会给你错误。同样，PHP 是在服务器端运行的。

为了从 Javascript 运行 PHP 代码，您需要一个叫做“AJAX”的东西。基本上你把你想做的任何事情都保存在一个单独的 PHP 文件中。您可以随时静默运行该 PHP 文件。

试试这个教程： [http ://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:02:16.147

您以错误的方式混合了 js 和 php ... PhP 将始终在 javascript 之前运行，因此 myfunction 中的 php 代码将始终运行而与条件无关。您的问题的可能解决方案可以是在确认条件为真时使用ajax的所有其他页面它可以像

```
 function myFunction()
{
    var r=confirm("Depois de carregar 'ok', todas as ações tomadas são irreversíveis. Desejas continuar?");
    if (r==true)
    {
        $.ajax{
                 url   : 'yourpage.php',
                 data  : {"data you want in page"}
              }
    }
    else
    {
        return 1;
    }
} 
```

并在 yourpage.php 上写下你的这个 php 代码

```
<?php
    //Refresha o palpite do utilizador para 0 e guarda o palpite antigo como ultpalpite
    $qp5 = "UPDATE login.users SET ultpalpite = palpiteatual";
    $rqp5 = mysql_query($qp5);
    //Gera o número sorteado
    $numsort = rand(1,50);
    $qp2 = "UPDATE login.sorteio SET ultsorteio = '".$numsort."'";
    $rqp2 = mysql_query($qp2);
    $qp3 = "UPDATE login.next SET numsorteado = '".$numsort."'";
    $rqp3 = mysql_query($qp3); 
    //Adiciona +1 ao vezesganhou do(s) vencedor(es)
    $qp4 = "UPDATE login.users SET vezesganhou = vezesganhou + 1 WHERE ultpalpite = '".$numsort."'";
    $rqp4 = mysql_query($qp4);
    //Atualiza data do ultimo sorteio
    $d = date('j');
    $m = date('n');
    $y = date('Y');
    $aqp1 = "UPDATE login.sorteio SET diaultsort = '".$d."', mesultsort = '".$m."', anoultsort = '".$y."'";
    $arqp1 = mysql_query($aqp1);
    ?> 
```

试试看....

# export - 带有下划线/派生类的类的带有 android 注释的 java.lang.ClassNotFoundException

> ID：15404672
> 
> 赞同：1
> 
> 时间：2013-03-14T08:48:03.073
> 
> 标签：export, android-annotations

我正在使用 android 注释，我可以正确编译我的项目并将其从 eclipse 部署到我的手机中。但是，当我导出应用程序时，它给了我一个黑屏和一个异常：

```
java.lang.RuntimeException: Unable to instantiate application com.tennis-net.android.util.TennisNetApplication_: java.lang.ClassNotFoundException: com.tennis-net.android.util.TennisNetApplication_ 
```

在我的另一台机器上，我可以导出它并且它工作正常。任何人的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:45:10.443

这可能是由于 Eclipse 弄乱了其中一台机器上的构建。

您是否尝试过清理项目并完全重建它？

最坏的情况是，您甚至可能想尝试创建一个新工作区，然后将现有项目文件夹导入为“现有 Android 应用程序”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T20:32:07.490

好的，找到了解决方案，似乎是因为有时 Eclipse 会破坏它。在你的 Eclipse 中，你必须去 Project --> Properties --> Java Compiler --> Annotation Processing 然后取消选中该框，等到再次构建项目然后再次勾选它并等待再次构建项目.

然后如果它仍然不起作用，请尝试在两者之间部署项目或重新启动 Eclipse。

# apache2 - Apache：帮助理解 Action 和 AddHandler 指令

> ID：15404677
> 
> 赞同：2
> 
> 时间：2013-03-14T08:48:14.767
> 
> 标签：apache2, cgi, addhandler

我试图解开 Apache 处理程序。[官方文档](http://httpd.apache.org/docs/2.2/handler.html#examples)有以下示例：

> 以下指令将导致对带有 html 扩展名的文件的请求触发 footer.pl CGI 脚本的启动。

```
Action add-footer /cgi-bin/footer.pl
AddHandler add-footer .html 
```

> 然后 CGI 脚本负责发送最初请求的文档（由 PATH_TRANSLATED 环境变量指向）并进行所需的任何修改或添加。

我尝试遵循这个例子。我的目录设置是：

*   /var/www/testsite/index.html
*   /var/www/testsite/cgi-bin/rp.sh

我的虚拟主机文件是：

```
<VirtualHost *:80>
       ServerName http://localhost-testsite
       DocumentRoot /var/www/testsite
       <Directory /var/www/testsite>
               Action footer /cgi-bin/rp.sh
               AddHandler footer .html
       </Directory>
       ErrorLog /var/www/logs/error-testsite.log
</VirtualHost> 
```

如果我正确理解了文档，当请求 html 文件时，应该调用我的 rp.sh 脚本，并将 PATH_TRANSLATED 变量设置为 html 文件名。但是，当我在浏览器中打开 localhost-testsite/index.html 时，出现意外错误：

```
[Thu Mar 14 15:38:18 2013] [error] [client 127.0.0.1] File does not exist: /var/www/testsite/cgi-bin/rp.sh/index.html 
```

我错过了什么吗？最重要的问题是：如何让 cgi 脚本处理所有具有特定扩展名的文件？

Apache 版本是 Apache/2.2.22 (Ubuntu)。所有文件和目录都有 777 权限。

# java - Jackson - 使用注释将第一个数组成员绑定到对象

> ID：15404679
> 
> 赞同：0
> 
> 时间：2013-03-14T08:48:20.307
> 
> 标签：java, json, serialization, jackson, unmarshalling

从[这个](https://stackoverflow.com/questions/9449638/how-to-walk-through-json-response)问题可以看出，worldweather 返回的响应不是很漂亮。他们返回一系列当前的天气状况（我试图理解他们为什么这样做，据我所知，在一个特定的地方不可能有一个以上的天气状况......），所以它打破了解组通过注释，

```
@JsonProperty("current_condition")
private CurrentWeatherData currentWeatherData; 
```

因为杰克逊实际上在等待一个集合或一个数组。现在，我可以以某种方式告诉解组器使用第一个数组成员吗？如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:36:51.957

没有这样的注释。您可能需要一个自定义反序列化器来处理这种特殊情况。

对于 Jackson 2.2，将支持单独`Converter`的 s，这可以在这里工作（因为它们只适用于 Java 对象）。但是由于它还没有发布，自定义反序列化器可能是要走的路。

# django - django.core.exceptions.ImproperlyConfigured：名称必须是 basestring 的实例

> ID：15404680
> 
> 赞同：2
> 
> 时间：2013-03-14T08:48:24.207
> 
> 标签：django, mongodb, django-nonrel, django-mongodb-engine

我正在尝试`Mongodb`在我的`Django`.

下面有连接设置`settings.py`

```
DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django_mongodb_engine', 
        'NAME': '',                      
        'USER': '',                      
        'PASSWORD': '',                  
        'HOST': 'localhost',                      
        'PORT': 27017,                      
    }
} 
```

当我尝试运行`python manage.py syncdb`时，出现如下错误：

```
Traceback (most recent call last):
  File "manage.py", line 11, in <module>
    execute_from_command_line(sys.argv)
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/core/management/__init__.py", line 429, in execute_from_command_line
    utility.execute()
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/core/management/__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/core/management/base.py", line 191, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/core/management/base.py", line 220, in execute
    output = self.handle(*args, **options)
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/core/management/base.py", line 351, in handle
    return self.handle_noargs(**options)
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 59, in handle_noargs
    tables = connection.introspection.table_names()
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django_mongodb_engine-0.4.0-py2.7.egg/django_mongodb_engine/base.py", line 76, in table_names
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django_mongodb_engine-0.4.0-py2.7.egg/django_mongodb_engine/base.py", line 106, in __getattr__
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django_mongodb_engine-0.4.0-py2.7.egg/django_mongodb_engine/base.py", line 133, in _connect
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/pymongo-2.4.2-py2.7-linux-x86_64.egg/pymongo/mongo_client.py", line 1025, in __getitem__
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/pymongo-2.4.2-py2.7-linux-x86_64.egg/pymongo/mongo_client.py", line 1014, in __getattr__
  File "/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/pymongo-2.4.2-py2.7-linux-x86_64.egg/pymongo/database.py", line 74, in __init__

django.core.exceptions.ImproperlyConfigured: name must be an instance of basestring 
```

我正在使用 django 1.3

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T08:57:50.653

我从未将 mongodb 与 django 一起使用，但我会通过跟踪跟踪来尝试一下。您需要为`NAME`数据库配置中的设置添加一个值

```
DATABASES = {
    'default': {
        'ENGINE': 'django_mongodb_engine', 
        'NAME': 'foobar',                      
        'USER': '',                      
        'PASSWORD': '',                  
        'HOST': 'localhost',                      
        'PORT': 27017,                      
    }
} 
```

[错误在这里`pymongo`](https://github.com/mongodb/mongo-python-driver/blob/master/pymongo/database.py#L60)被抛出，在[这里通过`django_mongo_engine`](https://github.com/django-nonrel/mongodb-engine/blob/master/django_mongodb_engine/base.py#L133)

# android - 将谷歌广告添加到安卓应用

> ID：15404682
> 
> 赞同：4
> 
> 时间：2013-03-14T08:48:28.740
> 
> 标签：android, ads

我想在我的应用中添加谷歌广告（这是我第一次）。我也添加了jar文件。

这是xml。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/headerbgcolor"
        android:weightSum="1" >

        <Button
            android:id="@+id/back"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.2"
            android:text="@string/back" 
            android:onClick="finishActivity"/>

        <TextView
            android:id="@+id/headertitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_weight="0.6"
            android:gravity="center"
            android:text="@string/header_title" />

        <Button
            android:id="@+id/home"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.2"
            android:text="@string/home" />
    </LinearLayout>

    <ListView
        android:id="@android:id/list"
        android:layout_width="wrap_content"
        android:layout_height="320dp"
        android:scrollbarAlwaysDrawVerticalTrack="true" >
    </ListView>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        ads:adSize="BANNER"
        ads:adUnitId="a14f26e5d930307"
        ads:loadAdOnCreate="true"
        ads:testDevices="AVD_for_4in_WVGA_Nexus_S,5554" />

    </RelativeLayout>

</LinearLayout> 
```

但是当我试图在课堂上定义 adview 时，我无法在课堂上定义它。

这是我试图定义的课程。

```
public class Cities extends Activity {

    Button btnback = null;
    Button btnhome = null;
    TextView headertitle = null;
    ListView lstcities;
    ImageView imgfooter;
    AdView adView; 
    public String BtnSelected; 
```

当我尝试定义时，我收到错误 Adview 无法解析输入

```
AdView adview; 
```

问题是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T09:00:26.417

我使用了这个 jar 文件 - **GoogleAdMobAdsSdk-4.0.4.jar**

你有没有导入这行

```
import com.google.ads.AdRequest;
import com.google.ads.AdSize;
import com.google.ads.AdView;

        AdView adView = new AdView(this, AdSize.BANNER,
                    getString(R.string.publisherID));

        LinearLayout layout = (LinearLayout) findViewById(R.id.imgBanner);
        layout.addView(adView);

        AdRequest adRequest = new AdRequest();
        adRequest.setTesting(true);
        // Start loading the ad in the background.
        adView.loadAd(adRequest); 
```

在 XML 我刚刚写了这个

```
<LinearLayout
    android:id="@+id/imgBanner"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" /> 
```

并且在清单文件中

```
<activity
    android:name="com.google.ads.AdActivity"
    android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode" >
</activity> 
```

# focus - Sencha Touch 将文本字段集中在列表中的叠加层上

> ID：15404685
> 
> 赞同：1
> 
> 时间：2013-03-14T08:48:40.640
> 
> 标签：focus, sencha-touch-2, overlay, disclosure

我对 Sencha Touch 2 有一个奇怪的问题。我有一个公开列表，当点击公开图标时，我打开一个覆盖，并将一些数据加载到它包含的表单中。到目前为止一切都很好。

我遇到的奇怪问题是，当覆盖打开时，如果现在底层列表中的披露图标位于文本字段位于覆盖中的位置，它会获得焦点并打开键盘等等。

这只是 iPad 上的一个问题，它不会出现在我的台式机上，无论是在 Chrome 中还是在 Windows 8 系统上的 Safari 中。

我希望解释足够清楚，如果没有，我会尽力进一步描述情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:20:06.320

我总是遇到同样的问题，我通常这样解决：

假设处理列表中披露的函数是这个：

```
onListDisclose: function (list, record, target, index, e) {
  e.preventDefault();
  ...
} 
```

希望这可以帮助

# .net - 为整个 asp.net MVC 4 项目使用基本控制器

> ID：15404686
> 
> 赞同：9
> 
> 时间：2013-03-14T08:48:40.640
> 
> 标签：.net, asp.net-mvc, inheritance

我正在考虑为我正在处理的整个 MVC 4 项目使用基本控制器。我在网上发现了关于它的相互矛盾的观点，并且不确定这是否违反最佳实践，或者这只是个人喜好问题。

这是一个stackoverflow帖子，说不[要这样做](https://stackoverflow.com/questions/6119206/what-are-good-candidates-for-base-controller-class-in-asp-net-mvc/6119341#6119341)

[这](http://odetocode.com/Blogs/scott/archive/2010/06/28/action-filter-versus-controller-base-class.aspx) 是一篇文章，展示了如何做到这一点，就像它没有有害影响一样。[在这里](http://stevehorn.cc/blog/aspnet-mvc-testing-base-controller.html)和[这里](https://stackoverflow.com/questions/11892294/inheriting-a-base-controller-with-constructor)，他们也解释了它的用法，没有人真正指出这是不好的做法或可能导致任何问题。

那么在 MVC 4 项目中使用几个基本控制器的真正观点是什么？好的？坏的？

**编辑**

我还想指出，我使用基本控制器的直接目标是，我可以在一个控制器中完成授权，并且所有控制器都不需要具有 Authorize 属性。我将为每个角色创建单独的基本控制器。由于角色永远不会改变，我永远不需要为另一个角色创建另一个基本控制器。您如何看待这种设计控制器的方式？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T09:20:32.420

恕我直言，您引用的帖子说的是绝对正确的，但这不是不使用基本控制器的理由。事实上，由于商品原因，我在一些 ASP.NET MVC 应用程序中使用了基本控制器。

这不再是可取的：

*有一个基本控制器来应用 [Authorize] 属性一次是一种常见的做法，我认为它没有任何问题。*

从 MVC3 开始，您可以像这样注册全局操作过滤器：

`GlobalFilters.Filters.Add(new MyAuthorizeAttribute());`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T09:36:41.160

在处理诸如覆盖`User`主体之类的事情之前，我曾使用过基本控制器（请参阅此处了解我描述该想法的一个老问题：[基本控制器 ASP.NET MVC 3 中的此自定义主体是否非常低效？](https://stackoverflow.com/questions/8263845/is-this-custom-principal-in-base-controller-asp-net-mvc-3-terribly-inefficient)）。

老实说，我想不出更好的方法来做到这一点，所以我觉得在这种情况下使用基本控制器可能是一件好事。

我可能不会为不同的授权角色使用不同的基本控制器，因为它非常简单（并且代码更少）只是用来装饰控制器，`[Authorize(Roles="whatever")]`并且更容易准确地看到正在发生的事情。

可能值得考虑自定义[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)。

# c# - 如何在一个简单的 Windows 应用程序中获取和发布所有服装（在 HttpWebRequests 和 HttpWebResponses 期间）

> ID：15404691
> 
> 赞同：0
> 
> 时间：2013-03-14T08:48:57.633
> 
> 标签：c#, .net-4.0, capture, windows-applications

如何在使用 c# 的简单 Windows 应用程序中设置所有获取和发布（在 HttpWebRequests 和 HttpWebResponses 期间）？
如您所知，Firefox 有一个特定的扩展名为 LiveHTTPHeaders。
我想要这样的东西，但不适合特定的浏览器，例如 firefox。
我希望它适用于 Windows 应用程序的所有浏览器和代码！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:55:41.180

Fiddler 适用于所有浏览器，它充当代理，因此允许您捕获和检查所有 HTTP/S 流量。

[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

# jquery - 循环更新 html5 进度条

> ID：15404694
> 
> 赞同：2
> 
> 时间：2013-03-14T08:49:06.820
> 
> 标签：jquery, html, progress-bar

在下面的代码中，html5`<progress>`标记的值会在每个 cicle 中更新。我还可以使用 Chrome 的控制台看到它的值动态变化。但是为什么渲染只在循环结束时更新呢？

```
<!doctype html>
<meta charset="utf8"></meta>
<title></title>
<body>
  <script src="http://code.jquery.com/jquery-latest.min.js"></script>

  <button>click</button>
  <progress  min="0" max="10000" value="0"></progress>

  <script>
    $("button").click(function(){
        for(var i=0; i<8000; i++)
            $("progress").val(i)
    })
  </script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T09:02:15.937

这将是因为您正在锁定 UI。此代码与更新 UI 的代码在同一线程中运行，因此即使您更新了进度条的值，处理器也没有时间更新 UI。

解决此问题的最简单方法是超时运行循环：

```
 $("button").click(function(){
        var count = 0;

        var timeout = setTimeout(doLoop, 0);

        function doLoop() {
            $("progress").val(count);
            count++;
            if(count < 8000) {
                var timeout = setTimeout(doLoop, 0);
            }
            else {
                clearTimeout(timeout)
            }
        }
    }); 
```

现在这将异步运行您的代码。这意味着 UI 线程有时间在处理循环之间更新 UI。

对于在现代浏览器中执行此操作的更高级方法，我建议您也查看 web worker，但这仍然是最好的跨浏览器方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T09:08:09.387

您可以使用该`animate`方法使栏的进度对用户更加可见，如下所示：

```
$("button").click(function(){
    for(var i=0; i<800; i++)
        $("progress").animate({ value: "+=10" }, 1);
}) 
```

你可以在这里看到它的实际效果：http: [//jsfiddle.net/qZJN3/](http://jsfiddle.net/qZJN3/)

# mysql - 大量写入和删除文件会损害我们的服务器性能吗？

> ID：15404699
> 
> 赞同：0
> 
> 时间：2013-03-14T08:49:21.100
> 
> 标签：mysql, file-io, server-load

我们运行一个用于缓存目的的系统，目前每小时写入和删除大约 1,000 个小文件 (10k)。在不久的将来，这个数字将增加到每小时大约 10,000 - 20,000 个文件被写入和删除。

对于正在写入的每个文件，一个小时后删除文件时，会在我们的 mysql DB 上添加和删除新行。

我的问题：

1.  这种过度的写入和删除操作最终会以某种方式损害我们的服务器性能吗？（顺便说一句，我们目前在 VPS 上运行它，很快就会在专用服务器上运行。）
2.  写入和删除这么多行最终会减慢我们的数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:52:32.717

这在很大程度上取决于操作系统、文件系统和文件系统缓存的配置。这也取决于您的数据库是否与写入/删除的文件存储在同一磁盘上。

通常，文件创建和文件删除等影响文件系统结构的操作需要一些同步的磁盘 IO，因此操作系统在断电后不会丢失这些更改。不过，一些操作系统和文件系统可能为此支持更宽松的策略。例如，FreeBSD 上的 UFS 文件系统有很好的“软更新”选项来执行此操作。可能 etx3/Linus 应该有类似的功能。

一旦您将移动到专用服务器，我认为将几个 HDD 连接到它并确保数据库存储在一个磁盘上而在另一个磁盘上执行大量文件操作是合理的。在这种情况下，数据库性能不应受到影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:03:32.610

您应该进行一些计算并估计存储所需的吞吐量。在最坏的情况下，每小时 20000 个文件 x 10K = 200MB，这是一个非常低的要求。在现代文件系统上删除文件只需要很少的时间。

在我看来，您不必担心，尤其是当您的应用程序按顺序创建和删除文件时。

还要考虑现代操作系统在内存中缓存文件系统的部分以提高性能并减少磁盘访问（尤其是对于多次删除来说更是如此）。

您的数据库会增长，但引擎已针对它进行了优化，无需关心它。

唯一的缺点是，如果您的文件系统受到它的影响，处理许多小文件可能会导致磁盘碎片。

为了提高性能，您应该考虑为这些文件使用单独的物理存储（例如不同的磁盘驱动器或磁盘阵列），这样您就可以利用全带宽传输而不会受到其他干扰。

# c# - 无法使用方法 downloadstring() 从给定的 url 获取 html 内容，如何解决这个问题？

> ID：15404710
> 
> 赞同：0
> 
> 时间：2013-03-14T08:50:01.927
> 
> 标签：c#, asp.net, html, webclient, downloadstring

我正在尝试从给定的 url 读取 html 内容，这是我的简单 c# 代码

```
WebClient client = new WebClient();    
var downloadString = client.DownloadString("https://www.yahoo.com"); // suppose 
```

但问题是我无法获取 html 内容，在执行它在我的 IDE 中告诉的代码后：“在您继续之前，请激活 javascript”，但是在我所有的浏览器中都启用了 javascript（firefox/explorer/chrome）

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:56:40.007

在您的示例中，您拼错了域名。在其他方面它工作得很好。[http://screencast.com/t/3YibceMtSFu](http://screencast.com/t/3YibceMtSFu)

# ssis - 如何减少分区处理时间

> ID：15404712
> 
> 赞同：0
> 
> 时间：2013-03-14T08:50:09.647
> 
> 标签：ssis, parallel-processing, ssas

在为多维数据集创建分区期间，我强制解决了分区处理时间的问题。处理了 51 分钟的不带分区的整个多维数据集。我为度量值组创建了每月分区。我检查了每个度量组的一个月分区的处理时间（持续时间长达 2.30 分钟）。我手动处理了它们，选择了一个分区（每个度量组在同一个月），总共持续了大约 15 分钟。

我假设，当我并行处理分区时，将花费更少的时间。但是我创建了 SSIS 包，添加了“*分析服务处理任务*”并选择了所有分区。对于这个任务，我选择了*processing order = Parallel*。我运行了这个包，它花了大约 16 分钟（比手动的顺序分区处理还要多）。

我还尝试使用 XMLA 脚本并行处理分区：

```
<Batch xmlns="http://schemas.microsoft.com/analysisservices/2003/engine">
<Parallel>
<Process xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ddl2="http://schemas.microsoft.com/analysisservices/2003/engine/2" xmlns:ddl2_2="http://schemas.microsoft.com/analysisservices/2003/engine/2/2" xmlns:ddl100_100="http://schemas.microsoft.com/analysisservices/2008/engine/100/100" xmlns:ddl200="http://schemas.microsoft.com/analysisservices/2010/engine/200" xmlns:ddl200_200="http://schemas.microsoft.com/analysisservices/2010/engine/200/200">
  <Object>
    <DatabaseID>OLAP_Partitioning_20130222</DatabaseID>
    <CubeID>Usage</CubeID>
    <MeasureGroupID>Partition1</MeasureGroupID>
    <PartitionID>Partition1_20130101-20130131</PartitionID>
  </Object>
  <Type>ProcessFull</Type>
  <WriteBackTableCreation>UseExisting</WriteBackTableCreation>
</Process>
</Parallel>
<Parallel>
<Process xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ddl2="http://schemas.microsoft.com/analysisservices/2003/engine/2" xmlns:ddl2_2="http://schemas.microsoft.com/analysisservices/2003/engine/2/2" xmlns:ddl100_100="http://schemas.microsoft.com/analysisservices/2008/engine/100/100" xmlns:ddl200="http://schemas.microsoft.com/analysisservices/2010/engine/200" xmlns:ddl200_200="http://schemas.microsoft.com/analysisservices/2010/engine/200/200">
  <Object>
    <DatabaseID>OLAP_Partitioning_20130222</DatabaseID>
    <CubeID>Usage</CubeID>
    <MeasureGroupID>Partition2</MeasureGroupID>
    <PartitionID>Partition2_20130101-20130131</PartitionID>
  </Object>
  <Type>ProcessFull</Type>
  <WriteBackTableCreation>UseExisting</WriteBackTableCreation>
</Process> 
```

也花了15多分钟。谁能给我任何提示，我做错了什么？如何优化分区处理时间？

# ios - 如何向 UITabBarController 添加 9 个或更多选项卡？

> ID：15404713
> 
> 赞同：3
> 
> 时间：2013-03-14T08:50:13.210
> 
> 标签：ios, objective-c

在 iPad 中使用垂直选项卡时，UITabBarController 似乎将选项卡的数量限制为 8。
但我想显示 9 个或更多选项卡。

起初，我只将第 1~7 个选项卡设置为 UITabBarController，
并在 UITabBarController 之外使用第 8 个和第 9 个选项卡，如下源代码。
它显示 9 个选项卡，但会导致一些问题，例如工具栏损坏、未经许可旋转等。

有什么方法可以正确显示 9 个或更多选项卡？

```
#define RT_TABMEMU_ITEM_MAX 8
#define RT_TABMEMU_ITEM_MAX_WITH_MORE 7

- (void)setSelectedViewController:(UIViewController *)selectedViewController {
    ...

// If the amount of viewController is less than 9, 
// or index of selectedViewController is 0~6, 
// set selectedViewController to UITabBarController
    if (!(RT_TABMEMU_ITEM_MAX < [self.viewControllers count]
          && RT_TABMEMU_ITEM_MAX_WITH_MORE <= [self.viewControllers indexOfObject:selectedViewController])) {
        [super setSelectedViewController:selectedViewController];
    }

    ...
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    UIViewController *selectedController = (self.viewControllers)[indexPath.row];

    if (self.selectedViewController != selectedController) {
        [self setSelectedViewController:selectedController];

    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:34:14.450

我建议你试试[InfiniTabBar for iOS](http://www.cocoacontrols.com/controls/infinitabbar)开源项目。有了它，您可以添加任意数量的选项卡。我在自己的项目中使用过它，非常好！

一切顺利！

它是在**公共许可**下发布的，或者正如作者所说的许可：

*与往常一样，我的所有源代码都可以免版税使用到您的应用程序中。如果您将应用程序开源，请确保不要从源代码中删除版权声明。您不必在您的应用程序中归因于我，尽管如果您这样做我会很高兴。*

# html-email - Squirrelmail ERROR 登录错误

> ID：15404716
> 
> 赞同：0
> 
> 时间：2013-03-14T08:50:25.870
> 
> 标签：html-email, plesk, squirrelmail

我已经使用 Squirrelmail 1.4.22 版本超过 2 个月了，它运行良好。今天早上突然用户无法登录，它给了他们这个错误：错误您必须登录才能访问此页面。进入登录页面

当我使用替代邮件客户端时，用户可以正常登录邮件帐户。我曾尝试在线阅读，甚至重新安装 squirrelmail，但仍然带来相同的错误，甚至在这个论坛中，每个人似乎都将其指向 cookie 问题。我已经通过服务器和浏览器上的 cookie 会话设置进行了交叉检查，我似乎没有发现问题。

请告知将不胜感激任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:00:35.867

使用代码在您网站的 httpdocs 中创建 php 文件：

```
<? phpinfo(); 
```

检查 session.save_path 变量的值

检查 session.save_path 中定义的文件夹的权限：

```
ls -ld /path-to-folder 
```

应该是1733

还要检查日志文件中的错误

```
/var/www/vhosts/<your domain name>/statistics/logs/error_log 
```

# sql-server-2008 - 无法在 sql - server 2008 中使用 select 语句将数据复制到临时表

> ID：15404717
> 
> 赞同：-1
> 
> 时间：2013-03-14T08:50:26.230
> 
> 标签：sql-server-2008, pivot-table, temp-tables

我正在使用产生旋转结果的 select 语句将数据复制到临时表。

我的程序是：

```
alter procedure proc11 AS

create Table #Temp (Software varchar(max), Ver varchar(max))

declare @cols varchar(max)
declare @colTabl varchar(max)
declare @alter varchar(max)

set @cols=STUFF((select distinct  ',[' + Ltrim(rtrim(YEAR(Dt))) +']' from temp FOR XML PATH('')),1,1,'');

set @colTabl=STUFF((select distinct  '[' + Ltrim(rtrim(YEAR(Dt))) +'] int,' from temp FOR XML PATH('')),1,0,'');

set @colTabl= LEFT(@colTabl,len(@colTabl)-1);

set @alter = 'alter table #Temp add  '+ @colTabl;

exec(@alter)

EXEC('select * into #Temp from 
(select YEAR(Dt)[year],Software,Ver from temp)T
Pivot(count([year]) for [year] in ('+@cols+'))PVT') 
```

但是该语句`select * from #Temp`没有返回任何记录。

我如何复制这些记录。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:46:30.753

这是因为 '#' 临时表仅在当前连接期间保留，并且仅在其范围内可见。即使您创建了一个临时表，在 SSMS 中打开另一个选项卡并尝试使用它，您也会看到“表不存在”错误。发生的情况是，您的 EXEC 语句创建了 #Temp 表，当它完成时，该表立即被删除。不仅如此 - CREATE 语句中的#Temp 表和 EXEC 语句中的#Temp 实际上是不同的表！尝试在不同的 SSMS 选项卡中创建两个 #temp 表，您会发现它们实际上并不相同。

您可以使用全局临时表。只需将名称更改为 ##Temp 即可。运行这两个示例。

这不起作用：

```
EXEC('select * into #Temp from (select ''something'' as x) x');
select * from #Temp 
```

而这个会（当你第二次运行它时，你会注意到“表已存在”错误：

```
EXEC('select * into ##Temp from (select ''something'' as x) x');
select * from ##Temp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:47:41.010

```
EXEC('insert #Temp select * from 
(select YEAR(Dt)[year],Software,Ver from temp)T 
Pivot(count([year]) for [year] in ('+@cols+'))PVT order by Software') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T20:08:03.760

或者只是`INSERT`从动态部分中删除：

```
INSERT INTO #temp
EXEC(select * from 
    (select YEAR(Dt)[year],Software,Ver from temp)T 
    Pivot(count([year]) for [year] in ('+@cols+'))PVT order by Software') 
```

# ios - 未触发自定义后退按钮选择器

> ID：15404718
> 
> 赞同：1
> 
> 时间：2013-03-14T08:50:29.117
> 
> 标签：ios, uinavigationcontroller, back-button

我有两个 UIViewcontroller，我们在 UINavigationController 中称它们为 vcA 和 vcB。

我希望vcB有一个触发一些代码的自定义后退按钮，目标是做一些自定义动画

在 vcA 中，我输入了以下代码：

```
UIViewController *vcB = [UIViewController alloc] init]

UIBarButtonItem *customBackButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" 
                                                                      style:UIBarButtonItemStyleBordered 
                                                                     target:self 
                                                                     action:@selector(handleBack)];
self.navigationItem.backBarButtonItem = custombackBackButton;

[self.navigationController pushViewController: vcB animated: YES]; 
```

然后我在 vcA 和 vcB 中都添加了这段代码：

```
-(void) handleBack
{
  NSlog(@"Going back to vcA");
} 
```

永远不会调用 handleback 方法。有什么提示吗？

谢谢

尼古拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:02:01.310

使用 William Jockusch 给出的技巧[为后退按钮设置操作](https://stackoverflow.com/questions/1214965/setting-action-for-back-button-in-navigation-controller/3445994#3445994)

并且还根据[更新导航栏](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

> *   如果新的顶级视图控制器有一个自定义的左栏按钮项，则显示该项。要指定**自定义左栏**按钮项，请设置视图控制器导航项的**leftBarButtonItem**属性。
> *   如果顶级视图控制器没有自定义左栏按钮项，但前一个视图控制器的导航项在其 backBarButtonItem 属性中具有有效项，则导航栏会显示该项。

因此，如果您想拥有自定义选择器，则需要在 vcB NOT IN vbA 中编写

vcB.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIBarButtonItem *customBackButton = [[UIBarButtonItem alloc] initWithTitle:@"Back"
                                                                         style:UIBarButtonItemStyleBordered
                                                                        target:self
                                                                        action:@selector(handleBack)];
    self.navigationItem.backBarButtonItem = customBackButton;
}

-(void) handleBack
{
  NSlog(@"Going back to vcA");
} 
```

**笔记：**

[UINavigationController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationItem_Class/Reference/UINavigationItem.html)

> 当此导航项位于堆栈顶部项的正下方时，导航控制器会从此导航项派生导航栏的后退按钮。当此属性为 nil 时，导航项使用其 title 属性中的值来创建适当的后退按钮。如果要为后退按钮指定自定义图像或标题，则可以将自定义栏按钮项（带有自定义标题或图像）分配给此属性。在配置你的 bar button item 时，不要为其分配自定义视图；导航项无论如何**都会忽略**后退栏按钮中的自定义视图。

这里提到*如果你想为后退按钮指定一个自定义图像或标题，你可以分配一个自定义栏按钮项（使用你的自定义标题或图像）*，但它会忽略自定义视图。所以你的选择器没有调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:04:08.137

不要误会我的意思，但我认为您需要清楚 UINavigationController 的推送弹出。

导航控制器通过将视图推入/弹出控制器的视图堆栈来管理视图。当您按下一个项目时，当前视图会滑出屏幕左侧，而新视图会从右侧滑出。当然，这些动画可以根据您的意愿进行更改。

我认为这是你完全需要的。

把它放在你想从 vcA 推送 vcB 的 vcA 中。

```
UIViewController *vcB = [UIViewController alloc] init];

[self.navigationController pushViewController: vcB animated: NO];

[UIView transitionWithView:self.navigationController.view
       duration:0.8
       options:UIViewAnimationOptionTransitionFlipFromRight
       animations:nil
       completion:nil]; 
```

在vcB中，你可以制作一个barbuttonitem

```
 UIBarButtonItem *addButton = [[[UIBarButtonItem alloc] initWithTitle:@"BackToVcA"
                                                               style:UIBarButtonItemStyleBordered
                                                              target:self
                                                              action:@selector(addAction:)] autorelease];
self.navigationItem.rightBarButtonItem = addButton; 
```

在 addActionMethod: 你可以把下面的代码用你需要的动画导航回来

```
- (void)addAction:(id)sender
{
     UIViewController *vcA = [UIViewController alloc] init];

     [[self retain] autorelease];

     [self.navigationController pushViewController: vcA animated: NO];

     [UIView transitionWithView:self.navigationController.view duration:0.8 options:UIViewAnimationOptionTransitionFlipFromLeft animations:nil completion:nil];

     [self.navigationController popViewControllerAnimated:NO];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T08:55:35.033

你做错了。首先推送到 vcB 并在 vcB **viewDidLoad**方法中放置此代码。

```
UIBarButtonItem *customBackButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:self action:@selector(handleBack)]; 
 self.navigationItem.backBarButtonItem = custombackBackButton; 
```

并将其放入vcB中：

```
-(void) handleBack{
 NSlog(@"Going back to vcA");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T09:08:36.060

您不能修改 backBarButtonItems 动作，它是执行默认（返回）动作，您应该在 leftBarButtonItems 中执行您的自定义操作

在您的 vcBs 类中添加以下内容：

```
- (void)viewWillAppear:(BOOL)animated
{
    UIBarButtonItem *customBackButton = [[UIBarButtonItem alloc] initWithTitle:@"Back"
                                                                         style:UIBarButtonItemStyleBordered
                                                                        target:self
                                                                        action:@selector(handleBack)];
    self.navigationItem.leftBarButtonItem = customBackButton;
}

- (void)handleBack
{
    NSLog(@"back");
} 
```

# c - NIC 中接收的数据包未通过套接字读取

> ID：15404722
> 
> 赞同：0
> 
> 时间：2013-03-14T08:50:40.613
> 
> 标签：c, sockets, udp

我打开了一个 UDP 套接字来监听传入的数据包。我可以在 wireshark 日志中看到到达 NIC 的数据包。但是通过 Socket 读取时不可用。'netsatat' 命令显示端口号被侦听任何传入的 UDP 消息。套接字阅读器继续等待。我已经在 Linux（ubuntu）环境中使用 Java 和 C 进行了检查。我可以看到收到的 IPV4 数据包的标识值是 0。这个值对套接字读取数据有什么作用吗？我用于读取套接字的 C 代码

```
int sock, n, nr;
socklen_t fromlen;
struct sockaddr_in server;
struct sockaddr_in from; 
sock = socket(AF_INET, SOCK_DGRAM, 0);
if (sock < 0)
 printf("Can not create socket in server\n");
memset(&server, 0, sizeof(struct sockaddr_in));
server.sin_family = AF_INET;
server.sin_port = htons(5555);
server.sin_addr.s_addr = INADDR_ANY;
if(bind(sock, (struct sockaddr *)&server, sizeof(server)) < 0)
fromlen = sizeof(struct sockaddr_in);
while(1) {       
    printf("Waiting to receive\n");
    n = recvfrom(sock, &nr, sizeof(nr), 0, (struct sockaddr *) &from, &fromlen);
    printf("I have received");
} 
```

请找到wireshark跟踪[http://imgur.com/Au9BeS1](http://imgur.com/Au9BeS1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T07:08:25.577

这是个问题：

```
if(bind(sock, (struct sockaddr *)&server, sizeof(server)) < 0)
fromlen = sizeof(struct sockaddr_in); 
```

这只会设置`fromlen`为`bind`调用*失败*。而且由于`fromlen`没有正确初始化，它将包含一个看似随机的值，对`recvfrom`.

# objective-c - 如何在我的 mac os x 上获取默认浏览器的版本

> ID：15404723
> 
> 赞同：0
> 
> 时间：2013-03-14T08:50:40.803
> 
> 标签：objective-c, c, macos, browser, system-information

我想使用目标 C 在 mac 中获取系统信息。我搜索了很多，但没有得到单行代码供我使用。他们通过 javascript 提供了解决方案，但我希望它们在目标 C 中。为我提供一些帮助以继续。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:17:58.453

您可以使用启动服务获取默认浏览器的路径，如下所示

```
LSGetApplicationForURL((CFURLRef)[NSURL URLWithString: @"http:"],
                                kLSRolesAll, NULL, (CFURLRef *)&appURL);

NSString *infoPlistPath = [[appURL path] stringByAppendingPathComponent:@"Contents/info.plist"]; 
```

现在从 info.plist 中读取 CFBundleShortVersionString。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:47:42.627

干得好 ：

```
NSString *userName=NSUserName();
NSLog(@"UserName: %@",userName);

NSArray *ipAddress=[[NSHost currentHost] addresses];
NSLog(@"IP Address=%@",ipAddress[0]); 
```

*更新我的答案*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:56:25.263

这是经过测试并且运行良好

```
 NSWorkspace *nsSharedWorkspace = [NSWorkspace sharedWorkspace];
         NSString *nsAppPath = [nsSharedWorkspace fullPathForApplication:appName];
         NSBundle *nsAppBundle = [NSBundle bundleWithPath: nsAppPath];
         NSDictionary *nsAppInfo = [nsAppBundle infoDictionary];

//Now you can print all dictionary to view all its contents and pick which you want
         NSLog(@"%@",nsAppInfo);

//or you can get directly using following methods
         NSLog(@"%@",[nsAppInfo objectForKey:@"CFBundleShortVersionString"]);
         NSLog(@"%@",[nsAppInfo objectForKey:@"CFBundleVersion"]); 
```

不要忘记添加 AppKit 框架

# twitter-bootstrap - 下拉菜单中的 Twitter 日期选择器

> ID：15404725
> 
> 赞同：4
> 
> 时间：2013-03-14T08:50:54.913
> 
> 标签：twitter-bootstrap, datepicker

我想在下拉菜单中添加一个日期选择器。我使用这个日期选择器[链接](http://www.eyecon.ro/bootstrap-datepicker/)

接下来，我添加了代码以在单击输入选择日期时不关闭菜单，输入消失。我该如何解决？

```
$('.datepicker').datepicker({
    autoclose: true
});

$('.dropdown-toggle').dropdown();
$('.jsolr-search-result-form .dropdown input, .jsolr-search-result-form .dropdown label, .jsolr-search-result-form ul span').click(function(e) {
  e.stopPropagation();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-18T11:09:59.577

您可以执行以下操作：

```
jQuery(function($){
    $('#dropdownMenu1').parent().on('hide.bs.dropdown', function(e){
        e.preventDefault();
    });
}); 
```

示例：http: [//jsfiddle.net/9qyf2/](http://jsfiddle.net/9qyf2/)

请注意，下拉事件是在父元素上触发的。从那里您可以检查已单击哪个元素并在需要时阻止默认行为。确保检查 js 组件的引导文档：http: [//getbootstrap.com/javascript/#dropdowns-usage](http://getbootstrap.com/javascript/#dropdowns-usage)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-08T15:15:40.553

这个很麻烦。我在一些 Bootstrap 下拉菜单中也有几个日期选择器。我用两种方法解决了这个问题。

第一个使用 jQuery 来阻止事件在单击 DatePicker 时冒泡一次

```
$('.yourDatePicker').on('hide', function(event) {
    event.stopPropagation();
    $(this).closest('.yourDropDown').one('hide.bs.dropdown', function(ev) {
        return false;
    });
}); 
```

另一个更永久的解决方案是更改 datepicker.js 文件本身，但听起来您正在使用 datepicker cdn。如果你可以下载到本地使用，你可以破解打开你会发现代码看起来像这样

```
click: function(e){
    e.preventDefault();
    var target = $(e.target).closest('span, td, th'),
        year, month, day;
    if (target.length === 1){
        switch (target[0].nodeName.toLowerCase()){
...ect... 
```

如果你在这个区域添加一个 e.stopPropagation() 函数，像这样

```
click: function(e){
    e.preventDefault();
    e.stopPropagation(); // <-- add this
    var target = $(e.target).closest('span, td, th'),
        year, month, day;
    if (target.length === 1){
        switch (target[0].nodeName.toLowerCase()){ 
```

您的日期选择器将停止干扰您的其他 DOM 元素，尽管此解决方案更为普遍，我会进行测试以确保它不会影响您代码中的其他区域。

# algorithm - 圆与另一条线和另一个圆相切

> ID：15404730
> 
> 赞同：0
> 
> 时间：2013-03-14T08:51:08.710
> 
> 标签：algorithm, geometry

我正在寻找一种算法，并带有伪代码示例，以找到一个`c1(c1x,c1y)`具有给定半径的圆与`r`一条线 `l`和另一个圆相切`c2(c2x,c2y)`；这个圆与同一条线相切。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:34:14.993

一方面，距第一个圆距离为 r2 的点的轨迹是与第一个圆在同一中心 ( **C** ) 处的半径为 (r1+r2) 的圆。OTOH，它是一条线，在 r2 的偏移距离处平行于给定线 ( **AB )。**它们的交点 ( **F** ) 是寻找的圆的中心。

![在此处输入图像描述](../Images/448428d19777008058938466dab0dd97.png)

显然，有两个这样的交点。

另一种可能性是让两个圆圈在第一个圆圈接触线的点（ **D ）处接触。**要找到第二个圆的中心 ( **E** )，只需将 (c1,r1) 圆“向下”（在图表上）的半径延长 (r2-r1)。

即找到**E ，从****C**点“向下”走`(r2-r1)`（有符号）的距离。要找到**F**，请“向右”`sqrt( (r1+r2)^2 - (r1-r2)^2 ) == 2*sqrt(r1*r2)`从**E**的距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:55:35.230

选择直线上的任意一点，在直线的两侧画一条长度为 r 的垂线。所以垂线的一端在直线上，另一端是圆的中心。选择线上的另一个点，做同样的事情。

# shell - grep 用于单行中的多个字符串

> ID：15404735
> 
> 赞同：2
> 
> 时间：2013-03-14T08:51:21.987
> 
> 标签：shell, unix, grep, pre-commit-hook

我需要检查是否有任何字符串“添加/更改/修复/删除”在提交日志消息中。我正在编写一个 svn 预提交挂钩，并且预期的提交注释应该在消息中包含这 4 个字符串之一。

我正在使用的代码如下

```
REPOS=$1
TXN=$2

SVN="/usr/bin/svn";
SVNLOOK="/usr/bin/svnlook";

$SVNLOOK log "$REPOS" -t "$TXN" | \
grep "[a-zA-Z0-9]" > /dev/null

GREP_STATUS=$?
if [ $GREP_STATUS -ne 0 ]
then
  "${ECHO}" "No Log comments present" >> "${LOG}"
   echo "Your commit has been blocked because you didn't give any log message" 1>&2
   echo "Please write a log message describing the purpose of your changes and" 1>&2
   echo "then try committing again. -- Thank you" 1>&2
exit 1
fi 
```

在上面的代码中，

```
$SVNLOOK log "$REPOS" -t "$TXN" 
```

会给我用户输入的提交信息。现在我必须检查消息中是否存在任何字符串“Added、Changed、Fixed、Deleted”。那是，

```
if (any of the above 4 strings are not present),
 exit 1 
```

我试过了

```
$($SVNLOOK log -t "$TXN" "$REPOS" | grep -q "Added\|Changed\|Fixed\|Deleted"|) 
```

但它似乎没有工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T08:56:56.977

像这样使用`grep -e`选项（多次）：

```
grep -e Added -e Changed -e Fixed -e Deleted 
```

否则转到正则表达式路线：

```
grep --regexp=Added|Changed|Fixed|Deleted 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T08:57:56.987

要使用交替，您需要`Extended Regexp`：

```
grep -qE 'Added|Changed|Fixed|Deleted' 
```

或者：

```
egrep -q 'Added|Changed|Fixed|Deleted' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-14T08:56:33.930

删除反斜杠并使用`egrep`我还推荐`-i`用于不区分大小写的匹配：

```
egrep -q -i "added|changed|fixed|deleted" 
```

# javascript - 在 GWT 框架中显示 Google 登录页面

> ID：15404738
> 
> 赞同：0
> 
> 时间：2013-03-14T08:51:38.293
> 
> 标签：javascript, gwt, iframe, callback

我正在开发一个使用 Google 登录的 GWT 应用程序。为此，我有一个 Java servlet，它基于 UserService.createLogin() 函数将用户重定向到 Google 登录页面。可以通过“/login” URL 访问相关的 Java servlet。以前，每当用户单击应用程序中的登录按钮时，我都会打开一个窗口，如下所示，

```
Window.open("/login", "Bla", ""); 
```

然后，当登录过程成功时（UserService.getCurrentUser() != null）我在 Java servlet 中执行重定向，如下所示，

```
response.sendRedirect("/success.html"); 
```

success.html 文件包含一个简单的行，其中 onLoad() 执行以下操作，

```
<body onLoad="window.opener.loginSucceededCallback();window.close();"/> 
```

这会导致原始窗口关闭并调用我在调用 Window.open() 的 GWT 类中注册的 JavaScript 回调函数“loginSucceededCallback”。这工作正常。

我在单独的窗口中显示 Google 登录，因为我不希望 GWT 应用程序必须重新加载。但是，如果我可以将 Google 登录页面嵌入到 GWT 应用程序中，而不是在弹出窗口（或单独的选项卡）中显示它，那就更好了。为此，我正在考虑使用允许显示外部页面的 Frame() 或 NamedFrame() 对象。我可以在这样的框架中成功显示 Google 登录页面，但是当登录（在 Google）成功时，我无法获取 success.html 中的 JavaScript 代码来正确调用 GWT 代码中的回调函数。至少我认为不再有明确的“window”或“window.opener”对象。我的 JavaScript 知识也有限，现有的论坛帖子都没有让我看到光明......

有谁知道如何将这些代码链接在一起，以便 GWT 客户端注意到服务器端的成功登录？我可以用 FormPanel 和 Frame() 做点什么吗？

谢谢，

拉尔夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T10:23:48.770

你可以使用这样的东西

```
 frame.addLoadHandler(new LoadHandler() {

        @Override
        public void onLoad(LoadEvent event) {
            if(frame.getUrl().equals("your link here"))
                               loginSucceededCallback();
        }
    }); 
```

# ruby - 是否有 .bash_profile/.bash_rc/.profile 的 IRB 等价物？

> ID：15404744
> 
> 赞同：1
> 
> 时间：2013-03-14T08:51:55.387
> 
> 标签：ruby, bash, command-line, irb, .bash-profile

每次启动 IRB 会话时是否都会加载配置文件？

例如，我希望能够要求某些库并为 IRB 中的每个会话启用它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:53:41.177

该文件称为`~/.irbrc`. [这](https://github.com/logankoester/irbrc/blob/master/irbrc)是一个示例（在谷歌搜索“irbrc”时发现）。

# maven - Maven Shade 插件过滤

> ID：15404749
> 
> 赞同：0
> 
> 时间：2013-03-14T08:52:21.263
> 
> 标签：maven, maven-3, maven-shade-plugin

我正在尝试在包含的 jar 中增强/过滤我的一些资源。我想要的是在阴影阶段用新的关键字替换包含的 jars 中的一些关键字。

有没有办法增强阴影资源？

编辑：

我的资源有这样的字符串：#keyword1# #keyword2#，我想用它们对应的替换它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:37:12.047

似乎 Transformer 会做必要的事情。我会尽快提供详细信息。

# android - 我想从另一项活动中完成一项活动

> ID：15404753
> 
> 赞同：0
> 
> 时间：2013-03-14T08:52:31.280
> 
> 标签：android

我有两个活动。第一个活动是带有暂停按钮的游戏屏幕，第二个活动是带有恢复和重新启动按钮的游戏。当我在游戏屏幕上单击暂停按钮时，我会从单击重新启动按钮的位置转到第二个活动，然后我想先完成活动（游戏屏幕）并想开始新游戏所以这是我的问题如何完成第一个活动请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:04:03.403

一个建议是您在所有活动中注册一个广播接收器，在他们的 onReceive() 中使用“finish()” & 每当你想退出时，你可以简单地传递一个指示所有活动必须关闭的意图.....虽然确保您在 onDestroy() 方法中“取消注册”接收器。

像这样的东西

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        IntentFilter filter = new IntentFilter();
        filter.addAction("end");
        receiver = new BroadcastReceiver() {

            @Override
            public void onReceive(Context context, Intent intent) {
                // TODO Auto-generated method stub
                finish();
            }
        };
        registerReceiver(receiver, filter);
}

  protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
         unregisterReceiver(receiver);
    } 
```

当您希望从另一项活动中完成此操作时，只需执行此操作

```
Intent i = new Intent("end");
                sendBroadcast(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:01:07.500

这将杀死所有顶级活动并开始新的活动 NewGame。

```
Intent intent = new Intent(getApplicationContext(), NewGame.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T09:02:56.240

**选项 1：** 使用片段

**选项 2：** 从第一个活动开始使用`startActivityForResult`，然后在第二个活动完成时使用`onActivityResult`。完成第一个活动然后开始游戏。

**选项 3：** 发送广播消息并在第一个活动中接收并完成它。

可能还有其他选择。只需放下一些立即出现在我脑海中的选项。如果我是你，我会使用选项 1

# javascript - 用于 javascript 的调试工具，用于清理未使用的变量、语法错误....

> ID：15404755
> 
> 赞同：0
> 
> 时间：2013-03-14T08:52:33.277
> 
> 标签：javascript, jquery

我们有 Findbugs、PMD 工具用于调试 java 源代码。任何其他用于在 javascript 或 jQuery 源代码中查找错误的工具。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:56:07.260

对于主动调试 Javascript，Firebug 是我的最爱。它允许您在脚本中设置断点并检查变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:03:32.057

Firebug 是客户端脚本的最佳调试工具。

1.  我们可以检查和编辑元素。
2.  我们可以可视化 CSS 指标。
3.  监控网络。
4.  调试和分析 javascipt

和许多其他事情。它只是成为调试的最佳工具。

欲了解更多信息： http: [//getfirebug.com/whatisfirebug](http://getfirebug.com/whatisfirebug)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:03:21.843

您可以在您的网络浏览器中使用[FireBug](https://www.getfirebug.com/)，它适用于 Chrome、Mozilla。您可以添加多个 firebug 扩展，例如用于 Jquery 开发的[FireQuery 、用于 cookie 上的 CRUD 的](http://firequery.binaryage.com/)[FireCookie](https://addons.mozilla.org/en-US/firefox/addon/firecookie/)等。

# django - django 模型，在带有额外（）的连接表上应用过滤器（）

> ID：15404758
> 
> 赞同：1
> 
> 时间：2013-03-14T08:52:40.177
> 
> 标签：django, django-models

我正在尝试这个：

```
count = UserCheck.objects.filter(user=puser, fixture__competition__name__icontains='gold',
                                   fixture__date__gte='2013-02-11',
                                   fixture__date__lte='2013-05-24', year=2013).extra(
                                   where=["WEEKOFYEAR(fixture__date) = %s" %week]).exclude(result=0).count() 
```

问题是`extra()`我无法使用`WEEKOFYEAR(fixture__date)`. 我怎样才能做到这一点。这可能吗？

PS：我正在使用 MySQL（和 django 1.4）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:41:23.543

当使用[额外的](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.extra)QuerySet 修饰符时，您不再使用 Django 的 ORM。您使用的是“纯”SQL，因此基本上无法使用`__`符号访问相关模型，并且在您的情况下`fixture__date`不是有效的列名。但是，必须记住，表在 Django 中以特定方式命名。所以你可以使用：

```
count = UserCheck.objects.filter(user=puser, fixture__competition__name__icontains='gold',
                                   fixture__date__gte='2013-02-11',
                                   fixture__date__lte='2013-05-24', year=2013).extra(
                                   where=["WEEKOFYEAR(app_fixture.date) = %s" %week]).exclude(result=0).count() 
```

where`app`指的是保存`Fixture`模型的应用程序。

简而言之，对于应用程序中的每个模型，Django 都会创建 table `<app>_<model>`，`extra`当您想要引用该模型时，可以将它与子句一起使用。

# ios - 无法将成功和失败块与 UIImageView+AFNetworking.h 一起使用

> ID：15404760
> 
> 赞同：0
> 
> 时间：2013-03-14T08:52:43.793
> 
> 标签：ios, afnetworking

我正在尝试添加一个 Success 和 Error 块来检查图像何时加载，以便我可以使用 NSCache 动态调整图像大小。但是当我尝试

```
[scribbleImage setImageWithURL: [NSURL URLWithString:scribble[@"scribble_image"]] placeholderImage:[UIImage imageNamed:@"Default.png"] success:^(UIImage *image) {
NSLog(@"done");
} failure:^(NSError *error) {
NSLog(@"error %@",error);
}]; 
```

Xcode给我一个错误，说`No visible @interface for 'UIImageView' declares the selector 'setImageWithURL:placeholderImage:success:failure:'`

我不确定为什么。

PS。我正在导入 UIImageView+AFNetworking.h 并且没有成功和失败块的情况下一切正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:54:59.067

这是因为没有方法`setImageWithURL:placeholderImage:success:failure:`只有`setImageWithURLRequest:placeholderImage:success:failure:`

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:scribble[@"scribble_image"]]];

[scribbleImage setImageWithURLRequest:request placeholderImage:[UIImage imageNamed:@"Default.png"] success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
    NSLog(@"Done");
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
    NSLog(@"Failed with error: %@", error);
}]; 
```

如果你看看做什么`setImageWithURL:placeholderImage:`：

```
- (void)setImageWithURL:(NSURL *)url
       placeholderImage:(UIImage *)placeholderImage
{
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    [request setHTTPShouldHandleCookies:NO];
    [request addValue:@"image/*" forHTTPHeaderField:@"Accept"];

    [self setImageWithURLRequest:request placeholderImage:placeholderImage success:nil failure:nil];
} 
```

您会看到，这也是用于在内部获取的方法。

# c++ - 优雅地检查用户输入的错误

> ID：15404765
> 
> 赞同：5
> 
> 时间：2013-03-14T08:52:56.707
> 
> 标签：c++, if-statement, error-handling

我的程序等待用户输入，并在适当的时候处理它。我需要检查用户输入以确保它满足某些标准，如果它不满足所有这些标准，它将被拒绝。

伪代码类似于：

```
if (fulfills_condition_1)
{
    if (fulfills_condition_2)
    {
        if (fulfills_condition_3)
        {
            /*process message*/
        }
        else
            cout << error_message_3; //where error_message_1 is a string detailing error
    }
    else
        cout << error_message_2; //where error_message_2 is a string detailing error
}
else
    cout << error_message_1; //where error_message_3 is a string detailing error 
```

这些条件的数量有可能会增加，我想知道是否有一种更简洁的方法来使用 switch 或类似的东西来表示这一点，而不是使用大量的级联`if`语句。

我知道有可能使用

```
if (fulfills_condition_1 && fulfills_condition_2 && fulfills_condition_3)
    /*process message*/
else
    error_message; //"this message is not formatted properly" 
```

但这不如第一个有用，并且没有说明问题出在哪里。

条件可以粗略地排列为越来越重要，即检查`condition_1`比检查更重要`condition_3`，所以`if`语句确实有效 - 但一般来说有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:58:43.647

怎么样

```
if (!fulfills_condition_1) throw BadInput(error_message_1);
if (!fulfills_condition_2) throw BadInput(error_message_2);
if (!fulfills_condition_3) throw BadInput(error_message_3);

/* process message */ 
```

然后您的异常处理程序可以报告错误消息，并根据需要重试或中止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T08:59:23.650

如果困扰您的是级联`if`s，您可以选择以下方法之一：

使用布尔值：

```
bool is_valid = true;
string error = "";
if (!condition_one) {
  error = "my error";
  is_valid = false;
}

if (is_valid && !condition_two) {
  ...
}

...

if (!is_valid) {
  cout << error;
} else {
  // Do something with valid input
} 
```

使用例外：

```
try {
  if (!condition_one) {
    throw runtime_error("my error");
  }

  if (!condition_two) {
    ...
  }

  ...

} catch (...) {
  // Handle your exception here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T08:58:36.727

我建议您可以使用“提前返回”技术：

```
 if (!fulfills_condition_1)
     // error msg here.
     return;

  // fulfills_condition1 holds here.

  if (!fulfills_condition_2)
     // error msg here.
     return;

  // Both conditon1 and condition2 hold here.

  if (!fulfills_condition_3)
     // error msg here.
     return. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T09:08:16.613

如果这要在几个地方重用，我会做一个 DSL：

```
Validator inputType1Validator =
    Validator.should(fulfill_condition_1, error_message_1)
             .and(fulfill_condition_2, error_message_2)
             .and(fulfill_condition_3, error_message_3)

inputType1Validator.check(input); 
```

# cordova - Cordova (2.1.0) 插件不起作用

> ID：15404767
> 
> 赞同：1
> 
> 时间：2013-03-14T08:53:04.307
> 
> 标签：cordova, plugins

我对 cordova (v 2.1.0) 插件有疑问。

```
package com.phonegap.plugins.video;

import org.json.JSONArray;

import android.util.Log;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;

public class Test222 extends Plugin {

    @Override
    public PluginResult execute(String action, JSONArray args, String callbackId) {

        Log.d("asd", "execute");
        PluginResult.Status status = PluginResult.Status.OK;
        return new PluginResult(status, "");
    }
} 
```

配置文件

```
<plugin name="Test222" value="com.phonegap.plugins.video.Test222"/> 
```

JS代码：

```
function init() 
{
    document.addEventListener("deviceready",initTracking,false);
}

function initTracking() 
{
    cordova.exec(onTrackingDataResult,onTrackingDataFail,"Test222","initTracking",null);
} 
```

从不调用执行方法（断点），并且调用我的 onTrackingDataFail 回调函数，状态为 8 = JSON 错误。

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-03-08T02:27:51.327

我在cordova中开发插件，我在方法中通常有这个结构

public boolean execute(String action, JSONArray args, CallbackContext callbackContext)
{
callbackContext.success("Hello world")
return true;
}

概念
..callbackContext.success ----返回JAvascript
调用方法成功

JavaScript.......
函数成功（msn）{
警报（msn）；// Hello world

}

类似这样的东西，在你的代码中试试。

# class - jqGrid按功能将类添加到列

> ID：15404771
> 
> 赞同：0
> 
> 时间：2013-03-14T08:53:13.810
> 
> 标签：class, function, jqgrid

[这里](https://stackoverflow.com/questions/12180718/adding-a-class-to-column)有类似的问题，但使用`cellatrr`for whole column 是相当超载的。我知道有`classes`属性，但它只能由静态文本设置。我想使用一个函数，比如：

```
$("#jqgrid").jqGrid({ 
...
colModel:
[
{
name:'a',
index:'a',
classes: function() {
return (a < b ? "ui-state-error" : "ui-state-highlight");
}
]
}); 
```

有任何想法吗？当然没有修改 jqGrid 核心 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-03T09:25:17.823

```
'title'=>'Name',
'name'=>'name',
'classes'=>'your class' 
```

可能对你有用。检查下面的链接

[http://guriddo.net/documentation/php/_2v70w5p2k.htm](http://guriddo.net/documentation/php/_2v70w5p2k.htm)

# mysql - Mysql连接表并将一张表中的area_id替换为另一张表中的area_name

> ID：15404774
> 
> 赞同：1
> 
> 时间：2013-03-14T08:53:24.607
> 
> 标签：mysql, sql, join

我希望 table`cities`中的 area_id 由它们的 area-name 右连接，这是 table 中的 name_en `areas`（I-强调行）。

**表 1：城市**

```
╔════════════╦═════════╦═══════════════╗
║ COUNTRY_ID ║ AREA_ID ║    NAME_EN    ║
╠════════════╬═════════╬═══════════════╣
║ US         ║       1 ║ Los Angeles   ║
║ US         ║       1 ║ San Francisco ║
║ US         ║       2 ║ Kansas City   ║
╚════════════╩═════════╩═══════════════╝ 
```

**表 2：领域**

```
╔════╦════════════╗
║ ID ║  NAME_EN   ║
╠════╬════════════╣
║  1 ║ California ║
║  2 ║ Missouri   ║
╚════╩════════════╝ 
```

**我的查询：**

```
SELECT c.country_id, c.area_id, c.name_en 
FROM `cities` AS c RIGHT JOIN `areas` AS a ON c.area_id = a.name_en 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:01:29.907

您不需要`RIGHT JOIN`这里，而是`INNER JOIN`.

```
SELECT  a.Country_ID, 
        a.Name_en CountryName,
        b.Name_en AreasName
FROM    Cities a
        INNER JOIN Areas b
            ON a.area_ID = b.ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/13dc2/1)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

输出

```
╔════════════╦═══════════════╦════════════╗
║ COUNTRY_ID ║  COUNTRYNAME  ║ AREASNAME  ║
╠════════════╬═══════════════╬════════════╣
║ US         ║ Los Angeles   ║ California ║
║ US         ║ San Francisco ║ California ║
║ US         ║ Kansas City   ║ Missouri   ║
╚════════════╩═══════════════╩════════════╝ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:01:47.947

查询应该是

```
 SELECT c.country_id, c.area_id, c.name_en 
   FROM cities AS c RIGHT JOIN areas AS a ON c.area_id = a.id 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T09:08:53.267

首先你必须遵守规则，你不等于两个完全不同类型的字段。所以你不应该让他们平等。它们是不同的类型。另一方面，不建议使用右连接。你应该使用左连接，除了它。

`SELECT a.country_id, a.name_en AS country_nameCountryName, b.name_en AS area_name FROM areas b LEFT JOIN cities a ON b.id = a.area_id`

# google-maps-api-3 - 如何从覆盖视图内部触发谷歌地图事件

> ID：15404775
> 
> 赞同：1
> 
> 时间：2013-03-14T08:53:30.933
> 
> 标签：google-maps-api-3, overlay

在一个应用程序中，我使用谷歌地图来显示带有谷歌标记的车站，因为谷歌标记是静态的，图标没有动画，所以我决定继承 OverlayView 并使用画布动态绘制车站。这很有效，但是，我希望这个叠加层能够接收像标记这样的谷歌事件，比如点击、鼠标悬停、鼠标移出......

例如，

```
function StationCanvas(map, position, name) {
    this.map_ = map;
    this.position_ = position;
    this.name_ = name;
    this.canvas_ = null;
    this.labelDiv_  = null;
    this.canvasWidth_ = 12;
    this.canvasHeight_ = 50;
    this.setMap(map);

    console.log('canvas                 '+this.position_);
}

StationCanvas.prototype = new google.maps.OverlayView();
StationCanvas.prototype.onAdd = function() {    
    var canvas = document.createElement("canvas");
    canvas.setAttribute("width", this.canvasWidth_);
    canvas.setAttribute("height", this.canvasHeight_);
    canvas.style.position = "absolute";     

    this.canvas_ = canvas;
    var panes = this.getPanes();
    panes.floatPane.appendChild(canvas);
    this.labelDiv_  = document.createElement("div");
    this.labelDiv_ .setAttribute("width", this.canvasWidth_);
    this.labelDiv_ .setAttribute("height", this.canvasHeight_);
    this.labelDiv_ .style.position = "absolute";            
    this.labelDiv_ .innerHTML = this.name_;
    panes.floatPane.appendChild(this.labelDiv_ );
    /////////////////////////////////////////////////////////////

   this.listeners_ = [
     google.maps.event.addListener(this.canvas_, "mouseover", function (e) {

       //this.style.cursor = "pointer";
       //google.maps.event.trigger(this, "mouseover", e);
       console.log('mouse mover');
    }),
    google.maps.event.addListener(this.canvas_, "mouseout", function (e) {

       //this.style.cursor = this.getCursor();
       //google.maps.event.trigger(this, "mouseout", e);
       console.log('mouse out');
     }),

    google.maps.event.addListener(this.canvas_, "click", function (e) {
      google.maps.event.trigger(this, "click", e); 
       console.log('click');          
    }),
    google.maps.event.addListener(this.canvas_, "dblclick", function (e) {
       //google.maps.event.trigger(this, "dblclick", e);
    }),     
  ];          
} 
```

最初，我使用如上所示的[google.maps.event.addListener](https://developers.google.com/maps/documentation/javascript/events#EventListeners)来监听事件，没有任何反应，所以似乎画布不适用于 google.maps.eventListener。

然后我发现谷歌提供了一个[addDomListener(instance:Object, eventName:string, handler:Function)](https://developers.google.com/maps/documentation/javascript/events#EventListeners)，但由于它只支持 dom 而不是画布，所以当我使用那个监听器时，浏览器会崩溃。

最后，我尝试使用

```
canvas.onmouseout = function() {
    console.log("on mouse out");
    }
} 
```

它应该可以工作，但仍然没有，我猜代码中有问题。即使这样可行，下一个问题是如何将事件触发到外部，以便我可以像谷歌标记一样使用这个覆盖视图

```
 var test1 = new StationCanvas(map, new google.maps.LatLng(53.3234,-2.9178), "abc",13);
    google.maps.event.addListener(test1, 'click', function(event){  
         console.log('test 1 click');
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:44:10.913

addDomListener 对我有用，即使使用`<canvas/>`

什么会破坏你的代码是这样的：

```
google.maps.event.addListener(this.canvas_, "click", function (e) {
      google.maps.event.trigger(this, "click", e); 
       console.log('click');          
    }) 
```

`this`，当在事件回调中使用时，指的是触发事件的对象（这里：画布节点），您的代码会产生递归。当您想触发 StationCanvas-instance 的点击事件时，您可以将实例存储为 canvas-element 的属性，以便在点击回调中轻松访问

```
StationCanvas.prototype.onAdd = function() {    
    var canvas = document.createElement("canvas");
    canvas.overlay=这个；
    //更多代码
}
```

* * *

```
this.listeners_ = [
    google.maps.event.addDomListener(this.canvas_, "click", function (e) {
       google.maps.event.trigger(this.overlay,'click')
    }),
    google.maps.event.addListener(this, "click", function (e) {
       alert('click on the StationCanvas-instance');
    })    
  ]; 
```

# windows-store-apps - 在某些机器上使用 Media Foundation 创建 mp4 文件失败

> ID：15404776
> 
> 赞同：0
> 
> 时间：2013-03-14T08:53:31.843
> 
> 标签：windows-store-apps, mp4, ms-media-foundation

我有一个 Windows 应用商店应用程序，我在其中使用 Media Foundation 创建 mp4 文件。我使用函数 MFCreateSinkWriterFromURL 创建文件，使用函数 IMFSinkWriter.WriteSample 将音频和视频数据写入文件。这一切在我的戴尔笔记本电脑、我的 Surface 平板电脑上运行良好。所以这些 mp4 文件在所有机器上都能很好地播放。当应用程序在 ASUS ME400C 平板电脑上运行时，它会创建一个 mp4 文件，但该文件无法在该机器或任何其他机器上播放。所以应用在所有机器上都是一样的（从商店下载的），但编码不同。

如果我在 TopoEdit 工具中打开文件，我会收到以下错误：无法创建源节点。不支持给定 URL 的字节流类型。

如何找出华硕机器创建的mp4文件有什么问题？是否有工具可以帮助我分析该文件？

以防万一有人感兴趣。我这里有一个用华硕机器创建的 mp4

[https://skydrive.live.com/redir?resid=9A6F31F60861DD2C!449&authkey=!AJVXFclI4BoJs0o](https://skydrive.live.com/redir?resid=9A6F31F60861DD2C!449&authkey=!AJVXFclI4BoJs0o)

还有一个用我的戴尔笔记本电脑创建的 mp4

[https://skydrive.live.com/redir?resid=9A6F31F60861DD2C!450&authkey=!AKtrfkDprZyJJI0](https://skydrive.live.com/redir?resid=9A6F31F60861DD2C!450&authkey=!AKtrfkDprZyJJI0)

问候

罗纳德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:29:57.913

使用[MediaInfo](http://mediainfo.sourceforge.net/en)或[QuickTime](http://support.apple.com/kb/DL837)检查文件的格式

Asus.mp4 文件已损坏。此文件未在 VLC、媒体播放器和 Quick Time 中打开。如果您右键单击该文件并检查“**属性”->“详细信息**” ，您会发现“视频和音频”部分为空。在创建文件时，您的代码失败或文件属性未正确设置。它能够创建文件，但缺少某些属性。**使用 MFTrace**找到它。

# null - 遇到 NULL 值时显示所有行

> ID：15404778
> 
> 赞同：0
> 
> 时间：2013-03-14T08:53:37.147
> 
> 标签：null, sybase

我使用 sysbase，我在这里有一张桌子，

```
id type value
1   aa    11
2   bb    22
2   bb    22
2   dd    44
3   aa    11
3   bb    22
4   dd    44 
```

我只想展示它：

```
id  aa  bb
1   11  
2       22
3   11  22
4 
```

即选择所有id的所有“aa”和“bb”属性，如果id没有aa属性或bb属性，则将其留空。我认为工会可能对我有用，但任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:03:07.010

试试这个。它可能不是您想要的 100% 的输出，但它为您提供了一个良好的工作开端。

你也可以在这里查看：[http ://www.sqlfiddle.com/#!6/f9eb8/1/0](http://www.sqlfiddle.com/#!6/f9eb8/1/0)

```
SELECT
  P0.ID,
  ISNULL(MAX(P0.aa), '') as 'aa',
  ISNULL(MAX(P0.bb), '') as 'bb',
  ISNULL(MAX(P0.cc), '') as 'cc',
  ISNULL(MAX(P0.dd), '') as 'dd'
FROM
(
  SELECT
    ID,
    CASE type
      WHEN 'aa' THEN Value
      ELSE NULL
    END AS 'aa',
    CASE type
      WHEN 'bb' THEN Value
      ELSE NULL
    END AS 'bb',
    CASE type
      WHEN 'cc' THEN Value
      ELSE NULL
    END AS 'cc',
    CASE type
      WHEN 'dd' THEN Value
      ELSE NULL
    END AS 'dd'
  FROM
    blah
 ) P0
GROUP BY
  P0.ID 
```

# sql - 如何使用 sql 查询或视图进行计算

> ID：15404788
> 
> 赞同：0
> 
> 时间：2013-03-14T08:54:12.410
> 
> 标签：sql, sql-server, sql-server-2005, sql-server-2005-express

我有一张桌子

```
id name parentid
----------------
1  a     0
2  b     1
3  c     2
4  d     1 
```

现在我想用

*   如果直接父 ID 计数 = 6，则为 level1，
*   如果有 6 个 level1 计数然后 level2，
*   如果有 6 个 level2 计数然后 level3，依此类推

我正在使用 SQL Server 2005 Express

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:01:19.810

您必须使用 sql 递归查询可能对您有帮助[http://msdn.microsoft.com/en-us/library/ms186243(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms186243(v=sql.105).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:07:51.363

这应该可以完成工作：只需跳转到父级，直到到达顶部并计算迭代次数。

```
create function dbo.CalcLevel (@ID int)
returns int
as
begin
  declare @level int=0
  while @ID != 0 begin
    select @ID=parentID from MyTable where ID=@ID
    set @level = @level + 1
    if (@level = 1000) set @ID = 0 -- compensate endless loop
  end
  return @level
end 
```

# certificate - 一个 pkcs12 文件可以包含多个证书链吗？

> ID：15404793
> 
> 赞同：2
> 
> 时间：2013-03-14T08:54:32.483
> 
> 标签：certificate, pkcs#12

我们能够在 pkcs12 文件中存储一个证书链。我们想在一个 pkcs12 文件中存储两个证书链。这可能吗 ？如果是这样，你能解释一下怎么做吗？谢谢。

# java - 无法在不同的机器上运行独立的 Java Swing 应用程序

> ID：15404795
> 
> 赞同：0
> 
> 时间：2013-03-14T08:54:36.500
> 
> 标签：java, swing, executable-jar, sqljdbc

我在 Eclipse 中创建了一个 Java Swing 应用程序。在 Eclipse 导出功能的帮助下，我已将应用程序打包到 Runnable JAR 中。但我无法在其他机器上运行 JAR。在我的系统中它工作正常。如何让它独立？

默认输出文件夹（即类文件）：`Project_Name/bin`

JRE 存在于`C:/Programfiles/java/jre7`

我有一个**sqljdbc** Jar，它放在我 D 盘中项目的 lib 文件夹中。

我正在使用“将**所需的库打包到生成的 JAR”**选项，但我仍然认为当我在另一台机器上双击 JAR 时，JAR 无法正确处理正确的库。请建议。感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:19:34.173

> 当我尝试在其他机器上通过 cmd 运行 JAR 时，在 cmd 中出现 UnsupportedClassVersionError

这意味着您使用的 JRE 版本低于用于编译源代码的 JDK（例如，使用 JDK7 编译的源代码不能由 Java 6 或更低版本的 JRE 执行，因为类文件格式和类版本已更改）。

> 我也得到不受支持的major.minor 51.0版

`51.0`是 JDK 7 的类文件版本。同样，这表明您尝试使用 Java 6 或更低版本运行代码。

要验证，请检查

```
C:> java -version 
```

默认情况下实际使用哪个java版本。

要解决此问题，请使用所需 Java 版本的绝对路径，例如

```
C:> C:\Programfiles\java\jre7\bin\java -jar myapplication.jar 
```

# html - ColdFusion/SQL：ELEMENT XXX 未在表格中定义

> ID：15404798
> 
> 赞同：1
> 
> 时间：2013-03-14T08:54:50.533
> 
> 标签：html, sql, forms, coldfusion

我的 cfm 页面上有一个表单，即在 SQL 数据源中插入一个新行。cfm 页面承载表单 - 提交时，-action.cfm 页面插入数据并将用户重新定位到列出新信息的页面。我遇到的问题是当我提交我得到的表单时:: 元素 NEWUSERID 在 FORM 中未定义。

insertScores.cfm 页面上的表格：

```
<form method="post" action="insertScores-action.cfm">
<table>
  <tr>
    <td>User ID</td>
    <td><input name="newUserID" type = "text" size = "50"></td>
  </tr>

  <tr>
    <td>First Name</td>
    <td><input name="newFirstName" type="text" size="50"></td>
  </tr>
  <tr>
    <td>Last Name</td>
    <td><input name="newLastName" type="text" size="50"></td>
  </tr>
  <tr>
    <td>Email</td>
    <td><input name="newEmailAdd" type="text" size="50"></td>
  </tr>
  <tr>
    <td>Score</td>
    <td><input name="newScore" type="text" size="50"></td>
  </tr>
  <tr>
    <td>Pass Date</td>
    <td><input name="newPassDate" type="text" size="50" value="dd/mm/yyyy"></td>
  </tr>
  <tr>
    <td>Level</td>
    <td><input name="newLevel" type="text" size="50"></td>
  </tr>
  <tr>
    <td><input type="submit" value="Insert Scores"></td>
 </tr>
 </table> 
```

insertScores-action.cfm 页面

```
<cfquery name="insertScores" datasource="staffwrite">
INSERT INTO protinfo_scores (
  userID
  , first_name
  , last_name
  , email
  , curr_score
  , curr_score_date
  , level
  )
VALUES (
    '#form.newUserID#'
  , '#form.newFirstName#'
  , '#form.newLastName#'
  , '#form.newEmailAdd#'
  , '#form.newScore#'
  , '#form.newPassDate#'
  , '#form.newLevel#'
  )
</cfquery>

<cfquery name = "queryScore" datasource="staff">
  SELECT userid, level
  FROM protinfo_scores
  WHERE userid LIKE '#form.newUserid#'
  AND level = '#form.newLevel#'
</cfquery>

<cflocation URL="newScore.cfm?userid=#url.userid#&level=#url.level#"> 
```

新分数.cfm

```
<center>
  <h2>Your ammendments have been made.</h2><hr>
</center>

<cfquery name = "queryScore" datasource="staff">
  SELECT first_name, last_name, email, curr_score, curr_score_date, userid, level
  FROM protinfo_scores
  WHERE userid LIKE '#URL.userid#'
  AND level = #URL.level#
</cfquery>

<cfoutput query="queryScore">

<table>
  <tr bgcolor=beige>
    <td>Name</td>
    <td width="40">#queryScore.first_name# #queryScore.last_name#</td>
  </tr>
  <tr>
    <td>Email</td>
    <td width="40">#queryScore.email#</td>
  </tr>
  <tr bgcolor=beige>
    <td>Username</td>
    <td width="100">#queryScore.userid#</td>
  </tr>
 <tr>
    <td>Level</td>
    <td width="100">#queryScore.level#</td>
  </tr>
  <tr bgcolor=beige>
    <td>Current Score</td>
    <td width="40">#queryScore.curr_score#</td>
  </tr>
  <tr>
    <td>Date Passed</td>
    <td width="40">#queryScore.curr_Score_date#</td>
  </tr>
</table>
</cfoutput> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:54:22.437

> 当提交时 -action.cfm 页面插入数据并将用户重新定位到列出新信息的页面

我无法从措辞中判断这是预期效果还是实际效果。如果它是实际效果，那么您的错误正在发生，`newScore.cfm`这是有道理的，因为表单范围内的数据在之后不会持续存在`cflocation`并且您尝试`form.newUserID`在输出表之后使用..

如果这是预期的效果而不是实际效果...

1.  正如丹所说，您正在查看两个不同的文件。您显示来自的代码，`insertScores-application.cfm`但您的操作指向`insertScores-action.cfm`.
2.  您问题中的代码不是完全复制/粘贴，甚至不是您的所有代码（`</form>`至少可以说您缺少一个标签）。在这种情况下，我建议向我们展示实际代码和错误消息。很多时候我看到`element XXX is undefined in FROM`（注意它说的是 FROM 而不是 FORM，当你盯着同一个东西几个小时时很容易错过）。错误消息将告诉您错误所在的行号。行号实际上是否在您发布的代码中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:34:08.777

我将我的更改`<form></form>`为 a `<cfform></cfform>`，现在一切似乎都可以正常工作。我的印象是这不会有任何区别，但显然确实如此。

# c# - 将字符串或字符转换为 int

> ID：15404799
> 
> 赞同：7
> 
> 时间：2013-03-14T08:54:50.533
> 
> 标签：c#, type-conversion

我完全不解

```
string temp = "73";
int tempc0 = Convert.ToInt32(temp[0]);
int tempc1 = Convert.ToInt32(temp[1]);
MessageBox.Show(tempc0 + "*" + tempc1 + "=" + tempc0*tempc1); 
```

我希望：`7*3=21`

但后来我收到：`55*51=2805`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T08:56:27.523

55 和 51 是它们在 ascii 图表中的位置。链接到图表 - [http://kimsehoon.com/files/attach/images/149/759/007/ascii%281%29.png](http://kimsehoon.com/files/attach/images/149/759/007/ascii%281%29.png)

尝试使用`int.parse`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T08:56:52.480

那是字符 7 和 3 的 ASCII 值。如果您想要数字表示，那么您可以将每个字符转换为字符串，然后使用`Convert.ToString`：

```
string temp = "73";
int tempc0 = Convert.ToInt32(temp[0].ToString());
int tempc1 = Convert.ToInt32(temp[1].ToString());
MessageBox.Show(tempc0 + "*" + tempc1 + "=" + tempc0*tempc1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T08:57:09.920

这有效：

```
 string temp = "73";
    int tempc0 = Convert.ToInt32(temp[0].ToString());
    int tempc1 = Convert.ToInt32(temp[1].ToString());
    Console.WriteLine(tempc0 + "*" + tempc1 + "=" + tempc0 * tempc1); 
```

您必须执行 ToString() 才能获得实际的字符串表示形式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T08:59:23.927

您将获得 7 和 3 的 ASCII 码，分别为 55 和 51。

用于`int.Parse()`将字符或字符串转换为值。

```
int tempc0 = int.Parse(temp[0].ToString());
int tempc1 = int.Parse(temp[1].ToString());

int product = tempc0 * tempc1; // 7 * 3 = 21 
```

`int.Parse()`不接受 a`char`作为参数，因此您必须先转换为`string`，或`temp.SubString(0, 1)`改为使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T09:00:08.840

这很有效，并且比使用`int.Parse()`or更高效`Convert.ToInt32()`：

```
string temp = "73";
int tempc0 = temp[0] - '0';
int tempc1 = temp[1] - '0';
MessageBox.Show(tempc0 + "*" + tempc1 + "=" + tempc0 * tempc1); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-14T09:01:35.953

将字符转换为整数可为您提供 Unicode 字符代码。如果将字符串转换为整数，它将被解析为数字：

```
string temp = "73";
int tempc0 = Convert.ToInt32(temp.Substring(0, 1));
int tempc1 = Convert.ToInt32(temp.Substring(1, 1)); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-14T09:05:05.137

当你写作时`string temp = "73"`，你的`temp[0]`和`temp[1]`正在成为[`char`](http://msdn.microsoft.com/en-us/library/system.char.aspx)价值观。

从[`Convert.ToInt32 Method(Char)`](http://msdn.microsoft.com/en-us/library/ww9t2871.aspx)方法

> 将指定 Unicode 字符的值转换为 **等效**的32 位有符号整数。

这意味着将 a 转换`char`为 an`int32`将为您提供 unicode 字符代码。

你只需要使用`.ToString()`你的方法`temp[0]`和`temp[1]`价值观。像;

```
string temp = "73";
int tempc0 = Convert.ToInt32(temp[0].ToString());
int tempc1 = Convert.ToInt32(temp[1].ToString());
MessageBox.Show(tempc0 + "*" + tempc1 + "=" + tempc0*tempc1); 
```

这是一个**[演示](http://ideone.com/pqzReY)**。

# codeigniter - 在查看输出之前销毁 Codeigniter 库

> ID：15404801
> 
> 赞同：1
> 
> 时间：2013-03-14T08:54:52.513
> 
> 标签：codeigniter, destructor, php

我在 Codeigniter 中有一个自定义库，可以在销毁时创建会话 cookie。

```
public function __destruct()
{
    $this->CI->session->set_userdata('user', $this->user);
} 
```

这失败了，因为在类被破坏之前，视图已经发送了标题。

我知道我可以在输出视图之前手动破坏库。我的问题是，是否可以在发送任何标头之前自动销毁我的库？

是否有我可以使用的钩子或codeigniter中的某些功能会破坏所有库/模型？

**编辑**

经过反复试验，我发现我无法在需要的时候手动破坏库。我尝试了一些方法，但该库仍然在范围内并且无法取消设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-15T19:33:32.393

您必须使用 HOOKS。只需在 config.php 中启用它，然后将新 Hook 添加到您的 Hooks 文件夹中。并且不要忘记添加信息，关于在 CONFIG 目录上的 hooks.php 中加载的位置。

# knockout.js - 淘汰赛在运行时添加子对象

> ID：15404805
> 
> 赞同：0
> 
> 时间：2013-03-14T08:55:01.830
> 
> 标签：knockout.js, parent-child

我对knockoutjs很陌生，需要一些关于像viewmodel这样的父子问题的帮助。

```
var DailyItems = function (data) {
var p = this;
this.Day = ko.observable(data.Day);
this.Date = ko.observable(data.Date);
this.Required = ko.observable(data.Required);
this.RequiredActive = ko.observable(true);
this.SetupTime = ko.observable(data.SetupTime);
this.CloseTime = ko.observable(data.CloseTime);
this.MinHrsPerDay = ko.observable(data.MinHrsPerDay);
this.MaxHrsPerDay = ko.observable(data.MaxHrsPerDay);
this.MinWorkShift = ko.observable(data.MinWorkShift);
this.WorkSegments = ko.observableArray([]);
var records = $.map(data.WorkSegments, function (x) { return new WorkShift(p, x) });
this.WorkSegments(records);
this.EnableAdd = ko.observable(ko.toJS(this.WorkSegments).length < 8);
this.Add = function () {
    this.WorkSegments.push({
        Parent: p,
        ID: "",
        Day: data.Date,
        Location: UNIT_ID,
        Role: "",
        EmployeeRoles2: "[]",
        ShiftStart: "",
        ShiftEnd: "",
        LocationActive: true,
        RoleActive: true
    });
    this.EnableAdd(ko.toJS(this.WorkSegments).length < 8);
}
this.Delete = function (item) {
    this.WorkSegments.remove(item);
    this.EnableAdd(ko.toJS(this.WorkSegments).length < 8);
} 
```

};

子模型如下：

```
var WorkShift = function (parent, data) {
var self = this;
this.Parent = ko.observable(parent);
this.ID = ko.observable(data.ID);
this.Day = ko.observable(data.Day);
this.Location = ko.observable(data.Location);
this.Parent = ko.observable(0);
this.LocationActive = ko.observable(true);
this.RoleActive = ko.observable(true);
this.ShiftStart = ko.observable(data.ShiftStart);
this.ShiftEnd = ko.observable(data.ShiftEnd);
this.EmployeeRoles2 = ko.observableArray([{ "ID": 0, "Name": "Volume"}]);
this.Location.subscribe(function (branchId) {
    $.ajax({
        type: "POST",
        url: SERVER_PATH + '/WebServices/AttributeService.asmx/GetDataOnLocationChange',
        data: "{" + "clientId: '" + CLIENT_ID
                    + "', unitId: '" + branchId
                    + "', effectiveDate:'" + EFFECTIVE_DATE
                    + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (res) {
            var d = JSON.parse(res.d);
            self.EmployeeRoles2(d.Roles);
            if (d.IsSection == true) {
                self.RoleActive(false);
                self.Parent(d.Parent);
            }
            else if (d.IsRegularBranch == false) {
                self.RoleActive(false);
                self.LocationActive(false);
            }
            else {
                self.RoleActive(true);
                self.LocationActive(true);
            }
            var tasks = self.Parent().WorkSegments();
            //Requirement: for any day of the week, if there is more than one work segment
            //at different branches the required type should be set to 'On' and made disable
            if (tasks.length > 1) {
                ko.utils.arrayForEach(tasks, function (i) {
                    if ((d.isSection == false && i.Location() != self.Location()) || (d.isSection == true && self.Parent() != i.Parent())) {
                        self.Parent().Required('O');
                        self.Parent().RequiredActive(false);
                        return;
                    }
                    else {
                        self.Parent().Required('E');
                        self.Parent().RequiredActive(true);
                    }
                });
            }
        },
        error: HandleLocationChangeError
    });
} .bind(this));
this.Role = ko.observable(data.Role);
this.TimeRangeTotal = ko.dependentObservable(function () {
    var timeRangetotal = 'T: 0';
    var startTime = parseInt(ko.toJS(this.ShiftStart));
    var endTime = parseInt(ko.toJS(this.ShiftEnd));
    if (!isNaN(startTime)) {
        var duration = endTime - startTime;
        var hrs = parseInt(duration / 100);
        var mins = duration % 100;
        if (mins == 55 || mins == 70 || mins == 85)
            mins = mins - 40; //addresses deducting from a total hour (e.g. 1400 - 845)
        timeRangetotal = "T: " + hrs + ":" + mins;
    }
    return timeRangetotal;
}, this); 
```

}

注意 Child 对象作为一个 Dependent observable 和一个 subscribe 方法。我想在运行时添加一个子对象，因此在 DailyItems 模型中添加了 Add() 函数。我的问题是如何在 Add() 方法中满足 subscribe 方法和可靠的 observable ？

感谢有人可以提供帮助。

问候， 查图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:24:25.000

抱歉，我没有时间给出完整的答案，但是您应该查看[映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)以将您的 JS 数据转换为视图模型。

在您的 add 方法中，您需要创建一个子视图模型，而不仅仅是将一个普通的 JS 对象添加到 WorkSegments 数组中：

this.Add = function () { var data = { Parent: p, ID: "", Day: data.Date, Location: UNIT_ID, Role: "", EmployeeRoles2: "[]", ShiftStart: "", ShiftEnd: "", LocationActive: true, RoleActive: true }; var child = new WorkShift(p, data); this.WorkSegments().push(child);

顺便说一句，您可以更改此代码：

```
this.EnableAdd = ko.observable(ko.toJS(this.WorkSegments).length < 8); 
```

到：

```
this.EnableAdd = ko.computed(function() { this.WorkSegments().length < 8; }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:24:40.290

以下是工作代码版本。它现在像美女一样工作:)

```
this.Add = function () {
    var data = {
        Parent: p,
        ID: "",
        Day: this.Date,
        Location: UNIT_ID,
        ParentBranch:0,
        Role: "",
        EmployeeRoles2: "[]",
        ShiftStart: "",
        ShiftEnd: "",
        LocationActive: true,
        RoleActive: true
    };
    var child = new WorkShift(p, data);
    this.WorkSegments.push(child); 
```

# iphone - IOS - 从 iphone 中的 UIwebview 生成 PDF

> ID：15404806
> 
> 赞同：0
> 
> 时间：2013-03-14T08:55:02.603
> 
> 标签：iphone, ios, objective-c, core-graphics

我正在尝试从`UIWebView`. 使用`Graphics Contexts`我可以获取屏幕框架的图像并将其绘制为 PDF。

*当前方法的问题是，* 图像模糊（质量差）所以报告 pdf 不可读。

如何获得高质量的屏幕框架图像？或者我的问题还有其他更好的解决方案吗？

PS Report 包含多种背景颜色和图像，我认为很难直接在 PDF 中绘制它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:10:17.643

```
+ (UIImage *) imageWithView:(UIView *)view
{
    UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0);
    [view.layer renderInContext:UIGraphicsGetCurrentContext()];

    UIImage * img = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return img;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:15:23.860

```
NSMutableData *pdfData = [NSMutableData data];
UIGraphicsBeginPDFContextToData(pdfData, webview.bounds, nil);
UIGraphicsBeginPDFPage();
CGContextRef pdfContext = UIGraphicsGetCurrentContext();
[webview.layer renderInContext:pdfContext];
UIGraphicsEndPDFContext(); 
```

你试过这样吗？

# javascript - 在 google chrome 中更改 javascript 中的 KeyCode

> ID：15404807
> 
> 赞同：1
> 
> 时间：2013-03-14T08:55:04.783
> 
> 标签：javascript

我正在使用 javascript 更改 KeyCode 以将键盘自动转换为波斯语键盘。我的代码如下所示

```
function submitenter(myfield, e) {
    var key;
    if(window.event)
        key = window.event.keyCode;
    else if(e)
        key = e.which;
    var str=' !"#$%،گ)(×+و-./0123456789:ك,=.؟@ِذ}يُيلآةـ،/’د×؛َءٍف‘{ًْإ~جژچ^_پشذزيثبلاهتنمئدخحضقسفعرصطغظ<|>ّ';
    if(key > 31 && key < 128) {
        window.event.keyCode=str.charCodeAt(key-32);
        return true;
    }
    if(key==13 || key==8 || key==0)
        return true;
    return false;
}

<input type=text name="Name" onkeypress="return submitenter(this, event);"> 
```

此代码在 IE 中有效，但在**Firefox 和 google chrome**中无效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:30:16.813

`keyCode`根据[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/KeyboardEvent)**只读**，该文档还声明此属性已弃用并建议改用。`event.key`

您可能会发现[Firing a Keyboard Event in JavaScript](https://stackoverflow.com/questions/961532/firing-a-keyboard-event-in-javascript)和[KeyboardEvent in Chrome，keyCode 0](https://stackoverflow.com/questions/8942678/keyboardevent-in-chrome-keycode-is-0/12522752#12522752)在分别为 Firefox 和 Chrome 创建自定义事件时很有用。

尤其需要 Chrome 的自定义事件解决方法，因为创建正常`KeyboardEvent`的 s[是错误的](https://bugs.webkit.org/show_bug.cgi?id=16735)。

# eclipse - 文件在错误的编辑区域打开

> ID：15404808
> 
> 赞同：50
> 
> 时间：2013-03-14T08:55:08.643
> 
> 标签：eclipse

我的 Eclipse Juno SR1 不知何故搞砸了。似乎我有一个新区域，如果我正确解释它，它被称为“共享区域”（仅来自工具提示）。我无法通过常规方式（即关闭/隐藏）摆脱它。我现在打开的所有文件都是在这个共享区域中打开的，而不是在我之前打开文件的区域中。该区域与普通编辑区域的不同之处在于它不会转到同一个地方（右上角，菜单下方）。

该区域只有最大化和最小化按钮。最大化它将在所有方面最大化它，这是可以预期的。最小化它实际上会隐藏它，但是打开现有文件会将其作为 Eclipse 文件列表上的一种弹出窗口带回来。

我似乎没有找到我是如何激活此功能的，而且我似乎在 Eclipse 帮助中找不到任何激活说明（单独查找“共享”和“区域”的帮助并没有真正的帮助）。

我只是希望这个功能/窗口/透视消失，让我像以前一样打开文件。有小费吗？

编辑：也许这个区域不称为“共享区域”，这可能是错误的。如果没有，它似乎没有任何名字。它只是强制所有打开新文件的编辑器在其中打开，而不是在他们通常打开的区域中打开。我确定它被称为“共享区域”的方式是最小化它，然后打开一个文件。它以弹出窗口的形式打开（如上所述），并且有一个带有 2 个图标的菜单栏，“恢复”和“共享区域”，这是预先选择的。

这是“停靠”在右侧： ![在此处输入图像描述](../Images/96b635e4ce9ef7a4de18fdafec0739cc.png)

这是停靠在下方的区域： ![在此处输入图像描述](../Images/9480757baf44cf06ed45b1ed1f3656cc.png)

该区域在停靠到 Eclipse 的某些区域时是不可停靠的，但在整个 Eclipse 窗口甚至外部延伸（当被拖动时）。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-03-14T10:08:16.723

您应该重置透视图`Window`->`Reset Perspective...`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-26T07:31:44.607

共享区域是打开文件的默认位置。这些文件在 Java 和 Debug 等不同视角的共享区域中保持打开状态，因此您可以在处理相同文件时在它们之间切换。您通常会将文件拖到共享区域之外进行处理，而不会出现在其他透视图中。

很难通过拖动来定位分片区域视图，但是您可以将周围的视图拖动到它周围的位置以将其放置在您想要的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-29T16:54:58.153

我点击有问题的瓷砖的底角并拖入直到它关闭！“重置透视图”对我不起作用，但拖动到更小的尺寸，就好像它是一张图片一样。希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-08T02:28:34.210

如果您没有任何效果，只需转到窗口-> 新窗口。打开一个新的 eclipse 副本，所有内容都已加载。即使在重新启动时，也会像往常一样加载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-27T13:46:05.707

我想我知道你的意思。如果您将任何视图拖到该“共享区域”，但不是拖到正文，而是拖到标题（应该是标题的位置），则拖动的视图将完全占据该“共享区域”。

希望有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-20T11:05:17.820

这对我有用：

Menu > Window > Perspective > Open Perspective > Other > Java(default) > Open

现在我可以创建一个新类，显示在我的工作选项卡旁边的选项卡上。

# cordova - Jquerymobile Flexslider

> ID：15404815
> 
> 赞同：1
> 
> 时间：2013-03-14T08:55:24.873
> 
> 标签：cordova, flexslider

Have a problem with flexslider. It works fine when I open the html page, but when I click on the change button and want to dynamically change the content of the page, it no longer work properly. How to solve this problem?

**HTML**

```
<!DOCTYPE html>
<html>
    <head>
        <meta content="charset=utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'/>
        <link type="text/css" rel="stylesheet" href="../css/bi.css" />
        <link type="text/css" rel="stylesheet" href="../css/jquery.mobile-1.2.0.css" />
        <link type="text/css" rel="stylesheet" href="../css/jquery.mobile.simpledialog.css" />
        <link type="text/css" rel="stylesheet" href="../css/flexslider.css" />

        <script type="text/javascript" src="../cordova-2.2.0.js"></script>
        <script type="text/javascript" src="../js/lib/jquery.js"></script>
        <script type="text/javascript" src="../js/lib/jquery.mobile-1.2.0.js"></script>
        <script type="text/javascript" src="../js/plugin/jquery.flexslider.js"></script>

        <script type="text/javascript">
            $(document).ready(function(){               
                              $('.flexslider').flexslider({ animation: 'slide' });
                              });
        </script>
    </head>
    <body>
        <div data-role="page">
            <div data-role="header" data-theme="c">
                <h1>test</h1>
                <a data-theme="c" data-icon="false" href="#" onclick="resetPage()">change</a>
            </div>
            <div data-role="content" id="div_newportalcontent">
                <div class="flexslider">
                    <ul class="slides" id="ul_newportals">
                        <li>
                            <img id="p1"  align="center" src="p1.png" />
                        </li>
                         <li>
                            <img id="p2"  align="center" src="p2.png" />
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </body>
</html> 
```

**JS**

```
<script>
    function resetPage(){
        var str='';
        $("#ul_newportals").empty();
        for(var i=3;i<6;i++){
         str+='<li><img align="center" src="p'+i+'.png" /></li>';
      }
        $("#ul_newportals").append(str);
        //$("#ul_newportals").refresh();
    }
</script> 
```

Do you have any solutions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T11:42:56.387

而不是在标签中写 onclick 给一个类或 id 来链接像 dis

```
<a data-theme="c" data-icon="false" href="#" id="change">change</a> 
```

然后在文档准备功能中将点击事件绑定到此链接，如下所示

```
$('#change').bind('click',function(){
          var str='';
        $("#ul_newportals").empty();
        for(var i=3;i<6;i++){
         str+='<li><img align="center" src="p'+i+'.png" /></li>';
      }
        $("#ul_newportals").append(str);
        //$("#ul_newportals").refresh();

}); 
```

希望这有帮助

# wpf - 如何修改WPF DataGrid中DataGridSelectAllButton下按钮的宽度？

> ID：15404816
> 
> 赞同：1
> 
> 时间：2013-03-14T08:55:28.607
> 
> 标签：wpf, wpfdatagrid

我需要修改 `Width`，`DataGridSelectAllButton`所以我使用下面的代码进行更改：

```
 <ControlTemplate x:Key="DataGridControlTemplate" TargetType="{x:Type DataGrid}">
    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="True">
        <ScrollViewer x:Name="DG_ScrollViewer" Focusable="false">
            <ScrollViewer.Template>
                <ControlTemplate TargetType="{x:Type ScrollViewer}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Button Style="{DynamicResource {ComponentResourceKey ResourceId=DataGridSelectAllButtonStyle, TypeInTargetAssembly={x:Type DataGrid}}}" 
                                    Visibility="{Binding HeadersVisibility, ConverterParameter={x:Static DataGridHeadersVisibility.All}, Converter={x:Static DataGrid.HeadersVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" 
                                    **Width="20"**>
                        </Button>
                        <DataGridColumnHeadersPresenter x:Name="PART_ColumnHeadersPresenter" Grid.Column="1" Visibility="{Binding HeadersVisibility, ConverterParameter={x:Static DataGridHeadersVisibility.Column}, Converter={x:Static DataGrid.HeadersVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"/>
                        <ScrollContentPresenter x:Name="PART_ScrollContentPresenter" CanContentScroll="{TemplateBinding CanContentScroll}" Grid.ColumnSpan="2" Grid.Row="1" d:IsLocked="True"/>
                        <ScrollBar x:Name="PART_VerticalScrollBar" Grid.Column="2" Maximum="{TemplateBinding ScrollableHeight}" Orientation="Vertical" Grid.Row="1" Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" Value="{Binding VerticalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" ViewportSize="{TemplateBinding ViewportHeight}" d:IsLocked="True"/>
                        <Grid Grid.Column="1" Grid.Row="2" d:IsLocked="True">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="{Binding NonFrozenColumnsViewportHorizontalOffset, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <ScrollBar x:Name="PART_HorizontalScrollBar" Grid.Column="1" Maximum="{TemplateBinding ScrollableWidth}" Orientation="Horizontal" Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" Value="{Binding HorizontalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" ViewportSize="{TemplateBinding ViewportWidth}" d:IsLocked="True"/>
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </ScrollViewer.Template>
            <ItemsPresenter  SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
        </ScrollViewer>
    </Border>
</ControlTemplate> 
```

问题是当我改变的时候`Width`，`DataGridSelectAllButton`我必须改变宽度`Buttom`，它也放在`DataGridSelectAllButton`每一行下面，但我不知道怎么做？有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:28:25.333

```
<Style TargetType="{x:Type DataGridRowHeader}" x:Key="DataGridRowHeaderStyle"> <Setter Property="Width" Value="20"/></Style> 
```

# perl - 如何使用 perl 显示 INR？

> ID：15404820
> 
> 赞同：1
> 
> 时间：2013-03-14T08:55:40.230
> 
> 标签：perl

如何使用 perl 代码创建印度卢比符号并将其打印在屏幕或文件上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T09:11:18.327

# c# - how can i keep the link as it is before like the comment?

> ID：15404822
> 
> 赞同：0
> 
> 时间：2013-03-14T08:55:45.637
> 
> 标签：c#, asp.net

OK i understand that the question is not that specific but i will explain. I work on a website that where people can vote about specific questions on what is important to them and they can also comment after they wrote their thoughts. the problem is, people can like the comments other people give, and I'm not talking about liking with Facebook, since people have to sing up to use the site, i've created a button and a function for liking. but once you have liked a comment you cannot like it again, and there's no unlike. and if you hit like again a msgbox shows up that tells you that you have already liked this. now the problem is that, if you like it once, the url of the site changes when the msgbox appears and when you even try to like something else, or try to vote, it shows the msgbox that "you have already liked this!"

之前 的网址：http: [//www.somesite.com/home/boduvanje?](http://www.somesite.com/home/boduvanje?opstina_id=35) opstina_id=35 之后 的网址： [http ://www.somesite.com/home/boduvanje?opstina_id=35&odgovor_id=28](http://www.somesite.com/home/boduvanje?opstina_id=35&odgovor_id=28)

对冗长的描述感到抱歉，但我认为更多的话会有所帮助。

继承人类似的功能：

```
 public ActionResult boduvanje(int opstina_id, int odgovor_id)
    {
        Session["id_momentalno"] = opstina_id;
        var ops = Convert.ToInt32(Session["id_momentalno"]);
        var log = Convert.ToInt32(Session["logiran"]);
        ViewData["log"] = log;

        if (log == 1 )
        {
            int users_id = mor.FindUser_IdByUserName(Session["userName"].ToString());
            if (mor.FindRezultatIdByUserId(users_id) & mor.FindRezultatIdByOdgovorId(odgovor_id))
            {
                Response.Write("<html><div id='msg1' onclick='message();'><div class='response' id='response_msg'>Веќе сте лајкнале! Немате право повторно !</div></div></html>");
                var lista = mor.FindAllData(opstina_id).ToList();
                return View("About", lista);

            }
            else
            {
                rezultati rez = new rezultati();
                rez.opstina_id = opstina_id;
                rez.odgovor_id = odgovor_id;
                int id = mor.FindUser_IdByUserName(Session["userName"].ToString());
                rez.user_id = id;
                mor.AddRezultati(rez);
                mor.Save();
                var lista = mor.FindAllData(opstina_id).ToList();
                return View("About", lista);
            }
        }
        else
        {

            Response.Write("<html><div id='msg1' onclick='message();'><div class='response' id='response_msg'>Не сте логирани !</div></div></html>");
            var lista = mor.FindAllData(opstina_id).ToList();
            return RedirectToAction("LogOn", "Account");

        }

    } 
```

按钮所在的asp文件中的代码如下：

```
 <div class="like_button" id= "like_button" ><a href="/home/boduvanje?opstina_id=<%:Session["opstina_id"]%>&odgovor_id=<%: tcm.odgovor_id %>"><img src="/images/btn_dopaga.png" alt="like" /></a></div> 
```

提前谢谢你，告诉我是否应该发布更多信息或其他内容:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:55:59.573

为了实现这个逻辑，你必须在数据库中更新like状态和replayId。单击按钮后，您可以调用网络服务以获取类似状态。然后你可以在javascript中给出消息。通过使用 web 服务，它也不会影响性能。您可以跟踪所有答案和问题的每个点赞状态。

保持会话中的状态不是一个好主意。

# macos - 使用 Xcode 进行调试

> ID：15404823
> 
> 赞同：3
> 
> 时间：2013-03-14T08:55:48.160
> 
> 标签：macos, xcode4

这个问题可能是微不足道的或重复的。我在 Mac OS X 上。我有一个使用 makefile 编译的 exe（Mac OS X 的 .app），没有 Xcode。我想使用 Xcode 调试这个应用程序。（应用程序可以在使用 -g 选项编译时进行调试）。现在，我想使用 Xcode 调试这个 exe。如何在 Xcode 中做到这一点？

在使用 Visual Studio 的 Windows 中，我可以使用“devenv 应用程序”在 Visual Studio 下打开 exe，然后进行调试。

这在 Mac OS X 系统中如何实现？

我正在使用 Xcode 4.4。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T09:52:04.477

我是通过以下方式进行的：

1.  在 Xcode 下创建一个空项目。
2.  在产品 > 新方案下，添加一个方案。
3.  在运行下，选择 exe 或应用程序。

现在，放置断点并运行 exe。

# django - 如何在 django-cms 中创建文章列表视图

> ID：15404829
> 
> 赞同：3
> 
> 时间：2013-03-14T08:55:56.877
> 
> 标签：django, django-cms

我是 django-cms 的绝对初学者，刚刚获得了一些创建模板的知识。只是想知道，如何创建一个门户页面，在每个不同的类别中都有一些文章？

请简单地指出一种实用的方法，不需要真正的代码。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:39:28.043

正如其他人所指出的，这样做的方法是将您的 CMS 页面连接到另一组视图。Django-CMS 提供了应用程序钩子：

```
#cms_app.py
from cms.app_base import CMSApp
from cms.apphook_pool import apphook_pool

class YourModuleApp(CMSApp):
    name = 'My App MOdule'
    urls = ['my_app.urls']

apphook_pool.register(YourModuleApp) 
```

因此，如果您有一个名为“my_app”的模块，其中包含 urls.py，Django-CMS 会将这些模式添加到页面中。在管理员页面的“高级设置”部分查看应用程序下拉菜单。

一旦应用程序与页面挂钩，Django-CMS 将从它所拥有的信息中提取任何内容和布局模板，然后将处理交给与之挂钩的其他 URL 模式。这就是你可以引入另一个模型、添加表单、处理 POST 等的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-15T16:10:45.083

你可以按照正常的 Django 方式来做。创建一个普通的 Django 应用程序，其 URL 指向呈现模板的视图。视图可能如下所示：

```
from django.shortcuts import render
from cms.models import Page

def articles(request):
   pages = Page.objects.public()
   render(request, 'example.html', {'pages': pages}) 
```

模板可能如下所示：

```
{% load cms_tags %}
{% for page in pages %}
  <p><a href="{{ page.get_absolute_url }}">{% page_attribute "page_title" page %}</a></p>
{% endfor %} 
```

你可以在这里停下来。或者你可以...

## 额外的 Django CMS 与 AppHooks 的集成

您是否希望您的非开发人员内容经理能够将文章列表放在任何他们想要的地方？这就是[AppHooks](http://docs.django-cms.org/en/stable/how_to/apphooks.html)的用武之地。

在文件中创建一个`CMSApp`类，`appname/cms_app.py`如下所示：

```
from cms.app_base import CMSApp
from cms.apphook_pool import apphook_pool
from django.utils.translation import ugettext_lazy as _

class ArticleListApp(CMSApp):
    app_name = 'articlelist'
    name = _('Article List')

    def get_urls(self, page=None, language=None, **kwargs):
        return ['articlelist.urls']

apphook_pool.register(YourModuleApp) 
```

删除项目范围内的 URL 条目，`urls.py`因为您不再需要它。您的应用`urls.py`需要包含 regex 的视图`^$`。

现在您或任何具有必要权限的内容管理员用户可以在管理界面中创建一个页面，并修改高级设置以选择“文章列表”应用程序：

[![应用程序和应用程序实例名称页面设置](../Images/5772fc03b4513647ee3a6ebff704ebd1.png)](https://i.stack.imgur.com/kwVO4.png)

一个问题是，在页面（以及它的所有祖先页面）发布之前，这将不起作用。

# android - 完全独立的移动 Rails 应用程序，编译为原生应用程序

> ID：15404831
> 
> 赞同：3
> 
> 时间：2013-03-14T08:56:02.920
> 
> 标签：android, ios, ruby-on-rails, mobile, native

有没有办法将移动应用程序开发为独立的 Rails/Ruby 应用程序？

想法是使用常规工具（浏览器、瘦/WEBrick 和命令行）在 Rails 中进行开发，然后将 Rails 应用程序文件夹添加到专门创建的 Android/iOS 应用程序中，从那里将其编译为本机可执行文件。我猜这类似于当前的 PhoneGap 创建过程。我知道 RubyMotion，但只知道它的 iOS，而且它也不完全是 Rails。

1.  目前有这样的东西吗？
2.  你需要做什么？显然，您需要运行某种本地网络服务器。您是否需要在本机应用程序中运行整个堆栈（Apache、Ruby 和 Rails），或者您可以采取捷径（例如 Android 的 JRuby）？
3.  您对这将如何执行的直觉是什么？

欢迎任何想法。

**编辑**

宝石可能也会成为一个大问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:25:02.473

奇怪的是，您想将 Web 应用程序用作移动应用程序。是否有理由使用 Rails 而不仅仅是 Ruby（那么你在 Android 上有 Ruboto）。我认为 HTML5（+ 本地存储）足以为移动部分提供服务并从网络上的某个地方使用 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:13:01.460

> 目前有这样的东西吗？

[Rhodes](http://www.motorola.com/Business/US-EN/RhoMobile+Suite/Rhodes)在球场上，但它不是 Rails 并且（最后我检查）不能使用 gems。但是，它确实让您使用 Rails 控制器模式构建所谓的混合应用程序，包括部分和所有这些。

> 显然你需要运行某种本地网络服务器

不一定，出于安全原因这样做是个坏主意。混合应用程序，例如 Rhodes，有一个 Web 表示层 ( `WebView`)，显示后端生成的 HTML 内容，没有 HTTP 堆栈。

> 您对这将如何执行的直觉是什么？

在许多设备上，我怀疑您的应用程序会因为内存不足而在启动时崩溃。其余的，我预计性能平庸，仅仅是因为 Rails 不是特别苗条。

# android - 和Engine Box2D。删除与碰撞的关节后游戏崩溃

> ID：15404838
> 
> 赞同：0
> 
> 时间：2013-03-14T08:56:23.153
> 
> 标签：android, box2d, andengine

请帮忙！删除 Joint with collides 后我的游戏崩溃。

游戏是挂在绳子上的身体。手指割断绳子，游戏崩溃！

我的代码：

```
@Override
protected Scene onCreateScene() {

    this.mEngine.registerUpdateHandler(new FPSLogger());

    this.mScene = new Scene();
    this.mScene.setBackground(new Background(0, 0, 0));     

    this.mPhysicsWorld = new PhysicsWorld(new Vector2(0, SensorManager.GRAVITY_EARTH), false);

    /* Create the face and add it to the scene. */
    ball = new Sprite(200, 50, this.mBallTextureRegion, this.getVertexBufferObjectManager());
    ball.setScale(0.5f);

    final Rectangle point = new Rectangle(400, 0, 5, 5, this.getVertexBufferObjectManager());

    rope = new Line(point.getX()+5/2, point.getY()+5/2, ball.getX(), ball.getY(), this.getVertexBufferObjectManager());

    this.mScene.attachChild(ball);
    this.mScene.attachChild(rope);
    this.mScene.attachChild(point);

    final Body ballBody = PhysicsFactory.createCircleBody(this.mPhysicsWorld, ball, BodyType.DynamicBody, FIXTURE_DEF);
    final Body pointBody = PhysicsFactory.createBoxBody(this.mPhysicsWorld, point, BodyType.StaticBody, FIXTURE_DEF);

    this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(ball, ballBody, true, true) {

    @Override
    public void onUpdate(final float pSecondsElapsed) {
    super.onUpdate(pSecondsElapsed);
    final Vector2 movingBodyWorldCenter = ballBody.getWorldCenter();
    rope.setPosition(rope.getX1(), rope.getY1(), movingBodyWorldCenter.x * PhysicsConstants.PIXEL_TO_METER_RATIO_DEFAULT, movingBodyWorldCenter.y * PhysicsConstants.PIXEL_TO_METER_RATIO_DEFAULT);
    }
    });

    final RevoluteJointDef revoluteJointDef = new RevoluteJointDef();
    revoluteJointDef.initialize(pointBody, ballBody, pointBody.getWorldCenter());
    revoluteJointDef.enableMotor = true;
    revoluteJointDef.maxMotorTorque = 1;    
    final Joint joint = this.mPhysicsWorld.createJoint(revoluteJointDef);

    //collide detector
    this.mScene.registerUpdateHandler(new IUpdateHandler() {
        @Override
        public void reset() { }

        @Override
        public void onUpdate(final float pSecondsElapsed) {
            if(rope.collidesWith(cutLine)) {
                mPhysicsWorld.destroyJoint(joint);                  
                mScene.detachChild(rope);
            } 

    }
});

    this.mScene.registerUpdateHandler(this.mPhysicsWorld);
    this.mScene.setOnSceneTouchListener(this);
    return this.mScene;
}

@Override
public boolean onSceneTouchEvent(final Scene pScene, final TouchEvent pSceneTouchEvent) {   
        if(pSceneTouchEvent.isActionDown()) {
            this.addCuter(pSceneTouchEvent.getX(), pSceneTouchEvent.getY());
            return true;
        }           
        if(pSceneTouchEvent.isActionMove()) {
            this.moveCuter(pSceneTouchEvent.getX(), pSceneTouchEvent.getY());
            return true;
        }
        if(pSceneTouchEvent.isActionUp()) {
            this.delCuter(pSceneTouchEvent.getX(), pSceneTouchEvent.getY());
            return true;
        }
    return false;}

private void addCuter(final float pX, final float pY) { 
    cutBegin = new Rectangle(pX, pY, 5, 5, this.getVertexBufferObjectManager());
    cutEnd = new Rectangle(pX, pY, 5, 5, this.getVertexBufferObjectManager());
    cutLine = new Line(cutBegin.getX()+5/2, cutBegin.getY()+5/2, cutEnd.getX(), cutEnd.getY(), this.getVertexBufferObjectManager());

    this.mScene.attachChild(cutBegin);
    this.mScene.attachChild(cutEnd);
    this.mScene.attachChild(cutLine);

    cutEnd.setColor(1, 0, 0);
    cutLine.setColor(1, 0, 0);}

private void moveCuter(final float pX, final float pY) {        
    cutEnd.setPosition(pX-5/2, pY-5/2);
    cutLine.setPosition(cutBegin.getX()+5/2, cutBegin.getY()+5/2, pX, pY);      }

private void delCuter(final float pX, final float pY) {
    this.mScene.detachChild(cutBegin);
    this.mScene.detachChild(cutEnd);
    this.mScene.detachChild(cutLine);} 
```

错误日志猫

03-14 10:45:48.329: A/libc(12926): 致命信号 11 (SIGSEGV) 在 0x00000000 (code=1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:12:19.260

我发现这通常发生在您尝试更改游戏中更新依赖于事件触发的某些方面时，即在事件触发之外，

```
mActivity.runOnUpdateThread(new Runnable()
{
    @Override
    public void run()
    {
        //...                               
    }
}); 
```

您的 onSceneTouchEvent 看起来可能是一个竞争者！尝试在对场景进行更改以使其“安全”的函数调用周围添加上述代码，即，当更新线程正在处理它们时，您不会从中断中更改游戏变量。

# c# - 使用 HTMLAgilityPack 和 XPath 进行选择性屏幕抓取

> ID：15404839
> 
> 赞同：0
> 
> 时间：2013-03-14T08:56:25.037
> 
> 标签：c#, xpath, html-agility-pack

[这个问题有一个亲戚：[Screen scraping with htmlAgilityPack and XPath](https://stackoverflow.com/questions/15404670/screen-scraping-with-htmlagilitypack-and-xpath) ]

我有一些要解析的 HTML，其一般外观如下：

```
...
<tr>
<td><a href="" title="">Text Data here (1)</a></td>
<td>Text Data here(2)</td>
<td>Text Data here(3)</td>
<td>Text Data here(4)</td>
<td>Text Data here(5)</td>
<td>Text Data here(6)</td>
<td><a href="link here {1}" class="image"><img alt="" src="" /></a></td>
</tr>
<tr>
<td><a href="" title="">Text Data here (1)</a></td>
<td>Text Data here(2)</td>
<td>Text Data here(3)</td>
<td>Text Data here(4)</td>
<td>Text Data here(5)</td>
<td>Text Data here(6)</td>
<td><a href="link here {1}" class="image"><img alt="" src="" /></a></td>
</tr>
... 
```

我正在寻找一种可以将其解析为有意义的块的方法，但我希望有选择性数据，例如前两个 td 数据和最后两个 td 数据：

(1), (2), (6), {1} `CRLF`
(1), (2), (6), {1}`CRLF`
等等

我尝试了两种方式：方式1：

```
var dataList = currentDoc.DocumentNode.Descendants("tr")
            .Select
             (
              tr => tr.Descendants("td").Select(td => td.InnerText).ToList()
             ).ToList(); 
```

它获取了 tds 的内部文本，但无法获取链接 {1}。在这里，创建了一个包含许多列表的列表。我可以使用嵌套的 foreach 来管理它。

方式2：

```
var dataList = currentDoc.DocumentNode
           .SelectNodes("//tr//td//text()|//tr//td//a//@href"); 
```

这确实为我提供了链接 {1} 和所有数据，但它变得杂乱无章。在这里，所有数据都以大块的形式存在。因为，一个 tr 中的数据是相对的，所以我现在放松了这种关系。

那么，如何获取我感兴趣的数据，只有前两列和后两列数据呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:15:28.357

以下代码将选择前两个`<td>`数据和后两个`<td>`节点数据：

```
html.DocumentNode.Descendants("tr")
    .Select(tr => 
       from td in tr.SelectNodes("td[position() < 3 or position() > last() - 2]")
       let a = td.SelectSingleNode("a[@href!='']")
       select a == null ? td.InnerText : a.Attributes["href"].Value); 
```

此 xpath 按位置过滤节点：

```
td[position() < 3 or position() > last() - 2] 
```

# mongodb - 使用 mongoid 通过 json 返回别名字段

> ID：15404850
> 
> 赞同：3
> 
> 时间：2013-03-14T08:57:00.200
> 
> 标签：mongodb, mongoid

我正在使用 mongoid(2.6.0) 及其别名，这就是我的模型字段的样子

```
class Place
  include Mongoid::Document
  field :n, :as => :name, :type => String
  .... 
```

现在我有一个控制器，它可以找到一个位置并将对象作为 json 返回

```
@places = Place.find({some query})
respond_to do |format|
  format.json { render json: @places }
end 
```

现在当我做

```
JSON.parse(response.body) 
```

我的回复包含字段为“n”而不是“名称”。

有没有办法让 mongoid 返回别名而不是实际名称？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T10:11:43.277

那么你可以尝试覆盖**serializable_hash**方法。只需在您的模型中添加类似的内容。

```
def serializable_hash(options)
  original_hash = super(options)
  Hash[original_hash.map {|k, v| [self.aliased_fields.invert[k] || k , v] }]
end 
```

# javascript - 从具有主干的服务器获取数据并创建模型和集合

> ID：15404855
> 
> 赞同：4
> 
> 时间：2013-03-14T08:57:11.700
> 
> 标签：javascript, json, backbone.js

我有一个 url `http://anexampleproject/api/players` ，它以 json 格式返回玩家列表。

如何在控制台中创建模型和集合以及警报名称。

url 返回 json 的示例：

```
 [
       {
          "id": 1,
          "name": "Lily",
          "age": 14,
          "city": New York,
       },
       {
         "id": 2,
         "name": "BIlly",
          "age": 14,
          "city": New York,
      }
    ] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T09:11:49.073

```
var data = [{
    "id": 1,
    "name": "Lily",
    "age": 14,
    "city": "New York"
}, {
    "id": 2,
    "name": "BIlly",
    "age": 14,
    "city": "New York"
}];

var MyModel = Backbone.Model.extend({
    defaults: {
        "id": "",
        "name": "",
        "age": 0,
        "city": ""
    }
});

var MyCollection = Backbone.Collection.extend({
    model: MyModel
});

var myCollection = new MyCollection(data); 
```

编辑：

使用网址

```
var MyCollection = Backbone.Collection.extend({
    url: "http://anexampleproject/api/players",
    model: MyModel
});

var myCollection = new MyCollection();
myCollection.fetch({
    success: function(){

    },
    error: function(){

    }
}); 
```

# email - 詹金斯抛出“客户端没有权限作为这个发件人发送”

> ID：15404856
> 
> 赞同：9
> 
> 时间：2013-03-14T08:57:17.053
> 
> 标签：email, jenkins, smtp

有很多用户有相同错误的帖子，但它们都不适合我......

我正在尝试发送电子邮件报告`Hudson/Jenkins`...

我们的邮件服务器使用 SSL/TLS，我为 Jenkins 配置了 TLS，然后我收到此错误：

```
Client does not have permissions to send as this sender 
```

当我尝试`javamail`使用代码时，它会正确发送电子邮件。此外，Thunderbird 工作正常。

有任何想法吗？我需要联系邮件服务器管理员吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-14T10:45:31.127

终于搞定了，感谢[Friso](https://stackoverflow.com/questions/9693526/how-can-i-set-the-senders-address-in-jenkins)

必须将我的电子邮件地址设置`System Admin e-mail address`在`Jenkins Location`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-14T06:24:36.690

根据版本 2.19.4，电子邮件应在以下三个位置进行更改：

扩展电子邮件通知 - 如果使用 SMTP 插件

电子邮件通知 - SMTP 身份验证

Jenkins 位置 - 系统管理员电子邮件地址

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-27T14:49:54.590

我遇到了同样的问题，我发现凭据不再有效，所以我询问了 IT 部门，他们告诉我在 LAN 上不再需要凭据。

现在它起作用了！

# c# - 向 REST 响应添加验证信息

> ID：15404859
> 
> 赞同：10
> 
> 时间：2013-03-14T08:57:21.433
> 
> 标签：c#, rest, asp.net-web-api

我正在尝试构建一个（大部分）宁静的服务，但我正在努力解决设计的一部分。我们公开各种资源，在服务器端如下所示：

```
public class Thing1 : Resource {
  public string ABC {get;set;}
  public string DEF {get;set;}
} 
```

`Resource`基类在哪里：

```
public class Resource {
  public List<Link> Links {get;set;}
} 
```

where `Link`s，反过来，只是绑定`rel`s 和`uri`s。通过这种方式，每个`Resource`都有指向其他资源等的链接，消费者可以浏览服务提供的各种资源。

一些（但不是全部）资源是可编辑的，因此消费者将检索资源，对其进行更改，然后将`PUT`这些更改返回给服务。当然，此时，服务将根据需要执行验证（并处理任何并发问题）。

但是，和往常一样，如果消费应用程序可以在尝试请求之前预先执行一些验证`PUT`，以减少不必要的往返行程（这与我们可能使用 javascript 验证的方式非常相似，即使服务器已经重复一遍）。

所以，我想在我们的响应中包含一些验证信息，以便消费应用程序知道（例如）`ABC`不能超过 6 个字符。应该注意的是，目前，消费者*可以*使用相同的资源类（它们在一个单独的程序集中，以及适当的`MediaTypeFormatter`类）——添加属性（例如[`System.ComponentModel.DataAnnotations.RequiredAttribute`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.requiredattribute.aspx)）感觉不对，因为消费应用程序最终以验证为那是在他们使用共享程序集的时候，而不是*现在*在服务中。

还有一些更基于策略的验证，其中实际验证属性在运行时才能计算。

**tl;博士;**

什么是在 REST 响应中包含“有用”验证信息以及实际资源的良好设计，以便使用应用程序可以构建良好的用户体验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:09:11.107

也许像，

```
> GET /api/Thing/1
< 200 OK
< Content-Type:  application/vnd.acme.resource+xml

<resource>
  <ABC>blah</ABC>
  <DEF>blurg</DEF>
  <links>
    <links rel="help" href="/api/help/things"/>
    <links rel="http://acme.com/rels/validationrules" href="/api/validationrules/things"/>
  </links>
</resource>

> GET /api/validationrules/things
< 200 OK
< Content-Type: application/vnd.acme.validationrules+xml

<rules resourceType="thing">
  <property name="ABC" MaxLength="6"/>
  <property name="DEF" MaxLength="8"/>
</rules> 
```

我在自己的 API 中做了类似的事情。不幸的是，我知道没有标准的媒体类型试图解决这个特殊的需求。我怀疑尝试定义这种类型的媒体类型会导致“厨房水槽”效应，每个人都有不同的要求，他们都被投入其中，最终结果对每个人来说都太复杂了。

但是，定义您自己的媒体类型来满足您的特定需求可能是一个非常易于管理的挑战。

在我看来，这个解决方案的重要之处在于它`/api/validationrules/things`应该很少更改，因此可以由客户端私下缓存。这意味着客户只需支付非常少的成本即可将该信息作为不同的资源进行检索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:07:46.533

如果您有足够的预算（时间、金钱或两者兼有），请为资源构建一个元服务，以便您的其余部分只返回数据（带有元数据标识符），并且如果客户需要，它可以为刚收到的数据请求验证元数据. 这样，您只发送客户需要的东西并合理分离蛋黄和蛋白。

作为一种实现变体，对于每个请求，`/some/res/ource`您都可以创建一个伴侣，该伴侣`/some/res/ource/meta`将返回有关该资源的只读元数据。鉴于路径几乎相同，您可以将验证定义为类成员的属性，并且元服务将简单地从路由中找到一个类并从类定义中构建验证信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T14:28:27.310

如果我正确理解您的问题，您可以执行以下解决方案：

```
 public class ServiceResponse
    {
        private List<Exception> exceptions = new List<Exception>();

        public List<Exception> Errors { get { return exceptions; } }

        private string password;
        public string Password
        {
            get
            {
                return password;
            }
            set
            {
                if (string.IsNullOrEmpty(value))
                {
                    exceptions.Add(new ArgumentException("Password cannot be empty!"));
                }

                if (value != null && value.Length < 10)
                {
                    exceptions.Add(new ArgumentException("Password is too short!"));
                }

                if (exceptions.Count == 0)
                {
                    password = value;
                }
                //else throw an Exception that errors were occured or do nothing
            }
        }
    } 
```

然后您可以检查*Errors*属性是否有任何错误，如果有则显示所有错误或您想要的任何错误。在这种情况下，在一切正确之前不会设置属性“密码”。硬编码的错误消息可以替换为资源字符串。结果，您发送的响应可以在客户端正确处理而无需任何 javascript。

# java - isChecked 在动态创建的复选框中

> ID：15404860
> 
> 赞同：0
> 
> 时间：2013-03-14T08:57:23.377
> 
> 标签：java, android, checkbox

我在运行时动态创建了一些复选框，现在我想知道其中一个是否被选中。我怎么能这样做？

```
for (int i = 0; i < cnt; i++) {
                    cb = new CheckBox(getApplicationContext());
                    TextView txt = new TextView(getApplicationContext());
                    ll2 = new LinearLayout(
                            PollActivity.this);
                    ll2.setOrientation(LinearLayout.HORIZONTAL);

                    ll2.addView(cb);

                    ll.addView(ll2);

                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:02:51.550

您需要为 CheckBox 设置[CompoundButton.OnCheckedChangeListener](http://developer.android.com/reference/android/widget/CompoundButton.OnCheckedChangeListener.html) 以在单击复选框时触发事件。例子 ：

```
cb.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

   @Override
   public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {

      // do your code here
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:03:07.207

我建议您为每个`CheckBox`设置[OnCheckedChangeListener](http://developer.android.com/reference/android/widget/CompoundButton.OnCheckedChangeListener.html)设置（循环） 。

```
cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {
   public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
      if (isChecked) {
         // do some action
      }     
   }
}); 
```

现在您可以处理每个 CheckBox 的事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:05:17.090

只需检查返回布尔值的 cb.isChecked() 即可。

# c# - 调用互操作后，.NET Framework 4 和 WPF 中的致命执行引擎错误

> ID：15404862
> 
> 赞同：1
> 
> 时间：2013-03-14T08:57:32.400
> 
> 标签：c#, .net, wpf, interop, fatal-error

我正在开发一个 WPF 应用程序 .NET Framework 4。该应用程序通过 Interop 将示例数组传递给 C++ 库以进行一些统计分析。有时，仅使用某些输入值，我就会收到“致命的执行引擎错误”。

为了了解发生了什么，我创建了一个小型 WPF 测试应用程序。显然，数据已正确传递回 WPF 应用程序，即使在返回的值显示在 TextBox (WPF) 中之后也会发生崩溃（有趣的是，稍微移动鼠标指针后会发生异常！）。

我还尝试在一个小型控制台测试应用程序中测试相同的 C++ 库。在这种情况下，我得到了不同的行为：当调用 COM 库时，控制台应用程序会停止并退出。没有例外，没有错误。

我正在阅读类似的问题，但那是 .NET Framework 2 和 .NET Framework 3.5。

你能告诉我我的替代方案是什么来追踪这个错误吗？你有什么建议来解决这个问题？

提前致谢，

詹卢卡

# ruby-on-rails-3 - 无法加载网页，因为服务器没有为所有 JSON 请求发送数据

> ID：15404864
> 
> 赞同：0
> 
> 时间：2013-03-14T08:57:46.400
> 
> 标签：ruby-on-rails-3, networking, firewall

无论是通过 AJAX 还是浏览器中的直接 GET 请求，我的一些站点用户都无法成功调用任何 api 端点。所有 HTML 页面都可以正常工作。他们在访问 API 端点时收到以下错误。

--

![在此处输入图像描述](../Images/c881eeb72a34e77113f687d97018803d.png)

--

这里可能是什么问题？我怀疑某种防火墙/ISP/网络限制可能会导致这种情况，但我不确定。我可以做些什么来调试问题？我检查了我的服务器日志，请求正在访问我的服务器，并且正在发回正确的响应。我正在使用导轨 3。

**更新** 发现了问题。客户端的防火墙正在阻止应用程序/json 内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:59:20.680

客户端的防火墙正在阻止所有 mime 类型的内容`application/json`

# distance - 使用度分秒格式的纬度和经度查找两点之间的距离

> ID：15404865
> 
> 赞同：4
> 
> 时间：2013-03-14T08:57:47.887
> 
> 标签：distance, latitude-longitude

我正在开发一种工具来查找给定纬度和经度的两点之间的距离。当纬度和经度以**Signed Degree Format**给出时，它可以。**但是当以度分秒格式**（例如：N 11° 14' 52'）给出纬度和经度时，我找不到计算距离的方法。有人可以建议我找到距离的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:41:17.480

因此，首先将 DMS 坐标转换为您的度数格式。

例如`11°14'52" = 11 + 14/60 + 52/3600 = 11.24777778 degrees`

然后像您所说的那样继续进行您所说的距离计算。

* * *

**编辑：** 请注意，南半球的纬度和西半球的经度是负数。所以上面的公式真的应该是：

`sign(degrees) * (abs(degrees) + minutes/60 + seconds/3600)`

# java - 如何使用 DOM 解析此 XML 并将其内容放入哈希表中？

> ID：15404867
> 
> 赞同：3
> 
> 时间：2013-03-14T08:57:50.300
> 
> 标签：java, xml, parsing, dom, hashtable

我想要以下 XML 中的两个哈希表。第一个是 (screen id,widget id)，第二个是 (widget id,string id)。

我已经能够使用 DOM 解析这个 XML，但是我还没有将它的内容放入哈希表中。

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<screen id="616699" name ="SCR_NEW_HOME">

        <widget id="617259" type="label" name= "NEW_HOME_TITLE">
        <attribute type = "Strings">

            <val id="54">HOME_SYSSETUP</val>
        </attribute>
        </widget>
        <widget id="616836" type = "label" name ="HOME_MENU">
        <attribute type="Strings">

                <val id="1815" >DAILY</val>
                <val id="2060" >MONTH_NOV</val>
                <val id="1221" >ASPECT_RATIO_PANSCAN</val>
        </attribute>
        </widget> 
```

```
<screen id="1556" name="SCR_EVENTLIST">

        <widget id="77009" type= "label" name="EL_GUIDE_EVENT_TABLE">
        <attribute type ="Strings">

                <val id="1">time</val>
                <val id="2">date</val>
        </attribute>
        </widget>
        <widget id="186461" type= "label" name= "EL_PIG_CONT">
        <attribute type ="Strings">

                <val id="3">progress bar</val>
                <val id="4">video</val>
        </attribute>
    </widget> 
```

我试过的代码是

```
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.NamedNodeMap;
import org.w3c.dom.NodeList;
import org.w3c.dom.Node;
import org.w3c.dom.Element;
import org.xml.sax.SAXException;

import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Hashtable;

public class ReadXmlFile {
    private static Hashtable<Integer,ArrayList<Integer>> D1 = new Hashtable<Integer, ArrayList<Integer>>();
    private static Hashtable<Integer,ArrayList<Integer>> D2 = new Hashtable<Integer,ArrayList<Integer>>();
     static Integer ScreenID;
     static ArrayList<Integer> StringID;
     static ArrayList<Integer> WidgetID;
     static Integer WidgetID2;
  public static void main(String argv[]) {

   // try {

    File fXmlFile = new File("E:/eclipse workspace/stringValidation/screens.xml");
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = null;
    try {
        dBuilder = dbFactory.newDocumentBuilder();
    } catch (ParserConfigurationException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    Document doc = null;
    try {
        doc = dBuilder.parse(fXmlFile);
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    doc.getDocumentElement().normalize();

    System.out.println("Root element :" + doc.getDocumentElement().getNodeName());
    if(doc.hasChildNodes()){

        printNote(doc.getChildNodes());

    }

    }
private static void printNote(NodeList nodeList) {

        for (int count = 0; count < nodeList.getLength(); count++) {

        Node tempNode = nodeList.item(count);

        // make sure it's element node.
        if (tempNode.getNodeType() == Node.ELEMENT_NODE) {

            // get node name and value
            System.out.println("\nNode Name =" + tempNode.getNodeName() + " [OPEN]");
            System.out.println("Node Value =" + tempNode.getTextContent());

            if (tempNode.hasAttributes()) {

                // get attributes names and values
                NamedNodeMap nodeMap = tempNode.getAttributes();

                for (int i = 0; i < nodeMap.getLength(); i++) {

                    Node node = nodeMap.item(i);
                    System.out.println("attr name : " + node.getNodeName());
                    System.out.println("attr value : " + node.getNodeValue());

            }

        }

        if (tempNode.hasChildNodes()) {

            // loop again if has child nodes
            printNote(tempNode.getChildNodes());

        }

        System.out.println("Node Name =" + tempNode.getNodeName() + " [CLOSE]");

    }

    }

  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-16T07:18:54.453

通过查看您的代码，我假设您能够打印出整个文档，但不能找到您要查找的数据。[我用XMLBeam](http://xmlbeam.org)做类似的事情。它使您可以创建所需数据的面向对象的表示，而无需遵循您正在处理的 xml 的完整结构。以下是如何在您的第一个 xml 文件中提取数据，第二个同样简单（并且比手动遍历 DOM 短得多）：

```
public class TestFirst {

@XBDocURL("res://first.xml")
public interface Projection {               
    @XBRead("//screen")
    List<Screen> getScreens();
}

public interface Widget {
    @XBRead("./@id")
    String getID();

    @XBRead("./attribute[@type='Strings']/val")
    List<String> getStringAttributes();
}

public interface Screen {                                   
    @XBRead("./@id")
    String getID();

    @XBRead("./widget")
    List<Widget> getWidgets();
}

@Test
public void testFirst() throws IOException {
    Projection projection = new XBProjector().io().fromURLAnnotation(Projection.class);
    for (Screen screen:projection.getScreens()) {
        for (Widget widget:screen.getWidgets()) {
            for (String string:widget.getStringAttributes()) {
                System.out.println(screen.getID()+" "+ widget.getID()+ " "+ string);
            }
        }
    }
} 
```

}

这打印出来

```
616699 617259 HOME_SYSSETUP
616699 616836 DAILY
616699 616836 MONTH_NOV
616699 616836 ASPECT_RATIO_PANSCAN 
```

现在您应该可以填写您的 HashTable。（请考虑 HashMap 或 ConcurrentHashMap）

# asp.net - 在 asp.net 3.5 中将 office 2003 excel 文件转换为 office 2007

> ID：15404869
> 
> 赞同：1
> 
> 时间：2013-03-14T08:57:52.940
> 
> 标签：asp.net, excel-2007, export-to-excel, rdlc

可以在 asp.net c# 中进行转换。我有一个棕地 asp.net 3.5 (2.0) 应用程序，它使用 RDLC 然后导出 2003 excel 文件。我希望创建一个新的内存流转换为较新的 2007 及以上格式

xls 到 xlsx 是我想要做的。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:01:50.007

可能这就是您想要搜索的内容。[链接](http://forums.asp.net/t/1391579.aspx/1) excel convert 之类的东西是不可能的，但你最需要的是找出可能的逻辑

# javascript - jquery data() 方法在 IE9 中不起作用

> ID：15404870
> 
> 赞同：2
> 
> 时间：2013-03-14T08:57:53.317
> 
> 标签：javascript, jquery, internet-explorer-9

我有以下链接：

```
<a href="/Packages/PackageActionDownloadAsync" data-ajax-type="Download" data-ajax-packageid="AGI-VS-GAME-M52-1.5.3.2.67" data-ajax-machineid="30" class="iconGear action tip" data-hasqtip="true" oldtitle="Download" title="" aria-describedby="qtip-1">Download</a> 
```

和javascript代码：

```
 var obj = $(this),
            objData = obj.data(),
            packageId = objData.ajaxPackageid,
            operation = objData.ajaxType; 
```

我试过这个：

```
alert(objData.ajaxPackageid);
alert(objData.ajaxPackageId);
alert(objData.AjaxPackageId); 
```

他们都返回“未定义”。唯一有效的是：

```
alert(objData.ajaxType); 
```

到底是怎么回事？我正在使用**“jquery-1.7.1.js”**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T09:00:49.070

我很惊讶他们中的**任何**一个都可以像这样访问它们。您需要通过 jQuery 中的字符串名称来访问它们。像这样：

```
var obj = $(this);
alert(obj.data("ajax-packageid"));
alert(obj.data("ajax-type"));
alert(obj.data("ajax-machineid")); 
```

看一下**jquery[`.data`](http://api.jquery.com/jQuery.data/)对象**

**演示：http:** [//jsfiddle.net/xFmn3/](http://jsfiddle.net/xFmn3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:00:24.400

您需要将要接收的数据的密钥传递给`data()`函数。

```
 var obj = $(this),
   packageId = obj.data("ajax-packageid"),
   operation = obj.data("ajax-type"); 
```

**工作示例：http:** [//jsfiddle.net/sUSCe/](http://jsfiddle.net/sUSCe/)

# wordpress - 在添加/编辑 wordpress 类别时添加自定义字段

> ID：15404873
> 
> 赞同：1
> 
> 时间：2013-03-14T08:57:57.643
> 
> 标签：wordpress

我正在使用**WP-3.5.1**，想知道如何在添加/编辑类别时添加更多自定义字段（图像、单选、复选框、下拉菜单）？

我找到了[http://en.bainternet.info/2011/wordpress-category-extra-fields](http://en.bainternet.info/2011/wordpress-category-extra-fields)但这里首先作者没有提到

> 在哪里添加他的代码？
> 
> 此代码适用于哪个版本的 wp？
> 
> 如果我们升级到最新版本有什么影响？
> 
> 什么必须传入`extra_category_fields( $tag )`？

所以我从**wp-admin/edit-tags.php 开始并在定义****Slug**字段的位置之后粘贴他的代码，但卡在**$tag**应该在这里传递什么？

是否有任何插件可以在类别中添加自定义字段，例如用于帖子的**更多字段？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:25:51.773

首先，该页面中有一个很大的红色警告：
[![在此处输入图像描述](../Images/fc41578ede0673e5c627ae407ffbfe42.png)](http://en.bainternet.info/2012/wordpress-taxonomies-extra-fields-the-easy-way)

所以，很明显，你最好使用新版本。

其次，您不应该**修改**核心文件 ( `/wp-admin/edit-tags.php`)。以下问答说明了您应该在 WordPress 网站中的
[**何处放置代码增强功能：将我的代码放置在何处：plugin 或 functions.php？**](https://wordpress.stackexchange.com/q/73031/12615)

*[使用以下说明](http://codex.wordpress.org/Updating_WordPress#Manual_Update)**将您的核心文件恢复到其原始状态*。

尝试始终使用*最新版本*的 WordPress、主题和插件，因为在您的网站中包含旧代码可能会对安全/性能产生严重影响。

新版本的*Taxonomy Extra Fields*在其文档中有更多示例，因此您的配置疑虑可能会改变。

综上所述，插件[高级自定义字段](http://wordpress.org/extend/plugins/advanced-custom-fields/)能够非常轻松地将额外字段放入分类（类别、标签、自定义分类）中，无需编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:20:29.200

好的：

要在添加/编辑类别时添加图像文件，请使用此插件，这是一个很棒的插件。 [http://wordpress.org/extend/plugins/categories-images/](http://wordpress.org/extend/plugins/categories-images/)

# java - 移除在 JPanel 中添加的组件

> ID：15404874
> 
> 赞同：0
> 
> 时间：2013-03-14T08:58:01.313
> 
> 标签：java, swing, components, cardlayout, removeall

我有具有此 JPanel 的卡片布局：

卡片布局：

1.  面板条目
2.  面板记录

在 panelRecord 中，我添加了分量视频捕获。此代码是添加视频捕获组件：

```
panelRecord.add(BorderLayout.CENTER, graph.asComponent()); 
```

`graph.asComponent()`是来自 DSJ（Direct Show JavaWrapper）的组件，我现在不知道该组件的类型。

当我回到 panelEntry 布局时（因为我使用卡片布局），panelEntry 中的所有功能都很慢。我想，因为它仍然有 panelRecord 视频捕获活动。我想早先删除 panelRecord 中的组件。如何？

请帮忙，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:37:39.060

Container 具有移除组件的方法

```
public void remove(Component comp) 
```

> 从此容器中移除指定的组件。该方法还通过该方法通知布局管理器从该容器的布局中移除组件`removeLayoutComponent`。

为要移除的组件创建一个变量

```
compToRemove = graph.asComponent() 
```

添加它

```
panelRecord.add(BorderLayout.CENTER, graph.asComponent()); 
```

喜欢的时候去掉

```
panelRecord.remove(compToRemove); 
```

您需要在每一步更新图形

# java - ExecutorService.submit( ) 花费更多时间？

> ID：15404875
> 
> 赞同：7
> 
> 时间：2013-03-14T08:58:12.977
> 
> 标签：java, concurrency, java.util.concurrent

我试图了解`java.util.concurrent`包中的实用程序，并了解到我们可以在方法内成功完成任务后将`callable`对象提交给`ExecutorService`返回`Future`，其中填充了由返回的值。`callable``call()`

我了解所有可调用对象都是使用多个线程同时执行的。

当我想看看批处理任务执行有多少改进`ExecutorService`时，我想到了捕捉时间。

以下是我尝试执行的代码 -

```
package concurrency;

import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.Callable;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Future;

public class ExecutorExample {

    private static Callable<String> callable = new Callable<String>() {

        @Override
        public String call() throws Exception {
            StringBuilder builder = new StringBuilder();
            for(int i=0; i<5; i++) {
                builder.append(i);
            }
            return builder.toString();
        }
    };

    public static void main(String [] args) {
        long start = System.currentTimeMillis();
        ExecutorService service = Executors.newFixedThreadPool(5);
        List<Future<String>> futures = new ArrayList<Future<String>>();
        for(int i=0; i<5; i++) {
            Future<String> value = service.submit(callable);
            futures.add(value);
        }
        for(Future<String> f : futures) {
            try {
                System.out.println(f.isDone() + " " + f.get());
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ExecutionException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        long end  = System.currentTimeMillis();
        System.out.println("Executer callable time - " + (end - start));
        service.shutdown();

        start = System.currentTimeMillis();
        for(int i=0; i<5; i++) {
            StringBuilder builder = new StringBuilder();
            for(int j=0; j<5; j++) {
                builder.append(j);
            }
            System.out.println(builder.toString());
        }
        end = System.currentTimeMillis();
        System.out.println("Normal time - " + (end - start));
    }

} 
```

这是这个的输出 -

```
true 01234
true 01234
true 01234
true 01234
true 01234
Executer callable time - 5
01234
01234
01234
01234
01234
Normal time - 0 
```

如果我遗漏了什么或以错误的方式理解某些东西，请告诉我。

在此先感谢您抽出宝贵时间和对此线程的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T09:01:46.520

如果您在 Callable 中的任务很小，则由于任务切换和初始化开销，您将无法从并发中受益。尝试在可调用中添加更重的循环，比如 1000000 次迭代，你可以看到差异

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:12:21.593

当您第一次运行任何代码时，特别是需要时间。如果您将任务传递给另一个线程，则可能需要 1-10 微秒，如果您的任务花费的时间少于此时间，则开销可能大于收益。即，如果您的开销足够高，则使用多个线程可能比使用单个线程慢得多。

我建议你

*   将任务的成本增加到 1000 次迭代。
*   确保在单线程示例中不丢弃结果
*   运行这两个测试至少几秒钟以确保代码已经预热。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T11:21:22.190

不是答案（但我不确定代码是否适合评论）。为了扩展 Peter 所说的内容，通常有一个最佳工作点（以执行时间衡量），以平衡池/队列开销与工作人员之间的公平工作分配。该代码示例有助于找到该最佳位置的估计值。在您的目标硬件上运行。

```
import java.util.concurrent.*;
import java.util.concurrent.atomic.*;

public class FibonacciFork extends RecursiveTask<Long> {

private static final long serialVersionUID = 1L;

public FibonacciFork( long n) {
    super();
    this.n = n;
}

static ForkJoinPool fjp = new ForkJoinPool( Runtime.getRuntime().availableProcessors());

static long fibonacci0( long n) {
    if ( n < 2) {
        return n;
    }
    return fibonacci0( n - 1) + fibonacci0( n - 2);
}

static int  rekLimit = 8;

private static long stealCount;

long    n;

private long forkCount;

private static AtomicLong forks = new AtomicLong( 0);

public static void main( String[] args) {

    int n = 45;
    long    times[] = getSingleThreadNanos( n);
    System.out.println( "Single Thread Times complete");
    for ( int r = 2;  r <= n;  r++) {
        runWithRecursionLimit( r, n, times[ r]);
    }
}

private static long[] getSingleThreadNanos( int n) {
    final long times[] = new long[ n + 1];
    ExecutorService es = Executors.newFixedThreadPool( Math.max( 1, Runtime.getRuntime().availableProcessors() / 2));
    for ( int i = 2;  i <= n;  i++) {
        final int arg = i;
        Runnable runner = new Runnable() {
            @Override
            public void run() {
                long    start = System.nanoTime();
                final int minRuntime = 1000000000;
                long    runUntil = start + minRuntime;
                long    result = fibonacci0( arg);
                long    end = System.nanoTime();
                int         ntimes = Math.max( 1, ( int) ( minRuntime / ( end - start)));
                if ( ntimes > 1) {
                    start = System.nanoTime();
                    for ( int i = 0;  i < ntimes;  i++) {
                        result = fibonacci0( arg);
                    }
                    end = System.nanoTime();
                }
                times[ arg] = ( end - start) / ntimes;
            }
        };
        es.execute( runner);
    }
    es.shutdown();
    try {
        es.awaitTermination( 1, TimeUnit.HOURS);
    } catch ( InterruptedException e) {
        System.out.println( "Single Timeout");
    }
    return times;
}

private static void runWithRecursionLimit( int r, int arg, long singleThreadNanos) {
    rekLimit = r;
    long    start = System.currentTimeMillis();
    long    result = fibonacci( arg);
    long    end = System.currentTimeMillis();
    // Steals zählen
    long    currentSteals = fjp.getStealCount();
    long    newSteals = currentSteals - stealCount;
    stealCount = currentSteals;
    long    forksCount = forks.getAndSet( 0);
    System.out.println( "Fib(" + arg + ")=" + result + " in " + ( end-start) + "ms, recursion limit: " + r +
            " at " + ( singleThreadNanos / 1e6) + "ms, steals: " + newSteals + " forks " + forksCount);
}

static long fibonacci( final long arg) {
    FibonacciFork   task = new FibonacciFork( arg);
    long result = fjp.invoke( task);
    forks.set( task.forkCount);
    return result;
}

@Override
protected Long compute() {
    if ( n <= rekLimit) {
        return fibonacci0( n);
    }
    FibonacciFork   ff1 = new FibonacciFork( n-1);
    FibonacciFork   ff2 = new FibonacciFork( n-2);
    ff1.fork();
    long    r2 = ff2.compute();
    long    r1 = ff1.join();
    forkCount = ff2.forkCount + ff1.forkCount + 1;
    return r1 + r2;
}
} 
```

# javascript - 获取对现有浏览器窗口的引用

> ID：15404877
> 
> 赞同：1
> 
> 时间：2013-03-14T08:58:21.897
> 
> 标签：javascript, browser

我 99% 确定我的问题的答案是否定的，但以防万一……

用例：

1.  网页 A 使用 JavaScript（同域）打开一个新窗口 B
2.  用户刷新 A 或导航离开然后返回
3.  用户单击页面 A 中的链接，该链接应关闭 B

只要用户不刷新并离开 A（步骤 2），就可以通过保持窗口引用来正常工作。

返回 A 时，是否有任何（异国情调或没有）方法来重新获得对先前打开的窗口的引用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T09:00:55.163

是的

```
function openWin() {
  w = window.open("","windowname"); // use the window name you gave it when you opened it
  if (w && !w.closed) ...
} 
```

# android - 将 XML 高效地附加到 Android 中经常更新的大型 XML 文件中

> ID：15404878
> 
> 赞同：0
> 
> 时间：2013-03-14T08:58:26.560
> 
> 标签：android, xml, accelerometer

我正在开发一个 Android 应用程序，它收集加速度计数据，然后将其记录到 XML 文件中以供进一步处理。每次收到新值时，都必须将其附加到此 XML 文件中。请问您建议使用什么来频繁有效地附加到大型 XML 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:20:43.870

我认为这在很大程度上取决于您实际想要更新它的频率。

“每次收到一个新值”几乎都是不断的，因为设备经常不断地移动。在那种情况下，我猜你最好保持一个常量 StringBuilder，并不断地将数据附加到它上面。

如果您想少一点更新它，每隔几分钟左右，最好将您的数据保存到数据库或对象中，并在需要时将其解析为 xml。可能不是最好的性能，但对错误不太敏感。

如果可以的话，我建议您改用 JSON，因为它的开销较小，而且您的文件可能会在几分钟后变得相当大。

# sql - 带条件的 LEFT 外连接

> ID：15404887
> 
> 赞同：1
> 
> 时间：2013-03-14T08:59:23.347
> 
> 标签：sql, postgresql

我有（我认为）SQL 非常简单的问题。我有两个表：Posts(id, body, user_id) 和 Reports(id, user_id, post_id)。

我想显示给定用户的所有帖子，他没有将其标记为已报告。

我建立这样的查询：

```
Select * FROM posts LEFT OUTER JOIN 
reports ON reports.post_id = posts.id WHERE reports.id IS NULL 
```

但是，它需要所有报告，而不仅仅是我的用户添加的报告。当然添加`Where reports.id IS NULL AND reports.user_id = 123`是行不通的……有什么解决方案，或者我应该做子查询吗？

顺便说一句：我认为这不会产生任何影响，但我正在运行 postgres 9.x

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:01:05.757

添加`reports.user_id = 123`到*连接条件*，而不是 where 子句。这将仅加入`reports`具有`user_id = 123`并仅消除那些匹配的行：

```
SELECT *
FROM posts
LEFT OUTER JOIN reports ON reports.post_id = posts.id
    AND reports.user_id = 123
WHERE reports.id IS NULL 
```

或者，使用`WHERE NOT EXISTS`：

```
SELECT *
FROM posts
WHERE NOT EXISTS
(
    SELECT 1
    FROM reports 
    WHERE reports.post_id = posts.id
    AND reports.user_id = 123
) 
```

# javascript - jQuery：检查按钮是否被点击

> ID：15404890
> 
> 赞同：25
> 
> 时间：2013-03-14T08:59:24.293
> 
> 标签：javascript, jquery, html

我在一个表单中有两个按钮，想检查哪个按钮被点击了。使用单选按钮一切正常：

```
if($("input[@name='class']:checked").val() == 'A') 
```

在简单的提交按钮上，一切都崩溃了。

谢谢！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-14T09:04:41.503

```
$('#submit1, #submit2').click(function () {
   if (this.id == 'submit1') {
      alert('Submit 1 clicked');
   }
   else if (this.id == 'submit2') {
      alert('Submit 2 clicked');
   }
}); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-10-17T18:56:02.130

你可以使用这个：

```
$("#id").click(function()
{
   $(this).data('clicked', true);
}); 
```

现在通过 if 语句检查它：

```
if($("#id").data('clicked'))
{
   // code here 
} 
```

有关更多信息，您可以访问[jQuery 网站上的 .data() 函数。](https://api.jquery.com/data/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-14T09:03:03.010

```
jQuery(':button').click(function () {
    if (this.id == 'button1') {
        alert('Button 1 was clicked');
    }
    else if (this.id == 'button2') {
        alert('Button 2 was clicked');
    }
}); 
```

编辑：- 这适用于所有按钮。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-14T12:55:14.813

```
$('input[type="button"]').click(function (e) {
    if (e.target) {
        alert(e.target.id + ' clicked');
    }
}); 
```

你应该稍微调整一下（例如，使用名称而不是 id 来提醒），但是这样你就有了更通用的功能。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-07-22T10:27:32.973

```
$('#btn1, #btn2').click(function() {
    let clickedButton = $(this).attr('id');
    console.log(clickedButton);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T09:15:55.437

尝试类似：

```
var focusout = false;

$("#Button1").click(function () {
    if (focusout == true) {
        focusout = false;
        return;
    }
    else {
        GetInfo();
    }
});

$("#Text1").focusout(function () {
    focusout = true;
    GetInfo();
}); 
```

# events - c++ cli接口事件显式实现

> ID：15404891
> 
> 赞同：4
> 
> 时间：2013-03-14T08:59:29.103
> 
> 标签：events, interface, c++-cli, explicit

我正在尝试将 c# 代码转换为 c++/cli。一切都很顺利，直到我开始将接口事件显式实现翻译成 c++/cli 语法。

假设在 c# 中我有这个接口

```
public interface Interface
{
    public event MyEventHandler Event;
} 
```

它在 Class 中以显式方式实现，因此它不会与其他成员的名称冲突：

```
public interface Class : Interface
{
    event MyEventHandler Interface.Event;

    public event AnotherEventHandler Event;
} 
```

我正在尝试将 Class 转换为 c++/cli，如下所示：

```
public ref class Class : public Interface
{
    virtual event MyEventHandler^ Event2 = Interface::Event
    {
    }

    ...
}; 
```

这不会编译给我“... = Interface::Event”部分的语法错误。有谁知道什么是正确的语法，或者它是否存在于 c++/cli 中？我花了一些时间在互联网上搜索，但没有找到任何有用的东西。

更新：这是演示问题的完整 c++/cli 代码：

```
public delegate void MyEventHandle();
public delegate void AnotherEventHandle();

public interface class Interface
{
    event MyEventHandler^ Event;
};

public ref class Class : public Interface
{
public:
    virtual event MyEventHandler^ Event2 = Interface::Event
    {
        virtual void add(MyEventHandle^) {}
        virtual void remove(MyEventHandle^) {}
    }

    event AnotherEventHandler^ Event;
}; 
```

VC++ 2012 输出的错误是“error C2146: syntax error: missing ';' 在标识符“MyEventHandler”之前”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T10:26:04.890

你必须让它看起来像这样：

```
event MyEventHandler^ Event2 {
    virtual void add(MyEventHandler^ handler) = Interface::Event::add {
        backingDelegate += handler;
    }
    virtual void remove(MyEventHandler^ handler) = Interface::Event::remove {
        backingDelegate -= handler;
    }
}; 
```

# java - 用GridView查看thums图片，滚动很慢

> ID：15404892
> 
> 赞同：0
> 
> 时间：2013-03-14T08:59:37.103
> 
> 标签：java, android, gridview, scroll

目前我正在接受培训，我正在开发一个在线文件管理应用程序。当我尝试使用拇指显示许多图像（100 个图像或 200 个）时，滚动出现问题 GridView 滚动非常长。

我从我为小图像设置的可绘制和布局参数的服务器下载图像，这是我的代码：

```
public void openImageWithCache(boolean loopTry, final ImageView iconView,
        final LayoutParams layoutParams, final View v, final Node o) {
    //if (v.getTag() == previewT){
    try {
        String prefix = (true ? "thumb_mini" : "");

        File cacheFile = new File(AjaXplorerApplication.getCacheFolder(),
                (prefix) + previewT.getUuidPath());
        if (cacheFile.exists()) {

            iconView.setImageDrawable(Drawable.createFromPath(cacheFile
                .getPath()));
            iconView.setLayoutParams(layoutParams);
            //iconView.invalidate();
            //loopTry = true;
            return;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:50:54.143

1.  拇指图像大吗？如果是这样，请将它们最小化到您可以的最小尺寸。

2.  在adapter的getView方法中，如果view不为null就不要调用“new”，只要根据位置改变图片即可。

# ruby-on-rails-3 - 设计如何重定向以编辑密码

> ID：15404899
> 
> 赞同：1
> 
> 时间：2013-03-14T08:59:56.150
> 
> 标签：ruby-on-rails-3

我正在为我的 rails 项目使用 Devise。如果密码早 6 个月，我想将用户重定向到密码重置屏幕。如何重定向到设计edit_user_password_path？

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:22:47.993

您可以尝试具有模块的[phatworx / devise_security_extension](https://github.com/phatworx/devise_security_extension)`password_expirable` ，在您的模型中定义它并阅读有关选项的文档。

或者[，这个答案](https://stackoverflow.com/questions/7649560/rails-expire-password-within-24-hours)可能会有所帮助！

# html - 可滚动的 div 移动 IE10 和 -ms-viewport

> ID：15404902
> 
> 赞同：2
> 
> 时间：2013-03-14T08:59:59.080
> 
> 标签：html, css, mobile, windows-phone-8, internet-explorer-10

当使用`-ms-viewport`in `CSS`then `scrollabe div`(overflow scrollable) 时不能再滚动了。问题仅发生在 Windows 8 手机中。平板电脑好像没问题。

有人知道这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-09T03:56:29.470

将宽度设置为 auto（如下所示）而不是 device-width 似乎可以解决滚动问题。

```
@-ms-viewport {
    width: auto;
} 
```

# android - 如何检查音频文件是否在android中播放完毕

> ID：15404903
> 
> 赞同：0
> 
> 时间：2013-03-14T09:00:01.117
> 
> 标签：android, audio-recording

我正在为安卓开发一个录音应用程序。我面临的问题是我想知道正在播放的声音文件何时结束，我不知道如何检查。有`setOnCompleteListener`MediaRecorder 类，但我正在使用 AudioRecorder 类，因为我也需要在录制时进行一些编辑，比如改变扬声器的频率和音高。以下是我的代码：

```
public class MainActivity extends Activity {

Integer[] freqset = {8000};
 private ArrayAdapter<Integer> adapter;

 Spinner spFrequency;
 Button startRec, stopRec, playBack;

 Boolean recording;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        startRec = (Button)findViewById(R.id.startrec);
        stopRec = (Button)findViewById(R.id.stoprec);
        playBack = (Button)findViewById(R.id.playback);

        startRec.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                   Thread recordThread = new Thread(new Runnable(){

                        @Override
                        public void run() {
                         recording = true;
                         startRecord();
                        }

                       });

                       recordThread.start();

            }
        });
        stopRec.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                recording = false;

            }
        });
        playBack.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                  Log.i("Test","Play Record called");playRecord();

            }
        });

        spFrequency = (Spinner)findViewById(R.id.frequency);
        adapter = new ArrayAdapter<Integer>(this, android.R.layout.simple_spinner_item, freqset);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spFrequency.setAdapter(adapter);

    }

 private void startRecord(){

  File file = new File(Environment.getExternalStorageDirectory(), "test.pcm"); 
  int BytesPerElement = 2;
  int sampleFreq = (Integer)spFrequency.getSelectedItem();
    Log.e("Test","Start Recording"+sampleFreq);
  try {
   file.createNewFile();

   OutputStream outputStream = new FileOutputStream(file);
   BufferedOutputStream bufferedOutputStream = new BufferedOutputStream(outputStream);
   DataOutputStream dataOutputStream = new DataOutputStream(bufferedOutputStream);

   int minBufferSize = AudioRecord.getMinBufferSize(sampleFreq, 
     AudioFormat.CHANNEL_IN_MONO, 
     AudioFormat.ENCODING_PCM_16BIT);
   Log.i("Test","Buffer Size is"+minBufferSize);

   short[] audioData = new short[minBufferSize];
   Log.i("Test","audioData initialized"+audioData);
   AudioRecord audioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC,
     sampleFreq,
     AudioFormat.CHANNEL_IN_MONO,
     AudioFormat.ENCODING_PCM_16BIT,
     minBufferSize*BytesPerElement);
   Log.i("Test","audioRecord initialized"+audioRecord);

   audioRecord.startRecording();

   while(recording){
    int numberOfShort = audioRecord.read(audioData, 0, minBufferSize);
    for(int i = 0; i < numberOfShort; i++){
     dataOutputStream.writeShort(audioData[i]);
       Log.i("Test","Recording buzzz"+recording);

    }
   }
   Log.i("Test","Recording Value after stop"+recording);

   audioRecord.stop();
   dataOutputStream.close();

  } catch (IOException e) {
   e.printStackTrace();
   Log.e("Testing", "Esception Found");
  }

 }

 void playRecord(){

  File file = new File(Environment.getExternalStorageDirectory(), "test.pcm");

        int shortSizeInBytes = Short.SIZE/Byte.SIZE;

  int bufferSizeInBytes = (int)(file.length()/shortSizeInBytes);
  short[] audioData = new short[bufferSizeInBytes];

  try {
   InputStream inputStream = new FileInputStream(file);
   BufferedInputStream bufferedInputStream = new BufferedInputStream(inputStream);
   DataInputStream dataInputStream = new DataInputStream(bufferedInputStream);

   int i = 0;
   while(dataInputStream.available() > 0){
    audioData[i] = dataInputStream.readShort();
    i++;
   }

   dataInputStream.close();

   int sampleFreq = (Integer)spFrequency.getSelectedItem();
      Log.i("Test","Sab set hai");

   AudioTrack audioTrack = new AudioTrack(
     AudioManager.STREAM_MUSIC,
     sampleFreq,
     AudioFormat.CHANNEL_CONFIGURATION_MONO,
     AudioFormat.ENCODING_PCM_16BIT,
     bufferSizeInBytes,
     AudioTrack.MODE_STREAM);
   Log.i("Test","will start play");
   audioTrack.play();
   audioTrack.write(audioData, 0, bufferSizeInBytes);

   Log.i("Test","does this print");
  } catch (FileNotFoundException e) {
      Log.i("Test","Ye wali exception");
   e.printStackTrace();
  } catch (IOException e) {
      Log.i("Test"," Ni Ye wali exception");          
   e.printStackTrace();
  }
 }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:21:38.033

您可以使用[AudioTrack.OnPlaybackPositionUpdateListener](http://developer.android.com/reference/android/media/AudioTrack.OnPlaybackPositionUpdateListener.html)和[AudioTrack.setNotificationMarkerPosition](http://developer.android.com/reference/android/media/AudioTrack.html#setNotificationMarkerPosition%28int%29)来确定音频播放是否完成：

```
AudioTrack audioTrack = new AudioTrack(
     AudioManager.STREAM_MUSIC,
     sampleFreq,
     AudioFormat.CHANNEL_CONFIGURATION_MONO,
     AudioFormat.ENCODING_PCM_16BIT,
     bufferSizeInBytes,
     AudioTrack.MODE_STREAM);

// set setNotificationMarkerPosition accouding audio length
 audioTrack.setNotificationMarkerPosition(bufferSizeInBytes);

// now add OnPlaybackPositionUpdateListener to audioTrack 
    audioTrack.setPlaybackPositionUpdateListener(
                             new AudioTrack.OnPlaybackPositionUpdateListener() {
        @Override
        public void onMarkerReached(AudioTrack track) {
            // do your work here....
        }
    }); 
```

# php - 选择框仅在 php 的下拉菜单中显示最后一条记录

> ID：15404912
> 
> 赞同：0
> 
> 时间：2013-03-14T09:00:33.933
> 
> 标签：php, forms

我有一个下拉框，它只显示数据库中的最后一条记录我的表中有多个记录。我希望它显示所有记录。该脚本在一个函数中。

```
function appear(){
include('includes/x.php');
include('includes/y.php');
 global $database;
 $database = new MySQLDatabase();
 $sql="SELECT * FROM tbltype";
 $result_set=$database->query($sql);
    while($row=$database->fetch_array($result_set)){
                        $type=$row['type'];                         

$place= "Please enter type: "." ".'<select name="type" id="type"><option value="-1">Select a province</option><option value="none">None</option>'.'<option value='.$type.'>'.$type.'</option>'.'<br></select>'."<input type=\"submit\" name=\"Add\" value=\"Add\" style=\"border:dotted;\"/>";}   
return $place;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:08:20.433

```
function appear() {
        include('includes/x.php');
        include('includes/y.php');
        global $database;
        $database = new MySQLDatabase();
        $sql = "SELECT * FROM tbltype";
        $result_set = $database->query($sql);
        $place = "";
        $place.= 'Please enter type:<select name="type" id="type"><option value="-1">Select a province</option>';
        while ($row = $database->fetch_array($result_set)) {
            $type = $row['type'];
            $place.='<option value="none">None</option>' . '<option value=' . $type . '>' . $type . '</option>';
        }
        $place.='</select><input type=\"submit\" name=\"Add\" value=\"Add\" style=\"border:dotted;\"/>';
        return $place;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:04:34.373

像这样试试

```
while($row=$database->fetch_array($result_set)){
                    $type=$row['type'];
                    $option .="<option value='".$type."'>".$type."</option>";
}
$place= "Please enter type: "." ".'
<select name="type" id="type">
   <option value="-1">Select a province</option>
   <option value="none">None</option>'.
   $option.'</select>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:06:11.517

从我可以从你的代码中收集到，问题是你的下拉声明在你的 while 函数中，你应该做的是声明你的

```
<select> 
```

在你的时间之外标记，然后离开

```
'<option value='.$type.'>'.$type.'</option>' 
```

阻止你的时间并关闭你的

```
 </select> 
```

在您的 while 函数之外，这样它将使用正确的值填充您的下拉列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T09:06:40.863

您没有正确连接。尝试这个，

```
$place = 'Please enter type: <select name="type" id="type"><option value="-1">Select a province</option><option value="none">None</option>';

while($row=$database->fetch_array($result_set)){
       $type=$row['type'];                         

       $place .= "<option value='".$type."'>".$type."</option>";
 }   
 $place .= "<br></select><input type=\"submit\" name=\"Add\" value=\"Add\" style=\"border:dotted;\"/>";

return $place; 
```

# sqlite - 用于 ARM 的 Sqlite 3.7.15 交叉编译

> ID：15404914
> 
> 赞同：1
> 
> 时间：2013-03-14T09:00:36.967
> 
> 标签：sqlite, arm, embedded-resource, embedded-linux, embedded-database

我在基于 ARM9 的微处理器中使用 SQLite 3 进行数据库管理。

我想在 Linux (Ubuntu 10.04) 中为我的项目交叉编译最新版本的 SQLite 3。我正在使用`arm-none-linux-gnueabi-gcc compiler`进行开发。

我尝试使用以下命令进行交叉编译，

下载了`sqlite-amalgamation-3.7.0.tar` 我解压然后在终端上写下面的命令，

```
sudo ./configure --exec-prefix=/media/8CCC8E9BCC8E7F68/SQLIte3/sqliteinstall/  --host=arm --target=arm CC=/opt/arm-2011.03/bin/arm-none-linux-gnueabi-gcc AR=/opt/arm-2011.03/bin/arm-none-linux-gnueabi-ar STRIP=/opt/arm-2011.03/bin/arm-none-linux-gnueabi-strip RANLIB=/opt/arm-2011.03/bin/arm-none-linux-gnueabi-ranlib CFLAGS="-Os" 
```

它成功地交叉编译了 SQLite。

然后，

`sudo make`命令。

它成功运行。

现在“make install”命令。

它没有给我一个错误，但是当我转到 config.log 文件时，我发现有一些句子如下，

1.conftest.c:17:7：错误：数组“off_t_is_large”的大小为负 2.conftest.c:12:28：致命错误：ac_nonexistent.h：没有此类文件或目录编译终止。3.conftest.cpp:23:28：错误：ac_nonexistent.h：没有这样的文件或目录 4.conftest.c:67:13：错误：一元'*'的无效类型参数（有'int'）

我怀疑天气是否已正确交叉编译。我无法理解。

我将库插入到我的板上，它工作正常，但问题是速度变得非常慢。我认为有一些问题是我没有为 GCC 编译器设置任何标志。

我找不到任何选项。如何为 GCC 编译器设置特定标志，以便省略不必要的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:26:49.993

您可能不应该尝试手动进行交叉编译。相反，请使用嵌入式 Linux 构建系统来为您完成这项工作，并完全自动化交叉编译过程。我最喜欢的当然是 Buildroot ( [http://buildroot.org](http://buildroot.org) )，但还有很多其他的（质量、复杂性和功能级别不同）：OpenEmbedded、Yocto、PTXdist 等。

# android - 水平列表视图背景

> ID：15404915
> 
> 赞同：2
> 
> 时间：2013-03-14T09:00:40.457
> 
> 标签：android, background, horizontallist

我在使用自定义水平列表视图的小型应用程序中遇到问题，我已按照以下链接创建水平列表视图。

而xml布局是这样的..

```
 <com.example.HorizontalListView
      android:id="@+id/listview"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content" 
      android:layout_gravity="center_horizontal"
      android:background="@android:color/transparent"
      android:cacheColorHint="@android:color/transparent"
      android:divider="@color/Black"
       >
  </com.example.HorizontalListView> 
```

但问题是，**我无法更改水平列表视图的背景**，任何人都可以帮助我..@提前谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:42:59.310

我有一个解决方案。我也在玩Horizo​​ntalListView。首先，您需要在 的`<LinearLayout>`标签中添加这一行`viewitem.xml`：

```
android:background="@android:color/transparent" 
```

然后在`listviewdemo.xml`：

```
<com.devsmart.android.ui.HorizontalListView
    android:id="@+id/listview"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/background_you_want"
/> 
```

如果您正确执行此操作，您将看到通过 Horizo​​ntalListView 显示的背景。背景横跨整个屏幕，这是有道理的，因为 Horizo​​ntalListView 也横跨整个屏幕。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:06:17.027

尝试*动态更改背景。*

请单击[此处](http://developer.android.com/reference/android/view/View.html#setBackgroundResource%28int%29)`View`获取Android 开发者参考页面的 API 。请记住，以下三种方法可用于为`View`对象添加背景：

```
public void setBackground (Drawable background);
public void setBackgroundColor (int color);
public void setBackgroundResource (int resid); 
```

**创建：**

```
@Override  
protected void onCreate(Bundle savedInstanceState) {  
    super.onCreate(savedInstanceState);  

    setContentView(R.layout.listviewdemo);  

    HorizontialListView listview = (HorizontialListView) findViewById(R.id.listview);  
    listview.setAdapter(mAdapter);  

} 
```

**基础适配器：**

```
private BaseAdapter mAdapter = new BaseAdapter() {  

    @Override  
    public View getView(int position, View convertView, ViewGroup parent) {  
        View retval = LayoutInflater.from(parent.getContext()).inflate(R.layout.viewitem, null);  
        retval.setBackgroundResource(R.id.my_background); // add this line

        return retval;  
    }  

}; 
```

# visual-c++ - 构建错误 MSB3073：

> ID：15404922
> 
> 赞同：1
> 
> 时间：2013-03-14T09:01:09.340
> 
> 标签：visual-c++

我在 VS2010 中有一个 MFC 应用程序。它还包含很少的 C# 项目。在 SVN 构建期间，我们收到此错误：

```
C:\Program Files\MSBuild\Microsoft.Cpp\v4.0\Microsoft.MakeFile.Targets(43,5): 
error MSB3073: The command "iscmdbld -p ..\..\..\testinstall.ism -r setup -o
..\..\thirdparty\installshield\mergemodules" exited with code 1. 
```

我们正在使用 installshield 2010 来创建设置。我们在 VS2005 中也有相同的应用程序，但没有出现上述错误。请指教。

# mfc - 在 mfc 中创建自定义对话框

> ID：15404923
> 
> 赞同：0
> 
> 时间：2013-03-14T09:01:16.873
> 
> 标签：mfc, customdialog

我需要在 mfc 中创建一个自定义对话框，它的外观与通常的 MFC 对话框不同。例如颜色应该是蓝色、样式等。这可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:09:28.200

我用谷歌搜索了背景颜色：
见 [这里](http://www.programmersheaven.com/mb/mfc_coding/189499/189499/how-to-change-dialog-background-color-/)

```
//CMyDlg.h
//Add a CBrush object

class CMyDlg : public CDialog
{
// Construction
    public:
    CTest2Dlg(CWnd* pParent = NULL);    // standard constructor
    CBrush  m_brush;
// Dialog Data

//initialize the brush with the desired color in the OnInitDialog() methodl  

BOOL CMyDlg::OnInitDialog()
{   
    m_brush.CreateSolidBrush(RGB(255,0,0));
    CDialog::OnInitDialog();

}

//Return the brush like this:

HBRUSH CMyDlg::OnCtlColor(CDC* pDC, CWnd* pWnd, UINT nCtlColor) 
{
//  HBRUSH hbr = CDialog::OnCtlColor(pDC, pWnd, nCtlColor);

// TODO: Return a different brush if the default is not desired
    return m_brush;
}' 
```

# database-design - 数据库设计：包含多个字段的表单

> ID：15404925
> 
> 赞同：0
> 
> 时间：2013-03-14T09:01:20.223
> 
> 标签：database-design

**我想知道在命名字段**方面是否有任何建议/最佳实践，这些字段将存储大约 20-30 个字段的表单值。

形式可能不经常改变（可能在 4-8 年或更短的时间内）。

小组中的大多数人似乎认为 Box001,Box002,..,Box030 是需要采用的解决方案。

我强烈认为字段的名称需要在语义上描述“框”所代表的内容。主要有两个原因：在删除/添加的情况下进行帧移位，并且更容易参考这些字段。

我们放弃了序列化表单字段的选项，主要是因为将来可能会在数据上生成报告。

鉴于我在我的小组中面临相对多数：

1.  是否有存储此类数据的最佳实践？
2.  是否有任何令人信服的论点，还是我的立场完全错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:07:32.560

如果这个结构是相当静态的，所以变化不大，我几乎看不出你为什么要让它通用。我个人赞成正确命名您的列，显示意图（如您所说的描述性），但也要正确输入和限制它。它还将避免您的数据变得不一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:20:02.923

在设计数据库时，我确实和你有同样的感觉，表名和字段应该在语义上是描述性的。

但是，如果需要前端随时间变化，即使您将字段命名为 Box001、Box002，这在迭代次数后会更加混乱，特别是如果开发人员是新人。

值得考虑创建一个将前端映射到后端的中间表。

例如，假设您有一个名为“地址”的文本框，并且您的数据库中有一个名为 Street Name 的字段。所以你创建了一个将地址映射到街道名称的表，所以将来“地址”突然变成“地址线 1”，你只需要更新地图。这样，您可以维护 db 字段的描述性。

# c# - 在弹出页面中添加一些数据后如何加载网格（在主页中）

> ID：15404926
> 
> 赞同：0
> 
> 时间：2013-03-14T09:01:21.950
> 
> 标签：c#, asp.net, gridview

考虑我有一个带有添加按钮和网格的页面。Grid 包含一些数据。如果我单击添加按钮，新的弹出窗口将打开。弹出窗口包含用于将新值添加到网格的文本框和按钮。我的问题是，如何在弹出窗口中添加一些值后自动加载网格视图？

弹窗代码：

```
protected void btnAdd_Click(object sender, EventArgs e)
{
  ClientScript.RegisterStartupScript(this.GetType(), "newWindow", String.Format("<script>window.open('{0}','','width=550,height=300,left=500');</script>", "PopupADD.aspx"));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:33:19.420

按着这些次序..

```
1.Design a window to add data to gridview inside a div.
2.Show the div as popup using Javascript.
3.Bind the gridview when you click some button(like ok) in that popup window. 
```

# php - 检查/ 使用 php 获取会话名称

> ID：15404931
> 
> 赞同：0
> 
> 时间：2013-03-14T09:01:43.690
> 
> 标签：php

我有两个域站点（例如：A＆B）和两个数据库，功能站点A是一种付款方式，因此如果客户购买产品，它将直接登录，站点B作为首页（网络接口）仅。我的问题是：当用户同时打开我的网站时，如何从站点 A 获取或检查会话值并在我的界面网站中显示 session_name。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:24:08.413

你面临两个问题：

1.  `session-id`可能存储在 a 上，`cookie`并且浏览器不会将源自域 A 的 cookie 发送到域 B（除非您谈论的是同一个域）。

2.  即使您能够在两个域上都拥有 session-id，为了使数据在 2 个站点之间持久存在，您也需要`storage`配置一个共享会话。

可能的解决方案：

1.  将 URL 作为查询字符串参数传递`session-id`（由于很多原因不推荐，必须在您的`php.ini`.

2.  至于`storage`: 常见的方法是使用 a`database`作为您的会话存储提供程序（因此制作是“共享的”）。

此外，您可能会重新考虑`session`完全使用，如果您只进行基本重定向，也许您可​​以通过常规 GET 或 POST 请求传递数据。

# javascript - Nodejs控制台重载范围问题

> ID：15404937
> 
> 赞同：0
> 
> 时间：2013-03-14T09:02:11.520
> 
> 标签：javascript, node.js, winston

我正在尝试用 Winston 覆盖 Nodejs 中的控制台。

```
for (var z in loggerSettings) {
    console[z] = (function () {
        var i = z + ''
          , _backup = console[z];
        return function () {
            var utfs = arguments.length >= 2 ? util.format.apply(util, arguments) : arguments[0]
              , coldex = 0;
            if (true) logger[i == 'log' ? 'info' : i](utfs);
            if (loggerSettings[i].console){
                if ((coldex = utfs.indexOf(']') + 1) <= MAX_TAG_LENGTH) 
                    _backup(utfs.substring(0, coldex)[i]['inverse'] + utfs.substring(coldex));
                else _backup(utfs);
            }
        }
    })();
} 
```

这里`var z`只是一个基本的console.log、console.info、console.warn 方法。问题是每个匿名函数的 z 都在变化。解决这个问题有点挑战性，但是 z 的范围似乎发生了变化，并且变量 z 在循环的每次迭代中并不完全坚持一个恒定值。Z 不想坚持自己的范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:28:37.167

Javascript 有函数作用域，但没有块作用域，这意味着`z`控制台函数中的每个引用都将使用`z`.

如果您希望 'z' 保持不变，请将其作为参数传递给匿名函数：

```
for (var z in loggerSettings) {
  (function(z) {
    console[z] = (function () {...});
  )(z);
}; 
```

# java - 示例中的静态公共和私有访问

> ID：15404939
> 
> 赞同：0
> 
> 时间：2013-03-14T09:02:13.190
> 
> 标签：java, oop

问题是：

编写包含以下内容的类的定义 `Counter`：

*   一个名为 counter 类型的实例变量  `int` 。

*   `limit`一个名为type  的实例变量  `int`  。

*   一个名为的静态  `int` 变量  `nCounters`，初始化为 0 。

*   构造函数采用两个`int` 参数，将第一个分配给 `counter`，将第二个分配给 `limit`。它还将静态变量加一  `nCounters`。

*   一个名为 的方法  `increment`  。它不带参数或返回值；如果
    实例变量  `counter`小于  `limit`，increment 只是将实例变量加一  `counter`。

*   `decrement`一个不带参数也不返回值的命名方法  ；如果
    `counter`大于零，它只是从 中减去 1 `counter`。

*   一个名为  `getValue`返回实例变量值的  方法`counter`。

*   一个名为  `getNCounters`返回静态变量值的 静态方法
    `nCounters`。

**我的困境**

该代码工作正常，但我想知道以下内容：

**为什么第一个静态私有而第二个是公开的？**

我的代码：

```
public class Counter 
{
    private int counter;
    private int limit;
    private static int nCounters = 0;
    public Counter (int x, int y)
    {
        counter = x;
        limit   = y;
        nCounters++;
    }
    public void increment () 
    {
        if( counter < limit)
        {
            counter++;
        }
    }
    public void decrement () 
    {
        if(counter > 0)
        {
            counter--;
        }
    }
    public int getValue ()
    {
        return counter;
    }
    public static int getNCounters ()
    {
        return nCounters;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:22:36.643

第一个静态变量`nCounters`是私有的，因为你想在你的类中控制它——你不希望任何外部的代码`Counter`来修改它。但是您希望能够在 之外读取它的值`Counter`，因此该`getNCounters()`方法是公开的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:24:50.370

`nCounters`是一个变量，用于计算调用 Class 构造函数的次数。这是`static`因为不是实例变量而是类变量（其值由该类的所有实例共享）。

`nCounter`被私有化以封装它。它只能通过名为 的只读方法在类外部访问`getNCounters`。否则，我可以访问`nCounter`并直接更改它的值，从而导致创建的类的值不再可靠。

您可以阅读有关[封装](http://www.tutorialspoint.com/java/java_encapsulation.htm)和[静态方法和变量](http://www.leepoint.net/notes-java/flow/methods/50static-methods.html)的更多信息，以更好地理解您的代码。

# asp.net-mvc - 捆绑工作但从 Asp.Net MVC 3 迁移到 MVC 4 后缩小不起作用

> ID：15404942
> 
> 赞同：3
> 
> 时间：2013-03-14T09:02:19.063
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-migration

当我**从 Asp.Net MVC 3 迁移到 MVC 4时，Asp.Net MVC 4 除了****缩小**之外一切正常。

**问题**

我的捆绑工作但**缩小****不起作用**。

**捆绑代码**

```
public static void RegisterBundles(BundleCollection bundles)
        {
            bundles.Add(
                new Bundle("~/Bundles/Entity").Include(
                "~/Scripts/Module/*.js"));
        } 
```

并呈现如下所示的脚本标签：（这是真的，很好！）

例如

```
 <script src="/Bundles/Entity?v=rXIO788liM9pg6AVW5wS7Fxv9LboBMZ5O4ajQRLgk7Y1"></script> 
```

如果您看到上面的代码，它会生成捆绑脚本引用，这意味着捆绑工作正常，但是当我点击查看内容时，JS 内容没有被缩小，这意味着缩小不起作用。

有人请让我知道问题出在哪里或应该如何解决？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:21:48.297

请首先确保您已添加如下脚本

```
bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
 "~/Scripts/jquery-1.7.1.min.js",
 "~/Scripts/jquery.validate.min.js",
 "~/Scripts/jquery.validate.unobtrusive.min.js")); 
```

并确保在 BundleConfig 类中定义了上述包，如下所示：

```
 public class BundleConfig
{
 public static void RegisterBundles(BundleCollection bundles)
 {

bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
 "~/Scripts/jquery-1.7.1.min.js",
 "~/Scripts/jquery.validate.min.js",
 "~/Scripts/jquery.validate.unobtrusive.min.js"));
 }
} 
```

“*”通配符用于组合位于同一目录下且具有相同前缀或后缀名称的文件。假设您要添加所有存在于“~/Script”目录中的脚本文件并以“jquery”为前缀，那么您可以创建如下包：

```
bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include("~/Scripts/jquery*.js")); 
```

所有包都在您的 Web 应用程序的 Global.asax 文件的 Application_Start 事件中注册。

```
protected void Application_Start()
{
 BundleConfig.RegisterBundles(BundleTable.Bundles);
 // code
} 
```

# c - WC 没有执行任何操作

> ID：15404948
> 
> 赞同：0
> 
> 时间：2013-03-14T09:02:45.417
> 
> 标签：c, fork

谁能告诉我这有什么问题？我仍然是分叉的新手。计算机执行第一个和第二个，但第三个是 wc 不起作用。非常需要帮助。终端返回多个子进程完成但没有 wc。

```
pid_t son;
int i;

for (i=0; i<=3; i++){
        switch (i){
            case 0:
            son = fork();
                if (son<0){
                    fprintf(stderr, "Fork failed!");
                    //exit(-1);
                }else if (son == 0){
                    execlp("/bin/cat", "cat", "wctrial.txt", NULL);
                    exit(0);
                }else{
                wait(NULL);
                printf("Child process completed!");

                }
            case 1:
            son = fork();
                if (son<0){
                    fprintf(stderr, "Fork failed!");
                    //exit(-1);
                }else if (son == 0){
                    execlp("/bin/mkdir", "mkdir", "mydirectory", NULL);
                    exit(0);
                }else{
                wait(NULL);
                printf("Child process completed!");
                }
            case 2:
            son = fork();
                if (son<0){
                    fprintf(stderr, "Fork failed!");
                    //exit(-1);
                }else if (son == 0){
                    printf("Work!");
                    execlp("usr/bin/wc","wc","-w","wctrial.txt", NULL);
                    exit(0);
                }else{
                wait(NULL);
                printf("Work!");
                printf("Child process completed!");
                exit(0);
                }
        }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-06T12:30:02.557

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

您忘记了路径中的前导斜杠。——约阿希姆·皮勒伯格

“usr/bin/wc”应该是“/usr/bin/wc”——Basile Starynkevitch

# vb.net - 反馈表产生错误

> ID：15404949
> 
> 赞同：1
> 
> 时间：2013-03-14T09:02:50.303
> 
> 标签：vb.net, email, feedback

我正在尝试制作反馈表，但以前从未这样做过。我找到了一个在 VB 中解释它的教程，但即使代码对他有用，它似乎对我不起作用。失败后，我又尝试了另一个教程，但仍然不行！但由于第一个看起来更简单，我决定再试一次。有人可以通过向我解释我做错了什么来帮助我吗？

我有 4 个文本框`Name`, `Email`,`Telephone`和`Comments`

错误似乎是由

```
Dim message As MailMessage = New MailMessage(from, "jaun@bulldogbroadband.co.za", "feedback", body) 
```

错误：指定的字符串不是电子邮件地址所需的格式。

教程：[[我如何：] 创建“联系我们”页面？](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-contact-us-page)

```
Protected Sub btnSend_Click(sender As Object, e As EventArgs) Handles btnSend.Click
    SendMail(txtName.Text, txtEmail.Text)
    SendMail(txtTel.Text, txtComments.Text)
End Sub
Private Sub SendMail(ByVal from As String, ByVal body As String)
    Dim mailServerName As String = "SMTP.bulldogbroadband.co.za"
    Dim message As MailMessage = New MailMessage(from, "jaun@bulldogbroadband.co.za", "feedback", body)
    Dim mailClient As SmtpClient = New SmtpClient

    mailClient.Host = mailServerName
    mailClient.Send(message)
    message.Dispose()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:51:06.300

我认为它失败了，因为“发件人”地址不是有效的电子邮件地址。此外，您调用 SendMail 两次，第二次使用电话号码和评论作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:35:52.217

修复了它，仍然不明白出了什么问题，因为电子邮件地址是有效的，我不知道我是否可以这样做，但我要粘贴我当前使用的代码，因为它似乎是堆栈溢出有非常严格的规则

```
Imports System.Net.Mail
Imports System.Text
Partial Class ContactUs

Inherits System.Web.UI.Page

Protected Sub btnSend_Click(sender As Object, e As EventArgs) Handles btnSend.Click
    Dim body As String = "From: " + txtName.Text + Environment.NewLine +_
 "Email: " + txtEmail.Text + Environment.NewLine + "Contact Number: " +_
 txtTel.Text + Environment.NewLine + Environment.NewLine + txtComments.Text

    Dim MM As New System.Net.Mail.SmtpClient
    MM.Host = "mail.bulldogbroadband.co.za"
    Dim cred As New System.Net.NetworkCredential("jaun@bulldogbroadband.co.za", "1@2345")
    MM.Credentials = cred
    MM.Send(txtEmail.Text, "jaun@bulldogbroadband.co.za", "feedback form", body)

    Response.Redirect("ThankYou.aspx")

End Sub 
```

结束类

# objective-c - 如果我在一个文件中有多个类，是否有一种工具可以将它们变成单独的文件？

> ID：15404958
> 
> 赞同：1
> 
> 时间：2013-03-14T09:03:03.307
> 
> 标签：objective-c, xcode, code-cleanup, appcode

现在离开的一些同事有在相关类文件中添加新类的习惯。

这使重构变得痛苦。

是否有一个工具，可能在 XCode 或 AppCode 中，或者只是一个简单的脚本，可以拆分这些怪物文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:50:12.937

在 AppCode 中似乎有一个工具可以帮助解决这个问题，但它只是半自动化的过程。

我正在使用 AppCode 2.0，我不知道 AppCode 1.x 中是否提供相同的工具。

要将一个类从文件中提取到新文件中，请右键单击`@interface`or`@implementation`行并选择 Refactor > Move。或者在该行上按 F6。您现在可以输入一个新的文件名，尽管您可能想在此处复制并粘贴类名。此时，您还可以选择要移动的任何定义。

我在脚本上做了一些工作来提取文件中的所有类。当我有机会从单元测试中删除我们的客户代码时，我很乐意分享这一点！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:18:49.297

我不认为有任何工具可以做到这一点。但是，您可以编写自己的 osx 应用程序来做同样的事情。

应用程序会要求浏览该文件，它会搜索`@interface....`@end `and`@implementation....~@end` 并由此创建一个文件。如果单个文件包含两个类，那么它将导致文件（两个标题和两个实现）。然后可以手动或自动删除原始文件。

*我认为上述任务可以在几个小时内完成。*

**在这里您可以将原始文件保存在文件夹中，以防万一您想回滚。**

# eclipse - 启动 Eclipse 导致 Failed to create Java Virtual Machine

> ID：15404964
> 
> 赞同：10
> 
> 时间：2013-03-14T09:03:21.870
> 
> 标签：eclipse, configuration

启动 eclipse.exe 时，它​​会给出错误消息

> 创建 Java 虚拟机失败

当我单击 eclipsec.exe 时，eclipse 就会启动。`eclipse.exe`和 和有什么不一样`eclipsec.exe`？

为什么 eclipse.exe 现在不工作而昨天工作？

如果我使用 eclipsec.exe 启动 eclipse 会有什么影响？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-06-07T12:02:48.437

打开 eclipse.ini 文件并将 vmargs 大小更改为

```
-vmargs
-Xms40m
-Xmx512m
-XX:MaxPermSize=256m 
```

它适用于我的系统。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-14T09:09:30.157

> 当我单击 eclipsec.exe 时，eclipse 就会启动。eclipse.exe 和 eclipsec.exe 有什么区别？

来自日食[维基](http://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse?)

> > 您可以通过在 Windows 上运行 eclipse.exe 或在其他平台上运行 eclipse 来启动 Eclipse。这个小型启动器本质上是查找并加载 JVM。在 Windows 上，eclipsec.exe 控制台可执行文件可用于改进命令行行为。

意思是`eclipse.exe`为您找到 JVM 并启动 Eclipse IDE，其中`eclipsec.exe`是控制台 exe，您可以在其中调整 Eclipse 的启动方式

> 如果我使用 eclipsec.exe 启动 eclipse 会有什么影响。它也提供命令提示符。

没有影响，eclipsec.exe 仅适用于 Windows

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-06-30T08:44:49.277

1.用Eclipse.exe打开文件夹，找到eclipse.ini文件

2.用你当前的javaw.exe真实路径替换-vmargs：

-vm “c:\Program Files\Java\jdk1.7.0_07\bin\javaw.exe”</p>

3.保存.ini文件并打开eclipse。它会工作..快乐编码。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-08-27T06:42:14.337

在你的**eclipse.ini**文件中

`-vm C:\Program Files\Java\jre7\bin\javaw`
在该行下方添加`-Dosgi.requiredJavaVersion=1.6`

然后删除`256m`线下方的`--launcher.XXMaxPermSize`。它会起作用的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T10:05:13.180

在 .ini 文件中编写如下所示，然后它将正常工作：

-vm C:\Java\jdk1.6.0_25\bin\javax.exe

在文件中添加了上面的行`eclipse.ini`（在顶部）并为我工作。`C:\Java\jdk1.6.0_25\bin`可以根据您的系统更改此路径。希望这会对某人有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-24T12:27:20.470

在 .ini 中添加以下行解决了我机器上报告的相同问题。-vm {路径}\javaw.exe

示例：“-vm C:\Program Files\Java\jre7\bin\javaw.exe”

# ios - 解释 glReadPixels()

> ID：15404970
> 
> 赞同：0
> 
> 时间：2013-03-14T09:03:33.040
> 
> 标签：ios, objective-c, opengl-es-2.0

在寻找答案一个多小时后（在 Munshi 的“OpenGL ES 2.0 Programming Guide”中尝试了一些东西，搜索了 Apple 的文档，搜索了 StackOverflow），我仍然无法让 glReadPixels 工作。我尝试了很多不同的方法，而我得到的最好的方法是波动（因此是错误的）结果。

我已经设置了使用着色器将四边形渲染到屏幕的简单案例，并且我手动将 gl_FragColor 分配为纯红色，因此屏幕上绝对没有波动。然后我之前尝试过类似下面的代码`presentRenderbuffer:`

```
GLubyte *pixels = (GLubyte *)malloc(3);

glReadPixels(100, 100, 1, 1, GL_RGB, GL_UNSIGNED_BYTE, pixels);

NSLog(@"%d", (int)pixels[0]);

free(pixels); 
```

基本上，尝试读取 (100, 100) 处的单个像素并读取它的红色值，我希望它是 1 或 255。相反，我得到像 1522775、3587 和 65536 这样的值，尽管屏幕上的图像永不改变。我在 Mac 上做了类似的事情，它运行良好，但由于某种原因，我无法让它在 iOS 上运行。`glDrawArrays()`在通话之后和通话之前，我有上述声明（并尝试了我在互联网上遇到的许多变体）`presentBuffer:`。我什至尝试过“OpenGL ES 2.0 编程指南”中的方法，该方法通过查询 glGetIntegerv() 获取帧缓冲区的信息来处理所有读取类型和读取格式的情况。

有任何想法吗？我相信有人会说，“使用搜索功能”，但我已经认真地提出了这一点，无法再进一步了。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:21:21.823

来自 Opengl ES 手册：

> 只接受两个格式/类型参数对。GL_RGBA/GL_UNSIGNED_BYTE 总是被接受的，另一个可接受的对可以通过查询 GL_IMPLEMENTATION_COLOR_READ_FORMAT 和 GL_IMPLEMENTATION_COLOR_READ_TYPE 来发现。

因此，您最好使用 GL_RGBA 而不是 GL_RGB。

# android - PhoneGap/Cordova Android 在 onDeviceReady 后获取屏幕大小

> ID：15404974
> 
> 赞同：11
> 
> 时间：2013-03-14T09:03:42.767
> 
> 标签：android, cordova

Android 应用在`onDeviceReady`事件中返回无效大小 (320x480)，但几秒钟后大小变为正确。

我们如何在一开始就获得正确的尺寸？或者有什么活动可以让我获得正确的尺寸吗？

我正在使用这个函数来获取大小：

```
function getWindowSizes() {
  var windowHeight = 0, windowWidth = 0;
  if (typeof (window.innerWidth) == 'number') {
      windowHeight = window.innerHeight;
      windowWidth = window.innerWidth;

  } else if (document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight)) {
      windowHeight = document.documentElement.clientHeight;
      windowWidth = document.documentElement.clientWidth;

  } else if (document.body && (document.body.clientWidth || document.body.clientHeight)) {
     windowHeight = document.body.clientHeight;
     windowWidth = document.body.clientWidth;
  }
  return [windowWidth, windowHeight];
} 
```

视口：

`<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />`

使用科尔多瓦 2.5.0。

UPD：
正如您在此屏幕截图中看到的，应用程序以较小的尺寸启动。即使是空的 Cordova 项目也会这样做。我怎样才能解决这个问题？

![在此处输入图像描述](../Images/006ff68660c079402c364233e54f47cc.png)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:47:29.720

删除元标题索引上的高度、宽度和密度属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T13:49:41.817

尝试删除标头中的 target-densitydpi。

设备 dpi 基于物理像素，而 css 像素是逻辑像素，它们有时彼此不同，如果你强制它们相同，你会看到屏幕被拉伸。

window.devicePixelRatio 可能会给你转换的结果。（在 webkit 上）

更新：

此链接提供了有关其工作原理的更多详细信息： [https ://petelepage.com/blog/2013/02/viewport-target-densitydpi-support-is-being-deprecated/](https://petelepage.com/blog/2013/02/viewport-target-densitydpi-support-is-being-deprecated/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T10:10:35.597

尝试删除 app 类中的 position:absolute 属性（在 index.css 中）。这对我有用。

# c++ - 将 Char 地址转换回 __int64 或 long

> ID：15404978
> 
> 赞同：2
> 
> 时间：2013-03-14T09:03:51.100
> 
> 标签：c++

我已经为窗口定义了一个指针地址

```
#ifdef _WIN64 

    typedef uint64_t unit_pointer;

#   define PRINTF_PTR "%I64x"

#else

    typedef unsigned long unit_pointer;

#   define PRINTF_PTR "%lx"

#endif

TEST *obj = &test_obj;

char obj_pointer_add[50]; 

sprintf(obj_pointer_add, PRINTF_PTR, (unit_pointer)obj); 
```

现在我想在其他地方重新创建 obj 指针，因为我知道 obj_pointer_add。我如何将 obj_pointer_add 转换回 unit_pointer？

```
unit_pointer point_address= (unit_pointer)obj_pointer_add; (ERROR CONVERTING)

TEST *new_obj = reinterpret_cast<TEST *>(point_address); (fail because of pointer_address wrong) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:43:19.247

我真的不知道你为什么需要这个。但是，我建议你用这种更简单的方法（IMO）来摆脱那些`"#if / #endif"`：

```
TEST *obj = new TEST();

std::stringstream stream;                //
stream << std::hex << obj;               //Convert address to a hex-string
std::string hex_str_addr(stream.str());  //

// ...

std::uintptr_t addr;
std::stringstream(hex_str_addr) >> std::hex >> addr; //Convert back to a address

TEST *new_obj = reinterpret_cast<TEST*>(addr); 
```

使用`uintptr_t`哪个知道您的系统指针大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:19:44.213

您可以`sscanf`使用相同的格式将其转换为变量。

**注意：**您**只能**在*完全相同的*过程中执行此操作。因此，如果您存储指针并重新启动程序，则不能再次使用存储的指针。如果你在同一个进程中使用它来传递指针，为什么你想要它作为一个字符串，而不是使用实际的指针？

# ms-access - 将子/主字段与单独的子表单链接

> ID：15404981
> 
> 赞同：0
> 
> 时间：2013-03-14T09:03:55.090
> 
> 标签：ms-access, ms-access-2010

我打开的数据库中的表单有问题。

该表单称为Specifiche，里面有两个子表单：SSpecifiche 和SSDatiSpecifiche。

[http://postimage.org/image/alagax8zx/full/](http://postimage.org/image/alagax8zx/full/)

子表单 SSpecifiche 连接到表 Dati_Capitolati，而 SSDatiSpecifiche 连接到表 Codice_Specifica。这两个表有两个相关的字段：Codice specifica 与 Codice specifica 以及 Nome Tabella 与 Tabella。结果应该是这样的：http: [//postimage.org/image/aefarm47r/](http://postimage.org/image/aefarm47r/)

其实用Access 97打开我没有问题，但是2010的右表是空的，它没有加载任何字段。使用向导字段并不能帮助我解决这个问题。记录我读到也许我需要创建一个查询，但我无法理解程序。对我来说，错误在这里：

```
LinkChildFields Master: Codice Specifica;[Nome Tabella]
LinkChildFields: Codice Specifica;Tabella 
```

我希望我很清楚，我感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:41:53.203

我知道已经有一段时间了，但是这些天我打开了数据库，我想我知道什么不起作用。研究这个页面，[http://www.fmsinc.com/microsoftaccess/forms/synchronize/linkedsubforms.asp](http://www.fmsinc.com/microsoftaccess/forms/synchronize/linkedsubforms.asp) 我遇到了同样的情况。事实上，我注意到主窗体有一个隐藏的文本框。正是这个不起作用，实际上我使可见并显示：#Error。

此文本框名为：Nome Tabella 和数据源控件有：=[SSpecifiche].[Forms]![Table Name]

我检查过，因此应该是公平的，我不明白为什么不起作用。

# php - PHP：将 rsort 放在哪里？

> ID：15404984
> 
> 赞同：0
> 
> 时间：2013-03-14T09:03:59.017
> 
> 标签：php, directory-listing

```
$count = 0;

if ($handle = opendir('./arkiv/')) {
    while (false !== ($file = readdir($handle))) {
        if ($file != "." && $file != "..") {
            $count++;
            print("<a href=\"arkiv/".$file."\">".basename($file, ".php")."</a><br />\n");
        }
    }
    echo '<br /><br /><a href=".">Tilbake</a>';
    closedir($handle);
} 
```

这是我正在使用的代码，我试图找出除了“rsort”之外的地方，但这对我来说很新，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:11:20.803

可能的用途可以像

```
$count = 0;
         $fileArray = array();
         if ($handle = opendir('./arkiv/')) 
         {
            while (false !== ($file = readdir($handle))) 
            {
               if ($file != "." && $file != "..") 
               {  
                  $count++;
                  $fileArray[] = $file; 

               }
            }
            rsort($fileArray);
            foreach($fileArray as $file)
            {
               print("<a href=\"arkiv/".$file."\">".basename($file, ".php")."</a><br />\n");
            }

            echo '<br /><br /><a href=".">Tilbake</a>';
            closedir($handle);
         } 
```

试一试....祝你好运！

# objective-c - TableView如何实现单元格与自定义滚动重叠

> ID：15404994
> 
> 赞同：8
> 
> 时间：2013-03-14T09:04:14.250
> 
> 标签：objective-c, cocoa-touch, uitableview

我需要用重叠的单元格和自定义滚动来实现垂直和水平表。

它应该看起来像这样：

![在此处输入图像描述](../Images/a7cfaf187892b73b84b4551d4b65ce11.png)

表格可以有很多单元格（大约 1000 个），因此也需要回收。

你知道任何第三方组件或者可能是可以帮助我的标准。或者我需要编写我的自定义“TableView”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T05:04:44.910

您所描述的内容在标准中将非常困难`UITableView`，因为它需要控制单个单元格的布局。好消息是，Apple*确实*提供了一个 API，用于以您想要的任何方式指定可重用单元格的布局。唯一的问题是它是针对`UICollectionView`s 的，而不是针对 s`UITableView`的。如果您不需要支持旧版本的 iOS，我建议您观看有关集合视图的 WWDC 会议，然后查看[Schwa 的 Coverflow 项目](https://github.com/schwa/Coverflow)以获得类似样式布局的可靠实现。

# javascript - onclick 事件而不是点击jquery 和花哨的框来打开 iframe

> ID：15404995
> 
> 赞同：0
> 
> 时间：2013-03-14T09:04:18.147
> 
> 标签：javascript, jquery, html, fancybox

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:11:49.857

试试这个

```
$("a.popup").fancybox({
 'onClosed' : function() { 
      location.reload(true); } 
}); 
```

您需要重新加载页面而不是将其作为父页面提供

```
parent.location.reload(true); 
```

onClosed 和 inCleanup 的区别是这样的

“ **onCleanup** ”是较早的调用，即使弹出窗口没有完全关闭，但“ **onClosed** ”是弹出窗口完全关闭时...详细地说，如果您单击弹出窗口的关闭按钮，它首先会触发“ **onCleanup** ”并开始关闭完全关闭后会触发“ **onClosed** ”

# vb.net - 将字体和工具提示设置为动态创建的上下文菜单项

> ID：15404996
> 
> 赞同：1
> 
> 时间：2013-03-14T09:04:22.263
> 
> 标签：vb.net

使用很少的静态`contextmenustrip`项目，我可以像这样动态地从数据库中创建其他项目：

```
reader = cmd.ExecuteReader()
If reader.HasRows Then Arh_ContextMenuStrip.Items.Add("-", Nothing, Nothing)
While (reader.Read())
    If CStr(reader.GetValue(0)).Length = 17 And Not CStr(reader.GetValue(0)) = mydatabase Then
        Arh_ContextMenuStrip.Items.Add(CStr(reader.GetValue(0)), Nothing, AddressOf myHandler_Click)
        'How to set font "Courier New" for this item?
        'How to set tooltip for this item?
    End If
End While 
```

问题是：我可以以及如何为此类项目设置不同的字体，例如“Courier New”，并为每个此类项目添加工具提示文本。那是因为我需要这些项目的比例字体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:22:32.557

试试这个，

```
While (reader.Read())

     If CStr(reader.GetValue(0)).Length = 17 And Not CStr(reader.GetValue(0)) _
     = mydatabase Then

        'Adding item into a context menu strip will return the same.
        Dim xAddedItem = Arh_ContextMenuStrip.Items.Add(CStr(reader.GetValue(0)), _
        Nothing,AddressOf myHandler_Click)

        'Set Different fonts matching your requirement
        xAddedItem .Font = New Font("Courier New", 14, FontStyle.Bold)
        xAddedItem .ToolTipText = "Hello I'm the tool tip"

    End If

End While 
```

# c# - 运算符“==”不能应用于“int”和“string”类型的操作数

> ID：15404997
> 
> 赞同：15
> 
> 时间：2013-03-14T09:04:23.093
> 
> 标签：c#, .net, linq

我在这里有一点误解为什么我在这里有一个错误我需要解析它这段代码有什么问题？

```
UberTrackerEntities ctx = UberFactory.Context;
IEnumerable<HtUser> users = HtUser.GetAll();
string selectedBU = rcbBusinessUnits.SelectedValue;
string selectedDepartment = rcbDepartment.SelectedValue;

HtDepartment department = ctx.HtDepartments.SingleOrDefault(d => d.DepartmentId ==selectedDepartment);

if (department != null) 
{
    users = users.Where(u => u.HtDepartments.Contains(department));
} 
```

感谢您的帮助和快速答复！

PS：我觉得我刚刚结束了它接缝只是一个愚蠢的小错误......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-14T09:05:50.957

`selectedDepartment`在 LINQ 查询中进行比较之前，您需要将其转换为整数。

```
int selectedDepartment = Convert.ToInt32(rcbDepartment.SelectedValue); 
```

在您的查询中：

```
ctx.HtDepartments.SingleOrDefault(d => d.DepartmentId == selectedDepartment); 
```

`d.DepartmentId`是 int 类型，`selectedDepartment`而是字符串，您可以使用运算符比较两者`==`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:06:14.060

`d.DepartmentId`是一个`int`并且`selectedDepartment`是一个字符串。

您将需要使用`Int32.Parse`,`Int32.TryParse`或`Convert.ToInt32`

编辑：

```
int selectedDepartmentId = Convert.ToInt32(selectedDepartment);

HtDepartment department = ctx.HtDepartments.SingleOrDefault(d => d.DepartmentId == selectedDepartmentId)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:06:26.283

您选择的部门是字符串类型，您的 id 是 int 类型。您应该将您的 selectedDepartment 转换为 int：

```
int selectedDepartment = Convert.ToInt32(rcbDepartment.SelectedValue); 
```

# c++ - c++ Client和node.js Server之间的socket通信

> ID：15404998
> 
> 赞同：4
> 
> 时间：2013-03-14T09:04:28.687
> 
> 标签：c++, node.js, sockets

我想让我的 c++ 应用程序（在 Linux 系统上运行）通过套接字连接并向 node.server 发送数据。

我尝试使用 socket.io 库（[https://github.com/uning/socket.io-client-cpp](https://github.com/uning/socket.io-client-cpp)）来实现小型示例应用程序，但并没有帮助我实现目标。

有关此操作或替代方法的任何指导，以执行此类操作。