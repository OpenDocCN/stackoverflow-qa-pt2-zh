# StackOverflow 问答 13811000-13811999

# c++ - 通过有向图 C++ 分段错误查看时出错

> ID：13811000
> 
> 赞同：0
> 
> 时间：2012-12-10T23:20:32.563
> 
> 标签：c++, segmentation-fault, directed-graph

用户将在图中输入节点的数量，然后输入一个整体的“行星”名称。然后他们将输入 where 是行星的名称，以及该行星的位置数。之后，各行如下形式：……。表示位置的名称，表示和…的邻居数。是 的邻居列表。

例如： 3 Venus 4 spaceport 2 beach disco beach 1 bar bar 1 spaceport disco 1 bar Neptune 3 spaceport 1 toy-factory toy-factory 0 weapons_depot 1 Weapon_depot Binary-2 2 spaceport 1 zero-one zero-one 1 spaceport

总会有一个太空港。然后我必须从太空港开始，列出哪些节点也无法获取。这是我认为我是 Seg 错误的部分。当它试图输出节点时，它将编译然后段错误。

这是代码：

```
#include <iostream>
#include <map>
#include <vector>
using namespace std;
bool path(int x, int y, vector<vector<bool> > graph);

int main()
{ 
  int num_planets; 
  cin>>num_planets; 

  for (int m=0; m<num_planets; m++) 
  { 
    string planet; 
    int num_locations; 

    cin>>planet; 
    cin>>num_locations; 
    map<string, int> m_planet; 
    vector<vector<bool> > graph; 
    graph.resize(num_locations);

    for (int n=0; n<num_locations; n++) 
    { 
      graph[n].resize(num_locations); 
    } 
    for(int k=0; k<num_locations; k++) 
    { 
      for (int j=0; j<num_locations; j++) 
      {
        graph[k][j] = false; 
      } 
    } vector<vector<string> > connections;

    vector<string> places; 
    for (int o=0; o<num_locations; o++) 
    { 
      string place;

      cin>>place; 
      places.push_back(place); 
      m_planet[place] = o; 
      int edges;

      cin>>edges; 
      connections.resize(num_locations);
      connections[o].resize(edges); 

      for (int p=0; p<edges; p++) 
      { 
        string connect;
        cin>>connect; 
        connections[o][p]=connect; 
      } 
    } 

    for (int q=0; q<num_locations; q++) 
    { 
      for (int r=0; r<connections[q].size(); r++) 
      { 
        int from, to; 
        from = m_planet[places[q]]; 
        to = m_planet[connections[q][r]]; 
        graph[from][to] =true; 
      } 
    } 

    cout<<"In planet "<<planet<<":"<<endl; 

    int num_paths = 1; 
    for(int s=1; s<num_locations; s++) 
    { 
      bool route; 
      route = path(0, s, graph); 

      if(route == false) 
      { 
        cout<<places[s]<<"unreachable from the#"
          <<places[0]<<"."<<endl; 
      } 

      else 
      { 
        num_paths++; 
      } 
    } 

    if (num_paths == num_locations) 
    { 
      cout<<"All locations reachable from the#"<<places[0]<<"."<<endl; 
    } 
  } 

  return 0;
}

  bool path(int x, int y, vector<vector<bool> > graph)
  { 
    for (int m=0; m<graph[x].size(); m++) 
    { 
      if(graph[x][m] == true) 
      { 
        if (graph[x][m] == y) 
        { 
          return true; 
        } 

        else 
        {
          return path(m, y, graph); 
        } 
      } 
    } 

    return false;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:26:22.207

您正在覆盖 num_locations，但试图使用它来访问这两个维度。这意味着除非用户每次都输入相同的值，否则您将遇到问题，因为其中一个维度会超出范围。

为每个维度保留单独的变量。

# flash - 在 Chrome 上从 Flash 显示新的浏览器窗口

> ID：13811002
> 
> 赞同：1
> 
> 时间：2012-12-10T23:20:38.837
> 
> 标签：flash, google-chrome

我正在尝试从 Flash 中打开具有特定 URL 的浏览器窗口。下面的代码适用于 IE 和 FF，但不适用于 Chrome。我看不到任何事情发生，并且在 chrome 的 javascript 控制台上看不到任何输出。任何帮助，将不胜感激

```
 private function newWin():void {

        var jscommand:String = "window.open('http://www.slashdot.org','win','height=200,width=300,toolbar=no,scrollbars=yes')";
        var urlX:URLRequest = new URLRequest("javascript:" + jscommand + ";");
        ExternalInterface.call("window.open","http://www.slashdot.org","win","height=200,width=300,toolbar=no,scrollbars=yes");

    }
    ]]></fx:Script>

     <s:Button label="Go to adobe.com 5"
               click="newWin()" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:33:52.137

使用 JS 命令，您必须将嵌入/对象 HTML 标记的“ **allowScriptAccess** ”属性更改为“ **always** ”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:57:08.430

这可能不是 Flash + Chrome 的问题，而是 Javascript + Chrome 的问题。

正如[这篇文章](https://stackoverflow.com/questions/4994063/setting-the-page-title-of-chrome-window-open)中所建议的那样，尝试将`'about:blank'`作为第一个参数放入您的 javascript 中，以查看它是否打开：

```
window.open('about:blank','win' ... 
```

[这篇其他帖子](https://stackoverflow.com/questions/2572333/google-chrome-window-open-workaround)也可能会给您一些其他想法。

如果一切都失败了，您仍然可以使用[NavigateToURL()打开一个窗口](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/package.html#navigateToURL%28%29)

```
navigateToURL(new URLRequest("http://www.slashdot.org"), "_blank"); 
```

这当然不会为您提供窗口大小选项，但至少您会从中获得一个新窗口。

# c - WIN32：获取显卡信息？

> ID：13811005
> 
> 赞同：0
> 
> 时间：2012-12-10T23:20:55.247
> 
> 标签：c, winapi, graphics

我正在尝试使用以下 DeviceContext 结构来获取一些图形驱动程序信息。

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd183569%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183569%28v=vs.85%29.aspx)

在文档中，一个参数表示它可以是给定选项的任何“合理组合”。

它们是什么类型的？它们是否定义为预编译器字段？以及如何找出每个组合值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:24:05.257

标志的值在您引用的页面中定义。组合值是通过将字段 ORing 在一起创建的，例如：

```
(DISPLAY_DEVICE_ACTIVE | DISPLAY_DEVICE_PRIMARY_DEVICE) 
```

# svn - SVN 在提交或更新时冻结

> ID：13811009
> 
> 赞同：4
> 
> 时间：2012-12-10T23:21:12.770
> 
> 标签：svn, centos

SVN 遇到了一个奇怪的问题。我有一个运行 SVN 版本 1.6.11 的 CentOS 6.3 服务器，使用 LDAP 身份验证进行用户登录。自 7 月以来，它一直稳定且在线，从未出现任何问题。由于飓风期间我们的数据中心发生电力事件，系统严重崩溃，此后一直不正常。对服务器的第一次提交可以正常工作，但此后任何尝试的连接都会冻结并继续尝试（或者直到通过结束客户端签出过程或停止 Apache 来终止连接）。服务器的重新启动允许一次签入，然后再次发生冻结。这似乎发生在 CentOS 中的 TortoiseSVN、RapidSVN 和命令行 SVN 上。在这一点上，我基本上有两个想法来解决这个问题：

1.  转储并重新加载现有的 SVN 存储库，并希望任何导致它挂起的东西都不会继续存在。
2.  从存储库的最后一个已知良好备份还原。

以前有人遇到过这个问题，如果是这样，你是如何解决的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-10T13:48:10.127

我发现如果您的 svn 有时挂起，则意味着您的 SVN 客户端太旧了。升级您的 svn 客户端以满足您的 svn 服务器文件的 svn 版本。

# jquery - jqgrid - viewGridRow 似乎根本没有做任何事情

> ID：13811010
> 
> 赞同：0
> 
> 时间：2012-12-10T23:21:13.017
> 
> 标签：jquery, jqgrid

[我在这里](http://byte-consult.be/log/events.html)有一个测试用例，我想我几乎涵盖了我在文档中可以找到的所有要求，以便能够像在[本示例](http://www.ok-soft-gmbh.com/jqGrid/WrappingInViewForm.htm)中选择时一样查看网格行表单。我现在可能对此太深入了，但我根本没有收到任何 JavaScript 错误/警告来跟进......

我应该双击一条记录并查看网格，但它让我陷入了黑洞。我可以用一些新的眼光来看待这个问题。寻呼机图标和双击似乎也不起作用。

任何人都可以帮助我吗？谢谢你的帮助。如果代码在您尝试时出错，我正在尝试一些东西，所以我会确保在完成时检查它的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:41:21.757

首先，我建议您将`jquery.jqGrid.js`jqGrid 4.1.1 的最小化版本的文件替换`jquery.jqGrid.src.js`为当前的 jqGrid 4.4.1。一般来说，`jquery.jqGrid.src.js`如果你有相同的问题，你应该总是尝试在`jquery.jqGrid.min.js`. jqGrid 将永久更改，将修复许多错误修复并添加新功能。例如 jqGrid 4.3.3 修复了[此处](https://stackoverflow.com/a/10621951/315935)描述的 Google Chrome 版本 >=19 中网格宽度的错误计算。它实施了修复以支持当前版本的 jQuery 1.6 和许多其他东西。jqGrid 4.1.1 版本已经快两年了，这在网络世界中确实很重要。

此外，我建议您**永远不要使用`afterInsertRow`并始终使用`gridview: true`**. 原因是网格的性能。理解页面上的元素（DOM 元素）的工作应该像计算机语言中已知的任何其他变量一样以其他方式组织，这一点非常重要。原因是如果您更改页面上的*一个元素，Web 浏览器必须重新计算页面上***所有**现有元素的位置样式等。至少网络浏览器必须验证所有元素是否需要更改。一种将此类程序命名为[web browser reflow](https://developers.google.com/speed/articles/reflow)。我建议您阅读我更详细地描述问题[的答案。](https://stackoverflow.com/a/12519858/315935)以同样的方式，您应该尝试减少任何循环`loadComplete`或者`gridComplete`您枚举所有行并在多行中进行更改。在这种方式下，网格的性能会降低很多倍。如果您使用另一种编写程序的方式，它将像以前一样干净且易于理解，并且可以快速运行。例如，在[答案](https://stackoverflow.com/a/13765086/315935)中，您可以找到这种代码转换的一个真实示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T00:24:32.013

您缺少的是以下代码：

```
onSelectRow: function (id) {
    $(this).jqGrid('viewGridRow', id, viewParam);
}, 
```

应该放在哪里：

```
$grid.jqGrid({

    ... // Some code attribute

    onSelectRow: function (id) {
        $(this).jqGrid('viewGridRow', id, viewParam);
    },

    ... // Some more code attributes
}); 
```

编辑您的自定义 javascript `event.js`。一旦您学会了如何使用它并应用它，请选择该行。然后，您应该能够拉出一个弹出窗口或您想做的其他事情。这意味着您将需要大量阅读特定`onSelectRow`属性。

# windows - Windows模拟网线丢失

> ID：13811019
> 
> 赞同：3
> 
> 时间：2012-12-10T23:22:15.743
> 
> 标签：windows, networking, simulate

我正在尝试编写一些工具，我想用它来模拟网络电缆丢失。所以我想得到同样的效果，就像我从我的电脑上拔下网线然后重新插入一样。它与 '/renew' / '/release' 命令不同。当我手动断开/连接它时，它看起来就像 Windows 记住了一些东西，并且它再次连接得非常快。是否有可能以及如何在代码中做到这一点？

非常感谢！

* * *

编辑：我发现另一个程序只是阻止所有端口，这对我来说也可以，但是如何在代码中执行:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:29:49.233

您应该将获取和发送数据比特率设置为 0

或者，您可以将接收比特率设置为 0 位并保持发送不变，这也将模拟相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:11:17.523

看看一个很棒的小工具，叫做[WANem](http://wanem.sourceforge.net/)。您可以使用它来模拟不同的 WAN 场景。连接丢失是一种可能性，但还有抖动、噪声等在线上。甚至模拟拨号连接。作为可启动的 ISO 运行，非常易于使用。

# java - 错误：类 X 是公共的，应在名为 X.java 的文件中声明

> ID：13811020
> 
> 赞同：57
> 
> 时间：2012-12-10T23:22:25.160
> 
> 标签：java

我正在尝试编写一个程序，但我收到了这个编译器错误：

```
Main.java:1: error: class WeatherArray is public, should be declared in a file named WeatherArray.java
public class WeatherArray {
       ^
1 error 
```

我检查了我的文件名，我的公共类与我的 .java 文件相同。

我怎样才能解决这个问题？

这是我的代码：

```
public class WeatherArray {
    public static void main(String[] args) {
        // ...
    }
} 
```

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-12-10T23:25:16.870

公共类的名称必须与放置它的**.java**`public class Foo{}`文件的名称匹配（就像必须放在`Foo.java`文件中一样）。所以要么：

*   将您的*文件*从重命名`Main.java`为`WeatherArray.java`
*   将*课程*`public class WeatherArray {`重命名为`public class Main {`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-10T23:25:39.067

文件中公共类的名称必须与该文件的名称相同。

因此，如果您的文件声明了类 WeatherArray，则需要将其命名为 WeatherArray.java

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-15T13:05:25.757

当您在硬盘上有一个 Java 类的名称而代码中有另一个 Java 类的名称时，就会发生这种情况！

例如，我在代码中将我的`MainActivity`类重命名为`MainnActivity`only (!)。我立即收到此错误。

在 Android Studio 的 Project 选项卡中还有一个视觉指示器 - 一个类中的一个类，就像您嵌套了 classed，但带有一个错误指示器。

![](../Images/15c4d783df3c1e849db25aa6149b73cc.png)

`SHIFT`解决方案是在“项目”选项卡 ( + )中简单地重命名类名称`F6`以匹配 Java 代码中的名称。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-08-27T20:57:59.340

我有同样的问题，但当我意识到我没有用正确的大小写编译它时解决了它。你可能一直在做

> javac Weatherarray.java

应该是什么时候

> javac WeatherArray.java

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-10T23:26:02.633

您将文件命名为**Main.java**。将您的文件命名为**WeatherArray.java**并编译。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-10T23:27:11.353

您的文件名为**Main.java**它应该在哪里

> WeatherArray.java

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-16T04:42:07.317

在我的情况下（使用 IntelliJ）我复制并粘贴并重命名了工作区，并且我仍然使用旧路径来编译新项目。

在这种情况下，这个特定的错误也会发生，如果你有同样的错误，你可以检查你是否做了类似的事情。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-09T16:37:06.333

从 Ubuntu 命令行：

```
//WeatherArray.java
public class WeatherArray {
  public static void main(String[] args) {
    System.out.println("....Hello World");
}} 
```

> ls

WeatherArray.java

> javac WeatherArray.java
> 
> ls

WeatherArray.java WeatherArray.class

> java天气数组

....你好世界

当然，如果你用不同于 WeatherArray 的名称命名你的 java 文件，你需要取出 public，它会是：

```
// Sunny.java
class WeatherArray {
   public static void main(String[] args) {
      System.out.println("....Hello World"); }}
// javac Sunny.java; java WeatherArray 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-30T19:47:12.020

如果您将 WeatherArray 类从公共设置为默认。

**公共类 WeatherArray** =====>**类 WeatherArray**

那么您不会收到任何错误，您只需编写代码即可轻松编译代码

==> **javac any_name_you_assign_to_file.java**

现在将生成一个 WeatherArray.class。

要运行您的代码，您必须使用类名

==> **java WeatherArray**

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-03T16:18:54.423

我曾经遇到过同样的错误。这真的很有趣。我创建了具有不同文件名但类名相同的 .java 文件的备份。并继续尝试构建它，直到我检查了文件夹中的所有文件。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-12T15:45:30.963

为避免此错误，您应遵循以下步骤：

```
1) You should make a new java class 
```

![您应该创建一个新的 java 类。](../Images/878ce1eac8d586564c4a92e2ecaa2245.png)

```
2) Name that class 
```

![命名该类](../Images/e6bcf73e06ecec0c8e5a209a926380fb.png)

```
3) And a new java class is made 
```

![并制作了一个新的java类](../Images/dc9ea25ab6ca7b42e65027650eb17f74.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-25T15:21:54.877

终端在写入“Javac [x].java”时不区分大小写，因此请确保您在终端中写入的内容与文件名和类名匹配。

我的类名和文件名都是“MainClass”，但我正在使用“Mainclass”进行编译。注意我忘了把“c”大写。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-07-13T13:01:10.613

编译 WeatherArray.java 而不是 Main.java

如果您没有使用与公共类名称相同的名称保存源代码，则会出现此错误。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-01-30T22:04:51.520

我的情况是，我使用的是syncthing。它创建了一个我不知道的副本，并且我的编译失败了。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-09-11T20:50:42.353

如果您的类名与文件名相同，请检查它是否不包含任何零宽度字符

我不小心复制了一个带有不可见空格的类名，导致了这个异常

Eclipse 能够构建文件而 Gradle 不能

这可能非常令人困惑

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2015-06-23T20:28:23.360

答案很简单。它取决于您的管理员权限。在编译您的 java 代码之前，您需要以管理员身份运行打开命令提示符。然后编译你的代码。无需更改代码中的任何内容。类的名称需要与java文件的名称相同..就是这样！！

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2016-07-27T09:46:31.593

当您将文件命名为**WeatherArray.java**时，可能硬盘上有另一个文件，因此您可以将**WeatherArray.java**重命名为**ReWeatherArray.java**，然后将**ReWeatherArray.java**重命名为**WeatherArray.java**。会没事的。

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2017-04-12T09:06:24.660

错误示例：

```
public class MaainActivity extends Activity {

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Get the view from activity_main.xml
    setContentView(R.layout.activity_main);

  }
} 
```

正确的例子：只要确保你写了正确的活动名称，即“主要活动”

```
public class MainActivity extends Activity {

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Get the view from activity_main.xml
    setContentView(R.layout.activity_main);

  }
} 
```

# postgresql - Postgresql、实体框架和 Mono 3

> ID：13811021
> 
> 赞同：2
> 
> 时间：2012-12-10T23:22:28.287
> 
> 标签：postgresql, entity-framework-4, mono, monodevelop

我试图让 EF 在 Linux 平台上与 Postgresql 一起工作。当我尝试连接到数据库时，我遇到了这个错误：**无法找到或加载注册的 .Net Framework 数据提供程序“Npgsql 数据提供程序”。**我的 app.config 文件：

```
<?xml version="1.0" encoding="utf-8"?>
  <configuration>
    <configSections>
      <section name="entityFramework"
        type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework" />
    </configSections>
    <system.data>
      <DbProviderFactories>
        <remove invariant="Npgsql"></remove>
        <add name="Npgsql Data Provider" 
          invariant="Npgsql" 
          description=".Net Framework Data Provider for Postgresql Server" 
          type="Npgsql.NpgsqlFactory, Npgsql, Version=4.0.0.0, Culture=neutral" />
      </DbProviderFactories>
    </system.data>
    <connectionStrings>
      <add name="MinDatabase" connectionString="Server=localhost;Port=5432;Database=postgres;User Id=postgres;Password=;CommandTimeout=20;" 
        providerName="Npgsql Data Provider" />
    </connectionStrings>
  </configuration> 
```

如何让 Mono 加载数据提供者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:29:48.927

错误消息包含不变名称，因此它正在寻找具有不变名称“Npgsql 数据提供者”的内容，并且您专门将 invariantName 设置为 Npgsql。因此，也许可以尝试更改为在整个配置中使用相同的名称，如下所示：

```
<system.data>
  <DbProviderFactories>
    <remove invariant="Npgsql"></remove>
    <add name="Npgsql" 
      invariant="Npgsql" 
      description=".Net Framework Data Provider for Postgresql Server" 
      type="Npgsql.NpgsqlFactory, Npgsql, Version=4.0.0.0, Culture=neutral" />
  </DbProviderFactories>
</system.data>
<connectionStrings>
  <add name="MinDatabase" connectionString="Server=localhost;Port=5432;Database=postgres;User Id=postgres;Password=;CommandTimeout=20;" 
    providerName="Npgsql" />
</connectionStrings> 
```

希望它有效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-26T18:01:58.770

你从哪里下载 Npgsql？如果您使用的是来自官方版本的 Npgsql，那么您的问题是程序集的 Version 属性。支持 EF 4.x 的 Npgsql 有 2.0.14.3 版，支持 EF 6 的 Npgsql 有 2.1.0 版。没有版本 4.0.0.0。

有关在实体框架中使用 Npgsql 的更多信息，请查看：

[如何将 PostgreSql 与 EntityFramework 6.0.2 集成？](https://stackoverflow.com/questions/20628632/how-to-integreate-postgresql-with-entityframework-6-0-2?rq=1)

[带有 Npgsql 的实体框架 6](https://stackoverflow.com/questions/21066702/entity-framework-6-with-npgsql?rq=1)

[http://fxjr.blogspot.com.br/2014/02/using-entity-framework-6-with-npgsql-210.html](http://fxjr.blogspot.com.br/2014/02/using-entity-framework-6-with-npgsql-210.html)

我希望它有所帮助。

# ios - IOS - 重新建立连接时对要发送的请求进行排队的最佳方式

> ID：13811022
> 
> 赞同：1
> 
> 时间：2012-12-10T23:22:32.430
> 
> 标签：ios, httpwebrequest, restkit

在我的 IOS 应用程序中，我的应用程序中有一个应用程序内购买，我需要将收据发送到我的网络服务以将高级内容分配给用户帐户。即使在应用内购买完成后连接丢失，我也需要它是可靠的。

是否有任何可靠的库可以在重新建立连接时接受请求并执行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:26:19.503

我肯定会推荐[AFNetworking](https://github.com/AFNetworking/AFNetworking)，这是一个制作精良的网络库，它包装了 NSURLConnection。

为了将其用于您的目的，您需要利用[其他答案](https://stackoverflow.com/a/9255830/846273)`AFHTTPClient`中建议的可达性内置功能。

基本上，只要网络的可达性状态发生变化，您就可以`setReachabilityStatusChangeBlock:`使用`AFHTTPClient`.

只要记住链接并导入`SystemConfiguration`框架，否则将无法正常工作。

# android - 片段 onListItemClick

> ID：13811023
> 
> 赞同：3
> 
> 时间：2012-12-10T23:22:34.433
> 
> 标签：android, listview, android-fragments, onclick, fragment

当我单击项目时，我的 onListItemClick 永远不会被调用，该类是扩展片段而不是 listfragment，因为我在这个片段中有其他视图项目不是列表，那么如何在类扩展片段中实现 onlistitemclick？

班级

```
public class MainFiles extends Fragment 
{
    ArrayList<String> items;

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
    {
        View view = inflater.inflate(R.layout.files, container, false);

        Button button_up = (Button) view.findViewById(R.id.button_up);
        items = new ArrayList<String>();

        MyAdapter adapter = new MyAdapter(getActivity(), R.layout.row, items);
        ListView myList = (ListView) view.findViewById(R.id.list);
        myList.setAdapter(adapter);

        return view;
    }

    public void onListItemClick(ListView l, View v, int position, long id) 
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T23:33:57.357

显式添加`OnItemClickListener`到您的`ListView`

```
myList.setOnItemClickListener(this); 
```

您还必须确保您`Fragment`实现了以下`OnItemClickListener`类型：

```
public class MainFiles extends Fragment implements OnItemClickListener 
```

* * *

另一种方法是创建一个专用的子类`OnItemClickListener`来传递给`ListView`：

```
myList.setOnItemClickListener(new MyOnItemClickListener());

/* ... */

private class MyOnItemClickListener implements OnItemClickListener {

    /* ... */

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T23:35:45.843

您忘记设置 setOnItemClickListener

添加后`myList.setAdapter(adapter);`：

```
myList.setOnItemClickListener(new OnItemClickListener(){
    public void onItemClick(AdapterView<?> parent, View view, int position,long id){
        new File(items.get(position));
        fileList(path.get(position));
        showPath(current_path);                 
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T23:58:44.470

我在这样的片段中实现了监听器

```
public class DetailsFragment extends Fragment implements OnItemClickListener {

    private ListView listView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View root = inflater.inflate(R.layout.fragment_details, container, false);

        // list view
        listView = (ListView) root.findViewById(R.id.listView);
        listView.setListAdapter(new DetailsAdapter(getActivity(), list));
        listView.setOnItemClickListener(this);

        return root;
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        // handle click here
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-06T17:40:42.833

您的片段必须扩展 ListFragment，如果您的布局有一个 id=android:id/list 的列表视图，您的布局中可以有更多的东西而不是列表

# windows-phone-7 - windows phone 复选框数据库检查值（？）

> ID：13811027
> 
> 赞同：0
> 
> 时间：2012-12-10T23:23:01.400
> 
> 标签：windows-phone-7, checkbox

我的应用程序上有 200 个复选框，我必须更改它们的 ischecked 值。所以我想使用这样的代码：

checkbox(i).ischecked=true;(它不工作:))

这可能吗？或者我如何在 c# 中使用它的代码？我想你已经理解我了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:45:39.583

我找到了答案：

```
 string a = "image2";   
        Image ima = this.FindName(a) as Image;
        ima.Visibility = System.Windows.Visibility.Collapsed;

        string b = "checkBox1";
        CheckBox ch = this.FindName(b) as CheckBox;
        ch.IsChecked = true; 
```

# macos - 链接到 GameKit 和 StoreKit 框架时，Mac OS X 上的运行时动态链接器警告

> ID：13811033
> 
> 赞同：5
> 
> 时间：2012-12-10T23:23:43.090
> 
> 标签：macos, linker, warnings, gamekit, storekit

使用 Mac OS X 10.8.2 和 Xcode 4.5.2 如果您创建一个新的 Mac OS X Cocoa 应用程序，然后添加指向 GameKit 和 StoreKit 框架的链接，您会在应用程序启动时收到以下警告：

```
objc[64970]: Class CKClientDispatch is implemented in both
/System/Library/PrivateFrameworks/CommerceKit.framework/Versions/A/CommerceKit
and
/System/Library/Frameworks/StoreKit.framework/Versions/A/StoreKit.
One of the two will be used. Which one is undefined. 
```

任何人都知道为什么会发生这种情况，或者如何链接到这两个框架而不打扰动态链接器？

# javascript - 从数组插入mongodb失败

> ID：13811036
> 
> 赞同：0
> 
> 时间：2012-12-10T23:23:57.723
> 
> 标签：javascript, json, mongodb, insert, bson

我在 ubuntu 服务器上使用 MongoDB。我想生成我的文档并将它们存储在一个数组中。之后，我想将这些文档插入我的集合中，但不知何故，集合总是空的。重要的是，数据生成与存储分开进行测量。我为此使用了javascript。但是，这是一些代码：

```
for (i=0; i<amount; i++)
{                                           
doc = "datetime:" + Math.floor((1262300400+Math.random()%(1356994799-1262300400+1))) + sourceport: " + Math.floor((Math.random()*30000)+2000) ;
myarray[i]=doc;
}

...

for (n=0;n<=myarray.length-1;n++)
    {
        obj_doc = eval('{' + myarray[n] +'}');
        eval('var obj='+myarray[n]);
        obj_doc = '{' + myarray[n] +'}';
        db.mycol.insert(obj_doc);
    } 
```

如果没有 rnd() 函数，它甚至无法工作。db.mycol.stats() 总是返回“count:0”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:20:05.140

建立文档以作为对象插入，而不是字符串和`eval`：

```
for (i=0; i<amount; i++) {                                           
    doc = {
        datetime: Math.floor((1262300400+Math.random()%(1356994799-1262300400+1))),
        sourceport: Math.floor((Math.random()*30000)+2000)
    };
    myarray[i]=doc;
}

...

db.mycol.insert(myarray); 
```

# youtube-api - Youtube Analytics API 人口统计作为原始计数（不是百分比）

> ID：13811044
> 
> 赞同：0
> 
> 时间：2012-12-10T23:24:43.283
> 
> 标签：youtube-api, analytics

有谁知道获取视频和/或频道的人口统计（年龄/性别）的观看次数的方法？

YouTube 分析 API 仅提供按百分比（登录用户）的细分，这很好，但根据我们的要求，我们需要原始计数。不幸的是，我们无法从百分比中准确得出原始计数，因为 api 似乎没有给我们登录用户的数量或足够的精度。

任何指导将不胜感激！

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:36:30.257

抱歉，我认为我们不会在 Web 界面或 API 上提供这些原始计数——我刚刚检查了 Web 界面，它也只显示百分比。随时提交[功能请求](https://code.google.com/p/gdata-issues/issues/entry?template=YouTube%20%28Enhancement%20Request%29)，我会看看我们是否有机会开始公开更多细节。

# java - 从 Applet 调用本地服务

> ID：13811046
> 
> 赞同：0
> 
> 时间：2012-12-10T23:24:53.057
> 
> 标签：java, web-services, applet, policy, wsimport

从我读过的所有内容来看，applet 可以调用它自己的服务器提供的任何服务。这就是为什么我编写并启动了一项服务（在 netbeans 中），我可以在我的浏览器中看到它

```
http://localhost:12345/server?wsdl 
```

为了连接到服务，我使用了 wsimport 并将文件放在我的小程序目录中，然后我清理并构建了项目。

如果我同时启动（服务+小程序）它工作正常，当我删除策略文件时，它不会。

```
Caused by: java.security.AccessControlException: access denied                       
("java.util.PropertyPermission" "xml.catalog.ignoreMissing" "read") 
```

我在 Netbeans 中启动了服务并将小程序放在我的本地服务器（xampp）上，我可以通过它访问它

```
http://localhost/sql/mainapplet.html 
```

但什么也没发生。我做错了什么？

这是代码：

服务器项目：

CP.java

```
import javax.jws.WebService;
import javax.jws.soap.SOAPBinding;
import javax.jws.soap.SOAPBinding.Style;

@WebService(targetNamespace = "GUI")
@SOAPBinding(style = Style.RPC)
public class CP {
public String getResults(String u, String p, String s, String se, String q) {
  ...
 }
} 
```

服务器.java

```
public class Server {
public static void main(String[] args) {
    CP server = new CP();
    Endpoint e = Endpoint.publish("http://localhost:12345/server", server);
 }
} 
```

客户项目：CP.java

```
package gui;

import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebResult;
import javax.jws.WebService;
import javax.jws.soap.SOAPBinding;
import javax.xml.ws.Action;

/**
 * This class was generated by the JAX-WS RI.
 * JAX-WS RI 2.2.4-b01
 * Generated source version: 2.2
 * 
 */
@WebService(name = "CP", targetNamespace = "GUI")
@SOAPBinding(style = SOAPBinding.Style.RPC)
public interface CP {

/**
 * 
 * @param arg4
 * @param arg3
 * @param arg2
 * @param arg1
 * @param arg0
 * @return
 *     returns java.lang.String
 */
@WebMethod
@WebResult(partName = "return")
@Action(input = "GUI/CP/getResultsRequest", output = "GUI/CP/getResultsResponse")
public String getResults(
    @WebParam(name = "arg0", partName = "arg0")
    String arg0,
    @WebParam(name = "arg1", partName = "arg1")
    String arg1,
    @WebParam(name = "arg2", partName = "arg2")
    String arg2,
    @WebParam(name = "arg3", partName = "arg3")
    String arg3,
    @WebParam(name = "arg4", partName = "arg4")
    String arg4);

} 
```

CPService.java

```
package gui;

import java.net.MalformedURLException;
import java.net.URL;
import javax.xml.namespace.QName;
import javax.xml.ws.Service;
import javax.xml.ws.WebEndpoint;
import javax.xml.ws.WebServiceClient;
import javax.xml.ws.WebServiceException;
import javax.xml.ws.WebServiceFeature;

/**
 * This class was generated by the JAX-WS RI.
 * JAX-WS RI 2.2.4-b01
 * Generated source version: 2.2
 * 
 */
@WebServiceClient(name = "CPService", targetNamespace = "GUI", wsdlLocation =     "http://localhost:12345/server?wsdl")
public class CPService
extends Service {

private final static URL CPSERVICE_WSDL_LOCATION;
private final static WebServiceException CPSERVICE_EXCEPTION;
private final static QName CPSERVICE_QNAME = new QName("GUI", "CPService");

static {
    URL url = null;
    WebServiceException e = null;
    try {
        url = new URL("http://localhost:12345/server?wsdl");
    } catch (MalformedURLException ex) {
        e = new WebServiceException(ex);
    }
    CPSERVICE_WSDL_LOCATION = url;
    CPSERVICE_EXCEPTION = e;
}

public CPService() {
    super(__getWsdlLocation(), CPSERVICE_QNAME);
}

public CPService(WebServiceFeature... features) {
    super(__getWsdlLocation(), CPSERVICE_QNAME, features);
}

public CPService(URL wsdlLocation) {
    super(wsdlLocation, CPSERVICE_QNAME);
}

public CPService(URL wsdlLocation, WebServiceFeature... features) {
    super(wsdlLocation, CPSERVICE_QNAME, features);
}

public CPService(URL wsdlLocation, QName serviceName) {
    super(wsdlLocation, serviceName);
}

public CPService(URL wsdlLocation, QName serviceName, WebServiceFeature... features) {
    super(wsdlLocation, serviceName, features);
}

/**
 * 
 * @return
 *     returns CP
 */
@WebEndpoint(name = "CPPort")
public CP getCPPort() {
    return super.getPort(new QName("GUI", "CPPort"), CP.class);
}

/**
 * 
 * @param features
 *     A list of {@link javax.xml.ws.WebServiceFeature} to configure on the proxy.  Supported features not in the <code>features</code> parameter will have their default values.
 * @return
 *     returns CP
 */
@WebEndpoint(name = "CPPort")
public CP getCPPort(WebServiceFeature... features) {
    return super.getPort(new QName("GUI", "CPPort"), CP.class, features);
}

private static URL __getWsdlLocation() {
    if (CPSERVICE_EXCEPTION!= null) {
        throw CPSERVICE_EXCEPTION;
    }
    return CPSERVICE_WSDL_LOCATION;
 }

} 
```

MainApplet.java

```
package gui;

public class MainApplet extends javax.swing.JApplet {
...
    CPService cps = new CPService();
    CP cproc = cps.getCPPort();
    txtResult.setText(cproc.getResults("a","b","j","s", "q"));
} 
```

HTML 文件：

```
<HTML>
<BODY>
<P>
<APPLET codebase="client/build/classes" code="gui/MainApplet.class"     archive="client/dist/client.jar" width=1400 height=800></APPLET>
</P>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:53:45.953

问题已解决：我必须像这样嵌入小程序

```
<applet archive="client.jar" code="gui.MainApplet" width="1600" height="1400"></applet> 
```

我不得不签署我的小程序（仍然不知道为什么）。

# c# - 如何在 EntityFramework 4.1 中共享没有 CodeFirst 的 dbContext？

> ID：13811049
> 
> 赞同：3
> 
> 时间：2012-12-10T23:25:10.213
> 
> 标签：c#, asp.net-mvc-3, oop, entity-framework-4.1

长期潜伏者，第一次海报。

我在这里找到了大量关于如何使用 CodeFirst 在存储库之间共享 dbContext 的内容，但我似乎无法将其与我正在处理的项目联系起来，该项目不使用代码优先或依赖注入。

首先，了解一下该项目的背景知识，以确保我以正确的方式处理这个问题。我参加了这个项目，他们首先使用的是 EF4 和数据库。我远非 EF 专家，但我现在摸索了几个不同的项目。

我不得不实现几个不同的要求，这些要求迫使我在他们的“服务”级别和数据库之间进行干预。换句话说，他们的对象直接调用 EF db 对象，例如

```
using (var db = new MYDB()){
  var bar = db.Foo
   .Include("Transactions")
   .Include("blah")
   .Where(...);

  //do stuff

  db.SaveChanges();
} 
```

我必须做的一件事是跟踪所有发生变化的字段，所以我抽象了一个关卡，现在我们有了

```
FooObject bar = GetFooObject(...);
bar.Title = "asdfasdf";
//do stuff to bar
bar.Save(); 
```

它将所有字段包装到属性中，以便我可以注销任何更改。在 bar.save 中，我打开一个 db 上下文，获取现有的 Foo 或创建一个新的，分配所有值，然后调用 db.SaveChanges。

事实证明，他们还基于 Transactions 和 blah 进行大量子查询。所以当他们做类似的事情时

```
var bar = GetFooObject(...);

var t = new Transaction();
//do stuff to t
...
bar.Transactions.Add(t);
bar.Save(); 
```

我遇到各种上下文错误，说 dbcontext 不再可用等。我完全理解。我不知道如何解决它。我已经看到了很多关于在使用之前创建 dbContext 然后将其传入的东西，但我似乎无法找出正确的方法来做到这一点，因此它可以与我的代码一起使用。

我最近的尝试基于几个关于如何将 DBContext 转换为 ObjectContext 的示例（这又基于我发现的所有关于共享连接引用 ObjectContext 而不是 DBContext 的示例）看起来像这样：

```
using (var db = ((IObjectContextAdapter)(new FooDB())).ObjectContext)
  {
using (var context = new DbContext(db, false))
{
var bar = FooObject.GetFooObject(fooId);
Result r = bar.ProcTrans(amount,
                        transDate,
                            db.TransactionTypes
                              .Include(tt => tt.Description)
                              .SingleOrDefault(tt => tt.TypeID == transactionTypeId),
                            employeeId,
                            comment); 
```

但是使用此代码时，我收到一个错误，即我没有 TransactionTypes 的定义。它无法识别我的任何数据库对象。

如何创建 DBContext 并将其传递给我的 FooObject 以便我可以保持打开状态以进行相关更新？我什至不知道我问的问题是否完全正确。我如何在不重新编码整个事情的情况下弥合这个差距？

## **编辑**

这是我打开这个问题后发现的一些东西。也许两者中的一个会成功。

好吧，这个发现肯定更符合重新编码整个事情的路线，但我在寻找有关“做更改跟踪”的链接时确实发现了这一点，并带有触发器响应。

[实体框架中的 poco 第 3 部分：使用 poco 进行更改跟踪](http://blogs.msdn.com/b/adonet/archive/2009/06/10/poco-in-the-entity-framework-part-3-change-tracking-with-poco.aspx)

我刚刚发现[如何在 asp.net 中的各种模型存储库之间共享数据上下文，](https://stackoverflow.com/questions/2030665/how-do-i-share-a-data-context-across-various-model-repositories-in-asp-net-mvc-u)这可能是一种简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:55:02.990

我会留下对象上下文的东西。

我在 MVC 应用程序中实现共享 DBContext 的方式是这样的：

```
public class BaseRepository
{
    public static MyAppContext GetDataContext()
    {
        string ocKey = "ocm_" + HttpContext.Current.GetHashCode().ToString("x");

        if (!HttpContext.Current.Items.Contains(ocKey))
            HttpContext.Current.Items.Add(ocKey, new MyAppContext());

        return HttpContext.Current.Items[ocKey] as MyAppContext;
    }
} 
```

然后每当我需要进行数据库操作时，我可以调用：

```
BaseRepository.GetDataContext().YourObjects.Where(x => ...);
....
BaseRepository.GetDataContext().SaveChanges(); 
```

只要您仍然处于相同的 HTTP 上下文中，您将共享相同的 DB 上下文。不完全确定这会消除您遇到的错误，但它至少是一种分享您的上下文的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:46:37.810

对我来说，答案与我发布的一个链接有关。

[如何在 asp.net 中的各种模型存储库之间共享数据上下文](https://stackoverflow.com/questions/2030665/how-do-i-share-a-data-context-across-various-model-repositories-in-asp-net-mvc-u)

当我看到这些类型的注入答案时，让我感到震惊的是，它们在语法上对我不起作用。我没有 DataContext 也没有任何 Repository 模型，但我决定在概念上尝试一下，并将 Context 到处传递。

基本上，我将连接传递给 Object 构造函数或创建新对象的任何工厂方法，并将其存储在局部变量中，有点像这样。

```
public class Foo{
    private MyDB _db;
    private Foo _foo;

    public FooObject(MyDB dbContext)
    {
        _db = dbContext;
    }

    public static FooObject GetFooObject(int FooID, MyDB db){
        bool closeFlag = false;

        //if null was passed in, then we will create our own connection and manage it
        if (db == null)
        {
            _db = new MyDB();
            closeFlag = true;
        } else {
            //otherwise, we set our local variable
            _db = db;
        }

        //from now on, all queries are done using the local variable
        var _f = _db.Foos
            .Include("x")
            .Include("y")
            .Include("z")
            .SingleOrDefault(f => f.FooID == FooID);

        var fo = FooObjectFromFoo(_f, db);

        if (closeFlag)
            db.Dispose();

        return fo;
    }

    // This copies all of the values from Foo and puts the into a FooObject
    public static FooObject FooObjectFromFoo(Foo f, MyDB dbContext){
        if (l == null)
            return null;

        // note that we pass the dbContext to the constuctor
        FooObject _f = new FooObject(dbContext){
            _foo = f,
            ...
            //note x, y, and z are the other EF "table references".  I'm not sure what you technically call them.
            x = f.x,
            y = f.y,
            z = f.z
        };

        return _f;
    }

    //we call this to save the changes when we're done
    public bool Save(){
        bool close = false; 
        bool retval = true;

        MyDB db = _db;

        //remember we set _db in the constructor            
        if (db == null) {
            db = new MyDB();
            close = true;
        }

        try
        {
            // a reference to this row should have been saved in _foo if we loaded it from the db.
            // take a look at FooObjectFromFoo
            if (_foo == null)
            {
                _foo = db.Foos.SingleOrDefault(x => x.FooID == _FooID);
            }
            if (_foo == null)
            {
                _foo = new Foo();
            }
            //copy all my object values back to the EF Object
            _foo.blah = blah;
            _foo.x = x;
            _foo.y = y;
            try
            {
                //save the new one.
                db.SaveChanges();

            }
            catch (DbEntityValidationException dbEx)
            {
                TransactionResult.AddErrors(dbEx);
                retval = false;
            }
        }
        catch { throw new Exception("Something went wrong here.");}
        finally { if (close) db.Dispose(); } //if we created this connection then let's close it up.
    }
} 
```

现在在我的方法中，我总是使用本地 _db 连接。在我的 FooObject 之外，我们有一个 FooService，它是从所有控制器调用的。因此，当 FooService 被实例化时，我使用下面的类创建了一个数据库连接。如果我理解正确，这应该给我一个在我的服务请求期间存在的上下文，在我的情况下，它相当可靠地模仿了请求。

```
namespace My.Domain
{
  public class MyDataContext : IDisposable  {
    private MyDB _context;
    private bool _ownContext;

    public MyDataContext(){
        _context = new MyDB();
        _ownContext = true;
    }

    public MyDataContext(MyDB db)
    {
        _context = db;
        _ownContext = false;
    }

    public MyDB Context
    {
        get { if (_context == null) { _context = new MyDB(); _ownContext = true; } return _context; }
        set { _context = value; }
    }

    public bool OwnContext
    {
        get { return _ownContext; }
        set { _ownContext = value; }
    }

    public void Dispose()
    {
        if (_context != null && _ownContext)
            _context.Dispose();
    }
  }
} 
```

在 FooService 我做这样的事情。

```
 private MyDb db;

    public FooService (){
        var _db = new MyDataContext();
        db = _db.Context;
    }

    public Result ProcessTransaction(int FooId, string comment)
    {
        var foo = FooObject.GetFooObject(FooId,db);

        Result r = foo.ProcessTransaction(comment);

        if (r.Success)
            foo.Save();

        return r;
    } 
```

我认为要做到“正确”，我应该只在关闭上下文时保存更改......但是我的 FooObject 上已经有一个 Save 方法，所以我只在那里调用 db.SaveChanges 。

我知道有很多方法可以改进这一点，我相信随着时间的推移我会实施其中的一些，但就目前而言，这已经成功了。这就是我解决所有“上下文不再可用”的方法，并且该对象来自不同的上下文错误。

在查看其他人的示例时，让我感到困惑的是他们都在使用 CodeFirst 和某种依赖注入。他们通常使用存储库模式，而我们没有。但事实证明，我只需要实现我自己破解的本地化版本的连接注入！:)

# php - jQuery ajax 暴露 php 文件

> ID：13811052
> 
> 赞同：0
> 
> 时间：2012-12-10T23:25:27.033
> 
> 标签：php, jquery, ajax

我有以下代码

```
$.ajax({
    type:'GET',
    url:"processes/get_user_menu.php",
    success: function(output) {
        $("#likes").html(output);
    }
}); 
```

我想知道是否有另一种方法可以做到这一点，以便不暴露 php 文件位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:35:47.483

您绝对*无法*阻止公开请求的 php 文件。任何类型的任何浏览器都能够记录 ajax 请求 URL，因此用户可以轻松查看正在请求的 URL。此外，没有什么可以阻止任何用户代理将`HTTP_X_REQUESTED_WITH`标头设置为它想要的任何内容。除非您可以不受限制地这样做，否则不要准备向客户端公开 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:52:23.090

根据您使用的内容，您可以隐藏您的`.php`扩展程序并使用文件夹样式的地址，带或不带结束斜线，但仅此而已。 [**在php.net**](http://php.net/manual/en/security.hiding.php)[上阅读此内容](http://php.net/manual/en/security.hiding.php)**（或使用您的框架实用程序，如果您使用的是框架）**

# php - PHP：var_dump 从 json_decode 吐出错误的格式

> ID：13811057
> 
> 赞同：1
> 
> 时间：2012-12-10T23:25:48.440
> 
> 标签：php, json, var-dump

我的代码：

```
$json_data = file_get_contents($json_url,0,null,null);  
$json_output = json_decode($json_data); 
var_dump($json_output); 
```

这是 var_dump 在一大行中吐出的内容，根本没有格式化：

```
object(stdClass)#1 (1) { ["timetableresult"]=> object(stdClass)#2 (1) { ["ttitem"]=> array(17) { [0]=> object(stdClass)#3 (1) { ["segment"]=> array(8) { [0]=> object(stdClass)#4 (3) { ["segmentid"]=> object(stdClass)#5 (2) { ["mot"]=> object(stdClass)#6 (3) { ["@displaytype"]=> string(1) "G" ["@type"]=> string(1) "G" ["#text"]=> string(5) "GÃ¥ng" } ["distance"]=> int(1008) } ["departure"]=> object(stdClass)#7 (2)... etc.etc. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T23:29:16.937

`var_dump`打印换行符。浏览器不呈现换行符。

尝试`echo "<pre>"; var_dump($json_output); echo "</pre>";`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:30:01.677

您正在执行 var 转储，要访问您可以执行以下操作的属性： $seg_id = $json_output->timetableresult->ttitem->segment[0]->segmentid; 我实际上并没有仔细查看您的 json 的结构，但这大约是您想要的。

或者...如果你这样做 foreach($json_output->timetableresult->ttitem as $item) { var_dump($item); }

您将开始了解如何访问所需的所有部分。

# ios - 设置 PhoneGap 和 Dreamweaver CS 5.5（iOS 开发者工具）

> ID：13811059
> 
> 赞同：0
> 
> 时间：2012-12-10T23:25:58.040
> 
> 标签：ios, cordova, sdk, path, dreamweaver

我正在尝试结合 phonegap 为 Dreamweaver CS 5.5 配置应用程序框架。在我的 Mac HD 上，我有一个名为“Developer”的文件夹，其中包含 XCode。

在 Dreamweaver 中，在“站点”>“移动应用程序”>“配置应用程序框架”下，出现了询问 Android SDK 路径和 iOS 开发人员工具路径的窗口。在第二个字段中，我输入“/Developer”

当我点击“保存”时，我收到一条错误消息，提示“未安装 Android 或 iOS SDK。您需要设置至少一个 SDK 才能构建应用程序。”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:04:31.897

感谢 Tribe on Mars 找到了我的答案

[http://tribeonmars.blogspot.com/2012/03/dreamweaver-and-xcode-and-developer.html](http://tribeonmars.blogspot.com/2012/03/dreamweaver-and-xcode-and-developer.html)

> 由于 Xcode 4.3 删除了 Developer 文件夹并将其放在 /Applications/Xcode.app/Contents/Developer 下。

# javascript - 使用 JavaScript 加载文件

> ID：13811062
> 
> 赞同：0
> 
> 时间：2012-12-10T23:26:12.107
> 
> 标签：javascript, graphics, opengl-es, webgl, vertex

我正在尝试将自己的文件加载到我的 .js 文件中，但我似乎找不到任何可以很好地解释它的代码。目前我有一些代码可以使用 webGL 绘制一个平面三角形。现在我想加载一个模型格式（3DS、LAY、VW、OBJ 等），但是我找不到任何代码来加载一个简单的文件并将其自身存储在一个变量中，现在这个 javaScript 文件用于当然是一个 html 文件，但是这个 html 文件不会上传给随机的人使用，所以没有必要谈论整个安全文件的加载，我只想尝试将本地文件加载到变量中，文件名也将在 javaScript 文件中指定。

只是来自 OBJ 文件的一些简单文本

```
...
v  -0.3393 0.0000 -12.3639
v  1.8409 3.7515 -8.3253
v  2.8119 0.0000 -11.9490
v  -0.3393 3.7515 -8.6123
v  0.8700 -0.0000 -4.7016
v  -0.3393 -0.0000 -4.8608
...
vn -0.0000 0.0000 -1.0000
vn 0.0152 0.9983 -0.0567
...
vt 0.0000 0.0000 0.0000
vt 0.2500 0.0417 0.0000
...
f 1/1/1 2/2/2 3/3/3 
f 1/1/1 4/4/4 2/2/2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:56:25.640

先生，Ajax 是 javascript 在网页上“加载”基于文本的文件的方式。

我推荐[一个简单的库](http://microjs.com/#ajax)来帮助你，因为跨浏览器的兼容性可能很棘手。

比如说[这个](https://github.com/ForbesLindesay/ajax)使用[jQuery API](http://api.jquery.com/jQuery.ajax/)的 Ajax。

```
ajax({
  url: "/models/my_snazzy_model.obj",
  success: function(data) {
    console.log(data); // data is the text of your file. Woot!
  }
}); 
```

# mysql - 将本地 mysql 数据库复制到 Amazon RDS

> ID：13811063
> 
> 赞同：3
> 
> 时间：2012-12-10T23:26:13.137
> 
> 标签：mysql, amazon-web-services, backup, amazon-rds, database-administration

我有一个本地 MySql 数据库并希望将其复制到 Amazon RDS 实例中。Amazon RDS 实例用作备份。

我查看了 AWS 控制台，没有找到任何配置它的地方。有人知道该怎么做吗？非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:40:12.760

不幸的是，您无法在 RDS 中执行此操作。如果你想做这种事情，你必须在 EC2 实例上实现你自己的 mysql 服务器，然后你将完全控制服务器，但也有责任根据需要配置备份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T22:38:58.243

Tungsten 可以帮助您从本地复制到 RDS。我仍然没有尝试过，但下面的指南似乎很清楚。

[https://docs.continuent.com/wiki/display/TEDOC/Replicating+from+MySQL+to+Amazon+RDS](https://docs.continuent.com/wiki/display/TEDOC/Replicating+from+MySQL+to+Amazon+RDS)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T10:51:24.710

支持。

> 您可以使用复制将数据从 Amazon RDS MySQL 5.6 数据库实例导出到在 Amazon RDS 外部运行的 MySQL 实例。Amazon RDS 外部的 MySQL 实例可以在您的数据中心本地运行，也可以在 Amazon EC2 实例上运行。Amazon RDS MySQL 数据库实例必须运行版本 5.6.13 或更高版本。Amazon RDS 外部的 MySQL 实例必须运行与 Amazon RDS 实例相同的版本或更高版本。

[http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/MySQL.Procedural.Importing.NonRDSRepl.html](http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/MySQL.Procedural.Importing.NonRDSRepl.html)

免责声明：

> 仅在从 Amazon RDS MySQL 数据库实例导出数据库期间，才支持复制到在 Amazon RDS 外部运行的 MySQL 实例。当数据已导出并且应用程序可以开始访问外部实例时，应终止复制。

因此，如果它是永久性的，使用[tungsten-replicator](https://code.google.com/p/tungsten-replicator/)会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-25T18:42:29.420

您还可以设置从本地 MySQL 到 RDS MySQL 或 MariaDB 的持续复制：

[https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/MySQL.Procedural.Importing.External.Repl.html](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/MySQL.Procedural.Importing.External.Repl.html)

> 您可以在 Amazon RDS MySQL 或 MariaDB 数据库实例与 Amazon RDS 外部的 MySQL 或 MariaDB 实例之间设置复制。使用本主题中的过程在所有情况下配置复制，但外部实例为 MariaDB 版本 10.0.2 或更高版本且 Amazon RDS 实例为 MariaDB 时除外。在这种情况下，请使用将基于 GTID 的复制配置到 Amazon RDS MariaDB 数据库实例中的过程来设置基于 GTID 的复制。

# uiview - 如何使用 Quartz2D 绘制子视图

> ID：13811067
> 
> 赞同：1
> 
> 时间：2012-12-10T23:26:38.083
> 
> 标签：uiview, subview, quartz-2d, drawrect

**我之前所做的：**
在 XCode 中创建了一个新项目来测试 Quartz2D。
创建了一个 UIView，覆盖了 drawRect 并用它制作了一些图形。

**我想做的事：**
把这个 UIView 集成到一个更大的项目中。层次结构是这样的：
View1Controller->View1->View2->View3 ( *A view in a view in a view* )
我希望我的 View3 显示这些图形。

**我尝试了什么：**
根据实现UIView接口的TestProject创建了一个新类。
...用 myClass 替换了父级中 View3 的旧 UIView。但在那之后我无法链接到我的故事板 UIView。
...没有替换它，而是在父构造函数中为它分配了 myClass（带有 CGRect 的构造函数）。
但我看不到我的图形。

我对 Objective-C 非常陌生，并且我已经阅读了一些类似的答案：“您应该简单地覆盖 View3 的 drawRect() 函数”。我很困惑如何做到这一点，详细的答案会很有帮助。谢谢你。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:34:50.787

只需将您的自定义 UIView 作为子视图添加到视图控制器或其子视图之一。

```
MyView *myView = [[MyView alloc] initWithFrame: CGRectMake(0,0,100,100)];
[self.view addSubView:myView]; 
```

# javascript - 瓷砖地图产生奇怪的布局

> ID：13811074
> 
> 赞同：0
> 
> 时间：2012-12-10T23:27:21.103
> 
> 标签：javascript, html, map, 2d

我试图为我的基于 2d 瓷砖的游戏整理我的瓷砖地图，并且遇到了麻烦！

我使用 javascript 和 html5 的画布来构建游戏。我使用平铺编辑器来构建我的地图。将它们保存为 .tmx 文件构建地图后，我将数组数据复制到 javascript 中，如下所示：

```
function loadMap(map) {
    if (map == 1) {
        return  [
            [1,2,3,4,3,4,3,4,5,6,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [17,18,19,20,19,20,19,20,21,22,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [33,34,35,36,35,36,35,36,37,38,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [49,50,51,52,51,52,51,52,53,54,1,1,1,1,1,1,1,1,1,1,1,1,1,197,198,199,1,1,1,1],
            [65,66,67,68,146,147,67,68,69,70,1,1,1,1,1,1,1,1,216,217,1,1,1,213,214,215,1,1,1,1],
            [81,82,83,161,162,163,164,84,85,86,1,1,1,1,1,1,1,1,232,233,1,1,1,229,230,231,1,1,1,1],
            [97,98,99,177,178,179,180,100,101,102,1,1,1,1,59,1,1,1,248,249,1,1,1,245,246,247,1,1,1,1],
            [1,1,238,1,1,1,1,239,240,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [216,217,254,1,1,1,1,255,256,1,204,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [232,233,1,1,1,117,118,1,1,1,220,1,1,119,120,1,1,1,1,1,1,1,1,1,1,1,119,120,1,1],
            [248,249,1,1,1,133,134,1,1,1,1,1,1,135,136,1,1,1,1,1,1,59,1,1,1,1,135,136,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,216,217,1,1,1,1,1,1,60,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,232,233,1,1,1,1,1,1,1,1,1,1,1,1,1,1,204,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,248,249,1,1,1,1,1,1,1,1,1,1,1,1,1,1,220,1,1,1,1,1,1,216,217,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,149,150,151,1,1,1,1,1,1,1,1,1,1,232,233,1,1,1],
            [12,12,12,12,12,12,12,13,1,1,1,1,165,166,167,1,1,1,1,1,1,119,120,1,1,248,249,1,1,1],
            [28,28,28,28,28,28,28,29,1,1,1,1,181,182,183,1,1,1,1,1,1,135,136,1,1,1,1,1,1,1],
            [44,44,44,44,44,15,28,29,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,27,28,29,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,27,28,29,1,1,1,1,1,1,1,1,1,59,1,1,197,198,199,1,1,1,1,119,120,1],
            [1,1,1,1,1,27,28,29,1,1,216,217,1,1,1,1,1,1,1,1,213,214,215,1,1,1,1,135,136,1],
            [1,1,1,1,1,27,28,29,1,1,232,233,1,1,1,1,1,1,1,1,229,230,231,1,1,1,1,1,1,1],
            [1,1,1,1,1,27,28,29,1,1,248,249,1,1,1,1,1,1,1,1,245,246,247,1,1,1,1,1,1,1],
            [1,1,1,197,198,199,28,29,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,213,214,215,28,29,1,1,1,1,1,60,1,1,1,1,204,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,229,230,231,28,29,1,1,1,1,1,1,1,1,1,1,220,1,1,1,1,119,120,1,1,1,1,1],
            [1,1,1,245,246,247,28,29,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,135,136,1,1,60,1,1],
            [1,1,1,1,1,27,28,29,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,1,1,1,1,27,28,29,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
        ];
    }
} 
```

我将所有不同的图块放在一个文件夹中，我使用此循环加载：

```
for (x = 0; x <= 256; x++) {
    var imageObj = new Image(); // new instance for each image
    imageObj.src = "images/prototype/"+x+".jpg";
    mapTiles.push(imageObj);
} 
```

这是我显示地图的循环：

```
 for (x = 0; x <= viewWidth; x++){
            for (y = 0; y <= viewHeight; y++){
            var theX = x * 32;
            var theY = y * 32;
            context.drawImage(mapTiles[board[x+viewX][y+viewY]], theX, theY, 32, 32);
        }
    } 
```

出于某种原因，当我打开游戏而不是看到我制作的平铺地图时：

![平铺地图](../Images/e1e06597bb3447c8df5396c2c7cdc057.png)

我把它作为我的地图：

![实际游戏](../Images/6fb5ab51f5209af12af5f0346ea2c5de.png)

你们对为什么会发生这种情况有任何想法吗>

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:25:39.393

```
context.drawImage(mapTiles[board[x+viewX][y+viewY]], theX, theY, 32, 32); 
```

我不知道 viewX 和 viewY 是什么，但你有没有试过：

```
context.drawImage(mapTiles[board[y+viewY][x+viewX]], theX, theY, 32, 32); 
```

您也可能在其他地方颠倒了 x 和 y。

# c# - 在 WCF 中使用基本 http 身份验证时出现 FaultException

> ID：13811076
> 
> 赞同：-1
> 
> 时间：2012-12-10T23:27:33.267
> 
> 标签：c#, .net, wcf, authentication, iis

客户`App.config`：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <wsHttpBinding>
                <binding name="WSHttpBinding_INewsletterService">
                    <security mode="Message">
                        <message clientCredentialType="UserName" />
                    </security>
                </binding>
            </wsHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://127.0.0.1:8001/NewsletterService.svc/username"
                      binding="wsHttpBinding"
                      bindingConfiguration="WSHttpBinding_INewsletterService"
                      behaviorConfiguration="ClientCertificateBehavior"
                      contract="NewsletterServiceReference.INewsletterService"
                      name="WSHttpBinding_INewsletterService">
              <identity>
                <dns value="Newsletter"/>
              </identity>
            </endpoint>
        </client>
      <behaviors>
        <endpointBehaviors>
          <behavior name="ClientCertificateBehavior">
            <clientCredentials>
              <serviceCertificate>
                <authentication certificateValidationMode="PeerOrChainTrust"/>
              </serviceCertificate>
            </clientCredentials>
          </behavior>
        </endpointBehaviors>
      </behaviors>

    </system.serviceModel>
</configuration> 
```

主持人`Web.config`：

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings>
    <add name="NewsletterEntities" connectionString="metadata=res://*/NewsletterDAL_EF.csdl|res://*/NewsletterDAL_EF.ssdl|res://*/NewsletterDAL_EF.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=(local)\SQLEXPRESS;Initial Catalog=Newsletter;Integrated Security=True;Pooling=False;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient"/>
  </connectionStrings>
  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5"/>
  </system.web>
  <system.serviceModel>
    <services>
      <service name="WCFHost.NewsletterService"
               behaviorConfiguration="NewsletterServiceBehavior">
        <endpoint address="username"
                  binding="wsHttpBinding"
                  contract="WCFHost.INewsletterService"
                  bindingConfiguration="Binding">
          <identity>
            <dns value="Newsletter"/>
          </identity>

        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8001/WcfServiceLibrary/service" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <bindings>
      <wsHttpBinding>
        <binding name="Binding">
          <security mode="Message">
            <message clientCredentialType="UserName"/>
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="NewsletterServiceBehavior">
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <serviceCredentials>
            <userNameAuthentication userNamePasswordValidationMode="Custom"
                                    customUserNamePasswordValidatorType="WCFHost.CustomUserNameValidator, WCFHost"/>
            <serviceCertificate findValue="Newsletter" storeLocation="LocalMachine" storeName="TrustedPeople" x509FindType="FindBySubjectName"/>
          </serviceCredentials>
          <serviceMetadata httpGetEnabled="true"/>
        </behavior>
        <behavior>
          <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <protocolMapping>
        <add binding="basicHttpsBinding" scheme="https" />
    </protocolMapping>    
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true"/>
  </system.webServer>

</configuration> 
```

`CustomUserNameValidator.cs`：

```
using System;
using System.IdentityModel.Selectors;
using System.ServiceModel;

namespace WCFHost
{
    public class CustomUserNameValidator : UserNamePasswordValidator
    {
        public override void Validate(string userName, string password)
        {
            if (null == userName || null == password)
            {
                throw new ArgumentNullException();
            }

            if (!(userName == "username" && password == "password"))
            {
                throw new FaultException("Unknown Username or Incorrect Password");
            }
        }
    }
} 
```

`MainWindow.xaml.cs`：

```
using Newsletter.Common;
using Newsletter.UI.NewsletterServiceReference;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows;

namespace Newsletter.UI
{
    public partial class MainWindow : Window
    {
        private List<MessageDTO> _messages;
        private List<RecipientDTO> _recipients;
        private NewsletterServiceClient _client;

        public MainWindow()
        {
            InitializeComponent();
            _recipients = new List<RecipientDTO>();
            _client = new NewsletterServiceClient();
            _client.ClientCredentials.UserName.UserName = "username";
            _client.ClientCredentials.UserName.Password = "password";
        }

        [...]

        private async void MainWindowLoadedAsync(object sender, RoutedEventArgs e)
        {
            await _client.AddMailingListAsync("All Recipients"); //Exception here
        }

        [...]
} 
```

我得到的例外：

```
System.ServiceModel.FaultException`1 was unhandled by user code
  HResult=-2146233087
  Message=The underlying provider failed on Open.
  Source=System.ServiceModel
  Action=http://schemas.microsoft.com/net/2005/12/windowscommunicationfoundation/dispatcher/fault
  StackTrace:
       at System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message reply, MessageFault fault, String action, MessageVersion version, FaultConverter faultConverter)
       at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
       at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)
       at System.ServiceModel.Channels.ServiceChannelProxy.TaskCreator.<>c__DisplayClass2.<CreateTask>b__1(IAsyncResult asyncResult)
       at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
    --- End of stack trace from previous location where exception was thrown ---
       at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
       at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
       at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
       at Newsletter.UI.MainWindow.<MainWindowLoadedAsync>d__0.MoveNext() in c:\Users\Pawel\Dropbox\VS12_projects\Newsletter_2_new\Newsletter.UI\MainWindow.xaml.cs:line 43
  InnerException: 
```

我究竟做错了什么？

更新：InnerException 消息：

```
Cannot open database "Newsletter" requested by the login. The login failed.
Login failed for user 'IIS APPPOOL\.NET v4.5'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:52:24.463

为了解决这个问题，我必须将 IIS AppPool 设置为数据库所有者。

# android - Android 4.0 EditText 没有软键盘和光标定位

> ID：13811080
> 
> 赞同：7
> 
> 时间：2012-12-10T23:27:52.267
> 
> 标签：android, android-edittext, android-cursor

我正在尝试定义一个 EditText 框，而没有在触摸框时自动显示软键盘。我还需要根据触摸显示和移动闪烁的光标。在 Android 4.0 之前，这很简单，只需使用 mText.setInputType(InputType.TYPE_NULL)。这是抑制自动软键盘显示的唯一方法，但在 Android 4.0 中它也抑制闪烁光标。但是，光标确实定位正确，并且 mText.getSelectionStart() 确实返回了最后一个触摸位置。例如，如果我在包含“123”的 EditText 框中触摸“2”和“3”之间，即使没有显示光标，mText.getSelectionStart() 也会正确返回 2。有没有办法以编程方式在该位置显示光标？

这是我用来测试 EditText 光标位置的代码：

```
public class TestCodeActivity extends Activity implements OnClickListener {
        private EditText mText;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
                getApplicationContext();
                setContentView(R.layout.test);
                findViewById(R.id.Button01).setOnClickListener(this);
                findViewById(R.id.Button02).setOnClickListener(this);
                findViewById(R.id.Button03).setOnClickListener(this);
                findViewById(R.id.Button04).setOnClickListener(this);
                mText = (EditText) findViewById(R.id.editText1);
                mText.setInputType(InputType.TYPE_NULL);
        }

        @Override
        public void onClick(View v) {
            if (v.getTag().equals("Clear")) {
                mText.setText("");
            } else {
                String buttontag = v.getTag().toString();
                String str = mText.getText().toString();
                int cursor = mText.getSelectionStart();
                if(cursor==str.length())
                    str = str + buttontag;
                else
                    str = str.substring(0, cursor) + buttontag + str.substring(cursor, str.length());
                mText.setText(str);
                mText.setSelection(cursor+1);
                // ---> need code to display blinking cursor at cursor+1 location ???
        }
        }
    } 
```

这是布局xml：

```
 <?xml version="1.0" encoding="utf-8"?> <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="85dp" >
        <EditText
            android:id="@+id/editText1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.13"
            android:ems="10"
            android:textSize="25sp" >
            <requestFocus />
        </EditText>
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
        <Button
            android:id="@+id/Button01"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:text="1"
            android:tag="1"
            android:layout_gravity="center"
            android:textSize="30sp" />
        <Button
            android:id="@+id/Button02"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:text="2"
            android:tag="2"
            android:layout_gravity="center"
            android:textSize="30sp" />
        <Button
            android:id="@+id/Button03"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:text="3"
            android:tag="3"                        
            android:layout_gravity="center"
            android:textSize="30sp" />
        <Button
            android:id="@+id/Button04"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:text="Clear"
            android:tag="Clear"                        
            android:layout_gravity="center"
            android:textSize="30sp" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-06T17:52:44.583

我终于想出了如何抑制软键盘并且仍然在 EditText 框中显示闪烁的光标。我编写了一个 onTouchListener 并返回 true 以禁用键盘，而不是使用“mText.setInputType(InputType.TYPE_NULL)”。然后我必须获得触摸位置才能将光标设置到正确的位置。

这是我使用的代码：

```
 mText = (EditText) findViewById(R.id.editText1);
  OnTouchListener otl = new OnTouchListener() {
  @Override
  public boolean onTouch(View v, MotionEvent event) {
      switch (event.getAction()) {
      case MotionEvent.ACTION_DOWN:
          Layout layout = ((EditText) v).getLayout();
          float x = event.getX() + mText.getScrollX();
          int offset = layout.getOffsetForHorizontal(0, x);
          if(offset>0)
              if(x>layout.getLineMax(0))
                  mText.setSelection(offset);     // touch was at end of text
              else
                  mText.setSelection(offset - 1);
          break;
          }
      return true;
      }
  };
  mText.setOnTouchListener(otl); 
```

# java - 如何计算在java中执行的字节码数

> ID：13811082
> 
> 赞同：8
> 
> 时间：2012-12-10T23:28:14.950
> 
> 标签：java, jvm, bytecode

我要参加麻省理工学院的战斗密码竞赛。参赛者编写程序来控制互相战斗的机器人。问题是你的机器人被限制在一个回合中执行一定数量的字节码（去年是每回合 10000 个字节码）。现在，一个简单的循环

```
(int i=0; i<100; i++){
// do nothing
} 
```

根据他们的软件，使用大约 400 个字节码（大概类似于（2 个字节码用于增加 i 加上 2 个字节码用于检查 i<100）* 100 = 400 个字节码）所以我们必须编写非常紧凑的代码。因此，当我尝试一些不同的导航算法时，重要的是我能够弄清楚我的代码使用了多少字节码——我该怎么做？

（有可能——他们做到了，我只是不知道怎么做！另外，他们必须阻止 JIT 以某种方式发挥作用。我知道每个机器人都在单独的线程中运行，所以我确定答案涉及某种我不知道的线程诡计。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T00:34:25.937

您可以通过使用 Hotspot JVM 的调试版本（可以在[此处](http://download.java.net/jdk6/6u25/promoted/b03/index.html)找到）并使用`-XX:+CountBytecodes`标志运行它来获得计数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T01:20:59.193

查看[他们的源代码](https://github.com/jaaso/battlecode-2013-server/blob/master/src/main/battlecode/engine/instrumenter)，他们使用 asm 字节码操纵器[http://asm.ow2.org/](http://asm.ow2.org/)进行计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T23:37:01.573

您可以像这样生成字节码：

```
javac Employee.java
javap -c Employee > Employee.bc 
```

来源：[http ://www.ibm.com/developerworks/ibm/library/it-haggar_bytecode/](http://www.ibm.com/developerworks/ibm/library/it-haggar_bytecode/)

# image - 傅里叶位移定理matlab

> ID：13811083
> 
> 赞同：4
> 
> 时间：2012-12-10T23:28:18.707
> 
> 标签：image, matlab, 2d, fft, shift

我目前正在尝试理解 2d 傅立叶变换定理。

根据我到目前为止所学到的知识，图像空间中的平移会导致相位差异，但不会导致频率空间中的幅度差异。

我试图用一个小例子来证明这一点，但它只适用于行中的移位，而不适用于列中的移位。这是一个小演示（我在这里只显示幅度图）

```
clear all
close all
Iin = zeros(128);
Iin(10:20,10:20)=1;
figure,imagesc(Iin)
Y = fft(Iin);
figure, imagesc(fftshift(log10(abs(Y))));

Iin = zeros(128);
Iin(10:20,20:30)=1;
figure,imagesc(Iin)
Y = fft(Iin);
figure, imagesc(fftshift(log10(abs(Y))));

Iin = zeros(128);
Iin(20:30,10:20)=1;
figure,imagesc(Iin)
Y = fft(Iin);
figure, imagesc(fftshift(log10(abs(Y)))); 
```

在我看来，所有 3 个震级图都应该产生相同的结果。谁能解释我在这里做错了什么？

非常感谢您的帮助，

此致，

小型的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T23:40:38.043

我认为您想使用 fft2，而不是 fft。

fft2 计算二维傅立叶变换，这就是你所说的你正在研究的内容。fft 只计算每一行的傅里叶变换。

如果您只是在代码中将 fft2 替换为 fft，那么一切都应该正常工作。

# c - 什么时候在 C 中初始化结构？

> ID：13811086
> 
> 赞同：2
> 
> 时间：2012-12-10T23:28:28.490
> 
> 标签：c

我是 C 的新手，来自 Java 背景。

如果我有一个使用来自结构定义内部函数的数据动态初始化的结构，那么这些函数什么时候被调用？这段代码什么时候运行？它只是在第一次引用时`sample_struct_table[i]`？

```
static struct sample_struct {
    int         command;
    int         (*foo)( obj1 *banana, int num);
} sample_struct_table[] = {
    {   .command    =   COMMAND_1,
        .foo =   function_name,
    },
    {   .command    =   COMMAND_2,
        .foo =   another_function_name,
    },
};

static int function_name(obj1 *banana, int num)
{
      // do stuff here
      // When does this get called?
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T23:31:29.657

当你调用它们时，函数会被调用。在您的示例中，您所做的只是将结构的字段设置为函数指针。该函数没有被调用，你只有一个指向它的指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T23:47:38.137

简短的回答：当数组中的指针被调用时它被调用。例如：

`sample_struct_table[0].foo(...);`

（显然用调用函数所需的参数替换省略号）。

长答案：C 可以有一个指向函数的指针，这意味着您可以加载共享对象（.dll、.so 等）并查找在运行时定义的函数，然后调用这些函数而无需链接到它们。这是非常强大的。如果您正在创建一个包含指向您的函数的指针的结构，那么只有当您想使用循环调用一系列函数时，这才是最有用的。我想如果结构的一部分是 int，则函数可以指定接下来要调用哪个函数，但我无法想象这会有用的场景。如果您熟悉 Scala 并且已经在系统中使用过它，那么这应该不难弄清楚，因为 Scala 一直都是这样做的。

`scala> 1 to 10 foreach println`

这里的 foreach 函数接受一个接受单个 Int 作为参数的函数。我们将 println 函数 (def println(x : Any) = ...) 作为参数传递给 foreach。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T23:50:56.970

意外62，我认为您的困惑源于`struct`. 你认为那`foo`是 type`int`吗？

我们有：

```
static struct sample_struct {
    int         command;
    int         (*foo)( obj1 *banana, int num);
} sample_struct_table[] = {
    {   .command    =   COMMAND_1,
        .foo =   function_name,
    },
    {   .command    =   COMMAND_2,
        .foo =   another_function_name,
    },
}; 
```

`typedef`我们可以使用s稍微重写一下。第一步：

```
typedef struct _sample_t
{
    int         command;
    int         (*foo)( obj1 *banana, int num);
} sample_t; 
```

从那里到第二个：

```
typedef int (*foo_t)( obj1 *banana, int num);
typedef struct _sample_t
{
    int         command;
    foo_t       foo;
} sample_t; 
```

`foo`如果您是 C 的新手，这应该可以更清楚地了解类型是什么。

现在，即使您声明和初始化了数组，您最终还是将数组*初始化*为两个函数的地址以及后面的文字`COMMAND_1`和 和`COMMAND_2`。

现在假设您有以下程序（我即兴使用了这些值），您可以看到如何在函数`for`体的循环内调用`main()`函数。

```
#include <stdio.h>
#include <stdlib.h>

#define COMMAND_1 1
#define COMMAND_2 2
typedef void* obj1;
static int function_name(obj1 *banana, int num);
static int another_function_name(obj1 *banana, int num);

typedef int (*foo_t)( obj1 *banana, int num);
typedef struct _sample_t
{
    int         command;
    foo_t       foo;
} sample_t;

sample_t sample_struct_table[] = {
    {   .command    =   COMMAND_1,
        .foo =   function_name,
    },
    {   .command    =   COMMAND_2,
        .foo =   another_function_name,
    },
};

static int function_name(obj1 *banana, int num)
{
    // do stuff here
    // When does this get called?
    return 0;
}

static int another_function_name(obj1 *banana, int num)
{
    // do stuff here
    // When does this get called?
    return 0;
}

int main(int argc, char** argv)
{
    int i;
    for(i = 0; i < sizeof(sample_struct_table)/sizeof(sample_struct_table[0]); i++)
    {
        printf("%i\n", i);
        if(sample_struct_table[i].foo(NULL, i))
            return EXIT_FAILURE;
    }
    return EXIT_SUCCESS;
} 
```

TL;博士：

调用一个函数，不像在 Pascal 中，总是需要说`function_name(...)`，而`function_name`仅仅引用那个函数的地址。

# iphone - iPhone 5：想知道 iPhone 5 的屏幕尺寸

> ID：13811087
> 
> 赞同：1
> 
> 时间：2012-12-10T23:28:35.580
> 
> 标签：iphone, objective-c, resolution, screen-size

我想知道如何使用 iPhone 5 来检测屏幕尺寸。我的应用程序目前在 iPhone 5 上使用 3.5 英寸界面，所以当我使用代码时

> CGSize 结果 = [[UIScreen mainScreen] bounds].size;

这给了我 400 而不是 568 高度的屏幕尺寸。那是因为我在 iPhone 5 上使用 3.5 英寸界面。我知道我需要更改应用程序的布局，但由于时间限制，我想保持这种方式。

或者我是否需要获得比例因子才能获得真实像素

> CGFloat screenScale = [[UIScreen mainScreen] scale];

请帮忙...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T04:49:31.440

您可以在以下条件下轻松检测 iphone、iphone5 和 iPad：-

```
 if([[UIDevice currentDevice]userInterfaceIdiom]==UIUserInterfaceIdiomPhone)
 {
     if ([[UIScreen mainScreen] bounds].size.height == 568)
     {

     }
     else
     {
         //iphone 3.5 inch screen
     }
 }
 else
 {
        //[ipad]
 } 
```

[只需在此检测设备类型](https://stackoverflow.com/questions/13139430/objective-c-how-detect-iphone-iphone5-and-ipad/13139561#13139561)上访问我的答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T05:06:22.263

```
instead of find hight you have to use following code to find your device is iPhone 5 or below iphone 5.

#define IS_IPHONE_5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON )
-(void)ViewDidLoad
{
   if(IS_IPHONE_5)
   {
      //code of iphone 5
   }
   else
  {
      //code of below iphone 5
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T23:34:59.930

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
if (screenBounds.size.height == 568)
   // 4-inch
else
   // 3.5-inch 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T23:44:34.480

布局应该能够适应这种情况，而无需检查设备类型，一旦 Apple 决定再次更改其外形尺寸，设备类型就会中断。

使用 Autosizing （与 Autolayout 不同，但如果这对您可用，那就更好了），如果这还不够 subclass`UIView`和 override `-layoutSubviews`，请使用 9-patches 等。这样做，我认为不需要知道设备是否是iPhone 4 或 iPhone 5。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T23:47:10.243

首先，直到您在应用程序中为 iPhone 5 指定加载图像，它才会像 iPhone 4 一样运行并在您调用 [[UIScreen mainScreen] bounds].size 时返回 { 320, 480 }

其次，您应该使用边界：

```
CGSize screenSize = [[UIScreen mainScreen] bounds].size; 
```

您可能还需要考虑状态栏高度：

```
CGFloat statusBarHeight = ([UIApplication sharedApplication].statusBarHidden ? 0.0f : [UIApplication sharedApplication].statusBarFrame.size.height); 
```

如果您根据当前方向（纵向或横向）获取屏幕宽度，则应翻转 bounds 函数返回的宽度和高度。

```
if (UIInterfaceOrientationIsLandscape([UIApplication sharedApplication].statusBarOrientation)) {
    screenSize = CGSizeMake(screenSize.height, screenSize.width);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T23:38:43.743

如果项目不包含带有新默认图像的 Default-568h@2x.png，iPhone 5 将报告常规的 480x320 屏幕尺寸。

阅读此线程 [如何检测 iPhone 5（宽屏设备）？](https://stackoverflow.com/questions/12446990/how-to-detect-iphone-5-widescreen-devices)

# php - 使用 PHP 将索引属性值数组转换为关联数组

> ID：13811088
> 
> 赞同：0
> 
> 时间：2012-12-10T23:28:39.467
> 
> 标签：php, arrays, entity-attribute-value

我有一个包含以下行的大数组：

```
Array
(
    [0] => Array
        (
            [attribute] => gender
            [value] => male
        )

    [1] => Array
        (
            [attribute] => first_name
            [value] => test
        )

) 
```

我想将其转换为关联数组：

```
Array
(
    [gender] => male
    [first_name] => test
) 
```

这里有一个内置的 PHP 函数可以做到这一点，还是我应该使用 Foreach 循环来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:44:04.447

在我看来，你真正应该做的是重构你的方法，因为这感觉就像你在解决错误的问题。为什么首先要以这种方式创建数组来重新构造它？您是否将数据作为 JSON 对象从某个外部源获取到 PHP 中，而您无法控制？或者是您在 PHP 中构建数组的方式很糟糕，而您现在想要以不同的方式重组它，因为您意识到使用这种方式会给您带来麻烦？

如果是**前者**，那么您将需要执行以下操作（*在您想要的新结构中构建一个全新的数组*）：

```
$new_array = array();
foreach ($array as $element) {
    $new_array[$element['attribute']] = $element['value'];
} 
```

如果是**后者**，那么您真的希望首先以这种方式构建数组，从而消除首先创建新数组的需要。

此外，如果您解释实际用例，可能会有更好的解决方案。可能您根本不需要这样做，而您只是在浪费您的时间，而现有的结构可以用来完成您需要的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T23:34:29.183

您将不得不使用 foreach 循环。没有这样做的“内置”方法。

```
foreach ($arr as $entry)
{
    $assoc[$entry["attribute"]] = $entry["value"];
} 
```

# java - 在 Java 中对 Neo4j 服务器执行 Cypher 查询时出现 UnsupportedOperationException

> ID：13811095
> 
> 赞同：2
> 
> 时间：2012-12-10T23:29:19.943
> 
> 标签：java, neo4j

我正在使用以下 Cypher 查询 Neo4j 服务器，它工作正常：

```
GraphDatabaseService neo4j = new RestGraphDatabase("http://my.ip:7474/db/data");
ExecutionEngine engine = new ExecutionEngine(
String myCypher = "START n = node(1234) RETURN n LIMIT 10;"
ExecutionResult result = engine.execute(myCypher);
System.out.println(result); 
```

**如果我在尝试打印结果时**将查询的第一行更改为`START n = node(*) RETURN n LIMIT 10;`我得到这个丑陋的异常：

 **> org.neo4j.rest.graphdb.RestGraphDatabase.getNodeManager(RestGraphDatabase.java:33) 处 org.neo4j.rest.graphdb.AbstractRemoteDatabase.getNodeManager(AbstractRemoteDatabase.java:144) 处的线程“主”java.lang.UnsupportedOperationException 中的异常org.neo4j.tooling.GlobalGraphOperations.(GlobalGraphOperations.java:39) 在 org.neo4j.tooling.GlobalGraphOperations.at(GlobalGraphOperations.java:51) 在 org.neo4j.cypher.internal.executionplan.builders.GraphGlobalStartBuilder$$anonfun$ createStartPipe$1.apply(GraphGlobalStartBuilder.scala:51) at org.neo4j.cypher.internal.executionplan.builders.GraphGlobalStartBuilder$$anonfun$createStartPipe$1.apply(GraphGlobalStartBuilder.scala:51) at org.neo4j.cypher.internal.pipes .StartPipe$$anonfun$1.apply(StartPipe.scala:38) 在 org.neo4j.cypher.internal。在 scala.collection.TraversableLike$$anonfun$flatMap$1.apply(TraversableLike.scala:200) 在 scala.collection.TraversableLike$$anonfun$flatMap$1 的管道.StartPipe$$anonfun$1.apply(StartPipe.scala:37)。应用（TraversableLike.scala:200）在 scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59) 在 scala.collection.immutable.List.foreach(List.scala:45) 在 scala.collection.TraversableLike$class .flatMap(TraversableLike.scala:200) at scala.collection.immutable.List.flatMap(List.scala:45) at org.neo4j.cypher.internal.pipes.StartPipe.createResults(StartPipe.scala:37) at org. neo4j.cypher.internal.pipes.MatchPipe.createResults(MatchPipe.scala:31) 在 org.neo4j.cypher.internal.pipes.NamedPathPipe.createResults(NamedPathPipe.scala:26) 在 org.neo4j.cypher.internal.pipes。过滤管。createResults(FilterPipe.scala:28) at org.neo4j.cypher.internal.pipes.ExtractPipe.createResults(ExtractPipe.scala:37) at org.neo4j.cypher.internal.pipes.EagerAggregationPipe.createResults(EagerAggregationPipe.scala:49)在 org.neo4j.cypher.internal.pipes.ColumnFilterPipe.createResults(ColumnFilterPipe.scala:39) 在 org.neo4j.cypher.internal 的 org.neo4j.cypher.internal.pipes.ExtractPipe.createResults(ExtractPipe.scala:37) .pipes.EagerAggregationPipe.createResults(EagerAggregationPipe.scala:49) at org.neo4j.cypher.internal.pipes.ExtractPipe.createResults(ExtractPipe.scala:37) at org.neo4j.cypher.internal.pipes.ColumnFilterPipe.createResults(ColumnFilterPipe .scala:39) at org.neo4j.cypher.internal.executionplan.ExecutionPlanImpl$$anonfun$4$$anonfun$apply$2.apply(ExecutionPlanImpl.scala:95) at org.neo4j.cypher.internal.executionplan.ExecutionPlanImpl$$anonfun$4$$anonfun$apply$2.apply(ExecutionPlanImpl.scala:95) at org.neo4j.cypher.PipeExecutionResult.immutableResult(PipeExecutionResult.scala:37) at org.neo4j。 cypher.PipeExecutionResult.iterator(PipeExecutionResult.scala:153) at org.neo4j.cypher.PipeExecutionResult.hasNext(PipeExecutionResult.scala:155) at scala.collection.Iterator$$anon$19.hasNext(Iterator.scala:334) at scala .collection.Iterator$$anon$19.hasNext(Iterator.scala:334) at scala.collection.Iterator$class.toString(Iterator.scala:1030) at scala.collection.Iterator$$anon$19.toString(Iterator.scala :333) 在 java.lang.String.valueOf(String.java:2826) 在 scala.collection.mutable.StringBuilder.append(StringBuilder.scala:185) 在 scala.collection。TraversableOnce$$anonfun$addString$1.apply(TraversableOnce.scala:287) at scala.collection.Iterator$class.foreach(Ite​​rator.scala:660) at scala.Product$$anon$1.foreach(Product.scala:38)在 scala.collection.TraversableOnce$class.addString(TraversableOnce.scala:285) 在 scala.Product$$anon$1.addString(Product.scala:38) 在 scala.collection.TraversableOnce$class.mkString(TraversableOnce.scala:263 ) at scala.Product$$anon$1.mkString(Product.scala:38) at scala.runtime.ScalaRunTime$._toString(ScalaRunTime.scala:175) at scala.collection.JavaConversions$IteratorWrapper.toString(JavaConversions.scala:561 ) 在 java.lang.String.valueOf(String.java:2826) 在 java.io.PrintStream.println(PrintStream.java:771)660) 在 scala.Product$$anon$1.foreach(Product.scala:38) 在 scala.collection.TraversableOnce$class.addString(TraversableOnce.scala:285) 在 scala.Product$$anon$1.addString(Product.scala :38) 在 scala.collection.TraversableOnce$class.mkString(TraversableOnce.scala:263) 在 scala.Product$$anon$1.mkString(Product.scala:38) 在 scala.runtime.ScalaRunTime$._toString(ScalaRunTime.scala :175) 在 scala.collection.JavaConversions$IteratorWrapper.toString(JavaConversions.scala:561) 在 java.lang.String.valueOf(String.java:2826) 在 java.io.PrintStream.println(PrintStream.java:771)660) 在 scala.Product$$anon$1.foreach(Product.scala:38) 在 scala.collection.TraversableOnce$class.addString(TraversableOnce.scala:285) 在 scala.Product$$anon$1.addString(Product.scala :38) 在 scala.collection.TraversableOnce$class.mkString(TraversableOnce.scala:263) 在 scala.Product$$anon$1.mkString(Product.scala:38) 在 scala.runtime.ScalaRunTime$._toString(ScalaRunTime.scala :175) 在 scala.collection.JavaConversions$IteratorWrapper.toString(JavaConversions.scala:561) 在 java.lang.String.valueOf(String.java:2826) 在 java.io.PrintStream.println(PrintStream.java:771)TraversableOnce$class.mkString(TraversableOnce.scala:263) at scala.Product$$anon$1.mkString(Product.scala:38) at scala.runtime.ScalaRunTime$._toString(ScalaRunTime.scala:175) at scala.collection. JavaConversions$IteratorWrapper.toString(JavaConversions.scala:561) 在 java.lang.String.valueOf(String.java:2826) 在 java.io.PrintStream.println(PrintStream.java:771)TraversableOnce$class.mkString(TraversableOnce.scala:263) at scala.Product$$anon$1.mkString(Product.scala:38) at scala.runtime.ScalaRunTime$._toString(ScalaRunTime.scala:175) at scala.collection. JavaConversions$IteratorWrapper.toString(JavaConversions.scala:561) 在 java.lang.String.valueOf(String.java:2826) 在 java.io.PrintStream.println(PrintStream.java:771)

此外，`System.out.println(result.columns())`工作正常，我可以从控制台完美地执行所有操作......这是怎么回事？

**编辑：**

查询似乎返回得太快，我应该做些什么“让 java 等待”以获得完整响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T21:16:36.550

不要那样做！

请改用`new RestCypherQueryEngine(restGraphDb.getRestAPI())`，否则您的所有查询都在客户端上运行，并且每个数据库访问都通过网络进行。

并确保在查询中使用参数。

利用：

```
QueryResult<Map<String, Object>> query(String statement, Map<String, Object> params) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:32:00.423

来自这篇文章： [https ://stackoverflow.com/a/6953423/1498109](https://stackoverflow.com/a/6953423/1498109)

我猜您正在尝试将对象/数组转换为字符串`System.out.println(result)`**

# mysql - 在 MySQL 中删除具有特定参数的多行

> ID：13811097
> 
> 赞同：0
> 
> 时间：2012-12-10T23:29:36.217
> 
> 标签：mysql, database, sql-delete

我想知道是否有任何解决方案可以在一个查询中删除多行？

我正在使用具有多个输入的选择元素，因此当我发送表单时，我的 $_POST 中有一个数组。

例如，我想将一个用户从一张桌子退订到不止一堂课所以我有：

```
users.id | lesson.id
--------------------
1        | 1
1        | 2
1        | 3
1        | 4 
```

我的选择给我发了一个带有 course.id 的数组：

```
Array
(
    [0] => 2
    [1] => 3
    [2] => 4
) 
```

我怎样才能只用一个查询，从我的表中删除所有行？

顺便说一句，我一直都知道 users.id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:55:37.563

如果只想删除这`lesson_id`三个

```
delete from lesson_table
where users_id = 1 and lesson_id in (2, 3, 4) 
```

如果您想删除除一堂课以外的所有课程，并且您知道，用户 1 有 4 堂课，那么您可以`limit`删除到 3 个课程 ID

```
delete from lesson_table
where users_id = 1
limit 3 
```

# dll - 如何构建包含多个源文件的 DLL 文件，并在多个文件中导出函数？

> ID：13811099
> 
> 赞同：1
> 
> 时间：2012-12-10T23:29:40.653
> 
> 标签：dll, lua

一些上下文：我正在尝试将 Lua 源代码构建为 DLL（学习目的！），在 Windows 上使用 Pelles C（使用 C）。主要针对 x64，如果这很重要的话。

通过在我的 Pelles C 中使用 DLL 向导，它会自动生成带有示例函数和 DLLMain.h 的 DLLMain.c。这很好，除了现在我不确定如何导出所有其他 lua 函数。只需添加 Lua 网站告诉我的所有源文件（这太简单了，不可能工作，但你永远不知道......）然后用适当`#define`的 s 构建它只是导出示例函数，我已经使用它检查过polib.exe：

![Polib 结果](../Images/a674ebc835b470cf93c355dd85912315.png)

**一些来源：**

自动生成的 DLL main：

```
/****************************************************************************
 *                                                                          *
 * File    : dllmain.c                                                      *
 *                                                                          *
 * Purpose : Generic Win32 Dynamic Link Library (DLL).                      *
 *                                                                          *
 * History : Date      Reason                                               *
 *           00/00/00  Created                                              *
 *                                                                          *
 ****************************************************************************/

#define WIN32_LEAN_AND_MEAN  /* speed up */
#include <windows.h>
#include <windowsx.h>
#include <commctrl.h>
#include <tchar.h>

/*
 * Include our "interface" file and define a symbol
 * to indicate that we are *building* the DLL.
 */
#define _LUADLLTE_
#include "LUADLLTE.h"
                            //!!!~~~!!!~~~!!!~~~!!!~~~!!!~~~!!!~~~!!!~~~!!!
#include "lua.h"            //I added these 3\. Do these not go here?
#include "lauxlib.h"        //They are the 3 headers that every Lua tutorial
#include "lualib.h"         //includes.
                            //~~~!!!~~~!!!~~~!!!~~~!!!~~~!!!~~~!!!~~~!!!~~~

/****************************************************************************
 *                                                                          *
 * Function: DllMain                                                        *
 *                                                                          *
 * Purpose : DLL entry and exit procedure.                                  *
 *                                                                          *
 * History : Date      Reason                                               *
 *           00/00/00  Created                                              *
 *                                                                          *
 ****************************************************************************/

BOOL APIENTRY DllMain(HINSTANCE hInstDLL, DWORD fdwReason, LPVOID lpvReserved)
{
    switch (fdwReason)
    {
        case DLL_PROCESS_ATTACH:
            /*
             * Microsoft says:
             *
             * blah comments blah
             */
            break;

        case DLL_THREAD_ATTACH:
            /*
             * Microsoft says:
             *
             * blah blah
             */
            break;

        case DLL_THREAD_DETACH:
            /*
             * blah blah
             */
            break;

        case DLL_PROCESS_DETACH:
            /*
             * blah
             */
            break;
    }

    /* Return success */
    return TRUE;
}

/****************************************************************************
 *                                                                          *
 * Function: SampleFunction                                                 *
 *                                                                          *
 * Purpose : Sample function which does nothing useful.                     *
 *                                                                          *
 * History : Date      Reason                                               *
 *           00/00/00  Created                                              *
 *                                                                          *
 ****************************************************************************/

LUADLLTEAPI int WINAPI SampleFunction(int a, int b)
{
    /* TODO: Replace with your own code */
    return a * b;
} 
```

自动生成的标头：

```
// INCLUDE FILE generated by "Pelles C for Windows, version 3.00".

#ifndef _LUADLLTE_H
#define _LUADLLTE_H

#ifdef _LUADLLTE_
#define LUADLLTEAPI  __declspec(dllexport)
                           //!!!~~~!!!~~~!!!~~~!!!~~~!!!~~~!!!~~~!!!~~~!!!
#define LUA_BUILD_AS_DLL   //I added these 3 defines as well.
#define LUA_CORE           //See next source excerpt for the 
#define LUA_LIB            //reasoning.
                           //!!!~~~!!!~~~!!!~~~!!!~~~!!!~~~!!!~~~!!!~~~!!!
#else
#define LUADLLTEAPI  __declspec(dllimport)
#endif /* _LUADLLTE_ */

#ifndef WINAPI
#define WINAPI  __stdcall
#endif

LUADLLTEAPI int WINAPI SampleFunction(int, int);

#endif /* _LUADLLTE_H */ 
```

luaconf.h，相关（我认为？）部分：

```
/*
@@ LUA_API is a mark for all core API functions.
@@ LUALIB_API is a mark for all auxiliary library functions.
@@ LUAMOD_API is a mark for all standard library opening functions.
** CHANGE them if you need to define those functions in some special way.
** For instance, if you want to create one Windows DLL with the core and
** the libraries, you may want to use the following definition (define
** LUA_BUILD_AS_DLL to get it).
*/
#if defined(LUA_BUILD_AS_DLL)   /* { */

#if defined(LUA_CORE) || defined(LUA_LIB)   /* { */
#define LUA_API __declspec(dllexport)
#else                       /* }{ */
#define LUA_API __declspec(dllimport)
#endif                      /* } */

#else               /* }{ */

#define LUA_API     extern

#endif              /* } */

/* more often than not the libs go together with the core */
#define LUALIB_API  LUA_API
#define LUAMOD_API  LUALIB_API 
```

这些定义决定了如何构建 lua api 调用，具体取决于定义的符号。这就是我将它们添加到头文件中的原因。

我可以将函数添加到自动生成的 header/c 文件中，它们将根据 polib.exe 显示在 lib 中。这让我认为我需要找到*每一个函数调用*并将其移动到 dllmain 文件中，但这听起来并不是执行此操作的最佳方法。

这些消息来源并没有真正回答这个问题：

[鉴于每个静态库都定义了导出的功能（vc++ 2008），如何将多个静态链接库合并到一个 dll 中？](https://stackoverflow.com/q/9702017/1751715)

[有人向我指出好的 DLL 教程将不胜感激](https://stackoverflow.com/q/4017130/1751715)

~我找到的所有教程都是单文件DLL教程。

[编译和反编译dll文件](https://stackoverflow.com/q/8119188/1751715)

〜这个接近了，但没有我需要的答案。

~当涉及到 Windows 时，Lua 网站和[构建文档](http://www.lua.org/manual/5.2/readme.html#other)不是很清楚/具体。

我完全有可能遗漏了一些非常明显的东西。我首先通过单源/单头文件 DLL 来感受它，现在我想尝试编译 Lua（我实际上想在某个时候尝试了解）。让我知道这个问题是否有点令人费解。我认为这是我的 DLL 知识的问题，而不是 Lua，所以我的问题是：

**如何构建包含多个源文件的 DLL 文件，并在多个文件中导出函数？**

PS：我在这个话题上缺少什么基本知识，如果这可能是根本原因？另外，对不起，长度......刚刚注意到......

编辑：**解决了！**谢谢泥。

方法：在 Pelles C 中，转到 Project Options... -> Compiler 选项卡，然后在该行下输入`LUA_BUILD_AS_DLL LUA_LIB`（或`LUA_BUILD_AS_DLL LUA_CORE`或`LUA_BUILD_AS_DLL LUA_CORE LUA_LIB`） 。`Define preprocessor symbols`

![Polib 已修复](../Images/572b5cc69eb24643c7c2b4991598ad01.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:46:41.727

您要导出的所有 Lua API 函数都以 LUA_API 为前缀。如您所述，要正确定义 LUA_API（对于 Visual Studio、GCC 等），您只需定义 LUA_BUILD_AS_DLL 和 LUA_LIB。

但是，您在*头文件*中定义它们，因此这些定义仅存在于包含该头文件的文件中——即没有一个 Lua 文件包含您的头文件。

您需要在 project-settings/makefile/whatever 中定义这些符号，以便在编译 Lua 源代码期间定义它们。

# javascript - 如何使用 jQuery 提交表单然后重新加载页面

> ID：13811100
> 
> 赞同：4
> 
> 时间：2012-12-10T23:29:45.533
> 
> 标签：javascript, jquery

我试图弄清楚这是否可能。

我的 Page-A 具有 Form-Foo 并在新窗口中执行 Bar 操作。

单击提交后，我希望提交表单并重新加载页面 A。

到目前为止，我只能让一个或另一个工作......任何指针将不胜感激。

除了 DudeSolutions 解决方案......我试过这个：

```
$(document).ready(function() {
    $('#foo').submit(function() {
        $.post('bar.asp', $(#foo).serialize(), function(data) {

                window.location.reload();

        });

    });
}); 
```

结果相同...我可以提交表单并打开一个新选项卡...但是 Page-A 不会重新加载。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T23:32:34.753

如果您打算提交表单并重新加载页面，那将是默认行为，只有 action 属性中的 url 不正确。如果是这样，只需更改 URL，如果仍然打算进行新的页面加载，则不需要 ajax：

```
$(function() {
    $('#Form-Foo').attr('action', 'Page-A url');
}); 
```

或者：

```
$(function() {
    $('#foo').on('submit', function(e) {
          e.preventDefault();
          setTimeout(function() {
               window.location.reload();
          },0);
          this.submit();
    });
}); 
```

只是排队重新加载应该足以等到发送表单后重新加载页面，但是由于大多数浏览器在您离开浏览器选项卡时会停止超时，因此在您返回该选项卡之前它不会真正重新加载，但是应该不明显。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T23:34:01.710

这是一个想法：

```
 <script type="text/javascript">
    $("#my_form").submit(function() {
      $.ajax({
        type: "POST",
        url: "/path/to/post/handler/",
        data: $("#my_form").serializeArray(),
        success: function() {
    top.reload();
        }
        });
    return false;
});</script> 
```

# java - 是否可以指示 Spring-WS 生成包含 wsdl:fault 的 WSDL？

> ID：13811103
> 
> 赞同：2
> 
> 时间：2012-12-10T23:29:51.187
> 
> 标签：java, spring, wsdl, spring-ws

[这是另一个尚未在Spring 论坛上](http://forum.springsource.org/showthread.php?133191)回答的问题。

我有一个带注释的端点，它抛出一个自定义异常，它用@SoapFault 注释

但是动态创建的 WSDL 不会在 wsdl:operation 中显示 wsdl:fault 也不存在该异常的 xs:elementName。

是否可以指示 Spring-WS 在操作中动态生成可选的故障元素？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T05:05:06.947

您是否在 [servlet-name]-servlet.xml 文件中定义了异常 xsd

像这样 -

```
<sws:dynamic-wsdl id="user" portTypeName="User"
        locationUri="/userService/" targetNamespace="http://test.nl/wsdls/userservice/2011/04">
        <sws:xsd location="classpath:/exception.xsd" />
        <sws:xsd location="classpath:/base.xsd" />
        <sws:xsd location="classpath:/user.xsd" />
        <sws:xsd location="classpath:/userservice.xsd" />
    </sws:dynamic-wsdl> 
```

您会在标记中看到异常 xsd。所以你必须定义它。

看看这个[教程](http://it-essence.xs4all.nl/roller/technology/entry/spring_ws_and_exception_handling1)

查看上面链接中主题 XSD 中的第 1 部分链接。

问候

安舒尔卡塔

# python - 如何在python中将十六进制写入文件

> ID：13811105
> 
> 赞同：2
> 
> 时间：2012-12-10T23:29:54.050
> 
> 标签：python, hex

我真的不明白 Python 发生了什么。

如果我使用

```
f.write(data.encode("hex")) 
```

Python 将我的数据转换为十六进制字符串，因此在“hello”的情况下，我得到字符串 68656c6c6f。

但是使用

```
f = open('file.dat', 'wb')
f.write("hello".encode("hex"))
f.close() 
```

只会写十六进制的ascii。hexlify 也是如此。我需要 \00 格式的十六进制，但似乎一切都想给我 ascsii 中的十六进制字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:42:41.517

如果您使用的是 Python 3.x，我们有一个名为**binascii**的库，用于在二进制和 ASCII 之间进行转换...

```
>>> import binascii
>>> binascii.hexlify(b'Hi') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:37:35.070

```
>>> "\\"+"\\".join(["hello".encode("hex")[i:i+2] for i in range(0,len("hello".encode("hex")),2)])
'\\68\\65\\6c\\6c\\6f' 
```

现在你在每 2 个十六进制字符前面加上 \

# php - 将毫米四舍五入到最接近的 32 英寸的功能

> ID：13811108
> 
> 赞同：1
> 
> 时间：2012-12-10T23:30:05.200
> 
> 标签：php, math, fractions

我真的非常需要一个将毫米转换为分数（以英寸为单位）的 php 函数。

例如：

16mm = 5/8 英寸
321mm = 12 41⁄64 英寸

我已经搜索过任何 php 示例的高低，我完全被难住了。有没有善良的灵魂有这样的东西。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:53:44.317

简单的部分是从毫米转换为英寸——只需[除以 25.4](//en.wikipedia.org/wiki/Inch)。困难的部分是找到最近的第 32 位（或第 16 位、第 64 位等）。

在这个答案的最后，我包含了一个名为 toMixedNumber() 的函数。它遵循以下算法：

*   将浮点值乘以所需的分母，四舍五入到最接近的单位。
*   除以分母。商是整数部分，余数是分子。
*   （可选）通过将分子和分母除以最大公约数 (GCD) 将小数部分减少到最低项。GCD 可以使用[Euclid 算法计算](//en.wikipedia.org/wiki/Euclidean_algorithm)。
*   根据需要将整数和小数部分格式化为“i”、“n/d”或“in/d”格式的字符串。在“in/d”的情况下，删除小数部分中的任何减号。

使用该功能很简单：

```
const MM_PER_IN = 25.4;
echo toMixedNumber(14 / MM_PER_IN, 32) . "\n"; // 9/16
echo toMixedNumber(55 / MM_PER_IN, 32) . "\n"; // 2 5/32
echo toMixedNumber(321 / MM_PER_IN, 32) . "\n"; // 12 5/8
echo toMixedNumber(321 / MM_PER_IN, 64) . "\n"; // 12 41/64 
```

有趣的是，如果分母始终是 2 的幂（如您的情况），则可以进行优化。对于分子为正的真[二元分数](//en.wikipedia.org/wiki/Dyadic_rational)，分子中最低有效“1”位的值是分子和分母的 GCD：

```
if ($reduce) {
    $gcd = $num & -$num;
    $num /= $gcd;
    $denom /= $gcd;
} 
```

我采用了创新方式中的位旋转技巧[来检查数字是否在有符号 int 中只有一个位](https://stackoverflow.com/questions/3160659/innovative-way-for-checking-if-number-has-only-one-on-bit-in-signed-int)，并且在我的计算机上，它可以将功能加速约 20%。（它之所以有效，是因为任何位的值都是所有更高位的值的除数，并且分母的唯一“1”位比分子中的任何位都更重要。）但是，我选择不包括它。

* * *

```
function toMixedNumber($arg, $denom, $reduce = true) {
    $num = round($arg * $denom);
    $int = (int)($num / $denom);
    $num %= $denom;

    if (!$num) {
        return "$int";
    }

    if ($reduce) {
        // Use Euclid's algorithm to find the GCD.
        $a = $num < 0 ? -$num : $num;
        $b = $denom;
        while ($b) {
            $t = $b;
            $b = $a % $t;
            $a = $t;
        }

        $num /= $a;
        $denom /= $a;
    }

    if ($int) {
        // Suppress minus sign in numerator; keep it only in the integer part.
        if ($num < 0) {
            $num *= -1; 
        }
        return "$int $num/$denom";
    }

    return "$num/$denom";
} 
```

[上述示例代码的许可证](//creativecommons.org/publicdomain/zero/1.0/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:38:20.137

基本答案，基于[此站点](http://www2.whidbey.net/ohmsmath/webwork/javascript/decin2fr.html)。

```
function toFraction($inches)
{
  $frac = $inches - intval($inches);
  return intval($frac * 32);
} 
```

该函数返回 32 英寸。

您可以使用 获得英寸数`intval`。

对于毫米到英寸的转换，只需乘以 0.0393700787

```
function toInches($mm)
{
  $inches = $mm * 0.0393700787;
  $wholeInches = intval($inches);
  $fraction = toFraction($inches);
  return array('inches' => $wholeInches, '32nds' => $fraction);
} 
```

我把 32nds 的简化留给你...

# java - 如何使用 loadStrings()、loadXML() 或 processing.net 库在处理中进行 HTTP 身份验证？

> ID：13811110
> 
> 赞同：0
> 
> 时间：2012-12-10T23:30:08.343
> 
> 标签：java, processing

我有一个链接：

```
String url = "http://username:password@url.com" 
```

我想从网站加载信息。我试过使用 loadStrings(url)、loadXML(url)（信息实际上是在 xml 中），没有骰子，我得到一个 HTTP 状态 401。

创建一个 HTTP 客户端似乎是最有前途的，但我仍然无法让它工作。这是代码：

```
import processing.net.*;
Client c;
String data;

void setup() {
  size(600, 600);
  c = new Client(this, "http://username:password@my.idigi.com/ws/DataPoint/dia/channel/00000000-00000000-00409DFF-FF521E03/XBee_4079C12D/spikes_back", 80);
  c.write("GET / HTTP/1.0\r\n");      
}

void draw() {
    if (c.available() > 0) {
    data = c.readString();
    println(data);
  }
} 
```

这是我得到的错误：

```
java.net.UnknownHostException: http://username:password@my.idigi.com/ws/DataPoint/dia/channel/00000000-00000000-00409DFF-FF521E03/XBee_4079C12D/spikes_back
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:195)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:432)
    at java.net.Socket.connect(Socket.java:529)
    at java.net.Socket.connect(Socket.java:478)
    at java.net.Socket.<init>(Socket.java:375)
    at java.net.Socket.<init>(Socket.java:189)
    at processing.net.Client.<init>(Unknown Source)
    at getSoundData.setup(getSoundData.java:28)
    at processing.core.PApplet.handleDraw(PApplet.java:2117)
    at processing.core.PGraphicsJava2D.requestDraw(PGraphicsJava2D.java:193)
    at processing.core.PApplet.run(PApplet.java:2020)
    at java.lang.Thread.run(Thread.java:680)
java.lang.NullPointerException
    at processing.net.Client.write(Unknown Source)
    at processing.net.Client.write(Unknown Source)
    at getSoundData.setup(getSoundData.java:29)
    at processing.core.PApplet.handleDraw(PApplet.java:2117)
    at processing.core.PGraphicsJava2D.requestDraw(PGraphicsJava2D.java:193)
    at processing.core.PApplet.run(PApplet.java:2020)
    at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:48:11.820

您只是没有正确设置 HTTP 标头。这是一个有效的示例，我什至设置了受密码保护的测试文件：

```
import processing.net.*; 
import javax.xml.bind.DatatypeConverter; //for Base64 encoding
Client c; 
String dataIn;
String[] headerData;

String host = "fla.sc";
String file = "/testfile";

//The username and password need to be set in Base64
String auth = DatatypeConverter.printBase64Binary("user:password".getBytes());

void setup(){
  size(200, 200);
  c = new Client(this, host, 80);
  c.write("GET " + file + " HTTP/1.1\n");
  c.write("Authorization:  basic  " + auth + "\n");
  c.write("Host: " + host + "\n"); // the host to connect to
  c.write("\n"); // close the header
}

void draw() { 
  if (c.available() > 0) {
    dataIn = c.readString();
    println(dataIn);
    headerData = split(dataIn, '\n');
    for(int i=0; i<headerData.length; i++){
      print(i);
      print(": ");
      println(headerData[i]);
    }
  }
} 
```

对于您的用例，此代码可能有效，但如果没有您正确的用户名和密码，我将无法对其进行测试：

```
import processing.net.*; 
import javax.xml.bind.DatatypeConverter; //for Base64 encoding
Client c; 
String dataIn;
String[] headerData;

String host = "my.idigi.com";
String file = "/ws/DataPoint/dia/channel/00000000-00000000-00409DFF-FF521E03/XBee_4079C12D/spikes_back";

//The username and password need to be set in Base64
String auth = DatatypeConverter.printBase64Binary("username:password".getBytes());

void setup(){
  size(200, 200);
  c = new Client(this, host, 80);
  c.write("GET " + file + " HTTP/1.1\n");
  c.write("Authorization:  basic  " + auth + "\n");
  c.write("Host: " + host + "\n"); // the host to connect to
  c.write("\n"); // close the header
}

void draw() { 
  if (c.available() > 0) {
    dataIn = c.readString();
    println(dataIn);
    headerData = split(dataIn, '\n');
    for(int i=0; i<headerData.length; i++){
      print(i);
      print(": ");
      println(headerData[i]);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:49:23.183

我使用 java.net 库代替了 processing.net 库。我能够在[这里](https://stackoverflow.com/questions/4883100/how-to-handle-http-authentication-using-httpurlconnection)找到一些答案。因此，将其放入处理中，它看起来像这样：

```
import java.net.*;
String baseURL = "http://my.idigi.com/ws/DataPoint/dia/channel/00000000-00000000-00409DFF-FF521E03/XBee_4079C12D/spikes_back";
URL url;
String userPassword = "user"+":"+"password";

void setup() {
  size(600, 600);
  try {
    String encoding = new sun.misc.BASE64Encoder().encode(userPassword.getBytes());
    url = new URL(baseURL);
    HttpURLConnection conn = (HttpURLConnection)url.openConnection();
    conn.setRequestProperty("Authorization", "Basic " + encoding);
    conn.connect();
    println(conn.getResponseCode());
    println(conn.getContent());
  } 
  catch (Exception e) {
    println("exception" + e);
  }
}

void draw() {
} 
```

# c++ - OpenMP 中的并行合并排序

> ID：13811114
> 
> 赞同：9
> 
> 时间：2012-12-10T23:30:47.957
> 
> 标签：c++, c, multithreading, parallel-processing, openmp

我在[这篇](https://arxiv.org/pdf/1403.8006.pdf)论文中看到了一种并行合并排序算法。这是代码：

```
void mergesort_parallel_omp (int a[], int size, int temp[], int threads) 
{  
    if ( threads == 1)       { mergesort_serial(a, size, temp); }
    else if (threads > 1) 
    {
         #pragma omp parallel sections
         {
             #pragma omp section
             mergesort_parallel_omp(a, size/2, temp, threads/2);
             #pragma omp section
             mergesort_parallel_omp(a + size/2, size - size/2, temp + size/2, threads - threads/2);
         }
         merge(a, size, temp); 
    } // threads > 1
} 
```

我在多核上运行它。发生的情况是，在树的叶子上，2 个线程并行运行。在他们完成工作后，其他 2 个线程开始，依此类推。即使我们有所有叶节点的空闲核心。

我认为原因是这个 OpenMP 代码不会在并行区域内创建并行区域。我对么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-10T23:51:52.283

> 我认为原因是 OpenMP 无法在并行区域内创建并行区域

你可以有一个平行区域的平行区域。

> OpenMP 并行区域可以**相互嵌套**。如果**嵌套并行被禁用**，则由在并行区域内遇到并行构造的线程创建的新组 **仅由遇到的线程**组成。如果**启用了嵌套并行**，那么新团队**可能包含多个线程**（[源](http://docs.oracle.com/cd/E19059-01/stud.10/819-0501/2_nested.html)）。

为了正确运行您的代码，您需要调用`omp_set_nested(1)`and `omp_set_num_threads(2)`。

> 可以通过设置 OMP_NESTED 环境变量或调用 omp_set_nested() 函数来启用或禁用嵌套并行

* * *

为了获得更好的性能而不是部分，您可以使用 OpenMP 任务（可以在[此处](https://pages.tacc.utexas.edu/%7Eeijkhout/pcse/html/omp-task.html)找到详细信息和示例），如下所示：

```
void merge(int * X, int n, int * tmp) {
   ...
} 

void mergeSort(int *X, int n, int *tmp)
{  
   if (n < 2) return;

   #pragma omp task shared(X) if (n > TASK_SIZE)
   mergeSort(X, n/2, tmp);

   #pragma omp task shared(X) if (n > TASK_SIZE)
   mergeSort(X+(n/2), n-(n/2), tmp + n/2);

   #pragma omp taskwait
   mergeSortAux(X, n, tmp);
}

int main()
{
   ...
   #pragma omp parallel
   {
      #pragma omp single
      mergesort(data, n, tmp);
   }
} 
```

合并算法的顺序代码来自 Dr. Johnnie W. Baker[网页。](http://www.cs.kent.edu/%7Ejbaker/23Workshop/Chesebrough/mergesort/mergesortOMP.cpp). 但是，我在此答案中提供的代码有一些更正和性能改进。

**一个完整的运行示例：**

```
#include <assert.h>
#include <string.h>
#include <stdlib.h>
#include <stdio.h>
#include <omp.h>

#define TASK_SIZE 100

unsigned int rand_interval(unsigned int min, unsigned int max)
{
    // https://stackoverflow.com/questions/2509679/
    int r;
    const unsigned int range = 1 + max - min;
    const unsigned int buckets = RAND_MAX / range;
    const unsigned int limit = buckets * range;

    do
    {
        r = rand();
    } 
    while (r >= limit);

    return min + (r / buckets);
}

void fillupRandomly (int *m, int size, unsigned int min, unsigned int max){
    for (int i = 0; i < size; i++)
    m[i] = rand_interval(min, max);
} 

void mergeSortAux(int *X, int n, int *tmp) {
   int i = 0;
   int j = n/2;
   int ti = 0;

   while (i<n/2 && j<n) {
      if (X[i] < X[j]) {
         tmp[ti] = X[i];
         ti++; i++;
      } else {
         tmp[ti] = X[j];
         ti++; j++;
      }
   }
   while (i<n/2) { /* finish up lower half */
      tmp[ti] = X[i];
      ti++; i++;
   }
   while (j<n) { /* finish up upper half */
      tmp[ti] = X[j];
      ti++; j++;
   }
   memcpy(X, tmp, n*sizeof(int));
} 

void mergeSort(int *X, int n, int *tmp)
{
   if (n < 2) return;

   #pragma omp task shared(X) if (n > TASK_SIZE)
   mergeSort(X, n/2, tmp);

   #pragma omp task shared(X) if (n > TASK_SIZE)
   mergeSort(X+(n/2), n-(n/2), tmp + n/2);

   #pragma omp taskwait
   mergeSortAux(X, n, tmp);
}

void init(int *a, int size){
   for(int i = 0; i < size; i++)
       a[i] = 0;
}

void printArray(int *a, int size){
   for(int i = 0; i < size; i++)
       printf("%d ", a[i]);
   printf("\n");
}

int isSorted(int *a, int size){
   for(int i = 0; i < size - 1; i++)
      if(a[i] > a[i + 1])
        return 0;
   return 1;
}

int main(int argc, char *argv[]) {
        srand(123456);
        int N  = (argc > 1) ? atoi(argv[1]) : 10;
        int print = (argc > 2) ? atoi(argv[2]) : 0;
        int numThreads = (argc > 3) ? atoi(argv[3]) : 2;
        int *X = malloc(N * sizeof(int));
        int *tmp = malloc(N * sizeof(int));

        omp_set_dynamic(0);              /** Explicitly disable dynamic teams **/
        omp_set_num_threads(numThreads); /** Use N threads for all parallel regions **/

         // Dealing with fail memory allocation
        if(!X || !tmp)
        { 
           if(X) free(X);
           if(tmp) free(tmp);
           return (EXIT_FAILURE);
        }

        fillupRandomly (X, N, 0, 5);

        double begin = omp_get_wtime();
        #pragma omp parallel
        {
            #pragma omp single
            mergeSort(X, N, tmp);
        }   
        double end = omp_get_wtime();
        printf("Time: %f (s) \n",end-begin);

        assert(1 == isSorted(X, N));

        if(print){
           printArray(X, N);
        }

        free(X);
        free(tmp);
        return (EXIT_SUCCESS);
} 
```

4 核机器中的 had-doc 基准测试产生以下结果：

```
100000000 elements 
1 thread : Time: 11.052081 (s)
2 threads: Time: 5.907508  (s)
4 threads: Time: 4.984839  (s)

A overall Speed up of 2.21x 
```

未来的改进将在[GitHub 上](https://github.com/dreamcrash/StackOverflow-/blob/main/OpenMP/MergeSort/main.c)提供。

* * *

可以在[此处](https://cw.fel.cvut.cz/old/_media/courses/b4m35pag/lab6_slides_advanced_openmp.pdf)找到并行版本的高级 C++ 版本。最终算法如下所示：

```
void mergeSortRecursive(vector<double>& v, unsigned long left, unsigned long right) {
   if (left < right) {
      if (right-left >= 32) {
         unsigned long mid = (left+right)/2; 
         #pragma omp taskgroup
         {
            #pragma omp task shared(v) untied if(right-left >= (1<<14))
            mergeSortRecursive(v, left, mid);
            #pragma omp task shared(v) untied if(right-left >= (1<<14))
            mergeSortRecursive(v, mid+1, right);
            #pragma omp taskyield
         }
         inplace_merge(v.begin()+left, v.begin()+mid+1, v.begin()+right+1);
      }else{
         sort(v.begin()+left, v.begin()+right+1);
     }
    }
  }
}

void mergeSort(vector<double>& v) { 
     #pragma omp parallel
     #pragma omp single
     mergeSortRecursive(v, 0, v.size()-1); 
} 
```

报告的加速`6.61x`为 48 个线程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-11-26T11:06:39.777

这个问题的现代答案是使用任务而不是部分。任务是在 OpenMP 3.0 (2009) 中添加的，并且比嵌套并行和部分工作得更好/更容易，因为嵌套并行会导致超额订阅（比可用 CPU 更多的活动线程），从而导致性能显着下降。对于任务，您有一组与 CPU 数量相匹配的线程，它们将处理这些任务。所以你不需要手动处理`threads`参数。一个简单的解决方案如下所示：

```
// span parallel region outside once outside
void mergesort_omp(...) {
    #pragma omp parallel
    #pragma omp single
    mergesort_parallel_omp(...)
}

void mergesort_parallel_omp (int a[], int size, int temp[]) 
{  
    #pragma omp task
    mergesort_parallel_omp(a, size/2, temp);

    mergesort_parallel_omp(a + size/2, size - size/2, temp + size/2);

    #pragma omp taskwait
    merge(a, size, temp); 
} 
```

但是，为太小的工作块创建任务仍然可能会出现问题，因此根据工作粒度限制并行度很有用，例如：

```
void mergesort_parallel_omp (int a[], int size, int temp[]) 
{  
    if (size < size_threshold) {
        mergesort_serial(a, size, temp);
        return;
    }
    #pragma omp task
    mergesort_parallel_omp(a, size/2, temp);

    mergesort_parallel_omp(a + size/2, size - size/2, temp + size/2);

    #pragma omp taskwait
    merge(a, size, temp); 
} 
```

# magento - Magento：删除产品特价“从”和“到”日期要求

> ID：13811116
> 
> 赞同：2
> 
> 时间：2012-12-10T23:31:04.163
> 
> 标签：magento, magento-1.5

我正在尝试从特价功能中删除“从”和“到”日期要求，但找不到正确的文件。我不确定它是在核心 php 文件中还是在模板 phtmls 中。

我使用的 Magento 商店与销售点系统集成，该系统导入包括“特价”字段的产品，每 5 分钟更新一次，但无法从 POS 系统传递日期，因此我需要删除 from 和迄今为止价格计算的一部分。

编辑：到目前为止，我发现这些文件调用'getSpecialToDate()' app/code/core/Mage/Catalog/Model/Resource/Eav/Mysql4/Product/Collection.php app/code/core/Mage/Catalog/型号/产品/类型/Price.php app/code/core/Mage/Catalog/Model/Product.php

但我仍然无法修改它们以获得所需的结果。

我尝试更改文件以包含硬编码日期而不是调用日期。例如在 Collection.php 1079 附近的行中

```
$specialPriceFrom = $product->getSpecialFromDate();
$specialPriceTo = $product->getSpecialToDate(); 
```

至：

```
$specialPriceFrom = '1990-01-01 00:00:00';
$specialPriceTo = '2099-12-31 00:00:00'; 
```

仍然没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T12:38:43.237

在 magento 中，'special_from_date' 和 'special_to_date' 是属性。
所以你可以从管理面板管理它。

转到管理->目录->属性->管理属性集。
在这里选择您的属性集进行编辑。
在这里，如果您拖放`special_from_date`到`special_to_date`未分配的属性而不是因为系统属性而移动。

转到 mageto 数据库并找到`eav_attribute`表。
查找和`attribute_code`的行。 在该行中找到将值 0 更改为 1的列。 现在在管理面板中将该属性移动到未分配的属性。 保存该属性集。 现在在保存的属性集中删除了“从日期开始的特价”和“到现在的特价”。`special_from_date``special_to_date`
`is_user_defined`

# ruby - 配置 Compass Sinatra 以使用 scss

> ID：13811117
> 
> 赞同：1
> 
> 时间：2012-12-10T23:31:07.403
> 
> 标签：ruby, sinatra, sass, compass-sass

我正在尝试建立一个 Sinatra 项目以首次使用 Sass 和 Compass。[我从https://github.com/chriseppstein/compass-sinatra](https://github.com/chriseppstein/compass-sinatra)下载了示例应用程序。App.rb 当前已正确配置为自动编译 .sass 文件，但是如何将其配置为查找 .scss 文件呢？

```
get '/stylesheets/:name.css' do
  content_type 'text/css', :charset => 'utf-8'
  sass(:"stylesheets/#{params[:name]}", Compass.sass_engine_options )
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:16:51.680

So it turns out to be a simple configuration change from **sass**() to **scss**() in line 3

```
get '/stylesheets/:name.css' do
  content_type 'text/css', :charset => 'utf-8'
  scss(:"stylesheets/#{params[:name]}", Compass.sass_engine_options )
end 
```

# c++ - opencv 和 ffmpeg 0 kbyte 文件

> ID：13811121
> 
> 赞同：0
> 
> 时间：2012-12-10T23:31:44.663
> 
> 标签：c++, opencv

我是 OpenCV 的新手，试图用 ffmpeg 录制简单的视频，但大小每次都是 0kb ......我用 Cinepak 编解码器取得了成功，但视频录制速度很快，或者我将 fps 设置为 4 和 cwWaitKey(20) .. 这里是我正在尝试的代码..

```
 cvNamedWindow("Webcam", CV_WINDOW_AUTOSIZE);
    CvCapture *cap; cap = cvCreateCameraCapture(0);
    IplImage *img; img = cvQueryFrame(cap);
    CvVideoWriter *writer;
    double fps = cvGetCaptureProperty(cap, CV_CAP_PROP_FPS);
    int camWidth = (int)cvGetCaptureProperty(cap, CV_CAP_PROP_FRAME_WIDTH);
    int camHeight = (int)cvGetCaptureProperty(cap, CV_CAP_PROP_FRAME_HEIGHT);
    CvSize size = cvSize(camWidth, camHeight);
    writer = cvCreateVideoWriter("record.avi", CV_FOURCC('M','J','P','G'), fps, size);

    while(cvQueryFrame(cap))
    {
        img = cvRetrieveFrame(cap);
        cvWriteFrame(writer, img);
        cvShowImage("Webcam", img);
        cvWaitKey(20);
    } 
```

//在这里释放东西。

有人可以告诉我我做错了什么吗？谢谢你。

PS 我也尝试了其他 FOURCC，但结果仍然相同，文件为 0 kbytes，没有写入任何内容.. 帮助 :( 尝试了 FOURCC：XVID、MP4V、FVFW、MPEG、MPG1/2、WM1/2。

PPS 使用 Windows 7 x64，安装了 ffmpeg x86 和 x64 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:21:03.410

It's been a while for me (did something like that back at University 4 years ago), but from what I remember is the fact that not every codec available on Windows includes an encoder as well as a decoder. Most of them might be decoder only. As such some FOURCCs will work while others produce errors or simply won't work at all.

FFMPEG provides several codecs, but I think they're not available from within OpenCV: I think they're provided as DirectShow filters, while OpenCV uses the classic Video for Windows interface (I might be wrong here, so feel free to correct me on this).

The timing issue you experience is easy to explain: If you set the video's fps to 4 you'll have to ensure to only take and paste 4 images per second. Otherwise you're essentially creating a slow motion or time lapse video. There are more elegant ways, but using basic OpenCV functions this is probably the easiest solution already.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:58:31.920

已修复.. 我刚刚下载了 DIVX 编解码器，安装并使用了 DIVX Fourcc，就像一个魅力。但是我仍然在计算帧数时遇到问题，呵呵:-) 10 fps 将是 100 帧，但我以 25 fps 失败.. 25 * 10 不起作用。

# perl - DBIx::Class 模式处理在内存和磁盘 SQLite 之间有所不同

> ID：13811124
> 
> 赞同：1
> 
> 时间：2012-12-10T23:31:52.557
> 
> 标签：perl, sqlite, dbix-class, in-memory-database

**更新：解决了我的问题**

我再次绊倒了 make_schema_at 的行为（请参阅代码中关于 @INC 被修改的注释，我已经为此提交了错误报告）。

下面我的代码的原因（在我的第一条评论中提到的更正，即定义

```
my $dbic_schema = MySchema->connect( sub { $dbh } ); 
```

在内存数据库的情况下不起作用是 make_schema_at**断开**与句柄 $dbh 的连接！可以通过将 db 句柄的克隆传递给 make_schema_at 来解决此问题。我也认为 make_schema_at 的这种行为是一个错误，但也许这是一个品味问题。我会讨论它，也许会提交一个错误报告。我决定添加程序的更新版本，以防其他人遇到同样的问题：

**SQLite_test.pl**

```
use strict;
use warnings;

use Test::More;

use DBI;
use DBIx::RunSQL;
use Class::Load qw (load_class);
use DBIx::Class::Schema::Loader qw/ make_schema_at /;
plan tests => 1;

my $table = 'T';

my $dsn   = 'dbi:SQLite:dbname=:memory:';

#Create our test table in the target database
my $dbh = DBIx::RunSQL->create(
    dsn     => $dsn,
    sql     => 'schema.sql',
    force   => 1,
    verbose => 1,
);

#Dump the DBIx::Class Schema in the current directory
my $attrs = {
    debug          => 1,
    dump_directory => '.',
};

#pass a clone of the database handle to make_schema_at since in the current
#version it will disconnect!
my $tmp_dbh = $dbh->clone();
make_schema_at( 'MySchema', $attrs, [ sub { $tmp_dbh }, {} ] );

#Import the resulting Schema

#In the current version, make_schema_at removes '.' from @INC,
#therefore we add it:
push @INC, '.';
eval {
    require MySchema;
    MySchema->import();
    1;
} or do {
    my $error = $@;
    croak $error;
};

#Connect to the Schema and use it to count the rows in table T (just as an example)
my $dbic_schema = MySchema->connect( sub { $dbh } );

my $result_source = $dbic_schema->source('T');
my $cls           = $result_source->result_class;

my $num_records = $dbic_schema->resultset($cls)->count;
is( $num_records, 5, 'check number of records' ); 
```

* * *

**原始问题：**

我想使用内存中的 SQLite 数据库来测试 Perl 模块。想法是在 DBD::SQLite 提供的内存 SQLite 数据库中创建一些表，使用 DBIx::Class::Schema::Loader 将 DBIx::Class 模式转储到磁盘，加载生成的模式并进行测试反对这个模式。（请参阅例如[http://www.modernperlbooks.com/mt/2012/04/make-a-dbic-schema-from-ddl.html](http://www.modernperlbooks.com/mt/2012/04/make-a-dbic-schema-from-ddl.html)以了解处理 DBIx::Class 模式的基本原理。）我想使用内存数据库，因为我不想在用户安装模块时做诸如写入磁盘之类的事情。

我的问题是，使用这种内存数据库与使用磁盘 SQLite 数据库不同。

我准备了一个完整的示例来说明我的意思以及将一条线更改为另一条线会产生不同。假设在一个目录中我们有：

*   一个文件**schema.sql**，其内容如下所示并创建一个表“T”，其内容应该是无关紧要的
*   一个 SQLite 数据库 sqlite_db 没有（还）有一个表“T”
*   程序**SQLite_test.pl**

**架构.sql：**

```
CREATE TABLE T (
  id  INTEGER PRIMARY KEY,
  refid INTEGER,
  ud TEXT,
  dt TEXT,
  UNIQUE (ud,dt),
  CONSTRAINT fkey FOREIGN KEY (refid) REFERENCES T (id)
);

INSERT INTO T (id, refid, ud, dt) VALUES (1,1,'A','12.04.2011');
INSERT INTO T (id, refid, ud, dt) VALUES (2,1,'B1','12.04.2011');
INSERT INTO T (id, refid, ud, dt) VALUES (3,1,'BB','13.04.2011');
INSERT INTO T (id, refid, ud, dt) VALUES (4,4,'CCC','15.04.2011');
INSERT INTO T (id, refid, ud, dt) VALUES (5,4,'X','11.04.2011'); 
```

**SQLite_test.pl：**

```
use strict;
use warnings;

use Test::More;

use DBI;
use DBIx::RunSQL;
use Class::Load qw (load_class);
use DBIx::Class::Schema::Loader qw/ make_schema_at /;
plan tests => 1;

my $table = 'T';

# (1) Using a database on disk works:
my $dsn = 'dbi:SQLite:dbname=sqlite_db';

# (2) Using an in-memory SQLite database not:
# my $dsn   = 'dbi:SQLite:dbname=:memory:';

#Create our test table in the target database
my $dbh = DBIx::RunSQL->create(
    dsn     => $dsn,
    sql     => 'schema.sql',
    force   => 0,
    verbose => 1,
);

#Dump the DBIx::Class Schema in the current directory
my $attrs = {
    debug          => 1,
    dump_directory => '.',
};

make_schema_at( 'MySchema', $attrs, [ sub { $dbh }, {} ] );

#Import the resulting Schema

#Note: in the current version, make_schema_at removes '.' from @INC,
#therefore we add it:
push @INC, '.';
eval {
    require MySchema;
    MySchema->import();
    1;
} or do {
    my $error = $@;
    croak $error;
};

#Connect to the Schema and use it to count the rows in table T
my $dbic_schema = MySchema->connect( $dsn, q{}, q{} );

my $result_source = $dbic_schema->source('T');
my $cls           = $result_source->result_class;

my $num_records = $dbic_schema->resultset($cls)->count;
is( $num_records, 5, 'check number of records' ); 
```

现在，如图所示运行程序 SQLite_test.pl （第一次运行时，在下一次运行之前显然需要删除表 T，我不想使示例复杂化）。但是，如果在 (1) 之后注释了该行并在 (2) 之后注释掉了该行，则会收到以下错误，说找不到表“T”：

```
DBI Exception: DBD::SQLite::db prepare_cached failed: no such table: T [for Statement "SELECT COUNT( * ) FROM T me"] at
C:/strawberry/perl/site/lib/DBIx/Class/Schema.pm line 1101.
        DBIx::Class::Schema::throw_exception('MySchema=HASH(0x1e49df4)', 'DBI Exception: DBD::SQLite::db prepare_cached
failed: no such...') called at C:/strawberry/perl/site/lib/DBIx/Class/Storage.pm line 112
        DBIx::Class::Storage::throw_exception('DBIx::Class::Storage::DBI::SQLite=HASH(0x342c64c)', 'DBI Exception: DBD::
SQLite::db prepare_cached failed: no such...') called at C:/strawberry/perl/site/lib/DBIx/Class/Storage/DBI.pm line 1427

        DBIx::Class::Storage::DBI::__ANON__('DBD::SQLite::db prepare_cached failed: no such table: T [for ...', 'DBI::db
=HASH(0x3311c7c)', undef) called at C:/strawberry/perl/site/lib/DBIx/Class/Storage/DBI.pm line 2418 
... 
```

你知道我忽略了什么吗？

**更新：**环境是 Windows 7 / Strawberry Perl 5.16.2.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:46:49.197

像您一样连接到新的内存中 SQLite db，然后运行

```
$dbic_schema->deploy; 
```

这将针对数据库生成并运行所有必需的 DDL 语句。根本不需要使用 DBIx::RunSQL，因为 DBIx::Class 已经包含该功能。

请注意，您需要安装 SQL::Translator。

# .net - VS 2010 条件配置

> ID：13811126
> 
> 赞同：0
> 
> 时间：2012-12-10T23:32:00.980
> 
> 标签：.net, visual-studio-2010, debugging

再会，

如果应用程序处于发布模式，我正在开发一个显示启动屏幕的应用程序。它的代码如下所示：

```
#if !DEBUG
   applicationScreen.Show();    // Code is greyed out in Debug mode
#endif 
```

问题是当我将应用程序设置为发布模式时，我无法通过代码查看我对启动屏幕所做的更改：我尝试了以下操作：

1.  解决方案配置下拉列表 - 选择版本
2.  构建 > 配置管理器 > 项目 > 配置 [发布]，选中构建
3.  删除 bin/Debug 和 bin/Release 文件夹并重新编译应用程序
4.  关闭VS并重新打开。

编辑 - 如果必须，我*可以*评论条件指令。

还有什么我想念的吗？

TIA,

科森

# magento - Magento - 付款方式不会显示在配置中

> ID：13811130
> 
> 赞同：0
> 
> 时间：2012-12-10T23:32:08.903
> 
> 标签：magento, magento-1.5, credit-card

我最近在 magento 1.5 上安装了一种支付方式，即 Camtech SecureXml 支付网关，但是通过 Magento connect 安装后，它的管理配置面板不显示。

请帮我。

提前非常感谢。

-克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:22:31.493

我发现 app/etc/local.xml 上的所有本地模块都被禁用，这就是安装的模块无法正常工作的原因。- 解决了

# r - 将函数应用于 3d 数组的每一层，返回一个数组

> ID：13811133
> 
> 赞同：10
> 
> 时间：2012-12-10T23:32:16.330
> 
> 标签：r

假设您有一个包含行、列和层的 3 维数组：

```
A <- array (1:27, c(3,3,3)) 
```

想象一下你有一个函数，它接受一个矩阵作为输入并返回一个矩阵作为输出，比如`t`.

如何将函数应用于数组的每一层，返回与第一个大小相同的另一个数组？

我觉得我应该能够以`apply`某种方式做到这一点，但我不能。

奖励问题（如果您回答这个问题，我将非常感激）：这样做是否更快，或者列出每个层矩阵及其`lapply`函数？

--

编辑：请不要认为这个问题得到了回答——下面的答案没有回答这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T23:39:32.590

您必须考虑要提取值的边距。

`3rd`您可以通过应用维度 1 和 2（需要更好的词的行和列）来转置每个维度矩阵

```
apply(A,1:2,t)
, , 1

     [,1] [,2] [,3]
[1,]    1    2    3
[2,]   10   11   12
[3,]   19   20   21

, , 2

     [,1] [,2] [,3]
[1,]    4    5    6
[2,]   13   14   15
[3,]   22   23   24

, , 3

     [,1] [,2] [,3]
[1,]    7    8    9
[2,]   16   17   18
[3,]   25   26   27 
```

您还可以使用`plyr`and `aaply`which 可能会更直观地执行

```
library(plyr)

aaply(A,3,t)
, ,  = 1

X1   1  2  3
  1  1  4  7
  2 10 13 16
  3 19 22 25

, ,  = 2

X1   1  2  3
  1  2  5  8
  2 11 14 17
  3 20 23 26

, ,  = 3

X1   1  2  3
  1  3  6  9
  2 12 15 18
  3 21 24 27 
```

至于哪个更快`lapply`或`apply`，我认为也许`lapply`会赢，但是您仍然需要考虑要从中提取矩阵的边距。

我通常发现在一个维度上思考要容易得多。如果地球是平的，一切都会更直接！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:16:33.073

换位的另一种可能性是 function `aperm`。

```
A <- array (1:27, c(3,3,3))
# aperm permute the dimensions in the given order
# here we want to permute dimension 1 and 2
# so the new order is 2-1-3 instead of 1-2-3
aperm(A, c(2,1,3)) 
    , , 1

     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    4    5    6
[3,]    7    8    9

, , 2

     [,1] [,2] [,3]
[1,]   10   11   12
[2,]   13   14   15
[3,]   16   17   18

, , 3

     [,1] [,2] [,3]
[1,]   19   20   21
[2,]   22   23   24
[3,]   25   26   27 
```

就将函数应用于每一层（比如你想将每一层乘以不同的值）而言，这是另一种可能性：

```
vec <- c(1,5,3)
lapply(seq_along(vec), function(x)A[,,x]*vec[x])
[[1]]
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9

[[2]]
     [,1] [,2] [,3]
[1,]   50   65   80
[2,]   55   70   85
[3,]   60   75   90

[[3]]
     [,1] [,2] [,3]
[1,]   57   66   75
[2,]   60   69   78
[3,]   63   72   81 
```

但是正如您所看到的，它创建了一个列表，因此它需要使用 function 多一步`simplify2array`：

```
simplify2array(lapply(seq_along(vec),function(x)A[,,x]*vec[x]))
, , 1

     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9

, , 2

     [,1] [,2] [,3]
[1,]   50   65   80
[2,]   55   70   85
[3,]   60   75   90

, , 3

     [,1] [,2] [,3]
[1,]   57   66   75
[2,]   60   69   78
[3,]   63   72   81 
```

或直接使用`sapply`：

```
sapply(seq_along(vec), function(x)A[,,x]*vec[x], simplify="array")
, , 1

     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9

, , 2

     [,1] [,2] [,3]
[1,]   50   65   80
[2,]   55   70   85
[3,]   60   75   90

, , 3

     [,1] [,2] [,3]
[1,]   57   66   75
[2,]   60   69   78
[3,]   63   72   81 
```

# c++ - 弥合 OpenGL 和操作系统之间的鸿沟

> ID：13811134
> 
> 赞同：1
> 
> 时间：2012-12-10T23:32:16.950
> 
> 标签：c++, opengl, cross-platform

我有兴趣使用 C++ 进行一些独立游戏开发，并且我想使用 OpenGL 3+ 来实现。我现在面临的主要问题是决定如何弥合 OpenGL 和操作系统之间的差距，因为我打算跨 Windows、Linux 和 Mac 进行所有开发。我是否应该编写自己的顶层，使用平台特定的代码进行窗口管理、I/O 等？我应该使用 SDL 或 FreeGLUT 等跨平台库吗？这些会牺牲性能吗？

作为旁注，我没有做过太多的 Linux 编程。是否有关于如何将 X Window Server 与 OpenGL 一起使用的教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:49:24.873

我使用[SFML](http://www.sfml-dev.org/) (C++ SDL)，但 FreeGLUT 和 Allegro 也都不错。它们提供基本的窗口创建、输入处理等（取决于您选择的内容）。我不认为它们中的任何一个天生就是跨平台的（它们对于 Windows、Mac、Linux 有不同的版本）。

在性能方面，单单 SFML 的窗口包（创建一个窗口并设置一个 openGL 上下文）不会减慢任何速度。不过，我在使用它的 Graphics 包时遇到了性能问题。

无法帮助您自己进行 linux 编程，但是快速的谷歌搜索让我得到了这样的[结果](http://www.opengl.org/wiki/Programming_OpenGL_in_Linux%3a_GLX_and_Xlib)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:57:41.390

> 我是否应该编写自己的顶层，使用平台特定的代码进行窗口管理、I/O 等？

不，如果你没有这方面的经验，你不应该这样做。

> 我应该使用 SDL 或 FreeGLUT 等跨平台库吗？

确实。

> 这些会牺牲性能吗？

不。对于 OpenGL 实现来说，创建窗口和上下文的方式并不重要。它看起来与 OpenGL 实现完全一样。

> 带有 OpenGL 的 X 窗口服务器？

FTB/Fungus 几年前确实在 X11 示例上发布了一个最简单的 OpenGL。我前段时间扩展了它以支持透明窗口合成。当然这不是很便携（在没有 X11 的情况下使用它，你仍然可以将它移植到 Windows 并在运行在 Windows 上的 X11 服务器上使用它）。

[https://github.com/datenwolf/codesamples/tree/master/samples/OpenGL/x11argb_opengl](https://github.com/datenwolf/codesamples/tree/master/samples/OpenGL/x11argb_opengl)

# computer-vision - 人脸检测中去饱和和均衡的意义何在？

> ID：13811135
> 
> 赞同：0
> 
> 时间：2012-12-10T23:32:24.580
> 
> 标签：computer-vision, face-detection

当我播放人脸检测代码时，我感到有些困惑。当我评论这两句话时：

```
//cvtColor( frame, frame_gray, CV_BGR2GRAY );
//equalizeHist( frame_gray, frame_gray ); 
```

结果还是一样，这意味着Opencv（detectMultiScale）仍然可以成功找到人脸。我在想将彩色图像更改为灰度图像，然后得到灰度图像的直方图有什么意义？

我附上部分代码如下：

```
while (cvWaitKey(10) < 0)
{
Mat frame = cvQueryFrame( capture ); // get the next frame of video
cvtColor( frame, frame_gray, CV_BGR2GRAY );
equalizeHist( frame_gray, frame_gray ); 
face_cascade.detectMultiScale( frame_gray, faces, 1.1, 2, 0|CV_HAAR_SCALE_IMAGE, Size(30, 30) ); // Detect faces
for( int i = 0; i < faces.size(); i++ ) // for each face found
{
Point center( faces[i].x + faces[i].width*0.5, faces[i].y + faces[i].height*0.5 ); // location of this face
ellipse( frame, center, Size( faces[i].width*0.5, faces[i].height*0.5), 0, 0, 360, Scalar( 255, 0, 255 ), 4, 8, 0 ); // draw ellipse around this face}
imshow( "faces", frame);
}
/////////////////////////////////////////////////////////
////////////////////////////////////////////////////////// 
```

或者：

```
while (cvWaitKey(10) < 0)
{
Mat frame = cvQueryFrame( capture ); // get the next frame of video
//cvtColor( frame, frame_gray, CV_BGR2GRAY );
//equalizeHist( frame_gray, frame_gray ); 
face_cascade.detectMultiScale( frame, faces, 1.1, 2, 0|CV_HAAR_SCALE_IMAGE, Size(30, 30) ); // Detect faces
for( int i = 0; i < faces.size(); i++ ) // for each face found
{
Point center( faces[i].x + faces[i].width*0.5, faces[i].y + faces[i].height*0.5 ); // location of this face
ellipse( frame, center, Size( faces[i].width*0.5, faces[i].height*0.5), 0, 0, 360, Scalar( 255, 0, 255 ), 4, 8, 0 ); // draw ellipse around this face}
imshow( "faces", frame);
}
////////////////////////////////////////////// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T03:41:16.687

去饱和的目的是减少数据量，因为该算法在没有颜色的情况下工作。均衡点是为了补偿照明变化。

您可以在此处找到更多信息：[使用 OpenCV 进行人脸识别](http://opencv.willowgarage.com/wiki/FaceRecognition)

# django - django-admin-tools 标记问题

> ID：13811140
> 
> 赞同：1
> 
> 时间：2012-12-10T23:32:51.303
> 
> 标签：django, django-admin, django-admin-tools

我尝试为 django 安装管理工具。我有奇怪的CSS，很明显有问题。但是什么？谷歌和 css 分析没有帮助。

[截屏](http://i.stack.imgur.com/Wqjtf.png)

谢谢！

**更新和解决方案：**

我做了功课并解决了问题。我得到了什么：

当我添加 admin-tools.theming 时，缺少 base.css。原因是走错了路。而不是 /static/admin/css/base.css 它是 /admin-media/css/base.css。“admin-media”是我的管理媒体前缀。当我尝试设置我的 apache 服务器然后我更改了静态路径时，我离开了它。

因此，只需将正确的管理媒体前缀定义为“/static/admin/”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:56:30.820

[Firebug](https://addons.mozilla.org/en-us/firefox/addon/firebug/)是你的朋友。在 Firefox 中安装它（或在 Chrome 中使用 Firebug Lite）。转到您的页面，按 F12，单击元素选择工具（Firebug 窗格右上方带有箭头的蓝色框），然后单击有问题的项目。在左侧，您将看到各种良好的样式信息，包括文件和行号，以及（如果向下滚动）被一个或另一个文件*覆盖的所有样式规则。*

启蒙运动很快到来。

如果您仍然有问题，请使用指向问题的实时页面的链接更新您的问题，以便我们可以查看它（屏幕截图是坏点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T16:36:40.113

我也有同样的问题，但深入研究这些问题后，我发现我使用的“django-admin-tools”版本与 django 版本（1.4）不兼容。这意味着 django-admin-tools 已经进行了许多更改以适应在 Django 中所做的修改。由于没有为 django-admin-tools 的最新源代码创建包，因此使用“easy_install”和“pip”将始终获取旧版本。

所以解决办法是从这里下载最新的源代码

[https://bitbucket.org/izi/django-admin-tools/downloads](https://bitbucket.org/izi/django-admin-tools/downloads)

[https://bitbucket.org/izi/django-admin-tools/get/tip.zip](https://bitbucket.org/izi/django-admin-tools/get/tip.zip)

并使用`'setup.py install'`命令安装它们。

# python - 使用 pyparsing 为 DSL 评估嵌套变量

> ID：13811144
> 
> 赞同：1
> 
> 时间：2012-12-10T23:33:14.903
> 
> 标签：python, dsl, pyparsing

我一直在努力用 pyparsing 构建我的 DSL，并取得了很好的进展。我的第一个里程碑是评估包含算术运算符、数据库字段引用和一组函数（Avg、Stdev 等）的表达式。此外，我还实现了将表达式分配给变量，以便能够以模块化的方式构建复杂的表达式。到现在为止还挺好。

在尝试将变量作为参数计算函数时，我现在遇到了下一个主要障碍。具体来说，我的数据库引用（这是执行计算的构建块）需要将 Person 指定为查询的维度。当它们包含在函数中时，我不知道强制重新评估分配给这些变量的表达式的最佳方法。有问题的具体例子：

```
1) CustomAvg = Avg[Height] + Avg[Weight]
2) Avg[CustomAvg] 
```

评估语句 2 在人员列表中无法按预期工作，因为 CustomAvg 被解析为一个常量值。

在这些场景中，我有一个人员列表，我遍历这些人员以计算 CustomAvg 的组件。但是，当我评估 Avg[CustomAvg] 时，CustomAvg 的值来自我的变量查找字典而不是被评估，因此我有效地迭代了一个常量值。在我的评估中引入“意识”的最佳方法是什么，以便重新评估函数中用作参数的变量而不是从查找表中获取？以下是精简的相关代码：

```
class EvalConstant(object):
    var_ = {}
    def __init__(self, tokens):
        self.value = tokens[0]

    def eval(self):
        v = self.value
        if self.var_.has_key(v):
            return self.var_[v]
        else:
            return float(v)

class EvalDBref(object):
    person_ = None
    def __init__(self, tokens):
        self.value = tokens[0]

    def eval(self):
        v = self.value
        fieldRef = v.split(':')
        source = fieldRef[0]
        field = fieldRef[1] 
        rec = db[source].find_one({'Name' : self.person_}, { '_id' : 0, field : 1})
        return rec[field]

class EvalFunction(object):
    pop_ = {}
    def __init__(self, tokens):
        self.func_ = tokens.funcname
        self.field_ = tokens.arg
        self.pop_ = POPULATION

    def eval(self):
        v = self.field_.value
        fieldRef = v.split(':')
        source = fieldRef[0]
        field = fieldRef[1]

        val = self.field_.eval()

        if self.func_ == 'ZS':
            # If using zscore then fetch the field aggregates from stats
            rec = db['Stats'].find_one({'_id' : field})   
            stdev = rec['value']['stddev']          
            avg = rec['value']['avg']
            return (val - avg)/stdev
        elif self.func_ == 'Ptile':
            recs = list(db[source].find({'Name' : { '$in' : self.pop_}},{'_id' : 0, field : 1}))
            recs = [r[field] for r in recs]
            return percentileofscore(recs, val)

def assign_var(tokens):
    ev = tokens.varvalue.eval()
    EvalConstant.var_[tokens.varname] = ev

#--------------------
expr = Forward()
chars = Word(alphanums + "_-/") 
integer = Word(nums)
real = Combine(Word(nums) + "." + Word(nums))
var = Word(alphas)

assign = var("varname") + "=" + expr("varvalue")
assign.setParseAction(assign_var)

dbRef = Combine(chars + OneOrMore(":") + chars)
dbRef.setParseAction(EvalDBref)

funcNames = Keyword("ZS") | Keyword("Avg") | Keyword("Stdev")
functionCall = funcNames("funcname") + "[" + expr("arg") + "]"
functionCall.setParseAction(EvalFunction)

operand =  dbRef | functionCall | (real | integer| var).setParseAction(EvalConstant) 

signop = oneOf('+ -')
multop = oneOf('* /')
plusop = oneOf('+ -')

expr << operatorPrecedence(operand,
   [
    (signop, 1, opAssoc.RIGHT, EvalSignOp),
    (multop, 2, opAssoc.LEFT, EvalMultOp),
    (plusop, 2, opAssoc.LEFT, EvalAddOp),
   ])

EvalDBref.person_ = ‘John Smith’
ret = (assign | expr).parseString(line)[0]
str(ret.eval()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:10:31.970

所以在这个表达式中：

```
CustomAvg = Avg[Height] + Avg[Weight] 
```

`Height`并且`Weight`应该立即进行评估，但`CustomAvg`应该在将来的某个时间进行评估？听起来这更像是函数或可调用的定义，而不是新常量的定义。我认为你所要做的就是改变发生的事情`assign_var`：

```
def assign_var(tokens):
    # ev = tokens.varvalue.eval()
    # EvalConstant.var_[tokens.varname] = ev
    EvalConstant.var_[tokens.varname] = tokens.varvalue 
```

现在每个分配的变量都不是一个常量值，而是一个 eval'able 表达式，类似于在 Python 中创建一个 lambda。然后`EvalConstant.eval`必须检测它是否可以只传回一个值，或者该值本身是否需要被评估：

```
def eval(self):
    v = self.value
    if v in self.var_:  # has_key is deprecated Python, use 'in'
        varval = self.var_[v]
        return varval.eval() if hasattr(varval,'eval') else varval
    else:
        return float(v) 
```

如果您不总是希望这种情况发生，那么我认为您可能需要一些新语法来区分何时分配常量与定义本质上是 lambda 的内容，可能类似于：

```
CustomAvg = Avg[Height] + Avg[Weight]    # store as a constant
CustomAvg *= Avg[Height] + Avg[Weight]   # store as a callable 
```

并更改`assign`为：

```
assign = var("varname") + oneOf("= *=")("assign_op") + expr("varvalue") 
```

然后`assign_var`变成：

```
def assign_var(tokens):
    if tokens.assign_op == '*=':
        # store expression to be eval'ed later
        EvalConstant.var_[tokens.varname] = tokens.varvalue
    else:
        # eval now and save result
        EvalConstant.var_[tokens.varname] = tokens.varvalue.eval() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:50:18.763

我认为你的问题是范围界定。函数的参数通常被认为与局部变量在同一范围内。因此，该语句`CustomAvg = Avg[Height] + Avg[Weight] Avg[CustomAvg]`应该将本地的*当前值*`CustomAvg`压入堆栈，计算表达式，然后将结果存储到 CustomAvg。（或者`CustomAvg`，如果您使用的是名称/值的 Pythonic 视图，则将名称设置为指向结果。）

由于赋值是在值被压入 eval 堆栈之后很久才发生的，因此不应该有任何歧义。

# database-design - 将两种类型的客户归一化为一张表

> ID：13811146
> 
> 赞同：0
> 
> 时间：2012-12-10T23:33:27.840
> 
> 标签：database-design

我正在尝试模拟一种销售情况，您可以在这种情况下向某人或有联系人的企业进行销售。我想不出正确的方法来做到这一点。

似乎 2 个表不正确。但是，我如何为`Customer`可以是企业或个人的表格建模？我是否只有一个`boolean`用于“业务”的字段和一个默认为 Null 的附加“业务名称”字段。但后来我必须在列上做一个 if/then ，这似乎是糟糕的设计。

任何建议、方向或链接表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:43:39.877

[这个 SO 答案](https://stackoverflow.com/a/4690648/562459)专门针对个人和组织。[这个](https://stackoverflow.com/a/4690648/562459)在稍微不同的应用程序中使用相同的技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:00:32.750

有关两种设计替代方案和相关技术的详细说明，请参阅有关“单表继承”、“类表继承”和“共享主键”的谷歌文章。

在 SO 中也有所有这三个的标签。

# android - 线程安全的 RNG Android NDK

> ID：13811148
> 
> 赞同：0
> 
> 时间：2012-12-10T23:33:51.320
> 
> 标签：android, linux, multithreading, prng

Bionic 中有线程安全的 RNG 吗？对于 Linux，我知道有`rand_r()`，但不幸的是，这不是 NDK 的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T03:32:13.220

您可以简单地读取`/dev/urandom/`以获取伪随机字节。如果您出于加密目的需要它，您可能还需要查看 OpenSSL。

# node.js - Haskell 的非阻塞 IO

> ID：13811153
> 
> 赞同：4
> 
> 时间：2012-12-10T23:34:09.477
> 
> 标签：node.js, haskell, nonblocking, continuation-passing

> **可能重复：**
> [Haskell 对 Node.js 的响应是什么？](https://stackoverflow.com/questions/3847108/what-is-the-haskell-response-to-node-js)
> [如何在 Haskell 中查看多个文件/套接字以使其可读/可写？](https://stackoverflow.com/questions/11744527/how-can-i-watch-multiple-files-socket-to-become-readable-writable-in-haskell)

是否可以编写一个像 nodejs 那样以非阻塞方式执行 IO 的 Haskell 程序？

例如，我想从一个很远的数据库中获取 10 条记录，所以我想同时触发 10 个请求，当结果可用时，然后返回这个集合。IO monad 不会有帮助，因为 monad 使用 bind 显式地序列化计算。我认为你传递接下来想要的计算的延续传递风格有同样的问题，它再次序列化计算。我不想使用线程，我正在寻找另一种解决方案。这可能吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-11T01:09:39.583

Haskell 线程的重量非常轻。更重要的是，GHC 的 IO monad 大部分时间都使用事件驱动调度，这意味着普通的 Haskell 代码就像延续传递风格的 node.js 代码（只编译为原生代码并在多个 CPU 上运行......）

你的例子是微不足道的

```
import Control.Concurrent.Async

--given a list of requests
requests :: [IO Foo]

--you can run them concurrently
getRequests :: IO [Foo]
getRequests = mapConcurrently id requests 
```

`Control.Concurrent.Async`可能正是您正在寻找的期货库。Haskell 不应该仅仅因为数千个（普通）线程而窒息。我从未编写过使用数百万个 IO 线程的代码，但我猜你唯一的问题是与内存相关的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-11T04:24:09.253

为了充实对 的评论`Control.Concurrent.Async`，这里是一个使用[`async`](http://hackage.haskell.org/package/async)包的示例。

```
import Network.HTTP.Conduit
import Control.Concurrent.Async

main = do
    xs <- mapM (async . simpleHttp) [ "www.stackoverflow.com"
                                    , "www.lwn.net"
                                    , "www.reddit.com/r/linux_gaming"]
    [so,lwn,lg] <- mapM wait xs
    -- parse these how ever you'd like 
```

因此，在上面我们为三个不同的网站定义了三个 HTTP get 请求，异步启动这些请求，并等待所有三个完成后再继续。

# castle-windsor - 是否可以使用 WindsorContainer 的实例方法配置 Castle 动态代理？

> ID：13811155
> 
> 赞同：0
> 
> 时间：2012-12-10T23:34:33.253
> 
> 标签：castle-windsor, castle-dynamicproxy

...或者 Castle 是否需要控制构建过程才能用代理包装对象？

我尝试了几种不同的配置——下面是我目前正在使用的配置，但是当我请求对象时没有应用拦截器：

```
container.Kernel.Register(Component.For<IMyService>()
            .Instance(myService)
            .Interceptors(InterceptorReference.ForType<MyServiceProxy>()).Last,
        Component.For<MyServiceProxy>()
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:30:59.290

不，默认`InstanceActivator`不支持代理。

# javascript - 具有大量数据的 JSON / jQuery 性能

> ID：13811157
> 
> 赞同：3
> 
> 时间：2012-12-10T23:34:40.480
> 
> 标签：javascript, jquery, json, performance, show-hide

这是我在这个网站上的第一个问题，我希望有经验的人能给我一些建议。

我已经为客户端构建了一个 javascript/jquery 应用程序，它的关键特性是某些项目的过滤机制。大约有 2000 个这样的项目存储在这样的列表中：

```
<ul>
<li id='3000429'>Item</li>
<li id='3000429'>Item</li>
<li id='3000429'>Item</li>
<li id='3000429'>Item</li>
</ul> 
```

因此，大约 2000 行 html 仅用于此`<li>`目的，出于演示目的，我已经删除了元素的 onClick 处理程序。在页面加载时通过 php 从 mysql db 生成具有适当 id 的 html 列表。

我现在要做的是从我的数据库中过滤我的结果并首先隐藏所有项目，然后一旦我通过 ajax 从 PHP 返回计算结果，这是一个数组 od id，然后我只显示结果中的项目 id数组（使用 jQuery`.show()`和`.hide()`）。所以所有的项目都一直存在于代码中，只是有些是隐藏的。

**使用 JSON 并在收到结果后从 html 列表中完全删除所有项目会更好，然后生成新的 html 项目，这些项目通过 JSON 对象和 jQuery 从数据库中过滤掉。**

我问是因为我知道有些浏览器不能很好地承受大量 html 的压力（尤其是 IE ......）。

当我得到很多结果时，比如说超过 1000 个，所有浏览器都会有点滞后，可能是因为它们正在浏览所有项目并重新显示项目 ( `.show()`)。如果用户在短时间内触发过滤，用户体验就会很糟糕。

那么，从性能的角度来看，你们认为我会更好地加载 JSON 并不断生成和删除 html，还是我现在设置它的方式（显示/隐藏方法）？我是 JSON 新手，所以当涉及到大量数据时，我不太熟悉它的性能方面。

预先感谢，我很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:45:17.830

您应该使用额外的库，例如**主干和下划线**堆栈（下划线具有 fenomenal 过滤和其他实用程序以及模板，并且堆栈非常适合您的目的），或者您应该考虑**angular.js**，它也具有更高级别的操作列表、对象、数据和 html。在 Angular 中，您可以使用 2-3 行代码实现复杂的过滤和动态 html 更新。

无论如何，不​​管性能如何，不要用html`<li>`项做，用数据做。我建议的这些库将使它**更**简单、更快。

值得学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:41:35.073

作为性能的一般提示，尝试减少 DOM 操作，如果您生成 nel HTML 代码并使用 $().html() 更改容器标签的内容，这比遍历 2000 个标签元素并更改 1000 个标签的可见性要快得多其中。

您还可以在容器上监听 click 事件，避免 2000 个事件监听器

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T00:07:07.767

我有一个 HTML+JavaScript Web 应用程序，它的页面包含多达 50,000 行，每行都有唯一的数据。在我继承的原始代码中，服务器将生成完整的标记（大约 30MB 的 HTML），然后在每次更改某些过滤器约束时生成一个过滤列表（再次在服务器上）。性能非常糟糕，页面会默认为过滤最多（也是最不实用）的视图，并包含一个警告，即扩展结果仅适用于现代计算机。以下是我修复它的方法以及我做出每个选择的原因。

首先，为了解决发送的数据量问题，我创建了一个精简的 JSON 表示（查看[Google Charts Datasource API](https://developers.google.com/chart/interactive/docs/dev/implementing_data_source#jsondatatable)以获得一个可靠的示例）（当我将它与 GZip 压缩结合使用时，这将数据减少到大约 1 MB）

然后下一个问题是，一个有 50,000 行（每个有 4 个单元格）的表会创建 250,000 个 DOM 节点（每个`<tr>`和`<td>`都是一个节点），这对 Selector 引擎和渲染管道来说是一个巨大的负担。为了解决这个问题，我通过 AJAX 获取 JSON 并将其结果存储在 AJAX 获取函数之外的变量中。然后我编写了代码来使用这些缓存数据并将其呈现在页面中（因此页面更改事件不会返回到服务器）。我使用了每页最好的行数（500 似乎最符合我的需要）。至于隐藏经文重建，我说重建。当您要隐藏的事物数量增加时，隐藏特定单元格的性能提升很快就会消失。

最后因为每个节点在页面上都不可见，例如`Ctrl`+`F`找到都坏了。为此，我创建了一个过滤的渲染函数，因此可以使用页面内 UI 处理表过滤（这让我可以根据特定列进行查找，甚至可以处理未在表中呈现但通过 JSON 传递的数据） . 另一个挑战是打印，同样因为没有一个页面可以直观地表示所有内容。为了解决这个问题，我做了一些更复杂的事情。使用 MemcacheD，我将过滤后的结果存储在服务器上，并添加了一个导出到 PDF 按钮，该按钮将获取结果集的缓存副本（您必须调整 MemCacheD 以存储大于 1MB 的内容）。从用户的角度来看，PDF（由我可以控制的服务器生成）可能比我无法控制的浏览器受到更多的惩罚。

最后，我对结果非常满意。现在页面加载在几秒钟内，用户喜欢他们的浏览器不会崩溃，并且该解决方案足够通用，可以轻松地将其应用于我们所有的其他报告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T00:13:21.550

而不是在客户端过滤这个，为什么不在服务器端生成列表并将其发送给客户端呢？

html

```
<div id="bigAssList">
   <ul>
      <li></li>
      A billion rows...
   </ul>
</div> 
```

js

```
$.ajax( {
   url: 'someurl.php',
   data: someFilterCriteria,
   success: function( response ) {
      $( '#bigAssList' ).html( response );
   }
} ); 
```

php

```
// query based on filter criteria
// output list in ul html form 
```

甚至更好的是，分页您的数据。我怀疑有人在一页上需要 2000 行。为什么要使用 Ajax 来做到这一点呢？提交/页面刷新不会同样有效吗？可能不必要地使这复杂化。

# c++ - 如何处理您无法访问的目录

> ID：13811159
> 
> 赞同：0
> 
> 时间：2012-12-10T23:34:51.550
> 
> 标签：c++, windows, visual-studio-2010, directory

我有一个列出所有目录的 C++ 应用程序，即您的 HDD 树。我什至可以进入这些目录查看里面有什么，但是当我想在计算机上打开另一个用户的目录时会遇到问题。我无权去那里，它应该像在 Windows XP/Vista/7 中那样声明；相反，我收到一个错误，我的应用程序终止。

我该如何处理这个，用`FILE_ATTRIBUTE_`，或其他东西，所以当用户点击一个他不能进入的目录时，我的应用程序不会崩溃？它应该只是告诉他访问被拒绝。

我的应用程序是在 VS 2010 中制作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-14T21:11:12.803

All you need to do is check the return value from `FindFirstFile` (or whatever function you use to look inside a directory) and give the user a warning instead of further processing.

The crash probably comes from trying to use the result buffer after the function failed. When the function fails, you should not look at what's in the result buffer or pass it to any other functions (like `FindNextFile`), instead assume it is total garbage.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-14T21:06:53.640

预先检测用户无法进入的目录，并且不会将它们呈现给用户界面。

# java - 使用圆圈制作屏幕保护程序.. 我如何为圆圈制作循环以便创建新圆圈？

> ID：13811160
> 
> 赞同：2
> 
> 时间：2012-12-10T23:34:56.830
> 
> 标签：java, methods, constructor, bluej

嗨，我在 BlueJ 中做一个屏幕保护程序 .. 我做了几个圈子，但需要做一个循环，以便在随机点创建新圈子，尽管我不知道该怎么做.. 这就是我做了多少。

```
public class ScreenSaver
     {
    // instance variables - replace the example below with your own
    private Circle a;
    private Circle b;
    private Circle c;
    private Circle d;

    /**
     * Constructor for objects of class ScreenSaver
     */
    public ScreenSaver()
       {
        // initialise instance variables
        //x = 0;
       }
    public void draw()
       {
        a = new Circle();
        a.moveVertical(70);
        a.changeSize(70);
        a.slowMoveVertical(-100);
        a.makeVisible();

        b= new Circle();
        b.changeColor("red");
        b.moveHorizontal(30);
        b.makeVisible();
        b.slowMoveVertical(-100);
        b.slowMoveVertical(100);

       } 
```

如何制作循环以便在随机点创建新圆圈？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:42:55.810

我将尝试仅根据“与您现在拥有的最接近的内容”来回答，那就是将代码封闭`draw()`在一个`while`循环中，直到发生某些事情。

要使圆圈出现在随机位置，您可以`new java.util.Random()`在循环之前创建一个`while`并在每次迭代中调用其`nextInt(int)`方法以获取伪随机整数并强制它在您想要的范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:43:05.213

使用随机类：

```
Random random = new Random();
int x = random.nextInt(screenWith);
int y = random.nextInt(screenyheight);
int radius = minradius + random.nextInt(50); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T17:13:10.553

我是这样的循环的倡导者：

```
while(true)
{
    //code goes here
    if (<something happens>)
    {
        break;
    }
} 
```

它的作用是它一直持续下去，然后在`if`语句到来时打破循环`true`。你有这个作为一种`waitForClick()`方法或类似的东西。同样，已经声明将`Random`类用于随机点。只是我的建议！

我希望这有帮助 ：）

# c# - 如何强制用户输入长度为“x”个数字？C＃

> ID：13811162
> 
> 赞同：1
> 
> 时间：2012-12-10T23:35:01.650
> 
> 标签：c#, regex, arrays, user-input

“创建一个程序，允许用户将最多 24 名学生输入到一个数组中，以确保学生编号正好是 5 位数字。”

我将代码设置为填充我的对象数组，但我无法弄清楚如何强制用户输入为 5 位数长。谁能指出我正确的方向？我已经尝试过使用正则表达式，但不能完全掌握它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:37:38.827

你的问题很模糊...

如果您在控制台模式下运行，您可以只检查输入的位数并拒绝它并继续循环，直到用户输入正确的位数。

如果您处于 GUI 设置中，那么只要输入控件包含少于 5 个数字，您就可以禁用任何允许用户继续下一步的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:38:19.063

在我的头顶

```
Regex r = new Regex("[0-9]{5}");
Match m = r.Match(Input);

if(m.Success) { ...} 
```

[正则表达式匹配方法](http://msdn.microsoft.com/en-us/library/twcw2f1c.aspx)

此外，您会发现这个有用[的正则表达式简介](http://msdn.microsoft.com/en-us/library/vstudio/28hw3sce%28v=vs.100%29.aspx)

您还可以通过正则表达式检查是否已将它们全部准备好以逗号分隔的字符串使用

```
([0-9]{5}[,]?){1,24} 
```

例如，将验证

> 12345,23456,345678" 但不是 "1234,45678,23

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T23:39:14.990

正则表达式：

```
/[0-9]{5}/ 
```

用“/”包围你的表达式，[0-9] 表示 0-9 之间的任何数字，{5} 表示正好 5 个字符长度。

# javascript - 带有重复事件的 Javascript 解析器 Google 日历 JSON 提要

> ID：13811163
> 
> 赞同：1
> 
> 时间：2012-12-10T23:35:19.260
> 
> 标签：javascript, json, node.js, google-calendar-api, rfc5545

我正在寻找一个 JavaScript/NodeJS 库来解析带有**重复事件**的 GoogleCalendar JSON Feed 。从现在开始，我至少需要知道下一个事件。

重复事件没有 gd$when 属性，但具有给定内容的 gd$recurrence (RFC 5545)：

```
DTSTART;TZID=Europe/Paris:20121210T082000\r\nDTEND;TZID=Europe/Paris:20121210T085000\r\nRRULE:FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR\r\nBEGIN:VTIMEZONE\r\nTZID:Europe/Paris\r\nX-LIC-LOCATION:Europe/Paris\r\nBEGIN:DAYLIGHT\r\nTZOFFSETFROM:+0100\r\nTZOFFSETTO:+0200\r\nTZNAME:CEST\r\nDTSTART:19700329T020000\r\nRRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU\r\nEND:DAYLIGHT\r\nBEGIN:STANDARD\r\nTZOFFSETFROM:+0200\r\nTZOFFSETTO:+0100\r\nTZNAME:CET\r\nDTSTART:19701025T030000\r\nRRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU\r\nEND:STANDARD\r\nEND:VTIMEZONE\r\n 
```

我在 github 上找到了一个[规则解析器](http://github.com/skyporter/rrule_parser)，但规则似乎不起作用，解析很痛苦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:06:08.287

根据[Google v2 API](https://developers.google.com/google-apps/calendar/v2/reference)我必须使用自定义参数

*   未来事件 = 真
*   或单事件=真
*   带递归扩展端

# animation - 如何在 C4 中删除动画缓动？

> ID：13811164
> 
> 赞同：1
> 
> 时间：2012-12-10T23:35:18.547
> 
> 标签：animation, c4

我有几行文字（标签）已添加到画布中。我正在为一个形状设置动画，以便它从画布外部移动到其中一个标签的正下方。

当我运行以下代码时：

```
-(void)showContent {
    shapeonpage1.animationDuration = 10.0f;
    shapeonpage1.origin = CGPointMake(0,0);
} 
```

...动画形状首先出现缓慢移动，然后逐渐加速，并在到达目的地时再次减速。

有没有办法让我的动画形状不加速和减速，而是以一致的速度移动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:45:17.527

最简单的方法是将for设置`animationOptions`为。像这样：`shapeonpage1``LINEAR`

```
-(void)showContent {
    shapeonpage1.animationDuration = 10.0f;
    shapeonpage1.animationOptions = LINEAR;
    shapeonpage1.origin = CGPointMake(0,0);
} 
```

不幸的是，没有多少例子可以展示如何充分使用动画选项。但是，您可以查看 C4Control 文档以获取更多信息。

# javascript - 网格捕获复选框中的 jqWidget CheckBox 更改

> ID：13811165
> 
> 赞同：1
> 
> 时间：2012-12-10T23:35:26.767
> 
> 标签：javascript, jquery, jquery-plugins, jqxgrid

我有一个 jqxGrid，其中有几个复选框。我需要做的是找到一个在复选框更改时触发的事件。我努力了：

*   `changed`
*   `cellbeginedit`
*   `cellendedit`
*   `cellvaluechanged`
*   `cellvaluechanging`

. 一切都无济于事。

我不想在任何单元格更改时触发和事件，只是这个复选框。

关于如何实现这一点的任何想法？
我已经包含了下面的代码。
复选框是“重新认证”行

```
$("#ModulesGrid").jqxGrid({
        width: 890,
        height: 350,
        theme: modulesTheme,
        columnsresize: true,
        source: dataAdapter,
        pageable: true,
        editable: true,
        columns: [
                  { text: 'Module Name', datafield: 'modulename', width: 100, editable: false },
                  { text: 'Optional', datafield: 'Optional', columntype: 'checkbox', width: 100 },
                  { text: 'Assigned', datafield: 'Assigned', width: 80 , columntype: 'checkbox'},
                  { text: 'Pass', datafield: 'pass',cellsrenderer: radioRenderer,width: 50, editable: false },
                  { text: 'NC', datafield: 'nc',cellsrenderer: radioRenderer,width: 50, editable: false },
                  { text: 'Fail', datafield: 'fail',cellsrenderer: radioRenderer,width: 50, editable: false },
                  { text: 'Re-Cert', datafield: 'recert', columntype: 'checkbox', width: 50, cellvaluechanged: function(event){alert(1);}},
                  { text: 'Re-Cert Reason', datafield: 'reason', width: 100, editable: false},
                  { text: 'Prior Cert', datafield: 'priorcert', width: 50, editable: false }
              ]
    }); 
```

这是 API 的链接：[http ://www.jqwidgets.com/jquery-widgets-documentation/documentation/jqxgrid/jquery-grid-api.htm](http://www.jqwidgets.com/jquery-widgets-documentation/documentation/jqxgrid/jquery-grid-api.htm)

编辑：它不会让我在 jqWidget 下标记它，因为该标记不存在并且我没有 1500 个代表。对不起，这是混淆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:50:11.023

在使用此插件时，我遇到了类似的问题。

因此，我尝试使用复选框图像并将事件分配给图像，而不是内置事件，而是将 click 事件分配给元素。

另外我注意到您没有绑定 cellbeginedit 或 cellendedit 事件..

```
$("#ModulesGrid").bind('cellbeginedit', function (event) {
     var args = event.args;
  alert("Column: " + args.datafield + ",
           Row: " + (1 + args.rowindex) + ", Value: " + args.value);
}); 
```

并从定义中删除事件并像上面一样绑定它

```
{ text: 'Re-Cert', datafield: 'recert', columntype: 'checkbox', width: 50 }, 
```

**更新**

如果是这种情况，您可以处理该特定列的 cellsrenderer 方法。

```
var columncheckboxRenderer = function(row, column, value) {
    var html;
        html = '<span style="margin:4px;float:left" onclick="clickImage(this,'
                + row + ')"><img alt="selectme" class="image-unchecked" '  
                +  src="../../Images/checkbox_off.png"/></span>';

    return html;
}

{ text: 'Re-Cert', datafield: 'recert',  width: 50,
          cellsrenderer: columncheckboxRenderer, renderer: header}, 
```

然后写下`click event`复选框......这应该可以完成工作......这就是我处理我的要求的逻辑的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:24:58.513

此示例使用 'cellendedit' 事件：[复选框选择](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/customrowsselection.htm?classic)。更改复选框的值时会引发“cellendedit”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T20:56:19.910

我能找到的最干净的方法是连接“cellvaluechanged”。这会捕获任何单元格值的变化。然后事件 args 会告诉您列名、旧值、新值等。您仍然可能需要在行之后从行中获取一些唯一标识符，例如表的唯一键（例如）。

```
 $("#grid").on("cellvaluechanged", function (event) {
        var theKey = $("#grid").jqxGrid("getcellvalue", event.args.rowindex, "key");
        doSomething(theKey, event.args.newvalue);
    }); 
```

# c# - 将 JSON 反序列化为 monodroid 上的类

> ID：13811168
> 
> 赞同：0
> 
> 时间：2012-12-10T23:35:49.653
> 
> 标签：c#, json, xamarin.android

我有一个网络服务，可根据请求输出 JSON 字符串。

目前，我设置了一个接收类，看起来像这样

```
[DataContract]
public class user_new_register
{
    [DataMember(Name="ErrorStatus")]
    public string ErrorStatus{ get; set; }
    [DataMember(Name="ErrorMessages")]
    public string []ErrorMessages { get; set; }
    [DataMember(Name="UserID")]
    public int UserID { get; set; }
} 
```

我像这样将字符串传递给服务器

```
var httpReq = (HttpWebRequest)HttpWebRequest.Create (new Uri (createUser));
httpReq.BeginGetResponse ((ar) => {
var request = (HttpWebRequest)ar.AsyncState;
using (var response = (HttpWebResponse)request.EndGetResponse (ar)) {
   var s = response.GetResponseStream (); 
```

这有效，“s”包含来自服务器的响应。我现在的问题是如何反序列化对 [DataContract] 类的回复。

我尝试了以下方法，但它不起作用

```
user_new_register register = new user_new_register ();
var stream = new MemoryStream ();
var serializer = new DataContractJsonSerializer (typeof(json.user_new_register));
var httpReq = (HttpWebRequest)HttpWebRequest.Create (new Uri (createUser));
httpReq.BeginGetResponse ((ar) => {
    var request = (HttpWebRequest)ar.AsyncState;
using (var response = (HttpWebResponse)request.EndGetResponse (ar)) {
    var s = response.GetResponseStream ();
        stream = (JsonObject)JsonObject.Load (s);
        register = (user_new_register)serializer.ReadObject (s); 
```

这编译但在 register = 行崩溃

任何帮助或建议将不胜感激:)

谢谢

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:49:12.703

我建议使用 json.net。Mono有一个大约一年前的[分支版本](https://github.com/ayoung/Newtonsoft.Json)（4.0 版），但我已经在多个项目中使用它并且它很可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:35:44.577

我在 MonoDroid 项目中使用[ServiceStack.Text 。](https://github.com/ServiceStack/ServiceStack.Text)它有.Net 最快的序列化器。

我还喜欢将反序列化作为工厂方法放在我的 DTO/模型中，如下所示：

```
using ServiceStack.Text;

public class user_new_register
{
    public string ErrorStatus { get; set; }
    public string[] ErrorMessages { get; set; }
    public int UserID { get; set; }

    public static user_new_register FromJson(string json)
    {
        return JsonSerializer.DeserializeFromString<user_new_register>(json);
    }
} 
```

# winnovative - Winnovative Html 到 PDF 页脚行

> ID：13811170
> 
> 赞同：1
> 
> 时间：2012-12-10T23:36:00.307
> 
> 标签：winnovative

我正在使用 Winnovative HTML 到 PDF 转换器并且总是得到页脚行，即使我已将 PdfFooterOptions.DrawFooterLine 设置为 false。我正在调用 HtmlToPdfArea 方法来创建页脚中的内容。

有没有人见过这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-13T13:44:34.230

您可能使用旧版本，因为当前版本支持高度可定制的页眉和页脚。请[使用完整的 C# 代码检查此 HTML 到 PDF 演示，](http://www.winnovative-software.com/htmltopdfdemo/HtmlInHeaderAndFooter.aspx)了解如何在页眉或页脚中添加或不添加一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T10:32:17.907

我在下面使用它，它对我来说工作正常希望这有帮助

```
pdfConverter.PdfFooterOptions.AddTextArea(new TextArea(250, 10, 50, "Page &p; of &P;", new Font(new FontFamily("Arial"), 8)));
        pdfConverter.PdfFooterOptions.DrawFooterLine = false; 
```

# python - Python SSL Socket：从服务器和客户端接收和发送

> ID：13811173
> 
> 赞同：3
> 
> 时间：2012-12-10T23:36:23.037
> 
> 标签：python, sockets, ssl, client

好的，所以我试图通过 SSL 套接字连接在服务器和客户端之间进行来回通信。我认为最好的方法是在每个线程中实现 2 个线程，每个线程分别充当服务器和客户端。但是当我实现此代码时（显然在其他服务器/客户端中使用相反的相应端口） ：

```
#secserv.py

import socket
from OpenSSL import SSL
import threading
import time

class SecureIn(threading.Thread):
  context = SSL.Context(SSL.SSLv23_METHOD)
  context.use_privatekey_file('key')
  context.use_certificate_file('cert')

  s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
  s = SSL.Connection(context, s)
  s.bind(('', 5570))
  def run(self):
    while True:
      self.s.listen(5)
      (connection, address) = self.s.accept()
      print repr(connection.recv(5570))

class SecureOut(threading.Thread):
  time.sleep(6)
  s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
  s.connect(('localhost', 12345))
  sslSocket = socket.ssl(s)
  print repr(sslSocket.server())
  print repr(sslSocket.issuer())
  def run(self):
    sslSocket.write('Hello secure socket\n')

  s.close()

si = SecureIn()
si.start()
time.sleep(6)
so = SecureOut()
so.start() 
```

我收到此错误：

```
Traceback (most recent call last):
  File "secserv.py", line 25, in <module>
    class SecureOut(threading.Thread):
  File "secserv.py", line 28, in SecureOut
    s.connect(('localhost', 12345))
  File "/usr/lib/python2.7/socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
socket.error: [Errno 111] Connection refused 
```

或者，我尝试让独立服务器甚至向所有客户端发送广播消息。我搜索了高低，但我似乎找不到使用 SSL 套接字的工作方法，只有常规套接字。当我尝试`s.write()`或者`s.sendall()`我得到这个错误时：

```
Traceback (most recent call last):
  File "secserv.py", line 19, in <module>
    s.write('hello client\n')
OpenSSL.SSL.Error: [('SSL routines', 'SSL_write', 'uninitialized')] 
```

从此代码：

```
import socket
from OpenSSL import SSL
context = SSL.Context(SSL.SSLv23_METHOD)
context.use_privatekey_file('key')
context.use_certificate_file('cert') 
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s = SSL.Connection(context, s)
s.bind(('', 12345))
while True:
    s.listen(5) 
    (connection, address) = s.accept()
    print repr(connection.recv(12345))
    #This could also be s.sendall()
    s.write('hello client\n') 
```

请帮助我 StackOverFlow，你是我唯一的希望。我知道这应该很容易，但此时我的大脑是如此紧张，我无法再思考了。

另外，我对 python 还很陌生，所以很有可能它的操作/加载类/等的方式有一些东西，我只是不明白。

编辑：好的，我知道这段代码很糟糕。它不是要上市的产品，它永远不会实时运行，这只是我试图让一个概念起作用，这个概念是：让服务器和客户端通过 python ssl 连接相互发送消息。

我知道这是一个糟糕的代码，但我只需要知道如何让服务器发回消息，因为每当我尝试它时，我都会在最后得到错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T23:54:35.220

您的设计似乎在许多层面上都被误导了。

首先，您不需要两个套接字来双向发送数据；套接字是双向的。

而且您可能*不想*从服务器连接回客户端——这可能在 localhost 测试中有效，但是一旦您部署到 Internet，大多数客户端将位于 NAT 路由器后面，并且没有公共地址你可以连接到。

同时，你的逻辑很奇怪。您在一个方向上开始连接，然后休眠 6 秒，然后在另一个方向上开始连接。你为什么想这么做？

如果服务器`SecureOut`在客户端调用它之前甚至几乎同时调用它`SecureIn`，它会在有人监听之前尝试连接，这将得到你所看到的错误。

此外，每个线程都有一个非常奇怪的运行循环：

```
def run(self):
    while True:
        self.s.listen(5)
        (connection, address) = self.s.accept()
        print repr(connection.recv(5570)) 
```

这一次只接受一个连接，从中读取一次，然后只是泄漏连接，不再与它交谈，然后去获取下一个客户端。（我也不确定在`listen(5)`已经在监听的套接字上再次调用是否真的有效，或者它做了什么。）当然，它永远无法完成。（这并不完全正确——例如，如果一个客户端在你调用之前连接然后离开`recv`，你可能会得到一个你没有捕捉到的异常，所以你的程序将退出......）这就是你想要的吗？

还有，为什么`recv(5570)`？该数字是要读取的最大字节数，而不是端口号。

为什么要打印`repr`字符串？

同时，您是否意识到`recv`，无论您为缓冲区长度传递什么信息，都不能保证获得完整的消息（或者如果您的客户端曾经发送过多个消息，则只能获得一条消息而不是两条）？它几乎肯定会在 localhost 上工作，并且对于这么小的消息，它可能*大部分*时间都可以在 Internet 上工作，但并非*一直都*有效。

您似乎也对类变量和实例变量之间的区别感到困惑，因为您在`SecureIn`和中设置了一堆类变量`SecureOut`。这意味着如果您可以拥有该类的两个实例，它们将共享相同的`SSL.Context`，等等。即使您在现实生活中不需要同时拥有两个实例，为了测试，您几乎肯定会想要创建一个新实例，你会希望它创建一个新的套接字等，而不是继续使用旧的。所以代替这个：

```
class SecureIn(threading.Thread):
  context = SSL.Context(SSL.SSLv23_METHOD)
  context.use_privatekey_file('key')
  context.use_certificate_file('cert')
  … 
```

做这个：

```
class SecureIn(threading.Thread):
  def __init__(self):
    self.context = SSL.Context(SSL.SSLv23_METHOD)
    self.context.use_privatekey_file('key')
    self.context.use_certificate_file('cert')
    … 
```

（或者你可以把它放在 run 方法中，当然。）

基本上，无论有没有 SSL，这都不太可能做任何有用的事情。我建议你退后一步，阅读一些教程，写一些适用于普通 TCP 套接字的东西，然后担心如何对其进行 SSL 化。

# mysql - Mysql 启用远程和本地访问

> ID：13811176
> 
> 赞同：0
> 
> 时间：2012-12-10T23:36:55.113
> 
> 标签：mysql

我刚刚在我的 mysql 服务器上启用了远程访问。我通过转到数据库 'mysql' ，然后是用户表并将 Host 列更改为相应用户的 '%' 来做到这一点。完成此操作后，我注意到我无法在本地访问它，即当我通过 SHELL 登录到服务器时，我无法登录。

不能同时拥有本地和远程访问权限吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T23:53:18.770

您需要在`mysql.user`表中有一个单独的行，其`host`值为“localhost”，以启用本地 unix 套接字类型连接。

`'%'`列中的值`host`用于 TCP 协议。

此处文档中的详细信息：http: [//dev.mysql.com/doc/refman/5.5/en/connecting.html](http://dev.mysql.com/doc/refman/5.5/en/connecting.html)

`mysql.user`我在表中为用户提供了三行，其`host`值为`'localhost'`（用于 unix 套接字类型连接），`'127.0.0.1'`用于从本地主机通过 TCP 访问，以及`'%'`从其他主机进行 TCP 访问。

请注意，MySQL 不仅通过“用户名”识别用户，还通过“用户名”和“主机”的组合来识别用户。这些被认为是不同的用户，他们每个人都可以有不同的密码和不同的权限集。

# .net - 在哪里/如何下载（和安装）适用于 Windows 8、64 位的 Microsoft.Jet.OLEDB.4.0？

> ID：13811179
> 
> 赞同：30
> 
> 时间：2012-12-10T23:37:17.110
> 
> 标签：.net, windows-8

我有一个使用 Jet OLEDB 4.0 的 32 位 .net 2.0 应用程序。

它在 Windows 8 32 位上运行 fin，但不能在 64 位上运行。在 64 位上我收到一个错误：

> 'Microsoft.Jet.OLEDB.4.0' 提供程序未在本地计算机上注册。在 System.Data.OleDb.OleDbServicesWrapper.GetDataSource（OleDbConnectionString 常量，DataSourceWrapper & datasrcWrapper）

我知道您不能将该数据库（驱动程序）与*64*位 EXE 一起使用。但是我没有读到任何关于它不能与*32*位 exe 一起使用的信息。

我尝试了什么：

1.  [安装了 MS Access 数据库引擎 2010 32 位（并重新启动）](http://www.microsoft.com/en-us/download/details.aspx?id=13255)
2.  验证msjet40.dll在“C:\Windows\SysWOW64\msjet40.dll”目录下，并用RegSvr32注册。

所以我*认为*（希望）如果我可以安装数据库支持它就会工作。

问题是，我找不到任何下载它的地方。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-10T23:54:58.450

在现代 Windows 上，此驱动程序默认不再可用，但您可以在 MS 站点上下载[Microsoft Access Database Engine 2010 Redistributable 。](http://www.microsoft.com/en-us/download/details.aspx?id=13255)如果您的应用程序是 32 位，请务必下载并安装 32 位变体，因为据我所知，32 位和 64 位变体不能共存。

根据您的应用程序如何定位其数据库驱动程序，这可能就是所需要的。但是，如果您使用 UDL 文件，则有一个额外的步骤 - 您需要编辑该文件。不幸的是，在 64 位机器上，用于编辑 UDL 文件的向导默认是 64 位的，它不会看到 JET 驱动程序，只会拍打它首先在 UDL 文件中找到的任何驱动程序。有2种方法可以解决这个问题：

1.  像这样启动 32 位 UDL 向导：`C:\Windows\syswow64\rundll32.exe "C:\Program Files (x86)\Common Files\System\Ole DB\oledb32.dll",OpenDSLFile C:\path\to\your.udl`. 请注意，我可以在 Win7 64 Pro 上使用此技术，但它不适用于 Server 2008R2（可能是我的错误，只是提一下）
2.  在记事本或其他文本编辑器中打开 UDL 文件，它应该或多或少具有以下格式：

`[oledb] ; Everything after this line is an OLE DB initstring Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Path\To\The\database.mdb;Persist Security Info=False`

这应该允许您的应用程序正确启动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-08T12:44:05.683

确保在 Visual Studio 中的项目上以 x86 为目标。这应该可以解决您的问题。

# c++ - 如何在 C++ 中重载 std::function 签名

> ID：13811180
> 
> 赞同：6
> 
> 时间：2012-12-10T23:37:16.987
> 
> 标签：c++, lambda, overloading, signature

我知道以前有人问过这个问题，但尽管我是一个相当有经验的编码员，但我不明白答案，也没有办法回答这些以前的问题以要求澄清。没有“回复”链接或任何东西。此外，这些问题已经很老了。所以，我重新提出这个问题。

我有一个类，我在其中重载了 += 运算符。我希望一个重载采用裸函数指针，另一个重载采用 std::function：

```
void operator+=(void (*handler)());
void operator+=(function<void (void *, T)> handler); 
```

用法：

```
MyClass a;
a += [](){ DoSomething(); };
a += [](void *x, T y){ DoSomething(); }; 
```

不幸的是，代码无法编译，因为编译器无法确定第二个重载不适合第一个 += 调用。

如何定义我的 operator+= 成员函数来纠正这个问题？我不想更改运算符的使用方式（例如，通过使用显式强制转换）。我希望他们像上面演示的那样工作。

此外，还有以下重载也很方便：

```
void operator+=(function<void()> handler); 
```

但同样，我不能根据 function<> 模板的签名重载。

有关更多示例，请参见此线程：[Std::function 的模板参数（签名）不是其类型的一部分吗？](https://stackoverflow.com/questions/5931214/isnt-the-template-argument-the-signature-of-stdfunction-part-of-its-type) （我尝试实现该线程中提到的各种解决方案，**但没有一个可以编译**）

我多年来一直在使用多种语言进行编程，但我的 C++ 技能有点生疏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T03:15:43.827

以下代码适用于 g++ 4.7.2：

```
#include <functional>
#include <iostream>

template <typename T>
typename std::enable_if<std::is_convertible<T, void(*)()>::value>::type
foo(T&&)
{
    std::cout << "foo(void(*)())" << std::endl;
}

void foo(std::function<void(void*,int)>)
{
    std::cout << "foo(std::function<void(void*,int)>)" << std::endl;
}

int main()
{
    foo([]{});
    foo([](void*,int){});
} 
```

问题是由`std::function`声明为的构造函数引起的`template <class F> function(F);`。该构造函数接受所有内容作为其参数。如果该参数没有适当`operator()`的 ，则在构造函数的实例化期间会生成错误。

不幸的是，重载解析过程不需要实例化任何模板函数，因此编译器认为一切都可以转换为任何`std::function`类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:46:02.033

好的，如果你有一个`std::vector<std::function<void()>>`你甚至不需要有一堆重载。最简单的方法是定义一个模板化的`operator+=`，可能的“受保护”，`std::enable_if`仅对可调用对象或函数指针打开。因此，传递 lambda 或原始指针将在分配时为您自动转换（push_back/emplace_back）。通过`std::function`将按预期分配。

# c# - 从 C# 行为不端设置 Excel 中的单元格样式

> ID：13811186
> 
> 赞同：3
> 
> 时间：2012-12-10T23:37:40.400
> 
> 标签：c#, excel, excel-interop

我拥有的以下代码片段是一个函数，它接受字符串的矩形矩阵和写入 xls 文件的路径。它将矩阵的内容放入 Excel 工作表的单元格中，并根据内容应用一些格式：

```
public static void WriteXL(string[,] matrix, string path)
{
    XL.Application app = new XL.Application();
    XL.Workbook wbk    = app.Workbooks.Add();
    XL.Worksheet wsht  = wbk.Worksheets.Add();

    for (int i = 0; i < matrix.GetLength(0); i++)
    {
        for (int j = 0; j < matrix.GetLength(1); j++)
        {
            int _i = i + 1;
            int _j = j + 1;

            if (matrix[i, 0] == "Day" || matrix[i, 0] == "Date")
            {
                wsht.Cells[_i, _j].Font.Bold            = true;
                wsht.Cells[_i, _j].Font.Italic          = false;
                wsht.Cells[_i, _j].Style.Font.Name      = "Arial";
                wsht.Cells[_i, _j].Style.Font.Size      = 12;
                wsht.Cells[_i, _j].Style.Interior.Color = NumberFromColor(Color.Yellow);
            }
            else if (j == 0)
            {
                wsht.Cells[_i, _j].Font.Bold            = false;
                wsht.Cells[_i, _j].Font.Italic          = true;
                wsht.Cells[_i, _j].Style.Font.Name      = "Arial";
                wsht.Cells[_i, _j].Style.Font.Size      = 12;
                wsht.Cells[_i, _j].Style.Interior.Color = NumberFromColor(Color.Beige);
            }
            else
            {
                wsht.Cells[_i, _j].Font.Bold            = false;
                wsht.Cells[_i, _j].Font.Italic          = false;
                wsht.Cells[_i, _j].Style.Font.Name      = "Arial";
                wsht.Cells[_i, _j].Style.Font.Size      = 10;
                wsht.Cells[_i, _j].Style.Interior.Color = NumberFromColor(Color.White);
            }

            wsht.Cells[_i, _j].Value = matrix[i, j];
        }
    }

    wbk.SaveAs(path);
    wbk.Close();
    app.Quit();
    app = null;

    GC.Collect();
    GC.WaitForFullGCComplete();
    GC.WaitForPendingFinalizers();
} 
```

因此，如果您可以想象，有些行以“Day”和“Date”开头，它们是分隔行，如标题。这些行有粗体和黄色背景。除了落在这些分隔行上的单元格外，最左边的列具有米色背景和斜体文本。其余单元格是白色背景的普通文本。

当我打开生成的 xls 文件时，这根本不是我看到的。首先，整个工作表是白色的。其次，“Day”（在“Date”之前）是粗体但大小错误。

看起来最近使用的颜色应用于整个工作表，字体大小更改仅应用于下一个单元格，而不是我当前所在的单元格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T00:17:22.957

Try dropping the .Style eg

```
wsht.Cells[_i, _j].Font.Name 
```

instead of

```
wsht.Cells[_i, _j].Style.Font.Name 
```

You want to operate on the cell itself, not on its Style, since any other cells on the sheet which share that Style will also be affected.

# c++ - 如何得到一个产品的因子

> ID：13811188
> 
> 赞同：0
> 
> 时间：2012-12-10T23:37:50.887
> 
> 标签：c++

我正在尝试编写一段代码，它将获取数字，比如说 24 并获取它的所有因子，以便打印数字 1 和 24、8 和 3 等。我自己尝试过这样做，但是我还很新使用 c++ 所以这让我有点困惑。如果这真的很容易或很容易回答，我深表歉意。你能告诉我这是怎么做到的吗？

```
int y = 0;
int x = 0;
int product = x * y;

while (true)
{
    product = x * y;
    x++;
    y++;
    if (product == 24)
    {
        cout << x << " " << y << endl;
    }
} 
```

那是我尝试使用的代码，但我意识到由于 x 和 y 同时增加，它永远不会达到 24 作为产品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:42:10.470

这是一个快速的代码片段：

```
for (int i = 1; i <= n; ++i) { 
    if (n % i == 0) {
        std::cout << i;
    }
} 
```

请注意，它没有优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:43:55.123

而不是`y++`，尝试`y = 24 / x`。刚开始`x`，`1`而不是零！

所以：

```
x++;               // do this first, so x isn't zero
y = 24 / x;       // get closest y, rounding down
product = x * y; // see if it works
if (product == 24)
  ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T23:58:53.300

您应该从相反的方向开始 x 和 y。（即 x=1 和 y=24）并将它们彼此靠近，直到达到中位数（即 12）。例如

1.  x=1 y=24 --> 产品=24,
2.  x=1, y=23 --> 产品=23<24 所以 x++
3.  x=2, y=23 --> 产品=46>24 所以 y--
4.  x=2, y=22 --> 产品 ...

你所问的比 C++ 更具算法性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T23:42:07.880

您将希望从 1 循环到该数字；如果您正在测试的数字，以您当前的循环索引为模，则为 0，那么它是一个因素。

这很容易翻译成代码。这里有一个提示： % 是模运算符。

如果某个特定的步骤让您绊倒，请随时在此处提问。但请先尝试翻译上述内容。

# sql - 按客户选择最近 5 次销售？

> ID：13811190
> 
> 赞同：0
> 
> 时间：2012-12-10T23:38:00.640
> 
> 标签：sql

我有一个名为`sales`列的简单表

```
createdon, saleid, customerid 
```

其他表我有`customer`列的表

```
customerid, name, etc.. 
```

现在我需要客户的最后 5 次销售，

在另一个叫`scanned`我的桌子上

```
scannedid,saleid,customerid 
```

我相信我需要客户的最后 5 个销售 ID，因为我可以得到客户在他们的最后 5 个销售中扫描的内容（销售不是同一天，例如客户在星期一和星期六拜访，但其他客户在星期二和星期四拜访，但此信息对于这个例子并不重要）

我真正的问题是

**如何获取最近 5 次销售中扫描的客户 ID？**

为此，我相信我确实需要查询获取客户的最后 5 个销售 ID。我有 3 个客户，然后我需要客户 1、客户 2 和客户 3 的最后 5 个销售，然后我将返回 15 个销售 ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:57:23.060

通过客户，我假设您的意思是客户ID。我认为您需要根据创建日期降序排列的前五条销售记录。确切的语法取决于数据库。这是一种方法：

```
select top 5 customerid
from sales s
order by createdon desc 
```

另一种方式：

```
select customerid
from sales s
order by createdon desc
limit 5 
```

另一种方式：

```
select *
from (select customerid, rownum as seqnum
      from sales
      order by createdon
     ) s
where seqnum <= 5 
```

现在您已经阐明了您想要的内容，这很容易：

```
select *
from (select s.*,
             row_number() over (partition by customerid order by created on desc) as seqnum
      from sales s
     ) s
where seqnum <= 5 
```

# java - 绕任意轴轨道

> ID：13811199
> 
> 赞同：3
> 
> 时间：2012-12-10T23:38:28.717
> 
> 标签：java, android, opengl-es, libgdx

我正在使用 Android 上的 libGDX 在 OpenGL 中开发游戏。我目前在屏幕上有一个球体，一个摄像机围绕 Y 轴围绕球体旋转。我有一个虚拟操纵杆，我想用它来沿操纵杆指向的方向移动相机。我已经有了操纵杆指向的角度。

我不确定如何根据 2D 操纵杆的角度在 3D 空间中移动相机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:19:08.553

[这个例子](http://tutorialrandom.blogspot.com/2012/08/how-to-rotate-in-3d-using-opengl-proper.html)是为 iOS 做的，但实际上可以很容易地应用于任何平台。它将向您展示如何在 3d 中进行旋转。

如果您保持操纵杆的向上、向右和向前矢量，则可以使用该示例轻松地将其应用于相机。

# c# - SslStream 无法从传输连接读取数据

> ID：13811200
> 
> 赞同：1
> 
> 时间：2012-12-10T23:38:33.333
> 
> 标签：c#, tcpclient, sslstream

我正在尝试在安全流层中使用异步等待，但我遇到了这个问题

```
Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host. 
```

我如何处理关闭异常

这是我的代码

```
using System;
using System.Net;
using System.Net.Security;
using System.Net.Sockets;
using System.Security.Cryptography.X509Certificates;
using System.Threading.Tasks;

namespace asyncAwait
{
    internal class Program
    {
        private static readonly X509Certificate X509Cert = X509Certificate.CreateFromCertFile("crt.cer");

        private static void Main()
        {
            Console.SetWindowSize(100, 30);
            CreateListener();

            for (var i = 0; i < 1; i--)
                Console.ReadLine();
        }

        static async void CreateListener()
        {
            var listener = new TcpListener(new IPEndPoint(IPAddress.Any, 5070));
            listener.Start();
            Log.WriteLine("TcpListener started.");

            do
            {
                IClient client = new BaseClient(await listener.AcceptTcpClientAsync());
                AuthenticateAndBeginRead(client);
            } while (!listener.Pending());
        }

        static async void AuthenticateAndBeginRead(IClient client)
        {
            try
            {
                await client.Stream.AuthenticateAsServerAsync(X509Cert);

                if (client.Stream.IsAuthenticated)
                    do
                    {
                        var received = await ReadStream(client, client.Buffer);
                        if (received == null)
                            throw new Exception();

                        Log.WritePacket(received);
                    } while (client.Stream.CanRead);
                else
                {
                    throw new Exception();
                }
            }
            catch (Exception e)
            {
                //I don't wanna to catch the force closing exception nor the other useless ones!>.
                Log.WriteLine(e.Message);
            }
        }

        private static async Task<byte[]> ReadStream(IClient client, byte[] buffer)
        {
            var size = await client.Stream.ReadAsync(buffer, 0, buffer.Length);
            if (size.Equals(0)) return null;
            var endBuffer = new byte[size];
            Buffer.BlockCopy(buffer, 0, endBuffer, 0, size);
            Array.Clear(buffer, 0, buffer.Length);
            return endBuffer;
        }
    }

    interface IClient
    {
        byte[] Buffer { get; }
        SslStream Stream { get; }
        string Ip { get; }
    }

    class BaseClient : IClient
    {
        public byte[] Buffer { get; private set; }
        public SslStream Stream { get; private set; }
        public string Ip { get; private set; }

        public BaseClient(TcpClient client)
        {
            Buffer = new byte[ushort.MaxValue];
            Stream = new SslStream(client.GetStream());
            Ip = ((IPEndPoint)client.Client.RemoteEndPoint).Address.ToString();
        }
    }
} 
```

如果您发现其他可疑的编程错误，也请纠正我。

# sql - 在 Oracle SQL 中使用 JOIN 提取所需信息时遇到问题

> ID：13811202
> 
> 赞同：1
> 
> 时间：2012-12-10T23:38:45.727
> 
> 标签：sql, oracle

我在找出解决这个问题的正确方法时遇到了一些麻烦。

```
Database tables:
Student(stdID[pk], stdName, stdSet)
Enrollment(stdID[pk], crsID[pk], year[pk], semester[pk], grade)
Offering(crsID[pk], year[pk], semester[pk], instrID)
Course(crsID[pk], crsTitle, creditHrs)
Instructor(instrID[pk], instrName, dept) 
```

“查找从 2006 年到 2008 年教过给定学生 A01234567 的所有讲师。列出学生 ID、讲师 ID 和年份。不要重复行。”

我最初拥有的是这样的：

```
SELECT DISTINCT stdID, instrID, year
FROM Student s
JOIN Instructor i ON Offering o (o.instrID = i.instrID)
JOIN Offering o ON Course c (c.crsID = o.crsID)
WHERE stdID = 'A01234567'
    AND date BETWEEN (2006 AND 2008); 
```

然而，这并不完全正确。我注意到这与“提供连接中缺少 2 列”有关，但我不知道这意味着什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:00:36.010

您的连接语法不正确。这是您的查询，已修复，因此至少在语法上是正确的。这可能会帮助您找到解决方案：

```
SELECT DISTINCT stdID, instrID, year
FROM Instructor i JOIN
     Offering o
     ON o.instrID = i.instrID join
     Course c
     on c.crsID = o.crsID
WHERE stdID = 'A01234567' AND date BETWEEN (2006 AND 2008); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T00:41:41.787

从概念上讲，我会从`Instructor`桌子开始，因为那是我想要返回的。

我会把它加入到`Offering`桌子上，所以我有`Offering`每个教练的所有东西。

（但我们根本不需要`Instructor`表中的任何内容，因为我们在`Offering`表中有 InstrId。）

然后我会加入到`Enrollment`，基本上让所有注册了每个课程的学生。

然后我会加入到`Student`. 但同样，我们真的不需要桌子上的任何东西`Student`，我们已经`stdId`在`Enrollment`桌子上。

棘手的部分是 and 之间的`Offering`连接`Enrollment`。连接谓词必须是 on`year`和`semester`，以及`crsId`。

因此，为了满足规定的要求，只需要查询两个表：

```
SELECT e.stdId
     , o.instrId
     , e.year
  FROM Offering o
  JOIN Enrollment e
    ON e.crsId = o.crsId
   AND e.year = o.year
   AND e.semester = o.semester
 WHERE e.stdID = 'A01234567'
   AND e.year >= 2006
   AND e.year <= 2008
 GROUP
    BY e.stdId
     , o.instrId
     , e.year
 ORDER
    BY e.stdId
     , o.instrId
     , e.year 
```

* * *

数据库设计有一个特殊性。考虑当有两名或更多教师在同一年和同一学期教授给定课程时会发生什么。

但这名学生只注册了其中一个。

此查询将获取两种产品的讲师。

这是查询的问题，但给定的数据库设计并没有给我们任何解决问题的方法......因为没有办法告诉学生有哪个讲师。

该查询满足规定的要求，但结果会有点奇怪，显示特定学生在 2006 年秋季有六位不同的“Calc I”讲师。

除非这里有什么东西在躲避我。

**编辑：**

As Emily Litella would have intoned, "Never mind...". There's a unique constraint on the `Offering` table. There can be only one offering of a given `crsId` in a semester. So there's no problem there. (Except that it's peculiar that there would be only one offering of a given course in a given semester.)

~~The `GROUP BY` is not necessary. The constraints already guarantee that there will be no duplicate rows returned.~~

Actually, I think the GROUP BY is needed, because it's possible that the student was enrolled in two separate courses led by the same instructor. The purpose of the `GROUP BY` is to eliminate any duplicate rows from the result set (as indicated in the specification.)

# linux - 轮询Linux驱动程序中的系统调用

> ID：13811204
> 
> 赞同：1
> 
> 时间：2012-12-10T07:36:47.230
> 
> 标签：linux, linux-kernel, system-calls

我正在学习Linux内部。所以我遇到了`poll`系统调用。据我了解，当一些数据准备好从设备读取以及我们准备好数据到设备时，驱动程序使用它来提供通知。

如果设备没有任何数据要读取，进程将在数据可用时进入睡眠状态并唤醒，反之亦然。

有人可以通过一些真实的例子为我提供对轮询系统调用的具体理解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:51:32.537

轮询和选择（后者与轮询非常相似，但有[这些](http://www.unixguide.net/network/socketfaq/2.14.shtml)差异）系统调用用于所谓的异步事件驱动方法来处理客户端的请求。

基本上，在网络编程中，服务器处理来自网络客户端的许多连接有两种主要策略：

1）更传统的：线程或面向过程的方法。在这种情况下，网络服务器有一个主进程，它在一个特定的网络端口（Web 服务器的端口 80）上侦听传入连接，当连接到达时，它会产生新的线程/进程来处理这个新连接。Apache HTTP 服务器采用了这种方法。

2) 上述异步事件驱动方法，其中（在最简单的情况下）网络服务器（例如 Web 服务器）是只有一个进程的应用程序，它接受连接（为每个新客户端创建套接字），然后使用 poll/select 监视这些套接字对于传入的数据。[Nginx](http://nginx.org/) http web 服务器采用了这种方法。

# youtube-api - YouTube 分析 - 其他指标和维度的配额影响

> ID：13811207
> 
> 赞同：1
> 
> 时间：2012-12-10T23:39:16.923
> 
> 标签：youtube-api, analytics, quota

Youtube Analytics API Doc 概述了每个 API 查询的成本如何随着查询中的指标和维度数量的增加而上升，但它相当模糊（例如，正常、高、非常高）。有谁知道这些指南所暗示的硬数字是什么？

[关于配额成本的 YouTube 分析 API 文档](https://developers.google.com/youtube/analytics/v1/available_reports)

我一直在尝试通过自己的测试来确定这一点，但是如果有人可以提供一些实际数字，或者找到有关该主题的详细文档，那将是一个很大的帮助。谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:40:38.807

不幸的是，我们目前没有更详细地介绍，因为我们希望保留在我们看到使用模式是什么样的情况下调整成本的灵活性。

您是否真的遇到了 YouTube 分析 API 的配额问题，或者您只是好奇？

# python - Django：从用户的 email_host 发送电子邮件

> ID：13811212
> 
> 赞同：0
> 
> 时间：2012-12-10T23:39:49.167
> 
> 标签：python, django, email

我希望允许用户从他们自己的电子邮件地址发送电子邮件如何更改 email_host 设置从实例到实例？

```
email_host = user.profile.email_host 
```

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:06:50.767

那是行不通的。大多数电子邮件提供商都需要某种身份验证，以防止被用作垃圾邮件网关。而是提供一个 mailto: 链接来打开用户自己的电子邮件客户端。

# java - Android:: 销毁 Activity 后保持网络连接

> ID：13811215
> 
> 赞同：0
> 
> 时间：2012-12-10T23:39:55.143
> 
> 标签：java, android

```
I am trying to create a service that manages my network communication on my app but everytime I destroy my activity my server crashes and I believe this is I am still waiting to receive on the server end. 
My understanding of the service is it runs until you stop it so I feel my channel should be open until I close. I know it'd take a lot of battery life but, I'm trying to understand the concept of the service very well before I optimize my battery life. Here is what I have

    public class SampleService extends Service {
        public final static String TAG = SampleService.class.getName();
        private HandlerThread nThread;
        private NetworkHandler nHandler;
        private Looper nLooper;
        private Socket socket;
        private ObjectInputStream is;
        private ObjectOutputStream os;
        .......
            .........
        @Override
        public void onCreate()
        {
            Log.i(TAG, "onCreate(); Sample Created");
            new Thread(new Runnable()
            {

                @Override
                public void run() {
                    // TODO Auto-generated method stub
                    try {
                        socket = new Socket("192.168.1.185", 6060);
                        os = new ObjectOutputStream(new DataOutputStream(socket.getOutputStream()));
                        is = new ObjectInputStream(new DataInputStream(socket.getInputStream()));
                    } catch (UnknownHostException e) {
                        // TODO Auto-generated catch block
                        Log.e(TAG, "onCreate(): UnknownHostException error", e);
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        Log.e(TAG, "onCreate(): IOException error", e);
                    }
                }

            }).start();
            nThread = new HandlerThread("Network Thread", Process.THREAD_PRIORITY_BACKGROUND);
            nThread.start();
            nLooper = nThread.getLooper();
            nHandler = new NetworkHandler(nLooper);
            Log.i(TAG, "onCreate(); Service setup");
        }

        @Override
        public int onStartCommand(Intent intent, int flags, int startId) {
            Toast.makeText(this, "Service started "+ startId, Toast.LENGTH_SHORT).show();
            // We want this service to continue running until it is explicitly
            // stopped, so return sticky.
            return START_STICKY;
        }

        @Override
        public void onDestroy() {

            Toast.makeText(this,"Service Destroyed", Toast.LENGTH_SHORT).show();
            Log.i(TAG, "onCreate(); Sample Destroyed");
        }

And Activity

      public class ServiceActivity extends Activity {
            Intent service;

            @Override
            protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_service);
                service = new Intent(this, SampleService.class);
                startService(service);
            }

            ........
    ........
            }

I don't really have much added there just this...

    public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.activity_service, menu);
            return true;
        }

        @Override
        public void onPause()
        {
            super.onPause();
    //      stopService(service);
        }

I decided to add my server to make things clear...

public class CloudServer{
    private ServerSocket serverSocket;
    private List<Socket>clientSockets;

    public static final String TAG = CloudServer.class.getName();

    public CloudServer(int port) throws IOException
    {
        serverSocket = new ServerSocket(port);
        clientSockets = new ArrayList<Socket>();

        System.out.println("Listening to clients on port "+ port);
        for(;;) // infinite loop
        {
            Socket s;
            String id = generateSessionId();
            clientSockets.add(s = serverSocket.accept());
            System.out.println("Connection was established");
            if(sessionId.size() > 0)
            {
                Set<String>ids = sessionId.keySet();
                for(String session: ids)
                {
                    while(id.equals(session))
                        id = generateSessionId();

                }
            }
            sessionId.put(id, s);
            new Thread(new Worker(s, id)).start();
        }
........
    }

    public static void main(String [] args) throws IOException, ClassNotFoundException, SQLException
    {

        new CloudServer(6060);
    }

.........
} 
```

这是服务器的工作人员

```
package com.dcloud.server.service;

import java.io.IOException;
import java.io.ObjectInputStream;

public class Worker implements Runnable{
    private Socket socket;
    private ObjectInputStream is;
    private ObjectOutputStream os;
    private boolean running;
    public static final String TAG = Worker.class.getName();
    private Message in;

    private String sessionId;
    public Worker(Socket s, String id) throws IOException
    {
        this.socket = s;
        os = new ObjectOutputStream(socket.getOutputStream());
        is = new ObjectInputStream(socket.getInputStream());
        sessionId = id;
        running = true;
    }

    public String getSessionId()
    {
        return sessionId;
    }

    @Override
    public void run() {
        // TODO Auto-generated method stub
        while(running)
        {
            try {

                while((in = (Message) is.readObject())!= null){
                    if(in.getRequest() == Event.Request.REGISTER)
                    {
                        //debugging purposes
                        CloudServer.writeToFile(TAG + ": got into the Register request");
                        new Thread(new Runnable()
                        {
                            @Override
                            public void run() {
                                // TODO Auto-generated method stub

                                try {
                                    String message = in.getMessage(); 
                                    registerUser(message);
                                } catch (ParserConfigurationException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                } catch (SAXException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                } catch (IOException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                } catch (SQLException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }
                            }
                        }).start();
                    }

                    else if(in.getRequest() == Event.Request.LOGIN)
                    {
                        CloudServer.writeToFile(TAG + ": got into the login request");
                        new Thread(new Runnable()
                        {
                            @Override
                            public void run() {
                                // TODO Auto-generated method stub

                                try {
                                    String message = in.getMessage();
                                    handleLogin(message);
                                } catch (ParserConfigurationException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                } catch (SAXException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                } catch (IOException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                } catch (SQLException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }
                            }
                        }).start();
                    }

                    else if(in.getRequest() == Event.Request.DISCONNECT)
                    {
                        running = false;
                        break;
                    }
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ClassNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        try {
            is.close();
            os.close();
            socket.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

........
.......
//  I don't think this affects anything...

} 
```

我得到 IO Exception and Its 因为 while((in = is.readObject)!= null) 行这表明我的应用程序在我销毁活动时试图断开连接。这就是我解释它的方式，但根据 android 网站上的服务文档，该服务应该是活动的，直到我自己明确停止它......

```
java.io.EOFException
    at java.io.ObjectInputStream$BlockDataInputStream.peekByte(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at com.dcloud.server.service.Worker.run(Worker.java:56)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T03:31:10.990

如果您的手机进入睡眠状态（屏幕变暗），您将没有网络连接。如果您想保持连接，您需要通过获取 WakeLock 来防止手机进入睡眠状态。这当然会带来使用电池的惩罚，因此您应该在完成网络操作后立即释放它。

# javascript - jquery 新手 - 创建多个微调器控件

> ID：13811216
> 
> 赞同：0
> 
> 时间：2012-12-10T23:40:01.337
> 
> 标签：javascript, jquery-ui, web-applications

我正在用 php 和 javascript 创建一个简单的应用程序。我想做的一件事是对大量输入字段（超过 100 个）使用 jquery 微调器控件。

该网站可以在这里找到：[https ://www.myweb.ttu.edu/timothsm/alchemy](https://www.myweb.ttu.edu/timothsm/alchemy)

现在脚本正在超时尝试在 javascript 中创建 100 个微调器有没有更好的方法来做到这一点？还是我应该找到不同的方式？（我现在只在第一个输入字段上创建一个微调器，但下面的代码是我用来对所有输入字段执行此操作的代码）

这是我用来创建微调器的代码：

```
$(function() {
    $("#ings input.spinner").spinner({
        spin : function(event, ui) {
            if (ui.value > 500) {
                $(this).spinner("value", 500);
                return false;
            } else if (ui.value < 0) {
                $(this).spinner("value", 0);
                return false;
            }
        }
    });
    $("input.spinner").val(0)
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:07:01.283

这里只是一些提示。它们可能对您尝试做的事情的性能没有太大帮助，但它们是对您的代码的改进。

使用最小值和最大值调用微调器函数的更好方法是使用`min`和`max`设置，如下所示：

```
$(function() {
    $("#ings input.spinner").spinner({
        min: 0,
        max: 500
    });
    $("#ings input.spinner").val(0)
});​ 
```

您还应该为输入标签指定 type 属性：

```
<input type="text" class="spinner" id="[your_input_id]" /> 
```

将来，通过更好的浏览器支持，您将能够仅使用 html5`number`输入类型而不是 javascript 来执行此操作。现在它只适用于像 Chrome 这样的 webkit 浏览器：

```
<input type="number" min="0" max="500" class="spinner" id="[your_input_id]" /> 
```

换一种说法，为您的元素提供良好的自我描述性 id 和类名。

而不是这样：

```
<div id="ings" class="inglist"> ... </div> 
```

将它们命名为：

```
<div id="ingredients" class="ingredientList"> ... </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T00:30:19.183

您可以按需创建微调器。[演示](http://jsfiddle.net/tarabyte/aP5hR/6/)

```
var makeSpinner = function() {
    $("#ings").find(".ui-spinner-input").spinner('destroy'); //kill prev if any
    $(this).spinner({ //init new
        min: 0,
        max: 500
    });
}

//process clicks on spinners place holders
$("#ings").on('click', 'input.spinner', makeSpinner); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-31T11:51:08.397

这是[工作打字的链接](http://jsfiddle.net/aP5hR/57/)

```
var makeSpinner = function() {
    $("ings").find(".ui-spinner-input").spinner('destroy');
    $(this).spinner({
        min: 0,
        max: 500
    })
    $(this).focus(); } $("#ings").on('click', 'input.spinner', makeSpinner); 
```

# python - Python 控制流

> ID：13811217
> 
> 赞同：0
> 
> 时间：2012-12-10T23:40:11.933
> 
> 标签：python, if-statement

对于以下代码：

```
def isString(x):
  if type(x)==str:
    return True
  return False 
```

当我在参数中输入一个字符串时，返回True后，为什么它也不返回False？我是 Python 新手，我很困惑，因为我认为它会返回 False，因为它不在 for 循环中，但事实并非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:44:56.933

任何语言的答案都是一样的。return 语句表示从函数返回，返回一个可选值。它只能返回一次。在这种情况下，它从条件语句中返回。

顺便说一句，对于这样的类型检查，请使用`is`运算符。

```
if type(x) is str:
    return True 
```

但实际上，真正推荐的进行字符串类型检查的方法是：

```
if isinstance(x, str):
    return True 
```

但是，由于它很短，因此您根本不需要为此编写函数（学习目的除外）。只需使用`isinstance(x, str)`您本来会写的地方`isString(x)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:42:24.090

该`return`语句终止函数。一旦你返回，函数就会停止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T23:42:05.400

顺便说一句，您的代码中没有 for 循环

当一个函数返回一些东西——任何东西——它就完成了。该`return`语句表示函数退出；不再进行任何处理。

如果 的类型`x`是`str`，则函数返回`True`。但是，如果 的类型`x`不是`str`，则永远不会输入 if 语句，`True`也不会返回。相反，函数继续执行 if 语句后的下一行，即`return False`-- 并且函数返回`False`

# vim - Vim：硬包装注释的“gq”命令，但不是代码（即使中间没有空行）

> ID：13811219
> 
> 赞同：5
> 
> 时间：2012-12-10T23:40:18.550
> 
> 标签：vim, format, comments

我的 Vim 配置包括`set formatoptions=c,q,a`. 我对以下问题感到非常恼火（`|`表示光标位置，它的确切位置无关紧要，因为您可能只知道它在此注释行中存在的事实很重要）：

```
" This is a long line which we would like to wrap. However, something sick is go|ing to happen if we hit "gqip" here!
if has('win32') || has('win64')
  set runtimepath^=~/.vim
  set runtimepath+=~/.vim/after
endif 
```

现在我们打`gqip`：

```
" This is a long line which we would like to wrap. However, something sick is
" go|ing to happen if we hit "gqip" here!
if has('win32') || has('win64') set runtimepath^=~/.vim set
  runtimepath+=~/.vim/after endif 
```

它的作用是 - 它实际上将整个内容视为一个段落。（是的，我知道用空行分隔可以防止这种行为，但它并不能解决问题！）我希望它确实是：

```
" This is a long line which we would like to wrap. However, something sick is
" go|ing to happen if we hit "gqip" here!
if has('win32') || has('win64')
  set runtimepath^=~/.vim
  set runtimepath+=~/.vim/after
endif 
```

换句话说，如果`gq`能以某种方式忘记代码并只使用注释，那就太好了。

**奖励：**如何一次性在整个缓冲区上进行这种格式化（**仅包装评论）？**因为，理想情况下，我想将这些东西移到一个特殊的格式化挂钩中以保存文件。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-11T07:36:46.527

> 它实际上将整个内容视为一个段落

好吧，`gqip`你告诉它！你需要选择正确的动作。在这种单行的情况下，它将是`gqq`. 对于 3 行，即`gq2j`. 如果行数太多，请使用可视模式：`Vjjjjjjgq`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-06T12:19:17.277

`ip`正如@IngoKarkat 指出的那样，文本对象的含义相当狭窄：它只是由空行分隔的任何文本段落。

我还创建了一个插件，您可以使用它来解决这个问题。

> [***textobj-comment***](http://www.vim.org/scripts/script.php?script_id=4570) - 用于评论的文本对象

与*SameSyntaxMotion*插件相比，*textobj-comment*依赖于特定于文件类型的`'comments'`设置来识别注释。这意味着即使关闭了语法高亮，它也应该可以工作。

用于`gqic`格式化评论。

专业提示：首选[`gw`](http://vimdoc.sourceforge.net/htmldoc/change.html#gw)，`gq`因为它保留了光标位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T13:58:54.433

使用我的[SameSyntaxMotion 插件](http://www.vim.org/scripts/script.php?script_id=4338)，您可以使用`ay`文本对象来表示光标所在的整个注释块，并使用`gqay`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T00:37:30.807

使用 搜索注释行`:g`，然后将这些行换行：

```
:%g/^"/normal gq_ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-27T17:51:50.367

我知道我参加聚会有点晚了，但我在自己调查同样的问题时发现了这个问题。怎么样：

```
set formatprg=fmt\ --prefix='\"' 
```

有了那个 gqip 似乎可以按要求行事。不过，我肯定会检查 SameSyntaxMotion 插件。

# java - Android AlertDialog 教程给出错误 - 空白应用程序

> ID：13811220
> 
> 赞同：1
> 
> 时间：2012-12-10T23:40:18.673
> 
> 标签：java, android, eclipse

[关于对话框](http://developer.android.com/guide/topics/ui/dialogs.html)的 android 文档提供了一个关于`AlertDialogs`. 立即使用代码时，我在 Eclipse 上遇到错误`getActivity()`。为什么这不起作用？错误：`The method getActivity() is undefined for the type MainActivity`对于那些试图通读文档以成为一个整体上更好的程序员的人来说，这尤其令人困惑，但似乎我并没有把点连接起来。谢谢。

```
import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:46:37.857

正如医生所说：

[getActivity (Context con, int reqCode, Intent intent, int flags)](http://developer.android.com/reference/android/app/PendingIntent.html#getActivity%28android.content.Context,%20int,%20android.content.Intent,%20int%29)

> 检索将启动新活动的 PendingIntent，例如调用 Context.startActivity(Intent)。请注意，该活动将在现有活动的上下文之外启动，因此您必须在 Intent 中使用 Intent.FLAG_ACTIVITY_NEW_TASK 启动标志。

以及关于

```
[public AlertDialog.Builder (Context context)][2]

Constructor using a context for this builder and the AlertDialog it creates. 
```

表示*AlertDialog.Builder 构造函数需要一个 Context 实例而不是 PendingIntent*

将您的代码更改为：

```
AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this); 
```

**编辑 ：**

作为您提供的链接

[http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

在这个示例中，作者讨论了我们如何`AlertDialog`从`DialogFragment`.we 中显示，当在它`getActivity()`内部使用时，`DialogFragment`它会返回*一个该片段当前关联的 Activity*。间接表示[getActivity()](http://developer.android.com/reference/android/support/v4/app/Fragment.html#getActivity%28%29)返回一个 Context 实例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:43:50.673

您没有针对正确的 api 构建。该方法`getActivity()`在以前的 API 中不可用。你总是可以去

```
AlertDialog.Builder builder = new AlertDialog.Builder(this); 
```

或者从内部类调用时，使用

```
AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T23:44:25.000

利用

`AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);`

反而

# java - Java显示当前时间

> ID：13811224
> 
> 赞同：12
> 
> 时间：2012-12-10T23:40:55.867
> 
> 标签：java, date, time, timer

我有一个代码，它显示了我运行应用程序时的当前日期和时间

```
DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
Calendar cal = Calendar.getInstance();
System.out.println(dateFormat.format(cal.getTime())); 
```

现在它向我显示： 2012/12/11 00:36:53 当我运行它时。

但我希望它在运行期间计算时间。

因此，现在举例来说，当我在 00:37:53 上运行它时，它会显示这个时间，但我希望 00:37:53 在开始时停止运行，并且我在 00:40:55 上停止运行它。我希望它显示 00:37:53、00:37:54、00:37:55 等等。

现在我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T00:46:56.713

如何使用计时器，例如[`javax.swing.Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)？（不要在导入时出错，还有更多的 Timer 类。）

```
public static void main(String... args) throws InterruptedException {
    final DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
    int interval = 1000; // 1000 ms

    new Timer(interval, new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            Calendar now = Calendar.getInstance();
            System.out.println(dateFormat.format(now.getTime()));
        }
    }).start();

    Thread.currentThread().join();
} 
```

这将简单地每秒执行一次 ActionListener 的主体，打印当前时间。

最后一行的`Thread.join`调用不是普遍需要的，它只是需要让这个示例代码运行直到手动停止进程。否则，它会立即停止。

在一个真正的应用程序中，如果它是一个 Swing 应用程序，那么计时器应该自己处理线程，所以你不必担心它。

* * *

## 编辑

将上述示例集成到您的应用程序中非常简单，只需将其添加到`initGUI`方法中，而不是将当前时间打印到 System.out 设置更改给定标签的文本：

```
public void initGUI() {
    setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);        
    setPreferredSize(new Dimension(800, 600));
    setLayout(null);

    Calendar now = Calendar.getInstance();
    tijd = new JLabel(dateFormat.format(now.getTime()));
    tijd.setBounds(100, 100, 125, 125);
    window.add(tijd);

    new Timer(1000, new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            Calendar now = Calendar.getInstance();
            tijd.setText(dateFormat.format(now.getTime()));
        }
    }).start();

    pack();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-27T04:06:08.293

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-17T21:01:08.077

```
 public void ShowTime() {
        new Timer(0, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                Date d = new Date();
                SimpleDateFormat s = new SimpleDateFormat("dd/MM/yyy hh:mm:ss a");
                time.setText(s.format(d));                 //time= jlabel 
            }
        }).start();
    } 
```

不断改变时间（每秒刷新）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-02T13:01:09.237

你可以试试这个

```
import java.awt.*;
import java.awt.event.*;
import java.util.Date;
import java.lang.Thread;

public class TimeInSeconds extends Frame implements Runnable
{
    private Label lblOne;
    private Date dd;
    private Thread th;

    public TimeInSeconds()
    {
        setTitle("Current time");
        setSize(200,150);
        setVisible(true);
        setLayout(new FlowLayout());
        addWindowListener(new WindowAdapter() {
            public void windowClose(WindowEvent we){
                System.exit(0);
            }
        });
        lblOne = new Label("00:00:00");
        add(lblOne);

        th = new Thread(this);
        th.start(); // here thread starts
    }

    public void run()
    {
        try
        {
            do
            {
                dd = new Date();
                lblOne.setText(dd.getHours() + " : " + dd.getMinutes() + " : " + dd.getSeconds());
                Thread.sleep(1000);  // 1000 = 1 second
            }while(th.isAlive());
        }
        catch(Exception e)
        {

        }
    }

    public static void main(String[] args)
    {
        new TimeInSeconds();
    }
} 
```

您可以运行此程序并获取输出。

有关 java 中日期和时间的更多信息，您可以参考下面的链接，

[https://docs.oracle.com/javase/tutorial/datetime/iso/datetime.html](https://docs.oracle.com/javase/tutorial/datetime/iso/datetime.html)

[https://docs.oracle.com/javase/7/docs/api/java/sql/Date.html](https://docs.oracle.com/javase/7/docs/api/java/sql/Date.html)

[https://www.flowerbrackets.com/how-to-get-current-date-time-in-java/](https://www.flowerbrackets.com/how-to-get-current-date-time-in-java/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-27T15:59:24.610

使用带有 hh:mm 作为格式的简单日期格式化程序。

```
SimpleDateFormat sdf = new SimpleDateFormat("HH:MM a"); 
```

[点击这里查看完整程序。](http://java-interview-questions.com/how-to-display-time-in-java/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-26T09:18:18.560

添加一个带有增量语句的循环，因此时钟将一直滴答作响，直到给定条件。

# linux - 用于最终项目的 Windows Server 或 Linux

> ID：13811226
> 
> 赞同：-1
> 
> 时间：2012-12-10T23:41:23.870
> 
> 标签：linux, snmp, windows-server

几周前，我想出了一个想法来开发一个移动应用程序，它将把我大学的学生引导到最近的可用打印机。整个事情是我最终项目的一部分。
基于 Android 的应用程序需要执行以下任务：

1.  用户在校园内的位置被发送到服务器。假设这部分工作得很好。
2.  服务器向用户附近的打印机发送 SNMP 请求。我可能会为此部分使用 PHP 或 Python。
3.  SNMP 请求的数据被处理并发送回客户端

我的问题与服务器有关。大学的 IT 经理为我提供了一个指定的开发服务器，听起来很棒。现在我需要选择要在服务器上安装的操作系统——Windows 服务器还是 Linux（不知道是哪个版本）。我没有任何服务器编程/操作经验，但总的来说，我在 Windows 环境中感觉更舒服（因为那一直是我的操作系统）。
我没有太多时间学习新的操作系统，但如果 Linux 更适合我描述的项目，也许我会的。在这种情况下，您会推荐哪台服务器？
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T03:14:12.783

在大多数情况下，Linux 将是您作为服务器平台的最佳选择。

尽管 Windows 界面对您来说很熟悉，但在 Linux 上学习命令行界面一点也不困难（尤其是考虑到您可以编码的事实）。

本质上，您的应用程序服务器可以在 Linux 界面上作为 CLI 运行，由基本命令控制。大多数 Linux 发行版都提供了大量的预构建包，您可以通过单个命令安装这些包，而 Windows 没有那么多可用的包（主要是因为大多数开发人员在 Linux 上构建他们的应用程序）。

从长远来看，在 Windows 上构建您的应用服务器将导致更多的维护，而不是仅仅在 Linux 机器上构建和运行您的应用服务器。在这种情况下，我推荐使用 Linux 100%。

# jsp - Facelet、Servlet、JSP、JSF的区别和关系

> ID：13811229
> 
> 赞同：2
> 
> 时间：2012-12-10T23:41:55.500
> 
> 标签：jsp, jsf, jakarta-ee, servlets, facelets

> **可能重复：**
> [JSF、Servlet 和 JSP 之间有什么区别？](https://stackoverflow.com/questions/2095397/what-is-the-difference-between-jsf-servlet-and-jsp)

我是 Java2E 的新手。我看到一堆不同的术语，如 JavaServer Faces、JavaServer Pages、Facelet、Servlets、Beans，我有点困惑。你能给我更清楚地了解这些术语吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:57:19.837

Java EE 是一大堆东西。它有许多不同的实现，并且有许多技术可以在不同的实现中使用。

参考链接：[http ://www.oracle.com/technetwork/java/javaee/overview/index.html](http://www.oracle.com/technetwork/java/javaee/overview/index.html)

快速概览：

Bean 是具有 getter 和 setter 的对象。它们到处都在使用。它们的意义远不止于此，但在您了解 Java EE 是什么之前，这将帮助您完成它。

Java Server Faces (JSF) 是一种处理MVC（模型-视图-控制器）视图的技术。JSP 也是如此。facelet 是 JSF 的一部分。

servlet 是一个处理 HTTP 请求并产生 HTTP 响应的类。

Servlet 是 Java EE 的一部分，但可以是独立的。为了说明，servlet 可以存在于任何 servlet 容器中。Java EE 应用程序需要一个 Java EE 容器，它也有一个 servlet 容器，但提供的更多。要了解区别，请将 Tomcat 与 Glassfish 或 JBoss 进行比较。

# javascript - 如何将嵌套在方法中的函数调用到另一个方法中

> ID：13811231
> 
> 赞同：1
> 
> 时间：2012-12-10T23:41:56.943
> 
> 标签：javascript, methods

出于某种原因，我无法将设置方法中的函数调用到我的 init 方法中。

```
 // this is how I use it now(dont work)

Plugin.prototype = {

    settings: function(){

        function hello(name){
            alert('hi, '+name)
        }
    },

    init: function(){
        this.settings() 
        hello('John Doe')
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T23:43:13.030

Javascript 有*函数作用域*。如果您在另一个函数中声明一个函数，则它仅在外部函数内部可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T00:32:28.893

这可能是你的意思：

```
Plugin.prototype = {

    settings: function(){

    },

    hello: function(name){
        alert('hi, '+name);
    },

    init: function(){
        this.settings();
        this.hello('John Doe');
    }

}; 
```

或者，如果您想将 hello() 设为私有，您可以这样做：

```
Plugin.prototype = function(){

  var hello = function (name){
      alert('hi, '+name);
  };   

  return {
      settings: function(){
      },

      init: function(){
          this.settings();
          hello('John Doe');
      }
  };
}(); 
```

[jsfiddle](http://jsfiddle.net/saille/MWmRB/)

# login - Magento 无法登录管理员面板

> ID：13811232
> 
> 赞同：0
> 
> 时间：2012-12-10T23:41:59.957
> 
> 标签：login, admin, session-cookies, magento-1.7

我觉得这个问题真的很愚蠢，因为我已经多次处理过这个问题......但是我无法解决这个问题。

我尝试登录 Magento 后端，然后得到`Invalid Username or Password`.

现在，在任何人跳进来获得答案之前，我已经尝试了四种最常见的方法：

1) 在 local.xml 中确保会话设置为 db 而不是 files

2）使用SQL查询以MD5格式重置密码，并检查数据库以确保所述用户已更新

3) 从 core_config 表中删除 cookie 域

4）最后但并非最不重要的一点是可怕的......`app/code/core/Mage/Core/Model/Session/Abstract/Varien.php`特别从这些行中评论了cookie信息：

```
 //$this->getCookie()->getDomain(),
 //$this->getCookie()->isSecure(),
 //$this->getCookie()->getHttponly() 
```

我已经多次清除缓存，包括 /var/cache 和 ZEND 缓存，包括在每次更改后直接清除。

有一件事要提-我很确定这与它有关，我只是不确定如何，但是我在`mysite.com/test`使站点正常工作时将其用作暂存区域，并将其移至`mysite.com`所有错误已解决。但是，我在数据库`base_url`中设置为。`mysite.com/test`

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T05:30:44.880

我有一个类似的问题，在尝试了你提到的所有你尝试过的事情之后，我发现我空间不足了。我认为这可能与 magento 无法创建其他文件因此不让您进入有关。

尝试检查使用情况/磁盘空间/带宽并确保一切正常。

我还注意到我可以先用 Opera 登录，然后我修改了 cookie 过期时间：

系统 -> 配置 -> 会话 cookie 管理 -> Cookie 生命周期

# internet-explorer - Visual Studio 因 TypeScriptDebugEngine System.IndexOutOfRangeException 而崩溃

> ID：13811233
> 
> 赞同：3
> 
> 时间：2012-12-10T23:42:00.960
> 
> 标签：internet-explorer, visual-studio-2012, typescript

我们使用的是 Typescript 0.8.1.0，并且在 Internet Explorer 中调试时遇到了 Visual Studio 崩溃的情况。一旦我们使用 javascript 加载页面，它就会发生。这是错误：

```
Problem Event Name: CLR20r3
  Problem Signature 01: devenv.exe
  Problem Signature 02: 11.0.51106.1
  Problem Signature 03: 5098c6d7
  Problem Signature 04: TypeScriptDebugEngine
  Problem Signature 05: 0.8.1.0
  Problem Signature 06: 50a1a534
  Problem Signature 07: 2c
  Problem Signature 08: 11a
  Problem Signature 09: System.IndexOutOfRangeException
  OS Version:   6.2.9200.2.0.0.272.7
  Locale ID:    1033
  Additional Information 1: 405e
  Additional Information 2: 405e61bb034bc989d1c165b6e791ea8b
  Additional Information 3: 40a4
  Additional Information 4: 40a44cd3ba2d99a4ae774300b848d2cc 
```

这是我们正在运行的组件的版本

```
Internet Explorer version: 10.0.9200.16384.
Visual Studio: Microsoft Visual Studio Professional 2012, Version 11.0.51106.01 Update 1
Typescript: 0.8.1.0 
```

我尝试在禁用所有其他扩展的情况下运行它，但无济于事。我们在 0.8.0.0 中没有遇到这个问题。我认为这可能与源地图有关，但我们没有生成任何地图，也没有使用源地图开关。我们能够在 Chrome 中调试应用程序而不会出现任何问题。

除了这些信息之外，我不知道还有什么要补充的。如果你们能指出我要检查的正确方向，我会用我的回答来更新这个问题。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T04:03:02.217

收到同样的行为，发现 TypeScript 调试引擎不喜欢 .map 文件，而不是使用 tsc --sourcemap 开关为 TypeScript 文件创建的文件，并且会导致 VS 崩溃。

**通过删除为与已编译的 TypeScript .js 文件在同一页面上加载的非 TypeScript 文件生成的 .map 文件来**解决此问题。****

 **在我的例子中，我使用 Web Essentials 插件进行右键单击缩小，它还会生成一个相关的 .map 文件。我删除了缩小的 .map 文件，VS 不再崩溃。注意：使用 Web Essentials 插件还会为捆绑包生成 .map 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:12:19.303

Typescript 0.8.1.0 几乎没有已知的崩溃。Typescript 0.8.1.1 已经修复了这些问题。**

# .net - 如何将哈希数组传递给 Powershell 2.0 和 3.0 中的函数？

> ID：13811236
> 
> 赞同：0
> 
> 时间：2012-12-10T23:42:08.103
> 
> 标签：.net, powershell

如何将哈希数组传递给 Powershell 中导入模块中的函数？

Powershell 3.0 和 2.0 之间有区别吗？这样我就可以使用向后兼容的语法？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T00:02:01.617

PowerShell 2.0 和 3.0 在这方面没有区别。您只需创建一个哈希表数组并将它们传递给您的函数，例如：

```
MyFunction @(@{name='ringo';age=72},@{name='paul';age=70}) 
```

您的功能可以定义为：

```
function MyFunction($hashtables) { ... } 
```

或者

```
function MyFunction([hashtable[]]$hashtables) { ... } 
```

# c# - N注入 在未引用的程序集中定义

> ID：13811239
> 
> 赞同：0
> 
> 时间：2012-12-10T23:42:12.793
> 
> 标签：c#, asp.net-mvc-3, entity-framework, ninject

N在这里注入菜鸟。很抱歉后面的代码墙，但这里有很多活动部分。

我有一个命名空间，它定义了我想要编程的实现不可知的持久性接口。顶层界面如下所示：

```
namespace Common.PersistenceStrategy
{
    public interface IPersistenceStrategy
    {
        IPersistenceRepositoryInstructionResult Commit();

        IPersistenceRepository<T> repositories<T>() where T : class;
    }
} 
```

该接口的通用 EF 实现位于它自己的命名空间和项目中：

```
namespace Common.PersistenceStrategy.EF
{
    public class EFPersistenceStrategy : IPersistenceStrategy 
    {
        protected DbContext _context;

        public EFPersistenceStrategy(DbContext context)
        {
            _context = context;
        }
        //Other Implementation stuff...
} 
```

特定于项目的实现获得它自己的命名空间和项目。这个想法是覆盖一些通用/默认的 EF 行为，并在当前项目中充当 EF 依赖的单点。

```
namespace MyProject.DAL
{
    public class MyProjectPersistenceStrategy : EFPersistenceStrategy
    {
        public MyProjectPersistenceStrategy() : base(new MyProjectDbContext())
        {}
        //project specific implementation overrides
    }
} 
```

到达那里...在使用/使用 MyProjectPersistenceStrategy 的网站中，控制器继承自此类：

```
namespace MyProject.Site.Controllers
{
    public abstract class ControllerWithUnitOfWork : Controller
    {
        [Inject]
        public IPersistenceStrategy _persistenceStrategy { get; set; }
        //other implementation stuff
    }
} 
```

最后，这是将 IPersistenceStrategy 连接到 MyProjectPersistenceStrategy 的 NInject 内核代码：

```
private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<IPersistenceStrategy>().To<BlackoutPersistenceStrategy>();

    } 
```

因此，我收到两条与内核绑定部分相关的错误消息：

```
Error   3   The type 'Common.PersistenceStrategy.EF.EFPersistenceStrategy' is defined in an assembly that is not referenced. You must add a reference to assembly 'Common.PersistenceStrategy.EF...

Error   6   The type 'MyProject.DAL.MyProjectPersistenceStrategy' cannot be used as type parameter 'TImplementation' in the generic type or method 'Ninject.Syntax.IBindingToSyntax<T1>.To<TImplementation>()'. There is no implicit reference conversion from 'MyProject.DAL.MyProjectPersistenceStrategy' to 'Common.PersistenceStrategy.IPersistenceStrategy'.   C:\dev\Blackout\Blackout.Site\App_Start\NinjectWebCommon.cs 
```

MyProject.Site 已经获得了对 MyProject.DAL 和 Common.Persistence 的引用，这很好而且很明智。

如果我从我的 Web 项目中引用 Common.Persistence.EF，这两个错误都会消失。不过，这并不是真正的跑步者，因为依赖注入工作的重点是将 EF 的依赖隔离到当前项目中的单个模块。似乎 NInject 不能走 MyProjectPersistenceStrategy 和 IPersistenceStrategy 之间的关系链，除非它可以看到两者之间的整个类树？有没有直接的解决方案，或者我想在这里做错事？干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:14:28.390

这不是 Ninject 问题。这是构建过程（编译）问题。`Common.PersistenceStrategy.EF.EFPersistenceStrategy`如果缺少引用，则无法构建 Web 项目，因为`MyProject.DAL.MyProjectPersistenceStrategy`继承自那里定义的类。

*评论*

想象一下构建应用程序后的 bin 文件夹。它必须包含`Common.PersistenceStrategy.EF.dll`运行您的应用程序（实际上它必须包含所有未在 GAC 中注册的必需 dll）。因此，MsBuild 希望您声明对该项目 dll 的引用，因为他从`*.csproj`文件中读取构建应用程序所需的 dll。在我看来，`<ProjectReference Include="..\MyProject\MyProject.csproj">`*.csproj 内部只是指出 MSBuild 它应该首先在该引用的构建脚本上运行构建，但不会查看其中的其他引用。事实上，如果你在 VS 中查看引用项目的属性，路径指向该项目的 bin 文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:38:45.720

通过在 .DAL 和 .Site 命名空间之间添加一个新程序集（仅包含一个 NInject 模块）来解决此问题。

这个新程序集在一个可交换的球中包含所有持久性实现依赖项，因此 .Site 命名空间只需要引用它并且 .Site 使用的接口（在本例中为 Common.Persistence ）。

# android - 覆盖android系统设置的字体大小

> ID：13811241
> 
> 赞同：3
> 
> 时间：2012-12-10T23:42:28.557
> 
> 标签：android, layout, system, font-size

我遇到了问题，如果有人编辑了 android 系统的字体大小（在 Settings->Display->Font Size 中），我的应用布局不再适合。我以正常字体大小开发了我的应用程序。

我想仅为此应用程序覆盖系统设置的字体大小。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T23:57:54.393

> 我想仅为此应用程序覆盖系统设置的字体大小。

这在严格意义上是不可能的。任何测量`sp`都会考虑字体缩放。

您的短期解决方案是将这些尺寸更改为`dp`，因为1在正常字体比例下`sp`等于 1 。`dp`

话虽如此，请考虑更新您的 UI，使其在字体比例方面更加灵活，因为这对一些视力不那么敏锐的用户来说很重要。

# java - 使用 WebSphere 和 Spring 集成的 SSH 配置

> ID：13811248
> 
> 赞同：0
> 
> 时间：2012-12-10T23:43:05.307
> 
> 标签：java, spring, jakarta-ee, websphere, spring-integration

我有一个托管在 WebSphere 上的 Web 应用程序（Spring MDP），它监听消息并使用 SFTP 在 3 个不同的服务器（Unix 机器）上生成一些文本文件。我们正在使用 Spring 集成 (DefaultSftpSessionFactory) 来建立 SFTP 连接，并使用目标主机的用户凭据（用户名/密码）将文件写入不同的服务器。

现在，根据新要求，我们必须停止使用用户名/密码来连接服务器，而是使用 SSH 密钥对。我们得到了指示，我们必须使用 SSH 密钥为“wasadm”用户建立连接。这是我到目前为止所做的：

1.  从 WAS Admin 团队获得了“wasadm”用户的公钥。
2.  将公钥安装到不同服务器的授权密钥。

现在，我的问题是 - 如何配置我的应用程序，以便它获取“wasadm”SSH 私钥以连接到目标框。（私钥位于“/home/wasadmin/.ssh”位置。EAR 应用程序是否可以访问此目录？如果可以，如何配置 DefaultSftpSessionFactory 以使用此私钥进行身份验证）。

非常感谢任何指针和指导。

非常感谢。

-阿什什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:44:56.713

sftp 示例显示了如何做到这一点... [https://github.com/garyrussell/spring-integration-samples/tree/master/basic/sftp](https://github.com/garyrussell/spring-integration-samples/tree/master/basic/sftp)

您在会话工厂上配置它...

```
<bean id="sftpSessionFactory" class="org.springframework.integration.sftp.session.DefaultSftpSessionFactory">
    <property name="host" value="${host}"/>
    <property name="privateKey" value="classpath:path-to-key/sftp_rsa"/>
    <property name="privateKeyPassphrase" value="${passphrase}"/>
    <property name="port" value="22"/>
    <property name="user" value="${user}"/>
</bean>

<int-sftp:outbound-channel-adapter id="sftpOutboundAdapter"
            session-factory="sftpSessionFactory"
... 
```

# java - 在我的情况下，JSF 中选择哪种用户身份验证？

> ID：13811250
> 
> 赞同：1
> 
> 时间：2012-12-10T23:43:13.203
> 
> 标签：java, jakarta-ee, authentication, jsf-2, glassfish

我几乎一整天都在使用 JSF 身份验证，我想我完全迷路了。我想要灵活的身份验证。

大多数人说“结合 JDBC 领域的基于 HTTP FORM 的身份验证”是最好的……但在我看来有点……不灵活。我不想将数据库名称以及用户名、密码、组等的表设置为常量。

**所以我的问题是：**如果我有一个返回用户名和密码是否正确的方法的 Web 服务（JAX-WS、WCF 等 - 我认为这并不重要），那么最好的方法是什么？当我有一个将连接到数据库本身以检查用户和密码是否正常的功能时。我只需要关心哪个页面显示（登录页面或“请求”页面）的整个机制。如果登录页面，它将使用我的 webservice 方法来检查它..

顺便提一句。有没有什么好的文章可以比较并说明我们应该在哪种情况下使用什么方法？

PS。对不起，如果话题不好，我没有更好的主意：/

* * *

**编辑：** 换句话说：[这](http://blog.eisele.net/2011/01/jdbc-security-realm-and-form-based.html)是一个如何使用基于领域和表单的身份验证的示例。我必须有数据库，带有用户表、用户名列、密码列、组表等。对吗？我必须用这个配置我的域...但是，如果我没有访问数据库的权限怎么办？我只能访问网络服务，它会告诉我用户名和密码是否正确..

在这种情况下我应该使用哪种用户身份验证方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:17:15.227

一种方法是使用连接到 Web 服务而不是数据库的自定义领域。如何做到这一点是部分标准化的（使用 JAAS），但仍然取决于应用程序服务器。对于 glassfish，请参阅这个非常相似的问题和答案：[Java Web Application: Using a custom realm to perform login through a webservice](https://stackoverflow.com/questions/719708/java-web-application-using-a-custom-realm)

另一种方法是不使用 Java EE 安全性，并在 Web 应用程序中自己处理所有安全性（例如使用过滤器等）。我会首先尝试使用自定义领域的 Java EE 兼容方式。

# linux - linux上pthreads之间通信的最快方法是什么

> ID：13811254
> 
> 赞同：1
> 
> 时间：2012-12-10T23:43:26.353
> 
> 标签：linux, multithreading, pthreads

我有一个 pthreads 应用程序，我目前使用常规 linux 管道来通信并向各个线程发送消息。它工作正常，并没有真正损坏，但我有一种可以改进的感觉。

如果我想设计最小的延迟，那么在 pthread 之间进行通信的**最快**方法是什么？使用条件变量会比管道更快吗？

我需要传递少量数据，作为带有几个参数的单个 int optcode。pthreads 条件变量会让我在线程之间传递数据吗？

谢谢，

-安德烈斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:50:57.350

由于它在线程之间，因此共享内存或无锁队列都会快得多。

选择哪一个取决于您传递的数据。由锁保护的两个线程之间共享的静态缓冲区很好。在您生成数据并将其传递给另一个线程的地方，队列可能是更好的选择。

有界无锁 MPMC 队列的一些实现可在此处获得：[http ://www.1024cores.net](http://www.1024cores.net)

顺便说一句，要小心编写自己的无锁数据结构。它们并不像您期望的那样微不足道。锁定版本将是一个好的开始，并且仍然会胜过管道。

在进程之间调用它们的 linux 管道（或 unix 域套接字是一个不错的选择）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T06:04:20.007

使用线程而不是单独的进程的主要优点是它们共享内存。通过管道发送数据需要通过内核进行往返，而将共享内存缓冲区与互斥锁和条件变量结合使用可以避免这种情况——当然它应该比使用管道具有更低的延迟。

您不使用条件变量直接传递感兴趣的数据。相反，数据被放置到两个线程共享的内存位置，并且使用条件变量来唤醒正在等待数据到达的线程。

# ios - 不明白如何使用 NSClassFromString 进行条件调用

> ID：13811255
> 
> 赞同：5
> 
> 时间：2012-12-10T23:43:28.570
> 
> 标签：ios

我的项目中有一个测试类，它在开发阶段就在那里，但会为应用商店构建而编译出来。

我在几本书中读过 NSClassFromString 可用于通过示例代码确定一个类是否存在，例如：

```
if (NSClassFromString(@"SomeClass") != nil)
{
[SomeClass someMethod];
}
else
{
code not using SomeClass
} 
```

但是，在我的项目中将其付诸实践后，我发现我在删除包含 SomeClass 的源文件的目标时遇到了链接错误。

因此，我的结论是，这种确定类存在/不存在的机制仅在该类位于您使用其他类的库或源文件中时才有用（提及此技术的书籍中缺少该细节）。还是我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T00:00:39.140

`NSClassFromString`在运行时搜索命名类。事实上，它将确定该类是否存在。

为了让编译器成功地获得过去的静态引用，就像`[SomeClass someMethod]`它需要链接的东西一样。

您是对的，因此当您链接到 Foundation 之类的东西时，该机制会起作用，Apple 会在那里添加一个额外的类，例如检查是否`NSJSONSerialization`存在。

如果您对可能存在或不存在的框架进行弱链接，它也可以工作。因此，例如，您可以对 Twitter.framework 进行弱链接并使用`[TWRequest alloc] ...`. 您仍然可以在根本没有 Twitter 框架的 iOS 4 上构建和部署。

苹果实际上已经稍微修改了库的存储方式，并且正在过渡到允许`if([TWRequest class])`或使用任何东西来代替显式的`NSClassFromString`弱链接。

但是，在您的情况下，听起来您想要链接到静态库还是不链接到它？因此，该类在运行时可能可用也可能不可用，但链接器也可能可见或不可见？

在这种情况下，您只需要避免对元类的字面引用。因此，您可以执行以下操作：

```
Class someClassMetaClass = NSClassFromString(@"SomeClass");

if(someClassMetaClass)
{
    SomeClass *instance = [[someClassMetaClass alloc] init];
    /* ... */
} 
```

只要头文件可见，编译器就会很乐意允许您指定`SomeClass`指针的类型（因为无论如何它都不会进入二进制文件），并且能够针对已发布的接口建议通常的自动完成和警告。只要确保您始终通过指向`Class`您从运行时而不是直接获得的指针来寻址元类。这样，链接器就没有什么需要跟进的了。

# c# - 寻求有关在 .Net WPF App 中嵌入报告模板工具的建议

> ID：13811258
> 
> 赞同：1
> 
> 时间：2012-12-10T23:43:51.223
> 
> 标签：c#, .net, wpf

我刚刚开始研究构建一个基于模板的报告工具，以存在于 .Net WPF 框架中构建的应用程序中。现在我正在研究可能的方法来调查/vette/考虑。

基本上，客户希望将报告系统嵌入到他们新的基于 WPF 的体系结构中。除了一定程度的报告设计外，该系统还包括报告生成。最终用户本质上是研究人员/临床医生，因此使用完整的报告设计系统，例如 DevExpress（我真的很喜欢）和 Crystal（我不喜欢）将是矫枉过正。

本质上，最终报告读起来很像带有研究活动和程序列表的 MS Word 文档（而不是一份好的 ol'financial 报告）。从用户的角度来看，我认为设计作品必须是非常愚蠢的证明才能使用。我们不希望最终用户对列标题和复杂的报表装饰之类的东西感到厌烦。

最简单的事情（从用户的角度来看）是让他们创建一些基本的报告模板。

想想这个模型：您的显示/报告区域位于左侧的面板中，右侧有一系列预定义的模板，用户可以单击、拖动和放置报告/文档设计面板。

我知道 Microsoft Word 在某处对此有一定程度的支持。但是我看到的解决方案似乎不适合 WPF 框架。你必须在你的 WPF 应用程序中嵌入一个 winform 来支持这种点击和拖动行为。如果可能的话，如果我们不需要，我宁愿不必将 winforms 吸入这个 WPF。

我们真的不想编写和支持功能齐全的本土报告设计师（我们不应该这样做）。

在方法/技术方面有什么想法吗？（自定义解决方案、开源、第 3 方控制等）

有没有人做过类似的事情？

我觉得外面有什么东西很接近。

谢谢，约翰B

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:10:05.847

Telerik 有一个很好的套件 - 如果您对第三方控件感兴趣

[Telerik 报告控制](http://www.telerik.com/products/reporting.aspx?gclid=CMrm_trlkbQCFePHtAodn2cA4A)

# c# - c#中的HPI图像文件查看元数据

> ID：13811266
> 
> 赞同：0
> 
> 时间：2012-12-10T23:44:36.420
> 
> 标签：c#, image, metadata

任何人都知道任何允许加载和查看 HPI 图像元数据的 c# 库吗？

我需要从 HPI 图像文件中查看一些元数据信息，我什至无法将其加载到 c# 中:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:01:07.440

也许为时已晚，但前 32 个字节是来自[http://www.halley.cc/ed/linux/interop/hemera.html的元数据](http://www.halley.cc/ed/linux/interop/hemera.html)

文件类型签名 { 89 48 50 49 0D 0A 1A 0A }
little-endian integer { 64 00 00 00 }; 对于版本 1.0.0 little-endian 整数，可能是十进制 100，
例如 { 20 00 00 00 }；JPEG数据
小端整数开头的文件偏移量，例如{ E8 F3 00 00 }；JPEG 数据 little-endian 整数的字节长度，
例如 { 08 F4 00 00 }；文件中的偏移量，用于 PNG 掩码数据
little-endian 整数的开头，例如 { 25 42 00 00 }；PNG数据的字节长度
小端整数{00 00 00 00}；可以保留以供将来使用

在这里您可以找到如何将 hpi 转换为透明 png：[http ://websitedesign-seo.co.uk/website-design-company/2011/03/22/hpi2png-linux-hemera-photo-image-converter/](http://websitedesign-seo.co.uk/website-design-company/2011/03/22/hpi2png-linux-hemera-photo-image-converter/)

# php - PHP XSLTProcessor 并将数据传递给 PHP 函数

> ID：13811267
> 
> 赞同：1
> 
> 时间：2012-12-10T23:44:44.553
> 
> 标签：php, xml, xslt

我需要从 XSLTProcessor 中注册的 PHP 函数访问一些 XSL 数据。我找到了如何将当前节点传递给函数。

XSL：

```
<xsl:value-of select="php:function('foo', node())" /> 
```

PHP：

```
function foo($node)
{
    # Here we go, we got DOMNode array and as a consequence - DOMDocument
    var_dump($node);
} 
```

好的，这部分工作正常。问题出在第二部分：我需要将所有在调用点可见的 XSL 变量传递给 PHP 函数。或者，我需要以某种方式从 PHP 函数中按名称获取 XSL 变量值。这就是问题所在 - 我找不到如何做到这一点。可能是一些特殊的 XPath 请求？还是有什么特殊功能？还是有什么特别的技巧？或者是其他东西？

# iis - Web 部署工具不能从 localhost 工作，但可以从远程工作

> ID：13811275
> 
> 赞同：0
> 
> 时间：2012-12-10T23:45:21.687
> 
> 标签：iis, windows-server-2008-r2, web-deployment, webdeploy

设置：

1.  视窗服务器 2008 R2
2.  已安装并运行 Web 部署工具 2.1
3.  管理服务已安装并正在运行

当指定远程 url 为“mydeploymentserver”时，我可以使用 VS 2010 或 msbuild 从我的开发机器进行部署

当我在我的开发机器的浏览器中键入时，`http://localhost/MSDEPLOYAGENTSERVICE`它要求基本身份验证，当我提供用户并通过时，它显示一个空白页面（我假设身份验证通过，因为它不再询问）。

奇怪的问题是，当我在服务器本身上运行 msbuild 任务时，使用远程 url“localhost”，它报告了这个错误：

```
Remote agent (URL http://localhost/MSDEPLOYAGENTSERVICE) could not be contacted. Make sure the remote agent service is installed and started on the target computer.

An unsupported response was received. The response header 'MSDeploy.Response' was '' but 'v1' was expected.

The remote server returned an error: (401) Unauthorized. 
```

此外，如果我在部署服务器本身上启动浏览器，然后点击 url `http://localhost/MSDEPLOYAGENTSERVICE`，它会报告 Internal Server Error 500 而没有任何其他信息。注意 - 它不像我从另一台机器上尝试 url 时那样要求用户名/密码。

另一个奇怪的事情是，即使启用了日志记录并启动了服务，C:\inetpub\logs\wmsvc 中也没有管理服务的日志文件。

知道有什么问题吗？为什么它应该从外部工作，而不是本地主机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:40:19.977

Web 部署工具似乎与“localhost”有问题。这是一个常见的问题。这可能是微软的一些安全问题。使用服务器的全名 (FQDN) 而不是 localhost。

# c - 清理 C 代码中的指针

> ID：13811276
> 
> 赞同：0
> 
> 时间：2012-12-10T23:45:27.440
> 
> 标签：c, pointers, compiler-warnings

在下面的代码片段中，可以做些什么来 a) 使编译器安静，以及 b) 清理令人眼花缭乱的指针混乱？

```
extern struct tree *sintablein[sintablesize];
struct tree *(*tablein)[];
int i;

tablein = &sintablein;     // The compiler complains:
                           // "redundant & applied to array (warning)" and
                           // "illegal conversion between pointer types (warning)"

for(i = 0; i < 10; i++) {
    struct tree *tablemember = (*tablein)[i];   // However, this works like a charm.
    // Do stuff with tablemember
} 
```

我能够做到这一点的唯一方法是使用非常有用的[http://cdecl.org/](http://cdecl.org/)。特别是关于 (b)，如何尽可能简化指针和取消引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:49:58.490

让编译器安静的最好方法是听从它的建议。如果编译器抱怨，那么通常是有充分理由的。即使代码有效，它也有可能在将来或在另一个平台上引起问题。

现在，话虽如此，两种使编译器静音的方法是：

1.  调整警告灵敏度。
2.  使用强制转换（通常可以通过显式强制转换来解决投诉）。

至于眼睛交叉指针混乱......你必须更具体。如果您正在处理 C，那么您几乎将要处理指针，有时您最终会得到的正是眼花缭乱 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:50:19.630

我会这样做：

```
extern struct tree *sintablein[sintablesize];
struct tree **tablein = sintablein;

// ...

for(i = 0; i < 10; i++) {
    struct tree *tablemember = tablein[i];
    // Do stuff with tablemember
} 
```

请注意，当您这样做时，`(*tablein)[i]`您正在获取数组的第一个元素`tablein`并将其视为项目数组`struct tree`而不是单个`struct tree*`指针。这可能不是你想要的。

# r - 列表的命名列表

> ID：13811277
> 
> 赞同：1
> 
> 时间：2012-12-10T23:45:41.927
> 
> 标签：r

我有一个结构列表的列表：

```
[[1]]
[[1]][[1]]
vector a

[[1]][[2]]
vector b

[[1]][[3]]
vector c

[[1]][[4]]
vector d 
```

我想将其重命名为：

```
[["main name"]]
[["subname 1"]][[1]]
vector a
[["subname 1"]][[2]]
vector b

[["subname 2"]][[1]]
vector c
[["subname 2"]][[2]]
vector d 
```

我不知道这是否可行，或者我是否需要不同的数据结构。拜托，我想对此提出一些建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T00:07:11.077

您可以使用`names`在列表中分配和获取名称（请参阅 参考资料`?names`）。

例如，如果我制作了一个类似于您的列表的列表（我注意到您的示例中第一个列表的结构不等于第二个列表的结构 - 您的第二个列表似乎嵌套了三层深，而第一个是嵌套两层深）：

```
myList <- list( list('vector a', 'vector b', 'vector c', 'vector d') )
# > myList
# [[1]]
# [[1]][[1]]
# [1] "vector a"
# 
# [[1]][[2]]
# [1] "vector b"
# 
# [[1]][[3]]
# [1] "vector c"
# 
# [[1]][[4]]
# [1] "vector d" 
```

我可以将列表名称分配给顶层

```
names(myList) <- c('main name') 
```

这让我得到`myList[[1]]`as `myList[['main name']]`。我现在可以将列表名称分配给`myList[['main name']]`这样的：

```
names(myList[['main name']]) <- c('subname 1', 'subname 2', 'subname 3', 'subname 4') 
```

现在，如果你这样做`myList[['main name']][['submname 1']]`，你会得到`"vector a"`.

注意 - 我建议你不要在名字中使用空格，因为那样你就不能使用语法糖`myList$column_name`。

例如（这个列表的结构更像你的问题中的第二个，给你另一个例子）：

```
myList <- list( list('a', 'b'), list('c', 'd') )
names(myList) <- c('subname_1', 'subname_2')
myList$subname_1
# list('a', 'b')
# we can do list names one level deeper too if you like
names(myList$subname_1) <- c('a', 'b')
myList$subname_1$a
# 'a' 
```

此外，可以在列表构造时而不是之后分配名称：

```
myList <- list( subname_1=list(a='a', b='b'), subname_2=list(c='c', d='d') ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-07T13:51:38.827

```
myList <- list( list('vector a', 'vector b', 'vector c', 'vector d') )
names(myList) <- c('main name')
names(myList)

[1] "main name"

names(myList[['main name']]) <- c('subname 1', 'subname 2', 'subname 3', 'subname 4')

names(myList[['main name']]) 

[1] "subname 1" "subname 2" "subname 3" "subname 4"

myList[['main name']][['submname 1']] #What am I doing wrong here?
NULL

 myList[[1]][[1]]
[1] "vector a"

 myList['main name']
$`main name`
$`main name`$`subname 1`
[1] "vector a"

$`main name`$`subname 2`
[1] "vector b"

$`main name`$`subname 3`
[1] "vector c"

$`main name`$`subname 4`
[1] "vector d" 
```

# vb.net - 在Visual Basic中退出时打开和关闭表单？

> ID：13811278
> 
> 赞同：3
> 
> 时间：2012-12-10T23:46:13.687
> 
> 标签：vb.net, winforms

如何在退出辅助表单时重新加载主表单？例如，如果 frmMain 是主窗体，而您将其隐藏以加载另一个名为 GenerateNumbers 的窗体，那么当用户退出 GenerateNumbers 时如何返回 frmMain？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T00:01:21.373

最好的方法是为子窗体的事件添加一个事件处理程序`Closing`。这样，当子窗体关闭时，主窗体将收到通知，然后它可以重新显示自己。例如：

```
AddHandler frmChild.Closing, AddressOf ChildClosing
frmChild.Show()
Me.Hide()

'....

Private Sub ChildClosing(sender As Object, e As EventArgs)
    RemoveHandler CType(sender, Form).Closing, AddressOf ChildClosing
    Me.Show()
End Sub 
```

正如其他人所说，如果您使用该`ShowDialog`方法显示子表单，那会容易得多。事实上，如果你这样做，那么真的没有理由隐藏主窗体，你可以将主窗体作为所有者传递到对话框中：

```
frmChild.ShowDialog(Me) 
```

提示：如果不隐藏主窗体，请将子窗体的起始位置属性设置为以所有者为中心。

或者，您可以提供对主窗体的引用，以便它可以使主窗体在关闭时可见，但我会说这是最不可取的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:56:17.660

如果您使用 ShowDialog 调用辅助窗体，那么您将在从 ShowDialog 方法返回辅助窗体后使您的主窗体可见。

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim frm2 As Form2 = New Form2
    Me.Hide()
    frm2.ShowDialog()
    Me.Show()
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T23:55:46.990

如果您将辅助形式显示为模态，那应该很容易。把它放在你用来显示次要形式的任何事件中：

```
frmMain.Visible = False
frmGenerateNumbers.ShowDialog()
frmMain.Visible = True 
```

# c# - 类型“MyDTO”无法序列化 - Wcf 服务

> ID：13811279
> 
> 赞同：3
> 
> 时间：2012-12-10T23:46:21.790
> 
> 标签：c#, wcf, dto

我正在创建 2 个 wcf 服务 - ADService 和 DBService。我正在使用称为 EmployeeDTO 和 CustomerDTO 的 DTO 在端点之间交换数据。我无法将任何服务作为服务引用添加到我的解决方案中的其他项目，当我运行 WCF 主机并尝试访问 ADService.svc 或 DBService.svc 时，我得到以下信息：

```
    无法序列化类型“DTOs.CustomerDTO”。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。如果该类型是一个集合，请考虑使用 CollectionDataContractAttribute 对其进行标记。

```

和

```
    无法序列化类型“DTOs.EmployeeDTO”。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。如果该类型是一个集合，请考虑使用 CollectionDataContractAttribute 对其进行标记。

```

我的文件如下所示：

类 CustomerDTO

```
    使用系统；
    使用 System.Collections.Generic；
    使用 System.Linq；
    使用 System.Text；

    命名空间 DTO
    {
        公共类 CustomerDTO
        {
            公共 int 客户 ID；
            公共字符串名称；
            公共字符串姓氏；
            公共串街；
            公共字符串 post_code；
            公共字符串城市；
            公共字符串国家；
            公共字符串personal_code；
            公共字符串电话号码；
            公共字符串组类型；
            公共字符串员工；

            公共 CustomerDTO（int _customerID，字符串 _name，字符串 _surname，字符串 _street，字符串 _post_code，字符串 _city，字符串 _country，字符串 _personal_code，字符串 _phone_number，字符串 _group_type，字符串 _employee）
            {
                this.customerID = _customerID;
                this.name = _name;
                this.surname = _surname;
                this.street = _street;
                this.post_code = _post_code;
                这个.city = _city;
                this.country = _country;
                this.personal_code = _personal_code;
                this.phone_number = _phone_number;
                this.group_type = _group_type;
                this.employee = _employee;
            }
        }
    }

```

EmployeeDTO 类：

```
    使用系统；
    使用 System.Collections.Generic；
    使用 System.Linq；
    使用 System.Text；

    命名空间 DTO
    {
        公共类EmployeeDTO
        {
            公共字符串给定名称；
            公共字符串 sn;
            公共字符串电话号码；
            公共字符串 sAMAccountName;
            公共字符串标题；
            公串部；
            公共字符串 distinctName；
            公共字符串 OU；
            公共布尔启用；

            公共EmployeeDTO（字符串_givenName，字符串_sn，字符串_telephoneNumber，字符串_sAMAccountName，字符串_title，字符串_Department，字符串_distinguishedName，字符串_OU，布尔_启用）
            {
                this.Department = _Department;
                this.distinguishedName = _distinguishedName;
                this.givenName = _givenName;
                this.sAMAccountName = _sAMAccountName;
                这个.sn = _sn;
                this.telephoneNumber = _telephoneNumber;
                this.title = _title;
                这个.OU = _OU;
                this.enable = _enable;
            }
        }
    }

```

网页配置

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings>
    <add name="ki_dbEntities" connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=WIN-D3T41W1E5EB\SQLEXPRESS;Initial Catalog=ki_db;Integrated Security=True;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient"/>
  </connectionStrings>
  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5"/>
  </system.web>
  <system.serviceModel>
    <services>
      <service name="WcfHost.ADService">
        <endpoint address="" binding="basicHttpBinding" contract="WcfHost.IADService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8733/WcfServiceLibrary/ADService/" />
          </baseAddresses>
        </host>
      </service>
      <service name="WcfHost.DBService">
        <endpoint address="" binding="basicHttpBinding" contract="WcfHost.IDBService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8733/WcfServiceLibrary/DBService/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <protocolMapping>
      <add binding="basicHttpsBinding" scheme="https" />
    </protocolMapping>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true"/>
  </system.webServer>

</configuration> 
```

IADService.cs

```
    使用系统；
    使用 System.Collections.Generic；
    使用 System.Linq；
    使用 System.Runtime.Serialization；
    使用 System.ServiceModel；
    使用 System.Text；
    使用 System.Threading.Tasks；
    使用 DTO；
    使用 System.Security.Principal；

    命名空间 WcfHost
    {
        // 注意：您可以使用“重构”菜单上的“重命名”命令在代码和配置文件中同时更改接口名称“IADService”。
        [服务合约]
        公共接口IADService
        {
            [运营合同]
            布尔集连接（）；
            .
            .
            .
            [运营合同]
            任务 changeAccountStatus(EmployeeDTO _employee);

        }
    }

```

IDBService.cs 是类比定义的。

我似乎找不到这个错误的原因，特别是我的一个朋友有一个类似的实现并且它可以工作而我的没有。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T23:52:36.060

要通过网络序列化一个类，您需要使用 DataContract 和 DataMember 属性标记它（如它所说）。我相信您还需要将这些字段转换为属性。所以你需要：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace DTOs
{
    [DataContract]
    public class CustomerDTO
    {
        [DataMember]
        public int customerID { get; set; }

        [DataMember]
        public string name { get; set; }

        [DataMember]
        public string surname { get; set; }

        [DataMember]
        public string street { get; set; }

        [DataMember]
        public string post_code { get; set; }

        [DataMember]
        public string city { get; set; }

        [DataMember]
        public string country { get; set; }

        [DataMember]
        public string personal_code { get; set; }

        [DataMember]
        public string phone_number { get; set; }

        [DataMember]
        public string group_type { get; set; }

        [DataMember]
        public string employee { get; set; }

        public CustomerDTO(int _customerID, string _name, string _surname, string _street, string _post_code, string _city, string _country, string _personal_code, string _phone_number, string _group_type, string _employee)
        {
            this.customerID = _customerID;
            this.name = _name;
            this.surname = _surname;
            this.street = _street;
            this.post_code = _post_code;
            this.city = _city;
            this.country = _country;
            this.personal_code = _personal_code;
            this.phone_number = _phone_number;
            this.group_type = _group_type;
            this.employee = _employee;
        }
    }
} 
```

因为您的操作合同使用 EmployeeDTO 类型作为输入参数，这意味着客户端需要能够创建该类型并将其通过线路发送到服务器。所以它必须归因于`[DataContract]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T23:51:01.407

正如它在错误消息中所说，将`DataContract`属性放在类上方：

```
[DataContract]
public class CustomerDTO
{
... 
```

您还需要将该属性放置在`DataMember`您希望通过服务提供的任何属性之上，以及`OperationContract`任何您想提供的方法之上。

有关更多信息，请参阅本教程： [http ://www.wcftutorial.net/Data-Contract.aspx](http://www.wcftutorial.net/Data-Contract.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T13:01:00.167

我最近在尝试运行我的应用程序并在浏览器中显示 WSDL 时遇到了这个错误。这种情况很奇怪，因为黄色 WSDL 错误页面识别的对象实际上是我的 WCF 服务。这让我摸不着头脑。

最后我已经将 WCF 服务类添加到 ServiceKnownTypeAttribute，到一个错误的接口作为 [ServiceKnownType(typeof(classname))] 但是深夜......

因此，这是您可能会收到此错误消息的另一个原因。

干杯

# android - Android应用程序崩溃，为什么？

> ID：13811282
> 
> 赞同：0
> 
> 时间：2012-12-10T23:46:35.187
> 
> 标签：android, fatal-error

我正在尝试创建一个简单的 Android 应用程序，它可以获取网站的源代码。无论如何，我写了以下内容：

```
WebView webView = (WebView) findViewById(R.id.webView);
try {
    webView.setWebViewClient(new WebViewClient());          
    InputStream input = (InputStream) new URL(url.toString()).getContent();
    webView.loadDataWithBaseURL("", "<html><body><p>"+input.toString()+"</p></body></html>", "text/html", Encoding.UTF_8.toString(),""); 
    //setContentView(webView);
} catch (Exception e) {
    Alert alert = new Alert(getApplicationContext(),
                            "Error fetching data", e.getMessage());
} 
```

以下是错误：

```
12-11 01:37:59.234: E/AndroidRuntime(28992): FATAL EXCEPTION: main
12-11 01:37:59.234: E/AndroidRuntime(28992): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
12-11 01:37:59.234: E/AndroidRuntime(28992):    at android.view.ViewRootImpl.setView(ViewRootImpl.java:701)
12-11 01:37:59.234: E/AndroidRuntime(28992):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:345)
12-11 01:37:59.234: E/AndroidRuntime(28992):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:224)
12-11 01:37:59.234: E/AndroidRuntime(28992):    at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:149)
12-11 01:37:59.234: E/AndroidRuntime(28992):    at android.app.Dialog.show(Dialog.java:277)
12-11 01:37:59.234: E/AndroidRuntime(28992):    at com.myprogram.myprogram.Alert.<init>(Alert.java:11)
12-11 01:37:59.234: E/AndroidRuntime(28992):    at com.myprogram.myprogram.MainActivity$1.onClick(MainActivity.java:84)
12-11 01:37:59.234: E/AndroidRuntime(28992):    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:167)
12-11 01:37:59.234: E/AndroidRuntime(28992):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-11 01:37:59.234: E/AndroidRuntime(28992):    at android.os.Looper.loop(Looper.java:137)
12-11 01:37:59.234: E/AndroidRuntime(28992):    at android.app.ActivityThread.main(ActivityThread.java:4898)
12-11 01:37:59.234: E/AndroidRuntime(28992):    at java.lang.reflect.Method.invokeNative(Native Method)
12-11 01:37:59.234: E/AndroidRuntime(28992):    at java.lang.reflect.Method.invoke(Method.java:511)
12-11 01:37:59.234: E/AndroidRuntime(28992):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
12-11 01:37:59.234: E/AndroidRuntime(28992):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
12-11 01:37:59.234: E/AndroidRuntime(28992):    at dalvik.system.NativeStart.main(Native Method)
12-11 01:38:21.484: I/Process(28992): Sending signal. PID: 28992 SIG: 9
12-11 01:38:32.739: E/Trace(29922): error opening trace file: No such file or directory (2)
12-11 01:38:32.939: I/webclipboard(29922): clipservice: android.sec.clipboard.ClipboardExManager@42209de8
12-11 01:38:32.964: V/webkit(29922): BrowserFrame constructor: this=Handler (android.webkit.BrowserFrame) {42204f18} 
```

我似乎找不到解决方案；我的问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:57:45.603

试试看：而不是`getApplicationContext()`使用`this`

# javascript - jQuery.wrap HTML 元素与一个不做任何事情的 div

> ID：13811283
> 
> 赞同：-1
> 
> 时间：2012-12-10T23:46:36.130
> 
> 标签：javascript, jquery, css, dom, jquery-wrap

假设有一个具有多种样式等的复杂网站。该网站上也有许多图像可以定位、内联、块或其他。

我想做的是在每张图片上方放一个小叠加图标！

第一次尝试是`position:absolute` `span`在正文末尾为每个图像创建一个图像图标并将其移动到图像上。问题：如果网站上的某些内容移动、隐藏或显示，则图像可能也会移动，但图标叠加层会保留，因此图标将不再位于图像上方。

因此，我想使用`jQuery.wrap`将每个图像包装在一个 div 中，`position:relaitve`然后我将图标叠加层也放在该 div 中并将其放置在 div 内。因此，如果`div`+`image`移动，图标也会移动。

问题是 div 必须以某种方式对上下文、网站结构和 dom 没有影响，这样它才不会破坏网站的布局。我怎样才能创建这样一个“中性”的 div？

我的代码的简化版本：

```
$("img:visible").each(function(i, v){
    var img = $(this);
    var position = img.offset();
    $('<span class="icon" />')
    .css({
        'top': position['top'] + 5,
        left': position['left'] + 5
    })
    .appendTo(document.documentElement)
}
//css
.icon {
    position: absolute;
    display: block;
    z-index: 50000;
    width: 16px;
    height: 16px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:51:48.133

不要使用块级元素，它可能会扰乱您的 HTML 流。而是使用一个`<span>`元素，该元素将环绕图像但不会将其自己的结构添加到页面：

```
$(function () {
    $("img").wrap('<span class="img-overlay" />');
}); 
```

然后，您可以将任何 CSS 添加到`.img-overlay`类中，例如背景图像作为水印。

如果你想用更多的 HTML 包装图像，你可以像这样一次添加它们：

```
$(function () {
    $("img").wrap(
        $('<span class="img-overlay" />').append(
            $('<span class="img-underlay" />')
        )
    );
}); 
```

我建议尝试使用尽可能少的元素，因为它会为您的用户创造更流畅的体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-23T21:52:24.743

在 CSS 中声明以下规则：

```
img {
  display: block;
  object-fit: contain;
  height: auto;
  margin: 0;
}    

.frame {
  position: relative;
  padding: 0;
  margin: 0;
  width: fit-content;
  height: auto;
}

.logo {
  position: absolute;
  right: 0;
  top: 0;
  z-index: 1;
  background: url(https://jsdotgit.com/js-small.gif)no-repeat center;
  background-size: contain;
  width: 2vw;
  height: 4vh;
} 
```

jQuery 应该[**.wrap()**](http://api.jquery.com/wrap/) a `<figure class="frame">`around [**.each()**](http://api.jquery.com/each/) `<img>`并插入一个`<figcaption class="logo">` [**.before()**](http://api.jquery.com/before/) each `<img>`。

```
$(function() {
  $('img').each(function() {
    var frame = `<figure class='frame'></figure>`;
    var logo = `<figcaption class='logo'></figcaption>`;
    $(this).wrap(frame).before(logo);
  });
});
```

```
.gallery {
  display: flex;
  flex-flow: row wrap;
  justify-content: center;
  align-items: center;
  width: fit-content;
}

.column {
  display: flex;
  flex-flow: column wrap;
  justify-content: center;
  align-items: center;
  width: fit-content;
}

img {
  display: block;
  object-fit: contain;
  height: auto;
  margin: 0;
}

.l {
  width: 18vw
}

.m {
  width: 9vw
}

.s {
  width: 6vw
}

.frame {
  position: relative;
  padding: 0;
  margin: 0;
  width: fit-content;
  height: auto;
}

.logo {
  position: absolute;
  right: 0;
  top: 0;
  z-index: 1;
  background: url(https://jsdotgit.com/js-small.gif)no-repeat center;
  background-size: contain;
  width: 2vw;
  height: 4vh;
}
```

```
<main class='gallery'>
  <img src='https://i.imgur.com/ydfYXqh.jpg' class='l'>
  <section class='column'>
    <img src='https://i.imgur.com/DrEwPH0.jpg' class='m'>
    <img src='https://i.imgur.com/MEPxbq4.jpg' class='m'>
  </section>
  <img src='https://i.imgur.com/dp8G9Fr.jpg' class='l'>
  <section class='column'>
    <img src='https://i.imgur.com/ydfYXqh.jpg' class='s'>
    <img src="https://i.imgur.com/AXUJEUS.jpg" class='s'>
    <img src='https://i.imgur.com/dp8G9Fr.jpg' class='s'>
  </section>
  <section class='column'>
    <img src='https://i.imgur.com/MEPxbq4.jpg' class='s'>
    <img src='https://i.imgur.com/DrEwPH0.jpg' class='s'>
    <img src='https://i.imgur.com/MEPxbq4.jpg' class='s'>
  </section>
  <img src='https://i.imgur.com/MEPxbq4.jpg' class='l'>
  <img src='https://i.imgur.com/dp8G9Fr.jpg' class='l'>
  <section class='column'>
    <img src='https://i.imgur.com/MEPxbq4.jpg' class='s'>
    <img src='https://i.imgur.com/DrEwPH0.jpg' class='s'>
    <img src='https://i.imgur.com/AXUJEUS.jpg' class='s'>
  </section>
  <section class='column'>
    <img src='https://i.imgur.com/dp8G9Fr.jpg' class='m'>
    <img src="https://i.imgur.com/AXUJEUS.jpg" class='m'>
  </section>
  <section class='column'>
    <img src='https://i.imgur.com/DrEwPH0.jpg' class='m'>
    <img src='https://i.imgur.com/MEPxbq4.jpg' class='m'>
  </section>
  <img src='https://i.imgur.com/ydfYXqh.jpg' class='l'>
  <img src="https://i.imgur.com/AXUJEUS.jpg" class='l'>
  <img src='https://i.imgur.com/dp8G9Fr.jpg' class='l'>
  <section class='column'>
    <img src='https://i.imgur.com/MEPxbq4.jpg' class='s'>
    <img src='https://i.imgur.com/DrEwPH0.jpg' class='s'>
    <img src='https://i.imgur.com/AXUJEUS.jpg' class='s'>
  </section>
  <section class='column'>
    <img src='https://i.imgur.com/dp8G9Fr.jpg' class='m'>
    <img src="https://i.imgur.com/ydfYXqh.jpg" class='m'>
  </section>
  <img src='https://i.imgur.com/ydfYXqh.jpg' class='l'>
  <section class='column'>
    <img src='https://i.imgur.com/DrEwPH0.jpg' class='m'>
    <img src='https://i.imgur.com/ydfYXqh.jpg' class='m'>
  </section>
  <img src='https://i.imgur.com/DrEwPH0.jpg' class='l'>
  <img src='https://i.imgur.com/MEPxbq4.jpg' class='l'>
  <section class='column'>
    <img src='https://i.imgur.com/DrEwPH0.jpg' class='m'>
    <img src='https://i.imgur.com/MEPxbq4.jpg' class='m'>
  </section>
  <section class='column'>
    <img src='https://i.imgur.com/MEPxbq4.jpg' class='s'>
    <img src='https://i.imgur.com/DrEwPH0.jpg' class='s'>
    <img src='https://i.imgur.com/dp8G9Fr.jpg' class='s'>
  </section>
  <section class='column'>
    <img src='https://i.imgur.com/DrEwPH0.jpg' class='m'>
    <img src='https://i.imgur.com/MEPxbq4.jpg' class='m'>
  </section>
  <section class='column'>
    <img src='https://i.imgur.com/ydfYXqh.jpg' class='s'>
    <img src="https://i.imgur.com/AXUJEUS.jpg" class='s'>
    <img src='https://i.imgur.com/DrEwPH0.jpg' class='s'>
  </section>
</main>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
```

# magento - 为什么布局更新 xml 不会添加我的块？

> ID：13811287
> 
> 赞同：0
> 
> 时间：2012-12-10T23:46:45.343
> 
> 标签：magento, layout

在我的一个类别页面上有一些布局 xml，我无法让最后一行工作

```
<remove name="breadcrumbs" />

<reference name="head">
    <action method="addCss"><script>css/speakers.css</script></action>
</reference>

<block type="page/html" name="catalog.filter" before="product_list" template="catalog/category/filter.phtml" /> 
```

我正在尝试添加`catalog/category/filter.phtml`，但它不起作用。我检查了我的默认值`category.xml`，以确保我引用了正确的名称，`before`但没有运气。

目录.xml：

```
<catalog_category_layered translate="label">
    <label>Catalog Category (Anchor)</label>
    <reference name="left">
        <block type="catalog/layer_view" name="catalog.leftnav" before="-" template="catalog/layer/view.phtml"/>
    </reference>
    <reference name="breadcrumbs.container">
        <block type="catalog/category_view" name="category.title" after="breadcrumbs" template="catalog/category/title.phtml"/>
    </reference>
    <reference name="content">
        <block type="catalog/category_view" name="category.products" template="catalog/category/view.phtml">
            <block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml">
                <!-- <action method="addReviewSummaryTemplate"><type>default</type><template>review/helper/su.phtml</template></action> -->
                <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
                    <block type="page/html_pager" name="product_list_toolbar_pager"/>
                    <!-- The following code shows how to set your own pager increments -->
                    <!--
                        <action method="setDefaultListPerPage"><limit>4</limit></action>
                        <action method="setDefaultGridPerPage"><limit>3</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>2</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>4</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>6</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>8</limit></action>
                        <action method="addPagerLimit" translate="label"><mode>list</mode><limit>all</limit><label>All</label></action>
                        <action method="addPagerLimit"><mode>grid</mode><limit>3</limit></action>
                        <action method="addPagerLimit"><mode>grid</mode><limit>6</limit></action>
                        <action method="addPagerLimit"><mode>grid</mode><limit>9</limit></action>
                        <action method="addPagerLimit" translate="label"><mode>grid</mode><limit>all</limit><label>All</label></action>
                    -->
                </block>
                <action method="addColumnCountLayoutDepend"><layout>empty</layout><count>6</count></action>
                <action method="addColumnCountLayoutDepend"><layout>one_column</layout><count>5</count></action>
                <action method="addColumnCountLayoutDepend"><layout>two_columns_left</layout><count>4</count></action>
                <action method="addColumnCountLayoutDepend"><layout>two_columns_right</layout><count>4</count></action>
                <action method="addColumnCountLayoutDepend"><layout>three_columns</layout><count>3</count></action>
                <action method="setToolbarBlockName"><name>product_list_toolbar</name></action>
            </block>
        </block>
    </reference>
</catalog_category_layered> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:35:23.040

我将假设您的布局块实际上看起来像这样

```
<catalog_category_view>
    <remove name="breadcrumbs" />

    <reference name="head">
        <action method="addCss"><script>css/speakers.css</script></action>
    </reference>

    <block type="page/html" name="catalog.filter" before="product_list" template="catalog/category/filter.phtml" />
</catalog_category_view> 
```

因此，虽然您对块的特定语法

```
<block type="page/html" name="catalog.filter" before="product_list" template="catalog/category/filter.phtml" /> 
```

可能没问题，因为您将它直接放在`catalog_category_view`手柄下方，Magento 不知道将块放在哪里。这意味着它要么忽略它，要么块被实例化但没有插入任何地方。

# javascript - onpageshow 仅在 webkit 中正常工作（仅在屏幕上可见时运行功能）

> ID：13811294
> 
> 赞同：0
> 
> 时间：2012-12-10T23:47:12.910
> 
> 标签：javascript, html, events, webkit, visible

我正在通过对象标签添加一个 html 文件。围绕对象标签的 div 被隐藏（显示：无）。

我遇到的问题是我在 html 对象的 body 标记上放置了一个 onpageshow 事件，但它在浏览器中的功能不同。

*   一旦 html 在对象中加载，Firefox 似乎就会播放该功能

*   Webkit (Safari/Chrome) 仅在我取消隐藏 div 时播放它（这是我想要的）

*   Opera / IE10 根本不玩这个功能。

是否有另一种方法可以使函数仅在屏幕上可见时才运行？

这是一个演示。我正在尝试做的事情。

主窗口的代码。

```
<script type="text/javascript">
    function runthis()
    {
        if ( document.getElementById("wrapper").style.display == "none" )
        {

            document.getElementById("wrapper").style.display = "block"; 
            document.getElementById("hide").innerHTML = 'Div showing';

        }
        else
        {
            document.getElementById("wrapper").style.display = "none";
            document.getElementById("hide").innerHTML = 'Div hidden';
        }           
    }

    function removeObject()
    {
        if( document.getElementById("wrapper").innerHTML == '' )
        {
            document.getElementById("wrapper").innerHTML = '<object id="test_object" name="name" data="frame.html" onshow="callme();"></object>';
            document.getElementById("add").innerHTML = 'Object added';
        }
        else
        {           
            document.getElementById("wrapper").innerHTML = '';
            document.getElementById("add").innerHTML = 'Object removed';
        }
    }
</script>
<body>
    <div id="wrapper" style="display:none"></div>
    <div>
        <button type="button" onclick="runthis();">Show/Hide</button>
        <button type="button" onclick="removeObject();">Add/Remove</button>
        <div id="status"><span>Status: </span><span id="hide">Div hidden</span> | <span id="add">Object removed</span></div>
    </div>
</body> 
```

包含对象的代码

```
<script type="text/javascript">
    function callme()
    {
        alert("running");
    }
</script>
</head>

<body onpageshow="callme();">
</body> 
```

所以基本上警报应该只在 div 显示并且对象已经加载时运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T04:14:22.343

采用不同的路线并使用 postMessage 代替。

# objective-c - Apple Mach-O 链接器错误（链接器命令失败，退出代码为 1）

> ID：13811296
> 
> 赞同：-1
> 
> 时间：2012-12-10T23:47:18.383
> 
> 标签：objective-c, ios

尝试运行我的测试类时，出现以下错误

架构 i386 的未定义符号：“_OBJC_CLASS_$_Client”，引用自：eFit2Tests.o 中的 objc-class-ref ld：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

“_OBJC_CLASS_$_Client”，引用自：eFit2Tests.o 中的 objc-class-ref ld：未找到架构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

这是给出错误的构造函数的方法声明

# 导入“客户端.h”

@implementation 客户端

```
-(id)init
{
    if(self = [super init]) {

    firstName = @"Unknown First Name";
    lastName = @"Unknown Last Name";
    birthday = [NSDate date];

    // create weight array
    weight = [NSMutableArray arrayWithCapacity:1];

    workoutSkeletons = [NSMutableArray arrayWithCapacity:1];
}
return self; 
```

}

这是给出错误的测试用例

```
#import "eFit2Tests.h"
#import "Set.h"
#import "Exercise.h"
#import "Workout.h"
#import "Client.h"
#import "Library.h"

@implementation eFit2Tests

- (void)testClientInit
{
Client* test = [[Client alloc] init];

/**
if([test fullName] != @"Unknown First Name Unknown Last Name") {
    STFail(@"Name not currectly initialized. (init (Client))");
}
if([test weight] != 0) {
    STFail(@"Weight not currectly initialized. (init (Client))");
}
 */ 
```

}

据我所知，我已经以相同的方式实现和测试了我的所有类，但是这是唯一给我一个错误的类。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:14:55.157

When I was checking the compiled sources I was looking at the wrong target. Oops...

# r - 使用 with=TRUE 返回一个向量

> ID：13811301
> 
> 赞同：4
> 
> 时间：2012-12-10T23:47:38.273
> 
> 标签：r, data.table

我有一个 data.table`my.data.table`和一个字符向量`i`（长度为一个）对应于一个 colname `my.data.table`。使用`i`，我想将 的对应列提取`my.data.table`为不属于`data.table`或类的向量`data.frame`。

我该怎么做？

```
> my.data.table <- data.table(a=1:2,b=2:3)
> i <- "a"
> class(my.data.table[,i,with=FALSE])
[1] "data.table" "data.frame"
> as.vector(my.data.table[,i,with=FALSE])  ##does not work
   a
1: 1
2: 2
> is.vector(as.vector(my.data.table[,i,with=FALSE])) ##strange behavior
[1] FALSE
> 
```

`with=FALSE`我认为有一种方法可以使用and `eval(i, <env>)`in来做到这一点，`j`但我无法弄清楚。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T23:56:13.417

其中任何一个都可以在您的示例中使用，但两者中的第二个更普遍有用。

```
my.data.table[[i]]
# [1] 1 2
my.data.table[,..i][[1L]]
# [1] 1 2 
```

`..`in`data.table`表示“查找一级”（在本例中为变量`i`）

# bash - sed grep 两个模式之间的字符串

> ID：13811309
> 
> 赞同：2
> 
> 时间：2012-12-10T23:48:47.970
> 
> 标签：bash, shell, sed, grep

我在文件 script.sh 中有一个表达式列表，例如

```
 1  name1  Pending    flag0
    2  name2  Completed  flag1
    3  name3  Completed  flag- 
```

ETC。，

我想在“1”和“待定”（即name1）之间查找特定状态。

我试过这个命令

```
 var="1"

    cat script.sh |sed -n "s/^${var}\(.*\)Pending.*$/\1/gp" 
```

这不会返回任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:04:42.540

这就是你使用[grep](/questions/tagged/grep "显示标记为“grep”的问题")的方式：`grep -Po '(?<=1).*(?=Pending)' file`

```
$ cat file
    1  name1  Pending    flag0
    2  name2  Completed  flag1
    3  name3  Completed  flag-

$ grep -Po '(?<=1).*(?=Pending)' file
  name1 
```

这里[grep](/questions/tagged/grep "显示标记为“grep”的问题")仅显示 a`1`和 word 之前的匹配项`Pending`。

注意：这是使用[积极的lookahead 和lookbehind](http://www.regular-expressions.info/lookaround.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:52:51.220

```
 sed -n 's/^1\(.*\)Pending.*$/\1/gp' 
```

你一开始有额外的斜线

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T00:34:10.650

[awk](/questions/tagged/awk "显示标记为“awk”的问题")解决方案怎么样？

```
awk '{for (i=1; i<=NF; i++) {if ($i == "Pending") {print $(i-1)}}}' input_file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T15:56:46.740

您的解决方案只需要稍作修改：

```
var="1"

cat script.sh | sed -n "/^${var}.*Pending/{s/^${var}\(.*\)Pending.*$/\1/;p;}" 
```

# c - 使用 scanf 获取字符串，然后对该字符串使用 if 语句，而不是 c 语言中的字符

> ID：13811312
> 
> 赞同：0
> 
> 时间：2012-12-10T23:49:07.540
> 
> 标签：c, string, if-statement, scanf

我知道您可以使用 scanf 并获取要在 if 子句中使用的字符，但是，有没有办法用字符串来做到这一点？

例如

```
printf("enter 'foo' to do 'bar', otherwise enter 'hay' to do 'wire');
scanf("%string", &stringNAME); //this is the part where I have no idea what to do

if (stringNAME == 'foo'){do bar} //here, issues occur with multicharacter character :/
if (stringNAME == 'hay'){do wire} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:52:45.353

你几乎得到它，只是一些调整。

```
char stringNAME[10];
printf("enter 'foo' to do 'bar', otherwise enter 'hay' to do 'wire');
scanf("%9s", stringNAME); 

if (!strcmp(stringNAME,"foo"){do bar}
if (!strcmp(stringNAME,"hay")){do wire} 
```

请注意 scanf 中的数字，即 9。它应该比输入字符串的大小小一（或更小）。否则，您将面临缓冲区溢出的风险，这是一件令人讨厌的事情。`fgets`是更好的选择，因为您被迫限制字符数。这就是你将如何做到的（只需更换`scanf`行）

```
fgets(stringNAME, 10, stdin) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:53:34.307

您可以使用带有 %s 说明符的 scanf 来读取字符串，但请确保您正在读取字符串（例如：char 数组、动态分配的 char* 等...）。我看不到您的其余代码，但是从您提供的代码段来看，我有点怀疑 &stringName 是什么。

下面是一个使用 scanf 的例子：

```
char s[100];
scanf("%s", s); 
```

现在，话虽如此，请注意使用 scanf 读取字符串。例如，上面的示例仅在您输入多字字符串时才返回第一个字。

如果你知道你需要 scanf 很好；否则，如有疑问，请使用 fgets。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T23:53:42.390

字符串是 char 的向量，比较 (str1 == str2) 将返回如果它们在相同的内存地址。

```
if(strcmp(stringName, "foo") == 0){
//stringName is Foo
} 
```

这会起作用

# android - Android Listview 项目点击。如何在子活动上实现后退按钮

> ID：13811321
> 
> 赞同：0
> 
> 时间：2012-12-10T23:50:12.723
> 
> 标签：android, listview

感谢有人可以提供帮助。我有一个包含大约 6 个项目的列表视图（“A”）。当我单击任何项​​目时，它会打开另一个活动（“B”）并显示项目详细信息。我需要以某种方式允许用户从“B”返回到“A”什么是实现这一点的最简单方法？是否有一个控件可以自动为我执行此操作。我知道在 IOS 开发中，导航控制器将所有这些连接起来，而程序员无需编写后退按钮代码。

我对android开发很陌生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:51:45.730

Android 手机上的硬件后退按钮会自动为您执行此操作。处理返回的另一种方法是使用`ActionBar`. 您可以使用 启用此功能[`ActionBar#setDisplayHomeAsUpEnabled`](https://developer.android.com/reference/android/app/ActionBar.html#setDisplayHomeAsUpEnabled(boolean))。

[![](../Images/771e89b32e5b8139d73da26015c3d619.png)](https://i.stack.imgur.com/8Pgub.png)
[（来源：[wptrafficanalyzer.in](http://wptrafficanalyzer.in/blog/wp-content/uploads/2012/07/actionbar_upnav.png)）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:53:35.307

如果你已经创建了新的 Activity，`startActivity`你只需要调用`finish`. 如果您通过调用生成了新的 Activity，`startActivityForResults`那么您需要调用`setResult`然后完成，以便将数据传回给`onActivityResult`先前 Activity 的方法。

# asp.net-mvc-3 - 在 Specflow 测试期间如何切换数据库？

> ID：13811327
> 
> 赞同：3
> 
> 时间：2012-12-10T23:50:49.473
> 
> 标签：asp.net-mvc-3, fluent-nhibernate, specflow

我们在 xunit 中有一个 MVC 3、.Net 4.0 应用程序和许多 specflow 测试，这些测试似乎运行没有问题。为了完全控制我们的测试数据，我们希望在每个场景开始时设置一个干净的数据库，然后将其处理掉。为此，我们需要在每个场景之前动态更改连接字符串。使用 NHibernate 会话处理与数据库的连接，我们使用以下代码更改连接字符串：

```
public class SessionFactoryProvider
{
    private static ISessionFactory _sessionFactory;
    public static ISessionFactory BuildSessionFactory(bool resetConnection = false)
    {
        if (ConnectionString == null)
        {
            ConnectionString = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
        }

        if (_sessionFactory == null || resetConnection)
        {
            _sessionFactory = Fluently.Configure()
                               .Mappings(x => x.FluentMappings.AddFromAssemblyOf<InvoiceMap>().Conventions.AddFromAssemblyOf<CascadeConvention>())
                               .Database(MsSqlConfiguration.MsSql2008.ConnectionString(ConnectionString))
                               .ExposeConfiguration(UpdateSchema)
                               .CurrentSessionContext("web")
                               .BuildSessionFactory();
        }
        return _sessionFactory;
    }
}
[BeforeScenario]
public static void Setup_Database()
    {
        var connection = DBHandler.GetAcceptanceDatabaseConnection();
        SessionFactoryProvider.ConnectionString = connection.ConnectionString;
        var session = SessionFactoryProvider.BuildSessionFactory(true).OpenSession();

    } 
```

但看起来 Specflow 测试和实际应用程序作为两个不同的进程运行，尽管它们被定义为静态，但它们并不共享相同的 _sessionFactory。因此，更改 Setup_Database 函数中的连接字符串会更改 specflow 测试进程的会话，而不是应用程序进程正在使用的连接字符串。

1.  有没有更好的验收测试数据填充方法？
2.  我们切换连接字符串的方法有意义吗？
3.  Specflow 测试是否可以操纵应用程序本身的会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:00:34.820

在测试运行时不得不摆弄连接字符串似乎有点奇怪。

您可以考虑的另一种模式是对所有测试使用相同的数据库，但在每次测试后使用 [TransactionScope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)进行清理。为此，您可以为每个测试打开一个新事务，然后在测试运行后处理该事务。（您可以将其移至基类以避免重复逻辑。）这将确保每个测试都有一个干净的数据库。

恐怕我没有将它与 NHibernate 一起使用，但您可以查看我对[这个问题](https://stackoverflow.com/questions/13857180/how-should-i-set-up-my-integration-tests-to-use-a-test-database-with-entity-fram)的回答，以查看 EntityFramework 和 MSTest 的示例。[Ayende Rahien 的这篇简短博客文章](http://ayende.com/blog/1419/nhibernate-and-system-transactions-a-success)可能有助于了解 NHibernate 和 TransactionScope 如何协同工作。

# linux - 如何让两台服务器使用子域 url 相互通信？

> ID：13811332
> 
> 赞同：0
> 
> 时间：2012-12-10T23:50:57.773
> 
> 标签：linux, apache, dns

我有两台 Ubuntu 12:04 EC2 服务器在做他们的事情。它们以“live.fooville.com”和“dev.fooville.com”的形式访问（我编造了它们，但它们是可比较的名称）。

我可以很好地访问它们，并且它们的服务按预期执行。但是，我无法让一个人使用正常的 url 与另一个人交谈：

从我的家用电脑：

```
~ $ wget --no-check-certificate https://live.fooville.com
--2012-12-10 18:33:54--  https://live.fooville.com/
Resolving live.fooville.com... xx.xxx.xx.92
Connecting to live.fooville.com|xx.xxx.xx.92|:443... connected. 
```

来自 dev.fooville.com：

```
dev.fooville.com ~ $ wget https://live.fooville.com/
--2012-12-10 08:31:32--  https://live.fooville.com/
Resolving orb.evanidus.com... 127.0.1.1
Connecting to orb.evanidus.com|127.0.1.1|:443... failed: Connection refused. 
```

在 dev.fooville.com 上使用 wget 到我不在同一域中的其他服务器可以正常工作，例如：

```
dev.fooville.com ~ $ wget --no-check-certificate https://www.paulwhippconsulting.com
--2012-12-10 08:38:26--  https://www.paulwhippconsulting.com/
Resolving www.paulwhippconsulting.com... 111.118.174.73
Connecting to www.paulwhippconsulting.com|111.118.174.73|:443... connected. 
```

我可以通过使用 IP 地址而不是域名来解决该问题，因此 dev.fooville.com 似乎认为 live.fooville.com 是本地的，并且不进行 dns 查找以找到正确的地址。

也许我完全错了......很高兴知道发生了什么，以便我可以更正它并在命令行中使用服务器的正常域名。我试过谷歌，找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:11:23.033

就像 Celada 评论的那样，检查 /etc/hosts。基本上，您需要从 dev.fooville.com 到 live.fooville.com 进行 nslookup，如果您收到 127.0.1.1 响应，这仅意味着您的 dns 服务或 /etc/hosts 认为 live.fooville.com 指向 127.0.1.1 ，因此您可能需要在 dns 服务上输入正确的条目，如果您仅使用 /etc/hosts 尝试放在那里，以测试重新启动 dns 客户端服务（我正在使用 dnsmasq）并尝试 curl/wget 它。

# python - 将python中的numpy.ndarray保存为图像

> ID：13811334
> 
> 赞同：8
> 
> 时间：2012-12-10T23:51:10.410
> 
> 标签：python

```
b=ndimage.gaussian_filter(imagefile,5) 
```

作为python新手，无法弄清楚这一点。
如何保存`b`为图像，`b`类型为“numpy.ndarray”？

试过这些，
1。

```
im = Image.fromarray(b)   
im.save("newfile.jpeg") 
```

`Error: TypeError("Cannot handle this data type")`

2.

```
imsave('newfile.jpg', b) 
```

`Error: ValueError: 'arr' does not have a suitable array shape for any mode.`

将图像保存到图像中的正确方法是`ndarray`什么？

编辑：

解决了：

```
im = Image.fromarray(b) 
```

`im.save('newfile.jpeg')`工作，我加载图像的方式是错误的，

```
file = Image.open("abc.jpg")      
imagefile = file.load() 
```

// 我在加载后使用图像文件，它没有给出正确的形状来重建图像。

// 相反如果我使用文件（即直接打开后，我可以通过上述方法保存）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T23:52:40.240

我认为最好的方法是使用`matplotlib` `imshow`.

使用`image`图书馆：

```
import Image
import numpy as np

x = np.array([[1, 2, 3], [4, 5, 6]], np.int32)

im = Image.fromarray(x)
im.save('test.png') 
```

Matplotlib 版本：

```
import numpy as np
import matplotlib.pyplot as plt

x = np.array([[1, 2, 3], [4, 5, 6]], np.int32)
plt.imshow(x) 
plt.savefig("array") 
```

![ndarray 的输出](../Images/f2f4bbd2bb125c01f63bed2f28e3f80a.png) 希望这可以帮助！

# excel - Excel宏：循环浏览行，同时循环浏览工作表

> ID：13811339
> 
> 赞同：2
> 
> 时间：2012-12-10T23:51:45.107
> 
> 标签：excel, ado, vba

我有一个包含几百个工作表的工作簿，每个工作表都以相同的方式布局（即拥有相同的列），尽管数据行数不同。

我想循环浏览每张工作表中的每一行，如果某一列（列“L”）中的值是一个特定值（在这种情况下是一个字符串），我想将该行复制到一个新的工作表。所以最后我有一个大工作表，其中每一行都存在于较大的工作簿中，在“L”列中具有特定的指定值。

我不想也循环浏览我将结果复制到的工作表；也许我需要从不同的工作簿中执行此操作？

提前致谢。

回复：

所以文件和代码在我的办公室，但是：如果这是在 1 个工作表中，我知道有几种方法可以遍历行并返回部分或全部相应字段。我遇到的麻烦是（a）对其进行设置，使其在不同行数的不同工作表中循环，（b）将其返回到新的工作表，而无需重写已经编写的内容。如果有人有使用 ADO 的解决方案，那也将受到欢迎，因为它作为一个整体是一个非常大的工作表。再次感谢，如果我提出大而未指定的问题，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:48:57.033

由于您的问题是基于*文本*询问没有代码的意见，所以我给您我的意见并通过这个答案找到 - 很公平:)

根据我的评论，

因此，如果您想从另一本书中进行搜索，考虑到此**[BUG：内存泄漏发生在您使用 ActiveX 数据对象 (ADO) 查询打开的 Excel 工作表时会发生](http://support.microsoft.com/default.aspx?scid=kb;en-us;q319998)**`data book`更好的主意

通过这种方式，您将自己`data book`视为数据库并从 Excel 表中查询。即使这样做，您也可能希望确保您考虑作为数据集的每个可搜索工作表都具有相似的结构。如果您向我们提供了示例数据，那么这比我们在黑暗中不断向目标投掷石头要好得多... ;) 您提到了搜索行。您是否在每张纸上搜索一列的行？如果是这样，您的所有可搜索工作表都包含此列吗？

因此，对于您要搜索/扫描的行，这是 Microsoft 必须说的，非常需要注意：

“要扫描的行数：**Excel 不会像关系数据库那样为 ADO 提供有关其包含的数据的详细架构信息**。**因此，驱动程序必须扫描至少几行现有数据，以便做出有根据的猜测每列的数据类型。** “要扫描的行”的默认值为八 (8) 行。您可以指定从一 (1) 到十六 (16) 行的整数值，也可以指定零 (0) 进行扫描所有现有行。这是通过将可选的 MaxScanRows= 设置添加到连接字符串，或通过更改 DSN 配置对话框中的 Rows to Scan 设置来完成的。

但是，**由于 ODBC 驱动程序中的错误**，指定要扫描的行 (MaxScanRows) 设置目前无效。换句话说，Excel ODBC 驱动程序（MDAC 2.1 和更高版本）总是扫描指定数据源中的前 8 行以确定每一列的数据类型。"

此外，如果您的可搜索行具有混合数据类型--> 这会使您处于极大的危险之中。微软也谈到了这方面。

*   参考文章：**[如何在EXCEL中使用ADO](http://support.microsoft.com/kb/257819)**

因此，您可以在上述过程中采取许多预防措施，但它比 a`VBA Binary Search`和 a更快`.Find`。但是，如果您不想采取`ADO`措施，那么您可以为我们提供一些您可能想出的设计。很高兴能在这方面继续前进。:)

# iphone - 未启用 iCloud 时如何存储核心数据日志？

> ID：13811340
> 
> 赞同：0
> 
> 时间：2012-12-10T23:51:45.733
> 
> 标签：iphone, objective-c, ios, core-data, icloud

我希望用户能够在禁用 iCloud 时继续正常使用核心数据存储。我遇到的唯一问题是他们可能有很多数据在启用时会生成日志，然后如果他们再次启用它，我要么不添加他们从那时起制作的所有数据要么添加所有数据，从而复制现有数据。为避免此问题，我想在禁用 iCloud 时继续记录日志，以便在再次启用时上传这些更改。

这是连接到 iCloud 时我必须执行的代码：

```
NSURL *iCloud = [fileManager URLForUbiquityContainerIdentifier:nil];

NSURL *iCloudLogsPath = [NSURL fileURLWithPath:[[iCloud path] stringByAppendingPathComponent:iCloudLogsDirectoryName]];

NSMutableDictionary *options = [NSMutableDictionary dictionary];
        [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
        [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];
        [options setObject:iCloudEnabledAppID            forKey:NSPersistentStoreUbiquitousContentNameKey];
        [options setObject:iCloudLogsPath                forKey:NSPersistentStoreUbiquitousContentURLKey];

[psc addPersistentStoreWithType:NSSQLiteStoreType
                          configuration:nil
                                    URL:store
                                options:options
                                  error:nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:25:59.863

不幸的是，这不是一个选择。启用 iCloud*并*使用`NSPersistentStoreUbiquitousContentNameKey`时，会自动创建 Core Data 事务日志。在其他所有情况下，都不会创建任何事务日志。如果未启用 iCloud，您的代码无法强制创建日志。当尝试将 iCloud 与 Core Data 一起使用时，这种情况只是许多意想不到的复杂情况之一。

一种可能的方法：当您发现 iCloud 已启用时，将您的整个数据存储迁移到 iCloud，而不必担心是否已经存在任何内容。然后，使用重复检测方法清除重复条目。Apple 在其示例项目中提供了一个很好的重复检测代码`SharedCoreData`示例，涵盖在 WWDC 2012 会议 227，**使用 iCloud 和核心数据**。

另一种方法是在禁用 iCloud 时维护您自己的更改日志。用于`NSManagedObjectContextDidSaveNotification`监视更改，并保留您自己的在禁用 iCloud 时更改的对象列表。如果 iCloud 重新启用，您可以重新保存这些对象以为其生成 iCloud 事务。

但是，对于其中任何一个，都需要考虑一些相关的并发症：

1.  如果用户在您的应用程序运行时禁用 iCloud，您将无法继续使用现有的持久存储协调器，甚至无法继续使用现有的数据存储。如果这样做，您的应用程序将尝试写入事务日志，但由于没有地方放置它们而失败，然后崩溃。您需要迁移到新的非 iCloud 数据存储。您可能可以使用`migratePersistentStore:toURL:options:withType:error:`一步完成此操作，但您*必须*这样做。（顺便说一句，*可能*只是弄乱了数据存储的元数据，但这没有记录，我不知道要清除哪些键）。

2.  与上述相关，如果用户重新启用 iCloud，您需要迁移回启用 iCloud 的数据存储。

3.  如果在您的应用程序启动时未启用 iCloud，您应该只`nil`在设置持久存储协调器时使用选项。检查返回的值，`URLForUbiquityContainerIdentifier:`并相应地使用或不使用 iCloud。

4.  以我的经验——带有 iCloud 的核心数据是**不稳定**的。除其他事项外，**一定**要检查返回值，`addPersistentStoreWithType:etc`因为它可能会因为没有明显的原因而失败（即你做的一切都是正确的，但 iCloud 只是不正常）。

祝你好运，你会需要它。请记住，截至今天，即使是 Apple 也没有在他们自己的任何应用程序中使用 iCloud 和 Core Data。

# android - 按钮外观取决于其状态

> ID：13811343
> 
> 赞同：-2
> 
> 时间：2012-12-10T23:52:00.843
> 
> 标签：android, android-layout

我有个问题。我不知道如何根据其状态更改按钮的外观。 

xml 中的标准外观不起作用，默认值也不起作用。

```
{
    button1 = (Button) findViewById(R.id.button5);

    button1.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

                switch (event.getAction()) 
                {
                    case MotionEvent.ACTION_DOWN:
                        mp[0] = loadSample(1);
                        mp[0].start(); 
                        break;
                    case MotionEvent.ACTION_UP:
                        mp[0].stop(); 
                        //mp.reset();
                        mp[0].release(); 
                        break;  
                }
        return true;
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:13:02.737

听起来您正在寻找`ImageButton`带有图像选择器的选择器。这允许您为给定按钮定义`pressed`、`focused`和`normal`状态。

示例直接来自`ImageButton`API 页面。一旦实现如下，Android 将根据您定义的选择器自动选择适合按钮当前状态的图像。 [http://developer.android.com/reference/android/widget/ImageButton.html](http://developer.android.com/reference/android/widget/ImageButton.html)

`drawable`作为文件夹中的 XML ：

```
 <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
         <item android:state_pressed="true" android:drawable="@drawable/button_pressed" /> <!-- pressed -->
         <item android:state_focused="true" android:drawable="@drawable/button_focused" /> <!-- focused -->
         <item android:drawable="@drawable/button_normal" /> <!-- default -->
    </selector> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:13:31.660

你在 XML 中做过类似的事情吗？

```
<selector
  xmlns:android="http://schemas.android.com/apk/res/android">

   <item android:drawable="@drawable/myButtonYellow" 
        android:state_pressed="true" />
   <item android:drawable="@drawable/myButtonNotYellow" />
</selector> 
```

android:state_pressed="true" 行将对其进行设置，使其根据其按下状态而变化。可以找到完整的状态列表[此处找到完整的州列表](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html)

myButton 定义为：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <corners android:radius="4dp" />

    <solid android:color="@color/yellow" />

    <padding
        android:bottom="7dp"
        android:left="12dp"
        android:right="12dp"
        android:top="7dp" />

    <stroke
        android:width="1dp"
        android:color="@color/white" />

</shape> 
```

# html - IE 阻止 html 表单字段

> ID：13811345
> 
> 赞同：1
> 
> 时间：2012-12-10T23:52:07.220
> 
> 标签：html, forms, internet-explorer, focus

在[http://megsmoxie.com/2012/12/enter-to-win-a-fijit-friend-willa/](http://megsmoxie.com/2012/12/enter-to-win-a-fijit-friend-willa/)（或任何单个帖子）上，搜索、订阅和评论表单在 Ineternet Explorer 中不起作用。

您可以单击它们并查看光标一秒钟，然后它似乎失去了焦点，所以我认为这不是重叠的 div 问题。如果你一点击就按下一个键，你可以输入一个字母，但它会失去焦点。它在 chrome 和 ff 中运行良好。

奇怪的是，问题不会出现在[http://megsmoxie.com/contact/](http://megsmoxie.com/contact/)或主页上（侧边栏表格和联系表格都可以正常工作），问题仅出现在单个帖子上。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:27:25.653

我浏览了这个页面，发现了很多事情。这很可能是由于 onfocus 事件在整个地方被触发的一些争论。IE 尤其不擅长处理 onfocus 事件。

此外，似乎还有一些第三方脚本和控件正在触发。很可能其中之一只是从 IE 中的文本框中窃取焦点。

除此之外，我无法告诉你更多。如果您是该站点的开发人员，您将需要进行一些更深入的调试。尝试消除一些正在发生的事情并将其一一添加，直到它再次中断或调试一些javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:43:26.233

您会注意到，如果单击并按住鼠标，则可以在字段中输入而不会中断。只有当您松开鼠标按钮时，焦点才会被盗，您不能再打字。通过这种行为观察，我使用 Chrome 来查看正在处理的事件：

![在此处输入图像描述](../Images/e1a8c939d987872d11245d1e31769c3d.png)

我发现该事件`document`有一个处理程序`mouseup`，并且此代码来自`icx-ez-excerpt.js`. 通过您的文档追溯这一点，您可以在下面找到相关参考资料（删除这些，果然解决了问题）：

```
<script type="text/javascript">
    var icx_publication_id = 10591;
    var icx_copyright_notice = 'Copyright 2012 Meg&#039;s Moxie';
    var icx_content_id = '30168';
</script>
<script type="text/javascript"
        src="http://license.icopyright.net/rights/js/copyright-notice.js">
</script> 
```

删除它，代码在 IE 中按预期工作。我将进一步挖掘以找出在*他们的代码*中破坏用户体验的内容。

# c# - mvc c#内联编辑中的dev express网格不扩展

> ID：13811348
> 
> 赞同：0
> 
> 时间：2012-12-10T23:52:25.513
> 
> 标签：c#, asp.net-mvc, devexpress

我正在尝试使用 dev express 网格进行内联编辑。我已按照 [http://mvc.devexpress.com/GridView/InlineEditingWithTemplate](http://mvc.devexpress.com/GridView/InlineEditingWithTemplate)中所述的示例进行操作， 并通过查看[http://www.youtube.com/watch?v=dKCFLyvf32Y](http://www.youtube.com/watch?v=dKCFLyvf32Y)此链接进行了确认。我的控制器的代码如下：

```
[ValidateInput(false)]
        public ActionResult InlineEditingWithTemplatePartial()
        {
            int siteID = (int)Session["siteID"];
            return PartialView("InlineEditingWithTemplatePartial", employeeRepo.GetAllEmployeesForSite(siteID));
        }

        [HttpPost, ValidateInput(false)]
        public ActionResult InlineEditingWithTemplateAddNewPartial([ModelBinder(typeof(DevExpressEditorsBinder))] Employee employee)
        {
            int siteID = 0;
            if (ModelState.IsValid)
            {
                try
                {
                    siteID = (int)Session["siteID"];
                    //employee.InsertProduct(employee);
                }
                catch (Exception e)
                {
                    ViewData["EditError"] = e.Message;
                }
            }
            else
            {
                ViewData["EditError"] = "Please, correct all errors.";
                ViewData["EmployeeDetail"] = employee;
            }
            return PartialView("InlineEditingWithTemplatePartial", employeeRepo.GetAllEmployeesForSite(siteID));
        }

        [HttpPost, ValidateInput(false)]
        public ActionResult InlineEditingWithTemplateUpdatePartial([ModelBinder(typeof(DevExpressEditorsBinder))] Employee employee)
        {
            int siteID = 0;
            if (ModelState.IsValid)
            {
                try
                {
                    siteID = (int)Session["siteID"];
                    employeeRepo.SaveEmployee(employee);
                }
                catch (Exception e)
                {
                    ViewData["EditError"] = e.Message;
                }
            }
            else
            {
                ViewData["EditError"] = "Please, correct all errors.";
                ViewData["EnployeeDetail"] = employee;
            }

            return PartialView("InlineEditingWithTemplatePartial", employeeRepo.GetAllEmployeesForSite(siteID));
        }

        [HttpPost, ValidateInput(false)]
        public ActionResult InlineEditingWithTemplateDeletePartial(Employee employee)
        {
            int siteID = 0;
            if (employee!=null)
            {
                try
                {
                    siteID = (int)Session["siteID"];
                    employeeRepo.DeleteEmployee(employee);
                }
                catch (Exception e)
                {
                    ViewData["EditError"] = e.Message;
                }
            }
            return PartialView("InlineEditingWithTemplatePartial", employeeRepo.GetAllEmployeesForSite(siteID));
        } 
```

视图的代码是：

```
@using MyProject6.Data.Models;
@using System.Web.UI.WebControls;
@using DevExpress.Web.Mvc.UI;
@using DevExpress.Web.ASPxEditors;
@using DevExpress.Web.Mvc;
@using DevExpress.Web.ASPxGridView;

@{
    var grid = Html.DevExpress().GridView(
        settings =>
        {
            settings.Name = "gvEmployeeEditing"; 
            settings.KeyFieldName = "EmployeeID";

            settings.CallbackRouteValues = new { Controller = "Home", Action = "InlineEditingWithTemplatePartial" };
            settings.ClientSideEvents.BeginCallback = "function(s,e){e.customArgs['id'] = '" + ViewContext.RouteData.Values["EmployeeID"] + "'}";

            settings.SettingsEditing.AddNewRowRouteValues = new { Controller = "Home", Action = "" };    //InlineEditingUpdatePartial
            settings.SettingsEditing.UpdateRowRouteValues = new { Controller = "Home", Action = "InlineEditingWithTemplateUpdatePartial"};
            settings.SettingsEditing.DeleteRowRouteValues = new { Controller = "Home", Action = "" };    //InlineEditingUpdatePartial

            settings.SettingsEditing.Mode = GridViewEditingMode.EditFormAndDisplayRow;
            settings.SettingsBehavior.ConfirmDelete = true;

            settings.CommandColumn.Visible = true;
            settings.CommandColumn.NewButton.Visible = true;
            settings.CommandColumn.DeleteButton.Visible = true;
            settings.CommandColumn.EditButton.Visible = true;

            settings.Columns.Add("EmployeeID");
            settings.Columns.Add("EmployeeCode");
            settings.Columns.Add("FirstName");
            settings.Columns.Add("LastName").PropertiesEdit.DisplayFormatString = "c";
            settings.Columns.Add("DefaultRoleTitle");

            settings.SetEditFormTemplateContent(c => {
                var employee = ViewData["EditableEmployeeDetail"] != null ? ViewData["EditableEmployeeDetail"] : c.DataItem;
                ViewContext.Writer.Write(
                    "<div class=\"edit_form\">" +
                    "<div class=\"line\">"
                );
                    Html.DevExpress().Label(
                        edtSettings => {
                            edtSettings.ControlStyle.CssClass = "label";
                            edtSettings.Text = "Employee Code";
                            edtSettings.AssociatedControlName = "EmployeeCode";
                        }
                    )
                    .Render();
                    Html.DevExpress().TextBox(
                        edtSettings => {
                            edtSettings.Name = "EmployeeCode";
                            edtSettings.ControlStyle.CssClass = "editor";
                            edtSettings.ShowModelErrors = true;
                        }
                    )
                    .Bind(DataBinder.Eval(employee, "EmployeeCode"))
                    .Render();

                ViewContext.Writer.Write(
                    "</div>" +
                    "<div class=\"line\">"
                );
                    Html.DevExpress().Label(
                        edtSettings => {
                            edtSettings.ControlStyle.CssClass = "label";
                            edtSettings.Text = "First Name:";
                            edtSettings.AssociatedControlName = "FirstName";
                        }
                    )
                    .Render();

                    Html.DevExpress().TextBox(
                    edtSettings =>
                    {
                        edtSettings.Name = "FirstName";
                        edtSettings.ControlStyle.CssClass = "editor";
                        edtSettings.Text = "First Name";
                        edtSettings.ShowModelErrors = true;
                    }
                    ).Bind(DataBinder.Eval(employee, "FirstName"))
                    .Render();

                ViewContext.Writer.Write(
                    "</div>" +
                    "<div class=\"line\">"
                );
                    Html.DevExpress().Label(
                        edtSettings => {
                            edtSettings.ControlStyle.CssClass = "label";
                            edtSettings.Text = "Last Name:";
                            edtSettings.AssociatedControlName = "LastName";
                        }
                    )
                    .Render();
                    Html.DevExpress().TextBox(
                        edtSettings => {
                            edtSettings.Name = "LastName";
                            edtSettings.ControlStyle.CssClass = "editor";
                            edtSettings.ShowModelErrors = true;
                        }
                    )
                    .Bind(DataBinder.Eval(employee, "LastName"))
                    .Render();
                ViewContext.Writer.Write(
                    "</div>" +
                    "<div class=\"line\">"
                );
                Html.DevExpress().Label(
                    edtSettings =>
                    {
                        edtSettings.ControlStyle.CssClass = "label";
                    }
                )
                .Render();
                Html.DevExpress().Button(
                    btnSettings =>
                    {
                        btnSettings.Name = "btnUpdate";
                        btnSettings.ControlStyle.CssClass = "button";
                        btnSettings.Text = "Update";
                        btnSettings.ClientSideEvents.Click = "function(s, e){ gvEmployeeEditing.UpdateEdit(); }";
                    }
                )
                .Render();
                Html.DevExpress().Button(
                    btnSettings =>
                    {
                        btnSettings.Name = "btnCancel";
                        btnSettings.ControlStyle.CssClass = "button";
                        btnSettings.Text = "Cancel";
                        btnSettings.ClientSideEvents.Click = "function(s, e){ gvEmployeeEditing.CancelEdit(); }";
                    }
                )
                .Render();
                ViewContext.Writer.Write(
                    "</div></div>"
                );
            });

            settings.PreRender = (sender, e) =>
            {
                MVCxGridView gridView = (MVCxGridView)sender;
            };

        });

    if(ViewData["EditError"] != null){
        grid.SetEditErrorText((string)ViewData["EditError"]);
    }
}

@grid.Bind(Model).GetHtml() 
```

这个视图是我从 Home Controller 的索引视图中调用的部分视图。我试图调试它，只是没有输入内联编辑的代码。看起来它没有回调任何东西。我不确定我在这里缺少什么，我在过去两天一直在寻找解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:11:44.230

我相信您可以使用[E3998](http://www.devexpress.com/example=E3998)示例中的解决方案。

如果您在执行过程中遇到任何问题，可以直接联系 DX 人员。

# c++ - 霍夫曼以位存储代码

> ID：13811352
> 
> 赞同：1
> 
> 时间：2012-12-10T23:52:41.923
> 
> 标签：c++

我已经建立了霍夫曼树。但我不知道将代码存储为位，因为我不知道如何

处理可变长度。

我想创建一个表，以位存储霍夫曼代码以打印编码结果。

我不能使用像 bitset 这样的 STL 容器。

我有这样的尝试

```
 void traverse( string code = "")const
   {
        if( frequency == 0 ) return;
        if ( left ) {
             left->traverse( code + '0' );
             right->traverse( code + '1' );
        }
        else {//leaf node
             huffmanTable[ch] = code;
        }
   } 
```

你能给我一些算法来处理它吗？

**我想存储“0”使用 1 位，“1”使用 1 位。**

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:02:41.500

您将需要一个缓冲区、一个用于跟踪缓冲区大小（以字节为单位）的变量，以及一个用于跟踪缓冲区中有效位数的变量。

存储一点：

1.  检查添加位是否会增加存储的字节数。如果不是，请跳至步骤 4。

2.  缓冲区中是否有空间存储额外的字节？如果是，请跳至步骤 4。

3.  重新分配一个大几个字节的存储缓冲区。复制现有数据。增加保存缓冲区大小的变量。

4.  计算将存储下一位的字节位置和位位置。根据需要设置或清除该位。

5.  增加保存存储位数的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T00:03:20.160

您可以使用固定大小的结构来存储表，而只使用位来存储编码输入：

```
struct TableEntry {
  uint8_t size;
  uint8_t code;
};

TableEntry huffmanTable[256];

void traverse(uint8_t size; uint8_t code) const {
        if( frequency == 0 ) return;
        if ( left ) {
             left->traverse(size+1, code << 1 );
             right->traverse(size+1, (code << 1) | 1 );
        }
        else {//leaf node
             huffmanTable[ch].code = code;
             huffmanTable[ch].size = size;
        }
} 
```

对于编码，您可以使用[David](https://stackoverflow.com/a/13811470/390913)发布的算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T00:12:02.147

基本上我会根据树的最大密钥长度/深度在这里使用两种不同方法之一：

*   如果您有一个固定长度并且它比您可用的整数数据类型（如`long int`）短，您可以使用 perreal 显示的方法。

*   If you don't know the maximum depth and think you might be running out of space, I'd use `std::vector<bool>` as the code value. This is a special implementation of the vector using a single bit per value (essentially David's approach).

# java - 代码不抛出异常

> ID：13811359
> 
> 赞同：0
> 
> 时间：2012-12-10T23:52:59.513
> 
> 标签：java, illegalaccessexception

我正在尝试执行下面的书面代码，代码应该抛出异常，但它不是这样做的

```
try {
    Field.class.getMethod("getInt", Object.class).setAccessible(false);
    StringSearch.class.getMethod("searchChars",cc.getClass(),pattern3.getClass()).setAccessible(false);
    ss4.getClass().getMethod("searchChars",cc.getClass(),pattern3.getClass()).setAccessible(false);
    ss4.searchChars(cc,pattern3);
    ss4.searchString(str,pattern);
}
catch(NoSuchMethodException ex){
    ex.printStackTrace();
} 
```

它实际上应该抛出 IllegalAccessException。

ss4 是 BNDMWildcardsCI 类的对象（字符串搜索算法之一） cc，pattern3 是字符数组 str，pattern 是字符串

为什么它没有抛出异常，它没有抛出 NoSuchMethodFound 异常意味着它能够找到该方法我也尝试打印 isAccessible 并且它说 false 但是当我运行测试时它不会抛出任何异常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:06:04.170

据我所知，如果一个方法被声明为公共（或以其他方式可访问），`setAccessible(false)`则不能将其设为私有。仅当您有私有方法并且之前调用过`setAccessible(true)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:28:34.043

该方法`setAccessible(boolean)`作用于对象而不反映在正常对象上。在您的代码中，您将其设置在方法对象上而不是`ss4`对象上。

为了表明我的观点：

```
Class<?> clazz = ss4.getClass();
Method searchCharsMethod = clazz.getMethod("searchChars",cc.getClass(),pattern3.getClass());
       searchCharsMethod.setAccessible(true); 
```

您已将对象的可访问标志设置为 false 分配给`searchCharsMethod`not `ss4`。

作为奖励，看看你打电话时会发生什么

`searchCharsMethod.invoke(ss4,cc,pattern3);`

有关更多信息，请阅读[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible%28boolean%29)

# asp.net-mvc-3 - 在 Html.Partial 中调用常规视图？

> ID：13811377
> 
> 赞同：0
> 
> 时间：2012-12-10T23:54:07.913
> 
> 标签：asp.net-mvc-3, partial-views

我有一个我想在另一个页面中使用的常规视图，如果单击展开按钮，它会神奇地出现在类似 jQuery 的手风琴中。如果我使用以下方法调用它：

`Html.Partial(A_non_partial_view, new view_model_used_by_the_non_partial_view())`

...这有机会工作吗，还是 MVC 不是那样的？（如果有帮助，我正在使用 MVC 3。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:27:05.650

您可以，但前提是它位于同一控制器视图文件夹或共享视图文件夹中。否则，您将不得不完全指定实际上并非如此的路径。

如果您使用 Html.Action 或 Html.RenderAction，则该操作将需要返回 PartialView 否则它将再次推出带有头部标签等的完整 html 页面

# java - 是否有用于 XML 和 JSON 读取器/写入器的良好“标准”Java 接口？

> ID：13811378
> 
> 赞同：2
> 
> 时间：2012-12-10T23:54:13.870
> 
> 标签：java, xml, json, interface

基本上，我想要一个接口来将对象转换为/从它们的 XML 或 JSON 字符串表示，比如

```
public interface IStringifier{

/**
   Converts the Object to it's String representation, e.g. XML or JSON
*/
   public String toString(Object o);

/**
   Converts from the String representation (e.g. XML or JSON) to an Object
*/
   public Object fromString(String s, Class<?> clazz);
} 
```

这样的接口在 GSON、XStream 等中实现起来相当简单，但是通过抽象它，您将无法知道底层发生了什么。而且您与众多 XML 或 JSON 库之一分离，因此客户可以更自由地选择自己喜欢的库。

是否有任何“标准”Java接口？Guava，Apache等中的东西？

* * *

（添加）没有一个答案是我真正想要的（“是的，在 javax.obscure.interfaces 中有你想要的”）但感谢您的回复。我会接受汤姆的回答作为最有信息/最具挑衅性的回答。也许我会清理我拥有的代码并尝试创建一个标准。:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T00:28:31.317

[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)是用于将对象转换为 XML 或从 XML 转换的 Java SE/EE 标准。它可以独立使用，是 JAX-WS (SOAP) 和 JAX-RS (RESTful) Web 服务的标准绑定层。`jaxb.properties`下面是通过文件指定备用提供者的示例的链接

*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

目前没有用于 JSON 绑定的标准 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T00:42:28.027

XML 和 JSON 无关，所以这实际上是*两个*问题：

对于 JSON，虽然是“非官方的”，但一个流行的库是[GSON](http://code.google.com/p/google-gson/)。

对于 XML，请参阅[Blaise 的回答](https://stackoverflow.com/a/13811707/116810)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T00:48:40.720

我觉得你想多了。您实际上并不关心将对象转换为`Strings`，您希望能够在不知道该格式是什么的情况下将对象序列化为不同的格式。但是谁说不同的格式是字符串呢？当您希望您的对象可用作协议缓冲区时会发生什么？那是二进制格式，而不是字符格式——所以`stringify()`在那里无济于事。最终，由您来构建您的应用程序，使其尽可能独立于这些细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T01:07:14.487

一种流行的 JSON-to-Java 绑定库是[Jackson](http://jackson.codehaus.org/) 一种流行的 XML-to-Java 绑定库是[XStream](http://xstream.codehaus.org/)

如果您打算在 Web 应用程序中使用它，也许您想考虑[Spring 3 MVC](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)的设施。通过注释，它会自动进行转换，您可以告诉它您需要 XML 还是 JSON（或各种其他格式）。这也可能是您正在寻找的通用界面。

# mongodb - 计算 MongoDB 集合中的字段

> ID：13811379
> 
> 赞同：7
> 
> 时间：2012-12-10T23:54:15.900
> 
> 标签：mongodb, mongodb-query

我有一组像这样的文件：

```
{
    "_id" : ObjectId("..."),
    "field1": "some string",
    "field2": "another string",
    "field3": 123
} 
```

我希望能够遍历整个集合，并找到所有字段数。在这个示例文档中，有 3 个（我不想包含 _id），但它的范围是文档中的 2 到 50 个字段。最终，我只是在寻找每个文档的平均字段数。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-05-12T05:57:37.757

> 遍历整个集合，并找到所有字段数

现在您可以利用[聚合](https://docs.mongodb.com/manual/aggregation/)运算符[$objectToArray](https://docs.mongodb.com/manual/reference/operator/aggregation/objectToArray/) ( [SERVER-23310](https://jira.mongodb.org/browse/SERVER-23310) ) 将键转换为值并对其进行计数。此运算符在 MongoDB v3.4.4+ 中可用

例如：

```
db.collection.aggregate([
         {"$project":{"numFields":{"$size":{"$objectToArray":"$$ROOT"}}}}, 
         {"$group":{"_id":null, "fields":{"$sum":"$numFields"}, "docs":{"$sum":1}}}, 
         {"$project":{"total":{"$subtract":["$fields", "$docs"]}, _id:0}}
]) 
```

第一阶段`$project`是将所有键转换为数组以计数字段。第二阶段`$group`是汇总集合中键/字段的数量，以及处理的文档数量。第三阶段`$project`是用文档总数减去字段总数（因为您不想计算`_id`）。

您可以轻松添加[$avg](https://docs.mongodb.com/manual/reference/operator/aggregation/avg/)以计算最后阶段的平均值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T00:34:39.290

```
PRIMARY> var count = 0;
PRIMARY> db.my_table.find().forEach( function(d) { for(f in d) { count++; } });
PRIMARY> count
1074942 
```

这是我能弄清楚如何做到这一点的最简单的方法。在非常大的数据集上，走 Map-Reduce 路径可能是有意义的。但是，虽然你的集合足够小，但也可以。

这是`O(n^2)`，但我不确定是否有更好的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T00:03:07.177

您可以创建一个 Map-Reduce 作业。在 Map 步骤[中，将每个文档的属性作为 javascript 对象进行迭代](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)，输出计数并减少以获取总数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-14T09:40:31.953

对于一种简单的方法，只需 find() 所有值并为每组记录获取数组的大小。

```
db.getCollection().find(<condition>) 
```

然后对于每组结果，获取数组的大小。

```
sizeOf(Array[i]) 
```

# c# - 在具有子类结果的抽象类中使用泛型方法

> ID：13811380
> 
> 赞同：0
> 
> 时间：2012-12-10T23:54:15.697
> 
> 标签：c#, generics

我正在努力干燥一些代码，但我遇到了以下情况。我重新编写了代码以提供更好的场景示例。

```
namespace SourceCode
{
    public interface IFactory
    {
        public baseClass GenerateClass();
        public bool IsUsable();
    } 

    public abstract baseClass
    {
        ...
    }

    public AClass:baseClass
    {
        ...
    }

    public class FactoryA:IFactory
    {
        public baseClass GenerateClass()
        {
            return new AClass();
        }

        public bool IsUsable(){
        {
            return true if some condition;
        }
    }

    public BClass:baseClass
    {
        ...
    }

    public class FactoryB:IFactory
    {
        public baseClass GenerateClass()
        {
            return new BClass();
        }

        public bool IsUsable(){
        {
            return true if some condition;
        }
    }

    public static class FactoryProvider
    {
        List<IFactory> factories
        static FactoryProvider()
        {
            factories.Add(new FactoryA());
            factories.Add(new FactoryB());
        }

        static List<baseClass> GetClasses()
        {
            return (from f in factories where f.IsUsable() select f).ToList();
        }
    }
}

namespace SourceCode.Tests
{
    public class baseTests
    {
        public T GenericMethod<T>(){...}
    }

    public class ClassATests:baseTests
    {
        public void Test1()
        {
            ... generic used in a method provided by the base class
        }
    }

    public class ClassBTests:baseTests
    {
        public void Test1()
        {
            ... generic used in a method provided by the base class
        }
    }
} 
```

所以我的测试中的问题是每个子类都必须进行测试。

更新======================== 我能够通过执行以下操作来解决我的问题。

```
namespace SourceCode.Tests
{
    public class baseTests<I> where I: baseClass
    {
        public void Test1()
        {
            var result = GenericMethod<I>();
            // The generic method will use ClassA for ClassATests
            // and ClassB for ClassBTests
        }

        public T GenericMethod<T>(){...}
    }

    public class ClassATests:baseTests<ClassA>
    {            
    }

    public class ClassBTests:baseTests<ClassB>
    {            
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:14:57.790

使您当前的`A`类通用可以解决问题：

```
abstract class A
{
    // protected members...
    protected abstract A InternalGetData(List<A> src);

    public void SharedMethodHappensAlways()
    {
        List<A> src = new List<A>();
        var childResult = InternalGetData(src);
    }  
}

abstract class A<T> : A
    where T: A
{   
    public T GetData(List<A> src)
    {
        return src.OfType<T>().FirstOrDefault();
    }

    protected override A InternalGetData(List<A> src)
    {
        return GetData(src);
    }
}    

class B : A<B>
{    
}

class C : A<C>
{    
} 
```

示例用法：

```
List<A> src = new List<A>() { new B(), new C() };
B b = new B();
b.SharedMethodHappensAlways();
B firstB = b.GetData(src); // returns first instance of B
C firstC = new C().GetData(src); 
```

# android - 如何从适配器访问我的主要活动以及如何获取视图中元素的状态？

> ID：13811383
> 
> 赞同：0
> 
> 时间：2012-12-10T23:54:34.870
> 
> 标签：android

我有一个 Android 活动，它是一个地图和一个 ExpandableListView。此 ExpandableListView 使用运行时内置的集合和适配器填充。这个列表视图包含一个标签、一个图像和一个复选框。它们应该用作过滤器：如果选中该复选框，则与该标签相关的项目应该出现在我的地图中。如果未选中复选框。这些项目应该消失。

这是我的活动和适配器的代码（最重要的部分）

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/list_item_child"
        android:gravity="center_vertical"
        android:background="@android:color/white">

 <CheckBox
        android:id="@+id/filtro_checkbox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:checked="true"/>

 <ImageView
        android:id="@+id/filtro_imgView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:id="@+id/list_item_text_child"
              android:textSize="20sp"
              android:padding="10dp"
              android:layout_marginLeft="5dp"/>

</LinearLayout> 
```

代码：

```
@Override
    //in this method you must set the text to see the children on the list
    public View getChildView(int i, int i1, boolean b, View view, final ViewGroup viewGroup) {
        if (view == null) {
            view = inflater.inflate(R.layout.list_item_child, viewGroup,false);
        }

        TextView textView = (TextView) view.findViewById(R.id.list_item_text_child);
        //"i" is the position of the parent/group in the list and
        //"i1" is the position of the child
        Filtro child = mParent.get(i).getArrayChildren().get(i1);
        textView.setText(child.getTitle());

        ImageView imageView = (ImageView) view.findViewById(R.id.filtro_imgView);
        //"i" is the position of the parent/group in the list

        Drawable drawable = view.getResources().getDrawable(child.getImage());

        imageView.setImageDrawable(drawable);

        CheckBox chkbox = (CheckBox) view.findViewById(R.id.filtro_checkbox);
        chkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
                View view2 = inflater.inflate(R.layout.list_item_child, viewGroup,false);
                // TODO Auto-generated method stub
                if (buttonView.isChecked()) {
                Toast.makeText(view2.getContext(), "Checked",
                Toast.LENGTH_SHORT).show();
                }
                else
                {
                Toast.makeText(view2.getContext(), "UnChecked",
                Toast.LENGTH_SHORT).show();
                }

                }
                });

        //return the entire view
        return view;
    } 
```

我是 Android 开发新手，但据我了解，此方法代码将“实例化”每个项目的活动布局。这是有效的，项目正在模拟器中填充。然后，我添加了 onCheckedChanged 监听器。它起作用了，吐司显示出来了。但现在我想根据复选框的选择来显示/隐藏图钉。

为此，我想

*   获取选中的复选框
*   擦除地图上的所有图钉（为此，我需要以某种方式到达 main_activity）
*   显示与选中的复选框相关的引脚

我不知道如何执行这些步骤，我考虑过使用单例或观察者设计模式来访问 MainActivity，以便能够调用方法来重新加载引脚。那会是一种优雅的方法吗？我如何检查所有复选框的状态（选中/未选中）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:08:33.127

您可以使用首选项来存储选中或未选中项目的值。您还可以在首选项更改时注册一个侦听器。否则，您可以在要显示地图的活动中读取首选项。

1.  阅读首选项，并更新您的复选框。当用户更改复选框时，更新首选项
2.  在您的地图显示活动中，阅读首选项和相应的 PIN。此外，当用户固定/取消固定时，您可以更新首选项。

[https://developer.android.com/reference/android/preference/Preference.html](https://developer.android.com/reference/android/preference/Preference.html)

# php - 将数组从一页传递到另一页

> ID：13811385
> 
> 赞同：5
> 
> 时间：2012-12-10T23:54:42.717
> 
> 标签：php

我有一个包含一些值的数组，比如说

```
arr['one'] = "one value here";
arr['two'] = "second value here";
arr['three'] = "third value here"; 
```

我这个值在页面 home.php 中，在页面末尾它被重定向到页面 detail.php 现在我想在直接发生时将这个数组从页面 home.php 传递到 detail.php。

我可以通过多少种方式使用 post 和 get 方法发送这个值。另外，如果可能的话，请告诉我如何在 detail.php 页面中接收和打印这些值。

非常感谢每种类型的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T23:56:50.967

最简单的方法是使用会话将数组从一个页面存储到另一个页面：

```
session_start();
$_SESSION['array_to_save'] = $arr; 
```

有关会议的更多信息：http: [//php.net/manual/en/function.session-start.php](http://php.net/manual/en/function.session-start.php)

如果你不想使用会话，你可以在你的第一页做这样的事情

```
$serialized =htmlspecialchars(serialize($arr));
echo "<input type=\"hidden\" name=\"ArrayData\" value=\"$serialized\"/>"; 
```

在另一个中，您可以像这样检索数组数据：

```
$value = unserialize($_POST['ArrayData']); 
```

在这里找到解决方案：[https ://stackoverflow.com/a/3638962/1606729](https://stackoverflow.com/a/3638962/1606729)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T00:03:41.043

如果您不想使用会话，则可以将页面包含在另一个文件中。

**文件1.php**

```
<php
    $arr = array();
    $arr['one'] = "one value here";
    $arr['two'] = "second value here";
    $arr['three'] = "third value here";
?> 
```

**文件2.php**

```
<?php

    include "file1.php";

    print_r($arr);
?> 
```

如果数组是动态创建的并且您想通过 GET 或 POST 传递它，您应该在服务器端形成 URL 并将用户重定向到 HTTP URL 页面而不是 php 文件。

所以像：

**文件1.php**

```
<php
    $arr = array();
    $arr['one'] = "one value here";
    $arr['two'] = "second value here";
    $arr['three'] = "third value here";

    $redirect = "http://yoursite.com/file2.php?".http_build_query($arr);
    header( "Location: $redirect" );

?> 
```

**文件2.php**

```
<?php

    $params = $_GET;

    print_r($params['one']);
    print_r($params['two']);
    print_r($params['three']);
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T00:48:49.520

home.php 文件

```
session_start();
if(!empty($arr)){
    $_SESSION['value'] = $arr;
     redirect_to("../detail.php");
} 
```

详细信息.php

```
session_start();                    
if(isset($_SESSION['value'])){                           
    foreach ($_SESSION['value'] as $arr) {
        echo $arr . "<br />";
        unset($_SESSION['value']);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T00:11:28.620

您也可以通过查询参数传递值。

```
header('Location: detail.php?' . http_build_query($arr, null, '&')); 
```

您可以像这样在 detail.php 中获取数组：

```
// your values are in the $_GET array
echo $_GET['one'];  // echoes "one value here" by your example 
```

请注意，如果您通过 GET 或 POST（隐藏输入字段）传递值，用户可以轻松更改它们。

# java - Java中的StringIndexOutOfBoundsException

> ID：13811391
> 
> 赞同：-4
> 
> 时间：2012-12-10T23:54:59.720
> 
> 标签：java, eclipse, exception, encryption

我正在使用 Eclipse。我需要制作一个程序来加密和解密用户输入的单词，但是当我选择加密时，我在线程“main”java.lang.StringIndexOutOfBoundsException中得到异常：字符串索引超出范围：java.lang.String处的0。 charAt(Unknown Source) at Encryption.encrypt(Encryption.java:43) at Encryption.main(Encryption.java:118)

这是我的代码：

```
import java.util.Scanner;

public class Encryption 
{
    public static String message = "";
    public static boolean hasMessage = false;
    public static boolean encrypted = false;
    static char a = 0; 
    static char b;
    static int w;
    static int x;
    static int y;
    static int z;

    public static void display()
    {
        System.out.println("Message: " + message + "\n");
    }

    public static void encrypt(String word)
    {
        if(!hasMessage)
        {
            System.out.println("No message");
            // Tell the user there is no message
        }
        else if(encrypted)
        {
            System.out.println("Message is already encrypted");
            // Tell the user the message is already encrypted
        }

        else
        {
            message = "";
            // Reset the message to blank

            for (message.length();;)
            {
                for (message.charAt(a);; a++) 
                {
                    int w = (int) a * 2;
                    int x = (int) w + 2;  
                    char y = (char) x; 
        }
            }

            //get char from each letter (increase char each time),  cast as int

        }
        System.out.println(message);
        encrypted = true;

        // Using the parameter word, modify message
        // to contain a new value following a predictable pattern
        // Hint:  alter each character's ASCII value by casting
        //        to an integer and using math operators

        // Display the new message
        // Set encrypted to true

    }

    public static void decrypt(String word)
    {
        if(!hasMessage)
        {
            System.out.println("No message");
            // Tell the user there is no message
        }
        else if(!encrypted)
        {
            System.out.println("Message not encrypted");
            // Tell the user the message is not encrypted

        }
        else
        {
            System.out.println(message);
            // Like encrypt, but in reverse
        }

    }

    public static void main(String[] args) 
    {  
        Scanner sc = new Scanner(System.in);
        int menuChoice = 0;

        while(menuChoice != 4)
        {
            System.out.println( "[1] Enter Word\n" + 
                    "[2] Encrypt\n" + 
                    "[3] Decrypt\n" + 
                    "[4] Quit\n");

            menuChoice = sc.nextInt();

            if(menuChoice == 1)
            {
                System.out.println("Input message");
                message = sc.next();
                // prompt user to input message
                // assign next word to the class-level variable message
                hasMessage = true;
                encrypted = false;
                // set hasMessage to true
                // set encrypted to false

            }
            else if(menuChoice == 2)
            {
                encrypt(message);
            }
            else if(menuChoice == 3)
            {
                decrypt(message);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T00:02:14.713

你还不太了解 for 循环。您没有包含条件表达式。 `for(initialize; condition; increment)`是模式。你有`for (message.charAt(a);; a++)`哪个缺少条件。缺少条件默认为 true，这意味着循环永远继续。所以，`a`不断增加，直到`charAt(a)`炸弹。

```
for(int i=0; i<10; i++) 
```

例如，表示从 0 开始，在循环结束时将 i 增加 1，当 i<10 不再为真时停止循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:58:47.747

您正在将消息重置为空白，然后尝试对其进行迭代

```
 message = "";
        // Reset the message to blank

        for (message.length();;)
        { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T23:59:00.907

您正在访问空字符串的第一个字符。因此例外。

# javascript - 尝试基于 jQuery 验证引擎的外观创建页面加载工具提示

> ID：13811392
> 
> 赞同：0
> 
> 时间：2012-12-10T23:55:03.137
> 
> 标签：javascript, jquery, jquery-plugins

我的网站使用 jQuery.validationEngine 插件来验证用户表单。我真的很喜欢弹出的工具提示的外观和感觉（即，当用户单击它们时它们会慢慢淡入并消失）。 [这是一个](http://www.position-relative.net/creation/formValidator/demos/demoValidators.html)正在使用的验证引擎的示例。

我想在用户访问某些页面时使用相同的工具提示来显示提示或通知（例如，“您有一条新消息，请单击此处查看”）。因此，它们实际上并不是基于验证，而是基于页面本身的加载。我无法弄清楚如何调用 jQuery 插件使用的实际工具提示，而无需验证任何内容。

如何在不验证的情况下调用工具提示本身？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:40:30.850

尝试插件包} {des 包包含 2 个通知插件。1\. desNotifiers 2\. desToolStip。3\. 去窗。

[http://des.deletesoft.com:8080/?go=5](http://des.delestesoft.com:8080/?go=5)

# javascript - 试图让我的 chrome 扩展程序单击页面上的元素

> ID：13811393
> 
> 赞同：0
> 
> 时间：2012-12-10T23:55:30.203
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在尝试创建一个可以从 hiphopdx 下载 mp3 的 chrome 扩展。我发现一旦你点击网站上的播放按钮，就有可能提取 mp3 的下载链接。但是我坚持让我的扩展程序点击播放按钮。这是我在其上使用扩展程序的页面示例： [http ://www.hiphopdx.com/index/singles/id.16603/title.fred-the-godson-f-the-kid-daytona-回到学校的产品-kaimbr](http://www.hiphopdx.com/index/singles/id.16603/title.fred-the-godson-f-the-kid-daytona-back-to-school-prod-kaimbr)

我的清单 json

```
"name": "My Test",
"version": "1",
"manifest_version": 2,
"background": {
    "scripts": ["popup.js"]
},
"browser_action": {
    "default_icon": "icon.png"
},
"permissions": ["tabs", "http://*/*", "https://*/*"] 
```

我的 popup.html

```
<!doctype html>
<html>
  <head>
    <script src="popup.js"></script>
  </head>
  <body>
  </body>
</html> 
```

popup.js

```
function ShowOperationMessage(obj, evt) {
        var fireOnThis = obj;
        if (document.createEvent) {
            var evObj = document.createEvent('MouseEvents');
            evObj.initEvent(evt, true, false);
            fireOnThis.dispatchEvent(evObj);
        } else if (document.createEventObject) {
            fireOnThis.fireEvent('on' + evt);
        }
    }

ShowOperationMessage(document.getElementsByClassName("playBtns medium awesome red adjust launchplayer left"),"click"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:56:48.637

将您的代码修改为内容脚本代码，我能够单击按钮

![在此处输入图像描述](../Images/237239a227b225e0b0e2b22ea8f6f17a.png)

**参考**

*   [内容脚本](https://developer.chrome.com/extensions/content_scripts.html)
*   [背景页面](https://developer.chrome.com/extensions/background_pages.html)
*   [浏览器操作](https://developer.chrome.com/extensions/browserAction.html)

添加了内容脚本部分以消除背景内容

***清单.json***

```
{
    "name": "Mouse Clicks",
    "version": "0.0.1",
    "manifest_version": 2,
    "description": "This demonstrates how mouse clicks are tracked",
    "content_scripts": [
    {
      "matches": ["http://www.hiphopdx.com/index/singles/id.16603/title.fred-the-godson-f-the-kid-daytona-back-to-school-prod-kaimbr"],
      "js": ["myscript.js"]
      }
  ]

} 
```

***myscript.js***

`document.getElementsByClassName("playBtns medium awesome red adjust launchplayer left")``obj[0]`返回一个如此使用索引的数组

```
function ShowOperationMessage(obj, evt) {
    var fireOnThis = obj[0];
    if (document.createEvent) {
        var evObj = document.createEvent('MouseEvents');
        evObj.initEvent(evt, true, false);
        fireOnThis.dispatchEvent(evObj);
    } else if (document.createEventObject) {
        fireOnThis.fireEvent('on' + evt);
    }
}

ShowOperationMessage(document.getElementsByClassName("playBtns medium awesome red adjust launchplayer left"), "click"); 
```

如果您需要更多信息，请与我们联系。

# php - 数据库架构——一大一小

> ID：13811394
> 
> 赞同：1
> 
> 时间：2012-12-10T23:55:32.530
> 
> 标签：php, mysql, database, architecture

我编写了一个 php + Mysql Web 应用程序来存储教堂的家庭/人员信息。我最好为每个教堂拥有 1 个数据库和 1 个应用程序安装，或者设计具有 1 个安装和 1 个数据库的应用程序来保存所有将注册服务的教堂。假设数百个教堂可以使用该系统，每个教堂可能​​有数百人。一个有 500,000 人的 mysql 表会不会太大，因此运行速度很慢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:08:32.280

只要您花时间正确设计数据库的模式和查询，在您获得数*千万*条记录之前，您应该不会有任何问题。

也就是说，不花时间进行适当的设计可能会导致数千条记录的数据库出现可怕的性能。

总而言之，恕我直言，两者都比管理数百个单独的数据库更可取。这听起来像是一场行政*噩梦*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:02:46.463

MySQL 可以处理负载，所以现在的问题是您想如何使用数据？

如果教堂是分开的，不需要互操作，甚至更愿意保持完全独立，那么多安装案例可能是一个不错的选择。

另一方面，如果你想整合来自教会的数据，那么应该有一个数据库。

每当想到做一个数据库时，请想想你想如何使用它。这么多归结为数据互操作性（或缺乏互操作性）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T00:00:19.180

不，数据库旨在有效地支持 500,000 个寄存器，您将不得不更加担心数百人将消耗的带宽。

事实上，管理同一软件的数百个副本通常很困难。

# c# - 在 Linux 中使用 C# Mono 控制并行端口

> ID：13811395
> 
> 赞同：0
> 
> 时间：2012-12-10T23:55:33.927
> 
> 标签：c#, linux, mono, parallel-port

根据标题，我想在 Ubuntu 中使用 C# 控制并行（LPT）端口。

Mono 中是否有任何内置库可以让我这样做？

任何人都可以提供任何代码示例来完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:01:32.397

基础知识指南，以及使用输入驱动程序和 api 的 c# 代码：http: [//www.codeproject.com/KB/cs/csppleds.aspx](http://www.codeproject.com/KB/cs/csppleds.aspx)

更一般的链接集合，包括与并行端口相关的技术和软件：[http ://www.lvr.com/parport.htm](http://www.lvr.com/parport.htm)

我花了很多时间研究这个，从来没有找到一个原生的单声道库。顺便说一句，串行端口更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:19:34.410

虽然我承认 Jesper 的贡献，但我觉得他的回答不完整，最初的回答只引用了 Dai 指出的 Windows 代码。Jesper 关于 P/Invoke 的后续评论确实让我找到了答案。

我已经记录了我的完整解决方案，包括此处的代码示例：[http](http://www.iaincarlin.com/ylsned/controlling-the-parallel-port-using-ubuntu-mono-and-c/) ://www.iaincarlin.com/ylsned/controlling-the-parallel-port-using-ubuntu-mono-and-c/但是，简而言之：

*   C# Mono 中似乎没有用于访问并行端口的本机库
*   P/invoke 是必需的，我必须创建一个可以使用 DLLImport 调用的本机 C++ 应用程序，以便访问 LPT1 端口。
*   C++ 应用程序本质上为我可以从 C# 调用的 io 库 outb 函数提供了一个包装器

我上面的博客文章包含有关我所做的背景的更多详细信息。我本可以使用原生 C++ 来做同样的事情（事实上，将我现有的 Dos 代码移植到 Linux 上会更容易），但我想尝试使用 Mono，这是一种实用的方法。

我需要在这里承认这篇文章：[http](http://www.moythreads.com/wordpress/2008/02/04/pinvoke-how-to-call-c-from-c/) ://www.moythreads.com/wordpress/2008/02/04/pinvoke-how-to-call-c-from-c/提供了最有帮助的让它工作.

# ios - iOS在从另一个ViewController单击按钮时向UITableView添加一行

> ID：13811397
> 
> 赞同：0
> 
> 时间：2012-12-10T23:55:36.063
> 
> 标签：ios, tableview

我是iOS开发的新手，我无法继续前进......这里有经验的人，谁能帮助我解决我的问题？

我使用故事板。首先你会看到一个带有按钮的 ViewController。当您单击其中一个按钮时，有关此按钮的信息将出现在 TableViewCell 中。- 直到现在才清楚。

然后单击“继续”按钮（然后返回带有按钮的 ViewController）并从 ViewController 中选择另一个按钮。

怎么做，**来自这个按钮的信息作为第二个 Cell 出现在 TableView 中**？（这样当您单击例如三个按钮时，它们在此表中显示为彼此下方的 3 个单元格？）

[我的示例代码在这里下载。](http://www.file-upload.net/download-6913604/TestTableView.zip.html)- （在这个网站上点击最小的图标“下载”）。

非常非常感谢您的帮助！！！

伊娃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T03:41:27.160

您需要一个`Model`来存储您的选择/数据。

例如： On `MainViewController`，当您单击 时`button1`，将其记录在`Model`using 数组或只是变量中。然后，当您加载时`SecondViewController`，请检查模型中的值并相应地称重传感器。

=> 模型示例代码

```
// Header
@interface ModelData : NSObject

@property (nonatomic) NSMutableArray selectedProducts;
@property (nonatomic) NSInteger value1;
@property (nonatomic) NSInteger value2;
@property (nonatomic) NSInteger value3;

@end

// Implementation
@implementation ModelData

@synthesize selectedProducts = _selectedProducts;
@synthesize value1 = _value1;
@synthesize value2 = _value2;
@synthesize value3 = _value3;

@end 
```

* * *

各种选项：

1.  用于`NSUserDefaults`存储设置等信息
2.  使用`Model`如上所述的类 - 它可以是单例类
3.  用于`CoreData`存储和检索您的数据 - 复杂的方法，适用于动态事物

* * *

这是一个好的[数据模型教程](http://www.hollance.com/2011/04/making-your-classes-talk-to-each-other-part-1/)的参考（由 Iva 报道）

# excel - 根据单元格值数据，按路径参考 Excel 工作簿

> ID：13811398
> 
> 赞同：5
> 
> 时间：2012-12-10T23:55:38.020
> 
> 标签：excel, excel-formula

我有一个 Excel 工作表，它从其他已关闭的 Excel 工作簿中提取数据。目前，当我列出关闭的工作簿的整个路径时，它工作正常，但我想使用存储在单独单元格中的变量作为路径名的一部分。

例如，我正在尝试引用一个名为

> 工作簿12.10.12.xls

在一个单独的工作簿（我们会说“活动”工作簿）中，我有一个带有公式的单元格

> =INDEX('C:\Path[workbook12.10.12.xls]SHEET1'!$B$1:$B$5, MATCH("匹配文本", 'C:\Path[workbook12.10.12.xls]SHEET1'!$A $1:$A$5, 0))

它在 workbook12.10.12 的 B 列中找到与 A 列中包含“匹配文本”的单元格相对应的值。这很好用；但是，我在活动工作簿中有一个单元格，其值为

> 12.10.12

并想以某种方式在 INDEX 函数中引用此值。

我无法打开其他工作簿，因此 INDIRECT 功能无济于事。谷歌搜索似乎表明 Excel 对这类事情没有简单的一站式解决方案......有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T00:08:46.577

从[Frank Kabel 2004 年在 Dicks 博客上的帖子中，](http://www.dailydoseofexcel.com/archives/2004/12/01/indirect-and-closed-workbooks/)您可以

1.  使用 Laurent Longre 开发的免费插件[MOREFUNC.XLL](http://longre.free.fr/English/)，其中包括函数 INDIRECT.EXT
2.  使用[此处描述的](http://www.bygsoftware.com/examples/sqlrequest.html)SQL.REQUEST *似乎不再受支持，我不清楚这是否可以处理您的`INDEX\MATCH`请求
3.  使用 Harlan Grove 的[PULL](http://tinyurl.com/63xon)函数

此外，您可以：

1.  通过输入引用您需要的工作簿的公式的代码直接创建*“脏链接”*
2.  对于提取值 - 但不适用于使用范围 - 您可以使用 Walkenbach 的[ExecuteExcel4Macro XLM 方法](http://j-walk.com/ss/excel/tips/tip82.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:22:29.990

我认为您要做的是在特定文件（命名日期）中找到特定记录。您可以通过一个简单的 VBA 代码来完成。

假设您要`REC001`在 A1 中搜索记录#，日期文件`12.10.12`位于单元格 C1，并将结果显示在单元格 A7 中

在要输入输入和获取输出的工作表上，右键单击工作表选项卡并选择“查看代码”并粘贴以下代码：

```
Private Sub Worksheet_Change(ByVal Target As Range)
If Intersect(Target, Range("C1")) Is Nothing Then Exit Sub
Range("A7").Formula = "=INDEX('C:\TEMP\[workbook" & Range("C5").Value & ".xls]SHEET1'!$B$1:$B$5, MATCH(" & Range("A1").Value & ", 'C:\TEMP\[workbook" & Range("C5").Value & ".xls]SHEET1'!$A$1:$A$5, 0))"
End Sub 
```

然后每次编辑 C1 时，公式都会更新。

实际上，我认为您不应该在您的情况下使用 INDEX 函数。使用 VLOOKUP 更简单。例如：

```
Range("A8").Formula = "=vlookup(" & Range("A1").Value & ",'C:\TEMP\[workbook" & Range("C5").Value & ".xls]SHEET1'!$A$1:$B$5,2,false)" 
```

您必须注意几点：1.您将代码粘贴到 Sheet1 对象（或工作表名称）上，但不插入新模块 2.您的目标文件的路径和文件名是正确的，包括 .xls和 .xlsx 3\. 您的原始文件只覆盖到 $B$5 4\. 在 VBA 上，建议您将文件保存为 .xlsm 格式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-31T10:07:31.473

您可以在 excel 中以名称存储完整引用，包括到已关闭文件中某个范围的文件路径（直接或通过 VBA 根据不同单元格中的选择并使用上述 Worksheet_Change 过程），然后使用像往常一样在公式中命名。这克服了 INDIRECT 函数的限制。

VBA 非常简单：

New_Ref = Sheets("Wells").Range("K6")

ActiveWorkbook.Names("MyWorkbook").RefersTo = "=" & New_Ref

唯一的技巧是确保在名称中包含“=”。

一旦发现这一点，名称就会有大量用途。我已经使用它轻松地从远程共享点站点上的关闭文件中获取数据 - 我假设共享点处理所有权限。

# javascript - javascript中的关键代码

> ID：13811405
> 
> 赞同：0
> 
> 时间：2012-12-10T23:56:26.327
> 
> 标签：javascript, html

我对键盘的字符代码有疑问。我正在读这篇[文章](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

这有一堆键码。我想检查当用户按下 alt 和向下箭头时要使用什么键码。我必须创建像组合框这样的下拉列表，当用户按下 alt 和向下键时显示列表。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T23:59:50.890

键盘事件必须`event.altKey`指示是否按下了 alt。

阅读[https://developer.mozilla.org/en-US/docs/DOM/KeyboardEvent](https://developer.mozilla.org/en-US/docs/DOM/KeyboardEvent)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-28T16:40:28.073

找出任何关键代码的最简单方法是放入`console.log(event.data.keyCode)`您的事件函数中。例如，“Alt + Down”的键码是 4456488。

# wcf - 我们可以在 WCF 服务的 wsdl 中手动添加主要和次要信息吗

> ID：13811406
> 
> 赞同：1
> 
> 时间：2012-12-10T23:56:28.910
> 
> 标签：wcf, web-services, configuration

我们能否在 WCF 服务的 wsdl 中手动添加主要和次要信息。我们正在调用第三方服务，他们正在对他们的服务进行版本控制，并希望我们在他们提供的 wsdl 中包含主要和次要版本。所以我不确定我们是否可以手动添加这些信息。

# php - 链接到外部 php 文件（出于专有原因）

> ID：13811410
> 
> 赞同：0
> 
> 时间：2012-12-10T23:56:43.343
> 
> 标签：php

所以我们有一个非常漂亮的小 PHP 应用程序。人们一直有兴趣以不同的名称“出租”它。

但是，使用当前设置 - 任何“顶级管理员”（他们必须是）都可以查看 PHP 文件。

我的老板对此有点担心。是否可以（或者更确切地说，SMART）链接到我们服务器上的外部 PHP 文件？

所以而不是

**index.php 内容：**

```
<?php include('/lib/header.php'); ?> 
```

因此

**header.php 内容：**

```
<?php /*Stuff I don't want you seeing*/ ?> 
```

有可能（如果有的话，聪明）做这样的事情吗

**index.php 内容：**

```
<?php include('http://site-i-control.com/lib/header.php'); ?> 
```

所以他们看不到或修改 header.php 的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:59:05.130

任何人都可以将该 URL 放在他们的浏览器中并下载。实际上，只需将代码编辑为`echo`而不是`include`，您就可以立即看到代码。

如果您发布 PHP 代码，您实际上是在为他们提供一切......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T00:00:15.643

你将能够在 PHP 中完成这样的事情的唯一方法是：

1.  开发或以其他方式实现使用许可证密钥的代码。
2.  使用 IONcube、SourceGuardian 或其他类似产品对全部或部分源代码进行编码。

否则就无法以您需要的方式保护 PHP 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T00:02:07.850

也许你可以编译你的 php：

[php编译器](http://www.phpcompiler.org/)

> 什么是phc？
> 
> phc 是一个支持插件的 PHP 开源编译器。此外，它还可用于漂亮打印或混淆 PHP 代码，作为开发处理 PHP 脚本的应用程序的框架，或将 PHP 转换为 XML 并返回，从而能够使用 XML 工具处理 PHP 脚本。

# android - 没有事件监听器的指南针

> ID：13811419
> 
> 赞同：0
> 
> 时间：2012-12-10T23:57:28.040
> 
> 标签：android, events, listener, compass-geolocation

当您通常构建 Compass 应用程序时，您会使用以下内容：

```
@Override
public void onSensorChanged(SensorEvent event) {
        int myAzimuth = Math.round(event.values[0]); //Angle

} 
```

但我想自己阅读数据，例如：mSensorManager.getCompassAngle()

没有听众有办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:04:13.023

不，抱歉——`SensorManager`只能使用监听器。

# .htaccess - opencart 重写 .htaccess

> ID：13811420
> 
> 赞同：1
> 
> 时间：2012-12-10T23:57:37.180
> 
> 标签：.htaccess, url-rewriting, opencart

网站使用 opencart cms，启用了 SEO url，所以 .htaccess 看起来：

```
 RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L]
RewriteRule ^googlebase.xml$ index.php?route=feed/google_base [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

一切都很完美，但我想添加从非 www 到 www 的 301 重定向，所以我添加了：

```
RewriteCond %{HTTP_HOST} ^example.com$ [NC]
RewriteRule ^(.*) http://www.example.com/$1 [R=301,L] 
```

它可以工作，但是当我尝试使用类别或产品重定向链接时，它会添加“index.php？*route* =”

例子：

“www.example.com/cats”，如果我尝试不带“www”的“example.com/cats”，链接会看起来是 www.example.com/index.php？*路线*=猫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T00:23:16.083

您需要在任何路由规则**之前**添加所有重定向（例如，您将事物路由到的规则`index.php`。所以您的 htaccess 文件需要看起来像这样：

```
# redirect rules first
RewriteCond %{HTTP_HOST} ^mysite.com$ [NC]
RewriteRule ^(.*) http://www.mysite.com/$1 [R=301,L]

# then routing rules
RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L]
RewriteRule ^googlebase.xml$ index.php?route=feed/google_base [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

# ios - iOS：iOS 应用的样式表/主题

> ID：13811422
> 
> 赞同：1
> 
> 时间：2012-12-10T23:57:41.910
> 
> 标签：ios, colors, stylesheet

对于我的一个应用程序，如果客户提出请求（他们通常这样做，因为它是一个品牌应用程序），我目前允许自定义主题。有时这可以像简单地更改配色方案一样简单，所以我想知道是否有办法简化这个过程。例如，如果我有一个名为 ColourStyle 的类，我指定了它的颜色属性值，然后将其导入到其他类，我是否可以简单地设置它，这样我所要做的就是编辑这个类，其他类自然会基于它们的颜色在 ColourStyle 中设置的任何值？

这是可行的，还是有更简单的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T00:05:13.413

使用类似于 CSS 的语法为您的应用程序设置样式！ [https://github.com/tombenner/nui](https://github.com/tombenner/nui)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-10T16:53:59.690

我创建了一个 Swift 库，它可以让你做到这一点，此外，它还可以在 Storyboard 画布上实时呈现你的样式作为奖励！

[https://github.com/daniel-hall/Stylish](https://github.com/daniel-hall/Stylish)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T00:02:57.563

一种方法是调整新的外观 API。 [http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html)

如果你登录到苹果的开发者门户，就会有一个很好的演讲和幻灯片；搜索高级 ui 自定义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T00:03:27.223

在 iOS5+ 中有一个“外观管理器”，可以让您全局控制各种 UI 元素的外观质量。这是一个教程：[http ://www.raywenderlich.com/4344/user-interface-customization-in-ios-5](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)

如果您需要外观代理无法提供的自定义功能，则必须创建 UILabel 之类的子类并提供您自己的自定义方法。不幸的是，像 UIButton 这样的东西不能简单地被子类化。你可能不得不自己动手。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-12T12:30:32.900

`UIAppearance`是一种方法，但我们可以通过编写/使用新的东西来实现样式引擎的不同属性（如早期的样式应用和样式组合等）。

我的方法允许将样式应用于您的子类[，如下所示](https://github.com/werediver/StyleSheet/blob/master/Example/Sources/ViewController.swift)：

```
final class TitleLabel: UILabel, TitleFontStyle {}
final class BodyLabel: UILabel, BodyFontStyle, MultilineLabelStyle {}
final class CaptionLabel: UILabel, CaptionFontStyle, MultilineLabelStyle {} 
```

样式标记协议的定义[如下](https://github.com/werediver/StyleSheet/blob/master/Example/Sources/AppStyle.swift)：

```
protocol TitleFontStyle {}
protocol BodyFontStyle {}
protocol CaptionFontStyle {}
protocol MultilineLabelStyle {}

func appStyle(palette: PaletteProtocol) -> StyleProtocol {
    return StyleSheet(styles: [
        Style<TitleFontStyle, UILabel> { $0.font = palette.fonts.titleFont },
        Style<BodyFontStyle, UILabel> { $0.font = palette.fonts.bodyFont },
        Style<CaptionFontStyle, UILabel> { $0.font = palette.fonts.captionFont },
        Style<MultilineLabelStyle, UILabel> { $0.numberOfLines = 0 }
    ])
} 
```

有关完整的使用示例，请参阅[示例](https://github.com/werediver/StyleSheet/tree/master/Example)项目。

有关实现细节，请参见[`Style.swift`](https://github.com/werediver/StyleSheet/blob/master/Sources/Style.swift)和[`RootStyle.swift`](https://github.com/werediver/StyleSheet/blob/master/Sources/RootStyle.swift)。

[使用StyleSheet](https://github.com/werediver/StyleSheet)微框架（与 Ca​​rthage 和 CocoaPods 兼容[！](https://github.com/Carthage/Carthage)）尝试这种方法。

# actionscript-3 - AS3 内存泄漏

> ID：13811428
> 
> 赞同：3
> 
> 时间：2012-12-10T23:58:21.330
> 
> 标签：actionscript-3, actionscript

我一直在研究一个库，并且遇到了应用程序内存的问题。

我创建了一个名为*FileManager*的类，它允许用户调用一个名为的函数`loadNewFiles`- 此函数打开一个多文件选择对话框并将每个*FileReferenceList*存储在一个向量中。我可以随时调用该`removeList`函数并删除该列表并清除分配给该列表的所有内存和侦听器，所以一切都很好。

我创建了另一个名为*UploadManager的类，它采用**FileReference*对象数组并通过该`uploadFiles`函数将它们上传到 URL 。内存泄漏似乎在这里。当您调用此函数时，它会添加适当的事件侦听器并调用上传函数。如果上传失败或上传完成，它会移除监听器并清除它一直在等待的向量。

在上传管理器完成上传文件后，我在*FileManager*`removeFiles`中调用该函数（记住，它之前工作得很好）并且......没有任何反应。文件从两个向量中删除，侦听器从两个文件中删除，但内存保持分配状态。这显然有可能导致沿途出现问题，因为通过库可用的文件、上传等数量没有限制。

 *类：
[文件管理器上传](https://github.com/egg82/GTLib/blob/dev/src/org/gametack/file/FileManager.as)
[管理器](https://github.com/egg82/GTLib/blob/dev/src/org/gametack/file/UploadManager.as)

[执行](http://github.com/egg82/GTLib/blob/dev/src/Main.as)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:49:58.250

从您的示例中听起来，UploadManager 仍然具有对来自传递给 uploadFiles 的向量的文件的引用，或者游戏中的某些其他对象仍然具有引用。

另请注意，System.gc() 仅适用于 Flash 播放器的调试版本。

所以你不能依赖它来选择建筑设计。当您需要“按需”查看 ActionScript 内存的消耗时，它适用于对内存密集型操作进行单元测试。

在生产产品中，ActionScript 虚拟机在检测垃圾收集的时间和地点方面非常活跃。大多数人会说它发生在你不希望它发生的时候。

尝试分析应用程序并查看相关对象（即 FileReference）的“累积实例”与“实例”，以及“累积内存”与“内存”。

您可以在运行时在 Profile View 中强制进行垃圾收集，以了解在发布版本中进行垃圾收集时实际释放了多少内存。*

# paypal - 收到贝宝付款后如何执行代码？

> ID：13811430
> 
> 赞同：3
> 
> 时间：2012-12-10T23:58:40.220
> 
> 标签：paypal, licensing, payment, serial-number

我已经完成了一个程序的设计，并准备创建一个商业系统。理想情况下，我想使用 Paypal 为我处理所有交易，我希望如何在我自己的网站上完成，并将信息安全地发送到 Paypal。我了解如何完成整个过程，但我不明白我将在哪里添加代码以让我的服务器生成序列代码并将其与客户信息一起存储在数据库中。

Paypal API 不是很有帮助，所以我想知道是否有一个变量由 PayPal 通过 POST 或类似方式传回商家网站，可以检查该变量以验证是否接受了付款，然后根据情况做出反应那个状态。

我知道我可以让它将用户发送回商家网站，但我希望它生成一个页面...

感谢您购买 (NAME)！您的 (LICENSE_COUNT) 个许可证的序列副本已发送到您的电子邮件地址 (EMAIL)。

然后运行脚本自动生成序列号，发送给用户，并保存在数据库中。

任何语言都可以接受。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T03:24:51.670

您使用的是[Payments Standard](https://www.x.com/developers/paypal/development-and-integration-guides#wps)还是[Express Checkout](https://www.x.com/developers/paypal/development-and-integration-guides#ec)？

如果您使用的是 Payments Standard，则需要使用[PDT](https://www.paypal.com/pdt) + Auto-Return 将数据返回到您的页面进行显示。也就是说，我不会依赖它向您的用户提供必要的详细信息，因为即使启用了自动返回，他们也不能总是保证能回到那里。

对于此类事情，建议使用[即时付款通知 (IPN) 。](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_admin_IPNIntro)它会将交易数据发布到您服务器上的侦听器脚本。这与结帐系统本身分开发生。您可以在此脚本中自动执行更新数据库、访问 3rd 方 Web 服务、发送电子邮件通知等任务。它还允许您正确处理电子支票（仅在付款清除时交付电子商品。）

如果您使用 Express Checkout，则可以在结帐流程中处理此问题，而不是使用 IPN，因为始终保证用户返回您的站点。也就是说，如果您接受电子支票，您仍然希望使用 IPN。如果您禁用了电子支票，那么这将工作得很好。

# perl - 我试图在 perl 中逐行浏览 html 页面，但它只是将整个文件视为一行。我该如何解决？

> ID：13811440
> 
> 赞同：2
> 
> 时间：2012-12-10T23:59:46.060
> 
> 标签：perl

所以我在我的代码中定义了一个 url，然后我将它分配给内容，所以整个 html 文件应该存储在`$content`. 当我从 STDIN 读取时，它会自动逐行运行，但这里似乎并非如此。这`$end == 1`部分只是说while循环应该何时停止。我是 Perl 的新手，所以它可能只是一些语法问题，但我尝试过使用双等号或`$line = $content`在循环内移动部分，但我仍然无法修复它。任何帮助，将不胜感激！谢谢！

```
my $content = get $url;
while(my $line = $content && $end == 1) {
    #code to edit line
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:09:09.947

尝试这个：

```
my @content = get $url;
foreach my $line (@content) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T01:02:33.183

```
while ($content =~ /\G(.*\n|.+\z)/g) {
   my $line = $1;
   ...
} 
```

* * *

至于`$end`，您的变量名称错误或您的逻辑颠倒了。无论如何，这样的结构是完全没有必要的。只需使用[`last`](http://perldoc.perl.org/functions/last.html).

# html - CSS 媒体查询帮助

> ID：13811448
> 
> 赞同：0
> 
> 时间：2012-12-11T00:00:36.133
> 
> 标签：html, css

我需要帮助构建媒体查询，这将允许我定位台式机/笔记本电脑。我使用下表作为显示尺寸的参考。

*显示尺寸列表中列出的尺寸对应于最佳画布宽度列表。*

**显示尺寸（以像素为单位）：**

1.  800x600
2.  1024x768
3.  1280x800

**最佳画布宽度（以像素为单位）：**

1.  宽度 780
2.  宽度 960
3.  宽度 1220

我用作参考的表格基本上列出了用于每个显示尺寸的布局宽度，但这不是我所困惑的。我不明白的是如何为这些宽度内的所有样式构建媒体查询。

这是我到目前为止所拥有的：

```
<link rel="stylesheet" href="file.css" media="only screen and (min-width: 780px) and (max-width: 1220px)"> 
```

我只想知道我这样做是否正确。希望我已经解释得足够清楚了！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:06:56.913

不确定“唯一”，但除此之外它看起来不错。这将匹配 780 到 1220 像素宽的屏幕。您应该为其他大小添加其他查询以包含这些大小的不同文件。

记住不要为最小的指定最小宽度，最大的不要指定最大宽度，否则在非常小或非常大的屏幕上您将没有任何（特定）样式。

请注意，您可以很容易地测试您的媒体查询。只需调整浏览器窗口的大小。

# sql - Count rows with multiple aggreagate columns

> ID：13811451
> 
> 赞同：2
> 
> 时间：2012-12-11T00:00:37.903
> 
> 标签：sql, sql-server, count, distinct

I have a test table to demonstrate the issue:

```
Id  NetworkId   CountryCode
1       1           de
2       2           de
3       2           de
4       2           de
5       1           us
6       1           us
7       1           us
8       2           us 
```

I need to output something like this:

```
NetworkId   CountryCode    DistCount
    1           de              1
    2           de              3
    1           us              3
    2           us              1 
```

## Attempted Queries

I looked for several answers on SO and I wasn't able to find exactly what I need. Here is the first related question and the queries I tried: [Counting the rows of multiple distinct columns](https://stackoverflow.com/questions/1199131/counting-the-rows-of-multiple-distinct-columns)

**Query:**

```
SELECT NetworkId, CountryCode, COUNT(*) as DistCount
FROM (SELECT DISTINCT NetworkId, CountryCode FROM TestTable) AS FOO
GROUP BY NetworkId, CountryCode 
```

**Results in:**

```
NetworkId   CountryCode    DistCount
    1           de              1
    1           us              1
    2           de              1
    2           us              1 
```

**Query:**

```
SELECT COUNT(DISTINCT(STR(NetworkId) + ',' + STR(CountryCode)))
FROM TestTable 
```

**Results in:**

```
Msg 8114, Level 16, State 5, Line 1
Error converting data type nvarchar to float. 
```

* * *

I also tried the answers in this question: [How can I count distinct multiple fields without repeating the query?](https://stackoverflow.com/questions/9664043/how-can-i-count-distinct-multiple-fields-without-repeating-the-query)

Query:

```
SELECT 
   NetworkId, 
   CountryCode,
   COUNT(*) OVER(PARTITION BY NetworkId, CountryCode) as DistCount
FROM TestTable
GROUP BY NetworkId, CountryCode 
```

Result:

```
NetworkId   CountryCode    DistCount
    1           de              1
    1           us              1
    2           de              1
    2           us              1 
```

As you can tell, I'm having a hard time figuring out how to do this... I would think it should be relatively simple, but I'm missing something.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T00:04:51.027

Unless I'm mistaken, this would work:

```
SELECT NetworkId, CountryCode, COUNT(Id) as DistCount
FROM TestTable
GROUP BY NetworkId, CountryCode 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T00:05:17.440

If Id is unique and not null within TestTable (which it will be if it is the primary key), then this query will return the result set you specified:

```
SELECT NetworkId, CountryCode, Count(1) AS DistCount
  FROM TestTable 
 GROUP BY NetworkId, CountryCode
 ORDER BY NetworkId, CountryCode 
```

However, if the `Id` column is not unique, and what you want is a count of distinct non-null `Id` values within each group, you can add the DISTINCT keyword:

```
SELECT NetworkId, CountryCode, Count(DISTINCT Id) AS DistCount
  FROM TestTable 
 GROUP BY NetworkId, CountryCode
 ORDER BY NetworkId, CountryCode 
```

Given your sample data, both queries will return the same result. There will be a difference only if you have duplicate `Id` values within a group.

# python - 如何阅读在 MULTIPLE 列表框中选择的内容

> ID：13811453
> 
> 赞同：1
> 
> 时间：2012-12-11T00:01:00.950
> 
> 标签：python, listbox, tkinter

我对 Python 非常陌生，无法理解如何只捕获从列表框中选择的一个项目，更不用说一个以上了。我特别不明白程序何时记录了我选择的项目，因为没有带有列表框的“命令”选项。我认为是这样的。我真的不明白绑定。我认为这是我的问题（除其他外！）。

以下代码是从我的“app”类中提取的。

```
 l = Listbox(self, height=10, selectmode=EXTENDED)
    # Selectmode can be SINGLE, BROWSE, MULTIPLE or EXTENDED. Default BROWSE
    l.grid(column=0, row=11, sticky=(N,W,E,S))

    s = Scrollbar(self, orient=VERTICAL, command=l.yview)
    s.grid(column=0, row=11, sticky=(N,S,E))
    l['yscrollcommand'] = s.set

    for i in range(1,101):
        l.insert('end', 'Line %d of 100' % i)

    self.ichoose = l.curselection() 
```

正如各位专家所意识到的，当我打印 app.ichoose 时，我只会得到一个空元组。我需要做什么？谢谢，约翰·罗兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:23:32.570

好吧......我过去这样做的方式是：

```
listbox.bind("<Double-Button-1>", entered) 
```

那么函数`entered`看起来像这样：

```
def entered(event):
    global listEx
    items = map(int, listbox.curselection())
    result= listEx[items[0]]
    print result 
```

`listEx`是列表框中所有条目的列表，该`items = map(int, listbox.curselection())`部分将返回所选条目的索引值...如果您想获取多个值，我想for循环遍历中的值会非常简单`items`

编辑：

```
def entered(event):
    print listbox.selection_get() 
```

只会打印出列表框中的选择，我喜欢使用双击鼠标的原因是因为它更有可能是真实世界的使用，通常我使用双击并`<Return>`作为标准列表框控件，尤其是在使用中有多种选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:03:17.717

通常，当用户单击该项目时会选择该项目，并且会触发默认绑定。如果您想在发生这种情况后尽快将其打印出来（或执行其他任何操作），请在 event 上创建绑定`<<ListboxSelect>>`。此事件将在选择更改后立即生成，即使它是通过键盘更改的。

# sandbox - GKPlayer loadPhotoForSize：withCompletionHandler：沙盒连接错误

> ID：13811459
> 
> 赞同：2
> 
> 时间：2012-12-11T00:01:22.517
> 
> 标签：sandbox, game-center

我正在尝试使用 为游戏中心朋友获取头像，`loadPhotoForSize: withCompletionHandler:`但它一直在抛出`GKErrorDomain Code=3 "The requested operation could not be completed due to an error communicating with the server.`

这种方法在沙盒游戏中心上不起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T01:47:06.497

对我来说，如果播放器没有照片，它总是会出现此错误，但如果我添加照片，错误就会消失并正确加载照片。我只在沙盒中测试过这个，所以我不确定它在沙盒之外是否同样有效。

# php - 我未能在 PHP 表单中正确使用相对路径

> ID：13811462
> 
> 赞同：0
> 
> 时间：2012-12-11T00:01:43.093
> 
> 标签：php, file, file-upload, upload

我正在编写一段 PHP 来接收一个 excel 电子表格并将其聚合到数据库中。主要问题是我没有正确使用相对路径（我相信）。代码如下：

PHP.ini：

```
 ; Temporary directory for HTTP uploaded files (will use system default if not
    ; specified).
    ; http://php.net/upload-tmp-dir
    upload_tmp_dir = "C:\xampp\tmp" 
```

HTML 表单：

```
 <form action="Update_data.php" method="POST" enctype="multipart/form-data">
        <input type="file" name="file" id="file"></br>
        <INPUT type="submit" name="submit" value="Submit"></br>
    </form> 
```

PHP脚本的相关部分：

```
//This is where I believe my error to be; 
//The script is in xampp/htdocs/
//The temporary file that is uploaded should be? in xampp/tmp/
    $inputFileName = '../tmp/' . $_FILES['file']['name'];

//The following correctly outputs the file name when run
    echo 'Loading file ',pathinfo($inputFileName,PATHINFO_BASENAME),'<br />';

//The following is supposed to create a PHPExcel object out of the file, but it can't FIND the file =(
    $objPHPExcel = PHPExcel_IOFactory::load($inputFileName);
    $objWorksheet = $objPHPExcel->getActiveSheet(); 
```

另外，我尝试使用包含来包含 tmp 目录，但无济于事。我认为可能还值得注意的是，脚本本身有两个不同的部分，上面的代码在第二个中（第一个只是一些包含和错误的东西）。中间还有一点 HTML，但我认为这不相关。

谢谢。

PS：我已经在这里阅读了 ~8 个 PHP 文件上传和相对路径相关问题，但它们似乎无关。另外，我已经问过我的朋友（他是一个非常聪明的人，知道很多，他的名字叫谷歌），但他不会告诉我。我怀疑他知道答案，我只是没有问正确的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:13:58.497

$_FILES['file']['name'] 中有一个原始文件名

你应该使用 $_FILES['file']['tmp_name'] 没有任何路径和斜线在它前面，它已经有里面的完整路径：

```
$inputFileName = $_FILES['file']['tmp_name']; 
```

# scala - Scalaz - 结合 List 和 State Monad 进行理解

> ID：13811463
> 
> 赞同：7
> 
> 时间：2012-12-11T00:01:44.277
> 
> 标签：scala, monads, scalaz, monad-transformers, scalaz7

我计划开始在我的 Scala 代码中使用 Monadic 样式来处理线程状态等。这是一个结合 3 个单子函数的简化示例（并且只关心副作用）

```
import scalaz._
import Scalaz._

object MonadTest {
  def adder(i: Int) = State[String, Int] ({str: String => (str + i.toString + " ", i) })
  val oneTwoThreeMonad = for {
    m1 <- adder(1)
    m2 <- adder(2)
    m3 <- adder(3)
  } yield m3
  oneTwoThreeMonad("start: ")._1 //String = "start: 1 2 3 "
} 
```

这一切都是不言自明的，并且按预期工作。但是为了让这种方法对我真正有用，我希望能够将它与`List`理解结合起来。这是一些（不起作用的）代码来说明我的意思：

```
val list = List(1, 2, 3)

val oneTwoThreeBis = for {
  i <- list
  mx <- adder(i)
} yield mx 
```

基本上，我希望能够根据来自 a 的参数组合 monads `List`- 在 的每个元素上运行 monadic 函数，`list`并在我进行时累积副作用。我理解示例语法不起作用，我明白为什么它不起作用 - 我只是在寻找一个干净、优雅的等价物。

我很确定可以使用 scalaz monad 转换器来实现这一点，更具体地说，`StateT`但我不确定如何去做。

PS。我使用的是 Scalaz 7.0-M3，因此语法可能与最常见的 6.x 略有不同。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T00:23:31.163

我不确定我是否完全理解您在寻找什么，但听起来您想要更像`traverse`这里的东西（`traverse`Haskell's 的更通用版本在哪里`mapM`）：

```
import scalaz._, Scalaz._

def adder(i: Int) = State[String, Int](str => (str + i.toString + " ", i))

List(1, 2, 3).traverseS(adder)("start: ")._1 
```

这将按预期打印以下内容：

```
res0: String = "start: 1 2 3 " 
```

请注意，我使用`traverseS`（`S`代表`State`）来避免写出相当混乱的类型参数，但`traverse`在您想要将一元函数映射到可遍历的东西时更普遍有用。

如果这不是您想要的，我很乐意举一个`StateT`例子，但这最终会导致您拥有 type 的东西`List[(String, Int)]`。

# c# - 基于 FFT（已经）结果更准确地估计吉他音高频率

> ID：13811464
> 
> 赞同：0
> 
> 时间：2012-12-11T00:01:55.900
> 
> 标签：c#, windows-phone-7.1, fft, frequency

我使用 FFT 算法来检测声音的频率（吉他音高），当我从计算机播放正弦声音时效果很好，它会完美地估计它，但当我使用吉他时它不是那么完美。如何更好地估计音调频率？

```
double[] spectrum = FourierTransform.Spectrum(ref sampleBuffer);//spectrum contains data from FFT
double frequency = indexOfMax(spectrum) * 16000 / 500; //sampling rate/FFT size
//indexOfMax just finds the index of the maximum element in the array 
```

为了生成正弦波，我使用了：[http](http://www.audiocheck.net/audiofrequencysignalgenerator_sinetone.php) ://www.audiocheck.net/audiofrequencysignalgenerator_sinetone.php并从频谱阵列中找到最大值的这种波效果很好，但我正在寻找更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:36:58.357

对于吉他声音，音高检测/估计的一些可能性包括使用 FFT 结果作为计算倒谱的第一步，用于倒谱分析，或谐波积频谱分析，或通过 IFFT(FFT() * conjugate( FFT()))。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T02:17:45.443

乐器的自动音高确定并非易事。

看看这篇关于问题的倒谱方法的帖子：[乐器倒谱](https://stackoverflow.com/a/14843124/1984517)

# r - 在 R 中使用 T 统计量进行单面假设检验？

> ID：13811472
> 
> 赞同：3
> 
> 时间：2012-12-11T00:02:46.910
> 
> 标签：r, testing, statistics, normal-distribution

我想使用 t 统计量在 R 中测试以下假设并计算 p 值：

空假设：mu <= 50

备选：亩> 50

```
data = c(52.7, 53.9, 41.7, 71.5, 47.6, 55.1,
       62.2, 56.5, 33.4, 61.8, 54.3, 50.0, 
       45.3, 63.4, 53.9, 65.5, 66.6, 70.0,
       52.4, 38.6, 46.1, 44.4, 60.7, 56.4); 
```

这应该很容易，但我不知道该怎么做。感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T12:34:07.710

如果你`H0`等于：`mu<=50` 正确的命令是：

```
t.test(data, mu=50, alternative = 'greater') 
```

随`alternative`你定义`H1`。因此它是：`H1: mu > 50`。输出显示`p.value`、均值和`t-value`。就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-21T12:49:11.163

如果问题中的给定条件是正确的，那么我们使用单面测试。IE

```
t.test(data, alternative= "greater", mu=50) output = One Sample t-test 
```

**数据：**

```
data t = 2.1562, df = 23, p-value = 0.02088 
```

备择假设：真实均值大于 50 95% 置信区间： `50.88892` Inf 样本估计：x 的均值

```
54.33333 
```

conclusion is that in this p- value is less then 0.05 , so we reject null hypothesis. if in altenative hypothesis is not equal to 100, then we use alternative= "two.sided". everything is depend on the condition, sometime in question is already mentioned less or greater.

# ruby - 基于多个查询参数的相交数组

> ID：13811477
> 
> 赞同：0
> 
> 时间：2012-12-11T00:03:27.160
> 
> 标签：ruby, arrays, sinatra, params, query-parameters

`@data`, `@x`, `@y`, 和`@z`都是相同类型的数组。我在视图中使用@data 来遍历它并显示所有值。

```
 @data = if params[:a] == "1"
    @x
  elsif params[:b] == "1"
    @y 
  elsif params[:c] == "1"
    @z 
```

如果应用了多个参数，我想做的也是与数组相交。因此，例如，如果`?a=1&b=2`附加到 URL，那么我想`@data`等于`@x & @y`

我不确定如何编写这段代码——找出哪些参数 == 1 然后与相应的数组相交并将其存储在@data 中的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T00:12:18.543

幸运的是，Ruby 让这一切变得简单！

```
@data = [params[:a] && @x, params[:b] && @y, params[:c] && @z].compact.inject(:&) 
```

这构造了一个数组（如果参数存在；您可以检查`== '1'`是否要更具体）或 nils（如果不存在）。`compact`然后将 nils 从数组中删除，然后我们可以通过调用来与剩余的值相交`inject(:&)`。

该`inject`调用遍历您的值数组，获取第一个值，然后将`&`下一个值作为参数应用该方法。然后它获取结果并`&`与第三个参数一起应用，依此类推，产生一个最终值，它是传递数组中所有数组的交集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T00:11:05.063

那这个呢

```
key_to_array = {:a => @x, :b => @y, :c => @z}

@data = key_to_array.select { |k, _| params[k] == '1' }.values.inject(&:&) 
```

※ 不适用于 Ruby 1.8

# ios - 如何将图像从 uiimagepickercontroller 传递到另一个场景的 uiimageview

> ID：13811482
> 
> 赞同：4
> 
> 时间：2012-12-11T00:04:22.510
> 
> 标签：ios, iphone, objective-c, uiimagepickercontroller

如何保存`UIImagePickerController`相机图像以便发送到`CreateViewController`场景`UIImageView`？

`HomeViewController`（场景 1）有一个按钮，用于加载`UIImagePickerController`和返回来自相机的图像。`CreateViewController`（场景 2）有一个空的`UIImageView`.

**HomeViewController.h**

```
#import "CreateViewController.h"

@interface HomeViewController : UIViewController
<UIImagePickerControllerDelegate, UINavigationControllerDelegate>

@property (strong, nonatomic) UIImagePickerController *imagePicker;
@property(nonatomic, retain) UIImage *myImage;

- (IBAction)cameraImage:(id)sender; 
```

**主视图控制器.m**

```
@implementation HomeViewController
@synthesize imagePicker, myImage;

-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

if ( [segue.identifier isEqualToString:@"create"]) {
    CreateViewController *cvc = [segue destinationViewController];
    UIImage *image = myImage;
    cvc.myImage = image;

}
}

//Camera button action
- (IBAction)cameraImage:(id)sender{
//UIImagePickerController space in memory
imagePicker = [[UIImagePickerController alloc]init];
//Set the delegate
imagePicker.delegate = self;
//Set the sourceType
imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
//Show Image Picker UI
[self presentViewController:imagePicker animated:YES completion:^{}];
}

-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:    (NSDictionary *)info {

self.myImage = [info objectForKey:UIImagePickerControllerOriginalImage];

[self dismissViewControllerAnimated:YES completion:^{}];

[self performSegueWithIdentifier:@"create" sender:self];
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
[self dismissViewControllerAnimated:YES completion:^{}];
} 
```

**创建视图控制器.h**

```
@property (strong, nonatomic) IBOutlet UIImageView *bgImage;
@property(nonatomic, retain) UIImage *myImage; 
```

**创建视图控制器.m**

```
@implementation CreateViewController
@synthesize bgImage, myImage;

- (void)viewDidLoad
{
[super viewDidLoad];
UIImage *image = myImage;
[bgImage setImage:image];
} 
```

在此处下载示例代码；[http://code-blind.com/ios6-camera-picture-to-another-scenes-uiimageview/](http://code-blind.com/ios6-camera-picture-to-another-scenes-uiimageview/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T00:28:10.427

如果您以编程方式实例化控制器，则不需要使用 segue。

实现这一目标的最简单方法是

```
-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    [picker dismissViewControllerAnimated:YES completion:nil];
    UIImage * pickedImage = [info objectForKey:UIImagePickerControllerOriginalImage];
    DisplayViewController * controller = [DisplayViewController new];
    controller.imageView.image = pickedImage;
    [self.navigationController pushViewController:controller animated:YES];
} 
```

如果你想使用 segue，你需要手动调用它

```
[self performSegueWithIdentifier:@"your-segue-name" sender:self]; 
```

然后您可以在 HomeViewController 中使用 ivar 来存储并将其`pickedImage`传递给您的`destinationViewController`.

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {    
    DisplayViewController * controller = (DisplayViewController *)segue.destinationViewController;
    controller.imageView.image = _pickedImage;
} 
```

`_pickedImage`选择后存储图像的 ivar 在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:43:07.460

在你的第一眼

```
 - (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo
{
    CreateViewController* sI = [self.storyboard instantiateViewControllerWithIdentifier:@"XXXXX"];
    sI.myImage = image;
} 
```

XXXXXX 是视图的标识符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T00:10:16.680

首先，您必须确保调用了您的委托方法并且您拥有图像。接下来，将图像存储到属性中：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo {

    self.takenImage = image; // assuming you have declared @property(nonatomic, strong) UIImage *takenImage;
    [picker dismissViewControllerAnimated:YES completion:^{

        [self performSegueWithIdentifier:@"my-segue" sender:self];   
    }];

} 
```

之后，这个方法被调用：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    // you need to set the picked image to the controller:

    DisplayViewController *controller; // get the controller
    controller.image = self.takenImage;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-05T12:25:47.637

在这段代码中：

```
 - (void)imagePickerController:(UIImagePickerController *)picker     

      didFinishPickingMediaWithInfo:(NSDictionary *)info
     {
UIImage *image = [info objectForKey:UIImagePickerControllerEditedImage];

 if( i ==1)
 {

     [self dismissViewControllerAnimated:YES completion:^
      {
          Second_ViewController*secondview=[[UIStoryboard storyboardWithName:@"Main" bundle:nil]instantiateViewControllerWithIdentifier:@"Second_ViewController"];
          secondview.bb_image=image;
          [[NSUserDefaults standardUserDefaults ]setInteger:0 forKey:@"123"];

          [[self navigationController] pushViewController:secondview animated:YES];

      }];
 } 
```

# python - 获取图像的主色

> ID：13811483
> 
> 赞同：1
> 
> 时间：2012-12-11T00:04:25.037
> 
> 标签：python, image, colors, python-imaging-library

如何将图像的主色设为 rgb 或 hexcode？

我找到了一个名为[Color Thief](https://github.com/fengsp/color-thief-py)的脚本，但它不允许图像 URL 只有路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-26T15:05:26.017

如果您不想下载不必要的文件，请这样做：

```
# -*- coding: utf-8 -*-

import sys

if sys.version_info < (3, 0):
    from urllib2 import urlopen
else:
    from urllib.request import urlopen

import io

from colorthief import ColorThief

fd = urlopen('http://lokeshdhakar.com/projects/color-thief/img/photo1.jpg')
f = io.BytesIO(fd.read())
color_thief = ColorThief(f)
print(color_thief.get_color(quality=1))
print(color_thief.get_palette(quality=1)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-21T19:46:17.483

用于`urllib`先下载图片，然后删除不需要的文件：

```
from colorthief import ColorThief
import urllib
import os
def dominant_color_from_url(url,tmp_file='tmp.jpg'):
    '''Downloads ths image file and analyzes the dominant color'''
    urllib.urlretrieve(url, tmp_file)
    color_thief = ColorThief(tmp_file)
    dominant_color = color_thief.get_color(quality=1)
    os.remove(tmp_file)
    return dominant_color 
```

# android - 尝试在 Android jellybean 上实现 HDR

> ID：13811488
> 
> 赞同：0
> 
> 时间：2012-12-11T00:05:00.717
> 
> 标签：android, camera, scene, hdr

对于我的项目，我需要在装有 Android Jelly bean 的设备中实现 HDR 功能。从代码中，我看到，选择HDR（高动态范围）时，应用程序将Scee_Mode_HDR发送到HAL层。我是 Camera HAL 层的开发人员。当我得到场景模式 = SCENE_MODE_HDR 时我应该怎么做。我是否需要要求驱动程序提供 3 张具有不同曝光补偿值的图像，并且应用程序会负责拼接图像以制作 HDR 图像？或者像全景模式一样，android应用和框架层可以自己处理HDR？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:18:11.840

场景模式 = SCENE_MODE_HDR 似乎是从 Android Jelly Bean 4.2 引入的，据我所知，这里的 HDR 表示硬件 HDR，即由 Camera Vendor 实现。

我认为驱动程序需要处理这个，不仅要给出3张具有不同曝光补偿值的图像，还需要进行图像合成和色调映射。

所以从应用程序的角度来看，相机应用程序只需使用 SCENE_MODE_HDR 设置场景模式并拍照，然后在 onPictureTaken() 回调函数中输出 HDR 图像。

# delphi - 如何让 WebHelp 显示特定主题的帮助而不是索引？

> ID：13811493
> 
> 赞同：1
> 
> 时间：2012-12-11T00:05:36.083
> 
> 标签：delphi, lazarus

我正在为我的 Lazarus 应用程序添加帮助。我正在使用 WebHelp 而不是 CHM 帮助来帮助跨平台使用。

WebHelp 本质上使用框架集中的一对 html 页面 - 左侧是索引，右侧是相关主题。在网络浏览器的特定页面打开帮助系统，它被称为：

```
file:///path_to_help_files/index.htm#specific.htm 
```

按照[http://wiki.freepascal.org/Add_Help_to_Your_Application](http://wiki.freepascal.org/Add_Help_to_Your_Application)的说明，Lazarus 表单有一个 THTMLHelpDatabase 组件和一个 THTMLBrowserHelpViewer 组件。

各个组件的 HelpType 设置为 htKeyword，HelpKeyword 设置为 HTML/index.htm 或 HTML/index.htm#something.htm

无论我输入什么，帮助文件只在默认页面（即 index.htm）打开。

有人对如何在特定页面打开帮助页面有任何想法吗？

[我不能指定 HTML/something.htm 的 HelpKeyword，因为这样会省略主题索引。实际上，我必须通过 index.htm 才能显示框架集。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:13:57.483

我找到了一个解决方案，但它有点笨拙，所以如果有人有更好的主意，我想听听。

本质上，我为 something.html 创建了一个重定向，如下所示：

```
<!doctype html>
<html>
  <head>
    <title>Something</title>
    <meta http-equiv="REFRESH" content="0;url=index.htm#something.htm">
  </head>
  <body>
    Redirect to index.html
  </body>
</html> 
```

然后，我将相关的 Lazarus 控件指向 HelpKeyword 中的 HTML/something.html，以便在调用帮助时，它会重定向到正确的 URL。（是的，我使用 .html 扩展名进行重定向，而真实文件具有 .htm 扩展名 - 由帮助创作应用程序强制执行）。

真正的麻烦是我必须为帮助系统中的每个主题都有一个重定向文件，我想直接从 Lazarus 应用程序访问。

# c# - C# 中的 Windows 窗体自动调整大小

> ID：13811494
> 
> 赞同：0
> 
> 时间：2012-12-11T00:05:58.437
> 
> 标签：c#, .net, forms, resize, resolution

我正在使用 c# 开发一个 Windows 窗体应用程序。它有 mdi 父窗体和子窗体。我的开发环境分辨率是 1366 * 768。但我想开发这个应用程序以适应任何分辨率我该怎么做？例如（1024 * 768 等）

目前，我在 mdi parent 的表单加载事件中使用了以下几行。

```
 this.Location = Screen.PrimaryScreen.WorkingArea.Location;
 this.Size = Screen.PrimaryScreen.WorkingArea.Size; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:44:44.513

您遇到的控件不合适的问题可以通过锚定或对接控件来解决。通过这种方式，您可以决定何时缩小表格，孩子们会发生什么。以下是一些您可能会发现有用的教程：

[http://www.techotopia.com/index.php/Designing_Forms_in_C_Sharp_and_Visual_Studio](http://www.techotopia.com/index.php/Designing_Forms_in_C_Sharp_and_Visual_Studio) [http://msdn.microsoft.com/en-us/library/8y52cxte%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/8y52cxte%28v=vs.80%29.aspx) [http://www.devx。 com/dotnet/Article/6964/0/page/3](http://www.devx.com/dotnet/Article/6964/0/page/3) [http://www.techrepublic.com/article/manage-winform-controls-using-the-anchor-and-dock-properties/6165908](http://www.techrepublic.com/article/manage-winform-controls-using-the-anchor-and-dock-properties/6165908)

# ruby - 在循环中调用 `require` 只执行一次

> ID：13811495
> 
> 赞同：0
> 
> 时间：2012-12-11T00:06:00.053
> 
> 标签：ruby, require

我有一个脚本来运行目录中的所有测试，使用`require`; 我愿意：

```
Dir.files.each
... 
```

接着

```
require 'path'
... 
```

我尝试使用另一个循环来运行这些测试几次，传递不同的参数。我将参数放在一个数组中，然后遍历数组，然后运行与上面相同的代码以运行目录中的所有测试。在这个循环中，我打印一行：

```
puts executing tests for a[i] 
```

下一行是`require`运行一组测试的。问题是打印执行例如十次（十行一起打印），但`require`只在最后运行，只传递数组的最后一个元素。我尝试了不同的语句，它们都运行良好，所以我不认为这是循环中的问题；我认为是`require`. 我试过`load`了，但没有发现任何区别。'exec' 只运行集合中的第一个测试。有任何想法吗？

更多细节：

感谢您的回复！系统命令更接近我想要的 - 它为我运行所有测试。

我在下面有一个我正在尝试做的例子。当我在传递特定参数“a”后运行脚本时，我得到以下结果：

```
#### Run all tests for 'a' ####
Loaded suite
............................
Finished in 220.123 seconds 
```

如果我把我的论点放在一个数组中，例如。ar = ['a','b','c','d'] 我明白了

```
#### Run all tests for 'a' ####
#### Run all tests for 'b' ####
#### Run all tests for 'c' ####
#### Run all tests for 'd' ####
Loaded suite 
............................
Finished in 220.123 seconds 
```

IE。测试仅针对最后一个选项运行 (d)

如果我使用“系统”，每个文件都单独运行 - 这使得很难通过几次不同运行的 100 次测试的结果。

代码片段是：

```
 for i in 0 .. @ar.length-1 do
      puts'##  Running : '+ @ar[i] + '  ##' 
      Dir.entries('./suite_dir').each do | file |
          require './suite_dir/'+ file
      end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:13:30.850

不要使用`require`，它不是可执行的......它只能工作一次。

来自**[http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-require](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-require)**

> `require(name)`→ 真或假
> 
> 加载给定的名称，如果成功则返回 true，如果已加载功能则返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T07:19:17.133

您可以使用这样的东西来运行目录中的所有文件：

```
Dir.foreach(path) do |file|
  puts "Testing #{file}"
  system(path+file)
end 
```

# r - R - 使用覆盖和递归合并列表

> ID：13811501
> 
> 赞同：10
> 
> 时间：2012-12-11T00:06:11.210
> 
> 标签：r, list, recursion

假设我有两个名称列表，

```
a = list( a=1, b=2, c=list( d=1, e=2 ), d=list( a=1, b=2 ) )
b = list( a=2, c=list( e=1, f=2 ), d=3, e=2 ) 
```

我想递归地合并这些列表，如果第二个参数包含冲突的值，则覆盖条目。即预期的输出将是

```
$a
[1] 2

$b
[1] 2

$c
$c$d
[1] 1

$c$e
[1] 1

$c$f
[1] 2

$d
[1] 3

$e
[1] 2 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-06-16T10:22:41.003

我不太确定这里是否需要自定义功能。有一个功能`utils::modifyList()`可以执行完全相同的操作！有关详细信息，请参阅[修改列表](https://stat.ethz.ch/R-manual/R-devel/library/utils/html/modifyList.html)。

```
a <- list( a=1, b=2, c=list( d=1, e=2 ), d=list( a=1, b=2 ) )
b <- list( a=2, c=list( e=1, f=2 ), d=3, e=2 )

modifyList(a, b) # updates(modifies) 'a' with 'b' 
```

这给出了以下

```
$a
[1] 2

$b
[1] 2

$c
$c$d
[1] 1

$c$e
[1] 1

$c$f
[1] 2

$d
[1] 3

$e
[1] 2 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-11T00:24:43.780

我认为您必须在这里编写自己的递归函数。

一个接受两个列表的函数，`list1`和`list2`。如果：

*   `list1[[name]]`存在但不存在`list2[[name]]`，使用`list1[[name]]`；
*   `list1[[name]]`存在以及`list2[[name]]`两者都不是列表，使用`list2[[name]]`;
*   `list1[[name]]`否则，使用和`list2[[name]]`作为新列表进行递归。

就像是：

```
myMerge <- function (list1, list2) {
    allNames <- unique(c(names(list1), names(list2)))
    merged <- list1 # we will copy over/replace values from list2 as necessary
    for (x in allNames) {
        # convenience
        a <- list1[[x]]
        b <- list2[[x]]
        if (is.null(a)) {
            # only exists in list2, copy over
            merged[[x]] <- b
        } else if (is.list(a) && is.list(b)) {
            # recurse
            merged[[x]] <- myMerge(a, b)
        } else if (!is.null(b)) {
            # replace the list1 value with the list2 value (if it exists)
            merged[[x]] <- b
        }
    }
    return(merged)
} 
```

注意事项 - 如果您要合并的列表很奇怪，您可能会得到奇怪的输出。例如：

```
a <- list( a=list(a=1, b=2), b=3 )
b <- list( a=2 ) 
```

然后你的合并列表有`a=2, b=3`. 这是因为 from 的值`b$a`会覆盖 from 的值`a$a`，即使`a$a`是一个列表（您没有指定如果是这种情况会发生什么）。`myMerge`但是，修改以处理这些情况很简单。请记住 - 用于`is.list`测试它是否是一个列表，并查看列表中是否存在`is.null(myList$a)`条目。`a``myList`

* * *

这是使用的“矢量化”版本`sapply`：

```
merge.lists <- function(a, b) {
    a.names <- names(a)
    b.names <- names(b)
    m.names <- sort(unique(c(a.names, b.names)))
    sapply(m.names, function(i) {
        if (is.list(a[[i]]) & is.list(b[[i]])) merge.lists(a[[i]], b[[i]])
        else if (i %in% b.names) b[[i]]
        else a[[i]]
    }, simplify = FALSE)
} 
```

# wcf - 从命令行调用 wcf Web 服务 - 没有程序

> ID：13811503
> 
> 赞同：0
> 
> 时间：2012-12-11T00:06:24.823
> 
> 标签：wcf

有没有一种方法可以在 WCF 中调用 Web 方法，而无需编写应用程序或使用[WCF 中建议的 cURL - 可以使用参数从命令行调用 wcf 服务？](https://stackoverflow.com/questions/1520913/wcf-possible-to-call-a-wcf-service-from-the-command-line-with-parameters)?

我可以用 asmx 做到这一点。例如，我能够在 cmd 中启动：

```
> start http://myservice/abc.asmx/?op=DoSomething 
```

但在 WCF Web 服务上似乎不可能。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:11:44.970

这取决于您在 WCF 中使用的绑定。大多数 WCF 绑定都是基于 SOAP 的服务，这将需要生成复杂的有效负载，而这在使用 CURL 或浏览器时是不可行的。但是，如果您使用 WCF REST 绑定 (webHttpBinding) 并且对 HTTP 标头数据没有要求，您可以从命令行调用诸如服务之类的。

我想指出，WCF REST 已经被 ASP.NET WEB API 取代，成为创建基于 REST 的服务的首选方法。如果您对 WCF 没有其他业务用途，那么我会考虑将 Web API 作为替代方案。

# lisp - LISP 编程考试复习 Q

> ID：13811504
> 
> 赞同：1
> 
> 时间：2012-12-11T00:06:32.603
> 
> 标签：lisp, scheme, racket

使用内置的 map 和 zip 函数，定义一个 Scheme 函数 zipadd，它接受两个数字列表并返回由相加的相应元素组成的列表。您可以假设这些列表的长度相同。例如 (zipadd '(1 2 3) '(4 5 6)) 是 (5 7 9)。（不使用 zip 和 map 的正确解决方案将获得 8 分。）

我不知道该怎么做。我真的很想在明天考试前知道解决方案。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:22:27.337

对于初学者来说，Racket 没有附带`zip`程序，尽管实现一个程序很简单：

```
(define (zip lst1 lst2)
  (map list lst1 lst2)) 
```

现在关于您的问题 - 使用 only 的解决方案`map`是解决此问题的最简单方法，它与上述过程*非常*相似，只需想想可以用来填补空白的方法：

```
(define (zipadd lst1 lst2)
  (map <???> lst1 lst2)) 
```

虽然它有点做作，但您可以使用`zip`来达到相同的解决方案（并获得满分）。尝试弄清楚它是如何工作的 -`zip`将两个列表中的所有元素对粘在一起，创建一个双元素列表的列表。之后，`map`将遍历该列表并对每个元素应用一个过程（记住：每个元素是两个元素的列表），创建一个包含结果的新列表：

```
(define (zipadd lst1 lst2)
  (map (lambda (x) <???>) ; x is a list with two numbers, how to add them?
       (zip lst1 lst2))) 
```

最后，为了完整起见，一个不使用`map`or的解决方案`zip`。这是`map`两个列表上的数字必须成对添加的特殊情况的实现：

```
(define (zipadd lst1 lst2)
  (if <???>                         ; if either list is empty (*)
      <???>                         ; then return the empty list
      (cons (+ <???> <???>)         ; else add the first elements of both lists
            (zipadd <???> <???>)))) ; and advance the recursion over both lists 
```

(*) 请记住：假定两个列表具有相同的长度。

尝试编写解决方案的所有变体，比较解决同一问题的不同方法会很有趣。如果您*必须*使用`map`并`zip`获得满分，那么请务必使用上面的第二个版本，请注意这不是表达手头问题解决方案的最简单也不是最有效的方式。

# codeigniter - CodeIgniter 2 和 Ion Auth - 编辑自己的用户帐户

> ID：13811511
> 
> 赞同：5
> 
> 时间：2012-12-11T00:07:10.933
> 
> 标签：codeigniter, codeigniter-2, user-accounts, ion-auth

我正在使用最新的**Ion Auth**文件以及最新版本的**CodeIgniter 2**。

`edit_user`在`auth.php`Controller 文件中有一个函数被调用。此功能仅限“管理员”组内的成员使用，任何管理员都可以通过此 URL 使用该功能编辑*任何其他成员...*

```
/auth/edit_user/id 
```

问题是我没有看到任何允许普通（非管理员）用户编辑*自己的*帐户详细信息的控制器功能或视图。

这是我需要编写的新控制器函数（修改`edit_user`函数？）还是 Ion Auth 应该已经做的事情？如果是这样，怎么做？

这是控制器中包含的股票 Ion Auth`edit_user`功能...`auth.php`

```
function edit_user($id)
{
    $this->data['title'] = "Edit User";

    if (!$this->ion_auth->logged_in() || !$this->ion_auth->is_admin())
    {
        redirect('auth', 'refresh');
    }

    $user = $this->ion_auth->user($id)->row();

    //process the phone number
    if (isset($user->phone) && !empty($user->phone))
    {
        $user->phone = explode('-', $user->phone);
    }

    //validate form input
    $this->form_validation->set_rules('first_name', 'First Name', 'required|xss_clean');
    $this->form_validation->set_rules('last_name', 'Last Name', 'required|xss_clean');
    $this->form_validation->set_rules('phone1', 'First Part of Phone', 'required|xss_clean|min_length[3]|max_length[3]');
    $this->form_validation->set_rules('phone2', 'Second Part of Phone', 'required|xss_clean|min_length[3]|max_length[3]');
    $this->form_validation->set_rules('phone3', 'Third Part of Phone', 'required|xss_clean|min_length[4]|max_length[4]');
    $this->form_validation->set_rules('company', 'Company Name', 'required|xss_clean');

    if (isset($_POST) && !empty($_POST))
    {
        // do we have a valid request?
        if ($this->_valid_csrf_nonce() === FALSE || $id != $this->input->post('id'))
        {
            show_error('This form post did not pass our security checks.');
        }

        $data = array(
            'first_name' => $this->input->post('first_name'),
            'last_name'  => $this->input->post('last_name'),
            'company'    => $this->input->post('company'),
            'phone'      => $this->input->post('phone1') . '-' . $this->input->post('phone2') . '-' . $this->input->post('phone3'),
        );

        //update the password if it was posted
        if ($this->input->post('password'))
        {
            $this->form_validation->set_rules('password', 'Password', 'required|min_length[' . $this->config->item('min_password_length', 'ion_auth') . ']|max_length[' . $this->config->item('max_password_length', 'ion_auth') . ']|matches[password_confirm]');
            $this->form_validation->set_rules('password_confirm', 'Password Confirmation', 'required');

            $data['password'] = $this->input->post('password');
        }

        if ($this->form_validation->run() === TRUE)
        {
            $this->ion_auth->update($user->id, $data);

            //check to see if we are creating the user
            //redirect them back to the admin page
            $this->session->set_flashdata('message', "User Saved");
            redirect("auth", 'refresh');
        }
    }

    //display the edit user form
    $this->data['csrf'] = $this->_get_csrf_nonce();

    //set the flash data error message if there is one
    $this->data['message'] = (validation_errors() ? validation_errors() : ($this->ion_auth->errors() ? $this->ion_auth->errors() : $this->session->flashdata('message')));

    //pass the user to the view
    $this->data['user'] = $user;

    $this->data['first_name'] = array(
        'name'  => 'first_name',
        'id'    => 'first_name',
        'type'  => 'text',
        'value' => $this->form_validation->set_value('first_name', $user->first_name),
    );
    $this->data['last_name'] = array(
        'name'  => 'last_name',
        'id'    => 'last_name',
        'type'  => 'text',
        'value' => $this->form_validation->set_value('last_name', $user->last_name),
    );
    $this->data['company'] = array(
        'name'  => 'company',
        'id'    => 'company',
        'type'  => 'text',
        'value' => $this->form_validation->set_value('company', $user->company),
    );
    $this->data['phone1'] = array(
        'name'  => 'phone1',
        'id'    => 'phone1',
        'type'  => 'text',
        'value' => $this->form_validation->set_value('phone1', $user->phone[0]),
    );
    $this->data['phone2'] = array(
        'name'  => 'phone2',
        'id'    => 'phone2',
        'type'  => 'text',
        'value' => $this->form_validation->set_value('phone2', $user->phone[1]),
    );
    $this->data['phone3'] = array(
        'name'  => 'phone3',
        'id'    => 'phone3',
        'type'  => 'text',
        'value' => $this->form_validation->set_value('phone3', $user->phone[2]),
    );
    $this->data['password'] = array(
        'name' => 'password',
        'id'   => 'password',
        'type' => 'password'
    );
    $this->data['password_confirm'] = array(
        'name' => 'password_confirm',
        'id'   => 'password_confirm',
        'type' => 'password'
    );

    $this->load->view('auth/edit_user', $this->data);       
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T00:22:52.477

除非我遗漏了什么，否则我最终修改了Controller 中的`edit_user`函数`auth.php`，如下所示。

我更改了这一行，在将用户转出之前检查用户是否*“未登录”*或*“不是管理员”* ...

```
if (!$this->ion_auth->logged_in() || !$this->ion_auth->is_admin())
{
    redirect('auth', 'refresh');
} 
```

...进入这一点，在将用户转储之前检查用户是否*“未登录”*或（*“不是管理员”*和*“不是用户” ）...*

```
if (!$this->ion_auth->logged_in() || (!$this->ion_auth->is_admin() && !($this->ion_auth->user()->row()->id == $id))) 
```

这似乎工作......

*   管理员可以编辑所有帐户
*   用户只能编辑自己的帐户
*   并且有人没有登录，无法编辑任何帐户。

* * *

**编辑**：但是，用户也可以访问“组”设置，并且可以简单地将自己放入“管理员”组。不好。

Ion Auth 的开发人员将他提供的文件称为工作“示例”。因此，最终开发人员可以编辑 Ion Auth 以满足项目的需要。

为了防止用户能够使自己成为“管理员”，需要对`edit_user.php`视图文件进行简单的更改。

在创建复选框之前验证用户已经是“管理员”...

```
<?php if ($this->ion_auth->is_admin()): ?>

    // code that generates Groups checkboxes

<?php endif ?> 
```

然后，您还需要根据需要进行彻底的测试和调整。例如，在编辑用户配置文件后，您将被重定向到`auth`视图。由于用户无权`auth`查看视图，因此出现“必须是管理员”错误。在控制器文件中，您必须添加适当的逻辑以在用户不是“管理员”时正确重定向用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T00:19:52.417

No Ion Auth 不会按原样执行此操作 - 它的重量很轻。但这并不难做到，而且您走在正确的轨道上，只需抓住该 edit_user 方法并取出管理员检查并进行设置，以便用户只能编辑自己的帐户，只需对其进行更改，使其仅更新当前的用户详细信息登录用户。

检查 ion auth 文档，对其进行破解，如果您有任何问题，请返回一些代码。

# php - 使用 phprc 更改 php.ini 值

> ID：13811515
> 
> 赞同：0
> 
> 时间：2012-12-11T00:07:59.550
> 
> 标签：php

嗨，我目前正在使用 phprc txt 文件（目录是 home/username/.php/5.3/）将几个 php.ini 值更改为：

```
allow_call_time_pass_reference = ON
session.use_only_cookies = 0 
```

这些更改不会反映在网站上。有没有可能他们正在被检查？我还希望将 .ini 文件更改为自身，它不在根目录中，/etc 也不在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:00:04.237

鉴于您的目录路径，我将假设您在 Dreamhost 上或已看到 Dreamhost 用户的说明？如果您在 Dreamhost 上尝试使用它，则该文件必须是`phprc`，没有扩展名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-17T01:47:00.143

创建 phprc 后，您需要重新启动 apache。但是在dreamhost上你不能，所以让这个工作的唯一方法是提交一张票。

# javascript - 定制的对数 d3 图表

> ID：13811518
> 
> 赞同：0
> 
> 时间：2012-12-11T00:08:19.303
> 
> 标签：javascript, d3.js

我正在尝试使用对数刻度（1,10,100 ..）创建一个 d3 图表。我使用了他们的功能和调用但没有太大帮助。

```
var x = d3.scale.log()
    .domain([1,10])
    .range([0, width]);

var y = d3.scale.log()
    .domain([1,10])
    .range([height, 0]);

var color = d3.scale.category10();

var xAxis = d3.svg.axis()
    .scale(x)   
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)   
    .orient("left");

var line = d3.svg.line()
    .x(function(d) { return x(d[xAxxis]); })
    .y(function(d) { return y(d[yAxxis]); });
var svg = d3.select("#"+this.divid).append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

x.domain(d3.extent(totalArray, function(d) { return d[xAxxis]; })).nice(); 
y.domain(d3.extent(totalArray, function(d) { return d[yAxxis]; })).nice(); 
```

有什么办法可以用 1e+0,10e+0,100e+0 而不是 1e+0,2e+0,3e+0 创建轴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:40:10.840

您可以使用`tick()`or`tickValues()`方法控制轴呈现的标签，具体取决于您要如何进行。有关详细信息，请参阅[d3 的 API 文档](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-ticks)。另外，请注意，对数刻度的`tick()`方法[不带参数](https://github.com/mbostock/d3/wiki/Quantitative-Scales#wiki-log_ticks)，因此您可能不得不使用其他方法，`tickValues()`尽管其他方法可能会派上用场进行格式化。

# php - 使用正则表达式替换名称元素

> ID：13811527
> 
> 赞同：0
> 
> 时间：2012-12-11T00:08:49.713
> 
> 标签：php, regex

我试图在变量的名称属性中用这个“iwdnowfreedom_body_style_var”替换这个“iwdnowfreedom [body_style] [var]”。可能有几个数组键，但就我的情况而言，将它们剥离应该不会导致任何问题。

这是我到目前为止的代码：

```
$pattern = '/name\\s*=\\s*["\'](.*?)["\']/i';
$replacement = 'name="$2"';
$fixedOutput = preg_replace($pattern, $replacement, $input);

return $fixedOutput; 
```

我该如何解决这个问题才能正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:13:11.147

您可以尝试使用 str_replace 函数中的构建来实现您正在寻找的内容（假设没有像“test [test [key]]”这样的嵌套括号）：

```
$str = "iwdnowfreedom[body_style][var]";
echo trim( str_replace(array("][", "[", "]"), "_", $str), "_" ); 
```

或者如果您更喜欢正则表达式（嵌套括号可以很好地使用此方法）：

```
$input = "iwdnowfreedom[body_style][var]";
$pattern = '/(\[+\]+|\]+\[+|\[+|\]+)/i';
$replacement = '_';
$fixedOutput = trim( preg_replace($pattern, $replacement, $input), "_" );

echo $fixedOutput; 
```

我认为您还意味着您可能有一个字符串，例如

```
<input id="blah" name="test[hello]" /> 
```

并解析 name 属性，您可以这样做：

```
function parseNameAttribute($str)
{
    $pos = strpos($str, 'name="');

    if ($pos !== false)
    {
        $pos += 6; // move 6 characters forward to remove the 'name="' part

        $endPos = strpos($str, '"', $pos); // find the next quote after the name="

        if ($endPos !== false)
        {
            $name = substr($str, $pos, $endPos - $pos); // cut between name=" and the following "

            return trim(preg_replace('/(\[+\]+|\]+\[+|\[+|\]+)/i', '_', $name), '_');
        }
    }

    return "";
} 
```

或者

```
function parseNameAttribute($str)
{
    if (preg_match('/name="(.+?)"/', $str, $matches))
    {
        return trim(preg_replace('/(\[+\]+|\]+\[+|\[+|\]+)/i', '_', $matches[1]), '_');
    }

    return "";
} 
```

# ruby - Ruby-如何构建多值哈希？

> ID：13811528
> 
> 赞同：2
> 
> 时间：2012-12-11T00:08:51.440
> 
> 标签：ruby, hash

这是我的代码片段：

```
something_1.each do |i|
    something_2.each do |j|
      Data.each do |data|
       date = data.attribute('TIME_PERIOD').text
       value = data.attribute('OBS_VALUE').text
       date_value_hash[date] = value
     end
    end
  end 
```

我想在一个日期中捕获所有值。date 是我的哈希的键，它可能有多个值用于单个日期。我怎样才能在这里做到这一点？当我使用这条线时：

```
date_value_hash[date] = value 
```

每次循环迭代时，值都会被替换。但是，我想为每个日期累积我的 date_value_hash 中的所有值，即我想动态地构建这些值。

目前我得到这个：

```
{"1990"=>"1", "1994"=>"2", "1998"=>"0"} 
```

但是，我想要这样的东西：

```
{"1990"=>"1,2,3,4,5,6", "1994"=>"1,2,3,4,5,6", "1998"=>"1,2,3,4,5,6"} 
```

任何人都知道我该如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T00:17:14.390

像这样

```
magic = Hash.new{|h,k|h[k]=[]}
magic["1990"] << "A"
magic["1990"] << "B"
magic["1994"] << "C"
magic["1998"] << "D"
magic["1994"] << "F" 
```

之后`magic`是

```
{"1998"=>["D"], "1994"=>["C", "F"], "1990"=>["A", "B"]} 
```

如果您需要将值作为逗号分隔的字符串（如您的示例数据所示），您只需将它们访问为

```
magic['1990'].join(',') 
```

产生

```
"A,B" 
```

如果稍后您想传递`magic`并阻止它自动创建密钥，只需将其包装如下

```
hash = Hash.new.update(magic) 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-10T02:49:54.117

在 Ruby 中构建多值哈希的另一种方法：

```
h = {}
(h[:key] ||= []) << "value 1"
(h[:key] ||= []) << "value 2"
puts h 
```

# objective-c - iOS6 ] 在加载和显示当前视图之前跳转到另一个视图

> ID：13811532
> 
> 赞同：0
> 
> 时间：2012-12-11T00:09:50.743
> 
> 标签：objective-c, ios, uiviewcontroller, ios6

所以这就是我的软件应该如何运行。

我有一个协议视图控制器，它将在运行软件之前显示并询问用户是否同意我们的政策。一旦用户通过按下“同意”按钮同意，它就会消失并且永远不会再次显示给他们。

问题是我必须在加载视图之前检查他们是否先前同意，并决定程序是否可以跳过协议页面......我不知道在哪里做。

viewDidLoad() 绝对不是在加载视图后调用它的唯一原因。我尝试使用 iniWithCoder() 并没有运气。我尝试使用 didfinishlaunchingwithoptions() 但故事板似乎没有调用它:( ...

对我有什么建议吗？

在等待您的建议时，我将在 iOS 开发人员库中进行挖掘。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:24:43.870

你应该做的是在 NSUserDefaults 中记录他们点击页面的事实。从下次开始检查 NSUserDefaults，如果它存在，不要显示页面。

一些示例代码，您可以放入 App Delegate 或视图控制器逻辑中。

```
if([[NSUserDefaults standardUserDefaults] valueForKey:@"visited"]){
    NSLog(@"Second time visitor");
}else{
    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"visited"];
    NSLog(@"First time visitor");
}

[[NSUserDefaults standardUserDefaults] synchronize]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T00:23:45.697

您在 AppDelegate.m 中选择视图控制器。检查存储在 NSUserDefaults 中的值后尝试此操作：

[有条件地从 AppDelegate 故事板中的不同位置开始](https://stackoverflow.com/questions/8451975/conditionally-start-at-different-places-in-storyboard-from-appdelegate)

# wcf - 从 wcf 消息创建 FaultException

> ID：13811535
> 
> 赞同：0
> 
> 时间：2012-12-11T00:10:22.303
> 
> 标签：wcf

我有一个基于 wcf 的系统，它使用 IRequestChannel 通过通道发送原始 WCF 消息。虽然服务合同不提前知道，但故障合同是已知的，所以我知道每次有故障消息时，它应该映射到 FaultException 类型。

此外，我们使用 XmlSerializer 作为序列化程序，因为 DCS 非常挑剔..

例如下面

```
 var requestChannel = this.GetRequestChannel();
 using (requestChannel as IDisposable)
 {
       responseMessage = requestChannel.Request(requestMessage);
  }
  if (responseMessage.IsFault)
  {
        throw new ApplicationException("Fault");                
  } 
```

有没有办法从消息中创建通用故障异常实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:42:42.863

将故障合约添加到您的 WCF 操作合约中：

```
[ServiceContract()]
public interface IService
{
    [OperationContract]
    [FaultContract(typeof(MyFaultException))]
    string GetMessage();
} 
```

然后当你有一个错误抛出一个错误异常：

```
MyFaultException theFault = new MyFaultException();
heFault.Reason = "Some Error Message";
throw new FaultException<MyFaultException>(theFault); 
```

# javascript - 如何延迟基本的 HTML 工具提示？

> ID：13811538
> 
> 赞同：5
> 
> 时间：2012-12-11T00:10:42.087
> 
> 标签：javascript, html, css, tooltip, delay

我想知道是否有任何方法可以延迟经典的 HTML 工具提示（请不要使用 qTip 之类的 jQuery 插件）。它只是一个按钮：

```
<input type="button" title="Click" value="My Button"> 
```

我想知道是否有任何方法可以使用纯 JavaScript 或客户端脚本来延迟标题。根据我的研究，这似乎是不可能的，因为它是实际操作系统的 GUI 编程的一部分，无法通过浏览器脚本访问，但如果有任何我还没有遇到的方法，我很想知道！谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T00:12:55.577

浏览器控制工具提示。如果您想进行任何更改，则必须创建自己的更改。也许通过使用您提到的插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T00:14:57.730

这是您无法使用 HTML、CSS 或 JavaScript 操作的系统功能。
请记住，不同的操作系统对这些工具提示有不同的延迟和样式设置，考虑更好地控制（延迟、样式、动画等）的最佳选择是实现您自己的工具提示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-02T12:30:16.167

我迟到了 7 年多，但偶然发现了同样的愿望，并编写了一个简单的解决方案来使用 CSS 延迟工具提示。

只需使用过渡延迟或动画关键帧来实现不透明度。虽然过渡延迟是最简单的，但它存在延迟进出悬停反应的麻烦，afaik。动画绕过了它，只会延迟开始，例如：

.html 部分...

```
<div class="tooltip"><span class="tooltiptext">delayed tip</span>Example</div> 
```

.css...

```
/* Tooltip container */
.tooltip {
  position: relative;
  display: inline-block;
}

/* Tooltip text */
.tooltip {
  position: relative;
  display: inline-block;
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: 120px;
  background-color: #444;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px 0;

  /* Position the tooltip */
  position: absolute;
  z-index: 1;
  top: 0;
  left: 105%;

  opacity: 0;
  transition: opacity 1s;
}
.tooltip .tooltiptext::after {
  content: " ";
  position: absolute;
  top: 50%;
  right: 100%; /* To the left of the tooltip */
  margin-top: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent #545 transparent transparent;
}
/*this is the IMPORTANT bit: hover with animation*/
.tooltip:hover .tooltiptext {
  visibility: visible;
  animation: tooltipkeys 1s 1; //here just change the 1s to you desired delay time!
  opacity: 1;
}
@-webkit-keyframes tooltipkeys{ 0%   {opacity: 0;} 75%  {opacity: 0;} 100% {opacity: 1;} }
@-moz-keyframes tooltipkeys{ 0%   {opacity: 0;} 75%  {opacity: 0;} 100% {opacity: 1;} }
@-o-keyframes tooltipkeys{ 0%   {opacity: 0;} 75%  {opacity: 0;} 100% {opacity: 1;} }
@keyframes tooltipkeys { 0%   {opacity: 0;} 75%  {opacity: 0;} 100% {opacity: 1;} } 
```

我在 StackOverflow 上还是有点笨拙。不太清楚我的格式在哪里横向移动，但预览看起来不错。请原谅我，如果有什么不对劲。有关工具提示的更多提示，您应该查看 w3 学校并提供大量好的建议。

# php - PHP脚本删除零字节文件

> ID：13811539
> 
> 赞同：1
> 
> 时间：2012-12-11T00:10:48.967
> 
> 标签：php, file, byte, delete-file, zero

我遇到了零字节文件的问题。有时，我正在使用的服务器似乎随机地将零字节文件添加到目录中。这些文件破坏了另一个脚本。我可以毫无问题地手动删除文件，但由于服务器上的控制非常严格，我无法执行诸如运行批处理脚本或 cron 作业之类的操作。

我认为我需要的是首页（实际上是唯一的页面）上的一个小脚本，每次有人访问时都会运行一个脚本。它不会获得巨大的流量。该脚本将针对特定目录并删除零字节文件。

我一直在尝试像查找和显示文件大小这样基本的东西，但我运气不佳。我什至在网上搜索过类似问题的解决方案，但我没有找到任何东西。

我不希望您为我编写代码（尽管我不会拒绝它！;)），但是如果有人可以用一种简单的方法帮助我，甚至只显示零字节文件名，我可能会能够从那里自行进行。我只是找不到对我有意义的方法。很抱歉，我基本上无法控制服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:13:44.020

您可以使用`DirectoryIterator`class 循环遍历指定目录中的文件和`unlink()`它们。

# javascript - 如何更改 Morris.js 图表中的标签颜色？

> ID：13811542
> 
> 赞同：2
> 
> 时间：2012-12-11T00:11:14.890
> 
> 标签：javascript, html, graph, morris.js

我正在使用 morris.js 图表，这些图表非常容易设置，但我无法在渲染甜甜圈图时练习如何更改标签的颜色。默认情况下，它以黑色打印它们，但我希望将图形放在深色背景之上。

有谁知道如何更改标签颜色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-09T06:49:24.770

```
<div id="bar-chart" class="morris-chart" style="height: 180px"></div>

.morris-chart text {
  fill: white;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-19T15:26:32.260

要更改标签颜色，只需将`labelColor`属性添加到 Morris.Donut 配置对象，如下所示

```
Morris.Donut({
  labelColor: '#FFF'
}); 
```

# rest - 如何使用具有节点引用字段的 drupal RESTful Web 服务创建节点？

> ID：13811544
> 
> 赞同：1
> 
> 时间：2012-12-11T00:11:23.453
> 
> 标签：rest, drupal, backbone.js

我正在使用 ethanw 的 Drupal Backbone 模块和提供 API 的 Restful Web Services 模块。我可以从我的 Drupal 数据库中获取节点，并创建一个节点，但无法设置节点引用字段。

有谁知道这个的 JSON 语法/结构？我已经尝试了很多配置，我的心是：

“field_tutorials_reference_q”：{“nid”：“191”}

但这以及我尝试过的所有其他方法都行不通。此外，为了使事情复杂化，我正在使用相应的节点引用，但这只是一个奖励，如果我可以在一个特定的节点类型上设置一个节点引用字段，我就可以解决！

我是否需要设置自己的自定义 toJSON 处理器或其他东西？真的很沮丧，一直在做这件事，现在终于奏效了，这最后一个障碍可能会让我倒退，并为我网站的支持 Backbone.js 的部分选择并行的 Node.js + Express + Mongo 配置。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-09T05:21:05.337

试试这个：“field_tutorials_reference_q”：{“target_id”：“191”，“entity_type”：“node”}

# ios - 方向改变后放置方法的理想位置

> ID：13811547
> 
> 赞同：0
> 
> 时间：2012-12-11T00:11:42.850
> 
> 标签：ios, methods, orientation, autorotate

我有一个问题，这是怎么回事，

我有一个带有子视图的视图，子视图是有条件地加载的，只有当父视图 setHidden 属性设置为 YES 时；

类似 [parentView setHidden:YES] 和 if([parentView isHidden]),

我想在方向改变时调用一个方法，这就是上面引用的片段，但我观察到方法**shouldAutorotateToInterfaceOrientation**在加载期间被调用 4 次，在运行时被调用 2 次，因为该方法被调用不止一次，我怎么能可能*理想地*实现方法调用，因为苹果的现有方法似乎没有让我直观地将我的自定义方法调用与现有方法一起使用。

如果我要**破解**这个东西，这是有可能的，但是在诉诸未来只会给我带来更多麻烦而不是好处的事情之前，有人可能会有更好的主意。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:18:21.323

你试过吗

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 
                                         duration:(NSTimeInterval)duration {
    // check here for your desired rotation
} 
```

# tortoisesvn - Tortoise SVN - 更新到旧版本，进行更改并将其级联到 HEAD

> ID：13811550
> 
> 赞同：1
> 
> 时间：2012-12-11T00:11:50.213
> 
> 标签：tortoisesvn

我想知道是否可以使用 Tortoise SVN

1.  将工作副本更新为旧版本
2.  进行一些更改并提交。
3.  回到 HEAD
4.  合并步骤 2 中提交的更改。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:10:47.463

不，这不可能 - 从第 2 步开始

```
svn ci -m "123"
Sending        file.txt
svn: E155011: Commit failed (details follow):
svn: E155011: File 'Z:\wc\file.txt' is out of date
svn: E160028: File '/trunk/file.txt' is out of date 
```

**厕所：**

```
svn log -q
------------------------------------------------------------------------
r4 | Badger | 2012-12-11 06:53:57 +0600 (Вт, 11 дек 2012)
------------------------------------------------------------------------
r3 | Badger | 2012-12-11 06:53:32 +0600 (Вт, 11 дек 2012)
------------------------------------------------------------------------
r2 | Badger | 2012-12-11 06:53:09 +0600 (Вт, 11 дек 2012)
------------------------------------------------------------------------
r1 | Badger | 2012-12-11 06:50:27 +0600 (Вт, 11 дек 2012)
------------------------------------------------------------------------ 
```

**回购：**

```
svn log -q file:///Z:/repo
------------------------------------------------------------------------
r7 | Badger | 2012-12-11 06:58:43 +0600 (Вт, 11 дек 2012)
------------------------------------------------------------------------
r6 | Badger | 2012-12-11 06:56:00 +0600 (Вт, 11 дек 2012)
------------------------------------------------------------------------
r5 | Badger | 2012-12-11 06:54:31 +0600 (Вт, 11 дек 2012)
------------------------------------------------------------------------
r4 | Badger | 2012-12-11 06:53:57 +0600 (Вт, 11 дек 2012)
------------------------------------------------------------------------
r3 | Badger | 2012-12-11 06:53:32 +0600 (Вт, 11 дек 2012)
------------------------------------------------------------------------
r2 | Badger | 2012-12-11 06:53:09 +0600 (Вт, 11 дек 2012)
------------------------------------------------------------------------
r1 | Badger | 2012-12-11 06:50:27 +0600 (Вт, 11 дек 2012)
------------------------------------------------------------------------ 
```

**说明（简短版）**

颠覆历史是线性的（节点内部），而不是 DAG，即 - 所有更改都必须出现在 HEAD 状态之后并基于 HEAD 状态。更新到该版本的一些旧版本和编辑源后，以保存和整合您所做的更改

*   `svn up to HEAD`（并将本地更改与 HEAD 合并），使用合并结果提交新修订

或者

*   切换到任何其他（新）树（分支），提交分支，将分支与旧树合并

# c# - 按钮点击频率阵列

> ID：13811552
> 
> 赞同：0
> 
> 时间：2012-12-11T00:11:59.150
> 
> 标签：c#, arrays, button, listbox, frequency

我需要制作一个`ListBox`显示 a`Button`被点击的频率。

用户选择可以点击的按钮数量。这是我尝试过的：

```
int clicked;

clicked = int.Parse(((Button)(sender)).Text);

freq_array[clicked]++;

for (int i = 0; i < freq_array[clicked]; i++)
    lstFrequencies.Items[clicked] = clicked + "\t\t" + freq_array[clicked]; 
```

`freq_array`使用“clicked”变量来增加按钮被点击的频率。或者，它应该是。

当我调试它时，“点击”总是为 0。我希望“点击”等于被点击按钮的文本值。当我尝试运行该程序时，我收到一条错误消息，提示“输入字符串的格式不正确。”

编辑：

在你们的帮助下，我能够修复我的程序。我意识到我没有展示足够多的代码以使其足够清晰，对此我深表歉意。我不得不添加一些东西并移动一些东西并很快得到它。谢谢你们。

以下代码仅供将来可能需要帮助的人使用：

```
 public partial class Form1 : Form
{
    int[] freq_array = new int[11];
    int[] numList = new int[11];
    int oBase = 0;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        invisiblity();
    }

    private void invisiblity()
    {
        foreach (Control ctrl in this.Controls)
        {
            if (ctrl is Button)
                if (Char.IsDigit(ctrl.Text[0]))
                    ctrl.Visible = false;
        }
    }

    private void btnSetBase_Click(object sender, EventArgs e)
    {
        Form2 frmDialog = new Form2();
        frmDialog.ShowDialog(this);

        if (frmDialog.DialogResult == DialogResult.OK)
        {
            oBase = frmDialog.Base;
            //lblOutDigits.Text = oBase.ToString();

            for (int i = 0; i < oBase; i++)
            {
                numList[i] = i;
            }
        }

        ShowBaseButtons(oBase);
    }

    private void ShowBaseButtons(int last_digit)
    {
        invisiblity();

        foreach (Control ctrl in this.Controls)
        {
            if (ctrl is Button)
                if (Char.IsDigit(ctrl.Text[0]))
                    if (int.Parse(ctrl.Text) <= last_digit - 1)
                        ctrl.Visible = true;
        }
    }

    private void btnN_Click(object sender, EventArgs e)
    {
        lblOutDigits.Text += ((Button)(sender)).Text;

        int clicked = int.Parse(((Button)(sender)).Text);

        freq_array[clicked]++;
    }

    private void btnShowFreq_Click(object sender, EventArgs e)
    {
        lstFrequencies.Items.Clear();

        for (int i = 0; i < oBase; i++)
        lstFrequencies.Items.Add(numList[i] + "  \t\t\t" + freq_array[i]);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:28:09.943

只要您的按钮文本实际上只是一个数字，您的代码就应该可以工作。由于您要做的是创建索引，我通常做的是使用`Tag`控件的属性，将其设置为我想要在设计器中的索引，然后将其转换为 Int。

IE

```
if (int.TryParse(((Button)sender).Tag.ToString(), out clicked))
    freq_array[clicked]++; 
```

* * *

我相信正在发生的事情是你没有初始化你的 ListBox，这个示例代码确实使用你的初始方法工作。只需创建一个新表单并将其粘贴并进行测试。

```
public partial class Form1 : Form
{
    ListBox lstFrequencies = new ListBox();
    int[] freq_array = new int[10];
    public Form1()
    {
        InitializeComponent();
        Size = new Size(400, 400);
        lstFrequencies.Location = new Point(150, 0);
        lstFrequencies.Size = new Size(150, 200);
        Controls.Add(lstFrequencies);
        int top = 0;
        for (int i = 0; i < 10; i++)
        {
            Button btn = new Button();
            btn.Size = new Size(70, 30);
            btn.Location = new Point(5, top);
            Controls.Add(btn);
            top += 35;
            btn.Tag = i;
            btn.Text = i.ToString();
            btn.Click += new EventHandler(btn_Click);
            lstFrequencies.Items.Add(i.ToString());
        }

    }

    void btn_Click(object sender, EventArgs e)
    {
        int clicked;

        clicked = int.Parse(((Button)(sender)).Text);

        freq_array[clicked]++;

        lstFrequencies.Items[clicked] = clicked + "\t\t" + freq_array[clicked]; //Cleaned up you do not need to iterate your list

        // Using my example code

        //if (int.TryParse(((Button)sender).Tag.ToString(), out clicked))
        //{
        //    freq_array[clicked]++;
        //    lstFrequencies.Items[clicked] = clicked + "\t\t" + freq_array[clicked];
        //} 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:54:53.623

您的代码始终为 0，因为您从未将上次单击的值分配给按钮文本。试试这个代码：

```
int clicked = 0;
private void button1_Click(object sender, EventArgs e)
{
    clicked = Convert.ToInt32(((Button)sender).Text);
    lstFrequencies.Items.Add(((Button)sender).Name + " " + ++clicked);
    button1.Text = clicked.ToString();  // you lose this line

} 
```

编辑：来自变量成员的计数器

```
int clicked = 0;
private void button1_Click(object sender, EventArgs e)
{
   // if you want to display button name, change .Text to .Name
   lstFrequencies.Items.Add(((Button)sender).Text + " " + ++clicked);

} 
```

# php - 重复的表单条目：如何发送到 mysql 数据库

> ID：13811557
> 
> 赞同：0
> 
> 时间：2012-12-11T00:12:52.470
> 
> 标签：php, html, forms, post, get

我有一个页面，用户可以在其中创建食谱。我有一个 javascript 脚本，允许用户继续添加表单输入元素以获取更多成分。假设配方有 4 种成分，用户可以继续添加输入。但是，这会将输入 ID/名称的 id 更改为成分 1/2/3/4，我无法理解如何绕过从表单发布中获取信息，因为元素的数量取决于用户的判断。您将如何将结果加载到 PHP 变量中，然后将它们插入到 mysql 查询中。

html 表单的语法

```
<div id="ingredient1" class="clonedInput">
                <h2 class="first-column">Ingredient</h2>
                <span style="float:left; padding-right: 10px;">
                <input type="text" name="scroll" value="Add Ingredient" id="ingredient" class="ingredient"/>
                </span>
</div> 
```

为了添加目的 2 成分，成分 1 将更改为成分 2。

一个稍微令人困惑的问题，所以任何帮助都会很棒！

JB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:16:51.600

I think what you are looking for is using `[]` in your input element names. This will post the data as an array. So, say you have this as your form's ingredient input elements (after javascript has added several):

```
<input type="text" name="ingredients[]" value="" />
<input type="text" name="ingredients[]" value="" />
<input type="text" name="ingredients[]" value="" />
<input type="text" name="ingredients[]" value="" />
<input type="text" name="ingredients[]" value="" /> 
```

When the user POST's the data, you will be able to access the array of ingredients at `$_POST['ingredients']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:22:26.657

I will tell you the logic, not the code as only javascript here would not be enough.

1.  you create a table ingredients. Anything you can allow them to use. id, ecc
2.  while posting, instead of doing giving the user a freedom chosing their ingredient1, ingredient2 ... you do load from ingredients table the values and index them as ingredient[id_from_db] ecc..
3.  you create a table recipe. It should have a unique id, its description
4.  you create a relation table recipe_id, ingredient_id

then when the user post its data you create 1 row in the recipe and as many rows in the relation table as the ingredients they use.

When selecting later the recipe you also select everything which is in the relation table, it could be several rows there...

Hope it is of any help for you. Can't show you any code for this, but it is not hard to make if you understand how it goes.

maxim

# iphone - Fgallery 将图像保存到 iPhone

> ID：13811560
> 
> 赞同：0
> 
> 时间：2012-12-11T00:13:03.517
> 
> 标签：iphone, ios, image

嗨对不起，我是菜鸟，但我正在学习。我有 Fgallery 在我的应用程序中工作，但现在我想将一个条形按钮连接到一个动作以将图像保存到手机。我需要一些代码来提供当前图像（在大图像视图中）我希望有人可以帮助我解决这个问题。这就是我所拥有的：

```
- (void)handleEditCaptionButtonTouch:(id)sender {
// here we could implement some code to change the caption for a stored image
[networkGallery saveImageAtIndex:[networkGallery currentIndex]]; 
```

}

在这里我有一个硬编码的图像，但我需要当前图像：

```
- (void)saveImageAtIndex:(NSUInteger)index
{

UIImage *image = [UIImage imageNamed:@"background.png"];
if(image != nil){
    UIImageWriteToSavedPhotosAlbum(image, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);
}   
return; 

}

//saveImage method
-(void)image:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo{
[BT_debugger showIt:self:[NSString stringWithFormat:@"finished saving image: %@", @""]];
NSString *message;  
NSString *title;  
if (!error) {  
    title = NSLocalizedString(@"SaveSuccessTitle", @"");  
    message = NSLocalizedString(@"SaveSuccessMessage", @"");  
} else {  
    title = NSLocalizedString(@"SaveFailedTitle", @"");  
    message = [error description];  
}  
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:title  
                                                message:message  
                                               delegate:nil  
                                      cancelButtonTitle:NSLocalizedString(@"ButtonOK", @"")  
                                      otherButtonTitles:nil];  
[alert show];  
[alert release]; 
} 
```

任何帮助将不胜感激。

在此先感谢 DK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:25:07.123

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
 img.image = [info valueForKey:@"UIImagePickerControllerOriginalImage"];

 [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:51:49.200

如果其他人正在寻找答案。这里是：

```
FGalleryPhoto *photo = [_photoLoaders objectForKey:[NSString stringWithFormat:@"%i", index]];
UIImage *saveImage = [photo fullsize]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T14:05:29.113

在上面的代码中，在*stringWithFormat*方法中，将**index**替换为**_currentIndex**

FGalleryPhoto *photo = [_photoLoaders objectForKey:[NSString stringWithFormat:@"%i", _currentIndex]]; UIImage *saveImage = [照片全尺寸];

# c# - snk文件可以复制到其他文件夹吗？

> ID：13811562
> 
> 赞同：3
> 
> 时间：2012-12-11T00:13:10.773
> 
> 标签：c#, .net, visual-studio-2010

我有一个解决方案，其中包含多个项目引用的 .snk 文件，也在同一个解决方案中。它们通过 AssemblyInfo.cs 进行引用。我不熟悉使用 .snk 文件。

我可以将 .snk 文件复制到另一个位置，更改 AssemblyInfo.cs 引用并期望一切正常吗？或者我必须生成一个新的 .snk 文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T00:54:51.327

.snk 文件有两个基本策略。像微软这样的公司关心的是将 .snk 文件存储在一个很少有人可以访问的保险库中。仅用于签署发布程序集。这确保了没有人可以获取该 .snk 文件并使用它来签署恶意替代程序集。在这种情况下，复制 .snk 文件显然是他们*从未*做过的事情，这为 .snk 文件提供了更多落入坏人手中的方式。

第二个是您不关心 .snk 文件的恶意使用，您只使用它为程序集提供一个强名称，以便您可以将其放入 GAC。现在复制它仍然没有意义，那只是忙碌的工作没有意义。只需为每个项目提供其自己的 .snk 文件并将其签入源代码管理即可。

所以，不，复制没有意义。否则它不会起作用，.snk 文件只存储私钥。

# r - 安全地将 data.table 转回 data.frame

> ID：13811572
> 
> 赞同：14
> 
> 时间：2012-12-11T00:13:48.213
> 
> 标签：r, data.table

从对象中删除/删除`data.table`类，将其转换回 data.frame 的最安全方法是什么？

我问是因为我使用的脚本依赖于以下代码：

```
newcol.index <- ncol(my.data) +1
my.data[,newcol.index] <- 3
colnames(my.data)[newcol.index] <- "test" 
```

这些`data.table`包显然不喜欢这样，但是使用 class 的对象可以正常工作`data.frame`。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-11T00:16:10.647

`as.data.frame`data.tables的方法可能是最安全的函数。（尝试键入`getAnywhere("as.data.frame.data.table")`以查看它的确切作用。）

```
library(data.table)
DT <- data.table(a=1:4, b=letters[c(1,1,2,2)], key="a")

class(as.data.frame(DT))  ## OR:  as(X, "data.frame")
# [1] "data.frame" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T00:29:22.770

如果您愿意将脚本转换为 data.table，您可以使用 use`:=`通过引用分配，这将自动分配给`(ncol(youdata)+1)th`列，您可以将名称的字符向量传递给函数的 LHS。它将通过引用分配，所以不要复制！

```
DT <- data.table(a = 1, b = 2)

DT[,'test' := 3]

DT
   a b test
1: 1 2    3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-30T20:18:22.977

这是如何从**data.table**转换为**数据框的示例**

```
library(tidyverse)
library(data.table)

df <- data.frame(a = 1:5, b = 6:10, c = LETTERS[5:9])
class(df)
#[1] "data.frame"

df <- data.table(df)
class(df)
#[1] "data.table" "data.frame"

class(df) <- class(as.data.frame(df))
class(df)
#[1] "data.frame" 
```

# jquery - Scrollorama - 水平滚动不起作用

> ID：13811574
> 
> 赞同：0
> 
> 时间：2012-12-11T00:13:53.033
> 
> 标签：jquery

我一直在搞乱 scrollorama - jquery 的插件，我正试图让它水平工作。

www.nmyster.co.uk/testGround

上面的网站有我的测试，由于某种原因，当我向右滚动时，其中一个元素没有淡入..这是为什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-14T09:45:06.077

编辑 jquery.scrollorama.js

**字符串 102：**
var scrollTop = $(window).scrollTop()，

**更改为：**
var scrollTop = $(window).scrollLeft()，

# python - python scripts issue (no module named ...) when starting in rc.local

> ID：13811575
> 
> 赞同：2
> 
> 时间：2012-12-11T00:13:56.280
> 
> 标签：python, dependency-management

I'm facing of a strange issue, and after a couple of hour of research I'm looking for help / explanation about the issue. It's quite simple, I wrote a cgi server in python and I'm working with some libs including pynetlinux for instance. When I'm starting the script from terminal with any user, it works fine, no bug, no dependency issue. But when I'm trying to start it using a script in rc.local, the following code produce an error.

`import sys, cgi, pynetlinux, logging`

it produce the following error :

```
   Traceback (most recent call last):
      File "/var/simkiosk/cgi-bin/load_config.py", line 3, in 
      import cgi, sys, json, pynetlinux, loggin
   ImportError: No module named pynetlinux

```

Other dependencies produce similar issue.I suspect some few things like user who executing the script in rc.local (root normaly) and trying some stuff found on the web without success.

Somebody can help me ?

Thanx in advance.

Regards.

Ollie314

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-22T11:31:27.820

首先，您需要确保您要导入的模块是否安装正确。您可以检查模块的名称是否存在于`pip list`

然后，在 python shell 中，检查 Python 查找模块的路径：

```
 import sys
    sys.path 
```

就我而言，输出是：

```
['', '/usr/lib/python3.4', '/usr/lib/python3.4/plat-x86_64-linux-gnu', '/usr/lib/python3.4/lib-dynload', '/usr/local/lib/python3.4/dist-packages', '/usr/lib/python3/dist-packages'] 
```

最后，将这些路径附加到 /etc/rc.local 中的 $PATH 变量。这是我的 rc.local 的示例：

```
 #!/bin/sh -e
    #
    # rc.local
    #
    # This script is executed at the end of each multiuser runlevel.
    # Make sure that the script will "exit 0" on success or any other
    # value on error.
    #
    # In order to enable or disable this script just change the execution
    # bits.
    #
    # By default this script does nothing

    export PATH="$PATH:/usr/lib/python3.4:/usr/lib/python3.4/plat-x86_64-linux-gnu:/usr/lib/python3.4/lib-dynload:/usr/local/lib/python3.4/dist-packages:/usr/lib/python3/dist-packages"

    # Do stuff

    exit 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T00:26:33.513

安装模块的路径通常可能来自 .bashrc 或类似的东西。当 .bashrc 不是交互式 shell 时，它不会被获取。/etc/profile 是您可以进行系统范围路径更改的地方。根据它可能使用的 Linux 版本/发行版 /etc/profile.d/ 在这种情况下 /etc/profile 运行 /etc/profile.d 中的所有脚本，在那里添加一个具有执行权限和 .sh 扩展名的新 shell 脚本.

# php - How do you add a custom tab to Wordpress post editor?

> ID：13811578
> 
> 赞同：1
> 
> 时间：2012-12-11T00:14:14.940
> 
> 标签：php, wordpress

At the moment there are two tabs in the post editor Visual and HTML.

Is there a hook that allows for another tab to be added?

If so, what is it?

Additional info:

So, let's say the content of the post is an address.

The additional tab will contain the form for the person to fill in. When the post is updated, the person's answers will be stored as the post content. (pre-formatted with a template created by me)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:30:30.957

不，没有钩子可以做到这一点。但请注意，这两个选项卡（HTML 和 Visual）的处理方式与 TinyMce 的其余按钮（可以通过选项设置）不同。视觉和 HTML 选项卡甚至可以放置在编辑器旁边，并使用 JavaScript 控制以在编辑器上产生相同的效果（将其视图从 HTML 切换到文本，反之亦然）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:31:47.483

这是 HTML 和 Visual 控件控制编辑器视图的方式：

```
 $('a.toggleVisual').click(
                function() {
                    tinyMCE.execCommand('mceAddControl', false, id);
                }
            );

            $('a.toggleHTML').click(
                function() {
                    tinyMCE.execCommand('mceRemoveControl', false, id);
                }
            );

        }); 
```

您会看到，这两个视图之间的区别基本上只是添加或删除控件以保留原始 HTML 视图或对其进行转换。但是您可以在旁边添加一个按钮。这是我自己用来显示标签的代码：

```
 <p align="right"><a class="button toggleVisual">Visual</a><a class="button toggleHTML">HTML</a></p><textarea rows="10" class="foo" id="editorid" name="editorname" style="width:100%%;">Text area content</textarea> 
```

所以你可以像这样添加另一个标签：

```
<p align="right"><a class="button toggleTemplate">Your Template Tab</a><a class="button toggleVisual">Visual</a><a class="button toggleHTML">HTML</a></p><textarea rows="10" class="foo" id="editorid" name="editorname" style="width:100%%;">Text area content</textarea> 
```

然后绑定到click事件以显示另一个视图，由您自己的例程生成...

# javascript - 有没有办法在更改 window.location.href 后进行 onload 回调？

> ID：13811582
> 
> 赞同：23
> 
> 时间：2012-12-11T00:14:33.827
> 
> 标签：javascript, onload, window.location

基本上我想做的事情是这样的：

```
window.location.href = "some_location";
window.onload = function() {
  alert("I'm the new location and I'm loaded!");
}; 
```

加载窗口的新位置时有没有办法进行回调？（上面的代码不起作用。）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-11T00:23:02.340

不，你不能按照你想要的方式去做。加载新页面会关闭当前文档并开始加载新文档。当新页面开始加载时，当前文档中的任何代码都将不再有效。

要在新文档加载时拥有事件处理程序，您需要将代码插入到新页面的文档中，或者将新文档加载到 iframe 中并监控当前文档中 iframe 的加载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T00:24:12.713

将 window.location.href 设置为新值会告诉浏览器直接转到下一页。

像这样：

```
window.location.href = "http://www.google.com/"; 
```

一旦浏览器访问 google.com，就是这样，您的 Javascript 将不再执行，并且您无法进行任何类型的回调，因为浏览器不再运行您的页面。

所以，答案是否定的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-27T22:59:31.520

关于新上下文中的回调和 js 执行 - 否（根据原始答案），但有一些方法可以在没有回调的情况下访问加载的元素。例如`scrollIntoView`，在加载的元素上，您可以附加选择器：

```
const href = '#someElem'
if(window.location.pathname  !== '/') window.location.href = `/${href}`
else document.querySelector(href).scrollIntoView() 
```

# ocaml - Ocaml：FIFO 读取错误

> ID：13811583
> 
> 赞同：2
> 
> 时间：2012-12-11T00:14:37.747
> 
> 标签：ocaml, fifo, mkfifo

好的，所以我正在使用 FIFO，我正在尝试构建一个小型库以在未来的程序中使用。

它应该能够创建一个命名管道，对其进行读取和写入。

我能够完成所有这些功能，但读取不正确。问题如下：

如果我说它应该读取大小为 10 个字符的缓冲区，那么只有当我写入超过 10 个字符时它才会正确打印，例如：

写入=“0123456789”->读取=“”写入=“012345678910111213”->读取=“”，“10111213”

我尝试了更多代码，并对异常“with”进行了小调试。如果读取失败，则存在此异常......它的作用是：关闭，等待，重新启动，最后返回 0（无）

然后我有一个 if 仅当字符数仅大于 0 时才正确，否则将打印“空”

所以，发生的事情是： write = "0123456789" -> reads = "empty" write = "012345678910111213" -> reads = "empty","10111213"

因此，在前 10 个字符上，他说读取失败，但他将它们从 FIFO 中删除。为什么？

抱歉，如果有点混乱。这是代码：

阅读程序：

```
let fifo_name = "la_fila";;

(*define the length of the buffer*)
let buflen = 2;;

let main () =
Printf.printf "Hello! Any readers? ...\n";
flush stdout;
while true do
print_string ("I've read \"" ^ bufferRead fifo_name buflen  ^ "\" from the fifo!\n");
flush stdout
done;;

(* run it *)
bufferCreate fifo_name;;
let _ = main ();; 
```

这是缓冲区库：

```
(* Buffer Functions *)
let bufferCreate name = 
  try Unix.mkfifo name 0o664 with
    Unix.Unix_error(n,f,arg) -> Printf.printf "%s(%s) : %s\n" f arg 
      (Unix.error_message n);;

let bufferRead name size =
let frd = Unix.openfile name [Unix.O_RDONLY;Unix.O_NONBLOCK] 0o644 in
 let rec aux () =  
    let nothing = flush_all ()
    in
    let buffer = String.create size in
    let n = try (Unix.read frd buffer 0 size) with 
        Unix.Unix_error(n,f,arg) -> begin (); aux (); 0; end
    in
    if n > 0 then String.sub buffer 0 n else "empty"
 in
 aux ();; 
 (*(String.sub buffer 0 n)*)

let bufferWrite name str = 
  let length = String.length str in
  let fwr = Unix.openfile name [Unix.O_WRONLY] 0o644 in 
  Unix.write fwr str 0 length;; 
```

**编辑**

```
open Buffers;;

let fifo_name = "la_fila";;

let main () = 
Printf.printf "CUCKOO! any consumer down there? ...\n";
flush stdout;
Printf.printf "cuckoo! Here comes a consumer! \n";

let rec reget () =
Printf.printf "-type something for it\n";
flush stdout;
let str = read_line() (*here it blocks*) in
bufferWrite fifo_name str;
reget () in
reget ();;

(* run it *)
bufferCreate fifo_name;;
main ();; 
```

我想要一些光，它杀了我......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T01:19:20.377

我不认为您想要非阻塞 IO，至少对于您的初始测试而言是这样。您实际上希望您的读者阻止，直到有人准备好写作。但是您也可能不想为每次读取重新打开管道，因为每次都会等待写入器。如果您确实想为每次读取重新打开管道，那么您也应该关闭它。在我对您的代码的测试中，程序会一直运行，直到用完所有可用的文件描述符。

**编辑：**如果您要求非阻塞 I/O，您的测试程序基本上是轮询（消耗 CPU 周期）等待输入显示。在开始查看任何数据之前，您会看到任意数量的 0 长度读取。这似乎就是您要报告的内容。如果您一直打开和关闭管道，如果有一段时间没有读取器或写入器打开管道，您可能会丢失数据。

对于初始测试（我很确定），您真正想要做的是为正常（阻塞）IO 打开管道一次，然后在阅读器中永远保持打开状态（直到测试结束）。那应该确保您看到所有数据。之后你可以尝试变化。

作为旁注，我认为许多人最终认为命名管道的语义太挑剔了。他们最终改用 Unix 域流套接字。

# email - How can I connect my colledge email to Outlook Live?

> ID：13811589
> 
> 赞同：2
> 
> 时间：2012-12-11T00:15:00.413
> 
> 标签：email, gmail, client, pop3, webmail

I am a student at Kennesaw State University. The college email is connected with GMail as the web client, but I cant find a way to connect the PoP (or IMAP, even though PoP is the only one Outlook stated) servers to Outlook (or any other clients). I want to do this so I can have one universal client for all of my mail accounts.

There are many... [http://www.k-state.edu/its/zimbra/help/email_clients/ol2003.html](http://www.k-state.edu/its/zimbra/help/email_clients/ol2003.html) http://www.k-state.edu/its/zimbra/help/email_clients/ol2007.html ..."official" guides on how to do this, but no one has had any luck. I want to not only receive, but send emails from this account.

Has anyone had any luck doing this (I think some companies use the same google GMail set-up).

I would like to add that there is the same issue with Zimbra.

# jsf - update inputtext via dialog

> ID：13811591
> 
> 赞同：-1
> 
> 时间：2012-12-11T00:15:09.790
> 
> 标签：jsf, primefaces

Please help me to find a example to update p:inputtext with data stored in a bean which is set(solved already) by selecting a row of a datatable of a p:dialog. I have succeeded updating outputtext in the same manner.

I am using (learning) netbeans 7.2 primefaces 3.2, glassfish 3.1

thansk for all your help

rs_ncs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:35:00.920

如果您想在从数据表中选择行时更新组件，则可以使用正在侦听事件`update`的 a 的属性。像这样的东西：`<p:ajax>``rowselect`

```
<p:ajax event="rowSelect" update=":xx:xx" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:14:30.810

查看[primefaces 展示](http://www.primefaces.org/showcase/ui/home.jsf)和[用户指南](http://primefaces.googlecode.com/files/primefaces_users_guide_3_4.pdf)，您会找到所需的一切；详细搜索数据表组件的 rowSelect 事件。祝你好运=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:54:55.650

正如 BalusC 所建议的，代码`<p:ajax event="rowSelect" update=":xx:xx" />`应该可以工作....

这是同时更新 inputtext 和 outputtext 的示例。

```
<h:form>
    <p:dataTable id="usertable" var="user" value="#{userManageBean.userList}"
        rowKey="#{user.U_ID}" selection="#{userManageBean.selectedUser}"
        selectionMode="single" paginator="true" rows="18" >

        <p:ajax event="rowSelect" update=":useredit:edituser" />
        <p:ajax event="rowSelect" update=":viewuser:displayuser" />

        <p:column headerText="User Name">
            <h:outputText value="#{user.username}" />
        </p:column>

        <p:column headerText="FName">
            <h:outputText value="#{user.firstname}" />
        </p:column>

        <p:column headerText="LName">
            <h:outputText value="#{user.lastname}" />
        </p:column>

    </p:dataTable>
</h:form>

<p:dialog id="userview" header="View User" widgetVar="dlg2" >

    <h:form id="viewuser">
        <h:panelGrid id="displayuser" columns="2" cellpadding="4">
            <h:outputText value="User Name:" />
            <h:outputText value="#{userManageBean.selectedUser.username}" />

            <h:outputText value="First Name" />
            <h:outputText value="#{userManageBean.selectedUser.firstname}" />

            <h:outputText value="Last Name:" />
            <h:outputText value="#{userManageBean.selectedUser.lastname}" />

        </h:panelGrid>
    </h:form>

</p:dialog>

<p:dialog id="user_edit" header="Edit User" widgetVar="dlgedit" >

    <h:form id="useredit">

        <h:panelGrid id="edituser" columns="2" cellpadding="4">

            <h:outputText value="First Name" />
            <h:inputText value="#{userManageBean.selectedUser.firstname}" />

            <h:outputText value="Last Name" />
            <h:inputText value="#{userManageBean.selectedUser.lastname}" />

            <p:commandButton id="updateUser" value="Add" action="#{someaction}"
                ajax="false" />

        </h:panelGrid>
    </h:form>
</p:dialog> 
```

# c - C：这是什么语法？

> ID：13811592
> 
> 赞同：1
> 
> 时间：2012-12-11T00:15:13.487
> 
> 标签：c, syntax

我正在阅读[一篇](http://hce.halomaps.org/?nid=416)关于 Bungie 为 BLAM 实现的“基于标签”资源系统的文章！游戏引擎。我遇到了一种神秘的语法（我认为是 C 结构？），我想知道是什么允许这样做？这种语法如何有效？又是通过什么方法实现的？

我已经粘贴了下面有问题的片段。

```
TAG_GROUP(
sound_environment,
SOUND_ENVIRONMENT_TAG,
sizeof(sound_environment))
{
     {_field_real, "room intensity"},
     {_field_real, "room intensity hf"},
     {_field_real, "room rolloff (0 to 10)"},
     {_field_real, "decay time (.1 to 20)" },
     {_field_real, "decay hf ratio (.1 to 2)"},
     {_field_real, "reflections intensity:dB[-100,10]"},
     {_field_real, "reflections delay (0 to .3):seconds" },
     {_field_real, "reverb intensity:dB[-100,20]"},
     {_field_real, "reverb delay (0 to .1):seconds"},
     {_field_real, "diffusion"},
     {_field_real, "density"},
     {_field_real, "hf reference(20 to 20,000)},
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:19:41.147

这是关键部分

```
TAG_GROUP(
sound_environment,
SOUND_ENVIRONMENT_TAG,
sizeof(sound_environment)) 
```

这表明有一个宏“TAG_GROUP”在做一些魔术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T00:18:53.973

TAG_GROUP 看起来像一个宏；如果是这样，那么它正在扩展到其他东西，在这种情况下，语法可能是正确的，具体取决于它正在扩展到什么。

例如，如果 TAG_GROUP 扩展为 2D 数组甚至是结构数组，那么该初始化是有效的，因为它是一个标准的初始化列表。

使用下面的程序，它会编译：

```
int main() 
{
    const char* _field_real = "xyz";
    const char* a[12][2] = {
        {_field_real, "room intensity"},
        {_field_real, "room intensity hf"},
        {_field_real, "room rolloff (0 to 10)"},
        {_field_real, "decay time (.1 to 20)" },
        {_field_real, "decay hf ratio (.1 to 2)"},
        {_field_real, "reflections intensity:dB[-100,10]"},
        {_field_real, "reflections delay (0 to .3):seconds" },
        {_field_real, "reverb intensity:dB[-100,20]"},
        {_field_real, "reverb delay (0 to .1):seconds"},
        {_field_real, "diffusion"},
        {_field_real, "density"},
        {_field_real, "hf reference(20 to 20,000)"},
    };     
    return 0;
} 
```

现在，想象一下如果 TAG_NAME 使用参数来构建适当的定义并添加一个 =。然后基本上，它建立了 const char* a[12][2] 的等价物（或它使用的任何类型）。

当你看到这样的代码时，一个好的经验法则是考虑宏观，想想哪些替换可以导致合法代码。另外，我经常看到的一个约定是，看起来像函数但大写的名称都是宏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T01:19:41.277

TAG_GROUP 看起来像一个用于使初始化数据结构更方便的宏。赠品是在大括号内，一切看起来都像初始化代码。因此，TAG_GROUP 不是函数签名的宏，而是初始化排序数组的宏。

# objective-c - Ooyala player: how to stop playback

> ID：13811593
> 
> 赞同：1
> 
> 时间：2012-12-11T00:15:36.217
> 
> 标签：objective-c, ios, ooyala

Is there a way to explicitly stop the playback for ooyala player? I can find `pause` but cannot find `stop`, also, in their website:

[http://support.ooyala.com/developers/documentation/reference/player_v3_dev_destroyplayer.html](http://support.ooyala.com/developers/documentation/reference/player_v3_dev_destroyplayer.html)

it says I can "destroy" a player, but I couldn't find the method either.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:15:25.127

如果您使用的是 V3 播放器，destroy 功能应该可以工作。您是否有重现该问题的测试页面？

# c# - 如何修改以前配置的 StructureMap 配置？

> ID：13811601
> 
> 赞同：5
> 
> 时间：2012-12-11T00:16:34.843
> 
> 标签：c#, configuration, structuremap

我有一个集中的 StructureMap 配置，各种用户界面应用程序都附加到该配置中。我从来不需要修改“核心”配置只附加到它。我今天遇到了一个实例，我需要修改/删除特定应用程序的核心配置。当然，我可以将核心配置代码移到不同的应用程序中，但在此之前，我想确保我没有遗漏 StructureMap api 的明显内容。以下是我的核心配置的缩写版本：

```
ObjectFactory.Initialize(cfg =>
{
    cfg.Scan(scan =>
        {
            scan.Assembly("Core");
            scan.WithDefaultConventions();

            scan.ConnectImplementationsToTypesClosing(typeof(IValidationRule<>));
            // more after this....
        }
} 
```

在这个应用程序的运行时，我想删除类型关闭的配置`IValidationRule`，但还没有想出任何可行的方法。所有的弹出方法似乎都以单例含义为中心。由于我不是在处理单身人士，因此以下内容不起作用：

```
ObjectFactory.Model.For(typeof(IValidationRule<>)).EjectAndRemoveAll(); //no work

ObjectFactory.Model.EjectAndRemove(typeof(IValidationRule<>)); //nor does this 
```

有没有办法可以修改我的 StructureMap 配置以不查找`IValidationRule`s？我可以弹出`IValidationRule`s 的非单例实例吗？我是否有其他选项来修改我的 StructureMap 配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:12:36.673

像下面这样的东西呢？我认为这应该有效。

```
ObjectFactory.Model.EjectAndRemoveTypes(match
    => match != null && match.GetInterfaces().Any(i
        => i.Name.Contains("IValidationRule"))); 
```

# javascript - 如何有效地检查列表项与所有其他列表项？

> ID：13811604
> 
> 赞同：1
> 
> 时间：2012-12-11T00:16:56.467
> 
> 标签：javascript, optimization

有没有办法优化这种搜索方法？

```
for (var i=0;i<dots.length;i++) {
        var blist = [];
        for (var n=0;n<dots.length;n++) {
            if (dots[n][1]>(dots[i][1]-90) 
            && dots[n][1]<(dots[i][1]+90) 
            && dots[n][2]>(dots[i][2]-90) 
            && dots[n][2]<(dots[i][2]+90)) {
                if (!(n === i)) blist.push(n);
            }
        } 
```

`dots[x][1]`是 x 坐标，`dots[x][2]`是 y 坐标。

我有 1000 个点，需要找到每个点周围的点，这样会导致

```
if (dots[n][1]>(dots[i][1]-90) 
&& dots[n][1]<(dots[i][1]+90) 
&& dots[n][2]>(dots[i][2]-90) 
&& dots[n][2]<(dots[i][2]+90)) 
```

每秒运行一百万次，有没有办法优化呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:27:50.550

也许尝试像这样为您的点使用数据结构

```
var Dot = function(){
 var x = 0;
 var y = 0;
 var Up;
 var Right;
 var Left;
 var Down;

 function init(xVal,yVal)
 {
  x = xVal;
  y = yVal;
 }

 function GetUp()
 {
  return Up;
 }

 function SetUp(UpDot)
 {
  Up = UpDot;
 }

 return 
 {
  init: init,
  GetUp: GetUp,
  SetUp: SetUp
 };
}; 
```

然后像这样使用它

```
var Dots = [];
var firstDot = new Dot();
Dots.push(firstDot);
var secondDot = new Dot();
secondDot.init(0,90);
secondDot.SetUp(firstDot);
Dots.push(secondDot); 
```

显然，需要添加和配置更多内容以匹配您的情况。但是，这将允许您做的是遍历点，然后检查天气是否存在一个附近的点，使时间 O(n) 而不是 O(n^2)，从而为您节省 900,000 次检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:15:52.777

将时间减半的一种方法是不要仔细检查每一对：

```
for (var i = 0, len = dots.length; i < len - 1; i++) {
    var blist = [];
    for (var n = i + 1; n < len; n++) {
        if (dots[n][1]>(dots[i][1]-90) 
        && dots[n][1]<(dots[i][1]+90) 
        && dots[n][2]>(dots[i][2]-90) 
        && dots[n][2]<(dots[i][2]+90)) {
            blist.push(i);
            blist.push(n);
        }
    }
} 
```

注意循环边界的变化。这使我可以只检查每对一次并跳过`(n === i)`检查。

我也缓存`dot.length`，可能没什么大不了的，但值得做一个紧密的循环。

不过，这应该是 50% 以上的改进。虽然这可能会有所帮助，但这并不是此类问题可能需要的数量级变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:40:29.923

这是解决方案的草图。这可能与 TravisJ 提出的想法相同，尽管我不清楚。它实际上只是一个草图，并且需要大量代码来实现。

如果您将空间划分为 90 个单位 x 90 个单位的部分，则特定部分中的点只能与该部分中的一个点或该部分的八个邻居之一中的一个点足够接近。这可以显着减少您必须比较的对数。代价当然是算法复杂度：

*   首先创建一个数据结构来表示您的网格部分。它们可能仅由左上角表示，因为它们的高度和宽度将固定为 90，除了可能在后缘处，这可能无关紧要。假设一个矩形表面，每个表面可以有三个、五个或八个邻居（分别是角、边缘、内部部分）。
*   遍历您的点，确定它们所在的部分。如果您的总网格从 0 开始，这应该相对简单，使用一些`Math.floor(something / 90)`操作。
*   对于每个部分，在其自身及其每个邻居上运行上面的循环以找到匹配集。您可以使用我之前回答中的循环的缩短版本。
*   为了进一步优化，您还可以减少要检查的邻居数量。如果 Section3,7 与 Section3,8 进行比较，则 Section3,8 没有理由也与 Section3,7 进行比较。因此，您只检查邻居的某个子集，例如那些其部分编号的 x 和 y 分量大于或等于自己的邻居。

我没有测试过这个，除了在我的脑海里。它应该可以工作，但我没有尝试编写任何代码。并且代码不会是微不足道的。我认为这不是几周的工作，但也不是几分钟就能完成的事情。

我相信它可以显着提高速度，但这取决于有多少匹配，有多少点相对于部分的数量。

# javascript - JQuery Resizable - 在调整大小时更新元素绝对位置

> ID：13811605
> 
> 赞同：3
> 
> 时间：2012-12-11T00:16:57.633
> 
> 标签：javascript, jquery-ui, css-position, jquery-resizable

我有许多`div`s 分布在行和列中（使用 jQuery 生成）。这些`div`s 中的每一个都是可调整大小的，使用 JQuery UI Resizable。为了定义需求，所有`div`的s都**必须使用绝对定位**。因此，当我重新调整这些 div 的大小时，脚本应该更新其`top`下方所有 div 的属性（位于当前调整大小的 div 之后的同一列和一行）。

这是我现在的代码：

```
updatePositions: function() {
        var update = 0;
        $(".element").resizable({
            handles: 's',
            start: function(event, ui) {
                event.stopPropagation();
                var el = $(this);
                var el_row = parseInt(el.attr("row"));
                var el_rel = parseInt(el.attr("rel"));
                var el_col = parseInt(el.attr("col"));
                update = $(".element").filter(function() {
                    return(
                        $(this).attr("row") > el_row &&
                        $(this).attr("col") == el_col &&
                        $(this).attr("rel") != el_rel
                    );
                    });
            },
            resize: function(event, ui) {
                update.each(function(event){
                    var top = $(this).position().top + $(this).height() + 20;
                    $(this).css("top", top )
                });
            }
        })
    } 
```

这是一个例子：[JSFiddle](http://jsfiddle.net/fedeleoncba/sPdZB)

如您所见，所有 div 都找到了，我可以更新顶部位置。但是由于某种原因，它在调整大小时变得疯狂！好像我在每个选定的 div 上找到的磁贴一样多次进行更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:19:34.277

最后我解决了这个问题。[JSFiddle](http://jsfiddle.net/sPdZB/28/)

这是js代码：

```
function CacheType(){
    corrtop = 0;
    rel = 0;
}

$.extend({
    updatePositions: function() {
        var update = 0;
        var arr = new Array();
        $(".element").resizable({
            handles: 's',
            start: function(event, ui) {
                event.stopPropagation();
                var el = $(this);
                var el_row = parseInt(el.attr("row"));
                var el_rel = parseInt(el.attr("rel"));
                var el_col = parseInt(el.attr("col"));
                var ex = el.position().top;
                var ey = el.height();
                update = $(".element").filter(function() {
                    if(
                        $(this).attr("row") > el_row &&
                        $(this).attr("col") == el_col &&
                        $(this).attr("rel") != el_rel
                    ){
                        var tmp = new CacheType();
                        tmp.corrtop = $(this).position().top - ex - ey;
                        tmp.rel = $(this).attr('rel');
                        arr.push(tmp);
                        return true;
                    }else{
                        return false;
                    }
                    });
            },
            resize: function(event, ui) {
                var x = $(this).height() + $(this).position().top;
                update.each(function(event){
                    for(var i=0;i<arr.length; i++){
                        var tmp = arr[i];
                        var rel = $(this).attr('rel');
                        if(rel == tmp.rel)
                            $(this).css("top", x + tmp.corrtop);
                    }
                });
            }
        })
    }
});
$(document).ready(function(){
    $.updatePositions();
}); 
```

# wordpress - Adding image dimensions of media to url in wordpress

> ID：13811606
> 
> 赞同：1
> 
> 时间：2012-12-11T00:17:02.523
> 
> 标签：wordpress, parameters, upload, image

When I upload an image in wordpress knows its dimensions. Lets say the image is called image.jpg . I now want wordpress to rename the image url to image-w-180-h-200.jpg for example (where the image has a width of 180 pixels and a height of 200 pixels). Is there anyway I can append these details to the url so I can 'retrieve' these parameters directly? (My goal is to eventually get the img width and height through javascript but this way I don't have to preload the img to get it's dimensions, wordpress already has done the work for me)

Cheers!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:26:03.763

（改编自[https://wordpress.stackexchange.com/questions/38582/hook-to-get-image-filename-when-it-is-uploaded](https://wordpress.stackexchange.com/questions/38582/hook-to-get-image-filename-when-it-is-uploaded)）

```
 function rename_image($results) {
   if( $results['type'] === 'image/jpeg' ) { // or /png or /tif / /whatever

     $filename = $results[ 'file' ]; // Use this line to add height and width of image;
     $url = $results[ 'url' ];

    // manipulate the image
   } 
 }

 add_action('wp_handle_upload', 'rename_image'); 
```

请阅读指定的 URL 以获取更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T01:43:54.480

另一种方法是在上传时修改缩略图文件名。以下将用于重命名新上传的图像。

从另一个 WPSE 答案：[https ://wordpress.stackexchange.com/a/51983/12615](https://wordpress.stackexchange.com/a/51983/12615)

切入正题，这是[完整的工作代码](http://pastebin.com/B4cHwm3Y)。

而且，理论上，您应该将功能更改`bt_image_make_intermediate_size`为：^(*未测试*)

```
function bt_image_make_intermediate_size( $file, $width, $height, $crop = false, $size ) 
{
    if ( $width || $height ) {
        $suffix = 'w-' . $width . '-h-' . $height;

        $resized_file = bt_image_resize( 
            $file, $width, $height, $crop, $suffix, null, 90 
        );

        if ( 
            !is_wp_error( $resized_file ) 
            && $resized_file 
            && $info = getimagesize( $resized_file ) 
        ) {
            $resized_file = apply_filters(
                'image_make_intermediate_size', 
                $resized_file
            );
            return array(
                'file' => wp_basename( $resized_file ),
                'width' => $info[0],
                'height' => $info[1],
            );
        }
    }
    return false;
} 
```

# html - 使用 regEx 删除连续整数

> ID：13811612
> 
> 赞同：0
> 
> 时间：2012-12-11T00:17:55.607
> 
> 标签：html, regex, notepad++

如何替换三个连续整数的出现？

我有一个列表，其中包含一些不需要的整数，这些整数是所有三个数字的组合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:19:47.470

此正则表达式将使用量词查找 3 个连续数字：

```
[0-9]{3} 
```

Notepad++ 5.9.8 及更低版本的正则表达式引擎不支持量词（[source](http://sourceforge.net/p/notepad-plus/bugs/3245/)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T01:41:11.047

```
Find   :([^\d])\d{3}([^\d])
Replace:\1\2 
```

这会转...

> |333|4444|55555| "1","22","333"
> 
> ...到....
> 
> ||4444|55555| "1","22",""

# c - How to see if a pipe is empty

> ID：13811614
> 
> 赞同：13
> 
> 时间：2012-12-11T00:18:00.630
> 
> 标签：c, block, pipe, blocking

Assuming a pipe,

```
int pipe_fd[2];
pipe(pipe_fd); 
```

We fork, and expect that one process will write into the pipe at an arbitrary time. In one of the processes, we want to be able to check the contents of the pipe without blocking.

i.e. While a typical read will block if nothing is present and the write end remains open. I want to go do other stuff and potentially even read a bit at a time, do some stuff, and then check back to see if there's more, a la:

```
close(pipe_fd[1]);

while(1){
    if(/**Check pipe contents**/){
        int present_chars = 0;    

        while( read(pipe_fd[0],&buffer[present_chars],1) != 0)
            ++present_chars;

        //do something

    }
    else
        //do something else
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-11T00:26:31.017

你的逻辑是错误的，`read`当字符用完时不会返回 0；相反，除非您将文件置于非阻塞模式，否则它将阻塞直到接收到更多，但随后它将返回 -1 并设置`errno`为`EWOULDBLOCK`或`EAGAIN`而不是返回 0。唯一可以返回 0 的时间*是*`read`size参数是0 或已到达文件结尾。而且，*对于管道*，文件结束意味着管道的写入端已经关闭；文件结束状态不会仅仅因为还没有任何可用的输入而发生。

 **话虽如此，最简单的检查方法是：

```
if (poll(&(struct pollfd){ .fd = fd, .events = POLLIN }, 1, 0)==1) {
    /* data available */
} 
```

但除非您使用非阻塞模式，否则您需要在每次读取操作之前进行此检查。将更大的缓冲区传递给`read`而不是一次一个字节地传递将消除大部分检查成本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T00:35:27.740

您可以使用该功能检查是否有要读取的数据`read()`。来自`read(3)`：

```
When attempting to read from an empty pipe or FIFO:

* If some process has the pipe open for writing and
O_NONBLOCK is set, read() shall return -1 and set
errno to [EAGAIN].

* If some process has the pipe open for writing and
O_NONBLOCK  is  clear,  read() shall block the calling
thread until some data is written or the pipe is
closed by all processes that had the pipe open for
writing.

The read() function shall fail if:

EAGAIN or EWOULDBLOCK

    The file descriptor is for a socket, is marked
    O_NONBLOCK, and no data is waiting to be received. 
```

因此，如果您设置`O_NONBLOCK`了，您将能够通过简单地调用来判断是否要在管道上读取某些内容`read()`。

提醒一下，来自`open(3)`：

```
SYNOPSIS
    int open(const char *path, int oflag, ...  );

DESCRIPTION
    Values for oflag are constructed by a
    bitwise-inclusive OR of flags from the following
    list, defined in <fcntl.h>. Applications shall
    specify exactly one  of  the first three values
    (file access modes) below in the value of oflag:

    O_NONBLOCK [...] 
```

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-19T09:12:00.493

R.. 的答案很好，但是 poll 返回在“revents”中设置了标志的文件描述符结构的数量。如果您可以从中读取，`fd`则该值为 1，但如果设置了任何错误标志，则该值为 1。这意味着 R.. 的回答会说管道在进入错误状态时是可读的。更强大的检查可能是这样的：

```
bool canReadFromPipe(){
    //file descriptor struct to check if POLLIN bit will be set
    //fd is the file descriptor of the pipe
    struct pollfd fds{ .fd = fd, .events = POLLIN };
    //poll with no wait time
    int res = poll(&fds, 1, 0);

    //if res < 0 then an error occurred with poll
    //POLLERR is set for some other errors
    //POLLNVAL is set if the pipe is closed
    if(res < 0||fds.revents&(POLLERR|POLLNVAL))
    {
        //an error occurred, check errno
    }
    return fds.revents&POLLIN;
} 
```**

# algorithm - Scanline fill algorithm using odd/parity rule

> ID：13811618
> 
> 赞同：3
> 
> 时间：2012-12-11T00:18:22.810
> 
> 标签：algorithm, scanline

![http://s14.postimage.org/br35lkb9d/Untitled.png](../Images/80ec8bb390e6e6e9761e295b65e8be39.png)

The question is this: Number the rows and columns in the following figure (outside the figure). Use these row column numbers to show how the scanline stack region filling algorithm would fill in this figure, starting at the pixel indicated. Show the contents of the stack at each phase of the algorithm and show the location in the figure of the pixels on the stack.

Since row 0 is already filled moving to row 1, it's fairly simple that party turns odd at (0,1) and fills until it turns even again at (12,1) row 2\. (0,2) triggers parity odd so it fills the next 2 pixels. at (3,2), I'm confused between the rule "vertices on horizontal line does not count" vs "count vertex if it's Ymin of that". How do I proceed at this part? and how will the rest of pixel should be treated? All the examples I could find concerning those two rules involves polygons with pointy vertices, not like the one I uploaded.

# php - In PHP, can I programmatically resize an image and add white space?

> ID：13811619
> 
> 赞同：2
> 
> 时间：2012-12-11T00:18:28.337
> 
> 标签：php, image-processing, image-manipulation

I've found some similar questions to mine, but none that address my specific situation, so I thought I'd ask.

What I have: A square JPEG, measuring 600px x 600px, that I am getting from an external source.

What I want: To programmatically resize the square to 400x400, and add 75px of white space on each side, making the total final image 550px x 400, with the original square image centered.

I'd be grateful if somebody can point me in the right direction.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-08-22T23:44:13.087

现在大多数 PHP 安装都安装了 GD 图像库。但是，GD 缺少一种功能，可以轻松一步完成您想要的操作。

如果您有权访问 ImageMagick，则可以从命令行或其 PHP API Imagick 使用它。命令行参数：

```
convert /path/to/old/image --resize 400x400 --bordercolor white -border 75x0 /path/to/new/image 
```

可能会做你想要的，如果它不是你想要的，你可以使用 ImageMagick 文档和实验来调整它。在 PHP 中，这可以通过调用 来执行`exec()`，只是要注意不要在调用中使用任何用户提供的输入，因为这可能会带来严重的安全风险。或者，您可以使用需要单独安装的 Imagick PHP 扩展，但允许您使用实际的 PHP 函数而不是单独的命令行调用。

使用 GD，你需要做更多的工作：

```
// Load image from file
$image=imagecreatefromjpeg('/path/to/image.jpg');
// Resize to 400x400
$image=imagescale($image,400,400);
// Create new blank image (defaults to black background)
$new_image=imagecreatetruecolor(550,400);
// Initialize a new color
$white=imagecolorallocate($new_image,255,255,255);
// Fill the newly-created image with white
imagefilledrectangle($new_image,0,0,550,400,$white);
// Embed old image into new image
imagecopy($new_image,$image,75,0,0,0,400,400);
// Write finished image to disk, use quality setting of 85:
imagejpeg($new_image,'/path/to/new/image.jpg',85); 
```

我已经用 PHP 7.4 测试了这段代码，但我不知道与其他版本有任何明显的差异。

使用该函数有一种更简洁的方法（将两个步骤压缩为一个），`imagecopyresized`但我不喜欢这样做，因为它并没有真正提高性能，并且生成的代码可读性较差，因为该函数有多达 10 个参数，总是调试的噩梦。

如您所见，ImageMagick 使这变得更简单。但是，并不是每个人都可以访问它，而且由于它是一个更大、更复杂的软件包，它可能会带来更大的安全风险，因此即使您在服务器上有 root 访问权限，您也可能不希望安装它。根据您正在做的事情，GD 在某些情况下也可以稍微更快和更轻量级。

另一个警告：使用 GD 将导致脚本将图像*作为 PHP 进程的一部分*加载到内存中，并且此内存使用量（可能非常高，因为图像处理是内存密集型的）将计入 PHP 的内存限制，而调用ImageMagick 将单独启动一个不计入此限制的单独进程。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-11T00:29:27.913

[php.net/manual/en/ref.image.php](http://php.net/manual/en/ref.image.php)

这些功能能够完全按照您的意愿行事，而且使用起来也非常简单。

# c# - Dynamic dependencies in deep object graphs - what am I doing wrong?

> ID：13811622
> 
> 赞同：2
> 
> 时间：2012-12-11T00:18:37.090
> 
> 标签：c#, dependency-injection, castle-windsor, typed-factory-facility

I'm trying to modify some existing code to use Castle Windsor as an IoC container.

The application in question is document-oriented. So it has an object graph that relies on data for specifying the data source that can't be known at registration time, and will change every time the object graph is resolved. However, this dependency is a few layers into the object graph, so I can't just pass it as an argument to `container.Resolve()` since Windsor doesn't propagate inline dependencies.

The solution I've come up with instead is to use the typed factory facility to generate a factory which can resolve every dependency in the graph, and have `Document`'s constructor take an instance of this factory as well as a string specifying the data source. The factory is specified at registration time, and the data source is specified at resolution time. The constructor takes over from there, manually polling the factory to resolve is dependencies. The result looks something like this:

```
public interface IDataSource { /* . . . */ }
public interface IWidgetRepository { /* . . . */ }
public interface IWhatsitRepository { /* . . . */ }

// Implementation generated by Windsor's typed factory facility
public interface IFactory
{
    IDataSource CreateDataSource(string path);
    IWidgetRepository CreateWidgetRepository(IDataSource dataSource);
    IWhatsitRepository CreateWhatsitRepository(IDataSource dataSource);

    void Release(IDataSource dataSource);
    void Release(IWidgetRepository widgetRepository);
    void Release(IWhatsitRepository whatsitRepository);
}

public class Document
{
    private readonly IDataSource _dataSource;
    private readonly IWidgetRepository _widgetRepository;
    private readonly IWhatsitRepository _whatsitRepository;

    public Document (IFactory factory, string dataSourcePath)
    {
        _dataSource = factory.CreateDataSource(dataSourcePath);
        _widgetRepository = factory.CreateWidgetRepository(_dataSource);
        _whatsitRepository = factory.CreateWhatsitRepository(_dataSource);
    }
} 
```

This absolutely works, and does accomplish the goal of having Windsor take charge of dependency resolution. Or at least, I can easily reconfigure the application by modifying the registration code. At the moment I'm still making one call to `container.Resolve()` for every `Document` that gets created, but I believe that sin can easily be amended with a second Typed Factory.

However, it still feels wrong. Windsor is in charge of newing up objects and (somewhat) managing their lifetimes, sure. But it's not really injecting those dependencies into `Document`'s constructor; instead the constructor is pulling them out of the factory. Worse, by passing the instance of `IDataSource` into the factory methods, it's taken charge of managing the object graph. That seems like a huge subversion of the inversion to me.

So, what am I missing?

**EDIT**

To clarify, what I think I'm supposed to be shooting for is for `Document`'s constructor to look more like the below.

```
public Document (IDataSource dataSource, IWidgetRepository widgetRepository, IWhatsitRepository whatsitRepository)
{
    _dataSource = dataSource;
    _widgetRepository = widgetRepository;
    _whatsitRepository = whatsitRepository;
} 
```

That way Windsor is in direct control of supplying all the objects' dependencies using constructor injection. That's actually what the constructor signature looks like in the original code, but I was unable to get it to work with Windsor because `container.Resolve()` [doesn't propagate inline dependency parameters](http://docs.castleproject.org/Windsor.Passing-Arguments.ashx). So I can't just do:

```
var document = container.Resolve<IDocument>(new { dataSourcePath = somePath });  // throws an exception 
```

because Windsor doesn't pass `dataSourcePath` on to `DataSource`'s constructor, much less make sure that a `DataSource` instantiated with that path is passed on to the other constructors.

[An answer to another question](https://stackoverflow.com/a/3905496/516797) points out that this is by design - doing otherwise would introduce coupling. This is a no-no, since one shouldn't mandate or assume that implementations of an interface have particular dependencies. Sadly, that points out another way I think the code I came up with is wrong, since `Factory.CreateWidgetRepository()` and `Factory.CreateWhatsitRepository()` imply just that sort of assumption.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T17:40:17.063

我相信我找到了正确的解决方案。显然，可用的文档不是很明确（冗长？），不足以在我前十二次阅读这个概念时通过我厚厚的头骨猛击这个概念，所以为了其他人，我将尝试在这里更详细地记录它可能和我一样无助。（在接受之前我也会让它坐一会儿，希望其他人可能会提出任何其他/更好的建议。）

长话短说，Typed Factory Facility 不适合这项工作。

--

诀窍是在流畅的注册 API 中使用 DynamicParameters 工具，这[在此处和](http://devlicio.us/blogs/krzysztof_kozmic/archive/2009/12/10/castle-windsor-new-feature-dynamic-parameters-from-registration-site.aspx)[此处](http://docs.castleproject.org/Windsor.Inline-dependencies.ashx)的最后一节中（相当稀疏地）记录了。

DynamicParameters 允许您直接修改在要求容器解析组件时提供的内联参数集合。然后，该字典可以向上传递到解析管道，使其可用于子依赖项。

`DynamicParameters`有三个重载，每个重载都以一个委托作为其参数。这些委托类型没有明确记录，所以为了后代，这里是 ReSharper（我懒得下载源代码。）告诉我他们的声明看起来像：

```
public delegate void DynamicParametersDelegate(IKernel kernel, IDictionary parameters);
public delegate ComponentReleasingDelegate DynamicParametersResolveDelegate(IKernel kernel, IDictionary parameters);
public delegate ComponentReleasingDelegate DynamicParametersWithContextResolveDelegate(IKernel kernel, CreationContext creationContext, IDictionary parameters); 
```

`DynamicParametersDelegate`对于最基本的情况，您只需要提供不会由容器管理的参数。这可能对我有用，但为了与我首先找到复杂选项的倾向保持一致，我最终为第二个选项做了一条直线，即提供一个手动从容器中提取动态参数的委托。由于 Windsor 在这种情况下管理组件的生命周期，因此您需要确保它已被发布。这就是`DynamicParametersResolveDelegate`出现的地方 - 它就像第一个一样，除了它还返回一个`ComponentReleasingDelegate`( `public delegate void ComponentReleasingDelegate(IKernel kernel);`) ，Windsor 可以使用它在适当的时间发布组件。

（第三个，`DynamicParametersWithContextResolveDelegate`大概是为了修改创建上下文。我对 Windsor 的工作原理了解得不够多，无法真正理解前一句的意思，所以我只好就此打住了。）

这使我可以将示例中的构造函数替换为更好看的构造函数：

```
public class Document
{
    private readonly IDataSource _dataSource;
    private readonly IWidgetRepository _widgetRepository;
    private readonly IWhatsitRepository _whatsitRepository;

    public Document (IDataSource dataSource, IWidgetRepository widgetRepository, IWhatsitRepository whatsitRepository)
    {
        _dataSource = dataSource;
        _widgetRepository = widgetRepository;
        _whatsitRepository = whatsitRepository;
    }
} 
```

工厂被完全移除。相反，神奇的是组件注册代码`IDocument`：

```
container.Register(Component.For<IDocument>()
                   .ImplementedBy<Document>()
                   .DynamicParameters( 
                       (k, d) =>
                       {
                           // ask for an IDataSource, passing along any inline
                           // parameters that were supplied in the request for 
                           // an IDocument
                           var ds = k.Resolve<IDataSource>(d);

                           // Add it to the dictionary.  This makes it available
                           // for use when resolving other dependencies in the tree.
                           d.Add("DataSource", ds);

                           // Finally, pass back a delegate which can be used to release it
                           return (r) => r.ReleaseComponent(ds);
                       })); 
```

所以现在我可以要求一个`IDocument`与我一直在寻找的代码行完全相同的代码：

```
var document = container.Resolve<IDocument>(new { dataSourcePath = somePath }); 
```

并且容器首先调用该`DynamicParameters`委托，该委托为容器提供`DataSource`所提供路径的 a 。从那里容器能够自己解决其余的问题，以便将相同的实例`DataSource`传递给依赖关系图中所有其他三个对象的构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-22T15:06:35.397

我有同样的问题。我对上述解决方案的问题是您将致电：

```
var document = container.Resolve<IDocument>(new { dataSourcePath = somePath }); 
```

在每个需要 IDocument 的地方。我认为我真的应该在程序中的一个点解析我的所有对象，而不是在其他任何地方使用容器。换句话说，从容器中解析一次工厂，然后在程序的其他点使用该工厂。我认为你最初是在正确的轨道上。说了这么多，我无法提供更好的解决方案。

# html - How to remove horizontal scroll on span with twitter-bootstrap?

> ID：13811623
> 
> 赞同：4
> 
> 时间：2012-12-11T00:18:42.520
> 
> 标签：html, css, twitter-bootstrap

I'm using twitter-bootstrap and I keep seeing a horizontal scroll on the right most module (trending) part of this HTML page. When I reduce it from `span2` to `span1`, it makes the image tiny. It doesn't seem like the image or text takes up the rest of the space either. Any advice on how I can get rid of the horizontal scroll?

Additionally, when I make the width of the window smaller the small image thumbnails clash with the main video. How do I fix this as well?

The page can be found [here](http://pastebin.mozilla.org/1986445).

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T00:57:20.903

你会想要`overflow-x`房产

```
.my-class {
    overflow-x: hidden;
} 
```

还有`overflow`（用于垂直和水平溢出）和`overflow-y`（仅用于垂直溢出）。

我知道人们不喜欢 w3school 但这里是溢出 x 可以具有的值[http://www.w3schools.com/cssref/css3_pr_overflow-x.asp](http://www.w3schools.com/cssref/css3_pr_overflow-x.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-28T22:25:58.370

对于内联解决方案：

```
<span style={{
  overflowX: "hidden"
}}> 
```

`hidden`也可以是`scroll`, `auto`, 或`visible`

# java - Iterating through array in Java (deducing a 1D from a 2D array)

> ID：13811625
> 
> 赞同：0
> 
> 时间：2012-12-11T00:18:57.760
> 
> 标签：java, arrays, for-loop, iteration, path-finding

I am trying to write a piece of Java code which can deduce a 1D integer array from a 2D integer array. My 2D array looks something like this:

```
Node1  Node2   Path
 6      8      501
 2      6      500 
 8      10     505 
 2      4      502 
```

And my task is as follows. I want to find "Path"s from elements of the first column (Node 1) to the elements of the second column (Node2). I mean something like these:

Path from "2" to "8" would be `500 501` in that order. And path from "2" to "4" would be `502` (not `500` since it terminates at "6")

I have been trying to achieve this by iterating with simple for loop but have been struggling. Could someone please let me know how I can solve this?

The code snippet which I am trying to write to achieve is this:

```
 PathSequence:
            for(int i = 0; i < PathGraphRow; i++){
                if(PathGraph[i][0] == source){
                    if(i==0)
                    {
                        nextNode = PathGraph[i][1];
                        resultantPaths[counter] = PathGraph[i][2];
                        prev = lightPathGraph[i][2];
                        if(nextNode == dest){
                            break PathSequence;
                        }
                        counter++;
                    }else if(i > 0 && prev != PathGraph[i][2])
                    {
                        nextNode = PathGraph[i][1];
                        resultantPaths[counter] = PathGraph[i][2];
                        prev = PathGraph[i][2];
                        if(nextNode == dest){
                            break PathSequence;
                        }
                        counter++;
                    }
                }

                if(nextNode == PathGraph[i][0] && prev != PathGraph[i][2]){
                    nextNode = PathGraph[i][1];
                    resultantPaths[counter] = PathGraph[i][2];
                    prev = PathGraph[i][2];
                    if(nextNode == dest){
                        break PathSequence;
                    }
                    counter++;                    
                }

                if(i == PathGraphRow-1 && PathGraph[i][2] != resultantPaths[counter]){
                    if(PathGraph[i][1] != dest){
                        resultantPaths = new int[PathCount];
                    }
                }

            }        
    } 
```

Thank you.

Regards

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:36:18.117

除非我忽略了一些细节，否则如果没有子路径，问题就相当简单了。您只需要一个非常具体的 for 循环。

```
 for (int i = 0; i < columns; i++)
 {
      Path path = new Path(array[i][0], array[i][1], array[i][2]);
      pathsArray.Add(path);
 } 
```

那当然是伪代码，但这基本上就是我的做法。我会让每条路径成为一个三元组。我仍然不太明白你打算如何存储数据，如果你把所有的值都放在一个一维 int 数组中，你怎么知道路径的起点和终点？假设所有路径都由可以在 1D 数组中工作的开始、结束和结果定义，尽管使用起来比 2D 数组更糟糕。如果路径是任意长度的，则无法将数据存储在一维数组中。无论如何，这里的代码将提供的表格放在一维数组中（假设没有更大的复杂性）；

```
int[] paths = new int[2dArray.length * 3];
int mapper = 0;

for (int i = 0; i < 2dArray.length; i++)
{
     paths[mapper] = 2dArray[i][0];
     paths[mapper + 1] = 2dArray[i][1];
     paths[mapper + 2] = 2dArray[i][2];
     mapper += 3;
} 
```

然后要访问数组，你需要做一堆 mod 3 废话来知道你得到了哪个值......

```
 if (index % 3 == 0)
    //path start
 else if (index % 3 == 1)
    //path end
 else if (index % 3 == 2)
    // result of path 
```

# clojure - Get Clojure namespaces in current .jar file

> ID：13811629
> 
> 赞同：1
> 
> 时间：2012-12-11T00:19:45.193
> 
> 标签：clojure, namespaces, classpath

I'm looking for a way to get a list of all the current namespaces in the current project, i.e. *excluding* namespaces in imported jars, libraries etc.

Currently I have found [bultitude](https://github.com/Raynes/bultitude) which seems pretty close to what I need and can do:

```
(bultitude.core/namespaces-on-classpath) 
```

However this returns all the namespaces on the classpath, including "clojure.core" etc. rather than just the ones in the current project.

Is there an easy and reliable way to solve this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:47:58.557

[tools.namespace](https://github.com/clojure/tools.namespace)库呢？有api：

```
find-namespaces-in-dir
find-namespaces-in-jarfile
find-namespaces-on-classpath 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T04:03:18.293

这得看情况。

bultitude 背后的想法是在类路径上提供命名空间列表。将考虑该类路径上的任何 .clj 文件。

但是，您只能查找以某个前缀开头的名称空间。通常项目也在其命名空间中以某个前缀开头。那行得通吗？自述文件中的示例：

```
user=> (b/namespaces-on-classpath :prefix "bultitude")
(bultitude.core-test bultitude.core) 
```

如果这还不够好，您可以尝试给它一个只有您的文件所在的类路径，但这可能效果不佳。

```
user=> (b/namespaces-on-classpath :prefix "bultitude" :classpath "src:test")
(bultitude.core bultitude.core-test) 
```

# javascript - 强制在容器元素中的任意位置使用 Drag 事件来拖动容器而不是内部元素

> ID：13811632
> 
> 赞同：0
> 
> 时间：2012-12-11T00:19:56.053
> 
> 标签：javascript, jquery, html, jquery-ui, drag-and-drop

我正在尝试实现一个拖放界面来构建“产品”列表。

**每个“产品”都有以下 HTML：**

```
<div class="pcontainer" data-id="1" draggable="true" ondragstart="drag(event)">

  <p class="productname">...</p>
  <img class="productimage" href="..."/>

</div> 
```

我希望允许用户通过从`productcontainer`产品 div 内的任何位置拖动产品并将其放在目标上来将产品添加到“愿望清单”。

**投放目标如下：**

```
<div id="droptarget" ondrop="drop(event)" ondragover="allowDrop(event)">
  Drop Products Here
</div> 
```

我使用简单的 HTML5 实现了一个原型，它似乎运行良好，除了如果我直接单击 div 内的任何元素，它不会正确拖动。

**Javascript：**

```
function allowDrop(ev)
{
  ev.preventDefault();
}

function drag(ev)
{
  //get the product id (with jquery)
  var $target = $(ev.target);
  var id = $target.attr('data-id');

  ev.dataTransfer.setData("ID",id);
}

function drop(ev)
{
  ev.preventDefault();
  var id=ev.dataTransfer.getData("ID");

  //do stuff to save product to list using its id
  ...
} 
```

[我在 w3schools 这个简单的演示中](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_draganddrop)修改了这段代码。 **有没有一种简单的方法可以使内部元素上的所有拖动转换为容器元素上的拖动？**

***还是有更好的方法来做到这一点？***（浏览器兼容性是这种 html5 方法的一个大问题）。我知道存在一个 jQuery 可拖动库，但我不确定它是否是我真正需要的。

## 更新：

创建了 JSFiddle，这样你就可以看到我的意思了： [JsFiddle Example](http://jsfiddle.net/7mm4R/14/)

如果您从填充中拖动它会发出警报`1`，如果您从图像中拖动它会发出警报`undefined`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:13:57.683

Sooo 是的... jquery-ui 可拖动和可放置正是我所需要的。查看这些[演示](http://jqueryui.com/droppable/)

# multithreading - how to clean redundant threads in ColdFusion

> ID：13811633
> 
> 赞同：0
> 
> 时间：2012-12-11T00:20:06.957
> 
> 标签：multithreading, coldfusion, coldfusion-8

Is there a way of telling which threads are redundant and remove them?

Is this something that might need to be done? or do threads self terminate if they encounter any error or are used for too long?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:08:06.590

您可以获取所有活动线程并杀死它们。通过下面的链接。

[http://coldfusion-tip.blogspot.com/search/label/thread%20kill](http://coldfusion-tip.blogspot.com/search/label/thread%20kill)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T00:51:22.413

您可以在 ColdFusion Administrator 中的**“服务器设置 > 请求调整 > 同时模板请求的最大数量”**下控制可用线程的数量，这将设置准备好接受从网络服务器传递的请求的可用工作人员/线程的数量。您也可以在那里微调其他一些线程设置（直接 CFC/Remoting 请求、报告请求等）。如果遇到 ColdFusion 错误但存在“挂起”线程，线程池应正常回收自身。

线程池应保持在管理员设置的数量。**您可以在“服务器设置 > 设置 > 秒后超时请求”**设置下设置线程的最大运行时间超时。

**使用Server Monitoring > Server Monitor**下的内置服务器监视器您可以转到 Alerts -> Alert Configuration 并根据超时、内存等设置许多线程终止条件，但这确实会增加系统的负载。

[Adobe的 ColdFusion 应用程序性能调整](http://www.adobe.com/devnet/coldfusion/articles/coldfusion_performance.html#articlecontentAdobe_numberedheader_0)文章的这一部分为您提供了一些关于线程的提示/建议。

[Fusion Reactor](http://www.fusion-reactor.com/fr/)是一款出色的商业产品，适用于需要强大控制以实现 ColdFusion 服务器的高可用性的用户。

还[可以查看 CFTracker](http://www.cftracker.net/)，一个免费的/OSS CF 服务器监控项目。

# php - CronJobs Permission Denied

> ID：13811634
> 
> 赞同：0
> 
> 时间：2012-12-11T00:20:09.610
> 
> 标签：php, mysql, sql, cron

Okay, so I made a cronjob to run every two minutes and set it up to send me an email. Well, this is the cronjob. /home/sites/psychowars.com/public_html/cronjobs/energy_minute.php This is the email I receive.. nice:

> /home/sites/psychowars.com/public_html/cronjobs/energy_minute.php: Permission denied

Well, this is the PHP file that's suppose to run.

```
<?php
require '../stats/users_stats.php';
    {
    if ($energy < $max_energy) {
    $sql = "UPDATE users SET energy=(energy + 1) WHERE id='".$id."'";
    $res = mysql_query($sql);
    }
    }
?> 
```

Every 2 minutes the user should recieve 1 energy if it's less than their max energy. Any solutions on what's wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:59:23.323

[你在这里](https://stackoverflow.com/questions/2100545/serverdocument-root-does-not-work-in-the-php-script-running-through-cron)有答案

$_SERVER 变量不是从 cron 作业中设置的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:26:25.433

尝试在脚本开始时手动设置 $_SERVER["DOCUMENT_ROOT"] 并且不要对 cronjob 脚本使用相对路径：

```
$_SERVER["DOCUMENT_ROOT"] = "/home/sites/psychowars.com/public_html";
require $_SERVER["DOCUMENT_ROOT"].'/stats/users_stats.php';
if ($energy < $max_energy) {
  $sql = "UPDATE users SET energy=(energy + 1) WHERE id='".$id."'";
  $res = mysql_query($sql);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-12T15:53:11.517

如果仍然无法正常工作，您可以通过 www.guardiano.pm 外包您的 cronjob 并调用 http 帖子或向 yoursite.com/users_stats.php 获取请求，这样您就无需关心 cronjobs。如果您唯一需要的是恕我直言，您可以避免这种情况

# java - Custom AlertDialog.Builder class in android won't show

> ID：13811635
> 
> 赞同：0
> 
> 时间：2012-12-11T00:20:16.983
> 
> 标签：java, android, sqlite, google-maps

I'm currently writing a program that will use the Geocoder to search for possible GeoPoints of a city search. I then take the geopoints and add it to a map as overlays, the user can then click the overlay, and an alert dialog will pop up to ask if he/she is sure that this is the right one.

I couldn't figure out a way to get the alert dialog to work like swing where after the user clicks yes or no, I can retrieve the answer. So I extended the AlertDialog.Builder class like so, which also happens to be a Dialog.OnClicklistener

```
public class MyAlertDialog extends AlertDialog.Builder implements DialogInterface.OnClickListener{ 
final static int positiveMessage = 1;
final static int negativeMessage = 0; 
final static int neutralMessage = -1;

private int myMessage; 

public MyAlertDialog(Context activity) {
    super(activity);
}

@Override
public void onClick(DialogInterface dialog, int which) {
    if(which == dialog.BUTTON_POSITIVE){
        myMessage = positiveMessage;
    }
    else if(which == dialog.BUTTON_NEGATIVE){
        myMessage = negativeMessage;
    }
    else{
        myMessage = neutralMessage;
    }
}

public int getMessage() {
    return myMessage;
} 
```

and I implement it like so

```
 protected boolean onTap(int index) {

    OverlayItem item = overlays.get(index);
      MyAlertDialog dialog = new MyAlertDialog(ctx);
      dialog.setTitle(item.getTitle());
      dialog.setMessage("Is this the " + item.getTitle()
              + " you're looking for?");
      dialog.setPositiveButton("Yes",null);
      dialog.setNegativeButton("Cancel", null);
      dialog.show();

      if(dialog.getMessage()== MyAlertDialog.positiveMessage){
               //do some stuff 
```

But for some reason the dialog wont show until after the method has returned, so it never does the stuff. Anyone have any ideas? Oh and ctx is a reference to my mapActivity

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:36:03.483

这是因为该`dialog.show();`方法在返回之前不会等待用户与 Dialog 交互。它的功能与名称所暗示的完全一样，仅此而已；它*显示*对话框，然后返回。因此，这意味着您的 myMessage 字段将始终为空，并且此条件永远不会为真：

```
 if(dialog.getMessage()== MyAlertDialog.positiveMessage){ 
```

相反，您应该做的是为您的正面和负面按钮传递 OnClickListener，并在相应的 OnClickListener 中执行您需要的任何操作。您甚至不需要创建 AlertDialog.Builder 的子类，因为这样做没有任何好处。看起来是这样的：

```
dialog.setPositiveButton("Yes", new DialogInterface.OnClickListener(){
    @Override
    public void onClick(DialogInterface dialog, int which){
        // Do some positive stuff here!
    }
});
dialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener(){
    @Override
    public void onClick(DialogInterface dialog, int which){
        // Do some negative stuff here!
    }
}); 
```

# fpga - how to take a picture fpga and verilog

> ID：13811639
> 
> 赞同：-2
> 
> 时间：2012-12-11T00:21:03.597
> 
> 标签：fpga

I have cyclone II fpga and also ı have a camera attached to it.Fisrtly ı want to take a capture from camera and this capture is passing to fpga and ı want to take this capture from serial port.Can you give me ideas how can do this or are there any example code about this.I am working with verilog .

thanks for help...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:56:02.960

您需要研究相机如何准确地连接到您的 FPGA 以及您需要如何与之通信。一旦你理解了这个协议和它的连接，你将在 90% 的道路上理解你需要做什么，或者至少能够更好地提出更具体、更智能的问题。=)

例如，您有可能在名为 Camera Link 的总线上使用相机。如果是这样，您将需要阅读协议（例如从[https://en.wikipedia.org/wiki/Camera_Link](https://en.wikipedia.org/wiki/Camera_Link)开始），然后确定您是否要自己用 HDL 编写自定义接口（如 Verilog ) 或者如果您要尝试从第 3 方获取和使用现有设计。

一旦你知道如何获取图像，那么你需要做同样的发现来弄清楚你将如何将这些图像发送到你的 PC。您是否已经了解 RS-232 和 UART（或 USB，或您使用的任何东西）？如果没有，您将需要学习足够的知识来实现​​这些接口，或者至少要与您在其他地方获得的现有设计进行接口。

在排序 - 在任何人可以帮助您提供任何具体建议之前，您确实需要进行更多研究。=)

# php - Serialize a div for form input

> ID：13811640
> 
> 赞同：0
> 
> 时间：2012-12-11T00:21:11.653
> 
> 标签：php, jquery, ajax

developing a light weight CMS system where users are able to change text and add an image. Was hoping to use form.textarea, unfortunately textarea doesn't allow HTML tags, at least not image tag. So I've changed the form input to div from textarea. My question is how can I easily pass the div contents to a PHP script as a POST variable, similar to how the textarea would work.

Here are some code snippets: In the HTML head, using this JQuery to append the image code when to the div content when an image icon (imgBtn) is clicked.

```
 <script language="javascript" type="text/javascript">
   $("#imgBtn").live("click",function(){
     var path = "path/to/file.jpg";
     var imgcode = '<img src="' + path + '" alt="User Image">';
 $('.textarea').append(imgcode);
});
 </script> 
```

Then later in the HTML body, using this PHP to generate the initial DIV or write the new data to a text file via the filewrite() class.

```
 <?php
 if ($submit==true){    //$_POST['submit']
 $string = $text;       //$_POST['text'] this is where I need the POST text
 $flag=HTML;
 $scrubstring = sanitize($string,$flag,2,1200); //cleans input
 $scrubstring = trim($scrubstring);
    if ($scrubstring){
    //scrubber returns true, write text to the file.
$filewrite = new filewrite();
    //path (from root dir),string to write
$filewrite->writer("aboutus/".$file,$scrubstring);
    }
      echo '<div contenteditable="true" class="textarea">';
  echo $scrubstring.'</div>';
}else{
  $fread = new filewrite(); //instantiate the class
  $output=explode(",",$fread->readlastline($file));
  echo '<div contenteditable="true" class="textarea">';
  echo $output[1].'</div>';
    }
   ?> 
```

So in short, I need the div "textarea" to behave like a textarea. As always, thank you in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:30:28.737

```
<script type="text/javascript">
$(function() {
  $('#form').submit(function(){
    $('#txa').val($('#content').html());
  });
});
</script>

<?php
  echo $_POST['txa'];
?>

<div id="content">
  <h1>abcde</h1>
</div>

<form method="post" action="?" id="form">
  <input type="hidden" name="txa" id="txa" value="123" />
  <input type="submit" />
</form> 
```

# objective-c - NSMutableArray 不断返回 null

> ID：13811643
> 
> 赞同：1
> 
> 时间：2012-12-11T00:21:44.607
> 
> 标签：objective-c, ios, xcode

我在头文件中声明了一个属性 NSMutableArray。然后我分配，在 viewDidLoad 方法中初始化它。但是当我尝试以不同的方法将对象添加到数组时，它会不断返回（null）。我在做一些明显的错误吗？请询问您是否想查看更多代码。

。H

```
@property (strong, nonatomic) NSMutableArray *myList; 
```

.m

```
- (void)viewDidLoad
{
    self.dataController = [[DataController alloc]init];

    self.myList = [[NSMutableArray alloc] init];

    [super viewDidLoad];
} 
```

[...]

```
NSDictionary *myObject = [self.dataController.objectList objectAtIndex:r];
[[cell textLabel]setText:[myObject objectForKey:@"title"]];

[self.myList addObject:myObject]; 

NSLog(@"myList %@",self.myList);
NSLog(@"myObject %@",myObject); 
```

输出打印 myObject 但 self.myList 不断返回（空）。感谢所有帮助！

**编辑：**已修复，谢谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:52:25.443

不确定你在哪里使用这个数组。如果你必须在调用之前使用这个数组`viewDidLoad`，你可以这样做，

```
NSDictionary *myObject = [self.dataController.objectList objectAtIndex:r];
[[cell textLabel]setText:[myObject objectForKey:@"title"]];

if (!self.myList)
    self.myList = [[NSMutableArray alloc] init];//for the first time, this will initialize

[self.myList addObject:myObject]; 
```

由于您使用的`[cell textLabel]`是我假设您在其中一个表视图代表中执行此操作。在这种情况下，请检查您是否在课堂上设置`self.myList = nil;`任何位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:28:52.797

在您发布的代码中，我没有看到任何错误。设置断点并查看初始化数组的代码是否首先被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T00:29:43.480

我敢打赌，在执行 NSLogs 时，还没有调用 viewDidLoad。

为确保数组已初始化，请尝试将初始化放在您的 init 方法中。

# html - IE injects VBScript tags in the middle of rendering, causing malformed HTML

> ID：13811644
> 
> 赞同：2
> 
> 时间：2012-12-11T00:21:55.907
> 
> 标签：html, internet-explorer, plugins, vbscript

For some reason, it seems like IE9 (I believe IE8 too, but not sure), is injecting

```
<SCRIPT LANGUAGE=VBScript>on error resume next pluginFound = IsObject(CreateObject("DIFFERENT PLUGIN EVERY TIME")) 
```

in the middle of my content without any regards to surrounding context. This means it gets added in the middle of an attribute, or in the middle of some JavaScript, causing the HTML to be malformed and causing all sorts of problems.

This happens on multiple computers with different plugins, so it's not machine specific. And it's also not consistent: the location in which the offending script gets injected varies, the offending script varies. Sometimes you'll get several page loads without a problem and then you'll get the broken HTML.

![Developer Tools](../Images/545c19df1387ff1c6be58709c7547142.png)

My page is using a fair amount of JS, but nothing crazy. It's currently using jQuery, Google Maps, Bootstrap, Google Tag Manager, and loading a couple of Twitter, Google+, Facebook Iframes with their own little JS snippets. So, there are some asynchronous callbacks happening, but I wouldn't think this would interfere with how the browser renders the DOM and when it decides to inject plugin code.

You can see the problem if you reload [http://www.rew.ca/properties/search/839721](http://www.rew.ca/properties/search/839721) enough times. If you scroll to the bottom of the page, you'll see raw JSON, or sometimes just some random HTML snippet will show in the middle of the page (because of mismatched tags).

Any ideas of why these scripts get injected arbitrarily and how to work around that?

Thanks

[UPDATE] Here's another example of the script tags getting included in the middle of HTML content: ![enter image description here](../Images/2ebf7060e3b31d3499f74fd57480cecf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T21:04:30.747

在我看来，问题出在[http://cn.clickable.net/js/cct.js](http://cn.clickable.net/js/cct.js)脚本上，具体`IsIEPlugin`出在类的方法上`__cct_tracker`：

```
this.IsIEPlugin = function (e) {
  var t = !1;
  return document.write('<SCRIPT LANGUAGE=VBScript>\n on error resume next \n pluginFound = IsObject(CreateObject("' + e + '")) </SCR' + "IPT>\n"), t ? 1 : 0
} 
```

这个方法被多次调用，使用不同的参数：

```
this.pixelRequestParams.cctDir = this.IsIEPlugin("SWCtl.SWCtl.1"),
this.pixelRequestParams.cctFlashPlugin = this.IsIEPlugin("ShockwaveFlash.ShockwaveFlash.1");
if (this.IsIEPlugin("PDF.PdfCtrl.1") == 1 || 
    this.IsIEPlugin("PDF.PdfCtrl.5") == 1 || 
    this.IsIEPlugin("PDF.PdfCtrl.6") == 1) 
  this.pixelRequestParams.cctPdf = 1;
this.pixelRequestParams.cctQuickTime  = this.IsIEPlugin("Quicktime.Quicktime"),
this.pixelRequestParams.cctRealPlayer = this.IsIEPlugin("rmocx.RealPlayer G2 Control.1"), 
this.pixelRequestParams.cctWmPlayer   = this.IsIEPlugin("wmplayer.ocx") 
```

我想（即使我不确定）“cct”代表“可点击转化跟踪”，所以它一定是某种跟踪代码。
经过进一步调查，我确定“cct.js”脚本由[Google 跟踪代码管理器](http://support.google.com/tagmanager/answer/2772432?hl=en)(GTM) 脚本[http://www.googletagmanager.com/gtm.js](http://www.googletagmanager.com/gtm.js?id=GTM-X9BN)加载。
因此，如果我没记错的话，通过从您的 HTML 页面中删除 GTM 代码段，您应该能够解决问题。
GTM JavaScript 代码动态注入的 VBSCRIPT 代码似乎有时没有执行，但不要问我为什么，因为我真的不知道。

# jquery - Selector with context in jquery

> ID：13811645
> 
> 赞同：0
> 
> 时间：2012-12-11T00:22:14.393
> 
> 标签：jquery, selector

With jQuery, I do the following

```
MyCompaniesInfo = $('input[name^="Companies"]'); 
```

And the console gives me this (Firebug):

```
MyCompaniesInfo

Object[input b1280bf5...73a2a334, input#Companies_b1280bf5-102e-4592-a1b1-53e973a2a334__IsExist False, input#Companies_b1280bf5-102e-4592-a1b1-53e973a2a334__Type Company, 29 more...]

0 input#Companies_b1280bf5-102e-4592-a1b1-53e973a2a334__Name.text-box
1 input#Companies_b1280bf5-102e-4592-a1b1-53e973a2a334__phone.text-box
2 input#Companies_b1280bf5-102e-4592-a1b1-53e973a2a334__address.text-box
3 input#Companies_b1280bf5-102e-4592-a1b1-53e973a2a334__street.text-box
4 input#Companies_b1280bf5-102e-4592-a1b1-53e973a2a334__anotherthing.text-box
5 input#Companies_b1280bf5-102e-4592-a1b1-53e973a2a334__another.text-box
6 input#Companies_b1280bf5-102e-4592-a1b1-53e973a2a334__blabla.text-box
7 input#Companies_b1280bf5-102e-4592-a1b1-53e973a2a334__loremipsum.text-box

8 input#Companies_b1280bf52a1b1-53e973a2a334__Name.text-box
9 input#Companies_b1280bf5a1b1-53e973a2a334__phone.text-box
10 input#Companies_b1280bf5a1b1-53e973a2a334__address.text-box
11 input#Companies_b1280bf5a1b1-53e973a2a334__street.text-box
12 input#Companies_b1280bf5a1b1-53e973a2a334__anotherthing.text-box
13 input#Companies_b1280bf5a1b1-53e973a2a334__another.text-box
14 input#Companies_b1280bf5a1b1-53e973a2a334__blabla.text-box
15 input#Companies_b1280bf5a1b1-53e973a2a334__loremipsum.text-box 
```

....

Now I want all fields that end in "Name", for example, so, I tried this:

```
$('input[name$="Name"]', MyCompaniesInfo).val('Name'); 
```

but that doesn't work. How can I continue to select with jquery after `MyCompaniesInfo = $('input[name^="Companies"]');`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:27:33.233

问题是当您使用第一个选择器时，`MyCompaniesInfo = $('input[name^="Companies"]');`您将在`MyCompaniesInfo`.

然后，如果要过滤必须使用的元素`filter`，如下所示。

```
$(MyCompaniesInfo).filter('input[name$="Name"]') 
```

为什么下面的代码不起作用？ `$('input[name$="Name"]', MyCompaniesInfo)`
因为它是相同的`$(MyCompaniesInfo).find('input[name$="Name"]')`并且 find 只通过 DOM 树进行搜索，就像它在 api 上描述的一样。

`Given a jQuery object that represents a set of DOM elements, the .find() method allows us to search through the descendants of these elements in the DOM tree and construct a new jQuery object from the matching elements.`

在这里你可以看到一个[**演示**](http://jsfiddle.net/JppNb/)。

# java - Problems with SLE4428 smart card

> ID：13811647
> 
> 赞同：2
> 
> 时间：2012-12-11T00:22:17.967
> 
> 标签：java, smartcard, smartcard-reader

I have EZ100PU usb smart card reader and new (clear) SLE4428 smart cards. I would like to write number sequence on them. I'm trying to do it with simple java application. That's my code based on others available on the internet:

```
public class Connection {

  public static void main(String[] args) throws Exception { 

    TerminalFactory factory = TerminalFactory.getDefault();

    CardTerminal terminal = terminals.get(1); 
    System.out.println("terminal: " + terminal.getName());
    Card card = terminal.connect("*");
    System.out.println("card: " + card);
    CardChannel channel = card.getBasicChannel(); 
    System.out.println("channel: " + channel.getChannelNumber());
    System.out.println("protocol: "+card.getProtocol());

    byte b[]=card.getATR().getBytes();
    for(int i=0;i<b.length;i++)
       System.out.print(b[i]);

//        byte[] bytes = {(byte)0xFF, (byte)0x00, (byte)0xFF, (byte)0x00};
//        ResponseAPDU r = channel.transmit(new CommandAPDU(bytes));

    card.disconnect(false);

  }
} 
```

I have problem, because I always get "Unknown protocol 16" when card is inside reader. Probably because of that I can't write anything on the card, if I try I always get error. Can you help me?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-26T07:06:28.457

您的 SLE 4428 卡的默认 PIN = FFFF。首先，您需要使用以下命令验证 PIN：- FF 20 00 00 02 FFFF 然后您可以将数据写入 SLE 4428 卡。如果数据是“我的名字是 Kashyap”，那么十六进制是 4D79206E616D65206973204B617368796170。写入数据：- FF D0 00 20 12 4D79206E616D65206973204B617368796170。您还可以更改默认 PIN。假设我想将 PIN 从 FFFF 更改为 1234，然后使用以下命令：- FF D0 03 FD 03 FF 1234。

要读取以下命令的数据：- FF B0 00 20 12

谢谢， 卡什亚普

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:25:51.377

您正在尝试使用一种连接 ISO 7816-3（T=0、T=1 或 T=CL）兼容处理器卡的方法来连接低存储卡。您可能不得不使用特定于卡的读卡器库，而不能只使用`javax.smartcardio`.

# playframework - http chunked, tcp flow control and playframework combined

> ID：13811651
> 
> 赞同：2
> 
> 时间：2012-12-11T00:22:41.337
> 
> 标签：playframework, playframework-2.0, playframework-1.x, playframework-2.1

So, we may be streaming tons of data from an http server through an http server to a client. So http chunking + tcp flow control comes to mind. Normally to be a man in the middle like this, our man in the middle would read from a downstream asynch socket and try to write upstream and if the write was async, we would need a callback. We would NOT read from the downstream socket again until the write callback is called which would cause tcp flow control to automatically take affect once the nic buffer fills up(at least I have seen this occur before correctly).

So I think I have two questions really

1.  Does any version playframework have a write callback so we know when the write has officially been sent through such that we can continue processing again.
2.  Does anyone know of a java http client that calls a hasData and I have to invoke a read next chunk until I stop which calls the typical hasHeaded(Headers h), hasStatus(HttpStatus), hasChunk(HttpChunk chunk)

Well #2 would be ideal but anything close would be nice.

Also, if I am wrong on any points, feel free to correct me.

thanks, Dean

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:46:08.740

我应该添加更多信息，如果我记得，我会更新（当我通过电子邮件收到通知时，你可以通过发表评论来提醒我）。

我们调查了它，这不是太多的工作。netty 中有一个 http 类，我们必须复制和修改 play 以添加我们修改的类，我们必须修改 play 以具有 writeChunk(chunk, callback) 以便回调将在写入时提供给 netty 调用已经完成。

在下游，我们移植了 channelmanager（我在 pre-netty 和 pre-mina 中编写了一些东西，没有管道和所有复杂性，但看起来就像 java 的 Sockets，只是你注册了监听器来收听数据）。这个新的通道管理器只是不断地为您提供具有 ByteBuffer 的 DataChunk，直到您调用 Datachunk.setProcessed，我们实际上停止从该套接字读取，从而允许启动 tcp 流控制。

我们计划利用 netty 的解析器。尽管 netty、grizzly 和 mina 都犯了将解析器与框架绑定得太紧的错误 :( :(....当它认为解析器不将其绑定到框架时的第一件事......哦，好吧。也就是说，所有 3 人都为我如何利用他们的解析器提供了一些很好的建议，所以我不必重写那部分....正确地执行 tcp 流已经是一个巨大的痛苦，并且花了我 2 天的时间来测试中断/固定在频道管理器上。

一旦这一切都在发挥作用并连接到 async-http-client 下可以有不同的 nio 库，然后我可以轻松地接受一大块数据，当我最终 writeChunk(newChunk, callback) 时，我可以传入一个回调调用 DataChunk.setProcessed 以允许下游再次继续。如果您聚合流，或者如果您只是想在一个非常讨厌的客户面前保持稳健，该客户向您发送一些东西但让他的 nic 填满，这将非常有用。

事实上，这可能是对网络服务器的一种新型攻击，它在许多网络服务器上都有效，但它根本不会影响我们的服务器；）。您可以编写一个客户端来写入，然后不从套接字读取，让 nic 填满并继续写入服务器……最终，随着 tcp 流控制启动，许多服务器将挂起写出……我应该有一天在tomcat和旧的playframework等上尝试一下。

# jquery - Issues selecting class in table

> ID：13811652
> 
> 赞同：3
> 
> 时间：2012-12-11T00:22:41.763
> 
> 标签：jquery

I am just diving into jquery, so please excuse any really silly mistakes...

I have a table I am generating from a database.

```
<table id="DataTable">
    <tr>
        <th><input type="button" onclick=doCheck()></th>
        <th>col 2</th>
        <th>col 3</th>
        <th>col 4</th>
        <th>col 5</th>
    </tr>
    <tr>
        <td><input type="checkbox" /></td>
        <td>data 2</td>
        <td>data 3</td>
        <td>data 4</td>
        <td class="thisOne">data 5</td>
    </tr>
 .
 .
 .
  </table> 
```

I need to perform some validation checks on column5, labeled `thisOne`, based on whether or not it is in a row where the box is checked. Here is what I have so far:

```
//Get checkboxes
var boxes = $("#DataTable").find("tr td input[type=checkbox]");
var locations = [];
boxes.each(function (index, element) {
        if ($(element).is(':checked')) {
            //Code here
        }
    }); 
```

In the area marked `//code here` I have tried many things and have not been able to successfully select the column I want. Some things I have tried (NOTE: I am using `Hide()` for testing purposes):

```
$(this).closest("td").next('.thisOne').hide(); Doesn't work
$(this).parent("td").next('.thisOne').hide();  Doesn't Work
$(this).closest("td").hide();                  Works as expected
$(this).closest("td").next().hide();           Works as expected
$('.thisOne').hide();                          Works as expected 
```

Shouldn't the first line I listed work? `.closest()` will navigate up to the `td` level, where `.next('thisOne')` will traverse the DOM until a `td` tag with that class is found? Please explain any answers as I am really curious as to why this is not working. Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T00:25:58.053

你需要的是[`.siblings()`](http://api.jquery.com/siblings)

```
$(this).closest('td').siblings('.thisOne').hide(); 
```

* * *

此外，由于`#datatable`是一个表格，您不需要指定`tr td`.. 只需选择复选框..

```
var boxes = $("#dataTable :checkbox"); 
```

finally`checked`也是 checkbox 的一个属性，所以不需要通过 jQuery 来查询它。你可以使用`element.checked`.

共

```
var boxes = $("#dataTable :checkbox");
var locations = [];
boxes.each(function () {
        if ( this.checked ) {
            //Code here
            $(this).closest('td').siblings('.thisOne').hide();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T01:58:44.543

```
var boxes = $("#DataTable :checkbox");
$.each(boxes, function() {
    if ( $(this).is(':checked') ) {             
        $(this).closest('td').siblings('.thisOne').hide();
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T00:27:08.600

您正在寻找的线应该是这样的 -

```
$(element).closest('tr').find('td.thisOne'); 
```

让我们分解一下，

1.  `$(element)`- 复选框本身。
2.  [`closest('tr')`](http://api.jquery.com/closest/)最接近的父元素是 a `<tr>`。
3.  [`find('td.thisOne')`](http://api.jquery.com/find/)- 从该父元素中，找到`<td>`具有`thisOne`该类的元素。

```
//Get checkboxes
var boxes = $("#DataTable").find("tr td input[type=checkbox]");
var locations = [];
boxes.each(function (index, element) {
  if ($(element).is(':checked')) {
    var thatOne = $(element).closest('tr').find('td.thisOne');
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T00:32:06.027

要回答您的问题：

[`.next()`](http://api.jquery.com/next/)不起作用，因为**它只**找到下一个兄弟。

对于您的情况，您需要[`.nextAll()`](http://api.jquery.com/nextAll/)找到**所有以下兄弟姐妹**，即

```
$(this).closest("td").nextAll('.thisOne').hide(); 
```

详细分解：

```
$(this)                // This is your checkbox.
.closest("td")         // This gets its closest ancester "td".
.nextAll('.thisOne')   // This finds the closest following sibling that has the class "thisOne".
.hide(); 
```

工作演示[在这里](http://jsfiddle.net/tr53C/1/)。

# linux - Are the results of the Linux time command affected by system load?

> ID：13811656
> 
> 赞同：4
> 
> 时间：2012-12-11T00:23:02.427
> 
> 标签：linux, time, load, benchmarking

I'm using the Linux shell `time` and GNU time commands for some basic benchmarking.

But my system occasionally has varying load from other users.

Are the "user" and "sys" outputs affected by these other users?

I would think for a program with pure processing, that the results should be unaffected as the OS is (I would think) capable of tracking process time shares pretty exactly.

I'm less sure what the outputs would be for I/O heavy processes.

Can anyone explain these relations? Citations are always welcome.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:16:24.337

time 命令不报告上下文切换开销，因为它不是系统调用。因此，由于上下文切换，您不会看到系统时间输出有任何变化。如果由于其他用户的 IO/CPU 请求而导致资源争用，那么这将影响您的阻塞时间和完成时间，因此`sys`时间`user`可能会非常高。

# python - Django postgresql foreign key

> ID：13811659
> 
> 赞同：7
> 
> 时间：2012-12-11T00:23:51.547
> 
> 标签：python, django, postgresql, foreign-keys

I have this models.py

```
from django.db import models
from django.contrib.auth.models import User

class Service(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=800, blank=False)
    service = models.CharField(max_length=2000, blank=False)
    def __unicode__(self):
        return self.name

class ServiceCheck(models.Model):
    service = models.ForeignKey(Service)
    check_status = models.CharField(max_length=80)
    check_time = models.DateTimeField() 
```

When i run syncdb against postgresql it ends up with error:

```
~/dev-md> sudo python manage.py syncdb
Creating tables ...
Creating table monitor_service
Creating table monitor_servicecheck

DatabaseError: Hash/Modulo distribution column does not refer to hash/modulo distribution column in referenced table. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T09:21:07.253

代码乍一看还不错*。*我怀疑这是与数据库相关的问题。

由于`max_length`提供的 s 非常大，请尝试将`max_length`s 减少到 <= 255 或使用 a`TextField`而不是 a `CharField`。

如果做不到这一点，请尝试重命名和/或`service`中的字段。`Service``ServiceCheck`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-16T04:55:20.170

您遇到的问题实际上与 Postgres-XC/StormDB（或现在的 Postgres-XL，我遇到此问题的地方）如何处理不同数据节点之间的表分区有关。

基本上，问题在于数据库引擎不能保证外键或唯一约束的约束。根据StormDB 网站上关于以前版本 Django 和 Postgres-XC/StormDB的旧[文章](http://www.stormdb.com/content/getting-django-work-postgres-xcstormdb "让 Django 与 Postgres-XC/StormDB 一起工作")`loose_constraints=true`，您可以通过在数据库上进行设置来做到这一点。在现代版本的 Django（1.6 或更高版本）中，等效项似乎是`db_constraint=False`根据 Django 的模型字段文档（我无法直接链接到它，因为我没有足够的代表）设置在 ForeignKey 上。

如果您更关心可用性而不是性能，另一种解决方案是复制数据，这意味着您不会遇到问题，因为所有数据节点都具有相同的数据。我不知道有什么方法可以直接在 Django 中执行此操作，但您可以修改表创建以使用[CREATE TABLE](http://postgres-xc.sourceforge.net/docs/1_1/sql-createtable.html "创建表")文档`DISTRIBUTE BY REPLICATION`中的详细说明。

# matlab - 如何掌握 MATLAB 中的随机生成器以应用于引导人工神经网络模型

> ID：13811660
> 
> 赞同：2
> 
> 时间：2012-12-11T00:24:05.760
> 
> 标签：matlab, artificial-intelligence, random-sample, set-difference

我正在处理水文时间序列数据，并且正在尝试构建 Bootstrap 人工神经网络模型。为了使用置信区间提供不确定性评估，必须确保在重新采样/引导原始时间序列数据集时，原始时间序列中的每个值在所有引导样本中至少保留两次，以便计算方差和那个时间点的置信区间。

提供一些背景：

我正在使用一个包含每月时间步长的标准降水指数值的水文时间序列，这个时间序列跨越 429（行）x 1（列），我们称之为时间序列向量`X`。的所有元素/值在`X`和 之间进行标准化和`0`标准化`1`。

`X`然后针对神经网络中的一些目标值（与 相同的长度和条件）训练时间序列`X`，以生成对目标值的新估计，我们称之为输出向量`O`（与 相同的长度和条件`X`）。

我现在要对其进行`X`重新采样`ii =1:1:200`（即 Bootstrap size = `200`）以替换长度（429）。让我们将放置所有引导样本的矩阵称为`M`。我使用`B = randsample(X, length(X), true)`并使用 for 循环进行填充`M`，这样`M(:,ii) = B`. 注意：我还确保`rng('shuffle')`在我的`randsample`声明之后加入，以保持 RNG 移动到新状态，希望它能提供更多随机结果。

现在我要测试我的数据被重新采样以用于创建置信区间的“好坏”程度。

我的程序如下：

1.  使用上述过程生成一个 for 循环以创建 M
2.  创建一个新变量`Xc`，这将保存所有`X`未在引导示例中重新采样的值`ii for ii = 1:1:200`
3.  `For j=1:1:length(X) fill 'Xc' using the Xc(j,ii) = setdiff(X, M(:,ii))`，如果元素`j`存在，则用`M(:,ii)`填充。`Xc(j,ii)``NaN`
4.  `Xc`现在是一个与 大小和维度相同的矩阵`M`。计算`NaN`每行中值的数量`Xc`并将其放入 vector 中`CI`。
5.  如果 中的任何行`CI`是`> [Bootstrap sample size, for this case (200) - 1]`，则此时无法创建置信区间。

当我运行它时，我发现从我的集合 X 中选择的值几乎总是重复的，即相同的值`X`用于生成 中的所有样本`M`。它与我的原始时间序列中的大约 200 个数据点大致相同，这些数据点总是被选择来创建新的引导样本。

我怎样才能有效地改变我的程序或使用任何特定的功能来避免（5）中的负面解决方案？

这是我的代码示例，但请记住，脚本中使用的变量可能与我在此处的文本不同。

感谢您的帮助，请参阅下面的代码。

```
for ii = 1:1:Blen % for loop to create 'how many bootstraps we desire'
    B = randsample(Xtrain, wtrain, true); % bootstrap resamples of data series 'X' for 'how many elements' with replacement
    rng('shuffle');
    M(:,ii) = B; % creates a matrix of all bootstrap resamples with respect to the amount created by the for loop
    [C,IA] = setdiff(Xtrain,B); % creates a vector containing all elements of 'Xtrain' that were not included in bootstrap sample 'ii' and the location of each element
    [IAc] = setdiff(k,IA); % creates a vector containing locations of elements of 'Xtrain' used in bootstrap sample 'ii' --> ***IA + IAc = wtrain***

    for j = 1:1:wtrain % for loop that counts each row of vector
            if ismember(j,IA)== 1 % if the count variable is equal to a value of 'IA'
                XC(j,ii) = Xtrain(j,1); % place variable in matrix for sample 'ii' in position 'j' if statement above is true
            else
                XC(j,ii) = NaN; % hold position with a NaN value to state that this value has been used in bootstrap sample 'ii'
            end
            dum1(:,ii) = wtrain - sum(isnan(XC(:,ii))); % dummy variable to permit transposing of 'IAs' limited by 'isnan' --> used to calculate amt of elements in IA
            dum2(:,ii) = sum(isnan(XC(:,ii))); % dummy variable to permit transposing of 'IAsc' limited by 'isnan' 
            IAs = transpose(dum1) ; % variable counting amount of elements not resampled in 'M' at set 'i', ***i.e. counts 'IA' for each resample set 'i'
            IAsc = transpose(dum2) ; % variable counting amount of elements resampled in 'M' at set 'i', ***i.e. counts 'IAc' for each resample set 'i'
            chk = isnan(XC); % returns 1 in position of NaN and 0 in position of actual value
            chks = sum(chk,2); % counts how many NaNs are in each row for length of time training set
            chks_cnt = sum(chks(:)<(Blen-1)); % counts how many values of the original time series that can be provided a confidence interval, should = wtrain to provide complete CIs
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:29:46.840

这似乎不是 randsample 的问题，而是您的其他代码中的问题。randsample 做正确的事。例如：

```
x = (1:10)';
nSamples = 10;
for iter = 1:100; 
   data(:,iter) =  randsample(x,nSamples ,true); 
end; 

hist(data(:)) %this is approximately uniform 
```

randsample 样本非常随机......

# php - IMG SRC 使用 MySQL 和 PHP 的路径

> ID：13811662
> 
> 赞同：-1
> 
> 时间：2012-12-11T00:24:14.000
> 
> 标签：php, html, image

我有以下似乎不起作用的代码行：

```
echo "<img src='/images/albumart'"; echo $row['art1']; echo "/>"; 
```

'art1' 肯定会返回 '/imagename.png'，因此 URL 应该是完整的，但没有显示任何内容。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T00:27:27.053

你真的应该连接那个字符串：

```
<?php
echo '<img src="/images/albumart'.$row['art1'].'"/>'; 
?> 
```

理想情况下打破 php 来做到这一点：

```
<img src="/images/albumart<?php echo $row['art1']; ?>"/> 
```

如果你不熟悉，php 中的句点加入字符串。这叫做串联。不需要像那样回应一点点，事实上请永远不要按照你演​​示的方式去做。正如 Geoff 指出的那样，您的问题的根源是您没有关闭 src 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:27:13.187

```
echo "<img src='/images/albumart'"; echo $row['art1']; echo "/>"; 
```

看起来您正在专辑部分之后关闭 img src 参数。，

尝试这个：

```
echo "<img src='/images/albumart"; echo $row['art1']; echo "' />"; 
```

# java - Java Eclipse 加密问题

> ID：13811668
> 
> 赞同：0
> 
> 时间：2012-12-11T00:25:01.190
> 
> 标签：java, encryption

我需要制作一个程序来加密和解密用户输入的内容。我很难找到一种方法来组合所有字符来制作加密词。这是我的代码（我正在使用 Eclipse）：

```
 import java.util.Scanner;

        public class Encryption 
        {
            public static String message = "";
            public static boolean hasMessage = false;
            public static boolean encrypted = false;
            static char a = 0; 
            static char b;
            static int w;
            static int x;
            static int y;
            static int z;
        static int i;

            public static void display()
            {
                System.out.println("Message: " + message + "\n");
            }

            public static void encrypt(String word)
            {
                if(!hasMessage)
                {
                    System.out.println("No message");
                    // Tell the user there is no message
                }
                else if(encrypted)
                {
                    System.out.println("Message is already encrypted");
                    // Tell the user the message is already encrypted
                }

                else
                {

                    // Reset the message to blank
            for (int i = 0; i < message.length(); i++) {
                i = j;
                ``char a = message.charAt(i);
            for (int j=0; j==message.length(); j++) 
            {
                int w = (int) a * 2;
                int x = (int) w + 2;  
                char y = (char) x; 
            }
            }
    }

=

                    //get char from each letter (increase char each time),  cast as int

                }
                System.out.println(message);
                encrypted = true;

                // Using the parameter word, modify message
                // to contain a new value following a predictable pattern
                // Hint:  alter each character's ASCII value by casting
                //        to an integer and using math operators

                // Display the new message
                // Set encrypted to true

            }

            public static void decrypt(String word)
            {
                if(!hasMessage)
                {
                    System.out.println("No message");
                    // Tell the user there is no message
                }
                else if(!encrypted)
                {
                    System.out.println("Message not encrypted");
                    // Tell the user the message is not encrypted

                }
                else
                {
                    int a = (int) w / 2;
                    int w = (int) x - 2;  
                    char x = (char) y; 
                    System.out.println(message);
                    // Like encrypt, but in reverse
                }

            }

            public static void main(String[] args) 
            {  
                Scanner sc = new Scanner(System.in);
                int menuChoice = 0;

                while(menuChoice != 4)
                {
                    System.out.println( "[1] Enter Word\n" + 
                            "[2] Encrypt\n" + 
                            "[3] Decrypt\n" + 
                            "[4] Quit\n");

                    menuChoice = sc.nextInt();

                    if(menuChoice == 1)
                    {
                        System.out.println("Input message");
                        message = sc.next();
                        // prompt user to input message
                        // assign next word to the class-level variable message
                        hasMessage = true;
                        encrypted = false;
                        // set hasMessage to true
                        // set encrypted to false

                    }
                    else if(menuChoice == 2)
                    {
                        encrypt(message);
                    }
                    else if(menuChoice == 3)
                    {
                        decrypt(message);
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:46:31.187

麻烦可能来自 for 循环。我真的不知道这个 for 循环应该做什么，所以我不能帮助你改变它。

```
for (message.charAt(a); a==message.length(); a++) 
        {
            int w = (int) a * 2;
            int x = (int) w + 2;  
            char y = (char) x; 
        } 
```

这在伪代码中做了什么：

1.  求字符串 a 中 0 处的字符，什么也不做。这只是浪费时间，所以我不知道这实际上是为了什么。
2.  如果是，则检查消息是否为空，否则继续循环。
3.  执行此循环中的代码。

我猜你想要做的是像这样逐个字符循环遍历字符串：

```
for (int i = 0; i < message.length(); i++) {
    char a = message.charAt(i);
} 
```

# mysql - MySQL：无法根据自动增量键更新单个记录

> ID：13811669
> 
> 赞同：1
> 
> 时间：2012-12-11T00:25:10.677
> 
> 标签：mysql, tags

我有一个非常简单的名为“数据”的表。它有 2 列：“key”和“tagged”。“Key”是一个自动递增的 id。

我正在尝试根据“键”更新“标记”列。我正在使用这个非常简单的查询：

更新数据集标记='Blahblahblah' WHERE key='1';

但是，MySQL 给了我以下错误：#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'key='1'' 附近使用正确的语法

我不明白我的查询有什么问题。你有什么想法吗？

让-尼古拉斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T00:27:19.893

`key`是[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，必须用反引号转义。

```
UPDATE data SET tagged='Blahblahblah' WHERE `key`='1'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T00:28:04.250

由于`key`列是`auto increment`列。我确定它是 type`int`或`bigint`.

所以你不应该在`WHERE`子句中使用这个词`key`也是保留关键字。

尝试 -

```
UPDATE data SET tagged='Blahblahblah' WHERE `key`=1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T00:31:06.083

删除 1 周围的单引号并将其放在 key 周围，因为它是一个关键字。使其成为**“关键”= 1**

这应该够了吧。

# matlab - MATLAB 3D 体积可视化

> ID：13811676
> 
> 赞同：2
> 
> 时间：2012-12-11T00:25:52.987
> 
> 标签：matlab

我有一个矩阵`M, 135*191*121 double`，想通过使用这 121 个切片将其绘制为 3D 体积。我怎样才能做到这一点？（我需要一个灰度图像）

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T01:43:56.227

查看[vol3d v2](http://www.mathworks.com/matlabcentral/fileexchange/22940-vol3d-v2)，它是对 Joe Conti 的 vol3d 函数的更新，允许显式定义体素颜色和 alpha 值。如果体素可以是任何 RGB 颜色，请使用：

```
 vol3d('CData', cdata); 
```

其中 cdata 是一个 MxNxPx3 数组，沿第 4 维具有 RGB 颜色。在颜色和 alpha 值高度独立的情况下，指定 MxNxP alphamatte，如下所示：

```
vol3d('CData', cdata, 'Alpha', alpha); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:01:16.087

如果您有 3 个数组，存储您需要绘制的每个点的 (x,y,z) 坐标，那么您可以使用函数 plot3
来自 matlab 帮助

> PLOT3 在 3-D 空间中绘制线和点。PLOT3() 是 PLOT() 的三维模拟。
> 
> ```
> PLOT3(x,y,z), where x, y and z are three vectors of the same length,
> plots a line in 3-space through the points whose coordinates are the
> elements of x, y and z.
> 
> PLOT3(X,Y,Z), where X, Y and Z are three matrices of the same size,
> plots several lines obtained from the columns of X, Y and Z.
> 
> Various line types, plot symbols and colors may be obtained with
> PLOT3(X,Y,Z,s) where s is a 1, 2 or 3 character string made from
> the characters listed under the PLOT command.
> 
> PLOT3(x1,y1,z1,s1,x2,y2,z2,s2,x3,y3,z3,s3,...) combines the plots
> defined by the (x,y,z,s) fourtuples, where the x's, y's and z's are
> vectors or matrices and the s's are strings.
> 
> Example: A helix:
> 
>     t = 0:pi/50:10*pi;
>     plot3(sin(t),cos(t),t);
> 
> PLOT3 returns a column vector of handles to lineseries objects, one
> handle per line. The X,Y,Z triples, or X,Y,Z,S quads, can be 
> followed by parameter/value pairs to specify additional 
> properties of the lines. 
> ```

对于 3d 绘图，您可能还想查看 surf 功能

# c++ - 是否可以弃用依赖默认参数？

> ID：13811679
> 
> 赞同：0
> 
> 时间：2012-12-11T00:26:17.570
> 
> 标签：c++

我正在处理一个大型项目，并且我已经更新了一种几乎被系统所有部分使用的方法；该方法现在采用另一个参数。我想让新参数成为可选参数，这样我就不必去更新其他人的代码来使用它，所以我提供了一个默认参数。

有什么方法可以发出编译器警告，声明不推荐依赖默认参数，只有当他们依赖它时？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T00:28:51.253

除了使用默认参数，您可以尝试使用重载函数，一个有额外参数，一个没有，并将没有额外参数的一个标记为已弃用。它可以调用新函数，传入你想要的任何默认值。

# ios - UITableView 阴影顶部？

> ID：13811680
> 
> 赞同：0
> 
> 时间：2012-12-11T00:26:19.053
> 
> 标签：ios, uitableview, gradient, layer, cells

我知道之前对此有很多问题，但是在我的场景中似乎没有一个问题。几乎我试图使顶部可能比我的 tableview 框架顶部低 10 点更暗，因此比仅从框架滚动的单元格具有更好的效果。

几乎我需要完成一个效果，其中 alpha 从 0 开始并以 1 的灰色结束，即 10 点高。这样，在框架顶部之前就有一些微妙的区域，这样看起来单元格就不会从框架中移出。

这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:20:55.717

假设您使用的是导航栏层，您可以为导航栏层设置阴影。

```
self.navigationController.navigationBar.layer.shadowColor = [[UIColor blackColor] CGColor];
self.navigationController.navigationBar.layer.shadowOffset = CGSizeMake(0.0f,0.0f);
self.navigationController.navigationBar.layer.shadowOpacity = 1.0f;
self.navigationController.navigationBar.layer.shadowRadius = 4.0f; 
```

如果你没有使用导航控制器，那么你可以将这种相同类型的阴影应用到 UIView 的层。

# c# - MySQL 的实体上下文生命周期

> ID：13811684
> 
> 赞同：1
> 
> 时间：2012-12-11T00:26:32.033
> 
> 标签：c#, mysql, entity-framework, entity-framework-4, mysql-connector

我是 Entity Framework 4 的新手。我玩过一些 SQL Server 和 MySQL。我在使用 MySQL 时遇到了延迟加载的问题，我相信 MySQL 连接器不允许在同一连接上进行多个查询 - 它必须首先关闭。

我想运行一个查询，在我的类的一个字段中存储对结果的引用，然后修改/保存它或加载相关数据。但是，上下文已经超出范围并被处理掉了。

```
class MyClass {
    List<AThing> _stuff;

    private void ReadStuff() {
        using (var context = new MyEntities()) {
            _stuff = context.TableOfStuff.ToList();
        }
    }

    // Stuff is used by other methods, bound to controls, etc.
} 
```

那么，是否`Stuff`存在没有上下文？据我了解，上下文是更改跟踪等的内容......一旦`ToList()`被调用，我的上下文对于另一个查询就没有用了。

我必须避免这种情况吗？有没有更好的方法来实现这一点？我上面错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:34:45.443

你的代码很好。当`context`超出范围时，列表中的项目不再附加。如果您更改它们，您可以`Attach`将它们更改为新的上下文。但是还有其他方法取决于你想做什么以及你想怎么做。

调用具体`ToList`化您的查询，但不会留下一个 open `DataReader`。所以你应该能够执行多个查询。

# bash - 如何在循环中检测特定文件并使用 ImageMagick 制作缩略图

> ID：13811687
> 
> 赞同：2
> 
> 时间：2012-12-11T00:26:39.097
> 
> 标签：bash, imagemagick, detect

我需要在许多文件夹中转换大量 PNG 文件，并分别处理裁剪文件，以便仅为“裁剪”文件制作 100x100 像素的缩略图。

文件命名为：

```
????_thumb.png
????_snapshot.png
????_crop.png 
```

哪里`????`是一个数字。

到目前为止，我的脚本可以很好地进行转换，但是我需要检测何时到达“裁剪”文件，然后调用 ImageMagick 并从中创建一个 100x100px 的缩略图，名为 ????_crop_th.png

我似乎不知道如何检测通配符????_crop.png。

到目前为止我的脚本：

```
#!/bin/bash

BASE64=/root/scripts/base64
logfile=/root/tester/convert_failed.txt
goodfile=/root/tester/goodfile.txt
proc_dir=/root/tester/testing
temp_file=/root/tester/temp.png
b64=/root/tester/b64.txt

cd $proc_dir
for i in *
 do
  if [ -d $i ]
       then

     for j in $i/*.png
       do
      if [ -f $j ]
        then
        #just get files name without extension
        fname=`echo $j | cut -d'.' -f1` 
        #perform operations
        cp $j ${fname}.b64
        $BASE64/base64 -d $j $temp_file

        if [ $ -eq 0 ]
          then
            cp $temp_file $j
             echo  $j >> $goodfile
             rm -f ${fname}.b64
        fi
      fi
    done
  fi
 done
 `find $proc_dir -name *.b64 -print >$b64`
 sort $logfile -o $logfile
 sort $goodfile -o $goodfile
 sort $b64 -o $b64 
```

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T00:56:27.457

您可以使用正则表达式匹配或尾随子字符串删除，例如：

```
if [[ "$j" =~ _crop.png$ ]] 
```

或者

```
if [[ "${j%_crop.png}" != "$j" ]] 
```

另请注意，切断扩展名同样容易：

```
fname=${j%.*} 
```

另一个有用的 bash 功能是递归通配符，因此您不需要嵌套循环和专门的目录处理：

```
shopt -s globstar
for j in **/*.png 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T03:57:22.660

您的脚本在某些方面做得不够完美，还有一些冗余。

我也没有在您的脚本中看到任何使用 Imagemagick 从`*_crop.png`文件生成缩略图的内容，理论上这就是这个问题的意义所在

我投票支持重写。我不知道以下内容是否直接适用于您的情况，但这些技术至少应该让您编写更好的 shell 脚本。

```
#!/bin/bash

base64=/root/scripts/base64/base64
logfile=/root/tester/convert_failed.log
goodfile=/root/tester/goodfile.txt
proc_dir=/root/tester/testing

# The `cd` command will fail, if it fails.  (Really.)
if cd "$proc_dir"; then

    # Find all the PNGs in all subdirectories one level under our WD
    for file in */*.png; do

        # Do stuff (I have no idea what this is for...)
        if $base64 -d "$file" "${file%.png}".b64 && mv "${file%.png}".b64 "$file"; then
            echo "$file" >> $goodfile
        else
            printf '[%s] FAILED: %s\n' "${date '+%Y-%m-%d %T')" "$file" >> $logfile
        fi

        # Only make thumbnails if we need them
        if [[ $file =~ _crop.png$ ]] && [[ ! -f "${file%_crop.png}_thumb.png" ]]; then
            convert "$file" -scale 100x100 "${file%_crop.png}_thumb.png"
        fi

    done

fi 
```

# png - LodePng 24bit RGB模式看不懂怎么选

> ID：13811688
> 
> 赞同：1
> 
> 时间：2012-12-11T00:26:54.030
> 
> 标签：png, rgb, yuv

我有一个 YUV 420 (144x176) 文件，我从中读取第一帧并将其 YUV 组件转换为 RGB 数组`int rgb[HEIGHT*WIDTH*3];`，我在其中存储 R1G1B1...RnGnBn 并有一个`std::vector<unsigned char> image; image.resize(width * height * 4);`. 我的问题是：当我使用`unsigned error = lodepng::encode(filename, image, width, height);`它时没有错误地处理并生成一个PNG文件，但这个文件甚至看起来不像原始图像，我认为它使用RGBA而我只有RGB，如何修复它？

PS不知道这个^信息是否足够，如果没有，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:59:18.130

好的，这个问题现在应该结束了。我所做的只是将 255 添加为第 4 位的 Alpha，如下所示：

```
if (i%3==0 && i != 0)
            image[k++] = 255;
        image[k] = rgb[i]; 
```

PS 我错过的另一件重要的事情是在从 YUV 文件读取时将像素放在它们的真实位置，我的意思是像 Wiki 的图所示。如果您遇到 YUV 问题，请注意这一点。

# opengl - LWJGL 正确渲染 OBJ 文件纹理坐标

> ID：13811689
> 
> 赞同：0
> 
> 时间：2012-12-11T00:27:05.090
> 
> 标签：opengl, render, textures, lwjgl, texture-mapping

我正在尝试在 LWJGL 中为我的游戏程序导入一个 obj。我的游戏可以很好地加载纹理坐标和顶点，顶点渲染得很好，但纹理坐标都很奇怪。我发现纹理坐标大于纹理本身，这意味着它会重复，但我不知道如何缩放纹理坐标或任何使它们小于纹理本身并正确映射的方法。

```
for(int i=0;i<Test.drawingVertices.length;i++)
{
  glTexCoord2f((Test.drawingTexCoords[i].x),(Test.drawingTexCoords[i].y*-1.0f));glVertex3f(Test.drawingVertices[i].x,Test.drawingVertices[i].y,-10-Test.drawingVertices[i].z);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T05:44:06.607

纹理坐标是标准化的，这意味着它们的定义范围是 0.0,0.0 到 1.0,1.0。这是一张显示这一点的图片。这就是你应该如何定义它们。

[http://i.stack.imgur.com/WKyLR.gif](http://i.stack.imgur.com/WKyLR.gif) （不能发布图片，因为低代表）

# java - Java 使用归并排序对数字数组进行排序

> ID：13811695
> 
> 赞同：2
> 
> 时间：2012-12-11T00:27:28.053
> 
> 标签：java, algorithm, sorting

我正在尝试在 Java 中使用合并排序来对数字数组进行排序。在这种情况下，数组是 numBars。我制作了一个包含 30 个数字的小数组，并附上了控制台的输出。我跟踪合并方法以查看为什么会出现索引问题。我相信我在某个地方偏离了 1，但似乎无法弄清楚我的逻辑在哪里变得混乱。

```
public void mergeSort() {
        mergeSortHelper(numBars, 0);
        System.out.println(Arrays.toString(numBars));
    }

    public void mergeSortHelper(int[] theArray, int leftIndex) {

        //split the list in half
        int mid = theArray.length/2;
        if (mid < 1) {
            return;
        } else {
            System.out.println("Left Index is originally: " + leftIndex);
            int[] left = Arrays.copyOfRange(theArray, 0, mid);
            int[] right = Arrays.copyOfRange(theArray, mid, theArray.length);
            //sort the lower half
            mergeSortHelper(left, leftIndex);
            mergeSortHelper(right, leftIndex + left.length);
            //merge them together
            merge(left, right, leftIndex);
            System.out.println("Left Index is now: " + leftIndex);
            System.out.println("Right Index is now: " + (leftIndex + mid));
            System.out.println(Arrays.toString(numBars));
            left = Arrays.copyOfRange(numBars, leftIndex, leftIndex + mid);
            right = Arrays.copyOfRange(numBars, leftIndex + mid, leftIndex + mid + right.length);
        }
    }

    public void merge(int[]a, int[]b, int leftIndex) {
        int i = 0;
        int j = 0;
        int result = leftIndex;
        while (i < a.length && j < b.length) {
            //System.out.println("Comparing from A: " + a[i] + " Comparing from B: " + b[i]);
            if (a[i] < b[j]) {
                theCanvas.wait(theDelay);
                theCanvas.eraseRectangle(graphWidth + i * barWidth, graphHeight - barScale * numBars[i], barScale, barScale * numBars[i]);
                numBars[result] = a[i];
                result++;
                theCanvas.fillRectangle(graphWidth + i * barWidth, graphHeight - barScale * numBars[i], barScale, barScale * numBars[i]);
                i++;
            } else {
                theCanvas.wait(theDelay);
                theCanvas.eraseRectangle(graphWidth + j * barWidth, graphHeight - barScale * numBars[j], barScale, barScale * numBars[j]);
                numBars[result] = b[j];
                result++;
                theCanvas.fillRectangle(graphWidth + j * barWidth, graphHeight - barScale * numBars[j], barScale, barScale * numBars[j]);
                j++;

            }
            //System.out.println("First Loop, Comparing Size" + Arrays.toString(output));
        }
        while (i < a.length) {
            numBars[result] = a[i];
            result++;
            i++;
            //System.out.println("Second Loop, Finishing A array" + Arrays.toString(output));
        }

        while(j < b.length) {
            numBars[result] = b[j];
            result++;
            j++;
            //System.out.println("Third Loop, Finishing B array" + Arrays.toString(output));
        }
        //System.out.println(Arrays.toString(output));
    } 
```

控制台输出：

```
Left Index is originally: 0
Left Index is originally: 0
Left Index is originally: 0
Left Index is originally: 1
Left Index is now: 1
Right Index is now: 2
[10, 50, 55, 99, 18, 9, 46, 80, 37, 35, 69, 77, 34, 53, 53]
Left Index is now: 0
Right Index is now: 1
[10, 55, 50, 99, 18, 9, 46, 80, 37, 35, 69, 77, 34, 53, 53]
Left Index is originally: 3
Left Index is originally: 3
Left Index is now: 3
Right Index is now: 4
[10, 55, 50, 18, 99, 9, 46, 80, 37, 35, 69, 77, 34, 53, 53]
Left Index is originally: 5
Left Index is now: 5
Right Index is now: 6
[10, 55, 50, 18, 99, 9, 46, 80, 37, 35, 69, 77, 34, 53, 53]
Left Index is now: 3
Right Index is now: 5
[10, 55, 50, 9, 46, 99, 18, 80, 37, 35, 69, 77, 34, 53, 53]
Left Index is now: 0
Right Index is now: 3
[10, 55, 50, 99, 18, 9, 46, 80, 37, 35, 69, 77, 34, 53, 53]
Left Index is originally: 7
Left Index is originally: 7
Left Index is originally: 7
Left Index is now: 7
Right Index is now: 8
[10, 55, 50, 99, 18, 9, 46, 37, 80, 35, 69, 77, 34, 53, 53]
Left Index is originally: 9
Left Index is now: 9
Right Index is now: 10
[10, 55, 50, 99, 18, 9, 46, 37, 80, 35, 69, 77, 34, 53, 53]
Left Index is now: 7
Right Index is now: 9
[10, 55, 50, 99, 18, 9, 46, 35, 69, 80, 37, 77, 34, 53, 53]
Left Index is originally: 11
Left Index is originally: 11
Left Index is now: 11
Right Index is now: 12
[10, 55, 50, 99, 18, 9, 46, 35, 69, 80, 37, 34, 77, 53, 53]
Left Index is originally: 13
Left Index is now: 13
Right Index is now: 14
[10, 55, 50, 99, 18, 9, 46, 35, 69, 80, 37, 34, 77, 53, 53]
Left Index is now: 11
Right Index is now: 13
[10, 55, 50, 99, 18, 9, 46, 35, 69, 80, 37, 53, 53, 77, 34]
Left Index is now: 7
Right Index is now: 11
[10, 55, 50, 99, 18, 9, 46, 77, 34, 53, 53, 80, 37, 35, 69]
Left Index is now: 0
Right Index is now: 7
[10, 55, 50, 80, 37, 35, 69, 77, 34, 53, 53, 99, 18, 9, 46]
[10, 55, 50, 80, 37, 35, 69, 77, 34, 53, 53, 99, 18, 9, 46] 
```

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:57:08.893

```
} else {
    System.out.println("Left Index is originally: " + leftIndex);
    int[] left = Arrays.copyOfRange(theArray, 0, mid);
    int[] right = Arrays.copyOfRange(theArray, mid, theArray.length);
    //sort the lower half
    mergeSortHelper(left, leftIndex);
    mergeSortHelper(right, leftIndex + left.length);
    //merge them together
    merge(left, right, leftIndex);
    System.out.println("Left Index is now: " + leftIndex);
    System.out.println("Right Index is now: " + (leftIndex + mid));
    System.out.println(Arrays.toString(numBars));
    left = Arrays.copyOfRange(numBars, leftIndex, leftIndex + mid);
    right = Arrays.copyOfRange(numBars, leftIndex + mid, leftIndex + mid + right.length);
} 
```

最后，当您从 and 中复制值时`numBars`，`left`这`right`完全没有意义，因为这些值随后会立即超出范围，并将被垃圾收集。

在调用者中，应该排序的数组保持不变。您需要将合并后的值复制`numBars`到作为参数的数组`theArray`中，以便调用者合并时，它会合并排序的数组。

`else`所以将块中的最后两行替换为

```
for(int i = 0; i < mid; ++i) {
    theArray[i] = numBars[leftIndex + i];
}
for(int i = mid; i < mid + left.length; ++i) {
    theArray[i] = numBars[leftIndex + i];
} 
```

将合并结果复制到调用者传递*的同一对象中。*

但是，如果您将应该放置合并结果的数组作为参数传递给`merge`.

# android - Android TextureView 闪烁

> ID：13811699
> 
> 赞同：1
> 
> 时间：2012-12-11T00:27:56.150
> 
> 标签：android, drawing

我试过 Romain Guy 的 TextureView 示例代码 (http://pastebin.com/J4uDgrZ8)，效果很好。但是当我将 lockCanvas(null) 更改为 lockCanvas(new Rect(x, y, x+20, y+20)) 时，示例开始闪烁。似乎'lockCanvas（Rect）'对于TextureView或任何其他原因不能很好地工作？

我正在使用带有 android 4.0.3 的摩托罗拉 XOOM。谢谢你的帮助！

我修改的代码如下：

```
 public void run() {
        float x = 0.0f;
        float y = 0.0f;
        float speedX = 5.0f;
        float speedY = 3.0f;

        Paint paint = new Paint();
        paint.setColor(0xff00ff00);

        while (mRunning && !Thread.interrupted()) {
            //final Canvas canvas = mSurface.lockCanvas(null);
            **final Canvas canvas = mSurface.lockCanvas(new Rect((int)x, (int)y,
                                                               (int)(x+20.0f), (int)(y+20.0f)));**  
            try {
                canvas.drawColor(0x00000000, PorterDuff.Mode.CLEAR);
                canvas.drawRect(x, y, x + 20.0f, y + 20.0f, paint);
            } finally {
                mSurface.unlockCanvasAndPost(canvas);
            }

            if (x + 20.0f + speedX >= mSurface.getWidth() || x + speedX <= 0.0f) {
                speedX = -speedX;
            }
            if (y + 20.0f + speedY >= mSurface.getHeight() || y + speedY <= 0.0f) {
                speedY = -speedY;
            }

            x += speedX;
            y += speedY;

            try {
                //Thread.sleep(15);
                  **Thread.sleep(1);**
            } catch (InterruptedException e) {
                // Interrupted
            }
        } 
```

我仔细检查了一下，发现是“Thread.sleep(1)”加上“lockCanvas(Rect)”导致闪烁。使用 lockCanvas(null) 时， sleep(1) 是可以的。所以 lockCanvas(Rect) 不能像 lockCanvas(null) 一样快刷新？？

# nosql - Neo4j 入门

> ID：13811703
> 
> 赞同：4
> 
> 时间：2012-12-11T00:28:09.503
> 
> 标签：nosql, neo4j

我对 neo4j 完全陌生，很抱歉提出这样一个基本问题。我已经安装了 neo4j，我正在使用 shell “localhost:7474/webadmin/#/console/” 我正在寻找一个很好的例子，它使用一些 shell 命令从预先存在的图形数据库中读取、遍历、修改、.. . 它然后执行一些查询以了解它。我不想使用任何 Java 或 Python，我想要的只是一些可以让我学习 neo4j 的命令行示例。我进行了很多搜索，但除了一个矩阵示例之外找不到一个好的示例代码。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-13T14:36:46.750

[Neo4J](http://www.neo4j.org/)的优点之一是它提供了出色的文档和学习材料（尤其是与其他支持 Graph 的数据库相比）。

如前所述，从[The Cypher Tutorial](http://www.neo4j.org/learn/cypher)开始是一个很好的起点。

然后，当您学习基础知识时，请查看[Neo4J 手册](http://docs.neo4j.org/chunked/milestone/)，其中包含有关每个 Cypher 语言命令（以及许多其他有趣的东西）的详细文档。

最后，当您开始进行自己的查询时，请保留一份[Cypher Cheat Sheet](http://neo4j.org/resources/cypher)副本，其中总结了所有命令。

您甚至可以在不安装或运行 Neo4J 服务器的情况下查看 Cypher，只需转到[Neo4J 控制台](http://console.neo4j.org/)并在线测试您的查询（甚至创建指向它们的链接）。

警告：当您开始阅读时，您可能会遇到[Gremlin](https://github.com/tinkerpop/gremlin/wiki)，这是 Neo4J 支持的一种常见的图形查询语言。很尴尬而且与 Cypher 非常不同，所以如果你使用 Neo4J，你应该坚持使用 Cypher，它有更多的功能，并且大部分开发都是针对它进行的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T00:58:08.003

Cypher 是您的朋友（此页面上有几个示例）： http: [//www.neo4j.org/learn/cypher](http://www.neo4j.org/learn/cypher)

查看特定于 Cypher 的网络研讨会： [http ://watch.neo4j.org/](http://watch.neo4j.org/)

最后，Cypher 备忘单：http: [//neo4j.org/resources/cypher](http://neo4j.org/resources/cypher)

# java - 如何让一个客户端线程休眠，以便另一个客户端执行？

> ID：13811705
> 
> 赞同：2
> 
> 时间：2012-12-11T00:28:09.003
> 
> 标签：java, multithreading, sockets, tic-tac-toe

我正在开发一个客户端/服务器井字游戏，该游戏由一个服务器和一个由两个线程组成的客户端组成。整个程序包括一个 TicTacToeServer 类、TicTacToeService 类和 TicTacToeClientPanel（即 GUI 和客户端放在一起）。

我面临的主要问题是客户端类本身。我启动了 GUI/客户端的两个窗口（用于两个不同的玩家），并且能够在第一个玩家上放置一个标记 (X)。之后，线程似乎停止了，我无法继续玩游戏。

如果我试图让客户端 1（玩家 1）的线程进入睡眠状态，它会在给定的分配中休眠，但客户端 2（玩家 2）的线程永远不会开始。

有什么方法可以在这两个线程之间交替并通过我的程序，这取决于轮到哪个玩家？

```
 import java.awt.*;  //Color and GridLayout
import java.awt.event.*;
import java.io.*;   //DataInputStream & DataOutputStream
import java.net.Socket;
import java.util.Scanner;

import javax.swing.*;   //JPanel & JPanel
import javax.swing.border.LineBorder;

/**
 * This is the Main Panel for the TicTacToe Client.
 * It uses a displayBoard of Cell objects to display the TicTacToe board
 * @author Professor Myers
 * 
 */
public class TicTacToeClientPanel extends JPanel implements Runnable {
    //instance variables and constants
    private Cell displayBoard[][] = new Cell[3][3];
    private Scanner fromServer;
    private PrintWriter out;
    private Boolean myTurn, waiting, inputReady;
    private Thread thread;
private char mySymbol;
private int rowSelected, columnSelected;
private JLabel statusLabel, playerInfo;
public static final int PLAYER1 = 1, PLAYER2 = 2;

public TicTacToeClientPanel()
{
    //give initial values to instance variables
    mySymbol = ' ';
    myTurn = false;
    JPanel sub1 = new JPanel();
    playerInfo = new JLabel("");
    statusLabel = new JLabel("");

    sub1.setLayout(new GridBagLayout());
    GridBagConstraints c = new GridBagConstraints();

    //initialize Cells in board array and add to display
    for (int y = 0; y < 3; y++)
    {
        for (int x = 0; x < 3; x++)
        {
            displayBoard[y][x] = new Cell(x+1, y+1);

            c.gridx = y;
            c.gridy = x;
            c.fill = GridBagConstraints.BOTH;
            sub1.add(displayBoard[y][x], c);
        }
    }

    setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));
    add(new JPanel().add(playerInfo));
    add(sub1);
    add(new JPanel().add(statusLabel));

    connectToServer();

}

private void connectToServer()
{
    try
    {
        //create socket
        //set up Scanner and PrintWriter
        Socket s = new Socket("localhost", 8880);

        InputStream instream = s.getInputStream();
        OutputStream outstream = s.getOutputStream();
        fromServer = new Scanner(instream);
        out = new PrintWriter(outstream);

    }
    catch (Exception e)
    {
        System.err.println(e);
    }
    //start the thread
    thread = new Thread(this);
    thread.start();
}

public void run()
{
    int otherPRow, otherPColumn;

    try {

        int player = Integer.parseInt(fromServer.nextLine());   //Begin the game
        int message = 0;

        //set up symbol
        //keep track of who's turn it is
        //Display the player number and symbol (JLabel)
        //Display the status of the player (who's turn is it)
        if (player == PLAYER1) {
            mySymbol = 'X';
            playerInfo.setText("Player 1 with symbol \'X\'");
            statusLabel.setText("My turn");
            myTurn = true;  //player1 goes first

            message = Integer.parseInt(fromServer.nextLine());
        }
        else if (player == PLAYER2) {
            mySymbol = 'O';
            playerInfo.setText("Player 2 with symbol \'O\'");
            statusLabel.setText("Waiting for Player 1 to move");
            //what to do with waiting?
            myTurn = false;

            while (!myTurn) {
                if (fromServer.hasNextLine()) {
                    System.out.println("ITS HAPPENING");
                    myTurn = true;
                    thread.setPriority(thread.MAX_PRIORITY);
                }
            }
        }

        while(message != 1 && message != 2 && message != 3) //CHANGE TO GAME NOT OVER
        {   
            if(player == PLAYER1)
            {
                //wait for user to select a cell - sleep for awhile
                //"write" the row and column to server
                //"read" from the server - perform the appropriate action

                //this code is only reached if server passes 5 or 4 to the first player
                if (myTurn) {
                    waiting = true;
                    while(waiting) {
                        Thread.sleep(1000);
                    }   //thread sleeps until something is clicked
                }

                //if this cell value is not empty (WRITE)
                if (displayBoard[rowSelected-1][columnSelected-1].getSymbol() != ' ') {

                    System.out.println("Success");

                    out.println(rowSelected + '\n' + columnSelected);
                    out.flush();

                    statusLabel.setText("Waiting for Player 2 to move");
                }

                waiting = true;
                while (waiting)
                    Thread.currentThread().sleep(1000);

                //READ from server
                message = Integer.parseInt(fromServer.nextLine());  
                if (message == 1) {
                    statusLabel.setText("I Won! (X)");
                    return;
                }
                else if (message == 2) {
                    //update from player 2's turn
                    otherPRow = Integer.parseInt(fromServer.nextLine());
                    otherPColumn = Integer.parseInt(fromServer.nextLine());
                    displayBoard[otherPRow-1][otherPColumn-1].setSymbol('O');

                    statusLabel.setText("Player 2 has won (O)");
                    return;
                }
                else if (message == 3) {
                    //update from player 2's turn
                    otherPRow = Integer.parseInt(fromServer.nextLine());
                    otherPColumn = Integer.parseInt(fromServer.nextLine());
                    displayBoard[otherPRow-1][otherPColumn-1].setSymbol('O');

                    statusLabel.setText("Game is over, no winner");
                    return;
                }
                else if (message == 4) {    //traverses back to beginning of loop
                    otherPRow = Integer.parseInt(fromServer.nextLine());
                    otherPColumn = Integer.parseInt(fromServer.nextLine()); //What kind does it send? normal or +1?

                    displayBoard[otherPRow-1][otherPColumn-1].setSymbol('O');

                    statusLabel.setText("My turn");
                    myTurn = true;
                }

            }
            else if(player == PLAYER2)
            {   
                //"read" from the server - perform the appropriate action
                //wait for the user to select a cell - sleep for a while
                //"write" the row and column to server  
                myTurn = true;
                statusLabel.setText("My turn");

                message = Integer.parseInt(fromServer.nextLine());
                System.out.println(message);

                //player1 has won or game is full
                if (message == 1 || message == 3) {
                    otherPRow = Integer.parseInt(fromServer.nextLine());
                    otherPColumn = Integer.parseInt(fromServer.nextLine());

                    displayBoard[otherPRow-1][otherPColumn-1].setSymbol('X');

                    if (message == 1) {
                        statusLabel.setText("Player 1 (X) won");
                        return;
                    }
                    else {
                        statusLabel.setText("Game is over, no winner");
                        return;
                    }
                }
                else if (message == 2) {    //player2 has won
                    statusLabel.setText("I won! (O)");
                    return;
                }
                else if (message == 4) {
                    otherPRow = Integer.parseInt(fromServer.nextLine());
                    otherPColumn = Integer.parseInt(fromServer.nextLine());

                    displayBoard[otherPRow-1][otherPColumn-1].setSymbol('X');

                    //SLEEP for user input
                    statusLabel.setText("My turn");
                    myTurn = true;
                    waiting = true;

                    while (waiting) {
                        Thread.sleep(1000);
                    }

                    //WRITE to server 
                    char s = displayBoard[rowSelected-1][columnSelected-1].getSymbol();
                    if (s != ' ' && s != 'X' && waiting == false) {
                        out.println(rowSelected + '\n' + columnSelected);
                        out.flush();
                    }
                    statusLabel.setText("Waiting for Player 1 to move");

                    if (!myTurn) 
                        Thread.currentThread().sleep(10000);
                }
            }
        }
    }
    catch (Exception e)
    {
    }
}

public class Cell extends JPanel
{
    int row;
    int column;
    private char symbol;

    public Cell(int r, int c) 
    {
        row = r;
        column = c;
        symbol = ' ';
        setBorder(new LineBorder(Color.black,1));
        setPreferredSize(new Dimension(100,150));
        addMouseListener(new ClickListener());
    }

    public void setSymbol(char c)
    {
        symbol = c;
        repaint();
    }

    public char getSymbol()
    {
        return symbol;
    }

    protected void paintComponent (Graphics g)
    {
        super.paintComponent(g);

        if(symbol == 'X')
        {
            g.drawLine(10, 10, getWidth()-10, getHeight()-10);
            g.drawLine(getWidth()-10, 10, 10, getHeight()-10);
        }
        else if(symbol == 'O')
        {
            g.drawOval(10, 10, getWidth()-10, getHeight()-20);
        }
    }

    private class ClickListener extends MouseAdapter
    {
        public void mouseClicked(MouseEvent e)
        {
            System.out.println("Clicked: " + row + " " + column);

            if(symbol == ' ' && myTurn)
            {
                setSymbol(mySymbol);
                myTurn = false;
                rowSelected = row;
                columnSelected = column;
                statusLabel.setText("Waiting for the other player to move");
                waiting = false;
            }
        }
    }
}

public static void main (String[] args)
{
    JFrame frame = new JFrame();
    frame.setBounds(0, 0, 1000, 1200);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    TicTacToeClientPanel ttt = new TicTacToeClientPanel();
    frame.getContentPane().add(ttt);
    frame.pack();
    frame.setVisible(true);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:26:23.333

我迅速查看了您的代码。一个提示：变量等待不是易失的。因此，不能保证以下循环将永远结束：

```
 waiting = true;
   while(waiting) {
       Thread.sleep(1000);
   }   //thread sleeps until something is clicked 
```

鼠标点击等待设置为假。这发生在不同的线程中。因为变量 waiting 不是 volatile 的，所以允许 JVM 将上述循环优化为：

```
while (true) {
   Thread.sleep(1000);
} 
```

尝试让等待变得不稳定。这会强制对该变量的每次写入都对其他线程可见。如果变量不是易失性的，那么每个线程都可以保留它自己的该变量的本地副本。

# .net - 如何获取用户关注的人数

> ID：13811709
> 
> 赞同：1
> 
> 时间：2012-12-11T00:28:31.920
> 
> 标签：.net, vb.net, twitter, twitterizer

我已经有以下代码成功检索了关注用户的人数：

```
Dim followersResponse As TwitterResponse(Of UserIdCollection) = TwitterFriendship.FollowersIds(tokens)
If followersResponse.Result <> RequestResult.Success Then
Else
labelNumFollowers.Text = followersResponse.ResponseObject.Count
End If 
```

***但我不知道如何检索用户关注***的总人数。

***（我还想知道是否有一种方法可以确定用户发布的推文总数。）***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:31:31.760

追随者数量的名称有点奇怪，它是：NumberOfFriends。要获取用户发送的推文数量，请使用 NumberOfStatuses

```
Dim showUserResponse As TwitterResponse(Of TwitterUser) = TwitterUser.Show(tokens, labelUsername.Text)
labelNumFollowing.Text = showUserResponse.ResponseObject.NumberOfFriends
labelNumTweets.Text = showUserResponse.ResponseObject.NumberOfStatuses 
```

我希望 VB 语法是正确的，因为我是 C# 程序员

# postgresql - 二进制查询比文本查询慢+使用 Postgresql 转换？

> ID：13811711
> 
> 赞同：1
> 
> 时间：2012-12-11T00:28:47.307
> 
> 标签：postgresql, binary, libpq

找了高低找这个，一直没有找到明确的答案。我刚刚开始构建应用程序，我们决定将 Postgresql 用于我们的数据库，将 C 用于服务器。然而，一些初步测试显示了一些令人困惑的数字。似乎通过文本字符串访问数据库是最快的方法，这对我来说似乎违反直觉。当然，数据库在内部将整数和浮点数存储为二进制，并且必须将它们转换为文本，然后我必须将其转换回二进制才能使用。似乎更快的方法是将所有内容都保留为二进制文件，但到目前为止，我似乎无法获得二进制访问权限来显示这种好处。

这是我构建的一个简单测试用例，用于显示我所看到的（模式 + 代码）

[http://pastebin.com/1AhB8avx](http://pastebin.com/1AhB8avx)

我看到这样的时间安排：

开始迭代 0... 迭代 0：在 35 秒内通过 PQparamExec 获取 50000 条二进制记录 迭代 0：在 34 秒内通过 PQexecf 获取 50000 条二进制记录 迭代 0：在 25 秒内通过 PQexec 获取 50000 条文本记录

额外的迭代只是或多或少地重复该模式。我也尝试直接使用 libpq 得到类似的结果，但没有将它们移植到这个测试用例中。

这符合您的经验，还是我只是在某个地方愚蠢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:03:13.993

这似乎没有任何原因，事实上，在我的 ubuntu 桌面上运行代码时，我没有得到这样的区别：

```
开始迭代 0...
迭代 0：在 13 秒内通过 PQparamExec 获取 50000 条二进制记录
迭代 0：在 13 秒内通过 PQexecf 获取 50000 条二进制记录
迭代 0：在 12 秒内通过 PQexec 获取 50000 条文本记录

开始迭代 1...
迭代 1：在 13 秒内通过 PQparamExec 获取 50000 条二进制记录
迭代 1：在 14 秒内通过 PQexecf 获取 50000 条二进制记录
迭代 1：在 12 秒内通过 PQexec 获取 50000 条文本记录

开始迭代 2...
迭代 2：在 12 秒内通过 PQparamExec 获取 50000 条二进制记录
迭代 2：在 13 秒内通过 PQexecf 获取 50000 条二进制记录
迭代 2：在 11 秒内通过 PQexec 获取 50000 条文本记录

开始迭代 3...
迭代 3：在 12 秒内通过 PQparamExec 获取 50000 条二进制记录
迭代 3：在 12 秒内通过 PQexecf 获取 50000 条二进制记录
迭代 3：在 12 秒内通过 PQexec 获取 50000 条文本记录

开始迭代 4...
迭代 4：在 13 秒内通过 PQparamExec 获取 50000 条二进制记录
迭代 4：在 12 秒内通过 PQexecf 获取 50000 条二进制记录
迭代 4：在 12 秒内通过 PQexec 获取 50000 条文本记录

```

请注意，由于代码调用`time()`了两次来测量经过的时间，因此其精度为 2s，在这种情况下有点高。您应该考虑`gettimeofday()`，甚至更好地`clock_gettime()`考虑`CLOCK_PROCESS_CPUTIME_ID`.

# java - 从 URL 读取图像 - 性能问题？

> ID：13811714
> 
> 赞同：0
> 
> 时间：2012-12-11T00:28:53.467
> 
> 标签：java, image, url, inputstream, outputstream

有人可以检查下面的代码，看看是否有更好的做法。我真正担心的是性能，我有这个吗？如果没有，我可以做些什么来提高代码的可读性？

```
try {

    URL url = new URL("http://www.pudim.com.br/SiteBuilder/UploadUsers/pudim.com.br/pudim.jpg");
    URLConnection uc = url.openConnection();
    String type = uc.getContentType();
    BufferedImage image = ImageIO.read(url);
    ByteArrayOutputStream os = new ByteArrayOutputStream();
    ImageIO.write(image, "jpg", os);
    byte[] bytes = os.toByteArray();
    InputStream is = new ByteArrayInputStream(bytes);

    // not important :) ...
} catch (AmazonServiceException e) {
    e.printStackTrace();
} catch (AmazonClientException e) {
    e.printStackTrace();
} catch (MalformedURLException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

欢迎任何考虑。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:45:45.577

从 URL 读取时，您将遇到所有正常的性能问题 - 连接性/带宽/可用性差；相同的解决方案也适用 - 创建和使用本地缓存，在后台线程上执行加载/大量 IO（以避免阻塞主 UI 线程）。您还需要将代码包装在独立的参数化函数中......

在这个例子中，你实际上并没有对你的结果做任何事情`InputStream`——也许考虑一下它们是否对于总体上获得你想要的东西是必要的——因为，你每次都将整个图像加载到内存中——如果你全部都不是完全必要的正在做的是将其保存到磁盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:48:27.113

如果你想要的只是下载图像，我会使用[`BufferedInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedInputStream.html) 它来让它尽可能快地从下面的网络读取数据。

他们可以类似地使用 a[`BufferedOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedOutputStream.html)将其转储到`FileOutputStream`本地文件的 a 中。

无需进行任何图像处理。

# sql - 在 SQL Server 中使用 ROW_NUMBER() 获取上一条记录的值

> ID：13811715
> 
> 赞同：3
> 
> 时间：2012-12-11T00:29:03.090
> 
> 标签：sql, sql-server, row-number

希望这对于那些在 SQL Server 方面更有经验的人来说足够简单。

我有一张客户贷款活动数据表，每当他们的帐户发生操作时，该表就会更新。例如，如果他们的限制增加，将使用他们的新限制创建一个新记录。我希望能够创建他们的活动列表，其中活动量是他们的新限制减去他们之前的限制。

目前我有以下内容，但我正在努力弄清楚如何访问以前的记录。

```
SELECT   
    CUSTOMER
    ,LEDGER
    ,ACCOUNT
    ,H.AMOUNT - COALESCE(X.AMOUNT, 0)
FROM 
    dbo.ACTIVITY H WITH (NOLOCK)
LEFT OUTER JOIN 
    (SELECT  
        CUSTOMER
        ,LEDGER
        ,ACCOUNT
        ,ACTIVITY_DATE
        ,AMOUNT
        ,ROW_NUMBER() OVER (PARTITION BY CUSTOMER, LEDGER, ACCOUNT ORDER BY ACTIVITY_DATE ASC) AS ROW_NUMBER
     FROM 
         dbo.ACTIVITY WITH (NOLOCK)) X ON H.CUSTOMER = X.CUSTOMER
                                          AND H.LEDGER = X.LEDGER
                                          AND H.ACCOUNT = X.ACCOUNT 
```

所以基本上我只想减去`x.amount`以前的记录，但是当我不知道它发生在哪一天时，我不知道该怎么做。

我以为`Row_Number()`会帮助我，但我还是有点难过。

希望你们尽快收到大家的来信：）

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:50:10.943

这是一个只会通过`dbo.Activity` **ONCE的查询**

```
 SELECT H.CUSTOMER
          ,H.LEDGER
          ,H.ACCOUNT
          ,MAX(H.ACTIVITY_DATE) ACTIVITY_DATE
          ,SUM(CASE X.I WHEN 1 THEN AMOUNT ELSE -AMOUNT END) AMOUNT
      FROM (SELECT CUSTOMER
                  ,LEDGER
                  ,ACCOUNT
                  ,ACTIVITY_DATE
                  ,AMOUNT
                  ,ROW_NUMBER() OVER (PARTITION BY CUSTOMER, LEDGER, ACCOUNT ORDER BY ACTIVITY_DATE DESC) AS ROW_NUMBER
             FROM dbo.ACTIVITY WITH (NOLOCK)
           ) H
CROSS JOIN (select 1 union all select 2) X(I)
     WHERE ROW_NUMBER - X.I >= 0
  GROUP BY H.CUSTOMER
          ,H.LEDGER
          ,H.ACCOUNT
          ,ROW_NUMBER - X.I; 
```

这是我用来测试的一些数据的 DDL/DML

```
CREATE TABLE dbo.ACTIVITY(CUSTOMER int, LEDGER int, ACCOUNT int, ACTIVITY_DATE datetime, AMOUNT int)
INSERT dbo.ACTIVITY select
    1,2,3,GETDATE(),123 union all select
    1,2,3,GETDATE()-1,16 union all select
    1,2,3,GETDATE()-2,12 union all select
    1,2,3,GETDATE()-3,1 union all select
    4,5,6,GETDATE(),1000 union all select
    4,5,6,GETDATE()-6,123 union all select
    7,7,7,GETDATE(),99; 
```

* * *

## 备择方案

使用子查询获取上一行的更传统方法：

```
 SELECT CUSTOMER, LEDGER, ACCOUNT, ACTIVITY_DATE,
         AMOUNT - ISNULL((SELECT TOP(1) I.AMOUNT
                            FROM dbo.ACTIVITY I
                           WHERE I.CUSTOMER = O.CUSTOMER
                             AND I.LEDGER = O.LEDGER
                             AND I.ACCOUNT = O.ACCOUNT
                             AND I.ACTIVITY_DATE < O.ACTIVITY_DATE
                        ORDER BY I.ACTIVITY_DATE DESC), 0) AMOUNT
    FROM dbo.ACTIVITY O
ORDER BY CUSTOMER, LEDGER, ACCOUNT, ACTIVITY_DATE; 
```

或 ROW_NUMBER() 两次数据并在它们之间加入

```
 SELECT A.CUSTOMER, A.LEDGER, A.ACCOUNT, A.ACTIVITY_DATE, 
          A.AMOUNT - ISNULL(B.AMOUNT,0) AMOUNT
     FROM (SELECT *, RN=ROW_NUMBER() OVER (partition by CUSTOMER, LEDGER, ACCOUNT
                                          order by ACTIVITY_DATE ASC)
            FROM dbo.ACTIVITY) A
LEFT JOIN (SELECT *, RN=ROW_NUMBER() OVER (partition by CUSTOMER, LEDGER, ACCOUNT
                                          order by ACTIVITY_DATE ASC)
            FROM dbo.ACTIVITY) B ON A.CUSTOMER = B.CUSTOMER
                              AND A.LEDGER = B.LEDGER
                              AND A.ACCOUNT = B.ACCOUNT
                              AND B.RN = A.RN-1 -- prior record
ORDER BY A.CUSTOMER, A.LEDGER, A.ACCOUNT, A.ACTIVITY_DATE; 
```

# excel - 如何遍历特定列中的单元格并根据其内容删除整行？

> ID：13811718
> 
> 赞同：0
> 
> 时间：2012-12-11T00:29:22.733
> 
> 标签：excel, vba

这是另一个问题，我觉得有一个简单的答案，但我没有找到它。我正在遍历 D 列中的每个单元格并查找特定日期（来自用户输入），并基于该单元格的日期和一些相应单元格中的日期，我正在更改行的颜色。

我不想为行着色，而是希望能够将其删除。

这是我当前为这些行着色的代码：

```
Range(Cells(2, 4), Cells(Rows.Count, 4).End(xlUp)).Select

Dim rCell, otherCell As Range
Dim TheAnswer$
Dim ConvertedDate#

TheAnswer = InputBox("In M/D/YY format, enter the first day of the month for which this report is being run." & _
                     vbCr & vbCr & "For example, you would enter ""12/1/2012"" for the December 2012 report.", "Enter Date M/D/YY")
ConvertedDate = CDate(TheAnswer)

For Each rCell In Selection
    If rCell.Value <> "" Then
        If rCell.Value And rCell.Offset(, 5) < ConvertedDate And rCell.Offset(, 5) <> "" Then rCell.EntireRow.Interior.Color = RGB(255, 102, 0)

        If rCell.Value < ConvertedDate And rCell.Offset(, 5) = "" Then

            If rCell.Offset(, 6) < ConvertedDate And rCell.Offset(, 6) <> "" Then rCell.EntireRow.Interior.Color = RGB(255, 102, 0)

            If rCell.Offset(, 7) < ConvertedDate And rCell.Offset(, 7) <> "" Then rCell.EntireRow.Interior.Color = RGB(255, 102, 0)

        End If

    End If
Next rCell 
```

当我替换`rCell.EntireRow.Interior.Color = RGB(255, 102, 0)`为`rCell.EntireRow.Delete`我得到错误。如果我单步执行代码，我可以看到它确实删除了第一行，但是在下一行出现错误。

我显然有多个“If Then”语句，但是如果满足第一个“If Then”条件并且该行被删除，它应该继续移动到下一个单元格。在我看来，它仍在尝试检查已删除的行。我绝对不是 Excel VBA 专家，但我认为应该在`rCell.EntireRow.Delete`告诉它移动到下一个单元格的部分之后添加一些内容。我尝试添加`Next rCell`，但错误出来了。 `Exit For`完全停止宏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:54:25.567

迈克，当您遍历范围集并删除行时，您需要从最后一行向后循环，因为当您删除一行时，它不再存在并且它通过 Excel，因为该行不再在循环范围内。

试试这个：

```
Range(Cells(2, 4), Cells(Rows.Count, 4).End(xlUp)).Select

Dim rCell as Range, otherCell As Range
Dim TheAnswer$
Dim ConvertedDate#

TheAnswer = InputBox("In M/D/YY format, enter the first day of the month for which this report is being run." & _
                     vbCr & vbCr & "For example, you would enter ""12/1/2012"" for the December 2012 report.", "Enter Date M/D/YY")
ConvertedDate = CDate(TheAnswer)

Dim xrows as Long, i as Long
xrows = Selection.Rows.Count

For i = xrows to 1 Step -1

    Set rCell = Selection.Cells(i,1)

    If rCell.Value <> "" Then
        If rCell.Value And rCell.Offset(, 5) < ConvertedDate And rCell.Offset(, 5) <> "" Then rCell.EntireRow.Delete

        If rCell.Value < ConvertedDate And rCell.Offset(, 5) = "" Then

            If rCell.Offset(, 6) < ConvertedDate And rCell.Offset(, 6) <> "" Then rCell.EntireRow.Delete

            If rCell.Offset(, 7) < ConvertedDate And rCell.Offset(, 7) <> "" Then rCell.EntireRow.Delete

        End If

    End If

Next i 
```

Not sure if you wanted all to be `EntireRow.Delete`, but you can easily switch it back.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T10:33:51.390

See below, I updated and changed some duplicate conditions. The best two ways are either add the data into a variant array, process and then delete or as brettdj mentions in the comment add a flag, filter and then mass delete. I prefer the below as it scales well and is good practise to know for other data manipulation. Not tested as no template to base it on. See below:

```
Dim data() As Variant
Dim i As Double
Dim deleteRows As Range
Dim sht As Worksheet

Dim theAnswer As String
Dim ConvertedDate As Date

Set sht = Sheet1

theAnswer = InputBox("In M/D/YY format, enter the first day of the month for which this report is being run." & _
                 vbCr & vbCr & "For example, you would enter ""12/1/2012"" for the December 2012 report.", "Enter Date M/D/YY")
ConvertedDate = CDate(theAnswer)

data = sht.Range(Cells(2, 4), Cells(Rows.Count, 4).End(xlUp)).Resize(, 8)

    For i = 1 To UBound(data, 1)

        If (data(i, 1) <> vbNullString) Then

            If data(i, 1) <> vbNullString And data(i, 6) < ConvertedDate And data(i, 6) <> vbNullString Then

                If (deleteRows Is Nothing) Then
                    Set deleteRows = sht.Rows(i + 1)
                Else
                    Set deleteRows = Union(deleteRows, sht.Rows(i + 1))
                End If

            ElseIf data(i, 1) < ConvertedDate And data(i, 7) <> vbNullString And data(i, 8) <> vbNullString Then

                If data(i, 7) < ConvertedDate Or data(i, 8) < ConvertedDate Then

                    If (deleteRows Is Nothing) Then
                        Set deleteRows = sht.Rows(i + 1)
                    Else
                        Set deleteRows = Union(deleteRows, sht.Rows(i + 1))
                    End If

                End If

            End If

        End If

    Next i

deleteRows.Delete Shift:=xlUp 
```

# c# - 使用 ftpwebrequest 上传大文件无法完成

> ID：13811729
> 
> 赞同：0
> 
> 时间：2012-12-11T00:31:31.930
> 
> 标签：c#, ftp, uploading, ftpwebrequest, large-file-upload

我设计的软件使用 ftp 将文件上传到我的服务器我使用 ftpwebrequest 进行所有上传。当上传一个 700mb 的文件时，它会上传大约 500mbs 然后停止，它在上传较小的文件时工作正常，较小的文件上传成功，但它只是想在大文件上正常工作。我在后台工作人员中完成了上传，该后台工作人员将上传进度报告给主客户端的进度条。当后台工作人员完成时，它会执行后台工作人员完成功能。后台工作人员完成功能被执行，但上传从未完成，进度条停留在大约 65%，就像客户端停止上传并执行后台工作人员完成功能一样，就好像它完成了上传一样。上传不会出现什么问题

```
void UploadFileInBackground_DoWork(object sender,DoWorkEventArgs e)
{
        byte[] data;
        int packetsize = 1024 * 8;

        string Destination = UploadURI + cattext + "/" + ID + ".obj";
        string source = DialogBrower.FileName;
        FtpWebRequest request = (FtpWebRequest)WebRequest.Create(Destination);
        request.Credentials = new NetworkCredential("user", "pass");
        request.Method = WebRequestMethods.Ftp.UploadFile;
        request.UsePassive = true;
        request.UseBinary = true;
        request.KeepAlive = false;
        using (FileStream fs = new FileStream(source, FileMode.Open, FileAccess.Read))
        {
            try
            {
                long filesize = fs.Length;
                long sum = 0;
                int count = 0;
                data = new byte[packetsize];
                Stream reqStream = request.GetRequestStream();
                float totalpackits = filesize / packetsize;
                float weightofpackit = 100 / totalpackits;
                float percentage = 0;
                while (sum < filesize)
                {
                    List<string> statusparms = new List<string>();
                    count = fs.Read(data, 0, packetsize);
                    reqStream.Write(data, 0, count);
                    sum += count;
                    percentage += weightofpackit;
                    int percentagetotal = Convert.ToInt32(Math.Round(percentage));
                    statusparms.Add(sum.ToString());
                    statusparms.Add(filesize.ToString());
                    UploadFileInBackground.ReportProgress(percentagetotal, statusparms);
                }
                reqStream.Close();
                uploadedname = uploadingname;
            }
            finally
            {
                fs.Dispose();
                data = null;
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:28:09.653

请改用这个：

```
request.UseBinary = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T07:02:31.620

让我们试试这个

```
request.KeepAlive = false; 
```

至

```
request.KeepAlive = true; 
```

# sql - 在预期的地方找不到 FROM 关键字 - ORA-00923

> ID：13811730
> 
> 赞同：1
> 
> 时间：2012-12-11T00:31:33.460
> 
> 标签：sql, oracle

我有这个简单的 SQL 查询，我试图为一个 uni 项目运行它。我在标题中收到错误，但是我运行了一个非常相似的查询，没有问题。

```
select booking.customer_id, booking_start_date
   SUM(total_cost) sales
from booking
order by 2 desc 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T00:33:10.223

你错过了一个`,` after `booking_start_date`。

尝试 -

```
select booking.customer_id, 
       booking_start_date,
       SUM(total_cost) sales
from booking
GROUP BY booking.customer_id, booking_start_date
order by 2 desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:51:13.110

尝试以下..

```
select 
    booking.customer_id
    , booking.start_date
    , SUM(booking.total_cost) sales
from
    booking
group by
    booking.customer_id
    , booking.start_date
order by 
    2 desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T09:42:16.617

这是您更新的查询。当您使用 COUNT、SUM、MIN、MAX 等聚合函数时，还应该使用 GROUP BY。

```
select booking.customer_id, booking_start_date
   SUM(total_cost) sales
from booking group by booking.customer_id, booking_start_date
order by 2 desc 
```

# android - JSoup.connect(String url).get 上的 java.lang.ExceptionInInitializerError

> ID：13811732
> 
> 赞同：1
> 
> 时间：2012-12-11T00:32:01.900
> 
> 标签：android, jsoup, air-native-extension

我在 Android AIR 本机扩展中遇到了一个奇怪的 JSoup 问题。

我正在尝试从 YouTube 加载页面以从评论中提取一些数据。

这是“违规”代码：

```
private class ConnectToYouTube {
    public String html = null;
    public Exception error = null;
}

private class ConnectToYouTubeTask extends AsyncTask<String, Void, ConnectToYouTubeResult>
{
    @Override 
    protected ConnectToYouTubeResult doInBackground(String... params)
    {
        ConnectToYouTubeResult result = new ConnectToYouTubeResult();

        String videoId = params[0];

        try {
            Document doc = Jsoup.connect("http://www.youtube.com/watch?v="+videoId).get(); // in the catlog this is line 138
            Elements foo = doc.select("#comment-text");
            result.html  = foo.html();
        } catch (IOException e) {
            result.error = e;
        }

        return result;
    }
} 
```

这是亚行目录

```
E/AndroidRuntime(12131): FATAL EXCEPTION: AsyncTask #1
E/AndroidRuntime(12131): java.lang.RuntimeException: An error occured while executing doInBackground()
E/AndroidRuntime(12131):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
E/AndroidRuntime(12131):    at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
E/AndroidRuntime(12131):    at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
E/AndroidRuntime(12131):    at java.util.concurrent.FutureTask.run(FutureTask.java:239)
E/AndroidRuntime(12131):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
E/AndroidRuntime(12131):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
E/AndroidRuntime(12131):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
E/AndroidRuntime(12131):    at java.lang.Thread.run(Thread.java:856)
E/AndroidRuntime(12131): Caused by: java.lang.ExceptionInInitializerError
E/AndroidRuntime(12131):    at org.jsoup.nodes.Document$OutputSettings.<init>(Document.java:210)
E/AndroidRuntime(12131):    at org.jsoup.nodes.Document.<init>(Document.java:18)
E/AndroidRuntime(12131):    at org.jsoup.parser.TreeBuilder.initialiseParse(TreeBuilder.java:27)
E/AndroidRuntime(12131):    at org.jsoup.parser.TreeBuilder.parse(TreeBuilder.java:40)
E/AndroidRuntime(12131):    at org.jsoup.parser.HtmlTreeBuilder.parse(HtmlTreeBuilder.java:37)
E/AndroidRuntime(12131):    at org.jsoup.parser.Parser.parseInput(Parser.java:30)
E/AndroidRuntime(12131):    at org.jsoup.helper.DataUtil.parseByteData(DataUtil.java:102)
E/AndroidRuntime(12131):    at org.jsoup.helper.HttpConnection$Response.parse(HttpConnection.java:481)
E/AndroidRuntime(12131):    at org.jsoup.helper.HttpConnection.get(HttpConnection.java:149)
E/AndroidRuntime(12131):    at com.freshplanet.ane.AirYouTube.extractor.YouTubeExtractor$ConnectToYouTubeTask.doInBackground(YouTubeExtractor.java:138)
E/AndroidRuntime(12131):    at com.freshplanet.ane.AirYouTube.extractor.YouTubeExtractor$ConnectToYouTubeTask.doInBackground(YouTubeExtractor.java:1)
E/AndroidRuntime(12131):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
E/AndroidRuntime(12131):    at java.util.concurrent.FutureTask.run(FutureTask.java:234)
E/AndroidRuntime(12131):    ... 4 more
E/AndroidRuntime(12131): Caused by: java.lang.ExceptionInInitializerError
E/AndroidRuntime(12131):    at org.jsoup.nodes.Entities$EscapeMode.<clinit>(Entities.java:20)
E/AndroidRuntime(12131):    ... 17 more
E/AndroidRuntime(12131): Caused by: java.lang.NullPointerException: in == null
E/AndroidRuntime(12131):    at java.util.Properties.load(Properties.java:246)
E/AndroidRuntime(12131):    at org.jsoup.nodes.Entities.loadEntities(Entities.java:137)
E/AndroidRuntime(12131):    at org.jsoup.nodes.Entities.<clinit>(Entities.java:121)
E/AndroidRuntime(12131):    ... 18 more 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T06:40:10.373

是的@user1814155 是对的，我为此花了 2 天时间：D

```
Make sure the Jsoup library is in the Libs folder. I spend a good 2 hours banging my head against this error when that was the problem. Hope this helps, cheers. – user1814155 
```

# macros - Velocity Engine 不支持宏签名

> ID：13811739
> 
> 赞同：1
> 
> 时间：2012-12-11T00:33:06.890
> 
> 标签：macros, velocity

如何启用 Velocity 引擎以尊重#macro 签名，以便如果我尝试在模板中调用宏示例：

```
#myTestMacro($arg1 $arg2) 
```

定义时具有不同的签名示例：

```
#macro(myTestMacro $arg) 
```

Velocity 足够聪明，可以抛出错误，所以我可以在上面的示例中捕获无效数量的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T02:32:33.913

在配置中，设置`velocimacro.arguments.strict=true`.

# perl - 需要在 Perl 中比较时间；如何处理时区？

> ID：13811740
> 
> 赞同：3
> 
> 时间：2012-12-11T00:33:05.350
> 
> 标签：perl, datetime

我有具有时间戳的日志文件，例如：

```
Fri Nov 30 10:19:35:152.92 PST 2012
Fri Nov 30 10:19:35:228.8 PST 2012
or even:
Thu Nov 29 14:20:58:3.44 PST 2012
Fri Nov 30 10:27:50:742 PST 2012 
```

我对 Perl 很陌生，但这里的每个人都在使用它，所以我正在努力快速学习它（刚刚开始这项工作）。我需要能够比较时间戳（我正在合并时间可能重叠的日志文件，并且需要在结果文件中连续的所有时间戳）。这是我提取时间并将其格式化为我可以比较的字符串的子例程：

```
my %months = ( 'Jan'=>1, 'Feb'=>2, 'Mar'=>3, 'Apr'=>4, 'May'=>5, 'Jun'=>6, 'Jul'=>7,
'Aug'=>8, 'Sep'=>9, 'Oct'=>10, 'Nov'=>11, 'Dec'=>12);

sub to_comparable {
    my $date = shift;
    my ($mmm, $d, $H, $M, $S, $mils, $fra, $tz, $Y) = $date =~ 
        m{^<\w{3} (\w{3}) (\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}):(\d{1,3})[.]{0,1}(\d{0,2}) (\w{3}) (\d{4})>}
            or return undef;
    if ($mils eq "") { $mils = 0; }
    if ($fra eq "") { $fra = 0; }
    my $m = $months{$mmm};
    return sprintf('%04d%02d%02d%02d%02d%02d%03d%02d',$Y,$m,$d,$H,$M,$S,$mils,$fra);
} 
```

只要时间戳都来自同一个时区，这就可以正常工作。但是，我想确保它们适用于与标准时间和夏令时的更改重叠的日志（或者如果我从其他时区获取日志）。我想也许 DateTime 包可以解决问题，但我对如何使用时区来获得可比较的时间感到困惑。除了用于时区的内容外，我可以创建一个日期/时间对象。在我的测试中，我在映射月份后添加了以下内容：

```
 my $ns = sprintf('%03d.%02d',$mils,$fra);
    $ns *= 1000;

    my $dt = DateTime->new(
      year       => $Y,
      month      => $m,
      day        => $d,
      hour       => $H,
      minute     => $M,
      second     => $S,
      nanosecond => $ns,
      time_zone  => "$tz",
  ); 
```

这会导致错误“无效偏移：PST”。我找到了注释：“强烈建议您不要将这些名称用于显示以外的任何事情。这些名称不是官方的，其中许多只是奥尔森数据库维护者的发明。而且，这些名称不是唯一的。例如，在 -0500 和 +1000/+1100 处都有一个“EST”。和其他地方：“时区的短名称不是唯一的，因此任何从这样的名称确定实际时区的尝试都涉及猜测。请改用长名称。”

我无法控制给定的时区显示，所以我现在不知道该怎么做。如果我使用“PST8PDT”或“America/Los_Angeles”，如何指示给定时间是标准时间还是夏令时？美国的时区是否可以转换为 DateTime 将接受的时区？有人可以帮我解决这个问题吗？我合并日志文件的看似微不足道的项目一直在进行，我的老板认为我是个白痴。:-(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T00:47:11.893

可惜这么多日志文件使用的时间戳格式选择如此糟糕。我推荐[RFC 3339](http://www.ietf.org/rfc/rfc3339.txt)（它也是[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)格式之一）。

无论如何，关于这个问题。

创建一个映射以将源系统的标识符定义转换为`time_zone`构造函数参数接受的标准名称或偏移量。

```
my %time_zones = (
   EST => '-0500',
   PST => '-0800',
   PDT => '-0700',
   ...
); 
```

然后只需使用参数传递偏移量`time_zone`。

```
$ perl -MDateTime -E'say
   DateTime->new(
      year => 2012, month => 11, day => 4,
      hour => 1, minute => 16, second => 0,
      time_zone => "-0800",
   )->epoch;
'
1352020560

$ perl -MDateTime -E'say
   DateTime->new(
      year => 2012, month => 11, day => 4,
      hour => 1, minute => 16, second => 0,
      time_zone => "-0700",
   )->epoch;
'
1352016960

$ perl -E'say 1352020560 - 1352016960'
3600 
```

# python - 列表中的python随机数

> ID：13811742
> 
> 赞同：0
> 
> 时间：2012-12-11T00:33:11.077
> 
> 标签：python, list

这是我当前的代码：

```
import random

while True:
    try:
        num   = int(input("Enter the total number of digits you want to generate:"))
        upper = int(input("Enter your highest number:"))
        lower = int(input("Enter your lowest number:"))

        if upper < 1 or lower < 1 or upper <= lower:
            print ("Sorry, invalid. Make sure your upper bound is higher than lower bound, make sure all numbers are integers greater than 0.")
            continue

        if num < 1:
            print ("Sorry, invalid. Try again.")
            continue

        **mylist = [0] * num
        for x in range (lower, upper):** 
```

这里正上方的部分是我不太确定如何继续前进的部分。我想根据用户输入的数字以及用户在此处显示的列表中输入的上限和下限生成随机数。有人可以指导我完成这个吗？谢谢你！

```
except:
    print ("Sorry, invalid. Try again.")

else:
    print ("Thank you.")
    break 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:43:39.353

如果您`**`用以下内容替换您的行，使用`random.randint(lower, upper)`，您将显示您想要的列表：

```
mylist = []
for _ in range(num):
    mylist.append(random.randint(lower, upper))

print mylist 
```

你也可以通过列表理解来做到这一点：

```
mylist = [random.randint(lower, upper) for _ in range(num)]
print mylist 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T00:48:57.897

你可能需要：

```
print [random.randint(lower, upper) for n in range(num)] 
```

它显示了 num 个随机整数的列表，其中包含最小下限和最大上限（包括）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T00:36:53.630

如果您想要下限和上限之间的数字的随机子集，包括在内，您可以使用：

`random.sample(num, xrange(lower, upper + 1))`

[http://docs.python.org/2/library/random.html#random.sample](http://docs.python.org/2/library/random.html#random.sample)

但我认为你希望重复是可能的，在这种情况下使用其他答案之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T00:38:49.497

您可以使用`randint`生成给定范围内的数字。

返回一个随机整数**x**，使得**a <= x <= b。**

```
import random
print random.randint(a, b) 
```

**所以要在a**和**b**范围内生成**N**个数字

 ****```
numbers = [random.randint(a, b) for i in range(N)]
print numbers 
```****

# image - 绘制图表后的highcharts标记点

> ID：13811743
> 
> 赞同：0
> 
> 时间：2012-12-11T00:33:15.013
> 
> 标签：image, highcharts, html

我正在使用 highcharts 来绘制多个系列（在一个图表上的多个点的几条线）。用户在多条线上选择一个或多个点。有关所选点的数据显示在我的 asp 页面上的网格视图中。在一些服务器端逻辑之后，我想重绘页面并放置图像、标记、标志或其他方式向用户显示带有“标记”这些点的重绘图形。

我一直在使用 jquery 将图像（小圆圈）添加到呈现图表的 div 中，但对 div 中图像的 X/Y 位置不太幸运。

关于我如何做到这一点的任何建议或示例？未与 DIV 中的图像结婚，其他建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:30:58.633

我想到了。我创建了一个函数，当单击该点传递整个点对象时调用该函数。if 语句切换 ponit 的标记并使用 acumulate = true 它显示我的曲线上已选择的所有点。同样，如果它已经被选中，它会关闭标记。比我尝试的要容易得多。

这是我切换点并使它们全部选中的功能

```
 function ChartClicked(oPointObject) {            
            if (oPointObject.selected) {
                oPointObject.select(false, true);                
            }
            else {
                oPointObject.select(true, true);                
            }            
         } 
```

这是我的图表的片段。它在 plotOptions 我称之为点击事件

```
plotOptions: {
            series: {
                cursor: 'pointer',
                point: {
                    events: {
                        click: function () {

                            ChartClicked(this);
                        }
                    }
                }
            }
        }, 
```

希望这对其他人有帮助。

# iphone - iPhone Safari 上的奇怪结果：OL LI A 或 UL LI A

> ID：13811747
> 
> 赞同：2
> 
> 时间：2012-12-11T00:33:42.713
> 
> 标签：iphone, html, mobile-safari

我正在尝试使用这个 HTML：

```
<ol>
    <li><a href="link">link</a>
    <li><a href="link">link</a>
</ol>   

<ol>
    <li>Some Link: <a href="link">link</a>
    <li>Some Link: <a href="link">link</a>
</ol> 
```

在 iPhone 或模拟器上，我得到以下结果：

![带有链接的无序列表的奇怪呈现](../Images/7509472a43033b760674fe8e26f83a53.png)

为什么会发生这种情况，有哪些可能的解决方法？

**注意：**这会`UL`以相同的方式影响列表。它不会在 iPad 上发生（仅在 iPhone 和我想是 iPod touch 上）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T05:40:29.943

# 解决方法 1

```
ol, ul {
    -webkit-text-size-adjust: 100%;
} 
```

来源：[http ://blog.55minutes.com/2012/04/iphone-text-resizing/](http://blog.55minutes.com/2012/04/iphone-text-resizing/)

如链接中所述，[Twitter Bootstrap](http://twitter.github.com/bootstrap/)`-webkit-text-size-adjust: 100%;`开箱即用。

至于为什么这种变通方法有效，[MDN 上的文档`text-size-adjust`](https://developer.mozilla.org/en-US/docs/CSS/text-size-adjust)可能会有所帮助。

# 解决方法 2

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

# javascript - 带有美元符号的货币/字符串的数学运算

> ID：13811751
> 
> 赞同：1
> 
> 时间：2012-12-11T00:34:21.640
> 
> 标签：javascript, math, currency

是否可以有一个字符串，比如`$10.50`在 javascript 中对其进行数学运算？我在这个网站上找不到答案。

[JSFIDDLE](http://jsfiddle.net/QkCyM/2/)

HTML：

```
<p id="cost">$10.50</p>
---
<div id="output"></div> 
```

​ JavaScript：

```
$('#output').html($('#cost').html() / 2);​ 
```

输出：

```
NaN 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:36:23.423

**如果**您使用去掉美元符号，您可以对其进行数学计算；由于它通常位于第一个位置，因此您可以简单地`.substring(1)`在字符串值上使用。

```
$('#output').html($('#cost').html().substring(1) / 2);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:39:45.347

你可以这样做：

```
<p id="cost" data-value="1050" data-currency="$">$10.50</p>
---
<div id="output"></div>

var el = $("#cost");
$('#output').html( el.data("currency") + (el.data("value") / 2 / 100));​ 
```

[http://jsfiddle.net/QkCyM/5/](http://jsfiddle.net/QkCyM/5/)

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T00:40:19.403

不，但为什么不将'$'分开：

```
<p>$<span id="cost">10.50</span></p> 
```

或者你必须解析字符串并去掉'$"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T00:43:07.390

不，你不能对字符串进行数学运算。如果你这样做，JavaScript 将尝试隐式类型转换，但对于不以数字开头的字符串，它会失败 - 导致`NaN`.

首先，去掉美元符号（例如 by [`.slice(1)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/slice)），然后用于[`parseFloat`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat)获取数字。现在进行除法，然后[`.toFixed(2)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)用于将其转换回字符串以输出。更新小提琴：http: [//jsfiddle.net/QkCyM/7/](http://jsfiddle.net/QkCyM/7/)。

并且不要忘记[每个程序员都应该知道的关于浮点运算的知识](http://floating-point-gui.de/)。

# php - 如果引用者禁用，PHP如何检测来自姊妹网站的用户

> ID：13811759
> 
> 赞同：0
> 
> 时间：2012-12-11T00:35:28.460
> 
> 标签：php, detect, referrer

例如，我有两个域：

```
http://www.computer.com
http://www.computers.com 
```

`http://www.computer.com`是主要网站，`http://www.computers.com`只是虚拟的，将重定向到主要网站（http://www.computer.com）。

所以我使用纯 PHP 的目标是检测用户来自`http://www.computers.com`而不是谷歌或其他网站，或者直接输入 url 而不使用引用，因为它可以被禁用。

两个站点都在同一个主机上，但我无法从另一个站点访问一个站点的文件系统。并且`$_SESSION`是或`$_COOKIE`也是特定于域的变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T00:40:13.207

您可以将重定向脚本设置为推送到`www.computer.com?ref=sister`或类似的 URL，然后相应地登录，如果需要，重定向回主页以使其对用户透明。

您是否要求提供 htaccess 示例？或者只是关于如何做的想法？

你在你的computers.com 索引文件中说纯php：

```
 <?php 
    header("HTTP/1.1 301 Moved Permanently"); 
    header("Location: http://www.computer.com?ref=sister"); 
    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T00:48:19.657

您最好的选择是在多个层面上解决您的问题。首先，您应该将 www.computers.com 的 DNS 指向 www.computer.com 的 IP 地址。现在，您的两个请求都由同一服务器或服务器集群提供服务（如果在负载均衡器后面）。

其次，如果您确实想重写 URL 以利用单个域（以整合您的 cookie、会话等），那么您可以使用网络服务器重定向（即 Apache 的 mod_rewrite）将所有请求重定向到最终域。

最后，在那次重写中，您应该在重写时发送 301 代码，以确保蜘蛛等知道这是一个永久重定向。

# javascript - 当计数器达到 10 分钟时触发 Javascript 警报

> ID：13811760
> 
> 赞同：0
> 
> 时间：2012-12-11T00:35:34.303
> 
> 标签：javascript, jquery, momentjs

我有一个页面，每当另一个条目添加到数据库时就会更新。它显示时间戳，然后使用 jQuery 开始计数，以及 moment.js 以帮助时间格式化。这是代码：

```
$(function () {
    var austDay = new Date('".$array['dateAdded']."');
        $('#since".$array['id']."').countdown({since: austDay, significant: 1, layout:  '{d<}{dn} {dl} {d>}{h<}{hn} {hl} {h>}{m<}{mn} {ml} {m>}{s<}{sn} {sl}{s>}'});
}); 
```

每当给定条目超过时间戳日期和时间 10 分钟时，我需要能够触发警报。我认为脚本需要不断检查是否是这种情况。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:18:39.313

这是我为这个问题提出的解决方案，使用了 Javascript 和 PHP 的混合。

```
$now = date("Y-m-d h:i:s");
$plusTen = date("Y-m-d, h:i:s", strtotime("+10 minutes", strtotime($array['dateAdded'])));
$difference = strtotime($plusTen) - strtotime($now);
$difference = round($difference,2) * 1000;

if($difference > 0){
echo '<script type="text/javascript">
setTimeout(function(){staleAlert();}, '.$difference.')
</script>';
} 
```

# c++ - 列出 stl C++ 结构

> ID：13811761
> 
> 赞同：-3
> 
> 时间：2012-12-11T00:35:50.160
> 
> 标签：c++, linux, list, stl

我在 while 循环将数据从文本文件插入 stl 列表时遇到问题。你能帮我理解我的错误吗？非常感谢。错误是

```
server3.cpp: In function ‘int main(int, char**)’:
server3.cpp:43:11: error: ISO C++ forbids comparison between pointer and integer [-fpermissive]
server3.cpp:74:15: error: ‘class std::list<Record>’ has no member named ‘id’
server3.cpp:74:25: error: ‘class std::list<Record>’ has no member named ‘firstName’
server3.cpp:74:42: error: ‘class std::list<Record>’ has no member named ‘lastName’
server3.cpp:75:12: error: ‘class std::list<Record>’ has no member named ‘id’
server3.cpp:76:17: error: no match for ‘operator[]’ in ‘hashtable[hash]’
server3.cpp:76:50: error: expected primary-expression before ‘)’ token 
```

代码如下：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <pthread.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/msg.h>
#include <string.h>
#include <vector>
#include <list>
#include <iostream>
#include <fstream>
using namespace std;

const int SIZE =100;/*size of hashTable*/
/*Struct representing the record*/
struct Record
{
     int id;
     char firstName[100];
     char lastName[100];
} rec;

/*Structure representing a single cell*/
class Cell
{
    std:: list<Record> recs;
    pthread_mutex_t lock;
};

/* The actual hash table */
std::list<Cell> hashtable;

int main (int argc, char * argv[])
{

    ifstream indata; /* indata is like a cin*/
        indata.open("fileName"); /* opens the file*/

    list <Record> rec;/*create an object*/
    int hash;
    while ( !indata.eof() ) /* keep reading until end-of-file*/
    { 
    indata>> rec.id >> rec.firstName >> rec.lastName;
    hash =rec.id % sizeof(hashtable);
    hashtable [hash].listofrecords.push_back (Record);

    }
     indata.close();

   return 0;    

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:39:45.597

他们中的大多数人告诉你`list`没有没有成员，因为你试图做

```
indata>> rec.id >> rec.firstName >> rec.lastName; 
```

but`rec`是一个列表，而不是一个`Record`.

```
hashtable[hash] 
```

也是非法的（参见接口`std::list`， and`Record`是一种类型，并且不能在容器中插入类型，只能插入对象：

```
...push_back (Record); 
```

是非法的。

代码不仅有我们不时犯的偶尔错误，而且**从根本上来说是有缺陷**的。[我建议您从一本好书](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)开始学习 C++（如果您正在这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:45:55.890

仅这条线至少存在三个主要问题。

```
 hashtable [hash].listofrecords.push_back (Record); 
```

1.  `std::list`没有，`operator[]`所以你不能使用`[hash]`下标。
2.  您的程序中没有任何地方定义过什么`listofrecords`意思。
3.  您正在尝试`push_back`一种名为where 需要对象的*类型。*`Record`

请找到一本好的 C++ 书籍以开始使用：[权威 C++ 书籍指南和列表](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T00:40:58.640

请注意，您正在创建记录集合，但这意味着您需要先访问集合的元素，然后才能访问其中包含的记录字段。

这是使用列表类型的参考： [http ://www.cplusplus.com/reference/list/list/](http://www.cplusplus.com/reference/list/list/)

# capybara - Capybara，通过 ID 和 Class 检查 HTML 元素

> ID：13811763
> 
> 赞同：18
> 
> 时间：2012-12-11T00:36:12.907
> 
> 标签：capybara

初学者的两个问题。

Q1- 是否可以通过 ID 和类断言 HTML 节点的存在？例如，查看以下元素是否存在：

```
<div class="drawer" id="first"....> 
```

我看到你可以使用类似的东西：

```
 page.should have_css('div.drawer')
 page.should have_css('div#first') 
```

但是我们可以以某种方式查询这两个参数的存在吗，我尝试了以下方法但没有奏效：

```
page.should have_selector("div", :class => "drawer", :id => "first") 
```

Q2-是否可以在“内部”水豚方法中添加 2 个选择器，即，我已经看到您可以通过以下方式限制范围：

```
within("//div[@id='first']") do 
```

但是我们可以通过以某种方式添加 id='first' 和 class='drawer' 来过滤该 DIV 吗？

非常感谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-11T04:53:16.373

您可以组合选择器。

对于您的第一个问题，以下检查 id 为“first”且类为“drawer”的 div：

```
page.should have_css('div#first.drawer') 
```

对于您的第二个问题，该`within`块可以使用与上述相同的 css-selector：

```
within('div#first.drawer') do 
```

或者如果你真的更喜欢 xpath，你可以这样做：

```
within("//div[@id='first' and @class='drawer']") do 
```

css-selector 的一个很好的参考：http: [//www.w3.org/TR/CSS2/selector.html](http://www.w3.org/TR/CSS2/selector.html)

# php - 如何让 PHP 文件自动运行？

> ID：13811764
> 
> 赞同：1
> 
> 时间：2012-12-11T00:36:12.627
> 
> 标签：php, cron

我有一个 PHP 文件**x.php** ，每次运行时都会输出*b.xml 。*我这样做的方法是使用 crontab 运行**x.php**文件。问题是由于服务器的设置，新文件的权限为 400。所以我还有另一个 crontab 行将文件*b.xml*权限更改为 777，以便下次可以运行**x.php 。**

我觉得我把这件事弄得太复杂了。有什么办法可以让这更简单一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:50:44.737

## 快速回答

您需要在 x.php 脚本中将文件 chmod 为 777。

创建 b.xml 后，运行以下行：

```
chmod('path/b.xml', 0777); 
```

请注意，使用 chmod 时应始终指定八进制数。

## 更好的方法？

运行 cron 作业时，应特别注意运行 cronjob 的用户。

通常在共享服务器上，您将拥有自己的登录名，因此 cron 作业以该用户身份运行。我问你的问题——那个用户和你的网络服务器一样吗？通常 php 作为“apache”运行，而 cron 可能作为“tanner”运行。在这种情况下，将 b.xml 设置为 tanner 拥有，并且权限为 400 意味着只有 tanner 可以更改文件。要解决这个问题，如果您无权访问 umask，一种方法是将您的 cron 作业更改为作为网络服务器运行：

`su -c "php /home/jonathan/public_html/b.php" apache`

这可能会也可能不会起作用，具体取决于您是否被允许以用户身份切换到 apache。不要忘记将 apache 切换到实际的 Web 服务器用户名。

现在，如果这不起作用，那么另一种选择是获得 777 权限。请记住，在共享服务器上，这意味着该服务器上的任何人如果知道路径，则可能会访问该文件。

OP建议的另一种方式：

`0,10,20,30,40,50 * * * * /usr/bin/wget http://example.com/user/x.php`

这种方式将始终以 apache 运行的 apache（或其他）用户身份运行，确保下次访问时，该文件将可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:43:33.957

这应该有效：

```
// set permission
chmod('path/to/b.xml', 777);

// do other stuff 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T03:19:13.003

为了解决这个问题，我最终只创建了一个 cronjob，如下所示：

```
0,10,20,30,40,50 * * * * /usr/bin/wget http://example.com/user/x.php 
```

这执行了创建 b.xml 的文件，并且由于执行脚本的用户是公开的，因此权限也保持公开。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T00:50:28.870

要求服务器管理员创建一个新用户，该用户拥有脚本写入 xml 文件的文件夹。以这样的用户身份通过​​您的 cron 作业运行您的 php 脚本。如果您以文件夹所有者的身份运行脚本，则可以通过 php 脚本更改权限。

# r - 在 y>0 处开始 geom_bar / 仅在一侧停用剪辑

> ID：13811765
> 
> 赞同：1
> 
> 时间：2012-12-11T00:36:19.447
> 
> 标签：r, ggplot2

我遇到了这两个要求的问题：

*   y 轴必须从 3 开始
*   有些`geom_text`会超出右侧的图表范围

![在此处输入图像描述](../Images/7bd688e4038cc1ac20444f8041b32d24.png)

到目前为止我的想法及其缺陷：

*   从所有数据集和假 y 轴标签中减去 -3（不希望这样做）
*   建立一个`geom_bar`高度为 3 的假人（如何让它远离传说？）

任何想法，将不胜感激！

```
library(grid)
library(ggplot2)

df=data.frame(
  Date=c("2012-11-30", "2012-12-03", "2012-12-04"),
  d1=c(12, 8, 13),
  d2=c(13, 7, 12),
  e1=c(7, 9, 8)
)

frame()
p=ggplot(df, aes(Date)) + 
    geom_bar(aes(y=e1, fill="e1"), stat="identity", color="red") +
    geom_line(aes(y=d1, group=1, color="d1")) +
    geom_line(aes(y=d2, group=1, color="d2")) +
    geom_text(aes(x =3.5, y=c(14,13,12), label=c("Text1","Text2","Text3"))) +
    scale_colour_manual(" ", values=c("e1"="red", "d1"="blue", "d2"="black"))+
    scale_fill_manual("", values="red") +
    coord_cartesian(ylim=c(3,15), xlim=c(0.5,3.5)) +
    theme(legend.key=element_blank(),legend.title=element_blank(),
          legend.position="top", legend.box="horizontal",
          plot.margin=unit(c(1, 2, 1, 1), "cm"))

p1 <- ggplot_gtable(ggplot_build(p))
p1$layout$clip[p1$layout$name=="panel"] <- "off"
grid.draw(p1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T02:23:08.373

您定义自己的比例转换

```
library(scales)
translate3_trans <- function() {
  trans <- function(x) x - 3
  inv   <- function(x) x + 3
  trans_new("translate3_trans", trans, inv)
} 
```

然后你添加

```
 p <- p + scale_y_continuous(trans="translate3") 
```

![在此处输入图像描述](../Images/050d132aafbe1b420d2c3ceabbc01243.png)

我不明白你想把 geom_text 放在哪里。

PS：对不起，我将 alpha 更改为 0.5，因为你的红色伤害了我的眼睛。

# c# - 行过滤器转换为字符串

> ID：13811771
> 
> 赞同：0
> 
> 时间：2012-12-11T00:36:53.443
> 
> 标签：c#, visual-studio-2010

我试图在 c# 中使用 rowfilter 将所有列与字符串匹配，但源列（请求开始日期）是日期类型。

```
 dvjan.RowFilter = "[Req Start Date]='January'"; 
```

我将如何转换 rowfilter 中的类型以显示 1 月的所有日期。我需要使用字符串“January”

由于某种原因，我无法添加评论，但这是 1 年

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:00:58.127

您必须使比较字符串的两个部分具有相同的格式。为此，最好的方法是从字符串中获取数字月份，您可以这样做：

```
int month = DateTime.ParseExact("January", "MMMM", CultureInfo.CurrentCulture).Month; 
```

DataView 并非真正设计用于处理日期。（您仍然可以使用带有“#”分隔符的日期，但这里有一个 linq 版本，在`datatable`

```
 var dt = new System.Data.DataTable();

        dt.Columns.Add("MyDate", typeof(DateTime));
        dt.Rows.Add(new DateTime(2011,1,10));
        dt.Rows.Add(new DateTime(2011,2,10));

        int month = DateTime.ParseExact("January", "MMMM", CultureInfo.CurrentCulture).Month;
        var list = dt.AsEnumerable()
                     .Where(x => x.Field<DateTime>("MyDate").Month == month)
                     .Select(x => x.Field<DateTime>("MyDate")).ToList();
        foreach (var d in list)
        {
            Console.WriteLine(d);
        } 
```

编辑：如果你想使用数据视图，你可以指定上限和下限。像这样：

```
dt.DefaultView.RowFilter = "[MyDate] > #" + filterDateLower + "# and [MyDate] < #" + filterDateUpper +"#"; 
```

完整示例：

```
var dt = new System.Data.DataTable();

            dt.Columns.Add("MyDate", typeof(DateTime));
            dt.Rows.Add(new DateTime(2012,1,10));
            dt.Rows.Add(new DateTime(2012,2,10));

            int month= DateTime.ParseExact("January", "MMMM", CultureInfo.CurrentCulture).Month;
            DateTime filterDateLower = new DateTime(DateTime.Now.Year, month, 1);
            DateTime filterDateUpper = filterDateLower.AddMonths(1);
            dt.DefaultView.RowFilter = "[MyDate] > #" + filterDateLower + "# and [MyDate] < #" + filterDateUpper +"#";
            foreach (DataRow d in dt.DefaultView.ToTable().Rows)
            {
                Console.WriteLine(d["MyDate"].ToString());
            } 
```

# ios - 平滑的自转动画

> ID：13811772
> 
> 赞同：0
> 
> 时间：2012-12-11T00:37:03.457
> 
> 标签：ios

我在我的应用程序中实现了自动旋转支持，它主要是一个子类 UIScrollView，它做了很多特殊的事情（第一张图片）。`layoutSubviews`在 main 上`UIView`调用，后者又调用滚动视图的`layoutSubviews`. 正如预期的那样（第二张图片），这会将内容调整为新方向的边界。然后发生旋转动画。结果，用户在旋转设备之后但在新调整大小的内容旋转到其最终位置之前，会在视图周围看到丑陋的死区。

我的应用程序是这样编写的，它的内容关闭了隐式动画，因此调整大小`layoutSubviews`是即时的。（否则，我相信那里发生的任何事情都会随着旋转而动画化。）从我的角度来看（并考虑到应用程序的视觉内容），最简单的事情是调整新方向的大小，然后将其拉伸为看起来像旧方向，然后在视图旋转到位时为该拉伸的撤消设置动画。这不起作用：对`UIScrollView`'`transform`属性的调整搞砸了它的内部几何概念，如果`UIView`我`transform`在`willRotateToInterfaceOrientation`. 任何在或以后进行的变换`viewWillLayoutSubviews`都是动画的，所以到那时我已经需要撤消我之前所做的拉伸：

```
willrotate start, main transform [1, 0, 0, 1, 0, 0] (untouched)
willrotate end, main transform [4, 0, 0, 0.25, 0, 0] (trying to stretch it arbitrarily)
willlayout, main transform [0, 1, -1, 0, 0, 0] (my stretch was overwritten by rotation; animation block has already started)
didlayout, main transform [0, 1, -1, 0, 0, 0]
willanim, main trasform [0, 1, -1, 0, 0, 0]
didrotate, main transform [0, 1, -1, 0, 0, 0] 
```

普通视图 ==> 旋转前调整大小的视图（我想拉伸它以覆盖黑色空间）

![正常纵向视图](../Images/48bfaf2c230c1e1a1454d4b8328fca0c.png) ![调整大小后，旋转前](../Images/5ea8db93dc8ed7cfa14bcfe4639df2d6.png)

如何在动画之前拉伸新内容，并在最后不拉伸？或者，我应该以完全不同的方式来做这件事吗？动画调整所有元素的大小不是一种选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T01:04:51.580

毫无疑问，对于这个问题，您应该咨询一个全面而明确的来源：WWDC2012，第 240 场会议，“抛光您的界面旋转”。

它详细介绍了一些平滑旋转动画的技巧。

我想到的可能与您有关的主要问题是调用`setShouldRasterize`，`willRotateToInterfaceOrientation:duration:`配置您想要的动画，然后`willAnimateRotationToInterfaceOrientation:duration:`关闭`shouldRasterize`。`didRotateFromInterfaceOrientation:`

# php - 在 While 循环 PHP 中使用 If 语句

> ID：13811778
> 
> 赞同：1
> 
> 时间：2012-12-11T00:38:23.300
> 
> 标签：php, if-statement, while-loop

尝试测试循环在哪一行，如果它大于或等于六，请将 $TESTIMAGE 变量插入到 span 元素中以进行下一次迭代。

当我运行代码时，它会将变量插入第一行之后的所有内容中。

```
While($row = mysql_fetch_array($result))

{

    //assign variables
    $title = $row['title'];
    $url = $row['location'];
    $image = "/waves/files/images/games/$title.png";

    echo "
            <span class='dropt'>

                <a href=$url>$title</a>

                        <span class='$TESTIMAGE'>
                            <img src='$image'>
                        </span>

            </span>
            <br />
    ";

//Test to see which row we're on -- adjust image position
If (mysql_num_rows($result) >= 6)
{
$TESTIMAGE = "image_display_up";
}   

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:41:08.580

使用递增索引：

```
$i = 0;
while($row = mysql_fetch_array($result)){
    $i += 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:42:04.197

这是因为`mysql_num_rows()`对于循环的每次迭代都将返回相同的精确值，因为结果更改中的行数不会改变。

你需要实现一个计数器来做你想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T00:42:49.720

试试这样：

```
$i = 1;

While($row = mysql_fetch_array($result)) {
    if(!($i%6)) {  // will enter here on the 6th try.

    //assign variables
    $title = $row['title'];
    $url = $row['location'];
    $image = "/waves/files/images/games/$title.png";

        echo "
        <span class='dropt'>

            <a href=$url>$title</a>

                    <span class='$TESTIMAGE'>
                        <img src='$image'>
                    </span>

            </span>
            <br />
       ";
  }
  if($i!=6)  // this way it remains on 6
     $i++; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T00:43:29.683

```
$i=0;
While($row = mysql_fetch_array($result)) {
    //assign variables
    $title = $row['title'];
    $url = $row['location'];
    $image = "/waves/files/images/games/$title.png";
    $TESTIMAGE = ($i++ >= 6) ? "image_display_up" : "";

    echo "
            <span class='dropt'>
                <a href=$url>$title</a>
                        <span class='$TESTIMAGE'>
                            <img src='$image'>
                        </span>
            </span>
            <br />
    ";
}​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T00:43:32.387

对 mysql_num_rows($result) 的调用总是返回相同的数字。您想在每次迭代时增加一个索引：

```
$idx = 0
while (blah) {
    if ($idx >= 6)
    {
        $TESTIMAGE = "image_display_up";
    }   
    $idx += 1
} 
```

# vb.net - 检查 cookie 是否存在 #2

> ID：13811779
> 
> 赞同：0
> 
> 时间：2012-12-11T00:38:24.643
> 
> 标签：vb.net, cookies, geckofx

尝试从 VB.Net 开始并遇到问题

我们在 C# 中有这样一个[类。](https://bitbucket.org/geckofx/geckofx-8.0/src/cc1a16ddce40/Skybound.Gecko/CookieManager.cs)如何检查cookie是否存在？确切地说，如何为函数 CookieExist 设置输入对象“Cookie”？如何使用 GeckoFx 创建它？例如，如何查找名称为“Test2”的 cookie？

请举个例子。

我对 VB.Net 快疯了

PS 如果可以自己找到信息，我很少写信给论坛，但是 VB.Net 在网上的例子太少了。;/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:15:11.490

我认为下面的代码会对您有所帮助：

```
Dim cookieValue As String = "Value of cookie"
Dim cookieName As String = "CookieName"

Dim realCookie As HttpCookie = HttpContext.Current.Request.Cookies.Get(cookieName)
If IsNothing(realCookie) Then
    HttpContext.Current.Request.Cookies.Add(New HttpCookie(cookieName, cookieValue))
End If 
```

# android - 使用 VideoView、ExpandableListView 和可滚动的 TextView 构建 XML 布局

> ID：13811790
> 
> 赞同：0
> 
> 时间：2012-12-11T00:40:17.097
> 
> 标签：android, android-layout, textview, scrollview, expandablelistview

我在构建一个带有一半屏幕的videoView、一个带有两个孩子的expandableList和视频帧下方的一些textView的XML布局时遇到了问题。文本在列表下方，所以如果我展开列表并且列表填满了半屏的其余部分，它应该能够滚动到 textView。

我的想法是将expandableList 放在scrollView 中，但我无法展开列表。

我建立了我的布局如下：

*   线性布局
    *   视频视图
    *   滚动视图
        *   线性布局
            *   ExpandableListView
            *   文本视图>
            *   ...

是否有其他方法可以实现我的意图或为什么我不能扩展我的列表。

编辑：XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<VideoView
    android:id="@+id/video_player_h"
    android:layout_width="match_parent"
    android:layout_height="0px"
    android:layout_weight="1" />

<ScrollView
    android:layout_width="match_parent"
    android:layout_height="0px"
    android:layout_weight="1" >

    <ExpandableListView
        android:id="@+id/expandableList"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:groupIndicator="@drawable/group_indicator" >

        <TextView
            android:id="@+id/android:empty"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Empty" >
        </TextView>

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/view_text"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:gravity="center"
                android:paddingLeft="10dp"
                android:text="Views: "
                android:textSize="16sp" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/view_text"
                android:gravity="center"
                android:hint="12345"
                android:paddingLeft="10dp"
                android:textSize="16sp" />

            <RatingBar
                style="@style/newRatingBar"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:isIndicator="false"
                android:numStars="5"
                android:rating="3" />
        </RelativeLayout>

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/date_text"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:paddingLeft="10dp"
                android:text="Date: "
                android:textSize="16sp" />

            <TextView
                android:id="@+id/date_video"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/date_text"
                android:hint="11.11.1111"
                android:textSize="16sp" />

            <TextView
                android:id="@+id/uploader"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:hint="Mr. X"
                android:paddingRight="10dp"
                android:textSize="16sp" />

            <TextView
                android:id="@+id/user_text"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toLeftOf="@id/uploader"
                android:text="User: "
                android:textSize="16sp" />
        </RelativeLayout>
    </ExpandableListView>
</ScrollView>

</LinearLayout> 
```

班级：

```
public class Player extends Activity {
ExpandableListView titleList;
VideoView videoView;
ExpandableListAdapter exp;

private static final String OUTPUT_FILE="/storage/sdcard0/bigbuckbunny.3gp";

public int GetDipsFromPixel(float pixels)
{
 float scale = getResources().getDisplayMetrics().density;
 return (int) (pixels * scale + 0.5f);
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.play_activity);

    videoView = (VideoView) findViewById(R.id.video_player_h);
    MediaController mc = new MediaController(this);
    videoView.setMediaController(mc);
    videoView.setVideoPath(OUTPUT_FILE);

    if (getResources().getConfiguration().orientation == 1) {
        titleList = (ExpandableListView) findViewById(R.id.expandableList);

        ArrayList<String> groupList = new ArrayList<String>();
        groupList.add("Titel");
        ArrayList<ArrayList<String>> childrenList = new ArrayList<ArrayList<String>>();
        ArrayList<String> childrenElement = new ArrayList<String>();
        childrenElement.add("Beschreibung");
        childrenList.add(childrenElement);
        ExpandableListAdapter listAdapter = new ExpandableAdapter(this, groupList, childrenList);

        DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);
        int width = metrics.widthPixels;

        titleList.setIndicatorBounds(width - GetDipsFromPixel(50), width - GetDipsFromPixel(10));
        titleList.setAdapter(listAdapter);
        titleList.setDividerHeight(1);
        titleList.setClickable(false);

    }

}

class ExpandableAdapter implements ExpandableListAdapter {

    Context context;
    ArrayList<String> groups;
    ArrayList<ArrayList<String>> children;

    public ExpandableAdapter(Context context, ArrayList<String> groups, ArrayList<ArrayList<String>> children) {
        this.context = context;
        this.groups = groups;
        this.children = children;
    }

    public Object getChild(int groupPosition, int childPosition) {
        return children.get(groupPosition).get(childPosition);
    }

    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
        if(convertView==null){
            LayoutInflater inflator = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView  = inflator.inflate(R.layout.title_child, null);
        }
        TextView text = (TextView) convertView.findViewById(R.id.child_field);
        text.setText(children.get(groupPosition).get(childPosition));
        return convertView;
    }

    public int getChildrenCount(int groupPosition) {
        return children.get(groupPosition).size();
    }

    public Object getGroup(int groupPosition) {
        return groups.get(groupPosition);
    }

    public int getGroupCount() {
         return groups.size();
    }

    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
        if(convertView==null){  
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.title_group, null);
        }
        TextView text = (TextView) convertView.findViewById(R.id.group_field);
        text.setText(groups.get(groupPosition));
        return convertView;
    }

    public boolean hasStableIds() {
        return true;
    }

    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }

    public boolean areAllItemsEnabled() {
        return false;
    }

    public long getCombinedChildId(long groupId, long childId) {
        return 0;
    }

    public long getCombinedGroupId(long groupId) {
        return 0;
    }

    public boolean isEmpty() {
        return false;
    }

    public void onGroupCollapsed(int groupPosition) {
    }

    public void onGroupExpanded(int groupPosition) {
    }

    public void registerDataSetObserver(DataSetObserver observer) {
    }

    public void unregisterDataSetObserver(DataSetObserver observer) {
    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:50:38.017

当然，我的建议是

*   滚动视图

    *   可扩展列表
        *   文本视图 1
        *   文本视图 2
        *   很快...

    ```
    <ExpandableListView
        android:id="@+id/android:list"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:groupIndicator="@drawable/group_indicator">

        <TextView 
            android:id="@+id/android:empty" 
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:text="Empty">      
        </TextView>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/view_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:gravity="center"
            android:paddingLeft="10dp"
            android:text="Views: "
            android:textSize="16sp" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/view_text"
            android:gravity="center"
            android:paddingLeft="10dp"
            android:hint="12345"
            android:textSize="16sp" />

    </RelativeLayout>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/date_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:paddingLeft="10dp"
            android:text="Date: "
            android:textSize="16sp" />

        <TextView
            android:id="@+id/date_video"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/date_text"
            android:hint="11.11.1111"
            android:textSize="16sp" />
     </RelativeLayout>
    </ExpandableListView>
    </ScrollView> 
    ```

# java - 按下/实现按钮时执行操作的替代方法，android

> ID：13811797
> 
> 赞同：1
> 
> 时间：2012-12-11T00:41:26.720
> 
> 标签：java, android, android-button, ontouchlistener

我想为android 4.0制作一个带有9个按钮的应用程序，我需要每个按钮在*按下时调用一个方法，在**释放*时调用另一个方法。

我有点惊讶，没有一个真正直接的方法来完成我刚才描述的事情，但是由于我在 stackoverflow 上阅读的一些问题和答案，我设法通过**在每个按钮中**添加一个侦听器来完成我需要的事情，如图所示为下一个代码中的一个按钮。

```
buttonUp.setOnTouchListener(new OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_DOWN) {
            buttonUpPressed();
        } else if (event.getAction() == MotionEvent.ACTION_UP) {
            buttonUpReleased();
        }                
        return true;
    }           
}); 
```

我想知道是否有替代方法可以完成此行为，而无需为**每个**按钮添加侦听器。我认为这是对资源和大量编码的浪费。我无法想象我最终是否必须添加更多按钮。

所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:31:52.710

您可以将所有按钮添加到数组或 ArrayList 中，然后在您的类中定义一个侦听器字段。

```
OnTouchListener oclButtons = new OnTouchListener(...); 
```

然后您可以将相同的侦听器添加到 ArrayList 中的所有 Button。

```
for (Button b : listOfButtons) {
    b.setOnTouchListener(oclButtons);
} 
```

为每个按钮设置 ID 的另一种方法是获取/设置标签（因为每个视图都需要一个唯一的 ID）。您的听众可以使用 v.getTag() 确定哪个按钮被触摸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:50:00.897

用 OnTouchListener 实现你的类

```
Button a,b;
        Button[] bArray = {a,b};
        for (int i = 0; i < bArray.length; i++) {
            bArray[i].setOnTouchListener(this)
        } 
```

之后添加未实现的方法

```
@Override
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
            if(event.getAction() == MotionEvent.ACTION_DOWN){
                switch (v.getId()) {
                case R.id.button1:

                    break;

                default:
                    break;
                }
            }
            else if(event.getAction() == MotionEvent.ACTION_UP){
                switch (v.getId()) {
                case R.id.button1:

                    break;

                default:
                    break;
                }
            }
        return false;
    } 
```

我希望你会喜欢我的逻辑:)

# objective-c - NSPanel 有黑色背景，文本不可见

> ID：13811802
> 
> 赞同：1
> 
> 时间：2012-12-11T00:42:11.077
> 
> 标签：objective-c, xcode, xcode4, screensaver, nspanel

我正在尝试为`ScreenSaverView`子类显示配置表。经过与 Xcode 的长期斗争，我终于在系统偏好设置中单击“屏幕保护程序选项”时出现配置表（并且选择了我的屏幕保护程序），并且该表的行为正常，但有一个例外：背景为黑色，使文本不可见（见图）。![配置表上的黑色背景。](../Images/243055a22c7ced191e901a898911270b.png)

无论工作表是一个`NSPanel`或`NSWindow`类，以及面板是常规面板、实用程序面板还是 HUD 面板，都会发生这种情况。我似乎唯一能做的就是改变面板的 alpha 值，正如预期的那样，它使一切变得更加透明（但文本仍然不可见）。有趣的是，调用`setOpaque`or`setBackgroundColor`上的`NSPanel`or`NSWindow`似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:40:15.213

要弄清楚它为什么显示为黑色，我们真的需要查看有关如何创建窗口的代码。

我刚刚做了一个快速测试项目，它似乎在这里工作正常。IMO，在该方法中创建要返回的窗口的最简单解决方案`configureSheet`是使用`NSWindowController`子类来加载您已提前配置窗口的 nib 文件。

因此，在您的`ScreenSaverView`子类中，您将定义一个类似于以下内容的接口：

```
@interface MDScreenSaverFinaglerView : ScreenSaverView {
    MDScreenSaverOptionsWindowController        *optionsWindowController;

    NSInteger                                    screenSaverViewMode;
}

@property (nonatomic, retain) MDScreenSaverOptionsWindowController
                                             *optionsWindowController;

@property (nonatomic, assign) NSInteger screenSaverViewMode;

@end 
```

对于该方法，您的实现将如下所示`configureSheet`：

```
- (NSWindow *)configureSheet {
    if (optionsWindowController == nil) {
        optionsWindowController = [[MDScreenSaverOptionsWindowController alloc]
                                                  initWithScreenSaverView:self];
    }
    return optionsWindowController.window;
} 
```

基本上，您检查`optionsWindowController`实例是否存在，必要时创建它，然后返回它的`window`.

自定义`NSWindowController`子类的接口如下所示：

```
@interface MDScreenSaverOptionsWindowController : NSWindowController {
    IBOutlet NSMatrix                *optionsMatrix;

    MDScreenSaverFinaglerView        *screenSaverView;    // non-retained/weak reference
}

- (id)initWithScreenSaverView:(MDScreenSaverFinaglerView *)aView;

@property (nonatomic, assign) MDScreenSaverFinaglerView *screenSaverView;

- (IBAction)ok:(id)sender;

@end 
```

一旦用户单击“确定”按钮，有一个`screenSaverView`属性将允许与子类进行通信。`ScreenSaverView`

类的 nib 文件`MDScreenSaverOptionsWindowController`（名为“MDScreenSaverOptionsWindowController.xib”）的设置如下所示：

![在此处输入图像描述](../Images/973e6dbf0268bb5efff3614bbe1dd4de.png)

的实现`MDScreenSaverOptionsWindowController`如下所示：

```
@implementation MDScreenSaverOptionsWindowController

@synthesize screenSaverView;

- (id)initWithScreenSaverView:(MDScreenSaverFinaglerView *)aView {
    NSParameterAssert(aView != nil);
    if ((self = [super initWithWindowNibName:NSStringFromClass([self class])])) {
        self.screenSaverView = aView;
    }
    return self;
}

- (void)windowDidLoad {
    [super windowDidLoad];
    [optionsMatrix selectCellWithTag:screenSaverView.screenSaverViewMode];
}

- (IBAction)ok:(id)sender {
    NSInteger viewMode = [optionsMatrix selectedTag];
    [[NSUserDefaults standardUserDefaults] setObject:[NSNumber
                  numberWithInteger:viewMode] forKey:MDScreenSaverViewModeKey];
    screenSaverView.screenSaverViewMode = viewMode;
    [NSApp endSheet:self.window];
}
@end 
```

最终结果：

![在此处输入图像描述](../Images/aa5239c221b486727af5b11cf37ab99b.png)

示例项目：[ScreenSaverFiagler.zip](http://www.markdouma.com/developer/ScreenSaverFinagler.zip)

# javascript - 对象错误中的 Javascript 对象

> ID：13811804
> 
> 赞同：2
> 
> 时间：2012-12-11T00:42:35.970
> 
> 标签：javascript, object, internet-explorer-8, internet-explorer-7

当我使用 javascript 对象时，我在 Internet Explorer 7 和 8 中有一个奇怪的错误。它适用于 IE9 和所有其他。

当我使用一个对象并且对象中的任何参数都是“类”时，Internet Explorer 7 和 8 停止做任何事情。

我正在使用 jquery 1.8.2。

我会给你看一些代码。

```
var obj = {
             data:{class:'image',action:'getAllFkId',type:nbType, fkid:id},
             success:function(json){
                alert('hi');

            }
        };
        this.ajax(obj); 
```

“this.ajax”的代码（“this”是一个对象）：

```
ajax : function(params){ 

        var defaults = {
            url: '../index.php',
            type:'POST',
            data:{},
            dataType:'json',
            success:function(){/*Function handler*/}
        }
        var options = $.extend(defaults, params);

        $.ajax(options);
        return this;
    }, // ..... rest of code 
```

如果我将参数的名称更改为其他任何名称，它就会起作用。

```
// This is just fine foo instead of class
var obj = {
         data:{foo:'image',action:'getAllFkId',type:nbType, fkid:id},
         success:function(json){
            alert('hi');

        }
    };
    this.ajax(obj); 
```

我想了解为什么 IE7-8 不能使用“类”作为参数。谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:43:59.617

对于一些较旧的浏览器，您需要`class`用引号引起来。

```
data:{"class":"image",... 
```

虽然 ECMAScript 允许保留字作为属性标识符，但一些较旧的浏览器不允许它。

# javascript - 读取文本文件并在一行中显示每个条目

> ID：13811808
> 
> 赞同：0
> 
> 时间：2012-12-11T00:43:06.873
> 
> 标签：javascript, jquery, replace

我想读取一个文本文件并在 div 中显示信息，然后`|`用 a替换分隔符，`<br/>`这样所有内容都在一行上。到目前为止，我的工作正常，但`.replace()`唯一的工作是一次。我读到了这个，但不知道如何解决它。

到目前为止，这是我的代码：

```
 $.get('feed.txt', function(data) {
        $('div').html(data.replace('|','<br>'));
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:47:37.523

您需要使用正则表达式替换而不是字符串替换：

```
.replace(/\|/g, '<br>'); 
```

注意，你必须逃避'|' 特点。

# ios - AFNetworking：无法从 AFHTTPRequestOperation 获取响应字符串

> ID：13811809
> 
> 赞同：5
> 
> 时间：2012-12-11T00:43:06.997
> 
> 标签：ios, networking, afnetworking, nsurlrequest

有人吗？）：我有一个问题让我在过去的 2 个小时里摸不着头脑，这很可能是我错过的一个非常简单的愚蠢事情。当我从操作@AFNetworking 调用响应字符串时，我不断收到构建错误......就像没有这样的财产......

请看一下我的代码并解释一下我这次搞砸了什么：p .. 谢谢 :)

* * *

```
NSDictionary* paramDict = [NSDictionary dictionaryWithObjectsAndKeys:WebServicemd5Value, WebSermd5Variable, nil]
;
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:webServiceURL]];

[httpClient defaultValueForHeader:@"Accept"];

[httpClient postPath:@"method" parameters:paramDict success:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSLog(@"Response data: %@", responseObject);
    NSLog(@"Reponse String: %@", operation); 
```

// 打印操作会显示操作字典，包括响应字段，// 但是当我直接调用 operation.response 时，编译器不会构建，说明 // “AFHTTPRequestOperation 找不到属性”.... WEIRDEST永远的事，对吧？

```
 NSString* responseString = [NSString stringWithUTF8String:[responseObject bytes]];
    //.. Rest o f my Code....

}failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Error retrieving data: %@", error);
}]; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-13T08:16:09.507

Hernan，如果您期望`NSDictionary`来自 JSON 响应，您应该考虑使用`AFJSONRequestOperation`，因为您在成功回调中获得了 JSON 字典。无论如何，如果您想从 中获取字典，请`responseObject`尝试使用以下代码：

```
NSError *error = nil;
NSDictionary *JSON = [NSJSONSerialization JSONObjectWithData:responseObject options:NSJSONReadingAllowFragments error:&error];
if (error) {
    NSLog(@"Error serializing %@", error);
}
NSLog(@"Dictionary %@", JSON); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-03T07:35:49.940

我相信响应字符串在“操作”对象内，所以类似于：

```
...
}failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Error retrieving data: %@", operation.responseString);
}]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-19T19:23:31.960

在尝试使用 AFNetworking 从 meetup.com api 检索内容时（感谢 Mattt T. 的出色框架，顺便说一句），遇到了同样的错误 - “操作无法完成。（Cocoa 错误 3840）”。意识到我遇到的问题是包含瑞典字符“Ø”的响应数据，导致解析错误。解决方案是在 AFNetworking 客户端的初始化中包含标头“Accept-Charset: utf-8”。固定的！

```
- (id)initWithBaseURL:(NSURL *)url {
    self = [super initWithBaseURL:url];
    if (!self) {
        return nil;
    }

    [self registerHTTPOperationClass:[AFJSONRequestOperation class]];

    // Accept HTTP Header; see http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1
    [self setDefaultHeader:@"Accept" value:@"application/json"];
    [self setDefaultHeader:@"Accept-Charset" value:@"utf-8"];

    return self;
} 
```

# sql - 在 MS Access 中从子数据表中选择数据

> ID：13811811
> 
> 赞同：0
> 
> 时间：2012-12-11T00:43:09.393
> 
> 标签：sql, ms-access, ms-access-2007, ms-access-2010

在 Access 中，我有一个名为 School 的表，其中包含一个子数据表或内部表，例如 Teachers。

当单击教师上的 + 时，我有各种信息，例如教师 ID、DateEmployed、TeacherScope 等。

我想要做的是从这个子数据表中选择，比如说，TeacherID 和 TeacherScope。当然，如果我做这样的事情......

```
SELECT Teachers.TeacherID FROM Teachers GROUP BY Teachers.TeacherID; 
```

...它要求我输入“Teachers.TeacherID”的参数值。

我希望我说得通。这只是我正在尝试做的一个例子，而不是真正的桌子。我只想能够从子数据表中选择数据，但我完全不知道该怎么做。

# c# - Fluent Nhibernate：如何映射双向关系

> ID：13811812
> 
> 赞同：1
> 
> 时间：2012-12-11T00:43:14.633
> 
> 标签：c#, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping, bidirectional-relation

我正在尝试映射以下内容，但不确定当前的 nHibernate/fluent nHibernate 是否有可能，因此任何建议将不胜感激。

基本上我有以下两个课程

```
public class Venue
{
    public virtual int ID {get;set;}
    public virtual VenueDetail CurrentDetails {get; set;}
    public virtual IEnumerable<VenueDetail> PreviousDetails {get; set;}
}

public class VenueDetail
{
    public virtual int ID {get;set;}
    public virtual string Description {get;set;}
    public virtual Venue Venue {get;set;}
} 
```

有没有办法有效地映射上述关系？我的 Venue 表有一个指向 CurrentVenueDetails 属性的 VenueDetail 的外键，同时我的 VenueDetail 也有一个指向 Venue 属性的 Venue 表的外键。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T02:59:51.643

[这里几乎为您描述了所有内容。](https://github.com/jagregory/fluent-nhibernate/wiki/Fluent-mapping)

```
public class VenueDetailMap : ClassMap<VenueDetail>
{
    ....
    //Reference the One side of the OneToMany
    Reference(x => x.Venue);
    ....
}

public class VenueMap : ClassMap<Venue>
{
    ....
    //Declare this is the many side
    HasMany(x => x.PreviousDetails);
    // We are referencing another entity here
    References( x => x.CurrentDetails);
    ....
} 
```

# javascript - 用 JS 阻止浏览器插件？

> ID：13811813
> 
> 赞同：1
> 
> 时间：2012-12-11T00:43:16.053
> 
> 标签：javascript, browser, browser-addons

我注意到很多人（大多数使用 IE）拥有大量的广告软件浏览器插件，其中许多人将我网站上的文本替换为广告链接等。

这看起来像我在向最终用户宣传垃圾邮件，我想知道是否有什么可以做的来阻止这种情况？

也许一些特殊的 JS 代码可能会阻止所做的任何更改？我不知道？这是不可能的，还是有什么解决办法？

谢谢

麦克风

# model-view-controller - 我应该让我的 CouchDB 数据库服务器面向公众吗？

> ID：13811820
> 
> 赞同：7
> 
> 时间：2012-12-11T00:43:51.803
> 
> 标签：model-view-controller, architecture, couchdb, heuristics

我是新手`CouchDb`，正在尝试理解如何正确使用它。我来自`MongoDB`我总是写一个 web 层并将它放在 mongo 前面的地方，这样我就可以允许用户访问其中的数据，等等。事实上，这就是我为每个人使用所有数据库的方式我曾经写过的网站。所以，看看 Couch，我发现它的原生 API 是 HTTP，并且它内置了诸如 OAuth 支持之类的东西，以及其他向我暗示也许我不应该再让我的代码层坐在 Couch 前面的功能，而是写`Views`和事情，只是把账户给我的用户？我正在考虑像我的站点的基于 HTTP 的 API，或者用户可以通过它使用我的数据的东西。不过，像这样打开沙发对我来说似乎很奇怪。在 Couch 的意义上，OAuth 是更多地用于远程访问我“正式”在我自己的网络内部编写和运行的软件，还是字面意思是最终用户？

我知道有些事情可能只能通过 CouchDB 之上的代码层来完成，比如如果您希望在 API 请求期间也发生其他与数据库无关的事情。所以沿着这些思路思考，我认为我仍然需要一个代码层，无论如何。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T03:29:26.293

经销商的选择。

Nodejitsu 在[这里](http://blog.nodejitsu.com/scaling-isomorphic-javascript-code)有一篇关于这类主题的精彩文章。

不知道您的应用程序细节我会采取广泛的方法......

## 后端

如果您想阻止用户看到您的数据库，请将其设置为后端。您可以通过 node.js 之类的东西对所有内容进行管道传输，并且只呈现用户需要查看的内容，而他们永远不会知道有关数据库的任何信息。请参阅[资源视图演示者](http://blog.nodejitsu.com/scaling-isomorphic-javascript-code#rvp)

## 前端

如果您不关心数据安全，您可以在 CouchDB 上托管整个应用程序；见[CouchApp](http://couchapp.org/page/index)。这种方法的好处是使用复制机制来控制发布您的站点/数据。这里的缺点是您几乎肯定会遇到一些技术限制，需要将 CouchDB 移到更靠近后端的位置。

## 混合

让应用服务器呈现接口，客户端分别从数据库中提取数据。这提供了最大的灵活性，但可能会造成伤害，因为即使设计良好，这也可能导致可支持性和可扩展性问题。

## 我的推荐

在后端使用 CouchDB。如果您需要移动客户端进行同步，请为此目的使用公开公开的辅助数据库，并有选择地将这些数据同步到需要去的任何地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T06:33:04.407

简单地说，没有。

没有办法在面向公众的网站上正确保护 Couch。没有办法在足够精细的级别上区分访问。如果有人可以访问任何数据，他们就可以访问所有数据。

并非网站上的所有数据都是供公众使用的，除了最琐碎的网站。

# programming-languages - 如何构建堆栈跟踪以及如何跟踪堆栈？

> ID：13811821
> 
> 赞同：1
> 
> 时间：2012-12-11T00:43:54.290
> 
> 标签：programming-languages, stack-trace

*上下文：*我正在构建一种编程语言（称为 Lima），我想知道有哪些选项可以让系统跟踪堆栈，以便我可以生成正确的堆栈跟踪（使用原始的正确行号资源）。请注意，这并不意味着重复这个相关但有限的问题：[如何生成堆栈跟踪？](https://stackoverflow.com/questions/12865180/how-do-stack-traces-get-generated)

我的基本问题是：程序是否需要更新它在执行的每一行之间的行号？

在我看来，不幸的答案是肯定的。

我也想知道我是否可以利用我正在编译的环境中的任何东西来进行堆栈跟踪。现在，我正在将该语言编译为 javascript（并在 Rhino 中运行）——但我正在寻找一个一般性的答案，即底层环境在理论上是否可能以任何方式帮助您。

如果底层系统支持堆栈跟踪，您可以从该系统的行号到您的行号进行静态映射吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:48:49.443

我的理解是，堆栈在每个子例程调用时存储了返回地址。该地址在生成堆栈跟踪时用于符号查找。对于脚本语言，我猜您在进行子例程调用并将其放入堆栈时必须获取文件和行号/行位置。我猜脚本语言会构建一个哈希表来查找这些信息以保持实际堆栈更紧凑。

# android - 获取网站源代码时出错

> ID：13811823
> 
> 赞同：0
> 
> 时间：2012-12-11T00:44:00.430
> 
> 标签：android, url, httpwebrequest

我正在尝试创建一个简单的 Android 应用程序，它可以获取网站的源代码。无论如何，我写了以下内容：

```
WebView webView = (WebView) findViewById(R.id.webView);
try {
    webView.setWebViewClient(new WebViewClient());          
    InputStream input = (InputStream) new URL(url.toString()).getContent();
    webView.loadDataWithBaseURL("", "<html><body><p>"+input.toString()+"</p></body></html>", "text/html", Encoding.UTF_8.toString(),""); 
    setContentView(webView);
} catch (Exception e) {
    Alert alert = new Alert(getApplicationContext(),
                            "Error fetching data", e.getMessage());
} 
```

我曾多次尝试将第 3 行更改为将获取源代码的其他方法，但它们都将我重定向到警报（没有消息的错误，只有标题）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:04:20.550

有什么特殊原因不能让您只使用它来加载网页吗？

```
webView.loadUrl("www.example.com"); 
```

如果您真的想将源代码抓取到一个字符串中，以便您可以操作它并按照您尝试的方式显示它，请尝试打开内容的流，然后使用标准 java 方法将数据读入字符串，以然后你可以做任何你想做的事情：

```
InputStream is = new URL("www.example.com").openStream();

InputStreamReader is = new InputStreamReader(in);
StringBuilder sb = new StringBuilder();
BufferedReader br = new BufferedReader(is);
String read = br.readLine();

while(read != null) {
    sb.append(read);
    read = br.readLine();
}

String sourceCodeString = sb.toString();
webView.loadDataWithBaseURL("www.example.com/", "<html><body><p>"+sourceCodeString+"</p></body></html>", "text/html", Encoding.UTF_8.toString(),"about:blank"); 
```

# javascript - 从 Javascript 访问 NPAPI 插件的属性

> ID：13811825
> 
> 赞同：0
> 
> 时间：2012-12-11T00:44:11.570
> 
> 标签：javascript, npapi

尝试使用 NPAPI 插件通过 Javascript 获取属性值时出现问题；在调试过程中，我看到调用了所有函数链（HasProperty、HasMethod 和 GetProperty）。此外，我看到在调用 GetProperty 期间，我将新值设置为结果参数。但是在离开 GetProperty 之后，我得到了一个异常，无法理解它的原因。

FireFox 可以调用一些我忘记初始化的附加函数吗？

提前致谢

我的代码是：

```
// static function which calls Get_Property for the instance of CScriptableNPObject
bool CScriptableNPObject::NP_GetProperty(NPObject *npobj, NPIdentifier name, NPVariant *result)
{
    m_Logs.WriteLogs(10, _T("Enter the CScriptableNPObject::NP_GetProperty()"));

    return ((CScriptableNPObject *)npobj)->GetProperty(name, result);
}

// just converter name from NPIdentifier to char *
bool CScriptableNPObject::GetProperty(NPIdentifier name, NPVariant *result)
{
    NPUTF8 *pszProperty = m_pNPNFuncs->utf8fromidentifier(name);

    return GetProperty(pszProperty, result);
}

// checking the dictionary of properties, if property exists put its value into the result
bool CScriptableNPObject::GetProperty(NPUTF8 *pszProperty, NPVariant *result)
{
    VOID_TO_NPVARIANT(*result);

    JSPropertiesMap::iterator it = m_JSProperties.find(pszProperty);

    if (it == m_JSProperties.end())
        return false;

    NPUTF8 *pszNewPropertyValue = new NPUTF8[it->second->value.stringValue.UTF8Length + 1];
    sprintf(pszNewPropertyValue, it->second->value.stringValue.UTF8Characters);

    STRINGZ_TO_NPVARIANT(pszNewPropertyValue, *result);

    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:36:40.837

您需要使用[`NPN_MemAlloc()`](https://developer.mozilla.org/en-US/docs/NPN_MemAlloc)：

```
NPUTF8* newValue = NPN_MemAlloc(length + 1); 
```

# c++ - 字符串反向实现的问题

> ID：13811826
> 
> 赞同：0
> 
> 时间：2012-12-11T00:44:16.380
> 
> 标签：c++

> **可能重复：**
> [为什么这个 C 代码会导致分段错误？](https://stackoverflow.com/questions/1614723/why-is-this-c-code-causing-a-segmentation-fault)

我正在编写一个简单的字符串反向脚本。

我添加了打印语句进行调试。在 Error1 之前，我不断收到运行时异常。但我似乎无法弄清楚原因。

这是我的代码：

```
#include <iostream>
#include <cstdlib>

using namespace std;

int strlen(char* s){ 
  int i = 0;
  while(*s != '\0'){
    i++;
    s++;
  }
  return i;
}

void reverse(char* src){

  char* dest = src+strlen(src)-1;
  char temp;

  while(src < dest){
    temp = *src;
    cout << "Error0" << endl;
    *src = *dest;
    cout << "Error1" << endl;
    *dest = temp;
    cout << "Error2" << endl;
    src++;
    dest--;
  }

}

int main (void){

  char* s = "Hello world";
  cout << s << endl;
  int i = strlen(s);
  cout << i << endl;
  reverse(s);
  cout << s << endl;

  getchar();
  return 0;
} 
```

这是我的输出：

```
 Hello world
            11
            Error0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T00:47:55.220

这

```
char* s = "Hello world"; 
```

需要是

```
char s[] = "Hello world"; 
```

您的原始文件正在尝试更改不允许更改的常量内存，因此您需要分配空间并使用字符串对其进行初始化

# ios - 等待扫描 RFID 徽章的代码 - 它是什么样的？

> ID：13811827
> 
> 赞同：0
> 
> 时间：2012-12-11T00:44:18.050
> 
> 标签：ios, xcode, serial-port, rfid

我正在尝试编写一些集成 RFID 阅读器的代码，并且我已经取得了一些进展，但我仍在努力研究如何设置某种等待时间。

基本上，我有一个连接到越狱 iPhone 的 RFID 阅读器，并且我创建了一个存储 RFID 徽章编号的“NSMutableString”，但问题是当用户单击“添加RFID”按钮时串行端口被打开应用程序，我不知道如何设置循环或类似性质的东西来等待用户扫描他们的 RFID 徽章，这样他们就可以将徽章与用户帐户相关联，并将 RFID 徽章 # 放入“NSMutableString”。

如果您对我如何实现这一点有任何想法，我不介意看一些代码示例。

到目前为止，这就是我所拥有的，

```
 /* Begin addRFID - Serial Communication */

- (IBAction)addRFID:(id)sender {

   // btnAddRFID pressed

   NSLog(@"rfid badge # is %@",rfidbadgenumber);

  // launch an alert with text input
   UIAlertView *alertrfid = [[UIAlertView alloc] initWithTitle:@"Scan RFID badge"
                                                    message:@"Associate RFID badge with user account"
                                                   delegate:self
                                          cancelButtonTitle:@"Dismiss"
                                          otherButtonTitles:@"Save", nil];

// set alert with a text input field
[alertrfid setAlertViewStyle:UIAlertViewStylePlainTextInput];
// set text field input to max character length of 10
//[[alertrfid textFieldAtIndex:0].text substringWithRange:NSMakeRange(0,10)];

    [alertrfid show];

    // set the delegate for the UIAlertView textfield
    [alertrfid textFieldAtIndex:0].delegate = self;

     //open serial port
     [serial open:B2400];

     NSLog(@"rfid badge # is: %@",rfidbadgenumber);

    // assign alert input text to RFID badge #
    [alertrfid textFieldAtIndex:0].text = rfidbadgenumber;

  }

  # pragma mark - JailbrokenSerialDelegate
  - (void) JailbrokenSerialReceived:(char) ch {

    NSString *rfidbadgenumbernew = [[NSString alloc]init];

    NSLog(@"rfidbadgenumbernew is: %@",rfidbadgenumbernew);

    // put serial received data in a char buffer
    [rfidbadgenumber stringByReplacingOccurrencesOfString:rfidbadgenumber withString:rfidbadgenumbernew];

     NSLog(@"serialrecvd -  rfidbadgenumber is: %@",rfidbadgenumber);

    //[rfidbadgenumber appendFormat:@"%c", ch];

    //[rfidbadgenumber stringByReplacingOccurrencesOfString:rfidbadgenumber withString:rfidbadgenumbernew];
  }

  - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

NSLog(@"Range: %@", NSStringFromRange(range));
return (textField.text.length - range.length + string.length <= 10);
}

 // add method for cancel button
  - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

  if (buttonIndex == 0) {
    NSLog(@"The cancel button was clicked");

    rfidbadgenumber = NULL;

    //rfidbadgenumbernew = NULL;

    [serial close];
 } 

 // do stuff for additonal buttons
}

   // close serial port

  /* End addRFID - Serial Communication */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:34:42.737

昨天在朋友的帮助下，我想出了这段代码。以下代码将捕获的 RFID tagID 放入位于 UIAlertView 中的文本字段中。

```
/* Begin addRFID - Serial Communication */

- (IBAction)addRFID:(id)sender {

// btnAddRFID pressed

NSLog(@"rfid badge # is %@",newrfidtagid);

// set alert with a text input field
[alertrfid setAlertViewStyle:UIAlertViewStylePlainTextInput];
// set text field input to max character length of 10
//[[alertrfid textFieldAtIndex:0].text substringWithRange:NSMakeRange(0,10)];

[alertrfid show];

// set the delegate for the UIAlertView textfield
[alertrfid textFieldAtIndex:0].delegate = self;

//open serial port

[serial open:B2400];
if(serial.isOpened)
{
    NSLog(@"Open");
}
else NSLog(@"closed dingo");
}

 # pragma mark - JailbrokenSerialDelegate
 - (void) JailbrokenSerialReceived:(char) ch {

NSLog(@"got it");

NSString *s = [NSString stringWithFormat:@"%c",ch];
NSLog(@"s = %@",s);

[newrfidtagid appendString:s];

NSLog(@"rfid char  = %@",newrfidtagid);

if (newrfidtagid.length == 10)
{
    NSLog(@"new tagid = %@",newrfidtagid);
    [alertrfid textFieldAtIndex:0].text = newrfidtagid;
    //[serial open:B2400];
  }
  }

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

NSLog(@"Range: %@", NSStringFromRange(range));
return (textField.text.length - range.length + string.length <= 10);
}

// add method for cancel button
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

if (buttonIndex == 0) {
    NSLog(@"The cancel button was clicked");

    [serial close];

    [alertrfid dismissWithClickedButtonIndex:0 animated:YES];
    [newrfidtagid setString:@""];
    [alertrfid textFieldAtIndex:0].text = @"";

    //alertrfid.hidden = TRUE;

}

// do stuff for additonal buttons
}

// close serial port 
```

# python - 如何在 python 3 中的 2 个字符串之间留出空格？

> ID：13811828
> 
> 赞同：0
> 
> 时间：2012-12-11T00:44:18.537
> 
> 标签：python, python-3.x

嗨，我想问一下我是否可以在 python 3 中放置一个行空间。我使用以下代码：

```
#def space():
#print() 
```

但是当我想打印它时，会为我打印一个“无”，但我只想要一行什么都没有，即我想输入：

```
"hi how are you :

iam fine" 
```

我想在两者之间留出空间，`"hi how are you "`然后`"iam fine"` 将其提供给 python3：

```
print('hi how are you",space(),"iam fine") 
```

但它只会给我：

```
 hi how are you None iam fine .. 
```

这里有什么问题？这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:46:40.727

`print()`立即发生。如果你想要一个**换行符**，那么你需要返回`'\n'`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:46:24.440

这就是你想要的：

```
def space():
    return '\n' 
```

`None`听起来是这样，它正在打印 None 因为您没有提供`print()`任何输入

# c# - VS2012 中 ASP.NET 项目中符号加载缓慢

> ID：13811832
> 
> 赞同：15
> 
> 时间：2012-12-11T00:44:45.257
> 
> 标签：c#, asp.net, asp.net-mvc, visual-studio-2012, debug-symbols

我在 ASP.NET MVC 项目上加载符号时遇到问题。我第一次加载 Visual Studio 并调试我的项目时，符号会在大约 2 秒内加载。然后我结束调试会话，进行代码修改，再次调试，符号加载时间大约是一分钟。根据我所做的研究，以下是我的机器/VS 上的一些适用设置：

在 Options/Debugging/Symbols/Symbol 文件位置中，“Microsoft Symbol Servers”未选中，并且没有其他位置。

此目录中的 Options/Debugging/Symbols/Cache 符号为“G:\Symbol Cache”。我确实单击了“加载所有符号”，并且检查了该目录，并且看到了很多符号。

只是我的代码已启用。

我的机器上没有定义 _NT_SYMBOL_PATH 和 _NT_ALT_SYMBOL_PATH 环境变量。

选项/调试/符号/自动加载符号设置为“仅指定模块”，没有指定模块。

我已经尝试了调试和发布版本，结果相同。Ctrl + F5 几乎立即加载站点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T21:07:53.693

我也有这个问题，原因是我不小心启用了“Microsoft Symbol Server”

您可以通过转到“工具”>“选项”>“调试”>“符号”来禁用它，然后取消选中“Microsoft 符号服务器”

现在它的加载速度和以前一样快。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-03T20:31:20.447

我也有这个问题，并注意到它主要与通过 NuGet 获得的 3rd-party 程序集有关。在这些情况下，Visual Studio 试图从原作者机器上明显存在的路径（即 D:\OriginalAuthor\MyVisualStudioProjects\AwesomeNuGetPackage）加载 PDB，但在我的机器上，相同的路径指向光驱。然后我通过命令提示符发现，如果您尝试将目录更改为托盘中没有光盘的光驱，则需要很长时间（约 30 秒）才能失败。考虑到这一点，我的解决方案是简单地将 DVD 放入托盘中。那时，Visual Studio 能够非常快速地确定路径不存在，跳过加载 PDB，直接进入调试。

因此，如果 Visual Studio 需要很长时间来加载符号，请查看输出窗口以了解它尝试访问的路径，并验证您是否可以通过命令提示符快速访问（或快速无法访问）这些路径。

这提出了一个关于安全/隐私的有趣问题——显然 Visual Studio 将原始 PBD 的绝对路径存储在程序集中。我想这不是一个超级关键的问题，但从隐私的角度来看，我真的不希望我的绝对文件系统路径在我不知情的情况下暴露给公众。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-20T11:15:15.643

试试这个 Debug -> Delete All Breakpoints。它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-17T17:48:47.780

我有 2 个 .dll 让我感到悲痛，因为我不需要调试它开始需要几分钟才能加载。上述解决方案没有帮助。所以我去了选项 - >调试 - >符号并在“所有模块，除非排除”的单选按钮下单击“指定排除模块”链接。然后键入导致问题的 .dll。

# java - JPA OneToMany 和 ManyToOne 抛出：实体列映射中的重复列（应使用 insert="false" update="false" 进行映射）

> ID：13811844
> 
> 赞同：53
> 
> 时间：2012-12-11T00:45:59.487
> 
> 标签：java, hibernate, jpa, one-to-many, many-to-one

我有三个类，其中一个是用户，这个用户有其他类实例。像这样;

```
public class User{
    @OneToMany(fetch=FetchType.LAZY, cascade = CascadeType.ALL)
    public List<APost> aPosts;

    @OneToMany(fetch=FetchType.LAZY, cascade = CascadeType.ALL)
    public List<BPost> bPosts;
}

   public class BPost extends Post {

    @ManyToOne(fetch=FetchType.LAZY)    
    public User user;
 }

    public class APost extends Post {

     @ManyToOne(fetch=FetchType.LAZY) 
     public User user;
 } 
```

它像这样工作，但在数据库中生成空表。其中必须包含外键。当我尝试使用`mappedBy`和`JoinColumn`注释时，我失败了。我该如何解决这个问题？

**额外的信息：**

当我改变时；

```
 @ManyToOne(fetch=FetchType.LAZY)
 @JoinColumn(name="id")
 public User user; 
```

和

```
 @OneToMany(fetch=FetchType.LAZY, cascade = CascadeType.ALL, mappedBy="id")
 public List<APost> aPosts; 
```

我越来越

发生 JPA 错误（无法构建 EntityManagerFactory）：实体映射中的重复列：models.post.APost 列：id（应使用 insert="false" update="false" 进行映射）

**最终编辑：**最后，我对 JPA 注释完全错了。:( 当我改变

```
@OneToMany(fetch=FetchType.LAZY, cascade = CascadeType.ALL, mappedBy="id") 
```

到

```
@OneToMany(fetch=FetchType.LAZY, cascade = CascadeType.ALL, mappedBy="user") 
```

和

```
@ManyToOne(fetch=FetchType.LAZY)
@JoinColumn(name="user_id") 
```

一切正常。:)

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-12-11T01:08:12.820

我不太确定您的问题（“空表”等的含义，或者如何`mappedBy`以及`JoinColumn`没有工作）。

我认为您正在尝试建立双向关系。

首先，您需要决定哪一方“拥有”这种关系。Hibernate 将在该侧建立关系基础。例如，假设我让`Post`一方拥有关系（我正在简化您的示例，只是为了保持重点），映射将如下所示：

（希望语法正确。我只是凭记忆写它们。但是这个想法应该没问题）

```
public class User{
    @OneToMany(fetch=FetchType.LAZY, cascade = CascadeType.ALL, mappedBy="user")
    private List<Post> posts;
}

public class Post {
    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="user_id")
    private User user;
} 
```

通过这样做，表`Post`将有一个`user_id`存储关系的列。Hibernate 通过`user`in获取关系`Post`（而不是`posts`in `User`。如果您有`Post`'s`user`但缺少`User`'s ，您会注意到差异`posts`）。

你已经提到`mappedBy`并且`JoinColumn`没有工作。但是，我相信这实际上是正确的方法。请告诉我们这种方法是否不适合您，并就该问题向我们提供更多信息。我相信问题是由其他原因引起的。

* * *

编辑：

只是一些关于使用的额外信息，`mappedBy`因为它一开始通常会令人困惑。在`mappedBy`中，我们把“属性名”放在双向关系的对面，而不是表列名。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2017-08-10T12:08:39.833

您永远不应该使用单向`@OneToMany`注释，因为：

1.  它生成低效的 SQL 语句
2.  它创建了一个额外的表，增加了数据库索引的内存占用

现在，在您的第一个示例中，双方都拥有该关联，这很糟糕。

虽然`@JoinColumn`会让`@OneToMany`协会负责，但绝对不是最好的选择。因此，始终使用侧面的`mappedBy`属性。`@OneToMany`

```
public class User{
    @OneToMany(fetch=FetchType.LAZY, cascade = CascadeType.ALL, mappedBy="user")
    public List<APost> aPosts;

    @OneToMany(fetch=FetchType.LAZY, cascade = CascadeType.ALL, mappedBy="user")
    public List<BPost> bPosts;
}

public class BPost extends Post {

    @ManyToOne(fetch=FetchType.LAZY)    
    public User user;
}

public class APost extends Post {

     @ManyToOne(fetch=FetchType.LAZY) 
     public User user;
} 
```

# javascript - : 包含错误选择子元素

> ID：13811845
> 
> 赞同：1
> 
> 时间：2012-12-11T00:46:09.630
> 
> 标签：javascript, jquery, html, jquery-selectors

目前我正在尝试使用 jQuery`:contains`选择器选择一个链接元素。当链接的内容只是文本时，此方法有效。但似乎当元素包含其他 HTML 元素时 :contains 选择器会选择一个子元素。例子

HTML：

```
<a href="#"><b> two</b> this not bold <b>This</b> is a bold Link</a> 
```

从那个 html 中，我尝试使用这个选择器 jQuery 选择链接：

```
var selector = "a:contains('<b> two</b> this not bold <b>This</b> is a bold Link')";

var returnObj = $(selector); 
```

jQuery 没有返回一个对象（链接），而是返回三个对象：

1.  第一个粗体元素
2.  文本`this is not bold`
3.  第二个粗体元素

问题不在于 中的单引号`contains()`，因为我尝试过使用和不使用它们。

这只是我正在尝试做的一个简化示例。实际上，我正在根据用户单击的链接对象动态创建选择器。然后我将该选择器存储在数据库中以供以后使用（以便我的应用程序显示与该链接相关的内容）。因为我可以获取链接的内容，所以我想`a:contents()`如果链接没有`id`.

根据这些页面，我的语法似乎正确：
[http ://docs.jquery.com/Tutorials:How_to_Get_Anything_You_Want_2](http://docs.jquery.com/Tutorials:How_to_Get_Anything_You_Want_2)
[http://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)

关于如何返回链接对象的想法？谢谢！

希望这不是一个太愚蠢的问题，我是 JS 和 jQuery 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:53:19.010

首先，您的选择器文本与 html 中的实际文本不匹配。
选择器包括`this not bold`html 中不存在的。

最重要的是`:contains`仅适用于文本..所以你应该检查

```
$("a:contains('two this not bold This is a bold Link')"); 
```

不过，这是一种非常低效的方法，您最好为要定位的元素添加一个类，并将其用于定位..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:58:37.827

如前所述，`:contains()`仅用于选择文本内容，而不是内部 HTML。

如果您必须`a`根据该文本匹配元素，请去掉`<b>`标签：

```
var selector = "a:contains(' two this not bold This is a bold Link')"; 
```

否则，看看您是否可以通过使用上下文选择器来简化此选择（例如，基于其周围元素、父母、兄弟姐妹等进行选择），或者为其分配一个类并由该类选择。

附带说明一下，我认为这是另一个 jQuery 错误（可能是[Sizzle](http://sizzlejs.com)中的解析错误）。在您的情况下，`:contains()`不应该返回或创建任何元素；它应该不返回任何匹配项，因为选择器与您的`a`元素不匹配。我怀疑它正在做的是将`<b></b>`标签视为新元素，并与您的`a`元素一起动态创建它们，这是错误的，因为标签位于参数字符串内并且意味着按字面意思理解......

# java - Dijkstra算法中的无限循环？

> ID：13811846
> 
> 赞同：3
> 
> 时间：2012-12-11T00:46:10.867
> 
> 标签：java, infinite-loop, dijkstra

我正在尝试实现 Dijkstra 算法来找到图中两个交点（顶点）之间的最短路径。不幸的是，我在 while 循环中遇到了一个无限循环，我真的不知道为什么。

NodeDist 是交集和双精度之间的哈希图，用于查找图中节点之间的距离。距离由图中“街道”（边）的长度决定。Previous是一个hashmap，它跟踪交叉点到交叉点，即在我们现在查看的交叉点之前查看过的交叉点。

```
public List<IntersectionI> dijkstraPath(IntersectionI start, IntersectionI end){
    ArrayList<IntersectionI> path = new ArrayList<IntersectionI>();
    Iterator<IntersectionI> it = graph.myGraph.keySet().iterator();
    //Initializing all unvisited node distances as infinity.
    while (it.hasNext()){
        IntersectionI next = it.next();
        nodeDist.put(next, INFINITY);
    }
    //Remove the start node, put in 0 distance. 
    nodeDist.remove(start);
    nodeDist.put(start, (double) 0);
    queue.add(start);
    //computes paths
    while (!queue.isEmpty()){
        IntersectionI head = queue.poll();
        if (nodeDist.get(head) == INFINITY)
            break;
        visited.put(head, true);
        List<StreetI> str = head.getStreetList();
        for (StreetI e : str){
            Point pt1 = e.getFirstPoint();
            Point pt2 = e.getSecondPoint();
            IntersectionI p1 = graph.pointGraph.get(pt1);
            IntersectionI p2 = graph.pointGraph.get(pt2);
            if (head.getLocation().equals(p1)){
                double dist = e.getDistance();
                double addedDist = nodeDist.get(start)+dist;
                double p2Dist = nodeDist.get(p2);
                if (addedDist < p2Dist){
                    previous.put(p2, head);
                    Point p22 = p2.getLocation();
                    p22.setCost(addedDist);
                    nodeDist.put(p2, addedDist);
                    queue.add(p2);
                }

            }
            else {
                double dist = e.getDistance();
                double addedDist = nodeDist.get(start)+dist;
                if (addedDist < nodeDist.get(p1)){
                    previous.put(p1, head);
                    Point p11 = p1.getLocation();
                    p11.setCost(addedDist);
                    nodeDist.put(p1, addedDist);
                    queue.add(p1);
                }
            }
        }
    }
    //gets shortest path
    for (IntersectionI vertex = end; vertex != null; vertex = previous.get(vertex))
        path.add(vertex);
    System.out.println("ya");
    Collections.reverse(path);
    return path;
}

//The comparator that sorts by intersection distance.
public class distCompare implements Comparator<IntersectionI> {
    @Override
    public int compare(IntersectionI x, IntersectionI y) {
        Point xPo = x.getLocation();
        Point yPo = y.getLocation();
        if (xPo.getCost() < yPo.getCost())
            return 1;
        else if (yPo.getCost() < xPo.getCost())
            return -1;
        else return 0;

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:12:35.093

所以，这最终解决了评论中的问题：

```
double addedDist = nodeDist.get(start)+dist; 
```

应该

```
double addedDist = nodeDist.get(head)+dist; 
```

两次。

添加的距离应该来自当前顶点，而不是起始顶点（到该顶点的距离为 0）。

# python - python3函数正确性

> ID：13811847
> 
> 赞同：1
> 
> 时间：2012-12-11T00:46:16.030
> 
> 标签：python, function, python-3.x

我在下面有一个功能：

```
def f(s1,s2):
         s=''
         for i in range(min(len(s1),len(s2))):
            s = s1[i] + s2[i]
         if len(s1) < len(s2): return s + s2[len(s1):]   
         else: return s + s1[len(s2):]
print(f('1234','abc')) 
```

这个函数应该将两个字符串一起打印为 1a2b3c4，但是当我运行它时我只得到后半部分 3c4。关于为什么会发生这种情况的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T00:48:32.127

因为你做的很艰难。

```
s = ''.join((x + y) for (x, y) in zip(s1, s2)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T00:52:31.430

你的意思是`s +=`在`for`循环内部，对吧？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T00:53:24.687

看起来您正在重新分配变量“s”，而您应该进行连接。

替换：s = s1[i] + s2[i]

与：s = s + s1[i] + s2[i]

# assembly - Irvine Assembly：合并两个不同大小的数组

> ID：13811849
> 
> 赞同：0
> 
> 时间：2012-12-11T00:46:26.297
> 
> 标签：assembly, merge, x86, masm, irvine32

我试图将这两个排序的数组合并在一起。我知道问题是当程序在达到其大小限制后尝试比较第一个数组时，但我不知道如何克服这个问题。任何帮助将非常感激。

```
include irvine32.inc
Title ArrayMerge

.data
a1  dw 1,3,4,7,9,15,17
a2  dw 2,6,8,10,11,14,18,19
a3  dw 15 dup(0)

.code
main proc
    sub     EAX,EAX
    mov     ESI,OFFSET a1
    mov     EDI,OFFSET a2
    mov     EDX,OFFSET a3

    call    Merge
    call    Display
    exit
main endp

;=====================================================================
Merge proc
    mov     ECX,lengthof a3 ;Set loop times
TheLoop:
TheJump:
    mov     ax,[ESI]
    cmp     ax,[EDI]
    jl      AddA1  ;Jump if less
    jg      AddA2  ;Jump if greater
    Loop    TheLoop
    jmp     EndJump
AddA1:
    mov     ax,[ESI]
    mov     [EDX],ax
    add     ESI,2
    add     EDX,2
    jmp     TheJump

AddA2:
    mov     ax,[EDI]
    mov     [EDX],ax
    add     EDI,2
    add     EDX,2
    jmp     TheJump

EndJump:
    ret
Merge endp
;==================================================================
Display proc
    mov     ECX,lengthof a3 ;Set loop times
    mov     EDX,offset a3

DisplayLoop:
    mov     ax,[EDX]
    add     EDX,2
    call    writedec
    call    crlf
    loop    DisplayLoop
    ret
Display endp
;===================================================================
end main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:54:05.147

您应该为每个数组处理的元素数量维护单独的计数器。一旦到达其中任何一个的末尾，只需从另一个复制剩余的元素。另请注意，如果元素相等，则不要复制，但应该复制。

```
i = j = k = 0;
while(i < length1 && j < length2)
{
    switch(compare(src1[i], src2[j]))
    {
        case -1: // src1 is less, copy it
            dst[k++] = src1[i++];
            break;
        case 0:  // equal, copy src2 but also increment i
            i++;
            // fall-through
        case 1:  // src2 is less, copy it
            dst[k++] = src2[j++];
    }
}
// at this point we have reached the end of one of the arrays
// just copy remaining elements
// note only one of these loops will do anything
while(i < length1)
{
    dst[k++] = src1[i++];
}
while(j < length2)
{
    dst[k++] = src2[j++];
} 
```

# javascript - 我可以使用 WebRTC 打开 UDP 连接吗？

> ID：13811854
> 
> 赞同：13
> 
> 时间：2012-12-11T00:46:50.630
> 
> 标签：javascript, udp, webrtc

我们需要使用 TFTP 协议将数据发送到用户的设备，这是一个简单的类似 FTP 的协议，通过 UDP 工作。

由于我们无法使用 javascript 打开 UDP 套接字，我们一直使用我们的服务器作为代理，将数据发送到我们的服务器并打开从服务器到设备的 UDP 连接。这确实有一个缺点，我们的用户需要了解 NAT 并配置端口转发。

那么问题来了，我们是否可以使用 WebRTC 打开一个直接的 UDP 套接字在浏览器和设备之间进行发送和接收？

[http://www.webrtc.org/reference/webrtc-internals/vienetwork#TOC-SendUDPPacket](http://www.webrtc.org/reference/webrtc-internals/vienetwork#TOC-SendUDPPacket)建议我们可以通过套接字发送一些原始 UDP 数据（也就是说，如果可以通过 javascript 访问该层。我是不确定），但我看不到获取原始 UDP 响应的方法。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-13T20:05:19.150

不。有太多的安全问题允许 WebRTC 发送到随机地址/端口 - 我们必须确保它不能作为 DDOS 平台工作，因此我们要求目标实现 ICE 作为发送数据的隐式权限，我们也不允许发送任意数据，只允许发送 SRTP 媒体流和 DataChannels 中的数据（通过 SCTP 通过 DTLS 通过 UDP+ICE）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T11:47:36.773

不，您不能像这样使用 WebRTC 发送原始 UDP 数据。

您可以在其中找到 SendUDPPacket 方法的 ViENetwork 库在 Chrome 中用于处理数据包传输、Windows QoS 支持和其他网络设置，但您无法直接访问它。

WebRTC 的主要功能之一是[数据通道](http://dev.w3.org/2011/webrtc/editor/webrtc.html#peer-to-peer-data-api)，它将带来在两个浏览器之间建立对等连接的可能性，以允许交换原始数据。[正如您在此处](http://www.webrtc.org/faq-recent-topics)看到的，这仍在 Chrome 和 Firefox 中进行构建。

这可能是您正在搜索的内容，因为您可以建立连接以发送原始数据，并且您只需要担心找到一种方法来建立与其他端点的连接，如果这是您想要的。

# php - 应用图片上传功能停止工作

> ID：13811855
> 
> 赞同：0
> 
> 时间：2012-12-11T00:46:51.500
> 
> 标签：php, android, image, upload

在过去的几个星期里，我一直在使用一个 Android 应用程序来获取一张要发布到 PHP 服务器的图像。我成功地让它工作了，我能够在图像上点击“共享”，它会将它上传到服务器。

我已经向几个人展示了大约 3 天，但今天它突然停止了工作。现在，当我点击“分享”时，它只显示“错误 website.com”，并且文件没有上传。

我没有更改任何代码（我没有从 Eclipse 重新上传任何新代码，也没有在服务器上编辑 PHP 文件），而且似乎这个错误突然出现。由于它只是说“ERROR website.com”，它的描述性不是很好，但我可以假设该网站是问题所在。所以我检查了 .php 文件，它仍然按预期工作，网站没有崩溃。

有没有人经历过类似的事情，或者有人知道我在哪里可以找到答案吗？

安卓代码：

```
public class UploadImage extends Activity {
InputStream inputStream;

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.activity_starting_point);

    Intent intent = getIntent();
    Bundle extras = intent.getExtras();
    String action = intent.getAction();

    // if this is from the share menu
    if (Intent.ACTION_SEND.equals(action)) {

        if (extras.containsKey(Intent.EXTRA_STREAM)) {
            try {

                // Get resource path from intent callee
                Uri uri = (Uri) extras.getParcelable(Intent.EXTRA_STREAM);

                // Query gallery for camera picture via
                // Android ContentResolver interface
                ContentResolver cr = getContentResolver();
                InputStream is = cr.openInputStream(uri);
                // Get binary bytes for encode
                byte[] data = getBytesFromFile(is);         

                // base 64 encode for text transmission (HTTP)
                int flags = 1;
                byte[] encoded_data = Base64.encode(data, flags);
                String image_str = new String(encoded_data); // convert to
                                                                // string

                ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

                nameValuePairs.add(new BasicNameValuePair("image",
                        image_str));

                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(
                        "http://xxxx.php");
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                String the_string_response = convertResponseToString(response);
                Toast.makeText(UploadImage.this,
                        "Response " + the_string_response,
                        Toast.LENGTH_LONG).show();
            } catch (Exception e) {
                Toast.makeText(UploadImage.this, "ERROR " + e.getMessage(),
                        Toast.LENGTH_LONG).show();
                System.out.println("Error in http connection "
                        + e.toString());
            }
        }
    }
} 
```

PHP代码：

```
<?php
   if($base=$_REQUEST['image']){
   $binary=base64_decode($base);
   header('Content-Type: bitmap; charset=utf-8');

   $destination =  time() + rand(1, 1000) . ".jpg";
   $url_destination = "project_images/" . $destination;

   $file = fopen($url_destination, 'wb');
   fwrite($file, $binary);
   fclose($file);
   echo 'Image upload complete.';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:51:38.230

我会检查您服务器上上传位置的权限，或者检查以确保临时文件夹（例如/tmp）有足够的空间来接收上传。我曾经遇到过这个问题（不同的错误消息，但相同的场景）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:38:18.170

我重新启动了设备，一切正常。不知道确切原因，但这是适合您的技术。

# javascript - Javascript 可用高度大于浏览器窗口

> ID：13811859
> 
> 赞同：0
> 
> 时间：2012-12-11T00:47:31.177
> 
> 标签：javascript, window, height

当我将元素的高度设置为

```
screen.availHeight; 
```

Chrom 的底部截断了大约 85px 的内容，而 IE 和 ff 的底部截断了大约 40px。截断内容位于 windows 任务栏下。

我怎样才能解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T00:52:10.000

不是很明显，您得到的是屏幕高度，而不是窗口高度，因此不会减去任何浏览器镶边（availHeight 实际上从我的屏幕高度 1200 像素中减去 40 像素，可能用于任务栏）。

```
window.height; 
```

# android - Android - 使用 smoothScrollBy 从当前位置向下滚动列表视图

> ID：13811861
> 
> 赞同：0
> 
> 时间：2012-12-11T00:47:38.617
> 
> 标签：android, listview

我正在创建一个主要与列表视图一起使用的应用程序。用户可以将项目添加到列表视图，我想从当前位置滚动到列表底部。

我最初使用的是能够从当前位置向下滚动的 scrollBy(int x, int y)。然而，这是一个瞬间的动作。我希望它是一个平滑的滚动。

所以这正是我所做的。我使用了 smoothScrollBy(int distance, int duration) 但这似乎总是从顶部滚动，即使我在列表中设置了当前位置就在它之前。

我的问题是，我应该使用一些计时器来减慢方法 scrollBy 的速度，还是应该有一种方法来做 smoothScrollBy，从我们在列表中的当前位置开始？

我应该注意，当我指的是当前位置时，我存储了确切的像素位置，而不仅仅是 setSelection(int position)。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:09:36.320

好的，我解决了问题。问题是在我的代码中的其他地方引起的。

它总是从最顶部滚动的原因是因为我在调用 smoothScrollBy() 后立即更新了当前列表位置。因此，它在滚动操作完成之前正在更新。我移动了我的方法调用，稍后在我的代码中更新列表位置，现在它工作正常。

# java - 如何显示 imageview 滑出动画及其下方的另一个 imageview？

> ID：13811862
> 
> 赞同：3
> 
> 时间：2012-12-11T00:47:45.997
> 
> 标签：java, android, animation, view, imageview

我试图找出在另一个之上显示图像视图的最佳方法，并且随着手指的滑动，顶部图像视图将滑出屏幕。想象一副纸牌：当您用手指将最上面的纸牌滑出纸牌时，下方的纸牌变得越来越明显。

在使用 ImageSwitcher 之前，我已经创建了一个滑入和滑出动画。但是工作的方式是一个图像滑出到屏幕的右侧，另一个从左侧滑入右侧（这不是我想要的这种情况）。所以，我想有两个图像视图（一个在另一个顶部），当顶部从屏幕上移开时，底部的图像变得更加明显，看起来好像在顶部图像视图的下方。但问题是我有很多图像要这样做，如果我这样做，一旦它离开屏幕，我需要将顶部图像视图放在底部图像下方。

**所以，为了澄清我的问题，**什么是显示两个图像视图的最佳方法，一个在另一个（Z轴）的顶部，当用户在屏幕上滑动手指时，顶部的图像视图将滑落使底部图像视图可见的屏幕？

任何建议、想法或帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:42:18.877

经过一番试验，我终于想出了我的解决方案。不过，我仍然需要调整动画以获得完整的预期效果。我首先考虑使用 a `LayerDrawable`，因为这会根据 z 轴将图像相互对齐。但是，我无法想出一种方法来一次只为一个图层设置动画。所以，为了解决我的问题，我使用了`FrameLayout.`

FrameLayouts 非常适合在 z 轴上进行排序（它们按照您在 XML 中放置的顺序相互叠加）。但是，当尝试将视图放置在屏幕的特定区域时，它们会变得复杂。首先，我制作了我的布局 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
    <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    <ImageView 
        android:id="@+id/image_below"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" /> 
    <ImageView
        android:id="@+id/image_above"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
    </FrameLayout> 
```

然后，当然，在`Activity`我设置内容视图并声明和实例化 imageview 对象：

```
setContentView(R.layout.game_layout);
ImageView imageOne = (ImageView)findViewById(R.id.image_above);
ImageView imageTwo = (ImageView)findViewById(R.id.image_below); 
```

然后，我创建了动画：

```
Animation slideOutRight = AnimationUtils.loadAnimation(this, android.R.anim.slide_out_right); 
```

现在动画已创建，我为其设置了一个`AnimationListener`。这样我就可以知道动画何时完成：

```
slideOutRight.setAnimationListener(new AnimationListener(){
    @Override
        public void onAnimationEnd(Animation arg0) {
            imageTwo.bringToFront();

        }

        @Override
        public void onAnimationRepeat(Animation arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationStart(Animation arg0) {
            // TODO Auto-generated method stub

        }

}); 
```

如果您在上面的代码中注意到我放置的 onAnimationEnd 方法中的方法，`imageTwo.bringToFront();`那么当顶部的 imageview 滑出屏幕时，它将不再可见（如果我不使用该方法，顶部的 imageview 将重新出现在其原来的位置，在另一个图像视图上，一旦它的动画完成）。

最后，剩下要做的就是设置 imageviews 的图像并在需要时启动动画：

```
imageOne.setImageDrawable(getResources().getDrawable(R.drawable.YOUR_DRAWABLE_ONE);
imageTwo.setImageDrawable(getResources().getDrawable(R.drawable.YOUR_DRAWABLE_TWO);
imageOne.startAnimation(slideOutRight); 
```

我希望这对可能面临同样问题的其他人有用。

# python - 提示用户输入。点击进入退出

> ID：13811863
> 
> 赞同：0
> 
> 时间：2012-12-11T00:47:48.933
> 
> 标签：python, loops, dictionary

假设我创建了一个名为 color_cat 的字典，其中包含键和值

我想知道如何提示用户输入键并显示输入键的相应值，但是如果按下返回键，则程序结束。

我尝试使用一个变量作为输入和一个 if 循环。说`c`是我的变量，如果我按 Enter 键，那么该变量就是返回键（我可以这样做吗？）但如果还有其他内容，那么我将该输入作为键并打印字典的值。

非常感谢任何提示！

我的代码看起来像：

```
i = input("input color of cat")  
if i == "" :  
        import sys  
        sys.exit()  
else: 
        print "the cat number is", color_cat['i'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:52:36.037

尝试这个：

```
 a = input("Enter number"); 
```

如果您在不输入任何内容的情况下按回车：

```
 a = '' 
```

因此，您可以使用 if 条件检查您的变量是否等于上述返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:49:19.613

按回车不返回任何内容，因此请检查输入是否为

```
"" 
```

如果是，退出。

# php - 在oop php中使用ajax和json显示数据

> ID：13811866
> 
> 赞同：0
> 
> 时间：2012-12-11T00:48:03.653
> 
> 标签：php, ajax, json

我有这样的编码，编码是一个包含函数的类

```
<html lang="en">
<head>
    <title>Ketidakpastian: Teorema Bayes</title>
    <link href="../bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="../bootstrap/css/jquery.ui.all.css" rel="stylesheet">
    <style type="text/css">
        body { 
            padding: 10 200 10 200;
        }
    </style>
    <script type="text/javascript" src="../bootstrap/js/jquery-1.8.2.js"></script>
    <script type="text/javascript" src="../bootstrap/js/bootstrap.js"></script>
    <script type="text/javascript" src="../bootstrap/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function() {
            $(".tooltipnya").tooltip({
                trigger: 'hover',
                placement: 'right'
            });
        });

        $(function(){
            $("#form-hitung").submit(function(){
                $.ajax({
                    url:"teorema-bayes.php",
                    dataType: "json",
                    success: function(data){
                        cacar = "<ol>";
                        $.each(data, function(i,n){
                            cacar = cacar + "<li>"+n["pesan"]+" : "+n["hasil"]+"</li>";
                        });
                        cacar = cacar + "</ol>";
                        $(".result-cacar").append(cacar);
                    }
                });
                return false;
            });
        });
    </script>
</head>
<body>
    <?php

    class TeoremaBayes {

        private $cacar;
        private $bintik2Cacar;
        private $bintik2TidakCacar;

        public function __construct($cacar, $bintik2Cacar, $bintik2TidakCacar) {
            $this->cacar = $cacar;
            $this->bintik2Cacar = $bintik2Cacar;
            $this->bintik2TidakCacar = $bintik2TidakCacar;
        }

        public function setCacar($probCacar) {
            $this->cacar = $probCacar;
        }

        public function getCacar() {
            return $this->cacar;
        }

        public function setBintik2Cacar($probBintik2Cacar) {
            $this->bintik2Cacar = $probBintik2Cacar;
        }

        public function getBintik2Cacar() {
            return $this->bintik2Cacar;
        }

        public function setBintik2TidakCacar($probBintik2TidakCacar) {
            $this->bintik2TidakCacar = $probBintik2TidakCacar;
        }

        public function getBintik2TidakCacar() {
            return $this->bintik2TidakCacar;
        }

        //menghitung probabilitas tidak terkena cacar
        public function notCacar() {
            return $notCacar = 1 - $this->getCacar();
        }

        //menghitung prob. bintik2cacar kali prob. cacar
        public function hitungBintik2Cacar() {
            return $this->getBintik2Cacar() * $this->getCacar();
        }

        //menghitung prob. bintik2 tidak cacar kali prob. tidak cacar
        public function hitungBintik2TidakCacar() {
            return $this->getBintik2TidakCacar() * $this->notCacar();
        }

        //menghitung prob. terkena cacar
        public function terkenaCacar() {
            return round($this->hitungBintik2Cacar() / ($this->hitungBintik2Cacar() + $this->hitungBintik2TidakCacar()), 2);
        }

        //menghitung prob. tidak terkena cacar
        public function tidakTerkenaCacar() {
            return round($this->hitungBintik2TidakCacar() / ($this->hitungBintik2TidakCacar() + $this->hitungBintik2Cacar()), 2);
        }

        public function inputUser() {
            ?>
            <h3>Ketidakpastian: Teorema Bayes</h3>
            <p style="font-size: 16px">Menghitung Probabilitas seseorang terkena penyakit cacar atau tidak</p>
            <form action="" method="post" id="form-hitung">

                <table class="table" style="font-size: 16px;">
                    <tr>
                        <td>Probabilitas cacar</td>
                        <td><input type="text" name="probCacar" class="tooltipnya" style="height: 30px; width: 50px; text-align: right;" rel="tooltip" title="Masukkan peluang, misal 0.3"/></td>
                    </tr>
                    <tr>
                        <td>Probabilitas munculnya bintik-bintik diwajah maka cacar</td>
                        <td><input type="text" name="probBintik2Cacar" class="tooltipnya" style="height: 30px; width: 50px; text-align: right;" rel="tooltip" title="Masukkan peluang, misal 0.3"/></td>
                    </tr>
                    <tr>
                        <td>Probabilitas munculnya bintik-bintik diwajah maka tidak cacar</td>
                        <td><input type="text" name="probBintik2TidakCacar" class="tooltipnya" style="height: 30px; width: 50px; text-align: right;" rel="tooltip" title="Masukkan peluang, misal 0.3"/></td>
                    </tr>
                    <tr>
                        <td><input class="btn btn-primary" type="submit" value="Submit"/></td>
                        <td></td>
                    </tr>
                </table>

            </form>
            <?php
        }

        public function dataJson() {
            $data1 = array("pesan" => "Probabilitas tidak terkena cacar", "hasil" => $this->notCacar());
            $data2 = array("pesan" => "Probabilitas terkena cacar jika ada bintik-bintik merah diwajah", "hasil" => $this->terkenaCacar());
            $data3 = array("pesan" => "Probabilitas tidak terkena cacar jika ada bintik-bintik merah diwajah", "hasil" => $this->tidakTerkenaCacar());
            $gabungData = array($data1, $data2, $data3);
        }

        public function tampilHasil() {
            ?>
            <div class="result-cacar">

            </div>
            <?php
        }

    }
    ?>
</body> 
```

然后我创建一个对象来调用已创建的类中的函数

```
<?php

require_once 'teorema-bayes.php';
$cacar = new TeoremaBayes($_POST['probCacar'], $_POST['probBintik2Cacar'],          $_POST['probBintik2TidakCacar']);
$cacar->inputUser();
echo json_decode($cacar->dataJson());
$cacar->tampilHasil();
?> 
```

但是调用结果的数据不行，是不是他的ajax和json有问题？

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:53:25.340

如果您尝试在 AJAX 调用中读取 JSON，则需要使用实际输出 JSON

```
echo json_encode($cacar->dataJson()); 
```

然后，您需要`$cacar->tampilHasil()`从输出中删除 ，因为这不是有效的 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:07:56.937

首先，您没有看到数据的原因（这是我认为您想说的）是您试图将尚未提交的 $_POST 数据传递给类的构造函数。除非用户提交这些 $_POST 数组变量，否则它们不会出现，并且看起来您当前已经混入了在构造函数之后调用的 inputUser() 方法中的 HTML 表单（自然）。

此外，这不是好的 OOP。您似乎在网上阅读了一下，然后开始打字。您需要将您尝试处理数据的类逻辑与显示逻辑（即 HTML 和 HTML 生成）分开。从查看一些 PHP 框架或只是一般的 OOP 指南开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T00:50:57.477

```
echo json_decode($cacar->dataJson()); 
```

那不应该是 json_encode：

```
echo json_encode($cacar->dataJson()); 
```

如果我正确阅读了您的示例，那就应该是这样。虽然我不知道这是做什么的：

```
$cacar->tampilHasil(); 
```

编辑：

哦……我现在明白了。摆脱`$cacar->tampilHasil();`您的响应方法。因为它所做的只是输出一些空的div。这会弄乱你的 json 结果。

......等等......你在呼应一个表格`$cacar->inputUser();`？你在这里有很多清理工作要做。这件事一团糟。

基本思想是，您期望结果是 json 数据，并且您正在为各种混合的 html 提供服务。您的结果方法应该只返回一个数组 json 编码。仅此而已，否则它将失败。

# mysql - MySQL：我需要每天从每个用户显示 1 到最多 n 个帖子

> ID：13811878
> 
> 赞同：2
> 
> 时间：2012-12-11T00:48:52.720
> 
> 标签：mysql, sql

我有一张包含用户帖子的表格。我需要每天从每个用户显示 1 到最多 n 个帖子。

例子：

```
post_id|user_id|post_datetime|post_text
1      |100    |2012-12-01 01:00:00|lorem ipsum 1
2      |100    |2012-12-01 02:00:00|lorem ipsum 2
3      |101    |2012-12-01 03:00:00|lorem ipsum 3
4      |100    |2012-12-01 04:00:00|lorem ipsum 4
5      |102    |2012-12-01 05:00:00|lorem ipsum 5
6      |100    |2012-12-02 03:00:00|lorem ipsum 6
7      |102    |2012-12-02 04:00:00|lorem ipsum 7
8      |101    |2012-12-02 05:00:00|lorem ipsum 8
9      |101    |2012-12-02 06:00:00|lorem ipsum 9
10     |101    |2012-12-02 07:00:00|lorem ipsum 10 
```

我需要一个查询，例如，每个用户每天最多返回 2 个帖子：

```
post_id|user_id|post_datetime|post_text
2      |100    |2012-12-01 02:00:00|lorem ipsum 2
4      |100    |2012-12-01 04:00:00|lorem ipsum 4
3      |101    |2012-12-01 03:00:00|lorem ipsum 3
5      |102    |2012-12-01 05:00:00|lorem ipsum 5
6      |100    |2012-12-02 03:00:00|lorem ipsum 6
7      |102    |2012-12-02 04:00:00|lorem ipsum 7
9      |101    |2012-12-02 06:00:00|lorem ipsum 9
10     |101    |2012-12-02 07:00:00|lorem ipsum 10 
```

我尝试使用 GROUP 和 HAVING 但我只获得前 n 条记录，而不是每个用户每天的前 n 条记录：

```
SELECT a.* FROM posts AS a
   JOIN posts AS a2 
   ON a.user_id = a2.user_id AND a.post_datetime <= a2.post_datetime
GROUP BY a.post_id
HAVING COUNT(*) <= 3
ORDER BY a.post_id, a.post_datetime DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T02:15:56.883

试试这个糟糕的 SQL 代码 :)

```
select post_id, user_id, post_datetime, post_text from (
  select posts.*,
    if (user_id = @prev_user and date(post_datetime) = date(@prev_day),
      @row := @row + 1, @row := 1) idx,
    @prev_user := user_id,
    @prev_day := post_datetime
  from posts, (select @row := 1, @prev_user := null, @prev_day := null) init
  order by date(post_datetime), user_id, post_datetime desc
) s
where s.idx <= 2 
```

结果：

```
+---------+---------+---------------------------------+----------------+
| POST_ID | USER_ID |          POST_DATETIME          |   POST_TEXT    |
+---------+---------+---------------------------------+----------------+
|       4 |     100 | December, 01 2012 04:00:00+0000 | lorem ipsum 4  |
|       2 |     100 | December, 01 2012 02:00:00+0000 | lorem ipsum 2  |
|       3 |     101 | December, 01 2012 03:00:00+0000 | lorem ipsum 3  |
|       5 |     102 | December, 01 2012 05:00:00+0000 | lorem ipsum 5  |
|       6 |     100 | December, 02 2012 03:00:00+0000 | lorem ipsum 6  |
|      10 |     101 | December, 02 2012 07:00:00+0000 | lorem ipsum 10 |
|       9 |     101 | December, 02 2012 06:00:00+0000 | lorem ipsum 9  |
|       7 |     102 | December, 02 2012 04:00:00+0000 | lorem ipsum 7  |
+---------+---------+---------------------------------+----------------+ 
```

[在这里](http://sqlfiddle.com/#!2/c89b3/2)拉小提琴。

我认为如果按日期降序排序会更合适，因为您实际上得到的是最接近当前日期的前 2 个。

# excel - Excel - 根据一个单元格中的输入自动填充列

> ID：13811881
> 
> 赞同：1
> 
> 时间：2012-12-11T00:49:18.427
> 
> 标签：excel, excel-formula

![在此处输入图像描述](../Images/62236ada36679198ac24cec7a822b679.png)

在 excel 中，当我在“输入列”中输入“A”时，我希望自动填充 Harry、Josh、Rob 和 Peter，如图所示。

同样，当我在“输入列”中输入“B”时，我希望自动填充 Kim、Nancy、Paul、George。任何人都可以发布 VBA 代码来执行此操作，或者我可以自己使用公式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T01:03:12.703

自动化代码解决方案：

*   右键单击您的工作表选项卡并选择*查看代码*
*   复制并粘贴下面的代码
*   按`Alt`+`F11`返回 Excel

`Column A`每当更改（即您的*“目标列”*）中的一个或多个单元格时，此代码都会进行您需要的更改

要改用 B 列，请尝试
`Set rng1 = Intersect(Target, Columns("B"))`
等

**代码**

```
 Private Sub Worksheet_Change(ByVal Target As Range)
Dim rng1 As Range
Dim rng2 As Range
Set rng1 = Intersect(Target, Columns("A"))
If rng1 Is Nothing Then Exit Sub
With Application
.EnableEvents = False
.ScreenUpdating = False
End With
For Each rng2 In rng1
Select Case UCase$(rng2.Value)
Case "A"
rng2.Offset(0, 1).Resize(1, 2) = Array("Harry", "Josh")
rng2.Offset(1, 1).Resize(1, 2) = Array("Rob", "Peter")
Case "B"
rng2.Offset(0, 1).Resize(1, 2) = Array("Kim", "Nancy")
rng2.Offset(1, 1).Resize(1, 2) = Array("Paul", "George")
End Select
Next
With Application
.EnableEvents = True
.ScreenUpdating = True
End With
End Sub 
```

# python - App Engine 阻止将重复项发布到数据存储区

> ID：13811882
> 
> 赞同：1
> 
> 时间：2012-12-11T00:49:18.427
> 
> 标签：python, google-cloud-datastore

我正在学习python和GAE。我已经能够构建一个基本的应用程序，但是我遇到了意外的重复条目。我不确定，但我认为我可以通过使用键名来处理这个问题，但我仍在学习，并且对我找到的解释键名的示例感到困惑。

我想做的是使用字符串作为“条目 id”，以便在发布条目之前，脚本确保没有具有相同条目“idstring”的条目。我已经构建了一些凌乱的代码来构建一个列表并根据列表检查条目，但我怀疑有更有效的方法来做到这一点？

这是我的代码：

```
import webapp2
from google.appengine.ext import db

class Options(db.Model):
  idstring = db.StringProperty()
  content = db.StringProperty(multiline=True)

class MainPage(webapp2.RequestHandler):
  def get(self):
    self.response.out.write('<html><body>')

    options = db.GqlQuery("SELECT * "
                            "FROM Options "
                            "LIMIT 10")

    for entry in options:
        self.response.out.write('%s ' % entry.idstring)
        self.response.out.write('Content: %s <br>' % entry.content)
    self.response.out.write("""
          <form action="/sign" method="post">
                <div class="field-field">
                <select name="idstring" id="id_string">
                  <option value="unique1">ID1</option>
                  <option value="unique2">ID2</option>
                  <option value="unique3">ID3</option>
                </select>
            <div><textarea name="content" rows="3" cols="60"></textarea></div>
            <div><input type="submit" value="Submit"></div>
          </form>
        </body>
      </html>""")

class Optionbook(webapp2.RequestHandler):

  def post(self):
      idlist = Options.all()
      idlist2 = []
      for i in idlist:
        idlist2.append(i.idstring)
      idstring = self.request.get('idstring')
      if idstring not in idlist2:
        entry = Options()
        entry.content = self.request.get('content')
        entry.idstring = self.request.get('idstring')
        entry.put()
      self.redirect('/')

app = webapp2.WSGIApplication([
  ('/', MainPage),
  ('/sign', Optionbook)
], debug=True) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T21:00:11.623

回想起来，解决方案非常简单。向数据存储添加条目时，数据存储可以使用实体 key_id 或 key_name 作为键。如果您想使用键名，只需将 key_name = yourkeystring 添加到您的放置代码中：

```
 import webapp2
  from google.appengine.ext import db

  class Options(db.Model):
    idstring = db.StringProperty()
    content = db.StringProperty(multiline=True)

  class MainPage(webapp2.RequestHandler):
    def get(self):
      self.response.out.write('<html><body>')

      options = db.GqlQuery("SELECT * "
                              "FROM Options "
                              "LIMIT 10")

      for entry in options:
          self.response.out.write('Content: %s <br>' % entry.content)
      self.response.out.write("""
            <form action="/sign" method="post">
                  <div class="field-field">
                  <select name="yourkeystring" id="yourkeystring">
                    <option value="ID1">ID1</option>
                    <option value="ID2">ID2</option>
                    <option value="ID3">ID3</option>
                  </select>
              <div><textarea name="content" rows="3" cols="60"></textarea></div>
              <div><input type="submit" value="Submit"></div>
            </form>
          </body>
        </html>""")

  class Optionbook(webapp2.RequestHandler):

    def post(self):
          n = Options(
            content = self.request.get('content'),
            key_name = self.request.get('yourkeystring'))
          n.put()
          self.redirect('/')

  app = webapp2.WSGIApplication([
    ('/', MainPage),
    ('/sign', Optionbook)
  ], debug=True) 
```

# android - 应用于 ListView 的 TouchDelegate 只响应点击事件

> ID：13811885
> 
> 赞同：6
> 
> 时间：2012-12-11T00:49:54.530
> 
> 标签：android, listview, delegates, touch

我正在尝试制作`ListView`单个项目的高度，然后将其放置在父视图的中心。这样，列表的顶部和底部滚动到视图的中心。当我将 a 应用于 时会出现问题，`TouchDelegate`因此`ListView`用户可以从实际的`ListView`. 我可以单击`ListView`通过，`TouchDelegate`但我无法上下滑动或单击并拖动列表。只需轻按它。

我必须为此创建一个`GestureDetector`还是我错过了一些简单的东西？

# c - 在 Ubuntu 中找不到 libcrypto

> ID：13811889
> 
> 赞同：48
> 
> 时间：2012-12-11T00:50:28.930
> 
> 标签：c, gcc, ubuntu

我想尝试一个上面有 makefile 的程序，但是当我放入`make`shell 时，错误是：

```
 g++ -g -DaUNIX -I../../acroname/aInclude -I../../acroname/aSource -Wl,-rpath,.     unix_aLaserDemo_Data/aLaserDemo.o unix_aLaserDemo_Data/acpLaser.o -lpthread -lcrypto -lssl  -o ../../acroname/aBinary/aLaserDemo
/usr/bin/ld: cannot find -lcrypto
collect2: ld returned 1 exit status 
```

这是生成文件：

```
 CC = g++
 CFLAGS = -DaUNIX -I../../acroname/aInclude -I../../acroname/aSource
 LFLAGS = -Wl,-rpath,.
 SRC = ../../acroname/aSource
 BIN = ../../acroname/aBinary
 LIBS = -lpthread -lcrypto -lssl \
 #LIBS = -lpthread\
       -L../../acroname/aBinary -l aUtil -l aIO
 OBJ = unix_aLaserDemo_Data

.PHONY : app
 app : $(OBJ) $(BIN)/aLaserDemo

$(OBJ) :
        mkdir $(OBJ)

$(BIN)/aLaserDemo : $(OBJ)/aLaserDemo.o $(OBJ)/acpLaser.o
        $(CC) -g $(CFLAGS) $(LFLAGS) $^ $(LIBS) -o $@

$(OBJ)/aLaserDemo.o : aLaserDemo.cpp
        $(CC) -c $(CFLAGS) $< -o $@

$(OBJ)/acpLaser.o : $(SRC)/acpLaser.cpp $(SRC)/acpLaser.h
        $(CC) -c $(CFLAGS) $< -o $@

 .PHONY : clean
 clean :
    rm -rf $(OBJ)
    rm -f $(BIN)/aLaserDemo 
```

我尝试找到加密库：

```
 /usr/lib/i486/libcrypto.so.0.9.8
 /usr/lib/i586/libcrypto.so.0.9.8
 /usr/lib/i686/cmov/libcrypto.so.0.9.8
 /usr/lib/libcrypto.so.0.9.8 
```

我应该怎么做才能修复它？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-01-16T17:54:48.677

我通过安装 libssl-dev 在 12.10 解决了这个问题。

```
sudo apt-get install libssl-dev 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T04:39:13.577

`ld`正在尝试查找输出`libcrypto.so`中不存在的内容`locate`。您可以复制一份并将其`libcrypto.so.0.9.8`命名为`libcrypto.so`. 把这是你的 ld 路径。（如果您没有 root 访问权限，则可以将其放在本地路径中并手动指定路径）

# tomcat - IntelliJ Web 应用程序上下文路径

> ID：13811891
> 
> 赞同：14
> 
> 时间：2012-12-11T00:50:42.247
> 
> 标签：tomcat, deployment, intellij-idea

在我的 IntelliJ Web 应用程序中，我已将应用程序上下文设置为*myapp*，如下所示

![在此处输入图像描述](../Images/578c6f25f3c091fdff55739e6505713e.png)

当我设置应用程序上下文时，它似乎没有任何效果。我期望将应用程序部署到 myapp，或者至少生成的 context.xml 文件将我的应用程序的上下文设置为 myapp。关于为什么这不起作用的任何想法（这是否与这是一场爆炸战争的事实有关）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T23:48:15.767

在 Tomcat 启动脚本中覆盖`CATALINA_BASE`可能会破坏 IDEA 部署，因为它通过提供`CATALINA_BASE`放置修改配置的自定义位置来工作，以便 Tomcat 直接从指定为工件输出目录的位置加载工件。

请参阅相关问题：

*   [IntelliJ IDEA 10.5 如何处理 Tomcat](https://stackoverflow.com/q/7699354/104891)

# html - 与 CSS 垂直对齐

> ID：13811892
> 
> 赞同：0
> 
> 时间：2012-12-11T00:50:43.937
> 
> 标签：html, css

我正在尝试垂直对齐 div 标签中的内联元素。这是我的 HTML：

```
<div class="foo">
    <div id="bar">
        <a href="#">Link 1</a>
    </div>
</div> 
```

这是我的 CSS：

```
.foo{
    width:200px;
    height:60px;
    background-color:red;
}

.foo #bar{
    text-align:center;
    vertical-align:middle;
} 
```

如何垂直对齐这个锚标签？我是否以正确的方式设置 HTML/CSS 以有效地做到这一点？垂直对齐内联元素和块元素的最佳实践是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:01:14.103

.Purest 使用 css 的方法是`display`像这样使用属性：

```
.foo { display: table; } 
#bar {
    display: table-cell;
    vertical-align: middle;
} 
```

这是假设你的#bar 有一些描述集的高度，它的内容应该垂直对齐。

# asp.net-mvc-3 - Unity IoC 花费大量时间在 ReadDirectoryChangesW

> ID：13811898
> 
> 赞同：0
> 
> 时间：2012-12-11T00:51:15.470
> 
> 标签：asp.net-mvc-3, unity-container, ioc-container

我们在 MVC3 项目中使用 Unity 作为 IoC 容器。我们刚刚安装了 dynatrace，它显示在 FileSystemWatcher.StartRaisingEvents 方法中花费的时间过多，特别是在 ReadDirectoryChangesW 中。这似乎导致了糟糕的表现。

为什么 Unity 会监控文件系统？

```
Here's the call stack:

ChildActionExtensions.RenderAction
  HttpServerUtility.Execute
    HttpHandlerUtil+ServerExecuteHttpHandler.Wrap
      UnityControllerFactory.CreateController
        XmlConfigurator.ConfigureAndWatch
          FileSystemWatcher.StartRaisingEvents
            UnsafeNativeMethods.ReadDirectoryChangesW 
```

这是 UnityControllerFactoryCode

```
 try
        {
            if (requestContext.RouteData.DataTokens.ContainsKey("area") && !string.IsNullOrWhiteSpace(requestContext.RouteData.DataTokens["area"].ToString()))
            {
                controllerName = string.Format("{0}/{1}", requestContext.RouteData.DataTokens["area"], controllerName);
            }

            controllerName = controllerName.ToLower();

            return _container.Resolve<IController>(controllerName);
        }
        catch (Exception ex)
        {
            if (ex is ResolutionFailedException)
            {
                IMyLogger logger = _container.Resolve<IMyLogger>();
                logger.Error(LogEventIdType.General, ex, "Is the '{0}' controller defined in the Unity Container via RegisterType (in lowercase) in UnityIocBootstrapConfigure?", new object[] {controllerName});
                throw;
            }             
        } 
```

记录器记录到 Windows 事件日志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:18:08.120

Unity 本身不会做这样的事情。事实上，堆栈跟踪根本不在 Unity 代码中，它在控制器工厂中。

写这个的人添加了文件系统观察器。这很愚蠢，因为 ASP。NET 已经监视 web.config 并在它发生更改时重新启动 appdomain。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:53:05.317

Your trace is pointing to `XmlConfigurator`, which is log4net. log4net stores its configuration in a separate file from the web.config, so it starts a File System Watcher to check if the file has changed to reconfigure itself.

It would seem that the culprit of your performance problems then is log4net, not Unity.

# c# - 安全性的 WCF 服务概念证明

> ID：13811900
> 
> 赞同：1
> 
> 时间：2012-12-11T00:51:24.297
> 
> 标签：c#, wcf

我是 WCF 的新手。以前从未创建过。我被要求为我们的团队创建一个概念证明，规范是：“我们需要一种保护和锁定我们的 web 服务的方法，以便通信安全，并且可以验证呼叫来自有效客户端。”

而已。我相信，我们有一些子系统通过未经身份验证的 WCF 调用相互通信。他们希望使用令牌或“共享密钥”将其锁定。

我想创建一个小型控制台应用程序，它充当 Web 服务服务器，然后是一个客户端控制台应用程序，它与它对话，看起来一个好方法是使用额外的标头（我在这里某处读过) 和 IClientMessageInspector (??)。这看起来像是一个有效的开球吗？

但我是 WCF 的新手..并且不知道 IClientMessageInspector 是什么。似乎我可以在那里创建一个自定义方法来检查 WCF 调用中的令牌或其他内容？

我想要一个例子，但我正在努力找出答案，而术语正在杀死我。希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:30:19.050

最简单的方法是使用具有传输安全性 (SSL) 的 BasicHttpBinding，每个客户端都可以拥有自己的（或共享的）证书，用于身份验证，并且您的数据也被加密（SSL）。

只有具有已知证书的客户端才能调用该服务。[这是一篇关于带有客户端证书的 BasicHttpBinding](http://robbincremers.me/2011/12/27/wcf-transport-security-and-client-certificate-authentication-with-self-signed-certificates/)主题的好文章

# jquery - 当我单击触发它显示的链接时，如何触发 Spotify 播放按钮播放？

> ID：13811903
> 
> 赞同：4
> 
> 时间：2012-12-11T00:51:51.753
> 
> 标签：jquery, html, spotify

这是当我单击“摇滚房子！”链接时显示 Spotify 播放按钮的 jQuery 代码。

```
$(function() {
$('#partystart').toggle(function () {
    $(".fadeIn").addClass("party");
    $("#musicbox").slideDown("300");
    $("#partystart").html("<a id='partystart'>Take a break</a>");
}, function () {
    $(".fadeIn").removeClass("party");
    $(".fadeIn").addClass("fullopacity");
    $("#musicbox").slideUp("300");
    $("#partystart").html("<a id='partystart'>&#9650; Rock the house!</a>");
});
}); 
```

这是HTML：

```
<div id="partybox" >
    <iframe id="musicbox" style="margin-top: -2px; display: none;" src="https://embed.spotify.com/?uri=spotify:track:3QMLpta0AmeJLpWNmeyC6B#0:12" width="250" height="80" frameborder="0" allowtransparency="true"></iframe>
    <a id="partystart">&#9650; Rock the house!</a>
</div> 
```

这是一个示例，允许您单击一个圆圈来播放曲目，而不是实际 Spotify 播放按钮内的播放按钮：[http ://spotifymusic.tumblr.com/](http://spotifymusic.tumblr.com/)

另外，我把`#0:12`歌曲的 URI 放在末尾，让它在 0:12 秒开始播放，但它似乎不起作用。我在那里做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-09T16:14:15.467

I don't have a spotify account and don't plan to make one, but the following solution should work, you'll just need to do a little investigation.

The Spotify iFrame has a click event attachted to .play-pause-btn (I think). You need to activate the click event for playback to start. It would be something like this:

```
$("#musicbox").contents().find("div.play-pause-btn").click(); 
```

Adding it with the rest of your code:

```
$('#partystart').toggle(function () {
    $(".fadeIn").addClass("party");
    $("#musicbox").slideDown("300");
    $("#partystart").html("<a id='partystart'>Take a break</a>");
    $("#musicbox").contents().find("div.play-pause-btn").click();
}, function () {
    $(".fadeIn").removeClass("party");
    $(".fadeIn").addClass("fullopacity");
    $("#musicbox").slideUp("300");
    $("#partystart").html("<a id='partystart'>&#9650; Rock the house!</a>");
});
}); 
```

If it doesn't work, you'll need to determine which item has the click event on it.

# html - 仅删除每行末尾的逗号

> ID：13811906
> 
> 赞同：-1
> 
> 时间：2012-12-11T00:52:28.937
> 
> 标签：html, regex

我有一个包含逗号的列表，但我在同一个列表中也有其他逗号我不想删除，所以我想知道有没有办法只删除每行文本的最后一个逗号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:55:33.540

最简单的方法是使用正则表达式，例如：

替换(/,\s*$/, '', [内容]);

这将在行尾 ($) 查找逗号字符 (,) 后跟任何空格 (\s*)。根据语言或程序，您必须单独传递每一行，或设置多行标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T01:01:52.980

因为我们不知道您使用的是什么语言，所以我只能给您将捕获*最后一个*逗号的正则表达式：

```
,(?!.*,) 
```

如果您将此正则表达式的匹配项替换为空白，您将删除最后一个逗号。

因此，正则表达式使用前瞻来断言匹配的逗号之后的任何地方都没有逗号。环顾四周的好处是不捕获，因此您不必用任何反向引用等替换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T01:18:43.797

如果您的意思是删除最后一个字符（如果它是逗号），那么您应该执行替换 `^(.*),$`为`$1`

`a,b,c,`将被替换为`a,b,c`，并且`a,b,c,d`不会匹配正则表达式。

如果您的意思是只删除最后一个逗号，即使它后面还有一些东西，也可以执行替换`^(.*),([^,]*)$`为`$1$2`

`a,b,c,`将被替换为`a,b,c`，`a,b,c,d`并将被替换为`a,b,cd`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T01:19:14.693

RegEx 很好，但很难阅读。如果您更喜欢 C# 等语言中更详细的算法...

```
public string RemoveLastComma(string input)
{
if (input.Contains(",") == false)
    return input;

    int position = 0;

    for (int i = input.Length; i > 0; i--)
    {
        if (input.Substring(i-1, 1) == ",")
        {
            position = i;
            break;
        }
    }
    var firstSegment = input.Substring(0, position-1);
    var lastSegement = input.Substring(position, (input.Length - position));
    return firstSegment + lastSegement;
} 
```

# c++ - opengl 纹理无法正确渲染

> ID：13811911
> 
> 赞同：2
> 
> 时间：2012-12-11T00:53:01.600
> 
> 标签：c++, opengl, textures

我正在尝试渲染狼模型。我已经让模型正确渲染。但是，纹理我还没有开始工作。我正在使用 OpenGL 和 AssImp。

这是狼的样子：

![我的模型是什么样的](../Images/235ee5f14fc04c7aa032c7c3cf675d04.png)

狼应该是这样的：

![适当纹理](../Images/5d1e998ab4e8c23d7d7e325e64e69a9f.png)

这是加载模型的代码：

```
IModel* ModelManager::loadModel(const std::string filename) {

    if (models_[filename] != 0) {
        BOOST_LOG_TRIVIAL(debug) << "Model found.";
        return models_[filename].get();
    }

    const aiScene* scene = aiImportFile(filename.c_str(), aiProcessPreset_TargetRealtime_MaxQuality);

    if (scene == 0) {
        BOOST_LOG_TRIVIAL(debug) << "Unable to load model...";
        return 0;       
    }

    models_[filename] = std::unique_ptr<Model>( new Model(scene) );

    aiReleaseImport(scene);

    BOOST_LOG_TRIVIAL(debug) << "Done loading model '" << filename << "'.";

    return models_[filename].get();
} 
```

这是为模型加载网格的代码：

```
Mesh::Mesh(const aiMesh* mesh) {
uint32 currentIndex = 0;

    for (uint32 t = 0; t < mesh->mNumFaces; ++t) {
        const aiFace* face = &mesh->mFaces[t];
        GLenum face_mode;

        switch(face->mNumIndices) {
            case 1: face_mode = GL_POINTS; break;
            case 2: face_mode = GL_LINES; break;
            case 3: face_mode = GL_TRIANGLES; break;
            default: face_mode = GL_POLYGON; break;
        }

        uint32 numIndices = face->mNumIndices;

        vertices_.resize( currentIndex + numIndices );
        normals_.resize( currentIndex + numIndices );
        textureCoordinates_.resize( currentIndex + numIndices );
        colors_.resize( currentIndex + numIndices );

        for(uint32 i = 0; i < numIndices; i++) {
            // get group index for current index
            int vertexIndex = face->mIndices[i];

            if (mesh->mNormals != 0) {
                vertices_[currentIndex + i]     = glm::vec3( mesh->mVertices[vertexIndex].x, mesh->mVertices[vertexIndex].y, mesh->mVertices[vertexIndex].z );
                normals_[currentIndex + i]      = glm::vec3( mesh->mNormals[vertexIndex].x, mesh->mNormals[vertexIndex].y, mesh->mNormals[vertexIndex].z );
            }

            if (mesh->HasTextureCoords(0)) {
                textureCoordinates_[currentIndex + i] = glm::vec2( mesh->mTextureCoords[0][i].x, mesh->mTextureCoords[0][i].y );
            }

            //utilities::AssImpUtilities::color4_to_vec4(&mesh->mColors[0][vertexIndex], colors_[colors_.size() + i]);
            if (mesh->mColors[0] != 0) {
                colors_[currentIndex + i]           = glm::vec4(
                                                        (float)mesh->mColors[0][vertexIndex].a,
                                                        (float)mesh->mColors[0][vertexIndex].b,
                                                        (float)mesh->mColors[0][vertexIndex].g,
                                                        (float)mesh->mColors[0][vertexIndex].r
                                                    );
            }           
        }

        currentIndex += 3;
    }
} 
```

这是加载纹理的代码：

```
void Texture::loadTexture(utilities::Image* image) {
glGenTextures(1, &textureId_);

    glBindTexture(GL_TEXTURE_2D, textureId_);

    //glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    //glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    glTexParameteri( GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER, GL_LINEAR );
    glTexParameteri( GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER, GL_LINEAR );

    // i don't combine the color with the original surface color, use only the texture map.
    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, image->width, image->height, 0, GL_RGB, GL_UNSIGNED_BYTE, image->data);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
} 
```

这是模型的渲染代码：

```
for (uint32 i=0; i < meshes_.size(); i++) {
        textures_[i]->bind();
        meshes_[i]->render();
    }
} 
```

这是纹理的“绑定”代码：

```
void Texture::bind() {
glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glEnable( GL_TEXTURE_2D );
    glBindTexture(GL_TEXTURE_2D, textureId_);
} 
```

最后，这是 Mesh 的渲染代码：

```
void Mesh::render() {
glBegin( GL_TRIANGLES );

    for (uint32 i = 0; i < vertices_.size(); i++) {
        glTexCoord2fv( &textureCoordinates_[i].x );
        glVertex3fv( &vertices_[i].x );
        glNormal3fv( &normals_[i].x );
    }

    glEnd();
} 
```

我没有看到任何明显的错误。有没有人看到我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:26:45.110

GAH，我想通了...问题是加载网格时：

```
for(uint32 i = 0; i < numIndices; i++) {
            // get group index for current index
            int vertexIndex = face->mIndices[i];

            ...

            if (mesh->HasTextureCoords(0)) {
                textureCoordinates_[currentIndex + i] = glm::vec2( mesh->mTextureCoords[0][i].x, mesh->mTextureCoords[0][i].y );
            }

            ...
            }           
        } 
```

应该使用`mesh->mTextureCoords[0][vertexIndex].x`而不是`mesh->mTextureCoords[0][i].x`（对于 y 索引也是如此）......

所以，只是在每个循环中使用了错误的纹理坐标索引，所以纹理坐标对于每个被渲染的三角形都是相同的 3 个坐标：S

感谢所有关注这个问题的人！

# regex - Powershell用字符替换转义字符

> ID：13811916
> 
> 赞同：1
> 
> 时间：2012-12-11T00:53:38.063
> 
> 标签：regex, powershell

不知道为什么在以下字符串替换中强制转换为 int 在 Powershell 中失败：

```
PS D:\> $b = "\x26"

PS D:\> $b -replace '\\x([0-9a-fA-F]{2})', [char][int]'0x$1'

Cannot convert value "0x$1" to type "System.Int32". Error: "Could not find any recognizable digits."
At line:1 char:1

+ $b -replace '\\x([0-9a-fA-F]{2})', [char][int]'0x$1'
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidArgument: (:) [], RuntimeException
    + FullyQualifiedErrorId : InvalidCastFromStringToInteger 
```

替换本身工作正常：

```
PS D:\> [char][int]($b -replace '\\x([0-9a-fA-F]{2})', '0x$1')

& 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:15:22.613

运算符期望第`-replace`一个字符串是要匹配的模式，它期望第二个参数是要替换的“字符串”。从语言规范：

```
7.8.4.3 The -replace operator
Description:
The -replace operator allows text replacement in one or more strings designated by 
the left operand using the values designated by the right operand. This operator has 
two variants (§7.8). The right operand has one of the following forms:
•   The string to be located, which may contain regular expressions (§3.16). In this case, the replacement string is implicitly "".
•   An array of 2 objects containing the string to be located, followed by the replacement string. 
```

我认为在评估字符串之前您不能访问 $1 ，到那时进行进一步评估为时已晚，即在这种情况下类型强制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:04:45.367

你不能这样做是 single `-replace`，但是你可以使用自定义`MatchEvaluator`回调（[docs](http://msdn.microsoft.com/en-us/library/ht1sxswy.aspx)）来做到这一点。在`MatchEvaluator`你有完全的代码控制，所以你可以做任何你想做的疯狂的事情！

```
$b = "\x26"

$matchEval = { 
  param($m)
  $charCode = $m.Groups[1].Value
  [char][int] "0x$charCode"
 }

 [regex]::Replace($b, '\\x([0-9a-fA-F]{2})', $matchEval)

>> & 
```

# versioning - .net 远程处理 - 服务器上的更新导致无法加载类型错误

> ID：13811918
> 
> 赞同：0
> 
> 时间：2012-12-11T00:54:02.957
> 
> 标签：versioning, .net-assembly, .net-remoting

我正在对已部署的客户端服务器应用程序进行更新，该应用程序使用 .net 通过带有二进制格式化程序的 tcp 通道进行远程处理。由于客户端在地理上分布，我只需要在可能的情况下在服务器端进行更新。系统使用.net 3.5，客户端和服务器有一个共享的dll，其中包含一个众所周知的实现类。此 dll 没有强名称。

我遇到的问题是，当我更新服务器并尝试部署修改后的版本时，客户端失败，记录如下错误消息：

```
 Cannot load type '(service class name), (assembly name), Version =1.0.0.0, Culture = neutral, Public Key Token = null' 
```

错误中指定的详细信息与部署在与 client.exe 文件相同的目录中的程序集的详细信息相匹配，所以我真的不明白为什么客户端不加载它。是的，客户端与服务器的版本不同，但版本号相同，所以它应该可以工作，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:22:43.333

事实证明，这是信任您客户以前的承包商的危险......我只是假设他们提供的源对应于部署的系统，但似乎他们给了我一个过时的版本。导致此错误的特定问题是，在他们给我源的版本和部署的版本之间，他们更改了包含众所周知的服务对象的命名空间的名称，因此在部署的程序集中找不到它的错误.

# php - 什么是使用单管“|” 在函数参数中做什么？

> ID：13811922
> 
> 赞同：86
> 
> 时间：2012-12-11T00:54:30.173
> 
> 标签：php, function, arguments, bitwise-operators

以下面的代码为例：

```
phpinfo(INFO_MODULES | INFO_ENVIRONMENT | INFO_VARIABLES); 
```

正在使用单个参数，但我提供了一个由单个管道符号分隔的选项列表。

*   函数中的参数值到底发生了什么？
*   我可以在自己的函数中使用相同的东西吗？
*   是这样吗，与传递数组相比，这有什么好处吗？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-12-11T01:12:54.733

### 位运算符

位运算符修改所涉及的值的位。A 按位`OR`基本上将左右参数的每一位 OR 在一起。例如：

```
5 | 2 
```

将转换为位/二进制：

```
101 | 10 
```

这将导致：

```
111 
```

因为：

```
1 || 0 = 1
0 || 1 = 1
1 || 0 = 1 
```

作为一个表示 7 的整数，这正是你得到的结果：

```
echo 5 | 2; 
```

### 用 Eddie Izzard 的话来说... 旗帜！

正如 Ignacio 所说，这在 PHP（和其他语言）中最常用于组合多个标志的方式。每个标志通常定义为一个常量，其值通常设置为一个整数，该整数仅代表不同偏移量的一位：

```
define('FLAG_A', 1); /// 0001
define('FLAG_B', 2); /// 0010
define('FLAG_C', 4); /// 0100
define('FLAG_D', 8); /// 1000 
```

然后，当您`OR`将它们放在一起时，它们会以各自的位偏移量进行操作，并且永远不会发生冲突：

```
FLAG_A | FLAG_C 
```

转换为：

```
1 | 100 
```

所以你最终打开：

```
101 
```

代表整数 5。

然后所有代码必须做的——将对设置的不同标志做出反应的代码——如下（使用按位`AND`）：

```
$combined_flags = FLAG_A | FLAG_C;

if ( $combined_flags & FLAG_A ) {
  /// do something when FLAG_A is set
}

if ( $combined_flags & FLAG_B ) {
  /// this wont be reached with the current value of $combined_flags
}

if ( $combined_flags & FLAG_C ) {
  /// do something when FLAG_C is set
} 
```

归根结底，它只是通过命名常量使事情更容易阅读，并且通常通过依赖整数值而不是字符串或数组来更优化。使用常量的另一个好处是，如果它们在使用时输入错误，编译器可以更好地告知并发出警告……如果使用了字符串值，它就无法知道有什么问题。

```
define('MY_FLAG_WITH_EASY_TYPO', 1);

my_function_that_expects_a_flag( MY_FLAG_WITH_EASY_TPYO );

/// if you have strict errors on the above will trigger an error

my_function_that_expects_a_flag( 'my_string_with_easy_tpyo' );

/// the above is just a string, the compiler knows nowt with 
/// regard to it's correctness, so instead you'd have to
/// code your own checks. 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-11T01:04:33.133

您正在传递一个参数，该参数是[多个 flags](https://stackoverflow.com/a/3589579/20862)的按位或。您可以在任何您喜欢的地方使用运算符。

# jquery - canvas .stroke() 动画绘制 html5

> ID：13811923
> 
> 赞同：1
> 
> 时间：2012-12-11T00:54:33.490
> 
> 标签：jquery, html, canvas

[http://jsfiddle.net/jfrazelle/bZec4/3/](http://jsfiddle.net/jfrazelle/bZec4/3/)我怎样才能使箭头的绘图动画化，如何减慢 .stroke() 的速度。我希望这个箭头在绘制时被绘制和动画。

```
drawArrow('arrow-1', 50, 50, 100, 10, 100);

function drawArrow(id, sx, sy, ex, ey, fx){
    var arrow = document.getElementById(id);
    var ctx_1 = arrow.getContext('2d');
    ctx_1.clearRect(0, 0, arrow.width, arrow.height);
    ctx_1.beginPath();
    ctx_1.moveTo(10,ey);
    ctx_1.quadraticCurveTo(sx, sy, ex, ey);
    ctx_1.stroke();

    var ang = findAngle(sx, sy, fx, ey);
    drawArrowhead(ctx_1, fx, ey, ang, 15, 15);
}

function drawArrowhead(ctx, locx, locy, angle, sizex, sizey) {
    var hx = sizex / 2;
    var hy = sizey / 2;
    ctx.translate((locx ), (locy));
    ctx.rotate(angle);
    ctx.translate(-hx,-hy);
    ctx.beginPath();
    ctx.moveTo(0,0);    
    ctx.lineTo(0.5*sizex,1.0*hy);
    ctx.lineTo(0.5,1.0*sizey);
    ctx.stroke();
}

// returns radians
function findAngle(sx, sy, ex, ey) {
    // make sx and sy at the zero point
    return Math.atan2((ey - sy) , (ex - sx));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:15:05.767

您可能想使用 requestAnimFrame。看[这里。](http://www.html5canvastutorials.com/advanced/html5-canvas-animation-stage/)

# javascript - YouTube JS API 的谦虚品牌参数

> ID：13811925
> 
> 赞同：0
> 
> 时间：2012-12-11T00:55:12.180
> 
> 标签：javascript, youtube, youtube-api, youtube-javascript-api

我正在使用 YouTube 的 JavaScript API 在我的网页上生成一个无铬的 YouTube 播放器。我希望使用我知道的“modestbranding”参数以某种方式删除播放器右下角的 YouTube 徽标，但我只能在与 iFrame API 相关的文档中找到它。

是否可以在 JavaScript API 中以某种方式使用此参数？

# javascript - 如何使用模式并解析 getJSON 结果和输出？

> ID：13811927
> 
> 赞同：0
> 
> 时间：2012-12-11T00:55:24.710
> 
> 标签：javascript, getjson

谁能告诉我为什么我的模式代码没有输出任何结果？

添加模式代码！

```
 matchingelements = code.match(/sid\=*(\d*)/ig); for(i=0;i<code.length;i++){
 document.write(matchingelements[i].replace('&sid=','').replace('sid=','')); 
} 
```

这是完整的代码？

```
<script type='text/javascript'>

$.getJSON('http://anyorigin.com/get?url=http://www.somesite.com&callback=?',
function(data){  //$('#output').html(data.contents);

var code = data.contents;

document.myform.outputtext.value = code;

//pattern code
matchingelements = code.match(/sid\=*(\d*)/ig); for(i=0;i<code.length;i++){ 
document.write(matchingelements[i].replace('&sid=','').replace('sid=',''));
}

}); 

</script>

<form name="myform"> <td><textarea rows="7" cols="15" name="outputtext" style="width: 99%;"></textarea></td>    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:19:22.597

您的模式似乎无效，我相信这会引发错误。试试这个模式

`/(?:&|(\?))sid=[^&]*(\?(1)&|)?/ig`

我所做的只是逃到`\?`附近`(?(1)...`

# logging - 是否有一种工具可以从 AWS Elastic Beanstalk 以聚合方式轻松搜索 S3 中每小时轮换的日志？

> ID：13811928
> 
> 赞同：3
> 
> 时间：2012-12-11T00:55:32.310
> 
> 标签：logging, amazon-s3, amazon-web-services, aggregation, amazon-elastic-beanstalk

很高兴 AWS Elastic Beanstalk 可以为您自动轮换日志。问题是，一旦在 s3 中，它们都是 GZipped 并且每小时在一个文件中。为了在一段时间内进行任何类型的分析，需要手动下载所有单独的 .gz 文件，解压缩它们，然后搜索它们。我正在寻找一种工具，我可以只指向一个 S3 文件夹，并在我的日志上具有文本搜索功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-27T03:18:44.833

我在尝试聚合和搜索 S3 访问和 Cloudfront 日志文件时遇到了类似的问题。令人惊讶的是，在这个问题发布多年后，我仍然没有找到一个好的解决方案，所以我自己编写了一个使用 S3 通知和 AWS Lambda 的解决方案。如果您不直接将事件从您的应用程序发布到 papertrail 并且仅依赖写入 S3 的日志，您可以调整[https://github.com/qixotic/s3-to-logstore](https://github.com/qixotic/s3-to-logstore)来解析您的日志文件格式并推送到 papertrail （或其他交通工具）。

# actionscript-3 - FLASH AS3 单击时更改位图

> ID：13811930
> 
> 赞同：0
> 
> 时间：2012-12-11T00:55:45.783
> 
> 标签：actionscript-3, flash, papervision3d

我希望这个网站上许多有用的 FLASH 天才之一可以分享更新此示例代码中的位图所需的代码位：[http](http://www.flashmo.com/preview/flashmo_096_3d_cylinder_box) : //www.flashmo.com/preview/flashmo_096_3d_cylinder_box 单击时我想要任何图片的（位图）在单击事件时更改为其他内容（另一个位图）。
非常感谢您提供的任何帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:47:31.743

```
var ExampleBitmapData:BitmapData = ExampleBD();
var anotherBitmapData:BitmapData = anotherBD();

var bitmap_Holder:Bitmap;

bitmap_Holder.bitmapData = ExampleBD();

stage.addChild(bitmap_Holder);

stage.addEventListener(MouseEvent.MOUSE_CLICK, function(event:MouseEvent):void{
bitmap_Holder.bitmapData = anotherBD();
}); 
```

我认为这可以给你一个想法。

# python - Python/OpenCV 中的 cvClose？

> ID：13811939
> 
> 赞同：0
> 
> 时间：2012-12-11T00:56:43.110
> 
> 标签：python, opencv

我无法将其翻译成 Python/OpenCV。可以请帮忙...</p>

```
cvClose(mask, mask, se21);  
cvOpen(mask, mask, se11); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:45:32.237

希望您使用的是 OpenCV-Python 的新 cv2 接口。

如果我的假设是正确的，这是`morphological opening and closing operations.`

您可以[`cv2.morphologyEx`](http://docs.opencv.org/modules/imgproc/doc/filtering.html#cv2.morphologyEx)为此使用函数，并带有相应的标志等`MORPH_OPEN, MORPH_CLOSE`。

闭合是图像膨胀，然后是腐蚀，用于去除白体内的小黑洞。

打开是图像的腐蚀然后是膨胀，用于去除图像中的小白色斑点或点。

有关打开和关闭的更多信息：

1.  [http://homepages.inf.ed.ac.uk/rbf/HIPR2/open.htm](http://homepages.inf.ed.ac.uk/rbf/HIPR2/open.htm)
2.  [http://homepages.inf.ed.ac.uk/rbf/HIPR2/close.htm](http://homepages.inf.ed.ac.uk/rbf/HIPR2/close.htm)

或者，您可以[`cv2.erode and cv2.dilate`](http://docs.opencv.org/modules/imgproc/doc/filtering.html#dilate)为此使用函数。

你可以在这里找到一个例子：[https ://github.com/abidrahmank/OpenCV2-Python/blob/master/Official_Tutorial_Python_Codes/3_imgproc/morphology_1.py](https://github.com/abidrahmank/OpenCV2-Python/blob/master/Official_Tutorial_Python_Codes/3_imgproc/morphology_1.py)

# objective-c - 如何使用objective-c从Java服务器读取输入流中的对象

> ID：13811941
> 
> 赞同：0
> 
> 时间：2012-12-11T00:57:03.547
> 
> 标签：objective-c, ios, applet, httprequest

我正在做一个 ipad 应用程序。实际上，我正在将一个 java applet 应用程序转换为 ipad 版本。我有很多问题。

在原始的java小程序代码中，有一些http POST请求，它会从java服务器接收一些数据。

```
 httpCon=(HttpURLConnection) cmdURL.openConnection();
        httpCon.setRequestMethod("POST");
        httpCon.addRequestProperty("cmd", cmd);
        httpCon.addRequestProperty("arg", arg);
        httpCon.setDoInput(true); 
```

然后，接收数据：

```
 inputStream=httpCon.getInputStream();
        ObjectInputStream ois=new ObjectInputStream(inputStream);
        Document doc=(Document)ois.readObject();
        rData[2]=doc; 
```

现在，我想使用objective-c做同样的事情：

```
NSURL * url = [NSURL URLWithString:@"http://192.168.1.4:801/cmd"];
NSMutableURLRequest * request = [NSMutableURLRequest requestWithURL:url];

[request setHTTPMethod:@"POST"];
[request setValue:[NSString stringWithFormat:@"%@",cmd] forHTTPHeaderField:@"cmd"];
[request setValue:[NSString stringWithFormat:@"%@",arg] forHTTPHeaderField:@"arg"];

[NSURLConnection connectionWithRequest:request delegate:self]; 
```

`_responseData`是接收到的数据：

```
 - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
        _responseData = [NSMutableData data];}

    - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
        [_responseData appendData:data];
    } 
```

那么，接下来我该怎么办？并且`Document`java小程序代码中有一个类，objective-c中有没有类似的类？

=======更新=======

java服务器返回`xml`作为`Document`实例。可以直接`_responseData`作为`xml`文件使用吗？或者我必须在处理之前做额外的步骤`_responseData`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:05:30.940

你不能在 objC 中使用 java 对象流。它旨在发送**java对象**

...如果您对 objectStream 使用的协议进行逆向工程，那么理论上您可以，但这是大量的工作和维护地狱（我猜） - 我会研究使用通用交换格式.. **json 或 xml 可能！**

编辑后：我不知道 objectstream 发送的 xml，但理论上你可以解析它并用它设置一个自定义的 objC 类。
我也不知道 Document 类是什么或做什么或它来自哪里，所以我不能说 Java 中是否有等价物。我倾向于不。

# google-bigquery - BigQuery 导入“意外”错误

> ID：13811943
> 
> 赞同：0
> 
> 时间：2012-12-11T00:57:17.973
> 
> 标签：google-bigquery

我正在尝试将大型测试文件导入 BigQuery，几个小时后导入过程失败

> 意外。请再试一次。

这是我的工作标识： `job_f3d6dbaae8af4aa286ef1d50c12a6`

你能看看吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:17:30.190

我们的导入工作人员达到了 CPU 使用限制并被杀死。我们正在提高限制，但它可能是损坏的 gzip 文件。提高限制后，我将更新此响应。

我意识到这对于大文件可能会很痛苦，但是您可以使用未压缩的文件重试吗？如果您有一个未压缩的文件并将 allow_quoted_newlines 设置为 false，则导入将并行完成，并且应该快 100 倍。

# python - Django 字符串过滤器和输出字典索引值

> ID：13811946
> 
> 赞同：0
> 
> 时间：2012-12-11T00:57:30.937
> 
> 标签：python, django

我正在尝试过滤掉要在我的 Django 模板中使用的域部分。我想引用返回字典的多个部分。

例如：

```
{% for item in data %}
    {{ item.url|parse_domain }}
{% endfor %} 
```

我的 parse_domain 过滤器返回子域、主机和 .com/net/org，但我想做的是同时引用返回值的任何索引。这可能在模板中吗？

喜欢：

```
{{ item.url|parse_domain|0 }} = "subdomain" 
```

还是我必须再次循环它，给我嵌套的 for 循环？

感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:07:02.443

使用`slice`过滤器索引返回的字典。

# gdi+ - 在 Direct2D 中执行世界 <--> 设备转换

> ID：13811947
> 
> 赞同：0
> 
> 时间：2012-12-11T00:57:35.383
> 
> 标签：gdi+, direct2d, sharpdx

在 GDI+ 中，Graphics 对象有一个 TransformPoints 函数，它允许您指定设备到世界或世界到设备的坐标变换。在 SharpDX 中，我可以获取设备（独立）坐标并使用 Matrix3x2.TransformPoint(...) 将它们翻译到我的世界，但我该如何走另一条路呢？

或者，我正在做的是通过一系列转换，我最终在屏幕上绘制了一些我只知道在当前世界坐标中的东西，但我想在上面绘制一个文本标签。因此，我认为我需要回到设备坐标以正确绘制我的文本（即将 Identity 设置为变换；drawtext(device x,device y) -- 快乐的日子）。因此，如果有一个不涉及 TransformPoints 的直接解决方案，那我也会很高兴。

我正在使用 SharpDX，但我很乐意翻译任何 c++ 答案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T23:31:49.643

InvertMatrix() 添加到 SharpDX。

[http://code.google.com/p/sharpdx/issues/detail?id=334](http://code.google.com/p/sharpdx/issues/detail?id=334)

# angularjs - 同一页面上的不同 ng-include：如何向每个发送不同的变量？

> ID：13811948
> 
> 赞同：41
> 
> 时间：2012-12-11T00:57:52.200
> 
> 标签：angularjs

我的 AngularJS 应用程序中有一个页面，我想在其中包含相同的 html 部分，但具有不同的变量。如果我在我的 main 中这样做`html`：

```
<div id="div1" ng-include src="partials/toBeIncluded.html onload="var='A'">
<div id="div2" ng-include src="partials/toBeIncluded.html onload="var='B'"> 
```

看起来`toBeIncluded.html`像

```
<div>{{var}}</div> 
```

两者`div`看起来像

```
<div id="div1"><div>B</div></div>
<div id="div2"><div>B</div></div> 
```

`onload`我想这与所有 ng-includes 都需要相同的事实有关。那么如何将不同的变量发送到每个不同的包含？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-11T02:19:08.260

`onload`每次加载新的部分时，传递给的表达式都会进行评估。在这种情况下，您将更改`var`两次的值，因此在加载两个部分时，当前值将是`B`

您想将不同的数据传递给每个部分/模板（底层 html 文件相同）。为了实现这一点，正如 Tiago 所提到的，您可以使用不同的控制器来实现。例如，考虑以下

```
<body ng-controller='MainCtrl'>    
  <div ng-include src='"toBeIncluded.html"' ng-controller='ctrlA' onload="hi()"></div>
  <div ng-include src='"toBeIncluded.html"' ng-controller='ctrlB' onload="hi()"></div>
</body> 
```

在这里，我们有两个部分，每个部分都有自己的范围，由它们自己的控制器（`ctrlA`和`ctrlB`）管理，两个子范围都是`MainCtrl`. 该函数`hi()`属于 的范围，`MainCtrl`将运行**两次**。

如果我们有以下控制器

```
app.controller('MainCtrl', function($scope) {
  $scope.msg = "Hello from main controller";
  $scope.hi= function(){console.log('hi');};
});

app.controller('ctrlA', function($scope) {
  $scope.v = "Hello from controller A";
});

app.controller('ctrlB', function($scope) {
  $scope.v = "Hello from controller B";
}); 
```

的内容`toBeIncluded.html`是

```
<p>value of msg = {{msg}}</p>
<p>value of v = {{v}} </p> 
```

生成的 html 将类似于以下内容

```
<p>value of msg = Hello from main controller</p>
<p>value of v = Hello from main controller A </p> 
```

和

```
<p>value of msg = Hello from main controller</p>
<p>value of v = Hello from controller B </p> 
```

此处示例：[http ://plnkr.co/edit/xeloFM?p=preview](http://plnkr.co/edit/xeloFM?p=preview)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-12-17T16:49:07.000

就像马克所说的那样，但为了简化一点并使其更加“即时”，请使用以下内容：

```
<div ng-repeat="name in ['John']" ng-include="'name-template.html'"></div>
<div ng-repeat="name in ['Jack']" ng-include="'name-template.html'"></div>

<script type="text/ng-template" id="name-template.html">
   <div>The name is {{ name }}</div>
<script> 
```

这里的例子：http: [//jsfiddle.net/Cndc6/4/](http://jsfiddle.net/Cndc6/4/)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-12-11T15:36:33.497

在您对@jm- 的回答的评论中，您提到您想在 ng-repeat 中加载您的部分内容。为此，请在 $scope 上创建一个数组，并在该数组上设置唯一值：

```
$scope.partialStuff = [ 'p1', 'p2', 'p3' ]; 
```

在你的局部某处：

```
{{partialVar}} 
```

的HTML：

```
<div ng-repeat="partialVar in partialStuff">
   <div ng-include src="'partials/toBeIncluded.html'"></div>
</div> 
```

[小提琴](http://jsfiddle.net/mrajcok/drcva/)。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-03-13T07:40:04.517

我可能是错的，但使用指令不是更好吗？

```
.directive('foobar', [function factory() {
    return {
        restrict: 'E',
        replace: true,
        templateUrl: '/toBeIncluded.html',
        scope: {
            "var": "="
        }
    };
}]); 
```

还有你的 HTML

```
<div ng-repeat="var in data">
    <foobar var="var"></foobar>
</div> 
```

现在 foobar 元素应该替换为您的模板。每个都有自己的范围。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-26T18:29:27.520

具体来说，ng-init 和 onload 表达式是在**父**作用域中计算的，而不是由 nginclude 创建的子作用域。因此，您`var`在父作用域上分配了两次值，这两次都发生在这些 ng-includes 内的内容被加载编译和评估之前。创建每个子作用域时，它都从父作用域继承，其中 var='B'。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-27T05:45:23.297

考虑你的局部变量 foo ，

然后你会像这样传递 foo ：

```
<ng-include src="'partials/foo-part.html'" onLoad="foo='bar'"></ng-include> 
```

为了获得更多的浏览器兼容性，您可以像这样传递它：

```
<div ng-include src="'partials/foo-part.html'" onLoad="foo='bar'"></div> 
```

你也可以使用`onInclude="foo='bar'"`代替`onLoad`

[plnkr.co/edit/GHRNyAMBKLvgtf3NFSRu?p=info](http://plnkr.co/edit/GHRNyAMBKLvgtf3NFSRu?p=info)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-11T01:27:58.117

不会为所有 ng-includes 调用相同的“onLoad”。最有可能的是，var 设置为 A，然后设置为 B。问题是，它在两个包含之间共享，因为它们在同一范围内。'var' 作为 angularJS 中的模型，是依赖于范围的。

为了使您的部分具有单独的值，它们必须各自具有自己的范围。最简单的方法是设置一个控制器或指令并将其分配给 ng-include 所在的 Dom 元素，并在该范围内设置您的值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-08T09:26:29.940

我遇到了同样的问题，我找到了一种方法来实现我想要的，当然它看起来不是很漂亮，但仍然。

我使用了 ng-repeat ，它将创建一个新的范围来包含两次具有不同值的相同模板，如下所示（虚拟示例）：

```
<script type="text/ng-template" id="mod-edito.html">
<div class="mod-edito__media">
    <img ng-src="{{ edito.cover.src }}" />
</div>
</script>

<div>
    <ng-include ng-repeat="edito in [edito_object]" src="'mod-edito.html'"></ng-include>
    ...
    <ng-include ng-repeat="edito in [edito_other]" src="'mod-edito.html'"></ng-include>
</div> 
```

这可以接受吗？大概吧。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-20T14:46:13.500

我一直在寻找替代方案，我想要一个 js 对象将一些参数发送到包含的部分中。[这是](http://jsfiddle.net/genuinefafa/s8x3fja5/)*@denis-pshenov 制作的[*进化*](http://jsfiddle.net/genuinefafa/s8x3fja5/)[版。](http://jsfiddle.net/genuinefafa/s8x3fja5/)您可以使用控制器来填充数据，也可以使用 ng-init。*

 *基本上，像这样的东西，

```
var myApp = angular.module('myApp',[]);

myApp.controller('Controller', function($scope) {
    $scope.ourData = [ { name : 'John', address : 'Paradise' } ];
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
<div ng-controller="Controller">
    <div ng-repeat="data in ourData" ng-include="'partial.html'"></div>

    <div ng-init="ourData2 = [ { name : 'Jack', address : 'Paradise' } ]" />
    <div ng-repeat="data in ourData2" ng-include="'partial.html'"></div>

</div>

<script type="text/ng-template" id="partial.html">
   <div>The name is {{ data.name }} and the address is {{ data.address }} </div>
</script>
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-10-06T15:51:56.840

有一种方法可以创建通用的可重用指令。

这是我的一位同事提出的（受[Knockout.js](http://knockoutjs.com/documentation/with-binding.html)启发）。

指示：

```
(function () {
    'use strict';

    angular
        .module('directives')
        .directive('ngWith', ngWith);

    function ngWith() {
        return {
            restrict: 'A',
            replace: true,
            scope: {
                model: '=',
                template: '@'
            },
            template: '<div data-ng-include="template"></div>',
        };
    }
})(); 
```

用法：

```
<div data-ng-with="" data-model="parentObj.childObj.whatEver" data-template='my-template.html'></div> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-10-29T16:01:27.993

请注意，如果您在 ng-repeat 中包含部分内容，您仍然可以访问父作用域的 $index。只需在部分中包含 {{$index}}。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-10-25T17:56:24.730

使用 onload 不是一个干净的解决方案，因为它会在全局范围内乱扔垃圾。如果你有更复杂的东西，它就会开始失败。

[使用新指令而不是 ng-include](http://tech.fongmun.com/post/131863914487/scoping-variables-in-ng-include-without-ng-repeat)是一种更简洁的解决方案。

理想的用法如下所示：

```
<div ng-include-template="partials/toBeIncluded.html" ng-include-variables="{ var: 'A' }"></div>
<div ng-include-template="partials/toBeIncluded.html" ng-include-variables="{ var: 'B' }"></div> 
```

该指令是：

```
.directive(
  'ngIncludeTemplate'
  () ->
    {
      templateUrl: (elem, attrs) -> attrs.ngIncludeTemplate
      restrict: 'A'
      scope: {
        'ngIncludeVariables': '&'
      }
      link: (scope, elem, attrs) ->
        vars = scope.ngIncludeVariables()
        for key, value of vars
          scope[key] = value
    }
) 
```

您可以看到该指令不使用全局范围。相反，它从 ng-include-variables 读取对象并将这些成员添加到它自己的本地范围内。

ng-include 不是那么可重用，因为它可以访问全局范围。这有点奇怪。

我希望这是你想要的；它干净而通用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-12-29T17:04:42.400

您可以参考特征单个值，例如`$scope.a = 'test'`和对象，`$scope.a = {a.test};`并使用不同的范围来定义可见性区域。

来自 ng-if 文档。

> 请注意，当使用 ngIf 删除元素时，它的作用域将被破坏，而当元素恢复时会创建一个新作用域。

Simpe 解决方案是`ng-if`将您的静态内容包含并定义到`ng-init`指令中。

```
<div ng-if="<any-true-expression>" ng-init="val='First'" ng-include="'html/common.html'"</div>

<div ng-if="<any-true-expression>" ng-init="val='Second'" ng-include="'html/common.html'"</div> 
```

在这种情况下，它将以不同的值显示，例如

```
{{val}} shows >>
First
Second 
```

此内容是静态的，因为 val 是对值的简单引用。

如果您想拥有依赖于一些常见范围值的动态可更改页面，您需要销毁并重新创建使用指令时创建的范围`ng-if`。像这样：

```
<div id="wrapper" ng-if="orders_client">
       <div id="client-orders" ng-init="orders = orders_client" ng-include="'html/pages/parts/orders-view.html'"></div>
</div> 
```

和

```
$scope.orders_client = null;
   /*recreate content table*/
     $timeout(function () {
        $rootScope.general.showPreloader = false;
        $scope.orders_client = $scope.baseData.clients[newClient];
     }, 500); 
```

在这种情况下，具有先前数据的范围将被销毁，并且将创建具有新数据的新范围。重新创建新范围需要**500ms**的时间。如果存在更好的捕获，请写。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-02-29T20:08:17.970

`ng-if=true`每次加载部分通过时，您都可以使用强制新范围`ng-include`。

你的代码看起来像

```
<div id="div1" ng-include src="partials/toBeIncluded.html onload="var='A'" ng-if="true">
<div id="div2" ng-include src="partials/toBeIncluded.html onload="var='B'" ng-if="true"> 
```

可以在这个[plunker找到一个例子](http://plnkr.co/edit/0tLf3jikJnlfghDENBzc?p=preview)

[此处](https://stackoverflow.com/a/32532872/7055815)引用相同想法的另一个答案

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2013-11-21T08:04:23.070

只需将每个 ng-include 放在自己`<div>`的下面，如下所示：

```
<div>
  <div id="div1" ng-include src="partials/toBeIncluded.html onload="var='A'"/>
</div>
<div>
  <div id="div2" ng-include src="partials/toBeIncluded.html onload="var='B'"/>
</div> 
```

然后，每个包含的 HTML 都将`var`在其自己的范围内拥有自己的 HTML。*

# javascript - Javascript替换表达式

> ID：13811949
> 
> 赞同：0
> 
> 时间：2012-12-11T00:57:59.547
> 
> 标签：javascript, regex

我正在尝试修复如何将用户名从 LMS（学习管理系统）拉入 HTML 页面。目前，名字和姓氏有两个单独的输入。用户想要添加他们的中间名，所以我们让他们将其添加到名字输入框中，如下所示：

名字：约翰·雷

姓名：Doe

我们将他们的名字拉入 HTML 页面的代码如下所示：

```
var strStudentName;

if (typeof opener != "undefined" && typeof opener.LMS_student_name != "undefined" && opener.LMS_student_name != null)
{
    strStudentName = opener.LMS_student_name;
}
else
{
    strStudentName = "the Student";
}

var objRegExp = /(\w+),(\w+)/;
var strReverseName = strStudentName.replace(objRegExp, "$2 $1"); 
```

不幸的是，这段代码最后显示了他们的中间名“John Doe **Ray** ”。我想把它读成“John **Ray** Doe”。如果我切换 $2 和 $1，它将显示“Doe John **Ray** ”无论我做什么，中间名总是最后！

这段代码的最初目的是把用户的名字放在第一位，因为 LMS 默认他们的名字是向后的，比如 (Doe, John)。

请帮忙！谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:03:17.460

你需要升级你的正则表达式：

```
var objRegExp = /(\w+),((\w+)(\s\w+))*/; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:04:26.130

根据您的输入数据，您可能不需要在第二个捕获组中指定单词字符 - 如果您的输入是独立的，那么`/(\w+),(.+)/;`将起作用。

但是，如果您在名称字符串后面有更多字符，我们将需要更多关于这些字符是什么的信息，以便正确指定正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T01:06:15.347

那是因为第二个`(\w+)`不会捕获空格和中间名。

```
var objRegExp = /(\w+),(\w+)(?:\s(\w+))?/; 
```

`$3`会给你中间名。

# php - 如何从 PHP 运行 Ant

> ID：13811951
> 
> 赞同：1
> 
> 时间：2012-12-11T00:58:13.043
> 
> 标签：php, ant, batch-file

我正在执行一个运行 ant 命令的批处理文件。批处理文件是通过 PHP 执行的，我使用的是 XAMPP。虽然当我双击批处理文件时，当我通过 PHP 执行它时它可以工作，但它根本无法识别 ant 组件。

批处理文件基本上如下所示

```
cd C:\Users\Me\File
ant release 
```

我正在使用 PHP 函数 exec() 运行它

有人可以告诉我问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:01:37.097

您的问题可能是这条路径：

```
cd C:\Users\Me\File 
```

PHP 进程很可能没有访问您的用户文件夹的权限。

# ruby-on-rails - 在 Ruby on Rails 应用程序中保存到 db 之前组合两个字段的更好方法是什么？

> ID：13811954
> 
> 赞同：0
> 
> 时间：2012-12-11T00:58:41.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, simple-form

我必须为某事选择日期和时间。我正在使用`simple_form`, 和 twitter 引导程序`datepicker`和`timepicker`宝石。

首先，我无法自定义表单生成器以使一切正常工作，所以在我看来，我有硬编码：

```
<div class="control-group string optional">
          <label class="string optional control-label" for="publish_day">Publish Date</label>
          <div class="controls">
            <div class="input-append date" id="publish_date" data-date="<%= @press_release.published_day %>" data-date-format="dd-mm-yyyy">
              <input class="span2" type="text" name="press_release[publish_day]" value="<%= @press_release.published_day %>" readonly>
              <span class="add-on"><i class="icon-calendar"></i></span>
            </div>
          </div>
        </div>

       <div class="control-group string optional">
          <label class="string optional control-label" for="publish_time">Publish Time</label>
          <div class="controls">  
            <div class="input-append bootstrap-timepicker-component date">
              <input class="span2" id="publish_time" name="press_release[publish_time]" type="text" readonly>
              <span class="add-on"><i class="icon-time"></i></span>
            </div>
          </div>
        </div> 
```

这是蹩脚的，可能不是“正确的”，但我不知道如何自定义 simple_form 足以让它为我做到这一点。

其次，要组合字段以添加到数据库中，这就是我在控制器中所做的事情：

```
params[:press_release][:publish_date] = Time.parse("#{params[:press_release][:publish_day]} #{params[:press_release][:publish_time]}") 
```

这似乎真的很hacky，但我想不出另一种方法来做到这一点。从两个表单字段中获取数据然后合并并格式化它的更好方法是什么？我猜这是 before_save 的东西，但我不知道如何将它传递给以`params`这种方式调用的方法。

任何建议表示赞赏。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:54:40.733

您可以进行的一项改进是将解析/格式化移动到`PressRelease`模型中。

```
attr_accessor :publish_day, :publish_time

before_validate do
  self.publish_date = Time.parse([self.publish_day, self.publish_time].join(" ")) if self.publish_day.present?
end 
```

这样你就可以将`params`值的重新分配保留在控制器之外*（你是对的，它看起来确实很“hacky”）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:01:43.437

我的回答是回到您的视图并尝试使其与“rails 字段”一起使用。我不会担心控制器并将两个字段连接在一起，我实际上认为这种方法是一个很好的解决方案。

所以我会查看表格并尝试获取日期和时间字段'railsy'

这是我的一个应用程序中的字段，该字段上也有一个日期选择器：

```
 = f.text_field :content_date, id: 'datepicker', size: 10 
```

如果您对这种方法有错误，请发布您遇到的特定错误以及代码本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-09T19:33:04.800

我没有代表发表评论，所以我会在这里发帖。

```
attr_accessor :publish_day, :publish_time

before_validation do
  self.publish_date = Time.parse([self.publish_day, self.publish_time].join(" ")) if self.publish_day.present?
end 
```

# windows - CSS 在 IE 7 和 IE 8 中不起作用 .. 特别是 ul li

> ID：13811955
> 
> 赞同：1
> 
> 时间：2012-12-11T00:59:07.297
> 
> 标签：windows, internet-explorer-8, internet-explorer-7, html-lists

这是我的 HTML。您可以查看更多 www.tuvid.ee 。我最大的问题是左边的菜单在IE中不一样。第二个问题是，当我调整页面大小时，内容会随之移动。也许有人可以告诉我位置元素有什么问题。

```
<aside>
    <nav>
        <ul id="navlist">
            <li>
                <a href="eessona.php" id="homenav"><strong>Kui tuvid
                kadusid</strong></a>
            </li>

            <li>
                <a href="kesnadolid.php" id="kesnav"><strong>Kes nad
                olid?</strong></a>
            </li>

            <li>
                <a href="arhiivipildid2.php" id=
                "arhnav"><strong>Arhiivipildid</strong></a>
            </li>

            <li>
                <a href="videod.php" id="vidnav"><strong>Videod ja
                lingid</strong></a>
            </li>

            <li>
                <a href="sofiblogi.php" id="sofnav"><strong>Sofi
                blogi</strong></a>
            </li>

            <li>
                <a href="sofieestis.php" id="eestnav"><strong>Sofi
                Eestis</strong></a>
            </li>
        </ul>
    </nav>
</aside> 
```

这是我的 CSS：

```
body#home a#homenav,
body#kesnadolid a#kesnav,
body#arhiivipildid a#arhnav,
body#videod a#vidnav, 
body#sofiblogi a#sofnav,
body#sofieestis a#eestnav {
    color: #fff;
    background: #930;
}

aside nav {
    width: 300px;
    margin: 50px 50px 0;
    border-bottom: 0px;
    border: 3px solid white;
}

html>body aside nav {
    width: 300px;
}

aside nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

aside nav li {
    border-bottom: 3px solid white;
}

aside nav a {
    display: block;
    background: #808080;
    color: #fff;
    padding: 12px;
    font-size: 13px;
    text-decoration: none;
}

html>body aside nav a {
    display: block;
    background: #808080;
    color: #fff;
    padding: 12px;
    font-size: 13px;
    text-decoration: none;
}

aside nav strong {
    text-transform: uppercase;
    font: normal 23px/normal Blocksta,Helvetica,Arial,sans-serif;
}

aside nav li ul {
    border-top: 4px solid white;
    border-bottom: 4px solid white;
    margin-left: 70px;
}

aside nav li li {
    border: 0;
}

.main nav ul {
    margin: 0;
    padding: 0;
    padding-top: 10px;
}

.main nav ul li {
    float: left;
    margin-right: 20px;
}

.main nav ul li   
              p {
    display: none;
}

aside nav li a:link {
    background: #808080;
    text-decoration: none;
}      /* unvisited link */

aside nav li a:visited {
    text-decoration: none;
    background: #808080;
}  /* visited link */

aside nav li a:hover {
    text-decoration: none;
    background: #666;
}  /* mouse over link */

aside nav li a:active {
    text-decoration: none;
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:02:30.947

Internet Explorer 7 和 8 是较旧的浏览器，因此它们不支持现代 HTML 中提供的新元素。您可以通过参考[HTML5 Shiv来](https://github.com/aFarkas/html5shiv)*教*他们如何操作。

在您的`<meta>`标签之后添加以下内容`<head>`：

```
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

这似乎可以立即解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:06:38.450

除此之外，还有一个 IE 7 和 8 无法理解的 HTML5 元素。

为什么不制作两个 div：

```
<div id="a" class="mycolumn">Aside</div>
<div id="b" class="mycolumn"><ul><li>My list</li></ul></div> 
```

CSS .mycolumn{ 浮动：左}

或者你可以试试现代化器[http://modernizr.github.com/Modernizr/test/](http://modernizr.github.com/Modernizr/test/)

# php - PHP 使用 urlencode 导致页面未找到错误

> ID：13811957
> 
> 赞同：1
> 
> 时间：2012-12-11T00:59:14.680
> 
> 标签：php, url, urlencode, encode

我遇到的问题可能（希望）很容易解决，但我只是卡住了。

当我使用 urlencode（或 rawurlencode）函数时，它不会找到我正在发送的脚本。

所以这很好用：

```
$data["text"] .= "<a href='index.php?load=results&reg=".$row["region"]."'>".$row["region"]."</a><br/>"; 
```

它会带我到正确的页面：

**index.php?load=results®=CRO**

但是我正在做这项工作的人正在将她的“&”符号替换为 (R) 注册符号，而她却找不到一个页面。不幸的是，我无法在该办公室的任何其他计算机上复制此内容

所以当我改变代码来阅读

```
$data["text"] .= "<a href='".urlencode("index.php?load=results&reg=".$row["region"])."'>".$row["region"]."</a><br/>"; 
```

它试图把我带到这个页面

**index.php%3Fload%3Dresults%26reg%3DCRO**

但它给了我以下页面未找到错误：

***在此服务器上未找到请求的 URL index.php?load=results®=CRO。***

这真的很奇怪，因为请求的 URL 与解决顶部问题的 URL 完全相同。我知道我需要在某个阶段运行 urldecode（或 rawurldecode），但如果它甚至没有找到要加载的脚本，我无论如何都无法运行该函数......

编辑：更多细节 - 我正在使用 TextWranger 在 Mac 上编码。该文件使用带有 Unix (LF) 行结尾的 utf8 编码。本地服务器使用 MAMP，实时服务器是基于 Windows 的机器，但我不确定是否有任何配置设置会有所帮助，因为我刚从这里开始。输出 HTML 使用 UTF-8 编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:01:59.203

以下是你如何使用它：

```
$data["text"] .= "<a href='index.php?load=results&reg=".urlencode($row["region"])."'>".$row["region"]."</a><br/>"; 
```

您正在做的是对参数的值进行urlencoding，而不是整个查询。

所以基本上：

```
$data = "index.php?key=".urlencode("hello world value");
// will result in:
"index.php?key=hello%20world%20value" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T01:59:00.930

根据[HTML 4.01 规范](http://www.w3.org/TR/html401/appendix/notes.html#non-ascii-chars)：

> 尽管 URI 不包含非 ASCII 值（参见 [URI]，第 2.1 节），但作者有时会在期望 URI 的属性值中指定它们（即，在 DTD 中用 %URI; 定义）。例如，以下 href 值是非法的：

所以本质上你**不应该在你的 URI 中使用非 ASCII 字符**，因为不同的用户代理会以不同的方式处理它们。

例如，用户代理可能决定使用文档的字符集编码，或者它可能会采用 html-entity 编码。这可能是您的用户提到他们所经历的。因此，最好的办法是通过对 URL 的整个 URI 部分进行 urlencoding来确保始终在标记的`href`属性中提供 ASCII 字符。`a`

如果您在运行中组装此 URL，那么 PHP 中的一个可以帮助您处理整个考验的函数是[http_build_query](http://php.net/http-build-query)，它为您组合查询字符串并正确地对其进行 url 编码。

```
$row["region"] = "CRO";
$query = array(
                  "load" => "results",
                  "reg"  => $row["region"],
              );
$query = http_build_query($query);

echo $URL = "index.php?" . $query; // index.php?load=results&reg=CRO 
```

现在你可以使用

```
echo "<a href=\"$URL\">{$row['region']}</a>"; 
```

你得到...

```
<a href="index.php?load=results&reg=CRO">CRO</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T01:23:46.523

问号用作分隔符，不是查询字符串的一部分。

你不能编码字符“？” 特点 ”？” 不是查询字符串的一部分。

当然，您可以自由编码查询字符串的任何部分

尝试：

```
<?php
echo "<a href='get.php?".urlencode("load=results&reg=".urlencode($row["region"])."'>".$row["region"]."</a><br/>";
var_dump($_GET);
?> 
```

# asp.net-mvc-3 - MVC 3：从视图中在不同的控制器中渲染动作

> ID：13811958
> 
> 赞同：0
> 
> 时间：2012-12-11T00:59:21.060
> 
> 标签：asp.net-mvc-3

我一定遗漏了一些明显的东西。我在控制器 B 中有一个视图 A，它需要在控制器 Z 中调用和呈现操作方法 Y。

我应该在视图 A 中做这样的事情吗？我在 VS 中遇到了关于它如何无法解决操作“/Z/Y”的错误

```
@Html.RenderAction("/Z/Y", new ModelUsedInActionMethodY()) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T01:09:56.620

你需要使用：

```
@Html.RenderAction("Y", "Z") 
```

这将路由`Y`到`ZController`. 有关. [_](http://msdn.microsoft.com/en-us/library/ee728607%28v=vs.98%29.aspx) _`Html.RenderAction()`

# cocos2d-iphone - b2Body 沉入静态体

> ID：13811959
> 
> 赞同：0
> 
> 时间：2012-12-11T00:59:22.450
> 
> 标签：cocos2d-iphone, box2d, box2d-iphone

我有 2 个静态机构，一个在另一个之上。
当我将顶部切换为动态时，它会在恢复之前陷入静态一秒钟。

```
_boxBody->SetType(b2_dynamicBody);
_boxBody->SetAwake(true); 
```

为什么会这样？我该如何预防呢？很烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:52:46.353

这可能是因为静态物体不会碰撞，所以它们之间没有接触，直到一个变成动态的。不幸的是，建立联系需要一个时间步，在那个时间步内，重力也有机会起作用。

您可以通过在第一步将动态体的重力比例设为零来避免这种情况，但我认为更好的方法是在步进之前在动态体的固定装置上调用 Refilter。

```
for (b2Fixture* f = body->GetFixtureList(); f; f = f->GetNext())
    f->Refilter(); 
```

（我自己实际上并没有尝试过，但我认为这就是 Refilter 函数的用途。）

# git - 当没有什么要修改的时候，为什么 git amend 不警告你？

> ID：13811962
> 
> 赞同：3
> 
> 时间：2012-12-11T00:59:29.423
> 
> 标签：git, git-commit, git-amend

我经常犯的错误是在提交后立即对文件进行更改，然后运行`git commit --amend`然后快速`git push -f origin master`

显然，问题是我从来没有跑过`git add foo.md`。所以我的修改实际上并没有修改我提交的任何代码。

问题是：为什么 git 在修改没有更改的提交时不警告您？更好的是，为什么它甚至可以成功完成？它只是在更改给定提交的时间戳时表现得像“触摸”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T02:45:10.713

提交者日期 ( `%ci`) 不断被重置，即使提交*作者*日期 ( `%ai`) 保持不变：
例如，如果我在 Git 存储库上提交 --amend -no-edit 最后一次提交，则作者日期保持不变，但我刚刚创建了一个*新*的提交：用相同的内容替换旧的提交，但提交日期*不同：*

```
P:\git\git>git show -s --format="%ci" e0d6576639261beefb40afa52696d02f16c490ed
2012-12-11 03:42:23 +0100  <== just now

P:\git\git>git show -s --format="%ai" e0d6576639261beefb40afa52696d02f16c490ed
2012-12-07 14:18:55 -0800  <== original date when the author did commit 
```

所以任何修改都会导致*不同*的SHA1。

来自[专业书](http://git-scm.com/book/ch2-3.html)：

> *   作者是最初撰写作品的人，
> *   而提交者是最后应用该工作的人。

A`commit --amend`将始终重新创建一个新的提交，即使只是因为提交者日期正在更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:21:12.637

修改对于仅更改提交消息或提交的其他详细信息很有用。因此，在不更改工作目录的情况下运行它很有意义。为了防止将来出现此类问题，我建议使用

```
git commit -a --amend 
```

# java - 扩展类的 Java 泛型未检查警告

> ID：13811964
> 
> 赞同：1
> 
> 时间：2012-12-11T00:59:54.307
> 
> 标签：java, generics

我有以下代码：

```
public class Foo {

    interface Coo<T> {
        public T cool();
    }

    abstract class Bar<T extends Bar<T>> implements Coo<T>  {

        @SuppressWarnings("unchecked")
        T doSomething() {
            return (T) this;
        }

        @SuppressWarnings("unchecked")
        @Override
        public T cool() {
            return (T) this;
        }

    }

    class FooBar extends Bar<FooBar> {
        @Override
        public FooBar cool() {
            return super.cool();
        }

    }
} 
```

为什么强制转换为（this）对象类型不安全？当 Bar 实现 Coo 时，返回的cool 必须是 T 类型，这不是泛型的说法，它扩展了 Bar 或其子类吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T01:02:42.717

因为`this`in`Bar`有类型`Bar<T extends Bar<T>>`但没有`T`，编译器会为`Bar#doSomething`. 以下不会产生任何警告：

```
abstract class Bar<T extends Bar<T>> {

    Bar<T> doSomething() {
        return this;
    }

} 
```

的主体`Bar#cool`期望`this`是其子类型，`T`但事实并非如此。在`Bar#cool`中，`this`有类型`Bar<T extends Bar<T>>`并且是`Coo<T>`但不是的子类型`T`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T03:52:40.427

`T`扩展`Bar<T>`，但`Bar<T>`（的类型`this`）不扩展`T`。

想象

```
class A extends Bar<A> { ... }
class B extends Bar<A> { ... } 
```

然后该方法被继承为：

```
class B {
    A doSomething() {
        return (A) this;
    }
} 
```

这显然是不对的。

用泛型做你想做的事是不可能的。这是人们之间的一个很大的误解。他们认为递归边界将允许您进行自我类型。但是递归边界在 Java 中几乎没有用处。99% 的地方，你看到人们写的地方，`interface Bar<T extends Bar<T>>`写出来就和`interface Bar<T>`.

# php - 与 MySQL 插入命令相反

> ID：13811970
> 
> 赞同：1
> 
> 时间：2012-12-11T01:01:01.760
> 
> 标签：php, html, mysql

MySQL`INSERT`命令的反义词是什么？

我想知道如何在没有管理员的情况下从表中删除用户。我到处搜索，但根本找不到。

这是我的 PHP 文件：

```
<?php
$username = $_POST["username"];
$password = $_POST["password"];
$passcheck = $_POST["passcheck"];
$email = $_POST["email"];
if ( $username && $password && $passcheck && $email ) {
} else
    echo "Please enter all fields";
?>
...
<form action="register.php" method="post">
    <input type="text" name="username"><br>
    <input type="password" name="password"><br>
    <input type="password" name="passcheck"><br>
    <input type="text" name="email"><br>
    <input type="submit" value="Register">
</form>
<?php
$username = $_POST["username"];
$password = $_POST["password"];
$passcheck = $_POST["passcheck"];
$email = $_POST["email"];
if ( $username && $password && $passcheck && $email ) {
    $connect = mysql_connect( "localhost", "root", "root" ) or die("Couldn't connect!");
    mysql_select_db("login") or die("Couldn't find database!");
    $query = mysql_query( "SELECT * FROM users WHERE username='$username'" );
    $numrows = mysql_num_rows( $query );
        if ( $numrows != 0 ) {
        echo "Username taken";
    } else
        if ( $password == $passcheck ) {
            mysql_query("INSERT INTO users (username, password, email)
                VALUES ('$username','$password','$email')");
        } else
            echo "Passwords don't match";
} else
    echo "Please enter all fields";
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T01:03:14.740

MySQL 删除语句是：

从 table_name 中删除 some_column = some_value;

看看这里：[http ://www.w3schools.com/php/php_mysql_delete.asp](http://www.w3schools.com/php/php_mysql_delete.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T01:02:56.130

从 some_table 中删除 some_value=X;

# java - 为什么这个数组为空？

> ID：13811972
> 
> 赞同：-1
> 
> 时间：2012-12-11T01:01:07.550
> 
> 标签：java, arrays

为什么我的 petArray 为空？myArray 数组很好，但不知道为什么 petArray 为空

**这是我的 .txt 文件：**

```
112|C|Fluffy|4/1/2011|Tabby|Gray|M|Y|N|N
332|D|Phydeaux|6/3/2009|Collie|White/Tan|M|N|N|N
237|C|Snagglepuss|5/13/2010|Siamese|Sable|M|Y|Y|N
165|C|Sylvester|1/12/2008|Tuxedo|Black/White|F|N|N|N
113|C|Fluffy|499/1/2011|Tabby|Gray|M|Y|N|N
333|X|Phydeaux|6/3/2009|Collie|White/Tan|M|N|N|N
238|C|Snagglepuss|5/13/2010|Siamese|Sable|M|Y|Y|N
166|C|Sylvester|1/12/2008|Tuxedo|Black/White|F|N|G|N
114|C|Fluffy|4/1/2011|Tabby|Gray|M|Y|N|N
334|D|12/4/2005|Phydeaux|Collie|White/Tan|M|N|N|N
239|C|Snagglepuss|5/13/2010|Siamese|Sable|M|Y|Y|N
167|P|Sylvester|1/12/2008|Tuxedo|Black/White|F|N|E|N
115|C|Fluffy|4/1/2011|Tabby|Gray|M|Y|
335|D|Phydeaux|6/3/2009|Collie|White/Tan|M|N|N|N
240|C|Snagglepuss|5/13/2010|Siamese|Sable|M|Y|Y|N
168|C|Sylvester|1/12/20085|Tuxedo|Black/White|F|N|N|N 
```

**PetGUI.java：**

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.util.*;
import java.awt.TextArea;
import java.util.LinkedList;
import javax.swing.*;

import javax.swing.JFrame;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
/*
* Makes a new JFrame thats makes two textareas, fills in the textareas
*  from the array and linkedlist.
*/
public class PetGUI extends JFrame{
static int number;
static String[] animalArray;
static TextArea north;
static TextArea south;
public PetGUI(TextFileInput tfi){

    int lines = 0;
    TextFileInput tfil = new TextFileInput("project4.txt");
    String rlines = tfil.readLine();
    while(rlines != null){
        lines++;
        rlines = tfil.readLine();
    }
    tfil.close();

    String [] myArray = new String[100];
    number = lines;
    animalArray = myArray;
    this.setSize(400,400);
    this.setLocation(200, 200);
    this.setTitle("Adoptable Pets");
    createFileMenu();
    createEditMenu();

    TextArea north = new TextArea(9,20);
    TextArea south = new TextArea(9,20);
    this.getContentPane().add(north,BorderLayout.NORTH);

    this.getContentPane().add(south,BorderLayout.SOUTH);
    north.setEditable(false);
    south.setEditable(false);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setVisible(true);

    Cat c;
    Dogs d;

    AdoptablePet [] petArray = new AdoptablePet[lines];
    for(int i = 0; i < lines; i++){
        myArray[i] = tfi.readLine();;
    }
    tfi.close();

    for(int i = 0; i < lines; i++){
        if(myArray[i].charAt(4) == 'C'){
            String[] r = myArray[i].split("\\|");
            if(r.length != 9){
            try{

                    throw new IllegalPetInput("Not the right length of input");
            }
            catch(IllegalPetInput a){

            }
            }
            else
                try{
                c = new Cat(Integer.parseInt(r[0]),r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],Boolean.parseBoolean(r[9]));
                petArray[i] = c;
                }
                catch(AdoptablePetException a){
                    System.out.println("Wrong information for the cat.");
                }
        }

        if(myArray[i].charAt(4) == 'D'){
            String[] r = myArray[i].split("\\|");
            if(r.length != 9){
            try{

                    throw new IllegalPetInput("Not the right length of input");
            }
            catch(IllegalPetInput a){

            }
            }
            else
                try{
                d = new Dogs(Integer.parseInt(r[0]),r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],Boolean.parseBoolean(r[9]));
                petArray[i] = d;

                }
            catch(AdoptablePetException a){
                System.out.println("Wrong information for the cat.");
            }
        }
    }

    LinkedList l = new LinkedList();

    for(int i = 0; i < lines; i++)
        System.out.println(myArray[i]);
    System.out.println();
    for(int i = 0; i < lines; i++)
        System.out.println(petArray[i]);

  //Appends the north side of the texarea with all of the lines    
for(int i = 0; i < l.size(); i++)
    north.append((String) l.get(i));

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:07:21.083

我在您的数据中计算了 10 个字段，您的检查说应该只有 9 个，然后抛出一个异常，该异常被捕获并丢弃。

```
if(r.length != 9)
{
     try
     {
          throw new IllegalPetInput("Not the right length of input");
     }
     catch(IllegalPetInput a)
     {
         // you're throwing this away!  bad form!
     }
 } 
```

稍后，您将查看 10 个字段的数据！

```
c = new Cat(Integer.parseInt(r[0]),r[1],r[2],r[3],
    r[4],r[5],r[6],r[7],r[8], 
    Boolean.parseBoolean(r[9])); // field number 10! 
```

在计算行数后，您还关闭了输入流：

```
TextFileInput tfil = new TextFileInput("project4.txt");
String rlines = tfil.readLine();
while(rlines != null){
    lines++;
    rlines = tfil.readLine();
}
tfil.close();  // stream closed!  any reads after this should hypothetically have failed! 
```

你永远不会重新打开它，所以没有其他任何东西可以工作。

摆脱数组并使用 ArrayList，不要一次读取文件以查看您将提前拥有多少行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:09:55.393

我怀疑问题是，您已经阅读了文件以计算行数。再次将它们存储在数组中，您正在阅读它们。但是当您读取行数时，光标已经在文件末尾。现在，当您这次读取字符串时，`readline()`返回 null，这可能是您的数组为 null 的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T01:10:58.300

因为 r.length 总是 10 而不是 9，就像你的 if 语句条件一样。你说

```
if(r.length != 9){
            try{

                    throw new IllegalPetInput("Not the right length of input");
            }
            catch(IllegalPetInput a){

            } 
```

这样如果语句的计算结果为真，就会抛出异常，然后立即捕获（你为什么这样做？）

# sql - 如何在 Sequel 中创建 SQL 函数？

> ID：13811975
> 
> 赞同：3
> 
> 时间：2012-12-11T01:01:19.660
> 
> 标签：sql, ruby, function, sequel

我有一个包含一堆 SQL 脚本的项目，我正在将该项目迁移到[Sequel](http://sequel.rubyforge.org/)中。

在旧脚本中，我定义了相当多的 SQL 函数来构建我的查询。我应该如何创建这些函数以便我可以从 Sequel 访问它们？

例如我有一个 SQL 函数

```
CREATE FUNCTION my_func(...) RETURNS integer AS $$
  SELECT ...
$$ LANGUAGE SQL; 
```

我应该将上述文本括在一个字符串中并调用以下内容吗？

```
DB.run("CREATE FUNCTION my_func(...) RETURNS integer AS $$ 
          SELECT ... 
        $$ LANGUAGE SQL;") 
```

似乎可能有更好的方法。

我可以使用 Sequel 将函数本身重写为 ruby​​ 函数，但我不相信这会完成我想要的，因为我想要运行在`WHERE`子句等中使用 SQL 查询的查询。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:56:58.690

Sequel 实际上支持创建 PostgreSQL 函数：

```
DB.create_function('myfunc', 'SELECT ...', :args=>[:integer, :text], :returns=>:integer) 
```

但是，我很遗憾添加此内容，并且可能会在下一个主要版本中将其移至扩展中。像`DB.run`这样用于数据库特定的东西是去 IMO 的方式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-31T18:44:42.340

正如您在问题中标记了 ruby​​ 一样，要存储您的 SQL 调用，您可以使用这个非常有用的 GEM：

[https://github.com/sufleR/sql_query](https://github.com/sufleR/sql_query)

# c# - 有没有办法在不使用 Thread.Sleep 的情况下延迟 ASP.NET MVC 4 中的 HTTP 响应？

> ID：13811978
> 
> 赞同：3
> 
> 时间：2012-12-11T01:01:45.630
> 
> 标签：c#, asp.net

我想延迟我的网站身份验证请求的响应，以便服务器在收到请求时的特定秒偏移处开始响应。

例如，如果用户在 进行身份验证`04:00:00`，我希望响应返回到`04:00:05`，而不是迟早。如果代码不可能在最后期限之前完成，我希望它会导致错误。

这必须在服务器端完成，我想避免使用`Thread.Sleep`. 不过，我在想可能有一种方法可以使用异步控制器并在请求的延续中使用 Thread.Sleep

这里有没有人面临过类似的挑战，你的解决方案是什么？

你们中的任何人都可以想出一种方法来做到这一点，同时避免`Thread.Sleep`和保持响应能力吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T01:34:25.423

您可以使用MVC 4 中[的 Async 支持](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)（如果您使用的是 MVC 3，则可以使用 AsyncController）

```
public async Task<ActionResult> GizmosAsync()
{
    var gizmoService = new GizmoService();
    return View("Gizmos", await gizmoService.GetGizmosAsync());
} 
```

await 中的方法然后可以使用它需要的时间，包括 Thread.Sleep。

这样，您就不会阻止 ASP.net 处理其他请求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T01:27:23.280

您可以使用自定义的 ActionFilters。

*   在 OnActionExecuting 方法中记录请求到达的时间。
*   然后在 OnResultExecuted 方法上检查结果。如果它是一个有效的响应让它通过，如果它是一个未经授权的响应延迟它使用 Thread.Sleep 并根据记录的开始时间使用所需的延迟。

只要确保您的过滤器在授权过滤器（[Authorize] ？）之前运行，或者如果您使用全局过滤器而不是属性，则在它之前注册。

这样，延迟对授权用户没有影响，我认为这是您不想使用 Thread.Sleep 的原因。请注意，默认情况下 Thread.Sleep 不是很准确（大约 20 毫秒），但客户端的网络延迟应该会掩盖这一点。

# java - 仅列出当前项目的 Java 类路径中的项目

> ID：13811981
> 
> 赞同：1
> 
> 时间：2012-12-11T01:01:55.443
> 
> 标签：java, classpath

我有一个带有大类路径的 Java 项目 - 许多项目是从不同的 .jar 文件导入的，这些文件已作为依赖项添加（通过 Maven）。

我正在寻找一种编程方式来列出来自当前项目的类路径上的所有项目，即**排除**来自其他库和 Java 运行时环境本身的所有导入的类路径项目。

我需要在运行时执行此操作，即它应该在实际的当前类路径下工作。

有没有一种好方法可以做到这一点，如果有，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:08:50.737

除非您创建自己的元数据，否则无法做到这一点。

对于 JVM，类路径中的项目之间没有区别。罐子是罐子是罐子。

您可以使用[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/list-mojo.html)写出本地依赖项列表，而不是传递，并将其写入文件，然后将该文件放入您的应用程序中。

# python - 你如何将列表分成相等的部分？

> ID：13811984
> 
> 赞同：2
> 
> 时间：2012-12-11T01:01:59.360
> 
> 标签：python

> **可能重复：**
> [如何在 Python 中将列表拆分为大小均匀的块？](https://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks-in-python)

我有一个`list`例如：

```
L = [1,2,3,4,5,6,7,8] 
```

假设我想将其`L`分为 3 个部分，例如：

```
result = [[1,2,3],[4,5,6],[7,8]] 
```

如果不使用更高的编程方法（仅使用简单的 Python 方法），我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:05:15.657

您可以尝试以下方法：

```
In [13]: l = [1,2,3,4,5,6,7,8]

In [14]: result = [l[i:i+3] for i in xrange(0, len(l), 3)]

In [15]: result
Out[15]: [[1, 2, 3], [4, 5, 6], [7, 8]] 
```

这会从列表中拉出长度为 的切片`n`，其中`n`是您添加的数字，`i`也是您的`range`. 正如@Eric 指出的那样，这将列表分成三个块，但不是三个块。为了将其分成三个块，您可以执行以下操作：

```
In [21]: l = [1,2,3,4,5,6,7,8]

In [22]: chunk = int(round(len(l)/3.0))

In [23]: result = [l[i:i+chunk] for i in range(0,len(l),chunk)]

In [24]: result
Out[24]: [[1, 2, 3], [4, 5, 6], [7, 8]]

In [25]: l = [1,2,3,4,5]

In [26]: chunk = int(round(len(l)/3.0))

In [27]: result = [l[i:i+chunk] for i in range(0,len(l),chunk)]

In [28]: result
Out[28]: [[1, 2], [3, 4], [5]] 
```

听起来你有一定的限制，这也可以写在一个`for`循环中（尽管这实际上比上面的有更多的函数调用:)）：

```
In [17]: result = []

In [18]: for i in xrange(0, len(l), 3):
   ....:     result.append(l[i:i+3])
   ....:     
   ....:     

In [19]: result
Out[19]: [[1, 2, 3], [4, 5, 6], [7, 8]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T01:17:36.783

RocketDonkey的回答应该没问题。这是一个没有列表理解的：

```
l = [1,2,3,4,5,6,7,8]
result = {}
idx = 0
for i in l:
    group = idx/3
    if group not in result:
        result[group] = []
    result[group].append(i)
    idx += 1
result.values()

>>> [[1, 2, 3], [4, 5, 6], [7, 8]] 
```

`enumerate()`可用于删除手动 idx 增量。

# imagick - 如何使用 Imagick 创建 pdf 的缩略图

> ID：13811986
> 
> 赞同：1
> 
> 时间：2012-12-11T01:02:08.893
> 
> 标签：imagick

我想创建用户在我的网站上上传的 pdf 文件的标题。所以我安装了 Imagick，是否有任何教程或最佳实践知道如何从此 pdf 创建图像缩略图？

顺便说一句，我试过：

```
 $img = new Imagick($_url);
        $img->setiteratorindex(0);
        $img->setCompression(imagick::COMPRESSION_LZW);
        $img->setCompressionQuality(90); 
```

而且我必须遇到安装问题，因为无法识别对象 Imagick，如何配置 ImageMagick 以使其适合我的 php 配置？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-11T11:20:35.303

如果安装了 imagick，请检查 phpinfo()。

否则使用 apt-get install php5-imagick 安装（适用于 Linux）。

[你可以在Mikko 的博客](http://valokuva.org/?p=7)上找到一些很好的教程

# python - 如何在 Python 中创建矢量场并将其应用于图像？

> ID：13811987
> 
> 赞同：1
> 
> 时间：2012-12-11T01:02:29.753
> 
> 标签：python, image-processing

我有一组向量，我想用它们创建一个具有特定分辨率的向量场。我的向量由它们的 x,y 位置以及它们的长度和角度定义。

```
import numpy as np
import scipy as sp
from matplotlib.mlab import griddata
import pylab as pl

theta_array = [3,5,7,1]
length_array = [4,6,7,8]
x_array = [4,7,8,9]
y_array = [7,3,5,8]

x = np.linspace(1,10,10)
y = np.linspace(1,10,10)

new_theta = griddata(x_array,y_array,theta_array,x,y,interp='linear')
new_length = griddata(x_array,y_array,length_array,x,y,interp='linear') 
```

我想`(10x10)`从这些向量的插值中创建一个向量场。以上是我`griddata`从 matplotlib 中使用的。

虽然它返回一个具有内插值的 10x10 数组，但它只会`--`为其他数组元素创建一个数据和值的孤岛。

```
masked_array(data =
 [[-- -- -- -- -- -- -- -- -- --]
 [-- -- -- -- -- -- -- -- -- --]
 [-- -- -- -- -- -- 5.0 -- -- --]
 [-- -- -- -- -- -- 5.4 -- -- --]
 [-- -- -- -- -- 4.6 5.8 7.0 -- --]
 [-- -- -- -- 3.8 5.0 5.0 5.0 -- --]
 [-- -- -- 3.0 3.0 3.0 3.0 3.0 -- --]
 [-- -- -- -- -- -- -- -- 1.0 --]
 [-- -- -- -- -- -- -- -- -- --]
 [-- -- -- -- -- -- -- -- -- --]],
             mask =
 [[ True  True  True  True  True  True  True  True  True  True]
 [ True  True  True  True  True  True  True  True  True  True]
 [ True  True  True  True  True  True False  True  True  True]
 [ True  True  True  True  True  True False  True  True  True]
 [ True  True  True  True  True False False False  True  True]
 [ True  True  True  True False False False False  True  True]
 [ True  True  True False False False False False  True  True]
 [ True  True  True  True  True  True  True  True False  True]
 [ True  True  True  True  True  True  True  True  True  True]
 [ True  True  True  True  True  True  True  True  True  True]],
       fill_value = 1e+20) 
```

我本来希望所有元素都有值，随着它远离具有值的元素，它的值会逐渐消失/减少。很像这样：

![旋转矢量场](../Images/5549b0b9bef141ab11464df3eeffee6b.png)

对此的后续问题是如何将其应用于另一个图像并使用矢量场对其进行变形？

非常感谢！

# dialog - 如何在 BroadcastReceiver 上显示有关当前可见活动的对话框？

> ID：13811989
> 
> 赞同：0
> 
> 时间：2012-12-11T01:02:32.093
> 
> 标签：dialog, broadcastreceiver

我有一个主要活动（OceanintelligenceActivity）。在此活动中，我为推送通知注册了设备，还注册了一个接收器，该接收器显示一个对话框并根据从我的服务器发送的信息启动正确的活动。这是我用来注册设备和接收器的代码：

```
protected void gcmRegistration(){

    PMApplication thisApp = PMApplication.getInstance();
    AppDelegate delegate = thisApp.getAppDelegate();
    final Context context = this;
    // Make sure the device has the proper dependencies.
    GCMRegistrar.checkDevice(this);     
    // Make sure the manifest was properly set - comment out this line
    // while developing the app, then uncomment it when it's ready.     
    GCMRegistrar.checkManifest(this);

    // Let's declare our receiver
    registerReceiver(mHandleMessageReceiver,new IntentFilter(DISPLAY_MESSAGE_ACTION));

    final String regId = GCMRegistrar.getRegistrationId(this);
    if (regId.equals("")) {       
        Log.d("", "Lets register for Push");
        GCMRegistrar.register(this, SENDER_ID);       
    }else {

      if(GCMRegistrar.isRegisteredOnServer(this)) {
          // Skips registration.                          
          String apnsToken = delegate.sso.getAPNSToken();           
          if(!apnsToken.equals(regId)){

            Log.d("", "The Device RegId has changed on GCM Servers");
            // We should let our servers know about this
            ServerUtilities.update(regId, context);
          }

      } else {        

          Log.d("","Is not register on PM Server");               
          // Try to register again, but not in the UI thread.
          // It's also necessary to cancel the thread onDestroy(),
          // hence the use of AsyncTask instead of a raw thread.              
          mRegisterTask = new AsyncTask<Void, Void, Void>() {

              @Override
              protected Void doInBackground(Void... params) {

                  boolean registered = ServerUtilities.register(context, regId);
                  // At this point all attempts to register with the app
                  // server failed, so we need to unregister the device
                  // from GCM - the app will try to register again when
                  // it is restarted. Note that GCM will send an
                  // unregistered callback upon completion, but
                  // GCMIntentService.onUnregistered() will ignore it.
                  if (!registered) {
                      GCMRegistrar.unregister(context);
                  }
                  return null;
              }

              @Override
              protected void onPostExecute(Void result) {
                  mRegisterTask = null;
              }

          };
          mRegisterTask.execute(null, null, null);

      }
    }                         
} 
```

这就是我设置接收器的方式：

```
private final BroadcastReceiver mHandleMessageReceiver =
        new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String newMessage = intent.getExtras().getString(EXTRA_MESSAGE);
        Log.d("","BroadcastReceiver onReceive");  
        notificationIntent = GCMIntentService.getNotificationIntent(context);

        new AlertDialog.Builder(context)
        .setMessage(newMessage+". Would you like to see it right now?")
        .setCancelable(false)
        .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {                                                       
                // Show update                                                              
                startActivity(notificationIntent);                                                              
            }
        })
        .setNegativeButton("No", null).show();                                    
    }
}; 
```

`GCMIntentService.getNotificationIntent(context)`. 此行返回带有我要启动的 Activity 的 Intent。

每当有通知 onReceive 被调用但对话框仅显示我是否在主要活动中。因此，如果应用程序处于不同的活动中，`onReceive`仍然会被调用，但不会显示对话框，因此我无法启动正确的活动。

如何在 BroadcastReceiver 上显示有关当前可见活动的对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:50:33.440

玩弄这个并在谷歌上搜索我遇到了一个解决方案。它不是最好的，但它有效。我仍然不敢相信没有一种简单的方法可以在 Android 中获取当前上下文。因此，无论当前活动是什么，这就是我为设法显示对话框所做的工作：我在我的单例类（AppDelegate）上有一个 Context 类型的公共静态属性，并且在每个活动上，我都覆盖了 onResume 方法并将 Context 设置为当前的活动像这样 AppDelegate.CURRENT_CONTEXT = this。然后在我的对话框中：AlertDialog.Builder(AppDelegate.CURRENT_CONTEXT).....

# javascript - Google Maps JS 功能变更

> ID：13811990
> 
> 赞同：0
> 
> 时间：2012-12-11T01:02:34.933
> 
> 标签：javascript, css, google-maps, google-maps-api-3

问题：当我单击任一地址旁边的区域（在 div 中）时，当鼠标光标是默认的而不是指针时，单击时它仍会将用户带到地图上的位置。我怎样才能阻止这种情况，以便仅在用户单击实际地址而不是单击该 div 中的空白区域时将用户带到该地图位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:34:50.727

您在锚标记中多次调用“myClick(0)”。如果您对放置它们的位置更有选择性，那么您应该能够找到合适的解决方案。如果您只希望地址触发地图，则将其包装如下：

```
<a href="javascript:myclick(0)">352 Princes Highway Fountain Gate VIC 3805</a> 
```

并删除对您不需要的任何其他 myClick(0) 的调用。

# c# - 具有属性的列表的 XML 序列化

> ID：13811991
> 
> 赞同：8
> 
> 时间：2012-12-11T01:02:35.930
> 
> 标签：c#, asp.net, xml, serialization, xml-serialization

我在另一个列表（具有变体的产品）中有一个列表。我希望父列表在其上设置属性（只是 an`id`和 a `name`）。

**期望的输出**

```
<embellishments>
    <type id="1" name="bar bar foo">
        <row>
            <id>1</id>
            <name>foo bar</name>
            <cost>10</cost>
        </row>      
    </type> 
</embellishments> 
```

* * *

**当前代码**

```
[XmlRoot( ElementName = "embellishments", IsNullable = false )]
public class EmbellishmentGroup
{
    [XmlArray(ElementName="type")]
    [XmlArrayItem("row", Type=typeof(Product))]
    public List<Product> List { get; set; }

    public EmbellishmentGroup() {
        List = new List<Product>();
        List.Add( new Product() { Id = 1, Name = "foo bar", Cost = 10m } );
    }
}

public class Product
{
    [XmlElement( "id" )]
    public int Id { get; set; }

    [XmlElement( "name" )]
    public string Name { get; set; }

    [XmlElement( "cost" )]
    public decimal Cost { get; set; }
} 
```

* * *

**电流输出**

```
<embellishments>
    <type>
        <row>
            <id>1</id>
            <name>foo bar</name>
            <cost>10</cost>
        </row>
    </type>
</embellishments> 
```

* * *

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T01:34:41.197

您需要创建另一个代表`type`元素的类。然后您可以为其添加属性的属性，如下所示：

```
[XmlRoot(ElementName = "embellishments", IsNullable = false)]
public class EmbellishmentGroup
{
    [XmlElement("type")]
    public MyType Type { get; set; }

    public EmbellishmentGroup() 
    {
        Type = new MyType();
    }
}

public class MyType
{
    [XmlAttribute("id")]
    public int Id { get; set; }

    [XmlAttribute("name")]
    public string Name { get; set; }

    [XmlElement("row")]
    public List<Product> List { get; set; }

    public MyType()
    {
        Id = 1;
        Name = "bar bar foo";
        List = new List<Product>();
        Product p = new Product();
        p.Id = 1;
        p.Name = "foo bar";
        p.Cost = 10m;
        List.Add(p);
    }
}

public class Product
{
    [XmlElement( "id" )]
    public int Id { get; set; }

    [XmlElement( "name" )]
    public string Name { get; set; }

    [XmlElement( "cost" )]
    public decimal Cost { get; set; }
} 
```

# gpu - 如何用c代码测量

> ID：13811992
> 
> 赞同：1
> 
> 时间：2012-12-11T01:02:38.910
> 
> 标签：gpu, benchmarking

我有一个关于如何测量 GPU 带宽的问题。我尝试了一些不同的方法，但它们都不起作用。例如，我尝试使用数据传输量除以用于计算带宽的时间。但是，由于 GPU 可以切换当前执行的 warp，因此在执行期间数据传输的数量会有所不同。我想知道你是否可以给我一些关于如何做的建议。那将不胜感激。

# cakephp - CakePHP 表单操作按钮

> ID：13811994
> 
> 赞同：0
> 
> 时间：2012-12-11T01:02:42.837
> 
> 标签：cakephp

我正在尝试将一个与表单无关的按钮放入视图中，以便注册按钮将人们引导至控制器操作，但我继续收到 error500 内部错误。有什么想法我在这里做错了吗？

```
<?php 
echo $this->Form->create('User');
echo $this->Session->flash();
echo $this->Form->input('username', array('label' => false, 'div' => false, 'class' => 'w-icon validate[required]'));
echo $this->Form->input('password', array('label' => false, 'div' => false, 'class' => 'w-icon validate[required]'));
echo $form->button('Register', array('type' => 'button', 'class' => 'button red tiny'));
echo $this->Form->submit('Login', array('class' => 'button blue tiny'));
echo $this->Form->end();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:06:20.143

`$form->button`是 CakePHP 1.2 的语法，`$this->Form`是 1.3 以后的。

# asp.net - 带有gridview控件的asp.net多行更新不循环（vb.net）

> ID：13811996
> 
> 赞同：0
> 
> 时间：2012-12-11T01:02:48.330
> 
> 标签：asp.net, stored-procedures, gridview, sqldatasource, bulk

我对asp.net 很陌生。我正在构建我的第一个真正的应用程序作为测试。使用 SQL Server 2008 RS、VS Express 2012、IIS7.x 和 asp.net4.0

我们每晚都会收到 Fedex 发货信息，这些信息使用 SSIS 插入到 MSSQL 数据库中。然后，我们根据 Ref1 字段中的作业编号导入发票，进行差异匹配并将成本记入作业。这一切都很好。但是，运输部门应该将唯一的 JobNo 放在 ref1 字段中。当然他们没有，而且那里有很多临时工和装运站，所以我们需要修复数据。他们会在 JobNo 后面加上 junk，或者 junk 然后是 job no。当成本核算人员查看发票时，通常很明显工作编号是什么（例如“工作 123 的样品”应该是“123”）。可能有许多行具有相同的 Ref1 需要编辑（例如 20 个具有相同 Ref1 的纸箱）。我有一个带有 3 个参数（OldRef、NewRef、invNo）的 SP，用于更新该发票上所有记录的 Ref no：

```
 UPDATE InvoiceLines
    SET REF1 = @NewRef1
    WHERE InvNo = @InvNo and Ref1 = @OldRef1 
```

我认为 GridView（带有 sqldatasource）将是呈现数据的好方法。我只显示 Ref1 字段无效的行，当用户更正它们时，记录数会减少。

我希望用户选择一行，编辑 Ref1 值，我只需获取所选行的（旧）RefNo，它是新值，然后用这些和 InvNo 调用我的 SP（来自过滤发票的 DropDown行表）。

结果比我想象的要困难得多/效率低下。

我发现的所有示例都可以执行此类操作，让用户单击所有行，然后循环遍历每一行以进行更新。谈论缓慢而痛苦。我想执行一个 SP 并更新所有匹配的行，然后刷新列表。

所以我想弄清楚的是如何获取OLD Ref1（编辑前Ref1中的值 - 就像在SQL触发器中删除），NEW Ref1（用户在Ref1中输入的编辑值 - 就像插入到SQL中触发器）并执行我的 SP，然后使用更新的值结果集刷新表。

我是使用网格视图以外的东西更好，还是只使用内置的编辑命令以外的东西？

如果我确实知道如何进行更新，我该如何刷新 GridView。

谁能指出我正确的方向？

另一方面，我对切换到 C# 持谨慎态度。我发现的大多数示例都在 C# 中。多年前我学习了 C++，并在周末阅读了 C#。似乎并不太难。我确实找到了一份 Microsoft 白皮书，它几乎说 VB 和 C# 之间几乎没有区别，所以没有真正的理由来切换。我的同事不懂 C 或 C#，所以我有点担心万一他们需要帮助，他们会被卡住。对此有什么想法吗？

问候

标记

# facebook - Facebook 应用：在安装时选择备用应用

> ID：13811997
> 
> 赞同：-2
> 
> 时间：2012-12-11T01:02:50.653
> 
> 标签：facebook, installation

我们（将）为我们公司提供两个 Facebook 应用程序。我们的一些用户将有资格获得一个，一些用户将有资格获得另一个。这是一个不相交的集合，没有用户有资格同时使用这两个应用程序。我们想做的是在登录/安装过程中检测用户选择了错误的应用程序，并将他们重定向到正确的应用程序

这在 Facebook 框架内可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:35:30.763

不，此功能在 Facebook 框架中不存在。您将不得不使用自己的自定义脚本来决定将它们定向到哪个应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:20:52.520

> 我们的一些用户将有资格获得一个，一些用户将有资格获得另一个。这是一个不相交的集合，没有用户有资格同时使用这两个应用程序。

请在这种情况下定义“合格”。

> 我们想做的是在登录/安装过程中检测用户选择了错误的应用程序，并将他们重定向到正确的应用程序

并且请定义您当时想要做出该决定的依据。

* * *

除了不清楚的问题之外，*一个*应用程序仍然可以为不同的用户做不同的事情，并且可以根据该应用程序可用的所有数据来决定对哪个用户进行分类。