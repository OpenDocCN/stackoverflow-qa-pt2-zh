# StackOverflow 问答 13345000-13345999

# asp.net-mvc-3 - 聊天室用户列表

> ID：13345000
> 
> 赞同：0
> 
> 时间：2012-11-12T13:55:17.087
> 
> 标签：asp.net-mvc-3

我目前正在开发一个网页。网页就像一个聊天网络，所以我有多个聊天室，用户可以打开这些聊天室并与其他人聊天。

我的问题是我真的不知道向已进入聊天室的用户展示的最佳方式。我是否使用会话变量来存储聊天室或其他地方的用户？我在想我不应该将它存储在数据库中，因为它一直在更新和更改。

我正在为这个应用程序使用 MVC 3。

在此先感谢，如果有不清楚的地方，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T23:10:26.300

您不能使用会话变量，因为每个会话都是唯一的。我想到的一种方法是创建一个 ChatUser 类，其中包含有关用户的所有信息，然后为服务器上具有 List 通用集合的每个通道创建一个 Cache 对象。

当用户加入频道时，他们会被添加到缓存列表中，当他们离开频道时，他们会从缓存列表集合中删除。

这会将所有内容保存在内存中。

# android - 服务中的位置管理器

> ID：13345002
> 
> 赞同：1
> 
> 时间：2012-11-12T13:55:27.557
> 
> 标签：android, gps, location

是否可以`getSystemService`在服务中使用？我的服务等级：

```
private LocationManager locationManager;
private LocationListener locationListener;

IBinder mBinder = new LocalBinder();      

public interface interfaceLocationService {     
      public Location currentBestLocation = null;
      public void startListenLocation();
      public void stopListenLocation();
      public Location getUserLocation();
}

@Override
public IBinder onBind(Intent intent) {
    return mBinder;
}

public class LocalBinder extends Binder implements interfaceLocationService{

    public void StopListenLocation(){
        locationManager.removeUpdates(locationListener);
        locationListener = null;
        stopSelf();
    }

    public void startListenLocation()
    { 
        locationListener = new LocationListener() {

            public void onStatusChanged(String provider, int status, Bundle extras) {    
                switch (status) {

                // Provider out of service
                case LocationProvider.OUT_OF_SERVICE:
                    Log.v(TAG, "Provider status changed: Out of Service");
                    break;

                // Provider temporarily unavailable
                case LocationProvider.TEMPORARILY_UNAVAILABLE:
                    Log.v(TAG, "Provider status changed: Temporarily Unavailable");
                    break;

                // Provider available again
                case LocationProvider.AVAILABLE:
                    Log.v(TAG, "Provider status changed: Available");
                    break;
                }
            }       

            public void onProviderEnabled(String provider) {    
                Log.v(TAG, "Provider enabled");
            }

            public void onProviderDisabled(String provider) {    
                Log.v(TAG, "Provider disabled");

                // Settings brought up to connect
                Intent intent = new Intent(
                        android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                startActivity(intent);
            }

            public void onLocationChanged(Location location) {                  
                Log.v(TAG, "Location Changed");
                if (isBetterLocation(location, currentBestLocation)) {
                    currentBestLocation.set(location);
                }
            }
        };
        //if I have only one requestLocationUpdates situation is the same
            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 
                    400, 1, locationListener);
        }

    public Location getUserLocation(){
        return currentBestLocation;
    }

    @Override
    public void stopListenLocation() {
        locationManager.removeUpdates(locationListener);
        locationListener = null;
        stopSelf();
    }
}

@Override
public void onCreate() {
    // Start thread  
    locationManager = (LocationManager)SendService.this.getSystemService(Context.LOCATION_SERVICE);
    super.onCreate();
    Log.d(TAG, "SendService created");
}

@Override
public void onDestroy() {
    // Just destroy thread
    super.onDestroy();
    Log.d(TAG, "SendService destroyed");
} 
```

在活动中，我得到了启动此服务的代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    Intent intent = new Intent(this, SendService.class);
    bindService(intent, mConnection, Context.BIND_AUTO_CREATE);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

private ServiceConnection mConnection = new ServiceConnection() {

    public void onServiceConnected(ComponentName className,
            IBinder service) {
        mService = (interfaceLocationService) service; 
    }

    public void onServiceDisconnected(ComponentName arg0) {
        Log.d("LOG","Service disconnected");
        mService.stopListenLocation();
    }
};

public void startClicked(View v) {
    mService.startListenLocation();   
} 
```

此代码在 LogCat 中给出错误：

```
11-12 17:01:02.171: E/AndroidRuntime(2719): FATAL EXCEPTION: main
11-12 17:01:02.171: E/AndroidRuntime(2719): android.util.AndroidRuntimeException:      Calling startActivity() from outside of an Activity  context requires the      FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
11-12 17:01:02.171: E/AndroidRuntime(2719):     at android.app.ContextImpl.startActivity(ContextImpl.java:657)
11-12 17:01:02.171: E/AndroidRuntime(2719):     at android.content.ContextWrapper.startActivity(ContextWrapper.java:258)
11-12 17:01:02.171: E/AndroidRuntime(2719):     at com.example.gps.data.SendService$LocalBinder$1.onProviderDisabled(SendService.java:78)
11-12 17:01:02.171: E/AndroidRuntime(2719):     at android.location.LocationManager$ListenerTransport._handleMessage(LocationManager.java:204)
11-12 17:01:02.171: E/AndroidRuntime(2719):     at android.location.LocationManager$ListenerTransport.access$000(LocationManager.java:124)
11-12 17:01:02.171: E/AndroidRuntime(2719):     at android.location.LocationManager$ListenerTransport$1.handleMessage(LocationManager.java:140)
11-12 17:01:02.171: E/AndroidRuntime(2719):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-12 17:01:02.171: E/AndroidRuntime(2719):     at android.os.Looper.loop(Looper.java:143)
11-12 17:01:02.171: E/AndroidRuntime(2719):     at android.app.ActivityThread.main(ActivityThread.java:4717)
11-12 17:01:02.171: E/AndroidRuntime(2719):     at java.lang.reflect.Method.invokeNative(Native Method)
11-12 17:01:02.171: E/AndroidRuntime(2719):     at java.lang.reflect.Method.invoke(Method.java:521)
11-12 17:01:02.171: E/AndroidRuntime(2719):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
11-12 17:01:02.171: E/AndroidRuntime(2719):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
11-12 17:01:02.171: E/AndroidRuntime(2719):     at dalvik.system.NativeStart.main(Native Method) 
```

简单地说：我可以在后台`LocationManager`收听位置吗？`service`如果是，那么我的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:00:14.643

是的，当然您可以在服务中使用 LocationManager。例如，我在后台服务的 onCreate 方法中执行此操作：

```
public void onCreate() {
      mLocationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

      Criteria criteria = new Criteria();
      criteria.setAccuracy(Criteria.ACCURACY_COARSE);
      criteria.setAltitudeRequired(false);
      criteria.setBearingRequired(false);
      criteria.setCostAllowed(true);

      String provider = mLocationManager.getBestProvider(criteria, true);
      mLocationManager.requestLocationUpdates(provider, LOCATION_UPDATE_INTERVAL_MILLIS, LOCATION_UPDATE_INTERVAL_METERS, this);

    } 
```

# jquery - JQuery selectmenu如何以不同的方式设置一些选项

> ID：13345003
> 
> 赞同：2
> 
> 时间：2012-11-12T13:55:32.503
> 
> 标签：jquery

可能是一个简单的家伙，但我真的很挣扎。如果有人可以提供，将非常感谢一些帮助或建议，谢谢。

我正在使用 JQuery 选择菜单，我想做的就是为任何具有特定类的 OPTION 设置不同的样式。该类是“缺货”，所以我的代码如下；

```
<select name="dd1" id="dd1">
    <option value="1">item 1</option>
    <option value="2" class="outOfStock">item 2</option>
    <option value="3">item 3</option>
</select> 
```

我希望第二个具有 class="outOfStock" 的选项使用不同的文本或 BG 颜色进行样式设置。

我已经尝试了很多（很多，很多）变体，但就是无法让任何东西发挥作用。

```
<style type="text/css">
.ui-selectmenu-menu-item .outOfStock{background:red;}
</style> 
```

任何指针将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:00:40.120

你可以试试这个，很简单：

```
 $('.outOfStock').css('color','#454545'); 
```

而不是使用

```
 <style type="text/css"></style> 
```

你应该使用

```
 <script type="text/javascript"></script> 
```

因为你想运行 jQuery 而不是 css 样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:04:46.257

你快到了。尝试：

```
<style type="text/css">
    .outOfStock {
         background-color: red !important; // changed following comments
    }
</style> 
```

谨慎使用 !important。更多信息[在这里](http://css-tricks.com/when-using-important-is-the-right-choice/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T14:40:36.943

`select`CSS 在样式及其后代元素方面几乎毫无用处`option`，因为它们通常由操作系统/平台呈现，而不是浏览器本身。

但是，您可以使用该`disabled`属性来区分它们：

```
$('option.outOfStock').prop('disabled', true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T15:03:46.670

可能不是您正在寻找的答案，但在最坏的情况下，您始终可以使用内联样式，因为这将在选择标签上顺利工作......

```
 <select name="dd1" id="dd1">
    <option value="1">item 1</option>
    <option value="2" style="background:red;">item 2</option>
    <option value="3">item 3</option>
  </select> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T15:28:57.780

感谢所有建议，其中一些建议部分有效，但是这似乎在不同的浏览器中做了一致的工作，并且还涵盖了处于 SELECTED 状态的项目

```
.ui-selectmenu-menu .outOfStock{background:red;} /* item in the list */
.outOfStock .ui-selectmenu-status{background:red;color:#333}  /* item when selected */ 
```

这个技巧可能会帮助那些试图找到 .ui 样式的人......我花了好几年的时间才弄清楚在各种菜单状态（打开、悬停、选择）中涉及哪些 .ui 样式 - 最后我意识到我所要做的就是打开 Chrome（或 Firefox），设置 Firebug，右键单击我的元素（在本例中为我的选择菜单项）并选择“检查元素”。然后，Firebug 向我展示了他们进来玩的所有风格。然后我可以清楚地看到样式的变化，因为菜单项处于各种状态、悬停、选中等。一旦你知道了要定位的样式/类，剩下的就很容易了……希望这对其他人有帮助。萤火虫来救援:)

# asp.net-mvc-3 - mvc3中选择列表项的样式

> ID：13345009
> 
> 赞同：6
> 
> 时间：2012-11-12T13:56:05.390
> 
> 标签：asp.net-mvc-3, drop-down-menu, styling

我正在修改一些我没有编写的代码，而且我对 Razor 还很陌生

它是车辆的选择列表，代码如下所示：

```
<select name="selectVehicle" class="cls_vehicles" data-bind="options:        $root.vehicles,optionsCaption:$root.noVehicleText, optionsText:     'VehicleNumber',optionsValue: 'VehicleID',value: VehicleID"><option value=""/></select> 
```

我的数据源除了 Vehicleid 和 Vehiclenumber 还包含一个 Vehicletype，现在我想根据类型突出显示车辆，所以汽油车是蓝色的，柴油车是绿色的。

但我不知道如何去做，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:13:45.657

因此，您的问题代码中的选项有一个敲除数据绑定，所以我现在假设您使用敲除作为数据源。为此，您必须稍微扩展绑定，以便您可以在每个选项上单独放置一个 css 类。

```
<select data-bind="value: selectedCar, foreach: cars">
    <option data-bind="css: { carDiesel: isDiesel, carGas: isGas }, text: name"></option>
</select>​ 
```

现在，这取决于您的淘汰视图模型的结构，但这是我使用这种方法制作[的小提琴。](http://jsfiddle.net/tyrsius/wTLMq/)你应该能够调整它以适合你的。如果您想要仅 Razor 的解决方案，请告诉我。

# eclipse - 正在进行 DLTK 索引

> ID：13345011
> 
> 赞同：30
> 
> 时间：2012-11-12T13:56:07.633
> 
> 标签：eclipse, zend-framework, zend-studio

我们为我们的业务提供支持的软件有近 16,000 个 PHP 文件。这是一个绝对庞大的系统。Zend Studio 实际上需要几个小时来运行 DLTK 索引。

我找不到对此的最新响应，但必须有一种方法可以禁用它，或将其限制在特定目录中。

另外，这个过程到底在做什么？

谢谢。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-12T22:17:12.900

DLTK 索引是 Eclipse 的一项功能，它索引有关动态语言（如 PHP 或 Perl）的信息。对于 PHP，这包括类定义，包括它们的属性和方法、函数原型、解析其他文件中包含或需要的代码以及许多其他内容。

没有它，您将失去项目定义的类和函数的自动完成功能。它还有助于重构，因此如果重命名函数，它可以更新引用该函数的所有其他文件。

这通常是一件好事，但我感觉到你的痛苦并且多次遇到同样的问题。

您可以通过右键单击要从项目中的索引中排除的文件夹并选择`Build Path`然后单击来防止某些目录被索引`Exclude`。这应该可以防止它被这个进程索引。

![从构建路径中排除](../Images/258fe772b256e643621a1dd91ecd6f86.png)

或者，您可以拉出项目属性并从那里管理排除的路径：

![从构建路径中排除](../Images/df6e5150ca6852891e93a2261dfab462.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-21T08:21:15.633

如果您有多个项目并且其中一些很少使用，您可以关闭项目（从右键菜单）：这将阻止对这些关闭的项目进行 DLTK 索引。

请注意，关闭项目并不会删除它，因此如果有一天您需要访问或更改某些文件，您可以简单地重新打开它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-17T23:38:41.993

将庞大的代码库分解为模块，然后您可以在 Zend Studio 中拥有许多较小的项目，当依赖项被视为库时，每个项目的索引都少得多。

# html - 您如何处理每个页面上的登录表单的安全性？

> ID：13345015
> 
> 赞同：2
> 
> 时间：2012-11-12T13:56:26.260
> 
> 标签：html, asp.net-mvc, security

> **可能重复：**
> [从 HTTP 表单提交到 HTTPS 是否安全？](https://stackoverflow.com/questions/274274/is-it-secure-to-submit-from-a-http-form-to-https)

有没有一种安全的方法可以在网站的每个页面上都包含用户名和密码表单，而无需为每个页面使用 HTTPS？

编辑：我希望用户能够从任何页面登录，网站标题中会有一个用户名和密码的小区域，但并非所有页面都是 HTTPS。

# shared-objects - ActionScript 3 共享对象

> ID：13345017
> 
> 赞同：0
> 
> 时间：2012-11-12T13:56:36.497
> 
> 标签：shared-objects

关于 as3 中的 SharedObjects，我有几个问题。好的，持久的 SharedObject 和非持久的 SharedObject 有什么区别？而且，我正在尝试构建一个小型聊天应用程序。我想使用 SharedObjects 发送消息。我是否需要在客户端和服务器端都使用代码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:08:05.780

也许我错了，但是共享的 SharedObjects 类似于 javascript cookie，它们存储在用户计算机上，我认为您不能使用它们来发送消息

# css - 尝试打开 CSS 文件时，Visual Studio 2012 和 Web Essentials 2012 崩溃

> ID：13345018
> 
> 赞同：3
> 
> 时间：2012-11-12T13:56:42.733
> 
> 标签：css, visual-studio-2012

我在 Windows Server 2012 上安装了 Visual Studio 2012 RTM Plus 更新和 Web Essentials 2012 V1.7，当我打开 CSS 文件时出现以下崩溃。

> System.NullReferenceException：对象引用未设置为对象的实例。1.FindFirstOrderedComponent(String contentTypeName) 在Microsoft.CSS.Editor.CssEditorDocument.InitializeTextBuffer `2.ImportMany() at Microsoft.Web.Editor.ComponentLocatorForContentType`(ITextBuffer textBuffer) 在 Microsoft.CSS.Editor.CssEditorDocument.FromTextBuffer(ITextBuffer textBuffer) 在 MadsKristensen.EditorExtensions.DisplayInlineTextViewCreationListener。 Microsoft.VisualStudio.Text.Editor.Implementation.ConnectionManager.<>c_DisplayClass8 *.<.ctor>b* _1() 的 Microsoft.VisualStudio.Text.Utilities.GuardedOperations 的SubjectBuffersConnected(IWpfTextView textView, ConnectionReason reason, Collection`1 subjectBuffers) 。 CallExtensionPoint（对象错误源，动作调用）

我以另一个用户而不是本地管理员身份登录，但我仍然遇到崩溃。（我必须以具有管理员权限的普通用户身份登录，因为我猜出于安全原因，某些 ide 不会在本地管理员的上下文中运行）。

我已经卸载、重新安装、执行了 devenv / resetuser 数据，但它仍然崩溃。

如果我卸载 Web Essentials 2012 v1.7（和 1.4、1.5 等）它会停止崩溃。在 V1.4 之前，我相信它工作正常。可能是环境中的其他扩展发生冲突，例如工作台工具，但我可以看到没有添加任何内容，并且我已经卸载了我能想到的所有内容。

我想追踪此错误并了解扩展安装顺序并尝试了解它将要做什么，因此我对可能影响它的任何事情都有一些线索。

### 以前的条目

> “开始包加载 [Visual Studio CSS 编辑包] {A764E895-518D-11D2-9A89-00C04F79EFC3} VisualStudio 2012/11/12 12:10:02.504 484 加载 UI 库 C:\Program Files (x86)\Microsoft Visual Studio 11.0 \Common7\Packages*\CSSPkgUI.dll {A764E895-518D-11D2-9A89-00C04F79EFC3} VisualStudio 2012/11/12 12:10:02.504 485 结束包加载 [Visual Studio CSS 编辑包] {A764E895-518D-11D2-9A89 -00C04F79EFC3}VisualStudio 2012/11/12 12:10:02.505"

据我所见，Microsoft Web 编辑器正试图将编辑缓冲区的内容移交给 Web Essentials Editor 扩展并崩溃。

### 事件簿

> 应用程序：devenv.exe 框架版本：v4.0.30319 描述：进程因未处理的异常而终止。异常信息：System.NullReferenceException 堆栈：在 Microsoft.Web.Editor.ComponentLocatorWithOrdering `2[[System.__Canon, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089],[System.__Canon, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]].ImportMany() at Microsoft.Web.Editor.ComponentLocatorForContentType`1[[System._*Canon, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]].FindFirstOrderedComponent(System.String) 在 Microsoft.CSS.Editor.CssEditorDocument.InitializeTextBuffer(Microsoft.VisualStudio.Text.ITextBuffer) 在 Microsoft.CSS。 Editor.CssEditorDocument.FromTextBuffer(Microsoft.VisualStudio.Text.ITextBuffer) 在 MadsKristensen.EditorExtensions.HighlightWordTagger.EnsureInitialized() 在 MadsKristensen.EditorExtensions.HighlightWordTagger.UpdateAtCaretPosition(Microsoft.VisualStudio.Text.Editor.CaretPosition) 在 MadsKristensen.EditorExtensions.HighlightWordTagger+< >c*_DisplayClass3.b__2() 在 System.Windows.Threading.ExceptionWrapper.InternalRealCall(System.Delegate, System.Object, Int32) 在 MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(System.Object, System.Delegate, System.Object, Int32) , System.Delegate) 在 System.Windows.Threading.DispatcherOperation.InvokeImpl() 在 System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(System.Object) 在 System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading .ContextCallback, System.Object, Boolean) 在 System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean) 在 System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext , System.Threading.ContextCallback, 系统。对象）在 System.Windows.Threading.DispatcherOperation.Invoke() 在 System.Windows.Threading.Dispatcher.ProcessQueue() 在 System.Windows.Threading.Dispatcher.WndProcHook(IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef) 在 MS .Win32.HwndWrapper.WndProc(IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef) 在 MS.Win32.HwndSubclass.DispatcherCallbackOperation(System.Object) 在 System.Windows.Threading.ExceptionWrapper.InternalRealCall(System.Delegate, System.Object, Int32) 在 MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(System.Object, System.Delegate, System.Object, Int32, System.Delegate) 在 System.Windows.Threading.Dispatcher.LegacyInvokeImpl(System.Windows.Threading.DispatcherPriority, System.TimeSpan, System.Delegate, System.Object, Int32) 在 MS.Win32.HwndSubclass.SubclassWndProc(IntPtr, Int32,内部指针，内部指针）

我注意到它提到了`highlightword`标记器。这是一个线索吗？（或者只是第一个调用点？），我也没有在 html 文件中突出显示颜色语法。

我在一台单独的 Windows 8 笔记本电脑上也多次发生同样的崩溃，有一天，在我坐下来卸载并将其撞死后，错误就消失了，我尝试了如此多的禁用、启用、往返，很难想象有什么可以修复它.

我可以用其他任何日志来追踪它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T01:17:58.397

这已在最新的夜间版本中修复。你可以在这里抓住它：http: [//madskristensen.net/custom/webessentials2012.vsix ?v=1.7.4](http://madskristensen.net/custom/webessentials2012.vsix?v=1.7.4)

安装 nightly 不会影响将来通过 VS 自动安装的任何更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T11:21:21.830

我确实重建了我的机器，当然我再也没有看到过这个错误。然而，我确实选择重建为 Windows 8 PC 而不是 Windows 2012 Server 作为我的开发机器。

# jquery - 如果未拖放/拖动，请选中/取消选中图像的复选框

> ID：13345023
> 
> 赞同：1
> 
> 时间：2012-11-12T13:57:19.647
> 
> 标签：jquery

我有一个带有图像的网格，每个图像都有一个复选框来选择它（用于删除）。网格是可排序的。

仅当图像未拖放/删除时（仅通过简单的单击），我才想选中/取消选中该复选框。

我做了以下几行

```
$('#images li').click(function() {
    if ($(this).children('input').is(':checked'))
    {
         $(this).children('input').attr('checked', false);
    }
    else
    {
         $(this).children('input').attr('checked', true);
    }
});

$('#image li').bind('drag',function() {
    $(this).children('input').attr('checked', false);
});

$('#image li').bind('drop',function() {
    $(this).children('input').attr('checked', false);
}); 
```

然而，“drop”语句看起来不起作用。如何以正确的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:16:42.653

在此示例中，`drop`事件不是您认为的那样。这是在被放置的对象上触发的事件，而不是在*被**放置*的对象上触发的事件。您正在寻找活动。 *`dragend`*

 *[http://help.dottoro.com/ljsluknm.php](http://help.dottoro.com/ljsluknm.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:05:03.900

我有解决办法！我已将“click()”更改为“live()”，因为它可以正常工作。正确的代码：

```
$('#images li').on('click', function() {
    if ($(this).children('input').is(':checked'))
    {
         $(this).children('input').attr('checked', false);
    }
    else
    {
         $(this).children('input').attr('checked', true);
    }
});

$('#image li').bind('drag',function() {
    $(this).children('input').attr('checked', false);
});

$('#image li').bind('drop',function() {
    $(this).children('input').attr('checked', false);
}); 
```*

# openxml - 在 C++ 中创建 PresentationML 文档

> ID：13345027
> 
> 赞同：1
> 
> 时间：2012-11-12T13:57:46.347
> 
> 标签：openxml, presentationml

我已经使用 wordprocessingML 工作并取得了成功，但没有使用 PresentationML。我的问题是我的文件大小为 0ko，我不知道为什么。我知道创建一个空的 word 文档就足够了，但是对于一个空的 powerpoint 就足够了吗？我遵循了一些教程，但没有人工作（对我来说）创建PowerPoint的好方法是什么？

我以此恢复我的代码（我尝试创建一个空存档）

```
this->m_package = System::IO::Packaging::Package::Open(sPath, System::IO::FileMode::Create, System::IO::FileAccess::ReadWrite);

System::Uri ^ uriDoc = gcnew System::Uri("/ppt/presentation.xml", System::UriKind::Relative);
this->m_packagePart = this->m_package->CreatePart(uriDoc, "application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml");
System::IO::StreamWriter^ streamPart = gcnew System::IO::StreamWriter(this->m_packagePart->GetStream(System::IO::FileMode::Create, System::IO::FileAccess::Write));
this->m_package->CreateRelationship(uriDoc, System::IO::Packaging::TargetMode::Internal, "http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument", "rId1");
DocumentFormat::OpenXml::Packaging::OpenSettings^ openSet = gcnew DocumentFormat::OpenXml::Packaging::OpenSettings;
openSet->MaxCharactersInPart = 0;

this->m_presentationDoc = DocumentFormat::OpenXml::Packaging::PresentationDocument::Open(this->m_package, openSet);

this->m_presentationPart = this->m_presentationDoc->PresentationPart;
this->m_presentationPart->Presentation = gcnew DocumentFormat::OpenXml::Presentation::Presentation(); 
```

感谢提前

# java - AspectJ 并在 @AfterReturning 方法中调用另一个方法

> ID：13345028
> 
> 赞同：2
> 
> 时间：2012-11-12T13:57:56.790
> 
> 标签：java, spring, aop, aspectj, aspect

我开始学习如何在 Spring 中使用 AspectJ。我有以下课程。我想在新线程中执行第一个方法（长时间运行的任务），所以我认为这可以使用 Aspect 来实现 - 当调用 firstMethod 时，Aspect 会自动将此调用委托给新线程。在 firstMethod 完成后，应该调用 secondMethod 并返回 firstMethod 值作为参数。

```
public class SimpleClass{
    public Object firstMethod(){
        //some operations
        return object;
    }
    public void secondMethod(Object returnedObjectByFirstMethod){
    }
}

@Aspect
public class SimpleAspect {

   @Around("execution(* SimpleClass.firstMethod(..))")
   public void doInNewThread(final ProceedingJoinPoint joinPoint) throws Throwable {
       Thread t = new Thread(new Runnable() {
           public void run() { 
               joinPoint.proceed();
           }
       });
       t.start();
   }

   @AfterReturning(
      pointcut = "execution(* SimpleClass.firstMethod(..))",
      returning= "result")
   public void doAfter(JoinPoint joinPoint, Object result) {
       SimpleClass.secondMethod(result);
   }
} 
```

这是一种原型，我还没有实现它，我很确定它不能那样工作，但我想确定两件琐碎的事情：

1.  如果此方法不是静态的，我如何在 doAfter() 中调用 secondMethod()？我需要一种 SimpleClass 的实例是 SimpleAspect 吗？如何提供这样的实例？

2.  与第一个问题几乎相同，但是如果 secondMethod() 与 firstMethod() 不在同一个类中怎么办？

# imagemagick - ImageMagick 已安装，但未启用 Imagick 的 php 扩展

> ID：13345029
> 
> 赞同：2
> 
> 时间：2012-11-12T13:58:00.510
> 
> 标签：imagemagick, system, exec, imagick, passthru

你好，我有一个共享主机帐户。他们应我的要求安装了 Image Magick。但我得到这个错误。

> PHP 致命错误：在第 6 行的 /home/hamrohos/public_html/test.php 中找不到类“Imagick”

我告诉他们出了什么问题。他们回复了

> 已安装 ImageMagick，但未在共享帐户上启用 Imagick 的 php 扩展

现在我的问题是如果未启用其 php 扩展，我可以使用 Image magick 或其任何功能吗？

目前我正在使用 GD 库，但它不具备图像魔法的所有功能。

我也禁用了以下功能。phpinfo()、exec()、system()、passthru()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:49:51.530

如果不启用 PHP 中的 ImageMagick 扩展，您将无法直接使用它提供的功能。

在这种情况下使用 ImageMagick 的唯一方法是使用**系统**函数调用它并将所有内容作为 shell 脚本执行。您必须将图像数据保存在磁盘上才能执行此操作，并且在使用 imagemagick 处理它们之后，您必须再次加载它们。

因此，这绝对是可行的，但会产生严重的开销和对脚本的更改。

# python - 带有可插入视图的烧瓶扩展中的 url_for Builderror

> ID：13345030
> 
> 赞同：1
> 
> 时间：2012-11-12T13:58:03.287
> 
> 标签：python, flask, flask-extensions

我正在为烧瓶构建一个简单的扩展，并且 url_for 函数无法在扩展中构建 url。

有人可以帮我弄清楚我在这里缺少什么吗？

我简化了代码来演示这个问题（所有 url_for 调用都会引发 werkzeug BuildError 异常）：

```
import flask
import flask.views

import logging
logging.basicConfig(level=logging.DEBUG)

class MyFlaskExt(object):
    def __init__(self, app=None):
        if app is not None:
            self.init_app(app)

    def init_app(self, app):
        self.blueprint = flask.Blueprint('myext', __name__, static_folder='static', template_folder='templates')
        self.blueprint.add_url_rule('/', view_func=RootView.as_view('root'), endpoint='root')
        self.blueprint.add_url_rule('/var/<somevar>', view_func=VarView.as_view('var'), endpoint='var')
        self.blueprint.add_url_rule('/novar', view_func=NoVarView.as_view('novar'), endpoint='novar')
        app.register_blueprint(self.blueprint)

class RootView(flask.views.View):
    def dispatch_request(self):
        logging.debug(flask.url_for('novar'))
        logging.debug(flask.url_for('novar', _external=True))
        return flask.redirect(flask.url_for('var', somevar='test'))

class VarView(flask.views.View):
    def dispatch_request(self, somevar):
        return "SUCCESS! ({})".format(somevar)

class NoVarView(flask.views.View):
    def dispatch_request(self):
        return "SUCCESS!"

if __name__ == '__main__':
    app = flask.Flask(__name__)
    app.debug = True
    my_ext = MyFlaskExt()
    my_ext.init_app(app)
    logging.debug(app.url_map)
    app.run() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T14:07:45.150

`Blueprint`端点注册在`Blueprint`. 如果我没记错的话，您要么需要在`url_for`通话前加上“。” （如果它们都将在同一蓝图下运行）或使用全名：

```
def dispatch_request(self):
    logging.debug(flask.url_for('.novar'))
    logging.debug(flask.url_for('.novar', _external=True))
    return flask.redirect(flask.url_for('.var', somevar='test')) 
```

# java - 使用 Google 使用 Java 进行搜索

> ID：13345033
> 
> 赞同：1
> 
> 时间：2012-11-12T13:58:15.627
> 
> 标签：java, search, hyperlink

我正在尝试使用 Java 在 Google 上搜索字符串。我听说过 Google API，但我找不到任何有用的东西。它应该看起来像这样：

我有一个文本文件。每行都是一个字符串，应该用谷歌搜索。如果第一个搜索结果来自特定站点（例如：stackoverflow.com/ *** *），则完整链接将写入新的文本文件中。任何想法如何实现？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:21:14.740

[您可以使用其自定义搜索 API](https://developers.google.com/custom-search/v1/overview)在 Google 上进行搜索。有一个[用于 CustomSearch API 的 Java 客户端库](http://code.google.com/p/google-api-java-client/wiki/APIs#CustomSearch_API)可用于简化工作。警告：“所有用户均可免费使用，每天最多 100 个查询。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:19:00.277

Goolge 提供 RESTful 服务以编程方式执行自定义查询，称为[Google 自定义搜索 API](https://developers.google.com/custom-search/v1/overview)。

但它不是免费的：您每天最多可以提交 100 个查询。

# php - PHP 会话未初始化

> ID：13345035
> 
> 赞同：2
> 
> 时间：2012-11-12T13:58:31.450
> 
> 标签：php, session

我有一个会话：

```
session_start();
$_SESSION['auth'] = "true"; 
```

*并*设置了 PHPSESSID cookie 。但是，当我刷新页面`$_SESSION['auth']`时返回 NULL。此外，当我打电话时，`session_destroy();`我收到错误`Trying to destroy uninitialized session`

如何保持会话打开？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:15:48.040

试一试..如果可行，我将重新检查您的代码+注释掉 session_destroy ...

page1.php

```
<?php
    session_start();
    $_SESSION['auth'] = "true";
    $_SESSION['superhero'] = "batman";
?>
<a href="page2.php">Click here</a> 
```

page2.php

```
<?php
    session_start(); // start the session before using it
    echo $_SESSION['auth']; // will output 'true'
    //print_r($_SESSION); // uncomment for testing
?> 
```

# c# - 如何在不同的命名空间中处理相同的类名？

> ID：13345037
> 
> 赞同：29
> 
> 时间：2012-11-12T13:58:43.040
> 
> 标签：c#, .net, projects-and-solutions

我正在尝试创建一个通用的库结构。我通过为我想要的每个公共库创建单独的项目来做到这一点。

我有以下 2 个命名空间：`MyCompany.ERP`和`MyCompany.Barcode`

我需要他们两个都有一个名为`Utilities`并且是静态的类。如果我这样做，我将需要在我的静态类之前指定完整的命名空间名称才能访问它。

还有其他首选方法吗？

或者我应该在类中使用不同的名称，比如`BarcodeUtils`and `ERPUtils`？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-12T14:03:02.293

> 如果我这样做，我将需要在我的静态类之前指定完整的命名空间名称才能访问它？

不，没有必要这样做，尽管细节取决于将使用这些类型的类及其拥有的[`using`声明](http://msdn.microsoft.com/en-us/library/was37tzw.aspx)。

如果您只使用类中的命名空间**之一**，则没有歧义，您可以继续使用该类型。

如果您同时使用这两个命名空间，则必须完全限定用法，或者使用命名空间/类型[别名](http://msdn.microsoft.com/en-us/library/c3ay4x3d.aspx)来消除类型的歧义。

```
using ERPUtils = MyCompany.ERP.Utilities;
using BCUtils = MyCompany.Barcode.Utilities;

public void MyMethod()
{
  var a = ERPUtils.Method();
  var b = BCUtils.Method();
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-12T14:05:05.410

没有其他办法。您可以在`using`指令中创建别名：

```
using MC=MyCompany.ERP;
using MB=MyCompany.Barcode;
...
public void Test()
{
  var a = MC.Utilities.Method();
  var b = MB.Utilities.Method();
} 
```

这是管理它们的最简单方法。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-12T14:34:32.263

[MS指南](http://msdn.microsoft.com/en-us/library/vstudio/ms229026.aspx)有以下内容：

> 不要引入通用类型名称，例如 Element、Node、Log 和 Message。在常见情况下，它很可能会导致类型名称冲突。

和

> 不要为单个应用程序模型中命名空间中的类型赋予相同的名称。

我同意使用`BarcodeUtilities`and可能是个好主意`ErpUtilities`。（除非实用程序类不打算由客户端代码使用，在这种情况下，您可以命名它们`Utilities`并制作它们`internal`。）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-11-12T14:06:32.857

“实用程序”对于一个类来说不是一个很好的名字，因为它太通用了。因此，我认为您应该将它们都重命名为更具信息性的名称。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-12T14:03:02.410

您可以使用别名：

```
using BarcodeUtils  =  MyCompany.Barcode.Utilities; 
```

在您有冲突的页面上。但如果在很多地方都发生这种情况，最好重命名它们。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-12T14:04:49.083

我建议使用不同的类名。如果你真的想同时调用它们 Utilities 那么你可以在 using 指令上使用别名功能，例如

```
using ERP = MyCompany.ERP;
using Barcode = MyCompany.Barcode;

...
    ERP.Utilities.SomeMethod();
    Barcode.Utilities.SomeMethod(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-12T14:03:02.843

当两者命名相同时，您将不得不使用完整路径。否则你会得到一个模棱两可的参考错误。

您可以使用[别名](http://msdn.microsoft.com/en-us/library/sf0df423%28v=vs.80%29.aspx)，但是这样可以节省一些输入：

```
using Project = PC.MyCompany.Project; 
```

我会选择一个更具描述性的不同名称。一种

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-12T14:06:39.817

这实际上取决于您的课程的目的。如果您要分开分发 Barcode.Utilities 和 ERP.Utilies，最好保持这样。另一方面，如果你打算**只**在同一个类中使用它们，你可以使用 2\. 方法来简化代码。

# c# - 通用列表不一致的可访问性

> ID：13345040
> 
> 赞同：2
> 
> 时间：2012-11-12T13:58:55.267
> 
> 标签：c#, winforms

这是我在单击按钮时创建第二个表单的代码部分。

```
private List<Team> Teams = new List<Team>();
private void button2_Click(object sender, EventArgs e)
{
     Form Form2 = new Form2(Teams);
     Form2.Show();
} 
```

表格 2：

```
public Form2(List<Team> teams)
{
   InitializeComponent();
} 
```

我总是得到这个错误：

> 错误 1 ​​可访问性不一致：参数类型“ `System.Collections.Generic.List<Projekt.Team>`”比方法“ `Projekt.Form2.Form2(System.Collections.Generic.List<Projekt.Team>)`”更难访问

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T14:05:18.767

`Team`最有可能`internal`，因此它不能出现在类的`public`方法签名中`public`。

您可以`Team`公开或方法`private`/ `internal`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T14:05:30.153

`Team`应该公开。构造函数是公开的`Form`，但它需要一个不公开的参数。

# php - Cron 作业设置和服务器上的自动执行

> ID：13345044
> 
> 赞同：4
> 
> 时间：2012-11-12T13:59:08.020
> 
> 标签：php, cron

我有一种情况，有数千种产品，每种产品的价格都会不断检查并与其他网站保持同步。为了快速处理，我创建了多个链接。每个链接仅处理 50 条记录。并在 5 个服务器上划分所有链接以进行快速处理。

我为每个链接设置 cron 作业，每 12 小时处理一次。但是单个服务器上的两个链接处理时间之间应该有 15 分钟的间隔。

由于手动生成的链接很少。（大约 230 个链接或更多），手动为每个链接设置 cron 作业对我来说并不容易。

出于这个原因，我想编写动态 php 脚本来生成 230 个 cron 作业链接。

我编写 txt 文件并为约 ​​230 个链接的 cron 作业生成脚本，这里是示例示例。

```
0 0,12 * * * /usr/local/bin/php -f http://xxx.us/amazon/proc.php?  id=1&size=50
15 0,12 * * * /usr/local/bin/php -f http://xxx.us/amazon/proc.php?id=2&size=50
30 0,12 * * * /usr/local/bin/php -f http://xxx.us/amazon/proc.php?id=3&size=50
45 0,12 * * * /usr/local/bin/php -f http://xxx.us/amazon/proc.php?id=4&size=50
.....
230 crone job links 
```

有什么方法可以在服务器上执行动态生成的脚本以自动安装所有 cron 作业，而不是手动执行，即使在启动时也需要大量时间，如果我将来需要修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:19:44.610

这将淹没 crontab 并且没有任何好处，尤其是如果您将来获得更多工作。我建议只使用一个运行 15 分钟的脚本并检查脚本内的时间。根据 0、15、30 或 45 分钟处理您的链接。

一旦获得更多链接，您可以在每次运行中处理更多链接，或者通过简单地更改 crontab 中的一行和语句切换来缩短调用之间的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:28:16.097

我将只使用一个 cron-job 和一个 shell 脚本来循环您所有的 php 调用。

如果你在 linux 上，它会是这样的（简单的未经测试的例子......）：

```
#!/bin/bash
for ((i = 1; i < 5; i++))
do
   /usr/local/bin/php -f http://xxx.us/amazon/proc.php?id=[$i]&size=50
   echo "Finished batch: $i"
done 
```

并更改`5`为您想要的任何内容。

# c# - 有没有一种简单的方法来生成基于 POC 实体框架实体的 Javascript 模型（例如，用于 ExtJs）？

> ID：13345048
> 
> 赞同：6
> 
> 时间：2012-11-12T13:59:23.940
> 
> 标签：c#, asp.net-mvc, extjs

我有一个现有的 ASP.NET MVC3 应用程序，现在想将 ExtJs 主要用于制图，但稍后将用于更多功能。我的架构中已经有一组 POCO 实体，并且希望它们都可用于基于 javascript 的模型。另外，我不想维护两组实体。我认为编写可以创建实体的 JSON 表示的东西可能并不难，但一定有人已经这样做了，对吧？我在自己的搜索中找不到它。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T08:56:24.830

您添加对 newtonsoft.json 的引用，并且您确实喜欢

```
var model = @Html.Raw(JsonConvert.SerializeObject(Model, new IsoDateTimeConverter())); 
```

是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T17:02:18.867

我真的不明白你在问什么，但也许 C# 到 JavaScript 编译器可以帮助你。我知道的替代方案：

*   [Saltarelle](http://www.saltarelle-compiler.com)（我的）
*   [脚本＃](https://github.com/nikhilk/scriptsharp)
*   [SharpKit](http://sharpkit.net)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T17:12:23.087

这是一个有趣的想法！我当然可以理解动机。一个不错的解决方案可能是使用[T4 模板引擎](http://msdn.microsoft.com/en-us/library/bb126445.aspx)从您的 C# 模型生成一个 javascript 文件。

这样，您可以创建一个模板，该模板使用反射来获取在某个项目或命名空间下定义的所有类型并对其进行迭代，为每个类型编写一个 javascript 定义。再多思考一下以列出公共属性名称，以及您想要围绕它们的任何 javascript 语法，您都已排序！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-12T15:06:41.553

我一直在为个人项目做一些类似的事情，并在 MSDN 上找到了[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer%28v=vs.100%29.aspx)，它允许您将 POCO 序列化为 JSON。还有[一篇关于 CodeProject 的文章，标题为 SummiG 在 ASP.NET 中的 JSON 序列化和反序列化，](http://www.codeproject.com/Articles/272335/JSON-Serialization-and-Deserialization-in-ASP-NET)它提供了一个很好的（乍一看很完整）创建静态帮助程序类的示例。

话虽如此，我自己还没有尝试过，如果你真的走这条路，我会很感激任何反馈。

# ruby-on-rails - nil 的未定义方法“original_filename”：active_admin 中的 NilClass

> ID：13345050
> 
> 赞同：1
> 
> 时间：2012-11-12T13:59:37.327
> 
> 标签：ruby-on-rails, file-upload

虽然我在其他博客中看到了这个问题，但我无法让它适用于我的情况。我的观点：

```
<%= semantic_form_for :routes_status_race, :url => status_race_admin_routes_path do |f| %>
    <% contact_array = Contact.all.map {|contact| [contact.name, contact.id]}%>
    <% route_importer_array = RouteImporter.all.map {|importer| [importer.name, importer.id]}%>
    <%= f.inputs do%>
        <%= f.input :contact, :as => :select, :collection => Contact.all %>
        <%= f.input :route_import, :as => :select, :collection => RouteImporter.all %>
        <%= f.input :uploaded_data, :action => :status_race, :multipart => true, :as => :file %>
    <%end%>
    <input name='commit' type='submit' method='post' value='Import'/>
<%end%> 
```

我的控制器：

```
collection_action :status_race, :method => :post do

    uploaded_io = params[:uploaded_data].original_filename

    File.open(Rails.root.join('app/importers', 'uploads', uploaded_io.original_filename), 'w') do |file|
      file.write(uploaded_io.read)
    end

    RoutesQuickcom.new.run(uploaded_io.original_filename)
    render "status_race"
  end 
```

我收到此错误：我的控制器中的 nil:NilClass 的未定义方法“original_filename”，我不知道如何修复它，任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:27:22.613

您打`original_filename`了 3 次电话，删除了两次`original_filename`，它会起作用：

```
collection_action :status_race, :method => :post do

  uploaded_io = params[:uploaded_data].original_filename

  File.open(Rails.root.join('app/importers', 'uploads', uploaded_io), 'w') do |file|
    file.write(uploaded_io.read)
  end

  RoutesQuickcom.new.run(uploaded_io)
  render "status_race"
end 
```

# linux - IPC 的共享内存和线程的共享内存有什么区别？

> ID：13345059
> 
> 赞同：4
> 
> 时间：2012-11-12T14:00:28.453
> 
> 标签：linux, multithreading, ipc, shared-memory

让我们使用像 shmget() 这样的 POSIX 共享内存 - 一个协调进程间通信的常用调用。调用 shmget() 并协调共享内存段上的通信与 Linux 如何在单个进程中实现共享内存和线程之间的同步有何不同。其中一个更轻吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:17:23.053

SHM 用于多进程中的 IPC。在现代操作系统中，每个进程都看不到彼此的内存空间。使用公共密钥`shmget()`获取共享内存，并使用`shmat()`将共享内存页面映射到每个进程内的本地内存地址。由于不同的内存使用和加载到每个进程空间的共享库，映射的共享内存地址可能不同。并且 SHM 密钥、大小在这些进程中是预定义和固定的。

对于线程的内存，我们可能不叫它共享内存，因为线程都是在一个进程内存空间寻址的。他们可以在同一个进程空间中查看和读/写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T14:14:52.393

老实说，不多。在 Linux 上，没有操作系统级别的线程。一个进程，一个线程。因此，当您使用 pthreads 时，您实际上是在使用多个进程，这些进程共享除线程特定存储区域之外的所有内存。但是，在不同的 UNIX（例如 OSX）上，情况可能并非如此。但是您可以自己看到这一点，您创建了一个简单的 pthreads 进程，将其设置为后台，然后`ps`在 shell 提示符下键入。

# jquery - Rails - 基于无线电选择更改表单操作

> ID：13345063
> 
> 赞同：4
> 
> 时间：2012-11-12T14:00:50.010
> 
> 标签：jquery, ruby-on-rails-3, forms, radio-button

我是 Rails 菜鸟。我不会撒谎的。我的任务是采用两种形式并将它们变成一种动态形式。这是一个登录/注册表格。我唯一的问题是如何处理代码的 Rails 部分。使用 jQuery，我可以轻松替换 HTML 表单操作，但我将如何根据登录或注册单选选择替换 rails 代码中的操作/目标。

```
<%= form_tag login_path, :id => '_login_form' do %>
<% end %>

<%= form_tag sign_up_path, :id => '_sign_up_form' do %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T16:52:52.683

我看到两个选项可以解决您的问题。

使用 javascript，您可以根据选择的单选按钮更改表单的操作。

```
$("#radio").change(function() {
  var action = $(this).val() == "some_value" ? "login" : "sign_up";
  $("#your-form").attr("action", "/" + action);
}); 
```

或者您可以在一个操作中处理这两种方法并分别处理每个选项

```
#view
<p> <%= radio_button_tag :option, "login" %> Orange </p>
<p> <%= radio_button_tag  :option, "sign_up" %> Peach </p>

#controller
if params[:option] == "login"
  #do login
elsif params[:option] == "sign_up"
  #do sign up
end 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-20T16:23:51.820

如果对象只使用一个表单，但要让不同的提交按钮转到不同的表单操作，那么这似乎是`formaction`提交输入属性的完美用例。

[MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/submit#formaction)

请注意，这`formmethod`是另一个属性，如果您只想更改方法。

以下是您可能会做什么的想法：

```
 <%= submit_tag('Sign Up', formaction: 'user#create', formmethod: 'POST') %>

  <%= submit_tag('Log In', formaction: 'user#login', formmethod: 'POST') %> 
```

这些表单* 属性中的任何一个都优先于表单操作。

# windows - Windows：如何使用大小和上次访问日期递归列出文件？

> ID：13345066
> 
> 赞同：27
> 
> 时间：2012-11-12T14:01:01.680
> 
> 标签：windows, powershell, console

我需要一种简单的方法来创建某个文件夹中所有文件的列表。（递归）

每个文件必须在一行中。我还需要同一行中的文件大小和上次访问日期，用特殊字符分隔。

输出（文本文件）应如下所示：

```
c:\folder\file1.txt|400|2012-11-12 15:23:08
c:\folder\file2.txt|200|2012-11-12 15:23:08
c:\folder\file3.txt|100|2012-11-12 15:23:08
c:\folder\sub folder\file4.txt|500|2012-11-12 15:23:08 
```

'Dir' 似乎不是一个选项，因为德语特殊字符会这样弄乱。(öäüß)

Powershell 可以很好地处理特殊字符，但我无法让一个文件的信息在一行中结束：

```
get-childitem D:\temp -rec | where {!$_.PSIsContainer} |  foreach-object -process {$_.FullName, $_.LastWriteTime, $_.Length} 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-12T14:05:21.167

试试这个：

```
get-childitem D:\temp -rec | where {!$_.PSIsContainer} |
select-object FullName, LastWriteTime, Length | export-csv -notypeinformation -delimiter '|' -path file.csv 
```

# hibernate - hibernate-core.4.1.4.Final.jar中blob类型的替代

> ID：13345068
> 
> 赞同：0
> 
> 时间：2012-11-12T14:01:05.300
> 
> 标签：hibernate

在我之前的项目中，我使用的是**hibernate-core.3.6.5.Final** jar，它具有“public static final BlobType BLOB = BlobType.INSTANCE;”。现在我需要将hibernate core jar升级到**hibernate-core.4.1.4.Final** jar。哪个不支持 BlobType。

请建议我在升级到 4.1.4.Final jar 后如何管理 BlobType 支持。

# c++ - C++：X 不命名类型，而使用 typedef

> ID：13345070
> 
> 赞同：-1
> 
> 时间：2012-11-12T14:01:07.413
> 
> 标签：c++, typedef

我有以下代码：

“类 1.h”

```
class Class1{
public:
    typedef boost::multi_array<double, 3> integral_image;
}; 
```

“exampleStruct.h”

```
#include "Class1.h"
struct s{
    typedef Class1::integral_image integral_image;
    integral_image a;
}; 
```

我收到以下错误：“Class1 没有命名类型”但不知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:02:35.523

在代码中

```
class Class1{
public:
    typedef boost::multi_array<double, 3> integral_image;
} 
```

类定义末尾缺少**分号。**

从编译器的角度来看，它永远不会结束……

# java - JInternalFrame 图像包

> ID：13345074
> 
> 赞同：0
> 
> 时间：2012-11-12T14:01:20.227
> 
> 标签：java, swing, jpanel, paintcomponent, jinternalframe

我有一个程序，里面有 JFrame 和 JInternalFrames。因此，当我尝试使用此代码设置背景时：

```
 BufferedImage myImage;
 myImage = ImageIO.read(new File("C:/5/JavaLibrary2/background.jpg"));
 ImagePanel Image = new ImagePanel(myImage);
 frame.setContentPane(Image); 
```

我的 JInternalFrames 刚刚消失。[因此，请查看带有调试](http://youtu.be/fQbg_pMguAw)的简短视频

**frame.setContentPane(图片); 只需删除我的 JInternal 窗口。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:40:54.010

我没有问题。

![在此处输入图像描述](../Images/c427ab1c0c768a63f0d04ff81b786e42.png)

我已经使用了 a`JLabel`和 custom 绘画程序。

在将它们添加到桌面之前，我已经创建并设置了内部框架，

我已将内部框架添加到桌面，然后更改了它们的内容窗格，并将更新扔到 EDT 的末尾以确保主框架可见。

问题一定出在您没有向我们展示的代码的某些部分。

```
public class TestInternalFrame {

    public static void main(String[] args) {
        new TestInternalFrame();
    }

    public TestInternalFrame() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JDesktopPane desktop = new JDesktopPane();

                final JInternalFrame frame1 = new JInternalFrame("Image on Label");
//                frame1.setContentPane(new LabelImagePane());
//                frame1.pack();
//                frame1.setLocation(0, 0);
                frame1.setVisible(true);
                desktop.add(frame1);

                final JInternalFrame frame2 = new JInternalFrame("Painted Image");
//                frame2.setContentPane(new ImagePane());
//                frame2.pack();
//                frame2.setLocation(frame1.getWidth(), 0);
                frame2.setVisible(true);
                desktop.add(frame2);

                JFrame frame = new JFrame("I Haz Images");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(desktop);
                frame.setSize(800, 400);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        frame1.setContentPane(new LabelImagePane());
                        frame1.pack();
                        frame1.setLocation(0, 0);
                        frame2.setContentPane(new ImagePane());
                        frame2.pack();
                        frame2.setLocation(frame1.getWidth(), 0);
                    }
                });

            }
        });
    }

    public class LabelImagePane extends JPanel {

        public LabelImagePane() {
            setLayout(new BorderLayout());
            JLabel label = new JLabel();
            add(label);

            try {
                label.setIcon(new ImageIcon(ImageIO.read(new File("..."))));
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    public class ImagePane extends JPanel {

        private BufferedImage image;

        public ImagePane() {
            try {
                image = ImageIO.read(new File("..."));
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return image == null ? super.getPreferredSize() : new Dimension(image.getWidth(), image.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (image != null) {
                int x = (getWidth() - image.getWidth()) / 2;
                int y = (getHeight() - image.getHeight()) / 2;
                g.drawImage(image, x, y, this);
            }
        }
    }
} 
```

# c# - 通过网络共享使用 File.Move 是否安全/高效？

> ID：13345075
> 
> 赞同：1
> 
> 时间：2012-11-12T14:01:21.973
> 
> 标签：c#, windows, networking, copy, share

我有一个 DocumentStore（网络共享的时髦术语）和一个数据库，其中包含与复制到存储中的文档相关的条目。我将使用数据库行的自动生成 (int) ID 作为文件名和分区目录结构（例如 ID=4433 最终将被放入 '\004\433\0000004433.xxx'）

我显然不能在复制文件时对数据库保持任何形式的锁定，但我不确定哪种策略更好：

a) 向数据库添加一行以获取 ID（可能带有 InProgress 标志），将文件复制到目标位置，然后再次更新该行以在复制成功后清除该标志。

b) 将文件复制到共享根目录下的临时文件名；完成后，将新行插入数据库以获取 ID 并调用 File.Move 将临时文件移动到正确的目的地。如果插入/移动文件是在事务中完成的，那么任何失败都意味着插入被回滚并且其他人看不到

(b) 如果它真的是移动而不是复制/删除，应该没问题，但是这样做安全吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:11:33.497

移动与复制/删除一样安全。

如果源和目标位于不同的卷上，则移动不会从源中删除。要么复制，要么不复制。

```
Move = Copy if volume are different. (File.Delete is required to delete source file).  
Move = Copy + Delete is volume is same. 
```

除了上述之外，使用移动/移动+删除或复制+删除没有区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:06:04.130

移动是完全安全的。转到网络共享时，它与复制/删除没有太大区别。

# javascript - 提交时清除默认搜索文本

> ID：13345080
> 
> 赞同：1
> 
> 时间：2012-11-12T14:01:50.410
> 
> 标签：javascript, jquery, html, forms

我有以下代码将帮助文本放入搜索输入框中，当您单击该框时该文本会被删除，如果您单击其他任何地方而不更改它，则会返回：

```
$('#search-form input[type="text"]').each(function(){
    var defaultVal = 'Category Search';
    $(this).focus(function(){
      if ($(this).val() == defaultVal){
        $(this).removeClass('active').val('').css('color', '#000');;
      }
    })
    .blur(function(){
      if ($(this).val() == ''){
        $(this).addClass('active').val(defaultVal).css('color', '#CCC');
      }
    })
    .blur().addClass('active');
}); 
```

但是如果用户在没有点击输入框的情况下点击提交，网站会搜索帮助值（Category Search）。

我需要做的是在提交时检查值，如果是，`Category Search`则执行以下操作：

*   将帮助文本更改为`Please enter a category`
*   不要提交表格。

我试过这个，但它阻止了我的默认值（类别搜索）一起工作：

```
$('#search-form input[type="submit"]').click(function() {
    if ($(this).val() == "Category Search")
        //do stuff here
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:04:33.677

[HTML5 占位符](https://developer.mozilla.org/en-US/docs/HTML/Element/Input#attr-placeholder)是您应该为支持它的浏览器使用的，无需编写代码来删除它。

对于不支持它的浏览器，有很多插件可以让它工作。

为什么不忽略服务器上的默认值？似乎是过滤掉它的合乎逻辑的地方。

您的代码失败的原因是这是提交按钮，而不是表单字段！

```
$('#search-form input[type="submit"]').click(function() {
if ($(this).val() == "Category Search")  <-- this is the submit button, not the input
    //do stuff here
});​ 
```

您需要将其更改为指向输入

```
$('#search-form').on("submit",function() {
    $('#search-form input[type="text"]').each( function() {
        //do comparison here, you could use defaultValue attribute
    } );
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T14:23:13.190

## *[jsBin 演示](http://jsbin.com/ewowoq/3/edit)*

```
var defaultVal = 'Category Search';
var enterCat = 'Please enter a category';

$('#search-form input[type="text"]').each(function(){

    $(this).focus(function(){
      if ($(this).val() == defaultVal || $(this).val() == enterCat){
        $(this).removeClass('active').val('').css('color', '#000');
      }
    })
    .blur(function(){
      if ($.trim($(this).val()) === ''){
        $(this).addClass('active').val(defaultVal).css('color', '#CCC');
      }
    })
    .blur().addClass('active');
});

$('#search-form').submit(function(e) {

  if ( $(this).find('[type="text"]').val() === defaultVal){
    e.preventDefault();
    $(this).find('[type="text"]').prop('value', enterCat);    
  } 

}); 
```

并`$.trim()`在搜索空白输入之前使用（空格）:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T14:05:48.190

如果你不能使用`placeholder`（如果可以的话你真的应该使用），那么你可以简单地将字段设置为`disabled`：

```
$('#search-form input[type="submit"]').click(function() {
    if ($(this).val() == "Category Search") {
        $(this).prop('disabled',true);
    }
});​ 
```

该`disabled`属性本质上保证该字段“不成功”，因此不会提交给服务器。

> 一个成功的控件对于提交是“有效的”。每个成功的控件都将其控件名称与其当前值配对，作为提交的表单数据集的一部分。成功的控件必须在 FORM 元素中定义，并且必须具有控件名称。
> 
> 然而：
> 
> *   禁用的控件无法成功...

[引用：http://www.w3.org/TR/html401/interact/forms.html#h-17.13.2](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.2)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T14:05:58.433

我同意使用`placeholder`，但这是您问题的答案：

```
$('#search-form input[type="submit"]').click(function() {
if ($('#search-form input[type="text"]') == "Category Search")
    $('#search-form input[type="text"]').val("Please enter a category");
    return false;
});​ 
```

我个人会在搜索字段附近创建一个错误框，而不是更改其中已有的文本 - 否则您将遇到提交“请输入类别”的人的问题......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T14:07:09.647

您正在尝试获取提交按钮的 .val()

```
$('#search-form input[type="submit"]').click(function() {
   if ($('#search-form input[type="text"]').val() == "Category Search")
      //do stuff here
});​ 
```

但是您可能应该将其挂钩以提交表单本身的事件，但这取决于您的实现实际如何工作。

```
 $('#search-form').submit(function() {
   if ($('#search-form input[type="text"]').val() == "Category Search")
      //do stuff here
});​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T14:04:31.960

简单得多：大多数新浏览器都允许这样做：

```
<input type="text" placeholder="your prompt here" /> 
```

但对于较旧的浏览器，您可以这样做：

```
$(function() {
  if ($.browser.msie) {
    $('#search-form input[type="text"]').each(function(){       
      $(this).val($(this).attr("placeholder"));
    });
  }
  $("#search-form").on("submit",function() {
    var cnt=0,empty++;
    $("#search-form input[type='text']").each(function(){
      var box = $(this),val = box.val();
      if (val == box.attr("placeholder")){
        box.val("");
      }
      else {
        box.val($.trim(val));
      }
      if (box.val()=="") empty++;
      cnt++;
    });
    if (empty==cnt) return false;
  });
}); 
```

# linux - 内核的 panic() 函数会完全冻结所有其他进程吗？

> ID：13345081
> 
> 赞同：9
> 
> 时间：2012-11-12T14:02:00.017
> 
> 标签：linux, kernel, panic

我想确认内核的`panic()`功能和其他功能一样`kernel_halt()`，`machine_halt()`一旦触发，保证机器完全冻结。

那么，所有内核和用户进程都被冻结了吗？是否`panic()`可以被调度程序中断？中断处理程序仍然可以执行吗？

用例：如果出现严重错误，我需要确保硬件看门狗重置机器。为此，我需要确保*没有其他线程/进程*使看门狗保持活动状态。我需要触发系统完全停止。目前，在我的内核模块中，我只是调用`panic()`来冻结所有内容。

另外，用户空间`halt`命令可以保证冻结系统吗？

谢谢。

编辑：根据： http: [//linux.die.net/man/2/reboot](http://linux.die.net/man/2/reboot)，我认为最好的方法是使用`reboot(LINUX_REBOOT_CMD_HALT)`：“控制权交给 ROM 监视器，如果有的话”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T08:43:15.607

感谢您的上述评论。经过一番研究，我准备给自己一个更完整的答案，如下：

至少对于 x86 架构，这`reboot(LINUX_REBOOT_CMD_HALT)`是要走的路。这反过来又调用了系统调用`reboot()`（参见： http: [//lxr.linux.no/linux+v3.6.6/kernel/sys.c#L433](http://lxr.linux.no/linux+v3.6.6/kernel/sys.c#L433)）。然后，对于`LINUX_REBOOT_CMD_HALT`标志（参见： http: [//lxr.linux.no/linux+v3.6.6/kernel/sys.c#L480](http://lxr.linux.no/linux+v3.6.6/kernel/sys.c#L480)），系统调用调用`kernel_halt()`（在此处定义：http: [//lxr.linux.no/ linux+v3.6.6/kernel/sys.c#L394](http://lxr.linux.no/linux+v3.6.6/kernel/sys.c#L394)）。该函数调用 syscore_shutdown() 来执行所有注册的系统核心关闭回调，显示“系统停止”消息，然后转储内核，最后，它调用`machine_halt()`，这是一个包装器`native_machine_halt()`（参见：[http://lxr .linux.no/linux+v3.6.6/arch/x86/kernel/reboot.c#L680](http://lxr.linux.no/linux+v3.6.6/arch/x86/kernel/reboot.c#L680)）。正是这个函数停止了其他 CPU（通过`machine_shutdown()`)，然后调用`stop_this_cpu()`以禁用最后一个剩余的工作处理器。该函数所做的第一件事是禁用当前处理器上的中断，即调度程序不再能够控制。

我不知道为什么系统调用`reboot()`仍然调用`do_exit(0)`，调用后`kernel_halt()`。我是这样解释的：现在，所有处理器都标记为禁用，系统调用会自行`reboot()`调用`do_exit(0)`并结束。即使调度程序被唤醒，也没有更多启用的处理器可以在其上调度某些任务，也不会中断：系统已停止。我不确定这个解释，因为`stop_this_cpu()`似乎没有返回（它进入无限循环）。Maybe 只是一个保障，对于`stop_this_cpu()`失败（并返回）的情况：在这种情况下，`do_exit()`将干净地结束当前任务，然后`panic()`调用该函数。

至于`panic()`代码（在这里定义：http: [//lxr.linux.no/linux+v3.6.6/kernel/panic.c#L69](http://lxr.linux.no/linux+v3.6.6/kernel/panic.c#L69)），该函数首先禁用本地中断，然后禁用所有其他处理器，除了当前一个通过调用`smp_send_stop()`. 最后，作为在当前处理器（这是唯一还活着的处理器）上执行的唯一任务，所有本地中断都被禁用（也就是说，可抢占式调度程序——毕竟是一个定时器中断——没有机会......） ，然后`panic()`函数循环一段时间或它调用`emergency_restart()`，这应该重新启动处理器。

如果您有更好的见解，请贡献。

# python - 用 BeautifulSoup 抓取一系列表格

> ID：13345085
> 
> 赞同：3
> 
> 时间：2012-11-12T14:02:15.993
> 
> 标签：python, beautifulsoup

我正在尝试学习网络抓取和 python（以及相关的编程），并找到了 BeautifulSoup 库，它似乎提供了很多可能性。

我正在尝试找出如何最好地从此页面中提取相关信息：

[http://www.aidn.org.au/Industry-ViewCompany.asp?CID=3113](http://www.aidn.org.au/Industry-ViewCompany.asp?CID=3113)

我可以对此进行更详细的介绍，但基本上是公司名称、关于它的描述、联系方式、各种公司详细信息/统计数据等

在这个阶段，研究如何干净地隔离这些数据并刮掉它，以期将它们全部放在 CSV 或其他东西中。

我很困惑如何使用 BS 来获取不同的表数据。有很多 tr 和 td 标签，不知道如何锚定任何独特的东西。

我想出的最好的方法是以下代码作为开始：

```
from bs4 import BeautifulSoup
import urllib2

html = urllib2.urlopen("http://www.aidn.org.au/Industry-ViewCompany.asp?CID=3113")
soup = BeautifulSoup(html)
soupie = soup.prettify()
print soupie 
```

然后从那里使用正则表达式等从清理的文本中提取数据。

但是必须有更好的方法来使用 BS 树来做到这一点？或者这个网站的格式是 BS 不会提供更多帮助的吗？

不寻找完整的解决方案，因为这是一个很大的问题，我想学习，但是任何让我上路的代码片段都将不胜感激。

**更新**

感谢下面的@ZeroPiraeus，我开始了解如何解析表格。这是他的代码的输出：

```
=== Personnel ===
bodytext    Ms Gail Morgan CEO
bodytext    Phone: +61.3\. 9464 4455 Fax: +61.3\. 9464 4422
bodytext    Lisa Mayoh Sales Manager
bodytext    Phone: +61.3\. 9464 4455 Fax: +61.3\. 9464 4422 Email: bob@aerospacematerials.com.au

=== Company Details ===
bodytext    ACN: 007 350 807 ABN: 71 007 350 807 Australian Owned Annual Turnover: $5M - $10M Number of Employees: 6-10 QA: ISO9001-2008, AS9120B, Export Percentage: 5 % Industry Categories: AerospaceLand (Vehicles, etc)LogisticsMarineProcurement Company Email: lisa@aerospacematerials.com.au Company Website: http://www.aerospacematerials.com.au Office: 2/6 Ovata Drive Tullamarine VIC 3043 Post: PO Box 188 TullamarineVIC 3043 Phone: +61.3\. 9464 4455 Fax: +61.3\. 9464 4422
paraheading ACN:
bodytext    007 350 807
paraheading ABN:
bodytext    71 007 350 807
paraheading 
bodytext    Australian Owned
paraheading Annual Turnover:
bodytext    $5M - $10M
paraheading Number of Employees:
bodytext    6-10
paraheading QA:
bodytext    ISO9001-2008, AS9120B,
paraheading Export Percentage:
bodytext    5 %
paraheading Industry Categories:
bodytext    AerospaceLand (Vehicles, etc)LogisticsMarineProcurement
paraheading Company Email:
bodytext    lisa@aerospacematerials.com.au
paraheading Company Website:
bodytext    http://www.aerospacematerials.com.au
paraheading Office:
bodytext    2/6 Ovata Drive Tullamarine VIC 3043
paraheading Post:
bodytext    PO Box 188 TullamarineVIC 3043
paraheading Phone:
bodytext    +61.3\. 9464 4455
paraheading Fax:
bodytext    +61.3\. 9464 4422 
```

我的下一个问题是，将这些数据放入适合导入电子表格的 CSV 的最佳方法是什么？例如，将“ABN”“ACN”“公司网站”等内容作为列标题，然后将相应的数据作为行信息。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:32:31.953

您的代码将完全取决于您想要什么以及您希望如何存储它，但是这个片段应该让您了解如何从页面中获取相关信息：

```
import requests

from bs4 import BeautifulSoup

url = "http://www.aidn.org.au/Industry-ViewCompany.asp?CID=3113"
html = requests.get(url).text
soup = BeautifulSoup(html)

for feature_heading in soup.find_all("td", {"class": "Feature-Heading"}):
    print "\n=== %s ===" % feature_heading.text
    details = feature_heading.find_next_sibling("td")
    for item in details.find_all("td", {"class": ["bodytext", "paraheading"]}):
        print("\t".join([item["class"][0], " ".join(item.text.split())])) 
```

我找到[`requests`](http://docs.python-requests.org/en/latest/)了一个比 更愉快的图书馆`urllib2`，但这当然取决于你。

**编辑：**

为了回答您的后续问题，您可以使用以下内容从抓取的数据中写入 CSV 文件：

```
import csv
import requests

from bs4 import BeautifulSoup

columns = ["ACN", "ABN", "Annual Turnover", "QA"]
urls = ["http://www.aidn.org.au/Industry-ViewCompany.asp?CID=3113", ] # ... etc.

with open("data.csv", "w") as csv_file:
    writer = csv.DictWriter(csv_file, columns)
    writer.writeheader()
    for url in urls:
        soup = BeautifulSoup(requests.get(url).text)
        row = {}
        for heading in soup.find_all("td", {"class": "paraheading"}):
            key = " ".join(heading.text.split()).rstrip(":")
            if key in columns:
                next_td = heading.find_next_sibling("td", {"class": "bodytext"})
                value = " ".join(next_td.text.split())
                row[key] = value
        writer.writerow(row) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T17:56:59.660

我曾经在这条路上走过。我使用的 html 页面的格式始终与表格相同，并且是公司内部的。我们确保客户知道，如果他们更改页面，很可能会破坏编程。通过该规定，能够通过 tr 和 td 列表中的索引值确定所有内容的位置。这远非拥有他们无法或不愿提供的 XML 数据的理想情况，但已经完美运行了将近一年。如果有人知道更好的答案，我也想知道。那是我第一次也是唯一一次使用 Beautiful Soup，从那以后就再也不需要它了，但效果很好。

# .net - 将 CheckForIllegalCrossThreadCalls 设置为 false 以避免调试期间出现跨线程错误是否安全？

> ID：13345091
> 
> 赞同：20
> 
> 时间：2012-11-12T14:02:32.673
> 
> 标签：.net, multithreading, winforms

在 WinForms 应用程序中，将[CheckForIllegalCrossThreadCalls](https://msdn.microsoft.com/en-us/library/system.windows.forms.control.checkforillegalcrossthreadcalls(v=vs.110).aspx)设置为 FALSE 以避免调试期间出现跨线程错误是否安全？

```
CheckForIllegalCrossThreadCalls = false; 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-12T14:36:54.677

不，那不安全。检查线程错误的 Winforms 代码**非常**重要，导致的故障极难诊断。最大的问题是它不会导致一致的失败，您的应用程序会随机出现异常行为，并且每月只会出现一次死锁或崩溃。或者根本不做，直到你做一个小的改变。或者只在特定用户的机器上，你会责怪用户而不是你的代码。

CheckForIllegalCrossThreadCalls 属性首先存在的唯一原因是保持 .NET 2.0 及更高版本与未执行此线程安全测试的有缺陷的 .NET 1.x 程序兼容。错误的向后兼容性；-P

# c# - 进程信息给出错误但 bat 文件没有

> ID：13345096
> 
> 赞同：0
> 
> 时间：2012-11-12T14:02:40.240
> 
> 标签：c#

我尝试使用类 ProcessInfo 从 C# 启动 ilasm

```
 string arguments = string.Format("\"{0}\" /exe /output:\"{1}\"  /debug=IMPL", ilFullFileName, exeFileFullName);
 ProcessStartInfo processStartInfo = new ProcessStartInfo(CILCompiler, arguments);
 processStartInfo.UseShellExecute = false;
 processStartInfo.CreateNoWindow = false;
 processStartInfo.WorkingDirectory = @"c:\Windows\Microsoft.NET\Framework\v4.0.30319\";
 using (Process process = Process.Start(processStartInfo))
 {
    process.WaitForExit();
 } 
```

论据是：

```
"path_to_il.il" /exe /output:"path_to_exe.exe"  /debug=IMPL 
```

然后它给了我错误：

```
The application was unable to start correctly (0xc0000007b). Click Ok to close the application. 
```

奇怪的是，当我使用 bat 文件手动执行完全相同的操作时

```
"c:\Windows\Microsoft.NET\Framework\v4.0.30319\ilasm.exe"  "path_to_il.il" /exe /output:"path_to_exe.exe"  /debug=IMPL
pause 
```

它确实有效。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:10:45.570

我认为您还需要设置文件名：

```
 processStartInfo.FileName = "ilasm.exe"; 
```

# python - Python：Selenium 得到空结果

> ID：13345110
> 
> 赞同：0
> 
> 时间：2012-11-12T14:03:56.133
> 
> 标签：python, selenium, python-2.7, selenium-webdriver

我正在关注[此视频](http://www.youtube.com/watch?v=DL7gyuqkzzU)以熟悉硒。我的代码是

```
from selenium import webdriver
from selenium.webdriver.common.keys import Keys

from pyvirtualdisplay import Display
import os

chromedriver = "/usr/bin/chromedriver"
os.environ['webdriver.chrome.driver'] = chromedriver

display = Display(visible=0, size=(800,600))
display.start()

br = webdriver.Chrome(chromedriver)
br.get("http://www.google.com") 
```

现在打印结果

```
q = br.find_element_by_name('q')
q.send_keys('python')
q.send_keys(Keys.RETURN)
print br.title

results = br.find_elements_by_class_name('g')
print results

for result in results:
    print result.text
    print "-"*140 
```

我得到的输出是公正的`python`，当我尝试打印`results`它时`[]`。

当我在 chrome 的 javascript 控制台中尝试以下代码时，它工作正常。

```
res = document.getElementsByClassName('g')[0]
<li class=​"g">​…​&lt;/li>​
res.textContent
"           Python Programming Language – Official Websitewww.python.org/Cached - SimilarShareShared on Google+. View the post.You +1'd this publicly. UndoHome page for Python, an interpreted, interactive, object-oriented, extensible programming language. It provides an extraordinary combination of clarity and ...CPython - Documentation - IDEs - GuiProgramming" 
```

所以，知道为什么我没有用 selenium+python 得到任何结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:44:17.980

添加`time.sleep(3)`之后`q.send_keys(Keys.RETURN)`似乎可以解决问题。这是因为当您按下 Keys.RETURN 时，ajax 开始工作，而当您尝试收集结果时，它们还没有出现在页面上。Selenium，AFAI 没有直接的方法来确定这样的脚本是否已经完成执行。

我认为，这样做会更可靠

```
br.get("http://www.google.com/search?q=python")
results = br.find_elements_by_class_name('g') 
```

# java - Hashmap 更新未反映在线程之间

> ID：13345112
> 
> 赞同：1
> 
> 时间：2012-11-12T14:04:04.090
> 
> 标签：java, multithreading, hashmap

我有一个包含 hahsmap 的单例类，hashmap 被初始化为类变量。该地图已正确更新，因为当我添加并打印它更改的大小时，但是当我从不同的线程调用它时，地图始终为空。发生这种情况是否有特殊原因？

如果这有什么不同，我正在使用 ConccurentHashMap。

谢谢

```
Singleton decleration:

    public class ClientRegistryDetailsSingleton {

        private static ClientRegistryDetailsSingleton instance = null;
        private ConcurrentHashMap<String, Integer> tickerToNumberRegistered = new ConcurrentHashMap<String,Integer>();

        protected ClientRegistryDetailsSingleton() {
             // Exists only to defeat instantiation.
        }

        public static ClientRegistryDetailsSingleton getInstance() {
            if(instance == null) {
               instance = new ClientRegistryDetailsSingleton();
            }
            return instance;
        }

        public void setTickerToNumberRegistered(ConcurrentHashMap<String, Integer> tickerToNumberRegistered) {
            this.tickerToNumberRegistered = tickerToNumberRegistered;
        }

        public ConcurrentHashMap<String, Integer> getTickerToNumberRegistered() {
            return tickerToNumberRegistered;
        }

    public void addToClienets(String ticker){}

    public void removeFromClients(String ticker){}
} 
```

从另一个线程调用它：

```
String[] splitForTicker = message.split(",");

        ConcurrentHashMap<String, Integer> map = ClientRegistryDetailsSingleton.getInstance().getTickerToNumberRegistered();
        System.out.println("The number of items in the map from senders persepctive" + map.size()); 
```

输出：

> ```
> The number of items in the map from senders persepctive 0
> 2012-11-12 14:29:12,495 [Process messages received] INFO  com.feed.feedReceive.ProcessFeedStreamLine - Successfully received a message from the feed
> The number of items in the map from senders persepctive 0
> 1 :the size of the map now someone has added
> 2012-11-12 14:29:15,495 [Process messages received] INFO  com.feed.feedReceive.ProcessFeedStreamLine - Successfully received a 
> ```
> 
> 来自提要的消息 来自发件人的地图中的项目数 persepctive 0

单例的新代码

```
public class ClientRegistryDetailsSingleton {

    private static ClientRegistryDetailsSingleton instance = new ClientRegistryDetailsSingleton();
    private volatile ConcurrentHashMap<String, Integer> tickerToNumberRegistered = new ConcurrentHashMap<String,Integer>();

    protected ClientRegistryDetailsSingleton() {
         // Exists only to defeat instantiation.
    }

    public static synchronized ClientRegistryDetailsSingleton getInstance() {
        return instance;
    }

    public synchronized ConcurrentHashMap<String, Integer> getTickerToNumberRegistered() {
        return tickerToNumberRegistered;
    }

    public void addToClienets(String ticker){}

    public void removeFromClients(String ticker){}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:11:31.653

`getInstance()`如果两个线程调用并且尚未构造单例，则发布的代码中存在竞争条件，这可能导致构造多个单例实例：

```
public static ClientRegistryDetailsSingleton getInstance() {
    if(instance == null) {                                   // Line 1
        instance = new ClientRegistryDetailsSingleton();     // Line 2
    }
} 
```

可能执行两个线程，`T1`并且`T2`：

*   T1 在第 1 行执行检查并进入`if`分支。
*   T1 被暂停，`instance`仍然是`null`。
*   T2 在 1 号线进行检查并进入`if`分支。
*   T2 构造类并分配给`instance`.
*   T2 返回`instance`给调用者。
*   T2 暂停。
*   T1 再次启动并构造另一个实例并分配给`instance`。

单个实例的构造必须是线程安全的。可能的解决方案是：

*   制作`getInstance()`方法`synchronized`。
*   不要使用延迟初始化（如果可能）：

    ```
    private static final ClientRegistryDetailsSingleton instance =
        new ClientRegistryDetailsSingleton(); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:37:45.513

DCL 反模式的实现：[http ://en.wikipedia.org/wiki/Double_checked_locking](http://en.wikipedia.org/wiki/Double_checked_locking)

```
public class ClientRegistryDetailsSingleton {

    private static volatile ClientRegistryDetailsSingleton instance = null;

    private final ConcurrentHashMap<String, Integer> tickerToNumberRegistered = new ConcurrentHashMap<String,Integer>();

    private ClientRegistryDetailsSingleton() {
         // Exists only to defeat instantiation. 
         // please not that constructor should be private
    }

    public static ClientRegistryDetailsSingleton getInstance() {
         if (instance == null) {
               synchronized(ClientRegistryDetailsSingleton.class){
                  if(instance == null)
                    instance = new ClientRegistryDetailsSingleton();
               }
         }
         return instance;
    }

    //You should not break encapsulation and allow a link to HashMap escape
    private void setTickerToNumberRegistered(ConcurrentHashMap<String, Integer> tickerToNumberRegistered) {
        this.tickerToNumberRegistered = tickerToNumberRegistered;
    }

    //You should not break encapsulation and allow a link to HashMap escape
    private ConcurrentHashMap<String, Integer> getTickerToNumberRegistered() {
    }

     //I omitted the access to the hash map it's likely that some additional params required
     public void addToClienets(String ticker){}

     //I omitted the access to the hash map it's likely some additional params are required
     public void removeFromClients(String ticker){}
} 
```

我仅将其作为同步示例展示，在现实生活中，您可能应该将单例实现为 Enums ：[在 Java 中使用 Enum 作为单例的最佳方法是什么？](https://stackoverflow.com/questions/427902/what-is-the-best-approach-for-using-an-enum-as-a-singleton-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T14:10:51.780

将您的哈希映射定义为

```
private volatile ConcurrentHashMap<String, Integer> 
```

volatile关键字警告JVM，该变量的状态随时可能被另一个线程改变，所以一定不能在本地缓存。

也可能需要将实例定义为 volatile。

# database - Symfony2多数据库，为每张表指定数据库

> ID：13345113
> 
> 赞同：0
> 
> 时间：2012-11-12T14:04:06.343
> 
> 标签：database, symfony, connection

问题是我在 Symfony 中定义了 2 个以上的数据库。当我用

```
php app/console dotrine:schema:update --force 
```

它使表在默认数据库中。我想指定该表属于哪个数据库。我怎么能这样做？

我对实体使用 yaml(yml) 格式，例如：

```
Test\ExampleBundle\Entity\TestTable:
    type: entity
    table: test_table
    id:
        id:
            type: integer
            generator:
                strategy: AUTO
    fields:
        name:
            type: string
            length: 255
        sound:
            type: smallint 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T14:08:57.337

深入了解文档的[如何使用多个实体管理器和连接](http://symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html)部分。

Doctrine 为您提供了拥有多个连接的能力。您可以轻松添加实体管理器，根据实体所属的捆绑包将实体绑定到不同的预定义连接。

根据文档，您可以将捆绑包绑定到实体管理器，但这里是关于如何在同一个捆绑包中使用两个实体管理器**的技巧，**

如果您想将一个包中的实体绑定到不同的实体管理器，您可以添加一个“dir”属性来定义特定实体文件夹的路径。

例子，

```
 entity_managers:
        default:
            connection:       default
            mappings:
                MyBundle:
                    dir:      Path/To/EntityFolder1
        myManager:
            connection:       myConnection
            mappings:
                MyBundle:
                    dir:      Path/To/EntityFolder2 
```

然后，您可以根据绑定的连接将捆绑实体放入正确的文件夹中。

# c++ - GMP-无模功率

> ID：13345126
> 
> 赞同：3
> 
> 时间：2012-11-12T14:04:56.087
> 
> 标签：c++, c, gmp

我试图将任意大的数字提高到任意大的功率。据我所见，GMP 有一个函数可以做到这一点，但对结果进行模运算，还有一个函数可以让我将任意数字提升为`unsigned int`指数。有没有解决的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T14:28:16.350

> 和一个让我将任意数字提高到`unsigned int`指数的函数

这是一个`unsigned long int`指数，所以如果你在一个`unsigned long`64 位（或更多）的系统上，这将使你在接下来的几年中超出可用内存（`2^(2^64-1)`需要几个艾字节存储）。

如果您使用的是 32-bit 系统`unsigned long`，则可以将指数分成两部分，

```
if (exponent >= (1u << 31)) {
    mpz_pow_ui(base, base, exponent >> 31);
    mpz_pow_ui(base, base, 1u << 31);
}
mpz_pow_ui(base, base, exponent & ((1u << 31) - 1)); 
```

这很有可能需要比你更多的内存。

另一个问题是 GMP 使用`int`s 来计算肢体，所以通常你不能使用超过`(2^31 - 1)*BITS_PER_LIMB`位的数字（`BITS_PER_LIMB`通常是 32 或 64，具体取决于平台）。

如果你认为你需要`a^b`where`a > 1`并且`b`不适合 in `unsigned long (long)`，那么无论如何你都会遇到 GMP 和你的记忆问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T14:12:16.233

通过将一个非常大的数提高到非常大的幂，您会得到**非常多的位数**。

可能比计算机内存空间更多的数字。

例如，这台笔记本电脑有一个 6 GB 的主内存，这意味着 6*2^30 位。现在，如果将 (2^10) 提高到 (2^10) 次方，则得到 2^(10*(2^10)) = 2^10240。这比 6*2^30 多很多倍。

简而言之，如果您想要一个一般情况的确切答案，就没有办法了。

但是，对于特定情况，您可能能够将答案表达为例如 2^10240 之类的干净幂，但这意味着仅使用人脑或**计算机代数系统**，例如 Macsyma 或 Matehmatica（我不确定所有这些的名称，但谷歌它）。

# javascript - 使用 jquery 或纯 js 更改 url

> ID：13345127
> 
> 赞同：2
> 
> 时间：2012-11-12T14:05:01.017
> 
> 标签：javascript, jquery, ajax, url

嗨，我写了一些 ajax 代码，用户停留在 www.somedomain.com 页面，插入一些数据，ajax 带来响应。当响应到来时，我希望将 url 更改为 www.somedomain.com/response 但浏览器仍保留为 www.somedomain.com 页面内容。所以页面不会改变，但只有 url 会略有不同。我也不希望 index.html 在 url 中可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:08:06.483

要支持旧版浏览器，您可以使用哈希导航：

[保存 JavaScript 中哈希/锚点更改的历史记录](https://stackoverflow.com/questions/1078501/keeping-history-of-hash-anchor-changes-in-javascript)

如果您只希望它在现代浏览器上运行，您可以使用 HTML 5 History API。

[http://diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)（链接感谢 Christian Varg）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:21:19.307

显然，您可以使用**HTML5 History API**来更改浏览器 URL，但在您的情况下，您必须更改 Ajax 响应上的 url，因此您必须在客户端处理 Ajax 事件。即，如果您在 Ajax 响应开始时更改 URL 并在 Ajax 响应结束时更改回原始 URL，则您必须处理 Ajax 的两个事件。

1.  OnRequestStart
2.  OnResponseEnd

第一个方法在您的 Ajax 请求启动的同时调用，第二个方法在您的 ajax 请求进入完成状态时调用。
因此，在此处理程序方法中，您可以更改浏览器的 UL....

# c# - 使用 SyncLock/lock 时访问被拒绝

> ID：13345130
> 
> 赞同：2
> 
> 时间：2012-11-12T14:05:11.403
> 
> 标签：c#, vb.net, locking, synclock

这个错误并不常见，到目前为止我只在一台计算机上发现了这个错误。它可以复制，但我在那台计算机上没有开发环境。在对象上调用 SyncLock/lock 时出现错误。

什么会造成这种错误？

```
System.UnauthorizedAccessException: Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))
   at System.Threading.Monitor.Enter(Object obj) 
```

# codeigniter - 无法使用 codeigniter 发送电子邮件

> ID：13345131
> 
> 赞同：-5
> 
> 时间：2012-11-12T14:05:16.620
> 
> 标签：codeigniter, email, sendmail, codeigniter-2

我无法通过 codeigniter 发送电子邮件。当我尝试使用`echo $this->email->print_debugger();`我来回显错误时，出现以下错误：

```
hello: 250-smtpout17-02.prod.mesa1.secureserver.net 
250-PIPELINING
250 8BITMIME

Failed to send AUTH LOGIN command. Error: 502 unimplemented (#5.5.1)

from: 250 ok

to: 553 sorry, relaying denied from your location [---] (#5.7.1)

The following SMTP error was encountered: 553 sorry, relaying denied from your location [--] (#5.7.1)

data: 503 RCPT first (#5.5.1)

The following SMTP error was encountered: 503 RCPT first (#5.5.1)
502 unimplemented (#5.5.1)
The following SMTP error was encountered: 502 unimplemented (#5.5.1)
Unable to send email using PHP SMTP. Your server might not be configured to send mail using this method. 
```

我无法弄清楚问题。如果您知道原因，请提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:39:19.727

嗨，我用于我的项目的这段代码。我是从 Gmail 发送的，因此请根据您的服务器进行更改。

```
function sendMail()
    {
        $config = Array(
      'protocol' => 'smtp',
      'smtp_host' => 'ssl://smtp.googlemail.com',
      'smtp_port' => 465,
      'smtp_user' => 'xxx@gmail.com', // change it to yours
      'smtp_pass' => 'xxx', // change it to yours
      'mailtype' => 'html',
      'charset' => 'iso-8859-1',
      'wordwrap' => TRUE
    );

            $message = '';
            $this->load->library('email', $config);
          $this->email->set_newline("\r\n");
          $this->email->from('xxx@gmail.com'); // change it to yours
          $this->email->to('xxx@gmail.com');// change it to yours
          $this->email->subject('Resume from JobsBuddy for your Job posting');
          $this->email->message($message);
          if($this->email->send())
         {
          echo 'Email sent.';
         }
         else
        {
         show_error($this->email->print_debugger());
        }

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T05:25:58.240

问题出在 SMTP 主机上。我提供了一个错误的 smtp 主机，这就是它给我这个错误的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T14:18:04.117

我猜 SMTP 服务器不允许你从你的 IP 发送邮件。确保您使用的是正确的 SMTP 服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-07T20:16:56.093

由于几个过时的 GoDaddy 教程提供了然后确认不正确的主机地址，我遇到了同样的问题。我看到您在遇到此问题时也在使用 GoDaddy 的电子邮件服务 (secureserver.net)。对于遇到此问题的其他任何人，更新的信息...

```
host = 'smtpout.secureserver.net' 
```

..（当前）在此处详细说明：[链接](http://support.godaddy.com/help/article/6297/outlook-2010-setting-up-email?pc_split_value=3)

# php - 在 extjs4 中调用 iframe 后如何重新加载网格存储？

> ID：13345132
> 
> 赞同：0
> 
> 时间：2012-11-12T14:05:16.063
> 
> 标签：php, extjs, extjs4

我有一个保留一些变量的网格面板。当我使用这个项目（update-node765）时，`PHP`侧面工作。它工作后，我可以在数据库中编辑我选择的数据，但我无法重新加载商店。我通过调用此方法尝试了 aftershow,beforshow 函数， `fileStore_yon.reload();`但我做不到。我知道`fileStore_yon.reload();`它工作正常。另外，我尝试了一些代码`PHP`；

```
 <script>fileGrid_yon.store.reload(); </script> 
```

最后

```
fileStore_yon.loadById(sadas); 
```

我怎么解决这个问题？谢谢..

```
 {
        id: 'update-nod765',
        text: 'İçeriği Düzenle',
        iconCls:'icon-grid-ren',
        listeners : {
            click : function(){
                var rec = fileGrid_yon.getSelectionModel().getSelected();
                if(rec){
                    var icerik_id=rec.data.id;
                    var kategori_id=rec.data.kategori_id; 
                    new Ext.Window({
                        iconCls: 'icon-plus',
                        title: 'İçerik Düzenleme Ekranı',
                        closeAction: 'close',
                        width:820,
                        autoScroll:true,
                        modal:true,
                        height:530,
                        listeners:{
                            beforeshow : function(bu){
                                fileStore_yon.reload();
                            },
                              afterShow : function(bu){
                                fileStore_yon.reload();
                            }

                        },
                        html:'<iframe src="phps/icerikDuzenle.php?gelen_id='+icerik_id+'&kategori_id='+kategori_id+'" width="100%" height="100%" frameborder="0"><p>Your browser does not support iframes.</p></iframe>'
                    }).show();
                }else{
                    Ext.Msg.alert('Uyarı Geçersiz İşlem','Öncelikle listeden bir içerik seçmelisiniz.');
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:23:04.637

您是否尝试过使用 store.load() ？我不熟悉 reload() 方法。

# python - 从 python manage.py shell 保存

> ID：13345141
> 
> 赞同：0
> 
> 时间：2012-11-12T14:05:39.370
> 
> 标签：python, django, sqlite

我是 Django 的新手。我在 Django 书的第 5 章遇到了一个问题。基本上我试图保存`p1.save()`在交互式外壳中，但无法弄清楚。

具体来说，如何从 ... 更改为 >>> 以便我可以保存以下输入：

```
>>> from books.models import Publisher

>>> p1 = Publisher(name='Apress', address='2855 Telegraph Avenue',

...     city='Berkeley', state_province='CA', country='U.S.A.',

...     website='http://www.apress.com/')

>>> p1.save() 
```

提前致谢！

附言

如果您能告诉我 ... 和 >>> （命令提示符？）的正确名称，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:18:22.427

`...`只是一个指标，它是一条延续线。所以，你的陈述可能还没有完成。如果您认为语句结束，请再次按 Enter。否则检查未闭合的括号、撇号、方括号或注意缩进。

# language-agnostic - 类型安全与静态类型？

> ID：13345145
> 
> 赞同：15
> 
> 时间：2012-11-12T14:05:56.720
> 
> 标签：language-agnostic, programming-languages, terminology

如果一种语言是类型安全的，这是否意味着人们可以自动假定它是静态类型的，因为您必须在编译时检查类型？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T14:08:44.253

例如，C 是静态类型的，不是类型安全的，而 Haskell 是静态类型的，类型安全的。大多数（全部？）动态类型语言都是类型安全的，因为它们可以在运行时检查类型以确保它们是正确的。此外，这些语言假设由于您选择包含运行时类型信息会导致性能损失，因此您希望尽可能有效地使用该信息，因此通常不允许将一块内存解释为错误的类型。

动态类型语言有一个额外的类型安全措施，那就是*强制*。例如，如果您输入`[] + []`javascript，它将看到操作数`+`是数组，不能直接添加，因此会将它们都转换为字符串，并给出`""`（空字符串）的结果。

一些语言，如 javascript，通常会将其他内容强制转换为字符串，而 PHP 例如会将[字符串强制转换为数字以进行比较](https://stackoverflow.com/questions/12500902/string-is-being-shown-as-equal-to-a-number)。

编辑：类型安全意味着不允许将持有 A 类型的内存块解释为 B 类型的东西。作为类型不安全的一个例子，C++ 有[`reinterpret_cast`operator](http://msdn.microsoft.com/en-us/library/e0w9f63b%28v=vs.80%29.aspx)，这意味着“将任何东西转换为其他任何东西，即使它没有”这样做没有意义。” 例如，

```
float a = 6.2;
int b = reinterpret_cast<int>(a);
//b now contains some form of garbage 
```

有关类型安全的更完整解释，请参阅[此答案](https://stackoverflow.com/a/260640/603688)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:57:40.050

我会犹豫是否将动态类型语言称为类型安全，但它在运行时会严格检查类型，因为运行时可能为时已晚，无法对错误做任何事情！

你可以有理由称这种语言为强类型，但我不会称它为类型安全的。

在编译时捕获错误使您有机会修复它...

有关类型安全语言的一个很好的示例，请查看 SPARK。

在 SPARK 中，对数组末尾进行索引是一种类型错误（每个数组的索引都有一个新类型，并且您有一个与该类型不兼容的值）

您通常会在编译程序之前证明没有此类错误...

# c++ - 如何使用 MPI_Type_create_subarray？

> ID：13345147
> 
> 赞同：19
> 
> 时间：2012-11-12T14:05:59.297
> 
> 标签：c++, mpi, sub-array

很明显，它的论点是：

```
int MPI_Type_create_subarray(
  int ndims,
  int array_of_sizes[],
  int array_of_subsizes[],
  int array_of_starts[],
  int order,
  MPI_Datatype oldtype,
  MPI_Datatype *newtype
); 
```

但是，我无法理解此方法如何接收我们要拆分的原始数组以及它返回新子数组的位置（因为此方法应返回一个整数）。换句话说，我只是想看看这个方法在 C++ 中的简单实现，我在 Internet 上找不到。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-12T14:46:27.120

`MPI_Type_create_subarray()`既不接受原始数组也不返回子数组；它创建一个 MPI 类型，描述给定子数组的内存布局： 某个给定类型的更大数组；一组子尺寸；和一个开始的“角落”。

然后，您可以使用这个新创建的 MPI 类型从任何适当大小的数组中提取您想要的数据，并将其以消息的形式发送到另一个任务（使用点对点消息传递例程）、所有其他任务（通过集合） ，或将其写入磁盘（使用 MPI-IO）。在以下示例中，rank 0 使用 MPI 子数组类型从更大的整数数组中提取子数组并将其发送到 rank 1。Rank 1 只是将其接收到连续缓冲区中，不需要将其作为任何特殊接收类型; 它只是接收这么多整数的数据。

```
#include <stdio.h>
#include <stdlib.h>
#include <mpi.h>

void printarr(int **data, int n, char *str);
int **allocarray(int n);

int main(int argc, char **argv) {

    /* array sizes */
    const int bigsize =10;
    const int subsize =5;

    /* communications parameters */
    const int sender  =0;
    const int receiver=1;
    const int ourtag  =2;

    int rank, size;

    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);

    if (size < receiver+1) {
        if (rank == 0)
            fprintf(stderr,"%s: Needs at least %d  processors.\n", argv[0], receiver+1);
        MPI_Finalize();
        return 1;
    }

    if (rank == sender) {
        int **bigarray = allocarray(bigsize);
        for (int i=0; i<bigsize; i++)
            for (int j=0; j<bigsize; j++)
                bigarray[i][j] = i*bigsize+j;

        printarr(bigarray, bigsize, " Sender: Big array ");

        MPI_Datatype mysubarray;

        int starts[2] = {5,3};
        int subsizes[2]  = {subsize,subsize};
        int bigsizes[2]  = {bigsize, bigsize};
        MPI_Type_create_subarray(2, bigsizes, subsizes, starts,
                                 MPI_ORDER_C, MPI_INT, &mysubarray);
        MPI_Type_commit(&mysubarray);

        MPI_Send(&(bigarray[0][0]), 1, mysubarray, receiver, ourtag, MPI_COMM_WORLD);
        MPI_Type_free(&mysubarray);

        free(bigarray[0]);
        free(bigarray);

    } else if (rank == receiver) {

        int **subarray = allocarray(subsize);

        for (int i=0; i<subsize; i++)
            for (int j=0; j<subsize; j++)
                subarray[i][j] = 0;

        MPI_Recv(&(subarray[0][0]), subsize*subsize, MPI_INT, sender, ourtag, MPI_COMM_WORLD, MPI_STATUS_IGNORE);

        printarr(subarray, subsize, " Receiver: Subarray -- after receive");

        free(subarray[0]);
        free(subarray);
    }

    MPI_Finalize();
    return 0;
}

void printarr(int **data, int n, char *str) {    
    printf("-- %s --\n", str);
    for (int i=0; i<n; i++) {
        for (int j=0; j<n; j++) {
            printf("%3d ", data[i][j]);
        }
        printf("\n");
    }
}

int **allocarray(int n) {
    int *data = malloc(n*n*sizeof(int));
    int **arr = malloc(n*sizeof(int *));
    for (int i=0; i<n; i++)
        arr[i] = &(data[i*n]);

    return arr;
} 
```

运行这个给出

```
$ mpicc -o subarray subarray.c  -std=c99 -Wall -g
$ mpirun -np 2 ./subarray
    --  Sender: Big array  --
  0   1   2   3   4   5   6   7   8   9 
 10  11  12  13  14  15  16  17  18  19 
 20  21  22  23  24  25  26  27  28  29 
 30  31  32  33  34  35  36  37  38  39 
 40  41  42  43  44  45  46  47  48  49 
 50  51  52  53  54  55  56  57  58  59 
 60  61  62  63  64  65  66  67  68  69 
 70  71  72  73  74  75  76  77  78  79 
 80  81  82  83  84  85  86  87  88  89 
 90  91  92  93  94  95  96  97  98  99 
--  Receiver: Subarray -- after receive --
 53  54  55  56  57 
 63  64  65  66  67 
 73  74  75  76  77 
 83  84  85  86  87 
 93  94  95  96  97 
```

# ios - RestKit objectStore 重置后不保存

> ID：13345152
> 
> 赞同：1
> 
> 时间：2012-11-12T14:06:23.717
> 
> 标签：ios, core-data, restkit

在 RestKit 中，`didLoadObjects`我修改了返回对象的一些属性，然后`[[[RKObjectManager sharedManager] objectStore] save:&error];`将它们保存到上下文中。这是没有问题的。

稍后，当用户注销时，我使用以下代码重置 CoreData 存储：

```
RKManagedObjectStore *objectStore = [[RKObjectManager sharedManager] objectStore];
[objectStore deletePersistentStore];
[objectStore save:nil]; 
```

之后，当我再次请求相同的数据并尝试做同样的事情时，`didLoadObjects`它们永远不会被保存。我已经确定对象存储不是 nil 并且 save 方法不会返回错误。

# java - 使用迭代器删除时出现链表错误

> ID：13345153
> 
> 赞同：0
> 
> 时间：2012-11-12T14:06:23.230
> 
> 标签：java, iterator, linked-list

> **可能重复：**
> [LinkedList 迭代器删除](https://stackoverflow.com/questions/13344447/linkedlist-iterator-remove)

```
private LinkedList flights;

...

public FlightQueue() {
    super();
    flights = new LinkedList();
}

...

public void clear(){

   ListIterator itr = flights.listIterator();

   while(itr.hasNext()){
        itr.remove();
   }
} 
```

……

```
Exception in thread "main" java.lang.IllegalStateException
    at java.util.LinkedList$ListItr.remove(Unknown Source)
    at section1.FlightQueue.clear(FlightQueue.java:44)
    at section1.FlightTest001.main(FlightTest001.java:22) 
```

不知道出了什么问题，它在第一个 itr.remove() 处显示错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T14:09:20.477

> 来自[迭代器 API](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html)：
> IllegalStateException - 如果尚未调用下一个方法，或者在最后一次调用下一个方法之后已经调用了 remove 方法

您必须在调用**iterator.remove()**之前调用**iterator.next()**。

```
 while(itr.hasNext()){
        itr.next(); //This would resolve the exception.
        itr.remove();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:11:06.943

只有在之前调用过**next()**或**previous()**时，才能调用**itr.remove()**，因为它会删除这些方法返回的元素。

 ****```
public void clear(){
    flights.clear();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T14:11:30.387

使用 LinkedList 的 clear() 方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T14:11:32.807

查看[Javadoc 的`ListIterator`](http://docs.oracle.com/javase/6/docs/api/java/util/ListIterator.html#remove%28%29). 它特别指出：

```
IllegalStateException - neither next nor previous have been called, 
or remove or add have been called after the last call to next or previous. 
```

在您发布的代码片段中，您需要一个`.next()`before 。`.remove()`

干杯，****

# c# - 将 wsdl 从 c#.net 代码导入到 delphi 不会生成所有字段

> ID：13345154
> 
> 赞同：0
> 
> 时间：2012-11-12T14:06:26.540
> 
> 标签：c#, delphi, delphi-7

我有D7。我已经下载了 wsdlImp 程序：Borland WSDLIMP 版本 2.2 - $Rev: 10138 $（随 delphi 2007 提供），它似乎适用于 D7。

我的c#接口如下：

```
using System;
using System.ServiceModel;

[ServiceContract]
public interface ITransferService
{
  [OperationContract]
  RemoteFileInfo DownloadFile(DownloadRequest request);

  [OperationContract]
  void UploadFile(RemoteFileInfo request);
}
[MessageContract]
public class DownloadRequest
{
  [MessageBodyMember]
  public string FileName;
}

[MessageContract]
public class RemoteFileInfo : IDisposable
{
  [MessageHeader(MustUnderstand = true)]
  public string FileName;

  [MessageHeader(MustUnderstand = true)]
  public long Length;

  [MessageBodyMember(Order = 1)]
  public System.IO.Stream FileByteStream;

  public void Dispose()
  {
    if (FileByteStream != null)
    {
      FileByteStream.Close();
      FileByteStream = null;
    }
  }
} 
```

Delphi wsdl 导入生成：

```
unit TransferService;

interface

uses InvokeRegistry, SOAPHTTPClient, Types, XSBuiltIns;

const
  IS_OPTN = $0001;
  IS_NLBL = $0004;
  IS_REF  = $0080;         

type

  // ************************************************************************ //
  // The following types, referred to in the WSDL document are not being represented
  // in this file. They are either aliases[@] of other types represented or were referred
  // to but never[!] declared in the document. The types from the latter category
  // typically map to predefined/known XML or Borland types; however, they could also 
  // indicate incorrect WSDL documents that failed to declare or import a schema type.
  // ************************************************************************ //
  // !:base64Binary    - "http://www.w3.org/2001/XMLSchema"[Gbl]
  // !:string          - "http://www.w3.org/2001/XMLSchema"[Gbl]
  // !:long            - "http://www.w3.org/2001/XMLSchema"[Gbl]

  DownloadRequest      = class;                 { "http://tempuri.org/"[Lit][GblElm] }
  RemoteFileInfo       = class;                 { "http://tempuri.org/"[Lit][GblElm] }
  FileName             = class;                 { "http://tempuri.org/"[Hdr][Alias] }
  Length               = class;                 { "http://tempuri.org/"[Hdr][Alias] }

  StreamBody      =  TByteDynArray;      { "http://schemas.microsoft.com/Message"[GblSmpl] }

  // ************************************************************************ //
  // XML       : DownloadRequest, global, <element>
  // Namespace : http://tempuri.org/
  // Serializtn: [xoLiteralParam]
  // Info      : Wrapper
  // ************************************************************************ //
  DownloadRequest = class(TRemotable)
  private
    FFileName: WideString;
    FFileName_Specified: boolean;
    procedure SetFileName(Index: Integer; const AWideString: WideString);
    function  FileName_Specified(Index: Integer): boolean;
  public
    constructor Create; override;
  published
    property FileName: WideString  Index (IS_OPTN or IS_NLBL) read FFileName write SetFileName stored FileName_Specified;
  end;

  // ************************************************************************ //
  // XML       : RemoteFileInfo, global, <element>
  // Namespace : http://tempuri.org/
  // Serializtn: [xoLiteralParam]
  // Info      : Wrapper
  // ************************************************************************ //
  RemoteFileInfo = class(TRemotable)
  private
    FFileByteStream: StreamBody;
  public
    constructor Create; override;
  published
    property FileByteStream: StreamBody  read FFileByteStream write FFileByteStream;
  end;

  // ************************************************************************ //
  // XML       : FileName, alias
  // Namespace : http://tempuri.org/
  // Serializtn: [xoSimpleTypeWrapper]
  // Info      : Header
  // ************************************************************************ //
  FileName = class(TSOAPHeader)
  private
    FValue: WideString;
  published
    property Value: WideString  read FValue write FValue;
  end;

  // ************************************************************************ //
  // XML       : Length, alias
  // Namespace : http://tempuri.org/
  // Serializtn: [xoSimpleTypeWrapper]
  // Info      : Header
  // ************************************************************************ //
  Length = class(TSOAPHeader)
  private
    FValue: Int64;
  published
    property Value: Int64  read FValue write FValue;
  end;

  // ************************************************************************ //
  // Namespace : http://tempuri.org/
  // soapAction: http://tempuri.org/ITransferService/%operationName%
  // transport : http://schemas.xmlsoap.org/soap/http
  // style     : document
  // binding   : BasicHttpBinding_ITransferService
  // service   : TransferService
  // port      : BasicHttpBinding_ITransferService
  // URL       : http://localhost:1875/TransferService.svc
  // ************************************************************************ //
  ITransferService = interface(IInvokable)
  ['{8D28E73C-15D9-7F1E-9D04-A024598C5EA2}']

    // Cannot unwrap: 
    //     - Input element wrapper name does not match operation's name
    // Headers: FileName:pOut, Length:pOut
    function  DownloadFile(const parameters: DownloadRequest): RemoteFileInfo; stdcall;

    // Cannot unwrap: 
    //     - Input element wrapper name does not match operation's name
    // Headers: FileName:pIn, Length:pIn
    procedure UploadFile(const parameters: RemoteFileInfo); stdcall;
  end;

function GetITransferService(UseWSDL: Boolean=System.False; Addr: string=''; HTTPRIO: THTTPRIO = nil): ITransferService;

implementation
  uses SysUtils;

function GetITransferService(UseWSDL: Boolean; Addr: string; HTTPRIO: THTTPRIO): ITransferService;
const
  defWSDL = 'http://localhost:1875/TransferService.svc?wsdl';
  defURL  = 'http://localhost:1875/TransferService.svc';
  defSvc  = 'TransferService';
  defPrt  = 'BasicHttpBinding_ITransferService';
var
  RIO: THTTPRIO;
begin
  Result := nil;
  if (Addr = '') then
  begin
    if UseWSDL then
      Addr := defWSDL
    else
      Addr := defURL;
  end;
  if HTTPRIO = nil then
    RIO := THTTPRIO.Create(nil)
  else
    RIO := HTTPRIO;
  try
    Result := (RIO as ITransferService);
    if UseWSDL then
    begin
      RIO.WSDLLocation := Addr;
      RIO.Service := defSvc;
      RIO.Port := defPrt;
    end else
      RIO.URL := Addr;
  finally
    if (Result = nil) and (HTTPRIO = nil) then
      RIO.Free;
  end;
end;

constructor DownloadRequest.Create;
begin
  inherited Create;
  FSerializationOptions := [xoLiteralParam];
end;

procedure DownloadRequest.SetFileName(Index: Integer; const AWideString: WideString);
begin
  FFileName := AWideString;
  FFileName_Specified := True;
end;

function DownloadRequest.FileName_Specified(Index: Integer): boolean;
begin
  Result := FFileName_Specified;
end;

constructor RemoteFileInfo.Create;
begin
  inherited Create;
  FSerializationOptions := [xoLiteralParam];
end;

initialization
  InvRegistry.RegisterInterface(TypeInfo(ITransferService), 'http://tempuri.org/', 'utf-8');
  InvRegistry.RegisterDefaultSOAPAction(TypeInfo(ITransferService), 'http://tempuri.org/ITransferService/%operationName%');
  InvRegistry.RegisterInvokeOptions(TypeInfo(ITransferService), ioDocument);
  InvRegistry.RegisterInvokeOptions(TypeInfo(ITransferService), ioLiteral);
  InvRegistry.RegisterHeaderClass(TypeInfo(ITransferService), FileName, 'FileName', 'http://tempuri.org/');
  InvRegistry.RegisterHeaderClass(TypeInfo(ITransferService), Length, 'Length', 'http://tempuri.org/');
  InvRegistry.RegisterExternalParamName(TypeInfo(ITransferService), 'DownloadFile', 'parameters1', 'parameters');
  RemClassRegistry.RegisterXSInfo(TypeInfo(StreamBody), 'http://schemas.microsoft.com/Message', 'StreamBody');
  RemClassRegistry.RegisterXSClass(DownloadRequest, 'http://tempuri.org/', 'DownloadRequest');
  RemClassRegistry.RegisterSerializeOptions(DownloadRequest, [xoLiteralParam]);
  RemClassRegistry.RegisterXSClass(RemoteFileInfo, 'http://tempuri.org/', 'RemoteFileInfo');
  RemClassRegistry.RegisterSerializeOptions(RemoteFileInfo, [xoLiteralParam]);
  RemClassRegistry.RegisterXSClass(FileName, 'http://tempuri.org/', 'FileName');
  RemClassRegistry.RegisterSerializeOptions(FileName, [xoSimpleTypeWrapper]);
  RemClassRegistry.RegisterXSClass(Length, 'http://tempuri.org/', 'Length');
  RemClassRegistry.RegisterSerializeOptions(Length, [xoSimpleTypeWrapper]);

end. 
```

问题在于这里的代码：

```
ITransferService = interface(IInvokable)
  ['{8D28E73C-15D9-7F1E-9D04-A024598C5EA2}']

    // Cannot unwrap: 
    //     - Input element wrapper name does not match operation's name
    // Headers: FileName:pOut, Length:pOut
    function  DownloadFile(const parameters: DownloadRequest): RemoteFileInfo; stdcall;

    // Cannot unwrap: 
    //     - Input element wrapper name does not match operation's name
    // Headers: FileName:pIn, Length:pIn
    procedure UploadFile(const parameters: RemoteFileInfo); stdcall;
  end; 
```

我该如何解决这个问题？解包错误的原因是什么？

* * *

这是wsdl代码：

```
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:tns="http://tempuri.org/" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" name="TransferService" targetNamespace="http://tempuri.org/">
<wsdl:types>
<xsd:schema targetNamespace="http://tempuri.org/Imports">
<xsd:import schemaLocation="http://localhost:1875/TransferService.svc?xsd=xsd0" namespace="http://tempuri.org/"/>
<xsd:import schemaLocation="http://localhost:1875/TransferService.svc?xsd=xsd1" namespace="http://schemas.microsoft.com/2003/10/Serialization/"/>
<xsd:import schemaLocation="http://localhost:1875/TransferService.svc?xsd=xsd2" namespace="http://schemas.microsoft.com/Message"/>
</xsd:schema>
</wsdl:types>
<wsdl:message name="DownloadRequest">
<wsdl:part name="parameters" element="tns:DownloadRequest"/>
</wsdl:message>
<wsdl:message name="RemoteFileInfo">
<wsdl:part name="parameters" element="tns:RemoteFileInfo"/>
</wsdl:message>
<wsdl:message name="RemoteFileInfo_Headers">
<wsdl:part name="FileName" element="tns:FileName"/>
<wsdl:part name="Length" element="tns:Length"/>
</wsdl:message>
<wsdl:message name="ITransferService_UploadFile_OutputMessage"/>
<wsdl:portType name="ITransferService">
<wsdl:operation name="DownloadFile">
<wsdl:input wsaw:Action="http://tempuri.org/ITransferService/DownloadFile" name="DownloadRequest" message="tns:DownloadRequest"/>
<wsdl:output wsaw:Action="http://tempuri.org/ITransferService/DownloadFileResponse" name="RemoteFileInfo" message="tns:RemoteFileInfo"/>
</wsdl:operation>
<wsdl:operation name="UploadFile">
<wsdl:input wsaw:Action="http://tempuri.org/ITransferService/UploadFile" name="RemoteFileInfo" message="tns:RemoteFileInfo"/>
<wsdl:output wsaw:Action="http://tempuri.org/ITransferService/UploadFileResponse" message="tns:ITransferService_UploadFile_OutputMessage"/>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="BasicHttpBinding_ITransferService" type="tns:ITransferService">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="DownloadFile">
<soap:operation soapAction="http://tempuri.org/ITransferService/DownloadFile" style="document"/>
<wsdl:input name="DownloadRequest">
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output name="RemoteFileInfo">
<soap:header message="tns:RemoteFileInfo_Headers" part="FileName" use="literal"/>
<soap:header message="tns:RemoteFileInfo_Headers" part="Length" use="literal"/>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="UploadFile">
<soap:operation soapAction="http://tempuri.org/ITransferService/UploadFile" style="document"/>
<wsdl:input name="RemoteFileInfo">
<soap:header message="tns:RemoteFileInfo_Headers" part="FileName" use="literal"/>
<soap:header message="tns:RemoteFileInfo_Headers" part="Length" use="literal"/>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="TransferService">
<wsdl:port name="BasicHttpBinding_ITransferService" binding="tns:BasicHttpBinding_ITransferService">
<soap:address location="http://localhost:1875/TransferService.svc"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-13T00:35:25.450

尝试使您的`<wsdl:definitions targetNameSpace ...>`匹配成为您的`<xsd:schema targetNamespace ...>`. 这解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-04T14:37:56.227

您可以尝试另一件事，而不是：

```
<xsd:import schemaLocation="http://localhost:1875/TransferService.svc?xsd=xsd0" namespace="http://tempuri.org/"/> 
```

使 XSD 成为本地文件。例如“c:\temp\file0.xsd”

在某些情况下——主要是当 http url 实际上是 https url，或者端口无效时——delphi 不会很好地响应重定向，只是将函数标记为“无法解包”。

我知道如果您正在为其他人制作 WSDL，这对您没有帮助，但如果您只是尝试导入 WSDL 以在 delphi 中使用，它可能会帮助一些读者。

# mysql - 基准数据映射器查询

> ID：13345156
> 
> 赞同：0
> 
> 时间：2012-11-12T14:06:37.230
> 
> 标签：mysql, ruby, benchmarking, datamapper

我正在使用 datamapper 并想使用 ruby​​ 基准库对一些查询进行基准测试。为了查看它是否有效，我从一组开始，比较[datamapper 文档中描述的方法，](http://datamapper.org/docs/find.html)如下所示：

```
(1..1000).each do |i|
  i = Item.create :name => "item_#{i}", :weight => 0.5, :volume => 1.2, :price => 15
end

Benchmark.bmbm do |x|
  x.report("all:") { Item.all }
  x.report("name_only:") { Item.all :fields => [:name] }
  x.report("direct_talk_all:") { repository(:default).adapter.select('SELECT * FROM items') }
  x.report("direct_talk_name_only:") { repository(:default).adapter.select('SELECT name FROM items') } 
```

结尾

令人惊讶的是（对我而言），实际结果分别为 0、0.001、0.024 和 0.014。如果我使用特定于数据映射器的代码，选择性 SELECT 查询会花费更多时间，而且在直接与数据存储对话时查询会花费更长的时间，这对我来说听起来是错误的。

那么，我应该以这种方式进行基准查询，还是 ruby​​ 基准库是一个错误的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:13:33.853

`Item.all`实际上并没有进行查询，它会延迟到需要时。用于`Item.all.to_a`强制查询。

# c# - 如何将多个文件保存在一个文件中

> ID：13345159
> 
> 赞同：-3
> 
> 时间：2012-11-12T14:06:59.027
> 
> 标签：c#

我的朋友给我发了一个文件。他将多个 gif 文件保存在一个文件中，并给了我类似的列表

```
file1 - StartFrom - 1 and length 18493,
file2 - StartFrom - 132089 and length 824,
file3 - StartFrom - 18494 and length 2476 etc.. 
```

我不知道他是如何将所有 gif 文件放在一个文件中的。我需要从这个文件中提取所有 gif 图像。

有人帮助我如何在 vb.net 或 C# 中编写代码。我在下面写了一个代码：

```
private void button1_Click(object sender, EventArgs e)
{

    byte[] buffer = new byte[18493];

    string destPath = Application.StartupPath + "\\mm.gif";
    string sourcePath = Application.StartupPath + "\\Data.qdd";

    var destStream = new FileStream(destPath, FileMode.Create);

    int read;
    var sourceStream = new FileStream(sourcePath, FileMode.Open);
    while ((read = sourceStream.Read(buffer, 1, 18493)) != 0)
          destStream.Write(buffer, 0, read);

} 
```

但是有错误显示是：

> 数组的偏移量和长度超出范围或计数大于从索引到源集合末尾的元素数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:16:20.657

**编辑编辑的解决方案**

错误就在这里

```
read = sourceStream.Read(buffer, 1, 18493) 
```

您创建了一个长度为 18493 的*缓冲区*字节数组变量，因此它有 18493 个元素。数组中的位置是从 0 到 18492。Read***函数***尝试从位置 1 写入 18943 字节，因此最后一个字节将写入缓冲区 [18943]，超出数组的限制。尝试将读取更改为

```
read = sourceStream.Read(buffer, 0, 18493) 
```

**编辑 2 解决整个问题**

要解决问题而不仅仅是错误，您应该分配三个不同的缓冲区并写入空闲的不同文件。（您可以只使用一个缓冲区并每次都清理它，但如果您使用其中三个则更容易理解）
您不能使用一段时间来阅读，因为这样您将转到文件的末尾！
只需阅读所需长度的文件，然后移动到下一个文件。

```
private void button1_Click(object sender, EventArgs e)
{

    byte[] buffer1 = new byte[18493];
    byte[] buffer2 = new byte[824];
    byte[] buffer3 = new byte[2476];

    string destPath1 = Application.StartupPath + "\\mm1.gif";
    string destPath2 = Application.StartupPath + "\\mm2.gif";
    string destPath3 = Application.StartupPath + "\\mm3.gif";
    string sourcePath = Application.StartupPath + "\\Data.qdd";

    var destStream1 = new FileStream(destPath1, FileMode.Create);
    var destStream2 = new FileStream(destPath2, FileMode.Create);
    var destStream3 = new FileStream(destPath3, FileMode.Create);

    int read;
    var sourceStream = new FileStream(sourcePath, FileMode.Open);
    if ((read = sourceStream.Read(buffer1, 0, 18493)) != 0)
          destStream1.Write(buffer1, 0, read);
    //file three is the next in the stream
    if ((read = sourceStream.Read(buffer3, 0, 2476)) != 0)
          destStream3.Write(buffer3, 0, read);
    //there some unused space, move to the start of the second gif file
    sourceStream.Seek(132089, SeekOrigin.Begin);
    if ((read = sourceStream.Read(buffer2, 0, 824)) != 0)
          destStream2.Write(buffer2, 0, read);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:44:39.633

```
//struct to store information about file
struct GifFile
{
    public string FileName { get; set; }
    public int startPosition { get; set; }
    public int Length { get; set; }
}

private void button1_Click(object sender, EventArgs e)
{
    //first we need to get information about files from string.
    String description = @"file1 - StartFrom - 1 and length 18493,
        file2 - StartFrom - 132089 and length 824,
        file3 - StartFrom - 18494 and length 2476";
    String pattern = @"(\w+) - StartFrom - (\d+) and length (\d+)";
    var matches = Regex.Matches(description, pattern);
    List<GifFile> files = new List<GifFile>();
    foreach (Match match in matches)
    {
        GifFile gifFile = new GifFile
        {
            FileName = match.Groups[1].Value,
            startPosition = int.Parse(match.Groups[2].Value),
            Length = int.Parse(match.Groups[3].Value)
        };
        files.Add(gifFile);
    }

    string sourcePath = Path.Combine(Application.StartupPath, "Data.qdd");
    using (var sourceStream = new FileStream(sourcePath, FileMode.Open))
    {
        // for each file in file list we take data and create gif file.
        foreach (GifFile file in files)
        {
            String outputPath = Path.Combine(Application.StartupPath, file.FileName + ".gif")
            using (FileStream destStream = new FileStream(outputPath , FileMode.Create))
            {
                byte[] buffer = new byte[file.Length];

                sourceStream.Position = file.startPosition;
                int readLength = sourceStream.Read(buffer, 0, file.Length);
                if(readLength == file.Length)
                {
                    destStream.Write(buffer, 0, file.Length);
                }
            }
        }
    }
} 
```

此代码的问题可能是流从 0 开始计数。因此您可以设置`sourceStream.Position`为`file.startPosition - 1`

# perl - 我如何为 DRY 测试 Perl 代码（不要重复自己）

> ID：13345160
> 
> 赞同：2
> 
> 时间：2012-11-12T14:07:02.830
> 
> 标签：perl, dry

对于 Python，我们可以使用[Python Code Clone Detector](http://code.activestate.com/recipes/578206-python-code-clone-detector-dont-repeat-yourself/)

但我就是找不到 Perl 的任何东西。关于 DRY， [Catalyst](http://en.wikipedia.org/wiki/Catalyst_%28software%29)提到它建立在 DRY 原则之上。如果是的话，我想可能会使用一些工具来验证该声明。

此外，Perl 是否促进 DRY ？我确信它通过使用 CPAN 来促进重复其他人。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T14:18:00.343

您可能的意思是“Perl 通过提供 CPAN 来促进‘不要重复其他人’”，这当然是正确的。

然而，DRY 更像是一种通用的编程原则（编写许多可以通过参数正确参数化的专用小函数，而不是编写“做所有事情”的单一函数），而不是一种语言特性。您可以使用 C++、Python、Perl、Ruby、C 和大多数其他语言编写符合 DRY 的代码。有些语言需要更多样板，有些则更少。

Perl 通过提供简洁的语言结构，绝对允许使用很少样板的小函数。

不过，我不知道检测 Perl 的非 DRY 代码的工具。

# asp.net-mvc-3 - Jquery ajax 无法将数据发送到 mvc3 控制器操作

> ID：13345162
> 
> 赞同：0
> 
> 时间：2012-11-12T14:07:11.287
> 
> 标签：asp.net-mvc-3, jquery

我正在使用 MVC3。我有一个 javascript 函数，它对 mvc3 控制器操作进行 ajax 调用。当我在数据中发送 null 时，它会调用控制器操作。但是当我尝试在数据中发送位置时，它会给出 javascript 错误，即“未定义”。

```
function getPictureContent(location)
{
    var pictures = getLocationPictures(location);
    var content = "<div id=markerpictures></div>";  

    return content;
}

function getLocationPictures(location) {
var pics;
$.ajax({
    type : "POST",
    url : "/Home/GetLocationPictures",
    data : {'location' : location},
    contentType : "application/json; charset=utf-8",
    dataType : 'json',
    async : false,
    success : function (data) {         
                 pics = data;
    }        
});

return pics;    
} 
```

这是控制器动作：

```
public JsonResult GetLocationPictures(string location)
{
    List<string> pictures = new List<string>();
    return Json(pictures);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:21:12.817

试试这个.. 位置应该是字符串。确保会字符串。

```
function getLocationPictures(location) {
var pics;
$.ajax({
type : "POST",
url : "/Home/GetLocationPictures",
data : JSON.stringify({'location' : location}),
contentType : "application/json; charset=utf-8",
dataType : 'json',
async : false,
success : function (data) {         
             pics = data;
}        
}); 
```

# jquery - 切换一次后切换显示停止工作的原因可能是什么？

> ID：13345163
> 
> 赞同：0
> 
> 时间：2012-11-12T14:07:18.877
> 
> 标签：jquery

我有一个地图应用程序，它使用 jQuery 在单击按钮时显示/隐藏一些地图控件。现在，除了一个 - pan_zoom 控件之外，所有控件都可以正常工作。地图控件的 html 元素与一些内联样式一起动态添加：

```
<div class="pan_zoom" style="display: block; top: 4px">pan zoom button</div> 
```

pan_zoom 控件在加载地图时隐藏：

```
$('.pan_zoom').hide(); 
```

单击按钮后，将调用包含以下行的函数：

```
$('.pan_zoom').toggle(); 
```

此功能在第一次单击时隐藏 pan_zoom 控件。但是，它没有在下次单击时显示控件。

我再次测试了上面的内容，没有在初始化时隐藏 pan_zoom 控件。这一次，切换对元素没有影响。

阻止切换功能正常工作的可能原因是什么？

请注意，我没有为此元素设置任何 CSS 显示属性，我可以通过将切换功能替换为以下内容来解决此问题：

```
if($('.pan_zoom').css('display') == 'block')
{
 $('.pan_zoom').hide();
}
else
{
 $('.pan_zoom').show();
} 
```

我更感兴趣的是找出为什么`toggle()`不能正常工作。

点击处理程序是：

```
$('button[name="expand_map"]').click(toggleMap);
function toggleMap() {
....
 $('.pan_zoom, .and_other_controls').toggle();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:15:59.410

试试这个，也许它会有所作为：

```
<div class="pan_zoom" style="display:none; top: 4px">pan zoom button</div>

// Comment out this line
//$('.pan_zoom').hide();

// Proceed as normal for the click handler
$('.pan_zoom').toggle(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:09:05.867

这是一个棘手的问题。我把它写在这里，以便其他遇到这个问题的人可以仔细研究计算元素的样式。在我的例子中，pan_zoom 控制元素的计算高度和宽度结果为 0，这是由于控制 div 中的 div 的绝对定位。这反过来会影响 jQuery`toggle()`函数如何处理元素的显示。

我认为它认为宽度和高度为零的元素等同于隐藏元素，因此不会隐藏它。解决此问题的一种方法是使用`show()`/`hide()`如问题中所述。为了使用`toggle()`, 另一种不太明显的方法是为宽度和高度设置一个值。使用 jQuery，这将是：

```
$('.pan_zoom').css({'height': '1px', 'width': '1px'}); 
```

# php - php 中 $this:: 和 $this-> 的区别

> ID：13345165
> 
> 赞同：3
> 
> 时间：2012-11-12T14:07:24.813
> 
> 标签：php, oop, class, this, self

> **可能重复：**
> [PHP：self vs. $this](https://stackoverflow.com/questions/151969/php-self-vs-this)

我发现我可以通过 $this:: 前缀调用类方法。例子：

```
class class1 {
    public function foo()
    {
        echo "1";
    }
    public function bar()
    {
        $this::foo();
        //in this example it acts like $this->foo() and displays "2"
        //using self::foo() displays "1"
    }
}

class class2 {
    public function foo()
    {
        echo "2";
    }
    public function bar()
    {
        class1::bar();
    }
}

$obj = new class2();
$obj->bar(); // displays "2"
class1::bar(); // Fatal error 
```

我想知道使用 $this-> 和 $this:: 前缀调用方法的区别是什么。

ps：在这个链接中有一个关于 $this->foo() 和 self::foo() 的差异的页面： [When to use self over $this?](https://stackoverflow.com/questions/151969/php-self-vs-this)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T14:19:00.697

您链接的答案确切地告诉您您在寻找什么;)。

基本上，有些人在编程语言中很难区分两个概念：对象和类。

一个类是抽象的。它定义了一个对象的结构。如果对象是从该类构建的，则对象*将*包含的属性和方法。创建对象是您调用`new class1()`. 这是指示 PHP 使用 class1 类的所有属性和方法创建一个新对象。

关于创建对象需要注意的重要一点是它也有自己的**作用域**。这确实是 $this 与 static::（*注意：不要使用 self:: 或 $this::，请使用 static::（稍后会详细介绍）*）发挥作用的地方。Using`$this`是指示 PHP 访问当前对象的属性和方法。Using`static::`指示 PHP 访问构造对象的基类的属性和方法。

这是一个例子：

```
class MyClass {
    public $greeting;
    public static $name;

    public greet() {
        print $this->greeting . " " . static::$name;
    }
}

$instance1 = new MyClass();
$instance1->greeting = 'hello';

$instance2 = new MyClass();
$instance2->greeting = 'hi';

MyClass::$name = 'Mahoor13';

$instance1->greet();
$instance2->greet(); 
```

我没有测试上述内容，但你应该得到：

你好 Mahoor13 你好 Mahoor13

这应该可以大致了解设置类属性和设置实例属性之间的区别。如果您需要其他帮助，请告诉我。

**编辑**

$this:: 似乎只是 PHP 处理范围的方式的副作用。我不会认为它有效，也不会使用它。它似乎不受任何支持。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T14:14:36.937

**$this->**是从 instance 调用的，所以你必须有一个对象的实例才能使用这个调用。

但是**$this::**是类中的静态方法，您可以在没有实例的情况下调用它，因此您不需要分配类的实例来调用它

```
myclass::doFoo();
public static function doFoo(){ .... } 
```

并且 do 函数应该是静态函数才能像这样调用它，否则 php 会在较新的版本中出错

# iphone - 在 UITableview 的 CustomCell 中单击 UITextField 时如何上移视图？

> ID：13345167
> 
> 赞同：1
> 
> 时间：2012-11-12T14:07:26.957
> 
> 标签：iphone, xcode, keyboard, uitextfield, uiviewanimation

我在 UITableview 的自定义单元格中有 TextField。我的 Tableview 是 MainView 的下部，所以当我单击 CustomCell 键盘中的 TextField 时，会出现哪个隐藏我的文本字段。我的下图显示了我的问题

![在此处输入图像描述](../Images/62369f76434506ecf23d0a3795f429cb.png)

在这里，当我在 MainView 中有 UITextField 时，我有一个代码可以工作。请编辑下面的代码，因为当我单击 UITextfield 时我想要整个视图动画。

```
-(void)textFieldDidBeginEditing:(UITextField *)textField {

if (textField.tag > 0) {
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDuration:0.5];
    [UIView setAnimationBeginsFromCurrentState:YES];
    self.view.frame = CGRectMake(self.view.frame.origin.x, self.view.frame.origin.y-165.0,
                                 self.view.frame.size.width, self.view.frame.size.height);
    [UIView commitAnimations];
}   

   }
 -(void)textresign{

[[self.view viewWithTag:1]resignFirstResponder];
   }
-(void)textFieldDidEndEditing:(UITextField *)textField {         
if (textField.tag > 0) {
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDuration:0.5];
    [UIView setAnimationBeginsFromCurrentState:YES];
    self.view .frame = CGRectMake(self.view.frame.origin.x, self.view.frame.origin.y+165.0,
                                  self.view.frame.size.width, self.view.frame.size.height);
    [UIView commitAnimations];
}   

  } 
```

但我不知道如何为我的自定义单元 UITextField 修复它。任何帮助都会被应用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T15:07:57.250

这是代码，只需要稍微更改代码

```
-(void)textFieldDidBeginEditing:(UITextField *)textField
{

    if (textField.tag > 0)
    {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDelegate:self];
        [UIView setAnimationDuration:0.5];
        [UIView setAnimationBeginsFromCurrentState:YES];
        self.view.frame = CGRectMake(self.view.frame.origin.x, self.view.frame.origin.y-165.0,
                                     self.view.frame.size.width, self.view.frame.size.height);
        [UIView commitAnimations];
    }
} 
```

使用以下方法重新定位键盘上的视图，而不是 `textFieldDidEndEditing`.

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{

    if (textField.tag > 0)
    {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDelegate:self];
        [UIView setAnimationDuration:0.5];
        [UIView setAnimationBeginsFromCurrentState:YES];
        self.view .frame = CGRectMake(self.view.frame.origin.x, self.view.frame.origin.y+165.0,
                                      self.view.frame.size.width, self.view.frame.size.height);
        [UIView commitAnimations];

    }
    [textField resignFirstResponder];
    return YES;
} 
```

使用以下方法必须将委托设置为文本字段。

我希望你能得到解决方案。

# objective-c - 苹果`ld`和`-ObjC`开关？

> ID：13345176
> 
> 赞同：0
> 
> 时间：2012-11-12T14:08:02.953
> 
> 标签：objective-c, linker

这是什么意思（来自 Apple 的`ld`手册页）：

```
 -ObjC       Loads all members of static archive libraries that implement
             an Objective-C class or category. 
```

我想我从未见过描述，也不知道在链接阶段“加载”存档成员意味着什么。它列在“控制库的选项”下。

Apple 需要为 iDevices 提供静态链接，但`-Bstatic`似乎没有。Apple 是否使用`-ObjC`强制静态链接？

杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:33:10.760

这是关于静态库和目标 C 如何工作的一个很好的描述： [http ://www.dribin.org/dave/blog/archives/2006/03/13/static_objc_lib/](http://www.dribin.org/dave/blog/archives/2006/03/13/static_objc_lib/)

通常，如果您使用静态库，则需要让链接器知道它包含 Objective-C 代码。这样它就能够正确连接 ObjC 符号和引用，因为它们不同于传统的 C 和 C++（相比之下，Objective C 是非常动态的）。

# birt - eclipse birt 报告页面删除

> ID：13345179
> 
> 赞同：1
> 
> 时间：2012-11-12T14:08:14.577
> 
> 标签：birt

我想删除 birt 报告中的特定页面。原因是我有 20 个图表，其中一些有时没有数据。所以当我让它不可见时，页面显示为空。这就是为什么我要删除它。

我可以从 java 文件中传递一个参数来告诉报告要删除哪个页面。但我该如何删除它？有办法吗？我可以添加到我的报告中的脚本？

非常感谢，约尼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:45:05.980

您已使为图表保留空间的元素不可见。大多数情况下，它位于您输入特定高度的网格单元中。如果是这种情况，您必须将网格的整行设置为不可见。

# java - Akka：动态添加 Actor 到 BroadcastRouter

> ID：13345182
> 
> 赞同：3
> 
> 时间：2012-11-12T14:08:27.913
> 
> 标签：java, events, akka, actor

让广播演员随时间动态添加/删除路由的正确方法是什么？

问题的背景：一个参与者监听特定项目的价格变化，然后它将价格变化广播给所有其他参与者（路由），他们根据内部规则行事（例如，如果价格是 X 买入或卖出）。

我是 Akka 的新手，但是在阅读了[文档](http://doc.akka.io/docs/akka/2.0.3/)之后，我相信我已经弄清楚了所需的组件，但是如果您觉得我的设计或使用的组件不正确，请发表评论/回答。

我想从固定的路由列表中更改

```
 ActorRef actor1 = system.actorOf(new Props(LimitOrderActor.class));
        ActorRef actor2 = system.actorOf(new Props(LimitOrderActor.class));
        ActorRef actor3 = system.actorOf(new Props(LimitOrderActor.class));
        Iterable<ActorRef> routees = Arrays.asList(new ActorRef[] { actor1, actor2, actor3 });
        ActorRef actorBroadcastRouter1 = system.actorOf(new Props(TickerWatcherActor.class).withRouter(BroadcastRouter.create(routees)), "router1"); 
```

类似于动态大小的广播路由器，在广播路由器启动并运行后创建演员

```
 int lowerBound = 1;
        int upperBound = 10000;
        DefaultResizer resizer = new DefaultResizer(lowerBound, upperBound);
        BroadcastRouter broadcastRouter2 = new BroadcastRouter(resizer);
        ActorRef actorBroadcastRouter2 = system.actorOf(new Props(TickerWatcherActor.class).withRouter(broadcastRouter2), "router2");

        ActorRef actor4 = system.actorOf(new Props(LimitOrderActor.class).withRouter((RouterConfig) broadcastRouter2));
        ActorRef actor5 = system.actorOf(new Props(LimitOrderActor.class).withRouter((RouterConfig) broadcastRouter2));
        ActorRef actor6 = system.actorOf(new Props(LimitOrderActor.class).withRouter((RouterConfig) broadcastRouter2)); 
```

现在，演员“actorBroadcastRouter2”收到的消息不是预期的 LimitOrderActor 演员 4、5 和 6。我做错了什么？

编辑：我相信现在我正在寻找的是[事件总线](http://doc.akka.io/docs/akka/2.0/java/event-bus.html)而不是广播路由器

```
 final ActorRef actor = system.actorOf(new Props(LimitOrderActor.class));
   system.eventStream().subscribe(actor, String.class); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:19:43.097

让我们结束这个问题，我在同样的问题上磕磕绊绊。这不是广播路由器的工作方式。您在 中创建新的广播路由器`actor4`，`actor5`而`actor6`不是在 中添加到现有的广播路由器`actorBroadcastRouter2`。

您想要的在 scala 中非常简单，具有 Listeners 特征，遗憾的是在使用 Java 编程 Akka 时不可用：

```
class MyActor extends Actor with Listeners {
  def receive = {
     case yourmessages => gossip("To All my listeners")
  } orElse listenerManagement
}

val myActor = context.actorOf(Props[MyActor])

myActor ! Listen(someActorRef)

myActor ! "pigdog" 
```

必须做自己的 Java 版本或使用`DistributedPubSubExtension`更成熟的东西。

[https://groups.google.com/forum/?fromgroups=#!topic/akka-user/NEOY9IxRW5I](https://groups.google.com/forum/?fromgroups=#!topic/akka-user/NEOY9IxRW5I)

[https://github.com/akka/akka/blob/master/akka-actor/src/main/scala/akka/routing/Listeners.scala](https://github.com/akka/akka/blob/master/akka-actor/src/main/scala/akka/routing/Listeners.scala)

[http://doc.akka.io/docs/akka/snapshot/contrib/distributed-pub-sub.html#a-small-example-in-java](http://doc.akka.io/docs/akka/snapshot/contrib/distributed-pub-sub.html#a-small-example-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T16:51:44.527

使用事件总线而不是广播路由器：

```
final ActorRef actor = system.actorOf(new Props(LimitOrderActor.class));
system.eventStream().subscribe(actor, String.class); 
```

# java - Java：用于目录结构的 JTree 组件

> ID：13345183
> 
> 赞同：1
> 
> 时间：2012-11-12T14:08:27.833
> 
> 标签：java, swing, jtree

我有以下代码用于在 Java 中创建目录结构。 **代码工作正常**
但我有一些疑问
对于我检查扩展节点的目录结构是目录还是文件如果它是目录然后遍历它并添加该父目录的文件和子目录。
每次用户扩展节点时我都会这样做。第一次遍历目录并添加节点时可以。
但是当它第二次展开时，代码将添加与第一次展开相同的内容，依此类推......
但是JTree包含的节点与目录中的节点相同，它应该包含（目录内容*节点展开的时间）
这是如何维护的，每次节点扩展时我都会添加，并且我将节点作为第一次扩展。
我犯了什么错误？
代码 ：

```
import java.io.*;    
import javax.swing.*;    
import javax.swing.tree.*;    
import java.awt.*;    
import java.awt.event.*;    
import java.util.*;    
import javax.swing.event.*;    
public class tree_drive    
{    
    JFrame frm;    
    JFileChooser file_c;    
    JTree f_tree;    
    public tree_drive(String path)    
    {    
        frm=new JFrame("Jtree Demo");       
        Container cp=frm.getContentPane();      
        frm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);    
        DefaultMutableTreeNode top = new DefaultMutableTreeNode(path);    
        f_tree=new JTree(top);    
        JScrollPane treeView = new JScrollPane(f_tree);    
        f_tree.addTreeSelectionListener(new TreeSelectionListener()    
        {    
            public void valueChanged(TreeSelectionEvent e)    
            {    
                DefaultMutableTreeNode node = (DefaultMutableTreeNode)                                              f_tree.getLastSelectedPathComponent();    
                frm.setTitle("You hava selected : "+ node.toString());    
                    if (node != null)    
                {
                    File t_file=new File(node.toString());    
                    if(t_file.isDirectory())    
                    {    
                        try    
                        {    
                            for(File f : t_file.listFiles()) 
                            {    
                                if(f.isDirectory())   
                                {
    node.add(new DefaultMutableTreeNode(f.getPath()+File.separatorChar,true));  
                                }    
                                else    
                                {    
                node.add(new    DefaultMutableTreeNode(f.getName(),false));     
                                }    
                            }       

                        }    
                        catch(Exception ge)    
                        {   System.out.println(e);              

                        }                   
                    }    
                }    
            }    
        });    
        frm.add(treeView);    
        frm.setSize(500,500);    
        frm.setVisible(true);    
        frm.pack();         
    }    
    public static void main(String ...t)    
    {       
        try    
        {    
            new tree_drive(t[0]);           
        }    
        catch(Exception e)    
        {    
            System.out.println("Plese Specify path from Command line");    
        }           
    }    
} 
```

![输出 ：](../Images/b420bd00673a0b2d460e9bb79098104f.png)

# php - 解析 XML 并回显结果

> ID：13345184
> 
> 赞同：2
> 
> 时间：2012-11-12T14:08:33.173
> 
> 标签：php, xml, parsing

我只是在学习PHP。我有一堆我已经开始的脚本，一个让我卡住了。我正在获取一个 xml 并将结果打印到页面上。但是，我只想要 refTypeID = 10 的行，并且我需要将文本“DESC：”从原因区域中修剪掉。

我当前的代码

```
<?php

// Populate the following with your API Data
$vCode = "XXXXXXX";
$keyID = "XXXXXXX";

// Create the URL to the EVE API
$eveAPI = "http://api.eve-online.com/corp/WalletJournal.xml.aspx?keyID=".$keyID."&vCode=".$vCode."";

// Get the xml data
$xml = simplexml_load_file($eveAPI);

// Loop Through Skills
foreach ($xml->result->rowset->row as $value) {
   echo "Skill Number:".$value['refTypeID']." -- Skill Points: ".$value['ownerName1']." -- Level: ".$value['reason']."<br />";  
};

?> 
```

我在解析什么

```
<eveapi version="2">
 <currentTime>2012-11-12 10:36:35</currentTime>
  <result>
   <rowset name="entries" key="refID"  columns="date,refID,refTypeID,ownerName1,ownerID1,ownerName2,ownerID2,argName1,argID1,amount,balance,reason">
    <row date="2012-11-12 10:46:49" refID="6570815512" refTypeID="10" ownerName1="Captain Vampire" ownerID1="159434479" ownerName2="The Condemned and Convicted" ownerID2="98032142" argName1="" argID1="0" amount="5000000.00" balance="13072537.98" reason="DESC: something "/>
    <row date="2012-11-10 02:27:48" refID="6561124130" refTypeID="85" ownerName1="CONCORD" ownerID1="1000125" ownerName2="Justin Schereau" ownerID2="90541382" argName1="Unertek" argID1="30002413" amount="42300.00" balance="7972463.03" reason="10015:1,10019:1,11899:1,22822:1,"/>
    <row date="2012-11-09 23:27:24" refID="6560673105" refTypeID="85" ownerName1="CONCORD" ownerID1="1000125" ownerName2="Blackcamper" ownerID2="754457655" argName1="Illamur" argID1="30002396" amount="25000.00" balance="7930163.03" reason="11898:1,"/>
   </rowset>
  </result>
 <cachedUntil>2012-11-12 11:03:35</cachedUntil>
</eveapi> 
```

任何帮助将非常感激

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:31:48.863

您可以`xpath`直接使用如下

```
$xml = simplexml_load_file($eveAPI);

/* Search for <a><b><c> */
$result = $xml->xpath('//result/rowset/row[@refTypeID=10]');

foreach($result as $value) {
  echo $value['reason'] = trim(str_replace('DESC:','',$value['reason']));
  echo "Skill Number:".$value['refTypeID']." -- Skill Points: ".$value['ownerName1']." -- Level: ".$value['reason']."<br />"; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:13:17.483

尝试

```
// Loop Through Skills
foreach ($xml->result->rowset->row as $value) {
if($value['refTypeID'] == 10){
echo "Skill Number:".$value['refTypeID']." -- Skill Points: ".$value['ownerName1']." -- Level: ".str_replace('DESC:', '', $value['reason'])."<br />"; 
}
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T14:13:30.760

您可以使用[`continue`](http://php.net/manual/en/control-structures.continue.php)跳过不需要的行：

```
foreach ($xml->result->rowset->row as $value) {
   if ($value['refTypeID'] != "10") {
      // skip
      continue;
   }
   //etc ...
} 
```

并[`str_replace`](http://php.net/manual/en/function.str-replace.php)用于删除`DESC:`您的字符串的形式：

```
$reason = str_replace('DESC: ','',$value['reason']); 
```

注意：这也会删除之后的空格`DESC:`

# ruby-on-rails - 如何传递对象的值属性已保存，以查看创建具有相同值的新对象

> ID：13345185
> 
> 赞同：0
> 
> 时间：2012-11-12T14:08:36.137
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我有一个用于创建问题和答案的新表格。这是我的表格：

```
<%= simple_form_for [@question_type, @question], url: path, defaults: { error: false } do |question_form| %>
  <%= render 'shared/error_messages', object: question_form.object %>

  <div class="question_fields well">
    <%= question_form.input :content, input_html: { rows: 4, class: 'span6' } %>
    <%= question_form.input :mark, input_html: { class: 'span1' } %>
    <%= question_form.association :topic %>
  </div>
  <%= question_form.simple_fields_for :answers do |answer_form| %>
    <%= render 'answer', f: answer_form %>
  <% end %>
  <%= question_form.button :submit, class: "new_resource" %>
<% end %> 
```

该问题有 3 个字段：内容、标记、主题。

这是我`create`有问题的控制器操作：

```
def create
  @question = Question.new(params[:question])
  @question.question_type_id = params[:question_type_id]
  @question.user_id = current_user.id

  if @question.save
    flash[:success] = "Successfully created question."
    redirect_to new_question_type_question_path
  else
    render 'new'
  end
end 
```

我的路线：

```
resources :question_types, only: [:index] do
  resources :questions
end 
```

现在，我想在用户提交创建问题成功后，它会再次显示新表单，但`topic`选择会显示刚刚保存的问题主题。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:33:23.453

**#1 解决方案 -**

如果我正确理解了您的问题，您可以在问题成功保存后将问题的 topic_id 传递给新操作。

```
redirect_to new_question_type_question_path(:topic_id => @question.topic_id ) 
```

然后在问题控制器的新操作中，如果 params[:topic_id] 存在，则添加 topic_id？

像这样的东西，

```
def new
  ...
  ...
  @topic_id = params[:topic_id] if params[:topic_id].present?
end 
```

然后以新形式，使用此 @topic_id 实例变量显示您的主题。我对 simple_form_for 了解不多，但你可以做类似的事情，

```
<%= question_form.association :topic, :selected => (@topic_id.present? ? @topic_id : '') %> 
```

或者

**#2 解决方案**

要显示保存的最后一个问题的主题，您只需要新操作中的最后一个问题对象。您不需要执行 #1 解决方案的上述步骤

```
def new
  ...
  ...
  @topic_id = current_user.questions.order('created_at ASC').last.topic_id if current_user.questions.present?
end 
```

以新的形式做与#1解决方案相同的事情，

```
<%= question_form.association :topic, :selected => (@topic_id.present? ? @topic_id : '') 
```

# forms - 手动选择相关实体

> ID：13345187
> 
> 赞同：0
> 
> 时间：2012-11-12T14:08:39.663
> 
> 标签：forms, symfony, doctrine

我有一个可以有图像的实体。这是使用`OneToMany`关系完成的。现在我希望用户选择一个图像。我当然可以使用`form field`这样的：

```
$builder->add('image', 'entity', array(
    'label' => 'Image',
    'class' => 'VendorNameBundle:Image',
    'property' => 'id',
) ); 
```

它按预期呈现包含所有 id 的下拉列表。但我真正想要的只是一个隐藏的字段，它存储所选图像的 id。

这可行，但似乎不是一件好事……</p>

在**类型**中：

```
$builder->add('_image', 'text', array(
    'data' => $object->getImage()->getId(),
    'property_path' => false
)); 
```

在**控制器**中：

```
$_image = $form["_image"]->getData();
if ($_image) {
    $image  = $this->getDoctrine()->getRepository('VendorNameBundle:Image')->find($_image);
    if ($image) {
        $object->setImage($image);
    }
} 
```

我的问题是：如何获得一个隐藏的文本字段，其中包含相关对象的 ID 并存储新选择的对象？

# python - 作为一门语言，Python 是否因为没有 end 语句而受到限制？

> ID：13345191
> 
> 赞同：6
> 
> 时间：2012-11-12T14:08:56.010
> 
> 标签：python, coding-style

由于 Python 使用制表符间距来指示范围（因此没有符号），这是否`end`会`}`以任何方式限制语言具有特定功能？

*注意：我不是在谈论个人对编码风格的偏好，我是在谈论由于没有`end`声明而直接导致的实际语言限制？*

例如，[直接来自 Guido 的帖子显示](http://www.artima.com/weblogs/viewpost.jsp?thread=147358)由于 Python 没有终止`end`/`}`符号而缺少多行 Lamba？

**如果是这样，由于这种语言设计决定使用缩进，还有哪些其他 Python 限制？**

* * *

更新：

请注意，这个问题与 Lambda 和技术上无关，甚至与 Python 本身无关。这是关于编程语言设计......当编程语言被设计为具有缩进（与结束语句相反）表示块范围时，它有什么限制。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-12T14:12:27.527

不乏`end`/ `}`：结束由对先前深度的“凹痕”表示。所以没有任何限制。

例子：

```
x = 123
while x > 10:
    if x % 21:
        print("x")
    print("y")
print("z") 
```

“开始”对应于缩进级别的增加（之后`while`，之后`if`）。

“结束”对应于缩进级别的降低（在相应`print()`的 s 之后）。

如果省略`print("y")`，则在最顶层有一个“缩进”，对应于有两个连续的“结束”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T15:11:04.733

这个问题的答案介于句法糖和语言风格之间，即如何优雅地表达问题并符合语言哲学。任何图灵完备的语言，甚至是汇编语言和 C——肯定缺乏任何 lambda 支持——都可以解决任何问题。Lambda 只允许使用标准函数定义也可声明的内容的不同（如果从函数式语言的角度来看可能更优雅）的措辞。因此，除了必须以不同方式编码之外，我无法认识到这里的限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T14:36:17.957

最大的限制之一（如果你这么称呼的话）是你不能在同一个程序中使用制表符和空格。

你不应该。曾经。

没有明显的结构限制，除非在解析 python 源文件时（解析，而不是解释）：

```
def foo(bar):
        # If bar contains multiple elements
    if len(bar) > 1:
            return bar 
```

这是完全合法的 Python 代码，但是，在解析文件时，您可能会在试图找出注释所属的缩进级别时遇到麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-07T22:46:54.780

“限制”是什么意思？您的意思是 Python 无法执行其他语言可以执行的计算吗？在那种情况下，答案肯定是否定的。Python 正在[图灵完备](http://en.wikipedia.org/wiki/Turing_completeness)。

您的意思是缺少 end 语句会改变 Python 中计算的表达方式吗？在这种情况下，答案是“大部分不是”。你必须明白 Python 的 dedent*是*一个 end 语句；它是解释器识别为块结尾的字节序列。

然而，正如其他人所提到的，当涉及到内联函数（Python 的 lambda）时，使用缩进来表示块是很尴尬的。这意味着 Python 程序的风格可能与 JavaScript 略有不同，例如（通常编写大型内联函数）。

话虽如此，许多语言甚至一开始就没有内联函数，所以我不会将此称为限制。

# linq - NotSupportedException 发生 LINQ to Entities 无法识别方法 ToList

> ID：13345195
> 
> 赞同：1
> 
> 时间：2012-11-12T14:09:05.477
> 
> 标签：linq, entity-framework, linq-to-entities

我正在开发一个带有 WCF 后端的 ASP.NET MVC 4.5 应用程序，其中实体框架 5 用作数据访问。PictureUse是实体，PictureUsageContract是通过WCF传输的DataContract。

Repository.GetAll 是一个标准的通用获取所有对象，用于从对象上下文中获取实体。

```
var allPictureUses = _pictureUseRepository.GetAll()
                .Where(x => x.Name != null)
                .Include(x => x.PictureUse1)
                .Select(x => new PictureUsageContract()
                {
                    ID = x.ID,
                    DefaultPrice = x.DefaultPrice,
                    Name = x.Name,
                    UseDescription = x.UseDescription,
                    SubItemList = x.PictureUse1.Select(c => c.UseDescription).ToList()        

                }).ToList(); 
```

调试时收到异常：{"LINQ to Entities 无法识别方法 'System.Collections.Generic.List `1[System.String] ToList[String](System.Collections.Generic.IEnumerable`1[System.String])' 方法，并且此方法无法转换为存储表达式。"}

我知道它是以下行：

```
 SubItemList = x.PictureUse1.Select(c => c.UseDescription).ToList() 
```

SubItemList 是一个列表 PictureUse 是一个实体。

我事先搜索了一下，知道可能是 .Select 没有得到 LINQ to Entities 的正确支持，但我还没有找到任何具体的解决方案。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:56:03.653

尝试

```
var allPictureUses = _pictureUseRepository.GetAll()
                .Where(x => x.Name != null)
                .Include(x => x.PictureUse1)

                .ToArray()

                .Select(x => new PictureUsageContract()
                {
                    ID = x.ID,
                    DefaultPrice = x.DefaultPrice,
                    Name = x.Name,
                    UseDescription = x.UseDescription,
                    SubItemList = x.PictureUse1.Select(c => c.UseDescription).ToList()        
            }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:45:15.453

如果您收到一条错误消息，指出 Linq To Entities 不支持 ToList，那么显而易见的做法就是将其删除。

所以我会尝试

```
var allPictureUses = _pictureUseRepository.GetAll()
            .Where(x => x.Name != null)
            .Include(x => x.PictureUse1)
            .Select(x => new PictureUsageContract()
            {
                ID = x.ID,
                DefaultPrice = x.DefaultPrice,
                Name = x.Name,
                UseDescription = x.UseDescription,
                SubItemList = x.PictureUse1.Select(c => c.UseDescription)        

            }).ToList(); 
```

如果这不起作用（例如，它可能不允许您分配给 SubItemList），那么您可能必须先将详细信息检索到匿名对象列表中，然后再将它们转换为列表

例如

```
var allPictureUses = _pictureUseRepository.GetAll()
            .Where(x => x.Name != null)
            .Include(x => x.PictureUse1)
            .Select(x => new 
            {
                ID = x.ID,
                DefaultPrice = x.DefaultPrice,
                Name = x.Name,
                UseDescription = x.UseDescription,
                SubItemList = x.PictureUse1.Select(c => c.UseDescription)        

            }).ToList()

            .Select(x => new PictureUsageContract()
            {
                ID = x.ID,
                DefaultPrice = x.DefaultPrice,
                Name = x.Name,
                UseDescription = x.UseDescription,
                SubItemList = x.SubItemList.ToList()     

            }).ToList(); 
```

# windows-phone-7 - WP7 Listbox如何显示加载更多项目

> ID：13345196
> 
> 赞同：0
> 
> 时间：2012-11-12T14:09:07.333
> 
> 标签：windows-phone-7, listbox, virtualizingstackpanel

我知道 Windows Phone 7 ListBox`VirtualizingStackPanel`默认使用优化内存。

但是，当我向视图模型添加更多项目时，列表框不会显示这些新项目。我必须向上滚动，然后向下滚动才能看到它们。

我的视图模型确实实现了`IList`

周围很多文章都有这个问题，比如[这个指南](http://blogs.microsoft.co.il/blogs/shair/archive/2011/04/06/wp7-how-to-extend-listbox-when-reaching-last-item.aspx)

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T23:25:21.337

您是否在添加更多项目时viewmodel 实现了[INotifyPropertyChanged接口并引发 PropertyChanged 事件？](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged%28v=vs.95%29.aspx "INotifyPropertyChanged")

更好的解决方案是使您绑定到[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604%28v=vs.95%29.aspx)的 viewmodel 属性。当从集合中添加/删除项目时，此类将自动引发 PropertyChanged 事件。

# qt - Phonon::VideoPlayer 的未定义引用

> ID：13345204
> 
> 赞同：1
> 
> 时间：2012-11-12T14:09:52.567
> 
> 标签：qt, ubuntu, phonon

我正在使用 ubuntu 11.10 并使用 QT 创建一个 GUI，该 GUI 在构建时使用 cmakelist。我遇到的问题是运行 make 时出现“未定义的对`Phonon::VideoPlayer::VideoPlayer(Phonon::Category, QWidget*)' 的引用”错误。

我正在使用 QT 4.7.4 和这个“Qt PHONON library not found”。运行 make 时也会出现。

这是来自 cMakeCache

//库的路径。QT_PHONONWIDGETS_PLUGIN_RELEASE:FILEPATH=/usr/lib/i386-linux-gnu/qt4/plugins/designer/libphononwidgets.so

//文件的路径。QT_PHONON_INCLUDE_DIR:PATH=/usr/include/qt4/phonon

//Qt PHONON 库 QT_PHONON_LIBRARY:STRING=

字符串始终为空。

在我的头文件中，这是相关代码

包括“声子/视频播放器”

Phonon::VideoPlayer* 播放器；

并在 cpp

player = new Phonon::VideoPlayer(Phonon::VideoCategory,this);

任何帮助表示赞赏。

谢谢

雅各布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:02:27.610

我最终不得不将四个 libphonon.so 文件从 QtSDK/QtCreator/lib/qtcreator 复制到 usr/lib/i386-linux-gnu 以使其工作。

感谢帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:26:14.487

试试这个：

1.  从 ubuntu 软件中心安装 phonon 和 libphonon-dev。
2.  之后将其添加到您的项目文件 (.pro) -> QT += phonon
3.  使用这些头文件：

    ```
    #include <phonon/AudioOutput>
    #include <phonon/MediaObject>
    #include <phonon/MediaSource>
    #include <phonon/VideoWidget>
    #include <phonon/VideoPlayer>

    using namespace Phonon; 
    ```

这是 Qt 文档中的一个简单示例：

```
 VideoPlayer *player = new VideoPlayer(Phonon::VideoCategory, parentWidget);
 connect(player, SIGNAL(finished()), player, SLOT(deleteLater()));
 player->play(url); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T19:26:50.917

如果您使用的是 linux install phonon 和 libphonon-dev： $sudo apt-get install phonon libphonon-dev

在您可以包含在 project.pro 文件中之后：

LIBS += -lphonon

如果不起作用，如果安装了 lib，您可以证书：$locate libphonon.so

输出可能是：“/usr/lib/i386-linux-gnu/libphonon.so”

您可以在 project.pro 文件中包含： INCLUDEPATH += /usr/lib/i386-linux-gnu

LIBS += -lphonon

# ios - 在固定的 UILabel 中处理长文本的最佳实践是什么

> ID：13345205
> 
> 赞同：0
> 
> 时间：2012-11-12T14:09:58.983
> 
> 标签：ios, uilabel, uislider

我有一个包含自定义单元格的表格。在每个单元格中都有一个 UILabel，它应该显示一个非固定长度的文本。标签有一个最大尺寸，比如说 (150,30)。它只能显示一行文本。

处理长文本的最佳做法是什么？我应该减小字体的大小吗？它看起来不太好，因为每一行都有不同的大小。我应该在最后修剪文本吗？然后我没有显示所有内容。有没有一种简单的方法可以让文本在标签内滑动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:17:25.163

您可以在最后修剪文本，并通过在其上添加一个透明按钮来使 UILabel 可点击。通过触摸 UILabel，您可以显示带有全文的警报。或者，您可以在显示警报的文本旁边的某处添加一个按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:33:41.347

好的，所以经过多次尝试和错误之后，没有一个神奇的答案。

我最终强制文本为最大尺寸，看起来最好，特别是长名称的用户体验很糟糕..

您可以使用以下命令创建一个滚动文本标签： [https](https://github.com/cbpowell/MarqueeLabel.git) ://github.com/cbpowell/MarqueeLabel.git 它看起来不太符合我的需求，但它可以很好地满足其他需求..

减小长标签上的文本大小也是一种选择，但如果屏幕上有多个标签并且它们的字体大小不同，则看起来很糟糕。

修剪文字是最糟糕的..

# java - Spring：如何使用 GenericDao 获取多个数据源？

> ID：13345206
> 
> 赞同：3
> 
> 时间：2012-11-12T14:09:58.753
> 
> 标签：java, spring, jdbc, transactions

我有一个使用 Spring 3.1.1 的 Web 应用程序。我们有一个使用 JdbcTemplate 的 genericDao。Datasource 在 GenericDaoImpl 中是这样注入的。

```
public class GenericDaoImpl<T extends Serializable> implements GenericDao<T> {

protected Class<T> entityClass;

protected JdbcTemplate jdbcTemplate;

@Autowired
public void setDataSource(DataSource dataSource) {
    this.jdbcTemplate = new JdbcTemplate(dataSource);
}

....

@Override
public List<T> findAll(String sql, ParameterizedRowMapper<T> mapper, Object... args) {
    return jdbcTemplate.query(sql, mapper, args);
}

} 
```

这是一个简单的 DAO。

```
@Repository
public class ElementDaoImpl extends GenericDaoImpl<Element> implements ElementDao {

    private static ParameterizedRowMapper<Element> mapper = new ParameterizedRowMapper<Element>() {...};

    public List<Element> findChildren(int id) {
        sql = "SELECT....";
        return findAll(sql, mapper, new Object[] {id});
    }

} 
```

目前，凭借独特的数据源，它运行良好。applicationContext 配置有注解。

```
<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="java:comp/env/jdbc/...."/>
</bean>

<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource"/>
</bean>

<tx:annotation-driven proxy-target-class="true" transaction-manager="transactionManager"/> 
```

现在我必须集成一个仍然使用genericDao的新DAO，但在另一个数据库（所以另一个数据源）上工作。

我在服务中使用@Transactionnal。我在 spring 文档上读到，我们可以给事务一个限定符，以便选择好的事务管理器。

所以，我创建了一个新的数据源，一个新的事务管理器......

```
<bean id="firstDS" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="java:comp/env/jdbc/...."/>
</bean>

<bean id="secondDS" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="java:comp/env/jdbc/...."/>
</bean>

<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="firstDS"/>
</bean>

<bean id="txManagerSecond" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="secondDS"/>
    <qualifier value="txSecond"/>
</bean>

<tx:annotation-driven proxy-target-class="true"/> 
```

在我的新服务上，我已将值添加到 @Transactionnal 注释中：

```
 @Transactionnal("txSecond") 
```

重新开始，我有 4 个类来管理新数据库：服务接口、使用 @Transactionnal("txSecond") 的服务实现、DAO 接口、基于 genericDao 的 DAO 实现，在注入的数据源上创建了一个 JdbcTemplate 对象。

我创建了一个 Junit 测试，但暂时我阻止了一个异常： NoSuchBeanDefinitionException：没有定义 javax.sql.DataSource 类型的唯一 bean。预期单个匹配 bean，但找到 2 个（firstDs，SecondDs）。

我认为 pb 是 genericDao 但不确定。

如何管理？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:32:33.757

在配置文件中的每个 bean 上手动设置数据源

```
<bean id="elementDao" class="ElementDaoImpl" autowire="byName">
   <property name="datasource" ref="datasource2">
</bean> 
```

另一个解决方案：使用“别名” [http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-java-bean-混叠](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-java-bean-aliasing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:38:56.277

问题是在自动装配数据源时，您没有指定任何限定符。

```
 @Autowired

public void setDataSource(DataSource dataSource) {
this.jdbcTemplate = new JdbcTemplate(dataSource); 
```

}

因此，如果您需要将两个数据源放在同一个类中，请使用两个不同的 setter 注入配置它们，并在每种情况下提供适当的限定符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T09:14:22.017

有比添加限定符更优雅的解决方案。

[Spring：如何从依赖注入中隐藏 bean？](https://stackoverflow.com/questions/5169230/spring-how-to-hide-bean-from-dependency-injection/)

[自动装配两个实现相同接口的 bean - 如何将默认 bean 设置为自动装配？](https://stackoverflow.com/questions/10534053/autowiring-two-beans-implementing-same-interface-how-to-set-default-bean-to-au)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-30T20:12:58.073

默认情况下，自动装配注解按 bean 类型映射，**因此**当配置 xml 中存在多个相同类型的 bean 时，必须使用**qualifier("bean id")**来让 Spring 容器知道要装配哪个 bean。

# php - 如何从提要中导入 XML 数据

> ID：13345208
> 
> 赞同：1
> 
> 时间：2012-11-12T14:10:13.807
> 
> 标签：php, xml, xml-parsing

我正在尝试使用他们的 API 从 3rd 方提要中获取数据。据称，它采用的格式是 XML，但在我未经训练的情况下与它几乎没有相似之处。这是使用 php 回显到屏幕上的样子：

```
122701 29 Epound_10_-_Epound_20 13 Epound_20_-_Epound_30 1 Epound_30_-_Epound_40 4 Epound_40_-_Epound_50 11 532601 13 4896423 10 283701 6 0 29 0__-_100_ 29 BRAND NEW BOXED 8GB 4TH GEN STYLE MP4 PLAYER MUSIC VIDEO WITH IPOD CONNECTION LIMITED STOCK AT THIS PRICE! PINK RED BLUE SILVER PURPLE BLACK GREEN FEATURES USB 2.0 version with capacity: 8GB Holds Up to 1600 Songs 2 inch TFT Screen, 260K true colors display Support multiple music formats: MP1, MP2, MP3,WMA, http://r.3rdparty.com/r/uk/532601/122701/90/90/http%3A%2F%2Fi.ebayimg.com%2F00%2Fs%2FMzg1WDU5OQ%3D%3D%2F%24%28KGrHqN%2C%21lME6CWISze5BOsD3p%28T0%21%7E%7E60_1.JPG%3Fset_id%3D8800005007/voAX7N1WHJJIu1oTgPhOqVsRjHMhQEX45KQtKDk2t4o- 90 90 http://r.3rdparty.com/r/uk/532601/122701/auto/auto/http%3A%2F%2Fi.ebayimg.com%2F00%2Fs%2FMzg1WDU5OQ%3D%3D%2F%24%28KGrHqN%2C%21lME6CWISze5BOsD3p%28T0%21%7E%7E60_1.JPG%3Fset_id%3D8800005007/voAX7N1WHJJIu1oTgPhOqVsRjHMhQEX45KQtKDk2t4o- http://ecs-uk.3rdparty.com/ctl/go/sitesearchGo?.ts=1352310761409&.sig=v6kMZQynUtJjAqTcYY01ZY_OGEM-&offerId=81b44a3770af829494b013d20aaf433a&searchId=1076987819567_1352310761409_2488241&affiliationId=12345678&country=uk&wait=true&ecs=ok&contextLevel=1&merchantid=532601&comId=532601&catId=122701 http://3rdparty.com/p-mp3-players-122701/bush-mp3-8gb-19657960?partnerId=12345678 eBay.co.uk http://3rdparty.com/data/merchantlogos/532601/ebay-logo-640.jpg 80 24 122701-19657960 Bush MP3 8GB MP3 Players 11.49 2.99 2.99 14.48 0 1 false Sound & Vision:iPods & MP3 Players| iPods & MP3 Players Bush 567 Features: * Connections: 1 x 30 Pin Ipod connection port, 1 x 3.5mm jack headphone output * Playable formats: MP3, AMV, WMV, ASF Video, JPG, TXT, LRC, WAV * Suitable for use with Windows PCs and MAC * Integrated long lasting lithium-ion battery * Built-in equalizer with 7 presets * Built-in Clock * Integrated http://r.3rdparty.com/r/uk/4896423/122701/90/90/http%3A%2F%2Fecx.images-amazon.com%2Fimages%2FI%2F31IHNu5OI5L._SL160_.jpg/Nw1b8PcAtWqiL74fE7oiiBurTgUSoIiWBYGvjkSH8hc- 90 90 http://r.3rdparty.com/r/uk/4896423/122701/auto/auto/http%3A%2F%2Fecx.images-amazon.com%2Fimages%2FI%2F31IHNu5OI5L._SL160_.jpg/Nw1b8PcAtWqiL74fE7oiiBurTgUSoIiWBYGvjkSH8hc- http://ecs-uk.3rdparty.com/ctl/go/sitesearchGo?.ts=1352310761409&.sig=Zh1tMTvh5S8dhWh3uC7CZYgI7rc-&offerId=661a194e6394057cf5315e16c23802b3&searchId=1076987819567_1352310761409_2488241&affiliationId=12345678&country=uk&wait=true&ecs=ok&contextLevel=1&merchantid=4896423&comId=4896423&catId=122701 http://3rdparty.com/p-mp3-players-122701/atlantic-agsil8-8gb-19803999?partnerId=12345678 Amazon Marketplace http://3rdparty.com/data/merchantlogos/4896423/Amazon_marketplace.gif 80 24 122701-19803999 Atlantic AGSIL8 8GB MP3 Players 11.99 3.99 3.99 15.98 0 1 Usually dispatched within 1-2 business days false 0608938410283 Electronics & Photo/Categories/Portable Sound & Vision/MP3 & Digital Media Players Atlantic 11695 brand new 8gb mp4 player very similar to the ipod nano,ipod chargers also work on this 2) Support multi-lanuages:English,French,German, Itlian,Spainish,ect 26 lanuages. 3) Play Mp3 4) Play movies 5) ID3 Lyrics display 6) 
```

我的问题是，如何使用 php 转换它并提取数据？似乎没有像我见过的 XML 数据示例中那样的字段名，例如“标题”、“图像”等。

我已经阅读了这个 Stack Overflow 问题，但它对我的提要没有帮助：

[如何在 PHP 中使用 XMLReader？](https://stackoverflow.com/questions/1835177/how-to-use-xmlreader-in-php)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T10:55:06.130

如果您不想读取 xml 数据，请按照以下步骤操作，

$xmlURL = "你的 xml url 放在这里";

```
try {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $xmlURL);
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array(
        'Content-type: text/xml'
    ));
    $content = curl_exec($ch);
    $error   = curl_error($ch);
    curl_close($ch);
    $obj = new SimpleXMLElement($content);
    echo "<pre>";
    var_dump($obj);
    echo "</pre>"; 
}
catch(Exception $e){
    var_dump($e);exit;
} 
```

您将获得整个 xml 文件的数组格式。

谢谢。

# javascript - 如何对通过上下文传递给我的 ajax done 函数的值进行类型检查？

> ID：13345209
> 
> 赞同：3
> 
> 时间：2012-11-12T14:10:19.327
> 
> 标签：javascript, jquery, typescript

我定义了以下类：

```
class Link {
    Action: string;
    DialogType: string;
    constructor ($link: JQuery) {
        this.Action = $link.attr('data-action') || '';
        this.DialogType = $link.attr('data-dialogType') || '';
    }
} 
```

我有声明类实例的函数。一旦声明了类，我就可以使用智能感知并进行完整的类型检查：

```
function adminDialog($link: JQuery) {
    var link = new Link($link);
    link.Modal.MaxHeight = 600;
    doDialogAjax(link);
} 
```

在下面的 doDialogAjax 函数中，我仍然有完整的类型检查：

```
function doDialogAjax(link: Link) {
    $.ajax( link.Url, {
        cache: false,
        context: { link: link },
        dataType: 'html'
    }).done(onDialogDone).fail(onDialogFail);
} 
```

此时，如果我尝试访问，我会丢失类型检查`this.link`：

```
function onDialogDone(data: any, textStatus: string, jqXHR: JQueryXHR) {

    // no type checking. I can type anything after this.link
    var x = this.link.abcdefg;

    // I assign to link
    var link: Link = this.link;

    // Now I get checking
    var a = link.Modal.MaxHeight; // allowed
    var a = link.abcdefg;         // error

    // However will the following change the property of the link passed 
    // into the function. I assume not but I am not 100% sure.
    link.Modal.MaxHeight = 999;

} 
```

所以我的问题是如何对`link`使用上下文传递给函数 onDialogDone 的值进行类型检查？我是否正确地说，在我在该函数中创建一个新的变量链接之后，对链接所做的任何更改都不会对作为 this.link 传入的对象进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:04:01.407

这条线是做你想做的事的一种完全有效的方式：

```
var link: Link = this.link; 
```

我建议将其更改为：

```
var link = <Link>this.link; 
```

JavaScript 中的每个对象都是一个引用，您不能使用这一行创建新对象。因此，对新链接变量的任何更改都会反映在 this.link 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:26:46.167

如果您使用lambda 语法`link`使您的成功（以及，就此而言，失败）函数匿名，则仍应键入的值：`()=>`

```
function doDialogAjax(link: Link) {
    $.ajax( link.Url, {
        cache: false,
        context: { link: link },
        dataType: 'html'
    }).done((data: any, textStatus: string, jqXHR: JQueryXHR) => {
        var x = link.Modal.MaxHeight; // You should get type checking here without needing to do anything else, whether or not link is a property of the root 'this'.
   }).fail((/*args*/)=> { /*Fail function*/ });
} 
```

# ios - NSpredicate - 以任意顺序搜索单词

> ID：13345211
> 
> 赞同：0
> 
> 时间：2012-11-12T14:10:30.967
> 
> 标签：ios, regex, core-data, nspredicate, nsfetchedresultscontroller

我让 CoreData 存储了一个对象，它的属性字段“description”之一是文本描述。eg description = @"意外造成的严重头部外伤";

我想找到 NSPedicate 可以按任何顺序搜索此列，并且按单词不精确的短语，例如：如果我搜索“意外创伤严重”，我想得到上面的字符串。

```
-(void)Fetch(){
.......
NSArray *words = [query componentsSeparatedByString:@" "];
req.predicate = [NSPredicate predicateWithFormat:@"description contains[cd] %@ AND description contains[cd] %@ ...",words[0],words[1],[words[2],...];
.....
//execute fetchRequest
//return NSFetchedResultsController;
}

-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
 {
  [self Fetch];
  [self.tableView reloadData];
  } 
```

上面的代码有点工作，但我想使用 beginwith 而不是 contains，beginswith 似乎不起作用。另外，我不知道用户可以输入多少个单词，所以很难通过 words[0], words[1]...等来形成上面的谓词。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:46:20.020

您可以将句子拆分为标记（单词，或者可能只是相关的单词）并创建不同的实体（如关键字）。这样，您的模型将具有这些关键字的数组。然后，您可以进行查询以查找与所有标记或至少一个标记匹配的所有这些模型（但是您想进行搜索）。

# java - 如何使用primefaces的ajax刷新jstl测试？

> ID：13345212
> 
> 赞同：3
> 
> 时间：2012-11-12T14:10:34.697
> 
> 标签：java, ajax, jsf, primefaces, jstl

例如：当我点击按钮时`A`。我得到以下文字：`you have choosed A`。

但是当我更改按钮时，我得到相同的文本，虽然`#{bean.str}`更改的值

这是我的代码：

```
<p:selectOneButton id="selectId" value="#{bean.str}">
            <f:selectItem itemLabel="A" itemValue="1" />
            <f:selectItem itemLabel="B" itemValue="2" />
            <f:selectItem itemLabel="C" itemValue="3" />
            <f:ajax event="change" render="tabView" listener="#{bean.change}" />
</p:selectOneButton>

<c:if var="test" test="#{bean.str =='1'}">
        <h:outputText value="you have choosed A" />
</c:if>
<c:if test="#{beanApplication.perspective=='2'}">
        <h:outputText value="you have choosed B" />
</c:if>
<c:if test="#{beanApplication.perspective=='3'}">
        <h:outputText value="you have choosed C" />
</c:if> 
```

`<c:if>`当我单击按钮时，我正在寻找一种刷新 JSTL测试的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T14:21:28.593

JSTL 在 JSF 视图构建期间运行，而不是在 JSF 视图呈现期间运行。但是，在此特定示例中，提交的值仅在视图构建时间*之后设置为 bean 属性。*视图构建时间在 JSF RESTORE_VIEW 阶段运行，但 bean 属性在 JSF UPDATE_MODEL_VALUES 阶段设置。

您需要在渲染期间评估条件。使用为此提供的 JSF 组件的`rendered`属性。

```
<h:outputText value="you have chosen A" rendered="#{bean.str == '1'}" />
<h:outputText value="you have chosen B" rendered="#{bean.str == '2'}" />
<h:outputText value="you have chosen C" rendered="#{bean.str == '3'}" /> 
```

此外，您应该`<p:ajax>`在 PrimeFaces 组件中使用，而不是`<f:ajax>`. 此外，您应该确保`tabView`在`<f:ajax render>`（以及等效地`<p:ajax update>`）中引用的组件涵盖上述三个组件。这是一个完整的启动示例：

```
<p:selectOneButton id="selectId" value="#{bean.str}">
    <f:selectItem itemLabel="A" itemValue="1" />
    <f:selectItem itemLabel="B" itemValue="2" />
    <f:selectItem itemLabel="C" itemValue="3" />
    <p:ajax listener="#{bean.change}" update="tabView" />
</p:selectOneButton>

<h:panelGroup id="tabView">
    <h:outputText value="you have chosen A" rendered="#{bean.str == '1'}" />
    <h:outputText value="you have chosen B" rendered="#{bean.str == '2'}" />
    <h:outputText value="you have chosen C" rendered="#{bean.str == '3'}" />
</h:panelGroup> 
```

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:16:38.583

您可以将所有条件放在面板中并在按钮单击时重新渲染

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T14:20:32.703

在您的 3 outputText 上使用“渲染”属性

# sitecore - Sitecore Velocity 如何构建项目的 URL

> ID：13345216
> 
> 赞同：1
> 
> 时间：2012-11-12T14:10:43.747
> 
> 标签：sitecore, sitecore6, sitecore-workflow

我正在使用以下代码来可视化电子邮件中的不同信息。

```
 this.velocityContext.Put("args", args);
            this.velocityContext.Put("item", args.DataItem); 
            this.velocityContext.Put("processor", args.ProcessorItem);
            this.velocityContext.Put("user", Context.User); 
            this.velocityContext.Put("history", args.DataItem.State.GetWorkflow().GetHistory(args.DataItem));
            this.velocityContext.Put("state", args.DataItem.State.GetWorkflowState());
            this.velocityContext.Put("nextState", this.GetNextState(args));
            this.velocityContext.Put("site", Context.Site);
            this.velocityContext.Put("time", DateTime.Now);
            this.velocityContext.Put("previewUrl",string.Format("Http://{0}/?sc_itemid=%7b{1}%7d&sc_mode=preview",Context.Site.HostName,args.DataItem.ID.Guid)); 
```

previewUrl 的值不起作用。Context.Site.HostName 始终为空。有人知道是什么原因吗？或者是否有另一种方法来建立必须由内容所有者审查/批准或拒绝的文章链接？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:51:19.317

如果您的代码在工作流中执行，它会在 Shell 站点上下文中执行，这不会为您提供您正在寻找的站点上下文或主机名。您需要解析该项目所属的站点，并从中获取主机名。

从这里获取 LinkHelper 类： [http ://webcmd.wordpress.com/2011/11/30/multiple-sites-with-one-authoring-domain-in-sitecore/](http://webcmd.wordpress.com/2011/11/30/multiple-sites-with-one-authoring-domain-in-sitecore/)

使用 LinkHelper 确定给定项目的站点。然后从返回的 SiteInfo 中获取 HostName。

# c# - 如何使用向上、向下、向左和向右键移动焦点，就像 WPF 中的数据网格一样？

> ID：13345222
> 
> 赞同：0
> 
> 时间：2012-11-12T14:10:59.283
> 
> 标签：c#, wpf, focus, tab-ordering

在我的 WPF 应用程序中，我想使用向上、向下、向左和向右键将焦点移到控件上。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:51:20.823

你指的是标签排序吗？这意味着当您按 TAB 或 SHIFT-TAB 时焦点在控件中循环的顺序。

WPF 中的制表符排序不会以特定的数字序列运行。相反，它只是检查下一个最高数字是多少。即：您可以将一个控件设置为 0，将一个控件设置为 45，只要在 0 和 45 之间没有任何控件，它就会跳转到 45。要在 xaml 中设置顺序，请将此附加属性添加到您的定义中：

```
<Control KeyboardNavigation.TabIndex="0" /> 
```

如果您想从标签顺序中排除控件，您可以：

```
<control IsTabStop="false"/> 
```

如果您想了解更多信息或者这不适用于您，那么您能否在您的问题中提供更多详细信息？

# sharepoint - Sharepoint 2010 中的客户端控制

> ID：13345229
> 
> 赞同：1
> 
> 时间：2012-11-12T14:11:08.940
> 
> 标签：sharepoint, sharepoint-2010

我想使用 Javascript 和 HTML 在客户端创建 PeopleEditor 控件。不使用 .aspx 页面？

或者

我们可以在 PeopleEditor 2010 中创建客户端人员选取器控件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:36:42.330

PeoplePicker 对 Active Directory 进行直接查询，因此我认为不可能在客户端进行。

但是您可以使用 Sharepoint 用户作为数据源： [http ://spservices.codeplex.com/wikipage?title=Users%20and%20Groups&referringTitle=%24%28%29.SPServices](http://spservices.codeplex.com/wikipage?title=Users%20and%20Groups&referringTitle=%24%28%29.SPServices)

或配置文件： [http ://spservices.codeplex.com/wikipage?title=UserProfileService&referringTitle=%24%28%29.SPServices](http://spservices.codeplex.com/wikipage?title=UserProfileService&referringTitle=%24%28%29.SPServices)

# c++ - 带有 libssh 的自定义命令

> ID：13345232
> 
> 赞同：0
> 
> 时间：2012-11-12T14:11:13.307
> 
> 标签：c++, shell, custom-controls, libssh, condor

我正在使用 SSH 与 condor 服务器进行通信，并且需要调用命令以进行自定义控制（即`condor_submit`、`condor_make`、`condor_q`等）。在我的 Xcode 项目中下载并成功集成了 libSSH（是的，我使用的是 Mac OS），我发现提供的功能不支持自定义命令。教程说明这将在主机上执行命令：

```
 rc = ssh_channel_request_exec(channel, "ls -l");
if (rc != SSH_OK) {
  ssh_channel_close(channel);
  ssh_channel_free(channel);
  return rc;
} 
```

*[资源](http://api.libssh.org/master/libssh_tutor_command.html)*

然而，当我`"ls -l"`用 let's say替换时`"condor_q"`，命令似乎没有执行。我设法通过使用这样的交互式 shell 会话来解决这个问题：

```
 // Create channel

rc = ssh_channel_request_pty(channel);
if (rc != SSH_OK) return rc;
rc = ssh_channel_change_pty_size(channel, 84, 20);
if (rc != SSH_OK) return rc;
rc = ssh_channel_request_shell(channel);

std::string commandString = "condor_q";
char buffer[512];
int bytesRead, bytesWrittenToConsole;
std::string string;

while (ssh_channel_is_open(channel) && !ssh_channel_is_eof(channel)) {
    // _nonblocking
    bytesRead = ssh_channel_read_nonblocking(channel, buffer, sizeof(buffer), 0);
    if (bytesRead < 0) {
        rc = SSH_ERROR;
        break;
    }
    if (bytesRead > 0) {
        for (int i = 0; i < bytesRead; i++) {
            string.push_back(buffer[i]);
        }
        bytesWrittenToConsole = write(1, buffer, bytesRead);
        if (string.find("$") != std::string::npos) {

            if (commandString.length() > 0) {
                ssh_channel_write(channel, commandString.c_str(), commandString.length());
                ssh_channel_write(channel, "\n", 1);
            } else {
                break;
            }
            commandString.clear();
            string.clear();
        }
    }
}

// Distroy channel 
```

所以我的问题是，有没有一种更简单的方法可以通过 SSH 发送**自定义**命令，而不必“*假发送*”命令？

谢谢

最大限度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T18:02:40.800

自定义命令通常转储到 stderr 缓冲区。

因此，如果您使用自定义命令，请尝试使用通道读取，如下所示：

```
rc = ssh_channel_read(channel, buffer, sizeof(buffer), 1); 
```

注意最后一个函数属性的 0 -> 1 变化。此属性告诉读取从通道上的 stderr 读取，其中一些信息可能被转储。

试试看。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-12T14:59:26.497

rc = ssh_channel_request_exec（通道，“ls -l”）；

成功返回码告诉您命令已成功发送到服务器，但不表示已成功执行。您需要等待并检查退出代码或等待输出。

你读过：

[http://api.libssh.org/stable/libssh_tutor_command.html](http://api.libssh.org/stable/libssh_tutor_command.html)

并查看源代码中的examples/exec.c？

# c# - 如何在 EPiServer 7 中实现 dijit

> ID：13345233
> 
> 赞同：2
> 
> 时间：2012-11-12T14:11:24.613
> 
> 标签：c#, asp.net-mvc, dojo, episerver

我一直在尝试在 EPiServer 7 中使用 Dojos Dijit 实现小部件。我知道 dojo/dijit 是如何工作的，但是如何在 EPiServer CMS 7 中实现它？我的项目是一个 MVC 项目。我试过查看本指南（[http://world.episerver.com/Blogs/Linus-Ekstrom/Dates/2012/10/Creating-a-Dojo-based-component/](http://world.episerver.com/Blogs/Linus-Ekstrom/Dates/2012/10/Creating-a-Dojo-based-component/)），但我找不到他在他的 C# 类中使用的命名空间。我试图找到其他教程，但运气不佳。

有谁知道如何做到这一点或可以将我链接到教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:59:53.620

我在 EPiServers 论坛上发布了同样的问题并想通了。

错误是 WidgetType 属性中的数据。

```
[Component(
    PlugInAreas = "/episerver/cms/assets",
    Categories = "cms",
    WidgetType = "mycomponents.testModule", //was wrong, I had to define "mycomponents".
    Title = "test component",
    Description = "A componenet")]
public class testModuleComponent
{
} 
```

我必须定义一个 dojo 可以识别的名称空间。我在 module.config 中做到了这一点。这是我的模块配置：

```
<?xml version="1.0" encoding="utf-8"?>
<module>
  <dojoModules>
    <add name="mycomponents" path="~/ClientResources/Scripts" />
  </dojoModules>
</module> 
```

Scripts 是包含 dojo 脚本的文件夹。我将 ~/ClientResources/Scripts 定义为名为 mycomponents 的命名空间的根。

EPiServer 会自动为您包含 dojo，因此您不必自己动手。

请参阅此线程： [http](http://world.episerver.com/Modules/Forum/Pages/thread.aspx?id=63255&pageIndex=1#reply) ://world.episerver.com/Modules/Forum/Pages/thread.aspx?id=63255&pageIndex=1#reply 。

# python - Python usbmount 在写入之前检查设备

> ID：13345239
> 
> 赞同：1
> 
> 时间：2012-11-12T14:11:32.547
> 
> 标签：python, usb, debian

我正在使用带有usbmount的debian。我想检查 USB 记忆棒是否可以写入。

目前我检查 USB 驱动器上是否存在特定的目录。如果这是真的，我可以写我的其余文件 -`os.path.isdir('/media/usb0/Test_Folder')`

如果 Test_Folder 不存在，我想创建它。但是`/media/usb0/`，即使没有 USB 设备也存在，所以我不能只是 `os.mkdir('/media/usb0/Test_Folder')`因为它在本地制作文件。

在创建文件之前，我需要检查是否有可`/media/usb0/`用于写入的 USB 驱动器。有没有一种快速的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:18:18.200

`cat /etc/mtab | awk '{ print $2 }'` 会给你一个挂载点列表。您也可以自己阅读 /etc/mtab 并检查 /media/usb0 下是否安装了任何东西（文件格式：空格分隔，很可能是单个空格）。第二列是挂载目标，第一列是源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-23T14:55:06.500

感谢您的回答，我用它制作了这个脚本来将 beagle bone black 图像备份到 usb-drive ，但只有在可用时：

```
#!/bin/bash
clear
if cat /etc/mtab | awk '{ print $2 }' | grep usb
then
 echo "usb attached"
 echo "backing up to usb"
 dd if=/dev/mmcblk0 | pv -s 4G -peta | gzip -1 > /media/usb0/bb_backup.img.gz
else
 echo "no usb drive inserted"
fi 
```

# r - 将 ggplot2 中来自不同 data.frames 的数据与意外结果相结合

> ID：13345242
> 
> 赞同：0
> 
> 时间：2012-11-12T14:12:10.787
> 
> 标签：r, ggplot2

假设我们有以下 data.frames：

```
dt1 <- data.frame(x=1:10,y=rnorm(10),g="a",c=1)
dt2 <- data.frame(x=1:10,y=rnorm(10),g="b",c=2)
dt <- rbind(dt1,dt2)

bb <- data.frame(x=1:4,y=rep(-5,4)) 
```

以下作品

```
qplot(x=x,y=y,data=dt,group=g,colour=c)+geom_line(aes(x=bb$x,y=bb$y),colour="black") 
```

使用来自 data.frame 的数据产生额外的黑线`bb`。但随着

```
bb <- data.frame(x=1:6,y=rep(-5,6)) 
```

相同的绘图代码失败，抱怨行数不同。我可以合并 data.frames，即`bb`用 NA 扩展，但我认为上面的代码是有效的 ggplot2 代码，尽管不完全符合它的精神。所以问题是为什么它会失败？（答案可能与 4 除以 20 的事实有关，而 6 则不然，但需要更多上下文）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:34:44.653

该代码也不适用于您对 bb 的第一个定义（ggplot2_0.9.2.1）：

```
Error: Aesthetics must either be length one, or the same length as the dataProblems:bb$x, bb$y 
```

这有效：

```
p1 <- ggplot(data=dt,aes(x=x,y=y,group=g,colour=factor(c)))+geom_line()
p1 + geom_line(data=bb,aes(group=0,colour=factor(0))) +
      scale_colour_manual(values = c("black","blue","red")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T23:44:58.440

您可以指定不同的数据集在不同的层中使用：

```
qplot(x=x,y=y,data=dt,group=g,colour=c) + 
  geom_line(aes(x=x, y=y, group=NULL, colour=NULL), data=bb, colour="black") 
```

在这里，`geom_line`使用来自`bb`而不是的数据`dt`。`qplot`这里没有使用和规范的混合，而是采用`geom`纯`ggplot`符号：

```
ggplot(data = dt, aes(x = x, y = y)) +
  geom_point(aes(group = g, colour = c)) +
  geom_line(data=bb, colour="black") 
```

# ruby-on-rails - 真的需要验证外键吗？

> ID：13345250
> 
> 赞同：4
> 
> 时间：2012-11-12T14:12:45.803
> 
> 标签：ruby-on-rails, ruby, validation, activerecord, associations

我正在使用 Ruby on Rails v3.2.2 并且在发布我[之前的问题](https://stackoverflow.com/questions/13344059/trouble-with-foreign-key-validations-when-using-accepts-nested-attributes-for)之后，我想知道并了解是否（或不）*显式*验证与相关的外键`ActiveRecord::Associations`是否需要。例如：

```
class CategoryAssociation < ActiveRecord::Base
  belongs_to :article, :foreign_key => 'article_id'
  belongs_to :category, :foreign_key => 'category_id'

  validates :article_id, :presence => true, :numericality => { :only_integer => true }
  validates :category_id, :presence => true, :numericality => { :only_integer => true }
end 
```

*真的*需要上述`validates`方法吗？为什么？

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:44:31.663

我不会像你那样做，但我会做：

```
validates_presence_of :article, :category 
```

我不确定它是否绝对必要，但这会阻止您仅保存部分关联。在正常的 Rails 使用中很难创建部分关联，但这样就不会发生。

此外，您不需要`foreign_key`这些关联中的任何一个，只需

```
belongs_to :article, :category 
```*

# exception - 骆驼：onException 与 interceptSendToEndpoint

> ID：13345251
> 
> 赞同：1
> 
> 时间：2012-11-12T14:12:47.297
> 
> 标签：exception, exception-handling, error-handling, apache-camel, intercept

我在 JPA 中使用骆驼 2.10。在我的上下文中，我有 2 条路线。路由 1 从 JPA 端点（db 表）消费，进行一些处理（在 bean 中），然后将消息转发到路由 2。如果在处理过程中出现问题，bean 返回 NULL。

我想在路由 2 中做的第一件事是检查正文（从路由 1 转发）是否不为 NULL。因此，我看到了 2 种可能性：1）在路线 2 中使用 validate

```
<route id="route2">
...
<validate>
  <simple>${body} != null</simple>
</validate> 
```

2）使用interceptSendToEndpoint来避免NULL消息被发送到路由2：

```
<interceptSendToEndpoint uri="toRoute2" skipSendToOriginalEndpoint="true">
  <when><simple>${body} == null</simple></when>
  <transform>
    <constant>Error Message</constant>
  </transform>
  <to uri="direct:logError"/>
</interceptSendToEndpoint> 
```

你认为更好的方法是什么？

谢谢你的建议！

BR马蒂亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:03:40.103

好吧，这是接口的问题。

如果 NULL 有效负载被认为是错误，我会改为抛出异常。通常通过修改处理 bean 而`throw new RuntimeException("some error msg");`不是 `return null;`. 如果不可能，您总是可以将 bean 包装在另一个抛出的 bean 中，而不是返回 null - 或者基本上做您在 1 中所做的事情。如果您想做一些错误记录等，异常也会挂接到正常的错误处理程序中。

使用拦截可能非常强大，但也会使路线不那么明显 - 当您在几年后重新访问代码时。对于这样一个简单的场景来说，这有点矫枉过正。

# css - 在流畅的响应式设计中折叠内容

> ID：13345253
> 
> 赞同：2
> 
> 时间：2012-11-12T14:12:47.950
> 
> 标签：css, html, responsive-design, fluid-layout

我有一个响应式设计，我对它比较陌生，在主要内容区域有一系列流畅的图像。在 800 像素以下，此内容区域有一个大图像，跨越其整个宽度，然后是 2 个图像的列：

```
body.our_work #work ul {
    list-style: none;
    margin: 0%;
    padding: 0%; }

    body.our_work #work ul li {
        float: left;
        margin: 0% 1.075268817204% 1.075268817204% 0%; /* 10/930 */
        position: relative; }

        body.our_work #work ul li.small {
            width: 49.462365591398%; /* 460/930 */ }

            body.our_work #work > ul > li:nth-child(odd) {
                margin-right: 0%; } 
```

在 800 像素及以上，内容区域变为第一行一个大图像和一个小图像，然后是 3 个图像的行：

```
@media screen and (min-width: 800px) { 

    /* Convert to 3 Columns */
    body.our_work #work ul li { 
        margin: 0% 1.075268817204% 1.075268817204% 0%; /* 10/930 */ }

        body.our_work #work > ul > li:nth-child(odd) {
            margin-right: 1.075268817204%; }

        body.our_work #work ul li.large {
            width: 66.129032258065%; /* 615/930 */ }

        body.our_work #work ul li.small {
            width: 32.616487455197%; /* 303.3333333333333/930 */ }

        body.our_work #work ul li.large + li.small {
            margin-right: 0% !important;
            width: 32.795698924731%; /* 305/930 */ }

        body.our_work #work > ul > li:nth-child(5) {
            margin-right: 0% !important; }
} 
```

出于某种原因，该内容区域大约有 20-30% 的时间会“折叠”，因此它和包含的图像只是该列全宽的一部分。但是，结构（即第一行中的 1 个大图像和 1 个小图像以及所有后续图像中的 3 个图像）是正确的。

我*认为*这与浏览器在绘制页面时不知道内容区域有多大的事实有关，因为图像是流动的。

更复杂的是，在 Chrome 或 Safari 中检查 HTML 或仅单击内容通常会导致内容区域扩展到其预期大小。所以......有点难以看到到底发生了什么。此外，调整窗口大小，有时甚至只是一点点，都会更正大小。

请注意，我在 iPhone、iPad 或 Kindle Fire 上没有遇到此问题。

任何帮助是极大的赞赏。

jsfiddle：http: [//jsfiddle.net/p8n9W/](http://jsfiddle.net/p8n9W/)

**更新 1：**
- 我似乎无法在 Firefox 中重复。
- 布局是一个固定的侧边栏，第二列是流动的。
- 当问题确实发生时，内容区域的宽度似乎最终成为标题“我们的工作”的宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:46:24.130

原来问题是 1 列固定 1 列流体布局中的流体列不能浮动。当某些内容包含在其中时，将其向左浮动会导致列崩溃。

# jquery-ui - jqgrid + jQuery UI 多选

> ID：13345256
> 
> 赞同：1
> 
> 时间：2012-11-12T14:12:53.977
> 
> 标签：jquery-ui, jqgrid

我试图在 editGridRow 中显示一个多选列表（不是内联编辑）。正如我在其他答案中所读到的，我尝试过使用：

```
dataInit: function (el) { setTimeout(function () { $(el).multiselect(); }, 50); } 
```

但我没有运气。

有什么建议么？

# ajax - 如何在dojo中解析多部分响应

> ID：13345257
> 
> 赞同：0
> 
> 时间：2012-11-12T14:13:07.187
> 
> 标签：ajax, dojo, response, multipart

我正在做dojo1.7。我想解析从 ajax 返回的多部分响应。
怎么做？有人可以建议我吗？
提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:38:04.250

我不认为 Dojo 会原生地做到这一点。在客户端处理多部分是不寻常的。您需要为 multipart-mime 创建自己的 XHR 处理程序。

多[部分格式在](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4)**Contact-Type**标题中指定的边界处拆分内容：

```
eg.
Content-Type: multipart/form-data; boundary=AaB03x 
```

您可以在 javascript 中使用简单的**string.split(<regx>)**来拆分这些部分。然后，您需要解析各个部分。每个部分都有自己的一组标头，内容将根据 Content-Type 中的格式进行编码。

如果您正在接收附件，则很可能正在使用 base64 编码；因此，您也必须解码。

*   [Dojo Base64 编码/解码](http://dojotoolkit.org/reference-guide/1.8/dojox/encoding/base64.html)

在标准 xhr 调用中使用您自己的处理程序（一旦您加载它）。

```
require(["dojo/_base/xhr", "mylib/multipart"], function(xhr){
    xhr.get({
            "url": "<URL TO MULIPART DATA>",
            "handleAs": "multipart",
            "preventCache": true,
            load: function(data){
                // Do something with the multipart data
            }
    });
}); 
```

在这里，您使用了一个名为“multipart”的用户定义处理程序，从“mylib/multipart”加载。Dojo 将允许您创建任意数量的处理程序并加载它们以解析脚本中接收到的数据。

**注意：**由于浏览器的安全性，您只能通过 XHR 加载数据，前提是数据与加载它的页面位于同一 url。（参见：[Stackoverflow 对话](https://stackoverflow.com/questions/13283905/retrieving-xml-data-from-a-rest-service-across-domains-with-dojo/13291431)）。

我在下面创建了一个示例多部分处理程序：

```
require([
    "dojo/_base/xhr",
    "dojo/_base/array",
    "dojo/_base/lang"
], function(xhr, array, lang){
    lang.mixin(xhr.contentHandlers, {
        "multipart": function(response){
            var parser = {
                parse: function(response){
                    var parts = new Array();
                    var boundary = parser._getBoundary(response);
                    if(boundary){
                        parts =  parser._getParts(
                            response.responseText,
                            boundary
                        );
                    }
                    return parts;  // return empty array if parsing could not be done
                },

                _getBoundary: function(response){
                    var contentType = response.getResponseHeader("Content-Type");
                    if(/boundary\=/.test(contentType)){
                        var parse = /boundary\=(.*?)(;|$)/.exec(contentType);
                        return parse[1];
                    }
                    return false;  // Return false if no boundary found
                },

                _getParts: function(text, boundary){
                    var parsed = new Array();
                    var splitter =new RegExp(boundary+"[\r\n]+","g");
                    var parts = text.split(splitter);  // Split at the boundary

                    array.forEach(parts, function(part){
                        var headBody = part.split("\n\n");
                        if(headBody.length > 0){
                            var head = lang.trim(headBody[0]);
                            var body = headBody[1];
                            if(head != ""){  // Don't parse if no header, probably an error
                                parsed.push({
                                    "head": parser._parseHeaders(head),
                                    "body":body
                                });
                            }
                        }
                    }, this);

                    return parsed;
                },

                _parseHeaders: function(headerText){
                    // Headers should be in format: Header: Value
                    var header = {};
                    var lines = headerText.split(/[\r\n]/);
                    array.forEach(lines, function(line){
                        var parts = line.split(":");
                        if(parts.length > 0){
                            header[lang.trim(parts[0])] = lang.trim(parts[1]);
                        }
                    }, this);
                    return header;
                }
            };

            return parser.parse(response);
        }
    });
}); 
```

这会将 Xhr 返回的文本解析为内容对象数组。每个内容对象都应该包含一个包含原始文本正文的*body*属性和一个包含其标题对象的*head属性。*

如果原始内容不是纯文本，您将需要编写额外的代码来处理原始内容。您可能还想在它上面投入大量测试数据，以确保它在所有情况下都能正常工作。

# asp.net - 如何使用 asp.net 网站托管 mysql 数据库

> ID：13345259
> 
> 赞同：1
> 
> 时间：2012-11-12T14:13:16.200
> 
> 标签：asp.net, mysql

我开发了一个显示来自 mysql 数据库的图像的 asp.net 网站。我在这里使用了 mysql 连接器版本 5.* 来连接到 mysql 数据库服务器。我从 mysql 的命令行创建了表，但是当我在 Windows 上托管这个应用程序时服务器，我可以从 plesk 面板在 windows 服务器上创建一个数据库。但是我怎样才能在那里创建表？...你能给我一些指导吗？我可以使用 tablebuilder 从 C# 创建表，但它支持最新版本的 mysql 连接器，但我不确定托管服务器是否支持它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:20:37.447

看看这个页面，它是阿拉伯语，但它有足够的图像来处理它：http://libyanspider.com/arabic/m/knowledgebase/9​​5/-----PhpMyAdmin-or-Aspnet-Enterprise- [Manager .html](http://libyanspider.com/arabic/m/knowledgebase/95/-----PhpMyAdmin-or-Aspnet-Enterprise-Manager.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:31:02.137

[http://www.freehostingtutorials.com/windows-based-hosting-accounts-knowledgebase/how-to-create-table-in-my-sql-databse-in-plesk-control-panel/](http://www.freehostingtutorials.com/windows-based-hosting-accounts-knowledgebase/how-to-create-table-in-my-sql-databse-in-plesk-control-panel/)

您可以从 Plesk 控制面板中创建表格，只需按照上面的指南了解如何操作。

我以前做过，而且很无痛。

# python - 从列表中替换正则表达式

> ID：13345261
> 
> 赞同：3
> 
> 时间：2012-11-12T14:13:17.767
> 
> 标签：python, regex, file-io, replace, latex

我有一个乳胶表，用于每周的课程计划，我想从教学大纲中提取数据，并将其存储为列表。（它们将从 csv 中读取）所以教学大纲是 50 个章节的列表，乳胶有 2 个空间四年级每周一节课，六年级每周三节课，我想咬第一节课，坚持第一节课，然后下一节课。. . 现在我的代码只会在星期一、星期三和星期五给我第 1 章，而不是 ch1、ch2、ch3

```
math6 = ['chapter1', 'chapter2', 'chapter3', 'chapter1-3test']
math4= ['chapter1.1', 'chapter1.2-3', 'chapter2']

    \begin{tabular}{|p{0.7in}|p{0.8in}|p{2.2in}|p{.9in}|p{2.6in}|p{1.6in}|}
    6${}^{th}$ Math  \newline M\newline  & _math6_& 
    6${}^{th}$ Math  \newline W \newline  & _math6_ & 
    6${}^{th}$ Math  \newline  F \newline  & _math6_ &  
    4${}^{th}$ Math  \newline M\newline  &  & _math4_  &
    4${}^{th}$ Math \newline W\newline  &  & _math4_  & 
    \end{tabular} 
```

这是蟒蛇

```
import re
template = file('file1.txt', 'r').read()

lost= ["geography", "physics", "hairdressing", "torah"]
n =0
while n<len(lost):
    temp=lost[n]
    page= re.sub(r'_thing_', temp, template)
    print page
    n+=1
#page= re.sub(r'_thing_', "martha", template)
#file('result.txt', 'w').write(page) 
```

这给了我

```
#contents of file1
# Really long Latex
#File that has
# geography, geography, mary, tom, susan, geography
#that I want to replace
#read file1 in as a string, replace, save again

#contents of file1
# Really long Latex
#File that has
# physics, physics, mary, tom, susan, physics
#that I want to replace
#read file1 in as a string, replace, save again

#contents of file1
# Really long Latex
#File that has
# hairdressing, hairdressing, mary, tom, susan, hairdressing
#that I want to replace
#read file1 in as a string, replace, save again

#contents of file1
# Really long Latex
#File that has
# torah, torah, mary, tom, susan, torah
#that I want to replace
#read file1 in as a string, replace, save again 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:25:36.903

使用问题

```
re.sub(r'_thing_', temp, template) 
```

是*每次*出现`_thing_`都被替换为相同的值，`temp`。

我们在这里想要的是一个`temp`可以随着每场比赛而改变的值。

[`re.sub`通过](http://docs.python.org/2/library/re.html#re.sub)使用回调函数作为第二个参数而不是像`temp`.

回调只是一个函数，它接受一个参数，即匹配对象，并返回我们想要匹配的字符串。

```
def replacer(match):
    return ... 
```

现在用什么代替省略号？我们可以在`iter`这里使用：

```
In [27]: math6 = ['chapter1', 'chapter2', 'chapter3', 'chapter1-3test']

In [28]: math6 = iter(math6)

In [29]: next(math6)
Out[29]: 'chapter1'

In [30]: next(math6)
Out[30]: 'chapter2' 
```

所以我们真正想要的是一个看起来像这样的回调：

```
def replacer(match):
    return next(data) 
```

但是我们有不止一组数据：`math6`和`math4`，例如。所以我们需要一个回调工厂：一个返回给定回调的函数`data`：

```
def replace_with(data):
    def replacer(match):
        return next(data)
    return replacer 
```

* * *

把这一切放在一起，

```
import re

math6 = iter(['chapter1', 'chapter2', 'chapter3', 'chapter1-3test'])
math4 = iter(['chapter1.1', 'chapter1.2-3', 'chapter2'])

text = r'''
    \begin{tabular}{|p{0.7in}|p{0.8in}|p{2.2in}|p{.9in}|p{2.6in}|p{1.6in}|}
    6${}^{th}$ Math  \newline M\newline  & _math6_& 
    6${}^{th}$ Math  \newline W \newline  & _math6_ & 
    6${}^{th}$ Math  \newline  F \newline  & _math6_ &  
    4${}^{th}$ Math  \newline M\newline  &  & _math4_  &
    4${}^{th}$ Math \newline W\newline  &  & _math4_  & 
    \end{tabular}
'''

def replace_with(data):
    def replacer(match):
        return next(data)
    return replacer

for pat, data in [(r'_math6_', math6), (r'_math4_', math4)]:
    text = re.sub(pat, replace_with(data), text)

print(text) 
```

产量

```
\begin{tabular}{|p{0.7in}|p{0.8in}|p{2.2in}|p{.9in}|p{2.6in}|p{1.6in}|}
6${}^{th}$ Math  \newline M\newline  & chapter1& 
6${}^{th}$ Math  \newline W \newline  & chapter2 & 
6${}^{th}$ Math  \newline  F \newline  & chapter3 &  
4${}^{th}$ Math  \newline M\newline  &  & chapter1.1  &
4${}^{th}$ Math \newline W\newline  &  & chapter1.2-3  & 
\end{tabular} 
```

# c++ - 合并两个排序的链接列表

> ID：13345262
> 
> 赞同：0
> 
> 时间：2012-11-12T14:13:21.210
> 
> 标签：c++, pointers, merge, linked-list

我想通过指针操作合并两个排序的链接列表，但停留在这一点上。无法找出错误。请帮帮我。我认为问题出在while循环中。我想让它节省空间并且不想制作另一个列表。

```
#include<iostream>
#include<conio.h>
using namespace std;
struct s
{
   int info;
   s *next;
};

int main()
{
    int i;
    char choice = 'y';
    s *ptr1, *ptr2, *start1, *start2, *reversedHead, *temp;
    ptr1= new s;
    start1=ptr1;
    cout<<"SIZE OF A NODE IS "<<sizeof(s)<<" BYTES"<<endl<<endl;
    while(choice=='y')
    {
                  cout<<"Enter info for node: ";
                  cin>>i;
                  ptr1->info = i;
                  cout<<"Do you wish to enter more nodes.? 'y'/'n'"<<endl;
                  cin>>choice;

                  if(choice=='y')
                  {
                                 ptr1->next = new s;
                                 ptr1 = ptr1->next;
                  }
                  else
                  {
                      ptr1->next = NULL;
                  }
    }
    choice = 'y';
    ptr2= new s;
    start2=ptr2;
    cout<<"SIZE OF A NODE IS "<<sizeof(s)<<" BYTES"<<endl<<endl;
    while(choice=='y')
    {
                  cout<<"Enter info for node: ";
                  cin>>i;
                  ptr2->info = i;
                  cout<<"Do you wish to enter more nodes.? 'y'/'n'"<<endl;
                  cin>>choice;

                  if(choice=='y')
                  {
                                 ptr2->next = new s;
                                 ptr2 = ptr2->next;
                  }
                  else
                  {
                      ptr2->next = NULL;
                  }
    }

    ptr1=start1;
    ptr2=start2;
    while(ptr1->next!=NULL || ptr2->next!=NULL)
    {
                         if(ptr1->info < ptr2->info)
                         {
                                       if(ptr1->next->info < ptr2->info)
                                                           ptr1=ptr1->next;
                                       else
                                       {
                                           ptr2=temp;
                                           ptr2=ptr2->next;
                                           temp->next=ptr1->next;
                                           ptr1->next=temp;
                                       }
                         }
                         else
                         {
                             if(ptr2->next->info < ptr1->info)
                                                 ptr2=ptr2->next;
                             else
                             {
                                 ptr1=temp;
                                 ptr1=ptr1->next;
                                 temp->next=ptr2->next;
                                 ptr2->next=temp;
                             }
                         }
    }
    if(ptr1->next==NULL)
                    ptr1->next=ptr2;
    else
        ptr2->next=ptr1;
    cout<<"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX";                    
    if(start1->info>start2->info)
    {
                             ptr2=start2;
                             while(ptr2!=NULL){
                                              cout<<ptr2->info<<"\t";
                                              ptr2=ptr2->next;}
    } 
    else
    {
                             ptr1=start1;
                             while(ptr1!=NULL){
                                              cout<<ptr1->info<<"\t";
                                              ptr1=ptr1->next;}
    }          

    getch();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:18:03.210

没有全部检查，但让我们从这里开始：

```
 while(ptr1->next!=NULL || ptr2->next!=NULL) 
```

它应该是`&&`而不是`||`因为您不想在其中一个列表中的下一个条目为空时继续比较（您确实在 while 循环中的一个 ifs 中使用了它的内容）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T14:31:29.763

您的 while 循环条件不太正确。

```
while(ptr1->next!=NULL || ptr2->next!=NULL) 
```

很好，但*只有当两个列表的长度相同时*！当列表的长度不同时，要么 要么`ptr1->next`将`ptr2->next`，`NULL`你会得到一个分段错误。更改为 to`&&`不是正确的做法，因为您会丢失其中一个列表的结尾！

用这个：

```
while((ptr1 != NULL && ptr2 != NULL) && (ptr1->next!=NULL || ptr2->next!=NULL)) 
```

现在，在你的循环中，你有这样的测试：

```
if(ptr1->next->info < ptr2->info) 
```

将其替换为

```
if(ptr1 != NULL && ptr1->next->info < ptr2->info) 
```

这样不等长的列表就不会提前终止，也不会在内部出现段错误。

接下来，在您的插入操作中，您执行以下操作

```
ptr1=temp;
ptr1=ptr1->next 
```

和

```
ptr2=temp;
ptr2=ptr2->next; 
```

这很糟糕，因为`temp`它是未定义的，因为您从未向其写入任何有效数据！这里的错误是你的作业是错误的。你应该分别做`temp=ptr1`和`temp=ptr2`。

最后，修复等长输入列表的清理操作需要考虑这样一个事实，即不等长的输入列表可能导致`ptr1`以下`ptr2`情况`NULL`：

```
if(ptr1 != NULL && ptr1->next==NULL)
    ptr1->next=ptr2;
else if (ptr2 != NULL)
    ptr2->next=ptr1; 
```

一切似乎都很好。我已经在`1 3 5`, `2 4 6`and `1 3`, `2`and `1 4`, `2 3`and上测试了生成的代码`1 3`，`2 3`所有这些都可以按照我的预期工作。

# web-services - Heroku：在特定时间内运行一个函数

> ID：13345263
> 
> 赞同：0
> 
> 时间：2012-11-12T14:13:24.067
> 
> 标签：web-services, node.js, heroku

我正在为使用**Heroku**作为我的部署解决方案并使用**Node.js**作为我的平台的移动应用程序编写一个后端。

我只是尝试做的是运行我的函数**clearTableX()**以在特定时间执行（比如说下午 12 点）。功能的作用是删除整个表中的元素。

我怎么能做到这一点？真正重要的一件事是它必须运行**一次并且**只运行一次，这样它就不会一遍又一遍地删除同一个表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:18:10.187

[Heroku Scheduler](https://devcenter.heroku.com/articles/scheduler)插件听起来可以满足您的需求。

# c# - ASP.NET 数据库总是损坏

> ID：13345265
> 
> 赞同：4
> 
> 时间：2012-11-12T14:13:32.600
> 
> 标签：c#, asp.net, database, sql-server-2008

我对 ASP.net 相当陌生（制作基本应用程序大约 2 周），我对我的数据库的一个大问题感到震惊。

我正在构建一个带有登录系统的简单电子邮件应用程序。几天前一切正常。

但不知何故，每次我尝试使用我的程序访问数据库文件时，都会出现以下错误：

*“/”应用程序中的服务器错误。数据库文件可能已损坏。运行修复实用程序以检查数据库文件。[ 数据库名称 = C:\Users\ArvinAsus\Documents\Visual Studio 2010\Projects\mailer\App_Data\Database.mdf ] 描述：在执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。异常详细信息：System.Data.SqlServerCe.SqlCeException：数据库文件可能已损坏。运行修复实用程序以检查数据库文件。[ 数据库名称 = C:\Users\ArvinAsus\Documents\Visual Studio 2010\Projects\mailer\App_Data\Database.mdf ]*

每个数据库都始终显示此错误。我是使用过去工作的数据库还是只是创建一个新的空数据库。

我觉得这个问题与数据库损坏无关，但与我遇到的另一个问题有关：

当我在服务器资源管理器中连接本地数据库时，我可以添加表 - 用数据填充表，测试连接总是成功。当我尝试通过我的程序连接到数据库时：

*异常详细信息：System.Data.SqlServerCe.SqlCeException：存在文件共享冲突。不同的进程可能正在使用该文件。[ C:\Users\ArvinAsus\Documents\Visual Studio 2010\Projects\mailer\App_Data\Database.mdf ]*

然后我在服务器资源管理器中关闭连接，错误消失，留下损坏错误。

我完全坚持这一点。有人有想法让我重新开始吗？

提前致谢。

PS：我使用 Visual Studio 2010 Professional

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:26:45.447

.MDF 文件不是 SQL Compact Edition 数据库文件，而是 SQL Server 数据文件。您应该使用 SQL Server（Express、Professional 或任何其他版本）访问您的数据库并使用 SQL Native Client、OleDB 或任何其他数据连接器而不是 SQLServerCE 连接到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T14:32:09.683

您的异常告诉您发生了什么：`There is a file sharing violation. A different process might be using the file.`许多进程即使在使用完文件后也不会放手。您应该使用实际的 SQL 服务器实例（即使它是 express 的）来管理与数据库的连接。

我赞成@Y。Ecarri 的回答是因为我认为他有正确的解决方案，但您遇到文件共享冲突的最可能原因是开发环境本身。如果您使用 IDE 调试器附带的内置 Cassini 服务器（很可能），它将在调试会话之间保持开发 Web 服务器处于活动状态。由于第一个会话使您的 .mdf 实例在内存中保持活动并被占用，因此后续调试会话将无法访问它，即使它应该可用。为了发布该文件，您需要停止调试，然后右键单击系统托盘中代表开发 Web 服务器实例的任何图标，并告诉它们`Stop`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T17:57:21.817

我的问题是我的 web.config 文件被修改了。数据库的物理位置已更改，并引发此错误。数据库仍然存在，但它没有指向正确的位置。

为确保这不是问题，请仔细检查您的 web.config 文件。我希望这可以帮助别人。

# ruby-on-rails - 如何显示已批准或公开的订阅？

> ID：13345266
> 
> 赞同：0
> 
> 时间：2012-11-12T14:13:36.923
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有以下模型和它们之间的关系：

```
App
  has_many :subscriptions
  has_many :users, through: :subscriptions
User
  belongs_to :app
  has_many :subscriptions, :dependent => :destroy
Subscription
  belongs_to :user
  belongs_to :app

# Table name: subscriptions
#
#  app_id     :integer
#  id         :integer          not null, primary key
#  user_id    :integer
#  approved   :boolean
#
# Table name: apps
#
#  id         :integer          not null, primary key
#  name       :string(255)
#  user_id    :integer
#  private    :boolean
#
# Table name: users
#
#  app_id     :integer
#  id         :integer          not null, primary key 
```

我想仅显示已订阅的已批准订阅或公共应用程序（其中`private`为 false）。

```
 # user.rb < this is only for approved but how to add here also public subscribed apps
  def approved_or_public_subscriptions
    subscriptions.where(approved: true)
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T08:15:52.173

您可以使用范围：

```
scope :approved_or_public, joins(:app).where('subscriptions.approved = true OR apps.private = false') 
```

# .net - 提取window的所有子窗口

> ID：13345267
> 
> 赞同：5
> 
> 时间：2012-11-12T14:13:38.823
> 
> 标签：.net, vb.net, winforms, pinvoke

如何提取窗口的所有子窗口？

示例代码：

```
Dim hWnd As IntPtr = ProcessName.MainWindowHandle
For Each hWndChild As IntPtr In hWnd
  MsgBox(hWndChild.classname.tostring & ", Caption: " & hWndChild.caption.tostring())
Next 
```

（像间谍++）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T22:53:43.233

正如其他人所建议的那样，您应该使用`EnumWindows`and`EnumChildWindows`函数。

这是我刚刚从我用 VB6（很久以前）编写的另一个程序的代码片段中移植的小演示程序的链接： [Windows Scanner](http://software.xfx.net/stackoverflow/WindowsScanner.zip)

希望能帮助到你...

* * *

**编辑：**我刚刚意识到这并不是一个答案，而没有实际解释这些功能是如何工作的。所以，这里是：

该`EnumWindows`函数将一个指向回调函数的指针作为其第一个参数。第二个参数是您可以传递给回调函数的值。您可以将其视为用户定义的参数。

每次`EnumWindows`“找到”新窗口时，都会调用回调函数通知新窗口。此回调函数将窗口的处理程序和用户在`EnumWindows`第一次调用时指定的可选参数作为参数。

所以，基本上，这就是你所说的`EnumWindows`：

```
EnumWindows(New EnumWindowsProc(AddressOf EnumProc), 0) 
```

`EnumWindowsProc`用于创建对函数的引用的委托在哪里`EnumProc`，这将是我们的回调。

此类回调的签名如下：

```
Private Function EnumProc(hWnd As IntPtr, lParam As IntPtr) As Boolean 
```

正是在此函数内部，您可以填充已发现窗口的内部数组。

该函数的情况几乎相同，`EnumChildWindows`唯一的区别是它的第一个参数必须是父窗口的处理程序。其他一切都以完全相同的方式处理。

如果您查看`WindowsScanner`程序的源代码，您会发现我什至对 和 使用了相同的委托和相同的回调`EnumWindows`函数`EnumChildWindows`。那么我怎么知道我们是在枚举顶级窗口还是子窗口呢？很简单，我只是将最后一个参数设置`EnumChildWindows`为“1”。然后，这个参数被传递给回调函数 ( `EnumProc`)，它允许它根据该参数的值采取不同的操作。

# winforms - DataGridView：覆盖滚动条样式

> ID：13345268
> 
> 赞同：1
> 
> 时间：2012-11-12T14:13:48.367
> 
> 标签：winforms, user-interface, scrollbars

我正在使用`WinForms`和`DataGridView`.

有没有办法为`Scrollbars`自定义颜色/外观设置样式。

我一直在寻找扁平的外观。

# jquery - 单击以显示然后单击另一个时将其隐藏

> ID：13345273
> 
> 赞同：1
> 
> 时间：2012-11-12T14:14:19.697
> 
> 标签：jquery, triggers, click

当用户点击我的`<input>`所以会显示一些`<div>`

然后用户点击了另一个元素 agian like`<body>`或另一个 div 所以隐藏它

```
$("input").click(function(){
    $("div").fadeIn();
}).not(this).click(function(e){
    $("div").fadeOut();
}); 
```

游乐场：http: [//jsfiddle.net/Zf34Q/](http://jsfiddle.net/Zf34Q/)

我的代码同时执行`fadeIn()`& `fadeOut()`:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T14:18:24.600

查询

```
$("input").focus(function(){
    $("div").fadeIn();
}).blur(function(e){
    $("div").fadeOut();
});​ 
```

小提琴 - [http://jsfiddle.net/Zf34Q/1/](http://jsfiddle.net/Zf34Q/1/)

## 编辑

否决选民，对不起，我没有正确阅读问题，现在更新我的答案

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T14:15:53.420

你可以这样做 ：

```
$("input").click(function(){
    $("div").fadeIn();
    return false;
});
$(document).click(function(){
    $("div").fadeOut();
}); 
```

[示范](http://jsfiddle.net/dystroy/rsSNw/)

第一个回调返回 false 以避免事件传播到文档（这将启动淡出）。从[文档中](http://api.jquery.com/bind/)：

> 从处理程序返回 false 等效于在事件对象上调用 .preventDefault() 和 .stopPropagation() 。

**编辑：**在 OP 的精确情况下，由于元素是输入，最好使用 atif089 的解决方案和[模糊](http://api.jquery.com/blur/)功能。我希望我的回答至少有助于阐明如何处理事件传播。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T14:28:58.653

只是为了补充@atif089 的答案，并解释原始代码有什么问题：

`this`创建选择器时的不是，`input`而是其他一些对象（可能是`window`）。如果您想让您的`click`处理程序在任何其他元素上触发，则必须将其绑定到页面上的每个其他元素，或者在某个公共父元素上使用[委托事件。](http://api.jquery.com/on#direct-and-delegated-events)

@atif089 的答案有一个更务实的解决方案，通过利用焦点的变化。

* * *

一个关于如何使用它的例子：http `":not"`: [//jsfiddle.net/Zf34Q/2/](http://jsfiddle.net/Zf34Q/2/)

# java - list_item 和 single_list_item 包含不同的 XML 标签 (RSS)

> ID：13345279
> 
> 赞同：0
> 
> 时间：2012-11-12T14:14:46.567
> 
> 标签：java, android, listview, rss, xml-parsing

我正在为我的应用程序使用带有不同标签的 RSS，例如，我想在我的列表中显示`<title>`，`<pubDate>`但是当我单击特定项目时，它假设打开包含`<title>`和的新布局`<description>`。

我将不胜感激任何形式的帮助、链接、提示或其他任何东西:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:52:28.597

ListViews 更狡猾。您使用的 ListAdapter 必须指定一个布局，该布局描述列表中的单个条目、源数据项以及单个条目布局中的每个项目的目标视图。源项目和目标视图之间必须存在一一对应的关系。但是，*包含*源数据的数组/光标/任何内容都可以包含更多数据。例如，对于 SimpleCursorAdapter，Cursor 本身可以包含 15 个项，但您只需显示 2 个。对于 SimpleCursorAdapter，源项指定为字符串数组中的列名，目标视图指定为数组中的资源 ID诠释。

显示单个列表条目详细信息的最友好的方法是使用 onClickListener 来在单击时打开一个新的 Activity/Fragment。侦听器被传递给被点击的条目的索引。由此，您可以返回支持该条目的光标行，然后将必要的数据传递给新的 Activity/Fragment。

我使用 Cursor 是因为这是最常见的用例，但同样的模式适用于数组、列表等。

# matlab - 改变表示：上三角矩阵和紧凑向量（Octave / Matlab）

> ID：13345280
> 
> 赞同：0
> 
> 时间：2012-11-12T14:14:51.613
> 
> 标签：matlab, vector, matrix, octave, triangular

给定一个矩阵**A**，它的对角线和下三角部分都有零：

```
A = triu(rand(5,5), 1) % example

A =
0.00000   0.47474   0.55853   0.30159   0.97474
0.00000   0.00000   0.03315   0.74577   0.20878
0.00000   0.00000   0.00000   0.54966   0.76818
0.00000   0.00000   0.00000   0.00000   0.82598
0.00000   0.00000   0.00000   0.00000   0.00000 
```

我想将**A**转换为跳过所有零元素的紧凑向量**v**：

```
v = [0.47474 0.55853 0.30159 0.97474 0.03315
     0.74577 0.20878 0.54966 0.76818 0.82598] 
```

后来我想从向量转换回矩阵。

***问题：在这两种表示之间进行转换的优雅方法是什么？***

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T14:38:43.427

我会从一个上三角矩阵开始

```
B = triu(ones(5,5), 1) 
```

那么**v**可以定义为：

```
v = A(B==1) 
```

从**v**转换回**A**

```
A = B
A(B==1) = v 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:28:29.663

因为 Matlab 以列优先顺序存储数组，所以我不能在一个语句中做到这一点，现在还不行，但这里有一个两个语句的解决方案：

```
B = A';

v = B(B~=0)' 
```

@dustincarr 的回答使我的进一步工作变得多余。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-28T02:46:33.690

```
A = triu(rand(5,5), 1);
v = reshape(nonzeros(A'), [5 2])'; 
```

# objective-c - 有谁知道如何检测用户是否取消了“应用内”尝试安装另一个应用版本

> ID：13345283
> 
> 赞同：1
> 
> 时间：2012-11-12T14:15:07.430
> 
> 标签：objective-c, ios, xcode, deployment, enterprise

我正在使用企业开发计划推出一个内部 IOS 应用程序。我正处于一个阶段，我有一个 VC，它允许用户触摸一个按钮，从应用程序内部下载并安装升级。

它运作良好。但是，如果网络有点慢，则向用户抛出的 IOS 提示消息“您要安装，某某...”似乎有点晚了。因此，在用户按下“安装”按钮后，我将其禁用。但是，如果有用户在 IOS 提示时触摸“取消”，我不知道如何检测到这一点。

我在 iPhone 3、4 和 5 的多个设备上使用 Xcode 4.5 和 IOS6.0。

在不提供整个链接的情况下，下载代码如下。

```
- (void)actionSheet:(UIActionSheet *)modalView clickedButtonAtIndex:(NSInteger)buttonIndex {

if (buttonIndex == 0) {

    [self.IBOInstallActivityInd startAnimating];
    [self enableInstallButton:NO];
    self.tabBarController.tabBar.userInteractionEnabled = NO;
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:APP_INSTALL_FROM]];

    }

} // actionSheet:clickedButtonAtIndex 
```

而且，正如我所说，它很好——它有效。但是，如果用户在提示中触摸“取消”，我希望能够分辨出来。如您所见，我正在锁定用户界面。你可能会问为什么，如果一个应用程序即将关闭并接受它的升级。

好吧，根据网络速度，我想证明用户不止一次点击按钮。但是，如果用户取消，我希望能够重新启动用户界面，启用标签栏等......

我已经爬网，什么也没找到！而且，我想答案是 Apple 网站上的问题，尽管它很好。但是，它需要大量的阅读。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:22:16.237

我不知道如何捕获取消操作，但我可以告诉你我们如何处理这种情况。

我们编译的每个版本都有一个内置的特定修订版，我们还将其嵌入到服务器上的 plist 文件中。我们的应用程序比较两个版本号以确定是否有可用的更新（版本不匹配，这也允许我们回滚）。

在您的情况下，您可以做的只是让 VC 每 X 秒验证一次服务器并刷新状态。如果他们进行升级，他们将从应用程序启动，如果他们不这样做，那么刷新将使按钮再次启用。

更简单的解决方案：仅在导航到 VC 时运行此查询。因此，如果他们取消，他们将不得不退出 VC 并重新进入。

下面是我们解析 plist 文件的样子：

```
 NSString *localCopyPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
            localCopyPath = [localCopyPath stringByAppendingPathComponent:@"MDM_SERVER.plist"];
            NSFileManager *fileManager = [[NSFileManager alloc] init];

            BOOL created = [fileManager createFileAtPath:localCopyPath contents:plistData attributes:nil];                
            if (created) {
                NSDictionary *fullDict = [NSDictionary dictionaryWithContentsOfFile:localCopyPath];
                if (fullDict) {
                    NSArray *a = [fullDict objectForKey:@"items"];
                    NSDictionary *mdmDict = [a objectAtIndex:0];
                    NSDictionary *metaDict = [mdmDict objectForKey:@"metadata"];

                    // String of format "1.0.1779"
                    NSString *serverFullVersion = [metaDict objectForKey:@"bundle-version"];

                    // We will always compare on the last digit
                    NSUInteger lastPeriod = [serverFullVersion rangeOfString:@"." options:NSBackwardsSearch].location;
                    if (NSNotFound != lastPeriod && [serverFullVersion length] > lastPeriod) {
                        // update the time when we found an answer
                        mdmCheckedAt = [NSDate date];
                        NSString *serverSvnRevision = [serverFullVersion substringFromIndex:(lastPeriod + 1)];
                        // the big test - if our own svn version is different, then load the 
                        // URL to tell iOS to upgrade ourself
                        if (![kRevisionNumber isEqualToString:serverSvnRevision]) {
// Your Code HERE 
```

# python - Reportlab 的 Code128 条码作为 HTML 图像标记与 Python 中的数据 URI 方案

> ID：13345284
> 
> 赞同：8
> 
> 时间：2012-11-12T14:15:09.397
> 
> 标签：python, django, barcode, reportlab, data-url

我需要用 Python/Django 创建一个 Code128 条形码，它必须嵌入 HTML 文档中。

我不想在磁盘上创建任何临时（或缓存）文件。这就是为什么我想将它们嵌入为数据 URI 方案。

结果必须是这样的：

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA
AAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO
9TXL0Y4OHwAAAABJRU5ErkJggg==" alt="Red dot"> 
```

你能给我推荐一个简单的方法吗？

现在我使用 ReportLab 创建这样的条形码并将它们嵌入 PDF 文件中，但我不知道如何将它们导出为 Data URI Scheme。如果这是推荐的方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T20:10:19.807

这是我自己的解决方案：

```
from base64 import b64encode
from reportlab.lib import units
from reportlab.graphics import renderPM
from reportlab.graphics.barcode import createBarcodeDrawing
from reportlab.graphics.shapes import Drawing

def get_barcode(value, width, barWidth = 0.05 * units.inch, fontSize = 30, humanReadable = True):

    barcode = createBarcodeDrawing('Code128', value = value, barWidth = barWidth, fontSize = fontSize, humanReadable = humanReadable)

    drawing_width = width
    barcode_scale = drawing_width / barcode.width
    drawing_height = barcode.height * barcode_scale

    drawing = Drawing(drawing_width, drawing_height)
    drawing.scale(barcode_scale, barcode_scale)
    drawing.add(barcode, name='barcode')

    return drawing

def get_image():

    barcode = get_barcode(value = '01234567890', width = 600)
    data = b64encode(renderPM.drawToString(barcode, fmt = 'PNG'))
    print '<img src="data:image/png;base64,{0}">'.format(data) 
```

您还可以将条形码旋转 90°：

```
def get_barcode_rotated(value, width, barWidth = 0.05 * units.inch, fontSize = 30, humanReadable = True):

    barcode = createBarcodeDrawing('Code128', value = value, barWidth = barWidth, fontSize = fontSize, humanReadable = humanReadable)

    drawing_width = width
    barcode_scale = drawing_width / barcode.width
    drawing_height = barcode.height * barcode_scale

    drawing = Drawing(drawing_width, drawing_height)
    drawing.scale(barcode_scale, barcode_scale)
    drawing.add(barcode, name='barcode')

    drawing_rotated = Drawing(drawing_height, drawing_width)
    drawing_rotated.rotate(90)
    drawing_rotated.translate(0, -drawing_height)
    drawing_rotated.add(drawing, name='drawing')

    return drawing_rotated 
```

这是一个示例结果：

[http://pastehtml.com/view/ci7qei4k1.html](http://pastehtml.com/view/ci7qei4k1.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T17:23:31.453

这应该可以解决问题。我使用[Code128](https://gist.github.com/461975) python 模块来生成条形码。

**代码**

```
from Code128 import Code128
from base64 import b64encode

val = "9782212110708"
Code128().getImage(val, path="./")
data = b64encode(open(val + '.png').read())
print '<img src="data:image/png;base64,{0}">'.format(data) 
```

**输出**

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIMAAAAyAQAAAABXcFUb
AAAAjklEQVR4nGP8r2v6J/ihYotFKrs5qx9H2TwmBnQwKjIqMnRFGP+jCTzErkvS6IR80Yu5iScU
GBgYGFgYGP4b3j6t9Xn+ZG4jA6gIAxtDos26ROHFcF2M+32/XPjLwPCX8QLMnAOfXyz4xcDA8B+m
63/djHUCHxkYfkEt+///v8zHJg6GBpbi4/L///9/AADHAS8/nZ4QEQAAAABJRU5ErkJggg=="> 
```

**更新**

评论中有一个很好的建议来修改 Code128 模块，这样它就不必将图像保存到文件系统。您可以更改 Code128 以便它返回图像对象而不是将其保存到文件中。您只需要更改一行代码即可实现此目的。将第 162 行从：

```
im.save(path+value+"."+lower(extension), upper(extension)) 
```

到：

```
return im 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T15:47:43.600

您是否尝试过使用自己的图像数据表示的每个符号即时组装条形码？这是一个例子：

<img alt="105,{开始 C}" title="105,{开始 C}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ACxgALsAjaIIjKmKzk=" 30" height="60"><img alt=" 00,A:{space},B:{space}" title=" 00,A:{space},B:{space}" src="data:image /png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ACZgAK8Ah/KrWu0AAAASUVORK5CYII="width="30" height="60"><img alt="98,A:{Escape:{ A}" title=" 98,A:{Escape B},B:{Escape A}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AAugALkArBSbglwAAAAASUVORK5CYII="width="30" height="60"><img alt="21,A:{5},B:{5}" :{5},B:{5}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ACNgAKkAhD/i5lYAAAAAASUVORK5CYII="width="height="633 img alt="14,A:{.},B:{.}" title="14,A:{.},B:{.}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD/ //+l2Z/dAAAACXBIWXMAAA7EAAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AGYgAO8Ah9WahQgAAAASUVORK5CYII="width="30" height="60"><img alt="00,A:{space},B:{space}" title=" 00,A:{space},B:{space}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ACZgAKORK8Ah/KrWu0AAAAAAII宽度"30" height="60"><img alt=" 14,A:{.},B:{.}" title=" 14,A:{.},B:{.}" src="data: image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AGYgAO8Ah9WahQgAAAAAASUVORK5CYII="width="30" height="60"><img alt="64,A:{width="30" height="60"><img alt=" 14,A:{.},B:{.}" title=" 14,A:{.},B:{.}" src="数据：image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AGYgAO8Ah9WahQgAAAAAASUVORK5CYII="width="30" height="60"><img alt="64,width="30" height="60"><img alt=" 14,A:{.},B:{.}" title=" 14,A:{.},B:{.}" src="数据：image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AGYgAO8Ah9WahQgAAAAAASUVORK5CYII="width="30" height="60"><img alt="64,`}" title=" 64,A:{NUL},B:{`}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AF5gAR8Av0A69KoAAAASUVORK5CYII="width="30"95height="60"><im}g ,B:{DEL}" title=" 95,A:{US},B:{DEL}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AELgAWACIIBIz+IURAK " width="30" height="60"><img alt=" 07,A:{'},B:{'}" title=" 07,A:{'},B:{'}" src= "数据:图像/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AGdgATEAyJ/9LboAAAAAASUVORK5CYII="width="30"height="60"><img alt="74,A:{LF},B:{j}" title="74,A:{LF},B:{j}" src="data:image/png ;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AHmgAZUBGuCD0Y8AAAAASUVORK5CYII="width="30" height="60"><img alt="101,A,A:{FNC 4} :{Switch A}" title="101,A:{FNC 4},B:{Switch A},C:{Switch A}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+ l2Z/dAAAACXBIWXMAAA7EAAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ABQgAEsANWhuDt4AAAAAASUVORK5CYII="width="30" height="60"><img alt="25,A:{9},B:{9}" title="25,A:{9},B: {9}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ABpgAJcAex9glyQAAAAASUVORK5CYII="width="30" height="60"><img alt="12,A:{2,},B:{,} :{,},B:{,}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AExgAPsArevKOWsAAAASUVORK5CYII width="30" height ="106,{Stop}"title="106,{Stop}"src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAABAQMAAAA/57ZEAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ADigARMA2dpJzT8AAAAAASUVORK="宽度60">
009821140014649507749

这表示与您的示例相同的条形码，但不需要中间图形并占用大约三分之一的空间。用于构成图像的数据可以从数组中访问，并用于使用 Javascript 或其他客户端或服务器端应用程序填充目标 HTML。

[您可以在http://notionovus.com/blog/code-128-barcode/](http://notionovus.com/blog/code-128-barcode/)找到 Code 128 符号的完整列表

我不确定旋转。我还没有尝试过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-14T19:11:40.550

对于其他 googlers：建议的解决方案不依赖于 ReportLab，我们可以在我们的 html 模板中包含来自其 base64 表示的条形码，因为我们已经使用另一个库创建了图像：

```
data_uri = open("sample.png", "rb").read().encode("base64").replace("\n", "")
# HTML Image Element
img_tag = '<img alt="" src="data:image/png;base64,{0}">'.format(data_uri)
print img_tag
# CSS Background Image
css = 'background-image: url(data:image/png;base64,{0});'.format(data_uri)
print css 
```

*   来自[https://gist.github.com/jbergantine/1171682](https://gist.github.com/jbergantine/1171682)
*   [https://en.wikipedia.org/wiki/Data_URI_scheme](https://en.wikipedia.org/wiki/Data_URI_scheme)

# clearcase - 停止将更改传递到流 - RTC 源代码控制

> ID：13345286
> 
> 赞同：1
> 
> 时间：2012-11-12T14:15:12.113
> 
> 标签：clearcase, rtc

是否可以阻止用户将更改集传递到流？

如果我有一个正在积极开发的流并且希望在某个日期之后停止将更改传递到该流，是否可以“锁定”流使其变为只读？我想确保在特定日期之后不会有任何更改潜入流中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:47:54.463

[https://jazz.net/library/article/215](https://jazz.net/library/article/215)描述了不同的选项。交付时有读取访问模式、写入访问权限和先决条件，这可能会对您有所帮助，具体取决于您的确切需求。

约翰C

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:39:14.890

您可以尝试更改流的所有权和可见性，以便将其设置为团队（这将排除项目区域的大多数成员，除了少数几个）。

`process area / Team configuration / permissions`您可以在配置部分将交付权与该团队相关联。
这就是[那个线程](https://jazz.net/forum/questions/70421/how-to-lock-a-stream-or-component)所暗示的。

# matlab - mldivide 用夹克很慢？

> ID：13345289
> 
> 赞同：0
> 
> 时间：2012-11-12T14:15:31.410
> 
> 标签：matlab, jacket

我写了这段代码：app和cova是矩阵，维度等于代码中的变量dim和gsingle。

```
dim=32;
gfor q=1:256
     app(:,:,q)=cova(:,:,q)\geye(dim,dim,'single');
gend 
```

如果我尝试增加 dim 的维度，结果会非常慢。如果我用 for 循环和 cpu 变量编写等效代码会更快。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T03:28:13.793

Jacket 为线性代数使用上游库。不幸的是，它针对大型矩阵而不是许多小型矩阵进行了优化。因此，我们为宽度高达 32（或 64，具体取决于精度）的矩阵实现了一个快速版本。不幸的是，之后的任何内容都使用慢速版本。这就是您所看到的行为的原因。我是上述功能的开发人员。

# android - 使用加速度计检测运动 - （方向不变）？

> ID：13345291
> 
> 赞同：2
> 
> 时间：2012-11-12T14:15:39.907
> 
> 标签：android, accelerometer

我知道我们可以使用加速度计检测方向及其变化。比如手机是倒置、侧放还是其他什么的。

我们可以检测到手机的移动（假设手机方向没有改变）？

就像手机放在车里，车开始移动。在这种情况下，移动设备的方向不一定会改变，但我可以使用加速度计检测到这一点吗？

我最多在 API-8 中查看此功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:38:40.943

是的。以[LINEAR_ACCELERATION](http://developer.android.com/guide/topics/sensors/sensors_overview.html)为例。即使方向没有改变，您也会看到加速度的变化。

只是不要试图整合它来获得速度或位置，因为它不够准确。

* * *

查看`TYPE_ACCELEROMETER`(ie `sqrt(x^2+y^2+z^2)`) 长度的变化。定义一个阈值，如果变化超过阈值，则设备已被移动。

# java - 如何确定字符串是 Double 类型还是 Long 类型

> ID：13345292
> 
> 赞同：2
> 
> 时间：2012-11-12T14:15:40.677
> 
> 标签：java, regex, types

我有一个迭代的 ResultSet，我创建了一个类似视图（html）的报告。问题是某些列返回 Long 值（作为 SQL 中的数学函数的结果）。

有没有一种简单的方法可以通过 DataType 识别这些值？

可以说我想做这样的事情

```
String x = rs.getString(1);
if(MyUtilClass.isOfTypeLong(x)){
  //implement my bussiness logig
} 
```

我看过这篇文章[如何确定字符串中包含的数据类型？](https://stackoverflow.com/questions/11447583/how-do-you-determine-the-type-of-variable-a-string-is). 如果现在没有更好的方法，我将继续使用 regEx 解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T14:18:29.390

为什么不尝试[`Long.valueOf(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#valueOf%28java.lang.String%29)先将其解析为 a `Long`，然后将其解析为`Double`with [`Double.valueOf(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#valueOf%28java.lang.String%29)？

[`NumberFormatException`](http://docs.oracle.com/javase/7/docs/api/java/lang/NumberFormatException.html)如果字符串无法解析，两者都会抛出一个。

```
public static void main(String[] args) throws Exception {
    final String s1 = "1234567890";
    System.out.println(isParsableAsLong(s1));    // true
    System.out.println(isParsableAsDouble(s1));  // true

    final String s2 = "1234.56789";
    System.out.println(isParsableAsLong(s2));   // false
    System.out.println(isParsableAsDouble(s2)); // true
}

private static boolean isParsableAsLong(final String s) {
    try {
        Long.valueOf(s);
        return true;
    } catch (NumberFormatException numberFormatException) {
        return false;
    }
}

private static boolean isParsableAsDouble(final String s) {
    try {
        Double.valueOf(s);
        return true;
    } catch (NumberFormatException numberFormatException) {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T14:22:32.413

如果`.`可以用来区分那么：

```
 String number  = "12345";
    if(number.indexOf(".")>=0){
        //decimal
        Double doubleValue = Double.valueOf(number);
    }else{
        Long longValue = Long.valueOf(number);
    } 
```

使用异常处理：

```
 String number  = "12345";
    //You may define two variables as Double & Long (as used in previous example)
    Number formattedNumber = null;

    try{
        if(number.indexOf(".")>=0){
            //decimal
            formattedNumber = Double.valueOf(number);
        }else{
            formattedNumber = Long.valueOf(number);
        }
    }catch(NumberFormatException nfe){
        System.out.println("Not a double or Long");
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T14:27:01.700

尝试这个

```
Long l=Long.parseLong(x); 
```

如果它无法解析，那么它将通过 catch 块中的异常尝试

```
Double=Double.parseDouble(x) 
```

即使发生异常也无法解析

# c++ - 在十六进制编辑器中写入程序存储器并以编程方式读取

> ID：13345295
> 
> 赞同：2
> 
> 时间：2012-11-12T14:15:48.727
> 
> 标签：c++, windows, hex, executable, exe

好吧，我有 .exe 应用程序和其他一些文件。我想要做的是将这个其他文件写入 .exe 文件的末尾。.exe 文件应该在它的内存中找到这个文件的地址，从那里读取它并做一些事情。

我能够访问我之前写入内存的文件的地址，但是当我尝试从那里读取时，我得到拒绝访问异常。我怎样才能从那里阅读？

基本上我只想拥有一个自解压的 PE 文件。是的，我知道，我可以制作自解压存档，但这不是我想要的，因为我需要 .exe 和 .dll 但自解压存档只能是 .exe，所以看起来唯一的方法是让我的应用程序自己- 提取自身。这是代码：

```
int main(void)
{
    HMODULE hBegin = GetModuleHandle(NULL);

    PIMAGE_DOS_HEADER dosHeader = (PIMAGE_DOS_HEADER)hBegin;
    PIMAGE_NT_HEADERS ntHeaders = (PIMAGE_NT_HEADERS)((PBYTE)hBegin + dosHeader->e_lfanew);
    PIMAGE_SECTION_HEADER pSectionTable = (PIMAGE_SECTION_HEADER)(ntHeaders + 1);

    // get size of each section
    DWORD dwSize = 0;

    for(int i = 0; i < ntHeaders->FileHeader.NumberOfSections; i++)
    {
        dwSize += pSectionTable[i].SizeOfRawData;
    }

    //get size of PE headers
    dwSize += ntHeaders->OptionalHeader.SizeOfHeaders;

    WCHAR lpszSfxPath[MAX_PATH];
        GetModuleFileNameW(NULL, lpszSfxPath, MAX_PATH);
    HANDLE hFile = CreateFileW(lpszSfxPath,
            GENERIC_READ,
            FILE_SHARE_READ,
            NULL,
            OPEN_EXISTING,
            FILE_ATTRIBUTE_NORMAL,
            NULL);
    SetFilePointer(hFile, dwSize, NULL, FILE_BEGIN);
    BYTE BUF[10];
    if(!ReadFile(hFile,BUF,sizeof(BYTE),NULL,NULL))
        printf("FAIL!\n");

    printf("HELLO WORLD\n");
    getchar();
    return 0;
} 
```

在存储我的打包文件的文件末尾之后调用 SetFilePointer 文件指针指向，但我无法从中读取

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T14:25:33.053

Microsoft 的 PE 可执行二进制文件包含一个单独的*资源*部分，可以放置在文件中 - 例如，资源用于在可执行文件中传送数据。这是您最可能想要放置数据的地方。

看看： http: [//www.devsource.com/c/a/Architecture/Resources-From-PE-I/](http://www.devsource.com/c/a/Architecture/Resources-From-PE-I/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:21:09.037

另一种可能的解决方案是在文件中最后存储一个标题结构，其中包含数据开始的文件中的偏移量以及数据的长度。然后你的程序可以很容易地寻找到文​​件的末尾（减去标题的大小），并读取数据的位置和长度。

* * *

您所做的是获取可执行文件，将其写入第二个文件，可能写入填充，写入数据，写入可能的更多填充，最后写入数据的长度和数据在文件中的位置。

该文件看起来（在磁盘上）类似于：

```
+--------------+
| 可执行文件 |
| 程序 |
+--------------+
| 填充 |
+--------------+
| 数据 |
+--------------+
| 填充 |
+--------------+
| 数据长度 |
| 数据位置 |
+--------------+

```

现在可执行文件可以将文件作为常规文件以只读方式打开。寻找到末尾减去`data length`and的大小`data position fields`（通常是`sizeof(DWORD)`（乘以 2））。读取长度和位置的两个字段。现在您可以寻找数据所在的实际位置 ( `data pos.`) 并读取`data length`字节以读取实际数据。

# asp.net - 格式化来自 web 服务的数据

> ID：13345300
> 
> 赞同：0
> 
> 时间：2012-11-12T14:16:00.363
> 
> 标签：asp.net, vb.net, date, formatting

我正在使用 asp.net 和 vb.net（后面的代码）从 Web 服务中获取一些数据。

在获取数据时，我无法对其进行格式化。

我试过这个：

```
 label_date.test = trim(arData(25)) 
```

输出为：`01012012`

我希望输出为：`01/01/2012`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:20:39.073

```
Dim dateString As String = trim(arData(25))
Dim dateValue As String

If DateTime.TryParseExact(dateString, "MMddyyyy", Nothing, _
     DateTimeStyles.None, dateValue) Then
     label_date.test = dateValue.ToString("MM/dd/yyyy")
End If 
```

# r - 在 R 中拆分数据框 - 缺少块列

> ID：13345307
> 
> 赞同：1
> 
> 时间：2012-11-12T14:16:33.123
> 
> 标签：r, split, dataframe

这是我第一次提出问题，直到现在我可以从其他主题中找到我想要的东西。我对 R 相当陌生，所以它可能很容易做到。好吧，我有一个像这样的数据框

```
col1  col2  col3
start   NA    NA
    1    
    2
    3
  ...
  126
start   NA    NA
    1
    2
  ...
  158 
```

每次在第一列中找到变量“start”时，我都想拆分此数据框。在上面的示例中，我想获取 2 个数据帧，每个数据帧有 126 行和 158 行。似乎 split() 函数可以解决问题，但我没有像下面的示例那样的块列。好吧，如果我可以像这样解决这个列问题，我认为 split(test.frame,test.frame$block == 1)。

```
col1  col2  col3  block
start   NA    NA      1
    1                 1
    2                 1
    3                 1
  ...
  126                 1
start   NA    NA      2
    1                 2
    2                 2
  ...
  158                 2 
```

任何想法将不胜感激！提前谢谢大家！

# jquery - Jquery 动画发生在多个 div 上

> ID：13345308
> 
> 赞同：0
> 
> 时间：2012-11-12T14:16:33.403
> 
> 标签：jquery

所以我有一个像这样的结构

```
<div class="content-block">
    <div class='hidden'> Hidden Content </div>
    <div class='click'> Click Me </div>

    <div class='hidden'> Hidden Content </div>        
    <div class='click'> Click Me </div>

</div> 
```

我希望 Jquery 直接为隐藏的内容设置动画，以便扩展高度和宽度。我的jQuery是

```
$(".click").click(function(){ 
    $(".click").prev(".hidden").animate({
        width:100%, 
        height: 500px
    }, 500);
}); 
```

我遇到的问题是，这会为所有 .hidden div 设置动画，而不仅仅是 .click 之前的那个

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T14:18:39.017

指定上下文，使用`$(this)`：

```
$(".click").click(function(){
    $(this).prev(".hidden").animate({width:100%, height: 500px}, 500);
}); 
```

在您的原始代码中，您选择*了所有* `.click`元素，因此选择了它们之前的所有`.hidden`兄弟元素。

# magento - 禁用实时产品索引 magento Enterprise

> ID：13345313
> 
> 赞同：1
> 
> 时间：2012-11-12T14:16:43.413
> 
> 标签：magento

我们使用 Magento Enterprise v1.12。我突然想到，为我们节省产品需要很长时间（约 12 秒），所以我正在对此进行调查。由于我们编辑了很多产品（我们有全职的内容编辑），所以编辑的灵活性和速度非常重要。

我们使用了很多目录规则，我注意到为保存产品更新这些规则大约需要 7 秒（大约 12 秒）。我现在正在尝试禁用此功能，因为无论如何它们都会在晚上更新。

我现在想到的是 catalog/product::_afterSave 方法中的以下代码：

```
 Mage::getSingleton('index/indexer')->processEntityAction(
        $this, self::ENTITY, Mage_Index_Model_Event::TYPE_SAVE
    ); 
```

此代码需要大约 3-4 秒，并且不受当前索引模式的影响（例如，将所有索引设置为手动）。为什么是这样？我宁愿更快地保存 3-4 秒，并在一夜之间重新索引数据。这段代码是否做了任何应该立即发生的重要事情？尽管有我的手动索引（我猜主要是catalog_product_flat和catalog_url），它仍然在索引是否有原因。

希望任何人有一些见解。将产品节省减少到最多约 2 秒会很酷:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:05:03.410

您是否尝试在索引管理中将索引模式从“保存时更新”更改为“手动更新”？

谢谢

# c# - class accessibility & inheritance in ASP.Net C# 4.0

> ID：13345315
> 
> 赞同：0
> 
> 时间：2012-11-12T14:17:00.703
> 
> 标签：c#, asp.net, class, inner-classes, access-modifiers

```
namespace MyStyle
{
    public class Styles
    {                  
            //intended to store style.properties & style.values class 

        public sealed class sealdPropsClass 
        {
            public sealed const string DarkBlueColor = "darkBlue";
        }

        public static class staticPropsClass
        {
            public static const string LightBlueColor = "lightBlue";
        }
    }
} 
```

accessing like so :

```
 using MyStyles;

 string ColorBlue = Styles.sealedPropsClass.DarkBlueColor; 
```

in another question about classes and inheritance I had been warned to refrain the `static` modifier

reason is : it would be un accessible to others while The Current user is **already Accessing the class**

via current page or another web application that uses that class .

what i would like to understand from this example:

**1.**

How Can i wrap Styles in an `outer class`(is that what i Should do?) :

so i would be able to use an `instance` = a clone, of the subject class as in this code below:

```
public Styles CurrentAppStyles = new Styles();

string darkColor = CurrentAppStyles.sealdPropsClass.DarkBlueColor 
```

**2.**

if i am importing `MyStyle` namespace via

```
 using MyStyle; ///<-- is that an instance ? 
```

meaning it would not (if there was an Exeption error for that case) alert user:

*"`Styles.SealedPropsClass.DarkBlueColor` is Currently being used, Please try again later..."*

or it is actually instantiating the Whole `namespace` (that's what i think happens in this case)

and thanks for the Great help i can get here , from your experience and Knowledge !!

**updated (source of Question)**

[this is where i have been warned](https://stackoverflow.com/questions/13106231/send-dynamic-table-or-div-content-as-an-email-body-content) , could you pleas shed some more light ???

This isn't answering your question but I noticed this hasn't been pointed out yet: your mail class is dangerous because it is declared static and has public static fields exposed. **

** update 2** my fault was that i didn't get from Joshuas comment is actually sharing the state globally was the issue rather access issue... so , i guess in the case of using constant fields (strings etc...) would not be a problem

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:25:26.167

so what i can understand by now that using a static class is not to be avoided at all scenarios for example . extention methods are used via a static class , most of my sub classess are static for example :"

```
public class container // instanciated so name is not so relevant 
{                      // e.g : container c = new container()
                       // usage- c.utils.......
    public static class utils // used from an instance of container
    {
      public static int Str2int(string strToConvert)
      {
          return Convert.ToInt32(StrToConvert);
      }
    }
} 
```

# objective-c - Xcode Interfce Builder 在打开时更改文件，导致 SCM 将其报告为已修改

> ID：13345316
> 
> 赞同：7
> 
> 时间：2012-11-12T14:17:06.767
> 
> 标签：objective-c, ios, xcode, version-control, interface-builder

任何人都对 Xcode 的 IB 显示 xib 文件仅通过打开它们进行修改有问题吗？虽然实际上没有修改？

如果我只想查看 xib 文件的 UI，此操作会使 Xcode 将文件显示为已修改，然后我必须放弃更改和许多其他事情。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T14:40:02.190

如果您打开一个由以前版本的 Xcode 生成/使用的 .xib 文件，通常会发生这种情况。

这可能由于多种原因而发生。例如，对于较新版本的 Xcode，它会将 .xib 中包含的 Interface Builder 版本号更新为您正在使用的版本号。其他示例包括用于从 xib 构建 UI 的类的差异。它在做什么没有记录，但请查看差异以亲自了解。

归根结底，这是 Xcode 的一个问题，并不是很容易解决。您可以：

1.  提交修改，尽管这可能会污染您的差异。除非您的团队运行的 Xcode 版本比您旧，否则这不会造成问题。（如果是，请确保您都使用最新/相同的版本）。
2.  继续重置对 xib 文件所做的更改，或者选择性地选择不提交文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:34:27.120

XCode 4.5 改变了 .xib 文件的格式。基本上它是从格式中删除未使用的杂物。一旦做出改变，它就不会再这样做了。

# algorithm - 课程安排算法：为什么不建议使用 DFS 或图形着色？

> ID：13345317
> 
> 赞同：9
> 
> 时间：2012-11-12T14:17:09.517
> 
> 标签：algorithm, combinatorics, genetic-algorithm, mathematical-optimization, evolutionary-algorithm

我需要开发一个课程时间表软件，它可以有效地分配时间段和房间。这是基于课程的例行程序，而不是基于注册后的程序。并且有效地意味着根据员工的时间偏好为课程分配时间段，并且还需要最大限度地减少第一年和第二年的课程重叠，以便第二年的学生可以重新参加他们未能通过的课程。（以及第三年和第四年的对） .

现在，起初我认为这将是一个简单的问题，但现在似乎不同了。我看过的大多数论文都使用遗传算法/PSO/模拟退火或这些类型的算法。而且我仍然无法将问题解释为 GA 问题。我感到困惑的是为什么几乎没有人建议 DFS 或图形着色算法？

如果使用 DFS/图形着色，有人可以解释这种情况吗？或者为什么不建议或尝试它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-06T00:33:20.757

我为一个复杂的部门解决这个问题的经验是，硬约束（比如同一人群所学的课程没有重叠，以及教师的硬约束）很容易通过精确的方法解决。我使用 0-1 整数线性规划对问题进行建模，并使用名为 minisat+ 的基于 SAT 的工具解决了这个问题。像 cplex 这样的竞争性商业工具也可以解决它。因此，使用今天的工具，即使输入相当大，也不需要像上面建议的那样进行近似。现在，优化解决方案是另一回事。可以有许多（加权）目标，并且找到使目标最小化的解决方案在计算上确实非常困难（我尝试过的任何工具都无法在 24 小时内解决它），

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:14:13.583

本文档描述了将 GA 方法应用于大学时间表，因此它应该直接适用于您的要求： [使用 GA 解决大学时间表](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.126.4 "使用 GA 的时间表")

# internet-explorer - 问题：跨域隐藏 iframe 生成一个弹出窗口，提供 PHP 脚本的下载

> ID：13345324
> 
> 赞同：0
> 
> 时间：2012-11-12T14:17:33.167
> 
> 标签：internet-explorer, iframe, cross-domain

这主要影响所有 IE 和 Opera 浏览器，而 FF、Chrome 和 Safari 则完好无损。

如何禁用下载弹出窗口？

助教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:19:33.213

已解决的问题：必须使用正确的 PHP 标头。

以前使用： header('content-type: application/json; charset=utf-8') - 生成下载对话框。新使用的：header('content-type: text/html; charset=utf-8') - 没有下载对话框

耶

# html - 我可以创建一个延伸到页面底部的内容 div，带有可变高度的标题，没有滚动条吗？

> ID：13345325
> 
> 赞同：1
> 
> 时间：2012-11-12T14:17:40.937
> 
> 标签：html, css

我有一个可变高度的标题。我希望它下面的内容 div 扩展窗口的整个高度。但是，如果我将内容 div 设置为 100% 的高度，则内容 div 会离开屏幕（因为标题高度）并引入一个滚动条。

我知道这可以用于固定标题，请参阅（http://blog.stevensanderson.com/2011/10/05/full-height-app-layouts-a-css-trick-to-make-it-easier /) 但我认为他的方法（使用顶部和底部设置的绝对定位）不适用于可变高度标题。

有一个使用表格显示的解决方案（http://stackoverflow.com/questions/8555820/），但我想支持 IE7。

所以总结一下：

*   标题是可变高度
*   我希望内容 div 扩展到窗口底部
*   除非确实需要，否则我不想要滚动条
*   如果没有任何纯 css 解决方案，我已经知道如何在 JQuery 中执行此操作

下面是显示问题的示例代码：

```
<!DOCTYPE html>

<html>
<head>
<style type="text/css">
* {
  margin: 0;
  padding: 0;
}

html, body { height: 100%; }

#header { background-color: yellow; }

#content {
background-color: gray;
height: 100%;
}
</style>
</head>

<body>
<div id="header">
<h1>A Heading</h1>
</div>

<div id="content">
<p>A paragraph.</p>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:38:35.050

您可以使用溢出属性来删除滚动条。但是您的内容必须适合一页。

```
html, body { height: 100%; overflow: hidden;} 
```

否则我认为你需要 JavaScript 来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:45:54.497

这可能过于简化，但您可以通过将 的背景颜色设置为`body`相同颜色来伪造内容区域的高度，即：`gray`.

那样，

*   尽管内容没有延伸到页面底部，但看起来确实如此。
*   当内容*确实*超出垂直限制时，主体将随之拉伸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T14:52:41.800

您是否考虑过重构您的 html 以使标题位于“内容”div 中？这样，标题仍然是可变高度，内容 div 仍然会填满页面。如果您需要为内容 div 的边框设置样式，唯一的问题就会出现。您的预期布局是否会阻止这成为一个好的解决方案？

例如

```
<body>
    <div id="content">
        <div id="header">
            <h1>A Heading</h1>
        </div>

        <p>A paragraph.</p>
    </div>
</body> 
```

...如果你走那么远，你总是可以完全删除内容 div 并将所有内容放在身体内，无论如何都是 100% 的高度：

```
<body>
    <div id="header">
        <h1>A Heading</h1>
    </div>

    <p>A paragraph.</p>
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T14:42:41.370

每当我遇到这样的问题时，我都会尝试重构页面，以便`<body>`最终成为具有所有滚动功能的全高元素。

您可以`position:fixed`将标题保持在顶部，然后允许正文随内容滚动。您可以对侧边栏或其他元素执行相同的操作。

# java - 忽略 JAX-WS 客户端中的缺失方法

> ID：13345328
> 
> 赞同：4
> 
> 时间：2012-11-12T14:17:54.633
> 
> 标签：java, soap, jax-ws

我有一个用于在服务器上创建 Web 服务端点的模型。客户端使用相同的模型。但是，当向服务器添加新操作但客户端仍使用旧模型时，服务创建将失败，并出现如下异常（为清楚起见添加了换行符）：

```
Exception in thread "main" javax.xml.ws.WebServiceException:
  Method someNewMethod is exposed as WebMethod, but there is no
  corresponding wsdl operation with name someNewMethod in the
  wsdl:portType{http://example.com}MyService 
```

我理解这个问题，但可以忽略这个吗？我希望在使用 Web 服务时向后兼容。只要仅添加方法，这在大多数情况下都应该可以正常工作。

问题出现在`getPort`方法中：

```
Service s = Service.create(
    new URL("http://example.com/foo?wsdl"),
    new QName("http://example.com", "MyService"));
MyService m = s.getPort(MyService.class); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-18T07:24:46.513

仅供参考。您还可以使用注释方法

```
@WebMethod(exclude=true) 
```

这将确保忽略该方法以与 wsdl 进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T18:35:10.833

我刚刚删除了 web 服务引用并使用该界面再次创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T18:16:45.777

使用本地 WSDL 文件：
客户端应用程序具有服务的本地 WSDL 文件，例如在 jar 文件中。

你得到它

```
URL wsdlURL = this.getClass().getClassLoader()
                .getResource("MyWebService.wsdl"); 
```

这适用于我编写的应用程序。服务器后来扩展了一个附加的 WSDL 属性，而客户端仍然使用本地属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-31T09:06:49.043

您的 Service 类包含一个带有本地 wsdl 文件变量的静态构造函数。检查本地 wsdl 文件是否有 *someNewMethod*。如果不是从原始 URL 下载 wsdl 文件并保存到本地。wsdl 末尾的soap 地址位置值也很重要。有时https会变成http。

# python - 浮点数和字符串转换的奇怪行为

> ID：13345334
> 
> 赞同：18
> 
> 时间：2012-11-12T14:18:16.720
> 
> 标签：python, floating-point, python-2.x

我已经在 python shell 中输入了这个：

```
>>> 0.1*0.1
0.010000000000000002 
```

我预计 0.1*0.1 不是 0.01，因为我知道以 10 为底的 0.1 在以 2 为底的周期性。

```
>>> len(str(0.1*0.1))
4 
```

我预计会得到 20 个，因为我在上面看到了 20 个字符。为什么我得到4？

```
>>> str(0.1*0.1)
'0.01' 
```

好的，这解释了为什么我`len`给我 4，但为什么`str`返回`'0.01'`？

```
>>> repr(0.1*0.1)
'0.010000000000000002' 
```

为什么`str`圆`repr`而不圆？（我已经阅读[了这个答案](https://stackoverflow.com/a/2626364/562769)，但我想知道他们是如何决定何时`str`进行浮点数的，何时不进行）

```
>>> str(0.01) == str(0.0100000000001)
False
>>> str(0.01) == str(0.01000000000001)
True 
```

所以这似乎是浮点数准确性的问题。我认为 Python 会使用 IEEE 754 单精度浮点数。所以我已经这样检查了：

```
#include <stdint.h>
#include <stdio.h> // printf

union myUnion {
    uint32_t i; // unsigned integer 32-bit type (on every machine)
    float f;    // a type you want to play with
};

int main() {
    union myUnion testVar;
    testVar.f = 0.01000000000001f;
    printf("%f\n", testVar.f);

    testVar.f = 0.01000000000000002f;
    printf("%f\n", testVar.f);

    testVar.f = 0.01f*0.01f;
    printf("%f\n", testVar.f);
} 
```

我有：

```
0.010000
0.010000
0.000100 
```

Python给了我：

```
>>> 0.01000000000001
0.010000000000009999
>>> 0.01000000000000002
0.010000000000000019
>>> 0.01*0.01
0.0001 
```

为什么 Python 会给我这些结果？

（我使用 Python 2.6.5。如果您知道 Python 版本的差异，我也会对它们感兴趣。）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-12T15:06:24.083

The crucial requirement on `repr` is that it should round-trip; that is, `eval(repr(f)) == f` should give `True` in all cases.

In Python 2.x (before 2.7) `repr` works by doing a `printf` with format `%.17g` and discarding trailing zeroes. This is guaranteed correct (for 64-bit floats) by IEEE-754\. Since 2.7 and 3.1, Python uses a more intelligent algorithm that can find shorter representations in some cases where `%.17g` gives unnecessary non-zero terminal digits or terminal nines. See [What's new in 3.1?](http://docs.python.org/dev/whatsnew/3.1.html#other-language-changes) and [issue 1580](http://bugs.python.org/issue1580).

Even under Python 2.7, `repr(0.1 * 0.1)` gives `"0.010000000000000002"`. This is because `0.1 * 0.1 == 0.01` is `False` under IEEE-754 parsing and arithmetic; that is, the nearest 64-bit floating-point value to `0.1`, when multiplied by itself, yields a 64-bit floating-point value that is not the nearest 64-bit floating-point value to `0.01`:

```
>>> 0.1.hex()
'0x1.999999999999ap-4'
>>> (0.1 * 0.1).hex()
'0x1.47ae147ae147cp-7'
>>> 0.01.hex()
'0x1.47ae147ae147bp-7'
                 ^ 1 ulp difference 
```

The difference between `repr` and `str` (pre-2.7/3.1) is that `str` formats with 12 decimal places as opposed to 17, which is non-round-trippable but produces more readable results in many cases.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T14:34:01.367

I can confirm your behaviour

```
ActivePython 2.6.4.10 (ActiveState Software Inc.) based on
Python 2.6.4 (r264:75706, Jan 22 2010, 17:24:21) [MSC v.1500 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> repr(0.1)
'0.10000000000000001'
>>> repr(0.01)
'0.01' 
```

Now, the docs [claim](http://docs.python.org/dev/whatsnew/3.1.html#other-language-changes) that in Python <2.7

> the value of `repr(1.1)` was computed as `format(1.1, '.17g')`

This is a slight simplification.

* * *

Note that this is all to do with the string *formatting* code -- in memory, all Python floats are just stored as C++ doubles, so there is never going to be a difference between them.

Also, it's kind of unpleasant to work with the full-length string for a float even if you know that there's a better one. Indeed, in modern Pythons a new algorithm is used for float formatting, that picks the shortest representation in a smart way.

* * *

I spent a while looking this up in the source code, so I'll include the details here in case you're interested. You can skip this section.

In `floatobject.c`, we see

```
static PyObject *
float_repr(PyFloatObject *v)
{
    char buf[100];
    format_float(buf, sizeof(buf), v, PREC_REPR);

    return PyString_FromString(buf);
} 
```

which leads us to look at `format_float`. Omitting the NaN/inf special cases, it is:

```
format_float(char *buf, size_t buflen, PyFloatObject *v, int precision)
{
    register char *cp;
    char format[32];
    int i;

    /* Subroutine for float_repr and float_print.
       We want float numbers to be recognizable as such,
       i.e., they should contain a decimal point or an exponent.
       However, %g may print the number as an integer;
       in such cases, we append ".0" to the string. */

    assert(PyFloat_Check(v));
    PyOS_snprintf(format, 32, "%%.%ig", precision);
    PyOS_ascii_formatd(buf, buflen, format, v->ob_fval);
    cp = buf;
    if (*cp == '-')
        cp++;
    for (; *cp != '\0'; cp++) {
        /* Any non-digit means it's not an integer;
           this takes care of NAN and INF as well. */
        if (!isdigit(Py_CHARMASK(*cp)))
            break;
    }
    if (*cp == '\0') {
        *cp++ = '.';
        *cp++ = '0';
        *cp++ = '\0';
        return;
    }

    <some NaN/inf stuff>
} 
```

We can see that

So this first initialises some variables and checks that `v` is a well-formed float. It then prepares a format string:

```
PyOS_snprintf(format, 32, "%%.%ig", precision); 
```

Now PREC_REPR is defined elsewhere in `floatobject.c` as 17, so this computes to `"%.17g"`. Now we call

```
PyOS_ascii_formatd(buf, buflen, format, v->ob_fval); 
```

With the end of the tunnel in sight, we look up [`PyOS_ascii_formatd`](http://www6.uniovi.es/python/dev/src/c/html/pystrtod_8c.html#a4) and discover that it uses `snprintf` internally.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T14:29:24.403

# c# - WinRT / Windows 8 中 SizeChanged 后的触发事件

> ID：13345338
> 
> 赞同：1
> 
> 时间：2012-11-12T14:18:22.697
> 
> 标签：c#, xaml, events, windows-8, size

`Grid`当应用程序被捕捉时，我有一个调整大小。它必须根据新`ActualWidth`元素更新动画。但是，当我将此函数绑定到`SizeChanged`事件时，它似乎在重新绘制快照视图之前触发，并计算前一个`ActualWidth`.

如何确保我的函数在应用程序在快照后重绘后运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:26:16.733

当布局更新时，使用该`LayoutUpdated`事件运行任何代码。使用 bool 设置为 true on `SizeChanged`，然后再次设置为 false，然后再执行任何操作以确保不会导致循环！

# c - 为家庭作业制作外壳

> ID：13345340
> 
> 赞同：1
> 
> 时间：2012-11-12T14:18:25.757
> 
> 标签：c, shell, stdout, dup2

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>
#include <string.h>
#include <sys/stat.h>
#include <fcntl.h>

void exec(char **args){
    pid_t  pid;
    int status;
    if ((pid = fork()) < 0) {    
    printf("*** ERROR: forking child process failed\n");
    exit(1);
}

else if (pid == 0) {      

    if(execvp(args[0],args)<0)//{
        //printf("argv[0]=%s argv[1]=%s",args[0],args[1]);
        printf("**error in exec\n");
    }

    else {                                  
        while (wait(&status) != pid);
    }
}

void exec2(char **args, char *file){
    printf("file =%s\n",file);
    int fd;
    pid_t pid;
    int status;
    if ((pid = fork()) < 0) {    
printf("*** ERROR: forking child process failed\n");
        exit(1);
    }

    else if (pid == 0) {   
    fd = open(file, O_RDWR | O_CREAT, (mode_t)0600);
    close(1);
    dup2(fd, 1);
    if(execvp(args[0],args)<0){
        printf("**error in exec");
    }

else {  
        printf("\nhere\n");
        close(fd);                                
        while (wait(&status) != pid){
            fflush(stdout) ;
        }
    }
}
    close (fd);
}

void main(){
    char *command;
    char inp[512];
    char *filepath;
    size_t size=0;
    char *substr;
    char *args[512];
    command = (char *) malloc(sizeof(char *) * 512);
    int flag=0;
    int redirect=0;
    int i=0;
    while (1){
        printf("$ ");
        command = fgets(inp, 512/*sizeof(char *)*/, stdin);

        command[strlen(command)-1]='\0';

        if (strchr(command,'>')){
            redirect=1;
            strtok_r(command,">",&filepath);
        }

        size_t siz=4;
        //printf("command=%s\n",command);
        int i=0;
        while(1){
            //printf("i=%d\n",i);
            char *tok = strtok_r(command," ",&substr);
            if (tok==NULL){
                break;
            }
        args[i++] = tok;
/*          printf("tok=%s\n",tok);
            printf("len tok = %d\n",(int)strlen(tok));
            printf("command=%s\n",command);
            printf("substr=%s\n",substr);     
   */           command = substr;
        }

        //printf("args[0]=%s",args[0]);
        if (!strncasecmp(args[0],"exit",siz) || !strncasecmp(args[0],"quit",siz))
        {
            printf("\nBye\n");
            exit(0);
        }

        else if(strcmp(args[0],"cd")==0){
            chdir(args[1]);
            //printf("chdir")   ;
            //system("pwd");
    } 

    else if (redirect==1){
        exec2(args,filepath);
    }

    else exec(args);
}
} 
```

好的，这是我的 shell 代码。当我运行它时，我输入 ls 并给出正确的输出。然后我输入 ls -l 然后再次输入 ls 并给出 ls: cannot access : No such file or directory 同样当我使用 cd 时， ls 不提供输出并且 pwd 说“忽略未使用的参数” ALso cat 不起作用。虽然 mkdir、ps 和 ls -l 有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:25:54.863

不要关闭`stdout`！

在 之后`fork`和之前这样做`exec`：

```
if (child) {
  int fd = open(file, O_RDWR | O_CREAT, (mode_t)0600);
  close(1);
  dup2(fd, 1);
  if(execvp(args[0],args)<0){
    printf("**error in exec");
  }
} 
```

# javascript - 带有注释的 jQuery 模板的奇怪行为

> ID：13345350
> 
> 赞同：1
> 
> 时间：2012-11-12T14:19:21.853
> 
> 标签：javascript, jquery, jquery-templates

我们有一个模板，它来自服务器。它包含注释的 html: 块`<!-- ... -->`。当我们在其上应用 jquery 模板时，一些奇怪`_tmplitem`的属性出现在注释节点内。

当我们取消注释该块并在其上应用另一个 jQuery 模板时 - 我们遇到了问题。如果在该块上应用第二个模板之前，我们这样做：

```
html = html.replace(/_tmplitem=['"]\d+['"]/mig, ''); 
```

一切都很酷。到底是怎么回事？你能解释一下吗？有什么想法吗？如果您知道如何在不进行额外更换的情况下克服它 - 请告诉。

# android - 如何在使用真实设备时通过代码启动默认主页启动器？

> ID：13345351
> 
> 赞同：3
> 
> 时间：2012-11-12T14:19:21.357
> 
> 标签：android, default, android-launcher, android-homebutton

在使用模拟器时，我通过以下代码成功启动了默认主页启动器：

```
Intent de_intent=new Intent();
de_intent.setClassName("com.android.launcher","com.android.launcher2.Launcher");
startActivity(de_intent); 
```

但是当我在真实设备中执行此代码时，它显示以下异常：

```
Unable to find explicit activity class {com.android.launcher/com.android.launcher2.Launcher} have you declared this in AndroidManifest.xml 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T19:29:09.500

你有三星设备吗？他们用 TouchWiz Home 启动器替换了默认的 Android 启动器。以下代码使用 setClassName() 方法为我工作：

```
Intent intent = new Intent(Intent.ACTION_MAIN);
        intent.setClassName("com.sec.android.app.launcher", "com.android.launcher2.Launcher");
        startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T14:20:54.937

如果要返回 HOME，可以使用：

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T14:21:08.150

尝试以下：

```
 Intent startMain = new Intent(Intent.ACTION_MAIN);
        startMain.addCategory(Intent.CATEGORY_HOME);
        startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(startMain); 
```

# mod-rewrite - htaccess 到 web.config 文件 rewriteCond

> ID：13345353
> 
> 赞同：0
> 
> 时间：2012-11-12T14:19:28.517
> 
> 标签：mod-rewrite, web-config

我有这个 htaccess，它可以获取在 url 中添加的文件夹并将其转换为变量。如下：

```
RewriteEngine on
RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?pagina=$1 
```

我必须将其转换为 web.config xml 结构文件，它的工作方式如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="Imported Rule 1">
                    <match url="^([a-zA-Z0-9_-]+)$" ignoreCase="false" />
                    <action type="Rewrite" url="/index.php?page={R:1}" appendQueryString="false" />
                </rule>
                <rule name="Imported Rule 2">
                    <match url="^([a-zA-Z0-9_-]+)/$" ignoreCase="false" />
                    <action type="Rewrite" url="/index.php?page={R:1}" appendQueryString="false" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

现在我需要使它仅在最后一个文件夹不是特定文件夹时才起作用，我在研究后尝试了这个但没有成功：

```
<conditions logicalGrouping="MatchAll">
    <add input="{REQUEST_URI}" pattern="!^/diretorio/" ignoreCase="true" />
</conditions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:27:08.787

我发现正确的代码是：

```
<conditions>
     <add input="{REQUEST_URI}" pattern="^/admin/" ignoreCase="false" negate="true" />
</conditions> 
```

# objective-c - 设置 UIImageView 以显示图像的中间部分

> ID：13345354
> 
> 赞同：0
> 
> 时间：2012-11-12T14:19:38.343
> 
> 标签：objective-c, ios, uiimageview

我有一个图像视图，我想显示用户个人资料图片的中心部分。我想缩放图片，使宽度与屏幕宽度匹配，同时保持纵横比，使图像居中，然后在顶部/底部有任何多余的东西根本不出现。

我尝试将 imageView.contentMode 设置为`UIViewContentModeScaleAspectFill`,`UIViewContentModeScaleAspectFit`和`UIViewContentModeCenter`其他一些，但它要么调整我的 UIImageView 的大小、更改纵横比，要么不填充该区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:04:41.093

> “但它要么调整我的 UIImageView 的大小”

我猜你看到了裁剪的部分。也许您忘记了“clipsToBounds”属性？

```
UIImageView *view1 = [[UIImageView alloc] initWithFrame: ___ ];
view1.clipsToBounds = YES;
UIImage * img = [UIImage imageNamed:@" ___ "];
view1.image = img;
view1.contentMode = UIViewContentModeScaleAspectFill; 
```

# paypal - 从下拉列表中选择金额 - 贝宝

> ID：13345369
> 
> 赞同：0
> 
> 时间：2012-11-12T14:20:41.180
> 
> 标签：paypal

我为我的捐赠按钮使用了以下代码。当我在下拉列表中选择金额并单击捐赠时。它重定向到贝宝网站并要求我再次输入金额，但我已经在下拉列表中选择了金额。任何帮助表示赞赏。谢谢。

```
 <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
    <select name="amount" id="amount">
       <option value="10">10 SEK</option>
       <option value="20">20 SEK</option>
       <option value="30">30 SEK</option>
       <option value="40">40 SEK</option>
       <option value="50">50 SEK</option>
    </select>
    <input type="hidden" name="cmd" value="_s-xclick">
    <input type="hidden" name="hosted_button_id" value="xxxxxxx">
    <input type="hidden" name="currency_code" id="currency_code" value="SEK"> 
    <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
    <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
  </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:17:36.423

使用托管 PayPal 按钮时，您需要在按钮创建向导中配置下拉选项。如果您想自己包含所有这些，则需要使用非托管按钮。

# c# - 检索 imap 帐户邮件，然后在 asp.net 中显示邮件

> ID：13345372
> 
> 赞同：0
> 
> 时间：2012-11-12T14:21:02.050
> 
> 标签：c#, asp.net, imap

这更像是我需要完成这个的一个观察者。我们有一个使用 asp.net 的 Intranet，其想法是检索邮件及其附件，然后在列表框/或一些表中显示此/这些消息描述。
我将使用 c# 来编译它。
现在需要检索的邮件是传真/来自我们在 Outlook atm 中设置的传真帐户，
-这些传真中的每一个都有一个附件。
- 附件是 tiff 文件。
- 所以最终结果是获取 tiff 文件并将其列出。

我知道那里有库/类需要附加/引用，所以这可以工作。

目前我对这需要什么有一个简要的了解，但如果可能的话，我想要一份清单，我需要拥有的物品/东西……如果你愿意，可以列出一份清单。

我有一个非常粗略的第一次尝试。[我使用来自https://github.com/smiley22/S22.Imap](https://github.com/smiley22/S22.Imap)的 S22.IMAP 库集

我认为这可以通过某种方式实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:36:25.877

如果您使用的是 Exchange >= 2007，则可以通过[Exchange Web 服务 (EWS)](http://www.google.it/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCQQFjAA&url=http%3A%2F%2Fmsdn.microsoft.com%2Fen-us%2Flibrary%2Fexchange%2Fbb204119(v%3Dexchg.140).aspx&ei=vwihUIq1Naqm4gTkjIGgDg&usg=AFQjCNENsz7V5gNFR6QfT_7m0n3OunkOYQ&sig2=lb2BQqqlYfn7Yx6q2SUFjw)检索数据，从而使您的应用程序无需系统上的 Outlook 客户端以及老式方法的所有其他问题即可工作。我对 EWS 没有任何直接经验，但一位同事告诉我，您可以做任何 Outlook Web Access 可以做的事情。

**编辑**

[This other SO question](https://stackoverflow.com/questions/670183/accessing-imap-in-c-sharp)解决了一个类似的问题，它的回答是参考我认为最流行的IMAP库。

# objective-c - 为什么这个简单的 NSWindow 创建代码会在 ARC 下关闭时触发自动释放池崩溃？

> ID：13345378
> 
> 赞同：10
> 
> 时间：2012-11-12T14:21:16.947
> 
> 标签：objective-c, macos, crash, automatic-ref-counting, clang

我遇到了关机时自动释放池崩溃的问题，我将其简化为下面的小测试用例，它只是创建一个窗口然后关闭它。如果`-fobjc-arc`国旗被拿走，崩溃就会消失。在 OS X 10.8.2、Clang 4.1 (421.11.66) 上运行。我希望对 ARC 有更深入了解的人可以告诉我这里发生了什么 - 与僵尸对象一起运行表明它是 NSWindow 对象被释放了太多次，或者没有足够的保留，但是我以为 ARC 是用来处理这一切的？

堆栈跟踪是：

```
0   libobjc.A.dylib                 0x00007fff8fad4f5e objc_release + 14
1   libobjc.A.dylib                 0x00007fff8fad4230 (anonymous namespace)::AutoreleasePoolPage::pop(void*) + 464
2   com.apple.CoreFoundation        0x00007fff99d22342 _CFAutoreleasePoolPop + 34
3   com.apple.Foundation            0x00007fff936e84fa -[NSAutoreleasePool drain] + 154
4   com.apple.Foundation            0x00007fff936effa0 _NSAppleEventManagerGenericHandler + 125
5   com.apple.AE                    0x00007fff93a5ab48 aeDispatchAppleEvent(AEDesc const*, AEDesc*, unsigned int, unsigned char*) + 307
6   com.apple.AE                    0x00007fff93a5a9a9 dispatchEventAndSendReply(AEDesc const*, AEDesc*) + 37
7   com.apple.AE                    0x00007fff93a5a869 aeProcessAppleEvent + 318
8   com.apple.HIToolbox             0x00007fff8d0c18e9 AEProcessAppleEvent + 100
9   com.apple.AppKit                0x00007fff8e95c916 _DPSNextEvent + 1456
10  com.apple.AppKit                0x00007fff8e95bed2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
11  com.apple.AppKit                0x00007fff8e953283 -[NSApplication run] + 517
12  Test                            0x00000001070e1d68 main + 152 (Test.mm:31)
13  libdyld.dylib                   0x00007fff8e10c7e1 start + 1 
```

测试用例的代码是：

```
// Tested with `clang++ -fobjc-arc -g Test.mm -framework Cocoa -o Test && ./Test`

#import <Cocoa/Cocoa.h>

@interface MyApplication : NSApplication
@end
@implementation MyApplication
- (void) applicationDidFinishLaunching: (NSNotification *) note
{
    NSWindow * window = [[NSWindow alloc] initWithContentRect: NSMakeRect(100, 100, 100, 100)
                        styleMask: NSTitledWindowMask backing: NSBackingStoreBuffered defer: YES];

    [window close];

    [super stop: self];
}
@end

int main()
{
    @autoreleasepool
    {
        const ProcessSerialNumber psn = { 0, kCurrentProcess };
        TransformProcessType(&psn, kProcessTransformToForegroundApplication);
        SetFrontProcess(&psn);

        [MyApplication sharedApplication];
        [NSApp setDelegate: NSApp];

        [NSApp run];
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-20T10:00:00.237

使用 Instruments 的 Zombies 配置文件显示 NSWindow 对象通过调用`close:`. `applicationDidFinishLaunching:`一旦完成并销毁 NSWindow 实例，ARC 就会正确地以零引用计数结束。但是，自动释放池仍然知道现已失效的 NSWindow 实例，然后在关闭时尝试释放它，从而导致崩溃。

在 ARC 下管理的自动释放对象似乎是个坏主意，除非自动释放池将对其对象的弱引用归零，它似乎在这里没有这样做。

可以通过告诉窗口不要在关闭时自动释放来防止这个问题`[window setReleasedWhenClosed: NO];`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T16:42:52.640

如果您将新创建的对象分配给一个范围大于当前范围的变量，ARC 只会保留它。否则，对象将被泄露。

在您的示例中，您正在`NSWindow`通过调用 alloc 创建一个新实例，它会暂时将所有权转移到局部变量`window`. 由于该变量在方法结束时不再存在，ARC 必须插入`release`调用以避免泄漏窗口实例。结果，该实例不再由任何东西拥有，因此会自行释放。

要解决此问题，请声明一个`NSWindow`具有`strong`语义的类型属性，并将窗口实例传递给属性设置器方法（或直接将其分配给相应的实例变量——两者都可以）。

**编辑**

需要明确的是，您需要做的是将声明的属性（或至少一个实例变量）添加到`MyApplication`，例如

```
@interface MyApplication : NSApplication

@property (strong, nonatomic) NSWindow *window;

@end 
```

然后，在您的实现中`applicationDidFinishLaunching`，设置属性：

```
@implementation MyApplication

- (void) applicationDidFinishLaunching: (NSNotification *) note
{
    NSWindow *window = [[NSWindow alloc] initWithContentRect:NSMakeRect(100, 100, 100, 100)
                        styleMask:NSTitledWindowMask backing:NSBackingStoreBuffered defer:YES];

    self.window = window;

    ...
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:34:03.417

使用 ARC，您需要将属性用于假设可以维持更长时间的事物。

要抽象私有属性，请在 .m 文件中使用匿名类别。

[http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)中有更多信息

这修复了它：

```
@interface MyApplication : NSApplication
@property NSWindow *window;

@end

@implementation MyApplication
- (void) applicationDidFinishLaunching: (NSNotification *) note
{
  self.window = [[NSWindow alloc] initWithContentRect: NSMakeRect(100, 100, 100, 100)
                                                  styleMask: NSTitledWindowMask backing: NSBackingStoreBuffered defer: YES];

  [self.window close];

  [super stop: self];
}
@end

int main()
{
  @autoreleasepool
  {
    const ProcessSerialNumber psn = { 0, kCurrentProcess };
    TransformProcessType(&psn, kProcessTransformToForegroundApplication);
    SetFrontProcess(&psn);

    [MyApplication sharedApplication];
    [NSApp setDelegate: NSApp];

    [NSApp run];
  }

  return 0;
} 
```

希望有帮助。

# javascript - 删除“a”中的文本，但不删除“href”中的文本

> ID：13345384
> 
> 赞同：0
> 
> 时间：2012-11-12T14:21:43.637
> 
> 标签：javascript, jquery, function, cookies, replace

请看看我的网站：[moskah.nl](http://moskah.nl/links.html)

如您所见，有一个预填充的输入。单击“保存”，您将看到 URL 正在保存，旁边有一个网站图标。这样做几次以创建一个列表。

如果您刷新页面，您将看到显示“http://”的部分由于某个功能而被删除：

```
function replace() {
    $("a").text(function(i, h){
     return h.replace('http://', "");
  });  

} 
```

现在的问题是，如果您然后单击列表项（不是 href），您将看到该项目正在被删除。现在，如果您刷新 agian，您将看到所有网站图标都消失了。我认为这是因为“replace”函数也以某种方式删除了“href”部分，这很奇怪，因为我明确表示它应该删除“文本”。那么如何删除没有 favicon 的项目列表呢？（基本上保持其 url(href) 完整）

附言。我不能给你一个关于 jsfiddle 的演示，因为它在那里不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:50:28.107

```
jQuery('a[href^="http://"]', this).each(function () {
    // ...
} 
```

您在此函数中添加 favicon；这意味着如果您的`a`标签的 href 属性不以`http://`它开头，则不会有网站图标。当您使用 jquery cookie 填充列表时：

```
if (cookie){
    var values = $.parseJSON(cookie);
    var li;
    for (var v in values) {
        li = $('<li><a href="' + values[v]+ '">' + values[v] + '</a></li>');
        $('.jq-text').append(li).show();

    }
// ...
} 
```

属性 href 设置为与`a`标签的文本相同：

```
li = $('<li><a href="' + values[v]+ '">' + values[v] + '</a></li>'); 
```

您还必须将 href 属性保存在 cookie 中，或者在`http://`从 jquery cookie 加载时手动添加。

PS：对不起我的英语不好；我希望我所写的内容是可以理解的。

# sql - SQL 事务在 Postgres 9.0 上运行，但在 SQLServer 2005 上中止了一个

> ID：13345390
> 
> 赞同：-3
> 
> 时间：2012-11-12T14:21:55.533
> 
> 标签：sql, sql-server, postgresql, serialization, transactions

假设我们尝试同时运行以下两个事务：

```
T1:
BEGIN
  UPDATE place
  SET state_code=5
  WHERE state_code=6
  AND type='town'
COMMIT

T2:
BEGIN
  UPDATE place
  SET state_code=6
  WHERE state_code=5
  AND type='town'
COMMIT 
```

在 Postgres 9.0 上，事务成功完成。但是，当在 SQLServer 2005 T1 上运行时，T1 会中止，因此所有状态都以 state_code=5 结束。

1.  哪个 DBMS 遵守/不遵守严格的事务序列化，为什么？
2.  每个 DBMS 中可能设置或未设置哪些设置会导致此行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:26:36.220

MS SQL 使用事务语句作为：

```
BEGIN transaction
  UPDATE place
  SET state_code=5
  WHERE state_code=6
  AND type='town'
COMMIT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T00:38:03.463

在 PostgreSQL 中，您可以通过使用表级锁来测试这一点，以确保竞争事务同时运行。设置：

```
CREATE TABLE place (id serial primary key, state_code integer, type text);
INSERT INTO place (state_code, type) VALUES (5, 'town'), (6, 'town'); 
```

然后在会话 T0 中：

```
BEGIN; LOCK TABLE place; 
```

在两个新会话中，发出 T1 和 T2 的命令。

现在回到 T0 问题：

```
ROLLBACK; 
```

释放表级锁并允许 T1 和 T2 竞争。

隔离（默认）两者都将被转置......尽管在`READ COMMITTED`现实世界中这将取决于交易的确切顺序并且不能依赖。

在`REPEATABLE READ`, 中（在 PostgreSQL 9.0 中称为`SERIALIZABLE`隔离），它们都将被转置，与 with 相同的警告，`READ COMMITTED`因为两者对于单语句事务本质上是等效的；快照是在运行第一条语句时拍摄的，而不是在`BEGIN`.

`SERIALIZABLE`孤立地，通过 GUC 或 设置，`default_transaction_isolation`一个`BEGIN TRANSACTION ISOLATION LEVEL SERIALIZABLE`事务将无法提交并出现序列化失败，而另一个事务将成功，导致所有行有`state_code`5，或所有行有`state_code`6，具体取决于哪个事务获胜。

如果 SQL Server 也中止了其中一个事务，那么它正在执行正确的序列化。

SQL Server 遵循正确的序列化（当要求严格序列化时，就像当前版本的 PostgreSQL 一样），而 PostgreSQL 的测试版本设置为`READ COMMITTED`隔离（不应该序列化）或 9.1 之前的`SERIALIZABLE`隔离（无法检测到此异常）并且*不*遵守严格的事务序列化语义。

如果`default_transaction_isolation`设置为除 之外的任何内容，则在 PostgreSQL 9.2 中可能会遇到这种情况`SERIALIZABLE`，并且是 PostgreSQL 9.1 之前的规范。

看起来 SQL Server 使用[`SET TRANSACTION ISOLATION LEVEL`](http://msdn.microsoft.com/en-us/library/ms173763.aspx). 在 PostgreSQL 中，您使用[`default_transaction_isolation`GUC](http://www.postgresql.org/docs/current/static/runtime-config-client.html#GUC-DEFAULT-TRANSACTION-ISOLATION)或[`SET TRANSACTION ISOLATION LEVEL`](http://www.postgresql.org/docs/current/static/sql-set-transaction.html). 尚不清楚 SQL Server 是否允许您在全局范围内设置默认事务隔离级别。

# php - 编码字符串作为参数通过exec发送？

> ID：13345391
> 
> 赞同：0
> 
> 时间：2012-11-12T14:22:13.473
> 
> 标签：php, exec

我需要使用 exec 将简短但不可预测的字符串发送到脚本，但我不知道使用什么编码来发送它们。我尝试了base64，但这不起作用（猜测“=”与它有关）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:23:43.117

使用[`escapeshellarg()`](http://php.net/manual/en/function.escapeshellarg.php)或[`escapeshellcmd()`](http://www.php.net/manual/en/function.escapeshellcmd.php)。

# c++ - 未找到差异类型

> ID：13345392
> 
> 赞同：12
> 
> 时间：2012-11-12T14:22:17.483
> 
> 标签：c++, gcc, gcc4.7

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T14:59:03.983

您是否尝试过定义所有必需的类型/运算符？

```
#include <iterator>

struct nit
{
  typedef std::random_access_iterator_tag iterator_category;
  typedef int value_type;
  typedef int difference_type;
  typedef int* pointer;
  typedef int& reference;

  bool operator==(nit const&)
  {
    return true;
  }

  bool operator!=(nit const&)
  {
    return false;
  }

  int operator-(nit const&)
  {
    return 0;
  }

  nit()
  {
  }
};

int main()
{
  nit const test1;
  std::distance(test1, test1);

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:59:31.110

要么，您必须在您的类中提供 std::iterator_traits 期望的所有类型定义（有或没有 std::iterator 的帮助），或者您必须自己专门化 std::iterator_traits。

[此版本](http://ideone.com/Q3Fcz9)的 GCC 会发出其他错误消息，但不会改变您的代码非法的事实。

```
prog.cpp: In function ‘int main()’:
prog.cpp:9: error: uninitialized const ‘test1’
/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/include/g++v4/bits/stl_iterator_base_types.h: At global scope:
/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/include/g++-v4/bits/stl_iterator_base_types.h: In instantiation of ‘std::iterator_traits<nit>’:
prog.cpp:10:   instantiated from here
/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/include/g++-v4/bits/stl_iterator_base_types.h:133: error: no type named ‘iterator_category’ in ‘class nit’
/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/include/g++-v4/bits/stl_iterator_base_types.h:134: error: no type named ‘value_type’ in ‘class nit’
/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/include/g++-v4/bits/stl_iterator_base_types.h:136: error: no type named ‘pointer’ in ‘class nit’
/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/include/g++-v4/bits/stl_iterator_base_types.h:137: error: no type named ‘reference’ in ‘class nit’
/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/include/g++-v4/bits/stl_iterator_base_funcs.h: In function ‘typename std::iterator_traits<_Iterator>::difference_type std::distance(_InputIterator, _InputIterator) [with _InputIterator = nit]’:
prog.cpp:10:   instantiated from here
/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/include/g++-v4/bits/stl_iterator_base_funcs.h:119: error: no matching function for call to ‘__iterator_category(nit&)’ 
```

# php - 是否可以通过链接发送 php 变量到弹出窗口

> ID：13345394
> 
> 赞同：0
> 
> 时间：2012-11-12T14:22:21.527
> 
> 标签：php, ajax, popup

我怎样才能让这个链接作为一个弹出窗口打开，也许是用ajax？

```
<a href="page.php?catId=<?php $row['catId'];?>&userId=<?php $row['userId']; ?>"> 
```

随着变量转移到弹出窗口。

我很喜欢 ajax 模态弹出窗口，但不知道如何传递 php 变量。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:26:12.187

在 page.php 中，您会得到如下查询字符串：

```
$catId = $_GET['catId'];
$userId = $_GET['userId']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:28:56.370

您可以将链接传递给 javascript：

```
var myHTML= '<html>' +
'<body>' +
'<div>' + page.php?catId=<?php $row['catId'];?>&userId=<?php $row['userId']; ?> + '</div>+
'<!-- other html here -->' +
'</body>' +
'</html>';

var myPopup= window.open('http://www.domain_here.com/mypopup.html','mywindow','width=500,height=500,toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=0');

myPopup.document.open();
myPopup.document.write(myHTML);
myPopup.document.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T14:28:13.787

尝试使用 jQuery 和它的部分称为数据。

```
$.ajax({
  type: "POST",
  url: "some.php",
  data: { name: "John", location: "Boston" }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

[jQuery 阿贾克斯](http://api.jquery.com/jQuery.ajax/)

# c# - Can't write bcp export file from MSSQL

> ID：13345395
> 
> 赞同：0
> 
> 时间：2012-11-12T14:22:25.617
> 
> 标签：c#, sql-server, visual-studio, bcp

Okay. I'm at wit's end and haven't found a posting that addresses my problem completely. I'm new to C# and I'm unfamiliar with databases. What I do know is I must output a data file into a 'native' format (instead of ASCII which is why I assume I must use BCP) and when I run my code, no files are created (and when I do create a file before export, no data is exported to the file).

So, here is my C# code

```
SqlConnection myConn = new SqlConnection("server=localhost\\....;Trusted_Connection=yes;database=...;");
.....
string sp_config = "exec sp_configure 'show advanced options', 1";
command = new SqlCommand(sp_config, myConn);
command.ExecuteNonQuery();

sp_config = "reconfigure";
command = new SqlCommand(sp_config, myConn);
command.ExecuteNonQuery();

sp_config = "exec sp_configure 'xp_cmdShell', 1";
command = new SqlCommand(sp_config, myConn);
command.ExecuteNonQuery();

string bcp_command = "exec xp_cmdShell 'bcp REF_JDLM_DB.." +
                     table_name + " out " + m_destFolder + "\\" + table_name + "-n.dat -n -T'";
command = new SqlCommand(bcp_command, myConn);
command.ExecuteNonQuery();
myConn.Close(); 
```

Everything 'appears' to run find but none of the '-n.dat' files are exported. I'm open to any suggestions that allow me to generate files in the 'native' format.

# java - Log4j_2 和 Socket UDP 附加程序

> ID：13345400
> 
> 赞同：1
> 
> 时间：2012-11-12T14:22:56.993
> 
> 标签：java, sockets, udp, appender, log4j2

我正在尝试创建一个简单的 UDP 服务器来处理来自 Log4j2 Socket appender 的包，但是我从收到的第二个包中得到了“java.io.StreamCorruptedException：无效流标头：7372003E”。

附加器：

```
<Socket name="Socket" host="localhost" port="9500" protocol="UDP" >
    <SerializedLayout /> 
</Socket> 
```

片段 UDP 服务器：

```
public void startSerialized() throws Exception {
    serverSocket = new DatagramSocket(9500);
    LogEvent logEvent = null;
    ObjectInputStream obj = null;
    ByteArrayInputStream bis = null;
    while (true) {
        try {
            receivePacket = new DatagramPacket(packet, packet.length);
            serverSocket.receive(receivePacket);
            bis = new ByteArrayInputStream(receivePacket.getData());
            obj = new ObjectInputStream(bis);
            logEvent = (LogEvent) obj.readObject();
            System.out.println(logEvent.toString());    
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            bis.close();
            obj.close();
        }           
    }
} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T11:47:30.007

我使用了您帖子中的相同代码，但我成功地将调试日志发送到服务器端。下面是我的 log4j2.xml

```
 <Socket name="Socket" host="localHost" port="9092" protocol="UDP" >
        <SerializedLayout />
    </Socket>
</appenders>

<loggers>

    <logger name="rezg.gdsws.util" level="info">
        <appender-ref ref="Socket" />
    </logger>

    <logger name="org.apache" level="debug" />  <!-- Otherwise when we enable debug Apache debugs also printed -->

    <root level="debug">
        <appender-ref ref="STDOUT" />
    </root>
</loggers> 
```

# javascript - 钛设计建议

> ID：13345403
> 
> 赞同：0
> 
> 时间：2012-11-12T14:23:04.040
> 
> 标签：javascript, titanium, appcelerator, commonjs

在学习 Appcelerator Titanium 时，我正在构建一个以包含 2 个标签的 Window 开头的应用程序。这两个标签 (onclick) 应该打开 2 个不同的窗口（每个都包含选项卡组）。

所以，在我的`app.js`我有：

```
Window = require('ui/handheld/ApplicationWindow'); 
```

在我的`ApplicationWindow`功能中：

```
 var window1 = Ti.UI.createWindow({
        backgroundColor:'#ffffff'
    });

    var label = Ti.UI.createLabel({ text: "Open first Window", top:10 });
    window1.add(label);

    var label2 = Ti.UI.createLabel({ text: "Open second Window", top:50 });
    window1.add(label2);

    var window2 = Titanium.UI.createWindow({url:"A.js",backgroundColor:'#00ff00'});
    var window3 = Titanium.UI.createWindow({url:"B.js",backgroundColor:'#ff0000'});

    label.addEventListener("click", function(e) {
    var t = Ti.UI.iPhone.AnimationStyle.CURL_UP;
    window1.animate({view:window2,transition:t},function(){window2.open();});
    });

    label2.addEventListener("click", function(e) {
    var t = Ti.UI.iPhone.AnimationStyle.CURL_UP;
    window1.animate({view:window3,transition:t},function(){window3.open();});
    }); 

    return window1; 
```

第一个问题是：这是一个好的设计吗？是否可以改进？如何？

第二个问题是：有没有办法在过渡结束之前显示我正在打开的页面？目前看来，A.js 和 B.js 中包含的 JS 只有在动画停止时才会执行。

谢谢，欢迎任何帮助，并对新手问题感到抱歉。

[编辑] 这是 Ch4rAss 评论后我当前的代码：

```
function ApplicationWindow() {

    var root = Ti.UI.createWindow({
        backgroundColor:'#ffffff'
    });

    var label = Ti.UI.createLabel({ text: "Open first Window", top:10 });
    root.add(label);

    var label2 = Ti.UI.createLabel({ text: "Open second Window", top:50 });
    root.add(label2);

    var win2 = require('ui/handheld/Win2');
    var win3 = require('ui/handheld/Win3');

    label.addEventListener("click", function(e) {
    var t = Ti.UI.iPhone.AnimationStyle.CURL_UP;
    win2.open({transition:t});
    });

   label2.addEventListener("click", function(e) {
   var t = Ti.UI.iPhone.AnimationStyle.CURL_UP;
    win3.open({transition:t});
   }); 

    return root;
}

module.exports = ApplicationWindow; 
```

和：

```
function Win2(){
        /* You can (of course) do more than this */
        return Ti.UI.createWindow({backgroundColor:'#00ff00'});
    }
module.exports = Win2; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:15:13.170

您应该将动画添加到`open()`方法中，以便在动画期间打开窗口：

```
window1.open({transition:Titanium.UI.iPhone.AnimationStyle.CURL_UP}); 
```

我建议为每个窗口使用单独的文件并使用 CommonJS `require()`。与您使用相同的方法 for `ApplicationWindow`。在您创建两个窗口并将它们加载到内存而不使用它们的那一刻！更好的是：

```
var Win1 = require('ui/handheld/WhateverWindow');
label.addEventListener("click", function(e) {
   var win1 = new Win1();
   win1.open({transition:Titanium.UI.iPhone.AnimationStyle.CURL_UP});
}); 
```

和`ui/handheld/WhateverWindow.js`

```
(function() {
    var WhateverWindow = function() {
        /* You can (of course) do more than this */
        return Ti.UI.createWindow({backgroundColor:'#00ff00'});
    }
    module exports = WhateverWindow;
})(); 
```

[你可以在这里](https://wiki.appcelerator.org/display/guides/CommonJS+Modules+in+Titanium)阅读更多。

# php - 使用多个自动加载器 php

> ID：13345406
> 
> 赞同：16
> 
> 时间：2012-11-12T14:23:12.540
> 
> 标签：php, autoloader

您好，我正在尝试将 SILEX 微框架与我自己的充满类的库一起使用，因此我被 2 个加载器卡住了，导致加载器无法加载类的错误。有没有办法同时使用这 2 个加载器没有得到这个错误？

我使用的加载器可以在下面找到：

```
 <?php

/*
 * Loader
 */

function my_autoloader($className) 
{
// haal de base dir op.
  $base = dirname(__FILE__);

  // het pad ophalen
  $path = $className;

  // alle paden samenvoegen tot waar ik zijn moet en de phpfile eraan plakken.
  $file = $base . "/lib/" . $path . '.php';       

  // als file bestaat haal op anders error
  if (file_exists($file)) 
  {
      require $file;
  }
  else 
  {
      error_log('Class "' . $className . '" could not be autoloaded');
      throw new Exception('Class "' . $className . '" could not be autoloaded from: ' . $file); 
  }
}

spl_autoload_register('my_autoloader');

?> 
```

silex 使用的加载器位于供应商目录中（来自框架本身）

这就是我的文件树的样子：

![文件树](../Images/4155cc222af718987d8a825b60cb7895.png)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-12T14:25:33.407

不要在自动加载器函数中抛出错误。 `spl_autoload_register`允许 php 按顺序遍历所有已注册的自动加载器，但如果您在该过程的中间抛出未捕获的错误，则无法尝试下一个自动加载器。

[http://php.net/spl_autoload_register](http://php.net/spl_autoload_register)

# ruby-on-rails - 如何在 Rails 中存储许多可选字段？

> ID：13345408
> 
> 赞同：3
> 
> 时间：2012-11-12T14:23:14.320
> 
> 标签：ruby-on-rails, database-design, activerecord

我正在开发一个显示**Products**的应用程序。每个产品都是一个模型（产品），其中包含一些常见信息，如名称、品牌等。为了区分我们正在查看的产品类型，我们有一个**product_type**（如：电话、电视、沙发等），它基本上是一个 tinyint 字段（例如 1 = 电话，2 = 电视）。

现在，**根据 product_type，每个产品可以有不同的选项**：如果是手机，产品应该有相关的额外信息（比如重量，是否有 LTE，是否有前置摄像头等），电视应该有类似的信息显示尺寸等。

**我的问题是：根据产品的类型，将这些额外数据添加到产品的*最佳/或/最简单的方法是什么？***

我正在考虑有一个额外的模型ProductOptions 字段 product_id、 **option_type**、option_value (VARCHAR) 将存储额外的字段，但我不确定这对于性能和搜索是否是可选的。在这种情况下，搜索意味着查找所有符合给定条件（例如`po = ProductOption.where(:option_type => "LTE", :option_value => "yes")`）的 ProductOptions，然后执行 a`Product.findAllIn(po)`以查找实际产品。

或者我应该使用 Postgres 并使用 HStore？搜索时 HStore 效率高吗？

有任何想法吗？

*Rails 新手，所有代码都是伪代码*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:40:22.303

如果您已经在查看 ProductType，您可能会创建此[单表继承](http://code.alexreisner.com/articles/single-table-inheritance-in-rails.html)并实际定义不同的产品类型。无论如何，这将更容易编码。在这种情况下：

```
class Product < ActiveRecord::Base
  # common functionality goes here
end

class Sofa < Product
  # sofa specific functionality goes here
end 
```

然后，您可以将所有选项放在产品表上，但对于不同的产品类型有不同的 attr_accessible、验证和视图。

这个设置最好的部分是它在rails中“正常工作”，你所要做的就是`type`在产品表上放一列。此外，它还可以让您找到所有沙发，如下所示：

```
Sofa.all 
```

所有的一切都是这样

```
Product.all 
```

就数据库性能而言，您最终会得到相当多的空字段，但您的所有属性都是可搜索的（与序列化不同），您只需要在一个表上进行查询。所以，我希望这能胜过我所知道的任何其他选择。

另外，它很好而且面向对象。:)

祝你好运，欢迎来到 Rails！

# javascript - 如何在 iOS6 上从浏览器访问 IFA

> ID：13345414
> 
> 赞同：7
> 
> 时间：2012-11-12T14:23:47.253
> 
> 标签：javascript, ios, web-applications, ios6

[网络上到处都有](http://www.businessinsider.com/ifa-apples-iphone-tracking-in-ios-6-2012-10)关于 iOS6 上介绍的广告商标识符 (IFA) 的文章。如何从 WebApplication 访问它（即从在移动浏览器中运行的 Javascript）？

实际上，任何用于跟踪用户上下文以了解广告相关性的有效/格式良好的方式都将受到欢迎。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T15:50:32.790

根据这篇文章，无法在浏览器中访问 Ad-ID：

[http://blog.adfonic.com/advertisers-2/ios-6-for-mobile-advertising-part-one-smarter-identification-through-ifa/](http://blog.adfonic.com/advertisers-2/ios-6-for-mobile-advertising-part-one-smarter-identification-through-ifa/)

> ...
> 
> Apple 设备上的设备识别——这是移动广告生态系统中非常重要的一部分——仍未完全解决。**IFA 仍然只能在应用内使用**，不能在浏览器中使用，因此转化跟踪大战将继续。
> 
> 在过渡完全发生之前，转化跟踪将不如预期的那么优雅和有效。虽然这不是一个大问题，但我们希望看到这个问题一劳永逸地解决。人们对 UDID 安全漏洞感到害怕，因此识别的复杂性越低越好。
> 
> ...

# javascript - Blackberry Webworks：触摸屏的奇怪滚动行为

> ID：13345417
> 
> 赞同：1
> 
> 时间：2012-11-12T14:24:02.880
> 
> 标签：javascript, blackberry, scroll, blackberry-webworks

在我的 Blackberry Webworks 应用程序（适用于 Smartphones OS 6、7、7.1）中，我有一些这样的代码：

```
<div style="width:100%; height:100%; overflow:hidden;">
    <div style="overflow:auto;height:100px;width:100%;">
        <ul>
            <li>Some</li>
            <li>Items</li>
            <li>that</li>
            <li>needs</li>
            <li>the</li>
            <li>div</li>
            <li>to</li>
            <li>be</li>
            <li>scrolled</li>
        </ul>
    </div>
</div> 
```

当尝试使用触摸手势滚动 div 时，我总是必须先触摸 div 元素一次（如单击），然后才能滚动手势起作用。所以我必须触摸它然后滚动它，如果我想再次滚动（即使两者之间没有任何其他内容）我必须再次触摸它然后我可以再次滚动。

换句话说：触摸手势在我每次尝试时都会起作用（如果我在两者之间没有触摸其他任何东西）。

这种行为真的很奇怪，并且降低了可用性。

您对我如何改变这种行为有任何想法吗？

我尝试听触摸事件（touchstart 和 touchmove）并自己滚动 div 并且以某种方式工作，但是如果您的手势非常快并且它也会影响点击事件，那么您没有那种本机滚动行为，它会继续滚动不知何故（我不知道为什么），但它们不像以前那么好用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:39:35.200

尝试移除外部容器`div`并将其更改`overflow:auto`为`overflow:hidden`.

我发布此页面是为了了解如何将不同的滚动行为添加到 WebWorks 应用程序中。它可能对你有帮助：http: [//blackberry.github.com/WebWorks-Samples/kitchenSink/html/css3/overflow.html](http://blackberry.github.com/WebWorks-Samples/kitchenSink/html/css3/overflow.html)

我知道在 WebWorks 容器中使用 CSS 时需要指定固定高度。height:100% 的行为与您预期的不同（BrowserField 不会自动扩展为屏幕的 100%，但它会扩展为例如 200px）。

# android - 自动生成/编辑 android manifest

> ID：13345418
> 
> 赞同：4
> 
> 时间：2012-11-12T14:24:05.680
> 
> 标签：android

我只是想知道是否已经有带有注释、ant 脚本或 smth 的解决方案。我只是觉得用所有必要的字段手动填充 manifest.xml 文件很烦人。我需要它，因为我拥有非常复杂的架构，其中包含许多库项目和普通的 android 项目。由于库项目清单文件几乎被忽略，因此很难在库项目之一的每次更改后将所有项目清单保持在适当的状态。

PS如果你不知道答案，请不要给我google.com和developers.android.com的链接，我已经去过那里了。

PSS 我使用想法，我知道它可以自动更改清单文件，但技巧不适用于库项目。

提前致谢。

# asp.net - 在 IE 中无法点击链接内的 div 内的图像

> ID：13345423
> 
> 赞同：0
> 
> 时间：2012-11-12T14:24:23.667
> 
> 标签：asp.net, html, css

我在 ASP.NET 中有以下代码。

问题是这个 HyperLink(hpRecord) 适用于“posts_listDiv”的所有表面，除了在 IE 9 中不可点击的两个图像。

我测试了该代码，并且在除 Internet Explorer 之外的所有浏览器中都能正常工作。

```
<asp:Repeater ID="RepeaterCategories" runat="server">
       <ItemTemplate>                 
         <asp:HyperLink ID="hpRecord" runat="server" NavigateUrl='link'>               
           <div id="posts_listDiv" class="posts_listDiv">                                                         

             <div id="pict1Div" class="pict1Div">
                 <asp:Image ID="picture" runat="server" Width="100px"  Height="80px" ImageUrl='link'/>
             </div>                                                                                      

              <div id="pict2Div" class="pict2Div">
                 <asp:Image ID="pict2" runat="server"  Width="100px"  Height="80px" ImageUrl='link'/>                                            
               </div> 

               <div id="detailsDiv" class="detailsDiv">  
                   <%--text--%>                     
                   <%# Eval("...")%>                    
                   <br />                                                                                                                
                   <%--by user--%>                   
                   <i style="color:blue"><%# Eval("FirstName") %> </i>
                </div>
             </div>                
          </asp:HyperLink>                
       </ItemTemplate>   
     </asp:Repeater> 
```

这是“posts_listDiv”的 CSS：

```
.posts_listDiv
{
     background-color:red;
     margin-left:5px;
     float:left;
     width:232px;
     height:171px;
     word-wrap: break-word;
     font-size:14px;
     margin-left:8px;
     margin-top:10px;         
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:13:03.340

将样式添加到“posts_listDiv”父 div。

```
.parent {
    display: block;
} 
```

# sql-server - VB.Net 4.0 SQL Server 存储过程

> ID：13345425
> 
> 赞同：1
> 
> 时间：2012-11-12T14:24:35.657
> 
> 标签：sql-server, vb.net, visual-studio-2010, stored-procedures

第一次海报。我目前正在开发一个课程网站，我最终希望发布并使用该网站。

该网站的基本前提是用户可以注册一个新帐户，然后使用该帐户登录。我使用 Visual Studio 2010 构建了网站，并使用了他们的登录控件（登录、登录状态、createuserwizard）等。

显然，当我创建一个新用户（根据向导）时，它会在某处写入并保存数据，但我不确定在哪里。我创建了一个名为的数据库`Users`，我想获取输入的信息（名字、姓氏、电子邮件等）并将其写入`Users`数据库。在四处搜索之后，我必须使用存储过程，然后在单击“注册”按钮时调用该存储过程。

任何人都可以阐明这个存储过程的外观以及我将如何称呼它吗？只是基本语法会有所帮助，我可以自己填写我正在写入数据库的具体细节。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:37:19.687

您的默认连接可能是 LocalSqlServer 并在机器配置中设置。

要明确地将其设置为此，您可以将以下内容添加到您的 Web 配置中。请注意清除默认值的第一部分。（这应该让您连接到同一个数据库，您只是明确设置它而不是使用默认值）

```
<system.web>
            ...

                <membership 
                 defaultProvider="SqlProvider" userIsOnlineTimeWindow="20">
                 <providers>
                    <clear/>
                    <add name="SqlProvider"
                        type="System.Web.Security.SqlMembershipProvider"
                        connectionStringName="LocalSqlServer"
                        enablePasswordReset="true"
                        requiresQuestionAndAnswer="false"
                        requiresUniqueEmail="false" />
                        maxInvalidPasswordAttempts="5"
                        passwordAttemptWindow="10"
                        passwordFormat="Hashed"
                        minRequiredPasswordLength="7"
                        minRequiredNonAlphanumericCharacters="0"
                        passwordStrengthReqularExpression="0"
                        enablePasswordRetrieval="false"
                        applicationName="/" />
                </providers>
            </membership>
            ...
        </system.web> 
```

要覆盖它，请参见 [SqlMembershipProvider：使用我自己的数据库作为用户存储数据库](https://stackoverflow.com/questions/2333705/sqlmembershipprovider-use-my-own-database-as-user-store-database)

# magento - Magento 覆盖客户资源模型

> ID：13345431
> 
> 赞同：12
> 
> 时间：2012-11-12T14:25:08.327
> 
> 标签：magento, resources, overriding

我试图覆盖

```
app\code\core\Mage\Customer\Model\Resource\Customer.php 
```

使用这个 xml：

```
<models> 
    <customer_resource>
        <rewrite>
            <customer>My_Company_Model_Resource_Customer</customer>
        </rewrite>
    </customer_resource>     
</models> 
```

但我明白了

```
Mage registry key "_resource_singleton/customer/customer" already exists 
```

与

```
 <customer>
            <rewrite>
                <customer_resource>My_Company_Model_Resource_Customer</customer_resource>
            </rewrite>
        </customer> 
```

或者

```
 <models>
        <customer>
            <rewrite>
                <resource_customer>My_Company_Model_Resource_Customer</resource_customer>
            </rewrite>
        </customer>
    </models> 
```

没发生什么事

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-12T15:47:35.427

您应该能够使用您拥有的代码来完成它。如果它没有被覆盖，请尝试一些基本操作，例如确保您已清除缓存。如果这仍然不起作用，您可能正在与另一个已经覆盖它的模块进行斗争。在这种情况下，您需要弄清楚接下来的步骤来确定哪一个获胜：合并逻辑、重写/扩展另一个等等。

```
<models>
    <customer_resource>
        <rewrite>
            <customer>My_Company_Model_Resource_Customer</customer>
        </rewrite>
    </customer_resource>
</models> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T15:58:45.233

我使用以下 xml 做到了（在 1.7.0.2 中）：

```
<?xml version="1.0" encoding="UTF-8" ?>
<config>
<modules>
    <Final_Dummy>
        <version>0.0.1</version>
    </Final_Dummy>
</modules>
<frontend>
    <routers>
        <dummy>
            <use>standard</use>
            <args>
                <module>Final_Dummy</module>
                <frontName>dummy</frontName>
            </args>
        </dummy>
    </routers>
</frontend>
<global>
    <helpers>
        <dummy>
            <class>Final_Dummy_Helper</class>
        </dummy>
    </helpers>
    <models>
        <dummy>
            <class>Final_Dummy_Model</class>
            <resourceModel>dummy_resource</resourceModel>
        </dummy>
        <dummy_rsource>
            <class>Final_Dummy_Model_Resource</class>
            <deprecatedNode>dummy_mysql4</deprecatedNode>
        </dummy_rsource>
        <customer_resource>
            <rewrite>
              <customer>Final_Dummy_Model_Resource_Customer</customer>
            </rewrite>
        </customer_resource>
    </models>
</global>
</config> 
```

为了确保它确实有效，我创建了以下类：

```
<?php
class Final_Dummy_Model_Resource_Customer extends Mage_Customer_Model_Resource_Customer{
    public function amIHere(){
        return 'Yes sir';
    }
}
?> 
```

并像这样在我的模块控制器中调用资源

```
<?php
class Final_Dummy_IndexController extends Mage_Core_Controller_Front_Action{
    public function indexAction(){
        $res=Mage::getResourceModel('customer/customer');
        die($res->amIHere());
    }
}
?> 
```

结果是：

> 是的先生

我希望这些代码能以某种方式帮助你。记得清除缓存，我建议在开发阶段禁用 Magento 编译器。

# visual-studio-2010 - VSInstallDir 丢失

> ID：13345435
> 
> 赞同：3
> 
> 时间：2012-11-12T14:25:16.387
> 
> 标签：visual-studio-2010

我正在使用 VS 2010 和 Windows 7。我正在尝试为 3D 图形中的一个类运行作业问题，但是当我尝试运行下载的作业程序时，我收到此错误：“VSInstallDir is missing or empty”。当我单击解决方案的属性时，我找不到输入此变量的位置。家庭作业是由于 12/19，所以有一点时间紧迫。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T16:44:56.263

它可能引用名为“VSInstallDir”的环境变量

如果您的作业程序使用命令行 Visual Studio 工具，您可以尝试从“Visual Studio 命令提示符”运行它（使用 Windows 开始菜单搜索它）。

另一种选择是使用系统属性（Windows Key + Break 键盘快捷键）在 Windows 中手动添加它，转到高级、环境变量、用户变量并将其添加到那里。如果您有 64 位 Windows，它的值应该是 'c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\' 没有引号，或者如果您有 'c:\Program Files\Microsoft Visual Studio 10.0\VC\'已安装 32 位 Windows。为此，您必须重新启动 Visual Studio。

# python - Python 递归回溯变量

> ID：13345445
> 
> 赞同：1
> 
> 时间：2012-11-12T14:25:39.077
> 
> 标签：python, recursion

我正在写一些递归函数。考虑它的原型是：

```
def path(a, row=0, col=0, weight=0, cumulative=[]) 
```

我试图在矩阵中找到一些路径`a`。到目前为止，权重添加了该路径的值，并且累积跟踪路径。

在某些时候，它被调用：

```
return path(a, row+1, col, weight, cumulative) + path(a, row+1, col+1, weight, cumulative) 
```

现在基本情况如下：

```
cumulative.append(a[row][col])
weight = weight + a[row][col]
return weight 
```

它将当前矩阵元素添加到累积中，添加权重并返回权重。问题是每次`cumulative`调用 append 时，它都会添加到`cumulative`. 如何确保每个递归堆栈帧采用不同的副本`cumulative`？

因此，当在基本情况下调用 append 时，我希望累积调用的值是帧调用者，而不是前一个递归堆栈帧。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:31:42.363

您可以使用累积副本调用：

```
return path(a, row+1, col, weight, list(cumulative)) + 
       path(a, row+1, col+1, weight, list(cumulative)) 
```

# c# - 使一个对象向另一个对象位置移动

> ID：13345446
> 
> 赞同：2
> 
> 时间：2012-11-12T14:25:42.673
> 
> 标签：c#, game-physics

我目前拥有的是两个可以通过导航键播放的对象，另一个可以通过 wasd 播放。重点是拿到第3个物体并得分，抓到后随机出一个新的pos，这行得通。

现在......我希望 npc2 不再被人类控制，并创建一个方法让它自己向得分对象移动。我怎么可能做到这一点？我是 C# 的新手 :)

下面的 FORM.cs

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace SPEL
{
    public partial class Form1 : Form
    {
        npc npc1 = new npc();
        npc npc2 = new npc();
        sten ste1 = new sten();
        int poang1 = 0;
        int poang2 = 0;
        private _keyControl cc = new _keyControl();

        public Form1()
        {
            SetStyle(ControlStyles.UserPaint, true);
            SetStyle(ControlStyles.AllPaintingInWmPaint, true);
            SetStyle(ControlStyles.OptimizedDoubleBuffer, true);
            InitializeComponent();

            // Hantera tangentbordet
            #region captute evenents
            this.KeyDown += new System.Windows.Forms.KeyEventHandler(cc.addKey);
            this.KeyUp += new System.Windows.Forms.KeyEventHandler(cc.delKey);
            #endregion
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void Form1_Paint(object sender, PaintEventArgs e)
        {
            npc1.Rita(e.Graphics);
            npc2.Rita(e.Graphics);
            ste1.Draw(e.Graphics);

        }

        private void Form1_KeyDown(object sender, KeyEventArgs e)
        {
            //MessageBox.Show(e.KeyData.ToString());

        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            //spelare 1
            this.Text = cc.keyStr;
            if (cc.getKey("Right"))
            {
                npc1.Flytta("Right");
                this.Invalidate();
            }
            if (cc.getKey("Left"))
            {
                npc1.Flytta("Left");
                this.Invalidate();
            }
            if (cc.getKey("Up"))
            {
                npc1.Flytta("Up");
                this.Invalidate();
            }
            if (cc.getKey("Down"))
            {
                npc1.Flytta("Down");
                this.Invalidate();
            }
                //Spelare 2
                if (cc.getKey("D"))
                {
                    npc2.Flytta("Right");
                    this.Invalidate();
                }
                if (cc.getKey("A"))
                {
                    npc2.Flytta("Left");
                    this.Invalidate();
                }
                if (cc.getKey("W"))
                {
                    npc2.Flytta("Up");
                    this.Invalidate();
                }
                if (cc.getKey("S"))
                {
                    npc2.Flytta("Down");
                    this.Invalidate();
                }

            if (npc1.checkkoll().IntersectsWith(ste1.checkkoll()))
            {
                poang1++;
                ste1.randomxy(this.Width -30, this.Height -30);

            }
            if (npc2.checkkoll().IntersectsWith(ste1.checkkoll()))
            {
                poang2++;
                ste1.randomxy(this.Width -30, this.Height -30);
            }

        }

        private void timer2_Tick(object sender, EventArgs e)
        {
            if (this.BackColor == Color.Red)
                this.BackColor = Color.Blue;
            else
                this.BackColor = Color.Red;
        }

        private void flytta_Tick(object sender, EventArgs e)
        {

            }
        }
    }
} 
```

这是我的运动课

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Drawing;

namespace SPEL
{
    class npc
    {
        private Bitmap strid;
        private Point pt;
        public npc()
        {
            strid = new Bitmap("hej.gif");

            pt.X = 20;
            pt.Y = 20;

        }

        public void Rita(Graphics f)
        {
            Rectangle re = new Rectangle(pt.X, pt.Y, strid.Width, strid.Height);
            f.DrawImage(strid, re);
        }

        public Rectangle checkkoll()
        {
            Rectangle re = new Rectangle(pt.X, pt.Y, strid.Width, strid.Height);
            return re;
        }

        public void Flytta(string dir)
        {

            if (dir == "Left")
            {
                pt.X = pt.X - 2;
            }
            if (dir == "Right")
            {
                pt.X = pt.X + 2;
            }
            if (dir == "Up")
            {
                pt.Y = pt.Y - 2;
            }
            if (dir == "Down")
            {
                pt.Y = pt.Y + 2;
            }
        }

    }
} 
```

我确实知道要求很多，但如果您能帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:57:19.770

尝试这样的事情

```
 public void FlyttaMot(int x, int y, float speed)
    {
        float tx = x - pt.X;
        float ty = y - pt.Y;
        float length = Math.Sqrt(tx*tx + ty*ty);
        if (length > speed)
        {
            // move towards the goal
            pt.X = (int)(pt.X + speed* tx/length);
            pt.Y = (int)(pt.Y + speed* ty/length);
        }
        else
        {
            // already there
            pt.X = x;
            pt.Y = y;
        }
    } 
```

例如，从您的计时器滴答代码中调用它`Form.cs`。

```
npc2.FlyttaMot(200, 200, 0.5f); 
```

我基于线性代数。例如，看看这个[视频](http://www.youtube.com/watch?v=gwk-XGfHR8U)。是npc 应该去的方向*的*`(tx,ty)`向量。除以向量的长度，我们得到一个长度为 1 的向量。我将它与速度参数相乘，这样你就可以调整 npc 的速度。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:41:32.313

最简单、最准确的方法，就是依靠矢量几何。

定义类

```
public class Vector2 {

     public float x {get;set;}; 
     public float y {get;set;}; 

     public Vector2(float a_x, float a_y, float b_x, float b_y)
     {
        x = b_x - a_x;
        y = b_y - a_y;
     }

     //calculate vector length
     public float Length {
          get {
               return Math.Sqrt((x * x) + (y * y));
          }
     }

     public void SetVectorLength(float desiredLength){
            double r = desiredLength/ this.Length;
            this.x *= r;
            this.y *= r;
     }

} 
```

这只是*这种*情况下的一组函数，但您可以添加其他函数，其中很多函数需要您的计算的各个部分。

在你要做的只是，计算你的顶点*朝向*方向向量的下一个位置。

```
//hypothetical X coordinate
float x_coord = 1.34f; 

//move towards the vector 
var vector = new Vector2(10, 10, 20, 20);

//set vector move step 
vector.SetLength(0.1f);

var movedX = x_coord + vector.x; 
```

**重复**：这只是假设的示例，您需要对此进行处理。很难将所有相关的矢量几何东西都放在小答案中。*

# visual-studio - 在 Visual Studio 中调试其余程序时，我可以优化程序的一部分以提高速度吗？

> ID：13345447
> 
> 赞同：0
> 
> 时间：2012-11-12T14:25:44.457
> 
> 标签：visual-studio, debugging

我正在尝试调试程序，但在调试模式下初始化（加载数据）需要很长时间（超过 10 分钟），而在发布模式下需要几毫秒。

有没有一种简单的方法可以在发布模式下编译不重要的 cpp 文件，而在调试模式下编译程序的其余部分？我尝试将 cpp 文件的属性从 Optimization 更改为`Disabled (/Od)`，`Maximize Speed (/O2)`但随后出现此错误`1>cl : Command line error D8016: '/O2' and '/RTC1' command-line options are incompatible`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-11T12:39:15.873

是的你可以。假设您实际上有不同的项目并且它们生成动态链接库 (dll)，没有什么能阻止您将一些项目切换到发布模式和其他项目进行调试。不太确定这是否也适用于静态链接库。

很高兴知道您可以通过在链接阶段打开调试符号来调试您的优化速度构建 (project->properties->linker->debuggin->"Generate debug info":"optimize for debugging ”。它不会显示所有变量，也不会让您跳入内联函数，但它确实可以让您调试慢速程序。

# javascript - Riak 在 MapReduce 查询中失败。使用哪种配置？

> ID：13345448
> 
> 赞同：6
> 
> 时间：2012-11-12T14:25:46.517
> 
> 标签：javascript, database, mapreduce, riak

我正在结合 riak / riak-js 开发 nodejs 应用程序并遇到以下问题：

运行此请求

```
db.mapreduce
  .add('logs')
  .run(); 
```

正确地返回存储在存储桶日志中的所有 155.000 个项目及其 ID：

```
[ 'logs', '1GXtBX2LvXpcPeeR89IuipRUFmB' ],
[ 'logs', '63vL86NZ96JptsHifW8JDgRjiCv' ],
[ 'logs', 'NfseTamulBjwVOenbeWoMSNRZnr' ],
[ 'logs', 'VzNouzHc7B7bSzvNeI1xoQ5ih8J' ],
[ 'logs', 'UBM1IDcbZkMW4iRWdvo4W7zp6dc' ],
[ 'logs', 'FtNhPxaay4XI9qfh4Cf9LFO1Oai' ],
.... 
```

如果我指定一个 map-Funktion 并且只使用存储桶日志中的几个项目

```
db.mapreduce
  .add([['logs', 'SUgJ2fhfgyR2WE87n7IVHyBi4C9'], ['logs', 'EMtywD1UFnsq9rNRuINLzDsHdh2'], ['logs', 'ZXPh5ws8mOdASQFEtLDk8CBRn8t']])
  .map( function(v) {return ["asd"]; } )
  .run(); 
```

一切正常，并返回以下预期输出：

```
[ 'asd', 'asd', 'asd' ] 
```

如果我现在想要 riak 映射存储桶“日志”中的所有项目（大约 155.000 个小型 json 文档）

```
db.mapreduce    
  .add('logs')  
  .map( function(v) {return ["asd"]; } )    
  .run(); 
```

我只收到错误：

```
{ [Error: [object Object]] message: '[object Object]', statusCode: 500 } 
```

这里会发生什么？在错误对象中没有写任何有用的东西。

更新：riak-console 多次说以下内容：

```
[notice] JS call failed: All VMs are busy. 
```

将 riaks app.config 中的 map_js_vm_count 增加到 36 后，消息变为：

```
[error] Pipe worker startup failed:fitting was gone before startup 
```

链接： [Basho Labs Riak 驱动程序 riak-js](http://basho-labs.github.com/riak-js/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T09:51:52.867

**来自 basho.com 的 Bryan 回答了我的问题：**

你好，科尼利厄斯。你能描述一下，你的Riak配置吗？具体来说，您的集群中有多少个节点，您的 app.config 中的 ring_creation_size 是多少？

例如，如果您在单节点开发集群上使用默认设置 {ring_creation_size, 64}，则很可能会出现这种情况。155,000 个项目足以让所有 64 个 vnode 正常工作。

在第一种情况下，在提高 map_js_vm_count 之前，这 64 个 vnode 只在争夺 8 个 Javascript VM，因此有些可能会饿到足够长的时间以超时，这将导致“所有 VM 都忙”的日志消息。

在第二种情况下，在提高 map_js_vm_count 之后，这 36 个 Javascript VM 很可能无法在查询超时到达之前处理所有 155,000 个项目。“启动前配件已消失”日志消息表明运行查询的管道在仍有输入到达 vnode 时关闭。

在没有地图功能的简单情况下，您不会看到这些行为中的任何一种，因为不需要与 Javascript VM 交互。此外，在这种情况下，甚至不会从磁盘中读取对象，从而进一步减轻了资源争用。

我期望最有帮助的两个配置解决方案是降低 ring_creation_size 和提高查询超时。在单节点集群上将 ring_creation_size 降低到 16 甚至 8 会减少 Javascript VM 的争用，因为在 map 函数处理中尝试的并行性会减少。提高查询超时（应该是 'run' 函数的参数，或类似的，但我不熟悉 riak-js 客户端），将使查询有更多时间在关闭之前完成，这可能是必要的克服缓慢的处理。

在 Erlang 中重写你的 map 函数也应该会有所帮助，因为它会更快，并且不会有相同类型的 VM 争用。但是，我理解，这在早期开发中并不容易使用。

HTH，布莱恩

# javascript - 在N级javascript中调用对象属性

> ID：13345449
> 
> 赞同：-1
> 
> 时间：2012-11-12T14:25:51.977
> 
> 标签：javascript, object

我正在使用 mongodb 和 ajax 调用来检索数据。当它转向 javascript 对象时，我用来生成 html 的属性有时不存在。看看这个调用：

```
$.ajax({
        url: 'api/v1/mention/'+id,
        type: "GET",
        dataType: "json",
        data : {login : "demo"},
        success: function(mention) {
            display_mention_text(mention.texto);
        }
    }); 
```

在这种情况下，我调用的是mention.texto，但可以是mention.picture 或任何属性。有时它是未定义的并导致应用程序崩溃。

此方法从对象调用属性，如果它未定义，则返回一个空字符串。调用此方法的一些示例（第一个是对象，另一个是属性）：

```
get_property(mention,"text")
get_property(mention,"user","name")
get_property(mention,"picture") 
```

该方法定义如下：

```
function get_property(obj){
    var args = Array.prototype.slice.call(arguments),
     obj = args.shift();
    if (checkNested(obj,args)) {
       //what should I do here?
    } else{
                   //the property is undefined and returns ""
        "";
    };
}

    //check if a object has N levels of propertys
function checkNested(obj /*, level1, level2, ... levelN*/) {
  var args = Array.prototype.slice.call(arguments),
      obj = args.shift();

  for (var i = 0; i < args.length; i++) {
    if (!obj.hasOwnProperty(args[i])) {
      return false;
    }
    obj = obj[args[i]];
  }
  return true;
} 
```

在第一个方法get_property中，如果属性确实存在，我该如何称呼它？我会将对象和他的属性作为一个数组，例如：对象

```
params = ["user","name"] 
```

但我不能像下面这样打电话：

```
object.["user","name"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:57:32.157

用函数中的循环替换函数`if`中的语句。然后不是返回or ，而是返回找到的值 or 。`get_property``for``checkNested``true``false``""`

```
function get_property(obj){
    var args = Array.prototype.slice.call(arguments),
        obj = args.shift();

     // Here's your 'for' loop. The 'if' statement is gone.
    for (var i = 0; i < args.length; i++) {
        if (!obj.hasOwnProperty(args[i])) {
          return "";   // I changed the value of this 'return' statement
        }
        obj = obj[args[i]];
    }
    return obj;  // I change the value of this 'return' statement
} 
```

同样，我所做的只是将您自己的代码从一个函数复制粘贴到另一个函数，然后更改`return`语句的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:54:48.627

您可以通过这种方式实现您的目标（不需要`checkNested`功能）：

```
//Parameters    {obj, prop1, prop2, ... propN}
function get_property(){
    var args = Array.prototype.slice.call(arguments),
       obj = args.shift(),
       prop = args.shift();

    if( obj.hasOwnProperty(prop) ){
        if( args.length > 0 ){
           //Calling 'get_property' with  {obj[prop1], prop2, ... propN} , and so on
           return get_property.apply(get_property, [obj[prop]].concat(args));
        }else{
           return obj[prop];
        }
    }else{
        return "";
    }
}​ 
```

*用法：*

```
var o = {
    "a" : {
        "b" : 5
    }
};

console.log( get_property(o,"c") );        //  ""
console.log( get_property(o,"a","b") );    //  5
console.log( get_property(o,"a") );        //  {"b":5} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T14:55:05.507

您只是在寻找一个简单的递归函数。

```
function get_property(obj, prop) {
    if (obj[prop]) {
        return obj[prop];
    }
    else {
        var end;
        for (var p in obj) {
            if (obj.hasOwnProperty(p)) {
                end = get_property(obj[p], prop);
            }
        }
        if (!end) {
            // If we're there, it means there's no property in any nested level
            return;
        }
        else {
            return end;
        }
    }
} 
```

编辑：看起来我误解了你的问题。请参阅@Engineer 的答案。保留这个答案，以防有人看起来像这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T14:56:58.437

你把事情复杂化了。如果您知道对象的树，只需调用：

```
obj['user']['name']; 
```

如果您期待未定义的属性（实际上，这意味着还有其他问题）：

```
var prop;
try {
    prop = obj.user.name;
}
catch (e) {
    prop = null;
} 
```

# ios - ios中的DTAttributedTextView

> ID：13345454
> 
> 赞同：0
> 
> 时间：2012-11-12T14:26:07.453
> 
> 标签：ios, html-rendering

在我的 ios 应用程序中，我使用渲染 html 标签

```
DTAttributedTextView 
```

这是编码结构的其余部分

```
//create the custom label to get positions
        UILabel *customLabel = [[UILabel alloc]initWithFrame:CGRectMake(lblContent.frame.origin.x, lblContent.frame.origin.y,lblContent.frame.size.width,lblContent.frame.size.height)];
        customLabel.text = _artistDetail.strContent;
        customLabel.numberOfLines = 0;
        [customLabel sizeToFit];

        [lblContent removeFromSuperview];

        CGRect frame = CGRectMake(customLabel.frame.origin.x, customLabel.frame.origin.y,customLabel.frame.size.width,500);

        NSString *htmlText = HTML_DIV_TAG;
        htmlText = [htmlText stringByAppendingFormat:@"%@%@",_artistDetail.strContent,@"</div>"];
        htmlText = [htmlText stringByReplacingOccurrencesOfString:@"''" withString:@"'"];

        NSData *data = [htmlText dataUsingEncoding:NSUTF8StringEncoding];
        NSAttributedString *string = [[NSAttributedString alloc] initWithHTML:data options:nil documentAttributes:NULL];

        [DTAttributedTextContentView setLayerClass:[CATiledLayer class]];
        DTAttributedTextView  *_textView = [[DTAttributedTextView alloc] initWithFrame:frame];
        _textView.textDelegate = self;
        _textView.attributedString = string;
        [_textView sizeToFit];
        _textView.autoresizesSubviews = YES;
        [self.contentView addSubview:_textView]; 
```

现在我想根据内容高度增加标签是否有任何方法可以做到谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:15:34.337

您是否尝试过类似的方法：

```
[DTAttributedTextContentView setLayerClass:[CATiledLayer class]];
    DTAttributedTextView  *_textView = [[DTAttributedTextView alloc] initWithFrame:frame];
    _textView.textDelegate = self;
    _textView.attributedString = string;
    CGRect frame = _textView.frame;
    CGSize size = _textView.contentSize;
    frame.size.height = size.height;
    _textView.frame = frame;
    [self.contentView addSubview:_textView]; 
```

# php - 如何在wordpress的管理选项的下拉列表中显示术语

> ID：13345458
> 
> 赞同：2
> 
> 时间：2012-11-12T14:26:24.873
> 
> 标签：php, wordpress

我有一个自定义帖子类型，它有一个名为“国家”的自定义分类法。我想要仪表板 -> 主题选项中的下拉列表来选择此分类下的术语名称。所以我创建了以下函数：

```
function featured_country($show_count = false, $country_array = array()) {
    $countries = get_terms( 'category', 'hide_empty=0&fields=all' );
    foreach ($countries as $countr) {
        $country_array[$countr->term_id] = $countr->name;
    }
    return $country_array;
} 
```

然后我调用这个函数如下：

```
$this->admin_option('Front Page Option', 
    'Featured country', 'featured_country', 
    'select', '', 
    array('options'=>$this->featured_country(true, array(''=>'Select Category')),
    'help'=>'Some helping text')
); 
```

不幸的是，这个下拉列表什么也没显示。但是当我将 get_terms() 的参数设置为“category”或“link_category”时，它就可以工作了。

我不明白我的问题在哪里。我该如何解决这个问题？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:18:56.553

试试这个代码

```
function get_terms_dropdown($taxonomies, $args){
    $myterms = get_terms($taxonomies, $args);
    $output ="<select name='TAXONOMY SLUG'>";
    foreach($myterms as $term){
        $root_url = get_bloginfo('url');
        $term_taxonomy=$term->taxonomy;
        $term_slug=$term->slug;
        $term_name =$term->name;
        $link = $term_slug;
        $output .="<option value='".$link."'>".$term_name."</option>";
    }
    $output .="</select>";
return $output;
} 
```

（我从这个[论坛帖子](http://wordpress.org/support/topic/terms-of-custom-taxonomy-in-a-dropdown-menu?replies=6)中获取的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-30T05:35:22.653

这是自定义分类法的示例，其中“**课程**”和自定义帖子类型为“ **help_lessions** ”

```
/*
 * Set Selectbox for Custom taxonomy "courses" in admin panel
 */

function custom_meta_box() {
    remove_meta_box('tagsdiv-courses', 'help_lessions', 'side');
    add_meta_box('tagsdiv-courses', 'Course', 'Courses_meta_box', 'help_lessions', 'side');
}
add_action('add_meta_boxes', 'custom_meta_box');

/* Prints the taxonomy box content */

function courses_meta_box($post) {

    $tax_name = 'courses';
    $taxonomy = get_taxonomy($tax_name);
?>
    <div class="tagsdiv" id="<?php echo $tax_name; ?>">
        <div class="jaxtag">
    <?php
    // Use nonce for verification
    wp_nonce_field(plugin_basename(__FILE__), 'courses_noncename');
    $help_ids = wp_get_object_terms($post->ID, 'courses', array('fields' => 'ids'));
    wp_dropdown_categories('taxonomy=courses&hide_empty=0&orderby=name&name=courses&show_option_none=Select Course&selected=' . $help_ids[0]);
    ?>
        <p class="howto">Select your Course</p>
        </div>
    </div>
    <?php
}

/* When the post is saved, saves our custom taxonomy */

function courses_save_postdata($post_id) {
    // verify if this is an auto save routine. 
    // If it is our form has not been submitted, so we dont want to do anything
    if (( defined('DOING_AUTOSAVE') && DOING_AUTOSAVE ) || wp_is_post_revision($post_id))
        return;

    // verify this came from the our screen and with proper authorization,
    // because save_post can be triggered at other times

    if (!wp_verify_nonce($_POST['courses_noncename'], plugin_basename(__FILE__)))
        return;

    // Check permissions
    if ('help_lessions' == $_POST['post_type']) {
        if (!current_user_can('edit_page', $post_id))
            return;
    }
    else {
        if (!current_user_can('edit_post', $post_id))
            return;
    }

    // Now, we need to find and save the data

    $help_id = $_POST['courses'];
    $help = ( $help_id > 0 ) ? get_term($help_id, 'courses')->slug : NULL;
    wp_set_object_terms($post_id, $help, 'courses');
}
add_action('save_post', 'courses_save_postdata'); 
```

# android - Android 2.3.3 ListView 停止垂直滚动

> ID：13345459
> 
> 赞同：1
> 
> 时间：2012-11-12T14:26:33.717
> 
> 标签：android, android-layout, vertical-scrolling

我有一个简单的应用程序，用于学习来自 .Net 世界的 Java / android。在这个应用程序中，我有一个 ListView。ListView 绑定到一个集合并按应有的方式显示所有内容。我有一个允许用户导航的下一个和上一个按钮，这些按钮也可以工作。

我想要停止的是用户滚动列表的能力。我希望他们使用导航按钮。我在想当用户滚动时一定会引发一些事件。我打算拦截那个事件并“吞下”它。在寻找那些事件时，我遇到了 SetScrollContainer(false)。问题是，做任何事似乎都无关紧要。我还可以`scroll vertically`。

所以我的最终问题是使用`SetScrollContainer`或拦截事件还是其他选项是如何最好地禁用用户在 ListView 中滚动？

我还看到一篇晦涩难懂的文章，说要实现一个听起来像继承的自定义 ListView。我对这个概念很满意，但不确定`android & java`是否真的需要这种复杂性？

TIA JB

如下评论中讨论的代码：

```
//Get a handle on our ListView
lstvw_LiftData = (ListView)findViewById(R.id.lstvw_LiftData);

lstvw_LiftData.setOnTouchListener(new OnTouchListener() 
  {

      public boolean onTouch(View v, MotionEvent event) 
      {
          if (event.getAction() == MotionEvent.ACTION_MOVE) 
          {
              return true; // Indicates that this has been handled by you and will not be forwarded further.
          }
          return false;
      }
  }
); 
```

![setOnTouchListener 错误](../Images/eae895ecda2846fd58a5476fee03c7e4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:38:43.613

我在一个小测试项目中编写的代码可用于禁用列表视图的滚动：

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ListView lv = (ListView) findViewById(R.id.listV);
        String[] items = new String[10];

        for (int i = 0; i < 10; i++) {
            items[i] = "Item " + (i+1);
        }
        lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, items));
        lv.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if (event.getAction() == MotionEvent.ACTION_MOVE) {
                    return true;
                }
                return false;
            }

        });
    }
} 
```

玩得开心。

氪

# java - 为不同的 Web 服务将生成的类放入同一个包中

> ID：13345461
> 
> 赞同：3
> 
> 时间：2012-11-12T14:26:37.087
> 
> 标签：java, web-services, jax-ws

我有几个 JAX-WS Web 服务，它们使用相同的类，但是在从 wsdl（在客户端）生成之后，相同的类具有不同的包。我找到了如何使用`@xmltype`注释将它们放入同一个包中。但我不能使用它，因为源代码不可用。是否有可能在服务部署时以某种方式修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:09:57.060

如何从 WSDL 生成客户端代码？如果您使用maven，您可以在插件设置中指定生成类的包（例如，apache cxf 插件支持“wsdlOption”元素内的“packagenames”元素）。

# android - 如何设置 ListView 的正确尺寸？

> ID：13345464
> 
> 赞同：2
> 
> 时间：2012-11-12T14:26:51.747
> 
> 标签：android, android-layout, android-listview, android-linearlayout, android-layout-weight

我需要在一个简单的线性布局中设置 listView 的尺寸。我像 belove 示例一样设置了权重，但是出了点问题：textView 似乎没有设置，并且列表的尺寸更大。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="1" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.2"
        android:gravity="center"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="0dp" 
        android:layout_weight="0.7">
    </ListView>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_gravity="center"
        android:layout_weight="0.1"
        android:text="Avanti" />

</LinearLayout> 
```

我怎样才能纠正最终的错误或做得更好？

这就是我所拥有的：

[![](../Images/4ec18e9d7e41efc54beac12dec5a2e94.png)](https://i.stack.imgur.com/oa6Cj.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:36:20.963

我认为`layout_weight`在 Button 或 TextView 上使用不是一个好主意。现在，我不太确定你希望它看起来如何，但我会这样做：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="1" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >
    </ListView>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Avanti" />
</LinearLayout> 
```

此处要更改的主要值是`layout_weight`ListView 和`weightSum`LinearLayout 的值，但在我看来，在 Button 和 TextView 就位后，您似乎希望它填充视图的其余部分。如果您对上述结果不满意，请使用 layout_weight 和 weightSum。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:26:40.707

一种可能的方法是设置 textview 的高度（例如，我通常设置一个 textSize 然后将高度设置为 textsize*3.7 ）

例如：

```
 <TextView
            android:id="@+id/lexplicacionsNumPagText"
            android:layout_width="match_parent"
            android:layout_height="40dip"
            android:layout_gravity="right"
            android:gravity="right"
            android:layout_weight="2.10"
            android:scrollHorizontally="false"
            android:singleLine="true"
            android:text="01/05"
            android:textColor="#5d8a3b"
            android:textSize="10.5dip"
            android:textStyle="bold" /> 
```

如果这对您没有帮助...解决方案可能是以编程方式设置高度..也许这不是最好的方法，但是在maaany问题之后，它多次挽救了我的生命。

在“onCreate”末尾添加

```
 findViewById(R.id.explicacionsLiLa).post(new Runnable(){  //id of your FIRST linearLayout
        public void run(){
            inicialitzarLayout();

        }
    }); 
```

有了这个，一旦你的布局被膨胀，你就会去调整你的列表视图大小的方法，例如，高度的 80%

```
private void inicialitzarLayour(){
     LinearLayout lilaheight  = findViewById(R.id.explicacionsLiLa).getHeight();

     findViewById(R.id.listview1).getLayoutParams().height = (int)(lilaheight*0.8);

} 
```

PS。如果您没有在帖子中明确写下，人们不知道您在上一次/上一次/.. 编辑中更改了什么

# html - 禁用对不在表单中的 HTML5 元素的验证

> ID：13345467
> 
> 赞同：3
> 
> 时间：2012-11-12T14:27:05.090
> 
> 标签：html

表单可以禁用验证。

```
<form novalidate/> 
```

现在，我有一个**不在**表单中的 HTML5 元素。在这种情况下如何禁用验证？

```
<noform>
    <input name="email" type="email"/>
</noform> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:21:28.387

目前尚不清楚您想要实现什么。如果该`input`元素无法提交到服务器，那么它将不会触发验证过程，因为您的评论似乎表明您已经发现。但是，无论该过程如何，单个`input`元素仍可能处于无效状态。有几个简单的解决方案可以避免这种情况：

*   如果您不希望将字段的有效性状态评估为电子邮件，请不要使用`type="email"`
*   如果您需要输入`email`但不关心它是否是有效的电子邮件（例如，触发移动设备上的特定键盘模式），则使用 CSS 隐藏指示。

以下是如何隐藏正常的火狐红光：

```
input:-moz-ui-invalid {
    box-shadow: none;
} 
```

这[是一个简单的例子](http://jsfiddle.net/robertc/BSYMZ/)。

# jquery - 单击按钮后将字符串设置为“1”

> ID：13345468
> 
> 赞同：0
> 
> 时间：2012-11-12T14:27:06.273
> 
> 标签：jquery, ajax, json, wcf

我是一个有两个按钮的 jquery 对话框。

```
<div id="generatePinsDialog" title="Generate New PINs">

<input type="button" title="button1" id="button1" />
<br />
<input type="button" title="button2" id="button2" /> 
```

在我的 js 文件中，我想设置字符串 vlaue 并将其传递给 wcf 方法。

```
function OpenGeneratePINsDialog() {
$("#generatePinsDialog").dialog('open');
$.get('/MyServices/myService.svc/GeneratePINs/' + #button1.val()+'/' + #button2.value 
```

}

WCF 方法：

```
[OperationContract]
    [WebGet(UriTemplate = "/.../GeneratePINs/{button1}/{button2}", BodyStyle = WebMessageBodyStyle.Bare, ResponseFormat = WebMessageFormat.Json)]
    public void GeneratePINs(string button1, string button2)
    { 
```

这意味着如果单击 button1，则传递 button1=1 和 button2 =0 如果单击 button2，则传递 button2=1 和 button1 =0

感谢帮助。另外请帮我纠正button1的值的写法。

```
 #button1.Val() or $(#button1.Val()) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T14:31:55.020

```
 function OpenGeneratePINsDialog(e) {
        var b1=0, b2=0; 
        if(this.id=="button1"){
             b1=1;
         }else{
             b2 =1;
          }
          $("#generatePinsDialog").dialog('open');
          $.get('/MyServices/myService.svc/GeneratePINs/' + b1 +'/' + b2, function(response){

          });
      }
      $("#button1").click (OpenGeneratePINsDialog);
      $("#button2").click (OpenGeneratePINsDialog); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:33:55.110

你可以做这样的事情：

```
$('input[type=button]').click(function(evt) {
    // setup default values for button (button2 clicked)
    var button1 = "0";
    var button2 = "1";
    // change to button 1 if that was the button pressed
    if (evt.target.id == 'button1') {
        button1 = "1";
        button2 = "0";
    }
    // execute the rest of your code
    $("#generatePinsDialog").dialog('open');
    // append the values of button1 and button2
    $.get('/MyServices/myService.svc/GeneratePINs/' + button1 + '/' + button2);
}) 
```

注意你的`$.get`功能不完整

# android - 正在运行的线程Android中的唤醒锁

> ID：13345471
> 
> 赞同：2
> 
> 时间：2012-11-12T14:27:09.213
> 
> 标签：android, multithreading, wakelock

我有一个简单的问题：

在一项服务中，我需要再运行 2 个彼此独立的线程，并且我需要一个唤醒锁来让它们被执行。我给你举个例子：

```
 wl.aquire();

    if (true) {
        mExecutorService.execute(thread1);
    }

    if (true) {
        mExecutorService.execute(thread2);
    }
   wl.release(); 
```

那么，在这种情况下，唤醒锁将在 2 个线程启动后释放还是等待它们完成？

如果没有，我需要唤醒锁在它们运行时保持不变，并且只有在最后一个线程完成时才释放它。我怎样才能做到这一点？我是否必须在线程体内获取新的唤醒锁？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T14:48:25.463

根据[Executor`execute()`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executor.html#execute%28java.lang.Runnable%29)文档：“在未来某个时间执行给定的命令。该命令可以在新线程、池线程或调用线程中执行，由 Executor 实现自行决定。”

所以这取决于你使用的是哪个具体的 Executor。

我认为你应该用来[`submit()`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#submit%28java.lang.Runnable%29)给执行者一份新工作。

如果你坚持使用 Executor，调用`get()`返回的 Future`submit()`将阻塞，直到结果可用。

所以你可以打电话：

```
Future<Result> result_1 = mExecutorService.execute(Runnable1);
Future<Result> result_2 = mExecutorService.execute(Runnable2);

result_1.get();
result_2.get(); 
```

或者，您可以启动两个线程并等待它们完成：

```
Thread t1 = new Thread(Runnable1);
Thread t2 = new Thread(Runnable2);
t1.start();
t2.start();

t1.join();
t2.join(); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:33:51.740

假设您正在从`AsyncTask`后台线程或后台线程运行此代码。您可以`[Thread.join()]`在调用之前调用所有线程`wl.release();`

查看此[链接](http://developer.android.com/reference/java/lang/Thread.html#join%28%29)了解`join()`详细信息

EDIT1：在执行器上，您还可以使用具有长等待值的[awaitTermination()](http://developer.android.com/reference/java/util/concurrent/ExecutorService.html#awaitTermination%28long,%20java.util.concurrent.TimeUnit%29)来等待它完成所有任务。以下代码来自官方[java 文档](http://developer.android.com/reference/java/util/concurrent/ExecutorService.html)：

```
void shutdownAndAwaitTermination(ExecutorService pool) {
   pool.shutdown(); // Disable new tasks from being submitted
   try {
     // Wait a while for existing tasks to terminate
     if (!pool.awaitTermination(60, TimeUnit.SECONDS)) {
       pool.shutdownNow(); // Cancel currently executing tasks
       // Wait a while for tasks to respond to being cancelled
       if (!pool.awaitTermination(60, TimeUnit.SECONDS))
           System.err.println("Pool did not terminate");
     }
   } catch (InterruptedException ie) {
     // (Re-)Cancel if current thread also interrupted
     pool.shutdownNow();
     // Preserve interrupt status
     Thread.currentThread().interrupt();
   }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T23:28:30.210

请参阅[http://developer.android.com/reference/android/os/PowerManager.WakeLock.html](http://developer.android.com/reference/android/os/PowerManager.WakeLock.html) - 正确的方法是在您正在运行的两个线程中获取唤醒锁。给定您的示例代码，您需要在 thread1 和 thread2 中使用一个成员变量来存储唤醒锁，以及传递唤醒锁的某种方式，可能像这样：

```
thread1.setWakelock(wl);
thread2.setWakelock(wl);

class Thread implements Runnable {
    PowerManager.Wakelock mWakelock;
    void setWakelock(PowerManager.Wakelock wl) {
        mWakelock = wl;
    }
} 
```

然后在 thread1 和 thread2 中，您将需要：

```
run() {
    mWakelock.acquire();
    ... your existing code here ...
    mWakelock.release();
} 
```

请注意，这将起作用，因为默认情况下唤醒锁是引用计数的；请参阅 PowerManager.WakeLock.setReferenceCounted()。

使用 thread.join() 等待线程完成是错误的；如您所见，它将阻塞 UI 线程，您将获得 ANR。

# delphi - 授权失败 TIdHTTP over HTTPS

> ID：13345474
> 
> 赞同：2
> 
> 时间：2012-11-12T14:27:15.267
> 
> 标签：delphi, delphi-xe2, indy

我想接近 Exchange 网络服务并自己处理 XML SOAP 组合（请求）和解析（响应）。因此，THTPPRIO 似乎有点矫枉过正。

我正在尝试 TIdHTTP 但我被困在身份验证上；使用带有 Indy 10.5.8.0 的 Delphi XE2 更新 4

这是代码：

```
idHTTP1.Request.CustomHeaders.AddValue('SOAPAction','"http://schemas.microsoft.com/exchange/services/2006/messages/ResolveNames"');
IdHTTP1.Post('https://webmail.mailserver.nl/ews/exchange.asmx',TSRequest,TSResponse); 
```

*   TSRequest、TSResponse 是 UTF-8 TStringStreams，TSRequest 包含整个 SOAP 信封
*   IdHTTP1.IOHandler 设置为 TIdSSLIOHandlerSocketOpenSSL，根据[这个建议](https://forums.embarcadero.com/thread.jspa?threadID=77443) TIdSSLIOHandlerSocketOpenSSL.Intercept 链接到 TIdLogDebug 以便我可以调试正在发生的事情
*   OpenSSL DLL 存在于 DLL 搜索路径中
*   EWS 需要 NTLM 验证；TIdNTLMAuthentication 在uses 子句中；我已经设置了idHTTP1.Request.BasicAuthentication=false，用户名和密码都填好了
*   IdHTTP1.OnSelectAuthorization 事件确认 NTLM 身份验证（参数 AuthenticationClass = TIdSSPINTLMAuthentication，并且 AuthInfo TIdHeaderList 包含'Negotiate'、'NTLM'）
*   没有代理。[我通过Fiddler](http://www.fiddler2.com/fiddler2/)代理查看发生了什么，但这没有什么区别。

我还尝试设置用户/密码运行时：

```
procedure TForm1.IdHTTP1Authorization(Sender: TObject; Authentication: TIdAuthentication; var Handled: Boolean);
begin
  Authentication.Username := 'bob@domain.nl';
  Authentication.Password := 'password';
  Handled := true;
end; 
```

发送的 HTTP（来自 TIdLogDebug.OnSend）以：

```
POST /ews/exchange.asmx HTTP/1.1
Content-Type: text/xml; charset=utf-8
Content-Length: 562
SOAPAction: "http://schemas.microsoft.com/exchange/services/2006/messages/ResolveNames"
Host: webmail.mailserver.nl
Accept: text/html, */*
Accept-Encoding: gzip,deflate, identity
User-Agent: Mozilla/3.0 (compatible; Indy Library)

<soapenv:Envelope 
```

收到的 HTTP（来自 TIdLogDebug.OnReceive）是

```
HTTP/1.1 401 Unauthorized
Cache-Control: private
Server: Microsoft-IIS/7.5
X-AspNet-Version: 2.0.50727
Set-Cookie: exchangecookie=0157734634ba4a0fa3a7d0d8efb602f2; expires=Tue, 12-Nov-2013 13:38:56 GMT; path=/; HttpOnly
WWW-Authenticate: Negotiate
WWW-Authenticate: NTLM
X-Powered-By: ASP.NET
Date: Mon, 12 Nov 2012 13:38:56 GMT
Content-Length: 0 
```

TIdSSLIOHandlerSocketOpenSSL.OnStatusInfo 事件日志

```
SSL status: "before/connect initialization"
SSL status: "before/connect initialization"
SSL status: "SSLv3 write client hello A"
SSL status: "SSLv3 read server hello A"
SSL status: "SSLv3 read server certificate A"
SSL status: "SSLv3 read server done A"
SSL status: "SSLv3 write client key exchange A"
SSL status: "SSLv3 write change cipher spec A"
SSL status: "SSLv3 write finished A"
SSL status: "SSLv3 flush data"
SSL status: "SSLv3 read finished A"
SSL status: "SSL negotiation finished successfully"
SSL status: "SSL negotiation finished successfully"
Cipher: name = AES128-SHA; description = AES128-SHA              SSLv3 Kx=RSA      Au=RSA  Enc=AES(128)  Mac=SHA1
; bits = 128; version = TLSv1/SSLv3; 
```

我在传出 HTTP 中错过的是这样的一行（例如由[SOAPUI](http://www.soapui.org)生成）：

```
"Authorization: NTLM TlRMTVNTUAABAAAANQIIIBQAFAAyAAAAEgASACAAAABWAE0ASgBBAE4AVABUADcANABUAEkATQBFAFQARQBMAEwAQgBWAA==[\r][\n]" 
```

也许我没有在正确的地方指定用户名/密码？

在 Remy 最初的回答之后添加了 11 月 13 日：

为了比较，我从 SOAPUI 调用 web 服务，这显示**6 个数据包**通过线路，两次响应未授权。

```
>> "POST /ews/exchange.asmx HTTP/1.1[\r][\n]"
>> "Accept-Encoding: gzip,deflate[\r][\n]"
>> "SOAPAction: "http://schemas.microsoft.com/exchange/services/2006/messages/ResolveNames"[\r][\n]"
>> "Content-Type: text/xml; charset=utf-8[\r][\n]"
>> "Content-Length: 548[\r][\n]"
>> "Host: webmail.timetellbv.nl[\r][\n]"
>> "Connection: Keep-Alive[\r][\n]"
>> "User-Agent: Apache-HttpClient/4.1.1 (java 1.5)[\r][\n]"
>> "[\r][\n]"
>> "<soapenv:Envelope [\n]"
[snip]
>> "</soapenv:Envelope>[\n]"
>> "[\n]"

<< "HTTP/1.1 401 Unauthorized[\r][\n]"
<< "Cache-Control: private[\r][\n]"
<< "Server: Microsoft-IIS/7.5[\r][\n]"
<< "X-AspNet-Version: 2.0.50727[\r][\n]"
<< "Set-Cookie: exchangecookie=a29f10ca2a6d484ea276737e87d8e733; expires=Wed, 13-Nov-2013 10:47:33 GMT; path=/; HttpOnly[\r][\n]"
<< "WWW-Authenticate: Negotiate[\r][\n]"
<< "WWW-Authenticate: NTLM[\r][\n]"
<< "X-Powered-By: ASP.NET[\r][\n]"
<< "Date: Tue, 13 Nov 2012 10:47:33 GMT[\r][\n]"
<< "Content-Length: 0[\r][\n]"
<< "[\r][\n]"

>> "POST /ews/exchange.asmx HTTP/1.1[\r][\n]"
>> "Accept-Encoding: gzip,deflate[\r][\n]"
>> "SOAPAction: "http://schemas.microsoft.com/exchange/services/2006/messages/ResolveNames"[\r][\n]"
>> "Content-Type: text/xml; charset=utf-8[\r][\n]"
>> "Content-Length: 548[\r][\n]"
>> "Host: webmail.timetellbv.nl[\r][\n]"
>> "Connection: Keep-Alive[\r][\n]"
>> "User-Agent: Apache-HttpClient/4.1.1 (java 1.5)[\r][\n]"
>> "Cookie: exchangecookie=a29f10ca2a6d484ea276737e87d8e733[\r][\n]"
>> "Cookie2: $Version=1[\r][\n]"
>> "Authorization: NTLM TlRMTVNTUAABAAAANQIIIBQAFAAyAAAAEgASACAAAABWAE0ASgBBAE4AVABUADcANABUAEkATQBFAFQARQBMAEwAQgBWAA==[\r][\n]"
>> "[\r][\n]"
>> "<soapenv:Envelope [\n]"
[snip]
>> "</soapenv:Envelope>[\n]"
>> "[\n]"

<< "HTTP/1.1 401 Unauthorized[\r][\n]"
<< "Server: Microsoft-IIS/7.5[\r][\n]"
<< "WWW-Authenticate: NTLM TlRMTVNTUAACAAAAFAAUADgAAAA1AokilFuJDu09j+sAAAAAAAAAAMAAwABMAAAABgGxHQAAAA9UAEkATQBFAFQARQBMAEwAQgBWAAIAFABUAEkATQBFAFQARQBMAEwAQgBWAAEAHABUAFQARQBYAEMASABBAE4ARwBFADIAMAAxADAABAAaAHQAaQBtAGUAdABlAGwAbABiAHYALgBuAGwAAwA4AFQAVABFAFgAQwBIAEEATgBHAEUAMgAwADEAMAAuAHQAaQBtAGUAdABlAGwAbABiAHYALgBuAGwABQAaAHQAaQBtAGUAdABlAGwAbABiAHYALgBuAGwABwAIADs8RkmMwc0BAAAAAA==[\r][\n]"
<< "WWW-Authenticate: Negotiate[\r][\n]"
<< "X-Powered-By: ASP.NET[\r][\n]"
<< "Date: Tue, 13 Nov 2012 10:47:33 GMT[\r][\n]"
<< "Content-Length: 0[\r][\n]"
<< "[\r][\n]"

>> "POST /ews/exchange.asmx HTTP/1.1[\r][\n]"
>> "Accept-Encoding: gzip,deflate[\r][\n]"
>> "SOAPAction: "http://schemas.microsoft.com/exchange/services/2006/messages/ResolveNames"[\r][\n]"
>> "Content-Type: text/xml; charset=utf-8[\r][\n]"
>> "Content-Length: 548[\r][\n]"
>> "Host: webmail.timetellbv.nl[\r][\n]"
>> "Connection: Keep-Alive[\r][\n]"
>> "User-Agent: Apache-HttpClient/4.1.1 (java 1.5)[\r][\n]"
>> "Cookie: exchangecookie=a29f10ca2a6d484ea276737e87d8e733[\r][\n]"
>> "Cookie2: $Version=1[\r][\n]"
>> "Authorization: NTLM TlRMTVNTUAADAAAAGAAYAEAAAADsAOwAWAAAABQAFABEAQAAEgASAFgBAAASABIAagEAAAAAAAB8AQAANQIIIFEqBrpeBXvnS3dcDcbKGMQS3VgaBa9Bi9YvouCOFFWFjH84AhcR7fgBAQAAAAAAAECzkUmMwc0BEt1YGgWvQYsAAAAAAgAUAFQASQBNAEUAVABFAEwATABCAFYAAQAcAFQAVABFAFgAQwBIAEEATgBHAEUAMgAwADEAMAAEABoAdABpAG0AZQB0AGUAbABsAGIAdgAuAG4AbAADADgAVABUAEUAWABDAEgAQQBOAEcARQAyADAAMQAwAC4AdABpAG0AZQB0AGUAbABsAGIAdgAuAG4AbAAFABoAdABpAG0AZQB0AGUAbABsAGIAdgAuAG4AbAAHAAgAOzxGSYzBzQEAAAAAVABJAE0ARQBUAEUATABMAEIAVgBkAGUAdgBlAGwAbwBwAGUAcgBWAE0ASgBBAE4AVABUADcANAA=[\r][\n]"
>> "[\r][\n]"
>> "<soapenv:Envelope [\n]"
[snip]
>> "</soapenv:Envelope>[\n]"
>> "[\n]"

<< "HTTP/1.1 200 OK[\r][\n]"
<< "Cache-Control: private[\r][\n]"
<< "Transfer-Encoding: chunked[\r][\n]"
<< "Content-Type: text/xml; charset=utf-8[\r][\n]"
<< "Server: Microsoft-IIS/7.5[\r][\n]"
<< "X-EwsPerformanceData: RpcC=2;RpcL=0;LdapC=1;LdapL=0;[\r][\n]"
<< "X-AspNet-Version: 2.0.50727[\r][\n]"
<< "Persistent-Auth: true[\r][\n]"
<< "X-Powered-By: ASP.NET[\r][\n]"
<< "Date: Tue, 13 Nov 2012 10:47:33 GMT[\r][\n]"
<< "[\r][\n]"
<< "877[\r][\n]"
<< "<?xml version="1.0" encoding="utf-8"?><s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
[snip]
<< "</s:Envelope>"
<< "[\r][\n]"
<< "0[\r][\n]"
<< "[\r][\n]" 
```

所以从德尔福我只看到前两个数据包交换。奇怪的是，如果我**再次**单击“测试”按钮，交换似乎会继续？？？：

要求：

```
POST /ews/exchange.asmx HTTP/1.1
Content-Type: text/xml; charset=utf-8
Content-Length: 562
SOAPAction: "http://schemas.microsoft.com/exchange/services/2006/messages/ResolveNames"
Host: webmail.timetellbv.nl
Accept: text/html, */*
Accept-Encoding: gzip,deflate, identity
User-Agent: Mozilla/3.0 (compatible; Indy Library)
Authorization: NTLM TlRMTVNTUAABAAAAB4IIogAAAAAAAAAAAAAAAAAAAAAGAbEdAAAADw==

<soapenv:Envelope 
[snip]
</soapenv:Envelope> 
```

回复：

```
HTTP/1.1 401 Unauthorized
Server: Microsoft-IIS/7.5
WWW-Authenticate: NTLM TlRMTVNTUAACAAAAFAAUADgAAAAFgomiqrTrZnWjEdQAAAAAAAAAAMAAwABMAAAABgGxHQAAAA9UAEkATQBFAFQARQBMAEwAQgBWAAIAFABUAEkATQBFAFQARQBMAEwAQgBWAAEAHABUAFQARQBYAEMASABBAE4ARwBFADIAMAAxADAABAAaAHQAaQBtAGUAdABlAGwAbABiAHYALgBuAGwAAwA4AFQAVABFAFgAQwBIAEEATgBHAEUAMgAwADEAMAAuAHQAaQBtAGUAdABlAGwAbABiAHYALgBuAGwABQAaAHQAaQBtAGUAdABlAGwAbABiAHYALgBuAGwABwAIAOZ26g+Owc0BAAAAAA==
Set-Cookie: exchangecookie=0c8362d303d742c6aae98bd1df574a4d; expires=Wed, 13-Nov-2013 11:00:16 GMT; path=/; HttpOnly
WWW-Authenticate: Negotiate
X-Powered-By: ASP.NET
Date: Tue, 13 Nov 2012 11:00:15 GMT
Content-Length: 0 
```

如果我**第三次**点击我的测试按钮，我会得到一个实际的 EIdHTTPProtocolException 和这个数据交换：

要求：

```
POST /ews/exchange.asmx HTTP/1.1
Content-Type: text/xml; charset=utf-8
Content-Length: 562
SOAPAction: "http://schemas.microsoft.com/exchange/services/2006/messages/ResolveNames"
Host: webmail.timetellbv.nl
Accept: text/html, */*
Accept-Encoding: gzip,deflate, identity
User-Agent: Mozilla/3.0 (compatible; Indy Library)
Authorization: NTLM TlRMTVNTUAADAAAAGAAYAJ4AAABIAUgBtgAAABIAEgBYAAAAIgAiAGoAAAASABIAjAAAAAAAAAD+AQAABYKIogYBsR0AAAAPOcYXUTHWwFnGL17GZCkaYFYATQBKAEEATgBUAFQANwA0AGIAbwBiAEAAdABpAG0AZQB0AGUAbABsAGIAdgAuAG4AbABWAE0ASgBBAE4AVABUADcANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACEi/nFDXHEgQ6OUgBv7Zw0AQEAAAAAAACsq9CKkcHNAbBRNkiUgQdnAAAAAAIAFABUAEkATQBFAFQARQBMAEwAQgBWAAEAHABUAFQARQBYAEMASABBAE4ARwBFADIAMAAxADAABAAaAHQAaQBtAGUAdABlAGwAbABiAHYALgBuAGwAAwA4AFQAVABFAFgAQwBIAEEATgBHAEUAMgAwADEAMAAuAHQAaQBtAGUAdABlAGwAbABiAHYALgBuAGwABQAaAHQAaQBtAGUAdABlAGwAbABiAHYALgBuAGwABwAIAKyr0IqRwc0BBgAEAAIAAAAIADAAMAAAAAAAAAAAAAAAADAAALSZIBVpzBPWjPvSVUels19vMlDT5yE5Q8qQ4mwV87EeCgAQAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAA

<soapenv:Envelope 
[snip]
</soapenv:Envelope> 
```

回复：

```
HTTP/1.1 401 Unauthorized
Server: Microsoft-IIS/7.5
Set-Cookie: exchangecookie=2a4876f8adeb425384fb370cafa61ee6; expires=Wed, 13-Nov-2013 11:25:11 GMT; path=/; HttpOnly
WWW-Authenticate: Negotiate
WWW-Authenticate: NTLM
X-Powered-By: ASP.NET
Date: Tue, 13 Nov 2012 11:25:11 GMT
Content-Length: 0 
```

谢谢
简

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T19:41:17.513

通常，`Authorization`在服务器通过 401 回复请求它之前，不会发送标头。您不会在初始请求中看到它，但`TIdHTTP`应该`Authorization`在处理 401 回复后发送带有标头的新请求。在任何情况下，您都应该使用`TIdHTTP.Request.Username`和`TIdHTTP.Request.Password`属性来设置初始凭据，然后`OnAuthorization`根据需要使用事件来提供新凭据。

# android - 在主题中混合全息光和全息暗 EditText

> ID：13345478
> 
> 赞同：5
> 
> 时间：2012-11-12T14:27:39.330
> 
> 标签：android, android-theme, android-holo-everywhere

我使用 Holo dark 作为我的应用程序的主题。但是，有一部分我希望从中使用 EditText，`holo light`因为这部分的背景很浅。当我为按钮做了类似的事情时，我尝试过这样做`themes.`（我们想使用姜饼风格的按钮）：

```
<style 
       name="Theme.Banks" parent="Theme.Sherlock.ForceOverflow">
       <item name="android:buttonStyle">@android:style/Widget.Button</item>
</style> 
```

我尝试对 android:editTextStyle 做同样的事情，但它不会影响可绘制对象。这由属性 android:editTextBackground 处理。查看代码，我不能只是覆盖它并将其指向浅色主题，因为它引用了一个私有可绘制对象：

这来自 SDK 中的 theme.xml：

```
<item name="editTextBackground">@android:drawable/edit_text_holo_dark</item> 
```

所以我的问题是如何做到这一点？

另一个用例可能希望使用姜饼中的 EditText。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:16:41.220

您可以从 sdk res 文件夹中获取您需要的绘图并将它们包含在您自己的项目中，然后为该 EditText 引用您自己的全息光绘图副本。

似乎效率低下，但我不确定是否有任何其他方法可以解决您的风格问题。

# jquery - jquery mobile中带有谷歌地图的方向的干净示例？

> ID：13345479
> 
> 赞同：10
> 
> 时间：2012-11-12T14:27:39.753
> 
> 标签：jquery, google-maps, jquery-mobile, google-maps-api-3

尝试获得一个有效的 jquery 移动地图方向页面。列出了这个例子：

```
http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-mobile.html#directions_map 
```

但是示例代码很混乱，无法让它工作:(。宜家使用它。

```
http://m.ikea.com/nl/nl/stores/415/map/ 
```

但他们也非常定制了 js，所以很难看到会发生什么。

有谁知道一个很好的干净示例或易于遵循的实现？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-20T20:30:58.357

您可以在下面找到在 jQuery Mobile 页面中使用 Google Maps 方向服务的基本示例。

```
<!DOCTYPE html>
<html>
    <head>
        <title>jQuery mobile with Google maps geo directions example</title>
        <meta content="en" http-equiv="content-language">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"></script>
        <script type="text/javascript">
            $(document).on("pageinit", "#map_page", function() {
                initialize();
            });

            $(document).on('click', '#submit', function(e) {
                e.preventDefault();
                calculateRoute();
            });

            var directionDisplay,
                directionsService = new google.maps.DirectionsService(),
                map;

            function initialize() 
            {
                directionsDisplay = new google.maps.DirectionsRenderer();
                var mapCenter = new google.maps.LatLng(59.3426606750, 18.0736160278);

                var myOptions = {
                    zoom:10,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    center: mapCenter
                }

                map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
                directionsDisplay.setMap(map);
                directionsDisplay.setPanel(document.getElementById("directions"));  
            }

            function calculateRoute() 
            {
                var selectedMode = $("#mode").val(),
                    start = $("#from").val(),
                    end = $("#to").val();

                if(start == '' || end == '')
                {
                    // cannot calculate route
                    $("#results").hide();
                    return;
                }
                else
                {
                    var request = {
                        origin:start, 
                        destination:end,
                        travelMode: google.maps.DirectionsTravelMode[selectedMode]
                    };

                    directionsService.route(request, function(response, status) {
                        if (status == google.maps.DirectionsStatus.OK) {
                            directionsDisplay.setDirections(response); 
                            $("#results").show();
                            /*
                                var myRoute = response.routes[0].legs[0];
                                for (var i = 0; i < myRoute.steps.length; i++) {
                                    alert(myRoute.steps[i].instructions);
                                }
                            */
                        }
                        else {
                            $("#results").hide();
                        }
                    });

                }
            }
        </script>
    </head>
    <body>
        <div data-role="page" id="map_page">
            <div data-role="header">
                <h1><a href="#">jQuery mobile - Google maps directions service</h1>
            </div>
            <div data-role="content">
                <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                    <div id="map_canvas" style="height:300px;"></div>
                    <div data-role="fieldcontain">
                        <label for="from">From</label> 
                        <input type="text" id="from" value="Goteborg, Sweden"/>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="to">To</label> 
                        <input type="text" id="to" value="Stockholm, Sweden"/>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="mode" class="select">Transportation method:</label>
                        <select name="select-choice-0" id="mode">
                            <option value="DRIVING">Driving</option>
                            <option value="WALKING">Walking</option>
                            <option value="BICYCLING">Bicycling</option>
                        </select>
                    </div>
                    <a data-icon="search" data-role="button" href="#" id="submit">Get directions</a>
                </div>
                <div id="results" style="display:none;">
                    <div id="directions"></div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

![在此处输入图像描述](../Images/83155578968666f724e3efdf3c534a3a.png)

**更新 1：**

下面的示例使用自动定位的当前位置和用户提供的目标地址。

```
<!doctype html>
<html lang="en">
   <head>
        <title>jQuery mobile with Google maps</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"></script>
        <script type="text/javascript">

            var map,
                currentPosition,
                directionsDisplay, 
                directionsService;

            function initialize(lat, lon)
            {
                directionsDisplay = new google.maps.DirectionsRenderer(); 
                directionsService = new google.maps.DirectionsService();

                currentPosition = new google.maps.LatLng(lat, lon);

                map = new google.maps.Map(document.getElementById('map_canvas'), {
                   zoom: 15,
                   center: currentPosition,
                   mapTypeId: google.maps.MapTypeId.ROADMAP
                 });

                directionsDisplay.setMap(map);

                 var currentPositionMarker = new google.maps.Marker({
                    position: currentPosition,
                    map: map,
                    title: "Current position"
                });

                var infowindow = new google.maps.InfoWindow();
                google.maps.event.addListener(currentPositionMarker, 'click', function() {
                    infowindow.setContent("Current position: latitude: " + lat +" longitude: " + lon);
                    infowindow.open(map, currentPositionMarker);
                });
            }

            function locError(error) {
                // initialize map with a static predefined latitude, longitude
               initialize(59.3426606750, 18.0736160278);
            }

            function locSuccess(position) {
                initialize(position.coords.latitude, position.coords.longitude);
            }

            function calculateRoute() {
                var targetDestination = $("#target-dest").val();
                if (currentPosition && currentPosition != '' && targetDestination && targetDestination != '') {
                    var request = {
                        origin:currentPosition, 
                        destination:targetDestination,
                        travelMode: google.maps.DirectionsTravelMode["DRIVING"]
                    };

                    directionsService.route(request, function(response, status) {
                        if (status == google.maps.DirectionsStatus.OK) {
                            directionsDisplay.setPanel(document.getElementById("directions"));
                            directionsDisplay.setDirections(response); 

                            /*
                                var myRoute = response.routes[0].legs[0];
                                for (var i = 0; i < myRoute.steps.length; i++) {
                                    alert(myRoute.steps[i].instructions);
                                }
                            */
                            $("#results").show();
                        }
                        else {
                            $("#results").hide();
                        }
                    });
                }
                else {
                    $("#results").hide();
                }
            }

            $(document).live("pagebeforeshow", "#map_page", function() {
                navigator.geolocation.getCurrentPosition(locSuccess, locError);
            });

            $(document).on('click', '#directions-button', function(e){
                e.preventDefault();
                calculateRoute();
            });

        </script>
    </head>
    <body>
        <div id="basic-map" data-role="page">
            <div data-role="header">
                <h1><a data-ajax="false" href="/">jQuery mobile with Google maps v3</a></h1>
            </div>
            <div data-role="content">   
                <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                    <div id="map_canvas" style="height:350px;"></div>
                </div>
                <div data-role="fieldcontain">
                    <label for="target-dest">Target Destination:</label>
                    <input type="text" name="target-dest" id="target-dest" value=""  />
                </div>
                <a href="#" id="directions-button" data-role="button" data-inline="true" data-mini="true">Get Directions</a>
                <div id="results" style="display:none;">
                    <div id="directions"></div>
                </div>
            </div>
        </div>      
    </body>
</html> 
```

**更新 2：**

下面的示例定位当前位置，它会自动计算距离并显示当前位置和静态预定义目的地位置之间的路线详细信息。

```
<!doctype html>
<html lang="en">
   <head>
        <title>jQuery mobile with Google maps</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"></script>
        <script type="text/javascript">

            var map,
                currentPosition,
                directionsDisplay, 
                directionsService,
                destinationLatitude = 59.3426606750,
                destinationLongitude = 18.0736160278;

            function initializeMapAndCalculateRoute(lat, lon)
            {
                directionsDisplay = new google.maps.DirectionsRenderer(); 
                directionsService = new google.maps.DirectionsService();

                currentPosition = new google.maps.LatLng(lat, lon);

                map = new google.maps.Map(document.getElementById('map_canvas'), {
                   zoom: 15,
                   center: currentPosition,
                   mapTypeId: google.maps.MapTypeId.ROADMAP
                 });

                directionsDisplay.setMap(map);

                 var currentPositionMarker = new google.maps.Marker({
                    position: currentPosition,
                    map: map,
                    title: "Current position"
                });

                // current position marker info
                /*
                var infowindow = new google.maps.InfoWindow();
                google.maps.event.addListener(currentPositionMarker, 'click', function() {
                    infowindow.setContent("Current position: latitude: " + lat +" longitude: " + lon);
                    infowindow.open(map, currentPositionMarker);
                });
                */

                // calculate Route
                calculateRoute();
            }

            function locError(error) {
               // the current position could not be located
            }

            function locSuccess(position) {
                // initialize map with current position and calculate the route
                initializeMapAndCalculateRoute(position.coords.latitude, position.coords.longitude);
            }

            function calculateRoute() {

                var targetDestination =  new google.maps.LatLng(destinationLatitude, destinationLongitude);
                if (currentPosition != '' && targetDestination != '') {

                    var request = {
                        origin: currentPosition, 
                        destination: targetDestination,
                        travelMode: google.maps.DirectionsTravelMode["DRIVING"]
                    };

                    directionsService.route(request, function(response, status) {
                        if (status == google.maps.DirectionsStatus.OK) {
                            directionsDisplay.setPanel(document.getElementById("directions"));
                            directionsDisplay.setDirections(response); 

                            /*
                                var myRoute = response.routes[0].legs[0];
                                for (var i = 0; i < myRoute.steps.length; i++) {
                                    alert(myRoute.steps[i].instructions);
                                }
                            */
                            $("#results").show();
                        }
                        else {
                            $("#results").hide();
                        }
                    });
                }
                else {
                    $("#results").hide();
                }
            }

            $(document).live("pagebeforeshow", "#map_page", function() {
                // find current position and on success initialize map and calculate the route
                navigator.geolocation.getCurrentPosition(locSuccess, locError);
            });

        </script>
    </head>
    <body>
        <div id="basic-map" data-role="page">
            <div data-role="header">
                <h1><a data-ajax="false" href="/">jQuery mobile with Google maps v3</a></h1>
            </div>
            <div data-role="content">   
                <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                    <div id="map_canvas" style="height:350px;"></div>
                </div>
                <div id="results" style="display:none;">
                    <div id="directions"></div>
                </div>
            </div>
        </div>      
    </body>
</html> 
```

我希望这有帮助。

# php - jsTree 使用 PHP 从 MySQL 填充时显示根节点

> ID：13345493
> 
> 赞同：0
> 
> 时间：2012-11-12T14:29:11.197
> 
> 标签：php, jquery, jstree

使用 php/mysql 实现时，我需要在 jsTree 中显示根节点。下面是所有相关代码以及输出的屏幕截图。

当前表结构：（抱歉还不能嵌入图片...） [http://i.imgur.com/RpDZw.jpg](http://i.imgur.com/RpDZw.jpg)

当前输出：http: [//i.imgur.com/5Gh6M.jpg](http://i.imgur.com/5Gh6M.jpg)

如您所见，树中未显示名为 ROOT 的实际根节点。显示上述内容的各种代码片段是：

javascript:

```
.jstree({
    // List of active plugins
    "plugins" : [ 
        "themes","json_data","ui","crrm","dnd","search","types","hotkeys","contextmenu" 
    ],

    // I usually configure the plugin that handles the data first
    // This example uses JSON as it is most common
    "json_data" : { 
        // This tree is ajax enabled - as this is most common, and maybe a bit more complex
        // All the options are almost the same as jQuery's AJAX (read the docs)
        "ajax" : {
            // the URL to fetch the data
            "url" : "_demo/server2.php",
            // the `data` function is executed in the instance's scope
            // the parameter is the node being loaded 
            // (may be -1, 0, or undefined when loading the root nodes)
            "data" : function (n) { 
                // the result is fed to the AJAX request `data` option
                return {

                    "operation" : "get_children", 
                    "id" : n.attr ? n.attr("id").replace("node_","") : 1

                }; 
            }
        }
    }, 
```

PHP：

```
function get_children($data) {
    $tmp = $this->_get_children((int)$data["id"]);
    if((int)$data["id"] === 1 && count($tmp) === 0) {
        ## - No data returned
    }
    $result = array();
    if((int)$data["id"] === 0) return json_encode($result);
    foreach($tmp as $k => $v) {
        $result[] = array(
            "just_id" => $k,
            "attr" => array("id" => "node_".$k, "rel" => $v[$this->fields["type"]]),
            "data" => $v[$this->fields["title"]],
            "owner" => $v[$this->fields["owner"]],
            "state" => ((int)$v[$this->fields["right"]] - (int)$v[$this->fields["left"]] > 1) ? "closed" : ""
        );
    }
    return json_encode($result);
}

function _get_children($id, $recursive = false) {
    $hbhbhbh = fSession::get('nodes_allowed[nodes]');
    if (in_array($id, $hbhbhbh)) {

        $children = array();
        if($recursive) {
            $node = $this->_get_node($id);
            $this->db->query("SELECT `".implode("` , `", $this->fields)."` FROM `".$this->table."` WHERE `".$this->fields["left"]."` >= ".(int) $node[$this->fields["left"]]." AND `".$this->fields["right"]."` <= ".(int) $node[$this->fields["right"]]." ORDER BY `".$this->fields["left"]."` ASC");
        }
        else {
            $this->db->query("SELECT `".implode("` , `", $this->fields)."` FROM `".$this->table."` WHERE `".$this->fields["parent_id"]."` = ".(int) $id." AND FIND_IN_SET(".$this->fields["owner"].", '".implode(',', fSession::get('nodes_allowed[nodes_visible]'))."') ORDER BY `".$this->fields["position"]."` ASC");
        }
        while($this->db->nextr()) $children[$this->db->f($this->fields["id"])] = $this->db->get_row("assoc");
        return $children;
    } else {
        $children = array();
        return $children;
    }
} 
```

正如您从 javascript 中看到的，我最初请求节点 1 加载。但它只显示它正下方的节点。如果我最初在树的下方加载另一个节点（实际上使该节点成为根节点），它会加载它下面的所有子节点，但不显示初始节点。

如果有人能指出我正确的方向，我将不胜感激。

谢谢艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:44:58.307

对于其他有同样问题的人..

我最终只是将根节点详细信息添加到加载树时 PHP 脚本返回的 json 字符串的前面。然后它只显示根节点，并在用户展开它时通过 ajax 加载叶子。比我想象的要简单......

# windows - 在命令提示符下重命名文件夹/目录

> ID：13345495
> 
> 赞同：0
> 
> 时间：2012-11-12T14:29:15.830
> 
> 标签：windows, command-line, rename

This ia follow up to this question [unix command to change directory name](https://stackoverflow.com/questions/13341114/unix-command-to-change-directory-name)

但现在我希望能够以编程方式更改 Windows 机器上文件夹的名称......

有什么建议么？

我认为`rename`在这里可能有用，但不太知道如何将文件夹的名称输入其中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:24:33.710

如果您有一个具有任意名称的目录，这是里面唯一的目录`relevant.directory.containing.directory.name.i.want.to.change`，并且您想将其重命名为`correct-files`，您可以使用这个 .CMD 批处理文件：

```
@echo off
Pushd relevant.directory.containing.directory.name.i.want.to.change
for /F "tokens=*" %%i in ('dir /ad /b') do rename "%%i" correct-files
Popd 
```

# c++ - 如何确定正在使用的显卡 (Win32)

> ID：13345499
> 
> 赞同：3
> 
> 时间：2012-11-12T14:29:26.160
> 
> 标签：c++, winapi, registry

对于我的 3ds max 插件中的错误报告功能，我想显示有关视频卡的信息（型号、驱动程序信息等）。

我已经发现可以从注册表中获取有关显卡的信息：

```
HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Control\Class\{4D36E968-E325-11CE-BFC1-08002BE10318}}\ 
```

然后每个图形卡都有一个以 开头的密钥`0000`。在我的笔记本上有两个这样的键，第一个代表我的板载显卡，我的插件可以忽略它。

如何确定当前使用的显卡名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T18:01:09.673

这可以使用 DirectX 10+ 来完成，如[MSDN 上所述](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476877%28v=vs.85%29.aspx)。

DirectX 10 默认包含在 Windows Vista 中，DirectX 11 包含在 Windows7 中，DirectX 11.1 包含在 Windows 8 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:42:19.797

我不知道，但我记得“WMI”可能是与这种查询相关的 API。

我搜索了`wmi video card`: 并发现[Win32_VideoController 类](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394512%28v=vs.85%29.aspx)可能包含您想要的信息（但我对此一无所知）。

# jquery - 如何在IE中实现多文件上传（如picasa）

> ID：13345503
> 
> 赞同：0
> 
> 时间：2012-11-12T14:29:44.260
> 
> 标签：jquery, internet-explorer, multifile-uploader

有谁知道我如何实现 IE 支持的多文件上传（如 picasa 网络）？众所周知的 Jquery 插件 blueimp 不支持 IE 中的多重上传，所以我无法从那里获得灵感...... Jquery 或纯 javascript 都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:32:52.410

我怀疑你会用普通的 JS 来实现，主要是为了这些东西 Flash(yuck) 被使用，例如，[http://code.google.com/p/swfupload/](http://code.google.com/p/swfupload/)

# java - 显示的是代码而不是组件

> ID：13345504
> 
> 赞同：2
> 
> 时间：2012-11-12T14:29:49.103
> 
> 标签：java, swing, jtable, jlabel, jcheckbox

请看下面的代码

```
import java.awt.GridLayout;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;

public class TestSend extends JFrame 
    {
        private Box names, emails;
        private JButton ok;
        private Map mMap;
        private JLabel nameLabel, emailLabel;
        private JPanel mainPanel;
        private JScrollPane scroll;
        private JTable table;
        private Object[][] data;
        private int counter = 0;
        private List nameHolder;

        private String[] colNames = {"Names","Emails"};

        public TestSend()
        {
            nameHolder = new ArrayList();

            names = new Box(BoxLayout.Y_AXIS);
            emails = new Box(BoxLayout.Y_AXIS);

            nameLabel = new JLabel("Names");
            emailLabel = new JLabel("Email");

            mainPanel = new JPanel();
            mainPanel.setLayout(new GridLayout(2,2));

            scroll = new JScrollPane(mainPanel);

            mainPanel.add(nameLabel);
            mainPanel.add(emailLabel);
            mainPanel.add(names);
            mainPanel.add(emails);

            mMap = new HashMap();

            mMap.put("yohan", "yy@yahoo.com");
            mMap.put("Gihan", "gihan@yahoo.com");
            mMap.put("Sumi", "sumi@yahoo.com");
            mMap.put("mac", "mac@yahoo.com");
            mMap.put("Jay", "jay@yahoo.com");
            mMap.put("Rom", "rom@yahoo.com");
            mMap.put("shane", "shane@yahoo.com");
            mMap.put("Mafe", "mafe@yahoo.com");
            mMap.put("willi", "");

            data = new Object[mMap.size()][mMap.size()];

            Iterator iter = mMap.entrySet().iterator();

            while(iter.hasNext())
            {
                Map.Entry mEntry = (Map.Entry)iter.next();

                JCheckBox cBox = new JCheckBox((String)mEntry.getKey());
                JLabel lLabel = new JLabel();

                names.add(cBox);
                String cName = cBox.getText();

                nameHolder.add(cName);

                if((String)mEntry.getValue() != null && ((String)mEntry.getValue()).length() != 0  && !((String)mEntry.getValue()).equals(""))
                {
                    lLabel = new JLabel((String)mEntry.getValue());
                   // lLabel.setPreferredSize(new Dimension(cBox.getPreferredSize().width,cBox.getPreferredSize().height));
                    emails.add(lLabel);
                    emails.add(new JPanel());

                }
                else
                {
                    lLabel = new JLabel();
                    //lLabel.setPreferredSize(new Dimension(cBox.getPreferredSize().width,cBox.getPreferredSize().height));
                    emails.add(lLabel);
                    emails.add(new JPanel());
                }

                data[counter][0] = cBox;
                data[counter][1] = lLabel;

                counter++;

            }

            table = new JTable(data,colNames);

            this.add(new JScrollPane(table));
            this.pack();
            this.setVisible(true);

        }

        public static void main(String[]args)
        {
            new TestSend();
        }
    } 
```

在这里，当我运行它时，显示的是代码，而不是 JCheckBox 或 JLabel。情况显示在附件中。请帮忙

![在此处输入图像描述](../Images/6cded2652ff28bdd4da5bc6c7f02d44a.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T14:35:34.587

您使用的`JTable` *根本*错误。您不会将`Component`s添加`Model`到`JTable`. 您`Model`由*values*组成。用于显示这些值的`JTable`用途。`Renderer`由于您的值是`Component`s，没有注册特定渲染器的类型，因此使用默认渲染器：`toString`. 这不是代码，而是`String`组件的表示。

请查看[JTable 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)。你需要从头开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:49:16.787

改变：

```
...
data[counter][0] = cBox;
data[counter][1] = lLabel;
.... 
```

到：

```
....
data[counter][0] = cBox.getText();
data[counter][1] = lLabel.getText();
..... 
```

![在此处输入图像描述](../Images/b11b1216774a2de5ea7c227bc4d6f3bc.png)

# php - MongoDB RockMongo 身份验证

> ID：13345506
> 
> 赞同：0
> 
> 时间：2012-11-12T14:29:52.910
> 
> 标签：php, mongodb, security, rockmongo

我正在将 MongoDB 与 RockMongo 一起使用，并且我希望激活身份验证。如何在 RockMongo 中“打开”或激活它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:34:37.970

有几个设置`config.php`：

```
//$MONGO["servers"][$i]["mongo_db"] = "MONGO_DATABASE";//default mongo db to connect, works only if mongo_auth=false
//$MONGO["servers"][$i]["mongo_user"] = "MONGO_USERNAME";//mongo authentication user name, works only if mongo_auth=false
//$MONGO["servers"][$i]["mongo_pass"] = "MONGO_PASSWORD";//mongo authentication password, works only if mongo_auth=false
$MONGO["servers"][$i]["mongo_auth"] = false;//enable mongo authentication? 
```

您可以使用 开启“mongo 身份验证” `$MONGO["servers"][$i]["mongo_auth"] = true`，也可以使用其他三个选项设置默认值。

另请参阅[http://rockmongo.com/wiki/configuration?lang=en_us#%23%23%23%23+mongo_db+%0D上的文档](http://rockmongo.com/wiki/configuration?lang=en_us#%23%23%23%23+mongo_db+%0D)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-25T19:18:02.823

Rockmongo 在身份验证方面存在一些问题，此分支包含对此的修复：[https ://github.com/myurasov/rockmongo](https://github.com/myurasov/rockmongo)

# tsql - 选择一年内的最大 DateTime 列值

> ID：13345507
> 
> 赞同：0
> 
> 时间：2012-11-12T14:29:54.153
> 
> 标签：tsql, sql-server-2005

使用 SQL Server 2005，我有一个表格，记录`datetime`了用户下班的时间。它将这些值存储在一`datetime`列中。

有时人们错误地提前下班，然后在正确的时间再次下班。

我的任务是提取用户当天早些时候离开的所有日期。有些日子有两个条目，我必须获得当天的最大条目。他们可能第二次在正确的时间打卡，但他们的第一次仍然在那里。

所以，有一张被称为`tblShift`有他们应该打卡的时间的桌子。这是`tblShift`. 日期时间值为`tblShift.ShiftEnd`。

然后是桌子`tblCLock`显示他们的时钟类型的表格。这些可能是轮班结束时的休息或实际打卡，或者是错误的打卡。

这是我这样做的错误方式：

```
SELECT 
    clockDateTime, 
    datediff(n, tblShift.ShiftEnd, tblClock.ClockDateTime) as minutes 
from 
    tblClock
INNER JOIN 
    tblShift ON tblClock.userid = tblShift.userid 
                AND Year(tblClock.ClockDateTime) = Year(tblShift.ShiftEnd) 
                AND Month(tblClock.ClockDateTime) = Month(tblShift.ShiftEnd)
                AND Day(tblClock.ClockDateTime) = Day(tblShift.ShiftEnd)
WHERE 
    tblClock.USERID = 29689 --one of the id's in the table
    and clocktypeid = 1
    and clockstatusid = 2
    and tblShift.ShiftEnd between '2011-11-11 12:00:00 AM' and '2012-11-11 11:59:59 PM'
    and tblShift.ShiftTypeID = 1
    and datediff(n, tblShift.ShiftEnd, tblClock.ClockDateTime) < 0
ORDER BY 
    tblClock.clockdatetime desc 
```

发生的情况是，错误的提前下班是在他们错误下班的日子使用，然后在轮班结束时在适当的时间下班。

我试图弄清楚如何在这个查询中使用 MAX，这样我每天只能得到最大值。

我已经重新开始了几次，但都没有成功。

**tbl时钟**：

```
[clockID] [int] IDENTITY(1,1) NOT NULL,
[clockStatusID] [int] NULL,
[clockTypeID] [int] NULL,
[userID] [int] NULL,
[clockDateTime] [datetime] NULL CONSTRAINT [DF_tblClock_clockDateTime]  DEFAULT (getdate()),
[clockNotes] [text] NULL, 
```

**tblShift**：

```
[shiftID] [int] IDENTITY(1,1) NOT NULL,
[shiftTypeID] [int] NULL CONSTRAINT [DF_tblShift_shiftTypeID]  DEFAULT ((1)),
[userID] [int] NULL,
[shiftStart] [datetime] NULL,
[shiftEnd] [datetime] NULL,
[shiftNotes] [text] NULL, 
```

更新：我大部分时间都在做这个，并且已经做到了这一点：

```
SELECT
max(tblClock.clockdatetime) as clockdatetime, 
max(tblShift.ShiftEnd),
datediff(n, max(tblShift.ShiftEnd), max(tblClock.ClockDateTime)) as minutes 
FROM 
tblclock
INNER JOIN 
tblShift ON tblClock.userid = tblShift.userid 
AND Year(tblClock.ClockDateTime) = Year(tblShift.ShiftEnd) 
AND Month(tblClock.ClockDateTime) = Month(tblShift.ShiftEnd)
AND Day(tblClock.ClockDateTime) = Day(tblShift.ShiftEnd)
WHERE 
tblClock.userid = 29689
AND 
tblClock.clocktypeid = 1
AND 
tblClock.clockstatusid = 2
AND 
tblShift.ShiftEnd between '2011-10-01 12:00:00 AM' AND '2012-10-01 11:59:59 PM'
AND 
tblShift.ShiftTypeID = 1
GROUP BY 
Year(tblClock.clockdatetime),Month(tblClock.clockdatetime),day(tblClock.clockdatetime)
ORDER BY 
max(tblClock.clockdatetime) desc 
```

我使用我的脚本语言只显示分钟小于零的那些，因为我无法将 AND Minutes < 0 放入 where 部分。

另外，感谢您对问题进行正确措辞的编辑。前进中...

# php - 获取可重复唯一标识符的 Javascript 或 PHP 方法？

> ID：13345522
> 
> 赞同：0
> 
> 时间：2012-11-12T14:31:12.323
> 
> 标签：php, javascript, web-services, cross-browser, uniqueidentifier

我尝试搜索，但没有找到任何我认为正是我正在寻找的东西，简而言之，如果这是重新发布，我很抱歉。

我目前正在寻找某种 ID 或 GUID 类型的 ID，它可以识别用户机器或用户或类似的东西，每次（无需登录到任何登录系统）他们都可以获得与他们直接相关的 id。这可能没有意义，所以请继续阅读......

基本上，我希望他们每次点击页面以获取我正在编写的应用程序的某种分析部分时都获得相同的 id。我可以访问服务器端脚本，对我来说最快和最简单的是 PHP，我也一直在研究它，但似乎无法找到一种方法来使该唯一 ID 可重复。

我真的不想依赖cookies，这就是为什么我想尝试制作这个可重复的id，我知道这是一个很长的镜头，但是我可能不太了解技术中的某些东西（可能是闪存或其他东西) 每次访问该页面时都能够为该机器/用户/mac地址一遍又一遍地获取一个ID？

我还将为会话存储一个典型的 GUID（这已经完成），但困难的部分是 Id 就像另一个 ID 以某种方式与 USER、PC、MAC 等相关。

TLDR：有没有人对我如何获得可重复的标识符有任何想法（当同一台机器或用户每次访问页面时访问相同的字符串）？有没有一种我可能没有想到的技术可以做到这一点，主要是跨浏览器可以做到这一点，我想我已经用完了 java 脚本选项，可能是 flash 或 HTML5 之类的东西（虽然我会喜欢它可以跨浏览器访问）或者甚至是某种 API 或服务？

是否有一堆字段可以可靠地连接和编码，即使它不是 100% 万无一失的？闪存或其他一些技术可以抓住机器或其他东西独有的东西吗？有没有其他一些非标准的技术可以做到这一点，比如动作脚本或 VBScript（虽然我什至不知道这是否仍然有效，哈哈）或类似的东西？

非常感谢，如果我没有看清楚或者帖子太长，我很抱歉：）

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-12T14:40:23.910

如果你使用`$_SERVER`数组，你可以读出一些客户特定的信息。就像主机名、IP 和其他东西一样。在找到满足您需要的足够独特的客户端信息组合后，您只需对其进行哈希处理，并将其存储在某个地方以供进一步使用，例如在文件、数据库或 APC 等缓存中。

例子：

```
$strUserId = $_SERVER['REMOTE_HOST'] . $_SERVER['HTTP_USER_AGENT'];
$strUserId = hash( 'sha256', $strUserId );

if( clientExists( $strUserId ) ) {
  $oSomeData = loadClientData( $strUserId );
}
else {
  $oSomeData = new Stuff();
}

$oModifiedData = doStuffWith( $oSomeData );

saveClientData( $strUserId, $oModifiedData ); 
```

问题在于，具有相同 IP 和相同浏览器（-version）的 2 个用户可以获得相同的 ID。此外，如果用户返回一个新的主机名或浏览器版本，他将获得一个新的 ID。

如果不在客户端上存储一些信息，您将无法保证安全。

# ios - 过早调用 textFieldDidBeginEditing

> ID：13345523
> 
> 赞同：7
> 
> 时间：2012-11-12T14:31:20.197
> 
> 标签：ios, uitextfield, autoscroll, uitextfielddelegate

我有一个应用程序，如果键盘显示，我必须向上滚动。要获取键盘大小，我正在注册**UIKeyboardWillShowNotification**事件，如下所示：

```
 [[NSNotificationCenter defaultCenter]
     addObserver:self
     selector:@selector(keyboardWillShow:)
     name:UIKeyboardWillShowNotification
     object:self.view.window] 
```

这确实有效，问题是，它是在调用**textFieldDidBeginEditing**之后被调用的。所以，我无法获得实际的键盘大小，但只有在该字段已经处于编辑模式之后，这违背了首先注册此事件的整个目的。我确定我调用了**UIKeyboardWillShowNotification**而不是**UIKeyboardDidShowNotification**，尽管切换这两个会产生相同的结果：首先调用了委托方法，然后才调用了通知方法。关于如何扭转这种局面的任何想法？目前我正在硬编码大小，这是非常糟糕的做法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-19T16:09:10.863

我可以推荐一个 GitHub 存储库吗

[https://github.com/hackiftekhar/IQKeyboardManager](https://github.com/hackiftekhar/IQKeyboardManager)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-14T17:42:52.263

这是我为这个用途编写的一个基类。它是`UIViewController` 每当我想实现这种行为的子类，我只是让我的视图控制器成为这个基类的子类。

顺便说一句 - 你是对的。`textFieldDidBeginEditing`在键盘出现后调用，这就是为什么你想在我的课堂上描述的键盘的回调方法中向上滚动。

另请注意，要使其正常工作，您需要将整个视图嵌入到滚动视图中，并将滚动视图的 IBOutlet 连接到它。

如果您不使用故事板，请删除 IBOutlet 部分并将您的视图嵌入到滚动视图中并在代码中建立连接。

在这之后说这里是代码：

**头文件**

```
#import <UIKit/UIKit.h>

@interface BaseViewControllerWithKeyboard : BaseViewController

@property (nonatomic, strong) IBOutlet UIScrollView *scrollView;
@property (nonatomic, strong) UITextField *activeField;

@end 
```

**实施文件**

```
#import "BaseViewControllerWithKeyboard.h"

@interface BaseViewControllerWithKeyboard ()

@end

@implementation BaseViewControllerWithKeyboard

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self registerForKeyboardNotifications];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

// Call this method somewhere in your view controller setup code.
- (void)registerForKeyboardNotifications
{
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWasShown:)
                                                 name:UIKeyboardDidShowNotification object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillBeHidden:)
                                                 name:UIKeyboardWillHideNotification object:nil];

}

// Called when the UIKeyboardDidShowNotification is sent.
- (void)keyboardWasShown:(NSNotification*)aNotification
{
    NSDictionary* info = [aNotification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
    _scrollView.contentInset = contentInsets;
    _scrollView.scrollIndicatorInsets = contentInsets;

    // If active text field is hidden by keyboard, scroll it so it's visible
    // Your app might not need or want this behavior.
    CGRect aRect = self.view.frame;
    aRect.size.height -= kbSize.height;
    if (!CGRectContainsPoint(aRect, _activeField.frame.origin) ) {
        [self.scrollView scrollRectToVisible:_activeField.frame animated:YES];
    }
}

// Called when the UIKeyboardWillHideNotification is sent
- (void)keyboardWillBeHidden:(NSNotification*)aNotification
{
    UIEdgeInsets contentInsets = UIEdgeInsetsZero;
    _scrollView.contentInset = contentInsets;
    _scrollView.scrollIndicatorInsets = contentInsets;
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T10:35:55.230

我在 XCode 5 中打开了一个新项目，添加了一个`UITextField`并`ViewController`连接了它的委托。

这是我唯一的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(myNotificationMethod:) name:UIKeyboardWillShowNotification object:nil];
}

- (void)myNotificationMethod:(NSNotification*)notification
{
    NSDictionary* keyboardInfo = [notification userInfo];
    NSValue* keyboardFrameBegin = [keyboardInfo valueForKey:UIKeyboardFrameBeginUserInfoKey];
    CGRect keyboardFrameBeginRect = [keyboardFrameBegin CGRectValue];
    NSLog(@"Rect: %@",NSStringFromCGRect(keyboardFrameBeginRect));
} 
```

这是日志输出：

**肖像：**

```
 Rect: {{0, 480}, {320, 216}} 
```

**景观：**

```
 Rect: {{-162, 0}, {162, 480}} 
```

**编辑：**

关于`textFieldDidBeginEditing`被调用之前`name:UIKeyboardWillShowNotification`，我真的不明白为什么 textField 是否处于编辑模式会有所不同，但有几种方法可以解决这个问题。

1.  从 textFieldShouldBeginEditing 保存对 textField 的引用，并在触发 textFieldShouldBeginEditing 时在 myNotificationMethod 中使用它。

2.  像这样玩`UIResponder`：

在`textFieldDidBeginEditing`-> 保存对的引用`UIResponder`并将 更改为`UIResponder`与临时无关的引用。在`myNotificationMethod`对 textField 做任何你想做的事情（不是在编辑模式\第一响应者），当你完成后，让它成为你的 main `UIResponder`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-19T15:57:09.880

根据 Apple 文档，**UIKeyboardWillShowNotification**在键盘显示之前被调用，而**UITextFieldDidBeginEditing**在文本字段成为第一响应者之后被调用。显示键盘的过程在文本字段成为第一响应者**后**开始，并且仅当键盘尚未显示时才开始。这意味着**UIKeyboardWillShowNotification**将在**UITextFieldDidBeginEditing**之后调用。所以**UITextFieldDidBeginEditing**不会过早调用。

如果您只想向上滚动以使文本字段不会隐藏在键盘下，您可以将滚动视图的内容偏移设置为**UITextFieldShouldBeginEditing**或**UITextFieldDidBeginEditing**中文本字段的 y 原点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-03T15:45:58.297

老问题，但我今天遇到了同样的问题。我已经建立了一些“肮脏”的解决方法，它不会强迫我对键盘大小进行硬编码。我只是在 viewDidAppear 中做了以下事情（注意 - Swift）：

```
 override func viewDidAppear(animated: Bool) {
    super.viewDidAppear(animated)
    self.infoTextField.becomeFirstResponder()
    self.infoTextField.resignFirstResponder()
} 
```

这会触发**UIKeyboardWillShowNotification**，您可以从通知中获取键盘大小并将其存储在属性中。希望这对某人有所帮助，它在我的情况下有效。

# .net - .NET 与 OpenLDAP

> ID：13345528
> 
> 赞同：2
> 
> 时间：2012-11-12T14:31:40.070
> 
> 标签：.net, openldap

我试图让我的应用程序对存储在 OpenLDAP 上的用户进行身份验证。据我所知，没有适用于 .NET 的 API，并且只有适用于 Java 的库。

我尝试使用 DirectorySearcher 的 DirectoryEntry 没有成功，并且 LDAPConnection 也没有工作。

有没有人做过类似的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T16:32:12.270

这对于 VB .Net 怎么样：

```
' for networkcredential
Imports System.Net
Imports System.DirectoryServices.Protocols.DirectoryConnection
Imports System.DirectoryServices.Protocols.LdapConnection
Imports System.DirectoryServices.Protocols.LdapDirectoryIdentifier

Public Function IsAuthenticated( ByVal username As String, ByVal pwd As String) As Boolean
          ' against OpenLDAP

        Dim strLDAPServer As String = String.Empty

        'users full DistinguishedName in OpenLDAP
        Dim uid As String = "UID=" & username & _
         ",ou=People,dc=example,dc=com"

        strLDAPServer = "my.openldapserver.com"

        Dim ldapDirectoryIdentifier As New System.DirectoryServices.Protocols.LdapDirectoryIdentifier(strLDAPServer, 389, True, False)
        Dim networkCredential As New NetworkCredential(uid, pwd)
        Try
            Dim ldap As New System.DirectoryServices.Protocols.LdapConnection(ldapDirectoryIdentifier, networkCredential)
            ldap.SessionOptions.SecureSocketLayer = False
            ldap.SessionOptions.ProtocolVersion = 3
            ldap.AuthType = ldap.AuthType.Basic
            ldap.Bind()

        Catch lex As Exception
            'Authentication fails - bad username or password

            Return False
        End Try

        Return True

    End Function 
```

基于此处的 C# .Net 帖子：http: [//blogs.msdn.com/b/alexch/archive/2012/05/07/sample-code-to-query-openldap-directory-via-net-system-directoryservices-协议.aspx](http://blogs.msdn.com/b/alextch/archive/2012/05/07/sample-code-to-query-openldap-directory-via-net-system-directoryservices-protocols.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T09:06:10.100

```
// Search for a user
DirectoryEntry entry = new DirectoryEntry(
                                          "LDAP://127.0.0.1/ou=People,dc=maxcrc,dc=com",
                                          "cn=Manager, dc=maxcrc, dc=com ",
                                          "secret",
                                          AuthenticationTypes.FastBind
                                         );
object obj = entry.NativeObject;

DirectorySearcher searcher = new DirectorySearcher(entry);
searcher.Filter = "(cn=agent001)";
searcher.PropertiesToLoad.Add("cn");

SearchResult result = searcher.FindOne();
if (result != null)
    Console.WriteLine("Found");
else
    Console.WriteLine("Not found"); 
```

# javascript - Android 上的 IFA 等效项以及如何从浏览器/javascript 访问它

> ID：13345530
> 
> 赞同：3
> 
> 时间：2012-11-12T14:31:47.220
> 
> 标签：javascript, android, ios

[IFA](http://www.businessinsider.com/ifa-apples-iphone-tracking-in-ios-6-2012-10) (Identifier for Advertisers) 是 iOS6 中的新东西，类似于一个唯一的 ID，可以传递给广告商以匿名保存和跟踪用户上下文（并希望提供更好的体验）。

我的问题特别来自**网络开发**领域（即移动浏览器/javascript）：

Android 上的 IFA 是否有任何等价物（如果有，它存在于哪个操作系统版本中）？如果没有，常见的替代方案是什么 - 它只是一个 cookie 吗？如果是这样，实现它的正确技术是什么（我猜第 3 方 cookie / 安全性应该在上下文中弹出）？

实际上，任何用于跟踪用户上下文以了解广告相关性的有效/格式良好的方式都将受到欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:01:48.297

Android 和 iOS 等移动平台的唯一标识符基本上使用 Android_ID 和 UDID（已弃用），现在它的 IFA。Android 操作系统还允许使用其他系统标识符，例如设备（IMEI、MEID 或 ESN）和订户（来自 SIM 和 WLAN MAC 地址的 IMSI）标识符。

对于移动网络，如在线网络，使用第三方 cookie。第三方 cookie 在 Android 设备上有效。但在 iOS 设备中，Safari 浏览器默认禁用第三方 cookie。为了克服这个问题，广告网络可以通过用户访问的网站使用不可见的 iframe 写入 cookie（看起来像第一方 cookie）。

另一种方法是收集浏览器本身披露的信息，为该设备建立指纹。这取决于浏览器（是否启用了 javascript）以及消费者使用浏览器的频率，很容易达到 94% 以上的准确率。

另一种方法是依赖域特定的持久标识符。（[原始来源](http://www.truste.com/developer/?p=86)）

[Blue Cava](http://www.bluecava.com/technology/the-platform/)提供设备指纹识别平台，用于提供正确的在线内容并识别显示良好或不良行为的设备。如果您愿意为此服务付费，请查看此内容。BlueCava 还为需要更多灵活性和集成选项的用户提供 JavaScript 客户端 API。要集成，请将 JavaScript 放在最终用户将使用的页面的 HTML 中，它将调用 BlueCava 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:19:59.327

...或者生成一个 GUID 并将其存储在 sharedPreferences 中？

```
UUID.randomUUID(); 
```

# entity-framework - 用于 Postgresql 的 Asp.net Mvc MigrationSqlGenerator 给了我一个错误

> ID：13345533
> 
> 赞同：3
> 
> 时间：2012-11-12T14:31:50.600
> 
> 标签：entity-framework, c#-4.0, asp.net-mvc-4, migration

我已禁用自动迁移，并为 Postgresql 创建了一个新的 MigrationSqlGenerator：

```
 public Configuration()
    {
        AutomaticMigrationsEnabled = false;
        SetSqlGenerator("Npgsql", new PostgreSqlMigrationSqlGenerator());
    } 
```

从包管理器控制台，我执行命令“Update-Database -Verbose”。所有迁移都正确执行，它完美地创建了模式和所有表（包括 __MigrationHistory 表）。在创建结束时，它向我显示此错误：

```
 System.FormatException: Input string was not in a correct format.
   at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   at System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)
   at System.Convert.ToInt32(String value)
   at System.Data.Entity.Migrations.Infrastructure.EdmModelDiffer.BuildColumnModel(XElement property, String entitySetName, ModelMetadata modelMetadata)
   at System.Data.Entity.Migrations.Infrastructure.EdmModelDiffer.BuildAlterColumnOperation(String table, XElement targetProperty, String targetEntitySetName, ModelMetadata targetModelMetadata, XElement sourceProperty, String sourceEntitySetName, ModelMetadata sourceModelMetadata)
   at System.Data.Entity.Migrations.Infrastructure.EdmModelDiffer.<FindChangedColumns>b__ef(<>f__AnonymousType1d`2 <>h__TransparentIdentifiere5)
   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at System.Data.Entity.Migrations.Infrastructure.EdmModelDiffer.Diff(XDocument sourceModel, XDocument targetModel, String connectionString)
   at System.Data.Entity.Migrations.DbMigrator.IsModelOutOfDate(XDocument model, DbMigration lastMigration)
   at System.Data.Entity.Migrations.DbMigrator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
   at System.Data.Entity.Migrations.DbMigrator.Update(String targetMigration)
   at System.Data.Entity.Migrations.Infrastructure.MigratorBase.Update(String targetMigration)
   at System.Data.Entity.Migrations.Design.ToolingFacade.UpdateRunner.RunCore()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run()
Input string was not in a correct format. 
```

__MigrationHistory 为空。没有一个迁移是注册的。我已经克隆了 EF 项目，并且似乎在以下方法中出现错误：

```
public IEnumerable<MigrationOperation> Diff(XDocument sourceModel, XDocument targetModel, bool? includeSystemOperations = null)
    {
        DbProviderInfo providerInfo;

        _source
            = new ModelMetadata
                  {
                      Model = sourceModel,
                      StoreItemCollection = sourceModel.GetStoreItemCollection(out providerInfo),
                      ProviderManifest = GetProviderManifest(providerInfo),
                      ProviderInfo = providerInfo
                  };

        _target
            = new ModelMetadata
                  {
                      Model = targetModel,
                      StoreItemCollection = targetModel.GetStoreItemCollection(out providerInfo),
                      ProviderManifest = GetProviderManifest(providerInfo),
                      ProviderInfo = providerInfo
                  };

        _consistentProviders
            = _source.ProviderInfo.ProviderInvariantName.EqualsIgnoreCase(
                _target.ProviderInfo.ProviderInvariantName)
              && _source.ProviderInfo.ProviderManifestToken.EqualsIgnoreCase(
                  _target.ProviderInfo.ProviderManifestToken);

        var renamedColumns = FindRenamedColumns().ToList();
        var addedColumns = FindAddedColumns(renamedColumns).ToList();
        var alteredColumns = FindChangedColumns().ToList();
        var removedColumns = FindRemovedColumns(renamedColumns).ToList();
        var renamedTables = FindRenamedTables().ToList();
        var movedTables = FindMovedTables().ToList();
        var addedTables = FindAddedTables(renamedTables).ToList();

        var columnNormalizedSourceModel = BuildColumnNormalizedSourceModel(renamedColumns);

        var addedForeignKeys = FindAddedForeignKeys(columnNormalizedSourceModel).ToList();
        var removedTables = FindRemovedTables(renamedTables).ToList();
        var removedForeignKeys = FindRemovedForeignKeys(columnNormalizedSourceModel).ToList();
        var changedPrimaryKeys = FindChangedPrimaryKeys(columnNormalizedSourceModel).ToList();

        if (includeSystemOperations == null)
        {
            includeSystemOperations
                = sourceModel.HasSystemOperations() && targetModel.HasSystemOperations();
        }

        return renamedTables
            .Concat<MigrationOperation>(movedTables)
            .Concat(removedForeignKeys)
            .Concat(removedForeignKeys.Select(fko => fko.CreateDropIndexOperation()))
            .Concat(renamedColumns)
            .Concat(addedTables)
            .Concat(addedColumns)
            .Concat(alteredColumns)
            .Concat(changedPrimaryKeys)
            .Concat(addedForeignKeys.Select(fko => fko.CreateCreateIndexOperation()))
            .Concat(addedForeignKeys)
            .Concat(removedColumns)
            .Concat(removedTables)
            .Where(o => (includeSystemOperations == true) || !o.IsSystem)
            .ToList();
    } 
```

我不知道为什么，我不能在这个错误面前继续前进。有人知道如何解决这个问题吗？

**更新**

我已经实现了`Generate(InsertHistoryOperation insertHistoryOperation)`添加迁移历史记录的方法，如下所示：

```
protected override void Generate(InsertHistoryOperation insertHistoryOperation)
    {

        using (var writer = Writer())
        {

            writer.Write("INSERT INTO \"dbo\".\"__MigrationHistory\" (\"MigrationId\", \"Model\", \"ProductVersion\") VALUES ('");

            writer.Write(insertHistoryOperation.MigrationId + "old");

            writer.Write("',E'");

            writer.Write("x0" + insertHistoryOperation.Model.ToHexString());

            writer.Write("','");

            writer.Write(insertHistoryOperation.ProductVersion);

            writer.Write("')");

            Statement(writer);

        }

    } 
```

数据库似乎创建得很完美，但错误仍然让我抓狂。我是否以错误的方式保存模型？

该错误应该在 EF 的 EdmModelDiffer.cs 上尝试将 MaxLength 转换为 int 的例程中引发。

```
private static ColumnModel BuildColumnModel(
        XElement property, string entitySetName, ModelMetadata modelMetadata)
    {
        Contract.Requires(property != null);
        Contract.Requires(!string.IsNullOrWhiteSpace(entitySetName));
        Contract.Requires(modelMetadata != null);

        var nameAttribute = property.NameAttribute();
        var nullableAttribute = property.NullableAttribute();
        var maxLengthAttribute = property.MaxLengthAttribute();
        var precisionAttribute = property.PrecisionAttribute();
        var scaleAttribute = property.ScaleAttribute();
        var storeGeneratedPatternAttribute = property.StoreGeneratedPatternAttribute();
        var storeType = property.TypeAttribute();

        var entityType
            = modelMetadata.StoreItemCollection
                .OfType<EntityType>()
                .Single(et => et.Name.EqualsIgnoreCase(entitySetName));

        var edmProperty
            = entityType.Properties[nameAttribute];

        var typeUsage = modelMetadata.ProviderManifest.GetEdmType(edmProperty.TypeUsage);

        var defaultStoreTypeName = modelMetadata.ProviderManifest.GetStoreType(typeUsage).EdmType.Name;

        var column
            = new ColumnModel(((PrimitiveType)edmProperty.TypeUsage.EdmType).PrimitiveTypeKind, typeUsage)
                  {
                      Name = nameAttribute,
                      IsNullable
                          = !string.IsNullOrWhiteSpace(nullableAttribute)
                            && !Convert.ToBoolean(nullableAttribute, CultureInfo.InvariantCulture)
                                ? false
                                : (bool?)null,
                      MaxLength
                          = !string.IsNullOrWhiteSpace(maxLengthAttribute)
                                ? Convert.ToInt32(maxLengthAttribute, CultureInfo.InvariantCulture)
                                : (int?)null,
                      Precision
                          = !string.IsNullOrWhiteSpace(precisionAttribute)
                                ? Convert.ToByte(precisionAttribute, CultureInfo.InvariantCulture)
                                : (byte?)null,
                      Scale
                          = !string.IsNullOrWhiteSpace(scaleAttribute)
                                ? Convert.ToByte(scaleAttribute, CultureInfo.InvariantCulture)
                                : (byte?)null,
                      StoreType
                          = !storeType.EqualsIgnoreCase(defaultStoreTypeName)
                                ? storeType
                                : null
                  };

        column.IsIdentity
            = !string.IsNullOrWhiteSpace(storeGeneratedPatternAttribute)
              && storeGeneratedPatternAttribute.EqualsIgnoreCase("Identity")
              && _validIdentityTypes.Contains(column.Type);

        Facet facet;
        if (typeUsage.Facets.TryGetValue(DbProviderManifest.FixedLengthFacetName, true, out facet)
            && facet.Value != null
            && (bool)facet.Value)
        {
            column.IsFixedLength = true;
        }

        if (typeUsage.Facets.TryGetValue(DbProviderManifest.UnicodeFacetName, true, out facet)
            && facet.Value != null
            && !(bool)facet.Value)
        {
            column.IsUnicode = false;
        }

        var isComputed
            = !string.IsNullOrWhiteSpace(storeGeneratedPatternAttribute)
              && storeGeneratedPatternAttribute.EqualsIgnoreCase("Computed");

        if ((column.Type == PrimitiveTypeKind.Binary)
            && (typeUsage.Facets.TryGetValue(DbProviderManifest.MaxLengthFacetName, true, out facet)
                && (facet.Value is int)
                && ((int)facet.Value == 8))
            && isComputed)
        {
            column.IsTimestamp = true;
        }

        return column;
    } 
```

# unit-testing - 如何使用脚手架模板 Test.groovy 为控制器生成单元测试？

> ID：13345534
> 
> 赞同：0
> 
> 时间：2012-11-12T14:31:53.493
> 
> 标签：unit-testing, testing, grails, controller, scaffolding

如果我使用命令“create-controller”生成控制器，Grails 会生成控制器和单元测试（使用模板 /src/templates/scaffolding/Test.groovy）。

在更改了模板的某些部分之后，我现在想重新生成单元测试，但 Grails 不会生成它们。我试过：

*   `"create-unit-test"`但这将使用模板 /src/templates/testing/UnitTest.groovy `"create-integration-test"`并将使用模板 /src/templates/testing/Generic.groovy

那么如何使用 Test.groovy 模板为控制器生成单元测试呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:25:41.350

在创建工件或使用脚手架时，Grails 使用模板来创建域类、控制器、视图等。默认模板是 Grails 发行版的一部分，用于开箱即用的行为，但可以根据项目的特定需求进行定制。

将 Grails 在代码生成期间使用的模板复制到您的项目目录：

```
$ grails install-templates

src/templates/
├── artifacts
│   ├── Tests.groovy
│   ├── ...
├── scaffolding
│   ├── Test.groovy
│   ├── ...
└── war
    └── web.xml 
```

artifacts 目录包含 create-* 命令使用的模板。
脚手架目录包含 generate-* 命令使用的模板。
war 目录包含用于生成部署描述符的 web.xml 模板。

所以你需要编辑：

*   `src/templates/artifacts/Tests.groovy`文件，当执行`grails create-unit-test`或`grails create-integration-test`命令时。

*   `src/templates/scaffolding/Test.groovy`执行`grails generate-all`或`grails generate-controller`命令时。

在您的情况下，重新生成您的控制器测试并**仅覆盖您的测试文件**：

```
$ grails generate-controller com.arturoherrero.Post
| Generating controller for domain class com.arturoherrero.Post
> File /grails-app/controllers/com/arturoherrero/PostController.groovy already exists. Overwrite?[y,n,a] n
> File /test/unit/com/arturoherrero/PostControllerTests.groovy already exists. Overwrite?[y,n,a] y
| Finished generation for domain class com.arturoherrero.Post 
```

# jquery - 如果其父级具有类 xyz，如何将类添加到锚点

> ID：13345539
> 
> 赞同：3
> 
> 时间：2012-11-12T14:32:14.677
> 
> 标签：jquery

如果其父级具有类 xyz，如何将类添加到锚点

我到目前为止...

```
if($("a").parents(".xyz").length > 0) {
addClass(".xyz")
}; 
```

显然这不起作用，否则我不会在这里问:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T14:32:56.983

简单地做

```
$(".xyz a").addClass("xyz"); 
```

这会将类添加到所有具有 class 父级的`xyz`元素。`a``xyx`

为了减少歧义：如果要将类添加到具有类父级`xyz`的所有元素，请使用`a``abc`

```
$(".abc a").addClass("xyz"); 
```

如果要确保存在直接的父子关系，请使用

```
$(".abc > a").addClass("xyz"); 
```

# delphi - 如何使用 THTTPReqResp 添加/覆盖 HTTP 标头？

> ID：13345540
> 
> 赞同：3
> 
> 时间：2012-11-12T14:32:17.827
> 
> 标签：delphi, http, delphi-xe2, indy

我想接近 Exchange EWS Web 服务并自己处理 XML SOAP 组合（请求）和解析（响应）。因此，THTPPRIO 似乎有点矫枉过正。

我正在尝试 THTTPReqResp，但我被困在这里：

Web 服务不遵循规范并期望

```
Content-Type: text/xml; charset=utf-8 
```

代替

```
Content-Type: text/xml; charset="utf-8" 
```

如何使用 THTTPReqResp 添加/覆盖标头？这是到目前为止的代码：

```
HTTPReqResp1.SoapAction := '"http://schemas.microsoft.com/exchange/services/2006/messages/ResolveNames"';
// HTTPReqResp1.UseUTF8InHeader := true; // Already
HTTPReqResp1.URL := 'https://webmail.mailserver.nl/ews/exchange.asmx';
HTTPReqResp1.Execute(TSRequest,TSResponse); 
```

Content-Type 错误发生在 Execute 上（如果我使用 Send/Recieve 而不是 Execute，则在 Receive 上）

顺便说一句，如果 THTTPReqResp 不是正确的方法，欢迎发表评论。我也在尝试 TidHTTP，请参阅[这篇文章](https://stackoverflow.com/questions/13345474/authorization-failure-tidhttp-over-https)。

带有 Indy 10.5.8.0 的 Delphi XE2 更新 4

谢谢简

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:53:08.387

我找到了：

```
procedure TForm1.BeforeRRPost(const HTTPReqResp: THTTPReqResp; Data: Pointer);
const
   cContentHeader = 'Content-Type: text/xml; charset=utf-8';
begin
   HttpAddRequestHeaders(Data, PChar(cContentHeader), Length(cContentHeader), HTTP_ADDREQ_FLAG_REPLACE);
// Or  HttpAddRequestHeaders(Data, PChar(cContentHeader), Length(cContentHeader), HTTP_ADDREQ_FLAG_ADD);
end; 
```

然后在 HTTPReqResp1.Execute 或 HTTPReqResp1.Send 之前：

```
HTTPReqResp1.OnBeforePost := BeforeRRPost; 
```

# java - 找出java中的内存分配热点

> ID：13345541
> 
> 赞同：16
> 
> 时间：2012-11-12T14:32:20.990
> 
> 标签：java, performance, memory-management, garbage-collection, jvm

我们的 GC 正在努力工作，我们想要减少一些暂停。在调整实际 JVM GC 参数之前或期间，我们有一些内存分配问题想要解决。

我想知道哪些对象让 GC 出汗：

1.  有没有办法知道每次 GC 工作时疏散了哪些对象？
2.  有没有办法知道每次 GC 工作时哪些对象在区域之间移动？
3.  有没有办法知道伊甸园区域中有哪些物体？

我正在广泛使用 Jprofiler 和 Memory Analyzer。我想在我的登台环境中获取有关正在运行的应用程序的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T03:32:00.183

对于 2 和 3，您可以在应用程序的运行会话期间将`-XX:+PrintGCDetails`and`-XX:+PrintGCTimeStamps`标志与 Oracle 或 OpenJDK可执行文件一起使用`java`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T05:33:31.190

我们可能会尝试使用一些字节码工具来添加 finalize（可能是对象），这将在日志中为我们提供这些信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T15:12:44.017

对于问题 1， 可以使用[Phantom References 。](http://docs.oracle.com/javase/6/docs/api/java/lang/ref/PhantomReference.html)这将允许您在对象被 GC（或 GC-able）时收到通知。

至于另外两个，我不太清楚。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T02:36:40.237

找出正在运行的 JVM 中的内存分配可能需要付出很大的努力。

相反，您可以在 GC 或分配时检查热点[源代码](http://openjdk.java.net/)并添加您自己的日志。编译您自己的热点并跟踪日志。

* * *

使用`-XX:+PrintCompilation`可以帮助你。

`-XX:+PrintCompilation`标志输出如下所示：

```
1  sb   java.lang.ClassLoader::loadClassInternal  (6 bytes)     
2  b    java.lang.String::lastIndexOf  (12 bytes)
3  s!b  java.lang.ClassLoader::loadClass  (58 bytes) 
```

标志对应于：

```
b    Blocking compiler (always set for client)  
*    Generating a native wrapper    
%    On stack replacement   
!    Method has exception handlers  
s    Synchronized method 
```

[更多细节](http://blog.joda.org/2011/08/printcompilation-jvm-flag.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T07:20:01.153

**OldGen 空间的内容：**您可以找出哪些对象驻留在 OldGen 中。您需要在 Full GC: 之前和之后打印直方图`-XX:+PrintClassHistogramBeforeFullGC -XX:+PrintClassHistogramAfterFullGC`。并且由于 YoungGen 集合在 Full GC 之前执行，这些**直方图将显示老年代的内容**。

**检测过早提升的对象：**要确定是否有任何实例提前提升，您需要研究直方图以查看哪些类`OldGen`应该驻留在`YoungGen`. 这不能自动完成，您需要推理每个类及其实例的目的以确定对象是否是临时的。

**YoungGen/Eden 空间的内容：**我还没有找到一种方法来区分哪些对象驻留在例如 Eden 中。您可能知道，*jProfiler*和*MemoryAnalyzer*可以转储堆，但这不会告诉您对象驻留在哪个区域。但是，您也可以定期拍摄直方图快照，然后编写一个简单的脚本来解析输出并告诉您哪些实例增长最快，请使用 : `jmap -histo $pid`。

# json - Erlang JSON API 数据生命周期

> ID：13345542
> 
> 赞同：3
> 
> 时间：2012-11-12T14:32:23.633
> 
> 标签：json, api, erlang

在 JSON API 中使用 Erlang 的最佳实践是什么？我的意思是你如何处理 JSON - 逻辑 - 数据库 - 逻辑 - JSON 生命周期。你在 Erlang 应用程序中使用了哪些数据结构、工具和技术？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T15:33:44.280

我倾向于在 Erlang 中为 JSON 使用两种工具：`jsx`和`jiffy`. 检查它们，因为它们的灵活性和速度略有不同。

主要问题是 Erlang 没有内置的字典类型。因此，JSON 对象通常表示为一个属性列表，即

```
{ a : 10,
  b : 20 } 
```

表示为元组列表：

```
[{a, 10}, {b, 20}] 
```

这是需要注意的主要问题。这也意味着人们应该尽可能避免使用 JSON 作为内部表示格式，因为从长远来看它很难使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T19:33:26.477

为了使用 JSON，我使用 mochijson2 和[Erlson](https://github.com/alavrik/erlson)。

`mochijson2`是[mochiweb](https://github.com/mochi/mochiweb)项目的一部分。它是一个稳定的、久经考验的纯 Erlang 实现，具有灵活的 JSON 解析和生成 API。

[Erlson](https://github.com/alavrik/erlson)为 Erlang 提供了一个很好的字典语法，这在使用 JSON 时特别方便。例如：

```
#[
    foo = 1,
    bar = "some string",
    nested = #[i = 1, b = true]
] 
```

此外，Erlson 还带有用于在 Erlson 和 JSON 之间转换`erlson:to_json`的函数。`erlson:from_json``mochiweb2`

*（免责声明：我是 Erlson 的作者）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T09:13:31.830

您的问题比迄今为止收到的答案要大。但是，对于操纵 JSON，他们都告诉过你`mochijson.erl`，`mochijson2.erl`所有这些都带有`mochiweb`HTTP 库。要使用它们，JSON 对象表示为这样的`Struct`对象：

```
在 JSON
 {"FirstName": "Joshua", "Surname": "Muzaaya"}

在 Erlang
 {struct,[{<<"FirstName">>,<<"Joshua">>},{<<"Surname"> >,<<"穆萨亚">>}]}

```

来回解析：

```
JSON_DATA = {"students":[ 
                {"student_number":45, 
                  "details":[{"FirstName": "Joshua", "Surname": "Muzaaya"}
                   ]
                }
            ]}

从 JSON 到 Erlang
 $> mochijson2:decode(JSON_DATA)。
   {结构，[{<<“学生”>>，
          [{结构，[{<<“学生编号”>>,45}，
                    {<<“详情”>>,
                     [{struct,[{<<"FirstName">>,<<"Joshua">>},
                               {<<"Surname">>,<<"Muzaaya">>}]}]}]}]}]}

从 Erlang 到 JSON
 $> mochijson2:encode(StructObject）。

```

现在数据库，我不知道你真正想要什么，但是，通常，我们可以在键值存储中写入数据`Mnesia`，或者`CouchDB`通过`RESTFUL`访问 API。我用`Couchbase Single Server`Erlang 写了一个客户端。下面是里面的一些函数：

```
create_database(ServerDomain,DBName)->
    尝试 ibrowse:send_req(ServerDomain ++ DBName,[{"Content-Type", 
        "application/json"}],put,[]) of 
        {ok,_,_,Re​​sult} ->
            case proplists:get_value(<<"ok">>,element(2,mochijson2:decode(Result 
              ))) 的
                未定义-> {错误，失败}；
                _ -> 好的
            结尾;
        任何 -> {错误，任何}
    抓住
        EE:EE2 -> {错误,{EE,EE2}}
    结尾。

delete_database(ServerDomain,DBName)->
    尝试 ibrowse:send_req(ServerDomain ++ DBName,[{"Content-Type","application/json"}],delete,[]) 的
        {ok,_,_,结果} ->
            case proplists:get_value(<<"ok">>,element(2,mochijson2:decode(Result))) 的
                未定义-> {错误，失败}；
                _ -> 好的
            结尾;
        任何 -> {错误，任何}
    抓住
        EE:EE2 -> {错误,{EE,EE2}}
    结尾。

%% 读取/3 ::= 结构
读取(ServerDomain,DBName,DocId)->
    尝试 ibrowse:send_req(ServerDomain ++ DBName ++ "/" ++ DocId,[{"Content-Type","application/json"}],get,[]) of 

        {ok,_,_,Re​​sult} - > mochijson2：解码（结果）；

        任何 -> {错误，任何}
    抓住
        EE:EE2 -> {错误,{EE,EE2}}
    结尾。

%% 写入/3 ::= [{id,Id::string()},{rev,Rev::string()}]
写入(ServerDomain,DBName,DocStruct)->
    尝试 ibrowse:send_req(ServerDomain ++ DBName,[{"Content-Type","application/json"}],post,lists:flatten(mochijson:encode(DocStruct))) 的

        {ok,_,_,结果} ->
            E = 元素（2，mochijson2：解码（结果）），
            案例 {proplists:get_value(<<"id">>,E),proplists:get_value(<<"rev">>,E)} 的
                {未定义，_} -> {错误，E}；
                {_,undefined} -> {错误,E};
                {Id,Rev} -> [{id,binary_to_list(Id)},{rev,binary_to_list(Rev)}]

            结束；

        任何 -> {错误，任何}
    抓住
        EE:EE2 -> {错误,{EE,EE2}}
    结尾。

%% 记得在更新时指定最近副本的'_rev'
%% 更新/4 ::= [{id,Id::string()},{rev,Rev::string()}]
更新（服务器域、数据库名称、DocId、DocStruct）->
    尝试 ibrowse:send_req(ServerDomain ++ DBName ++ "/" ++ DocId,[{"Content-Type","application/json"}],put,lists:flatten(mochijson:encode(DocStruct))) 的

        {ok,_,_,结果} ->
            E = 元素（2，mochijson2：解码（结果）），
            案例 {proplists:get_value(<<"id">>,E),proplists:get_value(<<"rev">>,E)} 的
                {未定义，_} -> {错误，E}；
                {_,undefined} -> {错误,E};
                {Id,Rev} -> [{id,binary_to_list(Id)},{rev,binary_to_list(Rev)}]

            结束；

        任何 -> {错误，任何}
    抓住
        EE:EE2 -> {错误,{EE,EE2}}
    结尾。

%% 您需要提供当前副本的“_rev”
%% 要删除的文档
delete(ServerDomain,DBName,DocId,Rev)->
    尝试 ibrowse:send_req(ServerDomain ++ DBName ++ "/" ++ DocId ++ "?rev=" ++ Rev,[{"Content-Type","application/json"}],delete,[]) 的

        {ok,_,_,结果} ->
            E = 元素（2，mochijson2：解码（结果）），
            案例 {proplists:get_value(<<"id">>,E),proplists:get_value(<<"ok">>,E)} 的
                {未定义，_} -> {错误，E}；
                {_,undefined} -> {错误,E};
                {_Id,_} -> 好的

            结束；

        任何 -> {错误，任何}
    抓住
        EE:EE2 -> {错误,{EE,EE2}}
    结尾。

随机（ServerDomain，Count）当is_integer（Count）->
    尝试 ibrowse:send_req(ServerDomain ++ "_uuids?count=" ++ integer_to_list(Count),[{"Content-Type","application/json"}],get,[]) 的
        {ok,_,_,结果} ->
            [binary_to_list(Z) || Z <- proplists:get_value(<<"uuids">>,element(2,mochijson2:decode(Result)))];
        任何 -> {错误，任何}
    抓住
        EE:EE2 -> {错误,{EE,EE2}}
    结尾。

```

所以，也许试着分解你的问题。否则，您可以在上面看到我在玩 JSON。要使用 abpve 方法，首先使用户处于`ibrowse`运行状态。

# python - 自动化终端程序？

> ID：13345544
> 
> 赞同：0
> 
> 时间：2012-11-12T14:32:30.230
> 
> 标签：python

我有一个 python 脚本，在运行它之前会询问您需要设置的几个用户键入的选项。我想知道是否可以制作一个 bash 脚本来自动填充 bash 脚本中为我定义的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:34:38.847

尝试这样的事情：

```
echo -n 'First answer\nSecond answer\n' | python script.py 
```

对于要求更高的任务，请使用[expect](http://expect.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T17:48:10.827

我认为您正在寻找的是**Expect-lite** ( [http://expect-lite.sourceforge.net](http://expect-lite.sourceforge.net/) )。它是一种简单的脚本语言，可以轻松地自动将响应传递给 cli 程序。它的重量很轻，可以让你编写一个脚本来运行你的 python 程序。

例如，如果您想通过 ssh 自动使用密码登录，您可以编写如下内容：

```
>ssh root@host-021
<assword:
>>secret_password
# issue a command once logged in
>ls
>exit 
```

但是输出可能有点混乱。相反，您可以使用 Python 模块**pexpect** ( [http://www.noah.org/wiki/pexpect](http://www.noah.org/wiki/pexpect) )，它可以让您编写一个简单的 Python 脚本来运行其他 Python 脚本，同时自动响应提示。

上面的相同示例将变为：

```
child = pexpect.spawn('ssh root@host-021')
child.expect('assword:')
child.sendline('secret_password')
child.sendline('ls')
child.sendline('exit') 
```

这反过来会屏蔽输出，但您可以设置一个日志文件来记录输出。您也可以像这样将日志文件设置为 STDOUT `child.logfile = sys.stdout`。

你可以用它做更多可能对你有用的事情，并显示在文档中。

# php - 我应该在所有输出上使用 htmlentities() 吗？（防止XSS攻击）

> ID：13345545
> 
> 赞同：4
> 
> 时间：2012-11-12T14:32:32.297
> 
> 标签：php, mysql, security, xss

> **可能的重复：**
> [在 PHP 站点中避免 xss 攻击的最佳实践是](https://stackoverflow.com/questions/71328/what-are-the-best-practices-for-avoiding-xss-attacks-in-a-php-site)
> [什么？针对 XSS 的常见防御措施是什么？](https://stackoverflow.com/questions/3129899/what-are-the-common-defenses-against-xss)

我正在尝试使我编写的 PHP 应用程序安全并且对转义输出有疑问。一旦我了解到这样做可以防止 SQL 注入，我就切换到使用 PDO 的预准备语句，而且似乎另一种主要的攻击类型是 XSS。我像这样为我的页面构建输出（假设变量中有来自数据库的数据）：

```
$output = '';

$output .= '
<div style="float: left; width: 800px;">
    <span>Name:</span><span> ' . $name . '</span>
    <span>Address:</span><span>' . $addr . '</span>
    <span>Time:</span><span>' . time() . '</span>
</div>';

$output .='[lots more html]'; 
```

所以，我的问题是，我是否应该使用`htmlentities()`正在输出的数据库中的每条数据（一个典型的页面有几十个，可能有数百个来自正在输出的数据库的变量）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:45:53.303

使用有两个好处[`htmlentities()`](http://uk1.php.net/htmlentities)：

*   XSS 预防
*   将特殊字符转换为适当的 HTML 实体，例如将版权字符转换为`&copy;`. 在 HTML 内容中，您应该使用适当的 HTML 实体而不是插入原始特殊字符。

对于 XSS 预防，您可以[`htmlspecialchars()`](http://uk1.php.net/htmlspecialchars)改用，但它只会将一些基本字符转换为 HTML 实体，即引号、& 和小于/大于字符。

在回答您的问题时，您应该`htmlentities()`在输出任何可能包含用户输入或特殊字符的内容时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:34:08.473

`htmlspecialchars()`绰绰有余。`htmlentities`是为了不同的用途，而不是防止 XSS。

# c# - C# PInvoke - 返回 char* 并带有引用 char* 参数的函数

> ID：13345548
> 
> 赞同：2
> 
> 时间：2012-11-12T14:32:49.117
> 
> 标签：c#, c++, pinvoke

我有以下标题和 CPP：

**“实用程序.h”**

```
__declspec(dllexport) static char* GetRamMegabytes(char* &FreeMemory); 
```

**“实用程序.cpp”**

```
char* Utils::HardWare::GetRamMegabytes(char*  &FreeMemory)
 {
    char*  TotalMb = "";
    MEMORYSTATUSEX statex;
    statex.dwLength = sizeof(statex);
    GlobalMemoryStatusEx(&statex);
    float freeMemFloat = ((float)statex.ullAvailPhys/1024/1024);
    float value =((float)statex.ullTotalPhys/1024/1024);
    sprintf(FreeMemory,"%f",value);
    sprintf(TotalMb,"%f",freeMemFloat);
    return TotalMb;
 } 
```

我已经编译了我的 DLL，我正在尝试使用以下代码从 C# 制作一个 PInvoke：

```
[DllImport("LndNativeAssembly.dll", EntryPoint = "?GetRamMegabytes@HardWare@Utils@@SAPADAAPAD@Z", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
    public static extern IntPtr GetRamMegaBytes(IntPtr freemem); 
```

我正在尝试使用以下方法调用本机函数：

```
IntPtr free = IntPtr.Zero;
IntPtr res = GetRamMegaBytes(free); 
```

我得到这个错误：

> 尝试读取或写入受保护的内存。这通常表明其他内存已损坏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:35:26.227

这是写入未分配的内存。

```
sprintf(TotalMb,"%f",freeMemFloat); 
```

您可以在例程中使用 new 分配内存并在调用者中释放它，或者您可以在例程中使用固定缓冲区（不是线程安全的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T14:39:03.003

这是因为 Free 是函数尝试写入的目标，而您传递的是**NULL**，这会导致 GPF。问题是您如何编写 PInvole 签名。尝试：

```
public static extern IntPtr GetRamMegaBytes(StringBuilder freemem); 
```

and pass a created string builder to the function.

# c# - 为什么具有泛型类型的基本 Windows 窗体窗体类会阻止设计器加载？

> ID：13345551
> 
> 赞同：11
> 
> 时间：2012-11-12T14:32:53.507
> 
> 标签：c#, winforms, inheritance

我正在尝试拥有一个基本的[Windows 窗体](http://en.wikipedia.org/wiki/Windows_Forms)表单，它包含常见的功能和控件 - 但也包含对需要其方法类型的类的引用。每种形式都代表一种不同的类型，所以我认为我可以按照以下方式做一些事情：

```
public partial class Base<T> : Form where T : BaseClass
{
    private GenericHandler handler = new GenericHandler();
}

public class BaseClass { }

public class GenericHandler
{
    public void DoSomethingWithInstance<T>(T instance) where T : BaseClass
    {

    }
} 
```

我的设计师类声明也反映了我的表单所具有的内容。现在，当我执行表示 type 的第二个表单时`Foo`，我无法访问设计器，因为我收到此错误：

> 无法为此文件显示设计器，因为无法设计其中的任何类。设计人员检查了文件中的以下类： Foo --- 无法加载基类“WindowsFormsApplication1.Base”。确保已引用程序集并且已构建所有项目。
> 
> FooClass --- 不能设计基类“WindowsFormsApplication1.BaseClass”。

```
public partial class Foo : Base<FooClass>
{
    public Foo()
    {
        InitializeComponent();
    }
}

public class FooClass : BaseClass { } 
```

为什么会发生这种情况/我做错了什么或有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-12T14:41:12.250

当在设计器中加载 Windows 窗体或用户 UserControl 时，基本上设计器正在创建*基类*的实例（您的自定义窗体或控件直接派生的类），然后`InitializeComponents()`通过反射手动/显式执行该方法以构建了您的控件的预期设计。

但是，在您的情况下，它无法创建基类的实例，因为它具有通用参数。如果表单或控件的基类是抽象的或没有默认构造函数，也会发生同样的事情。在这些情况下，设计者也无法创建基类的实例。

有一个使用[TypeDescriptionProviderAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.typedescriptionproviderattribute.aspx)[的解决方法](http://www.pocketsilicon.com/post/Using-Visual-Studio-Whidbey-to-Design-Abstract-Forms)，您可以在其中为设计器提供一个替换类，它应该实例化它。

# wordpress - 自定义帖子类型和 404 页面

> ID：13345552
> 
> 赞同：0
> 
> 时间：2012-11-12T14:32:55.933
> 
> 标签：wordpress, wordpress-theming, custom-post-type

我已经尝试刷新我的永久链接，但我仍然无法让它正常工作。

我有类别、、、`movies`和已经创建`gaming`，所以我的 URL 是例如。我想要一个电影帖子，所以对于我的自定义帖子类型，我的 slug 是“电影”。`blu-ray``tv``site.com/movies/``site.com/movies/post-here/`

我在该类别下的所有普通 wordpress psot`movies`现在都是 404ing，而专门从帖子类型创建的帖子`Movie Posts`工作正常。这是正常的吗？有没有我不包括的步骤？

这是我所有的自定义帖子类型（使用自定义帖子类型 UI 创建）：

```
//Movies Custom Post Type
register_post_type('movies_cp', array(  'label' => 'Movie Posts','description' => '','public' => true,'show_ui' => true,'show_in_menu' => true,'capability_type' => 'post','hierarchical' => false,'rewrite' => array('slug' => 'movies'),'query_var' => true,'exclude_from_search' => false,'supports' => array('title','editor','excerpt','trackbacks','custom-fields','comments','revisions','thumbnail','author','page-attributes',),'taxonomies' => array('category','post_tag',),'labels' => array (
  'name' => 'Movie Posts',
  'singular_name' => 'Movie Post',
  'menu_name' => 'Movie Posts',
  'add_new' => 'Add Movie Post',
  'add_new_item' => 'Add New Movie Post',
  'edit' => 'Edit',
  'edit_item' => 'Edit Movie Post',
  'new_item' => 'New Movie Post',
  'view' => 'View Movie Post',
  'view_item' => 'View Movie Post',
  'search_items' => 'Search Movie Posts',
  'not_found' => 'No Movie Posts Found',
  'not_found_in_trash' => 'No Movie Posts Found in Trash',
  'parent' => 'Parent Movie Post',
),) );

//Gaming Custom Post Type
register_post_type('gaming_cp', array(  'label' => 'Gaming Posts','description' => '','public' => true,'show_ui' => true,'show_in_menu' => true,'capability_type' => 'post','hierarchical' => false,'rewrite' => array('slug' => 'gaming'),'query_var' => true,'exclude_from_search' => false,'supports' => array('title','editor','excerpt','trackbacks','custom-fields','comments','revisions','thumbnail','author','page-attributes',),'taxonomies' => array('category','post_tag',),'labels' => array (
  'name' => 'Gaming Posts',
  'singular_name' => 'Gaming Post',
  'menu_name' => 'Gaming Posts',
  'add_new' => 'Add Gaming Post',
  'add_new_item' => 'Add New Gaming Post',
  'edit' => 'Edit',
  'edit_item' => 'Edit Gaming Post',
  'new_item' => 'New Gaming Post',
  'view' => 'View Gaming Post',
  'view_item' => 'View Gaming Post',
  'search_items' => 'Search Gaming Posts',
  'not_found' => 'No Gaming Posts Found',
  'not_found_in_trash' => 'No Gaming Posts Found in Trash',
  'parent' => 'Parent Gaming Post',
),) );

//Blu-ray Custom Post Type
register_post_type('blu-ray_cp', array( 'label' => 'Blu-Ray Posts','description' => '','public' => true,'show_ui' => true,'show_in_menu' => true,'capability_type' => 'post','hierarchical' => false,'rewrite' => array('slug' => 'blu-ray'),'query_var' => true,'exclude_from_search' => false,'supports' => array('title','editor','excerpt','trackbacks','custom-fields','comments','revisions','thumbnail','author','page-attributes',),'taxonomies' => array('category','post_tag',),'labels' => array (
  'name' => 'Blu-Ray Posts',
  'singular_name' => 'Blu-Ray Post',
  'menu_name' => 'Blu-Ray Posts',
  'add_new' => 'Add Blu-Ray Post',
  'add_new_item' => 'Add New Blu-Ray Post',
  'edit' => 'Edit',
  'edit_item' => 'Edit Blu-Ray Post',
  'new_item' => 'New Blu-Ray Post',
  'view' => 'View Blu-Ray Post',
  'view_item' => 'View Blu-Ray Post',
  'search_items' => 'Search Blu-Ray Posts',
  'not_found' => 'No Blu-Ray Posts Found',
  'not_found_in_trash' => 'No Blu-Ray Posts Found in Trash',
  'parent' => 'Parent Blu-Ray Post',
),) );

//TV Custom Post Type
register_post_type('tv_cp', array(  'label' => 'TV Posts','description' => '','public' => true,'show_ui' => true,'show_in_menu' => true,'capability_type' => 'post','hierarchical' => false,'rewrite' => array('slug' => 'tv'),'query_var' => true,'exclude_from_search' => false,'supports' => array('title','editor','excerpt','trackbacks','custom-fields','comments','revisions','thumbnail','author','page-attributes',),'taxonomies' => array('category','post_tag',),'labels' => array (
  'name' => 'TV Posts',
  'singular_name' => 'TV Post',
  'menu_name' => 'TV Posts',
  'add_new' => 'Add TV Post',
  'add_new_item' => 'Add New TV Post',
  'edit' => 'Edit',
  'edit_item' => 'Edit TV Post',
  'new_item' => 'New TV Post',
  'view' => 'View TV Post',
  'view_item' => 'View TV Post',
  'search_items' => 'Search TV Posts',
  'not_found' => 'No TV Posts Found',
  'not_found_in_trash' => 'No TV Posts Found in Trash',
  'parent' => 'Parent TV Post',
),) ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:26:40.010

你的页面也有永久链接 /movies/ 吗？因为永久链接的重复可能是您的 404 错误的原因。

# php - Symfony2 实体字段类型当前选择

> ID：13345555
> 
> 赞同：3
> 
> 时间：2012-11-12T14:33:00.057
> 
> 标签：php, forms, symfony, entity

我正在尝试在表单中创建实体字段类型。这是代码：

```
$extraSpecsRepository = $this -> getDoctrine() 
                              -> getRepository('LabsCatalogBundle:Specs'); 
$availQuery = $extraSpecsRepository->createQueryBuilder('sel')
                ->where("sel.cat = '0'")
                ->getQuery();
$available = $availQuery->getResult();

$extraSpecsRepository = $this -> getDoctrine() 
                              -> getRepository('LabsCatalogBundle:ProductExtraspecs'); 
$selQuery = $extraSpecsRepository->createQueryBuilder('sel')
                  ->join('sel.specs', 'specs')
                  ->where("specs.cat = '0' AND sel.regmatid = $id")
                  ->getQuery();
$selected = $selQuery->getResult();

$form = $this ->createFormBuilder($product)
                ->add('extraspecs', 'entity', array(
                                'class' => 'LabsCatalogBundle:Specs',
                                'choices' => $typeavailable,
                                'data' => $selected,
                                'property' => 'specid',
                                'multiple' => false,
                            ))
                ->getForm(); 
```

这是`var_dump`from both`$selected`和`$typeavailable`variables`：

```
$typeavailable:    
array (size=4)
      0 => 
        array (size=4)
          'specid' => int 20
          'desc' => string 'Primary Antibodies' (length=18)
          'cat' => int 0
          'type' => int 1
      1 => 
        array (size=4)
          'specid' => int 21
          'desc' => string 'Secondary Antibodies' (length=20)
          'cat' => int 0
          'type' => int 2
      2 => 
        array (size=4)
          'specid' => int 22
          'desc' => string 'Fluorescent-Labeled Antibodies' (length=30)
          'cat' => int 0
          'type' => int 5
      3 => &
        array (size=4)
          'specid' => int 27
          'desc' => string 'Related Antibodies' (length=18)
          'cat' => int 0
          'type' => int 7

$selected:
    array (size=1)
      0 => &
        array (size=4)
          'regmatid' => int 1600
          'specid' => int 21
          'attrib' => null
          'value' => null 
```

你看有什么不对吗？因为它正在生成下拉列表但没有选择“选定”值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:29:33.580

提供给`'choices'`index( `$typeavailable`) 的对象应该与提供给 的 SINGLE 对象属于同一类`'data'`。目前，您正在回馈`array`持有错误的对象。为什么是单个对象？因为您的表单仅支持 1 个选定项目 ( `'multiple' => false,`)。

使用它来解决问题：

```
$result = $selQuery->getSingleResult()->getSpecs();
$selected = $result[0]; 
```

这段代码应该给你想要选择的 Specs 对象。

如果您的选择查询还返回超过 1 个对象，您可能希望在您的关系或查询中重做一些事情。如果您不想这样做，您仍然可以使用以下内容：

```
$results = $selQuery->getResult();
$result = $results[0]->getSpecs();
$selected = $result[0]; 
```

# .htaccess - .htaccess 在文件夹/文件名更改之间重定向的问题

> ID：13345556
> 
> 赞同：0
> 
> 时间：2012-11-12T14:33:03.007
> 
> 标签：.htaccess, redirect

我已将新网站上传到 GoDaddy 共享 Linux 主机帐户。上一个站点使用了这种结构：

```
Root
----/about (folder)
----/maintenance (folder)
----/services (folder)
... 
```

这些文件夹中的每一个都有一个 index.html 文件。

新的站点结构不同：

```
Root
.htaccess
about.htm (file in root)
maintenance.htm (file in root)
services.htm (file in root)
... 
```

我上传了这个 .htaccess 文件来重定向对旧 URL 的所有调用：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^domainname.com
RewriteRule (.*) http\:\/\/www\.domainname\.com/$1 [R=301,L]

rewritecond %{HTTP_HOST} ^www.domainname.com$
rewriterule ^services\/index\.html "http\:\/\/www\.domainname\.com\/services\.htm" [R=301,L]

rewritecond %{HTTP_HOST} ^www.domainname.com$
rewriterule ^why_wood\/index\.html "http\:\/\/www\.domainname\.com\/why-wood\.htm" [R=301,L]

rewritecond %{HTTP_HOST} ^www.domainname.com$
rewriterule ^about\/index\.html "http\:\/\/www\.domainname\.com\/about\.htm" [R=301,L]

rewritecond %{HTTP_HOST} ^www.domainname.com$
rewriterule ^what-to-expect\/index\.html "http\:\/\/www\.domainname\.com\/faq\.htm" [R=301,L]

rewritecond %{HTTP_HOST} ^www.domainname.com$
rewriterule ^maintenance\/index\.html "http\:\/\/www\.domainname\.com\/maintenance\.htm" [R=301,L]

rewritecond %{HTTP_HOST} ^www.domainname.com$
rewriterule ^contact\/index\.html "http\:\/\/www\.domainname\.com\/contact\.htm" [R=301,L]

rewritecond %{HTTP_HOST} ^www.domainname.com$
rewriterule ^index\.html "http\:\/\/www\.domainname\.com\/index\.htm" [R=301,L] 
```

使用位于[stepforth](http://www.stepforth.com/resources/server-header-checker-tool)的服务器标头检查器工具，我检查了重定向是否正常工作。这是回来的：

```
**Input**
domainname.com/about/index.html
**Output**
www.domainname.com/about.htm/index.html (**expected** www.domainname.com/about.htm) 
```

第一个重定向（非 www 到 www）工作正常。

最后一个重定向（根 index.html 到根 index.htm）工作正常。

所有其余的都会导致 404 错误。:-(

我已经查看了 3 个小时，但没有找到任何信息，甚至暗示了重写中要更改的内容。只有 7 个旧 URL，但它是需要修复的 2 个问题中的第一个，然后我才能称之为完成。

有谁知道发生了什么？

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T23:20:01.057

终于找到了一个比我预期的效果更好的单行重写。

作者的示例是将不存在的 favicon 请求的 URL 重定向回站点根目录中的单个现有 favicon。这篇文章在[Perishable Press](http://perishablepress.com/redirect-all-requests-for-a-nonexistent-file-to-the-actual-file/)上。

希望这可以帮助某人。

# c# - 如何使用 WCF 服务生成 XML 输出？

> ID：13345557
> 
> 赞同：4
> 
> 时间：2012-11-12T14:33:05.703
> 
> 标签：c#, wcf, web-services

我已经设置了以下界面。

```
[ServiceContract]
public interface IService1
{
  [OperationContract]
  String Ping();
} 
```

其实现如下。

```
public class Service1 : IService1
{
  public string Ping(){ return "Pong"; }
} 
```

根据 VS 中的测试应用程序，它在调用时可以正常工作。*我的问题是，当我输入http://localhost:12345/Service1.svc*（或者可能*是 Service1.svc?Ping*或*Service.svc/Ping*）时，我希望文本出现在屏幕上。它完全关闭还是我在正确的树上吠叫？

当然，“ *Pong* ”最终将是一个 XML 结构。

**编辑**

在下面@carlosfigueira 的回复中提供的设置为解决方案的建议提供了一个很好的结构，但不幸的是，在我的机器上使用 F5 运行时会出现错误消息。似乎需要元数据，端点也是如此。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T14:55:48.040

我终于得到了完全的 PO 并开始了全面的业务联系。这是我制作的——它可以在我的机器上运行，我希望这不是本地现象。:)

**IRestService.cs** - 声明，您的代码对联系客户的承诺

```
[ServiceContract]
public interface IRestService
{
  [OperationContract]
  [WebInvoke(Method = "GET", 
    ResponseFormat = WebMessageFormat.Xml, 
    BodyStyle = WebMessageBodyStyle.Wrapped, 
    UriTemplate = "xml/{id}")]
  String XmlData(String id);

  [OperationContract]
  [WebInvoke(Method = "GET", 
    ResponseFormat = WebMessageFormat.Json, 
    BodyStyle = WebMessageBodyStyle.Wrapped, 
    UriTemplate = "json/{id}")]
  String JsonData(String id);
} 
```

**RestService.svc.cs** - 实现，您的代码对客户端的实际作用

```
public class RestService : IRestService
{
  public String XmlData(String id)
  {
    return "Requested XML of id " + id;
  }

  public String JsonData(String id)
  {
    return "Requested JSON of id " + id;
  }
} 
```

**Web.config** - 配置，您的代码在到达客户端的过程中被处理的内容

```
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>

  <system.serviceModel>
    <services>
      ...
    </services>
    <behaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

*services* - 描述服务性质的标签内容

```
<service name="DemoRest.RestService" 
         behaviorConfiguration="ServiceBehavior">
  <endpoint address="" binding="webHttpBinding" 
            contract="DemoRest.IRestService" 
            behaviorConfiguration="web"></endpoint>
</service> 
```

*行为*- 描述服务和端点行为的标签内容

```
<serviceBehaviors>
  <behavior name="ServiceBehavior">
    <serviceMetadata httpGetEnabled="true"/>
    <serviceDebug includeExceptionDetailInFaults="true"/>
  </behavior>
</serviceBehaviors>

<endpointBehaviors>
  <behavior name="web">
    <webHttp/>
  </behavior>
</endpointBehaviors> 
```

**Index.html** - 执行者，你的代码可以称为什么

```
<html>
  <head>
    <script>
      ...
    </script>
    <style>
      ...
    </style>
  </head>
  <body>
    ...
  </body>
</html> 
```

*script* - 在 JavaScript 中描述可执行文件的标记内容

```
window.onload = function () {
  document.getElementById("xhr").onclick = function () {
    var xhr = new XMLHttpRequest();
    xhr.onload = function () { alert(xhr.responseText); }
    xhr.open("GET", "RestService.svc/xml/Viltersten");
    xhr.send();
  }
} 
```

*style* - 描述外观的标签内容

```
.clickable
{
  text-decoration: underline;
  color: #0000ff;
} 
```

*body* - 描述标记结构的标签内容

```
<ul>
  <li>XML output <a href="RestService.svc/xml/123">
    <span class="clickable">here</span></a></li>
  <li>JSON output <a href="RestService.svc/json/123">
    <span class="clickable">here</span></a></li>
  <li>XHR output <span id="xhr" class="clickable">here</span></li> 
```

一切都存储在一个名为`DemoRest`. 我为服务的声明和实现创建了自己的文件，删除了默认文件。`using`由于篇幅原因，省略了的指令和XML 版本声明。

现在可以使用以下 URL 检索响应。

```
localhost:12345/RestService.svc/xml/Konrad
localhost:12345/RestService.svc/json/Viltersten 
```

1.  其他人也让它工作吗？
2.  有什么改进或澄清的建议吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:43:48.680

如果您将服务端点定义为 WebHttp 端点（又名 REST 端点），您将得到您想要的。最简单的方法是`WebServiceHostFactory`在 svc 文件中使用：

服务 1.svc。

```
<%@ ServiceHost Language="C#" Debug="true" Service="YourNamespace.Service1"
                Factory="System.ServiceModel.Activation.WebServiceHostFactory" %> 
```

或者您可以定义没有工厂的端点，通过定义它将使用`webHttpBinding`并具有`<webHttp/>`行为：

```
<system.serviceModel>
  <behaviors>
    <endpointBehaviors>
      <behavior name="MyBehavior">
        <webHttp/>
      </behavior>
    </endpointBehaviors>
  </behaviors>
  <services>
    <service name="YourNamespace.Service1">
      <endpoint address=""
                behaviorConfiguration="MyBehavior"
                binding="webHttpBinding"
                contract="YourNamespace.IService1" />
    </service>
  </services>
</system.serviceModel> 
```

**更新**：由于有些人有问题，我写了一个完整的例子来使用`XMLHttpRequest`上面列出的服务。该代码可以在[https://github.com/carlosfigueira/WCFQuickSamples/tree/master/WCFForums/QuickWebCode1](https://github.com/carlosfigueira/WCFQuickSamples/tree/master/WCFForums/QuickWebCode1)找到（查找 StackOverflow_13345557），并且大部分都在此处列出。

**服务代码**（请注意，我使用 JSON 作为响应，但 XML 也可以）：

```
namespace StackOverflow_13345557
{
    [ServiceContract]
    public interface IService1
    {
        [WebGet(ResponseFormat = WebMessageFormat.Json)]
        string Ping();
        [WebGet(ResponseFormat = WebMessageFormat.Json)]
        string PingWithParameters(int a, string b);
    }

    public class Service1 : IService1
    {
        public string Ping()
        {
            return "Hello";
        }

        public string PingWithParameters(int a, string b)
        {
            return string.Format("Hello {0} - {1}", a, b);
        }
    }
} 
```

**.SVC 文件**- 注意没有使用该`Factory`属性，因为我通过配置定义端点：

```
<%@ ServiceHost Language="C#" Debug="true" Service="StackOverflow_13345557.Service1"
                CodeBehind="StackOverflow_13345557.svc.cs" %> 
```

**网络配置**：

```
<system.serviceModel>
  <services>
    <service name="StackOverflow_13345557.Service1">
      <endpoint address=""
                behaviorConfiguration="WithWebHttp"
                binding="webHttpBinding"
                bindingConfiguration="WithJSONP"
                contract="StackOverflow_13345557.IService1" />
    </service>
  </services>
  <behaviors>
    <endpointBehaviors>
      <behavior name="WithWebHttp">
        <webHttp/>
      </behavior>
    </endpointBehaviors>
  </behaviors>
  <bindings>
    <webHttpBinding>
      <binding name="WithJSONP" crossDomainScriptAccessEnabled="true" />
    </webHttpBinding>
  </bindings>
</system.serviceModel> 
```

**HTML 页面访问服务**（仅正文）：

```
<body>
    <script type="text/javascript">
        function StackOverflow_13345557_Test(passParameters) {
            var baseUrl = "/StackOverflow_13345557.svc";
            var cacheBuster = new Date().getTime(); // to prevent cached response; development only
            var url;
            if (passParameters) {
                url = baseUrl + "/PingWithParameters?a=123&b=john+doe&_=" + cacheBuster;
            } else {
                url = baseUrl + "/Ping?_=" + cacheBuster;
            }
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4) {
                    document.getElementById("result").innerText = xhr.responseText;
                }
            }

            xhr.open('GET', url, true);
            xhr.send();
        }
    </script>
    <input type="button" value="StackOverflow 13345557 (no params)" onclick="StackOverflow_13345557_Test(false);" /><br />
    <input type="button" value="StackOverflow 13345557 (with params)" onclick="StackOverflow_13345557_Test(true);" /><br />
    <div id='result'></div>
</body> 
```

**另一个更新：在**[https://skydrive.live.com/redir?resid=99984BBBEC66D789!6355](https://skydrive.live.com/redir?resid=99984BBBEC66D789!6355)添加了一个独立的最小项目，上面列出了代码。

# c - 这是创建双向链表的有效方法吗？

> ID：13345564
> 
> 赞同：1
> 
> 时间：2012-11-12T14:33:39.037
> 
> 标签：c, doubly-linked-list

> **可能重复：**
> [双向链表创建期间的上下文切换](https://stackoverflow.com/questions/6060456/context-switch-during-doubly-linked-list-creation)

我正在阅读**[UNIX 操作系统的设计（莫里斯·巴赫）](https://rads.stackoverflow.com/amzn/click/com/0132017997)**。

他给出了以下**双向链表**示例。

```
struct queue{
    //pointers (back and forward)
    //other data
}*bp, *bp1

bp1->forp = bp->forp; //1

bp1->backp = bp; //makes sense
bp->forp = bp1; //makes sense

bp1->forp->backp = bp1; //2 
```

我无法理解标有`1`和的语句的目的`2`。`1`似乎错了，`2`看起来是多余的。

这是创建双向链表的有效方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:50:51.963

代码是正确的。

`bp`是一个双向链表。您想作为列表中的第二项插入`bp1`（`bp`这就是代码所做的）。

为此，您需要设置 4 个指针：

`bp1->forp`应该指向列表中的第二项，`bp->forp` （`//1`上）

`bp1->backp`应该指向列表中的第一项，`bp`

`bp->forp`应该指向插入的项目，`bp1`

第二个项目的后退指针，`bp1->forp->backp`应该指向插入的项目，`bp1`。（`//2`上）

**编辑：**

让我们调用结构 A、B、C、D... 列表（由 A、C、D... 指向的列表`bp`在插入之前组成。我们要插入 B（由`bp1`. 指向）`<->`表示前向和后向指针.

前：

```
bp --> A <-> C <-> D <-> E <-> ...
bp1--> B 
```

后：

```
bp--> A <-> B <-> C <-> D <-> E <-> ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:44:48.510

向双向链表中插入项时，必须更改指向新元素的两个指针和指向新元素的两个指针。

用 标记的行将`//1`新的下一个指针设置为插入位置之后的下一个。标记的行将`//2`下一个元素的前一个指针设置为新元素，完成它们之间的双向链接。

请注意，当新元素添加到列表末尾时，此代码将出现段错误。在这种情况下`bp1->forp`将为 NULL，因此`bp1->forp->backp`将尝试取消引用空指针。

**编辑**

一开始：

```
bp  ->forp  = next
next->backp = bp  
bp1 ->forp  = null
bp1 ->backp = null 

The list looks like this. bp and next are linked, bp1 is outside of the list.

       /---\/            
    [bp]   [next]         [bp1]
      /\---/ 
```

线后`//1`

```
bp  ->forp  = next
next->backp = bp   
bp1 ->forp  = next
bp1 ->backp = null 

the forward pointer of bp1 points to the next element, but nothing points
to bp1 yet:

        /------------\/    
       /        /----\/
    [bp]    [bp1]    [next] 
      /\------------/ 
```

行前`//2`

```
bp  ->forp  = bp1
bp1 ->forp  = next
bp1 ->backp = bp 
next->backp = bp   

The link from next to bp1 hasn't been updated yet - it still points to bp:

      /---\/  /---\/            
  [bp]    [bp1]   [next]
    /\----/       /
    /\-----------/ 
```

线后`//2`

```
bp  ->forp  = bp1
bp1 ->forp  = next
bp1 ->backp = bp 
next->backp = bp   

The list is linked correctly:

      /---\/  /---\/            
   [bp]   [bp1]   [next]
    /\----/  /\---/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T15:12:37.783

`Is this a valid way to create a doubly linked-list?`

**不，现在，这段代码只会给你一个分段错误。很明显，为什么在每个步骤之后添加以下行：

```
printf("bp = %#x\n\tbp->forp=%#x\n\tbp->backp=%#x\n", bp, bp->forp, bp->backp);
printf("bp1 = %#x\n\tbp1->forp=%#x\n\tbp1->backp=%#x\n", bp1, bp1->forp, bp1->backp); 
```

首先，您需要分配和初始化您的结构：

```
bp = malloc(sizeof(struct queue));
bp->forp = NULL;
bp->backp = NULL;
bp1 = malloc(sizeof(struct queue));
bp1->forp = NULL;
bp1->backp = NULL; 
```

然后我们打印您会看到的值，如下所示：

```
bp = 0x804b008
    bp->forp=0     //forward and back pointers are not pointing anywhere, good start
    bp->backp=0
bp1 = 0x804b018
    bp1->forp=0
    bp1->backp=0 
```

在这些行之后：

```
 bp1->forp = bp->forp;  //bp1->forp is pointing no where (NULL), neither is bp->forp
                           // so this does nothing really... 
    bp1->backp = bp;
    bp->forp = bp1; 
```

现在你会有类似的东西：

```
bp = 0x804b008
    bp->forp=0x804b018
    bp->backp=0
bp1 = 0x804b018
    bp1->forp=0
    bp1->backp=0x804b008 
```

所以正如你所说，这是有道理的。现在我们尝试下一行？

```
bp1->forp->backp = bp1; //2
       ^
       |
       +------ That's NULL, and a seg fault. 
```

在此之前您还需要一行：

```
bp1->forp-> = bp;
bp1->forp->backp = bp1; 
```

**现在**你可以走了。

**假设最初是一个空列表。

# java - 无法使用 javaFlacEncoder 库将 wav 文件转换为 flac 文件

> ID：13345567
> 
> 赞同：2
> 
> 时间：2012-11-12T14:33:50.970
> 
> 标签：java, audio, wav, flac

我有以下问题。

我用我的安卓设备录制了我的演讲的 wav 文件。我说：“1 2 3 4 5”

我可以在我的电脑上播放 wav 文件。

我想使用库 javaFlacEncoder-0.2.3.jar (http://sourceforge.net/projects/javaflacencoder/) 转换 wav 文件

这是我使用的代码：

```
FLAC_FileEncoder ffe = new FLAC_FileEncoder();
ffe.encode(new File("test.wav"), new File("test.flac")); 
```

生成了flac文件，我可以打开并听到它。问题是，音频的开头不知何故被切断了。它直接以“4 5”而不是“1 2 3 4 5”开头。

所以缺少 wav 文件开头的一些音频。

当我使用此服务转换相同的 wav 文件时：http: [//audio.online-convert.com/convert-to-flac](http://audio.online-convert.com/convert-to-flac)

我得到一个 flac 文件，它被正确转换（我听到“1 2 3 4 5”，所以是整个音频。）

你知道问题可能出在哪里吗？或者是否有另一个易于使用的 wav2flac 库？

问候，苏比

# objective-c - Objective C 条件语句求值

> ID：13345569
> 
> 赞同：1
> 
> 时间：2012-11-12T14:33:52.990
> 
> 标签：objective-c, ios, conditional

> **可能重复：**
> [C/C++ 中是否强制要求短路布尔运算符？和评价顺序？](https://stackoverflow.com/questions/628526/is-short-circuiting-boolean-operators-mandated-in-c-c-and-evaluation-order)

在研究 iOS 问题时，我找到了以下答案：[如何判断 UIViewController 的视图是否可见](https://stackoverflow.com/questions/2777438/how-to-tell-if-uiviewcontrollers-view-is-visible/2777460#2777460)

答案的细节并不重要，但重要的是它基本上说如果你有一个看起来像下面这样的条件语句......

```
if(X && Y)
{
    //do stuff here
} 
```

如果 X 为假，则永远不会评估 Y。这是真的？可以确定编译器不会优化它`if(Y && X)`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T14:38:48.043

如果 X 为 false，它将返回 false 并且不会评估 Y。这是一种优化。

# .net - ForceBuild 对这种情况的关注 - CruiseControl.NET

> ID：13345570
> 
> 赞同：0
> 
> 时间：2012-11-12T14:33:52.987
> 
> 标签：.net, continuous-integration, build-process, cruisecontrol.net, ccnet-config

我有三个有问题的项目，我们称它们为 A、B 和 C。其中“A”只是为 B 准备了一个 cetain 构建场景，这是主要构建。C 清理场景并基本上将 B 重置为其原始状态。我已将这些项目设置在同一个队列中，并在项目 B 失败时测试了这个过程的大部分工作。这是这种情况，下面将对此进行解释。

```
<project name="A" queue="main">
    <publishers>
     <email status of build/>
      <forcebuild>
        <project>B</project>
      </forcebuild>
      <forcebuild>
        <project>C</project>
      </forcebuild>
       </publishers>
   <task>Prepares special scenario</task>
 </project>
 <project name="B" queue="main">
   <publishers>
   </publishers>
    <task>Builds main project</task>
 </project>
 <project name="C" queue="main">
   <publishers>
   </publishers>
    <task>Resets special scenario</task>
 </project> 
```

场景：

1.  当项目'A'被强制执行时，它会构建项目B，如果B成功，它会构建C。这很好。
2.  当项目'A'被强制执行时，它会构建项目'B'，如果B失败，它会构建C。在我的情况下这也很好。
3.  现在在项目 B 中修复了 2 号场景和错误之后；如果项目 A 再次被强制并且项目 B 显示巡航状态为“固定”，则它不会构建 C。这不好吗？

如果 2 号和 3 号的组合发生，任何人都可以看到项目 C 将无法构建的原因吗？欢迎任何帮助或指导。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:01:53.567

项目`A`能否负责清理当前状态并为新构建做准备。

例如，在`B`构建过程中出现电源故障。在此配置中，您需要手动强制`C`才能运行构建过程吗？

如果`A`运行与 相同的任务`C`，那么作为自己的任务，这将消除这个问题，我相信你也是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:06:58.110

完成后，您应该始终清理您的测试环境。我建议对项目 C 使用[项目触发器](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Project_Trigger)并将其设置为类似于以下内容。如果 A 成功，这将允许 C 始终运行（可以通过修改 C 中的项目触发器来更改）。

```
<project name="A" queue="main">
    <publishers>
     <email status of build/>
     <forcebuild>
       <project>B</project>
     </forcebuild>
   </publishers>
   <tasks>Prepares special scenario</tasks>
 </project>

 <project name="B" queue="main">
 ...
 </project>

 <project name="C" queue="main">
   <triggers>
     <projectTrigger project="A" />
   </triggers>
   <publishers />
   <tasks>Resets special scenario</tasks>
 </project> 
```

# android - 从 BillingReceiver 中刷新屏幕

> ID：13345576
> 
> 赞同：0
> 
> 时间：2012-11-12T14:34:10.393
> 
> 标签：android

我有一个由多个活动组成的应用程序。可以购买多种物品。每个活动中显示的内容可能会因购买的内容而异。我有`BillingReceiver`一个`purchaseStateChanged()`方法。我需要在里面做`purchaseStateChanged()`的是说，无论哪个活动正在运行，请无效？/刷新？屏幕。有这样做的标准方法吗？

**编辑：**查看 Simon 的评论，只是为了更容易回答，让我们说当 BillingReceiver 收到对 purchaseStateChanged() 的调用时，两个活动之一可能正在运行，ActivityA 或 ActivtyB。这些活动都包含`void redraw_everything()`声明为：

```
void redraw_everything()
{
    getWindow().getDecorView().invalidate();
} 
```

我不知道设置回调的语法，但我猜答案可能类似于：

在这两个活动的 onCreate 中，我们应该这样说：

```
BillingReceiver.setupcallback(redraw_everything()); // ?? 
```

在 onDestroy() 方法中有类似的东西：

```
BillingReceiver.setupcallback(null); // ?? 
```

然后在 BillingReceiver 中创建一个类似的方法：

```
??? stored_method_to_call;

void setupcallback(???? method_to_call)
{
     stored_method_to_call = method_to_call;
} 
```

然后在 purchaseStateChanged() 内部有一些代码，例如：

```
if (stored_method_to_call != null) // ?? not sure about syntax
{
    stored_method_to_call(); // ?? not sure about syntax
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:49:41.373

定义一个接口并使用回调让活动知道已经进行了购买。

```
public Interface PurchaseStateChangedListener {
    void onPurchaseStateChanged();
} 
```

在您的帐单接收方中。

```
ArrayList<PurchaseStateChangedListener > listeners = new ArrayList<PurchaseStateChangedListener >();

...

public void setPurchaseStateChangedListener(PurchaseStateChangedListener listener){
    listeners.add(listener);
} 
```

在您的购买状态更改方法中：

```
for (PurchaseStateChangedListener listener:listeners){
   listener.onPurchaseStateChanged();
} 
```

在您的活动中：

```
public class Test extends Activity implements PurchaseStateChangedListener {

...

@Override
public void onCreate(Bundle savedInstanceState) 
{
    ...

    billingReceiver.setPurchaseStateChangedListener(this);
    ...
}

public void onPurchaseStateChanged(){
   // do whatever you need to do
} 
```

您可以通过添加 removePurchaseStateChangedListener 并检查您没有在 setPurchaseStateChangedListener 中添加两次相同的侦听器来改进计费接收器类。

# java - 将枚举成员传递给构造函数：“实际参数列表和形式参数列表的长度不同”

> ID：13345580
> 
> 赞同：3
> 
> 时间：2012-11-12T14:34:19.197
> 
> 标签：java, constructor, enums

我很困惑，我认为我在做一些非常愚蠢的事情，我只是看不到它！

中央供暖控制：

一个**Radiator**类和一个**RadiatorSize**类。散热器有一个尺寸实例变量，它属于 RadiatorSize 类。我有 XSMALL，... XLARGE 的散热器尺寸；在 RadiatorSize 中定义为公共枚举。

所以，我在想，创建一个新的散热器并给它一个中等大小。

```
size = new RadiatorSize(RadiatorSize.Size.MEDIUM); 
```

Netbeans 告诉我：

```
...\CentralHeating\src\hardwaremodel\Radiator.java:17:
error: constructor RadiatorSize in class RadiatorSize cannot be
applied to given types;

size = new RadiatorSize(RadiatorSize.Size.MEDIUM);
required: no arguments
found: Size
reason: actual and formal argument lists differ in length
1 error 
```

这是违规的课程。

```
/** Radiator class **/
package hardwaremodel;

import units_constants.RadiatorSize;

public class Radiator {
    private int boilerSequence;
    private RadiatorSize size;
    private double volume; //cubic centimetres

public void Radiator(int blrSqnc) {
    boilerSequence = blrSqnc;
    size = new RadiatorSize(RadiatorSize.Size.MEDIUM); //ERROR HERE
    }
}

/** RadiatorSize class **/
package units_constants;

public class RadiatorSize {
    public enum Size {XSMALL, SMALL, MEDIUM, LARGE, XLARGE};

    private Size size;

    public void RadiatorSize(Size sz) {
        size = sz;
    }
} 
```

现在，Netbeans 给了我一个提示，它建议“在 units_constants.RadiatorSize 中创建构造函数 RadiatorSize(units_constants.RadiatorSize.Size)”；当我同意时它会这样做：

```
public RadiatorSize(Size size) {
    throw new UnsupportedOperationException("Not yet implemented");
} 
```

现在编辑器中已经没有小红圈了，但是……！

我很困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T14:37:26.847

您正在尝试将其用作构造函数：

```
public void RadiatorSize(Size sz) {
        size = sz;
} 
```

因为这不是构造函数，而是`void`方法，所以您`new RadiatorSize(Size.MEDIUM);`尝试调用没有参数的标准构造函数。知道了这一点，给出的错误信息就完全有意义了；）

只需摆脱`void`返回类型，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T14:37:50.123

构造函数没有返回类型，甚至没有 void。

```
public void RadiatorSize(Size sz) {
        size = sz;
    } 
```

是方法而不是构造函数。

```
public  RadiatorSize(Size sz) {
        size = sz;
    } 
```

现在这是一个构造函数

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T14:38:03.097

这个：

```
public void RadiatorSize(Size sz) {
    size = sz;
} 
```

不是构造函数，而是方法。您指定`void`为您的返回类型。看看 Netbeans 生成了什么：

```
public RadiatorSize(Size size) {
    throw new UnsupportedOperationException("Not yet implemented");
} 
```

注意到这里缺少`void`返回类型了吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T14:39:27.740

据我所见，您根本没有构造函数。

```
public void RadiatorSize(Size sz) {
        size = sz;
    } 
```

不是构造函数，它是正常的方法**。**

尝试将其更改为：

```
 public RadiatorSize RadiatorSize(Size sz) {
            size = sz;
        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T14:40:11.040

您需要 Radiator 和 RadiatorSize 中的构造函数。看起来像构造函数的方法实际上有一个返回类型，并被视为常规方法。取消返回类型。

# blackberry - 卡在通过 HTTP 连接访问网站 - 黑莓

> ID：13345581
> 
> 赞同：0
> 
> 时间：2012-11-12T14:34:26.653
> 
> 标签：blackberry, httpconnection

试图访问一个网站，但它没有被击中。我写了以下代码。

```
package mypackage;

import net.rim.device.api.ui.*;
import net.rim.device.api.ui.component.*;
import net.rim.device.api.ui.container.*;
import net.rim.device.api.io.transport.*;
import javax.microedition.io.*;
import java.io.*;

public class HTTPFirstAvailable extends UiApplication
{   
    public static void main(String[] args)
    {
        HTTPFirstAvailable theApp = new HTTPFirstAvailable();
        theApp.enterEventDispatcher();
    }

    public HTTPFirstAvailable()
    {
        UiApplication.getUiApplication().pushScreen(new HTTPFirstAvailableScreen());
    }
}

class ConnectionThread extends Thread
{
    public void run()
    {

          ConnectionFactory connFact = new ConnectionFactory();
          ConnectionDescriptor connDesc;
          connDesc = connFact.getConnection("http://www.example.com/login.php?count=786");

          if (connDesc != null)
          {
              HttpConnection httpConn;

              httpConn = (HttpConnection)connDesc.getConnection();
              try
              {
                  final int iResponseCode = httpConn.getResponseCode();

                  UiApplication.getUiApplication().invokeLater(new Runnable()
                  {
                      public void run()
                      {
                          Dialog.alert("Response code: " + 
                                        Integer.toString(iResponseCode)); 
                      }
                   });
               } 
               catch (IOException e) 
               {
                 System.err.println("Caught IOException: " 
                      + e.getMessage());
               }
          }
    }
}     

class HTTPFirstAvailableScreen extends MainScreen
{   
    public HTTPFirstAvailableScreen()
    {
        setTitle("HTTP First Sample");
        add(new RichTextField("Trying to make HTTP connection... \n"));
        ConnectionThread ct = new ConnectionThread();
        ct.start(); 
    }
} 
```

实际上想从他们那里得到一个json响应。但我坚持第一步。浏览了不同的论坛并搜索了很多。我还在启动之前执行了 MDS，它给出了错误但它没有在服务器上受到任何影响。可能是我错过了一些东西。

我在这里先向您的帮助表示感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:34:17.227

我之前正在启动安装在 Program File x86 中的 MDS，它给出了阻止黑莓模拟器访问 web 服务的错​​误。现在我已经将它安装在 C 驱动器下，现在它的工作就像一个魅力！

仅仅因为 MDS 在安装在程序文件 (x86) 中时出现错误，出于安全考虑，它没有运行并出现错误。所以卸载它并直接在C根文件夹下安装它就可以了！

# oracle - oracle - 如何列出将在 2 个月内到期的产品？

> ID：13345583
> 
> 赞同：0
> 
> 时间：2012-11-12T14:34:28.090
> 
> 标签：oracle, date

假设所有产品在 1 年内到期

如何列出将在 2 个月后到期的产品？

```
table product
--------------------------------

food    | ManufacturedDate| 
--------------------------------
apple   | 12-nov-11  
orange  | 12-jan-12  
pear    | 12-jan-12  
milk    | 12-nov-11
mango   | 12-nov-11 
```

输出

```
orange  | 12-jan-12
pear    | 12-jan-12 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:50:21.677

你的数据说除了梨+橙之外的其他人今天到期，所以假设你想排除今天到期并包括那些在 2 个月内到期的人：

```
SQL> select food, manufacturedate, add_months(manufacturedate,12) expiry_date from product where add_months(manufacturedate, 12) <= add_months(trunc(sysdate), 2) and add_months(manufacturedate, 12) > trunc(sysdate);

FOOD        MANUFACTU EXPIRY_DA
--------------- --------- ---------
orange      12-JAN-12 12-JAN-13
pear        12-JAN-12 12-JAN-13 
```

或更便于索引的放置方式（删除列侧的功能）：

```
SQL> select food, manufacturedate, add_months(manufacturedate,12) expiry_date from product where manufacturedate <= add_months(trunc(sysdate), -10) and manufacturedate > add_months(trunc(sysdate), -12);

FOOD        MANUFACTU EXPIRY_DA
--------------- --------- ---------
orange      12-JAN-12 12-JAN-13
pear        12-JAN-12 12-JAN-13 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:45:27.437

尝试：

```
select * 
from product
where add_months( trunc(ManufacturedDate), 12 ) >= trunc(SYSDATE)
and add_months( trunc(ManufacturedDate), 12) <= add_months(trunc(SYSDATE), 2); 
```

# google-apps-script - 在 ServerHandler 中记录

> ID：13345588
> 
> 赞同：0
> 
> 时间：2012-11-12T14:34:42.840
> 
> 标签：google-apps-script

我无法让我的日志记录在我的处理程序中工作。有任何想法吗？

```
function doGet() {
  //...
  var box = app.getElementById('box').addItem('<Select>');
  for(var i = 0; i < members.length; i++) {
    iamBox.addItem(members[i]);
  }

  var handler = app.createServerHandler("boxHandler");
  handler.addCallbackElement(box);
  box.addChangeHandler(handler);

  Logger.log('works');

  return app;
}

var handler = function(eventInfo)  {
  Logger.log('doesnt work');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T17:28:19.677

不幸的是，这是自今年 6 月以来的一个[已知问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1502)......我每天都祈祷 (;-) 希望他们能解决它。与此同时，@megabyte1024 提供了一个非常好的解决方法，问题跟踪器也引用了它（[问题 1502，请参阅最后一条评论](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1502)）

# pdf - 将每个 PDF 页面一分为二？

> ID：13345593
> 
> 赞同：30
> 
> 时间：2012-11-12T14:35:05.763
> 
> 标签：pdf, layout, pdf-generation, split

我有大量的 PDF 文件，每页有两张幻灯片（用于打印）。

格式是 A4 页面，每个页面都有两张幻灯片，如下所示：

```
-----------
| slide 1 |
-----------
| slide 2 |
----------- 
```

**如何生成每页一张幻灯片的新 PDF 文件？**

乐于使用 GUI、CLI、脚本甚至是与一种语言的 PDF 库的接口；但我确实需要幻灯片上的文本仍然可以选择。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-16T10:15:46.667

[**PDF Scissors**](https://sites.google.com/site/pdfscissors/)允许我批量拆分（裁剪）PDF 中的所有页面。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-02-10T14:35:07.220

`mutool`为此出色地工作。下面的示例将每页切`input.pdf`分为 3 个水平部分和 8 个垂直部分（因此为每 1 个输入创建 24 页输出）：

```
mutool poster -x 3 -y 8 input.pdf output.pdf 
```

要安装`mutool`，只需 install [`mupdf`](http://www.mupdf.com)，它可能与大多数 GNU/Linux 发行版一起打包。

（[归功于 martt](https://unix.stackexchange.com/a/179398/26952)。）

在 ubuntu 等基于 debian 的 linux 系统上，您可以使用

```
sudo apt install mupdf
sudo apt install mupdf-tools 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-09-05T03:55:00.617

[Briss](http://briss.sourceforge.net/)是“一个用于裁剪 PDF 文件的简单跨平台（Linux、Windows、Mac OSX）应用程序。一个简单的用户界面让您可以通过在视觉重叠的页面上放置一个矩形来准确定义裁剪区域。” 它是开源的（GPL）。

对我来说效果很好。GUI 很小，但很实用。它也可以从命令行使用。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-04-01T12:23:41.880

You can use a Python library called PyPDF. This function will split double pages no matter what the page orientation is:

```
import copy
import math
import pyPdf

def split_pages(src, dst):
    src_f = file(src, 'r+b')
    dst_f = file(dst, 'w+b')

    input = pyPdf.PdfFileReader(src_f)
    output = pyPdf.PdfFileWriter()

    for i in range(input.getNumPages()):
        p = input.getPage(i)
        q = copy.copy(p)
        q.mediaBox = copy.copy(p.mediaBox)

        x1, x2 = p.mediaBox.lowerLeft
        x3, x4 = p.mediaBox.upperRight

        x1, x2 = math.floor(x1), math.floor(x2)
        x3, x4 = math.floor(x3), math.floor(x4)
        x5, x6 = math.floor(x3/2), math.floor(x4/2)

        if x3 > x4:
            # horizontal
            p.mediaBox.upperRight = (x5, x4)
            p.mediaBox.lowerLeft = (x1, x2)

            q.mediaBox.upperRight = (x3, x4)
            q.mediaBox.lowerLeft = (x5, x2)
        else:
            # vertical
            p.mediaBox.upperRight = (x3, x4)
            p.mediaBox.lowerLeft = (x1, x6)

            q.mediaBox.upperRight = (x3, x6)
            q.mediaBox.lowerLeft = (x1, x2)

        output.addPage(p)
        output.addPage(q)

    output.write(dst_f)
    src_f.close()
    dst_f.close() 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-02-26T08:29:54.873

感谢 Matt Gumbley 的 Python 脚本。我已经修改了 Python 脚本，使其现在也适用于包含纵向和横向页面以及裁剪页面的 PDF：

```
# -*- coding: utf-8 -*-
"""
Created on Thu Feb 26 08:49:39 2015

@author: Matt Gumbley  (stackoverflow)
changed by Hanspeter Schmid to deal with already cropped pages
"""

import copy
import math
from PyPDF2 import PdfFileReader, PdfFileWriter

def split_pages2(src, dst):
    src_f = file(src, 'r+b')
    dst_f = file(dst, 'w+b')

    input = PdfFileReader(src_f)
    output = PdfFileWriter()

    for i in range(input.getNumPages()):
        # make two copies of the input page
        pp = input.getPage(i)
        p = copy.copy(pp)
        q = copy.copy(pp)

        # the new media boxes are the previous crop boxes
        p.mediaBox = copy.copy(p.cropBox)
        q.mediaBox = copy.copy(p.cropBox)

        x1, x2 = p.mediaBox.lowerLeft
        x3, x4 = p.mediaBox.upperRight

        x1, x2 = math.floor(x1), math.floor(x2)
        x3, x4 = math.floor(x3), math.floor(x4)
        x5, x6 = x1+math.floor((x3-x1)/2), x2+math.floor((x4-x2)/2)

        if (x3-x1) > (x4-x2):
            # horizontal
            q.mediaBox.upperRight = (x5, x4)
            q.mediaBox.lowerLeft = (x1, x2)

            p.mediaBox.upperRight = (x3, x4)
            p.mediaBox.lowerLeft = (x5, x2)
        else:
            # vertical
            p.mediaBox.upperRight = (x3, x4)
            p.mediaBox.lowerLeft = (x1, x6)

            q.mediaBox.upperRight = (x3, x6)
            q.mediaBox.lowerLeft = (x1, x2)

        p.artBox = p.mediaBox
        p.bleedBox = p.mediaBox
        p.cropBox = p.mediaBox

        q.artBox = q.mediaBox
        q.bleedBox = q.mediaBox
        q.cropBox = q.mediaBox

        output.addPage(q)
        output.addPage(p)

    output.write(dst_f)
    src_f.close()
    dst_f.close() 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-06-01T17:14:34.577

这是我如何做到的`pdfrw`：

```
import sys, os, pdfrw
writer = pdfrw.PdfWriter()
for page in pdfrw.PdfReader('input.pdf').pages:
    for y in [0, 0.5]:
        newpage = pdfrw.PageMerge()    
        newpage.add(page, viewrect=(0, y, 1, 0.5))
        writer.addpages([newpage.render()])
writer.write('output.pdf') 
```

短而有效！

如果您希望它旋转（例如：输入 A4 纵向，输出 2 A5 纵向而不是横向）：

```
import sys, os, pdfrw
writer = pdfrw.PdfWriter()
for page in pdfrw.PdfReader('input.pdf').pages:
    for y in [0, 0.5]:
        newpage = pdfrw.PageMerge()    
        newpage.add(page, viewrect=(0, y, 1, 0.5))
        p = newpage.render()
        p.Rotate = 270
        writer.addpages([p])
writer.write('output.pdf') 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-01T10:46:13.133

> 试试[BRISS](http://sourceforge.net/projects/briss/)。
> 
> ![替代文字](../Images/e3d7283011724cc64abc2137ed97ff04.png)
> 
> 它允许您通过使用 GUI 定义区域来将每个页面拆分为任意数量的子页面。它为您将所有相似的页面分组，因此您可以为该组定义一次区域。
> 
> 它是跨平台的、免费的和开源的。

[（从https://superuser.com/a/235327/35237](https://superuser.com/a/235327/35237)复制粘贴）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-12T14:54:55.007

如果您可以使用 Java 或 .Net 库，则可以使用 iText / iTextSharp。

[可以在免费提供的第 6 章](http://www.manning.com/lowagie2/samplechapter6.pdf)：[TilingHero.java](http://itextpdf.com/examples/iia.php?id=116) / [TilingHero.cs](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter06&ex=TilingHero)中的 iText in Action，第 2 版一书中找到平铺现有文档的示例。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-11-14T08:54:17.537

感谢 moraes 的回答。就我而言，生成的 PDF 在 Adob​​e Reader 和 Mac 预览中看起来不错，但在 iOS 上查看时似乎根本没有分成单独的页面。我使用了 Python 2.7.8 和 PyPDF 2，并将脚本修改如下，效果很好。（并重新排列页面左/右，而不是右/左）。

```
import copy
import math
from PyPDF2 import PdfFileReader, PdfFileWriter

def split_pages(src, dst):
    src_f = file(src, 'r+b')
    dst_f = file(dst, 'w+b')

    input = PdfFileReader(src_f)
    output = PdfFileWriter()

    for i in range(input.getNumPages()):
        p = input.getPage(i)
        q = copy.copy(p)
        q.mediaBox = copy.copy(p.mediaBox)

        x1, x2 = p.mediaBox.lowerLeft
        x3, x4 = p.mediaBox.upperRight

        x1, x2 = math.floor(x1), math.floor(x2)
        x3, x4 = math.floor(x3), math.floor(x4)
        x5, x6 = math.floor(x3/2), math.floor(x4/2)

        if x3 > x4:
            # horizontal
            p.mediaBox.upperRight = (x5, x4)
            p.mediaBox.lowerLeft = (x1, x2)

            q.mediaBox.upperRight = (x3, x4)
            q.mediaBox.lowerLeft = (x5, x2)
        else:
            # vertical
            p.mediaBox.upperRight = (x3, x4)
            p.mediaBox.lowerLeft = (x1, x6)

            q.mediaBox.upperRight = (x3, x6)
            q.mediaBox.lowerLeft = (x1, x2)

        p.artBox = p.mediaBox
        p.bleedBox = p.mediaBox
        p.cropBox = p.mediaBox

        q.artBox = q.mediaBox
        q.bleedBox = q.mediaBox
        q.cropBox = q.mediaBox

        output.addPage(q)
        output.addPage(p)

    output.write(dst_f)
    src_f.close()
    dst_f.close() 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-07T04:41:20.170

使用`mupdf-1.8-windows-x64`，在win10 CMD中，您需要在水平参数（-x）之前有'**海报**'（后跟空格且不带引号）。例如，对于 PDF 的双页扫描：

> mutool 海报 -x 2 -y 1 C:\Users\alfie\Documents\SNM\The_Ultimate_Medicine.pdf C:\Users\alfie\Documents\ebooks\The_Ultimate_Medicine.pdf

多么美妙的工具啊！谢谢无限！..（输出文件 ~9MB 仅比原始文件大 52KB！）

# wordpress - 博客页面上的 WordPress 特色图片

> ID：13345594
> 
> 赞同：0
> 
> 时间：2012-11-12T14:35:12.907
> 
> 标签：wordpress

我希望能够在“博客”页面上使用特色图片。这是开发网站：[http ://splashagency.com.au/dev/jetset/travel-blog/](http://splashagency.com.au/dev/jetset/travel-blog/)

如您所见，页面顶部是蓝天（有一点云）图像。这似乎是从帖子特色图片中提取的，但我希望能够登录，转到页面 > 编辑 > 特色图片并不时更改它。就像它在所有其他页面上的工作方式一样。

但由于某种原因，我似乎无法让它工作。这是我的 index.php 代码：

```
get_header(); ?>

<div id="category-pic" class="cf">
    <?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>
        <?php the_post_thumbnail( 'package-categpry-pic' ); ?>
    <?php endwhile; ?>
</div><!-- category-pic -->

<article id="content" class="left ">    

            <?php
            /* Run the loop to output the posts.
             * If you want to overload this in a child theme then include a file
             * called loop-index.php and that will be used instead.
             */
             get_template_part( 'loop', 'index' );
            ?>

</article><!-- content -->

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

是的，我意识到缩略图名称上有拼写检查！

提前致谢

# c++ - C ++在数组中存储具有不同模板的相同类

> ID：13345595
> 
> 赞同：3
> 
> 时间：2012-11-12T14:35:15.600
> 
> 标签：c++, arrays, templates, containers

我有以下课程：

```
template <typename T>
class A
{
public:
    void method(const char *buffer);
    // the template T is used inside this method for a local variable
}; 
```

现在我需要一个具有不同模板的此类的实例数组，例如：

```
std::vector<A*> array;
array.push_back(new A<uint32_t>);
array.push_back(new A<int32_t>); 
```

但`std::vector<A*> array;`不会工作，因为我显然需要指定一个模板，但我不能这样做，因为我在这个数组中存储了不同的类型。是否有某种泛型类型或其他解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T14:49:40.083

你需要一个基类：

```
class ABase {
public:
    virtual void method(const char *) = 0;
    virtual ~ABase() { }
};

template <typename T>
class A : public ABase
{
public:
    virtual void method(const char *);
}; 
```

然后像使用它

```
std::vector<ABase*> array;
array.push_back(new A<uint32_t>);
array.push_back(new A<int32_t>); 
```

# php - 如何使用 Php 和 Curl http 请求更改 facebook 封面图片

> ID：13345596
> 
> 赞同：1
> 
> 时间：2012-11-12T14:35:21.840
> 
> 标签：php, facebook, curl, httprequest

我在使用 facebook 和 PHP 时遇到问题。

当我刷新它时，我正在尝试更改我的 Facebook 页面的封面照片。Facebook 文档根本不清楚，我只是明白用 php API 还不能做到这一点。

我在 fb dvpers 上发现了这一点：

“此外，您可以通过发出 HTTP POST 请求来设置主页的封面照片：

curl -F "cover=1232343" -F "offset_y=30" -F "no_feed_story=false" \ "https://graph.facebook.com/PAGE_ID?access_token__" "

我可以通过浏览器获取我的令牌访问，网址如下：

[https://www.facebook.com/dialog/oauth?client_id=APP_ID&redirect_uri=URL&scope=publish_stream](https://www.facebook.com/dialog/oauth?client_id=APP_ID&redirect_uri=URL&scope=publish_stream)

但我不太了解如何使用 curl 更改我的应用程序的封面照片。如果有人可以提供帮助，那就太棒了。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:42:29.903

why do you use publish_stream? you don´t need that permission. also, you need a page access token for this. the facebook docs are very clear about that.

try it with the php sdk (untested):

```
$response = $facebook->api('/PAGE-ID', 'POST', array(
    'access_token' => $page_access_token,
    'cover' => 'PICTURE-ID'
)); 
```

# ios - NSDate 格式在模拟器上正确，在设备上不正确

> ID：13345597
> 
> 赞同：1
> 
> 时间：2012-11-12T14:35:23.570
> 
> 标签：ios, ios6, nsdate, nsdateformatter

我正在使用`NSDateFormatter`将日期格式化为相对日期。在模拟器中，日期正确显示为“2012 年 11 月 12 日”，但在我的设备上，相同的日期显示为“2012-11-12”。我正在运行相同的操作系统版本。

这是我正在使用的代码：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeStyle:NSDateFormatterNoStyle];
[dateFormatter setDateStyle:NSDateFormatterMediumStyle];
[dateFormatter setDoesRelativeDateFormatting:YES];
NSString *dateString = [dateFormatter stringFromDate:dateToDisplay]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T14:37:55.693

可能是不同的本地化。在您的设备和模拟器上检查设置 --> 常规 --> 国际。你可以设置你`dateFormatter`喜欢的语言环境

```
NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en/US"];
[dateFormatter setLocale:locale]; 
```

# wcf - wsdl 和配置文件中的绑定不匹配

> ID：13345601
> 
> 赞同：0
> 
> 时间：2012-11-12T14:35:34.387
> 
> 标签：wcf, iis-7, wcf-binding

我有一个独特的问题。我使用 wsHttpBinding 托管了一个 WCF 服务。具有绑定配置的 server.config 文件如下所示：

```
<system.serviceModel>
     <services>
      <service behaviorConfiguration="SafeSerice.ServiceBehavior" name="NEPLANWEBV18.1.Services.External.NeplanService">
        <endpoint address="" binding="wsHttpBinding" contract="NEPLANWEBV18.1.External.INeplanService" bindingConfiguration="SafeServiceConf">
        </endpoint>
        <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <bindings>
      <wsHttpBinding>
         <binding name="SafeServiceConf" closeTimeout="00:05:00" openTimeout="00:10:00" receiveTimeout="01:20:00" sendTimeout="01:20:00" maxReceivedMessageSize="2147483647">
          <security mode="TransportWithMessageCredential">
            <message clientCredentialType="UserName" />
          </security>
          <readerQuotas maxArrayLength="2147483646" maxBytesPerRead="65536" maxStringContentLength="2147483646" />
        </binding>
      </wsHttpBinding>
    </bindings> 
```

但是，在 IIS 7.0 中托管它之后，当我浏览和查看 WSDL 时，绑定如下：

```
<wsdl:binding name="BasicHttpBinding_NeplanService" type="i0:NeplanService"> 
```

我在哪里犯错？对于这项服务，我需要 wsHttpBinding。如果有人能对此事有所了解，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:40:42.343

经过长时间的困惑后得到了答案。我把服务名给错了。由于它无法找到服务，它默认为 basichttp 绑定。

# jasper-reports - 如何将字段从主报表传递到表格元素？

> ID：13345607
> 
> 赞同：4
> 
> 时间：2012-11-12T14:36:02.000
> 
> 标签：jasper-reports, ireport

到目前为止，我使用列标题和详细信息带来生成表格。现在我想在 iReport (4.0.2) 中使用表格元素。

我这样尝试过：[iReport: Passing parameters from a main report query to a dataset query for a table or list](https://stackoverflow.com/questions/3681704/ireport-passing-parameters-from-a-main-report-query-to-a-dataset-query-for-a-ta)

但这对我没有用。我想是因为我想传递一个字段而不是参数。使用这种方法，我得到一个表，但只有 1 行（需要 17 行）。

我正在使用 JRMapCollectionDataSource。

如何在表格中显示我的整套值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-09T00:44:37.317

当您在数据集中为表设置参数时，您可以映射一个**字段**以传递给该参数。

例如，在我的主查询中，我选择了 WIDGET 和 THINGAMABOB 字段。

在我的数据集查询中，我添加了一个名为 WIDGET 的参数和一个名为 THINGAMABOB 的参数。当您编辑表的表数据源时，转到参数，然后单击添加。对于数据集参数名称，选择您刚刚添加到数据集的参数。对于值表达式，选择“字段”，然后选择要映射到该参数的字段（在这种情况下，主查询中的字段 WIDGET 将映射到数据集中的 WIDGET 参数）。然后，您可以在表中使用这些参数，就好像它们是字段一样，它们将使用主报告中的字段值。

如果您已将该表放在详细信息带中，它现在将为每个字段值（WIDGET 和 THINGAMABOB）运行该表，如果您要将这些字段放入主报告的详细信息带中，您会看到这些值。

# redmine - redmine重新安装

> ID：13345610
> 
> 赞同：2
> 
> 时间：2012-11-12T14:36:12.857
> 
> 标签：redmine, ubuntu-12.04

我正在尝试在 Ubuntu 12.0.4 上安装 Redmine。

我很好地按照 Redmine 网站上的以下说明进行操作：

* * *

安装最新的Redmine

带有 Ubuntu 10.04 的软件包卡在 0.9.x 分支中，而 Ubuntu 12.04 卡在 1.3.x 分支中。存在具有最新分支的 PPA：[https ://launchpad.net/~ondrej/+archive/redmine](https://launchpad.net/~ondrej/+archive/redmine)

要使用 PPA 安装 redmine：

```
$ sudo add-apt-repository ppa:ondrej/redmine
$ sudo apt-get update
$ sudo apt-get install redmine redmine-mysql 
```

* * *

然后我在上面最后一个命令的执行结束时遇到了一个错误。我用谷歌搜索找到错误的修复程序，但找不到任何错误。因此，我找到了在此之前安装的所有 redmine 文件夹，删除了 mysql empty db 'redmine' 和关联的用户。现在，我正在尝试使用上面的最后一个命令重新安装 Redmine，但不断收到以下错误。

```
root@hrrankdev1:~# apt-get install redmine redmine-mysql
Reading package lists... Done
Building dependency tree
Reading state information... Done
redmine is already the newest version.
redmine-mysql is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 82 not upgraded.
1 not fully installed or removed.
After this operation, 0 B of additional disk space will be used.
Do you want to continue [Y/n]? Y
Setting up redmine (2.1.2+dfsg1-1~precise+13) ...
chown: cannot access `/usr/share/redmine/config/environment.rb': No such file or directory
dpkg: error processing redmine (--configure):
 subprocess installed post-installation script returned error exit status 1
Errors were encountered while processing:
 redmine
E: Sub-process /usr/bin/dpkg returned an error code (1) 
```

我认为我已经超出了修复原始错误的范围。我正在寻找的只是删除以前中止安装的所有痕迹并重新安装。任何有关如何继续成功安装的建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T23:13:48.230

我建议使用[Bitnami Redmine Stack](http://bitnami.com/stack/redmine)。

我尝试从 Etienne 建议的源代码安装 Redmine。虽然我确实设法让它在 Ubuntu 12.04 上运行，但它有点痛苦。

我现在正在使用 Bitnami Redmine 虚拟机。设置轻而易举，只需按照[此处的说明进行操作](http://wiki.bitnami.com/Virtual_Appliances_Quick_Start_Guide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T15:07:45.837

我从未尝试使用 Ubuntu/Debian 存储库安装 Redmine。他们总是落后于当前版本的 Redmine。

您最好使用主开发树中的最新源代码安装 Redmine。只需按照此处的说明进行操作：

[http://www.redmine.org/projects/redmine/wiki/RedmineInstall](http://www.redmine.org/projects/redmine/wiki/RedmineInstall)

这是一种比使用 Ubuntu 软件包更手动的方法，但您将获得最新和最强大的功能。说明很清楚，只需按顺序执行即可。

# asp.net - 如何用 DataTable 中的数据填充文本框

> ID：13345612
> 
> 赞同：0
> 
> 时间：2012-11-12T14:36:17.270
> 
> 标签：asp.net, datatable

我想将 DataTable 中的第一列数据填充到文本框中。

这样做的语法是什么。

到目前为止我有这个，但在最后一行出现错误。

```
 DataTable dt = new DataTable();
    string strConnection = ConfigurationManager.ConnectionStrings["ChinatowndbConnString"].ConnectionString;
    SqlConnection conn = new SqlConnection(strConnection);
    string sql = "SELECT * FROM vwSchedule where scheduleid =" + scheduleid;
    SqlCommand cmd = new SqlCommand(sql);
    cmd.CommandType = CommandType.Text;
    cmd.Connection = conn;
    SqlDataAdapter sd = new SqlDataAdapter(cmd);
    sd.Fill(dt);

    tbEvent.Text dt.Rows[0].Field<String>(0); // first field of first row, assuming that it's a string 
```

敬茶

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:41:22.170

如果你更换

```
tbEvent.Text dt.Rows[0].Field<String>(0); 
```

和

```
tbEvent.Text = dt.Rows[0].Field<String>(0); 
```

它应该按预期工作（假设有行并且第一列的类型是字符串）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:41:13.420

您在最后一行语法中缺少 Equals ：

```
tbEvent.Text dt.Rows[0].Field<String>(0); 
```

它应该是：

```
tbEvent.Text = dt.Rows[0].Field<String>(0); 
```

或者

```
tblEvent.Text = dt.Rows[0].ItemArray[0]; 
```

那应该这样做。

参考：[访问数据表的单元格值](https://stackoverflow.com/questions/9022118/access-cell-value-of-datatable)

# php - PHP - 将单选按钮的总值传递到下一页

> ID：13345617
> 
> 赞同：0
> 
> 时间：2012-11-12T14:36:27.157
> 
> 标签：php, radio

我有一个 PHP 页面，显示带有单选按钮的 MySQL 查询的总数。这是在一个表格里面。用户应该选择一个单选按钮来填写所有表格，然后总数将存储在数据库中，我想将所选单选按钮的总值传递到下一页并打印出来。

我知道这很容易，但我不能正确地提出解决方案。

我的 PHP 页面代码如下：

```
 <?php

   session_start();
   $Load=$_SESSION['login_user'];
   include('../connect.php');
   $sql= "Select name from student where ID='$Load'";
   $username = mysql_query($sql);
    $id=$_SESSION['login_user'];

                if (isset($_POST['submit']))

{  
  $v1 = $_POST['v1'];
  $v2 = intval($_POST['v2']);
  $v3 = intval($_POST['v3']);
  $v4 = intval($_POST['v4']);
  $total = $2 + $v3 + $v4 ;

 mysql_query("INSERT into Form1 (ID,P1,P2,P3,TOTAL)
 values('$id','$v2','$v3','$v4','$total')") or die(mysql_error());
 header("Location: mark.php");
 }

?>

<html>

<head>

<?php

if(!isset($_SESSION['login_user']))

header("Location:index.html");

?>
  <title>Q&A Form</title>

</head>

<body>

    <center><form method="post" action="mark.php"  >

    <table style="width: 20%" >

<font size='4'>
    <table style="width: 70%">
        <tr>
<th > School Evaluation <font size="4" > </font></th>

<tr>
<th> Your attendance<font size="4" > </font></th>
<td>  <input type="radio" name ="v2" value = "4"    onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v2" value = "3"    onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v2" value = "2"    onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v2" value = "1"    onclick="updateTotal();" /></td>    
</tr>

<tr>
<th > Your grades  <font size="4" > </font></th>
<td>  <input type="radio" name ="v3" value = "4"    onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v3" value = "3"    onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v3" value = "2"    onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v3" value = "1"    onclick="updateTotal();" /></td>    
</tr>

<tr>
<th >Your self-control <font size="4" > </font></th>
<td>  <input type="radio" name ="v4" value = "4"    onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v4" value = "3"    onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v4" value = "2"    onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v4" value = "1"    onclick="updateTotal();" /></td>    
</tr>       

        </tr>
    </table>

    <br>
   <td><input type="submit" name="submit" value="Submit">

    <input type="reset" name="clear" value="clear" style="width: 70px"></td>

 </form> 
</center>
</div>

</body>
</html> 
```

当用户按下提交时，所有无线电输入将存储在数据库中，它将转到 mark.php 我想在此页面中打印出总数如何将总数传递到下一页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:49:44.023

您的 PHP 脚本中可能有错误。

这个...

```
$total = $2 + $v3 + $v4 ; 
```

应该

```
$total = $v2 + $v3 + $v4 ; 
```

你的脚本有点混乱......这是我的重构建议：

```
<?php
session_start();
if (!isset($_SESSION['login_user'])) {
    // User is not logged in so we redirect it to the login page
    header("Location:index.html");
}

?>
<!DOCTYPE html>
<html>
<head>
    <title>Q&A Form</title>
    <!-- (head stuff) --></head>
<body>
<?php

//User is logged, let's retrieve user information
$userID = $_SESSION['login_user'];

// I Assume this is your database handler helper
include('../connect.php'); 
$query = sprintf("SELECT name FROM student WHERE ID = '%s'", $userID);
$username = mysql_query($query);

/* MULTI STEP FORM */

if (isset($_POST['submit_laststep'])) {
    // User completed the multistep form
    // We insert data in the database

    // Insert data into database here (I don't know which data it is)
    // but you can retrieve the data accessing $_SESSION
    $v2 = $_SESSION['form_values']['step1']['v1'];
    $v3 = $_SESSION['form_values']['step1']['v2'];
    $v4 = $_SESSION['form_values']['step1']['v3'];
    $total = $_SESSION['form_values']['step1']['total'];

    $query = "INSERT into Form1 (ID,P1,P2,P3,TOTAL) values('$id','$v2','$v3','$v4','$total')";
    mysql_query($query) or die(mysql_error());

    // Print a thank you notice
    print "<span>Thank you $username for submitting this form</span>";

} else if (isset($_POST['submit_step1'])) {
    // User completed first step of form

    // Handle form values
    $v1 = $_POST['v1'];
    $v2 = intval($_POST['v2']);
    $v3 = intval($_POST['v3']);
    $v4 = intval($_POST['v4']);

    $_SESSION['form_values']['step1'] = array();
    // Save values for further steps
    // Mode 1 - Manual
    /*
    $_SESSION['form_values']['step1'] = array
    (
        'v1' => $v1,
        'v2' => $v2,
        'v3' => $v3,
        'v4' => $v4
    );
    */
    // This process can be form value agnostic, like this:
    // Mode 2 - More automatic (field agnostic, saves everything).
    foreach ($_POST as $k => $v) {
        $_SESSION['form_values']['step1'][$k] = $v;
    }

    // Calculate total
    $total = $v2 + $v3 + $v4 ;

    // save total to session too
    $_SESSION['form_values']['step1']['total'] = $total;

    // We print the sum of the radio buttons like you asked
    print "<span>Total from previous: $total</span>"; 
    include ('step2.form.html');

} else {
    //User has not completed step 1, so we show step 1 form
    include ('step1.form.html');
}
?>
</body>
</html> 
```

* * *

**形式：**

表格 1：

```
<form id ="step1" method="post" action="">
    <table>
        <tr><th colspan="4">School Evaluation</th></tr>
        <tr><td colspan="4">Your attendance</td></tr>
        <tr>
            <td><input type="radio" name ="v2" value = "4"    onclick="updateTotal();" /></td>
            <td><input type="radio" name ="v2" value = "3"    onclick="updateTotal();" /></td>
            <td><input type="radio" name ="v2" value = "2"    onclick="updateTotal();" /></td>
            <td><input type="radio" name ="v2" value = "1"    onclick="updateTotal();" /></td>    
        </tr>

        <tr><td colspan="4">Your grades</td></tr>
        <tr>
            <td><input type="radio" name ="v3" value = "4"    onclick="updateTotal();" /></td>
            <td><input type="radio" name ="v3" value = "3"    onclick="updateTotal();" /></td>
            <td><input type="radio" name ="v3" value = "2"    onclick="updateTotal();" /></td>
            <td><input type="radio" name ="v3" value = "1"    onclick="updateTotal();" /></td>    
        </tr>

        <tr><td colspan="4">Your self-control</td></tr>
        <tr>
            <td><input type="radio" name ="v4" value = "4"    onclick="updateTotal();" /></td>
            <td><input type="radio" name ="v4" value = "3"    onclick="updateTotal();" /></td>
            <td><input type="radio" name ="v4" value = "2"    onclick="updateTotal();" /></td>
            <td><input type="radio" name ="v4" value = "1"    onclick="updateTotal();" /></td>    
        </tr>
        <tr>
            <td colspan="4">
                <input type="submit" name="submit_step1" value="Next">
                <input type="reset" name="clear" value="clear" style="width: 70px">
            </td>
        </tr>
    </table>
</form> 
```

* * *

表单2示例！

```
<form id ="steplast" method="post" action="">
    <!-- form stuff -->
    <input type="submit" name="submit_steplast" value="Submit">
</form> 
```

# php - 成功时动态更改 Yii ajaxLink 的 URL

> ID：13345619
> 
> 赞同：2
> 
> 时间：2012-11-12T14:36:46.770
> 
> 标签：php, jquery, ajax, yii

ajax 成功执行后，如何更改 ajax 链接的 URL 参数？以下代码不起作用，但解释了我想要做什么。

```
CHtml::ajaxLink($text, array('/core/bookmark/create'), array(
    'data' => array("id" => $id),
    'type' => 'GET',
    'success'=>'js:function(data){
        if (data.status == "success"){ 
            //attempt to dynamically change the URL
            this.url = "/core/bookmark/delete";
            $("#bookmark-btn").toggleClass("bookmark_on").toggleClass("bookmark_off");
        }
    }',
), array('id'=>'bookmark-btn', 'class' => 'bookmark_off')); 
```

带有的行`this.url`对 ajaxLink 的 URL 没有影响，但它也不会在控制台中引发任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:47:51.237

`CHtml::ajaxLink`渲染`a`元素，它没有`url`属性。你需要这样的代码：

```
if (data.status == "success"){ 
    jQuery(this).attr('href', '/core/bookmark/delete');
} 
```

**更新：**

> 此外，我想要做的是更改单击链接时触发的 Ajax 函数中的 URL，而不是更改链接本身。

在这种情况下，更好的解决方案是绘制两个`CHtml::ajaxLink`元素并根据 ajax-requests 结果切换它们的可见性。它会花费你更少的精力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T17:51:41.753

您当前方法的问题是双重的：

1.  .url 属性是指文档 URL，而不是链接的 URL
2.  您真正想要更改的是在 javascript 的事件处理程序中执行的操作，而不是 DOM 的一部分

我认为要获得你想要的行为，你需要在你的控制器中处理这个，以及稍微修改你的 ajaxLink 以跟踪状态。

```
CHtml::ajaxLink($text, array('/core/bookmark/create'), array(
    'data' => array("id" => $id, "state"=>$("#bookmark-btn").hasClass("bookmark_on") ),
    'type' => 'GET',
    'success'=>'js:function(data){
        if (data.status == "success"){ 
            var bookmarkState = $("#bookmark-btn").hasClass("bookmark_on");
            if (!bookmarkState) {
                $("#bookmark-btn").addClass("bookmark_on").removeClass("bookmark_off");
                // Probably need some code here to update the link text as well
            } else {
                $("#bookmark-btn").addClass("bookmark_off").removeClass("bookmark_on");
                // Probably need some code here to update the link text as well
            }
        }
    }',
), array('id'=>'bookmark-btn', 'class' => 'bookmark_off')); 
```

然后，在您的控制器中（我可能会将其重命名`create`为更通用的名称，例如`handleBookmark`），您需要检查 的值`state`，然后调用现有的`create`或`delete`您已经编写的操作。

或者，您可以通过 jQuery 在客户端执行此操作，但您必须编写自定义触发器和操作（很可能读取 的值`$("#bookmark-btn")`，并在那里使用不同的 javascript 路径）。这意味着您需要直接编写 javascript，而不是使用 Yii`ajaxLink`便捷方法。

如前所述，更简单的方法可能是同时渲染 an`add`和`delete`link 并根据需要切换可见性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T22:19:21.117

### 为什么你的方法不起作用

这不起作用的实际原因是您正在更改*当前*jquery ajax 对象的 url 属性，而不是未来对象的 url。当您看到生成的 html/js 时，这变得很明显：

关联：

```
<a href="#" class="bookmark_off" id="bookmark-btn">value-of-text</a> 
```

事件监听器（以下通常在最后一个找到`<script>`，`</body>`我也添加了一些评论）：

```
$('body').on('click','#bookmark-btn',function(){
    jQuery.ajax({'data':{'id':1},'type':'GET',
        'success':js:function(data){
            if (data.status == "success"){
                //attempt to dynamically change the URL
                this.url = "/core/bookmark/delete";
                $("#bookmark-btn").toggleClass("bookmark_on").toggleClass("bookmark_off");
            }
        },
        'url':'/project-name/index.php/core/bookmark/create', // this url is used repeatedly
        'cache':false
    }); // ajax call ends
    return false; // click handler ends
}); 
```

上面的监听器显示，每次点击都会创建/完成一个**新**的ajax 对象/调用，因此每次只更改*该*对象的 url，但不会更改**下一个**对象，该对象将为下一次调用创建。对于下一次调用，将使用相同的旧 url，即 : `'url':'/project-name/index.php/core/bookmark/create',`。

* * *

### 解决方案

有一种方法可以“动态更改 ajax 链接的 url”。而不是使用`CHtml::ajaxLink`，使用[普通`CHtml::link`](http://www.yiiframework.com/doc/api/1.1/CHtml#link-detail "http://www.yiiframework.com/doc/api/1.1/CHtml#link-detail")的，但添加了[`clientChange`选项](http://www.yiiframework.com/doc/api/1.1/CHtml#clientChange-detail "http://www.yiiframework.com/doc/api/1.1/CHtml#clientChange-detail")。`clientChange`选项包含在第三个参数to 中，`CHtml::link`即within `htmlOptions`。这样我们就可以为 ajax 调用指定一个动态 url，它将使用为 ajax 调用生成`href`的`<a>`标签，而不是静态 url。

一个例子（阅读代码中的注释）：

```
echo CHtml::link($text, array('/core/bookmark/create'), array(
    // the htmlOptions array, with clientOptions included
    'id'=>'bookmark-btn',
    'class' => 'bookmark_off',
    'return' => false, // this is already false by default - read documentation
    'ajax' => array( // now specify the ajax options, with a dynamic url
        'url' => 'js:$(this).attr("href")', // this takes the href property of
                // the <a> tag that is generated for this CHtml::link
        'data' => array('id' => $id),
        'custom_data_passed_to_ajax_object' => 'js:this', // this is important,
                // here we pass link, <a> tag, for use within the ajax object
        'success'=>'function(data){
            if (data.status == "success"){ 
                // now change the href of the <a> we passed in custom_data_passed_to_ajax_object
                $(this.custom_data_passed_to_ajax_object).attr("href",
                    "'.$this->createUrl('/core/bookmark/delete').'");
                $("#bookmark-btn").toggleClass("bookmark_on").toggleClass("bookmark_off");
            }
        }'
    )
)); 
```

您实际上`ajaxLink`也可以将上述解决方案调整为：

```
echo CHtml::ajaxLink($text,
    'js:$(this).attr("href")', // this will be generated as 'url':$(this).attr("href")
    array(// ajax options, remember to pass the reference to the <a>,
        // i.e custom_data_passed_to_ajax_object in the above snippet
    ),
    array(
        'href'=>$this->createUrl('/core/bookmark/create'), // your actual url
        // rest of htmlOptions
    )
); 
```

* * *

至于您的最终目标“实现一个书签按钮，在每次点击时在添加和删除功能之间切换”，其他人已经给了你足够的提示。

# oracle - SQLplus 解码执行脚本

> ID：13345621
> 
> 赞同：2
> 
> 时间：2012-11-12T14:36:54.587
> 
> 标签：oracle, sqlplus

我正在编写一个要在 sqlplus 11 中运行的脚本。我有一个名为压缩的用户定义变量。如果这是真的，那么我想运行脚本 CreateTablesCompression，否则运行。我有以下内容：

```
decode(compression,'true',@@CreateTablesCompression,@@CreateTables); 
```

但是，当我运行它时，我抛出了错误：未知命令开始“解码......

我在这里遗漏了什么吗，我不明白为什么 SQLPlus 不能识别解码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T14:56:07.567

`Decode`不是 SQL*PLUS 命令，不能直接在 sql*plus 中使用，只能在 pl/sql 块或查询中使用。因此，这里有一个如何进行条件分支的示例：我们声明一个变量，该变量`flag`将调节两个可用脚本中的哪一个要运行。

```
SQL> variable flag varchar2(7);
SQL> exec :flag := 'true';

PL/SQL procedure successfully completed.

SQL> column our_script new_value script noprint;
SQL> select decode(:flag, 'true', 
  2                'c:\sqlplus\script1.sql', 
  3                'c:\sqlplus\script2.sql'
  4                ) our_script
  5  from dual;

SQL> @&script;

SCRIPT                                                                          
--------                                                                        
script_1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T15:00:38.173

```
SQL> host cat foo.sql
set scan on
define compression=&1
col scr new_value script
set term off
select decode('&compression', 'true', 'CreateTablesCompression', 'CreateTables') scr from dual;
set term on
@@&script

SQL> @foo true
run CreateTablesCompression.sql
SQL> @foo false
run CreateTables.sql 
```

# facebook - Facebook喜欢从页面上消失

> ID：13345626
> 
> 赞同：1
> 
> 时间：2012-11-12T14:37:33.353
> 
> 标签：facebook, facebook-like

我的一些网站页面 ( [http://www.ufunded.com/campaigns/lisamom-foundation](http://www.ufunded.com/campaigns/lisamom-foundation) ) 中的 Facebook“赞”消失了。当我通过 Facebook 调试器运行页面 URL 时，我收到以下警告：

`Mismatch og:url and canonical url: og:url tag in the header is not the same URL as rel='canonical' link in the html.`

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.ufunded.com%2Fcampaigns%2Fgametime-salsa](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.ufunded.com%2Fcampaigns%2Fgametime-salsa)

但是，当我查看页面的源代码时，所有链接都是一致的。什么可能导致此问题？另外，指示的链接问题会导致我的喜欢消失吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:47:29.413

使用底部的[查看我们的抓取工具为您的 URL 看到的内容 -链接显示文档中有以下标签：](https://developers.facebook.com/tools/debug/og/echo?q=http://www.ufunded.com/campaigns/gametime-salsa)

```
<meta property="og:url" content="http://www.ufunded.com/campaigns/gametime-salsa">

<link rel="canonical" href="http://www.ufunded.com/campaigns"> 
```

正如调试工具所说，这些指向不同的 URL。

```
<meta property="og:image" content="http://www.ufunded.com/wp-content/uploads/campaign_uploads/1399534_2012.09.27 - Gametime Salsa - Bryce Conway -106.jpg"> 
```

如果您在（图像）URL 中使用空格，您应该在这样的地方正确地对它们进行 URL 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T02:25:22.980

添加破折号 / ，或在链接 rel="canonical" 的 href 末尾添加 .html ，它将起作用。

例如：

```
<meta property="og:url" content="http://toidangtin.com/tp-ha-noi/do-gia-dung-san-vuon/can-mua/can-mua-ti-vi-loa-amply-may-vi-tinh-tai-nha-co-quan-thanh-ly-cu-moi-ke-ca-cu-hong-291"/>
<link rel="canonical" href="http://toidangtin.com/tp-ha-noi/do-gia-dung-san-vuon/can-mua/can-mua-ti-vi-loa-amply-may-vi-tinh-tai-nha-co-quan-thanh-ly-cu-moi-ke-ca-cu-hong-291"/> 
```

上述方法不起作用，Facebook 调试器发出此警告：“标头中的 og:url 标记与 html 中的 rel='canonical' 链接不同。”

但在我添加 /

```
<meta property="og:url" content="http://toidangtin.com/tp-ha-noi/do-gia-dung-san-vuon/can-mua/can-mua-ti-vi-loa-amply-may-vi-tinh-tai-nha-co-quan-thanh-ly-cu-moi-ke-ca-cu-hong-291/"/>
<link rel="canonical" href="http://toidangtin.com/tp-ha-noi/do-gia-dung-san-vuon/can-mua/can-mua-ti-vi-loa-amply-may-vi-tinh-tai-nha-co-quan-thanh-ly-cu-moi-ke-ca-cu-hong-291/"/> 
```

有用。

# ubuntu - OpenCV 2.4.2 findContours 抛出错误（带有 CV 示例 prog）

> ID：13345634
> 
> 赞同：4
> 
> 时间：2012-11-12T14:37:57.080
> 
> 标签：ubuntu, opencv

我在 VMware 中运行了 Ubuntu 12.04 32 位。在此之后我安装了 OpenCV 2.4.2（[http://www.samontab.com/web/2011/06/installing-opencv-2-2-in-ubuntu-11-04/](http://www.samontab.com/web/2011/06/installing-opencv-2-2-in-ubuntu-11-04/)）。

当我尝试从 CV-Page ( [http://docs.opencv.org/doc/tutorials/imgproc/shapeescriptors/find_contours/find_contours.html](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/find_contours/find_contours.html) ) 运行 findContours 的示例时，它会编译，但在“findContours”调用时崩溃.

```
OpenCV Error: Assertion failed (k == STD_VECTOR_MAT) in release, file /build/build   /opencv-2.3.1/modules/core/src/matrix.cpp, line 1364
terminate called after throwing an instance of 'cv::Exception'
what():  /build/buildd/opencv-2.3.1/modules/core/src/matrix.cpp:1364: error: (-215) k == STD_VECTOR_MAT in function release 
```

不知道，有什么问题...

我在 Eclipse 中运行代码。CDT 构建控制台 说：

```
make all 
Building file: ../src/FrameTest.cpp
Invoking: Cross G++ Compiler
g++ -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"src/FrameTest.d" -MT"src/FrameTest.d" -o "src/FrameTest.o" "../src/FrameTest.cpp"
../src/FrameTest.cpp:26:2: warning: "/*" within comment [-Wcomment]
../src/FrameTest.cpp: In function ‘int main()’:
../src/FrameTest.cpp:319:25: warning: deprecated conversion from string constant to ‘char*’ [-Wwrite-strings]
../src/FrameTest.cpp: In function ‘void thresh_callback(int, void*)’:
../src/FrameTest.cpp:345:36: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
Finished building: ../src/FrameTest.cpp

Building target: FrameTest
Invoking: Cross G++ Linker
g++ -L/home/ubu/workspace/opencv -L/usr/share -L/usr/share/doc/libcv-dev -L/lib -L/lib/i386-linux-gnu -L/home/ubu/OpenCV-2.4.2/include/opencv -L/home/ubu/OpenCV-2.4.2/include/opencv2 -o "FrameTest"  ./src/FrameTest.o   -lopencv_core -lopencv_highgui -lpthread -lopencv_imgproc
Finished building target: FrameTestenter code here 
```

有人有想法吗？我从一个使用 VS2010 在 Windows 中使用 CV2.2 运行的旧项目中获得了其他代码，它可以工作...... VStudio 与 Win 与 Eclipse 和 Ubuntu 的区别在哪里？

感谢到目前为止。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T14:55:11.030

您似乎安装了两个版本的 OpenCV，并且链接器尝试使用与用于编译代码的版本不同的版本进行链接。

最简单的方法是删除所有其他旧的 OpenCV 版本，然后可能的错误库路径将更加明确。检查所有设置 PATH、链接器标志和包含文件夹，以确保您通过包含/编译/链接设置使用相同的版本

# mysql - 从带有 IF 的表中选择

> ID：13345638
> 
> 赞同：0
> 
> 时间：2012-11-12T14:38:25.737
> 
> 标签：mysql

我正在处理一些报告，我正在尝试创建一个查询，该查询将根据所选日期选择不同的查询，这是我试图实现的简化版本

```
SELECT *
FROM
    IF(YEAR('###date start###'=2011),table_2011,table)
WHERE
    date_start BETWEEN '###date start###' AND '###date end###' 
```

`###date start###`是用户输入的`###date end###`参数。

我不能使用该语言根据日期选择不同的表，因为这只是一个示例，我可能传递了其他参数来选择不同的表。

我在想我需要创建一个新的 preg_replace 并强制创建查询的人添加类似的东西，`###if(test,val2,val2)###`但如果 mysql 已经可以做到这一点，我不想重新发明热水。

谢谢

**编辑**

在等待更好的解决方案时，我将“搜索替换”功能从一个简单的： `###search###`=> `value`（其中 ###search### 显示给最终用户作为手动输入的字段），也接受一个新的字段格式为 `LLLlabel[option:value,option:value,option:value,....]LLL`

不是最好的解决方案，因为我希望我只能使用 MySQL 来做到这一点，因为这个解决方案只是让最终用户不得不选择一个额外的参数。

请记住，问题只是查询的一个非常简化的版本，查询可以是子查询、联合或连接的一部分，而不仅仅是`time`分隔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:54:28.587

具有以下内容的存储过程将起作用：

```
DELIMITER //

CREATE PROCEDURE example(date_start DATETIME, date_end DATETIME)
BEGIN
    SET @table = IF(YEAR(date_start)=2011,'table_2011','table');

    SET @sql = CONCAT(
        "SELECT * FROM ",
        @table,
        " WHERE date_start BETWEEN ",
        QUOTE(date_start),
        " AND ",
        QUOTE(date_end)
    ); 

    PREPARE stmt FROM @sql; 
    EXECUTE stmt; 
    DEALLOCATE PREPARE stmt; 
END;
//

DELIMITER ; 
```

并通过以下方式调用它：

```
CALL example('###date start###', '###date end###'); 
```

或者如果您的数据在 MyISAM 表中，您可以设置一个[`MERGE`](http://dev.mysql.com/doc/refman/5.0/en/merge-storage-engine.html)表：

```
CREATE TABLE all_tables (...) ENGINE = MERGE UNION=(table_2011, table);

SELECT *
FROM
    all_tables
WHERE
    date_start BETWEEN '###date start###' AND '###date end###' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:51:13.370

如果表不相交，这可能会起作用：

```
select *
from (select * from table_2011
      union
      select * from table) x
where date_start BETWEEN '###date start###' AND '###date end###'; 
```

**更新**：

如果您关心大小，则应该考虑对表进行分区。看

*   [分区](http://dev.mysql.com/doc/refman/5.5/en/partitioning.html)
*   [RANGE分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning-range.html)，寻找`PARTITION BY RANGE (YEAR(separated))`

# html - 在 facebook 更新中制作照片链接

> ID：13345639
> 
> 赞同：2
> 
> 时间：2012-11-12T14:38:27.307
> 
> 标签：html

我想在 facebook 中显示一张照片作为状态更新，我希望人们点击这张照片，这将引导他们进入一个网站。这样照片就是网站的链接。这样我就不必单独放置照片和链接。这在facebook中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:03:34.710

假设您要链接到您有权访问的网站 - 您可以通过在您希望链接到的网站页面内设置所谓的“Open Graph”元标记来做到这一点。

当您在写入状态更新等时向 Facebook 键入 URL 时，Facebook 会读取 Open Graph 元标记。

下面是一个示例，说明您可能希望如何设置 Open Graph 元标记（在`<HEAD>`HTML 中的标记内）。

```
<meta property="og:title" content="Your amazing website" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://yourwebsite.com" />
<meta property="og:image" content="http://yourwebsite.com/linked_image.png" />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="300" />
<meta property="og:image:height" content="300" />
<meta property="og:description" content="This is the description that you want to appear, this will be clickable too!" /> 
```

然后，您可以使用以前称为 Facebook“Linter”的工具来查看 Facebook 如何“查看”您想要从 Facebook 帖子链接到的任何页面，方法是在框中输入您的 URL：

[http://developers.facebook.com/tools/debug/og/object?q=opengraphprotocol.org](http://developers.facebook.com/tools/debug/og/object?q=opengraphprotocol.org)

[您还可以在opengraphprotocol.org](http://www.opengraphprotocol.org)上找到有关 Open Graph 协议的更多信息

# java - 有谁知道如何布局一个不会移动或重新调整放置在其中的任何组件的 JToolBar？

> ID：13345640
> 
> 赞同：3
> 
> 时间：2012-11-12T14:38:28.733
> 
> 标签：java, swing, layout, jtoolbar, preferredsize

任何人都可以帮助解决这个问题我正在尝试创建一个 JToolBar 并且我希望它的所有组件的大小和位置都是固定的。我尝试了一些不同的布局管理器，但是当它所在的框架被重新调整大小时，它们都将组件居中和/或重新调整大小。

这是一个使用 GridbagLayout 的示例，我也使用了默认的布局管理器，`toolbar.add(component)`但结果是一样的：'

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import javax.swing.*;

public class ToolBarTest extends JFrame
{
    private JToolBar toolbar;
    private JPanel mainPanel;
    private JPanel toolBarPanel;
    private JButton aButton;
    private JCheckBox aCheckBox;
    private JList aList;
    private Box toolbarBox;
    private GridBagConstraints toolbarConstraints;
    private GridBagLayout toolbarLayout;
    private JLabel shapeLabel;
    private JComboBox<ImageIcon> shapeChooser;
    private JLabel colorLabel;
    private JComboBox colorChooser;

    private String colorNames[] = { "Black" , "Blue", "Cyan", "Dark Gray",
            "Gray", "Green", "Light Gray", "Magenta", "Orange",
            "Pink", "Red", "White", "Yellow", "Custom" };

    private String shapeNames[] = { "Line", "Oval", "Rectangle",
        "3D Rectangle","Paint Brush", "Rounded Rectangle" };

    public ToolBarTest()
    {

        setLayout( new BorderLayout() );
        setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        setSize( 500, 500 );

        add( createToolBar(), BorderLayout.PAGE_START );

        setVisible( true );

    }

    public void addToToolbar( Component component, int row, int column )
    {
        toolbarConstraints.gridx = column;
        toolbarConstraints.gridy = row;
        toolbarConstraints.anchor = GridBagConstraints.WEST;
        toolbarConstraints.fill = GridBagConstraints.NONE;
        toolbarConstraints.weightx = 0;
        toolbarConstraints.weighty = 0;
        toolbarConstraints.gridwidth = 1;
        toolbarConstraints.gridheight = 1;
        toolbarLayout.setConstraints( component, toolbarConstraints );
        toolbar.add( component );

    }// end addToToolbar

    public final JToolBar createToolBar()
    {
        toolbarLayout = new GridBagLayout();
        toolbarConstraints = new GridBagConstraints();

        // create the tool bar which holds the items to draw
        toolbar = new JToolBar();
        toolbar.setBorderPainted(true);
        toolbar.setLayout( toolbarLayout );
        toolbar.setFloatable( true );

        shapeLabel = new JLabel( "Shapes: " );
        addToToolbar( shapeLabel, 0, 1 );

        String iconNames[] = { "PaintImages/Line.jpg", 
            "PaintImages/Oval.jpg", "PaintImages/Rect.jpg",
            "PaintImages/3DRect.jpg","PaintImages/PaintBrush.jpg",
        "PaintImages/RoundRect.jpg"};

        ImageIcon shapeIcons[] = new ImageIcon[ shapeNames.length ];

        // create image icons 
        for( int shapeButton = 0; shapeButton < shapeNames.length; shapeButton++ )
        {

            shapeIcons[ shapeButton ] =
                    new ImageIcon( iconNames[ shapeButton ] );

        }// end for

        shapeChooser = 
                new JComboBox< ImageIcon >( shapeIcons );

        shapeChooser.setSize(  new Dimension( 50, 20 ));

        shapeChooser.setPrototypeDisplayValue( shapeIcons[ 0 ] ); 

        shapeChooser.setSelectedIndex( 0 );

        addToToolbar( shapeChooser, 0, 2 );

        colorLabel = new JLabel( "Colors: " );

        addToToolbar( colorLabel, 0, 3 );

        colorChooser = new JComboBox( colorNames );
        addToToolbar( colorChooser, 0, 4 );

        return toolbar;
    }// end createToolBar

    public static void main( String args[] )
    {
        new ToolBarTest();

    }// end main

}// end class ToolBarTest' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T16:17:06.550

如前所述：JToolBar 的默认布局是一个 BoxLayout，它尊重组件的 maxSize。JComboBox 没有合理的最大值，因此您需要继承并覆盖 getMaxSize：

```
protected JComboBox createCombo(Object[] shapeIcons) {
    return new JComboBox( shapeIcons ) {

        @Override
        public Dimension getMaximumSize() {
            return getPreferredSize();
        }

    };
}

// usage (keep the default layoutManager of the toolbar)
shapeChooser = createCombo(shapeIcons);
toolBar.add(shapeChooser);
... 
colorChooser = createCombo( colorNames );
toolBar.add(colorChooser) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T22:57:38.400

这是扩展`JComboBox`. 当添加到工具栏时，它只是将首选和最小/最大尺寸锁定为首选尺寸。

![工具栏测试](../Images/dea2bb0f679e90b807c1118afb585556.png)

另一个调整是将 a 添加`EmtpyBorder`到任何`instanceof`a `JLabel`。他们在那里似乎有点“拥挤”。

```
import java.awt.*;
import javax.swing.*;

public class ToolBarTest extends JFrame
{
    private JToolBar toolbar;
    private JLabel shapeLabel;
    private JComboBox shapeChooser;
    private JLabel colorLabel;
    private JComboBox colorChooser;

    private String colorNames[] = { "Black" , "Blue", "Cyan", "Dark Gray",
            "Gray", "Green", "Light Gray", "Magenta", "Orange",
            "Pink", "Red", "White", "Yellow", "Custom" };

    private String shapeNames[] = { "Line", "Oval", "Rectangle",
        "3D Rectangle","Paint Brush", "Rounded Rectangle" };

    public ToolBarTest()
    {
        setLayout( new BorderLayout() );
        setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        setSize( 500, 200 );
        add( createToolBar(), BorderLayout.PAGE_START );

        setVisible( true );
    }

    public void addToToolbar( Component component, int row, int column )
    {
        Dimension d = component.getPreferredSize();
        component.setMaximumSize(d);
        component.setMinimumSize(d);
        component.setPreferredSize(d);
        toolbar.add( component );

    }// end addToToolbar

    public final JToolBar createToolBar()
    {
        // create the tool bar which holds the items to draw
        toolbar = new JToolBar();

        shapeLabel = new JLabel( "Shapes: " );
        addToToolbar( shapeLabel, 0, 1 );

        shapeChooser = 
                new JComboBox( shapeNames );
        shapeChooser.setSelectedIndex( 0 );
        addToToolbar( shapeChooser, 0, 2 );
        colorLabel = new JLabel( "Colors: " );

        addToToolbar( colorLabel, 0, 3 );

        colorChooser = new JComboBox( colorNames );
        addToToolbar( colorChooser, 0, 4 );

        return toolbar;
    }// end createToolBar

    public static void main( String args[] )
    {
        new ToolBarTest();

    }// end main
}// end class ToolBarTest' 
```

# mysql - Django查询返回一组特定的项目

> ID：13345645
> 
> 赞同：0
> 
> 时间：2012-11-12T14:38:40.480
> 
> 标签：mysql, django

这是我的代码片段，它返回 Product1 Product2 Product3 Product4 Product5 用于填充 Webapp 中的下拉菜单。

我怎样才能让它只返回 Product2 和 Product4？

我被告知在我发布的另一个问题中使用 Queryset.filter 方法，但我不确定如何为多个项目执行此操作？

事实证明它是一个mysql db（在我之前的问题中，我认为它是sqlite）。

```
class Meta:
    model = ChangeRequest
    products = [(product.name, product.name) for product in Product.objects.all()]
    products = [('', '--------')] + products
    widgets = {
        'product': forms.Select(choices=products), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:54:18.243

要仅获取 Product2 和 Product4，您可以执行以下操作：

```
products = [Product.objects.get(name='Product2'), Product.objects.get(name='Product4')]
products = [(product.name, product.name) for product in products] 
```

如果这不是您所期望的答案，请指定您希望用来过滤对象的标准。

# utf-8 - 从 Symfony 2.0.* 升级到 Symfony 2.1.* 时出现字符集问题？

> ID：13345651
> 
> 赞同：0
> 
> 时间：2012-11-12T14:38:51.197
> 
> 标签：utf-8, character-encoding, twig, symfony-2.1, symfony-2.0

我最近将我的暂存测试站点升级到了最新版本的 Symfony，并按照下载随附的升级文档中的说明使用 composer 更新了所有供应商。

一切都更新得很好，但我现在注意到一些 HTML 没有显示在 Twig 模板中。

我与当前的实时站点进行了比较，这似乎是一个字符集问题。例如，我有一个下拉列表，其中包含以下值：

```
Kitchen Ducting > Ducting Kits > Ducting Kit 4” / 100mm 
```

在更新的站点中，下拉列表项只是显示为空白。当我使用 Twig 的原始函数时，它会再次显示该项目，但在黑色菱形中带有可怕的问号。

```
Kitchen Ducting > Ducting Kits > Ducting Kit 4� / 100mm 
```

您应该知道的可能会有所帮助的事情：

*   登台测试站点和实时站点都在同一台服务器上。
*   在我的 httpd.conf 文件中，我有“AddDefaultCharset utf-8”。
*   在我的 php.ini 文件中，我有 'default_charset = "utf-8"'。
*   提供的 HTML 文件具有 Content-Type 元标记 'content="text/html; charset=utf-8"'
*   我的数据库是 InnoDB 并使用 'utf8' 作为默认字符集和 'utf8_general_ci' 作为默认排序规则。数据库中的所有表也使用默认值。

我用 UTF8 查看了 BOM，但无法确定这是否有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:57:53.743

我设法通过编辑服务器上的 MySql 配置文件`(/etc/my.cnf)`并添加：

```
skip-character-set-client-handshake
collation-server=utf8_general_ci
character-set-server=utf8 
```

这为我解决了。我不确定 Twig 或 Doctrine 是否由于升级到 Symfony 而发生了变化，但升级中的某些内容导致默认字符集不起作用。我对 MySQL 配置所做的更改意味着它将始终回退到 UTF-8。

# android - 收到错误 java.lang.NullPointerException

> ID：13345653
> 
> 赞同：1
> 
> 时间：2012-11-12T14:38:54.093
> 
> 标签：android, nullpointerexception

我写了一段代码，通过网站获取一些信息并以`ListView`. 我无法配置我收到强制关闭错误的原因。我将日志猫与代码一起粘贴。请帮我查找并解决错误

```
11-07 21:43:14.729: E/AndroidRuntime(2799): FATAL EXCEPTION: main
11-07 21:43:14.729: E/AndroidRuntime(2799): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.air.test/com.air.test.MainActivity}: java.lang.NullPointerException
11-07 21:43:14.729: E/AndroidRuntime(2799):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
11-07 21:43:14.729: E/AndroidRuntime(2799):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
11-07 21:43:14.729: E/AndroidRuntime(2799):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-07 21:43:14.729: E/AndroidRuntime(2799):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
11-07 21:43:14.729: E/AndroidRuntime(2799):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-07 21:43:14.729: E/AndroidRuntime(2799):     at android.os.Looper.loop(Looper.java:130)
11-07 21:43:14.729: E/AndroidRuntime(2799):     at android.app.ActivityThread.main(ActivityThread.java:3683)
11-07 21:43:14.729: E/AndroidRuntime(2799):     at java.lang.reflect.Method.invokeNative(Native Method)
11-07 21:43:14.729: E/AndroidRuntime(2799):     at java.lang.reflect.Method.invoke(Method.java:507)
11-07 21:43:14.729: E/AndroidRuntime(2799):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-07 21:43:14.729: E/AndroidRuntime(2799):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-07 21:43:14.729: E/AndroidRuntime(2799):     at dalvik.system.NativeStart.main(Native Method)
11-07 21:43:14.729: E/AndroidRuntime(2799): Caused by: java.lang.NullPointerException
11-07 21:43:14.729: E/AndroidRuntime(2799):     at java.util.Arrays$ArrayList.<init>(Arrays.java:47)
11-07 21:43:14.729: E/AndroidRuntime(2799):     at java.util.Arrays.asList(Arrays.java:169)
11-07 21:43:14.729: E/AndroidRuntime(2799):     at android.widget.ArrayAdapter.<init>(ArrayAdapter.java:138)
11-07 21:43:14.729: E/AndroidRuntime(2799):     at com.air.test.MainActivity.onCreate(MainActivity.java:59)
11-07 21:43:14.729: E/AndroidRuntime(2799):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-07 21:43:14.729: E/AndroidRuntime(2799):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
11-07 21:43:14.729: E/AndroidRuntime(2799):     ... 11 more 
```

**代码**

```
private Spinner spinner1;
private ProgressDialog pd;
private StringBuilder response;
private ListView listView;
private String[] values;
private ArrayAdapter<String> adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    listView = (ListView) findViewById(R.id.mylist);
    spinner1 = (Spinner) findViewById(R.id.spinnerCategory);
    spinner1.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> av, View view, int id,
                long ids) {
            new sendMessageAsync().execute();
        }

        public void onNothingSelected(AdapterView<?> av) {
        }
    });

    adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, android.R.id.text1, values);

    listView.setAdapter(adapter);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

private class sendMessageAsync extends AsyncTask<Void, Void, String> {

    @Override
    protected void onPreExecute() {
        pd = ProgressDialog.show(MainActivity.this, null, "Loading...",
                true, true);
    }

    @Override
    protected void onCancelled() {
        Toast.makeText(getApplicationContext(),
                "Message Sending Cancelled", Toast.LENGTH_LONG).show();
    }

    @Override
    protected String doInBackground(Void... arg0) {
        try {
            doInBg();
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        pd.dismiss();
    }
}

public void doInBg() {
    try {
        final String msgURL = "http://example.com/message?category="
                + String.valueOf(spinner1.getSelectedItem().toString()
                        .replace(" ", "%20"));
        URLConnection connection = new URL(msgURL).openConnection();
        connection.setRequestProperty("Accept-Charset", "UTF-8");
        InputStream responseStream = connection.getInputStream();
        BufferedReader br = new BufferedReader(new InputStreamReader(
                responseStream));
        response = new StringBuilder();
        String line;
        while ((line = br.readLine()) != null) {
            response.append(line);
        }
        values = String.valueOf(response).split("<br/>");
        adapter.notifyDataSetChanged();
    } catch (Exception ex) {
        ex.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T14:41:32.760

运行此行时，`values`为空。

```
adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, android.R.id.text1, values); 
```

要解决此问题，请`values`在该行之前进行初始化。

```
values = new String[0]; 
```

或者，如果您希望它包含某些内容：

```
values = new String[]{ "Value 1", "Value 2" }; 
```

**编辑：**

检查您的 AsyncTask 实现后，我会这样做：

我首先会使用以下代码初始化值：

```
adapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_1, android.R.id.text1, new ArrayList<String>()); 
```

其次，我会将您的`values`String 数组作为类属性删除。（删除线`private String[] values;`）

第三，我会将 AsyncTask 更改为`<Void, String, Void>`.

第四，假设这段代码会给你正确的结果：

`values = String.valueOf(response).split("<br/>");`

在这里，我将用以下内容替换该行：

```
String[] values = String.valueOf(response).split("<br/>");
for (String str : values) publishProgress(str); 
```

然后，在你的 AsyncTask 中，有这个方法：

```
@Override
protected void onProgressUpdate(String... values) {
    adapter.add(values[0]);
} 
```

我希望这对你有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T14:41:34.593

您需要`values`在尝试创建适配器之前设置您的字符串数组。

此行将失败，因为`values`是`null`：

```
adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, android.R.id.text1, values); 
```

# delphi - 将鼠标拖出边界后，控件如何接收鼠标事件？

> ID：13345655
> 
> 赞同：4
> 
> 时间：2012-11-12T14:39:03.320
> 
> 标签：delphi, mouse, delphi-xe2, windows-messages

我正在创建一个自定义控件，它可以识别鼠标何时拖动，特别是使用 messages `WM_LBUTTONDOWN`、`WM_LBUTTONUP`和`WM_MOUSEMOVE`. 当鼠标向下时，我捕获控件上的位置，然后当鼠标移动时，如果鼠标左键向下，我会进行更多处理（计算起点和终点之间）。

问题是，我希望鼠标脱离控件，甚至脱离窗体，但是当鼠标离开控件时，它不再捕获鼠标事件。有没有一种方法可以在没有鼠标悬停在控件上的情况下专门处理`WM_MOUSEMOVE`and消息？`WM_LBUTTONUP`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T14:44:55.767

当光标移出控件时，您可以使用`SetCapture/ReleaseCapture`Windows API 继续获取鼠标事件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-12T15:02:27.943

Releasecapture 将适用于 Wincontrols，另一种方式可能是 Mousehook。那只是一个演示......

```
unit MouseHook;
// 2012 by Thomas Wassermann
interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs;

type

  TForm3 = class(TForm)
    procedure FormDestroy(Sender: TObject);
    procedure FormCreate(Sender: TObject);
  private
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
  end;

var
  Form3: TForm3;

implementation

var
  HookHandle: Cardinal;

Type
  tagMSLLHOOKSTRUCT = record
    POINT: TPoint;
    mouseData: DWORD;
    flags: DWORD;
    time: DWORD;
    dwExtraInfo: DWORD;
  end;
  TMSLLHOOKSTRUCT = tagMSLLHOOKSTRUCT;
  PMSLLHOOKSTRUCT = ^TMSLLHOOKSTRUCT;

{$R *.dfm}

function LowLevelMouseProc(nCode: Integer; wParam: wParam; lParam: lParam): LRESULT; stdcall;
var
 Delta:Smallint;
begin
  if (nCode >= 0) then
  begin
    Form3.Caption := Format('X: %d  Y: %d ', [PMSLLHOOKSTRUCT(lParam)^.Point.X,  PMSLLHOOKSTRUCT(lParam)^.Point.Y]);
    if wParam = WM_LButtonDOWN then Form3.Caption := Form3.Caption + ' LD';
    if wParam = WM_LButtonUP then Form3.Caption := Form3.Caption + ' LU';
    if wParam = WM_RButtonDOWN then Form3.Caption := Form3.Caption + ' RD';
    if wParam = WM_RButtonUP then Form3.Caption := Form3.Caption + ' RU';
    if wParam =  WM_MOUSEMOVE then Form3.Caption := Form3.Caption + ' Move';
    Delta := PMSLLHOOKSTRUCT(lParam)^.mouseData shr 16;
    if wParam =  WM_MOUSEWHEEL then
          begin

            Form3.Caption := Form3.Caption + ' Wheel ' ;
            if Delta=120 then Form3.Caption := Form3.Caption + ' KLICK'
            else if Delta > 0  then Form3.Caption := Form3.Caption +' UP'
            else if Delta < 0  then Form3.Caption := Form3.Caption +' DOWN'
          end;
    if wParam =  WM_MOUSEHWHEEL then
          begin
            Form3.Caption := Form3.Caption + ' HWheel';
            if Delta=120 then Form3.Caption := Form3.Caption + ' KLICK'
            else if Delta > 0  then Form3.Caption := Form3.Caption +' UP'
            else if Delta < 0  then Form3.Caption := Form3.Caption +' DOWN'

          end;
     Form3.Caption := Form3.Caption +' >> '+ IntToStr(Delta)

  end;
  Result := CallNextHookEx(HookHandle, nCode, wParam, lParam);
end;

function InstallMouseHook: Boolean;
begin
  Result := False;
  if HookHandle = 0 then
  begin
    HookHandle := SetWindowsHookEx(WH_MOUSE_LL, @LowLevelMouseProc, hInstance, 0);
    Result := HookHandle <> 0;
  end;
end;

procedure TForm3.FormCreate(Sender: TObject);
begin
  InstallMouseHook;
end;

procedure TForm3.FormDestroy(Sender: TObject);
begin
  if HookHandle <> 0 then
    UnhookWindowsHookEx(HookHandle);
end;

end. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T21:40:14.347

我已经接受了上面的答案，但是我对这个实现的最终版本是完全不同的。我想我会分享我的想法，因为多次实现一个独特的鼠标钩有点棘手。

现在提供的演示`bummi`已固定并内置到表单的单元中。我创建了一个新单元并将所有东西都包装在那里。棘手的部分是该函数`LowLevelMouseProc`不能成为类的一部分。然而，在这个函数中，它会调用特定于钩子句柄 ( `Result := CallNextHookEx(HookHandle, nCode, wParam, lParam);`) 的调用。所以我所做的是创建了一个桶 ( `TList`)，我在其中转储了我的鼠标对象的每个实例。当调用此函数时，它会遍历此存储桶并触发每个实例的相应事件。该模型还包括内置的线程安全保护（未经测试）。

这是完整的单元：

**JD.Mouse.pas**

```
unit JD.Mouse;

interface

uses
  Windows, Classes, SysUtils, Messages, Controls;

type
  TJDMouseButtonPoints = Array[TMouseButton] of TPoint;
  TJDMouseButtonStates = Array[TMouseButton] of Boolean;

  TJDMouse = class(TComponent)
  private
    FOnButtonUp: TMouseEvent;
    FOnMove: TMouseMoveEvent;
    FOnButtonDown: TMouseEvent;
    FButtonPoints: TJDMouseButtonPoints;
    FButtonStates: TJDMouseButtonStates;
    procedure SetCursorPos(const Value: TPoint);
    function GetCursorPos: TPoint;
    procedure DoButtonDown(const IsDown: Boolean; const Button: TMouseButton;
      const Shift: TShiftState; const X, Y: Integer);
    procedure DoMove(const Shift: TShiftState; const X, Y: Integer);
  public
    constructor Create(AOwner: TComponent);
    destructor Destroy; override;
  published
    property CursorPos: TPoint read GetCursorPos write SetCursorPos;
    property OnButtonDown: TMouseEvent read FOnButtonDown write FOnButtonDown;
    property OnButtonUp: TMouseEvent read FOnButtonUp write FOnButtonUp;
    property OnMove: TMouseMoveEvent read FOnMove write FOnMove;
  end;

implementation

var
  _Hook: Cardinal;
  _Bucket: TList;
  _Lock: TRTLCriticalSection;

procedure LockMouse;
begin
  EnterCriticalSection(_Lock);
end;

procedure UnlockMouse;
begin
  LeaveCriticalSection(_Lock);
end;

type
  tagMSLLHOOKSTRUCT = record
    POINT: TPoint;
    mouseData: DWORD;
    flags: DWORD;
    time: DWORD;
    dwExtraInfo: DWORD;
  end;
  TMSLLHOOKSTRUCT = tagMSLLHOOKSTRUCT;
  PMSLLHOOKSTRUCT = ^TMSLLHOOKSTRUCT;

function LowLevelMouseProc(nCode: Integer; wParam: wParam; lParam: lParam): LRESULT; stdcall;
var
  X: Integer;
  Delta: Smallint;
  M: TJDMouse;
  P: TPoint;
  Shift: TShiftState;
begin
  if (nCode >= 0) then begin
    LockMouse;
    try
      Delta := PMSLLHOOKSTRUCT(lParam)^.mouseData shr 16;
      try
        for X := 0 to _Bucket.Count - 1 do begin
          try
            M:= TJDMouse(_Bucket[X]);
            P:= Controls.Mouse.CursorPos;
            //Shift:= .....;   //TODO
            case wParam of
              WM_LBUTTONDOWN: begin
                M.DoButtonDown(True, mbLeft, Shift, P.X, P.Y);
              end;
              WM_LBUTTONUP: begin
                M.DoButtonDown(False, mbLeft, Shift, P.X, P.Y);
              end;
              WM_RBUTTONDOWN: begin
                M.DoButtonDown(True, mbRight, Shift, P.X, P.Y);
              end;
              WM_RBUTTONUP: begin
                M.DoButtonDown(False, mbRight, Shift, P.X, P.Y);
              end;
              WM_MBUTTONDOWN: begin
                M.DoButtonDown(True, mbMiddle, Shift, P.X, P.Y);
              end;
              WM_MBUTTONUP: begin
                M.DoButtonDown(False, mbMiddle, Shift, P.X, P.Y);
              end;
              WM_MOUSEMOVE: begin
                M.DoMove(Shift, P.X, P.Y);
              end;
              WM_MOUSEWHEEL: begin
                //TODO
              end;
              WM_MOUSEHWHEEL: begin
                //TODO
              end;
            end;
          except
            on e: exception do begin
              //TODO
            end;
          end;
        end;
      except
        on e: exception do begin
          //TODO
        end;
      end;
    finally
      UnlockMouse;
    end;
  end;
  Result:= CallNextHookEx(_Hook, nCode, wParam, lParam);
end;

{ TJDMouse }

constructor TJDMouse.Create(AOwner: TComponent);
begin
  LockMouse;
  try
    _Bucket.Add(Self); //Add self to bucket, registering to get events
  finally
    UnlockMouse;
  end;
end;

destructor TJDMouse.Destroy;
begin
  LockMouse;
  try
    _Bucket.Delete(_Bucket.IndexOf(Self)); //Remove self from bucket
  finally
    UnlockMouse;
  end;
  inherited;
end;

procedure TJDMouse.DoButtonDown(const IsDown: Boolean;
  const Button: TMouseButton; const Shift: TShiftState; const X, Y: Integer);
begin
  //Do not use lock, this is called from the lock already
  if IsDown then begin
    if assigned(FOnButtonDown) then
      FOnButtonDown(Self, Button, Shift, X, Y);
  end else begin
    if assigned(FOnButtonUp) then
      FOnButtonUp(Self, Button, Shift, X, Y);
  end;
end;

procedure TJDMouse.DoMove(const Shift: TShiftState; const X, Y: Integer);
begin
  //Do not use lock, this is called from the lock already
  if assigned(FOnMove) then
    FOnMove(Self, Shift, X, Y);
end;

function TJDMouse.GetCursorPos: TPoint;
begin
  LockMouse;
  try
    Result:= Controls.Mouse.CursorPos;
  finally
    UnlockMouse;
  end;
end;

procedure TJDMouse.SetCursorPos(const Value: TPoint);
begin
  LockMouse;
  try
    Controls.Mouse.CursorPos:= Value;
  finally
    UnlockMouse;
  end;
end;

initialization
  InitializeCriticalSection(_Lock);
  _Bucket:= TList.Create;
  _Hook:= SetWindowsHookEx(WH_MOUSE_LL, @LowLevelMouseProc, hInstance, 0);
finalization
  UnhookWindowsHookEx(_Hook);
  _Bucket.Free;
  DeleteCriticalSection(_Lock);
end. 
```

以下是它的实现方式：

```
type
  TForm1 = class(TForm)
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    FMouse: TJDMouse;
    procedure MouseButtonDown(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);
    procedure MouseButtonUp(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);
    procedure MouseMoved(Sender: TObject; Shift: TShiftState; X, Y: Integer);
  end;

implementation

procedure TForm1.FormCreate(Sender: TObject);
begin
  FMouse:= TJDMouse.Create(nil);
  FMouse.OnButtonDown:= MouseButtonDown;
  FMouse.OnButtonUp:= MouseButtonUp;
  FMouse.OnMove:= MouseMoved;
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  FMouse.Free;
end;

procedure TForm1.MouseButtonDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin

end;

procedure TForm1.MouseButtonUp(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin

end;

procedure TForm1.MouseMoved(Sender: TObject; Shift: TShiftState; X, Y: Integer);
begin

end;

end. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-30T00:01:35.757

`TControlStyle.csCaptureMouse`如果您使用 VCL 控件，则可以使用该标志。我不确定是否有 FMX 对应物。[相关文档在这里](http://docwiki.embarcadero.com/Libraries/Seattle/en/Vcl.Controls.TControlStyle)。

我在我`csCaptureMouse`的许多自定义控件中使用它并且效果很好。

# android - setTheme 功能在简历上不起作用

> ID：13345656
> 
> 赞同：2
> 
> 时间：2012-11-12T14:39:09.433
> 
> 标签：android, android-theme

我正在尝试使用 setTheme 函数，该函数基本上根据一些 DB 值设置主题，但问题是一旦我用要设置的主题更新了 DB，我需要完成（）要实现主题设置的活动。代码是 -

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        settingsDBAdapter = new SettingsDBAdapter(this);
        settingsDBAdapter.open();

        setSettingsTheme();  <<------THIS LINE WILL SET THEME
        setContentView(R.layout.layout_task_manager);

        quickAddButton = (Button) findViewById(R.id.QuickAddButtonId);
        quickAddTaskText = (EditText) findViewById(R.id.QuickAddEditTextId);

        mDBHelper = new TasksDBAdapter(this); 
        mDBHelper.open();

        fillData();
        //code to create long press on any list item and calls onCreateContextMenu method
        registerForContextMenu(getListView());
        registerButtonListenersAndSetDefaultText();

    }

public void setSettingsTheme(){
        String currentTheme = settingsDBAdapter.fetchThemeSettings("theme");
        Log.i(TAG,"settingsDBAdapter + currentTheme-->" + settingsDBAdapter + currentTheme);
        //setTheme(R.style.HoloTheme);
        if(currentTheme.trim().equalsIgnoreCase("holo")){
            Log.i(TAG, "in holo<<<<<<<<");
            setTheme(R.style.HoloTheme);
        }else if(currentTheme.trim().equalsIgnoreCase("hololight")){
            Log.i(TAG, "in hololight<<<<<<<");
            setTheme(R.style.HoloLightTheme);
        }else{
            Log.i(TAG, "iin else<<<<<<<");
            setTheme(R.style.HoloTheme);
        }
    } 
```

我还尝试在覆盖 onResume() 函数后调用 setSettingsTheme() 函数仍然没有用。`Log.i`存在于 setSettingsTheme() 函数中总是给出正确的值。任何人都可以帮助我理解。提前致谢，考希克

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T14:46:05.860

的文档[`ContextThemeWrapper.setTheme(int)`](http://developer.android.com/reference/android/view/ContextThemeWrapper.html#setTheme%28int%29)说：

> 为此上下文设置基本主题。请注意，这应该在任何视图被实例化`Context`之前调用（例如在调用`setContentView(View)`or之前`inflate(int, ViewGroup)`）。

`Theme`属性在 s 构造函数中读取，`View`因此在更改主题后，您需要重新创建 UI。您可以调用`finish()`然后`startActivity(getIntent())`在您的 Activity 中重新启动它，或者必须编写一种方法来重建每个 View 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-06T13:47:18.413

首先，向 Raffaele 致敬，因为他在这方面为我指明了正确的方向。

另外，我知道这是一个旧帖子，所以如果现在有更好的方法可以做到这一点，请告诉我。

反正...

我在尝试为我的 Moto360 创建表盘时遇到了类似的问题。您无法更改 View 层次结构引用的主题实例，但您*可以*强制该实例采用您要切换到的主题的属性。如果您获得对主题的引用并调用`Resource.Theme.applyStyle(int,boolean)`，则目标主题的属性将应用于您的视图引用的主题。之后，使视图无效的调用将使用新样式更新 UI。

例如：（在您的活动中某处......）

```
 Resources.Theme myTheme = SomeActivity.this.getTheme();
 View myThemedView = SomeActivity.this.findViewById(R.id.myRootView);
 myTheme.applyStyle(R.style.MyOtherTheme,true);
 myThemedView.invalidate();
 // Above, "true" clobbers existing styles, "false" preserves them
 // and attempts to add in any new attributes. 
```

再次，我在 Moto360 上的表盘服务上做了这个，没有发生任何事故。我还没有在 Activity 上尝试过这个。

[Resources.Theme.applyStyle(int,boolean)](http://developer.android.com/reference/android/content/res/Resources.Theme.html#applyStyle(int,%20boolean))

您可以在此处查看我的代码[(BatmanWatchFaceService.java)](https://github.com/wileymab/moto360watchfacestudy/blob/master/app/src/main/java/com/wileymab/watchfacetwo/BatmanWatchFaceService.java)。

# excel - 在excel中多次打印语句的循环

> ID：13345658
> 
> 赞同：-4
> 
> 时间：2012-11-12T14:39:22.673
> 
> 标签：excel, excel-formula, excel-2010, vba

我是新来的，需要你的帮助，我被分配了一个项目，我必须在 Excel 电子表格上对梁计算进行建模。我的问题是我找不到任何可以帮助我打印语句“x”次的命令。

例如
，我向用户询问他的光束的跨度数，并且根据输入，我希望显示以下语句：

“输入跨度 1 的
负载” “输入跨度 2 的负载”
“输入跨度 3 的负载”

等等.....

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:49:53.007

你的描述不是那么详细，但我拍了一张，据我了解，你可能希望有这样的东西：

![在此处输入图像描述](../Images/ceb9fe70b8c26a31f7b859636e6db93f.png)

您将在 B1 中输入一个数字，然后 C 列将根据要求打印出尽可能多的语句。

这是公式：

```
C1=IF(ROW()<=B$1,"Enter load for Span " & ROW(),"") 
```

如果这不是您想要的，请付出一些努力并更准确地解释您的情况；）

# c# - 作为服务运行时 HKEY_Classes_root 中缺少键

> ID：13345661
> 
> 赞同：0
> 
> 时间：2012-11-12T14:39:27.840
> 
> 标签：c#, windows-services, registry

我正在 Windows 8 x64 上开发 ac# .net 3.5 windows 服务。

我需要查看特定的包 ID 是否在节点 HKEY_CLASSES_ROOT\ActivatableClasses\Package 下。

这是代码

```
internal static bool IsPackageInstalled
    {
        get
        {
            try
            {
                var packageKey = Registry.ClassesRoot.OpenSubKey(@"ActivatableClasses\Package");
                if (packageKey != null)
                {
                    return packageKey.GetSubKeyNames().Any(key => key.StartsWith(MyPackageName, StringComparison.InvariantCultureIgnoreCase));
                }                                                                
            }
            catch (Exception ex)
            {

            }

            return false;
        }
    } 
```

在控制台应用程序中运行此代码时，它可以正常工作并返回 true。

但是在 Windows 服务中运行代码时，我得到了错误。我尝试调试它，发现在服务中子键名称列表仅包含 2 个键，而实际上有 21 个子键。

是什么导致了这种行为？

**更新：** 问题是服务在不同的用户下运行，因此当服务查询注册表时，仅出现在 HKEY_CURRENT_USER 下的每个包都不会出现。

该服务有没有办法检查另一个用户注册表（即使用户当前没有登录）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:43:57.043

`HKEY_CLASSES_ROOT`钥匙实际上是一个虚拟钥匙，它合并了另外两个钥匙：

```
HKEY_LOCAL_MACHINE\Software\Classes
HKEY_CURRENT_USER\Software\Classes 
```

您想要的值很可能存在于 USER 部分下。请记住，服务不会在像控制台应用程序这样的普通用户的上下文中运行。

有关注册表项的更多信息，请参见此处：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms724475(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724475(v=vs.85).aspx)

但是，您可以将服务设置为作为具有这些值的特定用户运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:44:00.747

我的假设是它与权限有关。注册表的不同区域具有不同的权限。作为故障排除步骤，我将尝试以其他用户身份运行我的服务，以查看结果是否发生变化。如果是这样，那么您可能想要研究模拟。

# java - 循环渲染表单

> ID：13345663
> 
> 赞同：0
> 
> 时间：2012-11-12T14:39:32.550
> 
> 标签：java, jakarta-ee, tapestry

这个问题是关于**Tapestry 4**（不是 Tapestry 5）。如果我尝试在循环中渲染表单组件并提交一个表单，验证会在两者中显示错误，因为 Tapestry 只创建一个表单实例并重用它。似乎我需要为每个表单提供唯一的 id，但我不知道如何。这是重现该问题的代码：

```
 <block jwcid="formBlock@Block">
        <form jwcid="@Form">
            <input jwcid="@TextField" value="literal:" validators="validators:required" />
            <input type="submit" />
        </form>
    </block>
    <for jwcid="@Foreach" source="ognl:new int[]{1,2}">
        <span jwcid="@RenderBlock" block="component:formBlock" />
    </for> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:45:32.500

验证错误在浏览器中显示两次的原因是因为实际上您只有一个表单；你只是渲染它两次。如果您希望每个表单都有单独的验证处理，那么您必须创建两个单独的 @Form 组件。

# node.js - 在 Node.js 中使用 Heroku 调度程序

> ID：13345664
> 
> 赞同：56
> 
> 时间：2012-11-12T14:39:44.597
> 
> 标签：node.js, heroku, scheduler

实际上没有关于在 Node.js 中使用 Heroku Scheduler 的教程。假设我有一个名为**sayHello()**的函数，我想每 10 分钟运行一次。如何在控制器中使用它。在 ruby​​ 中，您编写**rake function_name()**但是没有对 Node.js 进行解释。我可以写**'/sayHello'**还是我应该做额外的配置？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-12-19T15:48:08.407

创建文件`<project_root>/bin/say_hello`：

```
#! /app/.heroku/node/bin/node
function sayHello() {
    console.log('Hello');
}
sayHello();
process.exit(); 
```

部署到 Heroku 并对其进行测试，`$ heroku run say_hello`然后使用 task name 将其添加到调度程序中`say_hello`。

## 解释

以`say_hello.js`您通常使用`$ node say_hello.js`.

把它变成一个脚本

1.  删除`.js`结尾
2.  在顶部插入“shebang”：`#! /app/bin/node`[1][2]
3.  将其移动到`bin`目录 [3]

[1] 在 Wikipedia 上阅读有关[shebang 的信息](http://en.wikipedia.org/wiki/Shebang_(Unix))。
[2]`node`可执行文件安装在`app/bin/node`Heroku 上。您可以通过在 Heroku 上登录 bash 来检查它，`$ heroku run bash`然后询问`$ which node`.
[3] Heroku 要求将脚本放在`bin`目录中。请参阅在 Heroku 开发中心[定义任务。](https://devcenter.heroku.com/articles/scheduler#defining-tasks)

我同意 Heroku 用于调度任务的文档对于 Ruby 脚本以外的任何内容都不是很清楚。经过一些试验和错误，我设法解决了这个问题。我希望这有帮助。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-05-04T20:42:00.197

更好的方法是定义您的计划文件，例如`worker.js`使用以下内容：

```
function sayHello() {
    console.log('Hello');
}
sayHello(); 
```

然后在heroku时间表中，您只需`node worker`像在中定义的那样编写即可，仅此而已`Procfile`！

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-05-04T12:52:54.137

Christophe 的回答对我有用，直到我需要将参数传递给脚本，此时它失败了。问题是`node`不应在任务中指定。以下是如何使其正常工作：

1.  在您的 Procfile 中，为您的脚本定义一个进程类型。请参阅下面的典型 Procfile，其中包含一个 Web 进程，以及运行“scheduled_job.js”的第二种进程类型，想象中地命名为“worker”。

    > ```
    > web: node app.js
    > worker: node scheduled_job.js 
    > ```

2.  在 Heroku 调度程序的 Task 列中，只需输入带有或不带参数的进程类型的名称（在本例中为“worker”）。**不要在它之前输入“节点”**。Heroku 在其前面显示一个美元符号，因此有效设置的示例是`$ worker`（不带参数运行）或`$ worker 123 abc`（使用参数“123”和“abc”执行 schedule_job.js）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-03-28T01:28:59.787

我很困惑没有人尝试过：

```
$ heroku run node yourScript.js 
```

所以把它放在 Heroku Scheduler

```
node yourScript.js 
```

为我工作。

PS：确保`import`你的脚本需要的一切。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-11-13T07:58:33.597

以下步骤适用于我的情况。

1.  在根文件夹中添加`worker.js`文件。
2.  在 worker.js 中。编写一个简单的函数，如上。 `function sayHello() { console.log('Hello'); } sayHello();`
3.  转到 heroku 调度程序附加组件。单击“添加新工作”并在字段中输入“工人”。然后设置时间间隔，点击保存。

这里有一些需要注意的地方

1.  更新工作设置后。如果使用上面的示例，您可以使用`heroku run node worker.js`它来检查它是否工作。它应该在您的终端中显示“Hello”。
2.  我为我的 node.js 项目使用[express-babel启动器。](https://github.com/vmasto/express-babel)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-07T10:43:06.730

非常感谢这里以前的答案。

**我发现以下内容对我`feed.js`有用，在 Heroku 上作为作业运行的脚本在哪里。：**

`<PROJECT_ROOT>/bin/feed.js`

**`feed.js`开头的内容：**

```
#!/usr/bin/env node

async function mediumFeed() {

  await fetch('https://medium.com/feed/stokedinfluence') 
```

**并以：**

```
}

mediumFeed(); 
```

**在 Heroku 上，工作被定义为`node bin/medium_feed.js`：**

[![在此处输入图像描述](../Images/cca144ea47242f3f8a9a6077aa0b0762.png)](https://i.stack.imgur.com/UwrwZ.png)

[![在此处输入图像描述](../Images/af2c01dae24f461a19b698b176148f4c.png)](https://i.stack.imgur.com/QwmoN.png)

*要在本地运行节点 js 脚本，`feed.js`您可以从项目目录的根目录使用`node bin/feed.js`并通过 heroku 运行，您可以使用`heroku run feed.js --app <APP_NAME_NOT_PIPELINE_NAME>.`当使用 heroku 命令时，这将从服务器运行作业，因为运行`node bin/feed.js`将在本地运行。在本地运行以测试并验证代码是否正常工作，一旦部署验证它是否与`heroku run...`命令一起工作*

# java - 订购 Runtime exec 和 ProcessBuilder.start？

> ID：13345666
> 
> 赞同：1
> 
> 时间：2012-11-12T14:39:47.123
> 
> 标签：java, process, exec, runtime.exec

在通过 java 运行和终止进程时，我遇到了一个奇怪的问题。

基本上，我有一种方法可以使用 taskkill 杀死一个进程：

```
private static void kill() {
    try {
      Runtime.getRuntime().exec("taskkill /F /IM app.exe");
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

我调用这个方法是为了确保在我开始一个新进程之前所有进程都被杀死：

```
 kill();
    ProcessBuilder procBuilder = new ProcessBuilder(args);

    try {
        Process p = procBuilder.start();
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

问题是启动的进程似乎被taskkil杀死了。没有杀戮的召唤，它工作得很好；使用 kill 时，进程启动但 GUI 不出现。

这是两个电话之间的优先级问题吗？（ runtime.exec 的优先级低于 ProcessBuilder.start ？）。

我已经解决了在 Runtime exec 返回时使用 waitFor 的问题，但我很好奇为什么会出现这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:47:26.647

基本上，`Runtime.exec`在操作系统中异步启动一个新进程，并且不能保证它在你的新进程启动之前完成。从理论上讲，您应该等待结果`taskkill`返回，`SUCCESS`然后才开始您的新工作。根据它的文档`taskkill`，如果它成功杀死了它的嫌疑人，它会用 0 返回代码告诉你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:01:11.640

该问题与优先级无关，因为它们都将具有默认优先级。一个可能的问题是，`Runtime.exec`使用 a`String`将必须解析输入然后执行命令，而`ProcessBuild`将执行给定的命令而没有所需的解析逻辑。因此，您可以看到一个小的延迟，您需要`waitFor`按预期工作。您可以通过`String[]`使用`Runtime.exec`. 另请注意，线程由系统调度程序调度，执行顺序不可预测，请参阅[Java 线程不可预测](https://stackoverflow.com/a/7915346/1613867)。

# svn - 是否可以将 git-flow 模型与 Subversion 一起使用？

> ID：13345667
> 
> 赞同：37
> 
> 时间：2012-11-12T14:39:51.500
> 
> 标签：svn, branching-and-merging, git-flow, trunk

我们使用 Subversion，除了像我这样的少数人之外，几乎没有在 Subversion 中进行分支和合并的经验。我的 Subversion 经验仅限于简单的功能分支，其中合并和树冲突虽然并不罕见，但解决起来并不难。

鉴于此，我正在帮助管理一个项目，在该项目中，我们当前对主干方法的承诺根本无法满足我们的需求。我向我的本地化团队介绍了功能分支和合并，我们取得了一些成功。然而，简单的特征分支仍然无法回答我们所有的问题，例如：

1.  我们如何为这个版本和后续版本并行开发代码？
2.  什么代码被认为是稳定的？
3.  什么（开发中）代码将进入下一个版本？
4.  哪些（开发中的）代码将进入后续版本？
5.  我们的测试、验收或生产环境是什么版本的代码？
6.  我们如何将并发开发活动与已知的稳定版本集成，以减少引入错误和不完整的工作？
7.  我们如何为已发布的代码提供热修复？
8.  我们如何从源代码控制中知道当前正在进行哪些开发活动？
9.  我们如何在不破坏当前代码库的情况下进行实验或研发？

似乎 [这里定义的 git-flow](http://nvie.com/posts/a-successful-git-branching-model/)可以回答很多这些问题。我在 Mercurial 中尝试了这种方法，似乎也可以在那里实现这种方法。遗憾的是，此时迁移到 DVCS 是不可能的。

然而，我在 Subversion 中模仿这种方法的短暂尝试因许多合并和树冲突而失败。合并选项和边缘情况众多且令人费解。

可以使用 Subversion 来实现[git-flow](http://nvie.com/posts/a-successful-git-branching-model/)，如果可以，痛苦程度如何？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-12T19:29:57.693

我们使用所谓的*不稳定*主干开发方法。这是 Subversion 的创建者在创建 Subversion 时想到的开发方法。它简单易行。

*   您在*trunk*上进行所有开发。因此称为不稳定的*主干*。
*   当您接近发布时，您为该发布创建一个分支。这个想法是让分支足够晚以保持并行开发尽可能短，但不会太晚以至于一些开发人员无法完成他们的工作，因为他们不再需要在当前版本上工作，而是需要开始在下一个版本。在敏捷中，这通常在*紧缩*冲刺之前完成。它通常在发布功能完成时完成，现在您只是修复错误。
*   发布发生在分支之外。你标记了分支。如果需要补丁，它们会在分支之外完成。

这是一个想法，它是如何工作的：

*   假设您正在开发 1.2 版。你正在干线工作。现在，您即将发布 1.2 版，而 1.2 版的工作还不足以让您的开发人员忙得不可开交。您为您的版本创建一个 1.2 分支。
*   现在，仍在开发 1.2 版的人切换到 1.2 版分支。同时，开发 1.3 的开发人员留在*trunk*上。
*   您现在已准备好发布 1.2。您在分支上标记 Release 1.2。分支不会合并回主干。主干适用于 1.3 版。
*   报告了错误，您希望在版本 1.2.1 中修复它们。您继续在 1.2 分支上工作。1.2.1 不需要新的分支。（您可以在版本之间锁定分支以保持它们的*纯净*。
*   当您即将发布 1.3 版时，您重复该过程——分支 1.3 并为 1.4 工作继续在主干上。

会有一些合并。它主要是将发布分支上修复的缺陷合并回主干。执行此操作有三个选项：

*   发布后，将分支上的所有更改合并回主干。很少有人跟踪。您只是假设分支上的所有错误修复也适用于主干。
*   您使用的跟踪系统了解问题可能存在于多个版本中。在这种情况下，您只需将在分支上发现的错误也标记到主干。由于您的问题跟踪系统，您可以挑选适用于主干的更改。
*   有些网站根本不合并。他们还通过缺陷跟踪系统跟踪需要应用于分支上的主干的更改，并简单地重新实现它们。他们可能会将更改从分支复制到主干，但他们从不进行正式合并。然而，一旦你这样做了，你就永远无法合并（除非你与`--record-only`标志合并）。

当然，您会意识到这种方法需要一种叫做*计划*的东西。您必须优先考虑您的工作，以便开发人员在处理未来版本之前为即将发布的版本完成工作。只有当您在即将发布的版本上没有足够的工作来让所有开发人员忙碌时，您才会进行分支。

您可以实现标准的 Git 工作流程，该工作流程为每个开发人员或问题使用单独的开发分支，然后*将*这些更改交付到主干。这将需要很多分支，每个开发人员/功能一个。

您首先从主干合并到分支以重新*定位*您的代码。完成变基后，您可以使用`--reintegrate`交换机从分支合并回主干。在 1.6 之前，您应该删除分支并重新创建它，因为`--reintegrate`合并跟踪有点混乱。但是，这已在 1.6.x 及更高版本中得到修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T15:09:15.587

这是个大问题。我只有想法如何解决一些问题：

1.  我认为如果不大量使用分支就不能轻易解决这个问题。不确定这是否可以通过使用 GIT 轻松解决。功能分支在解决这个问题方面大有帮助，但一般来说，您可能应该尝试只专注于下一个版本的功能。
2.  `trunk`- 我认为它是`master`分支。
3.  我会说`development`分支是下一个版本的代码
4.  如果不使用很多分支似乎很困难，不知道如何正确解决这个问题。
5.  您可以使用分支或记下 TEST 和 ACC 中的修订号。我猜应该将 PROD 放入标签中。
6.  我会说使用自动回归测试和持续集成。在这里使用同行评审也有帮助，充其量您使用某种工具将文件标记为已审阅。这样，您可以确保仅合并已审核的文件。将您的提交消息绑定到您的错误跟踪器也可能很有趣，以自动找出与哪些问题相关的哪些文件已被触及，然后确保对于您要合并的文件实际上已关闭所有问题。这是一项非常重要的任务，尤其是当您考虑仅合并部分分支时。因此，有点，做一个特征合并。
7.  为发布使用标签。您可以像分支一样检查它并在必要时添加补丁
8.  在一页上列出整个存储库的所有 svn 提交（例如 trac/redmine/jira 概述）
9.  恐怕再次使用本地副本/或分支。或者让研发在本地使用 git svn 进行研究。

其中一些问题至少可以部分地通过使用来解决`git svn`。例如，通过使用它，您可以使用 gits 分支功能在本地进行实验，而无需将它们存储在全局存储库中。当然，如果您正在与团队中的许多成员一起探索新功能，这并不有趣，除非他们都对使用 git 并通过网络相互拉取感到满意。通过使用`git svn`，您还可以`git cherrypick`手动选择单个提交以从一个分支应用到另一个分支（例如，开发到已发布-xx-tag）。

暂时能想到的就这么多，希望对你有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-26T00:13:13.167

在我的活动中，我通过以下方法使用 SVN。

1.  主干是“主”分支。你永远不应该直接在主干中提交任何东西。Trunk 总是需要与生产中最新发布的版本完全匹配。所以，主干总是代表一个稳定的分支。仅在重新集成分支时才更新主干。

2.  你的工作需要分支。每个新分支都必须从主干创建，因此每个新分支在创建时都与生产版本完全匹配。更改和修复在分支中提交。

3.  您应该至少有 2 个主要分支：

    *   开发：用于尚未计划发布的未来开发。
    *   hotfix：用于提交所有错误修复，并且仅修复。频繁使用，更新trunk时需要更新trunk版本。
4.  为每个主要工作流创建一个分支：一个项目、一个子项目、一个变更请求。您可以使用并行开发。

5.  创建“集成”分支以加入您必须发布的分支。您需要将每个候选发布的分支合并到集成分支中。因此，集成分支可以同时加入修补程序和项目，例如。

6.  从集成分支或分支自身构建您的工件。

7.  发布分支后，为该版本创建标签，这样您就可以拥有已发布版本的副本，并且您仍然可以使用该分支。在标签中，您应该只有发布版本。不要在标签中提交更改！

8.  分支发布后，需要更新主干。所以重新整合主干中的分支。您可以重新集成集成分支，也可以直接重新集成分支（如果您没有从集成中通过）。

9.  当主干再次与生产版本匹配时，在所有活动分支中报告。

这种方法并不是真正的 git-flow 概念的复制品，但它遵循了它的一些要求。

使用这种方法，您可以获得以下优势：

*   后备箱很稳定。你总是知道那一刻主干代表什么。

*   每个分支只包含自己的更改。

*   使用集成分支，您可以在单个版本中管理并行分支

*   使用标签，您始终拥有已发布版本的副本

缺点是：

*   许多分支机构要管理。

*   您需要经常合并和切换，特别是将更改报告到集成分支

*   每次都要解决很多冲突

顺便说一句，这是我使用过的最好的方法，因为它允许您保持对版本的控制。

# user-controls - 从 Google Docs 的另一个工作表中获取和使用用户数据

> ID：13345668
> 
> 赞同：0
> 
> 时间：2012-11-12T14:39:55.217
> 
> 标签：user-controls, google-apps-script, google-sheets

我们使用谷歌电子表格来报告大量用户。我编写了一个基本脚本，它根据当前用户打开一个特定的工作表：

```
var CurrentUser = Session.getUser().getEmail()
var ss = SpreadsheetApp.getActive();
  switch(CurrentUser){
    case "usermail1@gmail.com":
      SpreadsheetApp.setActiveSheet(ss.getSheetByName("sheet1"));
      break;
    case "usermail2@gmail.com":
      SpreadsheetApp.setActiveSheet(ss.getSheetByName("sheet2"));
      break;
    case "usermail3@gmail.com":
      SpreadsheetApp.setActiveSheet(ss.getSheetByName("sheet3"));
      break;
    etc... 
```

我想将 userdata 和 sheetnames 放入一个外部表中，并根据该表获取这些数据，因此更容易维护电子邮件和用户列表。如何从特定的谷歌电子表格中获取数据并让脚本根据它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:32:08.453

你可以试试这个。它在不同的工作表上模拟 a`VLOOKUP`并切换到当前工作簿中的“匹配”工作表。这不处理不匹配的情况，但这应该相对简单地添加以适合您的情况。

```
function switchSheets() {
  // Current sheet
  var ss = SpreadsheetApp.getActive();
  // Target sheet (using the key found in the URL)
  var target = SpreadsheetApp.openById("my_other_sheet_id");
  var rows = target.getDataRange();
  var values = rows.getValues();

  // Get the current user
  var CurrentUser = Session.getUser().getEmail();

  // Now iterate through all of the rows in your target sheet,
  // looking for a row that matches your current user (this assumes that
  // it will find a match - you'll want to handle non-matches as well)
  for (var i = 1; i <= rows.getNumRows() - 1; i++) {
    // Match the leftmost column
    var row = values[i][0];
    if (row == CurrentUser) {
      // If we match, grab the corresponding sheet (one column to the right)
      target_sheet = values[i][1];
      break;
    }
  }
  // Now switch to the matched sheet (rememeber to handle non-matches)
  ss.setActiveSheet(ss.getSheetByName(target_sheet));
}; 
```

# c - 使用 dup 创建一个文件作为 tty

> ID：13345674
> 
> 赞同：3
> 
> 时间：2012-11-12T14:40:18.870
> 
> 标签：c, linux, posix, pipe

好的，所以我有一个问题。我必须使用 获取程序的`execlp`输出并将输出直接转到文件。问题是程序只有在 tty 中运行时才会输出某些信息（我猜它调用`isatty(3)`）。到目前为止，这是我的代码

```
void main(){
    int fd = open("file", O_WRONLY | O_CREAT | O_TRUNC, 0755);
    close(1);
    dup(fd);
    execlp("program","program",NULL);
    close(fd);
} 
```

我不想使用操作系统命令，如`script`（有效）等。

所以问题是，我怎样才能“欺骗”程序认为它正在写入 tty？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T14:47:34.337

使用“pty”（伪终端）作为输出。[有关详细信息，请参阅此问题](https://unix.stackexchange.com/questions/21147/what-are-pseudo-terminals-pty-tty)。

Rachid Koucha 写了一篇长文解释如何使用 ptys：[使用伪终端 (pty) 控制交互式程序](http://www.rkoucha.fr/tech_corner/pty_pdip.html)

**停止阅读**这里的文本只是为了阻止愚蠢的 SO 算法将我的答案变成评论。当软件变得比我更聪明时，我讨厌它:-(

# entity-framework-5 - EF - 迷失在迁移中

> ID：13345675
> 
> 赞同：1
> 
> 时间：2012-11-12T14:40:20.317
> 
> 标签：entity-framework-5, entity-framework-migrations

在迁移之前，我在表 Work 和 Factory 之间存在一对多的关系：

```
public class Work
{
    public int WorkId { get; set; }
    public string Name { get; set; }

    public virtual List<Factory> MyFactory { get; set; }
} 
```

和：

```
public class Factory
{
    public int FactoryId { get; set; }
    public string Name { get; set; }

    public virtual Work ParentWork { get; set; }
} 
```

然后我尝试将关系更改为 1 到 1：

```
public class Work
{
    public int WorkId { get; set; }
    public string Name { get; set; }

    [Required]
    public virtual Factory MyFactory { get; set; }
}

public class Factory
{
    public int FactoryId { get; set; }
    public string Name { get; set; }

    public virtual Work ParentWork { get; set; }
} 
```

当我尝试使用以下方法创建迁移时：

**添加迁移 MyMigration**

我收到以下错误：

**ALTER TABLE 语句与 FOREIGN KEY 约束“FK_dbo.Work_dbo.Factory_WorkId”冲突。数据库“EntityFrameworkLab.MyContext”、表“dbo.Factory”、列“FactoryId”中发生冲突**

现在，我有几个问题：

1）为什么不能创建迁移，而模型是有效的？

2) 我应该在代码中实现哪些更改？

3）如果我尝试手动还原更改，则会出现相同的错误消息，但这次我尝试执行以下操作：

**更新数据库-详细**

# vbscript - 脚本 SFTP 无人值守下载

> ID：13345678
> 
> 赞同：2
> 
> 时间：2012-11-12T14:40:33.100
> 
> 标签：vbscript, windows-server-2008, sftp

我正在尝试通过名为 WinSCP 的软件连接到 SFTP 服务器，该软件是一个安全 FTP 客户端，我可以通过发送密钥并在伪无人值守模式下执行它来编写脚本以使其工作，但服务器必须让用户登录才能发送密钥，我需要 WinSCP 登录和传输文件，就像控制台不启动的服务一样。

我尝试按照 [WinSCP](http://winscp.net/eng/docs/library_session_getfiles#example)网站上的教程进行操作（用于自动/无人值守传输，但它给了我错误：`Cannot created object`，或`cannot find library`（来自我与 COM 关联的 dll 文件）

运行以下代码时出现的错误是：

```
line 13, Char: 2
Could not created object named "WinSCP.SessionOptions"
Code: 80040154
Source: Wscipt.CreateObject 
```

我可能还应该提到，当我删除第 13 行的代码以查看它是否是唯一的问题时，我在第 21 行或第 22 行创建 Session 对象时遇到了类似的错误

```
<job>                                                               
<reference object="WinSCP.Session"/>

<script language="VBScript">

Option Explicit

' Setup session options
Dim sessionOptions
Set sessionOptions = WScript.CreateObject("WinSCP.SessionOptions")
With sessionOptions
    .Protocol = Protocol_Sftp
    .HostName = "host"
    .UserName = "username"
    .Password = "password"
End With

Dim session
Set session = WScript.CreateObject("WinSCP.Session")

' Connect and Get
session.Open sessionOptions

 session.GetFiles("/Fromn/*.*", "C:\testFilesFrom").Check()

' Disconnect, clean up
session.Dispose

</script>
</job> 
```

有没有人在服务器未登录并且脚本可以运行 SFTP 会话的情况下编写此类作业的脚本？我做错了什么还是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:56:34.343

WinSCP 是为交互式使用而设计的。将[PSCP](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)用于非交互式作业。我强烈建议使用公钥身份验证而不是密码身份验证。

# ios - 什么是我的 FirstResponder

> ID：13345679
> 
> 赞同：0
> 
> 时间：2012-11-12T14:40:35.090
> 
> 标签：ios, uiview

我创建了一个应用程序，并在`ViewController.m`,`viewDidLoad`中编写了以下代码

```
 for (UIView* v in self.view.subviews){
        NSLog(@"View is %@",v);
        NSLog(@"First Responder is %@",[v isFirstResponder]?@"YES":@"NO");
    }
NSLog(@"First Responder is %@",[self isFirstResponder]?@"YES":@"NO");
NSLog(@"First Responder is %@",[self.view isFirstResponder]?@"YES":@"NO"); 
```

但它会`NO`为一切带来回报。默认情况下我的第一响应者是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:58:34.330

来自[OS X 的文档](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/EventOverview/EventHandlingBasics/EventHandlingBasics.html)：

> **确定急救人员状态**
> 
> 通常一个 NSResponder 对象总是可以通过询问它的窗口（或者它本身，如果它是一个 NSWindow 对象）来确定它当前是否是第一响应者，然后将它自己与那个对象进行比较。您通过向 NSWindow 对象发送 firstResponder 消息来请求第一响应者。对于一个 NSView 对象，这个比较看起来像下面的代码：
> 
> ```
> if ([[self window] firstResponder] == self) {
>     // do something based upon first-responder status
> } 
> ```

**注意：**这是针对 OS X 的。不幸的是，iOS 没有类似的系统，但可以通过以下方式实现：

```
UIWindow* keyWindow = [[UIApplication sharedApplication] keyWindow]; 
UIView* firstResponder = [keyWindow performSelector:@selector(firstResponder)]; 
```

这是无证的，可能会被 Apple 拒绝。对于测试和探索性研究，这对您很方便。

以下是有关 iOS 中的第一响应者的一些文档：

*   [iOS 的 Cocoa 应用程序能力](http://developer.apple.com/library/ios/#documentation/general/conceptual/Devpedia-CocoaApp/Responder.html)
*   [iOS 事件处理指南](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/EventsiPhoneOS/EventsiPhoneOS.html#//apple_ref/doc/uid/TP40009541-CH2-SW1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:46:36.047

在您的主视图控制器中，执行以下操作：

```
for (UIView *sub in self.view.subviews)
{
    if (sub.isFirstResponder)
        NSLog(@"It's me!");
} 
```

# android - 使用警报管理器进行时间安排

> ID：13345682
> 
> 赞同：0
> 
> 时间：2012-11-12T14:40:41.147
> 
> 标签：android, time, alarmmanager

我有一个 AutoUpdate 服务类 oncreate()- 我在 externalsdcard 中创建日志文件 onStartCOMmand()- UpdateTask= new UpdateTask(this,AutoUpdate.logwriter) 我有一个 UpdateTask 类，它扩展了线程类 - 在此类中运行方法 I通过创建本地 HTTP 上下文将所有数据写入日志文件，最后我放入 Thread.sleep(3000)。现在我每 3 秒在日志文件中获取数据，但我想将时间限制更改为 15 分钟我让 BootReceiver 类扩展 BroadcastReceiver ：我在启动时将意图传递给 AutoUpdate Service 类并启动服务。我的问题是我需要将警报管理器放置在每 15 分钟 UpdateTask 应该工作的位置，并每隔 15 分钟将数据写入日志中，而不是使用 Thread.sleep(3000) 让它工作 3 秒的线程

我需要用警报管理器替换睡眠线程

参考：[我想通过给出时间限制来更新来自服务器的数据](https://stackoverflow.com/questions/13300555/android-i-want-to-update-the-data-from-server-by-giving-a-time-limit/13300677#comment18164643_13300677)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:57:45.900

当您安排警报管理器重复运行时，它会在每个间隔（在您的情况下为 15 分钟）自动调用待处理意图中的意图。

在这种情况下，您将不需要正在进行的服务，而是实现您应该做的就是在 IntentService 的 onHandleIntent 方法中实现日志登录，并将其传递给由 AlarmManager 启动的 PendingIntent。

# iphone - iOS 守护程序应用程序将无法启动（越狱） - 如何调试？

> ID：13345686
> 
> 赞同：6
> 
> 时间：2012-11-12T14:40:59.003
> 
> 标签：iphone, ios, debugging, daemon, jailbreak

我正在为越狱的 iPhone 构建一个守护程序应用程序，并遵循 stackoverflow 上的几个问题和答案中描述的指南，当然还有 Chris Alvares 的网页[http://chrisalvares.com/blog/38/creating-an-iphone-守护进程-part-4/](http://chrisalvares.com/blog/38/creating-an-iphone-daemon-part-4/)

Xcode 和项目由 Jailcoder 修补以使其在我的设备上运行。

这里的一篇文章指出，现在不再需要使用开放工具链模板。将应用程序上传到 /Applications 目录并在 /System/Library/LaunchDaemons 中添加 plist 文件就足够了。

我已经执行了上述步骤，但是守护程序没有启动，或者至少在我检查时没有运行。在 Xcode 管理器中可用的设备日志中，在任何地方都找不到应用程序的名称或其捆绑包 ID。我至少会期望一个错误，原因是它无法启动。

将plist文件的内容复制到/System/Library/LaunchDaemons：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
    <plist version="1.0">
    <dict>
        <key>Disabled</key>
        <false/>
        <key>Label</key>
        <string>dmn.NoUIDaemon.plist</string>
        <key>OnDemand</key>
        <false/>
        <key>ProgramArguments</key>
        <array>
            <string>/Applications/NoUIDaemon.app/NoUIDaemon</string>
            <string></string>
            <string></string>
        </array>
        <key>StandardErrorPath</key>
        <string>/dev/null</string>
    </dict>
    </plist> 
```

问题：有没有办法调试为什么它不会启动守护程序应用程序？或者，除了将应用程序上传到 /Applications 并将 plist 文件添加到 LaunchDaemons 目录之外，我可能错过了一步吗？

**编辑：**

我的主要程序的内容：

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

启动 /Applications/NoUIDaemon.app/NoUIDaemon 时出错：

```
R-iPod:/ root# /Applications/NoUIDaemon.app/NoUIDaemon
-sh: /Applications/NoUIDaemon.app/NoUIDaemon: Bad CPU type in executable 
```

请注意，当我从 Xcode 在我的设备上运行该应用程序时，它确实可以正常工作。

尽管无法手动启动守护程序，但 Nate 的问题的答案：

1）LaunchDaemons中的plist文件确实命名为dmn.NoUIDaemon.plist

2）我犯了忘记标签内容中的 .plist 部分的“错误”，所以我尝试了两个值，最后有和没有 .plist，当然没有区别。

3) 在使用 reboot 命令安装了应用程序和 plist 文件后，我重新启动了设备

4) 我确保所有权限都相同 (0775)

5) 将在 Bad CPU 问题解决但仍无法正常工作时尝试此操作

**最终编辑：**

要在跳板上隐藏 Daemon 应用程序图标，请将以下内容添加到 .app 中的 Info.plist：

```
<key>SBAppTags</key>
<array>
    <string>hidden</string>
</array> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T12:12:29.860

正如我在评论中所说，首先尝试确保您的守护程序可执行文件是可运行的：

1.  登录到您的设备`root`，通过`ssh`
2.  `/Applications/NoUIDameon.app/NoUIDaemon`在命令行执行命令
3.  检查它是否正在运行`ps -Aef | grep NoUIDaemon`

**如果它没有运行**，我会检查以确保您的构建过程是伪造的代码签名`NoUIDaemon`可执行文件。越狱手机不需要*有效*签名，但仍然需要签名。此外，如果它没有运行（或保持运行），它可能有助于您从守护程序的主程序（例如 main.m）发布代码：

```
int main(int argc, char *argv[]) {
   // what's in here?
} 
```

**如果这确实有效，并且在您手动启动它时运行**（但不是自动），请检查：

1.  上面的 plist 文件是命名的`dmn.NoUIDaemon.plist`吗？
2.  我认为这实际上是 Chris 博客中的一个错误，但`Label`您的 plist 中的值应该是`<string>dmn.NoUIDaemon</string>`，而不是`<string>dmn.NoUIDaemon.plist</string>`. 我认为这不会阻止您的守护程序运行，我认为它只是与系统启动守护程序的命名约定一致。
3.  我不认为仅仅安装 plist 文件`/System/Library/LaunchDaemons`就足以启动守护进程。您可能需要重新启动手机，或手动启动守护程序`launchctl load -w /System/Library/LaunchDaemons/dmn.NoUIDaemon.plist`
4.  检查以确保您的 dmn.NoUIDaemon.plist 的文件权限和所有权与`/System/Library/LaunchDaemons`.
5.  我不确定这是否有必要，但我认为守护进程`Label`的名称（plist 文件的名称和名称）应该与您的 NoUIDaemon-Info.plist 文件中指定的包 ID 匹配。所以，Info.plist 应该有：

```
 <key>CFBundleExecutable</key>
    <string>NoUIDaemon</string>
    <key>CFBundleIdentifier</key>
    <string>dmn.${PRODUCT_NAME:rfc1034identifier}</string> 
```

或者

```
 <key>CFBundleExecutable</key>
    <string>NoUIDaemon</string>
    <key>CFBundleIdentifier</key>
    <string>dmn.NoUIDaemon</string> 
```

**更新：**

另外，我认为你的守护进程的主程序不应该调用`UIApplicationMain`. 它不应该是 UIApplication。应该是后台进程吧？如果您查看[Chris 博客的第 1 页](http://chrisalvares.com/blog/7/creating-an-iphone-daemon-part-1/)，它会显示一个示例。这是我的一个例子：

```
int main(int argc, char *argv[]) {
   @autoreleasepool {
      SignalMonitor* daemon = [[SignalMonitor alloc] init];

      // start a timer so that the process does not exit.
      NSTimer* timer = [[NSTimer alloc] initWithFireDate: [NSDate date]
                                                interval: 1.0
                                                  target: daemon
                                                selector: @selector(setup:)
                                                userInfo: nil
                                                 repeats: NO];

      NSRunLoop* runLoop = [NSRunLoop currentRunLoop];
      [runLoop addTimer: timer forMode: NSDefaultRunLoopMode];
      [runLoop run];
   }

   return 0;
} 
```

此外，这是我的守护进程的 plist 文件 (Info.plist) 的副本，其中包含您的守护进程名称：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
        <key>CFBundleDevelopmentRegion</key>
        <string>English</string>
        <key>CFBundleExecutable</key>
        <string>NoUIDaemon</string>
        <key>CFBundleIdentifier</key>
        <string>dmn.NoUIDaemon</string>
        <key>CFBundleInfoDictionaryVersion</key>
        <string>6.0</string>
        <key>CFBundleName</key>
        <string>${PRODUCT_NAME}</string>
        <key>CFBundlePackageType</key>
        <string>APPL</string>
        <key>CFBundleShortVersionString</key>
        <string>1.0</string>
        <key>CFBundleSignature</key>
        <string>????</string>
        <key>CFBundleVersion</key>
        <string>1.0-0</string>
        <key>LSRequiresIPhoneOS</key>
        <true/>
        <key>LSApplicationCategoryType</key>
        <string></string>
</dict>
</plist> 
```

# opencv - opencv Freak - 我可以在 BOW 中使用 Freak 特征描述符吗？

> ID：13345692
> 
> 赞同：4
> 
> 时间：2012-11-12T14:41:25.670
> 
> 标签：opencv, freak

我正在尝试在 opencv 中使用 Freak 来检测特征并提取描述符，然后构建我的 BOW 词汇表，并为每个图像使用词汇表与 BOW 匹配。你知道，整个事情。我知道 BOW 可以与 SIFT 或 SURF 等其他描述符一起使用，我不清楚二进制的 Freak 描述符是否可以与 BOW 一起使用。更具体地说，当 opencv 构建 BOW 词汇表时，它使用 k-means 集群。我不清楚 k-means 聚类算法使用什么距离函数。对于像 Freak 这样的二进制描述符，汉明距离似乎是唯一的选择。

在我看来，opencv k-means 在计算距离时只使用欧几里得距离，真可惜。看起来我必须建立自己的 k-means 和自己的词汇匹配。有没有聪明人知道解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:09:07.697

我在一篇论文上读到 Freak 不容易使用。这是论文的摘录“....这些算法在许多检索算法中都不容易使用，因为它们必须与汉明距离进行比较，汉明距离不容易适应诸如词汇树或近似最近邻（Approximate Nearest Neighbors）之类的加速搜索结构（ ANN)...." (ORB ,FREAK 和 BRISK)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:23:22.693

FREAK works with locality sensitive hashing. You can use it with FLANN (Fast approximate nearest neighbors) included in OpenCV.

For the BOW, only the first 5, 6, 7, 8 bytes of the descriptor might be sufficient to construct the tree.

# dropwizard - 寻找一个dropwizard的例子

> ID：13345693
> 
> 赞同：16
> 
> 时间：2012-11-12T14:41:29.070
> 
> 标签：dropwizard

寻找我发现的 dropwizard 示例：

[https://github.com/codahale/dropwizard/tree/master/dropwizard-example](https://github.com/codahale/dropwizard/tree/master/dropwizard-example)

但我对至少一个更完整的示例感兴趣：

1.  客户 - 账户等 1:n 关系
2.  至少带有表单的 html gui 表示
3.  对 xml 的全面支持

三分之二将是一个开始，并且会被我“接受”。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-18T16:19:39.727

**看看我的一些[Dropwzard 项目](https://github.com/gary-rowe)**

特别是[MultiBit Merchant](https://github.com/gary-rowe/MultiBitMerchant/wiki/Getting-started-for-developers)项目（管理、商店和平台）将为您提供丰富的演示代码，展示如何在 Dropwizard 中完成工作。还有一个使用 Dropwizard 的 OpenID 示例，它应该为新应用程序提供良好的启动点。

它们都是 MIT 许可下的 FOSS。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-10T07:48:03.560

沃尔夫冈，

这是一个[示例 Dropwizard 应用程序](https://bitbucket.org/dnoranovich/dropwizard-getting-started)，其中使用了使用 Hibernate 的身份验证、配置和数据库访问。

该应用程序在几个教程中进行了讨论：

*   [第一步](http://javaeeeee.blogspot.com/2015/01/getting-started-with-dropwizard-first.html)
*   [身份验证、配置和 HTTPS](http://javaeeeee.blogspot.com/2015/02/getting-started-with-dropwizard.html)
*   [使用 Hibernate 连接到数据库](http://javaeeeee.blogspot.com/2015/11/getting-started-with-dropwizard.html)
*   [使用 Jersey 客户端连接到外部 REST Web 服务](http://javaeeeee.blogspot.com/2015/12/getting-started-with-dropwizard.html)

这是另一个示例，可以为经过身份验证的用户存储书签并通过 REST API 访问数据[。](https://bitbucket.org/dnoranovich/dropbookmarks)

祝你好运。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-03T10:00:18.790

这看起来也是一个很好的例子：[https ://github.com/spinscale/dropwizard-blog-sample](https://github.com/spinscale/dropwizard-blog-sample)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-05T11:53:00.107

我在[Dropwizard XML Bundle](https://github.com/yunspace/dropwizard-xml)项目中写了一个示例：

[https://github.com/yunspace/dropwizard-xml/tree/master/dropwizard-xml-example](https://github.com/yunspace/dropwizard-xml/tree/master/dropwizard-xml-example)

它可能是最接近您正在寻找的东西。它有：

*   Pirates 和 Ships 之间的 1:N 关系，存储在 H2 db 中。
*   使用带有验证的自定义 JacksonMessageBodyProvider 对 XML 的完全 CRUD 支持。

通过 Freemarker 或 Mustache 模板添加 HTML gui 应该非常简单，并且在标准文档中有介绍。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-12T00:39:02.060

想要使用身份验证的 dropwizard 的一个很好的例子。

Dropwizard：身份验证、配置和 HTTPS [https://dzone.com/articles/getting-started-dropwizard-0](https://dzone.com/articles/getting-started-dropwizard-0)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-15T06:01:18.220

你可以从 Github 尝试这个项目。

Dropwizard：CRUD 操作、HTML 视图、Healthcheck

[https://github.com/HoldInArms/dropwizard-mssql-crud-example](https://github.com/HoldInArms/dropwizard-mssql-crud-example)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-01-25T11:38:18.313

**请按照以下步骤操作。**

1.  在 pom 文件中添加依赖

    ```
    <dependencies>
    <dependency>
        <groupId>com.yammer.dropwizard</groupId>
        <artifactId>dropwizard-core</artifactId>
        <version>0.6.2</version>
    </dependency> 
    ```

2.  创建配置类

    ```
    import com.yammer.dropwizard.config.Configuration;
    public class BlogConfiguration extends Configuration{

     } 
    ```

3.  创建服务类

    ```
     import com.yammer.dropwizard.Service;
       import com.yammer.dropwizard.config.Bootstrap;
       import com.yammer.dropwizard.config.Environment;

       public class BlogService extends Service<BlogConfiguration> {

       public static void main(String[] args) throws Exception {
       new BlogService().run(new String[] { "server",
       "C:\\LocalEnv\\Workspace\\dropwizarddemo\\configuration.yml" });
        }

        @Override
       public void initialize(Bootstrap<BlogConfiguration> bootstrap) {
       bootstrap.setName("blog");
       }

       @Override
        public void run(BlogConfiguration configuration, 
        Environment    environment) throws Exception {
        environment.addResource(new IndexResource());
        }

      } 
    ```

注意：将下面的 configuration.yml 文件放在当前目录中

```
 # HTTP-specific options.
       http:

       # The port on which the HTTP server listens for service requests.
       port: 8079

       # The port on which the HTTP server listens for administrative
       # requests.
       adminPort: 8179

      # Maximum number of threads.
      maxThreads: 100

      # Minimum number of thread to keep alive.
      minThreads: 10 
```

4.写入索引资源。

```
 import java.util.ArrayList;
     import java.util.Arrays;
     import java.util.List;
     import javax.ws.rs.GET;
     import javax.ws.rs.Path;
     import javax.ws.rs.Produces;
     import javax.ws.rs.core.MediaType;

    import com.yammer.metrics.annotation.Timed;

    @Path("/")
    public class IndexResource {

   @GET
   @Produces(value = MediaType.APPLICATION_JSON)
   @Timed
   public List<Blog> index() {
    return Arrays.asList(new Blog("for Java Developers",
   "http://stackoverflow.com/questions/13345693/looking-for-a-dropwizard-
    example”));
   }

   @Path("/service")

   @GET
   @Produces(value = MediaType.APPLICATION_JSON)
   @Timed
   public List<Users> users() {
    List<Users> list = new ArrayList<Users>();
    list.add(new Users(25,"Sambhu","SA"));
    list.add(new Users(35,"Amit","VP"));
    list.add(new Users(45,"Sanket","AVP"));

    return list;
    }

  } 
```

5.  为博客和用户写 POJO

    ```
     public class Users {

     Integer id;
     String name;
     String designation;

     public Users(Integer id, String name, String desination){
    this.id=id;
    this.name=name;
    this.designation=desination;
    }

    public Integer getId() {
    return id;
    }
    public void setId(Integer id) {
    this.id = id;
    }
    public String getName() {
    return name;
    }
    public void setName(String name) {
    this.name = name;
    }
    public String getDesignation() {
    return designation;
    }
    public void setDesignation(String designation) {
    this.designation = designation;
    }
    @Override
    public String toString() {
    return "Users [id=" + id + ", name=" + name + ", designation="
            + designation + "]";
    } 
    ```

6.  运行 BlogService ，它将启动 Jetty 服务器并使用 [http://localhost:8079/等端口访问 localhost](http://localhost:8079/)

# java - 我可以让 SQLiteDatabase 抱怨缺少参数吗？

> ID：13345696
> 
> 赞同：4
> 
> 时间：2012-11-12T14:41:31.763
> 
> 标签：java, android, sqlite

最近，由于这样的代码，我遇到了一些错误：

```
Cursor myCursor = myDb.rawQuery(
        "SELECT ... " +
        "  FROM ...complicated join... " +
        " WHERE field1 = ? AND (field2 = ? OR field3 = ?) ",
        new String[] {myField1, myField2});   // Oops, forgot about field3 
```

发生这种情况时，查询只是默默地忽略缺少的参数，从而导致错误被忽视。`pedantic`当占位符的数量和字段的数量不匹配时，是否有一些设置或其他任何东西可以让 SQLite 尖叫（在运行时）？

我知道我可以构建自己的包装器，但我想知道是否有内置的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:07:01.050

Android基本上只是将未经检查的参数传递给本机sqlite，请参阅[http://www.sqlite.org/c3ref/bind_blob.html](http://www.sqlite.org/c3ref/bind_blob.html)

如果某些内容未绑定，则仅将其视为绑定为 NULL。绑定太多应该会导致错误

我不知道/没有在 Android 的源代码中看到任何用于此类检查的调试选项，但您可能会编写一些代码来检查您的 sql 语法：

```
SQLiteChecker mDbChecked = new SQLiteChecker(mDb);
Cursor c = mDbChecked.rawQuery("select complicated from table where stuff=?",
        new String[] {"one", "two"}); 
```

SQLiteChecker 将类似于

```
/**
 * Simple Delegate for SQLiteDatabase
 */
public class SQLiteChecker {
    private final SQLiteDatabase mDbDelegate;
    public SQLiteChecker(SQLiteDatabase db) {
        mDbDelegate = db;
    }
    // ------------ Delegate methods --------------------//
    public int delete(String table, String whereClause, String[] whereArgs) {
        checkSQL(whereClause, whereArgs);
        return mDbDelegate.delete(table, whereClause, whereArgs);
    }

    public int update(String table, ContentValues values, String whereClause, String[] whereArgs) {
        checkSQL(whereClause, whereArgs);
        return mDbDelegate.update(table, values, whereClause, whereArgs);
    }

    public void execSQL(String sql, Object[] bindArgs) throws SQLException {
        checkSQL(sql, bindArgs);
        mDbDelegate.execSQL(sql, bindArgs);
    }

    public Cursor rawQuery(String sql, String[] selectionArgs) {
        checkSQL(sql, selectionArgs);
        return mDbDelegate.rawQuery(sql, selectionArgs);
    }

    // add more if you need

    // -------------- checking logic -------------------//
    private static void checkSQL(String query, Object[] args) {
        // bit unreliable but simple:
        // just check if amount of ? matches args.length
        int expected = countChar(query, '?');
        int actual = args != null ? args.length : 0;
        if (expected != actual) {
            Log.e("CHECK", "You seem to have messed up [" + query + "]");
            Log.e("CHECK", "expected:" + expected + " actual:" + actual);
        }
    }

    private static int countChar(String string, char ch) {
        if (string == null) return 0;
        int count = 0;
        for (int i = 0; i < string.length(); i++) {
            if (string.charAt(i) == ch)
                count++;
        }
        return count;
    }
} 
```

# ruby-on-rails - ruby on rails 中的图像和文本链接

> ID：13345702
> 
> 赞同：0
> 
> 时间：2012-11-12T14:41:57.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想将其转换为 ruby​​ on rails 代码：

```
<a href="#"><span>Log out</span><%= image_tag("images/log-out.png") %></a> 
```

尝试这个时：

```
<%= link_to image_tag("images/log-out.png", :border => 0 ), destroy_user_session_path, :method => :delete %> 
```

我正在获取图像上的链接。但我还需要用文本添加跨度。我试过了，但它不起作用：-

```
 <%= link_to "<span>Log out</span>"+image_tag("images/log-out.png", :border => 0 ), destroy_user_session_path, :method => :delete %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:44:14.160

尝试：

```
 <%= link_to raw("<span>Log out</span>") + image_tag("images/log-out.png", :border => 0 ), destroy_user_session_path, :method => :delete %> 
```

# asp.net - 使用 jquery 从视图中异步调用控制器方法

> ID：13345705
> 
> 赞同：-1
> 
> 时间：2012-11-12T14:42:31.857
> 
> 标签：asp.net, asp.net-mvc, jquery

我在控制器中有两种方法：`Page`和`Load`. `Page`返回`view`但`Load`返回`JsonResult`。`jquery-functions`我对调用方法的位置也有看法。

它们按顺序执行，但我想异步调用它们。我怎么做？

```
function **LoadPage**(page, isnext) {
    $(':focus').blur();
    $('#loadingBlockElement').show();

    $.ajax({
        type: "GET",
        url:  '@Html.Raw(Url.Action("page", new { formId = Model.Params.FormId, userId = Model.Params.UserId, baseVersion = Model.Params.BaseVersion, stateName = Model.Params.StateName, stateVersion = Model.Params.StateVersion, stateFormId = Model.Params.StateFormId, baseFormId = Model.Params.BaseFormId }))'+'&page='+page+'&isnext='+isnext,         

        success: function (result) {     
            $('body').find('.ui-dialog').find('div').remove();        
            $('body').find('.ui-dialog').remove();      
            WE = null;
            $('#main').html(result);
            $('form').hide();
        }
    });
}

function **Load**() {        
    $.ajax({
        type: "POST",
        url: "@Url.Action("load")"+'?userId=@Model.Params.UserId'+'&formId=@Model.Params.FormId'+'&baseVersion=@Model.Params.BaseVersion'+'&stateFormId=@Model.Params.StateFormId'+'&baseFormId=@Model.Params.BaseFormId'+'&stateName=@Model.Params.StateName'+'&stateVersion=@Model.Params.StateVersion'+'&page='+$('form:first').attr('ID'),
        success: function (result) {..bla-bla-bla 
```

**控制器**：

**加载：**

```
public JsonResult Load(int formId, int baseVersion, string stateName, int stateVersion, string page, string userId, int stateFormId, int baseFormId)
{
     ...
} 
```

**页：**

```
public ActionResult Page(int formId, int baseVersion, string stateName, int stateVersion, string page, string userId, bool? isNext, int stateFormId, int baseFormId)
{
    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:07:02.253

[如文档所示](http://api.jquery.com/jQuery.ajax/)，将两个调用的`ajax`属性设置为**true**，然后调用每个函数：`$.ajax`

```
$(document).ready(function() {
    LoadPage(page);
    Load();
});

function LoadPage(page) {
   $.ajax({
       type: "GET",
       async: true, // this is what you're missing
       url: "yoururl",
       success: function (result) {
           // handle success
       }
   });
}

function Load() {        
    $.ajax({
        type: "POST",
        async: true, // this is what you're missing
        url: "yoururl",
        success: function (result) {
            // handle success
        }
    });
} 
```

# android - 图像视图太小

> ID：13345708
> 
> 赞同：1
> 
> 时间：2012-11-12T14:42:42.073
> 
> 标签：android, layout, imageview

我想问一下scrollView 中imageView 的布局问题。但是，显示的图像非常非常小。即使是一张`1024 * 1024 px`图片也无法完全占据普通手机的整个屏幕宽度。

如何修改它以便对于任何图像大小：

1）宽度可以自动放大或缩小以固定屏幕宽度；

2）高度将相应地放大或缩小以保持高度：宽度比，并且如果大于可用空间则可以滚动。

我尝试了很多不同的组合，如[http://juliaailse.iteye.com/blog/1409317](http://juliaailse.iteye.com/blog/1409317)所示，但仍然失败。

代码如下：

```
<TableLayout android:id="@+id/tableLayout" 
   android:layout_width="match_parent" 
   android:layout_height="match_parent" 
   android:stretchColumns="*" 
   android:background="@color/background_color"
   android:orientation="vertical"  
   xmlns:android="http://schemas.android.com/apk/res/android">

    <TableRow
        android:id="@+id/tableRow0"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <Button
          android:id="@+id/RefreshButton"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_gravity="center_vertical"
          android:layout_span="2"
          android:paddingBottom="2dp"
          android:paddingTop="2dp"
          android:text="Refresh"         
          android:textSize="10sp" />    

       <TextView
           android:id="@+id/titleTextView"
           android:layout_width="match_parent"
           android:layout_height="wrap_content"
           android:layout_gravity="center_horizontal"
           android:layout_marginBottom="2dp"
           android:layout_span="4"
           android:gravity="center_horizontal"
           android:text="@string/quiz_title"
           android:textColor="@color/text_color"
           android:textSize="@dimen/title_size" >
       </TextView>

       <Button
          android:id="@+id/BackButton"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_gravity="center_vertical"
          android:layout_span="2"
          android:paddingBottom="2dp"
          android:paddingTop="2dp"
          android:text="Back"
          android:textSize="10sp" />    
   </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

       <TextView android:id="@+id/questionNumberTextView"
          android:layout_width="match_parent" 
          android:layout_height="wrap_content"
          android:layout_marginBottom="2dp" 
          android:layout_marginTop="2dp"
          android:layout_span="8"
          android:textColor="@color/text_color" 
          android:textSize="@dimen/text_size" 
          android:layout_gravity="center" 
          android:gravity="center">        
       </TextView>      
   </TableRow>

   <TableRow
       android:id="@+id/tableRow3"
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       android:layout_weight="1"
       android:background="@android:color/transparent" >

      <ScrollView android:id="@+id/SlotScrollView" 
         android:layout_width="match_parent"  
         android:layout_span="8">

           <ImageView
               android:id="@+id/flagImageView"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_gravity="center"
               android:gravity="center_horizontal" >      
           </ImageView>
     </ScrollView>   
   </TableRow>   

    <TableRow
        android:id="@+id/tableRow4"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:paddingTop="5dp" >

       <TextView
           android:id="@+id/guessCountryTextView"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_gravity="center_horizontal"
           android:layout_marginBottom="2dp"
           android:layout_marginTop="2dp"
           android:layout_span="8"
           android:gravity="center_horizontal"
           android:text="@string/choose_answer"
           android:textColor="@color/text_color"
           android:textSize="@dimen/text_size" >    
        </TextView>                       
   </TableRow>    

   <TableRow
       android:id="@+id/tableRow4"
       android:layout_width="match_parent"
       android:layout_height="match_parent"     
       android:background="@android:color/transparent" >  

       <TableLayout android:id="@+id/buttonTableLayout" 
          android:layout_width="match_parent"
          android:layout_height="wrap_content" 
          android:layout_span="8"
          android:layout_weight="1" 
          android:stretchColumns="0,1,2,3">
          <TableRow android:id="@+id/tableRow0" 
             android:layout_width="match_parent" 
             android:layout_height="wrap_content" 
             android:orientation="horizontal"></TableRow>
          <TableRow android:id="@+id/tableRow1"
             android:layout_width="match_parent" 
             android:layout_height="wrap_content"
             android:orientation="horizontal"></TableRow>
          <TableRow android:id="@+id/tableRow2"
             android:layout_width="match_parent" 
             android:layout_height="wrap_content"
             android:orientation="horizontal"></TableRow>
       </TableLayout>
    </TableRow>

   <TableRow
       android:id="@+id/tableRow5"
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       android:background="@android:color/transparent"
       android:gravity="center_horizontal" >

       <TextView android:id="@+id/answerTextView"
          android:layout_width="match_parent" 
          android:layout_height="wrap_content"
          android:layout_span="8"
          android:textSize="@dimen/answer_size" 
          android:layout_gravity="center" 
          android:textStyle="bold" 
          android:gravity="center">        
       </TextView>
    </TableRow>         

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:53:40.843

尝试为 ImageView 添加以下 2 行：

```
android:scaleType="fitCenter"
android:adjustViewBounds="true" 
```

你应该得到这样的结果：

```
<ImageView
   android:id="@+id/flagImageView"
   android:scaleType="fitCenter"
   android:adjustViewBounds="true"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:layout_gravity="center"
   android:gravity="center_horizontal" >      
</ImageView> 
```

# php - Facebook iframe 分享和邀请按钮在 IE 上不起作用

> ID：13345711
> 
> 赞同：0
> 
> 时间：2012-11-12T14:42:59.920
> 
> 标签：php, facebook, iframe, facebook-iframe

使用 WooBox 我为页面创建了一个自定义选项卡。此自定义选项卡使用 iFrame 在我的服务器上显示 PHP 文件。发生的是，这个 PHP 有一个 Facebook 分享和一个 Facebook 邀请按钮，在 Firefox 上工作但在 Internet Explorer 上不起作用：

有问题的标签是这个：[http ://www.facebook.com/?ref=canvas#!/pages/Mulheres-Apaixonantes/127782210574538?sk=app_369079553142218](http://www.facebook.com/?ref=canvas#!/pages/Mulheres-Apaixonantes/127782210574538?sk=app_369079553142218)

PHP 文件相当简单，我在此处发布相关位：

```
<?php header("p3p: CP=\"ALL DSP COR PSAa PSDa OUR NOR ONL UNI COM NAV HONK\"");?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:fb="https://www.facebook.com/2008/fbml" xmlns:og="http://opengraphprotocol.org/schema/"> 
```

然后是带有 2 个元标记、标题和样式标记的 HEAD 标记，然后：

```
<script>
function fb_share(){
FB.ui({
    method: 'feed',
    name: 'Jardim Botânico UTAD',
    caption: '',
    link: 'http://facebook.com/utadjb',
    picture: 'http://jb.utad.pt/img/site/logotipo200200.png',
    description: 'Acabei de ver a página do facebook do Jardim Botânico UTAD!'
},
function(response){
    if(response){
        alert('Post was published.');
    }else{
        alert('Post was not published.');
    }
});
}

function fb_invite(){
FB.ui({
    method: 'apprequests',
  message: 'Acabei de ver a página do facebook do Jardim Botânico UTAD em http://facebook.com/utadjb! Vê também!'
},
function(response){
    if (response){
        alert('Post was published.');
    }else{
        alert('Post was not published.');
    }
});
}
</script> 
```

这里面是按钮的调用方式：

```
 <div id="share_posttowall" class="shareoption"><span>Partilhe no seu mural</span><a onclick="fb_share(); return false;" class="fbbluebutton" href="#">Partilhar</a></div>
      <div id="share_sendinvite" class="shareoption"><span>Convide os seus amigos</span><a onclick="fb_invite(); return false;" class="fbbluebutton" href="#">Convidar</a></div> 
```

有人知道为什么这两个按钮在 Internet Explorer 上不起作用吗？我已经用尽了所有可能的故障排除...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:54:38.570

> 我已经用尽了所有可能的故障排除...

除了查看浏览器的错误控制台之外，您的意思是？

**在单击这些按钮中的任何一个时，我都会在所有**浏览器中看到“FB 未定义”行——这并不特别令人惊讶，因为您似乎根本没有嵌入 JS SDK **。**

# java - Java中的字符串长度（以像素为单位）

> ID：13345712
> 
> 赞同：13
> 
> 时间：2012-11-12T14:42:59.947
> 
> 标签：java, string, fonts, awt, fontmetrics

有没有一种方法可以计算字符串的长度（以像素为单位），给定某个`java.awt.Font`对象，不使用任何 GUI 组件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T14:49:54.720

> 不使用任何 GUI 组件？

这取决于你在这里的意思。我假设你的意思是你想在没有收到`HeadlessException`.

最好的方法是使用`BufferedImage`. AFAIK，这不会抛出`HeadlessException`：

```
Font font = ... ;
BufferedImage img = new BufferedImage(1, 1, BufferedImage.TYPE_INT_ARGB);
FontMetrics fm = img.getGraphics().getFontMetrics(font);
int width = fm.stringWidth("Your string"); 
```

除了使用这样的东西，我认为你不能。您需要一个图形上下文来创建`FontMetrics`并为您提供字体大小信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T14:47:13.450

您可以使用该`Graphics2D`对象来获取字体边界（包括宽度）：

```
Graphics2D g2d = ...
Font font = ...
Rectangle2D f = font.getStringBounds("hello world!", g2d.getFontRenderContext()); 
```

*但这取决于您将如何获取`Graphics2D`对象（例如从`Image`）。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T15:12:24.057

这为我提供了 (137.0, 15.09375) 的输出。我不知道单位是什么，但它看起来确实按比例正确，并且不直接使用 Graphics2D。

```
 Font f = new Font("Ariel", Font.PLAIN, 12);
    Rectangle2D r = f.getStringBounds("Hello World! Hello World!", new FontRenderContext(null, RenderingHints.VALUE_TEXT_ANTIALIAS_DEFAULT, RenderingHints.VALUE_FRACTIONALMETRICS_DEFAULT));
    System.out.println("(" + r.getWidth() + ", " + r.getHeight() + ")"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-14T05:56:38.380

我需要在调用 paintComponent 之前获取字符串的长度和宽度，以便我可以将封闭面板的大小调整为文本尺寸。这些技术都没有提供足够的宽度，而且我没有可用的 Graphics 对象。我通过将字体设置为“等宽”解决了这个问题。

# php - 如何使用 php 从课程中取消注册用户

> ID：13345713
> 
> 赞同：1
> 
> 时间：2012-11-12T14:42:59.230
> 
> 标签：php, moodle

使用`Moodle 1.9`，我已经成功地能够通过 php 注册用户

```
$user   = get_record("user", "id", $mqval['id']);
$course = get_record("course", "id", $cid);

if ( ! enrol_into_course($course, $user, 'manuel')) { 

} else {
  //echo 'success';
} 
```

现在我想以同样的方式取消注册用户。我尝试使用`unenrol_user`，但没有用。我也尝试过`role_unassign`，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:59:09.087

```
//get instance that can unenrol
$enrols = enrol_get_plugins(true);
$enrolinstances = enrol_get_instances($courseid, true);
$unenrolled = false;
foreach ($enrolinstances as $instance) {
    if (!$unenrolled and $enrols[$instance->enrol]->allow_unenrol($instance)) {
        $unenrolinstance = $instance;
        $unenrolled = true;
    }
}

//unenrol the user in every course he's in
$enrolledusercourses = enrol_get_users_courses($userid);
foreach ($enrolledcourses as $course) {
    //unenrol the user
    $enrols[$unenrolinstance->enrol]->unenrol_user($unenrolinstance, $userid, $roleid);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T03:37:10.903

我已经修改了上面的代码及其工作。

```
//unenrol the user in every course he's in
 $enrols = enrol_get_plugins(true);

$enrolledusercourses = enrol_get_users_courses($user->id);

foreach ($enrolledusercourses as $course) {
    //unenrol the user
    $courseid = $course->id;

    $enrolinstances = enrol_get_instances($courseid, true);
    $unenrolled = false;

    foreach ($enrolinstances as $instance) {
        if (!$unenrolled and $enrols[$instance->enrol]->allow_unenrol($instance)) {
            $unenrolinstance = $instance;
            $unenrolled = true;
        }
    }

    $enrols[$unenrolinstance->enrol]->unenrol_user($unenrolinstance, $user->id, $user->rollid);
} 
```

# javascript - 从父文档（在 iframe 之外）访问存储在 .data() 中的 jQuery 对象

> ID：13345716
> 
> 赞同：0
> 
> 时间：2012-11-12T14:43:31.277
> 
> 标签：javascript, jquery, dom

我正在寻找一种方法来获取使用 jQuery 的- 方法从存储它`.data()`的 -context 之外存储的值（CodeMirror-instance） `document`。

我的情况是我有一个带有 CodeMirror 实例的 jQuery 对话框。我正在尝试创建一个 ajax 保存函数，但是当提交转换后的 textarea 时，CodeMirror 提供了一个回调函数，它将当前内容再次放入 textarea。

我需要 CodeMirror 的存储实例`.data()`来执行回调手册，以便我可以开始处理内容。这可以实现吗？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:06:04.473

我已经使用 AJAX 保存解决方案解决了我的问题，因此我不再需要访问该对象。

# android - 将 Swarm 与 Libgdx 集成

> ID：13345718
> 
> 赞同：1
> 
> 时间：2012-11-12T14:43:42.397
> 
> 标签：android, integration, libgdx

我希望将 Swarm 高分与我的游戏集成，该游戏基于 Mario zechner 的《开始的 Android 游戏》一书中概述的游戏框架的修改版本。

问题是我的比赛由两半组成。一个是包含活动和所有后台开放 gl 代码的游戏框架。该框架作为 jar 添加到我的游戏中。所以我不能在框架的清单中引用 Swarm，因为它不存在。游戏的清单是使用的清单。我尝试按照使 Swarm 与 libgdx 一起工作的步骤进行操作，但这不起作用。我在运行时遇到类未找到错误。有人有什么想法吗？谢谢

**编辑**：由于我的代表太低，无法发布错误的屏幕截图。但错误说：

```
java.lang.RuntimeException: Unable to instatiate activity ComponentInfo{com.MYSTUFF/com.MYSTUFF.FartJumper 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:16:50.440

当类加载器无法找到类时，会抛出未找到类异常。检查以确保您的类都正确命名并在清单 xml 文件中引用。

# c# - MEF caliburn 微型

> ID：13345719
> 
> 赞同：0
> 
> 时间：2012-11-12T14:43:46.097
> 
> 标签：c#, dependency-injection, mef

我撞到了一堵墙。我添加了另一个具有服务类的程序集的引用。因此，尽管 MEF 会有所帮助（但不会），但我没有创建一个新实例。我做了类似于 HelloScreens 示例的事情。以下视图模型也接受一个包含模型的属性。（工作人员）

```
public class StaffFormViewModel : Screen
{
    [Import]
    public StaffService staffService { get; set; } 
```

显然这不起作用，因为该类不是由 MEF 构建的。但即使我想用 mef 构建它，我也应该创建多个实例，所以我应该选择**NonShared**。但人们说它很慢。Caliburn 微示例添加了类似的内容以创建新实例。这需要每件事 5 行代码。

```
batch.AddExportedValue<Func<PreferencesCategoriesFormViewModel>>(
    () => container.GetExportedValue<PreferencesCategoriesFormViewModel>()); 
```

问题是，虽然我可以使用它，但如果我想在构造函数中提供一个模型类，我不能，因为它是由 MEF 构造的。我应该手动设置属性。我想要的只是注入所需的服务。这对mef不可能吗？我是否应该将容器公开静态以便我可以引用它并调用 compose？请帮忙 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T23:50:19.257

您提供的示例只是创建一个返回新实例的工厂`PreferencesCategoriesViewModel`。他们使用内置的委托类型`Func`来保存他们创建新的工厂接口，以及需要引用容器的接口实现。

因此，如果您希望通过 MEF 实例化视图模型，那么您可以：

1.  如果您只需要视图模型的单个实例，则可以通过构造函数注入将其注入父视图模型，并让 MEF 实例化它
2.  如果您需要控制视图模型的实例化，或者您需要实例化视图模型的多个实例，那么您可以将视图模型工厂类型注入父视图模型

如果您要使用视图模型工厂，那么您可以：

1.  `Func`使用如上所示的内置委托类型，您始终可以使用`Func`具有一个或多个输入参数的其他类型之一，因为您的子视图模型需要数据
2.  创建特定的工厂接口和具体实现，并将其注册到容器中
3.  创建一个通用视图模型工厂并注入它

有关选项 3 的示例，请参阅[http://pglazkov.blogspot.co.uk/2011/04/mvvm-with-mef-viewmodelfactory.html](http://pglazkov.blogspot.co.uk/2011/04/mvvm-with-mef-viewmodelfactory.html)。

你会注意到他的视图模型工厂有一个对 MEF 容器的引用，他实际上是通过 MEF 解析的。因此，您的容器需要自行注册。

# android - 使用 NDK 将 cURL 移植到 Android

> ID：13345725
> 
> 赞同：1
> 
> 时间：2012-11-12T14:44:07.377
> 
> 标签：android, curl, android-ndk, cross-compiling

祝你有美好的一天。我目前正在努力将 cURL 移植到我的 Android 应用程序中 - 许多主题确实谈到了这一点，但没有一个帖子或教程或任何明确说明该做什么或根本不工作的东西。

我确实拥有所需的每一个工具，拥有最新版本的 cURL (7.28.0)。我尝试使用交叉编译和工具链（效果很好的部分）来做到这一点，但是当我尝试配置 curl-7.28.0 时，`./configure --host=arm-linux-androideabi`（或任何通过的参数）返回以下错误：

```
./configure: line 20: $'\r' : unknown command
./configure: line 35: Syntax error near unexpected token « newline »
'/configure: line 35: `     ;; 
```

如果有人已经经历过这些并且确实记得他所遵循的步骤或知道我做错了什么，如果你能帮助我可怜的灵魂，那将是一种祝福！提前致谢。

*注意：我正在使用 Cygwin。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:47:25.177

`configure`在正在读取的任何文件中看起来都像是换行符问题。在 Windows 上，文本文件中的行以 CR/LF (\r\n) 终止 - 许多 Unixy 工具对此感到窒息。

Visual Studio 和其他工具可以重新编码行终止。打开一个文件，File\Advanced Save Options，选择Unix line format，然后保存。

在 *nix 上有一个名为的工具`dos2unix`可以做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:50:19.537

由于您使用的是 Cygwin，我怀疑您已经将所有换行符转换为 windows 格式以使其正常工作：

似乎`configure`只有`\r`或所谓的“回车”作为换行符。这实际上是 OSX 使用的符号。大多数 *nixes 只使用一个换行符来工作 ( `\n`)。只有 Windows 需要两者：“回车”和换行符：例如`\r\n`.

您可以使用任何专业的文本编辑器来更改它，例如[notepad++](http://notepad-plus-plus.org/)。

# javascript - 调用方法是给我代码而不是值（Javascript）

> ID：13345727
> 
> 赞同：-1
> 
> 时间：2012-11-12T14:44:11.740
> 
> 标签：javascript, object, methods, console

基本上我已经创建了一个对象，该对象使用一种方法将对象中的多个属性添加在一起。但是当我尝试将该方法调用到控制台日志时，它会向我发出代码（这是一个 if 语句），而不是我希望它返回的值，所以我很困惑！为什么会这样？下面的代码：

```
var Granite = function(ty, gr, th, wi, le, ed, ad){
    this.type = ty;
    this.group = gr;
    this.thickness = th;
    this.width = wi;
    this.length = le;
    this.edgeProfile = ed;
    this.addOns = ad;
    this.groupPrice = function(){
        if (thickness === 20){
            switch(group)
            {
            case 1:
              return 160;
              break;
            case 2:
              return 194;
              break;
            case 3:
              return 244;
              break;
            case 4:
              return 288;
              break;
            case 5:
              return 336;
              break;
            case 6:
              return 380;
              break;
            default:
              return 380;
            }
        }else{
            switch(group)
            {
            case 1:
              return 200;
              break;
            case 2:
              return 242;
              break;
            case 3:
              return 305;
              break;
            case 4:
              return 360;
              break;
            case 5:
              return 420;
              break;
            case 6:
              return 475;
              break;
            default:
              return 475;
            }
        }   
    }
    this.price = function(){
        if(length <= 2000 && length > 1000){
            return ((edgeProfile + groupPrice)*2) - addOns;
        }else if(length <= 3000 && length > 2000){
            return ((edgeProfile + groupPrice)*3) - addOns;         
        }else if(length <= 4000 && length > 3000){
            return ((edgeProfile + groupPrice)*4) - addOns;         
        }else if(length <= 5000 && length > 4000){
            return ((edgeProfile + groupPrice)*5) - addOns;         
        }
    }
}

var granite1 = new Granite("Rosa Porrino", 1, 30, 400, 3200, 30.05, 86.18);

console.log(granite1.groupPrice); 
```

它将 groupPrice 方法中的完整 if 语句返回给我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T14:46:24.360

您不是在调用该方法，而是向控制台、log() 提供函数参考。在 JavaScript 中，您需要使用 '()' 来调用函数。

这肯定会奏效`console.log(granite1.groupPrice());`

在this.price旁边

使用 `this.groupPrice()`. 代替`groupPrice`

修改了这个，价格方法

```
 this.price = function(){
        if(length <= 2000 && length > 1000){
            return ((this.edgeProfile + this.groupPrice())*2) - addOns;
        }else if(length <= 3000 && length > 2000){
            return ((this.edgeProfile + this.groupPrice())*3) - addOns;         
        }else if(length <= 4000 && length > 3000){
            return ((this.edgeProfile + this.groupPrice())*4) - addOns;         
        }else if(length <= 5000 && length > 4000){
            return ((this.edgeProfile + this.groupPrice())*5) - addOns;         
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T14:46:19.950

如果您正在调用该函数，请附加 () 否则您只是在引用该函数。

# html - 将表单保存在本地存储中

> ID：13345733
> 
> 赞同：1
> 
> 时间：2012-11-12T14:44:27.603
> 
> 标签：html, forms, local-storage

所以，我在一个网站上工作，我需要保存一些它在表单上引入的数据。这个想法是保存这些数据以供以后查询，就像表单的“存档”一样。没有php，没有服务器端，我需要全部在本地制作。有没有办法管理它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:06:23.040

你可以尝试这样的事情：

JS

```
//first check to see how many form records exist, if none set to 0 in storage
if (!localStorage.getItem('forms')) {
    localStorage.setItem('forms', 0);
}
else {
    forms = localStorage.getItem('forms');
}

//increment to the next form entry
forms++;

//save the form data to localStorage
localStorage.setItem('form.' + forms + '.firstName', document.getElementById('firstName'));

//lastly, save the number of forms to localStorage
localStorage.setItem('forms', forms); 
```

HTML

```
<input type="text" id="firstName" /> 
```

这将产生一个`localStorage`标记为*form.1.firstName*的记录。输出只是对表单记录数量的另一个简单检查，并循环遍历迭代。

# eclipse - 启动 gwt 时的编译器错误：使用 gwt-maven-plugin 编译

> ID：13345737
> 
> 赞同：4
> 
> 时间：2012-11-12T14:44:44.177
> 
> 标签：eclipse, gwt, maven, m2eclipse, gwt-maven-plugin

我正在尝试将 gwt-project 迁移到 maven 几天，但一直遇到问题。我尝试遵循不同的指南并尝试了不同的 pom 配置，但没有让它工作。目前，它是这样的：

*   当我运行 gwt:compile 时，我得到`[ERROR] Line 8: The import de.bml.web.versandanzeige.server.model.Zyklus cannot be resolved`了 ，这只是我的包中的众多类之一。该错误仅针对此类显示。我将在下面发布完整的日志

完整的错误日志，带有 -e 选项：

```
[INFO] Error stacktraces are turned on.
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Versandanzeige_Web 1.0.2-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- gwt-maven-plugin:2.5.0:compile (default-cli) @ Versandanzeige_Web ---
[INFO] Compiling module de.bml.web.versandanzeige.Versandanzeige_Web
[INFO]    Validating units:
[INFO]       Ignored 3 units with compilation errors in first pass.
[INFO] Compile with -strict or with -logLevel set to TRACE or DEBUG to see all errors.
[INFO]    Computing all possible rebind results for 'de.bml.web.versandanzeige.client.services.KostenstelleService'
[INFO]       Rebinding de.bml.web.versandanzeige.client.services.KostenstelleService
[INFO]          Checking rule <generate-with class='com.google.gwt.user.rebind.rpc.ServiceInterfaceProxyGenerator'/>
[INFO]             [ERROR] Errors in 'file:/home/icarus/git/BML-connect/Versandanzeige_Web/src/main/java/de/bml/web/versandanzeige/client/dto/ZyklusDTO.java'
[INFO]                [ERROR] Line 8: The import de.bml.web.versandanzeige.server.model.Zyklus cannot be resolved
[INFO]                [ERROR] Line 74: Zyklus cannot be resolved
[INFO]                [ERROR] Line 77: Zyklus cannot be resolved
[INFO]                [ERROR] Line 80: Zyklus cannot be resolved
[INFO]                [ERROR] Line 83: Zyklus cannot be resolved
[INFO]                [ERROR] Line 86: Zyklus cannot be resolved
[INFO]             [ERROR] Unable to find type 'de.bml.web.versandanzeige.client.services.KostenstelleService'
[INFO]                [ERROR] Hint: Previous compiler errors may have made this type unavailable
[INFO]                [ERROR] Hint: Check the inheritance chain from your module; it may not be inheriting a required module or a module may not be adding its source path entries properly
             ... all places where Zyklus is used follow ...

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 9.406s
[INFO] Finished at: Mon Nov 12 15:27:39 CET 2012
[INFO] Final Memory: 13M/168M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:gwt-maven-plugin:2.5.0:compile (default-cli) on project Versandanzeige_Web: Command [[
[ERROR] /bin/sh -c /usr/java/jdk1.7.0_07/jre/bin/java -Xmx512m -classpath /home/icarus/git/BML-connect/Versandanzeige_Web/src/main/webapp/WEB-INF/classes:/home/icarus/git/BML-connect/Versandanzeige_Web/src/main/java:/home/icarus/git/BML-connect/Versandanzeige_Web/src/main/resources:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-plugin-api/3.2/sonar-plugin-api-3.2.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-check-api/3.2/sonar-check-api-3.2.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-colorizer/3.2/sonar-colorizer-3.2.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-channel/3.2/sonar-channel-3.2.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-duplications/3.2/sonar-duplications-3.2.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-graph/3.2/sonar-graph-3.2.jar:/home/icarus/.m2/repository/commons-lang/commons-lang/2.6/commons-lang-2.6.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-squid/3.2/sonar-squid-3.2.jar:/home/icarus/.m2/repository/commons-io/commons-io/2.0.1/commons-io-2.0.1.jar:/home/icarus/.m2/repository/org/picocontainer/picocontainer/2.14.1/picocontainer-2.14.1.jar:/home/icarus/.m2/repository/org/hibernate/hibernate-annotations/3.4.0.GA/hibernate-annotations-3.4.0.GA.jar:/home/icarus/.m2/repository/org/hibernate/hibernate-commons-annotations/3.1.0.GA/hibernate-commons-annotations-3.1.0.GA.jar:/home/icarus/.m2/repository/com/google/guava/guava/10.0.1/guava-10.0.1.jar:/home/icarus/.m2/repository/com/google/code/findbugs/jsr305/1.3.9/jsr305-1.3.9.jar:/home/icarus/.m2/repository/commons-configuration/commons-configuration/1.6/commons-configuration-1.6.jar:/home/icarus/.m2/repository/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar:/home/icarus/.m2/repository/commons-digester/commons-digester/1.8/commons-digester-1.8.jar:/home/icarus/.m2/repository/commons-beanutils/commons-beanutils/1.7.0/commons-beanutils-1.7.0.jar:/home/icarus/.m2/repository/commons-codec/commons-codec/1.4/commons-codec-1.4.jar:/home/icarus/.m2/repository/jfree/jfreechart/1.0.9/jfreechart-1.0.9.jar:/home/icarus/.m2/repository/jfree/jcommon/1.0.12/jcommon-1.0.12.jar:/home/icarus/.m2/repository/org/slf4j/slf4j-api/1.6.2/slf4j-api-1.6.2.jar:/home/icarus/.m2/repository/org/slf4j/jcl-over-slf4j/1.6.2/jcl-over-slf4j-1.6.2.jar:/home/icarus/.m2/repository/org/slf4j/log4j-over-slf4j/1.6.2/log4j-over-slf4j-1.6.2.jar:/home/icarus/.m2/repository/com/thoughtworks/xstream/xstream/1.3.1/xstream-1.3.1.jar:/home/icarus/.m2/repository/xpp3/xpp3/1.1.3.3/xpp3-1.1.3.3.jar:/home/icarus/.m2/repository/org/codehaus/woodstox/woodstox-core-lgpl/4.0.4/woodstox-core-lgpl-4.0.4.jar:/home/icarus/.m2/repository/stax/stax-api/1.0.1/stax-api-1.0.1.jar:/home/icarus/.m2/repository/org/codehaus/woodstox/stax2-api/3.0.1/stax2-api-3.0.1.jar:/home/icarus/.m2/repository/org/codehaus/staxmate/staxmate/2.0.0/staxmate-2.0.0.jar:/home/icarus/.m2/repository/xerces/xercesImpl/2.8.1/xercesImpl-2.8.1.jar:/home/icarus/.m2/repository/xalan/xalan/2.7.1/xalan-2.7.1.jar:/home/icarus/.m2/repository/xalan/serializer/2.7.1/serializer-2.7.1.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-gwt-api/2.11/sonar-gwt-api-2.11.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-ws-client/2.11/sonar-ws-client-2.11.jar:/home/icarus/.m2/repository/com/googlecode/json-simple/json-simple/1.1/json-simple-1.1.jar:/home/icarus/.m2/repository/com/google/gwt/gwt-incubator/2.0.1/gwt-incubator-2.0.1.jar:/home/icarus/.m2/repository/com/google/gwt/gwt-user/2.5.0/gwt-user-2.5.0.jar:/home/icarus/.m2/repository/javax/validation/validation-api/1.0.0.GA/validation-api-1.0.0.GA.jar:/home/icarus/.m2/repository/javax/validation/validation-api/1.0.0.GA/validation-api-1.0.0.GA-sources.jar:/home/icarus/.m2/repository/org/json/json/20090211/json-20090211.jar:/home/icarus/.m2/repository/com/google/collections/google-collections/1.0/google-collections-1.0.jar:/home/icarus/.m2/repository/org/hibernate/hibernate-entitymanager/3.5.3-Final/hibernate-entitymanager-3.5.3-Final.jar:/home/icarus/.m2/repository/org/hibernate/hibernate-core/3.5.3-Final/hibernate-core-3.5.3-Final.jar:/home/icarus/.m2/repository/antlr/antlr/2.7.6/antlr-2.7.6.jar:/home/icarus/.m2/repository/javax/transaction/jta/1.1/jta-1.1.jar:/home/icarus/.m2/repository/cglib/cglib/2.2/cglib-2.2.jar:/home/icarus/.m2/repository/asm/asm/3.1/asm-3.1.jar:/home/icarus/.m2/repository/javassist/javassist/3.9.0.GA/javassist-3.9.0.GA.jar:/home/icarus/.m2/repository/org/hibernate/javax/persistence/hibernate-jpa-2.0-api/1.0.0.Final/hibernate-jpa-2.0-api-1.0.0.Final.jar:/home/icarus/.m2/repository/org/apache/geronimo/specs/geronimo-jta_1.1_spec/1.1/geronimo-jta_1.1_spec-1.1.jar:/home/icarus/.m2/repository/log4j/log4j/1.2.14/log4j-1.2.14.jar:/home/icarus/.m2/repository/dom4j/dom4j/1.6.1/dom4j-1.6.1.jar:/home/icarus/.m2/repository/xml-apis/xml-apis/1.0.b2/xml-apis-1.0.b2.jar:/home/icarus/.m2/repository/com/google/gwt/gwt-user/2.5.0/gwt-user-2.5.0.jar:/home/icarus/.m2/repository/com/google/gwt/gwt-dev/2.5.0/gwt-dev-2.5.0.jar com.google.gwt.dev.Compiler -logLevel INFO -style PRETTY -war /home/icarus/git/BML-connect/Versandanzeige_Web/src/main/webapp -localWorkers 4 -XfragmentCount -1 -gen /home/icarus/git/BML-connect/Versandanzeige_Web/target/.generated de.bml.web.versandanzeige.Versandanzeige_Web
[ERROR] ]] failed with status 1
[ERROR] -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:gwt-maven-plugin:2.5.0:compile (default-cli) on project Versandanzeige_Web: Command [[
/bin/sh -c /usr/java/jdk1.7.0_07/jre/bin/java -Xmx512m -classpath /home/icarus/git/BML-connect/Versandanzeige_Web/src/main/webapp/WEB-INF/classes:/home/icarus/git/BML-connect/Versandanzeige_Web/src/main/java:/home/icarus/git/BML-connect/Versandanzeige_Web/src/main/resources:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-plugin-api/3.2/sonar-plugin-api-3.2.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-check-api/3.2/sonar-check-api-3.2.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-colorizer/3.2/sonar-colorizer-3.2.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-channel/3.2/sonar-channel-3.2.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-duplications/3.2/sonar-duplications-3.2.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-graph/3.2/sonar-graph-3.2.jar:/home/icarus/.m2/repository/commons-lang/commons-lang/2.6/commons-lang-2.6.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-squid/3.2/sonar-squid-3.2.jar:/home/icarus/.m2/repository/commons-io/commons-io/2.0.1/commons-io-2.0.1.jar:/home/icarus/.m2/repository/org/picocontainer/picocontainer/2.14.1/picocontainer-2.14.1.jar:/home/icarus/.m2/repository/org/hibernate/hibernate-annotations/3.4.0.GA/hibernate-annotations-3.4.0.GA.jar:/home/icarus/.m2/repository/org/hibernate/hibernate-commons-annotations/3.1.0.GA/hibernate-commons-annotations-3.1.0.GA.jar:/home/icarus/.m2/repository/com/google/guava/guava/10.0.1/guava-10.0.1.jar:/home/icarus/.m2/repository/com/google/code/findbugs/jsr305/1.3.9/jsr305-1.3.9.jar:/home/icarus/.m2/repository/commons-configuration/commons-configuration/1.6/commons-configuration-1.6.jar:/home/icarus/.m2/repository/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar:/home/icarus/.m2/repository/commons-digester/commons-digester/1.8/commons-digester-1.8.jar:/home/icarus/.m2/repository/commons-beanutils/commons-beanutils/1.7.0/commons-beanutils-1.7.0.jar:/home/icarus/.m2/repository/commons-codec/commons-codec/1.4/commons-codec-1.4.jar:/home/icarus/.m2/repository/jfree/jfreechart/1.0.9/jfreechart-1.0.9.jar:/home/icarus/.m2/repository/jfree/jcommon/1.0.12/jcommon-1.0.12.jar:/home/icarus/.m2/repository/org/slf4j/slf4j-api/1.6.2/slf4j-api-1.6.2.jar:/home/icarus/.m2/repository/org/slf4j/jcl-over-slf4j/1.6.2/jcl-over-slf4j-1.6.2.jar:/home/icarus/.m2/repository/org/slf4j/log4j-over-slf4j/1.6.2/log4j-over-slf4j-1.6.2.jar:/home/icarus/.m2/repository/com/thoughtworks/xstream/xstream/1.3.1/xstream-1.3.1.jar:/home/icarus/.m2/repository/xpp3/xpp3/1.1.3.3/xpp3-1.1.3.3.jar:/home/icarus/.m2/repository/org/codehaus/woodstox/woodstox-core-lgpl/4.0.4/woodstox-core-lgpl-4.0.4.jar:/home/icarus/.m2/repository/stax/stax-api/1.0.1/stax-api-1.0.1.jar:/home/icarus/.m2/repository/org/codehaus/woodstox/stax2-api/3.0.1/stax2-api-3.0.1.jar:/home/icarus/.m2/repository/org/codehaus/staxmate/staxmate/2.0.0/staxmate-2.0.0.jar:/home/icarus/.m2/repository/xerces/xercesImpl/2.8.1/xercesImpl-2.8.1.jar:/home/icarus/.m2/repository/xalan/xalan/2.7.1/xalan-2.7.1.jar:/home/icarus/.m2/repository/xalan/serializer/2.7.1/serializer-2.7.1.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-gwt-api/2.11/sonar-gwt-api-2.11.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-ws-client/2.11/sonar-ws-client-2.11.jar:/home/icarus/.m2/repository/com/googlecode/json-simple/json-simple/1.1/json-simple-1.1.jar:/home/icarus/.m2/repository/com/google/gwt/gwt-incubator/2.0.1/gwt-incubator-2.0.1.jar:/home/icarus/.m2/repository/com/google/gwt/gwt-user/2.5.0/gwt-user-2.5.0.jar:/home/icarus/.m2/repository/javax/validation/validation-api/1.0.0.GA/validation-api-1.0.0.GA.jar:/home/icarus/.m2/repository/javax/validation/validation-api/1.0.0.GA/validation-api-1.0.0.GA-sources.jar:/home/icarus/.m2/repository/org/json/json/20090211/json-20090211.jar:/home/icarus/.m2/repository/com/google/collections/google-collections/1.0/google-collections-1.0.jar:/home/icarus/.m2/repository/org/hibernate/hibernate-entitymanager/3.5.3-Final/hibernate-entitymanager-3.5.3-Final.jar:/home/icarus/.m2/repository/org/hibernate/hibernate-core/3.5.3-Final/hibernate-core-3.5.3-Final.jar:/home/icarus/.m2/repository/antlr/antlr/2.7.6/antlr-2.7.6.jar:/home/icarus/.m2/repository/javax/transaction/jta/1.1/jta-1.1.jar:/home/icarus/.m2/repository/cglib/cglib/2.2/cglib-2.2.jar:/home/icarus/.m2/repository/asm/asm/3.1/asm-3.1.jar:/home/icarus/.m2/repository/javassist/javassist/3.9.0.GA/javassist-3.9.0.GA.jar:/home/icarus/.m2/repository/org/hibernate/javax/persistence/hibernate-jpa-2.0-api/1.0.0.Final/hibernate-jpa-2.0-api-1.0.0.Final.jar:/home/icarus/.m2/repository/org/apache/geronimo/specs/geronimo-jta_1.1_spec/1.1/geronimo-jta_1.1_spec-1.1.jar:/home/icarus/.m2/repository/log4j/log4j/1.2.14/log4j-1.2.14.jar:/home/icarus/.m2/repository/dom4j/dom4j/1.6.1/dom4j-1.6.1.jar:/home/icarus/.m2/repository/xml-apis/xml-apis/1.0.b2/xml-apis-1.0.b2.jar:/home/icarus/.m2/repository/com/google/gwt/gwt-user/2.5.0/gwt-user-2.5.0.jar:/home/icarus/.m2/repository/com/google/gwt/gwt-dev/2.5.0/gwt-dev-2.5.0.jar com.google.gwt.dev.Compiler -logLevel INFO -style PRETTY -war /home/icarus/git/BML-connect/Versandanzeige_Web/src/main/webapp -localWorkers 4 -XfragmentCount -1 -gen /home/icarus/git/BML-connect/Versandanzeige_Web/target/.generated de.bml.web.versandanzeige.Versandanzeige_Web
]] failed with status 1
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:322)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:158)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.codehaus.mojo.gwt.shell.ForkedProcessExecutionException: Command [[
/bin/sh -c /usr/java/jdk1.7.0_07/jre/bin/java -Xmx512m -classpath /home/icarus/git/BML-connect/Versandanzeige_Web/src/main/webapp/WEB-INF/classes:/home/icarus/git/BML-connect/Versandanzeige_Web/src/main/java:/home/icarus/git/BML-connect/Versandanzeige_Web/src/main/resources:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-plugin-api/3.2/sonar-plugin-api-3.2.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-check-api/3.2/sonar-check-api-3.2.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-colorizer/3.2/sonar-colorizer-3.2.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-channel/3.2/sonar-channel-3.2.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-duplications/3.2/sonar-duplications-3.2.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-graph/3.2/sonar-graph-3.2.jar:/home/icarus/.m2/repository/commons-lang/commons-lang/2.6/commons-lang-2.6.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-squid/3.2/sonar-squid-3.2.jar:/home/icarus/.m2/repository/commons-io/commons-io/2.0.1/commons-io-2.0.1.jar:/home/icarus/.m2/repository/org/picocontainer/picocontainer/2.14.1/picocontainer-2.14.1.jar:/home/icarus/.m2/repository/org/hibernate/hibernate-annotations/3.4.0.GA/hibernate-annotations-3.4.0.GA.jar:/home/icarus/.m2/repository/org/hibernate/hibernate-commons-annotations/3.1.0.GA/hibernate-commons-annotations-3.1.0.GA.jar:/home/icarus/.m2/repository/com/google/guava/guava/10.0.1/guava-10.0.1.jar:/home/icarus/.m2/repository/com/google/code/findbugs/jsr305/1.3.9/jsr305-1.3.9.jar:/home/icarus/.m2/repository/commons-configuration/commons-configuration/1.6/commons-configuration-1.6.jar:/home/icarus/.m2/repository/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar:/home/icarus/.m2/repository/commons-digester/commons-digester/1.8/commons-digester-1.8.jar:/home/icarus/.m2/repository/commons-beanutils/commons-beanutils/1.7.0/commons-beanutils-1.7.0.jar:/home/icarus/.m2/repository/commons-codec/commons-codec/1.4/commons-codec-1.4.jar:/home/icarus/.m2/repository/jfree/jfreechart/1.0.9/jfreechart-1.0.9.jar:/home/icarus/.m2/repository/jfree/jcommon/1.0.12/jcommon-1.0.12.jar:/home/icarus/.m2/repository/org/slf4j/slf4j-api/1.6.2/slf4j-api-1.6.2.jar:/home/icarus/.m2/repository/org/slf4j/jcl-over-slf4j/1.6.2/jcl-over-slf4j-1.6.2.jar:/home/icarus/.m2/repository/org/slf4j/log4j-over-slf4j/1.6.2/log4j-over-slf4j-1.6.2.jar:/home/icarus/.m2/repository/com/thoughtworks/xstream/xstream/1.3.1/xstream-1.3.1.jar:/home/icarus/.m2/repository/xpp3/xpp3/1.1.3.3/xpp3-1.1.3.3.jar:/home/icarus/.m2/repository/org/codehaus/woodstox/woodstox-core-lgpl/4.0.4/woodstox-core-lgpl-4.0.4.jar:/home/icarus/.m2/repository/stax/stax-api/1.0.1/stax-api-1.0.1.jar:/home/icarus/.m2/repository/org/codehaus/woodstox/stax2-api/3.0.1/stax2-api-3.0.1.jar:/home/icarus/.m2/repository/org/codehaus/staxmate/staxmate/2.0.0/staxmate-2.0.0.jar:/home/icarus/.m2/repository/xerces/xercesImpl/2.8.1/xercesImpl-2.8.1.jar:/home/icarus/.m2/repository/xalan/xalan/2.7.1/xalan-2.7.1.jar:/home/icarus/.m2/repository/xalan/serializer/2.7.1/serializer-2.7.1.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-gwt-api/2.11/sonar-gwt-api-2.11.jar:/home/icarus/.m2/repository/org/codehaus/sonar/sonar-ws-client/2.11/sonar-ws-client-2.11.jar:/home/icarus/.m2/repository/com/googlecode/json-simple/json-simple/1.1/json-simple-1.1.jar:/home/icarus/.m2/repository/com/google/gwt/gwt-incubator/2.0.1/gwt-incubator-2.0.1.jar:/home/icarus/.m2/repository/com/google/gwt/gwt-user/2.5.0/gwt-user-2.5.0.jar:/home/icarus/.m2/repository/javax/validation/validation-api/1.0.0.GA/validation-api-1.0.0.GA.jar:/home/icarus/.m2/repository/javax/validation/validation-api/1.0.0.GA/validation-api-1.0.0.GA-sources.jar:/home/icarus/.m2/repository/org/json/json/20090211/json-20090211.jar:/home/icarus/.m2/repository/com/google/collections/google-collections/1.0/google-collections-1.0.jar:/home/icarus/.m2/repository/org/hibernate/hibernate-entitymanager/3.5.3-Final/hibernate-entitymanager-3.5.3-Final.jar:/home/icarus/.m2/repository/org/hibernate/hibernate-core/3.5.3-Final/hibernate-core-3.5.3-Final.jar:/home/icarus/.m2/repository/antlr/antlr/2.7.6/antlr-2.7.6.jar:/home/icarus/.m2/repository/javax/transaction/jta/1.1/jta-1.1.jar:/home/icarus/.m2/repository/cglib/cglib/2.2/cglib-2.2.jar:/home/icarus/.m2/repository/asm/asm/3.1/asm-3.1.jar:/home/icarus/.m2/repository/javassist/javassist/3.9.0.GA/javassist-3.9.0.GA.jar:/home/icarus/.m2/repository/org/hibernate/javax/persistence/hibernate-jpa-2.0-api/1.0.0.Final/hibernate-jpa-2.0-api-1.0.0.Final.jar:/home/icarus/.m2/repository/org/apache/geronimo/specs/geronimo-jta_1.1_spec/1.1/geronimo-jta_1.1_spec-1.1.jar:/home/icarus/.m2/repository/log4j/log4j/1.2.14/log4j-1.2.14.jar:/home/icarus/.m2/repository/dom4j/dom4j/1.6.1/dom4j-1.6.1.jar:/home/icarus/.m2/repository/xml-apis/xml-apis/1.0.b2/xml-apis-1.0.b2.jar:/home/icarus/.m2/repository/com/google/gwt/gwt-user/2.5.0/gwt-user-2.5.0.jar:/home/icarus/.m2/repository/com/google/gwt/gwt-dev/2.5.0/gwt-dev-2.5.0.jar com.google.gwt.dev.Compiler -logLevel INFO -style PRETTY -war /home/icarus/git/BML-connect/Versandanzeige_Web/src/main/webapp -localWorkers 4 -XfragmentCount -1 -gen /home/icarus/git/BML-connect/Versandanzeige_Web/target/.generated de.bml.web.versandanzeige.Versandanzeige_Web
]] failed with status 1
    at org.codehaus.mojo.gwt.shell.AbstractGwtShellMojo$JavaCommand.execute(AbstractGwtShellMojo.java:485)
    at org.codehaus.mojo.gwt.shell.CompileMojo.compile(CompileMojo.java:365)
    at org.codehaus.mojo.gwt.shell.CompileMojo.doExecute(CompileMojo.java:280)
    at org.codehaus.mojo.gwt.shell.AbstractGwtShellMojo.execute(AbstractGwtShellMojo.java:172)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 19 more
[ERROR] 
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

我的 pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<repositories>
    <repository>
        <!-- for gwt-incubator -->
        <id>sonar</id>
        <name>Sonar</name>
        <url>http://repository.sonarsource.org/content/repositories/sonar</url>
        <releases>
        </releases>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </repository>
</repositories>

<dependencies>
    <dependency>
        <groupId>org.codehaus.sonar</groupId>
        <artifactId>sonar-plugin-api</artifactId>
        <version>3.2</version>
        <exclusions>
            <exclusion>
                <artifactId>ejb3-persistence</artifactId>
                <groupId>org.hibernate</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.codehaus.sonar</groupId>
        <artifactId>sonar-gwt-api</artifactId>
        <version>2.11</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-servlet</artifactId>
        <version>2.5.0</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-user</artifactId>
        <version>2.5.0</version>
        <scope>provided</scope>
    </dependency>

    <!-- unit tests -->
    <dependency>
        <groupId>org.codehaus.sonar</groupId>
        <artifactId>sonar-testing-harness</artifactId>
        <version>2.11</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.7</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.5.3-Final</version>
    </dependency>
    <dependency>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-jta_1.1_spec</artifactId>
        <version>1.1</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.14</version>
    </dependency>
    <dependency>
        <groupId>dom4j</groupId>
        <artifactId>dom4j</artifactId>
        <version>1.6.1</version>
    </dependency>
</dependencies>
<groupId>de.bml-con</groupId>
<artifactId>Versandanzeige_Web</artifactId>
<packaging>war</packaging>
<version>1.0.2-SNAPSHOT</version>
<build>
    <outputDirectory>src/main/webapp/WEB-INF/classes</outputDirectory>
    <resources>
        <resource>
            <directory>src/main/java</directory>
            <includes>
                <include>**/*.java</include>
                <include>**/*.gwt.xml</include>
            </includes>
        </resource>
        <resource>
            <directory>src/main/resources</directory>
        </resource>
    </resources>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <configuration>
                <webappDirectory>src/main/webapp</webappDirectory>
                <webXml>src/main/webapp/WEB-INF/web.xml</webXml>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>${maven.compiler.source}</source>
                <target>${maven.compiler.target}</target>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-resources-plugin</artifactId>
            <configuration>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-assembly-plugin</artifactId>
            <configuration>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-deploy-plugin</artifactId>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>tomcat-maven-plugin</artifactId>
        </plugin>
        <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <configuration>
                <webAppConfig>
                    <contextPath>/${project.name}</contextPath>
                </webAppConfig>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>gwt-maven-plugin</artifactId>
            <configuration>
                <logLevel>INFO</logLevel>
                <style>PRETTY</style>
                <gwtVersion>2.1.0</gwtVersion>
                <runTarget>de.bml.web.versandanzeige.Versandanzeige_Web/Versandanzeige_Web.html
                </runTarget>
                <modules>
                    <module>de.bml.web.versandanzeige.Versandanzeige_Web</module>
                </modules>
                <copyWebapp>true</copyWebapp>
                <webappDirectory>src/main/webapp</webappDirectory>
            </configuration>
            <executions>
                <execution>
                    <id>gwtcompile</id>
                    <phase>prepare-package</phase>
                    <goals>
                        <goal>compile</goal>
                        <goal>resources</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <!-- manage dependencies -->
        <plugin>
            <artifactId>maven-dependency-plugin</artifactId>
            <configuration>
                <includeTypes>jar</includeTypes>
                <stripVersion>true</stripVersion>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-invoker-plugin</artifactId>
            <executions>
                <execution>
                    <id>copy-deps</id>
                    <phase>compile</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                    <configuration>
                        <projectsDirectory>.</projectsDirectory>
                        <pomIncludes>
                            <pomInclude>pom.xml</pomInclude>
                        </pomIncludes>
                        <streamLogs>true</streamLogs>
                        <goals>
                            <goal>dependency:copy-dependencies</goal>
                        </goals>
                        <encoding>UTF-8</encoding>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

项目结构：

来源：

![在此处输入图像描述](../Images/f8b42e2313ab117cb455a2566889c128.png)

网络应用程序：

![在此处输入图像描述](../Images/77ae63fa04c619e8051af5eb2ecd9d68.png)

这个项目已经在版本控制下，所以我会尽量避免重新开始。

我该如何解决这个问题，让它编译成战争并以调试模式启动？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T19:15:43.913

GWT 101：客户端代码不能引用服务器代码。

进一步来说：

> [信息] [错误] '文件中的错误：/home/icarus/git/BML-connect/Versandanzeige_Web/src/main/java/de/bml/web/versandanzeige/client/dto/ZyklusDTO.java' [信息] [ ERROR] 第 8 行：无法解析导入 de.bml.web.versandanzeige.server.model.Zyklus

并且子包可能在您的`server`中没有对应的（尽管完全可以理解）。请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects#DevGuideDirectoriesPackageConventions](https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects#DevGuideDirectoriesPackageConventions)和[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsClient](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsClient)`<source path="server" />``de/bml/web/versandanzeige/Versandanzeige_Web.gwt.xml`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T18:53:02.747

您的 gwt 模块描述是否丢失（xxx.gwt.xml）？

# xslt - xslt 将 xml 转换为 xml 如何获取实体的属性？

> ID：13345742
> 
> 赞同：0
> 
> 时间：2012-11-12T14:45:02.550
> 
> 标签：xslt

我想用 xstl 将 xml 转换为 naother xml 我有一个实体`<AAA id="e1" ts=" bb">` 如何在我的新 xml 文件中使用属性获取这个实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:54:32.457

该`<xsl:copy-of>`元素可用于完成您所追求的目标。

**当这个 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="/*">
    <xsl:copy-of select="AAA" />
  </xsl:template>

</xsl:stylesheet> 
```

**...针对以下示例 XML 运行：**

```
<t>
  <AAA id="e1" ts=" bb" />
</t> 
```

**...产生了想要的结果：**

```
<?xml version="1.0" encoding="UTF-8"?>
<AAA id="e1" ts=" bb" /> 
```

# android - 第二个应用程序的许可检查

> ID：13345748
> 
> 赞同：0
> 
> 时间：2012-11-12T14:45:24.390
> 
> 标签：android, android-lvl

我有一个试用应用程序，它包含应用程序的漏洞逻辑，我有一个付费应用程序，它只是一个解锁应用程序。在启动试用应用程序时，我检查是否安装了付费应用程序，它将显示付费应用程序内容，否则显示试用内容。（在我的情况下，我不喜欢用户启动付费应用程序。）

现在我想为我的特殊情况添加许可机制，现在我的问题是：是否可以检查付费应用程序是否从我的试用应用程序（内部）获得许可，这将首先启动？（我知道如何检查自己的应用程序。只有一个应用程序）

有没有人对此有提示或概念？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:53:29.613

您可以在付费应用程序中提供一个 IntentFilter，它会向调用者返回一个预定义的值，指示它是否已获得许可，或者您可以将您的付费应用程序变成一个更优雅的 ContentProvider。

# jquery - jsFiddle 说 jQuery 代码不正确，但在我的网站上仍然有效

> ID：13345753
> 
> 赞同：0
> 
> 时间：2012-11-12T14:45:46.017
> 
> 标签：jquery, css, jsfiddle

我在更正这段代码时遇到了麻烦，因为我对 jQuery 的经验很少：

```
$("#msg-button").click(function() {
    $("#msg_alert").removeClass("msg_stop").addClass("msg_play");
    setTimeout(function() {
        $("#msg_alert").removeClass("msg_play").addClass("msg_stop")
    }, 2000);
});​ 
```

问题是，当我使用“不正确的代码”时，我想要的效果会起作用。

这个脚本是我重新启动 CSS3 动画的解决方法。每当用户点击 id`#button`时，id`#msg_alert`就会通过在 class 中播放动画来显示`.msg_play`。动画持续两秒；因此，脚本的下一部分有两秒的延迟，基本上将 id#msg_alert 切换回 class.msg_stop。

我尝试按照 jsFiddle 返回的错误警报，但是在相应地更改代码后，脚本停止工作。（虽然实际上，当我在纠正前两个错误后再次运行 jslint 时，我得到了更多错误，所以我一直在纠正它们，直到 jsFiddle 告诉我我的代码无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:57:56.810

我认为您的代码没有太大问题，指向小提琴的链接会有所帮助。不过，我确实有几个建议。首先，使用计时器变量来防止多次点击问题。像这样：

```
var tmrMsgPlay;
$("#msg-button").click(function(e) {
    $("#msg_alert").removeClass("msg_stop").addClass("msg_play");
    if (tmrMsgPlay != undefined) clearTimeout(tmrMsgPlay);
    tmrMsgPlay = setTimeout(function() {
        $("#msg_alert").removeClass("msg_play").addClass("msg_stop");
    }, 2000);
}); 
```

第二个建议是将 msg_alert 设置为已经有 msg_stop 类，然后使用[jQuery 的 toggleClass](http://api.jquery.com/toggleClass/)，如下所示：

```
//  preset msg_alert to have class 'msg_stop' at start, then use toggleClass
var tmrMsgPlay;
$("#msg-button").click(function(e) {
    if (tmrMsgPlay != undefined) clearTimeout(tmrMsgPlay);
    $("#msg_alert").toggleClass("msg_play msg_stop");
    tmrMsgPlay = setTimeout(function() {
        $("#msg_alert").toggleClass("msg_play msg_stop");
    }, 2000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:58:22.350

JSHint Report /*jshint forin:true, noarg:true, noempty:true, eqeqeq:true, bitwise:true, strict:true, undef:true, used:true, curly:true, browser:true, jquery:true, indent ：4，最大值：50 */

错误：

第 4 行：$("#msg_alert").removeClass("msg_play").addClass("msg_stop") 缺少分号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T14:58:46.820

试试这个：

```
$("#msg-button").click(function() {
    $("#msg_alert").removeClass("msg_stop").addClass("msg_play").delay(2000).removeClass("msg_play").addClass("msg_stop");
}); 
```

# c++ - 从 .lib 文件中去除静态 MFC 依赖项

> ID：13345754
> 
> 赞同：1
> 
> 时间：2012-11-12T14:45:47.420
> 
> 标签：c++, mfc, static

我已经预编译了 .lib 文件并将它们链接到解决方案中的 c++ 项目。构建解决方案时，我收到很多错误消息，例如：“终止已在 msvcrtd.dll 中定义”。我在 Google 上搜索过，这是因为 .lib 文件已经包含静态 MS VC 依赖项，而我的项目将它们用作共享库。我没有这些 .lib 文件的来源，也无法更改项目的 MS VC 依赖项设置。你会建议什么？是否有工具可以从 .lib 文件中删除所有依赖项或做其他事情来解决我的问题？

# .net - .Net 的论文记录

> ID：13345758
> 
> 赞同：1
> 
> 时间：2012-11-12T14:46:00.883
> 
> 标签：.net, database

我最近一直在研究 ruby​​，发现 gem [Papertrail](https://github.com/airblade/paper_trail)是一个了不起的审计和撤销工具。

问题是，对于 .Net 的开发风格是否存在类似的东西？工作中的项目需要变更管理，我无法通过 google fu 找到类似的东西，但肯定有人用类似的方法解决了这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T01:47:38.623

多年后，我又回到了这个话题。我不再使用 .Net 编写，但[RavenDB 存在等效工具](https://www.nuget.org/packages/RavenDB.Bundles.Versioning/)

RavenDB 版本控制包来自：

```
ayende 
```

版本控制包将在对每个文档进行每次更新或删除时为每个文档创建快照。当您需要跟踪文档的历史记录或需要完整的审计跟踪时，它很有用。

这正是我想要的。

# .net - 在 Form_Load 事件 (VB.NET) 之前触发的 Timer Event Tick

> ID：13345761
> 
> 赞同：0
> 
> 时间：2012-11-12T14:46:10.953
> 
> 标签：.net, vb.net, winforms

我有一个带有 Timer 组件的 Windows 表单，默认情况下（设计）计时器已启用，但基于发送到表单的一些参数，我禁用了 form_load 上的计时器。

我面临一个非常奇怪的场景，Timer_Tick 事件有时甚至在 form_load 被触发之前被触发，例如，这发生在应用程序最小化 20 分钟，然后我打开应用程序并尝试打开新表单，尤其是在慢速系统上.

代码如下：

```
'=============== Code of the form with Timer
Public Sub OpenForm(SomeParams)
        'Set Form Properties
        Me.Show() 'Here the event Form_Load fired
End Sub

Private Sub Form_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
  'Some Code ...
  Timer1.Enabled = False/ True 'Based True or false based on parameters
 'Code ...
End Sub

Private Sub Timer1_Tick(sender As System.Object, e As System.EventArgs) Handles Timer1.Tick
  'Code here
  'The code raise error if form load is not fired, because need info from params ...
End Sub

'=============== Code in the calling form (MainForm)
'Calling the Form
dim obj As new Form1  'I think form this line the Timer1_Tick Fired, before load
obj.OpenForm(Params) 
```

当引发异常时，我关闭已处理的异常并尝试再次打开表单，它打开表单时禁用了 Timer1。

我知道解决方案很简单，只需默认禁用计时器，然后根据参数启用，但我想知道为什么 Timer1_Tick 有时会在 OpenForm Sub 和 Form1_Load Sub 之前触发！?

非常感谢您的时间。萨梅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:22:24.270

您的计时器通常使用构造函数创建，并且在实际准备好显示表单之前不会调用 Load 事件。

您应该创建一个自定义构造函数，该构造函数接受您关于是否使用计时器的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T08:48:59.180

您在表单的 InitializeComponent 中声明并初始化计时器，在表单构造函数中调用。这会立即启动您的计时器，然后退出表单构造函数，在表单显示（引发 Form_Load 事件）之前，分配的时间间隔过去。
如果空闲应用程序在磁盘上的虚拟内存中被交换掉，这种情况可能会增加。在物理内存中重新加载需要更多时间。
您可以测试我的假设降低间隔值。
您应该在表单加载事件之前获得更多 Timer_Tick 事件。

# c# - 获取计算机的用户名

> ID：13345762
> 
> 赞同：0
> 
> 时间：2012-11-12T14:46:11.140
> 
> 标签：c#, asp.net, credentials

我正在使用这行代码来获取计算机登录的用户名

```
 String windosUser = System.Web.HttpContext.Current.User.Identity.Name; 
```

但我得到的结果是字符串是空字符串。

我想查看登录计算机的人的姓名，而不是计算机的实际姓名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:04:36.620

尝试这个 ：-

```
var username = this.Context.Request.LogonUserIdentity.Name; 
```

如果这不起作用，我认为它一定是您的 IIS 设置，因为它对我来说很好。

# android - 无法恢复活动 Java lang *NPE

> ID：13345765
> 
> 赞同：0
> 
> 时间：2012-11-12T14:46:17.383
> 
> 标签：android, android-activity

我有一些数字`ArrayList`。当活动恢复时，我将列表中的值与 a 的内容进行比较`TextView`，如果它们相等，我将数据（数字）从`ArrayList`to设置为`EditText`，我得到 NPE。

到目前为止，我正在尝试这段代码：

```
public void onResume(){
    super.onResume();
    for (MenuInputClass mic2 : results) {
        TextView namamenu2=(TextView)findViewById(R.id.nama_menu2);
        String comp = namamenu2.getText().toString();               

        if (mic2.getNama_menu().equals(comp)) {
            String jml_exis=mic2.getJumlah_menu();                  
            int jml_exis_toint = Integer.parseInt(jml_exis);
            jumlahmenu.setText(String.valueOf(jml_exis_toint));
        }       

    }
} 
```

我的`MenuInputClass`：

```
public class MenuInputClass {

    private String nama_menu;
    private String jumlah_menu;

    public void setNama_menu(String nama_menu) {
       this.nama_menu=nama_menu;
    }

    public String getNama_menu() {
        return (nama_menu);
    }

    public void setJumlah_menu(String jumlah_menu) {
        this.jumlah_menu=jumlah_menu;
    }

    public String getJumlah_menu() {
        return (jumlah_menu);
    }
} 
```

日志输出：

```
11-12 21:42:56.618: E/AndroidRuntime(19586): FATAL EXCEPTION: main
11-12 21:42:56.618: E/AndroidRuntime(19586): java.lang.RuntimeException: Unable to resume activity {com.example.aplikasipemesananmenu/com.example.aplikasipemesananmenu.Appetizer_Activity}: java.lang.NullPointerException
11-12 21:42:56.618: E/AndroidRuntime(19586): at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2124)
11-12 21:42:56.618: E/AndroidRuntime(19586): at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2139)
11-12 21:42:56.618: E/AndroidRuntime(19586): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1672)
11-12 21:42:56.618: E/AndroidRuntime(19586): at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-12 21:42:56.618: E/AndroidRuntime(19586): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
11-12 21:42:56.618: E/AndroidRuntime(19586): at android.os.Handler.dispatchMessage(Handler.java:99)
11-12 21:42:56.618: E/AndroidRuntime(19586): at android.os.Looper.loop(Looper.java:130)
11-12 21:42:56.618: E/AndroidRuntime(19586): at android.app.ActivityThread.main(ActivityThread.java:3693)
11-12 21:42:56.618: E/AndroidRuntime(19586): at java.lang.reflect.Method.invokeNative(Native Method)
11-12 21:42:56.618: E/AndroidRuntime(19586): at java.lang.reflect.Method.invoke(Method.java:507)
11-12 21:42:56.618: E/AndroidRuntime(19586): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
11-12 21:42:56.618: E/AndroidRuntime(19586): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
11-12 21:42:56.618: E/AndroidRuntime(19586): at dalvik.system.NativeStart.main(Native Method)
11-12 21:42:56.618: E/AndroidRuntime(19586): Caused by: java.lang.NullPointerException
11-12 21:42:56.618: E/AndroidRuntime(19586): at com.example.aplikasipemesananmenu.Appetizer_Activity.onResume(Appetizer_Activity.java:231)
11-12 21:42:56.618: E/AndroidRuntime(19586): at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1150)
11-12 21:42:56.618: E/AndroidRuntime(19586): at android.app.Activity.performResume(Activity.java:3858)
11-12 21:42:56.618: E/AndroidRuntime(19586): at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2114)
11-12 21:42:56.618: E/AndroidRuntime(19586):    ... 12 more 
```

`Appetizer_Activity`：

```
public class Appetizer_Activity extends Activity{   

    static final String URL = "http://nervousme.vacau.com/android/xml_menu.xml";
    static final String KEY_SONG2 = "result"; // parent node
    static final String KEY_ID2 = "id_menu";
    static final String KEY_NAMA_MENU2 = "nama_menu";
    static final String KEY_KETERANGAN_MENU2 = "keterangan_menu";
    static final String KEY_HARGA_MENU2 = "harga_menu";
    static final String KEY_BAHAN_MENU2 = "bahan";
    static final String KEY_THUMB_URL2 = "image";   
    final Context context = this;
    AdapterDetailMenu adapterdetailmenu;    
    Button submitorder;   
    public static ArrayList<MenuInputClass> results = new ArrayList<MenuInputClass>();
    public static ArrayAdapter<MenuInputClass> lelel;
    public static ArrayList<String> list_list = new ArrayList<String>(); 
    public static ArrayAdapter<String> adapter_pemesananmenu;
    public static ListView list_pemesanan; 
    public static EditText jumlahmenu;  

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.single_list_view);

        ListView list_single_list_view=(ListView)findViewById(R.id.list_single);    
        list_pemesanan = (ListView)findViewById(R.id.list);
        submitorder=(Button)findViewById(R.id.btnSubmitMenu);
        final Button plus = (Button)findViewById(R.id.btnPlus);
        final Button minus = (Button)findViewById(R.id.btnMin);
        jumlahmenu = (EditText)findViewById(R.id.txtJumlahMenu);        

       final ArrayList<HashMap<String, String>> songsList2 = new ArrayList<HashMap<String, String>>();
        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element        
        NodeList nl = doc.getElementsByTagName(KEY_SONG2);
        // looping through all song nodes <song>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_ID2, parser.getValue(e, KEY_ID2));
            map.put(KEY_NAMA_MENU2, parser.getValue(e, KEY_NAMA_MENU2));
            map.put(KEY_KETERANGAN_MENU2, parser.getValue(e, KEY_KETERANGAN_MENU2));
            map.put(KEY_HARGA_MENU2, parser.getValue(e, KEY_HARGA_MENU2));
            map.put(KEY_BAHAN_MENU2, parser.getValue(e, KEY_BAHAN_MENU2));
            map.put(KEY_THUMB_URL2, parser.getValue(e, KEY_THUMB_URL2));            
            songsList2.add(map);
        }     

        adapterdetailmenu=new AdapterDetailMenu(this, songsList2);        
        list_single_list_view.setAdapter(adapterdetailmenu);        
        adapter_pemesananmenu = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_multiple_choice, list_list);       

        submitorder.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {

                    MenuInputClass sr = new MenuInputClass();
                    TextView namamenu=(TextView)findViewById(R.id.nama_menu2);
                    String hehe = namamenu.getText().toString();
                    String hihi = jumlahmenu.getText().toString();
                    sr.setNama_menu(hehe);
                    sr.setJumlah_menu(hihi);
                    results.add(sr);
                    ListPemesanan_Activity.list_pemesanan.setAdapter(new AdapterListPemesananMenu(getApplicationContext(), results));           
                    Log.v("MYTAG", "results" + results);
                    Toast.makeText(Appetizer_Activity.this, "Berhasil di Tambahkan", Toast.LENGTH_LONG).show();

                }
             });        
}
    @Override
    public void onResume(){
        super.onResume();

        TextView namamenu2=(TextView)findViewById(R.id.nama_menu2);         
        String comp = namamenu2.getText().toString();   

        for(MenuInputClass mic2 : results) {    
            //int asd=results.indexOf(comp);
            if(mic2.getNama_menu().equals(comp))
            {                   
                String jml_exis=mic2.getJumlah_menu();                  
                int jml_exis_toint = Integer.parseInt(jml_exis);
                jumlahmenu.setText(String.valueOf(jml_exis_toint));
            }                   
        }
    }
} 
```

**布局截图了解**

![在此处输入图像描述](../Images/9a89490007aaf84893ef6946a6be4bc1.png)

**模拟器截图**

![在此处输入图像描述](../Images/1543d3800207a4cad53a524b2159eedf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:34:31.210

您可能需要阅读有关[`AdapterView`s](http://developer.android.com/guide/topics/ui/declaring-layout.html#AdapterViews)的文档部分。一般来说，您无法`AdapterView`通过 ID 检索视图中的视图。此外，您**绝对不能**以这种方式访问​​其他活动的字段（即使用静态字段，如`MyActivity.widget`）。

通常的使用模式`ListView`是：

1.  `ListView`在你的 XML 布局中声明并给它一个 ID
2.  为行创建布局
3.  检索`ListView`by ID 并设置其适配器（通常在`onCreate()`）

当您需要在活动之间进行通信时，请使用`Intent`框架（[指南](http://developer.android.com/guide/components/intents-filters.html)）。[`onNewIntent()`](http://developer.android.com/reference/android/app/Activity.html#onNewIntent%28android.content.Intent%29)在某些情况下，您可能需要覆盖。

# php - 无法从映射文件生成 zf2 DoctrineORMModule 实体

> ID：13345769
> 
> 赞同：4
> 
> 时间：2012-11-12T14:46:26.253
> 
> 标签：php, doctrine-orm, zend-framework2

我安装了 zf2 DoctrineORMModule 和 DoctrienModule。我正在尝试使用命令工具来创建映射文件并从这些映射文件中生成实体。（我知道这不是首选方法，但这就是我要这样做的方式。我有我的理由。）

我配置了一个安静的模块，这是我的这个模块的教义配置。

```
// Doctrine config
    'doctrine' => array(
        'driver' => array(
            'Restful_driver' => array(
                'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
                'cache' => 'array',
                'paths' => array(__DIR__ . '/../src/Restful/Entities')
            ),
            'orm_default' => array(
                'drivers' => array(
                    'Restful\Entities' => 'Restful_driver'
                )
            )
        )
    ) 
```

我先跑

```
doctrine orm:convert-mapping xml /to/my/dest/path --from-database --force 
```

这将创建包含所有表信息的我的 xml 文件。这部分工作正常，我可以查看它创建的 xml。接下来我尝试运行

```
doctrine orm:generate-entities /to/my/dest/path --generate-annotations 
--generate-methods 
```

我没有得到任何错误，但我也没有得到任何结果。上一个命令的输出是。

```
No Metadata Classes to process. 
```

我试图四处阅读，但没有找到任何真正解决我问题的文章。大多数人说我的注释/映射没有正确配置。但我可以通过控制器转储实体管理器。

```
var_dump($this->getServiceLocator()->get('doctrine.entitymanager.orm_default')); 
```

我需要做什么才能从 xml 映射生成实体？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T11:31:47.090

我对 YAML 文件有类似的问题，并在[此处](https://stackoverflow.com/questions/14525228/zend-framework-2-doctrine-2-cli-generate-entities-from-yaml-each-module/14787595#14787595)发布了我的解决方案。我相信这也适用于 xml 文件。只是尝试添加

```
$driverImpl = new \Doctrine\ORM\Mapping\Driver\XmlDriver(array("YOUR_PATH_TO_XML_FILES"));
/* @var $em \Doctrine\ORM\EntityManager */
$em = $application->getServiceManager()->get('doctrine.entitymanager.orm_default');
$em->getConfiguration()->setMetadataDriverImpl($driverImpl); 
```

到教义-module.php。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T22:39:16.947

您是否尝试使用 vendor/bin 中的教义模块脚本？它应该已经全部设置为读取您的应用程序的配置。

```
./doctrine-module orm:generate-entities ~/doctrine-entities 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:11:15.403

发生此“错误”是因为您使用 Annotation Driver 进行生成。此驱动程序使用您当前存在的实体并且不查看 xml。如果您想从 XML 创建实体 - 您应该在需要路径的 XML 驱动程序的原则配置部分中发送给 DI。

我使用了另一个 zf2 学说模块，而我的 DI 配置有另一种格式，所以我无法正确地向您发送 DI 示例。

# visual-studio-2010 - 使用 Visual Studio 的 SiteCore Rocks 教程

> ID：13345773
> 
> 赞同：4
> 
> 时间：2012-11-12T14:46:42.903
> 
> 标签：visual-studio-2010, sitecore, sitecore-rocks

是否有使用 Visual Studio 的 SiteCore Rocks 教程，

我已经在谷歌上搜索过各种文章，我可以找到一篇不错的，

你们可以建议任何链接/文章吗？

谢谢

*   我很容易从视觉上学习，所以视频教程肯定会有所帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T17:30:38.330

有一个专门用于 SitecoreRocks 的 YouTube 播放列表：[http ://www.youtube.com/view_play_list?p=2B8C​​A35C742803E4](http://www.youtube.com/view_play_list?p=2B8CA35C742803E4)

此外，Sitecore 首席技术官 John West 在 Sitecore Rocks 上写了许多博客文章：

*   **Sitecore 差异化因素：Sitecore Rocks** [http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/07/Sitecore-Differentiating-Factors-Blog-Series-Sitecore-Rocks。 aspx](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/07/Sitecore-Differentiating-Factors-Blog-Series-Sitecore-Rocks.aspx)
*   **Sitecore Rocks 简介：** [http ://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/06/Introducing-Sitecore-Rocks.aspx](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/06/Introducing-Sitecore-Rocks.aspx)
*   **主要组件：** [http ://www.sitecore.net/en/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/06/Major-Components-of-Sitecore-Rocks.aspx](http://www.sitecore.net/en/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/06/Major-Components-of-Sitecore-Rocks.aspx)
*   **Sitecore 岩石连接：** [http ://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/06/Sitecore-Rocks-Connections.aspx](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/06/Sitecore-Rocks-Connections.aspx)
*   **查询分析器成分：** [http ://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/09/Sitecore-Rocks-Query-Analyzer-Ingredients-for-the-Sitecore- ASPNET-CMS.aspx](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/09/Sitecore-Rocks-Query-Analyzer-Ingredients-for-the-Sitecore-ASPNET-CMS.aspx)
*   **Sitecore 查询备忘单：** [http ://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/05/Sitecore-Query-Cheat-Sheet.aspx](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/05/Sitecore-Query-Cheat-Sheet.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T07:16:36.993

另一个资源是 Sitecore Rocks wiki：

*   [http://vsplugins.sitecore.net](http://vsplugins.sitecore.net)

如果你有访问权限，SDN上有一个论坛：

*   [http://sdn.sitecore.net/Forum/ShowForum.aspx?ForumID=36](http://sdn.sitecore.net/Forum/ShowForum.aspx?ForumID=36)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T19:24:17.773

这是 Morten Ljungberg 在 2012 Sitecore Symposium 上的演示视频。

[http://link.brightcove.com/services/player/bcpid1642619173001?bckey=AQ~~,AAABffgMgck~,AYno53hm3AQXk8lUBh_uD7C3bn8DwQJc&bctid=1969350715001](http://link.brightcove.com/services/player/bcpid1642619173001?bckey=AQ~~,AAABffgMgck~,AYno53hm3AQXk8lUBh_uD7C3bn8DwQJc&bctid=1969350715001)

自从他使用的版本以来，有些事情发生了变化......但他在 Rocks 的日常使用中展示了一些很酷的东西。

# xml - VS 2012 LINQ to XML XmlDocument.Descendants 导致“尝试显式指定类型参数”

> ID：13345774
> 
> 赞同：1
> 
> 时间：2012-11-12T14:46:50.880
> 
> 标签：xml, linq

我正在对 XmlDocument 进行简单的 LINQ 查询，并且收到“尝试显式指定类型参数”错误。这是我的 C# 代码：

```
var Document = new XmlDocument();
Document.LoadXml(XmlFilePath);
var selectedMessage = from msg in Document.Descendants("Messages").Descendants("Message")
                      where msg.Attribute("Code").Value == constant
                      select msg; 
```

xml 如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<MessageService>
   <Messages>
     <Message Code="DE-01003" Section="Delphi Backend" Line="N/A" Claim="No" Constant="E_PHY_LN_INV_HCPCS" Description="Error reading HCPCS code on line %d (%s)" />
     <Message Code="DE-01004" Section="Delphi Backend" Line="N/A" Claim="No" Constant="E_PHY_LN_RBRVS_FAMILY_INV_DT" Description="RunFamilyReduction: Invalid Date on claim line %d (%s)" />
     <Message Code="DE-02002" Section="Delphi Backend" Line="N/A" Claim="No" Constant="E_AMB_LN_INV_HCPCS" Description="Invalid or missing HCPCS code on claim line %d (%s)" />
     .
     .
     .
   </Messages>
</MessageService> 
```

第一次调用 .Descendants 会导致错误。我不确定我做错了什么。

任何帮助，将不胜感激。

谢谢！

苏珊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:54:06.007

您正在使用`XmlDocument`，但试图使用一种`Descendants`方法......我*希望*您正在考虑[`XDocument.Descendants`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.descendants.aspx).

有什么理由*要*使用`XmlDocument`而不是 LINQ to XML？混合和匹配不会是理想的......

只需将前几行更改为：

```
// Variable name casing changed to be more idiomatic
var document = XDocument.Load(xmlFilePath); 
```

# web-services - 带有参数化 URL 的 RESTful 服务主机名解析

> ID：13345775
> 
> 赞同：0
> 
> 时间：2012-11-12T14:46:51.407
> 
> 标签：web-services, rest, dns, saas, hostname

我们正在构建一个 Web 应用程序，我们在其中遵循 SAAS 模型，使用 RESTful 服务进行模块之间的内部通信。

有一种场景，我们希望通过服务 URL 中传递的参数值之一来解析 RESTful 服务的服务器主机名。在我们的架构中，每个服务器实例都希望为 URL 中特定参数的一组值提供它的服务。

在动态环境中，这种责任可能会因服务器而异。客户端如何动态解析它应该联系哪个 IP 地址以获取特定请求？是否有某种类似于 DNS 的 URL 服务注册和解析工具，可以在解析过程中考虑一些元数据，如参数值？欢迎任何指向一些现有解决方案的链接或实施此类事情的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:51:22.753

您可以使用反向代理作为服务的前端（所有工作服务器）。它必须能够根据有关 URL 中应用程序级语义的一些知识（包括参数）将请求定向到适当的后端服务器。

以下是最常用的反向代理列表：

*   [Nginx](http://nginx.org/en/)（特别是关于[反向代理](http://www.cyberciti.biz/tips/using-nginx-as-reverse-proxy.html)）
*   [乌贼](http://www.squid-cache.org/)
*   [带有mod_proxy](http://httpd.apache.org/docs/2.0/mod/mod_proxy.html)的 Apache

需要注意的主要事情是，这些通用产品可能无法很好地满足您的需求，因为它们可以配置的灵活性。这就是为什么我自己为类似的 Web 服务编写了一个自定义反向代理（该项目是在 Delphi 中实现的，如果需要，我可以提供更多详细信息）。

# caching - 新门户中的 Azure 缓存在哪里？

> ID：13345778
> 
> 赞同：2
> 
> 时间：2012-11-12T14:46:59.810
> 
> 标签：caching, azure

在旧的 Silverlight 门户中，Azure 缓存与 ACS 一起属于服务总线类别。在新的 HTML5 门户中，我无法在任何地方找到我的缓存。在 ServiceBus 下，它说我有零，并且只显示一个链接来创建一个新的服务总线命名空间。我应该联系支持人员吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:51:53.190

您必须使用[以前的门户](https://windows.azure.com/)来管理**Azure 缓存**。由于新门户仍处于测试阶段 - 并非所有功能都已移植。[MSDN 仍链接到用于预配 Azure 缓存](http://msdn.microsoft.com/en-us/library/windowsazure/gg618004.aspx)的先前门户。

**提问者更新**：如评论中所见，我的浏览器可能一直挂在从 windows.azure.com 到 manage.windowsazure.com 的 DNS 重定向上。[使用预配Azure 缓存](http://msdn.microsoft.com/en-us/library/windowsazure/gg618004.aspx)链接和使用 @BrentDaCodeMonkey 的建议，我能够成功返回 silverlight 门户。

# objective-c - UILabel [__NSCFString set]：无法识别的选择器发送到实例崩溃

> ID：13345780
> 
> 赞同：0
> 
> 时间：2012-11-12T14:47:18.130
> 
> 标签：objective-c, ios, xcode, uilabel

我遇到了与 UILabel 相关的奇怪崩溃，但我使用的崩溃报告服务并没有给我太多帮助来定位它。我不知道哪个控制器和哪个 UILabel 导致它。我唯一的帮助如下：

```
-[__NSCFString set]: unrecognized selector sent to instance 0x1e0958d0
0    CoreFoundation     __exceptionPreprocess + 162
1    libobjc.A.dylib    objc_exception_throw + 30
2    CoreFoundation     -[NSObject(NSObject) doesNotRecognizeSelector:] + 170
3    CoreFoundation     ___forwarding___ + 392
4    CoreFoundation     _CF_forwarding_prep_0 + 24
5    UIKit              -[UILabel _legacy_drawTextInRect:baselineCalculationOnly:] + 2632
6    UIKit              -[UILabel _drawTextInRect:baselineCalculationOnly:] + 166
7    UIKit              -[UILabel drawTextInRect:] + 450
8    UIKit              -[UILabel drawRect:] + 72
9    UIKit              -[UIView(CALayerDelegate) drawLayer:inContext:] + 364
10   QuartzCore         -[CALayer drawInContext:] + 112
11   QuartzCore         CABackingStoreUpdate_ + 1808
12   QuartzCore         CA::Layer::display_() + 980
13   QuartzCore         CA::Layer::display_if_needed(CA::Transaction*) + 202
14   QuartzCore         CA::Layer::layout_and_display_if_needed(CA::Transaction*) + 24
15   QuartzCore         CA::Context::commit_transaction(CA::Transaction*) + 238
16   QuartzCore         CA::Transaction::commit() + 316
17   QuartzCore         CA::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 60
18   CoreFoundation     __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 20
19   CoreFoundation     __CFRunLoopDoObservers + 276
20   CoreFoundation     __CFRunLoopRun + 742
21   CoreFoundation     CFRunLoopRunSpecific + 356
22   CoreFoundation     CFRunLoopRunInMode + 104
23   GraphicsServices   GSEventRunModal + 74
24   UIKit              UIApplicationMain + 1120
25   App                main.m line 14
26   App                start + 40 
```

有什么我能找到解决办法的吗？提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-29T08:27:21.117

即使这是一个老问题，对于遇到类似问题的任何人：

如果您在 UILabel 中使用属性文本，请检查您设置的属性值类型。例如：

```
NSString* s = @"str";
NSMutableAttributedString* as = [[NSMutableAttributedString alloc] initWithString:s];
[as addAttribute:NSForegroundColorAttributeName value:someObjectThatsNotAUIColor range:NSMakeRange(0, s.length)]; 
```

将导致 UILabel [__NSCFString set]: unrecognized selector sent to instance crash。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:01:20.920

您可以尝试将其放在 .h 中：

```
@interface NSString (extended)
- (void)set;
@end 
```

这在 .m 中：

```
@implementation NSString (extended)
- (void)set
{
    NSLog(@"[NSString set] ??? impossible !!!");
}
@end 
```

然后在这个方法上设置一个断点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T14:52:22.897

在您的项目中搜索“set]”然后您可能已经找到它，因为这是一个非常不典型的方法名称。如果这没有帮助，请使用 NSLog 将所有标签地址打印到控制台，以找出导致此问题的标签。喜欢

```
for (UIView *sub in self.subviews)
    if ([sub kindOfClass:[UILabel class]]) NSLog(@"%p", sub); 
```

（代码未经测试，必要时更正拼写）

# c# - 在 MVC 中需要一个控件来保存多条记录

> ID：13345787
> 
> 赞同：1
> 
> 时间：2012-11-12T14:47:38.500
> 
> 标签：c#, asp.net-mvc

我正在开发我的第一个 MVC 内部网，但遇到了一些问题。我的创建页面有一个模型

```
using System.Collections.Generic;
using CTTModel;

namespace TestingTool.ViewModels
{
    public class TestCreationModel
    {
        public Test Tests { get; set; }
        public Risk Risks { get; set; }
        public ICollection<TestField> Fields { get; set; }
    }
} 
```

我需要创建一个具有风险和相关字段集合的测试。它必须在同一个过程中完成。

所以，我需要的是一些可以添加多条记录的控件。

所以我按下创建，它被发送回控制器，然后我可以将每条记录添加到 TestField 的 ICollection。

测试和风险部分工作正常，我正在努力解决现场问题。有任何想法吗？

![在此处输入图像描述](../Images/41440f970867f0a2be2839a3e52bad2f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:18:22.743

[http://stack247.wordpress.com/2011/03/20/get-forms-post-values-in-asp-net-mvc-with-formcollection/](http://stack247.wordpress.com/2011/03/20/get-forms-post-values-in-asp-net-mvc-with-formcollection/)

如果您希望能够添加新值，我建议您使用 JavaScript 来实现，我会使用 jQuery 库来实现。

[http://www.w3schools.com/tags/tag_input.asp](http://www.w3schools.com/tags/tag_input.asp) html5 将包含一个数据列表，这将使它更容易，不过。

您提到了gridview来保存数据，如果您查看gridview，它只是一个由服务器呈现的html表，类似于： [http ://www.asp.net/mvc/tutorials/older-versions/javascript/creating -a-mvc-3-application-with-razor-and-unobtrusive-javascript](http://www.asp.net/mvc/tutorials/older-versions/javascript/creating-a-mvc-3-application-with-razor-and-unobtrusive-javascript)

友情提示：不要在 MVC 中使用 Webforms 控件！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:24:50.647

好吧，我发现了我想要的东西。

我想要的是 Master-Detail CRUD 操作。

我在这里找到了一个不错的教程，[http://hasibulhaque.com/](http://hasibulhaque.com/?p=200) ?p=200 。

现在它工作得很好。

# combobox - PropertyRef 需要 ComboBox

> ID：13345788
> 
> 赞同：5
> 
> 时间：2012-11-12T14:47:40.350
> 
> 标签：combobox, wix, windows-installer

在我的一个对话框中，我有以下控制：

```
<Control Id="EnvironmentComboBox" Type="ComboBox" Sorted="yes" ComboList="yes" Property="ENVIRONMENT" X="25" Y="110" Width="200" Height="15" /> 
```

我在其他地方填充 ComboBox，如下所示：

```
<UI>
  <ComboBox Property="ENVIRONMENT">
    <ListItem Text="Development" Value="Development" />
    <ListItem Text="SIT" Value="SIT" />
    <ListItem Text="UAT" Value="UAT" />
    <ListItem Text="Production" Value="Production" />
  </ComboBox>
</UI> 
```

但是，如果我没有创建 ComboBox 位，MSI 仍将构建，并且在安装期间将失败 (2205)。因此，我想强制要求拥有一个名为 ENVIRONMENT 的属性。我尝试将如下所示的 PropertyRef 添加到我的对话框中：

```
<PropertyRef Id="ENVIRONMENT" /> 
```

但是，这似乎并没有使`<ComboBox Proeprty="ENVIRONMENT">`. 它将获取一个常规属性 ( `<Property Id="ENVIRONMENT" Value="test" />`)，但这并没有太大帮助。

有什么方法可以要求`ComboBox`定义 a 吗？

**编辑：** 为澄清起见，我打算将 ComboBox 定义与 Control 定义分开，以便可以重用对话框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T16:31:13.913

**MSI can exist without Combobox items declared for the property**, referenced by a element (you have the ability to type any text you need in the combobox text field in case ComboList='no').

****The element doesn't have any corresponding object in the MSI tables**** (only it's child elements gets written to the MSI's ComboBox table). So I suppose this element is completely optional from WIX point.

**Your error #2205 is caused by non-existance of the 'ComboBox' table at all**. I suppose you have only one combobox in the installer. Theoretically it is impossible possible to detect this at compile-time as error (tables can be created in custom actions as well). The most WIX team can do is generate warning.

To avoid this error I declared a dummy combobox element in my reusable project:

```
 <Fragment><!--This fragment is intended to fill MSI tables with dummy items so that these tables became created. Tables without items aren't created-->
    <UI Id="Dummy">
      <Dialog Id="DummyDlg" Width="370" Height="270" Title="Dummy" NoMinimize="yes">
        <Control Id="DummyDlgComboBox" Type="ComboBox" Property="DummyComboboxProperty" Width="200" Height="17" X="100" Y="80">
          <ComboBox Property="DummyComboboxProperty">
            <ListItem Text="Dummy" Value="Dummy" />
          </ComboBox>
        </Control>
      </Dialog>
    </UI>
  </Fragment> 
```

and referenced this UI from my commonly-used UI sequences.

Now I don't need to worry about existance of the combobox table in any of my installers.

**As for a workaround to your problem** - how to enforce users not to forget to declare list items, I would do a **tepmlate wix file instead of the wixlib**. Something like this:

```
<Control Id="EnvironmentComboBox" Type="ComboBox" Sorted="yes" ComboList="yes" Property="ENVIRONMENT" X="25" Y="110" Width="200" Height="15">
  <ComboBox Property="ENVIRONMENT">
    <Placeholder Id="EnvironmentComboBoxItems" />
  </ComboBox>
</Combobox> 
```

and give users the only ability to reuse this code using template transformation tool you provide. It will validate if all template placeholders are provided with content.

The transformation may look like this:

```
<TemplateSubstitutions>
  <PlaceholderContent PlaceholderId='EnvironmentComboBoxItems'>
    <ListItem Text="Development" Value="Development" />
    <ListItem Text="SIT" Value="SIT" />
    <ListItem Text="UAT" Value="UAT" />
    <ListItem Text="Production" Value="Production" />
  </PlaceholderContent>
</TemplateSubstitutions> 
```

**The tool for merging them:**

```
static void Main(string[] args)
{
    var templatePath = args[0];
    var templateTransformPath = args[1];
    var resultPath = args[2];

    var templateDoc = XDocument.Load(templatePath);
    var transformationDoc = XDocument.Parse(templateTransformPath);

    Dictionary<string, XElement> contents = transformationDoc.Element("TemplateSubstitutions").Elements("PlaceholderContent").ToDictionary(e => e.Attribute("PlaceholderId").Value, e => e);

    var planceHolders = templateDoc.Descendants("Placeholder").ToArray();
    foreach (var ph in planceHolders)
    {
        ph.ReplaceWith(new XElement(contents[ph.Attribute("Id").Value]).Nodes());
    }
    templateDoc.Save(resultPath);
} 
```

Of course this tool isn't release yet - you may want to add some meaningful error messages to your clients and validation of provided transformations. But to avoid code complication I didn't implement that.

I use this approach in few installer projects I have currently. All templates are stored in the common location and client installers can take any file they need and transform it.

My release tool is a bit more advanced of course. It can substitute values in the attributes using wildcards - I consider it extreemely useful when reusing components. I use then template like this:

```
<Component Guid="{StrToGuid({ProductName}_7A51C3FD-CBE9-4EB1-8739-A8F45D46DCF5)}"> 
```

and user should provide all template properties (such as 'ProductName') in command-line of my template transformation tool. It ensures components will have unique GUIDs between different products, so they will not conflict when installed on the same machine.

NOTE: **Be careful with figure brackets though** - they have special meaning for WIX and MSI: [http://msdn.microsoft.com/library/aa368609.aspx](http://msdn.microsoft.com/library/aa368609.aspx). But as for me it is not clear enough and I don't use them regularly. But you might need another wildcard prefix.

**As for organizing the installer build process**, you can add template transformation calls on pre-build of the project. But I decided to use separate build scripts instead of native Visual studio build. It looks much more simple and flexible. And I don't get nasty errors like "command 'xxx' exited with code yyy" - I always see the template transformation log, error messages etc.

Hope my reinvention of the wheel will help anybody =).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:01:20.560

我怀疑`<PropertyRef>`设计的方式是只获取属性的“直接”定义，即`<Property>`元素。只是在其`<ComboBox>`属性中提到了属性名称，这不被视为属性定义。

将“直接”属性定义添加到您的示例中，它应该可以工作：

```
<UI>
  <Property Name="ENVIRONMENT" Value="" />
  <ComboBox Property="ENVIRONMENT">
    <ListItem Text="Development" Value="Development" />
    <ListItem Text="SIT" Value="SIT" />
    <ListItem Text="UAT" Value="UAT" />
    <ListItem Text="Production" Value="Production" />
  </ComboBox>
</UI> 
```

并在另一个地方用元素引用它`<PropertyRef>`——就像你尝试的那样。据我所知，这样的定义不会损害组合框部分，并且通过适当的片段包含，您将是安全的。

或者，您可以使用 element 引用整个`<UI>`元素`<UIRef>`- 它应该具有相同的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T12:24:43.940

为什么不在元素内定义您的组合框？像这样：

```
<Control Id="EnvironmentComboBox" Type="ComboBox" Sorted="yes" ComboList="yes" Property="ENVIRONMENT" X="25" Y="110" Width="200" Height="15">
  <ComboBox Property="ENVIRONMENT">
    <ListItem Text="Development" Value="Development" />
    <ListItem Text="SIT" Value="SIT" />
    <ListItem Text="UAT" Value="UAT" />
    <ListItem Text="Production" Value="Production" />
  </ComboBox>
</Combobox> 
```

In this case you won't be able to reference dialog not referencing the combobox. Maybe I understood you wrong, but it looks logically to avoid user errors rather than throwing them.

If your user needs to be able to change list items of your library-dialog, you can populate dialog items with custom action for example (though it is probably not the best approach in case of static values).

I also faced plenty of problems with reusing WIX elements and ended up with creating own template project and using some transformation of wxs files (for now quite simple, but can implement anything I need) for every installer I create. Works great and gives infinite flexibility.

# jquery - 用于更新视图的 Ember.js 选项

> ID：13345789
> 
> 赞同：0
> 
> 时间：2012-11-12T14:47:43.197
> 
> 标签：jquery, ember.js

我一直在玩，并且想知道更新数据更改`Ember.js`的最佳实践是什么。`DOM`

具体来说，对于模型的每个实例，我都有带有打开和关闭按钮的分隔线。如果模型对象的状态为“打开”，我希望打开按钮消失，如果模型对象的状态为“关闭”，则关闭按钮消失。

据我所知，有几个选择。

`jQuery`A)在控制器调用的视图中直接更改 DOM 中的元素

B) 设置一个将自动重新加载模板的观察者，并`if/else`在模板中包含根据更新的模型参数更改内容的语句。

其中之一是首选（或两者都不是）吗？你们会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T22:06:40.483

看看[**这个小提琴**](http://jsfiddle.net/schawaska/7Uk7J/)，它显示了在**另一个**视图/选项卡中实现的。此示例使用 simple`Em.Controller`而不是 a `Em.CollectionController`，但它可以满足您的需要。

我有 2 个 CSS 类：

```
.visible {visibility: visible}
.invisible {visibility: hidden} 
```

以下视图`classNameBinding`在子视图中使用它们。我将模型绑定到父视图并`contentBinding`指向控制器上的模型，然后子视图有一个属性可以观察`currentState`父级的属性。当您单击此子视图时，它将设置`currentState`为“关闭”，并将`IsVisible`再次评估该方法，从而将正确的值提供给 classNameBinding。

```
App.OtherView = Em.View.extend({
    templateName: 'other',
    contentBinding: 'controller.content',
    currentStateBinding: 'controller.content.state',
    ButtonView: Ember.View.extend({
        tagName: 'a',
        click: function(e) {
            this.set('parentView.currentState', 'closed');
        },
        classNameBindings: 'IsVisible:btn visible:invisible',
        IsVisible: function() {
            return this.get('parentView.currentState') === 'open';
        }.property('parentView.currentState')    
    })        
}); 
```

这是模板的设置方式

```
<script type="text/x-handlebars" data-template-name="other" >
    <h2>Other</h2>
    ID: {{content.id}}<br />
    Name: {{content.name}}<br />
    State: {{content.state}}<br />
    {{#view view.ButtonView }}
        Close
    {{/view}}            
</script> 
```

* * *

或者，我有这个[示例](http://jsfiddle.net/schawaska/hEx84/show)（这里是[源代码](http://jsfiddle.net/schawaska/hEx84/)），它在如何使用`.property`来实现相同功能的概念上非常相似，但这有点复杂，而且是用于导航栏菜单。检查我是如何做的`App.NavigationView`，你会发现一个名为的子视图`NavigationItemView`，我有一个`classNameBinding`. 这样做是检查我的控制器中的属性值，然后检查视图。该比较返回真或假，它将根据调用`isActive`函数属性的表达式填充类名，与我根据您的问题编写的第一个小提琴几乎相同。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:24:55.510

我认为您需要详细说明您的问题。这是我基于当前对您问题的理解的回答：从我的角度来看，这两个选项都不是 EmberJS 的好习惯。据我到现在为止，这是 EmberJS 的优势之一，您不必担心手动更新 DOM。您需要做的就是更新您的模型或控制器对象，所有更改都会自动传播到 DOM。

最好的祝福，

# javascript - 使用下拉列表动态添加输入框

> ID：13345794
> 
> 赞同：0
> 
> 时间：2012-11-12T14:48:29.003
> 
> 标签：javascript, html, forms

我在玩下拉列表，我想知道如何根据从下拉列表中选择的数字动态添加输入框。例如，如果选择一个则添加一个输入框，如果选择两个则添加两个输入框等...。任何提示或指导将不胜感激谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:02:38.810

我可以向您展示一个使用 jquery 的简单方法：

html

```
<select id="dropdown">
  <option value="0">Select number of inputs</option>
  <option value="1">1 input</option>
  <option value="2">2 inputs</option>
  <option value="3">3 inputs</option>
  <option value="4">4 inputs</option>
</select>
<div id="input-holder"></div>​ 
```

jQuery

```
$('#dropdown').change(function(){
    if ($(this).val() > 0) {
      $('#input-holder').empty();
      for (i = 1; i <= $(this).val(); i++) {
        $('#input-holder').append('<input type="text" name="input'+i+'" value="' + i +'" >');
      }
    }
});​ 
```

当然，这只是一个示例，可以通过多种其他方式完成。

# hibernate - 如何从 HibernateCursorItemReader 中为 FlatFileItemWriter 检索列名

> ID：13345797
> 
> 赞同：1
> 
> 时间：2012-11-12T14:48:57.410
> 
> 标签：hibernate, csv, spring-batch

我正在尝试使用 spring-batch 和休眠从数据库中导出数据。实际上强烈的要求是查询是一个返回游标的存储过程。此查询和结果列可能会不时更改。

```
<sql-query name="reportingQuery" callable="true">
    { call GET_REPORTING_QUERY(?) }
</sql-query> 
```

所以我用 HibernateCursorItemReader 和 FlatFileItemWriter 用 DelimitedLineAggregator 写了一个简单的工作：

```
<batch:step id="extractionStep">
    <batch:tasklet>
        <batch:chunk skip-policy="defaultSkipPolicy" commit-interval="1000">
            <batch:reader>
                <bean class="org.springframework.batch.item.database.HibernateCursorItemReader">
                    <property name="queryName" value="reportingQuery" />
                    <property name="sessionFactory" ref="sessionFactory" />
                    <property name="useStatelessSession" value="true" />
                </bean>
            </batch:reader>
            <batch:writer>
                <bean id="globalQueryItermWriter" class="org.springframework.batch.item.file.FlatFileItemWriter">
                    <property name="resource" value="output.csv" />
                    <property name="lineAggregator">
                        <bean class="org.springframework.batch.item.file.transform.DelimitedLineAggregator">
                            <property name="delimiter" value="," />
                        </bean>
                    </property>
                </bean>
            </batch:writer>
        </batch:chunk>
    </batch:tasklet>
</batch:step> 
```

我的问题是这样在 output.csv 文件中没有标题行。我试图将行聚合器的 fieldExtractor 设置为 BeanWrapperFieldExrtactor，但我必须设置名称。设置名称并没有多大帮助，因为休眠游标阅读器只返回一个对象 [] 而不是一个字段集，然后我有一个无效的属性错误。

```
<property name="fieldExtractor">
  <bean class="org.springframework.batch.item.file.transform.BeanWrapperFieldExtractor">
    <property name="names" value="ID,NAME,DATE,..."></property>
  </bean>
</property> 
```

所以我基本上有两个问题

1.  有没有办法从休眠阅读器中检索列名并将其作为输出文件的标题注入？
2.  如何强制休眠查询返回一个字段集（没有列名的线索）？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-15T20:32:13.913

我知道已经很晚了，最后我们没有找到一种方法来动态设置带有程序列的Header。但是我们在 itemwriter 的 headerCallback 属性中注入了一个 FlatFileHeaderCallback。

而且我不记得为什么我们最终选择使用一个参数来过滤和排序列。也许是因为我们不想在每次想要更改输出时都更改存储过程。

# c# - C#: Json.NET --> Json 返回一个对象

> ID：13345803
> 
> 赞同：0
> 
> 时间：2012-11-12T14:49:13.433
> 
> 标签：c#, json, object, json.net, deserialization

我正在使用 Json.Net 库。而且我无法将 JSON 对象返回到我的 c# 对象中。

我目前有：JSON

```
[{"Datum":"31-05-2012","Naam":"KN: xxxx","Prijs":"37","Id":31123,"status":"found","foundPrice":"37.50","betaald":"2012-06-01","ingepakt":"2012-06-03","geanuleerd":"nee","verstuurd":"nee","achternaam":"xxxx","straat":"xxxx 98","postcode":"4422xx","plaats":"xxxxx","land":"Nederland","gewicht":"0.600"},{"Datum":"31-05-2012","Naam":"xxxxT","Prijs":"23","Id":31341,"status":"found","foundPrice":"23.00","betaald":"2012-06-01","ingepakt":"2012-06-03","geanuleerd":"nee","verstuurd":"nee","achternaam":"xxxx","straat":"de xxxxx 2","postcode":"4444xx","plaats":"xxxx","land":"Nederland","gewicht":"0.300"}] 
```

和对象：

```
public class OrderObject
{
    public string Datum, Naam, Prijs;
    public int Id;
    public string status;
    public string foundPrice;
    public string betaald;
    public string ingepakt;
    public string geanuleerd;
    public string verstuurd;
    public string achternaam;
    public string straat;
    public string postcode;
    public string plaats;
    public string land;
    public string gewicht;
} 
```

要将这些对象的列表转换为 JSON，我只需要：

```
private void sentToServer(List<OrderObject> input )
        {
            var inputJson = JsonConvert.SerializeObject(input); 
        } 
```

但是我需要为反向过程做什么？谁能帮我？

谢谢马蒂

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:51:18.457

```
 var result = JsonConvert.DeserializeObject<List<OrderObject>>(inputJson); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:57:29.593

尝试 SerializeObject 的倒数方法，即 DeserializeObject：

```
List<OrderObject> list = JsonConvert.DeserializeObject<List<OrderObject>>(inputJson); 
```

# asp.net - 将空白项添加到 devexpress aspxlookup 控件

> ID：13345806
> 
> 赞同：1
> 
> 时间：2012-11-12T14:49:16.857
> 
> 标签：asp.net, devexpress

我有这个数据绑定 devexpress 7.1 aspxlookup 控件，我正在尝试在顶部添加一个新项目并将所选索引设置为该项目。对于我的一生，我不能在后面的代码中添加一个新项目，但我可以在标记的初始化脚本中添加一个。

但是，我不能将其设置为默认项目。我希望能够在代码中完成所有这些操作，而不必参与 javascript 方面的工作。

有什么建议么？

# ios - 在服务器上自动将图像交换为另一个图像。

> ID：13345808
> 
> 赞同：-2
> 
> 时间：2012-11-12T14:49:33.357
> 
> 标签：ios

只是一个快速的问题。我试图找出一种在给定时间自动将文件交换为服务器上同一位置的另一个文件的方法。此图像是我的 IOS 应用程序的启动画面，并且 url 指向它。

假设我有一个新版本的“picture1.jpg”需要在周日下午 12 点取代旧的“picture1.jpg”（名称需要保持不变）。

这张图片每月最多需要更改 20 次，我想自动化整个过程。

那可能吗？如何做到这一点？我阅读了有关 Cron Job 的信息，还有什么更容易的吗？该图像托管在 GoDaddy.com 上。

感谢您的指点。

法猫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:14:58.130

您可以制作一个 php 脚本，根据当前时间显示不同的图像。

假设您存储了两个图像：`images/splash.jpg`和`images/special-splash.jpg`. 您可以执行以下操作：

`images/picture1.php`

```
<?php
    if(timeToShowSpecial()) {
        header('Location: images/special-splash.jpg');
    } else {
        header('Location: images/splash.jpg');
    }
?> 
```

`timeToShowSpecial()`那么，可以像你想要的那样复杂。

# c# - 在 Asp.NET WebApi 中路由类似文件的名称

> ID：13345810
> 
> 赞同：3
> 
> 时间：2012-11-12T14:49:37.110
> 
> 标签：c#, asp.net-web-api, asp.net-web-api-routing

是否可以在 ASP.NET Web API 路由配置中添加一个路由，以允许处理看起来有点像文件名的 URL？

我尝试在 中添加以下条目`WebApiConfig.Register()`，但这不起作用（使用 URI `api/foo/0de7ebfa-3a55-456a-bfb9-b658165df5f8/bar.group.json`）：

```
config.Routes.MapHttpRoute(
  name: "ContextGroupFile",
  routeTemplate: "api/foo/{id}/{filetag}.group.json",
  defaults: new { controller = "foo", action = "getgroup"}
  ); 
```

以下确实有效（它`FooController.GetGroup(id,filetag)`按预期调用）（使用 URI `api/foo/0de7ebfa-3a55-456a-bfb9-b658165df5f8/group/bar`）：

```
config.Routes.MapHttpRoute(
  name: "ContextGroupFile",
  routeTemplate: "api/foo/{id}/group/{filetag}",
  defaults: new { controller = "foo", action = "getgroup"}
  ); 
```

失败的案例返回一个 IIS 错误（404 - 找不到文件），看起来它是由我的应用程序之外的东西创建的。错误页面（由 IIS Express 生成）包含以下错误详细信息：

```
Module = IIS Web Core
Notification = MapRequestHandler
Handler = StaticFile
Error Code = 0x80070002 
```

我想这意味着一个叫做“StaticFile Handler”的东西在它到达我的代码之前就已经处理了它。最大的问题是：有没有办法防止这种情况发生？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T21:25:25.063

您可以在进行以下设置后尝试：

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-14T21:02:44.457

替换处理程序路径过滤器。通常看起来像这样：

```
<add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" /> 
```

尝试使用 'path="*"'

```
<add name="ExtensionlessUrlHandler-Integrated-4.0" path="*" verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" /> 
```

# ruby-on-rails - nginx 缓存未命中行为

> ID：13345813
> 
> 赞同：1
> 
> 时间：2012-11-12T14:49:40.490
> 
> 标签：ruby-on-rails, caching, nginx

当给定路径不存在时，是否可以告诉 nginx 另一个位置？我想从我的 Rails 应用程序中提供静态资产，但是有时编译的资产可能不可用，我想有一个后备。

生产.rb

```
 # Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = false 
```

nginx.conf：

```
 location ~ ^/assets/ {
               expires max;
               add_header Cache-Control public;
               add_header ETag "";
               break;
  } 
```

**更新：** nginx.conf

```
 #cache server
  server {
        listen 80;

        # serving compressed assets
        location ~ ^/(assets)/  {
                root /var/app/current/public;
                gzip_static on; # to serve pre-gzipped version
                expires max;
                add_header Cache-Control public;
                add_header ETag "";
        }

        try_files $uri /maintenance.html @cache;

        location @cache {
            proxy_redirect off;
            proxy_pass_header Cookie;
            proxy_ignore_headers Set-Cookie;
            proxy_hide_header Set-Cookie;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_cache one;
            proxy_cache_key app$request_uri;
            proxy_cache_valid 200 302  5s;
            proxy_cache_valid 404      1m;
            proxy_pass http://127.0.0.1:81;
        }
  }

  #real rails backend
  server {
        listen 81;
        root /var/app/current/public;
        error_log /var/app/current/log/error.log;

        rails_env production;
        passenger_enabled on;
        passenger_use_global_queue on;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:06:34.930

是的，使用 try files 指令：

```
# note: you don't need the overhead of regexes for this location
location /assets/ {
   try_files $uri /alternative_to_try
   # ... add back in rest of your assetts config
} 
```

这将尝试请求的 url，如果找不到，请尝试替代 uri（您也可以添加第 3、4、... 选项）

请注意，/alternative uri 可以是命名位置（例如，用于将 url 传递给 rails 应用程序的指令）

有关更多详细信息和一些示例，请参见[http://nginx.org/en/docs/http/ngx_http_core_module.html#try_files](http://nginx.org/en/docs/http/ngx_http_core_module.html#try_files)`try_files`

更新：

对，所以将您的资产位置更改为

```
location /assets/  {
   try_files $uri @cache;
   root /var/app/current/public;
   gzip_static on; # to serve pre-gzipped version
   expires max;
   add_header Cache-Control public;
   add_header ETag "";
} 
```

换句话说，对于所有以 url 开头的部分`/assets/`：

1.  检查是否有对应于路径的实际文件（这是指令的`$uri`一部分）`try_files`
2.  如果不是，则将请求传递到命名位置 @cache（这是指令的`@cache`一部分）`try_files`
3.  如果我们到达该`@cache`位置，它将首先检查代理缓存区域`one`是否匹配
4.  如果没有找到缓存匹配，它会将请求反向代理到 rails 应用程序`http://127.0.0.1:81`

# asp.net - 如何重新加载整个页面（没有 response.redirect）？

> ID：13345814
> 
> 赞同：0
> 
> 时间：2012-11-12T14:49:41.200
> 
> 标签：asp.net, updatepanel

如何在不使用的情况下重新加载整个页面`Response.Redirect`？

根据用户，我的页面 (Mypage.aspx) 正在加载其中的一些数据。用户更改某些字段后，如果用户单击保存按钮，代码需要保存更改的数据；或者如果用户单击取消按钮，代码应该重新加载用户以前的数据（通过重新加载 Mypage.aspx 页面）。

我在此页面中使用更新面板。如果不将客户端重定向到同一页面，这怎么可能？我不想重定向，因为 Mypage.aspx 包含不同的控件，如网格视图、下拉列表、复选框和文本框；如果我编写代码来清除所有这些字段，它会变得有点冗长。所以我正在寻找另一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:16:46.427

试试这个而不是`Response.Redirect()`：

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "redirect", "window.location.href='Mypage.aspx';", true); 
```

# xaml - Visual Studio 2012 有时会将我切换到设计视图（从 XAML 视图）

> ID：13345818
> 
> 赞同：0
> 
> 时间：2012-11-12T14:49:52.283
> 
> 标签：xaml, visual-studio-2012, designer, options

我已将 Visual Studio 设置为将我置于[XAML 模式](https://stackoverflow.com/questions/1334717/how-to-set-default-xaml-view-in-visual-studio-2008)，并且几乎完全使用它。然而，我有时会发现——通常是在我创建一个新元素之后，在其中放置一个空行，然后保存（但它似乎并不一致）它突然而刺耳地将我切换到设计模式。

我从未注意到发布候选版本中发生了这种情况。

任何想法为什么会发生这种情况，以及如何阻止它发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T01:52:06.837

我和你有类似的问题，当我设置一个新属性时，它切换到设计视图并挂起整个 Visual Studio。

通常我会采取以下步骤来查找问题：

1.  您是否安装了导致此问题的插件/扩展程序？如果是，则卸载或禁用它以查看是否可以解决问题。

2.  尝试从以下位置开始`safemode`：请参阅此[MSDN 帖子](http://msdn.microsoft.com/en-us/library/ms241278%28v=vs.110%29.aspx)。

3.  启动 Visual Studio 和`log`所有活动：[在此处查看](http://msdn.microsoft.com/en-us/library/ms241272%28v=vs.110%29.aspx)操作方法。

4.  修复 Visual Studio。

就我而言，这个问题与一个组件有关（确切地说是 Intersoft）。

# c# - @ 符号在 C# aspx 中无效

> ID：13345833
> 
> 赞同：3
> 
> 时间：2012-11-12T14:50:34.180
> 
> 标签：c#, asp.net

我正在使用 Webmatrix 编写我的 aspx，我发现 @ 对我的 asp 代码没有影响。

```
<%@ Page Language="C#" %>
<html>
<body>
@for(var i = 10; i < 21; i++)
{<p>Line @i</p>}
</body>
</html> 
```

这个程序，而不是输出第 1 行，第 2 行等......，它输出

> @for(var i = 10; i < 21; i++) {
> 
> 行@i
> 
> }

谁能帮我解决这个问题？我的工作区中只有 Default.aspx。我错过了一些配置文件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T14:52:10.180

我猜你的应用程序没有设置为使用 Razor 视图引擎。您要么需要切换到新的视图引擎，要么使用旧的 WebForms 视图引擎语法编写应用程序：

```
<% for(var i = 10; i < 21; i++) { %>
    <p>Line <%= i %></p>
<% } %> 
```

# javascript - 如何在不覆盖原型的情况下更改原型的方法？

> ID：13345835
> 
> 赞同：0
> 
> 时间：2012-11-12T14:50:35.860
> 
> 标签：javascript, methods, prototypal-inheritance

我需要执行以下操作：

```
function Shape (width, height) {
    var self = this;
    self.width = width;
    self.height = height;
    self.calculateSurface = function () {
        return (self.width * self.height);
    };
};

function Circle (radius) {
    //make sure width == height == radius.

};

Circle.prototype = new Shape;
Circle.prototype.constructor = Circle();

function Triangle (base, height) {
    var self = this;
    Shape.apply(self, arguments);
};

Triangle.prototype = new Shape;
Triangle.prototype.constructor = Triangle();

var circle = new Circle(5);
var triangle = new Triangle(5, 8);

alert(circle.calculateSurface());
alert(triangle.calculateSurface()); 
```

对基本原型方法的两次调用都必须返回调用者的区域，但不能覆盖该方法。

我怎样才能让它返回 (width * height) / 2 for triangle 和 (radius * radius) * pi for circle 而不会覆盖它？

感谢您的时间，一切都好！

**编辑：**

```
var output = document.getElementById('output');

function Shape(width, height) {
    var self = this;

    self.width = width;
    self.height = height;
};

Shape.prototype.calculateSurface = function () {
    return (this.width * this.height);
};

function Rectangle(width, height) {
    Shape.apply(this, arguments);
};
Rectangle.prototype = new Shape;
Rectangle.prototype.constructor = Rectangle;

function Triangle(base, height) {
    Shape.apply(this, arguments);
};
Triangle.prototype = new Shape;
Triangle.prototype.constructor = Triangle;

Triangle.prototype.calculateSurface = function () {
    return ((this.width * this.height) / 2);
};

function Circle(radius) {
    Shape.apply(this, arguments);
};
Circle.prototype = new Shape;
Circle.prototype.constructor = Circle;

Circle.prototype.calculateSurface = function () {
    return((this.width * this.width) * Math.PI);
};

// testing
var outputStr = "";
var outputArr = [];

for (var i = 0; i < 30; i++) {
    var rectangle = new Rectangle(i + 1, i + 2);
    var triangle = new Triangle(i + 1, i + 2);
    var circle = new Circle(i + 1);
    outputArr[i] = rectangle;
    outputStr += "Rectangle width: <b>" + rectangle.width + "</b> height: <b>" + rectangle.height + "</b> area: <b>" + rectangle.calculateSurface() + "</b><br />";
    outputArr[i + 1] = triangle;
    outputStr += "Triangle base: <b>" + triangle.width + "</b> height: <b>" + triangle.height + "</b> area: <b>" + triangle.calculateSurface() + "</b><br />";
    outputArr[i + 2] = circle;
    outputStr += "Circle radius: <b>" + rectangle.width + "</b> area: <b>" + circle.calculateSurface() + "</b><br /><br />";
};

output.innerHTML = outputStr; 
```

它工作正常，我希望我理解正确。 **再次感谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:55:01.957

首先，你不应该`calculateSurface`在实例上定义自定义类型（又名“类”）的方法（），所以，不是：

```
self.calculateSurface = function () {
    return (self.width * self.height);
}; 
```

但：

```
Shape.prototype.calculateSurface = function () {
    return (this.width * this.height);
}; 
```

然后你需要*隐藏*原型链中更高的属性。因此，查找将首先查看，`Triangle.prototype`然后才`Shape.prototype`使用它找到的第一个属性。

```
Triangle.prototype = new Shape;
// Note that you don't need to put parens after Triangle.
// You only set property to point at constructor function itself,
// not to the value constructor returns when invoked. (Also, constructor 
// should be invoked with `new` operator, not just with parens).
Triangle.prototype.constructor = Triangle; 
// now shadowing Shape.prototype.calculateSurface
Triangle.prototype.calculateSurface = function () { 
  // custom code here
} 
```

对于`Circle`.

# algorithm - 多项式乘法的 Small-o(n^2) 实现

> ID：13345839
> 
> 赞同：1
> 
> 时间：2012-11-12T14:50:53.477
> 
> 标签：algorithm, pseudocode, polynomial-math, convolution

我在书后面列出的这个问题上遇到了一点麻烦，我目前正在准备考试，但我似乎在书中找不到任何关于此的内容。

有人有想法吗？

`A real polynomial of degree n is a function of the form f(x)=a(n)x^n+⋯+a1x+a0, where an,…,a1,a0 are real numbers. In computational situations, such a polynomial is represented by a sequence of its coefficients (a0,a1,…,an). Assuming that any two real numbers can be added/multiplied in O(1) time, design an o(n^2)-time algorithm to compute, given two real polynomials f(x) and g(x) both of degree n, the product h(x)=f(x)g(x). Your algorithm should **not** be based on the Fast Fourier Transform (FFT) technique.`

请注意***，它必须是 small-o(n^2)***，这意味着它的复杂性必须是次二次的。

我一直在寻找的明显解决方案确实是 FFT，但我当然不能使用它。我发现了另一种称为卷积的方法，如果将多项式 A 作为信号，将多项式 B 作为滤波器。A 通过 B 产生已被 A“平滑”的移位信号，结果为 A*B。这应该在 O(n log n) 时间内工作。当然，我完全不确定实施。

如果有人对如何实现 small-o(n^2) 实现有任何想法，请分享，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:55:22.067

小欧：`f(x) = o(g(x)) is equivalent to lim x -> inf f(x)/g(x) = 0`。
使用[Karatsuba 算法](http://en.wikipedia.org/wiki/Karatsuba_algorithm)

# c# - 创建没有 cookie 的会话机制

> ID：13345840
> 
> 赞同：2
> 
> 时间：2012-11-12T14:50:55.577
> 
> 标签：c#, asp.net, session-state, cookieless

我目前正在使用一种设备来呈现由 IIS 服务器提供的 xml 视图。不幸的是，该设备不支持 cookie 或重定向，这会使常规 asp.net 会话或无 cookie 会话的使用无效。

数据超出了 url 查询字符串允许的大小，因此这也不是一个选项。

我想要做的是拥有某种自定义会话机制，我可以在其中明确告知会话 ID（ID 可能是在 url 查询字符串中传递的设备的 mac 地址）。

我可以使用 sql 数据库，但我想避免这种情况。

有任何想法吗？

编辑：

我刚刚得知该解决方案将在负载均衡器上运行，因此看来我真的要使用 SQL 解决方案。感谢您的回复都是有效的，但似乎我在这方面没有太多选择......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:57:22.943

您所需要的只是用户独有的密钥。如果您有权访问 Mac 地址，请使用该地址。不过，我可能会选择 GUID 并在查询字符串中传递这一轮。

在服务器端，您可以选择数据库方法（或任何形式的文件存储，但 DB 已针对查询性能进行了优化），或者将信息存储在内存中。创建一个静态字典类型类，将数据与每个“唯一键”相关联。然后您可以轻松查询数据。

当您需要在会话到期时进行锻炼时，更困难的部分来了。如果您采用数据库方法，您可以编写一个 Windows 服务来查询“最后更新的会话”标志，如果会话过期超过给定时间，则删除该会话。如果您选择“内存中”方法，这可能会更难管理。

“内存中”选项的另一个缺点是您需要小心存储过多信息并耗尽可用内存。这是我选择数据库存储的主要原因

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:56:19.447

除非您想让每次交互都成为 POST，在每次用户单击链接时传递会话数据，否则您必须将状态存储在某个地方（例如数据库），并使用轻量级 ID 查找它（就像你描述的mac地址）。

当然，不一定非得是 SQL 数据库，你可以看看 [redis](http://redis.io/)之类的其他存储机制。

# python - 如何让pylint在spyder中工作

> ID：13345841
> 
> 赞同：3
> 
> 时间：2012-11-12T14:50:57.597
> 
> 标签：python, pylint, spyder

我是 python 编程新手。我在让 pylint 工作时遇到了麻烦。我设法在 spyder 中安装了 pylint，并且在 spyder 中获得了 pylint 窗口。问题是，如果我尝试这样做，我似乎无法在 pylint 窗口中打开任何文件，我选择的文件不会显示在 pylint 窗口中，消息“找不到 Pylint 脚本。请添加 C:\ pytnon27\scripts 到 PATH”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:04:47.127

那么您是否尝试过将 C:\python27\scripts 添加到系统路径中？

尽管[此处](http://best-windows.vlaurie.com/environment-variables.html)给出的教程已经过时，但您应该能够解决问题。

# javascript - 在 html 页面中显示经过的时间

> ID：13345842
> 
> 赞同：0
> 
> 时间：2012-11-12T14:50:59.450
> 
> 标签：javascript, php, html, timer

我试图在一个 html 页面上显示经过的时间，我需要一个 48 小时计时器，它将 hh:mm:ss 倒计时到 0，当按下开始时它将开始倒计时，然后运行到 0 一些示例代码或任何帮助都会很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:22:55.803

我建议使用现有的倒计时插件，这些插件是用 jQuery（流行的 JavaScript 库）编写的。

这是我刚从网上摘下来的一个：

[http://code.google.com/p/jquery-countdown/](http://code.google.com/p/jquery-countdown/)

您将能够对在页面内启动计时器的方式进行细微修改（即：通过将其附加到按钮单击事件）。

# ios - 应用程序委托给 Viewcontroller

> ID：13345845
> 
> 赞同：1
> 
> 时间：2012-11-12T14:51:14.953
> 
> 标签：ios, xcode

我的应用程序委托中有一个 NSURL 属性：

```
@property (nonatomic, retain) NSURL *openedURL; 
```

...进而：

```
- (BOOL)application:(UIApplication *)application
         openURL:(NSURL *)url
 sourceApplication:(NSString *)sourceApplication
      annotation:(id)annotation {
// attempt to extract a token from the url
self.openedURL = url;
// attempt to extract a token from the url
return [FBSession.activeSession handleOpenURL:url];       
} 
```

我想将此代码移动到普通的 UIViewController。我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:57:18.950

只有 appdelegade 可以拥有`openURL:`处理程序，但您可以在任何控制器或任何 NSObject 中调用方法，并在那里执行您希望的代码。

# ruby-on-rails - Rails 3 respond_with 自定义模板

> ID：13345846
> 
> 赞同：6
> 
> 时间：2012-11-12T14:51:16.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的控制器中有一个`latest`动作。此操作仅抓取最后一条记录并呈现`show`模板。

```
class PicturesController < ApplicationController
  respond_to :html, :json, :xml

  def latest
    @picture = Picture.last

    respond_with @picture, template: 'pictures/show'
  end
end 
```

有没有更简洁的方式来提供模板？`pictures/`由于这是站点控制器，因此必须提供 HTML 格式的部分似乎是多余的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T15:04:19.263

如果你要渲染的模板属于同一个控制器，你可以这样写：

```
class PicturesController < ApplicationController
  def latest
    @picture = Picture.last

    render :show
  end
end 
```

图片/路径不是必需的。你可以在这里更深入：[Rails 中的布局和渲染](http://guides.rubyonrails.org/layouts_and_rendering.html)

如果需要保留 xml 和 json 格式，可以这样做：

```
class PicturesController < ApplicationController
  def latest
    @picture = Picture.last

    respond_to do |format|
      format.html {render :show}
      format.json {render json: @picture}
      format.xml {render xml: @picture}
    end

  end
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-03T21:52:22.980

我的做法与@Dario Barrionuevo 类似，但我需要保留 XML 和 JSON 格式，并且不喜欢做一个`respond_to`块，因为我正在尝试使用`respond_with`响应器。事实证明你可以做到这一点。

```
class PicturesController < ApplicationController
  respond_to :html, :json, :xml

  def latest
    @picture = Picture.last

    respond_with(@picture) do |format|
      format.html { render :show }
    end
  end
end 
```

默认行为将根据 JSON 和 XML 的需要运行。您只需指定需要覆盖的一种行为（HTML 响应），而不是全部三种。

[来源在这里](http://archives.ryandaigle.com/articles/2009/8/6/what-s-new-in-edge-rails-cleaner-restful-controllers-w-respond_with)。

# git - 与 Github for Mac 应用同步时出错

> ID：13345849
> 
> 赞同：4
> 
> 时间：2012-11-12T14:51:22.440
> 
> 标签：git, github, github-for-mac

我在同步时尝试登录后收到此错误。我不知道是什么原因造成的，并且在搜索时似乎找不到任何有关它的信息。我知道我输入了正确的用户名和密码。有人有想法么？

`2012-11-12 09:49:20.122 GitHub for Mac Login[64648:707] Error reading generic password: The user name or passphrase you entered is not correct. 2012-11-12 09:49:20.123 GitHub for Mac Login[64648:707] Error reading internet password: The specified attribute does not exist. error: unable to read askpass response from '/Applications/GitHub.app/Contents/MacOS/GitHub for Mac Login' fatal: could not read Username for 'https://github.com': Device not configured (256)`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T14:56:19.847

弄清楚了。必须在 github 应用程序设置中更改主远程存储库地址。将其更改为 SSH 地址，现在它可以工作了。*耸耸肩*

# html - 为画布设置填充样式颜色的更有效方法（通过字符串）？

> ID：13345850
> 
> 赞同：2
> 
> 时间：2012-11-12T14:51:24.580
> 
> 标签：html, canvas

我需要在为某些元素设置动画时动态更改填充颜色。我想知道是否有比构建字符串更有效的方法来设置当前的填充样式，然后让浏览器再次解析它？：

```
ctx.fillStyle = "rgba(" + r + "," + g + "," + b + "," + a + ")"; 
```

我已经将 r,g,b,a 组件作为整数，有什么方法可以直接将它们提供给系统而不是跳过这个箍？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:08:43.333

不幸的是，分配 a 的唯一方法`fillStyle`是通过包含有效颜色值的字符串。

来自[w3.org](http://www.w3.org/TR/2011/WD-2dcontext-20110525/#dom-context-2d-fillstyle)

> 语境 。fillStyle [ = value ] 返回用于填充形状的当前样式。
> 
> 可以设置，改变填充样式。
> 
> 样式可以是包含 CSS 颜色的字符串，也可以是 CanvasGradient 或 CanvasPattern 对象。无效值将被忽略。

# .net - .NET Linq to XML：最终值覆盖以前的 DISTINCT 值

> ID：13345853
> 
> 赞同：4
> 
> 时间：2012-11-12T14:51:42.407
> 
> 标签：.net, linq

如果它返回单行，我有一个可以正常工作的查询。但是，如果有多行，它将：

1.  创建正确数量的行
2.  错误地将每一行分配给最后一行的值...在这种情况下，它将返回 x3 行，因为这是满足查询的最终节点。

我原以为它会返回 x3 DISTINCT 行。谁能建议为什么最终的xml节点会覆盖不同的值？

谢谢

```
<?xml version="1.0" encoding="utf-8" ?>
<Music>
<customer id="89">
    <name value="Sample Name 2" />
    <age value="31" />
    <location>
        <city value="Wichita" />
        <state value="KS" />
        <country value="USA" />
    </location>
</customer>
<customer id="80">
    <name value="Sample Name 3" />
    <age value="41" />
    <location>
        <city value="Seattle" />
        <state value="WA" />
        <country value="USA" />
    </location>
</customer>
<customer id="84">

    <name value="Sample Name" />
    <age value="29" />
    <location>
        <city value="Los Angeles" />
        <state value="CA" />
        <country value="USA" />
    </location>
</customer>
<customer id="100">
    <name value="Rock UK" />
    <age value="25" />
    <location>
        <city value="Los Angeles" />
        <state value="CA" />
        <country value="USA" />
    </location>
</customer>
</Music> 
```

代码如下：

```
private List<Music> currentMusic { get; set; }
    private IEnumerable<Music> GetCustomer(string id)
    {
        XElement main = XElement.Load(@"D:\work\web\App_Data\Customers.xml");

        IEnumerable<XElement> searched =
            from c in main.Elements("customer")
                where (string)c.Attribute("id") != "100"

            select c;

        Music music = new Music();

        currentMusic = new List<Music>();

        foreach (XElement customer in searched)
        {                
            music.Country = customer.Element("name").Attribute("value").Value;
            music.Name = customer.Element("age").Attribute("value").Value;
            currentMusic.Add(music);
        }
        return currentMusic;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:56:09.480

`Music music = new Music();`在你的`foreach`循环内移动。

目前，您正在创建一个`Music`实例并将其多次添加到列表中。每次更新它时，列表中的每个项目都会受到影响，因为它们都是相同的项目。

# android - 在 AsyncTask 中使用 Android 服务进行网络连接的问题

> ID：13345856
> 
> 赞同：0
> 
> 时间：2012-11-12T14:51:49.780
> 
> 标签：android, networking, android-asynctask, android-service

我想使用 a`Service`来使用 AsyncTask 建立我的连接。我想在每个活动中引用在`m_netLinkIp`连接设置期间创建的变量。

目前我的服务看起来像这样：

```
package de.bertrandt.bertrandtknx;

import de.bertrandt.bertrandtknx.Controls.Dimmer;
import tuwien.auto.calimero.link.KNXNetworkLinkIP;
import tuwien.auto.calimero.process.ProcessCommunicator;
import android.app.ProgressDialog;
import android.app.Service;
import android.content.Intent;
import android.net.wifi.WifiInfo;
import android.net.wifi.WifiManager;
import android.os.AsyncTask;
import android.os.IBinder;
import android.os.RemoteException;
import android.util.Log;
import android.widget.Toast;

public class ConnectionService extends Service {

    private static final String TAG = "ConnectionService";
    private static KNXNetworkLinkIP m_netLinkIp = null;
    private static ProcessCommunicator m_pc = null;
    private static boolean connection_ok;

           @Override
           public IBinder onBind(Intent intent) {
              return null;
           }

           @Override
           public void onCreate() {
              //code to execute when the service is first created
               new Connect().execute();
           }

           @Override
           public void onDestroy() {
              //code to execute when the service is shutting down
               new Disconnect().execute();
           }

           @Override
           public void onStart(Intent intent, int startid) {
              //code to execute when the service is starting up
           }

    /**
     * Connect Async
     * */
    private class Connect extends AsyncTask<String, Void, String> {
          ProgressDialog dialog;
          boolean ok;
          @Override
          protected String doInBackground(String... params) {
              try {
                  //get local IP address
                  String ipAddress = getIpAddr();
                  System.out.println("WiFi address is " + ipAddress);

                  m_netLinkIp = Calimero.Util.connect(ipAddress, "192.168.0.2");

                  if (m_netLinkIp == null){

                      System.out.println("Can not connect to Demobard");
                      ok = false;
                  }
                  else{
                      System.out.println("Connected to Demoboard");
                      ok = true;

                      }
               } catch (Exception e) {         
                   e.printStackTrace(); 
               }
               return null;
          }      

          @Override
          protected void onPostExecute(String result) { 
            //dialog.dismiss();
            Toast.makeText(getApplicationContext(),
                    "Verbindung mit Demoboard " +
                            ((ok == true) ? "hergestellt" : "fehlgeschlagen"), Toast.LENGTH_LONG).show();
            if(ok == false){
                //show reconnect dialog
                //reconnect_dialog();
            }
          }

          @Override
          protected void onPreExecute() {
           // Setup Progress Dialog
           dialog = new ProgressDialog(Dimmer.this);
           dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
           dialog.setMessage("Bitte warten, verbinde mit KNX-Board");
           dialog.setIndeterminate(true);
           dialog.show();
          }
    }

    /**
     * GetIPAddress Async
     * */
    public String getIpAddr() {
           WifiManager wifiManager = (WifiManager) getSystemService(WIFI_SERVICE);
           WifiInfo wifiInfo = wifiManager.getConnectionInfo();
           int ip = wifiInfo.getIpAddress();

           String ipString = String.format(
           "%d.%d.%d.%d",
           (ip & 0xff),
           (ip >> 8 & 0xff),
           (ip >> 16 & 0xff),
           (ip >> 24 & 0xff));

           return ipString.toString();
    }

    /**
     * Disconnect Async
     * */
    private class Disconnect extends AsyncTask<String, Void, String> {
          @Override
          protected String doInBackground(String... params) {
                    try {
                        Calimero.Util.disconnect(m_netLinkIp);
                    } catch (Exception e) {
                        e.printStackTrace(); 
                    }
                return null;
          }      

    }

} 
```

所以这是我的问题：

1.）如何在我的任何活动中调用服务并获取对`m_netLinkIp`变量的引用，这样我就不必在每个活动中重新连接？目前我这样称呼它：`startService(new Intent(this, ConnectionService.class));`

*解决方案*：我将 Service 类中的全局变量更改为`public static KNXNetworkLinkIP m_netLinkIp = null;`，现在我可以在每个活动中调用它，如下所示：`m_netLinkIp= ConnectionService.m_netLinkIp;`

2.) 如何在每个活动中显示 ProgressBar？我必须在声明中添加活动：`dialog = new ProgressDialog(Dimmer.this);`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:01:52.963

我对下载服务也有同样的问题。最初，我有一个包含大量样板代码的布局，以响应活页夹的回调事件。现在我有一个独立的片段，我将它添加到需要显示进度的每个活动中。

# algorithm - 不是婚姻或室友，而是 3 人一组

> ID：13345860
> 
> 赞同：-1
> 
> 时间：2012-11-12T14:51:56.483
> 
> 标签：algorithm, optimization, stable-marriage

我正在尝试找到一种算法来根据偏好将一组学生分成小组。每个学生选择三个他们想合作的学生和三个他们不想合作的学生。其余的被假定为“如有必要可以使用”。

找到最符合他们偏好的学生组合的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:08:44.347

我想[模拟退火](http://en.wikipedia.org/wiki/Simulated_annealing)会很好地做到这一点，而不是难以实施。

# android - 为什么我的位图显示在画布上的另一个位图顶部时会出现奇怪的像素错误

> ID：13345861
> 
> 赞同：0
> 
> 时间：2012-11-12T14:51:56.150
> 
> 标签：android

我正在将位图（球）绘制到 SurfaceView 画布上，然后在我绘制新位图（发光）以使其出现在球位图的顶部之后，我正在上下调整发光位图 alpha 以对其进行动画处理作为光泽/发光。但是闪耀位图在绘制时似乎有一些奇怪的像素错误，而且我给它的 alpha 越多，它就越糟糕。

看看这里的结果：![在此处输入图像描述](../Images/4beb3e86e57dde48517742cb5b59a403.png)那些蓝色/红色像素不存在于我使用的 png 中。

这是我对球对象的初始化：

```
sparklePaint = new Paint();
sparklePaint.setAlpha(0); 
```

然后是我对球对象的动画方法：

```
public void doAnimate() {
    if (sparkleAnimating) {
        if (sparklePaint.getAlpha() == 255) {
            sparkleOpcatyUp = false;
        }
        if (sparkleOpcatyUp) {
            int opacity = sparklePaint.getAlpha() + sparkleOpacityStep;
            if (opacity > 255) {
                opacity = 255;
            }
            sparklePaint.setAlpha(opacity);
        } else {
            int opacity = sparklePaint.getAlpha() - sparkleOpacityStep;
            if (opacity < 0) {
                opacity = 0;
            }
            sparklePaint.setAlpha(opacity);
            if (opacity == 0) {
                sparkleOpcatyUp = true;
                sparkleAnimating = false;
            }
        }
    } else {
        sparkleAnimTick++;
        if (sparkleAnimTick == sparkleAnimDelay) {
            sparkleAnimTick = 0;
            sparkleAnimating = true;
        }
    }
} 
```

在我的绘制循环中：

```
for (Ball ball : balls) {
    if (ball != null && ball.getBitmap() != null) {
        int[] pos = ball.getPos();
        canvas.drawBitmap(ball.getBitmap(), pos[0], pos[1], null);

        pos = ball.getSparklePos();
        canvas.drawBitmap(ball.getSparkle(), pos[0], pos[1], ball.getSparklePaint());
        ball.doAnimate();
    }
} 
```

关于这里出了什么问题的任何想法？这不是在另一个位图上绘制位图的方法吗？我需要设置一些混合模式吗？

该问题存在于模拟器和设备上。

谢谢索伦_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:03:00.983

尝试在油漆上使用 Paint.setDither() 和 Paint.setAntiAlias() 来绘制球和发光。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T10:39:41.187

我在画布上发现了一些奇怪的像素错误。例如，如果您画一条线，然后以不同的颜色在其上绘制，则某些像素不是应有的像素。

例如，这段代码绘制了一个矩形，然后在它上面绘制了白色，这应该会擦除它，但它并没有完全擦除！

```
<canvas id="myCanvas" width="600" height="600"></canvas>
<script>

var canvas = document.getElementById('myCanvas');
var ctx = canvas.getContext('2d');

 ctx.lineWidth=1;     
 ctx.strokeStyle="black"; 
 ctx.beginPath();   
 ctx.strokeRect( 100, 50, 400, 300 );
 ctx.stroke();

 alert("Redraw in white");

 ctx.strokeStyle="white"; // clear previous line   
 ctx.beginPath();   
 ctx.strokeRect( 100, 50, 400, 300 );
 ctx.stroke();

</script> 
```

# java - 根据条件的 JSP 重定向问题

> ID：13345864
> 
> 赞同：0
> 
> 时间：2012-11-12T14:52:04.990
> 
> 标签：java, jsp

我有不同的俱乐部，不同的领域如下：

```
Kid club = kidclub.google.mobi
Youth Club = youthclub.yahoo.mobi
Adult Club=adult.godaddy.mobi
Elderly Club = elderly.google.mobi 
```

重定向设置如下（重定向设置示例）：

```
1\. Kid Club should redirect to Youth Club 
2\. Youth Club should redirect to Adult Club
3\. Adult Club should redirect to Elderly Club
4\. Elderly Club should redirect to Kid club 
```

问题场景：如果用户尝试订阅儿童俱乐部，如果他没有注册到这个俱乐部，他会被转发到域“kidclub.google.mobi”。但如果他已经注册，那么他应该被重定向到设置中定义的另一个俱乐部青年俱乐部 (youthclub.yahoo.mobi)。如果他再次注册到青年俱乐部，那么他应该会自动重定向到成人俱乐部（adult.godaddy.mobi）。这种情况一直持续到他没有注册的俱乐部。

我有以下代码，它只能重定向到一个俱乐部，但我无法检查用户是否订阅了第二个俱乐部的条件。

```
//ClubDao.isActive(user,club) returns TRUE if user is active to that club and 
FALSE if user is inactive. 

if( user != null && club != null && ClubDao.isActive(user, club))
{
redirectReturningUser( request, response,domain );
}

void redirectReturningUser( HttpServletRequest request, HttpServletResponse 
response,Domain currentDomain )
{
String redirectToUrl = currentDomain.getDefaultUrl();

if( "kidclub.google.mobi".equals( currentDomain.getDefaultUrl() ) )
   redirectToUrl = "youthclub.yahoo.mobi";
else if( "youthclub.yahoo.mobi".equals( currentDomain.getDefaultUrl() ) )
   redirectToUrl = "adult.godaddy.mobi";
else if( "adult.godaddy.mobi".equals( currentDomain.getDefaultUrl() ) )
   redirectToUrl = "elderly.google.mobi";
else if( "elderly.google.mobi".equals( currentDomain.getDefaultUrl() ) )
   redirectToUrl = "kidclub.google.mobi";

       doRedirect(response, "http://"+redirectToUrl );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:56:57.670

如果您将每个映射`Club`到 url 字符串，然后在建立针对俱乐部的用户成员资格时检索该字符串会怎样。

```
 static Map<Club, String> redirectMap= new LinkedHashMap<Club, String>();

  static  {
    redirectMap.put(new Club("kidclub.google.mobi"), "youthclub.yahoo.mobi");
    redirectMap.put(new Club("youthclub.yahoo.mobi"), "adult.godaddy.mobi");
    redirectMap.put(new Club("adult.godaddy.mobi"), "elderly.google.mobi");
    redirectMap.put(new Club("elderly.google.mobi"), "kidclub.google.mobi");

  }

  void redirectReturningUser (HttpServletRequest request, HttpServletResponse response) throws IOException {
    Map<Club, String> tmpRredirectMap = new LinkedHashMap<Club, String>();
    for (Map.Entry<Club, String> entry: redirectMap.entrySet()){

      Club club = entry.getKey();
      String redirectUrl = entry.getValue();
      if( user != null && club != null && ClubDao.isActive(user, club))  {
        tmpRredirectMap.put(club, redirectUrl);
      }
    }
    boolean done = false;
    String tempUrl = domain.getDefaultUrl();
    int count = redirectMap.size();
    Club tempClub = new Club(tempUrl);
    do {
      if (tmpRredirectMap.keySet().contains(tempClub)){
        tempClub = new Club(redirectMap.get(tempClub));
        count--;
      } else {
        done = true;
      }
    } while (! done && count > 0);
    redirectReturningUser(request, response, tempClub.getName());
  }
  void redirectReturningUser( HttpServletRequest request, HttpServletResponse  response, String redirectUrl ) throws IOException {

    doRedirect(response, "http://"+redirectUrl );
  }

  private void doRedirect(HttpServletResponse response, String s) throws IOException {
    response.sendRedirect(s);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:15:10.887

我使用while循环来解决这个问题，它解决了！！

```
while(registered==true){

   //code for redirectconditions
    .......................

    checkifRegistered==false??
     }
  redirectUser(club URLLink); 
```

谢谢，

# bash - 暂停功能在以前的服务器 CentOS 9 中工作的脚本中不起作用

> ID：13345866
> 
> 赞同：0
> 
> 时间：2012-11-12T14:52:09.267
> 
> 标签：bash, function, variables, include

我一直在使用线程中的暂停功能：

[Linux 相当于 DOS 暂停是什么？](https://stackoverflow.com/questions/92802/what-is-the-linux-equivalent-to-dos-pause)

我全新安装了 CentOS 9 并尝试运行我使用

```
# !/bin/bash

 source variables.sh

`function pause(){
    read -p "$*"
}` 
```

我现在收到此错误消息：

```
 : No such file or directoryariables.sh

'/pac-installv8: command substitution: line 18: syntax error near unexpected token `{
'/pac-installv8: command substitution: line 18: `function pause(){ 
```

我已经为操作系统运行了 yum update -q -y 以查看它是否修复了该功能，但它没有。我包含的源 variables.sh 文件给出了一个文件未找到错误，即使我可以在同一根文件夹的测试脚本中使用相同的 variable.sh 文件并且它只运行 find

```
#!/bin/bash/

source variables.sh
echo "dbuser=$dbuser" 
```

这工作只是在同一台服务器上找到没有错误。我认为这必须是操作系统问题，但不知道从哪里开始。谢谢你的帮助。

宣威

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:57:59.133

错误消息来自您的`source`命令。是从哪里来`variables.sh`的？您可能需要使用完整的路径名。

你的第一行有一个错误，在`#`和之间不应该有空格`!`，应该是（*在之后*的`#!/bin/bash`可选空格）。*`!`*

 *函数周围不需要反引号，语法为：

```
function pause { ... } 
```

或者

```
pause() { ... } 
```

不是两者，虽然这不应该产生错误。*

# verilog - 在verilog中将数字乘以十

> ID：13345876
> 
> 赞同：0
> 
> 时间：2012-11-12T14:52:33.813
> 
> 标签：verilog, hdl

你如何在verilog中将二进制数乘以十？是不是这么简单

```
reg [7:0] a,b;
reg[31:0] p;
b= 8'b00001001;
p=a*b; 
```

升级到 Windows 8，我的 xilinx 正在使用 atm。需要尽快了解规划阶段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:31:24.590

几乎 - 10 二进制是`1010`！对于两个 8 位数字相乘，您只需要 16 位即可得到结果，因此`reg [15:0] p`也可以。关于什么：

```
 always @( a )
     p = a * 8'd10; 
```

或者

```
wire [13:0] p;
assign p = a * 4'd10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:47:08.043

我不确定 HDL 综合工具在将乘法转换为位移方面有多好。我不想意外地为这段代码合成一个乘法器（即使你的 CPU 也不太可能为此使用乘法器）。

```
wire [7:0] a;
wire [11:0] shift2;
wire [11:0] shift1;
wire [11:0] result;

assign shift2 = a << 3; // a * 8
assign shift1 = a << 1; // a * 2
assign result = shift2 + shift1; 
```

# java - 从junit测试中获取结果

> ID：13345877
> 
> 赞同：0
> 
> 时间：2012-11-12T14:52:37.370
> 
> 标签：java, testing, junit, automation, selenium-webdriver

我正在使用 selenium webdriver 2.0 java api 在我的公司运行一些测试。我是随意做的，对自动化没有太多的了解，所以我的无知。

如果我想将测试结果记录到文件中，我想知道如何从“@test”方法中检索结果。

假设我有这个测试用例，我将如何将结果作为布尔值返回？

```
@Test
public void like(){

    WebDriverWait wait = new WebDriverWait(driver, 5);

    wait.until(ExpectedConditions.presenceOfElementLocated(By.className("feed-item-ph")));  

    WebElement like = driver.findElement(By.cssSelector("a.action-block-a.action-like"));
    like.click();

    wait.until(ExpectedConditions.presenceOfElementLocated(By.id("registration-book")));

    driver.quit();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:57:15.707

好吧，你不能。它要么是一个测试用例，要么是一个常规函数。由于 Testdriver 决定如何调用您的测试用例并且它不知道如何处理布尔值，所以这没有任何意义。

使其工作的最简单方法是编写一个返回布尔值的函数，然后在测试用例中调用该函数。然后，您可以轻松地收集您想要的所有信息。

# html - 绝对 div 的背景图像在滚动时被切断

> ID：13345883
> 
> 赞同：4
> 
> 时间：2012-11-12T14:52:51.973
> 
> 标签：html, css

我知道还有其他类似的帖子，但我似乎找不到确切的答案......所以......

我想创建一个 jquery 幻灯片，其中背景图像淡入淡出，所以我没有将背景图像放在 body 标记中，而是创建一个填充整个屏幕并放置其他元素（如菜单）的 div顶端。但是当我使视口小于菜单的高度并向下滚动时，我会看到一个背景色块在我的图像上向上移动。我已经尝试了我能想到的一切来解决这个问题，但我完全被卡住了。

这是一个简化版本。红色块是图像所在的位置，黑色是背景色，菜单以灰色覆盖。CSS：

```
body, html {
    margin: 0px;
    padding: 0px;
    height: 100%;
    background-color: #000000;
    font-family: "Helvetica Neue", Arial, sans-serif;
    font-size: 1em;
    line-height: 1em;
    color: #9E9E9E;
    position: relative;
}
body {
    text-align: center;
}
* {padding: 0px; margin: 0px}
#wrap {
    width: 100%;
    min-height: 100%;
    background-color: #900;
    position: absolute;
    z-index: 1000;
}
#menu_wrap {
    width: 390px;
    min-height: 100%;
    background-color: #656262;
    position: absolute;
    z-index: 9999;
    background: rgb(101, 98, 98);
    background: rgba(101, 98, 98, 0.9);
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=90)";
    filter: alpha(opacity=90);
}
#menu_wrap #menu_content {
    padding: 40px;
    height: 500px;
} 
```

HTML：

```
<div id="wrap"></div>

<div id="menu_wrap">
    <div id="menu_content">Menu content goes here - it could be any height.</div>Menu extends to here.
</div> 
```

任何帮助将不胜感激。可能是我错过了一些非常简单的事情，但我觉得我的头撞到了一堵砖墙上。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:08:54.347

这是一个 jsfiddle 链接，我认为它可以满足您的要求。

[http://jsfiddle.net/Alfalfamale/dCgRW/1/](http://jsfiddle.net/Alfalfamale/dCgRW/1/)

您的设置的问题是 wrap div 最小高度 (100%) 将始终是其父级 100% 的高度，即主体，始终只是视口大小。

为了解决这个问题，我将菜单移到了 wrap 里面，让它浮动而不是绝对定位。这样，菜单保持在文档的“流动”状态并占用`#wrap`. 其次，我们添加`overflow: hidden`到包装中，基本上清除了左侧菜单。

我可能留下了一些在浮动设置中不是必需的样式，我相信你可以自己挑选出来:)

# java - 使 JacksonMappingHttpMessageConverter 在 spring-mvc 中工作

> ID：13345886
> 
> 赞同：1
> 
> 时间：2012-11-12T14:53:00.253
> 
> 标签：java, spring, spring-mvc, jackson

我的控制器中有以下设置..

```
@RequestMapping(value="/security_param", method=RequestMethod.GET)
    public @ResponseBody BigInteger getSecurityParam(){
        return result.getBigInteger();
    } 
```

所以，当我通过在浏览器中输入来检查我的回复时，我得到了以下信息：

```
350094078853290372226929324000742644466642262681952226409886256271736198431807728267526406481556587992703721192341876290504971375383029475460844121232586227913173796191951197042895656298303777249177945550375699884594977303136892333029758596862673993846972456155271723432095094859391751714939658055297007851105568438549148984628844489662466256443824528144049402449678472642642...truncated 
```

在我`RestTemplate`这边，我有这样的`JacksonMappingHttpMessageConverter`设置：

```
CommonsClientHttpRequestFactory factory =  new CommonsClientHttpRequestFactory(commonsClient);

        RestTemplate httpClient2 = new RestTemplate(factory);
        List<HttpMessageConverter<?>> converters = new ArrayList();
        converters.add(new MappingJacksonHttpMessageConverter());
        httpClient2.setMessageConverters(converters);

        URL serverDomainUrl = new URL("http://127.0.0.1:8080");
        String urlPath = new URL(serverDomainUrl, "/trusted_server/security_param").toString();

        BigInteger xx = httpClient2.getForObject(urlPath, BigInteger.class); 
```

不知何故，反序列化效果不佳，我收到以下错误。

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 200
    at org.codehaus.jackson.impl.Utf8StreamParser.parseNumberText(Utf8StreamParser.java:531)
    at org.codehaus.jackson.impl.Utf8StreamParser._nextTokenNotInObject(Utf8StreamParser.java:435)
    at org.codehaus.jackson.impl.Utf8StreamParser.nextToken(Utf8StreamParser.java:323)
    at org.codehaus.jackson.map.ObjectMapper._initForReading(ObjectMapper.java:2439)
    at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2396)
    at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1662)
    at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.readInternal(MappingJacksonHttpMessageConverter.java:135)
    at org.springframework.http.converter.AbstractHttpMessageConverter.read(AbstractHttpMessageConverter.java:154)
    at org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:74)
    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:446) 
```

尝试强制 String 对象类型也会产生相同的结果。似乎对长度有某种限制。

有谁知道这是什么原因？试过环顾四周，但找不到任何答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:01:19.083

我相信 Jackson 对 RestTemplate 和 MVC 的支持（如果我记得，它们使用相同的转换器）仅适用于对象、集合和地图。

因此，您可能应该执行以下操作：

```
@RequestMapping(value="/security_param", method=RequestMethod.GET)
public @ResponseBody Map<String,Object> getSecurityParam(){
    Map<String,Object> m = new LinkedHashMap<String,Object>();
    m.put("token", result.getBigInteger().toString());
    return m;
} 
```

这将返回如下响应：

```
{"token" : "350094078853290372226929324000...."} 
```

那就是在数字和字符串等文字上使用对象、集合和映射。这也是**有道理的**，因为： `350094078853290372226929324000742644466642262681952226409886256271736198431807728267526406481556587992703721192341876290504971375383029475460844121232586227913173796191951197042895656298303777249177945550375699884594977303136892333029758596862673993846972456155271723432095094859391751714939658055297007851105568438549148984628844489662466256443824528144049402449678472642642`

不是有效的**JSON**。它似乎适用于 MVC 的原因是，`Converter`与杰克逊不同的是，它正在进行转换。

您还应该知道，BigInteger 通常在 JSON 中不受支持（无论是否在对象中）。我很确定杰克逊会将其转换为字符串，但您也应该意识到这一点。

我不会使用 BigInteger 作为令牌（如果这就是您使用它的目的），而是使用更小且可能更安全的 base64 编码字符串。

# android - 需要一些帮助以在 Android 中进行游戏开发

> ID：13345887
> 
> 赞同：0
> 
> 时间：2012-11-12T14:53:00.313
> 
> 标签：android, touch, render, surfaceview

我们目前正在使用 Renderer 和 Canvas 在 Android 上开发 RPG。

我们的“主要”方法是一个 Surfaceview，我们在其中调用不同的东西，比如地图、怪物，至少还有角色。所有这些都是可绘制的，并且有一个线程，如果他们需要移动到 MapArray 的下一个块，他们可以在其中更改像素位置。这意味着我们的地图是按正方形划分的，如果它们移动，它们会得到一个带有睡眠的线程，这会改变其像素位置。如果渲染器绘制它们，它会在像素位置而不是在 MapArray 位置绘制。（渲染在ouar surfaceview中，渲染循环有自己的类）渲染首先绘制地图（背景缩放到Viewsize），如果使用char +技能，怪物和至少界面。

目前，surfaceview 没有 XML 布局，如果我们需要它，我有点困惑？目前它的表面是由一个开始按钮从 Mainactivity 调用的

下一个问题是，我如何实现触摸事件。我真的需要在surfaceview中获取事件检查它是否在正确的正方形并通过squere调用函数吗？或者有没有办法绘制一个游戏手柄（位图可能稍后在一个精灵上）并使其可触摸或类似的东西？它是否自动支持多点触控？（同时移动和使用技能）

在基本的想法和实现中，我们刚刚做错了什么吗？（如果您需要一些代码，请告诉我）

最好的问候本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:56:52.420

1.  如果您在屏幕上只有一个`SurfaceView`并且您的游戏渲染是在其中完成的，那么我看不出拥有 XML 布局的意义。
2.  `onTouchEvent()`对于触摸事件，除了处理 SurfaceView 的触摸事件（通过覆盖方法）并检查坐标以决定如何处理之外，我没有看到任何其他选项。

# c# - 动态更新 DataGrid 行

> ID：13345888
> 
> 赞同：0
> 
> 时间：2012-11-12T14:53:11.377
> 
> 标签：c#, wpf, datagrid

我有一个`DataGrid`这样的：

```
 class SearchFile
    {
        public string path { set; get; }
        public int count { set; get; }
    }

   //...

        files = new List<SearchFile>();

        DataGridTextColumn col1 = new DataGridTextColumn();
        DataGridTextColumn col2 = new DataGridTextColumn();
        col1.Header = "File";
        col2.Header = "count";
        col1.Binding = new Binding("path");
        col2.Binding = new Binding("count");
        dataGrid1.Columns.Add(col1);
        dataGrid1.Columns.Add(col2); 
```

我这样做是为了填充项目源：

```
 foreach(var file in allFiles)
            {
                SearchFile sf = new SearchFile() { path=file, count=c };
                files.Add(sf);
            } 
```

以上是将多次启动的事件处理程序的一部分。我在哪里将 绑定`files`到`ItemsSource`属性以使其动态更新？我尝试将它放在 foreach 循环之后，但只有第一次运行有任何影响，并且网格在后续运行中不会改变（何时`allFiles`不同）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:54:18.197

使用`ObservableCollection`. 它会在添加、删除项目或刷新整个列表时提供通知：

```
files = new ObservableCollection<SearchFile>(); 
```

# java - 按下 Enter 后如何防止 StyledText 中的新行

> ID：13345890
> 
> 赞同：9
> 
> 时间：2012-11-12T08:22:45.557
> 
> 标签：java, user-interface, swt, newline, styledtext

在启用 preventNewLines 标志的情况下，我需要在按 Enter 键后阻止 TextViewer 创建新行。

我有这段代码：

```
TextViewer myTextViewer = new TextViewer (myGroup, SWT.V_SCROLL 
                                          | SWT.FULL_SELECTION 
                                          | SWT.BORDER | SWT.WRAP);
myTextViewer.setDocument(new Document(myText));
StyledText myStyledText = myTextViewer.getTextWidget();

myStyledText.addTraverseListener(new TraverseListener() {
     @Override
     public void keyTraversed(TraverseEvent e) {
         if (e.detail == SWT.TRAVERSE_RETURN) {
            if (preventNewLines) 
               e.doit = false;
         }
     }
}); 
```

但无论如何它都会产生新的线条......我做错了什么？有人可以向我发布正确的代码如何防止它吗？

**编辑：** 好的，我幸运地找到了答案，我希望它对其他人有帮助，也许......

```
myStyledText.addVerifyKeyListener(new VerifyKeyListener() {

    @Override
    public void verifyKey(VerifyEvent e) {
        if (preventNewLines && 
            (e.keyCode == SWT.CR || e.keyCode == SWT.KEYPAD_CR)) {
           e.doit = false;
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T20:39:58.763

这已在这里得到回答[https://stackoverflow.com/a/7589098/18445](https://stackoverflow.com/a/7589098/18445)

```
@Override
public boolean isNavigationEvent(ColumnViewer viewer, Event event) {
    return event.keyCode == SWT.CR || event.keyCode == SWT.KEYPAD_CR;
} 
```

# debugging - 调试 PyroCMS 速度

> ID：13345891
> 
> 赞同：1
> 
> 时间：2012-11-12T14:53:17.433
> 
> 标签：debugging, logging, pyrocms

我有一个`PyroCMS`项目，加载页面需要很长时间。

例如，在 CMS 部分，经常会看到：

`Rendered in 5.3715 sec. using 13.72MB.`

我可以查看某个日志以查看需要这么长时间的日志吗？

**编辑**添加`?_debug=1`，这是我的`Benchmark`

```
 BENCHMARKS  
Loading Time: Base Classes      0.8124
My Controller   2.2116
Parse   0.0004
Controller Execution Time ( Admin / Index )     3.3362
Total Execution Time    4.1492 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:02:50.680

更多地了解您的设置将有很大帮助。

你在使用 Windows 吗？
您是在记录所有内容还是仅记录错误？
这是在仪表板上吗？
是否设置了缓存，还是每次都尝试加载所有数据？
它是什么版本？
你的服务器在月球上吗？

我们有一些使用 PyroCMS（例如联合国儿童基金会）的知名度很高的网站，所以我们知道它并不完全慢。

尝试添加`?_debug=1`到 URL 以查看一些基准信息。

# javascript - 如何更改 Gmaps.js 在 Google 地图中使用的图标？

> ID：13345894
> 
> 赞同：3
> 
> 时间：2012-11-12T14:53:30.627
> 
> 标签：javascript, jquery, google-maps

如何使用最新版本的[GMaps.js](http://hpneo.github.com/gmaps/)更改我在代码中设置的图钉图标？

这是我正在尝试做的事情：

```
$('input[name="Address"]').blur(function () {
    GMaps.geocode({
        address: $('input[name="Address"]').val(),
        callback: function (results, status) {
            if (status == 'OK') {
                var latlng = results[0].geometry.location;
                map.setCenter(latlng.lat(), latlng.lng());
                map.addMarker({
                    lat: latlng.lat(),
                    lng: latlng.lng(),
                    icon: {
                        image: "http://i.imgur.com/12312.png"
                    }
                });
            }
        }
    });
}); 
```

运行此脚本时，Firebug 的控制台中会出现以下错误：

```
"NetworkError: 404 Not Found - http://localhost:17680/Account/undefined"

"NetworkError: 404 Not Found - http://localhost:17680/Account/undefined" 
```

我不明白为什么它会尝试 HTTP GET 该 URL，因为我从未在代码中的任何地方调用过它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T14:57:58.727

更改标记上的图标非常简单。

如果您阅读[文档](http://hpneo.github.com/gmaps/documentation.html#GMaps-createMarker)，请注意它说：

> 此外，createMarker 接受 google.maps.MarkerOptions 中定义的任何选项和 google.maps.Marker 中定义的任何标记事件（“事件”部分）。

如果您阅读 Google[文档](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)，只需拨打以下电话：

```
icon: "some-url-here" 
```

* * *

就我而言，它是：

```
$('input[name="Address"]').blur(function () {
    GMaps.geocode({
        address: $('input[name="Address"]').val(),
        callback: function (results, status) {
            if (status == 'OK') {
                var latlng = results[0].geometry.location;
                map.setCenter(latlng.lat(), latlng.lng());
                map.addMarker({
                    lat: latlng.lat(),
                    lng: latlng.lng(),
                    icon: "/images/mapicon.png"
                });

                $('input[name="Longitude"]').val(latlng.lng());
                $('input[name="Latitude"]').val(latlng.lat());
            }
        }
    });
}); 
```

# c# - 是否可以从 C# 创建 C++ 对象？

> ID：13345895
> 
> 赞同：2
> 
> 时间：2012-11-12T14:53:32.503
> 
> 标签：c#, c++, cross-language, multiple-languages

我目前正在开发一个游戏项目，所以我正在用 C# 开发我的编辑器，因为在 C++ 中完成它需要很多时间，所以为了提高效率，我使用 C# 作为编辑器的主要语言，以便快速获得结果。

但是，是否可以在 C# 中创建一个游戏编辑器来创建 C++ 可以读取的 C# 对象，或者在 C# 中创建一个可以在 C++ 中使用的 C++ 对象的游戏编辑器？

这是因为 C# 是 RAD 环境，所以开发 windows 应用程序很快，但 C++/DirectX 可能是最好的游戏环境。

有什么方法可以将两者结合起来，因为它们都是 .NET Framework 的一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:26:54.310

过去，我成功地使用 C++/Cli 从 C# 创建 C++ 对象。基本上，您可以创建一个加载/创建 c/c++（非托管）对象的 C++（托管）库。您可以从托管 (c#/vb) 库/应用程序中使用此托管库。请注意以下事项：

*   C++/cli 只能针对特定平台 (x86/x64) 构建，因此您需要相应地构建托管编辑器
*   只要微软不太喜欢这种情况，Visual Studio 2012 就不支持 C++/cli 的智能感知

COM 和 p/invoke 也是可行的替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:14:33.577

C# 和 C++ 之间的通信（或任何托管和非托管语言之间）是一件令人头疼的事情，除非您有非常非常好的理由使用，否则应该避免使用。

对于通信，您可以使用管道、WCF、COM、P/Invoke 和其他一些自定义商业选项。你可以在网上搜索一下。在我工作的引擎中，我们使用由多个进程共享的匿名 MemoryStream。

但是总是会出现一个问题，即对于 C++ 中的任何结构更改，您都需要在 C# 中反映这些更改。就像您更改方法采用的参数或结构的定义一样。有一些解决方案可以自动“塑造”您的 C#，使其始终与 C++ 保持同步，但它们实施起来既昂贵又繁重。

现在，为什么你不应该打扰！诚然，您不会在 C++ 之外找到高端商业引擎。虚幻？C++。资源？C++。孤岛危机？C++。因为 C++ 提供了任何托管语言都无法提供的性能。它还允许直接控制内存和微观控制对象的创建和擦除方式。

那么，你为什么不关心呢？因为，除非您计划发布与刺客信条、半条命或天际一样大小或范围的 AAA 级游戏，否则 XNA 框架下的 C# 将提供充足的空间和性能。远远超过你应该需要的。如果您确实有性能问题，那么托管语言很可能不是问题，并且您的代码中应该还有很多优化需要完成。机会是，如果您在 C# 中遇到性能问题，您也会在 C++ 中遇到它们。

XNA 还提供了在 Windows、Xbox 和不同的 Microsoft 便携式设备上发布的能力。此外，无论如何，使用 DirectX 都会限制您使用这些平台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-05T20:40:04.760

> 是否可以从 C# 创建 C++ 对象？

不是直接的。对于初学者，我认为您不能使用 P/Invoke 调用构造函数；您将始终必须导出一个特殊的“构造函数包装器”，例如：

```
extern "C" {
    EXPORT_API YourClass* YourClassInstanceFactory()
    {
        return new YourClass();
    }
} 
```

对于后续`thiscall`的 s ，您可能需要跟踪每次编译库时都会更改的所有修饰名称。

您可以在 C++ 中创建一个包装器库，该`extern`C 辅助函数将通过 C# 进行平台调用，但话又说回来，不太确定这可能会增加开销，我认为您关心的是性能。

另一种解决方案可能是创建一个可以在 C# 中直接引用的 C++/CLI（CLR 类库）包装库。这种方法的优点是您可以像在常规 C++ 项目中一样引用本机库。

# javascript - Javascript模块模式 - 我做错了什么？

> ID：13345900
> 
> 赞同：0
> 
> 时间：2012-11-12T08:14:27.713
> 
> 标签：javascript, design-patterns, module

一个工作版本在这里：[http ://est.pagodabox.com/client/svedka](http://est.pagodabox.com/client/svedka)

我有以下函数，我试图将其转换为模块模式，但是当我尝试使用我在底部返回的函数之一时，例如：

```
est_project.closeContent($html); 
```

我得到一个错误，它不是一个函数。我在这里做错了什么吗？

谢谢！

```
var est_project = (function(){

    // Setup functions
    var flexDestroy,
        cloneCurrent,
        clonePosition,
        switchSlide,
        projectLayout,
        contentHeight,
        slidePos,
        slideClick,
        infoToggle,
        closeContent;

    // Destroy flexslider
    flexDestroy = function($slider,$cleanSlider, $projBg) {
        // Insert the clone of the un-initialized slide element, and remove the current flexslider
        // Effectively "destroys" the current slider

        var $curSlide = $slider.find('.flex-active-slide'),
            // Get the zero based index of current slide
            curSlideIndex = $curSlide.index() - 1,
            curBg = $curSlide.find('img').attr('src'),
            slideCount = $cleanSlider.data('count'),
            i = 0,
            $rearrange = $('');

        // When you switch projects, the current slide should stay put
        if(curSlideIndex !== 0 && slideCount > 1) { 
            // Cut from the current slide to the end, paste at the beginning
            for(i = 0 ; i < slideCount; i += 1) {
                if(curSlideIndex > i) {continue;}
                $rearrange = $rearrange.add( $cleanSlider.find('li:eq(' + i + ')') );
            }

            $rearrange.remove();
            $cleanSlider.find('li:first-child').before($rearrange)
            $cleanSlider.css({'background-image' : 'url(' + curBg + ')'});
        }

        $slider.after($cleanSlider).remove();
        clonePosition(slideheight);
    };

    return {
        // Clone current 
        cloneCurrent: function($el) {
            var $clean,
                slideCount = $el.find('li').length;

            $clean = $el.clone();
            $clean.removeClass('project-current').find('div').removeClass('img-loading');
            $clean.data('count',slideCount);
            return $clean;
        },

        // Set the clone position, for when we add it to the DOM or resize the window
        clonePosition: function(slideheight) {
            var n = $cleanSlider.index(),
                $myBg = $cleanSlider.find('div'),
                myPosition = n * slideheight;

            // Set the position of the inserted clone
            $cleanSlider
                .css({height: slideheight, top: myPosition, position : 'absolute'});

            $myBg
                .css({height: slideheight});
        },

        switchSlide: function($me, $slider) {
            $('.project-current').removeClass('project-current');
            $me.addClass('project-current');

            // Get rid of current flexslider
            flexDestroy($slider,$cleanSlider);

            // Clone the unitialized slider so we can add it back in later when it gets destroyed
            $cleanSlider = cloneCurrent($me);

            $me.addClass('flexslider').flexslider({
                animation: "slide",
                animationSpeed: 500,
                slideshow: false,
                manualControls: '.dot-nav li a'
            });

            // After the flexslider initializes, slide the content
            setTimeout(function(){
                slidePos($me, $slidewrap, slideheight, $win);
            },100);
        },

        // Custom "masonry" function, absolutely positions each project div according to the slide height
        projectLayout: function(slideheight,$proj,$projBg) {
            var n = 0;

            $proj.each(function(){
                var $me = $(this),
                    myPosition = n * slideheight;

                // Set all the heights
                $me
                    .css({top: myPosition, position : 'absolute'})
                    .add($projBg)
                    .css({height: slideheight});

                n++;
            });
        },

        // Set slide wrapper height to window height
        contentHeight: function($win, $slidewrap) {
            var winHeight = $win.height();
            $slidewrap.css({height: winHeight});
        },

        // Set slide wrapper position to slide to the clicked slide, and set content position
        slidePos: function($me, $slidewrap, slideheight, $win) {
            var $contentText = $('.project-content .text'),
                projNavHeight = Math.round( $win.height() * .1 ),
                curIndex = $me.index(),
                curTop = 0 - (curIndex * slideheight) + projNavHeight;

            $slidewrap.css({transform: 'translate(0,' + curTop.toString()  + 'px)'});
            $('.corner-btn').add($contentText).css({'padding-top' : projNavHeight});

            setTimeout(function(){
                $slidewrap.removeClass('tr-none movin').addClass('tr-all');
                $('.project').css({opacity: .4})
            }, 100);
        },

        // Click a project, slide to it
        slideClick: function($proj) {
            $('.project').live('click',function(){

                var $me = $(this),
                    myHref = $me.data('href'),
                    myTitle = $me.data('title'),
                    $slider = $('.flexslider'),
                    indexMy = $me.index(),
                    indexCur = $('.project-current').index(),
                    projDir;

                $me.css({opacity: 1});

                // Stop here if we click on the current project
                if($me.hasClass('project-current')) {
                    return false;
                }

                History.pushState(null,myTitle,myHref);     
            });
        },

        // Hide and show content
        infoToggle: function() {
            // Open content
            $('#corner-btn-info').on('click',function(){

                $html.addClass('show-content');

                if($('.project-content .text').height() <= $win.height()) {
                    $html.addClass('no-overflow');
                }

                $('.project-content-wrap').css({'z-index': 10});
            });

            // Close content
            $('#corner-btn-close').live('click',function(){
                closeContent($html);
            });
        },

        closeContent: function($html) {
            $html.removeClass('show-content');
            setTimeout(function(){
                $('.project-content-wrap').css({'z-index': -1});
                $html.removeClass('no-overflow');
                $('#classy').animate({scrollTop: 0})
            },300);
        }
    };
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:01:10.597

问题是您没有执行匿名函数，您的代码相当于：

```
var est_project = function() {}; 
```

如果您希望它返回其中定义的函数，则需要执行该函数。

只需替换最后一行：

```
}); 
```

经过：

```
}()); 
```

或者你可以保留你的代码并`closeContent`像这样调用函数：

```
est_project().closeContent(); 
```

但我想这不是你想要的 :-) 每次调用`est_project`函数时都会实例化一个新对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:07:29.747

在文件的开头和结尾，只需将对象附加到带有已执行函数的窗口，并将整个函数包装在一个自执行函数中。像这样

```
(function(global) {

   //your code goes here  
   global.est_project = est_project();

 })(this) 
```

# c# - 对 Ands 进行级联相等检查：System.Guid

> ID：13345910
> 
> 赞同：2
> 
> 时间：2012-11-12T14:54:22.873
> 
> 标签：c#

在查看 和 之间的区别时`guid.Equals(anotherGuid)`，`guid == anotherGuid`我反编译了 .NET System.dll 并看到了类似（缩短和浓缩：

```
if (g._a == this._a) {
    if (g._b == this._b) {
        ...
        if (g._k == this._k) { return true; }
    } else { return false; }
} else { return false; } 
```

这看起来，嗯，很奇怪。我本来期望的代码如下：

```
if (g._a == this._a && g._b == this._b && ... 
```

他们以他们的方式编码，而不是我预期的方式，有什么原因吗？如果有的话，这里有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:11:59.943

反编译的代码与原始代码不同，因此您可能会看到差异。

C# 编译器实际上转换`&&`为 IL 级别的分支，因为 CIL 没有短路的概念`and`。您的反编译器没有接受它并笨拙地回译了 IL。

# java - java gwt编译部署慢

> ID：13345911
> 
> 赞同：2
> 
> 时间：2012-11-12T14:54:24.687
> 
> 标签：java, gwt, deployment, compilation

我有一个已经存在的 GWT 应用程序，我在 Eclipse 中编译（使用 2 个编译排列大约需要 80 秒），然后我必须使用 Maven（mvn clean install ...）构建项目，然后我必须部署所有内容并重新启动 tomcat . 整个过程需要很长时间，所以我想知道是否有更快的方法来做到这一点？难道不能在 Eclipse 中进行立即应用的更改，而我只需要重新加载浏览器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:07:44.537

您可以设置：

*   您的应用程序与您的应用服务器的爆炸式部署
*   使用 devmode：这使用热代码替换，因此浏览器中的简单 F5 可以立即看到更改

（行为背后的技巧是代码服务器的想法：您的浏览器将事件和内容发送回“开发模式应用程序”的 Java VM，这就是包含嵌入式 Jetty 服务器的内容）

通过这种方式，您可以获得更好的周转时间。很少需要完全编译和重新部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:30:12.353

您应该安装[适用于 Eclipse 的 Google 插件，](https://developers.google.com/eclipse/)它允许您（以及许多其他类似谷歌的东西）直接从 Eclipse以*托管模式运行您的应用程序。*

干杯，

# php - 拉表表数据 preg_match

> ID：13345913
> 
> 赞同：0
> 
> 时间：2012-11-12T14:54:29.047
> 
> 标签：php, preg-replace, preg-match, file-get-contents

请先访问：[http ://www.sportingpulse.com/comp_info.cgi?c=1-5917-0-232432-0&a=STATS&sgroup=floor](http://www.sportingpulse.com/comp_info.cgi?c=1-5917-0-232432-0&a=STATS&sgroup=floor)

这更像是一个“这甚至可能的类型问题”。我创建了一个小脚本来从体育网站提取数据。

```
$url = "http://www.sportingpulse.com/comp_info.cgi?c=1-5917-0-232432-0&a=STATS&sgroup=floor";

preg_match_all('#<table[^>]+>[\w\W]*?</table>#i', file_get_contents($url), $match);
$tableone = $match[0][0];
$tabletwo = $match[0][1];

$tableone1 = preg_replace('/<a href=\"(.*?)\">(.*?)<\/a>/', "\\2", $tableone);
echo $tableone1; 
```

这很好用，并将所有表格数据放入我的网站，但我想知道是否有可能只获得团队 SOL 结果而不是每个人的结果？

谁能指出我正确的方向，我唯一能想到的就是寻找“SOL”然后以某种方式抓住它后面的tr？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:28:59.633

尝试这个

```
$url = "http://www.sportingpulse.com/comp_info.cgi?c=1-5917-0-232432-0&a=STATS&sgroup=floor";
$str = file_get_contents($url);
$doc = @DOMDocument::loadHTML($str);
$xpath = new DOMXPath($doc);
$entries = $xpath->query('//html/body/div[@id="site-wrap"]/div[@id="content-wrap"]/div[@id="col-1-2-wrap"]/div[@id="content"]/div[@class="tableContainer"]/div/table/tbody/tr[td[2]/a/text()="SOL"]');
echo '<table>';
foreach($entries as $entry) {
  echo($doc->saveXML($entry));
}
echo '</table>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:04:30.667

抱歉，我不能让这个更完整，但我要上飞机了。试试这个开始：

```
$url = "http://www.sportingpulse.com/comp_info.cgi?c=1-5917-0-232432-0&a=STATS&sgroup=floor";
$html = file_get_contents($url);
$doc = DOMDocument::loadHTML($html);

$xpath = new DOMXPath($doc);

$query = "/your/xpath/query/here";

$entries = $xpath->query($query); 
```

查看此链接以获取有关 xpath 查询的详细信息。 [http://php.net/manual/en/domxpath.query.php](http://php.net/manual/en/domxpath.query.php) 另一个很好的参考：[http ://www.w3schools.com/xpath/xpath_syntax.asp](http://www.w3schools.com/xpath/xpath_syntax.asp)

登陆后我会回来查看并添加更多细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T15:04:22.683

我使用[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)来处理类似的事情。然后，您可以遍历该表中的每个 tr 并检查第二个 td（在您的情况下）的链接是否为 == SOL。如果是这样，您可以从下一个 tds 读取数据。请参阅[http://simplehtmldom.sourceforge.net/manual.htm](http://simplehtmldom.sourceforge.net/manual.htm)。如果您需要进一步的帮助，我可以给您一个代码示例。

最好的问候斯蒂芬S。

# iphone - UIScrollView 顶部的菜单

> ID：13345915
> 
> 赞同：0
> 
> 时间：2012-11-12T14:54:37.430
> 
> 标签：iphone, objective-c, ios, uiscrollview, uitapgesturerecognizer

我想创建一个`UIScrollView`仅水平滚动的滚动条，其中包含我从服务器获取的文本，但我希望文本在单击时执行某种操作，例如，这就是我希望它的外观：（分隔通过“|”）

![图像1](../Images/027025b8d79693dfcad0b5a93ab18dd5.png)

当你点击前。`Facebook`，它应该执行一个动作，并且`Facebook`应该是粗体的，就像一个菜单。我怎么能做这样的事情？（我不是在寻找代码，如果有人可以提供清晰的解释，那就太好了！）

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:56:40.200

除了有问题的 UI 决策（用户应该如何知道这些是可点击的？）我会使用按钮而不是标签。您可以将按钮设置为无边框并显示为标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:00:17.617

任何 UIView（包括 UILabels）都可以被赋予**TapGestureRecognizer**。您只需将手势识别器添加到标签，然后您可以告诉它执行您希望执行的任何类型的操作。

不过，我会将 UILabel 类子类化，以拥有一个可以在项目中抛光和回收的对象。

# c# - 如何将三个字符串连接到单个日期时间值？

> ID：13345916
> 
> 赞同：-2
> 
> 时间：2012-11-12T14:54:37.177
> 
> 标签：c#, asp.net, string, datetime, join

我必须编写一个代码，它可以将文本框中的三个字符串值连接到一个日期时间值。

例如： textbox1.text 是我的一天值。想想，我写的是 05。 textbox2.text 是我的 mounth 值。想想，我写的是 06。textbox3.text 是我的年份值。想想，我写的是 1991 年。

然后我必须加入这三个值。它变得像这样 05.06.1991 所以我可以将此值插入到我的数据库中。非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T14:59:50.007

检查 DateTime 构造函数其中一个具有`DateTime(Int32, Int32, Int32)`等于的签名，`DateTime(year, month, day)`因此您的代码必须是

```
DateTime input = new DateTime(Convert.ToInt32(txtYear.Text), Convert.ToInt32(txtMonth.Text), Convert.ToInt32(txtDay.Text)); 
```

干杯。

# java - Xslt 转换丢失特殊字符

> ID：13345918
> 
> 赞同：0
> 
> 时间：2012-11-12T14:54:41.013
> 
> 标签：java, xml, xslt

我正在做 XSLT 转换，编码有问题，因为我在转换后丢失了克罗地亚特殊字符。我正在使用 javax.xml.transform.Transformer 并且我正在设置这样的编码：

```
transformer.setOutputProperty( OutputKeys.ENCODING, "UTF-8"); 
```

我们使用的是 Websphere 8，并且定义了以下 JVM 参数

```
-Dclient.encoding.override=UTF-8
-Dfile.encoding=UTF-8 
```

转换定义如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:msg="http://b25/ics/ed/CC305A" xmlns:ct="http://b25/ics/complexTypes">
<xsl:output encoding="UTF-8" indent="yes" method="xml" />
... 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:27:35.327

丢失（或错误编码）发生在数据进入 XSLT 引擎之前或离开它之后。（字符编码问题几乎总是出现在软件产品之间的边界上，当数据提供者认为它是一种编码而接收者认为它是另一种编码时）。因此，解决问题的第一步是找出是哪种情况。准确地找出输入中的内容很容易：使用类似这样的东西`<xsl:comment><xsl:value-of select="string-to-codepoints(.)"/></xsl:comment>`会告诉您您提供给转换的整数 Unicode 代码点。要准确找出输出中的内容，您需要在十六进制编辑器中查看 XSLT 引擎的序列化输出。

# android - cocos2dx 录制声音 android/ios

> ID：13345923
> 
> 赞同：3
> 
> 时间：2012-11-12T14:55:03.890
> 
> 标签：android, ios, cocos2d-x

我目前正在开发一款需要能够录制和分析声音的游戏。我基本上需要实时（接近）分析来自手机麦克风的声音并将其可视化。它类似于这个问题，只是我想尽可能使用 cocos2dx 来做。

我要执行的任务类似于这篇文章中讨论的内容：[Capturing Sound for Analysis and Visualizing Frequencies in Android](https://stackoverflow.com/questions/5511250/capturing-sound-for-analysis-and-visualizing-frequencies-in-android)，不同之处在于我想使用 cocos2dx 进行可视化。

我的问题首先是：cocos2dx 是否有某种方式支持录音。我搜索了一下，但没有找到任何有用的东西。其次，如果不是，我如何将 Java/Obj C 平台特定的录音链接到 cocos2dx c++ 代码中完成的绘图/用户交互。

任何类似应用程序的建议或示例将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-16T13:57:08.503

这真的来晚了，但我一直在通过 cocos2dx 寻找同样的东西，我在 cocos2dx 论坛上找到了这个好帮手类。它主要显示 iOS 的管理器和帮助器类，但它是实现的健康开始。对于进一步寻找的人，请点击链接。

[http://discuss.cocos2d-x.org/t/microphone-recording-for-ios-and-android-using-cocos2dx/15254/4](http://discuss.cocos2d-x.org/t/microphone-recording-for-ios-and-android-using-cocos2dx/15254/4)

# reporting-services - 除以零时，如何消除 SSRS 表达式上的#error？

> ID：13345926
> 
> 赞同：3
> 
> 时间：2012-11-12T14:55:17.960
> 
> 标签：reporting-services, ssrs-2008

在我的 SSRS 报告中除以零时，我试图消除 #error。我有以下表达式，它仍然给出#error

```
=IIf(IsNothing(Lookup(Fields!id.Value, Fields!id2.Value, Fields!Stock.Value, "Models")),
88 , Fields!QTY_AVL.Value * 100 / 
Lookup(Fields!id.Value, Fields!id2.Value, Fields!Stock.Value, "Models")) 
```

但是，如果将 / 切换到 * ，如下所示，我正确地得到了值 88

```
=IIf(IsNothing(Lookup(Fields!id.Value, Fields!id2.Value, Fields!Stock.Value, "Models")), 
88 , Fields!QTY_AVL.Value * 100 * 
Lookup(Fields!id.Value, Fields!id2.Value, Fields!Stock.Value, "Models")) 
```

在这两种情况下，我得到的正确值是查找值 > 0

```
(Fields!QTY_AVL and Fields!Stock come from different sources) 
```

我错过了一些明显的东西吗？对此的任何见解都非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T15:25:20.170

如果您转到报告属性然后单击代码，则可以添加安全分割函数，然后在您的表达式中将其引用为`CODE.SafeDivide(Value1, Value2)`，并根据需要添加参数。

此函数将返回 0 而不是显示 #error 消息。

```
Public Function SafeDivide(ByVal Numerator As Decimal, ByVal Denominator As Decimal) As Decimal
    If Denominator = 0 Then
        Return 0
    End If
    Return (Numerator / Denominator)
End Function 
```

# javascript - Angular 路由覆盖选项卡和折叠面板插件使用的 href 行为

> ID：13345927
> 
> 赞同：8
> 
> 时间：2012-11-12T14:55:22.313
> 
> 标签：javascript, twitter-bootstrap, angularjs

我将 twitter-bootstrap 用于选项卡和折叠面板。这两个插件都可以覆盖href。有时 - 并非始终如一，路由提供程序将覆盖选项卡/折叠行为并尝试将其用作路由。

我希望有一个解决这个问题的方法，但也将它作为一个问题添加到 [github](https://github.com/angular/angular.js/issues/1557)

一些解决方法实施的建议：

1.  如果 .otherwise 未提供 - 不要触摸任何未专门配置的路由。
2.  将 .ignore('path') 作为配置选项添加到 routeProvider。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-13T01:40:49.670

作为一种解决方法，而不是使用 `href="#targetDivId"`，Twitter Bootstrap 允许`data-target="#targetDivId"`作为属性，这解决了我的问题。

这是描述该问题的线程：[GitHub问题](https://github.com/angular/angular.js/issues/1557#issuecomment-10303715)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T19:45:08.540

您可以使用范围在选项卡和窗格之间连接，绕过路由：

```
<div class="tabbable">
                                <ul class="nav nav-tabs">
                                    <li ng-class="{'active':currentTab == 'Tab1'}">
                                        <a data-toggle="tab" ng-click="currentTab = 'Tab1'">Tab1</a>
                                    </li>
                                    <li ng-class="{'active':currentTab== 'Tab2'}">
                                        <a data-toggle="tab" ng-click="currentTab = 'Tab2'">Tab2</a>
                                    </li>
                                </ul>
                                <div class="tab-content">
                                    <div class="tab-pane" ng-class="{'active':currentTab == 'Tab1'}" id="Tab1">
                                        <p>I'm in Section 1.</p>
                                    </div>
                                    <div class="tab-pane" ng-class="{'active':currentTab == 'Tab2'}" id="Tab2"> 
                                        <p>Howdy, I'm in Section 2.</p>
                                    </div>
                                </div>
                            </div> 
```

# javascript - 在将文本添加到 textarea 之前从文本中去除 html 标签

> ID：13345930
> 
> 赞同：0
> 
> 时间：2012-11-12T14:55:44.230
> 
> 标签：javascript, jquery, strip-tags

当用户在我的网站上填写表单时，它会使用 jQuery ajax 发送到服务器，服务器返回类似于以下的结果：

```
<p>Sivustosi päivittyy usein tai silloin tällöin, joten julkaisujärjestelmä on sivustolle välttämätön. 
Sivusto rakennetaan <a href="http://fi.wordpress.org/" target="_blank">WordPress-julkaisujärjestelmään.</a> 
WordPress on erittäin helppokäyttöinen alunperin blogeja varten kehitetty julkaisujärjestelmä, joka monipuolisuutensa takia soveltuu myös isojenkin yritysten julkaisujärjestelmäksi.</p>

<p>Se että sivu erottuu massasta kaikin tavoin, 
vaatii paljon tutkimusta muista alan sivuista, ja vaatii aikaa. </p>

Valintojesi perusteella hinta voisi olla 330€ + ALV 23%(75.9€) 
```

然后用户可以选择关闭具有结果的窗口，或者与我联系以将结果添加到消息中，因此我需要在 gmail 显示它们时剥离 html 标签，并且它们也显示在 textarea 上。我将如何做到这一点，因为我的 ajax 调用将文本添加到 textarea 是这样的：

```
$.ajax({
        type: "POST",
        url: "calculate.php",
        data: calculation_data,
        error: function (failure) {
            $('#result').html("Palvelimelta ei saatu tietoja. Internet-yhteytesi on mahdollisesti poikki, tai serveri on ylikuormittunut. Yritä hetken päästä uudelleen. ");
            $('#hintalaskuri .control-group').slideUp();
        },
        success: function (response) {
            $('#result').html(response);
            $('#hintalaskuri .control-group').slideUp();
            $('#hintalaskuri .modal-footer').prepend('<a href="#tarjouspyyntö" data-dismiss="modal" aria-hidden="true" class="btn btn-success" data-toggle="modal">Lähetä tarjouspyyntö</a>');
            //add text to textarea
            $('#tarjouspyyntö [name=hintalaskuri]').val(response);

        }

    }); 
```

添加 $(html).text(); 对成功功能没有帮助，那我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:02:00.733

您已经将 html 添加到您的元素之一.. 所以从该元素中获取文本

```
$('#tarjouspyyntö [name=hintalaskuri]').val($('#result').text()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:03:08.773

```
$('#tarjouspyyntö [name=hintalaskuri]').val($(response).text()); 
```

如果你想要元素之间的空格：

```
var resultHtml = "";
$(response).each(function(index,value){
       resultHtml += $(value).text() + " ";
});
$('#tarjouspyyntö [name=hintalaskuri]').val(resultHtml); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T15:02:21.510

尝试`$('#result').text()`仅获取不带 HTML 标记的结果文本（使用 将其添加到 DOM 之后`$('#result').html(response);`）

# c# - 从特定摄像机捕获图像并录制视频

> ID：13345943
> 
> 赞同：-1
> 
> 时间：2012-11-12T14:56:32.693
> 
> 标签：c#, directshow, directshow.net

我正在使用使用 directshow.net 库的 C# 开发一个项目。在这个项目中，我使用了三个网络摄像头，我可以使用库找到所有三个。

问题是我不知道如何从三者中的任何特定网络摄像头捕获图像或录制视频。

任何帮助或建议都会帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:12:40.403

您需要检查相机名称显示名称 - 它们识别设备。查看更多详情：

*   [如何选择视频采集设备？](http://www.codeproject.com/Questions/476239/Howplustopluschooseplusaplusvideopluscaptureplusde)
*   [如何正确识别视频设备？](http://social.msdn.microsoft.com/Forums/en-US/windowsdirectshowdevelopment/thread/b9b19705-6805-4625-97dd-ac357f0ed394)

# java - 在 linux 下使用 JAI 的文件存储保存 JPG-Image

> ID：13345944
> 
> 赞同：3
> 
> 时间：2012-11-12T14:56:34.103
> 
> 标签：java, image-processing, jai

我正在尝试解决一个家庭作业，其中我应该为图像处理任务实现一个 Pipes&Filters-Architecture。但是我对 Linux 下的 JAI-Framework 有问题（具体来说是 ArchLinux）。

我正在使用文件加载加载图像：

```
_image = JAI.create("fileload", file); 
```

后来我想将图像保存到一个单独的位置：

```
JAI.create("filestore", _image, _filename, "JPEG"); 
```

我只是复制了相关行，这是我迄今为止的整个 JAI 特定代码。但是当我执行我的程序时，我收到以下错误：

```
Error: One factory fails for the operation "jpeg"
Occurs in: javax.media.jai.ThreadSafeOperationRegistry
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)
    at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)
    at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)
    at com.sun.media.jai.opimage.StreamRIF.create(StreamRIF.java:102)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)
    at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)
    at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)
    at com.sun.media.jai.opimage.FileLoadRIF.create(FileLoadRIF.java:144)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)
    at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)
    at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)
    at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:819)
    at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)
    at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)
    at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:799)
    at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)
    at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)
    at javax.media.jai.JAI.createNS(JAI.java:1099)
    at javax.media.jai.JAI.create(JAI.java:973)
    at javax.media.jai.JAI.create(JAI.java:1621)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSink.storeFile(ImageSink.java:37)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSink.write(ImageSink.java:58)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSink.write(ImageSink.java:16)
    at at.fhv.students.rotter.systemarchitectures.pipesfilters.Pipe.write(Pipe.java:70)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSource.write(ImageSource.java:77)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSource.run(ImageSource.java:84)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.Program.main(Program.java:29)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: java.lang.NoClassDefFoundError: com/sun/image/codec/jpeg/ImageFormatException
    at com.sun.media.jai.codecimpl.JPEGImageDecoder.decodeAsRenderedImage(JPEGImageDecoder.java:46)
    at com.sun.media.jai.opimage.CodecRIFUtil.create(CodecRIFUtil.java:88)
    at com.sun.media.jai.opimage.JPEGRIF.create(JPEGRIF.java:43)
    ... 47 more
Caused by: java.lang.ClassNotFoundException: com.sun.image.codec.jpeg.ImageFormatException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 50 more
Error: One factory fails for the operation "stream"
Occurs in: javax.media.jai.ThreadSafeOperationRegistry
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)
    at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)
    at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)
    at com.sun.media.jai.opimage.FileLoadRIF.create(FileLoadRIF.java:144)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)
    at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)
    at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)
    at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:819)
    at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)
    at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)
    at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:799)
    at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)
    at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)
    at javax.media.jai.JAI.createNS(JAI.java:1099)
    at javax.media.jai.JAI.create(JAI.java:973)
    at javax.media.jai.JAI.create(JAI.java:1621)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSink.storeFile(ImageSink.java:37)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSink.write(ImageSink.java:58)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSink.write(ImageSink.java:16)
    at at.fhv.students.rotter.systemarchitectures.pipesfilters.Pipe.write(Pipe.java:70)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSource.write(ImageSource.java:77)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSource.run(ImageSource.java:84)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.Program.main(Program.java:29)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: javax.media.jai.util.ImagingException: All factories fail for the operation "jpeg"
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1687)
    at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)
    at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)
    at com.sun.media.jai.opimage.StreamRIF.create(StreamRIF.java:102)
    ... 38 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)
    ... 41 more
Caused by: java.lang.NoClassDefFoundError: com/sun/image/codec/jpeg/ImageFormatException
    at com.sun.media.jai.codecimpl.JPEGImageDecoder.decodeAsRenderedImage(JPEGImageDecoder.java:46)
    at com.sun.media.jai.opimage.CodecRIFUtil.create(CodecRIFUtil.java:88)
    at com.sun.media.jai.opimage.JPEGRIF.create(JPEGRIF.java:43)
    ... 47 more
Caused by: java.lang.ClassNotFoundException: com.sun.image.codec.jpeg.ImageFormatException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 50 more
Error: One factory fails for the operation "fileload"
Occurs in: javax.media.jai.ThreadSafeOperationRegistry
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)
    at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)
    at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)
    at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:819)
    at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)
    at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)
    at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:799)
    at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)
    at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)
    at javax.media.jai.JAI.createNS(JAI.java:1099)
    at javax.media.jai.JAI.create(JAI.java:973)
    at javax.media.jai.JAI.create(JAI.java:1621)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSink.storeFile(ImageSink.java:37)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSink.write(ImageSink.java:58)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSink.write(ImageSink.java:16)
    at at.fhv.students.rotter.systemarchitectures.pipesfilters.Pipe.write(Pipe.java:70)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSource.write(ImageSource.java:77)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSource.run(ImageSource.java:84)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.Program.main(Program.java:29)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: javax.media.jai.util.ImagingException: All factories fail for the operation "stream"
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1687)
    at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)
    at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)
    at com.sun.media.jai.opimage.FileLoadRIF.create(FileLoadRIF.java:144)
    ... 29 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)
    ... 32 more
Caused by: javax.media.jai.util.ImagingException: All factories fail for the operation "jpeg"
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1687)
    at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)
    at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)
    at com.sun.media.jai.opimage.StreamRIF.create(StreamRIF.java:102)
    ... 38 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)
    ... 41 more
Caused by: java.lang.NoClassDefFoundError: com/sun/image/codec/jpeg/ImageFormatException
    at com.sun.media.jai.codecimpl.JPEGImageDecoder.decodeAsRenderedImage(JPEGImageDecoder.java:46)
    at com.sun.media.jai.opimage.CodecRIFUtil.create(CodecRIFUtil.java:88)
    at com.sun.media.jai.opimage.JPEGRIF.create(JPEGRIF.java:43)
    ... 47 more
Caused by: java.lang.ClassNotFoundException: com.sun.image.codec.jpeg.ImageFormatException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 50 more
Exception in thread "main" javax.media.jai.util.ImagingException: All factories fail for the operation "fileload"
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1687)
    at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)
    at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)
    at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:819)
    at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)
    at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)
    at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:799)
    at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)
    at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)
    at javax.media.jai.JAI.createNS(JAI.java:1099)
    at javax.media.jai.JAI.create(JAI.java:973)
    at javax.media.jai.JAI.create(JAI.java:1621)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSink.storeFile(ImageSink.java:37)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSink.write(ImageSink.java:58)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSink.write(ImageSink.java:16)
    at at.fhv.students.rotter.systemarchitectures.pipesfilters.Pipe.write(Pipe.java:70)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSource.write(ImageSource.java:77)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSource.run(ImageSource.java:84)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.Program.main(Program.java:29)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)
    ... 23 more
Caused by: javax.media.jai.util.ImagingException: All factories fail for the operation "stream"
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1687)
    at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)
    at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)
    at com.sun.media.jai.opimage.FileLoadRIF.create(FileLoadRIF.java:144)
    ... 29 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)
    ... 32 more
Caused by: javax.media.jai.util.ImagingException: All factories fail for the operation "jpeg"
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1687)
    at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)
    at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)
    at com.sun.media.jai.opimage.StreamRIF.create(StreamRIF.java:102)
    ... 38 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)
    ... 41 more
Caused by: java.lang.NoClassDefFoundError: com/sun/image/codec/jpeg/ImageFormatException
    at com.sun.media.jai.codecimpl.JPEGImageDecoder.decodeAsRenderedImage(JPEGImageDecoder.java:46)
    at com.sun.media.jai.opimage.CodecRIFUtil.create(CodecRIFUtil.java:88)
    at com.sun.media.jai.opimage.JPEGRIF.create(JPEGRIF.java:43)
    ... 47 more
Caused by: java.lang.ClassNotFoundException: com.sun.image.codec.jpeg.ImageFormatException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 50 more
Caused by:
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)
    at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)
    at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)
    at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:819)
    at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)
    at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)
    at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:799)
    at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867)
    at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888)
    at javax.media.jai.JAI.createNS(JAI.java:1099)
    at javax.media.jai.JAI.create(JAI.java:973)
    at javax.media.jai.JAI.create(JAI.java:1621)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSink.storeFile(ImageSink.java:37)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSink.write(ImageSink.java:58)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSink.write(ImageSink.java:16)
    at at.fhv.students.rotter.systemarchitectures.pipesfilters.Pipe.write(Pipe.java:70)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSource.write(ImageSource.java:77)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.ImageSource.run(ImageSource.java:84)
    at at.fhv.students.rotter.systemarchitectures.imageprocessing.Program.main(Program.java:29)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: javax.media.jai.util.ImagingException: All factories fail for the operation "stream"
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1687)
    at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)
    at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)
    at com.sun.media.jai.opimage.FileLoadRIF.create(FileLoadRIF.java:144)
    ... 29 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)
    ... 32 more
Caused by: javax.media.jai.util.ImagingException: All factories fail for the operation "jpeg"
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1687)
    at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:473)
    at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:332)
    at com.sun.media.jai.opimage.StreamRIF.create(StreamRIF.java:102)
    ... 38 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.media.jai.FactoryCache.invoke(FactoryCache.java:122)
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1674)
    ... 41 more
Caused by: java.lang.NoClassDefFoundError: com/sun/image/codec/jpeg/ImageFormatException
    at com.sun.media.jai.codecimpl.JPEGImageDecoder.decodeAsRenderedImage(JPEGImageDecoder.java:46)
    at com.sun.media.jai.opimage.CodecRIFUtil.create(CodecRIFUtil.java:88)
    at com.sun.media.jai.opimage.JPEGRIF.create(JPEGRIF.java:43)
    ... 47 more
Caused by: java.lang.ClassNotFoundException: com.sun.image.codec.jpeg.ImageFormatException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 50 more 
```

有人有想法吗？

更新：我已经测试了一下，发现加载 bmp-Images 有时有效。然后我尝试在 DisplayJAI 中显示图像，而不是将其写入文件。这适用于以下 bmp 图像：http: [//i.stack.imgur.com/dDILk.png](http://i.stack.imgur.com/dDILk.png)

但它不适用于以下图像（我使用 gimp 从 jpg 转换为 bmp）：http: [//i.stack.imgur.com/xQWQa.png](http://i.stack.imgur.com/xQWQa.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-18T11:10:24.060

我花了一天时间寻找这个问题的答案。JAI 重要的是您使用的 Java JDK 的版本。OpenJDK 不适用于它。您需要 Oracle Java JDK。

获取和安装的说明在这里：[https ://askubuntu.com/questions/56104/how-can-i-install-sun-oracles-proprietary-java-jdk-6-7-8-or-jre](https://askubuntu.com/questions/56104/how-can-i-install-sun-oracles-proprietary-java-jdk-6-7-8-or-jre)

或者，对于那些使用 Ubuntu 的人，这里是快速说明：

```
sudo apt-get install python-software-properties
sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java7-installer 
```

希望这可以帮助。当您遇到此错误时，也许这会节省您的时间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:38:42.433

最后我找到了解决方案：我还必须将 ext 文件夹中的 mlibwrapper.jar-File 添加到项目中......

# python - Python pytz：将本地时间转换为 UTC。本地化似乎没有转换

> ID：13345948
> 
> 赞同：15
> 
> 时间：2012-11-12T14:56:48.170
> 
> 标签：python, timezone, pytz

我有一个将日期时间存储为 UTC 的数据库。我需要查找特定时间的信息，但日期和时间是以当地时间给出的，比如说“欧洲/哥本哈根”。我得到这些：

```
year = 2012; month = 12; day = 2; hour = 13; min = 1; 
```

所以，我需要将这些转换为 UTC，以便我可以在数据库中查找它们。我想使用`pytz`. 我在看`localize`：

```
 local_tz = timezone('Europe/Copenhagen')
 t = local_tz.localize(datetime.datetime(year, month, day, hour, min)) 
```

但我很困惑`localize()`。这是假设年份等是在当地时间给我的吗？或者，是否假设它们以 UTC 给出，现在它已将它们转换为当地时间？

`print t`给我：

```
2012-12-02 13:01:00+01:00 
```

所以它似乎假设原来的年份等是UTC；小时数现在是 13+1 而不是 13。那么我应该怎么做呢？我已经阅读了 pytz 文档，但这并没有让我更清楚。它提到了很多事情很棘手，所以我不确定 pytz 是否真的在解决这些问题。而且，我并不总是知道这些示例是否向我展示了有效的东西或无效的东西。

我尝试标准化：

```
print local_tz.normalize(t) 
```

这给了我与 print t 相同的结果。

编辑：使用上面给出的年份等数字，它应该与数据库中 2012-12-2 12:01 的信息相匹配。（因为哥本哈根在那个日期是 UTC+1）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-12T15:03:38.480

`localize()`将时区附加到*本地*`datetime.datetime`时区中的幼稚实例。

 *如果您在本地时区中有日期时间值，请本地化到该时区，然后使用[`.astimezone()`](http://docs.python.org/2/library/datetime.html#datetime.datetime.astimezone)将值转换为 UTC：

```
>>> localdt = local_tz.localize(datetime.datetime(year, month, day, hour, min))
>>> localdt.astimezone(pytz.UTC)
datetime.datetime(2012, 12, 2, 12, 1, tzinfo=<UTC>) 
```

请注意，您*不需*要这样做，可以比较*具有时区的*`datetime`对象；它们都将被标准化为 UTC 以进行测试：

 *```
>>> localdt.astimezone(pytz.UTC) == localdt
True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:09:47.047

如果您知道传入的时间表示在`Europe/Copenhagen`时区中，则可以将其创建为时区感知开始：

```
local_tz = timezone('Europe/Copenhagen')
t = local_tz.localize(datetime.datetime(year, month, day, hour, min)) 
```

然后，您可以将其“转换”为`UTC`：

```
t_utc = t.astimezone(pytz.UTC) 
```

但这可能不是必需的，具体取决于您的数据库驱动程序的健全程度。`t`并`t_utc`表示相同*的时间点*和行为良好的代码应该互换处理它们。元`(year, month, day, hour, minute, second, …)`组只是特定时区和日历系统中此时间点的人类可读表示。**

# php - Yii - CGridView

> ID：13345949
> 
> 赞同：3
> 
> 时间：2012-11-12T14:56:49.827
> 
> 标签：php, yii, cgridview

我正在用**Yii (v1.1.12) 编写**我的第一个应用程序，学习曲线对我来说有点陡峭，所以我需要一些帮助。

想象以下表格（及其关系）：

*   详细 (n:1) 文件
*   文档 (n:1) 用户
*   用户 (n:1) 部门
*   文件 (n:1) 类别

`user`是保存有关可以登录和使用应用程序的用户信息的表。

我已经设法组合（使用**Gii**和 hacking）一个列出所有文档的视图，并且还设法在网格中显示类别名称而不是类别 ID。

我要实现的功能之一是允许用户切换视图，以便 (a) 仅列出与登录用户相关的文档，或 (b) 仅列出与他/她的部门相关的文档。

我环顾四周，没有运气。任何人都可以帮忙吗？

干杯，乔治

更新：当前我使用`zii.widgets.grid.CGridView`.

更新 2：在 Omar 的引用之后，`CDbCriteria`我发现[这个](http://blog.michaelduy.com/?p=33)URL 有更多关于这个主题的细节。

我想出了以下模型代码，效果很好：

```
public function searchByUser($user_id)
{
   $criteria=new CDbCriteria;
   $criteria->condition = " user_id = ".$user_id;
   return new CActiveDataProvider($this, array(
          'criteria'=>$criteria,
   ));
}
public function searchByDepartment($user_id)
{
   $criteria=new CDbCriteria;
   $criteria->alias="p";
   $criteria->join = "JOIN (SELECT u.id 
                              FROM user u 
                             INNER JOIN user uu 
                                ON u.department_id = uu.department_id 
                             WHERE uu.id = ".$user_id.") uu 
                                ON p.user_id = uu.id";                  
    return new CActiveDataProvider($this, array('criteria'=>$criteria,));
} 
```

虽然上述工作按预期工作，但我希望有一个根本不需要我编写切碎的 SQL 代码的解决方案。不是因为懒惰，而是为了利用框架的更多功能。

我只是觉得这种方法不遵循最佳实践（？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:36:41.073

尝试创建您自己的`CDBCriteria`并在其中定义任何条件，并将其作为数据提供者传递给您的网格视图。

如果您允许在**网格视图**中进行搜索，请将条件传递给搜索函数，并在其中将传递的条件与搜索中的条件合并。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T21:57:25.133

您可以使用关系来实现您所追求的。例如，要查看某个用户的所有文档和部门，您首先需要为该用户设置[关系](http://www.yiiframework.com/doc/guide/1.1/en/database.arr)，在您的情况下，您可以像这样设置您的用户模型；

```
public function relations()
{
    return array(
        'documents' => array(self::HAS_MANY, 'Document', 'user_id'),
        'department' => array(self::HAS_ONE, 'Department', 'department_id'),
    );
} 
```

然后，您可以像这样提取当前用户的所有文档：

```
$user = User::model()->findByPk($userId);
$documents = $user->documents; 
```

`$documents`然后将是所有用户文档的活动模型数组。

要获取该用户部门的所有文件，有几个选项。您可以再次使用关系，向 Department 模型添加以下内容：

```
public function relations()
{
    return array(
        'users' => array(self::HAS_MANY, 'User', 'department_id'),
        'documents' => array(self::HAS_MANY, 'Document', 'document_id', 'through'=>'users'),
    );
} 
```

这应该使您能够像这样提取所有部门文件；

```
$department = Department::model()->findByPk($departmentId);
$documents = $department->documents; 
```

这反过来意味着您可以像这样获取用户部门文档：

```
$user = User::model()->findByPk($userId);
$documents = $user->department->documents; 
```

很可能有一种更有效的方法可以通过在用户模型中使用关系来获取这些信息，但是现在我现在的工作为时已晚；）

一旦你有一个活动记录模型数组，你总是可以像这样使用[CArrayDataProvider](http://www.yiiframework.com/doc/api/1.1/CArrayDataProvider)将它们传递给数据提供者；

```
$dataprovider = new CArrayDataProvider($documents); 
```

顺便说一句，我没有测试过任何一个，所以他们可能需要一些编辑！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T15:17:24.973

您需要`search`在适当的模型上修改函数（我将猜测`documents`）。您已经可以在其中看到可以使用的代码。

给搜索函数本身添加一些参数，可以从控制器传入。然后使用这些来确定`compare`要进行哪些调用。

# html - 样式表不能在 Chrome/Safari 中工作，但可以在 Internet Explorer 中工作

> ID：13345955
> 
> 赞同：4
> 
> 时间：2012-11-12T14:57:00.847
> 
> 标签：html, css, internet-explorer, google-chrome, http-headers

**TL;博士**

我已经阅读了有关此问题的许多有关 Stack Overflow 的问题，并尝试遵循给定的建议。不过，我的 CSS 样式表在 Chrome/Safari 中无法使用，但*可以*在 Internet Explorer 中使用。

关于我的场景，我能看到的唯一奇怪的事情是我的服务器正在返回所有类型为 的文件`application/octet-stream`。我无法更改服务器的这一方面。我可以做些什么来将我的 CSS 文件解释为 Chrome/Safari 和 IE 中的样式表吗？

* * *

我有一个正在处理的嵌入式 Web 服务器项目。我对服务器软件的控制和进行页面级设置的能力非常有限。我所能做的就是创建编译到服务器应用程序中的静态 HTML、CSS 和图像文件。

因此，从嵌入式服务器返回的所有文件都`application/octet-stream`在`HTTP`标头中声明。这会在 Chrome 中产生警告，但不会出现错误。

最初，我在 Chrome/Safari 中加载此样式表时遇到问题，但它可以在 IE 中使用。在阅读了有关 Stack Overflow 的几个问题后，我发现我需要将样式表声明从以下位置更改：

```
<link rel="stylesheet" href="/styles/index.css"> 
```

到：

```
<link rel="stylesheet" type="text/css" href="/styles/index.css"> 
```

当我进行此更改时，Chrome 和 Safari 仍然无法处理 CSS 文件，但 IE 也开始忽略样式表。

奇怪的是，如果我**不在**我的 HTML 文档上声明 a `DOCTYPE`，我可以让链接的样式表在我的所有浏览器中工作。然而，这不是一个理想的解决方案。

我的猜测是这个问题与标头声明有关，并且它与元素`HTTP`中声明的类型不匹配。`link`

在遵循良好的 Web 开发实践代码（即在我的 HTML 文件上使用 doctypes 并且不在 HTML 标头中嵌入样式代码？）的同时，我可以做些什么来让这个样式表在 Chrome、Safari 和 IE 中工作？

为清楚起见，相关的 CSS/HTML 代码如下所示。

**索引.css**

```
html {height:100%}
body {margin:0;min-height:100%;position:relative}
iframe {width:100%;height:100%;border:none}

.hdr {min-width:765px;overflow:auto}
.logo1 {float:left;margin:4px}
.logo2 {float:right;margin:4px}
.menu {position:absolute;top:70px;left:0px;bottom:0px;width:175px}
.content {position:absolute;top:70px;left:175px;bottom:0px;right:0px;} 
```

**索引.htm**

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<link rel="stylesheet" href="/styles/index.css"> <!-- Removed the type declaration so that  this would at least work in IE9 //-->
</head>
<body lang="en-us">
<div class="hdr"><img class="logo1" src="/images/logo1.png" alt="Logo #1"><img class="logo2" src="/images/logo2.png" alt="Logo #2"></div>
<div class="menu"><iframe name="menu" src="/menu.shtm"></iframe></div>
<div class="content"><iframe name="main" src="/home.htm"></iframe></div>
</body> 
```

仅供参考，这是一个正在从现有项目开发的新项目。原始项目没有`DOCTYPE`在 HTML 文件上声明 a。因此，所有页面数据都以怪异模式在浏览器中加载和执行。此外，`index.htm`最初由多个`frames`在一个`frameset`.

我正在尝试更新此应用程序，使用正确且最新的方法来开发网页。我可以让这个应用程序工作，但我觉得如果我不得不依赖浏览器怪癖模式和框架集，这将牺牲未来浏览器的兼容性。

我试图关闭链接标签，但这无济于事。从技术上讲，这应该不是问题，因为该文档被声明为 HTML5 文档，而不是 XHTML。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T16:01:25.273

这当然是由于`application/octet-stream`内容类型。我可以重新创建我的问题。一旦内容类型设置为`text/css`您的 HTML/CSS 加载就可以了。

作为一种解决方法，[`<style>`](http://www.w3.org/TR/html4/present/styles.html#h-14.2.3)如果您无法让服务器发送正确的内容类型，您可以为您的 CSS 使用标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T21:43:37.707

我讨厌必须以这种方式回答我自己的问题，但问题肯定在于服务器正在返回`application/octet-stream`HTTP 标头内的内容类型。

在与管理层讨论了这个问题之后，我们不得不更新与 HTTP 处理器相关的代码。这是第三方 RTOS 的一部分的代码，我们一直非常犹豫要对此代码进行任何更改。

然而，在这种情况下，需求超过了这种愿望。我已经集成了必要的更改来修复 HTTP 标头以返回“text/css”的内容类型以用于级联样式表。世界现在一切正常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-20T06:53:23.613

我想我会在这里插话。不是为了回答问题，而是为了确认问题，也许可以帮助有类似问题的人。

我遇到了同样的问题：外部 css 文件加载正常，但未在 Chrome 中应用。（Safari 和 FF 对此表示满意）。所以，同样的问题，稍微不同的原因。

事实证明，由于网络服务器代码中的错误，HTTP 响应包含两种内容类型，“text/html”**和**“text/css”。

解决方案是删除错误的“text/html”行。似乎 Chrome 在响应标头方面比其他浏览器更挑剔。我认为这是合法的，但警告会很好。

顺便说一句，当您打开开发人员工具并选择网络时，您可以在 Chrome 中看到已加载资源的所有 http 信息。然后单击要调查的文件。（我花了一段时间才找到那个）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-12T20:29:10.487

我们遇到了一个 iframe 的问题，它的内容由外部 javascript 例程更新，CSS 已加载但未应用。但是从 iframe 头部中的例程更新正文 HTML 的工作方式与预期相同。

壁虎和资源管理器中不存在相同的行为，但在 Safari 浏览器（webkit）中发生了相同的行为

希望这可以在这个奇怪的案例中提供一些启示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-11T00:39:18.873

我想补充一点信息，可能会为你们中的一些人节省一些时间。看来 chrome 也无法识别我的 CSS。阅读完上述帖子后，我查看了开发人员工具->网络中的文件。原来 Chrome 使用的是我的 CSS 的本地缓存版本。只要我刷新而不是再次访问 URL，它就起作用了！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-03T03:30:24.103

我不是专家，但我以前犯过这个错误，这很简单。

你写过：

```
<link rel="stylesheet" href="/styles/index.css"> 
```

如果这是与 index.html 文件位于同一目录中的文件夹，则需要删除第一个`/`. 像这样：

```
<link rel="stylesheet" href="styles/index.css"> 
```

编辑：我认为其他人已经提到了这一点，但它可能被忽略了。

# c# - 动态选择实体属性？

> ID：13345960
> 
> 赞同：3
> 
> 时间：2012-11-12T14:57:18.950
> 
> 标签：c#, wpf, entity-framework, data-binding

我将尝试按原样解释情况：

我有一个使用 MVVM 模式的 WPF 应用程序。所以代码至少分为三个“层”。现在，GUI 是由放置在外部 XML 文件中的可定制定义动态构建的。例如，在该 XML 文件中，定义了 Grid 的每一行及其含义和布局。以及它应该从数据源中的表中读取的列。顺便说一句，该数据源是在我的应用程序中使用实体框架实现的。

现在，我还没有找到从实体中动态选择属性的方法。例如：

```
Binding bnd = new Binding();
bnd.Source = from i in DataModel.Entities.machine
             where i.name == Properties.Settings.Default.CurrentMachine
             select i.<<THE COLUMN DEFINED IN THE XML>> 
```

所以我正在寻找一种将字符串（取自 XML）转换为实体的实际属性的方法。

这可以做到吗？如果是这样，具体如何？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T23:03:58.037

尝试使用[反射](http://msdn.microsoft.com/en-us/library/system.reflection.aspx)和 GetProperty() 方法。

```
 public Binding ReflectionBinder(string propertyName)
    {
        var binding = new Binding();
        var src = (from i in DataModel.Entities.machine
                   where i.name == Properties.Settings.Default.CurrentMachine
                   select i);

        binding.Source = src.GetType().GetProperty(propertyName).GetValue(src, null);

        return binding;
    } 
```

# c# - Linq to Entities 函数返回整数参数是否在一定范围内

> ID：13345963
> 
> 赞同：1
> 
> 时间：2012-11-12T14:57:26.317
> 
> 标签：c#, linq-to-entities, sql-function

我有一组 5 个参数，一个范围和实际值的两个上限和两个下限。在我的 Linq-to-Entites 查询中，我希望能够根据值在范围内的位置返回一个整数。

例如：

```
if (value > highest limit || value < lowest limit) return 6;
if (value < highest limit && value > 2nd high limit || value > lowest limit && value < 2nd lowest limit) return 5;
else if (value < 2nd highest limit && value > 2nd lowest limit) return 4; 
```

查询将是：

```
var list = from item in ObjectContext.Plants
           where item.ID == ID
           select new Model()
           {
               ID = item.ID,
               Name = item.Name,
               Status = CalculateWhereInRange(item.numericValue, item.UpperHighLimit, item.LowerHighLimit, item.UpperLowLimit, item.LowerLowLimit)
           };
return list; 
```

**编辑**

查询在服务器端被调用，并将数据传递回视图模型。这可以通过存储函数或sql函数来实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:39:46.937

存储您的五个参数：

```
 item.numericValue, item.UpperHighLimit, item.LowerHighLimit, item.UpperLowLimit, item.LowerLowLimit 
```

在模型类的五个属性中，然后在模型的构造函数中，您可以应用 CalculateWhereInRange() 的逻辑

喜欢

```
 var list = from item in ObjectContext.Plants
    where item.ID == ID
    select new Model()
       {
           ID = item.ID,
           Name = item.Name,
           NumericValue = item.numericValue, 
           UpperHighLimit = item.UpperHighLimit
           LowerHighLimit = item.LowerHighLimit
           UpperLowLimit =  item.UpperLowLimit
           LowerLowLimit = item.LowerLowLimit
       };

     public class Model()
     {
           public int UpperHighLimit {get;set;} //And all the others
           public Model()
           {
              //Do Calculations here with your 5 properties
           }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:48:54.590

`GetRangeStatus`向项目的类本身添加一个方法。然后你可以像这样使用它

```
var list = from item in ObjectContext.Plants
           where item.ID == ID
           select new Model()
           {
               ID = item.ID,
               Name = item.Name,
               Status = item.GetRangeStatus() // <====
           };
return list; 
```

不需要传递任何参数，因为所有需要的值都存储在`item`.

# java - 将一个 Frame 插入另一个 Frame 的组件层次结构中

> ID：13345968
> 
> 赞同：0
> 
> 时间：2012-11-12T14:57:36.577
> 
> 标签：java, swing, frame

由于某些原因（在 Java 应用程序上重新定义 Xwindow），我需要将一个框架添加到另一个框架中......但似乎不可能。有没有办法将一个框架（实际上是一个重量级组件）插入另一个框架的组件层次结构中？

# php - 媒体库的变化不会影响已发表的文章

> ID：13345971
> 
> 赞同：0
> 
> 时间：2012-11-12T14:57:57.403
> 
> 标签：php, wordpress

我正在运行一个 WordPress 博客，其中包含大量已发表的文章和媒体库中的大量图片。我的问题是：

有没有办法（插件？）让 WordPress 将我在媒体库中所做的更改（例如更改图片的描述/替代文本）应用于已发布的包含该图片的文章？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:26:06.407

每次 Wordpress 在模板上使用媒体时，都应该加载其适当的数据（摘录等）。尝试清理缓存以强制 Wordpress 重新加载数据。

也许您在博客上使用的主题没有使用正确的字段来填充图片的替代文本。从语义上讲，它应该是“image_alt”和“post_description”。

# tridion - Tridion 链接传播的快速检查

> ID：13345973
> 
> 赞同：3
> 
> 时间：2012-11-12T14:58:07.293
> 
> 标签：tridion, tridion-2011

就在我认为我了解 Tridion 如何解析链接时....

根据有关组件链接的文档-

> 如果您取消发布组件，则链接到该组件的任何组件都**不会取消发布**。

这仅与 DCP 有关吗？

我们在 DCP 和组件链接中使用了组件。当我取消发布组件（例如 C5）时，在“要取消发布的项目”列表中，我看到仅通过组件链接连接到 C5 的页面 - 我从列表中打开了几个页面，但没有一个页面直接在 CP 中使用该组件，但是它从同一页面上的另一个组件链接到：

```
Page P1
        CP1
            C1 + CT1
        CP2
            C2 + CT2
            (C2 links to C3 below)

Page P2
        CP1
            C3 + CT3
        CP2
            C4 + CT4
            (C4 links to C5 below)

Page P3
        CP1
            C5 + CT5 
```

当我取消发布组件 C5 时，页面 P1 位于取消发布列表中 - 这是正确的行为，对吗？

**编辑**

抱歉，这是 Tridion 2011 SP1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:06:09.693

我认为这确实是错误的行为。取消发布组件不应取消发布包含组件的所有页面，这些页面带有指向我们要取消发布的组件的组件链接。

**编辑**

@Neil，我能想到的唯一可能触发您描述的行为的事情如下：

1.  2009 年或更早。TBB、Workflow 或 EventSystem，带有根据您的描述发布/取消发布组件的代码。
2.  2011 GA 或更新版本。TBB、工作流、事件系统或带有代码的解析器扩展，以触发您在帖子中解释的行为。
3.  不太可能但仍然可能，一个错误:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T02:56:13.613

取消发布 C5 作为页面和静态内容使用的 DCP，应该：

*   不要管 P3，因为它包含 C5 作为动态组件
*   取消发布 C4 并作为嵌入页面的（非动态）组件，这也将...
*   取消发布 P2（如果已发布）

问题是取消发布 P2 是否应该取消发布 C3 和因此 C2 以及它嵌入的 P1 页面（静态）。至少对于我的 SDL Tridion 2011 SP1-1 设置，取消发布具有非动态嵌入式 CP 的页面不会取消发布其他页面。

但是，因为动态组件是由“静态”组件链接的，所以我认为最好的情况是删除并发布页面。否则，如果您真的只是指 DCP，您将删除其他页面，例如 P2。

# reporting-services - 来自 TFS 2012 的 tf208093 excel 报告

> ID：13345978
> 
> 赞同：2
> 
> 时间：2012-11-12T14:58:24.910
> 
> 标签：reporting-services

我的单台服务器上有 TFS2012 和 MSSQL。

我在*Microsoft Excel* 中为*TFS 查询*生成报告（图表）时出现以下错误（来自项目管理员帐户，通过网络连接）。

> TF208093: 您无法使用工作项查询在此服务器上的 Excel 中生成报告，因为它未配置为报告

同时，当我连接 windows server admin credentials 时没有错误

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:11:11.643

尝试使用[http://tfsadmin.codeplex.com/](http://tfsadmin.codeplex.com/)检查 SSRS 中的用户权限。

# jquery - jquery在链接点击时向下滑动div，然后在点击div外部时向上滑动

> ID：13345979
> 
> 赞同：0
> 
> 时间：2012-11-12T14:58:30.820
> 
> 标签：jquery

任何人都知道我怎么能有一个链接，当单击该链接时，该链接会向下滑动 div，然后当单击 div 之外的任何位置时，该 div 会向上滑动？

提前谢谢。

斯科特。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T15:03:34.360

试试这个：

```
$(".clicker").click(function(e) {
    e.preventDefault();
    e.stopPropagation();
    // do your worst, i.e. slide down
    $("div").slideDown("slow");
});

$(document).click(function() {
    // slide up
    $("div").slideUp("slow");
}); 
```

并且只是为了确保 div 不受影响：

```
$("div").click(function(e) {
    e.preventDefault();
    e.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:07:05.477

试试这个：

```
$(".target").click(function(e) {
    e.preventDefault();
    e.stopPropagation();
    $(".class").toggle();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T11:37:47.583

[Frederik 在Document click not in elements jQuery](https://stackoverflow.com/questions/10851312/document-click-not-in-elements-jquery/10851375#10851375)中找到了一个很好的答案

稍作修改以支持文档中尚未出现的元素，例如通过 ajax 调用获取的元素。

```
$(document).on('click',function(event) {
    if (!$(event.target).closest("#selector").length) {
        if ($('#selector').is(":visible"))
            $('#selector').slideUp();
    }
}); 
```

# ios - 如何读取蓝牙耳机名称？

> ID：13345980
> 
> 赞同：0
> 
> 时间：2012-11-12T14:58:30.480
> 
> 标签：ios, bluetooth, headset

我想读取蓝牙耳机名称。

我设法通过耳机路由声音并获得`kAudioSessionProperty_AudioRoute`.

我找不到任何文档如何读取耳机名称。欢迎任何链接、建议或代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:07:31.383

您无法读取设备名称，因为它是在设置/蓝牙中写入的。但是，您可以访问设备中写入的名称（有时会有所不同，我见过这种情况）：

```
EASessionController = [EADSessionController sharedController];
    _accessoryList = [[NSMutableArray alloc] initWithArray:[[EAAccessoryManager sharedAccessoryManager] connectedAccessories]];

    for (EAAccessory *key in _accessoryList)
    {
            NSLog(@"Name : %@", key.name);
    } 
```

[EAAccessory](http://developer.apple.com/library/ios/#documentation/ExternalAccessory/Reference/EAAccessory_class/Reference/Reference.html)课程的更多信息。

# asp.net-mvc - cshtml 运行时错误：LINQ to Entities 中仅支持无参数构造函数和初始化程序

> ID：13345982
> 
> 赞同：1
> 
> 时间：2012-11-12T14:58:42.140
> 
> 标签：asp.net-mvc, razor

想要在 cshtml 中使用公共类的对象，但出现运行时错误：LINQ to Entities 中仅支持无参数构造函数和初始化程序。以下陈述有什么问题？谢谢你的帮助！

```
@foreach (var obj in ViewData["IncompleteList"] as IEnumerable<Games.TeamAction>) 
```

控制器填充 ViewBag，如

```
IEnumerable<TeamAction> incomplete = dbIncAct.IncompleteActivity.Where(a => a.activityID == id)
                                .Select(s => new TeamAction(s.teamID, s.name, id, s.type));
ViewBag.IncompleteList = incomplete; 
```

TeamAction 类（命名空间 Games 的一部分）非常简单：

```
public class TeamAction
{
    public TeamAction()
    {
    }

    ....

    public int teamID {get; set;}
    public string teamName { get; set; }
    public int activityID { get; set; }
    public int actionType { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T16:27:47.257

一旦您弄清楚如何解释它，答案就在错误消息中。

您正在`IEnumerable`通过 LINQ to Entities（实体框架 LINQ 提供程序）创建一个，如下所示：

```
IEnumerable<TeamAction> incomplete = dbIncAct.IncompleteActivity
  .Where(a => a.activityID == id)
  .Select(s => new TeamAction(s.teamID, s.name, id, s.type)); 
```

请注意，您的`Select`调用包含一个 lambda 表达式，该表达式调用带有`TeamAction`4 个参数的构造函数。只要您请求 中的第一个元素`IEnumerable`，LINQ 就会尝试执行您的查询。此时，它会解析您的 lambda 表达式并尝试将其转换为可以运行的实体框架查询。但是，正如异常消息所说：

```
Only parameterless constructors and initializers are supported 
```

您不能在 LINQ 查询中包含参数化构造函数，因为 LINQ to Entities 不知道如何执行它。要解决此问题，您有几个选择。

**选项一：IQueryable -> IEnumerable**

解决此问题的最简单方法是确保 EF LINQ 提供程序永远不会看到有问题的 lambda，方法是在它到达之前强制您`IQueryable`进入。可能是, 并返回仍然依赖于 LINQ 2 实体的 。要打破这种依赖关系，您可以执行以下操作：`IEnumerable``dbIncAct.ImcompleteActivity``DbSet<>``DbSet<>.Where``IQueryable`

```
IEnumerable<TeamAction> incomplete = dbIncAct.IncompleteActivity
  .Where(a => a.activityID == id)
  .AsEnumerable()
  .Select(s => new TeamAction(s.teamID, s.name, id, s.type)); 
```

这将强制您的 EF 查询通过该部分运行并返回可枚举的实体`Where`集合。`IncompleteActivity`然后使用那个东西（一些内部定义`List`的类似对象）来调用`Select`，完全不同于 EF。

这里的缺点是您正在强制 EF 查询（可能会访问数据库）立即发生。如果您不希望这样，您唯一的选择是使用其他两个选项之一来消除参数化构造函数。

**选项二：对象初始化器**

根据该构造函数所做的事情，您可能无法轻松修复它。如果您的构造函数只是在那里为您新创建的对象**设置属性**，那么您很幸运。正是由于这个原因，C# 引入了新的对象初始化器语法以与 LINQ 和 lambda 一起使用：

```
IEnumerable<TeamAction> incomplete = dbIncAct.IncompleteActivity
  .Where(a => a.activityID == id)
  .Select(s => new TeamAction 
  { 
    TeamId = s.teamID, 
    Name = s.name,
    Id = id, 
    Type = s.type
  }); 
```

**选项三：重构**

如果您的构造函数做了任何实际工作，那么您需要进行一些重构。尝试将尽可能多的逻辑移动到默认`TeamAction()`构造函数中。您还可以将一些逻辑放入属性设置器中，尽管您应该尽量减少它。

如果您的对象确实需要一些复杂的初始化，典型的模式是有一个在生命周期早期被调用的初始化方法，例如：

```
var x = new X { ... };  
x.InitializeMe(); 
```

例如，您可以在`@for`循环内执行此操作，也可以在创建查询后立即作为单独的步骤执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:17:43.467

改为对象初始化：

```
IEnumerable<TeamAction> incomplete = dbIncAct.IncompleteActivity.Where(a => a.activityID == id)
                            .Select(s => new TeamAction { teamID = s.teamID, teamName = s.name, activityID = s.id, actionType = s.type }); 
```

# java - Java：数组索引超出范围异常

> ID：13345985
> 
> 赞同：0
> 
> 时间：2012-11-12T14:58:54.143
> 
> 标签：java, multidimensional-array, indexoutofboundsexception

当我编译时出现错误 java.lang.ArrayIndexOutOfBoundsException: -1。我检查了 3 次代码，没有发现错误，我也没有在数组结束后写入。

```
Random nahoda = new Random();    int[][] minPol = new int[5][5];
int[][] cisPol = new int[5][5];
for(int i = 0;i<5;i++)
{
for(int j=0;j<5;j++)
{
minPol[i][j] = nahoda.nextInt(2);
cisPol[i][j] = 0;
}
}
for(int i = 0;i<5;i++)
{
    for(int j=0;j<5;j++)
    {
        if(minPol[i][j]!=0)
        {
        if(i != 0 || j != 0 || i != 4 || j != 4)
        {
            cisPol[i+1][j+1]++;
            cisPol[i+1][j-1]++;
            cisPol[i-1][j+1]++;
            cisPol[i-1][j-1]++;
            cisPol[i+1][j]++;
            cisPol[i-1][j]++;
            cisPol[i][j+1]++;
            cisPol[i][j-1]++;
        }
        else
        {
            if(i == 0)
            {
                if(j == 0)
                {
                    cisPol[i+1][j+1]++;
                    cisPol[i][j+1]++;
                    cisPol[i+1][j]++;
                }
                else if(j == 4)
                {
                    cisPol[i+1][j]++;
                    cisPol[i+1][j-1]++;
                    cisPol[i][j-1]++;
                }
                else
                {
                    cisPol[i+1][j+1]++;
                    cisPol[i][j+1]++;
                    cisPol[i+1][j]++;
                    cisPol[i+1][j-1]++;
                    cisPol[i][j-1]++;
                }
            }
            else if(i == 4)
            {
                if(j == 0)
                {
                    cisPol[i-1][j+1]++;
                    cisPol[i-1][j]++;
                    cisPol[i][j+1]++;
                }
                else if(j == 4)
                {
                    cisPol[i-1][j-1]++;
                    cisPol[i-1][j]++;
                    cisPol[i][j-1]++;
                }
                else
                {
                    cisPol[i][j-1]++;
                    cisPol[i][j+1]++;
                    cisPol[i-1][j+1]++;
                    cisPol[i-1][j]++;
                    cisPol[i-1][j-1]++;
                }
            }
        }            
        }
    }
} 
```

我是 Java 初学者，感谢您的提示

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T15:01:21.683

看看这个条件：

```
if(i != 0 || j != 0 || i != 4 || j != 4) 
```

那不会做你想做的事。它*总是*正确的，因为`i`不能同时等于 0 和 4。

`j`因此，当为 0时，您最终会进入这里：

```
cisPol[i+1][j-1]++; 
```

砰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:10:15.857

试试这个;

替换这一行；

```
 if(i != 0 || j != 0 || i != 4 || j != 4) 
```

和

```
 if( i>=1 && j>=1 && j<4 && i<4) 
```

这将确保您不会从具有负索引或大于 4 的值的数组中引用。

# intellij-idea - 使用 10001 端口的 Intellij 想法

> ID：13345986
> 
> 赞同：3
> 
> 时间：2012-11-12T14:58:54.330
> 
> 标签：intellij-idea

Intellij IDEA 12 Public Preview 默认监听其插件之一的 10001 端口。在我们公司，我们将此端口用于其他目的，似乎没有简单的方法来改变它......任何人都可以提出任何选择吗？谷歌搜索了大约一个小时无济于事。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-12T16:12:05.660

IntelliJ IDEA EAP 构建默认启用**YourKit Java Profiler**代理，以便用户可以开箱即用地获取 CPU 和内存快照以报告性能问题。

代理通过`idea(64.exe).vmoptions`文件启用：

```
-agentlib:yjpagent=disablej2ee,disablealloc,sessionname=IntelliJIdea12 
```

您可以删除此行以禁用将释放 10001+ 个端口的分析器代理。另一种解决方案是使用[代理选项](http://www.yourkit.com/docs/11/help/startup_options.jsp)更改默认端口：

`-agentlib:yjpagent=disablej2ee,disablealloc,sessionname=IntelliJIdea12`**,端口=31337**

如果您使用的是 Mac，此配置通过 完成`Info.plist`，请参阅[常见问题解答](http://devnet.jetbrains.net/docs/DOC-197)。

在 Linux 上，它是在`idea.sh`脚本中添加的：

```
IS_EAP="true"
if [ "$IS_EAP" = "true" ]; then
  OS_NAME=`echo $OS_TYPE | "$TR" '[:upper:]' '[:lower:]'`
  AGENT_LIB="yjpagent-$OS_NAME$BITS"
  if [ -r "$IDE_BIN_HOME/lib$AGENT_LIB.so" ]; then
    AGENT="-agentlib:$AGENT_LIB=disablej2ee,disablealloc,sessionname=IntelliJIdea12"
  fi
fi 
```

只需更改`IS_EAP="false"`或删除代理`.so`文件即可禁用它。

根据 Vladimir 的建议，我[创建了一个](http://youtrack.jetbrains.com/issue/IDEA-94892)默认使用**onlylocal**选项的请求，请随时投票。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T08:19:35.210

作为 YourKit 开发人员，我想跟进 Serge 的回答，并建议将“onlylocal”添加到 YourKit 代理选项列表中。此选项强制探查器打开环回网络接口上的端口。可能它更安全，在 Windows 上您不会看到安全警告。

# c++ - 使用 rdbuf()->sputn(...) vs operator<<

> ID：13345988
> 
> 赞同：3
> 
> 时间：2012-11-12T14:59:00.180
> 
> 标签：c++, iostream, std

我正在查看一些遗留代码，发现`std::string`在整个代码中大量使用临时对象来转换`const char*`以强制使用：

```
inline std::ostream & operator << (std::ostream & s, const std::string & str) 
```

其中`str.c_str()`用于影响调用

```
template<class _Traits> inline
    basic_ostream<char, _Traits>& __CLRCALL_OR_CDECL operator<<(
        basic_ostream<char, _Traits>& _Ostr,
        const char *_Val) 
```

奇怪的是，我认为这样做是因为有人创建了一个递归的 const char* 插入运算符……无论如何，原因在遥远的过去迷失了……当我注意到发生了什么并且一切正常时，我将其删除了（AFAIK） .

在试验这个问题时，我重新定义`operator<<(std::ostream& , const char*)`了以下内容。

```
//
// Disclaimer - experiment!!! not enshrined in code.
//
inline std::ostream & operator << (std::ostream & s, const char * str)
{
   //formerly return s << std::string(str);

   if( str ) s.rdbuf()->sputn( str , strlen(str) );
   return s;
} 
```

**除了电话（抢占一些评论）之外的***问题***`strlen`是绕过插入运算符有很多缺点吗？（我在我绕过的运算符中看到了一些 try catch 逻辑，也许我可以将它放入上面的运算符中。）**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:19:16.013

流插入器执行**格式化**输入，由流对象中的几个标志控制。将字符直接填充到输出缓冲区会绕过这种格式，因此像这样`setw`的操纵器不会影响输出。**

# ruby-on-rails - 将 ActiveRecord 的数据加载到 Capistrano 的 deploy.rb

> ID：13345992
> 
> 赞同：1
> 
> 时间：2012-11-12T14:59:10.363
> 
> 标签：ruby-on-rails, capistrano, sidekiq

我使用 Capistrano 进行部署，使用 Sidekiq 进行队列。我需要加载用户 ID 以在 deploy.rb 文件中设置 :sidekiq_queues 变量以执行 sidekiq 队列。现在我使用以下代码

```
set :sidekiq_queues, ::User.all.map {|u| "-q parsing_user_#{u.id}"}.join(" ") + " -q parsing_user_0" 
```

但它会引发以下错误

```
./config/deploy.rb:29:in `load': uninitialized constant User (NameError) 
```

我试图将“rubygems”和“active_record”放入deploy.rb，但没有帮助。结果我应该有sidekiq_queues ==“-q parsing_user_1 -q parsing_user_2 -q parsing_user_3 -q parsing_user_4 -q parsing_user_5 -q parsing_user_0”。硬编码队列名称不是解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:41:38.143

Capistrano 在本地执行 deploy.rb，它不会在 deploy.rb 中加载 Rails 环境。

这可能比它的价值更麻烦。特别是如果您想在远程服务器上执行此操作，您可能会考虑改为执行 Rake 任务。rake 任务中的`=> :environment`确保您的 Rails 环境已加载。

```
# in deploy.rb
namespace :sidekiq do
  desc "Do something with queues"
  task :queues, :roles => :web  do
    run "cd #{current_path} ; RAILS_ENV=#{rails_env} bundle exec rake sidekiq:queues"
  end
end

# you'll need to decide when to execute this in your deployment process, 
# something like this:

after "deploy:update_code", "sidekiq:queues"

# in lib/tasks/sidekiq.rake
namespace :sidekiq do
  desc "Do something with queues"
  task :queues => :environment do
    queues = (User.scoped.pluck(:id) + [0]).map{|id| "-q parsing_user_#{id}"}.join(" ")
    # do what you need to do
  end
end 
```

# java - 访问消息驱动 Bean 中的 servlet 类

> ID：13345993
> 
> 赞同：2
> 
> 时间：2012-11-12T14:59:17.757
> 
> 标签：java, weblogic, war

我们有一个 web 应用程序，它是一个包含 1 个 war 和 1 个 MDB jar 的 ear 文件。问题是当第一次请求 servlet 时，我在 servlet 中加载了一些属性文件。我的 MDB 中也需要这些属性。如何在 EJB jar 类中访问我的 Servlet 类（内部战争）。有什么方法可以将我的战争文件用作实用程序 jar。

应用程序正在 weblogic 服务器上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:03:14.683

您不需要通过 HTTP 调用调用 servlet。您可以通过对 servlet 执行 URLConnection 来破解它，但我宁愿稍微重构您的代码，以便您可以在服务器启动时调用初始化代码，而不是调用 servlet。上下文侦听器或 EJB init() 已经可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:21:11.707

将您的财产管理提取到一个通用的实用 JAR 中，可以从您的应用程序的两个层访问。