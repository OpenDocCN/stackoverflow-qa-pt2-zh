# StackOverflow 问答 14391000-14391999

# c++ - c ++闰年请帮助

> ID：14391002
> 
> 赞同：-4
> 
> 时间：2013-01-18T01:13:59.523
> 
> 标签：c++

我是论坛的新手，正在尝试自学 C++。我确实有一个问题要问你们。我这个作业的目标是确定一个四​​位数的数字是否是闰年。我无法让它运行四位数的年份。你能帮我让它运行吗？

谢谢你

```
#include<iostream>
using namespace std;
{
    int year (int year)
{
    if( (year%400==0 || year%100!=0) &&(year%4==0))
        cout<<year;
    else
        cout<<year;
    cin.ignore();
    cin.get();
    return 0;
}

int main()

const int arraySize = 4; 
int yr [ arraySize ]; 
cout << "Enter " << arraySize << " four digits years:\n";
for ( int i = 0; i < arraySize; i++ )
    cin >> yr[ i ];
    cout << (yr)<<" is a leap year.\n" << endl;
} 
```

这是我写的非常简单的一个，但我不希望它运行超过 4 位，你们能告诉我怎么做吗？

```
#include<iostream>
using namespace std;

int main()

int year;
cout<<"Enter the year : ";
cin>>year;
if( (year % 400 == 0 || year % 100!=0) && ( year % 4 == 0))
    cout<<" is a leap year";
else        
    cout<<"is not a leap year";
cin.ignore();
cin.get();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T01:18:27.420

首先，我同意@Ken White 的观点。你不需要数组。一个变量就是它所需要的。也是一个`integer`。只要`mod 4`余数等于 0 或大于它，你就会得到答案。对于如此简单的事情，看起来像是一个非常长的程序。请也清除您的英语。谢谢！

**编辑**

```
int y; 
cin y; 
if ((y%400 == 0 || y%100 != 0) && (y%4 == 0)) 
      cout<< y << " is a leap year"; 
```

仍然不知道为什么你需要一个数组。

# python - 尝试使用 PyPy 和 Scapy 嗅探无线适配器时出错

> ID：14391007
> 
> 赞同：0
> 
> 时间：2013-01-18T01:14:37.790
> 
> 标签：python, scapy, pypy

我正在尝试使用 PyPy 和 Scapy 嗅探无线适配器。我在 Ubuntu Linux 上，所以我使用 airmon-ng 将我的卡置于监控模式，打开一个 REPL，然后输入以下内容（在导入 scapy 之后）：

```
sniff(prn=lambda pkt: pkt.summary(), iface='mon0') 
```

这在 CPython REPL 中运行良好。但是，在 PyPy REPL 中，我收到以下错误：

```
Traceback (most recent call last):
    File "<console>", line 1, in <module>
    File "scapy/sendrecv.py", line 550, in sniff
        s = L2socket(type=ETH_P_ALL, *arg, **karg)
    File "scapy/arch/linux.py", line 452, in __init__
        self.ins.bind((iface, type))
    File "<string>", line 1, in bind
error: unknown address family 
```

如果我关闭监控模式并尝试嗅探标准适配器 (wlan0)，也会发生这种情况。但是，它似乎确实适用于非无线接口 (eth1)。

PyPy 兼容性索引将 Scapy 列为使用 PyPy。经过一番谷歌搜索，我发现[这篇文章](http://trac.secdev.org/scapy/ticket/479)看起来可能是一个答案，但两个链接都不再有效。任何有关该主题的意见将不胜感激。

先感谢您，

瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:37:21.380

我认为某些数据包类型支持不适用于所有架构。你需要说出你想在什么平台上使用它（OS X、Linux、Windows）以及至少 PyPy 的版本。另外，bugs.pypy.org 是正确的地方，而不是这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T19:46:10.427

当 scapy 没有以足够的权限运行时，我得到了这个错误。尝试以系统管理员身份运行它。

# javascript - 从 JavaScript 跨浏览器运行 .exe

> ID：14391016
> 
> 赞同：3
> 
> 时间：2013-01-18T01:15:21.987
> 
> 标签：javascript, activex, exe, hta, activex-exe

我知道如何`.exe`使用 ActiveX 运行，但这只是 Internet Explorer，我也知道如何使用`.hta`，但必须作为应用程序安装/使用。

这不一定是在线的：实际上我更喜欢在本地。

这不一定适用于所有浏览器：该解决方案只能适用于 Firefox。

非常感谢您！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T01:22:12.490

看起来您可以使用`nsIProccess` [https://developer.mozilla.org/en-US/docs/Code_snippets/Running_applications](https://developer.mozilla.org/en-US/docs/Code_snippets/Running_applications)从 Firefox 运行 .exe，因此您应该研究一下。

但是，不建议从浏览器运行 .exe，因为这会使您的网站看起来是恶意的。

我无论如何都找不到铬。但是，您可以使用 NPAPI 加载外部库，这也可能适用于 exe，但我不知道：http: [//developer.chrome.com/extensions/npapi.html](http://developer.chrome.com/extensions/npapi.html)

# javascript - 如何更改ckeditor对话框默认选项卡？

> ID：14391018
> 
> 赞同：0
> 
> 时间：2013-01-18T01:15:39.460
> 
> 标签：javascript, ckeditor

代码有效，但仅在第一次有效

```
if (dialogName == 'image') {
    dialogDefinition.removeContents('upload');
    dialogDefinition.removeContents('advanced');
    dialogDefinition.removeContents('Link');

    var infoTab = dialogDefinition.getContents('info');
    infoTab.remove('txtAlt');
    infoTab.remove('txtBorder');
    infoTab.remove('txtHSpace');
    infoTab.remove('txtVSpace');
    infoTab.remove('cmbAlign');

    dialogDefinition.onLoad = function () {
        this.selectPage('Upload');
    };
} 
```

如果我不刷新页面，点击“图片”按钮两次不是“上传”。需要一些帮助，tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T06:12:09.280

您可以将此代码放在 config.js 中：

```
CKEDITOR.on('dialogDefinition', function (ev) {
    // Take the dialog window name and its definition from the event data.
    var dialogName = ev.data.name;
    var dialogDefinition = ev.data.definition;
    if (dialogName == 'link') {
        dialogDefinition.removeContents('advanced'); //remove advanced tab

        var infoTab = dialogDefinition.getContents('info');
        var urlField = infoTab.get('url');
        urlField['default'] = 'www.ireadhome.com'; //set default value for the url field
    }
}); 
```

# vb.net - vb.net 控制台应用程序显示输出和管道结果

> ID：14391021
> 
> 赞同：1
> 
> 时间：2013-01-18T01:15:49.367
> 
> 标签：vb.net, console

我正在编写一个控制台应用程序，我希望能够像这样将结果通过管道传输到另一个文件。

C:>Myapp.exe > test.txt

一切都很好。但我也想在命令窗口中显示一些文本，比如进度区域或类似的东西。

一个很好的例子是 sysinternals 应用程序 psInfo。如果您使用 psinfo.exe > test.txt 运行它，您会在 cmd 窗口中获得一些文本，并且您还会获得一些重定向到 test.txt 文件的信息。

如果您执行 psinfo.exe | find /i "sys" 你在 cmd 中得到的结果与 find 和 find 结果不匹配。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T01:35:53.003

您的应用程序可以写入标准输出以及标准错误。

对于您的场景，您可能应该将您想要在文件中结束的内容写入标准输出，并将您仍希望在屏幕上显示的内容写入标准错误。

您使用 Console.Error 写入标准错误

[http://msdn.microsoft.com/en-us/library/system.console.error.aspx](http://msdn.microsoft.com/en-us/library/system.console.error.aspx)

# php - php - cakephp - 使用递归指定分页中的 hasMany 列/字段

> ID：14391022
> 
> 赞同：1
> 
> 时间：2013-01-18T01:15:50.347
> 
> 标签：php, cakephp, pagination, cakephp-2.0

我在这里查看了可包含组件和其他问题，但看起来对我没有帮助。

基本上，我将分页设置为 1，它返回给我的东西就像

```
Array
(
[0] => Array
(
    [ModelName1] => Array
    (
        [id] => 83
        [parent_id] => null
        [field1] => value1
    )

    [AssociatedModelName1] => Array
    (
        [id] => 1
        [field1] => value1
    )

    [children] => Array
    (
        [0] => Array
        (
            [ModelName] => Array
            (
                [id] => 42
                [parent_id] => 83
                [field1] => value1
                [field2] => value2
                [field3] => value3
            )

            [AssociatedModelName] => Array
            (
                [id] => 2
                [field1] => value1
                [field2] => value2
                [field3] => value3
            ) 
```

我可以通过添加来限制 ModelName1 和 AssociatedModelName1 字段的输出

```
$fields => array("ModelName1.field1") 
```

到设置数组。其实我把这个传给DataTable Plugin的组件初始化的“列”，但是应该是一样的。

但是，由于有这么多的孩子，每个孩子都包含很多领域，我想只得到每个孩子的“field2”。

我怎样才能做到这一点？如果我指定“Children.ModelName1”，则会收到 SQL1054 错误，即未找到列。

有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:28:39.177

您必须以一种或另一种方式使用条件数组：

```
$this->paginate['Model'] = array(
    'contain' => array(
        'ChildModel' => array(
            'fields' => array('ChildModel.field1', 'Childmodel.field2'),
            'ChildChildModel' => array(
                'fields' => array('ChildChildModel.field1', 'ChildChildModel.field2'),
            )
        )
    )
); 
```

# java - Android中的java泛型

> ID：14391027
> 
> 赞同：5
> 
> 时间：2013-01-18T01:16:48.877
> 
> 标签：java, android, generics

我不明白以下代码：

```
public class EventAdapter extends ArrayAdapter<Event> 
{
    public EventAdapter(Context context, int textViewResourceId,
            List<Event> objects) 
    {
        super(context, textViewResourceId, objects);
        this.resource = textViewResourceId;
    }
} 
```

在这两种情况下，我都对这部分感到困惑`<Event>`。我知道它与泛型有关，但我不明白。我读了[http://docs.oracle.com/javase/tutorial/java/generics/](http://docs.oracle.com/javase/tutorial/java/generics/)，但还是不明白。

我明白这`objects`是一个`ArrayList`类型的对象`Event`。

我不明白的部分是使用 Type 扩展 ArrayAdapter `<Event>`。这意味着什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T03:49:55.407

`extends ArrayAdapter<Event>`

这里的类型限制会影响类中方法的返回类型，以及方法的参数类型。

这是一个例子，如果你有一个类：

```
class SomeClass<T> {
    protected T value;

    public void setValue (T value) {
        this.value = value;
    }

    public T getValue () {
        return value;
    }
} 
```

如果你有另一个班级：

```
class SubClass extends SomeClass {

    @Override
    public void setValue (Event value) {    // Fail! It is not overriding the super class' method.
        this.value = value;    // Warning! Unchecked types (maybe inconsistent).
    }
} 
```

如果删除`@Override`注释，它将运行。但是. `extends SomeClass`_ `setValue(Event)`_ `super.setValue(T)`现在的问题是**子类可以访问该`super.setValue(T)`方法吗？**我会在最后解释，参见“A missing type parameter bounding example”。

因此，您需要在声明中指定类型：

```
class SubClass extends SomeClass<Event> {

    @Override
    public void setValue (Event value) {    // Correct now!
        this.value = value;
    }
} 
```

此外，如果您声明不一致的类型：

```
class SubClass extends SomeClass<String> {

    @Override
    public void setValue (Event value) {    // Fail! Not overriding.
        this.value = value;    // Fail! Inconsistent types.
    }
} 
```

所以类型限制了类体的行为。

* * *

* * *

## 缺少类型参数边界示例：

* * *

```
import java.lang.reflect.*;

class Super<T> {
    public void method (T t) {
        System.out.println("Hello");
    }

    public void method2 () {

    }
}

public class Test extends Super {
    /*public void method (Object t) {
        System.out.println("world");
    }*/

    /*public <T> void method (T t) {

    }*/

    public static void main (String args[]) {
        new Test().method("");
        for (Method m : Test.class.getMethods()) {
            System.out.println(m.toGenericString());
        }
    }
} 
```

*   如果我`method()`在子类中发表评论，它会被编译并带有警告：`Test.java uses unchecked or unsafe opertations`。在运行结果中，它把泛型类型`T`变成了`Object`: `public void Test.method(java.lang.Object)`。

*   如果我只取消注释`method()`子类中的第一个，它将被编译而没有警告。在运行结果中，子类拥有一个`public void Test.method(java.lang.Object)`。但它不允许`@Override`注释。

*   如果我只取消注释`method()`子类中的第二个（它也有一个泛型类型边界），编译将失败并出现错误：`name clash`. 它也不允许`@Override`注释。如果你这样做，它会抛出一个不同的错误：`method does not override`.

*   `method2()`被子类一致继承。但是你也不能写下面的代码：

    在超类：`public void method2 (Object obj)`和子类：`public <T> void method2 (T obj)`。它们也是模棱两可的，编译器不允许。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T02:41:31.667

在这种情况下，这是我看待泛型的简单方法。给定定义：

```
public class EventAdapter extends ArrayAdapter<Event> 
```

我把它读作：“一个`EventAdapter`IS-A `ArrayAdapter`OF`Event`对象。”

我`List<Event> objects`的意思是`List`对象`Event`。

集合是对象的容器，而泛型定义了它们可以包含的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-31T16:04:48.310

这会为 ArrayAdapter 中的泛型参数分配一个值，从而从 EventAdapter 类的用户手中夺走控制权。

然后，此处覆盖的任何方法都可以用 Event 替换 T ，并且可以使用 Event 代替 T 而无需强制转换。

这是泛型的一般定义。

在这种情况下允许这样做是在[规范](https://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.4)中定义的。虽然该部分中没有定义确切的行为，但据我所知，我认为它与所有其他通用行为一致。

虽然我第一次看到这里的构造，但在一些人认为它真的没有什么不寻常之后。

# android - Monodroid - 如何以编程方式调整设备屏幕亮度？

> ID：14391032
> 
> 赞同：0
> 
> 时间：2013-01-18T01:17:14.917
> 
> 标签：android, xamarin.android

有谁知道如何在 Mono for Android 中以编程方式调整屏幕亮度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-27T14:57:59.807

这是一个非常古老的帖子，但由于它没有得到回答而且我只是遇到了同样的问题，所以我做的是下一个：

```
WindowManagerLayoutParams windowManagerLayoutParams = new WindowManagerLayoutParams();
windowManagerLayoutParams.CopyFrom(Window.Attributes);
windowManagerLayoutParams.ScreenBrightness = 1f; //set screen to full brightness
Window.Attributes = windowManagerLayoutParams; 
```

要将其设置回自动：

```
WindowManagerLayoutParams windowManagerLayoutParams = new WindowManagerLayoutParams();
windowManagerLayoutParams.CopyFrom(Window.Attributes);
windowManagerLayoutParams.ScreenBrightness = -1;
Window.Attributes = windowManagerLayoutParams; 
```

如果您想保存旧亮度并将其设置回原来的亮度，您可以将其存储在一个变量中并再次使用它。

# iptables - iptables src-range 和 dst-range

> ID：14391035
> 
> 赞同：3
> 
> 时间：2013-01-18T01:17:29.317
> 
> 标签：iptables

我们如何在 iptables 中使用这些标志？我不断收到无效选项/错误参数错误：

```
sudo iptables -A FORWARD --src-range 192.168.25.149-192.168.25.151 -j ACCEPT 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T07:55:15.317

您忘记了“iprange”匹配。

这有效： sudo iptables -A INPUT -m iprange --src-range 192.168.25.149-192.168.25.151 -j ACCEPT

[http://www.frozentux.net/iptables-tutorial/chunkyhtml/x2702.html#TABLE.IPRANGEMATCH](http://www.frozentux.net/iptables-tutorial/chunkyhtml/x2702.html#TABLE.IPRANGEMATCH)

# django - 使用 CreateView 将请求变量传递给模型的最佳方法是什么

> ID：14391036
> 
> 赞同：4
> 
> 时间：2013-01-18T01:17:36.397
> 
> 标签：django, django-forms

我正在开发一个消息传递系统，我想根据当前登录的用户设置消息的发起者。

```
class Message(models.Model):
    originator = models.ForeignKey(User, related_name='+')
    destination = models.ForeignKey(User, related_name='+')
    subject = models.CharField(max_length=100)
    content = models.TextField() 
```

我使用 ModelForm 和 CreateView 来表示：

```
class MessageForm(forms.ModelForm):

    class Meta:
        model = Message
        fields = ('destination', 'subject', 'content') 
```

所以在保存这个表单之前，`originator`需要设置为当前登录的用户。我不认为在这里覆盖`save`模型的方法是合适的，所以我打算在表单的`save`方法中这样做，但是我无权访问请求变量。在[另一个 CreateView 帖子](https://stackoverflow.com/questions/5773724/how-do-i-use-createview-with-a-modelform/5774124#5774124)中，建议是覆盖该`get_form_kwargs`方法：

```
class MyFormView(FormView):
    def get_form_kwargs(self):
        # pass "user" keyword argument with the current user to your form
        kwargs = super(MyFormView, self).get_form_kwargs()
        kwargs['user'] = self.request.user
        return kwargs 
```

但是这不起作用，因为您实际上不能将 kwarg 传递`user`给 ModelForm，因为 ModelForm 不接受自定义参数。

`originator`用用户信息更新变量的最佳（最干净和最实用）的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T01:17:36.397

在与[yuji-tomita-tomita](https://stackoverflow.com/users/267887/yuji-tomita-tomita)的讨论中，他提出了以下建议，我想分享一下：

第一种方法依赖于他的原始代码，将`user`kwarg 发送到带有 的表单`get_form_kwargs`，然后您必须修改您的表单模型，如下所示：

```
class MyModelForm(forms.ModelForm):

    def __init__(self, *args, **kwargs):
        self.user = self.kwargs.pop('user', None)
        super(MyModelForm, self).__init__(*args, **kwargs) 
```

这样，原始`__init__`函数得到了它所期望的参数。

但他建议的首选方法是：

```
class MyView(CreateView):

     def form_valid(self, form):
          obj = form.save(commit=False)
          obj.user = self.request.user
          obj.save()
          return super(MyView, self).form_valid(form) 
```

这真的很好用。当`form.save(commit=False)`方法执行时，它会在表单对象中填充`self.instance`与返回到我们变量的模型的相同实例`obj`。当您`obj`通过执行更新`obj.user = self.request.user`并保存它时，该`form`对象具有对这个完全相同的对象的引用，因此`form`这里的对象已经完成。当你把它传递给原来的`form_valid`方法时`CreateView`，它就拥有了所有的数据，并且会成功地插入到数据库中。

如果有人有不同的做法，我很想听听！

# java - 对使用逻辑运算符感到困惑

> ID：14391049
> 
> 赞同：1
> 
> 时间：2013-01-18T01:19:04.387
> 
> 标签：java

我有一个作业/项目来编写一个程序，该程序显示 1 到 100 之间的整数，这些整数可以被 6 或 7 整除，但不能同时被整除。它不像我在下面写的那样工作。我的布尔值对于问题的要求是否正确？

```
import acm program.*;

public class SixAndSeven extends ConsoleProgram {
    public void run() {
        for (int n = 1; n < 100; n++) {
            boolean year = (n % 6 ==0) ||
                (n % 7 ==0) &&
                !(n % 6 == 0) &&
                ( n % 7 ==0);

             if (year) {
                 println(year);
             }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T01:20:59.610

您应该执行以下操作

```
boolean year = ((n % 6 ==0) || (n % 7 ==0)) && !((n % 6 == 0) && ( n % 7 ==0)); 
```

基本上在否定之前将两组条件分组`()`，以便条件正确适用于两者。

为了使其更具可读性，您可以这样做..（尽管可能矫枉过正..）

```
boolean divisbleby6 = n%6 == 0;
boolean divisbleby7 = n%7 == 0;
boolean divisibleby6and7 = divisbleby6 && divisbleby7 ;

boolean year = (divisbleby6 || divisbleby7) && !divisibleby6and7 ; 
```

或者 Mel 建议的聪明方法（可能一目了然更难理解），它`true`仅在一个但不是两个条件都为真时返回。

```
boolean year = divisbleby6 != divisbleby7; 
```

PS 此外，正如 user1333371 建议的那样，您可能想要这样做`println(n);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T01:29:05.393

你可以简单地写如下：

```
boolean year = (n % 6 == 0) != (n % 7 == 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T01:25:21.220

使用括号设置运算顺序并确保否定适用于 6 和 7 的模检查。

```
import acm program.*;

public class SixAndSeven extends ConsoleProgram {
public void run(){

for (int n = 1; n < 100; n++) {

boolean year = ((n % 6 == 0) || (n % 7 == 0))
                    && !((n % 6 == 0) && (n % 7 == 0));

            if (year) {
                System.out.println(n);
            }

} 
```

# wordpress - 增加 woocommerce 产品的重量和体积

> ID：14391051
> 
> 赞同：0
> 
> 时间：2013-01-18T01:19:23.843
> 
> 标签：wordpress, e-commerce, woocommerce, fedex, woothemes

我正在尝试在我的 woocommerce 安装中配置 FedEx 插件。根据 woocommerce 文档：[http ://wcdocs.woothemes.com/user-guide/extensions/shipping-methods/fedex/](http://wcdocs.woothemes.com/user-guide/extensions/shipping-methods/fedex/)

> FedEx Shipping Extension 仅在您的产品具有定义的体积和重量时才有效。这就是它计算运费的方式。每当您将新产品添加到库存中时，请确保您已输入其重量以及您计划运送的最小盒子的尺寸。

问题是当我添加新产品或编辑现有产品时，我在任何地方都看不到这些选项。

这是文档显示的内容

![这是文档显示的内容](../Images/c1651ebf6b2542068ed8ccc80ed3c593.png)

这就是我所看到的

![这就是我所看到的](../Images/7d867809b39f16c76ed56ccd430a5acc.png)

运输选项卡也没有多大帮助——它只有一个运输类别下拉菜单。尝试创建一个测试运输类，但我看不到在哪里指定重量和/或体积。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:47:57.543

如果您启用它们，这些字段只会显示在编辑产品页面上。

转到 WooCommerce -> 设置，然后单击“目录”选项卡。然后在“产品数据”部分下，选中“为产品启用重量字段”和“为产品启用维度字段”旁边的框。

# ruby - 覆盖反引号

> ID：14391054
> 
> 赞同：4
> 
> 时间：2013-01-18T01:19:46.033
> 
> 标签：ruby, operator-overloading, backticks

所以我希望覆盖测试文件中的反引号，并将其应用于测试期间调用的所有脚本。测试文件使用了几个类（保存在其他文件中），当这些类使用反引号时，我在测试文件中的覆盖不适用。

例如以下是在测试文件中（`tc_some_test.rb`）

```
module BacktickURI
  def `(uri)
    # `untrick beautifier
    puts "uri = #{uri}\n"
    if uri =~ /some command/
      puts "command ran #{uri}\n"
    else
      system("#{uri} 2>&1")
    end
  end
end

include BacktickURI
```

对于 中使用的所有反引号`tc_some_test.rb`，这有效，但调用的外部类和脚本仍使用正常的、非覆盖的反引号。

任何帮助表示赞赏。另一种方法可能是从不同的脚本/文件覆盖一个脚本/文件中的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:27:46.680

输入 irb：

```
define_singleton_method '`' do |*| puts 'kokot' end

`ls`
#=> kokot 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T02:01:48.740

尝试这个：

```
module BacktickURI
  def included(klass)
    klass.class_eval do
      define_method("`") do |uri|
        puts "uri = #{uri}\n"
        if uri =~ /some command/
          puts "command ran #{uri}\n"
        else
          system("#{uri} 2>&1")
        end
      end
    end
  end
end 
```

# java - Struts2 Rest插件无法加载配置bean

> ID：14391055
> 
> 赞同：-1
> 
> 时间：2013-01-18T01:20:01.977
> 
> 标签：java, rest, plugins, struts2

我正在尝试使用 struts2 Rest 插件，将 jar 添加到我的 lib 文件夹后出现此错误。

```
Jan 18, 2013 9:16:44 AM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter struts2
Unable to load configuration. - bean - jar:file:/C:/Users/John/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/HitPlay/WEB-INF/lib/struts2-rest-plugin-2.3.7.jar!/struts-plugin.xml:36:138
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:483)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:74)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4650)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5306)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: Unable to load configuration. - bean - jar:file:/C:/Users/John/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/HitPlay/WEB-INF/lib/struts2-rest-plugin-2.3.7.jar!/struts-plugin.xml:36:138
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:71)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:429)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:471)
    ... 16 more
Caused by: Unable to load bean: type:org.apache.struts2.rest.handler.ContentTypeHandler class:org.apache.struts2.rest.handler.JsonLibHandler - bean - jar:file:/C:/Users/John/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/HitPlay/WEB-INF/lib/struts2-rest-plugin-2.3.7.jar!/struts-plugin.xml:36:138
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.register(XmlConfigurationProvider.java:245)
    at org.apache.struts2.config.StrutsXmlConfigurationProvider.register(StrutsXmlConfigurationProvider.java:102)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:215)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:68)
    ... 18 more
Caused by: java.lang.NoClassDefFoundError: net/sf/json/JSONArray
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getDeclaredConstructors(Unknown Source)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.register(XmlConfigurationProvider.java:235)
    ... 21 more
Caused by: java.lang.ClassNotFoundException: net.sf.json.JSONArray
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    ... 25 more 
```

我不知道为什么会这样。任何线索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T03:34:23.123

您缺少必需的库，至少是 JSON 库。这可能是因为您没有使用 Maven 或同等产品。

您不能只是将插件库放入您的应用程序并期望它工作，插件有自己的依赖关系。

# java - 如何使用 PowerMock 和 Mockito 和 TestNG 模拟私有方法

> ID：14391057
> 
> 赞同：2
> 
> 时间：2013-01-18T01:20:10.930
> 
> 标签：java, maven, testng, mockito, powermock

我正在尝试使用 powermock 来模拟私有方法，但我的 PowerMock 在`MockitoBusinessOperation MockitoBusinessOperation = PowerMock.createPartialMock(MockitoBusinessOperation.class, "inTestMethod");`. 我使用了 maven，mockito 和 powermock 的依赖项在我的 pom 文件中定义

```
<dependency>   
    <groupId>org.mockito</groupId>
    <artifactId>mockito-core</artifactId>
    <version>1.8.5</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.powermock</groupId>
    <artifactId>powermock-mockito-release-full</artifactId>
    <version>1.4.9</version>
    <scope>test</scope>
</dependency> 
```

我不知道该错误是否与使用 TestNG 的 powermock 有关，或者我在代码中犯了一些错误。

```
@PrepareForTest(MockitoBusinessOperation.class)
@Test(enabled = true)
public void testReCalculatePrepaids() throws Exception {
    MockitoBusinessOperation MockitoBusinessOperation = PowerMock.createPartialMock(MockitoBusinessOperation.class, "inTestMethod");
    PowerMock.expectPrivate(MockitoBusinessOperation, "inTestMethod",   Id).andReturn("working fine");

    when(MockitoBusinessService.creditReport(this.Id)).thenReturn(new String("Decline by only Me")); 

    String report = MockitoBusinessService.creditReport(this.Id);
    String mainReport = MockitoBusinessOperation.creditAproved(this.Id);  
} 
```

有人有想法或任何线索导致解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T01:37:16.983

根据[文档](https://code.google.com/p/powermock/wiki/Mockito_testng_maven)，您的 Maven 文件应具有以下定义：

```
<properties>
    <powermock.version>1.5</powermock.version>
</properties>
<dependencies>
   <dependency>
      <groupId>org.powermock</groupId>
      <artifactId>powermock-module-testng</artifactId>
      <version>${powermock.version}</version>
      <scope>test</scope>
   </dependency>
   <dependency>
      <groupId>org.powermock</groupId>
      <artifactId>powermock-api-mockito</artifactId>
      <version>${powermock.version}</version>
      <scope>test</scope>
   </dependency>  
</dependencies> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-27T09:58:34.797

请尝试这种方式

```
 @Test
        public  void  commandEndHandlerTest() throws  Exception
        {
            Method retryClientDetail_privateMethod =yourclass.class.getDeclaredMethod("Your_function_name",null);
            retryClientDetail_privateMethod.setAccessible(true);
            retryClientDetail_privateMethod.invoke(yourclass.class, null);
        } 
```

# java - 通过 selenium (java) 选择第一个单选按钮

> ID：14391058
> 
> 赞同：1
> 
> 时间：2013-01-18T01:20:25.270
> 
> 标签：java, selenium

我想通过 selenium (java) 选择网页上的第一个单选按钮 - 我只有单选按钮的值，我知道它是单选按钮列表中的第一个按钮。选择此单选按钮的最佳方法是什么 - 欢迎任何有用的建议。
我尝试了以下方法，但它不起作用（单选按钮的值为 1）：

```
selenium.check("value=1"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T01:28:00.967

我能够使用以下有效的方法：

```
 selenium.click("//input[@value='1']"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T06:29:28.377

尝试这样做：

```
List<WebElement> inputList=driver.findElements(By.tagName("input"));

for(int i=0;i<inputList.size();i++)
{

    if (inputList.get(i).getAttribute("type").equalsIgnoreCase("radio"))
    {
        if(inputList.get(i).getAttribute("value").equals("1"))
        {
            inputList.get(i).click();
            break;
        }
    }

} 
```

# javascript - 从未使用javascript打开弹出窗口的窗口关闭弹出窗口

> ID：14391064
> 
> 赞同：0
> 
> 时间：2013-01-18T01:21:11.847
> 
> 标签：javascript, javascript-events

如果我从一个页面打开一个弹出窗口，有没有办法可以从另一个页面关闭该弹出窗口？

Page1-> 创建并打开弹出窗口。

Page2->关闭弹出窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T01:26:17.810

由于您无法在导航时保留对弹出窗口的引用，因此您不能这样做。但是，如果您使用`pushState`更改父窗口的 url 并且不实际导航，则可以这样做。只需使用`close()`方法即可关闭该弹出窗口

其他选项是使用服务器端脚本向您的弹出窗口发送关闭信号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T01:27:23.993

我认为任何编码良好的浏览器都应该在沙盒环境中运行每个页面，因此一个页面甚至不应该知道其他页面存在或正在被浏览，更不用说它们对 DOM 或它们运行的​​ javascript 做了什么。

因此，任何允许从两个不同网页（或在浏览器中加载两次相同的页面）进行通信的解决方案都必须通过外部机制进行。如果同一个页面在同一个浏览器中加载了两次，他们应该共享他们的`localStorage`，所以你可以用它作为发送消息的一种方式。

如果没有，您始终可以依赖外部 Web 服务来执行此操作。打开弹出窗口的页面必须实现轮询服务来查看它是否应该关闭它，并且试图关闭弹出窗口的页面必须向服务器发出请求它的 AJAX 调用，并等待其他页面拉结果。

它不像一行javascript那么简单，但如果你**真的**想要这个功能，你可以实现它。

# c# - 如何用有效的 html 替换换行符，但不是在 html 元素中

> ID：14391066
> 
> 赞同：0
> 
> 时间：2013-01-18T01:21:36.073
> 
> 标签：c#, html-agility-pack

我有一些纯文本，其中包含这样的换行符：

```
Dear Person,\r\nHello and welcome to this example.\r\nTodo: <ul><li>item 1</li>\r\n<li>item 2</li>\r\nThanks. 
```

我想使用 HtmlAgility 包（如果需要）来清理 Html 并用 BR 替换新的换行符，除非它们已经在 HTML 标记中（请参阅 UL 标记中的 LI）

我可以使用 regx 轻松替换 BR，或者`text.Replace(Environment.NewLine, "<br/>")`如何排除它在标签中的情况？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:04:49.223

看来您只需要处理顶级 HTML 文本节点（文本节点没有子节点）：

```
var html = "Dear Person,\r\nHello and welcome to this example.\r\nTodo: <ul><li>item 1</li>\r\n<li>item 2</li>\r\nThanks.";
var doc = new HtmlDocument();
doc.LoadHtml(html);
var textNodes = doc.DocumentNode.ChildNodes
    .OfType<HtmlTextNode>()
    .ToList();

foreach (var node in textNodes)
    node.Text = node.Text.Replace(Environment.NewLine, "<br />"); 
```

这将产生如下内容：

```
Dear Person,<br />Hello and welcome to this example.<br />Todo: <ul><li>item 1</li>\r\n<li>item 2</li>\r\nThanks.</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T03:05:51.560

```
String sentence = "Dear Person,\r\nHello and welcome to this example.\r\nTodo: <ul><li>item 1\r\nitem 2</li>\r\n<li>item 3</li>\r\nThanks.";
String[] splits = Regex.Split(sentence, @"(<li>[^<]+</li>)");

for (Int32 i = 0; i < splits.Length; ++i)
{
    if (!splits[i].StartsWith("<li>"))
        splits[i] = splits[i].Replace("\r\n", "<br/>");
}

sentence = String.Join("", splits); 
```

此外，不要使用 Environment.NewLine，因为它可能会有所不同，而您的字符串换行符将始终为“\r\n”。

# gwt - 动态创建 GWT CellTable - 排序

> ID：14391075
> 
> 赞同：1
> 
> 时间：2013-01-18T01:22:06.760
> 
> 标签：gwt, celltable, gwt-celltable

动态创建 GWT CellTable -

参考前面的问题：[动态创建 GWT CellTable](https://stackoverflow.com/questions/7172262/create-gwt-celltable-dynamically/7174272#7174272)

对于这个动态单元格表​​，我想动态地基于列进行排序。

比较器怎么做？

我的第一个问题！提前致谢

# sencha-touch - 添加项目后轮播不起作用

> ID：14391079
> 
> 赞同：0
> 
> 时间：2013-01-18T01:22:33.623
> 
> 标签：sencha-touch, sencha-touch-2

我的应用程序主页有一个可滑动的轮播

```
`{
               xtype : 'carousel',
               id:'myCar',
               autoDestroy:false,
               styleHtmlContent:true,
               padding:'0 0 0 0',
               height:100

  }` 
```

我的视图上有一个绘制的侦听器函数，可以动态地将项目添加到我的轮播中。

```
`var store = Ext.getStore("inspirationStore");
            var car = Ext.getCmp('myCar');

            var items = car.getItems();
            //destroy all items within this container before populating
            if (items.length > 1){
                for (var j = 0; j < items.length; j++){
                        items[j].destroy();
                }
            }

                for (var i = 0; i < store.getCount(); i++){
                    var item = Ext.create('Ext.Panel',{
                                            html:'<p class = "inspirationMessage"><b>'+ store.getAt(i).data.message + '</b></p>' + '<p class = "authorName"><b>' + store.getAt(i).raw.Author__r.Name + '</b></p>',
                                            cls:'carouselPanel'
                                        });
                    car.add(item);
                }` 
```

轮播第一次工作正常，但是当我转到另一个页面然后回到我的主页时，我的轮播没有滑动。我可以看到添加了项目，但轮播没有按应有的方式工作。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:38:02.390

而不是在循环中添加项目试试这个：

```
 var items = [];
            for (var i = 0; i < store.getCount(); i++){
                var item = Ext.create('Ext.Panel',{
                               html:'<p class = "inspirationMessage"><b>'+ 
                                 store.getAt(i).data.message + '</b></p>' +
                                 '<p class = "authorName"><b>' + 
                                 store.getAt(i).raw.Author__r.Name + '</b></p>',
                               cls:'carouselPanel'
                           });
                items.push(item);
            }
            car.add(items); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T04:42:16.827

使用`setItems( Array/Object items )`which 设置项目的值。

[文档](http://docs.sencha.com/touch/2-1/#!/api/Ext.carousel.Carousel-method-setItems)

# multidimensional-array - Fortran90 创建了可分配数组但元素不正确

> ID：14391081
> 
> 赞同：0
> 
> 时间：2013-01-18T01:22:48.327
> 
> 标签：multidimensional-array, fortran90

尝试从 xyz 数据文件创建数组。数据文件的排列方式使每个原子的 x,y,z 位于新行上，我希望数组反映这一点。然后使用此数组查找列表中每个原子与所有其他原子的距离。

为此，已复制数组，以便 atom1 和 atom2 应与输入文件相同。

长度只是列表中的原子数。写语句： WRITE(20,'(3F12.9)') atom1 实际上给出了想要的矩阵，但是当我尝试找到单个元素时，它们都错了！

任何帮助将非常感激！多谢你们。

```
DOUBLE PRECISION, DIMENSION(:,:), ALLOCATABLE ::atom1,atom2'
ALLOCATE(atom1(length,3),atom2(length,3))       
READ(10,*)  ((atom1(i,j), i=1,length), j=1,3)       
atom2=atom1                 
distn=0
distc=0                         

DO n=1,length
        x1=atom1(n,1)
        y1=atom1(n,2)               !1st atom
        z1=atom1(n,3)
        DO m=1,length
          x2=atom2(m,1)
          y2=atom2(m,2)         !2nd atom
          z2=atom2(m,3)` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T04:02:43.017

您的 READ 语句从许多记录中读取所有原子的所有 x 坐标，然后是所有 y 坐标，然后是所有 z 坐标。这与您对输入文件的描述不一致。您在 READ 语句中以错误的方式嵌套了 io-implied-do's - 它应该是`((atom1(i,j),j=1,3),i=1,length)`.

同样，根据评论，您的诊断写入误导您 - 您输出所有 x 坐标，然后输出所有 y 坐标等。整个数组引用的数组元素顺序最快地改变第一个（最左边）维度（俗称列主命令）。

（存在与列表定向格式相关的各种陷阱，这意味着我不建议将其用于生产代码（或者可能用于专门编写的输入，了解并防御这些陷阱）。其中一个陷阱是列表下的 READ 定向格式化将拉入满足输入列表所需的尽可能多的记录。如果您使用指定每条记录的字段数的显式格式，您可能会更早发现问题。）

# memory - 我如何估计我的内存设备访问速度？

> ID：14391087
> 
> 赞同：1
> 
> 时间：2013-01-18T01:24:17.210
> 
> 标签：memory, hardware

我的内存是DDR2 800MHz

```
dmidecode -t memory

Handle 0x1100, DMI type 17, 27 bytes
Memory Device
    Array Handle: 0x1000
    Error Information Handle: Not Provided
    Total Width: 64 bits
    Data Width: 64 bits
    Size: 1024 MB
    Form Factor: DIMM
    Set: None
    Locator: DIMM_1
    Bank Locator: Not Specified
    Type: DDR2
    Type Detail: Synchronous
    Speed: 800 MHz (1.2 ns)
    Manufacturer: 7F98000000000000
    Serial Number: 2DCCDD00
    Asset Tag: 050916
    Part Number: 
```

我想通过这个信息来估计写入或读取速度。

800MHz 是指每秒读/写 800 位吗？

我们应该多个 64 位数据宽度吗？例如：800*64 位/秒。所以我们可以读/写 800*64/8 字节/秒？

提前谢谢！

# jquery - 如何更改 HTML 表格 td 宽度？

> ID：14391092
> 
> 赞同：0
> 
> 时间：2013-01-18T01:24:53.893
> 
> 标签：jquery, html

这是我当前的代码，

```
$(document).ready(function () {
    $(".stripeMe tr").mouseover(function () {
        $(this).addClass("over");
    }).mouseout(function () {
        $(this).removeClass("over");
    });
    $(".stripeMe tr:even").addClass("alt");
});

<table class="stripeMe" width="100%">
    <tr>
        <td style="width:85%">Product Name</td>
        <td style="width:5%; text-align:right">Price (each)</td>
        <td style="width:5%; text-align:center">Quantity</td>
        <td style="width:5%"></td>
    </tr>

    <% foreach (var cart in Model.Carts) { %>
        <tr id="row-<%: cart.RecordID %>">
            <td>
                <%: Html.ActionLink(Model.pr.GetProduct(cart.ProductID).ProductName.Length > 52 ? (string)Model.pr.GetProduct(cart.ProductID).ProductName.Substring(0, 52) + "..." :  (string)Model.pr.GetProduct(cart.ProductID).ProductName, "Elaborate", "Product", new { ProductID = cart.ProductID, RecordID = cart.RecordID }, null)%>
            </td>
            <td style="text-align:right">
                <%: (string)String.Format("{0:F}",Model.pr.GetProduct(cart.ProductID).UnitPrice) %>
            </td>
            <td>
                <input type="text" disabled="disabled" style="text-align:center; border-width:0; background-color:transparent" id="column-Quantity-<%: cart.RecordID %>" value="<%: cart.Quantity %>"></input>
            </td>
            <td>
                <%: Ajax.ActionLink("Remove from Cart", "RemoveFromCart", new { RecordID = cart.RecordID }, new AjaxOptions {OnSuccess = "handleUpdate" })%>
            </td>
        </tr>
    <% } %>

    <tr>
        <td><hr />Total</td>
        <td align="right">
            <hr />
            <span id="cart-total"><%: (string)String.Format("{0:F}",Model.CartTotal) %></span>
         </td>
         <td align="center">
             <hr />
             <span id="cart-quantity"><%: Model.CartQuantity %></span>
         </td>
         <td><hr />&nbsp;</td>
     </tr>
 </table> 
```

不管我怎么改，都不行。我正在使用最新版本的 Firefox。

```
<td style="width:85%">Product Name</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T01:52:53.660

尝试`table-layout:fixed`为表格添加样式，例如，

`<table class="stripeMe" width="100%" style="table-layout:fixed">`

使变化更加明显。

但是，使用此设置会将内容溢出到相邻的`td`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T02:41:09.353

这是一个工作小提琴：http: [//jsfiddle.net/DEU7d/1/](http://jsfiddle.net/DEU7d/1/)

.alt 类在页面加载时被添加到“偶数”行。（我为 .alt 添加了颜色）

.over 类在 mouse over 和 out 之间切换。

CSS

```
.over { background:#88aa4d; }
.alt { color: #ff881a; } 
```

JS

```
$(document).ready(function () {

$(".stripeMe tr").mouseover(function () {
    $(this).addClass("over");
}).mouseout(function () {
    $(this).removeClass("over");
});

$(".stripeMe tr:even").addClass("alt");
}); 
```

HTML

```
<table class="stripeMe" width="100%">
    <tr>
        <td style="width:85%">Product Name</td>
        <td style="width:5%; text-align:right">Price (each)</td>
        <td style="width:5%; text-align:center">Quantity</td>
        <td style="width:5%"></td>
    </tr>
        <tr id="row-1">
            <td>
                linktext1
            </td>
            <td style="text-align:right">
               price
            </td>
            <td>
                <input type="text" disabled="disabled" style="text-align:center; border-width:0; background-color:transparent" id="column-Quantity-1" value="12"></input>
            </td>
            <td>
                iink text2
            </td>
        </tr>
      <tr class="even" id="row-2">
            <td>
                linktext1
            </td>
            <td style="text-align:right">
               price
            </td>
            <td>
                <input type="text" disabled="disabled" style="text-align:center; border-width:0; background-color:transparent" id="column-Quantity-2" value="21"></input>
            </td>
            <td>
                iink text2
            </td>
        </tr>

    <tr>
        <td><hr />Total</td>
        <td align="right">
            <hr />
            <span id="cart-total">total</span>
         </td>
         <td align="center">
             <hr />
             <span id="cart-quantity">quantity</span>
         </td>
         <td><hr />&nbsp;</td>
     </tr>
 </table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T15:17:25.887

首先，我想对所有努力帮助我的人说声“谢谢”，特别感谢“rae1n”、“Deminoth Bono”、“tristan”和“OMG”！你们所有的努力帮助我找出问题并解决它。

首先我使用 Firefox 的“错误控制台”，我发现一个 javascript 问题在那里很长时间，然后我修复它，但不幸的是我们的“宽度”问题仍然存在。

第二个来自“rae1n”和“OMG”的帖子，我开始认为这可能不是一个“宽度”的问题，所以我开始环顾四周，经过一天的思考......，最后我发现问题出在输入类型=“文本”标签。你知道，如果你没有在输入 type="text" 中给出宽度，它会渲染一个固定宽度看起来像 200px 的文本框，这会导致问题。所以无论我如何改变“td”百分比，它仍然保持相同的外观。所以我将 style="width:100%" 添加到输入 type="text"... 中，然后更改“td”宽度，“td”宽度显示正确更改。问题得到解决。下面的代码是我如何纠正它。

```
<input type="text" disabled="disabled" style="width:100%; text-align:center; border-width:0; background-color:transparent" id="column-Quantity-<%: cart.RecordID %>" value="<%: cart.Quantity %>"/> 
```

# git - 从某个提交开始维护一个 git 分支。

> ID：14391095
> 
> 赞同：2
> 
> 时间：2013-01-18T01:25:51.667
> 
> 标签：git

我认为这个问题的答案分散在文档和其他问题的某个地方，但我找不到与我的情况完全相关的东西，所以我发布了这个。请随时向我指出其他地方的任何相关答案。

我有三个分支：`wip`, `deploy-dev`, `client`.

*   `wip`是我们团队内部的工作分支。它包括第 3 方密钥/秘密和一些本地环境配置。

*   `deploy-dev`也是内部的，但它有不同的配置来测试部署的版本。

*   `client`是被推送到客户端远程的分支。它删除了我们用于测试的第 3 方密钥/秘密。

### 问题

我的`wip`分支有很多提交。对于客户端的第一个版本，我想将它们压缩成一个提交。所以我这样做了：

*   `git checkout -b client`
*   `git reset --soft <first commit>`
*   `git add .`
*   `git commit -m "v1.0 release to client"`

在`client`分支中第一次提交之后，我想`wip`再次签出并继续在 v1.1 上工作。然后我应该能够分别结帐`deploy-dev`并`client`合并`wip`到它们中。

但是，当我结帐时`client`，`git merge wip`我会将整个提交历史记录返回到`client`.

我错过了一些简单的东西，但如果不描述整个情况，我不知道如何描述它。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T01:59:18.840

听起来你需要学习`git rebase`. 例如，参见[什么时候需要 git-rebase？](https://stackoverflow.com/questions/922933/when-would-one-need-git-rebase)和[git rebase vs git merge](https://stackoverflow.com/questions/804115/git-rebase-vs-git-merge)开始。

在你 squash 之后`client`，你应该有这样的东西。

```
 A--B--C--D[wip]
 /
X--E--F--G[deploy-dev]
 \ 
  Z[client] 
```

跑

```
git checkout wip
git rebase client 
```

而且，大概，

```
git checkout deploy-dev
git rebase client 
```

现在您的 DAG 将如下所示：

```
 A--B--C--D
 /
X--E--F--G
 \ 
  Z[client]--E'--F'--G'[deploy-dev]
   \
    A'--B'--C'--D'[wip] 
```

当然，您需要解决任何冲突，就像您已经完成了`merge`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:01:09.207

这将是一个巨大的痛苦。你**不能再**合并任何东西`client`；就 git 而言，历史完全不同。您实际上有两个不相关的项目，它们碰巧存在于同一个存储库中并生成相同的文件。

您必须兼顾重置，或以创造性的方式使用变基。重置（我认为！）：

```
git checkout wip
git reset --soft client
git add .
git commit... 
```

`git reset --soft`将更改 git*认为*您所在的分支，而不会更改您的任何文件。因此，您将拥有文件`wip`并且 git 会认为您在`client`分支上，然后您可以再次批量提交。

你也可以使用变基：

```
git rebase --onto client X wip 
```

`X`最后一次提交`wip`已经被压缩到`client`. 这将获取所有新提交并重新创建它们，一次一个，在`client`. 您还可以使用`-i`获取交互模式，这将使您可以将它们压缩在一起或随时重写提交消息。

你必须为每个版本都这样做，如果你犯了错误，你会得到一些更古怪的结果。理想情况下，您应该：

1.  从一开始就写下你的提交历史，这样它就可以随时公开——把秘密放在外面等等。不过现在有点晚了。或者：

2.  使用其他机制将代码交付给您的客户，例如[标记](http://www.kernel.org/pub/software/scm/git/docs/git-tag.html)提交，然后通过电子邮件向他们发送 tarball。如果他们想跟踪差异，你可以用 生成一个`git diff v1.0..v1.1`，或者他们可以自己做。

# javascript - 不同按钮的事件处理程序是否排队？

> ID：14391097
> 
> 赞同：1
> 
> 时间：2013-01-18T01:25:55.867
> 
> 标签：javascript, jquery

我有一个关于处理由点击不同按钮触发的事件的问题：

假设我们有几个按钮指向同一个事件处理程序（通过 JQuery 的“one”函数附加）

如果事件处理程序的第一步是通过调用 JQuery 的 off 来禁用所有其他按钮的事件处理程序 - 是否仍然可以快速单击其他按钮排队并在第一个按钮的事件处理程序时执行执行完毕了吗？即使第一个按钮单击删除了所有按钮的处理程序？我认为浏览器可能会保留一个与 JavaScript 线程分开管理的内部事件队列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T01:34:12.887

事件处理程序的触发是同步的。动画、ajax 和其他东西（例如`setTimeout`）是异步的，但事件的触发并非如此。因此，您不必担心在`.off`到达之前触发事件的快速点击，除非调用`.off`发生在异步完成之后。

# android - 如何刷新对话框数据？Android showDialog() - 复选框 bool [] 首次打开后不更新

> ID：14391098
> 
> 赞同：0
> 
> 时间：2013-01-18T01:26:00.953
> 
> 标签：android, android-intent, android-alertdialog

我有一个对话框，它有一个字符串数组（名称）和布尔值（选中与否）

在对话框选择之外我更新布尔值，第一次单击它们会更新，之后它们不再同步

OnCreateDialog 只被调用一次。我尝试通过调用 (d.dissmiss()) 来关闭对话框，但我无法让它同步。

有人可以提供帮助吗？

```
 protected String[] _Geooptions;
protected boolean[] _Geoselections;

Dialog d;

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case 0:
        d = new AlertDialog.Builder(this)
        .setTitle("Set Geo Filters")
        .setMultiChoiceItems(mapGeoManager._Geooptions,
                mapGeoManager._Geoselections,
                new GeoDialogSelectionClickHandler())
        .setPositiveButton("OK", new GeoDialogButtonClickHandler())
        .create();
        return d;}

public class GeoDialogSelectionClickHandler implements
        DialogInterface.OnMultiChoiceClickListener {
    public void onClick(DialogInterface dialog, int clicked,
            boolean selected) {
        Log.i("ME", mapGeoManager._Geooptions[clicked] + " selected: "
                + selected);
        mapGeoManager.FilterUpdate();

    }
}

public class GeoDialogButtonClickHandler implements
        DialogInterface.OnClickListener {
    public void onClick(DialogInterface dialog, int clicked) {
        switch (clicked) {
        case DialogInterface.BUTTON_POSITIVE:
            Log.d(TAG, "ON CLICK BUTTON POSITIVE!");
            mapGeoManager.FilterUpdate();

            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:52:21.140

> 如何刷新对话框数据？

您正在更新数组的数据，但您没有将其告知for方法`ListView`使用的内部。当您更新布尔数组时，获取对's的引用，获取其适配器并调用它：`AlertDialog``setMultiChoiceItems()``AlertDialog``ListView``notifyDataSetChanged`

```
// after updating the array
((BaseAdapter) ((AlertDialog) d).getListView().getAdapter()).notifyDataSetChanged(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:05:14.500

这个答案源于 Luksprog 对获得对话框列表视图的评论

我将 Dialog d 变量更改为 AlertDialog 并在我的 clearALL 或 SelectAll 按钮调用中手动遍历列表并更新选项 - 这不是最有效的方法，但它似乎是唯一可行的方法（他的 notifyonchange 没有为我做任何事——我很困惑为什么它不会……）

```
ListView curList = d.getListView();
for(int i = 0; i < mapGeoManager._Geoselections.length; ++i)
    curList.setItemChecked(i, mapGeoManager._Geoselections[i]); 
```

# python - 在脚本运行时执行函数

> ID：14391099
> 
> 赞同：0
> 
> 时间：2013-01-18T01:26:00.823
> 
> 标签：python, function, execute

好吧，这是一个简单的问题，因为我真的不知道它叫什么..

假设我在 python 中有一个循环

```
if pattern in buffer:
        while logme == "y":
            logging.basicConfig(filename='hook.log',level=logging.DEBUG)
            logging.debug("Pre-Encrypted: %s" % buffer)
            print "Pre-Encrypted: %s" % buffer
        else:
            print "Pre-Encrypted: %s" % buffer 
```

当我在循环运行时按 P 之类的键盘键并让它执行诸如暂停循环、退出或执行任何操作之类的命令时，我该如何做到这一点？不像命令行参数，而是在实际程序运行时..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T01:29:17.457

使用[Getch](http://code.activestate.com/recipes/134892/)

请参阅[Python 从用户读取单个字符](https://stackoverflow.com/questions/510357/python-read-a-single-character-from-the-user)

或者使用[诅咒](http://docs.python.org/2/library/curses.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T01:31:34.877

你可以使用[curses](http://docs.python.org/2/library/curses.html)，这会有点复杂。

一个快速的破解方法是`KeyboardInterrupt`在 Python 中拦截 SIGINT (Ctrl-C, )。

```
def foo():
  try:
     long_running_process()
  catch KeyboardInterrupt:
     deal_with_interrupt() 
```

除了违反对 Ctrl-C 行为的期望之外，这也没有提供一种明显的方式来重新启动事物。

# opencl - 基本 OpenCL 互斥锁实现（当前挂起）

> ID：14391101
> 
> 赞同：2
> 
> 时间：2013-01-18T01:26:11.967
> 
> 标签：opencl, mutex

我正在尝试为 OpenCL 编写互斥锁。这个想法是让每个单独的工作项都能够以原子方式进行。目前，我认为问题可能是当扭曲中的一个线程获得锁时线程扭曲无法继续进行。

下面是我当前的简单内核，用于对数字求和。“数字”是一个浮点数组作为输入。“sum”是结果的单元素数组，“semaphore”是保存信号量的单元素数组。我在很大程度上基于[此处](http://www.cmsoft.com.br/index.php?option=com_content&view=category&layout=blog&id=113&Itemid=168)的示例。

```
void acquire(__global int* semaphore) {
    int occupied;
    do {
        occupied = atom_xchg(semaphore, 1);
    } while (occupied>0);
}
void release(__global int* semaphore) {
    atom_xchg(semaphore, 0); //the previous value, which is returned, is ignored
}
__kernel void test_kernel(__global float* numbers, __global float* sum, __global int* semaphore) {
    int i = get_global_id(0);
    acquire(semaphore);
    *sum += numbers[i];
    release(semaphore);
} 
```

我有效地调用内核，例如：

```
int numof_dimensions = 1;
size_t offset_global[1] = {0};
size_t size_global[1] = {4000}; //the length of the numbers array
size_t* size_local = NULL;
clEnqueueNDRangeKernel(command_queue, kernel, numof_dimensions,offset_global,size_global,size_local, 0,NULL, NULL); 
```

如上，运行时显卡挂起，驱动自行重启。我怎样才能修复它，使它不会？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T13:03:31.810

由于 GPU 执行模型，您尝试做的事情是不可能的，其中“处理器”上的所有线程共享指令指针，即使在分支中也是如此。这是一篇详细解释该问题的帖子：http: [//vansa.ic.cz/author/admin/](http://vansa.ic.cz/author/admin/)。

顺便说一句，您找到的示例代码具有完全相同的问题，并且永远不会工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T03:24:45.000

回想起来，这个问题的答案似乎很明显，但除非你想到它，否则它不是。

基本上，GPU 对理想局部组大小（线程扭曲的大小）的预测大于 1，因此线程扭曲锁定。要修复它，您只需将其指定为 1（即“size_t size_local[1] = {1};”）。这样做会产生正确的结果。

# asp.net-mvc - MVC 中的漂亮分页路由

> ID：14391106
> 
> 赞同：0
> 
> 时间：2013-01-18T01:27:10.670
> 
> 标签：asp.net-mvc, pagination, asp.net-mvc-routing

我已经[在 ASP.Net MVC 中看到了分页和路由，](https://stackoverflow.com/questions/1582821/paging-and-routing-in-asp-net-mvc)但我无法让它为我工作。

在我的主页上，我想为我的分页生成以下漂亮的 url：

```
http://mysite
http://mysite/2
http://mysite/3 
```

如果没有路由，寻呼机生成的默认 url 将是：

```
http://mysite/?page=1
http://mysite/?page=2
http://mysite/?page=3 
```

到目前为止，我的 RouteCollection 是：

```
public static void RegisterRoutes(RouteCollection routes)
{
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
routes.MapRoute(
    "HomePaging",
    "{page}",
    new { controller = "Home", action = "Index" },
    new { page = @"\d+" },
    new[] { "MySite.Controllers" });

routes.MapRoute(
    "HomePagingFirst",
    "{controller}",
    new { controller = "Home", action = "Index", page = 1 },
    new[] { "MySite.Controllers" });

routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}",
    new { controller = "Home", action = "Index", id = UrlParameter.Optional },
    new[] { "MySite.Controllers" });

} 
```

这将生成以下路线：

```
http://mysite/1
http://mysite/2
http://mysite/3 
```

这不仅会为第一页生成非规范路由，还会导致生成的所有链接（如下所示`@Html.ActionLink("my site", "Index", "Home")`）附加当前页面的页码。

知道怎么做吗？如果可以的话，一个简短的解释以及一个答案将是最受欢迎的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T23:26:02.020

我最终让它像这样工作。但老实说，这是通过反复试验。如果有人能解释它为什么会起作用，我相信这对访问者会很有帮助。

```
routes.MapRouteLowercase(
    "HomePaging",
    "{controller}",
    new { controller = "Home", action = "Index", page = UrlParameter.Optional },
    new { page = @"\d+" },
    new[] { "MySite.Controllers" });

routes.MapRouteLowercase(
    "HomeFirstPage", // Route name
    "{page}", // URL with parameters
    new { controller = "Home", action = "Index", page = 1 },
    new { page = @"\d+" },
    new[] { "MySite.Controllers" }); 
```

# c# - 两个字符串数组的完全外连接

> ID：14391109
> 
> 赞同：3
> 
> 时间：2013-01-18T01:27:25.570
> 
> 标签：c#, vb.net, linq, .net-4.0, outer-join

给定以下两个字符串：

```
Dim str1() As String = {"123", "456", "789", "0"}
Dim str2() As String = {"123", "456", "1"} 
```

**如何执行 str1 和 str2 的完全外连接**并最终获得如下结构：

```
{Nothing, "1"}
{"0", Nothing}
{"123", "123"}
{"456", "456"}
{"789", Nothing} 
```

基于 SO 和其他网站上的几次讨论，我尝试使用 LINQ：

```
Dim v = From a In str1 Join b In str2 On a Equals b Group By a Into g = Group
        From o In g.DefaultIfEmpty() 
```

但是它并没有产生想要的结果，这和这个（常规的INNER JOIN）完全一样：

```
Dim v = From a In str1 Join b In str2 On a Equals b 
```

我一直在看的最后一个例子是[here](http://www.hookedonlinq.com/OuterJoinSample.ashx)（C#）。

这是[另一篇文章](http://blogs.msdn.com/b/vbteam/archive/2008/02/12/converting-sql-to-linq-part-9-full-outer-join-bill-horst.aspx)，但它似乎过于复杂，无法成为最短的解决方案（我见过更简单的 C# 示例，希望 VB 也能一样高效）。

*为什么这个问题有用*

例如，可以有一个文件结构，其中文件路径是一个键。通过对键进行完全外连接，您可以比较文件夹，查找哪一侧缺少哪些文件并向用户显示差异。任何类型的同步任务都可以使用这种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T01:35:47.187

我想这不是您想要的解决方案，但它似乎完成了任务：

```
string[] a1 = { "123", "456", "1" };
string[] a2 = { "123", "456", "789", "0" };

var intersection = a1.Intersect(a2); //get the intersection
var exceptions1 = a1.Except(a2);     //get items from a1, that are not in a2
var exceptions2 = a2.Except(a1);     //get items from a2, that are not in a1

var result = new List<Tuple<string, string>>(); //the result set
result.AddRange(intersection.Select(s => new Tuple<string, string>(s, s)));
result.AddRange(exceptions1.Select(s => new Tuple<string, string>(s, null)));
result.AddRange(exceptions2.Select(s => new Tuple<string, string>(null, s)));

foreach (var t in result)
{
    Console.WriteLine((t.Item1 ?? "null") + "\t" + (t.Item2 ?? "null"));
} 
```

输出是：

```
123     123
456     456
1       null
null    789
null    0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T01:38:33.380

您可以使用[HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx)，特别是 `IntersectWith`and`SymmetricExceptWith`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T03:10:55.130

好吧，这个答案与康斯坦丁的答案在功能上并没有什么不同，但它在空间上更小。

我所做的是将两个数组的外部连接执行为元组并将两个 IEnumerables 合并。

```
var str1 = new string[] { "123", "456", "789", "0" };
var str2 = new string[] { "123", "456", "1" };

var unionedsets = (from a in str1 join b in str2 on a equals b into grp from g in grp.DefaultIfEmpty()
            select new Tuple<string, string>(a, g)).Union(
            from b in str2 join a in str1 on b equals a into grp from g in grp.DefaultIfEmpty()
                select new Tuple<string,string>(g,b)); 
```

它看起来如此紧凑的唯一原因是因为我将 LINQ 语句组合在一起（这是一个技术术语，对吗？）。Unsmooshed，代码如下所示：

```
var jstr1 = from a in str1
            join b in str2 on a equals b
            into grp
            from g in grp.DefaultIfEmpty()
            select new
            Tuple<string, string>(a, g);
var jstr2 = from b in str2
            join a in str1 on b equals a
            into grp
            from g in grp.DefaultIfEmpty()
            select new
            Tuple<string,string>(g,b);

var unionedjoin = jstr1.Union(jstr2); 
```

这更接近你想要的吗？

# actionscript-3 - 如何重置可变Flash游戏CS6 AS3

> ID：14391111
> 
> 赞同：0
> 
> 时间：2013-01-18T01:27:41.297
> 
> 标签：actionscript-3, flash, flash-cs6

我正在编写一个 Flash 游戏，其中球击中一个影片剪辑对象，这会将用户带到一个新场景。

这很好用，但是当我回到游戏场景时，球的移动速度是原来的两倍。

返回游戏时如何/在哪里重置变量。请参阅下文了解我目前如何设置变量

```
var XSpeed:Number = 9;
var YSpeed:Number = 9; 
```

任何帮助将不胜感激。谢谢。

编辑* ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ****

好的，所以我认为我对这个问题的表述非常糟糕，这是我的相关代码：

```
var XSpeed:Number = 9; //X Speed of the Ball
var YSpeed:Number = 9; //Y Speed of the Ball

function beginCode():void{

mcPaddle.addEventListener(Event.ENTER_FRAME, movePaddle);

mcBall.addEventListener(Event.ENTER_FRAME, moveBall);

mcBall.addEventListener(Event.ENTER_FRAME, changeFrame);
} 
```

然后在最后调用 beginCode()。如前所述，我认为问题在于事件侦听器已经存在，并且每次用户返回页面时都会再次调用。我试图添加一个 if 语句来检查（见下面的评论）但这没有奏效......

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T01:32:52.270

这听起来像[这个问题](https://stackoverflow.com/questions/14224044/as3-enemies-double-speed)。那里的问题是，当游戏重新启动时，再次添加了一个事件侦听器，使游戏循环的触发频率增加了一倍（并且一切都以两倍的速度发生）。

您要么需要在游戏结束时移除监听器，要么添加检查以确保它只添加一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T01:31:01.053

嗯，这完全取决于你的游戏是如何编写的以及你期望它如何工作。

对于您的特定问题，就像这样做一样简单`when the ball hits a movie clip`：

```
XSpeed = 9;
YSpeed = 9; 
```

# objective-c - osx 向 NSAlert 添加输入

> ID：14391114
> 
> 赞同：2
> 
> 时间：2013-01-18T01:27:49.963
> 
> 标签：objective-c, macos, cocoa, nsalert

我想在我的 OSX 应用程序中使用 NSAlert 来处理用户身份验证。

这个问题[弹出样式对话框](https://stackoverflow.com/questions/7905197/pop-up-style-dialog)的答案涵盖了基础知识，但我不知道如何扩展附件视图以包含两个输入和每个输入的标签。

这会产生一个单一的文本输入：

```
NSAlert *myAlertView = [[NSAlert alloc]init];

NSTextField *input = [[NSTextField alloc] initWithFrame:NSMakeRect(0, 0, 200, 24)];
[input setStringValue:@""];
[myAlert setAccessoryView:input]; 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T01:43:40.927

在您开始需要添加输入时，您创建的不再是警报对话框。使用必要的控件在 Interface Builder 中创建一个 NSPanel 并改用它。

# authentication - 如何验证网站中的会话

> ID：14391119
> 
> 赞同：2
> 
> 时间：2013-01-18T01:06:03.877
> 
> 标签：authentication, php

当用户登录网站时，验证会话的最佳方法是什么？例如，在 $_SESSION 中设置一个已检查的变量，如果设置为用户登录，是否有效？我正在阅读[本教程](http://net.tutsplus.com/tutorials/php/user-membership-with-php/)，他们有`if(!empty($_SESSION['LoggedIn']) && !empty($_SESSION['Username']))` ，如果返回 true，则向用户显示页面内容。这是这样做的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T01:30:37.350

是的，这是一般的想法。

设置`$_SESSION['LoggedIn']`到`TRUE`其他地方（在登录页面上）后，您将检查`$_SESSION['LoggedIn']`是否是`TRUE`这样，显示内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T01:35:44.490

我同意[@relentless](https://stackoverflow.com/a/14391136/1502902)。但是，如果您将信息存储在数据库中，我更喜欢。

假设您有一个名为 user 的表，其中包含一个 tinyint 列 logged_in。每当用户成功登录时，将列值更新为 1。注销后将其更改为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T11:05:28.933

[是的，我建议您在http://php.net/manual/en/reserved.variables.php](http://php.net/manual/en/reserved.variables.php)中查看一下 PHP 和一些预定义变量，例如 $_POST 和 $_SESSION 。以及诸如 isset() 和 empty() 之类的函数，也许还有一些 html 表单。

# java - Grails Web App - 显示当前登录的用户

> ID：14391120
> 
> 赞同：0
> 
> 时间：2013-01-18T01:28:49.267
> 
> 标签：java, apache, grails, shiro

我创建了一个 grails 应用程序并使用 Apache Shire 插件[http://shiro.apache.org/](http://shiro.apache.org/)来实现安全性和登录目的。

我想知道是否有人知道如何获取当前登录到 Web 应用程序的用户列表？

这些信息将在 cookie 或会话中存储在哪里/在服务器端？

基本上我想要一个小部件显示当前登录到我的 Web 应用程序的所有当前用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:53:16.117

您可能必须在您的应用程序中使用当前登录的用户创建一个表（或者共享哈希图）

当您的用户登录时，您将名称写入表/哈希图。棘手的部分是弄清楚用户何时注销。如果用户通过单击“注销”注销 - 没问题。如果用户会话过期，您必须监听 Shiro 触发的事件。

根据 Shiro 网站，您可以参加几个活动。

# mysql - 构建mysql聊天查询显示顺序

> ID：14391121
> 
> 赞同：0
> 
> 时间：2013-01-18T01:28:53.650
> 
> 标签：mysql

我有一个正在开发的小型聊天应用程序，但在订购和限制从数据库中显示的结果时遇到了麻烦。我想将结果限制为 20，并在 HTML 容器 DIV 的底部显示最新结果，我需要获取聊天表的最高 ID - 20，然后显示这些结果。这是我当前的查询

```
SELECT chat_box.*,

(SELECT MAX(chat_id) AS last FROM chat_box) AS last
FROM chat_box 
ORDER BY chat_id ASC
LIMIT last,20 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T01:43:36.607

试试这个

```
 SELECT chat_box.*, MAX(chat_id) AS last FROM chat_box 

ORDER BY chat_id ASC
LIMIT 20 
```

或者如果你想在你的查询中看到正确的你应该这样做

```
 SELECT chat_box.*,

 (SELECT MAX(chat_id) AS last FROM chat_box LIMIT last,20) AS last2
    FROM chat_box 
 ORDER BY chat_id ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T01:45:18.227

`MAX`如果您只想显示表格的最后 20 个条目，则不需要 a 。

```
SELECT `you`, `should`, `use`, `a`, `column`, `list`
FROM chat_box
ORDER BY chat_id DESC
LIMIT 20 
```

**更新**

```
SELECT `you`, `should`, `use`, `a`, `column`, `list`
FROM chat_box
WHERE chat_id > (SELECT MAX(chat_id) - 20 FROM chat_box) 
```

# java - Spring Framework / Spring Security 中基于表单和基于证书的身份验证

> ID：14391125
> 
> 赞同：4
> 
> 时间：2013-01-18T01:29:12.577
> 
> 标签：java, spring, spring-security, x509, digital-certificate

在 Spring 框架中，登录页面是否可以同时有 2 个登录实现？表单登录和基于证书的登录 (x509)。我尝试过其中任何一种方法，但同时将它们结合起来，我很难做到。知道如何启用这两种方法吗？关于这个我可以参考的任何书籍或网站参考资料？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-14T12:40:28.897

是的，可以通过使 SSL 客户端身份验证可选。

[Baeldung](http://www.baeldung.com/x-509-authentication-in-spring-security#Mutual)上的这里是一个很好的教程，关于使用 X.509 证书启用 SSL 客户端身份验证，强制客户端身份验证（不适合您的情况，使用登录表单后备）

按照该教程并注意*application.properties*文件以使 client-auth **want**而不是**need**。这将使客户端-服务器 SSL 握手尝试请求证书。

```
server.ssl.client-auth=want 
```

*   如果浏览器没有提供证书（没有任何配置或用户在提示从列表中选择证书时单击取消），SSL 握手将在没有客户端证书的情况下完成，用户必须使用用户名+密码
*   如果用户选择证书，则 SSL 握手使用客户端证书完成。然后服务器验证信任库中的给定证书。如果证书有效，则 SSL 握手成功建立。否则，服务器会拒绝连接。

请注意

*   仅使用 x.509 证书进行身份验证。对于授权，您必须为[X509Configurer](http://docs.spring.io/spring-security/site/docs/current/apidocs/org/springframework/security/config/annotation/web/configurers/X509Configurer.html)提供一个[UserDetailsS](http://docs.spring.io/spring-security/site/docs/current/apidocs/org/springframework/security/core/userdetails/UserDetailsService.html) ​​ervice实现，以检索刚刚通过 x.509 进行身份验证的用户的[UserDetails](http://docs.spring.io/spring-security/site/docs/current/apidocs/org/springframework/security/core/userdetails/UserDetails.html)
*   因此，如果您有一个具有分配角色的用户数据库，即使证书在信任库中，用户也可能不在用户数据库中，因此您必须在应用程序逻辑中处理这种可能性。即当 SSL 连接是相互的，但用户不存在于用户数据库中时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:21:34.033

对的，这是可能的。您只需在 http 配置中声明 x509 支持：

```
<http ...>
    ...
    <x509 ... />
    ....
</http> 
```

并在 Tomcat 中配置 SSL。

请参阅[此条目](https://docs.spring.io/spring-security/site/docs/current/reference/html/x509.html)和[此线程](http://forum.springsource.org/showthread.php?78535-Combine-X509-and-Form-based-login&s=e077b42fd45ae3a3177a01c90339893c)。

# ajax - Yii CActiveForm 日期验证

> ID：14391130
> 
> 赞同：1
> 
> 时间：2013-01-18T01:29:42.840
> 
> 标签：ajax, validation, yii

“文本日期”字段的日期验证不起作用。

[http://sky-walker.net/temp/test/yii/testdate/index.php?r=site/login](http://sky-walker.net/temp/test/yii/testdate/index.php?r=site/login)

如果我根据需要进行设置，“必需”验证将起作用。

我希望文本字段在提交表单时以及使用 ajax 失去焦点时变为红色或绿色。如果它变成红色，还应该出现一条错误消息。

来自 login.php

```
<div class="row">
    <?php echo $form->labelEx($model,'textDate'); ?>
    <?php echo $form->textField($model,'textDate'); ?>
    <?php echo $form->error($model,'textDate'); ?>
</div> 
```

来自 LoginForm.php

```
public $textDate; 
```

从规则（）

```
...array('textDate', 'date', 'format'=>'d/M/yyyy'),... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T01:34:16.517

在您的表单上，您没有 ajax 验证。您拥有的验证是 javascript 验证。如果您使用 Firebug 看一下，那么您将看到与服务器没有任何通信 => 您只有 js 验证，您没有验证模型。

您必须设置一些变量才能使其通过 ajax 运行

```
'enableAjaxValidation' => true,
'clientOptions' => array(
        'validateOnSubmit' => true,
        'validateOnChange' => true,
), 
```

# c# - EntityCollection 作为方法中的参数

> ID：14391131
> 
> 赞同：-1
> 
> 时间：2013-01-18T01:29:57.177
> 
> 标签：c#, entity-framework-4, entitycollection

我正在尝试编写一个代码，其中 EntityCollection 是方法的参数，但我不知道什么是正确的编码

有人可以帮我解决这个问题吗？

这是示例代码

```
 //by the way, this is a wrong coding, I am just showing you, what is the thing that I want to do...
private void sampleMethod(EntityCollection a)
{
   if (a.ToList().Count == 0)
   {
      //body
   }
} 
```

当我调用它时，这就是它的样子

```
sampleMethod(employee.EducationalBackground); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:27:31.560

这个问题有点难以理解，但我想你正在寻找这样的东西：

```
private void sampleMethod(EntityCollection<Employee> employees)
{
   foreach(var employee in employees)
   {
      // do something with every employee.EducationalBackground
   }
} 
```

搜索“c# 泛型”以获取有关`EntityCollection<Employee>`.

搜索“linq”以获取有关如何使用集合的信息。

# r - 使用 R 中的简单数据集的等高线图

> ID：14391132
> 
> 赞同：0
> 
> 时间：2013-01-18T01:30:03.550
> 
> 标签：r, plot, ggplot2, contour, geor

嗨，我一直在尝试使用简单的数据集创建简单的轮廓。

使用的数据集如下：

```
 dput(elevation)
structure(list(x = c(1L, 2L, 3L, 5L, 10L, 12L, 13L, 9L), y = c(5L, 
20L, 18L, 25L, 31L, 25L, 8L, 12L), z = c(5L, 10L, 15L, 8L, 7L, 
6L, 2L, 4L)), .Names = c("x", "y", "z"), class = "data.frame", row.names = c("1", 
"2", "3", "4", "5", "6", "7", "8")) 
```

我只是将上述数据合并到一个名为elevation.csv 的文件中

我使用 loess 和 expand.grid 函数进行插值。黄土模型中的度数和跨度如何选择？

我用来绘制的代码如下：

```
require(ggplot2)    
require(geoR)
elevation <- read.table("elevation.csv",header=TRUE, sep=",")
elevation

elevation.df <- data.frame(x=elevation$x,y=elevation$y,z=5*elevation$z)
elevation.df
elevation.loess=loess(z~x*y, data=elevation.df,degree=2,span=0.25)
elevation.fit=expand.grid(list(x=seq(1,13,2),y=seq(5,30,4)))
elevation.fit[1:20,]
z = predict(elevation.loess,newdata=elevation.fit)
elevation.fit$Height=as.numeric(z)
v <- ggplot(elevation.fit,aes(x,y,z=Height))
v1 <- v+stat_contour(aes(colour=..level..))+geom_point(data=elevation.df,aes(x=x,y=y,z=z))
direct.label(v1) 
```

我不确定我得到的结果是否准确。任何人都可以用任何其他技术验证这个结果并分享这个观点吗？实际上，我必须处理一个大型数据集，并且想先从简单的事情开始。

我用上面的代码得到的输出如下：

![在此处输入图像描述](../Images/011f326ae77202f0ef3ea841b7fe43e3.png)

这是处理大量数据集的好方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T01:59:17.680

我得到这个......在警告和关于 no function named 的错误之后`direct.label`：

```
Warning messages:
1: In simpleLoess(y, x, w, span, degree, parametric, drop.square, normalize,  :
  span too small.   fewer data values than degrees of freedom.
2: In simpleLoess(y, x, w, span, degree, parametric, drop.square, normalize,  :
  pseudoinverse used at 0.23095 0.70587
3: In simpleLoess(y, x, w, span, degree, parametric, drop.square, normalize,  :
  neighborhood radius 1.9692
4: In simpleLoess(y, x, w, span, degree, parametric, drop.square, normalize,  :
  reciprocal condition number  0
5: In simpleLoess(y, x, w, span, degree, parametric, drop.square, normalize,  :
  There are other near singularities as well. 2.063 
```

![在此处输入图像描述](../Images/f49a4ba18ca9ff642b64c1279d0955ba.png)

在这种数据匮乏的情况下，什么是“正确的”是一个判断问题。由于二维范围的覆盖范围如此参差不齐，我会考虑标记点的 z 值。这些警告是数学变得“压力”的迹象。我认为这表明 y = 30 以上区域存在问题。

![在此处输入图像描述](../Images/199d559d652e199d58ad69f7a1b3c02e.png)

# css - CSS background-color 适用于活动状态，但不适用于正常状态

> ID：14391134
> 
> 赞同：2
> 
> 时间：2013-01-18T01:30:04.487
> 
> 标签：css, html, background-color

我在 div 中添加了一个按钮样式。背景颜色不适用于正常状态。但是，只要我单击按钮并将其变为活动状态，背景颜色就会正确应用。我无法弄清楚为什么背景色只出现在一个阶段而不是另一个阶段。我已经求助于使用 !important 来使其工作。下面是CSS：

```
.statusbutton {
    -moz-box-shadow:inset 0 1px 0 0 #ffffff;
    -webkit-box-shadow:inset 0 1px 0 0 #ffffff;
    box-shadow:inset 0 1px 0 0 #ffffff;
    height:43px;
    width:40px;
    border:1px solid #ccc;
    -moz-border-radius:2px;
    -webkit-border-radius:2px;
    border-radius:2px;
    display:inline-block;
    background-color:#fbfbfb !important;
}

.statusbutton:active {
    position:relative;
    background-color:#fbfbfb;
    top:1px;
} 
```

编辑：我意识到问题来自我的样式表的后半部分：

```
.red {
background:url(status-red.png) no-repeat center center;
} 
```

之后我将 .red 应用于按钮，这导致背景图像覆盖了背景颜色。下面的代码最终解决了这个问题：

```
.red {
background:url(status-red.png) no-repeat center center;
background-color:#fbfbfb;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T01:39:36.347

使用 !important 通常是个坏主意。这是你的整个css文件还是还有更多？可能有另一种具有更高优先级的 css 样式会覆盖您在此处设置背景颜色的尝试。如果您仍然遇到问题，我建议您设置一个 jsfiddle

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T01:39:37.520

如果您希望此代码正常工作，则必须`!important`从 CSS 代码中删除 否则此规则将优先考虑`:active`状态，并记住更改两种状态的颜色（实际上您`#fbfbfb`用于正常和活动状态）。

# mysql - 执行时间过多也会影响数据库性能

> ID：14391137
> 
> 赞同：1
> 
> 时间：2013-01-18T01:30:46.867
> 
> 标签：mysql, sql, query-performance

1.query 执行大约需要 10 分钟到 1 小时。2.由于这个原因，我们经常遇到负载峰值。3.请帮我重写查询。4.还帮助我提高查询的性能。

**带解释计划的查询**

```
 explain select count(*) 
      from t_event eve 
 left join t_event_element_rel rel on rel.event_id = eve.id 
 left join t_object object on eve.create_object_id = object.id 
 left join t_keyword keyword on  rel.element_id = keyword.id and rel.element_type_id = 1 
 left join t_target_url targeturl on  rel.element_id = targeturl.id and rel.element_type_id = 2 
 where eve.domain_id = 522

+----+-------------+-----------+--------+-------------------------+-------------------------+---------+----------------------------+--------+-------------+
| id | select_type | table     | type   | possible_keys           | key                     | key_len | ref                        | rows   | Extra       |
+----+-------------+-----------+--------+-------------------------+-------------------------+---------+----------------------------+--------+-------------+
|  1 | SIMPLE      | eve       | ref    | domain_id_event_type_cd | domain_id_event_type_cd | 4       | const                      | 243430 |             |
|  1 | SIMPLE      | rel       | ref    | FK_event                | FK_event                | 4       | company.eve.id             |      2 |             |
|  1 | SIMPLE      | user      | eq_ref | PRIMARY                 | PRIMARY                 | 4       | company.eve.create_user_id |      1 | Using index |
|  1 | SIMPLE      | keyword   | ref    | id                      | id                      | 4       | company.rel.element_id     |      1 | Using index |
|  1 | SIMPLE      | targeturl | ref    | id                      | id                      | 4       | company.rel.element_id     |      1 | Using index |
+----+-------------+-----------+--------+-------------------------+-------------------------+---------+----------------------------+--------+-------------+
5 rows in set (0.45 sec) 
```

**表结构：**

```
mysql> show create table t_event_element_rel\G
*************************** 1\. row ***************************
       Table: t_event_element_rel
Create Table: CREATE TABLE `t_event_element_rel` (
  `id` int(255) NOT NULL AUTO_INCREMENT,
  `element_type_id` int(11) NOT NULL,
  `event_id` int(11) NOT NULL,
  `element_id` int(11) NOT NULL,
  `element_desc` varchar(500) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `FK_event` (`event_id`),
  KEY `element_type_id_element_id` (`element_type_id`,`element_id`)
) ENGINE=InnoDB AUTO_INCREMENT=45901159 DEFAULT CHARSET=utf8
1 row in set (0.00 sec)

mysql> show create table t_object\G
*************************** 1\. row ***************************
       Table: t_object
Create Table: CREATE TABLE `t_object` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) DEFAULT NULL,
  `password` varchar(255) DEFAULT NULL,
  `email` varchar(255) DEFAULT NULL,
  `is_admin` int(11) DEFAULT NULL,
  `phone` varchar(50) DEFAULT NULL,
  `company` varchar(255) DEFAULT NULL,
  `last_login` datetime DEFAULT NULL,
  `state` int(11) DEFAULT NULL,
  `validate_code` varchar(50) DEFAULT NULL,
  `has_login` smallint(6) DEFAULT NULL COMMENT 'if null or 0 then hasn''t login, first time login',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1304 DEFAULT CHARSET=utf8
1 row in set (0.00 sec)

mysql> show create table t_event\G
*************************** 1\. row ***************************
       Table: t_event
Create Table: CREATE TABLE `t_event` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `create_user_id` int(11) DEFAULT NULL,
  `event_create_date` date DEFAULT NULL,
  `event_type_cd` int(11) NOT NULL,
  `event_desc` varchar(512) NOT NULL,
  `IsGlobalEvent` int(2) DEFAULT NULL,
  `event_start_date` datetime NOT NULL,
  `event_end_date` datetime NOT NULL,
  `job_id` int(11) DEFAULT NULL,
  `domain_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `event_user_FK` (`create_user_id`),
  KEY `domain_id_event_type_cd` (`domain_id`,`event_type_cd`)
) ENGINE=InnoDB AUTO_INCREMENT=8586007 DEFAULT CHARSET=utf8
1 row in set (0.00 sec)

mysql> show create table t_keyword\G
*************************** 1\. row ***************************
       Table: t_keyword
Create Table: CREATE TABLE `t_keyword` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `keyword_name` varchar(255) DEFAULT NULL,
  `keyword_value` varchar(255) DEFAULT NULL,
  `type` int(11) DEFAULT NULL,
  `description` varchar(2000) DEFAULT NULL,
  `own_domain_id` int(11) DEFAULT NULL,
  `rank_check` int(11) DEFAULT NULL,
  `rank1` int(11) DEFAULT NULL COMMENT 'yesterday rank value',
  `rank2` int(11) DEFAULT NULL COMMENT 'the day before yesterday rank value',
  `rank3` int(11) DEFAULT NULL COMMENT 'special date rank for overstock.com',
  `yesterday_entrances` int(11) DEFAULT NULL COMMENT 'yesterday entrances',
  `week_entrances` int(11) DEFAULT NULL COMMENT '7 days entrances',
  `current_ctr` float(16,4) DEFAULT NULL COMMENT 'Current CTR',
  `monthly_search_volume` int(11) DEFAULT NULL COMMENT 'Most Recent Month search volume',
  `avg_monthly_search_volume` int(11) DEFAULT NULL COMMENT 'avg_monthly_search_volume',
  `traffic_increase` int(11) DEFAULT NULL COMMENT 'Traffic Increase',
  `rank_improvement` int(11) DEFAULT NULL COMMENT 'Rank Improvement',
  `rank_update_date` date DEFAULT NULL COMMENT 'rank be updated for Special Date',
  `top_rank_targeturl_id` int(11) DEFAULT NULL,
  `frequency` int(10) DEFAULT '1' COMMENT '1: daily, 2: weekly, 3: monthly',
  `score` float DEFAULT NULL,
  `create_date` datetime DEFAULT NULL,
  `bing_rank1` int(10) DEFAULT NULL,
  `bing_rank2` int(10) DEFAULT NULL,
  `yesterday_bing_entrances` int(11) DEFAULT NULL,
  `bing_rank_improvement` int(11) DEFAULT NULL,
  KEY `id` (`id`),
  KEY `keyword_name` (`keyword_name`),
  KEY `own_domain_id` (`own_domain_id`,`rank_check`),
  KEY `rank_check` (`rank_check`)
) ENGINE=InnoDB AUTO_INCREMENT=670267018 DEFAULT CHARSET=utf8
/*!50100 PARTITION BY RANGE (`rank_check`)
(PARTITION p0 VALUES LESS THAN (0) ENGINE = InnoDB,
 PARTITION p1 VALUES LESS THAN (1) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN (2) ENGINE = InnoDB,
 PARTITION pEOW VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
1 row in set (0.00 sec)

mysql> show create table t_target_url\G
*************************** 1\. row ***************************
       Table: t_target_url
Create Table: CREATE TABLE `t_target_url` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `own_domain_id` int(11) DEFAULT NULL,
  `url` varchar(2000) NOT NULL,
  `create_date` datetime DEFAULT NULL,
  `friendly_name` varchar(255) DEFAULT NULL,
  `section_name_id` int(11) DEFAULT NULL,
  `type` int(11) DEFAULT NULL,
  `status` int(11) DEFAULT NULL,
  `week_entrances` int(11) DEFAULT NULL COMMENT 'last 7 days entrances',
  `week_bounces` int(11) DEFAULT NULL COMMENT 'last 7 days bounce',
  `canonical_url_id` int(11) DEFAULT NULL COMMENT 'the primary URL ID, NOT allow canonical of canonical',
  KEY `id` (`id`),
  KEY `urlindex` (`url`(255)),
  KEY `own_domain_id_type_status` (`own_domain_id`,`type`,`status`),
  KEY `canonical_url_id` (`canonical_url_id`),
  KEY `type` (`type`,`status`)
) ENGINE=InnoDB AUTO_INCREMENT=237034388 DEFAULT CHARSET=utf8
/*!50100 PARTITION BY RANGE (`type`)
(PARTITION p0 VALUES LESS THAN (0) ENGINE = InnoDB,
 PARTITION p1 VALUES LESS THAN (1) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN (2) ENGINE = InnoDB,
 PARTITION pEOW VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
1 row in set (0.01 sec) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T03:04:44.787

EXPLAIN 的第一行显示了**domain_id_event_type_cd**的很多行，这是一个复合索引，但在您的查询中，您只搜索索引的一部分（eve.domain_id = xxx）。因此，除非域 522 确实有 243K 条目，否则您可以通过仅为 domain_id 添加索引来减少这一点。

此外，您似乎正在尝试通过使用 rel.element_type_id 作为“开关”来进行 OR 搜索，以引用不同类型的数据。由于您只对计数感兴趣，因此我建议您将查询分成两部分，然后添加结果。这将减少 LEFT JOINS。您甚至可以在 MySQL 中添加结果：

SELECT (SELECT COUNT (*) FROM ....) + (SELECT COUNT (*) FROM ...)

（你知道你可以滥用 SELECT 来做数学，不是吗？）

# entity-framework - SilverLight 4.0 C# - 带有 CheckBox 列的 DomainDataSource DataGrid（仅 UI - 不是数据字段）以允许用户选择多个记录/行

> ID：14391140
> 
> 赞同：2
> 
> 时间：2013-01-18T01:30:53.667
> 
> 标签：entity-framework, datagrid, silverlight-4.0, checkbox, domaindatasource

**SilverLight 的新手并在此处发布。请怜悯并具体:)**

使用带有 DomainDataSource 和 DataGrid 控件的 RIA 服务来显示来自 SQL 服务器查询的数据行

**目标：** 具有复选框列（仅 UI - 不是数据字段）以允许用户选择多个记录/行

**背景：**
1) 使用 RIA 服务创建了新的 SilverLight 4、C# 解决方案

2) 在 ProjectName.Web 中

*   创建引用 SQL 服务器表/视图的实体框架 (EF) 模型（构建的解决方案）。
*   使用 EF 模型创建域服务（构建的解决方案）。

3) 在 SilverLightProjectName

*   从 Data Sources 窗口，将表格拖到设计图面上以创建 DomainDataSource 和 DataGrid（这非常适合将 DataGrid 绑定到数据源）

4) 在 MainPage.XAML 添加复选框列

**发生了什么：** 复选框被用户选中/选中，向下滚动，向上滚动，所有复选框重置并且只有 Datagrid.SelectedItem 仍然被选中。由于分页，我已阅读此行为是“设计使然”。

```
<sdk:DataGrid  RowStyle="{StaticResource newDataGridStyle}"  AutoGenerateColumns="False" ItemsSource="{Binding ElementName=ddsPagerApp, Path=Data}" Name="vwPagerAppDataGrid" RowDetailsVisibilityMode="VisibleWhenSelected" MouseLeftButtonDown="vwPagerAppDataGrid_MouseLeftButtonDown" VerticalGridLinesBrush="#FFB9B9B9" FontSize="10" Grid.Row="3" SelectionChanged="vwPagerAppDataGrid_SelectionChanged" KeyDown="vwPagerAppDataGrid_KeyDown" MouseLeftButtonUp="vwPagerAppDataGrid_MouseLeftButtonUp" MouseRightButtonUp="vwPagerAppDataGrid_MouseRightButtonUp" DataContext="{Binding}" SelectionMode="Single" IsEnabled="True" IsReadOnly="False" TabIndex="2" Grid.Column="1" Margin="0,10,9,9">
        <sdk:DataGrid.Columns>                
            <sdk:DataGridTemplateColumn IsReadOnly="False">                    
                <sdk:DataGridTemplateColumn.CellEditingTemplate>
                    <DataTemplate>
                        <CheckBox  Name="ChkSelected" IsThreeState="False" IsChecked="{Binding Path=IsChecked, Mode=TwoWay}" HorizontalAlignment="Center" VerticalAlignment="Center" Unchecked="IndividualCheckBox_Unchecked" Checked="IndividualCheckBox_Checked" Width="Auto" Height="Auto" />
                    </DataTemplate>
                </sdk:DataGridTemplateColumn.CellEditingTemplate>
            </sdk:DataGridTemplateColumn>
        <sdk:DataGridTextColumn x:Name="fullNameColumn" Binding="{Binding Path=FullName}" Header="Full Name" IsReadOnly="True" />
        <sdk:DataGridTextColumn x:Name="departmentColumn" Binding="{Binding Path=department}" Header="Department" IsReadOnly="True" />
        <sdk:DataGridTextColumn x:Name="pager_number_displayColumn" Binding="{Binding Path=pager_number_display}" Header="Pager Number" IsReadOnly="True" />
        <sdk:DataGridTextColumn x:Name="PageTo" Binding="{Binding Path=PageTo}" Header="Page To" IsReadOnly="True" />
    </sdk:DataGrid.Columns>
</sdk:DataGrid>
<riaControls:DomainDataSource AutoLoad="True" d:DesignData="{d:DesignInstance my:vwPagerApp, CreateList=true}" Height="0" LoadedData="ddsPagerApp_LoadedData" Name="ddsPagerApp" QueryName="GetVwPagerAppsQuery" Width="0" Margin="10,0,25,45" Background="#FF7D0000" Foreground="#FF7D0000" Visibility="Visible">
    <riaControls:DomainDataSource.DomainContext>
        <my:NotifyDomainContext />
    </riaControls:DomainDataSource.DomainContext>
</riaControls:DomainDataSource> 
```

**尝试1：**

*   在 EFModel.edmx 中，添加了布尔标量属性“IsChecked”
*   在 DomainService.metadata.cs 中，添加了 public bool IsChecked { get; 放; }
*   在 MainPage.XAML 中。添加（上） IsChecked="{Binding Path=IsChecked, Mode=TwoWay}"

**出现错误**：错误 11009：未映射属性“”

**更新：反向尝试1：**

**尝试 2：**
研究为实体定义部分类、连接到 DataGrid 并使用它来跟踪 CheckBox 值的可能性。 **关于这是否可行/如何可行的任何建议？**

**尽我所能吸收这一点。请赐教......并提前谢谢你:)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:45:27.280

这就是我实现的，并且效果很好。我希望它在未来对其他人有所帮助:)

1) **SilverLight Project C#：**使用部分类扩展实体类（在单独的文件中，但在同一个命名空间中——编译成 1 个类，但生成的代码是分开的）

```
namespace Pager.Web
{
  public partial class pager_grp
    {
        bool _IsChecked = false;
        public bool IsChecked
        {
            get
            {return this._IsChecked;}
            set
            {this._IsChecked = !IsChecked;}
        }
    }
} 
```

2) **SilverLight 项目 GUI：**在名为 chkSelected 的 DataGridTemplateColumn 类型的 DataGrid 中创建列

3) **SilverLight Project XAML：** 使用模板并绑定到部分类中声明的新属性

```
 <sdk:DataGridTemplateColumn IsReadOnly="False">                    
   <sdk:DataGridTemplateColumn.CellEditingTemplate>
        <DataTemplate>
            <CheckBox  Name="ChkSelected" IsThreeState="False" IsChecked="{Binding    Path=IsChecked, Mode=TwoWay}" HorizontalAlignment="Center" VerticalAlignment="Center" Unchecked="IndividualCheckBox_Unchecked" Checked="IndividualCheckBox_Checked" Width="Auto" Height="Auto" />
        </DataTemplate>
    </sdk:DataGridTemplateColumn.CellEditingTemplate>
</sdk:DataGridTemplateColumn> 
```

# integration-testing - 在我的数据集成测试中使用 autofixture 创建代理

> ID：14391146
> 
> 赞同：5
> 
> 时间：2013-01-18T01:32:09.097
> 
> 标签：integration-testing, autofixture

我正在尝试为使用实体框架的域编写一套数据库集成测试。我更喜欢在某些情况下自动固定对象。我理想的语法是这样的

```
[TestMethod]
public void AutofixtureMyEntityEntity()
{
    var fixture = new Fixture();

    fixture.Customize<MyEntity>(
      c => c.FromFactory<MyDbContext>(ctx => ctx.Set<MyEntity>().Create()));

    using (var context = new MyDbContext())
    {
        fixture.Inject(context);
        var entity = fixture.CreateAnonymous<MyEntity>();
        context.Set<MyEntity>().Add(entity);
        context.SaveChanges();
    }
}

[TestMethod]    
[ExpectedException(typeof(InvalidOperationException))]
public void AutoFixtureMyEntityEntityWithoutInjection()
{
    var fixture = new Fixture();

    fixture.Customize<MyEntity>(
       c => c.FromFactory<MyDbContext>(ctx => ctx.Set<MyEntity>().Create()));

    using (var context = new MyDbContext())
    {
        var entity = fixture.CreateAnonymous<MyEntity>();
        context.Set<MyEntity>().Add(entity);
        context.SaveChanges();
    }
} 
```

显然，这是行不通的，因为`CreateAnonymous()`不期望工厂的输入参数。我只能假设我对`FromFactory()`提供的内容有一个错误的理解。虽然评论说，

```
/// Specifies that a specimen should be created in a particular way, using a single input
/// parameter for the factory. 
```

在阅读[了 ploehs 博客](http://blog.ploeh.dk/2011/04/19/ConstructorStrategiesForAutoFixture.aspx)之后，我对这些作品如何相互作用感到有些困惑。

工厂调用期间的实例`MyDbContext`不是我传递给的实例`Inject()`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T22:14:29.163

像这样的东西会起作用吗？

```
var fixture = new Fixture();
fixture.Customize<MyEntity>(c => c
    .FromFactory<MyDbContext, MyEntity>(ctx => ctx.Set<MyEntity>.Create()));

using (var context = new MyDbContext())
{
    fixture.Inject(context);
    var item = fixture.CreateAnonymous<MyEntity>();
    context.Set<MyEntity>().Add(item);
    context.SaveChanges();
} 
```

免责声明：我没有尝试编译这个......

* * *

FWIW，如果您将 xUnit.net 与 AutoFixture 一起使用，则可以将测试简化为：

```
[Theory, MyAutoData]
public void TheTest([Frozen]MyDbContext context, MyEntity item)
{
    context.Set<MyEntity>().Add(item);
    context.SaveChanges();
} 
```

# php - 在 mysql 字段中搜索特定单词并返回值

> ID：14391147
> 
> 赞同：1
> 
> 时间：2013-01-18T01:32:11.133
> 
> 标签：php, mysql, search

我需要帮助伙计们！让我在这里举个例子......假设我在mysql的'comment'字段中有这两个条目..

```
 Entry 01: Kindly contact me through my email address entry01@nobody.com

 Entry 02: Please drop an email to entry02@you.com for more information 
```

我只想从条目中提取电子邮件地址。任何人都可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T01:36:23.863

尝试这个

```
 SELECT * 
  FROM your_table 
  WHERE your_column_entry1 
  LIKE  '%nobody.com%' 
  OR your_column_entry2 LIKE '%you.com%' 
```

# c# - 使用 appharbor 和 mongohq 时如何获取 MongoDatabase

> ID：14391150
> 
> 赞同：1
> 
> 时间：2013-01-18T01:32:19.767
> 
> 标签：c#, asp.net-mvc, mongodb, appharbor

我正在开始一个新项目并想使用 appharbor 和 mongohq。appharbor 上的示例似乎无效，因为它使用 MongoDatabase.Create 并且现在已过时。我希望有一个更新的指南或示例，推荐用户使用 MongoClient、MongoServer 和 MongoDatabase。

是否有另一种方法可以使用提供的密钥构建获取 MongoDatabase 的实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T04:16:59.583

您可以使用在 AppHarbor 上注入的连接字符串初始化 MongoDatabase，如下所示：

```
var connectionstring = ConfigurationManager.AppSettings.Get("(MONGOHQ_URL|MONGOLAB_URI)");
var url = new MongoUrl(connectionstring);
var client = new MongoClient(url);
var server = client.GetServer();

var database = server.GetDatabase(url.DatabaseName); 
```

[知识库文章](http://support.appharbor.com/kb/add-ons/using-mongodb)已更新以反映新的 C# 驱动程序 API 。

[该线程](https://stackoverflow.com/questions/7201847/how-to-get-the-mongo-database-specified-in-connection-string-in-c-sharp)涵盖了相同的问题。

# oracle - Oracle删除“多对多”关系表数据

> ID：14391152
> 
> 赞同：1
> 
> 时间：2013-01-18T01:32:34.307
> 
> 标签：oracle, join

我有 3 个表，它们是多对多关系。IE：

```
 Create Table Product(ProductId number(18,0) NOT NULL);

 Create Table Customer(CustomerId number(18,0) NOT NULL);

 Create Table CustomerProduct(CustomerId number(18,0) NOT NULL,ProductId number(18,0) NOT NULL); 
```

由于 CustomerProduct 表同时引用 Product 和 Customer 表。我正在尝试从 CustomerProduct 表中删除数据。

我只能找到类似的东西：

```
DELETE FROM
(
   SElECT CustomerProduct.* FROM CustomerProduct
   INNER JOIN Product ON Product.ProductId = CustomerProduct.ProductId
   INNER JOIN Customer ON Customer.CustomerId = CustomerProduct.CustomerId
   WHERE Product.ProductId = 1 AND Customer.CustomerId = 7

); 
```

注意：外键上没有定义 CASCADE 删除... Oracle 不允许我做我可以在 SQL SERVER 中做的事情

```
DELETE A
FROM A
INNER JOIN B on a.Id = b.id
WHERE b.Id = 2..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:22:12.097

我不明白你想做什么。可以使用简单的删除语句从表 CustomerProduct 中删除，如下所示：

```
 delete CustomerProduct 
  where ProductId = 1 and CustomerId  = 7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-28T13:49:19.040

我遇到了同样的问题。我用触发器很好地解决了问题。

```
create or replace TRIGGER "AUTO_DELETE_PRODUCTS" 
BEFORE DELETE ON Product 
FOR EACH ROW
BEGIN
  DELETE FROM CustomerProduct WHERE CustomerProduct.ProductId = :old.ProductId;
END; 
```

您可以对其余的表执行此操作。这样，当您删除其中一个记录时，信息将在整个表格中被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T00:49:56.860

我只是花了几个小时试图弄清楚这一点，你的问题有正确的答案。但是，如果您将查询更改为关系表中不存在相关条件的位置，那么为什么需要连接就更有意义了。

就像是：

```
CREATE TABLE Product(ProductId number(18,0) NOT NULL, Name VARCHAR2(30));
CREATE TABLE Customer(CustomerId number(18,0) NOT NULL, Name VARCHAR2(30));

DELETE FROM
    (SELECT cp.* 
       FROM CustomerProduct cp
       INNER JOIN Product p ON p.ProductId = cp.ProductId
       INNER JOIN Customer c ON c.CustomerId = cp.CustomerId
       WHERE c.Name LIKE 'TEST%' AND p.Name IS NULL); 
```

# macos - 如何更改 NSBrowser 本地拖放的 draggingFormation

> ID：14391153
> 
> 赞同：2
> 
> 时间：2013-01-18T01:32:45.787
> 
> 标签：macos, cocoa, drag-and-drop, nsbrowser

我已经实现了一个视图控制器，它可以将多个 NSBrowser 单元格中的项目本地拖放到同一个 NSBrowser 控件中的一个单元格上。几乎一切都按我的意愿工作，除了我想找到合适的位置将 draggingFormation 更改为 NSDraggingFormationList，但我找不到 NSDraggingInfo 对象来进行更改。

我有一个不同的视图控制器，它使用 NSOutlineView 并将上述更改放入**outlineView:updateDraggingItemsForDrag:**方法，做我想要的。我找到了关于如何为 NSOutlineView、NSTableView 和 NSCollectionView 执行此操作的参考资料，但没有找到 NSBrowser。有任何想法吗？

# javascript - JavaScript 对象 - 调用而不创建它（如数学对象）

> ID：14391157
> 
> 赞同：6
> 
> 时间：2013-01-18T01:33:05.580
> 
> 标签：javascript

我是 JavaScript 对象的新手。我想创建一个像 JavaScript Math 对象这样的对象。但它不起作用（它什么也不返回）。

我想创建一个名为 Area 的对象，并为它提供正方形和矩形的方法。我想以与使用 Math 对象相同的方式使用它。要找到正方形的面积，我会这样做：

```
var squareArea = Area.square(10); // 100 
```

我为示例选择了区域，因为它很简单。

我的脚本如下：

```
<script>
window.onload = function() {

    function Area() {

        function square(a) {
            area = a * a;
            return area;
        }

        function rectangle(a, b) {
            area = a * b;
            return area;    
        }

    }

    rectangleArea = Area.rectangle(10, 20);

    alert(rectangleArea);

}
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T01:34:31.510

这将创建一个`Area`使用方法调用的对象。

```
var Area = {
    staticMethod: function() { }
}; 
```

除非你想要`Area`可调用的，否则不要让它成为一个函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-18T01:34:58.703

您在这里要做的是创建一个以`Area`您描述的分配给它的方法命名的对象。最简单和最干净的方法是这样的：

```
var Area = {

    square: function(a)
    {
        return a * a;
    },

    rectangle: function(a, b)
    {
        return a * b;  
    }

}; 
```

您现在可以按照您的描述使用`Area.square()`和。`Area.rectangle()`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T01:35:15.553

您的函数仅在包含函数的范围内，`Area`. 要使它们可以通过`Area`对象访问，请将函数设置为以下属性`Area`：

```
var Area = {
    square: function(a) {
        area = a * a;
        return area;
    },
    rectangle: function(a, b) {
        area = a * b;
        return area;    
    }
}

rectangleArea = Area.rectangle(10, 20);
alert(rectangleArea); 
```

`Area`自从您创建了一个函数以来，您似乎正在尝试使用“类” 。您不需要这样做，因为您不需要 的多个实例`Area`，但如果您希望这样做：

```
function AreaClass(){
     // just an empty constructor
}
AreaClass.prototype.square = function(a) {
    area = a * a;
    return area;
}
AreaClass.prototype.rectangle = function(a, b) {
    area = a * b;
    return area;    
}
var Area = new AreaClass(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-18T01:38:39.160

好的，所以有很多代码答案，但解释很少：

通过创建`Area`一个函数，你犯了第一个错误——它应该是一个附加了函数的对象。

然后，在你的`Area`函数体中，你声明了更多的函数，但是因为它们在`Area`函数内部，所以它们会被立即删除——外部实际上没有可调用的表单。

你想要的是制作一个对象：

```
var Area = {}; 
```

然后将函数附加到它：

```
Area.square = function(var a) {
    area = a * a;
    return area;
}; 
```

等等。

这样，您要调用的函数就是`Area`对象的属性。

或者你可以内联：

```
var Area = {
    square: function(var a) {
        area = a * a;
        return area;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T01:41:31.530

作为简单地为您的方法（例如，）创建命名空间的替代方法`var Area = { ... }`，您可以将静态方法添加到现有类，例如

```
function Area() { ... };

Area.square = function(a) {
    return a * a;
}; 
```

# box-api - 通过 box.com 的 /tokens V2 API 端点获取身份验证令牌的“即时模式”方式是否可用？

> ID：14391166
> 
> 赞同：0
> 
> 时间：2013-01-18T01:34:28.013
> 
> 标签：box-api

此处发布的答案[https://stackoverflow.com/a/10486729/1919484](https://stackoverflow.com/a/10486729/1919484)引用了“即时模式”box.com api 身份验证选项，该选项“通过 /tokens V2 API 端点为您获取身份验证令牌，但限制您访问用户帐户中的单个文件夹。

我已经用谷歌搜索过这样的事情，但我找不到更多关于它的信息。这似乎正是我正在开发的应用程序所需要的。

谁能说明这样的事情是否仍在进行中，或者是否已被取消或替换？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T03:28:26.917

即时模式是一项我们仍在测试/迭代的测试版功能。它目前尚未准备好用于生产应用程序，但您可以通过 box.com 的 API 向我们发送电子邮件，并附上您的用例，以便我们可以在准备就绪时通知您。

# xml - Wordpress 和 Magento 完全集成的主页帖子的字符/字数限制（fishpig）

> ID：14391168
> 
> 赞同：2
> 
> 时间：2013-01-18T01:34:35.860
> 
> 标签：xml, wordpress, magento, integration, fishpig

我最近使用 fishpig 插件包含了一个完全集成到 magento 中的 wordpress 安装。我正在努力限制主页上帖子的字符/字数。

FishPig 记录了一个用于发布摘录的小部件，包括以下代码：

```
<block type="wordpress/sidebar_widget_posts" name="wordpress.widget.recent_posts" as="recent_posts" template="wordpress/sidebar/widget/categoryposts.phtml">
    <action method="setTitle"><title>Latest Posts</title></action>
    <action method="setPostCount"><post_count>5</post_count></action>
    <action method="setExcerpt"><display>on</display></action>
    <action method="setExcerptLength"><length>30</length></action>
    <action method="setDate"><date>on</date></action>
    <action method="setCommentNum"><comments>on</comments></action>
</block> 
```

我假设我可以将“setExcerptLength”模仿为“setPostLength”并将其包含在主页块中的wordpress.xml中

```
<block type="wordpress/post_list" name="wordpress_post_list" template="wordpress/post/list.phtml">
    <block type="wordpress/post_list_pager" name="wordpress_post_list_pager">
        <action method="setPostLength"><length>30</length></action>
    </block>
</block> 
```

但是这些似乎没有效果。

我假设所有的 wordpress 函数都已通过完全集成转换为 xml，所以我不能采用通常的根。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:48:47.877

最近使用fishpig插件将wordpress集成到magento中，我还发现摘录长度没有效果。

在不深入研究代码的情况下，我的解决方案如下。

而不是使用 xml 直接在您的页面内容中插入以下内容。确保删除您添加的任何 xml。

```
{{block type="wordpress/sidebar_widget_posts" name="wordpress.widget.recent_posts" post_count="5" title="Latest Blogs" excerpt="on" excerpt_length="250" date="off" comment_num="off" template="wordpress/sidebar/widget/post-hp.phtml"}} 
```

在您的模板目录中

```
app/design/frontend/default/your_template/template/wordpress/sidebar/widget/ 
```

创建一个新文件 post-hp.phtml

将 categoryposts.phtml 的内容复制到这个新文件中。

查找和替换

```
<p class="post-excerpt"><?php echo $post->getPostExcerpt() ?></p> 
```

和

```
<p class="post-excerpt"><?php $content = $post->getPostExcerpt(); $content = strip_tags($content); echo substr($content, 0, 250); ?> ...</p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T07:56:01.820

您必须编辑 categoryposts.phtml。换行

```
<p class="post-excerpt"><?php echo $post->getPostExcerpt() ?></p> 
```

至

```
<p class="post-excerpt"><?php  echo substr($post->getPostExcerpt(),0,$post["excerpt_size"]) ?> </p> 
```

如果您有图像，请确保将长度从 30 设置为 700 之类的高值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T05:37:05.273

对于所有视觉学习者......您也可以通过单击“创建新帖子”页面上厨房水槽内的“插入更多标签”图标手动完成。

![在此处输入图像描述](../Images/9b95ed4519d62c2887aaf61d9d9770b3.png)

只需选择一个换行区域，通常 4-6 个段落行就可以了……然后单击按钮。

# html - HTML/CSS - 具有固定高度的容器中表格单元格的高度不一致

> ID：14391170
> 
> 赞同：1
> 
> 时间：2013-01-18T01:34:54.003
> 
> 标签：html, css, xhtml-1.0-strict

我有一个使用 HTML/CSS 设置的表格，它位于正在变成手风琴的 UL 的 LI 元素内。问题是，当 LI 元素动画到特定高度时，它会改变表格单元格的高度，使最后一个隐藏在视图之外。

如果从父 LI 元素中移除固定高度，则不存在此问题，但这是手风琴功能所必需的。无论父容器的高度属性如何，有没有办法确保单元格始终具有相同的高度？

我已经设置了以下 JS Fiddle 来显示问题。默认情况下，它运行手风琴功能。如果你把它取下来，你可以看到表格在高度添加到父容器之前的样子。

由于手风琴默认关闭所有元素，因此您必须单击标题栏上的“表格”才能打开表格并查看内容。

[http://jsfiddle.net/dsQtP/2/](http://jsfiddle.net/dsQtP/2/)

以下是希望查看的代码：

HTML：

```
<ul class="accordion">
    <li>
            <h3>Table</h3>
    <span class="accordionContent">
                            <table>
                                <tr class="tableHeader">
                                    <td class="first">HEADER</td>
                                    <td>TITLE<span>SUBTITLE</span>

        </td>
        <td>TITLE<span>SUBTITLE</span>

        </td>
        <td class="last">TITLE<span>SUBTITLE</span>

        </td>
        </tr>
        <tr class="tableRow_odd">
            <td class="first">ACTIVE ITEM</td>
            <td>ACTIVE ITEM</td>
            <td>ACTIVE ITEM</td>
            <td class="last">ACTIVE ITEM</td>
        </tr>
        <tr class="tableRow_even">
            <td class="first"></td>
            <td>ACTIVE ITEM</td>
            <td>ACTIVE ITEM</td>
            <td class="last"><span class="unavailable">INACTIVE ITEM</span>

            </td>
        </tr>
        <tr class="tableRow_odd">
            <td class="first"></td>
            <td>ACTIVE ITEM</td>
            <td><span class="unavailable">INACTIVE ITEM</span>

            </td>
            <td class="last"><span class="unavailable">INACTIVE ITEM</span>

            </td>
        </tr>
        <tr class="tableRow_even">
            <td class="first"></td>
            <td>ACTIVE ITEM</td>
            <td><span class="unavailable">INACTIVE ITEM</span>

            </td>
            <td class="last"><span class="unavailable">INACTIVE ITEM</span>

            </td>
        </tr>
        <tr class="tableRow_odd">
            <td class="first"></td>
            <td>ACTIVE ITEM</td>
            <td><span class="unavailable">INACTIVE ITEM</span>

            </td>
            <td class="last"><span class="unavailable">INACTIVE ITEM</span>

            </td>
        </tr>
        </table>    <span class="itemOverlay"></span></span>
    </li>
</ul> 
```

CSS：

```
body { padding: 15px }
/* Class Setups */

.accordion {

    width: 500px;

    margin: 0 auto;

    overflow: hidden;

    -webkit-border-radius: 5px;

    -khtml-border-radius: 5px;

    -moz-border-radius: 5px;

    -o-border-radius: 5px;

    border-radius: 5px;

}

.accordion li {

    overflow: hidden;

    position: relative;

}

.accordion li h3 {

    color: #fff;

    font-weight: 100;

    padding: 7px 0 7px 12px;

    border-bottom: 1px solid #4d82ae;

    cursor: pointer;

    font-size: 19px;

    background: #5d8ebd;

    /* Old browsers */

    background: -moz-linear-gradient(top, #5d8ebd 0%, #659ecb 100%);

    /* FF3.6+ */

    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #5d8ebd), color-stop(100%, #659ecb));

    /* Chrome,Safari4+ */

    background: -webkit-linear-gradient(top, #5d8ebd 0%, #659ecb 100%);

    /* Chrome10+,Safari5.1+ */

    background: -o-linear-gradient(top, #5d8ebd 0%, #659ecb 100%);

    /* Opera 11.10+ */

    background: -ms-linear-gradient(top, #5d8ebd 0%, #659ecb 100%);

    /* IE10+ */

    background: linear-gradient(to bottom, #5d8ebd 0%, #659ecb 100%);

    /* W3C */

    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#5d8ebd', endColorstr='#659ecb', GradientType=0);

    /* IE6-9 */

}

.accordionContent a {

    display: block;

    position: relative;

    z-index: 999;

}

.accordionContent > * {

    padding: 15px;

    width: 100%;

    height: 100%;

    position: relative;

}

.accordionContent {

    display: block;

    width: 100%;

    height: 100%;

    padding: 0;

    position: relative;

}

.accordionContent > table {

    text-align: center;

    padding: 0;

    font-family:"Open Sans", sans-serif;

    text-shadow: 0px 1px 0px #fff;

    filter: dropshadow(color=#fff, offx=0, offy=1);

}

.accordionContent > table td {

    vertical-align: middle;

    border-right: 2px groove #eee;

    font-size: 12px;

}

.accordionContent > table td {

    padding: 10px 5px;

    font-weight: 400;

}

.accordionContent .itemOverlay {

    position: absolute;

    left: 0;

    bottom: 0;

    width: 100%;

    height: 100%;

    background: transparent !important;

    padding : 0;

    -webkit-box-shadow: inset 0px 0px 10px 0px rgba(0, 0, 0, .45);

    -khtml-box-shadow: inset 0px 0px 10px 0px rgba(0, 0, 0, .45);

    -moz-box-shadow: inset 0px 0px 10px 0px rgba(0, 0, 0, .45);

    -o-box-shadow: inset 0px 0px 10px 0px rgba(0, 0, 0, .45);

    box-shadow: inset 0px 0px 10px 0px rgba(0, 0, 0, .45);

}

.accordionContent > table td span.unavailable {

    font-weight: 200;

}

.accordionContent > table td.last {

    border-right: none;

}

.accordionContent > table tr.tableRow_even {

    background: #eee;

}

.accordionContent > table tr.tableHeader td {

    background: #d2d2d2;

    color: #282828;

    height: 50px;

    font-weight: bold;

    font-size: 12px;

    padding: 0;

}

.accordionContent > table tr.tableHeader td {

}

.accordionContent > table tr.tableHeader td span {

    display: block;

    font-size: 10px;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T01:42:57.827

我不完全确定您要做什么，但是您似乎希望更改表格中单个单元格的高度，我认为这是不可能的。您可以连续更改高度，但不能更改单个单元格。

为此，您可以使用列表、div 甚至其他混合了一些 JS 和 CSS 的 html 容器。

**编辑，解决问题的答案：**

Remove "height: 100%;" from.accordionContent > *

When using percentages in CSS the browser uses the height of the parent instead of the height of the item itself (if I am not mistaken of course), thus combined with overflow:hidden; it would make the last row disrepair.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:18:36.623

Fixed!

Css was the villain.

Removed **height: 100%;** from **.accordionContent** class.

See the working fiddle:

[http://jsfiddle.net/dsQtP/7/](http://jsfiddle.net/dsQtP/7/)

```
.accordionContent {
    display: block;
    width: 100%;
    /* height: 100%; */
    padding: 0;
    position: relative;
} 
```

# c++ - MFC、EndDialog、重复对话框创建导致意外行为

> ID：14391173
> 
> 赞同：0
> 
> 时间：2013-01-18T01:35:03.100
> 
> 标签：c++, windows, winapi, mfc, dialog

我需要根据其大小动态调整对话框窗口。为此，我采用以下技术：

1.  我加载它并从 CDialog::OnInitDialog() 处理程序中获取它的大小。

2.  如果大小太大，我通过调用 CDialog::EndDialog 来结束对话框

3.  然后更新全局变量并通过大小调整再次重新初始化对话框派生类。

发生的情况是，在第二次通过时，一些 API 开始出现奇怪的行为。例如，MessageBox 不显示（因此所有 ASSERT 宏都停止工作）并且某些 SetWindowText API 使应用程序崩溃。知道为什么吗？

以下是代码片段：

```
#define SPECIAL_VALUE -1
//From CWinApp-derived class
BOOL CWinAppDerivedClass::InitInstance()
{
    //...

    for(;;)
    {
        CDialogDerivedClass dlg(&nGlobalCounter);
        m_pMainWnd = &dlg;
        if(dlg.DoModal() != SPECIAL_VALUE)
            break;
    }

    //...
} 
```

然后从对话框类本身：

```
//From CDialogDerivedClass
BOOL CDialogDerivedClass::OnInitDialog()
{
    //The following API shows message box only on the 1st pass, why?
    ::MessageBox(NULL, L"1", L"2", MB_OK);

    //...

    if(checkedDialogSizeIndicatesReload)
    {
        this->EndDialog(SPECIAL_VALUE);
        return FALSE;
    }

    //Continue loading dialog as usual
    ...
} 
```

**编辑：**我偶然注意到，如果我注释掉以下行，它似乎可以工作。知道为什么吗？

```
//m_pMainWnd = &dlg; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:07:02.920

InitDialog 是对话框窗口出现在屏幕上之前处理的最后一条消息 - 您可以检测和调整大小，而不是您正在做的那种时髦的全局变量。

```
if(checkedDialogSizeIndicatesReload)
    {
    // look up SetWindowPos - 
    // I am nt sure if there is another parameter or not that is optional
    int x,y,cx,cy;
    WINDOWPLACEMENT wp;
    GetWindowPlacement(&wp);
    // calc new size here
    SetWindowPos(this,x,y,cx,cy);
    }

// window appears when the message handler returns 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T07:03:05.997

变量在你设置m_pMainWnd的地方还不是一个窗口（只有在返回TRUE`dlg`后才显示对话框）；`OnInitInstance`以下代码应该可以工作：

```
for(;;)
{
    CDialogDerivedClass dlg(&nGlobalCounter);
//  m_pMainWnd = &dlg;
    if(dlg.DoModal() != SPECIAL_VALUE)
        break;
}
m_pMainWnd = &dlg; 
```

# php - 多个且不断增长的出站 CURL 请求

> ID：14391176
> 
> 赞同：1
> 
> 时间：2013-01-18T01:35:26.003
> 
> 标签：php, curl, curl-multi

多出站请求 - 卷曲

这是问题所在，我有几个客户端必须 CURL 出站请求。例如，我目前有 20 个客户，我每分钟向他们每个人发送大约 100~1000 个请求。我也使用 CURL multi 但是它似乎对一次可以发出多少个请求有限制，而且它还取决于整个例程完成的最长 CURL 响应。

例如，我有以下客户：

```
Client 1
url: http://www.exampleclient1.com/process/

Client 2
url: http://www.exampleclient2.com/process/ 
```

... 等等

这里的主要问题是我有一个脚本可以为每个客户完成这项工作。说，

```
http://localhost/app/send/client1
> will send out the pending outbound queue to client 1's url 

http://localhost/app/send/client2 
> will send out the pending outbound queue to client 2's url 
```

... 等等

我将它们分开的原因是因为客户端之间应该有专门的连接，并且它们的延迟彼此不同。一些客户端响应速度更快并且拥有更快的服务器，而一些客户端的服务器速度较慢或需要更多的跃点才能到达。

这是我的问题：有没有办法简化这个过程？因为每次我必须将客户端添加到我的数据库时，我也必须添加

```
http://localhost/send/newclient1 
http://localhost/send/newclient2
.
.
.
http://localhost/send/newclientn 
```

到 cronjobs 列表。是否可以将它放在一个脚本中，以便随着我的客户端列表的增长它不会影响我拥有的出站 CURL 功能的整体性能？

顺便说一句，我正在使用 PHP，CURL。如果有解决方案建议为此使用 PHP 以外的其他技术，Linux 队列管理器...等，欢迎您提出建议。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:17:54.777

我遇到了类似的问题，常见的问题是： - 资源 URL 的不同响应时间（您可以称它们为客户端） - 添加新 URL 的需求一次添加一个或十个。

除了公地，我的其他观察：- - 来自不同服务提供商的 URL， - 具有不同的数据格式 - 他们需要不同类型的请求来满足您的需求。

我回顾了几个 PHP-cURL 库：

*   [本文介绍了](https://stackoverflow.com/questions/10485199/php-parallel-curl-performance-rollingcurl-vs-parallelcurl?rq=1)Rolling-Curl 和 Perallel-Curl 。
*   [PHP-Multi-curl (epiCurl)](https://github.com/jmathai/php-multi-curl)，这个我比较喜欢。
*   多curl-php，[代码示例](http://code.google.com/p/multi-curl-php/source/browse/trunk/multi-curl-test.php)。
*   phpmulticurl，[代码](http://code.google.com/p/phpmulticurl/source/browse/trunk/examples/example.php)示例。
*   还有其他库和类...

现在管理数据库和客户端的发送请求，您至少会了解 RDBMS，如 MySQL 或 SQLite，*其他选项 RDBMS 被考虑*。

*   在 RDBMS 中创建一个包含请求的表，如 { "clientNo" => "URL" }
*   您可以使用 PHPmyAdmin 或任何数据库管理界面添加您的客户端列表。
*   脚本：创建一个脚本，在 foreach 循环中一一获取数据库的整个条目；在 CURL 节点上创建预制件并将处理程序添加到多个 CURl 调用的队列中。
*   测试你的脚本，并将其添加到 cronjob 中。
*   每次添加客户端时，只需使用数据库管理界面将其添加到 RDBMS（MySQL、SQLite）即可。

注意：如果是做外呼管理，就要考虑安全问题，代理；并可能创建用于提交新客户端的 PHP 和 HTML 表单。

# css - 如何使用 CSS 模糊 div 的一侧

> ID：14391178
> 
> 赞同：2
> 
> 时间：2013-01-18T01:35:36.327
> 
> 标签：css, colors

我想让内部 div 的左侧模糊，我的意思是我不想有这么锋利的边缘。但只有左边，右边没问题。知道怎么做吗？

[http://jsfiddle.net/9UaKX/8/](http://jsfiddle.net/9UaKX/8/)

```
.wrapper {
 position: relative;
 width: 300px;
 height: 400px;
  background-color: #d1d571;
}
.aaa {
 background : -moz-linear-gradient(top,  #d1d571,  #a1a561); /* Firefox 3.6+ */
    background : -webkit-gradient(linear, left top, left bottom, from(#F5F5DC), to(#A9A9A9)); /* Safari & Chrome */
    filter : progid:DXImageTransform.Microsoft.gradient(startColorstr='#eeeeee', endColorstr='#888888'); /* IE 5.5 - 7 */
    -ms-filter : "progid:DXImageTransform.Microsoft.gradient(startColorstr=#eeeeee, endColorstr=#888888)"; /* IE 8 */
  position: absolute;
  margin: 40px;
  width: 200px;
  height: 300px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:30:06.403

```
.wrapper {
 position: relative;
 width: 300px;
 height: 400px;
 background-color: #d1d571;
}

.aaa {
 background : -moz-linear-gradient(top,  #d1d571,  #a1a561); /* Firefox 3.6+ */
    background : -webkit-gradient(linear, left top, left bottom, from(#F5F5DC), to(#A9A9A9)); /* Safari & Chrome */
    filter : progid:DXImageTransform.Microsoft.gradient(startColorstr='#eeeeee', endColorstr='#888888'); /* IE 5.5 - 7 */
    -ms-filter : "progid:DXImageTransform.Microsoft.gradient(startColorstr=#eeeeee, endColorstr=#888888)"; /* IE 8 */
  position: absolute;
  display:inline-block;
  margin: 40px;
  width: 200px;
  height: 300px;
}

.aaa:before {
    content: " ";
    display:inline-block;
    position:relative;
    top:-3px;
    margin-left:-3px;
    width:3px; 
    height: 306px;
    background-color: #d1d571;
    -webkit-box-shadow: 0px 0px 3px #d1d571;
     -moz-box-shadow: 0px 0px 3px #d1d571;
    box-shadow: 0px 0px 3px #d1d571;
} 
```

[http://jsfiddle.net/ucm9E/9/](http://jsfiddle.net/ucm9E/9/)

# vb.net - System.Net.WebException：请求失败，HTTP 状态 401：未经授权

> ID：14391182
> 
> 赞同：0
> 
> 时间：2013-01-18T01:35:53.617
> 
> 标签：vb.net, soap, .net-1.1, http-status-code-401, system.net.webexception

好的，所以我有这个 .NET 1.1 应用程序（由某人编写），它就像一个文档存储库，过去它运行良好。尝试搜索项目/文档时突然出现此错误：

页面：/CPDEPforIT/SearchResults.aspx

错误：

> System.Net.WebException：请求失败，HTTP 状态为 401：未经授权。在 System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall) 在 System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) 在 CPDEPforIT.InktomiSearchService .soapSearchService.getSearchResults(SearchInput in0) 在 CPDEPforIT.SearchResults.GetDatasetForSearchQuery(SearchInput searchInput) 在 CPDEPforIT.SearchResults.Page_Load(Object sender, EventArgs e) 在 System.Web.UI.Control.OnLoad(EventArgs e) 在 System.Web。 UI.Control.LoadRecursive() 在 System.Web.UI.Page.ProcessRequestMain()

我不记得有任何变化。这可能是由应用程序外部的某些东西（IIS 配置/权限、服务器、数据库）引起的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T05:04:18.890

您需要验证几件事。

1.  您尝试访问的 Web 服务是否允许匿名访问？网络到网络调用的身份验证可能很棘手
2.  Web 应用程序在什么下运行，IWAM_xxx 或 IUSR_xxx？或者您正在使用以特定身份运行的应用程序池？
3.  您可能希望确保您的 Web 应用程序服务器的 ASPNET 或 NETWORK SERVICE 帐户可以访问您的 Web 服务服务器。

如果你想让它工作，你可以提供一个匿名访问帐户...

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-17T15:39:11.400

我以前也遇到过这类问题。在我的情况下，代码文件夹的权限有效。请检查文件夹权限，然后尝试使用 IIS 权限。

# r - ggplot2：annotation_custom 给出一个空层

> ID：14391183
> 
> 赞同：3
> 
> 时间：2013-01-18T01:36:04.097
> 
> 标签：r, ggplot2

一些测试数据：

```
ltd <- data.frame(r = c(rnorm(10), f1 = c(rep("L", 5), rep("H", 5)),
       f2 = rep(c("A", "B"), 5)) 
```

还有一个最小的功能：

```
tf <- function(formula = NULL, data = NULL) {

res <- as.character(formula[[2]]) # clean & prep data
fac1 <- as.character(formula[[3]][2])
fac2 <- as.character(formula[[3]][3])

counts <- count(data, vars = c(fac2, fac1)) # get table data ready
colnames(counts) <- c(fac2, fac1, "count")
myt <- tableGrob(counts, show.box = TRUE,
    show.rownames = FALSE, show.colnames = TRUE,
    show.csep = TRUE, show.rsep = TRUE,
    separator = "black")

p <- ggplot()
p <- p + geom_point(data = data, 
    aes_string(x = fac1, y = res, color = fac2, group = fac2))      
p <- p + annotation_custom(myt) # comment out and it works
} 
```

运行：

```
require("plyr")
require("gridExtra")
require("ggplot2")
tmp <- tf(formula = r~f1*f2, data = ltd)
print(tmp) 
```

给`Error in if (nrow(layer_data) == 0) return() : argument is of length zero`

如果您打印 tableGrob 它确实存在，所以我不确定这里发生了什么。如果您注释掉`annotation_custom`它的工作原理，我想我正在关注文档。谢谢。(ggplot2_0.9.3)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T06:15:17.170

这是您的问题的解决方案：我将您的位置`data=`和`aes_string`呼叫转移到主要`ggplot`呼叫。我不知道为什么这很重要，但现在情节打印没有错误。

```
p <- ggplot(data=data, aes_string(x=fac1, y=res, color=fac2, group=fac2)) + 
     geom_point() +
     annotation_custom(myt) 
```

![在此处输入图像描述](../Images/6a89bb850b426b96503c4d85464dbb70.png)

# css - CSS：如何为活动链接添加向下箭头

> ID：14391184
> 
> 赞同：0
> 
> 时间：2013-01-18T01:36:15.613
> 
> 标签：css

![在此处输入图像描述][1]我有以下 CSS 导航，它在悬停时添加了一个箭头。

如何为活动或链接添加一个可见的箭头？我也附上了图片

这是我下面的代码

```
<style type="text/css">
#nav {
    margin-top:0;
padding: 12px 0;
margin-left: 0;
background-color: #fafafa;
color: #464646;

    -moz-box-shadow: 0 5px  5px #888;
-webkit-box-shadow: 0 5px  5px #888;
box-shadow: 0 5px 5px #888;
}

#nav li {
    list-style: none;
    display: inline;
    margin: 0px;
    padding: 0;
    padding: 22px;
    padding-right: 0;
    padding-left: 0;
}

#nav li a {
    font-family: Arial;
    font-style:normal;
    text-transform: uppercase;
    text-decoration: none;
    color: #464646;
   padding: .7em 3em;

    border-right: 1px dashed #959595;
}

#nav li a:hover {
    background-color: #fafafa;
color: #005596;
font-weight: bold;
}

#nav li:hover {
    background: transparent url(images/down_arrow2.png) no-repeat scroll center bottom;
    margin: 0;
}

#active a:link, #active a:visited,#active a:hover
{
/* border: 1px solid #333; */
background-color: #fafafa;
color: #005596; 
font-weight:bold;
}

</style> 
```

HTML

```
<ul id="nav">
<li id="active"><a href="home.php">Home</a></li>
<li><a href="photos.php">Photos</a></li>
<li><a href="videos.php">Videos</a></li>

<li><a href="add.php">Add a Restaurant</a></li>
<li><a href="delete.php">Delete a Restaurant</a></li>
<li><a href="logout.php">Logout</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T01:39:27.477

如果是 id，请使用类名：

```
<li class="active"><a href="home.php">Home</a></li> 
```

然后你可以这样做：

```
#nav li.active {
  background: transparent url(images/down_arrow2.png) no-repeat scroll center bottom;
  margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T01:39:02.433

只需将背景图像添加到 css。

```
#active a:link, #active a:visited,#active a:hover
{
/* border: 1px solid #333; */
background-color: #fafafa;
color: #005596; 
font-weight:bold;
background: transparent url(images/down_arrow2.png) no-repeat center bottom;
    margin: 0;
} 
```

# html - 并且似乎有不同的线高，如何绕过它？

> ID：14391185
> 
> 赞同：0
> 
> 时间：2013-01-18T01:36:22.037
> 
> 标签：html, css

 该按钮比具有相同样式的 a 标签大 2px。有什么想法为什么要这样做以及如何解决它？ 

[jsfiddle](http://jsfiddle.net/duSQD/4/)

```
<a href="">Some Text</a>
<button> Some Text</button>

a, button {
  background-color: red;
  border: none;
  text-decoration: none;
  font-size: 14px;
  line-height: 14px;
  font-family: Verdana;
  display: inline-block;
  color:black;
  padding:0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T01:40:26.950

按钮有填充。设置`padding : 0;`在按钮上，它们看起来一样

Firefox 有它自己的东西...尝试添加以下内容：

```
button::-moz-focus-inner { 
    border: 0;
    padding: 0;
} 
```

# macos - EDSDK EdsOpenSession EXC_BAD_ACCESS 信号

> ID：14391193
> 
> 赞同：0
> 
> 时间：2013-01-18T01:37:02.773
> 
> 标签：macos, edsdk, canon-sdk

我相信这类似于线程：[Canon SDK 2.11 on OSX](https://stackoverflow.com/questions/13637670/canon-edsdk-2-11-on-osx-edsopensession-exc-bad-access)

但是那里的解决方案对我不起作用。我很困惑，因为我不确定如何弄清楚发生了什么变化。我有一些工作软件，在假期里没有工作，现在当我打开它工作时它失败了。不仅是我的软件，还有 SDK 中包含的演示应用程序，我从未更改过它，并且确实可以正常工作。

我尝试过使用两种不同的相机（5DmII 和 5DmIII），结果相同。

当我尝试运行应用程序时，相机会被识别，但是当它尝试打开一个会话时，它会收到一个 EXC_BAD_ACCESS 信号。在每个程序中，当使用此消息调用 EdsOpenSession() 时就会发生这种情况......

*** -[NSConcreteData release]：消息发送到已释放实例 0x8157af0

有趣的是，当我尝试使用 EOS Utility 时也会崩溃。所以我更新了，现在效果很好。我按照上面线程中的建议，将 EDSDK.framework 从工作包复制到我的程序并重新编译，但我得到了相同的结果。

我试图弄清楚如何联系佳能以获取一些信息，但他们并不容易获得帮助，所以我正在呼吁我知道的一个响应小组。

我唯一能想到的是，在假期的某个时候，我在不知不觉中更新了一些关键库。

有没有其他人遇到并能够解决这个问题？

我正在运行 OS X 10.7.5、xcode 4.1 和 EDSDK 2.11.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:24:03.257

解决了这个问题。事实证明，它与上述链接的解决方案相同。但是，我缺少的是我还需要将新的 EDSDK.framework 复制到 /Library/Frameworks 中，而不仅仅是在我的源目录中。这可能是因为我没有在 XCode 中正确设置所有内容。

# c# - 在 Windows 窗体中渲染 OxyPlot 图

> ID：14391195
> 
> 赞同：2
> 
> 时间：2013-01-18T01:37:27.687
> 
> 标签：c#, winforms, controls, graphing, oxyplot

我想在我的 Windows 窗体中停靠一个 OxyPlot 图并绘制函数图`y = 2x - 7`。我已经下载了 OxyPlot 并将引用添加到我的项目中。我使用以下代码将绘图添加到我的表单中：

```
public partial class GraphForm : Form
{
    public OxyPlot.WindowsForms.Plot Plot;

    public Graph()
    {
        InitializeComponent();

        Plot = new OxyPlot.WindowsForms.Plot();
        Plot.Model = new PlotModel();
        Plot.Dock = DockStyle.Fill;
        this.Controls.Add(Plot);

        Plot.Model.PlotType = PlotType.XY;
        Plot.Model.Background = OxyColor.FromRgb(255, 255, 255);
        Plot.Model.TextColor = OxyColor.FromRgb(0, 0, 0);
    }
} 
```

使用此代码，我看到了白色背景，控件已创建，但它只是白色背景。我环顾了`OxyPlot.Plot`班上的成员，但找不到一种方法来制定我的方程式。如何在图表中绘制我的方程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T01:45:16.640

您需要添加一些要显示的数据，将其添加到 Models Series 属性中。

线 (X,Y) 图示例。

```
 public Graph()
    {
        InitializeComponent();

        Plot = new OxyPlot.WindowsForms.Plot();
        Plot.Model = new PlotModel();
        Plot.Dock = DockStyle.Fill;
        this.Controls.Add(Plot);

        Plot.Model.PlotType = PlotType.XY;
        Plot.Model.Background = OxyColor.FromRGB(255, 255, 255);
        Plot.Model.TextColor = OxyColor.FromRGB(0, 0, 0);

        // Create Line series
        var s1 = new LineSeries { Title = "LineSeries", StrokeThickness = 1 };
        s1.Points.Add(new DataPoint(2,7));
        s1.Points.Add(new DataPoint(7, 9));
        s1.Points.Add(new DataPoint(9, 4));

        // add Series and Axis to plot model
        Plot.Model.Series.Add(s1);
        Plot.Model.Axes.Add(new LinearAxis(AxisPosition.Bottom, 0.0, 10.0));
        Plot.Model.Axes.Add(new LinearAxis(AxisPosition.Left, 0.0, 10.0));

    } 
```

这个例子：

![在此处输入图像描述](../Images/d25edf4e3bf26a231da71af6d3793bbb.png)

# javascript - 用数组填充复选框列表

> ID：14391197
> 
> 赞同：0
> 
> 时间：2013-01-18T01:38:03.030
> 
> 标签：javascript, user-interface, after-effects

我正在尝试使用由数组填充的列表构建一个简单的界面。我的问题是我不知道如何制作可变数量的“projectList”

我试过以下

```
var win = new Window('palette', 'Character Importer', undefined, {resizeable:true});
var w = buildUI();
w.show();

//build UI
function buildUI(){

     if (win != null) {

        for(i=0; i<lines.length; i++) {

        win.projectList = win.add ("checkbox", undefined, charNames[i]);
        win.projectList.alignment = ['left','center'];

        } 
```

但是 win.projectList 只包含姓氏的值，我知道这是因为我一直在复制它。如何创建新属性？我尝试在 projectList 之后添加一个 [i] ，但没有成功。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T02:19:17.183

试试这个：

```
win.projectList = [];
for (...) {
  var cb = win.add(...);
  win.projectList.push(cb);
} 
```

# python - 字符串中的语法错误

> ID：14391198
> 
> 赞同：1
> 
> 时间：2013-01-18T01:38:05.453
> 
> 标签：python

运行此命令时出现语法错误：

```
class Stats:
    Str = random.randint(3,18)
    Int = random.randint(3,18)
    Wis = random.randint(3,18)
    Char = random.randint(3,18)
    Con = random.randint(3,18)
    print "Type the name of a stat (Str, Int, Wis, Char or Con) to see its value" 
```

它说“关闭”引号是语法错误-因为什么时候出现字符串语法错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T01:40:57.240

你用的是python 3+吗？`print`是 python 3 中的一个函数。

```
class Stats:
    Str = random.randint(3,18)
    Int = random.randint(3,18)
    Wis = random.randint(3,18)
    Char = random.randint(3,18)
    Con = random.randint(3,18)
    print("Type the name of a stat (Str, Int, Wis, Char or Con) to see its value") 
```

# xml - 存储节点的属性值

> ID：14391202
> 
> 赞同：0
> 
> 时间：2013-01-18T01:38:22.560
> 
> 标签：xml, xpath

我有以下 XML

```
<div class="new_select">
  <select id="Schwarzkopf Live Hair Colour1" class="sf_input" name="id[8]">
       <option value="0">Select Schwarzkopf Live Hair Colour</option>
       <option disabled="" value="199">Black #1.0 </option>
</select>
</div> 
```

我想为节点“选择”保存属性值 id (Schwarzkopf Live Hair Colour1)

不记得这个功能了。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T01:54:12.937

如果这是您的整个 XML 文件，那么您可以使用它：

```
/div/select/@id 
```

访问该`id`选择的属性。如果不是，这将找到该属性：

```
//select/@id 
```

但它也会`id`在所有其他 s 上找到属性，`select`如果有其他的话。有没有机会不止一个`select`？有没有办法独特地挑出这个？

# html - z-index 属性如何真正起作用？

> ID：14391208
> 
> 赞同：20
> 
> 时间：2013-01-18T01:39:20.610
> 
> 标签：html, css, z-index

实际效果如何`z-index`？它对没有指定的元素起作用`position`吗？它是否偏爱具有指定的元素（即使它们在顶部）`position`？

数字必须是这样的负数吗？

```
<div style='z-index:-2;'>below</div>
<div style='z-index:-1;'>less below</div>
<div style='z-index:0;'>on top</div> 
```

或不？所有正数（递增值）是否会以最后一个在顶部，中间在中间，第一个在底部？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-18T01:44:12.240

**允许使用负整数和正整数。**

**必须在元素上设置位置。**

不过，在我进入这些细节之前，让我`z-index`从头开始解释。

每个网页都由所谓的堆叠上下文组成。从字面上看，您可以将这些视为一堆元素。z-index 属性决定了每个堆栈中项目的顺序，z-index 越高的位置越靠上。

所有页面都以根堆叠上下文开始，它从根元素构建（如您所料）。但是可以通过多种方式创建更多的堆叠上下文。一种方法是绝对定位的 div；它的孩子将在一个新的堆叠上下文中。

[规范](http://www.w3.org/TR/CSS2/visuren.html#z-index)列出了创建新堆叠上下文的所有实例。正如其他人所说，这包括*显式*定位的元素，并且很快将包括不完全不透明的元素。

正如我之前所说，只有*明确*设置元素的位置`z-index`才会生效。这意味着将其设置为、或。我认为，这最好通过示例来说明。*`fixed``absolute``relative`*

 *[在这个例子](http://jsfiddle.net/gYaVF/)中，考虑到它的 z-index，我们希望蓝色 div 位于灰色 div 之上，对吧？但是，如您所见，它位于底部。这当然是因为我们还没有确定它的位置。[一旦我们这样做，](http://jsfiddle.net/zTR5Q/)它就会按照我们的预期显示。**同样，您必须设置位置**。

规范还告诉我们负值很好。话虽如此，您*不需要*使用负值。使用正整数也很好。元素的默认`z-index`值为 0。

郑重声明，w3schools 是出了名的不可靠的学习资源。虽然它可以是一个快速方便的资源，但他们的信息有很多空白，有时甚至是错误的信息。我建议您使用更可靠的资源，例如[Mozilla Developer Network](https://developer.mozilla.org/en-US/)，以及[规范本身](http://www.w3.org/Style/CSS/Overview.en.html)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-26T20:49:34.897

在我开始解释之前，让我注意`z-index`只有当元素*渲染*`position:relative`了,`position:absolute`或`position:fixed`(NOT ) 的值时才会产生影响，`static`因为它们中的每一个都使它有自己的[堆叠上下文](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context)。这意味着喜欢`initial`或`inherit`可能不工作的值取决于情况。

另请注意，在这篇文章中，我将使用格式 1.1.1 来表示我正在选择第一个元素的第一个子元素的第一个子元素。2.1.1 将是第二个元素的第一个孩子的第一个孩子，依此类推。

* * *

我认为`z-index`最好用子列表进行类比来解释。让我们从最简单的例子开始：

```
<div class="top-level"></div>
<div class="top-level sibling"></div> 
```

我们可以用这样的列表来表示它：

1.  顶层
2.  顶级兄弟姐妹

现在默认情况下，列表下方的那些将呈现在它之前的顶部。所以在这种情况下，2 将位于 1 的顶部。

* * *

z-index 允许我们做的基本上是重新排序这个列表（在一定范围内）。z-index 越高，我们的元素在列表中越靠后。

我将在这里使用内联 CSS 来简化显示，但您*绝对*应该避免在生产代码中使用内联 CSS。

```
<div class="top-level" style="z-index: 1;"></div>
<div class="top-level sibling"></div> 
```

这现在将我们的子列表更改为如下所示：

1.  顶级兄弟姐妹
2.  顶级 - z-index:1

伟大的！现在我们的 HTML 中的第一个元素将呈现在我们的第二个元素之上。

* * *

当我们处理子（嵌套）元素时，这变得更加棘手。

考虑这种情况的一种更简单的方法是认为**当一个元素开始被渲染时，它将在移动到任何兄弟元素之前渲染该元素的所有子元素**。

还要记住，**子列表不能更改级别**，这意味着它们不能与父元素或子元素处于同一级别。

这意味着，如果我们有以下内容：

```
<div class="top-level">
    <div class="sub-level" style="z-index: 1;"></div>
</div>
<div class="top-level sibling"></div> 
```

我们的渲染子列表如下所示：

1.  顶层
    1.  子级别 - z-index1
2.  顶级兄弟姐妹

因此，我们查看我们的顶层并查看列表底部的哪一个。在这种情况下，2.0 是，所以它将在 1.0 之上。然后我们查看它是否有任何子列表（子列表）。它没有，所以我们转到 1.0。

1.0 有一个子 1.1，它在视觉上会高于 1.0（就像我们没有给它一个 z-index 一样），但它仍然会低于 2.0，因为 1.0 低于 2.0。

因此这里的 z-index 对我们没有帮助，因为 1.1 没有任何兄弟姐妹。

* * *

让我们举一个稍微复杂一点的例子：

```
<div class="top-level">
    <div class="sub-level" style="z-index: 2;"></div>
    <div class="sub-level sibling"></div>
    <div class="sub-level sibling" style="z-index: 1;"></div>
</div>
<div class="top-level sibling">
    <div class="sub-level"></div>
</div> 
```

这个例子的子列表是什么？

我会给你，但最好自己尝试和做。

1.  顶层
    1.  子级兄弟
    2.  子级兄弟 - z-index1
    3.  子级别 - z-index2
2.  顶级兄弟姐妹
    1.  子级

因此，就视觉上从上到下的顺序而言，顺序为 2.1、2.0、1.3、1.2。1.1，1.0。

这不是那么糟糕，是吗？

无论有多深或有多少兄弟姐妹，这种行为都是正确的。

* * *

将孩子呈现在父母之上的规则的唯一例外是当孩子有否定的时候`z-index`。当给出负 z-index 时，它会将自身置于父元素之下。

因此，如果我们有以下内容：

```
<div class="top-level">
    <div class="sub-level" style="z-index: -1;"></div>
</div>
<div class="top-level sibling"></div> 
```

子列表树如下所示：

1.  子级别 - z-index-1
    1.  顶层
2.  顶级兄弟姐妹

从上到下的分层将是 2.0、1.0、1.1。

一个稍微复杂一点的例子：

```
<div class="top-level">
    <div class="sub-level" style="z-index: -1;"></div>
    <div class="sub-level sibling"></div>
</div>
<div class="top-level sibling"></div> 
```

列表表示：

1.  子级别 - z-index-1
    1.  顶层
        1.  子级
2.  顶级兄弟姐妹

但是你应该**避免否定`z-index`es**。如果您认为需要它们，则很可能是您的 HTML 结构不正确。

* * *

就是这样！如果您仍然有兴趣了解更多信息，阅读[规格](http://www.w3.org/TR/CSS2/visuren.html#z-index)总是好的。

请记住，[其他属性](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context)，包括但不限于`opacity`、`transform`和`will-change`，会创建自己的堆叠上下文，并且可能会影响元素的呈现顺序。

* * *

[`opacity`与 z-index 的工作方式类似 - 子级只能与其父级一样不透明 - 但它不能有负值。]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-13T09:17:57.323

子元素呈现在父元素之上的规则的唯一例外是子元素的 z-index 为负值。当给出负 z-index 时，它会将自身置于父元素之下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T01:41:33.160

css 属性`z-index`仅适用于定位元素，这意味着元素必须是绝对位置、固定位置或相对位置才能使`z-index`属性生效。

z-index 越高，它就越靠近前面。为属性指定的值`z-index`可以是正值或负值。值为 4 的定位元素`z-index`将出现在`z-index`值为 3 的定位元素上方。

> 在 CSS 2.1 中，每个框在三个维度上都有一个位置。除了它们的水平和垂直位置之外，盒子还沿着“z 轴”放置，并且被格式化为一个在另一个之上。当框在视觉上重叠时，Z 轴位置特别重要。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-18T01:42:06.890

[z-index 上的这篇文章](http://coding.smashingmagazine.com/2009/09/15/the-z-index-css-property-a-comprehensive-look/)正是您要寻找的链接！他真的解释得很好。

基本上，数字越高，元素在堆栈中的位置就越高。所以 1 在 0 之上，-1 在 0 的 z-index 之下，但是它们应该保持正数，因为没有理由使用负数；这被认为是不好的做法。浏览器在呈现页面时会解释它，就像任何其他 CSS 或 HTML 代码一样。*

# algorithm - 找到必须添加以使二叉树平衡的最小节点数？

> ID：14391209
> 
> 赞同：2
> 
> 时间：2013-01-18T01:39:21.047
> 
> 标签：algorithm, data-structures, binary-search-tree, balance

假设给定一棵任意二叉树。如果所有节点都满足以下条件，我们将称树*平衡：*

1.  该节点是叶子，或者
2.  左子树的高度和右子树的高度最多相差±1，左右子树本身是平衡的。

是否有一种有效的算法来确定需要添加到树中以使其平衡的最小节点数？为简单起见，我们假设节点只能作为叶节点插入（就像将节点插入到不进行重新平衡的二叉搜索树中的方式一样）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T04:11:00.803

以下树符合您的定义，尽管它对我来说似乎不是很平衡：

![深度 5](../Images/830e3232971b69196d8915555a779442.png)

**编辑**这个答案是错误的，但它有足够有趣的东西，我不想删除它。该算法产生一棵平衡树，但不是最小的。它添加的节点数为：

![](../Images/953828cab639bc7b2195660ed2059b6f.png)

其中`n`范围在树中的所有节点上，`lower(n)`是深度`n`较低的孩子的深度，`upper(n)`是深度较高的孩子的`n`深度。`k`利用第一个斐波那契数的和是 的事实`fib(k+2)-1`，我们可以用 替换内部和`fib(upper(n)) - fib(lower(n) + 2)`。

该公式（或多或少）源自以下算法，用于将节点添加到树中，使其平衡（在python中，仅显示相关算法）：

```
def balance(tree, label):
  if tree is None:
    return (None, 0)
  left, left_height = balance(tree.left_child, label)
  right, right_height = balance(tree.right_child, label)
  while left_height < right_height - 1:
    left = Node(label(), left, balanced_tree(left_height - 1, label))
    left_height += 1
  while right_height < left_height - 1:
    right = Node(label(), right, balanced_tree(right_height - 1, label))
    right_height += 1
  return (Node(tree.label, left, right), max(left_height, right_height) + 1)

def balanced_tree(depth, label):
  if depth <= 0:
    return None
  else:
    return Node(label(),
                balanced_tree(depth - 1, label),
                balanced_tree(depth - 2, label)) 
```

根据要求：报告计数而不是创建树：

```
def balance(tree):
  if tree is None:
    return (0, 0)
  left, left_height = balance(tree.left_child)
  right, right_height = balance(tree.right_child)
  while left_height < right_height - 1:
    left += balanced_tree(left_height - 1) + 1
    left_height += 1
  while right_height < left_height - 1:
    right += balanced_tree(right_height - 1) + 1
    right_height += 1
  return (left + right, max(left_height, right_height) + 1)

def balanced_tree(depth):
  if depth <= 0:
    return 0
  else:
    return (1 + balanced_tree(depth - 1)
              + balanced_tree(depth - 2)) 
```

*编辑*：实际上，我认为除了更有效地计算深度为 n 的最小平衡树的大小（即记忆它，或使用封闭形式：它只是`fibonacci(n+1)-1`）之外，这可能是你能得到的最有效的，因为你必须检查树中的每个节点以测试平衡条件，并且该算法精确地查看每个节点一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T02:14:25.707

这行得通吗？

从顶部递归。如果节点 A 不平衡，则在短边添加节点 B，并在节点 B 中添加足够的左侧节点，直到节点 A 平衡。

（当然，计算添加的节点。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-30T15:36:51.223

首先让我们找到每个节点的左孩子和右孩子的高度。

现在考虑树的根，它的高度是

> `**1+max(height(root.left) , height(root.right))**`.

让我们假设左边的高度为 n-1，那么右边的最小高度应为 n-2。让我们在这里定义另一个关系*req[node] -> 每个节点的最小所需高度以使树平衡*。

如果您观察到一个节点的高度`h`，它的一个孩子应该至少在 n-1 并且为了使其平衡，其他孩子应该至少是 n-2。

从根开始*req[root] = 根的高度*

伪代码是：

```
 def chk_nodes(root, req):

      if(root == NULL):
        return minNodes(req)

      if(left[root] > right[root]):
       return chk_nodes(root.left  , req-1) + chk_nodes(root.right , req-2)

      else return chk_nodes(root.left , req-2) + chk_nodes(root.right , req-1) 
```

现在什么是 minNodes(int req)？

它是一个返回*'创建高度为 h 的平衡二叉树所需的最小节点数'*的函数。该功能非常直观且不言自明。

```
 def minNodes(int req) :
          if req < 0 : return 0
          return 1 + minNodes(req-1) + minNodes(req-2) 
```

在 minNodes 函数中，可以使用查找表使其查找时间为 O(1)，构建时间为 O(N)。

当 chk_nodes 函数递归运行时，在叶节点处，我们将剩下 left-node ， req 。如果那个 req > 0 那么应该有一个高度 req 的新子树（平衡）。因此，在这个特定的叶节点处需要 minNodes( req )。

只需 2 次遍历和`O(N)`时间，`O(N)`空间问题就解决了。

# iphone - 如何以编程方式在 iOS / iPad 上启动隐藏的应用程序？

> ID：14391214
> 
> 赞同：4
> 
> 时间：2013-01-18T01:39:45.887
> 
> 标签：iphone, ios, ipad, iphone-privateapi, lte

如何在非越狱设备上运行“隐藏”应用程序？

FieldTest 应用程序是 ios 设备上的隐藏应用程序，可以通过在 iPhone 手机应用程序键盘上键入一系列键来启动。我想在 iPad 上运行 FieldTest，但 iPad 没有手机应用程序/键盘。在旧版本的 IOS 中，可以在 Safari 中通过 5 指滑动来运行它，但它不再起作用。

如何在 iPad 上运行 FieldTest 应用程序（甚至以编程方式）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:45:23.040

可以在非越狱的 ios 设备上安装没有图标的应用程序，但您不能在后台运行它。而且这个应用程序不能通过 Appstore 分发。

# php - 适当的缓存 - 如何保存查询的结果数量？

> ID：14391216
> 
> 赞同：2
> 
> 时间：2013-01-18T01:40:04.050
> 
> 标签：php, mysql, database

假设我有三个规范化表，一个用于线程，一个用于注释，一个用于连接两者。

我想显示线程中的评论数量，这涉及到查找属于某个线程的每条评论。

显然，我不想每次显示页面时都执行此查询，因此我需要将评论数缓存到一个线程。我的两个选择（如我所见）是：

1.  在线程表中添加 number_comments 行，并在添加/删除评论时更新它。

2.  将值缓存在内存中，方法是告诉 mysql 缓存它或使用 APC / memchached 之类的东西

每个的优点/缺点是什么？

我认为第一个很简单，性能稍差，但是您有冗余，并且存储比内存便宜很多，尽管它确实用“动态”、不断变化的值弄乱了数据库（另请注意，我会需要为评论保存“upvotes”，所以这个问题适用于多个“动态”值）。

第二个是更好的性能，但它引入了一项新技术，你必须配合它来缓存事物的数量。

这个项目的用户数量相对较少，但我想知道哪个比访问量大的网站更可取（例如，facebook 如何存储评论数量[我猜是数据库和内存中的]）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:54:38.540

请记住 Donald Knuth 的这句话：

> 过早的优化是万恶之源。

我认为在这种情况下，缓存或“数据库非规范化”是一个完全有效的选择，但当“正常”方法不再适用时，最好考虑这种选择。

您说您“显然”不想运行额外的查询来获取每个页面视图的评论计数，但实际上并不是那么明显。如果您的数据库配置正确，您应该已经`thread_id`在评论表中的字段上有一个索引（或者您碰巧调用该字段的任何内容）。运行基于索引字段的查询，特别是当查询仅返回生成的`COUNT()`字段而不是大量线程列表时，实际上并没有太多开销。我认为只运行该查询并完成它会更容易。

也就是说，当性能需要时，对数据库进行非规范化是有价值的。在这种情况下，我会`comments_count`在线程表中添加一个字段，每当从表中添加或删除新记录时，该字段就会递增。您需要记住在您的`INSERT`和`DELETE`查询周围添加额外的代码，并且可能还添加到`UPDATE`查询中，这取决于您的`comments`表是否跟踪活动/已删除状态。

同样，在大多数情况下，这是一个过早的优化。您需要问自己的问题是，“这个站点是否如此繁忙/负载如此之重，以至于管理计算字段所增加的复杂性比仅运行快速`COUNT()`查询成本更低？” 如果是这样，那么一定要选择非规范化路线，但它可能不应该是您选择的第一个选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:00:43.717

我认为添加 number_comments 字段不是要走的路。一方面，保持最新是一件痛苦的事情，并且需要额外的代码。它还为您的数据库增加了冗余。

这给我们留下了两个选择。您可以在页面顶部执行查询，获取每个 id 的计数（这应该在一个查询中是可能的 - 而不是每个线程一个）。这很简单，不应该太慢。

如果您确定性能是/将是一个问题并且这是瓶颈，那么 APC 和 Memcache 都是不错的选择。虽然这确实添加了一项新技术，但在 PHP 中设置它非常简单，这意味着将来缓存其他项目更简单。

# ruby-on-rails-3.2 - Rails 教程；Rails 环境

> ID：14391217
> 
> 赞同：0
> 
> 时间：2013-01-18T01:40:08.693
> 
> 标签：ruby-on-rails-3.2, railstutorial.org

我正在学习 Hartl 的 Ruby on Rails 教程，偶然发现了一个与开发和测试环境的运行方式不同有关的问题。

简单地说，两个环境不同步。开发环境似乎正常工作，但正在进行的一些更改并未传播到测试环境。

例如，在 application.html.erb 中进行编辑将导致在测试环境中复制该更改。但是，对 _header.html.erb 进行更改不会。这就是我注意到问题的方式 - 测试是否存在指向标题的新链接失败，而我在浏览器中（在开发环境中）盯着它们。

在试图解决这个问题时，我发现了另一个怪癖：如果我在测试环境中使用 运行本地服务器`rails server --environment test`，并启动浏览器，应用程序仍然是“固定的”。我的意思是，对应用程序代码或 HTML/CSS 文件所做的任何更改都不会在浏览器中复制。为了查看任何更改，必须关闭本地服务器，然后重新打开。然后，这会加载测试环境，其中包含可见的更改。

这两个环境数据库是相同的（我已经运行`rake db:migrate`并`rake db:test:prepare`在整个教程中添加迁移，并通过 sqlite 3 查看器确认数据库是相同的）。

我想这个问题源于我对 Rails 环境的一些基本误解 - 任何帮助将不胜感激。

为了完整起见，当我第一次注意到这个问题时，我正在完成第 8 章（添加登录/注销身份验证）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:12:59.060

通常，生产环境中的 rails 不提供静态文件（例如 HTML 和 CSS），如果你想这样做你应该在 production.rb 中这样说：

```
 config.serve_static_assets = true 
```

但是，如果您运行生产，您应该使用 Apache 或 NginX 等网络服务器运行它，在这种情况下，它们负责提供静态文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T02:17:31.690

您注意到不同环境有不同的行为是正确的。**只有开发环境会在每次浏览器请求时重新加载应用程序。**测试和生产环境基本上缓存了 app 目录中的所有内容（参见[这个 SO 答案](https://stackoverflow.com/a/2757349/1042144)）——**基本上，它们只记得服务器启动时的代码版本。**这样做是为了提高性能和/或减少波动性。表现是有道理的，但波动性可能需要更多解释。

假设您同时运行测试和编辑代码。测试将运行您运行测试之前的代码版本，而不是您之后所做的任何更改。在测试期间重新加载资产就像在高速公路上拆开一辆时速 60 公里的汽车。根据你要拆开的东西，它可能会产生很多意想不到的后果。可能不是灾难性的，但至少可能会危及运行测试。

如果您的问题是您的测试失败，因为它们没有针对最新版本的代码运行，那么您可能会遇到缓存问题 - 特别是如果您使用的是 spork，这是我上次看到的 Hartl 的 Rails 教程推荐的。您可能需要简单地重新启动 spork。

# class - 如何使用 mootools onclick 更改 ul 中的类

> ID：14391220
> 
> 赞同：1
> 
> 时间：2013-01-18T01:40:38.120
> 
> 标签：class, onclick, mootools

我正在使用 mootools 来执行此操作：我有一个看起来像这样的 ul

```
<ul>
    <li><a class="option">TEXT</a></li>
    <li><a class="option">TEXT</a></li
    <li><a class="option">TEXT</a></li>
    <li><a class="option">TEXT</a></li>
</ul> 
```

我希望在将 li 从“选项”单击为“选项选择”时更改类，我当前的代码如下所示

```
$$('li.option').addEvent('click', function(el){
    this.toggleClass('option-selected');
}); 
```

这确实有效，但我的问题是如何在点击事件中让其他 li 类恢复为类选项并将当前点击的 li 类设置为选项选中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:23:14.283

```
(function () {
    var list = document.id('menu'),
        os = 'option-selected';

    menu.addEvent('click:relay(li .option)', function (e, el) {
        e.preventDefault();
        menu.getElements('.' + os).removeClass(os);
        el.addClass(os);
    });
}()); 
```

可以在这里玩/调整它。[http://jsfiddle.net/dimitar/nYEkj/](http://jsfiddle.net/dimitar/nYEkj/)

它锚定到 ul 元素，仅通过事件委托将 1 个事件附加到该元素。取决于您的策略是什么-将类添加到 li 或添加到 As

# jquery - 单击图标以打开和关闭工具提示

> ID：14391222
> 
> 赞同：0
> 
> 时间：2013-01-18T01:40:59.637
> 
> 标签：jquery

我试图弄清楚如何通过单击图标以及关闭它来打开工具提示。我一直在看这里的一些讨论，但似乎没有一个对我有用。这是我到目前为止所拥有的：

**HTML**

```
<span class="info">
  <img alt="aImage" src="images/aImage.png" />
  <span style="display: none;" class="stuff">something something</span>
</span> 
```

**Javascript**

```
$(document).ready(function(){
  $(".info").tooltip({tooltipcontentclass:"stuff"})
}); 
```

为此，当然，这只会在鼠标悬停在它上面时显示工具提示，如果你将它悬停它会关闭它。我知道这并不多，但这是我能在这里做的最好的事情。请让我知道是否有通过单击打开和关闭它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:20:30.973

我认为您甚至不需要为此使用插件。一点 CSS 和 jQuery 就足够了：

```
$(function(){

  $(".info").click(function(){
    var left = $("img",this).offset().left + ($("img",this).width()/2) - ($(".tip", this).width()/2);
    $(".tip", this).toggle().css({"left":left});

  });

}); 
```

示例：http: [//jsfiddle.net/NPXaf/](http://jsfiddle.net/NPXaf/)

# rest - 用于可能是 LIKE 搜索的查询参数的 REST 模式

> ID：14391227
> 
> 赞同：1
> 
> 时间：2013-01-18T01:42:03.367
> 
> 标签：rest

嗨，我正在构建一个 RESTful 应用程序，但找不到推荐的方式来对可选的模糊或 LIKE 查询进行模式化。例如，一个严格的查询可能是，

```
/place?city=New+York&state=NY 
```

对应于 SQL "... WHERE city="New York" AND state="NY"

但是，如果我想在城市字段中搜索城市名称中带有“York”的任何行怎么办？

"... WHERE city LIKE "%{parameter}%" AND state="{parameter2}"

我正在考虑向请求中添加某种 url-valid 字符，如下所示：

```
/place?city=*York*&state=NY 
```

我应该使用已建立或推荐的模式吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T02:08:26.223

使用查询字符串进行搜索很好，但使用“*”或“？”等宏字符有点奇怪。在查询字符串中（除非您决定构建一个真正强大的搜索引擎，例如 Google）。更重要的是，默认情况下搜索通常被认为是模糊模式，因此用“*”附加/前置关键字是多余的。如果您确实需要精确搜索，您可以用双引号将精确（或严格）关键字括起来。即，`/place?city=*York*&state=NY`我建议不要使用`/place?city=York&state="NY"`.

事实上，谷歌使用引号来搜索一个确切的词或一组词，我也发现[这个网站](http://webhelp.esri.com/geoportal_extension/9.3.1/index.htm#rest_details.htm)采用了这种模式。

# c# - 如果要写入局部变量（在第一次读取之前），是否需要初始化它们？

> ID：14391229
> 
> 赞同：-1
> 
> 时间：2013-01-18T01:42:12.863
> 
> 标签：c#

我看到了很多具有以下结构的代码：

```
public void Blah()
{
    int a = 0;
    string b = "";
    DateTime c = DateTime.MinValue;
    bool d = false;
    // ...More initializations with dummy values

    // Overwrite the values in a, b, c, d, e.g. a = ReturnInt();

    // Do calculations, reading the values from a, b, c, d, like DoCalculations(a);
} 
```

一般来说，我更喜欢这样的东西：

```
public void Blah()
{
    int a = GetInt();
    string b = GetString();
    DateTime c = GetDateTime();
    bool d = GetBool();

    // Do calculations, reading the values from a, b, c, d, like DoCalculations(a);
} 
```

这真的有必要吗？由于额外的初始化，是否会影响性能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T01:44:17.250

变量应该在使用前初始化，`read`如果你要在初始化后立即覆盖它，**最好遵循**你展示的第二种风格，主要是为了**可读性**，我预计性能会受到影响（来自风格＃1）如果any 通常是最小的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T02:43:13.927

初始化变量是许多开发人员使用的通用标准。

初始化变量是因为根据语言和环境，读取未初始化的变量可能会产生未定义的行为。而且由于变量可能自动初始化或不自动初始化的确切条件很难记住，人们往往总是在使用对象之前简单地*初始化*它们。

通常认为在构造函数中执行此初始化是一种好习惯。

**在 Scott Meyers 非常受欢迎的书Effective C++**中也特别提到了这一点。

*   **第 4 项：确保在使用对象之前对其进行初始化。**

# c# - 在 C# 中将 varbinary 转换为 DateTime

> ID：14391233
> 
> 赞同：-1
> 
> 时间：2013-01-18T01:42:32.257
> 
> 标签：c#, datetime, type-conversion, varbinary

我在 SQL Server 表中有一个日期时间列。我们需要对其进行加密。因此，我将其转换为 SSMS 中的 varbinary。我只是编辑了表格，将日期时间类型设置为 varbinary 并让 SQL Server 转换它。之后，我编写了一次性的 C# 代码将其提取出来、加密（使用我们中间层的加密算法）并将其推回数据库。对名称和其他字符串类型的一些 nvarchars 做了同样的事情。

当我提取加密数据（使用 NHibernate）时，我将 varbinary 提取到一个 byte[] 中并对其进行解密。然后我尝试将其转换回原始值。

nvarchar-as-varbinary 列转换得很好；例如，我得到了可能的名字。

```
return Encoding.Unicode.GetString(source.FirstName); 
```

但是，我很难将日期转换回其原始形式。我正在使用：

```
long ticks = BitConverter.ToInt64(source.DateOfBirth, 0);
return new DateTime?(new DateTime(1980, 1, 1).AddMilliseconds(ticks)); 
```

这似乎没有正确返回日期。将其转换回 DateTime 的正确方法是什么？

更新：请求了样本值。最初是 1901 年 1 月 1 日的日期时间在解密时会产生一个 byte[]，其中 byte[2]=1 和 byte[3]=109，而所有其他的都是 0。另一个日期时间 '1941-04-26' 产生byte[2]=58 和 byte[3]=242 解密。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:07:58.050

日期存储为自 1900-01-01 以来的天数。

例子：

```
byte[] data = {0,0,58,242};

if (BitConverter.IsLittleEndian) {
  Array.Reverse(data);
}
int days = BitConverter.ToInt32(data, 0);
DateTime date = new DateTime(1900, 1, 1).AddDays(days);

Console.WriteLine(date); 
```

输出：

```
1941-04-26 00:00:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:17:04.310

```
Int64 ticks = BitConverter.ToInt64(source.DateOfBirth, 0);
DateTime dt = DateTime.FromBinary(ticks); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T04:02:26.857

解密 varbinary 数据后，能否获取字符串值并通过 SSMS 运行？就像是：

```
SELECT CONVERT(datetime, 0x0000A149016D7FD9) 
```

您的 varbinary 数据在 SQL Server 中是什么样的？我怀疑有些东西在翻译中搞砸了。

祝你好运。

# svn - 锁定SVN标签的方法

> ID：14391241
> 
> 赞同：1
> 
> 时间：2013-01-18T01:43:02.927
> 
> 标签：svn, tags, locking

我想在将存储库中的特定标签发送到测试后立即锁定`SVN`它们。似乎该`svn lock`命令仅适用于单个文件，因此这还不够，因为即使递归锁定目录中的文件也会使目录根目录打开以进行文件提交。使用`SVN`访问文件也不合适，因为标签名称将是动态的，并且我将在同一标签/目录中混合可访问和不可访问的标签；我需要指定一个我可能事先不知道名称的单个标签。当我想锁定一个代码库时，我也不能在这个阶段简单地改变我的策略和分支；它必须是标签上的锁。

似乎没有很多支持将特定标签/目录锁定在`SVN`; 实现这些锁的标准方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T02:37:04.803

*   RO 对于每个人，使用基于路径的身份验证，似乎是最合乎逻辑的方式
*   如果你不想要它 - 使用 pre-commit 钩子，如果钩子在受保护的标签中从事务中找到至少一个文件，它会拒绝提交。钩子会像`svnlook changed | grep PATH`

# html - 网页在 Chrome、Firefox、Safari、Not IE 中显示

> ID：14391242
> 
> 赞同：-1
> 
> 时间：2013-01-18T01:43:31.403
> 
> 标签：html, css, internet-explorer

也许有人可以找到问题所在。我已经尝试了我所知道的一切。如果之前已解决此问题，我深表歉意。我发现了类似的线程，但没有一个专门解决这个问题。

如果您使用 Chrome、Firefox 甚至 Safari 访问[hiredimensions.net](http://hiredimensions.net)，它将正常显示。但是，在 IE（任何版本）中并非如此。似乎它不会解析页面中部和下部的 CSS 背景元素。本网站已通过 W3C 审核，100% 合规；没有错误。

如果您有任何建议或需要查看 CSS，请告诉我。我坚持这个。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T02:02:45.493

这对我来说在 IE9 中运行良好，但我不得不将文档模式更改为 IE9 版本。我认为这也适用于 IE10，但我无法确认。

我认为问题在于您使用的是 HTML5，但看起来您并没有做任何事情来支持旧版浏览器。如果您在 IE8 或更低版本中检查标记，则带有 content-bottom ID 的 section 元素为空；与文章相同。例如，如果您在 Chrome 中检查相同的元素，情况并非如此，您会看到文章（和 div）位于 section 元素中。

编辑：查看此链接，[http://bit.ly/11D3Dyg](http://bit.ly/11D3Dyg)；它有一些可能会有所帮助的选项。也像 bažmegakapa 所说，尝试使用不同的元标记来尝试强制使用最新的渲染模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:52:04.063

它适用于我，即 10。按 f12 并转到网络选项卡。重新加载页面，您将看到没有 /js/HTML5.js 文件。

我也在ie 7-9 中尝试过，没有问题。

# javascript - javascript的禁止错误

> ID：14391245
> 
> 赞同：0
> 
> 时间：2013-01-18T01:43:50.010
> 
> 标签：javascript, html

出于某种原因，我们收到“服务器响应不是“200 OK” 任何人都可以帮助解释错误和可能的解决方案吗？

链接：[https ://portal.casa.gov.au/erec/](https://portal.casa.gov.au/erec/)

```
Server response was not a '200 OK'.
Client Request Details
POST /erectest/servlet/repos/run/aw001_repository.op004_about

params=<?xml version="1.0" ?><PARAMS_IN> <PARAM><ARGNAME>component</ARGNAME><ARGVALUE><![CDATA[undefined]]></ARGVALUE></PARAM> <PARAM><ARGNAME>operation</ARGNAME><ARGVALUE><![CDATA[undefined]]></ARGVALUE></PARAM> <PARAM><ARGNAME>dtd</ARGNAME><ARGVALUE><![CDATA[undefined]]></ARGVALUE></PARAM> </PARAMS_IN>
Server Response Details
403 Forbidden
Cache-Control: no-cache
Pragma: no-cache
Content-Type: text/html; charset=utf-8
Proxy-Connection: Keep-Alive
Connection: Keep-Alive
Content-Length: 778

<HTML><HEAD> <TITLE>Invalid Webpage</TITLE> </HEAD> <BODY> <FONT face="Helvetica"> <big><strong></strong></big><BR> </FONT> <blockquote> <TABLE border=0 cellPadding=1 width="80%"> <TR><TD> <FONT face="Helvetica"> <big>Invalid Webpage (policy_denied)</big> <BR> <BR> </FONT> </TD></TR> <TR><TD> <FONT face="Helvetica"> <p><b>That page does not exist</b></p><p>I'm sorry, you tried to reach a page that is not on the site.</p> </FONT> </TD></TR> <TR><TD> <FONT face="Helvetica"> Please return to the CASA website and navigate from there. </FONT> </TD></TR> <TR><TD> <FONT face="Helvetica" SIZE=2> <BR> For assistance, please contact the CASA IT Support at ICTSupport@casa.gov.au </FONT> </TD></TR> </TABLE> </blockquote> </FONT> </BODY></HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T01:59:51.503

您有一个 403 Forbidden 错误，这意味着您没有被授权/验证来查看该页面。

# python - 二元与运算符的解释

> ID：14391250
> 
> 赞同：0
> 
> 时间：2013-01-18T01:44:39.367
> 
> 标签：python, bitwise-operators

有人可以解释按位、二进制与运算符（ & ）的用途以及如何使用它吗？我正在研究制作`isprime`函数的不同方法并遇到了这个问题。

```
def isprime(n):
    # make sure n is a positive integer
    n = abs(int(n))
    # 0 and 1 are not primes
    if n < 2:
        return False
    # 2 is the only even prime number
    if n == 2: 
        return True    
    # all other even numbers are not primes
    if not n & 1: 
        return False
    # range starts with 3 and only needs to go up the squareroot of n
    # for all odd numbers (counts by 2's)
    for x in range(3, int(n**0.5)+1, 2):
        if n % x == 0:
            return False
    return True 
```

我还查看了[Python 位运算符示例](http://www.tutorialspoint.com/python/bitwise_operators_example.htm)，但无法掌握。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T01:47:12.113

一个数字和另一个数字是一个数字的位被另一个数字的位屏蔽。如果一个数字 AND 1 为 0（`not n & 1`将是`True`），这意味着它可以被 2 整除，因为 2 的所有倍数都有一个 0 作为最右边的二进制数字。

```
 11 = 00001011 (Not divisible by 2)      28 = 00011100 (Divisible by 2)
&  1 = 00000001                         &  1 = 00000001
---------------                         ---------------
       00000001                                00000000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T01:52:40.457

例如，

12 & 7 = 1100 & 0111 = 0100 = 4

对于 isPrime 函数，第一个条件检查它是 0 还是 1。第二个条件检查它是否是 2。第三个条件然后检查 if (n&1)，即检查数字是否为偶数。每个偶数在转换为二进制形式时的最后一位都是 0。例如，

14 & 1 = 1110 & 0001 = 0

14 被证明是偶数，因此不再是素数。

# android - 光标未正确初始化

> ID：14391251
> 
> 赞同：1
> 
> 时间：2013-01-18T01:45:07.673
> 
> 标签：android, sqlite, cursor, android-cursor

尝试检索本地数据库上表的所有条目时出现此错误：

**java.lang.RuntimeException：无法启动活动 ComponentInfo{com.example.contactappca2/com.example.contactappca2.ViewActivity}：java.lang.IllegalStateException：无法从 CursorWindow 读取第 0 行第 0 列。确保在从光标访问数据之前正确初始化光标。**

**原因：java.lang.IllegalStateException：无法从 CursorWindow 读取第 0 行第 0 列。确保在从光标访问数据之前正确初始化光标。**

这是我在 DbAdapter 类中检索条目的方法：

```
public List<Contact>getAllContacts(){
    contacts = new ArrayList<Contact>();
    cursor = db.query(TABLE_NAME, new String [] {COLUMN_NAME, COLUMN_NUMBER, COLUMN_EMAIL, COLUMN_IMG}, null,null,null,null,null);
    if(cursor.moveToFirst()){
        do{
            c = new Contact();
            c.setName(cursor.getString(0), null);
            c.setNumber(cursor.getString(1));
            c.setEmail(cursor.getString(2));
            byte [] blob = cursor.getBlob(cursor.getColumnIndex(COLUMN_IMG));
            ByteArrayInputStream inputStream = new ByteArrayInputStream(blob);
            Bitmap b = BitmapFactory.decodeStream(inputStream); 
            c.setPicture(b);
            contacts.add(c);
        }while(cursor.moveToNext());
    }

    return contacts;
} 
```

知道我做错了什么吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T03:00:07.300

要做的一件事是确保`Cursors`在你做这个之前你的另一个是关闭的（为了释放内存）。

但是，如果您尝试将内容分块取出，您会看到更好的结果，这与无休止地加载列表视图或类似内容的效果非常相似。

但我真的不得不说，如果我一开始就遇到这样的问题，我会放弃使用`SQLite`这样的完整物体的想法。更好的办法是将这些图像存储在 sd 卡或本地内存中，并且仅将图像位置或至少名称保存在数据库中，然后以这种方式管理您的内容。

# ios - 应用程序不会在 iOS 6 上的 iPad 模拟器中进入下一个视图

> ID：14391255
> 
> 赞同：0
> 
> 时间：2013-01-18T01:45:20.903
> 
> 标签：ios, object

我有一个较旧的 iOS 应用程序，它有 2 个视图，一个 MainViewController 和一个 FlipsideViewController。出于某种原因，当我按下从 MainViewController 切换到 FlipsideViewController 的按钮时，应用程序只是冻结，并且日志显示没有崩溃。这只发生在装有 iOS 6 的 iPad 模拟器上。该应用程序在装有 iOS 6 的 iPhone 模拟器上运行良好。

这是我在 MainViewController 中用来切换到另一个的代码：

```
FlipsideViewController *controller;
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    controller = [[FlipsideViewController alloc] initWithNibName:@"FlipsideView-iPad" bundle:nil];
} else {
    controller = [[FlipsideViewController alloc] initWithNibName:@"FlipsideView" bundle:nil];
}
controller.delegate = self;
controller.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:controller animated:YES];

[controller release]; 
```

如果我在 FlipsideViewController 的 viewDidLoad 顶部放置一个 NSLog() 语句，它会输出到调试日志。但从未显示视图。

还应该注意的是，FlipsideViewController 确实包含 MPMusicPlayerController 代码，但是这一行已被注释掉，因为它通常会导致模拟器出现问题：

```
self.musicPlayer = [MPMusicPlayerController iPodMusicPlayer]; 
```

有任何想法吗？谢谢！

# python - Python：附加到列表

> ID：14391262
> 
> 赞同：0
> 
> 时间：2013-01-18T01:46:50.470
> 
> 标签：python, list, python-2.7

我正在开发一个定义测试器（你输入单词、他们的词性和每个单词的同义词，它会测试你）。我遇到的问题是得到这个词的部分：

```
 def get_word(): # this is in another function, that's why it is indented
      import easygui as eg
      word_info = eg.multenterbox(msg = 'Enter in the following information about each word.'
                                , title = 'Definition Tester'
                                , fields = ['Word: ', 'Part of Speech: ', 'Synonyms (separated by spaces): ']
                                , values = []
                                )
      return word_info
   for i in range(n):
      my_list = get_word()
      print my_list # for testing
      word, pOS, synonyms = my_list[0], my_list[1], my_list[2]
      word = word.capitalize()
      synonyms = synonyms.split(', ')
      words_list += word
      print word # for testing
      test_dict[word] = [pOS, synonyms]
   print words_list # for testing 
```

但是，`words_list`在函数应用于它们之后最终成为单词`list(word)`---我不知道为什么。

例如：如果唯一的单词是 'word'，`words_list`结果是`['w', 'o', 'r', 'd']`. 如果有两个词（“狗”、“猫”），`words_list`结果是`['d', 'o', 'g', 'c', 'a', 't']`。这是我的输入（输入`get_word()`）：单词：'myword'，词性：'n'，同义词：'同义词，定义'。

这是我得到的输出：

```
['myword', 'n', 'synonym, definition']
Myword
['M', 'y', 'w', 'o', 'r', 'd'] # Why does this happen? 
```

这是我的程序唯一有问题的地方......如果我能就如何解决这个问题以及问题所在获得一些意见，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T01:49:04.157

这是因为这条线：

```
words_list += word 
```

`+=`on a list 用于添加*另一个列表中的所有元素*。碰巧的是，Python 字符串也像字符列表一样起作用，因此您将每个字符作为其自己的元素添加到列表中。

你要这个：

```
words_list.append(word) 
```

这是用于在末尾添加单个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T01:48:47.877

在搞砸之后，我自己找出了问题所在，所以我想我应该把它放在这里给有类似情况的人：

而不是做`words_list += word`，它应该是：`words_list.append(word)`。

或者，这就是我所做的，您可以这样做：`words_list += [word]`. 现在，`word`是一个`list`对象，因此它将添加到上一个列表中。

# css - Facebook Like Box API：无法更改高度

> ID：14391263
> 
> 赞同：0
> 
> 时间：2013-01-18T01:46:52.097
> 
> 标签：css, facebook, api, facebook-likebox

我正在使用 facebook Like Box API (http://developers.facebook.com/docs/reference/plugins/like-box/)。我在提供的代码生成框中设置了高度，但它总是恢复到标准高度。我尝试直接编辑代码，例如：

`<div class="fb-like-box" data-href="https://www.facebook.com/me" data-width="870" data-height="1000" data-colorscheme="dark" data-show-faces="false" data-stream="true" data-header="false"></div>`

但这也无济于事。

我已经尝试过 iframe 和 HTML5 版本，但均无济于事。

我还尝试添加一些内联 CSS，例如：`style="height: 1000px;"`. 那里也没有运气。

无论出于何种原因，宽度似乎都很好。

任何人都可以提出解决此问题的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T01:57:48.007

> height - 插件的高度（以像素为单位）。默认高度取决于要显示的面数以及是否显示流。显示流和 10 个面时，默认高度为 556px。没有面，也没有流，默认高度是 63px。

从[你的链接](https://developers.facebook.com/docs/reference/plugins/like-box/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:55:18.093

显然，您不能再更改高度。正如一些人所说，在过去，更改他们提供的代码中的数据高度会改变 iframe 的高度以及其中的内容。这不再发生。

甚至 Facebook 开发网站上的生成器也有一个高度输入字段，但更改它没有任何作用。在这里自己尝试一下： [https ://developers.facebook.com/docs/reference/plugins/like-box/](https://developers.facebook.com/docs/reference/plugins/like-box/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T23:01:50.543

IFRAME 中元素的高度会根据您在 Facebook 代码中输入的高度值发生变化，直到几天前。Facebook 似乎发生了一些变化。我有两个受影响的网站。直到最近，两者都在我宣布的高度显示了类似的框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T16:24:24.730

在过去 12 个多月的工作之后，同样的事情也发生在我身上。我尝试使用几个不同的选项重新创建代码，它似乎是 Facebook 应用程序本身中的一个代码错误。想知道那里是否有人知道这个问题，我们是否可以期待它很快得到解决。我的网站： http: [//peachtreebennett.com/](http://peachtreebennett.com/)

# session - 用户的照片变量并将其存储在会话中，以便在 Grails 中的每个页面上访问

> ID：14391265
> 
> 赞同：0
> 
> 时间：2013-01-18T01:47:03.450
> 
> 标签：session, variables, grails

我只需要知道如何在会话中存储用户照片变量，以便可以在应用程序的任何位置访问它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T05:52:43.837

原始控制器中的设置：

```
session.photo = photoVariable 
```

进入另一个控制器：

```
session.photo 
```

从 GSP 获取访问权限：

```
${session.photo} 
```

请参阅[http://grails.org/doc/2.1.0/guide/theWebLayer.html#controllersAndScopes](http://grails.org/doc/2.1.0/guide/theWebLayer.html#controllersAndScopes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:46:26.370

我建议您使用 Igor 的答案并将您的照片存储在会话中。您可以像这样对其进行 Base64 编码：

```
 data:${user.photoMimeType};base64,${user.photo} 
```

其中 photoMimeType 通常是“image/jpeg”或“image/png”，user.photo 以 Base64.encode(image bytes) 的形式存储在您的数据库中

在您看来，您可以使用

```
<img src="${session.photo}"/> 
```

照片将在您的 html 中内联的位置。这个解决方案的缺点是，每个 html 都有内联的图像，这不利于缓存。

替代解决方案是：

在您的登录控制器中：

```
 session.photoUrl = g.createLink(controller: 'user', action: 'img', id: user.id) 
```

在您的 gsp 中：

```
 <img src="${session.photoUrl}" 
```

在您的用户控制器中：

```
def img = {
    def user = User.get(params.id)
    if(user) {
        response.setContentType(user.imageMimeType)
        response.outputStream << user.imageData
    } else {
        log.debug "not found"
        response.sendError(HttpServletResponse.SC_NOT_FOUND)
    }
} 
```

希望这是您可以使用的解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T23:30:42.970

在设置标签的帮助下，我已经设法通过会话在应用程序的任何地方都可以使用个人资料图片。[http://grails.org/doc/2.1.0/ref/Tags/set.html](http://grails.org/doc/2.1.0/ref/Tags/set.html) 现在我面临的问题是当我更改会话用户时，它的个人资料图片会改变，但它的缩略图照片不起作用，除非你刷新一次页面。

谁能解释一下。感谢你的帮助。谢谢

谁能解释这个个人资料图片功能/动作

```
def profilePhoto = {
    response.setContentType('image/jpeg')
    response.setHeader('Cache-control', 'no-cache')
    def userId = session.selectedUser.id
    if(params.userId){
      userId = params.userId
    }
    if(params?.id != null && !(params?.id.empty)){
      params.maxWidth?: 190.00
      params.maxHeight?: 190.00
      response.outputStream << imageProxyService.loadThumbnailImage(params.id, securityService.passwordEncoder(userId.toString()))
    }
  } 
```

# mysql - 优化大表的主键搜索

> ID：14391268
> 
> 赞同：0
> 
> 时间：2013-01-18T01:47:13.533
> 
> 标签：mysql, sql, optimization, query-optimization

我有一个包含大约 100,000 条记录的 MySQL 表。当我尝试使用主键（无符号整数）从该表中选择大约 20 行时，执行大约需要一秒钟。有没有办法优化这个？

**表：电影**

```
Column          Type        Null    Default 
film_id         int(11)     No       
film_name       varchar(45) No       
film_overview   text        No       
film_tagline    varchar(150)Yes     NULL     
release_date    date        Yes     NULL     
api_id          int(11)     No       
category_id     int(11)     No      0 
```

**电影索引**

```
Keyname         Type    Unique  Packed  Column      Cardinality Collation   Null    Comment
PRIMARY         BTREE   Yes     No      film_id     110236      A           No  
api_id          BTREE   No      No      api_id      110236      A           No  
film_id         BTREE   No      No      film_id     110236      A           No  
category_id     BTREE   No      No      category_id 4           A           No 
```

**解释**

```
id  select_type         table           type    possible_keys   key     key_len     ref     rows    Extra
1   PRIMARY             films           ALL     NULL            NULL    NULL        NULL    115029  Using where
2   DEPENDENT SUBQUERY  popular_films   ALL     NULL            NULL    NULL        NULL    18      Using where 
```

**询问**

```
SELECT film_name FROM `films` 
  WHERE film_id in (SELECT film_id FROM popular_films); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T03:30:22.990

现在您已经添加了查询，答案很简单：只需使用连接：

```
SELECT films.film_name
FROM `films`
JOIN popular_films
  ON popular_films.film_id = films.film_id; 
```

看起来您的 popular_films 表与电影具有相同的结构，因此可能不应该是单独的表。

# jquery - 我需要 jquery 正则表达式来使用表单验证插件验证密码

> ID：14391270
> 
> 赞同：-1
> 
> 时间：2013-01-18T01:48:01.373
> 
> 标签：jquery, regex, jquery-validate

我正在尝试使用`patern`表单验证插件附带的扩展规则使用正则表达式验证密码。我已经尝试了许多来自互联网的表达方式，但到目前为止没有一个符合我的要求，或者由于某种原因，它们不能像描述的那样工作。我需要验证以下内容：

1.  密码必须有 6 到 20 个字符
2.  它必须至少包含一个大写字母
3.  它必须包含至少一个数字
4.  它必须至少包含一个小写字母
5.  必须可以重复
6.  字符的位置一定无关紧要
7.  它不能允许空格
8.  其中一部分的特殊字符应该是可选的

因此，用户应该能够输入以下示例：

1.  啊啊啊1A
2.  密码
3.  abCdef9
4.  $$$h1Tzzzz

我想在这里看看是否有人可以帮助我。我不是正则表达式专家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T01:50:42.610

![XKCD](../Images/be970f21223af9cf2788cfb344bc4b0e.png)

您应该允许用户输入他们想要的任何密码。

无论如何，您的任务可能会更好地完成几个测试，一个接一个。这不仅更易于编程，还可以让您准确地告诉用户您不接受他们的密码的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T01:51:01.707

不要为此使用正则表达式。

您有一个检查列表：只需使用常规字符串函数进行检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T02:07:43.340

虽然使用正则表达式应该考虑两次。您可以这样做：

```
var pattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=[\$!]).{6,26}$/;
var password = '$$$h1Tzzzz';
password.match(pattern);
//output
["$$$h1Tzzzz"]
password = '$$$hTzzzz';
password.match(pattern);
//output
null 
```

您可以使用 \$ 和 ! 将特殊字符添加到括号中。'$' 被转义，因为它具有特殊含义。

# awk - 需要 awk 帮助

> ID：14391271
> 
> 赞同：-3
> 
> 时间：2013-01-18T01:48:05.610
> 
> 标签：awk

我有一个文件，其内容如下：

item1 item2 <--- 可以是 1 或更多，最多可能是 10+

日期1

日期2

item2 item3 item4 <-- 1 个或更多

日期3

日期4

.

.

.

并且这些数据需要格式化为：

项目 1 日期 1 日期 2

项目 2 日期 1 日期 2

项目 2 日期 3 日期 4

项目 3 日期 3 日期 4

项目 4 日期 3 日期 4

.

.

.

我真的是awk的新手，所以我想我可以在这里问。这是我在 stackoverflow 中的第一个问题，所以请让我知道我应该提供哪些其他类型的信息？提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T06:14:45.640

尝试这个

```
 #awk -f myawk.sh temp.txt
   BEGIN { print "Start"}
   /item/ {for(i=1; i<=b; i++){ print a[i]"----"d }}
   /item/ {for(i=1; i<=NF; i++){ a[i] = $i; b=i;d=""}}
   /date/ {d = d" "$0;}
   END {for(i=1; i<=b; i++){ print a[i]"----"d } print "Process Complete"} 
```

输出

```
Start
item1---- date1 date2
item2---- date1 date2
item2---- date3 date4
item3---- date3 date4
item4---- date3 date4
End 
```

# c++ - constexpr 是否暗示内联？

> ID：14391272
> 
> 赞同：132
> 
> 时间：2013-01-18T01:48:15.663
> 
> 标签：c++, c++11, inline, standards-compliance, constexpr

考虑以下内联函数：

```
// Inline specifier version
#include<iostream>
#include<cstdlib>

inline int f(const int x);

inline int f(const int x)
{
    return 2*x;
}

int main(int argc, char* argv[])
{
    return f(std::atoi(argv[1]));
} 
```

和 constexpr 等效版本：

```
// Constexpr specifier version
#include<iostream>
#include<cstdlib>

constexpr int f(const int x);

constexpr int f(const int x)
{
    return 2*x;
}

int main(int argc, char* argv[])
{
    return f(std::atoi(argv[1]));
} 
```

我的问题是：`constexpr`说明符是否暗示说明`inline`符，如果将非常量参数传递给`constexpr`函数，编译器将尝试`inline`该函数，就好像说明`inline`符放在其声明中一样？

C++11 标准能保证吗？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2013-01-18T01:55:20.347

是（[dcl.constexpr]，C++11 标准中的 §7.1.5/2）：“constexpr 函数和 constexpr 构造函数是隐式内联的 (7.1.2)。”

但是请注意，说明`inline`符实际上对编译器是否可能内联扩展函数影响很小（如果有的话）*。*但是，它确实会影响一个定义规则，从这个角度来看，编译器需要遵循与`constexpr`函数相同的规则`inline`。

我还应该补充一点，无论是否`constexpr`暗示`inline`，C++11 中的函数规则`constexpr`都要求它们足够简单，以至于它们通常是内联扩展的良好候选者（主要的例外是那些递归的）。然而，从那以后，规则变得越来越宽松，因此`constexpr`可以应用于更大、更复杂的功能。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2019-08-08T07:48:19.330

**`constexpr`不暗示`inline`非静态变量（C++17 内联变量）**

虽然`constexpr`确实暗示`inline`了函数，但考虑到 C++17 内联变量，它对非静态变量没有这种影响。

例如，如果您采用我在以下位置发布的最小示例：[内联变量如何工作？](https://stackoverflow.com/questions/38043442/how-do-inline-variables-work/53896763#53896763)并删除`inline`，只留下`constexpr`，然后变量获得多个地址，这是内联变量避免的主要事情。

`constexpr`然而，静态变量是隐式内联的。

**`constexpr`暗示`inline`函数的最小示例**

如上所述：[https](https://stackoverflow.com/a/14391320/895245) ://stackoverflow.com/a/14391320/895245的主要作用`inline`不是内联而是允许函数的多个定义，标准引用在：[C++ 头文件如何包含实现？](https://stackoverflow.com/questions/14517546/how-can-a-c-header-file-include-implementation/57406630#57406630)

我们可以通过玩以下示例来观察这一点：

主文件

```
#include <cassert>

#include "notmain.hpp"

int main() {
    assert(shared_func() == notmain_func());
} 
```

不是main.hpp

```
#ifndef NOTMAIN_HPP
#define NOTMAIN_HPP

inline int shared_func() { return 42; }
int notmain_func();

#endif 
```

非main.cpp

```
#include "notmain.hpp"

int notmain_func() {
    return shared_func();
} 
```

编译并运行：

```
g++ -c -ggdb3  -O0 -Wall -Wextra -std=c++11 -pedantic-errors  -o 'notmain.o' 'notmain.cpp' 
g++ -c -ggdb3  -O0 -Wall -Wextra -std=c++11 -pedantic-errors  -o 'main.o' 'main.cpp' 
g++ -ggdb3  -O0 -Wall -Wextra -std=c++11 -pedantic-errors  -o 'main.out' notmain.o main.o
./main.out 
```

如果我们从 中删除`inline`，`shared_func`链接将失败，并显示：

```
multiple definition of `shared_func()' 
```

因为标头被包含在多个`.cpp`文件中。

但是如果我们用 替换`inline`，`constexpr`那么它又会起作用，因为`constexpr`也意味着`inline`。

GCC 通过在 ELF 目标文件中将符号标记为弱来实现这一点：[C++ 头文件如何包含实现？](https://stackoverflow.com/questions/14517546/how-can-a-c-header-file-include-implementation/57406630#57406630)

在 GCC 8.3.0 中测试。

# vb.net - 录制和预览 VB.Net Directshow

> ID：14391273
> 
> 赞同：0
> 
> 时间：2013-01-18T01:48:20.730
> 
> 标签：vb.net, directshow

我正在使用来自 directshow.net 本身的 GFPreview 示例代码，我将其转换为 vb.net 代码，但是，当我选择要使用的设备时出现以下错误。

`Retrieving the COM class factory for component with CLSID {08E3287F-3A5C-47E9-8179-A9E9221A5CDE} failed due to the following error : 80040154`

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T02:44:21.507

我找到了答案。看来我已经注册了我使用的 DLL 文件的 32 位版本。因此，我只安装了它的 64 位版本。现在可以了。

# c# - Windows Phone TimePicker 更改弹出颜色

> ID：14391279
> 
> 赞同：0
> 
> 时间：2013-01-18T01:49:08.723
> 
> 标签：c#, windows-phone-7, silverlight-toolkit

如何在 WP7 上的 TimePicker 中设置弹出窗口的颜色？通过编辑样式，我可以设置选择器的颜色，但不能设置以下窗口的颜色。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T01:53:24.233

在“自定义全屏选择器页面”标题下查看此处：

[WP7 DatePicker 和 TimePicker 深入](http://www.windowsphonegeek.com/articles/wp7-datepicker-and-timepicker-in-depth--api-and-customization)

# python - 在 python 中绘制流数据的最轻量级方法

> ID：14391280
> 
> 赞同：10
> 
> 时间：2013-01-18T01:49:11.667
> 
> 标签：python, matplotlib

为了让您了解我在寻找什么，它看起来像[这样](http://youtu.be/xMWIATas_e0?t=1m37s)：

到目前为止，我的所有绘图都使用了 matplotlib，而且时间并不重要（它是在后处理中完成的）。

我想知道除了将我的数据向左移动并重新绘制整个绘图之外，是否还有更轻的绘图方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T06:34:58.107

看看[Matplotlib 动画示例](http://www.scipy.org/Cookbook/Matplotlib/Animations)。主要技巧是不要完全重绘图形，而是使用 matplotlib 的 OO 接口并设置您创建的绘图线的 x/ydata。如果您已经将您的绘图与某些 GUI（例如 GTK）集成，那么请务必按照绘图相应部分中的建议进行操作，否则您可能会干扰 GUI 工具包的事件循环。

作为参考，如果链接失效：

```
from pylab import *
import time

ion()

tstart = time.time()               # for profiling
x = arange(0,2*pi,0.01)            # x-array
line, = plot(x,sin(x))
for i in arange(1,200):
    line.set_ydata(sin(x+i/10.0))  # update the data
    draw()                         # redraw the canvas

print 'FPS:' , 200/(time.time()-tstart) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-17T11:57:29.987

在 python wiki 中有一个带有简短描述的建议列表：[link](https://wiki.python.org/moin/NumericAndScientific/Plotting)。

# c - 如何在 Linux 2.6.29 中解码 ioctl() 系统调用中的 arg 指针？

> ID：14391282
> 
> 赞同：2
> 
> 时间：2013-01-18T01:49:38.807
> 
> 标签：c, linux, linux-kernel, system-calls, ioctl

我想打印传递给`linux`系统调用的所有参数值。例如`ioctl()`，我有以下原型和打印语句。

```
asmlinkage long our_sys_ioctl(unsigned int fd ,  unsigned int cmd , unsigned long arg)
{
    printk ("fd=%u, cmd=%u and arg=%lu \n ", fd, cmd, arg);
    return original_call_ioctl(fd , cmd , arg);
} 
```

我理解，`fd`是驱动程序文件的文件描述符，`cmd`定义了驱动程序、ioctl 编号、操作类型和参数大小。但是我对`arg`参数感到困惑，要么它是指向内存的指针，要么只是大多数文档所称的立即值。

通过使用此`arg`参数，如果`unsigned long arg`按上述方式传递而不是指针，我如何获取内存内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T09:06:55.640

ioctl的`arg`参数在通用 vfs 级别是不透明的。如何解释它取决于实际处理它的驱动程序或文件系统。所以它可能是指向用户空间内存的指针，也可能是索引、标志等。它甚至可能未被使用，并且通常以 0 传递。

例如，查看`TCSBRKP`ioctl的实现`drivers/tty/tty_io.c`：

```
long tty_ioctl(struct file *file, unsigned int cmd, unsigned long arg)
//...
       case TCSBRKP:   /* support for POSIX tcsendbreak() */
            return send_break(tty, arg ? arg*100 : 250); 
```

可以看[`ioctl_list(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/ioctl_list.2.html)man page看看各种ioctl取的参数；该列表中具有`int`或其他非指针参数的所有条目都是其他示例。

所以你可以做类似的事情

```
 void __user *argp = (void __user *) arg; 
```

然后使用`copy_from_user()`or`get_user()`读取`arg`指向的内存，但如果参数不是指针，则可能会失败。在通用 ioctl 系统调用中，您可能并不真的希望拥有一个包含所有可能 ioctl 的巨大表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-22T18:13:07.950

[这份文件](http://www.makelinux.net/ldd3/chp-6-sect-1)，也链接在[这个答案](https://stackoverflow.com/a/14211113/2701770)中，应该更深入地阐明这一点。一个有趣的摘录（我添加了粗体文本）可能如下：

> 在用户空间中，ioctl 系统调用具有以下原型：
> 
> `int ioctl(int fd, unsigned long cmd, ...);`
> 
> 由于点，原型在 Unix 系统调用列表中脱颖而出，这些点通常将函数标记为具有可变数量的参数。然而，在实际系统中，**系统调用实际上不能有可变数量的参数**。系统调用必须有明确定义的原型，因为用户程序只能通过硬件“门”访问它们。因此，**原型中的点表示的**不是可变数量的参数，而是**单个可选参数**，传统上标识为`char *argp`。这些点只是**为了防止编译期间的类型检查**。**第三个参数的实际性质取决于发出的特定控制命令**（第二个论点）。有些命令**不带参数**，有些带**整数值**，有些带**指向其他数据的指针**。使用指针是将任意数据传递给*ioctl*调用的方法；然后，该设备能够与用户空间交换任意数量的数据。
> 
> *ioctl*调用的**非结构化**特性使其在内核开发人员中失宠。每个*ioctl*命令本质上都是一个单独的、通常**没有记录的系统调用**，并且**无法审计这些调用********以任何全面的方式。也很难让非结构化 ioctl 参数在所有系统上都一样工作；例如，考虑在 32 位模式下运行用户空间进程的 64 位系统。结果，通过几乎任何其他方式实施杂项控制操作的压力很大。可能的替代方法包括将命令嵌入到数据流中（我们将在本章后面讨论这种方法）或使用虚拟文件系统，无论是 sysfs 还是特定于驱动程序的文件系统。（我们将在第 14 章讨论 sysfs。）然而，对于真正的设备操作来说，*ioctl*通常是最简单和最直接的选择。******

 ******这意味着没有任何方法可以理解如何将 ioctl 参数解释为外部观察者，而无需深入了解设备驱动程序约定/内部。从用户空间的角度来看， ioctl 参数是**无类型**的，并且在内核空间中以某种方式*松散地键入*，因为它被处理为`unsigned long`只是为其保留空间。它是一个“纯”数字或任何适合`unsigned long integer`空间的位序列，可以用作（非常短的）字符串、（小）char 数组、（小）结构 - 但要注意字节顺序和特定于体系结构大小 - 可以表示设备板载芯片的操作码，甚至可以通过类型处理作为浮点数处理！

此外，这意味着很容易搞砸事情，通过将不一致的数据传递给驱动程序（不仅仅是错误的数据，而是错误类型的错误数据！），最终导致设备的未定义行为或用户空间内存损坏（例如通过在读取的 ioctl 中传递一个指向错误大小的结构的指针）。

还有几行：

> [...]`cmd`参数不变地从用户传递，可选`arg`参数以 an 的形式传递`unsigned long`，无论它是由用户作为整数还是指针给出。如果调用程序没有传递第三个参数，`arg`则驱动程序操作接收到的值是未定义的。*因为在额外参数上禁用了类型检查，所以如果将无效参数传递给ioctl* ，编译器无法警告您，并且任何相关的错误都很难发现。

无论如何，如果您想尝试对设备驱动程序 ioctl 调用进行“盲目”审核，而不查看头文件和源文件，则可以尝试先使用 copy_from_user() 将 arg 作为指针处理，如果失败，则可能是立即值（或发生错误），然后可以尝试记录其值以查看并尝试解释它（但为什么要反转 ioctl 而不是研究驱动程序代码？）；在成功的情况下，在没有知识的情况下，可以读取并记录不同大小的内存以进行解码尝试（同样，只要有可用的资源，它们应该是毫无意义的）。

更有趣的操作肯定是解码 ioctl 代码 (cmd)，因为它可以指向正确的方向以找到与其数值相关的驱动程序 - 如果 ioctl 定义的约定是，应该只有一个应用，无论如何，不​​同的驱动程序都允许使用相同的魔术字符，因此一个正则表达式来 grep 所有内核源文件以查找`#define`包含 'r' 或 'D' 等的文件可以挑选出许多文件来检查 ioctl 定义，而不是与函数编号匹配应该会排除一些或所有错误的，并且寻找正确的参数大小将完成搜索。

问候。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T02:07:52.483

请记住，原型`ioctl`如下所示：

```
int ioctl(int fildes, unsigned long request, ...); 
```

你只知道前两个参数是什么。根据[这篇文章](http://www.linuxjournal.com/article/6908)：

> 附加参数是可选的，并且可能因一台设备上的 ioctl 实现而异于另一台设备上的实现。据我所知，总是存在第三个论点，而我还没有找到超过三分之一的论点。这第三个参数通常似乎是一个指向结构的指针。这允许在两个方向上传递任意数量的数据，数据由指针所指的结构定义，只需传递指针即可。

...但是即使假设只有第三个参数，您仍然不知道它是文字值还是指向结构的指针（缺少请求到预期参数的显式映射）。******

# ios - 将附近的对象渲染在其他对象之上时，OpenGL 会变慢

> ID：14391284
> 
> 赞同：0
> 
> 时间：2013-01-18T01:49:44.103
> 
> 标签：ios, c, opengl-es, opengl-es-2.0

我正在编写一个 iOS 应用程序，使用 OpenGL ES 2.0 将许多对象呈现到屏幕上。目前，这些对象是简单的形状（正方形、球体和圆柱体）。

当没有对象相互重叠时，程序以 30 fps 平稳运行。

当我添加出现在其余模型后面的对象（例如背景矩形）时，我的问题就出现了。当我尝试绘制背景矩形时，我只能在它前面绘制占屏幕不到一半的对象。任何大于此的帧速率都会下降到 15 到 20 fps 之间。

就目前而言，我所有的模型，包括背景，都是用以下代码绘制的：

```
- (void)drawSingleModel:(Model *)model
{
    //Create a model transform matrix.
    CC3GLMatrix *modelView = [CC3GLMatrix matrix];

    //Transform model view
    // ...
    //Pass matrix to shader.
    glUniformMatrix4fv(_modelViewUniform, 1, 0, modelView.glMatrix);

    //Bind the correct buffers to openGL.
    glBindBuffer(GL_ARRAY_BUFFER, [model vertexBuffer]);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, [model indexBuffer]);
    glVertexAttribPointer(_positionSlot, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), 0);

    glVertexAttribPointer(_colorSlot, 4, GL_FLOAT, GL_FALSE, sizeof(Vertex), (GLvoid*) (sizeof(float) * 3));

    //Load vertex texture coordinate attributes into the texture buffer.
    glVertexAttribPointer(_texCoordSlot, 2, GL_FLOAT, GL_FALSE, sizeof(Vertex), (GLvoid*) (sizeof(float) * 7));
    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D, [model textureIndex]);
    glUniform1i(_textureUniform, 0);

    glDrawElements([model drawMode], [model numIndices], GL_UNSIGNED_SHORT, 0);
} 
```

这段代码是从我的draw方法中调用的，定义如下：

```
- (void)draw
{
    glUseProgram(_programHandle);
    //Perform OpenGL rendering here.
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glEnable(GL_BLEND);

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_CULL_FACE);

    _camera = [CC3GLMatrix matrix];

    //Camera orientation code.
    //...

    //Pass the camera matrix to the shader program.
    glUniformMatrix4fv(_projectionUniform, 1, 0, _camera.glMatrix);

    glViewport(0, 0, self.frame.size.width, self.frame.size.height);
    //Render the background.
    [self drawSingleModel:_background];

    //Render the objects.
    for(int x = 0; x < [_models count]; ++x)
    {
        [self drawSingleModel:[_models objectAtIndex:x]];
    }

    //Send the contents of the render buffer to the UI View.
    [_context presentRenderbuffer:GL_RENDERBUFFER];
} 
```

我发现通过更改渲染顺序如下：

```
 for(int x = 0; x < [_models count]; ++x)
    {
        [self drawSingleModel:[_models objectAtIndex:x]];
    } 
    [self drawSingleModel:_background]; 
```

在背景上渲染时我的帧速率是 30 fps。

当然，如果 _models 中的任何对象必须在彼此前面渲染，仍然会出现减速。此外，按此顺序渲染会导致半透明和透明对象被绘制为黑色。

我对 OpenGL 还是有点陌生​​，所以我不太清楚我的问题出在哪里。我的假设是执行深度测试的速度有所放缓，而且我也意识到我正在使用移动设备。但我不敢相信 iOS 设备太慢了，无法做到这一点。该程序仅渲染 5 个模型，每个模型大约有 180 个三角形。

有什么我没有看到的，或者有什么解决方法吗？任何建议或指示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T11:21:24.530

您正在使用移动 GPU 的特性之一：这些东西（NVidia Tegra 除外）不会对隐藏表面移除进行深度测试。大多数移动 GPU，包括 iPad 中的 GPU，都是基于 tile 的光栅化器。这样做的原因是为了节省内存带宽，因为内存访问实际上是一个耗电的操作。在移动设备的功率受限环境中，减少所需的内存带宽可显着延长电池寿命。

基于图块的渲染器将视口拆分为多个图块。将几何图形发送到其中时，它会被拆分为图块，然后对于每个图块，它与图块中已经存在的几何图形相交。大多数情况下，图块仅被一个图元覆盖。如果传入的图元恰好在已经存在的几何体之前，它将替换它。如果存在切割交叉点，则会添加新边。只有当边缘数量达到某个阈值时，该单个图块才会切换到深度测试模式。

然后，仅在同步点对准备好的图块进行光栅化。

现在很明显为什么重叠对象会降低渲染性能：基元重叠越多，设置图块所需的预处理就越多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T04:03:05.157

参见“[透明度排序](http://www.opengl.org/wiki/Transparency_Sorting)”/“[阿尔法排序](http://www.sjbaker.org/steve/omniv/alpha_sorting.html)”。

我怀疑您看到的缓慢主要是由于“过度绘制”，即帧缓冲区像素被多次绘制。当您从后到前绘制场景时，这是最糟糕的，因为深度测试总是通过。虽然 iPhone 4/4S/5 可能有一个强大的 GPU，但最后我检查了内存带宽非常糟糕（我不知道 GPU 缓存有多大）。

如果你从前到后渲染，问题是透明像素仍然写入深度缓冲区，导致它们遮挡它们后面的多边形。您可以使用 alpha 测试稍微减少（但只是稍微）。

简单的解决方案：大致从前到后渲染不透明多边形，然后从后到前渲染透明多边形。这可能意味着要通过您的场景两次，理想情况下，您希望对透明多边形进行排序，这并不容易做好。

我认为（原则上）也可以从前到后渲染所有内容并在目标 alpha 上执行 alpha 测试，但我认为 OpenGL 不支持这一点。

# jquery - Spring MVC 和 HTML 5

> ID：14391293
> 
> 赞同：0
> 
> 时间：2013-01-18T01:50:46.220
> 
> 标签：jquery, html, spring, spring-mvc

我有一个**SpringMVC**应用程序，我正在使用**Spring Tags**，但是我正在寻找一种解决方案，用于在应用程序中使用网络摄像头拍照，我找到了[JQuery 网络摄像头插件](http://www.xarg.org/project/jquery-webcam-plugin/)。

问题是这使用了一个元素/标签，而**Spring Taglib**没有这个标签的定义。我怎么能克服这个？我需要像弹簧标签一样使用标签，或者是否有弹簧标签替代品。下面是我的代码如何运行的示例：

**代码**

```
<script type="text/javascript">

    $(document).ready(function(){

        $("#canvas").hide();

        $("#camera").webcam({
                width: 320,
                height: 240,
                useMicrophone: false,
                mode: "callback",
                swffile: "resources/swf/jscam_canvas_only.swf",
                quality:85,

                onSave: saveCB,
                onCapture: function () {
                    $("#camera").hide();
                    webcam.save();
                    $("#canvas").show();
                },

                debug: function (type, string) {
                    $("#status").html(type + ": " + string);
                }

        }); 

        $('#upload').click(function () {
            webcam.capture();
            return false;
        });

        window.addEventListener("load", function() {

            var canvas = document.getElementById("canvas");

            if (canvas.getContext) {
                ctx = document.getElementById("canvas").getContext("2d");
                ctx.clearRect(0, 0, 320, 240);
                image = ctx.getImageData(0, 0, 320, 240);
            }

            }, false);

});

    <label id="status"></label>                             
                        <div id="camera"></div>

                        <div><p><canvas id="canvas" height="240" width="320"></canvas></p></div>
                        <input  id="upload" type="button" value="Take Photo">
                        <input  id="retake" type="button" value="Re-Take Photo">

                            <ol>
                                <li>
                                    <label>Select Gender</label>
                                    <form:select path="genderId" id="genderId" title="Select Your Gender">
                                    <form:options items = "${gender.genderList}" itemValue="genderId" itemLabel="genderDesc" />
                                    </form:select>
                                    <form:errors path="genderId" class="errors"/>
                                </li>               

                                <li><form:label for="weight" path="weight">Enter Weight <i>(lbs)</i></form:label>
                                    <form:input path="weight" id="weight" title="Enter Weight"/><form:errors path="weight" class="errors"/>
                                </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T06:28:27.223

如果 spring 标签不能满足您的需求，您可以尝试编写 tagx 自定义标签。这些标签是用 jsp(x) 编写的，而不是 java，所以它们很适合渲染任意 html。

# java - 有条件的停止计时器只在第一次工作？

> ID：14391299
> 
> 赞同：2
> 
> 时间：2013-01-18T01:52:12.877
> 
> 标签：java, netbeans, timer, timertask

我正在写一个“谁想成为百万富翁”的游戏，我已经设置好了一切，这只是计时器的问题。

游戏是这样工作的：如果用户正确回答了问题，他/她会继续前进。如果没有，游戏就结束了，他们可以选择再玩一次。

当游戏第一次运行时它很好，计时器会做它应该做的——从 30 秒开始倒计时，显示秒数。

但是，当用户单击“再次播放”按钮时，前一个计时器将继续使用新计时器。像这样：

-timerA 距离用户丢失还有 20 秒（用 a 表示）。

-timerB 在下一次玩游戏时开始（用 b 表示）。

输出： 20a 29b 19a 28b 18a 27b 17a 26b ....... 2a 11b 1a 10b 9b 8b 7b 6b 5b 4b 3b 2b 1b

所以这是我的计时器类，称为 CountDown：

```
 import java.util.Timer;
  import java.util.TimerTask;

  public class CountDown {

      static Timer timer;
      public static int seconds = 30;

      public CountDown() {
          timer = new Timer();
          timer.schedule(new DisplayCountdown(), 0, 1000);
      }

      class DisplayCountdown extends TimerTask {

          int seconds = 30;

          public void run() {

                  if (seconds == 0) {
                      timer.cancel();
                      timer.purge();
                      return;
                  }

              if (seconds > 0) {
                  PlayFrame.timer.setText("" + seconds); //jLabel used to display seconds
                  seconds--;
                  if (seconds < 30) {
                      if (PlayFrame.right == true) { //check if question was answered correctly
                          System.out.print("true"); //testing purposes
                          PlayFrame.right = false;
                          PlayFrame.showQuestion();
                          PlayFrame.startTimer();
                          seconds = 0;
                          //break;
                      }
                      else if (PlayFrame.right == false) {
                          //break;
                      }
                  }      

                  else if (seconds == 0) { //if time runs out its automatic wrong answer
                      PlayFrame.wrong();
                      //break;
                  }      

                  else {
                      PlayFrame.wrong();
                      PlayFrame.timer.setText(null);
                      timer = new Timer();
                      //break;
                  }
              }
              System.out.println(seconds); // for testing purposes only
          }
      }
  } 
```

这是我的一些PlayFrame：

```
 import java.awt.Color;
  import java.util.Timer;

  public class PlayFrame extends javax.swing.JFrame {

      public static void wrong() {
          //determines which losing frame to show
          if (count <= 2){
              LossLevel0 L0 = new LossLevel0();
              L0.setVisible(true);
          }
          else if (count > 2 && count <= 6 && count != 6){
              LossLevel1 L1 = new LossLevel1();
              L1.setVisible(true);
          }
          else {
              LossLevel1 L1 = new LossLevel1();
              L1.setVisible(true);
          }
          //"supposed" to stop the timer
          CountDown.timer.cancel();
          CountDown.timer.purge();
      }

      public static void startTimer() {
          //creates new CountDown object and timer, also resets seconds
          CountDown countdown = new CountDown();
          CountDown.timer = new Timer();
          CountDown.seconds = 30;
      } 
```

我想问题可能出在我重新开始游戏的时候。那里唯一的代码是我将所有变量重置回游戏开始之前的原始状态。像这样：

```
 // Reset Everything
    PlayFrame.count = 0;
    PlayFrame.answer = new String();
    PlayFrame.count = 0;
    PlayFrame.right = false;
    PlayFrame.winnings = 0;
    CountDown.seconds = 30;
    CountDown.timer = new Timer();
    CountDown.timer.cancel();
    CountDown.timer.purge(); 
```

请帮助，如果您需要更多信息，请询问！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T01:55:34.663

您不应该将[java.util.Timer](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)与 Swing 应用程序一起使用。对于这些，您应该使用[javax.swing.Timer](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)因为这将尊重 Swing 事件线程。因此，您的问题没有实际意义，我建议您将所有计时代码都扔掉并尝试使用正确的计时器。您可以在此处找到教程：[Swing Timer 教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

接下来，您将想要摆脱代码正在使用的所有静态方法和字段，并将它们更改为实例字段和方法。

在 JLabel 中显示剩余时间的 Swing Timer 示例：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

public class TimerExample {

   private static void createAndShowGui() {
      Gui mainPanel = new Gui();

      JFrame frame = new JFrame("TimerExample");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

class Gui extends JPanel {
   private static final long serialVersionUID = 1L;
   private static final String PRESS_BUTTON = "Press Button ";
   private static final String PRESS_BUTTON_AGAIN = "Press Button Again Within %02d Seconds!";
   private static final String YOU_LOSE = "You Lose!";
   private static final String YOU_WIN = "You Win!";
   private static final int PREF_W = 250;
   private static final int PREF_H = 100;
   private static final int TOTAL_SECONDS = 20;
   private static final int ONE_SECOND = 1000;

   private int elapsedSeconds = 0;
   private JLabel timerLabel = new JLabel(PRESS_BUTTON);
   private JButton button = new JButton("Button");
   private Timer myTimer;

   public Gui() {
      JPanel btnPanel = new JPanel();
      btnPanel.add(button);

      setLayout(new BorderLayout());
      add(btnPanel, BorderLayout.CENTER);
      add(timerLabel, BorderLayout.SOUTH);

      button.addActionListener(new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            if (myTimer != null && myTimer.isRunning()) {
               myTimer.stop();
               myTimer = null;
               timerLabel.setText(YOU_WIN);               
            } else {
               elapsedSeconds = 0;
               myTimer = new Timer(ONE_SECOND, new TimerListener());
               myTimer.start();
               String text = String.format(PRESS_BUTTON_AGAIN, TOTAL_SECONDS); 
               timerLabel.setText(text);
            }
         }
      });
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   private class TimerListener implements ActionListener {
      @Override
      public void actionPerformed(ActionEvent e) {
         elapsedSeconds++;

         if (elapsedSeconds == TOTAL_SECONDS) {
            myTimer.stop();
            timerLabel.setText(YOU_LOSE);
         } else {
            String text = String.format(PRESS_BUTTON_AGAIN, TOTAL_SECONDS - elapsedSeconds);
            timerLabel.setText(text );
         }
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T02:22:22.927

我建议做的是将 Timer 声明移动到 JFrame 中，然后在每次需要计时器时创建“DisplayCountdown”类的新实例，并移动“timer.schedule(new DisplayCountdown(), 0, 1000) ;" 在别处排队。

如果你清除一个定时器对象，它会被完全重置，所以你不需要创建一个新的定时器对象，只需要添加一个新的 TimerTask。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T22:38:47.350

已解决，感谢 sage88 的链接！[http://albertattard.blogspot.com/2008/09/practical-example-of-swing-timer.html](http://albertattard.blogspot.com/2008/09/practical-example-of-swing-timer.html)

以及有关摇摆计时器的更多帮助（用于该主题的未来搜索）[http://www.asjava.com/swing/java-timer-tutorial/](http://www.asjava.com/swing/java-timer-tutorial/)

```
public static void startTimer() {
    listener = new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent event) {
            System.out.print("action");
            timerLabel.setText("" + seconds);
            seconds--;
            System.out.println(seconds);
            if (seconds < 0){
                System.out.print("zero");
                wrong();
            }
        }
    };
    displayTimer = new Timer(1000, listener);
    displayTimer.setInitialDelay(1);
    displayTimer.start();

    if (right == true){
        System.out.print("true");
        displayTimer.stop();
        right = false;
        seconds = 30;
        displayTimer = new Timer(10000, listener);
        displayTimer.setDelay(10000);
        displayTimer.setInitialDelay(1);
        displayTimer.start();
    }
    else if (right == null){
        System.out.print("null");
        displayTimer.stop();
        seconds = 30;
        displayTimer = new Timer(10000, listener);
        displayTimer.setInitialDelay(1);
        displayTimer.setDelay(10000);
        displayTimer.start();
    }
} 
```

# sed - 在下一行使用 sed 进行替换

> ID：14391302
> 
> 赞同：0
> 
> 时间：2013-01-18T01:52:53.373
> 
> 标签：sed

我正在使用 sed 命令将一些文本翻译成另一个文本。

猫文字

```
 &lt;strong&gt;ABC
           &lt;/strong&gt; 
```

通讯：

```
 sed -e 's|&lt;strong&gt;(.*?)&lt;/strong&gt;|//textbf{1}|g' 
```

预期结果：\textbf{ABC}

但是使用上面的脚本我无法将其转换为预期的输出，因为标签之间有新行。如何处理此类情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:16:01.427

```
sed -e 'N;s|&lt;strong&gt;\(.*\?\)\n&lt;/strong&gt;|\/textbf{\1}|g' 
```

正如 CodeGnome 和 David Ravetti 所说，N 标志允许多行模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T06:58:56.007

这可能对您有用（GNU sed）：

```
sed -r '$!N;s|(&lt;)(strong&gt;)([^\n]*)\n\s*\1/\2|//textbf{\3}|;P;D' file 
```

或者

```
sed '$!N;s|\(&lt;\)\(strong&gt;\)\([^\n]*\)\n\s*\1/\2|//textbf{\3}|;P;D' file 
```

# html - Web Workers 消息顺序

> ID：14391305
> 
> 赞同：17
> 
> 时间：2013-01-18T01:53:31.037
> 
> 标签：html, web-worker

依赖从主线程传递到单个 Web Worker 的消息的保留顺序是否可以节省？例如，如果我这样做

```
worker.postMessage(1);
worker.postMessage(2); 
```

工人肯定会在第二条消息之前处理第一条消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T18:49:10.043

只要您与同一个工人一起发布消息，我认为它会。如果需要，您可以轻松地对此进行测试。循环并按一定顺序发布消息。如果您始终以与发布消息相同的顺序接收消息，则可以转发消息，情况就是如此。

# sql - SQL 加入聚合

> ID：14391307
> 
> 赞同：0
> 
> 时间：2013-01-18T01:53:49.473
> 
> 标签：sql

我有 2 张桌子 -`product`和`product_features`.

我需要抓取所有产品并显示它们的每个功能数量。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T01:55:45.523

尝试这个

```
SELECT p.id, COUNT( pf.id )
FROM prod p
LEFT JOIN prod_feat pf
ON p.id = pf.prod_id
GROUP BY p.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T03:32:46.453

如果只需要产品id，则不需要加入：

```
select pf.prod_id, count(*) as NumFeatures
from prod_feat pf
group by pf.prod_id 
```

# ruby - OpenSSL - 既不是 PUB 密钥也不是 PRIV 密钥:: 嵌套 asn1 错误

> ID：14391312
> 
> 赞同：7
> 
> 时间：2013-01-18T01:54:40.593
> 
> 标签：ruby, openssl, rsa

我正在尝试使用公钥初始化 OpenSSL::PKey::RSA，但它不起作用。

以下是密钥对：

```
-----BEGIN RSA PRIVATE KEY-----
MIIBOwIBAAJBALbkpbDFbZ54bM5ybwwdCqsUHjxWQF4B0Q1sAOBFEYdpxZJZ8dAz
ycPzIgSlPc8yqjeqwJQtvCpktrntALpX1ksCAwEAAQJAYT0XyvBs48BrOSgmWm5m
aab8nF/PQSv+FgDCRnryYue3WZOpUqITB0w6ivC68G/+Mf6IXyE4ljqw2iIAdjyv
YQIhAOE20o2bLPMtziEOdH0KGpN0gNYpe38jGyvGw7k5gZd9AiEAz+TWZRJpc9yX
5dew3xcBtIhaTPFmVLgmfU7FwIWW32cCIQCvKK9LmUO1gouN5CsvUNtokbTeW/cD
467vNjDlb1deFQIhAK55pZ1p2GrOpgTWArEYg+vZy79rkbBkZJkh9UFgXIDdAiBm
Rglcmt9cD2Vqg7xMr7cP3FJbSmJffSwYve1fazuZOw==
-----END RSA PRIVATE KEY-----

-----BEGIN PUBLIC KEY-----
MEoCAQACQLbkpbDFbZ54bM5ybwwdCqsUHjxWQF4B0Q1sAOBFEYdpxZJZ8dAzycPz
IgSlPc8yqjeqwJQtvCpktrntALpX1ksCAwEAAQ==
-----END PUBLIC KEY-----

OpenSSL::PKey::RSA.new(private_key) # WORKS!
OpenSSL::PKey::RSA.new(public_key) # FAILS!
OpenSSL::PKey::RSAError: Neither PUB key nor PRIV key:: nested asn1 error
    from (irb):16:in `initialize'
    from (irb):16:in `new'
    from (irb):16
    from /Users/dhracker/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/console.rb:47:in `start'
    from /Users/dhracker/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/console.rb:8:in `start'
    from /Users/dhracker/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'

another_public_key = OpenSSL::PKey::RSA.new(512).public_key
-----BEGIN PUBLIC KEY-----
MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAMS6XZD2NHTCwdgT+A2/PkStyJwYX/Qu
mfCyZc5TE5IZYaKsBg4uGcI97r8lxEv6rx5b0b6cIwQ7A7e6CUVph5MCAwEAAQ==
-----END PUBLIC KEY-----
OpenSSL::PKey::RSA.new(another_public_key) # WORKS! 
```

导致事情失败的 public_key 有什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-19T06:49:39.013

按照此链接[http://skim.la/2012/01/16/rsa-public-key-interoperability-between-ruby-and-android/](http://skim.la/2012/01/16/rsa-public-key-interoperability-between-ruby-and-android/)我以这种方式取得了更大的成功。

```
require 'openssl'
require 'base64'

public_key = "MIIBCgKCAQEA20O377QEiZvPsj14LKl2xO23iirJB5WDTVjeab1cIOJu1vbV+Pdwl1Bov8m896ZG4K0S/qvfJcdHLovr2WJ+o2maK1XZCNy8lA" +
  "zIPzZrj/yDZAB2GSjR3in1lQRQPtWjIOdB8Cy2FGybEstIkpf8MD3XMWp5g8BtdOv43ekjBuTiGGLlPRG0+IiazjHlWjyl6DU9x9m2Jxks0H6YZud6zf4s9Q6" +
  "9vPUYgOZXWs7IghxqrVGE5mWxoRudsDFhLYP706+IrSxGOf5fE0/8fjtzj/eJayCLmkUWq/xsts5tBAbwsX5xKdk8iD0OU2qOEbVuiYmehEiJnvO2vyd+t76C" +
  "xwIDAQAB"

rsa_public_key = OpenSSL::PKey::RSA.new(Base64.decode64(public_key)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T22:25:25.370

It looks like what you've got there should work only the public key itself isn't valid. Maybe you mangled them at some point by adding or removing an extra character by accident. You can test this key out and should see it work out

```
public_key = "-----BEGIN RSA PUBLIC KEY-----\nMIIBCgKCAQEAoxi2V0bSKqAqUtoQHxWkOPnErCS541r6/MOSHmKOd6VSNHoBbnas\nZRQSDUTbffB6C++DbmBCOHmvzYORD0ZWYgyMcgbYJD48Z2fe0nm+WMYN5u8DPnTP\nvf8b/rJBxGF0dsaoFAWlB81tTnKFCxAbCSgfmQt+Vd4qupGZ5gGu9uoKlaPjmYuA\nIxIjUMcu3dov7PQ+PZIvdkM0fiz8YIl8zo+iWWyI2s6/XLoZJ4bYs2YJHZDf6biU\nsZhs8xqh/F6qlcRt3Ta25KMa0TB9zE3HHmqA/EJHFubWFRCrQqpboB0+nwCbmZUl\nhaxA79FRvYtORvFAoncoFD4tq3rGXcUQQwIDAQAB\n-----END RSA PUBLIC KEY-----\n"

OpenSSL::PKey::RSA.new(public_key) 
```

I generated my key by first running the linux command for generating an openSSH key pair

```
$  ssh-keygen -t rsa -b 1024 
```

Then I converted OpenSSH style public key to an OpenSSL style key (PEM format), storing it in a file called 'pem'.

```
$  ssh-keygen -f testing_rsa.pub  -e -m pem > pem 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-23T11:22:31.790

我面临同样的问题，我尝试了互联网上给出的许多不同的解决方案。但实际问题出在`key`我提供的那个。密钥的格式应该是正确的。不应有任何多余的字符或`\n , \t`.

我希望这可以帮助你。所以，请再次检查您的密钥。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-26T14:12:01.087

同一天，我遇到了同样的问题，更改密码可能会对您有所帮助。因此，请验证您的密码并在通知类中更改它。我希望这可能对您有所帮助。

我已经更改了文件`app/jobs/notification_job.rb`

```
certificate: Rails.root.join('Your Pem File Name Goes Here'),# required
                passphrase:  "PASSPHRASE GOES HERE",              # optional
                gateway:     "gateway.push.apple.com", # optional; See note below.
                # gateway:     "gateway.sandbox.push.apple.com", # optional; See note below. 
```

# android - Android getExternalCacheDir() 返回 null

> ID：14391314
> 
> 赞同：9
> 
> 时间：2013-01-18T01:54:57.523
> 
> 标签：android, bitmap, imageview, android-sdcard

我正在尝试实施有效[加载位图中描述的最佳实践](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

我遇到了麻烦，因为这条线：

```
Utils.getExternalCacheDir(context) 
```

**DiskLruCache.java**内部返回 null，这意味着`NullPointerException`当我尝试调用 .getPath()

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-18T01:54:57.523

尽管`NullPointerException` 抛出了一些神秘的问题，但实际问题是我的应用程序没有 WRITE_EXTERNAL 权限，因此系统拒绝了我使用 ExternalDir 进行缓存的尝试。`SecurityException`不幸的是，在有效显示位图中使用的代码中，这种情况发生在足够低的级别上，如果在没有适当许可的情况下尝试写入 SD 卡，异常不会像通常那样指示。

要修复，只需添加以下内容：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

到你的清单。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-19T00:25:09.553

如果您在没有任何外部存储的设备或模拟器上运行，也会发生这种情况。

# actionscript-3 - AS3 AIR手机urlloader进度条

> ID：14391317
> 
> 赞同：0
> 
> 时间：2013-01-18T01:55:03.300
> 
> 标签：actionscript-3, air

我有一个应用程序（适用于 iOS 和 Android），用户可以从相机胶卷中选择图像或使用 cameraui 拍摄图像。选择图像后，然后使用 urlloader 和 urlrequestwrapper 类将其上传到服务器。这一切都很好，但我需要向用户显示一个百分比上传的进度文本/栏，但很难找到解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T06:05:49.620

听 ProgressEvent.PROGRESS：

```
var loader = new URLLoader();
loader.addEventListener(ProgressEvent.PROGRESS,progressHandler);

function progressHandler(e:ProgressEvent):void {
    trace(e.bytesLoaded/e.bytesTotal);
} 
```

但请注意，您的服务器必须支持为 flash 调度进度事件。在此处阅读相同的问题[链接](https://stackoverflow.com/questions/99319/grab-a-progressevent-from-a-post-upload-in-as3)

# windows-8 - 如何从图片库下的目录中获取文件？

> ID：14391321
> 
> 赞同：1
> 
> 时间：2013-01-18T01:55:33.680
> 
> 标签：windows-8

我想知道如何从图片库下的目录中获取文件。(C:\Users\username\Pictures\MyFoler)

我知道如何从 PicturesLibrary 获取文件和文件夹。

```
StorageFolder picturesFolder = KnownFolders.PicturesLibrary;

IReadOnlyList<StorageFile> fileLists = await picturesFolder.GetFilesAsync();
IReadOnlyList<StorageFolder> folderLists = await picturesFolder.GetFoldersAsync(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:36:29.317

使用相同的通用机制，[StorageFolder](http://msdn.microsoft.com/en-us/library/windows/apps/br227230.aspx)公开[GetFoldersAsync](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefolder.getfoldersasync.aspx)和[GetFilesAsync](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefolder.getfilesasync.aspx)。

在您拥有的内容之后添加的此代码将获得 Pictures\MyFolder 中的文件列表

```
StorageFolder myFolder = folderLists.Where(f => f.DisplayName == "MyFolder").FirstOrDefault();
if (myFolder != null)
{
    ReadOnlyList<StorageFile> myPictures = await myFolder.GetFilesAsync();
} 
```

# php - 制作 PHP/MySQL 搜索引擎

> ID：14391325
> 
> 赞同：1
> 
> 时间：2013-01-18T01:56:02.463
> 
> 标签：php, mysql, database, search

在我正在制作的网站中，我需要一个搜索引擎来查找歌曲供人们收听。我让它可以从数据库中获取信息并将它们显示在页面上。当有两首歌曲同名时，问题就来了。我有一个系统，因此结果将转到单独的链接，但是当我搜索它们时，即使它们有两个单独的来源，它们也会显示相同的图像。由于某种原因，它也会产生额外的结果。这是我的代码：

```
<?php
if (isset($_GET['q'])) {
    $q = $_GET['q'];
    mysql_connect('********', '********', '********');
    mysql_select_db('********');
    $query = mysql_query("SELECT * FROM ******** WHERE title LIKE '$q'");
    $numrows = mysql_num_rows($query);
} else {
    echo "
<span style='font-family: Helvetica, Arial;font-weight: bold;font-size: 25px;'>Search</span>
<form action='http://www.example.com/search' method='get'>
<input placeholder='Search for music' type='text' name='q' style='font-weight:bold;padding:5px;width:300px;border-top-left-radius: 4px;border-top-right-radius: 10px;border-bottom-left-radius: 10px;border-bottom-right-radius: 4px;border: 3px solid gray;background-color:#000000;color:#FFFFFF;' />
</form>
    ";
}
if ($numrows != 0) {
    $index = 0;
    $results = array();
    while($row = mysql_fetch_assoc($query)) {
        $results[$index] = $row;
        $index++;
        foreach ($results as $result) {
            $url = "http://www.example.com?id=" . $row['id'];
            $title = $row['title'];
            $arturl = $row['art_url'];
            if ($_GET['q'] != "") {
                echo "
                    <a href='$url'>
                    <table>
                    <tr style='text-align:left;'>
                    <td><img src='$arturl' style='width:100px;height:100px;'></td>
                    <td>
                    <span class='songTitle'>$title</span>
                    <br/>
                    <span class='songArtist'>By: Unknown</span>
                    </td>
                    </tr>
                    </table>
                    </a>
                    <br />              
                ";
            }
        }   
    }
} else {
    if ($_GET['q'] != "") {
        echo "
<span style='font-family: Helvetica, Arial;font-weight: bold;font-size: 25px;'>Search</span>
<form action='********' method='get'>
<input placeholder='Search for music' type='text' name='q' style='font-weight:bold;padding:5px;width:300px;border-top-left-radius: 4px;border-top-right-radius: 10px;border-bottom-left-radius: 10px;border-bottom-right-radius: 4px;border: 3px solid gray;background-color:#000000;color:#FFFFFF;' />
</form>
        ";
        echo "<br />No results where found.";
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T02:19:13.080

while($row = mysql_fetch_array($result))尝试`$result['title']`代替`$row['title']`;。同样适用于`$url`和`$arturl`

这应该有效。

```
if ($numrows != 0) {
    $index = 0;
    $results = array();
    while($row = mysql_fetch_array($query)) {
            $url = "http://www.example.com?id=" . $row['id'];
            $title = $row['title'];
            $arturl = $row['art_url'];
            if ($_GET['q'] != "") {
                echo "
                    <a href='$url'>
                    <table>
                    <tr style='text-align:left;'>
                    <td><img src='$arturl' style='width:100px;height:100px;'></td>
                    <td>
                    <span class='songTitle'>$title</span>
                    <br/>
                    <span class='songArtist'>By: Unknown</span>
                    </td>
                    </tr>
                    </table>
                    </a>
                    <br />              
                ";
            }
    }           
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:02:38.470

您的代码似乎正确。但是，为了澄清，请尝试回显 $arturl 并查看它是否获得了正确的源名称。并检查数据库中的值。最后一件事是尝试检查源图像是否在正确的文件夹中。尝试并提供反馈。

# c++ - 如何获取持续时间，如整数毫秒和浮点秒数 ?

> ID：14391327
> 
> 赞同：109
> 
> 时间：2013-01-18T01:56:22.573
> 
> 标签：c++, c++11, timer, chrono

我正在尝试将 chrono 库用于计时器和持续时间。

我希望能够有一个`Duration frameStart;`（从应用程序开始）和一个`Duration frameDelta;`（帧之间的时间）

我需要能够以`frameDelta`毫秒和浮点秒为单位获得持续时间。

你如何使用新的 c++11`<chrono>`库来做到这一点？我一直在研究它并在谷歌上搜索（信息很少）。代码被大量模板化，需要特殊的演员表和东西，我不知道如何正确使用这个库。

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2013-01-18T02:33:01.893

这是你要找的吗？

```
#include <chrono>
#include <iostream>

int main()
{
    typedef std::chrono::high_resolution_clock Time;
    typedef std::chrono::milliseconds ms;
    typedef std::chrono::duration<float> fsec;
    auto t0 = Time::now();
    auto t1 = Time::now();
    fsec fs = t1 - t0;
    ms d = std::chrono::duration_cast<ms>(fs);
    std::cout << fs.count() << "s\n";
    std::cout << d.count() << "ms\n";
} 
```

对我来说打印出来：

```
6.5e-08s
0ms 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-03-07T20:17:02.997

猜猜你要的是什么。我假设您正在寻找类似于以下内容的毫秒帧计时器，

```
double mticks()
{
    struct timeval tv;
    gettimeofday(&tv, 0);
    return (double) tv.tv_usec / 1000 + tv.tv_sec * 1000;
} 
```

但`std::chrono`改为使用，

```
double mticks()
{
    typedef std::chrono::high_resolution_clock clock;
    typedef std::chrono::duration<float, std::milli> duration;

    static clock::time_point start = clock::now();
    duration elapsed = clock::now() - start;
    return elapsed.count();
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-01-18T02:15:38.280

我不知道“毫秒和浮点秒”是什么意思，但这应该给你一个想法：

```
#include <chrono>
#include <thread>
#include <iostream>

int main()
{
  auto then = std::chrono::system_clock::now();
  std::this_thread::sleep_for(std::chrono::seconds(1));
  auto now = std::chrono::system_clock::now();
  auto dur = now - then;
  typedef std::chrono::duration<float> float_seconds;
  auto secs = std::chrono::duration_cast<float_seconds>(dur);
  std::cout << secs.count() << '\n';
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-03-05T11:14:23.677

在[AAA 样式](http://herbsutter.com/2013/08/12/gotw-94-solution-aaa-style-almost-always-auto/)中，使用[显式类型的初始化器惯用语](http://shop.oreilly.com/product/0636920033707.do)：

```
#include <chrono>
#include <iostream>

int main(){
  auto start = std::chrono::high_resolution_clock::now();
  // Code to time here...
  auto end = std::chrono::high_resolution_clock::now();

  auto dur = end - start;
  auto i_millis = std::chrono::duration_cast<std::chrono::milliseconds>(dur);
  auto f_secs = std::chrono::duration_cast<std::chrono::duration<float>>(dur);
  std::cout << i_millis.count() << '\n';
  std::cout << f_secs.count() << '\n';
} 
```

# android - ququer背后的技术是什么？

> ID：14391329
> 
> 赞同：0
> 
> 时间：2013-01-18T01:56:43.277
> 
> 标签：android, audio

我见过一个名为 ququer [http://xququ.com](http://xququ.com)的应用程序 ，它可以使用哔声在移动设备和其他一些设备之间共享消息或文件。

我认为信息以某种格式编码为声音，但不知道如何完成。

是否有一些成熟的解决方案，特别是对于android？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:42:52.583

有两种主要的方法可以将信息编码为声音。请记住，声音是特定频率的波。您可以将其编码为声音的音量（波的幅度）或波的频率。有调幅和调频，或AM和FM。就像收音机一样，只是在不同的频率范围内。

AM不会太难。发送者将以 50% 音量或 100% 音量发出已知频率的声音，接收者将在麦克风上收听，使用带通滤波器获取该频率，并测量音量。FM 会有点困难，但它可以使用两个频率略有不同的声音文件并做同样的事情——因为我们想要二进制数据，所以实际上并不难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T04:08:58.417

我想制作这样的应用程序，但不是创建糟糕的调制解调器声音，而是制作类似 R2D2 的声音。从来没有解决它。无论如何，回答您的问题：Gabe Sechan 列出了声音（或任何波）可用于传输信息的两种方式。第三种称为相位调制。

这三种技术（AM、FM 和 PM）一起是如何将来自一个信号的数据强加到另一个信号并传输的主要技术，但它们是*模拟*调制的示例。对于此应用，您需要*数字*调制。这有点超出我的专业知识，所以我会推荐你​​到维基百科（尽管也许其他人可以在这里给出更彻底的答案）：

[http://en.wikipedia.org/wiki/Modulation#Digital_modulation_methods](http://en.wikipedia.org/wiki/Modulation#Digital_modulation_methods)

您可能还想在 dsp.stackexchange.com 上询问更好的起点。这里有很多要知道的，但也许我已经给了你足够的信息来谷歌一些开源库，或者至少问正确的问题。

当然，您**可以**使用 Gabe Sechan 建议的技术，您可能会发现它们更直观。事实上，许多（大多数？全部？）数字调制技术都使用模拟调制作为起点。但是，您的数据速率可能会更低。

# java - 如何从 Alt+Tab 隐藏 Java 应用程序？

> ID：14391330
> 
> 赞同：1
> 
> 时间：2013-01-18T01:56:48.947
> 
> 标签：java

我已经使用 Java 编写了一个程序，以在每个其他窗口的顶部的屏幕上显示一些消息。当我使用`Alt`+`Tab`时，我不想看到它。我怎样才能从`Alt`+隐藏它`Tab`？操作系统是windows 7

# odoo - Openerp 登录错误

> ID：14391332
> 
> 赞同：3
> 
> 时间：2013-01-18T01:57:24.100
> 
> 标签：odoo

我一直收到此错误，无法查看用户的列表和项目/任务，甚至无法使用用户的登录信息登录。

谁能帮我..

谢谢你。

OpenERP 服务器错误

```
Client Traceback (most recent call last):   
File "/opt/openerp/server/openerp/addons/web/http.py", line 195, in dispatch 
      response["result"] = method(self, **self.params)   
File "/opt/openerp/server/openerp/addons/web/controllers/main.py", line 1012, in search_read
     return self.do_search_read(req, model, fields, offset, limit, domain, sort)   
File "/opt/openerp/server/openerp/addons/web/controllers/main.py", line 1047, in do_search_read
     records = Model.read(ids, fields or False, req.context)   
File "/opt/openerp/server/openerp/addons/web/session.py", line 40, in proxy
     result = self.proxy.execute_kw(self.session._db, self.session._uid, self.session._password, self.model, method, args, kw)   
File "/opt/openerp/server/openerp/addons/web/session.py", line 28, in proxy_method
     result = self.session.send(self.service_name, method, *args)   
File "/opt/openerp/server/openerp/addons/web/session.py", line 101, in send
     raise xmlrpclib.Fault(openerp.tools.exception_to_unicode(e), formatted_info)

Server Traceback (most recent call last):   
File "/opt/openerp/server/openerp/addons/web/session.py", line 87, in send
     return openerp.netsvc.dispatch_rpc(service_name, method, args)   
File "/opt/openerp/server/openerp/netsvc.py", line 361, in dispatch_rpc
     result = ExportService.getService(service_name).dispatch(method, params)   
File "/opt/openerp/server/openerp/service/web_services.py", line 601, in dispatch
     res = fn(db, uid, *params)   
File "/opt/openerp/server/openerp/osv/osv.py", line 167, in execute_kw
     return self.execute(db, uid, obj, method, *args, **kw or {})   
File "/opt/openerp/server/openerp/osv/osv.py", line 121, in wrapper
     return f(self, dbname, *args, **kwargs)   
File "/opt/openerp/server/openerp/osv/osv.py", line 176, in execute
     res = self.execute_cr(cr, uid, obj, method, *args, **kw)   
File "/opt/openerp/server/openerp/osv/osv.py", line 164, in execute_cr
     return getattr(object, method)(cr, uid, *args, **kw)   
File "/opt/openerp/server/openerp/addons/base/res/res_users.py", line 796, in read
     res = super(users_view, self).read(cr, uid, ids, fields, context=context, load=load)   
File "/opt/openerp/server/openerp/addons/base/res/res_users.py", line 272, in read
     result = super(res_users, self).read(cr, uid, ids, fields=fields, context=context, load=load)   
File "/opt/openerp/server/openerp/osv/orm.py", line 3575, in read
     result = self._read_flat(cr, user, select, fields, context, load)   
File "/opt/openerp/server/openerp/osv/orm.py", line 3660, in _read_flat
     record.update(res3[record[col]]) 
KeyError: 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:23:29.800

错误表明数据库中不存在 id 3 的记录。

当您尝试从数据库中读取数据时，它会删除您尝试读取的记录。

请重新连接并尝试打开项目/任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-28T12:04:47.457

仅凭该信息很难找到错误，但由于更新 openerp 服务器时出现问题，我多次遇到关键错误，并且在再次全部更新后，问题消失了。

尝试从用户界面更新模块*库*，如果不起作用，请尝试从控制台重新启动并更新所有 openerp 服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-26T06:10:10.577

如果有任何功能字段，请检查它。在以所需格式返回值时，会在功能字段中引发这种键错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-30T14:15:58.020

备份数据库，删除当前数据库并创建一个新的，稍后您可以导入所有数据。

# java - 多维四向链表

> ID：14391334
> 
> 赞同：5
> 
> 时间：2013-01-18T01:57:27.990
> 
> 标签：java, reference, linked-list

好的..所以我决定尝试使用 Java 中的链表，而不是我用来引用指针的常用 C++。

对于中心节点，遍历可以是上、下、左、右。对于角上的节点，它们只能移动两个方向，边缘上的节点可以移动 3 个方向。所有其他的都可以移动 4 个方向。

问题：

当我的程序离开构造函数时，我的节点以某种方式被删除：S 当我使用 get/set 时，它无法遍历链接，因为它们是空的。除了第一个节点。

我的节点是：

```
package linkedlist;

public class Node {
    public Node Up, Down, Left, Right;
    public int Value;

    public Node() {
        Value = -1;
        Up = Down = Left = Right = null;
    }
} 
```

我执行如下操作：

```
package linkedlist;

public class Matrix {
    private int Width, Height;
    private Node Reference;

    public Matrix(int Width, int Height) {
        Reference = new Node();
        this.Width = Width; this.Height = Height;
        Node RowIterator = Reference, ColumnIterator = Reference;

        for (int I = 0; I < Height; ++I) {
            for (int J = 0; J < Width; ++J) {
                if (I == 0) {
                    if (J < Width - 1) {
                        RowIterator.Right = new Node();
                        RowIterator.Right.Left = RowIterator;
                        RowIterator = RowIterator.Right;
                    }
                }
                else {
                    if (I < Height - 1) {
                        ColumnIterator.Down = new Node();
                    }

                    RowIterator = ColumnIterator;
                    RowIterator.Right = new Node();
                    RowIterator.Up = ColumnIterator;
                    RowIterator.Up.Down = RowIterator;
                    RowIterator.Right.Left = RowIterator;
                    RowIterator.Right.Up = RowIterator.Up.Right;
                    RowIterator = RowIterator.Right;

                    ColumnIterator = ColumnIterator.Down;
                }
            }
        }
    }

    public void SetValue(int I, int J, int Value) {
          //Same as get except it sets rather than returns..
    }

    public int GetValue(int I, int J) {
        RowIterator = ColumnIterator = Reference;
        for (int K = 0; K < J; ++K) {
            for (int L = 0; L < I; ++L) {
                RowIterator = RowIterator.Right;
            }

            ColumnIterator = ColumnIterator.Down;
            RowIterator = ColumnIterator;
        }

        return RowIterator.Value;
    }
} 
```

主要的喜欢：

```
package linkedlist;

public class LinkedList {
    public static void main(String[] args) {
        Matrix M = new Matrix(6, 6);

        M.SetValue(3, 3, 10);
    }
} 
```

因此，当我尝试将值设置在矩阵中间附近时，它会引发空指针错误。如果我尝试在构造函数中设置它，它工作得很好。因此，我的节点必须以某种方式得到垃圾清理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T02:06:17.057

遍历行的次数与向下遍历列的次数一样多。即，在您的示例中，访问的实际节点是 (9, 3)，超出了`Matrix`.

相反，您应该遍历行一次，然后向下遍历一次。

```
for (int K = 0; K < J; ++K) {
    Iterator = Iterator.Down;
}

for (int L = 0; L < I; ++L) {
    Iterator = Iterator.Right;
} 
```

您不只是使用二维数组有什么特别的原因吗？

# opengl - Windows 中的 MIDI 嗅探 + OpenGL

> ID：14391338
> 
> 赞同：2
> 
> 时间：2013-01-18T01:57:48.820
> 
> 标签：opengl, windows-7, midi

我目前正在为我的图形类指定项目，并且正在考虑编写一个显示 midi 数据可视化器的应用程序。我想做的是在通过系统时嗅探midi数据。我不想劫持驱动程序，只看数据经过（也就是说，我希望 MIDI 数据以后可以被 DAW 访问）。我不熟悉在 Windows 中以编程方式访问 midi。我能找到的最接近我想要的似乎是[midi spy](https://github.com/hiben/MIDISpy)。但是我更喜欢用 c/c++ 编写应用程序。

我正在查看[MIDI Stream API](http://www.blitter.com/~russtopia/MIDI/~jglatt/tech/stream.htm)，但我不知道我是否能够嗅探库未打开的设备。我也在看[SDL Mixer](http://www.libsdl.org/projects/SDL_mixer/)和[QT Midi](http://qt-project.org/search/tag/midi)。我只是想对我提出的选项或我没有找到的选项进行一些个人的利弊。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T03:36:41.013

不幸的是，没有办法在 Windows 下实际嗅探 MIDI 流。您所能做的就是将您的应用程序放在两个 MIDI 设备之间。

除非您在物理输入/输出端口之间放置软件，否则您将需要设置一个虚拟 MIDI 环回驱动程序，将 MIDI 流数据从输入引导到输出。幸运的是，已经有一些现成的解决方案。最简单的方法是要求您的用户设置一个虚拟 MIDI 端口并自行配置。 [LoopBe1](http://www.nerds.de/en/loopbe1.html)和[MIDI Yoke](http://www.midiox.com/)是免费的。

另一种方法是使用直接连接到您的应用程序的虚拟 MIDI 驱动程序。 [Tobias Erichsen](http://www.tobias-erichsen.de/software.html)为此目的创建了一个非常易于使用的驱动程序。我不相信他已经发布了它，但是如果你给他发一封电子邮件，他可能会回复你。看到这个问题： [DDK“Hello World”](https://stackoverflow.com/q/3954552/362536)

# php - 引用类中的方法

> ID：14391339
> 
> 赞同：0
> 
> 时间：2013-01-18T01:57:54.887
> 
> 标签：php

> **可能重复：**
> [从带有参数的字符串调用 php 类方法](https://stackoverflow.com/questions/6531019/call-php-class-method-from-string-with-parameter)

我试图通过方法的字符串和类的字符串调用类中的方法`call_user_func_array()`

例如：

```
$class = 'Posts';
$classObj = new $class();
$func = 'makePost';
$params = array('something', 'somethingelse');
call_user_func_array($classObj->$func, $params); 
```

这对我不起作用。：C

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T01:58:28.060

您将使用`array`, 第一项是对象，第二项是您要调用的函数名称的字符串：

```
call_user_func_array( array( $classObj, $func), $params); 
```

这是在 PHP中使用[回调](http://us2.php.net/manual/en/language.types.callable.php)的示例。

# ruby - 安装 CocoaPods 时遇到问题

> ID：14391346
> 
> 赞同：2
> 
> 时间：2013-01-18T01:59:07.883
> 
> 标签：ruby, cocoapods

每当我尝试 gem install cocoapods 我得到一个错误

```
Basil-MBP:Magic8Ball Basil$ gem install cocoapods
Fetching: cocoapods-0.16.1.gem (100%)
Successfully installed cocoapods-0.16.1
1 gem installed
Installing ri documentation for cocoapods-0.16.1...
Installing RDoc documentation for cocoapods-0.16.1...
ERROR:  While generating documentation for cocoapods-0.16.1
... MESSAGE:   "\xE2" from ASCII-8BIT to UTF-8
... RDOC args: --op /Users/Basil/.rvm/gems/ruby-1.9.3-p327@rails329/doc/cocoapods-0.16.1/rdoc lib --title cocoapods-0.16.1 Documentation --quiet 
```

如果我 sudo gem install cocoapods 但是“pods setup”不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T02:15:34.387

您可以在没有文档的情况下安装 gem`gem install cocoapods --no-rdoc --no-ri`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-14T11:18:08.053

**尝试更新你的宝石**

```
sudo update gems 
```

**然后**

```
sudo gem install cocoapods 
```

# java - xstream 中没有隐式收集错误的字段

> ID：14391350
> 
> 赞同：1
> 
> 时间：2013-01-18T01:59:43.910
> 
> 标签：java, xml-parsing, xstream

我一直在尝试使用 XStream 来转换 XML（它是来自 flash 前端的字符串格式，我可以完全控制 xml 结构）。

```
<consistsOf>
 <content>
  <name>Rice</name>
  <price>22</price>
 </content>
 <content>
  <name>chicken</name>
  <price>44</price>
 </content>
</consistsOf> 
```

我正在尝试使用以下代码将数据放入对象中：

```
XStream xstream = new XStream();
            xstream.alias("consistsOf", ContentsList.class);
            xstream.alias("content", Contents.class);
            xstream.addImplicitCollection(ContentsList.class, "consistsOf"); 
```

我得到这个错误：

> 没有用于隐式集合的字段“consistsOf”

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:28:11.960

你需要

```
public class ContentsList {

...

    public List<Contents> consistsOf;

...

} 
```

# android - 动态添加文本视图不起作用

> ID：14391354
> 
> 赞同：0
> 
> 时间：2013-01-18T02:00:37.140
> 
> 标签：android, json, textview

我在 main.xml 文件和 rows.xml 文件中有以下代码。主要的.xml

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:shrinkColumns="*"
    android:stretchColumns="*" >

    <TableRow
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:layout_width="0px"
            android:layout_height="match_parent"
            android:layout_weight="0.40"
            android:gravity="center"
            android:text="Time">
        </TextView>

        <TextView
            android:layout_width="0px"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:gravity="center"
            android:text="Module">
        </TextView>

        <TextView
            android:layout_width="0px"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:gravity="center"
            android:text="Lecturer">
        </TextView>
    </TableRow>

    <ListView
        android:id="@+id/listview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ListView>

    </TableLayout> 
```

行.xml

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:shrinkColumns="*"
    android:stretchColumns="*" >

    <ListView
        android:id="@+id/info"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ListView>

    <TableRow
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/time"
            android:layout_width="0px"
            android:layout_height="match_parent"
            android:layout_weight="0.40"
            android:gravity="center" >
        </TextView>

        <TextView
            android:id="@+id/module"
            android:layout_width="0px"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:gravity="center">
        </TextView>

        <TextView
            android:id="@+id/lecturer"
            android:layout_width="0px"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:gravity="center" >
        </TextView>
    </TableRow>
</TableLayout> 
```

我想每 8 行添加一个带有星期几的文本视图（从 0 开始）。如果我想将 textview 添加到 main.xml 文件中，我可以添加 textview，但是如果我将相同的代码放在 rows.xml 文件中（并将其从 main.xml 文件中删除），则应用程序将无法运行（没有出现错误，但 Eclipse 会显示调试选项卡，其中包含以下内容：)

```
Thread [<1> main] (Suspended (exception RuntimeException))  
    <VM does not provide monitor information>   
    ActivityThread.performLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1651    
    ActivityThread.handleLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1667 
    ActivityThread.access$1500(ActivityThread, ActivityThread$ActivityClientRecord, Intent) line: 117   
    ActivityThread$H.handleMessage(Message) line: 935   
    ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
    Looper.loop() line: 130 
    ActivityThread.main(String[]) line: 3687    
    Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
    Method.invoke(Object, Object...) line: 507  
    ZygoteInit$MethodAndArgsCaller.run() line: 867  
    ZygoteInit.main(String[]) line: 625 
    NativeStart.main(String[]) line: not available [native method]  
Thread [<8> Binder Thread #2] (Running) 
Thread [<7> Binder Thread #1] (Running) 
```

我哪里出错了，我该如何解决？

编辑：Logcat

```
01-18 02:44:14.656: W/ActivityThread(893): Application com.example.timetable is waiting for the debugger on port 8100...
01-18 02:44:14.664: I/System.out(893): Sending WAIT chunk
01-18 02:44:14.882: I/System.out(893): Debugger has connected
01-18 02:44:14.882: I/System.out(893): waiting for debugger to settle...
01-18 02:44:15.078: I/System.out(893): waiting for debugger to settle...
01-18 02:44:15.281: I/System.out(893): waiting for debugger to settle...
01-18 02:44:15.484: I/System.out(893): waiting for debugger to settle...
01-18 02:44:15.679: I/System.out(893): waiting for debugger to settle...
01-18 02:44:15.898: I/System.out(893): waiting for debugger to settle...
01-18 02:44:16.093: I/System.out(893): waiting for debugger to settle...
01-18 02:44:16.296: I/System.out(893): debugger has settled (1410)
01-18 02:44:16.476: I/ApplicationPackageManager(893): cscCountry is not German : VDI 
```

动态文本视图的代码

```
View linearLayout =  findViewById(R.id.info);

int a = 0;  
while(x < 41)
{
            //The textview is only printed out every 8 rows because there is only 8 classes a day and the day is printed out at the start
    if(x == 0 || x == 8 || x == 16 || x == 24 || x == 32)
    {

            TextView valueTV = new TextView(this);
            valueTV.setText(fetch2.get(a)); //fetch2 has the days of the week stored in it
            valueTV.setId(x);
            valueTV.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
            a++;

        ((LinearLayout) linearLayout).addView(valueTV); 
        x++;
    }
    else
    {
        lv = (ListView) findViewById(R.id.listview);
        adapter = new CustomAdapter(MainActivity.this, R.id.listview, fetch); //fetch has the time, module and lecturer stored
        lv.setAdapter(adapter);
        x++;
    }
} 
```

编辑：Main.java

```
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;

import org.json.JSONArray;
import org.json.JSONObject;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.LinearLayout;

public class Main extends Activity {
private ListView lv;
private CustomAdapter adapter;
private ArrayList<Custom> fetch = new ArrayList<Custom>();
private ArrayList<String> fetch2 = new ArrayList<String>();
private int x = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main); 

    fetch2.add("Monday");
    fetch2.add("Tuesday");
    fetch2.add("Wednesday");
    fetch2.add("Thursday");
    fetch2.add("Friday");

    InputStream inputStream = getResources().openRawResource(R.raw.timetable);

    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

    int ctr;
    try {
        ctr = inputStream.read();
        while (ctr != -1) {
            byteArrayOutputStream.write(ctr);
            ctr = inputStream.read();

        }
        inputStream.close();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {

        //Parse the data into jsonobject to get original data in form of json.  
        JSONObject jObject = new JSONObject(byteArrayOutputStream.toString());

                    //Grabs the data for each day
        JSONArray Monday = jObject.getJSONArray("Monday");
        JSONArray Tuesday = jObject.getJSONArray("Tuesday");
        JSONArray Wednesday = jObject.getJSONArray("Wednesday");
        JSONArray Thursday = jObject.getJSONArray("Thursday");
        JSONArray Friday = jObject.getJSONArray("Friday");

        String time= "";
        String module = "";
        String lecturer = "";

                    //Adding each days data
        for (int i = 0; i < Monday.length(); i++) 
        {
            time = Monday.getJSONObject(i).getString("time");
            module = Monday.getJSONObject(i).getString("module");
            lecturer = Monday.getJSONObject(i).getString("lecturer");
            Custom a = new Custom(time, module, lecturer);
            fetch.add(a);
        }
        for (int i = 0; i < Tuesday.length(); i++) 
        {   
            time = Tuesday.getJSONObject(i).getString("time");
            module = Tuesday.getJSONObject(i).getString("module");
            lecturer = Tuesday.getJSONObject(i).getString("lecturer");
            Custom a = new Custom(time, module, lecturer);
            fetch.add(a);
        }       
        for (int i = 0; i < Wednesday.length(); i++) 
        {
            time = Wednesday.getJSONObject(i).getString("time");
            module = Wednesday.getJSONObject(i).getString("module");
            lecturer = Wednesday.getJSONObject(i).getString("lecturer");
            Custom a = new Custom(time, module, lecturer);
            fetch.add(a);
        }   
        for (int i = 0; i < Thursday.length(); i++) 
        {
            time = Thursday.getJSONObject(i).getString("time");
            module = Thursday.getJSONObject(i).getString("module");
            lecturer = Thursday.getJSONObject(i).getString("lecturer");
            Custom a = new Custom(time, module, lecturer);
            fetch.add(a);
        }   
        for (int i = 0; i < Friday.length(); i++) 
        {
            time = Friday.getJSONObject(i).getString("time");
            module = Friday.getJSONObject(i).getString("module");
            lecturer = Friday.getJSONObject(i).getString("lecturer");
            Custom a = new Custom(time, module, lecturer);
            fetch.add(a);
        }               

    } catch (Exception e) {
        e.printStackTrace();
    }

    View linearLayout =  findViewById(R.id.info);

    int a = 0;  
    while(x < 41)
    {
                    //The textview is only printed out every 8 rows because there is only 8 classes a day and the day is printed out at the start
        if(x == 0 || x == 8 || x == 16 || x == 24 || x == 32)
        {       
            TextView valueTV = new TextView(this);
            valueTV.setText(fetch2.get(a));
            valueTV.setId(x);
            valueTV.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
            a++;

            ((LinearLayout) linearLayout).addView(valueTV); 
        }
        else
        {
                    //Adding each days data
            lv = (ListView) findViewById(R.id.listview);
            adapter = new CustomAdapter(MainActivity.this, R.id.listview, fetch);
            lv.setAdapter(adapter);
            x++;
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T05:57:52.933

你没有任何带有 id 信息的线性布局，所以当程序试图在这里找到它时

```
View linearLayout =  findViewById(R.id.info); 
```

代码将中断

您尝试`@+id/info`从您的代码中访问列表视图，但在您的代码中，`onCreate`您将内容视图设置为，`R.layout.main`因此代码将尝试`@+id/info`在 main.xml 中查找并且代码将找不到它，因为您在 rows.xml 中声明了它，解决方案是您可以尝试动态添加rows.xml（使用inflater）或者我更喜欢使用扩展表布局的java文件创建另一个视图（或另一个布局并创建自己的`TableLayout`）并使用动态添加另一个视图`view.addView`。

这是一个简单的示例（示例扩展`LinearLayout`）

```
public class ChildMyBadge extends LinearLayout {

private Context context;
private ChildTopModel contentModel;

public ChildMyBadge(Context context) {
    super(context);
}

public ChildMyBadge(Context context, ChildTopModel contentModel) {
    super(context);
    // TODO Auto-generated constructor stub
    this.context = context;
    this.setOrientation(VERTICAL);
    this.contentModel = contentModel;
    LayoutParams lpMyBadge = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
    lpMyBadge.gravity = Gravity.CENTER;
    this.setLayoutParams(lpMyBadge);
    this.setGravity(Gravity.CENTER);
    initView();
}

private void initView() {

    LinearLayout llContainerInfo = new LinearLayout(context);
    llContainerInfo.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,Util.getDisplayWidth(context)/20) );
    llContainerInfo.setGravity(Gravity.RIGHT | Gravity.CENTER_VERTICAL);
    TextView tvInfo = new TextView(context);
    LayoutParams lpInfo = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
    lpInfo.setMargins(Util.getDisplayWidth(context)/100, Util.getDisplayWidth(context)/100, 
            Util.getDisplayWidth(context)/100, Util.getDisplayWidth(context)/100);
    tvInfo.setLayoutParams(lpInfo);
    tvInfo.setText(R.string.MyBadgeInfo);
    tvInfo.setTextSize(7);

    llContainerInfo.addView(tvInfo);
    this.addView(llContainerInfo);
    ArrayList<Integer> temp_friend_id = new ArrayList<Integer>();
    ArrayList<Integer> friend_id = contentModel.getFriend_id();
    Log.i(BaseID.TAG, "Size : " + friend_id.size());
    for(int i=0;i<8;i++)
    {
        temp_friend_id.add(friend_id.get(i));
    }
    Log.i(BaseID.TAG, temp_friend_id.toString());
    this.addView(new ChildMyBadgeRow(context,1,temp_friend_id));
    for(int j=0;j<4;j++)
    {
        temp_friend_id.clear();
        for(int i=(8+j*6);i<(14+j*6);i++)
        {
            temp_friend_id.add(friend_id.get(i));
        }
        Log.i(BaseID.TAG, temp_friend_id.toString());
        this.addView(new ChildMyBadgeRow(context, 2,temp_friend_id));
    }
    }
} 
```

您可以看到我正在动态添加我的行，每一行也将动态添加单元格，因此该过程将是：

mainview构造函数->循环多少行并添加行->每次调用行构造函数->循环将添加多少个单元格

我希望你至少能理解我的解释，为什么你的代码会给你错误。

# php - 如何更改我的 Web 服务器上的 FcgidMaxRequestLen？

> ID：14391355
> 
> 赞同：4
> 
> 时间：2013-01-18T02:00:41.290
> 
> 标签：php, file, file-upload

好的，我做了很多研究，但仍然令人困惑。

基本上我有一个 php 文件，它是一个表单，当文件大于大约 5mb 时，我不断收到内部服务器错误。我增加了 php.ini 文件中的所有设置，例如最大上传和增加超时。我检查了我的网络服务器上的错误日志，它说：

“mod_fcgid：HTTP 请求长度 16777688（到目前为止）超过 MaxRequestLen (16777216)”

我建立了 SSH 连接并编辑了文件 /etc/httpd/conf.d/fcgid.conf 并添加了 FcgidMaxRequestLen 1073741824 行并尝试将其增加到 1GB。

我的服务器有 2GB，所以我觉得我很好。我重新启动了 apache，然后尝试再次上传文件并得到相同的错误“mod_fcgid：HTTP 请求长度 16777688（到目前为止）超过 MaxRequestLen（16777216）”，最大大小没有改变。我在godaddy vps服务器上。也许在plesk中有一个地方。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-04-05T10:18:26.580

我认识到这个问题已经很老了，但也许我的回答对某人有帮助：

`FcgidMaxRequestLen`您可以在您的 Plesk 配置 中覆盖每个域的值，`Plesk -> Domains -> domain.tld -> Apache & Nginx settings -> Additional directives for HTTP & HTTPS`例如

```
<IfModule mod_fcgid.c>
FcgidMaxRequestLen 1073741824
FcgidMaxRequestsPerProcess 100
FcgidProcessLifeTime 7200
</IfModule> 
```

见这里：[https ://talk.plesk.com/threads/problems-overwriting-fcgidmaxrequestlen.337579/#post-799693](https://talk.plesk.com/threads/problems-overwriting-fcgidmaxrequestlen.337579/#post-799693)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-09T03:24:14.307

我无法提供现成的帮助，但至少有一些要点需要调查，因为我今天也偶然发现了这个话题：

*   请求长度不是您在日志中看到的默认值（请参阅[http://www.howtoforge.com/apache2-mod_fcgid-http-request-length-exceeds-maxrequestlen](http://www.howtoforge.com/apache2-mod_fcgid-http-request-length-exceeds-maxrequestlen)）

=> 因此，我认为 16777216 是通过 plesk 在“较低”级别上定义的。

您的配置更改了系统范围的默认值（从 131072 开始），但仍被 plesk 覆盖。

可能是过量了，但是您是否尝试通过 apache 的配置文件夹进行 grep？

# php - PHP中的静态变量对于每个用户都是不同的

> ID：14391367
> 
> 赞同：0
> 
> 时间：2013-01-18T02:03:07.307
> 
> 标签：php

对于连接到 PHP 页面的每个用户，PHP 中的静态变量都是不同的。如果一个静态变量应该是……好吧，静态的，怎么会这样？

这就引出了这个问题的第二部分：有没有办法创建一个在所有连接之间共享的全局静态变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T02:21:17.827

静态变量只是静态的，并且在特定的执行范围内可用。一旦产生该 PHP 实例的 Apache 线程被销毁，该静态变量就会从内存中删除。由于第二个用户访问您的 Web 服务器将意味着 Apache 加载一个新线程，产生一个全新的 PHP 实例，该实例在其自己的范围内运行。因此，第一个线程中定义的静态变量在第二个线程中不可用。

# php - curl_multi_exec() 是阻塞调用吗？

> ID：14391368
> 
> 赞同：5
> 
> 时间：2013-01-18T02:03:29.093
> 
> 标签：php, curl, libcurl, curl-multi

只是好奇`curl_multi_exec()`PHP中的调用是阻塞调用还是非阻塞调用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T07:06:00.340

*射击***答案**：`curl_multi_exec()`非阻塞

 *** * *

*更长的答案*:`curl_multi_exec()`是**non-blocking**，但是**可以使用 的组合进行阻塞`curl_multi_select`**，这会阻塞直到任何 curl_multi 连接上有活动。

**编辑：** 目前我正在研究爬虫，这是我使用的一段代码的大纲。

```
do {
    $mrc = curl_multi_exec($mh, $active);
    if($to_db_queue->count()>0){
       while($to_db_queue->count()>0)
          //dequeue from queue and insert into database
    }
    else  
      curl_multi_select($mh); //block till state change
} while ($active > 0); 
```

此代码将创建一个`curl_multi_exec`然后将继续其在队列中的数据库工作`$to_db_queue`，否则如果队列中没有任何内容`curl_multi_select`将被调用以阻塞循环，直到 curl_multi 连接中发生状态更改。

更多示例：
[非阻塞](http://goo.gl/9xkcF)
[阻塞](http://goo.gl/Fgr4c)

希望这能帮助你理解这个概念。**

# java - 指定类文件目标

> ID：14391369
> 
> 赞同：0
> 
> 时间：2013-01-18T02:03:31.173
> 
> 标签：java, jakarta-ee, tomcat

我正在尝试创建一个 servlet。我所有的文件都在这个`src`文件夹下。我正在使用`Eclipse

```
Java EE IDE for Web Developers.

Version: Indigo Service Release 2` 
```

但是，当我在向导下选择 servlet 时，我不断收到以下屏幕

![在此处输入图像描述](../Images/8c15c7f1d31b2bf0d775e97ea0f1053b.png)

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T05:21:19.860

需要创建一个动态 Web 项目，而不是一个基本的 Java 项目。只有这样，servlet 才会被创建。Servlet 不能单独存在于动态 Web 项目之外。

# javascript - 刷新页面后的 JavaScript 评级

> ID：14391373
> 
> 赞同：0
> 
> 时间：2013-01-18T02:04:02.970
> 
> 标签：javascript, javascript-events

我有一个显示评分的 java 脚本函数。当用户点击星星评分时，我需要显示感谢评分消息，当用户刷新页面时，我需要显示感谢评分消息而不是评分这篇文章。以下是我的代码：任何人都可以帮助我吗？

```
<script type="text/javascript">

var sMax;   // Isthe maximum number of stars
var holder; // Is the holding pattern for clicked state
var preSet; // Is the PreSet value onces a selection has been made
var rated;

// Rollover for image Stars //

function rating(num){
    sMax = 0;   // Isthe maximum number of stars
    for(n=0; n<num.parentNode.childNodes.length; n++){
        if(num.parentNode.childNodes[n].nodeName == "A"){
            sMax++; 
        }
    }

    if(!rated){
        s = num.id.replace("_", ''); // Get the selected star
        a = 0;
        for(i=1; i<=sMax; i++){     
            if(i<=s){
                document.getElementById("_"+i).className = "on";
                document.getElementById("rateStatus").innerHTML = num.title;    
                holder = a+1;
                a++;
            }else{
                document.getElementById("_"+i).className = "";
            }
        }
    }
}

// For when you roll out of the the whole thing //
function off(me){
    if(!rated){
        if(!preSet){    
            for(i=1; i<=sMax; i++){     
                document.getElementById("_"+i).className = "";
                document.getElementById("rateStatus").innerHTML = me.parentNode.title;
            }
        }else{
            rating(preSet);
            document.getElementById("rateStatus").innerHTML = document.getElementById("ratingSaved").innerHTML;
        }
    }
}

// When you actually rate something //
function rateIt(me){
    if(!rated){
        document.getElementById("rateStatus").innerHTML = document.getElementById("ratingSaved").innerHTML + " :: "+me.title;
        preSet = me;
        rated=1;
        sendRate(me);
        rating(me);
    }
}

// Send the rating information somewhere using Ajax or something like that.
function sendRate(sel){
    alert("Your rating was: "+sel.title);
}

</script>

<form id="form1">

<span id="rateStatus">Rate This Article:</span>
<span id="ratingSaved">Thank you for rating.</span> 
<div id="rateMe" title="Rate Me...">
    <a onclick="rateIt(this)" id="_1" title="ehh..." onmouseover="rating(this)" onmouseout="off(this)"></a>
    <a onclick="rateIt(this)" id="_2" title="Not Bad" onmouseover="rating(this)" onmouseout="off(this)"></a>
    <a onclick="rateIt(this)" id="_3" title="Pretty Good" onmouseover="rating(this)" onmouseout="off(this)"></a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T02:13:46.920

或者，如果您仍然要刷新页面，您也可以从服务器获取本文的当前评分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:07:14.813

您需要在用户评价文章后立即保存 cookie，并在再次加载页面时检查该 cookie 值以确认文章是否已加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T03:16:57.690

您在这里有几个选择，您所做的将取决于您的要求。

最大的问题是永久性问题之一。这样，如果我对某项内容进行评分并收到感谢消息，如果我从手机浏览器或另一台计算机上的浏览器查看同一页面，我应该看到吗？否则，它是否只是一条需要显示一次的消息，而您不在乎我以后是否再次看到“请评分”选项？

根据您关于在页面刷新之间保存状态的问题，听起来您的需求更倾向于保存永久性。

*最终，保证*评级状态永久保存的唯一方法是将其绑定到后端（服务器）应用程序上的用户帐户。这样，当我从其他浏览器查看同一页面时，或者经过很长时间后，服务器可以在数据库中查找并看到“Geuis 评分此，显示感谢消息”。

如果您只需要在短时间内显示Thank You，您可以将密钥存储在像 memcache 这样的临时缓存中。在每次页面刷新时，一小段 javascript 可以向您的缓存服务器发出 xhr 请求，以检查我是否对页面进行了评分。最终，密钥会从缓存中掉出来，所以可能在一小时或一天后，当我返回查看该页面时，系统会提示我对该页面进行评分。这是一个半永久性的解决方案，但只要绑定到一个帐户，它就可以在任何设备或浏览器上运行。

最脆弱但最容易实现的解决方案是纯粹的客户端。在这里，您的选择是 a) 将评级/未评级值存储在 cookie 中，或 b) 使用 localStorage。在任何一种情况下，它都会让存储状态。*但是*cookie 和 localStorage 不会在设备或浏览器之间传输。localStorage 不会过期，但 cookie 最终会过期。此外，用户最终可以决定清除他们的 cookie 和 localStorage 缓存，并将状态设置回“给我打分”。

我没有提供任何代码示例，因为我希望您能看到，答案首先在于*您*在永久性范围内试图完成的工作。

顺便说一句，真的没有匿名永久这样的东西。即，您不能让用户匿名访问您的站点，但不能以在浏览器之间传输的方式永久保存他们的投票状态。您*必须*拥有类似于服务器端帐户的东西才能做到这一点。

# ruby-on-rails - Rails 中的模板、部分和布局？

> ID：14391374
> 
> 赞同：10
> 
> 时间：2013-01-18T02:04:13.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3

回顾一些入门课程，我看到这些术语是单独使用的，但我认为我只了解布局。据我所知，布局是代码的临时部分（例如右侧导航部分、包含广告的 div 或类似内容），部分是部分模板，但什么是模板，它与布局？

如果可能的话，你能给出所有三个相互关系的定义吗？（即模板是......并且有两种，部分和布局......布局是特定类型的模板或任何答案）

如果需要，请更正我的假设...

在使用 pjax 的[Railscasts 294](http://railscasts.com/episodes/294-playing-with-pjax)中，布局由随机数生成器明确区分，这就是我迷路的原因。

我正在尝试制作一个由 App/Verb/noun 访问的页面，我可以在其中“捕获”或“显示”“照片”、“视频”、“图像”等......（应用程序/捕获/照片或app/captures/videos 或 app/displays/photos 等），并试图根据我“捕获”不同事物的时间只更改一个 div ......我真的不明白我在做什么。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-02-05T09:33:41.833

我知道这是一个老问题，但我也有同样的疑惑。在指南中，没有明确说明布局和视图之间的区别，也没有明确说明关系。为了增加混淆，术语“模板”通常用于两者。作为 90 年代编程 Smalltalk 的人（但对 Rails 不熟悉），我深刻理解 MVC 并理解实现它的许多方式中的一些——所以我的困惑不在于那部分。关于视图、布局和模板以及它们如何相互关联，只缺少一部分上下文。

我是这样理解的：

从一个*简单*的理解和例子开始，这样每个部分的关系和作用就清楚了：

*   **视图**是特定控制器响应动作（将其置于特定状态）的“要显示的东西” 。**视图**是您的模型在特定状态下针对特定操作（原因/上下文）的快照。它与信息和状态有关，不一定与“看起来不错”有关。
*   **布局**具有有关*如何*显示某些内容的特定信息。它可能有标记（CSS、HTML 等），提供有关如何组织某物的说明（这里的部分在上面，那里的部分，那些在底部，这些在顶部浮动；那是导航信息，这是 H1，那是 H3，这是一个定义..）以及它的外观（左、右、上、下、红色、绿色、强调、闪烁、隐藏、大、小、Helvetica 等）想想“**布局**”看起来**不错**”

假设您有一个 Contract 模型和控制器，并且您有一个定义视图的文件`view/contracts/show.htm.erb`：

```
 <% content_for :full_identification do %>
      <p><%= contract.display_name %>  <%=contract.full_id_number %> </p>
   <% end %>

   <% content_for :summary do %>
      <p> This is the summary for <%= contract.simple_name %>. You hire us. We give you coolness. You pay us.</p>
    <% end %>

  <% content_for :client_info do %>
    <div class="client-info">
      <p><span class="contract-title">Client: <%= contract.client_name%></span></p>
      <p>Address: <%= contract.client_address%></p>
      <p>Phone: <%= contract.client_phone %> </p>
         ... more info about the client.... 
    </div>
  <% end %>

  <% content_for :scope_of_work_statement do %>
    <p class="scope-of-work-statement"><%= contract.scope_of_work%>:</p>
  <% end %> 
```

您的**布局**文件将包含有关 HTML 的更多详细信息（假设为 HTML 输出）以及有关您希望事物外观的详细信息。也许您有一个控制器和视图，它特定于客户端查看该合同的内容（以及方式）。你有一个特定控制器的布局文件，它看起来像这样： `layouts/contracts/contracts_clients_view.htm.erb`

```
 <div class="tab-pane fade in"  >
    <div class="span7 highlight >
      <%= yield :full_identification %>
      <div class="no-breaks reflow" >
        <%= yield :summary%>
      </div>
    </div>

    <div class="span5 scope-of-work-statement">
        <h3>Scope of Work Statement</h3>
        <%= yield :scope_of_work_statement %>
        </div>
    </div>
 </div> 
```

*[这是一个完全人为的例子，以便我可以清楚地说明*视图*和*布局之间的关系。*显然，在现实世界中，事物的建模和表达方式会有所不同。]*

**视图**为布局提供输入（内容片段）。视图用于控制器操作并相应命名。（例如：显示、编辑、索引等）

**布局**以用于渲染它们的控制器命名。（例如：应用程序 - 用于 ApplicationController，合同 - 用于 ContractController，contract_customers_view - 用于 ContractCustomersViewController）

它开始纠结的地方是***视图*** 中也可以包含*布局信息*。有时只有视图文件（没有布局文件）。并且任何一个都可以用*模板语言*（如 ERb 或 HAML）编写，因此它们都可以称为*模板*。

**部分**实际上就是它所说的：它只是一个可以使用（并希望重复使用）的片段。您可以获取视图或布局的*一部分*并对其进行重构，以便您可以重新使用它——现在它是*部分*. 部分的常见用途包括标题部分、导航部分（包括页眉、页脚等）、可以重构以实现可重用性的地方，以及通过将它们用于语义和逻辑部分来改进编码风格和可读性。（这就是为什么人们把它们比作一个子程序。）

另一个您可以获得有关视图和布局的上下文以及它们有何不同之处的地方是 ActionView 实际生成输出所经历的步骤（流程）——使用所有这些部分渲染某些东西。例如，了解何时创建（或未创建）布局很重要，这样您就可以了解在特定时间哪些变量和参数对您可用或不可用。 *（顺便说一句，我正在使用 Rails 4。）*

考虑到所有这些，现在想象所有布局信息都在您的视图中，并且您的视图是用模板语言（ERb、HAML 等）编写的，并且您使用了部分来使所有内容都更好听。除了一个主要的布局文件之外，您可能没有任何布局文件用于您的应用程序，其中有一个很大`yield`的真实内容（由您的控制器和模型生成）所在的位置。

希望这可以帮助其他人掌握视图和布局。（我想我应该建议在指南中加入这样的内容。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T02:25:29.690

来自[http://www.tutorialspoint.com/ruby-on-rails/rails-layouts.htm](http://www.tutorialspoint.com/ruby-on-rails/rails-layouts.htm)：布局定义了 HTML 页面的周围环境。它是定义最终输出的共同外观和感觉的地方。布局文件位于 app/views/layouts 中。

模板是视图文件的总称。视图模板 - 位于 app/views/ 文件夹中 - 将在布局中呈现。

了解 Rails 视图如何工作的最佳资源是 Ruby on Rails 指南页面上的布局和渲染： http: [//guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-09T02:04:51.090

## 什么是布局？

### (a) 让我们从我们试图解决的问题开始

您的 rails 应用程序上可能有 1000 多个不同的“页面”/视图。所有 1000 个页面/视图共享相同的页眉和页脚。现在假设您必须更改站点的页脚：您必须在 1000 个页面中进行更改！真是一场噩梦：这效率不高。

您可以提取页眉和页脚并将其放置在一个可供所有 1000 个页面使用的 layout.html.erb 文件中。这样：一个地方的 1 个更改可以传播到您的所有 1000 个视图/页面。因此，如果您想更改页眉/页脚，您只需在一个地方进行更改，这将应用于使用该相关模板的所有视图。

```
# example of a layout
# app/views/layouts/application.html.erb
<!DOCTYPE html>
<-- THIS IS SIMPLIFIED - DO NOT COPY this example -->
<html>
    <div>
      <%= yield %> <-- Notice the yield statement -->
    </div>
</html>

# example of a view:
# users#show.html.erb
<-- This uses the application.html.erb layout -->
<-- Notice how I don't have to create a html tag - because this has already been created in the application.html.erb -->
<div class="container">
  <h1> About <%= @user.full_name %> </h1>
  <br>
  <p>
    <b> Name: </b> <%= @user.full_name %>
  </p>
  <p>
    <b> Organisation: </b> <%= @organisation.name %>
  </p>
  <p>
    <b> Email: </b> <%= @user.email %>
  </p>
</div> 
```

rails 应用程序首先呈现布局，然后让步到您要显示的特定视图。现在您可以更改布局并将其传播到所有后续使用该布局的“视图”。

# php - 在 __construct() 内部还是外部进行工作？

> ID：14391375
> 
> 赞同：1
> 
> 时间：2013-01-18T02:04:20.387
> 
> 标签：php, constructor, initialization

我已经根据我在网上找到的其他所谓的高质量、安全的类编写了一个用户类（尽管混合了其中的一些，从我所学到的，实际上没有一个是那么安全的）。问题是，在我初始化不同对象的脚本中，$User 对象的片段太长了。其他对象只需要`$Browser = new Browser();`或`$_ = new Translate ($DB, $User->get('Language'));`。所以，突然把所有这些代码放在这里感觉有点难看：

```
 /* USER. Handles user data and login/logout/register. */
  $User=new User($DB, Configuration::get('SiteKey'));
  if (isset($_POST['logout']))
    $User->logout();
  else if (isset($_POST['login']) && !$User->login($_POST['email'], $_POST['password']))  // If user tries to login
    $Error->set ('Banner', 'Username or password incorrect. Please try again.');
  else if (isset($_SESSION['email']) && isset($_SESSION['session']))
    $User->loginSession ($_SESSION['email'], $_SESSION['session']);
  else if (isset($_POST['register']))
    $User->add ($_POST);

  /* Language */
  if (!empty ($_POST['lang']) && in_array($_POST['lang'],Configuration::get('SupportedLanguages')))
    {
    $User->set('language', $_POST['lang']);
    $_SESSION['language'] = $_POST['lang'];
    }
  if (!$User->get('language'))
    $User->set('language', Configuration::get('DefaultLanguage')); 
```

我不确定所有这些代码应该在哪里，我应该把它放在用户的类`__constructor()`中还是应该像现在这样放在外面？

[传递 $_POST 比直接在内部使用它更好](http://forums.phpfreaks.com/topic/161934-post-inside-class-functions/)，这可能会影响答案（传递了太多变量的 __constructor() 也不是很好）。

我不认为类中的代码如此相关以至于将其附加到此处，但是如果您想查看它，我只是将其公开在[**我的 github**](https://github.com/FranciscoP/user/blob/master/user.php)中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T05:32:07.420

> 我不确定所有这些代码应该在哪里，我应该把它放在用户的类 __constructor() 中还是应该像现在这样放在外面？

我不会把它放在构造函数中。无论您在其中拥有此代码的任何脚本或类，看起来都需要履行许多职责。您可以考虑遵循单一职责原则，并将此代码分离到其他类中，例如身份验证类、会话类和可以构建用户对象的用户工厂。一个简短且绝不是精心构建的示例：

```
class User
{

}

class Session
{

}

class UserFactory
{
  public function create($vars, ...)
  {
  //build user...
  return $user;
  }
}

class Authenticate
{
  public function __construct($userFactory)
  {
    //...
  }

  public function Login($username, $passwd)
  {
    //do stuff...
    return $userFactory->create($vars, ...);
  }

  public function AuthenticateSession($session)
  {
    //...
   return $userFactory->create($vars, ...);
  }
} 
```

> 传递了太多变量的 __constructor() 也不是很好

好吧，您总是可以将变量分组到一个集合对象中并将其传递给构造函数。例如，可以将语言和时间设置分组到一个文化对象中。

# entity-framework - 如何确定一个属性是 ComplexType？

> ID：14391378
> 
> 赞同：0
> 
> 时间：2013-01-18T02:04:50.770
> 
> 标签：entity-framework

我想实现一个 IsComplexType() 方法，该方法检查实体的给定属性是否是 ComplexType。

在阅读了实体框架的源代码后，我发现它在“Helper”类中实现了一个，但该类是“内部”的，所以我不能在实体框架项目之外使用它。

我想知道实体框架中是否有一个公共 API 可以让我做到这一点。如果没有，我该如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T10:56:21.707

试试这个 ：

```
 var dbContext = new DbContext("ConnectionString");
        var complexType = dbContext.Entry(TEntity).ComplexProperty("ProperyName");
        if (complexType != null)
        {
            // This is a Complex Type
        } 
```

希望这有帮助。

# jquery - 删除我用 after() 插入的元素的最佳方法是什么

> ID：14391379
> 
> 赞同：0
> 
> 时间：2013-01-18T02:05:14.557
> 
> 标签：jquery

当我单击一个按钮时，我在它之后附加（插入）一个带有新 div 的 div，并且我不想给新 div 提供 id，因为我希望这个功能可以被其他按钮/锚/等使用。

```
$("#buttonA").click(function(){
$("#div1").after("<div>bla bla bla</div>");
}); 
```

然后通过一个事件我想删除插入的 div。删除插入的 div 的最佳方法是什么？...我仍然无法使其通用，我必须在新插入的 div 上应用 ID，然后删除它我使用

```
$("#newid").remove() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T02:17:07.943

用于`.next`遍历#div1 之后的div。

```
$("#div1").next("div").remove(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T02:08:02.570

首先用标签标记插入的元素（在本例中为`inserted`类）：

```
$("#buttonA").click(function(){
    $("#div1").after("<div class='inserted'>bla bla bla</div>");
}); 
```

然后使用您选择的选择器查找插入的元素：

```
$("#div1 .inserted").remove(); 
```

您还可以通过以下方式删除每个`div`插入的内容：

```
$(".inserted").remove(); 
```

如果您的意图是允许许多不同的事件`div`在同一个容器内创建许多不同的 s，然后删除一个特定的 div，那么您将需要为每个 div 生成唯一的 id`div`并将它们映射到调用者以供以后参考，或者只是将创建的`div`元素映射到调用者以供以后参考。在不了解您的用例的情况下很难提出强有力的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T02:16:03.437

如果只想添加一个 div，可以创建一个变量，如下所示：

```
var newDiv = $("<div>New Div!</div>")

$("#buttonA").click(function(){
 $("#div1").after(newDiv);
});

$("#buttonB").click(function(){
 $(newDiv).remove();
}); 
```

检查此[jsFiddle](http://jsfiddle.net/pzMj3/)以查看它是否正常工作。

但是，如果您需要多个元素，该解决方案将不起作用。

# android - 默认 IME Id 部分？

> ID：14391382
> 
> 赞同：1
> 
> 时间：2013-01-18T02:06:04.387
> 
> 标签：android, keyboard, android-contentresolver, ime, android-input-method

我正在尝试使用以下代码获取设备的 IME：

```
String currentKeyboard = Settings.Secure.getString(getContentResolver(), Settings.Secure.DEFAULT_INPUT_METHOD); 
```

`currentKeyboard`在哪里`com.sec.android.inputmethod/.SamsungKeypad`。

*   代表什么`com.sec.android.inputmethod`？
*   代表什么`/.SamsungKeypad`？

我知道上面的代码是获取键盘的ID。通过查看结果，键盘的 ID 应该是`com.sec.android.inputmethod`。

*   如果`com.sec.android.inputmethod`是键盘ID，`/.SamsungKeypad`代表什么？
*   香草味的Android默认键盘的ID是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:14:31.400

第一部分`com.sec.android.inputmethod`是整个默认 KeyBoard 应用的包名。在 Android Manifest 中指定的`package`.

`.SamsungKeypad`是 InputMethodService 的名称，在这种情况下是您的显式键盘。该软件包包含所有内容：设置、预测算法、键盘等。这只是键盘。默认的拉丁键盘是：

```
com.google.android.inputmethod.latin/com.android.inputmethod.latin.LatinIME 
```

# flash - 将矢量图形从 Flash 导入 Flash Builder

> ID：14391386
> 
> 赞同：0
> 
> 时间：2013-01-18T02:06:56.190
> 
> 标签：flash, flash-builder

我是移动应用程序开发的新手，很抱歉这么愚蠢的问题。

我有一个用 Adob​​e Flash 制作的场景（另存为 FLA）。没有动作脚本，只有矢量图。

所以现在，我正在为 iOS/Android 开发一个应用程序（Adobe Flash Builder 中的“Mobile Flex 应用程序”），我需要使用该绘图。

几个小时以来，我一直在寻找如何做到这一点，试图将我的绘图导出为 SWC 和 FXG 文件 - 但在 Flash Builder 中没有任何效果。

那么，如何将其导入 Flash Builder？

请给我指路！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:24:05.783

您可以像这样嵌入 swf：

```
[Embed(source="path/to/my.swf")]
[Bindable]
public var swfCls:Class; 
```

然后在 mxml 中，使用 SWFLoader 来显示它：

```
<s:SWFLoader source="{swfCls}" /> 
```

# android - Android 亚像素渲染

> ID：14391387
> 
> 赞同：0
> 
> 时间：2013-01-18T02:07:06.853
> 
> 标签：android, android-canvas, subpixel

我有一条线应该越长越细。问题是，当像素变薄时，您可以清楚地看到跳跃。有没有办法在 Android 上进行亚像素渲染/抗锯齿？

`canvas.drawRect()`采用浮点值，但它忽略了这些。这是代码：

```
@Override
protected void onDraw(Canvas canvas) {
    float width = getMeasuredWidth() / (float) getMeasuredHeight()  * getMinimumHeight();
    float left = (getMeasuredWidth() - width) / 2.0f;
    canvas.drawRect(left, 0, left + width, getMeasuredHeight(), paint);
    super.onDraw(canvas);
} 
```

油漆对象已`ANTI_ALIAS_FLAG`启用并包含纯色。

这是默认行：

![默认线路](../Images/0fbed5910bbd3c82f28fbb673225b6b0.png)

这是它变得更长更薄的时候。它的侧面应该有一些抗锯齿，尽管使整个过渡看起来更平滑。

![细线](../Images/734f20f8a65066c045f4685603efede4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:38:37.930

这似乎做得更好：

```
@Override
protected void onDraw(Canvas canvas) {
    float width = getMeasuredWidth() / (float) getMeasuredHeight()  * getMinimumHeight();
    float left = (getMeasuredWidth() - width) / 2.0f;
    paint.setStrokeWidth(width * getResources().getDisplayMetrics().density);
    canvas.drawLine(left, 0, left, getMeasuredHeight(), paint);
    super.onDraw(canvas);
} 
```

# css - 如何让 div 和锚以相同的宽度堆叠在一起

> ID：14391392
> 
> 赞同：0
> 
> 时间：2013-01-18T02:07:51.883
> 
> 标签：css, html

对于我正在制作的网站，我有以下代码：

```
.menu{      
}

.menu a{
    text-shadow: 0 2px 2px rgba(0, 0, 0, 0.3);
    color: #d7d7d7;
    font: bold 16px Arial,Helvetica,Sans-serif;
    text-decoration: none;
    border-radius: 10px;
    background-color: #444;
    padding: 5px 10px;
    text-align: center;
    -webkit-transition: all 0.3s ease 0s;
    -moz-transition: all 0.3s ease 0s;
    -o-transition: all 0.3s ease 0s;
    transition: all 0.3s ease 0s;
}

.menu a:hover{
    border: double 6px #00F;
    color: #00F;
    background-color: #FFF;
    font: bold 20px Arial,Helvetica,Sans-serif;
    text-decoration: underline;
    text-align: center;
}

.sidebar{
    width:220px;
    margin-top:8px;
    margin-left:3px;
    background-color:#CCC;
    border-radius:10px;
    padding:10px;
    clear:left;
    -moz-box-shadow: inset 0 0 5px 5px #888;
    -webkit-box-shadow: inset 0 0 5px 5px #888;
    box-shadow: inset 0 0 5px 5px #888;
}

.sidebar p{
    text-align: center;
} 
```

HTML 代码：

```
<div class="sidebar">
    <b style="color:#666;">Menu</b>
    <div class="menu">
        <p><a href="#">Profile</a></p>
        <p><a href="#">Friends</a></p>
        <p><a href="#">Community Service</a></p>
        <p><a href="#">Messages</a></p>
    </div>
</div> 
```

出于某种原因，我可以像这样将锚点放在彼此之上的唯一方法是将它们放在段落标签中，但我不希望那样。这是所有代码外观的图片：

![代码概述](../Images/4823c84a11b112ff8a3214a5c25b30f6.png)

我希望菜单看起来像“登录”和“创建帐户”按钮，但 CSS 之间没有区别，唯一可以区分的就是包含它们的 div 位于表格中。所以我想知道我如何才能实现与上面和下面那种相同的宽度和高度的 div。我还尝试将它放入一个表格中，然后将其压扁并取出圆形边缘（CSS display: table in the .menu 和 display: table-cell in the anchor 也不起作用，因为它会压扁它）。这是我的其余代码：[http](http://pastebin.com/ZLS94ZvQ) ://pastebin.com/ZLS94ZvQ感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T03:21:09.810

您应该在以下位置更改您的 HTML：

```
<div class="sidebar">
  <b style="color:#666;">Menu</b>
  <ul class="menu">
    <li><a href="#">Profile</a></li>
    <li><a href="#">Friends</a></li>
    <li><a href="#">Community Service</a></li>
    <li><a href="#">Messages</a></li>
  </ul>
</div> 
```

和你的CSS：

```
.menu{      
  list-style:none; /* remove style from <ul> but leave a 40px margin on the left */
  margin-left:-40px; /* this remove the 40px margin on the left */
}
.menu li{
  text-align: center;
  margin: 10px 0; /* this adds 10px top and bottom of each <LI> element */
}
.menu a{
    display: block;
    text-shadow: 0 2px 2px rgba(0, 0, 0, 0.3);
    color:  #d7d7d7; 
    font: bold 16px Arial,Helvetica,Sans-serif;
    text-decoration: none;
    border-radius: 10px;
    background-color: #444;
    padding: 5px 10px;
    -webkit-transition: all 0.3s ease 0s;
    -moz-transition: all 0.3s ease 0s;
    -o-transition: all 0.3s ease 0s;
    transition: all 0.3s ease 0s;
}

.menu a:hover{
    border: double 6px #00F;
    color: #00F;
    background-color:  #FFF; 
    font: bold 20px Arial,Helvetica,Sans-serif;
    text-decoration: underline;
    text-align: center;
}

.sidebar{
    width:220px;
    margin-top:8px;
    margin-left:3px;
    background-color:#CCC;
    border-radius:10px;
    padding:10px;
    clear:left;
    -moz-box-shadow: inset 0 0 5px 5px #888;
    -webkit-box-shadow: inset 0 0 5px 5px #888;
    box-shadow: inset 0 0 5px 5px #888;
} 
```

使用`<ul>`更好且语义正确。对于搜索引擎来说，`<ul>`用`<nav>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T02:57:48.163

你应该考虑使用

```
<ul>
<li>Your link here</li>
<li>Your link here</li>
<li>Your link here</li>
<li>Your link here</li>
</ul> 
```

列出您的链接。这是最常见的做法。

然后，您可以简单地将`li`标签设置为`display: block;`并设置 a`width`以拉伸链接，使它们全部均匀。

# ruby-on-rails - 使用 Rails（轮胎）和 ElasticSearch 进行模糊字符串匹配

> ID：14391395
> 
> 赞同：6
> 
> 时间：2013-01-18T02:08:05.707
> 
> 标签：ruby-on-rails, ruby, elasticsearch, tire

我有一个 Rails 应用程序，现在设置了 ElasticSearch 和 Tire gem 来对模型进行搜索，我想知道如何设置我的应用程序来对模型中的某些索引进行模糊字符串匹配。我的模型设置为对标题、描述等内容进行索引，但我想对其中一些内容进行模糊字符串匹配，但我不确定在哪里执行此操作。如果您想发表评论，我将在下面包含我的代码！谢谢！

在控制器中：

```
 def search
      @resource = Resource.search(params[:q], :page => (params[:page] || 1),
                                 :per_page =>15, load: true )
   end 
```

在模型中：

```
class Resource < ActiveRecord::Base
  include Tire::Model::Search
  include Tire::Model::Callbacks

  belongs_to :user
  has_many :resource_views, :class_name => 'UserResourceView'

  has_reputation :votes, source: :user, aggregated_by: :sum

  attr_accessible :title, :description, :link, :tag_list, :user_id, :youtubeID
  acts_as_taggable

  mapping do 
      indexes :id,  :index => :not_analyzed
      indexes :title, :analyzer => 'snowball', :boost => 40
      indexes :tag_list, :analyzer => 'snowball', :boost => 8
      indexes :description, :analyzer => 'snowball', :boost => 2
      indexes :user_id, :analyzer => 'snowball'
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:17:46.923

尝试创建自定义分析器来实现其他词干提取功能等。查看我的示例（此示例还使用了 Mongoid & 附件，如果您不需要它，请不要看）：

```
class Document
      include Mongoid::Document
      include Mongoid::Timestamps
      include Tire::Model::Search
      include Tire::Model::Callbacks

      field :filename, type: String
      field :md5, type: String
      field :tags, type: String
      field :size, type: String

      index({md5: 1}, {unique: true})
      validates_uniqueness_of :md5

      DEFAULT_PAGE_SIZE = 10

      settings :analysis => {
          :filter => {
              :ngram_filter => {
                  :type => "edgeNGram",
                  :min_gram => 2,
                  :max_gram => 12
              },
              :custom_word_delimiter => {
                  :type => "word_delimiter",
                  :preserve_original => "true",
                  :catenate_all => "true",
              }
          }, :analyzer => {
              :index_ngram_analyzer => {
                  :type => "custom",
                  :tokenizer => "standard",
                  :filter => ["lowercase", "ngram_filter", "asciifolding", "custom_word_delimiter"]
              },
              :search_ngram_analyzer => {
                  :type => "custom",
                  :tokenizer => "standard",
                  :filter => ["standard", "lowercase", "ngram_filter", "custom_word_delimiter"]
              },
              :suggestions => {
                  :tokenizer => "standard",
                  :filter => ["suggestions_shingle"]
              }
          }
      } do
        mapping {
          indexes :id, index: :not_analyzed
          indexes :filename, :type => 'string', :store => 'yes', :boost => 100, :search_analyzer => :search_ngram_analyzer, :index_analyzer => :index_ngram_analyzer
          indexes :tags, :type => 'string', :store => 'yes', :search_analyzer => :search_ngram_analyzer, :index_analyzer => :index_ngram_analyzer
          indexes :attachment, :type => 'attachment',
                  :fields => {
                      :content_type => {:store => 'yes'},
                      :author => {:store => 'yes', :analyzer => 'keyword'},
                      :title => {:store => 'yes'},
                      :attachment => {:term_vector => 'with_positions_offsets', :boost => 90, :store => 'yes', :search_analyzer => :search_ngram_analyzer, :index_analyzer => :index_ngram_analyzer},
                      :date => {:store => 'yes'}
                  }
        }
      end

      def to_indexed_json
        self.to_json(:methods => [:attachment])
      end

      def attachment        
          path_to_file = "#{Rails.application.config.document_library}#{path}/#{filename}"
          Base64.encode64(open(path_to_file) { |file| file.read })
      end

      def self.search(query, options)
        tire.search do
          query { string "#{query}", :default_operator => :AND, :default_field => 'attachment', :fields => ['filename', 'attachment', 'tags'] }
          highlight :attachment
          page = (options[:page] || 1).to_i
          search_size = options[:per_page] || DEFAULT_PAGE_SIZE
          from (page -1) * search_size
          size search_size
          sort { by :_score, :desc }
          if (options[:facet])
            filter :terms, :tags => [options[:facet]]
            facet 'global-tags', :global => true do
              terms :tags
            end
            facet 'current-tags' do
              terms :tags
            end
          end
        end
      end
    end 
```

希望能帮助到你，

# iphone - iOS Core Audio 渲染回调适用于模拟器，而不是设备

> ID：14391398
> 
> 赞同：1
> 
> 时间：2013-01-18T02:08:14.433
> 
> 标签：iphone, ios, ipad, core-audio

我的回调如下所示：

```
static OSStatus renderInput(void *inRefCon, AudioUnitRenderActionFlags *ioActionFlags,                          const AudioTimeStamp *inTimeStamp, UInt32 inBusNumber, UInt32 inNumberFrames, AudioBufferList *ioData)
{
    AudioSampleType *outBuffer = (AudioSampleType *)ioData->mBuffers[0].mData;
    memset(outBuffer, 0, sizeof(AudioSampleType)*inNumberFrames*kNumChannels);      

    //copy a sine wave into outBuffer
    double max_aust = pow(2.f, (float)(sizeof(AudioSampleType)*8.0 - 1.f)) - 1.0;
    for(int i = 0; i < inNumberFrames; i++) {
        SInt16 val = (SInt16) (gSine2_[(int)phase2_] * max_aust);
        outBuffer[2*i] = outBuffer[2*i+1] = (AudioSampleType)val;
        phase2_ += inc2_;
        if(phase2_ > 1024) phase2_ -= 1024;
    }

    return noErr;
} 
```

这是一个超级基本的渲染回调，应该只播放一个正弦波。它在模拟器上，它不在设备上。事实上，我无法从设备中获得任何音频。即使我添加了一个 printf 来检查 outBuffer，它也表明 outBuffer 充满了正弦波的样本。

我将会话类型设置为 Ambiet，但我也尝试过 playAndRecord 和 MediaPlayback。也没有运气。我首选的 framesPerBuffer 是 1024（这是我在模拟器和设备上得到的）。我的采样率为 44100hz。为了以防万一，我也尝试了48000。我也试过改变framePerBuffer。

还有其他原因导致样本无法到达设备上的硬件吗？

更新：我刚刚发现，如果我将耳机插入设备，我会听到听起来像正弦波的声音，而且削波非常可怕。这让我认为设备可能需要浮点而不是带符号的 int，但是当我将值更改为 -1 到 1 时，就没有音频（设备或模拟器，正如预期的那样，因为引擎设置为接受带符号的 int，而不是浮点）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:24:56.213

如果没有看到更多您的设置，我无法确定，但这听起来很像您被`AudioSampleType`（SInt16 样本）和（容器`AudioUnitSampleType`内的固定 8.24 样本）之间的差异所困扰。`SInt32`几乎可以肯定，这`AudioUnitSampleType`就是您的回调中预期的格式。[Core Audio 邮件列表上的这篇文章很好地解释了两者之间的区别，以及它们存在的原因。](http://lists.apple.com/archives/coreaudio-api/2011/Feb/msg00069.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:52:41.750

因为我不知道您的设置如何，我建议您阅读以下内容：http: [//www.cocoawithlove.com/2010/10/ios-tone-generator-introduction-to.html](http://www.cocoawithlove.com/2010/10/ios-tone-generator-introduction-to.html)

示例代码用于单音发生器，如果您也想要立体声填充第二个通道。

指向第二个通道缓冲区的指针是

```
const int secondChannel = 1;
Float32 *bufferSecondChannel = (Float32 *)ioData->mBuffers[secondChannel].mData; 
```

希望这有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:29:19.543

您可能需要设置音频会话（初始化、设置类别并激活它）

```
OSStatus activationResult = NULL;
result = AudioSessionSetActive (true); 
```

更多信息：http: [//developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Cookbook/Cookbook.html](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Cookbook/Cookbook.html)

# java - android：为什么我的列表视图中没有出现任何元素？

> ID：14391403
> 
> 赞同：0
> 
> 时间：2013-01-18T02:09:02.033
> 
> 标签：java, android

我正在尝试使用 ListView 作为杂志阅读器应用程序中的主要导航功能。我希望列表中的每个视图都在与其关联的图像下方显示故事的标题。我已经创建了一个 XML 布局，它具有一个垂直方向的 LinearLayout，顶部是 ImageView，底部是 TextView，并且正在尝试创建一个自定义适配器，在 getView 方法中扩展此布局并将图像/文本资源放入其中。这是我的代码：

```
package com.example.caliber;
import java.util.List;
import com.example.caliber.R;

public class MainActivity extends Activity {
Spinner issues, sections;
Button blog;
ListView mainGal;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    String[] issueList = {"issues", "fall '12", "spring '12", "fall '11", "spring '12", 
                            "fall '10", "spring '10"};
    String[] sectionList = {"sections", "campus", "entertainment", "lifestyle", "love&sex", "tech&web", "Current" };

    ArrayAdapter<String> aaIssues = new ArrayAdapter<String>(this, R.layout.spin_item, issueList);
    ArrayAdapter<String> aaSections = new ArrayAdapter<String>(this,   
R.layout.spin_item, sectionList);

    blog = (Button)findViewById(R.id.blogBtn);

    issues = (Spinner)findViewById(R.id.issueSpin);
    sections = (Spinner)findViewById(R.id.sectionSpin);             
    issues.setAdapter(aaIssues);
    sections.setAdapter(aaSections);

    OnClickListener mbListener = new OnClickListener() {
        @Override
            public void onClick(View v){
        issues.setAlpha((float) 0.5);
        sections.setAlpha((float) 0.5);
        blog.setAlpha((float) 0.5);
        }
     };

    ImageButton mainbtn = (ImageButton)findViewById(R.id.cbutton);      
    mainbtn.setOnClickListener(mbListener);

    mainGal = (ListView)findViewById(R.id.mainGal);
    GalAdapter ga = new GalAdapter();
    mainGal.setAdapter(ga);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

class GalAdapter extends ArrayAdapter<String> {
    Activity context;
    String[] headlines = {"Alpha bravo charlie delta", "Echo foxtrot golf 
hotel", "indigo juliette kilo lima"};
    int[] images = {R.drawable.img1, R.drawable.img2, R.drawable.img3};

    public GalAdapter() {
        super (MainActivity.this, R.layout.galleryview);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent){
        LayoutInflater li = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);         
        View story = li.inflate(R.layout.galleryview, parent);
        ImageView image = (ImageView)story.findViewById(R.id.image);
        TextView headline = (TextView)story.findViewById(R.id.headline);

        image.setImageResource(images[position]);
        headline.setText(headlines[position]);
        return story;       
} 
```

该应用程序启动正常，我可以看到列表视图的背景，但列表中没有项目。为什么是这样？可能很清楚，我对 android 开发非常陌生，但对 Java 的基础知识有很好的理解。我知道这是由于我在这里有一个基本的误解，可能是其中一个构造函数中的错误（我对某些参数的含义仍然有些模糊）。无论如何，如果有人能帮助我更深入地理解这些问题，我将不胜感激。

提前致谢

ps 在android和java下分类它是不是很糟糕？我以后应该只使用android吗？

- -编辑：

```
 class GalAdapter extends ArrayAdapter<String> {
    Activity context;
    String[] hlines;
    int[] imgs;

    public GalAdapter(String[] hlines, int[] imgs) {
        super (MainActivity.this, R.layout.galleryview , hlines);
        this.hlines = hlines;
        this.imgs = imgs;
    }       
    @Override
    public View getView(int position, View convertView, ViewGroup parent){
        if (convertView == null){
        LayoutInflater li = (LayoutInflater)context. getSystemService (Context.LAYOUT_INFLATER_SERVICE);
        convertView = li.inflate(R.layout.galleryview, parent);
        ImageView image = (ImageView)convertView.findViewById(R.id.image);
        TextView headline = (TextView)convertView.findViewById(R.id.headline);

        image.setImageResource(imgs[position]);
        headline.setText(hlines[position]);}
        return convertView;                                 
    }
    } 
```

现在我在调用 LayoutInflator 的行上遇到空指针异常。它指的是什么指针？我假设我没有将数组 (String[] hlines + int[] imgs) 正确传递给它......这是我打电话的地方：

```
 String[] headlines ={ "Echo foxtrot golf hotel", "Echo foxtrot golf hotel", "indigo   
juliette kilo lima"};
    int[] images = {R.drawable.img1, R.drawable.img2, R.drawable.img3};
            ....
    mainGal = (ListView)findViewById(R.id.mainGal);
    GalAdapter ga = new GalAdapter(headlines, images);
    mainGal.setAdapter(ga); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:23:07.733

看看这里[https://github.com/cplain/custom-list](https://github.com/cplain/custom-list)它将能够对您有所帮助，您需要`convertView`在您的适配器中使用`getView()`，我建议您将列表传递到您的适配器中，而不是在里面制作一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:47:23.573

您的适配器未正确创建。为了使用`ArrayAdapter`，您必须：

1.  将项目列表提供给超级实现
2.  将项目直接添加到适配器，或
3.  覆盖对适配器保存的数据进行分类所需的所有方法，例如`getCount()`,`getItem()`等。

最简单的解决方法是像这样更改您的构造函数：

```
public GalAdapter() {
    super(MainActivity.this, R.layout.galleryview, headlines);
} 
```

这样做是允许适配器实现使用您的数组之一来确定列表中有多少项，以及在`getItem()`调用时应该返回什么数据。由于您正在覆盖`getView()`，因此第二个参数甚至都不是必需的，您也可以侥幸逃脱`super(MainActivity.this, 0, headlines)`。

如果您的最终实现是像这样从多个数组中收集数据，那么您最终可能会更好地将自定义适配器创建为`BaseAdapter`直接的子类，因为您已经绕过了`ArrayAdapter`提供的大多数便利功能。

# extjs - 将子组件的配置传递给父组件

> ID：14391404
> 
> 赞同：3
> 
> 时间：2013-01-18T02:09:07.003
> 
> 标签：extjs, extjs4

通常，要定义网格类型，我会执行以下操作：

```
Ext.define('MyApp.view.MyGrid', {
  extend: 'Ext.grid.Panel',
  alias: 'widget.myGrid',
  store: 'MyStore',
  columns: [...],
} 
```

然后我通过它的 xtype 'myGrid' 将它添加到容器或布局中。

我想要做的是定义一个可重用的自定义组件，它扩展`Ext.grid.Panel`或接受相同的配置（例如列），但实际上是一个包含网格和其他东西的容器。

```
Ext.define('MyApp.components.ContainedGrid', {
  extend: 'Ext.container.Container' //or Ext.grid.Panel, whatever works
  alias: 'widget.containedGrid',
  layout: 'card',
  items: [
    {someObject}, //doesn't matter what this is
    {aGrid}, //the grid that should receive the configs from the caller
  ],
} 
```

理想情况下，该组件可以像常规`Ext.grid.Panel`对象一样配置，并且这些配置应该真正应用于 items 数组中第二个定义的网格。

换句话说，类似下面的内容应该呈现一个包含卡片布局的窗口，其中第二张卡片应该是网格，并为容器提供列和存储。

```
Ext.create('Ext.window.Window',  {
  title: 'hi',
  layout: 'fit',
  items: {
    xtype: 'containedGrid',
    store: myStore,
    columns: [...],
  },
}); 
```

从逻辑上讲，我只想说提供给容器的配置适用于其组件之一，但我不知道如何执行。有什么想法吗？

**编辑：** 简而言之，我想要做的是创建一个像网格一样配置的组件，但实际上是一个包含网格以及其他一些东西的容器。这个组件会被多次使用，所以我想把它打包成一个可复用的组件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T03:26:31.037

重写 initComponent 方法：

```
Ext.define('MyWindow', {
    extend: 'Ext.window.Window',
    layout: 'fit',
    title: 'Foo',

    initComponent: function(){
        this.items = {
            xtype: 'grid',
            store: this.store,
            columns: this.columns    
        };
        this.callParent();
    }
});

Ext.onReady(function(){
    new MyWindow({
        width: 200,
        height: 200,
        autoShow: true,
        store: {
            fields: ['name'],
            data: [{
                name: 'Name 1'
            }]
        },
        columns: [{
            dataIndex: 'name',
            text: 'Name'
        }]
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T08:41:59.207

为 gridconfig 定义一个属性

```
Ext.define('MyApp.components.ContainedGrid', {
  extend: 'Ext.container.Container' //or Ext.grid.Panel, whatever works
  alias: 'widget.containedGrid',
  layout: 'card',
  /**
   * @cfg {object} gridCfg
   */

  initComponent: function(){
     var gridCfg = { xtype: 'grid' };
     if(this.gridCfg)
          gridCfg = Ext.apply(gridCfg ,this.gridCfg);
     if (this.items) // we assume if set it will be always array!
          this.items.push(gridCfg);
     else
          this.items = [gridCfg];
     delete this.gridCfg; // we no longer need this property here
     this.callParent(arguments);
  }
} 
```

和用例：

```
Ext.create('Ext.window.Window',  {
  title: 'hi',
  layout: 'fit',
  items: {
    xtype: 'containedGrid',
    gridCfg: {
       store: myStore,
       columns: [...]
    }
  },
}); 
```

**更新**

我想我现在明白你在找什么了。要将侦听器直接注册到容器上，您需要中继事件。我举了一个例子，至少可以传递视图的事件（应该是最多的）。您还可以转发表格和特征的事件（渲染后首先显示特征）。这是一个将容器中的所有事件打印到控制台的**[JSFiddle 。](http://jsfiddle.net/sran/9J6Ds/1/)**

```
Ext.define('Ext.ux.ContainedGrid', {
      extend: 'Ext.container.Container',
      alias: 'widget.containedGrid',
      layout: 'card',
      /**
       * @cfg {object} gridCfg
       */

      /**
       * @private {object} grid
       */
      initComponent: function(){
         var me = this,
             grid;
         // provide some default settings for the grid here, 
         // which can be overriden by each instance
         var gridCfg = { }; // the defaulttype is defined on the componentmanager call
         me.gridCfg = me.gridCfg ? Ext.apply(gridCfg ,me.gridCfg) : gridCfg;

         me.grid = me.getGrid();

         if (me.items && Ext.isArray(me.items)) 
              me.items.push(me.grid);
         else if(me.items)
              me.items = [me.items, me.grid];
         else
              me.items = [me.grid];
         delete me.gridCfg; // we no longer need this property here
         // Relay events from the View whether it be a LockingView, or a regular GridView
         this.relayEvents(me.grid, [
                /**
                 * @event beforeitemmousedown
                 * @inheritdoc Ext.view.View#beforeitemmousedown
                 */
                'beforeitemmousedown',
                /**
                 * @event beforeitemmouseup
                 * @inheritdoc Ext.view.View#beforeitemmouseup
                 */
                'beforeitemmouseup',
                /**
                 * @event beforeitemmouseenter
                 * @inheritdoc Ext.view.View#beforeitemmouseenter
                 */
                'beforeitemmouseenter',
                /**
                 * @event beforeitemmouseleave
                 * @inheritdoc Ext.view.View#beforeitemmouseleave
                 */
                'beforeitemmouseleave',
                /**
                 * @event beforeitemclick
                 * @inheritdoc Ext.view.View#beforeitemclick
                 */
                'beforeitemclick',
                /**
                 * @event beforeitemdblclick
                 * @inheritdoc Ext.view.View#beforeitemdblclick
                 */
                'beforeitemdblclick',
                /**
                 * @event beforeitemcontextmenu
                 * @inheritdoc Ext.view.View#beforeitemcontextmenu
                 */
                'beforeitemcontextmenu',
                /**
                 * @event itemmousedown
                 * @inheritdoc Ext.view.View#itemmousedown
                 */
                'itemmousedown',
                /**
                 * @event itemmouseup
                 * @inheritdoc Ext.view.View#itemmouseup
                 */
                'itemmouseup',
                /**
                 * @event itemmouseenter
                 * @inheritdoc Ext.view.View#itemmouseenter
                 */
                'itemmouseenter',
                /**
                 * @event itemmouseleave
                 * @inheritdoc Ext.view.View#itemmouseleave
                 */
                'itemmouseleave',
                /**
                 * @event itemclick
                 * @inheritdoc Ext.view.View#itemclick
                 */
                'itemclick',
                /**
                 * @event itemdblclick
                 * @inheritdoc Ext.view.View#itemdblclick
                 */
                'itemdblclick',
                /**
                 * @event itemcontextmenu
                 * @inheritdoc Ext.view.View#itemcontextmenu
                 */
                'itemcontextmenu',
                /**
                 * @event beforecontainermousedown
                 * @inheritdoc Ext.view.View#beforecontainermousedown
                 */
                'beforecontainermousedown',
                /**
                 * @event beforecontainermouseup
                 * @inheritdoc Ext.view.View#beforecontainermouseup
                 */
                'beforecontainermouseup',
                /**
                 * @event beforecontainermouseover
                 * @inheritdoc Ext.view.View#beforecontainermouseover
                 */
                'beforecontainermouseover',
                /**
                 * @event beforecontainermouseout
                 * @inheritdoc Ext.view.View#beforecontainermouseout
                 */
                'beforecontainermouseout',
                /**
                 * @event beforecontainerclick
                 * @inheritdoc Ext.view.View#beforecontainerclick
                 */
                'beforecontainerclick',
                /**
                 * @event beforecontainerdblclick
                 * @inheritdoc Ext.view.View#beforecontainerdblclick
                 */
                'beforecontainerdblclick',
                /**
                 * @event beforecontainercontextmenu
                 * @inheritdoc Ext.view.View#beforecontainercontextmenu
                 */
                'beforecontainercontextmenu',
                /**
                 * @event containermouseup
                 * @inheritdoc Ext.view.View#containermouseup
                 */
                'containermouseup',
                /**
                 * @event containermouseover
                 * @inheritdoc Ext.view.View#containermouseover
                 */
                'containermouseover',
                /**
                 * @event containermouseout
                 * @inheritdoc Ext.view.View#containermouseout
                 */
                'containermouseout',
                /**
                 * @event containerclick
                 * @inheritdoc Ext.view.View#containerclick
                 */
                'containerclick',
                /**
                 * @event containerdblclick
                 * @inheritdoc Ext.view.View#containerdblclick
                 */
                'containerdblclick',
                /**
                 * @event containercontextmenu
                 * @inheritdoc Ext.view.View#containercontextmenu
                 */
                'containercontextmenu',
                /**
                 * @event selectionchange
                 * @inheritdoc Ext.selection.Model#selectionchange
                 */
                'selectionchange',
                /**
                 * @event beforeselect
                 * @inheritdoc Ext.selection.RowModel#beforeselect
                 */
                'beforeselect',
                /**
                 * @event select
                 * @inheritdoc Ext.selection.RowModel#select
                 */
                'select',
                /**
                 * @event beforedeselect
                 * @inheritdoc Ext.selection.RowModel#beforedeselect
                 */
                'beforedeselect',
                /**
                 * @event deselect
                 * @inheritdoc Ext.selection.RowModel#deselect
                 */
                'deselect'
            ]);
         me.callParent(arguments);
      },
      getGrid: function() {
         if(this.grid)
             return this.grid;
         return this.grid = Ext.ComponentManager.create(this.gridCfg,'grid');;
      }

}); 
```

# ios - css3 过渡导致 iPad 上闪烁

> ID：14391405
> 
> 赞同：1
> 
> 时间：2013-01-18T02:09:20.123
> 
> 标签：ios, html, css, css-transitions

我使用 CSS3 过渡编写了一些动画，它在桌面浏览器上运行良好，但是当我尝试在 iPad 上使用它时，它在动画完成后会出现这种奇怪的闪烁。这是示例的链接：

[http://codepen.io/EugeneGordin/full/LFBkn](http://codepen.io/EugeneGordin/full/LFBkn)

我已经应用了[backface-visibility 和 translate3d](https://stackoverflow.com/questions/5814101/css3-transition-transform-translate3d-causes-severe-flicker-on-first-or-last-fr)，虽然他们帮助它并没有消除闪烁。我还删除了对 z-index 和 display: none 的任何引用，所以我对进一步探索感到茫然。

我用 translate3d 制作了大约 15 个 div 动画，还有一些用 opacity 制作动画，所以我不觉得我在推动硬件可以处理的极限。FWIW，我已经在 micrososft 表面上进行了测试，那里的动画看起来很流畅。

我将不胜感激任何帮助！

# sql - H2DB 中带 WITH-CLAUSE 的子查询

> ID：14391406
> 
> 赞同：0
> 
> 时间：2013-01-18T02:09:21.053
> 
> 标签：sql, h2

我有一个简单的 SQL 查询来计算部门中的所有员工（在孩子中），例如：

```
With Temp(id) AS
(
        Select d.id From DEPARTMENT d 
    Where d.id = 1 
    UNION ALL
    Select d.id From DEPARTMENT d JOIN Temp te ON d.idDepartment = te.id
)
Select count(*) From 
(
    Select e.id From Employee e Join Temp te On e.idDepartment = te.id
) 
```

但是我给出一个错误“StackOverflow”，我不知道哪里出错了，你能帮我吗？测试用例有一些数据： **表部门：**

```
ID----------departmentName-----------idDepartment(id parent)
1              A                         0
2              B                         1 
```

**表员工：**

```
id----------employeeName------------idDepartment
1              E_1                       1
2              E_2                       1
3              E_3                       2 
```

因此，当我在部门（A）中选择员工数量时--> 结果：3，如果 B 部门--> 结果：1 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T09:28:48.567

我想我有一个可行的解决方案：

```
create table Department(id int, name varchar(255), idDepartment int);
create table Employee(id int, name varchar(255), idDepartment int);
insert into Department values(1, 'A', 0), (2, 'B', 1);
insert into Employee values(1, 'E1', 1), (2, 'E2', 1), (3, 'E3', 2);
with recursive temp(id) as (
    select 1 union all
    select d.id from temp te 
    inner join Department d on d.idDepartment = te.id
)
select count(*) from temp te 
inner join Employee e on e.idDepartment = te.id;
drop table Department;
drop table Employee; 
```

# c - 了解 C 中的垃圾收集

> ID：14391410
> 
> 赞同：-9
> 
> 时间：2013-01-18T02:09:38.787
> 
> 标签：c

我决定重写我正在做的事情，回到基础：

```
#include <stdio.h>

int main () {

  int a;
  int b;
  int c;
  int d;
  printf("ta-dah: %i %i %i %i\n", a, b, c, d);

  return 0;
} 
```

我调用它`me.c`，然后编译它`gcc me.c`并使用`./a.out`.

结果我得到了这个：

```
hc$ ./a.out 
ta-dah: 32767 1477090280 0 0 
```

这是一个非常简单的程序，我不确定错误在哪里。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T02:11:45.607

您不初始化这些值，因此它会打印垃圾值（无论何时在（内存）时空中的堆栈内存上发生的任何事情。

如果您希望能够从中读取，您应该首先初始化它们。

```
int a = 3; 
int b = 42;
int c = 1337;
int d = 0; 
```

[例子](http://liveworkspace.org/code/1RAXBG%241)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T02:29:01.527

非静态变量（局部变量）是不确定的。在赋值之前读取它们会导致未定义的行为。

要么初始化变量：

```
#include <stdio.h>

int main () {

  int a = 1;
  int b = 2;
  int c = 3;
  int d = 4;
  printf("ta-dah: %i %i %i %i\n", a, b, c, d);

  return 0;
} 
```

输出：`ta-dah: 1 2 3 4`

或将它们设置为静态：

```
#include <stdio.h>

int main () {

  static int a;
  static int b;
  static int c;
  static int d;
  printf("ta-dah: %i %i %i %i\n", a, b, c, d);

  return 0;
} 
```

输出：`ta-dah: 0 0 0 0`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T02:12:32.710

除非您使用值初始化变量，否则您将看到任何值恰好位于用于存储变量值的内存地址。

将其更改为：

```
#include <stdio.h>

int main () {

  int a = 1;
  int b = 2;
  int c = 3;
  int d = 4;

  printf("ta-dah: %i %i %i %i\n", a, b, c, d);

  return 0;
} 
```

你会得到：

```
ta-dah: 1 2 3 4 
```

# rspec - 使用其他格式化程序时如何禁用 rspec 的进度格式化程序？

> ID：14391411
> 
> 赞同：4
> 
> 时间：2013-01-18T02:10:00.730
> 
> 标签：rspec

我们正在从 Ant 运行 rspec，因此进度格式化程序并不是一个真正的选择，因为它没有给出实时结果。

所以我们像这样运行 rspec：

```
CI_REPORTS=$REPORTDIR/rspec

rspec src/test/rspec                             \
  --require ci/reporter/rake/rspec_loader        \
  --format documentation                         \
  --format CI::Reporter::RSpec                   \
  --format html --out $REPORTDIR/specs.html 
```

这提供了实时更新但相当混乱的输出：

```
.  #equals
    is equal to itself
.    is equal to the same item obtained separately
.    is not equal to a different item
.    is not equal to something that is not an item
.    is not equal to null 
```

点看起来像是默认的`--format progress`东西，因为待处理的结果在那里显示一个 *。我可能遗漏了一些东西，但我找不到关闭它的方法。我使用时获得的命令行文档`--help`没有描述如何关闭格式化程序*，*只描述了如何打开更多格式化*程序*......

不过一定有诀窍，那是什么？

# php - Zend 框架调用另一个控制器动作

> ID：14391413
> 
> 赞同：2
> 
> 时间：2013-01-18T02:10:32.570
> 
> 标签：php, zend-framework

嗨，我在这里有调用另一个控制器操作来发送邮件的问题，这是我的代码：

用户.php

```
public function followAction()
{
     $follow_id = $this->_getParam('id');
     $response = "<a href='javascript: void(0)'  class='i-wrap ig-wrap-user_social i-follow_small-user_social-wrap'><i class='i i-follow_small-user_social ig-user_social'></i>Stop Following</a>";

     notifyEmail()  ------> need to call Notity Controller with notifyEmail() Action along with           
                       params
     $this->_helper->json($response);  ----> return json response
} 
```

通知控制器.php

```
<?php

class NotifyController extends Zend_Controller_Action
{

    public function init()
    {
        /* Initialize action controller here */

    }

     public function index()
    {

    }

     public function notifyEmailAction()
    {
          // rest of email code goes here
    }

} 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T08:40:37.330

您必须将发送邮件功能移到另一个地方，并在两种方法中调用它。

检查这个线程 [调用zend框架中其他控制器的成员函数？](https://stackoverflow.com/questions/886291/calling-member-function-of-other-controller-in-zend-framework)

我建议在路径 /library 中创建一个新文件夹“My”，并在其中创建新文件 Utilities.php，并在该文件中创建一个新类，您可以在其中放置所有帮助方法

```
class My_Utilities {
    // put here your custom help methods
} 
```

您需要[自动加载该命名空间](https://stackoverflow.com/questions/7611578/how-to-add-new-class-and-autoload-in-zend-framework/7611955#7611955)。在 configs/application.ini 中放置

```
autoloaderNamespaces.my = "My_" 
```

然后您可以使用命名空间 My_ 和类 My_Utilities。

* * *

在任何情况下，您都可以从另一个控制器调用方法：

```
include 'NotifyController.php';
$a = new NotifyController($this->_request, $this->_response);
$a->notifyEmailAction(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-01T15:05:40.267

```
$this->action('action', 'controller', 'module', 'params') 
```

该视图助手遍历 frontController 并再次调度所有插件。

我认为不是最好的解决方案记住浪费资源

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-11T07:49:34.680

请尝试此代码 `$this->action("action","controller","module")`

# asp.net-mvc - 如何在 MVC 4 中从 ApiController 返回 Rss

> ID：14391414
> 
> 赞同：1
> 
> 时间：2013-01-18T02:11:11.970
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

> **可能重复：**
> [在 MVC4/WebAPI 中创建 RSS 提要](https://stackoverflow.com/questions/12437731/create-rss-feed-in-mvc4-webapi)

我希望我的控制器返回 rss。在 MVC 3 中，我只是创建了一个`Controller`派生自`Controller`，`RssResult`写 rss，派生自`ActionResult`，然后我在控制器中返回它，一切正常。

我的问题是，我怎么能用`Controller`派生来做到这一点`ApiController`？

谢谢你的帮助 ：）

**- - - - - - - - 更新 - - - - - - - -**

这是我的控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        List<IRss> list = new List<IRss>
                              {
                                  new Product
                                      {
                                          Title = "Laptop",
                                          Description = "<strong>The latest model</strong>",
                                          Link = "/dell"
                                      },
                                  new Product
                                      {
                                          Title = "Car",
                                          Description = "I'm the fastest car",
                                          Link = "/car"
                                      },
                                  new Product
                                      {
                                          Title = "Cell Phone",
                                          Description = "The latest technology",
                                          Link = "/cellphone"
                                      }
                              };
        return new RssResult(list, "The best products", "Here is our best product");
    } 
```

这是我的`RssResult`

```
public class RssResult : ActionResult
{
    private List<IRss> items;
    private string title;
    private string description;

    /// <summary>
    /// Initialises the RssResult
    /// </summary>
    /// <param name="items">The items to be added to the rss feed.</param>
    /// <param name="title">The title of the rss feed.</param>
    /// <param name="description">A short description about the rss feed.</param>
    public RssResult(List<IRss> items, string title, string description)
    {
        this.items = items;
        this.title = title;
        this.description = description;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        XmlWriterSettings settings = new XmlWriterSettings
                                         {Indent = true, NewLineHandling = NewLineHandling.Entitize};

        context.HttpContext.Response.ContentType = "text/xml";

        using (XmlWriter writer = XmlWriter.Create(context.HttpContext.Response.OutputStream, settings))
        {
            // Begin structure
            writer.WriteStartElement("rss");
            writer.WriteAttributeString("version", "2.0");
            writer.WriteStartElement("channel");

            writer.WriteElementString("title", title);
            writer.WriteElementString("description", description);
            writer.WriteElementString("link", context.HttpContext.Request.Url.GetLeftPart(UriPartial.Authority));

            // Individual item
            items.ForEach(x =>
                              {
                                  writer.WriteStartElement("item");
                                  writer.WriteElementString("title", x.Title);

                                  writer.WriteStartElement("description");
                                  writer.WriteCData(x.Description);
                                  writer.WriteEndElement();
                                  writer.WriteElementString("pubDate", DateTime.Now.ToShortDateString());

                                  writer.WriteElementString("link",
                                                            context.HttpContext.Request.Url.GetLeftPart(
                                                                UriPartial.Authority) + x.Link);
                                  writer.WriteEndElement();
                              });

            // End structure
            writer.WriteEndElement();
            writer.WriteEndElement();
        }
    }
} 
```

一切正常。但是现在，我的控制器变成了`public class HomeController : ApiController`. 现在，我应该怎么做才能让这个新控制器像旧控制器一样工作？我应该如何定义新`Index`方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T05:26:13.263

AFAIK，甚至 ASP.NET MVC 也没有任何内置的 RssResult。您还必须实现类似于以下 WebAPI 的 SO 答案中提到的内容。

[ASP.NET MVC 中的 RSS 源](https://stackoverflow.com/questions/11915/rss-feeds-in-asp-net-mvc)

# sas - 来自 .txt 的 SAS 输入，其中输入跨越多行

> ID：14391416
> 
> 赞同：1
> 
> 时间：2013-01-18T02:11:38.890
> 
> 标签：sas

每个人。

我有一个让我发疯的问题。

假设我有 2 个如下所示的文本文件：

File_one.txt：

```
Name_sample_f1       *spans one line 
File_sample_f1       *spans one line 
String_sample_f1     *spans multiple, varying lines until the end of the file 
String_sample_f1 
```

File_two.txt：

```
Name_sample_f2       *spans one line 
File_sample_f2       *spans one line 
String_sample_f2     *spans multiple, varying lines until the end of the file 
String_sample_f2 
String_sample_f2 
String_sample_f2 
```

我想将它们都输入到名为*test*的数据集中并采用以下形式：

```
 Name             File             String
    ----             ----             ------
1   Name_sample_f1   File_sample_f1   String_sample_f1 
                                      String_sample_f1 
2   Name_sample_f2   File_sample_f2   String_sample_f2 
                                      String_sample_f2 
                                      String_sample_f2 
                                      String_sample_f2 
```

如果有人可以提供帮助，我会提前感谢！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:56:58.163

您不必像三个数据步骤那样复杂地完成它（特别是如果您要处理 N 个文件）。这很容易，真的。使用 EOV 指示器（卷尾）查看您何时处于新文件的开头 [EOV在结束卷/文件*后*跳闸] 并且每次您处于新文件的开头时，请阅读名称和文件名在前两行。

```
data test;
format name filename $100.;
retain name filename line;
infile '("c:\temp\file1.txt", "c:\temp\file2.txt")' eov=end lrecl=100 pad truncover; *or use wildcards, like infile "c:\temp\file*.txt";
input a $ @;
put _all_;
if (_n_=1) or (end=1) then do;
  end=0;
  line=1;
end;
else line+1;
if line=1 then do;
  input @1 name $100.;
end;
else if line=2 then do;
  input @1 filename $100.;
end;
else do;
  input @1 string $100.;
  output;
end;
run; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:45:11.020

```
filename file1 'testfile1.txt';
filename file2 'testfile2.txt';

DATA file1;
LENGTH thisname thisfile thistext $ 200;
RETAIN thisname thisfile;
linecounter=0;
DO UNTIL(eof);
  INFILE file1 end = eof;
  INPUT;
  linecounter+1;
  IF (linecounter eq 1) THEN thisname=_infile_;
  ELSE IF (linecounter eq 2) then thisfile=_infile_;
  ELSE DO;
     thistext=_infile_;
     output;
  END;
END;
RUN;

DATA file2;
LENGTH thisname thisfile thistext $ 200;
RETAIN thisname thisfile;
linecounter=0;
DO UNTIL(eof);
  INFILE file2 end = eof;
  INPUT;
  linecounter+1;
  IF (linecounter eq 1) THEN thisname=_infile_;
  ELSE IF (linecounter eq 2) then thisfile=_infile_;
  ELSE DO;
     thistext=_infile_;
     output;
  END;
END;
RUN;

DATA all_files;
SET file1 file2;
RUN;

PROC PRINT DATA=all_files; RUN; 
```

# postgresql - 将 MySQL GROUP BY 转换为 Postgres

> ID：14391418
> 
> 赞同：0
> 
> 时间：2013-01-18T02:11:47.410
> 
> 标签：postgresql

我正在研究一个已在 MySQL 中成功运行了一段时间的查询，但在 Postgres 中它不适用于 ole -

```
错误：列“orders.created_at”必须出现在 GROUP BY 子句中
或用于聚合函数
```

这是查询：

```
SELECT SUM(total) AS total, to_char(created_at, 'YYYY/MM/DD') AS order_date 
FROM orders 
WHERE created_at >= (NOW() - INTERVAL '2 DAYS') 
GROUP BY to_char(created_at, 'DD') 
ORDER BY created_at ASC; 
```

它只是应该返回这样的东西：

> ```
>   总计| 订购日期
> ---------+------------
>  1099.90 | 2013/01/15
>   650.00 | 2013/01/16
>  4399.00 | 2013/01/17
> 
> ```

主要的是我想要按每个月的每一天分组的总和。

有人有想法吗？

### 更新：

我按天分组的原因是因为图表将标有每月的每一天，以及每一天的总销售额。

```
第一名 - $3400.00
第二 - $2237.00
第三 - 1489.00 美元

```

等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T02:44:59.323

这是运行它所需的 sql。group by 和 order by 需要包含相同的表达式。

```
SELECT SUM(total) AS total, 
to_char(created_at, 'YYYY/MM/DD') AS order_date 
FROM orders 
WHERE created_at >= (NOW() - INTERVAL '2 DAYS') 
GROUP BY to_char(created_at, 'YYYY/MM/DD')
order by  to_char(created_at, 'YYYY/MM/DD') 
```

[http://sqlfiddle.com/#!12/52d99/2](http://sqlfiddle.com/#!12/52d99/2)

希望这会有所帮助，马特

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T02:49:11.873

我不确定你为什么要在那里进行转换。我认为更好的做法是：

```
SELECT 
  SUM(total) AS total, 
  created_at::date AS order_date 
FROM 
  orders 
WHERE 
  created_at >= (NOW() - INTERVAL '2 DAYS') 
GROUP BY 
  created_at::date 
ORDER BY 
  created_at::date ASC; 
```

我会推荐这个查询，然后通过图表设置格式化图表中的每日标签，以确保您在不同月份的同一天没有任何奇怪的问题被分组。但是，要获得您在编辑中显示的内容，您可以执行以下操作：

```
SELECT 
  SUM(total) AS total, 
  to_char(created_at, 'DDth') AS order_date 
FROM 
  orders 
WHERE 
  created_at >= (NOW() - INTERVAL '2 DAYS') 
GROUP BY 
  to_char(created_at, 'DDth') 
ORDER BY 
  to_char(created_at, 'DDth') ASC; 
```

# jquery - 使用jquery链时如何设置断点：obj.appendTo().appendTo().appendTo()？

> ID：14391420
> 
> 赞同：0
> 
> 时间：2013-01-18T02:11:51.883
> 
> 标签：jquery

Jquery 链似乎很容易阅读，但是，是否可以在其中一个调用处设置断点？

```
obj
.appendTo()
.appendTo()
.appendTo()
.doSomething()
.doSomething2(); 
```

我在 FF 中使用 FireBug。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T02:40:14.760

断点是，`;`或者你甚至可以在现代浏览器中启动一个没有它的新链

**nb ：**返回到`.end()`链的初始对象（如果使用 find() 或链中的子对象）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:45:27.453

尝试

```
.each(function(){debugger;}) 
```

# git - 合并拉取请求

> ID：14391421
> 
> 赞同：24
> 
> 时间：2013-01-18T02:11:52.750
> 
> 标签：git, github, pull-request

有人向我在 github 上的存储库提交了一组拉取请求。不幸的是，他们已经在多个拉取请求中完成了此操作（每个文件一个），而不是一次性提交所有文件的所有拉取请求。

在要求他将它们合并为一个之后 - 没有得到任何响应，我现在尝试在 Git Bash 中将这些拉取请求合并在一起 - 但运气不佳 - 我很高兴使用合并按钮并通过Windows 上的 GitHub 程序，但仅此而已。我对 git shell 没有真正的了解 - 所以如果有人可以完成我如何将这些拉取请求合并在一起的过程（无论如何它们都不冲突），那将不胜感激。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-18T02:31:54.590

假设您有 3 个拉取请求 A、B、C，它们位于三个分支 bA、bB、bC 上。你的主要分支是master。

首先将他的所有分支都放到您的本地仓库而不合并它。 `git fetch his-repo`

所以现在你的仓库可能有四个分支：`master, bA, bB, bC`

我将从 master 创建一个名为的分支`f-merge-his-repo`

`git checkout master` 这确保 f-merge-his-repo 从 master 分支出来。

`git checkout -b f-merge-his-repo` 这将创建分支 f-merge-his-repo 并切换到它。

所以现在你现在在 f-merge-his-repo 上，使用以下命令：

`git merge bA`

`git merge bB`

`git merge bC`

如果有冲突，你应该修复它（手动或使用合并工具），但正如你所说，没有冲突，所以我们说`bA bB and bC`现在都在`f-merge-his-repo`

然后，只需简单地合并`f-merge-his-repo`到您的主分支

您应该首先切换到主分支。 `git checkout master`

然后合并 f-merge-his-repo `git merge f-merge-his-repo`

或者如果您更喜欢非快进合并 `git merge --no-ff f-merge-his-repo`

毕竟，删除这些分支。

`git branch -d bA`

`git branch -d bB`

`git branch -d bC`

`git branch -d f-merge-his-repo`

你真的应该看看`pro-git` [这里](http://git-scm.com/book)。这是一本简单的书，它向您展示了您在日常工作中使用 git 所需的一切，相信我，一旦您使用了 git bash，您会发现所有这些 git GUI 都令人沮丧（除了查看日志，我使用 gitk 来查看）并分析日志）

**最后提示：**

一种很好的记忆方式`git merge`，`git rebase`就像

Merge 正在将另一个分支合并**到**您当前的分支（当然您可以命名两个分支，但默认语法是将分支合并到您当前的分支）

所以你应该总是切换到主分支并合并其他分支

`git checkout master`

`git merge their-branch --no-ff` 或者 `git merge their-branch`

并且 rebase 正在将您当前的分支**重新**定位到另一个分支（通常是主分支）

`git checkout feature-branch`

`git rebase master`

# ruby-on-rails - 从表字段中查找电子邮件的名称范围

> ID：14391423
> 
> 赞同：0
> 
> 时间：2013-01-18T02:12:25.627
> 
> 标签：ruby-on-rails, model, named-scope

在用户表中，我有一个名称字段，其中一些记录是名称，一些是电子邮件。我知道，不好的方法。那一边。我想编写一个仅返回电子邮件记录的命名范围。

我尝试调整执行此查询的查询，但失败了。

**MYSQL：**

```
SELECT NAME
FROM USER
WHERE NAME LIKE '%@%.%' 
```

**用户型号：**

```
scope :user_email, :conditions => ["name like '%@%.%'"] 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:30:16.293

尝试这个：

```
scope :user_email, :conditions => ["name LIKE ?", '%@%.%'] 
```

您应该以这种格式提供字符串条件以避免可能的 sql 注入问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:40:03.980

尝试这个：

```
 named_scope :user_email, :conditions => ["name REGEXP ?", /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i] 
```

# iphone - 为 Storyboard 中的折叠/展开单元格定制的 UITableView

> ID：14391427
> 
> 赞同：2
> 
> 时间：2013-01-18T02:13:30.150
> 
> 标签：iphone, objective-c, xcode4.5

有谁知道一个教程，展示如何在 Storyboard 中实现折叠和展开单元格（对它们进行分组）的 UITableView？就像是：

名称（展开/折叠）

*   John（点击显示 John 的信息，新的 ViewController）
*   山姆（同上）
*   保罗（同上）

运动（展开/折叠）

*   篮球
*   棒球
*   足球

感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T04:50:09.350

您可以通过以下方式进行操作：

在指定索引路径处选择单元格时插入新单元格：

```
 [tableView beginUpdates];
    [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]     withRowAnimation:UITableViewRowAnimationLeft];
    [tableView endUpdates]; 
```

然后在下次点击时删除这些：

```
[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObjects:indexPath, nil] withRowAnimation:YES]; 
```

通过这种方式，您必须更新数据源（即您的数组）和可点击单元格的索引路径，而无需在表中添加和删除。

或者，您可以在单元格选择中仅添加/删除带有表格的单元格。

# java - 相对于输入数字动态添加前导零

> ID：14391428
> 
> 赞同：0
> 
> 时间：2013-01-18T02:13:30.277
> 
> 标签：java

> **可能重复：**
> [在 Java 中用零填充整数](https://stackoverflow.com/questions/473282/left-padding-integers-with-zeros-in-java)

我需要相对于输入数字长度动态添加一些前导零，例如，如果我输入 10，它将输出

数字 01 02 03 04 05 06 07 08 09 10

我认为这样做的方法是获取输入数字的长度，然后使用某种格式将该值应用于计数器，只是不确定最好的方法。

这就是我到目前为止所拥有的......（我对编程很陌生）

```
 public static void main(String[] args) {
    int numbers;
    int counter = 1;
    int padlength;

    Scanner ngrabber = new Scanner(System.in);
    System.out.println("Please enter numbers to output number");
    numbers = ngrabber.nextInt();

                System.out.println("Numbers");
                while (counter <= numbers)          
                {
                    padlength = String.valueOf(numbers).length();
                    System.out.println(counter);
                    counter++;
                }

        }       
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T02:21:30.377

[您应该使用 Java 的 printf 样式函数，如此处](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)所示

```
System.out.printf("%02d ",counter); 
```

除非我不清楚语法，`2`否则将确保打印数字的长度最小为 2，如果输入数字的长度小于2，则`0`表示填充。`0`

* * *

编辑：要动态更改数字，试试这个。

```
padlength = String.valueOf(numbers).length();
System.out.printf(String.format("\%0%dd " ,padlength),counter); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T02:21:38.117

您可以在此处使用`printf`which uses [Formatter](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html)进行填充：

```
System.out.printf("%02d ", counter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T02:49:52.447

`printf`是 Java 的正确答案。如果您发现自己需要在脑死亡环境中执行此操作（例如，Windows 命令脚本，也称为批处理文件），这里有一种方法：

> 将您的上限数字转换为字符串；例如，10 –> "10"
> 获取该字符串的长度：`strlen("10") = 2`
> 将那么多零字符 ( `0`) 附加到一个字符 ( `1`)：`strcat("1","0","0") = "100"`
> 将该字符串转换为数字：“100” –> 100
> 对于您要格式化的每个数字：将上面的数字相加（1 + 100 = 101），转换为字符串（101 -> “101”），去掉第一个字符（“101” -> “01”）。

是的，这是一个杂牌。有人知道在 Windows 上做这件事的更好方法吗？

# java - Java 将类映射到数组列表

> ID：14391430
> 
> 赞同：1
> 
> 时间：2013-01-18T02:13:36.027
> 
> 标签：java, generics, map, arraylist

我正在尝试将一个类型的类映射`T`到一个`ArrayList`类型`T`：

```
Map<Class<?>, ArrayList<?>> map_ = new HashMap<Class<?>, ArrayList<?>>(); 
```

问题是我无法将项目添加到`Arraylist`从此地图中检索到的项目中：

```
map_.put(A.class, new ArrayList<A>());
A item = new A();
map_.get(item.getClass()).add(item); //failure! 
```

我将如何构建我的地图以便我可以访问并添加到它包含的数组列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T02:16:40.270

将您的声明更改为：

```
Map<Class<?>, List<Object>> map_ = new HashMap<>(); 
```

当您`get` *从列表*中进行转换时，您将不得不进行转换，因为您无法`Map<Class<T>, List<T>> forAll T`在 Java 中定义 a，即无法关联类型参数，因此您不得不使用上面的定义和转换来做您想做的事情。

# java - 如何在寻呼机 Adaper 中调用 OnClickListener

> ID：14391439
> 
> 赞同：0
> 
> 时间：2013-01-18T02:14:47.297
> 
> 标签：java, android, onclicklistener, android-pageradapter

我已经为此工作了一个星期，但我无法弄清楚。我有一个有 4 个视图的寻呼机适配器。它让我在它们之间滑动。但是当我调用 onClickListener 时，应用程序在启动时崩溃，因为 Listener 为空。我是一名新程序员，我不明白如何解决这个问题。请帮忙！我已经隔离了问题的根源，在侦听器查找按钮 ID 后视图没有被创建或被破坏，这就是它为空和崩溃的原因。

方法 destroyItem 是我认为导致它的原因，因为当我删除它时，应用程序不会崩溃，直到我开始滑动抛出的视图。

```
public class SplashPager extends PagerAdapter {

Button b;

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return 4;
}

@Override
public Object instantiateItem(View collection, int position) {
    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    int resId = 0;
    switch (position) {

    case 0:
        resId = R.layout.splash2;
        b = (Button) collection.findViewById(R.id.splashB);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                                    //setContentView(r.layout.someLayout);
            }
        });
        break;
    case 1:
        resId = R.layout.splash3;
        break;
    case 2:
        resId = R.layout.splash4;
        break;
    case 3:
        resId = R.layout.splash5;
        break;

    }

    View view = inflater.inflate(resId, null);
    ((ViewPager) collection).addView(view, 0);
    return view;

}

@Override
public void destroyItem(View arg0, int arg1, Object arg2) {
    // TODO Auto-generated method stub
    ((ViewPager) arg0).removeView((View) arg2);

}

@Override
public Parcelable saveState() {
    // TODO Auto-generated method stub
    return null;
}

@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    // TODO Auto-generated method stub
    return arg0 == ((View) arg1);
}

} 
```

日志：

```
01-17 21:03:35.179: W/dalvikvm(16226): threadid=1: thread exiting with uncaught exception (group=0x401a2560)
01-17 21:03:35.179: E/AndroidRuntime(16226): FATAL EXCEPTION: main
01-17 21:03:35.179: E/AndroidRuntime(16226): java.lang.NullPointerException
01-17 21:03:35.179: E/AndroidRuntime(16226):    at   com.example.survtest2.SplashPager.instantiateItem(SplashPager.java:33)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.support.v4.view.PagerAdapter.instantiateItem(PagerAdapter.java:110)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:801)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.support.v4.view.ViewPager.populate(ViewPager.java:930)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.support.v4.view.ViewPager.populate(ViewPager.java:881)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1366)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.view.View.measure(View.java:8424)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at  android.view.View.measure(View.java:8424)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at  android.view.View.measure(View.java:8424)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.view.View.measure(View.java:8424)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.view.ViewRoot.performTraversals(ViewRoot.java:844)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1864)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.os.Looper.loop(Looper.java:130)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at android.app.ActivityThread.main(ActivityThread.java:3733)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at java.lang.reflect.Method.invokeNative(Native Method)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at java.lang.reflect.Method.invoke(Method.java:507)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:892)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:650)
01-17 21:03:35.179: E/AndroidRuntime(16226):    at dalvik.system.NativeStart.main(Native Method)
01-17 21:03:35.199: E/AndroidRuntime(16226): [Blue Error Handler] Make Debugging Report file for main
01-17 21:03:35.199: E/AndroidRuntime(16226): java.lang.NullPointerException
01-17 21:03:35.199: E/AndroidRuntime(16226):    at com.example.survtest2.SplashPager.instantiateItem(SplashPager.java:33)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.support.v4.view.PagerAdapter.instantiateItem(PagerAdapter.java:110)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:801)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.support.v4.view.ViewPager.populate(ViewPager.java:930)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.support.v4.view.ViewPager.populate(ViewPager.java:881)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1366)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.view.View.measure(View.java:8424)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at  android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at  android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.view.View.measure(View.java:8424)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.view.View.measure(View.java:8424)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.view.View.measure(View.java:8424)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.view.ViewRoot.performTraversals(ViewRoot.java:844)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1864)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.os.Looper.loop(Looper.java:130)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at android.app.ActivityThread.main(ActivityThread.java:3733)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at java.lang.reflect.Method.invokeNative(Native Method)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at    java.lang.reflect.Method.invoke(Method.java:507)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:892)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at    com.android.internal.os.ZygoteInit.main(ZygoteInit.java:650)
01-17 21:03:35.199: E/AndroidRuntime(16226):    at     dalvik.system.NativeStart.main(Native Method) 
```

我很确定这是问题的原因，但我不知道这种方法是如何工作的或如何解决它：

```
@Override
public void destroyItem(View arg0, int arg1, Object arg2) {
    // TODO Auto-generated method stub
    ((ViewPager) arg0).removeView((View) arg2);

} 
```

我的另一个问题是如何使用该按钮加载新视图或活动？它不允许我实现活动，这是我学会如何调用捆绑包的唯一方法。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:50:12.327

尝试将 destroyItem 更改为此：

```
@Override
public void destroyItem(View arg0, int arg1, Object arg2){
    ((ViewPager) arg0).removeViewAt(arg1);
} 
```

和 isViewFromObject 到：

```
@Override
public boolean isViewFromObject(View view, Object object){

    return view.equals(object); 
 } 
```

如果这些更改不起作用，那么我建议您检查在您可以在集合视图上“findViewById”之后会发生什么。看起来您正在查看的按钮不在该对象内。你必须在你正在膨胀的视图中搜索它。

试试这个代码作为你的实例化代码：

```
@Override
    public Object instantiateItem(View collection, int position) {
        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        int resId = 0;
        View view = null;
        switch (position) {

        case 0:
            view = inflater.inflate(R.layout.splash2, null);
            b = (Button) view.findViewById(R.id.splashB);
            b.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                                        //setContentView(r.layout.someLayout);
                }
            });
            break;
        case 1:
            view = inflater.inflate(R.layout.splash3, null);
            break;
        case 2:
            view = inflater.inflate(R.layout.splash4, null);
            break;
        case 3:
            view = inflater.inflate(R.layout.splash5, null);
            break;

        }

        ((ViewPager) collection).addView(view, 0);
        return view;
    } 
```

# .net - 从 windows phone 7.1 中的服务器更新本地数据库

> ID：14391440
> 
> 赞同：0
> 
> 时间：2013-01-18T02:14:56.907
> 
> 标签：.net, sql-server, windows-phone-7, c#-4.0, windows-phone-7.1

我正在开发推送通知服务，我需要从服务器获取数据并存储在 Windows Phone 7.1 的本地数据库中，然后将该数据从数据库中检索到 Windows Phone 应用程序。我已经尝试了几乎所有教程和上一个问题，这些问题是在 windows phone 7.1 中与本地数据库相关的堆栈溢出中提出的，但我无法实现此任务。

我知道，我应该问我在特定教程中遇到的那个问题，但我想再次从起点开始，因为可能是我的实施过程是错误的。

所以。请告诉我有人已经实现此任务的任何教程，或者给我代码以将数据从服务器存储到数据库，然后将数据从数据库检索到 Windows Phone。我正在使用 C#.net。如果有人需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:04:59.577

我建议您在 Windows Phone 应用程序中使用 SQLITE 进行数据库操作。这是一个很好的教程，它解释了[通过 Windows Phone 的 Sqlite 客户端进行本地数据库编程](http://dotnetslackers.com/articles/silverlight/Windows-Phone-7-Native-Database-Programming-via-Sqlite-Client-for-Windows-Phone.aspx)

或者，如果您擅长 LINQ 操作，也可以使用[LINQ to SQL](http://blogs.msdn.com/b/wriju/archive/2011/08/01/windows-phone-7-using-local-database-for-application.aspx)

# javascript - 使用 Gantry 4 框架在 Joomla 3.0 上获取引导工具提示时遇到问题

> ID：14391441
> 
> 赞同：1
> 
> 时间：2013-01-18T02:15:02.990
> 
> 标签：javascript, joomla, twitter-bootstrap, tooltip, typeerror

我正在尝试在 Gantry 4 中启用引导工具提示。

bootstrap javascript 被加载，bootstrap.min.js 和 jquery 一样。

我在结束 body 标记之前将以下内容添加到 index.php 文件中

```
<script type="text/javascript">
  $(document).ready(function () {
    $("[rel=tooltip]").tooltip();
  });
</script> 
```

当我收到以下错误时，我似乎有冲突：

```
TypeError: 'undefined' is not a function (evaluating '$(document).ready(function () {
  $("[rel=tooltip]").tooltip();
})') 
```

应该触发工具提示的文本是：

```
<a href="#" rel="tooltip" data-placement="top" data-original-title="Depuis le 1er juin 2004, la durée légale de la vie séparée a été réduite de quatre à deux ans.">le cas d&rsquo;un mariage de longue durée</a> 
```

有人可以指出我需要做些什么来解决这个问题吗？谢谢。

抱歉，我忘记将链接添加到工具提示不起作用的站点和页面。

[http://gobet.ergonomiq.net/divorce-séparation/divorce/26-requérir-seul-le-divorce-après-deux-ans-de-séparation#](http://gobet.ergonomiq.net/divorce) _

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T03:34:02.617

您在网站上启用了 MooTools，因此 $ 选择器不会像 jQuery 是主要的 $ 选择器代理那样工作。您需要将 $ 的用途转换为预期 jQuery 使用 jQuery 的地方。

例子：

```
$(selector here) 
```

应该：

```
jQuery(selector here) 
```

其他一切都会正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T05:20:43.473

确保您只加载了 1 个 jQuery 库并且它位于列表的顶部。如果没有，那么您的 bootstrap.min.js 文件将不起作用。

如果完成后仍然无法正常工作，请尝试添加如下代码：

```
$document = JFactory::getDocument(); //remove is this line is already being used
$js = "$(document).ready(function(){
          $('[rel=tooltip]').tooltip();
       });";
$document->addScriptDeclaration($js); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-01T00:36:44.303

将引导框架添加到模板的 component.php 中： JHtml::_('bootstrap.framework'); 这应该可以解决“.tooltip 不是函数”错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-17T08:48:12.580

1.  在您的 Joomla 项目中，打开`templates/<your-template-name>/index.php`.
2.  找到`JHtml::_('behavior.framework', true);`并注释掉。

或者您可以将单词替换`behavior`为`bootstrap`.

# python - urllib 解码错误

> ID：14391443
> 
> 赞同：0
> 
> 时间：2013-01-18T02:15:10.233
> 
> 标签：python, encoding, urllib

我想从 url 打开一个带有重音字符（ç、ã、é 等）的文本文件。这是测试代码：

```
#coding:utf-8

import urllib

murl = urllib.urlopen('http://www.****.com.br/sampletext.txt')
print murl.geturl()
print murl.read() 
```

它工作得很好，打印一切都很好，但如果我注释掉这一行......

`#print murl.geturl()`

...我收到此错误消息（重复 2 次）

```
[Decode error - output not utf-8]
[Decode error - output not utf-8] 
```

为什么在打印出其内容之前打印 url 可以避免该错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:21:24.180

您确定在 $PATH（或 Windows 上的 %PATH%）变量中列出了带有文件“python”的目录吗？

# web-applications - IIS 7.5 下的网站，应用程序池给出服务器错误

> ID：14391444
> 
> 赞同：0
> 
> 时间：2013-01-18T02:15:16.747
> 
> 标签：web-applications, iis-7.5

我在 IIS 7.5 中创建了一个新的应用程序池，并为 Identity 选择了 ApplicationPoolIdentity。

当我分配网站使用此应用程序池时，我收到 500 服务器错误。我有其他网站使用具有相同身份和 asp.net 运行时的应用程序池并且没有错误。

我将池上的 Identity 更改为 NetworkService、LocalService、LocalSystem，但仍然出现相同的错误。

为什么我会收到这个错误，我该如何克服这个错误？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T02:49:02.320

如果您发布了您遇到的错误，那将会很有帮助。如果您有其他应用程序使用此应用程序池，并且它们正在运行，那么我会怀疑该应用程序或应用程序依赖项/引用。如果这来自以 32 位模式运行的以前版本的 iis，您可能需要在应用程序池高级选项中启用 32 位模式。发布异常中的文本，我们可以提供更精确的故障排除步骤。

# php - SMTP Telnet 和 PHP 没有从 HELO 得到任何响应

> ID：14391445
> 
> 赞同：2
> 
> 时间：2013-01-18T02:15:18.790
> 
> 标签：php, sockets, smtp, telnet

好的，我第一次尝试使用 php 进行套接字编程，这是我一直想做的事情，但由于我们在工作中完成的应用程序上的退回电子邮件跟踪不起作用，这加快了速度，所以现在我必须检查整个电子邮件地址以确保它们有效。

我已经学会了如何通过命令行使用 telnet 来验证电子邮件地址并发送电子邮件地址，我对此没有任何问题。我跌倒的地方是当我去使用“HELO”命令与服务器通信时。

但是我可能在这里完全错误的区域，因为我什至不知道这是否已经建立了 telnet 连接，但最后的 var dump 表明正在建立一个连接。

除了“n6si3992361paw.22”之外，当我使用命令行进行远程登录连接时，连接响应是相同的，但我想这是每个连接的某种唯一标识符。

```
<?php

$target = "aspmx.l.google.com";
$port = 25;
$errno = "";
$errstr = "";
$timeout = 9;
$newline = "\n\r";
$logArray = array();

$connect = fsockopen($target, $port, $errno, $errstr, $timeout);
$smtpResponse = fgets($connect, 4096);
if(empty($connect)) {
   $logArray["error"][] = "Failed to connect: $smtpResponse";
   var_dump($logArray);
   exit;
} else {
   $logArray['connection'][] = "Connected to: $smtpResponse";
}
fputs($connect, "HELO" . $newLine);
$smtpResponse = fgets($connect, 4096);
$logArray['connection'][] = "$smtpResponse";
var_dump($logArray); 
```

$logArray 的结果：

```
array(1) { ["connection"]=> array(2) { [0]=> string(57) "Connected to: 220 mx.google.com ESMTP n6si3992361paw.22 " [1]=> string(0) "" } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:34:03.857

您犯了一个简单的错字（PHP 变量名区分大小写）。

比较一下：

```
$newline = "\n\r"; 
```

... 有了这个：

```
fputs($connect, "HELO" . $newLine); 
```

使用`$newline`，不使用`$newLine`。然后它工作。

此外，正如 Casper 已经指出的那样，您的 CRLF 顺序错误；使用`\r\n`，而不是相反。

# php - php数组中的MySQL结果问题

> ID：14391452
> 
> 赞同：1
> 
> 时间：2013-01-18T02:16:25.137
> 
> 标签：php, sql

谁能告诉我为什么 MySQL 的所有结果都没有出现在数组中？

```
$result = mysql_query("select * from groups order by id desc");

if ($row = $result->fetch()) {
$groups[] = $row; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T02:17:09.020

`while`不使用`if`

```
while ($row = $result->fetch()) {
  $groups[] = $row; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T02:17:43.590

您在那里的代码不会迭代结果集。试试这个。

```
while ($row = $result->fetch()) { 
$groups[] = $row;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T02:18:49.733

因为 fetch 只获取一行，如[php 手册](http://php.net/manual/en/pdostatement.fetch.php)中所述：

> 从结果集中获取下一行

我想建议您更改 PDO 的 mysql_ 代码

```
$db = new PDO("..."); // Creates the PDO object. Put the right arguments for your connection.
$statement = $db->prepare("SELECT * FROM groups ORDER BY id DESC");
$statement->execute();
while ($groups = $statement->fetch())
  {
  // Do whatever you want to do

  } 
```

# ios - UIdate 选择器不能自由移动

> ID：14391458
> 
> 赞同：0
> 
> 时间：2013-01-18T02:17:14.013
> 
> 标签：ios, scroll, uidatepicker, freeze, uiactionsheet

我`UIbutton`的`UIViewController`. 单击它会打开一个`UIActionSheet`带有一个`UIDatePicker`和一个关闭按钮的按钮。我设置了`UIDatePicker`日期模式。所以它显示为今天的日期。假设我想选择 2015 而不是 2013，我必须向下滚动。但它不允许我向下滚动。我必须向上滚动一次到 2012 年，然后向下滚动。这似乎是一个小问题，但客户想要正确向下滚动。我检查了我的个人手机设置闹钟，我可以自由地向下滚动。我不必向上滚动然后向下滚动。所以这就是点击按钮时发生的事情。

```
- (IBAction)btnShowDateNeededClick:(UIButton *)sender
{
    UIDatePicker *datePickerView = [[UIDatePicker alloc]init];
    datePickerView.datePickerMode = UIDatePickerModeTime;
    self.actSheet = [[ UIActionSheet alloc]init];
    UISegmentedControl *closeButton = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObject:@"Close"]];
    closeButton.momentary = YES;
    closeButton.frame = CGRectMake(260, 7.0f, 50.0f, 30.0f);
    closeButton.segmentedControlStyle = UISegmentedControlStyleBar;
    closeButton.tintColor = [UIColor blueColor];
    closeButton.tag = 101;
    [closeButton addTarget:self action:@selector(dismissActionSheetWithTime:) forControlEvents:UIControlEventValueChanged];
    [self.actSheet addSubview:closeButton];
    [self.actSheet showInView:self.view];
    [self.actSheet addSubview:datePickerView];
    [self.actSheet sendSubviewToBack:datePickerView];
    [self.actSheet setBounds:CGRectMake(0, 0, 320, 500)];
} 
```

如您所见，我将`datePicker`分段控制作为按钮添加到`UIActionsheet`. 现在我必须更改设置或日期选择器吗？如果您需要更多信息，请询问。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:15:17.623

尝试这个。可能是这个帮助。

在 .h 文件中。

```
UIDatePicker *datePickerView;
UIActionSheet *Actionsheet1; 
```

在 .m 文件中

在 viewDidLoad 方法中

```
// Picker Initialization

datePickerView = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 40, 0, 0)];
datePickerView.datePickerMode = UIDatePickerModeDateAndTime; 
```

制作一个将在您的按钮单击时调用的函数

```
-(void) Create_Start_Date_Picker_Function
{
    Actionsheet1 = [[UIActionSheet alloc] initWithTitle:nil  delegate:self
                                              cancelButtonTitle:nil
                                         destructiveButtonTitle:nil
                                              otherButtonTitles:nil];

    Actionsheet1.actionSheetStyle = UIActionSheetStyleBlackOpaque;
    [Actionsheet1 addSubview: datePickerView];
    [Actionsheet1 showInView:self.view];
    [Actionsheet1 setBounds:CGRectMake(0, 0, 320, 485)];

    UISegmentedControl *closeButton = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObject:@"Done"]];
    closeButton.momentary = YES;
    closeButton.frame = CGRectMake(260, 7.0f, 50.0f, 30.0f);
    closeButton.segmentedControlStyle = UISegmentedControlStyleBar;
    closeButton.tintColor = [UIColor blueColor];
    [closeButton addTarget:self action:@selector(Dismiss_Actionshit1) forControlEvents:UIControlEventValueChanged];
    [Actionsheet1 addSubview:closeButton];

} 
```

并在解雇行动的方法中。

```
-(void) Dismiss_Actionshit1
{
   // Your action sheet dismiss code
} 
```

# php - SimplePie RSS - NULL 中的 get_language

> ID：14391459
> 
> 赞同：0
> 
> 时间：2013-01-18T02:17:27.100
> 
> 标签：php, rss, feed, simplepie

嗨，我以这种方式使用 SimplePie：

```
$feed = new SimplePie();
$feed->set_feed_url( array("feed.xml", "feed2.xml") );
$feed->enable_cache(false);
$feed->init();
$feed->handle_content_type();

var_dump($feed->get_language());

foreach ($feed->get_items() as $item): 
```

get_language() 返回 NULL .. 我错过了什么？

是否可以获得每个项目的语言？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T03:46:12.007

[RSS 规范](http://www.rssboard.org/rss-specification#optionalChannelElements)中的语言元素是可选的，如果没有，作者没有提供它。很可能是`en`在`get_language()`返回时`null`，这可能是您可以做出的最安全的假设。

# php - 如何在不将文件写入光盘的情况下创建文件并压缩它们？

> ID：14391463
> 
> 赞同：1
> 
> 时间：2013-01-18T02:18:35.843
> 
> 标签：php, zipfile, createfile

我想创建 5 个不同的文件来存储我的数据库中的数据。我想压缩 5 个文件并让这个函数返回 zip。

我可以创建 5 个文件而不将它们实际写入磁盘吗？我从数据库得到的数据只是字符串，所以每个文件都是一个长字符串。

我只是想这样做：

```
function getZippedFiles()
 // Create 1..5 files
 // Zip them up
 // Return zip
end

main()
// $zip_file = getZippedFiles();
end 
```

非常感谢有关如何执行此操作的任何信息，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:38:50.453

当然可以，使用**[ZipArchive非常简单](http://php.net/manual/en/class.ziparchive.php)**

```
// What the array structure should look like [filename => file contents].
$files = array('one.txt' => 'contents of one.txt', ...);

// Instantiate a new zip archive.
$zip_file = new ZipArchive;

// Create a new zip. This method returns false if the creation fails.
if(!$zip_file->open('directory/to/save.zip', ZipArchive::CREATE)) {
    die('Error creating zip!');
}

// Iterate through all of our files and add them to our zip stream.
foreach($files as $file => $contents) {
    $zip_file->addFromString($file, $contents);
}

// Close our stream.
$zip_file->close(); 
```

# php - 更改选择选项值时偶尔会在网页上显示白色空白

> ID：14391468
> 
> 赞同：0
> 
> 时间：2013-01-18T02:18:50.643
> 
> 标签：php, html, css, jquery

我正在构建一个在线系统，其中用户是某个大学机构的讲师。该系统的主要功能之一是让用户能够通过互联网查看他们的日程安排。

我目前正在构建用户查看他们的日程安排的页面，我所做的是在其中创建一个选择选项，当值更改时触发一个 jquery 函数（执行 ajax 请求）。然后将请求的页面显示在当前页面的一个 div 上。

问题是，当我尝试更改选择选项的值时，页面偶尔会在我的整个页面顶部显示一个巨大的白色空白。我不知道是什么触发了这个错误，因为它只是偶尔发生，而不是每次都发生。当我重新加载页面时，空白消失了。

我一直在到处寻找答案，但没有找到适合我问题的答案。

这是空白出现之前的页面 [https://lh6.googleusercontent.com/-rb0XXjcpn6w/UPiwjIY92OI/AAAAAAAAABo/BmiDIbZWcxU/s640/before.jpg](https://lh6.googleusercontent.com/-rb0XXjcpn6w/UPiwjIY92OI/AAAAAAAAABo/BmiDIbZWcxU/s640/before.jpg)

这是出现空白时的页面 [https://lh3.googleusercontent.com/-RZxh2P3Bk0o/UPiwRv5oHHI/AAAAAAAAABc/VIB6LYvPBE4/s640/after.jpg](https://lh3.googleusercontent.com/-RZxh2P3Bk0o/UPiwRv5oHHI/AAAAAAAAABc/VIB6LYvPBE4/s640/after.jpg)

我希望你们能帮助我...

这是页面的代码..

```
<?php
require_once("../includes/initialize.php");

 $adminEmps = employee::find_by_cond("(department = 'ACADEMIC-TEACHING' or department = 'ACADEMIC-NON TEACHING') and emp_status='active' order by lastname asc");

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Schedule</title>
</head>
<script type="text/javascript">
function selectEmp(){
$('#here').html("<img src=../Images/gif/loading14.gif' class='three columns     centered'>");
$.post('viewSched.php','id='+$('#selector').val()+'&yr='+$('#yrselect').val(),
    function (response){
      $('#here').html(response);
    });
}
</script>
<body>
<?php include("AdminDropdown.php"); ?>
<div class="row">
 <div class="twelve columns">
<div class="row panel">
    <h2><img src="../Images/Shedule.png" height="100px" width="100px" style="vertical-align:middle"/>
        Schedule
    </h2>
    <dl class="tabs pill">
      <dd class="active"><a href="#simple1">Academic</a></dd>
      <dd><a href="#simple2">Administrative</a></dd>
      <dd class="hide-for-small"><a href="#simple3">OSAS</a></dd>
    </dl>
  </div>
 <ul class="tabs-content">
<li class="active" id="simple1Tab">
<div class="two columns">
  Select Employee 
</div>
<div class="three columns end">
  <select id='selector' onchange="selectEmp()" >
    <option>--Select--</option>
   <?php
    foreach ($adminEmps as $key => $value) {
      echo "<option value={$value['emp_ID']}>{$value['lastName']},     {$value['firstName']} {$value['lastName']}</option>";
    }
   ?>
  </select>
</div>
<div class='two columns'>
</div>
<div class='two columns' style='text-align:right;'>
  Select Year
</div>
<div class='three columns end'>
  <select id='yrselect' onchange="selectEmp()">
    <option>-- Select --</option>
    <?php
      for ($i=2008; $i <= date('Y'); $i++) { 
        $yr = $i + 1;
        echo "<option>{$i}-{$yr}</option>";
      }
    ?>
  </select>
</div>
<br>
<br>
<div class="twelve columns ">
  <div class="nine columns centered">
    <div id='here'>

  </div>
  </div>
</div>

</li>
<li id="simple2Tab"></li>
<li id="simple3Tab">This is simple tab 3s content.</li>
</ul>   

</div>
</div>

<?php include("adminfooter.php"); ?>
</body>
</html> 
```

这是请求页面的代码。

```
<?php
require_once('../includes/initialize.php');

    $id = $_POST['id'];
    $yr = $_POST['yr'];
        $info = sched::find_scheds_by_id_yr($id,$yr);
        $display = "<table>
                        <thead>
                        <tr>
                            <th>Day</th>
                            <th>Time Start</th>
                            <th>Time End</th>
                            <th>Room</th>
                            <th>Subject</th>
                        </tr>
                        </thead>
                        <tbody>

                        ";
                    if($info){
        foreach ($info as $key2 => $value2) {
            $display .= "<tr>
                        <td>".$value2['day']."</td>
                        <td> ".$value2['time_start']."</td>
                        <td>{$value2['time_end']}</td>
                        <td>{$value2['room']}</td>
                        <td>{$value2['Subject_description']}</td>
                        </tr>";
        }
    }
            $display.="</tbody>
                    </table>";

?>
<html>
<head><title></title></head>
<body>
    <?php echo $display; ?>
</body>
</html> 
```

顺便说一句，这只发生在谷歌浏览器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T02:57:30.427

根据您的源文件，唯一可见的 javascript 将 的内容更改为标签`#here` `div`内的加载图像`img`，或 AJAX 调用的结果。

由于除了这`div`似乎没有任何变化，您应该查看 css 并查看它是否正确处理`div`带有动态内容的 a（即，`div`其内容的大小将发生变化）。

看看它是如何定位/调整大小的，以及你是如何处理`overflow`房产的。

# php - 从具有不同表前缀的数据库中查询帖子

> ID：14391471
> 
> 赞同：1
> 
> 时间：2013-01-18T02:19:05.323
> 
> 标签：php, database, wordpress

我在我的站点中安装了 2 个 WordPress 安装，它们共享同一个数据库，只有 wordpress1 的表前缀为 wp1_ ，而 wordpress2 的表前缀为 wp2_ 。如何查询来自 wordpress1(wp1_) 的帖子以显示在 wordpress2 的侧边栏小部件中？我只能显示从 wp1_ 到 wordpress1（它自己的表）的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T05:11:34.883

实现起来并不难——复制 $wpdb 对象并对其进行修改，然后在其中包装对本机小部件代码的调用。也就是说，假设数据库访问凭据相同。但我根本不建议走这条路。它很难维护，你真的应该练习适当的关注点分离。只需要一次失误，数据库 A 就会愉快地写满数据库 B。

您是否考虑过使用 RSS 小部件？http调用可以通过环回完成，因此不应该增加太多开销，并且单独的数据库将保持......独立。

# php - MySQL 和 PHP 日期和时间备忘单

> ID：14391478
> 
> 赞同：0
> 
> 时间：2013-01-18T02:20:47.753
> 
> 标签：php, mysql

我对 MySQL 数据库中日期和时间的选择感到困惑。是否有一份备忘单可以为我提供基础知识并总结选择？

我欢迎技术更正，但请记住，这并不意味着作为参考。这是一个摘要备忘单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T02:20:47.753

# MYSQL DATE、DATETIME 和 TIMESTAMP 备忘单

**DATE**
支持范围从“1000-01-01”到“9999-12-31”。
以 YYY-MM-DD 格式存储为字符串。

**DATETIME**
支持范围从“1000-01-01 00:00:00”到“9999-12-31 23:59:59”。
以 YYYY-MM-DD HH:MM:SS 格式存储为字符串。

代表日历上的日期和挂钟上的时间。创建或更新记录时它永远不会改变。它永远不会根据服务器的时区而改变。可以做从 1000 年到 9999 年的日期。

**TIMESTAMP**
支持范围从 '1970-01-01 00:00:01' UTC 到 '2038-01-19 03:14:07' UTC
不能做早于 1970 年的日期，因此不能用于生日。
以 YYYY-MM-DD HH:MM:SS 格式存储为字符串。

时间戳是一个独特的时间点。在 MySQL 中，它通常用于跟踪记录的更改，并且可以设置为在创建和/或更新记录时自动更新。

MySQL 根据服务器的时区转换 TIMESTAMP 值。它被转换为 UTC（协调世界时）进行存储，然后再次返回到服务器的时区进行检索。

**UNIX TIMESTAMP**
UTC 自 1970 年 1 月 1 日以来调整的秒数，存储为带符号的 32 位整数。

当发生闰秒时，UTC 日期不完全是 86400 秒，Unix 时间编号就会出现不连续性。

这些存储在 MySQL 的“整数”列中，内部存储为 32 位。

**MySQL 日期函数**
MySQL 日期和时间格式是字符串，而不是整数。

FROM_UNIXTIME(timestamp) 将 unix 时间戳格式化为字符串
UNIX_TIMESTAMP(mysqldate) 将 MySQL 字符串转换为 unix 时间戳

**PHP 日期函数**
PHP 日期函数使用 unix 时间戳，即整数。

*string* date( *string* $format, *int* $timestamp) 从 unix 时间戳返回 MySQL 字符串
*int* strtotime( *string* $mysqldate) 从 MySQL 字符串返回 unix 时间戳

**处理不兼容的日期时间格式的方法：**
PHP 将 unix 时间戳转换为 MySQL 字符串：

```
 $mysqldate = date( 'Y-m-d H:i:s', $timestamp ); 
```

PHP 将 MySQL 字符串转换为 unix 时间戳：

```
 $timestamp = strtotime( $mysqldate ); 
```

MySQL 将 unix 时间戳转换为 MySQL 字符串：

```
 $query = "UPDATE table SET mysqldatetimefield = FROM_UNIXTIME($timestamp); 
```

MySQL 将 MySQL 字符串转换为 unix 时间戳：

```
 $query = "SELECT UNIX_TIMESTAMP(mysqldate) FROM table; 
```

在 MySQL 整数列中存储 unix 时间戳：

```
 mysql> CREATE TABLE table ( timestamp INTEGER, PRIMARY KEY (timestamp) );
    mysql> INSERT INTO table(timestamp) VALUES (1358402400) 
```

# javascript - 为什么 jquery.each 执行两次？

> ID：14391482
> 
> 赞同：2
> 
> 时间：2013-01-18T02:21:26.970
> 
> 标签：javascript, jquery, each

JSFiddle在这里：http: [//jsfiddle.net/xgTt2/3/](http://jsfiddle.net/xgTt2/3/)

我在 a 中有一个`$.each`嵌套`$.each`，我不确定为什么第二个`$.each`运行两次。有任何想法吗？

```
var serverResponse = [{"Id":"aaa","OrderItems":[{"Id":1,"Description":"Salad"},{"Id":2,"Description":"Pizza"}]},{"Id":"bbb","OrderItems":[{"Id":3,"Description":"Salad"},{"Id":4,"Description":"Pizza"}]}];

$.each(serverResponse, function (index) {
  var pos = serverResponse[index];

  $('#placeholder').append('<p>' + pos.Id + '</p>')

  $.each(pos.OrderItems, function (index) {
     $('.orderitem').append('<p>' + this.Id +  
                       ' ' + this.Description + '</p>')
  });

}); 
```

上面的 javascript 产生以下输出：

```
aaa
1 Salad
2 Pizza
3 Salad
4 Pizza
bbb
3 Salad
4 Pizza 
```

我要这个：

```
aaa
1 Salad
2 Pizza
bbb
3 Salad
4 Pizza 
```

知道我做错了什么吗？这是问题的一个工作示例：http: [//jsfiddle.net/xgTt2/3/](http://jsfiddle.net/xgTt2/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T02:29:33.543

接近尾声时，您有两个带有 class 的元素`orderitem`。使用`$('.orderitem').append()`将附加到*它们两者*。

相反，您想追加到您创建的最后一个元素。

```
var $order_item = $('<p class="orderitem">' + pos.Id + '</p>');
$('#placeholder').append($order_item);

$.each(pos.OrderItems, function (index) {
  $order_item.append('<p>' + this.Id +  
                       ' ' + this.Description + '</p>');
}); 
```

[http://jsfiddle.net/xgTt2/4/](http://jsfiddle.net/xgTt2/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T02:29:41.483

这是答案：

[http://jsfiddle.net/7EmsX/](http://jsfiddle.net/7EmsX/)

```
var serverResponse = [{
    "Id": "aaa",
    "OrderItems": [{
        "Id": 1,
        "Description": "Salad"
    }, {
        "Id": 2,
        "Description": "Pizza"
    }]
},
{
    "Id": "bbb",
    "OrderItems": [{
        "Id": 3,
        "Description": "Salad"
    }, {
        "Id": 4,
        "Description": "Pizza"
    }]
}];

$.each(serverResponse, function (index) {
    var pos = serverResponse[index];
    var $orderItem = $('<p class="orderitem">' + pos.Id + '</p>');
    $orderItem.appendTo('#placeholder');
    $.each(pos.OrderItems, function (index) {
        $orderItem.append('<p>' + this.Id + ' ' + this.Description + '</p>')
    });
}); 
```

选择`.orderitem`类时，会选择每个`pos`项目并将子项目插入其中。您只想将子项目插入当前`pos`项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T02:30:21.753

在第二次循环运行中，`$('.orderitem')`选择您的所有`<p class="orderitem"></p>`

试试下面：

```
var serverResponse = [{"Id":"aaa","OrderItems":[{"Id":1,"Description":"Salad"},{"Id":2,"Description":"Pizza"}]},{"Id":"bbb","OrderItems":[{"Id":3,"Description":"Salad"},{"Id":4,"Description":"Pizza"}]}];

$.each(serverResponse, function (index) {
  var pos = serverResponse[index];
  var orderitemHTML = '';
  orderitemHTML += '<p class="orderitem">' + pos.Id + '</p>';

  $.each(pos.OrderItems, function (index) {
    orderitemHTML += '<p>' + this.Id + ' ' + this.Description + '</p>';
  });
  $('#placeholder').append(orderitemHTML);
}); 
```

# sql - 来自多个相关表的复合外键

> ID：14391483
> 
> 赞同：0
> 
> 时间：2013-01-18T02:21:27.807
> 
> 标签：sql, foreign-keys, composite-key

刚开始学习 SQL，有一个我想不通的问题。

我有一个基于下表及其主键的设置，表之间具有相同名称的列受外键约束：

> 公司：
> 
> *   公司编号
> 
> 分配：
> 
> *   公司编号
> *   部门 ID
> 
> 资源：
> 
> *   公司编号
> *   资源 ID
> 
> 部门资源：
> 
> *   公司编号
> *   部门 ID
> *   资源 ID

*   DivisionResource 用于在部门和资源之间创建多对多关系并对其进行约束，以便部门只能链接到同一公司的资源。
*   如果没有 DivisionResource，Division 和 Resource 就不需要 CompanyId 作为包含唯一记录的主键。

所以我的问题是：有没有办法创建与 DivisionResource 创建类似的约束，而不强制 Division 和 Resource 在其主键中有一个额外的列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T04:16:08.223

下面架构中的 ResourceCompany 和 DivisionCompany 是连接表。他们的主键中将包含 CompanyId，但 Resource 和 Division 将具有一列的主键。这就是你要找的。

> 资源 -> 资源公司
> 
> 部门资源 -> 资源公司
> 
> 部门 -> 部门公司
> 
> 部门资源 -> 部门公司

```
create table Company (CompanyId int primary key);

create table DivisionCompany (
    CompanyId int foreign key references Company(CompanyId), 
    DivisionId int, 
    constraint pk_div_company primary key (DivisionId, CompanyId)
    );

create table Division (
    DivisionId int primary key,
    CompanyId int,
    constraint fk_div_company foreign key (DivisionId, CompanyId) references DivisionCompany(DivisionId, CompanyId));

create table ResourceCompany (
    CompanyId int foreign key references Company(CompanyId), 
    ResourceId int, 
    constraint pk_res primary key (ResourceId, CompanyId));

create table Resource(
    ResourceId int primary key,
    CompanyId int, 
    constraint fk_res_company foreign key (ResourceId, CompanyId) references ResourceCompany(ResourceId, CompanyId)
    );

create table DivisionResource(
    CompanyId int,
    DivisionId int, 
    ResourceId int,
    constraint pk_DivRes primary key (DivisionId, ResourceId),
    constraint fk_DivCompany foreign key (DivisionId, CompanyId) references DivisionCompany(DivisionId, CompanyId),
    constraint fk_ResCompany foreign key (ResourceId, CompanyId) references ResourceCompany(ResourceId, CompanyId)
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T03:06:54.633

在 DivisionResource 的插入和更新上创建 INSTEAD OF 触发器

触发器将检查 Divistion 和 Resource 是否属于同一公司。如果他们不这样做，它将导致修改失败

或者，最好有一个修改 DivisionResource 的存储过程。然后触发器需要调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T03:17:06.653

我假设您正在尝试创建以下架构：

```
CREATE TABLE company (
  companyId int PRIMARY KEY)

CREATE TABLE division (
  divisionId int PRIMARY KEY,
  companyId int
    REFERENCES company (companyId) ON DELETE CASCADE ON UPDATE CASCADE)

CREATE TABLE resource (
  resourceId int PRIMARY KEY,
  companyId int
    REFERENCES company (companyId) ON DELETE CASCADE ON UPDATE CASCADE)

CREATE TABLE divisionResource (
  divisionId int
    REFERENCES division (divisionId) ON DELETE CASCADE ON UPDATE CASCADE,
  resourceId int
    REFERENCES resource (resourceId) ON DELETE CASCADE ON UPDATE CASCADE,
  PRIMARY KEY (divisionId, resourceId)) 
```

哪个抛出：

```
在表 'divisionResource' 上引入 FOREIGN KEY 约束可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。
```

更改其中一个`divisionId`或`resourceId`更改`ON DELETE NO ACTION ON UPDATE NO ACTION`本质上会破坏参照完整性。我在评论中建议的是制作一个代理键。但是，最好为`resource`. 这将保持参照完整性并规范化模式：

```
CREATE TABLE company (
  companyId int PRIMARY KEY)

CREATE TABLE division (
  divisionId int PRIMARY KEY,
  companyId int
    REFERENCES company (companyId) ON DELETE CASCADE ON UPDATE CASCADE)

CREATE TABLE resource (
  resourceId int PRIMARY KEY)

CREATE TABLE companyResource (
  resourceId int
    REFERENCES resource (resourceId) ON DELETE CASCADE ON UPDATE CASCADE,
  companyId int
    REFERENCES company (companyId) ON DELETE CASCADE ON UPDATE CASCADE)

CREATE TABLE divisionResource (
  divisionId int
    REFERENCES division (divisionId) ON DELETE CASCADE ON UPDATE CASCADE,
  resourceId int
    REFERENCES resource (resourceId) ON DELETE CASCADE ON UPDATE CASCADE,
  PRIMARY KEY (divisionId, resourceId)) 
```

# html - 外部 CSS 在 Chrome 中不起作用

> ID：14391486
> 
> 赞同：1
> 
> 时间：2013-01-18T02:21:36.150
> 
> 标签：html, css

完整和完全的菜鸟在这里。我的外部样式表在 IE9 中运行良好，但在 Chrome 中根本无法运行。这是HTML。

```
<!DOCTYPE html>

<html>

<head>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

<link rel="stylesheet" href="default.css" />
</head>

<title>DCE</title>

</head>

<body>

<a href="index.html">
<img src="Images\logo.png" alt="Logo" width="50%" height="50%">
</a> 

<br>

<hr style="height:5px">
<embed height="50" width="100" src="Theme.mp3">

<ul>ABC
<a href="pages\aboutus.html"><li>Z</li></a> 
<a href="pages\AAAA.html"><li>Y</li></a> 
</ul>

<h2>X</h2>

<p>Blah</p>
<p>Blah</p>

</body>

</html> 
```

还有可怕的CSS。

```
h1 {color:#e03d89;}
body {background-image:url(Images/Background.png);}
h2 {font-family:Tahoma, Geneva, sans-serif;}
p {font-family:Arial, Helvetica, sans-serif;}
a:link {color:#e03d89;}     
a:visited {color:#e97fa5;}  
a:hover {color:#eb0258;}  
a:active {color:#7a0453;}  
p {margin-left: 30px; text-indent: 20px}
h2 {color:#e03d89;}
h2 {text-align:center} 
```

感谢你们提供的任何帮助。我确定我在发布此内容时做错了可怕的事情，我所能做的就是希望大家能原谅我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T03:53:17.250

有几件大事可能会绊倒 Chrome：

您有两个用于 head 的结束标签，第一个导致标题标签位于 head 之外。

```
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

<link rel="stylesheet" href="default.css" />
</head>  <!--  REMOVE THIS CLOSING HEAD!! -->

<title>DCE</title>

</head> 
```

在您的 UL 和 LI 标签中，您不能在 li 标签之外包含文本或元素，您的锚标签“a”和文本 ABC 需要更改。

```
 <ul>ABC <!-- REMOVE ABC -->
    <a href="pages\aboutus.html"><li>Z</li></a> <!-- anchor tags outside of the li tag -->
    <li><a href="pages\AAAA.html">Y</a></li> <!-- anchor tags INSIDE of li tag - this is the way to do it -->
</ul> 
```

Like @cimmanon said, the slashes in your html links are back slashes and they should be forward slashes "pages/AAAA.html" instead of "pages\AAAA.html".

Those three changes will probably get your style sheet back up and running. I can tell you're learning/experimenting so I won't go overboard correcting the rest, keep learning and you'll get there :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T04:06:17.277

In addition to what Allen said...

1) The is the html start tag, so you don't need the addition 2) Elements that don't have a second closing tag, end with /> like (this applies to embed, br, hr and img. I don't know if that would break anything but it's best to do things right anyway. 3) And put a type="text/css" in the stylesheet link tag.

# python - 解析基于语法的文件格式的好python策略

> ID：14391495
> 
> 赞同：0
> 
> 时间：2013-01-18T02:23:18.327
> 
> 标签：python, parsing, format, grammar

我已经为 PLY 和 OBJ 等 3D 文件格式编写了很多简单的导入器，它们似乎具有非常基于状态的每行结构，使得解析非常容易。我的朋友希望我使用 python 为来自 mirai 的文件类型实现一个简单的导入器，我注意到可以有很多分层表示的数据，这与我之前使用的更简单的逐行格式不同。

我想知道我是否应该尝试使用一些 python 库、一些复杂的正则表达式为此创建一个完整的语法，或者我应该使用字符串替换来破解一些解决方案。任何人都可以为解析这种类型的文件提供任何好的建议吗？这个特定示例是一个导出的多维数据集。

```
 filetype gx;
 GrammarVersion 2.1.0.0;
 TemplateVersion 2.1.0.0;
 HostName "ZOO-HP";
 UserName "Phil";
 TimeStamp "Mon 20-Aug-12, 9:48 pm";
 OSName "Windows NT 6.01.7601";
 ApplicationName "Mirai";
 ApplicationVersion "1.1.0.1 5629";
 include "gbf-2-1-0-0.tpl";
 include "cube_mirai.gmf";

 body Polyhedron-31 (

   vertices[] < (
coord -0.500000 -0.500000 0.500000 ;
 )
 (
coord -0.500000 0.500000 0.500000 ;
 )
 (
coord 0.500000 0.500000 0.500000 ;
 )
 (
coord 0.500000 -0.500000 0.500000 ;
 )
 (
coord 0.500000 -0.500000 -0.500000 ;
 )
 (
coord 0.500000 0.500000 -0.500000 ;
 )
 (
coord -0.500000 0.500000 -0.500000 ;
 )
 (
coord -0.500000 -0.500000 -0.500000 ;
 )
>
   faces[] < (
normal 0.000000 0.000000 1.00000 ;
      vertex-indices[] <0;1;2;3;>
      vertex-normal-indices[] <0;1;2;3;> )
 (
normal 0.000000 0.000000 -1.00000 ;
      vertex-indices[] <4;5;6;7;>
      vertex-normal-indices[] <4;5;6;7;> )
 (
normal 0.000000 1.00000 0.000000 ;
      vertex-indices[] <1;6;5;2;>
      vertex-normal-indices[] <1;6;5;2;> )
 (
normal 0.000000 -1.00000 0.000000 ;
      vertex-indices[] <7;0;3;4;>
      vertex-normal-indices[] <7;0;3;4;> )
 (
normal 1.00000 0.000000 0.000000 ;
      vertex-indices[] <3;2;5;4;>
      vertex-normal-indices[] <3;2;5;4;> )
 (
normal -1.00000 0.000000 0.000000 ;
      vertex-indices[] <7;6;1;0;>
      vertex-normal-indices[] <7;6;1;0;> )
>
   normals[] <-0.577350 -0.577350 0.577350 ;
-0.577350 0.577350 0.577350 ;
0.577350 0.577350 0.577350 ;
0.577350 -0.577350 0.577350 ;
0.577350 -0.577350 -0.577350 ;
0.577350 0.577350 -0.577350 ;
-0.577350 0.577350 -0.577350 ;
-0.577350 -0.577350 -0.577350 ;
>
 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:07:39.950

为了解析这么大的结构，我会避免手工制作复杂的正则表达式；它们将变得过于昂贵而无法维护/调试。

相反，我会看一下[PyParsing](http://pyparsing.wikispaces.com/home)，它有很多[示例](http://pyparsing.wikispaces.com/Examples)或[PLY](http://www.dabeaz.com/ply/)。

其中任何一个都将允许您以更结构化的方式解析文件，这应该更易于维护。它们还将更容易扩展到简单的立方体示例之外，以涵盖 mirai 文件格式的全部范围。

# php - php in_array - needle 是数组，检查 needle 中的所有元素是否存在于 haystack 中

> ID：14391496
> 
> 赞同：1
> 
> 时间：2013-01-18T02:23:29.710
> 
> 标签：php, arrays, compare

我开始没有解决这个问题的想法，或者可能比我预期的更简单。希望有人可以提供帮助：

我尝试验证是否

数组 A

```
arrA = Array
(
    [0] => hindu
    [1] => inglês
) 
```

存在于数组 B

```
arrb = Array
(
    [0] => active
    [1] => awsome
    [2] => speaker
    [3] => creative
    [4] => team leader
    [5] => project manager
    [6] => chinese
    [7] => hindu
    [8] => spanish
    [9] => english
) 

If(in_array($arrA , $arrB)){
echo true;
} 
```

意思是如果数组 A 的 2 个元素存在于数组 B 中，则返回 TRUE。（这两个元素不仅仅是一个）。并且数组 A 的大小并不总是相同的（可以有 1 到多个元素）。

我尝试了 in_array 和各种递归函数，但没有运气......

任何人？

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T02:26:38.457

您可以使用 array_diff() -

```
$all_elements_exist = count(array_diff($a, $b)) == 0 ? true : false; 
```

# sql - 3 个相关表，其中一个关系表用于 2 个输入和 1 个输出

> ID：14391497
> 
> 赞同：1
> 
> 时间：2013-01-18T02:23:48.070
> 
> 标签：sql, relation

我有 3 张桌子

*   **包含 2 列的事件**： id ，事件名称
*   **具有 2 列的关系**：event_id、cat_id
*   **CATEGORY**有 2 列：id、cat_name

这是我的数据：

```
[EVENT]
id           event-name
--------------------
1            dance
2            walk
3            run

[RELATION]
event_id     cat_id
--------------------
1            1
1            2
2            1
3            3

[CATEGORY]
id           cat_name
---------------------
1            slow
2            fast
3            very fast 
```

我希望 EVENT 名称（在这种情况下为“ *dance* ” ）内容 CATEGORY*慢而**快*

我尝试了什么：

```
Select * from EVENT e
left join RELATION r on e.id = r.event_id
left join CATEGORY c on r.cat_id = c.id
where c.cat_name = "slow" and c.cat_nam = "fast" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:37:47.293

您想要两者兼有的事件。尝试这个：

```
select e.event_name
from event e join
     relation r
     on e.id = r.event_id join
     category c
     on c.id = r.cat_id
group by e.event_name
having max(case when cat_name = 'slow' then 1 else 0 end) = 1 and
       max(case when cat_name = 'fast' then 1 else 0 end) = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T04:33:40.490

另一种方法：

```
SELECT event_name
FROM event e
JOIN relation r      ON e.id = r.event_id
LEFT JOIN category c ON r.cat_id = c.id
WHERE cat_name='slow'
  AND EXISTS
  (SELECT 1
 FROM relation r
 JOIN category c ON r.cat_id=c.id
WHERE r.event_id = e.id
      AND c.cat_name='fast'); 
```

# c# - 必须满足哪些标准才能使类型符合 CLS

> ID：14391499
> 
> 赞同：1
> 
> 时间：2013-01-18T02:24:33.687
> 
> 标签：c#, .net

如何使程序集/类符合 CLS？他们应该有什么标准？如果我只是用**[assembly: CLSCompliant(true)]**注释我的程序集并且我的类型之一不符合 CLS，它会影响程序集的行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T03:32:48.920

让编译器告诉你。声明符合 CLS 属性的程序集，将其放在源代码文件中的任何位置：

```
 [assembly:CLSCompliant(true)] 
```

并重建你的代码。当您收到警告 CS3001 时，它会准确告诉您声明有什么问题。例如：

```
public class NotCompliant {
    public void Foo(uint x) { }
} 
```

生成：

> 警告 CS3001：参数类型“uint”不符合 CLS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T03:13:00.123

对于.net 4 ，上面的链接最好是[http://msdn.microsoft.com/en-us/library/a2c7tshk%28v=vs.100%29.aspx 。](http://msdn.microsoft.com/en-us/library/a2c7tshk%28v=vs.100%29.aspx)

无论如何，代码分析或 FxCop 是您编写 cls 兼容代码以及其他 QA 问题的好朋友。

# python - numpy all 与 builtin all 不同

> ID：14391501
> 
> 赞同：7
> 
> 时间：2013-01-18T02:24:36.340
> 
> 标签：python, numpy

numpy 中这种奇怪的原因是什么`all`？

```
>>> import numpy as np
>>> np.all(xrange(10))
False
>>> np.all(i for i in xrange(10))
True 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T04:35:25.997

Numpy.all 不理解生成器表达式。

从文档

```
 numpy.all(a, axis=None, out=None)

    Test whether all array elements along a given axis evaluate to True.
    Parameters :    

    a : array_like

        Input array or object that can be converted to an array. 
```

好的，不是很明确，所以让我们看一下代码

```
def all(a,axis=None, out=None):
    try:
        all = a.all
    except AttributeError:
        return _wrapit(a, 'all', axis, out)
    return all(axis, out)

def _wrapit(obj, method, *args, **kwds):
    try:
        wrap = obj.__array_wrap__
    except AttributeError:
        wrap = None
    result = getattr(asarray(obj),method)(*args, **kwds)
    if wrap:
        if not isinstance(result, mu.ndarray):
            result = asarray(result)
        result = wrap(result)
    return result 
```

由于生成器表达式没有方法`all`，它最终调用`_wrapit` In `_wrapit`，它首先检查最终调用生成器表达式的方法`__array_wrap__``generates AttributeError``asarray`

从文档`numpy.asarray`

```
 numpy.asarray(a, dtype=None, order=None)

    Convert the input to an array.
    Parameters :    

    a : array_like

        Input data, in any form that can be converted to an array. This includes lists, lists of tuples, tuples, tuples of tuples, tuples of lists and ndarrays. 
```

有据可查的关于接受的各种类型的输入数据，这绝对不是生成器表达式

最后，尝试

```
>>> np.asarray(0 for i in range(10))
array(<generator object <genexpr> at 0x42740828>, dtype=object) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:32:56.677

奇怪的。当我尝试得到：

```
>>> np.all(i for i in xrange(10))
<generator object <genexpr> at 0x7f6e04c64500> 
```

唔。

我不认为[numpy 理解生成器表达式](https://stackoverflow.com/a/8217068/17875)。尝试使用列表推导，你会得到：

```
>>> np.all([i for i in xrange(10)])
False 
```

# python - 使用数组存储窗口的像素

> ID：14391504
> 
> 赞同：3
> 
> 时间：2013-01-18T02:24:39.747
> 
> 标签：python, arrays, numpy, pixel

对于游戏窗口中的每个像素，是否有可能（在性能方面）拥有一个每个像素包含一个 8 位整数的单个多维数组？我需要根据这个数组及时更新游戏窗口。

我的目标是：

```
import numpy
window_array = numpy.zeros((600, 600), dtype=numpy.int8)

#draw the screen
for (y, x), value in numpy.ndenumerate(window_array):
    if value == 1:
        rgb = (0, 0, 0)
    elif value == 2:
        rgb = (50, 50, 50)
    blit_pixel(x, y, rgb) 
```

我希望以 30-60 FPS 的速度运行，但到目前为止，我的测试产生的结果太慢了，即使在糟糕的帧速率下也无法运行。有可能吗，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T03:51:08.410

我从未使用过 pygame，所以请对我的 anwser 持保留态度...

也就是说，如果您使用 python 循环迭代超过 360,000 个像素并在每个像素处执行 python 函数调用，那么您似乎不太可能获得任何体面的帧速率。

我从[另一个问题](https://stackoverflow.com/questions/14206938/combine-numpy-arrays-by-reference)（阅读评论线程）中了解到，该[`pygame.surfarray`](http://www.pygame.org/docs/ref/surfarray.html)模块将为您提供对保存实际屏幕数据的数组的引用。`pygame.surfarray.pixels3d`应该返回对形状数组的引用，`(rows, cols, 3)`其中最后一个维度保存屏幕上的 RGB 值。通过该参考，您可以直接更改屏幕上的像素，而无需 python 循环执行以下操作：

```
import numpy
surf_array = pygame.surfarray.pixels3d(surface)
window_array = numpy.zeros(surf_array.shape[:2], dtype=numpy.int8)
...
surf_array[numpy.nonzero(window_array == 1)] = np.array([0, 0, 0])
surf_array[numpy.nonzero(window_array == 2)] = np.array([50, 50, 50]) 
```

不确定是否需要调用 to`pygame.display.update`来实际显示您的更改，但这种方法将维持比您想象的高得多的帧速率。

# java - Java字符串值作为语句的一部分？

> ID：14391505
> 
> 赞同：2
> 
> 时间：2013-01-18T02:24:41.627
> 
> 标签：java, string

我有一个声明为保存信息的类。假设它有这些字段

```
class data {
   int a;
   int b;
   int c;
} 
```

我想像这样访问这些字段：

```
String [] fields = {"a", "b", "c"};
data da = new data();
for (int i = 0; i < 3; i++) 
   if (da.fields[i] < 10)
      dosomething(); 
```

Java中有什么方法可以做到这一点吗？谷歌搜索，我得到了一些关于“反射”的结果，但我从未真正听说过，而且我认为这不是我想要的。有没有办法在Java中做到这一点？如果没有，是否有任何语言支持这种事情（只是出于好奇）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T02:29:43.250

反射可能是您需要的。但您需要更多的是**认真审视您的设计**。您应该**尽可能避免反思**。

如果您仍然对此感兴趣，请查看[Java 反射：字段](http://tutorials.jenkov.com/java-reflection/fields.html)。

```
Field field = aClass.getField("someField"); 
```

是您要使用该名称获取该字段的方法。您想要的更详细的示例。

```
Class  aClass = MyObject.class
Field field = aClass.getField("someField");

MyObject objectInstance = new MyObject();

Object value = field.get(objectInstance);

field.set(objetInstance, value); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T02:41:59.817

您可以为您的课程添加合适的 API：

```
class data {
   int a;
   int b;
   int c;

   int get(String field) {
       if (field.equals("a")) return a;
       if (field.equals("b")) return b;
       if (field.equals("c")) return c;
       throw new IllegalArgumentException();
   }
} 
```

然后你可以：

```
String [] fields = {"a", "b", "c"};
data da = new data();
for (int i = 0; i < 3; i++) 
   if (da.get(fields[i]) < 10)
      dosomething(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T02:37:09.453

反思是要走的路。Karthik T 有正确的答案。不使用反射：

将字段声明为数组（或 Map），并将名称声明为查找：

```
class data {
    int[] fields = new int[3];
    public static final int A = 0;
    public static final int B = 1;
    public static final int C = 2;
 }

 public void foo() {
     data da = new data();
    int[] fields = {data.A, data.B, data.C};
    for (int n : fields) {
       if (da.fields[n] < 10) doSomething();
    }
 } 
```

它很丑，如果你想做这样的事情，你的设计可能是错误的，但它确实有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T04:08:10.623

你并没有真正说出你真正的问题是什么；所以很难说是否需要使用反射或其他东西。然而，当有人谈到将一​​个字符串值与另一个变量相关联时，他们经常需要使用的是 Map（或其他语言的字典）；类似的东西：

```
 TreeMap<String, Integer> tm = new TreeMap<String, Integer>();       
    tm.put("a", 1);
    tm.put("b", 2);
    tm.put("c", 3);

    for (String k: tm.keySet()) {
        System.out.println(k + ": " + tm.get(k));
    } 
```

# javascript - 通过窗口传递对象时，instanceof 运算符失败

> ID：14391506
> 
> 赞同：6
> 
> 时间：2013-01-18T02:24:46.217
> 
> 标签：javascript, tabs, window, instanceof, typeof

为了在窗口之间传递数据，我通过该`window.open`方法打开新窗口并将新打开的窗口的属性设置为对象。这使我不仅可以传递数据，还可以共享变量的实例，这意味着如果我在一个窗口上修改对象或其任何派生属性，它会在所有窗口上修改它。

然而，问题是 instanceof 操作符的某些事情变得非常有趣。

当我做

```
typeof m
m instanceof Object 
```

第一行返回`"object"`，第二行返回`false`。

我特别需要 instanceof 运算符来检查数组和对象之间的关系。

这是一个示例（警告：尝试在页面加载时打开一个窗口，因此弹出窗口阻止程序可能会阻止它）。[http://jsfiddle.net/Chakra/mxf2P/1/](http://jsfiddle.net/Chakra/mxf2P/1/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T02:28:08.160

由于您的窗口`Object`和源窗口`Object`不是一回事，因此其中一个的实例不会是另一个的实例。您可以使用`Object.prototype.toString`来区分对象和数组：

```
if(Object.prototype.toString.call(m) === '[object Array]') {
    // It's an array
} else {
    // It's not
} 
```

如果可用，您也可以使用`Array.isArray`。

[这是一个演示。](http://jsfiddle.net/minitech/mxf2P/2/)（顺便说一下，它使用一个`<iframe>`而不是弹出窗口。）

# c# - WPF、后台工作者和垃圾收集

> ID：14391516
> 
> 赞同：0
> 
> 时间：2013-01-18T02:25:55.420
> 
> 标签：c#, wpf, garbage-collection, backgroundworker

考虑以下示例

```
 public class ChildViewModel
  {
    public BackgroundWorker BackgroundWorker;

    public ChildViewModel()
    {
        InitializeBackgroundWorker();
        BackgroundWorker.RunWorkerAsync();
    }

    private void InitializeBackgroundWorker()
    {
        BackgroundWorker = new BackgroundWorker();
        BackgroundWorker.DoWork += backgroundWorker_DoWork;
        BackgroundWorker.RunWorkerCompleted +=backgroundWorker_RunWorkerCompleted;
    }

    private void backgroundWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        //do something
    }

    void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        //do time consuming task
        Thread.Sleep(5000);
    }

    public void UnregisterEventHandlers()
    {
        BackgroundWorker.DoWork -= backgroundWorker_DoWork;
        BackgroundWorker.RunWorkerCompleted -= backgroundWorker_RunWorkerCompleted;
    }

}

public class ParentViewModel
{
    ChildViewModel childViewModel;

    public ParentViewModel()
    {
        childViewModel = new ChildViewModel();
        Thread.Sleep(10000);
        childViewModel = null;
        //would the childViewModel now be eligible for garbage collection at this point or would I need to unregister the background worker event handlers by calling UnregisterEventHandlers?  
    }
} 
```

问题：我是否需要取消注册 childViewModel 对象的后台工作人员事件处理程序才能有资格进行垃圾收集。（这只是一个例子。我知道我可以在这种情况下使用 TPL，而不需要后台工作人员，但我对这个特定场景很好奇。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T02:30:26.950

这在一定程度上取决于您的后台工作人员为何是公开的。但是，如果您的 ViewModel 类是唯一持有对后台工作人员的强引用的类，并且后台工作人员持有对视图模型的硬引用（通过两个事件），那么一旦视图模型不是，两者都将被标记为垃圾回收不再有任何参考。

类似的[问题](https://stackoverflow.com/questions/400706/circular-references-cause-memory-leak)有更多细节。

# jquery - iFrame jQuery 在父级中调用 jQuery 函数

> ID：14391517
> 
> 赞同：0
> 
> 时间：2013-01-18T02:26:34.107
> 
> 标签：jquery, function, iframe

*   如何在 iFrame 中获取 jQuery 以在父级中调用 jQuery 函数？

**这是 iFrame 的代码**

```
<script>
    $(document).ready(function (){

        $("#Hey").click(function ()
        {

            parent.WorkPlease(); // does not work
                   window.parent.WorkPlease(); // also does not work
                   // Both hosted on same domain

        });
    });
</script> 
```

**这是托管 iFrame 的父页面上的 jQuery**

```
<script type="text/javascript">
$(document).ready(function(){

    function WorkPlease()
    {
$('html,body').animate({scrollTop: $("#iFrame").offset().top}, 5000);// 
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T02:28:44.803

您可以从 访问父级的 DOM `iframe`，但在同一个域中。这似乎是你的情况。

您的代码的问题在于该`workPlease`函数被定义为您传递给`document` `ready`事件处理程序的匿名函数的局部变量，而不是在`window`父页面本身的对象中。

尝试：

```
$(document).ready(function(){

    window.workPlease = function()
    {
        $('html,body').animate({scrollTop: $("#iFrame").offset().top}, 5000);// 
    }
}); 
```

# dojo - dojo 1.8：对查询后的结果应用条件

> ID：14391519
> 
> 赞同：0
> 
> 时间：2013-01-18T02:26:45.153
> 
> 标签：dojo

我不知道如何在查询后将条件应用于结果。之前有人问过这段代码，但我想增强它

```
require(["dojo/parser", "dojo/ready", "dojo/query", "dojo/on", "dijit/form/Select", "dojo/domReady!"], function (parser, ready, query, on, Select) {
ready(function () {
    parser.parse();

    var select_Card = new Select({
        name: 'select_PCBA',
        options: [{
            label: "<span id='NotinUse'><b>&nbsp&nbsp&nbsp. . .</b></span>",
            value: "",
            selected: true
        }, {
            label: "<span id='NotinUse'><b>&nbsp&nbspMk7ABC Card</b></span>",
            value: "testdata1970_05"
        }, {
            label: "<span id='inUse'><b>&nbsp&nbspMk7CBC Card</b></span>",
            value: "testdata1970_10"
        }, {
            label: "<span id='NotinUse'><b>&nbsp&nbspMk10DC Card</b></span>",
            value: "testdata2060_03"
        }, {
            label: "<span id='NotinUse'><b>&nbsp&nbspMk6BC Card</b></span>",
            value: "dbProdigy"
        }, {
            label: "<span id='NotinUse'><b>&nbsp&nbspMk6NBC Card</b></span>",
            value: "dbProdigy_MK6N"
        }, ],
        style: {
            width: '150px'
        }
    }, "select_Card");

    select_Card.startup();

    on(select_Card, 'change', function(newValue)
    {
        if query('#inUse')
        {
            alert('Item selected is '+ newValue);
        }
        else
        {
            alert('Please select the only highlighted card');                           
        }
    });
    });
}); 
```

或者为了您的方便，请参阅[我的 jsfiddle](http://jsfiddle.net/clementyap/q5LC7/7/)。

还是你有更好的办法？

请指教 谢谢

克莱门特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T05:36:31.683

首先你的代码甚至没有运行，你的 on() 函数很乱，只是将它粘贴到 de 编辑器中显示错误。其次，使用多个完全相同的 id 是一个非常非常糟糕的主意，请改用类。

```
on(select_Card, 'change', function(newValue)
{
  var display = this.get('displayedValue');
  if(display.indexOf("class='inUse'") !== -1 || newValue === 'testdata1970_10'){
    alert('correct stuff')
  }else{
    alert('error');
  }
}); 
```

[http://jsfiddle.net/73F2t/](http://jsfiddle.net/73F2t/)

这是一个更正的小提琴， or 子句意味着您可以使用任一条件进行过滤，它应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T05:48:44.443

我已经更新了你的 jsFiddle：http: [//jsfiddle.net/fredfortier/q5LC7/11/](http://jsfiddle.net/fredfortier/q5LC7/11/)。有几件事是错的。我清理了“准备好的”东西以使其运行。

我相信您可能想要清理的代码结构存在一些问题。但我不想过多地更改您的代码，所以我只是让它工作。一件主要的事情是您多次使用相同的ID。我把它改成了类。此外，查询函数的范围不限于闭包，它将通过 dom 进行搜索。所以你在事件处理程序中的条件永远不会奏效。

同样，我不认为这段代码如果非常优美并且可以以不同的方式处理，但是在这里它可以在没有对您所拥有的内容进行重大更改的情况下工作：

```
require(["dojo/parser", "dojo/ready", "dojo/query", "dojo/on", "dijit/form/Select", "dojo/_base/array", "dojo/domReady!"], function (parser, ready, query, on, Select, array) {

    console.debug('rendering...');
    var select_Card = new Select({
        name: 'select_PCBA',
        options: [{
            label: "<span class='NotinUse'><b>&nbsp&nbsp&nbsp. . .</b></span>",
            value: "",
            selected: true
        }, {
            label: "<span class='NotinUse'><b>&nbsp&nbspMk7ABC Card</b></span>",
            value: "testdata1970_05"
        }, {
            label: "<span class='inUse'><b>&nbsp&nbspMk7CBC Card</b></span>",
            value: "testdata1970_10"
        }, {
            label: "<span class='NotinUse'><b>&nbsp&nbspMk10DC Card</b></span>",
            value: "testdata2060_03"
        }, {
            label: "<span class='NotinUse'><b>&nbsp&nbspMk6BC Card</b></span>",
            value: "dbProdigy"
        }, {
            label: "<span class='NotinUse'><b>&nbsp&nbspMk6NBC Card</b></span>",
            value: "dbProdigy_MK6N"
        }, ],
        style: {
            width: '150px'
        }
    }, "select_Card");

    select_Card.startup();

    on(select_Card, 'change', function(newValue)
    {
        console.debug('got selected value:', newValue, 'from options:', select_Card.options);
        array.forEach(select_Card.options, function(option) {
            if (option.value == newValue) {
                  console.debug('found selected option in the list: ', option);
                  if (option.label.indexOf("'inUse'") != -1) {
                        alert('Item selected is '+ newValue)
                  } else {
                        alert('Please select the only highlighted card');
                  }
            }
        });
    }); 
```

});

# mysql - 你如何在 MySQL 中转义连字符/破折号？

> ID：14391520
> 
> 赞同：0
> 
> 时间：2013-01-18T02:26:56.490
> 
> 标签：mysql

我试图插入一个日期`2013-3-17`，但它把它当作一个数学运算并插入 1993。我如何逃避连字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:28:05.910

您需要使用`date`数据类型。您还需要将日期用引号括起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:28:08.733

您需要用引号将文字日期括起来，`"2013-03-17"`或者`'2013-03-17'`

# php - WordPress 的 plugins_url() 函数不适用于共享主机

> ID：14391522
> 
> 赞同：8
> 
> 时间：2013-01-18T02:27:23.157
> 
> 标签：php, wordpress

我建立的网站使用高级自定义字段插件，并且在我自己的网络主机上的本地主机上一切正常。不幸的是，当我将网站移至客户购买的主机（GoDaddy 共享主机）时，高级自定义字段插件的 JavaScript 和 CSS 文件无法正确加载。检查来源，问题很明显 - 他们指向以下路径：

[http://www.clientsamazingwebsite.com/wp-content/plugins/home/content/06/10145906/html/wp-content/plugins/advanced-custom-fields/js/input-actions.js?ver=3.5。 7.2](http://www.clientsamazingwebsite.com/wp-content/plugins/home/content/06/10145906/html/wp-content/plugins/advanced-custom-fields/js/input-actions.js?ver=3.5.7.2)

（如果你仔细看，你会发现这里引用了服务器上文件的实际路径，而不是 URL）

我已将问题追溯到插件中的以下行：

```
$this->dir = plugins_url('',__FILE__); 
```

它**应该**返回`/wp-content/plugins/advanced-custom-fields`

相反，它正在返回`/wp-content/plugins/home/content/06/10145906/html/wp-content/plugins/advanced-custom-fields`

我已经编辑了插件文件，使其指向正确的路径，但是每次更新插件时这些更改都会恢复，所以这不是一个长期的解决方案。

我见过一些人抱怨`__FILE__`魔法常数不能像预期的那样对符号链接起作用，但我当然没有创建任何符号链接。这是使用 GoDaddy 的限制吗？

## 更新

我注意到`__FILE__`在 GoDaddy 上返回的内容与在我的本地计算机或其他 Web 服务器上不同。它返回完整路径的两台工作机器之一，从文件系统的根目录（即`/srv/www/sitename/public_html/file.php`）开始，而在 GoDaddy 上，它返回的路径从主目录开始（`/home/content/06/10145906/html/file.php`）。

这可能是问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-25T08:32:21.370

根据[Wordpress 法典](http://codex.wordpress.org/Function_Reference/plugins_url)

> ```
> You can either specify the $path argument as a hardcoded path relative to the
> plugins directory, or conveniently pass __FILE__ as the second argument to make
> the $path relative to the parent directory of the current PHP script file. 
> ```

所以使用

```
plugins_url( basename( __DIR__ ) . '/path/to/plugin/asset.js' ); 
```

代替

```
plugins_url( '/path/to/plugin/asset.js', __FILE__ ); 
```

对我来说是可以接受的解决方法。也许没有指定那么敏捷`__FILE__`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T05:07:21.640

你可以试试：

`$this->dir = dirname(__FILE__);`

如果您正在运行较新的 PHP 版本，请使用

`$this->dir = __DIR__;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T18:32:41.400

这很可能与 PHP 现在有关（在旧版本上不是这样）总是返回`__FILE__`忽略任何符号链接等的“物理”地址。上帝知道（和 PHP 开发人员）为什么 PHP 上没有设置来改变这种行为但是当 WP 将该路径与其已注册的 URL 进行比较时，它会更改返回 URL 的“其余”并返回完整路径的正常行为。

这基本上意味着只要 Codex 仍然建议开发人员使用`__FILE__`创建 URL 路径来加载库，WP 和符号链接就不能很好地进行，而还有其他方法不会破坏在磁盘级别完成的任何符号链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T05:06:11.257

我希望由于您的服务器移动而出现这种情况。

检查您的 WordPress 设置页面以确保 WordPress URL 反映移动后的新 URL。

如果这一切都正确，那么某些东西正在覆盖 WordPress 的常量之一，即 WP_PLUGIN_URL 或用于设置它的前驱常量之一。在 wp-config.php 文件中寻找它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-07T15:19:15.497

这应该可以解决您的问题：

```
define('WP_CONTENT_DIR', realpath($_SERVER['DOCUMENT_ROOT'] . '/wp-content')); 
```

# php - 将变量分配给 MVC 视图类？

> ID：14391523
> 
> 赞同：2
> 
> 时间：2013-01-18T02:27:41.603
> 
> 标签：php, templates, variable-assignment

我正在使用 MVC 基本概念构建一个简单的 php MVC

在构建视图类时，我尝试构建一个简单的函数，让我将变量从控制器传递到视图

```
<?php

class View {
    protected $data = array();

    function __construct() {
        //echo 'this is the view';
    }
    public function assign($variable , $value)
    {
        $this->data[$variable] = $value;
    }

    public function render($name, $noInclude = false)
    {
        extract($this->data);
        if ($noInclude == true) {
            require 'views/' . $name . '.php';    
        }
        else {
            require 'views/header.php';
            require 'views/' . $name . '.php';
            require 'views/footer.php';    
        }
    }

} 
```

在我的控制器类中，我曾经这样使用

```
class Index extends Controller {

    function __construct() {
        parent::__construct();
    }

    function index() {
        $this->view->assign('title','welcome here codes');
        $this->view->render('index/index',true);
    } 
```

渲染函数工作正常，但分配函数有问题，因为当我试图从视图中打印出变量时，它什么也没显示

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test Code</title>
</head>
<body>
<? echo $title;?> 
some text here
</body>
</html> 
```

我试图将 View 类中的受保护变量更改为 public，但它没有影响问题，我仍然无法从控制器中打印出任何变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:10:47.210

它什么也不显示，因为您需要 View::render 函数中的视图，因此要访问您的数据，您应该编写

```
<?php echo $this->data['title']; ?> 
```

为避免这种情况，在您的渲染函数中，您应该从数据数组中创建变量。我的意思是

```
foreach($this->data as $key => $value) {
  $$key = $value;
} 
```

注意：由于变量范围，上面的代码不能存在于您的“提取”函数中。

# java - 为什么这段代码不能在 Java 中运行？

> ID：14391524
> 
> 赞同：-1
> 
> 时间：2013-01-18T02:27:43.710
> 
> 标签：java, android, c, pcm

> **可能重复： Java**[中音频格式转换的](https://stackoverflow.com/questions/10515174/conversion-of-audio-format-in-java)
> [无符号短](https://stackoverflow.com/questions/1841461/unsigned-short-in-java)

我有一个将 ulaw 音乐转换为 pcm 格式的代码

代码由 C 编写，但现在，我需要它在 java 中运行

代码是这样的

```
short ALG_ulawDecode(unsigned short input)
{
unsigned short isNegative;

short nOut;

isNegative = ((input & 0x80) == 0);
if (isNegative)
    nOut = 127 - input;
else
    nOut = 255 - input;
if (nOut < 2)
    nOut *= 2;
else if (nOut < 16)
    nOut = ((nOut - 1) << 1) + 1 + 1;
else if (nOut < 32)
    nOut = ((nOut - 16) << 2) + 2 + 31;
else if (nOut < 48)
    nOut = ((nOut - 32) << 3) + 4 + 95;
else if (nOut < 64)
    nOut = ((nOut - 48) << 4) + 8 + 223;
else if (nOut < 80)
    nOut = ((nOut - 64) << 5) + 16 + 479;
else if (nOut < 96)
    nOut = ((nOut - 80) << 6) + 32 + 991;
else if (nOut < 112)
    nOut = ((nOut - 96) << 7) + 64 + 2015;
else
    nOut = ((nOut - 112) << 8) + 128 + 4063;
if (isNegative)
    nOut = -nOut;
nOut <<= 2;
return nOut;
} 
```

它只是无法运行，因为 Java 不支持『unsigned short』

有人有什么建议吗？

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T02:30:39.957

任何人都可以给您的最佳建议是阅读 Java 教程或书籍的介绍。

正如错误所述，`unsigned short`它不是 Java 中的原语。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T02:30:42.650

Java 没有有符号和无符号类型。删除未签名和已使用的签名短裤，其余代码应该仍然有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T02:56:40.263

`char`在语法上等同`unsigned short`于 Java。但是，最好不要将它用于任何公共方法，因为它在语义上不是整数类型。

如果你想使用`unsigned short`，我认为`int`合适。您可以只使用它的最低 16 位。

# c# - 视频播放器如何将帧数据写入屏幕？

> ID：14391527
> 
> 赞同：2
> 
> 时间：2013-01-18T02:28:07.323
> 
> 标签：c#, video, video-streaming

我一直在对机器之间的编码/解码和流式视频进行一些研究，我觉得我已经很好地掌握了从文件到流的管道。我可以打开容器，解码和抓取单个帧和音频块，我想在网络上移动这些帧就像简单地发送字节数据一样简单（尽管原始且低效）。我不明白的是它的实际播放方式。简单地将帧写入某个图像框并将音频数据放到声卡缓冲区中并不能很好地工作。谁能向我解释一下 vlc 播放器或 windows 媒体播放器等程序中发生的情况，这些程序允许他们将所有这些帧数据发送到屏幕而不破坏 cpu 和内存？只是一般的想法或一些高级文档会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:43:55.597

如果您使用 OpenGL，您可以创建纹理并不断用新的帧数据替换它。这不是一个非常昂贵的操作。然后，您在窗口上绘制一个带纹理的矩形。 `glOrtho`是这里有用的投影。

在 Windows 中，如果您使用 DirectX 或 Direct3D，同样的事情也适用。您甚至可以获得良好的性能 blitting DIB Sections (GDI): [Fastest method for blitting from a pixel buffer into a device context](https://stackoverflow.com/questions/4721078/fastest-method-for-blitting-from-a-pixel-buffer-into-a-device-context)

无论您如何绘制像素，您都可以设置更新计时器，就这么简单。

为了获得流畅的操作，您需要在绘图之前进行缓冲，以便磁盘（或网络）和解码延迟不会影响实时绘图。即使是视频中最轻微的抖动也能被人类感知到。当您的计时器触发时，您需要在图像缓冲区中解码像素并准备好绘制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T03:11:47.070

我编写了许多播放器应用程序（适用于 Windows），它们结合了视频和音频，并且需要在两者之间进行精确同步。在 Windows 音频中，您基本上准备缓冲区（只是音频样本值的数组）并将它们排队到音频子系统进行播放；当每个缓冲区完成播放时，子系统会对您的应用程序进行回调，并且您的应用程序使用每个回调来 1) 将下一帧渲染到屏幕，以及 2) 准备要排队到音频子系统的下一个音频块。

例如，假设您在内存中有一些视频帧，您希望以每秒 50 帧的速度播放，与单声道、每个样本 2 个字节和每秒 44,100 个样本的音频同步。这意味着您的音频缓冲区需要每个大小为 882 个样本 (44,100 / 50 = 882)，因此每个缓冲区只是一个包含 882 个元素的短（2 字节）整数数组。您至少需要两个缓冲区，但实际上更多更好（缓冲区的权衡是更多的缓冲区意味着更流畅的播放，但代价是启动延迟更长和内存占用更大）。

视频的帧需要以相同的方式“缓冲”，以便始终准备好渲染至少一帧；将单个图像传输到 PC 屏幕是如此之快，以至于它实际上是即时的，而不是您需要担心的事情。唯一关心的是提取或组成帧的任何方法。这些方法至少需要足够快以跟上播放速率，或者它们需要在播放之前充分缓冲，这也会导致更长的启动延迟和更大的内存占用（这些问题对于视频来说比它们用于音频，具有任何合理的分辨率）。

当应用程序开始播放时，它会预先加载所有带有音频的缓冲区并将它们排队等待播放；然后，它同时开始播放并将第一帧渲染到屏幕上。用户看到第一帧并听到前 20 毫秒的音频（20 毫秒 = 1/50 秒）。此时，音频子系统将播放从第一个缓冲区切换到第二个缓冲区，并对应用程序进行回调。然后应用程序将第二帧渲染到屏幕上，并用下一个可用的音频块填充第一个缓冲区，然后将这个第一个缓冲区再次排队到音频子系统。

只要应用程序有可用的音频和视频数据来不断填充缓冲区和帧，这个过程就会继续，你会看到/听到视频。

# javascript - 区分文件下载与页面更改的 onbeforeunload

> ID：14391531
> 
> 赞同：28
> 
> 时间：2013-01-18T02:28:32.090
> 
> 标签：javascript, dom-events, onbeforeunload

我有一个`onbeforeunload`应该在用户进入新页面时触发的事件。它工作得很好，但我发现每当用户从他们所在的页面下载文件时，它也会在 Chrome 中触发。

我希望能够判断事件是否被触发，因为它是由文件下载触发的。最好的方法是什么？

编辑：作为澄清，我不拥有我正在收听的网站`onbeforeunload`。该事件由安装在 3rd 方网站上的 Javascript 片段收听。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-11-13T22:22:00.197

如果您将 download="[FILENAME]" 添加到 a 标签，它似乎会阻止 onbeforeunload 触发：

```
<a download="myfile.jpg" href="mysite.com">click me</a> 
```

这是一个更简单的解决方案。您可以省略文件名，只需说“下载”即可使用默认文件名。让我指出这具有强制重新下载而不是使用缓存的副作用。我认为这是在 2012 年添加到 chrome 和 ff 中的。不确定 safari 或 ie 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-08T09:33:42.610

## 一个javascript解决方法

这是我能想到的唯一“干净”的工作，它似乎工作得很好。

* * *

您的问题中的更多代码显示您实际使用“onbeforeunload”的方式会很棒。

但我会假设您正在为光标“正在加载...”动画使用类似下面的代码。

```
/* Loading Progress Cursor
 * 
 * Tested on:    IE8, IE11, Chrome 37, & Firefox 31
 * 
 * [1] the wildcard selector is not performant but unavoidable in this case
 */ 
.cursor-loading-progress,
.cursor-loading-progress * { /* [1] */
  cursor: progress !important;
} 
```

* * *

## 解决方案

**第一步：**

```
/* hooking the relevant form button
 * on submit we simply add a 'data-showprogresscursor' with value 'no' to the html tag
 */
$(".js-btn-download").on('submit', function(event) {
    $('html').data('showprogresscursor', 'no' );
}); 
```

**第二步：**

```
/* [1] when page is about to be unloaded
 * [4] here we have a mechanism that allows to disable this "cursor loading..." animation on demand, this is to cover corner cases (ie. data download triggers 'beforeunload')
 * [4a] default to 'yes' if attribute not present, not using true because of jQuery's .data() auto casting
 * [4b] reset to default value ('yes'), so default behavior restarted from then on
 */
var pageUnloadOrAjaxRequestInProgress = function() {
    /* [4] */
    var showprogresscursor = $('html').data('showprogresscursor') || 'yes';  /* [4a] */
    if( showprogresscursor === 'yes' ){
        $('html').addClass('cursor-loading-progress');
    }
    else {
        $('html').data('showprogresscursor', 'yes' );  /* [4b] */
    }
}

$( window ).on('beforeunload', function() {    /* [1] */
    pageUnloadOrAjaxRequestInProgress();
}); 
```

请注意，我`$('html').addClass('cursor-loading-progress');`在示例中使用的是预期的 CSS，但此时您可以做任何您喜欢的事情。

* * *

另外几个解决方法可能是：

*   在新选项卡中打开文件下载页面
*   文件下载完成后触发页面刷新

# ruby-on-rails - 在内存中生成一个 ruby 类

> ID：14391536
> 
> 赞同：1
> 
> 时间：2013-01-18T02:29:20.223
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongoid, metaprogramming

我需要将 ActiveRecord 模型类自动转换为 MongoDB Document 类。我可以使用 rails 生成器来执行此操作，该生成器将读取模型的属性并生成新的 document.rb。

如果 ActiveRecord 模型类如下所示：

```
class Project < ActiveRecord::Base
  attr_accessible :completed, :end_date, :name, :start_date
end 
```

然后，一个生成的类确认 Mongoid 的结构将如下所示：

```
class ProjectDocument
  field :name, type: String
  field :start_date, type: Date
  field :end_date, type: Date
  field :completed, type: Boolean
  field :created_at, type: Time
  field :updated_at, type: Time
end 
```

但我不想存储不同的文档文件，每个模型一个。每当启动 rails 应用程序时，我都希望能够即时生成此文档类。

这可能吗？是否建议使用这种从内存中生成和使用类的方法？我对 AR 模型结构的更改没有限制；该文档是灵活的 wrt 数据结构，更改的列将自动添加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T04:35:42.797

我的第一次尝试看起来像这样：

```
klass = Project
new_class = Object.const_set(klass.name + "Document", Class.new)
klass.columns.each do |c|
  new_class.class_eval do
    field c.name.to_sym, type: c.type
  end
end 
```

您几乎可以肯定必须做一些更复杂的事情来正确设置字段类型，但这应该会给您一个很好的起点。

# ios - 错误：“‘UIAlertView’没有可见的@interface声明选择器‘initWithTitle’

> ID：14391541
> 
> 赞同：1
> 
> 时间：2013-01-18T02:29:50.097
> 
> 标签：ios, objective-c, cocoa-touch

我正在阅读 O'Reilly 的《Learning Cocoa with Objective-C 3rd edition》一书。

O'Reilly 网站没有此特定书籍的论坛，搜索此错误不会返回任何内容。

在第 18 页，我不断收到以下错误：

```
"No visible @interface for 'UIAlertView' declares the selector 'initWithTitle:message:deluge:cancelButtonTitle:otherButton'" 
```

这是我的代码：

```
//
//  ViewController.m
//  HelloCocoa
//
//  Created by ME on 1/14/13.
//  Copyright (c) 2013 ME. All rights reserved.
//

#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)showAlert:(id)sender
{
    UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Hello!"
                                                    message:@"Hello, World!"
                                                   delegate:nil
                                          cancelButtonTitle:@"Close"
                                           otherButtonTitle:nil];
    [alert show];
    [_helloButton setTitle:@"I was Clicked!" forState:UIControlStateNormal];
}
@end

//
//  ViewController.h
//  HelloCocoa
//
//  Created by ME on 1/14/13.
//  Copyright (c) 2013 Andrew DiNatale. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
@property (strong, nonatomic) IBOutlet UIView *helloButton;
- (IBAction)showAlert:(id)sender;
@end 
```

是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T02:49:33.270

`otherButtonTitles`参数是复数（如）`otherButtonTitle*s*`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:33:23.153

UIAlertView 是一个 UIKit (iOS) 类。看起来您正试图在 Cocoa 项目中使用它，而不是 Cocoa Touch。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T06:53:11.137

我是这本书的作者之一。

这个问题已经得到了正确的回答，但我只是想插话 - CodaFi 的答案是正确的，问题是该方法以“otherButtonTitles”（带有 s）而不是“otherButtonTitle”结尾。

我只是仔细检查了这本书的第 18 页，实际上看起来这本书是正确的！

如果您对这本书有任何其他问题，请在此处发布 - 我会四处游荡，寻找任何提及这本书的问题。勘误总是受欢迎的！

# ruby-on-rails - after_create 有多种方法？

> ID：14391542
> 
> 赞同：34
> 
> 时间：2013-01-18T02:29:58.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我试图在创建后调用两种方法，但是将它们放入数组中不起作用......我在 Rails 文档或谷歌中找不到任何东西......有经验的人吗？

```
after_create [:do_this, :do_that] 
```

不工作

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-01-18T02:43:12.540

无需包围数组中的方法。只需使用：

`after_create :do_this, :and_then_this`

**奖励信息**：如果`before_*`回调返回 false，则取消所有后续回调和相关操作。如果`after_*`回调返回 false，则取消所有后续回调。回调通常按照定义的顺序运行，但定义为模型上的方法的回调除外，这些方法最后调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-06-15T15:47:33.117

您还可以调用单个方法并在该方法上编排顺序。

```
after_create :process

def process
  do_this
  do_that
  then_this
end 
```

我个人更喜欢这种方法。没有隐藏的魔法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T02:39:42.883

为什么要将两个回调方法放入一个数组中？

after_create :do_this, :do_that

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-23T08:56:26.893

注意，`after_action`好像是倒置的。

```
 after_action :do_that_after, :do_that_before 
```

当前执行的订单是`do_that_before`then`do_that_after`

**编辑：使用 Rails 6.0.3.3**

# gwt - GWT ClientBundle 找不到图像

> ID：14391553
> 
> 赞同：1
> 
> 时间：2013-01-18T02:30:45.230
> 
> 标签：gwt

我创建了一个 ClientBundle，如下所示。

```
public interface DataResources extends ClientBundle {
    DataResources IMPL = (DataResources) GWT.create(DataResources.class);
            @Source("marker.png")
            ImageResource markerimage();

            @Source("settings.png")
            ImageResource settingsimage();

            @Source("back.png")
            ImageResource backimage();
} 
```

我收到一个错误，它找不到资源。我的“战争”目录的顶层中有所有图像。

```
00:00:04.302  [ERROR] Resource marker.png not found. Is the name specified as Class.getResource() would expect? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T04:05:07.997

数据资源是相对于您的类所在的包（文件夹）引用的。您可以尝试移动同一包中的图像以检查是否有效。

我通常会将我的资源接口放在一个包中——比如`com.project.resources`. 然后图像将在 中`com.project.resources.images`，并且 Source 注释将采用这种形式 `@Source("/images/marker.png")`。

通过遵循这个包结构，您还可以将资源/图像捆绑在 JAR 中，并可以在其他项目中包含和引用它们。

# c# - 基于 SQL 变量的 Gridview 行唯一颜色

> ID：14391555
> 
> 赞同：0
> 
> 时间：2013-01-18T02:31:52.933
> 
> 标签：c#, asp.net, gridview, colors, row

很抱歉标题满嘴，但我想做的是非常基本的。在带有消息的收件箱中，每条消息的数据库都有`hasBeenRead`一点。单击并“读取”此消息后，该位设置为真，否则为假。

我想知道如何基本上将已读取的那些背景颜色设置为默认值以外的其他颜色？我有一些想法，比如遍历每一行并检查那一点......但是假设你有一个足够大的网格视图和足够的行，哇，这听起来效率很低。我还想我可以将行应该在数据库中的颜色存储在数据库中……但是我不确定这将如何转化为实际更改行的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:40:24.077

当我写下我的第一个答案时，我脑海中出现了 listView。

但是您仍然可以使用 rowDataBound 事件并在后面的代码中设置行的颜色。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" 
         DataKeyNames="xyz" onrowdatabound="GridView1_RowDataBound">
...
</asp:GridView>

protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{               
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
         e.Row.BackColor = Color.FromName("#E56E94");     
    }
} 
```

# java - 用 Java 制作一个老式的（Windows 95 式的）GUI

> ID：14391560
> 
> 赞同：3
> 
> 时间：2013-01-18T02:32:51.967
> 
> 标签：java, look-and-feel, appearance

我目前正在做一个项目，我希望它看起来像是来自 Windows 95 时代。我花了很多时间寻找与 Windows 95 美学相匹配的可插拔外观，但我能找到的所有东西都显得过于圆润、流线型和现代感。谁能推荐一种我可以使用的复古、笨重的外观和感觉？如果没有，还有其他方法可以让我在 Java 中获得这种美学吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:35:42.043

查看. [_](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html) _`UIManager.setLookAndFeel()`

我在想`UIManager.setLookAndFeel(javax.swing.plaf.metal)`或者`UIManager.setLookAndFeel(javax.swing.plaf.windows.WindowsClassic)`应该给你你想要的样子。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T02:37:13.253

检查 JGoodies 网站[http://www.jgoodies.com/freeware/libraries/looks/](http://www.jgoodies.com/freeware/libraries/looks/) 它说“精确的 Windows 仿真

我们的 Windows 外观专注于在以下领域对 Windows 95、98、NT、ME、2000、XP、Vista、7 和现在的 Windows 8 进行精确模拟：菜单、图标、颜色、边框、字体、字体大小、插图、和小部件尺寸。它支持屏幕分辨率（96dpi 与 120 dpi）来调整大小、插图和小部件尺寸。”

# android - 将导航结构与 Android 中的代码分开

> ID：14391566
> 
> 赞同：1
> 
> 时间：2013-01-18T02:33:51.093
> 
> 标签：android, design-patterns, data-structures

我想问一个关于在 Android 中存储导航结构远离 java 代码的正确方法的问题。我想将应用程序结构存储在资源中的 xml 文件中。该程序仅适用于生成的列表。

以前我将自己的 XML 解析到列表中。每个项目的 id 使用调用方法运行适当的代码。但是，它不是太快且对程序员友好。

所以我决定使用一种`enum`类型。这并不能消除在 XML 中输入错误值的可能性，但它消除了在代码本身中出现拼写错误的可能性。每个元素调用一个方法（带有 switch-case），检查按下的是什么类型的项目，如果它是枚举，`APP_ITEM`则根据 id 运行适当的程序（XML 中的另一个魔术字符串）。

示例应用程序结构：

```
"Main screen"
- Item that runs dialer
- Second item that carries to subscreen
    - Item one
    - Item two

"Second screen"
- Item that runs browser
- Awesome meter 
```

以 XML 呈现：

```
<app_navigation>
    <screen name="Main screen">
        <item enum="APP_ITEM" id="dialer" name="Item that runs dialer"></item>
        <item name="Second item that carries to subscreen">
            <screen name="Some subscreen">
                <item enum="SOME_ITEM" name="Item one"></item>
                <item enum="SOME_ITEM" name="Item two"></item>
            </screen>
        </item>
    </screen>

    <screen name="Second screen">
        <item enum="APP_ITEM" id="browser" name="Item that runs browser"></item>
        <item enum="SOME_ITEM" name="Awesome meter"></item>
    </screen>
</app_navigation> 
```

有没有更好的方法将导航结构与代码分开？我想支持 API 8 的应用程序。

# json - Jackson Parse 特定数组

> ID：14391568
> 
> 赞同：2
> 
> 时间：2013-01-18T02:34:02.903
> 
> 标签：json, parsing, jackson

我正在使用 Jackson 来解析 api 结果，这似乎运行良好。

**爪哇：**

```
public static void jsonIn(String st){
         try {
        JsonFactory jfactory = new JsonFactory();
        /*** read from URL ***/
        JsonParser jParser = jfactory.createJsonParser(new URL(st));
        // loop until token equal to "}"
        while (jParser.nextToken() != JsonToken.END_ARRAY) {
            String fieldname = jParser.getCurrentName();
            if ("id".equals(fieldname)) {
              // current token is "id",
                      // move to next, which is "id"'s value
            try{
              jParser.nextToken();
                }
            catch (Exception e){

            }
              System.out.println(jParser.getText()); // display id
            }
          }
          jParser.close();
         } catch (JsonGenerationException e) {
          e.printStackTrace();
         } 

      } 
```

**问题：**

但是 - 我想要的结果（字段：“id”）在数组“项目”中。上面的代码从第一个数组“查询”开始，只向我发送名为“id”的 1 个元素，我不关心它。然后它会根据 while 语句停止解析，并且不会到达“items”数组。如何更改上面的代码以跳到我感兴趣的数组“项目”，以便获得所需的“id”字段？

**json:**

```
{
 "app": "Sale",
 "avail": {
  "type": "application/json",
},
 "queries": {
  "unAvailURIs": [
   {
    "id": "1sdf6gf3jf80dhb3",
    "results": "57",
    "searchTerms": "lycos.com",
    "startIndex": 11
   }
  ],
  "apiSource": [
   {
    "title": "go****y",
    "totalResults": "579000",
    "auctionPhrase": "lycos.com",
    "count": 10,
    "startIndex": 1,
    "id": "in",
   }
  ]
 },
 "pullAPI": {
  "search": "lycos.com"
 },
 "searchInformation": {
  "searchTime": 0.025345,
  "totalResults": "57600100",
 },
 "items": [
  {
   "id": "GD172993",
   "title": "lycos.com",
   .... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T04:03:44.643

我似乎错过了我一直在寻找的 SO 帖子：[Parsing JSON Bing results with Jackson](https://stackoverflow.com/questions/8610657/parsing-json-bing-results-with-jackson)。感谢[@fge](https://stackoverflow.com/a/8610695/356895)解释`ObjectMapper`和`readTree()`。
我只是将我的顶级`try`声明的开头替换为：

```
try {    
    JsonFactory jfactory = new JsonFactory();
    JsonParser jParser = jfactory.createJsonParser(new URL(st));
    ObjectMapper mapper = new ObjectMapper();
    JsonNode input = mapper.readTree(jParser);
    final JsonNode results = input.get("items");
    // loop until token equal to "}"
    for (final JsonNode element: results) {
        JsonNode fieldname = element.get("id");
        System.out.println(fieldname.toString()); 
```

# php - 使用 AJAX 返回查询信息的下拉列表

> ID：14391572
> 
> 赞同：-1
> 
> 时间：2013-01-18T02:34:31.937
> 
> 标签：php, jquery, ajax, odbc

我将首先说我一直在这里使用这个例子：

[http://roshanbh.com.np/2008/01/populate-triple-drop-down-list-change-options-value-from-database-using-ajax-and-php.html](http://roshanbh.com.np/2008/01/populate-triple-drop-down-list-change-options-value-from-database-using-ajax-and-php.html)

它是为城市/州等制定的，但我只是想让它与我的数据库一起使用，所以我正在提取员工信息，但在某些地方仍然有他的城市/州文本，所以看起来有点奇怪.

同样，目前我只是想让它与 2 个下拉菜单一起工作，而不是全部 3 个。

无论如何，这就是我到目前为止所拥有的，我正在努力让它为我工作。有人能指出我哪里出错了吗？

这是我在**index.php**中的内容，它基本上与我将国家名称换成与数据库中的几个（假）员工 ID 相关联的员工 ID 完全相同。

```
<form method="post" name="form1">
  <table border="0" cellpadding="0" cellspacing="0" width="60%"><tbody>
<tr>
 <td width="150">Country</td>
 <td width="150"><select style="background-color: #ffffa0" name="country" onchange="getState(this.value)">
    <option>Select Country</option><option value="1">mg05</option>
    <option value="2">aa01</option></select>
 </td>
</tr>
<tr>
 <td>State</td>
 <td>
 <p id="statediv">
  <select style="background-color: #ffffa0" name="state">
   <option>Select Country First</option></select>
 </td>
 </tr> 
</tbody></table>
</form> 
```

这是我启动 ajax 请求的**index.php**底部的 javascript 。请注意，在他使用 mysql 数据库的示例中，我使用 ODBC 访问 Access 数据库，因此请记住这一点。

```
<script type="text/javascript"> 
function getState(countryId)
{
   var strURL="findState.php?country="+countryId;
   var req = getXMLHTTP();
   if (req)
   {
     req.onreadystatechange = function()
     {
      if (req.readyState == 4)
      {
     // only if "OK"
     if (req.status == 200)
         {
        document.getElementById('statediv').innerHTML=req.responseText;
     } else {
       alert("There was a problem while using XMLHTTP:\n" + req.statusText);
     }
       }
     }
   req.open("GET", strURL, true);
   req.send(null);
   }
} 
```

下面是我的**findState.php**文件中的内容，我必须调整几件事以考虑到他使用 mysql 数据库和我使用 ODBC 访问 Access 数据库的事实。

```
<? 
$country=$_POST['country'];

    //make connection to database, bail if no connection
    $connection = odbc_pconnect('db','','');
    if (!$connection) { exit("Connection Failed: " . $connection); }

    //retrieve usernames and passwords
    $query = "SELECT (EName) FROM LoginTable WHERE EmployeeID='$country'";

    $result = odbc_exec($connection, $query);

?>
<select name="state">
 <option>Select State</option>
  <? while($row = odbc_fetch_row($result,'EName')){ ?>
  <option value=<?=$row['EName']?>><?=$row['EName']?></option> //Error on this line
  <? } ?>
</select> 
```

它给我的只是有一个错误，未定义变量：第 22 行的行，我已对此进行了评论。它两次显示此错误，这意味着我引用 $row 的两个实例都无效。

任何帮助或见解？我真的很感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:42:37.610

将第 22 行替换为

```
<option value=<?=$row['EID']?>><?=$row['EID']?></option> 
```

或将查询行替换为

```
 $query = "SELECT (EName) FROM LoginTable WHERE EmployeeID='$country'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T05:29:26.980

在选项值周围添加引号..检查下面的代码。

```
 //make connection to database, bail if no connection
    $connection = odbc_pconnect('db','','');
    if (!$connection) { exit("Connection Failed: " . $connection); }

    //retrieve usernames and passwords
    $query = "SELECT (EName) FROM LoginTable WHERE EmployeeID='$country'";

    $result = odbc_exec($connection, $query);

?>
<select name="state">
 <option>Select State</option>
  <? while($row = odbc_fetch_row($result,'EName')){ ?>
  <option value="<?=$row['EName']?>"><?=$row['EName']?></option> // Add quotes around option value..
  <? } ?>
</select> 
```

# asp.net - Sitecore网站需要编译吗？

> ID：14391573
> 
> 赞同：1
> 
> 时间：2013-01-18T02:35:08.967
> 
> 标签：asp.net, visual-studio, sitecore

我已经在 sitecore 工作了一段时间。

自从我到任以来，我一直以现有项目为参考并创建新项目。

对于 Sitecore，我们将为网站提供大量文件夹和文件。我们只需要`*.ascx`与 JavaScript 和 CSS 文件一起创建子布局 ( )。

对于这些`*.ascx`文件，我将它们放在`layouts/Project_Name/The_File_Name.ascx`和下`layouts/Project_Name/The_File_Name.ascx.cs`。

在一个`*.ascx`文件中，我有以下内容。

```
<%@ Control Language="c#" AutoEventWireup="true" TargetSchema="http://schemas.microsoft.com/intellisense/ie5"  Inherits="Layouts.The_File_Name.The_File_NameSublayout" CodeFile="~/layouts/Project_Name/The_File_Name.ascx.cs" %> 
```

完成后，我将整个布局文件夹部署到生产服务器上。

我将在生产服务器上创建一个空白网站并复制必要的文件，主要是 JavaScript、CSS 和`*.ascx`文件。

昨天，一位 Sitecore 顾问建议我从`CodeFile`to更改`CodeBehind`并编译它们。

我知道如果我们在 Visual Studio 中创建 Web 应用程序，系统会提供给我们`CodeBehind`，并且每当我们更改时，我们都需要进行编译。

但是如果我们创建一个网站，我们就不需要编译了。但是，我们可以发布该网站。

我的问题是：顾问是什么意思？我需要编译整个 Sitecore 网站文件夹吗？

如果是这样，我可以编译（构建）整个文件夹吗？

我可以从中得到`*.dll`吗？

到目前为止，我已经尝试编译我的 2 个网站，但我收到了这个错误

> 无法加载程序集或文件 ChilkaDotNet2 或其依赖项之一

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T02:43:34.127

我同意顾问的意见。Visual Studio 中有两种项目类型：

1.  网站项目
2.  网络应用项目

Sitecore 本身作为已编译的 Web 应用程序提供，因此要向其中添加布局、子布局和其他任何内容，您**应该**在 VS 中创建一个 Web 应用程序项目 (WAP)，并且只在项目中包含您的文件。当您这样做时，您只需将项目的`*.dll`'s 部署到目标服务器`/bin/`和任何`*.aspx`or`*.ascx`文件（没有代码隐藏或设计器文件）。

现在，理论上，您可以在 VS 中创建 WAP 并手动更改`CodeBehind`为，`CodeFile`但随后您需要部署`*cs`文件。一般来说，它建议使用 Web 应用程序，以便您可以使用构建服务器或批处理脚本等自动化过程来构建您的项目。

您发布的错误消息是因为您正在尝试构建网站项目。可以构建标准的非 Sitecore 网站项目，但如果其 Sitecore 本身已经作为已编译的 WAP 存在并且您不能从项目中排除文件，则不能构建。

以下是 Sitecore 的 CTO 的一篇博文，可能会对您有所帮助：[为 Sitecore 解决方案创建 Visual Studio 2010 项目](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/09/Create-a-Visual-Studio-2010-Project-for-a-Sitecore-Solution.aspx)

# ios - 检测 UIColor 是否是用 colorWithPatternImage 创建的

> ID：14391577
> 
> 赞同：3
> 
> 时间：2013-01-18T02:36:37.830
> 
> 标签：ios, objective-c, uicolor

我有一个`UIColor`传递给我的。我需要检测它是纯色（例如用 . 创建`colorWithRed:green:blue:alpha:`）还是用​​ . 创建的颜色`colorWithPatternImage`。

我怎么知道a`UIColor`是什么颜色，简单的颜色还是其他颜色？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T02:52:20.733

您应该能够将**CGColorGetPattern**函数与**CGColor**属性一起使用，并检查**NULL**。

```
if( CGColorGetPattern( myColor.CGColor ) != NULL ) {} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-15T06:47:13.313

另一种解决方案是检查色彩空间模型：

```
if (CGColorSpaceGetModel(CGColorGetColorSpace(myColor.CGColor)) == kCGColorSpaceModelPattern)) 
{} 
```

# ruby - 停止运行 Ruby 终端的列表

> ID：14391583
> 
> 赞同：1
> 
> 时间：2013-01-18T02:38:11.520
> 
> 标签：ruby, terminal

在我学习的过程中，我正在运行一些教程和 github ruby​​ 程序。当我在终端中运行一个程序时，它要求我输入一些东西，每行一个。我知道这很愚蠢，但我怎么告诉它我已经在终端中输入了东西？

```
puts "Please input a list of stocks, one per line"
LifeCycleReportItem.setup
report = Report.new
tickers = Array.new
STDIN.readlines.each { | ticker |
  tickers.push(ticker.chomp)
} 
```

这是终端：

```
Please input a list of stocks, one per line
GOOG
AAPL 
```

我怎么告诉它我已经完成了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T02:40:29.377

用于`Ctrl+D``Enter`编写 EOF（或`Ctrl+Z``Enter`在 Windows 上）。

但是，如果该软件旨在易于人类使用/使用，您可能会考虑说“或空行停止”并检查它。（不过，它不能使用`STDIN.readlines.each`- 只是`gets`代替`:)`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T02:40:44.167

你可以处理一个停止字符串。例如，当 ticker 为空字符串时：

```
while(ticker = STDIN.gets.chomp) do
  break if ticker.empty?

  tickers.push(ticker)
end 
```

# javascript - 在 Fusion Tables 信息窗口中隐藏元素

> ID：14391584
> 
> 赞同：1
> 
> 时间：2013-01-18T02:38:14.240
> 
> 标签：javascript, jquery, google-maps, google-fusion-tables, infowindow

所以，我有一个包含一堆联系人的 Fusion Table，但有些没有电子邮件或网站。我已将这些映射到地址，但我想在信息窗口（`<a>`标签）中选择一个元素，然后将其隐藏。该标签具有一些样式，使其看起来像一个按钮。本质上，除非有与该地址相关联的网站或电子邮件，否则我不想显示该按钮。

建议？

我试过使用 jQuery 来选择`<a>`标签的类然后隐藏它，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T03:13:47.193

jQuery在添加到dom之前无法访问元素，所以监听`domready`infoWindow的-event然后隐藏按钮（此时infoWindow的内容已经附加到DOM，但是infoWindow还没有打开）。

但是当你不需要它时不创建按钮应该更容易。

假设您使用模板，还有一个简单的解决方案：

```
.googft-info-window a[href='']{display:none;} 
```

...什么将隐藏信息窗口内的所有链接，并带有一个空的 href 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T03:05:40.033

选择一个元素并隐藏它应该适合你。您可以通过在选择后记录它来确保您正在选择它。

```
var buttonCnt = $('input.class').length;
console.log(buttoCnt); 
```

如果日志显示您期望的按钮数量，那么隐藏它们应该可以工作。如果没有，请确保在填充表格后调用您的选择器。

# sql - “从表 1、表 2 中选择 * 是有效查询吗？

> ID：14391587
> 
> 赞同：4
> 
> 时间：2013-01-18T02:38:44.070
> 
> 标签：sql

Sql 查询是否有效。我在采访中被问到这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T02:40:30.423

这是一个有效的查询 - 它产生两个表的笛卡尔积。它等效于 ANSI SQL 语法中的此查询：

```
select *
from table1
join table2 on 1=1 
```

不过，这个查询的有用性是值得商榷的。

这是[关于 SQLFiddle 的演示](http://sqlfiddle.com/#!2/4b7c6/1)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T02:57:42.333

好吧，您编写的查询*不是*有效的查询：

```
Select *
from table 1, table 2 
```

不允许使用数字作为表别名。在许多数据库中，您可以执行以下操作：

```
select *
from table "1", table "2" 
```

如果你想要数字别名。

如果您不打算在“1”和“2”之前使用空格，则查询等效于：

```
select *
from table1 cross join table2 
```

完全有效，但`cross join`语法更可取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T02:44:40.963

这取决于您使用的数据库。

长期以来，它一直是有效的 SQL，但例如一些最新版本的 SQL Server 正在放弃语法以支持使用`join`关键字。

# linux - “host1$ ssh host2 cmd1 | cmd2” cmd2 将在哪个主机上运行？

> ID：14391597
> 
> 赞同：0
> 
> 时间：2013-01-18T02:39:47.517
> 
> 标签：linux, bash, ssh

```
host1$ ssh host2 cmd1 | cmd2 
```

cmd2 会在 host1 还是 host2 上运行？

例如：

```
host1$ ssh host2 ls -1 / | wc -l 
```

在这个例子中，会`wc -l`在 host1 或 host2 上运行，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:41:06.787

它将在本地主机上运行，​​因为 shell 会识别 '|' 在调用 ssh 之前作为管道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T05:59:09.137

使用 'echo $HOSTNAME' 作为 cmd2，它会清楚地给你正确的答案

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T02:42:11.137

它将在 host2 上运行，因为管道结束了第一个命令。要让 cmd2 在 host1 上运行，请转义管道：

主机 1$ SSH 主机 2 cmd1 \| 命令2

# shader - 为什么 XNA 4.0 HLSL 像素着色器会影响整个纹理，而不是逐个像素地工作？

> ID：14391598
> 
> 赞同：0
> 
> 时间：2013-01-18T02:39:56.197
> 
> 标签：shader, xna-4.0, hlsl

我正在尝试实现一个 2D 照明系统来学习如何使用着色器。今晚我刚刚启动并运行了我的第一个着色器。

现在，游戏非常简单，我只是使用这段代码在背景上渲染 80x80px 的瓷砖。

```
protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.Black);

        Texture2D tile = this.Content.Load<Texture2D>("tile");

        Effect effect = this.Content.Load<Effect>("test");

        MouseState ms = Mouse.GetState();

        effect.Parameters["LightPosition"].SetValue(new Vector2(ms.X, ms.Y));

        spriteBatch.Begin(SpriteSortMode.Immediate, BlendState.AlphaBlend, SamplerState.LinearClamp, DepthStencilState.Default, RasterizerState.CullNone, effect);

        for (int row = 0; row < 10; row++)
        {
            for (int col = 0; col < 6; col++)
            {
                Vector2 tilePos = new Vector2(row * 80, col * 80);
                effect.Parameters["TilePosition"].SetValue(tilePos);
                spriteBatch.Draw(tile, tilePos, Color.White);
            }
        }
        spriteBatch.End();

        // TODO: Add your drawing code here

        base.Draw(gameTime);
    } 
```

我想要做的是让鼠标指针充当光源，然后计算鼠标位置与每个图块上每个像素的位置之间的差异（毕达哥拉斯），并使用它来逐渐变暗图块。每个像素都来自鼠标指针。

然而，发生的情况是，任何给定图块上的所有像素都会一次“亮起”或“变暗”，具体取决于鼠标指针与图块左上角的距离。

这是我的着色器代码。

```
texture TileTexture;

float2 LightPosition : VPOS;
float2 TilePosition : VPOS;

sampler TextureSampler = sampler_state
{
    Texture = <TileTexture>;
};

float4 PixelShaderFunction(float2 TextureCoordinate : TEXCOORD0) : COLOR0
{
    float4 color = tex2D(TextureSampler, TextureCoordinate);
    float x_dist;
    float y_dist;
    float distance;
    // Calculate distance formula (pythagorean - a2 = b2 + c2)
    x_dist = abs(LightPosition.x - (TextureCoordinate.x + TilePosition.x));
    y_dist = abs(LightPosition.y - (TextureCoordinate.y + TilePosition.y));
    distance = pow(x_dist, 2) + pow(y_dist, 2);
    distance = sqrt(distance);
    color.r = color.r - distance * 0.01;
    color.g = color.g - distance * 0.01;
    color.b = color.b - distance * 0.01;

    return color;
}

technique Lighting
{
    pass Pass1
    {
        PixelShader = compile ps_2_0 PixelShaderFunction();
    }
} 
```

奇怪的是，这段代码实际上确实单独影响了图块的每个像素，我真的没有看到我所做的改变使它无法工作。

```
float4 PixelShaderFunction(float2 TextureCoordinate : TEXCOORD0) : COLOR0
{
    float4 color = tex2D(TextureSampler, TextureCoordinate);

    //float value = (color.r + color.g + color.b) / 3; 
    color.r = color.r + TextureCoordinate.x + TextureCoordinate.y - 0.75;
    color.g = color.g + TextureCoordinate.x + TextureCoordinate.y - 0.75;
    color.b = color.b + TextureCoordinate.x + TextureCoordinate.y - 0.75;

    return color;
} 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T03:46:48.247

TEXCOORD 语义不是用整数表示纹理的像素，而是用从 0.0 到 1.0 的浮点值表示它们。更改这些行：

```
x_dist = abs(LightPosition.x - (TextureCoordinate.x + TilePosition.x));
y_dist = abs(LightPosition.y - (TextureCoordinate.y + TilePosition.y)); 
```

对此：

```
x_dist = abs(LightPosition.x - ((TextureCoordinate.x * 80) + TilePosition.x));
y_dist = abs(LightPosition.y - ((TextureCoordinate.y * 80) + TilePosition.y)); 
```

其中80代表纹理的高度和宽度......

修复问题。

# mercurial - 我可以将分支指向 mercurial 中的新 HEAD 吗？

> ID：14391605
> 
> 赞同：2
> 
> 时间：2013-01-18T02:40:29.070
> 
> 标签：mercurial, branching-and-merging

我们有两个主要的发布分支——“稳定版”和“测试版”。随着时间的推移，“beta”分支收到了没有进展到稳定但从未被删除的更改。

我想做的是再次将 beta 与 stable 同步，因此它们完全相同。在保持相同分支名称的同时使用 mercurial 是否可行？

我们为 beta 设置了基本部署，其中分支上的接收提交推送到所有网络服务器。我*可以*从马厩开始一个新的分支，但这会引起混乱。

基本上我想这样做：

```
hg update stable
hg branch beta --overwrite 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T03:43:59.577

如果您使用的是 Mercurial 书签，那么可以。书签是指向变更集的指针，因此您可以强制它们指向您想要的任何位置（如果您知道这些，它们很像 git 分支）。Mercurial*命名的分支*虽然是附加到*每个*变更集的不可磨灭的标签。当您谈论命名分支时，“头”是具有该分支名称的“最尖端”（本质上是最新的）变更集，因此您不能在不删除所有具有该分支的祖先的情况下将较旧的变更集作为头姓名。

这是一个可能有帮助的图表。对于每个变更集，“分支”是它的分支名称（每个变更集都有一个，但如果是，`default`它不会在大多数 UI 上下文中显示）：

```
 [0]  (branch: default)
   |
  [1]  (branch: default)
   | \
  [2] \    (branch: default)
   |   [3]   (branch: beta)
  [4]   |    (branch: stable)
   |   [5]   (branch: beta
  [6]        (branch: stable) 
```

在此图中，有**2 个拓扑头**，变更集 6 和 5，但**总共有 3 个头**，2、5 和 6。

变更集 5 是分支的负责人，`beta`因为它是带有该分支名称的“最新”变更集。变更集 6 是分支的负责人，`stable`因为它是带有该分支名称的“最新”变更集。而且，变更集 2 是分支的负责人，`default`因为它是具有该名称的最新变更集。

所以，如果我理解你的问题，你不能让一个分支稳定的变更集 6 也成为分支的负责人，`beta`因为每个变更集都在一个且只有一个分支上——因此单个变更集不能成为分支的负责人两个不同命名的分支。

但是，您确实有很多选择：

在分支 beta 上创建一个新的变更集，看起来与当前稳定的负责人完全相同：

```
 hg checkout stable # makes the working directory look like changeset 6
 hg branch beta     # tell mercurial that the next changeset created should be on branch 'beta'
 hg commit         # creates changeset 7 on branch beta w/ contents of changeset 6 
```

您可能需要在提交之前进行一些微小的更改（以避免“没有更改”），但这就是它的要点。由于您的新变更集具有来自 6 的文件，但具有分支标签“beta”并且比 5 更新...噗，它是“beta”的新负责人。

或者

切换到使用书签——它们更像你想象的分支工作方式。它们是指向变更集的指针，多个指针可以指向同一个变更集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T07:08:05.097

**退出解决方案**

为了从结果中排除（不在分支历史记录中），您可以 a) 在 beta 分支中退出“停滞”的变更集 b) 将稳定版合并到 beta

**变基解决方案**

创建额外的分支，将不需要的变更集重新设置到此分支，将稳定版合并到 beta

**MQ-解决方案**

安装 mq，将 changeset-in-question 转换为 MQ-patches，取消应用所有 mq-path，将 stable 合并为 beta

添加

## 如果 beta 中不需要的变更集未知

（用作命令源的 Ry4an 图）

**差异补丁方式**

想法：在 beta 之上添加“更正变更集”，将 beta 带入状态，与分支 stable@6 的状态相同

执行：`hg up beta & hg diff -r beta -r stable | hg import - & hg commit -m "Beta synced"`

**新分支方式**

想法：忘记旧的过时分支测试版，从头开始创建测试版，当前状态稳定

执行：`hg up beta & hg commit -m "Closing branch" --close-branch & hg up stable & hg branch -F beta & ... & hg commit -m "Reopen new beta"`

# ruby-on-rails - noMethodError - 未定义的方法。使用 application_helper.rb 中的方法时

> ID：14391610
> 
> 赞同：0
> 
> 时间：2013-01-18T02:40:38.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view-helpers

尝试使用 application_helper 文件中的方法时收到 noMethodError。

看起来辅助方法本身很好，但是辅助方法中的代码是触发错误的原因。我已经仔细检查了我的模型和模式文件，以确保我的属性列出正确。对此有一双新的眼睛会很受欢迎。

这是我的代码...

application_helper.rb

PS。我在这里展示了两组辅助方法，因为这第一组（驻留辅助方法）在其预期的视图中工作正常。

```
 # START -- Resident Helper Methods
      def resident_full_name
        ([@resident.fname, @resident.lname] - [ '' ]).compact.join(' ')
      end

      def resident_dob
        @resident.dob
      end

      def resident_gender
        @resident.gender
      end

      def resident_doc_full_name
        ([@resident.doc_fname, @resident.doc_lname] - [ '' ]).compact.join(' ')
      end

      def resident_doc_phone1
        @resident.doc_phone1
      end

      def resident_doc_address
        @resident.doc_address
      end

      def resident_doc_city
        @resident.doc_city
      end

      def resident_doc_state
        @resident.doc_state
      end

      def resident_doc_zip
        @resident.doc_zip
      end

      def resident_guard_full_name
        @resident.guard_full_name
      end

      def resident_guard_phone
        @resident.guard_phone
      end

      def resident_desrep_full_name
        @resident.desrep_full_name
      end

      def resident_desrep_phone
        @resident.desrep_phone
      end
    # END -- Resident Helper Methods
    # START -- User Helper Methods
      def user_full_name
        ([@user.fname, @user.lname] - [ '' ]).compact.join(' ')
      end
    # END -- User Helper Methods
    # START -- User Helper Methods
  def user_full_name
    @user_full_name = ([@user.fname, @user.lname] - [ '' ]).compact.join(' ')
    return @user_full_name
  end
# END -- User Helper Methods
# START -- Admin Helper Methods
  def fac_owner_full_name
    @fac_owner_full_name = ([@admin.owner_fname, @admin.owner_lname] - [ '' ]).compact.join(' ')
    return @fac_owner_full_name
  end

  def fac_name
    @fac_name = @admin.fac_name
    return @fac_name
  end

  def fac_lic_num
    @fac_lic_num = @admin.lic_num
    return @fac_lic_num
  end

  def fac_address
    @fac_address = @admin.fac_address
    return @fac_address
  end

  def fac_state
    @fac_state = @admin.fac_state
    return @fac_state
  end

  def fac_zip
    @fac_zip = @admin.fac_zip
    return @fac_zip
  end

  def fac_email
    @fac_email = @admin.fac_email1
    return @fac_email
  end

  def fac_phone
    @fac_phone = @admin.fac_phone1
    return @fac_phone
  end
# END -- Admin Helper Methods 
```

显示.html.erb

```
<tr>
    <td>
        <label for="fac_name">
            <b>Name of Facility/Home</b><br/>
            logger.debug(fac_owner_full_name)

            <%= fac_owner_full_name %>
            <%#= fac_name %>
        </label>
    </td>
    <td>
        <label for="fac_lic_num">
            <b>License Number</b><br />
            <%#= fac_lic_num %>
        </label>
    </td>
    <td>
        <label for="fac_email">
            <b>Email</b><br />
            <%#= fac_email %>
        </label>
    </td>
    <td>
        <label for="fac_phone">
            <b>Phone</b><br />
            <%#= fac_phone %>
        </label>
    </td>
    <td>
        <label for="fac_address">
            <b>Facility Address</b><br />
            <address>
                <%#= fac_address %><br />
                <%#= fac_city " " %><%#= fac_state %><br />
                <%#= fac_zip %>
            </address>
        </label>
    </td>
    <td>
        <label for="fac_owner_full_name">
            <b>Licensee Name</b><br />
            <%#= fac_owner_full_name %>
        </label>
    </td>
</tr>
<tr>
    <td>
        <label for="involved_person_full_name">
            <%= @incident_accident_form.involved_person_full_name %>
        </label>
    </td> 
```

数据库/schema.rb

```
create_table "admins", :force => true do |t|
    t.string   "owner_fname"
    t.string   "owner_lname"
    t.string   "lic_num"
    t.text     "fac_address"
    t.string   "fac_city"
    t.string   "fac_state"
    t.string   "fac_zip"
    t.string   "fac_name"
    t.string   "fac_phone1"
    t.string   "fac_phone2"
    t.string   "fac_phone3"
    t.string   "fac_phone4"
    t.string   "fac_phone5"
    t.string   "fac_phone6"
    t.string   "fac_phone7"
    t.string   "fac_phone8"
    t.string   "fac_phone9"
    t.string   "fac_phone10"
    t.string   "fac_phone11"
    t.string   "fac_phone12"
    t.string   "fac_phone13"
    t.string   "fac_phone14"
    t.string   "fac_phone15"
    t.string   "fac_phone16"
    t.string   "fac_phone17"
    t.string   "fac_phone18"
    t.string   "fac_phone19"
    t.string   "fac_phone20"
    t.string   "fac_phone21"
    t.string   "fac_phone22"
    t.string   "fac_phone23"
    t.string   "fac_phone24"
    t.string   "fac_phone25"
    t.string   "fac_phone26"
    t.string   "fac_phone27"
    t.string   "fac_phone28"
    t.string   "fac_phone29"
    t.string   "fac_phone30"
    t.string   "fac_email1"
    t.string   "fac_email2"
    t.string   "fac_email3"
    t.string   "fac_email4"
    t.string   "fac_email5"
    t.string   "fac_email6"
    t.string   "fac_email7"
    t.string   "fac_email8"
    t.string   "fac_email9"
    t.string   "fac_email10"
    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
  end 
```

模型/admin.rb

```
class Admin < ActiveRecord::Base
  attr_accessible :fac_address, :fac_city, :fac_name, :fac_state, :fac_zip, :lic_num,
  :owner_fname, :owner_lname, :fac_phone1, :fac_phone2, :fac_phone3, :fac_phone4, :fac_phone5,
  :fac_phone6, :fac_phone7, :fac_phone8, :fac_phone9, :fac_phone10, :fac_phone11, :fac_phone12,
  :fac_phone13, :fac_phone14, :fac_phone15, :fac_phone16, :fac_phone17, :fac_phone18,
  :fac_phone19, :fac_phone20, :fac_phone21, :fac_phone22, :fac_phone23, :fac_phone24,
  :fac_phone25, :fac_phone26, :fac_phone27, :fac_phone28, :fac_phone29, :fac_phone30,
  :fac_email1, :fac_email2, :fac_email3, :fac_email4, :fac_email5, :fac_email6, :fac_email7,
  :fac_email8, :fac_email9, :fac_email10

  # has_many :users
  # validate_on_create :user_count_within_bounds

  private

  def user_count_within_bounds
    return if users.blank?
    errors.add("") if users.length > 10
    errors.add("") if users.length > 25
  end
end 
```

**更新于 13 年 1 月 17 日晚上 11:30 东部标准时间**从服务器输出

```
Started GET "/residents/1/incident_accident_forms/11" for 127.0.0.1 at 2013-01-17 23:23:57 -0500
Processing by IncidentAccidentFormsController#show as HTML
  Parameters: {"resident_id"=>"1", "id"=>"11"}
  Resident Load (1.0ms)  SELECT "residents".* FROM "residents" WHERE "residents"."id" = $1 LIMIT 1  [["id", "1"]]
  IncidentAccidentForm Load (1.3ms)  SELECT "incident_accident_forms".* FROM "incident_accident_forms" WHERE "incident_accident_forms"."resident_id" = 1 AND "incident_accident_forms"."id" = $1 LIMIT 1  [["id", "11"]]
  Rendered incident_accident_forms/show.html.erb within layouts/application (6.3ms)
Completed 500 Internal Server Error in 14ms

ActionView::Template::Error (undefined method `owner_fname' for nil:NilClass):
    12:                             <b>Name of Facility/Home</b><br/>
    13:                             logger.debug(fac_owner_full_name)
    14: 
    15:                             <%= fac_owner_full_name %>
    16:                             <%= fac_name %>
    17:                         </label>
    18:                     </td>
  app/helpers/application_helper.rb:74:in `fac_owner_full_name'
  app/views/incident_accident_forms/show.html.erb:15:in `_app_views_incident_accident_forms_show_html_erb__403107391156795487_2183850600'

  Rendered /Users/beracus/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/beracus/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/beracus/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (9.4ms) 
```

**更新**的 event_accident_forms_controller.rb****

 **```
class IncidentAccidentFormsController < ApplicationController
  before_filter :get_resident
  before_filter :get_admin

  def index
    @incident_accident_forms = @resident.incident_accident_forms
  end

  def new
    @incident_accident_form = @resident.incident_accident_forms.build
  end

  def create
    @incident_accident_form = @resident.incident_accident_forms.build(params[:incident_accident_form])
    if @incident_accident_form.save
      redirect_to [@admin, @resident, @incident_accident_form] #, flash[:success] = "Form was created!"
    else
      render 'new', flash[:error] = "There was a problem with the form"
    end
  end

  def show
    @incident_accident_form = @resident.incident_accident_forms.find(params[:id])
  end

  def update
    @incident_accident_form = @resident.incident_accident_forms.find(params[:id])
    if @incident_accident_form.update_attributes(params[:incident_accident_form])
      flash[:success] = "Form updated!"
      redirect_to controller: 'residents', action: 'show', id: params[:id]
    else
      render 'edit', flash[:error] = "Unable to update form"
    end
  end

  def edit
    @incident_accident_form = @resident.incident_accident_forms.find(params[:id])
  end

  def destroy
    @incident_accident_form = @resident.incident_accident_forms.find(params[:id])
    @incident_accident_form.destroy
    flash[:notice] = "You sure?"
    redirect_to resident_incident_accident_forms_path
  end

  private
  # get_resident converts the resident_id given by the routing
  # into an @resident object, for use in this controller & coresponding views
  def get_resident
    @resident = Resident.find(params[:resident_id])
  end

  def get_admin
    @admin = Admin.find(params[:admin_id])
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:43:59.797

这个错误本质上是说`@admin`因为`nil`你试图在in上调用`owner_fname`方法。我会仔细检查您实际上是在控制器中设置该变量。`@admin``fac_owner_full_name`

这似乎得到了证实，因为您的`IncidentAccidentFormsController#show`操作没有对您的`admins`表进行任何 SQL 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:43:33.367

将您的方法更改为这种格式：

```
def resident_full_name
  @resident_full_name = ([@resident.fname, @resident.lname] - [ '' ]).compact.join(' ')
  return @resident_full_name
end 
```**

# php - 否则，如果 wordpress 问题

> ID：14391614
> 
> 赞同：0
> 
> 时间：2013-01-18T02:41:23.553
> 
> 标签：php, wordpress

我正在尝试编辑 header.php 文件以根据页面语言显示不同的图像。如果它是英文网站，它会显示第一个子句，如果主页是荷兰语，我希望它显示第二个子句。但是，下面的代码不起作用。有人会有建议吗？谢谢

```
<?php
if(is_home()||is_page(885)||is_page(883)||is_page(276)||is_page(285)||is_category( '13' )){
echo'<div class="header3">
<a href="http://www.toolsfornetworkers.nl/?page_id=285"><img src="http://www.toolsfornetworkers.nl/wp/wp-content/uploads/what.jpg"></a>';

} 
elseif(is_home()&&(bloginfo('language')=="nl")){
echo'<div class="header3">
<a href="http://www.toolsfornetworkers.nl/?page_id=285"><img src="http://www.toolsfornetworkers.nl/wp/wp-content/uploads/whatnl.jpg"></a>';
}

else{
echo '<div id="branding2" role="banner">
                <div><img src="http://www.toolsfornetworkers.nl/wp/a_flash/top.jpg"  /> ';
} ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:56:01.767

把事情简单化：

```
// NL home
if(is_home() && substr(get_bloginfo('language'), 0, 2) === 'nl'){
    ; 
}

// Those pages or that category
else if(is_page(885, 883, 276, 285) || is_category(13)){
    ; 
}

// Default behaviour    
else{
    ; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:43:33.850

这是因为`is_home()`从一开始就被击中，所以它没有机会进入第二个选项。尝试：

```
<?php
if(is_home()&&(is_page(885)||is_page(883)||is_page(276)||is_page(285)||is_category( '13' ))){
echo'<div class="header3">
<a href="http://www.toolsfornetworkers.nl/?page_id=285"><img src="http://www.toolsfornetworkers.nl/wp/wp-content/uploads/what.jpg"></a>';

} 
elseif(is_home()&&(bloginfo('language')=="nl")){
echo'<div class="header3">
<a href="http://www.toolsfornetworkers.nl/?page_id=285"><img src="http://www.toolsfornetworkers.nl/wp/wp-content/uploads/whatnl.jpg"></a>';
}

else{
echo '<div id="branding2" role="banner">
                <div><img src="http://www.toolsfornetworkers.nl/wp/a_flash/top.jpg"  /> ';
} ?> 
```

注意`&&`而不是`||`第一行的。

# javascript - 如何使用 jquery 或 javascript 更改选定的值

> ID：14391618
> 
> 赞同：0
> 
> 时间：2013-01-18T02:42:04.750
> 
> 标签：javascript, jquery, html

我有一个我想使用稍后在应用程序中触发 onClick 的功能来更改所选的一个。

```
<select id="myselect">
<option value=aa>aa</option>
<option value=bb>bb</option>
<option value=cc>cc</option>
</select> 
```

然后通过单击一个按钮，一个函数将运行并使用 php 向 mysql 发送一个查询。假设 php 回复我“bb”，那么我该如何更改此选择以在 bb 上选择？

```
document.getElementById('myselect').value="bb"; 
```

不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T02:47:59.120

向您的选择元素添加一个标识符，例如 ID，然后您可以使用`.val()`.

```
<select id="mySelect">
    <option value="aa">aa</option>
    <option value="bb">bb</option>
    <option value="cc">cc</option>
</select> 
```

在 jQuery 中收到 AJAX 响应后，设置值

```
$('#mySelect').val(phpResponseValue); 
```

AJAX 响应返回的值在哪里`phpResponseValue`，例如`aa`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T02:46:51.493

HTML：

```
<select id="mySelect">
<option value=aa>aa</option>
<option value=bb>bb</option>
<option value=cc>cc</option>
</select> 
```

jQuery :

```
$("#mySelect").val('bb'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T02:47:05.933

```
$('.button').click(function(){

    $.ajax({
        type: "POST",
        url: "test.php",
        success: function(data){

               $('.select_class').val(data);

        }
    }); 

}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T02:48:08.630

可以使用 jQuery`val()`方法，但也可以使用 select 的基本 javascript 函数和属性（具有更好的性能）

```
select.selectedIndex 
```

是当前选中的索引，所以你可以通过设置这个属性来选择你想要的

```
select.options 
```

是您选择的选项数组

# c++ - 通过 http 代理提升 asio ssl 身份验证

> ID：14391621
> 
> 赞同：4
> 
> 时间：2013-01-18T02:42:33.823
> 
> 标签：c++, boost, boost-asio

我有一个需要通过代理支持连接的 boost 客户端。

目前，我能够连接到代理并成功与外部服务器通信，但有一个例外 - ssl 服务器。

代理是 http，我需要从 https 站点连接/检索信息。

我的代码现在连接到代理 asio::ip::tcp::socket _socket; -succeeds 发送 CONNECT host: ssl server 到代理（上面连接） -succeeds

——这就是我卡住的地方。如何执行握手/发送请求？

我找到了这个旧帖子

[boost::asio 通过 http 代理握手？](https://stackoverflow.com/questions/3079742/boostasio-handshake-through-http-proxy)

问题是： sslsocket_(socket_,context) //this 不编译（构造函数期望 io_Service 不是套接字）--使用 boost 1.52

好的，下面是代码

//解析头部并检查响应

```
boost::asio::ssl::stream<boost::asio::ip::tcp::socket> _socket;
boost::asio::ip::tcp::socket _httpSocket;
...

int response= _httpHeader.getResult(header.c_str());
if(response==200) { 
boost::asio::ssl::context ctx(io_service,boost::asio::ssl::context::sslv23);
 _sslSocket(_httpSocket,ctx); //this fails 
```

注意：我从上面的帖子中复制了上面的内容，基于这部分工作的帖子。在我看来它应该是 _sslSocekt(io_service,ctx) 但我不明白这对我有什么帮助}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:35:52.703

我找到了答案，我需要使用 _socket.next 层连接到代理。然后，如果连接成功，则使用 _socket.lowest_layer() 读取/写入响应

# jquery-mobile - jquery-mobile：突出显示垂直对齐的控件组中的选定单选按钮

> ID：14391625
> 
> 赞同：0
> 
> 时间：2013-01-18T02:42:51.907
> 
> 标签：jquery-mobile

我正在使用 jquery-mobile 1.2.0。

如果我创建一个水平对齐的控件组，其中包含单选按钮，当用户选择单选按钮时，它们会突出显示，并且其中没有带点的圆圈。

```
<fieldset class="ui-block-b" data-role="controlgroup" data-type="horizontal">
    <legend>Pig is Drinking: </legend> 
    <input type="radio" name="assessmentDrinking" id="assessmentDrinking-Yes" value="1" />
    <label for="assessmentDrinking-Yes">Yes</label>
    <input type="radio" name="assessmentDrinking" id="assessmentDrinking-No" value="0" />
    <label for="assessmentDrinking-No">No</label>
</fieldset> 
```

但是，如果我将 设置为 ，则会`data-type`出现`vertical`带点的圆圈，并且不会突出显示选定的收音机。（突出显示是指标签后面的整个区域都突出显示）。

有没有办法改变这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:21:24.720

```
.ui-radio:nth-child(1) .ui-radio-on .ui-btn-inner{
    background-color:green;
}
.ui-radio:nth-child(2) .ui-radio-on .ui-btn-inner{
    background-color:grey;
}
.ui-radio:nth-child(3) .ui-radio-on .ui-btn-inner{
    background-color:red;
} 
```

![JSFiddle 的截图](../Images/b3e2b890213194328105efc5af703681.png)

这是一个[JSFiddle](http://jsfiddle.net/B8Rh4/1/)。

另请参阅此[SO Question](https://stackoverflow.com/questions/11578628/different-colors-on-radio-buttons-when-they-are-active-in-jquery-mobile/11580708#11580708)。

# c++ - 使用给定的基数将字符串转换为整数

> ID：14391630
> 
> 赞同：4
> 
> 时间：2013-01-18T02:43:21.647
> 
> 标签：c++, integer

以下代码行的`C++`等价物是什么`Java`

```
int x = Integer.parseInt("0010011110", 2); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T02:50:49.967

[std::stoi](http://en.cppreference.com/w/cpp/string/basic_string/stol) (C++11 起):

```
int x = std::stoi("0010011110", nullptr, 2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T02:45:54.533

您可以[`strtol`](http://en.cppreference.com/w/cpp/string/byte/strtol)用来解析以 2 为底的整数：

```
const char *binStr = "0010011110";
char *endPtr;
int x = strtol(binStr, &endPtr, 2);
cout << x << endl; // prints 158 
```

这是[ideone 上演示的链接](http://ideone.com/JwCyNl)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T02:54:52.010

只需将[strtol](http://www.cplusplus.com/reference/cstdlib/strtol/)包装为`parseInt`

```
#include <stdio.h>
#include <stdlib.h>

int parseInt(const std::string& s, int base) {
    return (int) strtol(s.c_str(), null, base);
}

int x = parseInt("0010011110", 2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T02:46:48.917

[atoi](http://www.cplusplus.com/reference/cstdlib/atoi/)或更好[的 strtol](http://www.cplusplus.com/reference/cstdlib/strtol/)

```
long x = strtol("0010011110",nullptr, 2); 
```

# ssas - MDX 和 DAX Measure 产生不存在的值

> ID：14391631
> 
> 赞同：0
> 
> 时间：2013-01-18T02:43:28.363
> 
> 标签：ssas, mdx, dax

我正在研究 SQL Server 2012 分析服务中的表格模型。

我做了一个这样的立方体。 ![在此处输入图像描述](../Images/836eafd3c4bec3f1fd1882f972a1d2dc.png)

首先，我检查了我的数据和结果如下（对不起，where语句没有意义） ![在此处输入图像描述](../Images/69d77c5ea9b2af851a981e03c36359d8.png)

合同测量上的 PC 定义如下 => 合同上的 PC:=SUM([PC Count])

但是，当我在性能点（Sharepoint）中制作图表时，结果显示很糟糕。所以我检查了图表使用的 MDX 查询。

这是 MDX 查询和结果。 ![在此处输入图像描述](../Images/baeea9ac374e177adcc6ba6d55aeb944.png)

事实上，ServiceContractID 的值都是ServiceContract 中存在的ContractID 值。

我真的很难理解为什么会有空值。是什么导致这个错误的计算？（当我使用多维进行测试时，我可以得到我期望的结果。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:30:53.700

当您使用 SQL 查询检查数据时，您使用了`WHERE DateKey = 20121231`但您的 MDX 对日期没有此类限制。

要么在没有 WHERE 的情况下再次运行 SQL 并查看是否看到一些额外的行，要么将日期过滤器添加到 MDX。

# c# - 如何在 C# 程序中跳过 C++ dll 错误

> ID：14391639
> 
> 赞同：-1
> 
> 时间：2013-01-18T02:44:19.533
> 
> 标签：c#, c++, .net, c

我的问题是我使用了另一个开发组编写的 C++ DLL。不幸的是，我在 C# 程序中调用的函数中存在错误（例如，除以 0）。它导致我的程序突然终止。

谁能推荐如何修复它或跳过这个错误，确保我的程序不会再被终止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T03:08:45.413

你能澄清一下dll是通过pinvoke还是COM调用的吗？

你得到 DivideByZeroException 了吗？

如果是这样，捕获它，记录它，然后重新抛出或抛出一个包装异常。

您不得继续业务功能/事务，尽管程序可能不一定会终止。

我相信大多数现代开发框架都提供了捕获未捕获异常的机制，作为最终的安全网，尽管您可以创建自己的一个。

根据您正在开发的应用程序类型，对于 WinForm 应用程序，您可以检查 AppDomain.UnhandledException 或 Application.ThreadException。对于 asp .net，取决于你使用的是什么框架，有很多选择，例如，你可以看看 HttpApplication.Error 。

# google-apps-script - 日期和时间选择器 Google App 脚本

> ID：14391642
> 
> 赞同：-1
> 
> 时间：2013-01-18T02:44:45.593
> 
> 标签：google-apps-script

是否可以在 GUI 中为日期和时间添加一个选择框？

如果不是，是否可以将两个变量（一个用于日期（选择器），另一个用于时间（数字））组合成一个变量，用作日历的开始时间变量？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T06:56:27.090

这是一个使用 listBoxes 的工作解决方案，[在电子表格中对其进行测试（复制以使用）](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dEFJQ2J3YXdRNk5QdFBtUkd3OWlEVHc)

```
function listBoxVersion() {
  var app = UiApp.createApplication().setTitle('Time Picker');
  var main = app.createGrid(2, 4);
  var date = app.createDateBox().setName('date');
  var hour = app.createListBox().setName('hour').setWidth('100');
  var min = app.createListBox().setName('min').setWidth('100');
  for (h=0;h<24;++h){
  if(h<10){var hourstr='0'+h}else{var hourstr=h.toString()}
  hour.addItem(hourstr)
  }
  for (m=0;m<60;++m){
  if(m<10){var minstr='0'+m}else{var minstr=m.toString()}
  min.addItem(minstr)
  }
  var button = app.createButton('validate')
  main.setWidget(0,0,app.createLabel('Choose Date')).setWidget(0,1,app.createLabel('Choose Hours')).setWidget(0,2,app.createLabel('Choose minutes'))
  main.setWidget(1,0,date).setWidget(1,1,hour).setWidget(1,2,min)
  main.setWidget(1,3,button)
  var handler = app.createServerHandler('show').addCallbackElement(main)
  button.addClickHandler(handler)
  app.add(main)
  ss=SpreadsheetApp.getActive()
  ss.show(app)
}

function show(e){
  ss=SpreadsheetApp.getActive()
  ss.getRange('A1').setValue(Utilities.formatDate(e.parameter.date,'GMT+02:00','MMM-dd-yyyy')+'  @ '+e.parameter.hour+':'+e.parameter.min)
  var date = new Date(e.parameter.date);
  date.setHours(e.parameter.hour,e.parameter.min,0)
  ss.getRange('A2').setValue(date)
  } 
```

![在此处输入图像描述](../Images/ac48ca16b6ae19f1b42b115f9c41ed90.png)

**编辑：**这是另一个带有普通文本框的版本：（在[同一张测试表](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dEFJQ2J3YXdRNk5QdFBtUkd3OWlEVHc)中可用）

```
 function textVersion() {
  var app = UiApp.createApplication().setTitle('Time Picker');
  var main = app.createGrid(2, 4);
  var date = app.createDateBox().setName('date');
  var hour = app.createTextBox().setName('time').setWidth('150');
  var button = app.createButton('validate')
  main.setWidget(0,0,app.createLabel('Choose Date')).setWidget(0,1,app.createLabel('Enter Hours:minutes'))
  main.setWidget(1,0,date).setWidget(1,1,hour);
  main.setWidget(1,3,button)
  var handler = app.createServerHandler('show2').addCallbackElement(main)
  button.addClickHandler(handler)
  app.add(main)
  ss=SpreadsheetApp.getActive()
  ss.show(app)
}

function show2(e){
  ss=SpreadsheetApp.getActive()
  var time = e.parameter.time.split(':')
  var hour = time[0]
  var min = time[1]
  ss.getRange('A1').setValue(Utilities.formatDate(e.parameter.date,'GMT+02:00','MMM-dd-yyyy')+'  @ '+hour+':'+min)
  var date = new Date(e.parameter.date);
  date.setHours(hour,min,0)
  ss.getRange('A2').setValue(date)
  } 
```

![在此处输入图像描述](../Images/07d91b67c7cb32cc955660ee7e50cf08.png)

# php - 通过解析原始帖子数据来获取 wordpress 帖子中的第一张图片，更好的选择？

> ID：14391646
> 
> 赞同：1
> 
> 时间：2013-01-18T02:45:08.387
> 
> 标签：php, html, wordpress

我有一个网站需要显示特定类别中任何给定帖子的第一张图片。我让它工作，并在下面添加了代码。我的问题是，有没有更好的方法？这看起来非常笨拙。

我正在解析帖子数据中首先出现在`src="`和之间的内容`"`。我缺少任何问题吗？Wordpress 有更好的内置方法吗？

```
function extractStringFromString($string, $start, $end) {
//Finds the first string between $start and $end. 

    $startPos = strpos($string,$start);

    $stringEndTagPos = strpos($string,$end,$startPos);

    $stringBetween = substr($string,$startPos+strlen($start),$stringEndTagPos-$startPos-strlen($start));

    if (strlen($stringBetween) != 0 && $startPos!= '') {
        return $stringBetween;
    }
    else {
        return false;
    }

}
function getfirstimage($post){
//Returns url of first image located in post data
global $wpdb;

$sqlquery = "SELECT post_content FROM  `wp_posts` WHERE  `ID` = $post LIMIT 0 , 1";
$result = $wpdb->get_results( $sqlquery );
$result = $result[0];
$postcontent = $result->post_content;

if ($result){
    return extractStringFromString($postcontent, 'src="', '" ');
}

else return 0; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T04:25:19.010

第三个选项：使用[Dom 解析器](http://php.net/manual/en/class.domdocument.php)

```
<?php
while(have_posts()) : the_post();
    $dom = new DOMDocument();
    $dom->loadHTML(get_the_content());
    $images = $dom->getElementsByTagName('img');
    $src = $images->item(0)->getAttribute('src');
    echo 'Src: '.$src.'<br/>';
    echo 'First Image: '.$images->item(0)->saveHTML();
    echo 'Image HTML: '.htmlentities($images->item(0)->saveHTML());
endwhile;
?> 
```

这应该让您朝着正确的方向开始。正则表达式不会考虑格式错误的 HTML，并且并非您的 Post HTML 中的所有图像都必须是附件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T03:06:36.987

使用它，如果您在[The Loop](http://codex.wordpress.org/The_Loop)中，则可能将**$post->ID替换为****get_the_ID()**。

```
<?php //GET THE FIRST IMAGE
    $args = array(
        'order'          => 'ASC',
        'orderby'        => 'menu_order',
        'post_type'      => 'attachment',
        'post_parent'    => $post->ID,
        'post_mime_type' => 'image',
        'post_status'    => null,
        'numberposts'    => 1,
    );
    $attachments = get_posts($args);
    if ($attachments) {
        foreach ($attachments as $attachment) {
            echo wp_get_attachment_link($attachment->ID, 'thumbnail', false, false);
        }
    } 
?> 
```

来源：[WordPress 支持论坛](http://wordpress.org/support/topic/get-the-images-attached-to-post-expect-the-first-image?replies=10#post-1451412)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T05:39:17.983

有一个非常棒的插件叫做 Get The Image。[http://wordpress.org/extend/plugins/get-the-image/](http://wordpress.org/extend/plugins/get-the-image/)

致电`<?php if ( function_exists( 'get_the_image' ) ) get_the_image(); ?>`

功能：

```
1) Looks for an image by custom field (one of your choosing).
2) If no image is added by custom field, check for an image using
   the_post_thumbnail() (WordPress featured image).
3) If no image is found, it grabs an image attached to your post.
4) If no image is attached, it can extract an image from your post content
   (off by default).
5) If no image is found at this point, it will default to an image you set
   (not set by default). 
```

# python - 新复制的文件是否违反了导入规则？

> ID：14391648
> 
> 赞同：0
> 
> 时间：2013-01-18T02:45:24.447
> 
> 标签：python, django, django-views, django-class-based-views

我使用 django 1.4.2 创建了一个 django 项目。这个项目中有一个“应用程序”（`adsite`）。它有效。但是当我将一些“py”文件复制到“app”文件夹中时， `No module named models`views.py 中出现错误。`Parent module adsite.adsiteviews.mainhanlder does not exist.`我应该`__init__`在“应用程序”中注册新文件吗？新的处理文件是否违反了`import`规则？

视图.py

```
from django.http import HttpResponse
from django.template import Context, loader    
from adsite.models import UserInfo

def showusers(request):
    userlist = UserInfo.objects.all()
    c = Context({
        'userlist':userlist,
    })
    t = loader.get_template('users.html')

    return HttpResponse(t.render(c)) 
```

复制文件：adsiteviews.py

```
class mainhanlder(TemplateView)
    def get(self):
    """ """        
    variables = {
                'user': self.get_current_user(),
                'mchosts' : MCHOSTS, 
                'servers' : servers}

    index_templ = tmpl_lookup.get_template("index.html")
    body = index_templ.render(**variables)
    self.write(body) 
```

网址.py

```
urlpatterns = patterns('',
    # Examples:
    url(r'^$', 'adsite.adsiteviews.mainhandler.as_View()'),
    url(r'^users/$', 'adsite.views.showusers'), 
```

我对这个问题没有任何线索。任何建议，将不胜感激。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:33:12.097

首先，你的 urlconf 是完全错误的；您不能像调用基于函数的视图一样调用基于类的视图。具体来说，您的 urls.py 应如下所示：

```
from adsite.adsiteviews import mainhandler

urlpatterns = patterns('',
    # Examples:
    url(r'^$', mainhandler.as_View()),
    url(r'^users/$', 'adsite.views.showusers'), 
```

其次，错误`No module named models`可能意味着：您需要在您的`adsite`目录中有名为 models.py 的文件，并且它应该包含`UserInfo`模型定义。我不确定你为什么没有models.py，因为它通常是`startapp`默认由commant创建的。

# makefile - 当我使用未设置的变量时，可以警告我吗？

> ID：14391650
> 
> 赞同：14
> 
> 时间：2013-01-18T02:45:29.890
> 
> 标签：makefile

当我使用未设置的变量时，有没有办法告诉 make 抱怨？类似于`set -u`bash 的东西？

我刚刚花了 20 分钟调试我的 Makefile，因为变量名称中有一个符号拼写错误。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-18T03:14:43.860

是的，有一种方法：

```
make --warn-undefined-variables 
```

我刚刚使用 make **3.81版本对其进行了测试**

编辑：

你也可以在你的 makefile 中设置它，以保护你自己在未来免受愚蠢的错误。为此，只需将其放在 makefile 顶部附近的某个位置（这也将传递给递归 make 进程）：

```
MAKEFLAGS=--warn-undefined-variables 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-05T07:14:56.287

以下是如何使 make 立即失败：

```
ifndef PSWD
$(error PSWD is undefined)
endif 
```

# javascript - 使用经典 asp 在 javascript 中获取服务器时间

> ID：14391662
> 
> 赞同：1
> 
> 时间：2013-01-18T02:47:15.063
> 
> 标签：javascript, asp-classic

这个让我把头发拉出来。我将以下经典的 ASP 代码放在我的文档的头部，以获取在 javascript 中使用的服务器时间......并且它第一次工作。后来当 javascript 在 javascript 中调用相同的函数时，我得到了时间但是 2 分钟！

第一次在头部内部（OK）

```
 <% 
Dim servertime, d
    d = Now 
    servertime = Cstr(Right("00" & Hour(d), 2) & ":" & Right("00" & Minute(d), 2) & ":" & Right("00" & Second(d), 2)) 'parse out hh:mm:ss
%>

    <script>
window.servertime = '<%=servertime%>'; // set servertime to server time duh!
    </script> 
```

后来在一个javascript函数中：

```
 <% 
    d = Now 
    servertime = Cstr(Right("00" & Hour(d), 2) & ":" & Right("00" & Minute(d), 2) & ":" & Right("00" & Second(d), 2)) 'parse out hh:mm:ss
%>

window.servertime = '<%=servertime%>'; // get the server time again! 
```

每次第二个功能运行 2 分钟！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T06:29:37.887

愿这会有所帮助。我不确定您需要什么时间...当用户会话即将到期时，我用它在 asp 页面内提前 2 分钟发出警告。

```
<%
advanceWarning = 2 
jsTimeout = (session.timeout - advanceWarning) * 60000 
%> 
<script>window.setTimeout("alert('Security Message at <%=time%> (EST): You have been idle for too long on the website. For your security, your session will expire in 2 minutes and you will be automatically logged out if you continue to remain idle!');",<%=jsTimeout%>);</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:03:26.107

servertime 变量是在页面初始渲染时计算的，只有在再次调用页面时才会更新。

这意味着如果您想使用当前服务器时间，您可以做几件事：

1.  页面加载时抓取服务器时间，还要抓取javascript本地时间。当您想刷新时间时，将现在与初始本地时间之间的差异添加到原始服务器时间......它不会 100% 准确，但会接近。

2.  稍微复杂一点.. 在服务器上有一个页面，它只返回当前时间，当你想从 javascript 显示服务器时间时，进行 AJAX 调用（例如使用 jQuery）来抓取并显示它。

# ruby-on-rails - 如何完全卸载 Jruby？

> ID：14391663
> 
> 赞同：0
> 
> 时间：2013-01-18T02:47:21.970
> 
> 标签：ruby-on-rails, windows, jruby

我最近在我的 Windows PC 上安装了 Ruby。我还安装了 Jruby。之后，我使用 gems 安装了 Rails。因此，当我尝试在 CMD 上执行“rails server”时，会出现“找不到 JDK”或类似的错误。所以我安装了Jruby。现在我得到“找不到 Jruby”。

有人可以指出我需要做什么吗？

[编辑] 我希望能够正常使用 rails，而没有安装 Jruby 带来的所有麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T03:19:37.667

听起来您的`PATH`变量中有一些 JRuby 残余物。如果您检查了您`PATH`的 gem，则可能是作为 JRuby gem 安装的，或者在您的包中被锁定为 JRuby gem。

可能你的 RubyGems 环境搞砸了。尝试跑步`gem env`并寻找任何不寻常的东西。

无论如何，请尝试更新您的捆绑包或检查您的捆绑包的平台 ( `bundle platform`)。

如果这些工作都不`where.exe rails`会让您匹配`rails`您可以调用的所有批处理文件`PATH`，那么您可以从那里调试它。

*请注意：注册表中不应该有任何需要处理的东西，您可能需要的大多数东西都可能在您的`environment variables`*

# iphone - 在 Interface Builder 中使用自定义字体定位 UILabel

> ID：14391665
> 
> 赞同：0
> 
> 时间：2013-01-18T02:47:30.830
> 
> 标签：iphone, ios, objective-c, interface-builder, uilabel

**编辑：为了避免混淆 - 这个问题是关于使用自定义字体定位的！这不是关于如何以编程方式使用自定义字体！**

我试图在界面生成器中得到这样的东西：

![在此处输入图像描述](../Images/5922cf432d90cc3b01258c992a4e089c.png)

如您所见，我正在使用自定义字体。问题是自定义字体在界面构建器中不可见，因此很难将它们放置在那里。

你如何处理这样的情况。我对 iOS 应用程序中的自定义设计很陌生，我不知道如何开始。

我认为也许 UICollectionView 会是一个答案，但仍然 - 自定义字体和定位无论如何都非常困难。

关于如何获得如上图所示的定位（而不是反射）的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T04:29:30.593

如您所见，在 IB 中执行此操作非常复杂，因此请`Do`在您的代码中执行此操作。为您的标签设置文本和字体，然后通过以下代码检索其大小：

```
+ (CGSize) heightOfString:(NSString*)string forFont:(UIFont *)font width:(CGFloat)width{
    CGSize size = CGSizeMake(width, CGFLOAT_MAX);
    size = [string sizeWithFont:font
          constrainedToSize:size
              lineBreakMode:NSLineBreakByWordWrapping];
    return size;
} 
```

现在`labels`相应地调整。如果这些是 3，您可以通过设置第二个`origin`中的第一个`center`和最后一个屏幕末尾的原点来轻松完成。

# linux - 服务器向所有用户控制台打印消息

> ID：14391666
> 
> 赞同：1
> 
> 时间：2013-01-18T02:47:33.997
> 
> 标签：linux, bash

我有一台新服务器，它会不断为所有用户将以下内容打印到控制台

```
Jan 19 10:25:28 Hostname¿<28>fail2ban.actions: WARNING [ssh] Ban 112.101.174.112 
```

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:49:34.900

我以前见过，它可能来自系统日志文件。

您可以将消息通过管道传输到日志中（对您来说可能是不同的 conf 文件）。

```
#sudo vi /etc/rsyslog.conf 
```

寻找线 

```
*.emerg * 
```

并将其更改为

```
*.emerg /var/log/emerg.log 
```

首字母 * 表示“每个人都会收到紧急消息”。

# javascript - 如何维护对 KnockoutJS 中单击事件的正确执行上下文的引用？

> ID：14391668
> 
> 赞同：3
> 
> 时间：2013-01-18T02:47:50.947
> 
> 标签：javascript, knockout.js, dom-events

这是一个 jsFiddle，它演示了我的问题：http: [//jsfiddle.net/dDEd5/4/](http://jsfiddle.net/dDEd5/4/)

总之，我有一个简单的 ViewModel：

```
ViewModel = function () {}
ViewModel.prototype = {
    child: function () {},
    children: new Array(3),

    outermethod: function () {
        this.innerMethod();
    },

    innerMethod: function () {
        alert("ok!");
    },

    outerProperty: function () {
        return this.innerProperty();
    },

    innerProperty: function() {
        return "Property is OK";
    }
} 
```

我正在尝试使用“单击”绑定来绑定此 ViewModel。问题是当我的绑定使用 $parent 上下文时，我的 ViewModel 中的“this”的值无法解析为 ViewModel。

例如，此绑定工作正常：

```
<div>
    <span data-bind="text: outerProperty()"></span>
    <button data-bind="click: outermethod">This Works</button>
</div> 
```

但是，当我使用另一个绑定上下文并尝试使用 $parent 调用我的 ViewModel 时，事情就崩溃了。在以下两个示例中，属性解析良好；但是，按钮都出错了：

```
<div>
    <!-- ko with: child -->
    <span data-bind="text: $parent.outerProperty()"></span>
    <button data-bind="click: $parent.outermethod">This Doesn't</button>
    <!-- /ko -->
</div> 
```

和

```
<div>
    <!-- ko foreach: children -->
    <span data-bind="text: $parent.outerProperty()"></span> 
        <button data-bind="click: $parent.outermethod">These Don't Either</button>
    <!-- /ko -->
</div> 
```

我已经尽职尽责地试图了解执行上下文在 javascript 中的工作方式以及这些示例失败的原因；但是，我对此不知所措。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T03:29:58.997

当 Knockout 执行处理程序时，它使用在该级别绑定的当前数据作为上下文。因此，当使用类似`$parent`or时`$root`，这可能会导致问题。

有几种处理方法：

-您可以将其绑定到绑定本身中的正确上下文，例如：

```
`click: $parent.outermethod.bind($parent)` 
```

这将返回一个确保`$parent`will be的新函数`this`。

- 你可以在你的视图模型中绑定它。由于您将功能放置在原型上，因此更具挑战性。

一种技术（不使用原型）是使用变量来跟踪正确的值`this`并在函数中引用它，例如：

```
var ViewModel = function() {
  var self = this;

  this.outermethod = function() {
     self.innerMethod();
  };

}; 
```

使用原型，您仍然可以将实现放在原型上，然后在实际实例上创建绑定版本，例如：

```
var ViewModel = function() {
   this.outermethod = this.outermethod.bind(this);
}; 
```

So, this will create a new function on the instance that call the prototype's implementation of the function with the correct context.

# c#-4.0 - Nservicebus全双工部署到开发不工作

> ID：14391683
> 
> 赞同：0
> 
> 时间：2013-01-18T02:49:33.317
> 
> 标签：c#-4.0, windows-services, nservicebus

当我从 Visual Studio 运行全双工示例时，一切正常。因此，我尝试按照 nservicebus 站点上的指南将 Myserver 部署为 Windows 服务。我将客户端作为可执行文件运行，即单击客户端/bin 文件夹中的 nservice host.exe。我收到错误说无法创建队列缺少权限等。我在这里遗漏了什么吗？如何在不使用 Visual Studio 的情况下测试全双工实现...

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T05:11:01.033

如果您使用 msmq，请确保您在其下运行服务的帐户可以访问相关队列（如果它们已经存在）。如果它们不存在，请确保服务帐户有权创建队列。

# ruby - 如何使用 OAuth 2.0 授权 Ruby 中的谷歌预测 API？

> ID：14391685
> 
> 赞同：2
> 
> 时间：2013-01-18T02:49:47.623
> 
> 标签：ruby, api, google-api

我试图简单地向谷歌的托管模型 sample.sentiment 发送一个请求。我无法弄清楚如何通过谷歌使用 Oauth 2.0 进行授权，而且我得到了无数个小时。如果你能提供给我这个代码会很有帮助。这就是我的工作。

```
client = Google::APIClient.new({:application_name => "CCE",:application_version => "1.0"} )
plus = client.discovered_api('prediction')

# Initialize OAuth 2.0 client    
client.authorization.client_id = 'my client id'
client.authorization.client_secret = 'my client secret'
client.authorization.redirect_uri = 'my callback url'

client.authorization.scope = 'https://www.googleapis.com/auth/prediction'

# Request authorization
redirect_uri = client.authorization.authorization_uri

# Wait for authorization code then exchange for token
client.authorization.code = '....'
client.authorization.fetch_access_token!

# Make an API call
 result = client.execute(
   :api_method => plus.activities.list,
   :parameters => {'hostedModelName' => 'sample.sentiment', 'userId' => ''}) 
```

`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T18:53:06.303

好吧，网络上的示例可能有点令人困惑，但是如果您想利用服务器-服务器通信 - 这意味着不涉及最终用户和浏览器，那么以下代码应该适合您：

先决条件：

*   您应该在您的 Google API 控制台中生成一个“服务帐户”密钥。它会提示您下载一个私钥，您应该将其存储在磁盘上的某个位置，例如`client.p12`（或使用原始名称，但为清楚起见，我将使用较短的名称）。

```
client = Google::APIClient.new(
  :application_name => "CCE",
  :application_version => "1.0"
)
prediction = client.discovered_api('prediction', 'v1.5')

key = Google::APIClient::KeyUtils.load_from_pkcs12('client.p12', 'notasecret')

client.authorization = Signet::OAuth2::Client.new(
  :token_credential_uri => 'https://accounts.google.com/o/oauth2/token',
  :audience => 'https://accounts.google.com/o/oauth2/token',
  :scope => 'https://www.googleapis.com/auth/prediction',
  :issuer => '..put here your developer email address from Google API Console..',
  :signing_key => key,
)
client.authorization.fetch_access_token!

# Now you can make the API calls
result = client.execute(... 
```

值得注意的是，`client.discovered_api`调用似乎需要版本号。否则它可能会抛出异常'NotFound'。

密码实际上是字符串' **notasecret** '！

另一件事：在 API 调用中确保调用正确的方法——对于托管模型，我相信你可以调用的唯一方法是`:api_method => prediction.hostedmodels.predict`或类似的方法。我还没有使用托管模型。[*（有关详细信息，请参阅 API 文档）*](https://developers.google.com/prediction/docs/reference/v1.5/hostedmodels/predict)

`result`调用返回的可能有趣的字段`client.execute`是：

```
result.status
result.data['error']['errors'].map{|e| e['message']} # if they exist
JSON.parse(result.body) 
```

如果您检查它们，它们可能会极大地帮助您调试任何问题。

# android - google-api-java-client android 从谷歌日历获取事件

> ID：14391689
> 
> 赞同：0
> 
> 时间：2013-01-18T02:50:29.167
> 
> 标签：android, google-calendar-api, google-api-java-client

我正在尝试在android中访问google日历..我正在使用google java客户端api（gdata api在android中不起作用..尝试了很多..库的一些问题）..我收到的是日历列表，而不是事件。所以我想访问特定日期范围内的事件..说我想检索日期范围 2011 年 3 月 3 日至 2011 年 3 月 5 日之间的所有事件有人能告诉我该怎么做吗？

我在 [http://code.google.com/p/google-api-java-client/source/browse/calendar-v2-atom-android-sample/?repo=samples&r=f1e31c6861e04679c450e36531cf7b3bcc96ed7 ​​4 使用以下示例](http://code.google.com/p/google-api-java-client/source/browse/calendar-v2-atom-android-sample/?repo=samples&r=f1e31c6861e04679c450e36531cf7b3bcc96ed74)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:42:31.707

如果您使用`calendar-android-sample`from `google-api-java-client`，

在这里，他们给出了访问日历的示例。如果要访问事件，则需要`calendar-id`. 为了得到那个，

在您的项目`src`中，您将找到一个名为`CalendarSampleActivity.java`. 这里面有一个方法叫做`refreshView()`. 他们在其中创建了与该帐户关联的日历列表，方法是将数据填充为`calendarInfo.summary`. 您可以通过`calendarInfo.id`.

现在有一个名为`AsyncLoadCalendars.java`. 将其复制到相同的目的地并将其命名为`AsyncLoadEvents.java`. 在那只是更换

```
CalendarList feed = client.calendarList().list().setFields(CalendarInfo.FEED_FIELDS).execute();
model.reset(feed.getItems()); 
```

经过

```
Events events = client.events().list("calendar_id").execute(); //Pass calendar_id as parameter 
```

在这里，您必须获得我们之前获得的通行证`calendar_id`。现在正确调用此方法。您将以 JSON 格式获得所有事件的列表。只需解析它并获取必要的数据。

# node.js - 如何为 fs.readFileSync() 捕获没有文件？

> ID：14391690
> 
> 赞同：166
> 
> 时间：2013-01-18T02:50:31.293
> 
> 标签：node.js, error-handling, try-catch

在 node.js中[readFile()](http://nodejs.org/api/fs.html#fs_fs_readfile_filename_encoding_callback)显示了如何捕获错误，但是没有关于错误处理的[readFileSync()](http://nodejs.org/api/fs.html#fs_fs_readfilesync_filename_encoding)函数的注释。因此，如果我在没有文件的情况下尝试使用 readFileSync() ，则会收到错误消息`Error: ENOENT, no such file or directory`。

如何捕获抛出的异常？doco 没有说明抛出了哪些异常，所以我不知道我需要捕获哪些异常。我应该注意，我不喜欢通用的“捕捉每一个可能的异常”风格的 try/catch 语句。在这种情况下，我希望捕获文件不存在时发生的特定异常，并尝试执行 readFileSync。

请注意，我仅在启动连接尝试之前执行同步功能，因此不需要我不应该使用同步功能的评论:-)

* * *

## 回答 #1

> 赞同：246
> 
> 时间：2013-01-18T04:10:46.810

基本上，`fs.readFileSync`当找不到文件时会引发错误。此错误来自`Error`原型并使用 抛出`throw`，因此捕获的唯一方法是使用`try / catch`块：

```
var fileContents;
try {
  fileContents = fs.readFileSync('foo.bar');
} catch (err) {
  // Here you get the error when the file was not found,
  // but you also get any other error
} 
```

不幸的是，您无法仅通过查看其原型链来检测引发了哪个错误：

```
if (err instanceof Error) 
```

是你能做的最好的，这对于大多数（如果不是全部）错误都是正确的。因此，我建议您使用该`code`物业并检查其价值：

```
if (err.code === 'ENOENT') {
  console.log('File not found!');
} else {
  throw err;
} 
```

这样，您只处理此特定错误并重新抛出所有其他错误。

或者，您也可以访问错误的`message`属性来验证详细的错误消息，在这种情况下是：

```
ENOENT, no such file or directory 'foo.bar' 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-09-27T04:33:55.390

我更喜欢这种处理方式。您可以检查文件是否同步存在：

```
var file = 'info.json';
var content = '';

// Check that the file exists locally
if(!fs.existsSync(file)) {
  console.log("File not found");
}

// The file *does* exist
else {
  // Read the file and do anything you want
  content = fs.readFileSync(file, 'utf-8');
} 
```

> 注意：如果您的程序还删除了文件，则如注释中所述，这具有竞争条件。但是，如果您只写入或覆盖文件而不删除它们，那么这完全没问题。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-01-18T04:06:56.030

您必须捕获错误，然后检查它是什么类型的错误。

```
try {
  var data = fs.readFileSync(...)
} catch (err) {
  // If the type is not what you want, then just throw the error again.
  if (err.code !== 'ENOENT') throw err;

  // Handle a file-not-found error
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-11-28T12:30:36.273

对于这些场景，我使用立即调用的 lambda：

```
const config = (() => {
  try {
    return JSON.parse(fs.readFileSync('config.json'));
  } catch (error) {
    return {};
  }
})(); 
```

`async`版本：

```
const config = await (async () => {
  try {
    return JSON.parse(await fs.readFileAsync('config.json'));
  } catch (error) {
    return {};
  }
})(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-26T08:26:19.547

JavaScript try...catch 机制不能用于拦截异步 API 生成的错误。初学者的一个常见错误是尝试在错误优先回调中使用 throw：

```
// THIS WILL NOT WORK:
const fs = require('fs');

try {
  fs.readFile('/some/file/that/does-not-exist', (err, data) => {
    // Mistaken assumption: throwing here...
    if (err) {
      throw err;
    }
  });
} catch (err) {
  // This will not catch the throw!
  console.error(err);
} 
```

这将不起作用，因为传递给 fs.readFile() 的回调函数是异步调用的。当回调被调用时，周围的代码，包括 try...catch 块，将已经退出。在大多数情况下，在回调中抛出错误会使 Node.js 进程崩溃。如果启用了域，或者使用 process.on('uncaughtException') 注册了处理程序，则可以拦截此类错误。

参考： [https ://nodejs.org/api/errors.html](https://nodejs.org/api/errors.html)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-12-15T03:44:58.373

尝试使用**Async**来避免阻塞 NodeJS 的唯一线程。检查这个例子：

```
const util = require('util');
const fs = require('fs');
const path = require('path');
const readFileAsync = util.promisify(fs.readFile);

const readContentFile = async (filePath) => {
  // Eureka, you are using good code practices here!
  const content = await readFileAsync(path.join(__dirname, filePath), {
    encoding: 'utf8'
  })
  return content;
} 
```

稍后可以将此异步函数与任何其他函数的 try/catch 一起使用：

```
const anyOtherFun = async () => {
  try {
    const fileContent = await readContentFile('my-file.txt');
  } catch (err) {
    // Here you get the error when the file was not found,
    // but you also get any other error
  }
} 
```

快乐编码！

# sql-server - 在类的多个实例之间共享事务或连接

> ID：14391695
> 
> 赞同：1
> 
> 时间：2013-01-18T02:50:42.933
> 
> 标签：sql-server, transactions, connection, data-access-layer, sharing

伙计们，你们一定在想我为什么要这么做……我可能错了，但我正在设计一个系统

它有以下几层

*   数据访问层（处理 sql 事务）
*   数据管理员
*   表示层

数据管理器调用数据访问层进行 sql 事务。表示层中的特定功能调用多个数据管理器来完成它的工作......

如果每个数据管理器为数据访问类创建单独的实例并且它们不共享事务，则表示层的一个函数在多个事务中执行 sql 并且其中一个事务失败，它将回滚并且不会影响另一笔交易。我们不希望这样……我们希望回滚恰好完成该表示层功能的工作的所有事务。

我不知道如何实现...

我的设计不正确吗？有什么建议么 ？？？

我正在使用 SQL Server 2008 和 C# 以及 .Net 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T06:12:15.887

SQL Server 支持嵌套事务，因此您的数据层/管理器可以首先启动事务 [http://msdn.microsoft.com/en-us/library/ms189336(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms189336(v=sql.105).aspx)

# c# - Mongodb c#库异步

> ID：14391697
> 
> 赞同：4
> 
> 时间：2013-01-18T02:50:56.160
> 
> 标签：c#, mongodb, mongodb-.net-driver

我正在使用 ASP.net Web API 和 MongoDB 创建一个简单的服务。

我正在使用官方的 Mongodb C# 库。

我怎样才能使它异步？我认为官方的 Mongodb C# 库不支持异步。

我可以只使控制器异步而不是选择语句吗？

控制器：

```
 public IQueryable<Test> GetAllPlaces()
 {
     return _test.GetAllPlaces().AsQueryable();
 } 
```

从 mongodb 数据库中选择：

```
public IEnumerable<Test> GetAllPlaces()
{
     return _test.FindAll();
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-31T08:47:18.033

有点老问题了，但一个完整的 C# 异步 MongoDB 驱动程序将于 2013 年 11 月推出：

[https://jira.mongodb.org/browse/CSHARP-138](https://jira.mongodb.org/browse/CSHARP-138)

编辑- 正如尤金所说，驱动程序仍在开发中。Github上有一些实验项目，我们等待官方发布

[https://github.com/rstam/mongo-async-csharp-driver](https://github.com/rstam/mongo-async-csharp-driver) [https://github.com/andrebires/mongo-csharp-driver](https://github.com/andrebires/mongo-csharp-driver)

**2015 年 4 月 2 日更新：**

2.0 出来了！：[Nuget Link](http://www.nuget.org/packages/MongoDB.Driver/) 但请注意，异步 GridFS 尚不支持，您需要继续使用[旧包](http://www.nuget.org/packages/mongocsharpdriver/)来使用它，直到他们发布它，可能在[2.1 版中](https://jira.mongodb.org/browse/CSHARP-1191)

（感谢 paqogomez 的提醒）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T12:09:03.823

虽然您可以使其异步，但这样做不会为您带来任何真正的性能提升，因为底层库不是异步的。它还有很多内容，并且[在此处](http://blogs.msdn.com/b/pfxteam/archive/2012/03/24/10287244.aspx)进行了很好的描述。一般的答案是“不”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-06T21:48:33.900

在这里跳上一个旧线程，但在 C# 中仅供参考，您可以让您的查询`SafeMode.False`作为参数运行（我相信它实际上是默认关闭的），这将以火和忘记的方式执行它们。

我的大部分东西的代码如下所示：

```
IMongoQuery query = Query.EQ("_id", Path);
IMongoUpdate update = Update.Set("Key", "value"); 
SafeModeResult oCmd = mCollection.Update(query, update, SafeMode.True); 
```

因为我需要安全模式。但是，如果您将其设置为 false 或忽略该参数，您就会着火并忘记功能。

# android - Robolectric：Android 中的 SAXParser 与 Java 中的 SAXParser（robolectric）：localname 与 qname 的区别

> ID：14391698
> 
> 赞同：2
> 
> 时间：2013-01-18T02:51:04.327
> 
> 标签：android, unit-testing, robolectric, android-parser

我曾经使用 Android 单元测试运行单元测试，但使用 Robolectric 切换到 Java 单元测试。我注意到使用 SaxParser DefaultHandler 的不同之处。基本上，Android sax 解析器会填充“localName”，但是当使用 Java VM 在 Robolectric 下运行时，localName 为空，并且 qname 似乎包含我应该使用的值。

这也是我引用的方法：

> 导入 org.xml.sax.helpers.DefaultHandler；

```
public abstract class BaseParser extends DefaultHandler
{   
    @Override
    public abstract void startElement(String uri, String localName, String qName, Attributes attributes);
} 
```

其他人注意到这种奇怪的现象或可以解决它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-02T10:38:22.670

解析 xml 时，尝试将 SAXParserFactory 设置为可识别名称空间。

```
SAXParserFactory spf = SAXParserFactory.newInstance();
spf.setNamespaceAware(true); 
```

在使用 Robolectric 运行单元测试时，添加此标志对我来说效果很好。

# c - 使用 C 并尝试创建一个疯狂的库。

> ID：14391701
> 
> 赞同：1
> 
> 时间：2013-01-18T02:51:25.647
> 
> 标签：c

正如我的标题所说，我是一名学习 C 的新程序员。这是我的第二天编程，我需要帮助在我的代码中解决这个问题。我正在制作一个疯狂的库，虽然没有出现错误，但第一个 scanf 需要 2 行，而不是其他所有 scanf 使用的 1 行。

这是代码：

```
#include <stdio.h>

int main()
{
    char verb[20];
    char loc[20];
    char noun1[20];
    char noun2[20];
    char adj[20];

/* The following is the part where you input words. It sets them as strings (named word1-5, as stated above)*/

    printf("Welcome to Mad Libs! \nAnswers can only be one word long. \nPlease enter a verb.\n");
    scanf("%s\n",verb);

    printf("Now enter a location!\n");
    scanf("%s\n",loc);

    printf("Now enter a noun!\n");
    scanf("%s\n",noun1);

    printf("Now enter another noun!\n");
    scanf("%s\n",noun2);

    printf("Now please enter an adjective!\n");
    scanf("%s\n",adj);

/* It all comes together here. The code is supposed to take the strings set previously and put them into this story. */
/* The dashes and various /n's are there to make the final Mad Lib easier to read */    

    printf("\n\nHere is your Mad Lib:\n------------------------------ \nHolly %s down to the %s.\nOnce she got there she bought some %s and ate it!\nAfterwards, Holly brought it home and let her %s eat it.\nHolly is a %s girl!\n------------------------------ \n",verb,loc,noun1,noun2,adj);
return 0;
} 
```

它是在 Ubuntu 上使用 Vi 和 Sublime Text 2 的组合制作的。

就像我说的，编译时我没有收到任何错误，而且一切似乎都井井有条，问题是一旦我在终端中运行它，我必须输入第一个答案（回答“欢迎来到 Mad Libs！答案可以只有一个词长。请输入一个动词。”）两次，都需要。

如果您对我的意思感到困惑，请尝试自己运行它（它应该在 OS X 和 Linux 中作为 .c 文件运行），老实说，我不知道如何很好地描述该错误。它让我输入第一个答案两次，并在显示最终的疯狂库时引起问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T02:54:52.403

只是使用`scanf("%s", ...)`，不是`scanf("%s\n")`。`\n`直到后来才到达那里。（哦，顺便说一下，这也是获得缓冲区溢出的好方法，所以你可以考虑使用`fgets`, 等。）

它现在的工作方式是：

1.  您键入一行并按`Enter`。`scanf`得到线路，但没有`\n`，所以它仍在等待。
2.  您键入下一行并按`Enter`。`scanf`现在`\n`在上一行的末尾有 并使用该字符串。第一行已读取，第二行现在在缓冲区中，`scanf`正在等待另一个`\n`已经存在的行。
3.  转到 2

这具有将所有答案移动一个的效果。

# node.js - Node.js 更改 http-proxy 请求的路径名

> ID：14391702
> 
> 赞同：0
> 
> 时间：2013-01-18T02:51:50.947
> 
> 标签：node.js, http-proxy

我正在使用 RoutingProxy 类（在 http-proxy 包中找到）来代理我的节点应用程序中的某些请求。但是，我在向目标路径添加前缀时遇到了困难。例如，我正在尝试代理`http://localhost:8080/stylesheets/main.css`到`http://172.30.6.11:51161/mysite/stylesheets/main.css`.

这是我正在尝试做的一个愚蠢的例子：

```
// controllers/proxy.js
var httpProxy = require('http-proxy');

exports.request = function(options){
  var proxy = new httpProxy.RoutingProxy();

  return function(req, res){
    req.url = '/mysite' + req.url;
    proxy.proxyRequest(req, res, options);
  };
};

// app.js
// ...
var controllers = require('./controllers');
app.use(controllers.proxy.request({
  target: {
    host: '172.30.6.11',
    port: 55161
  }
});
// ... 
```

不幸的是，调用目标时从未添加前缀。有没有人知道我如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T05:44:41.100

通常我们不使用`http-proxy`with `express`，而是使用 with `http.createServer`。[但这是此问题](https://github.com/nodejitsu/node-http-proxy/issues/180)的以下评论中的解决方法

# c++ - 什么是 SCARY 迭代器？

> ID：14391705
> 
> 赞同：32
> 
> 时间：2013-01-18T02:52:19.357
> 
> 标签：c++, c++11

当我谈到 SCARY 迭代器主题时，我正在阅读有关 VC11 的 C++11 特性的[VC11 博客。](https://web.archive.org/web/20140215050025/http://blogs.msdn.com/b/vcblog/archive/2012/04/06/10291485.aspx)

**什么是 SCARY 迭代器，这对我的 C++ 编码体验有何影响？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T02:58:19.497

如果您正在*使用*它们，则无需害怕……只需忽略它们的可怕性。

如果您正在*制作*它们，这意味着您必须使您的迭代器独立于容器的分配器类型，以及不影响迭代器的容器的其他通用参数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-18T02:58:06.473

来自链接的 PDF，位于[http://www.open-std.org/jtc1/sc22/WG21/docs/papers/2009/n2911.pdf](http://www.open-std.org/jtc1/sc22/WG21/docs/papers/2009/n2911.pdf)

首字母缩略词 SCARY 描述了看似错误的赋值和初始化（出现受冲突的泛型参数约束），但实际上使用正确的实现（由于最小化的依赖关系而不受冲突约束）。

# c++ - 如何将位从一个变量复制到另一个变量？

> ID：14391707
> 
> 赞同：8
> 
> 时间：2013-01-18T02:52:36.737
> 
> 标签：c++, c, variables, copy, bit-manipulation

假设我有这个`int`变量`v1`：

```
1100 1010 
```

而这个变量`int v2`：

```
1001 1110 
```

我需要将最后四位复制到最后`v2`四位，`v1`以便结果是：

```
1100 1110
^    ^ last four bits of v2
|
| first four bits of v1 
```

我将如何在 C 或 C++ 中执行此操作？我阅读了几篇有关按位运算的文章，但找不到任何有关此的信息。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-18T02:54:13.767

按位运算是要寻找的正确事物。

```
v1 = (v1 & ~0xf) | (v2 & 0xf); 
```

从您阅读的文章中，您是否有不明白的具体内容？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-18T02:53:46.433

怎么样

```
v1 = (v1 & 0xf0) | (v2 & 0xf); 
```

如果“v1”的值有更多位，你会想要使用更大的掩码：

```
v1 = (v1 & 0xfffffff0) | (v2 & 0xf); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T07:34:46.527

在我看来，最易读的写法是：

```
v1 &= ~0x0F;       // clear least sig. nibble of v1
v1 |= v2 & 0x0F;   // copy least sig. nibble of v2 into v1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-18T02:55:59.240

尝试：

```
v1 = (v2 & 0x0F) | (v1 & 0xF0); 
```

# javascript - clearTimeout 不适用于数据

> ID：14391712
> 
> 赞同：0
> 
> 时间：2013-01-18T02:53:51.317
> 
> 标签：javascript, jquery, settimeout

setTimeout 有效，但 clearTimeout 是错误的。pn267 是 Navi-Div，而 uk267 是 Navi-Div 的第一个级别。但是在一个额外的分区中。

```
 var myTimer;
 $('.pn267').hover(function() {
$('.uk267').animate({ opacity : 'show', height :  'show'}, 'fast');
 });
 $('.pn267').mouseout(function() {
  $(this).data('myTimer', setTimeout('$(".uk267").hide()', 500));
 });

 $('.uk267').hover(function() {
  myTimer = $(this).data('myTimer');
  clearTimeout('myTimer');
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:56:28.447

尝试摆脱引号：`clearTimeout(myTimer);`

您正在传递一个字符串。您需要传递与超时本身关联的变量。

我也没有理由使用`$().data`. 只需使用`myTimer = setTimeout(function(){$(".uk267").hide();}, 500);`.

# ruby-on-rails - 看不懂这段文字在说什么

> ID：14391717
> 
> 赞同：0
> 
> 时间：2013-01-18T02:54:22.613
> 
> 标签：ruby-on-rails

我正在关注教程并达到这一点：[http ://rubysource.com/building-your-first-rails-application-views-and-controllers/](http://rubysource.com/building-your-first-rails-application-views-and-controllers/)

```
rails generate controller urls new 
```

> 我们只传入 new 动作（而不是 new、create 和 show）的原因是因为 Rails 会自动为生成器调用中包含的每个动作生成一个虚拟视图。在这种情况下，我们只需要新操作的虚拟视图，因此我们排除了其他操作。

那么为什么我们只需要为 new 创建控制器呢？有人可以更详细地解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:56:13.843

这只会在控制器中创建新动作，并且应该跳过其他动作。

编辑：它将在 app/controllers 中生成一个名为 UrlsController 的控制器，并且在该控制器中只有一个名为 action 的方法，它对应于名为*urls/new的路由或 url*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T03:13:41.590

该命令用于创建`UrlsController`只有一种方法：`new`.

此命令还将自动为您创建一个视图文件：

```
app/views/urls/new.html.erb 
```

您是否提供了更多参数，例如：

```
rails generate controller urls new create show 
```

你会得到：

```
app/views/urls/new.html.erb
app/views/urls/create.html.erb
app/views/urls/show.html.erb 
```

由于本教程只需要`new`视图，因此没有必要创建额外的视图，因此这些额外的参数没有添加到`generate`命令中。

在本教程的后面部分，您手动添加`create`和`show`方法，但您从不为这些方法添加视图（因为这些方法在此应用程序中不需要特定的视图文件）。

所以：您所做的是`UrlsController`使用一种方法创建控制器`new`，以及该方法的相应视图。您将在本教程后面手动编码的其余方法，因此无需自动生成其他任何内容（`create`或`show`）。

# html - Zurb Foundation 宝石破碎导航

> ID：14391724
> 
> 赞同：0
> 
> 时间：2013-01-18T02:55:41.893
> 
> 标签：html, ruby-on-rails-3, sass, zurb-foundation

我通常在我的项目中使用 Twitter Bootstrap Rails gem，但是我想我会试试 Zurb Foundation gem。我已严格按照安装[说明](https://github.com/zurb/foundation-rails#readme)进行操作。当我添加导航时：

```
<div class="row">
 <div class="three columns">
    <h1><img src="http://placehold.it/400x100&text=Logo" /></h1>
  </div>
  <div class="nine columns">
    <ul class="nav-bar right">
      <li><a href="#">About</a></li>
      <li><a href="#">Work</a></li>
      <li><a href="#">Contact</a></li>
    </ul>
  </div>
</div> 
```

我得到以下信息：

![屏幕截图损坏的导航](../Images/50ee524dc1565ad8cb9161ee5cc573cf.png)

请注意，徽标占位符未与右侧的导航对齐，并且导航链接上没有灰色渐变。

我的 application.html.erb 看起来像这样：

```
<!DOCTYPE html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7 ]> <html class="ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8" />

    <!-- Uncomment to make IE8 render like IE7 -->
    <!-- <meta http-equiv="X-UA-Compatible" content="IE=7" /> -->

    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title><%= content_for?(:title) ? yield(:title) :  CONFIG['title'] %></title>

    <!-- Included CSS Files -->
    <%= stylesheet_link_tag    "application" %>

  <%= csrf_meta_tags %>
</head>
<body>

  <%= render 'layouts/navigation' %>

  <div class="container">
    <%= yield %>
  </div>

  <!-- Included JS Files  -->
  <%= javascript_include_tag "application" %>

  <% if CONFIG['google_analytics_id'] %>
    <!-- Google Analytics -->
    <script>
      var _gaq=[['_setAccount','<%= CONFIG['google_analytics_id'] %>'],['_trackPageview']];
      (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
      g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
      s.parentNode.insertBefore(g,s)}(document,'script'));
    </script>
  <% end %>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:43:49.373

我通过更新 Zurb Foundation gem 并参考[文档](http://foundation.zurb.com/docs/rails.php)解决了这个问题。我使用的是 Zurb 2.X 而不是 3.X。

gem 文件应包括：

```
gem 'compass-rails'
gem 'zurb-foundation', '~> 3.2.4' 
```

application.scss 现在应该有：

```
@import "foundation"; 
```

代替：

```
*= require "foundation" 
```

# c# - 如何将枚举值序列化为字符串？

> ID：14391725
> 
> 赞同：2
> 
> 时间：2013-01-18T02:55:47.913
> 
> 标签：c#, json, asp.net-mvc-3, serialization

我正在使用 .net 的 JavaScriptSerializer，当序列化一个对象时，枚举被序列化为它们的 int 值而不是它们的字符串名称，这违背了枚举的目的。如何让它将所有枚举序列化为它们的字符串名称？我可以使用内置的序列化程序完成此操作，还是应该使用更好的序列化程序？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T03:03:12.080

Newtonsoft 的 JsonNet 序列化器具有内置枚举转换器的此功能。

在这里下载：http: [//json.codeplex.com/](http://json.codeplex.com/)

`using Newtonsoft.Json;`

`using Newtonsoft.Json.Converters;`

```
var objToSerialize = new Object();

var settings = new JsonSerializerSettings();
settings.Converters.Add(new StringEnumConverter());

var serializer = JsonSerializer.Create(settings);

var sb = new StringBuilder();
using (var sw = new StringWriter(sb))
{
    serializer.Serialize(sw, objToSerialize);
}

string json = sb.ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T03:03:06.650

一种方法是使用 EnumMemberAttribute 属性的 Value 属性，如下面的 MSDN 示例。

```
[DataContract(Name = "CarCondition")]
public enum CarConditionWithDifferentNames
{
    [EnumMember(Value = "New")]
    BrandNew,
    [EnumMember(Value = "Used")]
    PreviouslyOwned,
    [EnumMember]
    Rental
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-05T09:16:42.190

正如在许多其他帖子中看到的那样，.NET JsonSerializer 或 DataContractJsonSerializer 不尊重 EnumMember 属性，而是为枚举的不同成员使用数值。

因此，编写自己的自定义序列化程序或使用一些 3rd 方库是前进的方向。

# c++ - C++ 如何在内存中指定一个位置来获取数据？

> ID：14391733
> 
> 赞同：3
> 
> 时间：2013-01-18T02:04:34.887
> 
> 标签：c++, memory, pointers

我对 C++ 很陌生，所以如果我遗漏了一些非常明显的东西，我深表歉意。我正在阅读关于 C++ 的教程，其中讨论了指针等。

在本教程中，给出了以下示例：

```
 andy = 25;
    ted = &andy;
    beth = *ted; 
```

我注意到 beth 真的和 &andy 一样。所以我将代码修改为：

```
 andy = 25;
    beth = *(&andy); 
```

当我打印出 &andy 时，它给了我 andy 所指的内存位置。每次执行代码时，我都会得到一个特定的内存位置：0x28ff18

即使我更改了变量的名称，内存位置（这是我假设的）也不会改变。根据教程，内存位置由操作系统自动分配。我可以在代码中更改什么来更改 andy 所在的内存位置？

但是，我的主要问题如下：我试图用 &andy 替换代码中的内存位置，方法是将其更改为。

```
 andy = 25;
    beth = *(0x28ff18); 
```

我这样做是假设 beth 将保持 25 的值，这是在内存位置 0x28ff18 中挥之不去的最后一个值。

但是，当我尝试运行此代码时出现错误。

我还尝试将 0x28ff18 设置为字符串、字符和整数，但在任何情况下都没有 beth = *(thatVariable); 工作。

如果我解释得不够清楚，我很抱歉，但我想知道是否有办法完成我想做的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T02:18:00.907

> 即使我更改了变量的名称，内存位置（这是我假设的）也不会改变。

事物的名称是编译时工件。编译器完成后，变量是否被调用`andy`、`dummy`或`x10001909230492830492834`¹都没有关系。

> 我可以在代码中更改什么来更改 andy 所在的内存位置？

在它前面添加更多变量。这不能保证有效，因为系统可以将您的变量放在任何逻辑地址，但它有很大的机会使您的变量移动。

> 但是，当我尝试运行此代码时出现错误（[取消引用固定地址]）。

您需要转换`0x28ff18`为指针，如下所示：((int*)0x28ff18)。这将编译，但它可能不起作用。通常，硬编码固定地址是危险的，除非您通过放置在固定地址的寄存器访问内存映射硬件。

* * *

¹调试除外。即便如此，您最关心该变量的名称。

# csv - awk 设置数组中的元素

> ID：14391738
> 
> 赞同：1
> 
> 时间：2013-01-18T02:56:51.130
> 
> 标签：csv, if-statement, awk, case, nawk

我有一个大的 .csv 文件要处理，我的元素是这样随机排列的：

xxxxxx,xx, **`MLOCAL`**, *`MREMOTE`*, **`33222`**, *`56`*, **`22/10/2012`**, *`18/10/2012`* xxxxxx,xx, *`MREMOTE`*, **`MLOCAL`**, *`33222`*, **`56`**, *`22/10/2012`*, **`18/10/2012`** xxxxxx,xx, **`MLOCAL`**, `341993`, xxxxxx,xx, *,* *,* xxxxxx,xx, , , , , , xxxxxx,xx, , , , , , xxxxxx, xx, , ,**`22/10/2012`**
*`MREMOTE``9356828``08/10/2012`*
**`LOCAL`***`REMOTE`***`19316`***`15253`***`22/10/2012`***`22/10/2012`*
*`REMOTE`***`LOCAL`***`1865871`***`383666`***`22/10/2012`***`22/10/2012`**
`REMOTE``1180306134``19/10/2012`

其中字段**`LOCAL`**、、*`REMOTE`*或显示如下：**`MLOCAL`***`MREMOTE`*

1.  当它们成对显示时 ( **LOCAL** / *REMOTE* ) 如果**第 3 个**字段是`MLOCAL`，*第 4 个*字段是*`MREMOTE`*，则**第 5**和**第 7 个**字段表示 的值和日期**`MLOCAL`**，*第 6*和*第 8 个*表示的值和日期*`MREMOTE`*
2.  当它们显示为单个（仅**`LOCAL`**或仅*`REMOTE`*）时，第 4 和第 5 个字段表示字段 3 的值和日期。

现在，我使用以下方法拆分了这些行：

```
nawk 'BEGIN{

while (getline < "'"$filedata"'")
split($0,ft,",");
name=ft[1];
ID=ft[2]
 ?=ft[3]
 ?=ft[4]
.................... 
```

但是因为我找不到第 3 和第 4 个字段的模式，所以我非常坚持继续为每个数组元素分配 var 名称，以便将它们用于进一步处理。

现在，我尝试使用“case”语句，但不适用于 awk 或 nawk（仅在 gawk 中按预期工作）。我也试过这个：

```
if ( ft[3] == "MLOCAL" && ft[4]!= "MREMOTE" )
{
        MLOCAL=ft[3];
        MLOCAL_qty=ft[4];
        MLOCAL_TIMESTAMP=ft[5];
}
else if ( ft[3] == MLOCAL && ft[4] == MREMOTE )
{
        MLOCAL=ft[3];
        MREMOTE=ft[4];
        MOCAL_qty=ft[5];
        MREMOTE_qty=ft[6];
        MOCAL_TIMESTAMP=ft[7];
        MREMOTE_TIMESTAMP=ft[8];
}
else if ( ft[3] == MREMOTE && ft[4] != MOCAL )
{
        MREMOTE=ft[3];
        MREMOTE_qty=ft[4];
        MREMOTE_TIMESTAMP=ft[5];
.......................................... 
```

但它也不能正常工作。

所以，如果你知道如何处理这个问题，我会很感激给我一个提示，以便能够找到一种模式，以便从上面涵盖所有可能的情况。

**编辑**

我不知道如何感谢您提供的所有帮助。现在，我要做的比我上面写的更复杂，我会尽量简单地描述，否则我会让你们很困惑。我的输出应该如下所示：

`NAME`, `UNIQUE_ID`, `VOLUME_ALOCATED`, `MLOCAL_VALUE`, `MLOCAL_TIMESTMP`, `MLOCAL_limit`, `LOCAL_VALUE`, `LOCAL_TIMESTAMP`, `LOCAL_limit`, `MREMOTE_VALUE`, `MREMOTE_TIMESTAMP`, `REMOTE_VALUE`,`REMOTE_TIMESTAMP`

（其中`MLOCAL_limit`and是and or`LOCAL_limit`之间的减法结果）`VOLUME_ALOCATED``MLOCAL_VALUE``LOCAL_VALUE`

因此，在我的输出文件中，字段位置应排列如下： **第 4 个字段**= `MLOCAL_VALUE`、**第 5 个字段**= `MLOCAL_TIMESTMP`、**第 7 个字段**= `LOCAL_VALUE`、 **第 8 个字段**= `LOCAL_TIMESTAMP`、**第 10 个字段**= `MREMOTE_VALUE`、**第 11 个字段**= `MREMOTE_TIMESTAMP`、**第 12 个字段**= `REMOTE_VALUE`、**第 13 个字段**=`REMOTE_TIMESTAMP`

现在，一个例子是这样的：对于以下输入：`name`, `ID`, `VOLUME_ALLOCATED`, `MLOCAL`, `MREMOTE`, `33222`, `56`, `22/10/2012`,`18/10/2012`

`name`, `ID`, `VOLUME_ALLOCATED`, `REMOTE`, `234455`,`19/12/2012`

我应该处理这一行，输出应该是这样的：

`name`, `ID`, `VOLUME_ALLOCATED`, **`33222`**, `22/10/2012`, `MLOCAL_LIMIT`, `, `, `, *`56`*, `18/10/2012`, `,````

 ````7th`, `8th`, `9th`, `12th`, 和`13th`字段为空，因为没有与以下内容相关的信息：`LOCAL_VALUE`, `LOCAL_TIMESTAMP`, `LOCAL_limit`, `REMOTE_VALUE`, 和`REMOTE_TIMESTAMP`

**或者**

`name`, `ID`, `VOLUME_ALLOCATED`, `, `, `, `, `, `, `, `, `234455`,`9/12/2012`````````

 ```4th`, `5th`, `6th`, `7th`, `8th`, `9th`,`10th`和 , `11th`, 字段应该是空值，因为没有关于：`MLOCAL_VALUE`, `MLOCAL_TIMESTAMP`, `MLOCAL_LIMIT`, `LOCAL_VALUE`, `LOCAL_TIMESTAMP`, `LOCAL_LIMIT`, `MREMOTE_VALUE`, 的信息`MREMOTE_TIMESTAMP`

`VOLUME_ALLOCATED``ID`根据之前在脚本中处理的字段从其他 csv 文件（称为“info.csv”）中检索，例如：

信息.csv

`VOLUME_ALLOCATED`, `ID`, `CLIENT` `5242881`, `64`, `subscriber` `567743`, `24`,`visitor`

数据.csv

`NAME`, `64`, `MLOCAL`, `341993`, `23/10/2012` `NAME`, `24`, `LOCAL`$ `REMOTE`, `2347`$ `4324`, `19/12/2012`$`18/12/2012`

现在，我的代码是这样的：

```
 #! /usr/bin/bash

input="info.csv"
filedata="data.csv"
outfile="out"

nawk 'BEGIN{
while (getline < "'"$input"'")
{
split($0,ft,",");
volume=ft[1];
id=ft[2];
client=ft[3];

key=id;
volumeArr[key]=volume;
clientArr[key]=client;
}
close("'"$input"'");

while (getline < "'"$filedata"'")
{
gsub(/\$/,","); # substitute the $ separator with comma
split($0,ft,",");
volume=volumeArr[id]; # Get the volume from the volumeArr, using "id" as key
segment=clientArr[id]; # Get the client mode from the clientArr, using "id" as key
NAME=ft[1];
id=ft[2]; 
```

> 在这里我被卡住了，我找不到设置其余字段的正确方法，因为我不知道如何处理第 3 和第 4 字段。

```
? =ft[3];
? =ft[4]; 
```

对不起，如果我让你很困惑，但这是我现在的情况。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T06:17:36.493

您没有从示例输入中提供预期的输出，但这里开始展示如何获取 2 种不同格式的输入行的值：

```
$ cat tst.awk
BEGIN{ FS=","; OFS="\t" }
{
   delete value       # or use split("",value) if your awk cant delete arrays
   if ($4 ~ /LOCAL|REMOTE/) {
      value[$3] = $5
      date[$3]  = $7
      value[$4] = $6
      date[$4]  = $8
   }
   else {
      value[$3] = $4
      date[$3]  = $5
   }

   print
   for (type in value) {
      printf "%15s%15s%15s\n", type, value[type], date[type]
   }
}
$ awk -f tst.awk file
xxxxxx,xx,MLOCAL,MREMOTE,33222,56,22/10/2012,18/10/2012
        MREMOTE             56     18/10/2012
         MLOCAL          33222     22/10/2012
xxxxxx,xx,MREMOTE,MLOCAL,33222,56,22/10/2012,18/10/2012
        MREMOTE          33222     22/10/2012
         MLOCAL             56     18/10/2012
xxxxxx,xx,MLOCAL,*341993,22/10/2012*
         MLOCAL        *341993    22/10/2012*
xxxxxx,xx,MREMOTE,9356828,08/10/2012
        MREMOTE        9356828     08/10/2012
xxxxxx,xx,LOCAL,REMOTE,19316,15253,22/10/2012,22/10/2012
         REMOTE          15253     22/10/2012
          LOCAL          19316     22/10/2012
xxxxxx,xx,REMOTE,LOCAL,1865871,383666,22/10/2012,22/10/2012
         REMOTE        1865871     22/10/2012
          LOCAL         383666     22/10/2012
xxxxxx,xx,REMOTE,1180306134,19/10/2012
         REMOTE     1180306134     19/10/2012 
```

如果您发布预期的输出，我们可以为您提供更多帮助。`````

# java - MySQLConnection - “此行有多个标记”的 authenticateUser 错误

> ID：14391739
> 
> 赞同：0
> 
> 时间：2013-01-18T02:56:54.780
> 
> 标签：java, mysql, eclipse, gwt

我正在尝试在 Eclipse 中创建我的第一个 MySQLConnection，但在 authenticateUser 上出现“此行有多个标记 - 返回类型与 DBConnection.authenticateUser(String, String) 不兼容”的错误

我理解这意味着“存在不止一个错误……但我无法解决问题……”。

我使用[http://altair.cs.oswego.edu/~tenberge/tenbergen.org/misc/DB-Access-in-GWT-The-Missing-Tutorial.pdf](http://altair.cs.oswego.edu/~tenberge/tenbergen.org/misc/DB-Access-in-GWT-The-Missing-Tutorial.pdf)作为我的指南。

这是我的代码：

```
AwardTracker.gwt.xml

<module>
<inherits name="com.google.gwt.user.User"/>
<inherits name="com.google.gwt.user.theme.standard.Standard"/>
<entry-point class="org.AwardTracker.client.AwardTracker"/>

<!--  servelet context - path is arbitrary, but must match up with the rpc init inside java class -->
<!--  Tomcat will listen for this from the server and waits for rpc request in this context -->
<servelet class="org.AwardTracker.server.MySQLConnection" 
    path="/MySQLConnection" />
    <inherits name="com.google.gwt.user.theme.standard.Standard"/>
    <inherits name="com.google.gwt.user.theme.chrome.Chrome"/>
    <inherits name="com.google.gwt.user.theme.dark.Dark"/> 
```

```
User.java

package org.AwardTracker.client;

import com.google.gwt.user.client.rpc.IsSerializable;

public class User implements IsSerializable {
@SuppressWarnings("unused")
private String username;
@SuppressWarnings("unused")
private String password;
@SuppressWarnings("unused")
private User() {
    //just here because GWT wants it.
}
public User(String username, String password) {
    this.username = username;
    this.password = password;
}

}

MySQLConnection.java

package org.AwardTracker.server;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Vector;
import com.google.gwt.user.server.rpc.RemoteServiceServlet;

import org.AwardTracker.client.DBConnection;
import org.AwardTracker.client.User;

public class MySQLConnection extends RemoteServiceServlet implements DBConnection {
private Connection conn = null;
private String status;
private String url = "jbdc:mysql://localhost/awardtracker";
private String user = "DBuser";
private String pass = "DBpass";
public MySQLConnection() {
    try {
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        conn = DriverManager.getConnection(url, user, pass);
    } catch (Exception e) {
        //NEVER catch exceptions like this
    }
}

public int authenticateUser(String user, String pass) {
    User user;
    try {
        PreparedStatement ps = conn.prepareStatement(
            "select readonly * from users where username = \"" + user  + "\" AND " + "password = \"" + pass + "\"");
            ResultSet result = ps.executeQuery();
            while (result.next()) {
                user = new User(result.getString(1), result.getString(2));
            }
            result.close();
            ps.close();
        } catch (SQLException sqle) {
            //do stuff on fail
        }
        return user;
}

} 
```

任何帮助将不胜感激。

问候，

格林

嗨 BenvynQ，

谢谢你的帮助。只是表明这些教程并不完美。我进行了此更改，现在在 authenticateUser 中出现错误：

```
while (result.next()) {
user = new User(result.getString(1), result.getString(2));
} 
```

“构造函数 User(String, String) 未定义”。

谢谢，

格林

嗨，贝文克，

非常感谢您的帮助。我认为缺少一些“}”，因此我进行了如下修改。

此外，您说“用户用户 = null；// 必要的，除非您在异常处理程序中执行某些操作”。我对此的印象是，我们试图找出用户是否在表中，如果不在则返回异常（即验证用户名和密码）。因此，返回需要是确认，因此我们正在使用 exveption 处理程序做一些事情。我显然错过了一些东西；那么我们怎么知道用户已经登录成功呢？

此外，Eclipse 似乎对包的混合大小写没有问题，因为我正在分阶段执行此操作，并且所有人都已准备好添加它。

问候，

格林

```
package org.AwardTracker.server;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Vector;
import com.google.gwt.user.server.rpc.RemoteServiceServlet;

import org.AwardTracker.client.DBConnection;
import org.AwardTracker.client.User;

public class MySQLConnection extends RemoteServiceServlet implements DBConnection {
    private Connection conn = null;
private String status;
private String url = "jbdc:mysql://localhost/awardtracker";
private String user = "DBuser";
private String pass = "DBpass";
public MySQLConnection() {
    try {
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        conn = DriverManager.getConnection(url, user, pass);
    } catch (Exception e) {
        //NEVER catch exceptions like this
    }
}

public User authenticateUser(String userName, String pass) {
    User user = null; // necessary unless you do something in the exception handler
    ResultSet result = null;
    PreparedStatement ps = null;
    try {
      ps = conn.prepareStatement(
          "select readonly * from users where username = \"" + userName  + "\" AND "    + "password = \"" + pass + "\"");
      result = ps.executeQuery();
      while (result.next()) {
         user = new User(result.getString(1), result.getString(2));
      }
    } 
    catch (SQLException sqle) {
      //do stuff on fail
    }
    finally {
        if (result != null) {
            try {
                result.close();
            }
            catch (SQLException e) {
                e.printStackTrace();
            }
        }
        if (ps != null) {
            try {
                ps.close();
            }   
            catch (SQLException e) {
                e.printStackTrace();
            }
        }
    }
return user;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T03:09:59.677

你已经定义了方法

```
public int authenticateUser(String user, String pass) { 
```

但是您要返回的对象是

```
User user; 
```

阅读教程看起来你应该已经声明了方法

```
public User authenticateUser(String userName, String pass) {
    User user = null; // necessary unless you do something in the exception handler
    ResultSet result = null;
    PreparedStatement ps = null;
    try {
      ps = conn.prepareStatement(
          "select readonly * from users where username = \"" + userName  + "\" AND " + "password = \"" + pass + "\"");
      result = ps.executeQuery();
      while (result.next()) {
         user = new User(result.getString(1), result.getString(2));
      }
    } catch (SQLException sqle) {
      //do stuff on fail
    }finally{
        if (result != null) {
            try {
                result.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
        if (ps != null) {
            try {
                ps.close();
            } catch (SQLException e) {
                e.printStackTrace();
        }
    }
return user; 
```

# cakephp-2.0 - cakephp2 如何调用当前助手的另一个助手？

> ID：14391741
> 
> 赞同：1
> 
> 时间：2013-01-18T02:57:11.383
> 
> 标签：cakephp-2.0

我创建了助手名称 TicketHelper（有 TicketsController）、CommonHelper（无控制器）和 ExcelHelper（无控制器）。在 TicketHelper 内部，调用 CommonHelper 的任何函数时都可以正常工作。这里以 TicketHelper 为例：

```
<?php
    class TicketHelper extends AppHelper {
    public $helpers = array('Session','Common');
    public function myFunction(){

        echo $this->Common->workfine();
    }
?> 
```

通过我将 CommonHelper 调用到 ExcelHelper 的相同操作，它会产生错误：致命错误：调用非对象上的成员函数 workfine()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:26:00.103

经过几个小时的检查，我发现构造函数有错误问题

```
<?php
   class TicketHelper extends AppHelper {
   public $helpers = array('Session','Common');
   public function myFunction(){
    echo $this->Common->workfine();
   }

   //Here my problem constructor Note: function name and class name are the same 
   function TicketHelper (){
          //My code here
   }

   /**
    * It should be follow cakephp doc
    * function __construct($id = false, $table = null, $ds = null) {
    *        parent::__construct($id, $table, $ds);
    *       
    *  }
    *
    */ 
```

?>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:42:53.360

您不应该在控制器中使用助手。帮助器用于视图中的逻辑。它包含在控制器中，但可以在视图中访问。对于控制器之间共享的逻辑，请使用组件而不是[http://book.cakephp.org/2.0/en/controllers/components.html#creating-a-component](http://book.cakephp.org/2.0/en/controllers/components.html#creating-a-component)。

如果您仍想在控制器中使用助手（不推荐）：

```
$view = new View($this);
$myHelper = $view->loadHelper('MyHelper'); 
```

# audio - 如何以编程方式在 SuperCollider 中停止声音播放

> ID：14391742
> 
> 赞同：3
> 
> 时间：2013-01-18T02:57:17.677
> 
> 标签：audio, supercollider

我有以下一段代码，它应该播放合成器功能一秒钟，停止它，一秒钟后再次播放，依此类推：

```
 t = Task({{
    var a;
    a =  {[0,0,SinOsc.ar(852, 0, 2.2)+SinOsc.ar(1633, 0, 2.2), 0]} ;
    a.play;
    1.wait;
    a.release(5);
    1.wait;
   }.loop});

   t.play; 
```

问题是，a 并没有停止播放，而是在服务器上启动了额外的 a。这里出了什么问题，如何停止正在播放的合成器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T11:46:45.810

在该代码中， a 是一个函数，因此 a.release 不会告诉合成器停止播放。

相反，为什么不写一个带有 5 秒单独信封的 SynthDef：

```
SynthDef(\sines, {arg out = 0, release_dur, gate =1, amp = 0.2;
    var sines, env;
    env = EnvGen.kr(Env.asr(0.01, amp, release_dur), gate, doneAction:2);
    sines = SinOsc.ar(852, 0, 2.2)+SinOsc.ar(1633, 0, 2.2);
    Out.ar(out, sines * env);
}).add

t = Task({{
    var a;
    a =  Synth.new(\sines, [\release_dur, 5, \out, 0, \amp, 0.2, \gate, 1]);
    1.wait;
    a.set(\gate, 0);
    1.wait;
   }.loop});

   t.play; 
```

我们将发布持续时间作为参数传递，因此您可以在下面的 a =Synth 行中的任务中设置它。

然后，当你想结束合成器时，向它发送 0 门。这告诉信封释放，它会在 5 秒内完成，然后 doneAction 从服务器中删除合成器。请注意，您将同时播放多个合成器，因为发布时间比您的等待时间长。

此外，您已将正弦波的幅度设置为大于 1。我没有在上面的 synthdef 中更改它。

# php - 是否可以从我的网络浏览器中查看需要 HTTP 身份验证的 url？

> ID：14391743
> 
> 赞同：0
> 
> 时间：2013-01-18T02:57:20.610
> 
> 标签：php, http, authentication, get

问题正是标题。我有页面的标题和授权，但我只是想知道是否可以通过网络浏览器而不是通过例如带有 http GET 请求的 php 来查看它。

如果我在浏览器上点击页面，我会得到：

```
HTTP Status 401 -

type Status report

message

description This request requires HTTP authentication () 
```

有没有办法将标头和验证码放到浏览器中打开并查看内容，或者这只能通过像 php 这样的脚本语言来处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T05:24:29.070

通常，您可以使用以下语法为`username`具有密码的用户提供 HTTP 身份验证：`password`

```
http://username:password@thesite.com/path/to/page.htm 
```

# websphere - Websphere Commerce Aurora Store - 如何找到数据结构？

> ID：14391746
> 
> 赞同：1
> 
> 时间：2013-01-18T02:57:39.583
> 
> 标签：websphere, websphere-commerce

我正在尝试掌握更新的编程模型（非 Access Bean）。

在 WebSphere Commerce 7 FEP 5 中，如何计算从 GetData 标记中检索到的对象的结构？

例如在下面的代码片段中，我怎么知道 catalogEntryDetails 的数据结构是什么？类名，方法等？

也有人可以解释“元数据”字段的来源吗？那应该在名词定义中，还是在中介层的代码中设置？我在名词定义中看不到对它的引用作为直接字段....

```
<c:forEach var="metadata" items="${catalogEntryDetails.metaData}" varStatus="status2">
    <c:if test="${metadata.key == 'ThumbnailPath'}">
        <c:set var="thumbNail" value="${env_imageContextPath}/${metadata.value}" />
    </c:if>         
    <c:if test="${metadata.key == 'FullImagePath'}">
        <c:set var="fullImage" value="${metadata.value}" />
    </c:if>
</c:forEach> 
```

catalogEntryDetails 对象是从这个片段中设置的：

```
<c:if test="${!empty productId}">
    <%-- Try to get it from our internal hashMap --%>
    <c:set var="key1" value="${productId}+getCatalogEntryViewAllByID"/>
    <c:set var="catalogEntryDetails" value="${cachedCatalogEntryDetailsMap[key1]}"/>
    <c:if test="${empty catalogEntryDetails}">
        <wcf:getData type="com.ibm.commerce.catalog.facade.datatypes.CatalogNavigationViewType" var="catalogNavigationView" 
            expressionBuilder="getCatalogEntryViewAllByID" varShowVerb="showCatalogNavigationView" maxItems="1" recordSetStartNumber="0">
            <wcf:param name="UniqueID" value="${productId}"/>
            <wcf:contextData name="storeId" data="${storeId}" />
            <wcf:contextData name="catalogId" data="${catalogId}" />
        </wcf:getData>
        <wcf:set target = "${cachedCatalogEntryDetailsMap}" key="${key1}" value="${catalogNavigationView.catalogEntryView[0]}"/>
    </c:if>
</c:if>

<c:if test="${empty productId && !empty WCParam.partNumber}">
        <c:set var="key1" value="${WCParam.partNumber}+getCatalogEntryViewAllByPartnumber"/>
        <c:set var="catalogEntryDetails" value="${cachedCatalogEntryDetailsMap[key1]}"/>
        <c:if test="${empty catalogEntryDetails}">
            <wcf:getData type="com.ibm.commerce.catalog.facade.datatypes.CatalogNavigationViewType" var="catalogNavigationView" 
                expressionBuilder="getCatalogEntryViewAllByPartnumber" varShowVerb="showCatalogNavigationView" maxItems="1" recordSetStartNumber="0">
                <wcf:param name="PartNumber" value="${WCParam.partNumber}" />
                <wcf:contextData name="storeId" data="${storeId}" />
                <wcf:contextData name="catalogId" data="${catalogId}" />
            </wcf:getData>
            <c:set var="catalogEntryDetails" value="${catalogNavigationView.catalogEntryView[0]}"/>
            <wcf:set target = "${cachedCatalogEntryDetailsMap}" key="${key1}" value="${catalogNavigationView.catalogEntryView[0]}"/>
        </c:if>
</c:if> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:36:00.177

您能做的最好的事情 - 检查 IBM Infocenter。[wcf:GetData](http://pic.dhe.ibm.com/infocenter/wchelp/v7r0m0/topic/com.ibm.commerce.component-services.doc/refs/rwvgetdataconfig.htm)文档告诉我们检索结果是由“type”参数指定的。在您的情况下，它是“com.ibm.commerce.catalog.facade.datatypes.CatalogNavigationViewType”。再次打开[CatalogNavigationViewType](http://pic.dhe.ibm.com/infocenter/wchelp/v7r0m0/topic/com.ibm.commerce.api.doc/com/ibm/commerce/catalog/facade/datatypes/CatalogNavigationViewType.html)的文档。文档告诉我们它的方法 getCatalogEntryView()：

> 返回“目录条目视图”包含引用列表的值。列表内容的类型为 CatalogEntryViewType。给定目录导航视图范围内的目录条目列表。

这就是您问题的答案：catalogEntryDetails 是 CatalogEntryViewType 的一个实例。出于某种原因，我在 IBM 文档中找不到这个接口。但是您仍然可以在 com.ibm.commerce.catalog.facade.datatypes 包中找到它（位于 \WCDE_ENT70\workspace\WC\Catalog-DataObjects.jar）

这里是：

```
public interface CatalogEntryViewType 
```

{

```
public abstract String getUniqueID();

public abstract void setUniqueID(String s);

public abstract String getPartNumber();

public abstract void setPartNumber(String s);

public abstract String getName();

public abstract void setName(String s);

public abstract String getThumbnail();

public abstract void setThumbnail(String s);

public abstract String getFullImage();

public abstract void setFullImage(String s);

public abstract String getShortDescription();

public abstract void setShortDescription(String s);

public abstract String getLongDescription();

public abstract void setLongDescription(String s);

public abstract String getManufacturer();

public abstract void setManufacturer(String s);

public abstract String getKeyword();

public abstract void setKeyword(String s);

public abstract boolean isHasSingleSKU();

public abstract void setHasSingleSKU(boolean flag);

public abstract void unsetHasSingleSKU();

public abstract boolean isSetHasSingleSKU();

public abstract String getSingleSKUCatalogEntryID();

public abstract void setSingleSKUCatalogEntryID(String s);

public abstract String getStoreID();

public abstract void setStoreID(String s);

public abstract List getAttachments();

public abstract List getPrice();

public abstract String getParentCatalogGroupID();

public abstract void setParentCatalogGroupID(String s);

public abstract String getParentCatalogEntryID();

public abstract void setParentCatalogEntryID(String s);

public abstract Map getMetaData();

public abstract UserDataType getUserData();

public abstract void setUserData(UserDataType userdatatype);

public abstract String getNumberOfSKUs();

public abstract void setNumberOfSKUs(String s);

public abstract List getSKUs();

public abstract List getComponents();

public abstract List getMerchandisingAssociations();

public abstract List getAttributes();

public abstract String getSubscriptionTypeCode();

public abstract void setSubscriptionTypeCode(String s);

public abstract String getDynamicKitURL();

public abstract void setDynamicKitURL(String s);

public abstract String getDynamicKitDefaultConfiguration();

public abstract void setDynamicKitDefaultConfiguration(String s);

public abstract boolean isDynamicKitDefaultConfigurationComplete();

public abstract void setDynamicKitDefaultConfigurationComplete(boolean flag);

public abstract void unsetDynamicKitDefaultConfigurationComplete();

public abstract boolean isSetDynamicKitDefaultConfigurationComplete();

public abstract String getDynamicKitModelReference();

public abstract void setDynamicKitModelReference(String s);

public abstract String getTitle();

public abstract void setTitle(String s);

public abstract String getMetaDescription();

public abstract void setMetaDescription(String s);

public abstract String getMetaKeyword();

public abstract void setMetaKeyword(String s);

public abstract String getFullImageAltDescription();

public abstract void setFullImageAltDescription(String s);

public abstract boolean isBuyable();

public abstract void setBuyable(boolean flag);

public abstract void unsetBuyable();

public abstract boolean isSetBuyable();

public abstract Object getCatalogEntryTypeCode();

public abstract void setCatalogEntryTypeCode(Object obj);

public abstract boolean isDisallowRecurringOrder();

public abstract void setDisallowRecurringOrder(boolean flag);

public abstract void unsetDisallowRecurringOrder();

public abstract boolean isSetDisallowRecurringOrder(); 
```

}

“metaData”字段来自这个字符串：

```
public abstract Map getMetaData(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:59:04.807

是的，您是对的，它来自业务对象中介配置中配置的名词定义：WC\xml\config\com.ibm.commerce.catalog-fep\wc-business-object-mediator.xml。默认情况下，它由 SolrReadCatalogEntryViewPartMediator 构建。从我能找到的任何文档中都不清楚我必须反编译才能弄清楚。乐趣 ：-（

```
 <_config:part-mediator interfaceName="com.ibm.commerce.foundation.server.services.dataaccess.bom.mediator.ReadBusinessObjectPartMediator">
        <_config:part-mediator-implementation className="com.ibm.commerce.catalog.facade.server.services.dataaccess.bom.mediator.solr.SolrReadCatalogEntryViewPartMediator" />
        <_config:part-mediator-implementation className="com.ibm.commerce.catalog.facade.server.services.dataaccess.bom.mediator.solr.SolrReadCatalogGroupViewPartMediator" />
        <_config:part-mediator-implementation className="com.ibm.commerce.catalog.facade.server.services.dataaccess.bom.mediator.solr.SolrReadAttachmentAssetViewPartMediator" />
        <_config:part-mediator-implementation className="com.ibm.commerce.catalog.facade.server.services.dataaccess.bom.mediator.solr.SolrReadSuggestionViewPartMediator" />
        <_config:part-mediator-implementation className="com.ibm.commerce.catalog.facade.server.services.dataaccess.bom.mediator.solr.SolrReadFacetViewPartMediator" />             
        <_config:part-mediator-implementation className="com.ibm.commerce.catalog.facade.server.services.dataaccess.bom.mediator.solr.SolrReadBreadCrumbTrailViewPartMediator" />
        <_config:part-mediator-implementation className="com.ibm.commerce.catalog.facade.server.services.dataaccess.bom.mediator.solr.SolrReadWebContentViewPartMediator" />
        <!-- 
             Note: SolrReadCatalogNavigationViewPostMediator must be declared as the last entry.
        -->
<_config:part-mediator-implementation className="com.ibm.commerce.catalog.facade.server.services.dataaccess.bom.mediator.solr.SolrReadCatalogNavigationViewPostMediator" /> 
```

# java - 在 Java servlet 中，cookie.getMaxAge() 总是返回 -1

> ID：14391749
> 
> 赞同：7
> 
> 时间：2013-01-18T02:57:55.850
> 
> 标签：java, http, servlets, cookies

如果我在将来设置一个带有 setMaxAge() 的 cookie，当我在后续请求中将 cookie 读回内存时，getMaxAge() 会给我一个 -1。我已经通过 Chrome 的设置和检查器检查了实际的 cookie，我可以验证过期日期确实设置为 60 天后。

```
static public void setHttpCookie(HttpServletResponse response, String payload) {
    Cookie c = new Cookie(COOKIE_NAME, payload);
    c.setMaxAge(60*86400); // expire sixty days in the future
    c.setPath("/"); // this cookie is good everywhere on the site
    response.addCookie(c);
}

static public String checkForCookie(HttpServletRequest req) {
    Cookie[] cookies = req.getCookies();
    if ( cookies != null ) {
        for ( Cookie c : cookies ) {
            if ( COOKIE_NAME.equals(c.getName()) ) {
                int maxAge = c.getMaxAge();
                logger.debug("Read back cookie and it had maxAge of {}.", maxAge);
                String payload = c.getValue();
                return payload;
            }
        }
    }
    return null;
} 
```

为什么 c.getMaxAge() 总是返回 -1？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-18T03:05:17.507

浏览器不会发送回路径和年龄等 cookie 属性。它只发回名称和值。如果最大年龄已过期，则浏览器无论如何都不会发送 cookie。如果路径没有被请求 URI 覆盖，那么浏览器无论如何都不会发送 cookie。

如果您确实需要在设置 cookie*后*确定 cookie 的年龄，那么您应该在设置 cookie 时自己记住它，例如在与登录用户和 cookie 名称相关联的数据库表中， 例如。

此问题与 Java/Servlet 无关。这就是指定 HTTP cookie 的方式。在其他 Web 编程语言中，您会遇到完全相同的问题。[另请参阅维基百科](http://en.wikipedia.org/wiki/HTTP_cookie#Cookie_attributes)的以下摘录（重点是我的）。

> ### Cookie 属性
> 
> 除了名称-值对，服务器还可以设置这些 cookie 属性：cookie 域、路径、过期时间或最长期限、安全标志和 HttpOnly 标志。**浏览器不会将 cookie 属性发送回服务器。他们只会发送 cookie 的名称-值对**。浏览器使用 Cookie 属性来确定何时删除 cookie、阻止 cookie 或是否向服务器发送 cookie（名称-值对）。

您可以做的最好的事情是每次在登录期间增加 cookie 的最大年龄。您可以通过再次设置完全相同的 cookie（尤其是完全相同的域/路径/名称）轻松实现此目的。它将覆盖现有的 cookie。这通常在所谓的“记住我”cookie 上以这种方式完成。

# reporting-services - 使用 SSRS 生成可填写的 PDF 表单

> ID：14391755
> 
> 赞同：1
> 
> 时间：2013-01-18T02:58:28.360
> 
> 标签：reporting-services, pdf-generation

如果有办法使用 SQL 报告服务生成可填写的 pdf 表单，任何人都可以建议我或指出我正确的方向吗？报表服务器上是否有任何第三方插件可以提供可填写的表单呈现选项，或者是否有一种方法可以通过使用某些 API 将报表的 pdf 格式转换为可填写的表单。你能指出我正确的方向吗？

谢谢，阿杰

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-18T10:08:35.163

我从未听说过这样的工具，并且搜索没有返回任何不同的答案。

你有一个选择是：

1.  使用与 SSRS 报告相同的布局创建可编辑的 PDF 文件
2.  创建 WCF 服务、控制器方法或您的应用程序具有逻辑的任何内容以获取相同的信息
3.  创建一个方法来使用[iTextSharp](http://sourceforge.net/projects/itextsharp/)使用您的数据填充可编辑表单
4.  将 PDF 文件发送给用户。

你有没有考虑过这个？

> 对于第一，您可以使用 Acrobat Pro、CutePDF 或任何其他您觉得舒服的工具。

# vb.net - VB 恢复事件

> ID：14391759
> 
> 赞同：1
> 
> 时间：2013-01-18T02:42:45.383
> 
> 标签：vb.net, vb.net-2010

我知道大小更改时有一个事件，但是当我恢复窗口时是否有一个事件（在任务栏最小化后单击它）。这是Visual Basic 2010。我是Visual Basic 的新手，虽然我知道C 和Java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T03:23:33.617

不是说你需要有条件地产生一些东西。我能想到两件事。首先是处理[`Activated`](http://msdn.microsoft.com/en-us/library/system.windows.window.activated.aspx)表单的事件并测试是否`WindowState`最小化，如果是，那么做你想做的事。另一种方法是也覆盖[`OnLocationChanged`](http://msdn.microsoft.com/en-us/library/system.windows.window.onlocationchanged.aspx)方法检查`WindowState`。

```
Private Sub Form1_Activated(sender As System.Object, e As System.EventArgs) Handles MyBase.Activated
    If WindowState = FormWindowState.Minimized Then
        'Your Code here
    End If
End Sub 
```

或者

```
Protected Overrides Sub OnLocationChanged(e As System.EventArgs)
    If WindowState = FormWindowState.Minimized Then
        'Your Code here
    End If
    MyBase.OnLocationChanged(e)
End Sub 
```

# c# - 尽管 WCF 服务不可用，仍继续处理

> ID：14391762
> 
> 赞同：0
> 
> 时间：2013-01-18T03:00:25.047
> 
> 标签：c#, .net, wcf, try-catch, using-statement

我有以下代码[由 Jean-Michel Bezeau 发布的答案提供](https://stackoverflow.com/a/4817790/1253708)

```
bool isAlive = false;
string fixedAddress = "http://localhost:8732/Design_Time_Addresses/WCFService/mex";
System.ServiceModel.Description.ServiceEndpointCollection availableBindings = System.ServiceModel.Description.MetadataResolver.Resolve(typeof(WCFService.IAlive), new EndpointAddress(fixedAddress));
ChannelFactory<WCFService.IAlive> factoryService = new ChannelFactory<WCFService.IAlive>(availableBindings[0]);
WCFService.IAlive accesService = factoryService.CreateChannel();
isAlive = accesService.IsAlive(); 
```

即使无法访问 WCF 服务，我也希望我的程序继续运行，以便我可以通过电子邮件通知某人并将其添加到日志中。我想过这样做：

```
bool isAlive = false;
try
{
    string fixedAddress = "http://localhost:8732/Design_Time_Addresses/WCFService/mex";
    System.ServiceModel.Description.ServiceEndpointCollection availableBindings = System.ServiceModel.Description.MetadataResolver.Resolve(typeof(WCFService.IAlive), new EndpointAddress(fixedAddress));
    ChannelFactory<WCFService.IAlive> factoryService = new ChannelFactory<WCFService.IAlive>(availableBindings[0]);
    WCFService.IAlive accesService = factoryService.CreateChannel();
    isAlive = accesService.IsAlive();
}
catch {}
finally
{
    if (isAlive)
    {
        //add success message to log
    }
    else
    {
        //add warning message to log
        //send email notification
    }
} 
```

但是，我不喜欢捕获所有这样的异常（我知道这是不好的做法）。解决这个问题的最佳方法是什么？

我应该捕捉到特殊的例外吗？或者，现在是实现 using 语句的好时机吗（如果可以，我可以提供一些帮助）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:52:17.287

异常可能是很多东西——它可能只是一个超时，或者一个 404 错误，一个 500 错误，一个连接重置错误......所以可能会有一堆可以抛出的异常。在这种特殊情况下，我不会对全局捕获有任何问题。

您可能还需要考虑重试，如果第一次失败，请再试一次，以防它只是超时。

或者，如果您的应用程序已经有全局错误处理，您可能不想吞下异常，因此您可以只使用 finally 块而不使用 catch：

```
try 
{
    ....
}
finally 
{
    ....
} 
```

但是，只有当这是应用程序无法自行处理或解决的真正错误时，您才想这样做。

# asp.net - 是否有任何理由*不*在每个应用程序中实现异步 ASP.NET 网页？

> ID：14391764
> 
> 赞同：2
> 
> 时间：2013-01-18T03:00:47.213
> 
> 标签：asp.net, .net, asynchronous

关于 MSDN 上的异步 ASP.NET 网页[文章](http://msdn.microsoft.com/en-us/magazine/ee336138.aspx)。

长时间运行的页面或高服务器负载的优势是显而易见的。那么，考虑到您认为在某个地方的需求可能会很高的项目，当使用量增长时，是否有任何理由不在每个 Web 应用程序中实现异步 ASP.NET 作为标准？这种方法有什么缺点吗？

第二个问题：在不同的网络应用情况下，是否有任何现实世界的研究/例子说明优势开始出现的地方？或者这只是吸吮它然后看看的问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T03:12:10.703

从您自己的链接：

> 只有 I/O-bound 操作是成为异步控制器类上的异步操作方法的良好候选者。I/O-bound 操作是不依赖本地 CPU 完成的操作。当 I/O 绑定操作处于活动状态时，CPU 只是等待从外部存储（数据库或远程服务）处理（即下载）数据。I/O-bound 操作与 CPU-bound 操作相反，后者任务的完成取决于 CPU 的活动。

异步页面不是免费的，它们是有代价的。*当您的页面对服务进行外部*调用或执行一些长时间运行的、非 CPU 绑定的操作时，它们通常很好。否则，您可能会破坏 CPU，从而使您处于异步之前的更糟情况。

这个想法是在您从应用程序的线程池中占用一个线程来执行非 CPU 密集型工作（等待来自长时间运行的服务的响应）时使用异步。这样，您的应用程序可以继续处理请求，而不会开始排队新的请求，从而慢慢耗尽您的应用程序的响应能力。

[这是另一个链接](http://weblogs.asp.net/rajbk/archive/2010/04/18/asp-net-asynchronous-pages-and-when-to-use-them.aspx)，其中包含何时/何时不使用异步页面的信息。

**编辑**

至于什么被认为是“长期运行”，您将面临“这取决于”的糟糕答案。要弄清楚这一点，您需要分析您的应用程序，查看有多少“长时间运行”的请求导致后续请求排队，而不是由 IIS 处理。决定归结为处于这样一种情况，即付出代价高昂的上下文切换代价低于您将获得的回报。如果您的瓶颈是某个页面或服务导致传入请求被推迟，那么开始*考虑*异步工作可能是一个好主意。但是，您也可能在请求中做了太多工作，这可能是您需要重构代码的“代码异味”。

最后，*这取决于。*

这是[MSDN 的摘录](http://msdn.microsoft.com/en-us/library/ee728598(v=VS.100).aspx)。

> 通常，当满足以下条件时，使用异步管道：
> 
> *   这些操作是网络绑定或 I/O 绑定的，而不是 CPU 绑定的。
>     
>     
> *   测试表明，阻塞操作是站点性能的瓶颈，并且 IIS 可以通过对这些阻塞调用使用异步操作方法来服务更多请求。
>     
>     
> *   并行性比代码的简单性更重要。
>     
>     
> *   您希望提供一种机制，让用户取消长时间运行的请求。

*虽然链接是关于 MVC 的，但这个想法也适用于其他风格的 ASP.NET。*

# javascript - 使用 window.location.hash 检查并添加到 URL 哈希

> ID：14391765
> 
> 赞同：3
> 
> 时间：2013-01-18T03:01:11.130
> 
> 标签：javascript, hash

现在，如果我有多个链接使用：

```
Options 1:
<a href="javascript:;" onClick="window.location.hash+='A'">Option A</a>
<a href="javascript:;" onClick="window.location.hash+='B'">Option B</a>
<a href="javascript:;" onClick="window.location.hash+='C'">Option B</a>

Options 2:
<a href="javascript:;" onClick="window.location.hash+='1'">Option 1</a>
<a href="javascript:;" onClick="window.location.hash+='2'">Option 2</a>
<a href="javascript:;" onClick="window.location.hash+='3'">Option 3</a>

Options 3:
<a href="javascript:;" onClick="window.location.hash+='X'">Option X</a>
<a href="javascript:;" onClick="window.location.hash+='Y'">Option Y</a>
<a href="javascript:;" onClick="window.location.hash+='Z'">Option Z</a> 
```

每当单击其中任何一个时，它都会不断添加到 URL。有没有办法检查当前哈希是否已经存在（即如果哈希字符串中的第三个字符，则替换为当前哈希）。任何帮助都会非常感谢！我正在尝试完成如下所示的最终结果，即使用户在选择选项之间来回切换：

```
http://mydomain.com/question-page#A3Y 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T03:03:07.737

将其更改`+=`为连接：

```
window.location.hash+='A'; 
```

我会做类似以下的事情：

首先，为每个可能的选项创建变量：

```
var option1 = "";
var option2 = "";
var option3 = ""; 
```

接下来，创建一个将设置散列的函数：

```
function generateHash() {
  window.location.hash = option1 + option2 + option3;
} 
```

最后，只需在 onclick 事件中设置每个选项，并生成哈希：

```
<a href="javascript:;" onClick="option1 = 'A'; generateHash();">Option A</a> 
 ...
<a href="javascript:;" onClick="option2 = '1'; generateHash();">Option 1</a>
...
<a href="javascript:;" onClick="option3 = 'X'; generateHash();">Option X</a> 
```

# java - 在触摸表面上隐藏 ActionBar

> ID：14391766
> 
> 赞同：0
> 
> 时间：2013-01-18T03:01:11.097
> 
> 标签：java, android, touch, android-actionbar

我正在编写一个非常简单的 android 应用程序。当用户触摸表面并四处移动手指时，会在手指下方绘制图片。当他们的手指抬起时，这就停止了。

我希望操作栏在手指向下时隐藏，在手指抬起时重新出现。

ActionBar 被覆盖。我认为在我的视图的 onTouchEvent 中使用 ActionBar.hide() 和 .show() 可以正常工作，但我遇到了一些问题。

我已经尝试了几件事。首先，我尝试将 Activity 中创建的 ActionBar 传递到视图中，但这不起作用，因为必须在“获取”ActionBar 之前创建视图，所以我只会传入一个空值。

然后我尝试制作一个可以从视图调用的静态 ActionBar，但随后出现此错误：“只有创建视图层次结构的原始线程才能触及其视图。”</p>

有人知道解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T03:15:33.607

查看 jfeinstein10 的[滑动菜单库中的一个示例](https://github.com/jfeinstein10/SlidingMenu)

在其中，在[BirdActivity.java](https://github.com/jfeinstein10/SlidingMenu/blob/master/example/src/com/slidingmenu/example/fragments/BirdActivity.java)中，您将看到`ActionBar`2 秒后如何显示和隐藏。您自然必须自己调整代码。但这应该让你开始：

**第 53 - 58 行**的代码摘录：

```
imageView.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        getSupportActionBar().show();
        hideActionBarDelayed(mHandler);
    }
}); 
```

`hideActionBarDelayed()`从第**80 - 86 号线**出发：

```
private void hideActionBarDelayed(Handler handler) {
    handler.postDelayed(new Runnable() {
        public void run() {
            getSupportActionBar().hide();
        }
    }, 2000);
} 
```

**更新**

由于缺少代码，大部分问题已被假设。仅仅因为缺少来自 OP 的数据，这可能是错误的。话虽如此，如果整理出*“只有创建视图层次结构的原始线程才能触及其视图”。*问题将解决它，也许这可能会为您解决：

```
Runnable run = new Runnable() {

    @Override
    public void run() {
            // RUN YOUR CODE TO HIDE / SHOW THE ACTIONBAR HERE      
    }
}; YOUR_ACTIVITY.this.runOnUiThread(run); // REPLACE WITH getActivity().runOnUiThread(run); IF THIS IS A FRAGMENT 
```

**注意：**在示例中，有问题的活动使用[ActionBarSherlock](http://actionbarsherlock.com/)并扩展`SherlockActivity`，因此使用`getSupportActionBar()`. 如果您不使用 ABS，则必须使用`getActionBar()`而不是前者。

# sql - 从两个表中删除结果中的重复数据

> ID：14391767
> 
> 赞同：0
> 
> 时间：2013-01-18T03:01:15.413
> 
> 标签：sql, sql-server, tsql

我是 SQL Server 的新手，我的一个 SQL 查询需要帮助。

我有 2 张桌子（`Rating`和`LikeDislike`）。

我正在尝试使用`LEFT JOIN`这样的方法从这两个表中获取数据：

```
SELECT 
   R.ID, R.Topic, R.CountLikes, R.CountDisLikes, R.Extra, LD.UserName, LD.Clikes
FROM 
   Rating As R
LEFT JOIN 
   LikeDislike AS LD ON LD.TopicID = R.ID
ORDER BY 
   R.ID DESC 
```

上面的`SELECT`语句显示结果很好，但也包括重复项。我想在显示数据时删除重复项，我尝试使用`DISTINCT`and `GROUP BY`，但没有运气，可能是因为我没有正确使用它。

**更新：**为了更清楚和更少混淆，让我告诉你每个表的确切作用以及我想要实现的目标。

该`Rating`表包含以下列 ( `ID, Topic, CountLikes, CountDisLikes, Extra, CreatedByUser`)。它存储每个主题以及`UserID`创建该主题的用户的主题信息和喜欢和不喜欢的数量。

该`LikeDisLike`表包含以下列 ( `ID, TopicID, UserName, Clikes`)。是表中列`TopicID`的 FK 。`ID``Rating`

现在我要做的是从这两个表中获取信息，而不需要重复的行。我需要从`Rating`表+中获取所有列的数据，`UserName`并`Clikes`从`LikeDislike`表中获取所有列，而不需要任何重复的行

更新 2：
以下是此 SELECT 语句重复的结果：

```
SELECT  
   DISTINCT ld.TopicID, R.ID, R.Topic, R.CountLikes, R.CountDisLikes, 
   LD.UserName, LD.Clikes 
FROM 
   Rating AS R 
LEFT JOIN 
   LikeDislike AS LD ON  LD.TopicID = R.ID 
```

结果输出：

```
TopicID ID  Topic            CountLikes   CountDislikes UserName    Clikes
NULL    79  Testing at home    1           0             NULL       NULL
NULL    80  Testing at home2   1           0             NULL       NULL 
NULL    82  testing dislikes   0           1             NULL       NULL
1       1   Do You Like This   211         58            3          FALSE
2       2   Or This            17          25            3          TRUE
76      76  Testing part 3     7           5             2          FALSE
76      76  Testing part 3     7           5             3          FALSE
77      77  Testing part 4     16          6             2          TRUE
77      77  Testing part 4     16          6             3          TRUE
77      77  Testing part 4     16          6             5          TRUE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T03:03:06.793

以下语法应删除完整的重复项：

```
SELECT distinct R.ID, R.Topic, R.CountLikes, R.CountDisLikes, R.Extra,
       LD.UserName, LD.Clikes
FROM Rating As R
LEFT JOIN LikeDislike AS LD on LD.TopicID = R.ID
ORDER BY R.ID desc 
```

这是你试过的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T05:39:38.537

我认为这种方式将为您提供正确的输出

```
select ID, Topic,CountLikes,CountDisLikes,Extra,
   UserName, Clikes from (
    SELECT distinct R.ID, R.Topic, R.CountLikes, R.CountDisLikes, R.Extra,
   LD.UserName, LD.Clikes
            , ROW_NUMBER() over (partition by R.ID order by R.ID desc) as rid
   FROM Rating As R
    LEFT JOIN LikeDislike AS LD on LD.TopicID = R.ID
    ORDER BY R.ID desc) t where rid=1 order by ID desc 
```

否则请检查likedislike tbl，您在其中插入2个主题以获得相同的评级tbl id，并检查用户名，Clikes也检查它们在likedislike tbl中是否相似

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T06:42:00.673

尝试这个

```
 SELECT R.ID, R.Topic, R.CountLikes, R.CountDisLikes, R.Extra, 
LD.UserName, LD.Clikes  FROM Rating AS R 
        Left Join ( SELECT TopicID, UserName, min(Clikes) as Clikes 
    From LikeDisLike Group by TopicID,UserName) AS LD 
on R.ID = LD.TopicID ORDER By R.ID Desc 
```

顺便说一句，我认为您需要 UNIQUE(TopicID,UserName) 约束来避免重复。

# json - 使用 iTunes 搜索 API 的 Excel VBA 宏 - 查询和解析 JSON 结果的最快方法

> ID：14391768
> 
> 赞同：1
> 
> 时间：2013-01-18T03:01:20.803
> 
> 标签：json, excel, itunes, vba

我正在尝试从 iTunes 查询数据构建 Excel 页面。愤怒的小鸟应用程序示例我的查询如下所示： [https://itunes.apple.com/lookup?id=343200656&country=AL](https://itunes.apple.com/lookup?id=343200656&country=AL)检查阿尔巴尼亚 iTunes [https://itunes.apple.com/lookup?id=343200656&country=DZ](https://itunes.apple.com/lookup?id=343200656&country=DZ)检查阿尔及利亚 iTunes ... 150 多家商店

我的问题是执行此查询和解析响应的最有效方法。我只知道如何进行 xmlhttp 查询。请启发我作为更好的方法来做到这一点。我已经阅读了一些关于 VB-JSON、Json.net、CDataSet、fastJSON 的文档，但不知道如何开始尝试这些工具。任何人都有更多的 VBA 代码示例拉 JSON 或向新手解释这些框架的用法的方法？

```
Dim innerHTML As Object
Dim myText As String
JsonCheck = ""
Set innerHTML = CreateObject("Microsoft.XMLHTTP")
With innerHTML
    .Open "GET", iTunesAPI_link, False
    .send
    myText = .responsetext
End With
Set innerHTML = Nothing
If InStr(myText, ":0") = 20 Then   'no results found
    result = "Down"
ElseIf InStr(myText, "Your request produced an error.") = 46 Then 'link error
    result = HTMLCheck(human iTunes link)
Else      'found the app
    result = call function which parses myText for desired fields
Endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T06:28:34.003

这是使用 scriptcontrol 的基本方法：

```
Sub Tester()

    Dim json As String
    Dim sc As Object
    Dim o

    Set sc = CreateObject("scriptcontrol")
    sc.Language = "JScript"

    json = HttpGet("https://itunes.apple.com/lookup?id=343200656&country=AL")

    'some json property names may be keywords in VBA, so replace with
    '  something similar....
    json = Replace(json, """description""", """description_r""")
    Debug.Print json

    sc.Eval "var obj=(" & json & ")" 'evaluate the json response
    'add some accessor functions
    sc.AddCode "function getResultCount(){return obj.resultCount;}"
    sc.AddCode "function getResult(i){return obj.results[i];}"

    Debug.Print sc.Run("getResultCount")

    Set o = sc.Run("getResult", 0)
    Debug.Print o.kind, o.features, o.description_r

End Sub

Function HttpGet(url As String) As String
    Dim oHTML As Object
    Set oHTML = CreateObject("Microsoft.XMLHTTP")
    With oHTML
        .Open "GET", url, False
        .send
        HttpGet = .responsetext
    End With
End Function 
```

Codo 对这个问题的回答中有一个可行的方法：[Excel VBA: Parsed JSON Object Loop](https://stackoverflow.com/questions/5773683/excel-vba-parsed-json-object-loop)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T13:43:43.837

我在查询 Salesforce 的 REST API 时遇到了类似的问题，发现处理 JSON`ScriptControl`最终变得难以管理。我使用以下库来解析和转换为 JSON，它对我来说非常有效：[https](https://code.google.com/p/vba-json/) ://code.google.com/p/vba-json/ 。

```
Dim JSON As New JSONLib
Dim Parsed As Object

Set Parsed = JSON.parse(jsonValue)
Debug.Print Parsed("resultCount")
Debug.Print Parsed("results")(0) 
```

使用该库，然后我总结了一些用于发出 Web 请求的常用功能，我认为这些功能可以帮助您：[https ://github.com/timhall/Excel-REST](https://github.com/timhall/Excel-REST)

使用这些库，您的代码将如下所示：

```
Dim iTunesClient As New RestClient
iTunesClient.BaseUrl = "https://itunes.apple.com/"

Dim Request As New RestRequest
Request.Format = json
Request.Resource = "lookup"
Request.AddQuerystringParam "id", "343200656"
Request.AddQuerystringParam "country", "AL"

Dim Response As RestResponse
Set Response = iTunesClient.Execute(Request)

' => GET https://itunes.apple.com/lookup?id=343200656&country=AL

If Response.StatusCode = 200 Then
    ' Response.Data contains converted JSON Dictionary/Collection
    Debug.Print "Result Count: " & Response.Data("resultCount")
    Dim i As Integer
    For i = LBound(Response.Data("results")) To UBound(Response.Data("results"))
        Debug.Print "Result " & i & ": " & Response.Data("results")(i)
    Next i
Else
    Debug.Print "Error: " & Response.Content
End If 
```

# ruby-on-rails-3 - Rails 从不同的控制器渲染 mail_form gem

> ID：14391771
> 
> 赞同：0
> 
> 时间：2013-01-18T03:01:53.047
> 
> 标签：ruby-on-rails-3

从属于优惠的旅行中，我正在尝试渲染使用 mail_form gem 生成的表单。
但我收到一条错误消息：
*undefined method `model_name' for NilClass:Class*

**旅行/表演**

```
= render :partial => '/question_forms/form', :question_form => @question_form 
```

任何提示如何得到这个？我尝试将 question_form 模型作为旅行的关联，但它不起作用。

这是 question_forms_controller 默认代码：

```
class QuestionFormsController < ApplicationController
  def new
    @question_form = QuestionForm.new
  end

  def create
    begin
        @question_form = QuestionForm.new(params[:question_form])
        @question_form.request = request
        if @question_form.deliver
          flash.now[:notice] = 'Thank you for your message!'
        else
          render :new
        end
      rescue ScriptError
        flash[:error] = 'Sorry, this message appears to be spam and was not delivered.'
      end
  end

end 
```

在我的 travels_controller 中，我尝试使用相同的方法加载 @question_form，但这似乎不是这样：

```
 def new
    @offer_season = OfferSeason.find(params[:offer_season_id])
    @travel = @offer_season.travels.find(params[:id])

    @question_form =  @travel.questionforms.new
  end

  def create
    @offer_season = OfferSeason.find(params[:offer_season_id])
    @travel = @offer_season.travels.find(params[:id])

    begin
        @question_form = @travel.questionforms.new(params[:question_form])
        @question_form.request = request
        if @question_form.deliver
          flash.now[:notice] = 'Thank you for your message!'
        else
          render :new
        end
      rescue ScriptError
        flash[:error] = 'Sorry, this message appears to be spam and was not delivered.'
      end
  end 
```

# windows - schtasks 系统失败

> ID：14391774
> 
> 赞同：0
> 
> 时间：2013-01-18T03:03:00.343
> 
> 标签：windows, command-line, windows-task-scheduler

[**此处**](https://superuser.com/a/243071)和帮助中指出，您可以设置“运行方式”。

```
/RU  username      Specifies the "run as" user account (user context)
                       under which the task runs. For the system account,
                       valid values are "", "NT AUTHORITY\SYSTEM"
                       or "SYSTEM". 
```

从我的测试中，这些命令将启动任务

```
schtasks /create /sc once /st 00:00 /f /tr foo.exe /tn bar
schtasks /run /i /tn bar 
```

但是以 SYSTEM 身份运行它不会启动`foo.exe`

```
schtasks /create /sc once /st 00:00 /f /tr foo.exe /tn bar /ru SYSTEM
schtasks /run /i /tn bar 
```

我想以 SYSTEM 身份运行的原因是因为在另一个问题中说这样做基本上会`foo.exe`在没有窗口的情况下在后台运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T05:44:22.013

这个对我有用

```
C:\Windows\system32>schtasks /create /sc once /st 09:36 /f /tr notepad.exe /tn bar /ru SYSTEM
SUCCESS: The scheduled task "bar" has successfully been created. 
```

![在此处输入图像描述](../Images/76adf35bca7c1d954b1dd0732ab2cd82.png)

它还使用

```
C:\Windows\system32>schtasks /run /i /tn bar
SUCCESS: Attempted to run the scheduled task "bar". 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T20:08:41.550

您必须以管理员身份运行 cmd.exe，然后输入您的代码。只有管​​理员可以安排任务以 SYSTEM 身份运行，而普通命令行没有足够的权限。

# ios - 如何通过 NSFileManager 正确管理 iCloud 文件？

> ID：14391781
> 
> 赞同：1
> 
> 时间：2013-01-18T03:03:30.347
> 
> 标签：ios, icloud, nsfilemanager

我正在尝试通过使用 NSFileManager 上的 iCloud 方法（无文档或文件协调器）将 iCloud 同步添加到我的 iOS/Mac 应用程序。该应用程序需要跨各种实例同步音频文件；创建、删除和元数据更改。它不是一个协作风格的应用程序，所以我不太担心冲突等。我有一些基本的工作，但遇到了一些我似乎无法找到明确答案的基本问题。

1.  使用 iCloud 时，涉及到两个本地目录，文件来源的沙盒目录和无处不在的容器目录。一旦我为 ubiquity 启用文件，我应该开始直接与 ubiquity 容器中的文件进行交互，还是应该继续与沙盒文件交互并从 ubiquity 对应对象推送/拉取更改？感觉后者是最好的，这样如果他们关闭 iCloud，我就不会丢失所有用户文件（不确定在这种情况下普遍存在容器中的文件会发生什么）。

2.  如果我维护两个文件，是否有一种首选方法可以将增量更改推入/拉出无处不在的容器？据我了解，如果用户更改给定设备上的文件，所有其他设备都会在其本地通用副本（如果已下载）中获得增量更改。每次通用文件更改时，我是否应该将文件全部复制到我的本地沙箱目录中，反之亦然？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:49:47.760

在修改文件时不断地将文件复制到普遍存在的容器对我来说似乎不是一个好策略，甚至可能导致 iCloud 认为文件的更改比实际更改的要多。您可以直接与 ubiquity 容器中的文件进行交互，就像使用“普通”文档沙箱中的文件一样使用它们。这是所有 iCloud 文档中规定的模型，尽管它可能很稀疏。

您是对的，您需要能够处理用户从 iCloud 迁移出去的情况。有一些方法可以将文件移出 ubiquity 容器，并且一些较新的 iOS 6 API 可以更容易地检测用户是否启用了 iCloud，尽管这仍然是我们可以使用更多 API 的领域。

# ios - 如何最小化ios应用

> ID：14391784
> 
> 赞同：1
> 
> 时间：2013-01-18T03:04:04.793
> 
> 标签：ios, multitasking

> **可能重复：**
> [强制应用关闭并在后台运行](https://stackoverflow.com/questions/8920844/force-app-to-close-and-run-in-background)

我正在 ios 中创建一个无线电应用程序。我的应用程序中有一个最小化按钮。所以我想要做的是当用户按下该按钮时，应用程序应该在后台运行，并且应用程序图标应该像普通`Android`无线电应用程序一样显示在通知区域中。我想知道是否有可能，`iOS`我该怎么做。任何人都可以给我一个例子。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T03:14:12.670

使应用程序以编程方式进入后台的唯一方法是打开另一个调用其 URL 的应用程序 (Safari)。但我不认为这是你的想法（因为你说你有一个广播应用程序）。

所以如果你想模仿用户按下主页按钮时发生的相同动作，iOS SDK 是不可能的。来自 iOS 人机界面指南

> **不要以编程方式退出**
> 
> 永远不要以编程方式退出 iOS 应用程序，因为人们倾向于将其解释为崩溃。但是，如果外部环境阻止您的应用程序按预期运行，您需要告诉您的用户这种情况并解释他们可以做些什么。

苹果还在文档中说

> 应该由人而不是应用程序发起和控制操作。尽管应用程序可以建议行动方案或警告危险后果，但应用程序将决策权从用户手中夺走通常是错误的。最好的应用程序在为人们提供所需的能力和帮助他们避免危险结果之间找到正确的平衡。

所以我认为使用公共 API 是不可能的。

# c# - 值类型如何存储？

> ID：14391788
> 
> 赞同：-3
> 
> 时间：2013-01-18T03:04:45.443
> 
> 标签：c#

> **可能重复：**
> [.NET 局部变量存储在哪里？](https://stackoverflow.com/questions/3822448/where-are-net-local-variables-stored)

```
function storeonstack()
{
 int a;
 int b;
 int c;
 a=1;
 b=1;
 a=2
 c=2;
} 
```

Some body 可以解释一下这些值类型是如何存储在堆栈中的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T03:16:30.977

实际上，如果值类型是方法中的局部变量，则值类型存储在堆栈中，如果它们是引用类型的成员，则存储在堆中。有时，如果局部变量包含在闭包中，它们也可能存储在堆上。这是必需的，以便在函数退出后变量可以继续存在（并且清理堆栈帧）。局部变量在操作中使用时也可以存储在寄存器中，然后再溢出回堆栈。根据 JIT 优化，局部变量可能只存在于寄存器中，也可能根本不存在。不过，成员变量应该始终存在。

* 是的，从技术上讲，不能保证堆栈和堆之类的东西存在，但老实说，在大多数（如果不是全部）.NET 实现中，就像在 C 程序中一样，存在堆栈和堆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T03:18:17.090

这是一个实现细节，取决于编译器。它可能因编译器而异。

[关于值类型的真相](http://blogs.msdn.com/b/ericlippert/archive/2010/09/30/the-truth-about-value-types.aspx)

[堆栈是一个实现细节](http://blogs.msdn.com/b/ericlippert/archive/2009/04/27/the-stack-is-an-implementation-detail.aspx)

# php - 为什么这个 PDO 代码不插入？

> ID：14391789
> 
> 赞同：0
> 
> 时间：2013-01-18T03:04:48.910
> 
> 标签：php, pdo

```
 $sql = $db->prepare("INSERT INTO users (user_username, user_password, user_email) VALUES ($username, $password, $email)");
    $sql->bindParam(':user_name', $username);
    $sql->bindParam(':user_password', $password);
    $sql->bindParam(':user_email', $email);
    $sql->execute(); 
```

我正在尝试学习 PDO 而不是使用 mysql_ 但我遇到了问题。这似乎没有插入，我不确定为什么。

我也没有收到任何错误消息，所以我不知道谷歌是什么。

此外，包含文件（包含所有数据库详细信息的 config.php）中的 $db 变量是否有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T03:10:24.477

尝试 -

```
$sql = $db->prepare("INSERT INTO users (user_username, user_password, user_email) VALUES (:user_name, :user_password, :user_email)");
$sql->bindParam(':user_name', $username);
$sql->bindParam(':user_password', $password);
$sql->bindParam(':user_email', $email);
$sql->execute(); 
```

用`:user_name, ...`在你`$db->prepare()`不`$username, ...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T03:28:39.530

首先，当您开发时打开错误报告，这样您就可以看到任何错误消息。

```
$db->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING ); 
```

执行您拥有的代码应该会产生某种错误，因为您试图绑定到不存在的参数。命名参数需要以 a 开头，`:`或者如果您更喜欢占位符类型参数，则可以使用`?`。当你这样做时：

```
...VALUES ($username, $password, $email)" 
```

变量将被解析为它们的实际值：

```
...VALUES (bob, $2y$14$youarehashingpasswordsright, bob@gmail.com)" 
```

当然，这将是您的 SQL 中的语法错误。相反，您需要输入它们的参数名称：

```
......VALUES ( :username , :password , :email )" 
```

然后，如果这不起作用，请查看产生的任何错误并确保查询实际上正在提交。

# c# - 以下方法调用有什么问题？

> ID：14391791
> 
> 赞同：0
> 
> 时间：2013-01-18T03:05:03.157
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

> **可能重复：**
> [.NET 中的 NullReferenceException 是什么？](https://stackoverflow.com/questions/4660142/what-is-a-nullreferenceexception-in-net)

我有一个名为 HoursOfOperation 的模型（ASP.NET MVC 4，C#）：

```
public class HoursOfOperation
{
    public List<DayTimes> Monday { get; set; }
    public List<DayTimes> Tuesday { get; set; }
    public List<DayTimes> Wednesday { get; set; }
    public List<DayTimes> Thursday { get; set; }
    public List<DayTimes> Friday { get; set; }
    public List<DayTimes> Saturday { get; set; }
    public List<DayTimes> Sunday { get; set; }
} 
```

和一个白天

```
public class DayTimes
{
    public int Status { get; set; }
    public string From { get; set; }
    public string To { get; set; }
} 
```

现在我正在尝试向 Monday 实体添加一个新集合，如下所示：

```
var _vm = new HoursOfOperation();

_vm.Monday.Add(new DayTimes{
      From = day.From.ToString(),
      To = day.To.ToString(),
      Status = (int)day.Status
}); 
```

一旦上述语句被执行，我就会得到一个`"Object reference not set to an instance of an object."`例外

现在我已经检查并`day.From.ToString()`有一个`"08:00:00"`，day.To.ToString() 有`"09:30:00"`和 day.Status`1`在该语句引发异常的时间有一个。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T03:08:16.607

那是因为`Monday`没有实例化。

你应该做类似的事情

```
_vm.Monday = new List<DayTimes>(); 
```

或者，在`HoursOfOperation`的构造函数中进行所有实例化，如下所示：

```
public HoursOfOperation()
{
   Monday = new List<DayTimes>(),
   Tuesday = new List<DayTimes>(),
   Wednesday = new List<DayTimes>(),
   Thursday = new List<DayTimes>(),
   Friday = new List<DayTimes>(),
   Saturday = new List<DayTimes>(),
   Sunday = new List<DayTimes>()
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T03:09:24.747

此时您的列表为空。所以

```
_vm.Monday 
```

..会抛出异常。您必须`new`在构造函数中添加它们：

```
public HoursOfOperation() {
    Monday = new List<DayTimes>();
    // ...etc
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T03:08:52.027

各种 List 属性没有被初始化；你需要添加

```
_vm.Monday = new List<DayTime>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T03:09:46.760

您需要创建白天时间列表的实例：

```
var hoursOfOperation = new HoursOfOperation
{
   Monday = new List<DayTimes>(),
   Tuesday = new List<DayTimes>(),
   Wednesday = new List<DayTimes>(),
   Thursday = new List<DayTimes>(),
   Friday = new List<DayTimes>(),
   Saturday = new List<DayTimes>(),
   Sunday = new List<DayTimes>()
}; 
```

# javascript - 本地系统图标的浏览器选项卡图标

> ID：14391792
> 
> 赞同：0
> 
> 时间：2013-01-18T03:05:08.227
> 
> 标签：javascript, jquery, html, ajax, browser

*我正在尝试为本地系统做浏览器选项卡图标，它不工作，但使用 HTTP 静态图标它工作，请帮助我理解我的问题。*

**第 1 页：这不起作用**

```
<link rel="shortcut icon" href="C:/Documents and Settings/joseph.m/Desktop/firefox.ico"> 
```

**第 1 页：这是有效的**

```
<link rel="shortcut icon" href="http://sstatic.net/stackoverflow/img/favicon.ico"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T03:27:02.903

```
<link rel="shortcut icon" href="file:///C:/Documents and Settings/joseph.m/Desktop/favicon.ico"/> 
```

*未测试，我在 Linux 上*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T04:10:50.477

好吧，这是我的。这是有效的。

```
<link rel="shortcut icon" type="image/x-icon" href="C://Documents and Settings/joseph.m/Desktop/firefox.ico" /> 
```

# flash - 为什么广告使用 Flash？

> ID：14391793
> 
> 赞同：0
> 
> 时间：2013-01-18T03:05:12.790
> 
> 标签：flash, ads

为什么几乎所有广告都使用 Flash 而不是 HTML、CSS 和 Javascript？到处都有非常简单的广告（例如，带有单个悬停效果），出于某种原因，它们在 Flash 中呈现。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T03:11:45.930

一个原因是隔离样式。当页面的 css 影响广告的呈现时，这是一种痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:04:15.670

除此之外：用于开发这些的更流行和更舒适的工具。使用更少的带宽（SWF 是一个存档，其有效负载针对流式传输进行了优化，而 HTML 并未为此优化/它取决于服务器对其进行压缩，它以块的形式出现，这需要多个请求）。广告交换网络更愿意为各种复杂的广告提供通用解决方案，因此为原始广告提供一个特殊情况，可以使用替代技术进行设计是一项额外的工作。

# sql - 如何将此“不在”查询更改为左连接查询

> ID：14391794
> 
> 赞同：1
> 
> 时间：2013-01-18T03:05:13.043
> 
> 标签：sql, sql-server, tsql, left-join

我一直在尝试更改此查询。我不想在此查询中使用“Not In”。谁能帮助我如何将此查询更改为左连接查询？

```
SELECT t.date,t.ticket,t.weight,t.Count, td.description
FROM tblticket t inner join tblticketdetails td on t.ticket = td.ticket
WHERE t.ticket NOT IN (SELECT r.Original_ticket from tblRenew R where isnull(r.new_ticket,'') = '' and r.transaction_status = 'valid') 
AND RTRIM(LTRIM(t.status)) = 'OPEN'
AND td.Type = 62
AND t.weight/t.Count >= 1000
AND t.date BETWEEN '2011-12-31' AND '2013-01-17' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:13:03.027

假设您在 tblRenew 中没有任何票证的多条记录：

```
select
  t.date, t.ticket, t.weight, t.Count, td.description
from
  tblticket t
  inner join tblticketdetails td on t.ticket = td.ticket
  left join tblRenew R on isnull(r.new_ticket,'') = '' and r.transaction_status = 'valid' and r.Original_ticket = t.ticket
where
  r.Original_ticket is not null
  and RTRIM(LTRIM(t.status)) = 'OPEN'
  and td.Type = 62
  and t.weight/t.Count >= 1000
  and t.date BETWEEN '2011-12-31' AND '2013-01-17' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T03:25:15.253

```
SELECT t.date,  t.ticket,t.weight, t.Count, td.description
FROM tblticket t inner join 
     tblticketdetails td
     on t.ticket = td.ticket left outer join
     (SELECT r.Original_ticket
      from tblRenew R
      where isnull(r.new_ticket,'') = '' and
      r.transaction_status = 'valid'
     ) v
     on t.ticket = v.Original_ticket
WHERE t.ticket NOT IN (SELECT r.Original_ticket from tblRenew R where isnull(r.new_ticket,'') = '' and r.transaction_status = 'valid') 
AND RTRIM(LTRIM(t.status)) = 'OPEN'
AND td.Type = 62
AND t.weight/t.Count >= 1000
AND t.date BETWEEN '2011-12-31' AND '2013-01-17'
and v.original_tiket is null 
```

# iphone - 自定义 UITableViewCell 编辑AccessoryView？

> ID：14391797
> 
> 赞同：0
> 
> 时间：2013-01-18T03:05:35.437
> 
> 标签：iphone, ios, xcode, ios4

这是一个难题：我想`editingAccessoryView`为我的 stock 创建一个包含两个按钮的自定义`UITableViewCell`。我想使用故事板来实现这一点。到目前为止，我已按照[此处](https://stackoverflow.com/questions/4280940/loading-custom-uiview-in-uiviewcontrollers-main-view)、[此处](https://stackoverflow.com/questions/6585681/custom-editingaccessoryview-behaving-unpredictable)和[此处](https://stackoverflow.com/questions/4012751/how-to-add-custom-editingaccessoryview-for-uitableview)列出的步骤进行操作。我似乎无法让它工作。我得到的最接近的是当我创建类型的 xib 时`UIView`，将类设置为`UIViewController`包含 的my`UITableView`并将其绑定到 my `IBOutlet`，但在`cellForRowAtIndexPath`它的`nil`.

事实是，我想我只需要知道如何创建视图然后将其映射到`editAccessoryView`; 从那里我相信我可以弄清楚如何添加按钮并映射相应的`IBAction`. 谁能提供一些分步说明或教程链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T03:58:39.117

我用以下代码自己解决了这个问题：

```
 UIView *editingCategoryAccessoryView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 120, 35)];

    UIButton *addCategoryButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [addCategoryButton setTitle:@"Add" forState:UIControlStateNormal];
    [addCategoryButton setFrame:CGRectMake(0, 0, 50, 35)];
    [addCategoryButton addTarget:self action:@selector(addCategoryClicked:withEvent:) forControlEvents:UIControlEventTouchUpInside];

    UIButton *removeCategoryButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [removeCategoryButton setTitle:@"Remove" forState:UIControlStateNormal];
    [removeCategoryButton setFrame:CGRectMake(55, 0, 65, 35)];
    [removeCategoryButton addTarget:self action:@selector(removeCategoryClicked:withEvent:) forControlEvents:UIControlEventTouchUpInside];

    [editingCategoryAccessoryView addSubview:addCategoryButton];
    [editingCategoryAccessoryView addSubview:removeCategoryButton];
    cell.editingAccessoryView = editingCategoryAccessoryView; 
```

如您所见，我以`UIView`编程方式创建了一个新按钮，并通过添加了两个按钮`addSubview`，然后将其分配给`editingAccessoryView`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-17T20:25:55.897

我知道这可能为时已晚，但它比您找到的解决方案要好得多。iOS 为您提供了一个名为`tableView: editActionsForRowAtIndexPath indexPath:`. 这种方法基本上允许您添加自己的 UITableViewRowActions，这比使用 UIButtons 添加整个 UIView 更容易（也更干净）。

苹果 说：

> 当您想为您的表格行之一提供自定义操作时，请使用此方法。当用户在一行中水平滑动时，表格视图将行内容移到一边以显示您的操作。点击其中一个操作按钮会执行与操作对象一起存储的处理程序块。
> 
> 如果您不实现此方法，则表格视图会在用户滑动行时显示标准附件按钮。

如果需要，您可以自己查看[Apple 文档](https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/index.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView:editActionsForRowAtIndexPath:)。

### 示例（斯威夫特）

```
override func tableView(tableView: UITableView, editActionsForRowAtIndexPath indexPath: NSIndexPath) -> [AnyObject]? {
    let customAction = UITableViewRowAction(style: .Normal, title: "Your Custom Action", handler: { (action: UITableViewRowAction!, indexPath: NSIndexPath!) in
        println("Do whatever it is you want to do when they press your custom action button")
    })
    editAction.backgroundColor = UIColor.greenColor()

    let deleteAction = UITableViewRowAction(style: .Normal, title: "Delete", handler: { (action: UITableViewRowAction!, indexPath: NSIndexPath!) in
        println("You can even implement a deletion action here")
    })
    deleteAction.backgroundColor = UIColor.redColor()

    return [deleteAction, editAction]
} 
```

# windows - 屏幕保护程序在 Windows 7 的不同桌面窗口上出错

> ID：14391799
> 
> 赞同：0
> 
> 时间：2013-01-18T03:05:40.593
> 
> 标签：windows

我在 Windows 7 中遇到不安全的屏幕保护程序。当我关闭“在恢复时，显示登录屏幕”选项并将 ScreenSaverIsSecure 从 1 更改为 0 时。基于 Adob​​e Flash 的 *.scr 显示“代码 5：访问被拒绝”。即使我在另一个桌面窗口并且屏幕保护程序没有启动，默认桌面上的错误消息也是如此。如果 ScreenSaverIsSecure 设置为 1，则无论桌面窗口如何，屏幕保护程序都会工作。这与 Windows XP 不同。

对此的另一个测试是我将屏幕保护程序设置为“3D 文本”并且我在另一个桌面上。“3D 文本”屏幕保护程序已在默认桌面上启动，但显示“与 Direct3D 不兼容”错误。

测试条件：

*   操作系统：Windows 7 x64 Pro SP1
*   屏保超时：1分钟
*   屏幕保护程序：3D 文本
*   取消选中“在恢复时，显示登录屏幕”。需要确保 ScreenSaverIsSecure 为 0（0 表示在简历中不询问密码）
    *   注册表位置：HKEY_CURRENT_USER\Software\Policies\Microsoft\Windows\Control Panel\Desktop
*   Desktops.exe 包含在 SysInternal 工具中。

测试程序： - 运行 Desktops.exe 并切换到#2 桌面 - 等待 1 分钟屏幕保护程序，超过 1 分钟后您无法在 #2 桌面上看到屏幕保护程序。- 切换到 #1 桌面（默认）并查看“与 Direct3D 不兼容”错误消息，而不是您在屏幕保护程序设置中定义的 3D 文本消息。

如果您有 Flash 屏幕保护程序，您将看到“代码 5 错误：访问被拒绝”。错误消息，您需要单击以继续。退出屏幕保护程序需要 ALT+F4。奇怪的...

任何人都可以在这方面提供帮助？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:21:50.817

您描述的症状与编码错误的屏幕保护程序一致。屏幕保护程序似乎正在尝试访问非活动桌面。我希望它是在没有考虑交互式会话中可能存在多个桌面的情况下编写的。

你对此无能为力。您无法修复屏幕保护程序，因为您没有对其进行编码。明显的解决方法是：

*   启用*在恢复时，显示登录屏幕*选项。
*   停止使用多个桌面。
*   选择一个不同的屏幕保护程序，一个可以正确处理多个桌面的屏幕保护程序。

其中 lask 选项是我的选择。

最后一点。我在这里没有看到任何 Flash。该屏幕保护程序使用 DirectX 呈现文本。

# python - E: 无法找到 psycopg2 的源包或将 pip 与 virtualenv 一起使用

> ID：14391804
> 
> 赞同：2
> 
> 时间：2013-01-18T03:06:24.030
> 
> 标签：python, django, virtualenv, pip, psycopg2

我在设置 psycopg2 w/pip 和虚拟环境时遇到问题，因此我可以在 heroku 上启动 django 应用程序。

我目前正在尝试遵循此[SO 解决方案](https://stackoverflow.com/questions/11489609/gcc-error-when-installing-psycopg2-into-a-virtualenv-lubuntu-12-04-python-2-7)来解决我的问题（如下），但我一直在尝试运行此命令，

```
sudo apt-get build-dep python-psycopg2 
```

我收到这个错误

```
ahmad@ubuntu:~$ sudo apt-get build-dep psycopg2
Reading package lists... Done
Building dependency tree       
Reading state information... Done
E: Unable to find a source package for psycopg2
ahmad@ubuntu:~$ 
```

...不知道该怎么办？我怎样才能帮助它找到 psycopg2 的源包...

我试过运行这个

```
apt-get install libpq-dev python-dev 
```

我明白了

```
0 upgraded, 0 newly installed, 0 to remove and 26 not upgraded. 
```

我试图安装它的原因是我可以运行 pip install psycopg2 而不会出现所有这些 gcc 错误（请参阅下面的示例运行）

```
(venv)ahmad@ubuntu:~/workspace/dogood$ pip install Django psycopg2 dj-database-url
Downloading/unpacking Django
  Downloading Django-1.4.3.tar.gz (7.7Mb): 7.7Mb downloaded
  Running setup.py egg_info for package Django

Downloading/unpacking psycopg2
  Downloading psycopg2-2.4.6.tar.gz (667Kb): 667Kb downloaded
  Running setup.py egg_info for package psycopg2

    no previously-included directories found matching 'doc/src/_build'
Downloading/unpacking dj-database-url
  Downloading dj-database-url-0.2.1.tar.gz
  Running setup.py egg_info for package dj-database-url

Installing collected packages: Django, psycopg2, dj-database-url
  Running setup.py install for Django
    changing mode of build/scripts-2.7/django-admin.py from 664 to 775

    changing mode of /home/ahmad/workspace/dogood/venv/bin/django-admin.py to 775
  Running setup.py install for psycopg2
    building 'psycopg2._psycopg' extension
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/psycopgmodule.c -o build/temp.linux-x86_64-2.7/psycopg/psycopgmodule.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/green.c -o build/temp.linux-x86_64-2.7/psycopg/green.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/pqpath.c -o build/temp.linux-x86_64-2.7/psycopg/pqpath.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/utils.c -o build/temp.linux-x86_64-2.7/psycopg/utils.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/bytes_format.c -o build/temp.linux-x86_64-2.7/psycopg/bytes_format.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/connection_int.c -o build/temp.linux-x86_64-2.7/psycopg/connection_int.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/connection_type.c -o build/temp.linux-x86_64-2.7/psycopg/connection_type.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/cursor_int.c -o build/temp.linux-x86_64-2.7/psycopg/cursor_int.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/cursor_type.c -o build/temp.linux-x86_64-2.7/psycopg/cursor_type.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/lobject_int.c -o build/temp.linux-x86_64-2.7/psycopg/lobject_int.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/lobject_type.c -o build/temp.linux-x86_64-2.7/psycopg/lobject_type.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/notify_type.c -o build/temp.linux-x86_64-2.7/psycopg/notify_type.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/xid_type.c -o build/temp.linux-x86_64-2.7/psycopg/xid_type.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/adapter_asis.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_asis.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/adapter_binary.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_binary.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/adapter_datetime.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_datetime.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/adapter_list.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_list.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/adapter_pboolean.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_pboolean.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/adapter_pdecimal.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_pdecimal.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/adapter_pint.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_pint.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/adapter_pfloat.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_pfloat.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/adapter_qstring.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_qstring.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/microprotocols.c -o build/temp.linux-x86_64-2.7/psycopg/microprotocols.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/microprotocols_proto.c -o build/temp.linux-x86_64-2.7/psycopg/microprotocols_proto.o -Wdeclaration-after-statement
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x090107 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/usr/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/9.1/server -c psycopg/typecast.c -o build/temp.linux-x86_64-2.7/psycopg/typecast.o -Wdeclaration-after-statement
    gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro build/temp.linux-x86_64-2.7/psycopg/psycopgmodule.o build/temp.linux-x86_64-2.7/psycopg/green.o build/temp.linux-x86_64-2.7/psycopg/pqpath.o build/temp.linux-x86_64-2.7/psycopg/utils.o build/temp.linux-x86_64-2.7/psycopg/bytes_format.o build/temp.linux-x86_64-2.7/psycopg/connection_int.o build/temp.linux-x86_64-2.7/psycopg/connection_type.o build/temp.linux-x86_64-2.7/psycopg/cursor_int.o build/temp.linux-x86_64-2.7/psycopg/cursor_type.o build/temp.linux-x86_64-2.7/psycopg/lobject_int.o build/temp.linux-x86_64-2.7/psycopg/lobject_type.o build/temp.linux-x86_64-2.7/psycopg/notify_type.o build/temp.linux-x86_64-2.7/psycopg/xid_type.o build/temp.linux-x86_64-2.7/psycopg/adapter_asis.o build/temp.linux-x86_64-2.7/psycopg/adapter_binary.o build/temp.linux-x86_64-2.7/psycopg/adapter_datetime.o build/temp.linux-x86_64-2.7/psycopg/adapter_list.o build/temp.linux-x86_64-2.7/psycopg/adapter_pboolean.o build/temp.linux-x86_64-2.7/psycopg/adapter_pdecimal.o build/temp.linux-x86_64-2.7/psycopg/adapter_pint.o build/temp.linux-x86_64-2.7/psycopg/adapter_pfloat.o build/temp.linux-x86_64-2.7/psycopg/adapter_qstring.o build/temp.linux-x86_64-2.7/psycopg/microprotocols.o build/temp.linux-x86_64-2.7/psycopg/microprotocols_proto.o build/temp.linux-x86_64-2.7/psycopg/typecast.o -lpq -o build/lib.linux-x86_64-2.7/psycopg2/_psycopg.so

    no previously-included directories found matching 'doc/src/_build'
  Running setup.py install for dj-database-url

Successfully installed Django psycopg2 dj-database-url
Cleaning up... 
```

非常感谢您的帮助！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T04:18:51.037

编辑您的 sources.list 文件（通常在 中找到）并为每个对应的行`/etc/apt/sources.list`添加一个条目。`deb-src``deb`

> deb [http://in.archive.ubuntu.com/ubuntu/](http://in.archive.ubuntu.com/ubuntu/)精确主要受限
> 
> deb-src [http://in.archive.ubuntu.com/ubuntu/](http://in.archive.ubuntu.com/ubuntu/)精确主受限**#添加这一行**
> 
> deb [http://in.archive.ubuntu.com/ubuntu/precision-updates](http://in.archive.ubuntu.com/ubuntu/)主要受限
> 
> deb-src [http://in.archive.ubuntu.com/ubuntu/precision-updates](http://in.archive.ubuntu.com/ubuntu/) main restricted **#添加这一行**

两者的区别：

*   `deb`：这些存储库包含二进制文件或预编译包。大多数用户都需要这些存储库。
*   `deb-src`：这些存储库包含软件包的源代码。对开发人员有用。

现在尝试：

```
sudo apt-get update
sudo apt-get build-dep psycopg2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T04:08:38.370

我发现我的 heroku django 应用程序从一开始就崩溃的原因是因为我有这些代码行，

数据库['default'] = dj_database_url.config()

然后

DATABASES = { 'default': { 'ENGINE': 'django.db.backends.', # 添加 'postgresql_psycopg2'、'mysql'、'sqlite3' 或 'oracle'。'NAME': '', # 如果使用 sqlite3，则为数据库文件的路径。'USER': '', # 不与 sqlite3 一起使用。'PASSWORD': '', # 不与 sqlite3 一起使用。'HOST': '', # 设置为本地主机的空字符串。不与 sqlite3 一起使用。'PORT': '', # 默认设置为空字符串。不与 sqlite3 一起使用。} }

我只是重新排列了它们的顺序，以便这个 DATABASES['default'] 在创建字典之后出现....

我的应用程序崩溃了 bkz 我试图初始化一个还不存在的字典:(

我没有在我的电脑上看到错误 bkz 我太天真/傲慢了运行 runserver 命令来查看我是否得到了 django “它有效”页面 bkz 我不认为我篡改了 w/任何东西......在现实是我盲目地遵循 heorku 教程使用了错误的 python 代码。

我仍然不确定所有那些 psycopg 的东西是怎么回事，找不到源代码和 gcc 垃圾，但我的 django 应用程序现在运行良好......

谢谢 ：）

# android - 你如何使用 MotionEvent.ACTION_POINTER_INDEX_SHIFT？

> ID：14391818
> 
> 赞同：6
> 
> 时间：2013-01-18T03:08:27.290
> 
> 标签：android, multi-touch

我一直在玩游戏，我正在尝试制作控制器，没什么太复杂的，为此我需要跟踪 2 个输入（手指）：1 开火按钮和移动键。（上、下、左、正确的）

这就是问题所在：手指 1 向下，手指 2 向下，手指 1 向上认为它是 2，然后手指 2 向上认为它是 1。

```
D/Controlls(18849): Action Down 1
D/Controlls(18849): Coordinates 267.7908 415.24274
D/Controlls(18849): Action Pointer Down 2
D/Controlls(18849): Coordinates 281.11423 417.23993
D/Controlls(18849): Action Pointer UP 1
D/Controlls(18849): Coordinates 272.7869 419.23718
D/Controlls(18849): Action UP 2
D/Controlls(18849): Coordinates 1148.103 439.20947 
```

这是处理 2 个输入的 OnTouchEvent 的代码：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    int index = event.getActionIndex();
    int pointerId = event.getPointerId(index);
    int action = event.getActionMasked();

    int oldX, oldY;

    switch (event.getAction() & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
        {
            hero.moveControlls((int)event.getX(), (int)event.getY());
            Log.d("Controlls", "Action Down "+ pointerId);
            Log.d("Controlls", "Coordinates "+ event.getX() + " "+ event.getY());
            break;
        }

        case MotionEvent.ACTION_UP:
        {
            hero.setScreenTouching(false);
            Log.d("Controlls", "Action UP "+ pointerId);
            Log.d("Controlls", "Coordinates "+ event.getX() + " "+ event.getY());
            break;
        }

        case MotionEvent.ACTION_POINTER_DOWN:
        {
            Log.d("Controlls", "Action Pointer Down "+ pointerId);
            Log.d("Controlls", "Coordinates "+ event.getX() + " "+ event.getY());                   
            break;
        }

        case MotionEvent.ACTION_POINTER_UP:
        {
            Log.d("Controlls", "Action Pointer UP "+ pointerId);
            Log.d("Controlls", "Coordinates "+ event.getX() + " "+  event.getY());
            break;
        }
    }
    return true;
} 
```

现在，我查看了示例，但无法理解它们。我在 API 中查找了 MotionEvent，它说要使用 $ACTION_POINTER_INDEX_SHIFT$，我不知道如何使用，因为他们没有示例或其他东西可以使其更容易理解。有关如何执行此操作的任何帮助？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-22T17:50:50.783

每当辅助指针向下或向上时，都会触发 ACTION_POINTER_DOWN 和 ACTION_POINTER_UP。如果屏幕上已经有一个指针并且有一个新的向下，您将收到 ACTION_POINTER_DOWN 而不是 ACTION_DOWN。如果指针上升但仍有至少一个触摸屏幕，您将收到 ACTION_POINTER_UP 而不是 ACTION_UP。

ACTION_POINTER_DOWN 和 ACTION_POINTER_UP 事件在操作值中编码额外信息。用 MotionEvent.ACTION_MASK 与它为我们提供动作常量，而用**ACTION_POINTER_INDEX_MASK**与它为我们提供向上或向下指针的索引

提取离开触摸传感器的指针索引的最佳方法。

**int pointerIndex = (event.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;**

我会相应地更改您的代码，如下所示：

```
case MotionEvent.ACTION_POINTER_UP:
{
    int index = (event.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
    int pointId = event.getPointerId(index);
    Log.d("Controlls", "Action Pointer UP "+ pointerId);
    Log.d("Controlls", "Coordinates "+ event.getX(index) + " "+  event.getY(index));
    break;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T03:32:49.977

我认为混淆可能是方法总是返回**主**`getX()`指针的`getY()`坐标（第一个/唯一一个向下）。因此，您的日志中的前三个事件手指 1 是主要事件，然后在最后一个事件中甚至只剩下手指 2，因此它成为主要事件。

 **如果要正确跟踪两个手指的事件，则需要使用`getX(int)`and `getY(int)`; 将指针索引作为参数的版本，因此您可以离散地获取每个事件中每个手指的坐标。请注意，如果每个手指以不同的顺序上下移动，它们的索引可能会发生变化，但给定的手指将始终具有相同的指针 ID。

一个好的方法是检查每个事件中的指针数量（例如`getPointerCount()`）。用一根手指，索引0有效；用两个手指，索引 0 和 1 有效。去获取每个有效指针的坐标，然后用`getPointerId()`它来确定每个坐标对应该匹配到哪个手指。

**编辑**

对您发布的返回右指针坐标的源代码的最简单修改是将索引添加到辅助指针的参数中，如下所示：

```
int index = event.getActionIndex();
int pointerId = event.getPointerId(index);
int action = event.getActionMasked();

int oldX, oldY;

switch (event.getActionMasked()) {
    case MotionEvent.ACTION_DOWN:
    {
        hero.moveControlls((int)event.getX(), (int)event.getY());
        Log.d("Controlls", "Action Down " + pointerId);
        Log.d("Controlls", "Coordinates "+ event.getX() + " "+ event.getY());
        break;
    }

    case MotionEvent.ACTION_UP:
    {
        hero.setScreenTouching(false);
        Log.d("Controlls", "Action UP "+ pointerId);
        Log.d("Controlls", "Coordinates "+ event.getX() + " "+ event.getY());
        break;
    }

    case MotionEvent.ACTION_POINTER_DOWN:
    {
        Log.d("Controlls", "Action Pointer Down "+ pointerId);
        Log.d("Controlls", "Coordinates "+ event.getX(index) + " "+ event.getY(index));
        break;
    }

    case MotionEvent.ACTION_POINTER_UP:
    {
        Log.d("Controlls", "Action Pointer UP "+ pointerId);
        Log.d("Controlls", "Coordinates "+ event.getX(index) + " "+  event.getY(index));
        break;
    }
} 
```

这应该更符合您期望看到的记录数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T21:15:28.267

如果您以与按下不同的顺序释放指针，上述代码可能会失败（使用多点触控时可能会发生什么情况）。我发现以下代码适用于 3 个指针，按下然后释放的顺序无关紧要：

```
 case MotionEvent.ACTION_UP: // for single touch
    case MotionEvent.ACTION_POINTER_UP: // when order of touch and release is the same
    case MotionEvent.ACTION_POINTER_UP + ((1 << MotionEvent.ACTION_POINTER_INDEX_SHIFT)): // for any order of two pointers
    case MotionEvent.ACTION_POINTER_UP + ((2 << MotionEvent.ACTION_POINTER_INDEX_SHIFT)): // for any order of three pointers
    case MotionEvent.ACTION_OUTSIDE: // when moving touch out of the view
    case MotionEvent.ACTION_CANCEL: // when canceling touch (eg by home button)
    // some code to support releasing pointers
    break; 
```

*请记住， case*语句旁边必须是一个常量值，因此您无法根据*event.getMotion()*计算值。**

# php - 抓取两个值 Javascript

> ID：14391822
> 
> 赞同：1
> 
> 时间：2013-01-18T03:08:58.577
> 
> 标签：php, javascript, jquery

我从一个列表框中获取值并将其传递给另一个列表框，我让所有东西都使用一个值 $Lid，但现在我需要两个 $Lid 和 $Cid，这是正确的方法吗？

```
 $(document).ready(function()
{

 $(".Doggie").change(function()
{
var LocationString = $(this).find(":selected").val();
    var CityString = $(this).find(":selected").val();
    $.ajax({
        type: "POST",
        url: "ajax_city.php",
        data: {Lid : LocationString, Cid : CityString},
        cache: false,
        success: function (html) {
            $(".Kitty").html(html);
        }
    });
});

$('.Kitty').live("change",function(){
    var LocationString = $(this).find(":selected").val();
    var CityString = $(this).find(":selected").val();
    $.ajax({
        type: "POST",
        url: "ajax_area.php",
        data: {Lid : LocationString, Cid : CityString},
        cache: false,
        success: function (html) {                                     
$(".Pig").html(html);
} 
});

});
});
</script>
</head>
<body>
        <div id="frame1">
        <label>Place :</label>
        <select name="Doggie" class="Doggie" id="Doggie">
        <option selected="selected">--Select Place--</option>
        <?php
                $sql = mysql_query("SELECT tblLocations.RestID as Lid, tblLocations.CityID as Cid, tblRestaurants.RestName as name
            FROM tblRestaurants INNER JOIN tblLocations ON tblRestaurants.RestID = tblLocations.RestID
             GROUP BY tblLocations.RestID, tblRestaurants.RestName
            ORDER BY tblRestaurants.RestName ASC");
        while($row=mysql_fetch_array($sql))
        {
        echo '<option value="'.$row['Lid'].''.$row['Cid'].'">'.$row['name'].'</option>';
        } ?>
         </select>
        <label>City :</label>
         <select name="Kitty" class="Kitty" id="Kitty">
         <option selected="selected">--Select City--</option>
        </select>
        <label>Area: :</label>
         <select name="Pig" class="Pig" id="Pig">
        <option selected="selected">--Select Area--</option>
        </select>
        </div>

</body>
</html> 
```

和...

```
<?php
require ('config.php');

if ($_POST['Lid']) {
    $Lid = $_POST['Lid'];
    $sql = mysql_query("SELECT tblLocations.RestId as Lid, tblLocations.CityID as Cid,     tblCities.CityName as name
                FROM tblLocations INNER JOIN tblCities ON tblLocations.CityID = tblCities.CityID
                WHERE tblLocations.RestID = $Lid
                GROUP BY tblLocations.RestID, tblCities.CityName
                ORDER BY tblCities.CityName ASC");
    echo '<option selected="selected">--Select City--</option>';
    while ($row = mysql_fetch_array($sql)) {
        echo '<option value="' . $row['Lid'] . '' . $row['Cid'] . '">' . $row['name'] . '</option>';
    }
}

?> 
```

现在它没有返回任何东西，所以我不得不假设它是错误的。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:13:47.087

我建议进行以下更改：

```
 var LocationString = $(this).find(":selected").val();
    var CityString = $(this).find(":selected").val();
    $.ajax({
        type: "POST",
        url: "ajax_city.php",
        data: {Lid : LocationString, Cid : CityString},
        cache: false,
        success: function (html) {
            $(".Kitty").html(html);
        }
    }); 
```

您正在添加两个`data`值，这不是正确的做法。只需传递带有所需键和值的单个文字对象，并允许 JQuery 为您进行格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T03:56:19.657

这做到了。

```
$(document).ready(function()
            {
            $(".Doggie").change(function()
            {
                var LocationString ='Rid='+ $(this).val();
            $.ajax({
            type: "POST",
            url: "place_city.php",
            data: LocationString,
            cache: false,
            success: function (html) {
            $(".Kitty").html(html);
            }
            });
            });

            $('.Kitty').live("change",function(){
            var Rid = $('#Doggie').val(),  // This is the value of the id="Doggie" selected option
            Cid = $(this).val(); // This is the value of the id="Kitty" selected option
            //alert("Rid = " + Rid + " Cid = " + Cid); 
            $.ajax({
            type: "POST",
            url: "place_area.php",
            data: {"Rid":Rid,"Cid":Cid}, 
            cache: false,
            success: function (html) {
            //alert('This is what is returned from the php script: ' + html);                                                           
            $(".Pig").html(html);
            }});});}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T03:12:10.957

我不明白你为什么在两个变量中存储相同的值：

```
var LocationString = 'Lid=' + $(this).val();
var CityString = 'Cid=' + $(this).val(); 
```

可以简化为：

```
var LocationString = $(this).val(); 
```

然后你只有一个值，所以`data`应该是下面的格式

```
data: {
    'Lid': LocationString
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T03:24:13.813

数据应该是格式

```
data: {Lid : LocationString, Cid : CityString}, 
```

并检查您的查询结果是什么

检查它

```
print_r(mysql_fetch_array($sql)) 
```

如果您的查询没有任何结果，则在 while 循环内回显将不起作用

# php - RESTful 的缓存如何工作（和使用）

> ID：14391824
> 
> 赞同：2
> 
> 时间：2013-01-18T03:09:15.317
> 
> 标签：php, rest

我开发了一个非常小的 REST API（使用 PHP），它提供有关用户的信息（也更新和创建用户，但对问题无关紧要）。只是为了显示可用的调用（顺便说一下，JSON 输出）：

`/api/users/54216`

`/api/users/54216?fields=id,name`

`/api/users/54216/photos`

`54216`是一个示例用户 ID。

直到今天，我只使用缓存来保存要显示的 html 页面，实际上并不复杂 - 从未使用缓存来仅保存数据。

我应该怎么做才能保存这些电话，然后我该如何使用它？我的目标是（我认为..）在 X 分钟内将数据保存到`JSON`文件一次，并在需要时获取文件缓存和`decode`它。

另外，你建议我如何缓存用户的特定信息？因为调用 no.1 输出所有信息，调用 no.2 只输出特定字段，我不想使用 2 个缓存文件，因为它真的没有效果。

我从来没有参与过这个部分（缓存[json]数据和REST API，这是我的第一次），所以我很困惑。

**编辑：**

我说的是服务器端缓存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T04:16:06.160

我建议你阅读[HTTP Cache](http://symfony.com/doc/2.0/book/http_cache.html)

> 第一个重要的原则是了解 HTTP 缓存是如何工作的，基本上有两部分，TTL（缓存控制）和过时检查（ETag）。当源服务器生成资源时，您需要考虑它已经消失了。您不再可以控制它，您只能向客户提出如何处理它的建议。您拥有的两种机制是 TTL（即客户端在返回之前应将对象保留在缓存中的时间）和过时检查（这是返回的资源的版本），它们可以与新的 GET 请求一起发送到源服务器，说“嘿，我有这个版本还不错”。让 Origin 服务器有机会说是的，继续使用该服务器并提供一个新的 TTL，如果它仍然有效的话。
> 
> 您需要以不同的方式使用这两个控件来获得您想要的效果。例如，在提供永远不会更改的文件时（例如用于构建的 css），您可以设置一个非常长的 TTL，并且没有 etag。对于不经常更改但需要快速更改的内容（例如预订中的派对成员），您可以设置较低的 TTL（例如 1 分钟）和 ETag。在第二个示例中，您将 TTL 设置为 1 分钟，以帮助处理来自客户端的突发事件，以免淹没原始服务器（规模），并且 ETag 允许原始服务器跳过保留对象的构建，如果它有验证方法当前有效的 ETag 比构建整个预留要快。另一个例子是不经常改变的东西，当它改变时，它可以缓慢传播（就像用户的广告推荐配置文件一样）您可以设置更高的 TTL（例如 6 小时），而不必太担心 ETag（尽管它仍然很有用）。参考：[https://groups.google.com/d/msg/api-craft/YJMH0XMQJIM/HtdAPEXbQLMJ](https://groups.google.com/d/msg/api-craft/YJMH0XMQJIM/HtdAPEXbQLMJ)

或者，如果您想在服务器端缓存，请查看 memcached（[教程](http://www.webdeveloperjuice.com/2010/01/25/10-baby-steps-to-install-memcached-server-and-access-it-with-php/)）

并查看反向代理缓存解决方案，如[清漆](https://www.varnish-cache.org/)等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T11:05:06.417

[https://devcenter.heroku.com/articles/ios-network-caching-http-headers](https://devcenter.heroku.com/articles/ios-network-caching-http-headers)

这从 iOS 的角度解释了缓存，但是对术语 Cache-Control、max-age、ETags、Last Modified 进行了很好的解释。

# asp.net - 带有外来文本的 IIS URL 重写模块

> ID：14391825
> 
> 赞同：0
> 
> 时间：2013-01-18T03:09:18.620
> 
> 标签：asp.net, url-rewriting, iis-7.5, httpmodule

我们使用 IIS URL Re-write 模块，像这样

```
<rule name="RewriteSearch" stopProcessing="true">
<match url="^Search/([_0-9a-z+-]+)" />
<action type="Rewrite" url="CommonPages/Search.aspx?term={R:1}" />
</rule> 
```

[http://www.tickettail.com/Search/NormalText123](http://www.tickettail.com/Search/NormalText123) 工作正常

但...

[http://www.tickettail.com/Search](http://www.tickettail.com/Search) /ราคัดมาใ

*（这是泰语）* 不会。**如何修改匹配以允许外来文本？**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:40:21.587

您要匹配的正则表达式只接受字符`_`、`0`to `9`、`a`to`z`和。为了接受所有字符，您必须将正则表达式修改为 eg （这接受任何字符并且需要至少一个字符。`+``-``(.+)`

其次，为了将任何字符正确传递到搜索页面，您必须使用内置`{UrlEncode:{}}`函数对术语进行 URL 编码。还要确保您的页面可以处理和输出 UTF-8。

以下规则有效：

```
<rule name="RewriteSearch" stopProcessing="true">
    <match url="^Search/(.+)" />
    <action type="Rewrite" url="CommonPages/Search.aspx?term={UrlEncode:{R:1}}" />
</rule> 
```

# python - 如何在python的另一个方法中调用一个类方法？

> ID：14391828
> 
> 赞同：1
> 
> 时间：2013-01-18T03:09:29.163
> 
> 标签：python, class, methods

我正在尝试打印“好的，谢谢”。当我在 shell 上运行它时，它会在单独的行上打印，并且“谢谢”在“好的”之前打印。谁能帮助我做错了什么？

```
>>> test1 = Two() 
>>> test1.b('abcd') 
>>> thanks 
>>> okay 
```

我的代码

```
class One:
     def a(self):
         print('thanks')

class Two:
     def b(self, test):
         test = One()
         print('okay', end = test.a()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:31:18.330

我会尝试这样的事情，因为这意味着您不必更改第一类。这减少了您必须更改的类的数量，从而隔离了更改和错误范围；并保持第一类的行为

```
class One:
     def a(self):
         print('thanks')

class Two:
     def b(self, test):
         test = One()
         print('okay', end=' ')
         test.a() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T03:13:07.290

`print`在处理结果表达式之前按顺序计算函数。

```
def a(): print('a')
def b(): print('b')
def c(): print('c')

print(a(), b())
print('a', b())
print ('a', b(), c())
print (a(), 'b', c()) 
```

输出：

```
a
b
(None, None)
b
('a', None)
b
c
('a', None, None)
a
c
(None, 'b', None) 
```

因此，python 在将元组传递给打印之前对其进行评估。在评估它时，方法 'a' 被调用，导致打印 'thanks'。

然后在收益中打印语句`b`，这将导致打印“好的”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T03:16:45.983

您的问题是，当您调用 时`test.a()`，您打印一个字符串，而不是返回它。更改您的代码执行此操作，它会工作得很好：

```
 def a(self):
     return 'thanks' 
```

根据您在问题中所说的话，您似乎不需要将`end`关键字参数用于`print`. 只需`test.a()`作为另一个参数传递：

```
print('okay,', test.a()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T03:28:52.947

要打印“好的，谢谢”，您的 One.a() 应该返回一个字符串而不是单独的打印语句。

也不确定 Two.b 中的“测试”参数是什么，因为您立即将其覆盖为 One 类的实例。

```
class One:
    def a(self):
        return ' thanks'

class Two:
    def b(self):
        test = One()
        print('okay', end = test.a())

>>>> test1 = Two()
>>>> test1.b()
okay thanks
>>>> 
```

# asp.net - 获取服务器名称 + 文件夹名称（没有脚本名称）

> ID：14391833
> 
> 赞同：0
> 
> 时间：2013-01-18T03:10:12.423
> 
> 标签：asp.net

如何在不包含脚本名称的情况下获取服务器名称 + 文件夹名称？

```
string filePath = Request.QueryString.Get("filepath");

string serverPath = Request.ServerVariables["SERVER_NAME"] + "/";
string fullUrl = "http://" + serverPath + filePath;
Response.Write(fullUrl); 
```

上面的代码缺少文件夹名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T04:44:45.603

您不能完全做到这一点，因为 HTTP 对什么是文件夹和什么是文件“视而不见”。

您可能熟悉诸如[http://www.acme.com/products/view.asp](http://www.acme.com/products/view.asp)之类的 URL，但完全有效的 URL 也可能是[http://www.acme.com/products/view](http://www.acme.com/products/view)，因此您不能区分文件夹和文件名。

您可以做什么，前提是：

1.  您了解您的应用程序并且知道它只运行*文件*（与运行某些逻辑代码的某些路由机制相反，例如在 MVC 中）
2.  每个文件都包含一个扩展名

就是自己解析路径字符串，在路径末尾寻找*file.ext*模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T05:43:28.120

[本页](http://www.cambiaresearch.com/articles/53/how-do-i-get-paths-and-url-fragments-from-the-httprequest-object "这一页")演示了 HttpRequest 的各个部分是如何分解的。您可以`Request.FilePath`像这样获取并删除最后一段：

```
string directory = Request.FilePath.Remove(Request.FilePath.LastIndexOf('/')); 
```

# ruby-on-rails - 如何在 Capybara 中获取表单的动作？

> ID：14391848
> 
> 赞同：3
> 
> 时间：2013-01-18T03:12:29.753
> 
> 标签：ruby-on-rails, ruby, rspec, tdd, capybara

如何在 Capybara 中获取表单的动作？

我知道这不是正确的 BDD，但该表单正在访问应用程序之外的 API。

可以使用 Webmock 检查表单是否已提交，但在这种情况下，我认为确保正确设置操作 URL 会更简单。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-20T22:25:51.983

我很确定`capybara`（至少 2.1.0 版）有帮手让这更容易。

在我们的规范中，我们检查这样的表单操作：

```
form_action = find('#form_id')['action'] 
```

所以你不需要获取 Nokogiri 原生元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T03:31:24.597

您可以使用 .native 从 Capybara 元素中检索 Nokogiri 节点，从那里您可以轻松查询节点的属性：

```
element = find('#form_id')
node = element.native

form_action = node.attributes['action'] 
```

# sql - 需要来自更复杂查询的 COUNT

> ID：14391849
> 
> 赞同：3
> 
> 时间：2013-01-18T03:12:31.807
> 
> 标签：sql, sql-server, sql-server-2008, tsql, count

我通常在子查询中使用 COUNT 来获取所需的数字，但在这种情况下，我需要一些帮助，因为查询包含太多参数。

```
SELECT a.[QueueID]
  ,a.[CouponID]
  ,a.[ListingID]
  ,a.[User_ID]
  ,b.[CouponID]
  ,b.[ListingID]
  ,b.[CouponActive] 
  ,b.[CouponExpire] 
  ,b.[IsDeleted]
  ,c.[ListingID]
  ,c.[TypeID]
  ,c.[LevelID]
  ,@passedUserID as User_ID

FROM CouponQueue a
JOIN Coupon b
    on a.CouponID = b.CouponID
JOIN Listing c
    on b.ListingID = c.ListingID

WHERE (a.[User_ID] = @passedUserID)
AND (b.[CouponActive] = 1)
AND (b.[IsDeleted] = 0)
AND (b.[CouponExpire] > DATEADD(dd, -1, GETDATE()) OR b.[CouponExpire] IS NULL) 
```

因此，假设此查询返回 7 行的结果。我所需要的只是我的 VIEW 的这个号码。所以我想将最终结果限制为单行，以便最终得到：

```
[TotalCount] <-- Field name
[7] <-- Result 
```

但不是 7 行数据。我只需要上面查询的计数。仍在努力学习。我看了其他几个例子，但我没有找到一个符合所有条件的例子......这让我很困惑。请帮忙！

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T03:14:59.813

这对你有用吗？

```
select count(*) as TotalCOunt from (
SELECT a.[QueueID] /* 
  ,a.[CouponID]
  ,a.[ListingID]
  ,a.[User_ID]
  ,b.[CouponID]
  ,b.[ListingID]
  ,b.[CouponActive] 
  ,b.[CouponExpire] 
  ,b.[IsDeleted]
  ,c.[ListingID]
  ,c.[TypeID]
  ,c.[LevelID]
  ,@passedUserID as User_ID */

FROM CouponQueue a
JOIN Coupon b
    on a.CouponID = b.CouponID
JOIN Listing c
    on b.ListingID = c.ListingID

WHERE (a.[User_ID] = @passedUserID)
AND (b.[CouponActive] = 1)
AND (b.[IsDeleted] = 0)
AND (b.[CouponExpire] > DATEADD(dd, -1, GETDATE()) OR b.[CouponExpire] IS NULL)
) t 
```

您可以删除计数的列。它们实际上不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T03:16:50.623

应该可以只添加 COUNT(*)：

```
SELECT COUNT(*) as TotalCount    
FROM CouponQueue a
JOIN Coupon b
    on a.CouponID = b.CouponID
JOIN Listing c
    on b.ListingID = c.ListingID
WHERE (a.[User_ID] = @passedUserID)
AND (b.[CouponActive] = 1)
AND (b.[IsDeleted] = 0)
AND (b.[CouponExpire] > DATEADD(dd, -1, GETDATE()) OR b.[CouponExpire] IS NULL) 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-17T19:00:03.707

您可以将以下示例放在 SQL Developer 上运行以进行计数：

```
SELECT count(*) as totalCount (*-open a parentheses - your original query -close the parentheses*) 
```

# primefaces - primefaces 树表

> ID：14391850
> 
> 赞同：0
> 
> 时间：2013-01-18T03:12:47.503
> 
> 标签：primefaces, treetable

我对primefaces很陌生。我创建了一个树表，所有项目都从数据库中获取。我的问题是如果我选择一个子项，实际选择的是父项，所以我不能对子项进行操作。这是我的树表代码

```
<p:treeTable id="treeTable" value="#{aZoningController.root}" var="zonning" >
   <p:column style="text-align: left; width: 93%"> 
       <f:facet name="header"> 
      #{lbl.aZoning_pokok}
       </f:facet> 
       <h:outputText value="#{zonning.nama}" /> 
   </p:column>
   <p:column style="text-align: center; width: 5%"> 
       <f:facet name="header"> 
      #{lbl.aZoning_kod}
       </f:facet> 
       <h:outputText value="#{zonning.kod}" /> 
   </p:column>
   <p:column style="vertical-align: text-top">
       <p:menuButton value="" styleClass="mb">   
      <p:menuitem value="Update" oncomplete="confirmation.show()" process="@this" update=":actionForm:actionDialog" icon="ui-icon-document-b">
          <f:setPropertyActionListener value="#{zonning}" target="#{aZoningController.selectedNode}" /> 
      </p:menuitem>
      <p:menuitem value="Delete" oncomplete="confirmation.show()" process="@this" update=":myform:confirmDialog" icon="ui-icon-trash">
          <f:setPropertyActionListener value="#{zonning}" target="#{aZoningController.selectedNode}" /> 
      </p:menuitem>
       </p:menuButton> 
   </p:column>
</p:treeTable> 
```

我正在使用这个填充tretable

```
public TreeNode getRoot() {
   root = new DefaultTreeNode("Root", null);
   List<aZoning> zon = ejbFacade.getRoot();
   for (aZoning z : zon) {
       TreeNode zonning = new DefaultTreeNode(z, root);
       createNode(z.getId(), zonning);
   }
   return root;
}

private TreeNode createNode (String idParent, TreeNode parent) {
   TreeNode node = null;
   List<aZoning> zonning = ejbFacade.getZonning(idParent);
   for (aZoning z : zonning) {
       node = new DefaultTreeNode(z, parent);
       createNode(z.getId(), node);
   }
   return node;
} 
```

请给我建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:50:51.233

```
<f:setPropertyActionListener value="#{zonning}" target="#{aZoningController.selectedNode}" /> 
```

这会将 zonning 的值设置为您的 aZoningController 类的 selectedNode 属性。在选择 menuItem 时，尝试设置所需的值，而不是进行分区。zonning 是导致问题的父节点的值。

# c++ - Windows.h - 焦点进入文本输入时的通知

> ID：14391852
> 
> 赞同：5
> 
> 时间：2013-01-18T03:13:01.750
> 
> 标签：c++, windows, winapi

我正在尝试提出一种解决方案，用于在焦点进入文本字段时设置通知。最终目标是使用屏幕键盘重新创建您在移动设备上看到的功能类型。

到目前为止，我一直在探索`SetWinEventHook`with`EVENT_OBJECT_FOCUS` 和`GetGUIThreadInfo`with `GUI_CARETBLINKING`。

从文档：

> EVENT_OBJECT_FOCUS
> 
> 对象已获得键盘焦点。系统为以下用户界面元素发送此事件：列表视图控件、菜单栏、弹出菜单、切换窗口、选项卡控件、树视图控件和窗口对象。
> 
> GUI_CARETBLINKING 插入符号的闪烁状态。如果插入符号可见，则设置该位。

使用这些方法我想出了这个解决方案：

```
void TextInputHelper::setupEventHook(FREContext iCtx)
{
    ctx = iCtx;
    CoInitialize(NULL);

    evHook = SetWinEventHook(EVENT_OBJECT_FOCUS, EVENT_OBJECT_END, NULL,
    handleEventObjectFocus, 0, 0,
    WINEVENT_OUTOFCONTEXT | WINEVENT_SKIPOWNPROCESS);

}

void CALLBACK handleEventObjectFocus(HWINEVENTHOOK hook, DWORD evt, HWND hwnd,
                                 LONG idObj, LONG idChild,    DWORD thread, DWORD time)
 {
    GUITHREADINFO threadInfo;
    threadInfo.cbSize = sizeof(GUITHREADINFO);

    BOOL result = GetGUIThreadInfo(thread, &threadInfo);

    if(threadInfo.flags & GUI_CARETBLINKING)
    {

        //text field focus
    }

} 
```

这在某些情况下似乎确实有效，但绝对不可靠。Notepad 和 IE 之类的程序似乎可以正常工作，但其他程序（例如 Firefox）则不行。这也不适用于网站上的文本字段等内容，因为它看起来`handleEventObjectFocus`不会被调用。

有谁知道解决这个问题的另一种方法？我一直在四处寻找，似乎我可能在可访问性 API 中寻找一些东西，但我无法深入挖掘它。

谢谢！

**编辑**

为了澄清，我希望在焦点进入任何文本字段时收到通知。这个应用程序是一个win32 dll，永远不会有自己的焦点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T06:15:08.897

如果您使用标准 Windows 控件[WM_SETFOCUS](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646283%28v=vs.85%29.aspx)应该可以解决问题。无需花哨的钩子等。

编辑：对于系统范围的行为，您可以查看[SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)。要在系统范围内捕获事件，您需要在 DLL 中使用它。您可以使用多种钩子组合，包括捕获 WM_SETFOCUS 的钩子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:32:24.477

如果您尝试提供替代文本输入法，您应该查看“IME”-“输入法编辑器”。这些由操作系统直接支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T06:41:58.190

[您可以使用EN_SETFOCUS](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761685%28v=vs.85%29.aspx)通知来捕捉进入文本字段的入口。

WM_FOCUS 用于窗口本身，而不是用于其中的控件。否则说，如果你想使用 WM_FOCUS，你必须继承你的 EDIT 字段。这里没有必要。

编辑：您是否想要一个系统范围的行为并不完全清楚。在这种情况下，您必须使用上面答案中解释的钩子（参见 SetWindowsHookEx）。对不起。

# perl - 如何在perl中匹配多行数据

> ID：14391855
> 
> 赞同：0
> 
> 时间：2013-01-18T03:13:07.400
> 
> 标签：perl, pattern-matching

这个问题是指

[如何在 sed 中使用贪婪方法替换文本？](https://stackoverflow.com/questions/14373441/how-to-replace-text-using-greedy-approach-in-sed)

我必须匹配文件中的多行数据，并且需要使用 perl 将它们替换为其他文本。

猫文件

```
 &lt;strong&gt;ABC
       &lt;/strong&gt; 
```

perl 脚本：code.pl

```
 #!/bin/perl
 open(fh, $ARGV[0]) or die "could not open file\n";
 while($input = <fh>)
 {
      if($input =~/&lt;strong&gt;(.*?)\n(\s)*&lt;\/strong&gt;/)
      {
          print($1,"\n");
      }
 }
 close(fh); 
```

perl 代码.pl 文件

输出：无输出

如何解决上述pblm。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T06:02:15.257

```
use File::Slurp qw( read_file );

my $string = read_file( $ARGV[0] );

$string =~ s/\&lt;strong&gt;(.*?)&lt;\/strong&gt;/<b>${1}<\/b>/gs;

print $string; 
```

此示例使用 File::Slurp 模块一次读取整个文件。

然后它使用带有`g`and`s`修饰符的正则表达式。`s`允许`.*?`匹配换行符。使`g`搜索全局化。全局意味着它将找到给定字符串中的所有匹配项。没有`g`唯一的第一个实例将被替换。如果您希望搜索不区分大小写，可以使用`i`正则表达式修饰符。

这`${1}`是对括号中匹配项的反向引用。

这个例子产生：

```
<b>ABC
     </b> 
```

# c - C 中的所有权约定

> ID：14391856
> 
> 赞同：2
> 
> 时间：2013-01-18T03:13:07.553
> 
> 标签：c, ownership

假设我想使用一个包含这 2 个标头的库：

```
// types.h
typedef const char* Value;
typedef const char* Key;

// map.h
/** The given name and value will be copied into the map */
void add(struct Map* m, Key key, Value value); 
```

我假设注释意味着`char*`s`key`和s 的内容`value`将被`add`函数复制，并且在它返回后它不会存储指针以供使用。这意味着调用函数可以在调用之后立即对这些指针执行任何操作，例如`free`ing`key`和。`value``add`

调用函数也可以期望`add`不会修改`key`or `value`。

现在，如果没有该注释并且既没有实现的源代码也没有使用示例，那么有经验的 C 程序员会如何假设这些所有权问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:15:21.727

首先是尝试并获取文档。除非 API 记录行为，否则无法 100% 确定。如果所有尝试都失败，那么可以合理地假设：

1.  函数既不修改也不修改，`Key`因为`Value`它们被传递为`const`.
2.  除非明确提及，否则调用者保留传递给函数的变量的所有权，并且可以对传递的变量`Key`和`Value`函数调用之后做任何他们想做的事情。

此外，一个人应该通过严格的测试来确认假设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T03:19:27.963

就个人而言，我希望它能够复制这些值。因为如果不这样做，与局部变量一起使用将是非常危险的。

此外，如果是地图，您必须跟踪所有元素以及它们的分配方式，并在释放地图后自行释放它们（如果不会发生复制）。

# jquery - 使用 jQuery 的 $.get ajax 方法从 asp 页面检索数据

> ID：14391857
> 
> 赞同：1
> 
> 时间：2013-01-18T03:13:13.093
> 
> 标签：jquery, ajax, asp-classic, get

jQuery 的`$.get`方法应该是一种检索由运行 jscript 的 .asp 页面生成的数据的简单方法，但到目前为止我还不能让它工作。

来自 jQuery 文档的模型示例是

```
$.get("test.php", function(data){
    alert("Data Loaded: " + data);
}); 
```

但是，当我尝试使用 asp 页面而不是 .php 函数时，我一无所获。我的asp页面：

```
<% response.write "Hello World" %> 
```

我的 html 页面，除了 jQuery 的 headers 和 src refs，很简单

```
$.get("test.asp", function(data){
    alert("Data Loaded: " + data);
}); 
```

加载页面会导致空白页面。是否有原因导致这种情况无法发生，或者我只是设置错误？

# blogger - 使用偏好预览对 Google 小工具的更改

> ID：14391858
> 
> 赞同：0
> 
> 时间：2013-01-18T03:13:37.493
> 
> 标签：blogger, google-gadget

我刚刚[为我的 Blogger.com 博客构建了一张地图](http://www.fiveyearsabroad.com/p/map.html)。现在我想把它转换成一个小工具，这样我就可以把它移到我博客设计的侧边栏中，并与其他博主分享。

在开发过程中，我是否可以采用一种策略来测试我的小工具——最好是让我进行一些更改，然后在我的浏览器中刷新页面来测试它们？

将小工具添加到沙盒博客不起作用；似乎 XML 文件被缓存了，所以我必须等待预览更改（或不断将 URL 的名称更改为 XML 文件，但这很快就会让人恼火）。

我已将[Google 小工具编辑器](https://developers.google.com/gadgets/docs/tools#GGE)添加到我的 iGoogle 主页，以便我可以预览小工具，并且几乎可以工作......除了我无法在 GGE 的预览面板中为我的小工具首选项指定值，因此它不会呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:59:50.227

您是否尝试过添加

```
 ?nogadgetcache=1 
```

当你加载你的小工具？

# vb6 - 重绘时的欧洲号码转换

> ID：14391863
> 
> 赞同：0
> 
> 时间：2013-01-18T03:13:54.727
> 
> 标签：vb6, region, msflexgrid

我有一个 flexgrid 单元格没有处理我想要的欧洲数字格式。代码中的一些细节可能会从我这里抽象出来。

目前，我的控制面板“本地区域”设置为目标位置（丹麦/丹麦）。

我可以成功输入一个十进制值，例如丹麦格式的 12,36（美国格式当然是 12.36）。

该值被正确处理，并在传递给 SQL 并使用时进行处理。

之后，我假设在下面和这条线上发生了各种检查

`.Redraw = flexRDDirect`

在网格试图重绘的地方，我在这个单元格中的数字会进行一些转换。

***一个例子***

如果我输入 12,36，我相信逗号会以某种方式直接转换为小数点，并且首先使用 inplace 函数没有正确格式化从丹麦语到美国（反之亦然）。然后在某个时刻，单元格被重新验证，它假设这个值 12.36 仍然是丹麦格式，相当于一千二百三十六（但写得不好，因为千位分隔符的位置错误）。

所以现在我的值 12,36（或美国的 12.36）在丹麦语中变成了 12.36，如果格式正确（正确位置的千位分隔符），这实际上是 1.236,00（丹麦语），现在是我原始值的 100 倍12,36

那么在 vb6/flexgrid 中是否有一些东西明确地将这个逗号转换为小数点，然后尝试本地格式化（这基本上会将我的值乘以 100）？`.Redraw = flexRDDirect`在我看到值发生变化的那一行中，有什么东西被调用了吗？我怀疑某处有一些自定义代码试图适应本地区域格式本身，而不使用提供的函数。但也许不是！

所有这些都不是我的编码专业领域。如果需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:13:57.990

我发现了这个问题，正如我所怀疑的那样；其他东西试图转换数值并格式化它。出错的程序试图在数字上添加 0 和小数点。所以当 VB+region_settings 处理它（正确）时，它就搞砸了。

# java - 为什么我在 GridView 的 onMeasure 中得到空指针

> ID：14391866
> 
> 赞同：4
> 
> 时间：2013-01-18T03:14:16.660
> 
> 标签：java, android, nullpointerexception, universal-image-loader

当我尝试使用通用图像加载器在网格视图中设置图像时，出现空指针异常。崩溃发生在下载第一个图像时，并且在应用程序崩溃之前只下载了一个图像。（通过 httpscoop 确认）

**编辑：这是错误的。崩溃发生在第一个图像下载之前，因此它可能会尝试测量不存在的图像。**

这是我的网格项目

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/gridImageView"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:src="@drawable/ic_launcher"
    android:contentDescription="@string/gallery_grid_image_desc"/> 
```

gridview 布局只是一个gridview

```
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/galleryPicturesGrid"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:verticalSpacing="@dimen/gallery_grid_spacing"
    android:horizontalSpacing="@dimen/gallery_grid_spacing"
    android:numColumns="3" /> 
```

我的getView

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;
        ViewHolder holder = null;
        Log.d(TAG, "getView " + position);

        if (view == null) {
            view = ((Activity) context).getLayoutInflater().inflate(
                    R.layout.gallery_grid_item, null);
            holder = new ViewHolder();
            holder.thumb = (ImageView) view.findViewById(R.id.gridImageView);

            view.setTag(holder);
        } else {
            holder = (ViewHolder) view.getTag();
        }

        Picture picture = mPictures.valueAt(position);

        mImageLoader.displayImage(picture.getThumbUrl(), holder.thumb, mImageOptions);

        return null;
    } 
```

ImageLoader 配置

```
 ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(
            getApplicationContext()).memoryCacheSize(2 * 1024 * 1024)
            .discCache(new UnlimitedDiscCache(cacheDir))
            .denyCacheImageMultipleSizesInMemory()
            .offOutOfMemoryHandling()
            .threadPoolSize(4)
            .discCacheFileNameGenerator(new Md5FileNameGenerator())
            .memoryCache(new UsingFreqLimitedMemoryCache(2 * 1024 * 1024))
            .tasksProcessingOrder(QueueProcessingType.LIFO)
            .imageDownloader(new UrlConnectionImageDownloader(this))
            .build(); 
```

和选项

```
 galleryThumbImageOptions = new DisplayImageOptions.Builder()
    .showStubImage(R.drawable.p1_cover)
    .cacheOnDisc()
    .bitmapConfig(Bitmap.Config.RGB_565)
    .build(); 
```

和例外

```
01-18 10:56:15.434: E/AndroidRuntime(4089): FATAL EXCEPTION: main   
01-18 10:56:15.434: E/AndroidRuntime(4089): java.lang.NullPointerException
01-18 10:56:15.434: E/AndroidRuntime(4089):     at     android.widget.GridView.onMeasure(GridView.java:937)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.view.View.measure(View.java:8313)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.view.View.measure(View.java:8313)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.view.View.measure(View.java:8313)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.view.View.measure(View.java:8313)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.view.View.measure(View.java:8313)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.view.View.measure(View.java:8313)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.view.View.measure(View.java:8313)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.view.View.measure(View.java:8313)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.os.Looper.loop(Looper.java:123)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at android.app.ActivityThread.main(ActivityThread.java:3683)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at java.lang.reflect.Method.invokeNative(Native Method)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at java.lang.reflect.Method.invoke(Method.java:507)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-18 10:56:15.434: E/AndroidRuntime(4089):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-18T04:35:19.700

`null`从中返回是错误的`getView()`，您应该返回刚刚膨胀或转换的行项目。

# jquery - 将 jQuery 更新到 1.9.0 后，Unobtrusive Ajax 停止工作

> ID：14391867
> 
> 赞同：37
> 
> 时间：2013-01-18T03:14:26.190
> 
> 标签：jquery, asp.net-mvc-3, unobtrusive-ajax

我刚刚将 jQuery 和 jQuery UI 更新为：jquery-1.9.0.min.js 和 jquery-ui-1.9.2.min.js

而且...我所有不显眼的 Ajax 调用（Ajax.ActionLink、Ajax.BeginForm）都停止了正常工作——它们在新页面中打开结果，而不是更新现有的 div。

当我的页面加载时，我在 Firebug 中收到了这个 javascript 错误：

![在此处输入图像描述](../Images/6efb0af82d76afd6f0b1d3ae8c27787a.png)

代码当然没有改变，只是使用 Nuget 更新了 jQuery 脚本。

有人遇到过同样的问题吗？？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-01-24T23:32:32.053

**更新：**此问题已在最新的 NuGet 包中得到修复。我已经发布了另一个答案来反映这一点。 [https://stackoverflow.com/a/15539422/714309](https://stackoverflow.com/a/15539422/714309)

* * *

在`jquery.unobtrusive-ajax.js`中，找到并替换这四行：

1.  `$("a[data-ajax=true]").live("click", function (evt) {`

    `$(document).on("click", "a[data-ajax=true]", function (evt) {`

2.  `$("form[data-ajax=true] input[type=image]").live("click", function (evt) {`

    `$(document).on("click", "form[data-ajax=true] input[type=image]", function (evt) {`

3.  `$("form[data-ajax=true] :submit").live("click", function (evt) {`

    `$(document).on("click", "form[data-ajax=true] :submit", function (evt) {`

4.  `$("form[data-ajax=true]").live("submit", function (evt) {`

    `$(document).on("submit", "form[data-ajax=true]", function (evt) {`

`jquery.unobtrusive-ajax.min.js`您还可以使用 WebGrease生成新的。在命令提示符下，切换到您的解决方案文件夹并输入此命令（假设您的项目文件夹名为`Web`）：

```
packages\WebGrease.1.3.0\tools\WG.exe -m -in:Web\Scripts\jquery.unobtrusive-ajax.js -out:Web\Scripts\jquery.unobtrusive-ajax.min.js 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-03-21T04:19:51.880

[将Microsoft jQuery Unobtrusive Ajax](http://nuget.org/packages/Microsoft.jQuery.Unobtrusive.Ajax) NuGet 包更新到最新版本。

在 Visual Studio 中，从**工具**菜单中选择**库包管理器**，然后单击**包管理器控制台**。在提示符处，键入：

```
Update-Package Microsoft.jQuery.Unobtrusive.Ajax 
```

此问题已在 Microsoft jQuery Unobtrusive Ajax 2.0.30116.0（2013 年 2 月 18 日星期一）中得到修复，它用推荐的方法替换了对`.live()`方法的调用（在 jQuery 1.7 中已弃用并[从 jQuery 1.9](http://jquery.com/upgrade-guide/1.9/#live-removed)中删除）`.on()`。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-01-18T03:19:29.047

`.live()`[自 1.7 以来已被弃用，并在 jQuery 1.9](http://api.jquery.com/live/)中正式删除。改用`.on()`它，因为它是做[同样事情](http://api.jquery.com/on/)的首选方法。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-02-13T19:03:43.587

解决 jQuery 中的重大更改问题的最简单方法（在我看来）是安装`jQuery.Migrate`使您能够使用从 1.9.0 版本开始删除的已弃用函数调用的包。至少在微软更新不显眼的 ajax 插件之前。

此外，不显眼的 ajax 插件的夜间构建似乎更新了 api 调用。我尚未对其进行测试，但您可以在[asp.net codeplex 页面](http://aspnetwebstack.codeplex.com/)中了解如何获取它。

更新：Unobtrusive Ajax 和 Validation Nuget 包已更新，因此`jQuery.Migrate`不再需要该包。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-05T05:12:27.547

还需要做这些修复：

更新 jQuery.Validation 插件（[解决这个问题](https://stackoverflow.com/questions/14659023/error-in-jquery-validate-js-in-mvc-4-project-with-jquery-1-9/14659024#comment20558108_14659024)）

```
https://nuget.org/packages/jQuery.Validation/1.11.0    (first available on nuget 2/4/13) 
```

还要对`jquery.unobtrusive-ajax.js`文件进行这些更改（[有关连接问题，请参见此处](http://connect.microsoft.com/VisualStudio/feedback/details/776965/please-support-jquery-v1-9-0-properly-in-jquery-validate-unobtrusive)）

```
Line 43: replace = container.attr("data-valmsg-replace") && $.parseJSON(container.attr("data-valmsg-replace")) !== false;

Line 73: replace = container.attr("data-valmsg-replace") && $.parseJSON(container.attr("data-valmsg-replace")); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-18T03:31:18.980

代替

```
.live(function) 
```

和

```
.on(eventType, selector, function) 
```

[https://stackoverflow.com/a/14354091/358906](https://stackoverflow.com/a/14354091/358906)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-04T18:51:47.533

这是一个适合您的实际缩小文件。反正对我有用。我只是手动编辑它。

```
 /*
** Unobtrusive Ajax support library for jQuery
** Copyright (C) Microsoft Corporation. All rights reserved.
*/
(function(a){var b="unobtrusiveAjaxClick",g="unobtrusiveValidation";function c(d,b){var a=window,c=(d||"").split(".");while(a&&c.length)a=a[c.shift()];if(typeof a==="function")return a;b.push(d);return Function.constructor.apply(null,b)}function d(a){return a==="GET"||a==="POST"}function f(b,a){!d(a)&&b.setRequestHeader("X-HTTP-Method-Override",a)}function h(c,b,e){var d;if(e.indexOf("application/x-javascript")!==-1)return;d=(c.getAttribute("data-ajax-mode")||"").toUpperCase();a(c.getAttribute("data-ajax-update")).each(function(f,c){var e;switch(d){case"BEFORE":e=c.firstChild;a("<div />").html(b).contents().each(function(){c.insertBefore(this,e)});break;case"AFTER":a("<div />").html(b).contents().each(function(){c.appendChild(this)});break;default:a(c).html(b)}})}function e(b,e){var j,k,g,i;j=b.getAttribute("data-ajax-confirm");if(j&&!window.confirm(j))return;k=a(b.getAttribute("data-ajax-loading"));i=b.getAttribute("data-ajax-loading-duration")||0;a.extend(e,{type:b.getAttribute("data-ajax-method")||undefined,url:b.getAttribute("data-ajax-url")||undefined,beforeSend:function(d){var a;f(d,g);a=c(b.getAttribute("data-ajax-begin"),["xhr"]).apply(this,arguments);a!==false&&k.show(i);return a},complete:function(){k.hide(i);c(b.getAttribute("data-ajax-complete"),["xhr","status"]).apply(this,arguments)},success:function(a,e,d){h(b,a,d.getResponseHeader("Content-Type")||"text/html");c(b.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(this,arguments)},error:c(b.getAttribute("data-ajax-failure"),["xhr","status","error"])});e.data.push({name:"X-Requested-With",value:"XMLHttpRequest"});g=e.type.toUpperCase();if(!d(g)){e.type="POST";e.data.push({name:"X-HTTP-Method-Override",value:g})}a.ajax(e)}function i(c){var b=a(c).data(g);return!b||!b.validate||b.validate()}a(document).on("click", "a[data-ajax=true]", function(a){a.preventDefault();e(this,{url:this.href,type:"GET",data:[]})});a(document).on("click", "form[data-ajax=true] input[type=image]", function(c){var g=c.target.name,d=a(c.target),f=d.parents("form")[0],e=d.offset();a(f).data(b,[{name:g+".x",value:Math.round(c.pageX-e.left)},{name:g+".y",value:Math.round(c.pageY-e.top)}]);setTimeout(function(){a(f).removeData(b)},0)});a(document).on("click","form[data-ajax=true] :submit", function(c){var e=c.target.name,d=a(c.target).parents("form")[0];a(d).data(b,e?[{name:e,value:c.target.value}]:[]);setTimeout(function(){a(d).removeData(b)},0)});a(document).on("submit","form[data-ajax=true]",function(d){var c=a(this).data(b)||[];d.preventDefault();if(!i(this))return;e(this,{url:this.action,type:this.method||"GET",data:c.concat(a(this).serializeArray())})})})(jQuery); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-10T12:04:18.997

**只需更新您的脚本**

**1.**下载最新的Jquery，（虽然我用的是jquery-1.11.0）

**2.**从微软官方下载最新的Microsoft.jQuery.Unobtrusive.Ajax

从这里：

[https://github.com/aspnet/jquery-ajax-unobtrusive](https://github.com/aspnet/jquery-ajax-unobtrusive)

**3.**执行硬刷新或清除浏览器缓存并再次检查您的页面。

希望能帮助某人。

# java - 使用 ANTLR 将令牌映射回 Java 源代码中的位置

> ID：14391871
> 
> 赞同：1
> 
> 时间：2013-01-18T03:14:43.193
> 
> 标签：java, antlr, grammar

使用[Java Grammar](http://www.antlr.org/pipermail/antlr-interest/2012-July/044957.html) for ANTLR，我可以读取 Java 代码并按顺序打印出标记。

```
 String filePath = JAVA_SOURCE;
    String input = readFileAsString(filePath);
    //ANTLRStringStream in = new ANTLRStringStream(input);
    InputStream inputStream = new FileInputStream(filePath);
    ANTLRInputStream in = new ANTLRInputStream(inputStream);
    Java6Lex lexer = new Java6Lex(in);
    CommonTokenStream tokens = new CommonTokenStream(lexer);
    while(true) {
        int val = tokens.LA(1);
        tokens.consume();

        if (val == -1) {
            break;
        }
        System.out.printf("%d ", val);
    } 
```

59 54 38 54 81 61 92 59 54 38 54 96 61 92 59 54 38 54 81 54 92 90 54 92 ...

如何将每个映射`tokens`回 JAVA_SOURCE 中的位置？ANTLR 有柜台吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:26:25.803

默认情况下，ANTLR 产生`CommonToken`s。在此处阅读完整的 API：[http ://www.antlr.org/api/Java/org/antlr/runtime/CommonToken.html](http://www.antlr.org/api/Java/org/antlr/runtime/CommonToken.html)

这是一个演示，用于打印有关 Java6 解析器遇到的标记的一些信息：

*   将词法分析器和解析器规则合并到一个名为的文件中`Java6.g`（当然，将语法命名为*“Java6”*！）
*   将文件[antlr-3.3-complete.jar](http://antlr.org/download/antlr-3.3-complete.jar)复制到与`Java6.g`

将以下内容复制并粘贴到您的`Java6.g`文件中：

```
grammar Java6;

// options ...

@parser::members{
  public static void main(String[] args) throws Exception {
    String source = "package test;\n\npublic class Test {\n\n  int n = 42;\n}\n";
    Java6Lexer lexer = new Java6Lexer(new ANTLRStringStream(source));
    Java6Parser parser = new Java6Parser(new CommonTokenStream(lexer));
    System.out.println(source);
    parser.dumpTokens();
  }
}

dumpTokens
  :  (
       t=. {
         CommonToken ct = (CommonToken)t;
         System.out.printf("type=\%s, text='\%s', line=\%d, startIndex=\%d, charPositionInLine=\%d\n", 
                            tokenNames[ct.getType()], 
                            ct.getText(), 
                            ct.getLine(), 
                            ct.getStartIndex(), 
                            ct.getCharPositionInLine());
       }
     )* 
     EOF
  ;

// the rest of the grammar rules are not changed 
```

现在运行 Java6 文件：

```
java -cp antlr-3.3-complete.jar org.antlr.Tool Java6.g
javac -cp antlr-3.3-complete.jar *.java
java -cp .:antlr-3.3-complete.jar Java6Parser
```

您将看到以下内容打印到您的控制台：

```
包装测试；

公共类测试{

  诠释 n = 42;
}

type=PACKAGE, text='package', line=1, startIndex=0, charPositionInLine=0
type=IDENTIFIER, text='test', line=1, startIndex=8, charPositionInLine=8
type=SEMI, text=';', line=1, startIndex=12, charPositionInLine=12
类型=公共，文本='公共'，行=3，开始索引=15，charPositionInLine=0
type=CLASS, text='class', line=3, startIndex=22, charPositionInLine=7
type=IDENTIFIER, text='Test', line=3, startIndex=28, charPositionInLine=13
类型=LBRACE，文本='{'，行=3，startIndex=33，charPositionInLine=18
类型=INT，文本='int'，行=5，startIndex=38，charPositionInLine=2
type=IDENTIFIER, text='n', line=5, startIndex=42, charPositionInLine=6
type=EQ, text='=', line=5, startIndex=44, charPositionInLine=8
类型=INTLITERAL，文本='42'，行=5，startIndex=46，charPositionInLine=10
type=SEMI, text=';', line=5, startIndex=48, charPositionInLine=12
类型=RBRACE，文本='}'，行=6，开始索引=50，charPositionInLine=0
```

如果您正在寻找一种从解析器规则中获取令牌的方法，那么每个解析器规则在其[ParserRuleReturnScope](http://www.antlr.org/api/ActionScript/org/antlr/runtime/ParserRuleReturnScope.html)`start`中都有一个and成员，可以将其强制转换为 CommonToken。`stop`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T04:00:26.580

Token 对象包含行号，因此获取 Token 列表可以解决问题。诀窍是，如果没有 do {} while 循环，tokens.getTokens() 将返回 []，如[本网站](http://www.antlr.org/pipermail/antlr-interest/2011-May/041596.html)所述。

```
 do
    {
        tokens.consume();
    } while (tokens.LA(1) != -1);

    List<Token> tokenList = tokens.getTokens();
    for (Token token : tokenList)
    {   
        int type = token.getType();
        bigList.add(type);
        int line = token.getLine();
        System.out.printf("LINE %d - TOKEN %d\n", line, type);
    } 
```

当第 36 行有这个代码“System.out.println(z);”时，结果如下：

```
LINE 36 - TOKEN 54 - IDENTIFIER
LINE 36 - TOKEN 31 - DOT
LINE 36 - TOKEN 54 - IDENTIFIER
LINE 36 - TOKEN 31 - DOT
LINE 36 - TOKEN 54 - IDENTIFIER
LINE 36 - TOKEN 70 - LPAREN
LINE 36 - TOKEN 54 - IDENTIFIER
LINE 36 - TOKEN 91 - RPAREN
LINE 36 - TOKEN 92 - SEMI 
```

## 添加

要获取列位置，可以使用“token.getCharPositionInLine()”。

# hadoop - Hadoop 的可扩展性是线性的还是与节点数成正比的？

> ID：14391886
> 
> 赞同：2
> 
> 时间：2013-01-18T03:16:30.293
> 
> 标签：hadoop

常见到这句话：“Hadoop Scales Linearly”。但是，是否有任何绩效评估可以证实这一点？

在我的评估中，Hadoop 处理能力呈线性扩展，但与节点数量不成正比，20 个节点实现的处理能力不是 10 个节点实现的处理能力的两倍。对此有什么评价吗？

谢谢！

# css - 我可以在我已经制作的移动网站中使用 jQuery Mobile 吗？

> ID：14391898
> 
> 赞同：1
> 
> 时间：2013-01-18T03:18:18.460
> 
> 标签：css, jquery-mobile

我已经用 PHP 自己构建了一个移动网站，并希望使用 jQuery Mobile 使其在移动设备上更好地显示。

我正在尝试从 jQuery 中挑选出一些部分，例如用于增强我的网站的表单和列表视图。我试图在不重写我的大部分代码的情况下做到这一点，因为我已经有了一个不错的主题，我想保留我的网站。

我尝试做的第一件事是使用 jQuery Mobile 中的表单元素，当我将它们插入我的页面时，它使所有内容都歪斜了。

![在此处输入图像描述](../Images/6230af616d37021a25d4b82ef6a35589.png)

在我插入 jQuery Mobile 代码之前，它看起来像这样：

![在此处输入图像描述](../Images/bb7aad72811437023f28e4842751dee5.png)

可以在此处找到带有 jQ​​uery 代码的网站以查看源代码：

[http://www.beerportfolio.com/jmobile](http://www.beerportfolio.com/jmobile)

可以在这里看到没有 jQuery Mobile 代码的网站：

[http://www.beerportfolio.com/mobile](http://www.beerportfolio.com/mobile)

我认为这是一个 CSS 问题，但我无法通过在 Chrome 上使用检查元素找到它。

更新：

仔细观察检查元素，我认为 jquery 正在我的页面中插入此代码。我试着把它拿出来很多，它解决了这个问题！问题是我只能在 chrome 检查元素中取出这段代码，我不知道如何防止 jquery mobile 插入代码。

下面是我编辑的和我没有编辑的检查元素的图片：

![在此处输入图像描述](../Images/9354b038a9acdad4ed19970460651ea0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T05:23:47.863

简短的回答是，您可以只使用 jQuery Mobile 的零碎。

您可以通过向其添加*data-role="none"属性来*[告诉](http://jquerymobile.com/demos/1.2.0/docs/forms/forms-all-native.html)JQM 不增强任何特定的表单或按钮元素，或者您可以通过将*data-enhance="false"*添加到容器（如果你这样做，那么你还需要[设置](http://jquerymobile.com/demos/1.2.0/docs/api/globalconfig.html)为 true）。除此之外，您始终可以使用 CSS 来定位特定元素并“覆盖”JQM 样式。 **`$.mobile.ignoreContentEnabled`**

 **此外，还有一个[下载构建器](http://jquerymobile.com/download-builder/)，您可以在其中指定要下载框架的哪些部分。

在您的特定示例中，您可能希望将侧边栏 div 移动到您的 *data-role="content" div 或*data-role="page"* div 之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T03:49:22.267

jQuery Mobile 是 jQuery 的扩展，因此它**需要**jQuery 才能正常工作。

[正如jQuery Mobile 文档](http://jquerymobile.com/demos/1.2.0/)页面所报告的：

> 欢迎。jQuery Mobile 是构建可在所有流行的智能手机、平板电脑和桌面设备上访问的网站和应用程序的最简单方法。**对于 jQuery 1.7.0 到 1.8.2**。

显然，由于 jQuery Mobile 需要它自己的 CSS（而 jQuery 不需要），一旦包含在您的网站中，就会呈现不同的内容。**

# c# - 可以更新其数据绑定的DataGrid？

> ID：14391900
> 
> 赞同：0
> 
> 时间：2013-01-18T03:19:07.557
> 
> 标签：c#, winforms, datagridview

我正在寻找一种开箱即用的方式来让表单上的 GridView 绑定到经常更新的 BindList 并维护当前条目。

我想在 GridView 中显示一些客户端对象。每隔几秒钟，我的表单就会读取一个 xml 文件，该文件包含客户端的最新信息（名称、变量编号、变量编号、状态）。我希望能够在不破坏选择的情况下更新网格中的信息。

这可以开箱即用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:09:24.587

如果 DJ KRAZE 将他的评论移至答案，他的功劳将归于他。虽然我研究了如何实现这一点，但我没有直接发现它会保持选择等。

我目前的解决方案是

```
using (var reader = new StreamReader(new FileStream(clientFile, FileMode.Open, FileAccess.Read, FileShare.ReadWrite)))
            {
                var ser = new XmlSerializer(typeof(ClientList));
                var temp = (ClientList)ser.Deserialize(reader);

                foreach (var client in temp.Items)
                {
                    if(clientWatchers.Any(c => c.Handle == client.Handle))
                    {
                        var c = clientWatchers.First(w => w.Handle == client.Handle);
                        c.SyncNumber = client.SyncNumber;
                        c.PsNumber = client.PsNumber;
                        c.IsHalted = client.IsHalted;
                    }
                    else
                    {
                        clientWatchers.Add(client);
                    }
                }

                var handles = clientWatchers.Select(c => c.Handle).ToArray();

                foreach (var handle in handles)
                {
                    if(temp.Items.All(c => c.Handle != handle))
                        clientWatchers.Remove(clientWatchers.First(c => c.Handle == handle));
                }

                //foreach (var client in temp.Items)
                    //clientWatchers.Add(client);
                dgClientView.DataSource = clientWatchers;

            } 
```

# sql-server - 使用 OPENROWSET 时如何获取列名？

> ID：14391902
> 
> 赞同：2
> 
> 时间：2013-01-18T03:19:08.623
> 
> 标签：sql-server, excel, openrowset

我正在转换 EXCEL 文件中包含的一些数据，我正在使用 OPENROWSET 来执行此操作。我可以使用`select *`类型语法获取数据，但我没有在结果中返回任何列名。在这种情况下，结果是我想使用或放置在临时表或变量中的一个简单值。

但是，该值在最后一个 select 语句中返回为 NULL。我在这里想念什么？OLEDB 调用中的 SQL 语法是否正确（似乎受到限制）？

```
declare @catalog_ID nvarchar(100);
set @catalog_ID = (select * FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0','Excel 12.0;HDR=yes;Database=D:\[my-worksheet].xlsx','SELECT * FROM [ru_RU$a3:b3]') )
select @catalog_ID; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T03:29:25.177

要从您的 OPENROWSET 调用中取回列名，我认为您只需更改`HDR=yes`为`HDR=no`.

祝你好运。

# c# - 如何在gridview中添加到AutoGeneratedEdit按钮的超链接

> ID：14391908
> 
> 赞同：0
> 
> 时间：2013-01-18T03:20:46.913
> 
> 标签：c#, asp.net, gridview

我有一个提供项目信息的网格视图。我添加了编辑按钮。

我的网格视图看起来像这样

```
 **ProjectID**     **ProjectName**    **Action**
      edit       231                  abc                xyz
      edit       1223                 pqr                asj
      edit       325                  asgf               wrgag 
```

现在当我点击编辑它应该指向另一个页面。如何为该自动生成的编辑设置 NavigateUrl

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T03:57:45.543

不要自动生成编辑。在网格视图声明中为其放置一个字段。在该字段中，放置一个锚标记 runat 服务器。OnRowCreated，找到锚控件并将 href 设置为您的 URL。我已经这样做了好几次了。如果需要，我可以提供示例代码。

更新：下面的示例代码

在 ASPX/ASCX 中：

```
<asp:GridView ID="GridView" runat="server" OnRowCreated="RowCreated">
<Columns>
    <asp:TemplateField HeaderText="Action">
        <ItemTemplate>
            <a ID="lnkDelete" runat="server">Action</a>
        </ItemTemplate>
    </asp:TemplateField>
</Columns>
</asp:GridView> 
```

在代码隐藏中：

```
protected void RowCreated(Object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        HtmlAnchor deleteButton = (HtmlAnchor)e.Row.FindControl("lnkDelete");

        //Do your stuff with that delete button
    }
} 
```

# spring - 修复 spring Kerberos 版本不兼容问题

> ID：14391913
> 
> 赞同：0
> 
> 时间：2013-01-18T03:21:57.883
> 
> 标签：spring, spring-security, spring-security-kerberos

我想下载[这张票](https://jira.springsource.org/browse/SES-98)`spring-security-kerberos-core.jar`中提到的版本，即或以上。我找不到合适的地方下载它。[除了这个](http://static.springsource.org/spring-security/site/extensions/krb/index.html)，主站点不会带您到任何地方。`krb-1.0.0.RC1`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T07:45:59.747

我有同样的问题，使用 Spring 3.1.0 和 Spring-security-kerberos 1.0.0.M2。

我的解决方案是简单地将“新”复制`org.springframework.security.crypto.codec.Base64`到`org.springframework.security.core.codec.Base64`我自己的应用程序内部。不是超级漂亮，但它有效。

AFAIK，仍然没有比 1.0.0.M2 更新的 spring-security-kerberos 版本。

# gwt - GWT DeckLayoutPanel UiBinder 代码

> ID：14391914
> 
> 赞同：2
> 
> 时间：2013-01-18T03:22:04.960
> 
> 标签：gwt, uibinder

我试图使用`<g:layer>`标签在 UiBinder 中指定使用 DeckLayoutPanel（不是 Dock ...），但这似乎不起作用。在 .ui.xml 中使用时，是否有人正确使用了此组件？

我没有看到它至少记录在 javadoc 中或网络上的任何地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:41:05.173

[plusplayground](https://code.google.com/p/plusplayground/source/browse/trunk/src/com/real8/plusplayground/client/shell/PlusPlaygroundShellViewImpl.ui.xml?spec=svn22&r=22)库似乎将 DeckLayoutPanel 与 UiBinder 一起使用。这个我没用过，不知道好不好用。话虽如此，您还没有提到任何具体问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:51:55.343

`<g:layer>`标签仅适用于`LayoutPanel`. `DeckLayoutPanel`管理其子元素的布局，因此您可以像使用它一样使用它`HasWidgets`：将子小部件添加为直接子元素。

您可以看到它在[MobileWebApp 示例的 Tablet UI](https://code.google.com/p/google-web-toolkit/source/browse/tags/2.5.0/samples/mobilewebapp/src/main/java/com/google/gwt/sample/mobilewebapp/client/tablet/MobileWebAppShellTablet.ui.xml#95)中使用。

# java - 片段着色器将所有 alpha 值解释为 1

> ID：14391915
> 
> 赞同：0
> 
> 时间：2013-01-18T03:22:23.233
> 
> 标签：java, lwjgl

当我有一个具有透明度（和一个 alpha 通道）的纹理时，透明区域似乎作为具有值（0、0、0、1）的 vec4s 通过。丢弃任何 alpha 值为 0 的颜色很容易（显然 0 仍然存在......）。但这也导致了 0 到 1 之间的透明度问题。一切都显示为完全不透明，我无法想象是什么原因造成的。

这是我的着色器的样子。我一直在玩它，但这是我目前正在处理的一个。只需将 alpha 值始终设为 0.5f，看看会发生什么。仍然完全不透明：

```
#version 150 core

uniform sampler2D sampler;

in vec4 pass_Color;
in vec2 pass_TextureCoord;
in float pass_alpha;

out vec4 frag_Color;

void main(void) {
    frag_Color = pass_Color;

    vec3 color = texture2D(sampler, pass_TextureCoord);

    frag_Color = vec4(color, pass_alpha);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T03:34:04.330

我不知道 lwjgl，但是看到它是基于 opengl 的，你可能必须启用[Blending](http://www.opengl.org/wiki/Blending)。假设在顶点着色器中正确计算了 pass_alpha。

此外， main 中的第一行没有做任何事情，因为 frag_color 在最后一行被覆盖。

# android - 从上下文菜单中获取对列表项的引用

> ID：14391917
> 
> 赞同：0
> 
> 时间：2013-01-18T03:22:58.580
> 
> 标签：android, android-listview, contextmenu

我想从触发上下文菜单的项目中获取列表中的位置。这是我的代码：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    c = contacts.get(position);
    Toast.makeText(v.getContext(), c.getName().toString() + " Clicked " + (id + 1), Toast.LENGTH_SHORT).show();
    Intent i = new Intent(v.getContext(), DetailActivity.class);
    i.putExtra("key", id + 1);
    startActivity(i);
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {

    AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) menuInfo;
    this.selectedPerson = contacts.get(info.position);
    MenuInflater mi = getMenuInflater();
    mi.inflate(R.menu.activity_context, menu);
    menu.setHeaderIcon(R.drawable.settings2);
    menu.setHeaderTitle(this.selectedPerson.getName().toString() + " - Options");
}

@Override
public boolean onContextItemSelected(MenuItem item) {

    switch(item.getItemId()){
    case R.id.menu_edit:
        Toast.makeText(this, "Edit", Toast.LENGTH_SHORT).show();

        return true;
    case R.id.menu_delete:
        Toast.makeText(this, "Delete", Toast.LENGTH_SHORT).show();

        return true;
    case R.id.menu_fav:
        Toast.makeText(this, "Added to Favourites!", Toast.LENGTH_SHORT).show();

        return true;
    }

    return false;

} 
```

我怎样才能以与我在 中的方式类似的方式检索该位置`onListItemClick()`？原因是，我想调用我的数据库适配器删除方法，该方法需要行 ID 才能正确执行。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T04:56:38.367

您可以使用

```
AdapterView.AdapterContextMenuInfo info = AdapterView.AdapterContextMenuInfo)item.getMenuInfo(); 
```

在**onContextItemSelected(MenuItem item)**中获取列表适配器的项目位置

```
@Override
 public boolean onContextItemSelected(MenuItem item) {

 AdapterView.AdapterContextMenuInfo info = AdapterView.AdapterContextMenuInfo)item.getMenuInfo();

switch(item.getItemId()){
case R.id.menu_edit:
    Toast.makeText(this, "Edit", Toast.LENGTH_SHORT).show();

    return true;
case R.id.menu_delete:
    Toast.makeText(this, "Delete", Toast.LENGTH_SHORT).show();

    return true;
case R.id.menu_fav:
    Toast.makeText(this, "Added to Favourites!", Toast.LENGTH_SHORT).show();

    return true;
}

return false;

} 
```

# php - $_GET 和永久链接问题

> ID：14391924
> 
> 赞同：0
> 
> 时间：2013-01-18T03:24:56.283
> 
> 标签：php, get, permalinks

我有一个像这样的固定链接`/products-page/custom/test-product/`

custom 是我的产品类别，test-product 是产品名称， products-page 是页面名称。

在php中，我试图像这样获取类别名称

```
if($_GET['wpsc_product_category'] == "Custom"){ 
//do something
} 
```

但是上面的代码不起作用......是否可以通过甚至认为我的永久链接看起来很奇怪来获取自定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T03:39:17.927

原始答案：[如何在 Wordpress 中获取帖子中的类别标题？](https://stackoverflow.com/questions/945906/how-to-get-the-category-title-in-a-post-in-wordpress)

没有测试过。

```
foreach (get_the_category() as $category) {
  if ( $category->cat_name == 'custom') {
    // Do something
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T03:28:52.580

您将不得不更改 .htaccess 中的一些内容。$_GET 设计有诸如此类的永久链接`index.php?wpsc_product_category=Custom`。看看[这个](https://stackoverflow.com/questions/6462359/htaccess-replace-rewrite-get-variables-in-php-url)帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T03:45:38.533

这对我有用

```
<?php $category = wpsc_the_product_permalink();
                                  $categoryname = explode("/", $category);

                                  if(!$categoryname[4]){ ?> 
```

# paypal - 客户无需离开您的网站即可使用 Paypal 付款

> ID：14391928
> 
> 赞同：4
> 
> 时间：2013-01-18T03:26:05.550
> 
> 标签：paypal

我的客户给我这个链接[https://www.paypal.com/webapps/mpp/compare-business-products](https://www.paypal.com/webapps/mpp/compare-business-products)并希望我使用“高级”产品实现“客户无需离开您的网站即可付款”功能。

我的问题是我应该使用什么方法来存档这个？
目前，我正在使用带有 IPN 的“Express Checkout”方法来完成付款流程。

此外，我是否必须更改我的 Paypal 帐户中的任何内容（升级帐户、打开任何 API...）才能启用此功能？

我不能用谷歌搜索，任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T19:50:00.080

Payments Advanced 是 Express Checkout 的独立产品。它是 PayFlow API 的一部分，因此您需要在[http://manager.paypal.com](http://manager.paypal.com)进行帐户设置。如果您还没有这个，那么您可能使用的是“常规”PayPal 帐户，并且您确实需要让他们将您切换到 PayFlow。只需申请 Payments Advanced 即可为您触发该操作，然后他们会向您发送 PayPal Manager 的登录凭据。

使用 Payments Advanced，您可以创建一个 API 以即时从 PayPal 服务器获取安全令牌，然后在类似于标准按钮的一些基本 HTML 代码中使用该令牌。

这会导致完整的结帐表单显示在您页面上的 i-frame 中。当用户在那里结账时，他们将永远不会离开您的网站。

YouTube上有一个很好的两部分视频，更详细地介绍了这一点。

[第 1 部分](http://www.youtube.com/watch?v=qyiv3ndRcZI)| [第2部分](http://www.youtube.com/watch?v=2Z5v-ha0YII)

您还可以在 X.com 上找到[大量有关它的文档。](https://www.x.com/developers/paypal/development-and-integration-guides#ppa)

# c++ - 汇编中的 procs：main:nop vs main proc

> ID：14391929
> 
> 赞同：0
> 
> 时间：2013-01-18T03:26:27.023
> 
> 标签：c++, assembly

我正在使用visual c++ express编译器来编译asm32：

```
; Example assembly language program -- adds 158 to number in memory
; Author:  R. Detmer
; Date:    1/2008

.586
.MODEL FLAT

.STACK  4096            ; reserve 4096-byte stack

.DATA                   ; reserve storage for data
number  DWORD   -105
sum     DWORD   ?

.CODE                           ; start of main program code
main    PROC
        mov     eax, number     ; first number to EAX
        add     eax, 158        ; add 158
        mov     sum, eax        ; sum to memory

        mov   eax, 0            ; exit with return code 0
        ret
main    ENDP

END                             ; end of source code 
```

上面给了我一个链接错误，而这个：

```
..
.CODE                           ; start of main program code
main:nop    
        mov     eax, number     ; first number to EAX
        add     eax, 158        ; add 158
        mov     sum, eax        ; sum to memory

        mov   eax, 0            ; exit with return code 0
        ret
end main                          ; end of source code
.. 
```

效果很好！

唯一的区别是`main:nop vs main proc`

这两者有什么区别，为什么一个是封闭的`end main`，另一个是封闭的`main endp main`？

这是我得到的错误：

```
1>------ Build started: Project: asm1, Configuration: Release Win32 ------
1>  Assembling [Inputs]...
1>LINK : error LNK2001: unresolved external symbol _WinMainCRTStartup
1>C:\Users\...\Downloads\asm1\Release\asm1.exe : fatal error LNK1120: 1 unresolved externals 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T03:42:43.723

它与 PROC 指令没有任何关系。您的原始代码缺少 END 指令上的“主”操作数。它指定程序的入口点。如果没有，链接器将尝试为可执行文件 _WinMainCRTStartup 查找默认入口点。这失败了，因为你没有那个，也没有链接 CRT。

使固定：

```
main    PROC
        ; etc...
main    ENDP

END     main 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T03:46:19.967

汉斯·帕桑特是绝对正确的。

此外，您可能会发现这些链接很有用：

*   Microsoft 汇编程序命令和指令：http: [//msdn.microsoft.com/en-us/library/afzk3475%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/afzk3475%28v=vs.80%29.aspx)

*   汇编器命令行选项：http: [//msdn.microsoft.com/en-us/library/s0ksfwcf.aspx](http://msdn.microsoft.com/en-us/library/s0ksfwcf.aspx)

*   链接器选项：http: [//msdn.microsoft.com/en-us/library/y0zzbyt4.aspx](http://msdn.microsoft.com/en-us/library/y0zzbyt4.aspx)

*   一个很好的教程： [http ://www.cs.virginia.edu/~evans/cs216/guides/vsasm.html](http://www.cs.virginia.edu/~evans/cs216/guides/vsasm.html)

# linux - 需要理解这个sed表达式

> ID：14391934
> 
> 赞同：-1
> 
> 时间：2013-01-18T03:27:24.780
> 
> 标签：linux, sed

我正在阅读这个问题[如何使用条件表达式来选择数据？](https://stackoverflow.com/questions/14284960/awk-or-sed-how-to-use-conditional-expression-to-select-data)

给出的 sed 解决方案是

`sed -r '1d;/(\S+\s+){5}\S+/!d;/\+$/s/\S+\s+//5;/-$/s/\S+\s+//4' file`

我无法理解这些位

`1d;`- 这个 statmenet 是做什么的

`/(\S+\s+){5}\S+/`- 它匹配任何非空白字符 5 次，再匹配 1 次

`!d`不知道这是做什么的

`/\+$/`这意味着任何以 + 结尾的东西

`s/\S+\s+//5;`不知道

`/-$/` 它搜索以 - 结尾的任何内容

`s/\S+\s+//4'`不知道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:55:50.533

`1d;`

这只是删除了第一行。

`/(\S+\s+){5}\S+/!d;`

这匹配任何（非空白字符 [ `\S`] 一次或多次 [+​​] 后跟任何空白字符 [ `\s`] 一次或多次 [ `+`]）5 次 [ `{5}`]，然后是非空白字符 [ `\S`] 一次或多次[ `+`] 并删除不包含匹配项 [ ] 的任何行的整行`!d`。

该语法`/pattern/d`将搜索您的模式并删除包含该模式的所有行。将其更改为`/pattern/!d`相反，因为它会删除任何不包含该匹配项的行。

`/\+$/s/\S+\s+//5;`

这将搜索 pattern `\+$`，它匹配任何以文字加号结尾的行。`s/\S+\s+//5`然后它在这些行上执行操作。该命令的作用是搜索模式`\S+\s+`（您应该能够根据最后一条语句的解释来解释），并删除每行匹配的第五次出现（不是整行，请注意，只是匹配位）。

这里工作的基本语法是`s/pattern/replacement/`. 因为替换留空，所以具有删除匹配的效果。将语法更改为`s/pattern/replacement/n`仅替换第 n 次出现。

`/-$/s/\S+\s+//4;`

这几乎与上述相同，除了它正在搜索以减号结尾的行，然后在这些行上删除该模式的第四次出现。

HTH。

# html - HTML：表格右侧是图像，左侧是文本，并且文本由于某种原因被下推

> ID：14391935
> 
> 赞同：0
> 
> 时间：2013-01-18T03:27:34.110
> 
> 标签：html, css

我几乎是一个完整的初学者，请记住这一点

```
<table style="border:none" cellpadding="0" cellspacing="0">
  <tbody>
    <tr>
      <td style="border:none" valign="top" vertical-align:"top"; width="20%">
        <div><img class="alignnone size-medium wp-image-232" src="" style="border: 1px solid #000000; alt="" width="294" height="300"></div>
        <div class="caption" style="font:8pt/12pt verdana" align="center">text</div>
      </td>
      <td style="border:none" valign="top" vertical-align:middle;>
        <div style="font:10pt/14pt verdana" align="justify" valign="top">text text text</div>
      </td>
  </tbody>
</table> 
```

出于某种原因，右栏中的文本被左侧的图像向下推。我发现我可以通过在图像前添加   来纠正这个问题，但是图像被推下并且看起来很难看。

**问题：** 如何垂直对齐图像和文本？

为什么`cell padding`and`cell spacing`什么都不做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:33:53.797

Cellpadding 和 cellspacing 默认为 0。这就是它们“什么都不做”的原因。要垂直对齐，请使用 CSS `vertical-align`。就像是

```
<td style="vertical-align:top;"> 
```

可能是您正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T21:12:13.037

You just have some typos. Your html is a little messed up. vertical-align is a css property, and therefore should be inside the style="" declaration like below. you're also missing some closing tags.

```
<table style="border:none;" cellpadding="0" cellspacing="0">
  <tbody>
    <tr>
      <td style="border:none; vertical-align:"top";" valign="top" width="20%">
          <div><img class="alignnone size-medium wp-image-232" src="" style="border: 1px solid #000000; display: block;" alt="" width="294" height="300" /></div>
        <div class="caption" style="font:8pt/12pt verdana" align="center">text</div>
      </td>
      <td style="border:none; vertical-align:middle;" valign="top">
        <div style="font:10pt/14pt verdana;" align="justify" valign="top">text text text</div>
      </td>
    </tr>
  </tbody>
</table> 
```

here's a fiddle: [http://jsfiddle.net/s_Oaten/vmaex/](http://jsfiddle.net/s_Oaten/vmaex/)

# dotnetnuke - Dotnetnuke 工作流电子邮件通知不起作用

> ID：14391937
> 
> 赞同：0
> 
> 时间：2013-01-18T03:27:56.277
> 
> 标签：dotnetnuke

我在 DNN 7.0 Pro 试用站点中尝试了工作流程。设置我的 Gmail 帐户和 SMTP 工作正常。我可以收到电子邮件用户角色更改等。但是，当提交内容以供批准时，批准人不会收到任何电子邮件，一旦批准/拒绝，编辑也不会收到任何电子邮件。这个功能对我来说真的很重要。

有什么我错过的配置吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T22:54:31.913

由于您正在试用，因此您应该能够通过 DotNetNuke 帮助台。

如果您使用的是 7.0.1 和 7.0.2，则新安装的消息调度程序会出现问题。

[http://www.dotnetnuke.com/Community/Community-Exchange/Question/3273/Notification-API-and-Emails.aspx](http://www.dotnetnuke.com/Community/Community-Exchange/Question/3273/Notification-API-and-Emails.aspx)

# windows - 如何使用 GDI 渲染 8 位索引位图？

> ID：14391938
> 
> 赞同：1
> 
> 时间：2013-01-18T03:28:01.560
> 
> 标签：windows, qt, gdi+, gdi, freetype

我正在尝试使用 windows GDI 将 freetype 的字形渲染到窗口。貌似freetype生成的位图是8bit索引位图什么的，因为在它的官方教程example4.cpp中，它使用Qt来渲染字形如下：

```
error = FT_Render_Glyph(m_face->glyph,
                    FT_RENDER_MODE_NORMAL);

            QImage glyphImage(m_face->glyph->bitmap.buffer,
                m_face->glyph->bitmap.width,
                m_face->glyph->bitmap.rows,
                m_face->glyph->bitmap.pitch,
                QImage::Format_Indexed8);

            /*painter.translate(m_glyphRect.x(),
                m_glyphRect.y());*/

            QVector<QRgb> colorTable;
            for (int i = 0; i < 256; ++i)
                colorTable << qRgba(0, 0, 0, i);
            glyphImage.setColorTable(colorTable);

            painter.drawImage(QPoint(0, 0),
                glyphImage); 
```

所以我尝试使用 gdi 渲染它，如下所示：

```
BITMAPINFO* pBmi = (BITMAPINFO*)malloc(sizeof(BITMAPINFO) + sizeof(RGBQUAD) * 255);
            BITMAPINFOHEADER &bmh = pBmi->bmiHeader;
            bmh.biSize = sizeof(BITMAPINFOHEADER);
            bmh.biBitCount = 8;
            bmh.biCompression = BI_RGB;
            bmh.biPlanes = 1;
            RGBQUAD* palette = &pBmi->bmiColors[0];
            for (int i = 0; i < 256; ++i) {
                RGBQUAD rgb = {0};
                palette[i] = rgb;
            }

            //assert(pBm->bitmap);
            bmh.biWidth = pBm->bitmap.width;
            bmh.biHeight =  - pBm->bitmap.rows;
            StretchDIBits(hdc, 200, 200, pBm->bitmap.width, pBm->bitmap.rows, 0, 0, pBm->bitmap.width, pBm->bitmap.rows, pBm->bitmap.buffer, 
                pBmi, DIB_PAL_COLORS, SRCCOPY); 
```

然后我尝试使用 GDI+ 进行渲染，但也失败了。

```
error = FT_Render_Glyph(m_face->glyph, FT_RENDER_MODE_NORMAL);
            Bitmap bitmap(pBm->bitmap.width, pBm->bitmap.rows, pBm->bitmap.pitch, PixelFormat8bppIndexed, pBm->bitmap.buffer);
            //Bitmap bitmap(pBm->bitmap.width, pBm->bitmap.rows, 64, PixelFormat8bppIndexed, pBm->bitmap.buffer);
            ColorPalette* pal = (ColorPalette*)malloc(sizeof(ColorPalette) + 255 * sizeof(ARGB));
            pal->Flags = PaletteFlagsGrayScale;
            pal->Count = 256;
            for (int i = 0; i <= 255; i++) {
                pal->Entries[i] = Color::MakeARGB(i, 0, 0, 0);
            }
            bitmap.SetPalette(pal);
            Graphics graphics(hdc);
            graphics.DrawImage(&bitmap, 100, 100); 
```

您能否告诉我，如何使用 GDI/GDI+ 在 Windows 中呈现每像素 8 位索引位图。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T05:36:36.857

就像这里的注释一样：

```
 hdc = BeginPaint(hWnd, &ps);

        assert(Draw());

        FT_GlyphSlot &pBm = m_face->glyph;

        //output by console
        {
            printf("\n");
            for (int j = 0; j < pBm->bitmap.rows; j++) {
                printf("\n");
                for (int i = 0; i < pBm->bitmap.width; i++) 
                    printf("%2x", pBm->bitmap.buffer[j * pBm->bitmap.width + i]);
            }
        }

        //output by gdi+
        {
            Bitmap *pBitmap = NULL;
            LPBYTE pBuffer = NULL;      
            int stride = (pBm->bitmap.pitch + 3) / 4 * 4;
            if (stride != pBm->bitmap.pitch)
            {
                pBuffer = new BYTE[stride * pBm->bitmap.rows];
                memset(pBuffer, 0, stride * pBm->bitmap.rows);
                for (int i = 0; i < pBm->bitmap.rows; i++)
                    for (int j = 0; j < pBm->bitmap.width; j++)
                        pBuffer[i * stride + j] = pBm->bitmap.buffer[i * pBm->bitmap.width + j];
            } else
            {
                pBuffer = pBm->bitmap.buffer;
            }
            pBitmap = new Bitmap(pBm->bitmap.width, pBm->bitmap.rows, stride, PixelFormat8bppIndexed, pBuffer);
            ColorPalette *pPalette = (ColorPalette*)malloc(sizeof(ColorPalette) + 255 * sizeof(ARGB));
            pPalette->Count = 256;
            pPalette->Flags = PaletteFlagsGrayScale;
            ARGB* pColor = &pPalette->Entries[0];
            for (int i = 0; i < 256; i++)
                pColor[i] = Color::MakeARGB(i, 0x00, 0x00, 0x00);
            assert(pBitmap->GetLastStatus() == Ok);
            pBitmap->SetPalette(pPalette);
            assert(pBitmap->GetLastStatus() == Ok);
            Graphics graphics(hdc);
            graphics.DrawImage(pBitmap, 300, 300);

            free(pPalette);
            delete pBitmap;

            //draw with gdi
            {
                BITMAPINFO* pBmi = (BITMAPINFO*)malloc(sizeof(BITMAPINFO) + sizeof(RGBQUAD) * 255);
                memset(pBmi, 0, sizeof(BITMAPINFO));
                BITMAPINFOHEADER &bmh = pBmi->bmiHeader;
                bmh.biSize = sizeof(BITMAPINFOHEADER);
                bmh.biBitCount = 8;
                bmh.biCompression = BI_RGB;
                bmh.biPlanes = 1;
                RGBQUAD* palette = &pBmi->bmiColors[0];
                for (int i = 0; i < 256; ++i) 
                {
                    RGBQUAD rgb = {0};
                    rgb.rgbRed =  ~i;
                    rgb.rgbGreen =  ~i;
                    rgb.rgbBlue =  ~i;
                    palette[i] = rgb;
                }
                bmh.biWidth = stride;
                bmh.biHeight =  - pBm->bitmap.rows;
                StretchDIBits(hdc, 200, 200, stride, pBm->bitmap.rows, 0, 0, stride, pBm->bitmap.rows, pBuffer, 
                    pBmi, DIB_RGB_COLORS, SRCCOPY);

                if (pBmi)
                    free(pBmi);

                if (pBuffer != pBm->bitmap.buffer)
                    delete [] pBuffer;

                /*bmh.biWidth = pBm->bitmap.width;
                bmh.biHeight =  - pBm->bitmap.rows;
                StretchDIBits(hdc, 200, 200, pBm->bitmap.width, pBm->bitmap.rows, 0, 0, pBm->bitmap.width, pBm->bitmap.rows, pBm->bitmap.buffer, 
                    pBmi, DIB_PAL_COLORS, SRCCOPY);*/
            }

        }
        EndPaint(hWnd, &ps); 
```

两点：
1）正如 Mark Randsom 和 paulsm4 所说，调色板是强制性的。
2) 对齐 4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T05:16:30.187

您给出的 Qt 示例创建了一个全黑的调色板，透明度随强度而变化。您与 GDI 一起使用的调色板是全黑的，句号。你需要改变颜色。

# .net - ControlPaint.Light 将橙色变为洋红色

> ID：14391939
> 
> 赞同：2
> 
> 时间：2013-01-18T03:28:16.137
> 
> 标签：.net, rgb

我想制作一些颜色的浅色版本。但是橙色（和其他颜色）给我带来了问题。当我使用 50% 的 System.Windows.Forms.ControlPaint.Light 时，它会将颜色更改为洋红色。

```
Color color1 = Color.Orange;
Color color2 = ControlPaint.Light(color1, 50f); 
```

这导致 ffff5ee7, {Color [A=255, R=255, G=94, B=231]}，即洋红色。

如何使用 ControlPaint.Light 实际创建浅橙色而不是洋红色？

（这发生在我正在变亮的其他一些颜色上，并且我没有使用命名颜色，而是使用 ARGB 值。我在这里使用命名颜色作为示例。）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T03:48:00.040

我相信您的问题在于您使用`50f`的是 Percentage 而不是`.5f`. 文档没有说明，但根据此[MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en/vblanguage/thread/7a2e9080-e7fa-4ea5-8656-ad2f9c80c5f0) ，您应该使用 0 到 1 作为您的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-19T10:33:39.310

IMO 的 MSDN 帮助令人困惑，甚至是错误的。我开发了这段代码...

```
 /// <summary>
    /// Makes the color lighter by the given factor (0 = no change, 1 = white).
    /// </summary>
    /// <param name="color">The color to make lighter.</param>
    /// <param name="factor">The factor to make the color lighter (0 = no change, 1 = white).</param>
    /// <returns>The lighter color.</returns>
    public static Color Light( this Color color, float factor )
    {
        float min = 0.001f;
        float max = 1.999f;
        return System.Windows.Forms.ControlPaint.Light( color, min + factor.MinMax( 0f, 1f ) * ( max - min ) );
    }
    /// <summary>
    /// Makes the color darker by the given factor (0 = no change, 1 = black).
    /// </summary>
    /// <param name="color">The color to make darker.</param>
    /// <param name="factor">The factor to make the color darker (0 = no change, 1 = black).</param>
    /// <returns>The darker color.</returns>
    public static Color Dark( this Color color, float factor )
    {
        float min = -0.5f;
        float max = 1f;
        return System.Windows.Forms.ControlPaint.Dark( color, min + factor.MinMax( 0f, 1f ) * ( max - min ) );
    }
    /// <summary>
    /// Lightness of the color between black (-1) and white (+1).
    /// </summary>
    /// <param name="color">The color to change the lightness.</param>
    /// <param name="factor">The factor (-1 = black ... +1 = white) to change the lightness.</param>
    /// <returns>The color with the changed lightness.</returns>
    public static Color Lightness( this Color color, float factor )
    {
        factor = factor.MinMax( -1f, 1f );
        return factor < 0f ? color.Dark( -factor ) : color.Light( factor );
    }

    public static float MinMax( this float value, float min, float max )
    {
        return Math.Min( Math.Max( value, min ), max );
    } 
```

# knockout.js - 在 Knockout.js 中反转数组

> ID：14391942
> 
> 赞同：7
> 
> 时间：2013-01-18T03:28:27.107
> 
> 标签：knockout.js

我正在学习如何使用 Knockout.js。我想显示 observableArray 内容反转，所以我以这种方式使用 Knockout 反转功能：

```
 <ul  data-bind="foreach: anObservableArray.reverse()" >...</ul> 
```

但是，它不起作用，也不会发生错误。当我尝试这个时：

```
<ul  data-bind="foreach: anObservableArray.slice(0).reverse()" >...</ul> 
```

它按预期工作。我的问题是，当反向函数已经返回一个反向数组时，为什么我必须复制整个数组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T03:57:06.577

Calling `reverse` will actually reverse the array in-place (and return it), so you could be running into an issue where it is getting reversed multiple times.

For example, if you had two blocks like:

```
<ul  data-bind="foreach: anObservableArray.reverse()" >...</ul>
<ul  data-bind="foreach: anObservableArray.reverse()" >...</ul> 
```

The first would be reversed and the second would be back to the original order.

Better to reverse the copy, especially if you will be adding and removing items from the array.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-09T06:21:37.250

我从对这个问题的搜索中得到了这个；为什么现在需要复制数组，

“在 knockout.js 2.2 中进行了更改，以使数组变异函数不会创建对可观察数组的依赖关系。通常，如果您希望计算返回数组的反转版本，您不会在原始数组上使用 reverse，而是在复制。代替 `self.anObservableArray.reverse()`, 执行 `self.anObservableArray.slice(0).reverse()` 示例：`http://jsfiddle.net/mbest/3QHM7/1/`

所以基本上，这是为了避免对可观察数组产生依赖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-31T07:35:23.670

因为 reverse() 对源数组产生影响，而不是返回一个副本数组并用 'foreach' 绑定调用它两次，所以你将在最终结果中得到相同的数组。

您可以使用以下代码进行测试：

```
<ul  data-bind="foreach: alert(anObservableArray.reverse())" >...</ul> 
```

# mongodb - MongoDB 聚合管道多个组使管道复杂化

> ID：14391957
> 
> 赞同：2
> 
> 时间：2013-01-18T03:30:40.807
> 
> 标签：mongodb, aggregation-framework, database

这是我的文档结构：

```
{
 "_id" : ObjectId("50dcd7ff4de274a2c4a31df0"),
 "seq_name" : "169:D18M6ACXX:1:1111:17898:82486:GTGACA_10",
 "raw_seq" : "TTGACCTGAGGAGACGGTGACCAGGGTTCCCTGGCCCCAGTAGTCAACGGGAGTTAGACTTCTCGCACAGTAATAAACAGCCGTGTCCTCGGCTCTCAGGCTGTTCATTTGCAGA",
 "seq_aa" : "LQMNSLRAEDTAVYYCARSLTPVDYWGQGTLVTVSSGQ",
 "cdr3_seq" : "GCGAGAAGTCTAACTCCCGTTGACTAC",
 "cdr3_seq_aa" : "ARSLTPVDY",
 "cdr3_seq_len" : 27,
 "cdr3_seq_aa_len" : 9,
 "vg" : "IGHV3-48*03",
 "dg" : "IGHD3-10*02R",
 "jg" : "IGHJ4*02",
 "donor" : 10
} 
```

我真的很喜欢 MongoDB 框架，但是我在使用这个分组管道时遇到了麻烦，因为我还不能 $out 到另一个集合。我可以做这个多分组管道。

```
db.collection.aggregate({$match:{cdr3_seq_aa_len:{$gt:3}},
   {$group:{_id:$cdr3_seq_aa,other_set:{$addToSet:$cdr3_seq_aa_len}}},
   {$group:{_id:$other_set,sum:{$sum:1}}}) 
```

这给了我按长度分组的**唯一**$cdr3_seq_aa 数量。

```
{ id:40, sum:1002031,
  id:41, sum:1949402,.... 
```

但是，我想做的第一个操作是按捐赠者分组。所以我首先可以知道每个捐助者之间有多少个唯一的 cdr3_seq_aa 字符串。然后我想按长度对其进行分组，并计算有多少个字符串与长度分组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T04:29:19.797

如果我正确理解了这个问题，这就是你要找的。关键概念是您可以从多个字段构造复合 _id。

```
db.collection.aggregate(
[
    {$match: {cdr3_seq_aa_len: {$gt: 3}}},
    {$group: 
         {
              _id: {donor: "$donor", cdr3_seq_aa: "$cdr3_seq_aa"},
              donor_cdr3_seq_aa_count: {$sum: 1},
              cdr3_seq_aa_len: {$first: "$cdr3_seq_aa_len"}
         }
    },
    {$group:
         {
             _id: {donor: "$_id.donor", len: "$cdr3_seq_aa_len"},
             num_strings_with_this_length: {$sum: 1},
             total_doc_count_by_length:
                  {$sum: "$donor_cdr3_seq_aa_count"}
         }
    }
]) 
```

# python - matplotlib中的热图与pcolor？

> ID：14391959
> 
> 赞同：105
> 
> 时间：2013-01-18T03:31:17.710
> 
> 标签：python, matplotlib, data-visualization, heatmap

我想制作这样的热图（显示在[FlowingData](http://flowingdata.com/2010/01/21/how-to-make-a-heatmap-a-quick-and-easy-solution/)上）： ![热图](../Images/2bab29cd33423fe9625bb8bedff02005.png)

源数据在[这里](http://datasets.flowingdata.com/ppg2008.csv)，但是可以使用随机数据和标签，即

```
import numpy
column_labels = list('ABCD')
row_labels = list('WXYZ')
data = numpy.random.rand(4,4) 
```

在 matplotlib 中制作热图很容易：

```
from matplotlib import pyplot as plt
heatmap = plt.pcolor(data) 
```

我什至发现了一个看起来正确的[颜色图参数：](http://www.scipy.org/Cookbook/Matplotlib/Show_colormaps)`heatmap = plt.pcolor(data, cmap=matplotlib.cm.Blues)`

但除此之外，我无法弄清楚如何显示列和行的标签并以正确的方向显示数据（原点位于左上角而不是左下角）。

试图操纵`heatmap.axes`（例如`heatmap.axes.set_xticklabels = column_labels`）都失败了。我在这里想念什么？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-04-20T20:09:39.523

这已经很晚了，但这是我对流动数据 NBA 热图的 python 实现。

**更新时间：2014 年 1 月 4 日**：谢谢大家

```
# -*- coding: utf-8 -*-
# <nbformat>3.0</nbformat>

# ------------------------------------------------------------------------
# Filename   : heatmap.py
# Date       : 2013-04-19
# Updated    : 2014-01-04
# Author     : @LotzJoe >> Joe Lotz
# Description: My attempt at reproducing the FlowingData graphic in Python
# Source     : http://flowingdata.com/2010/01/21/how-to-make-a-heatmap-a-quick-and-easy-solution/
#
# Other Links:
#     http://stackoverflow.com/questions/14391959/heatmap-in-matplotlib-with-pcolor
#
# ------------------------------------------------------------------------

import matplotlib.pyplot as plt
import pandas as pd
from urllib2 import urlopen
import numpy as np
%pylab inline

page = urlopen("http://datasets.flowingdata.com/ppg2008.csv")
nba = pd.read_csv(page, index_col=0)

# Normalize data columns
nba_norm = (nba - nba.mean()) / (nba.max() - nba.min())

# Sort data according to Points, lowest to highest
# This was just a design choice made by Yau
# inplace=False (default) ->thanks SO user d1337
nba_sort = nba_norm.sort('PTS', ascending=True)

nba_sort['PTS'].head(10)

# Plot it out
fig, ax = plt.subplots()
heatmap = ax.pcolor(nba_sort, cmap=plt.cm.Blues, alpha=0.8)

# Format
fig = plt.gcf()
fig.set_size_inches(8, 11)

# turn off the frame
ax.set_frame_on(False)

# put the major ticks at the middle of each cell
ax.set_yticks(np.arange(nba_sort.shape[0]) + 0.5, minor=False)
ax.set_xticks(np.arange(nba_sort.shape[1]) + 0.5, minor=False)

# want a more natural, table-like display
ax.invert_yaxis()
ax.xaxis.tick_top()

# Set the labels

# label source:https://en.wikipedia.org/wiki/Basketball_statistics
labels = [
    'Games', 'Minutes', 'Points', 'Field goals made', 'Field goal attempts', 'Field goal percentage', 'Free throws made', 'Free throws attempts', 'Free throws percentage',
    'Three-pointers made', 'Three-point attempt', 'Three-point percentage', 'Offensive rebounds', 'Defensive rebounds', 'Total rebounds', 'Assists', 'Steals', 'Blocks', 'Turnover', 'Personal foul']

# note I could have used nba_sort.columns but made "labels" instead
ax.set_xticklabels(labels, minor=False)
ax.set_yticklabels(nba_sort.index, minor=False)

# rotate the
plt.xticks(rotation=90)

ax.grid(False)

# Turn off all the ticks
ax = plt.gca()

for t in ax.xaxis.get_major_ticks():
    t.tick1On = False
    t.tick2On = False
for t in ax.yaxis.get_major_ticks():
    t.tick1On = False
    t.tick2On = False 
```

输出如下所示： ![类似流动数据的NBA热图](../Images/ce1bb8a9073d3d38fef52fdeb953d16a.png)

[这里](http://nbviewer.ipython.org/5427209)有一个包含所有这些代码的 ipython 笔记本。我从“溢出”中学到了很多东西，所以希望有人会觉得这很有用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-06-09T00:31:03.080

python seaborn 模块基于 matplotlib，生成了一个非常漂亮的热图。

下面是为 ipython/jupyter notebook 设计的 seaborn 实现。

```
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
%matplotlib inline
# import the data directly into a pandas dataframe
nba = pd.read_csv("http://datasets.flowingdata.com/ppg2008.csv", index_col='Name  ')
# remove index title
nba.index.name = ""
# normalize data columns
nba_norm = (nba - nba.mean()) / (nba.max() - nba.min())
# relabel columns
labels = ['Games', 'Minutes', 'Points', 'Field goals made', 'Field goal attempts', 'Field goal percentage', 'Free throws made', 
          'Free throws attempts', 'Free throws percentage','Three-pointers made', 'Three-point attempt', 'Three-point percentage', 
          'Offensive rebounds', 'Defensive rebounds', 'Total rebounds', 'Assists', 'Steals', 'Blocks', 'Turnover', 'Personal foul']
nba_norm.columns = labels
# set appropriate font and dpi
sns.set(font_scale=1.2)
sns.set_style({"savefig.dpi": 100})
# plot it out
ax = sns.heatmap(nba_norm, cmap=plt.cm.Blues, linewidths=.1)
# set the x-axis labels on the top
ax.xaxis.tick_top()
# rotate the x-axis labels
plt.xticks(rotation=90)
# get figure (usually obtained via "fig,ax=plt.subplots()" with matplotlib)
fig = ax.get_figure()
# specify dimensions and save
fig.set_size_inches(15, 20)
fig.savefig("nba.png") 
```

输出如下： ![seaborn nba 热图](../Images/8beb2b4e1f6f79010c95cdb184ab27b2.png) 我使用了 matplotlib Blues 颜色图，但个人觉得默认颜色相当漂亮。我使用 matplotlib 来旋转 x 轴标签，因为我找不到 seaborn 语法。正如 grexor 所指出的，有必要通过反复试验来指定尺寸（fig.set_size_inches），我觉得这有点令人沮丧。

正如 Paul H 所指出的，您可以轻松地将这些值添加到热图（annot=True），但在这种情况下，我认为它并没有改善这个数字。从 joelotz 的优秀答案中提取了几个代码片段。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-18T05:13:11.750

主要问题是您首先需要设置 x 和 y 刻度的位置。此外，它有助于使用更面向对象的接口来连接 matplotlib。即，`axes`直接与对象交互。

```
import matplotlib.pyplot as plt
import numpy as np
column_labels = list('ABCD')
row_labels = list('WXYZ')
data = np.random.rand(4,4)
fig, ax = plt.subplots()
heatmap = ax.pcolor(data)

# put the major ticks at the middle of each cell, notice "reverse" use of dimension
ax.set_yticks(np.arange(data.shape[0])+0.5, minor=False)
ax.set_xticks(np.arange(data.shape[1])+0.5, minor=False)

ax.set_xticklabels(row_labels, minor=False)
ax.set_yticklabels(column_labels, minor=False)
plt.show() 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-09-22T08:45:39.737

有人编辑了这个问题以删除我使用的代码，所以我被迫将其添加为答案。感谢所有参与回答这个问题的人！我认为大多数其他答案都比这段代码更好，我只是将其留在这里以供参考。

感谢[Paul H](https://stackoverflow.com/users/1552748/paul-h)和[unutbu](https://stackoverflow.com/users/190597/unutbu)（谁回答[了这个问题](https://stackoverflow.com/questions/14406214/moving-x-axis-to-the-top-of-a-plot-in-matplotlib)），我得到了一些非常漂亮的输出：

```
import matplotlib.pyplot as plt
import numpy as np
column_labels = list('ABCD')
row_labels = list('WXYZ')
data = np.random.rand(4,4)
fig, ax = plt.subplots()
heatmap = ax.pcolor(data, cmap=plt.cm.Blues)

# put the major ticks at the middle of each cell
ax.set_xticks(np.arange(data.shape[0])+0.5, minor=False)
ax.set_yticks(np.arange(data.shape[1])+0.5, minor=False)

# want a more natural, table-like display
ax.invert_yaxis()
ax.xaxis.tick_top()

ax.set_xticklabels(column_labels, minor=False)
ax.set_yticklabels(row_labels, minor=False)
plt.show() 
```

这是输出：

[![Matplotlib 热图](../Images/8001354bc642e783e0578655763de170.png)](https://i.stack.imgur.com/GBZJi.png)

# ruby-on-rails - Ruby on Rails：具有多个外键的模型关联

> ID：14391962
> 
> 赞同：2
> 
> 时间：2013-01-18T03:31:20.493
> 
> 标签：ruby-on-rails, database, model-associations, rails-activerecord

我正在研究一个`User`模型，每个用户应该能够同时拥有学生和老师。但是，由于*学生*和*老师*都是 的类型`User`，所以我的模型有点复杂。

这就是我现在正在尝试的。

**Teacher_student_link**

```
class TeacherStudentLink < ActiveRecord::Base
  attr_accessible :student_id, :teacher_id, :user_id

  belongs_to :user
  belongs_to :teacher, :class_name => "User"
  belongs_to :student, :class_name => "User"
end 
```

**用户**

```
class User < ActiveRecord::Base
  has_many :teacher_student_links, :foreign_key => { :student_id, :teacher_id }, :dependent => :destroy
  has_many :students, :through => :teacher_student_links
  has_many :teachers, :through => :teacher_student_links
end 
```

如果一切如我所愿，我应该能够做到

```
@user = User.new
@user.students
@user.teachers
@user.student.teachers 
```

我认为上面唯一的问题是我不能同时给两个外键`teacher_student_link`，但我不确定。作为一种解决方法，我的模型中还没有teacher_id，只是`student.user`调用`teacher`. 谁能帮我解决这个问题？

**更新：** 使用以下解决方案，我应该如何创建新链接？

```
def become_student
  @user = user.find(params[:id])
  @student_link = @user.student_links.create(:student_id => current_user.id)
  @teacher_link = current_user.teacher_links.create(:teacher_id => @user.id)
end 
```

如果我这样做，学生和老师是否正确配对？我有点困惑，因为在 TeacherStudentLink 中，有`user`, `student`, `teacher`，我不知道如何处理创建链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T03:46:00.497

您应该将teacher_student_links 关联分成两个关联：

```
 has_many :teacher_links, :foreign_key => :student_id, :dependent => :destroy, :class_name => "TeacherStudentLink"
  has_many :student_links, :foreign_key => :teacher_id, :dependent => :destroy, :class_name => "TeacherStudentLink"
  has_many :students, :through => :student_links
  has_many :teachers, :through => :teacher_links 
```

您可能还需要将外键添加到 TeacherStudentLink 上的 belongs_to 关联

**更新：**

关于您关于创建链接的第二个问题，以下应该有效：

```
@user = User.find(params[:id])
@user.students << current_user 
```

TeacherStudentLink 应该是自动创建的，如果一切设置正确，您的关联应该可以工作。

# nsinvocation - 如何使用 NSInvocations 传递完成块？

> ID：14391963
> 
> 赞同：2
> 
> 时间：2013-01-18T03:31:22.517
> 
> 标签：nsinvocation

我有一个应用程序向我的服务器发出签名请求。所有请求都需要身份验证令牌。每当我发出请求时，如果未找到身份验证令牌，我会使用 NSInvocation 存储该请求，查询身份验证令牌，调用我的调用，然后返回带有完成块的原始调用方法。

我的问题是，如何正确地将返回块传递给 NSInvocation？我没有错误，但由于某种原因，[someClass listFilesWithCompletionBlock] 的完成块的原始调用者永远不会触发。

```
...
 [someClass listFilesWithCompletionBlock:^(id response, id error){
             onCompletion(response, error);  // <-- never returns here
  }];

...

// someClass
// method that is called if token was valid
- (void) someMethodWithCompletionBlock:(void(^)(id response, id error))onCompletion{
     // do the work that lists all of the files from server
    onCompletion(response, error);

}

// if token was valid, call someMethod, if not then set the invocation, then call fetch token
- (void) listFilesWithCompletionBlock:(void(^)(id response, id error))onCompletion{
    onCompletion(response, error){

    if(token){
        [self someMethodWithCompletionBlock:^(id response, id error){
             onCompletion(response, error);
         }];

    }else{
            void (^blockName)(id, id) = ^void (id response, id error){
                   NSLog(@"block!");
             };

        SEL selector = @selector(listFilesWithCompletionBlock:);
        NSMethodSignature *signature  = [self methodSignatureForSelector:selector];
        self.invocation = [NSInvocation invocationWithMethodSignature:signature];
        [self.invocation setTarget:self];
        [self.invocation setSelector:selector];
        [self.invocation setArgument:&blockName atIndex:2];

        [self fetchToken];          

    }

}

    // fetches token, then invokes
    - (void) fetchToken{
        [anotherClass fetchTokenWithCompletionBlock:^(NSString *responseToken, id error) {
        if(responseToken){
            // we got the token
            // invoke any methods here
            // should call listFiles with valid token then calls someMethod
            [self.invocation invoke];
        }
    }]; 
```

# asp.net-mvc - IEnumerable 在剃刀中是否特别？

> ID：14391966
> 
> 赞同：0
> 
> 时间：2013-01-18T03:32:08.760
> 
> 标签：asp.net-mvc, razor

在 ASP.NET MVC razor 查看详细信息页面中，我可以有一个模型，如：

`@model MyClass`

然后执行以下操作：

`@html.DisplayNameFor(m => m.MyProperty)`

但是在列表页面中，我有：

`@model IEnumerable<MyClass>`

相同的@html 代码有效。我不希望它，因为 MyProperty 不是 IEnumerable 的属性。IEnumerable 是否“特殊”，因为 razor 视图引擎知道查看类型参数 MyClass 的属性，而不是 IEnumerable 本身的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T04:31:23.367

IEnumerable 并不特别。如果您要使用@html.DisplayFor(m => m.MyProperty)，您会收到一个错误，即您的 IEnumerable 列表不包含“MyProperty”的定义。您必须使用 linq 查询来选择一个 MyClass 对象或对您的模型执行 ForEach() 。

@html.DisplayNameFor 的特殊之处在于它对 IEnumerable 模型具有重载。它知道您实际上只是在属性的显示名称之后，并且由于您有一个强类型列表，它知道如何找到显示名称。这是一个方便的功能！

# android - Android：将微调器选择传递给新活动

> ID：14391967
> 
> 赞同：2
> 
> 时间：2013-01-18T03:32:32.943
> 
> 标签：android, android-spinner

我正在开发一个项目，用户最多可以从微调器中选择五个选项，我想在按下提交按钮时在新活动中显示选定的选项我在按下按钮时打开了一个新活动，但没有显示，我是需要我需要做的步骤的帮助，这是我要显示数据的第二个屏幕的代码

```
 public class SecondScreenActivity extends Activity {

    TextView FirstIwi;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.selected_iwi);

        FirstIwi = (TextView) findViewById(R.id.spinner1);

         Intent intename = getIntent();

        String iwi1 = (String) intename.getSerializableExtra("USERNAME"); 
        //Spinner spinnername2 = (Spinner) findViewById(R.id.spinner2);

        FirstIwi.setText("First Iwi" + iwi1);

    }
} 
```

**头等舱**

```
 import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.Menu;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.Spinner;

public class IwiSelect extends Activity {

    Spinner spinner1, spinner2, spinner3, spinner4, spinner5;
    Button btnSubmit; 
    String iwi1;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_iwiselect);

        addListenerOnButton();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_iwi_select, menu);
        return true;
    }

    // get the selected drop down list value
      public void addListenerOnButton() {

        spinner1 = (Spinner) findViewById(R.id.spinner1);
        spinner2 = (Spinner) findViewById(R.id.spinner2);
        spinner3 = (Spinner) findViewById(R.id.spinner3);
        spinner4 = (Spinner) findViewById(R.id.spinner4);
        spinner5 = (Spinner) findViewById(R.id.spinner5);

        btnSubmit = (Button) findViewById(R.id.btnSubmit);

        btnSubmit.setOnClickListener(new OnClickListener() {

            public void onClick(View view) {

                iwi1 = spinner1.toString();
                //Starting a new Intent
                Intent nextScreen = new Intent(IwiSelect.this, SecondScreenActivity.class);

                //Sending data to another Activity
                nextScreen.putExtra("USERNAME", iwi1);
                //nextScreen.putExtra(spinner2.getContext().toString(), false);

                // starting new activity
                startActivity(nextScreen);

    }
        });

      }
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-04T11:54:05.840

您需要使用以下代码：

```
// find spinner object here
Spinner spinner1 = (Spinner) findViewById(R.id.spinner1);
//get selected value here
String itemStr = spinnername1.getSelectedItem().toString();
//put selected vale and start new activity
Intent mIntent = new Intent(ActivityOne.this, NewActivity.class);
mIntent.putExtra("data", itemStr);
startActivity(mIntent);

/**
* AT receiver side activity in onCreate
*/
Intent i = getIntent();
String dataString = i.getString("data"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T04:29:19.660

如果这是您使用的实际代码，

`String name1 = i.getStringExtra("");`

是错的。你输入的`()`应该是你在你的`Intent`. 如果你有

`myIntent.putExtra("myKey", myValue)`

那么当你从`Intent`你需要使用的额外内容中得到额外的

`String name1 = i.getStringExtra("myKey");`

这将为您提供`myValue`. `key`为每个使用不同的`extra`.

如果这不这样做，那么请发布您发送`Intent`数据的方式以及您似乎丢失了值的位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T04:57:26.460

试试这个代码。

```
Spinner spinnername1 = (Spinner) findViewById(R.id.spinner1);
String mStr = spinnername1.getSelectedItem().toString(); 
```

**将价值传递给意图**

```
Intent mIntent = new Intent(CurrentActivity.this, NextActivity.class);
mIntent.putExtra("Value", mStr);
startActivity(mIntent); 
```

**从意图中获取价值。**

```
Bundle bdl = getIntent().getExtras();
String mValue = bdl.getString("Value"); 
```

# android - 如何禁用 onTouch()？

> ID：14391969
> 
> 赞同：1
> 
> 时间：2013-01-18T03:32:35.283
> 
> 标签：android, android-view, touch-event

我试图在我的 LoadPreview().execute 启动时禁用 onTouch()，因为如果用户点击触发我的 LoadPreview() 的按钮，将会有重复的预览按钮。所以我想在加载过程中禁用 onTouch() 。

有办法吗？

这是我的 ontouch 方法：

```
@Override
                public boolean onTouch(View arg0, MotionEvent arg1) {
                    // TODO Auto-generated method stub

                    switch(arg1.getAction())
                    {
                    case MotionEvent.ACTION_DOWN:
                        adapter.clear();
                        new LoadPreview().execute();
                    break;
                    } 

                    return true;
                }   

             }
                );

             } 
```

这是我的加载预览（）

```
/**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class LoadPreview extends AsyncTask<String, String, String> {

        /**
         * getting preview url and then load them
         * */
        protected String doInBackground(String... args) {

            // Building Parameters
                List<NameValuePair> params = new ArrayList<NameValuePair>();
                // getting JSON string from URL
                JSONObject json = jParser.makeHttpRequest(url_magazine, "GET", params);

                // Check your log cat for JSON reponse
                Log.d("All Products: ", json.toString());

                try {
                    // Checking for SUCCESS TAG
                    int success = json.getInt(TAG_SUCCESS);

                    if (success == 1) {
                        // products found
                        // Getting Array of Products
                        mag = json.getJSONArray(TAG_MAGAZINE);

                        for (int i = 0; i < mag.length(); i++) {
                            JSONObject c = mag.getJSONObject(i);

                            // Storing each json item in variable
                            String magazinePreview = c.getString(TAG_MAGAZINE_PREVIEW);

                            previewList.add(magazinePreview);
                        }                   
                    } 
                    else {

                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }

            for (int a = 0; a <= previewList.size(); a++)
            {           
                if(pos == a)
                {
            // Building Parameters
            List<NameValuePair> param = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json1 = jParser.makeHttpRequest(previewList.get(a), "GET", param);

            // CHECKING OF JSON RESPONSE
            Log.d("All guide: ", json.toString());

            try {
                preview = json1.getJSONArray(TAG_PREVIEWS);

                for (int i = 0; i < preview.length(); i++) {
                    JSONObject c = preview.getJSONObject(i);

                    String image = c.getString(TAG_IMAGE);

                    previewImagesList.add(image);
                    //System.out.println(guideList);
                }   

                // STOP THE LOOP
                break;

            } catch (JSONException e) {
                e.printStackTrace();
            }

            }

            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {

        /**
         *  Updating parsed JSON data into ListView
        * */            
            adapter.notifyDataSetChanged();

        }
    } 
```

onItemClick 方法：

```
coverFlow.setOnItemClickListener(new OnItemClickListener()
    {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {

            adapter.clear();
            File sdCard1 = Environment.getExternalStorageDirectory();
            File dir1 = new File (sdCard1.getAbsolutePath() + "/Futsing/issue"+issueNumber+"/"); 

                    /** IF FILE EXISTS **/
                    if(dir1.exists())
                    {
                        Intent intent = new Intent();
                        intent.setClass(CoverFlowExample.this, Reader.class);
                        intent.putExtra("issue", issueNumber);
                        startActivityForResult(intent, GET_INTENT_CODE);
                    }
                    else
                    {
                        if(process==false)
                        {
                            new LoadPreview().execute();
                            process = true;
                        }

                        else
                        {
                            process = false;
                        }
                    }
        }

    }

); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:48:10.340

照Gabe说的去做。你也可以像我解释的那样做。1.定义一个布尔值，如：

```
private boolean process = false; 
```

1.  覆盖 AsyncTask 中的 onPreExecution 等方法。
2.  将布尔值放在上述方法上，将其值定义为 true。

    过程=真；

3.  现在， onPostExecution 方法把这个：

    过程=假

4.  并实现您的 onTouch 方法，如下所示：

    ```
    @Override
    public boolean onTouch(View arg0, MotionEvent arg1) {
    // TODO Auto-generated method stub

    if(process==false){

        switch(arg1.getAction())
        {
            case MotionEvent.ACTION_DOWN:
               adapter.clear();
               new LoadPreview().execute();
               break;
        } 

        return true;
        }   
        else{
          return false;
    }

    } 
    ```

    );

** 对于 onItenClick **

您可以使用下面的代码让 onItemClick 随心所欲地工作。

```
@Override
    public void onItemClick(AdapterView<?> arg0, View arg1,
            int arg2, long arg3) {

       if(process==false)
       {

        adapter.clear();
        File sdCard1 = Environment.getExternalStorageDirectory();
        File dir1 = new File (sdCard1.getAbsolutePath() + "/Futsing/issue"+issueNumber+"/"); 

                /** IF FILE EXISTS **/
                if(dir1.exists())
                {
                    Intent intent = new Intent();
                    intent.setClass(CoverFlowExample.this, Reader.class);
                    intent.putExtra("issue", issueNumber);
                    startActivityForResult(intent, GET_INTENT_CODE);
                }
                else
                {

                        new LoadPreview().execute();

                }
          }else{
                // nothing to do here it means the process is running
          }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T03:36:18.040

使用旗帜。在您的课程中放置一个布尔值 allowTouch。默认为真。当您想停止触摸时，请将其设置为 false。当您准备好再次触摸时，将其设置为 true。更改您的 onTouch 方法，使其仅在 allowTouch == true 时运行其中的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T03:40:54.280

使用`boolean`标志检查数据是否正在加载以防止重复调用。

声明一个 global `boolean`，例如：`boolean loadingData;`

然后，在您的`onTouch()`方法中，设置`loadingPreview = true;`

最后，在`onPostExecute()`AsyncTask 的方法中`loadingPreview`，切换`loadingPreview`到`loadingPreview = false;`

这将确保在它仍在执行此操作时不会生成重复的类来获取数据。切换状态将确保应用程序再次准备就绪。

编辑：不要忘记`onTouch()`在调用 AyncTask 之前检查方法中的状态`loadingPreview`

```
if (loadingPreview == false) {
    new LoadPreview().execute();
} 
```

# javascript - Mediaelement.js 在某些浏览器上显示灰色条

> ID：14391974
> 
> 赞同：1
> 
> 时间：2013-01-18T03:33:11.713
> 
> 标签：javascript, jquery, html, mp4, mediaelement.js

我在带有 mediaelement.js 的网站上嵌入了视频。该视频正确显示了除 PC Firefox 和 PC Chrome 之外的所有浏览器，其中视频在视频的右侧和底部显示奇怪的灰色条。我确定这是某种编码问题，但不确定如何解决。

我的代码看起来像这样

```
<style>
.video embed,.video object, .video iframe, video { width: 100%; height: auto; }
</style>

<video width="960" height="540" style=" cursor:pointer;width: 100%; height: 100%; max-width:960px; max-height:540px; margin: 0 0 0 0; z-index:0;" id="player1" preload="true">
<source type="video/mp4" src="video.mp4" />
</video>
<script src="mediaelement-and-player.min.js"></script>
<link rel="stylesheet" href="mediaelementplayer.min.css" />

<script>
    var player = new MediaElementPlayer('#player1', {features:['playpause','backlight','progress','current','duration','volume'],
startLanguage:'en',alwaysShowControls: false,hideControls: true, defaultVideoWidth: 960,defaultVideoHeight: 540
    });

    player.hideControls();
    player.play();
    player.pause();
</script> 
```

# android - Spinner 到 String 到 Intent 到 Array 。为什么这个 Intent 不起作用？

> ID：14391976
> 
> 赞同：0
> 
> 时间：2013-01-18T03:33:31.347
> 
> 标签：android, arrays, string, android-intent

为什么意图不能正常工作？MainActivity 是一个图表，它最初绘制了数组 (series1Numbers) 中的一条线。我有另一个带有微调器的类 (Main2Activity)，我想填充 MainActivity 中的 (series1numbers) 数组，从而生成我的图表。目前（series1numbers）的图形线是空白的，这很有意义，因为我无法弄清楚如何用（Main2Activity）中的单个数字填充它。我已经搜索和搜索，但无法为这个问题连接点。

主要活动.java

```
package com.example;
import java.util.Arrays;
import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.os.Bundle;
import com.androidplot.series.XYSeries;
import com.androidplot.xy.LineAndPointFormatter;
import com.androidplot.xy.SimpleXYSeries;
import com.androidplot.xy.XYPlot;

/**
* The simplest possible example of using AndroidPlot to plot some data.
*/
public class MainActivity extends Activity
{

private XYPlot mySimpleXYPlot;

@Override
public void onCreate(Bundle savedInstanceState)
{

super.onCreate(savedInstanceState);
setContentView(R.layout.main);
Intent intename = getIntent();
String name = (String) intename.getSerializableExtra("series1Numbers");

// initialize our XYPlot reference:
mySimpleXYPlot = (XYPlot) findViewById(R.id.mySimpleXYPlot);

// Create a couple arrays of y-values to plot:
Number[] series1Numbers ={name};
Number[] series2Numbers = {-4, -4, -5, -4, -4, -4, -3, -7, -4, -2, -4, -5, -5, -5};

// Turn the above arrays into XYSeries':
XYSeries series1 = new SimpleXYSeries(Arrays.asList(series1Numbers), 
// SimpleXYSeries takes a List so turn our array into a List
SimpleXYSeries.ArrayFormat.Y_VALS_ONLY, 
// Y_VALS_ONLY means use the element index as the x value
"Series1");                             
// Set the display title of the series

// same as above
XYSeries series2 = new SimpleXYSeries(Arrays.asList(series2Numbers), SimpleXYSeries.ArrayFormat.Y_VALS_ONLY, "Series2");

// Create a formatter to use for drawing a series using LineAndPointRenderer:
LineAndPointFormatter series1Format = new LineAndPointFormatter(
        Color.rgb(0, 200, 0),                   // line color
        Color.rgb(0, 100, 0),                   // point color
        null);                                  // fill color (none)

// add a new series' to the xyplot:
mySimpleXYPlot.addSeries(series1, series1Format);

// same as above:
mySimpleXYPlot.addSeries(series2,
        new LineAndPointFormatter(Color.rgb(0, 0, 200), Color.rgb(0, 0, 100), null));

// reduce the number of range labels
mySimpleXYPlot.setTicksPerRangeLabel(3);

// by default, AndroidPlot displays developer guides to aid in laying out your plot.
// To get rid of them call disableAllMarkup():
mySimpleXYPlot.disableAllMarkup(); 
```

}

Main2Activity.java

```
package com.example;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.AdapterView.OnItemSelectedListener;

public class Main2Activity extends Activity implements OnItemSelectedListener {

//TextView series1Numbers ;
Spinner spin;
String[] series1Numbers = { "-1", "-2", "-3", "-4", "-5",
   "-6", "-7", "-8" , "-9" , "-10" };
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main2);

//series1Numbers  = (TextView) findViewById(R.id.series1Numbers );

Spinner spin = (Spinner) findViewById(R.id.spinner);
spin.setOnItemSelectedListener(this);

ArrayAdapter<String> aa = new ArrayAdapter<String>(this,
android.R.layout.simple_spinner_item, series1Numbers);

spin.setAdapter(aa);
}

@Override
public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {
// TODO Auto-generated method stub
// series1Numbers .setText(items[position]);
    if (position == 1){
      Intent intentObj = new Intent(Main2Activity.this, MainActivity.class);
      intentObj.putExtra("series1Numbers", series1Numbers);
      startActivity(intentObj);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T04:37:07.620

```
Bundle b=new Bundle();
b.putStringArray(key, new String[]{value1, value2});
Intent i=new Intent(context, Class);
i.putExtras(b); 
```

为了阅读：

```
Bundle b=this.getIntent().getExtras();
String[] array=b.getStringArray(key); 
```

希望这会帮助你。:)

有关更多信息，请参阅[此](https://stackoverflow.com/questions/4429036/passing-string-array-between-android-activities)。

# javascript - 动力学JS；使用按钮使多个对象出现和消失

> ID：14391980
> 
> 赞同：3
> 
> 时间：2013-01-18T03:34:05.720
> 
> 标签：javascript, kineticjs

我是 KineticJS 的新手，我正在尝试弄清楚如何使用按钮使不同的项目出现或消失。下面是带有示例的 JSFiddles。

有四个盒子。我想这样做，以便当我单击一个框的按钮时，该框会出现，并且任何其他可见的框都会消失。

在第一个 JSFiddle 中，我使用了 addEventListener 并分别列出了所有四个正方形，将它们设置为正确的不透明度。它工作正常：

[http://jsfiddle.net/T8m64/85/](http://jsfiddle.net/T8m64/85/)

然而，我真正想要实现的项目有 30 个项目而不是 4 个。所以我的问题是是否有更快的方法将项目组合在一起而不是列出它们。我用 Kinetic.Group 试过这个，但它似乎不起作用：

[http://jsfiddle.net/T8m64/86/](http://jsfiddle.net/T8m64/86/)

我的按钮事件代码是：

```
 document.getElementById('s1').addEventListener('click', function() {
        square.setOpacity(1);       
        layer.draw();
    }, false); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T07:52:43.823

好的，所以我对 KineticJS 了解不多，但我认为您可以使用普通的旧 JavaScript 实现您想要的。

[这是一个小提琴](http://jsfiddle.net/wrexroad/Vv9kV/29/)，它展示了一种做你想做的事情的方法。

这里的基本思想是您将所有按钮设置为具有一个通用类名。然后，使用`document.getElementsByClassname`您可以获得按钮元素的数组。我使用每个按钮的 id 来描述生成的正方形在行/列布局中的所需位置（例如 id="1_0" 是第一行，第 0 列；id="0_1" 是第 0 行，第 1 列）。

然后您所要做的就是遍历数组并附加 KineticJS 形状对象和事件侦听器。

在 KineticJS 形状中，我定义了一个 drawFunc，它引用了框坐标的变量。这个变量必须是不变的东西（即你不要在每次循环迭代时重写它。）为此做的最好的事情是以某种方式将坐标附加到形状对象。我选择计算每个框的行和列，并将它们附加到对象上。然后在drawFunc中有一些计算引用框的行/列来计算角坐标。毫无疑问，有更好的方法可以做到这一点，但我很累。

现在，您可以根据需要在 HTML 中创建任意数量的按钮，它们将根据 ID 中指定的位置创建框。

# c++ - 在 Windows 上使用 Qt 包配置文件？

> ID：14391981
> 
> 赞同：3
> 
> 时间：2013-01-18T03:34:06.857
> 
> 标签：c++, windows, qt, include-path, pkg-config

我如何在寡妇上使用 qt 和 package-config？我找不到包含 qt 包配置文件的文件夹，即 QtCore.pc QtGui.pc 等。如果它们没有与 vs2010 二进制文件一起分发，我如何生成它们？如果可能的话，我想避免重建 qt。我将 Qt 4.8 与默认的 win32 Visual Studio 2010 二进制文件一起使用。

# mongodb - 为什么 mongoDB 占用这么多 RAM 空间？

> ID：14391985
> 
> 赞同：1
> 
> 时间：2013-01-18T03:34:51.757
> 
> 标签：mongodb, indexing, query-optimization, out-of-memory, pymongo

我已经设法使用 pymongo 为 mongoDB 编写了一个简单的索引器脚本。但我不知道为什么索引、添加文档和查询会占用我服务器上 96GB 的 RAM。

**是因为我的查询没有优化吗？我怎样才能优化我的查询而不是** `database.find_one({"eng":src})`

**我还能如何优化我的索引器脚本？**

所以我的输入是这样的（实际的数据输入有**200 万多行**不同长度的句子）：

**#src文件**

```
You will be aware from the press and television that there have been a number of bomb explosions and killings in Sri Lanka.
One of the people assassinated very recently in Sri Lanka was Mr Kumar Ponnambalam, who had visited the European Parliament just a few months ago.
Would it be appropriate for you, Madam President, to write a letter to the Sri Lankan President expressing Parliament's regret at his and the other violent deaths in Sri Lanka and urging her to do everything she possibly can to seek a peaceful reconciliation to a very difficult situation?
Yes, Mr Evans, I feel an initiative of the type you have just suggested would be entirely appropriate.
If the House agrees, I shall do as Mr Evans has suggested. 
```

**#trg文件**

```
Wie Sie sicher aus der Presse und dem Fernsehen wissen, gab es in Sri Lanka mehrere Bombenexplosionen mit zahlreichen Toten.
Zu den Attentatsopfern, die es in jüngster Zeit in Sri Lanka zu beklagen gab, zählt auch Herr Kumar Ponnambalam, der dem Europäischen Parlament erst vor wenigen Monaten einen Besuch abgestattet hatte.
Wäre es angemessen, wenn Sie, Frau Präsidentin, der Präsidentin von Sri Lanka in einem Schreiben das Bedauern des Parlaments zum gewaltsamen Tod von Herrn Ponnambalam und anderen Bürgern von Sri Lanka übermitteln und sie auffordern würden, alles in ihrem Kräften stehende zu tun, um nach einer friedlichen Lösung dieser sehr schwierigen Situation zu suchen?
Ja, Herr Evans, ich denke, daß eine derartige Initiative durchaus angebracht ist.
Wenn das Haus damit einverstanden ist, werde ich dem Vorschlag von Herrn Evans folgen. 
```

示例文档如下所示

```
{ 
    "_id" : ObjectId("50f5fe8916174763f6217994"), 
    "deu" : "Wie Sie sicher aus der Presse und dem Fernsehen wissen, gab es in Sri 
             Lanka mehrere Bombenexplosionen mit zahlreichen Toten.\n", 
    "uid" : 13, 
    "eng" : "You will be aware from the press and television that there have been a 
             number of bomb explosions and killings in Sri Lanka." 
} 
```

**我的代码**：

```
# -*- coding: utf8 -*-
import codecs, glob, os
from pymongo import MongoClient
from itertools import izip
from bson.code import Code

import sys
reload(sys)
sys.setdefaultencoding("utf-8")

# Gets first instance of matching key given a value and a dictionary.    
def getKey(dic, value):
  return [k for k,v in dic.items() if v == value]

def langiso (lang, isochar=3):
  languages = {"en":"eng",
               "da":"dan","de":"deu",
               "es":"spa",
               "fi":"fin","fr":"fre",
               "it":"ita",
               "nl":"nld",
               "zh":"mcn"}
  if len(lang) == 2 or isochar==3:
    return languages[lang]
  if len(lang) == 3 or isochar==2:
    return getKey(lang)

def txtPairs (bitextDir):
  txtpairs = {}
  for infile in glob.glob(os.path.join(bitextDir, '*')):
    #print infile
    k = infile[-8:-3]; lang = infile[-2:]
    try:
      txtpairs[k] = (txtpairs[k],infile) if lang == "en" else (infile,txtpairs[k]) 
    except:
      txtpairs[k] = infile
  for i in txtpairs:
    if len(txtpairs[i]) != 2:
      del txtpairs[i]
  return txtpairs

def indexEuroparl(sfile, tfile, database):   
  trglang = langiso(tfile[-2:]) #; srclang = langiso(sfile[-2:]) 

  maxdoc = database.find().sort("uid",-1).limit(1)
  uid = 1 if maxdoc.count() == 0 else maxdoc[0]

  counter = 0
  for src, trg in izip(codecs.open(sfile,"r","utf8"), \
                       codecs.open(tfile,"r","utf8")):
    quid = database.find_one({"eng":src})
    # If sentence already exist in db
    if quid != None:
      if database.find({trglang: {"$exists": True}}):
        print "Sentence uniqID",quid["uid"],"already exist."
        continue
      else:
        print "Reindexing uniqID",quid["uid"],"..."
        database.update({"uid":quid["uid"]}, {"$push":{trglang:trg}})
    else:
      print "Indexing uniqID",uid,"..."
      doc = {"uid":uid,"eng":src,trglang:trg}
      database.insert(doc)
      uid+=1
    if counter == 1000:
      for i in database.find():
        print i
      counter = 0
    counter+=1

connection = MongoClient()
db = connection["europarl"]
v7 = db["v7"]

srcfile = "eng-deu.en"; trgfile = "eng-deu.de"
indexEuroparl(srcfile,trgfile,v7)

# After indexing the english-german pair, i'll perform the same indexing on other language pairs
srcfile = "eng-spa.en"; trgfile = "eng-spa.es"
indexEuroparl(srcfile,trgfile,v7) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:42:44.737

经过几轮代码分析后，我找到了 RAM 泄漏的位置。

首先，如果我想`"eng"`经常查询该字段，我应该通过这样做为该字段创建一个索引：

```
v7.ensure_index([("eng",1),("unique",True)]) 
```

`"eng"`这解决了跨未索引字段的串行搜索所花费的时间。

其次，RAM 出血问题是由于这个代价高昂的函数调用造成的：

```
doc = {"uid":uid,"eng":src,trglang:trg}
if counter == 1000:
  for i in database.find():
    print i
  counter = 0
counter+=1 
```

MongoDb 所做的是将结果存储到 RAM 中`@Sammaye`。每次我调用 database.find() 时，它都会在 RAM 中保存我添加到集合中的一整套文档。这就是我烧掉96GB RAM的方式。上面的代码片段需要更改为：

```
doc = {"uid":uid,"eng":src,trglang:trg}
if counter == 1000:
  print doc
counter+=1 
```

通过消除 database.find() 并为`"eng"`字段创建索引，我只使用了 25GB，并且在不到 1 小时的时间内完成了 200 万个句子的索引。

# xml - 覆盖和更改基本类型中的 Xml 元素

> ID：14391989
> 
> 赞同：6
> 
> 时间：2013-01-18T03:35:15.280
> 
> 标签：xml, xsd, schema, overriding

我有一个定义汽车基本字段的 xml 模式：

```
<xs:simpleType name="FuelType">
    <xs:restriction base="xs:string">
        <xs:enumeration value="Regular Unleaded"/>
        <xs:enumeration value="High Octane"/>
        <xs:enumeration value="Leaded"/>
    </xs:restriction>
</xs:simpleType>
<xs:complexType name="CarType">
    <xs:sequence>
        <xs:element name="Make" type="xs:string"/>
        <xs:element name="Model" type="xs:string"/>
        <xs:element name="Cylinders" type="xs:int"/>
        <xs:element name="Fuel" type="FuelType"/>
    </xs:sequence>
</xs:complexType> 
```

现在假设我想定义一个继承自*CarType*但有自己的*Fuel定义的**本田*汽车类型：

 **```
<xs:simpleType name="HondaFuelType">
    <xs:restriction base="xs:string">
        <xs:enumeration value="85"/>
        <xs:enumeration value="87"/>
        <xs:enumeration value="89"/>
        <xs:enumeration value="91"/>
        <xs:enumeration value="93"/>
        <xs:enumeration value="95"/>
    </xs:restriction>
</xs:simpleType>
<xs:complexType name="HondaCarType">
    <xs:complexContent>
        <xs:extension base="car:CarType">
            <xs:sequence>
                <xs:element name="Fuel" type="HondaFuelType"/>
            </xs:sequence>
        </xs:extension>
    </xs:complexContent>
</xs:complexType> 
```

扩展*CarType*得到了我想要的一切，但是架构现在允许两个名为*Fuel*的元素（在不同的命名空间中）。这是一个示例 Xml 实例：

```
<HondaCar xmlns="HondaNS" xmlns:car="CarNS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="HondaNS D:\Development\Temp\honda.xsd">
    <car:Make/>
    <car:Model/>
    <car:Cylinders>4</car:Cylinders>
    <car:Fuel>High Octane</car:Fuel>
    <Fuel>87</Fuel>
</HondaCar> 
```

尽管这是完全有效的 Xml，但它没有逻辑意义（至少对我而言）。我的意图是扩展基本类型，然后*覆盖**Fuel* 以仅允许*HondaFuelType*中定义的值。

有没有办法可以*覆盖*或*屏蔽*扩展类型中的基本*燃料*元素？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T03:54:14.850

您可以做与您描述的非常相似的事情，但在 XSD 中不可能完全按照您的描述做。复杂类型 CarType 的“基本”声明对数据消费者做出了许多承诺，所有从它派生的类型都必须遵守这些承诺，无论是通过限制还是扩展。其中包括：

*   CarType 的实例将具有名为 Make、Model、Cylinders 和 Fuel 的子代，并带有指定的类型。
*   Make 和 Model 元素的值将是字符串。
*   Cylinders 元素的值将是 xs:int。
*   Fuel 元素的值将从字符串集合 {"Regular Unleaded", "Leaded", "High Octane"} 中提取。

这是您遇到麻烦的这些承诺中的最后一个。

当您扩展一个类型时，您会在其内容模型的末尾添加新的子项；对于 XSD 1.0，对于任何对扩展有效的元素，总是可以从末尾删除零个或多个子元素并生成一个对基本类型有效的元素。这就是为什么您的扩展最终会使用两个 Fuel 元素。

如果您只想要一个 Fuel 元素，那么您要做的是限制而不是扩展 CarType。但是您想到的限制并不是对基本类型的 Fuel 元素的法律限制。所以这里的限制对你也不起作用。

当然，一种可能性是对 CarType 进行泛化，使其 Fuel 元素接受 xs:string，然后对其进行两次限制，一次生成类似于现有 CarType 的内容，一次生成您心目中的 Honda 变体。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T21:00:14.087

我有一个类似的问题，这就是我修复的方法：

在java中定义了一个抽象基类：CarType。

为所有属性创建通常的 getter/setter，除了您希望为可扩展性而通用的属性：

```
public <T extends CarType> T getCarType() {
    return (T) ref;
} 
```

使用 xsd:annotation 创建具有 java 类型的 xsd 元素，以便 xsj 编译器使用正确的评估。

```
<xsd:complexType name="carType">
    <xsd:annotation>
        <xsd:appinfo>
            <jaxb:class ref="com.yourclass.model.CarType"/>
        </xsd:appinfo>
    </xsd:annotation>
</xsd:complexType> 
```

现在将它用作所有其他 xsd 元素的扩展基础，就像您之前所做的那样。这将确保您可以设置/获取 CarType 的任何超类型。

我希望这有帮助。**

# ruby-on-rails - API 参数 - {person: {name: 'John'}} vs {name: 'John'}

> ID：14391990
> 
> 赞同：2
> 
> 时间：2013-01-18T03:35:15.057
> 
> 标签：ruby-on-rails, api, rest

创建 RESTful API 时，最好让客户端发送对象名称或仅发送属性。例如**POST /people/**的正文：

**选项 1：** {人：姓名：'约翰'}

**选项 2：** {name: 'John'}

我通常在大多数 API 中看到**选项 2**，但我遇到了一个棘手的问题。我正在使用 Rails，所以如果我想要一个处理 html 和 json 请求的操作，我不需要使用**选项 1**（因为 Rails 表单发送以对象类型开头的参数）？

一种选择与另一种选择有什么优缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T04:12:21.690

大多数情况下，发送`{person: {name: 'John'}}`是不必要的，因为当您在 POST 或 GET 时，您通常会根据 URL 知道期望或发送的响应类型（在这种情况下为“人”）。

但是，选项 1 有一些用例。使用选项 2，您将依靠您正在获取/发布的 URL 为您提供输入信息 - 它没有在 JSON 中明确声明。这可能很好，就像你 GET from 一样`/service/person/{id}`，'person' 标签`{person: {name: 'John'}}`是多余的。但是，如果您有一个更像 RPC 的服务，例如您 POST 来验证您的有效负载的服务：`/service/validate`或类似的东西，您可能需要这些额外的信息，以便服务可以确定类型。

# asp.net - gridview 中的一列无法修复

> ID：14391991
> 
> 赞同：0
> 
> 时间：2013-01-18T03:35:21.047
> 
> 标签：asp.net, gridview

我的 GridView 列：

```
<asp:TemplateField HeaderText="Объекты" SortExpression="objects">
   <ItemTemplate>
   <asp:HyperLink ID="HyperLink1" runat="server" Text='<%# Eval("objects") %>' CssClass="ajaxlink"
      NavigateUrl='<%#"objects/" + Eval("i_id") %>'></asp:HyperLink>                    
   </ItemTemplate>
   <ItemStyle HorizontalAlign="Left" Width="15%" Wrap="true" />
</asp:TemplateField> 
```

它忽略了我的固定宽度！我尝试将 ItemStyle-Width 放入标签中，但对我没有帮助。如何固定此列的宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T04:06:50.943

一些用户[推荐](https://stackoverflow.com/questions/309815/gridview-column-width-in-asp-net-2-0)：

```
<HeaderStyle Width="15%" /> 
```

# osgi - 使用 Pax Exam 测试 osgi

> ID：14391993
> 
> 赞同：4
> 
> 时间：2013-01-18T03:36:00.643
> 
> 标签：osgi, pax-exam

现在我正在使用Pax Exam 来测试OSGI，但是当我创建一个osgi helloworld 项目时，我应该如何使用PaxExam 创建一个junit 测试项目来测试helloworld osgi？谢谢！

# c++ - C++ 中的多态性和类型转换

> ID：14391995
> 
> 赞同：0
> 
> 时间：2013-01-18T03:36:19.207
> 
> 标签：c++, casting, polymorphism

我在 C++ 中遇到问题。我希望采用派生类，将其与其他一些基类一起作为其基类。然后对所有只要求它们是基类的类执行一些操作。在此之后，我希望再次返回类的派生部分。

我试图尽可能简化问题并生成一个测试程序，如下所示

```
#include <vector> //Needed for the holding class and main
#include <iostream> //For output to terminal

class Base
{
    int a; //Variable for all classes derived from base

public: 
    Base() { a = 13; }; //Set a to something

    int get_a() { return a; }; //Access a
    virtual void bugger_all() {}; //To make the class polymorphic (my first alarm that I might be doing something wrong with polymorphism
};

class Derived:public Base
{
    int b;//not accessable by the base class
public: 
    Derived():Base() { b = 7; };//Set b and a to something
    int get_b() { return b; };

    void bugger_all() {}; //Implements to virtual function from the base class (just to make everything polymorphic)
};

//Holds several bases
class Holder
{
    std::vector<Base> bases;//Holds a vector of base classes, not nessesarily derived classes but can be

public:
    void add(Base to_add) { bases.push_back(to_add); };//Add something to the vector
    Base get(int i) { return bases[i]; };//Get a certain vector
    void print_all() { for(unsigned int i=0; i<bases.size(); i++) std::cout << bases[i].get_a() << "\n"; }; //Prints a for all bases, note that this is specific only to bases and can also be used for derived classes
    std::vector<Base> get_all() { return bases; };//Returns the main vector
};

int main(int argc, char *argv[])
{
    Derived higher = Derived(); //The derived class (extends the base class)
    Base lower = Base(); //Simply a base class, for comparisons
    Holder holding_class = Holder();//Will hold both the above objects

    //Add the objects to the holder
    holding_class.add(lower);
    holding_class.add(higher);

    //Prints everything in the holder
    holding_class.print_all();

    std::vector<Base> all_bases = holding_class.get_all();  //Get all the bases back again
    std::cout << all_bases[1].get_a() << "\n"; //Test to see if we have retained a from the derived class

    Derived higher_again = *(static_cast<Derived*>(&all_bases[1])); //Cast is done here, take a base class and change it to a derived class

    std::cout << higher_again.get_b() << "\n"; //Output something specific to the derived class

    return 0;//Exit
} 
```

它使用 g++ 编译，没有错误。程序运行，输出为

```
13
13
13
0 
```

如果程序按预期工作，我希望输出是

```
13
13
13
7 
```

这向我表明'higher_again'被错误地转换并且它的'b'值以某种方式丢失并且编译器只是将该值设置为0。

环顾四周，似乎不建议使用 dynamic_cast 和 static_cast （可能是因为这样的问题）。但是，我看不到解决该问题的方法。我也意识到我可能在多态性方面做错了（必须创建一个无用的虚函数）。任何意见将是有益的。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T03:42:59.287

> 这向我表明'higher_again'被错误地转换并且它的'b'值以某种方式丢失并且编译器只是将该值设置为0。

因为您将`Base`类型存储在向量中，`slicing`因此`Derived objects`会被分割成“Base”对象。

尝试存储指向基址的指针，派生对象不会被切片，多态性通过指针起作用：

```
 std::vector<std::shared_ptr<Base>> bases; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T03:55:04.040

您需要区**分值类型**和**引用类型**。

**值类型**示例：

```
Base base;
Derived derived; 
```

**引用类型**的示例

 **```
Derived* p_derived = &derived;
Base& ref_base = *p_derived; 
```

当您声明一个**值类型**时，它**正是**您声明的内容，因为内存是为您指定的类型的对象分配的。

当您声明**引用类型**时，您不会为对象分配更多内存。相反，您有一些预先存在的对象的句柄。当您使用**引用类型**时，您可以使用句柄所引用的**多态性**。

我喜欢将**值类型**视为用于声明具体实例的紧密变量：这正是您所说的声明它。

相反，当我想从具体事物中抽象出来时，我喜欢使用**引用类型**作为*松散的句柄。***引用类型**背后的实际值可以是继承层次结构中的**引用类型**中的任何内容。因此，如果您有 Base*，则指向的实际对象可能是 Base 或任何从 Base 派生的对象，包括 Derived。

所以回到你的问题。根据定义，所有标准容器的工作都是**基于值的**。如果您想要多态性，在这种情况下，诀窍是将指向 Base 的指针存储为您的值。例如, `std::vector<Base*>`, `std::unique_ptr<Base>`, 等等...而不是`std::vector<Base>`它本身。

如果您存储`std::vector<Base>`，则向量中只能有 Base 实例，而不能有其他实例。因此，如果您确实尝试存储 Derived 的实例，这称为*切片*，因为您最终会通过存储作为 Base 的 Derived 实例的副本来切断 Derived 中的所有内存！为什么？在`std::vector<Base>`中，您只有足够的空间来存储`Base`对象，因为 std 容器是**基于值的**。

OTOH，如果您存储`std::vector<Base*>`，则存储的值只是一个指针。Base* 的大小与 Derived* 相同。存储这些值时没有问题/没有切片。作为一个额外的好处，因为您使用的是*更宽松的句柄*，这允许编译器使用 vtables 来查找您真正想要的正确的多态调用。

**所以要点是，如果您想要多态性，请使用引用类型。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T03:41:52.173

要按照您的意图使用多态性，您需要将 Base*s 存储到动态分配的内存中。当你有...

```
std::vector<Base> bases;//Holds a vector of base classes, not nessesarily derived classes but can be 
```

...您正在创建一个向量 - 它实际上是一个打包的 Base 数组 - 其中没有空间用于`b`派生类添加的数据成员。

找书！;-P**

# iphone - 如何使用 iOS GPUImage 生成直方图？

> ID：14391997
> 
> 赞同：1
> 
> 时间：2013-01-18T03:36:31.033
> 
> 标签：iphone, ios, objective-c, gpuimage

在[https://github.com/luisespinoza/LEColorPicker](https://github.com/luisespinoza/LEColorPicker)项目上工作，我正在尝试使用项目 GPUImage（https://github.com/BradLarson/GPUImage）从任意输入 UIImage 生成直方图 UIImage。

我正在使用的当前代码如下：

```
- (NSDictionary*)dictionaryWithColorsPickedFromImage:(UIImage *)image
{
    GPUImageFilter *filter = [[GPUImageHistogramFilter alloc] initWithHistogramType:kGPUImageHistogramRGB];

    UIImage *filteredImage = [filter imageByFilteringImage:image];

    [UIImagePNGRepresentation(filteredImage) writeToFile:@"/Users/Luis/histogram.png" atomically:YES];

    return nil;
} 
```

问题是 histogram.png 导致每个输入图像都只有一条黑线。

那么，如何使用 iOS GPUImage 生成直方图 UIImage 的正确代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T04:19:45.410

您可以查看 FilterShowcase 示例以了解这在实践中应该如何工作。

GPUImageHistogramFilter 接收图像并输出对直方图进行编码的 256x3 图像（它的高度为 3 像素，因为帧缓冲区构造中不允许 1 像素的高度）。R、G 和 B 值存储在该图像中心的 1 像素高的中央条纹中各自的颜色通道中。

要对此进行可视化，您需要使用 GPUImageHistogramGenerator，并将 GPUImageHistogramFilter 的输出输入其中。GPUImageHistogramGenerator 将直方图输入创建为图像的视觉表示。您确实需要使用`-forceProcessingAtSize:`设置 GPUImageHistogramGenerator 输出图像的大小，因为默认情况下它没有设置大小。

另一个注意事项是，您需要在输入图像和 GPUImageHistogramFilter 之间设置某种虚拟过滤器。GPUImageHistogramFilter 目前依赖`glReadPixels()`且仅适用于渲染内容，不适用于直接上传的图像或视频帧。

FilterShowcase 中为此使用的代码如下：

```
 filter = [[GPUImageHistogramFilter alloc] initWithHistogramType:kGPUImageHistogramRGB];

        GPUImageGammaFilter *gammaFilter = [[GPUImageGammaFilter alloc] init];
        [videoCamera addTarget:gammaFilter];
        [gammaFilter addTarget:filter];

        GPUImageHistogramGenerator *histogramGraph = [[GPUImageHistogramGenerator alloc] init];

        [histogramGraph forceProcessingAtSize:CGSizeMake(256.0, 330.0)];
        [filter addTarget:histogramGraph];

        GPUImageAlphaBlendFilter *blendFilter = [[GPUImageAlphaBlendFilter alloc] init];
        blendFilter.mix = 0.75;            
        [blendFilter forceProcessingAtSize:CGSizeMake(256.0, 330.0)];

        [videoCamera addTarget:blendFilter];
        [histogramGraph addTarget:blendFilter];

        [blendFilter addTarget:filterView]; 
```

这会将生成的直方图可视化覆盖在传入的摄像机视频之上。

# android - 为什么更改单个 ID 时我的应用程序布局会发生变化？

> ID：14391998
> 
> 赞同：-3
> 
> 时间：2013-01-18T03:36:36.147
> 
> 标签：android, eclipse

我正在创建一系列`editText`盒子`relative layout`。当我想更改其中一个编辑文本框时，它会更改我的整个布局，并且所有内容都相互重叠。我进行了编程，`visual studio`设计视图中的每个项目都有精确的 x、y 坐标，似乎所有 eclipse 都有填充。布局不应该与ID名称无关并且可以随时更改吗？我还想在不同的活动上使用相同的布局。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T04:08:34.283

当您使用相对布局时，组件根据彼此的各自位置排列，例如 toRighOf "someid" 或 leftOf "someid"，当您更改任何组件的 id 时，它们的相对位置会发生变化，并且您的布局会受到干扰，所以如果您更改 id对于任何组件，您必须手动设置每个组件的相对位置。