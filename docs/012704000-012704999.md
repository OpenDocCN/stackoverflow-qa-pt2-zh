# StackOverflow 问答 12704000-12704999

# asp-classic - 将 ASP .mdb 访问更改为 DSN 无连接？

> ID：12704007
> 
> 赞同：0
> 
> 时间：2012-10-03T07:42:25.777
> 
> 标签：asp-classic, connection-string

我有一个旧的 ASP 站点（很久以前由一位前雇员编写），它使用 DSN 连接到 2003 ODBC 数据库。服务器已由我们的主机更新到 2008，我们不能再使用 ODBC，所以我必须建立连接 DSN-Less。

不幸的是，我对 ASP 和通过 ASP 的数据库连接知之甚少。我想知道是否有人可以帮助我更改代码以在没有 ODBC 的情况下连接到 Access 数据库？

我认为它使用以下代码连接：

```
<%
' Get current name of region and intro text
Dim objRec, sql, introtext
sql="SELECT * FROM hometext WHERE home_id = 1"
set objRec=Server.CreateObject("ADODB.Recordset")
objRec.Open sql, "dsn=databasename"
introtext = Replace(objRec("home_introtext"), vbCrLf, "<br />")

' Get the 5 newest news items
Dim objRec2, sql2, newstext
sql2="SELECT TOP 5 news_date, news_text FROM news ORDER BY news_date DESC"
set objRec2=Server.CreateObject("ADODB.Recordset")
objRec2.Open sql2, "dsn=databasename"

' Get all images to appear to page
Dim objRec3, sql3
sql3="SELECT * FROM homeimages ORDER BY homeimage_date DESC"
set objRec3=Server.CreateObject("ADODB.Recordset")
objRec3.Open sql3, "dsn=databasename"

' Get the next 5 events from the current date
Dim objRec4, sql4
sql4="SELECT TOP 5 event_date, event_name FROM events WHERE event_date >= " &         niceDateAccess(Date()) & " ORDER BY event_date"
set objRec4=Server.CreateObject("ADODB.Recordset")
objRec4.Open sql4, "dsn=databasename"
%> 
```

我不确定这一切是如何联系起来的，我不是一个脚本编写者。

任何（愚蠢的）帮助将不胜感激！

谢谢

编辑：数据库位于服务器根文件夹中的“私人”文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:19:16.513

这是一个示例代码。更改您的数据库名称和表字段名称

```
set conob = Server.CreateObject("ADODB.Connection")
conob.Provider="Microsoft.Jet.OLEDB.4.0"
conob.Open "Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" & server.MapPath("YourDatabaseName.mdb")
Set rsuni = Server.CreateObject("ADODB.Recordset")
sqlStr="select * from Student_Entry"

rsuni.open sqlStr,conob 
```

您必须授予您登录的用户对数据库的完全访问权限。

# android - 在我的活动中仅设置 1 个片段的方向，而其余片段为纵向

> ID：12704009
> 
> 赞同：57
> 
> 时间：2012-10-03T07:42:28.590
> 
> 标签：android, android-fragments, orientation

我的应用需要处于纵向模式，因此我在清单中通过以下方式设置它：

```
android:screenOrientation="portrait" 
```

但我最近刚刚添加了另一个片段（FragA），它在横向上的外观和功能都提高了 10 倍。有什么我可以在我的 FragA 中放入的东西，只是在横向中制作该片段，同时将应用程序的其余部分保留为纵向，或者通过这样做，我是否必须向我的其他片段添加一些东西以保持它们作为纵向保留？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-10-15T15:21:27.217

在您想要特定（在本例中为纵向）方向的片段中使用以下代码行。

```
getActivity().setRequestedOrientation(
            ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

如果您想在片段中确定方向，即基于用户握持设备的方式，请使用以下代码行。

```
getActivity().setRequestedOrientation(
                ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED); 
```

希望，这将为您提供预期的解决方案。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-09-05T20:04:26.107

在每个片段中，设置请求的方向。

参考文档：http: [//developer.android.com/reference/android/content/pm/ActivityInfo.html](http://developer.android.com/reference/android/content/pm/ActivityInfo.html)

```
@Override
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);

   // Fragment locked in portrait screen orientation
   getActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);    

   // Fragment locked in landscape screen orientation
   getActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

   // Fragment screen orientation normal both portait and landscape       
   getActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED);
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-03T07:45:59.100

方向属性是每个活动的，因此您可以仅为包含片段的活动声明方向，使其处于横向状态，其余活动将保持原样。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-02-11T16:40:36.320

所以我现在正在处理这个问题。我们只有**纵向**模式应用程序（目前）。但是有一个片段需要在**Landscape**中。我们正在使用单一活动方法，因此接受的答案对我没有帮助。

我能想到的最快的解决方案就是这个。

```
private var swappingOrientation = false

override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)

    if(savedInstanceState == null) {
        swappingOrientation = true
        activity?.apply {
            requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE
        }
    }
}

override fun onDestroy() {
    super.onDestroy()

    if(!swappingOrientation) {
        activity?.apply {
            requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
        }
    }
    swappingOrientation = false
} 
```

如果您正在交换方向或不在**swappingOrientation**变量中，您将持有信息。在创建片段的开始时，它会改变方向，只有当没有保存状态时。只有在当前未更改方向时，才会再次更改方向。

这是一个超级快速的解决方案，当您返回上一个片段时，它会产生屏幕闪烁。我也没有完全测试它，所以它可能有其他问题，所以请记住这一点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-17T16:28:54.000

第一个片段：

```
@Override
    public void onResume() {
        super.onResume();
        getActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    } 
```

第二个片段：

```
 @Override
        public void onResume() {
            super.onResume();
 getActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED);
   } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-01T17:12:01.063

这是一个老问题，但回答这个问题只是因为有人想要 OP 需要的解决方案。实现这一点的简单方法如下。

```
public class LandscapeFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {

       getActivity().setRequestedOrientation(
              ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    }

   @Override
   public View onDestroyView() {
       super.onDestroyView();

       getActivity().setRequestedOrientation(
             ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

} 
```

然后从您想要以横向模式启动它的任何片段中`extend`。`LandscapeFragment`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-01T12:06:49.007

好吧，在我差点把我的头弄晕之后，这对我有用的喷气背包导航组件碎片

所以这是基本片段类

```
abstract class BaseFragment : Fragment(){   

var rotated = false

fun rotate() {
        val currentOrientation = activity?.resources?.configuration?.orientation //this is diffrent from  Configuration.ORIENTATION_LANDSCAPE
        Log.e("currentOrientation--->",currentOrientation.toString())

        if (currentOrientation != null) {
            if (currentOrientation !=  Configuration.ORIENTATION_LANDSCAPE) {
                activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE
            }else{
                rotated=true
            }
        }else{
            //impossible
            activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE
        }
    }

    override fun onDestroyView() {
        super.onDestroyView()
        if (rotated)
            activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED
    }

} 
```

我把它放在我希望它被美化的任何片段中

```
override fun onStart() {
    super.onStart()
    rotate()
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-09-17T05:42:00.433

在您的片段 FragA 中：

```
@Override
public void onResume() {
    super.onResume();
    getActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

}

@Override
public void onPause() {
    getActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    super.onPause();
} 
```

**onPause**方法代码确保您的活动回到纵向

# php - 无法使用 Kohana 3.2 发送文件

> ID：12704012
> 
> 赞同：1
> 
> 时间：2012-10-03T07:42:47.160
> 
> 标签：php, kohana, mime-types, kohana-3.2

使用时出于某种原因

```
$this->response->send_file($file_to_send, $file->hashed_name.'.'.$file->extension); 
```

我收到这样的错误：

```
ErrorException [ Warning ]: mime_content_type() [<a href='function.mime-content-type'>function.mime-content-type</a>]: can only process string or stream arguments 
```

SYSPATH/classes/kohana/file.php [52]

```
47      }
48 
49      if (ini_get('mime_magic.magicfile') AND function_exists('mime_content_type'))
50      {
51          // The mime_content_type function is only useful with a magic file
52          return mime_content_type($filename);
53      } 
```

Trace 显示这`mime_content_type(arguments)`似乎是`bool FALSE`出于某种原因。但是我传递给`send_file`正常的字符串完整路径，如`/var/www/dev3/media_files/files/113b778d9751e7d1667b300557b6e8030ba1227e68ef9c4dd093a4cd79691f9d.png`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:46:00.137

我检查了 Kohana 系统文件，结果发现我可以手动传递 mime_type 作为选项，所以这非常有效：

```
$this->response->send_file($file_to_send, $file->name.'.'.$file->extension, array('mime_type' => File::mime_by_ext($file->extension))); 
```

但是，标准`$this->response->send_file($file_to_send)`对我不起作用。

# java - 点击 p:selectBooleanCheckbox 应该启用/禁用输入文本

> ID：12704015
> 
> 赞同：2
> 
> 时间：2012-10-03T07:43:00.200
> 
> 标签：java, jsf, jsf-2, primefaces

选中复选框时，应启用相应的输入文本。但是没有设置 permit 属性，也没有调用 updateRoles 监听器。我没有例外，没有迹象表明出了什么问题。我正在使用 PrimeFaces 3.4、Mojarra 2.0.8。

```
<p:dataTable id="databases" var="database" value="#{mssqlAccDBAccess.databases}"
    sortBy="#{database.name}" resizableColumns="false">
    <p:column headerText="#{label.mssqlDatabasePermission}">
        <p:selectBooleanCheckbox value="#{database.permit}"
            disabled="#{not enabled}">              
            <p:ajax listener="#{mssqlAccDBAccess.updateRoles}" update="user" />
            <f:attribute name="selectedRecord" value="#{database}" />
        </p:selectBooleanCheckbox>
    </p:column> 
    <p:column headerText="#{label.mssqlDatabaseName}"
        sortBy="#{database.name}">
        <h:outputText value="#{database.name}" />
    </p:column>
    <p:column headerText="#{label.mssqlDatabaseUser}">
        <p:inputText id="user" disabled="#{not database.permit or not enabled}"
            value="#{database.user}">       
        </p:inputText>
    </p:column>
</p:dataTable> 
```

### 编辑 1

**updateRoles**方法如下所示：

```
public void updateRoles(AjaxBehaviorEvent event) {  
    SelectBooleanCheckbox permit = (SelectBooleanCheckbox) event.getComponent();
    boolean checked = (Boolean) permit.getValue();
    if (checked) {
        Database database = (Database) permit.getAttributes().get("selectedRecord");
        showRoles(database.getRoles());         
    } else {
        hideRoles();
    }       
} 
```

我已经添加了`<f:attribute name="selectedRecord" value="#{database}" />`. 它在那里不存在，因为我认为它不相关。

# javascript - ReferenceError: field_2a 未定义

> ID：12704022
> 
> 赞同：0
> 
> 时间：2012-10-03T07:43:45.980
> 
> 标签：javascript, jquery

我有三个输入字段，我想在输入数据时获取数据。**虽然它工作正常，但它仍然在萤火虫中显示此错误。**

希望会有更好的方法来做到这一点。

**错误显示在 firbug 中：**

```
ReferenceError: field_2a is not defined
[Break On This Error]   

...ataString = 'field-1a='+ field_1a + '&field-2a=' + field_2a + '&field-4a=' + fie... 
```

我的脚本如下：

```
<script>

        function getFielddata(field_id, field_value){
            if(field_value != ""){

                //alert(field_id+" "+field_value);
                if(field_id == "field-1a"){

                    if(field_value){
                        field_1a = field_value;
                    }
                    else
                    {
                        field_1a = "";  
                    }
                }

                else if(field_id == "field-2a"){
                    if(field_value){
                        field_2a = field_value;
                    }
                    else
                    {
                        field_2a = "";  
                    }

                }

                else if(field_id == "field-4a"){
                    if(field_value){
                        field_4a = field_value;
                    }
                    else
                    {
                        field_4a = "";  
                    }
                }

                var dataString = 'field-1a='+ field_1a + '&field-2a=' + field_2a + '&field-4a=' + field_4a;
                //alert(dataString); return false;
                $.ajax({
                   type: 'POST',
                   url: 'get_query.php',
                   data: dataString,
                   success: function(data) {
                    //$("#SuburbDiv").html(data);
                    alert("data inserted successfully");
                   }
                  });

            }
        }

    </script> 
```

我正在像这样保存 onChange 事件：

```
<input type="text" id="field-2a" onChange="getFielddata(this.id, this.value)"/> 
```

和帮助？？？

**注意：没有提交按钮**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:46:52.163

除非您在其他范围内定义这些变量，否则它们尚未被声明。

使用 var 关键字在函数顶部声明它们。

```
var field_1a, field_2a, field_4a; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T07:52:58.400

发生这种情况是因为您正在初始化`field-#a`永远不会执行的 if 语句，然后您尝试访问它们。我也有一种感觉，这些变量必须是函数的本地变量。尝试这个：

```
function getFielddata(field_id, field_value){
        if(field_value != ""){
            var field_1a = "",
                field_2a = "",
                field_4a = "";

            //alert(field_id+" "+field_value);
            if((field_id == "field-1a")){
                field_1a = field_value;
            }
            else if((field_id == "field-2a")){
                field_2a = field_value;
            }
            else if((field_id == "field-4a")){
                field_4a = field_value;
            }

            var dataString = 'field-1a='+ field_1a + '&field-2a=' + field_2a + '&field-4a=' + field_4a;
            //alert(dataString); return false;
            $.ajax({
               type: 'POST',
               url: 'get_query.php',
               data: dataString,
               success: function(data) {
                //$("#SuburbDiv").html(data);
                alert("data inserted successfully");
               }
              });

        }
    } 
```

# node.js - 包装器中的 Redis、MongoDB 和节点

> ID：12704024
> 
> 赞同：0
> 
> 时间：2012-10-03T07:44:04.517
> 
> 标签：node.js, mongodb, redis, wrapper

我目前正在尝试使用 node.js 为（游戏）服务器开发一个管理面板

挖掘分散在互联网上的大量文章、stackoverflow 问题和资源，我得出的结论是，这种设置对我来说是有意义的：

*   服务器上的 Node.js，在此之上表达，带有 angular.js 前端
*   MongoDB 作为数据库来存储“核心”和持久数据（用户帐户到统计信息到消息等）
*   Redis 用于存储需要立即可供多个用户使用并经常更新的数据。没有用户在线时不需要的数据（例如，实时服务器数据）

现在的问题是：这个管理面板也将分发给“普通”用户，因此它将被对用于开发它的技术知之甚少的人使用。例如：托管在家用 PC 上的小型服务器。作为直接结果，它也将用于大多数操作系统。

从技术上讲，这没有问题。你可以安装3个核心软件就可以了。但是，对于我的用户群中的大多数人来说，设置一切可能很困难并且对用户不友好。

那么问题来了：

有没有办法（或者已经开发出来）在 node.js 包装器上运行 redis 和 mongo，从而消除安装和维护 3 个单独进程的需要？

场景是：用户下载我的应用程序，其中有一个 mongodb 服务器和一个 redis 服务器（由包装器根据操作系统等适当下载和安装），由 node.js 包装器运行，它还管理稳定性和崩溃恢复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-11T02:01:22.610

*   制作一个脚本，在 linux、mac 和 windows 上下载和构建二进制文件。请注意，redis[在 Windows 上不受官方支持，但有一个可用的版本](https://github.com/MSOpenTech/redis)。
*   使用节点 child_process 运行管理数据存储
*   使用[nexe](https://github.com/crcn/nexe)创建 node.js 二进制文件。它不支持动态模块或本机模块，这可能会出现问题。

# c# - 如何更改消息框按钮上的文本？

> ID：12704026
> 
> 赞同：8
> 
> 时间：2012-10-03T07:44:26.277
> 
> 标签：c#, messagebox

这是我使用的代码：

```
MessageBox.Show("Do you want to save changes..?", "Save",
    MessageBoxButtons.YesNoCancel); 
```

我想更改消息框按钮上的文本可以吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-26T16:36:41.683

据我所知，无法更改 MessageBox 弹出窗口上的默认文本。

对您来说最简单的事情是创建一个带有标签和几个按钮的简单表单。这是一个简单的示例，您可以使用它来放入您的代码中。您可以根据需要自定义表单。

```
public class CustomMessageBox:System.Windows.Forms.Form
{
    Label message = new Label();
    Button b1 = new Button();
    Button b2 = new Button();

    public CustomMessageBox()
    {

    }

    public CustomMessageBox(string title, string body, string button1, string button2)
    {
        this.ClientSize = new System.Drawing.Size(490, 150);
        this.Text = title;

        b1.Location = new System.Drawing.Point(411, 112);
        b1.Size = new System.Drawing.Size(75, 23);
        b1.Text = button1;
        b1.BackColor = Control.DefaultBackColor;

        b2.Location = new System.Drawing.Point(311, 112);
        b2.Size = new System.Drawing.Size(75, 23);
        b2.Text = button2; 
        b2.BackColor = Control.DefaultBackColor;

        message.Location = new System.Drawing.Point(10, 10);
        message.Text = body;
        message.Font = Control.DefaultFont;
        message.AutoSize = true;

        this.BackColor = Color.White;
        this.ShowIcon = false;

        this.Controls.Add(b1);
        this.Controls.Add(b2);
        this.Controls.Add(message);
    }        
} 
```

然后，您可以从任何需要的地方调用它：

```
 CustomMessageBox customMessage = new CustomMessageBox(
            "Warning",
            "Are you sure you want to exit without saving?",
            "Yeah Sure!",
            "No Way!" 
            );
        customMessage.StartPosition = FormStartPosition.CenterParent;
        customMessage.ShowDialog(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T09:34:15.033

我认为 MessageBox 是一个 Win32 API 野兽，这意味着它超出了 .NET 的范围。因此，它忽略了定制/本地化。所以你需要像 James Miller 建议的那样滚动你自己的消息框。

为什么 MS 决定不在 Forms 中放置支持 .NET 的消息框，这超出了我的理解……

# api - 为什么域名中没有 WWW 时 FuelPHP REST API 无法工作？

> ID：12704027
> 
> 赞同：1
> 
> 时间：2012-10-03T07:44:29.663
> 
> 标签：api, rest, fuelphp

我正在使用 FuelPHP 开发网站并使用了 REST-API。

我的网站使用类似的域名，`http://www.mydomainname.in`但如果我使用“http://mydomainname.in”浏览，即不输入“www”，则 api 将返回空白，我使用 Jquery ajax 调用调用此 api，并且**使用域`http://www.mydomainname.in`它是工作正常**。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:52:18.530

您可以使用`Access-Control-Allow-Origin`标头为 REST 控制器提供服务。

要使**www**页面可以访问**非 www**控制器，请使用如下标头：

 **```
Access-Control-Allow-Origin: http://www.mydomainname.in 
```

有关`Access-Control-Allow-Origin`此处的更多信息：[https ://developer.mozilla.org/en-US/docs/HTTP_access_control](https://developer.mozilla.org/en-US/docs/HTTP_access_control)**

# maven - Maven 项目未构建 pom.xml 错误

> ID：12704028
> 
> 赞同：0
> 
> 时间：2012-10-03T07:44:31.173
> 
> 标签：maven, build, dependencies

我在 pom.xml 中删除了一个依赖项，但仍然出现此错误：**dependency = [com.viewpagerindicator: library: apklib: 2.3.1: compile] not found in workspace。** 我查看了构建路径，那里没有依赖 apklib。我应该怎么做才能摆脱这个错误？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:08:07.043

我现在执行 mvn clean 及其构建！感谢帮助 ！

# ipad - 保护 HTML5 AppCache 和 SQLite 不被删除

> ID：12704029
> 
> 赞同：0
> 
> 时间：2012-10-03T07:44:31.100
> 
> 标签：ipad, sqlite, web-applications, cache-manifest, html5-appcache

我正在使用 HTML5 AppCache 清单开发一个 Web 应用程序，用于存储所有应用程序工件（HTML 页面、样式表、脚本等），并使用 SQLite 来存储用户提交的表单数据。

令人担忧的是，这两个存储库都会通过删除浏览器数据而被删除 - 主要关注点是 SQLite，因为与 AppCache 相比，存储在那里的数据非常重要。有没有办法在桌面浏览器和 iPad 上限制我的应用程序的删除？

PS 实际上应用程序将在离线模式下访问 - 数据将在稍后在线模式下同步到服务器。我需要保护在离线模式下存储在 SQLite 中的数据不被删除 - 因为有可能意外删除它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:18:46.430

您的要求是不可能的——您无法阻止您的用户删除您的应用程序的数据、删除您的应用程序本身、卸载浏览器、重新安装操作系统或更换整个计算机。最终，他们中的一些人*会这样做*。

如果数据如此重要，您必须在“云”中存储备份副本，即在您控制的某些服务器上。

在实践中，许多 Web 应用程序具有必要性，并且经过明确设计，可以从任何随机设备访问用户数据。

* * *

Web 应用程序只是无权永久分配存储资源。如果您想避免意外删除，您应该创建一个本机应用程序。

# c# - 更改字典中包含键的值

> ID：12704030
> 
> 赞同：0
> 
> 时间：2012-10-03T07:44:55.230
> 
> 标签：c#, for-loop

可以说我有，

```
Dictionary<string, int> dict = new Dictionary<string, int>(); 
```

并且已经有一些项目：

"一", 1

“乙”，15

"C", 9

……

现在，当我添加新的时，我正在检查密钥是否已经存在：

```
for(int i = 0; i<n; i++)
    { 
        if (dict.ContainsKey(newKey[i] == true)
        { 
            //I should add newValue to existing value(sum all of them) of existing key pair
        }
        else
        {
            dict.Add(newKey[i],newValue[i]);
        }
    } 
```

我应该如何总结现有密钥的所有值，为现有密钥对的现有值添加新值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T07:48:01.133

最简单的方法是：

```
for(int i = 0; i < n; i++)
{
    int currentValue;
    // Deliberately ignore the return value
    dict.TryGetValue(newKey[i], out currentValue);
    dict[newKey[i]] = currentValue + newValue[i];
} 
```

这会为每个键执行一次“获取”，然后执行一次“放置”。它使用的默认值为 0 的事实`int`- 当`TryGetValue`返回 false 时，`currentValue`将设置为 0，这适用于新条目。

# android - 异步任务未执行

> ID：12704031
> 
> 赞同：0
> 
> 时间：2012-10-03T07:45:08.887
> 
> 标签：android, asynchronous, gps

对此很陌生，但我看不到任何问题。设置中有一个复选框来启动异步任务，因此在 onCreate 中有 if 语句。我只是在执行任务的行上收到一个 Java null 错误。

代码

```
ProgressDialog progressDialog;
double longitude, latitude;
Location location;

private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10 meters

private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

protected LocationManager locationManager;

GPSLocation task = new GPSLocation();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_confirm_screen);
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
    Boolean locationCheck = sp.getBoolean("LOCATION", false);
  if(locationCheck){

        task.execute();
    }
   else
   {
    sendEmail();
    playSound();
   }

}

public double getLatitude()
{
    if (location != null)
    {
        latitude = location.getLatitude();
    }

    return latitude;
}

public double getLongitude()
{
    if (location !=  null)
    {
        longitude = location.getLongitude();
    }
    return longitude;
}

public class GPSLocation extends AsyncTask<Void, Void, Void> implements LocationListener
{  
    boolean running =true;
            @Override
            protected void onPreExecute()
            {  
                super.onPreExecute(); 
                progressDialog = new ProgressDialog(ConfirmScreen.this);
                progressDialog.setOnCancelListener(new DialogInterface.OnCancelListener(){
                      public void onCancel(DialogInterface dialog) {
                          //getgps.cancel(true);  
                      }
                });

                locationManager.requestLocationUpdates(
                        LocationManager.GPS_PROVIDER,
                        MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("GPS Enabled", "GPS Enabled");
                if (locationManager != null) {
                    location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
                            if (location != null) {
                                    latitude = location.getLatitude();
                                    longitude = location.getLongitude();  
                                    progressDialog.setCancelable(true);
                                    progressDialog.setMessage("Getting GPS Location...");
                                    progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
                                    progressDialog.setProgress(1);
                                    progressDialog.show();
                            }
                }

            } 

            @Override 
            protected void onProgressUpdate(Void... values) {
                super.onProgressUpdate(values);
                // Things to be done while execution of long running operation is in progress. For example updating ProgessDialog
             }

            @Override 
            protected void onPostExecute(Void result)
            {  
                    progressDialog.cancel(); 
                    sendEmail("GPS: ", Double.toString(longitude).trim(), Double.toString(latitude).trim());
                    playSound();
            }

            @Override
            protected Void doInBackground(Void... params) {  
                boolean isDataSubmitted = false;

                while(!isDataSubmitted)
                {  
                    if(longitude !=0 && latitude!=0)
                    { 
                        sendEmail(); //Send Email without co-ords
                        playSound();
                        isDataSubmitted = true;  
                    }  
                } 

                return null;    
            }

            @Override
            public void onLocationChanged(Location location) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onProviderDisabled(String provider) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onProviderEnabled(String provider) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onStatusChanged(String provider, int status,
                    Bundle extras) {
                // TODO Auto-generated method stub

            } 
 } 

public void backHome(View view) 
{
    Intent intent = new Intent (this, MainScreen.class);
    startActivity(intent);
}

// Method to start playing and looping a sound.

public void playSound()
{
    MediaPlayer clickSound = MediaPlayer.create(this, R.raw.warning);
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
    Boolean soundCheck = sp.getBoolean("SOUND", false);
    if (soundCheck)
    {
        clickSound.start();
    }

}// method end

public void sendEmail()
{
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
    String nameValue = sp.getString("NAME", "failed to get name");
    String emailValue = sp.getString("EMAIL", "failed to get email");
    Intent i = new Intent(Intent.ACTION_SEND);
    i.setType("message/rfc822");
    i.putExtra(Intent.EXTRA_EMAIL, new String[]{emailValue});
    i.putExtra(Intent.EXTRA_SUBJECT, "Email sent from DON'T PANIC - A Chris O'Brien Project");
    i.putExtra(Intent.EXTRA_TEXT, "Hi there\n" + nameValue + " is in mortal danger. They didn't include co-ords as they assume you know where they are..\nKind Regards\nDon't Panic! \n\n\n");

    try
    {   startActivity(Intent.createChooser(i, "Send mail...."));
    } 
    catch (android.content.ActivityNotFoundException ex){

        Toast.makeText(ConfirmScreen.this, "There are no email clients installed or set up", Toast.LENGTH_SHORT).show();
    }
}

public void sendEmail(String a, String b, String c)
{
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
    String nameValue = sp.getString("NAME", "failed to get name");
    String emailValue = sp.getString("EMAIL", "failed to get email");
    Intent i = new Intent(Intent.ACTION_SEND);
    i.setType("message/rfc822");
    i.putExtra(Intent.EXTRA_EMAIL, new String[]{emailValue});
    i.putExtra(Intent.EXTRA_SUBJECT, "Email sent from DON'T PANIC - A Chris O'Brien Project");
    i.putExtra(Intent.EXTRA_TEXT, "Hi there\n" + nameValue + " is in mortal danger. Please see the co-ords attached and run to their rescue!" +
            " If you don't see any co-ords, they didn't check the box and assume you know where they are.\nKind Regards\nDon't Panic! \n\n\n" + 
            a + b + c);

    try
    {   startActivity(Intent.createChooser(i, "Send mail...."));
    } 
    catch (android.content.ActivityNotFoundException ex){

        Toast.makeText(ConfirmScreen.this, "There are no email clients installed or set up", Toast.LENGTH_SHORT).show();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_confirm_screen, menu);
    return true;
}

} 
```

调试信息

```
10-03 08:38:16.890: D/dalvikvm(27516): Late-enabling CheckJNI
10-03 08:38:16.990: I/dalvikvm(27516): Turning on JNI app bug workarounds for target SDK version 11...
10-03 08:38:17.030: E/Trace(27516): error opening trace file: No such file or directory (2)
10-03 08:38:17.600: D/dalvikvm(27516): GC_FOR_ALLOC freed 58K, 9% free 12206K/13315K, paused 105ms, total 111ms
10-03 08:38:17.610: I/dalvikvm-heap(27516): Grow heap (frag case) to 13.616MB for 784248-byte allocation
10-03 08:38:17.755: D/dalvikvm(27516): GC_CONCURRENT freed 1K, 8% free 12971K/14087K, paused 35ms+9ms, total 147ms
10-03 08:38:17.940: D/dalvikvm(27516): GC_FOR_ALLOC freed 0K, 8% free 12971K/14087K, paused 32ms, total 32ms
10-03 08:38:17.985: I/dalvikvm-heap(27516): Grow heap (frag case) to 16.606MB for 3136944-byte allocation
10-03 08:38:18.025: D/dalvikvm(27516): GC_CONCURRENT freed 0K, 7% free 16034K/17159K, paused 24ms+1ms, total 40ms
10-03 08:38:18.025: D/dalvikvm(27516): WAIT_FOR_CONCURRENT_GC blocked 4ms
10-03 08:39:44.110: E/SpannableStringBuilder(27516): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
10-03 08:39:44.110: E/SpannableStringBuilder(27516): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
10-03 08:39:45.145: E/SpannableStringBuilder(27516): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
10-03 08:39:45.145: E/SpannableStringBuilder(27516): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
10-03 08:39:45.910: D/dalvikvm(27516): GC_FOR_ALLOC freed 815K, 11% free 15718K/17543K, paused 9ms, total 9ms
10-03 08:39:45.910: I/dalvikvm-heap(27516): Grow heap (frag case) to 19.016MB for 2850872-byte allocation
10-03 08:39:45.925: D/dalvikvm(27516): GC_CONCURRENT freed 10K, 10% free 18492K/20359K, paused 1ms+1ms, total 12ms
10-03 08:39:45.955: D/dalvikvm(27516): GC_FOR_ALLOC freed 0K, 10% free 18492K/20359K, paused 9ms, total 9ms
10-03 08:39:45.970: I/dalvikvm-heap(27516): Grow heap (frag case) to 29.882MB for 11403440-byte allocation
10-03 08:39:45.990: D/dalvikvm(27516): GC_CONCURRENT freed 0K, 7% free 29628K/31559K, paused 11ms+2ms, total 22ms
10-03 08:39:46.025: D/AndroidRuntime(27516): Shutting down VM
10-03 08:39:46.025: W/dalvikvm(27516): threadid=1: thread exiting with uncaught exception (group=0x41d77300)
10-03 08:39:46.035: E/AndroidRuntime(27516): FATAL EXCEPTION: main
10-03 08:39:46.035: E/AndroidRuntime(27516): java.lang.RuntimeException: Unable to start activity ComponentInfo{cs4084.panic.button/cs4084.panic.button.ConfirmScreen}: java.lang.NullPointerException
10-03 08:39:46.035: E/AndroidRuntime(27516):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
10-03 08:39:46.035: E/AndroidRuntime(27516):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
10-03 08:39:46.035: E/AndroidRuntime(27516):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
10-03 08:39:46.035: E/AndroidRuntime(27516):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
10-03 08:39:46.035: E/AndroidRuntime(27516):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-03 08:39:46.035: E/AndroidRuntime(27516):    at android.os.Looper.loop(Looper.java:137)
10-03 08:39:46.035: E/AndroidRuntime(27516):    at android.app.ActivityThread.main(ActivityThread.java:4898)
10-03 08:39:46.035: E/AndroidRuntime(27516):    at java.lang.reflect.Method.invokeNative(Native Method)
10-03 08:39:46.035: E/AndroidRuntime(27516):    at java.lang.reflect.Method.invoke(Method.java:511)
10-03 08:39:46.035: E/AndroidRuntime(27516):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
10-03 08:39:46.035: E/AndroidRuntime(27516):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
10-03 08:39:46.035: E/AndroidRuntime(27516):    at dalvik.system.NativeStart.main(Native Method)
10-03 08:39:46.035: E/AndroidRuntime(27516): Caused by: java.lang.NullPointerException
10-03 08:39:46.035: E/AndroidRuntime(27516):    at cs4084.panic.button.ConfirmScreen$GPSLocation.onPreExecute(ConfirmScreen.java:89)
10-03 08:39:46.035: E/AndroidRuntime(27516):    at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
10-03 08:39:46.035: E/AndroidRuntime(27516):    at android.os.AsyncTask.execute(AsyncTask.java:534)
10-03 08:39:46.035: E/AndroidRuntime(27516):    at cs4084.panic.button.ConfirmScreen.onCreate(ConfirmScreen.java:46)
10-03 08:39:46.035: E/AndroidRuntime(27516):    at android.app.Activity.performCreate(Activity.java:5184)
10-03 08:39:46.035: E/AndroidRuntime(27516):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
10-03 08:39:46.035: E/AndroidRuntime(27516):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
10-03 08:39:46.035: E/AndroidRuntime(27516):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T07:50:27.090

我认为你在 onPreExecute 方法中得到了一个空指针，所以我猜 locationManager 是 null ，尝试像在 onCreate() 方法中一样初始化它。

```
locationManager = (LocationManager) this
            .getSystemService(Context.LOCATION_SERVICE); 
```

希望这可以解决空错误问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T07:52:53.433

看来你还没有实例化你的locationManager，使用

```
 LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T07:54:20.540

您尚未初始化`locationManager` 要解决此问题，在您的 onCreate 方法中，您可以执行以下操作：

```
locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE); 
```

# java-me - 我们如何在 J2me 中获取语言环境列表

> ID：12704032
> 
> 赞同：1
> 
> 时间：2012-10-03T07:45:11.180
> 
> 标签：java-me

```
System.getProperty("microedition.locale"); 
```

这仅返回默认语言，如 en-US。有没有办法检查特定语言或所有语言列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:21:40.877

我认为这是不可能的。

我也认为它对你没有帮助。因为无论如何你不能用其他语言做任何事情。区域设置告诉您电话用户界面是什么语言。但是您可以更改手机的语言。（您只能决定在自己的用户界面中显示哪些文本）

如果您只想知道可能的用户界面代码，对于诺基亚，您可以在这里找到： http: [//www.developer.nokia.com/Resources/Library/Java/# !developers-guides/application-framework/supported-locales .html](http://www.developer.nokia.com/Resources/Library/Java/#!developers-guides/application-framework/supported-locales.html)

# c# - EF4 和多个抽象级别

> ID：12704033
> 
> 赞同：8
> 
> 时间：2012-10-03T07:45:13.910
> 
> 标签：c#, entity-framework, inheritance, entity-framework-4

我需要将继承与 EF4 和从 DB 创建的 TPH 模型一起使用。
我创建了一个新项目来测试简单类。有我的班级模型：

![在此处输入图像描述](../Images/58ea451d8c1e3507dd6c12947ca5d1b9.png)

SQL SERVER 2008 中有我的表：

```
VEHICLE 
  ID : int PK
  Owner : varchar(50)
  Consumption : float
  FirstCirculationDate : date
  Type : varchar(50)
  Discriminator : varchar(10) 
```

我在 EDMX 的 Discriminator 字段中添加了一个条件来区分 Scooter、Car、Motorbike 和 Bike 实体。

机动车辆和车辆是抽象的。

但是当我编译时，出现了这个错误：

> 错误 3032：从第 78、85 行开始映射片段时出现问题：EntityTypes EF4InheritanceModel.Scooter、EF4InheritanceModel.Motorbike、EF4InheritanceModel.Car、EF4InheritanceModel.Bike 被映射到表 Vehicle 中的相同行。映射条件可用于区分这些类型映射到的行。

**编辑：**
致拉迪斯拉夫：
我尝试并错误更改为我所有实体的错误：

> 错误 3034：从第 72、86 行开始映射片段时出现问题：实体映射到 > 同一个表中的不同行。确保这两个映射片段不会将具有重叠键的两组实体映射到两组不同的行。

致 Henk（与 Ladislay 建议）：
有所有映射细节： ![在此处输入图像描述](../Images/b532c8fffd1ea42d142e74a4403f0936.png) ![在此处输入图像描述](../Images/3a2ed296dfd025e37451ab624785d7fb.png) ![在此处输入图像描述](../Images/335e8ec0c9e4ceb3b7cfe3e330fadadd.png) ![在此处输入图像描述](../Images/33902a527d6114d3e30684009382179e.png) ![在此处输入图像描述](../Images/4a5e459898cabb1925a2de51392f1884.png) ![在此处输入图像描述](../Images/99959ae5a9889b40ede4cd7108cfb87f.png)

怎么了 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-09T04:06:35.660

EF4 不能很好地处理这些。您可以使用鉴别器来做到这一点，但类必须是非抽象的。您必须使用另一种方法，如代码分析或测试，以确保基类永远不会被实体框架以外的任何东西实例化。

或者，您可以升级到 EF6。我不确定它是否会更好地支持它，但它肯定可以更好地处理模型层次结构，从而允许更好地支持模型的更好的数据库模式。

# php - 以自定义顺序显示 SQL DB 中的 HTML 表

> ID：12704037
> 
> 赞同：1
> 
> 时间：2012-10-03T07:45:24.423
> 
> 标签：php, sql

我用一个看起来像这样的 sql 查询创建了这个表

```
$result = mysql_query("SELECT * FROM 5050goosedown");

echo "<table border='0' width='975'>
<tr>
<th width='12.5%'>name:</th>
<th width='12.5%'>width:</th>
<th width='12.5%'>height:</th>
<th width='12.5%'>fill:</th>
<th width='12.5%'>our fill:</th>
<th width='12.5%'>old price:</th>
<th width='12.5%'>price:</th>
</tr>";

$i = 1;
while($row = mysql_fetch_array($result)){
    echo "<tr bgcolor='#F5F5F5'>";
  if($i%2 == 0){
      echo "<tr bgcolor='#E5E5E5'>";
  }
  $i++;

  echo "<td>" . $row['name'] . "</td>";
  echo "<td>" . $row['width'] . "</td>";
  echo "<td>" . $row['height'] . "</td>";
  echo "<td>" . $row['normal_fill'] . "</td>";
  echo "<td>" . $row['our_fill'] . "</td>";
  echo "<td>" . $row['old_price'] . "</td>";
  echo "<td>" . $row['price'] . "</td>";
  echo '<td bgcolor=#FFFFFF><form method="post" action=""><input type="hidden" name="goosedown_id" value="'.$row['goosedown_id'].'" /><input type="submit" name="sumbit" value="Delete" /></form></td>';
  echo "</tr>";
  }
echo "</table>";

?> 
```

我想知道以特定顺序显示表中项目的最佳方法是什么，因为目前是按字母顺序显示。但是，我希望它按大小顺序显示，*即*., single, super single, queen, king, super king……</p>

我只是不知道如何尝试这个。您认为我可能需要在数据库中添加另一个条目吗？

这就是表格的样子.. 如您所见，有一个部分可以让人们输入自己的值

![在此处输入图像描述](../Images/05f1b8c70fba78fe5f30bb11b56fe3cc.png)

mysql

```
CREATE TABLE `5050goosedown` (
    `goosedown_id` int(11) unsigned NOT NULL auto_increment,
    `name` varchar(100) NOT NULL default '',  
    `width` int(8),
    `height` int(8),
    `normal_fill` int(8),
    `our_fill` int(8),
    `old_price` DECIMAL(3,2),
    `price` DECIMAL(3,2), 
    PRIMARY KEY  (`goosedown_id`)
    ) TYPE=MyISAM; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T07:50:20.773

> 但是我希望它按大小顺序显示，即单人、超级单人、皇后、国王、超级国王……</p>

然后试试这个：

```
ORDER BY
  CASE Size
    WHEN 'sigle' THEN 0 
    WHEN 'super' THEN 1
    WHEN 'single' THEN 2
    WHEN 'queen' THEN 3
    ...
  END , Name 
```

# jqgrid - 如何在jqGrid中设置一个空值

> ID：12704039
> 
> 赞同：0
> 
> 时间：2012-10-03T07:45:41.253
> 
> 标签：jqgrid, null, handler

我有这个代码，我有一个小问题，当我编辑时，我有`rowid`值`codSelected`要发送到我的处理程序，它由`onSelectRow`事件存储。如果我编辑一行，效果很好，但如果编辑一个并且我想立即添加一个新行，我需要这个值 ( `_codSelected`) null，但它与最后编辑的行具有相同的值。我知道我可以`addfunc`在寻呼机中使用，但如果我使用它，我无法使用 jqGrid 默认使用的弹出窗口。

谢谢。

```
$("#list").jqGrid({
    url: '/modulos/mantenimiento/Proveedores.ashx', 
    datatype: 'xml',
    mtype: 'GET',
    colNames: ['Codigo' //Some more colnames and colmodels]
    colModel: [
        { name: 'Codigo', index: 'PRg_Codigo', edittype: 'select',
            editable: true, editrules: { edithidden: false }, editoptions:
            { size: 30, dataUrl: '/modulos/mantenimiento/grupoProveedores.ashx?
            oper=selectAllGroups' }, sortable: true }
    ],
    onSelectRow: function (rowid) {
        _codSelected = rowid;
    },
    ajaxSelectOptions: {
        data: {
            codSelected: function () { 
                return _codSelected;
            }
        }
    }
});

jQuery("#list").jqGrid('navGrid', '#pager', {
    alerttext: "Seleccione un Servicio.",
    add: true, addtitle: "Crear nuevo Servicio",
    del: true, deltitle: "Eliminar Servicio",
    edit: true, edittitle: "Modificar Servicio",
    search: false, searchtitle: "Búsqueda",
    refresh: true,
    cloneToTop: true
},
{ width: 360, resize: false, closeAfterEdit: true, recreateForm: true,
    viewPagerButtons: true, afterComplete: muestraResultadoOperacion },
{ width: 360, resize: false, closeAfterAdd: true, recreateForm: true,
    viewPagerButtons: true, afterComplete: muestraResultadoOperacion },
{},
{ closeAfterSearch: true, closeOnEscape: true }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:53:49.647

我不确定我是否完全理解您的要求。

首先`_codSelected`看起来`selrow`和jqGrid的internal option的值是一样的。您可以使用`$("#list").jqGrid("getGridParam", "selrow")`获取`rowid`最后选择的行的。如果您只想*在编辑对话框的情况下*`_codSelected`将变量初始化为当前选定行的值，并*在添加对话框的情况下*将其设置为，您可以在[beforeInitData](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#events)回调中执行此操作。添加对话框的回调可以设置为，编辑对话框的回调可以使用。它应该可以解决您的问题。*`null`*`beforeInitData``_codSelected``null``_codSelected = $(this).jqGrid("getGridParam", "selrow");`

**更新**：为了清除我的建议，我决定发布以下代码：

```
var _codSelected = null;

// ...
// here should be the definition of jqGrid where you removed
// the current code of onSelectRow which changes _codSelected
// ...

jQuery("#list").jqGrid('navGrid', '#pager', {
    alerttext: "Seleccione un Servicio.",
    add: true, addtitle: "Crear nuevo Servicio",
    del: true, deltitle: "Eliminar Servicio",
    edit: true, edittitle: "Modificar Servicio",
    search: false, searchtitle: "Búsqueda",
    refresh: true,
    cloneToTop: true
},
{ width: 360, resize: false, closeAfterEdit: true, recreateForm: true,
    beforeInitData: function () {
        // set _codSelected in case of Edit operation
        _codSelected = $(this).jqGrid("getGridParam", "selrow");
    },
    viewPagerButtons: true, afterComplete: muestraResultadoOperacion },
{ width: 360, resize: false, closeAfterAdd: true, recreateForm: true,
    beforeInitData: function () {
        // clear _codSelected in case of Add operation
        _codSelected = null;
    },
    viewPagerButtons: true, afterComplete: muestraResultadoOperacion },
{},
{ closeAfterSearch: true, closeOnEscape: true }); 
```

# android - 当 TextView 数据超过其大小时，屏幕向右移动

> ID：12704040
> 
> 赞同：0
> 
> 时间：2012-10-03T07:45:48.543
> 
> 标签：android, android-layout

![在此处输入图像描述](../Images/aad73f4348ff779aeeb5f680a806e7ba.png)我有一个显示客户详细信息的 UI。现在一些客户地址很长，当我在 TextView 中显示它时，全屏布局向地址 Textview 末尾的方向移动，因此一些参数被隐藏了。我怎样才能保持地址 textview 修复的长度。我用 ellipsize 尝试过这样的事情，但没有运气。

```
 <style name="CustomerTextView">
  <item name="android:layout_width">fill_parent</item>
  <item name="android:layout_height">wrap_content</item>
  <item name="android:textSize">10sp</item>
  <item name="android:textColor">@android:color/white</item>
  <item name="android:layout_margin">5dp</item>
  <item name="android:background">@drawable/textview_border</item>
  <item name ="android:ellipsize">end</item>  
  </style> 
```

我的客户地址的 XML 文件看起来像这样

```
 <TableRow android:gravity="right" >

        <TextView
            style="@style/CustomerLabelTextView"
            android:gravity="right"
            android:text="@string/customerAddress" />
    </TableRow>

    <TableRow
        android:gravity="right" >

        <TextView
            android:id="@+id/customerAddress"
            style="@style/CustomerTextView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1.0"
            android:gravity="right" />

    </TableRow> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:56:58.530

您可以使用`android:maxEms`,`android:maxLength`或`android:maxWidth` 在您的布局中控制`TextView`. 您还可以使用`android:maxLines`来控制您`TextView`将采取的行数。我已将 maxEms 行添加到您的 TextView 声明中。

```
 <TextView
            android:id="@+id/customerAddress"
            style="@style/CustomerTextView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1.0"
            android:maxEms="25"
            android:gravity="right" /> 
```

# ruby-on-rails - 如何使用 netzke tabpanel 在三个选项卡中添加单个表单，并且只有一个保存按钮

> ID：12704048
> 
> 赞同：0
> 
> 时间：2012-10-03T07:46:07.837
> 
> 标签：ruby-on-rails, ruby, extjs, netzke

请任何人帮助我..

如何使用 netzke tabpanel 在三个选项卡中添加单个表单，并且只有一个保存按钮。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T07:49:11.500

将您的字段嵌套在选项卡面板中，并将选项卡面板放在表单中。

# c# - 打开 Excel 文件，刷新查询并保存 C#

> ID：12704056
> 
> 赞同：1
> 
> 时间：2012-10-03T07:46:47.197
> 
> 标签：c#, excel-2010

我正在尝试打开一个 Excel 文件，刷新它后面的查询，然后在 C# 中保存并关闭该文件。

我有以下内容，但首先出现以下行的错误：

```
 object _missingValue = System.Reflection.Missing.Value;
        Application excel = new Application();
        Workbook theWorkbook = excelFile.Workbooks._Open(txtLocation.Text, _missingValue, _missingValue, _missingValue, _missingValue, _missingValue, _missingValue, _missingValue, _missingValue, _missingValue, _missingValue, _missingValue, _missingValue);
        Sheets sheets = (Sheets)theWorkbook.Worksheets;
        theWorkbook.RefreshAll();
        theWorkbook.Save();
        excel.Quit(); 
```

我添加了 Microsoft.Office.Interop.Excel 参考，但仍然有问题，我缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:49:13.523

通过以下方式解决：

```
object _missingValue = System.Reflection.Missing.Value;
            Microsoft.Office.Interop.Excel.Application excel = new Microsoft.Office.Interop.Excel.Application();
            Workbook theWorkbook = excel.Workbooks.Open(txtLocation.Text, _missingValue, _missingValue, _missingValue, _missingValue, _missingValue, _missingValue, _missingValue, _missingValue, _missingValue, _missingValue, _missingValue, _missingValue);
Sheets sheets = (Sheets)theWorkbook.Worksheets;
theWorkbook.Save();
excel.Quit();
return true; 
```

谢谢！

# python - 如何加快解决这个自描述数字难题的速度？

> ID：12704061
> 
> 赞同：2
> 
> 时间：2012-10-03T07:47:08.647
> 
> 标签：python, puzzle

我通过 Twitter 从 centerofmath.org发现了[这个谜题：](https://twitter.com/centerofmath/status/253197327479762944/photo/1/large)

> 有一个十位数字，其中最左边的数字也是数字中零的个数，最左边的第二个数字是一的个数，依此类推，直到最后一个数字（或最右边的数字）是该数字中的九个数. **这个数字是多少，它是独一无二的吗？**

我用 Python 写了一个程序来解决这个难题：

```
def yielder(exponent):
     i = 10**exponent
     while i < (10**(exponent+1))-1:
          yield i
          i += 1

def is_solution(num):
     l = list(num)
     #l.reverse()
     is_sol = True
     for i, e in enumerate(l):
          if int(e) != l.count(str(i)):
               is_sol = False
               break
     return is_sol

if __name__=="__main__":
     import sys
     ofile = open('solution.txt', 'w')
     j = int(sys.argv[1])
     print("checking between {0} and {1}".format(10**j, (10**(j+1))-1))
     ofile.write("Solutions between {0} and {1}:\n".format(10**j, (10**(j+1))-1))
     for x in yielder(j):
          if is_solution(str(x)):
              ofile.write('\t{0}\n'.format(x))
              print("solution is {0}".format(x))
     ofile.close() 
```

我得到的解决方案是`6210001000`

但问题是需要几个小时才能解决。我想知道是否有一些我可以用来让它更快的技术

顺便说一句，这些是 10 9,999,999,999 之间的数字，它们是解决方案

```
Solutions between 10 and 99:
Solutions between 100 and 999:
Solutions between 1000 and 9999:
    1210
    2020
Solutions between 10000 and 99999:
    21200
Solutions between 100000 and 999999:
Solutions between 1000000 and 9999999:
    3211000
Solutions between 10000000 and 99999999:
    42101000
Solutions between 100000000 and 999999999:
    521001000
Solutions between 1000000000 and 9999999999:
    6210001000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:03:44.737

您可以通过使用更多逻辑来减少大量的数字检查。例如，您知道各个数字的总和*必须*为 10，否则数字的位数太多，因此请尝试利用这一点。

例如，您可以将您的 yielder 更改为仅生成`sum(int(n) for n in num) == len(num)`满足条件的数字，然后您无需检查您已经知道没有意义的数字的昂贵循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T08:43:42.060

如果您构造数字而不是搜索它，它会快得多。

```
def to_the_number(n):
    digits=list(map(int,n))
    assert(len(digits))==10
    done = False
    while not done:
        done = True
        for i in range(10):
            if digits[i]!=digits.count(i):
                digits[i]=digits.count(i)
                print(digits)
                done = False
    return ''.join(map(str, digits)) 
```

并从任何数字开始：

```
>>> to_the_number('1234567890')
[1, 1, 3, 4, 5, 6, 7, 8, 9, 0]
[1, 1, 0, 4, 5, 6, 7, 8, 9, 0]
[1, 1, 0, 0, 5, 6, 7, 8, 9, 0]
[1, 1, 0, 0, 0, 6, 7, 8, 9, 0]
[1, 1, 0, 0, 0, 0, 7, 8, 9, 0]
[1, 1, 0, 0, 0, 0, 0, 8, 9, 0]
[1, 1, 0, 0, 0, 0, 0, 0, 9, 0]
[1, 1, 0, 0, 0, 0, 0, 0, 0, 0]
[8, 1, 0, 0, 0, 0, 0, 0, 0, 0]
[8, 1, 0, 0, 0, 0, 0, 0, 1, 0]
[7, 1, 0, 0, 0, 0, 0, 0, 1, 0]
[7, 2, 0, 0, 0, 0, 0, 0, 1, 0]
[7, 2, 1, 0, 0, 0, 0, 0, 1, 0]
[7, 2, 1, 0, 0, 0, 0, 1, 1, 0]
[7, 2, 1, 0, 0, 0, 0, 1, 0, 0]
[6, 2, 1, 0, 0, 0, 0, 1, 0, 0]
[6, 2, 1, 0, 0, 0, 1, 1, 0, 0]
[6, 2, 1, 0, 0, 0, 1, 0, 0, 0]
'6210001000' 
```

# iphone - 如何为 iPhone 4s 和 iPhone 5 设计视图？

> ID：12704063
> 
> 赞同：3
> 
> 时间：2012-10-03T07:47:23.710
> 
> 标签：iphone, ios6, iphone-5

> **可能重复：**
> [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)
> [如何处理 iPhone 5 的屏幕尺寸？](https://stackoverflow.com/questions/12396545/how-to-deal-with-iphone-5-screen-size)

我想用 xcode 4.5 开始新项目

iPhone 5 的视图高度为 568，4s 为 480。

如何为两者设计应用程序

如果我有一个全屏背景，并且我已经为它绘制了两个适当的图像，我如何让 UIImageView 为新的更高的 iPhone 和旧的 iPhone 正确显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:00:19.350

如果您计划仅支持 iOS 6，那么您可以使用 Interface Builder 上的 AutoLayout 功能。很好的教程在这里： [http ://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)

如果您想同时支持 iOS 5 和 iOS 6 这两个系统，那么这取决于您的 nib 文件中的内容。您可以使用字符串和支柱来定位控件，以便它们在两种屏幕尺寸下看起来都不错。然而字符串和支柱并不总是一个解决方案，你不能用它们做很多事情。然后你可以有两个不同的 nib 文件——一个用于大屏幕，一个用于普通屏幕——并在初始化视图控制器时加载它们。

当然，您也可以在代码中设置视图，但这需要更多的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T07:49:58.590

您可以使用此代码获取屏幕高度（和宽度）：

```
CGRect screenRect = [[UIScreen mainScreen] bounds];
CGFloat screenWidth = screenRect.size.width;
CGFloat screenHeight = screenRect.size.height; 
```

# php - PHPUnit：从setUp（）获取测试类和方法的名称？

> ID：12704067
> 
> 赞同：21
> 
> 时间：2012-10-03T07:47:31.103
> 
> 标签：php, phpunit

PHPUnit 在`setUp()`运行特定测试之前运行测试类的方法。

我为测试类中的每个测试加载了特定于测试的固定装置，并且不希望显式地这样做。理想情况下，我希望在该`setUp()`方法中自动处理此问题。

如果`setUp()`方法使测试类名称和测试方法名称可用，则可以这样做。

我可以在方法中使用即将运行的测试类和方法的名称`setUp()`吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-03T14:44:48.743

实现这一点的最简单方法应该是调用`$this->getName()`.`setUp()`

```
<?php

class MyTest extends PHPUnit_Framework_TestCase
{
    public function setUp() {
        var_dump($this->getName());
    }

    public function testMethod()
    {
        $this->assertEquals(4,2+2,'OK1');
    }
} 
```

并运行：

```
phpunit MyTest.php 
```

产生：

```
PHPUnit 3.7.1 by Sebastian Bergmann.

.string(10) "testMethod"

Time: 0 seconds, Memory: 5.00Mb

OK (1 test, 1 assertion) 
```

* * *

一般来说，我建议不要这样做，但在某些情况下，它确实是一种很好的做事方式。

其他选择是拥有多个测试类，并将所有使用相同夹具的测试放在一个类中。

另一种方法是拥有私有的 setUp 助手并从测试用例中调用适当的助手。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-29T09:32:09.543

或者，如果您不想`string(10)`在 edorian 的答案中显示部分，您可以这样做：

```
protected function setUp()
{
    echo $this->getName() . "\n";
} 
```

# c# - 生成仅具有选定属性的对象概览

> ID：12704072
> 
> 赞同：2
> 
> 时间：2012-10-03T07:47:53.920
> 
> 标签：c#, ascx

我有一个用户控件，我在整个 Web 应用程序中都使用它。它在表中返回 a `List<Person>`。目前，列表中显示的属性是固定的（通过代码）。

我想更改控件，使其接受一个属性列表，然后使用该列表来呈现这些对象（类型为`Person`）的表，其中只有选定的属性可见。

这只能使用反射吗？实现这一目标的最佳途径是什么。

物体：

```
Class Person{
  Name{get;set;}
  Age{get;set;}
  Address{get;set;}
  Role{get;set;}
  AnotherProperty{get;set;}
} 
```

usercontrol 只是获取一个 Person 列表并在一个普通的 html 表中显示结果（通过一个转发器）。现在我希望用户控件可以自定义，其中的属性显示在这个 html 表中。我希望用户控件按如下方式使用：

```
<uc:PersonSearchList runat="server" ID="someId" ShowProperties="Name, Address, Role" /> 
```

或在后面的代码中设置：

```
PropertyInfo[] ShowProperties = Person.GetType().GetProperties(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:08:39.917

您可以通过几种方式做到这一点。我给你看两个。

首先，您可以在用户控件中创建公共属性。然后，在后面的代码中，将列表添加到属性中，如下所示：

用户控制：

```
Partial Class user_controls_myControl
    Public newList As List(Of myList)

    'do your other suff
end Class 
```

ASPX 页面：

```
dim nameOfList as new List(of String)
me.myControl1.newList = nameOfList 
```

或者，您可以将其添加到公共方法中。

```
Partial Class user_controls_myControl
    Public Sub bindData(ByVal commentList As List(Of CDTrialNotification))
       'attach to your gridviews here
    end sub
end Class 
```

ASPX 页面：

```
 dim myList as new List(of String)
   me.myControl1.bindData(myList) 
```

# facebook - 发布到 Facebook 页面

> ID：12704083
> 
> 赞同：-1
> 
> 时间：2012-10-03T07:48:50.367
> 
> 标签：facebook, facebook-graph-api, post, facebook-page

我想在我的网站上发布用户的所有活动（没有 facebook 帐户）以发布到 facebook 页面。我想知道这是否可能。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:07:47.477

看看[Facebook 权限页面](https://developers.facebook.com/docs/authentication/permissions/)。您将需要用户的其中一个`publish_stream`或`publish_actions`权限。还有一个专门关于[发布权限](https://developers.facebook.com/docs/publishing/)的页面。

# c++ - OpenCV 视频捕获 API

> ID：12704086
> 
> 赞同：1
> 
> 时间：2012-10-03T07:49:16.920
> 
> 标签：c++, visual-c++, opencv

我在 MSVC++ 中使用 OpenCV 来使用网络摄像头创建视频捕获 API。但我希望在拍摄视频和图像时网络摄像头的闪光灯应该关闭。我想应该有与硬件或注册表文件有关的问题。任何解决方案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:10:49.760

据我所知，您无法使用 OpenCV 控制网络摄像头的闪光灯。如果您不想在录制时点亮灯，最简单的做法可能是在它前面放一些东西。

# iphone - 在 UITableView 中实现树结构

> ID：12704091
> 
> 赞同：0
> 
> 时间：2012-10-03T07:49:52.567
> 
> 标签：iphone, objective-c, uitableview, treeview

`UITableView`我想以类似的方式实现树结构

```
 Item-1
     subItem-1
     subItem-2
 Item-2
 Item-3
     subItem-1
     subItem-2 
```

但我不想为此使用自定义单元格。我为此做了很多工作`Googling`，但我得到了一个链接，上面说我必须使用自定义单元格。

如果有人有任何想法，请您与我分享。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:18:31.373

表视图并不是真正设计用于显示分层视图。应该发生的事情是您向下钻取（在堆栈上推送一个新的视图控制器）以到达层次结构的下一个级别。

但是，如果您的层次结构仅与您建议的一样深，那么您可以将项目作为标题，将子项目作为行。如果您不想创建自定义视图（为什么不呢？），您将仅限于顶级项目的文本。

# eclipse - 如何在我的 android 项目中运行单个文件类进行测试？

> ID：12704093
> 
> 赞同：0
> 
> 时间：2012-10-03T07:49:58.723
> 
> 标签：eclipse

我是安卓新手。我已经建立了一个项目。

我有一个类来检查 url 是否存在，如下所示：

```
public class connect {
Boolean checkServer() throws IOException
{
    Boolean check = false;
    HttpURLConnection connection = null;
    try {
        URL url = new URL("www.google.com");
        connection = (HttpURLConnection) url.openConnection();
        connection.connect();
        connection.getInputStream();
                    // do something with the input stream here
        check = true;
    } catch (MalformedURLException e1) {
        e1.printStackTrace();
        check = false;
    }
    finally {
        if(null != connection) { connection.disconnect(); }
    }
    return check;
} 
```

}

我想在 Eclipse 中将它作为单个文件运行。

我怎样才能做到这一点？

无论如何谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:41:29.143

您可以编写一个 Junit 类，或者以一种简单的方式，使用 public static void main() 方法编写一个新类，或者在同一个类和 main() 方法中创建一个类的对象并启动 main()方法

```
public class ConnectDemo {

    /**
     * @param args
     */
    public static void main(String[] args) {

        Connect c = new Connect();

        if(c.checkServer())
            System.out.println("Check Server Successful");
        else 
            System.out.println("Check Server not Successful");
    }

} 
```

# php - 解析字符串中的变量，如 vBulletin

> ID：12704095
> 
> 赞同：1
> 
> 时间：2012-10-03T07:50:13.870
> 
> 标签：php, parsing, vbulletin, phrase

我不知道该怎么说。在尝试“解析”字符串中的变量时我应该考虑什么，例如短语中的 vBulletin？

前任;

```
{username} you have two notifications 
```

我已经检查了 smarty/raintpl，并研究了所有这些的一些正则表达式，smarty/raintpl 正是我需要的，唯一的问题是，它们都是从文件中读取的，我是从数据库中提取的，我需要一些东西，例如；

```
$username = "Bob";
$html = "{username} you have two notifications";
display($html); 
```

如果我使用任何替换函数（regex/str_replace），这会减慢脚本/网站的速度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:57:07.717

您可以使用简单的正则表达式，例如：

```
$matches = array();

$string = '{username} you have two notifications';
preg_match_all('/{(\w+)}/', $string, $matches);
print_r($matches); 
```

哪个输出：

```
Array
(
    [0] => Array
        (
            [0] => {username}
        )

    [1] => Array
        (
            [0] => username
        )

) 
```

或者，如果您想要更高级的东西：

```
$matches = array();

$string = '{username or something=3} you have two notifications';
preg_match_all('/{([^}]+)}/', $string, $matches);
print_r($matches); 
```

这同样给你：

```
Array
(
    [0] => Array
        (
            [0] => {username or something=3}
        )

    [1] => Array
        (
            [0] => username or something=3
        )

) 
```

我建议尽可能严格 - 即确切地知道你想要允许什么并且只允许它（即小写字母或数字和空格） - 从长远来看它会使其更简单。

可以选择使用外部模板引擎，例如 smarty、twig 或 dwoo，但根据您的项目，您可能会发现这种做法太过分了。

# google-apps-script - 如何从下载的文件中执行电子表格来执行脚本？

> ID：12704100
> 
> 赞同：2
> 
> 时间：2012-10-03T07:50:33.520
> 
> 标签：google-apps-script

我有一个 xls 文件。我下载它`docs.google.com/file/`。怎样才能转换成`docs.google.com/spreadsheet/ccc?key = of sript`

如何从下载的文件中执行电子表格来执行脚本？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:16:04.527

遗憾的是，无法使用 Apps 脚本将 XLS 转换为 Google 电子表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:46:53.037

我用驱动器转换 xls 文件

[https://gist.github.com/4666836](https://gist.github.com/4666836)

# c# - 编辑数组列表的内容，然后将其写入文件 c#

> ID：12704106
> 
> 赞同：0
> 
> 时间：2012-10-03T07:50:55.423
> 
> 标签：c#

我有一个要修改的 .csv 文件。这是文件的格式：

`Id, UTMGridEast, UTMGridNorth, LocDate, LocTime, Species`

该数据集使用 UTM 坐标，我想将它们转换为纬度/经度并将它们放回各自位置的 .csv 文件中。我已经能够转换 UTM 坐标，该部分已排序！

现在，我已经有了分离这些值并将它们添加到数组列表的代码。我现在需要做的就是编辑内容并将其写回 .csv 文件。

我的 GUI 只包含两个按钮，到目前为止，这是我的代码：

```
 public partial class MainWindow : Window
{
    private string _filename;

    public MainWindow()
    {
        InitializeComponent();
    }

    private void btnLoad_Click(object sender, RoutedEventArgs e)
    {
        // Configure open file dialog box
        Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();
        dlg.FileName = "Dataset"; // Default file name
        dlg.DefaultExt = ".txt"; // Default file extension
        dlg.Filter = "Commar Seperated Values (.csv)|*.csv" ; // Filter files by extension 

        // Show open file dialog box
        Nullable<bool> result = dlg.ShowDialog();

        // Process open file dialog box results 
        if (result == true)
        {
            // Open document 
            _filename = dlg.FileName;
            txtFilePath.Text = _filename;
        }
    }

    private void btnConvert_Click(object sender, RoutedEventArgs e)
    {
        ConvertToLatLong();
    }

    private void ConvertToLatLong()
    {
        GeoUTMConverter geoUtmConverter = new GeoUTMConverter();
        TextWriter tw = new StreamWriter("starkey.txt");

        string textFile = System.IO.File.ReadAllText(_filename);
        List<string> lines = new List<string>(textFile.Split(new[] { Environment.NewLine }, StringSplitOptions.None));
        for (int iLine = 0; iLine < lines.Count; iLine++)
        {
            List<string> values = new List<string>(lines[iLine].Split(new[] { "," }, StringSplitOptions.None));
            for (int iValue = 0; iValue < values.Count; iValue++)
            {
                Console.WriteLine(String.Format("Line {0} Value {1} : {2}", iLine, iValue, values[iValue]));

                if (iLine > 0)
                {
                    geoUtmConverter.ToLatLon(Convert.ToDouble(values[1]), Convert.ToDouble(values[2]), 11, GeoUTMConverter.Hemisphere.Northern);
                    Double latitude = geoUtmConverter.Latitude;
                    Double longitude = geoUtmConverter.Longitude;
                    Console.WriteLine("Latitude: " + latitude + " Longitude: " + longitude);
                    //EDIT AND WRITE TO FILE HERE 
                }
            }
        }
    }
} 
```

我试图创建一个新的数组列表并使用它来编写它，`StreamWriter`但我似乎无法让它正确。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:57:41.067

您似乎缺少的部分是

```
values[1]=latitude;
values[2]=longitude;
tw.WriteLine(String.Join(",",values); 
```

不要忘记在最后关闭作家。

# node.js - node.js：使用用户定义的 id 在 elasticsearch 中进行数据索引

> ID：12704107
> 
> 赞同：1
> 
> 时间：2012-10-03T07:50:58.917
> 
> 标签：node.js, elasticsearch

我需要在elasticsearch中索引多个json，索引id应该由用户给出，而不是由elasticserach自动创建。

任何人都可以告诉我如何阻止 elasticsearch 创建自动索引 id 以及如何使用我想要的 id 进行数据索引。

下面是用于索引数据的 node.js 代码的一部分：

```
elasticSearchClient.index('index_name', 'type', json)
                .on('data', function(data) {
                    console.log("************ "+data+" ****************")
                })
                .exec() 
```

任何帮助将不胜感激！

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:19:27.903

只需`id`在您的 json 文档中包含该字段。它将自动从文档中提取并放入 url。实际上[core.js](https://github.com/phillro/node-elasticsearch-client/blob/master/lib/elasticsearchclient/calls/core.js)脚本包含这个逻辑：

```
if (document.id) {
    path += "/" + document.id
    method = 'PUT'
    delete document.id
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T07:43:10.647

如果我们不提供索引 ID，则文档的索引 ID 将由 elasticsearch 自动创建。

所以我使用下面的代码并告诉索引文档的索引ID。

```
var commands = []
 commands.push({ "index" : { "_index" :'opt', "_type" : "art", "_id":my_id} })
 commands.push(index_ingjson_doc)

 elasticSearchClient.bulk(commands, {})
                            .on('data', function(data) {
                            }).on('error', function(error){})
                            .exec(); 
```

这样，我的问题就解决了！其他一些解决方案可能是可能的，但到目前为止我正在使用上面的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T07:56:26.937

如果我对您的理解正确，只需`"_id": whatever`输入您的 JSON 并确保`index.mapping._id.indexed`设置为`true`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T08:51:30.237

elasticSearchClient.bulk() 是我的问题的解决方案。

参考： [https ://github.com/phillro/node-elasticsearch-client](https://github.com/phillro/node-elasticsearch-client)

# javascript - 在html5中加载和播放图像序列作为动画的最佳方法？

> ID：12704109
> 
> 赞同：1
> 
> 时间：2012-10-03T07:51:07.373
> 
> 标签：javascript, performance, html, animation

我只是想听听是否有人对在播放由 hmtl5 中的图像序列组成的短动画时采用哪种方法有任何建议。浏览器支持的范围越广越好，它需要适用于 iOS。可以假设画布。

**要求：**

1.  无需用户交互即可启动动画
2.  精确控制要显示的帧（例如，转到特定帧，或从第一帧开始播放到第 n 帧）
3.  能够缩放动画（以适应浏览器窗口）
4.  能够以 ~30fps（90 帧）播放至少 3 秒
5.  支持至少1280x720的分辨率

从文件大小/性能的角度来看，将动画编码为视频文件是最好的，但它在 iOS 上不满足 1)，并且很可能无法满足 2)。

我过去使用的解决方案是将帧单独加载为一系列 jpeg，并使用 DOM 中的图像元素或将帧绘制到画布上来显示帧。这几乎满足了所有要求，并且运行良好，只是加载速度很慢。而且我只对大约 20-30 帧的动画使用了这种方法。您最终会收到大量 http 请求和大量数据。

对于某些动画，包含大量运动模糊的帧已以较低分辨率保存，然后在显示时被拉伸以匹配全分辨率帧。这节省了一些文件大小，并且并不那么明显。

减少 http 请求数量的一种方法是将多个图像组合成一个精灵表，但是当单个帧为 1280x720 时，您很快就会得到一个分辨率非常高的精灵表图像，我认为不会播放与 iOS 相得益彰。

我在这里还缺少其他方法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-03T07:55:29.850

您可以使用 CSS3 关键帧动画并随时控制动画。

```
@keyframes sunrise {
   0% {
      bottom: 0;
      left: 340px;
      background: #f00;
   }

   33% {
      bottom: 340px;
      left: 340px;
      background: #ffd630;
   }

   66% {
      bottom: 340px;
      left: 40px;
      background: #ffd630;
   }

   100% {
      bottom: 0;
      left: 40px;
      background: #f00;
   }
}

#sun.animate {
    animation-name: sunrise;
    animation-duration: 10s;
    animation-timing-function: ease;
} 
```

您还需要添加供应商前缀，但我只会使用modernizr 来支持后备。

[http://www.impressivewebs.com/demo-files/css3-animated-scene/](http://www.impressivewebs.com/demo-files/css3-animated-scene/)

# centos - Exim垃圾邮件centos，我如何检测来源

> ID：12704114
> 
> 赞同：1
> 
> 时间：2012-10-03T07:51:22.427
> 
> 标签：centos, spam, exim

我有很多这样的信息

> 2012-10-03 06:53:36 1TJGxf-0006kG-F0 ** *******@yahoo.com.tw F=<******@*****.* *> R=enforce_mail_permissions: 域**.* * 已超过允许的每小时最大电子邮件数 (250/200 (125%))。消息被丢弃。*****

 ****当然，我从未见过雅虎邮件，每 5-10 秒大约有 10 条这样的消息......

我怎样才能检测到来源？

我怎么能阻止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T14:21:18.297

在您的示例中，邮件队列 ID 为 1TJGxf-0006kG-F0。您要做的第一件事是查看该电子邮件的日志。有两种可能的方式，具体取决于 exim 的配置方式。先试试这个：

`exim -Mvl 1TJGxf-0006kG-F0`

它将打印出该电子邮件的日志，包括它来自哪个 IP 地址、是否有任何用户进行了身份验证等。Exim 可以配置为不跟踪此单独的消息信息，我们不知道您的 exim 是如何配置的，因此，如果这不起作用，请改为运行：

`exigrep 1TJGxf-0006kG-F0 /var/log/exim/main.log`

您可能必须找到您的 exim 正在记录的日志文件。以下是我如何在我的系统上找到它：

`# exim -bP | grep log_file_path log_file_path = /var/log/exim/%s.log`

然后使用该结果来确定您的日志文件在哪里。

在为您提供了这些工具来挖掘和查找您的信息之后，我强烈怀疑您正在运行的某个网站的提交表单不安全。“不安全”是指某些网络机器人能够提交发件人、收件人和邮件正文，并使用该表单发送大量垃圾邮件。上面的日志可能会确认它来自您的 Web 服务器，而不是来自外部某个地方。当然，也可能是某些用户帐户被盗用，因为他们使用了一个非常简单的密码“12345”或“秘密”，并且垃圾邮件机器人正在从世界各地连接到该帐户并使用它发送垃圾邮件。

第一步是识别垃圾邮件的来源（本地 Web 表单、被盗帐户等），然后将其阻止。****

# grails - Grails 重定向操作索引

> ID：12704117
> 
> 赞同：0
> 
> 时间：2012-10-03T07:51:51.133
> 
> 标签：grails, redirect, indexing

所以我让这个控制器带有一个重置（擦除一些数据）、索引和其他方法，所以在重置方法结束时我有一个重定向到索引方法。和有什么区别：

```
redirect(action: "index", id: params.id)

redirect(action: index, id: params.id) 
```

第一个完美运行，在 index 方法中重定向我，但第二个将我重定向到不同的方法。（`getEndMonthsList`这是控制器中的最后一个方法）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:41:23.940

您展示的两个变体在 Grails 2 之前是有效的，因为只有闭包可以用来定义动作。因此，您可以重定向到“index”，或者`index`因为您使用第二种方法引用了闭包属性，Grails 将根据其名称构建完整的 URL。它稍微慢一些，所以使用 String 方法总是更好。

在 2.0 中，事情发生了变化，允许将方法用作操作，并且是首选方法。因此，如果你有一个`index`方法，它就不再是类中的公共字段，你可以像任何其他变量一样引用它，它是一个不能直接通过名称引用的方法。所以字符串方法是唯一有效的方法。

我尝试使用非字符串方法来重现这一点，但它并没有按照您描述的方式失败，当索引操作被定义为方法（如预期的那样）并且在定义时工作正常时，它失败并出现缺少属性异常作为一个闭包（再次，正如预期的那样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:02:04.727

在第一种情况下，Grails 按名称调用控制器方法。在第二种情况下，Grails 获取闭包名称并按名称调用控制器方法。

看`org.codehaus.groovy.grails.web.metaclass.RedirectDynamicMethod#establishActionName`

# mvvm - mvvmlight eventto 命令修饰符

> ID：12704121
> 
> 赞同：0
> 
> 时间：2012-10-03T07:52:09.510
> 
> 标签：mvvm, keyboard, mvvm-light, eventtocommand

我正在寻找一种将修饰符添加到 EventToCommand usign mvvm light 的解决方案。我想要实现的是绑定一个命令让我们说 mouseEnter 但只有在按下 ctrl 时。下面我只有一个 mouseenter 命令。

```
<i:Interaction.Triggers>
  <i:EventTrigger EventName="MouseEnter">
    <cmd:EventToCommand Command="{Binding TestCmd}"/>
  </i:EventTrigger>
</i:Interaction.Triggers> 
```

知道如何添加键盘修饰符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:16:29.157

只需这样做：

```
TestCmd = new RelayCommand(() =>
{
    // command action here

}, () => Keyboard.Modifiers == ModifierKeys.Control); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:51:47.017

我认为最好的解决方案是使用 RelayCommand 的 CanExecute 功能。

一个解决方案可能是：

```
TestCmd= new RelayCommand<MouseEventArgs>(e =>
{
     // do your command
},   e =>
{
     return (Keyboard.Modifiers & ModifierKeys.Control) > 0;
}); 
```

# android - SQLite：rawQuery() 不起作用，但 execSQL() 起作用

> ID：12704129
> 
> 赞同：1
> 
> 时间：2012-10-03T07:52:58.530
> 
> 标签：android, sqlite

我有以下代码。当我打开我的`SQLite`数据库时，我可以看到患者`Id = 1235`已创建但未创建`Id = 1234`：

```
String sql;
sql = "INSERT INTO Users(Id, Name, Surname, LastLogin)VALUES(1234, 'john', 'foo', null)";
database.rawQuery(sql, null);

sql = "INSERT INTO Users(Id, Name, Surname, LastLogin)VALUES(1235, 'john', 'foo', null);";
database.execSQL(sql); 
```

状态的文档`rawQuery()`：

> SQL 查询。SQL 字符串**不能**是**;** 终止

在我的第一个查询中确实是这种情况。（另一个区别是`Id`。我改变了它，以便两个插入都可以工作，`Id`是索引）。

使用调试器，我可以确认两个查询都已执行并且我没有收到任何异常或错误。

任何的想法？我花了几个小时在这上面，但我想不通。我想这是我错过的非常微不足道的事情。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T08:16:46.763

```
public void execSQL (String sql) 
```

> 执行不是 SELECT 的单个 SQL 语句或任何其他返回数据的 SQL 语句。

你必须`execSQL()`使用

*   插入
*   更新
*   删除

使用`rawQuery()` 它返回`Cursor`查询`SELECT`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-03T08:01:13.447

虽然我在文档中找不到这个，但我理解的是 rawQuery 是用于 SELECT 查询的。它只是“查询”方法所做的“原始”接口。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-04T19:52:59.767

你必须把：

```
Cursor c = database.rawQuery(sql, null);
c.moveToFirst();
c.close(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-03T08:01:01.743

试试这个

```
database.rawQuery("INSERT INTO Users(Id, Name, Surname, LastLogin) VALUES(1234, 'john', 'foo', null)", null); 
```

让我知道它是否有效？

# javascript - 获取更改输入的 div val()

> ID：12704132
> 
> 赞同：2
> 
> 时间：2012-10-03T07:53:09.823
> 
> 标签：javascript, html, jquery

HTML

```
<div>my content of the div1
  <input/>
</div>​

<div>my content of the div2
  <input/>
</div>​

<div>my content of the div3
  <input/>
</div>​ 
```

JS

```
$('input').on('change',function(){
  var x = $('this').parent('div').val();
    alert(x);
})​​​; 
```

我的问题是为什么我无法获取输入已更改的 div 的内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T07:54:10.887

您需要将 的值而`this`不是字符串“this”传递给 jQuery，并调用[`.text()`](http://api.jquery.com/text/)以获取元素的文本内容，而不是`.val()`（获取输入元素的值）：

```
$('input').on('change',function(){
    var x = $(this).parent('div').text(); //`text` method gets contents of div
    //        ^ no quotes around `this`
    alert(x);
})​​​; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T07:54:23.030

`.html()`您可以使用而不是使用`.val()`方法来获取 div 的内容。.val() 方法主要用于获取输入、选择和文本区域等表单元素的值。有关详细信息，请参见[此处](http://api.jquery.com/val/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T07:55:19.307

**更正的脚本**

```
$('input').on('change',function(){
  var x = $(this).parent('div').html();
  alert(x);
})​​​; 
```

*   `val()`仅适用于表单域
*   `this`不应该被引用。

**选择**

如果您只想要父级的文本，您可以使用`text()`. 但是，浏览器的实现方式可能有所不同（请参阅[此处的注释](http://api.jquery.com/text/)）。在这种情况下，将您想要的内容包装在另一个元素中可能会更干净，例如：

```
<div>
  <span>my content of the div1</span>
  <input/>
</div>​ 
```

并使用如下脚本：

```
$('input').on('change',function(){
  var x = $('this').siblings("span").html();
  alert(x);
})​​​; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T07:54:32.997

[jQuery`val()`](http://api.jquery.com/val/)仅适用于输入而不适用于通用 html 元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T07:54:49.197

更改`$('this')`为`$(this)`。（删除引号）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-03T07:55:00.893

除了 select/input/textarea 标签之外，其他标签不存在 .val()。我建议您使用 .text() 函数或 .html()，具体取决于您要检索的内容。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-03T07:55:32.347

你的代码应该是这样的

```
$('input').on('change',function(){
  var x = $(this).parent('div').text();
// OR var x = $(this).parent('div').html();
    alert(x);
})​​​; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-03T07:56:45.670

用这个

```
$('input').bind('keyup',function(){ 
alert($(this).parent().html());
}) 
```

# php - 如何在会话中存储相同的值？

> ID：12704136
> 
> 赞同：1
> 
> 时间：2012-10-03T07:53:42.793
> 
> 标签：php, session

我正在构建一个结帐系统，并且正在尝试将产品添加到会话变量中。但我坚持如何拯救他们。例如，我如何保存 5 个产品？

我尝试使用这样的东西，但这不起作用：

```
$_SESSION['cart']['productIds']['id'] .= $_POST['productid'];
$_SESSION['cart']['productPrices']['price'] .= $_POST['price']; 
```

输出是这样的（id 为 2 且价格为 20 的产品的两倍）：

```
Array ( [productIds] => Array ( [id] => 22 ) [productPrices] => Array( [price] => 2020 ) 
```

我希望将其保存为数组，最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T07:56:06.643

您应该将会话变量视为数组而不是字符串。使用运算符附加到它`[]`：

```
$_SESSION['cart']['products'][] = array(
    'id' => $_POST['productid'],
    'price' => $_POST['price'],
); 
```

`array_push()`如果你愿意，你也可以使用。稍后您可以迭代产品，例如：

```
foreach ($_SESSION['cart']['products'] as $product) {
    echo $product['id'], ': ', $product['price'], "\n";
} 
```

# continuous-integration - VS2012 发布配置文件 - 加密密码

> ID：12704139
> 
> 赞同：9
> 
> 时间：2012-10-03T07:54:04.987
> 
> 标签：continuous-integration, visual-studio-2012, publish-profiles

我喜欢使用新的 VS 2012 发布配置文件，但是在构建服务器上使用它们时，我不确定如何存储密码。

当我勾选“保存密码”框时，它会创建一个 .pubxml.user 文件并在 XML 节点中加密密码。

当我在构建服务器上运行部署时，密码文件似乎总是被忽略。

我可以将密码存储在

```
<PropertyGroup>
    <Password>NotMyRealPassword>
</PropertyGroup 
```

但鉴于他们已经在加密它，如果可以的话，我很乐意使用 VS Encryption。

我如何在`<Password>`不构建自定义任务的情况下解密并填充属性？

另外 - 如果我确实必须构建一个自定义 MSBUILD 任务，那么这个 SUO 文件中使用的是什么类型的加密？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T06:44:53.740

当我试图回答你的问题时，我意识到我不太适合回答这个问题，但我确实想对 .pubxml.user 文件发表一些评论。

当您在 Visual Studio 中保存 Web 发布配置文件时，我们会加密密码并将加密值存储在给定发布配置文件的 .pubxml.user 文件中。我们在每个用户/每台机器的基础上加密这个值。因此，如果您将相同的文件带到不同的机器（*或者如果不同的用户登录到同一台机器*），它不会解密为正确的值。因此，如果您可以解密 VS 在构建服务器上存储的值，则不值得研究。

# ios - Xcode 4.5 缺少 LLVM 4.1 的库问题

> ID：12704141
> 
> 赞同：1
> 
> 时间：2012-10-03T07:54:14.507
> 
> 标签：ios, xcode, ios4, core-plot, objective-c-blocks

我最近为 iOS 6 SDK 安装了 xcode 4.5，但是现在当我尝试在它上面运行我的应用程序时，它给了我库错误。我搜索了许多主题，但找不到解决方案。我在下面附上了我的错误

```
clang: error: -Z-reserved-lib-stdc++: 'linker' input unused when '-c' is present
Command /Volumes/Xcode/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

我的 C++/C/Objective C 编译器 == Apple LLVM 编译器 4.1，虽然我的源代码在 LLVM 编译器 3.1 上运行良好，但现在在新的 xcode 3.1 中不可用。

我面临的主要问题是我的项目中 coreplot 的静态库，因为在 3.1 中它工作正常，没有任何错误。

我尝试在 Coreplot 静态库中更改标题搜索路径、其他链接器标志、库搜索路径、将活动架构构建为 NO 以创建正确的 ipa，但问题没有解决。寻找建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:27:55.670

花了 2 天后终于从[https://github.com/djw/core-plot下载了新的 Core-Plot sdk](https://github.com/djw/core-plot)

现在工作正常。我在下载之前尝试了所有可能的解决方案来修改我的 xcode，因此请下载新的 sdk 以解决上述问题。

# matlab - 如何在 MATLAB 中将数据保存到 txt 文件或 excel 文件

> ID：12704152
> 
> 赞同：2
> 
> 时间：2012-10-03T07:54:56.033
> 
> 标签：matlab

如何将此数据（`i`和`a`）保存到MATLAB中的`.txt`文件或文件中？`.xls`

```
for i=1:10
   i
   a=i*2
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T08:01:09.177

使用[csvwrite](http://www.mathworks.se/help/matlab/ref/csvwrite.html)将逗号分隔值写入文本文件。可以在Excel中阅读，同时也是一个文本文件

```
i=1:10;
a=i*2;
csvwrite('data.csv', [i; a]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T08:00:10.863

Matlab 提供了一个类似于 C 的文件 I/O 接口：你打开一个文件，输出数据或格式化文本，然后关闭它：

```
f = fopen( "file.txt", "w" );
for i=1:10,
  a=i*2
  fprintf( f, "%d ", a );
end
fclose( f ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T08:00:38.407

要保存到文本文件，有[fprintf](http://www.mathworks.nl/help/matlab/ref/fprintf.html)，例如（来自文档）：

```
x = 0:.1:1;
A = [x; exp(x)];

fileID = fopen('exp.txt','w');
fprintf(fileID,'%6s %12s\n','x','exp(x)');
fprintf(fileID,'%6.2f %12.8f\n',A);
fclose(fileID); 
```

要保存到 excel 文件，有[xlswrite](http://www.mathworks.nl/help/matlab/ref/xlswrite.html)，示例（来自文档）：

```
filename = 'testdata.xlsx';
A = [12.7, 5.02, -98, 63.9, 0, -.2, 56];
xlswrite(filename,A) 
```

如果您没有安装 excel，这将不起作用。然后是另一种选择[csvwrite](http://www.mathworks.nl/help/matlab/ref/csvwrite.html)，您稍后可以轻松地将其导入 excel（例如在另一台 PC 上）。

# ios - 今天发布了一个非 ios 6 应用程序。允许吗？

> ID：12704154
> 
> 赞同：1
> 
> 时间：2012-10-03T07:54:58.577
> 
> 标签：ios, ios6

我有一个即将提交的应用程序，但它是在 iOS 6 发布之前针对 iOS 5.1 构建的。

现在可以提交发布，还是苹果会拒绝它，因为它不是 iOS 6？

此外，由于它是 5.1，它使用现已弃用的自动旋转/布局方法，这些方法旨在使其仅限横向。

如果 iPhone 5 / iOS 6 用户尝试运行它，它实际上会纵向运行吗，因为它不包括新的自动旋转方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:58:29.850

他们不会拒绝它，应用商店以最低 IOS 运行，因此您的项目设置应始终反映您的应用兼容的最早 IOS，因此如果您的应用设置为 5.1，它将适用于 IOS 5.1 及更高版本。

希望这可以帮助，

山姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T07:59:33.070

只要您不包含更大的 iPhone 5 启动图像，就可以。

# c - FreeBSD IPFW 将 IP 添加到表中

> ID：12704161
> 
> 赞同：1
> 
> 时间：2012-10-03T07:55:35.273
> 
> 标签：c, sockets, freebsd, ipfw

我想从 C 程序中将 IP 添加到 IPFW 中的表中。我不想调用 system() 因为这段代码必须尽可能高效。所以基本上我的问题是，有人可以解释这是如何工作的吗？由于没有可以使用的 API，我正在查看源代码（以查看添加是如何完成的），但这花费的时间比预期的要长，如果可能的话，如果有人解释这一点，那就太好了。

所以我想要做的是当我收到来自客户端的连接时，我想将该客户端的 IP 地址放在某个表中。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:59:01.097

这不是一个真正的答案，只是一个明显的建议。用 cvsup 查看系统的源代码。然后查找 ipfw.c ，在那里您将看到它用于修改规则的系统调用。ipfw 程序是一个命令行工具，所以它必须在用户空间中。这意味着你必须能够做它所做的事情。（尽管您必须拥有超级用户权限。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T07:42:15.697

好的。所以我找到了解决方案。

ip_fw.h 中有一个结构 - ipfw_table_entry

代码看起来像这样：

```
...
ipfw_table_entry entry;

bzero(&entry, sizeof entry);

entry.addr = inet_addr("192.168.1.0");
entry.tbl = 100;
entry.masklen = 32;

setsockopt(ipfw_socket, IPPROTO_IP, IP_FW_TABLE_ADD, &entry, sizeof entry); 
```

# wordpress - 需要 wordpress woocommerce 插件的自定义输入字段

> ID：12704163
> 
> 赞同：1
> 
> 时间：2012-10-03T07:55:50.490
> 
> 标签：wordpress, wordpress-theming, textinput

我`WordPress woocommerce plugin`用来制作`eCommerce site`. 一切都很好`woocommerce plugin`。但是当我看到`register`用户会制作的部分时`register all of his details`，没有`custom fields`喜欢`gender, phone no, address etc`。我需要所有这些东西在`register page`. 那么该怎么做呢？任何帮助和建议都将是非常可观的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T07:24:54.787

这个插件就是你要找的[http://wordpress.org/extend/plugins/cimy-user-extra-fields/](http://wordpress.org/extend/plugins/cimy-user-extra-fields/)。您将能够在注册表单中添加额外的字段，并将其添加到用户的用户个人资料页面中。

这是示例注册表的屏幕截图[http://wordpress.org/extend/plugins/cimy-user-extra-fields/screenshots/](http://wordpress.org/extend/plugins/cimy-user-extra-fields/screenshots/)

我个人在这里使用这个[http://mayumibeats.com/wp-signup.php?blog_id=1](http://mayumibeats.com/wp-signup.php?blog_id=1)

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-04T15:02:28.500

您可以添加自己的字段，将以下代码添加到您的 wordpress 主题 functions.php 文件中。

```
/**
 * Add new register fields for WooCommerce registration.
 *
 * @return string Register fields HTML.
 */
function wooc_extra_register_fields() {
    ?>

    <p class="form-row form-row-first">
    <label for="reg_billing_first_name"><?php _e( 'First name', 'woocommerce' ); ?> <span class="required">*</span></label>
    <input type="text" class="input-text" name="billing_first_name" id="reg_billing_first_name" value="<?php if ( ! empty( $_POST['billing_first_name'] ) ) esc_attr_e( $_POST['billing_first_name'] ); ?>" />
    </p>

    <p class="form-row form-row-last">
    <label for="reg_billing_last_name"><?php _e( 'Last name', 'woocommerce' ); ?> <span class="required">*</span></label>
    <input type="text" class="input-text" name="billing_last_name" id="reg_billing_last_name" value="<?php if ( ! empty( $_POST['billing_last_name'] ) ) esc_attr_e( $_POST['billing_last_name'] ); ?>" />
    </p>

    <div class="clear"></div>

    <p class="form-row form-row-wide">
    <label for="reg_billing_phone"><?php _e( 'Phone', 'woocommerce' ); ?> <span class="required">*</span></label>
    <input type="text" class="input-text" name="billing_phone" id="reg_billing_phone" value="<?php if ( ! empty( $_POST['billing_phone'] ) ) esc_attr_e( $_POST['billing_phone'] ); ?>" />
    </p>

    <?php
}

add_action( 'woocommerce_register_form_start', 'wooc_extra_register_fields' ); 
```

您可以将字段修改为文本框、单选按钮或您需要的任何内容。

希望能帮助到你 ：）

马努。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-11T10:50:11.340

您必须编辑插件文件才能拥有此功能。可能需要更改的文件是

*   模板/form-checkout.php
*   类/类-wc-checkout.php

不需要更改数据库，因为条目将保存在 wp_usermeta 表中。

如果您通过 Wordpress 的注册页面注册用户，请使用[Cimy User Extra Fields 之类的插件](http://wordpress.org/extend/plugins/cimy-user-extra-fields/)

# node.js - 网络上的咕噜声很慢

> ID：12704172
> 
> 赞同：1
> 
> 时间：2012-10-03T07:56:34.400
> 
> 标签：node.js, gruntjs

我在我正在处理的项目上创建了一个 grunt 文件。我们有一个模板，用于一系列产品，但它都保存在我们的网络中。当我`grunt default`在模板上运行时，它会在几秒钟内完成。当我将模板移动到`grunt default`再次运行（或`grunt watch`）的项目文件夹之一时，将需要大约 20 分钟才能完成。

这些文件存储在同一个驱动器上，路径如下：（我稍微更改了名称）：

*   /卷/公司/共享/代码库/HTML/模板
*   /卷/公司/项目/资产/单位/开发/来源

有谁知道为什么一项繁重的任务需要这么长时间才能在一个文件夹中完成而不是另一个？如果我将它复制到桌面，它也会在几秒钟内完成一个`watch`或任务。`default`

# javascript - 是 HTML 和 适合在线 Gameboy 风格的游戏吗？

> ID：12704173
> 
> 赞同：3
> 
> 时间：2012-10-03T07:56:38.877
> 
> 标签：javascript, html, audio, canvas, online-game

我正计划创建一款在线 Gameboy 风格的游戏（我正计划尝试在不直接模拟的情况下尽可能逼真地重新创建游戏），但我不确定我可能会使用什么技术。

作为参考，我打算尝试重新创建[Gameboy Color 的 Pokémon Trading Card Game](http://en.wikipedia.org/wiki/Pok%C3%A9mon_Trading_Card_Game_%28video_game%29)。（[此处为视频示例](https://www.youtube.com/watch?v=1igDbNxRfUw)）
该游戏不使用大量不断的背景重绘，并且主要涉及我猜想的精灵动画和关键帧动画。

带有 Javascript的 HTML`<canvas>`元素是否非常适合处理简单的 2D 逐帧更新动画，或者其他技术是否更适合处理它？是否也有用于可靠音频的 HTML 解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T08:00:09.530

是的！如果您愿意学习它，HTML5（包括 Canvas 元素）能够在浏览器窗口中创建完整的游戏。查看 mozilla 的实验性游戏：[http ://browserquest.mozilla.org](http://browserquest.mozilla.org)

如果您有兴趣了解有关 HTML5、其功能和良好编码实践的更多信息，您应该查看：[http ://www.html5rocks.com](http://www.html5rocks.com)

# mysql - 使用 PHP 将 UTC 日期存储到 MySQL

> ID：12704175
> 
> 赞同：0
> 
> 时间：2012-10-03T07:56:45.007
> 
> 标签：mysql, datetime, utc

我有一个移动应用程序和休息服务。移动应用程序将生成并向 Web 服务提供 UTC 日期时间和时区。我需要使用 php 将这两个值存储到 mysql 中。

我正在从远程源获取日期时间，所以我不能使用 mysql 的 UTC_TIMESTAMP() 来生成“当前”UTC 时间。

我有一个包含 2 列的表，创建 (DATETIME) 和时区 (VARCHAR)

在 PHP 中，我将收集以下内容：

```
$created = "2010-09-30 12:31:10"; //Actual UTC time
$timezone = "America/Los_Angeles" 
```

INSERT 语句将如何存储 $created，原样 (UTC)，而不将其存储为我的服务器的默认时区？

我是否必须将其从 UTC 转换为我的服务器在 PHP 中的本地时间，或者它是否可以在 MySQL 中进行一些处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:03:02.960

据我所知，MySQL 不支持日期列上的时区信息，例如 PostgreSQL 就支持。

为什么不能按原样存储日期？我相当肯定不会发生转换。而且，你为什么还需要时区信息？稍后在显示时将其转换为本地时间不是更相关吗？对于查看信息的特定用户？

“当前时区设置不影响 UTC_TIMESTAMP() 等函数显示的值或 DATE、TIME 或 DATETIME 列中的值。这些数据类型中的值也不以 UTC 存储；时区仅在从TIMESTAMP 值。如果您想要 DATE、TIME 或 DATETIME 值的特定于区域设置的算术，请将它们转换为 UTC，执行算术，然后转换回来。“源[https://dev.mysql.com/doc/refman/5.5 /en/time-zone-support.html](https://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html)

这意味着，MySQL 仅利用时区信息从 TIMESTAMP() 和类似函数返回本地时间，而不是用于插入或选择的数据的动态转换。

# jquery - 将 onclick 事件添加到动态生成的元素 jquery 数组

> ID：12704176
> 
> 赞同：0
> 
> 时间：2012-10-03T07:56:53.527
> 
> 标签：jquery

我在弹出窗口的左侧有一个动态生成的缩略图图像，单击图像时我希望该图像显示在右侧。

我正在使用以下代码：

```
 $.ajax({  
                    type: "POST",
                    url:  "/buildyourholiday/placeimages",
                    data: "srcid="+cityid,
                    success: function(data){
                        var objsrc = jQuery.parseJSON(data);
                        var src="";
                        $(".photoright").append().empty();
                        $.each(objsrc, function(index, obsrc){
                            src += '<ul>'+
                                '<li><a href="#"><img id="citythumb" onclick="sliderimage(this)" src="/images/city/thumbs/'+obsrc.img_filename+'" width="100" height="100"></a></li>'+
                                '</ul>';
                        });
                        $(".photoright").append(src);
                        function sliderimage(image)
{
    alert("sdf");
    alert(image);
}
                    }
                }); 
```

当我触发它时，我得到 sliderimage 不是一个函数。当我在追加后使用 onclick 事件时，我只得到第一张图像，但有多个图像。我希望 onclick 在单击任何图像时起作用。怎么办？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:03:45.807

`id="citythumb"`必须是唯一的，使用`class`，喜欢`class="citythumb"`

```
$(".photoright").on('click', 'img', function(e){
   e.preventDefault(); // for link
   alert(this);
}); 
```

当您更改`id`属性时，您也可以替换`img`为`.citythumb`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:05:46.457

在此处尝试事件委托方法，其中事件与元素祖先相关联..

由于冒泡效果这样做，在这种情况下，点击事件将与图像元素相关联......

```
$(".photoright").on('click', 'img', function(){
   alert(this);
}); 
```

确保文档中的 id 是唯一的。

所以代替**id="citythumb"** 声明**class="citythumb"**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:10:58.503

请将 sliderimage() 函数移到 Ajax 调用之外

```
 $.ajax({  
 });

 function sliderimage(image){     
   alert("sdf");
   alert(image);
 } 
```

# iphone - 导航视图控制器中的推送循环

> ID：12704182
> 
> 赞同：0
> 
> 时间：2012-10-03T07:57:13.677
> 
> 标签：iphone, cocoa-touch, ios5, xcode4.2, storyboard

我正在使用`storyboards`. 以下是我的看法

```
My NavigationController --> [Series of ViewControllers] ->About View Controller 
```

现在从`AboutViewController`我有

```
AboutViewController--> ViewController1-->ViewController2-->ViewController3-->ViewController4--> 
```

回到`AboutViewController using PUSH SEGUE`.

现在假设我是一个用户，我在上面做，然后回到`AboutViewController`我再次去`viewController1`等等，`viewController4`然后循环多次。

我想知道这是否会导致一些内存问题，因为视图放在堆栈上`navigationController`。如果是这样，应该使用什么策略`aboutViewController`从`ViewController4`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:19:12.967

不，它不会产生任何内存问题。iOS 会为您服务。当它呈现另一个视图时，如果您没有强引用周期（在子视图控制器中总是对父视图具有弱引用），则会自动释放前一个视图。您可以尝试在每个视图控制器中添加如下所示的 initWithCoder 和 dealloc 方法，看看会发生什么。

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    if ((self = [super initWithCoder:aDecoder]))
    {
        NSLog(@"init ViewController");
    }
    return self;
}

- (void)dealloc
{
    NSLog(@"dealloc ViewController");
} 
```

还添加 viewDidAppear - ViewDidDisappear 方法来查看到底发生了什么。这真的很有趣。让我知道这是否没有意义。

PS 请参阅[iOS 5](http://www.raywenderlich.com/5191/beginning-storyboards-in-ios-5-part-2)教程中的开始故事板了解详细信息。

# c# - 这是单选按钮列表的事件，类似于单选按钮的检查更改事件

> ID：12704185
> 
> 赞同：1
> 
> 时间：2012-10-03T07:57:36.003
> 
> 标签：c#, asp.net, webforms

我正在创建一个 Web 表单，其中我采用了一个单选按钮列表，其中包含 2 个列表项：AccountId 和 Account Number。我想触发我使用过的单选按钮列表的事件，但我找不到正确的。我只能找到 SelectedIndexChange 事件和 TextEvent 不起作用。

我只希望当我使用单选按钮列表的任何列表项时，应该执行所需的操作，就像我从单选按钮列表中选择帐号作为列表项一样，然后是我在网络表单中使用的某些字段，例如名称，年龄和个人信息应该被禁用。如果我从单选按钮列表项中选择 AccountId，那么我使用过的其他字段（如子帐户、Subacountinfo）应该被禁用。

我无法做到这一点，因为我无法找到要触发的单选按钮列表的正确事件。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:09:03.567

请查看[RadioButtonList 类](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.radiobuttonlist.aspx)中的事件。

您可以使用[SelectedIndexChanged](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedindexchanged.aspx)事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:05:27.787

您可以调整 `AutopostBack="true"`和`SelectIndexChanged event`控制

象素

```
<asp:RadioButtonList ID="RadioButtonList1" runat="server" AutoPostBack="True" OnSelectedIndexChanged="RadioButtonList1_SelectedIndexChanged"/> 
```

代码背后

```
void RadioButtonList1_SelectedIndexChanged(object sender, EventArgs e)  
{  
    if(RadioButtonList1.SelectedValue == "")
    {
          //Define your treatment 
          ....     

    }
} 
```

注意：如果未定义 AutoPostBack，则不会引发 OnSelectIndexChanged

# rule-engine - .net 中的规则引擎

> ID：12704188
> 
> 赞同：2
> 
> 时间：2012-10-03T07:58:08.153
> 
> 标签：rule-engine

我必须将数据从 excel 导入 SQL 数据库。Excel 数据包含各种参数，如 P1、P1、P4、P5 等。我必须应用 if(P1 > 100 和 P1 < 200) 等业务规则，然后将记录插入数据库。同样，在某些情况下，字符串值也会被验证。我可以有任何包含 UI 的开源规则引擎来更改、添加、删除规则。我正在使用 C# 读取 excel 并插入记录

还有一件事是最好的方法：

1.  先读取excel，将每条记录作为一个对象存储在集合中，然后遍历集合，对每个对象应用业务规则，然后在数据库中插入记录或者
2.  从excel中读取一条记录应用业务规则，然后在数据库中插入记录。对整个 Excel 重复该过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T06:07:32.363

好吧，这不是一个开源解决方案，但由于没有建议答案，我会把它放在那里，以防你觉得它有帮助。我的公司编写了一个简单的确定性规则引擎，我们已经在几个类似的项目中使用过它。我们的[Enigma 规则引擎](http://www.enigmasupercomputing.com/RulesEngine)基于 Windows 工作流，因此非常适合 .NET 环境，用于创建新规则的用户界面具有拖放式 WF 框架所带来的所有简单性。

要尝试回答您的第二个问题，我认为这取决于您的导入数据的大小。如果您的 excel 文件小于 100 兆字节左右，我会先将整个文件转换为对象集合。我认为您可能会通过将其作为批处理而不是单打来获得一些速度。

当然，如果它们是大文件或者你有内存不足的问题，你总是可以妥协你提出的两个建议：一次将 1000 条记录读入一个集合，重复直到导入完成。

# android - 在 Android 的小部件布局下方显示 Toast 通知

> ID：12704189
> 
> 赞同：0
> 
> 时间：2012-10-03T07:58:11.950
> 
> 标签：android, android-layout, android-widget, toast

我正在开发具有几个按钮的 Android Widget，我想在启动器屏幕中的 Widget 布局下方显示 Toast，因为单击这些按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:25:06.287

您可以使用`toast.setGravity()`方法定位吐司。

例子：`Toast.makeText().setGravity(Gravity.TOP|Gravity.LEFT, 0, 0).show();`

去[这里](http://developer.android.com/guide/topics/ui/notifiers/toasts.html#Positioning)以获得完整的解释。

# javascript - 客户端重定向兼容性？

> ID：12704190
> 
> 赞同：0
> 
> 时间：2012-10-03T07:58:17.540
> 
> 标签：javascript, redirect

我想使用这样的东西：

```
alert("foo");
window.location.href="foo.php"; 
```

可以在可以看到人们使用所有主要浏览器的网站上使用吗？（Firefox、Chrome、IE、Safari、Opera 等）

我需要它兼容。我不能使用 PHP 标头进行重定向，因为我需要能够显示 alert(); 在重定向之前。

另外，这是一种快速的重定向方法吗？如果没有，任何其他选项仍然允许我显示警报并等待他们在重定向之前单击确定？

感谢您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:04:48.397

更好的选择是使用链接或使用[元刷新标签](http://webdesign.about.com/od/metataglibraries/a/aa080300a.htm)。这些将更加稳定并且跨浏览器兼容；）

# flash - duplicateMovieClip 正在删除我的剪辑？

> ID：12704193
> 
> 赞同：0
> 
> 时间：2012-10-03T07:58:25.813
> 
> 标签：flash, actionscript-2

我正在尝试复制我使用 attachMovie 创建的影片剪辑（其中还有一些较小的剪辑，我也使用 attachMovie 将它们放在那里）。我似乎无法“找到”剪辑的名称，当我找到时，或者当我认为我找到时，就像这样：

```
_level0.products.box0.duplicateMovieClip('newMc', 100); 
```

剪辑实际上被删除了！这是非常出乎意料的行为。有谁知道我可能做错了什么？影片剪辑存在于该地址，我可以设置它的 _x 和 _y 等。

# c# - 编写条件语句的另一种方法

> ID：12704195
> 
> 赞同：1
> 
> 时间：2012-10-03T07:58:30.483
> 
> 标签：c#, asp.net, .net

这里我有一个代码示例。

我想知道编写此代码的其他方法；特别是我想知道嵌套的其他形式`if`。

我也想听听您对评论的看法（最佳做法是什么，我的评论风格在专业环境中是否足够？）

如果这个问题超出了 SO 的范围，请告诉我，我将删除它，请不要投反对票，我只是尝试学习编程 ;-)。

```
// Has User expressed his preference?
if (!repositoryDevice.HasDevicePreference(userDevice))   // If not ...
{
    // Save the preference
    repositoryPreference.Add(userDevice.UserId, candidateId);
    result = true;
}
else   // If yes ... 
{
    // If a User has express his preference more than 1 hour ago
    // allow the User to change his preference, otherwise not
    if (!HasUserRecentPreference(userDevice))
    {
        repositoryPreference.Add(userDevice.UserId, candidateId);
        result = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T08:02:21.197

您可以使用将这两个条件合二为一`OR`

```
if (!repositoryDevice.HasDevicePreference(userDevice) || !HasUserRecentPreference(userDevice))
{
    result = true;
    repositoryPreference.Add(userDevice.UserId, candidateId);
}
else
{
    // put your else clause here
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T08:05:35.077

这是逻辑运算，假设：

```
X = repositoryDevice.HasDevicePreference(userDevice)
Y = HasUserRecentPreference(userDevice) 
```

所以，代码行：

```
 repositoryPreference.Add(userDevice.UserId, candidateId);
    result = true; 
```

将在以下情况下执行：

```
(NOT X) || (X && (NOT Y)) =  ((NOT X) || X) && (NOT X || NOT Y) 
                          = 1 && (NOT X || NOT Y)
                          = (NOT X || NOT Y) 
```

所以最好的选择：

```
if (!repositoryDevice.HasDevicePreference(userDevice)
       ||  (!HasUserRecentPreference(userDevice)))
{
    // Save the preference
    repositoryPreference.Add(userDevice.UserId, candidateId);
    result = true;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T08:03:33.513

`//If not`和`//If yes`是不必要的。你没有解释你隐含的写什么。

例如

```
int x = 5; //assign 5 to x 
```

会很愚蠢，每个人都可以看到。我的小优化：

```
// Has User expressed his preference?
if (!repositoryDevice.HasDevicePreference(userDevice)) 
{
    // Save the preference
    repositoryPreference.Add(userDevice.UserId, candidateId);
    result = true;
}
// If a User has express his preference more than 1 hour ago
// allow the User to change his preference, otherwise not
else if (!HasUserRecentPreference(userDevice))
{
    repositoryPreference.Add(userDevice.UserId, candidateId);
    result = true;

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-03T08:22:38.100

您正在描述行为。行为通常在类中封装得最好。

我发现一种对消除不受欢迎的条件嵌套代码很有用的模式是[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)。

在这里，您可以使用该行为的特殊性逐步覆盖预定义行为。

但是，对于更简洁的代码，为什么不将规则作为方法的一部分呢？

```
repositoryPreference.TryAdd(userDevice, candidateId);

public void TryAdd(UserDevice userDevice, candidateId) {
 if (!repositoryDevice.HasDevicePreference(userDevice)) return;
 if (!HasUserRecentPreference(userDevice)) return;
 // do the add
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T08:02:10.357

您可以将 else 和 if 放在同一行：

```
 result = true;

    // Has User expressed his preference or 
    // if a User has express his preference more than 1 hour ago
    // allow the User to change his preference
    if (!repositoryDevice.HasDevicePreference(userDevice) ||
        !HasUserRecentPreference(userDevice))
    {
        // Save the preference
        repositoryPreference.Add(userDevice.UserId, candidateId);
    }
    else
    {
        // result = false?
    } 
```

也可以（正如其他人指出的那样）使用`&&`/`||`运算符将两个条件合并到一个代码块中。假设两个块中的代码是相同的，那当然是首选的解决方案：永远不要将同一行写两次。

否则，它看起来非常好！:) 通常认为避免源代码复杂性是一个好主意。

# c - 中断处理程序中的 C printf()？

> ID：12704196
> 
> 赞同：10
> 
> 时间：2012-10-03T07:58:41.090
> 
> 标签：c, multithreading, interrupt-handling

我听说 C 中的 printf() 不应该在 ISR 中使用。是因为它是一个阻塞调用，还是因为它不是可重入的？

如果 printf() 不是可重入的，那么这是否意味着它也不能用于多线程程序，除非它以某种方式“同步”？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T08:00:06.847

我认为可能是所有这些，甚至更多。典型的`printf()`实现可以进行动态（堆）内存分配，这通常不是最快的事情，并且也可能存在不可重入的问题。快速性很重要，因为您通常不应该在中断服务程序上花费太多时间。

有关和的讨论，请参[见此答案](https://stackoverflow.com/questions/3941271/why-are-malloc-and-printf-said-as-non-reentrant)。`printf()``malloc()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T08:40:12.903

它不应该在 ISR 中，因为它不是可重入的，也不是线程安全的，但*主要是*因为它是一个**非常巨大的函数**，如果你从 ISR 调用它，它会锁定整个程序，从而立即产生极端的中断抖动杀死程序中实时性能的每一个提示。

巨大的、夸张的函数不应该出现在 ISR 中，无论它们是否是线程安全的！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T08:33:11.543

我将假设您的意思是中断，即使内核中的中断处理程序通常有更多的特殊限制。相同的论点适用于信号处理程序，但它通常比中断处理程序的特殊限制更简单。如果我的假设是错误的，只需将答案中的“中断”替换为“信号”即可。

函数可以是线程安全的，而不是信号/中断安全的。如果函数使用锁保护其内部状态，然后在获得中断时持有该锁，则中断处理程序无法获取该锁，因为持有该锁的执行路径被中断阻塞。要释放锁，您必须退出中断处理程序，恢复线程的执行直到锁被释放，然后返回中断处理程序。这通常是不可行的，除非您的内核已将中断处理程序实现为可以在等待锁定时产生执行的线程。

使函数同时中断和线程安全的一种常规方法是在持有锁的同时阻止中断，但这非常昂贵，除非非常必要，否则不会这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T08:50:37.047

> 我听说 C 中的 printf() 不应该在 ISR 中使用。是因为它是一个阻塞调用，还是因为它不是可重入的？

更准确地说，因为`printf()`它不是异步信号安全功能。[请参阅Signal Concepts](http://pubs.opengroup.org/onlinepubs/009695399/functions/xsh_chap02_04.html)底部的 async-signal-safe 列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T09:40:15.427

如果你从那里调用 printf() ，它可能会工作，也许一两次。如果它试图阻塞，那几乎是一场灾难，因为中断处理程序没有线程上下文。

如果你在嵌入的东西上链接多线程库， printf() 将获得一个互斥锁，以确保从多个线程调用它是安全的。

正如其他海报所说，只是不要从中断处理程序中调用这些东西。信号量单元总是安全的，IME。仅在操作系统文档中特别注明的其他内容。

# unix - wget拒绝仍然下载文件

> ID：12704197
> 
> 赞同：18
> 
> 时间：2012-10-03T07:58:46.423
> 
> 标签：unix, wget

我只想要文件夹结构，但我不知道如何使用 wget。相反，我正在使用这个：

> wget -R pdf,css,gif,txt,png -np -r [http://example.com](http://example.com)

应该拒绝-R之后的所有文件，但在我看来wget仍然下载文件，然后将其删除。

有没有更好的方法来获取文件夹结构？

> TTP 请求已发送，等待响应... 200 OK 长度：136796 (134K) [application/x-download] 保存到：“example.com/file.pdf”</p>
> 
> 100%[======================================>] 136,796 853K/s 在 0.2s
> 
> 2012-10-03 03:51:41 (853 KB/s) - “example.com/file.pdf” 已保存 [136796/136796]
> 
> 删除 example.com/file.pdf，因为它应该被拒绝。

如果有人想知道这是给客户的，他们可以告诉我结构，但是因为他们的 IT 人员必须这样做，所以这很麻烦，所以我想自己得到它。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-03T08:41:38.790

这似乎`wget`是设计工作的方式。执行递归下载时，仍会下载与拒绝列表匹配的非叶子文件，以便收集它们作为链接，然后将其删除。

从代码内注释（[recur.c](http://bzr.savannah.gnu.org/lh/wget/trunk/annotate/head:/src/recur.c#L426)）：

> 要么指定了 --delete-after，要么**我们加载了这个被拒绝（例如，被 -R）拒绝的 HTML 文件，以便我们可以获取它的超链接**——在任何一种情况下，删除本地文件。

我们在过去的一个项目中遇到过这种情况，我们必须镜像一个经过身份验证的站点，并`wget`不断点击*注销*页面，即使它本应拒绝这些 URL。我们找不到任何选项来改变`wget`.

我们最终得到的解决方案是[下载](http://ftp.gnu.org/gnu/wget/)、破解和构建我们自己的`wget`. 可能有一种更优雅的方法，但我们使用的快速修复方法是将以下规则添加到[`download_child_p()`例程](http://bzr.savannah.gnu.org/lh/wget/trunk/annotate/head:/src/recur.c#L487)的末尾（修改以符合您的要求）：

```
 /* Extra rules */
  if (match_tail(url, ".pdf", 0)) goto out;
  if (match_tail(url, ".css", 0)) goto out;
  if (match_tail(url, ".gif", 0)) goto out;
  if (match_tail(url, ".txt", 0)) goto out;
  if (match_tail(url, ".png", 0)) goto out;
  /* --- end extra rules --- */

  /* The URL has passed all the tests.  It can be placed in the
     download queue. */
  DEBUGP (("Decided to load it.\n"));

  return 1;

 out:
  DEBUGP (("Decided NOT to load it.\n"));

  return 0;
} 
```

# android - 突出显示图像上的文字，类似于谷歌翻译应用程序

> ID：12704201
> 
> 赞同：5
> 
> 时间：2012-10-03T07:58:57.970
> 
> 标签：android, image, text, selection, highlight

在 android 的谷歌翻译应用程序中，有照片搜索部分。拍照后，用户可以使用高亮效果选择文本。有没有办法手动轻松地重现这种效果？或者，是否有可以用于此的库？（我只对文本选择部分感兴趣。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:20:39.623

股票相机应用程序具有图像裁剪功能，您可以提取代码并在您自己的应用程序中使用它。它（或者至少是我上次检查时）只有几节课。您也可以通过意图调用它，但是您的应用程序将取决于可用的库存相机应用程序，并且如果他们决定删除或更改意图操作等，可能会在未来的 Android 版本中中断。

# php - 从 PHP 为 MySQL 准备的语句（使用 mysqli）

> ID：12704205
> 
> 赞同：2
> 
> 时间：2012-10-03T07:59:24.270
> 
> 标签：php, mysql, mysqli, prepared-statement

我在 MySQL 数据库中有这些表：

```
CREATE TABLE `product` (
`idProduct` int(10) unsigned NOT NULL AUTO_INCREMENT,
`name` varchar(255) NOT NULL,
`category` varchar(255) NOT NULL,
PRIMARY KEY (`idProduct`)
);

CREATE TABLE `sale` (
`idSale` int(10) unsigned NOT NULL AUTO_INCREMENT,
`highDate` date NOT NULL,
`idProduct` int(10) unsigned NOT NULL,
`idUser` varchar(45) NOT NULL,
PRIMARY KEY (`idSale`)
); 
```

我想获得一个表格，其中包含行中的用户和列中的产品，例如这个问题： [MySQL Pivot row into dynamic number of columns](https://stackoverflow.com/questions/12004603/mysql-pivot-row-into-dynamic-number-of-columns)

在[SQL Fiddle (Demo)](http://sqlfiddle.com/#!2/ff5b1/1)中工作正常，但我需要帮助才能使用 mysqli 从 PHP 查询它。

这个对吗？

```
$this->dbh->query("SET @sql = NULL");
$stmt = $this->dbh->query("SELECT GROUP_CONCAT(DISTINCT
                          CONCAT(
                          'count(case when category = ''',
                          category,
                          ''' then 1 end) AS ',
                          replace(category, ' ', '')
                       )
                    ) INTO @sql
                FROM product;");

$stmt = $this->dbh->prepare("SET @sql = CONCAT('SELECT s.idUser, ', @sql, ' FROM sale s
                            LEFT JOIN product p ON p.idProduct = s.idProduct
                            GROUP BY s.idUser');");

$stmt->execute(); 
```

如何从查询中检索数据？Execute() 方法返回 TRUE 或 FALSE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:10:29.767

您可以使用`$stmt->fetch`或`$stmt->get_result()`从查询语句中检索结果，如下所示：

[`fetch()`](http://www.php.net/manual/en/mysqli-stmt.fetch.php)

```
while ($stmt->fetch()) {
    printf ("%s (%s)\n", $name, $code);
} 
```

[`get_result()`](http://www.php.net/manual/en/mysqli-stmt.get-result.php)

```
$stmt->execute();
$result = $stmt->get_result();
while ($row = $result->fetch_array(MYSQLI_NUM)) {
    foreach ($row as $r) {
        print "$r ";
    }
    print "\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:03:55.020

使用它来获取结果

```
while ($stmt->fetch()) {
    //code
} 
```

[http://php.net/manual/en/mysqli-stmt.fetch.php](http://php.net/manual/en/mysqli-stmt.fetch.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:05:13.630

最后我做了以下事情：

```
$query = $this->dbh->query("SELECT GROUP_CONCAT(DISTINCT CONC...");
$result = array();
$row = $query->fetch_row();

$query = $this->dbh->query("SELECT " . $row[0] . " FROM sale s ...");
return $query->fetch_array(MYSQLI_ASSOC); 
```

# android - 如何以编程方式更改整个应用程序中的字体大小，Android？

> ID：12704216
> 
> 赞同：23
> 
> 时间：2012-10-03T08:00:10.023
> 
> 标签：android, font-size, android-fonts

我已经使用从 "8" 到 "46" 的字体大小列表创建了 Spinner。我可以单击字体大小并在它显示给我的微调器中。

我的需要是，如果我单击 Spinner 内的字体大小“26”，那么它应该应用于我的整个项目。就像应用到我的屏幕、Textview 外观、Edittext - 粗体/斜体等。如果我再次单击 46 大小，那么它应该适用于我的整个项目。

我怎么能通过编程来做到这一点？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-07-04T09:51:23.957

`Android`文档没有具体说明通过用户在应用程序级别选择全局更改字体大小的最有效方法。

**黑魔王**的[回答](https://stackoverflow.com/a/12706334/1554935)我觉得有问题。

 **问题是许多`Android`小部件是子类`TextView`，例如`Button`、`RadioButton`和`CheckBox`. 其中一些是 的间接子类`TextView`，这使得`TextView`在这些类中实现自定义版本非常困难。

然而，正如**Siddharth Lele 在他的评论中指出的那样**，使用`styles`or`themes`是更好的方式来处理整个应用程序中文本大小的变化。

我们为布局设置样式来控制视图的外观。主题本质上只是这些样式的集合。但是，我们可以将主题仅用于文本大小设置；没有为每个属性定义值。使用主题而不是样式为我们提供了一个巨大的优势：我们可以以编程方式为整个视图设置主题。

**主题.xml**

```
<resources>
    <style name="FontSizeSmall">
        <item name="android:textSize">12sp</item>
    </style>
    <style name="FontSizeMedium">
        <item name="android:textSize">16sp</item>
    </style>
    <style name="FontSizeLarge">
        <item name="android:textSize">20sp</item>
    </style>
</resources> 
```

创建一个类来处理加载我们的首选项：

```
public class BaseActivity extends Activity {
    @Override
    public void onStart() {
        super.onStart();

        // Enclose everything in a try block so we can just
        // use the default view if anything goes wrong.
        try {
            // Get the font size value from SharedPreferences.
            SharedPreferences settings =
                getSharedPreferences("com.example.YourAppPackage", Context.MODE_PRIVATE);

            // Get the font size option.  We use "FONT_SIZE" as the key.
            // Make sure to use this key when you set the value in SharedPreferences.
            // We specify "Medium" as the default value, if it does not exist.
            String fontSizePref = settings.getString("FONT_SIZE", "Medium");

            // Select the proper theme ID.
            // These will correspond to your theme names as defined in themes.xml.
            int themeID = R.style.FontSizeMedium;
            if (fontSizePref == "Small") {
                themeID = R.style.FontSizeSmall;
            }
            else if (fontSizePref == "Large") {
                themeID = R.style.FontSizeLarge;
            }

            // Set the theme for the activity.
            setTheme(themeID);
        }
        catch (Exception ex) {
            ex.printStackTrace();
        }
    } 
```

最后，通过扩展 BaseActivity 创建活动，如下所示：

```
public class AppActivity extends BaseActivity{
} 
```

由于大多数应用程序的活动数量比继承 TextView 的 TextView 或小部件少得多。随着复杂性的增加，这将呈指数级增长，因此该解决方案需要的代码更改更少。

感谢[雷·库内尔](http://raykuhnell.com/2013/07/09/dynamic-font-size-and-other-styles-in-an-android-app/)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2018-04-07T18:09:26.253

您可以使用基本活动配置向上/向下缩放应用程序的文本大小，使所有活动成为固有的基本活动。

比例正常值为 1.0，2.0 会使字体大小加倍，0.50 会使字体大小减半。

```
public  void adjustFontScale( Configuration configuration,float scale) {

    configuration.fontScale = scale;
    DisplayMetrics metrics = getResources().getDisplayMetrics();
    WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);
    wm.getDefaultDisplay().getMetrics(metrics);
    metrics.scaledDensity = configuration.fontScale * metrics.density;
    getBaseContext().getResources().updateConfiguration(configuration, metrics);

}

@Override
protected void onCreate(@Nullable Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    adjustFontScale( getResources().getConfiguration());
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-03T10:12:54.077

可能的解决方案是您**创建一个****扩展 TextView**的基类，并将此文本视图类用作编辑文本。希望您在第一个屏幕上询问尺寸。在任何情况下，您都可以在基类中设置文本大小。这将解决您的问题。

就像你在包 com.example 中创建这个类，类名是 BaseTextView，然后在 xml 文件中而不是`<TextView .../>` 你会写`<com.example.BaseTextView ... />`

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T08:06:20.873

创建一个函数并将微调器大小值传递为

```
void setSize(int size){
...
setTextSize()
// on All of the layout texts and views on screen

} 
```

在屏幕上的所有视图和布局文本上调用 setTextSize()。

[在此处](http://developer.android.com/reference/android/widget/TextView.html#setTextSize%28float%29)查看文档

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-04T18:11:51.797

为了缩放所有组件的字体大小（意味着整个应用程序），有一种很好的方法可以通过多个设备实现和测试。此解决方案可应用于以下情况；静态声明***dp***大小单位（默认为 android sp），缩放到所需的字体大小等。

该解决方案类似于**Usama Saeed US**给出的[答案](https://stackoverflow.com/a/49710418/5031257)，但将涵盖所有错误案例。

 **声明将缩放字体大小的静态 util 方法。

```
 //LocaleConfigurationUtil.class
    public static Context adjustFontSize(Context context){
        Configuration configuration = context.getResources().getConfiguration();
        // This will apply to all text like -> Your given text size * fontScale
        configuration.fontScale = 1.0f;

        return context.createConfigurationContext(configuration);
    } 
```

在您的所有活动中，覆盖 attachBaseContext 并在 onCreate 中调用 util 方法。

```
 @Override
    protected void attachBaseContext(Context newBase) {
        super.attachBaseContext(LocaleConfigurationUtil.adjustFontSize(newBase));
    }

   @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        LocaleConfigurationUtil.adjustFontSize(this);
    } 
```

如果您使用的是片段，则覆盖 onAttach 方法

```
@Override
public void onAttach(Context context) {
super.onAttach(LocaleConfigurationUtil.adjustFontSize(context));
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-08-19T02:30:54.297

我不确定它是否有帮助。但是有一种叫做“SSP”的东西——文本的可缩放大小单位。将此添加到您的构建 gradle

```
implementation 'com.intuit.ssp:ssp-android:1.0.6' 
```

这要使用

```
android:textSize="@dimen/_22ssp" 
```

[https://github.com/intuit/ssp](https://github.com/intuit/ssp)****

# php - jquery 对话框，在同一个对话框窗口中打开一个链接

> ID：12704217
> 
> 赞同：0
> 
> 时间：2012-10-03T08:00:11.543
> 
> 标签：php, jquery, dialog

我在对话框模式窗口中有一个链接。我需要这个链接显示在它所在的同一个 DIALOG MODAL 窗口中。

这是我的链接的样子，它在一个 php 文件中形成，然后传递给 html 模板：

```
$link = "<a href='mypage.php?f=dosomething&param1=".$var1."&param2=".$var2."' id='dosomething' >Need to open this link in the same dialog window</a>"; 
```

这是我的jQuery代码：

```
 $("#dosomething").dialog(
            { autoOpen:false,
              modal:true,
              overlay: { opacity: 0.8, background: "black" },
              width:850,
              height:650,
              title:"A title",
              draggable:true,
              hide:"slow",
              closeOnEscape: true
            }); 
            $("#dosomething").dialog("open"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:10:54.583

如果您想使用 jquery 在同一个对话框中打开链接的 href，请使用以下内容：

你的链接：

```
$link = "<a href='mypage.php?f=dosomething&param1=".$var1."&param2=".$var2."' id='dosomething' onclick="loadurl();" >Need to open this link in the same dialog window</a>"; 
```

和jQuery代码：

```
$(document).ready(function() {
    $("#dosomething").click(function() {
        $("#yourcontainer").load($(this).attr("href"));
        return false;
    });
}); 
```

这会将结果打印到 ID 为“yourcontainer”的容器中。因此，这意味着如果您的对话框的 id 为“mydialog”，则代码行看起来像 $("#mydialog").... 而不是 $("#yourcontainer")....

但是，如果您只想在同一窗口中打开链接，请使用 a 属性

```
target="_self" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:03:52.750

尝试添加属性

```
 target="_self" 
```

到您的超链接

```
<a href src="http://google.com" target="_self">Open google in same window<a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:04:16.103

```
$link = "<a href='mypage.php?f=dosomething&param1=".$var1."&param2=".$var2."' id='dosomething' onclick="loadurl();" >Need to open this link in the same dialog window</a>";

$(document).ready(function(){

   function loadurl(){
   $("html").load("mypage.php?f=dosomething&param1=".$var1."&param2=".$var2."")
   }

}) 
```

# c# - 如何从后面的 c# 代码打开 jQuery UI 对话框？

> ID：12704225
> 
> 赞同：3
> 
> 时间：2012-10-03T08:00:36.613
> 
> 标签：c#, asp.net, jquery-ui-dialog

我正在尝试从我的 ASP.NET c# 代码背后打开一个 jQuery UI 对话框。我已经创建了下面的代码，但我无法让它工作，并且不确定如何调试问题。我该如何解决这个问题？

我的 JavaScript：

```
<script>
$(function () {
    $("#dialog_info").dialog("destroy");
    $("#dialog_info").dialog({
        autoOpen: false,
        modal: true,
        buttons: {
            Ok: function () {
                $(this).dialog("close");
            }
        }
    });
});
function show() {
    $("#dialog_info").dialog("open");
    return false;
}
</script> 
```

我的 HTML：

```
<body>
    <form id="form1" runat="server">
        <div>
            <div id="dialog_info" title="information">
                <asp:Literal ID="ltMessage" runat="server" Text="success"></asp:Literal>
            </div>
            <a href="#" id="message">open</a>
            <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />
        </div>
    </form>
</body> 
```

我的代码背后：

```
protected void Button1_Click(object sender, EventArgs e)
{
    ltMessage.Text = DateTime.Now.ToString();
    StringBuilder sb = new StringBuilder();
    //sb.Append("<script> ");
    sb.Append("show();");
    //sb.Append("</script>");
    ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "key", sb.ToString(), true);
} 
```

修改代码

```
function showMessage() {

        $(function () {
            $("#dialog_info").dialog("open");
        });
        return false;
    } 
```

现在效果很好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:06:11.140

尝试使用[ScriptManager.RegisterStartupScript](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.registerstartupscript.aspx)方法

请参阅[RegisterStartupScript 和 RegisterClientScriptBlock 之间的区别？](https://stackoverflow.com/questions/666519/difference-between-registerstartupscript-and-registerclientscriptblock)

# php - Mysqli 绑定参数 - 变量数与参数数不匹配

> ID：12704227
> 
> 赞同：3
> 
> 时间：2012-10-03T08:00:38.650
> 
> 标签：php, database, mysqli, sqlbindparameter

我不明白为什么会出现错误：“变量数与准备好的语句中的参数数不匹配”。

我的代码如下所示：

```
$DB['con'] = new mysqli($$DB['host'],$DB['user'],$DB['pass'],$DB['base']);

$stmt=$DB['con']->prepare("insert into points(iduser,puncte,nume,email,telefon,ultimulpost)values('?',?,'?','?','?',(SELECT CURDATE()))");
$stmt->bind_param('sisss',$idm,$mynumber,$nume,$email,$tel);
$stmt->execute(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T08:19:05.540

问题出在这一行：

```
$stmt=$DB['con']->prepare("insert into points(iduser,puncte,nume,email,telefon,ultimulpost)values('?',?,'?','?','?',(SELECT CURDATE()))"); 
```

`?`您的错误是您在占位符周围加上引号。这意味着它们被解释为文字字符串`?`，而不是需要填充的占位符。因此，您实际上只有一个占位符，所以当您发送五个时，它会告诉您您的号码错误。

引号是不必要的。的全部意义`'sisss'`在于说“这些值是字符串”，因此您不需要使用引号来表示相同的内容。

以下应该有效：

```
$stmt=$DB['con']->prepare("insert into points(iduser,puncte,nume,email,telefon,ultimulpost)values(?,?,?,?,?,(SELECT CURDATE()))"); 
```

# iphone - nivo 滑块图像未出现在 ipod/iphone/ipad 上

> ID：12704229
> 
> 赞同：0
> 
> 时间：2012-10-03T08:00:42.520
> 
> 标签：iphone, ios, ipad, codeigniter, nivo-slider

我在我的 codeigniter 应用程序中使用 nivo 滑块，它在所有浏览器中都可以正常工作，但图像没有出现在 ipad/ipod n iphone 上。

我在 html 标记中包含了 1.4.2.js `<head>`，所有图像都是 .png 类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:54:43.083

Nivo Slider 与 iPhone/iPad 本身不兼容 - 请参阅[Gilbert 的评论](http://nivo.dev7studios.com/2012/05/30/the-nivo-slider-is-responsive/#comment-736)。但是，MODJI 似乎对此进行了[修补](http://modji.ca/blog/blog/nivo-slider-jquerymobile/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T15:54:42.357

如果您将 Superfish 菜单与 Nivo Slider 一起使用，请参阅我在[http://tech.beacondeacon.com/nivo-superfish-issues.html上的文章以获得解决方案。](http://tech.beacondeacon.com/nivo-superfish-issues.html)基本上，您必须禁用 superfish.js 并且只使用 hoverIntent.js 并禁用 $(document).ready() 函数中的 superfish() 函数调用，并将其更改为使用 $(window).load() 。

# php - php爬虫（爬取单个网站）

> ID：12704237
> 
> 赞同：0
> 
> 时间：2012-10-03T08:01:21.633
> 
> 标签：php, parsing, html-parsing, web-crawler

我正在做爬虫项目，我需要你的帮助，这是我的第一个项目。任务是从“http://justdial.com”获取数据。例如，我想获取城市名称（班加罗尔）、类别（酒店）、酒店名称、地址和电话号码。

我已经编写了一个代码来从它的“id”中获取标签内容，就像我从中获取地址一样：

```
<?php

$url="http://www.justdial.com/Bangalore/hotels";  
$original_file = file_get_contents("$url");
$stripped_file = strip_tags($original_file, "<div>");

$newlines="'<div class=\"logoDesc\">(.*?)</div>'si";
$newlines=preg_replace('#<div(?:[^>]*)>.</div>#u','',$newlines);

preg_match_all("$newlines", $stripped_file, $matches);

//DEBUGGING

  //$matches[0] now contains the complete A tags; ex: <a href="link">text</a>
  //$matches[1] now contains only the HREFs in the A tags; ex: link

  header("Content-type: text/plain"); //Set the content type to plain text so the print below is easy to read!
 $path= ($matches);

 print_r($path); //View the array to see if it worked
?> 
```

现在的问题是，我想将标签与内容分开并将其存储在数据库中。从数据库到excel表。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:12:47.157

您不应该使用正则表达式来解析 HTML。您应该使用类似[DomDocument](http://www.php.net/manual/en/intro.dom.php)的东西。使用中的小例子：

```
<?php
   $str = '<h1>T1</h1>Lorem ipsum.<h1>T2</h1>The quick red fox...<h1>T3</h1>... jumps over the lazy brown FROG';
   $DOM = new DOMDocument;
   $DOM->loadHTML($str);

   //get all H1
   $items = $DOM->getElementsByTagName('h1');

   //display all H1 text
   for ($i = 0; $i < $items->length; $i++)
        echo $items->item($i)->nodeValue . "<br/>";
?> 
```

# xslt - 问题

> ID：12704238
> 
> 赞同：2
> 
> 时间：2012-10-03T08:01:31.480
> 
> 标签：xslt

> **可能重复：**
> [评论中的输出元素](https://stackoverflow.com/questions/3932152/output-element-in-comments)

我正在尝试以这种方式在 xsl 转换期间注释节点

```
Doesn't work:
<xsl:comment><xsl:copy-of select="."/></xsl:comment> 
```

但我得到的是一个空评论，但删除评论元素我得到了正确的节点

```
This is correct:
<xsl:copy-of select="."/> 
```

为什么元素的副本在评论一中不起作用？有解决方案还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:16:03.943

同意伊恩，这是重复的。

无论如何，您可能想要的是...

```
<xsl:comment><xsl:value-of select="."/></xsl:comment> 
```

原因？评论不能包含子节点。它们是具有文本属性（评论内容）的原子节点类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:12:15.703

没有一种直接的方法可以在评论中生成元素的文本表示。

**这是一个简短的，使用内联扩展函数（在 C# 中）：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:msxsl="urn:schemas-microsoft-com:xslt"
     xmlns:my="my:my" exclude-result-prefixes="msxsl my">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>

     <xsl:template match="/*">
      <xsl:comment>
        <xsl:value-of select="my:stringize(someElement)"/>
      </xsl:comment>
     </xsl:template>

     <msxsl:script language="c#" implements-prefix="my">
      public string stringize(XPathNavigator doc)
      {
       return doc.OuterXml;
      }
     </msxsl:script>
</xsl:stylesheet> 
```

**在以下 XML 文档上应用此转换时（使用 .NET XslCompiledTransform XSLT 处理器）**：

```
<t>
 <someElement>someValue</someElement>
</t> 
```

**产生了想要的正确结果**：

```
<!--<someElement>someValue</someElement>--> 
```

**在纯 XSLT 中有不同的方法来做同样的事情**- 例如，请参阅**[XPath Visualizer](http://www.huttar.net/dimitre/XPV/TopXML-XPV.html)**的 XSLT 代码，以获得将 XML 文档表示为 Html 的美观表示（我 12 年前编写的开源产品，但我不是在这里以任何方式做广告）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:17:59.463

你不能使用`xsl:comment`和使用`xsl:text`DOE。

**XML 输入**

```
<doc>
    <foo>
        <bar attr="test"/>
    </foo>
</doc> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="doc">
        <xsl:copy>
            <xsl:text disable-output-escaping="yes">&lt;!--</xsl:text>
            <xsl:copy-of select="foo"/>
            <xsl:text disable-output-escaping="yes">--></xsl:text>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<doc><!--<foo>
      <bar attr="test"/>
   </foo>--></doc> 
```

# node.js - 在 Windows 7 中创建安装节点 js 的快捷方式时回滚

> ID：12704241
> 
> 赞同：3
> 
> 时间：2012-10-03T08:01:42.523
> 
> 标签：node.js, installation

我正在尝试在我的 Windows 7 机器上安装 nodejs 服务器。我已经从官方网站下载了最新版本的节点（node-v0.8.11-x64.msi）并尝试安装它。

当该过程到达“创建快捷方式”时，我正在回滚安装并出现错误。

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T09:06:37.467

我只是在安装过程中删除了“创建在线文档的快捷方式”选项。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T16:05:46.007

这两个步骤为我解决了问题。

1.  将 msi 复制到硬盘驱动器上的本地目录。您的“下载”文件夹可能位于漫游活动目录环境中的网络共享上，因此它并不是真正的本地文件夹。（我相信这个真正的 msi 本地副本很重要，因为它似乎将 msi 文件的所有者链重新建立为属于您，而不是互联网。）

2.  打开管理命令提示符。切换到您将 msi 复制到的目录，然后运行该文件。（类似于 C:\LocalDir> **node-v0.10.35-x64.msi**）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T05:47:44.683

错误的来源可能会有所不同，最好的检测方法是创建[详细的安装日志](http://support.microsoft.com/kb/223300)。一旦你有了它，你可以搜索“ **value 3** ”，通常这个字符串会在安装过程中标准/自定义操作失败时出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-05T12:20:45.643

尝试这个：

> msiexec /i node-v0.12.0-x86.msi /passive ADDLOCAL=ALL REMOVE=Docume ntationShortcuts ALLUSERS=1

# iphone - 在哪里放置drawrect方法？

> ID：12704242
> 
> 赞同：0
> 
> 时间：2012-10-03T08:01:51.900
> 
> 标签：iphone, ios5, drawrect

我正在[参考 raywenderlich](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)的教程。所有的东西都可以完美地工作，但是在我自定义文本字段的最后一个地方，教程说“用以下代码替换对 super 的调用”

```
- (void)drawRect:(CGRect)rect
{
    UIImage *textFieldBackground = [[UIImage imageNamed:@"text_field_teal.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(15.0, 5.0, 15.0, 5.0)];
    [textFieldBackground drawInRect:[self bounds]];
} 
```

但它没有说把它放在哪里，我试图把它放在 appdelegate 和 viewcontroller 中，但它显示错误“'detailviewcontoller' 没有可见的@interface 声明选择器边界”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:05:22.897

iOS 程序员在这里做的正常事情是子类化 " `UITextView`"，这就是教程所做的。如果您查看 Ray 教程中包含的项目，您会看到一个“自定义视图”组，在里面您会看到一个“ `CustomTextField`”类。

![自定义文本字段在这里](../Images/ad0817022dc1bca641805fc897e3ac7f.png)

在那里你会找到 " `drawRect`" 方法来更新。

# android - 默认网页视图不起作用

> ID：12704248
> 
> 赞同：0
> 
> 时间：2012-10-03T08:02:21.667
> 
> 标签：android, android-webview

嗨，我正在使用 listview onclick load webview 这工作正常。

我的问题现在是在 onclick listview 之前我使用默认网页加载到 webview 这不起作用...

这是我的代码

```
webview=(WebView)app.findViewById(R.id.webView);
webview.loadUrl("http://google.com");//this is my default webview before onclick the list view 
```

上述默认网址未加载...

```
ListView listView = (ListView) menu.findViewById(R.id.list);
initListView(listView);
public  void initListView(final ListView listView) {
    // By using setAdpater method in listview we an add string array in list.
    ArrayList<ItemDetails> image_details = GetSearchResults();
    listView.setAdapter(new ItemListBaseAdapter(this, image_details));

    listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
            Object o = listView.getItemAtPosition(position);
            ItemDetails obj_itemDetails = (ItemDetails)o;
            String msg =obj_itemDetails.getName();
              try{
            if(null!=webview){
                webview.removeAllViews();
              }
            if(msg.equalsIgnoreCase("a")){
                 webview.loadUrl("http://example.com");
            }else if(msg.equalsIgnoreCase("b")){
                 webview.loadUrl("http://example.com");
            }else if(msg.equalsIgnoreCase("c")){
                 webview.loadUrl("http://example.com");
            }else if(msg.equalsIgnoreCase("d")){
                 webview.loadUrl("http://e.com");
            }else if(msg.equalsIgnoreCase("e")){
                 webview.loadUrl("http://f.com");
            }else{
                 webview.loadUrl("http://example.com");
            }

          }catch (Exception e) {
            Toast.makeText(HorzScrollWithListMenu.this,e.toString(),Toast.LENGTH_LONG).show();
            e.printStackTrace(System.out);

            }

        }  
    });

} 
```

我的 onCreate 代码部分

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    LayoutInflater inflater = LayoutInflater.from(this);
    scrollView = (MyHorizontalScrollView)   inflater.inflate(R.layout.horz_scroll_with_list_menu, null);
    setContentView(scrollView);

    menu = inflater.inflate(R.layout.horz_scroll_menu, null);
    app = inflater.inflate(R.layout.horz_scroll_app, null);
    webview=(WebView)app.findViewById(R.id.webView);
    webview.loadUrl("http://google.com"); 
```

请让我知道我的代码出了什么问题。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:10:10.747

我想这会对你有所帮助

```
webView = (WebView) app.findViewById(R.id.webView1);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.loadUrl("http://www.google.com") 
```

也不要忘记在清单文件中添加此权限，

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

或者使用**WebViewClient**。

```
web.setWebViewClient(new myWebClient());
web.getSettings().setJavaScriptEnabled(true);
web.loadUrl("http://www.google.com");

 public class myWebClient extends WebViewClient
    {
     @Override
     public void onPageStarted(WebView view, String url, Bitmap favicon) {
      // TODO Auto-generated method stub
      super.onPageStarted(view, url, favicon);
     }

     @Override
     public boolean shouldOverrideUrlLoading(WebView view, String url) {
      // TODO Auto-generated method stub

      view.loadUrl(url);
      return true;

     }

     @Override
     public void onPageFinished(WebView view, String url) {
      // TODO Auto-generated method stub
      super.onPageFinished(view, url);

      progressBar.setVisibility(View.GONE);
     }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:12:17.920

尝试在 webView 上设置这些属性

```
webview.clearCache(true);
webview.getSettings().setJavaScriptEnabled(true); 
```

并尝试按照本教程正确基本了解 Web 视图在 [此处工作](http://saigeethamn.blogspot.in/2011/11/basic-webview.html)

# python - 将包含单个数字的列表转换为整数

> ID：12704252
> 
> 赞同：1
> 
> 时间：2012-10-03T08:02:40.920
> 
> 标签：python

我有一行编程，它给了我一个看起来像这样的列表：

```
a=[4] 
```

我想将该列表中的单个数字添加到之前计算的另一个数字，例如

```
y=8-2
Answer=a+y
print Answer 
```

但是，它不允许我这样做，说列表和整数不兼容

我想知道怎么改

```
a=[4] 
```

进入

```
a=4 
```

或者换句话说，将包含单个数字的列表 a 转换为整数

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:03:35.323

只需将号码与`a[0]`.

```
a = a[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:04:50.050

```
num = a[0] 
```

这将从列表中获取第一个元素`a`并分配给 num.. 因此在您的情况下`num`将包含一个`integer`值`4`..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:05:50.433

除了@BrenBarn 的回答，请注意，如果您确定您拥有的“编程线”类似于函数调用：

```
a = SomeFunction() 
```

返回列表，您可以在那里进行索引，以便列表永远不会存储在`a`：

```
a = SomeFunction()[0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T08:10:21.270

要将包含单个数字的列表转换为整数，请执行以下操作：

```
a=[4.5] # imagine you have number, but it's of type float
if len(a) == 1:
    aa=int(a[0]) #

print aa
4 
```

请注意，这将排除包含多个元素的列表。如果您总是想访问第一个元素，只需按照其他答案中的建议按索引进行。

# c++ - Visual Studio 显示 SEH 异常的错误位置

> ID：12704257
> 
> 赞同：3
> 
> 时间：2012-10-03T08:03:13.370
> 
> 标签：c++, exception, location, seh

我有一个简单的代码：

```
#include "stdafx.h"
#include <iostream>

void foo()
{
    int* p = 0;
    *p = 0;
}

int _tmain(int argc, _TCHAR* argv[])
{
    std::cout << "123";
    foo();
    std::cout << "456";
    return 0;
} 
```

默认调试 Visual Studio 设置。调试 -> 异常 -> 全部重置。

在调试配置中运行此代码后的结果 - 我在 exc.exe 中的 0x77d315de (ntdll.dll) 处遇到异常未处理的异常：0xC0000005：访问冲突写入位置 0x00000000。VS 打开文件**ostream**，指针停留在这里：

```
_Ostr.setstate(_State);
return (_Ostr);
} <-- 
```

堆栈跟踪：

```
 ntdll.dll!_ZwRaiseException@12()  + 0x12 bytes  
    ntdll.dll!_ZwRaiseException@12()  + 0x12 bytes  
    exc.exe!std::operator<<<std::char_traits<char> >(std::basic_ostream<char,std::char_traits<char> > & _Ostr={...}, const char * _Val=0x00000000)  Line 808 + 0xf bytes    C++
>   exc.exe!wmain(int argc=0x00000001, wchar_t * * argv=0x00164810)  Line 14    C++
    exc.exe!__tmainCRTStartup()  Line 552 + 0x19 bytes  C
    exc.exe!wmainCRTStartup()  Line 371 C
    kernel32.dll!@BaseThreadInitThunk@12()  + 0x12 bytes    
    ntdll.dll!___RtlUserThreadStart@8()  + 0x27 bytes   
    ntdll.dll!__RtlUserThreadStart@8()  + 0x1b bytes 
```

如果我在 Debug -> Win32 Exceptions -> C0000005 Visual Studio 中设置复选框“Thrown”，则在正确的位置停止。

我的同事拥有相同的 Visual Studio、Windows 7 x64 和相同的硬件。但是他的 VS 停在正确的地方，没有改变异常设置。

我的 Visual Studio 设置有什么问题？

最大的问题 - .net 异常的行为也不典型。此时在调试模式下，VS 几乎忽略了所有异常。看起来我有全局异常过滤器并且所有异常都得到了处理。程序可以在发布模式下运行并显示对话框 Catel mvvm 工具包向我发送关于未注册模型和文件系统异常的异常。

任何想法，我如何在不设置“抛出”复选框的情况下修复它。

**[编辑]**

好吧，我发现了一些奇怪的东西。更改 Debug -> Exceptions 后，我在异常处停止。但是，如果我按继续，我将转到 ostream 文件。看起来 VS 调试器默认按“继续”。

**[编辑]**

```
First-chance exception at 0x012514cf in exc.exe: 0xC0000005: Access violation writing location 0x00000000.
Unhandled exception at 0x773515de (ntdll.dll) in exc.exe: 0xC0000005: Access violation writing location 0x00000000. 
```

这就是我在输出中看到的。只有一个例外。看起来异常以某种方式处理，然后在其他地方抛出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:14:31.523

通常的嫌疑人：`.ncb`文件`.pdb`或其他任何内容已损坏。尝试擦除所有本地文件（*解决方案*`.suo`名称、*解决方案*`.ncb`名称、*项目名称.anything*`.user`以及中间和输出目录中的所有内容）并检查它是否有帮助。

# jquery - 带有回调的自定义插件

> ID：12704262
> 
> 赞同：0
> 
> 时间：2012-10-03T08:03:23.403
> 
> 标签：jquery, handsontable

我对删除可操作网格中的行有特定要求。我想使用 RemoveRow 插件。但是删除行后我需要一个回调函数，有什么办法可以做到这一点。我愿意对插件进行必要的更改（我认为这是必需的）。

我对上下文菜单选项不太满意。（我也考虑过完整的自定义插件的选项，但是我觉得 RemoveRow 插件很容易完成所有的事情（UI 的东西），我想要除了回调）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:17:58.453

我通过更改插件来解决问题。检查[粘贴箱 url](http://pastebin.com/NMye1YV3)。

# facebook - 如何计算新消息的数量 facebook API？

> ID：12704266
> 
> 赞同：3
> 
> 时间：2012-10-03T08:03:33.943
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我想计算我的 Facebook 帐户中的新消息数量。我查看了 facebook [mail_box 文件夹](https://developers.facebook.com/docs/reference/fql/mailbox_folder/)并在图形资源管理器中使用了以下查询。

```
SELECT name, unread_count, total_count FROM mailbox_folder WHERE folder_id = 0 and viewer_id = me() 
```

我得到的输出是：

```
{
  "data": [
    {
      "name": "inbox", 
      "unread_count": 14, 
      "total_count": 65
    }
  ]
} 
```

但是，我没有找到与 count 相关的任何查询`new messages`。那么，如何获得新消息的数量。

`new messages`我的意思是[这张照片](http://i.imgur.com/l0o0w.png)的`red highlighted pearls` 中心文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:22:12.340

很好，你包括那张照片，因为否则问题就不清楚了。消息的通知珍珠*不*显示未读消息的数量。通知珍珠告诉您有*新消息*。一旦你点击珍珠，即使你没有阅读信息，它也会重置。这只是我的记忆，所以你应该设置一些[测试帐户](http://developers.facebook.com/docs/test_users/)来验证行为。Facebook 让设置测试帐户变得非常容易，方法是[编辑您的应用程序](https://developers.facebook.com/apps/)，然后单击角色->测试用户->创建。通过打开两个浏览器（例如 Chrome 和 Firefox），您可以作为两个单独的用户登录并来回发送消息以验证行为。

如果您想查看 14 条未读消息的计数来自何处，请执行以下操作：

1.  访问[http://www.facebook.com/messages/](http://www.facebook.com/messages/)
2.  在“搜索消息”框中放置`is:unread`（或通过单击放大镜使用下拉菜单）。
3.  您应该会看到所有未读邮件的列表。对你来说应该是 14 岁。

据我所知，没有办法在通知珍珠中突出显示新消息的数量，但是 API 很大，也许其他人知道。

最接近的可能是[通知](http://developers.facebook.com/docs/reference/fql/notification/)FQL，但据我所知，它不包括邮箱通知。您应该自行验证这一点，因为我目前没有时间在测试帐户之间发送新消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:23:50.973

如果您正在制作一个应该通知新消息的应用程序，您可以存储如上返回的计数。然后，如果该数字大于您知道有新消息的最后一个值，则接下来您拨打电话，然后您可以进行进一步的 API 操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T21:33:40.087

实际上，有一种超级简单的方法可以查看您有多少条消息。只需先访问 m.facebook.com/messages。我知道这是 facebook 的移动版本，但你可以在电脑上进行。单击您正在与之交谈的人，您想了解其消息的数量。右键单击“查看旧消息”，然后单击“在新窗口中打开”或“在新选项卡中打开”；这并不重要。之后查看您的地址栏，您会在地址栏中的某处看到类似 0&forward=0&start= 的内容。然后在该部分之后，您应该会看到一个数字。那是您对话中的消息数量。作为奖励，如果您想查看前 200 条左右的消息，请将该数字更改为低于 200 的任何数字，您将看到您与某人的第一条消息。

# c++ - (C++) 错误：';' 之前的预期主表达式 令牌

> ID：12704270
> 
> 赞同：2
> 
> 时间：2012-10-03T08:03:49.170
> 
> 标签：c++, compiler-errors

我的编译器抱怨并抛出关于此代码的错误（见标题）：

```
int toLevel(int xp)
{
    int points = 0;
    int level = 1;
    for(; level < MAX_LEVEL; level++)
    {
        points += floor(level + 300*pow(2, level/7.));
        if(xp < points)
        {
            break;
        }
    }
    return level;
} 
```

错误就`for(; level < MAX_LEVEL; level++)`行了，完整的错误日志看起来像（这是第 50 行，供参考）：

```
In function 'int toLevel(int)':
50    error: expected primary-expression before ';' token
50    error: expected ')' before ';' token
50    error: expected ';' before ')' token
48    warning: unused variable 'points'
59    error: expected '}' at end of input
59    warning: no return statement in function returning non-void
=== Build finished: 4 errors, 2 warnings === 
```

有任何想法吗？我假设我没有在某个地方关闭括号，但我找不到它。我怀疑可能是这种情况，这是该文件的完整代码：

```
#include <iostream>
#include <fstream>
#include <sstream>
#include <vector>
#include <math.h>

using namespace std;

#define MAX_LEVEL 99;

#include "main.h"

int main()
{
    Player player;
    loadSkills(player);
    if(!loadGame(player))
    {
        cout << "It looks like its your first time playing." << endl;
        cout << "What's your name?: ";
        cin >> player.name;
    }
    cout << "Hello " << player.name << ", you're level " << toLevel(player.xp) << endl;
    //TODO
    return 0;
}

//Returns true if loaded, false otherwise
bool loadGame(Player player)
{
    //TODO
    return false;
}

void loadSkills(Player player)
{
    vector<Skill> skills;
    skills.push_back((Skill){"Melee"});
    skills.push_back((Skill){"Woodcutting"});
    skills.push_back((Skill){"Firemaking"});
    skills.push_back((Skill){"Fishing"});
    skills.push_back((Skill){"Cooking"});
    player.skills = skills;
}

int toLevel(int xp)
{
    int points = 0;
    int level = 1;
    for(; level < MAX_LEVEL; level++)
    {
        points += floor(level + 300*pow(2, level/7.));
        if(xp < points)
        {
            break;
        }
    }
    return level;
} 
```

以及它引用的 main.h：

```
#ifndef MAIN_H_INCLUDED
#define MAIN_H_INCLUDED

vector<string> &split(const string &s, char delim, vector<string> &elems) {
    stringstream ss(s);
    string item;
    while(getline(ss, item, delim)) {
        elems.push_back(item);
    }
    return elems;
}

//Ease of use method
vector<string> split(const string &s, char delim) {
    vector<string> elems;
    return split(s, delim, elems);
}

struct Skill
{
    string name;    //The name of the skill
};

struct Player
{
    int health;             //The player's current health
    int xp;                 //The player's xp
    int maxhealth;          //The player's max health
    vector<Skill> skills;   //The skills available to the player
    string name;            //The player's name
};

class InteractOption
{
    public:
    void doAction();//What should happen
    bool succeeded; //If true, they get the xp for it.
    int xp;         //Amount of xp gained for doing
    Skill skill;    //Skill to gain xp in
    string name;    //"Chop"/"Attack"/etc
};

class WorldObject
{
    public:
    InteractOption interactOption;  //The option for interacting with the object.
                                    //Can be null (i.e. can't interact)
    string name;                    //"Tree"/"Goblin"/etc
};

bool loadGame(Player);
void loadSkills(Player);
int toLevel(int);

#endif // MAIN_H_INCLUDED 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T08:06:46.053

`MAX_LEVEL`从宏中删除尾随分号：

```
#define MAX_LEVEL 99; 
```

当宏在`for`循环中被替换时，它变成：

```
for(; level < 99;; level++) 
```

这是非法的语法。

# web-services - 在 Eclipse Apache ODE 中调用 BPEL Web 服务

> ID：12704275
> 
> 赞同：1
> 
> 时间：2012-10-03T08:04:08.047
> 
> 标签：web-services, bpel, apache-ode

首先，我对 BPEL 非常陌生。我有一个托管在 Tomcat 7.0 中的 Web 服务和一个部署在 Apache ODE 中的 BPEL。我已经使用 Eclipse JUNO 完成了所有这些工作。现在，当我无法从 Eclipse 调用 Web 服务时，Apache ODE 无法在 Tomcat 实例运行时启动。此外，我无法在 Tomcat 的 Apache ODE 和 BPEL 流程中托管 Web 服务。现在如何调用 Web 服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:56:32.703

如果我正确理解您的问题，那么两个 Tomcat 实例都在同一个端口上运行，这显然不起作用。有两种选择：

*   使用具有不同端口的不同 tomcat 配置
*   使用共享的 tomcat 实例并将 ODE 与您的 Web 服务一起部署。Eclipse 仍然可以管理这个 Tomcat 实例。

# django - 如果输入 2 位日期，则确定要保存的 4 位日期

> ID：12704277
> 
> 赞同：1
> 
> 时间：2012-10-03T08:04:11.690
> 
> 标签：django, validation, date, localization, formatting

我在`formats.py`我的 django 项目中添加了一个文件来设置日期格式以在整个应用程序中显示 dd/mm/yyyy。

但是，人们也必须能够以 d/m/yy 的形式输入日期。如果您要输入 1/1/49，django 会将其保存为 01/01/2049。它如何决定我的意思是 2049 年而不是 1949 年？

我希望能够控制这一点，而不必为 Django 似乎已经做过的事情写出验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:32:03.757

这实际上是 Python 和 Django 继承的 POSIX 和 ISO C 标准：值 69-99 映射到 1969-1999，值 0-68 映射到 2000-2068。除非您自己编写，否则它是不可配置的。

# java - 面临 HtmlUnitDriver 的问题

> ID：12704282
> 
> 赞同：2
> 
> 时间：2012-10-03T08:04:23.107
> 
> 标签：java, selenium, htmlunit

我正在使用 HtmlUnitDriver 打开一个链接。这是我的代码：

```
HtmlUnitDriver webDriver = new HtmlUnitDriver();
webDriver.get("some url here"); 
```

但我得到以下异常。

```
Caused by: com.gargoylesoftware.htmlunit.ScriptException: Wrapped com.gargoylesoftware.htmlunit.ScriptException: Wrapped com.gargoylesoftware.htmlunit.ScriptException: TypeError: Cannot find function aa in object [object Object]. (https://apis.google.com/_/apps-static/_/js/gapi/plusone/rt=j/ver=use0LfpKko4.en_US./sv=1/am=!CVDWKorrwvOYBs7wcQ/d=1/rs=AItRSTMxl0wiQySaT0IYW5gyOkdlVL9A6A/cb=gapi.loaded_0#3)
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitContextAction.run(JavaScriptEngine.java:595)
    at net.sourceforge.htmlunit.corejs.javascript.Context.call(Context.java:537)
    at net.sourceforge.htmlunit.corejs.javascript.ContextFactory.call(ContextFactory.java:538)
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.execute(JavaScriptEngine.java:499)
    at com.gargoylesoftware.htmlunit.html.HtmlPage.loadExternalJavaScriptFile(HtmlPage.java:973)
    at com.gargoylesoftware.htmlunit.html.HtmlScript.executeScriptIfNeeded(HtmlScript.java:349)
    at com.gargoylesoftware.htmlunit.html.HtmlScript$1.execute(HtmlScript.java:230)
    at com.gargoylesoftware.htmlunit.html.HtmlScript.onAllChildrenAddedToPage(HtmlScript.java:240)
    at com.gargoylesoftware.htmlunit.html.HTMLParser$HtmlUnitDOMBuilder.endElement(HTMLParser.java:598)
    at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source)
    at com.gargoylesoftware.htmlunit.html.HTMLParser$HtmlUnitDOMBuilder.endElement(HTMLParser.java:556)
    at org.cyberneko.html.HTMLTagBalancer.callEndElement(HTMLTagBalancer.java:1142)
    at org.cyberneko.html.HTMLTagBalancer.endElement(HTMLTagBalancer.java:1044)
    at org.cyberneko.html.filters.DefaultFilter.endElement(DefaultFilter.java:206)
    at org.cyberneko.html.filters.NamespaceBinder.endElement(NamespaceBinder.java:329)
    at org.cyberneko.html.HTMLScanner$ContentScanner.scanEndElement(HTMLScanner.java:3018)
    at org.cyberneko.html.HTMLScanner$ContentScanner.scan(HTMLScanner.java:2005)
    at org.cyberneko.html.HTMLScanner.scanDocument(HTMLScanner.java:908)
    at org.cyberneko.html.HTMLConfiguration.parse(HTMLConfiguration.java:499)
    at org.cyberneko.html.HTMLConfiguration.parse(HTMLConfiguration.java:452)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at com.gargoylesoftware.htmlunit.html.HTMLParser$HtmlUnitDOMBuilder.parse(HTMLParser.java:789)
    at com.gargoylesoftware.htmlunit.html.HTMLParser.parse(HTMLParser.java:225)
    at com.gargoylesoftware.htmlunit.html.HTMLParser.parseHtml(HTMLParser.java:179)
    at com.gargoylesoftware.htmlunit.DefaultPageCreator.createHtmlPage(DefaultPageCreator.java:221)
    at com.gargoylesoftware.htmlunit.DefaultPageCreator.createPage(DefaultPageCreator.java:106)
    at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseInto(WebClient.java:433)
    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:311)
    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:373)
    at org.openqa.selenium.htmlunit.HtmlUnitDriver.get(HtmlUnitDriver.java:346)
    ... 15 more 
```

请指导我，如何解决这个问题。我正在使用 selenium-java-2.24.1.jar，webdriver-common.jar。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T09:17:42.667

异常表示驱动程序在加载页面时遇到 Javascript 函数问题，默认情况下 HTMLUNITDriver 禁用 Javascript。

您需要明确启用它，然后尝试导航 URL 试试这个，它应该可以工作。

```
HtmlUnitDriver driver = new HtmlUnitDriver(true); 
```

True --> 这里提到启用 Java 脚本。

此外，HtmlUnitDriver 使用的 javascript 引擎与其他浏览器不同。查看此链接了解更多详细信息。

[http://seleniumhq.org/docs/03_webdriver.html#htmlunit-driver](http://seleniumhq.org/docs/03_webdriver.html#htmlunit-driver)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T06:19:07.887

> 驱动程序 = 新 HtmlUnitDriver(true);

再添加一行 -

> java.util.logging.Logger.getLogger("com.gargoylesoftware").setLevel(Level.OFF);

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-18T08:33:21.283

你可能想试试这个。

它对我来说很好。这是您可能希望对 Java 进行细微更改的 Scala 代码。

```
val  driver = new HtmlUnitDriver(BrowserVersion.FIREFOX_3_6)
driver.setJavascriptEnabled(true)
driver.get(your_url)
driver.getTitle() must contain("Welcome") 
```

# c# - 通过 Entity Framework 4.1 中的用户定义函数进行热切加载

> ID：12704286
> 
> 赞同：0
> 
> 时间：2012-10-03T08:04:34.573
> 
> 标签：c#, entity-framework, eager-loading, user-defined-functions

我正在使用实体框架 4.1。Fluent API 将我的模型映射到预定义的数据库。有没有办法通过存储过程或用户定义的函数来使用复杂属性的急切初始化？例如：

```
public class Car
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public Model Model {get;set}
    public int Year {get;set;}
    public ICollection<Part> Parts { get; set; }
} 
```

假设我在数据库中有一个用户定义的函数，它将 Car Id 作为输入并返回零件列表。有没有机会使用它来制作 EF？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:08:57.723

看看[如何：调用用户定义的函数](http://msdn.microsoft.com/en-us/library/vstudio/dd490951%28v=vs.100%29.aspx)

# objective-c - iphone上的弹性碰撞

> ID：12704287
> 
> 赞同：2
> 
> 时间：2012-10-03T08:04:38.313
> 
> 标签：objective-c, ios4, opengl-es, cocos2d-iphone, game-physics

我想学弹性碰撞。像[这个](http://upload.wikimedia.org/wikipedia/commons/2/2c/Elastischer_sto%C3%9F_2D.gif)动画，首先，iphone游戏开发应该学什么？有什么好的分步教程可以开始吗？

![这是类似于我想开始构建游戏的动画](../Images/59bf3afda891e994185a50586a952045.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T08:24:56.873

对于这种碰撞，您可以使用 box2d，它是一个很好的物理引擎，可以处理这些事情。你只需要设置它。我想，你可以在 google 上找到很多关于使用 box2d 和 cocos2d 的文章

# c++ - 识别给定函数中的不同变量

> ID：12704291
> 
> 赞同：0
> 
> 时间：2012-10-03T08:04:59.553
> 
> 标签：c++

给定一个数学表达式说`x1x2`或`x1^2+x2^2`

我需要编写一个 C++ 程序，该程序从最终用户那里获取表达式并在其中替换`x1`，`x2`并使用一些数组值，例如`x1`with`a[1]`等。

如何做到这一点请帮助我。

这是我第一次使用 cpp。

```
int main()
{     
    float i;
    char* exp[20]; 
    derivtype g(derivtype x);
    cin>>i;
    cin>>exp;

    for(i=1:i<=i:i++)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:12:14.743

嗯，这是编译器的领域。

您需要的是诸如 lex/yacc 工具之类的工具来识别这些数学表达式的语法。从那里您可以自定义。

您可以从一些示例代码或教程开始，例如[Lex & Yacc Tutorial](http://epaperpress.com/lexandyacc/)

# php - PHP 函数索引？

> ID：12704292
> 
> 赞同：0
> 
> 时间：2012-10-03T08:05:02.290
> 
> 标签：php, function, indexing

我有以下代码：

```
$data = unserialize(db::select_xf_session_blob($_COOKIE['xf_session']));
$user_id = $data['user_id']; 
```

必须声明一个变量以便我可以获取它的索引似乎是一种浪费。

这似乎是一个更优雅的解决方案：

```
$user_id = unserialize(db::select_xf_session_blob($_COOKIE['xf_session']))['user_id']; 
```

但这当然是无效的。

我的问题是，有没有更优雅的方式来编写我的第一个代码示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:06:56.053

在 PHP 5.4 中你[可以](http://php.net/manual/en/language.types.array.php#example-101)做第二个。但是在以前的版本中，您必须执行第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:08:35.043

您可以使用虚拟函数：

```
function sub(array $arr, $key) {
    return $arr[$key];
} 
```

像这样：

```
$user_id = sub(unserialize(db::select_xf_session_blob($_COOKIE['xf_session'])), 'user_id'); 
```

或者，您可以升级到支持下标表达式的最新版本的 PHP。

# iphone - 将动画同步到 sqlite 中的序列

> ID：12704293
> 
> 赞同：1
> 
> 时间：2012-10-03T08:05:04.100
> 
> 标签：iphone, sqlite

当应用程序启动时，一系列颜色会根据数据库服务器中的模式闪烁。

当另一个用户启动应用程序时，它必须与其他打开的应用程序上的正确颜色同步。根据我的研究，它说使用 sqlite 数据库同步到服务器并在第一个应用程序打开时获取时间戳。

下载到sqlite数据库并计算启动当前颜色的时间可能会很慢，那么还有其他方法可以获取当前颜色吗？有可能吗？

# django - Django 1.4：如何使用文档

> ID：12704294
> 
> 赞同：0
> 
> 时间：2012-10-03T08:05:05.457
> 
> 标签：django

我是新手。在我的教科书中有这个例子：

```
from django.contrib import admin
from django.db import models

class BlogPost(models.Model):
    title = models.CharField(max_length = 150)
    body = models.TextField()
    timestamp = models.DateTimeField()

class BlogPostAdmin(admin.ModelAdmin):
    list_display = ('title', 'timestamp')

admin.site.register(BlogPost, BlogPostAdmin) 
```

当我开始使用它时，我发现我可以在这里同时使用元组和列表（list_display = ('title', 'timestamp') 或 list_display = ['title', 'timestamp']）。

你能帮我在文档中找到为什么这是可能的问题的答案吗？这可能有助于我详细说明使用文档的一些技能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:14:31.057

我不应该认为它会在 Django 文档中提及。这是微不足道的 Python：在大多数情况下，列表和元组是等价的，因为代码只是期待一个可迭代的，这两者都是。

这可能是您遗漏的一点 - 它与鸭子类型有关，只要对象公开了预期的功能（在这种情况下是可迭代的），您就不应该关心它的确切类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:16:29.200

在您只阅读序列的地方，列表等效于元组。比较`dir([])`并`dir(())`发现它们有很多共同点，但是元组缺少可以改变它的所有内容。[http://ideone.com/iHd0h](http://ideone.com/iHd0h)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:20:16.593

我认为该代码有效，因为在 Python 中，元组和列表使用的索引访问器是相同的。这不是特定于 Django 的，它适用于所有 Python 代码。

```
# a is a list
a = ['a1', 'a2', 'a3']
# while b is a tuple
b = ('b1', 'b2', 'b3',)
c = a
print(c[1])
c= b
print(c[1]) 
```

它将打印：

```
a2
b2 
```

这称为[鸭子打字](http://en.wikipedia.org/wiki/Duck_typing)。

*当我看到一只像鸭子一样走路、像鸭子一样游泳、像鸭子一样叫的鸟时，我称那只鸟为鸭子。*

# javascript - 如何从javascript中的字符串中剥离（或正则表达式匹配）unicode字符？

> ID：12704296
> 
> 赞同：1
> 
> 时间：2012-10-03T08:05:14.403
> 
> 标签：javascript, unicode

我正在使用用户脚本修改的网站有一些我想修改的文本。文本中似乎有一个 unicode 字符。当我在屏幕上查看它甚至使用 jQuery 将其提取到变量时，它*看起来*像这样：

`2 others`

但是，如果我用相同的文本创建自己的变量然后进行比较，它们就会出现错误。所以我将网站的文本复制/粘贴到 vim 中，它看起来像这样：

`2<200e> others`

最好我能说这是空格（？）的Unicode字符。我希望能够将此字符串与正则表达式匹配，例如：

`^(\d+(?:,\d+)*)\s+(.*)`

但是在这个带有嵌入的 unicode 字符的字符串上它失败了。（它适用于我自己键入的“其他 2 个”文本）。

有什么方法可以从文本中删除这个 unicode 吗？我尝试了以下方法，但无济于事：

`text.replace('\u200e\','')`

`text.replace('200e','')`

`text.replace('\%20','')`

`text.replace('\%u200e','')`

或者，或者，我可以调整我的正则表达式以匹配“2 个其他人”或与嵌入的 200e unicode char 相同的文本吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T08:12:03.317

尝试改用实际的正则表达式。

```
text = text.replace(/\u200e/g, ''); 
```

* * *

> 我可以调整我的正则表达式以匹配“2 个其他人”或与嵌入的 200e unicode char 相同的文本吗？

您也可以更改`\s`正则表达式中的 以包括 U+200E ，例如

```
^(\d+(?:,\d+)*)[\s\u200e]+(.*) 
```

# lwuit - 如何在 LWUIT 中结合？

> ID：12704299
> 
> 赞同：0
> 
> 时间：2012-10-03T08:05:26.683
> 
> 标签：lwuit

我已将此代码用于`textFiled.PASSWORD`结合 `TextField.NUMERIC`

```
txtpwd.setConstraint(TextField.PASSWORD | TextField.NUMERIC); 
```

当我在模拟器中运行时，我可以输入 string 。但我只是输入了 NUMERIC 。

我去这个链接并找到结合约束！

[如何组合约束](http://www.eli.sdsu.edu/courses/fall04/cs683/j2me/docs/api/midp/javax/microedition/lcdui/TextField.html#NUMERIC)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:01:53.123

首先。您放置的链接是 lcdui API，请注意它。

这是`TextField`您需要的 API

[http://lwuit.java.net/javadocs/com/sun/lwuit/TextField.html](http://lwuit.java.net/javadocs/com/sun/lwuit/TextField.html)

好的，看到这个[http://lwuit.java.net/javadocs/com/sun/lwuit/TextArea.html#setConstraint(int](http://lwuit.java.net/javadocs/com/sun/lwuit/TextArea.html#setConstraint(int) )

我认为你必须使用这条线：

```
textField.setConstraint(TextField.NUMERIC | TextField.PASSWORD); 
```

恰好相反。

# python - 从 pyodbc execute() 语句返回列名

> ID：12704305
> 
> 赞同：72
> 
> 时间：2012-10-03T08:05:48.863
> 
> 标签：python, pandas, pyodbc

```
from pandas import DataFrame
import pyodbc

cnxn = pyodbc.connect(databasez)
cursor.execute("""SELECT ID, NAME AS Nickname, ADDRESS AS Residence FROM tablez""")
DF = DataFrame(cursor.fetchall()) 
```

这很好填充我的熊猫数据框。但是我怎么得到

```
DF.columns = ['ID', 'Nickname', 'Residence'] 
```

直接从*光标*？该信息是否存储在*游标*中？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-10-03T11:23:18.300

您可以从光标描述中获取列：

`columns = [column[0] for column in cursor.description]`

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-07-05T14:52:48.283

最近的 pandas 具有更高级别的[`read_sql`](http://pandas.pydata.org/pandas-docs/stable/io.html#sql-queries)功能，可以为您执行此操作

```
import pyodbc
import pandas as pd

cnxn = pyodbc.connect(databasez)
DF = pd.read_sql_query("SELECT ID, NAME AS Nickname, ADDRESS AS Residence FROM tablez", cnxn) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-07-30T16:14:31.853

如果您遇到[Matti John](https://stackoverflow.com/users/1452002/matti-john)`NoneType`提供的代码的错误，请确保在从数据库中检索数据*后*进行调用。一个例子：`cursor.description`

 *```
cursor = cnxn.cursor()
cursor.execute("SELECT * FROM my_table")
columns = [column[0] for column in cursor.description] 
```

这为我修好了。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-03T23:38:18.220

在 pandas 的上下文中改进了先前的答案，我发现这完全符合我的预期：

```
DF.columns = DataFrame(np.matrix(cursor.description))[0] 
```*

# c++ - 标准堆栈性能问题

> ID：12704314
> 
> 赞同：-3
> 
> 时间：2012-10-03T08:06:42.980
> 
> 标签：c++, windows, performance, stack

最近我试图做一些性能基准测试，比较`std::stack<int, std::vector<int>>`我自己简单的堆栈实现（使用预分配内存）。现在我遇到了一些奇怪的行为。

**我想问的第一件事**是堆栈基准代码中的这一行：

```
//  std::vector<int> magicVector(10); 
```

当我取消注释这条线时，性能提高了大约 17%（基准时间从 6.5 秒下降到 5.4 秒）。但是该行应该对程序的其余部分没有影响，因为它不会修改任何其他成员。此外，它是 int 的向量还是 double 的向量都没有关系......

**我想问**的第二件事是我的堆栈实现和`std::stack`. 有人告诉我这`std::stack`应该和我的堆栈一样快，但结果显示我的“FastStack”快两倍。

**结果**（未注释的性能增加线）：
stack 5.38979
stack 5.34406
stack 5.32404
stack 5.30519
FastStack 2.59635
FastStack 2.59204
FastStack 2.59713
FastStack 2.64814

这些结果来自带有 /O2、/Ot、/Ob2 和其他默认优化的 VS2010 的发布版本。我的 CPU 是 Intel i5 3570k，默认时钟（一个线程 3.6 GHz）。

我将所有代码放在一个文件中，以便任何人都可以轻松测试它。

```
#define _SECURE_SCL 0

#include <iostream>
#include <vector>
#include <stack>
#include <Windows.h>

using namespace std;

//---------------------------------------------------------------------------------
//---------------------------------------------------------------------------------
//  Purpose:    High Resolution Timer
//---------------------------------------------------------------------------------

class HRTimer
{
public:
    HRTimer();
    double GetFrequency(void);
    void Start(void) ;
    double Stop(void);
    double GetTime();

private:
    LARGE_INTEGER start;
    LARGE_INTEGER stop;
    double frequency;
};

HRTimer::HRTimer()
{
    frequency = this->GetFrequency();
}

double HRTimer::GetFrequency(void)
{
    LARGE_INTEGER proc_freq;
    if (!::QueryPerformanceFrequency(&proc_freq))
        return -1;
    return proc_freq.QuadPart;
}

void HRTimer::Start(void)
{
    DWORD_PTR oldmask = ::SetThreadAffinityMask(::GetCurrentThread(), 0);
    ::QueryPerformanceCounter(&start);
    ::SetThreadAffinityMask(::GetCurrentThread(), oldmask);
}

double HRTimer::Stop(void)
{
    DWORD_PTR oldmask = ::SetThreadAffinityMask(::GetCurrentThread(), 0);
    ::QueryPerformanceCounter(&stop);
    ::SetThreadAffinityMask(::GetCurrentThread(), oldmask);
    return ((stop.QuadPart - start.QuadPart) / frequency);
} 

double HRTimer::GetTime()
{
    LARGE_INTEGER time;
    ::QueryPerformanceCounter(&time);
    return time.QuadPart / frequency;
}

//---------------------------------------------------------------------------------
//---------------------------------------------------------------------------------
//  Purpose:    Should be faster than std::stack
//---------------------------------------------------------------------------------

template <class T>

class FastStack
{
public:
    T* st;
    int allocationSize;
    int lastIndex;

public:
    FastStack(int stackSize);
    ~FastStack();

    inline void resize(int newSize);
    inline void push(T x);
    inline void pop();
    inline T getAndRemove();
    inline T getLast();
    inline void clear();
};

template <class T>
FastStack<T>::FastStack( int stackSize )
{
    st = NULL;
    this->allocationSize = stackSize;
    st = new T[stackSize];
    lastIndex = -1;
}

template <class T>
FastStack<T>::~FastStack()
{
    delete [] st;
}

template <class T>
void FastStack<T>::clear()
{
    lastIndex = -1;
}

template <class T>
T FastStack<T>::getLast()
{
    return st[lastIndex];
}

template <class T>
T FastStack<T>::getAndRemove()
{
    return st[lastIndex--];
}

template <class T>
void FastStack<T>::pop()
{
    --lastIndex;
}

template <class T>
void FastStack<T>::push( T x )
{
    st[++lastIndex] = x;
}

template <class T>
void FastStack<T>::resize( int newSize )
{
    if (st != NULL)
        delete [] st;
    st = new T[newSize];
}
//---------------------------------------------------------------------------------
//---------------------------------------------------------------------------------
//---------------------------------------------------------------------------------
//  Purpose:    Benchmark of std::stack and FastStack
//---------------------------------------------------------------------------------

int main(int argc, char *argv[])
{
#if 1
    for (int it = 0; it < 4; it++)
    {
        std::stack<int, std::vector<int>> bStack;
        int x;

        for (int i = 0; i < 100; i++)   // after this two loops, bStack's capacity will be 141 so there will be no more reallocating
            bStack.push(i);
        for (int i = 0; i < 100; i++)
            bStack.pop();
    //  std::vector<int> magicVector(10);           // when you uncomment this line, performance will magically rise about 18%

        HRTimer timer;
        timer.Start();

        for (int i = 0; i < 2000000000; i++)
        {
            bStack.push(i);
            x = bStack.top();
            if (i % 100 == 0 && i != 0)
                for (int j = 0; j < 100; j++)
                    bStack.pop();
        }

        double totalTime = timer.Stop();
        cout << "stack " << totalTime << endl;
    }
#endif

    //------------------------------------------------------------------------------------

#if 1
    for (int it = 0; it < 4; it++)
    {
        FastStack<int> fstack(200);
        int x;

        HRTimer timer;
        timer.Start();

        for (int i = 0; i < 2000000000; i++)
        {
            fstack.push(i);
            x = fstack.getLast();
            if (i % 100 == 0 && i != 0)
                for (int j = 0; j < 100; j++)
                    fstack.pop();
        }

        double totalTime = timer.Stop();
        cout << "FastStack " << totalTime << endl;
    }
#endif

    cout << "Done";
    cin.get();
    return 0;
} 
```

.
**编辑：**由于每个人都在谈论我的堆栈实现非常糟糕，我想把事情做好。我在几分钟内创建了该堆栈，并且只实现了我当前需要的几个功能。它从来都不是要替代 std::stack :) 或保存以在所有情况下使用。唯一的目标是达到最大速度和正确的结果。对这个误会很抱歉……我只想知道几个答案……</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T10:37:56.423

你的方法实现都被破坏了。忽略复制构造函数和其他丢失的操作，`push`如果您推送太多，您将调用 UB，并且您`resize`显然已损坏，因为它不会复制以前的数据*并且*它不是异常安全的*，并且*您的推送不是异常安全的*并且*您调用了太多副本*并且*您`getAndRemove`的不是异常安全的*，并且*您不会破坏弹出的元素*，*也不会正确构造新元素，只分配它们*并且*您在创建时不必要地默认构造，并且可能还有更多我还没有找到。

基本上，您的课程在任何可以想象的方面都极其不安全，会`T`立即破坏用户的数据，调用所有错误的函数，并且在任何地方抛出异常的那一刻都会在角落里哭泣。

这是一大堆坏事，而且它“更快”的事实`std::stack`完全无关紧要，因为你所证明的是，如果你不必满足要求，你可以随心所欲地去，我们都已经知道了。

从根本上说，正如 sbi 所说，您显然不了解 的语义`std::stack`，也不了解异常安全等重要的 C++ 方面，您的代码无法正常工作的方式是使其执行速度更快的原因。你还有很长的路要走，我的朋友。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T12:57:42.370

与`std::stack`using相反`std::vector`，您的堆栈在空间不足时不会重新分配，而只会炸毁地球。然而，分配会极大地消耗性能，因此跳过它肯定会提高性能。

[但是，在您的位置，我会抓住一个漂浮在网络上的](http://www.google.com/#q=%22static_vector%22)成熟`static_vector`实现，并将其放入. 这样，您就可以跳过所有需要性能的动态内存处理，但是您有一个有效的堆栈实现，其中包含一个用于在下面进行内存处理的容器，这*很*可能比您想出的要好得多。`std::stack``std::vector`

 ** * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T12:30:16.670

许多评论（甚至答案）都集中在您的实施中的风险上。然而问题仍然存在。

正如下面直接展示的那样，纠正感知到的代码缺陷**不会**改变任何重要的性能。

这是 OP 的代码修改为 (A) 安全，(B) 支持与 相同的操作`std::stack`，以及 (C) 也为 保留缓冲区空间`std::stack`，以便为那些错误地认为这些东西对表现：

```
#define _SECURE_SCL 0
#define _SCL_SECURE_NO_WARNINGS

#include <algorithm>        // std::swap
#include <iostream>
#include <vector>
#include <stack>
#include <stddef.h>         // ptrdiff_t
#include <type_traits>      // std::is_pod
using namespace std;

#undef UNICODE
#define UNICODE
#include <Windows.h>

typedef ptrdiff_t   Size;
typedef Size        Index;

template< class Type, class Container >
void reserve( Size const newBufSize, std::stack< Type, Container >& st )
{
    struct Access: std::stack< Type, Container >
    {
        static Container& container( std::stack< Type, Container >& st )
        {
            return st.*&Access::c;
        }
    };

    Access::container( st ).reserve( newBufSize );
}

class HighResolutionTimer
{
public:
    HighResolutionTimer();
    double GetFrequency() const;
    void Start() ;
    double Stop();
    double GetTime() const;

private:
    LARGE_INTEGER start;
    LARGE_INTEGER stop;
    double frequency;
};

HighResolutionTimer::HighResolutionTimer()
{
    frequency = GetFrequency();
}

double HighResolutionTimer::GetFrequency() const
{
    LARGE_INTEGER proc_freq;
    if (!::QueryPerformanceFrequency(&proc_freq))
        return -1;
    return static_cast< double >( proc_freq.QuadPart );
}

void HighResolutionTimer::Start()
{
    DWORD_PTR oldmask = ::SetThreadAffinityMask(::GetCurrentThread(), 0);
    ::QueryPerformanceCounter(&start);
    ::SetThreadAffinityMask(::GetCurrentThread(), oldmask);
}

double HighResolutionTimer::Stop()
{
    DWORD_PTR oldmask = ::SetThreadAffinityMask(::GetCurrentThread(), 0);
    ::QueryPerformanceCounter(&stop);
    ::SetThreadAffinityMask(::GetCurrentThread(), oldmask);
    return ((stop.QuadPart - start.QuadPart) / frequency);
} 

double HighResolutionTimer::GetTime() const
{
    LARGE_INTEGER time;
    ::QueryPerformanceCounter(&time);
    return time.QuadPart / frequency;
}

template< class Type, bool elemTypeIsPOD = !!std::is_pod< Type >::value >
class FastStack;

template< class Type >
class FastStack< Type, true >
{
private:
    Type*   st_;
    Index   lastIndex_;
    Size    capacity_;

public:
    Size const size() const { return lastIndex_ + 1; }
    Size const capacity() const { return capacity_; }

    void reserve( Size const newCapacity )
    {
        if( newCapacity > capacity_ )
        {
            FastStack< Type >( *this, newCapacity ).swapWith( *this );
        }
    }

    void push( Type const& x )
    {
        if( size() == capacity() )
        {
            reserve( 2*capacity() );
        }
        st_[++lastIndex_] = x;
    }

    void pop()
    {
        --lastIndex_;
    }

    Type top() const
    {
        return st_[lastIndex_];
    }

    void swapWith( FastStack& other ) throw()
    {
        using std::swap;
        swap( st_, other.st_ );
        swap( lastIndex_, other.lastIndex_ );
        swap( capacity_, other.capacity_ );
    }

    void operator=( FastStack other )
    {
        other.swapWith( *this );
    }

    ~FastStack()
    {
        delete[] st_;
    }

    FastStack( Size const aCapacity = 0 )
        : st_( new Type[aCapacity] )
        , capacity_( aCapacity )
    {
        lastIndex_ = -1;
    }

    FastStack( FastStack const& other, int const newBufSize = -1 )
    {
        capacity_ = (newBufSize < other.size()? other.size(): newBufSize);
        st_ = new Type[capacity_];
        lastIndex_ = other.lastIndex_;
        copy( other.st_, other.st_ + other.size(), st_ );   // Can't throw for POD.
    }
};

template< class Type >
void reserve( Size const newCapacity, FastStack< Type >& st )
{
    st.reserve( newCapacity );
}

template< class StackType >
void test( char const* const description )
{
    for( int it = 0; it < 4; ++it )
    {
        StackType st;
        reserve( 200, st );

        // after this two loops, st's capacity will be 141 so there will be no more reallocating
        for( int i = 0; i < 100; ++i ) { st.push( i ); }
        for( int i = 0; i < 100; ++i ) { st.pop(); }

        // when you uncomment this line, std::stack performance will magically rise about 18%
        // std::vector<int> magicVector(10);

        HighResolutionTimer timer;
        timer.Start();

        for( Index i = 0; i < 1000000000; ++i )
        {
            st.push( i );
            (void) st.top();
            if( i % 100 == 0 && i != 0 )
            {
                for( int j = 0; j < 100; ++j ) { st.pop(); }
            }
        }

        double const totalTime = timer.Stop();
        wcout << description << ": "  << totalTime << endl;
    }
}

int main()
{
    typedef stack< Index, vector< Index > > SStack;
    typedef FastStack< Index >              FStack;

    test< SStack >( "std::stack" );
    test< FStack >( "FastStack" );

    cout << "Done";
} 
```

这台慢如糖蜜的三星 RC530 笔记本电脑的结果：

```
[D:\dev\test\so\12704314]
> 一个
标准：：堆栈：3.21319
标准：：堆栈：3.16456
标准：：堆栈：3.23298
标准：：堆栈：3.20854
快速堆栈：1.97636
快速堆栈：1.97958
快速堆栈：2.12977
快速堆栈：2.13507
完毕
[D:\dev\test\so\12704314]
> _

```

对于 Visual C++ 也是如此。

现在让我们看一个典型`std::vector::push_back`的`std::stack<T, std::vector<T>>::push`. ):

```
void push_back(const value_type& _Val)
    {   // insert element at end
    if (_Inside(_STD addressof(_Val)))
        {   // push back an element
        size_type _Idx = _STD addressof(_Val) - this->_Myfirst;
        if (this->_Mylast == this->_Myend)
            _Reserve(1);
        _Orphan_range(this->_Mylast, this->_Mylast);
        this->_Getal().construct(this->_Mylast,
            this->_Myfirst[_Idx]);
        ++this->_Mylast;
        }
    else
        {   // push back a non-element
        if (this->_Mylast == this->_Myend)
            _Reserve(1);
        _Orphan_range(this->_Mylast, this->_Mylast);
        this->_Getal().construct(this->_Mylast,
            _Val);
        ++this->_Mylast;
        }
    } 
```

我*怀疑*衡量的低效率至少部分在于那里发生的所有事情，*也许*这也是自动生成的安全检查的问题。

对于调试版本，`std::stack`性能非常糟糕，以至于我放弃了等待任何结果。

* * *

**编辑**：在下面 Xeo 的评论之后，我更新`push`了在缓冲区重新分配的情况下检查“自推”，将其分解为一个单独的函数：

```
void push( Type const& x )
{
    if( size() == capacity() )
    {
        reserveAndPush( x );
    }
    st_[++lastIndex_] = x;
} 
```

奇怪的是，虽然在这个测试`reserveAndPush`中*从未调用*过，但它会影响性能——由于代码大小不适合缓存？

```
[D:\dev\test\so\12704314]
> 一个
标准：：堆栈：3.21623
标准：：堆栈：3.30501
标准：：堆栈：3.24337
标准：：堆栈：3.27711
快速堆栈：2.52791
快速堆栈：2.44621
快速堆栈：2.44759
快速堆栈：2.47287
完毕
[D:\dev\test\so\12704314]
> _

```

* * *

**编辑 2**： DeadMG 表明代码一定是错误的。我相信问题是缺失的`return`，加上计算新大小的表达式（两次零仍然为零）。他还指出我忘了展示`reserveAndPush`。应该：

```
void reserveAndPush( Type const& x )
{
    Type const xVal = x;
    reserve( capacity_ == 0? 1 : 2*capacity_ );
    push( xVal );
}

void push( Type const& x )
{
    if( size() == capacity() )
    {
        return reserveAndPush( x );    // <-- The crucial "return".
    }
    st_[++lastIndex_] = x;
} 
```*

# objective-c - 带有方法调用的内存管理

> ID：12704319
> 
> 赞同：2
> 
> 时间：2012-10-03T08:06:53.983
> 
> 标签：objective-c, ios, memory-management, memory-leaks

我有一个关于 Objective-c 中的内存管理和方法调用的非常简单的问题。

想象一下我有：

```
- (void)someFunction
{
    NSMutableArray *array = [NSMutableArray arrayWithObjects:@"Value 1", nil];
    [self someOtherFunction:array];
}

- (void)someOtherFunction:(NSMutableArray *)array
{
    // Should I retain array here?
    [array addObject:@"Value 2"];
    // And then release ?
} 
```

这是一个简单的示例，但假设我们有 10 个具有相同对象参数的方法调用。什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:15:18.347

如果您是所有的皮带和大括号，或者正在用线程做很多奇怪的事情，那么您可能应该在每个方法调用中保留/释放。事实上，这正是 ARC 在幕后为您所做的。（据我所知，它没有记录，并且可能会因版本而异。）

而且，当然，按照您的建议保留/释放不会造成任何伤害。在实践中，它不太可能增加很多开销。

说了这么多：大多数人*不*添加保留/释放。如果您的代码都在主线程上运行，那么在执行方法时您的对象不太可能被释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:14:07.837

（这解释了禁用 ARC 时的引用计数）

使用便捷构造函数时，返回的对象作为自动释放对象返回。

自动释放意味着在当前运行循环结束时，对象的引用计数将减少 1。如果从创建到此时对象没有保留，则意味着它将被释放。

这意味着在您的代码中您不需要添加任何保留/释放调用，因为该对象将一直存在到您的`someFunction`方法结束。

如果在您的`someFunction`方法结束时您需要保持数组存在，例如在实例变量中，您可以使用以下方法保留它：

```
_myInstanceVar = [array retain]; // don't forget to release it in dealloc method 
```

# java - Java - 使用数组的有界队列

> ID：12704325
> 
> 赞同：1
> 
> 时间：2012-10-03T08:07:09.487
> 
> 标签：java

我被要求创建一个有界队列类，其条件如下：

仅使用原始类型，实现有界队列来存储整数。数据结构应该针对算法运行时间、内存使用和内存吞吐量进行优化。不应导入和/或使用任何外部库。解决方案应以提供以下功能的一类交付：

*   构造函数 - 类应该提供一种创建对象的方法，该方法需要一个整数来设置队列的大小。
*   enqueue - 如果队列未满，函数应该取一个整数并将其存储在队列中。该函数应正确处理队列已满的情况。
*   dequeue - 如果当前存储在队列中，函数应该返回一个整数。该函数应正确处理队列为空的情况。

我写了这门课，但我想通过让别人测试它来寻求帮助，看看它是否能正常工作。我写了一个小的主类来测试它，一切似乎都在工作，但我希望在提交之前用另一双眼睛看看它。是为了实习。先感谢您。

```
public class Queue<INT>
{

    int size;
    int spacesLeft;
    int place= 0;
    int[] Q;

    public Queue(int size)
    {
        this.size = size;
        spacesLeft = size;
        Q = new int[size];
    }

    //enqueue - function should take an integer and store it in the queue if the queue isn't full.
    //The function should properly handle the case where the queue is already full
    public void enque(int newNumber) throws Exception
    {
        if(place <= size)
        {
            Q[place] = newNumber;
            place++;
            spacesLeft--;

        }
        else
            throw new Exception();
    }

    //dequeue - function should return an integer if one is currently stored in the queue. 
    //The function should properly handle the case where the queue is empty.
    public int deque() throws Exception
    {
        int dequeNum;

        if(spacesLeft == size)
            throw new Exception();
        else
        {
            dequeNum = Q[0];
            spacesLeft++;
        }

        int[] tempAry = new int[size];  
        for (int i=0; i < Q.length; i++)
        {  
            if(i < size-1)
            {
                tempAry[i] = Q[i+1]; // put in destination  
            }

        }

        Q = tempAry;

        for(int i = 0; i < Q.length; i++)
        {
            System.out.println("value in Q"+Q[i]);

        }

        return dequeNum;

    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T08:33:52.197

这是根据您的规范的实现。

![队列](../Images/2d62a24313d2302cc2c9cb7d9feb958b.png)

这是相同的源代码。

```
import java.util.Arrays;

public class Queue {

    private int enqueueIndex;// Separate index to ensure enqueue happens at the end
    private int dequeueIndex;// Separate index to ensure dequeue happens at the
                            // start
    private int[] items;
    private int count;
    // Lazy to add javadocs please provide
    public Queue(int size) {
        enqueueIndex = 0;
        dequeueIndex = 0;
        items = new int[size];
    }
    // Lazy to add javadocs please provide
    public void enqueue(int newNumber) {
        if (count == items.length)
            throw new IllegalStateException();
        items[enqueueIndex] = newNumber;
        enqueueIndex = ++enqueueIndex == items.length ? 0 : enqueueIndex;
        ++count;
    }
    // Lazy to add javadocs please provide
    public int dequeue() {
        if (count == 0)
            throw new IllegalStateException();
        int item = items[dequeueIndex];
        items[dequeueIndex] = 0;
        dequeueIndex = ++dequeueIndex == items.length ? 0 : dequeueIndex;
        --count;
        return item;
    }

    @Override
    public String toString() {
        return Arrays.toString(items);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T08:13:47.173

在 enque 函数中

```
 if(place <= size)
    {
        Q[place] = newNumber;
        place++;
        spacesLeft--;

    } 
```

当 place == size --> 你会得到一个索引超出范围的异常时会发生什么。

在出队函数中，您总是返回 Q[0] 并且每次分配新内存并将旧数组移动到新数组！！！！这真的会很慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T08:21:03.723

检查这个。它使用数组作为占位符。

[http://c-madeeasy.blogspot.com/2011/08/queue-using-array-in-java-complete.html](http://c-madeeasy.blogspot.com/2011/08/queue-using-array-in-java-complete.html)

你也检查一下。这个使用链表作为占位符。

[http://algs4.cs.princeton.edu/13stacks/Queue.java.html](http://algs4.cs.princeton.edu/13stacks/Queue.java.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-27T14:17:34.393

```
package com.test;
public class QueueUsingArray {

    int sizeofArr; 
    int[] Q;
    int frontindex = -1;
    int rearindex = -1;
    int cnt=0;

    public QueueUsingArray(int sizeOfArr) {
        // TODO Auto-generated constructor stub
        this.sizeofArr = sizeOfArr;
        this.Q = new int[sizeOfArr];
    }

    public boolean isFull()
    {
      if (cnt == sizeofArr)
          return true;
          else
              return false;

    }
    public void enQueue(int Number) throws Exception
    {
        if(!isFull() ) /*Q is not Full and rearindx is not on last element of Array*/
        {  
            if(cnt == 0)
            {
                frontindex++;  
            }

            if (rearindex+1 != sizeofArr)
            {
                 Q[++rearindex] = Number;
            }
            else 
            {    rearindex= -1;
                 Q[++rearindex] = Number;   
            }
            cnt++;

        }

        else 
            throw new Exception("Queue Overflow");

    }

    public int deQueue() throws Exception
    {
        int x;
        if(cnt != 0)
        {
           cnt--;
           if (frontindex !=sizeofArr)
           {
                x = Q[frontindex];
                Q[frontindex] = -1;
                frontindex++;
                return x;
           }    
           else
           {   frontindex = 0;
                x = Q[0];
                Q[0] = -1;     
                return x;

           }   
        }  
        else
         throw new Exception("Queue Underflow");

    }
    public int size()
    {
        return cnt;

    }
      /*printQ method is not optimized to print Q from front to rear, and it just for verification     
       purpose */
    public void printQ()
    {
        System.out.println("current Q:");
        for(int i=0;i<Q.length;i++)
        {
            System.out.println(Q[i]);
        }

    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
      try{
        QueueUsingArray q = new QueueUsingArray(5);

        //System.out.println("Is QueuFull ?" + q.isFull());
        System.out.println("CurrentQueue Size is:" + q.size());
        //System.out.println(q.deQueue()); 

        q.enQueue(1);
        q.enQueue(2);
        q.enQueue(3);
        q.enQueue(4);
        q.enQueue(5);
        q.printQ();
        System.out.println("CurrentQueue Size is:" + q.size());
        System.out.println("Is QueuFull ?" + q.isFull());

        System.out.println(q.deQueue());
        System.out.println(q.deQueue());
        System.out.println(q.deQueue());
        System.out.println("CurrentQueue Size is:" + q.size());

        q.enQueue(6);
        q.enQueue(7);
        q.enQueue(8);
        q.printQ();
        System.out.println(q.deQueue());
        q.enQueue(9);
        q.printQ();
        System.out.println("CurrentQueue Size is:" + q.size());

         }catch(Exception e)
           {
              e.printStackTrace();  
           }
  }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-27T18:42:26.307

刚刚尝试使用 LinkedList 实现 Queue ...如果有任何帮助，请随时重新/修改以使其高效。

```
package com.test;

public class QueueUsingLinkeList {

public class Node{
    Object data; 
    Node next;

    public Node(Object data)
    {
        this.data = data;
        this.next = null;
    }

}

int cnt=0;
Node front=null;
Node rear=null;

public void enQueue(int number)
{
    Node n = new Node(number);

   if(front== null && rear==null)
       front = rear = n ; 
   else
   {
       rear.next = n;
       rear = rear.next;
   }
   cnt++;

}

public Object deQueue() throws Exception
{
    Node temp;
    if(front == null && rear == null)
    {   throw new Exception("Queue underflow, can not DeQueue any element");

    }
    else if (front== rear && front.next == null)
    {
         temp = front;
         front = rear = null;
         return temp.data;
    }
    else
    {
        temp = front;
        front = front.next;
        cnt--;
        return temp.data;
    }
}
public int size()
{
    return cnt;
}

public QueueUsingLinkeList() {

}

public void printQ()
{
    Node traverse = front;
    System.out.print("Current Queue::");
    for(int i=0;i<cnt;i++)
    {
        System.out.print(traverse.data.toString()+ "  ");
        traverse = traverse.next;
    } 

}
/**
 * @param args
 */
public static void main(String[] args) {
    try{
        QueueUsingLinkeList q = new QueueUsingLinkeList();

        //System.out.println("Is QueuFull ?" + q.isFull());
        System.out.println("CurrentQueue Size is:" + q.size());
        //System.out.println(q.deQueue()); 

        q.enQueue(1);
        q.enQueue(2);
        q.enQueue(3);
        q.enQueue(4);
        q.enQueue(5);
        q.printQ();
        System.out.println("CurrentQueue Size is:" + q.size());

        System.out.println(q.deQueue());
        System.out.println(q.deQueue());
        System.out.println(q.deQueue());
        q.printQ();
        System.out.println("CurrentQueue Size is:" + q.size());

        q.enQueue(6);
        q.enQueue(7);
        q.enQueue(8);
        q.printQ();
        System.out.println("CurrentQueue Size is:" + q.size());

        System.out.println(q.deQueue());
        System.out.println(q.deQueue());
                    q.enQueue(9);
        q.printQ();
        System.out.println("CurrentQueue Size is:" + q.size());
}catch(Exception e)
{
   e.printStackTrace(); 
}

}

} 
```

# iphone - Xcode：改变 MainStoryboard.storyboard

> ID：12704326
> 
> 赞同：-1
> 
> 时间：2012-10-03T08:07:12.437
> 
> 标签：iphone, xcode, ipad, storyboard

嗨，我最初在 Xcode 4.1 for iPhone 中创建了一个单一视图应用程序。所以很明显我的storyBoard文件的大小是相应的。

后来我将设置设备的应用程序目标更改为 iPad，但我的故事板文件没有调整其界面的大小，它仍然是 iPhone 的大小，我该如何更改？

另外，如何将情节提要文件定向到横向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T08:18:01.083

您必须从头开始为 iPad 创建新的故事板。

# c# - ASP.NET 使用 Twitter 按钮登录 - 如果已通过身份验证，如何停止要求用户进行身份验证？

> ID：12704331
> 
> 赞同：2
> 
> 时间：2012-10-03T08:07:29.817
> 
> 标签：c#, asp.net, twitter-oauth

我在我的网站项目中使用 Twitterizer 库。在我们的网站中，我们使用的是使用 Twitter 登录按钮。我们遇到的问题是，在某些计算机上，它一直将用户引导到 Twitter 并要求他进行身份验证并允许应用程序进行交互。如果用户之前已经对我们的应用程序进行了身份验证，我该如何阻止这种情况？

这是我用于按钮的代码：

```
string callbackUrl = string.Concat(Request.Url.GetLeftPart(UriPartial.Authority), "/Callback.aspx");

        if (Request.UrlReferrer != null)
        {
            callbackUrl = string.Format("{0}?sendto={1}", callbackUrl, HttpUtility.UrlEncode(Request.UrlReferrer.AbsoluteUri));
        }
        OAuthTokenResponse requestTokenResponse = OAuthUtility.GetRequestToken(
            ConfigurationManager.AppSettings["Twitter.ConsumerKey"],
            ConfigurationManager.AppSettings["Twitter.ConsumerSecret"],
            callbackUrl);

        string authUrl = OAuthUtility.BuildAuthorizationUri(requestTokenResponse.Token,true).AbsoluteUri;
        Response.Redirect(authUrl); 
```

通过将 authUrl 更改为以下内容来解决它：

```
string authUrl = "https://api.twitter.com/oauth/authenticate?oauth_token=" + requestTokenResponse.Token; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:05:44.047

我不相信有办法停止要求用户通过 Twitter 进行身份验证。从之前使用[SocialAuth.NET](http://code.google.com/p/socialauth-net/)、 Twitterizer 和 OAuth 路由的经验来看，我一直都在体验身份验证页面，本次[讨论](https://dev.twitter.com/discussions/3150)中的其他人也是如此。

## 更新

这篇文章应该对您有所帮助：[https](https://stackoverflow.com/a/9910051/1300806) ://stackoverflow.com/a/9910051/1300806 。

我刚刚尝试使用帖子中所述的方法，并且我设法让我的 Twitter 实现（使用 OAuth）正常工作，这样用户就不必不断地给予许可。

你每天学习新的东西！

# c# - 在 Visual Studio 2010 控制台应用程序中以管理员身份运行 BAT 文件

> ID：12704332
> 
> 赞同：1
> 
> 时间：2012-10-03T08:07:31.720
> 
> 标签：c#, android, .net, console-application, elevated-privileges

我想以管理员身份在我的 VS 项目中运行一个 bat 文件。bat 文件中有一些命令，我​​想执行该文件。这些命令需要管理员权限。代码如下。

```
AndroidSmS aHelper = new AndroidSmS();
string renameMsg = aHelper.RenameFile();

public string RenameFile() {

        string renameBATPath = ConfigurationManager.AppSettings["RenameBATPath"].ToString();
        string o;
        string str = DateTime.Now.ToOADate().ToString();
        using (var p = new System.Diagnostics.Process())
        {
            p.StartInfo.UseShellExecute = false;
            p.StartInfo.RedirectStandardOutput = true;
            p.StartInfo.FileName = @renameBATPath;
            p.StartInfo.Arguments = DateTime.Now.ToShortDateString().ToString().Replace('/', '-')+".db";
            p.Start();
            o = p.StandardOutput.ReadToEnd();
            p.WaitForExit();
        }
        return o;

    } 
```

那么有人可以告诉我如何运行这些命令或以管理员模式运行此文件。任何类型的帮助将不胜感激。提前致谢 问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:03:21.287

你有几个选择

您可以指定管理员凭据来启动批处理文件

```
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.FileName = @renameBATPath;
p.StartInfo.Arguments = DateTime.Now.ToShortDateString().ToString().Replace('/', '-')+".db";
p.StartInfo.UserName = "administrator";
char[] password = { 'p', 'a', 's', 's', 'w', 'o', 'r', 'd' };
SecureString adminpassword = new SecureString();
foreach (char c in password)
{
    adminpassword.AppendChar(c);
}
p.StartInfo.Password = adminpassword;
p.Start(); 
```

或者您可以在您的应用程序上提示输入 UAC，这意味着它启动的任何内容都将以相同的权限运行。

请参阅[此处](http://msdn.microsoft.com/en-us/library/bb756929.aspx)了解如何创建清单文件来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:19:34.493

由于您不能跳过 UAC，我想您可能会在这里得到答案：http: [//www.vistaclues.com/run-a-batch-file-as-an-administrator/](http://www.vistaclues.com/run-a-batch-file-as-an-administrator/)

只需创建一个快捷方式，将其设置为以管理员身份运行，然后执行它而不是直接调用您的 .BAT 文件。

# c++ - 使用 strtok_s 拆分字符串

> ID：12704337
> 
> 赞同：2
> 
> 时间：2012-10-03T08:08:30.673
> 
> 标签：c++, visual-c++, strtok

我正在尝试根据此示例通过指定的分隔符拆分字符串：http: [//msdn.microsoft.com/en-us/library/ftsafwz3 (v=VS.90).aspx](http://msdn.microsoft.com/en-us/library/ftsafwz3(v=VS.90).aspx)

我的代码在 Visual C++ 2010 中编译没有错误，但是当我想运行它时，我收到以下错误消息：

> Test.exe 中 0x773a15de 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000000。

这是我的代码：

```
#include "stdafx.h"
#include <iostream>
#include <fstream>
#include <string>
#include <sstream>
#include <regex>

using namespace std;

vector<char *> splitString(char in[])
{
vector<char *> parts(15);
char seps[]   = " ,\t\n";
char *next_token1 = NULL;
char *token1 = NULL;
token1 = strtok_s(in, seps, &next_token1);
while ((token1 != NULL))
{
    if (token1 != NULL)
    {
        token1 = strtok_s( NULL, seps, &next_token1);
                    //printf( " %s\n", token1 );
        parts.push_back(token1);
    }
}
return parts;
}

int main(int argc, char * argv[])
{
char string1[] =
    "A string\tof ,,tokens\nand some  more tokens";
vector<char *> parts=splitString(string1);
cout << parts[0] <<endl;
cout << parts[1] <<endl;
return 0;
} 
```

我尝试显示向量的元素似乎是非法的，但为什么呢？

载体的容量应该足够，并且

> printf("%s\n", token1);

在while循环中打印出令牌！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:12:13.177

的使用`vector`不正确。它由`15`元素构成，然后`push_back()`用于添加在初始 15*之后*添加新元素的字符串。这意味着第一个`15`元素未分配（空）：

```
std::cout << parts[0] << end; // parts[0] is null 
```

任何一个：

*   不要在构造时预先分配元素，或者
*   使用`operator[]`而不是`push_back()`（添加额外的循环终止符以保护超出向量的末尾）

（考虑改为`std::vector<std::string>`。）

顺便提一下，它可以从输入字符串[`boost::split()`](http://www.boost.org/doc/libs/1_49_0/doc/html/string_algo/usage.html#id3184031)生成标记列表 ( ) 并允许指定多个分隔符。`std::vector<std::string>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T08:24:40.033

~~问题是~~一个普遍的警告：您`strtok`在 c++ 中使用（系列）函数。请注意，这个*旧*API***修改***了它的参数。这通常不是你所期望的，因此我建议不要使用这个`C`库函数。

此外，您假设将读取 15 个元素，而未初始化“剩余”元素。这也会导致访问这些元素时出现未定义的行为。

* * *

我可以建议一种 C++ 方法，因为您正在使用它：

```
#include <iostream>
#include <sstream>
#include <iterator>
#include <algorithm>

using namespace std;

vector<std::string> splitString(const char in[])
{
    std::istringstream iss(in);
    std::istream_iterator<std::string> first(iss), last;

    std::vector<std::string> parts;
    std::copy(first, last, std::back_inserter(parts));
    return parts;
}

int main(int argc, char * argv[])
{
    const char string1[] = "A string\tof ,,tokens\nand some  more tokens";
    vector<std::string> parts = splitString(string1);
    cout << parts[0] <<endl;
    cout << parts[1] <<endl;
    return 0;
} 
```

这使用了一个事实，默认情况下，iostreams 将`skipws`（跳过空格）

# facebook - Facebook 只分享父页面

> ID：12704340
> 
> 赞同：0
> 
> 时间：2012-10-03T08:08:45.853
> 
> 标签：facebook, facebook-sharer

我创建了一个带有子页面的自定义页面，这些页面又具有自己的共享按钮，到目前为止，该链接已正确链接到共享按钮和所有内容，它与每个社交网络完美配合，并具有一个期望。FACEBOOK！我尝试删除规范但没有帮助...该页面可以在这里找到

[http://kurdaktuellt.se/galleri/images/1598/](http://kurdaktuellt.se/galleri/images/1598/)

当你按下 facebook 按钮时，url 应该和上面一样，但不知何故它变成了

[http://kurdaktuellt.se/galleri/](http://kurdaktuellt.se/galleri/)

即使 url 设置正确，如单击共享按钮时在 url 中所见

如果我错过了什么，请随时问。

非常感谢所有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:33:55.367

我通过使用两者来解决它

```
remove_action('wp_head', 'rel_canonical');//this didnt work you need to use the one beneath 

remove_filter('template_redirect', 'redirect_canonical'); 
```

# php - php 正则表达式：电话号码 7-12 位可能包含连字符或空格

> ID：12704345
> 
> 赞同：1
> 
> 时间：2012-10-03T08:09:05.033
> 
> 标签：php, regex, phone-number

我尝试了以下链接中可能包含空格或连字符的 7-12 位电话号码的解决方案。第一个和最后一个字符必须是数字。

[正则表达式匹配 7-12 位数字；可能包含空格或连字符](https://stackoverflow.com/questions/2095711/regular-expression-to-match-7-12-digits-may-contain-space-or-hyphen)

但是，我不太了解正则表达式。

```
$phone_pattern="/^\d(?:[-\s]?\d){6,11}$/"; 
```

这里的“：”是什么意思？

这个正则表达式如何能够从 6 到 11 个字符中排除连字符和空格？

高度赞赏帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T08:19:37.713

是的`:`一部分`(?: ... )`- 这意味着“非捕获组” - 它对内容进行分组，但不会像正常分组那样创建对它的反向引用（即 $1、$2 等）。

在该正则表达式中，它将匹配 6 到 11 个字符，*包括*heiphens 和空格 - 这意味着 12-------34 将匹配。我建议使用更严格的模式：

`/^\d{7,12}$/`

这只会匹配数字。要允许在此匹配中使用 heiphens 和空格，但只获取您想要的数字，您可以像这样使用它：

```
<?php
$pattern = '/^\d{7,12}$/';
$string = '123-456 789';
$ignoreCharacters = array(' ', '-');

preg_match($pattern, str_replace($ignoreCharacters, $string); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T08:14:14.037

这是可以理解的如何令人困惑。实际表示“`(?: ... )`非捕获组”，而不是`( ... )`“捕获组”。如果您只是针对正则表达式测试字符串，而不是捕获子字符串，那么两者对于您的目的实际上是相同的。

也存在`(?= ... )`, `(?! ... )`, `(?<= ... )`, `(?<! ... )`, and也无济于事，它们也`(?<foo> ... )`都意味着不同的东西。

很多东西要学，但肯定有收获！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T08:56:29.190

您是否尝试过像正则表达式这样的测试引擎（也有其他可用的）我经常使用它来针对表达式测试各种字符串，以确保它们的行为符合预期。

我的理解是，在这种情况下**：**不是单独行动，而是与**？**

**?** _ 在这种情况下并不意味着前面零次或一次它是修饰符的含义，赋予该组一个新的含义，与修饰符一起使用**：**关闭捕获意味着您希望这是一个非捕获组表达式。

这样做的效果是，当将表达式的一部分放在**()**中时，默认情况下会导致捕获但**?:**将其关闭。

因此 (?:[-\s]?\d) 成为非捕获组表达式。

注意捕获的组与反向引用一起使用，大多数正则表达式引擎支持多达 9 个反向引用。

因此，删除捕获加快了匹配过程，并允许您选择不回溯该组，从而为您真正想要回溯的组保存 9 个引用中的一个。

# java - Java - 在另一个进程更新文件时读取文件

> ID：12704346
> 
> 赞同：1
> 
> 时间：2012-10-03T08:09:12.647
> 
> 标签：java, file, io

> **可能重复：**
> [如何使用 Java 从正在写入的文件中读取？](https://stackoverflow.com/questions/4149/how-do-i-use-java-to-read-from-a-file-that-is-actively-being-written)

我有一个程序（陷阱接收器），它将一个字符串附加到文件的末尾。这个程序基本上记录了它所做的一切。

我希望我的程序读取该日志文件。我这样做会遇到什么问题，最有效的方法是什么。在另一个进程更新文件时读取文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:12:45.203

假设这个记录器和大多数记录器一样，不只是附加任何类型的字符串，而是整行。

如果你什么都没有，你可以简单地使用 bufferedReader 并等待：

```
BufferedReader br = new BufferedReader(new FileReader("path"));
String line;
while (true) {
    line = br.readLine();
    if (line != null) {
        // do something
    } else {
        Thread.sleep(DELAY);   // DELAY could be 100 (ms) for example     
    }
} 
```

当然，如果您的应用程序有其他任务要完成，您必须在单独的线程中执行此操作。

如果您想避免拉动，在非常罕见的日志记录的情况下，您可能会使用[监视服务](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)，但我从未在一个简单的文件上尝试过它，我不确定它是否总是可靠的。

# javascript - Flash - 在 AMD/RequireJS 模块中调用 JavaScript 函数的 ExternalInterface

> ID：12704349
> 
> 赞同：0
> 
> 时间：2012-10-03T08:09:52.637
> 
> 标签：javascript, actionscript-3, flash, requirejs, externalinterface

Flash 的 ActionScript3 有什么方法可以与 AMD 模块中定义的 JavaScript 函数进行通信 - 即。不直接暴露在全局范围内？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:05:32.943

在全局范围内创建一个 JS 函数，然后调用 AMD 模块内的函数。

-或者-

在外部接口调用中编写全局js函数：

```
ExternalInterface.call( "function uniqueFunctionName(){ myModule.foo(); }" ); 
```

# git - 如何使用非标准 refspec 正确添加子模块？

> ID：12704358
> 
> 赞同：1
> 
> 时间：2012-10-03T08:10:51.247
> 
> 标签：git, gerrit, git-submodules, refspec

我们正在使用 Gerrit 进行代码审查。Gerrit 将审查过的代码存储在非标准参考路径中 - `refs/changes`. 因此，对提交的引用看起来像`refs/changes/95/295/2`. 我想将 Gerrit 中的项目作为子模块添加到我的超级项目中。

我可以分两步完成：

*   将我的项目作为子模块添加到 master 当前指向的 commit-hash
*   执行`git fetch origin refs/changes/95/295/2 && git checkout FETCH_HEAD`并提交更改。

但是当我尝试检查我的超级项目并做`git update --init`git 报告失败时。Git 在子模块中找不到哈希，因为`refs/changes`默认情况下 git 没有看到引用，并且不从它们下载对象。

好的，我可以通过`git config --add remote.origin.fetch '+refs/changes/*:refs/remotes/origin/changes/*'`在我的 gerrit repo 中执行来修复它，然后重试子模块更新，这样就可以了。

问题是，我可以像通常的工作流程那样一步执行“添加”和“初始化/更新”子模块吗？基本上，我需要在“clone”/“pull”/“submodule add”/“sumbodule update”执行开始之前设置 refspec 的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:55:38.933

您不想通过指向 refs/changes 的提交的子模块来推动更改。Gerrit 在审查期间将代码存储在那里，但在审查完成并提交更改后，可以从标准 refs/heads/ 访问它。您的子模块应指向 refs/heads/BRANCH_NAME 中已审核和提交的代码。

# objective-c - Xcode中的线条动画

> ID：12704362
> 
> 赞同：1
> 
> 时间：2012-10-03T08:10:58.433
> 
> 标签：objective-c, xcode, core-animation

我正在尝试在 xcode 中绘制动画线条。我正在为 iPhone 开发。我发现了一些使用 CABasicAnimation 的教程。但是，当我尝试像这样创建 CABasicAnimation 对象时

```
CABasicAnimation *pathAnimation = [CABasicAnimation animationWithKeyPath:@"strokeEnd"]; 
```

我收到一个错误：使用未声明的标识符 CABasicAnimation。

我需要一些库来使用 CABasicAnimation 对象吗？我不确定这是如何工作的。是否有任何教程解释了 Xcode 中动画的完整过程，因为我发现的只是从定义 CABasicAnimation 对象开始，没有任何解释我之前应该配置或导入什么。

我正在使用 XCode 4.4.1 和山狮。非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T08:12:57.437

您需要将 QuartzCore.framework 包含到您的项目和`#import <QuartzCore/QuartzCore.h>`代码中

![在此处输入图像描述](../Images/392e894b0ad2fae62174c4082ca435a8.png)

# c# - 函数 UnhookWindowsHookEx，如果在低级钩子应用程序中遗漏了怎么办？

> ID：12704365
> 
> 赞同：4
> 
> 时间：2012-10-03T08:11:03.680
> 
> 标签：c#, hook

我最近一直在研究低级键盘挂钩。我已经开始工作了，但我对代码有一些疑问。

我看到这里有控制台应用程序的完整代码：http: [//blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx](http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx)

在 Main 函数中，我看到程序员调用了一个“UnhookWindowsHookEx”DLL 函数。这个函数的目的是什么，如果它被注释掉会发生什么？（特别是不好的后果？）

编辑：

还有一件事情。为什么必须调用“Application.Run()”才能使代码正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:44:45.963

1.  在这种特殊情况下，如果 UnhookWindowsHookEx 被注释，则不会发生任何不好的事情，因为程序无论如何都会退出。但是最好在不再需要任何资源时关闭任何资源，无论是在程序继续执行时还是在程序结束时 - 以控制资源使用。

2.  没有 Application.Run 程序立即退出。使用 Application.Run 的第二个原因是 SetWindowsHookEx 要求 - 它需要消息循环才能工作。Application.Run 执行消息循环。按 Ctrl+C 可以停止程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T10:23:43.197

调用 UnhookWindowsHookEx() 并不是绝对必要的，Windows 确实会发现您忘记这样做并且会在您的程序终止时取消挂钩。必然如此，不清理钩子会导致 Windows 挂起。不将其留给操作系统被认为是“礼貌”。

Application.Run() 调用是实现低级挂钩的程序的硬性要求。如果没有消息循环，例如使用 Console.ReadLine()，则不会对钩子进行回调。具体的 Windows 承诺是回调将在调用 SetWindowsHookEx() 的同一线程上进行。为此，Windows 以某种方式“闯入”并强制您的线程调用回调方法。它不能随意中断你的线程并强制它进行调用，这会导致可怕的重入问题。您的线程必须处于明确定义的状态，它必须处于空闲状态并且不会改变程序状态。

消息循环，特别是 GetMessage() 或 PeekMessage() winapi 函数，就是那个信号，当您的线程泵送消息循环时，它处于空闲状态并等待 Windows 告诉它做某事。它是[生产者/消费者问题](http://en.wikipedia.org/wiki/Producer-consumer_problem)的通用解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-22T11:36:19.403

不，这很糟糕。

本机挂钩不是与文件或进程句柄相同意义上的“句柄”。它们对于 Windows 会话是持久的，并且资源稀缺。

我尽可能地尝试调用它，但我经常被迫终止我的，因为它挂起或其他什么，并且在两打左右之后，钩子无法注册。

所有其他使用钩子的应用程序，比如一些游戏，在此之后也会失败。唯一的解决方案似乎是重新启动。

# java - 如何将数据从数据库添加到 Vaadin 中的表？

> ID：12704369
> 
> 赞同：1
> 
> 时间：2012-10-03T08:11:29.857
> 
> 标签：java, vaadin

我有一张桌子

```
 Table table = new Table();
  table.setHeight("100%");
  table.addContainerProperty("First Name", String.class, null);
  table.addContainerProperty("Last Name", String.class, null);
  table.addContainerProperty("Year", Integer.class, null); 
```

我想从数据库（PostgreSQL）填充这个表数据。你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T06:01:18.977

查看[SQLContainer](https://vaadin.com/directory#addon/vaadin-sqlcontainer)和[JPAContainer](https://vaadin.com/directory#addon/vaadin-jpacontainer)。JPAContainer 也有一个相当不错的[教程](http://vaadin.com/download/jpacontainer-tutorial/)。

我建议将 SQLContainer 用于较小的应用程序，将 JPAContainer 用于较大的应用程序。SQLContainer 从 6.7 版本开始集成在 Vaadin 核心中。

# java - 从java中的超类引用子类

> ID：12704370
> 
> 赞同：2
> 
> 时间：2012-10-03T08:11:45.787
> 
> 标签：java, oop, inheritance

假设我有一个抽象类*Person*。还有另一个类*Student*扩展了*Person*。但是 Student 类有一个成员变量，比如*String*类型的*学院，它在**Person*类中不存在。

 **我们知道我们可以从超类中引用子类，例如，

**人 p = new Student();**

对象 p 会有成员*学院*吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:14:05.613

你将无法做到`p.college`。但是，您可以将其转换为`Student`，在这种情况下，它将具有：

```
((Student) p).college; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T08:13:15.037

在您的示例中，`Person`对象**是**a `Student`，因此将拥有该`college`成员。

由于您将`Student`转换为 a `Person`，因此任何不存在的公共例程或数据`Person`都将被~~转换~~ *分配*隐藏。**

# proxy - 我可以将我的 LAN 服务器视为转发代理吗？

> ID：12704371
> 
> 赞同：0
> 
> 时间：2012-10-03T08:11:50.700
> 
> 标签：proxy

在局域网中，我的机器连接到局域网服务器，我的机器通过局域网服务器连接到互联网。那么，我可以将 LAN 服务器视为转发代理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:16:30.320

如果您已设置`squid`在服务器上设置了 squid 并使用它从 Internet 获取`http`内容，那么是的，squid 是一项`forwarding proxy`服务。如果您的服务器正在运行某个`DNS`服务器以将您的查询转发到上游 DNS 服务器（即使是像 dnsmasq 这样的小型服务器），那么是的，这个 DNS 服务器是一项`forwarding proxy`服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:16:48.940

通常不会。

如果所有流量都通过“LAN 服务器”，您可以将 LAN 服务器视为网关和 NAT 路由器。

如果只有 HTTP/HTTPS/FTP 流量通过 LAN 服务器，您可能确实在使用应用程序代理

# iphone - GData 未使用 Apple LLVM 4.1 编译

> ID：12704378
> 
> 赞同：3
> 
> 时间：2012-10-03T08:12:21.810
> 
> 标签：iphone, objective-c, ios, gdata

我在我的应用程序中使用 gdata-objectivec-client-1.10.0。我正在尝试构建支持 iOS 6 和 iphone 5 的版本。现在的问题是，当我使用 Apple llvm 4.1 编译应用程序时，它会给出下面给出的错误。但是当我用 LLVM GCC 4.2 编译它时，它编译时没有错误并且应用程序工作正常。谁能指导我如何解决这个问题。

![在此处输入图像描述](../Images/38428e0b66dca98f6edf2fc5f5981b2e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:42:25.000

您可以使用以下所示的命令检查库的当前版本

[https://code.google.com/p/gdata-objectivec-client/source/checkout](https://code.google.com/p/gdata-objectivec-client/source/checkout)

如果您将库源直接构建到项目中，则需要删除旧的源文件引用并添加当前文件。例如，`GDataOAuthAuthentication`上面显示的文件用于通过 OAuth 1 进行身份验证，该库不再支持一种身份验证方法。

以前通过 Google 数据 API 库访问的大多数 API 已被弃用；有些已被更新的 JSON API 取代，可通过 Google API 客户端库访问，网址为

[http://code.google.com/p/google-api-objectivec-client/](http://code.google.com/p/google-api-objectivec-client/)

# c# - 在游戏运行时从现有的精灵表创建精灵表？

> ID：12704379
> 
> 赞同：1
> 
> 时间：2012-10-03T08:12:20.963
> 
> 标签：c#, xna, sprite

我一直在用 XNA 制作一个 2D 游戏，它会有几个独特的敌人。我可以毫不费力地在屏幕上绘制单独的精灵，一个在另一个上以使两个敌人不一样，但我认为如果不是为每个敌人绘制十几个精灵，我会以某种方式将这些精灵合并到一个精灵表中，这样可能会更有效。

如果我在屏幕上有很多很多这样的敌人，如果我合并，我会显着提高性能吗？有没有一种简单的方法可以让我以这种方式创建新的精灵表，或者答案是否相当复杂？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:00:17.720

绘制一个精灵比绘制多个精灵更快。但是，我只推荐这个，如果你有性能问题。使用`SpriteBatch`. 它具有将相同纹理的绘制调用分组的好功能，这使得它非常快。如果为每个敌人创建单独的纹理，则可能会失去此功能，这可能会导致性能损失。如果表没有变得太大，创建一个大的精灵表会更好。

要创建这样的工作表，您必须创建纹理/渲染目标并对其进行渲染。[这](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series3/Render_to_texture.php)是使用 XNA 的方法。

# php - $_session 变量

> ID：12704382
> 
> 赞同：2
> 
> 时间：2012-10-03T08:12:41.133
> 
> 标签：php

我想存储一些信息，如 user_name、country_name 等，并且需要在整个会话期间可用。

1.  实现这一目标的最佳方法是什么？
2.  我有以下代码`$_session`变量但没有结果。

**page1.php**

```
 session_start;
 $_SESSION['country_no']=1; 
```

**page2.php**

```
session_start;
echo "here is session variable=".$_SESSION['country_no'];
exit; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:13:54.050

`session_start()`是一个函数，像这样使用它：

```
session_start();
$_SESSION['country_no']=1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T08:14:11.537

你错过了`()`

```
session_start(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T08:14:39.853

```
session_start(); //needed before you create any session variables.
$_SESSION['mysessionvariablename'] = $myVar; 
```

阅读[session_start()](http://php.net/manual/en/function.session-start.php)函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T08:14:41.150

尝试 session_start(); 而不是 session_start；您正在使用一种方法:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T08:30:35.380

把 session_start(); 添加页面顶部。

# jquery - 在 JQuery 中添加行/克隆的递增类

> ID：12704383
> 
> 赞同：1
> 
> 时间：2012-10-03T08:12:40.983
> 
> 标签：jquery

> **可能重复：**
> [如何使用 jQuery 向表中添加新行，并为其分配递增的 id](https://stackoverflow.com/questions/2307129/how-to-use-jquery-to-add-a-new-row-to-a-table-and-assgin-an-incrementing-id-to)

我有一些表格行，如下所示：

```
<td><input id="RS_Staff_Title1" name="RS_Staff_Title1" style="width:100%;"></td>

<td><input id="RS_No_WD_Staff1" name="RS_No_WD_Staff1" style="width:100%;"></td>

<td><input id="RS_No_Weekdays1" name="RS_No_Weekdays1" style="width:100%;"></td>

<td><input id="RS_No_WE_Staff1" name="RS_No_WE_Staff1" style="width:100%;"></td>

<td><input id="RS_No_WE_Days1" name="RS_No_WE_Days1" style="width:100%;"></td>

<td><img class="remove_row" src="assets/images/delete-icon.png"></td> 
```

然后我有一个按钮，它获取最后一个表行并将其克隆到下面的行，因此使用这个 Jquery 添加一个新行“

```
$("#add_row").click(function() {
        $('#staff tbody>tr:last').clone(true).insertAfter('#staff tbody>tr:last');
        return false;
    }); 
```

我需要做的是让 RS_Staff_Title1 变为 RS_Staff_Title2、RS_Staff_Title3 等等 - 其他列也会发生同样的情况。

我怎样才能实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T08:21:57.160

一种可能的解决方案：

```
$("#add_row").click(function() {
    var row = $("#staff tbody > tr:last"),
        newRow = row.clone(true);

    newRow.find("input").each(function() {
        var num = +(this.id.match(/\d+$/) || [0])[0] + 1;
        this.id = this.id.replace(/\d+$/, "") + num;
        this.name = this.id;
    });

    newRow.insertAfter(row);
    return false;
}); 
```

**演示：http:** [//jsfiddle.net/GHTN7/](http://jsfiddle.net/GHTN7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:25:56.793

你可以试试这个

```
$("#add_row").click(function() {
    $('#staff tbody>tr:last').clone(true).insertAfter('#staff tbody>tr:last')
    .find('input').attr({'name':'RS_Staff_Title'+$('#staff tbody>tr').length, 'id':'RS_Staff_Title'+$('#staff tbody>tr').length
    });
}); 
```

[**演示**](http://jsbin.com/ahagut/5/edit)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:19:39.910

如果您不需要输入的 id，您可以使用数组，HTML 将分配递增的数字：

```
<td><input name="RS_Staff_Title[]" style="width:100%;"></td>

<td><input name="RS_No_WD_Staff[]" style="width:100%;"></td>

<td><input name="RS_No_Weekdays[]" style="width:100%;"></td>

<td><input name="RS_No_WE_Staff[]" style="width:100%;"></td>

<td><input name="RS_No_WE_Days[]" style="width:100%;"></td>

<td><img class="remove_row" src="assets/images/delete-icon.png"></td> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T08:21:50.067

```
$('#staff tbody>tr:last').clone(true).appendTo('#staff tbody>tr:last'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T08:40:46.420

尝试这个

```
var j = 1;
var arr = ["RS_Staff_Title", "RS_No_WD_Staff", "RS_No_Weekdays", "RS_No_WE_Staff", "RS_No_WE_Days"]
$("#add_row").click(function() {
    j++;
    var $last = $('#staff tbody>tr:last');
    $last.clone(true).insertAfter('#staff tbody>tr:last');
    // Chaching it again to conter for the newly added Row...
    $last = $('#staff tbody>tr:last');
    // Selecting all the td's in the newly added row..
    var $td = $('#staff tbody>tr:last td');
    $.each(arr, function(i) {
        if(i > 4)
        return false;

       $($td[i]).find('input').attr('id' , (arr[i] + j ));
        $($td[i]).find('input').attr('name' , (arr[i] + j ));
        // Not considering the Images
    });
    return false;
});​ 
```

[检查小提琴](http://jsfiddle.net/sushanth009/e6DWQ/1/)

# php - 使用 REGEX 验证带有 GET 参数的域名

> ID：12704384
> 
> 赞同：3
> 
> 时间：2012-10-03T08:12:41.497
> 
> 标签：php, regex, preg-match

我正在尝试验证域是否具有 preg_match 和 REGEX 的 GET 参数，我要求它具有我的目的。

我所做的是验证没有 GET 参数的域，如下所示：

```
if (preg_match("/^[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}$/", 'domain.com')) {
        echo 'true';
} else {
        echo 'false';
} 
```

我对这个测试是真的。

到目前为止，一切都很好。我遇到的问题是添加 GET 参数，在我尝试过的许多 REGEX 中仍然没有运气如下：

```
if (preg_match("/^[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}([/?].*)?$/", 'domain.com?test=test')) {
        echo 'true';
} else {
        echo 'false';
} 
```

在这里，我得到错误返回，因此无法使用所需的 GET 参数验证域。

任何帮助将不胜感激^^

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:44:48.727

此代码未经测试，但我认为它应该可以工作：

```
$pattern = "([a-z0-9-.]*)\.([a-z]{2,3})"; //Host
$pattern .= "(\?[a-z+&\$_.-][a-z0-9;:@&%=+\/\$_.-]*)?"; //Get requests
if (preg_match($pattern, 'domain.com?test=test')) {
        echo 'true';
} else {
        echo 'false';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:01:18.713

使用正则表达式有什么好处？

为什么不只是

```
<?php
$xGETS = count($_GET);
if(!$xGETS)
{
    echo 'false';
} else {
    echo 'true';
}

// PHP 5.2+ 

$xGETS = filter_var('http://domain.com?test=test', FILTER_VALIDATE_URL, FILTER_FLAG_QUERY_REQUIRED);
if(!$xGETS)
{
    echo 'false';
} else {
    echo 'true';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:02:03.487

您的第一个正则表达式将拒绝一些有效的域名（例如来自`museum`和`travel`TLD 以及包含大写字母的域名），并会识别一些无效的域名（例如标签或整个域名太长）。

如果这对您来说没问题，您不妨搜索第一个问号，并将前缀视为域名，将后缀视为“GET 参数”（实际上称为*查询字符串*）。

如果这不适合您，那么简单的正则表达式将不足以验证域名，因为域名和标签的长度限制。

# java - 使用字符串进行正则表达式还是不使用字符串进行正则表达式？

> ID：12704390
> 
> 赞同：6
> 
> 时间：2012-10-03T08:13:00.497
> 
> 标签：java, regex, string

我已经开始`.match(Regex)`在我的 java 程序中使用该方法，但现在我只使用一个字符串（`String regexString = new String("[^a-zA-Z0-9][^a-zA-Z0-9]*");`这是我到目前为止所拥有的，例如）。但是我知道我可以使用实际的正则表达式（`Regex pattern = new Regex() & the Pattern class`然后以某种方式编译它（？））。

在java中使用Regex作为一个类而不仅仅是一个字符串有优势吗？我非常习惯于 bash 脚本，并且正则表达式只是最松散意义上的“字符串”，并且没有能力/不需要单独的类，所以我很难看到这里有一个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T08:16:01.627

我会做你认为最简单和最清楚的事情。

`Pattern`当正则表达式的性能至关重要时，通常使用A。如果您还没有分析您的应用程序并且它已被证明是一个问题，那么使用纯文本`String`可能会很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:49:33.903

您尝试用于匹配目的的正则表达式必须在一个有限状态机中进行转换，该状态机接受与您提供的模式匹配的任何文本。

因此，每次使用正则表达式时，例如在 (new String("").split("") 表达式中，都会在后台构造一个模式，即有限状态机，它接收您的字符串并尝试匹配输入。

如果你有一个经常使用的正则表达式并且速度是一个真正的问题，那么保持有限状态机而不是每次都构建它是一个重要的加速。您可以通过在不同输出字符串上连续调用 match 之间存储 Pattern 对象来做到这一点。

以下内容应提供更多见解：[http ://en.wikipedia.org/wiki/Finite-state_machine](http://en.wikipedia.org/wiki/Finite-state_machine)

# reporting-services - 预期 MDX 表达式。指定了一个空表达式

> ID：12704391
> 
> 赞同：1
> 
> 时间：2012-10-03T08:13:05.070
> 
> 标签：reporting-services, mdx

当我尝试在我的 ssrs 查询生成器中构建我的 mdx 查询时，我收到了这条消息。任何想法？？？？错误：需要一个 MDX 表达式。指定了一个空表达式。（Microsoft SQL Server 2008 R2 分析服务）这是我的 MDX

```
 with                                                                                        
member [Measures].[Motor: The Car]                                                                                        
as                                                                                          
( [Web Page].[Web Site Structure].[Motor Insurance].[TheCar], [Measures].[Visit Count])                                                                                     
member [Measures].[Motor: YourPolicy]                                                                                 
as                                                                                           
( [Web Page].[Web Site Structure].[Motor Insurance].[YourPolicy], [Measures].[Visit Count])                                                                                     

member [Measures].[Motor:Proposer]                                                                            
as                                                                                            
( [Web Page].[Web Site Structure].[Motor Insurance].[Proposer], [Measures].[Visit Count])                                                                                      

member [Measures].[Home:About You]                            
as        
( [Web Page].[Web Site Structure].[House Insurance].[AboutYou], [Measures].[Visit Count])    
member [Measures].[Motor:About You]            
as         
( [Web Page].[Web Site Structure].[Motor Insurance].[AboutYou], [Measures].[Visit Count])
member [Measures].[Motor:PricesPage]             
as           
( [Web Page].[Web Site Structure].[Motor Insurance].[ViewPrices], [Measures].[Visit Count])        

member [Measures].[Home:PricesPage]                   
as           
( [Web Page].[Web Site Structure].[House Insurance].[ViewPrices], [Measures].[Visit Count]) 
member [measures].[Motor:ViewAllPrices]            
as                   
( [Web Page].[Web Site Structure].[Product].&[2].[Motor:AllViewPrices], [Measures].[Visit Count]) 

member [measures].[Home:ViewAllPrices]                  
as
( [Web Page].[Web Site Structure].[House Insurance].[Home:AllViewPrices], [Measures].[Visit Count])              
member [measures].[Home:YourCover]               
as            
( [Web Page].[Web Site Structure].[House Insurance].[YourCover], [Measures].[Visit Count])
member [measures].[Home:PolicyHolder]                     
as                     
( [Web Page].[Web Site Structure].[House Insurance].[PolicyHolder], [Measures].[Visit Count])
member [measures].[Home:Property]                      
as                        
( [Web Page].[Web Site Structure].[House Insurance].[Property], [Measures].[Visit Count])

 SELECT NON EMPTY { [Measures].[Motor:PricePanel],             
 [Measures].[Motor:PricePanel->Compare],               
 [Measures].[Motor:PricePanel->MorePanel],              
 [Measures].[Home:PricePanel->MorePanel],                
 [Measures].[MorePanel->BO+Phone],              
 [Measures].[Motor:AY->PricesPage],              
 [Measures].[PercentOfVisitsByBrowser],                
  [Measures].[Proposer->PricesPage],            
  [Measures].[Proposer->TheCar],              
   [Measures].[TheCar->YourPolicy],                  
    [Measures].[PolicyHolder->Property],
     [Measures].[YourCover->PricesPage],             
     [Measures].[Property->YourCover],               
      [Measures].[YourPolicy->PricesPage],               
       [Measures].[BO+Phone],                   
        [Measures].[Compare],                   
        [Measures].[AY->Proposer],                   
        [Measures].[Motor:PricePanel->BO+Phone],              
        [Measures].[AY->PolicyHolder],                 
        [Measures].[Home:PricePanel->BO+Phone],         
        [Measures].[Home:PricePanel->Compare],           
        [Measures].[Home:PricePanel],                 
        [Measures].[Home:AY->PricesPage],                 
        [Measures].[MorePanel],                    
        [Measures].[Motor:About You]                 
,[Measures].[Motor:Proposer]                  
,[Measures].[Motor: The Car]                 
,[Measures].[Motor: YourPolicy]                 
,[Measures].[Motor:PricesPage]                 
,[measures].[Motor:ViewAllPrices]                
,[Measures].[Home:About You]                        
,[measures].[Home:PolicyHolder]                  
,[measures].[Home:Property]                    
,[measures].[Home:YourCover]                           
,[Measures].[Home:PricesPage]                      
,[measures].[Home:ViewAllPrices]                   
,[Measures].[BO+Phone] } ON COLUMNS,                     
        NON EMPTY { ([Timeline].[Financial Date].[Visit Date].ALLMEMBERS * 
        [Product].[Products By Category].[Product Category].ALLMEMBERS ) }       
         DIMENSION PROPERTIES MEMBER_CAPTION, MEMBER_UNIQUE_NAME ON ROWS         
         FROM ( SELECT ( STRTOSET(@ProductProductsByCategory, CONSTRAINED) ) ON COLUMNS          
         FROM [Visits]) CELL PROPERTIES VALUE, BACK_COLOR, FORE_COLOR, FORMATTED_VALUE, FORMAT_STRING, FONT_NAME, FONT_SIZE, FONT_FLAGS 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T06:25:20.523

语法看起来不错，所以我猜@ProductProductsByCategory 是问题所在。

您传递给此参数的字符串需要采用集合的形式，因为您使用的是 StrToSet 函数。我通常会删除“约束”参数，因为它会强制您列出由花括号括起来的一组特定元组 {} 如果删除该参数，您可以使用返回集合而不是显式指定集合的​​ MDX 表达式[http://msdn.microsoft.com/en-us/library/ms144782.aspx](http://msdn.microsoft.com/en-us/library/ms144782.aspx)

在参数的默认值中，您还需要指定一个集合。如果它只是一个成员，那么宁愿使用 StrToMember 函数。

# javascript - 如何在 jQuery Mobile 页面中绑定提交事件

> ID：12704395
> 
> 赞同：1
> 
> 时间：2012-10-03T08:13:37.503
> 
> 标签：javascript, jquery, jquery-mobile, jquery-events

试图将提交事件（或单击或其他）绑定到 jQuery 移动页面中的元素。我想做的是从 jQuery 页面中的表单元素中的输入中获取值，并将其存储在 cookies/localStorage 中。每次我回到这个页面时，我都想恢复输入字段。

目前我最终使用了这个脚本：

```
 $('.pageClassSelector').live('pageinit', function (e) {

        $('.classSelector').submit(function () {
            var q = $('.inputClassSelector').val();
            // store to localStorage ...
        });

    // load from localStorage ...
    $('.q').val(lastSearchString);

    }); 
```

这种方法记录在[http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

由于似乎有可能在 DOM 中保存相同的页面，因此 ID 选择器并不是很有用。我现在的问题是，每次我导航到此页面时，提交事件都会再次绑定，因此会导致存储不同的（！）值。提交事件似乎被触发了多次，并且使用 last 之前的值更有趣。

我做错了什么吗？任何提示如何正确地在 jquery mobile 中进行脚本编写？

尝试1：

我现在将提交事件绑定放置在 pagebeforeshow 事件中，如下所示：

```
$('#PageId').on('pagebeforeshow', function (e) {
    $('.classSelector').on('submit', function () {
            var q = $('.q').val();
            alert('stored: ' + q);         
    }
    $('.q').val(lastSearchString);
} 
```

但是要存储的值仍然是上次之前的值，当我之前导航页面时。它第一次按应有的方式工作。

尝试2：

这就是我现在所拥有的，它看起来就像我想要的那样。我现在选择当前页面并仅选择作为该页面子级的表单。这是好习惯吗？

```
$('div:jqmData(id="PageId")').on('pagebeforeshow', function (e) {

     $(this).find('#form').on('submit', function () {
        var q = $(this).find('#input').val();
        localStorage.setItem("key", q);
        return true;
    });

    lastSearchString = localStorage.getItem("key");
    $(this).find('#input').val(lastSearchString);        
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:37:09.577

导航页面时触发的多个事件对我来说听起来像是多个绑定，这是 jQuery Mobile 的一个已知问题。导航页面时绑定不会解除绑定，因为所有内容都是通过 AJAX 加载的。例如，请参阅此 StackOverflow 问题：[Jquery mobile .click 在新页面访问](https://stackoverflow.com/questions/9067259/jquery-mobile-click-firing-multiple-times-on-new-page-visit)或[我的解决方案](https://stackoverflow.com/questions/12651400/single-page-template-in-jquery-mobile/12651730#12651730)中多次触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:38:29.987

您需要通过绑定到 pagebeforeshow 事件（查看“页面转换事件”部分）而不是像您当前正在执行的 pageinit 事件来完成从本地存储加载和存储在页面上的要求。

```
$('.pageClassSelector').on('pagebeforeshow', function (e) {
    // load from localStorage ...
    $('.q').val(lastSearchString);
}); 
```

此外，通常每个页面元素（您有 data-role='page'）都应该有一个唯一的 ID，因此您可以使用它而不是 CSS 选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:17:14.173

```
$('.classSelector').on('submit', function(){})

 Try to use the constraction to bind your event to element.
 Look likes some data was loaded through ajax request 
```

# linq-to-sql - Visual Studio 2012 Express for Web 中的对象数据源

> ID：12704400
> 
> 赞同：0
> 
> 时间：2012-10-03T08:13:54.550
> 
> 标签：linq-to-sql, visual-studio-2012, objectdatasource

我正在尝试遵循有关如何创建 LINQ to SQL 类的各种教程，他们都说我应该连接到对象数据源。但是，在 Visual Studio 2012 Express for Web 中没有可供选择的此类源。这是 Express for Web 版本的限制吗？我试图找到这方面的信息，但没有找到任何东西。有解决方法吗？

![在 Visual Studio 2012 Express for Web 中更改数据源对话框](../Images/7c80549ceb092c1fa9398eee5a3b372e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:33:27.917

我想到了。这应该通过 Project->Add New Data Source 来完成。不是工具-> 连接到数据库或数据库资源管理器。

# php - xmlHttpRequest post 方法给出垃圾值

> ID：12704403
> 
> 赞同：0
> 
> 时间：2012-10-03T08:13:57.813
> 
> 标签：php, post, xmlhttprequest

> 发送一个发布请求和一个 PHP 文件以将其写入文件，为了测试我只是使用“虚拟文本”来发送消息

```
//FILE - SSE.html
// xmlhttprequest post

//function.................................................

function loadXMLDoc(){    
var xmlhttp;    
if (window.XMLHttpRequest){       
xmlhttp=new XMLHttpRequest();      
console.log("request made");  
}     
else      
{     
 xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");      
}   
xmlhttp.onreadystatechange=function(){   
if (xmlhttp.readyState==4 && xmlhttp.status==200){      

console.log(xmlhttp.responseText);
}   
 }   

xmlhttp.open("POST","writeToFile.php",true);    
xmlhttp.setRequestHeader("Content-type","text/plain;charset=UTF-8");   
xmlhttp.send("dummy text");   
}

// html body.................................................
<form>
<textarea name="q" onKeyUp="loadXMLDoc()" id="ta1" cols=40 rows=10></textarea>
</form>
<textarea id="ta2" cols=40 rows=10></textarea>

//PHP file.......

<?php 

$clientData=$_POST["q"];  

$File = "WrittenByPHP.txt";   
$Handle = fopen($File, w');    
$Data = $clientData;   
fwrite($Handle, $Data);   
fclose($Handle);   ?> 
```

> 控制台中的结果............一些垃圾值......................
> 
> 发出请求 SSE.html:46 ( ! ) 注意：未定义索引：第*4*
> 行 C:\wampnew\www\RD\writeToFile.php 中的 q调用堆栈 #TimeMemoryFunctionLocation 10.0003252112{main}( )..\writeToFile.php **:** 0
> 
>  ***-------------------------------------------------- -------------------------- 为什么会出现上面的垃圾代码？提前谢谢。***

 **** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:16:32.067

检查是否`isset()`并退出脚本：

```
<?php
    if(isset($_POST["q"])){

        $clientData = $_POST["q"]; 
        $File = "WrittenByPHP.txt";
        $Handle = fopen($File, 'w');    
        $Data = $clientData;   
        fwrite($Handle, $Data);   
        fclose($Handle);
        die;
    }
?> 
```

您应该`q`在帖子中发送参数。

```
var params = "q="+document.getElementById('ta1').value;
xmlhttp.open("POST","ajax.php",true);
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.setRequestHeader("Content-length", params.length);
xmlhttp.setRequestHeader("Connection", "close");
xmlhttp.send(params); 
```

形式：

```
<form>
   <textarea name="q" onKeyUp="loadXMLDoc()" id="ta1" cols=40 rows=10></textarea>
</form> 
```

这将在每个`onKeyUp`，您应该将其更改为`onblur`***

# vb.net - 如何使用实体框架部署 Windows 窗体应用程序

> ID：12704405
> 
> 赞同：0
> 
> 时间：2012-10-03T08:14:04.587
> 
> 标签：vb.net

我正忙于开发自己的应用程序，它使用 sql server 数据库并通过实体框架连接。我使用存储过程来插入、更新、删除、从我的数据库中选择。

该应用程序即使在我发布时也能在我的机器上完美运行。但是当我尝试将应用程序安装到我朋友的计算机上时，我的问题就出现了。它崩溃并且无法启动，因为它无法连接到数据库。

有没有办法使用数据库发布我的应用程序，而无需将所有表、存储过程和数据库导入我朋友的电脑？我只想做到这一点，因此用户只需安装该应用程序即可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:15:51.703

您可以使用[SQL CE](https://en.wikipedia.org/wiki/SQL_Server_Compact)，但如果您更习惯在 SQL Server 中工作，您可能会发现在其中“设计”数据库会有些困难。

您是否考虑过 SQL Server Express 作为一种选择？

在连接字符串问题上，现在可以通过 Nuget 获得微软在 Visual Studio 中使用的数据连接向导；这使得添加一种在客户端机器上动态配置连接字符串的方法变得更加容易。

最后，实体框架的连接字符串与标准 SQL 连接字符串不同。在开始尝试以编程方式配置它们之前，请确保您清楚地了解它们之间的差异。Julie Lerman 关于实体框架的优秀书籍很好地解释了这些差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:33:28.367

你的应用程序依赖于数据库来工作，所以如果你想把它放在你朋友的电脑上，那么你需要让数据库在某个地方可用，无论是本地副本还是存储在运行 SQL 的服务器上的副本。

您如何存储连接字符串？它是在应用程序中硬编码还是您正在使用 app.config 文件？要执行您尝试执行的操作，您需要将连接字符串放入 app.config 文件中，以便您可以根据安装进行更改。

**要么**

如果您想在没有数据的情况下运行您的应用程序，请将演示标志或其他内容放入 app.config 文件中。将一些代码放入您的应用程序以检查此值，如果为真则绕过 SQL 代码并可能提供一些硬编码的演示数据。

这有意义吗？

# python - 将数据写入文本文件然后中途更改

> ID：12704418
> 
> 赞同：1
> 
> 时间：2012-10-03T08:14:49.337
> 
> 标签：python

我正在尝试将数据写入下一个文件，但在中途下，更改列的一个值，该值对于第一组行是恒定的。这是我的代码：

```
import random
import time

start_time = time.time() #time measurement
numpoints = 512
L = 20
d = 1
points = set()

# Open f and write
with open("question2.xyz","w") as f:
    f.write("%d\ncomment goes here\n" % numpoints) #this is for the 2nd line in my xyz 
    while len(points) < numpoints:
        p = (random.randint(0, L), random.randint(0, L), random.randint(0, L))
        if p not in points:
            points.add(p)
            f.write('H %f %f %f\n' % p) 
```

我的代码目前以这种格式生成一个 XYZ 文件

```
512 #number of
comment goes here
H 6.000000 19.000000 14.000000
H 11.000000 2.000000 7.000000
H 15.000000 20.000000 16.000000 
```

我在这里先向您的帮助表示感谢！

编辑，抱歉，这就是我想要实现的

```
512 #number of
comment goes here
H 6.000000 19.000000 14.000000
H 11.000000 2.000000 7.000000
H 15.000000 20.000000 16.000000
O 6.000000 19.000000 14.000000
O 11.000000 2.000000 7.000000
O 15.000000 20.000000 16.000000 
```

现在我的代码将 H 作为所有 512 行的第一个值，从第 256 行开始，我需要将其更改为 O

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:34:07.177

您可以使用生成器生成点和两个`for`循环：

```
def pointgen(used):
    while True:
        p = (random.randint(0, L), random.randint(0, L), random.randint(0, L))
        if p not in used:
            used.add(p)
            yield p

# Open f and write
with open("question2.xyz","w") as f:
    f.write("%d\ncomment goes here\n" % numpoints) #this is for the 2nd line in my xyz 
    pg = pointgen(points)
    for i in xrange(numpoints // 2):
        f.write('H %f %f %f\n' % pg.next())
    for i in xrange(numpoints // 2):
        f.write('O %f %f %f\n' % pg.next()) 
```

# android - 绘制具有多个 Y 轴与 X 轴的折线图

> ID：12704424
> 
> 赞同：1
> 
> 时间：2012-10-03T08:15:20.153
> 
> 标签：android, achartengine

我想针对两个 Y 轴和 X 轴绘制数据。我调试并在我这边做了所有事情，但是没有找到解决方案。我想将两条线绘制在同一个 X 轴上，但它不是那样的。

我的源代码：

```
public LinearLayout execute(Context context) {
        List<double[]> x = new ArrayList<double[]>();

        cigLen = CommentsDataSource.cigList.size();

        double xDays [] = new double [cigLen];

        // It will runtime decide how many days(X)
        for (int i = 0; i < cigLen; i++) {
            xDays[i] = i;
        }

        double cig [] = new double [cigLen];
        double points [] = new double [cigLen];

        String[] titles = new String[] { "Ciggars"};

        for (int i = 0; i < titles.length; i++) {
          x.add(xDays);
          x.toArray();
        }

        xLen = x.get(0).length;

        for (int i = 0; i < xLen ; i++){
            cig [i] =  CommentsDataSource.cigList.get(i);
            points [i] =  CommentsDataSource.pointList.get(i);           
        }

        List<double[]> values = new ArrayList<double[]>();
        // Add cigars values
        values.add(cig);
        values.toArray();

        // Set color of lines
        int[] colors = new int[] { Color.BLUE, Color.YELLOW };
        PointStyle[] styles = new PointStyle[] { PointStyle.CIRCLE, PointStyle.DIAMOND};

        XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer(2);
        setRenderer(renderer, colors, styles);
        int length = renderer.getSeriesRendererCount();
        for (int i = 0; i < length; i++) {
          ((XYSeriesRenderer) renderer.getSeriesRendererAt(i)).setFillPoints(true);
        }

        setChartSettings(renderer, "Average Cigeretes", "Days", "", 0, 7, 0, 50, Color.LTGRAY, Color.LTGRAY);
        // fragments on X and Y-axis to be divided
        renderer.setXLabels(7);
        renderer.setYLabels(10);
        renderer.setShowGrid(true);
        renderer.setXLabelsAlign(Align.RIGHT);
        renderer.setYLabelsAlign(Align.RIGHT);
        renderer.setZoomButtonsVisible(true);
        renderer.setZoomRate(1.05f);
        renderer.setLabelsColor(Color.WHITE);
        renderer.setXLabelsColor(Color.GREEN);

        renderer.setYLabelsColor(0, colors[0]);
        renderer.setYLabelsColor(1, colors[1]);

        //renderer.setYTitle("% Tar/Nicotine", 1);
        renderer.setYAxisAlign(Align.RIGHT, 1);
        renderer.setYLabelsAlign(Align.LEFT, 1);
        renderer.setYAxisAlign(Align.CENTER,1);
        renderer.setYAxisMin(0, 1);
        renderer.setYAxisMax(100, 1);
        //renderer.setXAxisMin(1);

        XYMultipleSeriesDataset dataset = buildDataset(titles, x, values);
        values.clear();

        // Add Tar/Nicotine values
        values.add(points);
        values.toArray();

        addXYSeries(dataset, new String[] { "% Tar/Nicotine" }, x, values, 1);

        // set background color
        renderer.setApplyBackgroundColor(true);     
        renderer.setBackgroundColor(Color.GRAY);
        renderer.setMarginsColor(Color.GRAY);

        GraphicalView gview = ChartFactory.getCubeLineChartView(context, dataset, renderer, 0.0f);

        LinearLayout lnr = null;
        lnr = new LinearLayout(context);
        lnr.addView(gview);

        return lnr;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:38:19.877

对此的解决方案是不调用该`setChartSettings`方法，因为它仅设置第一个比例轴的边界。

# jquery - 我可以在 web api 中访问 Sessionstate 吗？

> ID：12704428
> 
> 赞同：0
> 
> 时间：2012-10-03T08:15:30.540
> 
> 标签：jquery, asp.net-mvc-4, asp.net-web-api

我创建了一个 MVC 应用程序并在其中添加了新的 WebApi 控制器，称为 ReportsApiController。我在应用程序中创建了一个名为 Session["ReportId"]=5 的会话，并尝试从 Web Api 方法访问，但它抛出空引用异常。我正在使用 $.getJASON 方法访问 WebApi。让我知道如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:56:43.103

是的，如果 Web API 托管在将值存储在会话中的同一 Web 应用程序中，则可以：

```
HttpContext.Current.Session 
```

但你不应该这样做。这违反了 Web API 的无状态特性。如果您需要向此 API 传递一些信息，请不要使其依赖于某些会话状态。以模型的形式传递这些信息。或者，如果您不想传递复杂的数据，只需将此信息保存在某个通用数据存储（例如可能是数据库）中，然后仅将 id 传递给 Web API，以便它从数据存储中检索值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:54:28.300

开箱即用，Web API 是 STATELESS 服务，因此 Session 的东西不再适合，它不像 ASP.NET 的 web 表单，它用 Session、ViewState 模拟有状态的网站。

取决于你的情况，但`MemoryCache`如果你想缓存一些东西，你可以使用它。

# javascript - 获得用户确认后如何关闭浏览器选项卡？

> ID：12704430
> 
> 赞同：0
> 
> 时间：2012-10-03T08:15:33.070
> 
> 标签：javascript, jquery

我想在得到用户的确认后关闭一个标签。可以按以下方式完成 -

```
window.onbeforeunload = function() {
       return "Are you sure?";
} 
```

但是这段代码的问题是它显示了一些我不期望的消息。我想使用 javascript 的 confirm() 弹出窗口来完成这项任务。谁能帮我做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:25:03.337

这确实是处理这个问题的唯一方法。创建这些浏览器的软件公司竭尽全力确保这不会被滥用，这就是他们提出的解决方案。当用户关闭浏览器时，除了提供浏览器处理的字符串之外，您无法触发任何自定义 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:25:58.933

```
function closewindow() {
    if (confirm("Are you sure?")) {
        window.close();
    }
} 
```

# c++ - C++ 处理除以零的最佳方法

> ID：12704434
> 
> 赞同：1
> 
> 时间：2012-10-03T08:16:01.850
> 
> 标签：c++, divide-by-zero

我正在编写一个 C++ 类，它将一些双精度值存储在一个向量（称为 mpValues）中并计算它们的平均值。构造时，值数组为空，因此执行此计算将返回 0.0/0.0。

我决定要求零值的平均值是一个错误。因此，最好返回 NaN 并显示错误消息，以便用户意识到该问题。代码如下所示：

```
double Average::CalculateAverage() const
{
    if(mpValues->size() == 0){
        std::cerr << "Instance of Average at: " << this << " contains no values.\n"
                  << "In this case the arithmetic mean is defined as NaN." <<std::endl;

        return 0.0/0.0;
    }
    else{
        ...calculate the arithmetic mean
    }
} 
```

这是一种明智的方法，还是您有更好的建议？通常，我不会那么挑剔，但这是对工作机会的考验，所以我想避免做出错误的决定。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T08:23:07.223

标准选项是返回 NaN、抛出异常或返回选项，例如 boost::optional。每个都有优点和缺点，已经被无数人详细审查过。只是不要在函数中显示错误消息，因为这违反了[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T08:20:31.110

你已经回答了这个问题：

> 我决定要求零值的平均值是一个错误。

因此，无需返回 NaN 或处理零除法。您可以创建自己的异常类（例如 EmptyVectorError）并抛出并捕获它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T09:09:41.837

这是一个 C++ 问题，所以我们应该给出一个 C++ 答案。根据*单一职责原则*（Don Reba 提到），我们得出结论，从您的函数内部报告错误是不合适的。有两个主要选项。

**1**明确指定`average(container)`用空容器调用你是*未定义的行为*（UB）。这是 C++`std`库中许多算法的标准做法。它允许您忽略空容器的可能性并直接返回`sum/size()`。您可以`assert(size()>0);`在调试模式下添加（或类似的）。

**2**明确允许 API 中的空容器（我认为这是您想要的）。在这种情况下，退货`sum/size()`是不合适的。它可能会返回`NaN`或触发一个信号，具体取决于错误设置，但即使是 a`NaN`也不容易捕获（我认为`isnan()`它不是标准库函数）。所以你必须以一种干净的方式返回未定义的结果。这可以通过抛出一个适当的异常或返回一个类型来完成，例如`boost::optional<>`（usta 建议的），它明确允许一个不是错误的未定义值（与 不同`NaN`）`double`。

我认为抛出异常是 C++ 中最合适的方式（如果您选择选项 2）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T08:18:04.820

`boost::optional<double>`我建议将返回类型更改为。

[链接到文档](http://www.boost.org/doc/libs/1_51_0/libs/optional/doc/html/index.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-03T08:30:07.580

您有 2 个选项 - 返回 NaN 或抛出异常。你应该做什么，取决于使用情况。

1）客户端只显示平均值：那么我会选择简单地返回 NaN。这样，客户就不会被迫为他不关心的事情编写错误处理代码。

2）客户端使用平均值计算新值：那么这很困难。通过抛出一个异常，你强迫他明确地处理它。这可能是件好事。另一方面 - 据我所知，双值 NaN 可用于计算。这也取决于您的其他工作。如果你总是使用异常，你也应该使用一个。如果你总是使用错误代码，你应该使用 NaN。如果你混合 - 你应该清理它。

PS：我不会写 0.0/0.0 而是使用[std::numeric_limits](http://www.cplusplus.com/reference/std/limits/numeric_limits/)。它更容易阅读。

# qt - 标签不应放大 Qgraphicsitem

> ID：12704436
> 
> 赞同：1
> 
> 时间：2012-10-03T08:16:06.317
> 
> 标签：qt, qt-creator

我有 300k 个标签，我想在 QGraphicsItem 绘制事件中以不同的缩放级别添加它们。

```
void WorldLabels::paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget)
{
    painter->setBrush(Qt::red);
    for(int i=0 ;i<no.of labels ; i++)
    {
        painter->drawtext(position,label name);
    }
} 
```

问题是，当我缩放项目时，标签也会被缩放。

我不希望这样，我想保持我的标签尺寸与它们最初的一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:20:57.920

将子对象中的标签分开`QGraphicsTextItem`，并使用`QGraphicsItem::ItemIgnoresTransformations`标志将它们保持在相同的位置，但忽略视图/继承的转换。

# php - 点击buttonimage应该去search.php

> ID：12704437
> 
> 赞同：0
> 
> 时间：2012-10-03T08:16:15.873
> 
> 标签：php, javascript

```
<script>
    function loadXMLDoc() {
        $("input[class=search]").bind("keyup",function(){
            $.get("search.php?search="+$(this).val(), 
                  function(data){
                      if(data==1) {
                          alert("this is valid search")
                      } else {
                          alert("this is a right user search");
                      }
                  }
            );
        });
    }
</script> 
```

下面是按钮图像代码

```
<table width="165" border="0" cellspacing="0" cellpadding="0">
    <tr>
        <td>
            <img src="images/search_box_left_im.png" width="3" height="28" />
        </td>
        <td class="inputbox_bg" width="118px">
            <input type="text" name="search" class="username">
        </td>
        <td>
            <input type="image" onclick="loadXMLDoc()" src="images/search_go_btn.png" border="0" width="44" height="28" />
        </td>
    </tr>
</table> 
```

它正在执行该函数但不执行 ajax 代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:17:42.837

改变这个：

```
<script>
function loadXMLDoc()
{
$("input[class=search]").bind("keyup",function(){
 $.get("search.php?search="+$(this).val(),function(data){
    if(data==1){
      alert("this is valid search")
    }else{
      alert("this is a right user search");
    }
})

})
}
</script> 
```

对此：

```
<script>
function loadXMLDoc()
{
$("input[name=search]").bind("keyup",function(){ //<- important bit here
 $.get("search.php?search="+$(this).val(),function(data){
    if(data==1){
      alert("this is valid search")
    }else{
      alert("this is a right user search");
    }
})

})
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:18:04.150

Your `<input type="image" ... />` is a submit button for the form. What you want to do is change its default behaviour (submitting form) to alternative - execute some code. Here is a good question about this: [event.preventDefault() vs. return false](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)

Besides that, you are assigning an event listener twice - once in your `<input onclick="" />` and second time inside the event handler `$("input[class=search]").bind()`

Try removing your `<input onclick="" />` and define event listener in `$(document).ready()`:

```
<script>
$(document).ready(function() {
    $("input[class=search]").bind("keyup",function(e){
        e.preventDefault();
        $.get("search.php?search="+$(this).val(),function(data){
            if(data==1){
                alert("this is valid search")
            }else{
                alert("this is a right user search");
            }
        });
    });
});
</script>
...
<input type="image" src="images/search_go_btn.png" border="0" width="44" height="28" />
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:51:25.580

```
$(document).ready(function(){

$(".username").keyup(function(event){ //<- important bit here
 $.get("search.php?search="+$(this).val(),function(data){
    if(data==1){
      alert("this is valid search")
    }else{
      alert("this is a right user search");
    }

   });
});

$('input[type=image]').click(function() {
  $('.username').keyup();
});
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T08:54:35.277

请试试这个：

```
<script>
function loadXMLDoc() {
    $.ajax({
        type: 'GET',
        url: 'search.php?search='+$(".username").val(),
        success: function(data){                
          if(data==1) {
              alert("this is valid search")
          } else {
              alert("this is a right user search");
          }  
        }
    });
}
</script> 
```

# android - 如果应用程序停止，则通知不会在 Android 中显示

> ID：12704442
> 
> 赞同：0
> 
> 时间：2012-10-03T08:16:43.397
> 
> 标签：android, notifications

我正在为通知创建简单的应用程序。它正在正确显示通知但我的主要问题是，

为什么应用程序停止时不显示通知？任何特殊设置。请帮我。

应用程序停止： 1\. 设置/应用程序/管理应用程序 2\. 选择应用程序 3\. 强制停止

这样我就停止了我的申请谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:37:17.017

您需要进行服务开发以获取您的 android 应用程序的通知。您只需在您的 android 应用程序中启动该服务，即使您的应用程序停止，您的通知也不会影响。它将在后台以运行模式连续运行。

以下是您可以轻松学习的两个示例：

[Android 服务示例-1](http://androidtrainningcenter.blogspot.in/2012/04/simple-example-of-service-in-android.html)

[Android 服务示例-2](http://androidsourcecode.blogspot.in/2010/10/basic-android-background-service.html)

# iphone - 使用 CGAffineTransform 时限制 UIImageView 的大小

> ID：12704444
> 
> 赞同：0
> 
> 时间：2012-10-03T08:16:47.533
> 
> 标签：iphone, ios, uiimageview, scale, cgaffinetransform

我想在使用 CGAffineTransform 时限制我的 uiimageview 大小。我正在限制规模，但我不能限制我的 uiimageview 的大小。当我运行该应用程序时，我看到它是有限的，但在后台我的 uiimageview 的大小不断增加。我怎样才能做到这一点？

这是我的代码：

```
- (id)initWithFrame:(CGRect)frame
{
    if ([super initWithFrame:frame] == nil) {
        return nil;
    }

    originalTransform = CGAffineTransformIdentity;
    touchBeginPoints = CFDictionaryCreateMutable(NULL, 0, NULL, NULL);
    self.userInteractionEnabled = YES;
    self.multipleTouchEnabled = YES;
    self.exclusiveTouch = YES;

    return self;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
        NSMutableSet *currentTouches = [[[event touchesForView:self] mutableCopy] autorelease];
        [currentTouches minusSet:touches];
        if ([currentTouches count] > 0) {
            [self updateOriginalTransformForTouches:currentTouches];
            [self cacheBeginPointForTouches:currentTouches];
        }
        [super touchesBegan:touches withEvent:event];
        [self cacheBeginPointForTouches:touches];

}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    CGAffineTransform incrementalTransform = [self incrementalTransformWithTouches:[event touchesForView:self]];
    self.transform = CGAffineTransformConcat(originalTransform, incrementalTransform);

    CGAffineTransform transform = self.transform;
    float scale = sqrt(transform.a*transform.a + transform.c*transform.c);
    NSLog(@"%f",self.frame.size.height);

    if (scale > SCALE_MAX){
        self.transform = CGAffineTransformScale(transform, SCALE_MAX/scale, SCALE_MAX/scale);
    }
    else if (scale < SCALE_MIN){
        self.transform = CGAffineTransformScale(transform, SCALE_MIN/scale, SCALE_MIN/scale);
    }
    [super touchesMoved:touches withEvent:event];
}

-(void)updateOriginalTransformForTouches:(NSSet *)touches{
    CGAffineTransform transform = self.transform;
    float scale = sqrt(transform.a*transform.a + transform.c*transform.c);

    if (scale > SCALE_MAX){
        self.transform = CGAffineTransformScale(transform, SCALE_MAX/scale, SCALE_MAX/scale);
    }
    else if (scale < SCALE_MIN){
        self.transform = CGAffineTransformScale(transform, SCALE_MIN/scale, SCALE_MIN/scale);
    }

}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
        for (UITouch *touch in touches) {
            if (touch.tapCount >= 2) {
                [self.superview bringSubviewToFront:self];
            }
        }

        [self updateOriginalTransformForTouches:[event touchesForView:self]];
        [self removeTouchesFromCache:touches];

        NSMutableSet *remainingTouches = [[[event touchesForView:self] mutableCopy] autorelease];
        [remainingTouches minusSet:touches];

        [super touchesEnded:touches withEvent:event];
        [self cacheBeginPointForTouches:remainingTouches];

}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    [self touchesEnded:touches withEvent:event];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:28:14.320

您可以在**对其应用转换**之前知道`CGRect`，如下例所示：`UIImagView`

 **```
//Create transform
CGAffineTransform scaleTransform = CGAffineTransformMakeScale(1.2, 1.2);
//Apply transform on UIImageView to get CGRect
CRect  newRect = CGRectApplyAffineTransform(yourImgView.frame, scaleTransform);
//Check if rect is in valid limitation
if(newRect.size.height > 200 && newRect.size.width >200) //your condition to limit UIImageView's Size
{ 
   //Valid so apply transform
   yourImageView.transform = scaleTransform
} 
else
{
   //rect increases so no transform
   // no transform to UIImageView
   NSLog(@"%@",NSStringFromCGRect(yourImageView.frame))
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T12:20:33.103

我遇到了类似的问题，我有一个根据指南针航向数据旋转的图像视图，并且还必须根据界面方向的设备变化移动位置

我创建了一个 tempImageView 来帮助维护框架，并随着设备方向的每次变化而不断重置它

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    // equal tempImageView to imageView
    _tempImageView = [[UIImageView alloc] initWithFrame:CGRectMake(self.view.frame.size.width-75, 150, 64, 61)];
    [_tempImageView setImage:[UIImage imageNamed:@"image.gif"]];
    _tempImageView.transform = _imageView.transform;

    // reset imageView
    [_imageView removeFromSuperview];
    _imageView = _tempImageView;
    [self.view insertSubview:_imageView atIndex:1];
} 
```**

# google-maps - How can i force google autocomplete to not include any results that out for requested radius?

> ID：12704448
> 
> 赞同：0
> 
> 时间：2012-10-03T08:16:53.570
> 
> 标签：google-maps, google-places-api

I've got a problem with Google Autocomplete rest api.

I need to return predictions only for certain radius, but "radius" parameter doesn't filter incorrect results. Currently I get results from another cities and even other countries.

How can i force google autocomplete to not include any results that out of requested radius?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:19:57.670

You can use optional parameter `radius`.

> radius — The distance (in meters) within which to return Place results. Note that setting a radius biases results to the indicated area, but may not fully restrict results to the specified area. See [Location Biasing](https://developers.google.com/places/documentation/autocomplete#location_biasing).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:21:38.327

The only way I can see to force this is to do the filtering yourself in the result array that you get when performing the search. I haven't used the Autocomplete API, but it seems you are using the Maps API to search? In that case, you get [a GeocoderResult object](https://developers.google.com/maps/documentation/javascript/reference?hl=sv#GeocoderResult) which you can inspect the coordinates for the items, and compare them to your desired point and radius.

A bit hacky, but quite straightforward.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:37:04.287

This example (uses the Google Maps API v3 places library):

[http://www.geocodezip.com/v3_GoogleEx_place-search.html](http://www.geocodezip.com/v3_GoogleEx_place-search.html)

from this answer:

[Google places autocomplete - location and radius not working](https://stackoverflow.com/questions/11810810/google-places-autocomplete-location-and-radius-not-working)

uses rankby=distance

You can process the results to remove any not within your desired radius.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T05:00:58.037

The `location` and `radius` parameters only act as a bias to the results, there is currently no way to restrict results to a specific radius. You can however restrict results to a specific country by passing the `components` parameter as detailed in the [documentation](https://developers.google.com/places/documentation/autocomplete#place_autocomplete_requests).

If you use the `location`, `radius` and `component` parameters you will most likely get the desired results.

An example search for Eiffel Tower, with a lat,lng location in Melbourne, Australia, radius 50km, and country restrict to Australia returns "Eiffel Tower Chocolate & Confectionery" as the real Eiffel tower is not within the radius or in the country that the request is restricted to:

[https://maps.googleapis.com/maps/api/place/autocomplete/json?input=Eiffel+Tower&location=-37.816836,144.963123&radius=50000&components=country:au&sensor=false&key=your_api_key](https://maps.googleapis.com/maps/api/place/autocomplete/json?input=Eiffel+Tower&location=-37.816836,144.963123&radius=50000&components=country:au&sensor=false&key=your_api_key)

# facebook - 在三星智能电视应用中实现 facebook 登录

> ID：12704450
> 
> 赞同：0
> 
> 时间：2012-10-03T08:17:01.577
> 
> 标签：facebook, samsung-smart-tv

我想在我的三星智能电视应用程序中实现 facebook 登录和共享 facebook 的图像功能。有没有人知道如何在三星智能电视应用程序中实现这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:44:48.950

我相信弹出窗口在智能电视上被阻止了。我正在使用 LG 的模拟器来创建一个具有 facebook 登录功能的应用程序。为了解决 facebook 登录弹出问题，我不得不使用一个调用 facebook 全屏登录页面的模式窗口。然后回调您的应用程序。

:)

# webview - JavaFX WebView / WebEngine 自动为每个文本输入显示屏幕键盘

> ID：12704457
> 
> 赞同：4
> 
> 时间：2012-10-03T08:17:23.523
> 
> 标签：webview, keyboard, javafx, touchscreen

**背景/上下文：**

我正在使用 JavaFX 开发基于触摸屏的信息亭应用程序。该应用程序集成了浏览器——WebView。问题是所有用户输入都必须通过屏幕键盘（SW键盘）进行

如果可以选择在 WebView/WebEngine 上为任何获得/失去焦点的 HTML 文本输入元素注册事件处理程序，这样我就可以在屏幕键盘上显示/隐藏。
即使我搜索了互联网，我也没有找到这种功能。

**我的问题：**

JavaFX / WebView 是否为这些情况提供任何支持？

如果你要解决这个问题，你的方法是什么？

**到目前为止我的解决方案：**

我有一个小按钮（在屏幕的一个角落），允许用户显示/隐藏屏幕键盘。由于他们必须手动执行此操作，因此非常烦人。特别是在浏览（消费信息）和文本输入经常变化的网站上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T09:11:55.773

> 如果可以选择在 WebView/WebEngine 上为任何获得/失去焦点的 HTML 文本输入元素注册事件处理程序，这样我就可以在屏幕键盘上显示/隐藏。

这样做的潜在策略：

1.  从[jdk8 预览](http://jdk8.java.net/download.html)开始。
2.  运行应用程序`-Dcom.sun.javafx.isEmbedded=true`以启用虚拟键盘。
3.  使用 webengine.executeScript 技术[将 jQuery 嵌入到目标页面](https://forums.oracle.com/forums/thread.jspa?messageID=10444280)中。
4.  [将jQuery 焦点处理程序](http://api.jquery.com/focus/)绑定到相关的 html 元素。
5.  在 jQuery 焦点处理程序中进行[从 JavaScript 到 Java 的 Upcall](http://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm)。
6.  收到 upcall 后，请使用[JavaFX 的 Virtual Keyboard](http://jdk7.java.net/fxarmpreview/javafx-arm-developer-preview.html#disablingvirtualkeyboard)。
7.  当用户在键盘中输入值时，调用 executeScript 来设置相应 html 字段的值。

有些部分可能会有点（或完全）片状，但也许其他部分可能对您有用。

将来，如果嵌入式设备的触摸屏平台支持 WebView，我猜它开箱即用，它可以很好地与虚拟键盘配合使用。

![在此处输入图像描述](../Images/3096471a3903eeb8ebd03f1ba5dbb3fc.png)

# mercurial - 确定远程服务器上的子存储库中的更改，而无需在主存储库中提交

> ID：12704458
> 
> 赞同：0
> 
> 时间：2012-10-03T08:17:23.533
> 
> 标签：mercurial, subrepos, mercurial-subrepos

我想将分层结构与 mercurial 存储库一起使用。

**结构**

```
_Main  
Main/sub1  
Main/sub2_ 
```

**.hgsub**

```
sub1=sub1  
sub2=sub2  
[subpaths]  
somepath/Main/sub1=somepath/sub1  
somepath/Main/sub1=somepath/sub2 
```

然后我的同事将只修改***sub1***存储库，他们将没有***Main***存储库。
我如何确定 sub1 中的更改比我的同事所做的更改。***如果这些更改未在主***
**存储库中提交， hg pull**不会看到这些更改。

 *或者它的结构不正确，我必须给我的同事***Main*** repository 包含***sub1***的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:24:39.913

您需要专门提取和更新每个子存储库以获取它们的更改。例如：

```
> hg pull -u -R sub1
> hg pull -u -R sub2 
```

然后，这将更改您的`.hgsubstate`文件以指示`Main`应使用每个子存储库的最新版本。在进行拉取后，您需要提交此更改。

如果您自己对子存储库进行了任何更改，则需要在提交`Main`存储库之前正常合并（或变基）并提交这些更改。*

# javascript - 在不使用 Flash 的情况下实现 ctrl+x 的行为与 ctrl+c 相同

> ID：12704461
> 
> 赞同：0
> 
> 时间：2012-10-03T08:17:50.403
> 
> 标签：javascript, html, selection

在我的 Web 应用程序中，我需要一个快捷键 ctrl+x 来讨厌与 ctrl+c 相同的行为

段落被选中（选择不在文本区域或文本输入中）。我需要不使用 Flash 的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:47:39.937

首先，您必须阻止对剪切事件的默认操作。您可以通过以下代码执行此操作：

```
$(document).ready(function(){
      $('#input').live("cut",function(e) {
             e.preventDefault();

      });
    }); 
```

大多数浏览器会阻止对剪贴板的控制。虽然我知道存在以下 jQuery 插件，它可以让您对其进行一些控制：[zeroclipboard](http://code.google.com/p/zeroclipboard/)

**注意：**您必须使用不想使用的 Flash 插件将文本自动复制到客户端的剪贴板。一个网站在没有 active-x 组件的帮助下自动修改客户端的剪贴板是一个安全问题。

# ruby - 浮动域错误

> ID：12704462
> 
> 赞同：7
> 
> 时间：2012-10-03T08:17:53.490
> 
> 标签：ruby, ruby-on-rails-3

刚刚在我的应用程序中收到“FloatDomainError”，消息“NaN”，服务器通常会在其中描述攻击。服务器错误页面将我指向这些行（嗯，第一行）：

```
n = ((self.weight * (c.percent)/100) / c.package_weight).to_i
n.times do 
```

问题似乎出在 .to_i 上，它旨在将总计为 8.35 的值转换为整数，这样我就可以做 n.times 了。

问题是，如果我把 to_i 拿走，我会得到一个错误，从逻辑上讲，float 8.35 没有方法“times”。但我不明白为什么它不让我将 8.35 舍入为整数。我也尝试过 .floor，但我得到了 FloatDomainError。

关于如何解决这个问题以便我可以让它工作的想法？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-03T08:21:28.770

此错误表示您尝试将 NaN 值转换为 int。NaN 代表“不是数字”。这可能意味着您的计算有缺陷，并且不会导致 8.35。也许 的值`c.package_weight`为零，你除以它。

# javascript - 可以控制 JavaScript 代码的可访问标签或 DOC 吗？

> ID：12704469
> 
> 赞同：0
> 
> 时间：2012-10-03T08:18:34.693
> 
> 标签：javascript, javascript-framework

我对JavaScript一无所知，想知道...在html页面中，我们有脚本A（在标签中），其中A在`<div>`标签中。

我们如何防止 JavaScript A 访问其他或特殊标签？可以通过另一个 JavaScript 在单独的标签中应用它吗？

例如在此页面中：

```
<html>
...
<tag1>
<script> A</script>
</tag1>
....
<tag2> ... </tag2>
...
</html> 
```

我们希望脚本 A 只能访问内容。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:30:15.310

您可以将来自不同域的页面加载到 中，由于[相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)`<iframe>`，不应允许 JavaScript 访问该页面。

# javascript - 将xml嵌套到jquery中的无序列表中

> ID：12704470
> 
> 赞同：1
> 
> 时间：2012-10-03T08:18:41.453
> 
> 标签：javascript, jquery, html, xml, html-lists

我正在尝试使用 jquery 将嵌套的 xml 文档转换为无序列表。xml 文档是

```
 <?xml version="1.0" encoding="utf-8"?>
    <Parent>
    <name>Director</name>
    <Children>Exe Director1</Children>
    <Children>Exe Director2</Children>
    <Parent>
        <name>Exe Director3</name>
        <Children>Sub Director 1</Children>
        <Children>Sub Director 2</Children>
        <Parent>
            <name>Sub Director 3</name>
            <Children>Cameraman 1</Children>
            <Children>Cameraman 2</Children>
        </Parent>
    </Parent>    
</Parent> 
```

预期输出：

```
 <ul>
    <li>Director
        <ul>
            <li>Exe Director 1</li>
            <li>Exe Director 2</li>
            <li>Exe Director 3
                <ul>
                    <li>Sub Director 1</li>
                    <li>Sub Director 2</li>
                    <li>Sub Director 3
                        <ul>
                            <li>Cameraman 1</li>
                            <li>Cameraman 2</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

我得到的输出。

```
 <ul>
        <li>Director</li>
        <ul>
            <li>Exe Director1</li>
            <li>Exe Director2</li>
            <li>Exe Director3</li>
            <ul>
                <li>Sub Director 1</li>
                <li>Sub Director 2</li>
                <li>Sub Director 3</li>
                <ul>
                    <li>Cameraman 1</li>
                    <li>Cameraman 2</li>
                </ul>
            </ul>
        </ul>
    </ul> 
```

如您所见，子代不是在父代内部`li`而是在其外部创建的最新版本的代码

```
 <!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
    var levels;
    $(document).ready(function() 
    {
        $.ajax({
            type: "GET",
            url: "test.xml",
            dataType: "xml",
            success: function (xml) { 
                var $ul = xmlParser(xml, $('#ListContainer'));
            }
        });
    });

    function xmlParser(xml,ul) {
        $(xml).contents().each(function (i, el) 
        {
            if (el.nodeName.toUpperCase() == "CHILDREN") 
            {
               $("<li>").text($(el).text()).appendTo($('ul:last')); // Append <li> Children
            } else if (el.nodeName.toUpperCase() == "NAME") 
            {
                $('<li>').text($(el).text()).appendTo(ul);
                $('<ul>').insertAfter($("li:last"));
            }
            else if (el.nodeName.toUpperCase() == "PARENT") 
            {
               if($('ul').length == 0)
                {
                    ul = ul.append('<ul>');
                }
                ul.append(xmlParser($(el),$("ul:last") )); // Recursively append the other Parent
            }
        });
        return ul;
    }
</script>
</head>
<body>
    <div id="ListContainer"></div>
</body>
</html> 
```

我对这段代码感到头疼。你们能帮我解决可能出现的问题吗！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:58:31.120

我的建议是递归地使用 jQuery 的 map 函数，如下例所示：

```
<script type="text/javascript">
$(function() {
    var map = function() {
            if ($(this).is("parent")) {
                var children = $(this).children().map(map).get().join('');
                $(this).children().remove();
                var result = "<li>" + $(this).text();
                return result + "<ul>" + children + "</ul></li>";
            }

            if ($(this).is("Children")) {
                return "<li>" + $(this).text() + "</li>";
            }
        };

    $.get("test.xml", function(data) {
        var result = $(data).map(map);
        $("div").html("<ul>" + result[0] + "</ul>");
    }, "html");
}); 
</script> 
```

这确保了输入树被完全遍历，并且结果输出具有与输入相同的“缩进”。

请注意，它`map()`返回一个数组，因此结果字符串作为数组的第一项存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:26:07.297

这是将我的评论合并为一个连贯的答案-->

1.  退出`$("#ListContainer").append($ul);`递归；
2.  创建`<UL>`外部`xmlParser()`方法并将其作为 parentElem 传递。例如`var $ul = xmlParser(xml, $('<ul>')); $("#ListContainer").append($ul)`（在 $.ajax 的成功回调中）
3.  作为函数`$ul`的输出结果返回`xmlParser()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T08:52:30.753

您将 PARENT 元素附加到所有“PARENT”内容的相同“ul”元素。利用

```
 $ul.find('li').last().append(xmlParser($(el))); 
```

代替

```
 $ul.append(xmlParser($(el))); 
```

最后一个api参考下面的链接：

[http://api.jquery.com/last/](http://api.jquery.com/last/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T10:34:51.453

您将 PARENT 元素附加到所有“PARENT”内容的相同“ul”元素。利用

```
$ul.find('li').last().append(xmlParser($(el))); 
```

代替

```
$ul.append(xmlParser($(el))); 
```

# jquery - for 循环动画元素 - 检查循环的顶部位置

> ID：12704474
> 
> 赞同：1
> 
> 时间：2012-10-03T08:18:57.773
> 
> 标签：jquery, for-loop, jquery-animate, position

我有以下使用 jquery 代码的 javascript：

```
function MakeAnimation(anim_times)
{
    for (k=1; k<=anim_times; k++)
    {
        if ( $("#one").position().top >= 250 ) {
            $("#one").animate({ top: '50px' }, 200, function() {});
        } else {
            $("#one").animate({ top: '+=50' }, 200, function() {});
        }
    }
} 
```

并在 html 正文上：

```
<button onclick="MakeAnimation(1);">step 1</button>
<button onclick="MakeAnimation(20);">step 20</button>
<div id="one" style="background-color:red; width:100px; height:100px; position:absolute; top:50px;"></div> 
```

两个按钮调用相同的函数，但是当函数调用 20 次 for 循环时......第 5 行 [ if ( $("#one").position().top >= 250 ) { ] 不起作用

有什么建议么 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:03:25.023

## *[jsBin 演示](http://jsbin.com/ucures/1/edit)*

您需要做的就是乘以被调用的次数，`n`没有**循环**，并且......`MakeAnimation`

 **您只需要使用**step**函数来检索顶部位置属性值。不要害怕，默认情况下它在`animation`方法内部可用：

```
function MakeAnimation(n){
  n=n+1;         // I used n=n+1 cause you already start from 50px top...
  $('#one').animate({ top: 50*n },{
       step: function(now) {     // the step function!
          if(now>=250){
              $(this).stop().animate({top: 50 }, 200);
          }
       },
       easing: 'linear',  // the default easing in animations is 'swing'
       duration: 200*n
    }); 
} 
```

来自文档：[http ://api.jquery.com/animate/#step](http://api.jquery.com/animate/#step)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:29:25.990

似乎按预期工作。我为此创建了一个[小提琴](http://jsfiddle.net/kayen/2dM9V/1/)。

对不起这是我的错！要回答 AkisC 的问题，`for`循环是同步的，但是`animations`是异步的（参考[Wait for a jQueryanimation to complete inside for loop](https://stackoverflow.com/questions/8252184/wait-for-a-jqueryanimation-to-complete-within-for-loop)）。因此，对于第二个按钮，我们总是将“50”作为每次迭代的最高值，并且`if ( $("#one").position().top >= 250 ) {`永远不会执行。

我用新方法修改了我的小提琴：http: [//jsfiddle.net/kayen/3SSeu/](http://jsfiddle.net/kayen/3SSeu/)**

# jquery - jQuery Mobile 翻转开关样式

> ID：12704480
> 
> 赞同：1
> 
> 时间：2012-10-03T08:19:17.533
> 
> 标签：jquery, css, mobile

我发现可以使用以下代码自定义 jQuery Mobile 翻转开关的字体、颜色和字体大小

**CSS**

```
.contel *{font-family:arial !important;color:red !important;font-size:0.8em !important} 
```

**标记**

```
<div class="contel">
 <select name="flip-1" id="flip-1" data-role="slider">
<option value="off">Off</option>
<option value="on">On</option>
 </select>
</div> 
```

这非常好，但我需要做的是在运行时逐个应用这种样式，而不是从静态 CSS 中。

然后问题归结为这个 - 有没有办法通过 jQuery 实现这一点？我已经尝试过类似的事情

```
$.each($('.contel > *'),function(ndx,e){$(e).css('fontFamily','arial')}); 
```

但它没有任何效果。我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:30:22.953

为什么不上课，然后当事件被触发时

```
.addClass() ; 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:40:39.710

发布此查询后，我在封面下进行了更深入的研究，并发现了一些有趣的事情。

*   Firstly, the jQuery > selector only returns child elements. In the case of the flip switch the element to be styled is actually a grandchild. So my code should have been

    $.each($('.contel > * > span'),function(ndx,e){$(e).css('fontFamily','arial')});

since the grandchild in question that requires styling is actually a span element. But this is where things start getting curious

That line of code turns

```
<span class="ui-slider-label ui-slider-label-a ui-btn-active ui-btn-corner-all" role="img" style="width: 0%; ">On</span> 
```

into

On

i.e. gives the element an inline styling.

If instead I define a class

```
.georgia{font-family:georgia !important} 
```

the new code is

```
<span class="ui-slider-label ui-slider-label-a ui-btn-active ui-btn-corner-all georgia" role="img" style="width: 0%; ">On</span> 
```

i.e. the elment gets a new class tagged on to it.

Contrary to what the jQuery Mobile documentation suggests this upstyles the element as expected, even without issuing a slider('refresh'). However, the css modification that gives the element additional inline styling does not.

It is not clear to me why this could be happening. Hopefully, there is someone out here who has a better understanding of CSS3 and jQuery who can shed some light on this?

# c# - 如何使用 Aspose 6.4 将 PowerPoint 文件转换为 PDF？

> ID：12704481
> 
> 赞同：2
> 
> 时间：2012-10-03T08:19:32.183
> 
> 标签：c#, asp.net, aspose

我正在使用`aspose.slides.dll`v6.4.0 将`.pptx`文件转换为`.pdf`.

我的代码：

```
public static MemoryStream pptx2Pdf(byte[] FileRead)
{
    MemoryStream ResultStream = new MemoryStream();
    Aspose.Slides.Pptx.PresentationEx pres = new Aspose.Slides.Pptx.PresentationEx(new MemoryStream(FileRead));
    pres.Save(ResultStream, Aspose.Slides.Export.SaveFormat.Pdf);
    return ResultStream;
} 
```

但是当调用该方法时，会显示以下异常并且文件未转换：

> 尝试通过安全透明方法 'ns3.Class115.smethod_6(System.Drawing.Imaging.BitmapData, Boolean)' 访问安全关键方法 'System.Runtime.InteropServices.Marshal.Copy(IntPtr, Byte[], Int32, Int32)'失败的。
> 
> 程序集 'Aspose.Slides, Version=6.4.0.0, Culture=neutral, PublicKeyToken=null' 用 AllowPartiallyTrustedCallersAttribute 标记，并使用 2 级安全透明模型。2 级透明度会导致 AllowPartiallyTrustedCallers 程序集中的所有方法默认变为安全透明，这可能是此异常的原因。

我试图搜索有关此异常的详细信息，但找不到任何相关信息。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:48:19.787

您的代码片段看起来不错，而且您正在使用 Aspose.Slides for .NET 6.4.0。我建议您尝试使用[Aspose.Slides for .NET 6.6.0](http://www.aspose.com/community/files/51/.net-components/aspose.slides-for-.net/default.aspx)，这是目前最新的可用版本。我希望新版本能够正常工作。即使有问题，请在 Aspose.Slides 论坛上与我们分享示例演示文稿。我们将有义务帮助您。

# android - 如何在列表视图中使用 OnItemClickListener 执行 onclick 子视图（按钮）

> ID：12704490
> 
> 赞同：0
> 
> 时间：2012-10-03T08:20:16.303
> 
> 标签：android, android-layout, android-intent, onclick, onitemclicklistener

任何人都可以给我一个例子/帮助我如何在下一个活动中执行 onclick 按钮。我的自定义列表视图包含文本、按钮和滚动索引..我在点击按钮上遇到问题..我从 3 天开始尝试了很多但没有用..如果有人能告诉我如何使用 onitemclickchildview(button(btnlist) ..正如我在一些文档中看到的那样，他们告诉listview是父级，而listview内的项目/内容/数据是子级..我希望子按钮（btnlist）可以点击。请帮助它..提前谢谢你。

homemplebrowview.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="100dip"
android:descendantFocusability="beforeDescendants"
android:padding="5dip" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="100dip"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:background="@drawable/list_selector"
    android:orientation="horizontal"
    android:padding="5dip" >

    <TextView
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:textColor="#663333"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/name"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="21dp"
        android:textColor="#666666"
        android:text="MRN:" />

    <TextView
        android:id="@+id/mrn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView4"
        android:layout_alignBottom="@+id/textView4"
        android:layout_marginLeft="24dp"
        android:textColor="#666666"
        android:layout_toRightOf="@+id/textView4"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/name"
        android:layout_marginLeft="63dp"
        android:layout_toRightOf="@+id/mrn"
        android:textColor="#666666"
        android:text="Actual Start Date:"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/textView6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/mrn"
        android:layout_alignBottom="@+id/mrn"
        android:layout_alignLeft="@+id/textView2"
        android:textColor="#666666"
        android:text="Age:"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/textView7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView6"
        android:layout_below="@+id/textView6"
        android:textColor="#666666"
        android:text="Gender"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/date"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textView6"
        android:layout_marginLeft="58dp"
        android:layout_toRightOf="@+id/textView2"
        android:textColor="#666666"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/age"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView6"
        android:layout_alignBottom="@+id/textView6"
        android:layout_alignRight="@+id/date"
        android:textColor="#666666"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/gender"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView7"
        android:layout_alignBottom="@+id/textView7"
        android:layout_alignLeft="@+id/age"
        android:textColor="#666666"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/date"
        android:layout_alignBottom="@+id/date"
        android:layout_marginLeft="119dp"
        android:layout_toRightOf="@+id/date"
        android:textColor="#666666"
        android:text="Ward No:"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/textView12"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/age"
        android:layout_alignBottom="@+id/age"
        android:layout_alignLeft="@+id/textView3"
        android:textColor="#666666"
        android:text="Room No:"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/textView13"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView12"
        android:layout_alignParentBottom="true"
        android:textColor="#666666"
        android:text="Bed No:"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/wardno"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView3"
        android:layout_alignBottom="@+id/textView3"
        android:layout_marginLeft="60dp"
        android:layout_toRightOf="@+id/textView3"
        android:textColor="#666666"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/roomno"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView12"
        android:layout_alignBottom="@+id/textView12"
        android:layout_alignLeft="@+id/wardno"
        android:textColor="#666666"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/bedno"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView13"
        android:layout_alignBottom="@+id/textView13"
        android:layout_alignLeft="@+id/roomno"
        android:textColor="#666666"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <Button
        android:id="@+id/listbutton"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/name"
        android:layout_marginRight="43dp"   
        android:focusable="false"      
        android:text="Episode"
        android:textColor="#666666" />

</RelativeLayout>

</RelativeLayout> 
```

MainActivity.java

```
 public class MainActivity extends Activity implements
    SearchView.OnQueryTextListener, SearchView.OnCloseListener, OnClickListener{

private ListView listView;

private SearchView search;
EfficientAdapter objectAdapter; 
int textlength = 0;
private CheckBox checkStat, checkRoutine, checkTat;
private ArrayList<Patient> patientListArray;
private Patient patient;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.homempleb);
    Log.i("scan", " txtScanResult ");

    ActionItem nextItem = new ActionItem();
    final QuickAction quickAction = new QuickAction(this,
            QuickAction.VERTICAL);
    quickAction.addActionItem(nextItem);
    quickAction.setOnDismissListener(new QuickAction.OnDismissListener() {
        @Override
        public void onDismiss() {
            Toast.makeText(getApplicationContext(), "Dismissed",
                    Toast.LENGTH_SHORT).show();
        }
    });

  listView = (IndexableListView) findViewById(R.id.homelistView);
    //listView = (ListView) findViewById(R.id.homelistView);      
    listView.setTextFilterEnabled(true);
    listView.setFastScrollEnabled(true);
    //listView.setItemsCanFocus(true);
    listView.setClickable(false);
    listView.addStatesFromChildren();
    objectAdapter = new EfficientAdapter(this);     
    listView.setAdapter(objectAdapter);     

}

@Override
public boolean onClose() {
    return false;
}

@Override
public boolean onQueryTextChange(String newText) {
    return false;
}

@Override
public boolean onQueryTextSubmit(String query) {
    return false;
}

    **

@Override
public void onClick(View v) {
    Toast.makeText(MainActivity.this, "STAT", Toast.LENGTH_SHORT).show();       
    Intent next = new Intent(MainActivity.this, SeviceDetails.class);
   // Log.i("patient", " next "+ position + " onclickposition " + patientListArray.get(position).getMrnNumber());

    Log.i("DDDD ", patient.getMrnNumber());             

    System.out.println("patient"+ patient);
    startActivity(next);    

}

    **

  } 
```

高效适配器.java

```
 public class EfficientAdapter extends BaseAdapter implements SectionIndexer {
IndexableListView mListView;
private String mSections = "#ABCDEFGHIJKLMNOPQRSTUVWXYZ";
ArrayList<Patient> patientListArray;

private Intent intent;
private Patient patient;
private LayoutInflater mInflater;
private Context context;
private int positions;
ViewHolder holder;
private String position;

public EfficientAdapter(Context context) {
    mInflater = LayoutInflater.from(context);
    this.context = context;

    String patientListJson = CountriesList.jsonData;
    JSONObject jssson;
    try {
        jssson = new JSONObject(patientListJson);
        patientListJson = jssson.getString("PostPatientDetailResult");
    } catch (JSONException e) {
        e.printStackTrace();
    }
    Gson gson = new Gson();
    JsonParser parser = new JsonParser();
    JsonArray Jarray = parser.parse(patientListJson).getAsJsonArray();
    patientListArray = new ArrayList<Patient>();
    for (JsonElement obj : Jarray) {
        Patient patientList = gson.fromJson(obj, Patient.class);
        patientListArray.add(patientList);
    //  Log.i("patientList", patientListJson);

    }
}

public int getCount() {

    return patientListArray.size();
}

public Object getItem(int position) {

    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(final int position, View convertView, ViewGroup parent) {

    this.positions = position;      
    View rowView = convertView;

    if (rowView  == null) { 
        Log.i("row", "Inside IF");
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        rowView = inflater.inflate(R.layout.homemplebrowview, null); 

        holder = new ViewHolder();
        holder.text1 = (TextView) rowView.findViewById(R.id.name);
        holder.text2 = (TextView) rowView.findViewById(R.id.mrn);
        holder.text3 = (TextView) rowView.findViewById(R.id.date);
        holder.text4 = (TextView) rowView.findViewById(R.id.age);
        holder.text5 = (TextView) rowView.findViewById(R.id.gender);
        holder.text6 = (TextView) rowView.findViewById(R.id.wardno);
        holder.text7 = (TextView) rowView.findViewById(R.id.roomno);
        holder.text8 = (TextView) rowView.findViewById(R.id.bedno);

    **  holder.btnList = (Button) rowView.findViewById(R.id.listbutton);**

        rowView.setTag(holder);
    } else {
        holder = (ViewHolder) rowView.getTag();
    }
    Log.i("row", "Inside ELSE");

    holder.text1.setText(Util.formatN2H(patientListArray.get(position)
            .getName()));
    holder.text2.setText(patientListArray.get(position).getMrnNumber());
    holder.text3.setText(Util.formatN2H(patientListArray.get(position)
            .getRoom()));
    holder.text4.setText(Util.formatN2H(patientListArray.get(position)
            .getAge()));
    holder.text5.setText(Util.formatN2H(patientListArray.get(position)
            .getGender()));
    holder.text6.setText(Util.formatN2H(patientListArray.get(position)
            .getWard()));
    holder.text7.setText(Util.formatN2H(patientListArray.get(position)
            .getRoom()));
    holder.text8.setText(Util.formatN2H(patientListArray.get(position)
            .getBed()));        

**  holder.btnList.setOnClickListener(((MainActivity) context));  **

return rowView;
}       

static class ViewHolder {
    public Button btnList;
    public TextView text8;
    public TextView text7;
    public TextView text6;
    public TextView text5;
    public TextView text4;
    public TextView text1;
    public TextView text2;
    public TextView text3;
}

@Override
public void notifyDataSetChanged() {
    super.notifyDataSetChanged();
}

public int getPositionForSection(int section) {
    sortMyData();

    Log.i("getPositionForSection", "section" + section);
    // If there is no item for current section, previous section will be
    // selected
    for (int i = section; i >= 0; i--) {
        for (int j = 0; j < getCount(); j++) {
            if (i == 0) {

                Log.i("getPositionForSection- i", "section" + i);
                // For numeric section
                for (int k = 0; k <= 9; k++) {

                    if (StringMatcher.match(
                            String.valueOf(patientListArray.get(j)
                                    .getName().charAt(0)),
                            String.valueOf(k)))
                        Log.i("getPositionForSection- j", "section" + j);

                        return j;
                }
            } else {
                if (StringMatcher.match(
                        String.valueOf(patientListArray.get(j).getName()
                                .charAt(0)),
                        String.valueOf(mSections.charAt(i))))
                    return j;
            }
        }
    }
    return 0;
}

public int getSectionForPosition(int position) {
    return 0;
}

public Object[] getSections() {
    String[] sections = new String[mSections.length()];
    for (int i = 0; i < mSections.length(); i++)
        sections[i] = String.valueOf(mSections.charAt(i));
    return sections;
}

/**
 * sorting the patientListArray data
 */
public void sortMyData() {
    // sorting the patientListArray data
    Collections.sort(patientListArray, new Comparator<Object>() {
        @Override
        public int compare(Object k1, Object k2) {
            Patient p1 = (Patient) k1;
            Patient p2 = (Patient) k2;
            return p1.getName().compareToIgnoreCase(p2.getName());
        }

    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:22:17.713

```
holder.btnList.setOnClickListener(new OnClickListener(){
     @Override
     public void onClick(View v){
     //youre code

     }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:29:40.233

我不确定你的代码，它太乏味了。但是我以前也遇到过同样的问题，我解决了如下。在您的适配器中，您需要为该按钮设置点击监听器并向其添加标签。

```
holder.btnList.setOnClickListener(((MyActivity) context)); 
```

`context`您传递给适配器的上下文在哪里，以及`MyActivity`要在其中处理单击的任何活动。因此，当您单击按钮时，`MyActivity`将调用 's on click 侦听器。如果您希望传递任何数据，您还可以将标签添加到持有者对象。然后在`MyActivity`您实施`onClickListener`. 您可以在`MyActivity`. 如果您有任何疑问，请发表进一步的疑问。

# jaxb - JaxB Xpath：如何对同一个 java bean 使用多个 xpath？

> ID：12704491
> 
> 赞同：2
> 
> 时间：2012-10-03T08:20:23.750
> 
> 标签：jaxb, for-xml-path

我需要使用 jaxb 生成 xml，如下所示：

```
<item>
    <key1 id="default">value1</key1>
    <key2 id="default">value2</key2>
    <key3 id="default">value3</key3>
</item> 
```

如何在 jaxb 中使用 @XmlPath 来做到这一点？

我用过以下一个。但我有多个 50 左右的键。如何实现这一点？

```
 @XmlPath("key1/@id")
    private String attrValue = "default"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:42:35.480

`@XmlPath`[**是JAXB (JSR-222)的**](http://jcp.org/en/jsr/detail?id=222)[**EclipseLink MOXy**](http://www.eclipse.org/eclipselink/moxy.php)实现中的一个扩展。您将需要使用 MOXy 映射文件中的等效项来获得所需的行为。[](http://jcp.org/en/jsr/detail?id=222)

 ****oxm.xml**

您正在寻找的是为字段/属性应用多个可写映射的能力。这目前无法通过注释来完成，但可以使用 MOXy 的外部映射文档来完成。

```
<?xml version="1.0"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum12704491">
    <java-types>
        <java-type name="Item">
            <java-attributes>
                <xml-element java-attribute="attrValue" xml-path="key1/@id"/>
                <xml-element java-attribute="attrValue" xml-path="key2/@id" write-only="true"/>
                <xml-element java-attribute="attrValue" xml-path="key3/@id" write-only="true"/>
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

**物品**

```
package forum12704491;

import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Item {

    private String attrValue;
    private String key1;
    private String key2;
    private String key3;

} 
```

**jaxb.properties**

为了将 MOXy 指定为您的 JAXB 提供程序，您需要`jaxb.properties`使用以下条目添加一个在与域模型相同的包中调用的文件（请参阅： [http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy -as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

下面的演示代码演示了如何使用 MOXy 的外部映射文档进行引导。

```
package forum12704491;

import java.io.File;
import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(1);
        properties.put(JAXBContextProperties.OXM_METADATA_SOURCE, "forum12704491/oxm.xml");
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Item.class}, properties);

        File xml = new File("src/forum12704491/input.xml");
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Item item = (Item) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(item, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<item>
   <key1 id="default">value1</key1>
   <key2 id="default">value2</key2>
   <key3 id="default">value3</key3>
</item> 
```**

# jquery - JQuery Selectable - 取消当前选中的元素

> ID：12704494
> 
> 赞同：8
> 
> 时间：2012-10-03T08:20:39.287
> 
> 标签：jquery, jquery-ui-selectable

我有一个包含不同元素的列表。我希望所有人都可以选择，但只能分组。喜欢：

```
<ul>
<li rel="group1">Item 1</li>
<li rel="group1">Item 2</li>
<li rel="group2">Item 3</li>
<li rel="group2">Item 4</li>
<li rel="group3">Item 5</li>
<li rel="group3">Item 6</li>
</ul> 
```

我写了一些可以工作的东西，但是如果当前的元素 rel 属性与第一次选择的不同，我不知道如何取消当前选择。

```
 var selected = null;

    $( "#selectable" ).selectable({
        selecting: function(event, ui) {
            if (!selected)
                selected = $(ui.selecting).attr('rel');

            if (selected != $(ui.selecting).attr('rel')){
               // cancel this selection
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:51:29.860

您可以使用该[`filter`](http://jqueryui.com/demos/selectable/#option-filter)选项仅启用要选择的某些列表项。

我为你准备了这个[**DEMO**](http://jsfiddle.net/2uCJ6/1/)，过滤器只有一个问题。从处理程序中更改启用的项目时，它不起作用`selecting`。所以我在`stop`处理程序中添加了一个小修复，我从未启用的项目中删除了选择。

您的脚本可能如下所示：

```
var locked = false;

function enableAll() {
    $('li').addClass('enabled');
    locked = false;
}

$("#selectable").selectable({

    // allow only enabled items to be selected
    filter: '.enabled',

    selecting: function(event, ui) {

        if (!locked) {

            var group = $(ui.selecting).attr('rel');

            // disable all items belonging to other groups
            $("#selectable li[rel!='" + group + "']").removeClass('enabled');

            locked = true;
        } 

    },

    stop: function() {

        // this fixes selectable behavior 
        // (it ignores dynamically added filter while selecting)
        $(this).find('li.ui-selected:not(.enabled)').removeClass('ui-selected');

        // if no item is selected, then enable all groups
        if($(this).find('.ui-selected').length == 0) {
            enableAll();
        };
    }

});

// initialize
enableAll();​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T10:51:55.927

```
$(function() {
            var message = $('#message');
            var tr = $('#tbl').find('tr');
            tr.bind('click', function(event) {
                var values = '';
                tr.removeClass('row-highlight');
                var tds = $(this).addClass('row-highlight').find('td');

                $.each(tds, function(index, item) {
                    values = values + 'td' + (index + 1) + ':' + item.innerHTML + '<br/>';
                });
                message.html(values);

            });
        }); 
```

鼠标移到：

```
 var message = $('#message');
    var tr = $('#tbl').find('tr');

    tr.hover(
         function() {  // mouseover
             $(this).addClass('row-highlight');
             var values = '';
             var tds = $(this).find('td');

             $.each(tds, function(index, item) {
                 values = values + 'td' + (index + 1) + ':' + item.innerHTML + '<br/>';
             });
             message.html(values);
         },
         function() {  // mouseout
             $(this).removeClass('row-highlight');
             message.html('');
         }
    );
}); 
```

定制 TD：

```
<table id ="table1">
    <th>MAHDI</th>
    <th>PISHGUY</th>
    <tr>
        <td id = "1">username</td>
        <td id = "2">666</td>
    </tr>
</table>

$('#table1 tr').each(function (){
    var vara = $(this).find('#2').html();
    if(vara != null)
        alert($(this).find('#2').html());
}); 
```

或者：

```
<tr class="rowid">
    <td class="user">A</td>
    <td class="id">B</td>
</tr>
    $(document).ready(function(){ 
        rows = $(".rowid").each(function(index,value){
                user = $(value).children(".user").text();
                id = $(value).children(".id").text();
                alert(id+'\t'+user);
        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T00:30:19.587

我不得不做类似的事情。我最近做的一个项目有多个部分分成几行，每行有三个部分或列。我们需要该功能以某种方式工作，如果它们将第 1 列从位置 1 排序到位置 3，那么所有其他行将相应地对其列进行排序。我通过调用 animate 函数来完成此操作，当排序完成时，它将抓取所有其他触发排序的关系列并重新定位它们。你可以在这里做同样的事情，或者只是通过在每个组周围添加一个容器来重建你的列表，然后按容器排序，并禁用容器内的排序功能。因此，第 1 组将是列表项，但在排序时，会作为单个实体进行排序。希望这会有所帮助。快乐编码！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:12:08.550

检查这个**[FIDDLE](http://jsfiddle.net/nB9jF/2/)** -**组明智选择。**

**HTML**

```
<ul id="selectable">
    <li class="ui-widget-content" rel="group1">Item 1</li>
    <li class="ui-widget-content" rel="group1">Item 2</li>
    <li class="ui-widget-content" rel="group1">Item 3</li>
    <li class="ui-widget-content" rel="group2">Item 4</li>
    <li class="ui-widget-content" rel="group2">Item 5</li>
    <li class="ui-widget-content" rel="group3">Item 6</li>
    <li class="ui-widget-content" rel="group3">Item 7</li>
</ul>​ 
```

**jQuery**

```
$("#selectable").selectable({
    selected: function (event, ui) {
        var gr1Count = 0;
        var gr2Count = 0;
        var gr3Count = 0;
        $(".ui-selected").each(function () {
            // Group 1
            if ('group1' == $(this).attr('rel')) {
                gr1Count++;
            }
            if (gr1Count > 1) {
                $(this).removeClass('ui-selected')
            }
            // Group 2
            if ('group2' == $(this).attr('rel')) {
                gr2Count++;
            }
            if (gr2Count > 1) {
                $(this).removeClass('ui-selected')
            }
            // Group 3
            if ('group3' == $(this).attr('rel')) {
                gr3Count++;
            }
            if (gr3Count > 1) {
                $(this).removeClass('ui-selected')
            }
        });
    }
}); 
```

# ruby-on-rails - Rails 多对多更新和创建

> ID：12704496
> 
> 赞同：0
> 
> 时间：2012-10-03T08:20:53.337
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我有兴趣在没有主键的表中创建和更新一行。我的表有 3 列 - person_id、年份和薪水。我知道我应该使用 has_and_belongs_to 但我在理解如何实现我的创建和更新方法以及我的 form.html 文件时遇到了问题。谁能帮我解释一下，也许有一个简单的例子来说明如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:02:39.683

has_and_belongs_to_many 示例

```
# category model
class Category < ActiveRecord::Base
  has_and_belongs_to_many :users
end

# user model
class User < ACtiveRecord::Base
  has_and_belongs_to_many :categories
end 
```

连接表看起来像

```
class CreateCategoriesUsersJoinTable < ACtiveRecord::Migration
  def change
    create_table :categories_users, :id => false do |t|
      t.integer :category_id
      t.integer :user_id
    end
  end
end 
```

现在您可以访问您的信息

```
$ User.categories
$ Category.users
$ user = User.first
$ user.categories
$ category = Category.first
$ category.users 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:51:31.690

添加主键，然后忽略它。您可以在 (person_id, year) 上添加唯一索引来模拟 PK 约束，但 ActiveRecord 严重依赖于其实例的 id。

# javascript - 使用 Javascript 隐藏或禁用 asp 菜单项

> ID：12704505
> 
> 赞同：1
> 
> 时间：2012-10-03T08:21:36.547
> 
> 标签：javascript, asp.net-mvc, vb.net-2010

我有一个 ASP 菜单，其中有一些菜单项。见下面的代码：

```
<asp:Menu ID="NavigationMenu" runat="server" CssClass="menu"
    EnableViewState="false" IncludeStyleBlock="false"
    Orientation="Horizontal">
                        <Items>
          <asp:MenuItem NavigateUrl="~/Home.aspx" Text="Home"/>
          <asp:MenuItem NavigateUrl="~/AboutUs.aspx" Text="About"/>
          <asp:MenuItem NavigateUrl="~/Admin.aspx" Text="Admin"/>
          <asp:MenuItem NavigateUrl="~/UserAccount.aspx" Text="User"/> 
                        </Items>
                    </asp:Menu> 
```

我想根据登录会话隐藏或禁用第三个菜单项。我知道如何处理会话，但我不知道如何隐藏一项`asp:menu`。我无法将 CSS 应用于单个菜单项。所以租告诉我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-30T15:08:42.460

> “如何使用 javascript 隐藏或禁用 asp 菜单项”

如果您*确实*需要使用 JavaScript，请使用以下代码：

```
//  Hide one of the top-level ASP.Net menu items

var menuItemToHide = "Rating";

var menuItems = $(".AspNet-Menu-Horizontal > ul > li > a");
$.each(menuItems, function () {
    var menuText = $(this).text().trim();
    if (menuText == menuItemToHide) {
        $(this).parent().hide();
    }  
}); 
```

（我们有一个 ASP.Net 应用程序，其中用户的角色*不是*来自 Active Directory，所以我不能只在 Web.sitemap 或 web.config 中粘贴一些东西。这段代码使用 JQuery 来遍历顶级菜单项在我的 ASP.Net asp:Menu 控件中，并删除“评级”菜单。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:25:06.557

如果它是您想要隐藏的管理区域，您可以在页面加载后使用 jquery：

```
 $('asp:MenutItem[Text="Admin"]').hide();             

    //note you will need to replace selector with generated html
    //something like
    $('#NavigationMenu a[title="Admin"]').hide(); 
```

如果可以的话，最好限制服务器端的列表，这样有限的菜单就固定在那里，如下所示：

```
 if (!Roles.IsUserInRole("Admin"))
        {
            MenuItemCollection menuItems = NavigationMenu.Items;
            MenuItem adminItem = new MenuItem();
            foreach (MenuItem menuItem in menuItems)
            {
                if (menuItem.Text == "Admin")
                    adminItem = menuItem;
            }
            menuItems.Remove(adminItem);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:32:17.760

为什么要使用 javascript？它在 asp.net 框架呈现的 html 上运行，您将无法访问会话。

这个问题可能是您正在寻找的： [我可以隐藏/显示 asp：基于角色的菜单项吗？](https://stackoverflow.com/questions/4939031/can-i-hide-show-aspmenu-items-based-on-role)

# python - 尝试使用 Python (win32com.client) 从 Outlook 2007 发送邮件

> ID：12704508
> 
> 赞同：2
> 
> 时间：2012-10-03T08:21:48.067
> 
> 标签：python, automation, outlook

我正在尝试使用 Python 启动一些 Outlook 2007 自动化。我在这个线程上从 Steve Townsend 那里得到了这个很棒的脚本（下）：[通过 Python 发送 Outlook 电子邮件？](https://stackoverflow.com/questions/6332577/send-outlook-email-via-python)

但我在开始时遇到了麻烦。

```
import win32com.client

def send_mail_via_com(text, subject, recipient, profilename="Outlook2007"):
    s = win32com.client.Dispatch("Mapi.Session")
    o = win32com.client.Dispatch("Outlook.Application")
    s.Logon(profilename)

    Msg = o.CreateItem(0)
    Msg.To = recipient

    Msg.CC = "moreaddresses here"
    Msg.BCC = "address"

    Msg.Subject = subject
    Msg.Body = text

    #attachment1 = "Path to attachment no. 1"
    #attachment2 = "Path to attachment no. 2"
    #Msg.Attachments.Add(attachment1)
    #Msg.Attachments.Add(attachment2)

    Msg.Send()

send_mail_via_com("test text","test subject", "removed@security.obv","Outlook2007") 
```

但我收到以下错误：

```
Traceback (most recent call last):
  File "C:\Python32\lib\site-packages\win32com\client\dynamic.py", line 83, in _
GetGoodDispatch
    IDispatch = pythoncom.connect(IDispatch)
pywintypes.com_error: (-2147221005, 'Invalid class string', None, None)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\PROJECTS\Python\send_mail_test.py", line 25, in <module>
    send_mail_via_com("test text","test subject", "removed@security.obv","Outloo
k2007")
  File "C:\PROJECTS\Python\send_mail_test.py", line 4, in send_mail_via_com
    s = win32com.client.Dispatch("Mapi.Session")
  File "C:\Python32\lib\site-packages\win32com\client\__init__.py", line 95, in
Dispatch
    dispatch, userName = dynamic._GetGoodDispatchAndUserName(dispatch,userName,c
lsctx)
  File "C:\Python32\lib\site-packages\win32com\client\dynamic.py", line 108, in
_GetGoodDispatchAndUserName
    return (_GetGoodDispatch(IDispatch, clsctx), userName)
  File "C:\Python32\lib\site-packages\win32com\client\dynamic.py", line 85, in _
GetGoodDispatch
    IDispatch = pythoncom.CoCreateInstance(IDispatch, None, clsctx, pythoncom.II
D_IDispatch)
pywintypes.com_error: (-2147221005, 'Invalid class string', None, None) 
```

这可能是我错过的一些愚蠢的事情。

它是 Python 3.2 和 PyWin32 已经安装

非常感谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T08:33:27.723

没关系...

```
import win32com.client
olMailItem = 0x0
obj = win32com.client.Dispatch("Outlook.Application")
newMail = obj.CreateItem(olMailItem)
newMail.Subject = "I AM SUBJECT!!"
newMail.Body = "I AM IN THE BODY\nSO AM I!!!"
newMail.To = "who_to_send_to@example.com"
#newMail.CC = "moreaddresses here"
#newMail.BCC = "address"
#attachment1 = "Path to attachment no. 1"
#attachment2 = "Path to attachment no. 2"
#newMail.Attachments.Add(attachment1)
#newMail.Attachments.Add(attachment2)
#newMail.display()
newMail.Send() 
```

这适用于安装了 PyWin32 的 Python 3.2.3。如果你想玩这个，我已经注释掉了一些行。

[2017 编辑] - 添加 HTML 电子邮件支持（以防任何人都方便）

```
import win32com.client

#some constants (from http://msdn.microsoft.com/en-us/library/office/aa219371%28v=office.11%29.aspx)
olFormatHTML = 2
olFormatPlain = 1
olFormatRichText = 3
olFormatUnspecified = 0
olMailItem = 0x0

obj = win32com.client.Dispatch("Outlook.Application")
newMail = obj.CreateItem(olMailItem)
newMail.Subject = "I AM SUBJECT!!"
newMail.BodyFormat = olFormatHTML    #or olFormatRichText or olFormatPlain
newMail.HTMLBody = "<h1>I am a title</h1><p>I am a paragraph</p>"
newMail.To = "who_to_send_to@example.com; anotherrecipient@email.fake"

# carbon copies and attachments (optional)

#newMail.CC = "moreaddresses here"
#newMail.BCC = "address"
#attachment1 = "Path to attachment no. 1"
#attachment2 = "Path to attachment no. 2"
#newMail.Attachments.Add(attachment1)
#newMail.Attachments.Add(attachment2)

# open up in a new window and allow review before send
newMail.display()

# or just use this instead of .display() if you want to send immediately
#newMail.Send() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T14:07:07.693

上面的代码也适用于 Python 2.7。原帖中的错误是由以下原因引起的：

> > > s = win32com.client.Dispatch("Mapi.Session") Traceback（最近一次调用最后）：文件“”，第 1 行，在文件“c:\Python27\lib\site-packages\win32com\client__init__.py”中，第 95 行，在 Dispatch 调度中，userName = dynamic._GetGoodDispatchAndUserName(dispatch,userName,clsctx) File "c:\Python27\lib\site-packages\win32com\client\dynamic.py"，第 108 行，在 _GetGoodDispatchAndUserName 返回 (_GetGoodDispatch( IDispatch, clsctx), userName) 文件“c:\Python27\lib\site-packages\win32com\client\dynamic.py”，第 85 行，在 _GetGoodDispatch IDispatch = pythoncom.CoCreateInstance(IDispatch, None, clsctx, pythoncom.IID_IDispatch)

它曾经在 Outlook 2003 中工作。我想 2007 根本不需要 MAPI 和登录。

# google-chrome - Chrome 开发者工具冻结页面

> ID：12704510
> 
> 赞同：6
> 
> 时间：2012-10-03T08:21:54.620
> 
> 标签：google-chrome

我在 Windows 7 上运行 Chrome 22.0.1229.79 m。最近（在过去的 4-5 周内）开发工具已经成为一个真正的痛苦使用。如果我想检查一个页面，我按 F12 启动开发者工具。在 1 到 2 秒内，调试器启动并自动暂停页面。如果我通过 Elements 选项卡检查一些 CSS，Dev Tools 会强制切换到 Sources 选项卡。我必须等待几秒钟才能切换回 Elements 并继续我正在做的事情。

但是，该页面现在已冻结，并且在启动开发工具时我无法与它的任何元素进行交互。按 F8 没有任何效果 - 按钮不再可点击，悬停效果被禁用。我必须关闭开发工具并重新启动页面。

这从未发生过，我找不到禁用该行为的设置（我什至找不到有关该行为的任何信息）。这是最新版本 Chrome 上的标准行为还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T06:11:53.113

这在我身上也发生了几个月，运行 OS X Mountain Lion - 我喜欢 chrome，但开发人员工具令人失望。如果它们能正常工作，它们会很棒，但是最近的更新（我不确定是什么原因造成的）Chrome 开发工具在检查后立即冻结，或者在使用一分钟左右后冻结。大多数情况下，它必须杀死整个选项卡以阻止浏览器崩溃。

# php - jQuery 分部分提交大表单

> ID：12704513
> 
> 赞同：0
> 
> 时间：2012-10-03T08:22:03.000
> 
> 标签：php, jquery, forms

我有一个大表单，拼接成 4 个 div，每个 div 代表一个步骤，所有内容都包含在一个表单中，我的问题是表单变得太大，因为可以添加新字段，（图片，文字，语言）动态，

所以我想知道是否有任何选项可以部分提交此表单，我的服务器每个帖子有 20 个字段的限制，我无法更改此设置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:27:23.877

您总是可以将字段值打包到一个大的 json 数组中，对其进行编码并使用 jQuery.ajax 发布它。它看起来像一个大的单一领域。在服务器端，您可以对其进行解码，瞧，绕过了限制。但老实说，那是什么样的服务器？我以前从未听说过这种限制。

另一种解决方案是在服务器端复制表单的状态（例如，在会话存储中），并进行 ajax 调用以更新会话存储中的各个字段。例如，当用户离开一个字段时，您将该单个字段的值发布到服务器，然后服务器更新会话存储中的字段值。

可以有许多其他可能的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:39:21.800

如果服务器限制困扰您，您可以在 jSON 中序列化表单并将其作为单个参数传递

```
$.fn.serializeObject = function()
{
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
}; 
```

喜欢

```
var data = $("form#myform").serializeObject();
window.location = "url?data="+encodeURIComponent(data); 
```

比在服务器上

```
$data = json_decode($_GET["data"]);
foreach($data as $row)
{
 //Do What ever you want with $row
} 
```

或者，如果您需要使用 $_POST

```
var post_data = { data : data};
$.post('url', post_data ,function(data) {
  console.log(data);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:24:04.587

您为什么不创建多个表单，与您拥有的每个步骤相关联？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T09:05:07.060

@Cody 答案效果很好，但我在文件输入方面遇到了问题，

这个库[http://jquery.malsup.com/form/](http://jquery.malsup.com/form/)也很好用，而且我能够提交文件并支持内部数组，无需任何更改

# image-processing - 有没有办法压缩 DICOM 数据？

> ID：12704518
> 
> 赞同：3
> 
> 时间：2012-10-03T08:22:15.160
> 
> 标签：image-processing, dicom

说，我对`.dicom`文件夹中的文件有一个序列。累积大小约为 100 Mb。这是很多数据。我尝试将数据转换为`.nrrd`and `.nii`，但这些文件具有转换后`.dicom`文件的摘要大小（这是相当可预测的，尽管`.nrrd`是用 压缩的`gzip`）。我想知道，是否有一种文件格式可以让我的尺寸小得多，或者只是一种解决方法。也许，，`.vtk`或其他东西（不确定它是否可以工作）。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T06:39:48.697

DICOM 支持文件本身内的像素数据压缩。DICOM 的想法是，从它所拥有的像素数据的角度来看，它与格式无关。

DICOM 可以保存原始像素数据，也可以保存 JPEG 压缩的像素数据，以及许多其他格式。DICOM 文件的传输语法标签为您提供了 DICOM 中像素数据的压缩协议。

首先要弄清楚您是否需要无损压缩或有损压缩。如果有损，则有很多选择，并且在某些情况下压缩率非常高 - 权衡是您确实会失去保真度，并且图像可能不足以用于诊断目的。还有无损压缩方案——比如 JPEG2000、RLE 甚至 JPEG-LS。这些将压缩像素数据，但保留诊断质量而不会降低图像质量。

您还可以压缩文件，如果是原始文件，应该会产生非常好的结果。你想用这些压缩的 DICOM 做什么？

# sql-server - 使用 Entity Framework codefirst 播种数据时如何控制主键值

> ID：12704519
> 
> 赞同：6
> 
> 时间：2012-10-03T08:22:17.280
> 
> 标签：sql-server, entity-framework, ef-code-first, entity-framework-migrations

我正在使用实体框架 5 和 codefirst 和 sql server express 2012 创建一个 asp.net mvc4 站点。

我已启用迁移，现在在我的 Configuration.Seed 方法中执行此操作：（请注意，我想将主键设置为 8，即使这是数据库中的第一条记录）。

```
context.ProductCategoryDtoes.AddOrUpdate(x => x.Id,
    new ProductCategoryDto() { Id = 8, Name = "category1" }
); 
```

我的模型对象是这样定义的：

```
[Table("ProductCategory")]
public class ProductCategoryDto {
    public long Id { get; set; }
    public string Name { get; set; }
} 
```

这会在 (SQL SERVER EXPRESS 2012) 中生成一个表，其中 Id 列的 Identity = true、Identity seed = 1、identity increment = 1。

`PM> Update-Database`现在，当我通过在 Id = 1 的行中执行此结果来运行迁移时。

所以我的问题是：

1) 播种数据时如何控制自动递增主键的值。

2）如果解决方案是增加键列种子值，那么当我使用`Database.SetInitializer(new DropCreateDatabaseAlways<MyContext>());`. 每次我更新数据库时，这都会核对并重建数据库，那么如何在新数据库中更新种子值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T07:46:13.207

只需使用默认值创建虚拟实体，然后添加您的真实数据，然后删除虚拟实体。不是最好的方法，但我想没有其他方法......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T01:52:37.420

您是否尝试将其添加到您的 Id 属性之上：

```
[DatabaseGenerated(DatabaseGeneratedOption.None)]
public long Id { get; set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:58:25.480

看来您正试图破坏身份列的目的。如果您想这样做，您唯一的选择是使用 SQL 命令[设置 IDENTITY_INSERT](http://msdn.microsoft.com/en-us/library/ms188059.aspx)以允许您插入值，然后运行[​​DBCC CHECKIDENT](http://msdn.microsoft.com/en-us/library/ms176057.aspx)来更新种子。这不是一个好主意。这些选项具有安全性和性能限制。

您可能需要考虑改用 GUID。您可以在保证唯一的代码中创建 GUID，还可以在 SQL 中生成 GUID 作为列默认值。

对于非连续的 GUID，您需要考虑一个好的索引策略。这种方法也值得商榷。

最终，看起来您需要一种不同的策略，而不是使用身份列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-23T12:30:19.473

这是非常骇人听闻的，但我遇到了一种情况，由于一些报告具有硬编码的 PK 值，我不得不这样做。修复报告超出了我的工作范围。

```
Context.Database.ExecuteSqlCommand("SET IDENTITY_INSERT dbo.ProductCategoryDto ON " +
     "INSERT INTO dbo.ProductCategoryDto (Id, Name) VALUES (8, 'category1') " +
     "SET IDENTITY_INSERT dbo.ProductCategoryDto OFF"); 
```

# design-patterns - 通用报告格式

> ID：12704520
> 
> 赞同：4
> 
> 时间：2012-10-03T08:22:20.173
> 
> 标签：design-patterns, format, report, reporting

我的业务应用程序生成报告。报告通常包括：

*   通用标题（左、右和中）
*   几段描述使用的参数
*   表头
*   表数据
*   页脚
*   页眉
*   报告页脚

报告的输出格式至少有 2 个已知要求：

*   excel 表（xls(x) 文件） - 它会忽略某些部分，但肯定会包括*表头*和*表数据*
*   pdf

现在我希望我的程序以通用格式生成报告。然后下一个模块将以一种已知的输出格式生成输出，接受额外的可选参数，如字体大小和字体。今天有 2 种输出格式，但很快就会有更多这样的输出格式，比如 html。

**我应该以什么格式生成报告？**

我相信它将是一个文件或等效的内存结构。连同一种格式，我希望对使用的工具和技术提出建议。我只会选择一个开源的解决方案，但如果你想给出其他提示，它也很有价值。

我的编程环境是 java，但如果可能的话，我想保留这个选项。

我的一个想法是从头开始定义一些自定义的东西，我的。我知道怎么做，但首先我想回顾一下常见的现成解决方案。这就是我请求你帮助的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:09:03.320

看看[jasperreports](http://community.jaspersoft.com/project/jasperreports-library)。它可以生成大量格式。你会得到很多社区的支持。

# c# - “平滑”随机数的算法

> ID：12704523
> 
> 赞同：10
> 
> 时间：2012-10-03T08:22:30.750
> 
> 标签：c#, random

谁能给我一个关于如何生成“平滑”随机数的提示？这就是我所说的平滑的意思：

随机数将在游戏中使用，例如风向和强度（有人记得古老的“蠕虫”吗？）。当然，每秒左右为这些值设置随机数看起来会非常不稳定。我宁愿在给定的值范围内有某种平滑的振荡。有点像正弦波，但更随机。

有人得到我所追求的吗？;-) 任何关于如何实现这种行为的想法都将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T08:30:36.597

如果您希望增量（更改）很小，只需为增量生成一个小的随机数。

例如，而不是：

```
windspeed = random (100)                # 0 thru 99 inclusive 
```

使用类似的东西：

```
windspeed = windspeed - 4 + random (9)  # -4 + 0..8 gives -4..4
if   windspeed > 99: windspeed = 99
elif windspeed <  0: windspeed =  0 
```

这样，您的风速仍然保持在要求的范围内，并且只会逐渐变化。

这适用于像速度这样的绝对值，如果你逐渐改变的东西是从固定方向的角度，也适用于方向。

它可以很好地用于任何测量。

* * *

或者，如果您想确保风速以可能较大的增量变化，但缓慢，您可以像当前一样生成目标风速，但逐渐向它移动：

```
windspeed = 50
target = windspeed
while true:
    # Only set new target if previous target reached.

    if target == windspeed:
        target = random (100)

    # Move gradually toward target.

    if target > windspeed:
        windspeed = windspeed + max (random (4) + 1, target - windspeed)
    else:
        windspeed = windspeed - max (random (4) + 1, target - windspeed)

    sleep (1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T23:08:23.953

Perlin（或更好的单纯形）噪声将是生成平滑噪声时首先想到的方法。它返回一个介于 1 和 -1 之间的数字，它将与当前值相加或相减。您可以将其倍增以使其看起来不那么微妙或更好……使最低风值 -1 和最高风值 1。

然后只需将播种机作为计数器（1,2,3...等），因为 perlin/simplex 输入保持值“平滑”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-05T09:02:31.633

我创建了一个新版本的平滑随机数。这个想法是我们的​​随机数将在限制范围内 = [平均 - 振荡，平均 + 振荡]，并且每次都会改变 [-varianciance，+variance]。

但是，如果它达到极限，我们的方差将会减少。

例如来自 [0, 100] 的数字，方差为 10。如果当前值 = 8，则方差将为 [0, 18]

蟒蛇代码：

```
def calculate_smooth_random(current_value, average, oscillation, variance):
    max_value = average + oscillation
    min_value = average - oscillation

    max_limit = min(max_value, current_value + variance)
    min_limit = max(min_value, current_value - variance)
    total_variance = max_limit - min_limit

    current_value = min_limit + random.random() * total_variance

    print("current_value: {}".format(current_value))
    return current_value 
```

具有值的分布图像：平均：20 振荡：10 方差：5

[![在此处输入图像描述](../Images/35af19b7d30c60109b7fc4c7a0e30677.png)](https://i.stack.imgur.com/vrpOh.png)

# android - 禁用与其他应用程序/系统相关的日志 - android

> ID：12704524
> 
> 赞同：2
> 
> 时间：2012-10-03T08:22:36.477
> 
> 标签：android

我正在使用 HTC One X。

有些系统应用程序的日志过多。

因此，我只能在几秒钟内看到我的应用程序日志。一段时间后，我的日志正在从缓冲区中删除，因为来自其他应用程序的新日志太多。

我可以使用标签禁用日志吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:36:54.713

首先，您不能阻止其他应用程序登录！可能某些应用程序比其他应用程序记录的过于广泛，从而导致溢出。你可以尝试做的是

> 强制停止某些应用程序，以减少他们的日志记录活动（减少的机会可能会减少）。

其次，正如 Rasel 所建议的，

> 使用 DDMS 功能，例如使用应用程序名称、包名称、标签等过滤日志并暂停日志记录。

通过这种方式，您将获得日志的快照。希望这可以帮助！

# python - 如何从 url 中带有冒号“:”的 url 获取 htmlcode？

> ID：12704526
> 
> 赞同：1
> 
> 时间：2012-10-03T08:22:39.873
> 
> 标签：python, urllib

我已经成功地使用 python 和 urllib2 模块在常规网页中检索 html 代码。

但是当我尝试将它与带有冒号的网页一起使用时，它不起作用。这段代码：

```
f = urllib2.urlopen("http://http://gulasidorna.eniro.se/hitta:svenska+kyrkan/")
htmlcode = f.read()
print htmlcode 
```

以下代码生成此错误消息。

```
File "/Users/jonathan/Documents/Dropbox/Python/eniro.py", line 137, in <module>
  f = urllib2.urlopen("http://http://gulasidorna.eniro.se/hitta:svenska+kyrkan/")
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 126, in urlopen
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 394, in open
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 412, in _open
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 372, in _call_chain
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 1199, in http_open
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 1140, in do_open
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 693, in _init_
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 718, in _set_hostport
httplib.InvalidURL: nonnumeric port: '' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:30:11.020

这应该可行，您在网址的开头有一个额外的**http:// ：**

```
f = urllib2.urlopen("http://gulasidorna.eniro.se/hitta:svenska+kyrkan/")
htmlcode = f.read()
print htmlcode 
```

# git - 使用 EGit 合并会导致提交合并完成的所有更改

> ID：12704528
> 
> 赞同：3
> 
> 时间：2012-10-03T08:22:44.307
> 
> 标签：git, egit, git-merge

我将 Eclipse 与 EGit 一起使用，并且我的 origin/master 在 github 上。在这个项目上，有 3 名程序员正在工作。

当我将更改拉到本地 git（使用 EGit）并且存在冲突时，我解决了它们，没问题。

问题是，当我提交时，它会提交一个合并，其中包含自我上次提交（在拉取之前）以来所有更改的文件，并且在 git 中，我看到其他程序员的所有这些更改，就好像我在最后一次提交合并时所做的一样。 ..

为什么会这样？我究竟做错了什么？

**更新（14.10.2012）：** 感谢@robinst，我设法正确提交了仅与合并文件的正确合并。

但还有两个问题：（1）合并工具不可用，为什么会这样？（灰色无法点击）；（2）我没有找到任何“Git Staging”视图......它藏在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:33:06.450

当合并发生冲突时，不会自动提交合并结果（如在无冲突情况下），而是暂存不冲突的文件，并且有冲突的文件处于“冲突”状态。然后你必须解决每个文件中的冲突，然后暂存它。

解决所有冲突（并暂存文件）后，您必须提交合并。当您使用*Git Staging*视图时，您将看到在解决所有冲突后消息更改为合并消息。之后，按工具栏中的提交图标。

只有这样，您才能继续处理您的提交。

听起来您在解决所有冲突后没有提交合并，现在混合了合并结果和您自己的更改。会是这样吗？

# java - 在 JTable 上动态调整行高

> ID：12704530
> 
> 赞同：0
> 
> 时间：2012-10-03T08:22:45.257
> 
> 标签：java, swing, jtable

我在 Stackoverflow 上发现了类似的问题，但是由于某种原因，当我尝试实施建议的内容时，我得到了一个奇怪的异常。

所以我试图动态调整 3 列的一些高度。

```
public class AcquisitionTechniquesPanel extends JPanel {
    private static final long serialVersionUID = -3326535610858334494L;

    public static final int SIZE_OF_TABLE = 8;

    private final JTable table;
    private JCheckBox acquisitionTechniquesDone;

    private Object[][] tableData;
    private final String[] columnNames;

    public AcquisitionTechniquesPanel() {
        this.columnNames = new String[] { ApplicationStrings.ID, ApplicationStrings.TYPE, "Foo", "Bar", "Biz", "Baz", "Boz", ApplicationStrings.NO_OF_AR_S };
        this.table = new JTable(tableData, columnNames);

        initGUI();
    }

    public void initGUI() {
      table.setColumnSelectionAllowed(
      table.setDragEnabled(false);
      table.setOpaque(true);
      table.getTableHeader().setReorderingAllowed(false);
      table.setModel(new DefaultTableModel());
      JScrollPane scrollPane = new JScrollPane(table);
      scrollPane.setPreferredSize(new Dimension(800, 320));

      SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                table.getColumnModel().getColumn(2).setCellRenderer(new VariableRowHeightRenderer());
                table.getColumnModel().getColumn(3).setCellRenderer(new VariableRowHeightRenderer());
                table.getColumnModel().getColumn(4).setCellRenderer(new VariableRowHeightRenderer());
            }
        });
    }

public static class VariableRowHeightRenderer extends JLabel implements TableCellRenderer {
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            setText(String.valueOf(value));
            if(getPreferredSize().height > 1)
                table.setRowHeight(row, getPreferredSize().height);
            return this;
        }
    }
} 
```

现在，当我运行这段代码时，由于某种原因，我得到`java.lang.ArrayIndexOutOfBoundsException: 2 >= 0` 了代码上的这个异常，`table.getColumnModel().getColumn(2).setCellRenderer(new VariableRowHeightRenderer());` 这很奇怪，因为表应该有 8 列。

有谁知道我做错了什么？

**请注意，我只显示相关代码**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:11:22.663

下面是提供高度调整的[SwingX 的 TableUtilies的摘录。](http://swingx.java.net)你像这样使用它

```
this.table = new JTable(tableData, columnNames);
// initial sizing
TableUtilites.setPreferredRowHeights(table);
TableModelListener l = new TableModelListener() {
     public void tableChanged(...) {
         // dynamic sizing on changes
         SwingUtilities.invokeLater() {
              public void run() {
                  TableUtilities.setPreferredRowHeights(table);
              }
         };
     }
}; 
table.getModel().addTableModelListener(l); 
```

TableUtilities 中的实用方法：

```
/**
 * Returns the preferred height for the given row. It loops
 * across all visible columns and returns the maximal pref height of
 * the rendering component. Falls back to the table's base rowheight, i
 * f there are no columns or the renderers
 * max is zeor.<p>
 * 
 * @param table the table which provides the renderers, must not be null
 * @param row the index of the row in view coordinates
 * @return the preferred row height of
 * @throws NullPointerException if table is null.
 * @throws IndexOutOfBoundsException if the row is not a valid row index
 */
public static int getPreferredRowHeight(JTable table, int row) {
    int pref = 0;
    for (int column = 0; column < table.getColumnCount(); column++) {
        TableCellRenderer renderer = table.getCellRenderer(row, column);
        Component comp = table.prepareRenderer(renderer, row, column);
        pref = Math.max(pref, comp.getPreferredSize().height);
    }
    return pref > 0 ? pref : table.getRowHeight();
}

/**
 * 
 * @param table the table which provides the renderers, must not be null
 * @param row the index of the row in view coordinates
 * @throws NullPointerException if table is null.
 * @throws IndexOutOfBoundsException if the row is not a valid row index
 */
public static void setPreferredRowHeight(JTable table, int row) {
    int prefHeight = getPreferredRowHeight(table, row);
    table.setRowHeight(row, prefHeight);
}

/**
 * Sets preferred row heights for all visible rows. 
 * 
 * @param table the table to set row heights to
 * @throws NullPointerException if no table installed.
 */
public static void setPreferredRowHeights(JTable table) {
    // care about visible rows only
    for (int row = 0; row < table.getRowCount(); row++) {
        setPreferredRowHeight(table, row);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T08:39:55.287

问题来自这里：

```
table.setModel(new DefaultTableModel()); 
```

您在 JTable 上设置了一个空模型，因此覆盖了您使用 JTable 构造函数创建的隐式模型。只需删除该行，您就应该拥有 8 列。

顺便说一句，无需将您的调用包装在 invokeLater 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T08:29:02.143

*   删除、禁用或更改代码行`table.setColumnSelectionAllowed(`

*   假设是返回值（或）`ApplicationStrings.XXX`的全局变量`String``""`

# linux - 是否有适用于 Linux 的 Clang mingw 交叉编译器

> ID：12704537
> 
> 赞同：13
> 
> 时间：2012-10-03T08:23:25.667
> 
> 标签：linux, mingw, llvm, clang, cross-compiling

在 Linux 中，特别是在 Debian 或 Ubuntu 上，有预先打包的 Mingw 交叉编译器，可以生成 Windows EXE。

但是有没有使用 Clang 而不是 GCC 的类似交叉编译器？（或者关于如何建造这样一个野兽的说明。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-09T07:07:26.450

我编写了一个工具，您可以使用它在 linux 上使用 clang for windows 轻松编译。查看：[https](https://github.com/tpoechtrager/wclang) ://github.com/tpoechtrager/wclang 。

# django - 如何在模板中显示来自 django-cms 自定义插件的数据

> ID：12704539
> 
> 赞同：0
> 
> 时间：2012-10-03T08:23:45.397
> 
> 标签：django, templates, plugins, django-cms

我有具有下一个结构的自定义插件。models.py 看起来像

```
 class ProductDescription(models.Model):
        name = models.CharField(max_length=30)
        icon = models.ImageField(upload_to="installation_image", blank=True, null=True)
        description = models.TextField(blank=True, null=True)

        def __unicode__(self):
            return self.name

    class ProductPlugin(CMSPlugin):
            product = models.ForeignKey(ProductDescription)

    class ProductSpecification(models.Model):
        product = models.ForeignKey(ProductDescription)
        specification = models.TextField(blank=True, null=True)

    class InstallationStep(models.Model):
        product = models.ForeignKey(ProductDescription)
        step = models.TextField(blank=True, null=True)
        image = models.ImageField(upload_to="installation_image", blank=True, null=True) 
```

管理员.py

```
 class InstallationStepInline(admin.StackedInline):
        model = InstallationStep
        extra = 0

    class ProductSpecificationInline(admin.StackedInline):
        model = ProductSpecification
        extra = 0

    class DeviceAdmin(admin.ModelAdmin):
        inlines = [ProductSpecificationInline ,
        InstallationStepInline]

    admin.site.register(ProductDescription, DeviceAdmin) 
```

和 cms_plugin.py

```
 class CMSProductPlugin(CMSPluginBase):
        model = ProductPlugin
        name = _("Product Description")
        render_template = "product_description.html"

        def render(self, context, instance, placeholder):
            context.update({
                'product':instance.product,
                'object':instance,
                'placeholder':placeholder
            })

            return context

    plugin_pool.register_plugin(CMSProductPlugin) 
```

因此，每个产品可能没有或有多个规格和安装步骤。问题是如何在模板中呈现这些规范和步骤？我知道如何获取 ProductDescription 类的数据。它像是

```
 <div class="test">{{ product.description }}</div> 
```

但我怎样才能提取其他数据？我想应该是这样的

```
 {% for steps in product.InstallationStep.all %}
        <div class="test">{{ steps.step }}</div>
    {% endfor %} 
```

但它什么也没做=(

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:58:50.673

我想你只需要：

```
product.InstallationStep_set.all 
```

由于 InstallationStep 模型类中有一个 ForeignKey，django 将 _set 方法放入引用的类中。

您可以在 django shell 中对此进行试验。如果您尝试执行 foo.bar 并且 foo 中没有 bar，模板将静默失败...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T07:24:20.623

根据[文档](http://django-cms.readthedocs.org/en/latest/extending_cms/custom_plugins.html#for-foreign-key-relations-from-other-objects)，您还需要修改模型中的 copy_relations 方法。否则，当您发布草稿时，模型将不会被复制，也不会看到任何内容。我不明白你是如何使它工作的。

在你的情况下会是这样的：

```
class ProductPlugin(CMSPlugin):
    product = models.ForeignKey(ProductDescription)

    def copy_relations(self, oldinstance):
        for associated_item in oldinstance.InstallationStep_set.all():
            # instance.pk = None; instance.pk.save() is the slightly odd but
            # standard Django way of copying a saved model instance
            associated_item.pk = None
            associated_item.plugin = self
            associated_item.save() 
```

**笔记**

不确定关于`InstallationStep_set`for 因为我通常在字段中使用`related_name`参数。`ForeignKey`例如，

```
class InstallationStep(models.Model):
    product = models.ForeignKey(ProductDescription, related_name='installationsteps') 
```

你的 for 将是：

```
for associated_item in oldinstance.installationsteps.all(): 
```

无论如何，感谢这个问题，因为它成为了我的指南。

# c# - lookupedit 获取选定值

> ID：12704540
> 
> 赞同：3
> 
> 时间：2012-10-03T08:24:02.693
> 
> 标签：c#, devexpress, lookup

我正在使用 devexpress 和 visualstudio 2010。我有 LookUpEdit 控件，我想在其中选择值，但以指定的格式显示它：有一个我与 buttonEdit 一起使用的示例：

```
 CurrentEvent.fkVersion = selectedVersion;
    m_cVersionButtonEdit.EditValue= CurrentEvent.fkVersion.FormattedProduct;
    m_cVersionButtonEdit.Refresh(); 
```

“selectedVersion”是我在按下按钮后在对话框中选择的对象。

现在我必须这样做，但使用lookupEdit 并从dropDownlist 中选择版本。那么问题是如何获得 Selected 值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T12:07:10.587

我不确定你在问什么，但获得选定值的最简单方法是这样的：

```
public partial class Form1 : Form
{
    public class Example
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
    }

    public List<Example> elist = new List<Example>();

    public Form1()
    {
        InitializeComponent();
        for (int i = 0; i < 10; i++)
        {
            elist.Add(new Example() { Id = i, Name = "Name" + i, Description = "Description " + i });
        }
        lookUpEdit1.Properties.DataSource = elist;
        lookUpEdit1.Properties.DisplayMember = "Name";
    }

    private void lookUpEdit1_EditValueChanged(object sender, EventArgs e)
    {
        var item = lookUpEdit1.GetSelectedDataRow() as Example;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T09:08:23.193

对已接受的答案的一个小补充。建议的解决方案**不**返回选定的行，它返回绑定到 ValueMember 的字段的值与 EditValue 匹配的第一行（然而，在大多数情况下恰好是选定的行）。

当您 f.ex 有一个多列 LookUpEdit 时，这是一个问题，其中两列或多列的组合使一行唯一。虽然我知道这有点不寻常...

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2020-09-26T16:20:11.200

MessageBox.Show(cmblook.GetColumnValue("item_id").ToString()); 试试我用它

# c++ - 在 Windows 上使用 Google Test 时出现内存泄漏

> ID：12704543
> 
> 赞同：3
> 
> 时间：2012-10-03T08:24:05.790
> 
> 标签：c++, windows, memory-leaks, googletest

当我运行以下代码时：

```
#include "gmock/gmock.h"
#include "gtest/gtest.h"

#define _CRTDBG_MAP_ALLOC
#include <crtdbg.h>

int main(int argc, char **argv) 
{
    ::testing::InitGoogleTest(&argc, argv);
    _CrtDumpMemoryLeaks();
    return 0;
} 
```

我得到以下输出：

```
Detected memory leaks!
Dumping objects ->
{652} normal block at 0x00074CE0, 4 bytes long.
 Data: < L  > 98 4C 07 00 
{651} normal block at 0x00074C98, 12 bytes long.
 Data: <,           > 2C 03 1B 01 00 00 00 00 00 00 00 00 
{650} normal block at 0x00074C50, 8 bytes long.
 Data: <hI      > 68 49 07 00 00 00 00 00 
{649} normal block at 0x00074C10, 4 bytes long.
 Data: <t   > 74 03 1B 01 
{648} normal block at 0x00074BC8, 8 bytes long.
 Data: <xK      > 78 4B 07 00 00 00 00 00 
{647} normal block at 0x00074B70, 28 bytes long.
 Data: <         K   L  > BC 01 1B 01 01 CD CD CD C8 4B 07 00 E0 4C 07 00 
{646} normal block at 0x00074B28, 8 bytes long.
 Data: < I      > 18 49 07 00 00 00 00 00 
{645} normal block at 0x00074AE0, 8 bytes long.
 Data: < I      > 04 49 07 00 00 00 00 00 
{644} normal block at 0x00074A98, 8 bytes long.
 Data: < H      > DC 48 07 00 00 00 00 00 
{643} normal block at 0x00074A50, 8 bytes long.
 Data: < H      > C8 48 07 00 00 00 00 00 
{642} normal block at 0x00074A08, 8 bytes long.
 Data: < H      > B4 48 07 00 00 00 00 00 
{641} normal block at 0x000749C0, 8 bytes long.
 Data: < H      > A0 48 07 00 00 00 00 00 
{640} normal block at 0x00074E90, 1 bytes long.
 Data: < > 00 
{639} normal block at 0x00074870, 272 bytes long.
 Data: <        t    N  > 20 03 1B 01 CD CD CD CD 74 FA 1B 01 90 4E 07 00 
{638} normal block at 0x00074F68, 72 bytes long.
 Data: <C:\Users\Baz> 43 3A 5C 55 73 65 72 73 5C 45 42 41 52 47 52 49 
{637} normal block at 0x00074E48, 8 bytes long.
 Data: <hO  G   > 68 4F 07 00 47 00 00 00 
{616} normal block at 0x00074EE0, 72 bytes long.
 Data: <C:\Users\Baz> 43 3A 5C 55 73 65 72 73 5C 45 42 41 52 47 52 49 
{595} normal block at 0x00074828, 8 bytes long.
 Data: <        > F0 F9 1B 01 00 00 00 00 
{594} normal block at 0x000747E8, 1 bytes long.
 Data: < > 00 
{561} normal block at 0x000747A0, 5 bytes long.
 Data: <fast > 66 61 73 74 00 
{496} normal block at 0x00074760, 1 bytes long.
 Data: < > 00 
{311} normal block at 0x00074720, 1 bytes long.
 Data: < > 00 
{282} normal block at 0x000746E0, 2 bytes long.
 Data: <* > 2A 00 
{253} normal block at 0x00074698, 5 bytes long.
 Data: <auto > 61 75 74 6F 00 
Object dump complete. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-17T15:16:31.897

除了接受的答案之外，谷歌[文档](https://github.com/google/googletest/blob/master/googletest/docs/faq.md#how-do-i-suppress-the-memory-leak-messages-on-windows)还指出：

> 由于静态初始化的 Google Test 单例需要在堆上分配，Visual C++ 内存泄漏检测器将在程序运行结束时报告内存泄漏。避免这种情况的最简单方法是使用 _CrtMemCheckpoint 和 _CrtMemDumpAllObjectsSince 调用来不报告任何静态初始化的堆对象。有关更多详细信息和其他堆检查/调试例程，请参阅 MSDN。

这涉及在[_CrtMemCheckPoint](http://msdn.microsoft.com/en-us/library/h3z85t43.aspx)之后`::testing::InitGoogleTest`调用，然后在[_CrtMemDumpAllObjectsSince](http://msdn.microsoft.com/en-us/library/hhy09244.aspx)之后调用`RUN_ALL_TESTS()`。主函数看起来有点像这样：

```
::testing::InitGoogleTest(&argc, &argv);
// Get a checkpoint of the memory after Google Test has been initialized.
_CrtMemState memoryState = {0};
_CrtMemCheckpoint( &memoryState );
int retval = RUN_ALL_TESTS();

// Check for leaks after tests have run
_CrtMemDumpAllObjectsSince( &memoryState );
return retval; 
```

不幸的是，如果测试失败，Google 测试会导致内存泄漏，这意味着这不是一个完美的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T09:48:18.010

你没有做错什么。“内存泄漏”来自静态初始化的谷歌测试单例类的堆分配。

这是来自谷歌测试常见问题的答案：[如何抑制 Windows 上的内存泄漏消息？](https://github.com/google/googletest/blob/master/googletest/docs/faq.md#how-do-i-suppress-the-memory-leak-messages-on-windows)

# android - 将位图转换为可绘制并将其存储在数组中

> ID：12704544
> 
> 赞同：3
> 
> 时间：2012-10-03T08:24:08.567
> 
> 标签：android, image

我在布局中使用图像滑块，为此我使用了

```
 private Integer[] mImageIds = { R.drawable.j, R.drawable.f,R.drawable.i,    R.drawable.g, R.drawable.k }; 
```

拍摄图像。但现在我想从 sdcard 中获取图像并将这些图像存储到该数组中。我该怎么做？下面是我的代码。我将拇指存储在数据库中。我将位图转换为可绘制的，然后如何将其存储到数组 mImages 中？

```
 List<String> thumb = new ArrayList<String>();
     public Integer[] mImageIds;
     Bitmap bitmap;
            thumb = db.getRecomdThumb();//get image address from db
    for(int i = 0; i < thumb.size();i++){
        bitmap = BitmapFactory.decodeFile(thumb.get(i));
        Drawable d = new BitmapDrawable(getResources(),bitmap);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:39:29.690

只有您存储在“res”文件夹中的图像才能添加到整数数组中。您可以从动态创建的位图创建一个 int res。正如您在代码中提到的那样，您只能将其转换为 Drawable。

如果您问我，如果我将动态创建的可绘制对象添加到 res 文件夹，是否可以获得 Int 表示，这是不可能的。

“Res”文件夹无法修改。它是只读的。

所以你要做的是，只需创建一个 Drawable 数组而不是 Integer 数组并进行操作。

像这样的东西会起作用，

```
 List<String> thumb = new ArrayList<String>();
     public Integer[] mImageIds;
     Bitmap bitmap;
            thumb = db.getRecomdThumb();//get image address from db
  private Drawable[] drawables = new Drawable[thumb.size()];
    for(int i = 0; i < thumb.size();i++){
        bitmap = BitmapFactory.decodeFile(thumb.get(i));
        drawables[i] = new BitmapDrawable(getResources(),bitmap);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:29:26.980

你可以创建一个

```
private Drawable[] drawables = new Drawable[mImageIds.length]; 
```

并以相应的尺寸复制图像。

话虽如此：drawables 可能很大并且将它们（或位图）存储在内存中可能会使您很快遇到内存不足的情况，因为手机通常具有较小的堆大小。

# database - 如何显示来自露天数据库的数据？

> ID：12704546
> 
> 赞同：0
> 
> 时间：2012-10-03T08:24:15.257
> 
> 标签：database, api, alfresco

如果我想知道 alfresco 中的所有文件以在 alfresco 页面上显示如何首先做到这一点？

现在我找不到对数据库的 api 访问，如果我找到 api，下一步该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:36:21.733

您可以对 SearchService 进行查询，如下所示：

```
SearchParameters params = new SearchParameters();
params.getStores().add(StoreRef.STORE_REF_WORKSPACE_SPACESSTORE);
params.setLanguage(SearchService.LANGUAGE_FTS_ALFRESCO);
params.setQuery("TYPE:cm\\:content AND PATH:\"/app\\:company_home/st\\:sites/cm\\:test/cm\\:documentLibrary//*\"");
ResultSet result = searchService.query(params);
System.out.println(result.length()); 
```

但我不确定它对性能的优化程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:32:26.220

简单的方法，您可以通过 api 查询数据库中的所有类型：`localhost:8080/alfresco/service/cmis/query?q={q}`
q 是alfresco 的**CMIS 查询语言**。例如`SELECT * FROM cmis:document`，它选择所有文档的所有属性

查看更多[CMIS 查询语言](http://wiki.alfresco.com/wiki/CMIS_Query_Language)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-16T08:42:02.453

根据我的经验，有时最好从数据库中获取此类信息。

仅供参考：在我当前的项目中，我们在 repo 中有超过 50000 个文档，我需要获取确切的数量进行监控。

**以下是在某些情况下**使用数据库查询的几点：

1.  CMIS 慢得多（在我的情况下，每次查询大约需要 1-2 秒）。正如@lightoze 建议的那样，您可以使用`SearchService`，但随后您将获取文档`ResultSet`，因此在您还需要调用`length`方法来获取它们的数量之后，我认为这比 sql 调用更耗时。就我而言，我每 5 分钟打一次电话。

2.  5.0.c 中有一个[错误](http://fcorti.com/2014/12/08/cmis-queries-alfresco-5-0-c/)，它将某些查询的结果限制为 1000 个文档。

[在这里](http://pavelmakhov.com/2015/02/connect-to-alfresco-db/)您可以找到如何连接到数据库以及一些有趣[的](http://pavelmakhov.com/2015/05/usefule-alfresco-queries/)查询，包括 repo 中的文档总数。

# php - 显示一个包含引号的 php 变量

> ID：12704547
> 
> 赞同：1
> 
> 时间：2012-10-03T08:24:18.340
> 
> 标签：php, html, decode, quote

我有一个 xml 文件，我尝试将一些信息显示到 php 表单中。

所以我一直在尝试做这样的事情：

```
<?php 

$url="tmp/".$_GET['n_doss']."-".date('d-m-Y')."-legale.xml";
if(file_exists($url))
{

     $chaineXML= $url;
     $dom = new DomDocument();
     $dom->load($chaineXML);
     $date = $dom->getElementsByTagName('time');
     $time = DateTime::createFromFormat("d/m/Y H:i:s", $date->item(0)->nodeValue);
     $datecreditsafe=date_format($time, 'd-m-Y');
     if($dom->getElementsByTagName('errors')->length != 0)
     {
        header('Location: index.php?p=add_debiteur&n_doss='.$_GET['n_doss'].'&type='.$_GET['type'].'&mode='.$_GET['mode'].'&step=4&creditsafe=false&siret='.$_GET['siret'] );
     }
       else
      {
         if(!empty($data['forme_juridique']))
         {
              echo "<label>Forme juridique:</label><input type='text' name='forme_juridique'><br>";
         }
         else
         {
             if($dom->getElementsByTagName('legalform')->length != 0)
                 {
                 $etat = $dom->getElementsByTagName('legalform');
                 $forme_juridique=$etat->item(0)->nodeValue;    
                 echo "<label>Forme juridique:</label><input type='text' name='forme_juridique' value='".utf8_decode(stripslashes($forme_juridique))."'><br>";
                 }
                 else
                 {
                 echo'<label for="forme_juridique">Forme Juridique:</label><table width="45%"       border="0">
                        <tr>
                        <td width="50%"><input type="checkbox" name="forme_juridique" value="SAS" onclick="limite_check(this.name, 1)" />
                        SAS</td>
                        <td width="50%"><input type="checkbox" name="forme_juridique" value="SA" onclick="limite_check(this.name, 1)" />
                          SA</td>
                          </tr>
                          <tr>
                        <td><input type="checkbox" name="forme_juridique" value="SARL" onclick="limite_check(this.name, 1)" /> 
                        SARL</td>
                    <td><input type="checkbox" name="forme_juridique" value="EURL" onclick="limite_check(this.name, 1)" />
                      EURL</td>
                      </tr>
                      <tr>
                        <td><input type="checkbox" name="forme_juridique" value="SNC" onclick="limite_check(this.name, 1)" />
                    SNC</td>
                    <td><input type="checkbox" name="forme_juridique" value="SDF" onclick="limite_check(this.name, 1)" />
                  SDF</td>
                  </tr>
                  <tr>
                <td><input type="checkbox" name="forme_juridique" value="Soci&eacute;t&eacute;  Particuli&egrave;re" onclick="limite_check(this.name, 1)" />
                  Soci&eacute;t&eacute; Particuli&egrave;re </td>
                <td><input type="checkbox" name="forme_juridique" value="Entreprise Individuelle" onclick="limite_check(this.name, 1)" />
                  Entreprise Individuelle</td>
                  </tr>
                  <tr>
                <td><input type="checkbox" name="forme_juridique" value="Artisan" onclick="limite_check(this.name, 1)" />
                  Artisan</td>
                <td><input type="checkbox" name="forme_juridique" value="Commer&ccedil;ant"     onclick="limite_check(this.name, 1)" />
              Comme&ccedil;ant</td>
              </tr>
              <tr>
            <td><input type="checkbox" id="box" name="forme_juridique" value="Autre" onclick="GereControle(\'box\', \'forme_juridique2\', \'1\');limite_check(this.name, 1)"/>
              Autre</td>
            <td><input type="text" name="forme_juridique2" id="forme_juridique2" style="visibility:hidden" /></td>
              </tr>
        </table>';
                 }

            }
      } 
```

但真正的麻烦是它只向我显示这个变量的一部分：实际上要显示的真实部分是：SA à conseil d'administration

它只向我显示 SA à conseil d

我尝试了几件事，例如：

```
str_replace("'","&#039;",$str) 
```

或者

```
htmlentities($str, ENT_QUOTES, "UTF-8") 
```

或再次`mysql_real_escape_string`

或`addslashes`和`stripslashes`

但我没有找到让它工作的方法。

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:30:12.197

尝试用`echo`这个替换该行：

```
echo '<label>Forme juridique:</label><input type="text" name="forme_juridique" value="' . htmlspecialchars($data['forme_juridique']).'"><br>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:26:37.027

此代码将给出更好的结果：

```
addslashes($data['forme_juridique']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:29:45.007

尝试：

```
str_replace('"','\"',$str) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T08:51:02.773

你检查过它回显的实际 HTML 吗？因此，您可以知道它是由单引号问题引起的，还是内容确实是“SA à conseil d”。

或者您可以只用双引号引用该值。

# posix - semop：数值结果超出范围

> ID：12704552
> 
> 赞同：3
> 
> 时间：2012-10-03T08:24:55.507
> 
> 标签：posix, multiprocessing

当我尝试 XSI IPC 信号量时，我使用它的方式是一个进程不断增加信号量，而另一个进程不断做相反的事情，两者都设置了 SEM_UNDO 的标志。最后，这个简单的程序以错误结束：semop: Numerical result out of range。我猜这是由于调整值过大造成的。如果我不放弃 SEM_UNDO 标志，是否有任何解决方案？

# android - 铃声不适用于没有自定义铃声的联系人

> ID：12704558
> 
> 赞同：2
> 
> 时间：2012-10-03T08:25:14.197
> 
> 标签：android, phone-call, ringtone

我有 3 个联系人（A、B、C）。我的默认铃声是 1。联系人 A 有第二个铃声。联系人 B 有第三个铃声。第一次，如果联系人 A 拨打电话，它使用铃声 2。第二次如果 B 拨打电话，它会选择铃声 3rd 铃声。在第三次如果 C 拨打电话，它只选择第三个铃声。但联系人 C 没有自定义铃声。所以它应该选择默认铃声 1（数字 1 铃声）。但它选择了错误的铃声。

# javascript - 在 javascript 函数中获取代码隐藏值

> ID：12704560
> 
> 赞同：1
> 
> 时间：2012-10-03T08:25:40.650
> 
> 标签：javascript, asp.net, vb.net-2010

我想在我的 javascript 函数中获取代码隐藏值。我的场景是，假设我有两个用户控件 A 和 B。我正在从用户控件 A 设置一个全局值。当我进入用户控件 B 的页面加载时，我正在访问该值并将其放入隐藏字段中。我在 UserControl B 上有一个按钮，它在客户端单击时调用 javascript 函数。在那个函数上，我试图捕捉隐藏字段的当前值。但我总是从隐藏字段值中得到 0。我做错了什么？有人能帮我吗？

下面是代码：

```
<%@ Control Language="vb" AutoEventWireup="false" CodeBehind="DetailsForm.ascx.vb" Inherits="TD_Web_App.DetailsForm" %>
<script type="text/javascript">
function GetNextRecord() {
    debugger;
    var currentVal = $get("DetailsFormPanel_DetailsForm1_HFDetails").value; 
//clientID of my hidden field
}
</script>
<asp:UpdatePanel ID="DetailInfoUpdatePanel" runat="server" UpdateMode="Conditional" > 

  <ContentTemplate>
<table id="TDPropsGrid" runat="server" width="250px" ></table>
    <asp:Button ID="Cmd_Next" runat="server" Text="Next" Width="100px" SkinID="ButtonSkin" UseSubmitBehavior="false" OnClientClick="GetNextRecord()"/>
<asp:LinkButton ID="LinkButtonDetails" runat="server" style="display:none;">
LinkButton 
</asp:LinkButton>
</ContentTemplate>
</asp:UpdatePanel>

<asp:HiddenField ID="HFDetails" runat="server" /> 
```

关于后面的代码：

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    showData() 'some function
    HFDetails.Value = CurrentRecordCounter  ' global value coming from other usercontrol 
End Sub

'Private Sub Page_PreRender(sender As Object, e As System.EventArgs) Handles Me.PreRender
'    HFDetails.Value = CurrentRecordCounter
'End Sub 
```

我试过把

```
<asp:HiddenField ID="HFDetails" runat="server" /> 
```

在更新面板内，没有任何改变。

但在 GetNextRecord() 处，currentVal 始终为“0”。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:56:29.993

尝试：

```
var currentVal = $('#<%=HFDetails.ClientID %>').val(); 
```

# android - GCM 和特殊字符

> ID：12704567
> 
> 赞同：4
> 
> 时间：2012-10-03T08:26:18.527
> 
> 标签：android, google-app-engine, special-characters, google-cloud-messaging

我最近将我的 c2dm push aaplucation 更改为 GCM。一个新的问题出现了。它现在接收 `'?'`而不是`'ö','ï', ...`

我的服务器记录了正确的字符串，但应用程序收到“？” 代替。

您认为这可能与 GCM 有关吗？

我的代码如下：

```
public static void displayMessage(Context context, Intent intent) {
    Bundle extras = intent.getExtras();
    if (extras != null) {
        String message = (String) extras.get("message");
        Log.v("extras", extras.toString());
        Util.generateNotification(context, message, intent);
    }
} 
```

然后日志是：

```
10-02 22:18:23.671: V/intent(29809): Bundle[{message={"name":"j?rg"},
message_id=8bb60eee-3a93-4075-b606-40495511a4da, collapse_key=do_not_collapse, from=160085429222}] 
```

最好的祝福！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:25:02.817

我不认为 GCM 有问题。尝试对您的消息使用 UTFEncoding。

```
String output = new String(name.getBytes("8859_1"), "utf-8"); 
```

# git - 撤消 git 提交

> ID：12704568
> 
> 赞同：37
> 
> 时间：2012-10-03T08:26:22.870
> 
> 标签：git, git-commit

您可以通过 git 命令撤消长期以来已合并到您的 git 存储库中的过去提交吗？还是您必须手动撤消该提交中所做的所有更改？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-03T08:31:14.310

您始终可以通过执行以下操作从单个提交中恢复更改：

```
git revert <commit-id> 
```

请注意，这会创建一个*新*的提交，只撤消这些更改

例如`git log --oneline`

```
d806fc9 two
18cdfa2 bye
62c332e hello
c7811ee initial 
```

假设我想恢复提交中的更改`18cdfa2`：

```
git revert 18cdfa2 
```

我们现在有：`git log -1 -p`

```
commit fb9d6627a71636503fc9a1eb4f725937c783ecee
Author: Seth <sehe@mint12.(none)>
Date:   Wed Oct 3 10:32:46 2012 +0200

    Revert "bye"

    This reverts commit 18cdfa27c964b66b624be1030250757b745d6866.

diff --git a/a b/a
index 0907563..3b18e51 100644
--- a/a
+++ b/a
@@ -1 +1 @@
-bye world
+hello world 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-03T09:11:08.203

您总是`git revert <commit-hash>`可以撤消 git 提交。但是，在大多数情况下，这并没有什么帮助，因为它会创建一个新的提交添加到您的 git reflog。

当我不得不退后一步时，我通常会做的是将我的分支重置到更早的阶段。为此，请执行 git reflog 并查找要移动到的 HEAD 位置。

```
rizwan@dragonstone:~/myrepo$ git reflog -3
8d386b8 HEAD@{0}: commit: I did something I don't want
2a59955 HEAD@{1}: commit: Feedback from PR #792
1023102 HEAD@{2}: checkout: moving from one branch to another 
```

现在，假设我想提交哈希`2a59955`并撤消`8d386b8`. 我会做：

```
Update: git reset --soft HEAD@{1} 
```

这会将我的分支重置为初始状态。这样做不仅会撤消所有更改，还会停止跟踪您可能在此提交中添加的所有文件。无论如何，这是在一次提交中撤消所有更改的最有效方法。

> 这将撤消您的所有更改。有一个硬重置意味着要回到过去（至少从 git 的角度来看）。用于`--hard`代替`--soft`这个

# c# - 如何将对象从 c# webapp 发送到 asp.net webapi

> ID：12704571
> 
> 赞同：2
> 
> 时间：2012-10-03T08:26:37.973
> 
> 标签：c#, asp.net, post, windows-runtime, asp.net-web-api

3 天以来，我试图将我的对象发送到我的 webapi。我只是不能从 c# 中做到这一点：/

我正在尝试 PostAsync 方法，我正在尝试发送 json（但后来我无法反序列化），我正在尝试使用 JObject 但无法对其执行任何操作。我只是不知道该怎么做。

我得到了非常简单的方法

```
 public string PostMethod(Location param)
    {
        var test = param;

        return test.name;
    } 
```

如何从 c# 发送 Location 对象，这样我就不会在 webapi 中获得 null ？我唯一能做的就是发送一个简单的类型，比如'string'。但是我的方法都不适用于更复杂的对象。

位置对象下方

```
public partial class Location
{
    public Location()
    {
        this.Category = new HashSet<Category>();
    }

    public int id { get; set; }
    public Nullable<System.DateTime> create_date { get; set; }
    public Nullable<System.DateTime> modify_date { get; set; }
    public Nullable<int> create_user_id { get; set; }
    public Nullable<int> modify_user_id { get; set; }
    public string name { get; set; }
    public string description { get; set; }
    public Nullable<int> photo_id { get; set; }
    public string www { get; set; }
    public string count_data { get; set; }
    public string status { get; set; }
    public Nullable<double> latitude { get; set; }
    public Nullable<double> longitude { get; set; }
    public string city { get; set; }
    public string country { get; set; }
    public string zip { get; set; }
    public string telephone { get; set; }
    public string street { get; set; }

    public virtual AzureMedia AzureMedia { get; set; }
    public virtual Users Users { get; set; }
    public virtual Users Users1 { get; set; }
    public virtual ICollection<Category> Category { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T08:30:28.737

您是否从 NuGet 安装了最新的 Web API？为此，您也需要 Json.NET。

这应该可以解决问题：

```
 Location loc = new Location( ..... );

    var jsonFormatter = new JsonMediaTypeFormatter();

    HttpContent content = new ObjectContent<Location>(loc , jsonFormatter);

    HttpResponseMessage responseMessage = client.PostAsync(uri, content).Result; 
```

# sql-server - 创建用于测试的重复 SQL 数据库

> ID：12704572
> 
> 赞同：35
> 
> 时间：2012-10-03T08:26:39.640
> 
> 标签：sql-server

我在 SQL Server 上创建了一个数据库，并在 winforms c# 中创建了一个前端用户应用程序。它已经启动并运行良好，但现在客户要求我设置一个测试版本来培训新员工，这样他们就可以在接受培训时输入虚拟数据，而不会影响“真实”的实时数据库。

当我安装数据库时，我已经编写了所有脚本，但是从那以后情况发生了变化，我不想再次编写所有表的脚本。

是否有一种快速、方便的方法可以在同一台服务器上复制数据库（及其数据），但名称不同？

**编辑（在托尼霍普金森的帖子之后）**

我已经做到了

```
exec sp_addumpdevice 'Disk','MyDatabaseBackup',N'D:\MyDatabaseBackup' 
Restore Database MyDatabase From MyDatabaseBackup With File = 1, 
Move 'MyDatabase' To N'C:\Program Files\Microsoft SQL 
Server\MSSQL11.SQLE\MSSQL\DATA\MyDatabaseTEST.mdf', 
Move 'MyDatabase_Log' To N'C:\Program Files\Microsoft SQL 
Server\MSSQL11.SQLE\MSSQL\DATA\MyDatabaseTEST_log.ldf', 
NORECOVERY,  NOUNLOAD,  STATS = 10 
RESTORE LOG [MyDatabaseTEST] FROM  [MyDatabaseBackup] WITH  FILE = 2,  NOUNLOAD,  STATS = 10 
exec sp_dropdevice MyDatabaseBackup 
```

但我收到以下错误消息

*消息 3234，级别 16，状态 2，第 2 行逻辑文件“MyDatabase”不是数据库“MyDatabase”的一部分。使用 RESTORE FILELISTONLY 列出逻辑文件名。消息 3013，级别 16，状态 1，第 2 行 RESTORE DATABASE 异常终止。消息 3154，级别 16，状态 4，第 6 行 备份集保存现有“MyDatabaseTEST”数据库以外的数据库的备份。消息 3013，级别 16，状态 1，第 6 行 RESTORE LOG 异常终止。设备掉落。*

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-03T08:30:07.720

在 SQL Server Management Studio 中使用复制数据库选项

![在此处输入图像描述](../Images/01557d2faf76ea6e00e9972e38dde745.png)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-09-07T21:16:28.210

我发现这种方法在 SQL Server 2005 和 2008 Express Edition 上最有效：

从[微软文档](https://docs.microsoft.com/en-us/sql/relational-databases/backup-restore/restore-a-database-to-a-new-location-sql-server)：

1.  右键单击要复制的数据库，然后选择任务->“备份...”
2.  将备份保存到 .bak 文件
3.  在 SQL Server Management Studio 的对象资源管理器中右键单击“数据库”文件夹
4.  选择“恢复数据库”
5.  作为源，选择“文件”并指向您之前创建的 .bak 文件。
6.  更改要恢复到的数据库的名称（这对我来说是关键步骤 - 您不受下拉列表中的选项的限制。）

SSMS 将根据您提供的名称将您的 .bak 文件恢复到新数据库。 [![在此处输入图像描述](../Images/195ed2e477abf8cb5542d44264c995e2.png)](https://i.stack.imgur.com/xMJn3.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T08:57:11.970

首先对您当前的数据库进行完整备份，当然您有 :)

你把它恢复到另一个

例如类似的东西

```
exec sp_addumpdevice 'Disk','LiveDataBackup',N'Insert backup file name here including path'
Restore Database TestData From LiveDataBackup With File = 1,
Move 'LiveData' To N'Path to where sqlserver expects the mdfs to be\TestData.mdf',
Move 'LiveData_Log' To N'Path to where sqlserver expects the ldf to be\TaxData1.ldf',
NORECOVERY,  NOUNLOAD,  STATS = 10
RESTORE LOG [TestData] FROM  [LiveDataBackup] WITH  FILE = 2,  NOUNLOAD,  STATS = 10
exec sp_dropdevice LiveDataBackup 
```

上面假设您的实时数据库巧妙地命名为 LiveData 和 test，TestData。

mdf 和 ldf 所在的路径取决于 sql server 的版本和实例名称

它应该类似于 C:\Program Files\Microsoft SQL Server\MSSQL11.DENALI\MSSQL\DATA\

MSSQL11 因为它是 sql 2012，而 DENALI 是我的实例名称，它默认安装在 C:\Program Files

也没有替换，所以如果你想再次运行它，你需要删除你的测试数据库。

可能有一些方法可以从 GUI 中做到这一点，但我发现它是一个巨大的 PIA，试图将 UI 与我想做的事情联系起来。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-09T11:08:49.090

使用 MS SQLServer 2012，您需要执行 3 个基本步骤

首先，生成仅包含源数据库结构的 .sql 文件

> => 右键单击​​源数据库，然后单击任务，然后生成脚本 => 按照向导操作，您可以在本地保存 .sql 文件

其次，在 .sql 文件中将源数据库替换为目标数据库

> => 右键单击​​目标文件，打开 .sql 文件并按 New Query 和 Ctrl-H 或（编辑 - 查找和替换 - Quack 替换）

最后，填充数据

> =>右键单击目标数据库，然后任务，然后导入数据=>数据源下拉设置为“.net framework data procider for sql server”+在数据下设置连接字符串文本字段，例如：数据源=Mehdi\SQLEXPRESS; Initial Catalog=db_test;User ID=sa;Password=sqlrpwrd15
> => 与目标相同 => 选中要传输的表或选中“源：.....”之外的复选框以检查所有表

你完成了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T08:29:02.020

*   将数据库转储到备份文件中
*   从您的转储重新创建您的数据库 - 这是一个您可以运行的脚本 - 具有不同的名称（您必须更改为脚本）

你可以关注（[这个](https://serverfault.com/questions/147638/dump-microsoft-sql-server-database-to-an-sql-script)）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-12T14:16:57.450

您想将一个 Database_Production 复制到同一服务器中的 Database_Testing。我将以 database_production 数据库为例。我在我的服务器上成功测试了它。

首先，备份数据库Database_Production。

```
BACKUP DATABASE Database_Production TO DISK ='H:\test\Database_Production.bark'; 
```

其次，恢复 Database_Production，这可以将数据库名称重命名为 Database_Testing。

```
RESTORE DATABASE Database_Testing 
    FROM DISK='H:\test\Database_Production.bark' 
    WITH 
        MOVE 'Database_Production_Data' TO 'H:\test\Database_Testing_Data.mdf',
        MOVE 'Database_Production_log' to  'H:\test\Database_Testing_Data.ldf';
GO 
```

然后将数据库 Database_Production 复制到数据库 Database_Testing。MOVE 语句使数据和日志文件恢复到指定位置。您不需要创建数据库 Database_Testing，脚本会创建它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-31T17:08:08.763

如果您需要在同一台服务器上创建数据库，只需创建空数据库。右键单击它并选择还原-> 选择要复制的数据库，然后单击确定。

# php - Switch 语句验证

> ID：12704574
> 
> 赞同：0
> 
> 时间：2012-10-03T08:27:00.147
> 
> 标签：php, validation

如果将 POST 或 GET 数据直接扔到 switch() 语句中，是否需要验证？例如：

```
switch($_GET['input']) {
    //...
} 
```

？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:28:19.813

不，你`case`基本上是验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:28:36.780

switch 语句类似于同一表达式上的一系列 IF 语句。在许多情况下，您可能希望将同一个变量（或表达式）与许多不同的值进行比较，并根据它等于哪个值来执行不同的代码。这正是 switch 语句的用途。

请注意，开关/案例确实比较松散。

```
<?php
switch ($i) {
    case "apple":
        echo "i is apple";
        break;
    case "bar":
        echo "i is bar";
        break;
    case "cake":
        echo "i is cake";
        break;
    default:
    echo "";
    break;
}
?> 
```

所以，简短的回答是“不”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:28:47.887

如果您的开关不包含真实案例，但如果您这样做，则`default`需要验证`$_GET`是否在这种情况下使用它。

例如：

```
switch ($_GET['input']) {
    case 'one':
        echo "input is one";
        break;
    case 'two':
        echo "input is two";
        break;
    default:
       // here `$_GET['input']` need to be validated, escaped, checked if you use it to avoid XSS or SQL injections
       echo $_GET['input'];
} 
```

# c# - 服务器未能验证请求

> ID：12704575
> 
> 赞同：1
> 
> 时间：2012-10-03T08:27:08.563
> 
> 标签：c#, rest, azure

我正在尝试`WindowsAzure REST API`用于在天蓝色表中插入实体。但我得到以下 WebException ：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
 <error xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
  <code>AuthenticationFailed</code>
  <message xml:lang="en-US">
                            Server failed to authenticate the request. Make sure the 
                            value of Authorization header is formed correctly including 
                            the signature.
                            RequestId:bbcf614e-6a12-4fb0-be68-16246853111d
                            Time:2012-10-03T08:21:46.3010154Z
  </message>
 </error> 
```

以下代码创建授权标头：

```
private String CreateAuthorizationHeader(String canonicalizedString)
{
    String signature = string.Empty;
    using (HMACSHA256 hmacSha256 = new HMACSHA256(Encoding.UTF8.GetBytes(AzureStorageConstants.Key)))
    {
        Byte[] dataToHmac = Encoding.UTF8.GetBytes(canonicalizedString);
        signature = Convert.ToBase64String(hmacSha256.ComputeHash(dataToHmac));
    }

    String authorizationHeader = String.Format(
          CultureInfo.InvariantCulture,
          "{0} {1}:{2}",
          AzureStorageConstants.SharedKeyAuthorizationScheme,
          AzureStorageConstants.Account,
          signature);

    return authorizationHeader;
} 
```

生成规范化字符串的代码

```
 public void InsertEntity(string tablename, string artist, string title)
   {
    string requestmethod = "POST";
    string urlpath = tablename;
    string storageserviceversion = "2009-09-19";
    string dateinrfc1123format = DateTime.UtcNow.ToString("R", CultureInfo.InvariantCulture);
    string contentmd5 = string.Empty;
    string contenttype = "application/atom+xml";
    String canonicalizedresource = string.Format("/{0}/{1}", AzureStorageConstants.Account, urlpath);
    String stringtosign = String.Format(
      "{0}\n{1}\n{2}\n{3}\n{4}",
      requestmethod,
      contentmd5,
      contenttype,
      dateinrfc1123format,
      canonicalizedresource);

    String authorizationHeader = CreateAuthorizationHeader(stringtosign);
    ...
    ...
   } 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:46:26.527

请更改以下代码行：

```
using (HMACSHA256 hmacSha256 = new HMACSHA256(Encoding.UTF8.GetBytes(AzureStorageConstants.Key)))
{
    Byte[] dataToHmac = Encoding.UTF8.GetBytes(canonicalizedString);
    signature = Convert.ToBase64String(hmacSha256.ComputeHash(dataToHmac));
} 
```

至

```
using (HMACSHA256 hmacSha256 = new HMACSHA256(Convert.FromBase64String(AzureStorageConstants.Key)))
{
    Byte[] dataToHmac = Encoding.UTF8.GetBytes(canonicalizedString);
    signature = Convert.ToBase64String(hmacSha256.ComputeHash(dataToHmac));
} 
```

基本上您的代码失败了，因为您使用的是 Encoding.UTF8.GetBytes(accountKey)。我们需要使用 Convert.FromBase64String(accountKey)

希望这可以帮助。

# sql - 使用 VBA 而不是 SQL 进行值查找？

> ID：12704576
> 
> 赞同：2
> 
> 时间：2012-10-03T08:27:14.930
> 
> 标签：sql, database, vba, ms-access

是否可以仅使用 VBA 而不是使用 SQL 来复制它？

```
txtSCDate.Value = "SELECT [SC Date] FROM [Stock Conversion] WHERE [SCID] = " & txtSCNumber.Value & ";" 
```

如果不是，那么如何从 VBA 运行该 SQL？

在此先感谢，鲍勃 P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:00:30.077

您可以使用 DLookUp：

```
txtSCDate.Value = DlookUp("[SC Date]","[Stock Conversion]","SCID = " _
                & txtSCNumber.Value) 
```

请注意，您可以将文本框的控制源设置为域函数，例如 DLookUp。

如果你想使用 SQL，那么：

```
Dim rs As Recordset

sSQL = "SELECT [SC Date] FROM [Stock Conversion] WHERE SCID = " _
     & txtSCNumber.Value
Set rs = CurrentDB.Openrecordset(sSQL)
Me.txtSCNumber = rs![SC date] 
```

# c# - 静态方法中是否可以通过 Parallel.For 使用不同的参数调用另一个静态方法？

> ID：12704578
> 
> 赞同：1
> 
> 时间：2012-10-03T08:27:30.950
> 
> 标签：c#, parallel-processing, parallel.foreach

我需要完成类似的事情（他们告诉我用很多话解释更多......）

```
static MyReturnObject Function1(myObjectA parameter1, myObjectB parameter2) {...}

static void Test()
{
   Parallel.For( 0, 10, (index) =>
   {
     //create parameters y and z 
     x = Function1(y,z); 
     // Add x to an array
   });
   // Find the biggest x.
} 
```

代码有效，但结果不准确。如果我使用“for”而不是“parallel.for”，我会得到准确的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:40:25.320

我尝试按照您的规则执行代码，并且我确信可以这样做。

请在下面找到我在 Winform 应用程序中执行的代码。

```
public partial class Form1: Form
    {
        public Form1()
        {
            InitializeComponent();
            this.Load += new EventHandler(Form1_Load);
        }

        void Form1_Load(object sender, EventArgs e)
        {
            Test();
        }

        static int Function1(int parameter1, int parameter2)
        {
            return (parameter1 + parameter2);
        }

        static void Test()
        {
            int[] nums = Enumerable.Range(0, 1000000).ToArray();
            long total = 0;

            // Use type parameter to make subtotal a long, not an int
            Parallel.For<long>(0, nums.Length, () => 0, (j, loop, subtotal) =>
            {
                subtotal += (nums[j] + Function1(1,2));
                return subtotal;
            },
                (x) => Interlocked.Add(ref total, x)
            );

            MessageBox.Show(string.Format("The total is {0}", total));
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:40:07.113

*是否可以在静态方法中调用另一个静态方法？*
当然！

*通过 Parallel.For?*
为什么不？

*使用不同的参数？*
不知道我明白你在这里的意思。您是否希望为 Parallel.For 的每次迭代实例化新对象并将它们传递到 Function1 中？当然可以！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:46:03.693

是的，这是可能的，请参见以下代码：

```
static void Main(string[] args)
{
    Console.WriteLine("\nUsing Parallel.For \n");

    Parallel.For(0, 10, i =>
    {
        Console.WriteLine("i = {0}, thread = {1}", i, Function1());
        Thread.Sleep(10);
    });

    Console.ReadLine();
}

static int Function1()
{
    return Thread.CurrentThread.ManagedThreadId; 
} 
```

# powershell - 在系统帐户下从 Powershell 启动外部应用程序

> ID：12704579
> 
> 赞同：0
> 
> 时间：2012-10-03T08:27:30.973
> 
> 标签：powershell

我需要执行将在系统用户帐户下运行的应用程序（powershell 本身在具有管理员权限的标准用户帐户下运行）。我尝试了使用自定义凭据的 Start-Process cmdlet：

```
$cred = New-Object System.Management.Automation.PSCredential -ArgumentList @("system", (ConvertTo-SecureString -String "" -AsPlainText -Force))
Start-Process -Credential $cred "app.exe" 
```

但我有两个问题。首先，我无法在没有或使用空白密码的情况下创建凭证对象（系统用户没有任何密码），当我使用任何密码的凭证时，我会收到密码不正确的错误消息。任何想法如何做到这一点？

顺便说一句，我不能为此使用 psexec 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-20T16:13:49.187

您可以使用[Invoke-TokenManipulation.ps1](https://github.com/clymb3r/PowerShell/blob/master/Invoke-TokenManipulation/Invoke-TokenManipulation.ps1)脚本：

> 此脚本需要管理员权限。它可以枚举可用的登录令牌并使用它们来创建新进程。这允许您通过使用其他用户的登录令牌创建进程来在网络上使用其他用户的凭据。这甚至适用于 Windows 8.1 LSASS 保护。

复制粘贴它或与您的脚本一起保存`Invoke-TokenManipulation.ps1`并使用点源加载：

```
$ScriptDir = Split-Path $script:MyInvocation.MyCommand.Path
. (Join-Path -Path $ScriptDir -ChildPath 'Invoke-TokenManipulation.ps1') 
```

然后你就可以使用`Invoke-TokenManipulation`函数了。

例子：

```
# Spawns cmd.exe as SYSTEM.
Invoke-TokenManipulation -CreateProcess "cmd.exe" -Username "nt authority\system" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:40:42.307

我认为使用 powershell 是不可能的。您可以尝试使用`at`（dos 命令）：

```
at TIME /interactive app.exe 
```

开始进程`TIME`的时间在哪里...`hh.mm`

# mysql - 用子查询左连接三个表

> ID：12704581
> 
> 赞同：3
> 
> 时间：2012-10-03T08:27:43.780
> 
> 标签：mysql, subquery, left-join, multiple-tables

[检查这个小提琴的数据库和表](http://sqlfiddle.com/#!2/f137a/57)

```
SELECT p.*
FROM Products p
LEFT JOIN offertran ot 
ON p.prod_id = ot.prod_id
LEFT JOIN Offers o
ON ot.offer_id =  (SELECT id FROM Offers 
                   Where dF<=3 AND dt>=3)

ORDER BY o.id DESC, 
          p.prod_id ASC
LIMIT 20 
```

输出是：

```
| PROD_ID | CATEGORY_ID | PROD_NAME |  BRAND | PRICE | STATUS |
---------------------------------------------------------------
|      p3 |          c1 |     prod3 | brand3 |  3000 | active |
|      p3 |          c1 |     prod3 | brand3 |  3000 | active |
|      p1 |          c1 |     prod1 | brand1 |  1000 | active |
|      p2 |          c2 |     prod2 | brand2 |  2000 | active |
|      p4 |          c2 |     prod4 | brand1 |  4000 | active |
|      p5 |          c1 |     prod5 | brand2 |  5000 | active |
|      p6 |          c2 |     prod6 | brand3 |  6000 | active | 
```

但是，如您所见，这里`p3`显示了两次。我不知道为什么..我已经尝试了所有可能的方法，但我找不到任何补救措施.. :(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T08:39:21.500

问题在

```
LEFT JOIN Offers o
ON ot.offer_id =  (SELECT id FROM Offers 
                   Where dF<=3 AND dt>=3) 
```

您将 ot.offer_id 与常量值连接起来（从报价表中选择它们没有任何意义）。

正确的方法：

```
SELECT p.*
FROM Products p
LEFT JOIN offertran ot 
ON p.prod_id = ot.prod_id
LEFT JOIN Offers o
ON ot.offer_id = o.id AND o.dF<=3 AND o.dt>=3
ORDER BY o.id DESC, 
          p.prod_id ASC
LIMIT 20 
```

看看[这个 SQLFiddle](http://sqlfiddle.com/#!2/f137a/107)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:37:45.940

可能你正在寻找这个。这将只返回一次 p3。您错过了 Second Left Join 条件中的 o.id。

```
SELECT p.*
FROM Products p
LEFT JOIN offertran ot 
ON p.prod_id = ot.prod_id
LEFT JOIN Offers o
ON o.id =  (SELECT id FROM Offers 
            Where dF<=3 AND dt>=3)

ORDER BY o.id DESC, 
          p.prod_id ASC
LIMIT 20 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T08:34:51.450

可能缺少 'o' 和 'ot' 之间的连接条件：

```
SELECT p.*
FROM Products p
LEFT JOIN offertran ot 
ON p.prod_id = ot.prod_id
LEFT JOIN Offers o
ON ot.offer_id IN(SELECT id FROM Offers 
               Where dF<=3 AND dt>=3)
**AND ot.offer_id = o.id***
ORDER BY o.id DESC, 
      p.prod_id ASC
LIMIT 20 
```

或者，也许我错过了一些东西，并且没有理解您想通过查询从数据库中获得什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T08:31:01.793

您可能有两条记录在`offertran`或`Products`带有 p3 的 PROD_ID。您可以将其更改为`SELECT DISTINCT p.* FROM ...`，这样任何重复的行都将被忽略。

只是为了看看`offertran`返回的内容，将您更改`select p.*`为`select *`

# jdbc - 如何识别java中的数据库异常？

> ID：12704582
> 
> 赞同：0
> 
> 时间：2012-10-03T08:27:58.197
> 
> 标签：jdbc, database-connectivity

我有一个数据库，我的 java 程序或 Web 应用程序连接到该数据库以保持应用程序状态。在对数据库的某些调用中，可能会出现某些异常，例如可能有 a`duplicate key exception`或某些`check constraint`可能失败，或者可能像`bad sql grammer`. 如何有效地识别引发的异常类型，以便可以根据异常类型采取适当的操作。例如提示用户记录已经存在，以防`duplicate key exception`.

可能有一种方法可以检查异常字符串，但是否有一种不那么乏味的方法呢？

此外，是否可以获得更详细的信息，例如是否违反了唯一键约束，这几个唯一列中的哪一个恰好是罪魁祸首？

请根据 Java 编程语言或任何基于 Java 的 Spring 等框架来回答您的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:35:22.510

使用（[此处](http://docs.oracle.com/javase/6/docs/api/java/sql/SQLException.html)`java.sql.SQLException`为 javadoc ）。

在捕获 a`SQLException`时，您可以查看其**SQLState**，它将根据标准（XOPEN 或 SQL:2003）指示发生了哪种类型的错误。

# java - 使用泛型编译错误

> ID：12704583
> 
> 赞同：3
> 
> 时间：2012-10-03T08:28:04.907
> 
> 标签：java, generics, inheritance, compiler-errors, extends

有以下类：

```
public class LivingBeing { … } 
```

然后有

```
public class Human extends LivingBeing { … } 
```

现在还有这个包装器：

```
public class LivingBeingWrapper<T extends LivingBeing> { … } 
```

完成图片还有方法

```
public boolean validate(LivingBeingWrapper<LivingBeing> livingBeingWrapper) 
```

现在在编写以下代码时

```
LivingBeingWrapper<Human> wrapper = createHumanWrapper();
validate(wrapper); 
```

我收到以下编译错误：

> MyType 类型中的方法 validate(LivingBeingWrappe<LivingBeing> livingBeingWrapper) 不适用于参数 (LivingBeingWrapper<Human>)。

但为什么？`Human`延伸`LivingBeing`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T08:30:48.353

香蕉**是**水果。但是香蕉**的清单不是**水果的清单。否则，您可以列出香蕉并添加一个苹果（假设苹果**是**水果）。

这听上去相当不切实际，但它是上面发生的事情的关键。您需要指定您的包装器，以便它采用扩展类型`LivingBeing`。

有关更多信息，请参阅[本文](https://www.ibm.com/developerworks/java/library/j-jtp01255/index.html)，尤其是“泛型不是协变的”部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T08:31:31.153

您的`validate`方法声明必须使用带有`LivingBeingWrapper`参数的参数调用它`LivingBeing`。但是，您正在传递一个`LivingBeingWrapper`参数化的`Human`. 尝试从此更改您的方法声明：

```
public boolean validate(LivingBeingWrapper<LivingBeing> livingBeingWrapper) 
```

对此：

```
public boolean validate(LivingBeingWrapper<? extends LivingBeing> livingBeingWrapper) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T08:31:26.060

更改以下方法： -

```
public boolean validate(LivingBeingWrapper<LivingBeing> livingBeingWrapper) 
```

至

```
public boolean validate(LivingBeingWrapper<T> livingBeingWrapper) 
```

因为这个方法在你的类里面，就像： -

```
public class LivingBeingWrapper<T extends LivingBeing> 
```

因此，您可以在方法参数中使用类型 T，并且 T 将被替换为`Horse`.. 供您特别参考..

如果您的方法采用与 in**不同的类型**`class definition (T)`，那么您可以使用此声明：-

```
public boolean validate(LivingBeingWrapper<? extends LivingBeing> 
                                                    livingBeingWrapper) 
```

现在，如果您必须调用**`validate(LivingBeingWrapper<Human>)`**，您的方法必须定义为采用泛型类型参数 type `Human`，它 extends `LivingBeing`，这就是您的`T`类型（因为它还在您的类定义中扩展了 LivingBeing）

# dynamics-crm-2011 - CRM 2011 Pre-Operation 插件离线 - 更改未同步到服务器，而离线显示

> ID：12704585
> 
> 赞同：2
> 
> 时间：2012-10-03T08:28:13.277
> 
> 标签：dynamics-crm-2011

我在具有离线访问权限的 Dynamics CRM Outlook 客户端中的同步中遇到了奇怪的行为。我们有一个插件，在创建联系人时在预操作阶段离线运行，设置计算字段的值。

targetEntity.Attributes[fieldName] = newValue;

创建联系人后，该字段已设置，并且在脱机时一切正常，但在同步后该字段被空白。我检查了客户端上的 OfflineQueue 表，我可以看到 SOAP 消息不包含修改字段的信息，所以这就是信息没有被带到服务器的原因。**似乎 SOAP 消息在预操作阶段之前被插入到 OfflineQueue 表中，并且没有对插件中的更改进行修改。**有没有人见过这个？这是 CRM 中的错误吗？我找不到任何相关信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-10T12:23:03.580

术后有试过吗？
在操作后注册插件步骤，而不是检索创建的联系人和更新字段。
targetEntity.Attributes[fieldName] = newValue;
希望它会工作

# mysql - 无法使用 ruby -mysql gem 连接到 MySQL

> ID：12704588
> 
> 赞同：2
> 
> 时间：2012-10-03T08:28:17.820
> 
> 标签：mysql, ruby, rvm, bundler

我使用捆绑器安装了 ruby​​-mysql gem。但是 Mysql.connect 因以下跟踪而崩溃。

```
/home/kris/.rvm/gems/ruby-1.9.3-p194-perf@dispatch/gems/ruby-mysql-2.9.10/lib/mysql/protocol.rb:167:in `initialize': No such file or directory - /tmp/\
mysql.sock (Errno::ENOENT)
        from /home/kris/.rvm/gems/ruby-1.9.3-p194-perf@dispatch/gems/ruby-mysql-2.9.10/lib/mysql/protocol.rb:167:in `new'
        from /home/kris/.rvm/gems/ruby-1.9.3-p194-perf@dispatch/gems/ruby-mysql-2.9.10/lib/mysql/protocol.rb:167:in `block in initialize'
        from /home/kris/.rvm/rubies/ruby-1.9.3-p194-perf/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
        from /home/kris/.rvm/gems/ruby-1.9.3-p194-perf@dispatch/gems/ruby-mysql-2.9.10/lib/mysql/protocol.rb:164:in `initialize'
        from /home/kris/.rvm/gems/ruby-1.9.3-p194-perf@dispatch/gems/ruby-mysql-2.9.10/lib/mysql.rb:114:in `new'
        from /home/kris/.rvm/gems/ruby-1.9.3-p194-perf@dispatch/gems/ruby-mysql-2.9.10/lib/mysql.rb:114:in `connect'
        from /home/kris/.rvm/gems/ruby-1.9.3-p194-perf@dispatch/gems/ruby-mysql-2.9.10/lib/mysql.rb:49:in `new'
        from /home/kris/dev/dispatch/application.rb:38:in `<top (required)>'
        from config.ru:1:in `require'
        from config.ru:1:in `block in <main>'
        from /home/kris/.rvm/gems/ruby-1.9.3-p194-perf@dispatch/gems/rack-1.3.6/lib/rack/builder.rb:51:in `instance_eval'
        from /home/kris/.rvm/gems/ruby-1.9.3-p194-perf@dispatch/gems/rack-1.3.6/lib/rack/builder.rb:51:in `initialize'
        from config.ru:1:in `new'
        from config.ru:1:in `<main>'
        from /home/kris/.rvm/gems/ruby-1.9.3-p194-perf@dispatch/gems/thin-1.4.1/lib/rack/adapter/loader.rb:33:in `eval'
        from /home/kris/.rvm/gems/ruby-1.9.3-p194-perf@dispatch/gems/thin-1.4.1/lib/rack/adapter/loader.rb:33:in `load'
        from /home/kris/.rvm/gems/ruby-1.9.3-p194-perf@dispatch/gems/thin-1.4.1/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
        from /home/kris/.rvm/gems/ruby-1.9.3-p194-perf@dispatch/gems/thin-1.4.1/lib/thin/controllers/controller.rb:71:in `start'
        from /home/kris/.rvm/gems/ruby-1.9.3-p194-perf@dispatch/gems/thin-1.4.1/lib/thin/runner.rb:185:in `run_command'
        from /home/kris/.rvm/gems/ruby-1.9.3-p194-perf@dispatch/gems/thin-1.4.1/lib/thin/runner.rb:151:in `run!'
        from /home/kris/.rvm/gems/ruby-1.9.3-p194-perf@dispatch/gems/thin-1.4.1/bin/thin:6:in `<top (required)>'
        from /home/kris/.rvm/gems/ruby-1.9.3-p194-perf@dispatch/bin/thin:23:in `load'
        from /home/kris/.rvm/gems/ruby-1.9.3-p194-perf@dispatch/bin/thin:23:in `<main>' 
```

我的机器运行的是 Ubuntu 12.04，我已经安装了 libmysqlclient-dev。我该如何解决这个问题？

谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T09:09:32.170

我相信您应该只更改 database.yml 中的套接字。

尝试从

`/tmp/mysql.sock`

到

`/var/run/mysqld/mysqld.sock`

# javascript - stringByEvaluatingJavaScriptFromString 在 iOS 6 中不起作用

> ID：12704593
> 
> 赞同：2
> 
> 时间：2012-10-03T08:28:27.810
> 
> 标签：javascript, ios, uiwebview, ios6

我看到问题仅在 iOS 6 上发生，但在 iOS 6 版本以下工作正常。

我的应用程序正在从一个链接加载图像，该链接需要使用 Javascript 放大其图像像素以填充到 UIWebView 的大小内。链接图像最初以 140x24 像素为单位。

我看到它正在运行，但图像没有使用 iOS 6 模拟器放大。它确实适用于 iOS 5 模拟器。请帮忙。

```
(void)webViewDidFinishLoad:(UIWebView *)webView {

  [webView stringByEvaluatingJavaScriptFromString:@"document.getElementsByTagName(\"img\")(0).height=\"30\";document.getElementsByTagName(\"img\")(0).width=\"280\";"];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:58:01.263

# php - 如何将数据发送到 php 文件并在 javascript 函数中返回值？

> ID：12704597
> 
> 赞同：0
> 
> 时间：2012-10-03T08:28:41.917
> 
> 标签：php, javascript

在 Js 文件中，我创建了一个函数，该函数必须发送一个 id 并将布尔值返回给返回 false 或 true 的 php 文件；但我该怎么做呢？

JS函数

```
function findDB(id)
{

} 
```

PHP端

```
include_once("kutuphane/inc.php"); 
$id = $_POST['tipi'];

$sql= "select count(id) from bolge_db where parent_id=$id"; 

    $faz2= $_SESSION["VT"]->doQuery($sql);

 $flag=false;
 if($faz2>0)
  {
    $flag= true;
  }
   else
  {
    $flag= false;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:38:10.767

很简单的AJAX！用js试试这段代码：

```
function MakeRequest()
{
  var xmlHttp = getXMLHttp();

  xmlHttp.onreadystatechange = function()
  {
    if(xmlHttp.readyState == 4)
    {
      HandleResponse(xmlHttp.responseText);
    }
  }

  xmlHttp.open("GET", "ajax.php", true); 
  xmlHttp.send(null);
} 
```

请记住，您必须在 php 中回显某些内容！例如：回声 1；回声0；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:51:10.930

或者使用 jQuery

```
var data = {
    var1 : "string or another var"
};

$.post('url.php',data , function(data) {
  var response = data;
  //Do What Ever You Want
}); 
```

# objective-c - 在 Objective C 中使用 libxls

> ID：12704606
> 
> 赞同：2
> 
> 时间：2012-10-03T08:29:15.663
> 
> 标签：objective-c, xcode, excel

我打算制作一个数据源来自 excel 文件的应用程序。所以基本上期望的结果是让我的应用程序数据与 excel 文件同步。我搜索并找到了 libxls，这似乎是一个解决方案？

我下载了用于 xCode 的 DHlibxls，但没有成功运行提供的测试文件。

每当我尝试运行时，都会出现以下错误：

> 验证“https://libxls.svn.sourceforge.net:443”的服务器证书时出错：- 证书不是由受信任的机构颁发的。使用指纹手动验证证书！证书信息：- 主机名：*.svn.sourceforge.net - 有效期：从 2012 年 2 月 25 日星期六 23:58:41 GMT 到 2013 年 3 月 31 日星期日 19:51:44 GMT - 颁发者：GeoTrust, Inc.，美国 -指纹：0b:11:76:de:db:4c:74:72:cb:01:49:7d:13:70:c2:f1:13:7b:cb:bf (R) 弹出，接受 (t)暂时或永久地接受（p）？svn：'https://libxls.svn.sourceforge.net/svnroot/libxls/trunk/libxls'的选项：服务器证书验证失败：颁发者不受信任（https://libxls.svn.sourceforge.net）命令/ bin/sh 失败，退出代码为 1

有没有人遇到同样的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T23:41:42.633

for a more explicite answer click [here](http://rt.beanstalkapp.com/customer/portal/articles/68094-why-am-i-getting-a-certificate-validation-error-).

For this problem go to the command prompt, then type

```
svn list https://libxls.svn.sourceforge.net:443 
```

then type

```
p 
```

recompile your code and it should work

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:13:05.720

该脚本似乎正在运行 svn，可能会从 SVN 获取一些文件。错误本身是说 svn 无法识别 SourceForge SVN 服务器的 HTTPS 证书。如果您的时间/日期设置不正确，您可能会得到它，或者可能是其他一些事情。

Sourceforge 建议您通过检查浏览器中的 URL (https://sourceforge.net/apps/trac/sourceforge/wiki/Subversion) 来检查 HTTPS 证书是否正确：

> [当您收到此错误时，我们建议您通过将结帐 URL 放入受信任的 Web 浏览器（即https://PROJECTNAME.svn.sourceforge.net/svnroot/PROJECTNAME](https://PROJECTNAME.svn.sourceforge.net/svnroot/PROJECTNAME)）来验证服务器是否是正确的服务器 。

您可以通过复制此 URL 并将其粘贴到浏览器中来执行此操作： [https ://libxls.svn.sourceforge.net:443/libxls/svnroot](https://libxls.svn.sourceforge.net:443/libxls/svnroot)

然后在浏览器 URL 字段中，URL 左侧应该有一个小锁图标，单击它。（我在看火狐）。然后单击**更多信息**，然后单击**查看证书**。然后您应该看到*SHA1 指纹*与您在错误中看到的长十六进制字符串相同：0b:11:76:de:db:4c:74:72:cb:01:49:7d:13:70:c2 :f1:13:7b:cb:bf

如果相同，那么您应该输入“p”来永久存储。如果它不同，那么连接有问题，或者有人可能试图“中间人”攻击该站点。

# php - PHP str_replace 用下划线替换空格

> ID：12704613
> 
> 赞同：69
> 
> 时间：2012-10-03T08:29:39.110
> 
> 标签：php, str-replace

有没有我看不到的原因，为什么这不起作用？

```
 $string = $someLongUserGeneratedString;
    $replaced = str_replace(' ', '_', $string);
    echo $replaced; 
```

输出仍然包含空格......任何想法都会很棒

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2012-10-03T08:31:25.630

我建议您使用它，因为它会检查单个和多个出现的空白（如 Lucas Green 所建议的那样）。

```
$journalName = preg_replace('/\s+/', '_', $journalName); 
```

代替：

```
$journalName = str_replace(' ', '_', $journalName); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-03T08:31:09.517

试试这个：

```
$journalName = preg_replace('/\s+/', '_', $journalName); 
```

说明：您很可能会看到空格，而不仅仅是纯空格（有区别）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-02-25T05:13:32.453

对于一个匹配的字符替换，使用**str_replace**：

```
$string = str_replace(' ', '_', $string); 
```

对于所有匹配的字符替换，使用**preg_replace**：

```
$string = preg_replace('/\s+/', '_', $string); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-22T06:11:35.747

试试这个：

```
$journalName = str_replace(' ', '_', $journalName); 
```

删除空白

# objective-c - 目标 C：在 NSLabel 或 NSTextField 中显示日志

> ID：12704615
> 
> 赞同：0
> 
> 时间：2012-10-03T08:29:40.913
> 
> 标签：objective-c, console, nstextfield, nslog

有没有办法在 NSLabel 或连续滚动的 NSTextField 中连续显示控制台日志（显示所有 NSLogs）？

我想打印的控制台中有一些重要消息是由机器发送的（不是我自称的 NSLog），这就是我想这样做的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:51:07.167

好吧，如果您尝试从 xcode 之外获取信息，您可以随时从终端启动它以查看它吐出的内容。

1.  打开终端.app
2.  输入 /path/to/your.app/Contents/MacOS/your

它将显示吐出的 NSLogs 和错误。

# wpf - DataGrid Width * 中的 WPF 在我的计算机上运行时看起来不同

> ID：12704618
> 
> 赞同：0
> 
> 时间：2012-10-03T08:30:00.077
> 
> 标签：wpf, datagrid, width

我有一个很奇怪的问题：我最近买了一台新电脑。在我的新计算机上运行应用程序时，在所有 DataGrids 中都有如下所示的行：

```
<DataGridTextColumn Header="Modell" Width="*" Binding="{Binding Model}" MaxWidth="200" /> 
```

所有列的宽度均为 20（即使是具有指定宽度的列）。这是我从VS运行还是只是双击exe。如果相同的 exe（我自己编译的）被复制并在其他机器上运行，它可以完美运行。

但是，如果我将宽度更改为以下：

```
<DataGridTextColumn Header="Modell" Width="auto" Binding="{Binding Model}" MaxWidth="200" /> 
```

所有的列看起来都很好。

是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:42:09.680

不同的机器意味着不同的硬件，因此您可能会因硬件加速而遇到问题。通过将其添加到 App.xaml.cs 文件中，尝试从硬件渲染切换到软件渲染：

```
protected override void OnStartup(StartupEventArgs e)
    {

        RenderOptions.ProcessRenderMode = System.Windows.Interop.RenderMode.SoftwareOnly;
} 
```

# sql - 如何将此语句更改为分离标准

> ID：12704624
> 
> 赞同：1
> 
> 时间：2012-10-03T08:30:10.700
> 
> 标签：sql, hibernate, detachedcriteria

该语句用于检查用户是否存在于数据库中。

```
public boolean isExisting(int userId) {
    String sql = "{call isExistingUser(?)}";
    Session session = null;
    boolean isExisting = false;
    try {
        session = getSession();
        SQLQuery query = session.createSQLQuery(sql);
        query.setParameter(0, userId);
        List<?> list = query.list();
        isExisting = list.get(0) != null ? (Boolean) list.get(0) : false;  
    } finally {
        if (session != null)
            session.close();
    }
    return isExisting;
} 
```

这是存储过程：

CREATE DEFINER= `cbsadmin`@ `%`PROCEDURE `isExistingUser`(IN userId int) BEGIN SELECT USER_ID FROM USER_LOGIN_STATUS WHERE USER_ID = userId; 结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:37:57.617

在 NHibernate 中使用分离条件查询存储过程是不可能的。

您只需要使用 SQL 查询。

见[这里](https://stackoverflow.com/questions/6611124/call-a-stored-procedure-with-a-detachedcriteria)。

# ruby-on-rails - Ruby on Rails：nil:NilClass 的未定义方法“[]”

> ID：12704636
> 
> 赞同：-1
> 
> 时间：2012-10-03T08:30:54.717
> 
> 标签：ruby-on-rails, ruby, search, methods

> **可能重复：**
> [Ruby on Rails：参数为零。nil:NilClass 的未定义方法“[]”](https://stackoverflow.com/questions/12705545/ruby-on-rails-params-is-nil-undefined-method-for-nilnilclass)

我有一个搜索功能在搜索某些内容时正在工作，但我无法进入搜索页面，因为我收到了这个错误。

```
NoMethodError in ProjectsController#search

undefined method `[]' for nil:NilClass 
```

在我的项目控制器中，第 26 行：

```
tech_ids = params["technols"]["id"].reject(&:blank?). 
```

这显然与我试图删除空白的事实有关。

这是我的搜索操作：

```
def search
  tech_ids = params["technols"]["id"].reject(&:blank?)

  @search = params[:client], params[:industry], params[:role], tech_ids, params[:business_div], params[:project_owner],  params[:status], params[:start_date_dd], params[:start_date_A], params[:start_date_B],  params[:keywords]

  @project_search = Project.search(*@search).order(sort_column + ' ' + sort_direction).paginated_for_index(per_page, page)

  @search_performed = !@search.reject! { |c| c.blank? }.empty? 
  @project = Project.new(params[:project])
  @all_technols = Technol.all
  @project_technol = @project.projecttechnols.build

  respond_to do |format|
    format.html # search.html.erb
    format.json { render :json => @project }
  end
end 
```

这是我的项目模型：

```
class Project < ActiveRecord::Base
  attr_accessible  :edited_first_name, :edited_last_name, :first_name, :last_name, :business_div, :client, :customer_benifits, :edited_date, :end_date, :entry_date,  :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech

  validates_presence_of :business_div, :client, :customer_benifits, :end_date, :exception_pm, :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary#, :tech

  has_many :projecttechnols
  has_many :technols, :through => :projecttechnols

  def self.like(text); "%#{text}%"; end

  def self.search(search_client, search_industry, search_role, search_techs_ids, search_business_div, search_project_owner, search_status, search_start_date_dd, search_start_date_A, search_start_date_B,  search_keywords)
    # start with a scoped query, to apply more scopes on it afterwards
    _projects = Project.scoped 
    # then, for each of the parameters, apply the scope only if present
    if search_client.present?
      _projects = _projects.where ['client LIKE ?', like(search_client)] 
    end

    if search_industry.present?
      projects = _projects.where ['industry LIKE ?', like(search_industry)]
    end

    if search_role.present?
      _projects = _projects.where ['role LIKE ?', like(search_role)]
    end

    if search_techs_ids.present?
      _projects = _projects.joins(:technols).where("technols.id" => search_techs_ids)
    end

    if search_business_div.present?
      _projects = _projects.where ['business_div LIKE ?', like(search_business_div)]
    end 

    if search_project_owner.present?
      _projects = _projects.where ['project_owner LIKE ?', like(search_project_owner)]
    end

    if search_exception_pm.present?
      _projects = _projects.where ['exception_pm LIKE ?', like(search_exception_pm)]
    end

    if search_status.present?
      _projects = _projects.where ['status LIKE ?', like(search_status)]
    end

    todays_date = DateTime.now.to_date

    if !search_start_date_A.blank? or !search_start_date_B.blank?
      search_start_date_A = Date.parse(search_start_date_A).strftime("%Y-%m-%d")
      search_start_date_B = Date.parse(search_start_date_B).strftime("%Y-%m-%d")
      todays_date = nil
      search_start_date_dd = nil
    end

    if search_start_date_dd.blank?
      todays_date = nil
    end

    if search_start_date_A.present? or search_start_date_B.present?
      _projects = _projects.where [' DATE(start_date) BETWEEN ? AND ?', search_start_date_A, search_start_date_B]
    end

    if search_start_date_dd.present?
      _projects = _projects.where ['DATE(start_date) BETWEEN ? AND ?', search_start_date_dd, todays_date]
    end

    if search_keywords.present?
      _projects = _projects.where ['keywords LIKE ?', like(search_keywords)]
    end

    _projects
  end

  def self.paginated_for_index(projects_per_page, current_page)
    paginate(:per_page => projects_per_page, :page => current_page)
  end
end 
```

希望这是一个简单的修复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T08:42:38.563

如果您的堆栈跟踪是正确的并且这一行：

```
tech_ids = params["technols"]["id"].reject(&:blank?) 
```

对错误负责，这意味着 params["technols"] 为 nil，或者 params["technols"]["id"] 为 nil。除此之外，假设奇异标识符返回一个唯一值而不是数组（我假设它会被称为“ids”），那么 params["technols"]["id"] 返回的值将不是一个数组, #reject 是一个数组 API 方法 (http://corelib.rubyonrails.org/classes/Array.html)。除此之外，通常的做法是使用符号而不是字符串来访问 Rails 控制器中的哈希值，我将为此编写：

```
params[:technols][:id] 
```

# php - 未接收到带有外国口音字符的 Apple 推送通知

> ID：12704638
> 
> 赞同：3
> 
> 时间：2012-10-03T08:31:05.007
> 
> 标签：php, iphone, objective-c, encoding, apple-push-notifications

我正在发送推送通知，当消息包含外来字符（在我的情况下为土耳其语）时，如 İ、ş、ç、ğ... 消息未到达设备。

这是我的代码：

```
$message = 'THİS is push';
$passphrase = 'mypass';
$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'MyPemFile.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client(
    'ssl://gateway.push.apple.com:2195', $err,
    $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);
if (!$fp)
    exit("Failed to connect: $err $errstr" . PHP_EOL);
echo 'Connected to Apple service. ' . PHP_EOL;

// Encode the payload as JSON
$body['aps'] = array(
    'alert' => $message,
    'sound' => 'default'
    );
$payload = json_encode($body);

$result = 'Start'.PHP_EOL;
$tokenArray = array('mytoken');
foreach ($tokenArray as $item)
{
// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $item) . pack('n', strlen($payload)) . $payload;
// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));
if (!$result)
    echo 'Failed message'.PHP_EOL;
else
    echo 'Successful message'.PHP_EOL;
}

// Close the connection to the server
fclose($fp); 
```

我尝试使用 utf8_encode() 对 $message 变量进行编码，但收到的消息为“THÝS is push”。像 iconv() 之类的其他方式对我不起作用，其中一些裁剪了土耳其字符，有些根本没有收到。

我也有

```
header('content-type: text/html; charset: utf-8'); 
```

和

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

在我的页面中。我认为在设置值时不会出现问题，但可能是使用 pack() 函数。

有什么想法可以解决这个问题而不用英文替换字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:36:29.900

我所要做的就是用以下脚本替换土耳其字符：

```
function tr_to_utf($text) {   
    $text = trim($text);    
    $search = array('Ü','Ş','Ğ','Ç','İ','Ö','ü','ş','ğ','ç','ı','ö');  
    $replace = array('Ãœ','Å','&#286;','Ã‡','Ä°','Ã–','Ã¼','ÅŸ','ÄŸ','Ã§','Ä±','Ã¶');
    $new_text = str_replace($search,$replace,$text);    
    return $new_text;  
} 
```

现在它可以正常工作了。

[这就是源头](http://www.egonomik.com/2010/04/php-turkce-%C2%BB-utf-cevirici-script-ascii-to-utf-converter/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:43:08.897

“n”参数意味着，您打包为无符号短（始终为 16 位，大端字节序）。我不确定 Apple CPU 硬件如何处理指令以及如何转换它们，但肯定与 PC 不同。尝试切换字节顺序，使用 "v" unsigned short（总是 16 位，小端字节序）。

# iphone - 在 Objective-C 中搜索并获取多维数组的索引

> ID：12704640
> 
> 赞同：0
> 
> 时间：2012-10-03T08:31:09.863
> 
> 标签：iphone, objective-c, nsarray

在多维数组中搜索对象索引的最佳方法是什么。我试图用**indexOfObjectPassingTest:^BOOL(id object, NSUInteger index, BOOL *stop)**来做，但它似乎需要两个这样的嵌套块。有没有更简单有效的方法来做到这一点。徘徊是否有一些有效的算法或苹果为此提供了更好的方法。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:46:18.650

我认为嵌套数组等没有什么完全错误的！您是否看过[索引路径](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Collections/Articles/IndexPaths.html#//apple_ref/doc/uid/TP40010167-SW1)（和[NSIndexPath 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSIndexPath_Class/Reference/Reference.html#//apple_ref/occ/instm/NSIndexPath/indexAtPosition%3a)）？

您可能仍然需要编写一些代码才能完成工作，但是 NSIndexPath 的方法会帮助您！

# c - 定时器到期

> ID：12704644
> 
> 赞同：0
> 
> 时间：2012-10-03T08:31:25.997
> 
> 标签：c, timer, linux-kernel

我正在使用一个周期性计时器，并在`SIGALRM`接收到两个信号之间进行计时。我观察到的是，它`itimer`可能会在我设定的时间之前或之后过期。例如，如果我将其设置为，它可能会在或`1m sec`到期。`0.9998msec``1.0023msec`

计时器到期不应该总是大于设置的吗？更少的时间是我不明白的。

这是我的代码：

```
enter code here     
#include <stdio.h>
#include <signal.h>
#include <sys/time.h>
#include <stdlib.h>
#include <time.h>

#define INTERVAL 1000

struct timespec ti[100];
int s=0;

void ex(int i)
{int d=0;
struct timespec t[100],s1,s2;
   for(d=0;d<99;d++)
    {
    s1= ti[d];
    s2= ti[d+1];
   printf("%u:%u\t%u:%u\t", s1.tv_sec, s1.tv_nsec, s2.tv_sec, s2.tv_nsec);

    if ((s2.tv_nsec- s1.tv_nsec)<0) {
        t[d].tv_sec = s2.tv_sec-s1.tv_sec-1;
        t[d].tv_nsec = 1000000000 +s2.tv_nsec -s1.tv_nsec;
    } else {
        t[d].tv_sec = s2.tv_sec-s1.tv_sec;
        t[d].tv_nsec = s2.tv_nsec-s1.tv_nsec;
    }

    printf("%u:%u\n",t[d].tv_sec,t[d].tv_nsec);  

    } 
   exit(0);
}

void alarm_wakeup (int i)
{  
   clock_gettime(CLOCK_MONOTONIC, &ti[s]); 
    s++;
    if(s==100)
    { ex(0);
    }
}

void main ()
{
  struct itimerval tout_val;
  tout_val.it_interval.tv_sec = 0;
  tout_val.it_interval.tv_usec = INTERVAL;
  tout_val.it_value.tv_sec = 0; 
  tout_val.it_value.tv_usec = INTERVAL;

  setitimer(ITIMER_REAL, &tout_val,0);

  signal(SIGALRM,alarm_wakeup); /* set the Alarm signal capture */
 signal(SIGINT,ex);

  while (1)
{ 
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:01:29.020

当定时器到期时，信号被提升并且定时器被重新调度。

但是，在发出的信号和正在处理的信号之间可能存在延迟 - 如果该进程尚未运行，则必须重新安排它。这意味着在计时器的实际到期和`clock_gettime()`信号处理程序中的调用运行之间存在潜在的可变延迟。

如果调用之前的这个延迟`clock_gettime()`比下一次迭代要长，那么`clock_gettime()`调用之间的时间将略小于 1ms，即使随后的计时器到期之间有 1ms 的间隙。

以图解形式：

```
time:                0ms...............1ms...............2ms...............3ms
timer expiry:        X                 X                 X                 X
signal handler runs:  S                      S            S                  S 
```

您可以看到，第二个信号处理程序运行之前的较长延迟使得第三个信号看起来“早”，即使底层计时器不是。

# sql-server - SAAS 多租户数据库设计

> ID：12704648
> 
> 赞同：0
> 
> 时间：2012-10-03T08:31:36.387
> 
> 标签：sql-server, database, saas, multi-tenant, database-performance

我开始使用 SQL Server 2008 开发基于 SaaS 的应用程序并参与数据库设计。

我正在为应用程序使用共享数据库实例。我的意思是只有一个数据库具有由 TenantId/ClientId 标识的所有客户端/租户记录。

经过一番讨论，我决定将所有表的所有标识符更改为 GUID，而不是自动增量 id。

这样做的主要原因

1.  借助 GUID 将一个客户端数据移动/合并到另一个新主机将很容易

但是我觉得当我们加入时，将 GUID 作为标识符会很慢。该数据库将有超过 100 个客户，每个客户将有 10,000 条记录。

有人可以建议我一些想法来实现这种性能良好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:34:43.453

> 但是我觉得当我们做 JOIN 时将 GUID 作为标识符会很慢

我建议尝试克服你的非理性“感觉”，除非它们有证据支持。这可能会解决你的问题

# android - 流媒体音乐和视频

> ID：12704650
> 
> 赞同：1
> 
> 时间：2012-10-03T08:31:48.430
> 
> 标签：android, streaming, android-wifi

如何创建一个应用程序，通过 wi-fi 将音乐或视频从您的 android 设备流式传输到任何设备（如[https://play.google.com/store/apps/details?id=com.bianor.ams&hl=ru](https://play.google.com/store/apps/details?id=com.bianor.ams&hl=ru)或在 iOS AirStream 中）？提前谢谢你=）

# sql - Magento：根据 SKU 更新特定属性

> ID：12704653
> 
> 赞同：0
> 
> 时间：2012-10-03T08:32:08.877
> 
> 标签：sql, magento, phpmyadmin

所以，这就是我想要做的。

我有一个庞大的 EAN 编号列表，我都需要链接到特定的 SKU。

```
if SKU = ABCD1234 then EAN = 12345678
if SKU = ABCE1234 then EAN = 12345679
if SKU = ABCF1234 then EAN = 12345670 
```

任何人都知道我需要更改哪些 Magento 表，以及我需要更改哪种 SQL 查询？

干杯

凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:59:41.053

我会运行原生 Magento 导入（系统->导入/导出）。只需创建一个包含两列 (sku - EAN) 的 CSV 文件。应该为您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:37:09.467

您可以将您的 sku/ean 列表放在 csv 中，并使用[magmi](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Main_Page)进行更新

# ios - 使用带有身份验证的 IOS 调用 Restful API

> ID：12704657
> 
> 赞同：6
> 
> 时间：2012-10-03T08:32:47.900
> 
> 标签：ios, api, rest, authentication, prestashop

我正在开发一个使用 prestashop API 使用 restful API 调用的应用程序。我是 IOS 的新手，我在 android 中编写了相同的方法：

```
 InputStream is = null;
try {

 DefaultHttpClient client = new DefaultHttpClient();  

    /* adding credentials as it is RESTful call */
    String username = "xyz";
    String password = "";
    client.getCredentialsProvider().setCredentials(new AuthScope(AuthScope.ANY_HOST, AuthScope.ANY_PORT),new UsernamePasswordCredentials(username, password));  
// HTTP get request       
HttpGet get = new HttpGet("http://www.example.com/api/");
HttpResponse responseGet;
responseGet = client.execute(get);
is = responseGet.getEntity().getContent();
} catch (ClientProtocolException e) {
    Log.e("HTTP Request","Client Protocol exception" );
} catch (IOException e) {
    Log.e("HTTP Request","IO exception" );
} 
```

它非常适合 Android。对于 IOS，我使用了这种编码，但我没有从服务器获取数据。

```
NSString *userName = @"XYZ";
NSString *password = @"";
//setting the string of the url taking from appliance IP.

NSString *urlString = @"http://www.example.com/api/";

NSMutableURLRequest *request= [[NSMutableURLRequest alloc] init];

[request setURL:[NSURL URLWithString:urlString]];

[request setHTTPMethod:@"GET"];

NSString *str1 = [NSString stringWithFormat:@"%@:%@",userName,password];

NSLog(@" str1 %@", str1);

[request addValue:[NSString stringWithFormat:@"Basic %@",str1] forHTTPHeaderField:@"Authorization"];

NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

NSString *str = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
NSLog(@"str: %@", str); 
```

请告诉我我做错了什么并提供任何解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T08:41:36.273

您可以通过这种方式构建 URL 字符串，它应该可以工作：-

```
NSString *str1 = [NSString stringWithFormat:@"http://%@:%@@www.example.com/api",userName,password]; 
```

我相信不需要使用 HTTP 标头字段

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T08:59:45.837

使用 Basic HTTP 身份验证时，用户名和密码需要使用 Base64 编码进行编码。

来自[维基百科关于该主题的文章](http://en.wikipedia.org/wiki/Basic_access_authentication)：

> 客户端
> 
> 当用户代理想要发送服务器身份验证凭据时，它可以使用 Authorization 标头。
> 
> Authorization 头构造如下：[6] 用户名和密码组合成一个字符串“username:password”
> 
> 然后使用 Base64 对生成的字符串文字进行编码
> 
> 然后将授权方法和一个空格（即“Basic”）放在编码字符串之前。例如，如果用户代理使用“Aladin”作为用户名，使用“sesam open”作为密码，那么头部的格式如下：

```
Authorization: Basic QWxhZGluOnNlc2FtIG9wZW4= 
```

* * *

请参阅此更正的代码：

```
[...]
NSString *str1 = [NSString stringWithFormat:@"%@:%@",userName,password];
NSString *encodedString = [self stringByBase64EncodingWithString:str1];
[request addValue:[NSString stringWithFormat:@"Basic %@",encodedString] forHTTPHeaderField:@"Authorization"];
[...]

- (NSString *)stringByBase64EncodingWithString:(NSString *)inString
{
    NSData *data = [NSData dataWithBytes:[inString UTF8String] 
                                  length:[inString lengthOfBytesUsingEncoding:NSUTF8StringEncoding]];
    NSUInteger length = [data length];
    NSMutableData *mutableData = [NSMutableData dataWithLength:((length + 2) / 3) * 4];

    uint8_t *input = (uint8_t *)[data bytes];
    uint8_t *output = (uint8_t *)[mutableData mutableBytes];

    for (NSUInteger i = 0; i < length; i += 3) 
    {
        NSUInteger value = 0;
        for (NSUInteger j = i; j < (i + 3); j++) 
        {
            value <<= 8;
            if (j < length) 
            {
                value |= (0xFF & input[j]); 
            }
        }

        static uint8_t const base64EncodingTable[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

        NSUInteger idx = (i / 3) * 4;
        output[idx + 0] = base64EncodingTable[(value >> 18) & 0x3F];
        output[idx + 1] = base64EncodingTable[(value >> 12) & 0x3F];
        output[idx + 2] = (i + 1) < length ? base64EncodingTable[(value >> 6)  & 0x3F] : '=';
        output[idx + 3] = (i + 2) < length ? base64EncodingTable[(value >> 0)  & 0x3F] : '=';
    }
    return [[NSString alloc] initWithData:mutableData encoding:NSASCIIStringEncoding];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-25T03:03:38.170

```
 -(void)getApiCall:(NSString *)urlString response:(NSMutableArray *)response{

    NSString *url= urlString;

    NSURL * serviceUrl = [NSURL URLWithString:url];

    NSMutableURLRequest * serviceRequest = [NSMutableURLRequest requestWithURL:serviceUrl cachePolicy:nil timeoutInterval:10.0];

    [serviceRequest setValue:@"Application/json" forHTTPHeaderField:@"Content-type"];

    [serviceRequest setHTTPMethod:@"GET"];

    NSURLResponse *serviceResponse;

    NSError *serviceError;

    NSData *responseData = [NSURLConnection sendSynchronousRequest:serviceRequest returningResponse:&serviceResponse error:&serviceError];

    NSLog(@"REQUEST  ==== >>>>  %@",serviceUrl);

    NSLog(@"RESPONSE ==== >>>>  %@",responseData);
    if (responseData != nil){
        [self parseGetData:responseData responseArray:response];
    }
    else{

    }
}

-(void)parseGetData:(NSData *)response responseArray:(NSMutableArray *)responseArray
{
    id jsonObject = Nil;
    NSString *charlieSendString = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];
    NSLog(@"ResponseString ==== >>>> %@",charlieSendString);

    if (response==nil) {

        NSLog(@"ERROR IN GET API....!!!!");

    }else{

        NSError *error = nil;
        jsonObject =[NSJSONSerialization JSONObjectWithData:response options:kNilOptions error:&error];

        if (error)
        {
            NSLog(@"%@",error);
        }
        else
        {
            NSError *error = Nil;
            jsonObject =[NSJSONSerialization JSONObjectWithData:response options:kNilOptions error:&error];

            if ([jsonObject isKindOfClass:[NSArray class]]) {
                NSLog(@"Probably An Array");
            }
            else
            {
                NSLog(@"Probably A Dictionary");
                NSDictionary *jsonDictionary=(NSDictionary *)jsonObject;
                NSLog(@"jsonDictionary %@",[jsonDictionary description]);
                if (jsonDictionary) {
                    [responseArray addObject:jsonDictionary];
                }
            }

        }

    }

} 
```

# java - R.loess 和 org.apache.commons.math LoessInterpolator 的区别

> ID：12704658
> 
> 赞同：12
> 
> 时间：2012-10-03T08:32:59.483
> 
> 标签：java, r, apache-commons-math, loess

我正在尝试使用**apache.commons.math**库计算将 R 脚本转换为 java。我可以使用[org.apache.commons.math.analysis.interpolation.LoessInterpolator](http://commons.apache.org/math/api-2.2/org/apache/commons/math/analysis/interpolation/LoessInterpolator.html)代替[R loess](http://commons.apache.org/math/api-2.2/org/apache/commons/math/analysis/interpolation/LoessInterpolator.html)吗？我无法得到相同的结果。

**编辑**。

这是一个 java 程序，它创建一个随机数组 (x,y) 并使用 LoessInterpolator 或调用 R 计算黄土。最后，打印结果。

```
import java.io.*;
import java.util.Random;

import org.apache.commons.math.analysis.interpolation.LoessInterpolator;

public class TestLoess
    {
    private String RScript="/usr/local/bin/Rscript";
    private static class ConsummeInputStream
        extends Thread
        {
        private InputStream in;
        ConsummeInputStream(InputStream in)
            {
            this.in=in;
            }
        @Override
        public void run()
            {
            try
                {
                int c;
                while((c=this.in.read())!=-1) 
                    System.err.print((char)c);
                }
            catch(IOException err)
                {
                err.printStackTrace();
                }
            }
        }
    TestLoess()
        {

        }
    private void run() throws Exception
        {
        int num=100;
        Random rand=new Random(0L);
        double x[]=new double[num];
        double y[]=new double[x.length];
        for(int i=0;i< x.length;++i)
            {
            x[i]=rand.nextDouble()+(i>0?x[i-1]:0);
            y[i]=Math.sin(i)*100;
            }
        LoessInterpolator loessInterpolator=new LoessInterpolator(
            0.75,//bandwidth,
            2//robustnessIters

            );
        double y2[]=loessInterpolator.smooth(x, y);

        Process proc=Runtime.getRuntime().exec(
            new String[]{RScript,"-"}
            );
        ConsummeInputStream errIn=new ConsummeInputStream(proc.getErrorStream());
        BufferedReader stdin=new BufferedReader(new InputStreamReader(proc.getInputStream()));
        PrintStream out=new PrintStream(proc.getOutputStream());
        errIn.start();
        out.print("T<-as.data.frame(matrix(c(");
        for(int i=0;i< x.length;++i)
            {
            if(i>0) out.print(',');
            out.print(x[i]+","+y[i]);
            }
        out.println("),ncol=2,byrow=TRUE))");
        out.println("colnames(T)<-c('x','y')");
        out.println("T2<-loess(y ~ x, T)");
        out.println("write.table(residuals(T2),'',col.names= F,row.names=F,sep='\\t')");
        out.flush();
        out.close();
        double y3[]=new double[x.length];
        for(int i=0;i< y3.length;++i)
            {
            y3[i]=Double.parseDouble(stdin.readLine());
            }
        System.out.println("X\tY\tY.java\tY.R");
        for(int i=0;i< y3.length;++i)
            {
            System.out.println(""+x[i]+"\t"+y[i]+"\t"+y2[i]+"\t"+y3[i]);
            }
        }

    public static void main(String[] args)
        throws Exception
        {
        new TestLoess().run();
        }
    } 
```

编译和执行：

```
javac -cp commons-math-2.2.jar TestLoess.java && java -cp commons-math-2.2.jar:. TestLoess 
```

输出：

```
X   Y   Y.java  Y.R
0.730967787376657   0.0 6.624884763714674   -12.5936186703287
0.9715042030481429  84.14709848078965   6.5263049649584 71.9725380029913
1.6089216283982513  90.92974268256818   6.269100654071115   79.839773167581
2.159358633515885   14.112000805986721  6.051308261720918   3.9270340708818
2.756903911313087   -75.68024953079282  5.818424835586378   -84.9176311089431
3.090122310789737   -95.89242746631385  5.689740879461759   -104.617807889069
3.4753114955304554  -27.941549819892586 5.541837854229562   -36.0902352062634
4.460153035730264   65.6986598718789    5.168028655980764   58.9472823439219
5.339335553602744   98.93582466233818   4.840314399516663   93.3329030534449
6.280584733084859   41.21184852417566   4.49531113985498    36.7282165788057
6.555538699120343   -54.40211108893698  4.395343460231256   -58.5812856445538
6.68443584999412    -99.99902065507035  4.348559404444451   -104.039069260889
6.831037507640638   -53.657291800043495 4.295400167908642   -57.5419313320511
6.854275630124528   42.016703682664094  4.286978656933373   38.1564179414478
7.401015387322993   99.06073556948704   4.089252482141094   95.7504087842369
8.365502247999844   65.02878401571168   3.7422883733498726  62.5865641279576
8.469992934250815   -28.790331666506532 3.704793544880599   -31.145867173504
9.095139297716374   -96.13974918795569  3.4805388562453574  -98.0047896609079
9.505935493207435   -75.09872467716761  3.3330472034239405  -76.6664588290508 
```

y 的输出值在 R 和 Java 之间显然不一样；Y.R 列看起来不错（它接近原始 Y 列）。我应该如何改变它以获得 Y.java ~ YR ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-21T22:08:41.130

您需要更改三个输入参数的默认值以使 Java 和 R 版本相同：

1.  Java LoessInterpolator 只做线性局部多项式回归，但 R 支持线性（degree=1）、二次（degree=2）和奇怪的 degree=0 选项。因此，您需要`degree=1`在 R 中指定与 Java 相同。

2.  LoessInterpolator 默认迭代次数`DEFAULT_ROBUSTNESS_ITERS=2`，但 R 默认`iterations=4`。所以你需要`control = loess.control(iterations=X)`在R中设置（X是迭代次数）。

3.  LoessInterpolator 默认值`DEFAULT_BANDWIDTH=0.3`，但 R 默认值`span=0.75`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T11:19:31.867

我不能代表 java 实现，但`lowess`有许多参数可以控制适合的带宽。除非您使用相同的控制参数进行拟合，否则您应该期望结果会有所不同。每当人们对数据进行平滑处理时，我的建议是绘制原始数据和拟合图，并自行决定哪些控制参数会在数据保真度和平滑（也称为噪声消除）之间产生所需的折衷。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-01T12:38:49.723

这里有两个问题。首先，如果你绘制你正在生成的数据，它看起来几乎是随机的，并且由 R 中的 loess 生成的拟合非常差，例如

```
plot(T$x, T$y)
lines(T$s, T2$fitted, col="blue", lwd=3) 
```

![上面 Java 代码生成的数据与 R 生成的黄土拟合图](../Images/cb85d86e93eea1c86d4937381cf286e9.png)

然后在你的 R 脚本中，你写的是残差而不是预测，所以在这一行

```
out.println("write.table(residuals(T2),'',
   col.names= F,row.names=F,sep='\\t')"); 
```

您需要更改`residuals(T2)`为`predict(T2)`例如

```
out.println("write.table(predict(T2),'',
   col.names= F,row.names=F,sep='\\t')"); 
```

因此，在您的代码示例中，R 生成的前几行残差看起来很合适，这纯属偶然。

对我来说，如果我尝试拟合一些更合适的数据，那么 Java 和 R 会返回相似但不相同的结果。我还发现如果我不调整默认的**robustnessIter**设置，结果会更接近。

# javascript - 卸载时关闭浏览器窗口

> ID：12704660
> 
> 赞同：1
> 
> 时间：2012-10-03T08:33:11.360
> 
> 标签：javascript, jquery, asp.net, html, cross-browser

我有 MyPage.aspx html 页面（使用 ASP.Net 生成）。当用户试图离开这个页面时，我需要关闭窗口——用户应该不能返回或导航到另一个页面。

当我在 window.onbeforeunload 事件中使用 window.close() 时，它会要求用户确认。“您正在查看的网页正在尝试关闭窗口。你要关窗吗？” 单击“否”后，用户可以逃避关闭尝试。有没有办法在不给用户选项的情况下强行关闭窗口？

参考：

1.  [如何关闭浏览器窗口而不收到“您要关闭此窗口”提示？](https://stackoverflow.com/questions/57854/how-can-i-close-a-browser-window-without-receiving-the-do-you-want-to-close-thi)
2.  [Html javascript打开新窗口并关闭当前窗口](https://stackoverflow.com/questions/3681178/html-javascript-to-open-new-window-and-close-current-window)
3.  [使用“location.href”取消页面卸载时出现“未知异常”](https://stackoverflow.com/questions/1509643/unknown-exception-when-cancelling-page-unload-with-location-href)
4.  [单击链接时显示带有 JavaScript 的确认弹出窗口](https://stackoverflow.com/questions/293648/display-confirmation-popup-with-javascript-upon-clicking-on-a-link)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:55:36.907

您可以像这样“欺骗”浏览器：

```
window.onbeforeunload = function() {
    window.open('', '_self', '');
    window.close();
} 
```

它似乎在 chrome/safari/ie/ff 中工作：http: [//jsbin.com/olijig/1](http://jsbin.com/olijig/1)

~~Firefox 似乎很顽固，但在 FF 中可能还有另一种方法可以做到这一点。~~

我可能应该说这种技术绝不是标准的，我根本不推荐它，而且这段代码可能会在许多浏览器中中断~~除了火狐~~.

**更新**

它实际上也适用于 Firefox（最新版本），但不适用于旧版本（我试过 3.6.1）。您需要进行更多测试以确认浏览器兼容性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:35:41.107

不，你不能。用户必须始终能够控制浏览器中发生的任何事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T08:35:53.727

我对此并不肯定，但我相信如果您有一个窗口打开另一个窗口，则父窗口可以关闭该子窗口。有一个登陆页面在单独的窗口中打开您的应用程序然后可以通过javascript关闭窗口是否可行？可能有人可以详细说明，因为我自己没有这样做。

# ios - 尝试获取 AppDelegate 时出现“无法识别的选择器发送到实例”错误

> ID：12704676
> 
> 赞同：0
> 
> 时间：2012-10-03T08:34:30.930
> 
> 标签：ios, facebook, appdelegate

我按照 Facebook 的说明 (http://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/) 并尝试实现一个 facebook 登录按钮。但是，我在尝试调用应用程序委托方法时收到“无法识别的选择器发送到实例”错误。

方法：

```
- (IBAction)pressFBLogin:(id)sender {
    MyAppDelegate *appDelegate = (MyAppDelegate *)[[UIApplication sharedApplication] delegate];
    [appDelegate openSessionWithAllowLoginUI:YES];
} 
```

从错误来看，我认为是指向错误实例的内存指针错误。我将断点设置在：

```
MyAppDelegate *appDelegate = (MyAppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

它确实达到了这个声明，所以动作绑定没有错。当它尝试运行下一条语句时出现错误：

```
[appDelegate openSessionWithAllowLoginUI:YES]; 
```

当我进行调试时，我从监视窗口中发现一件事似乎很奇怪，那就是 appDelegate 变量。当断点在

```
MyAppDelegate *appDelegate = (MyAppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

变量显示为：

```
appDelegate = (MyViewController *)0x003b9a10
> UIViewController(UIViewController)
> delegate = (objc_object *) 0x0033edb0 
```

变量赋值后，断点在

```
[appDelegate openSessionWithAllowLoginUI:YES]; 
```

变量显示为：

```
appDelegate = (MyViewController *)0x00316480
> UIViewController(UIViewController)
> delegate = (objc_object *) 0x00000000 
```

在这两个阶段中，appDelegate 似乎都是 MyAppDelegate 的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T02:09:57.327

我解决了我的问题。appDelegate 变量最终没有问题。问题很简单：我的头文件和 openSessionWithAllowLoginUI 函数的实现文件之间有一个小错字。这样的问题通常会在编译时被检测为错误，我很惊讶这样的问题没有构建错误，而只是一个不完整实现的警告......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-30T06:55:44.580

我面临同样的崩溃，我通过添加解决了这个问题

> 类 AppDelegate: UIResponder, UIApplicationDelegate {

> 变量窗口：UIWindow？

在我的 APP Delegate 中，这解决了我的问题。我正在使用 Xcode 12.3，当我尝试使用 firebase auth 进行注册时会发生此崩溃

# php - 使用 PHP 在 MongoDB 数组中搜索

> ID：12704677
> 
> 赞同：3
> 
> 时间：2012-10-03T08:34:33.110
> 
> 标签：php, arrays, mongodb, multidimensional-array

我有一些具有以下结构的 mongoDB 文档：

```
[_id] => MongoId Object (
  [$id] => 50664339b3e7a7cf1c000001
)
[uid] => 1
  [name] => Alice
  [words] => 1
  [formatIds] => Array (
        [0] => 1
        [1] => 4
  ) 
```

我想要做的是找到 formatIds[] 中值为 1 的所有文档。我认为有可能做到这一点。我怎样才能在 PHP 中做到这一点？

**更新**

谢谢您的帮助。它现在工作正常。这是我编写搜索的方式，

```
$id=$_POST['id'];
$query = array('formatIds'=> "{$id}" );
$result = $stations_table->find($query); //where $stations_table = $db->stations; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T17:05:11.777

[根据docs](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-ValueinanArray)，MongoDB 以与查询标准值相同的方式处理对数组值的查询。

查询`array('formatIds' => 1)`应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:49:56.267

由于 MongoDB 将数组“转换”为同一键的多值：

> $cursor = $mongo->base->collection->find(array('formatIds' => 1));

正确定义 mongo 对象并设置基本/集合字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:27:44.083

这取决于您是否只想要与查询匹配的文档或值。

如果您不介意拉出整个阵列然后在客户端搜索它，您当然可以使用：

```
$c = $db->col->find(array('formatIds' => 1)) 
```

由于 MongoDB 中的一维数组可以像单个字段一样进行搜索。

但是现在只获取与您的查询匹配的那些，因为上面的查询将挑选出所有：

```
$db->command(array(
    'aggregate' => 'col',
    'pipeline' => array(
        array('$unwind' => "$formatIds"),
        array('$match' => array('formatIds' => 1)),
        array('$group' => array(
            '_id' => '$_id', 
            'formats' => array('$push' => '$formatIds'))
        )
    )
) 
```

使用类似的东西。

这将为您提供文档的结果和`_id`数组中仅包含值行的字段。`_id``formats``1`

# android-keystore - 无法从现有证书文件生成密钥库

> ID：12704679
> 
> 赞同：1
> 
> 时间：2012-10-03T08:34:33.513
> 
> 标签：android-keystore

我丢失了用于为 Android 应用程序制作发布版本的密钥库文件。但我有证书文件。现在我想从这个现有的证书文件生成一个新的密钥库，但我无法这样做，因为我忘记了第一次创建密钥库时设置的别名。有没有办法可以使用相同的证书文件并生成新的密钥库？我尝试了以下命令，但没有成功。

```
keytool -import -alias foo -file certfile.cer -keystore publicKey.store 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:54:59.737

[这个](http://wiki.eclipse.org/Generating_a_Private_Key_and_a_Keystore)链接有帮助吗？

使用以下命令生成密钥库：

```
keytool -genkey -alias tomcat -keyalg RSA -keystore keystore.jks 
```

在 java 密钥库中导入 CER 文件：

```
keytool -importcert -file certificate.cer -keystore keystore.jks -alias "Alias" 
```

# linux - 选择文件的第二行到最后一行

> ID：12704680
> 
> 赞同：5
> 
> 时间：2012-10-03T08:34:35.247
> 
> 标签：linux, unix, head, tail

如何在unix中使用`head`and选择文件第二行到最后一行之前的行？`tail`

例如，如果我的文件有 15 行，我想选择从 2 到 14 的行。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-03T08:39:18.790

```
tail -n +2 /path/to/file | head -n -1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:05:19.520

```
perl -ne 'print if($.!=1 and !(eof))' your_file 
```

测试如下：

```
> cat temp
1
2
3
4
5
6
7
> perl -ne 'print if($.!=1 and !(eof))' temp
2
3
4
5
6
> 
```

或者在 awk 中，您可以使用以下内容：

```
awk '{a[count++]=$0}END{for(i=1;i<count-1;i++) print a[i]}' your_file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-02T15:24:34.350

要打印除第一行和最后一行之外的所有行，您也可以使用它`awk`：

```
awk 'NR==1 {next} {if (f) print f; f=$0}' 
```

这总是打印上一行。为了防止第一个被打印出来，我们在`NR`为 1 时跳过该行。然后，最后一个不会被打印，因为在读取它时我们正在打印倒数第二个！

### 测试

```
$ seq 10 | awk 'NR==1 {next} {if (f) print f; f=$0}'
2
3
4
5
6
7
8
9 
```

# maven - Maven安装错误

> ID：12704682
> 
> 赞同：1
> 
> 时间：2012-10-03T08:34:42.423
> 
> 标签：maven

我已经完成了 Maven 3.0.4 和 JDK 6u35 x86 的安装（我的电脑是 32 位的）。

我的环境变量是：

```
JAVA_HOME : C:\Program Files\Java\jdk1.6.0_35    
M2_HOME : C:\apache-maven-3.0.4    
MAVEN_OPTS : -Xmx1024M –XX :MaxPermSize=256M    
Path : %M2_HOME%\bin;%JAVA_HOME%\bin; 
```

当我`mvn -version`在命令提示符下运行时，出现以下错误消息：

![在此处输入图像描述](../Images/07bfe6f7cb82d81076041b4e31ed3fdf.png)

来人帮帮我！

# jquery - 带有 jQ uery 的 HTML5 - e.offsetX 在 Firefox 中未定义

> ID：12704686
> 
> 赞同：58
> 
> 时间：2012-10-03T08:35:01.080
> 
> 标签：jquery, html, events, undefined

在我的 HTML5 页面中，我有一个带有`mousemove`事件的 div，如下所示：

```
$('#canvas').mousemove(function(e){
    xpos = e.offsetX;
    ypos = e.offsetY;
    $('#mouse').html("X : " + xpos + " ; Y : " + ypos);
}); 
```

它适用于谷歌浏览器。但在 Firefox 中，两者都给出了 value `undefined`。我已经使用 Firebug 进行了检查，即将`e`对象记录到控制台。两者`offsetX`和`offsetY`被发现是`undefined`。

当我在谷歌搜索时，有一个解决方案说我应该使用`layerX`and `layerY`，如果两者`offsetX`都`offsetY`未定义。但是从 Firebug 中，我找不到它。甚至我也试过这样：

```
xpos = (e.offsetX==undefined)?e.layerX:e.offsetX;
ypos = (e.offsetY==undefined)?e.layerY:e.offsetY; 
```

`undefined`但这也是作为价值观的给予。

我正在使用最新的 jQuery - v1.8.2。我正在我的 Firefox v14.0.1 中进行测试

有什么想法或建议吗？

* * *

**编辑**

感谢dystroy和vusan帮助我。上述问题的解决方法如下：

**解决方案**

```
$('#canvas').mousemove(function(e){
  $('#cursor').show();
  if(e.offsetX==undefined) // this works for Firefox
  {
    xpos = e.pageX-$('#canvas').offset().left;
    ypos = e.pageY-$('#canvas').offset().top;
  }             
  else                     // works in Google Chrome
  {
    xpos = e.offsetX;
    ypos = e.offsetY;
  }
  $('#mouse').html("X : " + xpos + " ; Y : " + ypos);
}); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-03T08:44:17.930

尝试将`layerX`and`layerY`用于 Firefox 和`offsetX`其他浏览器。

如果使用 jquery 触发事件：

```
xpos = e.offsetX === undefined ? e.originalEvent.layerX : e.offsetX;
ypos = e.offsetY === undefined ? e.originalEvent.layerY : e.offsetY; 
```

如果使用 javascript 触发事件：

```
xpos = e.offsetX==undefined?e.layerX:e.offsetX;
ypos = e.offsetY==undefined?e.layerY:e.offsetY; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-12-05T10:35:19.743

在 FF 和所有其他浏览器中使用`layerX`and 。`layerY``offsetX``offsetY`

```
$('#canvas').mousemove(function(e){
  xpos = e.offsetX === undefined ? e.originalEvent.layerX : e.offsetX;
  ypos = e.offsetY === undefined ? e.originalEvent.layerY : e.offsetY;

  $('#mouse').html("X : " + xpos + " ; Y : " + ypos);
}); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-08T09:00:51.367

您没有找到它们，因为它在 originalEvent 中。尝试：e.originalEvent.layerX e.originalEvent.layerY

关于 pageX 和 pageY 他们计算的不是同一件事。layerX 是第一个相对/绝对父对象的左侧。pageX 是页面中对象的左侧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-05T10:58:15.300

这在 Firefox 和其他软件中运行良好。

```
var offsetRequired = (e.offsetX || e.pageX - $(e.target).offset().left); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-12T14:45:48.303

Firefox 实际上*支持* [2015](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/offsetX#Browser_compatibility) `MouseEvent.offsetX`年[7 月](https://en.wikipedia.org/wiki/Firefox_release_history)`MouseEvent.offsetY`发布的 39.0 之后的版本。

# c# - Silvelight&RIA Services&Entity Framework 存在部分类和复杂类型的问题

> ID：12704687
> 
> 赞同：0
> 
> 时间：2012-10-03T08:35:04.927
> 
> 标签：c#, silverlight, entity-framework, wcf-ria-services

我使用带有实体框架和 Silverlight 的 RIA 服务作为客户端应用程序。我通过部分类为 EF 实体提供了一些自定义属性。数据库中有一个 XML 类型的字段，它作为字符串映射到实体框架。我使用部分类将这个 xml 字符串反序列化为真实对象。

这是 EF 配置实体的部分类：

```
public partial class Configuration
{
    private ServiceCredentials _serviceCredentialsObject;

    [DataMember]
    public ServiceCredentials ServiceCredentialsObject
    {
        get
        {
            return this._serviceCredentialsObject
                   ?? (this._serviceCredentialsObject = this.DeserializeServiceCredentialsToObject());
        }

        set
        {
            this._serviceCredentialsObject = value;
            this.SerializeServiceCredentialsObject();
        }
    }

    public ServiceCredentials DeserializeServiceCredentialsToObject()
    {
        if (string.IsNullOrEmpty(this.ServiceCredentials))
        {
            return null;
        }

        var result = XmlSerializerHelper.Deserialize<ServiceCredentials>(this.ServiceCredentials);
        result.FileEncoding = result.FileEncoding ?? Encoding.UTF8;

        return result;
    }

    public void SerializeServiceCredentialsObject()
    {
        if (this.ServiceCredentialsObject == null)
        {
            this.ServiceCredentials = null;
            return;
        }

        this.ServiceCredentials = XmlSerializerHelper.Serialize(this.ServiceCredentialsObject);
    }

} 
```

这是我试图反序列化的对象：

```
[Serializable]
public class ServiceCredentials
{

    public NetworkCredential Credential { get; set; }

    public Encoding FileEncoding { get; set; }

    [XmlIgnore]
    public long HistoryID { get; set; }

    public string LoadFileStoragePath { get; set; }

    public string ManualLoadFilePath { get; set; }

    public bool NeedAuthorization { get; set; }

    [XmlIgnore]
    public string ProviderID { get; set; }

    public string SourceUrl { get; set; }

    public bool AutomaticTransferToProductive { get; set; }
} 
```

当我尝试在 silverlight 客户端上使用配置实体和生成的代码时，发现配置类中没有 ServiceCredentialsObject 的问题。如果我创建新的，它不会添加到 DomainService.metadata.cs 中。如果我手动将 ServiceCredentialsObject 添加到 DomainService.metadata.cs 我可以在重建后在客户端访问它，但我只能在那里找到具有简单类型的属性。例如，可以访问 HistoryID、SourceUrl、AutomaticTransferToProductive，但没有为

公共 NetworkCredential 凭证 { 获取；放; } 公共编码 FileEncoding { get; 放; }

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:25:18.060

我找到了解决这个问题的唯一方法。解决方案只是从客户端的实体框架中反序列化 xml 字段。我在 silverlight 中为生成的代码创建了部分类配置。我不知道这是否是最好的解决方案，但它确实有效。

# javascript - 从javascript onclick添加多个跨度

> ID：12704690
> 
> 赞同：0
> 
> 时间：2012-10-03T08:35:29.377
> 
> 标签：javascript, jquery, html

我有一个 div，我可以在其上使用 span 和 textarea（隐藏）键入文本。我正在调用这个 div onclick 函数。我想要的是每次点击我都应该看到一个 div 或 span。即同一页面上的多个div。 **代码**：

```
<div class="EaDetail EaDetailText" style="left: 299px; top: 80px; font-size: 17px; width: 126px; height: 23px; position: absolute; display: block;">
<div class="EaDetailInset">
<span style="font-size: 17px;">
<br>
</span>
<textarea></textarea>
</div>
</div>
<input type="button" onclick="addTextBox()" value="Add"> 
```

**Javascript代码：**

```
function addTextBox()
{
$('.EaDetailInset').show();
} 
```

**CSS：**

```
.EaDetail, .EaDetailDisabled {
border: 1px dashed transparent;
font-size: 12px;
overflow: visible;
position: absolute;
display:none;
}
.EaDetail {
border-radius: 3px 3px 3px 3px;

}

.EaDetailInset {
display: none;
max-height: 65px;
padding-bottom:5px;
border: 2px dashed #AAAAAA;
bottom: 0;
left: 0;
overflow: hidden;
position: absolute;
right: 0;
top: 0;
}

.EaDetailText textarea, .EaDetailText span {
font: 100%/1.1 arial,sans-serif;
position: absolute;
white-space: pre;
}
.EaDetailText textarea, .EaDetailText textarea[disabled] {
background: none repeat scroll 0 center transparent;
border: 0 none;
bottom: 6px;
box-shadow: none;
color: #000000;
display: block;
height: 200%;
left: 6px;
line-height: 1.1;
outline: 0 none;
padding: 0;
resize: none;
right: 6px;
top: 6px;
transition: none 0s ease 0s;
width: 200%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:43:11.797

首先，您需要正确*调用*javascript**函数**：更改

```
<input type="button" onclick="addTextBox" value="Add"> 
```

进入

```
<input type="button" onclick="addTextBox()" value="Add"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:43:28.023

如果您想拥有多个`textarea/span`，您需要创建子元素并将其附加到您的`div`，您所做的只是显示/隐藏不会复制元素。

```
var txt = document.createElement('textarea');
document.getElementById('myDiv').appendChild(txt); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:30:14.853

```
<div class="EaDetail EaDetailText" style="left: 299px; top: 80px; font-size: 17px; width: 126px; height: 23px; position: absolute; display: block;">
<div class="EaDetailInset">
</div>
</div>
<input type="button" onclick="addTextBox()" value="Add">

function addTextBox()
{
var newTextBoxdiv = $(document.createElement('div')).attr("class",'EaDetailInset');

    newTextBoxdiv.html('<span style="font-size: 17px;"><br></span><textarea></textarea></span>');

    newTextBoxdiv.insertAfter(".EaDetailInset");
  $(".EaDetailInset").show();
} 
```

看看这是否有效

# php - 使用 in_array() 检查 PHP 数组中的值；

> ID：12704691
> 
> 赞同：0
> 
> 时间：2012-10-03T08:35:38.330
> 
> 标签：php, arrays, wordpress

> **可能重复：**
> [使用“，”内爆数组并在最后一项之前添加“和”](https://stackoverflow.com/questions/8586141/implode-array-with-and-add-and-before-last-item)

我正在自定义一个 WordPress 主题，并且我在管理员的用户个人资料页面中创建了一些复选框，确切地说是 3 个。当用户选中每个框时，该框的值会保存在一个名为 $goals 的数组中，当他们保存他们的个人资料时。这一切都很好。

在模板页面上，我正在对如何根据用户选择的目标显示某些内容进行一些测试，因此我创建了以下代码来检查数组是否包含它自己的每个值，然后将目标组合在一起，然后根据这些选择回显特定内容。它工作得很好，但我觉得代码臃肿并且可以简化。这是我一直希望用我的代码做的事情。我非常感谢您对如何用更少的代码实现相同结果的想法。谢谢。

```
$goals = get_user_meta( $userID, 'goals', $single );

if (in_array('Weight Loss', $goals, true) && !in_array('Improve Fitness', $goals, true) && !in_array('Improve Health', $goals, true)) {
    echo 'Weight Loss';
} elseif (in_array('Improve Fitness', $goals, true) && !in_array('Weight Loss', $goals, true) && !in_array('Improve Health', $goals, true)) {
    echo 'Improve Fitness';
} elseif (in_array('Improve Health', $goals, true) && !in_array('Improve Fitness', $goals, true) && !in_array('Weight Loss', $goals, true)) {
    echo 'Improve Health';
} elseif (in_array('Weight Loss', $goals, true) && in_array('Improve Fitness', $goals, true) && !in_array('Improve Health', $goals, true)) {
    echo 'Weight Loss and Improve Fitness';
} elseif (in_array('Weight Loss', $goals, true) && !in_array('Improve Fitness', $goals, true) && in_array('Improve Health', $goals, true)) {
    echo 'Weight Loss and Improve Health';
} elseif (!in_array('Weight Loss', $goals, true) && in_array('Improve Fitness', $goals, true) && in_array('Improve Health', $goals, true)) {
    echo 'Improve Fitness and Improve Health';
} elseif (in_array('Weight Loss', $goals, true) && in_array('Improve Fitness', $goals, true) && in_array('Improve Health', $goals, true)) {
    echo 'Weight Loss, Improve Fitness and Improve Health';
} else {
    echo 'Nothing set';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:42:58.033

以人类可读的形式表示目标列表：

```
if (count($goals) > 1) {
    echo join(', ', array_slice($goals, 0, -1)) . ' and ' . end($goals);
} elseif ($goals) {
    echo $goals[0];
} else {
    echo "Nothing set";
} 
```

根据您拥有的项目数量，代码将返回`"X"`/ `"X and Y"`/ `"X, Y and Z"`。

如果有多个项目，它会执行以下操作：

1.  将项目添加到但不包括最后一个项目 - using[`array_slice()`](http://www.php.net/array_slice)并在它们之间放置一个逗号 - using [`join()`](http://www.php.net/join)。
2.  添加最后一项的单词`" and "`和值。

要将数组缩小`$goals`到您提到的那些项目：

```
$goals = array_intersect(array('Weight Loss', 'Improve Fitness', 'Improve Health'), $goals); 
```

它会删除除您感兴趣的值之外的所有值，在您的情况下只有三个值。根据您的情况，您可能不需要此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T01:56:16.923

如果您不想像示例所建议的那样简单地连接字符串，则该代码的更简化版本将如下所示：

```
sort($goals);

switch ($goals) {
    case array('Weight Loss') :
        ...
        break;

    case array('Improve Fitness', 'Weight Loss') :
        ...
        break;

    ...
} 
```

这里重要的是两个数组中的元素顺序相同，因此初始`sort`元素和比较元素按字母顺序排列。

话虽如此，必须有一种比处理所有可能的排列更好的方法来处理这个问题，因为随着您添加更多选项，它会呈指数增长。您通常应该遍历目标集合，为每个目标做一些事情，然后输出一些汇总值：

```
$output = array();

foreach ($goals as $goal) {
    switch ($goal) {
        case 'Weight Loss' :
            $output[] = 'I want to lose weight.';
            break;

        case 'Improve Fitness' :
            $output[] = ...
            break;

        ...
    }
}

echo join("\n", $output); 
```

使用一个非常明智的基于 OOP 的结构，其中每个目标都被定义为一个单独的对象，这看起来更像：

```
$output = array();

foreach ($goals as $goal) {
    $output[] = $goal->objectiveDescription();
}

echo join("\n", $output); 
```

换句话说，你解决问题的方式是不够的。在不知道您实际尝试做什么的情况下，很难提出建议。

# android - Phonegap - Android - 您的设备与此版本不兼容

> ID：12704695
> 
> 赞同：2
> 
> 时间：2012-10-03T08:35:57.570
> 
> 标签：android, cordova

我已经使用 phonegap build 生成和 .apk，但在尝试使用 Android 版本 v.2.2.2 的“Lg Optimus 3D”安装它时遇到问题。这是我正在使用的 config.xml：

```
<?xml version="1.0" encoding="UTF-8" ?>
    <widget xmlns = "http://www.w3.org/ns/widgets"
        xmlns:gap = "http://phonegap.com/ns/1.0"
        id        = "com.xxxxxxx.jjjjjjjjjjjjjj"
        version   = "1.0.0">

    <!-- versionCode is optional and Android only -->

    <name>THE NAME</name>

    <description>
        THE DESCRIPTION
    </description>

    <author email="XXX...@gmail.com">
        XXXXXXX 
    </author>

    <icon src="icon.png" width="72" height="72" />

    <feature name="http://api.phonegap.com/1.0/geolocation"/>
    <feature name="http://api.phonegap.com/1.0/network"/>
</widget> 
```

到目前为止，我的任何设备都没有任何问题......那部手机发生了什么？可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-07T09:35:22.847

根据此处的文档[http://docs.build.phonegap.com/en_US/2.9.0/configuring_preferences.md.html](http://docs.build.phonegap.com/en_US/2.9.0/configuring_preferences.md.htmlwe) ，我们在 config.xml 中的首选项应如下所示

```
<preference name="android-minSdkVersion" value="8" /> 
```

为了包括 Android 2.2

# java - 如何在java中获取arraylist的hashmap内容？

> ID：12704696
> 
> 赞同：0
> 
> 时间：2012-10-03T08:36:09.890
> 
> 标签：java

我正在使用以下代码将 hashmap 内容保存到 arraylist 中。

```
HashMap jediSaber = new HashMap();  
ArrayList<HashMap> valuesList = new ArrayList();

for(int i = 0; i< 4;i++) {
    jediSaber.put("white","white_name"+i);  
    jediSaber.put("blue","blue_name"+i);   
    valuesList.add(i, jediSaber);           
    System.out.println("list ontent:"+i+":"+valuesList.get(i).values());
}

    ` 
```

输出如下：

```
 list content:0:[blue_name0, white_name0]
              list content:1:[blue_name1, white_name1]
              list content:2:[blue_name2, white_name2]
              list content:3:[blue_name3, white_name3] 
```

当我尝试使用以下代码在外部显示 arraylist 的内容时，

```
System.out.println("list content:");
for(int i = 0;i<valuesList.size();i++){ 
    System.out.println("list:"+i+":"+valuesList.get(i).values());
} 
```

它显示以下输出，

```
 list content:0:[blue_name3, white_name3]
             list content:1:[blue_name3, white_name3]
             list content:2:[blue_name3, white_name3]
             list content:3:[blue_name3, white_name3] 
```

我的问题是我需要显示 hashmap 的arraylist 的内容。

我想我在第二部分错过了一些东西。谁能帮我解决这个小问题？

提前致谢！！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:38:03.697

这是`HashMap`每次添加相同的`ArrayList`：

```
valuesList.add(i, jediSaber); 
```

`HashMap`每次在 中创建一个新的`for`并添加它：

```
List<HashMap<String, String>> valuesList =
    new ArrayList<HashMap<String, String>>();

for (int i = 0; i < 4; i++)
{
    HashMap<String, String> m = new HashMap<String, String>();
    m.put("white", "white_name" + i);
    m.put("blue",  "blue_name"  + i);
    valuesList.add(m);
}

System.out.println(valuesList.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:43:42.463

尝试拉`jediSaber`入`for`循环，如下所示：

```
for(int i = 0; i < 4; i++) {
    Map<String, String> jediSaber = new HashMap<String, String>(); 
```

您还应该参数化`valuesList`：

```
List<Map<String, String>> valuesList = new ArrayList<Map<String, String>>(); 
```

PS 无需`add(i, jediSaber)`使用 index 参数调用：`valuesList.add(jediSaber)`将具有相同的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:48:37.050

```
 List<Map> valuesList = new ArrayList();
        for (int i = 0; i < 4; i++) {
            Map<Object, Object> jediSaber = new HashMap<>();
            jediSaber.put("white", "white_name" + i);
            jediSaber.put("blue", "blue_name" + i);
            valuesList.add(jediSaber);
            Set<Entry<Object, Object>> entrySet = jediSaber.entrySet();
            for (Entry<Object, Object> entry : entrySet) {
                System.out.println(entry.getKey() + "-" + entry.getValue());
            }
        } 
```

# javascript - 车把 - 什么是“深度 0 未定义”？

> ID：12704697
> 
> 赞同：6
> 
> 时间：2012-10-03T08:36:11.690
> 
> 标签：javascript, handlebars.js

使用 Handlebars.js 时，什么是“深度 0 未定义”？

我收到如下错误：

```
depth0 is undefined
[Break On This Error] 
```

# jquery - AJAX - 从 Drupal 上的 js 重新加载块

> ID：12704700
> 
> 赞同：1
> 
> 时间：2012-10-03T08:36:30.393
> 
> 标签：jquery, ajax, drupal

我想从 js 重新加载块内容。我已经创建了带有菜单回调等的模块，所以当我单击带有 class="use-ajax" 的链接和我的模块的 url 时，一切正常。但我想从 js 重新加载块内容，而不点击链接。请指教。

它适用于这样的链接：`<a href="/ajax-reader/nojs/259" class="use-ajax">Reload</a>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:25:15.533

你应该简单地添加一个循环：

```
 counteriz();
            function counteriz(){
               $('.use-ajax').click();
               var timstap = setTimeout(function(){counteriz()}, 4000);
               timstap;
            } 
```

但在我看来，您应该直接加载块中的内容，例如：

```
 counteriz();
            function counteriz(){
                  $('.use-ajax').stop().load('urlofyourmenucallback');
                  var timstap = setTimeout(function(){counteriz()}, 4000);
                  timstap;
            } 
```

# database - 访问 Progress 4GL 数据库以进行 Web 开发

> ID：12704701
> 
> 赞同：0
> 
> 时间：2012-10-03T08:36:41.687
> 
> 标签：database, web-applications, progress-4gl, webspeed

目前，我们使用进度开发工具附带的 webspeed 开发我们的 webapps。但是由于当前切换到progress 10.2b，我们可以开发使用.net 组件的软件。现在我们还想升级我们的网络开发工具。

所以我对 SO 上的好人的问题是......

你们有谁知道是否有像 APS.net/RoR/Django 这样的好环境可以轻松连接到进度数据库？如果有可用的连接器，是否有很好的支持以及我在哪里可以找到它；）

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:10:16.400

您可以使用几种方式连接/通信 Progress。

*   ODBC/JDBC 连接，执行标准 SQL 语句。（请注意，您将无法执行用 Progress 4GL 代码编写的任何业务逻辑）。
*   使用 Progress Webspeed 制作的 Web API（例如：REST Api，或您自己的事件）（Progress 4GL 代码）。
*   带有 Progress AppServer 和 AIA（Progress 4GL 代码）的 Web 服务 (SOAP)。
*   .NET/Java Api 使用 Progress AppServer。名为 Proxygen 的工具创建代理 .NET dll 或 Java 类以将它们包含到您的开发中。然后，您可以直接调用 Progress AppServer。（进度 4GL 代码）

我认为没有开箱即用的“连接器”。这只是将拼图拼凑在一起的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T06:33:58.290

已成功开发了几个使用 .Net dll（由 ProxyGen 生成）通过 Progress AppServer 访问 OpenEdge 数据源的 ASP.NET MVC Web 系统。

但请注意，ProxyGen 工具似乎需要 .Net 2.5 SDK 才能生成所述 .dll 文件——这会成为问题，因为 Windows 7 不支持此功能！

# datetime - Symfony2 学说日期时间对象格式

> ID：12704704
> 
> 赞同：0
> 
> 时间：2012-10-03T08:36:57.233
> 
> 标签：datetime, doctrine-orm

我正在使用固定装置加载来写入实体的日期时间字段。

实体：

```
/** @ORM\Column(type="datetime", nullable=true) */
protected $date; 
```

我使用以下方法来设置日期：

```
 public function setDate($date='')
    {
        $fecha = new \DateTime($date);
        $fecha = $fecha->format('Y-m-d');
        $this->date = $fecha;
    } 
```

我只想使用年、月、日来通过 dql-query 获得一个组的总和。

当我实现夹具加载时，我收到以下错误消息：

> `format()`致命错误：在第 44 行调用 C:\xampp\htdo cs\brel\vendor\doctrine-dbal\lib\Doctrine\DBAL\Types\DateTimeType.php 中非对象的成员函数

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T08:49:59.310

Doctrine 的`date`,`time`和`datetime`字段假定类属性是 \DateTime 实例，而不是格式化的日期字符串（格式化是通过 Doctrine DBAL 中的类型映射完成的）。

您可以创建自定义类型（参见 Doctrine DBAL 文档）或使用不同的类型（字符串？）。

# licensing - 开源框架中的 Neo4j 许可证

> ID：12704706
> 
> 赞同：0
> 
> 时间：2012-10-03T08:37:08.767
> 
> 标签：licensing, neo4j

我计划在我自己的框架中编写一个小的 neo4j 包装器，它是 Apache 2 许可下的操作系统。由于 neo4j 使用 GPL/AGPL 许可证，因此在 Apache2 许可证下发布我的 neo4j 代码是否有问题？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:22:51.513

您可以在 Apache 许可下发布代码，但运行时将在 GPL 下。有任何细节吗？

# asp.net-mvc - 如何执行返回视图但在 ASP.NET MVC 中保持 URL 完整的控制器操作

> ID：12704710
> 
> 赞同：0
> 
> 时间：2012-10-03T08:37:12.143
> 
> 标签：asp.net-mvc, url, controller, action

当我在 ASP.NET MVC 中导航到 /Controller/Action 时，该操作会返回一个视图并且浏览器 URL 会更新。如何保持 URL 不变但同时返回请求的视图？

例如，/Home/Index 将返回索引视图，而 /Home/SignUp 将返回不同的视图。我想确保在两次通话之后，URL 保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:59:51.413

您可以通过执行以下几种方法来实现：

**1.配置你的路由配置**

```
 routes.MapRoute(
                name: null,
                url: "Home/FirstMethod",
                defaults: new { controller = "Home", action = "FirstMethod" }
            );

            routes.MapRoute(
                name: null,
                url: "Home/SecondMethod",
                defaults: new { controller = "Home", action = "FirstMethod" }
            ); 
```

**2\. 使用自定义 MVCTransferResult：** [如何在 ASP.NET MVC 中模拟 Server.Transfer？](https://stackoverflow.com/questions/799511/how-to-simulate-server-transfer-in-asp-net-mvc/1242525#1242525)

**3.您可以明确指定视图，例如：**

```
return View(viewName: "Contact"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:40:37.090

您可以在控制器操作中明确指定要返回的视图：

```
return View("~/Views/SomeController/SomeView.cshtml"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:41:02.880

这些将是 GET 调用，并且这种行为是内在的。

如果您想保持在同一个页面上，甚至有一个[单页面应用程序](http://www.asp.net/single-page-application)，那么您需要考虑使用 ajax 和 http POST 来获得构建页面所需的不同视图。

# facebook - facebook 注册插件 - 获取大型个人资料图片或用户名或用户 ID？

> ID：12704713
> 
> 赞同：0
> 
> 时间：2012-10-03T08:37:32.677
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我正在使用 facebook 注册插件。我可以通过知道他的 Facebook 用户名或用户 ID（图片不需要访问令牌）来获取用户的个人资料图片。我可以通过获取访问令牌等来获取用户名或用户名。但是，我无法从此处的 accesstoken 获取用户名或用户名。那么，有什么方法可以从注册插件中获取用户名或用户 ID 或大型个人资料图片？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:52:43.977

我无法得到接受的答案来为我工作，但这确实：

您还可以获得个人资料图片的特定尺寸。

```
FB.api("/me/picture?width=180&height=180",  function(response) {

        console.log(response.data.url);

}); 
```

请参阅[Facebook 文档以了解您可以获得哪些不同的图片尺寸](https://developers.facebook.com/docs/reference/api/using-pictures/)。

还有一个完整的登录演示：[Get Facebook Profile Picture with Javascript SDK](http://www.jensbits.com/2013/04/04/get-facebook-profile-picture-with-javascript-sdk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:40:48.137

使用 Javascript SDK，您可以通过执行以下操作使用 Javascript 获取个人资料图片：

```
FB.api("/me", {fields: "id,name,picture"}, function(response){
    FB.api(
        {
            method: 'fql.query',
            query: 'SELECT src_big FROM photo WHERE aid IN ( SELECT aid FROM album WHERE owner="' + response.id + '" AND name = "Profile Pictures")'
        },
        function(data) {
            alert( data[0].src_big ); // this will alert the URL of the profile picture (stored in data[0].src_big), replace the alert with some useful operation
        }
    );
}); 
```

查看类似帖子：[Facebook Javascript SDK - 查询个人资料图片](https://stackoverflow.com/questions/8468325/facebook-javascript-sdk-query-profile-picture)

希望这可以帮助。

# css - 为什么我的 div 没有脱离父 div？

> ID：12704714
> 
> 赞同：0
> 
> 时间：2012-10-03T08:37:40.680
> 
> 标签：css, html

我正在尝试突破父 div，这样我就可以让一个颜色 div 覆盖浏览器的宽度。

但是，由于某种原因，它将块推向了左侧。

这是我的[网站。](http://speakingwithpictures.com/about/)

这是我的代码：

HTML：

```
<div class="aboutTop"></div> 
```

CSS：

```
.aboutTop{
   width: 100%;
   height: 600px;
   background-color: black;
   margin-left: -100%;
   margin-right: -100%;
} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:41:44.867

要使您的 div 从其父级“突破”，您必须使用`position: relative;`

HTML：

```
<div class="aboutTop">
    <div>break out!</div>
</div>​ 
```

CSS：

```
div
{
    width: 100px;
    height: 100px;
    border: 1px solid #000;
}

.aboutTop div
{
    position: relative;
    top: 50px; 
    left: 50px;
} 
```

这是因为子元素被限制在其父元素的边界内。使用定位将元素从文档流中取出。使用相对定位会将其从流中取出，但使用其在父级中的原始位置作为参考点。Absolute 使用浏览器窗口的左上角作为参考。:)

[http://jsfiddle.net/qkU7F/](http://jsfiddle.net/qkU7F/)

无论如何，宽度将始终引用父 div。所以你可以使用jQuery根据窗口宽度来设置元素的宽度。

```
var winWidth = window.innerWidth;

$('.aboutTop div').css("width", winWidth); 
```

[http://jsfiddle.net/qkU7F/3/](http://jsfiddle.net/qkU7F/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:11:48.280

我认为最好删除 div #site 的填充。让它拥有完整的浏览器宽度。

然后根据需要对子 div 应用填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:41:32.930

在这：

```
margin-left: -100%;
margin-right: -100%; 
```

百分比是相对于父元素的。

所以如果父元素是 200px 宽 100% 将是 200px。

如果你想要一些东西跨越浏览器的宽度，你有几个选择：

使用绝对位置和`left:0; right:0;`

使元素成为 body 元素的直接子元素并将其宽度设置为 100%

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T08:46:05.710

```
.aboutTop{
   position:fixed;
   width: 100%;
   height: 600px;
   background-color: black;
   margin-left: -100%;
   margin-right: -100%;
} 
```

当你给一个 width:100% 没有定位时，它会占用 100% 相对于父分割。您需要将其固定，或者您需要更改父分区的宽度。

您编写的代码必须从一开始就针对您想要实现的目标。对于这样的事情，你不应该有一个宽度较小的父分区。

如果您使用相对定位，或绝对负边距，宽度仍将是父分割的 100%。您必须将宽度增加到 110% 才能实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-06T09:41:55.763

你正在设置`width: 100%`但也`margin-left: -100%`。这意味着该元素的范围从 -100% 到 0。

由于您也在设置`margin-right: -100%`它看起来您希望它从 -100% 到 +200%，这意味着您需要设置`width: 300%`。

# python - 自定义 MySQL bigint(11) 比较失败

> ID：12704720
> 
> 赞同：0
> 
> 时间：2012-10-03T08:37:57.607
> 
> 标签：python, mysql, django, orm

我的程序中似乎有一个错误，这很奇怪。为了测试，我在 manage.py shell 上运行了一些非常简单的命令。

```
models = Model.objects.all()

for model in models :
   print model.field

output: 
0
0
0
0
100004398604871
576962717
576962717
576962717 
```

现在是奇怪的部分：

```
Model.objects.extra(where = ["field= 576962717"])
output:
[]

Model.objects.extra(where = ["field= 100004398604871"])
output:
[]

# But!!

Model.objects.extra(where = ["field= 0"])
output:
[a bunch of models, aka this one worked] 
```

所以很明显，大的 int 比较有问题。我检查了我的 mysql 数据库结构和我的模型以确保它们对齐，并且它们做到了：

我的 mysql cols 被标记为 bigint(11)

我的 django 模型是 BigIntegerField(editable=False)

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:41:10.213

哦，上帝我很慢，我忘了它应该是 bigint(20) 而不是 11，对不起！

# c - 编译 ac 程序以在 python 代码中使用

> ID：12704723
> 
> 赞同：0
> 
> 时间：2012-10-03T08:38:12.310
> 
> 标签：c

我有一个需要在 python 代码中间编译和使用的 ac 程序。它不是 c++ 程序，所以我认为我应该更改此语法以进行编译，因为我得到了很多与程序中没有“main()”相关的错误，这仅仅是因为它是 x86_64 Mac 系统的 ac（不是 c++） ?

我应该如何更改 program.c 代码的这种语法？

> g++ -o 程序.x 程序.c

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:43:38.317

你的 C 代码应该被编译成一个共享库：

```
gcc -shared -o program.so -Wall -Wextra -fPIC -O2 -DNDEBUG program.c 
```

然后您可以使用[`ctypes`](http://docs.python.org/library/ctypes.html)模块从 Python 调用库中的函数。

# java - 如何以编程方式创建 DialogFragment 布局

> ID：12704724
> 
> 赞同：1
> 
> 时间：2012-10-03T08:38:12.677
> 
> 标签：java, android, android-layout

我需要以编程方式创建一个 DialogFragment 布局，但我不知道如何继续。我不能使用 xml 布局，因为 DialogFragment 将成为闭源 JAR 文件的一部分。

普通对话框在其构造函数中接受一个 Activity，因此可以像这样实例化一个新的布局`layout = new LinearLayout(this);`：另一方面，DialogFragments 通常不会将 Activity 作为参数，所以我不知道如何执行这第一步。

1.  我应该如何创建布局？
2.  在构造函数中请求 Activity 可以吗？
3.  创建 DialogFragment 的布局与创建普通 Dialog 的布局有什么不同吗？我将不胜感激有关手动 DialogFragment 设计的任何其他建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:48:45.080

> 我应该如何创建布局？

您希望它看起来如何。如果您不能/不想使用您膨胀并从该`onCreateView`方法返回的布局文件，则必须在代码中构建新对话框的整个视图层次结构。

> 在构造函数中请求 Activity 可以吗？

没有必要这样做，`Fragment`将获得对 an 的引用`Activity`，您将通过使用获得对该上下文的引用`getActivity()`。

> 创建 DialogFragment 的布局与创建普通 Dialog 的布局有什么不同吗？我将不胜感激有关手动 DialogFragment 设计的任何其他建议。

不，没有什么不同。的[文档`DialogFragment`](http://developer.android.com/reference/android/app/DialogFragment.html)有一个关于如何构建自定义的很好的示例`DialogFragment`，您应该查看它。

# magento - 具有自定义数据库表管理页面的 Magento 自定义模块

> ID：12704729
> 
> 赞同：3
> 
> 时间：2012-10-03T08:38:23.683
> 
> 标签：magento

我按照 wiki 帖子设置了一个带有自定义数据库表的自定义模块。

[http://www.magentocommerce.com/wiki/5__-_modules_and_development/0__-_module_development_in_magento/custom_module_with_custom_database_table](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/custom_module_with_custom_database_table)

我无法解决的一件事是如何在管理后端显示数据库条目列表。关于我所缺少的任何想法将不胜感激？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:57:22.273

下面的代码是在管理面板中查看自定义表格数据的简单方法

您的自定义模块的管理视图：

在您的模块中创建以下路径：

```
/app/code/local/<Namespace>/<Module>/etc/adminhtml.xml 
```

在**adminhtml.xml**文件中包含以下内容

```
<?xml version="1.0"?>
<config>
    <menu>
        <[module] module="[module]">
            <title>[Module]</title>
            <sort_order>71</sort_order>               
            <children>
                <items module="[module]">
                    <title>Manage Items</title>
                    <sort_order>0</sort_order>
                    <action>[module]/adminhtml_[module]</action>
                </items>
            </children>
        </[module]>
    </menu>
    <acl>
        <resources>
            <all>
                <title>Allow Everything</title>
            </all>
            <admin>
                <children>
                    <[module]>
                        <title>[Module] Module</title>
                        <sort_order>200</sort_order>
                    </[module]>
                </children>
            </admin>
        </resources>   
    </acl>
    <layout>
        <updates> 
```

创建 Adminhtml 文件夹并创建 Controller.php 文件

```
/app/code/local/<Namespace>/<Module>/controllers/Adminhtml/<Module>Controller.php 
```

在`<Module>Controller.php`文件中包含以下内容

```
<?php 
class <Namespace>_<module>_Adminhtml_<module>Controller extends Mage_Adminhtml_Controller_Action
{

    public function indexAction()
    {
            $this->loadLayout()->_setActiveMenu('<module>/items');
            $this->renderLayout();

    }   

} 
```

app/design/adminhtml/default/default/layout/.xml

在`<module>.xml`文件中包含以下内容

```
<?xml version="1.0"?>
<layout version="0.1.0">
    <[module]_adminhtml_[module]_index>
        <reference name="content">
            <block type="core/template" name="domain" template="[module]/[module].phtml"/>
        </reference>
    </[module]_adminhtml_[module]_index>
</layout> 
```

在以下路径中创建新文件夹

```
app/design/adminhtml/default/default/template/<module>/<module>.phtml 
```

在`<module>.phtml`文件中包含以下内容

```
<?php

// Write your custom table Collection Here

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:52:09.253

好吧，要在管理后端显示数据库条目，您需要执行以下操作： - 为管理后端控制器创建一个路由器。这可以通过 config.xml 文件完成 - 创建控制器 - 创建网格容器块 - 创建网格块。在此 Grid 块中，您可以指定要添加到列表中的列...

您可以按照以下教程进行操作：

1.  [http://markshust.com/2012/07/05/creating-magento-adminhtml-grids-simplified](http://markshust.com/2012/07/05/creating-magento-adminhtml-grids-simplified)
2.  [http://www.webspeaks.in/2010/08/create-admin-backend-module-in-magento.html](http://www.webspeaks.in/2010/08/create-admin-backend-module-in-magento.html)

Magento admin 相当复杂，学习它的最好方法是查看现有代码，例如 Magento 如何显示产品列表...

# javascript - 从字符串中删除日期

> ID：12704731
> 
> 赞同：1
> 
> 时间：2012-10-03T08:38:35.783
> 
> 标签：javascript, regex

我正在将一些内容添加到网站中，并且需要处理条目标题，以便它们不包含任何日期。更具体地说，诸如“Lorem ipsum 30-08-2011 dolor”之类的字符串需要变为“Lorem ipsum dolor”。我必须考虑日期，例如：2011 年 8 月 30 日、2011 年 8 月 30 日和 2011 年 8 月 30 日。

在四处搜索后，我尝试了类似的方法，但它不起作用：

```
str.replace(/^(0?[1-9]|[12][0-9]|3[01])[\/\-\.](0?[1-9]|1[012])[\/\-\.]\d{4}$/, ''); 
```

任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:42:37.107

如果要匹配字符串中的模式，请删除`^`and 。`$`您当前的正则表达式将仅匹配*仅*包含日期的字符串。

此外，如果要从字符串中删除多个日期，则需要使用全局正则表达式，方法是`g`在结束后添加 a `/`。

```
str.replace(/(0?[1-9]|[12][0-9]|3[01])[\/\-\.](0?[1-9]|1[012])[\/\-\.]\d{4}/g, ''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:01:00.557

`str.replace(/\d{1,2}[\-|\.|\/]\d{1,2}[\-|\.|\/]\d{2,4}/g, "")`

[http://jsfiddle.net/cJCBE/](http://jsfiddle.net/cJCBE/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:02:02.507

```
function checkDate(date) {
  var re = /^\d{2}[.\/-]\d{2}[.\/-]\d{4}$/;
  return re.test(date);
} 
```

# python - 解析一个xml文件

> ID：12704734
> 
> 赞同：-1
> 
> 时间：2012-10-03T08:38:46.703
> 
> 标签：python, xml

所以我有一个xml文件和一个python代码。使用 elementree 库，我必须读取 中包含的路径，连接所有这些值并将它们放在 f_path 中。到目前为止，我能够获取所有路径值，但无法在我的 f_path 中连接它们：这是我的 python 代码和 xml 文件：提前致谢

```
#!/usr/local/bin/python2.5
# -*- coding: latin-1 -*-

import xml.etree.ElementTree as ET

tree = ET.parse('path.xml') 
rootElements = tree.getroot() 

    for racine in rootElements.findall('racine'):
    path = racine.find('path').text 
    print path
    if path != None: 
    f_path = path + "/"
print f_path 
```

```
<racine name="RACINE1"> 
<path>MODELS</path> in here the path is : MODELS/USM/src
</racine> 

<racine name="RACINE2">  
<path>USM</path>    
</racine>

<racine name="RACINE3"> 
<path>src</path>    
</racine>

<racine name="RACINE4"> 
<path></path>   
</racine>

<racine name="RACINE5"> 
<path></path>   
</racine>

<racine name="RACINE6"> 
<path></path>   
</racine> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:52:00.027

也许 f_path = f_path + path + "/"？

# bash - 在 Shell Bash 中尝试求解器线性代数方程系统

> ID：12704736
> 
> 赞同：0
> 
> 时间：2012-10-03T08:38:53.843
> 
> 标签：bash, shell, equations

我想尝试使用 bash shell 求解线性代数方程组，但遇到了问题。输入值是一个矩阵，但是我不知道如何在 bash 中输入矩阵，因为它不支持二维数组。

太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:43:03.720

我对 bash 很陌生，而且我不够专业，无法为您提供一些代码，但无论如何我都会回答，因为过去几天没有人这样做。

首先，为什么要使用 bash？研究如何使用最大值或专门设计的一些工具来解决它可能要容易得多。

但是，如果您想使用 bash，您可以从文件中读取矩阵并将其视为数组数组或列表数组。Bash 可以处理它。

无论如何，您也可以使用一维数组来完成。只需读取整个文件，将其放入数组中，然后第 i 行第 j 列上的元素将是

```
${array[i*l+j]} 
```

其中 l 是矩阵的大小。

希望我有所帮助！

# php - php - 我如何将分页添加到我的结果中

> ID：12704738
> 
> 赞同：-1
> 
> 时间：2012-10-03T08:38:57.923
> 
> 标签：php, mysql, pagination, echo

我已经尝试了一些事情，但似乎无法正确实现分页，有人可以指出我正确的方向并给我一些代码示例，说明如何在我的代码中正确实现分页

```
<?php
session_start();

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<link rel="stylesheet" type="text/css" href="stylesheet.css">
<link href="/lightbox/css/lightbox.css" rel="stylesheet" />
<link rel="stylesheet" href="img/reveal.css">

<script src="/lightbox/js/jquery-1.7.2.min.js"></script>
<script src="/lightbox/js/lightbox.js"></script>
<script src="img/jquery.min.js" type="text/javascript"></script>
<script src="img/jquery.reveal.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"     type="text/javascript"></script>

<style type="text/css">

#divspace {
position: relative;
width: 100%;
height: 50px;
z-index: -9999;
vertical-align bottom;

 }

 #divspace1 {
position: relative;
width: 100%;
height: 50px;
z-index: -9999;
vertical-align: bottom;
padding-left: 400px;

}

#search1 {
position: absolute;
width: 203px;
height: 30px;
z-index: -9999;
vertical-align: bottom;
left: 832px;
top: 1px;
z-index: 9999;
}

 #text1 {
position: absolute;
width: 203px;
height: 30px;
z-index: -9999;
vertical-align: bottom;
top: 13px;
z-index: 9999;
left: 268px;
font-family: Tahoma, Geneva, sans-serif;
font-weight: bold;
color: #FFF;
font-style: italic;
font-size: 22px;
 }

 #apDiv1 {
position:absolute;
width:560px;
height:27px;
z-index:1;
left: 93px;
top: 247px;
}

#cat {
position:absolute;
width:227px;
height:500px;
z-index:1;
left: 3px;
top: 48px;
background-color: #FFF;
font-family:"Lucida Console", Monaco, monospace;
 }

 .container1 {
position:relative;
padding: 0 20px 0 20px;
margin: auto;
width: 1000px;
background-image: url(images/skyblue.png);
margin-top: 20px;
margin-bottom: 20px;
padding-bottom: 300px;
-moz-border-radius: 8px;
border-radius: 8px;

 }

 .label{
text-align:right;
  }
  #submit{
text-align:center;
   }

</style>
<script type = "text/javascript">

function myfunction(url)
  {
 window.location.href = url;
 }
</script>

<script type="text/javascript">
$(document).ready(function(){    
$(".expanderHead").click(function(){
    var $exsign = $("#expanderSign");
    $(this).find("#expanderContent").slideToggle();
    $exsign.html($exsign.text() == '+' ? '-': '+');   
    // simplify your if/else into one line using ternary operator
    // if  $exsign.text() == "+" then use "-" else "+"
 });    
});
</script>

</head>
<body>
<div id="header">
  <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=439699742746900";
  fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>

<div id="search">
  <center>
<form method="GET" action="search.php" style= "padding: 1px;">
<input name="search" id="s" type="text" value="<?php echo $_GET['search']; ?>" size="20" />

<select name="category" id="category" >
                <?php if(isset($_GET['submit'])) { ?>
                <option value="<?php echo $_GET['category']; ?>" selected="selected"><?php echo $_GET['category']; ?></option>
                <?php }else{ ?>
                <option value=""> -- select -- </option>
                <?php } ?>
                <option value="">All</option>
                <option value="Books">Books</option>
                <option value="Textbooks">TextBooks</option>
                <option value="Tickets">Tickets</option>
                <option value="Electronics">Electronics</option>
                <option value="Clothing">Clothing</option>
                <option value="Accessories">Accessories</option>
                <option value="Furniture">Furniture</option>
                <option value="Imagery">Imagery</option>
                <option value="Business">Business</option>
                <option value="Clothing">Clothing</option>
                <option value="Multi">Multimedia</option>
    </select>

    <select name="university" id="university" >
                <option value="">Aston University</option>
    </select>       
    <input id="searchSubmit" type="submit" value="" name="submit"/>

  </form>
  </center>
</div>

<div id="imagelogo" onclick = "window.location.href = 'index.php'" > 

  <p> Buy and sell stuff around University</p>
</div>

<ul id="navigation" name="navigation">
  <li id="nav-home"><a href="index.php">Home | </a><a href="search.php">Search | </a><a href="#">Selling | </a><a href="#">Buying | </a><a href="#">FAQ | </a><a href="#">Contact</a>    </li>
</ul>

<div id="account">

  <?php
if( isset( $_SESSION['username'] ) ){

   echo "<a href='securedpage1.php'>My Account</a><img src='images/uni-icon.png' width='30' height='18' style='vertical-align: middle;'/>";

}else{

      echo "<a href='login.php' >Login</a><img src='images/uni-icon.png' width='30' height='18' style='vertical-align: middle;'/>";
}
        ?>

    </div>

    <div id="registerlogout">
 <?php
 if( isset( $_SESSION['username'] ) ){
   echo "<a href='logout.php'>Logout</a>";

}else{

  echo "<a href='register.php'> Register</a>";
    }
        ?>
</div>

<center>
<center>

</div>
<div class="container1">
<div id="cat">
  <table width="225" border="1" cellspacing="10" cellpadding="10">
<tr>
<td>Accessories</td>
  </tr>
  <tr>
    <td>Accommodation</td>
  </tr>
  <tr>
        <td>Books</td>
  </tr>
  <tr>
    <td>Business</td>
  </tr>
  <tr>
    <td>Clothing</td>
  </tr>
  <tr>
    <td>Electronics</td>
  </tr>
  <tr>
    <td>Furniture</td>
  </tr>
  <tr>
        <td>Imagery</td>
  </tr>
  <tr>
    <td>Multimedia</td>
  </tr>
  <tr>
<td>Services</td>
      </tr>
<tr>
<td>Tickets</td>
  </tr>
</table>
</div>

<div id="text1">Items For Sale:

</div>

<div id="search1">
<form method="GET" action="search.php" style= "padding: 1px;">
<select name="price" id="price" >
                <?php if(isset($_GET['submit'])) { ?>
                <option value="<?php echo $_GET['price']; ?>" selected="selected"><?php echo $_GET['price']; ?></option>
                <?php }else{ ?>
                <option value=""> -- select -- </option>
                <?php } ?>
                <option value=""></option>
                <option value="DESC">Highest to Lowest</option>
                <option value="ASC">Lowest to Highest</option>
    </select>
     <input id="searchSubmit" type="submit" value="" name="submit"/>
</form>
    </div>

<div id="divspace"></div>
<div style=" padding-left: 240px" ">

<?php

// Include database connection settings
include('config.php');
include('config.inc');

    // Check and set username
$username = (isset($_SESSION['username']) ? $_SESSION['username'] : 'guest');

// Check and set category
    $category = (!empty($_GET['category']) ? $_GET['category'] : null);

// Check and set search
if(!empty($_GET['search'])){
$search = $_GET['search'];
}else{
$search = null;
}

 // Check that $_GET['price'] is ASC if not set to DESC
// as static values its ok to directly put in the query 
 if(isset($_GET['price']) && $_GET['price'] == 'ASC'){
$price = 'ASC';
 }else{
$price = 'DESC';
}

if ($search !== null){

$sql = "SELECT * FROM people WHERE MATCH (lname,fname) AGAINST (:search IN BOOLEAN MODE)";

$q   = $conn->prepare($sql) or die("failed!");
// Bind the params to the placeholders
$q->bindParam(':search', $search, PDO::PARAM_STR);
$q->execute();
}

if ($search !== null && $category !== null){

$sql = "SELECT * FROM people WHERE MATCH (lname,fname) AGAINST (:search IN BOOLEAN MODE) AND category = :category";

$q   = $conn->prepare($sql) or die("failed!");
// Bind the params to the placeholders
$q->bindParam(':search', $search, PDO::PARAM_STR);
$q->bindParam(':category', $category, PDO::PARAM_STR);
$q->execute();
}

if ($category !== null && $search !== null && isset($price)){

$sql = "SELECT   *
        FROM     people
        WHERE    MATCH (lname,fname) AGAINST (:search IN BOOLEAN MODE)
        AND      category = :category
        ORDER BY price ".$price;

$q = $conn->prepare($sql);
// Bind the params to the placeholders
$q->bindParam(':search', $search, PDO::PARAM_STR);
$q->bindParam(':category', $category, PDO::PARAM_STR);
$q->execute();
}

if ($category == null && $search !== null && isset($price)){

$sql = "SELECT   *
        FROM     people
        WHERE    MATCH (lname,fname) AGAINST (:search IN BOOLEAN MODE)

        ORDER BY price ".$price;

$q = $conn->prepare($sql);
// Bind the params to the placeholders
$q->bindParam(':search', $search, PDO::PARAM_STR);
$q->execute();
}

if ($q){

//declaring counter
    $count=0;
    while($r = $q->fetch(PDO::FETCH_ASSOC)){
    $row = $r;

    $fname = $row['fname'];
    $lname = $row['lname'];
    $firstname = $row['firstname'];
    $surname = $row['surname'];
    $expire = $row['expire'];

    $oDate = strtotime($row['expire']);
    $sDate = date("d/m/y",$oDate);

//counter equals
$count++;

//insert an image every 5 rows
if($count==5){
$count=0;
   echo "<table width='50%' style='border-bottom:1px solid #000000;'>";
echo "<tr>";
echo "<td>";
echo "<div id='page-wrap'>";
echo "<div class='discounted-item freeshipping'>";

echo "<a href='images/box1.png' rel='lightbox'><img src='images/box1.png' width='160px' height='200px' /></a>";

echo "<div class='reasonbar'><div class='prod-title' style='width: 70%;'>AN AD CAN GO HERE</div><div class='reason' style='width: 29%;'><b>Ad Company</b></div></div>";

echo "<div class='reasonbar'><div class='prod-title1' style='width: 70%;'>Description about the advert from a company</div><div class='reason1' style='width: 29%;'>Category: Advert</div></div>";

echo "<div class='reasonbar'><div class='prod-title2' style='width: 70%;'>HELLO, User</div><div class='reason2' style='width: 29%;'></div></div>";

echo "</td>";
echo "</tr>";
echo "</td>";
echo "</tr>";
echo "</table>";
}

echo "<table width='50%' style='border-bottom:1px solid #FFFFFF'>";
echo "<tr>";
echo "<td>";
echo "<div id='page-wrap'>";
echo "<div class='discounted-item freeshipping'>";

echo "<a href='./img/users/" . $row['category'] . "/" . $row['username'] . "/" . $row['filename'] . "' rel='lightbox'><img src=\"./img/users/" . $row['category'] . "/" . $row['username'] . "/" . $row['filename'] . "\" alt=\"\" width='80px' height='100px' /></a>";

    echo "<div class='expanderHead'>";

echo "<div class='reasonbar'><div class='prod-title'>" .$row['fname'] . "</div><div class='reason' style='width: 29%;'><b>". $row['firstname'] . " " . $row['surname'] ."</b></div></div>";

echo "<div id='expanderContent' style='display:none'><div class='reasonbar'><div class='prod-title1'>" . $row['lname'] . "</div><div class='reason1' style='width: 29%;'>Category:<br /> ". $row['category'] . "</div></div>";

    echo "<div class='reasonbar'><div class='prod-title2' style='width: 70%;'><form action='adclick.php' method='post'><input type='hidden' name='username' value='" . $row['username'] . "'/><input type='submit' name='submit' value='Reply To this ad'></form></div><div class='reason2' style='width: 29%;'></div></div></div>";

echo "<div class='reasonbar'><div class='prod-title2' style='width: 70%;'>Expires: $sDate</div><div class='reason2' style='width: 29%;'>Price: &pound;". $row['price'] . "</div></div>";

echo "</td>";
echo "</tr>";
echo "</td>";
echo "</tr>";
echo "</div>";
echo "</table>";

}

}

else
    echo "No results found for \"<b>$search</b>\"";

//disconnect
mysql_close();

?>
</div>  
</div> 
<div class="footer">
<p> <a href="">Private Policy</a> | <a href="">Terms and Conditions</a> | <a href="">FAQ</a>   </p>
</div> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:48:04.850

**示例代码：**

`$start`是起始编号，`$limit`是结束编号（一页）..`$count`是记录总数

```
echo "<h5>Showing ".$start." to ".($start+$limit)." Records of ".$count." Records</h5>";
if($start<=($count-$limit))
{
    echo '<a style="float:right" href="'.$_SERVER['PHP_SELF'].'?start='.($start+$limit).'&limit='.$limit"><t1>Next</t1></a>';
}

$prev = $start-$limit;
if ($prev >= 0)
{
    echo '<a style="float:left" href="'.$_SERVER['PHP_SELF'].'?start='.$prev.'&limit='.$limit"><t2>Previous</t2></a>';
}

$i=0;
$l=1;
echo "<p align='center'>";
for($i=0;$i < $count;$i=$i+$limit)
{
    if($i <> $start)
    {
        echo "<a href='listing_test.php?start=$i&limit=$limit'><font face='Verdana' size='2'><b>&nbsp;$l&nbsp;</b></font></a> ";
    }
    else
    {
        echo "<font face='Verdana' size='4' color=#2E9AFE ><b>&nbsp;$l&nbsp;</b></font>";
    }        
$l=$l+1;
}
echo "</p>"; 
```

编辑：

```
$result = mysql_query("SELECT * FROM table_name LIMIT ".$start.",".$limit);
    $total=mysql_query("SELECT * FROM table_name");
    $count=mysql_num_rows($total); 
```

# php - 将 php 变量传递给 jQuery

> ID：12704739
> 
> 赞同：0
> 
> 时间：2012-10-03T08:38:58.763
> 
> 标签：php, jquery

> **可能重复：**
> [如何在 JavaScript 或 jQuery 中访问 PHP 变量，而不是 <?php echo $variable ?>](https://stackoverflow.com/questions/1808108/how-to-access-php-variables-in-javascript-or-jquery-rather-than-php-echo-vari)

这可能已经被覆盖，但我想知道是否可以将 php 变量传递给 jQuery 选择器。

我有一个名为 $tDate 的变量，我希望能够在这段代码中使用它：

```
$('$tDate').backstretch([
          "pot-holder.jpg",
          "coffee.jpg",
          "dome.jpg"
        ], {
            fade: 750,
            duration: 4000
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:12:10.807

我建议尽可能将您的 javascript 保存在单独的 .js 文件中。但是您可以在 php 生成的 html 中设置 javascript 变量，如下所示：

```
<html>
  <head>
    <title>PHP variables to Javascript</title>
    <script type="text/javascript">
    var myVar = <?php echo $myVar; ?>;
    </script>
    <!-- you can use that variable in your .js files 
         that are loaded after setting the variable -->
    <script src="/javascripts/myjavascript.js"></script>

  </head>
  <body>
    <h1>Passing php variables to javascript</h1>
  </body>
  </html> 
```

您的 javascript 可以像这样使用该变量：

```
// I assume myVar is a string
$(myVar).backstretch
... 
```

对我来说，这样看起来又好又整洁。我不喜欢将我的客户端代码与服务器端代码混为一谈。而且，如果您将来在某个地方弄乱了 PHP 变量，您可以很容易地检测到它，因为它会在变量上抛出异常，而不是 jQuery 抛出不可读的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T08:39:49.657

```
$('<?PHP echo $tDate; ?>').backstretch([
      "pot-holder.jpg",
      "coffee.jpg",
      "dome.jpg"
    ], {
        fade: 750,
        duration: 4000
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:41:37.263

```
 <?php $tDate = "varXYZ";?>
    $('$<?php echo $tDate; ?>').backstretch([
      "pot-holder.jpg",
      "coffee.jpg",
      "dome.jpg"
    ], {
        fade: 750,
        duration: 4000
    }); 
```

# linux - bash 将输出存储为变量

> ID：12704740
> 
> 赞同：6
> 
> 时间：2012-10-03T08:39:00.310
> 
> 标签：linux, bash

```
grep -A 26 "some text" somefile.txt |
   awk '/other text/ { gsub(/M/, " "); print $4 }' |
   sort -n -r | uniq | head -1 
```

将返回从大型文本文件中提取的列表中最大的，但是如何将输出存储为变量？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T08:42:38.227

使用[命令替换](http://tldp.org/LDP/abs/html/commandsub.html)：

```
my_var=$(grep -A 26 "some text" somefile.txt |
   awk '/other text/ { gsub(/M/, " "); print $4 }' |
   sort -n -r | uniq | head -n1) 
```

`-n1`另外，为了可移植性，我建议始终使用`head`. 我遇到了几个使用`-1`不起作用的化身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:55:43.090

对于未嵌套的情况，后引号也可以：

```
variable=`grep -A 26 "some text" somefile.txt |   
awk '/other text/ { gsub(/M/, " "); print $4 }' |  
sort -nru | head -1` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:42:57.107

我建议

```
variable_name=$(grep -A 26 "some text" somefile.txt |
     awk '/other text/ { gsub(/M/, " "); print $4 }' |
     sort -nru | head -1) 
```

# javascript - jquery 循环 - 添加然后删除 css 类 - 无限循环

> ID：12704744
> 
> 赞同：5
> 
> 时间：2012-10-03T08:39:20.067
> 
> 标签：javascript, jquery, loops, cycle, infinite

如何使用 jQuery 在一组 4 li 上无限添加然后删除 CSS 类。

基本上，看到这个简单的小提琴（没有任何 jquery）：http: [//jsfiddle.net/kHsvN/](http://jsfiddle.net/kHsvN/)

我想循环通过盒子来改变盒子的css，翻转回原来的css，然后继续下一个等等......

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:03:59.870

```
$(document).ready(function() {
   window.setInterval(function() {
        $("#topboxesmenu li a").each(function() {
            $(this).css("background", get_random_color());
    });
  }, 1000);
});

function get_random_color() {
   var letters = '0123456789ABCDEF'.split('');
   var color = '#';
   for (var i = 0; i < 6; i++ ) {
     color += letters[Math.round(Math.random() * 15)];
   }
   return color;
} 
```

此示例使用随机颜色，但可以`.addClass()`在`.each`零件中轻松更改为。

**JS Fiddle（现场示例）**

[http://jsfiddle.net/kHsvN/6/](http://jsfiddle.net/kHsvN/6/)

[JavaScript 中的随机颜色生成器](https://stackoverflow.com/questions/1484506/random-color-generator-in-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:57:54.063

你可以试试这个

**CSS**对于当前项目，要添加/删除的类

```
ul#topboxesmenu li a.current{ background:black } 
```

**JS**

```
$('#topboxesmenu li a').each(function(i){
    var t=$(this);
    setTimeout(function(){
        t.addClass('current');
        setTimeout(function(){
            t.removeClass('current');
        }, 1000);
    }, 1100*i);
}); 
```

[**演示**](http://jsfiddle.net/kHsvN/11/)

**更新：**对于连续循环

```
$(function(){
    loopIt();
});

function loopIt(){    
    $('#topboxesmenu li a').each(function(i){
        var t=$(this);
        setTimeout(function(){
            t.addClass('current');
                setTimeout(function(){
                    t.removeClass('current');
                    if(i==$('#topboxesmenu li a').length-1) loopIt();;
                }, 1000);
        }, 1100*i);
    });
} 
```

[**演示**](http://jsfiddle.net/kHsvN/13/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T09:01:38.500

尝试这个：

```
jQuery(document).ready(function() {
    window.setInterval(function() {
            var oldBox = jQuery('#topboxesmenu li.active');
            if(oldBox.length == 0 || oldBox.next().length == 0)
            {
                    oldBox.removeClass('active');
                jQuery('#topboxesmenu li:first-child').addClass('active');
            }
            else
                oldBox.removeClass('active').next().addClass('active');
    },2000);
}); 
```

它将循环遍历这些框，一个接一个地向它们添加一个活动类。

[http://jsfiddle.net/gKEmL/](http://jsfiddle.net/gKEmL/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:12:54.953

我认为这是在做你想做的事：

```
el = $('#topboxesmenu li:first-child');
setInterval(function() {
    el = window.el;
    el.siblings().children('a').css('background','#ff0000');
    el.children('a').css('background-color', 'blue');
    el = el.next().length ? el.next() : el.parent().children('li:first-child');
}, 1000);​ 
```

查看[**工作演示**](http://jsfiddle.net/yxEzM/)

**更新**：
关于您的测试页不起作用，您的 javascript 在 body 标记之外，请尝试将您的标记放在`</body>`标记之前`</html>`。你目前有这个：

```
</body>

<script type="text/javascript" ....
...
...
</html> 
```

**更新 2**：
还有你的 jquery 脚本标签：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script> 
```

应该放在`<head>`页面的内部，而不是您当前拥有的正文。

# c# - 控制 .NET BCL 类型在调试器中的显示方式（对 KeyValuePair(TKey, TValue) 感兴趣）

> ID：12704757
> 
> 赞同：2
> 
> 时间：2012-10-03T08:39:49.160
> 
> 标签：c#, .net, visual-studio, debugging, visual-studio-debugging

这里有一个关于在 KeyValuePair(TKey, TValue) 中覆盖 ToString() 的问题，这是不可能的。

我看到有一些属性类型，如 DebuggerDisplayAttribute、DebuggerTypeProxyAttribute，它们可以控制类型在调试器中的显示方式。我只使用调试器可视化工具。

从逻辑上讲，这些属性只能应用于用户定义的类（我认为部分类除外）。

那么有没有办法控制Visual Studio中内置（BCL）.NET类型的调试结果呢？

**编辑**：为了让它更清楚一点，我主要对类型的字符串表示感兴趣。这有点“覆盖” ToString() 只是为了调试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T11:50:43.047

前段时间我写了一篇关于[阅读 SQL 异常转储](http://lowleveldesign.wordpress.com/2012/06/16/read-last-executed-sql-statement-from-a-memory-dump/)的文章，我在其中使用了可视化工具`System.Data.SqlClient.SqlParameter`）。您可以阅读整篇文章以获取工作示例，但在您的情况下，需要执行以下步骤：

在文件夹`C:\Users\<your login>\Documents\<your Visual Studio version>\Visualizers`中有一个名为的特殊文件`autoexp.cs`，用于存储您的本地可视化设置（使用定义`DebuggerDisplayAttribute`）。如果找不到此文件，您可以安全地从`<Visual Studio installation folder>\Common7\Packages\Debugger\Visualizers\Original\`. 然后，您可以在此文件末尾附加一条新规则：

```
[assembly: DebuggerDisplay(@"\{MyKey = {Key}\}", Target = typeof(System.Collections.Generic.KeyValuePair<,>))] 
```

最后需要重新编译文件：

```
csc /t:library autoexp.cs 
```

并重新启动 Visual Studio。KeyValuePair 的新字符串表示应该出现在 VS 调试器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:44:45.287

Visual Studio 2005 及更高版本具有称为[Visualizers](http://msdn.microsoft.com/en-us/library/zayyhzts.aspx)的东西。您可以尝试自己创作。

# google-maps - 是否可以区分路线中的车道？

> ID：12704759
> 
> 赞同：2
> 
> 时间：2012-10-03T08:39:58.267
> 
> 标签：google-maps, google-maps-api-3

我通过 GMaps V3 和`DirectionsService`.

这是代码：

```
var polyline = new google.maps.Polyline({ 
    strokeColor: '#94c970', 
    strokeWeight: 7 
});

directionsService = new google.maps.DirectionsService();
directionsDisplay = new google.maps.DirectionsRenderer({ polylineOptions: polyline, suppressMarkers: true });

var request = {
    origin: puntoPartenza,
    destination: puntoArrivo,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
};

directionsService.route(request, function (response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
    }
}); 
```

这是一条高速公路，有 2 条车道，我想在地图上加以区分。可能吗？

我需要第三方插件吗？

**编辑**：不知道你是否理解我对车道的意思:) 我的意思是：有 2-3 条车道的那个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:48:42.573

不，Google Maps API v3 或我听说过的任何第三方服务都没有该信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-12T21:21:30.697

OpenStreetMap 提供有关车道数量的信息，这可能会有所帮助，具体取决于您使用它的目的。有点晚了，我意识到...

这是一个显示一段道路上车道数量的示例： [http ://www.openstreetmap.org/way/91741086](http://www.openstreetmap.org/way/91741086)

他们有一个 API，您可以使用它来查询这些数据。您可以将它与您的 Google Maps API 调用结合起来做您想做的事。

仅供参考，您可能想先研究 OpenStreetMap。他们是著名的提供商，但我不知道他们的数据有多准确。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T09:25:44.130

正如拉里 (geocodezip) 所说，路由引擎不提供该信息。但是，根据您的用途，可能有一些创造性的方法可以计算出道路的宽度，例如，如果您获得从 A 到 B 然后从 B 到 A 的路线，您可以计算出多远除了两条折线之外，还可以计算出（大约）道路的宽度。

**编辑 - 附加说明：**

> 如果您想了解如何做某事，请从描述目标开始。然后才描述你被阻止的特定步骤。

来自： http: [//www.catb.org/esr/faqs/smart-questions.html#goal](http://www.catb.org/esr/faqs/smart-questions.html#goal)

# javascript - html li 标签的问题

> ID：12704763
> 
> 赞同：0
> 
> 时间：2012-10-03T08:40:18.933
> 
> 标签：javascript, jquery, html, html-lists

是否可以向 html 列表元素 (li) 添加属性？

我需要另一个属性，我已经使用了 value 和 html 属性。

有没有办法解决它？

也许用 jquery

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T08:41:35.510

假设我正确理解了您的问题，您可以使用 HTML5[`data-*`属性](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)将任意数据添加到任何元素：

```
<li data-something="randomvalue"> 
```

由于您已经使用 jQuery 标记了您的问题，因此您可以使用该[`.data()`](http://api.jquery.com/data/)方法来获取`data-*`属性的值。如果没有 jQuery，最好的方法是使用通常的[`getAttribute`](https://developer.mozilla.org/en-US/docs/DOM/element.getAttribute)方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T08:42:12.257

您可以使用 HTML5 中的数据属性

```
<li data-val="yourvalue" /> 
```

要访问它，您只需执行此操作

```
$('li').attr('data-val') ;  OR $('li').data('val') ; 
```

您可以为您的属性指定任何名称..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:12:21.430

如果您想**动态**添加属性，请尝试 在 jquery 中添加**.append**

# git - IDEA 没有显示所有可以合并的分支

> ID：12704764
> 
> 赞同：3
> 
> 时间：2012-10-03T08:40:22.397
> 
> 标签：git, merge, intellij-idea, branch

我想通过菜单“VCS -> Git -> Merge Changes”与 Intellij IDEA (11.1.3) 合并。但是缺少所需的分支（mergeRequest15）。但为什么？是不是因为这个分支似乎基于另一个分支（mergeRequest14）？

**gitk --all 显示：**

![gitk——全部](../Images/312f86dcc6d1c101bec81eede04c2e8c.png) **IDEA 显示：**

![IDEA 合并分支](../Images/400fc78a3a45cf2b10ec2a1725695f93.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T09:33:49.210

这是因为分支 mergeRequest15 已经合并到 master（您可以在历史记录中看到）。因此没有必要合并。

# r - 在 R xmlGetAttr 的一个语句中选择多个元素？

> ID：12704767
> 
> 赞同：3
> 
> 时间：2012-10-03T08:40:27.123
> 
> 标签：r

我可以写 `xmlGetAttr(x,"title")`并`xmlGetAttr(x,"href")`获得属性“title”和“href”，
我可以将两个语句合二为一吗？
`xmlGetAttr(x,c("title","href"))`不能工作。
a[[name]] 中的错误：尝试选择多个元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:15:29.380

您可以使用`xmlAttrs`

```
xmlAttrs(x)[c("title","href")] 
```

举个例子：

```
require(XML)
udata<-htmlParse('http://cran.r-project.org/')
frames<-getNodeSet(udata,'//*/frame')
# > xmlAttrs(frames[[1]])[c('src','name')]
#         src        name 
# "logo.html"      "logo" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:43:43.980

`getNodeSet`或中的路径`xpathApply`可以是具有多个元素的字符向量

```
attrs <- c("src", "name")
paths <- sprintf("//frame/@%s", attrs) 
```

所以使用@user1609452 的有用的可重现示例

```
require(XML)
udata<-htmlParse('http://cran.r-project.org/')
vals <- xpathSApply(udata, paths) 
```

然后例如

```
matrix(vals, ncol=length(attrs), byrow=TRUE, dimnames=list(NULL, attrs)) 
```

导致

```
> matrix(vals, ncol=length(attrs), byrow=TRUE, dimnames=list(NULL, attrs))
     src            name      
[1,] "logo.html"    "logo"    
[2,] "navbar.html"  "contents"
[3,] "banner.shtml" "banner" 
```

# php - php mysql在没有while或foreach的情况下获取记录

> ID：12704772
> 
> 赞同：-4
> 
> 时间：2012-10-03T08:40:40.887
> 
> 标签：php, mysql

我有事要解决。我有这个代码，但我不能使用while，我不确定foreach。我不知道如何使用foreach...

我在数据库中有 3 条记录。现在我想把它拉出下面的电子邮件示例{数据库电子邮件商店}

```
id email
1  coco@gmail.com
2  mama@yahoo.com
3  lala@coco.com 
```

现在我有这个插入查询这个插入查询有这个差异电子邮件

下面的数据库示例 { 数据库列表电子邮件存储 }

```
id email_1 email_2 email_3 email_4 bla bla 
```

我怎样才能拉出电子邮件商店并`put it to my list email`存储在`ONE ID`

```
mysql_query( "INSERT INTO listEmail VALUE( '', 'email_1', 'email_2', 'email_3' ....)" ) 
```

感谢你们...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:46:40.613

如果您想从表中获取结果

```
 $result = mysql_query("SELECT * FROM tableName");
 while($row = mysql_fetch_array($result))
 {
   $values[] = $row['email'];

 }
 echo "<pre>";
 print_r($values);
 echo "</pre>"; 
```

去这里:) [http://www.w3schools.com/php/php_mysql_select.asp](http://www.w3schools.com/php/php_mysql_select.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:44:08.063

[http://php.net](http://php.net)是寻找的最佳地点：特别检查此页面： http: [//php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

我认为您首先需要基础知识，因为您的问题非常不清楚。

# heroku - 我应该如何解释 Heroku H18 错误？

> ID：12704777
> 
> 赞同：64
> 
> 时间：2012-10-03T08:41:08.433
> 
> 标签：heroku

我们在日志中看到了很多错误 H18（请求中断）。应该如何解释这些，因为 sock=client 在所有情况下我都假设它是断开连接的客户端。因此，忽略这些是否安全？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-05T15:43:30.710

这通常表示用户的网络已断开连接（例如，这种情况在移动用户中经常发生）或最终用户关闭了他们的浏览器或类似的（例如，按下停止，转到不同的页面等）。

您可以安全地忽略那些在本质上使用“sock=client”标记为客户端的那些，但可能想要调查那些被服务器端关闭的那些（“sock=server”）。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-11-06T16:01:03.903

**编辑（2015 年 8 月 10 日）**：我在下面对 H18 错误的回答已过时。Heroku[改变了 H18 错误的行为，](https://devcenter.heroku.com/changelog-items/662)使它们比以前更具体（和严重）。这个[答案](https://stackoverflow.com/a/31923216/241735)现在更正确了。

* * *

![H18 错误](../Images/9b9d00f548b9c90c7191c9335e859040.png)

我最近向 Heroku 支持询问了有关我的应用程序收到大量 H18 错误（有时每小时 3-4 个）并出现在新 Heroku 仪表板的 Metrics 部分的信息（上面的屏幕截图）。我引用[了catsby 在此线程上的回复，](https://stackoverflow.com/a/14711291/241735)并要求确认它们是否实际上不可操作。这是我从 Heroku 支持收到的回复：

> 我刚刚在您的应用程序上浏览了过去 24 小时的 H18。他们都是 sock=client 并且看着 User-Agent 我看到了很多常见的罪魁祸首。大多数情况下，移动浏览器以及我在几天前看到其他应用程序的最新 Chrome 也存在问题。除非您看到诸如特定 URL 或用户之类的模式，否则它通常只是网络问题。
> 
> [这些 H18 错误] 不可行并不总是正确的。有些应用程序确实关心它，有时它也可能意味着客户端崩溃而不是网络错误。浏览器确实不时崩溃，但特别是移动浏览器可能非常脆弱。如果应用使用大量资产并触发“页面无响应”错误，您可能会在 H18 中看到峰值。在这种情况下，有时您可以采取一些措施。其他应用程序完全在有线网络中提供服务，并且永远不会想到它，在这种情况下可能存在故障交换机或防火墙。为了透明起见，我们仍然希望报告这些错误，因为无法判断它们是否可操作。

总而言之，如果它们是`sock=client`错误的，大多数情况下您可以忽略它们，但这确实表明客户端正在断开连接，这可能表明存在真正的问题，具体取决于您的应用程序与其客户端的联网方式（例如移动设备或非常糟糕的网络连接）。 ..但也许你可以放心地忽略它们。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2015-08-10T15:13:40.293

**仅供参考：[Ben Sheldon](https://stackoverflow.com/a/26783847)和[Catsby 的](https://stackoverflow.com/a/14711291/4076298)答案不再正确。**他们在撰写本文时，但情况发生了变化。H18 现在总是 sock=server。Heroku 为 sock=client 添加了一个新的错误代码 H27。

详细信息：[https ://devcenter.heroku.com/changelog-items/662](https://devcenter.heroku.com/changelog-items/662)

现在应该更加认真地对待 H18，因为它们绝对是您服务的问题。通常可以安全地忽略 H27，因为它们是客户的问题。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2020-07-23T15:37:26.813

还有另一种情况可能导致[Heroku 未记录的](https://devcenter.heroku.com/articles/error-codes#h18-server-request-interrupted)此错误。

如果您的服务器响应请求并在未读取请求正文的情况下关闭连接，则路由器将响应 H18 错误。Heroku 路由器日志将显示`sock=backend`。

在这种情况下，您的服务器在 HTTP 规范方面没有做错任何事情。这是 Heroku 路由器的错误。

我就此联系了 Heroku 技术支持，他们确认了这个问题。它将在他们正在实施的路由器的新版本中得到修复。

解决方法是始终确保在关闭连接之前在后端服务器上读取请求正文。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-11T18:39:53.987

万一有人遇到这种 H18 错误情况 - 该解决方案适用于我使用 Postgresql 和 SQLAlchemy 的简单 Python 3.9.2 Flask 应用程序。

我必须确保每个路由端点函数都明确读取完整的请求正文。就我而言，这与请求或响应消息中的长请求、超时或大数据无关。

我根据我发现的建议这种解决方案的帖子将此行添加到每个函数的顶部来解决此问题。

```
@app.route("/store/<int:store_id>")
def get_store_by_id(store_id):
    # ALL requests need to read the full request body on Heroku / Flask
    hack = request.data
... 
```

添加此应用程序后，应用程序完美运行 - 如果我删除 request.data 调用，应用程序将随机失败，出现 H18 错误，没有其他诊断。一旦它开始失败，它将开始对所有请求都失败。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-20T03:31:53.093

如果你正在运行一个 golang 应用程序，有一个奇怪的情况是你需要耗尽请求的主体。如果以下情况属实，我能够在 heroku 路由器中重现此错误：

1.  响应体很大
2.  HTTP 请求的类型为 POST
3.  POST 请求有一个主体（甚至是一个空的）

这是重现和修复它的代码：

```
...
// To force a Heroku H18 error
// curl -i \
//         -X POST \
//         -H "content-type: application/json" \
//         -H "content-length: 2" \
//         -d "\"{}\"" \
//         "http://localhost:8081/h18"
func h18(w http.ResponseWriter, r *http.Request) {
    // This fixes it
    drainBody(w, r)

    data := dummyBigResponse()
    jData, _ := json.Marshal(data)
    w.WriteHeader(http.StatusOK)
    w.Write(jData)
}

func dummyBigResponse() map[string]string {
    dummyResponse := map[string]string{}
    for i := 1; i < 1000; i++ {
        dummy := fmt.Sprintf("dummy-%d", i)
        dummyResponse[dummy] = "herokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuherokuheroku"
    }
    return dummyResponse
}

// Heroku's suggestion to drain the body
func drainBody(w http.ResponseWriter, r *http.Request) {
    // check if we have a body too big for buffering
    if r.Body != nil || r.Body != http.NoBody || r.ContentLength >1e6 {
        io.Copy(ioutil.Discard, r.Body)
    }
}
... 
```

如果没有`drainBody`调用，您将收到 H18 路由器错误。有了它，你不会。我希望他们记录下来，因为他们知道这是一个问题！我对此表示支持。

# c - 不带说明符的 printf

> ID：12704793
> 
> 赞同：0
> 
> 时间：2012-10-03T08:41:45.290
> 
> 标签：c, printf

> **可能重复：**
> [为什么将 printf 的结果传递给另一个 printf 工作？](https://stackoverflow.com/questions/12625920/why-does-passing-the-result-of-printf-to-another-printf-work)

我有一个代码片段..

```
printf("%d", printf("tim")); 
```

函数 printf 打印值 tim3 .. 第二个 printf 语句没有说明符，那么为什么字符数与字符串 "tim" 一起打印？

当我只运行这段代码时..`printf("tim");`我得到输出，`tim Exited: ExitFailure 3`为什么会这样？

第一个 printf 语句在`printf("tim")`期望整数时如何作为参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T08:44:03.383

`printf`返回打印的字符数，因此`printf("tim")`返回 3，因为字符串中有 3 个字符。

第二个`printf`需要先评估，然后才能在格式字符串中使用它的值，因此首先打印它。

至于您的输出`tim Exited: ExitFailure 3`，这看起来更像是您在打印时遇到了另一个问题。注释掉这些行，您可能会在其他地方发现问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T08:59:24.633

`printf`如果未指定格式说明符，则按原样打印字符串。所以将按原样`printf("Hello");`打印。`Hello`

您也可以通过使用格式说明符来做同样的事情 -`printf("%s", "Hello");`

`printf`还返回打印的字符数。所以`printf("Hello");`首先打印字符串`Hello`然后返回`5`。

在您的声明中，您正在打印`printf`使用的返回声明`printf("%d", ...);`

实际上，您给出的声明可以这样写-

```
int i = printf("tim");
printf("%d", i); 
```

至于失败，我猜你`return printf("tim");`的`main`功能中有一个。

# javascript - 我不能发到谷歌？

> ID：12704794
> 
> 赞同：1
> 
> 时间：2012-10-03T08:41:53.130
> 
> 标签：javascript, html

这是一个小程序的代码，您可以在其中输入关键字，选择搜索引擎，然后按“搜索”按钮进行搜索。但谷歌不要让我发帖。我还能做什么？

编辑：雅虎和必应工作正常。

错误

```
405\. That’s an error.

The request method POST is inappropriate for the URL 
/search?q=computer. That’s all we know. 
```

HTML

```
<form name="search" action="" method="Post" onSubmit="redirect()">
<input type="text" name="keyword"><br />
Google<input type="radio" name="ch" checked>
Yahoo!<input type="radio" name="ch">
Bing<input type="radio" name="ch"><br />
<input type="submit" value="Search">
</form> 
```

Javascript

```
<script type="text/javascript">
var searchengine=[
"http://google.com/search?q=",
"http://search.yahoo.com/search?p=",
"http://bing.com/search?q="
];

function redirect()
{
    var radioButtons = document.getElementsByName("ch");
    for (var x = 0; x < radioButtons.length; x++) {
        if (radioButtons[x].checked)
        {
            document.search.action = searchengine[x] + document.search.keyword.value;
        }
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T08:44:15.983

> 但谷歌不要让我发帖。我还能做什么？

使用`GET`而不是`POST`在您的表单中，或者只是将相关的 URL 分配给`window.location`.

这是后者的一个例子。其他一些变化：

*   添加了一些`label`s。
*   更改了您匹配所选单选按钮的`searchengine`方式，使其更加健壮/可维护。
*   更改了搜索表单的名称。由于这会被倾倒在`window`对象上，因此我避免使用诸如“搜索”之类的简单词。
*   正确编码关键字（您必须对 URI 参数进行编码）。

[现场复制](http://jsbin.com/ezerug/1)| [直播源](http://jsbin.com/ezerug/1/edit)

HTML：

```
<form name="searchForm" action="" method="GET" onSubmit="return doSearch()">
<input type="text" name="keyword">
  <br>
  <label>Google<input type="radio" name="ch" value="google" checked></label>
  <label>Yahoo!<input type="radio" name="ch" value="yahoo"></label>
  <label>Bing<input type="radio" name="ch" value="bing"></label>
  <br>
  <input type="submit" value="Search">
</form> 
```

JavaScript：

```
var searchengine = {
  "google": "http://google.com/search?q=",
  "yahoo": "http://search.yahoo.com/search?p=",
  "bing": "http://bing.com/search?q="
};
function doSearch() {
  var frm, index, cb;

  frm = document.searchForm;
  if (frm && frm.ch) {
    if (frm.ch) {
      for (index = 0; index < frm.ch.length; ++index) {
        cb = frm.ch[index];
        if (cb.checked) {
          window.location = searchengine[cb.value] +
            encodeURIComponent(frm.keyword.value);
        }
      }
    }
  }

  return false; // Cancels form submission
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:43:42.863

`"http:google.com/search?q="`, 格式不正确..

尝试`"http://google.com/search?q="`

# cakephp - 蛋糕 2.0 中的 AppError 404 等效项

> ID：12704796
> 
> 赞同：0
> 
> 时间：2012-10-03T08:41:57.407
> 
> 标签：cakephp, error-handling, migration

我最近将我的 1.3 蛋糕应用程序升级到 2.0，我正在尝试重做我的 app_error 代码。

在 Cake 1.3 中，只需创建一个 app_error.php 文件，将它放在我的应用根目录中，然后覆盖内置的 error404() 和 missingController() 操作。

这是我的旧 1.3 /app/app_error.php 文件：[http ://pastebin.com/beWZD9PJ](http://pastebin.com/beWZD9PJ)

当有人使用预定义的“别名”URL 到达该站点时，它会启动一些代码，然后相应地重定向它们。

我只需要它在 Cake2.0 中工作，我看到手册告诉我它全部改变了，但我找不到这样的具体案例。谁能帮帮我，所以error404代码开始了？

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T09:49:32.527

CakePHP 2.0 中的 4xx 和 5xx 错误现在是异常，因此您需要自定义异常渲染器或处理程序。从本节阅读到底部[http://book.cakephp.org/2.0/en/development/exceptions.html#exception-renderer](http://book.cakephp.org/2.0/en/development/exceptions.html#exception-renderer)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T06:41:29.053

您可以在 Cake 2 的控制器中使用以下代码引发 404 异常：

```
throw new NotFoundException(__('Your error text here')); 
```

然后，你只需要`APP/View/Errors/error400.ctp`展示一些相关的东西。Cake 默认包含这个：

```
<h2><?php echo $name; ?></h2>
<p class="error">
    <strong><?php echo __d('cake', 'Error'); ?>: </strong>
    <?php printf(
        __d('cake', 'The requested address %s was not found on this server.'),
        "<strong>'{$url}'</strong>"
    ); ?>
</p>
<?php
if (Configure::read('debug') > 0 ):
    echo $this->element('exception_stack_trace');
endif;
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-29T23:22:03.867

这很简单。

使用 cakephp 2，您必须在 AppController 中添加此功能：

```
public function appError($error) {
    $this->redirect('/');
} 
```

在这里，例如，我们将所有错误重定向到索引页面。

# mysql - 如何使用mysql查询按字母名称排序

> ID：12704804
> 
> 赞同：1
> 
> 时间：2012-10-03T08:42:27.610
> 
> 标签：mysql

我的专辑按 id 排序，现在我只想显示专辑 B 字母。

我的旧查询

```
$valueql_select="SELECT DISTINCT (i.gallery_album_id) FROM mov_gallery_album AS a, mov_gallery_images AS i WHERE a.gallery_album_id = i.gallery_album_id AND a.gallery_cat_id =".$_GET['cat']." ORDER BY gallery_id desc"; 
```

我尝试使用 LIKE

```
$valueql_select="SELECT DISTINCT (i.gallery_album_id) FROM mov_gallery_album AS a, mov_gallery_images AS i WHERE a.gallery_album_id = i.gallery_album_id AND a.gallery_cat_id =".$_GET['cat']." ORDER BY name LIKE 'b%'"; 
```

但是上面的查询不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:43:53.437

将条件放在 WHERE 子句中：

```
$valueql_select="SELECT DISTINCT i.gallery_album_id
                 FROM mov_gallery_album AS a
                 JOIN mov_gallery_images AS i
                 ON a.gallery_album_id = i.gallery_album_id
                 WHERE a.gallery_cat_id = '42'
                 AND name LIKE 'b%'
                 ORDER BY name"; 
```

此外，您还有一个 SQL 注入漏洞。不要**将**值连接到 SQL 字符串中。特别是当它们直接来自用户输入而没有任何验证时。

**有关的**

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:44:11.430

如果您需要对以第一个开头的这些名称进行排序，请`B`尝试以下操作：

```
ORDER BY
CASE WHEN name name LIKE 'b%' THEN 0 ELSE 1 END, name ; 
```

如果你想得到这些以`B`'s 开头的名字，你必须将`LIKE`谓词移动到`WHERE`子句中，如下所示：

```
WHERE a.gallery_album_id = i.gallery_album_id 
 AND a.gallery_cat_id =".$_GET['cat']."
 AND name LIKE 'b%'
 ORDER BY name 
```

# c# - 如何在 ApplicationBarMenuItemClick 事件中获取 ApplicationBarMenuItem 名称

> ID：12704813
> 
> 赞同：1
> 
> 时间：2012-10-03T08:42:54.407
> 
> 标签：c#, windows-phone-7

我正在使用 Windows Phone 7.5 应用程序。我无法`ApplicationBarMenuItem`从单击事件中找到名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:19:18.227

查看文档，它看起来不像 Name 是该类的受支持属性。所以你将不得不使用 Text 属性或类似的东西。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.shell.applicationbarmenuitem(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.shell.applicationbarmenuitem(v=vs.92).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:42:04.580

识别您单击的菜单项的唯一方法是遍历菜单项集合并尝试将 (Sender as ApplicationBarMenuItem).Text 与每个项进行匹配。然后可以使用匹配的索引来确定您点击了哪个项目。

# android - Eclipse 找不到 Android 支持库

> ID：12704817
> 
> 赞同：3
> 
> 时间：2012-10-03T08:43:00.293
> 
> 标签：android, eclipse, android-support-library

我是一位经验丰富的程序员，但对 Android 不熟悉，因此第一次使用 Eclipse。不幸的是，我无法启动我的第一个项目。当发生以下序列时，我尽可能尝试创建项目。出现一个标题为“安装依赖项”的屏幕，告诉我所需的版本是 8，而已安装的版本是“未安装” “获取：”消息。下一个屏幕要求我选择要安装的包，唯一的选项是 Android 支持库，修订版 10。这不会打扰我，因为我认为 10 比 8 好，所以我点击了安装按钮。这就是一切都出错的地方，因为我收到一条红色消息：-找不到文件：C：\Program Files (X86)\Android\android-sdk\temp\support_r10.zip（访问被拒绝）。果然，当我检查这个文件夹时，它是空的。

现在，一定发生了一些事情，因为 SDK 管理器进行了大量的获取，并且必须将这些文件放在某个地方。

我很高兴找到它们并将它们放在正确的文件夹中，但问题是

我要查找的文件的名称是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T06:25:59.813

以管理员身份运行 SDK Manager，然后从 Extras 安装 Android Support Library

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:46:07.653

单独下载 sdk manager 并从那里安装文件。把它放在你可以访问的地方，然后将你的 eclipse android 目录指向它。工具>选项>android sdk

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:46:35.530

以管理员身份运行 eclipse。这就是解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T08:46:53.913

尝试在管理员模式下运行您的应用程序 (Eclipse)。右键单击 Eclipse 应用程序，然后选择“以管理员身份运行”这将解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-02T22:30:06.127

属性>java构建路径>单击库选项卡>添加罐子>从支持库添加罐子。

# mysql - 使用 LIKE MySQL 从两个表中提取信息

> ID：12704822
> 
> 赞同：0
> 
> 时间：2012-10-03T08:43:20.057
> 
> 标签：mysql, sql-like

**我在 PHP 和 MySQL 工作**

感觉要撞墙了 我不知道该怎么做，这让我很生气。我以前做过很多类似的事情，但这是行不通的。啊。请帮忙！！！！

我正在搜索。客户将输入“88 个刹车片”之类的内容。我想退回所有说“刹车”的部分，所有说“垫”的部分以及所有具有 88 年的部分。我的问题是，年份和部分在不同的表中。

例子：

年表

```
 ID  |  part_id  |  year  |
============================
   1  |    15     |  1945  |
   2  |    15     |  1946  |
   3  |    16     |  1984  |
   4  |    18     |  1987  | 
```

零件表

```
 ID  |  part_name  |
=====================
  15  |    brakes   |
  16  |     hose    |
  17  |    crank    |
  18  |    muffler  | 
```

当从零件表中拉出时，此 SQL 有效

```
SELECT DISTINCT * FROM hj_parts WHERE part_name LIKE "%brakes" 
```

我会得到输出

```
 ID  |  part_name  |
=====================
   15  |    brakes   | 
```

所以我需要的是，如果有人输入“刹车 87”，我想取回第 15 部分（刹车）和第 18 部分的所有信息（因为它是从 1987 年开始的）。

我完全迷失了。

我做了这样的事情来提取某一年的所有部分，我想我可以调整它，但它没有帮助。

```
$query = "SELECT hj_parts.* FROM hj_parts JOIN(SELECT DISTINCT part_id FROM hj_years WHERE (year BETWEEN $starter AND $ender) OR (year='all')) hj_years ON hj_parts.id = hj_years.part_id"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:52:08.250

这就是我的做法。首先创建一个将所有内容组合在一起的查询，为了方便起见，我们将把它放在一个视图中

```
create view AllParts as 
SELECT Parts.*,Years.* from Parts inner join Years on Years.part_id=Parts.ID 
```

然后你做这样的搜索

```
Select * from AllParts where part_name like '%brake' or year=1987 
```

如果您的数据库很大，这可能需要一段时间。它不一定是完美的解决方案，但它可以为您工作。

如果您有兴趣进行关键字搜索，也许 nosql 数据库会更好

# java - 如何快速原型化 Java 代码？

> ID：12704843
> 
> 赞同：6
> 
> 时间：2012-10-03T08:44:13.830
> 
> 标签：java, prototyping

解释性语言很好，我可以在深入研究生产级代码之前编写一些快速的原型代码（即使用交互式外壳）用于探索目的。

使用 Java 的最佳方法是什么？目前我正在使用 Eclipse 创建 Maven 项目，并使用 JUnit 在我的测试基础设施中探索事物......但这并不理想。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T08:51:16.580

您还可以查看 Eclipse 的剪贴簿页面：

菜单>文件>新建>其他>（搜索）剪贴簿页面

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T08:45:44.557

为什么不使用类似[BeanShell](http://www.beanshell.org/)的东西？它是 Java 的脚本解决方案，并提供基于控制台的交互式脚本环境。

这是[快速入门指南](http://www.beanshell.org/manual/quickstart.html)。请注意，您还可以[从 Maven](http://mail-archives.apache.org/mod_mbox/maven-users/200403.mbox/%3C22DAC946-6C44-11D8-B57A-000A959D0312@yahoo.co.uk%3E)中启动 BeanShell 控制台。

我在这里选择了 BeanShell，因为它是最接近 Java 的东西，而且是交互式的。您可以选择另一种基于控制台的 JVM 语言，例如 Scala、Jython 等。由于它们是不同的语言，因此它们从标准 Java 中移除得更多，但仍然提供与标准 Java 组件的互操作性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T08:48:10.887

您可能想尝试 JRebel 来快速调整代码。或者，如果您从事 Web 开发，请查看 Play 框架。

[http://zeroturnaround.com/software/jrebel/](http://zeroturnaround.com/software/jrebel/)

[http://www.playframework.org/](http://www.playframework.org/)

# c# - 在 ASP.Net 中创建一个中继器控件

> ID：12704847
> 
> 赞同：1
> 
> 时间：2012-10-03T08:44:21.377
> 
> 标签：c#, asp.net, c#-4.0, repeater

我正在使用两个下拉菜单并将值绑定到该下拉菜单。现在正在添加一个新按钮 add_new。当我单击添加按钮并保持先前​​选择的值时，我想在下面创建上述下拉列表。请帮助我做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:11:26.097

您可以使用 ASP.Net 的 Repeater 控件来实现所需的结果。您可以根据需要创建任何类型的模板，请参见下面的代码：

ASPX：

```
<asp:Repeater ID="Repeater1" runat="server">
    <ItemTemplate>
        <asp:DropDownList ID="DropDownList1" runat="server" />
        <asp:DropDownList ID="DropDownList2" runat="server" />
        <br />
    </ItemTemplate>
</asp:Repeater> 
```

代码隐藏：

```
protected void Button1_Click(object sender, EventArgs e)
{
    // data fetching logic

    Repeater1.DataSource = data;
    Repeater1.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:59:05.940

如果没有更好的解释和代码示例，很难回答，但根据经验，在回发上使用下拉菜单可以更好地控制隐藏字段。使用 javascript 设置隐藏字段的值。请提供更多细节。

# wicket - Wicket 1.5 - EmailTextField：接受“加号”符号

> ID：12704848
> 
> 赞同：0
> 
> 时间：2012-10-03T08:44:23.797
> 
> 标签：wicket, email-validation, wicket-1.5

我在 wicket 1.5 应用程序中使用 EmailTextField 来记录用户。根据 GMail 别名，电子邮件中可能存在 + 符号，但检票口不允许这样做。有没有办法在验证器中接受额外的符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:47:34.197

您必须编写自己的验证器：

```
public class GMailAddressValidator extends PatternValidator {

    public GMailAddressValidator() {
        super("^[_A-Za-z0-9-+]+(\\.[_A-Za-z0-9-+]+)*@[A-Za-z0-9-]+(\\.[A-Za-z0-9-]+)*((\\.[A-Za-z]{2,}){1}$)",
                Pattern.CASE_INSENSITIVE);
    }
} 
```

在这里，我只是在原始 Wicket 正则表达式中添加两个加号以验证电子邮件（尝试以粗体突出显示加号）：

^[_A-Za-z0-9- **+** ]+(\\.[_A-Za-z0-9- **+** ]+)*@[A-Za-z0-9-]+(\\.[A- Za-z0-9-]+)*((\\.[A-Za-z]{2,}){1}$)

之后，您可以将简单的 TextField 与验证器一起使用，而不是使用 EmailTextField。像那样：

```
new TextField<String>("email").add(new GMailAddressValidator()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:07:35.893

我认为您将不得不像这样覆盖 HTML5 验证：[覆盖 html5 验证](https://stackoverflow.com/questions/9216115/override-html5-validation)，该组件仅将输入类型设置为电子邮件，我认为它不会添加任何检票口验证。如果您不想添加 js 覆盖，最好的办法是为检票口 TextField 创建自己的验证器。

# php - PHP Header & CSV 没有下载选项

> ID：12704849
> 
> 赞同：0
> 
> 时间：2012-10-03T08:44:36.350
> 
> 标签：php, csv, header

我已经使用生成 CSV 文件的标头函数编写了一个脚本。让我详细解释一下。第 1 步）我在 mysql 中保存记录。第 2 步）我正在从数据库中保存的记录创建 CSV 文件 第 3 步）我想将该 CSV 附加到附件中，以便我可以将其发送给不同的客户！！我已经完成了这两个步骤。但我不想在 CSV 文件生成过程中使用下载功能，因为我不希望任何人都可以使用此文件。我的代码如下所示：

```
 $file_name = "Register_" . date('l');

        $file_name.=".csv";

      header("Content-type: application/octet-stream");
        header("Content-Disposition: attachment; filename=$file_name");
        header("Pragma: no-cache");

        header("Expires: 0");
        print "$header\n$data"; 
```

我需要在哪里进行更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:58:28.637

您可以使用`AddStringAttachment`：

```
$file_name = "Register_" . date('l') . ".csv";
$excelContent = "$header\n$data";
$phpmailer->AddStringAttachment($excelContent, $file_name, 'base64', 'application/vnd.ms-excel'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:53:13.117

只需删除所有呼叫`header()`和最后一个`print`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:53:18.950

您可以通过使用 ob_buffer 函数并“捕获”生成的输出来做您尝试做的事情。然而，整个方法有点奇怪：

标头功能与创建电子邮件无关。它们用于指定浏览器应如何处理传输的数据。因为这就是你所做的：你发送标题和数据。不。

相反：将 csv 数据写入缓冲区或文件，并使用可用的电子邮件类之一（google ...）创建电子邮件。然后将精心制作的电子邮件发送出去。不需要 header() 函数。

# yii - 如何将 IFNULL 与 yii CDbCriteria 一起使用？

> ID：12704857
> 
> 赞同：0
> 
> 时间：2012-10-03T08:45:08.673
> 
> 标签：yii, ifnull

在 yii 中，我有一个`CDbCriteria`带有 select 的属性：

```
$criteria->select = "IFNULL(t.cccid,'Default')"; 
```

也就是说，如果 t.cccid 为 NULL，我想返回“默认”。应返回 t.cccid 的其他值/

问题是`IFNULL`没有被认可。我得到错误：

*试图选择一个无效的列“'默认'）”*

我也试过：

```
$criteria->select = "IFNULL(t.cccid,'Default') as cccid"; 
```

然后我得到语法错误。

任何人都可以帮助我如何使用`IFNULL`in`$criteria->select`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:02:51.987

使用[CDbExpression](http://www.yiiframework.com/doc/api/1.1/CDbExpression)可以帮助你

```
$criteria->select = new CDbExpression("IFNULL(t.cccid,'Default') cccid"); 
```

或（要选择 * 或其他列，请使用数组）

```
$criteria->select = array(
        '*', 
        new CDbExpression("IFNULL(t.cccid,'Default') cccid"),
); 
```

# jquery - 将“单元格”的内容复制到另一个具有增量的单元格

> ID：12704874
> 
> 赞同：0
> 
> 时间：2012-10-03T08:46:08.950
> 
> 标签：jquery

我有一个表，其中有一个添加新行的按钮。添加此新行时，字段 RS_Staff_Title1 将递增到 RS_Staff_Title2，依此类推。此按钮还可以将一行添加到另一个表中。

然后，我有了这个函数，可以在您键入时将 RS_Staff_Title1 的内容复制到另一个表的字段中。

```
$("#RS_Staff_Title1").keyup(function() {
        var value = $(this).val()
        $("p").text(value);
    }).keyup(); 
```

我需要实现的是将 StaffTable 上 RS_Staff_Title1 中的任何内容复制到 ResourceTable 上的 RS_Staff_Title1 等等

更新：

我在 Staff 表中的行的 HTML 是：

```
<tr>
<td><input id="RS_Staff_Title1" name="RS_Staff_Title1" style="width:100%;"></td> 
```

向两个表中添加一行的 JS 是：

```
$("#add_row").click(function() {
    var row = $("#staff tbody > tr:last"),
        newRow = row.clone(true);
    newRow.find("input").each(function() {
        var num = +(this.id.match(/\d+$/) || [0])[0] + 1;
        this.id = this.id.replace(/\d+$/, "") + num;
        this.name = this.id;
    });
    newRow.insertAfter(row);
    return false;
});
$("#add_row").click(function() {
    var row = $("#resource-cost tbody > tr:last"),
        newRow = row.clone(true);
    newRow.find("input").each(function() {
        var num = +(this.id.match(/\d+$/) || [0])[0] + 1;
        this.id = this.id.replace(/\d+$/, "") + num;
        this.name = this.id;
    });
    newRow.insertAfter(row);
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:06:43.870

为了不`keyup`为每个新行绑定事件，您可以使用`.live`（`.on`在最新的 jQuery 中）只添加一次并使其适用于添加的任何新项目。此外，ID 必须是唯一的，并且不能有两个 ID 为 RS_Staff_TitleN 的元素。我会在 RS_Staff_Title 元素上放置一个类并像这样绑定 keyup 处理程序：

```
$(document).on("keyup", ".StaffTableTitle", function() {
    var value = $(this).val()
    var id = $(this).data("rowindex");
    $(".ResourceTableTitle #RT_Staff_Title" + id + " p").text(value);
}); 
```

RT_Staff_Title - ResourceTable 中 RS_StaffTitle 的建议 ID，以便拥有唯一 ID

`.data("rowindex");`在创建新添加的 rs_staff_title 元素时应该像这样设置`.data("rowindex", index)`它（从那里获取它比从 ID 获取它更容易，并且需要稍后在 ResourceTable 中找到相应的元素）

```
newRow.find("input").each(function() {
        var num = +(this.id.match(/\d+$/) || [0])[0] + 1;
        this.id = this.id.replace(/\d+$/, "") + num;
        $(this).data("rowindex", num);
        this.name = this.id;
    }); 
```

# jquery - 扩展 Bootstrap Typeahead 插件

> ID：12704877
> 
> 赞同：1
> 
> 时间：2012-10-03T08:46:16.207
> 
> 标签：jquery, twitter-bootstrap, autosuggest

我正在使用 Bootstrap Typeahead 和 Ajax 构建一个特定的“自动完成”。

我的代码类似于：

```
searchInput.typeahead({
    source: function (request, response) {
        $.ajax({
            url: '/Home/AllNamesAutoComplete',
            type: 'post',
            dataType: 'json',
            data: { searchText: searchInput.val() },
            success: function (data) {
                var arr = [];
                $.each(data.AutoCompleteItemViewModel, function () {
                    arr.push(this.Name + " - <span>" + this.Position + "</span>");
                });
                return response(arr);
            }
        })
    },
    items: 6
}); 
```

在推送中，我传递了两个不同的值：`this.Name`和`this.Position`.

一切正常，但如果我输入“ `S`”作为第一个字母，它`<span>`也会呈现。我想将我的字符串作为 HTML 推送，但我仍然不知道该怎么做。

另一件事是，当用户单击自动完成中的项目时，我希望只选择`Name`and 而不是`Name`and `Position`。

我想将 HTML 放入 Typeahead 源的数组中，然后我想在单击时仅在主输入中呈现特定值，而不是两者都呈现。

我看了一下“ [Extend the bootstrap-typeahead in order to take an object而不是 string](https://stackoverflow.com/questions/12182799/extend-the-bootstrap-typeahead-in-order-to-take-an-object-instead-of-a-string) ”，但我无法理解它，因为它使用的是 Backbone。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T14:35:08.670

为在这里绊倒的人回答问题的**标题**。这就是**扩展**Bootstrap 插件的方式。（是的，我读的比标题还多）

```
(function ($, app) {

    var Typeahead = $.fn.typeahead.Constructor;
    Typeahead.extend = app.extend;

    app.YourCustomTypeahead = Typeahead.extend({
        highlighter: function (items) {
            // proof that it's working
            console.log('custom highlighter');
            // to call the parent just do this
            return Typeahead.prototype.highlighter.apply(this, arguments);
        }
    });

}(window.jQuery, window.YourProjectNamespace)); 
```

用法：

```
var typeahead = new app.YourCustomTypeahead($('selector'), { /* options */ }); 
```

* * *

在这个例子`app.extend`中是一个通用的扩展函数，比如 Backbone 使用的那个。

IE。（下面需要下划线）

```
(function (app, $) {

    // Backbone's extend function
    app.extend = function(protoProps, staticProps) {

        var parent = this;
        var child;

        // The constructor function for the new subclass is either defined by you
        // (the "constructor" property in your `extend` definition), or defaulted
        // by us to simply call the parent's constructor.
        if (protoProps && _.has(protoProps, 'constructor')) {
          child = protoProps.constructor;
        } else {
          child = function(){ return parent.apply(this, arguments); };
        }

        // Add static properties to the constructor function, if supplied.
        _.extend(child, parent, staticProps);

        // Set the prototype chain to inherit from `parent`, without calling
        // `parent`'s constructor function.
        var Surrogate = function(){ this.constructor = child; };
        Surrogate.prototype = parent.prototype;
        child.prototype = new Surrogate;

        // Add prototype properties (instance properties) to the subclass,
        // if supplied.
        if (protoProps) _.extend(child.prototype, protoProps);

        // Set a convenience property in case the parent's prototype is needed
        // later.
        child.__super__ = parent.prototype;

        return child;
    };

}(window.YourProjectNamespace, window.jQuery)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T06:54:13.647

您可以使用 jQuery 将字符串转换为 HTML：

```
html = $('<div>hello</div>')[0] 
```

Typeahead 的源函数只需要一个字符串数组。要更改这些字符串的输出，请考虑添加荧光笔功能。highlighter 函数将接受 item 参数并应返回 HTML：

```
searchInput.typeahead({
  source: function(request, response){
  ...
    arr.push({Name:this.Name, Position:this.Position});
  ...
  },
  highlighter: function(item){
    return "<div>"+item.Name+" - <span>"+item.Position+"<span></div>"
  },
  matcher: function(item){
    return item.Name.indexOf(this.query) > -1;
  },
  sorter: function(items){
    return items;
  },
  items:6
}); 
```

编辑：我进行了一些更改，以便源使用对象数组而不是字符串调用响应。输出 html 的格式应该在您的荧光笔功能中进行。匹配器需要能够找到对象内部的属性以与您的查询进行比较。当 typeahead 尝试对源中的字符串进行排序时，还必须覆盖 Sorter 以防止错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T17:45:49.227

我相信您应该创建自己的“匹配器”方法。您可以使用[原始方法](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-typeahead.js)作为您的基础。[原始方法使用您可以在此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)阅读的“~”运算符（我不知道）。

```
searchInput.typeahead({
  ...
  matcher: function(item){
    // maybe some ugly solution to remove <span> markup
  },
  ...
}); 
```

# c# - 如何通过 GET 方法使用 Web 服务？

> ID：12704880
> 
> 赞同：0
> 
> 时间：2012-10-03T08:46:29.420
> 
> 标签：c#, web-services

我有一个带有 WSDL 之类的普通 3rd 方 SOAP 服务。问题是 - 它只接受 GET 请求。如何在 c# 中访问它？

当我将该服务添加到 VS via`Add Service Reference`并尝试照常使用它时：

```
var service = new BaseSvcClient(
                 new BasicHttpContextBinding(), 
                 new EndpointAddress("http://some.internal.ip/WebServices/Base.svc"));
var ver = service.Version(); 
```

我看到（通过提琴手）它实际上发送 POST 请求，并且 Web 服务以`Endpoint not found`错误消息响应。如果我只是`http://some.internal.ip/WebServices/Base.svc/Version`在浏览器中点击，则会返回正确的 xml。

我可以使用 WebClient，但是我必须手动构造所有的 GET 请求，这看起来不太好。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:10:42.097

我找到了一个对我有很大帮助的[答案](https://stackoverflow.com/a/12517479/291695)。基本上，如果我为客户端采用自动生成的界面，则使用`[WebGet]`并使用装饰方法

```
var cf = new WebChannelFactory<IBaseSvc2>(new Uri("..."));
var service = cf.CreateChannel();
var result = service.Version(); 
```

这一切都很好。这不是一个完美的解决方案，因为不会自动获取更改，所以可能还有其他解决方案吗？

PS Web 服务的接口现在如下所示：

```
 [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
    [System.ServiceModel.ServiceContractAttribute(ConfigurationName = "BaseService.IBaseSvc")]
    public interface IBaseSvc2
    {
        [System.ServiceModel.OperationContractAttribute(Action = "http://tempuri.org/IBaseSvc/Version", ReplyAction = "http://tempuri.org/IBaseSvc/VersionResponse")]
        [WebGet]
        VersionInformation Version();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:52:43.523

您可以通过在配置文件中添加协议来实现

```
<webServices>
      <protocols>
        <add name="HttpGet"/>
        <add name="HttpPost"/>
      </protocols>
</webServices> 
```

# php - 使用 php 下载的 Apk 未定义，但在浏览器刷新后可以下载

> ID：12704884
> 
> 赞同：1
> 
> 时间：2012-10-03T08:46:40.577
> 
> 标签：php, apk

```
<a href="download.php"><img src="images/android/android01.jpg"/>Android</a> 
```

链接到：

php代码：

```
$file = 'myfile.apk';
$filename ="MYAPP";
if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/vnd.android.package-archive');
    header("Content-Disposition:attachment; filename=\"$filename\"");
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
} 
```

我在 Firefox 桌面浏览器和手机上得到一个未定义的输出。当我刷新浏览器时，下载对话框会启动并下载 apk 文件。关于如何绕过空白页面中未定义的输出并立即去下载对话框的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:24:06.853

试试这个：

```
<a href="#" onClick="window.location='download.php'">
  <img src="images/android/android01.jpg"/>Android
</a> 
```

# jvm - JDK 用于 TreeMap 类的内部数据结构

> ID：12704890
> 
> 赞同：0
> 
> 时间：2012-10-03T08:47:06.477
> 
> 标签：jvm, java

我知道红黑树用于 TreeSet。

我想知道 TreeMap 使用的数据结构是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:56:00.223

treeset 内部使用treemap，所以只有红黑树

检查 javadoc 了解详细信息[http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)

# spring-mvc - Spring 3.1 基于 Java 的配置如何工作

> ID：12704891
> 
> 赞同：4
> 
> 时间：2012-10-03T08:47:10.303
> 
> 标签：spring-mvc, spring-3

只是一个一般性问题，当您定义基于 Java 的配置 Web 应用程序时。即有一个类：ApplicationContext 和一个 WebApplicationInitializer 类。

Spring如何知道它必须加载bean，因为不存在xml配置文件..tomcat如何知道没有web.xml的webapp

这是一个新手问题..我很感激。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:23:13.297

请参阅[SpringSource 博客](https://spring.io/blog/2008/03/27/spring-java-configuration-what-s-new-in-m3/)中的这篇博文，关于的重要部分有一个示例，基本上你`web.xml`指向`JavaConfigWebApplicationContext`而不是 default `XmlWebApplicationContext`in `DispatcherServlet`：`<init-param>`

```
<web-app>
    <!-- Configure ContextLoaderListener to use JavaConfigWebApplicationContext
         instead of the default XmlWebApplicationContext -->
    <context-param>
        <param-name>contextClass</param-name>
        <param-value>org.springframework.config.java.context.JavaConfigWebApplicationContext</param-value>
    </context-param>
    <!-- Configuration locations must consist of one or more comma- or space-delimited
         fully-qualified @Configuration classes -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>example.RootApplicationConfig</param-value>
    </context-param>
    <!-- Bootstrap the root application context as usual using ContextLoaderListener -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <!-- Declare a Spring MVC DispatcherServlet as usual -->
    <servlet>
        <servlet-name>dispatcher-servlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <!-- Configure DispatcherServlet to use JavaConfigWebApplicationContext
             instead of the default XmlWebApplicationContext -->
        <init-param>
            <param-name>contextClass</param-name>
            <param-value>org.springframework.config.java.context.JavaConfigWebApplicationContext</param-value>
        </init-param>
        <!-- Again, config locations must consist of one or more comma- or space-delimited
             and fully-qualified @Configuration classes -->
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>example.web.WebBeansConfig</param-value>
        </init-param>
    </servlet>
</web-app> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-02T21:36:48.530

如果您启动并运行了 Maven，我有一个非常好的方法可以帮助您学习 Spring MVC。

如果是这样：转到我使用的命令行（Cygwin）...

1.  mvn 原型：生成
2.  它将要求一个“原型编号”。为你...键入 16
3.  输入组 ID，它只是主包。
4.  输入工件 ID，这是您的项目名称。
5.  SNAP-SHOT --- 只需按回车键，与版本相同。
6.  包 - 与您的组 ID 名称相同。例如：com.spring
7.  输入字母“y”确认，然后按回车键。

在您的工作区目录中执行上述所有操作。这样它就在那里创建。
您可以执行“mvn eclipse:eclipse”在 Eclipse 中加载它，或者您可以只导入它。我更喜欢老式的导入现有项目。

一切都将为您“已经”设置好所有配置（基于 Java），这对您有好处。它将在您的 pom.xml 中包含您需要的所有 Maven 依赖项。如果需要，您可以添加或从中获取。

这里的重点是你已经有一个正在运行的项目，你可以从那里开始使用它。我首先像这样创建我的所有项目并删除我不需要的并添加我所做的然后从那里开始。

祝你好运！！！

Anywho...将此添加到您的 web.xml。这将帮助您回答问题。研究如下：

```
<context-param>
    <param-name>contextClass</param-name>
    <param-value>
        org.springframework.web.context.support.AnnotationConfigWebApplicationContext
    </param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

# sql-server - 如何获取其他未追踪的相关事件？

> ID：12704892
> 
> 赞同：0
> 
> 时间：2012-10-03T08:47:12.307
> 
> 标签：sql-server, deadlock, sql-server-profiler

有没有办法获取与进程相关的其他事件的信息，这些事件未被 SQL 服务器探查器捕获（未包含在过滤器列表中）。

例如，如果我只跟踪死锁图，并且当我捕捉到这种事件时，我能否以某种方式获取关于在同一进程中捕捉到事件之前/之后发生的 BatchStarted 或 BatchCompleted 事件的信息？

当我想知道查询中使用的参数值时，我处于一种情况，但死锁图事件不提供此类信息。我可以重新配置探查器以跟踪其他事件，但我不知道如何重现死锁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:57:26.867

您无法获得比您最初追踪的信息更多的信息。但也许您仍然不知道您可以通过右键单击死锁图并将额外事件数据保存到 XML 文件中来获取额外的事件数据（带有 XDL 扩展名 -Deadlock XML files-，但我建议使用一个 XML 编辑器来阅读它），每个进程都有一个调用堆栈。它可能会添加解决死锁所需的额外信息。祝你好运。

这里完美解释：

[http://beyondrelational.com/modules/2/blogs/77/posts/11368/sql-server-ssms-profiler-extracting-deadlock-event-data-to-xdl-files.aspx](http://beyondrelational.com/modules/2/blogs/77/posts/11368/sql-server-ssms-profiler-extracting-deadlock-event-data-to-xdl-files.aspx)

# apache-flex - Flex 3.5 中的字体抗锯齿在 textarea 中有所不同

> ID：12704893
> 
> 赞同：1
> 
> 时间：2012-10-03T08:47:20.437
> 
> 标签：apache-flex, flex3, antialiasing, flashbuilder4

显示文本时出现一个奇怪的错误，如图所示，抗锯齿似乎在文本区域的范围内发生变化。请注意左下角的“x”与右上角的“u”相比。

![flex中的Textarea抗锯齿错误](../Images/9eb5cc2bec8b3ceb3c93187a12387d0e.png)

我正在使用嵌入的 Arial，并且我尝试将 advancedAntialiasing 设置为 false 或 true，但仍然会出现此错误。

我在 Flash Builder 4.0 中使用 Flex 3.5 SDK。我截取屏幕截图的播放器是 Flash Player 11

我的问题是这怎么可能，我能做些什么来消除奇怪的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:28:28.493

此行为是由于将 az 坐标设置为 textarea。有点意外的效果。将 textarea z 设置为 0 会消除任何奇怪的模糊。

# android - LiveJournal网站接口认证

> ID：12704896
> 
> 赞同：1
> 
> 时间：2012-10-03T08:47:41.753
> 
> 标签：android

我需要为应用程序添加实时日志支持。我对身份验证方式有点困惑。

他们正在使用 xml-rpc 这让我有机会向他们的服务器发送请求，但是我认为用户不会那么容易在我的自定义身份验证表单中输入他们的帐户详细信息 - 我的意思是我不会只信任每个自定义形式。是否有任何选项可以通过站点界面对用户进行身份验证？如果是这样，是否可以检索身份验证令牌以发送“发布条目”和类似请求？

谢谢。

# android - 用于二进制文件的 Android 文件 IO

> ID：12704897
> 
> 赞同：0
> 
> 时间：2012-10-03T08:47:55.303
> 
> 标签：android, file-io

我想对包含相同类型和相同大小记录的二进制文件进行文件操作。我要读取、写入和修改这些记录也需要跳转记录，并希望对记录进行下一步、最后、优先的操作。

在 Android 中，哪个 IO 将适合这些要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:50:27.283

这不是特定于 Android 的，请使用`java.io.RandomAccessFile`.

# sql - 在 SQL 中连接多个表同时限制指数结果

> ID：12704898
> 
> 赞同：0
> 
> 时间：2012-10-03T08:47:55.987
> 
> 标签：sql, oracle, oracle8i

我已经在 Google 和 Stack Overflow 上搜索了我的查询的答案，但我觉得我缺乏 SQL 词汇正在阻碍我找到答案，因为我相信这将是一个常见问题。任何对我需要阅读的内容有帮助的观点总是受欢迎的。

关于这个问题，我试图在 Oracle 8i 中加入三个表，例如，公司表、发票表和工作表，发票表和工作表之间没有链接。我希望在一个查询中，我可以链接返回所有发票和公司所有工作的所有三个表，而无需返回每张发票的所有工作（请参阅下面的示例结果）。

我想看看：

```
Company 1   Invoice 1   Job 1
Company 1   Invoice 2   Job 2
Company 1   Invoice 3   Job 3 
```

我不想看到：

```
Company 1   Invoice 1   Job 1
Company 1   Invoice 1   Job 2
Company 1   Invoice 1   Job 3
Company 1   Invoice 2   Job 1
Company 1   Invoice 2   Job 2
Company 1   Invoice 2   Job 3
Company 1   Invoice 3   Job 1
Company 1   Invoice 3   Job 2
Company 1   Invoice 3   Job 3 
```

一如既往地感谢您提供的任何帮助。

编辑：

本质上，Invoice 和 Job Tables 都有一个 Company Table Key 字段，只是 Job 和 Invoice 表之间没有直接的链接。如果在有 2 个发票和 3 个工作时出现实例，我希望它显示，反之亦然：

```
Company 1   Invoice 1   Job 1
Company 1   Invoice 2   Job 2
Company 1               Job 3 
```

尽管像这样看待问题让我觉得这比我希望的更容易得到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:48:54.407

您的要求意味着您的架构有问题。在这种情况下，我的第一个建议是修改您的架构：添加`job_id`to`invoice`或 an `invoice_id`to `job`（或 NN 关系表`invoice_job`）。

如果您不愿意更新您的架构，您可以使用一个查询来进行连接。下面的[查询](http://sqlfiddle.com/#!4/5f5e7/1)基本上是join`job`和`invoice`一对一的：

```
SELECT c.company_id, ij.job_id, ij.invoice_id
  FROM company c
  LEFT JOIN (SELECT job_id, invoice_id, 
                    NVL(j.company_id, i.company_id) company_id
               FROM (SELECT j.job_id, j.company_id,
                            row_number() OVER (PARTITION BY company_id
                                           ORDER BY job_id) job_no
                       FROM job j) j
               FULL OUTER JOIN 
                    (SELECT i.invoice_id, i.company_id,
                            row_number() OVER (PARTITION BY company_id
                                           ORDER BY invoice_id) invoice_no
                       FROM invoice i) i
                    ON j.company_id = i.company_id
                   AND j.job_no = i.invoice_no) ij
              ON c.company_id = ij.company_id 
```

这里的连接条件是人为的。如果您删除发票，作业和发票的关系可能会发生变化。

如果这两个表真的不相关，您可能希望以不同的方式显示结果，[例如](http://sqlfiddle.com/#!4/5f5e7/5)：

```
SQL> SELECT cj.company_id, cj.jobs,
  2         listagg(i.invoice_id, ',')
  3            WITHIN GROUP (ORDER BY i.invoice_id) invoices
  4    FROM (SELECT c.company_id,
  5                 listagg(j.job_id, ',') WITHIN GROUP (ORDER BY job_id) jobs
  6            FROM company c LEFT JOIN job j ON c.company_id = j.company_id
  7           GROUP BY c.company_id) cj
  8    LEFT JOIN invoice i ON cj.company_id = i.company_id
  9  GROUP BY cj.company_id, cj.jobs;

COMPANY_ID  JOBS   INVOICES
----------- ------ --------
1           1,2,3  1,2 
```

# c# - 打开窗口时如何设置页面大小？

> ID：12704899
> 
> 赞同：0
> 
> 时间：2012-10-03T08:47:58.867
> 
> 标签：c#, javascript, asp.net

我正在使用 ASP.NET 和 C#，并且正在使用 window.open() 打开窗口。现在我需要在该窗口中设置该页面的宽度。

我在 buttonclick 事件中使用此代码。

```
ClientScript.RegisterStartupScript(this.GetType(), "oncl", "<script language=javascript>window.open('Print.aspx','PrintMe','width=900,resizable=1,scrollbars=1');</script>"); 
```

脚本里面的宽度只是设置寡妇的宽度。但我想设置页面的宽度。

可能吗？

谢谢..

编辑：

抱歉，我之前没有提到它。我正在将内容动态写入 print.aspx。我正在使用此代码来填充页面。

```
 Page pg = new Page();
    pg.EnableEventValidation = false;
    HtmlForm frm = new HtmlForm();
    pg.Controls.Add(frm);
    frm.Controls.Add(ctrl);
    pg.DesignerInitialize();
    pg.RenderControl(htmlWrite);
    string strHTML = stringWrite.ToString();
    HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.Write(strHTML); 
```

这在页面加载事件中调用。所以我在 print.aspx 中打印 .aspx 页面。所以我希望这个内容应该在静态页面宽度中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:58:54.870

您不能使用 更改页面的宽度`window.open`，它只设置窗口属性。

要更改`width`页面的样式，您可能需要更改 print.aspx 的样式，如果您必须更改包装`div`元素或`body`页面的宽度

```
var newwindow = window.open('Print.aspx');
var elem = newwindow.document.getElementById('my-id');
elem.style.width = 'XYZpx' 
```

PS :- 上面的代码只有在新窗口具有相同的协议、域和端口时才有效。如果它在另一个域上，出于安全原因，您不能这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:58:56.577

如果您仅通过 window.open 方法使用该页面，则分别硬编码设置页面的宽度，否则，在使用 window.open 打开页面时注入大小。

**如何在打开时注入：**

[使用Javascript从父窗口访问子窗口元素](https://stackoverflow.com/a/9601933/952310) （关于[跨域资源共享的](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)安全问题的通知）

简而言之：

```
var childWindow = window.open('Print.aspx','PrintMe','width=900,resizable=1,scrollbars=1');
childWindow.document.getElementById('someDivId').style.width = '400px'; 
```

或者在服务器端访问它：

```
HtmlForm frm = new HtmlForm();
frm.style = ; // 
```

[在这里阅读](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlcontrol.style.aspx)

**如何将其设置为硬编码：**

您要更改窗口中哪个元素的宽度？ `body`? `div`?

我猜你正在考虑`margin`页面的左右两侧`body`。

尝试将以下样式块插入您的`head`标签：

```
<style>
body{margin: 0 10px 0 10px;}
</style> 
```

`10px`左边距和右边距在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T08:59:40.927

你也可以使用

```
window.resizeTo(x,y); 
```

例如：

```
function resizeWindow() 
{           
    // you can get height and width from serverside as well      
    var width=400;
    var height=400; 
    window.resizeTo(width,height);           
} 
```

在正文的 onload() 事件上调用该函数

```
<body onload="resizeWindow()" >
   body of page
</body> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T08:52:03.303

window.open() 函数中指定的宽度只会设置弹出窗口的宽度。如果要更改页面的宽度，则应尝试更改 Print.aspx 中的宽度。

# java - variables in classes outside activities

> ID：12704905
> 
> 赞同：0
> 
> 时间：2012-10-03T08:48:18.683
> 
> 标签：java, android, class, variables, scope

Am I doing this right? I'm trying to implement a simple countdown timer just to get my feet of the ground with it.

my timer class is not nested in my activity, and all by itself in it's own java file, for the sake of neatness. here:

```
public class McatTimer extends CountDownTimer {

    private TextView timer_tv;

    public McatTimer(long millisInFuture, long countDownInterval, TextView textview) {
        super(millisInFuture, countDownInterval);
        this.timer_tv = textview;
    }

    @Override   
    public void onFinish() {
        timer_tv.setText("DONE!");
    }

    @Override
    public void onTick(long millisUntilFinished) {
        timer_tv.setText("seconds remaining: " + millisUntilFinished / 1000);
    }

} 
```

and here is logcat:

```
10-03 08:40:36.007: E/AndroidRuntime(2582): FATAL EXCEPTION: main
10-03 08:40:36.007: E/AndroidRuntime(2582): java.lang.NullPointerException
10-03 08:40:36.007: E/AndroidRuntime(2582):     at com.mangodeveloper.mcathomie.McatTimer.onTick(McatTimer.java:22)
10-03 08:40:36.007: E/AndroidRuntime(2582):     at android.os.CountDownTimer$1.handleMessage(CountDownTimer.java:124)
10-03 08:40:36.007: E/AndroidRuntime(2582):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-03 08:40:36.007: E/AndroidRuntime(2582):     at android.os.Looper.loop(Looper.java:123)
10-03 08:40:36.007: E/AndroidRuntime(2582):     at android.app.ActivityThread.main(ActivityThread.java:3683)
10-03 08:40:36.007: E/AndroidRuntime(2582):     at java.lang.reflect.Method.invokeNative(Native Method)
10-03 08:40:36.007: E/AndroidRuntime(2582):     at java.lang.reflect.Method.invoke(Method.java:507)
10-03 08:40:36.007: E/AndroidRuntime(2582):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-03 08:40:36.007: E/AndroidRuntime(2582):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-03 08:40:36.007: E/AndroidRuntime(2582):     at dalvik.system.NativeStart.main(Native Method) 
```

and my activity has these in their appropriate places:

```
private McatTimer mcatTimer;

....

mcatTimer = new McatTimer(GAME_PREFERENCES_ROUNDTIME*1000, 1000, timerTv);
mcatTimer.start(); 
```

Also is there some trick to reading these logcats? I'm sorry but i'm self-teaching.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:50:36.300

Looks like your TextView object is null. Please ensure that you have intialized your TextView before you call the

```
mcatTimer = new McatTimer(GAME_PREFERENCES_ROUNDTIME*1000, 1000, timerTv); 
```

Call this,

```
timerTv=(TextView)findViewById(R.id.textview); 
```

# c - 解释 scanf 中没有空格和 scanf 中有空格有什么区别？

> ID：12704907
> 
> 赞同：3
> 
> 时间：2012-10-03T08:48:21.213
> 
> 标签：c, unix

```
main()
{
    int d,a;
    printf("Enter the digit :");
    scanf("%d",&d);
    printf("Enter another digit :");
    scanf("%d",&a);
} 
```

输出：输入数字：10 输入另一个数字：10

```
main()
{
    int d;
    char a[10];
    printf("Enter the digit :");
    scanf("%d ",&d);
    printf("Enter another digit :");
    scanf("%s ",a);
} 
```

输出：

```
Enter the digit : 10
waiting for stdin 
```

谁能解释和之间的`scanf("%d",&a)`区别`scanf("%d ",&a)`？为什么在`scanf`语句中添加空格会导致它等待标准输入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T08:55:28.060

scanf 格式字符串中的空格匹配*任何*空格字符，不仅是空格，甚至多次匹配，因此如果您按下回车，它就是匹配字符串的一部分。如果你按 Ctl+D 它应该可以工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-03T08:59:44.370

有一个空间`scanf`意味着它会期待一个空间。因此，它等待您进入空间。

# wordpress - 如何使用 mod_rewrite 重写使用 W3 Total Cache 的查询字符串？

> ID：12704908
> 
> 赞同：0
> 
> 时间：2012-10-03T08:48:20.707
> 
> 标签：wordpress, apache, mod-rewrite

我正在使用带有 W3 Total Cache 的 WordPress。W3 Total Cache 设置为使用查询字符串缓存请求，效果很好。

但是，我有几个页面具有非常不同的查询，我仍然希望将它们缓存为一个请求，因为查询字符串仅由页面上的 Javascript 用于根据查询创建动态内容。

所以，假设我有以下要求：

www.site.se/foo/bar/?token=78843743&baz=no

和

www.site.se/foo/bar/?token=87232310&baz=yes

目前，这些请求由 W3TC 单独缓存，因此第二个请求不会命中缓存。

如何使用 mod_rewrite 剥离查询字符串，以便 W3TV 将它们视为一个请求并将它们缓存为一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:38:20.453

因此，您希望在没有查询字符串的情况下代理请求。

这应该可以解决问题。确保 mod_proxy 模块已在 Apache 中加载并处于活动状态。

```
RewriteEngine On
RewriteRule ^/foo/bar/$ /foo/bar/? [P] 
```

光秃秃的？最后应该清除查询字符串。只是不要使用 QSA 标志，你应该没问题。

# java - App URLRewrite 设计方法：在容器级别或应用程序级别重写，为什么？

> ID：12704910
> 
> 赞同：1
> 
> 时间：2012-10-03T08:48:34.350
> 
> 标签：java, tomcat, url-rewriting

我很好奇在 Java 应用程序中进行 URL 重写的最佳方法是什么。假设您有一个名为 test_app 的应用程序，我将它部署在 tomcat 上。

通过 URL 重写我的意思是，我不想通过 host:port/test_app/ 访问应用程序，而是想通过 host:port/fancy_URL_for_test_app/ 访问它。

问题：在哪里进行 URL 重写更好？在 tomcat 容器上，或者通过使用类似于 tukey URLRewriteRule 的东西（意思是在应用程序级别重写）。

在我看来，从设计的角度来看，在 tomcat 级别上重写将是最好的方法，但是我注意到这里有不同的意见，例如[是否有 Tomcat/Java 的 url 重写引擎？](https://stackoverflow.com/questions/950497/is-there-a-url-rewriting-engine-for-tomcat-java).

您能否解释一下为什么选择在应用程序级别而不是容器级别进行重写？

注意：我说的是严格的根上下文重写（即将 host:port/test_app/ 更改为 host:port/fancy_root_context/ 而不是将 host:port/test_app/login1 更改为 host:port/test_app/login2

提前致谢 ！安德烈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:54:18.140

在大多数情况下，Tomcat（或任何其他 Java EE 服务器）之前都有一些东西——比如 nginx、apache 等。我会在那里处理重写。

# apache-flex - 打印作业替代

> ID：12704916
> 
> 赞同：0
> 
> 时间：2012-10-03T08:48:48.220
> 
> 标签：apache-flex, actionscript, air

我们是否有其他类或组件可以替代打印作业类？就像它会捕获 UI/布局然后打印/写入（作为文件/图像）？任何想法或替代方案将不胜感激。谢谢，祝你有美好的一天。

干杯，格伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:20:12.547

AlivePDF (alivepdf.bytearray.org/) 是一个开源库，用于从 actionscript 生成 .pdf 文件。我用它来打印图表和报告非常成功。

# powershell - Set-QADUser：清理 Displayname

> ID：12704917
> 
> 赞同：1
> 
> 时间：2012-10-03T08:48:58.950
> 
> 标签：powershell, active-directory, quest

**你好！**

我的一些用户`lastname firstname`在 AD 中，我想清理它。尝试使用以下代码段：

```
get-QADUser user | Set-QADUser -DisplayName "$($_.FirstName + ' '+$_.LastName)" 
```

但

```
get-QADUser user | select displayname 
```

显示空白`Displayname`

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:07:50.993

以这种方式工作

```
$user = get-QADUser user

Set-QADUser -identity $user -DisplayName ( $($user.firstname) + " " + $($user.lastname) ) 
```

以你的方式，我认为管道不能正常工作。也许尝试做一个`foreach-object`

# google-app-engine - 分面搜索对 GAE 数据存储读取的影响

> ID：12704918
> 
> 赞同：1
> 
> 时间：2012-10-03T08:49:04.147
> 
> 标签：google-app-engine, google-cloud-datastore

假设我有 1000 个实体。我希望用户以这种方式通过分面搜索找到实体：

1.  用户选择过滤器
2.  一个 ajax 请求被发送到 GAE
3.  服务器返回匹配实体的计数
4.  重复直到只有几个实体

换句话说，每个应用的过滤器（只是一个复选框）可能会导致多达 1000 次读取（后续过滤器的成本会更低，因为返回的实体更少）。这意味着每天大约 10 次“搜索”（= 应用多个过滤器）可能会耗尽我所有的 50k 免费阅读配额。

Memcaching 结果并不是一个真正的选择：如果我有 30 个可以应用的过滤器，那么要存储所有组合，就会有 2^30="over abill" 的 memcache 条目（当实体更改时，它们都必须更新首先进行十亿次数据存储读取）。

显然我没有得到任何东西。我将如何有效地缓存或计算结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:33:32.557

不要尝试自己实现这一点 - 使用[Search API](https://developers.google.com/appengine/docs/python/search/)，它专为在这种情况下有效返回结果而设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:44:32.620

如果您只有 1000 个左右的实体，那么根据您所描述的情况，最好的选择是将所有 1000 个实体保留在内存缓存中，并在内存而不是数据存储中运行查询。1000 个实体的内存查询应该非常快。

您可以在存储到 memcache 之前将实体转换为 protobuf。请参阅此[链接](http://blog.notdot.net/2009/9/Efficient-model-memcaching)。

# c# - 使用 SMO 创建分区表的副本

> ID：12704919
> 
> 赞同：0
> 
> 时间：2012-10-03T08:49:09.240
> 
> 标签：c#, sql, sql-server, smo

我正在尝试使用 SMO 复制分区表的副本​​：

```
using (var scope = new TransactionScope()) 
{ 
    var copiedtable = CreateTable(sourcetable);

    createColumns(sourcetable, copiedtable);
    CreateIndexes(sourcetable, copiedtable);
    CreateForeignKeys(sourcetable, copiedtable);

    sourcetable.PartitionScheme = sourcetable.PartitionScheme + "1";

    scope.Complete();
    return copiedtable; 
 } 
```

创建了副本但忽略了分区方案，有没有办法与分区方案对齐？我做事的方式不对吗？我没有收到错误消息或异常代码以静默方式创建分区表的未分区副本。

我想自动化，因为我有数百个表，其中分区与错误的模式对齐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:40:22.577

我找到了一种解决方法，方法是将定义编写到 StringBuilder 中，然后进行查找和替换。

```
 var scriptOptions = new ScriptingOptions
                                {
                                    ClusteredIndexes = true,
                                    Default = true,
                                    FullTextIndexes=true,
                                    Indexes=true,
                                    NonClusteredIndexes = true,
                                    SchemaQualify = true,
                                    DriAllConstraints = true
                                };

        var tableScripts = table.Script(scriptOptions);
        String indexName = null;

        // Adjust to new table name
        sb.Replace(tableName, tableNameNew);

        //
        sb.Replace(partitionName, partitionName + "_New") 
```

# java - 调整 jTable 列大小的图标

> ID：12704921
> 
> 赞同：0
> 
> 时间：2012-10-03T08:49:16.940
> 
> 标签：java, swing, resize, icons, jtable

在我的程序中，可以重新调整 jTable 的列大小。构建 jTable 时，列会自动按长度调整大小。但有时我想更改列的大小，因为当表格打印在纸上时它更具可读性。

可以显示如下图标：![图标](../Images/96d567b1eac3dffc0b7f78deb4447d66.png)。

现在在重新调整列大小时只显示鼠标

有没有人如果这是可能的以及如何做到这一点？

表代码：

```
 private JTable table;
    table = new JTable(model);
    table.setBounds(1, 1, 450, 0);
    JScrollPane scrollPane = new JScrollPane(table);
    panel_10.add(scrollPane);
    JTableHeader tableHeader = table.getTableHeader();
    tableHeader.setResizingAllowed(true); 
```

也许它与我的 DefaultTableModel 有关？

```
 DefaultTableModel model = new DefaultTableModel();

        Statement stmt2 = connection.createStatement();
        ResultSet rs2 = stmt2.executeQuery("SELECT * FROM machinecodes WHERE type = '" + type +"'");

        while(rs2.next()){
       for(int i = 1; i < columns ; i++)
       {
            if(rs2.getString(1+i)==null) break;
            model.addColumn(rs2.getString(1+i));
       }
        }
        }
        else
        {
            for(int i = 1 ; i <= 25 ; i++)
                model.addColumn(i);

        }
        // Fetch each row from the result set
             while (rs.next()) {
                Object[] o = new Object[columns];
            // Get the data from the row using the column index
                for(int i = 0; i < columns ; i++)
            o[i]=rs.getString(i+1);

                            model.insertRow(0, o);
             } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:54:40.143

检索 JTableHeader 并允许调整大小：

```
JTable yourTable;
...
JTableHeader tableHeader = yourTable.getTableHeader();
tableHeader.setResizingAllowed(true); 
```

# quartz-scheduler - 如何使用石英获取表格

> ID：12704924
> 
> 赞同：0
> 
> 时间：2012-10-03T08:49:43.820
> 
> 标签：quartz-scheduler

我正在使用石英和弹簧。在我的主类中，我使用 XML 文件来获取休眠属性，如下所示：

```
String conf[] = {"Config.xml"};
        ClassPathXmlApplicationContext applicationContext= new ClassPathXmlApplicationContext(conf);
        TestProgram unittest=applicationContext.getBean(TestProgram.class);     
        unittest.testMethod(unittest); 
```

在我的工作课程中，我尝试从数据库中检索数据，如下所示：

```
 List<UserMasterVO> userMasterVO=userMasterService.findAll();
 System.out.println("userMasterVO..."+userMasterVO);
 for(int index=0;index<userMasterVO.size();index++)
     System.out.println(userMasterVO.get(index)); 
```

但它会导致空指针异常。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T19:00:14.377

我已经在 stackoverflow 上回答了您的其他问题，这也将解决您的这个问题。 [使用石英的数据检索](https://stackoverflow.com/questions/12707383/data-retrival-using-quartz "使用石英的数据检索")

# mysql - 针对标签上的多对多连接优化 MySQL 查询

> ID：12704931
> 
> 赞同：3
> 
> 时间：2012-10-03T08:50:12.463
> 
> 标签：mysql, sql, query-optimization

我需要选择链接到特定标签的所有文章，但我还希望与每篇文章关联的所有其他标签。凭借我有限的 SQL 知识，我进行了以下 MySQL 查询，该查询有效，但似乎效率不高。

```
SELECT a.id, a.name, c.id AS topic_id, c.name AS topic, GROUP_CONCAT(t.id) AS tag_ids, GROUP_CONCAT(t.name) AS tags, a.description
FROM tag t 
LEFT JOIN artifacts_tags j ON t.id = j.tag_id
LEFT JOIN artifact a ON a.id = j.artifact_id
LEFT JOIN topic c ON c.id = a.topic_id

LEFT JOIN artifacts_tags aj ON a.id = aj.artifact_id
LEFT JOIN tag ts ON ts.id = aj.tag_id
WHERE ts.slug = 'summer'
AND a.is_public = 1 
GROUP BY a.id 
```

如果有人可以提出更有效的查询，我将不胜感激。

实际上，我还需要类似的标签（所有标签都属于带有 slug 'summer' 的标签所属的主题），但我有另一个查询。如果我可以使用相同的查询获得类似的标签会更好，但我不知道如何。该表`tag`与表具有多对一关系`topic`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:05:02.930

**非确定性 GROUP BY：** SQL 检索既不在聚合函数中也不在 GROUP BY 表达式中的列，因此这些值在结果中将是不确定的。

**对不同表进行 GROUP BY：** 这将强制使用临时表和文件排序，这可能是一个巨大的性能问题，并且会消耗大量内存和磁盘上的临时空间。

# python - 如何为 Python 进行重构？

> ID：12704933
> 
> 赞同：1
> 
> 时间：2012-10-03T08:50:21.650
> 
> 标签：python, refactoring

人们在为 Python 进行重构时通常使用哪些工具！？对我来说，要摆脱一个变量，我需要跟踪程序以确保我完全删除它！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:06:09.547

[JetBrain 的 PyCharm](http://www.jetbrains.com/pycharm/)支持 python 重构；netbeans python 模块曾经也有重构，但它不再工作。其他 IDE 也可能有它。

但是请注意，由于 Python 语言的动态特性，python 重构不如 java 重构那么安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:06:54.023

Eclipse+pydev 有一个重构工具。但是一个简单的 ctrl+F 应该足以知道你在哪里使用了变量

# vba - VBA 错误代码 - 800A01A8：需要对象'：'选择

> ID：12704940
> 
> 赞同：1
> 
> 时间：2012-10-03T08:50:39.760
> 
> 标签：vba, excel

运行此 vba 代码时出现此错误。它的语法错误。请帮帮我。这是脚本。脚本所做的是，它将数据从一列复制到另一列并选择复制的列。

```
Set objExcel = CreateObject("Excel.Application")
objExcel.Visible = True

Set objWorkbook = objExcel.Workbooks.Open("C:\Users\pc\Report\report_20120912.xls")
Set ws = objWorkbook.Worksheets("Data")
Set SelRange = objExcel.Selection
ws.Range("F2:F1000").AdvancedFilter 2,,ws.Range("M2"),True

ws.Range("N1") = ws.Range("A1")
ws.Range("O1") = ws.Range("B1")

//Below line has the bug

ws.Range("M2").Select             
selection=objExcel.Selection
col1=selection.End(xlDown)         //showing error on this line      
ws.Range(selection,col1).Select
n = ws.Range.Count
ws.Range("S2").Select 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:17:33.440

我看到您已将问题标记为 Excel/Excel-VBA

如果您在 VBA Excel 中执行此操作，则无需使用`CreateObject`创建另一个 Excel 实例。您也可以使用当前实例

看到这个代码

```
Sub Sample()
    Dim objWorkbook As Workbook, ws As Worksheet

    Set objWorkbook = Workbooks.Open("C:\Users\pc\Report\report_20120912.xls")
    Set ws = objWorkbook.Worksheets("Data")

    With ws
        '
        '~~> Rest of the code
        '
    End With
End Sub 
```

正如我在评论中提到的，将`Selection`/`Select`从你的代码中抛出。它不仅会减慢您的代码速度，还会给您带来运行时错误。请参阅此[链接](https://stackoverflow.com/questions/10714251/excel-macro-avoiding-using-select)。我已经注释了下面的代码，以便您理解它不会有任何问题。:)

你上面的代码也可以写成（*我没有测试过代码*）

```
Option Explicit

Sub Sample()
    Dim objWorkbook As Workbook, ws As Worksheet
    Dim lRow As Long, n As Long
    Dim mRange As Range

    '~~> Open the workbook
    Set objWorkbook = Workbooks.Open("C:\Users\pc\Report\report_20120912.xls")
    '~~> Set the sheet that you want to work with
    Set ws = objWorkbook.Worksheets("Data")

    With ws
        .Range("F2:F1000").AdvancedFilter 2, , .Range("M2"), True

        .Range("N1").Value = .Range("A1").Value
        .Range("O1").Value = .Range("B1").Value

        '~~> Find the last row
        lRow = .Range("M" & .Rows.Count).End(xlUp).Row

        '~~> Set your range
        Set mRange = .Range("M2:M" & lRow)

        n = mRange.Count
    End With
End Sub 
```

如果您注意到您实际上不需要使用`.Select`或使用`Selection`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:57:47.310

`Selection`on 属性`Application`是一个对象，所以你需要使用它`Set`来分配它。改变

```
selection=objExcel.Selection 
```

到

```
Set selection=objExcel.Selection 
```

下一行应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:00:56.560

以下行是可疑的：

```
selection=objExcel.Selection 
```

`selection`可能应该是全局`Selection`属性（的`Application`）。但是你不能分配给它；它是只读的。小写的拼写`s`表示 Excel 在这里混淆了。此外，您需要使用`Set`来分配对象。

# android - 锁屏后更新 UI

> ID：12704943
> 
> 赞同：1
> 
> 时间：2012-10-03T08:50:49.217
> 
> 标签：android, broadcastreceiver, start-activity

我在 BrodcastReceiver 中的 A 活动和 i B 活动中。

```
@Override
    public void onReceive(final Context context, Intent intent) {
        if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
            //start activity

            ((Activity) context).runOnUiThread(new Runnable(){
              public void run(){
                    Intent i = new Intent(context, Pause.class);
                    i.setFlags( Intent.FLAG_ACTIVITY_NEW_TASK
                      | Intent.FLAG_ACTIVITY_CLEAR_TOP
                      | Intent.FLAG_ACTIVITY_SINGLE_TOP);

              context.startActivity(i);

                  }
                });

            wasScreenOn = false;

        } else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {

            wasScreenOn = true;
        }
    } 
```

问题是，当解锁屏幕时，活动 A 在显示活动 B 之前出现一秒钟。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:57:47.340

代码看起来不错。这不是您的应用程序的问题，Android on Screen Unlock 与其他应用程序也有类似的行为。可能这也可能是因为系统可能会在 startActivity 从低功耗状态唤醒后暂停它。因此，您可能希望在更新 UI 时、屏幕关闭期间或屏幕打开后重新访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:59:06.090

如果延迟是由于动画从一个活动过渡到另一个活动，那么您可以简单地将以下标志设置为禁用动画的意图，使您的活动快速可见。

```
Intent.FLAG_ACTIVITY_NO_ANIMATION 
```

如果它仍然无法解决延迟问题，请尝试将可能需要时间处理的活动 B 的代码（如数据库调用）放入`AsyncTask`.

# php - 获取构造类的类名

> ID：12704944
> 
> 赞同：5
> 
> 时间：2012-10-03T08:50:55.660
> 
> 标签：php

> **可能重复：**
> [从扩展类中获取类名](https://stackoverflow.com/questions/1214655/get-class-name-from-extended-class)

假设我有以下内容：

```
class Foo
{
  public $name;

  public __construct()
  {
    $this->name = __CLASS__;
  }
}

class Bar extends Foo
{
}

class FooBar extends Foo
{
}

$bar = new Bar();
echo $bar->name; // will output 'Foo', but I want 'Bar'

$foobar = new FooBar();
echo $foobar->name; // will output 'Foo', but I want 'FooBar' 
```

有没有一种方法可以获取构造类的名称，而无需在扩展类中设置名称，例如在 Foo 类中设置名称？

注意：我有很多从 Foo 派生的类，在每个派生类中设置名称将是很多编码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T08:55:37.620

```
public function __construct() {
    $this->name = get_class($this);
} 
```

[http://php.net/get_class](http://php.net/get_class)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T08:53:52.587

这很容易：只需使用[`get_called_class`](http://php.net/manual/en/function.get-called-class.php)：

```
$this->name = get_called_class(); 
```

这是 PHP 5.3 中引入的后期静态绑定特性的一部分。它指的是被调用的类，而不是定义方法的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:53:45.517

有一个内置的 php 函数来获取类名[get_class()](http://php.net/manual/en/function.get-class.php)

```
$fooBar = new FooBar();
echo get_class($fooBar); //will output FooBar 
```

# c# - 如何提高流程绩效？

> ID：12704947
> 
> 赞同：0
> 
> 时间：2012-10-03T08:50:58.623
> 
> 标签：c#, performance, process

我有一个必须多次执行 sql 脚本的方法。这些脚本用于在数据库上创建表、视图、存储过程和函数。我想出了这段代码，它适用于 100 个文件。

```
foreach (var folder in ActivityConstant.SourceFolders)
{
    var destination = context.GetValue(this.DestinationPath) + folder;

    // TODO: Execute all sql folders instead of each sql file.
    // this is cmd command for %f in (*.sql) do sqlcmd /S <servername> /d <dbname> /E /i "%f"

    foreach (var file in Directory.GetFiles(destination))
    {
        var begin = DateTime.Now;
        context.TrackBuildWarning(string.Format("Start exec sql file at {0}.", 
                                                DateTime.Now));

        Process process = new Process();
        process.StartInfo.UseShellExecute = false;
        process.StartInfo.RedirectStandardOutput = true;
        process.StartInfo.RedirectStandardError = true;
        process.StartInfo.CreateNoWindow = true;
        process.StartInfo.FileName = "sqlcmd.exe";
        process.StartInfo.Arguments = string.Format("-S {0} -d {1} -i {2} -U {3} -P {4}", 
                                                    sqlServerName, 
                                                    databaseName, 
                                                    file, 
                                                    sqlUserName, 
                                                    sqlPassword);
        process.StartInfo.WorkingDirectory = @"C:\";
        process.Start();
        //process.WaitForExit();

        context.TrackBuildWarning(
           string.Format(
                "Finished exec sql file at {0} total time {1} milliseconds.", 
                DateTime.Now, 
                DateTime.Now.Subtract(begin).TotalMilliseconds));
    }
} 
```

现在，我正在继续下一步。我正在使用我们的数据库对其进行测试，该数据库包含大约 600 个文件（表、视图、存储过程和函数），看起来当前代码无法处理这样的大量查询。

据我所知，运行大约 100 个文件需要 3 到 5 分钟。在我写这个问题的时候，这 600 个文件已经用了 40 分钟。

我想知道如何改进我的代码。如果最好使用不同的方式来实现目标，我也欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:57:32.850

您同时启动 600 个进程，这对性能不利，它们可能占用大量 RAM，可能会发生交换？

它还会在您的 SQL 服务器上产生大量负载，也可能是那里的内存问题。

尝试按顺序运行您的查询，或者一次至少只运行几个。

**编辑**
作为旁注，您应该考虑使用[`SqlCommand`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)而不是启动外部进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:58:09.950

我怀疑提高性能的最有用的方法是将实际 SQL 命令的执行转移到应用程序中。

这避免了

*   创建许多进程（600 个，并行？！）
*   重复连接（每个进程至少一个）
*   次优锁争用（由于不确定的执行顺序）

我会考虑将脚本存储为资源，然后在 SqlConnection 上执行。

*在适用时考虑*事务管理。处理此问题的最简单方法是*仍然* 为每个“脚本”***打开一个新连接。***只要您每次使用相同的连接字符串执行此操作，框架就会***自动将连接池化。***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:56:47.660

如果每组文件只有一个数据库 - 您不应该登录每个文件/查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:01:35.093

您可以在执行之前尝试合并文件：

```
 using (var merged = File.OpenWrite("merged.sql"))
        {
            foreach (var file in Directory.GetFiles(destination))
            {
                var data = File.ReadAllBytes(file);
                merged.Write(data, 0, data.Length);
            }
        }
        //continue with "merged.sql" as source file for the sqlcmd 
```

此外，对于这项任务，有多种现有工具，谷歌搜索“数据库部署工具”或类似的工具。

# python-3.x - 二维列表python中的list.count（x）

> ID：12704949
> 
> 赞同：0
> 
> 时间：2012-10-03T08:51:04.427
> 
> 标签：python-3.x

我对 python 很陌生，我试图计算二维数组中有多少 x，但 list.count(x) 给了我 0，但我知道它不是零。

我展示了我所有的代码。这段代码应该做：从文件中读取名称和年龄，获取最大和最小年龄，并在其他文件中打印所有具有相同最大和最小年龄的文件。

```
with open("duomenys.txt") as d: 
   sar = [line.split() for line in d]
max = 0
min = 200

for index, item in enumerate(sar):
    if int(sar[index][1]) > max:
        max = int(sar[index][1])
        pozmax = index

for index, item in enumerate(sar):
    if int(sar[index][1]) < min:
        min = int(sar[index][1])
        pozmin = index

with open('vyr_jaun.txt', 'w') as d: 
    d.write (sar[pozmin][0]+' '+sar[pozmin][1]+'\n')
with open('vyr_jaun.txt', 'a') as d: 
    d.write (sar[pozmax][0]+' '+sar[pozmax][1]) 
```

这只会在文件中写入一个姓名和年龄

我的 duomneys.txt 文件：

```
Justas 23
Mantas 18
Rokas 33
Anzelmute 69
Ruta 11
Vilius 2
Monika 6
Petras 17
Stasys 26
Zose 13
Jurgis 2
Borisas 69 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:08:08.780

（请注意，您在数组中的年龄是字符串。这不是问题。）

```
what = str(9) # whatever you are searching for
count = 0
for name,age in array:
    if age == what:
        count += 1

print("there are",count,"people with the age",what) 
```

# url - 让 TinyMCE 使用完整的图像 url 而不是相对的 (Umbraco 4.0.3)

> ID：12704955
> 
> 赞同：5
> 
> 时间：2012-10-03T08:51:26.750
> 
> 标签：url, tinymce, umbraco

我知道这个问题之前已经被问过（并得到了回答），但没有一个建议的解决方案对我有用。

我在 tinyMceConfig.config 中设置了以下内容：

```
<config key="relative_urls">false</config>

<config key="convert_urls">false</config>

<config key="remove_script_host">false</config> 
```

我在 tinyMCE.init 脚本中包含以下内容：

```
relative_urls : false,
remove_script_host : false,
convert_urls : false, 
```

但是当我尝试插入图像时，它只使用相对 url，当我输入完整的 URL 时，它会修剪它。

这是一个时事通讯，所以我需要有绝对链接。任何其他建议，任何人？

我正在使用 Umbraco v4.0.3 和 Tiny MCE 3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-07T07:04:30.297

您还应该禁用`remove_script_host`. 对我有用的完整配置如下所示：

`relative_urls: false,`

`convert_urls: false,`

`remove_script_host : false,`

# twitter - Twitter Search API，获取搜索字符串的个人资料网址

> ID：12704956
> 
> 赞同：1
> 
> 时间：2012-10-03T08:51:54.487
> 
> 标签：twitter

在搜索查询的响应中，有一些带有“源”键的东西。那是会员的个人资料网址吗？如果没有，我如何获得结果的 Twitter 个人资料 url（来自搜索查询的响应）？

请参阅典型响应中的“源”键：

```
 "profile_image_url":"http://a0.twimg.com/profile_images/1130541908/funcheap_icon_twitter_normal.gif",
   "source":"&lt;a href=&quot;http://dlvr.it&quot; rel=&quot;nofollow&quot;&gt;dlvr.it&lt;/a&gt;",
   "text":"10/8/11: Blue Angels Wine Tasting | Treasure Island http://t.co/fyL8Rs5f", 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:01:59.253

`source`密钥是指向发送推文的 Twitter 客户端的链接。示例：web（网络界面）、Tweetian、Seesmic、Hotot、Echofon、Tweetbot、Plume、TweetDeck、dlvr.it（在您的示例中）、MetroTwit ...

对于个人资料 URL，您只需在 Twitter URL 中添加用户的屏幕名称。例如： @firefox Twitter 用户的[https://twitter.com/firefox](https://twitter.com/firefox)。

# log4j - 这个 log4j 配置有什么问题？

> ID：12704957
> 
> 赞同：1
> 
> 时间：2012-10-03T08:51:55.980
> 
> 标签：log4j

我在启动时没有收到调试消息和此错误消息：

`R log4j:ERROR Improper initialization for the appender named [DATEDFILE].`

这是我的属性

```
log4j.rootLogger=DEBUG, DATEDFILE, CONSOLE

### direct log messages to stdout ###
log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
#log4j.appender.stdout.Target=System.out
log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
log4j.appender.CONSOLE.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

log4j.appender.DATEDFILE=biz.minaret.log4j.DatedFileAppender
log4j.appender.DATEDFILE.layout=org.apache.log4j.PatternLayout
log4j.appender.DATEDFILE.layout.ConversionPattern=%d [%t] %-5p %c - %m%n
log4j.appender.DATEDFILE.Prefix=arendeprocess.
log4j.appender.DATEDFILE.Suffix=.log
log4j.appender.DATEDFILE.Directory=//localhost/WebsphereLog/PandoraArendeWeb/ 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T18:35:24.380

这绝对是 biz.minaret.log4j.DatedFileAppender 类型的附加程序的错误。

我认为您应该检查是否可以写入目录**//localhost/WebsphereLog/PandoraArendeWeb/**。这个目录是创建的吗？也许您需要从路径末尾删除斜杠，如下所示：

```
log4j.appender.DATEDFILE.Directory=//localhost/WebsphereLog/PandoraArendeWeb 
```

甚至像这样使路径相对：

```
log4j.appender.DATEDFILE.Directory=localhost/WebsphereLog/PandoraArendeWeb 
```

# c# - EF4 包装函数从 XML 字段中获取值

> ID：12704960
> 
> 赞同：1
> 
> 时间：2012-10-03T08:52:06.830
> 
> 标签：c#, xml, entity-framework-4

我正在使用 EF4，dotnet 4。我想创建一个 edmx 函数来帮助我从 xml 列 (SQLServer 2008R2) 获取 xml 值。[我的问题与发布在Entity Framework Query Xml](https://stackoverflow.com/questions/1103620/entity-framework-query-xml)上的问题基本相同

我首先在我的 C# 文件中创建函数，如下所示：

```
 [System.Data.Objects.DataClasses.EdmFunction("ModelNamespace", "String_XmlField")]
    public static String XmlField(this String data, String path)
    {
        throw new Exception("Not implemented");
    } 
```

下一部分进入了我的 edmx（正确的 csdl 模式）：

```
 <Function Name="String_XmlField" ReturnType="Edm.String">
      <Parameter Name="data" Type="Edm.String" />
      <Parameter Name="path" Type="Edm.String" />
      <DefiningExpression>
        data.value(path, "nvarchar(max)")
      </DefiningExpression>
    </Function> 
```

我正在尝试像这样使用它：

source = source.Where(x => x.NewData.XmlField("(//IDPat/node())[1]") == "3152");

我得到的错误是：“准备函数'ModelNamespace.String_XmlField'的定义时发生错误。有关详细信息，请参阅内部异常。”，带有消息“'value'不是类型的成员'的内部异常当前加载的模式中的 Edm.String'。靠近简单标识符，第 2 行，第 18 列。

我很确定错误在于原始响应中缺少 edmx 部分，但我找不到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:23:12.197

您似乎已将 T-SQL 命令放入 CSDL。在 CSDL 中，您的数据库被抽象化，而 EF 不“知道”（也不关心）您的后端是什么。DefiningExpression 是 Entity SQL 中的表达式 - [http://msdn.microsoft.com/en-us/library/bb387145.aspx](http://msdn.microsoft.com/en-us/library/bb387145.aspx) - 而不是特定于数据库的任何 SQL 方言。在此级别，字符串类型是来自 EDM 类型系统（表示为 Edm.String）的类型，它不具有函数的 .value 属性。（实际上它没有任何属性或功能）。如果您需要使用 Sql 方言定义的存储特定函数，数据库正在使用您需要将其存储在 SSDL 函数元素中 - [http://msdn.microsoft.com/en-us/library/dd283136(v=VS.90](http://msdn.microsoft.com/en-us/library/dd283136(v=VS.90) )

# c++ - 访问 OpenCV CV_8UC1 cv::Mat 的元素

> ID：12704965
> 
> 赞同：9
> 
> 时间：2012-10-03T08:52:25.887
> 
> 标签：c++, opencv

我有一个 CV_8UC1（8 位单通道图像）类型的 cv::Mat，我想使用以下运算符访问元素`at<>`：`image.at<char>(row, column)`但是，当转换为`int`:时`(int) image.at<char>(row, column)`，某些值会变为负数，例如 255 变为 -1。

这可能是一个愚蠢的问题，但我不知道为什么会发生这种情况，以及将条目转换为`int`.

提前致谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-03T09:40:44.660

您必须指定元素是**unsigned char**，介于 0 和 255 之间，否则它们将是 char（有符号），从 -128 到 127。转换将是这样的：

```
(int) image.at<uchar>(row,column); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T09:08:48.030

在矩阵类型 CV_8 中，**UC** 1 代表无符号字符。

所以，你必须写

```
image.at<unsigned char>(row, column) 
```

# android - 阅读周期性事件 Android 4.0+

> ID：12704966
> 
> 赞同：2
> 
> 时间：2012-10-03T08:52:25.970
> 
> 标签：android, calendar, icalendar, rfc2445

我尝试阅读 ICS 上的重复事件，重复事件的 startTime 没问题，但 endTime 为 0（毫秒）。但仅在重复发生的事件中，持续时间不是“空”的。我在一个测试事件中读到了“ **P9000S** ”的持续时间。它采用 RFC2445 格式，因此它不是单个事件的持续时间，而是从第一个事件到最后一个事件的持续时间。RRULE 给出了我的以下信息：FREQ=MONTHLY;COUNT=3;BYMONTHDAY=3。如何获得单个事件的结束时间？提前非常感谢！这是我的预测：

```
 final String[] projection = new String[]
                { CalendarContract.Events.TITLE, CalendarContract.Events.DTSTART, CalendarContract.Events.DTEND, CalendarContract.Events.RRULE, CalendarContract.Events.ALL_DAY, CalendarContract.Events.DURATION}; 
```

**编辑：**

```
 final String[] projection = new String[]
                { CalendarContract.Events.TITLE, CalendarContract.Events.DTSTART, CalendarContract.Events.DTEND, CalendarContract.Events.DURATION, CalendarContract.Events.ALL_DAY, CalendarContract.Events.RRULE};

                // Construct the query with the desired date range.
                Uri.Builder builder = Instances.CONTENT_URI.buildUpon();
                ContentUris.appendId(builder, now - DateUtils.DAY_IN_MILLIS);
                ContentUris.appendId(builder, now + DateUtils.DAY_IN_MILLIS);

                eventCursor =   getContentResolver().query(
                        builder.build(), projection, Instances.CALENDAR_ID  + " = ?",
                        new String[]{""+calendarID}, CalendarContract.Events.DTEND +" ASC"); 
```

# jmeter - JMeter 输出到事件日志

> ID：12704972
> 
> 赞同：2
> 
> 时间：2012-10-03T08:53:05.283
> 
> 标签：jmeter, performance-testing, splunk

我刚刚开始使用 JMeter 在我们的生产环境中执行一些简单的合成事务，并且我添加了一些侦听器来将测试运行的摘要捕获到 XML 文件中。我现在正在考虑将这些数据导入 Splunk，以便为团队的其他成员提供报告，并且正在寻找最好的方法来做到这一点。

我最初是通过在 Splunk 中对 JMeter 生成的 XML 文件进行索引来完成的，这很有效，并且允许我们生成所需的报告。但是，鉴于此测试计划最终将每分钟执行两次，超过 20 多个框，我希望理想地跳过 XML 文件（它的潜在大小！）并直接将数据导入 Splunk。

有什么替代方案呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:18:51.540

您可以在本地使用 CSV 而不是 XML，请参阅：

*   [http://jmeter.apache.org/usermanual/listeners.html#defaults](http://jmeter.apache.org/usermanual/listeners.html#defaults)

另一种选择是使用 splunk 理解的协议编写自定义侦听器，请参阅：

*   [扩展 JMeter](http://jmeter.apache.org/extending/jmeter_tutorial.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T07:28:57.480

只是为了补充已经提出的建议......

我希望您能以某种方式使用 log4j 或 logback，因为那样您就可以使用[SplunkJavaLogging](http://dev.splunk.com/view/community-projects/SP-CAAAED7)，但看起来 JMeter 不允许您使用日志框架作为侦听器输出。

因此，如果您想通过原始 TCP 或 HTTP REST 将结果直接流式传输到 Splunk，您似乎必须创建一个自定义 JMeter 侦听器。

幸运的是，[我们已经有一个 Splunk Java SDK](http://dev.splunk.com/view/java-sdk/SP-CAAAECN)可以为您处理传输。大量可用的代码示例。

您只需将其包装在 JMeter 侦听器实现中即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:11:19.093

基于“PMD UBIK-INGENIERIE”的回答，您实际上是如何将日志传送到 Splunk 的？

您最好肯定是使用 Splunk 方面的脚本输入，根据您的操作系统，此脚本可以包括 python、Bash、Batch 等。请参阅 Splunk 文档中的以下章节：

[http://docs.splunk.com/Documentation/Splunk/latest/Developer/ScriptedInputsIntro](http://docs.splunk.com/Documentation/Splunk/latest/Developer/ScriptedInputsIntro)

我会说，不知道 JMeter 工具，一种解决方案是让 Splunk 运行一个“包装器”脚本，该脚本调用您选择的 API 查询脚本。然后，您可以让 Splunk 监控该脚本的 STDOUT，或者将其写入文件以供 Splunk 监控。

在部署方面，最好（在可能的情况下）在远程主机上安装 Splunk 转发器（注意：Universal 不包括 python），并让转发器通过安全的 TCP 连接将数据传递给索引器，这将有助于防止数据丢失，因为 Splunk 会在连接丢失的情况下对数据进行排队。

此外，前往 Splunk 的官方论坛[@SplunkBase](http://splunk-base.splunk.com/)可能会很有用。尽管没有任何直接匹配的问题，但那里有许多经验丰富且乐于助人的 Splunker（包括员工、合作伙伴/经销商和客户）。甚至可能有另一个用户在您的场景中索引了 JMeter 数据。

# c# - Visual Studio 2012 RTM，无法调试早于 4.5 的 .Net

> ID：12704979
> 
> 赞同：0
> 
> 时间：2012-10-03T08:53:31.167
> 
> 标签：c#, .net, visual-studio, debugging

我已经从 Microsoft 下载并安装了 RTM 版本的 Visual Studio 2012。如果我在任何应用程序中针对 4.5 以外的任何 .Net 版本，我将无法调试该应用程序。当我按 F5 时，它会显示此对话框：

![在此处输入图像描述](../Images/f1f49dbf8b4f3eb8cbddd38052494b32.png)

如您所见，我在 Windows 8 中使用它。有趣的是，如果我看到此对话框，即使在显示此对话框后将项目更改为目标 .Net 4.5，我也无法调试它。所以基本上我可以调试一个应用程序，只要它设置为 .Net 4.5 并且这个设置从未改变过。

这个问题有什么解决办法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:15:55.347

你有哪个版本的 Visual Studio？Express Edition 与“桌面”项目不兼容，仅与 Metro 风格的应用程序兼容（因此它不仅与 .Net 目标版本相关）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T21:23:02.827

哦，天哪，伙计，我完全有同样的错误！非常令人沮丧！不过，我找到了一种解决方法，这里是：

在你的项目文件夹下，找到其中的“bin”文件夹，进入“debug”文件夹并从那里删除所有内容！执行此操作时必须关闭 VS 2012。

之后调试对我有用。

重复并冲洗您遇到此问题的所有其他项目，并传播消息！

希望能帮助到你。干杯。

# java - 显示当前日期时出错

> ID：12704980
> 
> 赞同：0
> 
> 时间：2012-10-03T08:53:42.680
> 
> 标签：java, android, date

我正在尝试显示当前日期，但在运行此代码后，它会强制关闭应用程序。我尝试使用此示例在 a 中显示日、月和年`TextView`：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:57:18.610

是的，错误是它正在寻找`com.example.test.MainActivity`，而您的活动是`com.example.test.ListingActivity1`。修复您的部署，或更改类名。

*（请注意，这与活动的作用*无关- 它还没有那么远。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:57:57.900

您需要在清单文件中添加您的活动名称

```
 <activity
            android:name="com.example.test.ListActivity1"  <-----
            android:label="@string/app_name"
            >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:58:56.327

您的所有代码都可以接受您错过在 meanifeast.xml 文件中声明您的活动名称。请检查一下。

```
<activity
        android:name="com.example.test.ListActivity1"
   android:label="@string/app_name">
</activity> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:00:07.690

将此添加到您的清单文件中

```
<activity android:name="com.example.test.ListActivity1"
              android:label="ListActivity">
    </activity> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T08:57:26.550

我认为您没有在 Android 清单文件中正确提及活动的名称，请检查清单文件中的类名称。

# iphone - 关于窗口层次结构的警告

> ID：12704984
> 
> 赞同：0
> 
> 时间：2012-10-03T08:54:02.820
> 
> 标签：iphone, objective-c, ios, xcode

我在调试器中有这样的警告，这是什么意思？

`Warning: Attempt to present <RootViewViewController: 0x134ce9c0> on <MovieViewController: 0xa967290> whose view is not in the window hierarchy!`

我还将它`MovieViewController`作为 Storyboard 中的初始视图控制器，我也在使用 ARC。

注意：当我`[super viewDidLoad];`在最低部分的中间添加两个 1时，这不会出现`viewDidLoad`，这是错误的。

这是我的实现`MovieViewController`：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.view.backgroundColor = [UIColor whiteColor];

    NSString *moviePath = [[NSBundle mainBundle] pathForResource:@"gameopening" ofType:@"m4v"];
    self.moviePlayer = [AVPlayer playerWithURL:[NSURL fileURLWithPath:moviePath]];
    [self.moviePlayer play];

    // Create and configure AVPlayerLayer
    AVPlayerLayer *moviePlayerLayer = [AVPlayerLayer playerLayerWithPlayer:self.moviePlayer];
    moviePlayerLayer.bounds = CGRectMake(0, 0, 1024, 768);
    moviePlayerLayer.position = CGPointMake(515,385);
    moviePlayerLayer.borderColor = [UIColor clearColor].CGColor;
    moviePlayerLayer.borderWidth = 3.0;
    moviePlayerLayer.shadowOffset = CGSizeMake(0, 3);
    moviePlayerLayer.shadowOpacity = 0.80;

    // Add perspective transform

    [self.view.layer addSublayer:moviePlayerLayer];    

    [self performSelector:@selector(loadingView) withObject:nil afterDelay:33.0];  
    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapGesture:)];
    tapGesture.numberOfTapsRequired = 1;
    [self.view addGestureRecognizer:tapGesture];

}

- (void)handleTapGesture:(UITapGestureRecognizer *)sender {

    if (sender.state == UIGestureRecognizerStateEnded) {
        UIImageView *loadingView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)]; 
        loadingView.image = [UIImage imageNamed:@"Load.png"];
        [self.view addSubview:loadingView];
        [self performSelector:@selector(mainV) withObject:nil afterDelay:2.0];  
    }

}
-(void)loadingView{

        UIImageView *loadingView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)];  
        loadingView.image = [UIImage imageNamed:@"Load.png"];
        [self.view addSubview:loadingView];
        [self performSelector:@selector(mainV) withObject:nil afterDelay:2.0];  

}
-(void)mainV {

        moviePlayer = nil;
        UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
        UIViewController *vc = [sb instantiateViewControllerWithIdentifier:@"mainViewController"];
        vc.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
        [self presentViewController:vc animated:YES completion:NULL];   
} 
```

帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:01:11.217

当您的 ViewController 加载到内存中时，将调用该`viewDidLoad`方法。`view`但是到那时，`view`还没有出现在屏幕上（所以它还没有被添加为`subview`任何其他的`view`or `window`，也就是它不在视图层次结构中）。

您应该等待视图在屏幕上显示您的`MovieViewController`. 而是将您的代码移动到`viewDidAppear:`方法中`viewDidLoad`，您应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:08:09.807

`viewDidLayoutSubviews`可用于此目的。它早于 viewDidAppear。

# jquery - if ($(function () { }); 是合法代码，为什么不是 $(foo())？

> ID：12704985
> 
> 赞同：1
> 
> 时间：2012-10-03T08:54:04.527
> 
> 标签：jquery

所以，我们都应该知道 jQuery 文档就绪处理程序：

```
$(function () {
  // stuff here
}); 
```

所以基本上，如果函数的第一个参数`$`是一个函数，那么我们在文档启动时运行它，对吗？

那为什么这行不通呢？

```
$(foo()); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T08:56:02.933

当您键入时，`$(foo());`您实际上是在*调用* `foo`并将结果传递给`$`. 如果要`foo`用作回调，则需要键入`$(foo)`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-03T08:55:51.320

因为 foo() 的结果不是函数。

使用：$(foo);

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-03T09:00:42.763

干得好。

```
function foo() {
  return function() {
    console.log("Hello World");
  } 
}

$(foo()); 
```

现在它起作用了。（看看我在那里做了什么？）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T09:03:34.857

**foo 被命名为函数**，它不是匿名的。所以它需要像**$(foo);一样使用。**

看一下这个

[var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T09:05:22.610

首先，您需要知道 的第一个参数`$`不是（总是）一个函数。深入研究 jQuery 源代码时，您会发现调用了这个函数：

```
init: function( selector, context, rootjQuery ) { 
```

它处理以下（按顺序）：

```
// Handle $(""), $(null), or $(undefined)
// Handle $(DOMElement)
// The body element only exists once, optimize finding it
// Handle HTML strings (tags, id's etc.)
// HANDLE: $(function)
// Shortcut for document ready 
```

您的问题是关于最后一部分，其中包含以下代码：

```
// HANDLE: $(function)
// Shortcut for document ready
} else if ( jQuery.isFunction( selector ) ) {
    return rootjQuery.ready( selector );
} 
```

在这里，您将看到 jQuery 检查选​​择器是否为函数。在您的情况下，它不是：您正在**调用**一个函数，而不是实际**传递**一个函数。当 foo 的结果是一个函数时，它可以工作。

您也可以将其更改为：

```
var foo = function() {
   // do your stuff
};

$(foo); 
```

# android - Android App 新密钥库给出了错误配置错误

> ID：12704986
> 
> 赞同：2
> 
> 时间：2012-10-03T08:54:08.880
> 
> 标签：android, facebook, facebook-login

我正在制作一个使用 Facebook 登录可能性的应用程序。

当我测试应用程序时，我使用 debug.keystore 生成密钥哈希，我将其放入 Facebook 上的应用程序配置中，一切正常。但是，现在我想将我的应用程序放到 Google Play 上，我不能使用调试密钥库，所以我自己生成了一个。我重新生成了我的密钥哈希，将其放入 Facebook 上的应用程序配置中，当我将应用程序导出到我的手机以进行最后的测试时，我收到消息说我的应用程序为 Facebook 配置错误。

有什么我忘了做或做错了吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:15:32.283

我辛苦了两天终于得到了解决方案，这是获取哈希键的错误方法**-**

```
keytool -exportcert -alias *<your _alias_name>* -keystore *<key_store_path>* | [openssl_bin_directory]\openssl sha1 -binary | [openssl_bin_directory]\openssl base64 
```

这里描述了**正确**的方法 -

[http://facebook.stackoverflow.com/questions/13281913/app-is-misconfigured-for-facebook-login-with-release-key-hash](http://facebook.stackoverflow.com/questions/13281913/app-is-misconfigured-for-facebook-login-with-release-key-hash)

或在这里

[Facebook Android 生成密钥哈希](https://stackoverflow.com/questions/5306009/facebook-android-generate-key-hash/12405323#12405323)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:53:47.670

话虽如此，我总是发现最简单的事情就是让 Facebook SDK 告诉你哈希键是什么。这要简单得多，不应该超过几分钟。

**第 1 步：**在您的 Facebook SDK 中，找到`Util.java`该类。在那，改变这个：

```
private static boolean ENABLE_LOG = false; 
```

至：

```
private static boolean ENABLE_LOG = true; 
```

**第 2 步：**创建一个新的签名 APK，传输到您的设备并安装。如果已经安装，自然会提示。

**第 3 步：**在您的 DDMS (Logcat) 运行并且您的设备连接到计算机的情况下，运行应用程序并继续寻找密钥不匹配警告。该警告具有实际的哈希键。复制该密钥，转到您的 Facebook 开发人员页面并将新密钥添加到列表中。

归功于 Siddharth Lele

# google-app-engine - 如何从数据存储中仅获取过滤的实体

> ID：12704990
> 
> 赞同：-2
> 
> 时间：2012-10-03T08:54:23.847
> 
> 标签：google-app-engine, datastore

我如何获取整个实体并获得一组过滤的数据，就像我们在 SQLITE DB 中所做的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:41:26.137

听起来您要进行[投影查询](https://developers.google.com/appengine/docs/python/datastore/projectionqueries)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:14:48.717

看看[这个](https://developers.google.com/appengine/docs/python/datastore/queries)如何在`python`. 你通常做的是定义一个`class`包含成员作为属性。

```
class Song(db.Model):
    title = db.StringProperty()
    composer = db.StringProperty()
    date = db.DateTimeProperty() 
```

相当于有一个名为`Song`有字段的表`title`，`composer`并且`date`。

当你这样做时，你可以获得 Song 的所有实例

```
q = Song.all() 
results = q.fetch(limit = 100) 
```

这会将获取的结果数限制为 100。现在过滤如下：

```
q.filter('title =', 'Imagine') 
```

将过滤具有 title 的实体`Imagine`。这样您就可以过滤和排序您的结果。过滤结果后，如果您使用的是 python，则可以在字典模式下访问它们。

```
for song in results:
    print song.title , song.date 
```

您也可以查询`sql way`使用`GqlQuery`类。例如，

```
q = db.GqlQuery("Select * from Song") 
```

看[这个](https://developers.google.com/appengine/docs/java/datastore/queries)看看我们是如何在java中做到这一点的。

# c# - 删除 dll 时出现 System.UnauthorizedAccessException

> ID：12704992
> 
> 赞同：0
> 
> 时间：2012-10-03T08:54:31.423
> 
> 标签：c#, .net, exception

删除我的 .dll 文件时抛出 System.UnauthorizedAccessException。

```
System.IO.File.Delete("file name here.dll"); 
```

错误信息如下：

> System.UnauthorizedAccessException：拒绝访问路径“E:\Projeler\Spa Anahtar Üretici\ConsoleApplication2\bin\Debug\AutoGen.dll”。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:00:49.040

尝试使用 File.Open 方法打开文件并将其包含在 try-catch 中，并出现异常 IOException。

如果文件正在使用中，代码流会到达异常部分，因此不要删除文件，否则您可以安全地删除。

# c# - 如何将大文件写入 SQL Server FILESTREAM？

> ID：12704995
> 
> 赞同：14
> 
> 时间：2012-10-03T08:54:45.187
> 
> 标签：c#, .net, sql-server, stream

我在将大量数据写入 SQL Server 上的 FILESTREAM 列时遇到*问题*。具体来说，大约 1.5-2GB 的小文件可以很好地处理，但是当大小达到 6GB 及以上时，我会在传输结束时出现*间歇性* `IOException`的“句柄无效” 。`.CopyTo()`

我曾考虑以块的形式写入数据，但 SQL Server 在允许将数据附加到该字段之前复制了该字段的支持文件，这完全破坏了大文件的性能。

这是代码：

```
public long AddFragment (string location , string description = null) 
{
    const string sql = 
        @"insert into [Fragment] ([Description],[Data]) " +
            "values (@description,0x); " +
         "select [Id], [Data].PathName(), " +
             "GET_FILESTREAM_TRANSACTION_CONTEXT() " +
         "from " +
             "[Fragment] " +
         "where " +
             "[Id] = SCOPE_IDENTITY();";

    long id;

    using (var scope = new TransactionScope(
        TransactionScopeOption.Required, 
            new TransactionOptions {
                Timeout = TimeSpan.FromDays(1)
            })) 
    {
        using (var connection = new SqlConnection(m_ConnectionString)) 
        {
            connection.Open();

            byte[] serverTx;
            string serverLocation;

            using (var command = new SqlCommand (sql, connection)) 
            {
                command.Parameters.Add("@description", 
                    SqlDbType.NVarChar).Value = description;

                using (var reader = command.ExecuteReader ()) 
                {
                    reader.Read();
                    id = reader.GetSqlInt64(0).Value;
                    serverLocation = reader.GetSqlString (1).Value;
                    serverTx = reader.GetSqlBinary (2).Value;
                }
            }

            using (var source = new FileStream(location, FileMode.Open, 
                FileAccess.Read, FileShare.Read, 4096, 
                FileOptions.SequentialScan))
            using (var target = new SqlFileStream(serverLocation, 
                serverTx, FileAccess.Write))
            {
                source.CopyTo ( target );
            }
        }

        scope.Complete();
    }

    return id;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T23:04:28.210

我建议您在[FileStream](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)类周围使用[BufferedStream](http://msdn.microsoft.com/en-us/library/system.io.bufferedstream.aspx)类。

还要确保在[SqlFileStream](http://msdn.microsoft.com/en-us/library/cc452018.aspx)类上设置[WriteTimeOut](http://msdn.microsoft.com/en-us/library/system.data.sqltypes.sqlfilestream.writetimeout.aspx)属性。

在这里，您可以找到一篇非常好的文章，解释了有关 SqlFileStream 的所有内容[http://www.simple-talk.com/sql/learn-sql-server/an-introduction-to-sql-server-filestream/](http://www.simple-talk.com/sql/learn-sql-server/an-introduction-to-sql-server-filestream/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-31T12:43:48.343

正如一些评论所建议的，问题可能是事务超时。您可以通过运行 SQL Server Profiler 并观察要回滚的事务来验证这一点。

除非另有说明，否则 machine.config 的默认 maxTimeout 为 10 分钟，不能通过代码覆盖。要增加最大超时，请将以下内容添加到 machine.config 的配置设置中

```
<system.transactions>
  <machineSettings maxTimeout="00:30:00" />
</system.transactions> 
```