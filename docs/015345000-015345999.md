# StackOverflow 问答 15345000-15345999

# google-maps-api-3 - 更改缩放控件的颜色 Google map 3

> ID：15345003
> 
> 赞同：2
> 
> 时间：2013-03-11T17:38:26.793
> 
> 标签：google-maps-api-3

我正在寻找有关 Google Map V3 的一些信息。我想改变缩放控件的颜色，我想要红色...

我怎样才能简单地改变颜色？

感谢您的回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:43:18.273

它们是图像，因此您不能简单地“更改”颜色。但是，您可以做的是创建一个没有缩放控件的地图，然后只使用 API 和您自己的 DOM 元素作为缩放控件。

这会给你一个非常粗略的想法：

```
var map = new google.maps.Map();
//zoom out
map.setZoom(map.getZoom()-1);
//zoom in
map.setZoom(map.getZoom()+1); 
```

# asp.net - 评论框而不是文本框？

> ID：15345007
> 
> 赞同：0
> 
> 时间：2013-03-11T17:38:38.393
> 
> 标签：asp.net

我希望用户能够发表评论，也许是几句话。TextBox 没用，但我看不到 asp:CommentBox

关于改用什么的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T17:42:45.040

将属性 TextMode 设置为 MultiLine

作为这个

```
<asp:TextBox ID="Text1" runat="server" TextMode="MultiLine" /> 
```

您可以在 MSDN [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.textmode.aspx上查看更多信息](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.textmode.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:48:25.343

如果您项目的评论部分非常重要，我建议使用第三方来实现这些功能

检查这两个站点

[Disqus](http://disqus.com/)在网络上的任何地方提升讨论。

[livefyre](http://www.livefyre.com/)我们让您的网站具有社交性。

我知道这不能回答你的问题，但我认为你至少应该知道它们的存在。

# r - 如何找到具有最接近其平均值的矩阵的行和列？在 R 中

> ID：15345009
> 
> 赞同：2
> 
> 时间：2013-03-11T17:38:50.230
> 
> 标签：r, matrix, median, mean

我有一个大矩阵，比如这个：

```
NCols=100
NRows=100

myMat<-matrix(runif(NCols*NRows), ncol=NCols) 
```

我有兴趣找到最接近矩阵所有值的平均值或中值的行和列，计算为`mean(myMat)`.

我怎么能做到这一点`R`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T17:40:39.860

尝试这个：

```
set.seed(45) # just for reproducibility
NCols <- 100
NRows <- 100
myMat <- matrix(runif(NCols*NRows), ncol=NCols)

mat_minus_mean <- abs(myMat - mean(myMat))
idx <- which(mat_minus_mean == min(mat_minus_mean), arr.ind = TRUE)
#      row col
# [1,]   5  33

> myMat[idx]
# [1] 0.5012305 # mean(myMat) is 0.5012474 
```

# javascript - 从函数返回一个变量

> ID：15345011
> 
> 赞同：0
> 
> 时间：2013-03-11T17:39:00.297
> 
> 标签：javascript, function

我猜这是一个非常简单的方法（但 JS 不是我最好的朋友，我被困住了......）

我怎样才能返回`rows`值？（这是未定义的......）

```
function myFunction(table){
    html5sql.process(
    ["SELECT * FROM "+table],
    function(transaction, results, rowsArray){
        rows = rowsArray; // rows is defined here
    },
    function(error, statement){
    });
    return rows; // rows is not defined here :(
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T17:45:23.383

你可能无法做到这一点，因为你现在有东西。默认情况下，JS 是异步的，`rows`甚至在任何这些回调运行之前都会返回。由于成功回调是*set* `rows`，因此您将始终返回未设置或过时的值。

（注意：我从未使用过 html5sql。可能是该库只是提供了一个看起来异步的接口，而实际上却以某种方式同步工作。但如果确实如此，那么在这方面就很不寻常了。）

一种可能的解决方法是自己进行回调，一旦获得行，您将调用并将其传递给它们。

```
function myFunction(callback){
    html5sql.process(
    ["SELECT * FROM "+table],
    function(transaction, results, rowsArray){
        callback(rowsArray);
    },
    function(error, statement){
    });
}

// and use it like this
myFunction(function(rows) {
    // do stuff with rows in here
}); 
```

或者，如果您想偷懒，只需将`callback`其用作 的第二个参数。`process`只要知道它将传递所有三个参数，这个函数的调用者不应该关心这些。:P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:40:52.670

`rows`在分配它的值之前声明：

```
function myFunction(){
    var rows;
    html5sql.process(
    ["SELECT * FROM "+table],
    function(transaction, results, rowsArray){
        rows = rowsArray; // rows is defined here
    },
    function(error, statement){
    });
    return rows; // rows is not defined here :(
} 
```

这会改变变量范围，并使其在内部函数外部可见和可访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:40:59.087

微小的变化...

```
function myFunction(){
    var rows;

    html5sql.process(
    ["SELECT * FROM "+table],
    function(transaction, results, rowsArray){
        rows = rowsArray;
    },
    function(error, statement){
    });
    return rows;
} 
```

你得到一个 undefined 因为你还没有真正定义它 - 在函数的开头这样做会使它特定于该范围并且应该正确返回。

# c# - 为什么我必须使用 WCF 而不是 Web 服务？

> ID：15345017
> 
> 赞同：3
> 
> 时间：2013-03-11T17:40:00.960
> 
> 标签：c#, asp.net, .net, wcf, web-services

这是我关于stackoverflow的第一个问题。

我读过很多文章说开发人员应该使用 WCF 而不是 Web 服务，因为它可以托管在不同的托管环境等...

但我想的是，我可以使用 HttpRequest 从任何项目中调用 Web 服务。那么为什么我必须使用 WCF。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:43:57.917

使用 WCF，开箱即用的绑定是`BasicHttpBinding`SOAP，与 .asmx Web 服务相同。作为客户端，您仍然可以以与访问 .asmx 服务完全相同的方式访问它——通过从 WSDL 生成代理，或正常`HttpWebRequest`或您以前使用的任何方式。

好处是您使用 WCF 获得的所有其他选项，例如安全性、不同绑定的可能性、独立托管等等。此外，这是 .NET 社区选择的方向，因此如果您想在基于 .NET 服务的世界中保持相关性，则需要学习它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:44:23.947

WCF 比 ASMX Web 服务要多得多。如果 ASMX Web 服务满足您的需求，那么使用它就可以了，但是您可能会发现使用 WCF 比使用 ASMX Web 服务更容易解决一些问题。您还可以使用 WCF 完成许多使用 ASMX Web 服务无法完成的事情（请记住，它是一个框架，而不仅仅是一种创建 Web 服务的方式）。

创建 WCF 服务而不是 ASMX Web 服务，即使它们用于相同的目的，这似乎增加了复杂性而没有额外的好处，但这是开始学习 WCF 的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:45:59.033

您不必使用 Windows Communication Foundation。它最终将是你的选择。此外，该项目可能有助于满足您的需求。

但是，您使用 Windows Communication Foundation 的主要原因如下：

*   提供跨多个平台的各种通信：HTTP、HTTPS、TCP、MSMQ 等。
*   它提供了额外的安全性。
*   它有更好的序列化和反序列化手段。
*   它提供了更多的代码重用性。
*   不同形式的托管。

这些是一些关键，最重要的是它的设计可以节省开发人员在基于 Web 的通信中的时间。它也是一种为完全敏捷的应用程序带来面向服务的架构的方法。

另一个重要的注意事项是要意识到微软对标准 Web 服务的支持有限。现在他们已经实现了 WCF 技术。

希望这会有所帮助。

# c++ - 调用 lambda 而不将其绑定到标识符

> ID：15345020
> 
> 赞同：7
> 
> 时间：2013-03-11T17:40:08.210
> 
> 标签：c++, c++11, lambda

浏览一些互联网板我遇到了这个小挑战：

> “用你喜欢的语言实现一个递归匿名函数”

显然，使用 std::function/function 指针很容易。

我真正感兴趣的是，如果不将 lambda 绑定到标识符，这是否可行？

类似的东西（忽略明显的无限递归）：

```
[](){ this(); }(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T18:44:47.630

当然，在 C++ 中，要调用*任何*函数，您必须将其绑定到某处的标识符，这仅仅是由于语法限制。但是，如果您接受参数足够未命名，则可以在 C++ 中创建一个 y-combinator 版本，该版本可以很好地递归而无需“命名”。

现在，这真的很难看，因为我不知道如何[为递归 lambda 做 typedef](https://stackoverflow.com/questions/15345529/typedef-for-recursive-lambda)。所以它只是使用了很多演员滥用。但是，它可以工作并打印，`FLY!!`直到由于堆栈溢出而出现段错误。

```
#include <iostream>

typedef void(*f0)();
typedef void(*f)(f0);

int main() {
    [](f x) {
        x((f0)x);
    } ([](f0 x) {
        std::cout<<"FLY!!\n";
        ((f)x)(x);
    });
} 
```

这两个 lambda 表达式是未命名的，因为它们都没有被显式分配给任何地方的名称。第二个 lambda 是真正的主力，它基本上通过使用第一个 lambda 以参数的形式获取对自身的引用来调用自身。

以下是您将如何使用它来做一些“有用的”工作：

```
#include <iostream>

typedef int param_t;
typedef int ret_t;

typedef void(*f0)();
typedef ret_t(*f)(f0, param_t);

int main() {
    /* Compute factorial recursively */
    std::cout << [](f x, param_t y) {
        return x((f0)x, y);
    } ([](f0 x, param_t y) {
        if(y == 0)
            return 1;
        return y*((f)x)(x, y-1);
    }, 10) << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T17:46:16.210

你被允许作弊吗？

```
void f(){
  []{ f(); }();
} 
```

它是递归的——至少是间接的。

否则，不，没有办法在不给它命名的情况下引用 lambda 本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T17:58:24.070

**没有功能/方法的标识符**，是否足够接近！？

```
struct A
{
    void operator()()
    {
        [&]()
        {
            (*this)();
        }();
    }
}; 
```

打电话

```
A{}(); // Thanks MooningDuck 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T19:37:23.880

我似乎想出了自己的解决方案：

```
#include <iostream>

int main()
{
    std::cout<<"Main\n";
    [&](){
        std::cout<<"Hello!\n";
        (&main+13)();
         }();
} 
```

第一次调用 cout 只是为了表明它没有调用 main。

我通过反复试验得出了 13 个偏移量，如果有人能解释为什么它是这个值，那就太好了。

# data-structures - 树遍历 - 从只有父指针的叶子开始？

> ID：15345021
> 
> 赞同：7
> 
> 时间：2013-03-11T17:40:22.063
> 
> 标签：data-structures, tree, abstract-data-type

从概念上讲，是否有可能通过从给定的叶节点（而不是根节点）开始遍历它并使用父指针到达根节点来遍历它的树？

我问这个是因为我看到有人实现了一棵树，他们使用一个数组来保存所有叶节点/外部节点，每个叶/外部节点只指向它们的父节点，而那些父节点指向它们的父节点等，直到你到达没有父母的根节点。因此，它们的实现将要求您从其中一个叶子开始到达树中的任何位置，并且您不能“向下”树，因为她的树节点没有任何子指针，只有父指针。

我发现这个实现很有趣，因为我没有看到任何类似的东西，但我很好奇它是否仍然可以被认为是一棵“树”。我从未见过一棵树，您从叶子而不是根开始遍历。我也从未见过树节点只有父指针而没有子指针的树。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T18:02:33.003

是的，这种结构是存在的。它通常被称为[意大利面条堆栈](http://en.wikipedia.org/wiki/Spaghetti_stack)。

意大利面条堆栈可用于表示“是”关系的一部分。例如，如果您想以一种提高向上转换效率的方式表示类层次结构，那么您可以将类层次结构表示为意大利面条堆栈，其中每种类型的节点都存储指向其父类型的指针。这样，只需从节点向上走，就很容易找到向上转换是否有效。

它们还经常在编译器中用于跟踪范围信息。每个节点代表程序中的一个作用域，每个节点都有一个指针，指向代表其上一级作用域的节点。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:02:35.383

`A`如果给定叶节点数组，则可以进行遍历。如果只给出一个叶子节点，我不知道如何遍历树。伪代码：

```
// initial step 
add all nodes in A to a queue Q  

//removeNode(Q) returns pointer to node at front of Q 
while((node = removeNode(Q)) != NULL) 
    /* do your operation on node */ 
    add node->parent to Q 
```

# php - 如何使用 PHP 使用 javascript 导出 javascript 2D 和面积折线图

> ID：15345022
> 
> 赞同：0
> 
> 时间：2013-03-11T17:40:28.303
> 
> 标签：php, fusioncharts

这是我使用的代码

```
<script type="text/javascript">

                            // this function exports chart from JavaScript
                            function exportChart(exportFormat)
                            {
                                // checks if exportChart function is present and call exportChart function
                                if ( FusionCharts("myChartId3").exportChart )
                                    FusionCharts("myChartId3").exportChart( { "exportFormat" : exportFormat } );
                                else
                                    alert ( "Please wait till the chart completes rendering..." );

                            }

                        </script>
            <input value="Export to JPG" type="button" onClick="JavaScript:exportChart('JPG')" />
                        <input value="Export to PNG" type="button" onClick="JavaScript:exportChart('PNG')" />
                        <input value="Export to PDF" type="button" onClick="JavaScript:exportChart('PDF')" />

<script type="text/javascript">
        var myChart3 = new FusionCharts("FusionCharts/FCF_Line.swf", "myChartId3", "730", "440","0","1"); 
        myChart3.setDataURL("data.php?<?php echo urlencode($url); ?>"); 
       myChart3.render("chartdiv3");    
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:53:55.250

FusionCharts Free 不支持将图表导出为图像/PDF。要将图表导出为图像，请使用 FusionCharts XT 中的 SWF 文件。

下载最新版本：[http ://www.fusioncharts.com/download/trials/](http://www.fusioncharts.com/download/trials/)

# python - 如何为使用 json 的 HTTP 服务制作 API 包装器？

> ID：15345024
> 
> 赞同：0
> 
> 时间：2013-03-11T17:40:37.447
> 
> 标签：python

我想在 python 中为 twitch.tv 制作一个 HTTP 包装器。我该怎么做？我知道如何使用 HTTP GET，仅此而已。我希望它像这样工作：

```
import twichtvwrapper
twich = twichtvwrapper(useragent, username, password).
channel = twich.channel(channelname) 
```

那么所有的 json 属性都会像这样进入这里：

```
 print(channel.game) #this would say the last played game
 print(channel.displayname) #this would print the display name of the channel
 print(cahnnel.link.chat) #this will return the chat link 
```

等等

我将如何制作这个包装？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:53:08.967

`json`您可以使用标准库的模块在 Python 字典和 JSON 字符串之间进行转换。

```
import json

# package a python dict as json
dict0 = {'spam': 'data', 'eggs': 'more data'}
pack = json.dumps(dict0)

# turn it back to a dict
dict1 = json.loads(pack)

>>> print dict1['spam']
data 
```

因此，如果您的程序从 HTTP 请求获得 JSON 响应，只需将其转换为 dict 并使用常规 Python dict 方法完成其余工作。

# wordpress - Wordpress 显示基于 body 类的内容

> ID：15345025
> 
> 赞同：0
> 
> 时间：2013-03-11T17:40:39.643
> 
> 标签：wordpress

我正在使用 Wordpress is_category(); 功能仅在类别页面上显示我的侧边栏，但由于某种原因，每当我向该功能添加某个类别时，侧边栏也开始显示在主页上。我正在尝试寻找另一种方法。所有的分类页面都有一个body类catPage，有没有办法说body有一个catPage类，然后显示这个内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:45:08.553

该[`is_category()`](http://codex.wordpress.org/Conditional_Tags#A_Category_Page)函数（不带任何参数）应`true`仅在类别列表页面上返回，因此*应该可以*工作。

您可以使用[codex 中](http://codex.wordpress.org/Conditional_Tags#Any_Archive_Page)`is_archive()`显示类别等的每个页面都适用的功能：

> 显示任何类型的存档页面时。基于类别、标签、作者和日期的页面是所有类型的档案。

# css - 响应式设计中的第 n 个子“碰撞”/创建流体网格

> ID：15345027
> 
> 赞同：5
> 
> 时间：2013-03-11T17:40:43.817
> 
> 标签：css, responsive-design, fluid-layout, css-selectors

我的网站有一个网格系统，最初设置的样式应用于网格中的每六个项目

```
li:nth-child(5n+1){ margin-left:0 } 
```

我正在使我的网站具有响应性，并且我在其中指定了一个断点

```
li:nth-child(3n+1){ margin-left:0 } 
```

但问题是它仍然在解释以前的 5n+1 样式，这是我不想要的。我如何告诉 CSS 忽略该样式。或者更好的是，我如何创建一个流体网格，以便每当 li 项目是连续的第一个项目时，它的左边距为 0，而所有其他项目的边距为 25px？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-11T19:31:31.130

通过在父元素上使用负边距，您可以在不需要媒体查询的情况下做出响应：

[http://codepen.io/cimmanon/pen/dwbHi](http://codepen.io/cimmanon/pen/dwbHi)

```
.gallery {
  margin: -10px 0 0 -10px;
  overflow: hidden;
}

.gallery img {
    margin: 10px 0 0 10px;
    float: left;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T17:51:45.380

> 在 5n+1 上重置边距的问题是我不确定 5n+1 是否取代 3n+1 或反之亦然 - 因为在第 15 个元素处，这些样式规则会发生冲突。

它们同样具体，因为您一次只处理`:nth-child()`每个规则的一个选择器，因此您需要将 5n+1 规则放在断点中的 3n+1 规则之前，并将边距重置为非零值在您的 5n+1 规则内。这样，3n+1 规则将优先于匹配这两个规则的元素。

没有办法使用 CSS 选择一行中的第一项，因为它不清楚一行中的第一项是什么。如果您知道要使用的确切边距并且您没有太多的断点需要处理，那么这是一个不错的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:01:11.180

尝试：

```
li:nth-child(5n+1):not(:nth-child(3n+1)){ margin-left:0 } 
```

选择器按照`:not`它在锡上所说的做，并且不选择与括号内的选择器匹配的元素。

此外，如果两条规则发生冲突且均无优先级，则将使用 CSS 中最后出现的规则。`li:nth-child(5n+1)`将after`li:nth-child(3n+1)`放在样式表中可能更简单。

编辑：@cimmanon 对您的问题的评论是一种非常好的替代方法。

# rest - 基本身份验证登录错误（406 不可接受）

> ID：15345034
> 
> 赞同：1
> 
> 时间：2013-03-11T17:40:54.557
> 
> 标签：rest, authentication, client, jersey, basic-authentication

在为我的 Jersey REST 服务实现基本身份验证后，我正在使用`HTTPBasicAuthFilter`. 我正在使用 Glassfish 3.1.2 和 NetBeans。

我遵循了[http://javaevangelist.blogspot.pt/2012/07/jax-rs-tip-of-day-basic-client_27.html](http://javaevangelist.blogspot.pt/2012/07/jax-rs-tip-of-day-basic-client_27.html)中编写的代码，只是更改了以下参数：

`erc.setUsernamePassword("blive2", "microio")`- 这是正确的登录

```
private static final String BASE_URI = "http://localhost:8080/LULServices/webresources"

webResource = client.resource(BASE_URI).path("entities.user") 
```

因此，当我运行此文件时，会出现以下消息：

```
 Mar 11, 2013 5:30:38 PM com.sun.jersey.api.client.filter.LoggingFilter log
INFO: 1 * Client out-bound request
1 > GET http://localhost:8080/LULServices/webresources/entities.user
1 > Accept: text/plain
1 > Authorization: Basic YmxpdmUyOm1pY3JvaW8=

Mar 11, 2013 5:30:38 PM com.sun.jersey.api.client.filter.LoggingFilter log
INFO: 1 * Client in-bound response
1 < 406
1 < Date: Mon, 11 Mar 2013 17:30:38 GMT
1 < Content-Length: 1231
1 < Expires: Thu, 01 Jan 1970 01:00:00 GMT
1 < Content-Type: text/html
1 < Server: GlassFish Server Open Source Edition 3.1.2.2
1 < X-Powered-By: Servlet/3.0 JSP/2.2 (GlassFish Server Open Source Edition 3.1.2.2 Java/Oracle Corporation/1.7)
1 < Cache-Control: no-cache
1 < Pragma: No-cache
1 < 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>GlassFish Server Open Source Edition 3.1.2.2 - Error report</title><style type="text/css"><!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}HR {color : #525D76;}--></style> </head><body><h1>HTTP Status 406 - Not Acceptable</h1><hr/><p><b>type</b> Status report</p><p><b>message</b>Not Acceptable</p><p><b>description</b>The resource identified by this request is only capable of generating responses with characteristics not acceptable according to the request "accept" headers (Not Acceptable).</p><hr/><h3>GlassFish Server Open Source Edition 3.1.2.2</h3></body></html>

Exception in thread "main" com.sun.jersey.api.client.UniformInterfaceException: GET http://localhost:8080/LULServices/webresources/entities.user returned a response status of 406 Not Acceptable
    at com.sun.jersey.api.client.WebResource.handle(WebResource.java:686)
    at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)
    at com.sun.jersey.api.client.WebResource$Builder.get(WebResource.java:507)
    at lulClient.BasicAuthenticationClient$ExampleResourceClient.getMessage(BasicAuthenticationClient.java:38)
    at lulClient.BasicAuthenticationClient.main(BasicAuthenticationClient.java:19)
Java Result: 1
BUILD SUCCESSFUL (total time: 1 second) 
```

所以出现的是**406 Not Acceptable**。你能帮我解决吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:33:51.283

问题已经解决了。我向服务询问的信息只是以两种类型返回：APPLICATION_JSON 或 APPLICATION_XML。所以我不得不改变我插入类型的代码部分：

`javax.ws.rs.core.MediaType.APPLICATION_JSON`或`javax.ws.rs.core.MediaType.APPLICATION_XML`。

# xml - XSL 文件存在时 XML 未格式化

> ID：15345036
> 
> 赞同：1
> 
> 时间：2013-03-11T17:41:01.453
> 
> 标签：xml, xslt, xml-formatting

我试图在 Chrome 和 Safari 中都显示这个。我基本上从教程中取出了这两个文件。然而，当它显示它所做的只是显示原始 xml 并且它似乎没有读取 xsl 文件。这两个文件都在同一个目录下。

任何帮助表示赞赏！提前致谢。

```
 <?xml version="1.0" encoding="ISO-8859-1"?>

    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="/">
      <html>
      <body>
      <h2>My CD Collection</h2>
      <table border="1">
        <tr bgcolor="#9acd32">
      <th>Title</th>
      <th>Artist</th>
    </tr>
    <xsl:for-each select="catalog/cd">
    <tr>
      <td><xsl:value-of select="title"/></td>
      <td><xsl:value-of select="artist"/></td>
    </tr>
    </xsl:for-each>
  </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet>

<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="test.xsl"?>
<catalog>
 <cd>
  <title>Empire Burlesque</title>
  <artist>Bob Dylan</artist>
  <country>USA</country>
  <company>Columbia</company>
  <price>10.90</price>
  <year>1985</year>
 </cd>
</catalog> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:18:10.590

样式表：另存为 test.xsl

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<xsl:stylesheet version="1.0"
      xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
      xmlns="http://www.w3.org/1999/xhtml">
  <xsl:output method="html"/>

  <xsl:template match="/">
    <html>
      <body>
        <h2>My CD Collection</h2>
        <table border="1">
          <tr bgcolor="#9acd32">
            <th>Title</th>
            <th>Artist</th>
          </tr>
          <xsl:for-each select="catalog/cd">
            <tr>
              <td>
                <xsl:value-of select="title" />
              </td>
              <td>
                <xsl:value-of select="artist" />
              </td>
            </tr>
          </xsl:for-each>
        </table>
      </body>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

Html 页面：另存为索引。**xhtml**

```
<catalog>
  <cd>
    <title>Empire Burlesque</title>
    <artist>Bob Dylan</artist>
    <country>USA</country>
    <company>Columbia</company>
    <price>10.90</price>
    <year>1985</year>
  </cd>
</catalog> 
```

将两个文件放在同一个文件夹中。

在 IE10 中测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:21:43.460

尝试`xmlns`在 XSL 中添加基本命名空间 ( )：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns="http://www.w3.org/1999/xhtml">
    ...
</xsl:stylesheet> 
```

它在 IE 中以这种方式对我有用，没有它就无法工作。

# android - 我应该使用原生 Android org.json 包来解析 GeoJSON 数据吗？

> ID：15345038
> 
> 赞同：1
> 
> 时间：2013-03-11T17:41:06.540
> 
> 标签：android, json, geojson

如何在 Android 中解析 GeoJSON？[GeoJSON](http://geojson.org/geojson-spec.html)是一种基于 JSON 对各种地理数据结构进行编码的开放格式。GeoJSON 对象可以表示几何、特征或特征集合。

Android 有一个[本机 org.json 包](http://developer.android.com/reference/org/json/package-summary.html)，其中包含一个公共类[JSONTokener](http://developer.android.com/reference/org/json/JSONTokener.html)，它将 JSON（[RFC 4627](http://www.ietf.org/rfc/rfc4627.txt)）编码字符串解析为相应的对象。

由于每个 GeoJSON 数据结构都是一个带有额外内容的 JSON 对象，是否可以使用原生 Android JSON 包来解析 GeoJSON 数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:10:13.860

引用他们的文档

> 完整的 GeoJSON 数据结构始终是一个对象（以 JSON 术语）。在 GeoJSON 中，对象由名称/值对的集合组成——也称为成员。对于每个成员，名称始终是一个字符串。成员值可以是字符串、数字、对象、数组或文字之一：“true”、“false”和“null”。数组由元素组成，其中每个元素都是如上所述的值。

根据该描述，您应该可以轻松解析那些使用本机类的内容。由于格式是标准化的，您可能还希望将 Google gson 作为一个选项。它可以节省您的时间。

# ruby-on-rails - 在 Rails 3 中使用包含空格的自定义变形器生成模型

> ID：15345040
> 
> 赞同：0
> 
> 时间：2013-03-11T17:41:20.970
> 
> 标签：ruby-on-rails, ruby, code-generation

我正在尝试使用生成模型和资源

```
rails g model AreaOfLaw name 
```

这将 area_of_laws 创建为复数版本，但我想要area_of_law。正如[我如何覆盖 Rails 命名约定中所建议的那样？](https://stackoverflow.com/questions/1185035/how-do-i-override-rails-naming-conventions)我已将以下内容添加到 /config/initializers/inflections.rb：

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.irregular 'area of law', 'areas of law'
end 
```

这种自定义变形在运行生成器时不起作用，即使它在 rails 控制台中工作也是如此：

```
"area of law".pluralize
=> "areas of law" 
```

**我怎样才能使这项工作为发电机工作？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:26:40.643

如果你这样做

```
inflect.irregular 'area_of_law', 'areas_of_law' 
```

然后它工作：

```
'AreaOfLaw'.tableize
# => "areas_of_law" 
```

* * *

不过，改为命名模型可能会更好`LawArea`。

# jira - 如何获取用户配置文件的 URI？

> ID：15345041
> 
> 赞同：1
> 
> 时间：2013-03-11T17:41:22.257
> 
> 标签：jira, jira-plugin

我已经设法使用以下代码获取用户头像 URI：

```
URI uri = ComponentAccessor.getAvatarService().getAvatarURL(user, user.getName(), Avatar.Size.SMALL); 
```

它返回：`/jira/secure/useravatar?size=small&amp;avatarId=10122`

我的问题是 - 有没有办法获取用户配置文件的 URI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:02:50.263

用户的个人资料位于`jira.server.com/secure/ViewProfile.jspa?name=john`，所以我猜你可以获取 URI，你可以执行以下操作：

```
user = "john"
user_profile_uri = "/jira/secure/ViewProfile.jspa?name=" + user 
```

**更新**

动态查找 URI：

```
import com.atlassian.jira.ComponentManager
import java.net.URI
uri = new URI(ComponentManager.getInstance().getApplicationProperties().getString("jira.baseurl"))
return user_profile_uri = uri.getPath() + "ViewProfile.jspa?name=" + user 
```

# mysql - 与 MySQL 表的复杂 M:N 关系

> ID：15345046
> 
> 赞同：4
> 
> 时间：2013-03-11T17:41:28.150
> 
> 标签：mysql, sql

我有以下表格：

**表**：新闻
**字段**：uid、title、categories、datetime、hidden、deleted

**表**：categories_mn
**字段**：uid_local、uid_foreign

**表**：类别
**字段**：uid、父类别、名称、图像

每个新闻条目都可以分配到几个不同的类别。

我想要实现的是获取最新的 3 条新闻，并显示该条目分配到的所有类别的图像（并分配了图像）

像这样的东西：

```
title  | catimages           |
------------------------------
Post 7 | cat1.jpg            |
Post 6 |                     |
Post 5 | cat1.jpg,cat3.jpg   |
------------------------------ 
```

到目前为止，这就是我所拥有的：

```
SELECT title, categories
FROM news
WHERE deleted = 0 AND hidden = 0 AND
ORDER BY datetime DESC
LIMIT 3; 
```

我对 SQL 不是很有经验。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:49:41.667

```
select b.title, b.categories, a.image from categories a
inner join news b
on a.uid=b.uid
WHERE b.deleted = 0 and b.hidden = 0
order by a.datetime desc
limit 3; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T17:38:44.673

我认为您不需要新闻表中的类别列。我认为这个查询应该有效：

```
SELECT 
    news.title, 
    categories.image 
FROM 
    news 
    INNER JOIN categories_mn ON news.uid=categories.uid_local 
    INNER JOIN categories ON categories.uid=categories_mn.uid_foreign 
WHERE 
    news.hidden=0 AND news.deleted=0 
ORDER BY 
    datetime DESC 
LIMIT 3 
```

我还将重命名 categories_mn 中的列，以便更清楚哪一列引用哪个表。也许`uid_news`并且`uid_categories`是好名字，也有助于更好地理解 m:n 关系......

# javascript - AngularJS，将这两种方法合二为一

> ID：15345049
> 
> 赞同：1
> 
> 时间：2013-03-11T17:41:51.017
> 
> 标签：javascript, angularjs

我有一个 div

```
<div id="slideHolder" ng-mouseenter="fadeIn()" ng-mouseleave="fadeOut()">
...
</div> 
```

并且中间的内容在 mouseenter/leave 上淡出

```
$scope.fadeIn = function()
{
    TweenLite.to("#zoomInButton",0.3,{opacity:1});  
}

$scope.fadeOut = function()
{
    TweenLite.to("#zoomInButton",0.3,{opacity:0});  
} 
```

是否可以使用 a 将这两个功能合二为一`if statement`？我知道我会怎么做`jQuery`，但不知道怎么做`Angular`。谢谢

编辑：这就是我在 jQuery 中所做的

```
$("#slideHolder").hover(
    function() {
        $("#zoomButton").stop(true,true).fadeIn();
    },
    function() {
        $("#zoomButton").stop(true,true).fadeOut();
    }
); 
```

假设它们在技术上仍然是两个功能，我能够将它们简写为悬停方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:58:40.783

我能够弄清楚这个

```
<div id="slideHolder" ng-mouseenter="fade($event)" ng-mouseleave="fade($event)">
....
</div> 
```

并在角度

```
$scope.fade = function(event)
{
  (event.type == 'mouseover') ? TweenLite.to("#zoomInButton",0.3,{opacity:1}) : TweenLite.to("#zoomInButton",0.3,{opacity:0});  
} 
```

# javascript - JQuery - 将变量的值传递给类的索引值

> ID：15345056
> 
> 赞同：2
> 
> 时间：2013-03-11T17:42:11.327
> 
> 标签：javascript, jquery

我是 js 新手，只学习了大约一周，所以请善待。当单击具有 .thumb 类的链接时，下面的脚本会更改 iframe 的 src 以匹配同一 iframe 的自定义数据属性。

这工作正常，但它目前正在更改所有 iframe 的所有类的 iframe src，其父 div 类为 .gallery。我只想使用与变量“clicked”相同的索引值更改 .gallery 的 iframe src。

```
//When an link with a class of .thumb is clicked

$(document).on('click', '.thumb', function () {

    //variable index is the index of the links parent 'li'
    var clicked = $(this).parent('li').index();

    // Find iFrames of all .comm-gallery elements and alter their src to iframes data-src    value
    $('.gallery').find("iframe").prop("src", function(){

        // Set their src attribute to the value of data-src
        return $(this).data("src");
    });
}); 
```

在过去的几个小时里，我尝试了许多循环解决方案，但都没有奏效，而且由于我目前对 js 知之甚少，我想我是这方面的最低公分母。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:45:11.967

返回data-src前添加条件

```
$('.gallery').find("iframe").prop("src", function(){
if($(this).index() == clicked)
  // Set their src attribute to the value of data-src
   return $(this).data("src");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:46:13.623

jquery eq 选择器是您所追求的：

[http://api.jquery.com/eq-selector/](http://api.jquery.com/eq-selector/)

所以这：

```
$('.gallery').find("iframe").prop("src", function(){

    // Set their src attribute to the value of data-src
    return $(this).data("src");
}); 
```

变成：

```
$('.gallery').find("iframe").eq(clicked).prop("src", function(){

    // Set their src attribute to the value of data-src
    return $(this).data("src");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:00:43.847

您必须选择具有“gallery”css 类的元素，该类具有单击的 li 的索引。

```
$(document).on('click', '.thumb', function () {
var clicked = $(this).parent('li').index();
$('.gallery').eq(clicked).find("iframe").prop("src",function({
return$(this).data("src");
});
}); 
```

# php - php - 不成功的 url RewriteRules、.htaccess 和/或 url 解释设置

> ID：15345058
> 
> 赞同：1
> 
> 时间：2013-03-11T17:42:17.403
> 
> 标签：php, .htaccess, url-rewriting, interpreter

我的问题是我的 .htaccess 和 url 解释设置不成功，我希望能得到帮助，因为我自己无法解决我的问题。

# **我的症状**

1.  当 url 是或时，我的唯一*index.php没有问题*`www.domain.p.ht``www.domain.p.ht/index.php`
2.  如果 url`www.domain.p.ht/yazılar`再次出现，它会按我的预期显示
3.  但是如果 url 是`www.domain.p.ht/iletişim` **OR** `www.domain.p.ht/etiketler`，html 会打印与 url 相同的页面`www.domain.p.ht/yazılar`

    # **我的整个 .htaccess 代码**

    ```
    Options +FollowSymlinks
    RewriteEngine On
    RewriteBase /    

    RewriteRule ^(.*)/$ /$1 [L,R=301]    

    RewriteRule ^yazılar/(.+)/(.+)$ index.php?rd_sayfa=yazilar&rd_ozne=$1&rd_nesne=$2 [L]    

    RewriteRule ^yazılar/(.+)$ index.php?rd_sayfa=yazilar&rd_ozne=$1 [L]
    RewriteRule ^etiketler/(.+)$ index.php?rd_sayfa=etiketler&rd_ozne=$1 [L]    

    RewriteRule ^iletişim$ index.php?rd_sayfa=iletisim [L]
    RewriteRule ^etiketler$ index.php?rd_sayfa=etiketler [L]
    RewriteRule ^yazılar$ index.php?rd_sayfa=yazilar [L]
    RewriteRule ^site-haritası$ index.php?rd_sayfa=site_haritasi [L]
    RewriteRule ^hakkında$ index.php?rd_sayfa=hakkinda [L]
    RewriteRule ^ara$ index.php?rd_sayfa=arama [L]
    RewriteRule ^yorum-doğrula$ index.php?rd_sayfa=yorum_dogrula [L]
    RewriteRule ^eposta-doğrula$ index.php?rd_sayfa=eposta_dogrula [L]
    RewriteRule ^yorumunuz-için-teşekkür-ederim$ index.php?rd_sayfa=yorum_onay [L]
    RewriteRule ^epostanız-için-teşekkür-ederim$ index.php?rd_sayfa=eposta_onay [L] 
    ```

# 我的 php 代码来解释 url 并确定页面标识符变量是`$sayfa`

```
$sayfa = '';

$actual_link = 'http://'.$_SERVER["HTTP_HOST"].$_SERVER["REQUEST_URI"];

if(!empty($_GET)) {$getsayaci = count($_GET);}

$url_check01 = htmlspecialchars($_SERVER['PHP_SELF'], ENT_QUOTES, 'utf-8');
$url_check02 = htmlspecialchars($_SERVER['SCRIPT_NAME'], ENT_QUOTES, 'utf-8');

if (isset($_GET['rd_sayfa']) AND $_GET['rd_sayfa'] != '')
{
    if ($getsayaci == 1)
    {
        if ($_GET['rd_sayfa'] = 'yazılar') {$sayfa = 'yazilar';}
        else if ($_GET['rd_sayfa'] = 'iletişim') {$sayfa = 'iletisim';}
        else if ($_GET['rd_sayfa'] = 'site-haritası') {$sayfa = 'site_haritasi';}
        else if ($_GET['rd_sayfa'] = 'etiketler') {$sayfa = 'etiketler';}
        else if ($_GET['rd_sayfa'] = 'yorum-doğrula') {$sayfa = 'yorum_dogrula';}
        else if ($_GET['rd_sayfa'] = 'eposta-doğrula') {$sayfa = 'eposta_dogrula';}
        else if ($_GET['rd_sayfa'] = 'yorumunuz-için-teşekkür-ederim') {$sayfa = 'yorum_onay';}
        else if ($_GET['rd_sayfa'] = 'epostanız-için-teşekkür-ederim') {$sayfa = 'eposta_onay';}
        else if ($_GET['rd_sayfa'] = 'hakkında') {$sayfa = 'hakkinda';}
        else if ($_GET['rd_sayfa'] = 'ara') {$sayfa = 'arama';}
        else {$sayfa = 'olmayan_sayfa';}
    }

    else if (isset($_GET['rd_ozne']) AND $_GET['rd_ozne'] != '')
    {
        if ($getsayaci == 2)
        {
            if ($_GET['rd_sayfa'] = 'yazılar') {$sayfa = 'yazarin_yazilari';}
            else if ($_GET['rd_sayfa'] = 'etiketler') {$sayfa = 'bir_etiket';}
            else if ($_GET['rd_sayfa'] = 'ara') {$sayfa = 'aranan';}
            else {$sayfa = 'olmayan_sayfa';}
        }

        else if (isset($_GET['rd_nesne']) AND $_GET['rd_nesne'] != '' AND $getsayaci == 3)
        {
            if ($_GET['rd_sayfa'] = 'yazılar') 
            {
                $sayfa = 'spesifik_yazi';
            }
            else
            {
                $sayfa = 'olmayan_sayfa';
            }
        }
        else
        {
            $sayfa = 'olmayan_sayfa';
        }
    }

    else
    {
        $sayfa = 'olmayan_sayfa';
    }
}

else if ($url_check01 == '/index.php' AND $url_check02 == '/index.php' AND ($actual_link = "site1" OR $actual_link = "site2" ))
{
$sayfa = 'anasayfa';
}

else
{
$sayfa = 'olmayan_sayfa';
} 
```

我究竟做错了什么？为什么我有第三个症状？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:57:37.430

我也在使用 .htaccess 来更改 URL 和 ia 使用这样的方法，它对我有用

```
RewriteEngine On
RewriteRule ^(services|testimonialdisclaimer|privacypolicy)\.php$ index.php?page=$1 
```

所以也许你可以这样尝试：

```
RewriteEngine On
RewriteRule ^(iletişim|etiketler|yazılar)$ index.php?rd_sayfa=$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:24:42.827

在 Kabir 回答之后，我更强烈地认为我的`.htaccess`结构是正确的，我的主要问题是对`URL`.

由于 html 总是为不同的链接打印相同的输出，我再次假设我的`$sayfa`值不会根据链接而改变。

4 天后，我注意到我应该使用`==`而不是`=`全部使用，`$_GET['rd_sayfa'] = 'whatever'`因为**单个** `=`操作`$sayfa`while`==`的值只比较值。所以我将它们全部替换为**`$_GET['rd_sayfa'] == 'yazılar'`**，现在我的链接正在工作。

# php - Recaptcha 与 Salesforce Web-To-Lead

> ID：15345063
> 
> 赞同：1
> 
> 时间：2013-03-11T17:42:29.987
> 
> 标签：php, curl, salesforce

我的网站上有一个销售人员网络对潜在客户的表格。一切正常，但没有验证码或任何防止垃圾邮件的方法。所以我下载了recaptcha，进行了所有设置，我还按照[此处](http://malebolgia.shadowsonawall.net/code-programming/captcha-with-salesforce.html/comment-page-1)的说明获取$_POST 数据，验证recaptcha 是否正确，然后将其提交给salesforce。

我得到了所有的设置，但是当我提交表单时，它只是转到我的 check-this-first.php（我称之为contactFormConfirm.php）页面并且只是空白。它不会点击 retURL 或实际提交给 salesforce。

任何可以帮助我摆脱困境的光都将是惊人的。先感谢您。

这是我正在使用的代码：

**Salesforce Web to Lead：**

```
<form action="/contactFormConfirm.php" method="POST">
<input type=hidden name="oid" value="#############">
<input type=hidden name="retURL" value="http://www.google.com">
<div class="row span12 pull-left">
<div class="span6 pull-left">
    <label for="first_name" class="span3">First Name</label>
    <input  id="first_name" maxlength="40" name="first_name" size="20" type="text" class="span9" />
</div>
<div class="span6 pull-left">
    <label for="last_name" class="span3">Last Name</label>
    <input  id="last_name" maxlength="80" name="last_name" size="20" type="text" class="span9" /><br>
</div>
</div>
<div class="clearfix"></div>
<div class="row span12 pull-left">
<div class="span6 pull-left">
    <label for="title" class="span3">Title</label>
    <input  id="title" maxlength="40" name="title" size="20" type="text" class="span9" /><br>
</div>
<div class="span6 pull-left">
    <label for="email" class="span3">Email</label>
    <input  id="email" maxlength="80" name="email" size="20" type="text" class="span9" /><br>
</div>
</div>
<div class="clearfix"></div>
<div class="row span12 pull-left">
<div class="span6 pull-left">
    <label for="phone" class="span3">Phone</label>
    <input  id="phone" maxlength="40" name="phone" size="20" type="text" class="span9" /><br>
</div>
<div class="span6 pull-left">
    <label for="00N4000000231ne" class="span3" style="position:relative; top:-1.2em;">Profile:</label>
    <select  id="profile" name="00N4000000231ne" title="Profile" class="span9">    <option value="">--None--</option>
**[other options hidden for privacy]**
    </select>
</div>
</div>
<div class="clearfix"></div>
<div class="row span12 pull-left">
<div class="span6 pull-left">
    <label for="company" class="span3">Company</label>
    <input  id="company" maxlength="40" name="company" size="20" type="text" class="span9" /><br>
</div>
<div class="span6 pull-left">
    <label for="country" class="span3">Country</label>
    <input  id="country" maxlength="40" name="country" size="20" type="text" class="span9" /><br>
</div>
</div>
<div class="row span12 pull-left">
<div class="span6 pull-left">
    <label for="street" class="span3">Address</label>
    <textarea name="street" class="span9"></textarea><br>
</div>
<div class="span6 pull-left">
    <label for="city" class="span3">City</label>
    <input  id="city" maxlength="40" name="city" size="20" type="text" class="span9" /><br>
</div>
</div>
<div class="clearfix"></div>
<div class="row span12 pull-left">
<div class="span6 pull-left">
    <label for="state" class="span3" style="position:relative; top:-1.2em;">State / Province</label>
    <input  id="state" maxlength="20" name="state" size="20" type="text" class="span9" /><br>
</div>
<div class="span6 pull-left">
    <label for="zip" class="span3">Zip</label>
    <input  id="zip" maxlength="20" name="zip" size="20" type="text" class="span9" /><br>
</div>
</div>
<div class="clearfix"></div>
<div class="row span12 pull-left">
<div class="span6 pull-left">
    <label for="00N40000001V9wA" class="span3" style="position:relative; top:-1.2em;">Product Interest:</label>
    <select  id="productInterest" multiple="multiple" name="00N40000001V9wA" title="Product Interest" class="span9" size="5">
        <option value="API">API</option>
        **[other options hidden for privacy]**
    </select><br>
</div>
    <div class="span6 pull-left">
    <label for="00N40000001V8Yl" class="span3" style="position:relative; top:-1.2em;">Background Notes:</label>
    <textarea  id="notes" name="00N40000001V8Yl" type="text" wrap="soft" class="span9"></textarea><br>
</div>
</div>
<div class="clearfix"><br /></div>
<div class="span12 offset3">
<div class="span10 pull-right">
    <label for="lead_source" class="span8 pull-left">Check here to be contacted by *** for a demonstration.</label>
    <input id="demonstration" type="checkbox" name="lead_source" class="span1 pull-left" value="Web w/Demo Request"></input>
</div>
<div class="span10 pull-right">
    <label for="00N400000023QE0" class="span8 pull-left">Check here if you have a timeline for this project.</label>
    <input id="timeline" type="checkbox" name="00N400000023QE0" class="span1 pull-left" value="Confirmed"></input>
</div>
<div class="span10 pull-right">
    <label for="00N400000023QE5" class="span8 pull-left">Check here if you have purchase authority for this project.</label>
    <input id="purchaseAuthority" type="checkbox" name="00N400000023QE5" class="span1 pull-left" value="Confirmed"></input>
</div>
</div>
<div class="clearfix"><br /></div>
<div class="row-fluid">
<div class="span9 pull-right offset2">
    <div class="span8">
        <?php
            require_once('recaptcha/recaptchalib.php');
            $publickey = "xxxxxxxxxxxxx"; // you got this from the signup page
            echo recaptcha_get_html($publickey);
        ?><br />
    </div>
</div>
</div>
<input type="hidden" name="lead_source" value="Web" />
<input type="hidden" name="00N4000000231kf" value="Web Inquiry" />
<div class="span10 offset1 pull-right">
<input type="submit" name="ctl00$ctl00$MainContent$mainContentHolder$btnSubmit" value="Submit Inquiry" class="btn btn-primary span3 pull-right" />
</div>
</form> 
```

**这是带有 php cURL 代码的 contactFormConfirm.php 代码：**

```
<?php

ob_start();
session_start();

include_once('[path-to]/recaptcha/recaptchalib.php');

     //Recaptcha Settings
   $publickey = "xxxxxxxxx"; // you got this from the signup page
   $privatekey = "xxxxxxxxx";

//curl method posting
//extract data from the post
  extract($_POST);

    if (isset($submit)){

    $ok = 1;

     $resp = recaptcha_check_answer ($privatekey,
                            $_SERVER["REMOTE_ADDR"],
                            $_POST["recaptcha_challenge_field"],
                            $_POST["recaptcha_response_field"]);

     if (!$resp->is_valid) {
          $ok = 0;
        }

if ($ok){       
    //set POST variables
    $url = 'https://www.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8';
    $fields = array(
                'oid'=>urlencode($oid),
                'retURL'=>urlencode($retURL),
                'first_name'=>urlencode($first_name),
                'last_name'=>urlencode($last_name),
                'title'=>urlencode($title),
                'email'=>urlencode($email),
                'phone'=>urlencode($phone),
                '00N4000000231ne'=>urlencode($profile),
                'company'=>urlencode($company),
                'country'=>urlencode($country),
                'address'=>urlencode($address),
                'city'=>urlencode($city),
                'state'=>urlencode($state),
                'zip'=>urlencode($zip),
                '00N40000001V9wA'=>urlencode($productInterest),
                '00N40000001V8Yl'=>urlencode($notes),
                'lead_source'=>urlencode($demonstration),
                '00N400000023QE0'=>urlencode($timeline),
                '00N400000023QE5'=>urlencode($purchaseAuthority)
            );

    //url-ify the data for the POST
    foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
    rtrim($fields_string,'&');

    //print_r($fields_string);

    //open connection
    $ch = curl_init();

    //set the url, number of POST vars, POST data
    curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt($ch,CURLOPT_POST,count($fields));
    curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);

    //execute post
    $result = curl_exec($ch);

    //close connection
    curl_close($ch);

} //if ok
else {
          echo "<h4>Sorry - Invalid Captcha </h4>";
        }   

 } //if submit.
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:37:53.583

经过几个小时的工作，我和另一位工作中的开发人员能够使用上述解决方案（种类）解决这个问题。

**以下是它是如何崩溃的：**

```
<script type="text/javascript">
 var RecaptchaOptions = {
theme : 'clean'
 };
 </script>
<form action="/contactFormConfirm.php" method="POST" >
<input type=hidden name="oid" value="#########">
<input type=hidden name="retURL" value="http://www.website.com/thank-you/">
<div class="row span12 pull-left">
<div class="span6 pull-left">
    <label for="first_name" class="span3">First Name</label>
    <input  id="first_name" maxlength="40" name="first_name" size="20" type="text" class="span9" />
</div>
<div class="span6 pull-left">
    <label for="last_name" class="span3">Last Name</label>
    <input  id="last_name" maxlength="80" name="last_name" size="20" type="text" class="span9" /><br>
</div>
</div>
<div class="clearfix"></div>
<div class="row span12 pull-left">
<div class="span6 pull-left">
    <label for="title" class="span3">Title</label>
    <input  id="title" maxlength="40" name="title" size="20" type="text" class="span9" /><br>
</div>
<div class="span6 pull-left">
    <label for="email" class="span3">Email</label>
    <input  id="email" maxlength="80" name="email" size="20" type="text" class="span9" /><br>
</div>
</div>
<div class="clearfix"></div>
<div class="row span12 pull-left">
<div class="span6 pull-left">
    <label for="phone" class="span3">Phone</label>
    <input  id="phone" maxlength="40" name="phone" size="20" type="text" class="span9" /><br>
</div>
<div class="span6 pull-left">
    <label for="profile" class="span3" style="position:relative; top:-1.2em;">Profile:</label>
    <select  id="profile" name="profile" title="OverDrive Profile" class="span9">
        <option value="">--None--</option>
    </select>
</div>
</div>
<div class="clearfix"></div>
<div class="row span12 pull-left">
<div class="span6 pull-left">
    <label for="company" class="span3">Company</label>
    <input  id="company" maxlength="40" name="company" size="20" type="text" class="span9" /><br>
</div>
<div class="span6 pull-left">
    <label for="country" class="span3">Country</label>
    <input  id="country" maxlength="40" name="country" size="20" type="text" class="span9" /><br>
</div>
</div>
<div class="row span12 pull-left">
<div class="span6 pull-left">
    <label for="street" class="span3">Address</label>
    <textarea name="street" class="span9"></textarea><br>
</div>
<div class="span6 pull-left">
    <label for="city" class="span3">City</label>
    <input  id="city" maxlength="40" name="city" size="20" type="text" class="span9" /><br>
</div>
</div>
<div class="clearfix"></div>
<div class="row span12 pull-left">
<div class="span6 pull-left">
    <label for="state" class="span3" style="position:relative; top:-1.2em;">State / Province</label>
    <input  id="state" maxlength="20" name="state" size="20" type="text" class="span9" /><br>
</div>
<div class="span6 pull-left">
    <label for="zip" class="span3">Zip</label>
    <input  id="zip" maxlength="20" name="zip" size="20" type="text" class="span9" /><br>
</div>
</div>
<div class="clearfix"></div>
<div class="row span12 pull-left">
<div class="span6 pull-left">
    <label for="productInterest" class="span3" style="position:relative; top:-1.2em;">Product Interest:</label>
    <select  id="productInterest" multiple="multiple" name="productInterest" title="Product Interest" class="span9" size="5">
        <option value="API">API</option>
    </select><br>
</div>
    <div class="span6 pull-left">
    <label for="notes" class="span3" style="position:relative; top:-1.2em;">Background Notes:</label>
    <textarea  id="notes" name="notes" type="text" wrap="soft" class="span9"></textarea><br>
</div>
</div>
<div class="clearfix"><br /></div>
<div class="span12 offset3">
<div class="span10 pull-right">
    <label for="lead_source" class="span8 pull-left">Check here to be contacted for a demonstration.</label>
    <input id="lead_source" type="checkbox" name="lead_source" class="span1 pull-left" value="Web w/Demo Request"></input>
</div>
<div class="span10 pull-right">
    <label for="timeline" class="span8 pull-left">Check here if you have a timeline for this project.</label>
    <input id="timeline" type="checkbox" name="timeline" class="span1 pull-left" value="Confirmed"></input>
</div>
<div class="span10 pull-right">
    <label for="purchaseAuthority" class="span8 pull-left">Check here if you have purchase authority for this project.</label>
    <input id="purchaseAuthority" type="checkbox" name="purchaseAuthority" class="span1 pull-left" value="Confirmed"></input>
</div>
</div>
<div class="clearfix"><br /></div>
<div class="row-fluid">
<div class="span9 pull-right offset2">
    <div class="span8">
        <?php
            require_once('recaptcha/recaptchalib.php');
            $publickey = "xxxxxxxxxxxxxxxxxxxxxxxxxxxx"; // you got this from the signup page
            echo recaptcha_get_html($publickey);
        ?><br />
    </div>
</div>
</div>
<div class="span10 offset1 pull-right">
<input type="submit" name="submit" value="Submit Inquiry" class="btn btn-primary span3 pull-right" />
</div>
</form> 
```

**这是contactFormConfirm文件：**

```
<?php

ob_start();
session_start();

include_once('path-to/recaptcha/recaptchalib.php');

     //Recaptcha Settings
   $publickey = "xxxxxxxxxxxxxxxxxxxxxxxxx"; // you got this from the signup page
   $privatekey = "xxxxxxxxxxxxxxxxxxxxxxxx";

//curl method posting
//extract data from the post
  extract($_POST);

    if ($submit == 'Submit Inquiry'){

    $ok = 1;

     $resp = recaptcha_check_answer ($privatekey,
                            $_SERVER["REMOTE_ADDR"],
                            $_POST["recaptcha_challenge_field"],
                            $_POST["recaptcha_response_field"]);

     if (!$resp->is_valid) {
          $ok = 0;
        }

if ($ok){       
    //set POST variables
    $url = 'salesforce URL';

    $fields = array(
                'oid'=>urlencode($oid),
                'retURL'=>urlencode($retURL),
                'first_name'=>urlencode($first_name),
                'last_name'=>urlencode($last_name),
                'title'=>urlencode($title),
                'email'=>urlencode($email),
                'phone'=>urlencode($phone),
                'XXXXXXXXXXXXXXXX'=>urlencode($profile),
                'company'=>urlencode($company),
                'country'=>urlencode($country),
                'address'=>urlencode($street),
                'city'=>urlencode($city),
                'state'=>urlencode($state),
                'zip'=>urlencode($zip),
                'XXXXXXXXXXXXXXXX'=>urlencode($productInterest),
                'XXXXXXXXXXXXXXXX'=>urlencode($notes)
                );
                // replace XXXXXX with custom field ID

    // send default "lead source" value if it is not passed in the HTML form
    if (isset($lead_source))
    {
        $fields['XXXXXXXXXXXXXXXXX'] = urlencode('Web w/Demo Request');
    }
    else
    {
        $fields['XXXXXXXXXXXXXXXXX'] = urlencode('Web');
    }

    // add values to array if they are passed in via the HTML form
    if (isset($timeline))
    {
        $fields['XXXXXXXXXXXXXXXXX'] = urlencode($timeline);
    }

    if (isset($purchaseAuthority))
    {
        $fields['XXXXXXXXXXXXXXXX'] = urlencode($purchaseAuthority);
    }

    // add constant fields
    $fields['XXXXXXXXXXXXXXX'] = urlencode('Web Inquiry');
    $fields['recordType'] = urlencode('XXXXXXXXXXXXXXX');

    //url-ify the data for the POST
    $fields_string = '';
    foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
    $fields_string = substr($fields_string, 0, -1); // delete last &
    rtrim($fields_string,'&');

    //print_r($fields_string);

    //open connection
    $ch = curl_init();

    //set the url, number of POST vars, POST data
    curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt($ch,CURLOPT_POST,count($fields));
    curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);

    //execute post
    $result = curl_exec($ch);

    //close connection
    curl_close($ch);

} //if ok
else {
          echo "<h4>Sorry - Invalid Captcha </h4>";
        }   

 } //if submit.
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-10T17:45:45.450

我知道这是一个旧线程，但我在尝试做同样的事情时遇到了它并想出了这个解决方案：

```
<?php
ob_start();
session_start();

require_once('recaptchalib.php');

$key_public = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx';
$key_private = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx';

$captchaFailed = false;
$response = null;
$reCaptcha = new ReCaptcha($key_private);

if (!function_exists('curl_version')) {
    die('Curl package missing.');
}

if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    if (isset($_POST['g-recaptcha-response'])) {
        $response = $reCaptcha->verifyResponse(
            $_SERVER['REMOTE_ADDR'],
            $_POST['g-recaptcha-response']
        );

        if ($response !== null) {
            if ($response->success) {
                $fields = $_POST;
                $sendURL = $fields['sendURL'];

                unset($fields['sendURL']);
                unset($fields['g-recaptcha-response']);

                $fields_string = http_build_query($fields);

                $ch = curl_init();

                curl_setopt($ch, CURLOPT_URL, $sendURL);
                curl_setopt($ch, CURLOPT_POST, 1);
                curl_setopt($ch, CURLOPT_POSTFIELDS, $fields_string);

                $result = curl_exec($ch);

                curl_close($ch);
            } else {
                $captchaFailed = true;
            }
        } else {
            $captchaFailed = true;
        }
    } else {
        $captchaFailed = true;
    }
}

if ($captchaFailed && count(get_included_files()) < 3) {
    echo 'reCAPTCHA failed! Please go back and try again.';
}
?> 
```

您将需要创建一个隐藏的输入字段，该字段`sendURL`使用您要将表单发送到的 URL 的值调用。

您可以使用上面的代码将表单的操作设置为文件，也可以将其与表单一起包含在页面顶部并将操作留空。

将其全部包含在同一页面中的示例可能如下所示：

```
<?php require_once('form-submit.php'); ?>
<html>
<body>
    <form method="post">
        <input type="hidden" name="sendURL" value="https://login.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8&...">

        <label for="name">Name:</label>
        <input type="text" name="name" value="<?php if (!empty($_POST['name'])) { echo $_POST['name']; } ?>">

        <label for="email">E-Mail:</label>
        <input type="text" name="email" value="<?php if (!empty($_POST['email'])) { echo $_POST['email']; } ?>">

        <label for="message">Message:</label>
        <textarea name="message"><?php if (!empty($_POST['message'])) { echo $_POST['message']; } ?></textarea>

        <?php if ($captchaFailed): ?>
            <p>reCAPTCHA failed! Please try again!</p>
        <?php endif; ?>
        <div class="g-recaptcha" data-sitekey="<?php echo $key_public; ?>"></div>
    </form>

    <script src="https://www.google.com/recaptcha/api.js"></script>
</body>
</html> 
```

您几乎可以将它用于任何需要在将表单数据发送到其他地方之前验证 reCAPTCHA 的情况。

# python - 遍历字典值，分配给变量

> ID：15345065
> 
> 赞同：-1
> 
> 时间：2013-03-11T17:42:31.187
> 
> 标签：python, python-2.7, shodan

我正在尝试遍历导入的 .csv 文件并将列中的每个值分配给变量。想法是使用该变量对 Shodan API 进行搜索，将搜索结果打印到屏幕上，然后移动到列中下一行的值，将其分配给变量，进行搜索，等等上。

这是我从迄今为止发现的东西中拼凑出来的东西......

```
import csv

# Initialize the API
from shodan import WebAPI
api = WebAPI("My Shodan Key")

# Open csv file

with open('C:\pythonfiles\sccm.csv', 'rb') as reader:
    sccmtable = csv.reader(reader, delimiter=';')
    #for row in sccmtable:
    #print ', '.join(row)

for row in sccmtable:
    for value in row:
        edbresults = api.exploitdb.search(value)
        print (edbresults) 
```

似乎这是正确的开始，因为我可以将新导入的 csv 的内容打印到屏幕上，但我不确定下一步如何进行。任何帮助是极大的赞赏。

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:54:06.553

为了单独搜索每行中的每个值，请执行以下操作：

```
for row in reader:
    for value in row:
        edbresults = api.exploitdb.search(value)
        print (edbresults) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:19:19.357

关于您的第二个问题，当您的`with`陈述超出范围时，您的文件将被关闭。您需要在范围内阅读其内容。只需缩进。

```
with open('C:\pythonfiles\sccm.csv', 'rb') as reader:
    sccmtable = csv.reader(reader, delimiter=';')
    #for row in sccmtable:
    #print ', '.join(row)

    for row in sccmtable:
        for value in row:
            edbresults = api.exploitdb.search(value)
            print (edbresults) 
```

# php - 多行正则表达式不起作用

> ID：15345066
> 
> 赞同：0
> 
> 时间：2013-03-11T17:42:33.737
> 
> 标签：php, regex

我正在尝试`/story.php?title=googlegoogle-google-google`从字符串中获取`$cool`。获得它的唯一方法是使用多行正则表达式。我尝试了下面的代码，但没有奏效。谁能帮我这个？

```
<?php 

    $cool ='<li><span class="sidebar-vote-number"><a href="/story.php?title=gamestarts now">1</a></span><span class="sidebar-article"><a href="/story.php?title=googlegoogle-google-google" class="switchurl">GoogleGoogle Google Google</a></span></li>

        Published News</a></div>
        </div>
        <div class="boxcontent">
            <ul class="sidebar-stories">

        <li><span class="sidebar-vote-number"><a href="/story.php?title=googlegoogle-google-google">1</a></span><span class="sidebar-article"><a href="/story.php?title=googlegoogle-google-google" class="switchurl">GoogleGoogle Google Google</a></span></li>';

    preg_match('/Published News<\/a><\/div>
        <\/div>
        <div class="boxcontent">
            <ul class="sidebar-stories">

        <li><span class="sidebar-vote-number"><a href="(.*?)"/msU', $cool, $match);

    echo $match[1];

        ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:48:02.153

出什么问题了

```
preg_match('~Published News.*<li><span class="sidebar-vote-number"><a href="([^"]*)~ms', $cool, $match); 
```

? 确保使用正确的变量`$cool`！

**你肯定知道什么？哪个图案？**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:47:13.417

“获得它的唯一方法是使用多行正则表达式。” 哦，不，不是。

除此之外，您将数据分配给一个名为 $cool 的变量，但您将一个名为 $game 的变量传递给 preg_match() 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:52:59.713

```
 preg_match('/Published News<\/a><\/div>
        <\/div>
        <div class="boxcontent">
            <ul class="sidebar-stories">

        <li><span class="sidebar-vote-number"><a href="(.*)">/msU', $cool, $match); 
```

有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T18:10:03.397

如果你的 HTML 字符串是半格式的，你可以使用 Xpath。[http://codepad.org/vVBFNY7r](http://codepad.org/vVBFNY7r)

```
<?php
$cool ='<ul><li>
<span class="sidebar-vote-number"><a href="/story.php?title=gamestarts now">1</a></span>
<span class="sidebar-article"><a href="/story.php?title=googlegoogle-google-google" class="switchurl">GoogleGoogle Google Google</a></span>
</li></ul>';
$dom = new DOMDocument();
$dom->loadHTML($cool);

$xpath = new DOMXPath($dom);
$elements= $xpath->query('//a/@href');

if (!is_null($elements)) {
  foreach ($elements as $element) {
    echo "<br/>[". $element->nodeName. "]";

    $nodes = $element->childNodes;
    foreach ($nodes as $node) {
      echo $node->nodeValue. "\n";
    }
  }
} 
```

输出：

```
<br/>[href]/story.php?title=gamestarts now
<br/>[href]/story.php?title=googlegoogle-google-google 
```

# django - 向 Mezzanine 博文添加字段

> ID：15345067
> 
> 赞同：0
> 
> 时间：2013-03-11T17:42:37.760
> 
> 标签：django, mezzanine

我正在将夹层用于一个项目。我需要在 Mezzanine 博文中添加一个额外的字段。

我注意到使用 EXTRA_MODEL_FIELDS 可以做到这一点，但它看起来很复杂。

我也尝试将博客文件夹从站点包复制到我的项目路径，然后修改models.py。但我不工作。

我是 Django 新手，有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:22:38.963

```
通过做一些研究，现在我得到了答案：
1.将博客应用程序从站点包复制到我的项目
2.更改我的设置.py
   INSTALLED_APPS = (
    "blog", #它是 "mezzanine.blog",
    ......
3.修改blog/models.py
   将以下行添加到类 BlogPost
    shop_url=models.CharField(max_length=250,null=True, blank=True)
4.迁移表（南装）
  ./manage.py 架构迁移博客 --auto
  ./manage.py 迁移博客

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-31T23:45:26.070

您可以创建一个 django 应用程序 (CustomBlog)，将其添加到您安装的应用程序中，然后删除或评论 Mezzanine 博客：

```
INSTALLED_APPS = (
    "CustomBlog",     #it was "mezzanine.blog",
     ...
) 
```

在您的 CustomBlog 的 models.py 和 admin.py 中，继承自 Mezzanine 的 BlogPost 类：

```
models.py
from django.db import models
from mezzanine.blog.models import BlogPost
from mezzanine.blog.models import BlogCategory

class CustomBlog(BlogPost):
    # Add New Field
    # example 
    new_field = models.CharField(max_length=255)

class CustomBlogCategory(BlogCategory):
    pass

admin.py
from django.contrib import admin
from .models import CustomBlog,CustomBlogCategory

admin.site.register(CustomBlog)
admin.site.register(CustomBlogCategory) 
```

然后在终端中创建并运行迁移

```
python manage.py makemigrations
python manage.py migrate 
```

# html - 溢出隐藏和清除：都去除纸张效果阴影

> ID：15345068
> 
> 赞同：0
> 
> 时间：2013-03-11T17:42:41.333
> 
> 标签：html, css, shadow

我想使用以下 css 创建一个纸张效果阴影，但我在这个 div 中有 3 个 div 需要并排。我使用 float 使 div 并排排列，但这会使父级的 div 高度小于内部内容。我尝试 clear:both 和 overflow: hidden 来解决使高度相对于内容的问题，但这会消除阴影效果。

**CSS**

```
.boxcontainer {
   position:relative;
   width:90%;
}

.boxcontainer:before,
.boxcontainer:after {
   content:"";
   position:absolute;
   z-index:-1;
   bottom:15px;
   left:10px;
   width:50%;
   height:20%;
   max-width:300px;
   -webkit-box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
   -moz-box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
   box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
   -webkit-transform:rotate(-3deg);
   -moz-transform:rotate(-3deg);
   -o-transform:rotate(-3deg);
   transform:rotate(-3deg);
}

.boxcontainer:after{
   right:10px;
   left:auto;
   -webkit-transform:rotate(3deg);
   -moz-transform:rotate(3deg);
   -o-transform:rotate(3deg);
   transform:rotate(3deg);
 } 
```

**HTML**

```
<div id="paperbox" class="boxcontainer">
    <img class="mafacemobile" src="/images/maface.jpeg" alt="ma face" width="183px" height="183px">
    <div id="textwrapper">
    <h1>
    FILLING MORE TEX
        </h1>
<div id="icons"
<img...>
        </div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-10T00:16:30.143

由于您提供的代码最少，我不能 100% 确定您对最终结果的确切想法，但希望这很接近！

查看我的笔的工作模型：[http ://codepen.io/gnowland/pen/crGtE](http://codepen.io/gnowland/pen/crGtE)

...这是完成的代码：

**HTML**

```
<div id="paperbox" class="boxcontainer">
  <div class="boxinner">
    <img style="-webkit-user-select: none" src="http://placehold.it/183x183" class="mafacemobile" alt="ma face" width="183px" height="183px">
    <div id="textwrapper">
      <h1>FILLING MORE TEXT</h1>
      <div id="icons"><img style="-webkit-user-select: none" src="http://placehold.it/50"></div>
    </div>
  </div>
</div> 
```

**CSS**

```
.boxcontainer {
  margin: 10px;
  display: inline-block;
  position: relative;
  background-color: #fff;
  z-index: -1;
}
.boxcontainer:before {
  content:"";
  position:absolute;
  bottom:0;
  left:0;
  width:100%;
  height:100%;
  background-color: #fff;
  -webkit-box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
  -moz-box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
  box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
  -webkit-transform:rotate(-3deg);
  -moz-transform:rotate(-3deg);
  -o-transform:rotate(-3deg);
  transform:rotate(-3deg);
}
.boxcontainer:after {
  content:"";
  position:absolute;
  bottom:0;
  left:0;
  width:100%;
  height:100%;
  background-color: #fff;
  -webkit-box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
  -moz-box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
  box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
  -webkit-transform:rotate(3deg);
  -moz-transform:rotate(3deg);
  -o-transform:rotate(3deg);
  transform:rotate(3deg);
}

.boxinner{
  position: relative;
  padding: 20px;
  z-index: 1;
 }

.boxinner > * {
  /* NOTE: This is just for demo, utilize the exact selectors in your code */
  display: inline-block;
  padding: 2px
 } 
```

我用你的`.boxcontainer`作为包装器并添加了一个内部 div ( `.boxinner`) 来保存内容，以便你可以填充它等。

主要的补充是使用`display: inline-block`. 与该物业保持友好，这太棒了。

您可以在 codepen 上使用我的代码，如果您有任何后续问题，请告诉我。

希望这可以为您解决！:-)

编辑：我刚刚意识到您最初的问题是 7 个月前的……您可能已经想通了，但希望这对其他人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:52:04.340

尝试添加`position:relative`到`.boxcontainer`

你能提供 CSS`.boxcontainer`和它的内容吗？还有，哪个容器`.drop-shadow`被应用到了？

设置一个[jsfiddle是个好主意](http://jsfiddle.net/)

# javascript - 可以进行服务器端和客户端验证

> ID：15345070
> 
> 赞同：0
> 
> 时间：2013-03-11T17:42:46.250
> 
> 标签：javascript, asp.net, c#-4.0, validation

在我的要求中，我需要使用 1 个编辑器，并且 requiredfieldvalidator 不适用于此编辑器控件。因此，我通过 javascript 验证此控件，并通过单击按钮的 asp 控件验证器验证其余的 asp.net 控件。

我正在尝试通过aspnet服务器端控制实现服务器端验证，并通过javascript实现客户端验证。我有两个文本框控件和一个提交按钮，如下所示：

```
<div>
        <asp:TextBox ID="Txt1" runat="server"></asp:TextBox>
        <asp:RequiredFieldValidator ID="RfvTxt1" runat="server" ErrorMessage="*" ForeColor="Red"
            ControlToValidate="Txt1"></asp:RequiredFieldValidator>
        <asp:TextBox ID="Txt2" runat="server"></asp:TextBox>
        <asp:Button ID="btnsubmit" runat="server" OnClick="btnsubmit_Click" Text="Submit" 
        OnClientClick=" return ss();"  />
        <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
    </div> 

 <script src="JS/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        function ss() {
            var script = $("#<%=Txt2.ClientID %>").val();
            if (script == "") {
                alert(1);
                return false;
            }
        }
    </script>

 protected void Page_Load(object sender, EventArgs e)
    {
        Label1.Text = "dd";
    }
    protected void btnsubmit_Click(object sender, EventArgs e)
    {
        Label1.Text = "ss";
    } 
```

但两个验证都不起作用。问题是，当第二个文本框包含文本时。即使第一个文本框不包含其文本，页面回发并运行它也是如此。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:14:53.227

我正在为您的查询提供解决方案。您必须在客户端验证功能的其他条件下再次启用所有服务器验证。

```
function ss() 
{
var script = $("#<%=Txt2.ClientID %>").val();
if (script == "") 
{
    alert(1);
    Page_ClientValidate();
    return false;
}
else 
{
    Page_ClientValidate();
}
} 
```

或者

只需将按钮单击更改为：

protected void btnsubmit_Click(object sender, EventArgs e) { if (Page.IsValid) { Label1.Text = "ss"; } }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:45:24.807

为什么不是 2 个RequiredFieldValidators，每个文本框一个？

```
<div>
        <asp:TextBox ID="Txt1" runat="server"></asp:TextBox>
        <asp:RequiredFieldValidator ID="RfvTxt1" runat="server" ErrorMessage="*" ForeColor="Red"
            ControlToValidate="Txt1"></asp:RequiredFieldValidator>
        <asp:TextBox ID="Txt2" runat="server"></asp:TextBox>
        <asp:RequiredFieldValidator ID="RfvTxt2" runat="server" ErrorMessage="*" ForeColor="Red"
            ControlToValidate="Txt2"></asp:RequiredFieldValidator>
        <asp:Button ID="btnsubmit" runat="server" OnClick="btnsubmit_Click" Text="Submit" />
        <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
</div> 
```

或者，如果您真的想使用自定义验证，请使用`CustomValidator`. 这是客户端和服务器端验证的示例：

```
<div>
        <asp:TextBox ID="Txt1" runat="server"></asp:TextBox>
        <asp:RequiredFieldValidator ID="RfvTxt1" runat="server" ErrorMessage="*" ForeColor="Red"
            ControlToValidate="Txt1"></asp:RequiredFieldValidator>
        <asp:TextBox ID="Txt2" runat="server"></asp:TextBox>
        <asp:CustomValidator id="CustomValidator1"
           ControlToValidate="Txt2"
           ClientValidationFunction="ClientValidate"
           OnServerValidate="ServerValidation"
           ErrorMessage="*"
           ForeColor="Red"
           runat="server"/>
        <asp:Button ID="btnsubmit" runat="server" OnClick="btnsubmit_Click" Text="Submit" />
        <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
</div> 

<script language="javascript"> 
   function ClientValidate(source, arguments)
   {
        if (arguments.Value == "" ){
            arguments.IsValid = true;
        } else {
            arguments.IsValid = false;
        }
   }
</script>

<script runat="server">
    void ServerValidation(object source, ServerValidateEventArgs args)
    {
      return !String.IsNullOrEmpty(args.Value);
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:51:16.707

您可以使用`ValidationGroup`将控件与提交按钮绑定，并确保您`CauseValidation`在按钮上使用属性等于`True`

**编辑**

```
document.getElementById('<%=txt2.ClientID%>').value; 
```

试试这个可能会有所帮助

# ssis - 如何制作 SSIS 包来监控 DB 表中列的状态，然后在 status=1 时执行 ssis 包？

> ID：15345073
> 
> 赞同：0
> 
> 时间：2013-03-11T17:42:54.010
> 
> 标签：ssis

如何制作 SSIS 包来监控 DB 表中列的状态，然后在 status=1 时执行 ssis 包

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:31:24.360

您可以在没有定义计划的情况下在 SQL 代理作业中设置 SSIS 包。然后在表的状态字段上创建一个触发器。当状态从 0 变为 1 时，执行将运行 SSIS 包的作业。

您的触发器可能如下所示。我没有检查语法，我建议在测试中调整它以验证它是否正确启动。

```
CREATE TRIGGER TriggerName
ON TableName 
AFTER UPDATE
IF UPDATE (status) AND status = 1
BEGIN
  EXEC msdb..sp_start_job 
     @job_name = 'JobName';
GO
END 
```

以下链接说明了执行 SQL 代理作业的不同方法。

[http://www.mssqltips.com/sqlservertip/1730/different-ways-to-execute-a-sql-agent-job/](http://www.mssqltips.com/sqlservertip/1730/different-ways-to-execute-a-sql-agent-job/)

希望这可以帮助。科什

# ruby-on-rails - 代码阅读：为什么下面的代码是这样实现的？

> ID：15345074
> 
> 赞同：3
> 
> 时间：2013-03-11T17:42:59.697
> 
> 标签：ruby-on-rails, ruby, caching, activerecord

我正在查看[group_cache_key](https://github.com/saturnflyer/group_cache_key/blob/master/lib/group_cache_key.rb)方法的代码，我以前从未见过这种写法：

```
require 'activerecord'
require 'activesupport'
require 'digest/md5'

ActiveRecord::Base.class_eval {
  Array.class_eval {
    def cache_key
      if self.empty?
        'empty/' + self.object_id.to_s
      else
        ids_hash = Digest::MD5.hexdigest(self.collect{|item| item.id }.to_s)
        update_timestamp = max {|a,b| a.updated_at <=> b.updated_at }.updated_at.to_i.to_s
        create_timestamp = max {|a,b| a.created_at <=> b.created_at }.created_at.to_i.to_s
        self.first.class.to_s.tableize+'/'+length.to_s+'-'+ids_hash+'-'+create_timestamp+'-'+update_timestamp
      end
    end
  }
} 
```

为什么方法是这样实现的？`class_eval`在 Array 中包含a`class_eval`并在 Array 上定义有什么意义`cache_key`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:10:01.867

该方法的目的是除了对单个记录进行标准缓存之外，还为记录数组添加缓存，因此它是在`Array`. 最有可能的是，作者试图`Array`通过将 ruby​​ 类包装在 .class_eval 中来不污染它`ActiveRecord::Base`。这种方法不会防止这种污染，但它会添加`cache_key`所需的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T15:50:24.953

我希望这只会`Array`在`ActiveRecord`.

所以我创建了一个小测试程序来验证：

```
class Test
  class Array
    def initialize(bla)
      @array = bla
    end
  end

  def self.get_array_of(something)
    Array.new([something])
  end
end

Test.class_eval {
  Array.class_eval {
    def to_s
      "BLAAAAAAAA"
    end
  }
}

puts ["a", "b", "c"].to_s
puts Test.get_array_of("b").to_s 
```

不幸的是，该程序的输出表明只有全局`Array`受到影响，并且`Test::Array`只有默认`to_s`功能。真可惜。

所以我可以考虑这样做的唯一原因是，如果`ActiveRecord`不存在，这将引发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T03:12:50.610

使用`class_eval`而不是仅仅重新打开类的唯一原因是在类不存在的情况下快速失败。这在您显示的代码中是不可能的，因为需要 ActiveRecord。我猜作者只是有一个奇怪的风格偏好。

# java - 使用来自 android 的 apache commons 邮件包发送电子邮件

> ID：15345075
> 
> 赞同：1
> 
> 时间：2013-03-11T17:43:02.830
> 
> 标签：java, android

我是安卓新手。我正在开发带有电子邮件发送选项的新应用程序。要发送邮件，我使用了 gmail 配置主机“smtp.gmail.com”，端口 465，SSL 为 true。要发送电子邮件，我有 apache commons API。`OnTouch`事件邮件发送方法将调用。每当触摸按钮时，它都会显示以下错误，

```
错误：找不到从方法 org.apache.commons.mail.Email.setMailSessionFromJNDI 引用的类“javax.naming.InitialContext”
    警告：VFY：无法解析 Lorg/apache/commons/mail/Email 中的新实例 955 (Ljavax/naming/InitialContext;)；
    警告：org.apache.commons.mail.EmailException：将电子邮件发送到以下服务器失败：smtp.gmail.com:465
```

我在清单文件中添加了使用权限 android:name="android.permission.INTERNET"。

我可以在android中使用所有java文件吗？

我的电子邮件代码作为独立的 java 程序正确执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:22:43.083

这是我在应用程序中所做的示例。我有一个应用程序，它有自己的电子邮件帐户，当用户填写表单并按下提交按钮时，它会向用户发送电子邮件。

重要的是确保您的应用程序中引用了***libSMTP.jar***文件。我正在将此库用于以下代码。这是正在使用的以下代码，从中获取您想要的内容，希望这很有用：

需要进口：

```
import org.apache.commons.net.smtp.SMTPClient;
import org.apache.commons.net.smtp.SMTPReply;
import org.apache.commons.net.smtp.SimpleSMTPHeader; 
```

提交按钮以请求发送电子邮件

```
 submit.setOnClickListener(new OnClickListener()
    {       
        public void onClick(View v)
        {
            //-- Submit saves data to sqlite db, but removed that portion for this demo...

            //-- Executes an new task to send an automated email to user when they fill out a form...
            new sendEmailTask().execute();
        }
        }
    }); 
```

要在单独的线程上执行的电子邮件任务：

```
private class sendEmailTask extends AsyncTask<Void, Void, Void>
{

    @Override
    protected void onPostExecute(Void result) 
    {

    }

    @Override
    protected void onPreExecute() 
    {

    }

    @SuppressLint("ParserError")
    @Override
    protected Void doInBackground(Void... params) 
    {

        try {

            //--Note the send format is as follows: send(from, to, subject line, body message)
            send("myAppName@gmail.com",  "emailToSendTo@gmail.com", "Form Submitted",  "You submitted the form.");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }
} 
```

正在使用的发送功能：

```
public void send(String from, String to, String subject, String text) throws IOException 
{
    SMTPClient client = new SMTPClient("UTF-8");
    client.setDefaultTimeout(60 * 1000);

    client.setRequireStartTLS(true); // requires STARTTLS
    //client.setUseStartTLS(true); // tries STARTTLS, but falls back if not supported
    client.setUseAuth(true); // use SMTP AUTH
    //client.setAuthMechanisms(authMechanisms); // sets AUTH mechanisms e.g. LOGIN

    client.connect("smtp.gmail.com", 587);
    checkReply(client);

    //--Note the following format is as follows: client.login("localhost", (...your email account being used to send email from...), (...your email accounts password ...));
    client.login("localhost", "myAppName@gmail.com", "...myAppName email account password...");
    checkReply(client);

    client.setSender(from);
    checkReply(client);
    client.addRecipient(to);
    checkReply(client);

    Writer writer = client.sendMessageData();

    if (writer != null) 
    {
        SimpleSMTPHeader header = new SimpleSMTPHeader(from, to, subject);
        writer.write(header.toString());
        writer.write(text);
        writer.close();
        client.completePendingCommand();
            checkReply(client);
    }

    client.logout();
    client.disconnect();
} 
```

检查正在使用的回复功能：

```
private void checkReply(SMTPClient sc) throws IOException 
{
    if (SMTPReply.isNegativeTransient(sc.getReplyCode())) 
    {
        sc.disconnect();
        throw new IOException("Transient SMTP error " + sc.getReplyCode());
    } 
    else if (SMTPReply.isNegativePermanent(sc.getReplyCode())) 
    {
        sc.disconnect();
        throw new IOException("Permanent SMTP error " + sc.getReplyCode());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T03:26:28.670

从 Apache Commons Net 3.3，您可以将 jar 放到您的类路径中并开始使用 AuthenticationSMTPClient：[http ://blog.dahanne.net/2013/06/17/sending-a-mail-in-java-and-android -with-apache-commons-net/](http://blog.dahanne.net/2013/06/17/sending-a-mail-in-java-and-android-with-apache-commons-net/)

# javascript - 弹出框在第一次单击时不显示，但在第二次单击时显示

> ID：15345085
> 
> 赞同：3
> 
> 时间：2013-03-11T17:43:47.830
> 
> 标签：javascript, twitter-bootstrap, popover

我发现了一篇没有帮助的相关帖子： [Twitter bootstrap:Popovers 在第一次点击时没有出现，但在第二次点击时出现](https://stackoverflow.com/questions/12333585/twitter-bootstrappopovers-are-not-showing-up-on-first-click-but-show-up-on-seco)

不同之处在于我的页面中有几个元素需要弹出框（几个提示图标），所以我需要遍历它们..

我的标记：

```
<a href="#" name="click_help_container" id="click_mainhomeform_tasks" data-original-title=""><img class="help_icon" src="http://media.mysite.com/pub/images/help/tips-icon.png">   </a> 
```

这是我的 JavaScript：

```
 var h=document.getElementsByName("click_help_container");
for (i=0;i<h.length;i++) 
{
    $('#'+h[i]['id']).click(
        function () 
        {
            var id=$(this).attr("id");
            getHelp(id,$(this),function(t,elem)
            {
                var isVisible = false;
                var clickedAway = false;                    
                $(elem).unbind('click');
                $(elem).popover(
                {
                    "title":t.title,
                    "content":"<p class='popover_body_text'>"+t.content+"</p>",
                    "html":true,
                    "animation":true,
                    "placement":"bottom",
                    "trigger":"manual"
                }).click(function(e) 
                {
                    $(this).popover('show');
                    clickedAway = false;
                    isVisible = true;
                    e.preventDefault();
                });

                $(document).click(function(e) {
                if(isVisible & clickedAway)
                {
                    $(elem).popover('hide')
                    isVisible = false;
                    clickedAway = false;
                }else
                {
                    clickedAway = true;
                }
                });

                //$(elem).popover('show');
            });
        });
} 
```

问题是当我单击tips-icon.png 按钮时，弹出框不会在第一次单击时出现（我想这是因为我有2 .click() 调用当我第二次单击按钮时弹出框出现然后它从那里开始保持它的切换行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:24:43.133

您不需要遍历所有元素并一一初始化弹出框，您可以一次将弹出框应用于具有此名称的所有项目（与您在循环中所做的相同）。

而且您不需要自己手动显示/隐藏弹出框，bootstrap 可以为您完成。

我认为这应该适合你：

```
$("a[name='click_help_container']").popover(
            {
                "title":t.title,
                "content":"<p class='popover_body_text'>"+t.content+"</p>",
                "html":true,
                "animation":true,
                "placement":"bottom",
                "trigger":"click"
            }); 
```

# view - 注销更改视图 sencha touch

> ID：15345088
> 
> 赞同：1
> 
> 时间：2013-03-11T17:43:49.757
> 
> 标签：view, login, sencha-touch-2, logout

嗨，我需要在我的 sencha touch 应用程序中实现保持登录

请在下面查看我的代码：

Login.js - 一旦用户点击登录，它会在本地存储“sessionToken”。然后它会去主页面

```
 onBtnLoginClick: function(){

            var loginviewGetValue =  Ext.getCmp('loginview').getValues();
            var bbid =  Ext.getCmp('bbID').getValue();
            var bbpassword =  Ext.getCmp('bbPassword').getValue();
                var LoginLS =   Ext.getStore('LoginLS');

                                    LoginLS.add({
                                        sessionId: 'sadsadsadasd'
                                       ,deviceId:'1'
                                       ,bb_id :bbid
                                       });

                                       LoginLS.sync();      

                                   var mainForm= Ext.create('bluebutton.view.Main');
                                    Ext.Viewport.setActiveItem(mainForm); 
```

App.js~每次启动函数都会检查localStorage中的sessionToken。如果 Localstorage 为空，则进入登录页面。否则进入主页面

```
 launch: function() {

        // Destroy the #appLoadingIndicator element
        Ext.fly('appLoadingIndicator').destroy();

        // Initialize the main view

             var LoginLS = Ext.getStore('LoginLS');
             LoginLS.load();

             var record =  LoginLS.getAt(0);

            if(record != undefined){
                var sessionId = record.get('sessionId');
               if (sessionId !=undefined){
                     Ext.Viewport.add(Ext.create('bluebutton.view.Main'));
               }
               else
                   Ext.Viewport.add(Ext.create('bluebutton.view.Login'));

            }
            else{
               Ext.Viewport.add(Ext.create('bluebutton.view.Login'));
               }

//        Ext.create('bluebutton.view.TopMenuList');

    }, 
```

Logout.js~Logout 会清除 sessionToken 并再次进入登录页面

```
onLogoutClick: function scan() {
                var LoginLS = Ext.getStore('LoginLS');

                     Ext.Viewport.setMasked({
                        xtype: 'loadmask',
                        message: 'Loading...'
                    });

                 LoginLS.load();

                 var record =  LoginLS.getAt(0);
                   LoginLS.removeAll();
                    LoginLS.sync();
                   //Load a new view

//                   Ext.getCmp('tabpanel').destroy();

                var loginForm = Ext.create('bluebutton.view.Login');
                Ext.Viewport.setActiveItem(loginForm);   

                Ext.Viewport.setMasked(false); // hide the load screen 
```

但我现在有问题。我无法返回登录页面。它进入空白页。请给我一些解决方案。谢谢。

这是我得到的错误

```
 [WARN][Ext.data.Batch#runOperation] Your identifier generation strategy for the model does not ensure unique id's. Please use the UUID strategy, or implement your own identifier strategy with the flag isUnique. Console.js:35
[WARN][Ext.Component#constructor] Registering a component with a id (`loginview`) which has already been used. Please ensure the existing component has been destroyed (`Ext.Component#destroy()`. Console.js:35
[WARN][Ext.Component#constructor] Registering a component with a id (`bbID`) which has already been used. Please ensure the existing component has been destroyed (`Ext.Component#destroy()`. Console.js:35
[WARN][Ext.Component#constructor] Registering a component with a id (`bbPassword`) which has already been used. Please ensure the existing component has been destroyed (`Ext.Component#destroy()`. Console.js:35
[WARN][Ext.Component#constructor] Registering a component with a id (`btnLogin`) which has already been used. Please ensure the existing component has been destroyed (`Ext.Component#destroy()`. Console.js:35
[DEPRECATE][bluebutton.view.Login#show] Call show() on a component that doesn't currently belong to any container. Please add it to the the Viewport first, i.e: Ext.Viewport.add(component); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:56:25.843

查看错误消息很明显，您正在尝试再次创建登录面板而不破坏现有组件。错误是因为您不允许`id`在应用程序中多次使用相同的。

为避免这种情况，您不应多次创建相同的视图，您应该重用对性能也有好处的视图。还有一件事，`id`当且仅当你不能没有它时，你应该给 n 元素。

假设你不能避免`id`属性，你应该做以下两件事之一：

1.  仅当它不存在时才创建新视图

    ```
    var loginView = Ext.getCmp("loginview");
    if(!loginView){
        loginView = Ext.create('bluebutton.view.Login');
    } 
    ```

2.  通过调用以下方法销毁登录视图，一旦它离开（隐藏/删除）视口：

    ```
    var loginView = Ext.getCmp("loginview");
    loginView.destroy(); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:47:50.220

用于`itemId`您的组件，而不是`id`在您中相应地引用它们`Controller`。检查这个问题：[警告说“Id”存在并且应该被销毁](https://stackoverflow.com/questions/10623890/warning-saying-id-exist-and-should-be-destroyed)

# perl - 无法安装 SOAP::Lite

> ID：15345089
> 
> 赞同：4
> 
> 时间：2013-03-11T17:43:53.073
> 
> 标签：perl, perl-module, cpan

我在安装 SOAP::Lite 时遇到问题

我在 CentOS 5.9 上使用 perl，v5.8.8

我收到一个错误：

```
Failed Test                 Stat Wstat Total Fail  Failed  List of Failed
-------------------------------------------------------------------------------
t/SOAP/Transport/HTTP/CGI.t    2   512     2    2 100.00%  1-2
6 tests and 25 subtests skipped.
Failed 1/33 test scripts, 96.97% okay. 2/854 subtests failed, 99.77% okay.
make: *** [test_dynamic] Error 255
  /usr/bin/make test -- NOT OK
Running make install
  make test had returned bad status, won't install without force 
```

如何修复以便它可以安装 SOAP::Lite？

完整输出：

```
cp lib/SOAP/Lite.pm blib/lib/SOAP/Lite.pm
cp lib/SOAP/Fault.pod blib/lib/SOAP/Fault.pod
cp bin/SOAPsh.pl blib/script/SOAPsh.pl
/usr/bin/perl -MExtUtils::MY -e 'MY->fixin(shift)' -- blib/script/SOAPsh.pl
cp bin/stubmaker.pl blib/script/stubmaker.pl
/usr/bin/perl -MExtUtils::MY -e 'MY->fixin(shift)' -- blib/script/stubmaker.pl
cp bin/XMLRPCsh.pl blib/script/XMLRPCsh.pl
/usr/bin/perl -MExtUtils::MY -e 'MY->fixin(shift)' -- blib/script/XMLRPCsh.pl
Manifying blib/man1/SOAPsh.pl.1
Manifying blib/man1/stubmaker.pl.1
Manifying blib/man1/XMLRPCsh.pl.1
Manifying blib/man3/SOAP::Packager.3pm
Manifying blib/man3/UDDI::Lite.3pm
Manifying blib/man3/SOAP::Header.3pm
Manifying blib/man3/SOAP::Client.3pm
Manifying blib/man3/XML::Parser::Lite.3pm
Manifying blib/man3/SOAP::Constants.3pm
Manifying blib/man3/SOAP::Transport::LOOPBACK.3pm
Manifying blib/man3/SOAP::Lite::Packager.3pm
Manifying blib/man3/XMLRPC::Transport::TCP.3pm
Manifying blib/man3/XMLRPC::Transport::POP3.3pm
Manifying blib/man3/SOAP::SOM.3pm
Manifying blib/man3/XMLRPC::Lite.3pm
Manifying blib/man3/SOAP::Transport.3pm
Manifying blib/man3/SOAP::Schema.3pm
Manifying blib/man3/SOAP::Test.3pm
Manifying blib/man3/Apache::SOAP.3pm
Manifying blib/man3/Apache::XMLRPC::Lite.3pm
Manifying blib/man3/XMLRPC::Transport::HTTP.3pm
Manifying blib/man3/SOAP::Trace.3pm
Manifying blib/man3/SOAP::Transport::POP3.3pm
Manifying blib/man3/SOAP::Deserializer.3pm
Manifying blib/man3/SOAP::Data.3pm
Manifying blib/man3/SOAP::Server.3pm
Manifying blib/man3/XMLRPC::Test.3pm
Manifying blib/man3/SOAP::Utils.3pm
Manifying blib/man3/SOAP::Serializer.3pm
Manifying blib/man3/SOAP::Fault.3pm
Manifying blib/man3/SOAP::Lite.3pm
  /usr/bin/make  -- OK
Running make test
PERL_DL_NONLAZY=1 /usr/bin/perl "-MExtUtils::Command::MM" "-e" "test_harness(0, 'blib/lib', 'blib/arch')" t/02-payload.t t/05-customxml.t t/010-serializer.t t/096_characters.t t/099_pod_coverage.t t/014_UNIVERSAL_use.t t/03-server.t t/015_UNIVERSAL_can.t t/012-cloneable.t t/08-schema.t t/06-modules.t t/098_pod.t t/01-core.t t/04-attach.t t/07-xmlrpc_payload.t t/013-array-deserialization.t t/097_kwalitee.t t/SOAP/Serializer.t t/SOAP/Data.t t/SOAP/Lite/Packager.t t/SOAP/Lite/Deserializer/XMLSchema1999.t t/SOAP/Lite/Deserializer/XMLSchemaSOAP1_1.t t/SOAP/Lite/Deserializer/XMLSchema2001.t t/SOAP/Lite/Deserializer/XMLSchemaSOAP1_2.t t/SOAP/Schema/WSDL.t t/SOAP/Transport/LOCAL.t t/SOAP/Transport/HTTP.t t/SOAP/Transport/IO.t t/SOAP/Transport/MAILTO.t t/SOAP/Transport/POP3.t t/SOAP/Transport/HTTP/CGI.t t/XMLRPC/Lite.t t/XML/Parser/Lite.t
t/01-core....................................ok
        3/42 skipped: various reasons
t/010-serializer.............................ok
t/012-cloneable..............................ok
t/013-array-deserialization..................Subroutine XML::Parser::Lite::_parse_re redefined at /root/.cpan/build/SOAP-Lite-0.715/blib/lib/XML/Parser/Lite.pm line 145, <DATA> chunk 1.
t/013-array-deserialization..................ok
t/014_UNIVERSAL_use..........................ok
t/015_UNIVERSAL_can..........................ok
t/02-payload.................................ok
t/03-server..................................Subroutine XML::Parser::Lite::_parse_re redefined at /root/.cpan/build/SOAP-Lite-0.715/blib/lib/XML/Parser/Lite.pm line 145.
t/03-server..................................ok
        10/32 skipped:
t/04-attach..................................skipped
        all skipped: Could not find MIME::Parser - is MIME::Tools installed? Aborting.
t/05-customxml...............................Subroutine XML::Parser::Lite::_parse_re redefined at /root/.cpan/build/SOAP-Lite-0.715/blib/lib/XML/Parser/Lite.pm line 145, <DATA> line 161.
t/05-customxml...............................ok
t/06-modules.................................ok 1/0Subroutine XML::Parser::Lite::_parse_re redefined at /root/.cpan/build/SOAP-Lite-0.715/blib/lib/XML/Parser/Lite.pm line 145.
t/06-modules.................................ok
        6/17 skipped: various reasons
t/07-xmlrpc_payload..........................Subroutine XML::Parser::Lite::_parse_re redefined at /root/.cpan/build/SOAP-Lite-0.715/blib/lib/XML/Parser/Lite.pm line 145.
t/07-xmlrpc_payload..........................ok
t/08-schema..................................Subroutine XML::Parser::Lite::_parse_re redefined at /root/.cpan/build/SOAP-Lite-0.715/blib/lib/XML/Parser/Lite.pm line 145.
t/08-schema..................................ok
t/096_characters.............................skipped
        all skipped: no reason given
t/097_kwalitee...............................skipped
        all skipped: no reason given
t/098_pod....................................skipped
        all skipped: no reason given
t/099_pod_coverage...........................skipped
        all skipped: no reason given
t/SOAP/Data..................................ok
t/SOAP/Lite/Deserializer/XMLSchema1999.......ok
t/SOAP/Lite/Deserializer/XMLSchema2001.......ok
t/SOAP/Lite/Deserializer/XMLSchemaSOAP1_1....ok
t/SOAP/Lite/Deserializer/XMLSchemaSOAP1_2....ok
t/SOAP/Lite/Packager.........................ok
t/SOAP/Schema/WSDL...........................ok
t/SOAP/Serializer............................ok
        1/13 skipped: Cannot test without Test::Differences
t/SOAP/Transport/HTTP........................ok
        4/36 skipped: various reasons
t/SOAP/Transport/HTTP/CGI....................Subroutine XML::Parser::Lite::_parse_re redefined at /root/.cpan/build/SOAP-Lite-0.715/blib/lib/XML/Parser/Lite.pm line 145.
Subroutine XML::Parser::Lite::_parse_re redefined at /root/.cpan/build/SOAP-Lite-0.715/blib/lib/XML/Parser/Lite.pm line 145.

#   Failed test 'return utf8 string'
#   at t/SOAP/Transport/HTTP/CGI.t line 57.
t/SOAP/Transport/HTTP/CGI....................NOK 1
t/SOAP/Transport/HTTP/CGI....................NOK 2#   Failed test 'utf8 content: ÃÂberall'
#   at t/SOAP/Transport/HTTP/CGI.t line 59.
#          got: 'ÃÂberall'
#     expected: 'Ãberall'
# Looks like you failed 2 tests of 2.
t/SOAP/Transport/HTTP/CGI....................dubious
        Test returned status 2 (wstat 512, 0x200)
DIED. FAILED tests 1-2
        Failed 2/2 tests, 0.00% okay
t/SOAP/Transport/IO..........................ok 1/0Subroutine XML::Parser::Lite::_parse_re redefined at /root/.cpan/build/SOAP-Lite-0.715/blib/lib/XML/Parser/Lite.pm line 145.
t/SOAP/Transport/IO..........................ok
        1/8 skipped: cannot test Scalar IO without IO::Scalar
t/SOAP/Transport/LOCAL.......................ok 1/0Subroutine XML::Parser::Lite::_parse_re redefined at /root/.cpan/build/SOAP-Lite-0.715/blib/lib/XML/Parser/Lite.pm line 145.
t/SOAP/Transport/LOCAL.......................ok
t/SOAP/Transport/MAILTO......................skipped
        all skipped: Cannot test without Test::MockObject
t/SOAP/Transport/POP3........................ok
t/XML/Parser/Lite............................Subroutine XML::Parser::Lite::_parse_re redefined at /root/.cpan/build/SOAP-Lite-0.715/blib/lib/XML/Parser/Lite.pm line 145.
t/XML/Parser/Lite............................ok
t/XMLRPC/Lite................................ok
Failed Test                 Stat Wstat Total Fail  Failed  List of Failed
-------------------------------------------------------------------------------
t/SOAP/Transport/HTTP/CGI.t    2   512     2    2 100.00%  1-2
6 tests and 25 subtests skipped.
Failed 1/33 test scripts, 96.97% okay. 2/854 subtests failed, 99.77% okay.
make: *** [test_dynamic] Error 255
  /usr/bin/make test -- NOT OK
Running make install
  make test had returned bad status, won't install without force 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-18T21:20:44.993

对于使用 Debian 或 Ubuntu 的人：

```
apt-get install -y libsoap-lite-perl 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-08T15:41:56.047

我遇到了同样的问题并最终这样做了。希望这能满足您的需求。

1.  [首先从http://search.cpan.org/~phred/SOAP-Lite-0.716/](http://search.cpan.org/~phred/SOAP-Lite-0.716/)下载 SOAP-Lite 包
2.  解压缩包并删除名为“t”的文件夹。
3.  `perl Makefile.PL`
4.  `make`
5.  `make test`
6.  `sudo make install`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T17:47:06.633

尝试这样做：

```
yum install perl-SOAP-Lite 
```

或从[rpm.pbone.net](http://rpm.pbone.net/index.php3/stat/4/idpl/17474994/dir/centos_6/com/perl-SOAP-Lite-0.710.10-2.el6.noarch.rpm.html)下载，最后

```
rpm -i package.rpm 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-12T21:29:52.803

您可以像这样使用 cpan 进行强制安装：

```
force install SOAP::Lite 
```

这对我有用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T17:58:08.807

看起来测试可能会被破坏；我正在看

```
t/SOAP/Transport/HTTP/CGI.t .................. 1/? 
#   Failed test 'return utf8 string'
#   at t/SOAP/Transport/HTTP/CGI.t line 57.

#   Failed test 'utf8 content: Ãberall'
#   at t/SOAP/Transport/HTTP/CGI.t line 59.
#          got: 'Ãberall'
#     expected: 'Überall'
# Looks like you failed 2 tests of 2. 
```

最简单的方法是将模块提取到一个临时文件夹中，并在运行之前删除此测试：

```
 perl Makefile.PL
 make
 make test
 make install 
```

您可能还想向模块所有者提交错误报告（尽管这已经一年多没有涉及了）

# python - 两个列表之间的范围

> ID：15345099
> 
> 赞同：0
> 
> 时间：2013-03-11T17:44:29.957
> 
> 标签：python

谁能帮我一个这个？

我正在尝试找到一种方法来计算 2 个整数列表之间的范围；并获得从一个列表到下一个列表所需的每一步

使用这两个数组：

```
a = [1,1,1]

b = [3,4,3] 
```

我想达到一系列中间值：

```
[[2,2,2], [None,3,None]] 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T17:52:06.110

这很简单，[`itertools.zip_longest()`](http://docs.python.org/3/library/itertools.html#itertools.zip_longest)列表[理解](http://www.youtube.com/watch?v=pShL9DCSIUw)也很简单：

```
>>> import itertools
>>> list(itertools.zip_longest(*[range(i+1, j) for i, j in zip(a, b)]))
[(2, 2, 2), (None, 3, None)] 
```

请注意，在 2.x`itertools.zip_longest()`中不存在 - 它被调用[`itertools.izip_longest()`](http://docs.python.org/2.7/library/itertools.html#itertools.izip_longest)。

这可以通过`zip()`将值组合在一起来获得边界，然后生成我们需要的范围（在下限上加一个，因为您似乎不想包含它），然后我们将它们分成几部分，使用`itertools.zip_longest()`（也介绍`None`价值观）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:53:41.427

在 izip_longest 不可用的 python 2.5 及以下版本中工作的 Lattywares Answer 的变体：

```
map(None, *[range(x + 1, y) for x, y in zip(a, b)]) 
```

# autosys - 将多个 AutoSys 作业置于冰上

> ID：15345101
> 
> 赞同：0
> 
> 时间：2013-03-11T17:44:35.620
> 
> 标签：autosys

是否可以将多个工作放在冰上，例如。使用通配符作为工作名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:55:56.963

不使用通配符作为作业名称。您可以使用组或应用程序作业定义将多个作业置于冰上。这些支持通配符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T08:56:51.477

您可以使用通配符检索多个作业并使用脚本将每个作业放在 ICE 上

# twitter-bootstrap - Bootstrap 的 Javascript 按钮不显示 Knockout observable

> ID：15345102
> 
> 赞同：1
> 
> 时间：2013-03-11T17:44:37.040
> 
> 标签：twitter-bootstrap, knockout.js

我希望更新引导 javascript 按钮中的文本以显示一个数字，该数字保留在我的视图模型中可观察到的淘汰赛中。

我可以将按钮上的文本更新为除可观察对象之外的任何内容，当我将其更改为包含可观察对象时，按钮文本不正确并将可观察对象显示为函数。

用小提琴更容易解释，所以这里有一个简化的例子：http: [//jsfiddle.net/rswailes/JxHwy/](http://jsfiddle.net/rswailes/JxHwy/)

HTML

```
<button
    id="download-file"
    data-loading-text="Updating totals..."
    data-bind="attr: {'data-complete-text' : 'Download lines: '+total , 
                      'data-finished-text' : 'done' }"
    autocomplete="off"
    class="btn btn-small download-file"
    type="button">Download file</button>

<p>
Total: <span data-bind="text: total"></span>
</p> 
```

JAVASCRIPT

```
var ViewModel = function(){
    var self = this;
    this.total = ko.observable();

    this.loadModel = function(){
        $('#download-file').button("loading");
        this.total(10);
        $('#download-file').button("complete");   // this is the line I would like to work but does not work
        //$('#download-file').button("finished"); // if you uncomment this line you will see this line works fine
    };
};

viewModel = new ViewModel();
ko.applyBindings(viewModel);
viewModel.loadModel(); 
```

谁能告诉我为什么会发生这种情况以及我想做的事情是否可行？

编辑：我已经`total()`按照下面的建议进行了尝试，然后我`Download lines: undefined`在按钮上得到了“”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:06:35.170

您应该`total()`用于访问可观察变量的值。你必须更新你的代码并使用点击绑定来加载你的模型数据。这是一个工作小提琴：

[http://jsfiddle.net/JxHwy/3/](http://jsfiddle.net/JxHwy/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:52:53.483

要获取 observable 的值，您需要将其作为函数调用，例如`total()`.

如果您只传递一个简单的属性/可观察对象，那么内置绑定将为您完成这项工作`total`。但是，如果您在表达式中使用它，那么您需要自己将其作为函数调用`"Download lines: " + total()`

# asp.net-web-api - ASP.NET Web API 将模型属性绑定到不同的请求属性

> ID：15345104
> 
> 赞同：2
> 
> 时间：2013-03-11T17:44:42.723
> 
> 标签：asp.net-web-api

我正在尝试编写一个自定义模型绑定器，它可以将用属性装饰的属性绑定到不同名称的请求属性，例如

### JSON 请求

```
{
    "app": "acme"
} 
```

### 请求模型（摘录）

```
[Alias("app")]
public string ApplicationName { get; set; } 
```

...应该导致`ApplicationName`填充值“acme”。我一直在为此编写自定义模型绑定器：

### 模型粘合剂

```
public BindToAliasModelBinder : IModelBinder {
    public bool BindModel(HttpActionContext actionContext, ModelBindingContext bindingContext) {
        ...
    }
} 
```

### 模型绑定器提供者

```
public class BindFromAliasModelBinderProvider : ModelBinderProvider {
    public override IModelBinder GetBinder(HttpConfiguration configuration, Type modelType) {
        return new BindFromAliasModelBinder();
    }
} 
```

我已经在全球范围内注册了提供商，并且按预期命中了活页夹。我不知道下一步该做什么——如何遍历请求值并根据属性的存在有条件地绑定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:27:52.807

如果您只想使用别名，则可以使用`JsonPropertyAttribute`, 类似于`[JsonProperty(PropertyName = "app")]`属性上的东西。

# android - Android 模拟器 - 命令行构建

> ID：15345109
> 
> 赞同：4
> 
> 时间：2013-03-11T17:45:08.473
> 
> 标签：android, command-line, android-emulator, terminal, building

再次回到 Stack 需要 Android 开发人员的帮助。在我的开发环境中，我使用了大量的命令行构建和管理。目前我遇到了一个问题，终端“使用 Mac OSX”在执行命令“emulator -avd nameOfemulator”时仍然存在。

启动模拟器示例

![启动模拟器](../Images/7fa638b1432c68a167727d8eba8c3875.png)

但是，即使模拟器已打开并运行，终端也不会被释放以执行其他命令，我不想只打开一个新选项卡或窗口来执行我的 adb 命令。目前，我可以通过简单的“ctrl-C”关闭模拟器并杀死实时终端/模拟器命令，但是如果模拟器关闭，这将无法达到目的。

有没有人知道通过脚本、命令字符串、不同类型的模拟器等重新启动终端。

## 更新

现在运行以下命令`emulator -avd NexusSeven &`此模拟器启用了 HAX Intel 硬件加速。并且在终端再次可用后不久，将字符串“ `HAX is working and emulator runs in fast virt mode`”输入到命令输入中并使终端再次运行。 ![在单独的线程中运行命令后，输入 HAX 字符串使终端再次生效](../Images/3fbac657f06f7ae3af91356f68eb6cc4.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-11T17:58:52.190

由于 MacOSX 只是 BSD Linux 的一个分支，因此模拟器可以通过附加 & 符号在后台运行：

```
emulator -avd NexusSeven & 
```

要忽略所有输出，以下命令将有所帮助：

```
emulator -avd NexusSeven > /dev/null 2>&1 & 
```

# java - Java 程序 - 纸牌游戏 WAR

> ID：15345116
> 
> 赞同：3
> 
> 时间：2013-03-11T17:45:28.770
> 
> 标签：java, arrays, class, compiler-errors

这是一项课堂作业，我不是要求任何人为我完成作业，而是我已经尽我所能，然后在这里发帖，希望能就我收到的 4 个错误和我的套牌没有得到一些帮助由于某种原因被洗牌。

我的作业方向：

对于这个任务，您将创建一个玩简单战争游戏的程序。在这个游戏中，每个玩家都会从一副完整的牌组中获得一张牌。谁拥有价值最高的牌，谁就获胜。如果所发的牌具有相同的价值，则为平局，双方均未获胜。赢得最多回合的玩家赢得游戏。玩家不需要输入（不是很有趣！）。您应该打印每个玩家收到的牌以及该轮的结果和游戏的最终结果。您可能希望使用用户输入来实现每轮之间的延迟。

我的卡类：

```
public class Card {

    private int cardNum;
    final static String[] suits = {"Spades", "Hearts", "Diamonds", "Clubs"};
    final static String[] ranks = {"2", "3","4","5","6","7","8", "9","10", "Jack", "Queen", "King", "Ace"};

    Card (int theCard) {
        setCardNum (theCard);
    }

    public void setCardNum (int theCard) {
        cardNum = (theCard >= 0 && theCard <= 51)? theCard: 0;
    }

    public int getCardNum() {
        return cardNum;
    }

    public String toString() {
        return ranks[cardNum%13] + " of " + suits[cardNum/13];
    }

    public String getSuit() {
        return suits[cardNum/13];
    }

    public String getRank() {
        return ranks[cardNum%13];
    }

    public int getValue() {
        return cardNum%13;
    } 
} 
```

我的甲板课（我有一个洗牌错误）：

```
public class Deck {

    private Card[] deck = new Card[52];
    private int topCard;

    Deck() {

        topCard = 0;

        for (int i = 0; i < deck.length; i++)
            deck[i] = new Card(i);

    }

    public void shuffle() {

        topCard = 0;

        for (int i = 0; i < 1000; i++) {
            int j = (int)(Math.random()*52);
            int k = (int)(Math.random()*52);
            Card tmpCard = deck[j];
            deck[j] = deck[k];
            deck[k] = tmpCard;
        } 
   }

    public Card dealCard() {
        Card theCard;
        if (topCard < deck.length) {
            theCard = deck[topCard];
            topCard++;
        }
        else
            theCard = null;

        return theCard;
    }
} 
```

我的战争游戏主程序：

```
import java.util.Scanner;

public class WarGame {

    public static void main(String[] args) {

        Card[][] hands = new Card[2][1];
        Deck myDeck = new Deck();

        for (int i = 0; i < 53; i++) {
            System.out.printf("\n Round %s of The War \n", i);

            for (int c = 0; c < 1; c++)
                for (int player = 0; player < hands.length; player++)
                    hands[player][c] = myDeck.dealCard();

            for (int player = 0; player < hands.length; player++) {
                System.out.printf("Player %d: ", player);
                printHand(hands[player]);

                int player1;
                int player2;

                if (player1.getValue() > player2.getValue())
                    System.out.println("Player One Wins The War");
                else if (player2.getValue() > player1.getValue())
                    System.out.println("Player Two Wins The War");
                else
                    System.out.println("The War Is A Tie");

            } 
        }
    }

    public static void printHand(Card[] hand) {

        for (int card = 0; card < hand.length; card++)
            System.out.printf("%s", hand[card].toString());

        System.out.println();

    } 
} 
```

我的错误如下：

```
----jGRASP exec: javac -g WarGame.java

WarGame.java:31: error: int cannot be dereferenced
if (player1.getValue() > player2.getValue())
       ^
WarGame.java:31: error: int cannot be dereferenced
if (player1.getValue() > player2.getValue())
                            ^
WarGame.java:35: error: int cannot be dereferenced
else if (player2.getValue() > player1.getValue())
            ^
WarGame.java:35: error: int cannot be dereferenced
else if (player2.getValue() > player1.getValue())
                                 ^
4 errors

----jGRASP wedge2: exit code for process is 1.
----jGRASP: operation complete. 
```

非常感谢您提供的任何帮助。

player1 和 player2 指的是每个玩家每轮得到的牌

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:26:21.867

player1 和 player2 是[整数](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)而不是[整数](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html)（这是一个 Java 类）。这意味着它们不是对象，也没有方法。你可以像“Sam I Am”所说的那样直接比较它们。

您也可以将它们转换为 Integers ：

```
if( (new Integer(player1)).compareTo(new Integer(player2)) > 0 ) 
```

但这毫无用处，因为您正在进行的比较不需要任何整数方法。

所以只需使用：

```
if (player1 > player2) 
```

您可以阅读[本主题](https://stackoverflow.com/questions/1514910/when-comparing-two-integers-in-java-does-auto-unboxing-occur)以了解有关整数自动装箱的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-25T22:00:17.273

```
// import needed classes and packages
import java.util.Scanner;
import java.text.NumberFormat;
import java.io.IOException;
import java.util.Locale;
import java.text.DecimalFormat;

public class Program2
{public static void main(String[] args) throws IOException
    {
    //Declare Variables
    //Creates the cards based on their suite
    Card heartCard;
    Card diamondCard;
    Card spadeCard;
    Card clubCard;
    int countingPlays = 0;

    Scanner keyboard = new Scanner(System.in); //Allows Input

    //creates the cardPile array called DeckOfCards
    CardPile deckOfCards = new CardPile();

    //Creates Player1's Card Pile
    CardPile player1Pile = new CardPile();

    //Creates Player2's Card Pile
    CardPile player2Pile = new CardPile();

    //Creates the cards to fill the array (1-14 of hearts/diamonds/spades/clubs).
    for(int i = 2; i < 15; i++)
    {
        char heart = '\u0003';
        char diamond ='\u0004';
        char spade = '\u0005';
        char club = '\u0006';

        deckOfCards.add(heartCard = new Card(heart, i));
        deckOfCards.add(diamondCard = new Card(diamond, i));
        deckOfCards.add(spadeCard = new Card(spade, i));
        deckOfCards.add(clubCard = new Card(club, i));
    }

    //prints out the deck of Cards
    System.out.println("Deck Of Cards: " + deckOfCards);

    //shuffles the cards
    deckOfCards.shuffle();

    //Prints out the deck of cards after they are shuffled
    System.out.println("Deck of Cards after shuffled: " + deckOfCards);

    //Checking the size of the Deck
    System.out.println("" + deckOfCards.size());

    //Takes the deckOfCards and splits them up into 2 piles for Player1 and Player2
    for(int i = 0; i < 26; i++)
    {
        player1Pile.add(deckOfCards.getTopCard());
        player2Pile.add(deckOfCards.getTopCard());
    }

    //Prints out the deck of Cards and then the player 1's pile and player 2's pile

    System.out.println("Player 1's Cards: " + player1Pile);
    System.out.println("Player 2's Cards: " + player2Pile);

    //checking the size of each players Pile

    //Prints the header for the game
    System.out.println("Lets have a war!!!");

    //Testing tricky spot where the getTopCard removes a the topcard
    /*
    Card removedTopCard = player1Pile.getTopCard();
    System.out.println("Getting player1Pile: " + removedTopCard);
    player1Pile.add(removedTopCard);
    System.out.println("Player1Pile is " + player1Pile);
    System.out.println("Player1Pile size is " +player1Pile.size());
    */

    //Starts the game of War
    try
    {   //do while the sizes of the player piles are greater than 0.
        do
        {
            //gets the top cards of each players Pile
            Card player1RemovedTopCard = player1Pile.getTopCard();
            Card player2RemovedTopCard = player2Pile.getTopCard();

            //Compares the 2 cards to test which is bigger. If player 1's card is smaller than player 2 is the winner
            if(player1RemovedTopCard.compareTo(player2RemovedTopCard) < player2RemovedTopCard.compareTo(player1RemovedTopCard))
            {
                System.out.println("Player 1: " + player1RemovedTopCard + " Player 2: " + player2RemovedTopCard);
                System.out.println("Player 2 is the Winner");
                player2Pile.add(player1RemovedTopCard);
                player2Pile.add(player2RemovedTopCard);
                System.out.println("Player 1 has: " + player1Pile.size() + " cards left.");
                System.out.println("Player 2 has:" + player2Pile.size() + " cards left.");
                System.out.println("\n");
                keyboard.nextLine();
            }
            //Compares the 2 cards to test which is bigger. If player 2's card is smaller than player 1 is the winner.
            else if(player1RemovedTopCard.compareTo(player2RemovedTopCard) > player2RemovedTopCard.compareTo(player1RemovedTopCard))
            {
                System.out.println("Player 1: " + player1RemovedTopCard + " Player 2: " + player2RemovedTopCard);
                System.out.println("Player 1 is the Winner");
                player1Pile.add(player1RemovedTopCard);
                player1Pile.add(player2RemovedTopCard);
                System.out.println("Player 1 has: " + player1Pile.size() + " cards left.");
                System.out.println("Player 2 has:" + player2Pile.size() + " cards left.");
                System.out.println("\n");
                keyboard.nextLine();
            }
            //Else it is a war
            else
            {
                System.out.println("Player 1: " + player1RemovedTopCard + " Player 2: " + player2RemovedTopCard);
                System.out.println("WAR!!!!!!!");
                //War if the player has only 4 cards left.
                if(player1Pile.size() == 1 || player2Pile.size() == 1)
                {
                    Card player1RemovedTopCard2 = player1Pile.getTopCard();

                    Card player2RemovedTopCard2 = player2Pile.getTopCard();
                    System.out.println("Player1's 2nd card is: " + player1RemovedTopCard2 + " Player2's 2nd card is: " + player2RemovedTopCard2);
                    if(player1RemovedTopCard2.compareTo(player2RemovedTopCard2) > player2RemovedTopCard2.compareTo(player1RemovedTopCard2))
                    {
                        System.out.println("Player 1 is the winner of the War! ");
                        player1Pile.add(player1RemovedTopCard);
                        player1Pile.add(player1RemovedTopCard2);
                        player1Pile.add(player2RemovedTopCard);
                        player1Pile.add(player2RemovedTopCard2);
                        System.out.println("Player 1 has: " + player1Pile.size() + " cards left.");
                        System.out.println("Player 2 has: " + player2Pile.size() + " cards left.");
                        System.out.println("\n");
                        keyboard.nextLine();
                    }
                    else if(player1RemovedTopCard2.compareTo(player2RemovedTopCard2) < player2RemovedTopCard2.compareTo(player1RemovedTopCard2))
                    {
                        System.out.println("Player 2 is the winner of the War! ");
                        player2Pile.add(player1RemovedTopCard);
                        player2Pile.add(player1RemovedTopCard2);
                        player2Pile.add(player2RemovedTopCard);
                        player2Pile.add(player2RemovedTopCard2);
                        System.out.println("Player 1 has: " + player1Pile.size() + " cards left.");
                        System.out.println("Player 2 has: " + player2Pile.size() + " cards left.");
                        System.out.println("\n");
                        keyboard.nextLine();
                    }
                    else
                    {
                        if(player2Pile.size() == 0)
                        {
                            player1Pile.add(player2RemovedTopCard2);
                            player1Pile.add(player2RemovedTopCard);
                            player1Pile.add(player1RemovedTopCard2);
                            player1Pile.add(player1RemovedTopCard);
                        }
                        else
                        {
                            player2Pile.add(player2RemovedTopCard2);
                            player2Pile.add(player2RemovedTopCard);
                            player2Pile.add(player1RemovedTopCard2);
                            player2Pile.add(player1RemovedTopCard);
                        }
                    }
                }
                //War if the player has only 2 cards left.
                else if(player1Pile.size() == 2 || player2Pile.size() == 2)
                {
                    Card player1RemovedTopCard2 = player1Pile.getTopCard();
                    Card player1RemovedTopCard3 = player1Pile.getTopCard();

                    Card player2RemovedTopCard2 = player2Pile.getTopCard();
                    Card player2RemovedTopCard3 = player2Pile.getTopCard();

                    do
                    {
                        System.out.println("Player1's 3rd card is: " + player1RemovedTopCard3 + " Player2's 3rd card is: " + player2RemovedTopCard3);
                        if(player1RemovedTopCard3.compareTo(player2RemovedTopCard3) > player2RemovedTopCard3.compareTo(player1RemovedTopCard3))
                        {
                            System.out.println("Player 1 is the winner of the War! ");
                            player1Pile.add(player1RemovedTopCard);
                            player1Pile.add(player1RemovedTopCard2);
                            player1Pile.add(player1RemovedTopCard3);
                            player1Pile.add(player2RemovedTopCard);
                            player1Pile.add(player2RemovedTopCard2);
                            player1Pile.add(player2RemovedTopCard3);
                            System.out.println("Player 1 has: " + player1Pile.size() + " cards left.");
                            System.out.println("Player 2 has: " + player2Pile.size() + " cards left.");
                            System.out.println("\n");
                            keyboard.nextLine();
                        }
                        else if(player1RemovedTopCard3.compareTo(player2RemovedTopCard3) < player2RemovedTopCard3.compareTo(player1RemovedTopCard3))
                        {
                            System.out.println("Player 2 is the winner of the War! ");
                            player2Pile.add(player1RemovedTopCard);
                            player2Pile.add(player1RemovedTopCard2);
                            player2Pile.add(player1RemovedTopCard3);
                            player2Pile.add(player2RemovedTopCard);
                            player2Pile.add(player2RemovedTopCard2);
                            player2Pile.add(player2RemovedTopCard3);
                            System.out.println("Player 1 has: " + player1Pile.size() + " cards left.");
                            System.out.println("Player 2 has: " + player2Pile.size() + " cards left.");
                            System.out.println("\n");
                            keyboard.nextLine();
                        }
                    //Continues the war if the top card at the end of the war are still equal
                    }while(player1RemovedTopCard3.compareTo(player2RemovedTopCard3) == player2RemovedTopCard3.compareTo(player1RemovedTopCard3));
                }
                //War if the player has only 3 cards left.
                else if(player1Pile.size() == 3 || player2Pile.size() == 3)
                {
                    Card player1RemovedTopCard2 = player1Pile.getTopCard();
                    Card player1RemovedTopCard3 = player1Pile.getTopCard();
                    Card player1RemovedTopCard4 = player1Pile.getTopCard();

                    Card player2RemovedTopCard2 = player2Pile.getTopCard();
                    Card player2RemovedTopCard3 = player2Pile.getTopCard();
                    Card player2RemovedTopCard4 = player2Pile.getTopCard();

                    do
                    {
                        System.out.println("Player1's fourth card is: " + player1RemovedTopCard4 + " Player2's fourth card is: " + player2RemovedTopCard4);
                        if(player1RemovedTopCard4.compareTo(player2RemovedTopCard4) > player2RemovedTopCard4.compareTo(player1RemovedTopCard4))
                        {
                            System.out.println("Player 1 is the winner of the War! ");
                            player1Pile.add(player1RemovedTopCard);
                            player1Pile.add(player1RemovedTopCard2);
                            player1Pile.add(player1RemovedTopCard3);
                            player1Pile.add(player1RemovedTopCard4);
                            player1Pile.add(player2RemovedTopCard);
                            player1Pile.add(player2RemovedTopCard2);
                            player1Pile.add(player2RemovedTopCard3);
                            player1Pile.add(player2RemovedTopCard4);
                            System.out.println("Player 1 has: " + player1Pile.size() + " cards left.");
                            System.out.println("Player 2 has: " + player2Pile.size() + " cards left.");
                            System.out.println("\n");
                            keyboard.nextLine();
                        }
                        else if(player1RemovedTopCard4.compareTo(player2RemovedTopCard4) < player2RemovedTopCard4.compareTo(player1RemovedTopCard4))
                        {
                            System.out.println("Player 2 is the winner of the War! ");
                            player2Pile.add(player1RemovedTopCard);
                            player2Pile.add(player1RemovedTopCard2);
                            player2Pile.add(player1RemovedTopCard3);
                            player2Pile.add(player1RemovedTopCard4);
                            player2Pile.add(player2RemovedTopCard);
                            player2Pile.add(player2RemovedTopCard2);
                            player2Pile.add(player2RemovedTopCard3);
                            player2Pile.add(player2RemovedTopCard4);
                            System.out.println("Player 1 has: " + player1Pile.size() + " cards left.");
                            System.out.println("Player 2 has: " + player2Pile.size() + " cards left.");
                            System.out.println("\n");
                            keyboard.nextLine();
                        }
                    //Continues the war if the top card at the end of the war are still equal
                    }while(player1RemovedTopCard4.compareTo(player2RemovedTopCard4) == player2RemovedTopCard4.compareTo(player1RemovedTopCard4));
                }
                //war if player has more than 4 cards
                else if(player1Pile.size() >= 4 || player2Pile.size() >= 4)
                {
                    Card player1RemovedTopCard2 = player1Pile.getTopCard();
                    Card player1RemovedTopCard3 = player1Pile.getTopCard();
                    Card player1RemovedTopCard4 = player1Pile.getTopCard();
                    Card player1RemovedTopCard5 = player1Pile.getTopCard();

                    Card player2RemovedTopCard2 = player2Pile.getTopCard();
                    Card player2RemovedTopCard3 = player2Pile.getTopCard();
                    Card player2RemovedTopCard4 = player2Pile.getTopCard();
                    Card player2RemovedTopCard5 = player2Pile.getTopCard();
                    do
                    {
                        System.out.println("Player1's 5th card is: " + player1RemovedTopCard5 + " Player2's 5th card is: " + player2RemovedTopCard5);
                        if(player1RemovedTopCard5.compareTo(player2RemovedTopCard5) > player2RemovedTopCard5.compareTo(player1RemovedTopCard5))
                        {
                            System.out.println("Player 1 is the winner of the War! ");
                            player1Pile.add(player1RemovedTopCard);
                            player1Pile.add(player1RemovedTopCard2);
                            player1Pile.add(player1RemovedTopCard3);
                            player1Pile.add(player1RemovedTopCard4);
                            player1Pile.add(player1RemovedTopCard5);
                            player1Pile.add(player2RemovedTopCard);
                            player1Pile.add(player2RemovedTopCard2);
                            player1Pile.add(player2RemovedTopCard3);
                            player1Pile.add(player2RemovedTopCard4);
                            player1Pile.add(player2RemovedTopCard5);
                            System.out.println("Player 1 has: " + player1Pile.size() + " cards left.");
                            System.out.println("Player 2 has: " + player2Pile.size() + " cards left.");
                            System.out.println("\n");
                            keyboard.nextLine();
                        }
                        else if(player1RemovedTopCard5.compareTo(player2RemovedTopCard5) < player2RemovedTopCard5.compareTo(player1RemovedTopCard5))
                        {
                            System.out.println("Player 2 is the winner of the War! ");
                            player2Pile.add(player1RemovedTopCard);
                            player2Pile.add(player1RemovedTopCard2);
                            player2Pile.add(player1RemovedTopCard3);
                            player2Pile.add(player1RemovedTopCard4);
                            player2Pile.add(player1RemovedTopCard5);
                            player2Pile.add(player2RemovedTopCard);
                            player2Pile.add(player2RemovedTopCard2);
                            player2Pile.add(player2RemovedTopCard3);
                            player2Pile.add(player2RemovedTopCard4);
                            player2Pile.add(player1RemovedTopCard5);
                            System.out.println("Player 1 has: " + player1Pile.size() + " cards left.");
                            System.out.println("Player 2 has: " + player2Pile.size() + " cards left.");
                            System.out.println("\n");
                            keyboard.nextLine();
                        }
                    //Continues the war if the top card at the end of the war are still equal
                    }while(player1RemovedTopCard5.compareTo(player2RemovedTopCard5) == player2RemovedTopCard5.compareTo(player1RemovedTopCard5));
                }
            }
            //Adds to the plays that keep track of how many plays have been made
            countingPlays++;
            //. If there are 10 plays it shuffles and prints out a message that the cards have been shuffled.
            if(countingPlays >= 10)
            {
                player1Pile.shuffle();
                player2Pile.shuffle();
                System.out.println("Cards Shuffled");
                //resets the counter to 0
                countingPlays = 0;
            }
        //Continues the game of war while the players piles are bigger than 0
        }while(player1Pile.size() > 0 || player2Pile.size() > 0);
    }

    //Catches the Array 0 error and prints out who is the winner based on who has zero cards.
    catch (IndexOutOfBoundsException theException)  //tries to catch this type...
        {
            if(player1Pile.size() == 0)
            {
                System.out.println("Winner is Player 2" );
            }
            else
            System.out.println("Winner is Player 1" );

        }

    } //end of main
}//end of class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:49:10.327

我猜了一半，但我认为你不需要打电话`getValue()`给你`int`的

像这样的声明

```
if (player1 > player2) 
```

很好，假设两者`player1`都是`player2`整数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T19:25:00.097

您需要获取 Card 中的对象的值`hands`。您目前实际上并没有为 and 分配任何`player1`东西`player2`。要获得卡片的价值，您需要调用`.getValue()`实际对象，例如`int player1 = hands[0][0].getValue();`

我更新了您的`main`函数以演示它的外观，还进行了一些其他更改，这些更改可能会在以后对您有所帮助。

```
public static void main(String[] args) {

    Card[][] hands = new Card[2][1];
    Deck myDeck = new Deck();

    //reduced this to 26 iterations because two cards are dealt each iteration
    for (int i = 0; i < 26; i++) {
        System.out.printf("\n Round %s of The War \n", i);

        //You really don't need to loop just once here...
        //Simply assign the card to hands[player][0] since that's the only option
        //for (int c = 0; c < 1; c++)
            for (int player = 0; player < hands.length; player++)
                hands[player][0] = myDeck.dealCard();

        for (int player = 0; player < hands.length; player++) {
            System.out.printf("Player %d: ", player);
            printHand(hands[player]);
        }

        int player1 = hands[0][0].getValue(); //get the value from the Card object
        int player2 = hands[1][0].getValue();

        if (player1 > player2)
            System.out.println("Player One Wins The War");
        else if (player2 > player1)
            System.out.println("Player Two Wins The War");
        else
            System.out.println("The War Is A Tie");

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-30T23:11:45.057

对于 shuffle 方法，您可以使用以下代码：

```
public void shuffle()
{
    Collections.shuffle(deck);
} 
```

# performance - 排序算法的内存速度权衡

> ID：15345118
> 
> 赞同：1
> 
> 时间：2013-03-11T17:45:30.410
> 
> 标签：performance, algorithm, sorting, memory, complexity-theory

只考虑冒泡排序和归并排序。对于冒泡排序，时间复杂度为 O(n)，最坏情况为 O(n^2)，空间复杂度为 O(1)。对于归并排序，时间复杂度为 O(nlogn)，空间复杂度为 O(n)。如果输入的大小小于 1000，您会选择哪种类型，为什么？超过1000个呢？

这是我遇到的一个面试问题。就是想知道大家怎么回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:06:24.860

> 只考虑冒泡排序和归并排序。

少于 1000，这可能意味着 RAM 对于任何没有外部存储的排序算法都足够了。这也意味着在这种情况下，时间复杂度的理论界限并不重要。您可以选择任何您喜欢的排序算法，而不会产生任何时间损失。例如，您可以进行冒泡排序，因为它可能易于实现且直观。合并排序同样好。

当输入大小大于 1000 时，可能会假设时间复杂度很重要，甚至如果没有外部存储，RAM 可能不够大。在这种情况下，如果您必须在两者之间进行选择，归并排序是最安全的选择。这是因为合并排序比冒泡排序具有更好的最坏情况性能，并且合并排序是[外部排序](http://en.wikipedia.org/wiki/External_sorting)的良好候选者（当输入大小大于 RAM 时）。

# javascript - 如何让用户通过我的自定义域访问 amazon s3 html/javascript 页面？

> ID：15345137
> 
> 赞同：6
> 
> 时间：2013-03-11T17:46:22.480
> 
> 标签：javascript, ssl, amazon-s3, boto, cname

我有一个金字塔/python 应用程序，其页面位于 www.domain.com，它在 s3.amazonaws.com/testbucket/object_name 处创建 html 页面。现在在这个测试桶中，我还有每个对象（html 页面）使用的 javascript 文件。我想要它，以便用户可以转到 subdomain.domain.com/object_name 并查看启用了 javascript 的文件。我已将 subdomain.domain.com（我的存储桶的名称）命名为 s3.amazonaws.com。（最后一个时期在最后）。现在我有两个问题（我更关心第二个）

1）。[当我尝试通过https://subdomain.domain.com/object_name](https://subdomain.domain.com/object_name)访问 url 时出现安全错误（我认为这是因为它正在重定向到 amazon s3 存储桶。如何获取存储桶的 ssl 证书？

2）当我尝试通过[http://subdomain.domain.com/object_name](http://subdomain.domain.com/object_name)访问 url 时，没有安全错误（不是 https），但没有启用 javascript。如何确保 s3 存储桶上的那些 jacvascript 文件仍然有效？

编辑：在查看开发人员工具时，我看到错误：加载资源失败：服务器响应状态为 403（禁止），指的是 javascript 文件。为什么我在bucket中公开了这个文件会被禁止？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:15:52.673

S3 不允许您为存储桶配置自己的 SSL 证书 - 这是 S3 设计和跨服务器分布的方式的继承“问题” - 亚马逊提供自己的证书用于 S3，无需配置。

**但是**，这非常重要 - 您不能在 CNAME 上使用 SSL，期间。如果您想使用 S3 将漂亮的域名与 SSL 一起使用，那么您就不走运了。它只是我们必须忍受的 S3 怪癖。（[https://forums.aws.amazon.com/thread.jspa?threadID=60502](https://forums.aws.amazon.com/thread.jspa?threadID=60502)）。

总之，如果要使用 SSL，则必须使用完整的 S3 存储桶路径。

# visual-studio-2012 - 如何在 Visual Studio 2012 中包含 TypeScript 文件并编译整个文件？

> ID：15345138
> 
> 赞同：3
> 
> 时间：2013-03-11T17:46:22.807
> 
> 标签：visual-studio-2012, typescript, web-essentials

我已经安装了最新版本的 TypeScript 以及最新版本的 Web Essentials。我在 VS2012 中创建了一个新的 TypeScript 项目。

如果有`utils.ts`：

```
moduls utils
{
    export function getNumber() {
        return 4;
    }
} 
```

还有一个`app.ts`：

```
/// <reference path="utils.ts" />

alert(utils.getNumber().toString()); 
```

JavaScript 文件都是单独编译的。但是要`app.js`正常工作，`utils.ts`显然必须包含已编译的源代码。

当我`tsc app.ts -out app.js`在控制台中运行时它确实有效，但我不想每次都手动运行它。

**为什么 Web Essentials 不能为我做这些？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:15:59.880

我安装了 Web Essentials，因为我喜欢并排编辑，但我使用项目文件中的 TypeScript 编译器来编译单个输出。

详细信息在这里： http: [//www.stevefenton.co.uk/Content/Blog/Date/201301/Blog/Getting-The-Right-Set-Up-For-TypeScript/](http://www.stevefenton.co.uk/Content/Blog/Date/201301/Blog/Getting-The-Right-Set-Up-For-TypeScript/)

但是您的项目文件的代码块是：

```
<Target Name="BeforeBuild">
    <Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\$(TypeScriptVersion)\tsc&quot; --out final.js @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
</Target> 
```

您可能会发现这在您的项目文件中大部分已经存在，您只需要添加 --out 标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T07:45:41.120

我正在为 Web/TypeScript0.9.0.1 使用 VS2012 express，但上述方法不起作用。万一其他人对该设置有此问题，我确实得到了类似的解决方法

1.  在 Project Properties -> Build Events -> Pre-build event 命令行中我添加了：`"C:\Program Files (x86)\Microsoft SDKs\TypeScript\tsc.exe" --target ES5 $(ProjectDir)app.ts -out $(ProjectDir)Final.js`

2.  修改 default.htm 以加载`Final.js`而不是`app.js`

# google-chrome - 在 chrome 调试中检查脚本而不会失去滚动网页的能力

> ID：15345139
> 
> 赞同：5
> 
> 时间：2013-03-11T17:46:23.247
> 
> 标签：google-chrome, google-chrome-devtools

当我在脚本中设置了一些断点时，谷歌浏览器删除了滚动网页的能力，在屏幕顶部说`Paused in debugger`。有没有办法禁用它，以便我可以查看页面各个部分的元素，同时也可以查看调试器中的脚本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-20T15:04:21.650

取自[这里](http://www.lukerodgers.ca/2012/10/scrolling-while-paused-in-chrome-debugger/)。

滚动锁定的一个简单解决方法是跳转到控制台，并且：

`window.scrollTo(0, 800)`. （根据需要更换 800）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T03:44:19.490

您可以单击“元素”选项卡，然后将 HTML 悬停在您感兴趣的元素上，然后右键单击“滚动到视图”。不是最自然和最快速的，但它确实有效......

# vb.net - vb.net - 转发器控件中的数据绑定表达式的自定义模板问题

> ID：15345140
> 
> 赞同：1
> 
> 时间：2013-03-11T17:46:25.527
> 
> 标签：vb.net, templates, data-binding, custom-controls, repeater

我是新来的，但在寻找答案时我已经浏览了一段时间的 stackoverflow。

这是问题所在：我正在尝试使用多个条件模板实现自定义转发器，以避免模板中的尽可能多的测试

至于现在我的 ascx 代码看起来像这样：

```
<custom:Repeater runat="server">
    <headerTemplate>...</headerTemplate>
    <templates>
    <custom:template match="[filter1]"><contents>[filter1] is true for <%# Container.DataItem.ID%></contents></custom:template>
    <custom:template match="[filter2]"><contents>[filter2] is true for <%# Container.DataItem.ID%></contents></custom:template>
    </templates>
</custom:Repeater> 
```

除了这种语法太冗长之外，以下代码有效

```
<custom:template match="[filter1]"><contents><%# TypeOf Container is IDataItemContainer%></contents></custom:template> 
```

但是这段代码失败了

```
<custom:template match="[filter1]"><contents>[filter1] is true for <%# Container.DataItem.ID%></contents></custom:template> 
```

我收到错误消息：：“DataItem”不是“System.Web.UI.Control”的成员。似乎 vb 试图在编译时而不是在数据绑定时解析模板内容

这是我的vb课程

```
<ParseChildren(True, "contents")>
Public Class Template : Inherits WebControl : Implements ITemplate
    Private _match As String
    <PersistenceMode(PersistenceMode.Attribute)>
    Public Property match() As String
        Get
            Return _match
        End Get
        Set(ByVal value As String)
            'TODO compile filter as an expression
            _match = value
        End Set
    End Property

    Private _source As ITemplate
    <PersistenceMode(PersistenceMode.Attribute)>
    Public Property contents() As ITemplate
        Get
            Return Nothing
        End Get
        Set(ByVal value As ITemplate)
            _source = value
        End Set
    End Property

    Public Sub InstantiateIn(container As System.Web.UI.Control) Implements System.Web.UI.ITemplate.InstantiateIn
        _source.InstantiateIn(container)
    End Sub
End Class

<ParseChildren(True)>
Public Class ApplyTemplate : Inherits Repeater

    _template as List(Of Template)
    <PersistenceMode(PersistenceMode.InnerProperty), TemplateContainerAttribute(GetType(Template))>
    Public Overloads Property templates() As List(Of Template)
        Get
            Return Nothing
        End Get
        Set(value As List(Of Template))
            _templates = value
        End Set
    End Property

End Class 
```

**如何在模板的内容中添加数据绑定表达式？**

提前致谢。

最大限度。

PS：是否有可能（以及如何；））压缩 ascx 代码，使其看起来像这样：

```
<custom:Repeater runat="server">
    <headerTemplate>...</headerTemplate>
    <custom:template match="[filter1]">[filter1] is true for <%# Container.DataItem.ID%></custom:template>
    <custom:template match="[filter2]">[filter2] is true for <%# Container.DataItem.ID%></custom:template>
    ...
</custom:Repeater> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:47:12.870

最后我有时间再次处理这个问题，感谢这个链接（[http://www.codeproject.com/Articles/21521/Creating-a-Templated-User-Control](http://www.codeproject.com/Articles/21521/Creating-a-Templated-User-Control)）我能够实现我自己的自定义转发器我想。

所以现在aspx代码看起来像这样

```
<custom:Repeater runat="server" >
    <headerTemplate>...</headerTemplate>
    <separatorTemplate on="1,9">some advertisement snippet</separatorTemplate>
    <separatorTemplate every="2"><hr/></separatorTemplate>
    <itemTemplate match="[filter1]"><source>[filter1] is true for <%# Container.DataItem.ID%></source></itemTemplate>
    <itemTemplate match="[filter2]"><source>[filter2] is true for <%# Container.DataItem.ID%></source></itemTemplate>
    ...
</custom:Repeater> 
```

如果需要，仍然需要内部源标记以允许模板中的代码块。如果有人知道如何删除它并仍然保留具有元数据属性的功能，请发表评论。

所以对于vb代码，这里是类骨架

```
Public Class Repeater
    Inherits System.Web.UI.UserControl ' I use a UserControl so i can add support any html-bound attributes like class, style, data-*... without hardcoding them in the class

    Private templates As New List(Of TemplateItem)
    <PersistenceMode(PersistenceMode.InnerProperty)>
    Public WriteOnly Property itemTemplate() As TemplateItem
        Set(value As TemplateItem)
            value.Container = Me 'to bind the container to the template instead of passing the reference on instanciation
            templates.Add(value)
        End Set
    End Property

    Public Overrides Sub DataBind()
        If Not IsNothing(datasource) Then 'this to avoid nested controls Databind method to be called twice
            [... iterate on dataitems]
            [... template selection on best matching filters]
                templates.instantiateFor(dataitem) ' to instanciate the template for the current item
            [... iteration done]
            MyBase.DataBind() ' to bind the newly created controls
        End If
    End Sub
    ...
End Class

'
<ParseChildren(True, "source")>
Public Class TemplateItem
    Inherits Control

    Friend Container As Repeater

    'handle as many attributes as you want here
    Private _matchExpression As String
    <PersistenceMode(PersistenceMode.Attribute)>
    Public Property match() As String
        Get
            Return _matchExpression
        End Get
        Set(value As String)
            _matchExpression = value
        End Set
    End Property

    'Now the simple part for parsing the inner code has a template
    'I use the standard RepeaterItem class as the template container because i don't need more features for now
    Private _source As ITemplate
    <PersistenceMode(PersistenceMode.InnerDefaultProperty)>
    <TemplateContainer(GetType(RepeaterItem))>
    Public Property source() As ITemplate
        Get
            Return _source
        End Get
        Set(value As ITemplate)
            _source = value
        End Set
    End Property

    'now the part to instantiate as template for a given item
    Public Sub instantiateFor(Item As Object, Optional itemIndex As Integer = -1)
        Dim instantiator = New RepeaterItem(itemIndex, ListItemType.Item)
        instantiator.DataItem = Item
        _source.InstantiateIn(instantiator)
        Container.Controls.Add(instantiator)
    End Sub
End Class 
```

等等等等……终于！！希望这会有所帮助

# facebook - Like 按钮执行两个功能

> ID：15345143
> 
> 赞同：0
> 
> 时间：2013-03-11T17:46:35.990
> 
> 标签：facebook, facebook-graph-api, interface

我想知道是否有一种方法可以创建一个类似 facebook 的按钮，当您在 Facebook 上缩短特定帖子并在我的数据库中记录用户的姓名时，该按钮会单击，或者通过单击按钮来完成两个功能，一个在 facebook 上和我的数据库中的一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:20:28.137

您可以使用 Facebook [Like 按钮插件](https://developers.facebook.com/docs/reference/plugins/like/)，它可以让您给它一个 Javascript 回调。您可以使用 AJAX 将此回调链接到您的数据库。

编辑：

你问了一个例子。

首先，您在全局范围内编写一个 javascript 函数。这是当有人单击“赞”按钮时您想要执行的功能。假设你这样声明：

```
function logFacebookLike(response) {
    // AJAX to log to database
} 
```

现在，在您加载按钮后的某个时间点，您订阅 Facebook edge.create 事件并给它您的回调。Facebook 将运行您的函数并传入一些数据（作为响应变量）。您可以像这样订阅事件：

```
FB.Event.subscribe('edge.create', logFacebookLike); 
```

而已。[您可以在Facebook Javascript 文档](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)中了解更多信息。如果您想要一个 AJAX 示例，那么您需要创建一个具有更具体上下文的不同问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:50:18.590

使用 jquery 将类或 id 添加到您的 facebook like 按钮，并使用 josaphatv 提到的单击功能触发一个回调函数到您的数据库，使用 AJAX 保存您需要的信息。

# javascript - 使用 jquery 重新加载/刷新页面部分

> ID：15345144
> 
> 赞同：0
> 
> 时间：2013-03-11T17:46:41.710
> 
> 标签：javascript, jquery, html, css

我有一个分解为 DIVS 的 HTML 页面。每个 div 包含一个特定的部分。一次只显示一个部分。我的要求是在每个部分从一个部分移动到另一个部分时刷新它。请查看以下 URL 中的代码，

[http://jsfiddle.net/martyk/VE4sU/15/](http://jsfiddle.net/martyk/VE4sU/15/) jquery 代码，

```
 // overwrite $jScroller to supply asynchronous callback when end has been reached:
    $jScroller.scroll = function() {
      for (var i in $jScroller.config.obj) {
           if ($jScroller.config.obj.hasOwnProperty(i)) {
               var
                obj        = $jScroller.config.obj[i],
                left       = Number(($jScroller.get.px(obj.child.css('left'))||0)),
                top        = Number(($jScroller.get.px(obj.child.css('top'))||0)),
                min_height = obj.parent.height(),
                min_width  = obj.parent.width(),
                height     = obj.child.height(),
                width      = obj.child.width();

               if (!obj.pause) {
                   switch(obj.direction) {
                    case 'up':
                     if (top <= -1 * height) {
                         $jScroller.stop();
                         obj.child.css('top','0px');
                         manager.callback();
                         break;
                     }
                     obj.child.css('top',top - obj.speed + 'px');
                    break;
                    case 'right':
                     if (left >= min_width) {left = -1 * width;}
                     obj.child.css('left',left + obj.speed + 'px');
                    break;
                    case 'left':
                     if (left <= -1 * width) {left = min_width;}
                     obj.child.css('left',left - obj.speed + 'px');
                    break;
                    case 'down':
                     if (top >= min_height) {top = -1 * height;}
                     obj.child.css('top',top + obj.speed + 'px');
                    break;
                   }
               }
           }
      }
    }

    $jScroller.start = function() {
        if ($jScroller.cache.timer === 0 && $jScroller.config.refresh > 0) {
            $jScroller.cache.timer = window.setInterval($jScroller.scroll, $jScroller.config.refresh);
        }
    };

$(document).ready(function() {

        function SectionManager() {
            this.delayShortList = 15000;
            this.marginShortList = 12;
            this.currentSection = null;
            this.sections = $("#content .section");
            this.numSections = this.sections.length;

            this.transition = function (){
                    //SCROLLER CODE STARTS HERE....
                     $jScroller.config.refresh = 100;
                    // Add Scroller Object
                    $jScroller.config.obj = [];
                    $jScroller.add(
                        "#content .section.active .activityTbl"
                        ,"#content .section.active .activityTbl > table"
                        ,"up"
                        , 3
                    );
                    // Start Autoscroller
                    $jScroller.start();
                    $jScroller.cache.init = true;
                    //SCROLLER CODE ENDS HERE....
            };
            this.onFullCycleCompleted = function () {
                //window.location.replace(window.location.href);
                alert("the following will trigger a page reload (UNLESS run from within jsfiddle): window.location.replace(window.location.href);");
            };
            this.callback = function () {
                if (this.currentSection >= this.numSections-1) {
                    this.onFullCycleCompleted();
                };
                this.currentSection = (this.currentSection != null)
                    ? (this.currentSection + 1) % this.numSections
                    : 0
                ;
                $("#content .section").removeClass("active");
                var $currentSection = $("#content .section:eq(" + this.currentSection + ")");
                $currentSection.addClass("active");
                var itemCount = $(".activityTbl table.data tr", $currentSection).length;
                if (itemCount < this.marginShortList) {
                    setTimeout(function() {
                        manager.transition();
                    }, this.delayShortList);
                } else {
                    this.transition();
                };
            };

            this.run = function(){
                this.callback();
            };

        }

        manager = new SectionManager();
        manager.run();

}); 
```

该页面基本上显示 Activity1 然后 Activity2 等等。我的要求是在显示内容之前从 Activity1 移动到 Activity2 时刷新内容。这样我就可以从服务器获得最新信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:17:00.893

当一个部分处于活动状态时（在`this.callback`函数中或中`.run`）添加一个[ajax 调用](http://api.jquery.com/jQuery.ajax/)来获取您的数据

```
 $.ajax() 
```

对于当前+1部分并将[其填充到该](http://api.jquery.com/html/)部分的html中

```
 $(yoursectiondata).html() 
```

**编辑：**回调函数的 ajax 调用 addet 将是这样的：

```
 var nextSection = this.currentSection + 1;
    $.ajax({
        url: 'your data source or update_script.php',
        data: {'section_id': nextSection },
        dataType: 'html',
        type: 'GET',
        success: function (result) {
            $("#content .section:eq(" + nextSection + ")").html(result);
        }
    }); 
```

**编辑：**由于您坚持要重新加载页面而不仅仅是检索该部分。这样做的唯一方法是告诉您的服务器您在哪个部分，以便新服务的页面知道从哪个部分继续。这绝对是不太优雅的选择，所以我想鼓励您使用 ajax 调用。但是，这就是它的工作方式：

1.  在一个部分完成后，您调用并`sectionid`通过 GET 传递给服务器

    ```
    var nextSection = this.currentSection + 1;
    window.location.replace('your-page-url/page.php?sectionid=' + nextSection) 
    ```

2.  在服务器上，您获取您的部分 id 并将其与新页面一起传回（服务器端您将其集成到表格中，或重新排序部分，无论如何），在 php 中是这样的：

    ```
    //get the section id
    $sectionid = $_GET['sectionid'];
    // for example integrate the id somewhere on the page
    echo "<input type='hidden' id='sectionid' value=".$sectionid." />" 
    ```

3.  当 DOM 在浏览器中加载时，可以使用 jQuery 检索 sectionid

    ```
    var sectionid = $("sectionid").val(); 
    ```

现在您可以`sectionid`在 jQuery 脚本中使用它来显示部分内容。

但是，如果您在每个部分之后都执行此操作，那么您最好在页面上一次加载一个部分，因为您一次不会显示更多。我不明白为什么您更喜欢这种方法而不是 ajax 调用。但是给你。

**最后编辑：**

这是我的最终解决方案。不，您不能只是在每个部分之后重新加载页面并神奇地期望它会知道从哪里开始。但是使用 ajax，您可以调用同一个 html 页面并提取下一部分并将其放入当前页面的 DOM 中。

```
 $.ajax({
                url: 'your-page.html',
                dataType: 'html',
                success: function (result) {
                   content1 = $(result).find("#content .section:eq(" + nextSection + ")").html();
                   $("#content .section:eq(" + nextSection + ")").html(content1);
                },
                error: function (result) {
                   $("#content .section:eq(" + nextSection + ")").html("error refreshing");
                }
            }); 
```

[我把这段代码也放在了 jsfiddle 上。](http://jsfiddle.net/VE4sU/18/)

有了这样的解决方案，您还可以取消`onFullCycleCompleted`重新加载，因为这些部分始终是最新的。

# jmeter - 我如何在 JMeter 中运行这种类型的线程？

> ID：15345146
> 
> 赞同：0
> 
> 时间：2013-03-11T17:46:54.727
> 
> 标签：jmeter

我加载了 6 个线程并且它同时运行，但我想放入计时器以使其以下列方式工作：

*   线程组 1 在测试开始时开始
*   5 分钟后线程组 2 与线程组 1 并行启动
*   再过 5 分钟线程组 3 开始，再次并行
*   又过了 5 分钟，线程组 4 启动。这是组使用文件并在文件末尾停止，只留下线程组 1、2 和 3 运行。
*   短暂的停顿（10 秒？）
*   然后线程组 5 启动，再次从文件驱动
*   完成后，线程组 6 开始
*   完成后，测试结束：所有线程都应该停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:37:14.490

您应该能够使用[While Controller](http://jmeter.apache.org/usermanual/component_reference.html#While_Controller)处理此问题。

根据您在 BeanShell 或 Javascript 方面的专业知识，这可能非常容易或有点困难。您可以在第一个线程中添加一个计数器，在计数器达到一个数字后，它会启动第二组。它将使循环运行为假，然后当它变为真时，下一组将开始。

您还可以查看控制器的计时器部分。同样，使用 Beanshell 或 Javascript 会延迟启动。

对不起，但我没有更具体的例子。这些应该让你开始。

# jquery - Jquery 显示和隐藏元素

> ID：15345148
> 
> 赞同：0
> 
> 时间：2013-03-11T17:47:05.037
> 
> 标签：jquery, show-hide

我想知道是否有一种更简单的方法来编写我刚刚在下面所做的事情。基本上，该网站的整个想法是，您单击一个链接......然后它会向您显示两个单选按钮，选择一个会给您另一组链接，单击它会给您一个表格....和同样的事情与另一个单选按钮。

```
 <script type="text/javascript">
            $('.topreports').toggleClass('reportshovered');
            $('#clickapp').click(function () {
                $('#pendingappsasgn').hide();
                $('#closedappsasgn').hide();
                $('#pendingapptableasgn').hide();
                $('#adminpendingasgn').hide();
                $('#closedapptableasgn').hide();
                $('#closedpendingasgn').hide();
                $('#comp1').hide();
                $('#comp').slideDown('200');
            });

            $('#clickapp').click(function () {
                $('#comp1').hide();
                $('#closedapps').hide();
                $('#comp').slideDown('200');

                //pending radio buttons

                if ($('#app1').click(function () {
                     $('#closedapps').hide();
                    $('#closedpending').hide();
                    $('#closedapptable').hide();
                    $('#pendingapps').slideDown('200');

                }));

                //closed radio buttons

                if ($('#app2').click(function () {
                    $('#pendingapps').hide();
                    $('#pendingapptable').hide();
                    $('#adminpending').hide();
                    $('#closedapps').slideDown('200');

                }));

                //2 pending links

                if ( $('#reporttemp').click(function () {
                    $('#adminpending').hide();
                    $('#pendingapptable').slideDown('200');

                }));

                if ( $('#reportadmin').click(function(){
                        $('#pendingapptable').hide();
                        $('#adminpending').slideDown('200');
                }));

                //Closed Approval Links

                if ( $('#closedtemps').click(function () {
                        $('#closedpending').hide();
                        $('#closedapptable').slideDown('200');

                }));

                if ( $('#closedadmin').click(function () {
                    $('#closedapptable').hide();
                    $('#closedpending').slideDown('200');

                }));

            });

            //Assigned Approval list

            $('#clickassigned').click(function () {
                $("input:radio").removeAttr("checked");
                $('#comp').hide();
                $('#pendingapps').hide();
                $('#closedapps').hide();
                $('#pendingapptable').hide();
                $('#adminpending').hide();
                $('#closedapptable').hide();
                $('#closedpending').hide();
                $('#comp1').slideDown('200');

            });

            //assigned Approval Pending Radio
            if ($('#asgnpending').click(function () {
                     $('#closedappsasgn').hide();
                     $('#closedpendingasgn').hide();
                     $('#closedapptableasgn').hide();
                     $('#pendingasgn').slideDown('200');

            }));

            //Assigned Approval closed radio buttons

            if ($('#asgnclosed').click(function () {
                    $('#pendingasgn').hide();
                    $('#pendingapptableasgn').hide();
                    $('#adminpendingasgn').hide();
                    $('#closedappsasgn').slideDown('200');

            }));
            if ($('#reporttempasgn').click(function () {
                     $('#adminpendingasgn').hide();
                     $('#pendingapptableasgn').slideDown('200');

            }));

            if ($('#reportadminasgn').click(function () {
                     $('#pendingapptableasgn').hide();
                     $('#adminpendingasgn').slideDown('200');
            }));

            //Closed Approval Links

            if ($('#closedtempsasgn').click(function () {
                    $('#closedpendingasgn').hide();
                    $('#closedapptableasgn').slideDown('200');

            }));

            if ($('#closedadminasgn').click(function () {
                    $('#closedapptableasgn').hide();
                    $('#closedpendingasgn').slideDown('200');

            })); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:48:45.130

您可以将类分配给相似的元素，并使用类选择器将它们全部隐藏。

```
$(".classSelect").hide(); 
```

# ios - 从 iOS 应用上传到自己的 YouTube 帐户

> ID：15345153
> 
> 赞同：1
> 
> 时间：2013-03-11T17:47:16.887
> 
> 标签：ios, upload, youtube

该应用程序应该将视频从 iOS 设备直接上传到我们自己的 YouTube 帐户（而不是用户的帐户）。

在我遇到的每种情况下，您都需要一个访问令牌，您只能从通过 OAuth2 登录的用户获得（弹出窗口）。显然，我们不能从公司帐户中为每个人提供用户名和密码。我在想象使用一些唯一标识要使用的应用程序和 YouTube 用户帐户的密钥。

任何解决方案/指针？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:47:14.953

我最终使用了已弃用的客户端登录。我们仍然需要弄清楚密码的存储位置（在客户端应用程序中，或者每次都从后端获取），但这已经是一个巨大的进步。

不幸的是，谷歌表示客户端登录将在 2015 年被删除。我们只能希望他们届时会提出不需要用户交互的非交互式身份验证方法。

# c++ - glutWarpPointer 多次调用 glutPassiveMotionFunc 回调

> ID：15345154
> 
> 赞同：0
> 
> 时间：2013-03-11T17:47:19.837
> 
> 标签：c++, graphics, 3d, glut

我正在实现一个 FPS 风格的鼠标外观来“飞”在我的场景周围。

我有正确的相机旋转和一切，我唯一的问题是当我尝试将鼠标扭曲到屏幕中间时，它会多次调用 glutPassiveMotionFunc 回调。所以不是传送鼠标，而是通过几个动作将它移动到那里。这些运动得到处理并将相机移回原始位置。

如何检查鼠标是否实际被移动并且它不是由 glutWarpPointer 函数触发的。

如果指针位于屏幕中间，我尝试不处理移动，但这无济于事。

我希望我的程序在 Linux 和 Windows 上运行，所以我不能使用操作系统特定的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:34:49.303

我不会称这是一个很好的解决方案，但它应该可以工作：

```
bool isWarpingPointer = false;

void MyPassiveMovementCallback()
{
    if (isWarpingPointer)
    {
        return;
    }

    //proceed normally
}

//elsewhere
isWarpingPointer = true;
glutWarpPointer();
isWarpingPointer = false; 
```

# vb.net - VB.Net - 从后台工作人员更新进度条

> ID：15345155
> 
> 赞同：2
> 
> 时间：2013-03-11T17:47:21.340
> 
> 标签：vb.net, visual-studio-2010, progress-bar, backgroundworker

我正在尝试在 VB.Net 中构建一个日志解析器，它将获取 IIS 日志并将它们插入数据库。从来没有真正制作过完整的桌面应用程序，我遇到了许多绊脚石，所以如果我的问题非常不知情，请原谅我；我一边跑步一边学走路。

我正在使用的代码如下所示：

```
 Protected Overrides Sub OnLoad(ByVal e As System.EventArgs)
    MyBase.OnLoad(e)
    BackgroundWorker1.RunWorkerAsync()
End Sub

Private Sub BackgroundWorker1_DoWork(ByVal sender As System.Object, ByVal e As DoWorkEventArgs) Handles BackgroundWorker1.DoWork
    Dim logfile = "C:\ex111124.log"
    Dim FileLength As Long = New System.IO.FileInfo(logfile).Length
    logFileLabel.Text = logfile

    Dim objReader As New System.IO.StreamReader(logfile)
    Do While objReader.Peek() <> -1
        OngoingLog.AppendText(objReader.ReadLine)
        'BackgroundWorker1.ReportProgress(e.percentProgress)
        Loop()
    objReader.Close()
    objReader = Nothing

End Sub

Private Sub BackgroundWorker1_ProgressChanged(ByVal sender As Object, ByVal e As ProgressChangedEventArgs) Handles BackgroundWorker1.ProgressChanged
    'Me.crunchingProgress.Value = e.ProgressPercentage
End Sub

Private Sub BackgroundWorker1_RunWorkerCompleted(ByVal sender As Object, ByVal e As RunWorkerCompletedEventArgs) Handles BackgroundWorker1.RunWorkerCompleted
    Close()
End Sub 
```

所以这个函数起作用了，当这个窗口打开时，它开始读取日志文件并更新一个包含当前读取的所有行的文本框，但我还希望它在我的主线程中更新一个名为 crunchingProgress 的进度条。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:51:58.660

这应该可以解决问题：

```
Private Sub BackgroundWorker1_ProgressChanged(ByVal sender As Object, ByVal e As ProgressChangedEventArgs) Handles BackgroundWorker1.ProgressChanged
    Invoke(Sub()
        Me.crunchingProgress.Value = e.ProgressPercentage
    End Sub)
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T18:13:16.573

您没有将 BackgroundWorker 设置为报告进度（[WorkerReportsProgress](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.workerreportsprogress.aspx)）

```
BackgroundWorker1.WorkerReportsProgress = True
BackgroundWorker1.RunWorkerAsync() 
```

Now your `BackgroundWorker1_ProgressChanged` will be called in the context of the UI Thread and you can set the progressbar value

Of course, when you call ReportProgress to raise the ProgressChanged event, you need to pass the percentage of work done so far.

```
Using objReader As New System.IO.StreamReader(logfile)
    Do While objReader.Peek() <> -1
        Dim line = objReader.ReadLine()
        OngoingLog.AppendText(line)
        Dim pct = Convert.ToInt32((100 * line.Length) / FileLength )
        BackgroundWorker1.ReportProgress(pct)
    Loop
End Using 
```

# java - 在Java中获取对象名称

> ID：15345159
> 
> 赞同：2
> 
> 时间：2013-03-11T17:47:44.353
> 
> 标签：java

如何获取对象名称？例如

```
Objet o = new Object(); 
```

我想得到这个“o”并打印出来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:06:03.597

如果您想为您创建的对象创建一个标识符，您可以简单地拥有一个包含您创建的每个对象的标识符的对象实例。

例如，如果您有一个名为 的类`Car`，那么该类可以有一个`String`名为 id 的变量，它可以与创建的每个 Car 对象一起使用，以赋予该对象一个标识符。例如

```
class Car 
{
    private String id;

    public Car(String id)
    {
        this.id = id;
    }
} 
```

然后，现在当您创建 Car 对象时，将该对象的唯一标识符传递给构造函数：

```
Car car1 = new Car("c1"); 
```

然后，如果您想获取每辆车的 id，则可以使用返回特定汽车对象的 id 字段的 getter 方法。例如：

```
public String getId()
{
   return id;
} 
```

然后您可以通过执行以下操作获取 car1 的 id：

```
System.out.println(car1.getId()); 
```

希望这就是你要找的。

# adobe - Powerbuilder 9-如何使用 adobe writer 而不是 Ghostscript 进行 SaveAs()

> ID：15345160
> 
> 赞同：2
> 
> 时间：2013-03-11T17:47:55.787
> 
> 标签：adobe, ghostscript, powerbuilder

我们有 Adob​​e PDF writer，希望能够使用它来代替 ghostscript。SaveAs() 函数是否锁定在 ghostscript 中，如果是，我如何使用 adobe pdf writer 来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:32:37.933

I think this could be the solution:

[http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.dc00844_1150/html/pbug/pbug526.htm](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.dc00844_1150/html/pbug/pbug526.htm)

The key change is that you need to create your own printer not using the GhostScript files than the files shipped with Adobe.

I think you should create your Adobe PDF Printer in this way:

[http://www.ehow.com/how_5782035_add-adobe-pdf-printer.html](http://www.ehow.com/how_5782035_add-adobe-pdf-printer.html)

So you should add a local printer with using this file:

> C:\Program Files\Adobe\Acrobat 9.0\Acrobat\Xtras\AdobePDF". Click the "AdobePDF.inf"

After this the code should something similar to this:

```
int li_ret

dw_1.Object.DataWindow.Export.PDF.Method = Distill!
dw_1.Object.DataWindow.Printer = "YourAdobePDFPrinterName"
dw_1.Object.DataWindow.Export.PDF.Distill.CustomPostScript="Yes"

li_ret = dw_1.SaveAs("custom.PDF", PDF!, true) 
```

Of course there could be many other problems with printing. Feel free to ask!

Br.: Gábor

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T15:47:38.150

SaveAs() 函数与使用 Ghostscript 相关，要使用 Adob​​e Acrobat 进行打印，您将其视为普通打印机。希望 PB 9 具有这些功能，因为这是取自 PB 11.5。

```
RegistrySet("HKEY_CURRENT_USER\Software\Adobe\Acrobat Distiller\9.0\AdobePDFOutputFolder", "", ReguLong!, 2)
RegistrySet("HKEY_CURRENT_USER\Software\Adobe\Acrobat Distiller\9.0\AdobePDFOutputFolder", "2", RegString!, "C:\_APPS")

//Gets the default printer
ls_default = PrintGetPrinter()

//Parses string
ll_pos = Pos(ls_default, "~t")
is_default_printer = Left(ls_default, ll_pos - 1)

//Gets the Printers on the computer
ls_printers = PrintGetPrinters( )

//Finds the Distiller printer
ll_pos = PosA(ls_printers, "Acrobat Distiller") 

//Checks for newer version of Distiller
if (ll_pos = 0) then
    ll_pos = PosA(ls_printers, "Adobe PDF") 
end if

//Gets the location of the Distiller printer
ls_printer = MidA(ls_printers, ll_pos, PosA(ls_printers, ":", ll_pos) - ll_pos + 1)

//Sets our next print ll_job to print to Distiller
PrintSetPrinter(ls_printer)

//Allocates memory for our DS
DS = create DataStore

//Opens Print Job
ll_job = PrintOpen("MyPDF", false)

//Checks for error
if (ll_job > 0) then

//First Datastore to add to the PDF
DS.DataObject = "d_wlcp_view"
DS.SetTransObject(SQLCA)
DS.Retrieve(idt_review_date, ii_site_id)
PrintDataWindow(ll_job, DS)

//You can add more pages to the PDF by printing more DW's or DS's
DS.DataObject = "d_training_view"
DS.SetTransObject(SQLCA)
DS.Retrieve(idt_review_date, ii_site_id)
PrintDataWindow(ll_job, DS)

//Closes the print job
PrintClose(ll_job)

//Sets the default printer back
PrintSetPrinter(ls_default)

//Sometimes the PB function doesn't set the printer back, so you can use
//this VB script to make sure it is set back to the default
//Run('cscript C:\_APPS\HWLCPRR\prnmngr.vbs -t -p "' + is_default_printer + '"')

//Deallocates memory for DS
if (isValid(DS)) then destroy DS 
```

[这是 VB 脚本](https://docs.google.com/file/d/0B6J5FirdQZquWkNZbkh1RU8wU2c/edit?usp=sharing)。

# tidesdk - TideSDK 常量

> ID：15345161
> 
> 赞同：0
> 
> 时间：2013-03-11T17:47:56.717
> 
> 标签：tidesdk

我想设置几个值并让应用程序读取以进行显示。最初，我尝试`key: value`在文件中设置一对`manifest`，但发现从开发者应用程序启动应用程序时，该特定文件被覆盖。该`tiapp.xml`文件似乎是下一个合乎逻辑的选择。看起来我可以从中读取自定义属性，但我也想读取该`<version></version>`值，但我看不到这样做的方法。我讨厌不得不复制它。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:33:46.587

**叹**

离开几个小时。回来。它就在我的面前`getVersion()`。我忙于寻找聪明人，以至于错过了显而易见的事情。

# ios - 带有口音的 Moon-APNS 消息

> ID：15345162
> 
> 赞同：5
> 
> 时间：2013-03-11T17:47:57.817
> 
> 标签：ios, apple-push-notifications, moonapns

我正在使用此代码向 iPhone 发送 Apple 推送通知：

```
Public Function SendPush() As String
    Dim rt As String = "Sended!"
    Dim deviceToken As String = "my token"
    Dim message As String = "Parabéns é Campeão!"
    Try

        Dim payLoad As New NotificationPayload(deviceToken, message, 1, "default")
        payLoad.AddCustom("RegionID", "IDQ10150")
        ' 51 is the badge no
        Dim notificationList = New List(Of NotificationPayload)() From { _
         payload _
        }

        Dim push = New PushNotification(True, "apn_developer_identity.p12", "password")
        Dim result = push.SendToApple(notificationList)
    Catch ex As Exception
        rt = "Error!"
    End Try

    Return rt

End Function 
```

但在我的 iPhone 中没有收到口音。我收到了这个：Parab?ns ? 坎佩?o!

有人知道会发生什么？

问候

解决了！

我已更改为 PushNotification.cs 类中的库 Moon-APNS：

```
// String length
byte[] apnMessageLength = BitConverter.GetBytes((Int16)Encoding.UTF8.GetBytes(apnMessage).Length);

// Write the message
memoryStream.Write(Encoding.UTF8.GetBytes(apnMessage), 0, Encoding.UTF8.GetBytes(apnMessage).Length); 
```

重新编译并使用到您的项目中。现在接受拉丁字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:16:17.100

您应该将有效负载编码为 UTF-8。

# java - 如何使用 JAVA 从 ArrayList 返回输入

> ID：15345165
> 
> 赞同：1
> 
> 时间：2013-03-11T17:48:17.377
> 
> 标签：java, arrays, arraylist

我在 Uni 学习计算机科学，发现 Java 很难理解，我知道需要做什么，但如果有意义的话，我不知道如何编码？

我的任务是输出有多少学生通过和失败的考试，这是由用户输入完成的。它会询问姓名和标记，然后计算通过和失败的人数。现在详细信息保存在 a 中`ArrayList`，我只需要提取失败的学生数量。我已经做了一半了。

```
class Course
{

    private ArrayList<Student> people = new ArrayList<Student>();

    public void add( Student s )
    {
        people.add( s );
    }
    //Return the number of students who failed (mark<40)
    public int fail()
    {
        int count = 0;
        for ( int i=0; i< people.size(); i++ );
        int mark = people.get(i).getMark();
        {
            if (mark < 40) {
                count = count +1;
            }
        }

        return count;
    }
} 
```

我知道这不正确，但它基本上在那里？请问有什么帮助吗？如果您需要更多代码，请询问！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T17:49:44.090

您需要`;`从包含循环声明的行的末尾删除`for`，并将您的`int mark`行放在以下大括号内：

```
for ( int i=0; i< people.size(); i++ )
{
    int mark = people.get(i).getMark();
    if(mark < 40){
        count = count +1;
    }
} 
```

循环后的分号`for`表示在循环内重复运行的整个块`for`；在语句后放置分号是一个常见的错误`for`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:06:39.590

> 另外，我如何找到平均分和最高分？

为了获得最高分，您创建一个变量，每次找到更高的分数时都将其替换。如果您已经在循环，您可以通过将循环中的所有标记相加并将其除以总人数来找到平均值。在这里，我在同一个循环中完成了两者：

```
int totalMark = 0;
int topMark = 0;
for (int i=0; i< people.size(); i++) {
    int mark = people.get(i).getMark(); 
    if (mark > topMark) {
        topMark = mark;
    }
    totalMark += mark;
}
int averageMark = totalMark / people.size(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:52:10.643

使用[`sort`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)java Collections 类的方法，将其传递[`Comparator`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Comparator.html)给排序（按升序）标记，然后计数，直到您发现标记大于您的阈值。

这可能合适吗？

# android - Android：如何管理用于开发与生产的 Google API SHA1？

> ID：15345171
> 
> 赞同：0
> 
> 时间：2013-03-11T17:48:33.057
> 
> 标签：android, google-drive-api

要从 android 访问 Google API，我需要为我的应用程序创建一个客户端 ID。此客户端 ID 需要从用于签署应用程序的密钥库生成证书指纹 (SHA1)。以下链接中的教程指示使用 eclipse 的调试密钥库生成此 SHA1，这是我用于开发的一个。

但是，当我签署我的应用程序的生产版本时，我将使用另一个密钥库这样做——我是否需要为第二个密钥库创建一个单独的客户端 ID？

另外，我在我的应用程序清单中引用了客户端 ID（以与驱动器应用程序集成），我在构建应用程序以进行发布时是否需要更改此 ID？

[https://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:58:25.770

是的，您需要为第二个密钥库提供单独的客户端 ID。SHA1 值与密钥本身有关；它们是密钥的“签名”。

将发布客户端 ID 放入已发布应用的清单中。

本教程向您展示了如何使用 Android 快速开始使用 Google Drive。它并不意味着实现已发布的应用程序。不幸的是，发布的应用程序的说明似乎被破坏了。

# java - 从另一个类构造函数的主方法调用时出现“.class expected”错误

> ID：15345177
> 
> 赞同：0
> 
> 时间：2013-03-11T17:48:45.397
> 
> 标签：java, main-method

我正在制作一个创建具有某些属性的对象的基本程序，它工作正常，但我需要将它作为一个独立程序本身加载，所以我创建了另一个名为 Lanzador 的类，它从另一个类调用构造函数，以便它可以创建对象。

我是新手，所以我真的不知道我在这里做什么：

```
public class Lanzador
{
    public static void main(String args[]) {
        TipodeTirada tirada = new TipodeTirada(String,String,int,String,boolean,int,boolean);

    }
} 
```

问题是我不知道如何真正做到这一点，因为它仍然给了我一个预期的“int.class”。

我应该怎么做才能在启动程序时让我输入属性（stirng、int 等）？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:51:50.930

您需要为构造函数提供实际值，而不是键入关键字。传入关键字只会使编译器抱怨其期望的文字值。相反，您可以使用，（例如）：

```
new TipodeTirada("some value", "value2", 100, "value 3" ,false, 200, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:53:10.773

```
TipodeTirada tirada = new TipodeTirada("a","b",1,"c",false,2,true); 
```

您需要将实际值发送给构造函数

> 注意：“a”、“b”和所有都是虚拟值，这些值在你的场景中是有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:56:44.780

这个 ：

```
TipodeTirada tirada = new TipodeTirada(String,String,int,String,boolean,int,boolean); 
```

中不存在`Java`。即使在声明方法时，您也必须为参数命名：

```
public void myFunction(String param1, int param2)
{
     ...
} 
```

它确实存在，`C language`但这是另一个问题。

在这里，您要创建 的实例`TipodeTirada`，因此您必须在调用方法时传递实际值，例如：

```
TipodeTirada tirada = new TipodeTirada("String 1","String 2",1,"String 3",true,2,false); 
```

假设您有这样的课程`TipodeTirada`：

```
public class TipodeTirada {
    String name, surname, value;
    int age, weight;
    boolean bool1, bool2;
} 
```

然后你会像这样在里面有你的构造函数：

```
public TipodeTirada(String name,String surname,int age,String value,boolean bool1,int weight,boolean bool2)
{
    this.name = name;
    this.surname = name;
    // etc...
} 
```

所以你正在做的是创建一个你现在在你的内部调用的方法`main`，它将你的参数值分配给你的 TipodeTirada 实例的字段。

# java - Kryonet：客户端不能同时发送和接收？

> ID：15345179
> 
> 赞同：1
> 
> 时间：2013-03-11T17:48:52.137
> 
> 标签：java, networking, kryonet

我正在使用 Slick2D 制作游戏并使用 Kryonet 进行多人游戏。我的架构设置为使所有客户端都连接到服务器，该服务器本身并不在玩游戏（与在同一程序中运行客户端和服务器的玩家相反）。这是一款 2D 射击游戏，当只有一个客户在玩时，一切正常。当我连接另一个客户端时出现此问题。

显然客户端不能同时发送和接收。例如，如果两个客户端同时射击他们的武器，则看起来只有那个玩家在对自己的客户端射击，而另一个玩家处于空闲状态。同样，如果两个玩家都在移动，则另一个玩家不会移动，直到客户端玩家停止，然后另一个玩家会跳到当前位置。

我在这里为客户端和服务器监听器提供了代码：

```
public class ClientGameListener extends Listener {

protected Client owner;
protected MultiplayerClientGameState state;

public ClientGameListener(Client c, MultiplayerClientGameState state) {
    owner = c;
    this.state = state;
}

@Override
public void received(Connection connection, Object obj) {
    if(obj instanceof PositionPacket) {
        state.adjustPlayerPosition((PositionPacket)obj);
    }
    else if(obj instanceof FirePacket) {
        state.scheduleFireListing((FirePacket)obj);
    }
    else if(obj instanceof ToggleWeaponPacket) {
        state.togglePlayerWeapon((ToggleWeaponPacket)obj);
    }
}
}

public class ServerGameListener extends Listener {

protected Server owner;
protected MultiplayerServerGameState state;

public ServerGameListener(Server s, MultiplayerServerGameState state) {
    owner = s;
    this.state = state;
}

@Override
public void received(Connection connection, Object obj) {
    if(obj instanceof PositionPacket) {
        owner.sendToAllExceptTCP(connection.getID(), obj);
    }
    else if(obj instanceof FirePacket) {
        owner.sendToAllExceptTCP(connection.getID(), obj);
    }
    else if(obj instanceof ToggleWeaponPacket) {
        owner.sendToAllExceptTCP(connection.getID(), obj);
    }
}
} 
```

关于为什么我的客户不能同时发送和接收信息的任何想法，或者如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T08:42:03.403

**您可以尝试通过UDP**发送消息。

# ios - 如何一次翻转多个视图？

> ID：15345183
> 
> 赞同：1
> 
> 时间：2013-03-11T17:49:03.340
> 
> 标签：ios, animation, uiview

我正在`transitionFromView`使用`UIViewAnimationOptionTransitionFlipFromLeft`. 现在我需要以这种方式组合这些转换的数量，以便我知道整个转换的完成情况。

最好的方法是什么？我可以使用类似的东西，然后在动画块中`animateWithDuration`放置多个吗？`transitionFromView`如果是，那么两条消息的持续时间参数会相互干扰吗？在这种情况下，这些持续时间参数中的每一个意味着什么？

有没有更好的方法来翻转多个视图和完成块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:01:31.263

您可以使用 a[`CATransaction`](http://developer.apple.com/library/ios/#Documentation/GraphicsImaging/Reference/CATransaction_class/Introduction/Introduction.html)轻松完成此操作。

首先，将 QuartzCore 框架添加到您的目标中（如果您还没有的话）。

接下来，添加`#import <QuartzCore/QuartzCore.h>`到`.m`文件顶部（如果尚未添加）。

`[CATransaction begin]`在创建转换的语句之前执行。然后为新事务设置完成块。接下来，创建动画。最后，提交事务。这是一个例子：

```
- (IBAction)flipButtonWasTapped:(id)sender {
    [CATransaction begin]; {
        [CATransaction setCompletionBlock:^{
            NSLog(@"all animations complete!");
        }];
        [UIView transitionFromView:self.topFrontLabel
            toView:self.topBackLabel duration:1
            options:UIViewAnimationOptionTransitionFlipFromRight
            completion:nil];
        [UIView transitionFromView:self.bottomFrontLabel
            toView:self.bottomBackLabel duration:1.5
            options:UIViewAnimationOptionTransitionFlipFromRight
            completion:nil];
    } [CATransaction commit];
} 
```

请注意，您必须在创建任何动画**之前设置完成块。**完成块只等待设置**后**添加的动画。

另请注意，所有方法`CATransaction`都是类消息。您没有得到代表交易的对象。

# java - 在 Android SQLite 中处理“复杂”数据库

> ID：15345187
> 
> 赞同：3
> 
> 时间：2013-03-11T17:49:09.337
> 
> 标签：java, android, sqlite

1 - 多次扩展 SQLiteOpenHelper 是错误的并且不会工作。2 - 拥有一个扩展 SQLiteOpenHelper 以处理（CRUD）7 个不同类的大类很奇怪。

有没有例子可以做到这一点？在没有大量依赖类的情况下将许多实体 CRUD 到我的数据库中？

我似乎无法在 Google 上找到大于 2 或 3 个表的示例。拥有一个非常大的 SQLiteOpenHelper 并为我的所有实体提供保存方法是可怕的。该项目也不允许使用 ORM。

任何帮助/方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:55:47.123

> 拥有一个非常大的 SQLiteOpenHelper 并为我的所有实体提供保存方法是可怕的。

你认为好的指定应用程序只有几行代码吗？

在 Android 中扩展 from`SQLiteOpenHelper`是最好的选择。它包含了所有必需的逻辑，并且在我看来使用它非常舒服。但一切都需要正确的实施。

> 多次扩展 SQLiteOpenHelper 是错误的并且无法正常工作

我认为很可能没有问题`SQLiteOpenHleper`但错误的实施和使用。

您的意思是，例如`ORMLite`不允许使用 ORM 框架，因此我的建议是使用`SQLiteOpenHelper`并进行正确和干净的实现。

## 更新：

> 7种保存方法。7种更新方法。7 删除方法。7 选择方法。从数据库中获取其他数据的许多其他方法。它是最好的选择吗？

我在评论中的意思是这是实施问题。您真的不需要 7 个表以上的 7 个保存方法。这是我的第一个想法。如何创建一种通用方法？

```
public class DataSourceTools {

   private SQLiteOpenHelper handler;
   private SQLiteDatabase db;

   public DataSourceTools(SQLiteOpenHelper handler) {
      this.handler = handler;
   }

   public void saveObject(String table, ContentValues data) {
      try {
         db = openWrite(this.handler);
         if (db != null) {
            db.insert(table, nullColumnHackName, data);
         }
      }
      finally {
         close(db);
      }
   }

   public void updateObject(String table, ContentValues dataToUpdate) {
      try {
         db = openWrite(this.handler);
         if (db != null) {
            String whereClause = "...";
            String[] whereArgs = {...};
            db.update(table, dataToUpdate, whereClause, whereArgs);
         }
      }
      finally {
         close(db);
      }
   }

   public void deleteObject(String table, ContentValues data) {
      try {
         db = openWrite(this.handler);
         if (db != null) {
            String whereClause = "...";
            String[] whereArgs = {...};
            db.delete(table, whereClause, whereArgs);
         }
      }
      finally {
         close(db);
      }
   }

   public Object findObject(String table, ContentValues data) {
      Object myObject = null; 
      Cursor c = null;
      try {
         String[] columns = {"id", "name", "lastname", ...};
         String selection = "id = ?";
         String[] selectionArgs = {data.getAsString("key_id")};
         c = db.query(table, columns, selection, selectionArgs, null, null, null);
         if (c.moveToFirst()) {
            myObject = new Object();
            myObject.setId(c.getInt(c.getColumnIndex("id")));
            myObject.setName(c.getString(c.getColumnIndex("name")));
            myObject.setLastName(c.getString(c.getColumnIndex("lastname")));
         }
         return myObject;
      }
      finally {
         if (c != null) {
            c.close()
         }
         close(db);
      }
   }

   public List<Object> findAll(String table) {
      List<Object> objects = new ArrayList<Object>(); 
      Object myObject = null; 
      Cursor c = null;
      try {
         String[] columns = {"id", "name", "lastname", ...};
         c = db.query(table, columns, null, null, null, null, null);
         if (c.moveToFirst()) {
            myObject = new Object();
            myObject.setId(c.getInt(c.getColumnIndex("id")));
            myObject.setName(c.getString(c.getColumnIndex("name")));
            myObject.setLastName(c.getString(c.getColumnIndex("lastname")));
            objects.add(myObject);
         }
         return objects;
      }
      finally {
         if (c != null) {
            c.close()
         }
         close(db);
      }
   }

   private final synchronized SQLiteDatabase openWrite(SQLiteOpenHelper handler) {
      if (handler != null) {
         return handler.getWritableDatabase();
      }
      return null;
   }

   private final synchronized SQLiteDatabase openRead(SQLiteOpenHelper handler) {
      if (handler != null) {
         return handler.getReadableDatabase();
      }
      return null;
   }

   private final synchronized void close(SQLiteDatabase db) {
      if (db != null && db.isOpen()) {
         db.close();
      }
   }
} 
```

**注意：**这是第一个概念，现在是专门为您编写的，因此需要更新：考虑方法的参数->如何做出更好的选择，事务的使用，作为单例的数据源，对插入，更新进行一些性能测试。一切都取决于应用程序的特性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:53:41.473

使用参数化方法优于对每个表的每个操作使用一种方法。MBarni，您能否举例说明为什么这对您的需求不够灵活？

# sql-server-2008-r2 - 使用 openrowset 的 UNC 路径无效

> ID：15345190
> 
> 赞同：1
> 
> 时间：2013-03-11T17:49:12.333
> 
> 标签：sql-server-2008-r2, unc, openrowset

我在 C:\drive 的根目录下创建了一个名为 Public 的文件夹，并与“所有人”共享它。我还授予了 NETWORK SERVICE 读取权限。但是当我在 SQL Server 2008-R2 中发出以下查询时，错误是“\\FOO\public\my.csv”不是有效路径：

```
SELECT * 
FROM OPENROWSET (
  'Microsoft.ACE.OLEDB.12.0', 
    'Text;Database=\\FOO\public\my.csv; ', 
    'SELECT * from my.csv'
    ) 
```

已安装 ACE 的 64 位驱动程序。我在 Windows 7 x64 上。它是 64 位版本的 SQL Server。我的电脑的机器名称是“FOO”。它也不适用于简单的`c:\public`路径。

> 链接服务器“（null）”的 OLE DB 提供程序“Microsoft.ACE.OLEDB.12.0”返回消息“'\FOO\public\my.csv' 不是有效路径。确保路径名拼写正确并且您已连接到文件所在的服务器。”。

我已将服务器配置为：

```
exec sp_configure 'show advanced options', 1
RECONFIGURE;
exec sp_configure 'Ad Hoc Distributed Queries', 1
RECONFIGURE; 
```

还有什么要检查的？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:49:47.690

问题已解决。数据库应该只指向文件夹而不包括文件：

```
 'Text;Database=\\FOO\public; ' 
```

# java - Android：照片显示活动中未显示图片

> ID：15345191
> 
> 赞同：0
> 
> 时间：2013-03-11T17:49:14.593
> 
> 标签：java, android

编辑：我想出了什么问题，就像我说我将包名更改为 from `com.musicbynumbers.pianoscales`to `com.musicbynumbers.pianoscalesfull`。但我忘了

`change int id =getResources().getIdentifier("com.musicbynumbers.pianoscalesfull:drawable/" + gotScale, null, null);`

所有的代码都很好。非常感谢你的帮助。

好的，这只是在我进入确切问题之前的一些背景信息：我正在使用 eclipse。几周前，我在 Play Store 上发布了我的第一个应用程序，一个钢琴音阶应用程序，获得了许可。两天前，我意识到许可阻止了一些为该应用程序付费的用户使用它。我注释掉了许可并进行了更新，但我的密钥库已损坏。所以我从商店中删除了应用程序并更改了包名称。该应用程序是一个菜单，可将您带到显示所选图像的显示活动。当我再次测试应用程序时，我发现只显示默认的 android 图像。我不认为我更改了子菜单或显示活动中的任何代码，因为它正在工作，但无论如何我都会把它们放上去。顺便说一句，这是我的第一个应用程序，该应用程序预定明天随书一起发布，

这是导致活动“显示”的几个子菜单之一

```
 package com.musicbynumbers.scales;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.graphics.PixelFormat;
import android.view.View;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.ImageButton; 
import com.musicbynumbers.pianoscalesfull.R;

public class majorScales extends Activity implements View.OnClickListener  {
    Button aflatmaj, amaj, bflatmaj, bmaj, cmaj, dflatmaj, dmaj, eflatmaj, emaj, fmaj, fsharpmaj, gmaj;  
    ImageButton mainMenu;
    Intent j;
    String scaleName;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        getWindow().setFormat(PixelFormat.RGBA_8888);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_DITHER);
        setContentView(R.layout.majorscales);
        j  = new Intent(this, display.class);
        mainMenu = (ImageButton) findViewById(R.id.imagelogo);
        aflatmaj = (Button) findViewById(R.id.aflatmajb);
        amaj = (Button) findViewById(R.id.amajb);
        bflatmaj = (Button) findViewById(R.id.bflatmajb);
        bmaj = (Button) findViewById(R.id.bmajb);
        cmaj = (Button) findViewById(R.id.cmajb);
        dflatmaj = (Button) findViewById(R.id.dflatmajb);
        dmaj = (Button) findViewById(R.id.dmajb);
        eflatmaj = (Button) findViewById(R.id.eflatmajb);
        emaj = (Button) findViewById(R.id.emajb);
        fmaj = (Button) findViewById(R.id.fmajb);
        fsharpmaj = (Button) findViewById(R.id.fsharpmajb);
        gmaj = (Button) findViewById(R.id.gmajb);
        mainMenu.setOnClickListener(this);
        aflatmaj.setOnClickListener(this);
        amaj.setOnClickListener(this);
        bflatmaj.setOnClickListener(this);
        bmaj.setOnClickListener(this);
        cmaj.setOnClickListener(this);
        dflatmaj.setOnClickListener(this);
        dmaj.setOnClickListener(this);
        eflatmaj.setOnClickListener(this);
        emaj.setOnClickListener(this);
        fmaj.setOnClickListener(this);
        fsharpmaj.setOnClickListener(this);
        gmaj.setOnClickListener(this);

    }

         @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                switch(arg0.getId()){
                case R.id.imagelogo:
                    Intent i =  new Intent(majorScales.this, MainMenu.class);
                    startActivity(i);
                    break;
                case R.id.aflatmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);

                    startActivity(j);
                    break;
                case R.id.amajb:
                    scaleName = "amaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.bflatmajb:
                    scaleName = "bflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.bmajb:
                    scaleName = "bmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.cmajb:
                    scaleName = "cmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.dflatmajb:
                    scaleName = "dflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.dmajb:
                    scaleName = "dmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.eflatmajb:
                    scaleName = "eflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.emajb:
                    scaleName = "emaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.fmajb:
                    scaleName = "fmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.fsharpmajb:
                    scaleName = "fsharpmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.gmajb:
                    scaleName = "gmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;

    }

}
} 
```

这是显示所选图像的显示活动，但现在仅显示默认值。

```
package com.musicbynumbers.scales;

import android.app.Activity;
import android.os.Bundle;
import android.widget.ImageView;
import com.musicbynumbers.pianoscalesfull.R;

public class display extends Activity {

    ImageView displayScale;
    String gotScale;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.display);
        Initalize();
        gotScale = getIntent().getStringExtra("key");
        ImageView displayScale = (ImageView) findViewById(R.id.displayImage);
        //aflatmaj-gotscale
        int id = getResources().getIdentifier("com.musicbynumbers.pianoscales:drawable/" + gotScale, null, null);
        displayScale.setImageResource(id);

    }

    private void Initalize() {
        // TODO Auto-generated method stub
        displayScale = (ImageView) findViewById(R.id.displayImage);
        gotScale = "ic_launcher.png";

    }} 
```

我真的很感激任何帮助，因为我的时间不多了。

编辑：

日志猫：

```
03-11 18:38:00.194: I/ActivityManager(59): Starting activity: Intent { cmp=com.musicbynumbers.pianoscalesfull/com.musicbynumbers.scales.majorScales }
03-11 18:38:00.824: W/ActivityManager(59): Activity pause timeout for HistoryRecord{45f03618 com.musicbynumbers.pianoscalesfull/com.musicbynumbers.scales.MainMenu}
03-11 18:38:03.284: I/ActivityManager(59): Displayed activity com.musicbynumbers.pianoscalesfull/com.musicbynumbers.scales.majorScales: 2454 ms (total 2454 ms)
03-11 18:38:07.854: I/ActivityManager(59): Starting activity: Intent { cmp=com.musicbynumbers.pianoscalesfull/com.musicbynumbers.scales.display (has extras) }
03-11 18:38:08.234: I/WindowManager(59): Setting rotation to 1, animFlags=1
03-11 18:38:08.404: I/ActivityManager(59): Config changed: { scale=1.0 imsi=310/260 loc=en_US touch=3 keys=2/1/2 nav=3/1 orien=2 layout=18 uiMode=17 seq=32}
03-11 18:38:09.616: I/ActivityManager(59): Displayed activity com.musicbynumbers.pianoscalesfull/com.musicbynumbers.scales.display: 1384 ms (total 1384 ms)
03-11 18:38:13.123: D/dalvikvm(59): GC_EXPLICIT freed 3329 objects / 183760 bytes in 462ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:12:23.450

I don't get it:

In the display activity you have: `ImageView displayScale;` declared at the beginning and then you declare it again: `ImageView displayScale = (ImageView) findViewById(R.id.displayImage);`

And this a problem mainly among other reason becaouse you got the Initalize(); going on there.

if you are saying that you are not reciving anything but the default android image then clearly

```
gotScale = getIntent().getStringExtra("key"); 
```

not working and all what's left is the: `gotScale = "ic_launcher.png";` from the initialization.

Try to log the `gotScale` parameter right before you get the image depending on it to see what it holds.

**EDIT:**

To log:

Log.d("ActivityName", "The message you want to show");

and monitor your logcat using the cmd to see the log message.

or you can always show a toast to see what is the content of `gotScale`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:16:21.717

我还没有从我这边测试过代码。所以你可以把它当作一个建议。检查您的代码后，它似乎

```
int id = getResources().getIdentifier("com.musicbynumbers.pianoscales:drawable/" + gotScale, null, null);
        displayScale.setImageResource(id);
```

看起来很奇怪。您能否记录返回的标识符并进行验证。

// 一个很好的替代品，你甚至可以尝试。//获取图标

```
 String uri = "drawable/"+gotScale;
int id = getResources().getIdentifier(uri, "drawable", getPackageName()); // your res id. 
```

希望这可以帮助您节省一些时间。:)

# python - 使用 PyGraphviz 绘制有关图形\节点的更多信息

> ID：15345192
> 
> 赞同：4
> 
> 时间：2013-03-11T17:49:16.513
> 
> 标签：python, graphviz, pygraphviz

我想创建一个图表并绘制它，到目前为止一切都很好，但问题是我想在每个节点上绘制更多信息。我看到我可以将属性保存到节点\边缘，但是如何绘制属性？我正在使用 PyGraphviz，女巫使用 Graphviz。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-12T16:40:27.173

一个例子是

```
import pygraphviz as pgv
from pygraphviz import *
G=pgv.AGraph()
ndlist = [1,2,3]
for node in ndlist:
    label = "Label #" + str(node)
    G.add_node(node, label=label)
G.layout()
G.draw('example.png', format='png') 
```

但请确保您明确添加`label`额外信息的属性以显示如 Martin 提到的[https://stackoverflow.com/a/15456323/1601580](https://stackoverflow.com/a/15456323/1601580)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T00:25:14.133

您只能将[受支持的属性](http://www.graphviz.org/doc/info/attrs.html)添加到节点和边。这些属性对 GrpahViz 具有特定意义。

要显示有关边或节点的额外信息，请使用该`label`属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-07T23:26:39.477

如果您已经有一个带有一些要标记的属性的图表，您可以使用它：

```
def draw_nx_with_pygraphviz_attribtes_as_labels(g, attribute_name, path2file=None):
    import matplotlib.pyplot as plt
    import matplotlib.image as mpimg

    # https://stackoverflow.com/questions/15345192/draw-more-information-on-graph-nodes-using-pygraphviz

    if path2file is None:
        path2file = './example.png'
        path2file = Path(path2file).expanduser()

    g = nx.nx_agraph.to_agraph(g)
    # to label in pygrapviz make sure to have the AGraph obj have the label attribute set on the nodes
    g = str(g)
    g = g.replace(attribute_name, 'label')  # it only
    print(g)
    g = pgv.AGraph(g)
    g.layout()
    g.draw(path2file)

    # https://stackoverflow.com/questions/20597088/display-a-png-image-from-python-on-mint-15-linux
    img = mpimg.imread(path2file)
    plt.imshow(img)
    plt.show()

    # remove file https://stackoverflow.com/questions/6996603/how-to-delete-a-file-or-folder
    path2file.unlink()

# -- tests

def test_draw():
    # import pylab
    import networkx as nx
    g = nx.Graph()
    g.add_node('Golf', size='small')
    g.add_node('Hummer', size='huge')
    g.add_node('Soccer', size='huge')
    g.add_edge('Golf', 'Hummer')
    draw_nx_with_pygraphviz_attribtes_as_labels(g, attribute_name='size')

if __name__ == '__main__':
    test_draw() 
```

结果：

[![在此处输入图像描述](../Images/4b8d3c8b61ca311511824c8de624727a.png)](https://i.stack.imgur.com/JnwzQ.png)

特别注意这两个巨大的并没有成为一个自循环，它们是两个不同的节点（例如，两个运动可以是巨大的，但它们不是同一个运动/实体）。

相关但使用 nx 绘图：[使用默认为节点名称的节点标签绘制 networkx 图](https://stackoverflow.com/questions/28533111/plotting-networkx-graph-with-node-labels-defaulting-to-node-name/67439711#67439711)

# java - 在循环中从 Scanner 读取时，它会进入无限循环

> ID：15345194
> 
> 赞同：0
> 
> 时间：2013-03-11T17:49:25.993
> 
> 标签：java, java.util.scanner, infinite-loop, binary-search-tree

这里有两个问题。当我尝试使用“递归迭代器”（递归遍历树，将元素放入队列，然后从队列前面删除元素的迭代器）遍历这棵本土二叉树时。迭代器倾向于向后迭代（从最大到最小）而不是按顺序（从最小到最大）迭代。此外，当我尝试从`Scanner`using读取用户输入时`nextInt()`，程序进入无限循环。我试图捕捉`InputMismatchException`用户输入无效号码的时间。
在下面的代码段中，当用户没有输入数字以便程序正常继续时，我捕获了 InputMismatchException。
测试文件：

```
package assignments.unit9;
import java.util.*;
import static java.lang.System.*;
import java.io.*;
public class BinaryTreeTest
{
    private static BinaryTree<Item> tree;
    static Scanner user;

    public static void main(String... args)
    {
        user = new Scanner(System.in);
        int choice;
        do
        {
            out.println("1\. Read data from disk");
            out.println("2\. Print the tree in order");
            out.println("3\. Search the tree");
            out.println("4\. Delete from the tree");
            out.println("5\. Count the nodes in the tree");
            out.print("0\. Quit\n>");
            try
            {
                choice = user.nextInt();
            }
            catch(InputMismatchException e)
            {
                choice = -1;
            }
            switch(choice)
            {
                case 0:
                    exit(0);
                case 1:
                    try
                    {
                        readFromDisk();
                    }
                    catch(FileNotFoundException e)
                    {
                        err.println("Sorry, but the file could not be opened: " + e.getMessage());
                    }
                    break;
                case 2:
                    if(tree == null)
                    {
                        err.println("Must read file first");
                        break;
                    }
                    printTree();
                    break;
                case 3:
                    if(tree == null)
                    {
                        err.println("Must read file first");
                        break;
                    }
                    searchTree();
                    break;
                case 4:
                    if(tree == null)
                    {
                        err.println("Must read file first");
                        break;
                    }
//                  deleteFromTree();
                    break;
                case 5:
                    if(tree == null)
                    {
                        err.println("Must read file first");
                        break;
                    }
                    countNodes();
                    break;
                default:
                    err.println("Invalid choice. The available choices are:");
                    break;
            }
        }
        while(choice != 0);
    }

    public static void readFromDisk() throws FileNotFoundException
    {
        Scanner file = new Scanner(new File("file20.txt"));
        tree = new BinaryTree<Item>();
        if(file.hasNextInt())
            file.nextInt(); //skip the first integer
        while(file.hasNextInt())
        {
            tree.add(new Item(file.nextInt(), file.nextInt()));
        }
    }

    public static void printTree()
    {
        tree.inorder();
    }

    public static void searchTree()
    {
        out.println("Enter ID value to search for (-1 to return)");
        int search;
        Item searched;
        while((search = user.nextInt()) != -1)
        {
            out.println(searched = tree.find(new Item(search, 0)));
            if(searched == null)
                out.println("\b\b\b\b\bNo such part in stock");
        }
    }

    public static void countNodes()
    {
        out.println(tree.countNodes());
    }
} 
```

在这里，在 BinaryTree 类中，我尝试递归遍历它（参见 iterator() 和 asQueue()）：

```
package assignments.unit9;
import java.util.*;
public class BinaryTree<E extends Comparable<E>> implements Iterable<E>
{
    private TreeNode<E> root;

    public void add(E value)
    {
        if(root == null)
        {
            root = new TreeNode<E>(value);
        }
        else
        {
            TreeNode<E> temp = root, upFrom = null;
            boolean goesOnLeft = false;
            while(true)
            {
                if(temp == null)
                {
                    if(goesOnLeft)
                        upFrom.setLeft(new TreeNode<E>(value));
                    else
                        upFrom.setRight(new TreeNode<E>(value));
                    break;
                }
                else if(temp.getValue().compareTo(value) < 0)   //goes on left
                {
                    upFrom = temp;
                    temp = upFrom.getLeft();
                    goesOnLeft = true;
                    continue;
                }
                else    //goes on right
                {
                    upFrom = temp;
                    temp = upFrom.getRight();
                    goesOnLeft = false;
                    continue;
                }
            }
        }
    }

    public void inorder()
    {
        try
        {
            inorder(root);
        }
        catch(StackOverflowError e)
        {
            System.err.println("Increase stack size to print remaining elements");
        }
    }

    private void inorder(TreeNode<E> t)
    {
        if(t == null)
            return;
        inorder(t.getLeft());
        System.out.println(t.getValue());
        inorder(t.getRight());
    }

    private ArrayDeque<E> asQueue(TreeNode<E> t, ArrayDeque<E> toAdd)
    {
        try
        {
            if(toAdd == null)
                toAdd = new ArrayDeque&lt;E>();
            if(t == null)
                return toAdd;
            asQueue(t.getLeft(), toAdd);
            toAdd.addLast(t.getValue());
            asQueue(t.getRight(), toAdd);
            ret:
            return toAdd;
        }
        catch(StackOverflowError e)
        {
            throw new InternalError();
        }
    }

    public Iterator<E> iterator()
    {
        return new Iterator<E>()
        {
            private ArrayDeque<E> d = asQueue(root, null);

            public E next()
            {
                return d.pop();
            }

            public boolean hasNext()
            {
                return !d.isEmpty();
            }

            public void remove()
            {
                throw new UnsupportedOperationException();
            }
        };
    }

    public int countNodes()
    {
        int toReturn = 0;
        for(E elem : this)
            ++toReturn;
        return toReturn;
    }

    public E find(E toFind)
    {
        for(E elem : this)
        {
            if(elem.equals(toFind))
                return elem;
        }
        return null;
    }
} 
```

树节点类：

```
package assignments.unit9;
import java.util.Objects;
public class TreeNode<T>
{
    private T value;
    private TreeNode<T> left, right;

    /**
     * Constructs a new TreeNode value with the left and right pointers {@code null}.
     * 
     * @param value the item to be referenced
     * 
     * @throws NullPointerException if {@code value} is {@code null}.
     */
    public TreeNode(T value)
    {
        this.value = Objects.requireNonNull(value);
    }

    /**
     * Constructs a new TreeNode value with the specified left and right pointers.
     * 
     * @param value the item to be referenced
     * @param left the TreeNode value to the left.
     * @param right the TreeNode value to the right.
     * 
     * @throws NullPointerException if {@code value} is {@code null}.
     */
    public TreeNode(T value, TreeNode<T> left, TreeNode<T> right)
    {
        this.value = Objects.requireNonNull(value);
        this.left = left;
        this.right = right;
    }

    public T getValue()
    {
        return value;
    }

    public TreeNode<T> getLeft()
    {
        return left;
    }

    public TreeNode<T> getRight()
    {
        return right;
    }

    public void setValue(T value)
    {
        this.value = Objects.requireNonNull(value);
    }

    public void setLeft(TreeNode<T> left)
    {
        this.left = left;
    }

    public void setRight(TreeNode<T> right)
    {
        this.right = right;
    }
} 
```

数据类型（项目）：

```
package assignments.unit9;
import java.util.*;
public class Item implements Comparable<Item>
{

    private int myID;
    private int myInv;

    //Comparators
    public static class IDComparator implements Comparator<Item>
    {
        public int compare(Item i1, Item i2)
        {
            return i1.getID() - i2.getID();
        }

        @Override
        public boolean equals(Object obj)
        {
            return obj instanceof IDComparator;
        }
    }

    public static class InvComparator implements Comparator<Item>
    {
        public int compare(Item i1, Item i2)
        {
            return i1.getInv() - i2.getInv();
        }

        @Override
        public boolean equals(Object obj)
        {
            return obj instanceof InvComparator;
        }
    }

    public Item(int id, int inv)
    {
        myID = id;
        myInv = inv;
    }

    public int getID()
    {
        return myID;
    }  
    public int getInv()
    {
        return myInv;
    }
    public int compareTo(Item i)
    {
        if(i == null)
            throw new NullPointerException();
        return this.myID - i.myID;
    }

    @Override
    public boolean equals(Object otherObject)
    {
        Item i;
        try
        {
            i = (Item) otherObject;
            return myID == i.myID;
        }
        catch(ClassCastException ex)
        {
            return false;
        }
    }
    public String toString()
    {
        return "ID: " + myID + "\tInventory number: " + myInv + "\n";
    }

    @Override
    public int hashCode()
    {
        return Objects.hash(myID, myInv);
    }
} 
```

这是输入文件。对不起，如果这很多：

```
20
       196        60
     18618        64
      2370        65
     18410        56
     18465        27
     19967        45
     17911        96
       184        14
     18871        69
     14088        92
     18061         3
       206        31
     13066         8
     12705        14
     15917        51
     15814        60
     15320        82
      8303        90
      7282        73
     12328        63 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:07:35.137

您的打印输出功能以相反的顺序打印节点，因为这是您存储它们的方式；您的二叉树在左侧而不是右侧具有*较大的*值，因为您的“添加”函数中有一个“>”而不是“<”。改变它，它们会增加而不是减少。

我仍然看不到你得到一个无限循环的条件，我自己也没有。将程序放入调试器并跟踪它的去向，直到你弄明白为止。老实说，我认为我在这个问题上已经做的够多了（我没有 Java 7，必须将它回填到 Java 6 才能运行它），我正在继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:37:14.097

好的，问题解决了。问题是，`<`当我需要 a 时我输入了 a `>`，所以我最终得到了左侧*较大的值和右侧**较小*的值，所以我的`inorder`遍历是向后的。其次，捕获导致的无限循环`InputMismatchException`是类中的一个错误`Scanner`：

1.  `in.nextInt()`程序启动，启动在`try`块 中调用的循环。
2.  当用户输入一个非数字时，扫描器会抛出一个`InputMismatchException`，这会将流量转移到 `catch`块，该块设置`choice`为 -1，这会导致显示无效的文本块。
3.  但奇怪的是，在下一次迭代中，当`nextInt()`被调用时，它立即抛出异常而不是获取输入，如果在 catch 块中添加了 print 语句就可以看出这一点。感谢所有帮助我的人。

# regex - sed/awk 删除等于如果没有后跟 3D

> ID：15345195
> 
> 赞同：1
> 
> 时间：2013-03-11T17:49:31.337
> 
> 标签：regex, sed, awk, regex-lookarounds

**仅当不**跟随 3D时，我才想删除等号。这里有一个例子。

```
NB2HI4B2F4XWM3LNFZCGK3DJOZSXE6L=PNZSS4Y3PFZZWGSZB5GUTGKPLE=ONZXA33PNZSXEQ 
```

所以这应该变成

```
NB2HI4B2F4XWM3LNFZCGK3DJOZSXE6LPNZSS4Y3PFZZWGSZB5GUTGKPLEONZXA33PNZSXEQ 
```

如果可能的话，我可以在`awk`and中找到解决方案`sed`吗？我知道这里有很多关于如何做到这一点的解释，但正则表达式一开始并不那么容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:10:48.100

不幸的是，既不`sed`也不`awk`支持[环视](http://www.regular-expressions.info/lookaround.html)，你真的想在这里使用负前瞻来匹配所有`=`没有跟随的 3D `(?!3D)`。两者都`python`支持`perl`环视。

一种方法`python`：

```
>>> import re
>>> print re.sub('=(?!3D)','','=3D=3=1=D3D====3D')
=3D31D3D=3D 
```

一种方法`perl`：

```
$ perl -pe 's/=(?!3D)//g' <<< "=3D=3=1=D3D====3D" 
=3D31D3D=3D 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:01:08.987

又脏又快的 awk 单线：

```
awk '{gsub(/=3D/,"\x99");gsub(/=/,"");gsub(/\x99/,"=3D")}1' file 
```

测试：

```
kent$  echo "====xxx==yy=3D=3Dyy==zz=3D="|awk '{gsub(/=3D/,"\x99");gsub(/=/,"");gsub(/\x99/,"=3D")}1'     
xxxyy=3D=3Dyyzz=3D 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:03:00.350

这可能对您有用（GNU sed）：

```
sed 's/=3D/\n/g;s/=//g;s/\n/=3D/g' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T19:39:46.410

另一个：

```
awk 'NR>1 && /^3D/{print RS}1' RS=\\= ORS= file 
```

# c# - 如何在 IIS 服务器上运行简单的服务器进程

> ID：15345203
> 
> 赞同：1
> 
> 时间：2013-03-11T17:50:17.127
> 
> 标签：c#, asp.net, sockets

我不太确定如何表达这个问题。

我想做的是在 C# 中创建一个简单的服务器类型应用程序，它只是侦听传入的套接字连接并按照我指定的方式处理它们。它可以是一个聊天应用程序或类似的东西，非常简单。

我查看了示例： http: [//msdn.microsoft.com/en-us/library/fx6588te.aspx](http://msdn.microsoft.com/en-us/library/fx6588te.aspx)关于异步套接字。

我理解示例中的代码，但我不确定代码将如何执行。具体来说，示例中应用程序的入口点是什么？服务器如何知道启动它？

我对 IIS 的唯一体验是使用 C# 代码隐藏的 Web 表单。我知道当 url 指向该位置然后再次在回发等时执行 web 表单的代码。

当我不想使用 Web 表单而只想使用具有单个入口点的 C# 类文件的集合时（类似于 java 应用程序），这对我来说变得模糊不清。

为清楚起见进行编辑：

我想要做的目标是创建一个应用程序，我可以将它放在我的网络主机上，它将不断接受来自客户端应用程序的请求并按照我指定的方式处理它们，然后将信息返回给客户端。我只是不确定如何告诉服务器启动应用程序，因为我只知道 Web 表单。
此外，如果我最初需要将浏览器定向到 Web 表单，然后按下按钮启动应用程序，那也很好。事实上，如果我可以随意启动和停止应用程序，那就太理想了。另外，我可能使用了不正确的术语。我认为 IIS 服务器就是你所说的可以运行 asp.net 应用程序的服务器。我可能对此非常错误。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:55:13.617

您不能使用 IIS 来启动 Windows 应用程序，您需要一个持续侦听指定端口的 Windows 服务应用程序，并且该 Windows 服务应用程序需要安排在系统启动时或您选择的任何事件时启动。并且只要您希望应用程序正常运行，Windows 服务应用程序就需要保留在内存中。

PS：您的问题严重需要一些编辑，但我也是SO新手，所以我会让可敬的高级用户做他们最擅长的事情。

**编辑：**如果您想使用 IIS 模拟 Windows 服务，那么这里是您最接近的选择，请按照链接了解您需要了解的内容。

[使用 ASP.NET 应用程序模拟 Windows 服务](http://www.codeproject.com/Articles/12117/Simulate-a-Windows-Service-using-ASP-NET-to-run-sc)

[强制你的应用程序保持活跃](http://www.west-wind.com/weblog/posts/2007/May/10/Forcing-an-ASPNET-Application-to-stay-alive)

这两个链接将帮助您保持应用程序和 bamm 的活力，您可以创建任意数量的类（如您所引用的 Java 样式）来执行您希望它执行的任何任务

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T17:56:07.493

在我看来，您根本不想使用 IIS。IIS 为您处理监听，是管理请求的“服务”。如果您希望手动侦听传入连接，那么您将需要以下组件：

1.  运行的 Windows 服务具有..

2.  内置的 http 侦听器。

查看 C# HttpListener 类并查看构建可在服务器后台运行的窗口服务的过程。

这并不是那么困难，但我不太确定这是你需要的。如果您不想使用 Web 表单，您可以拥有一个 Web 应用程序，将请求直接解析到自定义处理程序，我认为这是您真正想要的，并且让您自己的侦听器变得多余。

编辑：有关自定义处理程序的附加信息

以下是自定义处理程序是什么以及如何使用它的开始：http: [//support.microsoft.com/kb/308001](http://support.microsoft.com/kb/308001)

我还会看一些来自 .net 的关于 MVC3 的初学者文章。MVC 是一个框架，它没有 webforms 所具有的任何绒毛（例如视图状态），它允许您将 URL（请求）路由到控制器（类）并返回几乎任何您想要的东西。使用 MVC 有很多优点，如果您来自 java/纯 http 背景，它会比 webforms 更有意义。

您可以通过搜索“.net MVC3 入门”开始使用它，甚至可以从 www.asp.net 开始获取初学者资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:38:24.307

除非您的目标是学习低级 TCP 通信、编写和配置服务、处理代码更改、编写自己的序列化/请求解析而不是坚持使用 IIS 和 HTTP，否则可能更容易。

There is no need to use WebForms - WebService (ASP.Net or even WCF) or [MVC Web API](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api) will give you ability to implement methods you want without need to write your own custom serialization and request parsing infrastructure. You can even do long poll if/when needed (i.e. [SignalR](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)).

I'd start with basic MVC application reporting JSON results as server side as it will still show all issues involved with writing chat client (persistence, discovery of other clients, quick status updates) while allowing you to focus on communication itself (including easily see all traffic if need).

# c++ - 类转储创建的奇异 CDStructures.h

> ID：15345209
> 
> 赞同：1
> 
> 时间：2013-03-11T17:50:35.737
> 
> 标签：c++, objective-c, class, assembly, struct

今天我下载了[*class-dump*](http://stevenygard.com/projects/class-dump/)以获取有关 Mach-O 文件的信息。
在*class-dump*创建示例应用程序的头文件后，我 `CDStructures.h`发现该工具创建了一个奇怪的东西。

`struct`正如预期的那样，-objects有很多定义。但其中一些没有成员，如下所示：

```
struct AlbumInfo;
....
struct ArtistInfo;
.... 
```

但其他`struct`对象使用这些空对象，如下所示：

```
struct RefPtr<sp::AlbumInfo> {
    struct AlbumInfo *_p;
}; 
```

是对的吗？还是缺少什​​么？我觉得奇怪的是它们有这么多没有成员的对象。
另一件事是这个`namespace`或任何东西`sp`都没有在任何地方声明。

但我看到的最奇怪的是尖括号内的元素一方面是类型（`sp::GuiControl*`），另一方面是值（`64`，`true`）。

```
struct Array<sp::GuiControl*, sp::GuiControl* const&, 64, true> {
    struct GuiControl **_field1;
    unsigned int _field2;
    unsigned int _field3;
}; 
```

也许，你已经看到了这样的东西，可以帮助我。我不知道我应该从哪里开始。
这只是我的错还是 Mach-O 文件中缺少信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:58:08.730

`class-dump`只能向您显示编译器生成的可执行文件的 Objective-C 元数据中存在信息的结构。这通常包括任何 Objective-C 类和它们作为成员包含的任何结构（Objective-C 运行时需要知道它们的布局以便反射/动态访问工作）。在`struct AlbumInfo`or的情况下`struct GuiControl`，仅存在*指向*它们的指针，并且无论指针指向什么，指针的大小始终相同，因此无需包含指向结构的布局。

`class-dump`包括前向声明，以便代码在语法上是正确的，但它没有生成实际的结构布局，因为它不存在于二进制文件中。

至于尖括号语法，它只是 C++ 模板实例化。同样，模板声明不存储在二进制文件中，而只是具有指定所有参数的模板的具体实例。

# java - 将 JAVA HOME 作为参数传递给 mvn

> ID：15345215
> 
> 赞同：15
> 
> 时间：2013-03-11T17:51:09.713
> 
> 标签：java, maven, command-line

我想知道是否可以将 JAVA_HOME 作为参数传递给 mvn 命令行。我几乎到处搜索，但找不到答案。

我知道我们可以使用导出设置 JAVA_HOME，但如果可能的话，我需要将它作为参数传递。就像是：

```
 mvn install -DJava_Home=/usr/java/jdk-1.7.0 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-06-08T21:32:50.613

我这样做的另一种 hacky 方式：（我的大部分项目都在 Java 7 上，但在 Java 8 上很少）

1）添加一个新的环境变量 JAVA8_HOME 到你的 .zshrc （或类似的）

2）复制“mvn”可执行文件并将其命名为“mvn8”

3) 将 'mvn8' 中的 'JAVA_HOME' 替换为 'JAVA8_HOME'

现在，`mvn8 clean install`应该可以工作了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T17:56:48.710

不，不是直接的，但是在我的机器上查看 mvn.bat 我看到了这个有希望的片段：

```
@REM Execute a user defined script before this one
if not "%MAVEN_SKIP_RC%" == "" goto skipRcPre
if exist "%HOME%\mavenrc_pre.bat" call "%HOME%\mavenrc_pre.bat" 
```

所以你可以在 mavenrc_pre 脚本文件中覆盖你喜欢的任何变量，尽管我意识到这不会让你从命令行覆盖 java home。在最坏的情况下，mvn 是一个简单的脚本文件，您可以向其中添加选项。另请注意，简单地覆盖 JAVA_HOME 可能并不总是产生预期的结果，因为在许多系统上 JAVA_HOME\bin 位于路径上。这意味着即使您覆盖它，以前的 jvm 仍将在路径上，这可能会导致意外结果。

# sql - 从内部选择语句计数

> ID：15345221
> 
> 赞同：6
> 
> 时间：2013-03-11T17:51:29.400
> 
> 标签：sql, sql-server, select, count

我正在尝试在 SQL Server 中执行以下查询，但出现错误。有人可以解释一下如何计算内部选择语句吗？

```
SELECT COUNT(*) from

(Select ID,
      COUNT(ID)
  FROM [Testing].[dbo].[Bench] group by ID  having COUNT(*) =5); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T17:54:35.110

我想您只是错过了第二列的名称：

```
SELECT COUNT(*)
FROM (
    Select id, COUNT(id) count_of_id
    FROM [Testing].[dbo].[Bench]
    GROUP BY id
    HAVING COUNT(*) =5
); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T17:54:53.623

试试下面的代码：

```
SELECT COUNT(*) from

(Select ID,
      COUNT(ID) as cnt
  FROM [Testing].[dbo].[Bench] group by ID  having COUNT(*) =5) tbl; 
```

# mysql - 使用 django 插入数据库记录竞争条件

> ID：15345222
> 
> 赞同：1
> 
> 时间：2013-03-11T17:51:40.497
> 
> 标签：mysql, sql, database, django, race-condition

我正在尝试使用 django 实现最大大小的列表。例如我有一个这样的模型：

```
class RecentView(models.Model):
    member = models.ForeignKey(Member)
    product = models.ForeignKey(Product)
    view_time = models.DateTimeField(auto_now=True, auto_now_add=True)
    class Meta:
        unique_together = ('member', 'product') 
```

基本上，我会保留成员最近查看过的产品列表。我想将每个成员的记录数限制在 X 内。换句话说，只保留该成员最近查看过的 X 个产品。因此，在新插入期间，如果该成员已有 X 条记录，则最新条目应覆盖最旧的条目，以保持该成员 = X 的记录总数。在我看来，我目前执行查询以首先获取记录数：

```
num_views = RecentView.objects.filter(member_id=<some_mid>).count() 
```

然后我继续逻辑：

```
if num_views >= X:
    # Do not call create(), but instead issue another query to grab the oldest record and then update it
    ....
else:
    view = RecentView.objects.create(member_id=<some_mid>, product_id=<some_pid>) 
```

如果同时调用此代码将失败，因为此函数不是原子的。我不确定如何使用数据库锁来执行此操作，因为我没有锁定单个记录，并且锁定整个表似乎是不必要的浪费，因为这只影响单个成员。

对我来说，这应该是一种常见的情况，但由于某种原因，我找不到有类似问题的人。有人可以指出他们如何解决这个问题的正确方向吗？

谢谢！约翰

# php - Mysql timediff 返回两个不同的值

> ID：15345226
> 
> 赞同：1
> 
> 时间：2013-03-11T17:51:45.287
> 
> 标签：php, mysql, select, time

我有一个正在测试时间的查询。

我得到了两次不同的时间，这让我怀疑我的数据的正确性。

这是两个例子：

```
SELECT 
    users.fname as counselor,
    count(session.anum) as students,
    SEC_TO_TIME(AVG(TIME_TO_SEC(TIMEDIFF(starttime, signintime)))) AS 'AVG Wait Time',
    SEC_TO_TIME(AVG(TIME_TO_SEC(TIMEDIFF(finishtime, starttime)))) AS 'AVG Session Length'
FROM session
    LEFT JOIN support 
        ON support.session_id = session.session_id
    LEFT JOIN users 
        ON users.username = support.counselor
WHERE session.status = 3 
GROUP BY fname; 
```

这返回：

```
00:01:17 and 00:00:05 
```

下一个查询是：

```
SELECT 
    users.fname as counselor,
    count(session.anum) as students,
    SEC_TO_TIME(AVG(TIMEDIFF(starttime, signintime))) AS 'AVG Wait Time',
    SEC_TO_TIME(AVG(TIMEDIFF(finishtime, starttime))) AS 'AVG Session Length'
FROM session
    LEFT JOIN support 
        ON support.session_id = session.session_id
    LEFT JOIN users 
        ON users.username = support.counselor
WHERE session.status = 3 
GROUP BY fname;

00:01:37 and 00:00:05 
```

为什么会发生这种情况，我应该信任哪个结果集？如果有人能消除我的困惑，我会很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:55:39.073

TIMEDIFF() 返回一个字符串，例如

```
TIMEDIFF('13:07:33', '9:5:37') -> 04:01:56 
```

如果你直接取平均值，mysql 将尝试转换`04:01:56`为 int 并最终`avg(04)`改为。

这就是为什么你必须`time_to_sec`，它以简单的 int 形式返回该时间值：14516，可以直接对其进行平均。

# xml - 如何在 XPATH 中应用三级条件

> ID：15345228
> 
> 赞同：1
> 
> 时间：2013-03-11T17:51:47.860
> 
> 标签：xml, xpath, expression, multi-level

这是我从 Zoho CRM 获得的 XML，我需要获取记录主要联系人的电子邮件：

```
<!--?xml version="1.0" encoding="UTF-8" ?-->
  <response uri="/crm/private/xml/Contacts/getRelatedRecords">
     <result>
       <contacts>
        <row no="1">
           <fl val="CONTACTID">511618000000889989</fl>
           <fl val="Email">
               <!--[CDATA[person1@example.com]]-->
           </fl>
           <fl val="Primary">
               <!--[CDATA[true]]-->
           </fl>
        </row>
        <row no="2">
           <fl val="CONTACTID">511617845475451213</fl>
           <fl val="Email">
              <!--[CDATA[person2@example.com]]-->
           </fl>
           <fl val="Primary">
              <!--[CDATA[false]]-->
           </fl>
        </row>
       </contacts>
     </result>
  </response> 
```

在上述情况下，xpath 表达式应返回 person1@example.com 作为主要人员的电子邮件。

我开始将表达式写为：

```
/response/result/contacts/row[./fl/@val='Primary' and ]/fl[@val='Email']/text() 
```

但无法超越为行元素编写组合谓词的点。

**另一个问题是命名空间。似乎这个 XML 有一个命名空间。在这种情况下如何处理 XPATH 中的命名空间？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:48:21.897

这行得通吗？

```
//fl[@val='Primary' and contains(text(), 'true')]//preceding-sibling::fl[@val='Email'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:34:53.827

您的 CDATA 部分不应写为注释。假设你更换

```
<!--[CDATA[true]]--> 
```

和

```
<![CDATA[true]]> 
```

你可以得到你的地址

```
//row[fl[@val="Primary" and matches(text(),"true")]]/fl[@val="Email"]/text() 
```

如果现在您无法控制 CDATA 的生成，并且想将它们视为注释，请选择

```
//row[fl[@val="Primary" and matches(comment(),"true")]]/fl[@val="Email"]/substring-before(substring-after(comment(),"CDATA["),"]]") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:25:19.483

假设这些`CDATA`部分实际上*是*CDATA 部分而不是评论，应该这样做：

```
/response/result/contacts/row[normalize-space(fl[@val = 'Primary]) = 'true']
                             /fl[@val = 'Email'] 
```

据我所知，您的 XML 不使用名称空间。`uri=`只是一个普通的属性。

# android - 为 android 4.1 设备编译和构建“iw”？

> ID：15345229
> 
> 赞同：5
> 
> 时间：2013-03-11T17:51:49.527
> 
> 标签：android, linux, linux-kernel, android-wifi, android-wireless

我需要在 android 4.1 设备上安装 iw 无线包。但我不知道要安装的软件包的要求版本和方式！

是否需要 linux 平台来执行此操作，或者在 adb shell 上为 android 生根设备构建和安装就足够了。

我看到了这个[链接](http://www.onlyxool.net/porting-iw-tools-to-android/)，但是当我从 adb 终端执行此操作时，我看到 git 和一些未找到的 shell ？？？怎么做 ？

好像没人知道？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T13:45:46.893

在构建 iw 版本 3.11（已经有一个 Android.mk 文件）时，由于缺少/错误的标头和库，我遇到了一些问题。由于它有一个 Android.mk 文件，因此可以使用 NDK。

在下文中，我将假设以下内容：

*   之前已经构建了设备映像（内核头文件和 libnl-2 静态库至少应该可用）。我为 i9300 构建了 CyanogenMod 10（内核 3.0.something），更新下面的路径以反映这一点。
*   NDK 安装到`~/android/system/ndk`.
*   NDK 已安装适当的平台和工具链。

提取`iw-3.11.tar.xz`和更改我的目录后的准备工作：

```
ln -s . jni
ln -nsv ~/android/system/external ./ 
```

下一个问题是 netlink 库：

```
In file included from external/libnl-headers/netlink/genl/genl.h:15:0,
                 from /tmp/and/iw/jni/iw.c:17:
external/libnl-headers/netlink/netlink.h:27:29: fatal error: linux/genetlink.h: No such file or directory. 
```

简单地创建一个链接到`android/system/out/target/product/i9300/obj/KERNEL_OBJ/usr/include/linux`破坏其他标题的链接会产生错误，例如：

```
Compile thumb  : iw <= iw.c
In file included from /home/user/android/system/ndk/platforms/android-14/arch-arm/usr/include/net/if.h:28:0,
                 from /tmp/and/iw/jni/iw.c:10:
/tmp/and/iw/jni/linux/if.h:178:19: error: field 'ifru_addr' has incomplete type
/tmp/and/iw/jni/linux/if.h:179:19: error: field 'ifru_dstaddr' has incomplete type
/tmp/and/iw/jni/linux/if.h:180:19: error: field 'ifru_broadaddr' has incomplete type
/tmp/and/iw/jni/linux/if.h:181:19: error: field 'ifru_netmask' has incomplete type
/tmp/and/iw/jni/linux/if.h:182:20: error: field 'ifru_hwaddr' has incomplete type
In file included from external/libnl-headers/netlink/netlink.h:20:0,
                 from external/libnl-headers/netlink/genl/genl.h:15,
                 from /tmp/and/iw/jni/iw.c:17:
/home/user/android/system/ndk/platforms/android-14/arch-arm/usr/include/sys/socket.h:74:44: warning: 'struct msghdr' declared inside parameter list [enabled by default]
/home/user/android/system/ndk/platforms/android-14/arch-arm/usr/include/sys/socket.h:74:44: warning: its scope is only this definition or declaration, which is probably not what you want [enabled by default]
/home/user/android/system/ndk/platforms/android-14/arch-arm/usr/include/sys/socket.h:75:38: warning: 'struct msghdr' declared inside parameter list [enabled by default]
In file included from external/libnl-headers/netlink/netlink.h:25:0,
                 from external/libnl-headers/netlink/genl/genl.h:15,
                 from /tmp/and/iw/jni/iw.c:17:
/tmp/and/iw/jni/linux/netlink.h:33:2: error: unknown type name 'sa_family_t'
In file included from external/libnl-headers/netlink/genl/genl.h:15:0,
                 from /tmp/and/iw/jni/iw.c:17:
external/libnl-headers/netlink/netlink.h:51:16: warning: 'struct msghdr' declared inside parameter list [enabled by default]
external/libnl-headers/netlink/netlink.h:54:19: warning: 'struct iovec' declared inside parameter list [enabled by default]
make: *** [/tmp/and/iw/obj/local/armeabi/objs/iw/iw.o] Error 1 
```

一种解决方法是创建`linux`目录并将符号链接`~/android/system/out/target/product/i9300/obj/KERNEL_OBJ/usr/include/linux/genetlink.h`放入其中：

```
mkdir -p linux
ln -svn ~/android/system/out/target/product/i9300/obj/KERNEL_OBJ/usr/include/linux/genetlink.h linux/ 
```

最后打补丁`Android.mk`以完成对 netlink 库的链接：

```
sed "/LOCAL_LDFLAGS/s#\$# -L$HOME/android/system/out/target/product/i9300/obj/STATIC_LIBRARIES/libnl_2_intermediates -lnl_2#" -i Android.mk 
```

现在可以开始构建：

```
NDK_PROJECT_PATH=$PWD ~/android/system/ndk/ndk-build TARGET_PLATFORM=android-14 
```

它不会完成，因为找不到 netlink/genl/genl.h，但`iw` 二进制文件在 libs/armeabi 中可用！

# vb.net - 如何在下载代码中添加 else 语句？

> ID：15345236
> 
> 赞同：0
> 
> 时间：2013-03-11T17:52:07.123
> 
> 标签：vb.net, download

我正在制作一个文件下载器，我希望它将文件下载到我选择的目录或默认目录。

下载代码在这里：

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Button1.Enabled = False
    Button1.Text = "Updating..."
    WebBrowser1.Visible = True

    Dim uri As System.Uri = New System.Uri("http://199.91.154.170/e9f6poiwfocg/pei02c8727sa720/Ultra+v08.zip")
    Dim webclient As System.Net.WebClient = New System.Net.WebClient()

    Dim path As String = 
            If apppath = Nothing then
                New String(System.IO.Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), "test\\Test.zip"))
            Else New String
                (apppath)
            End if

    Dim fileInfo As System.IO.FileInfo = New System.IO.FileInfo(path)
    If Not System.IO.Directory.Exists(fileInfo.Directory.FullName) Then
        System.IO.Directory.CreateDirectory(fileInfo.Directory.FullName)
    End If

    AddHandler webclient.DownloadFileCompleted, AddressOf webclient_DownloadDataCompleted

    webclient.DownloadFileAsync(uri, path)

End Sub
Private Sub 
```

用户选择的路径 apppath 在这里定义：

```
If apppath = "" Then
        Dim dialog As New FolderBrowserDialog()
        dialog.RootFolder = Environment.SpecialFolder.Desktop
        dialog.SelectedPath = Path.Combine(Environment.GetFolderPath( _
        Environment.SpecialFolder.ApplicationData))
        dialog.Description = "Select directory where to install the files"
        If dialog.ShowDialog() = Windows.Forms.DialogResult.OK Then
            apppath = dialog.SelectedPath
        End If
        My.Computer.FileSystem.WriteAllText(apppath & " apppath.txt", apppath, False)
    End If 
```

如何修复 Dim path As String else 语句？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:06:03.780

如果我正确理解了您的问题，那么我相信有一个简单的解决方案，那就是：

```
Dim path As String
If apppath = Nothing then
    path = New String(System.IO.Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), "test\Test.zip"))
Else New String
    path = apppath
End if 
```

如果我没有正确理解您的要求，请提供更多信息。

# php - 我对 PHP SOAP_CLIENT 做错了吗？

> ID：15345243
> 
> 赞同：0
> 
> 时间：2013-03-11T17:52:58.230
> 
> 标签：php, web-services, soap, wsdl

我对 SOAP 有非常基本的了解，对我来说，我认为 SOAP 是两个不同人的翻译器，他们都说不同的语言，试图相互交流。我正在尝试使用 PHP SOAP CLIENT 从 Web 服务调用一个方法，但我无法让它工作，下面是 Web 服务服务器生成的 WSDL：

```
<wsdl:definitions xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://server.webservice.com/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" name="serviceServerService" targetNamespace="http://server.webservice.com/">
<wsdl:types>
<schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://server.webservice.com/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns="http://www.w3.org/2001/XMLSchema">
<import namespace="http://server.webservice.com/" schemaLocation="http://127.0.0.1:8080/WebbServiceServer/services/serviceServerPort?xsd=serviceserver_schema1.xsd"/>
</schema>
</wsdl:types>
<wsdl:message name="userInputResponse">
<wsdl:part element="tns:userInputResponse" name="parameters"></wsdl:part>
</wsdl:message>
<wsdl:message name="userInput">
<wsdl:part element="tns:userInput" name="parameters"></wsdl:part>
</wsdl:message>
<wsdl:portType name="serviceInterface">
<wsdl:operation name="userInput">
<wsdl:input message="tns:userInput" name="userInput"></wsdl:input>
<wsdl:output message="tns:userInputResponse" name="userInputResponse"></wsdl:output>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="serviceServerServiceSoapBinding" type="tns:serviceInterface">
<soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="userInput">
<soap:operation soapAction="" style="document"/>
<wsdl:input name="userInput">
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output name="userInputResponse">
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="serviceServerService">
<wsdl:port binding="tns:serviceServerServiceSoapBinding" name="serviceServerPort">
<soap:address location="http://127.0.0.1:8080/WebbServiceServer/services/serviceServerPort"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

我从上面的 WSDL 中了解到，我试图调用的方法是`userInput`接受字符串参数的方法，并且`userInputResponse`是来自服务器的响应，它将输出`userInput`返回的任何方法。下面是我尝试运行的 PHP CLIENT 的代码：

```
<?php
$a = array("userInput" => "This is the input");
$client = new SoapClient("http://127.0.0.1:8080/WebbServiceServer/services/serviceServerPort?wsdl", array('exceptions' => 0));

$result = $client->userInput($a);
//$functions = $client->__getFunctions();
//var_dump($client->__soapCall("userInput", $a));
//var_dump($functions);

print_r($result->userInputResponse);

if (is_soap_fault($result)) {
    trigger_error("SOAP Fault: (faultcode: {$result->faultcode}, faultstring: {$result->faultstring})", E_USER_ERROR);
}
?> 
```

我尝试运行 PHP CLIENT 不幸的是它打印了错误：

```
Notice: Undefined property: stdClass::$userInputResponse in C:\xampp\htdocs\PHP_SOAP_CLIENT\index.php on line 14 
```

为了测试客户端是否调用了`userInput`我使用的方法，`var_dump()`如果返回了一些东西：

```
var_dump($result); 
```

输出是：

```
object(stdClass)#2 (1) { ["return"]=> string(56) "Hi! this is from JAVA Web services, your input was: null" } 
```

很好，它确实返回了一些东西，但是该方法没有得到我传递的字符串。我希望有人可以识别和解释我的代码的缺陷，非常感谢任何评论和答案，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:18:50.063

您访问返回值的尝试是错误的。正如`userInputResponse`您在`var_dump()`. 实际上，返回值存储在属性`return`中。

我真的看不出这是在 WSDL 中定义的，但我认为它是不完整的。有一个对另一个 XSD 的引用，它也可能被加载并且可以包含进一步的定义。

# java - 如何替换xpath表达式中的值

> ID：15345246
> 
> 赞同：1
> 
> 时间：2013-03-11T17:53:05.093
> 
> 标签：java, xml

我有一个 XML 文件，其中节点的值是 xpath exp

**//n-文档[./n-docbody/TTA-DOCINFO/TTA-ANCESTOR[@value=#UID#]]**。

我需要在我的 java 代码中获取这个 xpath exp（我能够）并用现有的字符串变量值替换 xpath 中的**UID 。**

例如：- 如果字符串变量是“XXX”，我的 xpath 应该变成：

```
//n-document[./n-docbody/TTA-DOCINFO/TTA-ANCESTOR[@value=XXX]] 
```

我如何做到这一点。

# objective-c - NSString drawInRect:withAttributes: 导致'无法识别的选择器发送到实例......'

> ID：15345251
> 
> 赞同：4
> 
> 时间：2013-03-11T17:53:12.110
> 
> 标签：objective-c, cocoa, unrecognized-selector, nscell, nscontrol

我得到了一些非常奇怪的东西：一种方法会导致`unrecognized selector sent to instance`，但根本没有`NSLog()`任何作用。

我制作了一个自定义 NSControl 子类，我尝试在其中绘制我的自定义单元格，如下所示：

```
- (void)drawRect:(NSRect)dirtyRect {
    NSLog(@"DrawRect entered!");
    [[NSColor grayColor] set];
    [NSBezierPath fillRect:[self bounds]];

    unsigned int i, count = [cells count];
    NSRect cellRect = NSMakeRect(0, 0, ([self bounds]).size.width, cellHeight);
    for (i = 0; i < count; i++) {
        NSLog(@"Drawing cell %d at: %@", i, NSStringFromRect(cellRect));
        MKMenuCell *cell = [cells objectAtIndex:i];
        [cell drawWithFrame:cellRect inView:self];
        cellRect.origin.y += cellHeight;
    }
} 
```

并且`-[MKMenuCell drawWithFrame:inView:]`：

```
- (void)drawWithFrame:(NSRect)bounds inView:(NSView *)controlView {
    NSLog(@"-drawWithFrame:inView:");
    NSMutableDictionary *strAttribs = [[NSMutableDictionary alloc] init];
    [strAttribs setObject:[NSColor blackColor] forKey:NSFontAttributeName];
    [name drawInRect:bounds withAttributes:strAttribs]; // "unrecognized selector sent ..." is caused by this method call.
} 
```

输出：

```
2013-03-11 18:46:54.823 MacOverflow[738:a0f] DrawRect entered!
2013-03-11 18:46:54.826 MacOverflow[738:a0f] Drawing cell 0 at: {{0, 0}, {176, 30}}
2013-03-11 18:46:54.826 MacOverflow[738:a0f] -drawWithFrame:inView:
2013-03-11 18:46:54.827 MacOverflow[738:a0f] Drawing cell 1 at: {{0, 30}, {176, 30}}
2013-03-11 18:46:54.828 MacOverflow[738:a0f] -drawWithFrame:inView:
2013-03-11 18:46:54.828 MacOverflow[738:a0f] -[NSCachedWhiteColor screenFontWithRenderingMode:]: unrecognized selector sent to instance 0x100512920
2013-03-11 18:46:54.829 MacOverflow[738:a0f] An uncaught exception was raised
2013-03-11 18:46:54.831 MacOverflow[738:a0f] -[NSCachedWhiteColor screenFontWithRenderingMode:]: unrecognized selector sent to instance 0x100512920
2013-03-11 18:46:54.834 MacOverflow[738:a0f] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSCachedWhiteColor screenFontWithRenderingMode:]: unrecognized selector sent to instance 0x100512920'
*** Call stack at first throw:
(
    0   CoreFoundation                      0x00007fff88c26784 __exceptionPreprocess + 180
    1   libobjc.A.dylib                     0x00007fff858ddf03 objc_exception_throw + 45
    2   CoreFoundation                      0x00007fff88c80110 +[NSObject(NSObject) doesNotRecognizeSelector:] + 0
    3   CoreFoundation                      0x00007fff88bf88ef ___forwarding___ + 751
    4   CoreFoundation                      0x00007fff88bf4a38 _CF_forwarding_prep_0 + 232
    5   AppKit                              0x00007fff89afcfae +[NSStringDrawingTextStorage _fastDrawString:attributes:length:inRect:graphicsContext:baselineRendering:usesFontLeading:usesScreenFont:typesetterBehavior:paragraphStyle:lineBreakMode:boundingRect:padding:scrollable:] + 402
    6   AppKit                              0x00007fff896db539 _NSStringDrawingCore + 1588
    7   MacOverflow                         0x00000001000159b7 -[MKMenuCell drawWithFrame:inView:] + 229
    8   MacOverflow                         0x0000000100015f1e -[MKMenuControl drawRect:] + 595
    9   AppKit                              0x00007fff896d6cc5 -[NSView _drawRect:clip:] + 3390
    10  AppKit                              0x00007fff896d5938 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 1325
    11  AppKit                              0x00007fff896d5ca2 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 2199
    12  AppKit                              0x00007fff896d5ca2 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 2199
    13  AppKit                              0x00007fff896d5ca2 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 2199
    14  AppKit                              0x00007fff896d400a -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 767
    15  AppKit                              0x00007fff896d3b2c -[NSThemeFrame _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 254
    16  AppKit                              0x00007fff896d03de -[NSView _displayRectIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:] + 2683
    17  AppKit                              0x00007fff89649c0e -[NSView displayIfNeeded] + 969
    18  AppKit                              0x00007fff89611c3b -[NSWindow _reallyDoOrderWindow:relativeTo:findKey:forCounter:force:isModal:] + 1050
    19  AppKit                              0x00007fff896117d2 -[NSWindow orderWindow:relativeTo:] + 94
    20  AppKit                              0x00007fff895dd974 -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] + 1726
    21  AppKiProgram received signal:  “SIGABRT”.
t                              0x00007fff895dba91 loadNib + 226
    22  AppKit                              0x00007fff895dafa1 +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] + 248
    23  AppKit                              0x00007fff895dadd9 +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 326
    24  AppKit                              0x00007fff895d835b NSApplicationMain + 279
    25  MacOverflow                         0x0000000100000ef9 main + 33
    26  MacOverflow                         0x0000000100000ed0 start + 52
    27  ???                                 0x0000000000000001 0x0 + 1
)
terminate called after throwing an instance of 'NSException' 
```

如您所见`MKMenuCell`， 's`drawWithFrame:inView:`被称为。`NSLog()`但不显示其语句的输出。这里发生了什么？如何解决？

**编辑：**我现在意识到，看着 GDB 输出，第一次没有任何问题。这让它更加陌生。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T18:36:33.353

发送的错误选择器是`screenFontWithRenderingMode`NSFont 上的一个方法。我打赌你不应该为 key 的值设置颜色`NSFontAttributeName`。你可能应该给它一个字体。

# php - 打开并写入受密码保护的目录

> ID：15345256
> 
> 赞同：0
> 
> 时间：2013-03-11T17:53:29.743
> 
> 标签：php, text, password-protection

我有一个受密码保护的目录，我想用 PHP 写入文本文件。`cURL`可能是它所需要的，但我现在正在尝试`fopen`：

```
$filename = "example.txt"; 
$file     = "https://user:pass@example.com/pass-protected-folder/" . $filename;

$fh = fopen( $file, 'w' );
fwrite( $fh, "Testing 1, 2, 3.." );
fclose( $fh ); 
```

哪个不起作用；没有错误，但也没有文件被写入。

我应该怎么做才能`fopen`工作和/或是否`cURL`是更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:09:02.013

HTTP 和 HTTPS 协议不允许您创建文件，有 PUT 和 DELETE，但它们依赖于实现。

密码保护仅适用于通过 Web 服务器的请求。

如果文件位于同一台服务器上，您可以使用文件的真实或绝对路径。

对于外部服务器上的文件，您可以使用 ssh 或 scp（因为，我猜是 apache，不会让您通过 http/s 进行写入）：libssh 扩展 (php.net/manual/en/ref.ssh2.php) 或php `phpseclib' (phpseclib.sourceforge.net)。如果您不介意安全性，也可以使用 FTP。

libssh 示例：

```
$connection = ssh2_connect($myssh['host'], $myssh['port']);
ssh2_auth_password(
  $connection,
  $myssh['username'],
  $myssh['password']
);
$localfile = $myssh['localpath'].$file;
$remotefile = $myssh['remotepath'].$file;
ssh2_scp_send(
  $connection,
  $localfile,
  $remotefile, 0644
); 
```

# python - setup.py 需要 MySQL-python

> ID：15345268
> 
> 赞同：5
> 
> 时间：2013-03-11T17:53:56.453
> 
> 标签：python, setup.py

我正在编写一个`setup.py`脚本并想指定对 MySQL 包的依赖：

```
requires=['requests', 'mock', 'GitPython', 'MySQL-python'] 
```

但是`MySQL-python`对于设置工具来说看起来是非法的，因为它认为`-`应该有一个版本并且它会抛出这个错误：

> ValueError：预期的带括号的列表：'-python'

我可以在这里做什么？

*环境：Python 2.7.3；精确 32*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:11:30.930

从[distutils 文档](http://docs.python.org/2/distutils/setupscript.html#relationships-between-distributions-and-packages)：

> 要指定需要任何版本的模块或包，字符串应完全由模块或包名称组成。示例包括“mymodule”和“xml.parsers.expat”。

考虑到这一点，您应该能够检查 MySQL-python 的`_mysql`模块：

```
requires=['requests', 'mock', 'GitPython', '_mysql'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:54:57.987

在这一点上，您不应该遵循 distutils 文档。 `requires`来自为分发定义元数据的 PEP，但它实际上不适用于任何工具，包括 distutils。现在，您需要选择一个不在标准库中的打包工具，并使用它的约定来定义依赖项和构建时依赖项。pip 有需求文件；分发有 requires_dist 和 setup_requires；buildout 还有其他东西，等等。

# jquery - jquery .html('') 没有按我的预期工作

> ID：15345269
> 
> 赞同：0
> 
> 时间：2013-03-11T17:53:56.653
> 
> 标签：jquery

我有这个代码...

```
$(".loadMsg").load('modalAnsmessages.php?id=<?php echo $row['id']; ?>&t=r',function(){ 
    $('#preloader').fadeOut();
    $(".modal_dialog .content").css({ 'background-color': '#eeeeee' }); 
    setTimeout("$.fancybox.resize();",500);     
}); 
```

效果很好。后来我运行这段代码......

```
$(".p_close").click( function(){
    $(".loadMsg").html('');
    $(".loadMsgOpen").show();
    $(".modal_dialog .content").css({ 'background-color': '#ffffff' });
    setTimeout("$.fancybox.resize();",500);  
}); 
```

...乍一看，该代码似乎运行良好；但是，我认为它没有`$(".loadMsg").html('');`像我预期的那样工作。每次我运行第一个代码块时，之前的每个内容`.loadMSG`都会暂时显示，直到它最终通过所有之前的实例并停止。有时它会停在正确的位置，有时则不会。

我希望发生的是，当`$(".p_close").click`运行时，我希望所有的记忆都`$(".loadMsg")`消失了。我以为`$(".loadMsg").html('');`会这样做，但显然我错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:56:23.703

尝试使用[空](http://api.jquery.com/empty/)函数：

> 此方法不仅删除子（和其他后代）元素，还删除匹配元素集中的任何文本。

```
$(".p_close").click( function(){
    $(".loadMsg").empty();
    $(".loadMsgOpen").show();
    $(".modal_dialog .content").css({ 'background-color': '#ffffff' });
    setTimeout("$.fancybox.resize();",500);  
}); 
```

# java - while循环中缺少return语句

> ID：15345270
> 
> 赞同：0
> 
> 时间：2013-03-11T17:53:57.573
> 
> 标签：java, loops, while-loop

*我为“GPS 蓝牙接收器”*编写了一些代码，它向我发送持续的数据并且我收到了它，但我无法在我的`text-box`.

建议我如何在“while 循环”未结束时改进我的代码以继续数据。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Enumeration;
import java.util.TooManyListenersException;

public class communication {
  public static CommPortIdentifier portId = null;

  public String com() throws UnsupportedCommOperationException, IOException,
      TooManyListenersException
  {
    int c = 1;

    String wantedPortName = "COM16";

    Enumeration portIdentifiers = CommPortIdentifier.getPortIdentifiers();

    while (portIdentifiers.hasMoreElements()) {
      CommPortIdentifier pid = (CommPortIdentifier) portIdentifiers.nextElement();
      if (pid.getPortType() == CommPortIdentifier.PORT_SERIAL
          && pid.getName().equals(wantedPortName)) {
        portId = pid;
        break;
      }
    }
    if (portId == null) {
      System.err.println("Could not find serial port " + wantedPortName);
      System.exit(1);
    } else {
      System.out.println("system find gps reciever");
    }
    SerialPort port = null;
    try {
      port = (SerialPort) portId.open("RMC", 1);
      System.out.println("all are ok");
    } catch (PortInUseException e) {
      System.err.println("Port already in use: " + e);
      System.exit(1);
    }
    // int i=Integer.parseInt(new vps().baud_rate.getItemAt(new vps().baud_rate.getItemCount()));
    port.setSerialPortParams(4800, SerialPort.DATABITS_8, SerialPort.STOPBITS_1,
        SerialPort.PARITY_NONE);

    BufferedReader is = null;

    try {
      is = new BufferedReader(new InputStreamReader(port.getInputStream()));
      System.out.println("data is ok");
    } catch (IOException e) {
      System.err.println("Can't open input stream: write-only");
      is = null;
    }

    while (new test().bp)// this is variable is ouside of class and define by public it work
    {

      String st = is.readLine();

      // System.out.println(st);
      // st = st.replace(st, "");

      return st;

    }
    if (is != null)
      is.close();

    if (port != null)
      port.close();

  }
} 
```

测试类代码...

```
import java.io.IOException;
import java.util.TooManyListenersException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.comm.UnsupportedCommOperationException;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * test.java
 *
 * Created on Mar 11, 2013, 9:08:52 AM
 */
/**
 *
 * @author DJ ROCKS
 */
public class test extends javax.swing.JFrame {
    public boolean bp=false;

    /** Creates new form test */
    public test() {
        initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        ok = new javax.swing.JButton();
        a = new javax.swing.JTextField();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        ok.setText("ok");
        ok.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                okActionPerformed(evt);
            }
        });

        a.setText(" ");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(62, 62, 62)
                        .addComponent(a, javax.swing.GroupLayout.PREFERRED_SIZE, 394, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(238, 238, 238)
                        .addComponent(ok)))
                .addContainerGap(124, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(a, javax.swing.GroupLayout.PREFERRED_SIZE, 39, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(67, 67, 67)
                .addComponent(ok)
                .addContainerGap(160, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    private void okActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:
        bp=true;
        if(evt.getSource()==ok)
        {
            try {
                a.setText(new communication().com());
            } catch (UnsupportedCommOperationException ex) {
                Logger.getLogger(test.class.getName()).log(Level.SEVERE, null, ex);
            } catch (IOException ex) {
                Logger.getLogger(test.class.getName()).log(Level.SEVERE, null, ex);
            } catch (TooManyListenersException ex) {
                Logger.getLogger(test.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new test().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JTextField a;
    private javax.swing.JButton ok;
    // End of variables declaration
} 
```

当我运行这个代码编译器显示这样的错误....

```
Exception in thread "AWT-EventQueue-0" java.lang.RuntimeException: Uncompilable source code - missing return statement
at communication.com(communication.java:14)
at test.okActionPerformed(test.java:86)
at test.access$000(test.java:22)
at test$1.actionPerformed(test.java:47)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6505)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6270)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2719)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
at java.awt.EventQueue.access$200(EventQueue.java:103)
at java.awt.EventQueue$3.run(EventQueue.java:682)
at java.awt.EventQueue$3.run(EventQueue.java:680)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:696)
at java.awt.EventQueue$4.run(EventQueue.java:694)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:59:23.920

这是您的功能的结束：

```
while(new test().bp)//this is variable is ouside of class and define by public it work 
{

   st = is.readLine();
   return st;
}
if (is != null) is.close();
if (port != null) port.close(); 
```

如果 bp 为假，则退出 while 循环而不返回。在这种情况下，您关闭 is 和端口，然后......没有返回语句。所以编译器不知道如果发生这种情况它应该返回什么。

顺便说一句，那个循环逻辑没有意义，因为它是一个美化的“如果”——如果你返回，你就不可能再循环了。

# android - 带多选的GridView不显示选中项状态（只有按下状态）

> ID：15345271
> 
> 赞同：4
> 
> 时间：2013-03-11T17:53:59.367
> 
> 标签：android, android-gridview, android-selector

我有`GridView`一个 ChoiceMode 为`GridView.CHOICE_MODE_MULTIPLE_MODAL`. 我希望选择的行为与您在图库应用程序中看到的类似（即，长按某个项目，所选项目具有半透明的前景色以指示它已被选中，短按其他项目添加或将它们从选择中删除）。

我创建了一个状态选择器，如下所示：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" android:exitFadeDuration="@android:integer/config_mediumAnimTime">
  <item android:drawable="@drawable/pressed_background" android:state_activated="true"/>
  <item android:drawable="@drawable/pressed_background" android:state_checked="true"/>
  <item android:drawable="@drawable/pressed_background" android:state_selected="true"/>
  <item android:drawable="@drawable/pressed_background" android:state_pressed="true"/>
</selector> 
```

这是`pressed_background.xml`文件：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
  <solid android:color="@color/pressed" />
</shape> 
```

以及它所指的颜色：

```
<color name="pressed">#CC30d3dc</color> 
```

我将它应用到我的网格中，如下所示：

```
<GridView
    android:id="@+id/grid"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@id/header"
    android:layout_marginTop="8dp"
    android:columnWidth="112dp"
    android:divider="@null"
    android:dividerHeight="0dp"
    android:drawSelectorOnTop="true"
    android:listSelector="@drawable/selectable_background"
    android:numColumns="auto_fit"
    android:stretchMode="columnWidth" /> 
```

这是`XML`网格项目：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@android:color/transparent" >

<ImageView
    android:id="@+id/photo"
    android:layout_width="@dimen/add_photos_image_size"
    android:layout_height="@dimen/add_photos_image_size"
    android:layout_centerInParent="true" />

</RelativeLayout> 
```

问题是所选状态永远不会出现在网格项目上。当我开始长按时，按下状态颜色按预期显示在网格项目的顶部，但是一旦它被选中，颜色就会消失，并且没有迹象表明该项目处于选中状态。上下文操作栏按预期显示。我已经尝试了尽可能多的不同变体`<selector>`和网格项目背景。

# android - 使用 ActivityInstrumentationTestCase2 似乎无法测试 ListView 内容

> ID：15345276
> 
> 赞同：0
> 
> 时间：2013-03-11T17:54:30.990
> 
> 标签：android, mockito, android-testing

我有以下测试代码。我正在尝试测试是否从 SQLite 数据库填充列表。

```
public class ViewIssuesActivityTest extends BaseActivityTest<ViewIssuesActivity>{

  private List<Issue> issues;

  public ViewIssuesActivityTest() {
    super(ViewIssuesActivity.class);
  }

  public void setUp() throws Exception {
    super.setUp();
    issues = new ArrayList<Issue>();
    issues.add(new Issue("Trial","Desc","Location","ImagePath"));
    IssueRepository issueRepository = mock(IssueRepository.class);

    doAnswer(new Answer<Object>() {
        @Override
        public List<Issue> answer(InvocationOnMock invocation) throws Throwable {
            return issues;
        }
    }).when(issueRepository).getIssues();
    activity.setIssueRepository(issueRepository);

  }

  public void testNumberOfIssuesRecorded() {
    ListView listView = (ListView) activity.findViewById(android.R.id.list);
    assertEquals(1, listView.getCount());
  }
} 
```

我的 BaseActivityTest 代码是：

```
public class BaseActivityTest<T extends Activity> extends ActivityInstrumentationTestCase2<T> {

 protected T activity;

 public BaseActivityTest(Class<T> activityClass) {
     super(activityClass);
 }

 @Override
 protected void setUp() throws Exception {
     activity = getActivity();
 }
} 
```

我的 ViewIssuesActivity 如下：

```
public class ViewIssuesActivity extends ListActivity{

 private IssueRepository issueRepository;

 @Override
 protected void onCreate(Bundle savedInstanceState) {

 super.onCreate(savedInstanceState);
 setContentView(com.change.kranti.R.layout.issues);
 issueRepository = new IssueRepository(getApplicationContext());

 List<Issue> issues = new ArrayList<Issue>();
 issues = issueRepository.getIssues();
 ArrayAdapter<Issue> adapter = new ArrayAdapter<Issue>(this,
  android.R.layout.simple_list_item_1, issues);

 setListAdapter(adapter);
 }

} 
```

问题是我得到错误：expected<1> got <0>

我认为问题是在创建 issueRepository 之前调用了 onCreate 方法。我想模拟 IssueRepository 并测试我的列表是否被填充。

我的代码有什么问题，或者是否有更好的方法来测试此功能。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T19:46:33.537

你说的对。问题是在注入`onCreate`模拟之前调用了该方法。`issueRepository`当您`getActivity`在 an 的上下文中调用时`ActivityInstrumentationTestCase2`，所有常用的生命周期方法都会被调用（即`onCreate`、`onStart`和`onResume`）。当您的测试代码调用`setIssueRepository`时，已经为时已晚，问题已从存储库中获取。

在这种情况下，我知道的最佳解决方案是使用依赖注入，无论是手动还是使用 DI 框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:51:12.613

目前尚不清楚您要做什么。

您不能同时针对同一个类运行两个测试。ActivityInstrumentationTestCase2类本质上是被测Activity的控制器和包装器，但它只能控制一个Activity，不能用多个ActivityInstrumentationTestCase2实例控制同一个Activity。

要为测试驱动开发设置应用程序，请尝试使用尽可能多的 POJO（普通旧 Java 对象）。将 Activity 测试限制为诸如发送 Intent 或您可以模拟的 POJO 之间的集成之类的东西。

ActivityInstrumentationTestCase2 是 JUnit TestCase 子类，但它有局限性。

# twitter-bootstrap - 输入字段的引导 css

> ID：15345277
> 
> 赞同：0
> 
> 时间：2013-03-11T17:54:33.453
> 
> 标签：twitter-bootstrap

我有一个输入字段，我想使用 bootstrap alert css 类。问题是我无法让它工作，因为 bootstrap 还定义了更具体的选择器`input[type="text"]`。那么，是这样吗？我可以忘记在输入元素上使用那个警报 css 类吗？我真的很想避免仅为输入字段创建更具体的 css 规则......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:48:08.323

您不必“忘记它”，但您必须接触一点 CSS（或者实际上是 LESS）。

您可以使用 LESS mixins 完成大部分工作：

```
input.myInputAlert {    
  .alert;
} 
```

这大致给出了以下内容

```
input.myInputAlert {
  /* padding: 8px 35px 8px 14px; */
  /* margin-bottom: 20px; */
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
  background-color: #fcf8e3;
  border: 1px solid #fbeed5;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px;
  color: #c09853;
} 
```

我删除了填充和边距规则，让它使用真实`input`值。

无需太多测试，它看起来确实有效：http: [//jsbin.com/oqoqeg/2](http://jsbin.com/oqoqeg/2)

* * *

你可以在那里看到 LESS 编译[（lesscss.org）](http://lesscss.org/#usage)

# bash - 将命令直接传送到 shell 可执行文件

> ID：15345280
> 
> 赞同：1
> 
> 时间：2013-03-11T17:54:43.003
> 
> 标签：bash

我试图了解以下内容之间的区别

方法一：

1.  启动 bash shell
2.  在 bash shell 上键入命令`my_command myargs`

方法二：

1.  启动 bash shell
2.  直接执行以下`my_command myargs | /bin/bash/`

我的命令在方法 1 中通过，但在方法 2 中没有。我认为这两种方法是等效的。当然，在方法 1 中，我在执行 my_command 之前没有执行任何命令/更改路径变量。在方法 2 中，我只是创建一个全新的 shell 并将我的命令输入其中。

有人可以解释其中的区别吗？是否缺少 $PATH、环境变量等？如果是这样，我怎样才能回显/找出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:55:58.583

**您的“方法 2”将输出**通过管道`my_command`传输到 bash。
相当于

```
$(my_command myargs) 
```

如果您改为管道*文本 text*，它将起作用：

```
echo my_command myargs | /bin/bash/ 
```

# ruby - 评估 Ruby 和 Mongo 的性能：文件中有 160 万条小记录，需要 15 分钟才能将 80 万条记录写入 Mongo？更有效的方法？

> ID：15345281
> 
> 赞同：0
> 
> 时间：2013-03-11T17:54:48.697
> 
> 标签：ruby, mongodb

我们在一个平面文件中有 160 万条记录。每条记录包含三个或四个少于 100 个字符的短字符串。

我们只需要这些记录中的 800K。我们将这些记录写入 Mongo 集合。其他 800K 被忽略。

处理文件大约需要 15 分钟，这意味着我们处理大约 1.67K 记录/秒。这是预期的性能，还是该过程应该更快（例如，5K 记录/秒、10K 记录/秒）？

下面的代码（@skip 是大约 800K 应用程序 ID 的哈希）。

```
def updateApplicationDeviceTypes(dir, limit)
  puts "Updating Application Data (Pass 3 - Device Types)..."
  file = File.join(dir, '/application_device_type')
  cols = getColumns(file)
  device_type_id_col = cols[:device_type_id]

  update = Proc.new do |id, group|
    @applications_coll.update(
      { "itunes_id" => id },
      { :$set => { "devices" => group } }
      # If all records for one id aren't adjacent, you'll need this instead
      #{ :$addToSet => { "devices" => { :$each => group } } }
    ) unless !id or @skip[id.intern]
  end
  getValue = Proc.new { |r| r[device_type_id_col] }

  batchRecords(file, cols[:application_id], update, getValue, limit)
end

# result to an array, before calling "update" on the array/id
def batchRecords(filename, idCol, update, getValue, limit=nil)
  current_id    = nil
  current_group = []

  eachRecord(filename, limit) do |r|
    id    = r[idCol]
    value = getValue.call(r)

    if id == current_id and !value.nil?
      current_group << value
    else
      update.call(current_id, current_group) unless current_id.nil?
      current_id    = id
      current_group = value.nil? ? [] : [value]
    end
  end

  # Since the above is only called once for each row, we still
  # have one group to update.
  update.call(current_id, current_group)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:03:24.143

模式设计和应用程序的读写模式在应用程序性能中发挥着极其重要的作用。

我建议在查看机器和 IO 级别性能之前启用分析器：

[http://docs.mongodb.org/manual/tutorial/manage-the-database-profiler/](http://docs.mongodb.org/manual/tutorial/manage-the-database-profiler/)

您可能还会发现去年 MongoSV 中的这些演讲很有用：

[http://www.10gen.com/presentations/mongosv-2012/lessons-field-performance-operations](http://www.10gen.com/presentations/mongosv-2012/lessons-field-performance-operations) [http://www.10gen.com/presentations/mongosv-2012/mongodb-performance-tuning](http://www.10gen.com/presentations/mongosv-2012/mongodb-performance-tuning)

# javascript - 在原型对象分配中将实例引用为“this”

> ID：15345284
> 
> 赞同：0
> 
> 时间：2013-03-11T17:54:59.210
> 
> 标签：javascript

下面的示例包含一些格式化函数和一个在字段和格式化函数之间映射的对象。

```
MyObject = function() {};
MyObject.prototype.formatters = {
    'money': function(value) { return "&euro;" + value },
    'hyperlink': function(value) { return "<a href='"+value+"'>"+value+"</a>";
}
MyObject.prototype.fieldFormatters = {
    'field1': this.formatters.money,
    'field2': this.formatters.hyperlink
} 
```

不幸的是，上下文`fieldFormatters`是`window`在评估时，所以我无法参考`this.formatters`。是否有替代方法来参考`this.formatters`或解决此问题的更好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:57:44.093

您需要参考`prototype`，而不是实例：

```
MyObject.prototype.fieldFormatters = {
    'field1': MyObject.prototype.formatters.money,
    'field2': MyObject.prototype.formatters.hyperlink
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:59:03.693

只有函数在上下文中执行。

```
MyObject = function() {};
MyObject.prototype.formatters = {
    'money': function(value) { return "&euro;" + value },
    'hyperlink': function(value) { return "<a href='"+value+"'>"+value+"</a>";
}
MyObject.prototype.getFieldFormatters = function () {
    // here this is instance of MyObject having correct __proto__
    return {
        'field1': this.formatters.money,
        'field2': this.formatters.hyperlink
    }
} 
```

但是你可以做一个技巧：使用[getters](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects#Defining_getters_and_setters)：

```
Object.defineProperty(MyObject.prototype, "fieldFormatters", {get : function () {
    // here this is instance of MyObject having correct __proto__
    return {
        'field1': this.formatters.money,
        'field2': this.formatters.hyperlink
    }
}}) 
```

# php - 常量问题

> ID：15345290
> 
> 赞同：0
> 
> 时间：2013-03-11T17:55:40.833
> 
> 标签：php

我有错误“使用未定义的常量 PATH_TO_WORDS - 假定为 'PATH_TO_WORDS'”。

```
private function changeFileName($fileName, $path) {
    if ( $path == 'db') {
        $path = PATH_TO_FILES_FROM_DB;
    } elseif ( $path == 'file' ) {
        $path = PATH_TO_WORDS; // there error
    } else {
        throw new Exception("Invalid path for file: $path");
    }

    $fileName = preg_replace('!\\s!', '', $fileName);
    $fileName .= Yii::app()->user->id;

    $wholePath = $path . $fileName;

    return $wholePath;
} 
```

和常数：

```
const PATH_TO_FILES_FROM_DB = 'userFiles/db/';
const PATH_TO_WORDS = 'userFiles/fromFiles/'; 
```

之前，我没有使用常量，一切正常。他们有一堂课。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:57:32.247

看起来这些是类常量而不是全局常量，它们必须通过类访问，例如：

```
// anywhere
TheClassname::CONSTANT_NAME

// inside the class or a descendent class only
self::CONSTANT_NAME 
```

如果它们应该是全局常量，那么您需要使用该`define()`函数来定义它们，例如：

```
// definition
define('CONSTANT_NAME', 'thevalue');

// access from anywhere
CONSTANT_NAME; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:59:24.860

您错误地使用了常量，引用应该是：

```
class foo {
    const PATH_TO_FILES_FROM_DB = 'userFiles/db/';

    function bar() {
          $path = self::PATH_TO_FILES_FROM_DB;
                  ^^^^^^----- need this
    }
} 
```

当您使用它们时，它们不是类常量，它们是标准`define()`常量，例如

```
define('PATH_TO_FILES_FROM_DB', 'userFiles/db/');

class Foo {
   function bar:
       $path = PATH_TO_FILES_FROM_DB;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:58:50.013

只需定义全局常量

```
define( 'PATH_TO_FILES_FROM_DB', 'userFiles/db/' );
define( 'PATH_TO_WORDS', 'userFiles/fromFiles/' ); 
```

或在您的班级中，而不是您通过以下方式访问它们`self::CONSTANTNAME`

# html - 如何使图像自行调整大小

> ID：15345291
> 
> 赞同：0
> 
> 时间：2013-03-11T17:55:44.573
> 
> 标签：html

嗨，我的问题是我的问题，提前抱歉英语不好，这不是我的母语。我正在做一个 VB.net 应用程序，现在我正在做一个放在上面的横幅。我想要的是她可以自动调整大小，例如，如果客户将窗口最小化或缩小一点。我希望图像变小。现在我玩过宽度，但它似乎没有做任何事情。它适用于表格，但不适用于图像。

这里是图像的代码：

```
.style2 {
    width:auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:01:23.557

在使用这样的东西之前我已经完成了它：

```
.style2 {
    width: 100%;
    height: auto;
    max-height: 400px;
} 
```

（更改“最大高度”的值以适合您的图像。）

这可能必须根据您的布局进行更改，并且您可能需要对父元素设置某些限制，但这对我有用。

# java - 函数内部变量

> ID：15345294
> 
> 赞同：-1
> 
> 时间：2013-03-11T17:55:53.887
> 
> 标签：java

我正在尝试访问`X`函数内部的变量，但我似乎无法访问它。我有一个函数“Action()”

```
public void Action(){

  ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();

  try {
    String response = null;
    try {
      response = CustomHttpClient.executeHttpPost("http://www.xxxx.com/xxxx.php",
                                                  postParameters);
    } catch (Exception e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
    }

    String result = response.toString();  

    //parse json data
    try {
      returnString = "";
      JSONArray jArray = new JSONArray(result);
      for (int i=0; i<jArray.length(); i++) {

        JSONObject json_data = jArray.getJSONObject(i);
        Log.i("log_tag","id: "+json_data.getInt("id")+
              ", name: "+json_data.getString("name")+
              ", sex: "+json_data.getInt("sex")+
              ", birthyear: "+json_data.getInt("birthyear"));
        X = json_data.getInt("birthyear");
        returnString += "\n" + json_data.getString("Time") + " -> "+ json_data.getInt("Value");
      }
    } catch(JSONException e){
      Log.e("log_tag", "Error parsing data "+e.toString());
    } catch(Exception e){
      Log.e("log_tag","Error in Display!" + e.toString());;          
    }   
  }
} 
```

我希望能够在方法之外访问变量“X”，但它一直告诉我没有声明 X。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:04:28.113

在 Java（和大多数其他语言）中有所谓的“作用域”，让我们在这里限制为“块”。块基本上是包含在`{`and中的单个表达式的聚合`}`。

看看这个伪示例：

```
{ // outer block
    int a = 1;
    { // inner block
        int b = 1;
    }
} 
```

在内部块中您可以访问两者`a`，`b`而在外部块中您*看不到* `b`，这就是为什么您既不能访问也不能更改它（所以你只能`a`在外部块中看到）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:00:52.303

```
void method(){

   int foo; //this is called variable declaration

   //some where else in code
   foo = 12; //this is called initialization of the variable

   int fooBar = foo + bar;

} 
```

上面的示例显示了方法级别范围。该变量`foo`将无法在方法范围之外访问。

*   类范围
*   循环范围
*   方法范围

[Java中的可变作用域](http://www.java-made-easy.com/variable-scope.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:57:45.170

> 根据需要在方法内部声明X实例变量或局部变量。

如果您想从任何实例方法访问此变量，则声明它为实例变量，或者如果您想将范围设为本地，则在方法中声明它。

```
public class MainActivity extends Activity {
   ....
   private int X;   //Way to declare the instance variable.
  ....

  private void methodName() {
  {
        private int X;   //Way to declare the local variable.
  }
} 
```

在 Java 中，您需要在使用之前声明变量。您正在初始化它而不声明它。

# php - jquery如何在文本框中显示数据

> ID：15345297
> 
> 赞同：0
> 
> 时间：2013-03-11T17:55:59.880
> 
> 标签：php, jquery

我在文本框中显示所选数据时遇到问题我有以下代码根据用户建议在文本框下方显示数据

```
$('input[name=profileOrg]').keyup(function(){
    var q = $(this).val();
    $.get("CHI_custom/customScripts/getorgname.php?q="+q, function(data){
       $('#name').html(data).show(); 
}); 
```

以下是给我数据库列表的代码

```
$term = $_GET['q'];
    $query = "SELECT organization_name FROM members WHERE organization_name LIKE '".$term."%'";
    $result = $db->query($query);
    while ($row = $result->fetch_array())
        {       
            //$member[] = $row['organization_name'];
            echo '<a href="#">'.$row['organization_name'].'</a><br>';
        } 
```

在这段代码中，我可以根据用户的建议在文本框下方显示数据，但是当用户从列表中选择数据时我遇到问题如何在文本框中显示选定的值？

**我不想使用 jquery UI auto complete**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T17:57:34.747

使用 .val() 属性。要分配文本，请使用以下命令：

```
$("#name").val(data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:21:40.390

您应该使用html() 功能`$('#name').val(data)`而不是`$('#name').html(data).show();`html() 功能将 html 代码转换为 html 组件示例

```
$("p").html("Hello <b>world</b>!"); 
```

我希望这会有所帮助。

# linux - 在窗口上运行 df -kh 命令以生成漂亮的对齐输出以存储在 ms-excel 中。帮助需要格式化输出

> ID：15345301
> 
> 赞同：0
> 
> 时间：2013-03-11T17:56:20.930
> 
> 标签：linux, unix, putty

我正在使用 Putty 在 Windows 机器上运行 df -kh 命令。我需要以很好的格式输出，以便我可以将结果存储在 microsoft excel 中。所以我需要帮助来正确对齐输出。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:09:26.443

如果您足够幸运，在任何文件系统中都没有任何空格：

```
df -kh | tr -s " " "\t" 
```

将所有运行的空格转换为单个选项卡，以便轻松复制粘贴到 Excel 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T16:12:15.263

采用：

```
df -Ph | column -t 
```

通常，结果要好得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T17:01:58.607

我找到了以下格式化输出的方法，并且确实是一种很好的格式化方式来显示输出：

df -Ph | perl -ne 'chomp; printf "\n%-60s %8s %8s %8s %8s %-10s", split / +/, $_, 6 ; '

数字 6 可以更改为我想要的任何值 6 很好，因为我需要字母。

# qt - QUrl 和编码

> ID：15345302
> 
> 赞同：2
> 
> 时间：2013-03-11T17:56:21.253
> 
> 标签：qt

我在使用 Qt 4.8.x 的 mac 上遇到问题

我有一个 mailto QURL，它有一个已编码的正文组件。简化它：

```
mailto:?subject=Hello&body=Hello%2C%0A%0AYou%20have%20been%20invited 
```

我的问题是，当我的默认应用程序启动（尝试了多个电子邮件客户端）时，**编码仍然显示在邮件正文上。**这适用于 Windows，但在 Mac 上失败。

有没有办法让我将编码转换成编码字符在电子邮件客户端正文中的可读文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:39:04.967

还使用[fromPercentEncoding](http://qt-project.org/doc/qt-4.8/qurl.html#fromPercentEncoding)解码 Qurl 格式以清除字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:55:39.320

QUrl 有问题。没有办法绕过这个错误，只能直接转到 Cocoa。

```
void MyMacLaunchURLClass::LaunchURL(char * url)
{
    NSString *urlStr = [NSString stringWithCString:url encoding:NSASCIIStringEncoding];
    [[NSWorkspace sharedWorkspace] openURL:[NSURL URLWithString:urlStr]];
} 
```

这解决了这个错误。

# php - MySQL weird things happening

> ID：15345306
> 
> 赞同：0
> 
> 时间：2013-03-11T17:56:30.020
> 
> 标签：php, mysql

I have a mysql row that I am trying to get distinct number of email addresses grouped by province. And it seems to be giving weird values.

If I do the following (count distinct email addresses for province) for each province

```
SELECT COUNT(DISTINCT(email_address)) as COUNT 
FROM entries 
WHERE subscribe='1' 
AND province='ns' 
```

and add them all up. I get a number that is roughly 200 more then if I just do

```
SELECT COUNT(DISTINCT(email_address)) as COUNT 
FROM entries 
WHERE subscribe='1' 
```

which also matches

```
SELECT COUNT(DISTINCT(email_address)) as COUNT 
FROM entries 
WHERE subscribe='1' 
AND province IN('ns','nb','pei') 
```

but doesn't match

```
SELECT COUNT(DISTINCT(email_address)) as COUNT 
FROM entries 
WHERE subscribe='1' 
GROUP BY province 
```

if I do

```
SELECT COUNT(DISTINCT(email_address)) as COUNT 
FROM entries 
WHERE subscribe='1' 
```

So the 2nd one and the 4th one match, and the 1st and 3rd and 5th ones match. But the 2nd/4th is 200 more then the 1st/3rd/5th.

All I want is number of distinct email addresses where subscribe is 1 grouped by province. And it seems to be impossible to get.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:00:32.573

is it possible that an email address is tied to more than one province? You can do a query to test this

```
SELECT email_address, count(distinct province)
FROM entries
WHERE subscribe = '1'
GROUP BY email_address HAVING count(distinct province) > 1 
```

That may be where your discrepancy is coming in

Either way, this query will give you what you're looking for

```
SELECT province, COUNT(DISTINCT email_address) as COUNT 
FROM entries 
WHERE subscribe = '1' 
GROUP BY province
ORDER BY province 
```

# android - 是否对破折号进行编码

> ID：15345307
> 
> 赞同：2
> 
> 时间：2013-03-11T17:56:30.937
> 
> 标签：android, cordova, mobile, encoding, google-analytics

我正在尝试在我的 Phonegap Android APP 中使用 Google Analytics

我按照这个 repo 中的说明进行操作

[https://github.com/DoersGuild/Cordova-Android-Analytics](https://github.com/DoersGuild/Cordova-Android-Analytics)

一切正常并返回成功消息，但不幸的是我等了 24 小时，谷歌分析帐户中的报告没有更新

这是文件 analytics.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<!-- Replace placeholder ID with your tracking ID -->
<string name="ga_trackingId">UA-XXXXXXXX-X</string>

<!-- Disable Activity tracking, not used in Cordova which only has one activity -->
<bool name="ga_autoActivityTracking">false</bool>

<!-- Enable automatic exception tracking -->
<bool name="ga_reportUncaughtExceptions">true</bool>

<!-- Anonymize tracking -->
<bool name="ga_anonymizeIp">true</bool>

<!-- Enable debugging -->
<bool name="ga_debug">true</bool>

</resources> 
```

而不是 UA-XXXXXXXX-X track id，我写了我的帐户 track id

我的问题是我应该用破折号保留它，还是应该将破折号编码为 UA–XXXXXXXX–X

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:04:29.990

根据[谷歌分析概述](https://developers.google.com/analytics/devguides/collection/android/v2#analytics-xml)：

> **重要提示**：不要在 ga_trackingId 字符串中编码破折号。这样做会阻止您在报告中看到任何数据。

# ruby-on-rails - 如何使用 has_many 创建复选框网格：通过关联

> ID：15345310
> 
> 赞同：2
> 
> 时间：2013-03-11T17:56:34.347
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form, has-many-through, twitter-bootstrap-rails

好的，所以我有以下设置，需要一些指导。我在这个问题上浪费了将近 2 天，我需要继续：

所以 Roles 和 Permissions 是通过 RolePermissions Role -> RolePermission -> Permission 关联的

我希望创建一个复选框网格，允许我同时编辑所有角色和权限。

这就是我在视觉上寻找的东西：![角色/权限复选框网格](../Images/06d32cf835c9ad53f75c47360b3cbd06.png)

任何帮助将不胜感激！另外，我正在使用 simple_form 和 bootstrap。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:42:52.470

试试这个，

```
# /config/routes.rb

resources :roles do
  collection do
    get :edit_multiple
    put :update_multiple
  end
end

# /app/controllers/roles_controller.rb

class RolesController < ApplicationController
  def edit_multiple
    @roles = Role.all
    @permissions = Permission.all
  end

  def update_multiple
    params[:roles] = {} unless params.has_key?(:roles) # if all checkboxes unchecked.
    Role.all.each do |role|
      # this allows for 0 permission checkboxes being checked for a role.
      unless params[:roles].has_key?(role.id.to_s)
        params[:roles][role.id] = { permission_ids: [] }
      end
    end
    @roles = Role.update(params[:roles].keys, params[:roles].values)
    @roles.reject! { |r| r.errors.empty? }
    if @roles.empty?
      redirect_to edit_multiple_roles_path
    else
      render :edit_multiple
    end
  end
end

# /app/views/roles/edit_multiple.html.erb

<%= form_tag update_multiple_roles_path, method: :put do %>
  <table>
    <tr>
      <th></th>
      <% @permissions.each do |permission| %>
        <th><%= permission.name %></th>
      <% end %>
    </tr>
    <% @roles.each do |role| %>
      <tr>
        <th><%= role.name %></th>
        <% @permissions.each do |permission| %>
          <td><%= check_box_tag "roles[#{role.id}][permission_ids][]", permission.id, role.permissions.include?(permission) %></td>
        <% end %>
      </tr>
    <% end %>
  </table>

  <%= submit_tag "Save" %>
<% end %>

# /app/models/role.rb

class Role < ActiveRecord::Base
  has_many :role_permissions
  has_many :permissions, through: :role_permissions
  attr_accessible :name, :permission_ids
end 
```

它是[http://railscasts.com/episodes/17-habtm-checkboxes](http://railscasts.com/episodes/17-habtm-checkboxes)和[http://railscasts.com/episodes/165-edit-multiple-revised的组合](http://railscasts.com/episodes/165-edit-multiple-revised)

**编辑：**

只是注意到我让桌子向后。这会将角色放在顶部，将权限放在一边，

```
# /app/views/roles/edit_multiple.html.erb

<%= form_tag update_multiple_roles_path, method: :put do %>
  <table>
    <tr>
      <th></th>
      <% @roles.each do |role| %>
        <th><%= role.name %></th>
      <% end %>
    </tr>
    <% @permissions.each do |permission| %>
      <tr>
        <th><%= permission.name %></th>
        <% @roles.each do |role| %>
          <td><%= check_box_tag "roles[#{role.id}][permission_ids][]", permission.id, role.permissions.include?(permission) %></td>
        <% end %>
      </tr>
    <% end %>
  </table>

  <%= submit_tag "Save" %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:51:36.710

将此作为来自 OP 的请求作为答案添加：

habtm 上有一个带有复选框的 railscast，您可以根据需要对其进行调整：[railscasts.com/episodes/17-habtm-checkboxes](http://railscasts.com/episodes/17-habtm-checkboxes)

# asp.net - 为什么 Breeze/Knockout 模板安装为工具而不是模板，使其无法使用？

> ID：15345312
> 
> 赞同：1
> 
> 时间：2013-03-11T17:56:38.150
> 
> 标签：asp.net, asp.net-mvc-4, javascript, javascript-framework, breeze

我正在尝试使用 Ward Bell 编写的 Breeze/Knockout 模板（又名，BreezeJS MVC 模板）。我成功地安装了brieftemplate.VSIX 扩展（通过运行下载的文件）到VS 2012。

但是，当我检查扩展和更新（来自 VS 2012 中的工具）时，Breeze Knockout Spa 模板显示在工具而不是对话框中的模板下。我假设这就是为什么当我创建 ASP.NET MVC 4 Web 应用程序时，当提示您选择要使用的模板时，Breeze 单页应用程序不会出现在下一步中。它根本不会出现在要使用的可用模板列表中。

我想将其安装为示例模板，以查看使用 EF 和后端数据存储库的 Breeze 的充实用法。我使用 Hot Towel SPA 作为起点，但它确实没有任何 Breeze 代码。

我在基于 Jay Traband 编写的 Breeze.WebApi NuGet 包的 Hot Towel Spa 模板中添加了一个简单的 Breeze DataContext。使用它，我能够修改我的项目以使用由 SQL 数据库支持的 EF，而不是 Breeze.WebApi 示例中使用的伪数据库。

然而，看起来 Ward Bell 编写的 Breeze/Knockout 模板是一个更复杂的示例。我需要这个更复杂的示例到服务器作为我想如何使用 Breeze 的示例。

因此，经过长时间的解释，这就是我要问的：

1) 如何让 Breeze/Knockout 模板作为模板安装，而不是作为 VS 2012 扩展和更新中的工具？

2) 如果 1) 没有答案，我是否可以在某处下载基于 Breeze/Knockout 模板的 VS 2012 项目？

3) 如果对 2) 的回答是否定的，Ward Bell 是否可以通过 GitHub 或其他公共代码存储库（NuGet Please！）基于此模板创建一个简单的项目。

4) 还有其他一些使用 EF 的 Breeze 的重要示例和可用作参考的数据存储库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:04:33.547

您可以安装 [ASP.NET 和 Web Tools 2012.2 Update](http://weblogs.asp.net/scottgu/archive/2013/02/18/announcing-release-of-asp-net-and-web-tools-2012-2-update.aspx)来获取模板

# javascript - Javascript 日/月/年转换成表格

> ID：15345313
> 
> 赞同：1
> 
> 时间：2013-03-11T17:56:43.453
> 
> 标签：javascript, date

我正在尝试在表单中自动选择月份、日期和年份。我确信这很简单，但我对 Javascript 很不熟悉。在下面的代码中，月份选择工作正常，但日期始终是实际日期的 +1，而年份根本不工作。如果有人可以提供帮助，将不胜感激！谢谢！

```
<form name="form" action="b.html" method="post">
    <select id="month" name="month">
        <option id="1" value="January">January</option>
        <option id="2" value="February">February</option>
        <option id="3" value="March">March</option>
        <option id="4" value="April">April</option>
        <option id="5" value="May">May</option>
        <option id="6" value="June">June</option>
        <option id="7" value="July">July</option>
        <option id="8" value="August">August</option>
        <option id="9" value="September">September</option>
        <option id="10" value="October">October</option>
        <option id="11" value="November">November</option>
        <option id="12" value="December">December</option>
    </select>
    /
    <select id="day" name="day">
        <option id="1" value="1">1</option>
        <option id="2" value="2">2</option>
        <option id="3" value="3">3</option>
        <option id="4" value="4">4</option>
        <option id="5" value="5">5</option>
        <option id="6" value="6">6</option>
        <option id="7" value="7">7</option>
        <option id="8" value="8">8</option>
        <option id="9" value="9">9</option>
        <option id="10" value="10">10</option>
        <option id="11" value="11">11</option>
        <option id="12" value="12">12</option>
        <option id="13" value="13">13</option>
        <option id="14" value="14">14</option>
        <option id="15" value="15">15</option>
        <option id="16" value="16">16</option>
        <option id="17" value="17">17</option>
        <option id="18" value="18">18</option>
        <option id="19" value="19">19</option>
        <option id="20" value="20">20</option>
        <option id="21" value="21">21</option>
        <option id="22" value="22">22</option>
        <option id="23" value="23">23</option>
        <option id="24" value="24">24</option>
        <option id="25" value="25">25</option>
        <option id="26" value="26">26</option>
        <option id="27" value="27">27</option>
        <option id="28" value="28">28</option>
        <option id="29" value="29">29</option>
        <option id="30" value="30">30</option>
        <option id="31" value="31">31</option>
    </select>
    /
    <select id="year" name="year">
        <option id="2012" value="2012">2012</option>
        <option id="2013" value="2013">2013</option>
        <option id="2014" value="2014">2014</option>
        <option id="2015" value="2015">2015</option>
        <option id="2016" value="2016">2016</option>
        <option id="2017" value="2013">2017</option>
        <option id="2018" value="2014">2018</option>
        <option id="2019" value="2015">2019</option>
        <option id="2020" value="2016">2020</option>
    </select>

    <script>
    var d = new Date();
    var month = d.getMonth();
    var day = d.getDate();
    var year = d.getFullYear();
    document.form.month[month].selected = month;
    document.form.day[day].selected = day;
    document.form.year[year].selected = year;
    </script>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:01:25.503

你有冲突的ID！id 是页面上的奇异值。Selected 是一个布尔值，您将其设置为一个数字。

摆脱id，

```
var d = new Date();
var month = d.getMonth();
var day = d.getDate();
var year = d.getFullYear();
document.form.month.options[month].selected = true;
document.form.day.options[day-1].selected = true;
document.form.year.options[year-2012].selected = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:03:21.943

这段代码：

```
var day = d.getDate();
...
document.form.year[year].selected = true; 
```

应该

```
var day = d.getDate()-1;
...
document.form.year[year - 2012].selected = true; 
```

天必须减 1，因为这部分：`document.form.day[day]`是一个数组，记住数组是从 0 开始的，而`getDate()`是从 1 开始的。

为什么你不需要为月份部分减去 1？因为[JavaScript Date 对象的月份索引是从 0 开始的！](https://stackoverflow.com/questions/1208519/javascript-date-objects-month-index-begins-with-0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:08:47.870

选择元素中的选项由从 [0] 开始的索引访问。

导致：

```
document.form.month[0].value is 'January'
document.form.day[0].value is 1;
document.form.year[0].selected is 2012; 
```

请务必正确计算您的索引或使用您的项目的值作为索引：

```
var year = d.getFullYear();
document.getElementById('year').value = year; 
```

请从您的选项中删除“id”属性。在文档中使用相同的 id 两次是不好的做法。对元素来说应该是唯一的。​​​​​​​​​​​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T18:14:43.153

在这里查看我的工作解决方案：http: [//jsfiddle.net/powtac/gVWrz/7/](http://jsfiddle.net/powtac/gVWrz/7/)

```
document.form.month[month].selected = true;
document.form.day.value             = day;
document.form.year.value            = year; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-11T18:08:25.603

您正在尝试通过它们各自的索引访问元素。当您访问月份时，巧合的是它将显示正确的月份，因为`getMonth()`返回`0`一月份。当您选择第三个月 (index=2) 时，它正确选择了 March 作为带有`index=2`.

对于日期和年份，我将您的代码`.value`改为。您不能按月执行此操作，因为您使用的值是一月、二月、三月等，而不是它们的索引。

```
<script>
    var d = new Date();
    var month = d.getMonth();
    var day = d.getDate();
    var year = d.getFullYear();
    document.form.month.options[month].selected = true;
    document.form.day.value = day;
    document.form.year.value = year;
</script> 
```

# matlab - 围绕拟合线旋转轴 MATLAB

> ID：15345319
> 
> 赞同：2
> 
> 时间：2013-03-11T17:56:53.003
> 
> 标签：matlab, rotational-matrices, cartesian-coordinates

我目前对以下问题感到沮丧：

我有轨迹数据（即：经度和纬度数据），我对其进行插值以找到线性拟合（在 matlab 中使用 polyfit 和 polyval）。

我想做的是以 x 轴（经度轴）最终位于最佳拟合线上的方式旋转轴，因此我的数据现在应该位于该（旋转）轴上。

我尝试的是从拟合线的斜率（一级多项式的公式中的 m ）评估旋转矩阵`y=mx+q`为

`[cos(m) -sin(m);sin(m) cos(m)]`

然后将我的原始数据乘以这个矩阵......无济于事！

我不断获得一个图，其中我的数据位于中间，而不是在我期望它们所在的 x 轴上。

我错过了什么？

感谢您的任何帮助！

最好的祝福，

冬寂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:40:39.583

有几件事：

1.  如果你有一个线性函数 y=mx+b，那条线的角度是`atan(m)`，而不是`m`。这些对于小`m', but very different for large`m` 大致相同。

2.  2+ 阶 polyfit 的线性分量不同于 1 阶 polyfit 的线性分量。您需要对数据进行两次拟合，一次在您的工作级别，一次使用一阶拟合。

3.  给定一个斜率`m`，有比使用三角函数更好的计算旋转矩阵的方法（例如`cos(atan(m))`）。在执行几何时，我总是尽量避免使用三角函数，并用线性代数运算代替它们。这通常更快，并且导致奇点问题更少。请参阅下面的代码。

4.  这种方法会导致一些轨迹出现问题。例如，考虑一个北/南轨迹。但这是一个更长的讨论。

使用所描述的方法，加上上面的注释，这里是一些实现这个的示例代码：

```
%Setup some sample data
long = linspace(1.12020, 1.2023, 1000);
lat  = sin ( (long-min(long)) / (max(long)-min(long))*2*pi  )*0.0001 + linspace(.2, .31, 1000);

%Perform polynomial fit
p = polyfit(long, lat, 4);

%Perform linear fit to identify rotation
pLinear = polyfit(long, lat, 1);
m = pLinear(1);  %Assign a common variable for slope
angle = atan(m);

%Setup and apply rotation
%    Compute rotation metrix using trig functions
rotationMatrix = [cos(angle) sin(angle); -sin(angle) cos(angle)];

%    Compute same rotation metrix without trig
a = sqrt(m^2/(1+m^2));  %a, b are the solution to the system:    
b = sqrt(1/(1+m^2));    %    {a^2+b^2 = 1}, {m=a/b}
%                       %That is, the point (b,a) is on the unit
%                       circle, on a line with slope m
rotationMatrix = [b a; -a b];  %This matrix rotates the point (b,a) to (1,0)

%    Generally you rotate data after removing the mean value
longLatRotated = rotationMatrix * [long(:)-mean(long) lat(:)-mean(lat)]';

%Plot to confirm
figure(2937623)
clf

subplot(211)
hold on
plot(long, lat, '.')
plot(long, polyval(p, long), 'k-')
axis tight
title('Initial data')
xlabel('Longitude')
ylabel('Latitude')

subplot(212)
hold on;
plot(longLatRotated(1,:), longLatRotated(2,:),'.b-');
axis tight
title('Rotated data')
xlabel('Rotated x axis')
ylabel('Rotated y axis') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:37:55.047

您在旋转矩阵中寻找的角度是线与水平线的角度。这可以作为斜率的反正切找到，因为：

```
tan(\theta) = Opposite/Adjacent = Rise/Run = slope 
```

所以`t = atan(m)`并注意到您要将线旋转回水平，将旋转矩阵定义为：

```
R = [cos(-t) sin(-t)
     sin(-t) cos(-t)] 
```

现在你可以旋转你的点`R`

# ios - MKMapView 的屏幕截图不起作用

> ID：15345321
> 
> 赞同：1
> 
> 时间：2013-03-11T17:56:55.157
> 
> 标签：ios, xcode, mkmapview, screenshot

这是我的代码：

我究竟做错了什么？？我只是想截取显示给定位置的 MKMapView 的屏幕截图。截取屏幕截图并将其放置在 UIImage 中可以正常工作，但 MKMapView 看起来真的很奇怪，就好像它没有被渲染一样。怎么了？

如果（PageControllerMain.currentPage == 0）{

```
 if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)]) {
        UIGraphicsBeginImageContextWithOptions(MainPage1MapContainer.bounds.size, MainPage1MapContainer.opaque, 0.0);

    }

    else {

        UIGraphicsBeginImageContext(self.view.bounds.size);

    }

    UIGraphicsBeginImageContextWithOptions(MainPage1MapContainer.bounds.size, MainPage1MapContainer.opaque, 0.0);
    [MainPage1MapContainer.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    NSData * data = UIImagePNGRepresentation(image);
    [data writeToFile:@"MapImagePage1.png" atomically:YES];

    OverallMainMapContainer.image = image;

} 
```

![MKMapView 不显示位置](../Images/917b10624cc9c66f55ff15f8dcb973f4.png)

# android - 获取 java.lang.IllegalStateException：您必须在使用 RadioGroup 时首先在孩子的父母上调用 removeView()

> ID：15345324
> 
> 赞同：0
> 
> 时间：2013-03-11T17:57:02.777
> 
> 标签：android, radio-button, radio-group

我曾经`RadioGroup`只实现一项以从动态创建的单选按钮中进行选择。

```
 final LinearLayout firstRowTxtLayout = new LinearLayout(fContext);
    firstRowTxtLayout.setLayoutParams(new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.WRAP_CONTENT,
            LinearLayout.LayoutParams.WRAP_CONTENT));

    rbGroup.setLayoutParams(new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.WRAP_CONTENT,
            LinearLayout.LayoutParams.WRAP_CONTENT));
    rbButton = new RadioButton(fContext);
    rbButton.setLayoutParams(new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.WRAP_CONTENT,
            LinearLayout.LayoutParams.WRAP_CONTENT));
    rbButton.setId(rbTagincreament);
    rbGroup.addView(rbButton); 
```

我`RadioGroup`已经在循环外初始化了。并将`RadioGroup`视图添加到另一个布局

我再次更改了它（如下所示）。现在我得到了单选按钮，但我可以选择组中的每个按钮。

```
 private void createRadioButton(int num) {
    Log.i("comVisa", "Num ==" + num);

    rg = new RadioGroup(fContext); // create the RadioGroup
    rg.setOrientation(RadioGroup.HORIZONTAL);// or RadioGroup.VERTICAL

    rb = new RadioButton(fContext);
    rb.setId(num++);
    rg.addView(rb); // the RadioButtons are added to the radioGroup instead
    // of the layout
    firstRowTxtLayout.addView(rg);// you add the whole RadioGroup to the
    // layout
    rg.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {

        }
    });

} 
```

当我初始化`rg = new RadioGroup(fContext);`外部时，我得到：

```
`IllegalStateException`. You must call removeView() on the child's parent first while using RadioGroup 
```

带有代码行的 Logcat：

```
03-12 14:05:35.266: W/System.err(32734):    at com.vipera.ts.gui.custom.comVisaApprovalList.createRadioButton(comVisaApprovalList.java:531) firstRowTxtLayout.addView(rg);
03-12 14:05:35.266: W/System.err(32734):    at com.vipera.ts.gui.custom.comVisaApprovalList.constructRow(comVisaApprovalList.java:459)createRadioButton(rbTagincreament++);
03-12 14:05:35.271: W/System.err(32734):    at com.vipera.ts.gui.custom.comVisaApprovalList.createTableLayout(comVisaApprovalList.java:411)
03-12 14:05:35.271: W/System.err(32734):    at com.vipera.ts.gui.custom.comVisaApprovalList.init(comVisaApprovalList.java:121) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:04:08.550

`rbButton`目前是另一种观点，这就是**异常**的原因。您必须先**致电** `parent_of_rbButton.removeView(rbButton)`，然后才能将其添加到`rbGroup`.

# php - 如何在 Windows 8 上安装 Eclipse PDT？

> ID：15345325
> 
> 赞同：0
> 
> 时间：2013-03-11T17:57:03.530
> 
> 标签：php, svn, windows-8, ide, eclipse-pdt

eclipse-PDT 是否可用于 Windows 8，我在哪里可以下载它？

我需要一个包裹

```
 eclipse PDT with X debug and SVN. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:23:58.843

Eclipse 是基于 Java 的，因为您可以获得 Java for W8，所以 Eclipse PDT 应该没有理由不在它下运行。你有没有下载并尝试过？

当您尝试运行它时遇到了哪些错误？

# svn - 从历史记录中删除文件（磁盘空间不足）

> ID：15345327
> 
> 赞同：0
> 
> 时间：2013-03-11T17:57:09.080
> 
> 标签：svn, centos, svnadmin

看来我们托管 svn 的服务器已满。有没有办法从回购历史中删除较大的文件？我所做的研究是运行 svnadmin dump，将其通过管道传输到 dumpfilter 并将其加载到新的 repo 中。这样做的问题是我们没有足够的磁盘空间来存放转储文件。我知道这很可怕。我们只有 230 个修订版，我们真的只需要最后 50 个左右。如果有一些后门方法可以完成这项工作，不会完全破坏回购 - 我全神贯注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:16:45.320

将 repo 移至具有更多空间的新服务器。在虚拟机和基于云的服务器的时代，它应该是最快的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:14:27.463

我们最终从服务器中删除了一些东西，因为它不仅仅是一个 svn 服务器，运行一个用于 head 修订的转储，删除所有内容，并加载转储文件。感谢您的评论。

# c++ - 链接现成的外部静态库

> ID：15345332
> 
> 赞同：0
> 
> 时间：2013-03-11T17:57:34.080
> 
> 标签：c++, c, cmake

我有一个现成的外部静态库 (.a)，我想链接到我的可执行文件。我该如何用cmake做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:04:53.057

您应该使用该`TARGET_LINK_LIBRARIES`命令。但在此之前，您可能需要确保 CMake 使用`FIND_LIBRARY`or查找正确的目录`LINK_DIRECTORIES`。此处详细记录了所有内容：（[CMake帮助：TARGET_LINK_LIBRARIES](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3atarget_link_libraries)）（[CMake帮助：LINK_DIRECTORIES](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3alink_directories)）（[CMake帮助：FIND_LIBRARY](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3afind_library)）

根据@Fraser 的评论，最好使用`find_library`over `link_directories`。

# memory-leaks - matplotlib imshow 中的内存泄漏

> ID：15345336
> 
> 赞同：4
> 
> 时间：2013-03-11T17:57:37.803
> 
> 标签：memory-leaks, matplotlib

我在 matplotlib.imshow 中发现了内存泄漏。我知道类似的问题（例如[Matplotlib imshow 中的内存使用过多](https://stackoverflow.com/questions/9525706/excessive-memory-usage-in-matplotlib-imshow)），并且我已经阅读了相关的 ironpython 线程（[https://github.com/ipython/ipython/issues/1623/](https://github.com/ipython/ipython/issues/1623/)）。

我相信下面的代码应该（在没有内存泄漏的情况下）在运行时消耗恒定数量的内存。相反，它随着每次迭代而增长。

我正在运行我能找到的最新版本（matplotlib-1.2.0rc3.win32-py2.7 和 numpy-1.7.0.win32-py2.7），但问题仍然存在。我没有保留 imshow 的返回值，实际上我明确删除了它，所以我认为 IronPython 讨论中的注释不适用。无论是否在循环内显式赋值和删除，行为都是相同的。

我看到 matplotlib-1.2.0.win32-py2.7 的行为相同。

每次迭代似乎都挂在图像所需的任何内存上。我选择了一个大的 (1024x1024) 随机矩阵来使每个图像的大小变得非常大。

我正在运行带有 2G 物理 RAM、32 位 python2.7.3（因此出现内存错误）以及上述 numpy 和 matplotlib 包的 Win7 pro。下面的代码在迭代 440 左右时因内存错误而失败。windows 任务管理器在失败时报告消耗了 1,860,232K。

这是演示泄漏的代码：

```
IMAGE_SIZE = 1024
import random
RANDOM_MATRIX = []
for i in range(IMAGE_SIZE):
    RANDOM_MATRIX.append([random.randint(0, 100) for each in range(IMAGE_SIZE)])

def exercise(aMatrix, aCount):
    for i in range(aCount):
        anImage = imshow(aMatrix, origin='lower left', vmin=0, vmax=100)
        del(anImage)

if __name__=='__main__':
    from pylab import *
    exercise(RANDOM_MATRIX, 4096) 
```

我大概可以用 PIL 而不是 matplotlib 来渲染图像。在没有解决方法的情况下，我确实认为这是 matplotlib 的阻碍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-07-13T16:34:31.577

我努力使它工作，因为许多帖子都在谈论这个问题，但似乎没有人关心提供一个工作示例。

首先`from ... import *`，在使用不是您自己创建的库时，您永远不应该使用语法 - 因为，您永远无法确定它没有声明与您的符号冲突的符号。

那么，调用`set_data`不足以解决这个问题 - 出于三个原因：

1.  你没有提到这个 set_data 是从哪里调用的。它不是普通函数，而是来自对象的方法……哪个对象？
2.  如果您没有东西可以“激活”更改，则仅 set_data 是不够的。有时它会透明地发生，因为另一个情节激活了它，但如果没有，您将需要`flush_events()`自己调用。
3.  `imshow()`如果您没有使用可用于设置颜色图的值调用设置数据，则设置数据将不起作用。

这是一个有效的解决方案（[链接](https://stackoverflow.com/a/62880185/9077457)）：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:42:08.360

我想我找到了一种解决方法，我没有完全意识到 imshow 是多么的重量级。

答案是只调用一次 imshow，然后为每个后续图像调用带有 RANDOM_MATRIX 的 set_data。

问题解决了！

# jquery - 如何打开一个 ajax 加载的 jQuery UI 对话框？

> ID：15345337
> 
> 赞同：1
> 
> 时间：2013-03-11T17:57:38.597
> 
> 标签：jquery, ajax, jquery-ui, jquery-ui-dialog

我正在尝试打开一个 jQuery UI 对话框，其中的 HTML 已由 ajax 加载，但我只收到警报。

```
 $(document).on("click",'#dialog-button',function(){
        alert('this works');
        $('#dialog').dialog('open');//this doesn't
    }); 
```

当我将 html 放入模板中而不使用 ajax（和 .on）时，我没有遇到任何问题。

对话框 html 由 ajax 加载，类似于以下内容：

```
$.ajax({

type: "GET",
dataType: "json",
url: href,

success: function(data){

$('#dialog-container').html(data.dialog);

}

}); 
```

在我的 php 中，我会做这样的事情：

```
<?php 
 //assign some variables
 $array = array('dialog' => $this->smarty->fetch('dialog.tpl'));
 echo json_encode($array);
 ?> 
```

这有效：

```
$(document).on("click",'#dialog-button',function(){

    alert('this works');

    $('#dialog').dialog({

    autoOpen : true,
    height   : 500,
    width    : 1000,
    modal    : true,
    buttons  : {

        save  : function() {

            sendForm();
            $(this).dialog('close');

        },

        cancel : function() {

            $(this).dialog('close');

        },

        close    : function(){

            allFields.vall('').removeClass('ui-sate-error');

        },

    }

})

}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:05:11.853

加载对话框内容后，您需要实际创建对话框：

```
success: function(data) {
    $('#dialog-container').html(data.dialog);
    $('#dialog').dialog({
       ...,
       autoOpen: false
    });
}, 
```

然后你上面的代码实际上会让它出现：

```
$(document).on("click",'#dialog-button', function() {
    $('#dialog').dialog('open');
}); 
```

确保它`#dialog`最初是隐藏的，否则对话框的内容会在它们变成对话框之前出现在页面上。

# scala - 替换 ForkJoinPool 上的 setMaximumPoolSize

> ID：15345343
> 
> 赞同：0
> 
> 时间：2013-03-11T17:58:01.433
> 
> 标签：scala, fork-join, parallel-collections

我注意到自从 Scala 2.9.* 以来，该`setMaximumPoolSize`方法似乎已经消失了`ForkJoinPool`，它看起来就像我想要的那样。大多数关于限制 Scala 并行集合中的并行性的讨论都围绕`setParallelism`同一个类的方法（它也已经消失，但对我来说不是什么大问题），但在我的情况下，并行任务可以执行外部 IO，并且经常会阻塞在上面。然后`ForkJoinPool`在这种情况下启动更多线程并有效地针对有问题的共享 IO 资源执行 DOS，这是不可取的。

有没有办法以某种方式限制池中的线程数？我并不真正关心 spawn-when-blocked-on-IO 行为，但我想要某种程度的并行性，因为我的 IO 任务是独立的并且不会相互干扰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:42:53.757

您所指的行为称为“延续线程”。由于 join() 方法不进行上下文切换，因此框架将在没有这些额外线程的情况下停止。有报告称这些额外线程产生了成百上千。

Java8 用“延续线程”取代了这种糟糕的做法。也就是说，线程继续从双端队列中获取任务，但它可能导致停顿或堆栈溢出。使用 ForkJoinPool.managedBlock() 的代码没有替代品，这可能是您使用 I/O 所在的位置。

# ruby-on-rails - 在before_filter或after_filter的rails控制器中的CORS？

> ID：15345344
> 
> 赞同：2
> 
> 时间：2013-03-11T17:58:05.643
> 
> 标签：ruby-on-rails, ajax, api, http-headers, cors

是否有任何特殊原因（标题覆盖的可能性除外）在本文中作者使用 after_filter 设置标题：[http](http://www.tsheffler.com/blog/?p=428) ://www.tsheffler.com/blog/?p=428 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:08:38.270

通过修改 an 中的标头，`after_filter`您可以确保在中设置`after_filter`的标头是要提供的标头；它们不会被您的操作方法（意外或其他方式）覆盖。

`before_filter`就您的文章而言，当发现请求是 CORS 最初发出的“预检检查”时，它们也会“短路” 。

它们将`cors_set_access_control_headers`方法中找到的标头分开以提高可读性，但也有助于确保在发现请求是“预检检查”时**没有设置这些标头。**在此预检检查期间，`before_filter`终止请求，阻止`after_filter`执行；否则会覆盖在预检检查中设置的那些。

# jsf - 动态创建输入文本

> ID：15345349
> 
> 赞同：0
> 
> 时间：2013-03-11T17:58:17.503
> 
> 标签：jsf

我有下一个问题！

我想从我的支持 bean 动态创建 inputtext，它们将在一个选项卡内，也是动态创建的，它将在执行时构建。

我设法使用`input`相应的类动态添加组件。

但是我还没有设法将值标签添加到组件中，这是`valueExpresion`一种将值绑定到`managedBean`自身的语言。

我找到了一些可以像这样总结的代码。

```
 @ManagedBean
  @ViewScoped
  public MyManagedBean(){

private TabView tabsi;
    HtmlOutputLabel hol = new HtmlOutputLabel();
        InputText txt2 = new InputText();
private String value;

/* getter and setters */

    public void MyManagedBean{
    tabsi = new TabView();
            Tab tab1 = new Tab();
            tab1.setTitle("Tab1");
            Tab tab2 = new Tab();
            tab2.setTitle("Tab2");
            tabsi.getChildren().add(tab1);
            tabsi.getChildren().add(tab2);

            hol.setValue("label");
            hol.setStyleClass("label");
            txt2.setValueExpression("value",
                    TestController.getExpression("#{myManagedBean.value}"));
            txt2.setValue(value);
            tab1.getChildren().add(hol);
            tab1.getChildren().add(txt2);
    }

    public static ValueExpression getExpression(String expression) {
            FacesContext fc = FacesContext.getCurrentInstance();
            ELContext ctx = fc.getELContext();
            ExpressionFactory factory = fc.getApplication().getExpressionFactory();
            return factory.createValueExpression(ctx, expression, Object.class);
        }

public void test1() {
        System.out.println(value);
    }
    } 
```

我成功地构建了组件，但我无法绑定它来设置`ValueExpression`. 当我从按钮调用 test1 函数时，它会打印`null`

如何将值绑定到`ManagedBean`???

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:01:55.780

我无法用目前提供的信息确定确切原因，但这种方法至少存在三个严重问题：

1.  实例`UIComponent`本质上是请求范围的。你永远不应该在更广泛的范围内将它声明为 bean 的属性，否则当在多个视图中引用同一个实例时，你将面临臭名昭著的“重复组件 ID”错误。

2.  使用`binding`引用视图范围 bean 属性的属性会完全破坏视图范围。每次请求都会重新创建 bean。这个问题基本上与这里详细解释的理由相同：[JSTL in JSF2 Facelets... 有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

3.  A programmatically created `UIInput` and `UICommand` component must have a fixed `id` set via `setId()`, otherwise JSF won't be able to find it in the request parameter map during apply request values phase of the form submit and inherently not be able to process the submitted value and the action method respectively.

The third problem is most likely the exact cause of your current problem, but the first and the second problem may have had some influence.

Regardless of this, try to reconsider your decision to programmatically create components this way. This should be avoided as much as possible. E.g. why don't you just use `rendered` attribute, or view build time tags like JSTL `<c:if>`?

# java-ee-6 - java:global 数据源定义的范围

> ID：15345354
> 
> 赞同：1
> 
> 时间：2013-03-11T17:58:41.033
> 
> 标签：java-ee-6, glassfish-3

我在 web.xml（或@dataSourceDefinition）中定义了一个名为 java:global/jdbc/db 的数据源定义。它有效：我可以在应用程序中使用数据源。但是，在应用程序运行后，我在 GlassFish 的管理控制台中看不到具有此名称（有或没有 java:global）的 JDBC 资源。

我也不能使用数据源通过 asadmin 定义 JDBC 安全领域，然后在应用程序中使用它。

java:global 的范围是什么？该定义不是在整个服务器中可用吗？或者可能 GlassFish 中的 JDBC 资源和数据源定义不是一回事？

# c - GDB 不显示全局变量的值

> ID：15345367
> 
> 赞同：1
> 
> 时间：2013-03-11T17:59:32.103
> 
> 标签：c, debugging, gdb

我有三个文件，TDS.c、TDS.h、ExtraRoutines.c，它们作为共享库一起编译。TDS.h 是头文件并定义变量。ExtraRoutines.c 负责内存分配，TDS.c 执行主要工作。变量 x0 在 TDS.h 中定义为`double* x0`，在 ExtraRoutines.c 中分配内存为

```
x0 = malloc(10 * sizeof(*x0)); 
```

在 TDS.c 的第一行，我调用 ExtraRoutines.c 来分配内存。内存分配正常执行，函数返回。使用gdb调试程序时出现问题。当我`print x0[0]`用来访问数据时，它说：

```
Cannot access memory at address 0x0 
```

这意味着`x0`是`NULL`。但我很确定这`x0`不是`NULL`因为，当我使用以下命令将数据保存`x0`到文件中时，会保存正确的值，这意味着`x0`存在并引用有效的内存地址。

```
FILE* fh = fopen("dump", "w");
for(k = 0; k < 10; k++)
{
    x0[k] = orgX0[k];
    fprintf(fh, "%f\n", x0[k]);
}
fclose(fh); 
```

程序有bug，我需要通过分析数据找到bug。由于目前`gdb`没有显示任何全局变量，因此很难找到错误。因此，非常感谢您帮助查找问题并在 gdb 中显示全局变量（包括 x0）的值。谢谢

# facebook - FB.ui 提要对话框不适用于 jquery mobile

> ID：15345379
> 
> 赞同：0
> 
> 时间：2013-03-11T18:00:35.413
> 
> 标签：facebook, jquery-mobile, facebook-javascript-sdk

我正在使用 jquery mobile 创建一个 facebook 应用程序，每当我尝试打开提要对话框而不是对话框时，我得到的是我的应用程序尝试加载页面或其他内容，除了标题和背景颜色之外，所有内容都消失了身体。

我有五个按钮，每个按钮都有不同的 ID，我通过 data-id-i-want 属性获得。

```
<button rel="external" data-ajax="false" data-id-i-want="<?=$buttons['id']?>" class="bt-share" data-role="button">Share</button> 
```

你有没有注意到所有的按钮都有相同的类`.bt-share`

这是我调用 FB.ui 提要对话框的 javascript

```
$(document).on("click", ".bt-share", function(event){
                event.preventDefault();
                event.stopPropagation();
                var id = $(this).data("id-i-want");

                var obj = {
                    method: 'feed',
                    link: '<?=site_url()?>?p='+ id,
                    picture: "<?=base_url('public/img/thumbnail.jpg')?>",
                    name: 'Name',
                    caption: 'https://www.facebook.com/page',
                    description: 'desc',
                    display: 'popup'
                };

                function callback(response) {
                  //document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
                }

                FB.ui(obj, callback);
            }); 
```

FB.ui 和 jquery mobile 之间存在冲突，因为我认为 jquery mobile 正在尝试加载某些内容

# php - 通过 PHP 将数据从 AS3 发送到 MySQL

> ID：15345381
> 
> 赞同：0
> 
> 时间：2013-03-11T18:00:40.567
> 
> 标签：php, mysql, actionscript-3, phpmyadmin

我是两种编程语言的新手，可以使用任何可能的帮助。我在 AS3 中创建了一个表单，数据应该先发送到 PHP，然后再发送到 MYSQL。我检查了我的代码，在 PHP 文档或 AS3 文档中都没有错误。

我正在使用 WAMP Server 2.2，并且我确定我的文档是正确的`WAMP/WWW/Project`（文档在此文件夹中）。我可以通过访问它们，`http://localhost`但没有发送数据。

这是我对 PHP 和 AS3 的编码

AS3：

```
// hide processing CM
processing_mc.visible = false;

var variables:URLVariables = new URLVariables();

// Build the varSend variable
var varSend:URLRequest = new URLRequest("http://localhost/belitefitness/form.php");
varSend.method = URLRequestMethod.POST;
varSend.data = variables;

// Build the varLoader variable
var varLoader:URLLoader = new URLLoader;
varLoader.dataFormat = URLLoaderDataFormat.VARIABLES;
varLoader.addEventListener(Event.COMPLETE, completeHandler);
// handler for the PHP script completion and return of status
function completeHandler(event:Event):void {

// remove processing clip
processing_mc.visible = false;
firstname_txt.text = "";
lastname_txt.text = "";
email_txt.text = "";
number_txt.text = "";
msg_txt.text = "";

// Load the response from php here
status_txt.text = event.target.data.return_msg;
}
// Add event listener for submit button click
submit_btn.addEventListener(MouseEvent.CLICK, ValidateAndSend);

// function ValidateAndSend
function ValidateAndSend (event:MouseEvent):void {

// validate fields
if(!firstname_txt.length) {
status_txt.text = "Please enter your First Name";
} else if (!lastname_txt.length) {
status_txt.text = "Please enter your Last Name";
} else if (!email_txt.length) {
status_txt.text = "Please enter your Email";
} else if (!number_txt.length) {
status_txt.text = "Please enter your Phone Number";
} else {

// All is good, send the data now to PHP
processing_mc.visible = true;

// ready the variables in our form for sending
variables.userFirstName = firstname_txt.text;
variables.userLastName = lastname_txt.text;
variables.userEmail = email_txt.text; 
variables.userNumber = number_txt.text;
variables.userMsg = msg_txt.text; 
// Send the data to PHP now
varLoader.load(varSend);
} // close else condition for error handling
} // close validate and send function 
```

PHP

```
<?php 
if(isset($_POST['userFirstName']) && isset($_POST['userLastName']) && isset($_POST['userEmail']) && isset($_POST['userNumber']) && isset($_POST['userMsg']))
{
    $userFirstName=strip_tags($_POST['userFirstName']);
    $userLastName=strip_tags($_POST['userLastName']);
    $userEmail=strip_tags($_POST['userEmail']);
    $userNumber=strip_tags($_POST['userNumber']);
    $userMsg=strip_tags($_POST['userMsg']);

    // connect with database. 

    $username="root";
    $password="dp10aap";
    $database="b-elite-fitness";

    mysql_connect("localhost","$username","$password") or die (mysql_error());
    mysql_select_db("$database") or die (mysql_error());

    //query for inserting data in database.
    $query="INSERT INTO 'formdp' VALUES('NULL','".mysql_real_escape_string($userFirstName)."','".mysql_real_escape_string($userLastName)."','".mysql_real_escape_string($userEmail)."','".mysql_real_escape_string($userNumber)."','".mysql_real_escape_string($userMsg)."')";

    if($query_run=mysql_query($query))
    {
        echo'Data inserted.';
    } else {
        die(mysql_error());
        }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:27:46.070

您忘记将 phpVars 添加到请求中。

```
myRequest.data = phpVars; 
```

**编辑**
您还应该在调用 load 方法之前将事件侦听器添加到加载器。

```
var loader:URLLoader = new URLLoader();
loader.addEventListener(Event.COMPLETE, response);
loader.load(myRequest); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T23:57:21.600

您需要将 PHP 脚本的路径更改为`URLRequest()`本地服务器上的完整路径。我的意思是，如果您在本地运行服务器，则需要将路径更改为：

```
var myRequest:URLRequest = new URLRequest("http://localhost/form.php"); 
```

我准备了一个工作示例供您使用，您可以在此处下载：

*   [PHP 到 AS3 的通信示例](http://martywallace.com/sandbox/PHPAS3.zip)。

它包含以下内容：

*   Application.fla - 您可以在此处查看第一帧以查看工作代码。
*   Request.as - 我为您制作的一个简单类，可以更轻松地管理此过程。
*   DemoRequestResponse.php - 我也为演示制作的一个简单的 PHP 脚本。

# tcp - ZeroMQ REP/REQ 在公共 IP 和 NAT 后面的 IP 之间不起作用

> ID：15345384
> 
> 赞同：1
> 
> 时间：2013-03-11T18:00:47.757
> 
> 标签：tcp, request, zeromq, reply

我想使用两台不同的机器运行 zmq REP/REQ HelloWrold 示例。源代码在这里： 客户端：http://zguide.zeromq.org/cpp: [hwclient](http://zguide.zeromq.org/cpp:hwclient) 服务器：http://zguide.zeromq.org/cpp: [hwserver](http://zguide.zeromq.org/cpp:hwserver)

我在具有公共 IP 地址的云计算机上运行服务器，在我的笔记本电脑上运行客户端，它位于 NAT 后面。我已经验证该地址是可访问的（ping IP）并且端口已打开（使用 netcat）。

所以客户端发送消息，服务器接收它并使用相同的套接字发回回复消息，但客户端没有收到它。

如果我在本地或位于不同地理区域（使用公共 ip）的两台云机器之间运行此示例，则它可以工作。

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:38:06.420

我注意到 libzmq 的 ubuntu（量子）ppa 存在问题。使用从网站上获取的 libzmq-3.2.2 可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:32:05.350

这更有可能是由于版本不兼容（有些 alpha/beta 版本的协议不兼容）。这是一个常见问题解答问题，请参阅[http://www.zeromq.org/area:faq#toc6](http://www.zeromq.org/area:faq#toc6)

# c - 使用 pThreads 的 C 代码编译良好，但出现 seg 错误，使用 gdb 无济于事

> ID：15345388
> 
> 赞同：2
> 
> 时间：2013-03-11T18:00:54.583
> 
> 标签：c, pthreads, segmentation-fault

嗨，我正在尝试在 Mac 上的终端中运行此代码，它编译得很好，但是当我尝试执行它时出现段错误。当我运行 gdb 时，状态无效内存地址 000000 或类似的东西。有什么建议吗？先感谢您。

```
#include <pthread.h>
#include <stdlib.h>
#include <stdio.h>

#define MAX_THREADS 512

void *compute_pi( void * );

int sample_points;
int total_hits;
int total_misses;
int hits[ MAX_THREADS ];
int sample_points;
int sample_points_per_thread;
int num_threads;

int main( int argc, char *argv[] )
{
  /* local variables */
  int ii;
  int retval;
  pthread_t p_threads[MAX_THREADS];
  pthread_attr_t attr;
  double computed_pi;

  /* initialize local variables */
  retval = 0;

  pthread_attr_init( &attr );
  pthread_attr_setscope( &attr, PTHREAD_SCOPE_SYSTEM );

  /* parse command line arguments into sample points and number of threads */
  /* there is no error checking here!!!!! */
  sample_points = atoi(argv[1]);
  num_threads = atoi(argv[2]);

  /* uncomment this block if you want interactive input!!!! */
  /* if so...comment out the two statements above */
  /*  
  printf( "Enter number of sample points: " );
  scanf( "%d", &sample_points );
  printf( "Enter number of threads: " );
  scanf( "%d%", &num_threads );
  */

  total_hits = 0;
   sample_points_per_thread = sample_points / num_threads;

  for( ii=0; ii<num_threads; ii++ )
    {
      hits[ii] = ii;
      pthread_create( &p_threads[ ii ], &attr, compute_pi, (void *) &hits[ii] );
    }

  for( ii=0; ii<num_threads; ii++ )
    {
       pthread_join( p_threads[ ii ], NULL );
       total_hits += hits[ ii ];
    }

   computed_pi = 4.0 * (double) total_hits / ((double) (sample_points));

   printf( "Computed PI = %lf\n", computed_pi );

  /* return to calling environment */
  return( retval );
}

void *compute_pi( void *s )
{
  int seed;
  int ii;
  int *hit_pointer;
  int local_hits;
  double rand_no_x;
  double rand_no_y;

  hit_pointer = (int *) s;
  seed = *hit_pointer;
  local_hits = 0;

  for( ii=0; ii < sample_points_per_thread; ii++ )
    {
      rand_no_x = (double) (rand_r( &seed ))/(double)RAND_MAX;
      rand_no_y = (double) (rand_r( &seed ))/(double)RAND_MAX;
      if(((rand_no_x - 0.5) * (rand_no_x - 0.5) +
      (rand_no_y - 0.5) * (rand_no_y - 0.5)) < 0.25)
    local_hits++;
      seed *= ii;
    }

  *hit_pointer = local_hits;
  pthread_exit(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:13:50.343

如果我用 -ggdb 编译，在没有 cli 参数的 GDB 中运行程序，我发现段错误在 atoi 中。查看代码，我看到：

```
sample_points = atoi(argv[1]);
num_threads = atoi(argv[2]); 
```

这不是通过检查`argc`来验证的，`argv[1]`并且`argv[2]`会在那里。

如果我使用此命令行运行：

```
 ./a.out 500 8 
```

我得到这个结果：

```
 Computed PI = 2.616000 
```

简而言之，我怀疑你运行的程序不正确，而且提供的不是很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:19:45.747

您必须将两个参数传递给程序。这个程序不检查是否缺少参数是不好的。我会插入

```
if(argc<3){
    printf("Usage: %s [samples] [threads]\n",argv[0]);
    return 0;
} 
```

前

```
sample_points = atoi(argv[1]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:46:36.920

除了不检查已经回答的 argc 的问题之外， atoi() 已被弃用，您应该考虑使用 strtol() 代替。

您系统上 atoi() 的手册页很可能也提到了这一点。

# jquery - 显示 jqg1 而不是在线添加时从数据库返回的 id

> ID：15345391
> 
> 赞同：2
> 
> 时间：2013-03-11T18:01:08.560
> 
> 标签：jquery, .net, asp.net-mvc-4, jqgrid

这是我第一次尝试在 ASP.NET MVC 4 中使用 jqGrid，所以请原谅 newby 的问题。我似乎已经完成了所有工作，但是当在内联添加期间保存一行时，网格显示 jqg1 而不是从数据库返回的 id。id 在那里，但由于某种原因它没有被显示。当我刷新网格时，id 会正确显示，所以它肯定也在数据库中。任何想法将不胜感激。谢谢！！

网格

```
 <script type="text/javascript">
    $(document).ready(function () {
        var grid = $('#list'),
            decodeErrorMessage = function (jqXHR, textStatus, errorThrown) {
                var html, errorInfo, i, errorText = textStatus + '\n' + errorThrown;
                if (jqXHR.responseText.charAt(0) === '[') {
                    try {
                        errorInfo = $.parseJSON(jqXHR.responseText);
                        errorText = "";
                        for (i = 0; i < errorInfo.length; i++) {
                            if (errorText.length !== 0) {
                                errorText += "<hr/>";
                            }
                            errorText += errorInfo[i].Source + ": " + errorInfo[i].Message;
                        }
                    }
                    catch (e) { }
                } else {
                    html = /<body.*?>([\s\S]*)<\/body>/i.exec(jqXHR.responseText);
                    if (html !== null && html.length > 1) {
                        errorText = html[1];
                    }
                }
                return errorText;
            };
        grid.jqGrid({
            url: '@Url.Action("DynamicGridData", "Team")',
            datatype: "json",
            mtype: 'POST',
            colNames: ['Id', 'Code', 'Name'],
            colModel: [
                {
                    name: 'TeamId', index: 'TeamId', key: true, width: 50,
                    searchoptions: {
                        sopt: ['eq', 'ne', 'lt', 'le', 'gt', 'ge'],
                        dataInit: function (elem) {
                            $(elem).autocomplete({ source: '@Url.Action("GetIdsAutoComplete", "Team")' });
                        }
                    }
                },
                {
                    name: 'Code', index: 'Code', width: 75, editable: true,
                    searchoptions: {
                        sopt: ['cn', 'nc', 'bw', 'bn', 'eq', 'ne', 'ew', 'en', 'lt', 'le', 'gt', 'ge'],
                        dataInit: function (elem) {
                            $(elem).autocomplete({ source: '@Url.Action("GetCodesAutoComplete", "Team")' });
                        }
                    }
                },
                {
                    name: 'Name', index: 'Name', width: 200, editable: true,
                    searchoptions: {
                        sopt: ['cn', 'nc', 'bw', 'bn', 'eq', 'ne', 'ew', 'en', 'lt', 'le', 'gt', 'ge'],
                        dataInit: function (elem) {
                            $(elem).autocomplete({ source: '@Url.Action("GetNamesAutoComplete", "Team")' });
                        }
                    }
                }
            ],
            rowNum: 10,
            rowList: [10, 20, 30],
            pager: '#pager',
            rownumbers: true,
            sortname: 'TeamId',
            sortorder: "desc",
            viewrecords: true,
            altRows: true,
            altclass: 'myAltRowClass',
            width: 700,
            height: 200,
            gridview: true,
            jsonReader: { cell: "" },
            editurl: '@Url.Action("Update", "Team")',
            caption: "Teams",
            loadError: function (jqXHR, textStatus, errorThrown) {
                // remove error div if exist
                $('#' + this.id + '_err').remove();
                // insert div with the error description before the grid
                grid.closest('div.ui-jqgrid').before(
                    '<div id="' + this.id + '_err" style="max-width:' + this.style.width +
                    ';"><div class="ui-state-error ui-corner-all" style="padding:0.7em;float:left;"><span class="ui-icon ui-icon-alert" style="float:left; margin-right: .3em;"></span><span style="clear:left">' +
                    decodeErrorMessage(jqXHR, textStatus, errorThrown) + '</span></div><div style="clear:left"/></div>');
            },
            loadComplete: function () {
                // remove error div if exist
                $('#' + this.id + '_err').remove();
            }
        });
        grid.jqGrid('filterToolbar', { stringResult: true, searchOnEnter: true, defaultSearch: 'cn' });
        grid.jqGrid('navGrid', '#pager', { add: false, edit: false },
              {}, {}, {}, { multipleSearch: true, overlay: false, width: 480, showQuery: true });
        grid.jqGrid('inlineNav', "#pager");
        grid.jqGrid('navButtonAdd', '#pager',
                    {
                        caption: "", title: "Toggle Searching Toolbar",
                        buttonicon: 'ui-icon-gear',
                        onClickButton: function () { grid[0].toggleToolbar(); }
                    });
    });
</script> 
```

控制器

```
 // POST: /Team/Update/5

    [HttpPost]
    public ActionResult Update(Team Team, string oper)
    {
        try
        {
            switch (oper)
            {
                case "add":
                    unitOfWork.TeamRepository.Insert(Team);
                    unitOfWork.Save();
                    return RedirectToAction("Search");
                case "edit":
                    if (ModelState.IsValid)
                    {
                        unitOfWork.TeamRepository.Update(Team);
                        unitOfWork.Save();
                        return RedirectToAction("Search");
                    }
                    break;
            }
        }
        catch (DbUpdateConcurrencyException ex)
        {
            var entry = ex.Entries.Single();
            var databaseValues = (Team)entry.GetDatabaseValues().ToObject();
            var clientValues = (Team)entry.Entity;
            if (databaseValues.Code != clientValues.Code)
                ModelState.AddModelError("Code", "Current value: "
                    + databaseValues.Code);
            if (databaseValues.Name != clientValues.Name)
                ModelState.AddModelError("Name", "Current value: "
                    + databaseValues.Name);
            ModelState.AddModelError(string.Empty, "The record you attempted to edit "
                + "was modified by another user after you got the original value. The "
                + "edit operation was canceled and the current values in the database "
                + "have been displayed. If you still want to edit this record, click "
                + "the Save button again. Otherwise click the Back to List hyperlink.");
        }
        catch (DataException)
        {
            //Log the error (add a variable name after DataException)
            ModelState.AddModelError("", "Unable to save changes. Try again, and if the problem persists, see your system administrator.");
        }
        return View(Team);
    } 
```

将控制器 ActionResult 修改为下面，但仍会在网格中显示 jqg1，直到我通过 inlineNav 按钮重新加载它。数据库正在更新，但网格最初显示 jqg1，直到重新加载。有任何想法吗？谢谢！！

```
[HttpPost]
    public ActionResult Update(Team Team, string oper)
    {
        try
        {
            if (oper.Equals("add"))
            {
                unitOfWork.TeamRepository.Insert(Team);
                unitOfWork.Save();
            }
            else if (oper.Equals("edit"))
            {
                if (ModelState.IsValid)
                {
                    unitOfWork.TeamRepository.Update(Team);
                    unitOfWork.Save();
                }
            }
        }
        catch (DbUpdateConcurrencyException ex)
        {
            var entry = ex.Entries.Single();
            var databaseValues = (Team)entry.GetDatabaseValues().ToObject();
            var clientValues = (Team)entry.Entity;
            if (databaseValues.Code != clientValues.Code)
                ModelState.AddModelError("Code", "Current value: "
                    + databaseValues.Code);
            if (databaseValues.Name != clientValues.Name)
                ModelState.AddModelError("Name", "Current value: "
                    + databaseValues.Name);
            ModelState.AddModelError(string.Empty, "The record you attempted to edit "
                + "was modified by another user after you got the original value. The "
                + "edit operation was canceled and the current values in the database "
                + "have been displayed. If you still want to edit this record, click "
                + "the Save button again. Otherwise click the Back to List hyperlink.");
        }
        catch (DataException)
        {
            //Log the error (add a variable name after DataException)
            ModelState.AddModelError("", "Unable to save changes. Try again, and if the problem persists, see your system administrator.");
        }

        var context = new NonTaxContext();
        return Json(new
        {
            total = 1,
            page = 1,
            records = 1,
            rows = (from item in context.Teams
                    where item.TeamId.Equals(Team.TeamId)
                    select item.TeamId).ToList()
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:14:09.053

问题是`inlineNav`在向数据库添加数据的情况下，您使用的工作不够好。所以你必须在添加行之后做一些额外的步骤`aftersavefunc`。

```
grid.jqGrid("inlineNav", "#pager", {
    addParams: {
        addRowParams: {
            aftersavefunc: function (rowId, jqXHR) {
                // here you need place some additional code !!!
                // jqXHR is a superset of the XMLHTTPRequest object
                // typically one need use jqXHR.responseText
                // to access the response from the server
            }
        }
    },
    ... // other options which you need
}); 
```

该问题的最简单解决方案是在添加新行后重新加载网格内容：

```
aftersavefunc: function () {
    var $this = $(this); // grid
    setTimeout(function () {
        $this.trigger("reloadGrid");
    }, 50);
} 
```

或者，您可以从数据库返回新行的 id。您当前的代码返回`RedirectToAction("Search");`，这似乎是我的错误。如果您返回新行的 id，您可以在其中获取`jqXHR.responseText`它`aftersavefunc`

```
aftersavefunc: function function (rowId, jqXHR) {
    var newRowId = jqXHR.responseText; // probably $.parseJSON(jqXHR.responseText)
    $(this).jqGrid("setCell", rowId, "TeamId", newRowId);
    $("#" + $.jgrid.jqID(rowId)).attr("id", newRowId);
} 
```

# c - 取消引用和后缀的优先级

> ID：15345396
> 
> 赞同：5
> 
> 时间：2013-03-11T18:01:19.727
> 
> 标签：c, operators, operator-precedence

当我阅读 K&R 的 TCPL 时，我只是无法理解两种表达方式：

```
*p++ = val;  /*push val onto stack */ 
```

这是我的想法：

*   取消引用和后缀具有相同的优先级，并且关联性是从右到左，所以

    `*p++ = val` 可能和 一样`*(p++) = val`，因为指针通常是到顶部的下一个位置，所以在这段代码中，因为括号，p 先增加 1，所以 p 是当前顶部的两个单位，而不是当前顶部的一个单位当前顶部，val应该在哪里！！！谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T18:12:36.737

前缀递增/递减和取消引用运算符的优先级相等，但后缀运算符的优先级更高，因此`*p++`与 相同`*(p++)`，就像写`*p = val; p++;`

如果您编写了`(*p)++ = val`，它将无法编译，因为您会尝试为数字分配值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-01T23:41:53.523

K&R 中运算符的优先级和关联性，表 2-1，第 53 页，不像 Stroustrup，tC++PL，Sed，第 6.2 节运算符摘要，第 120-121 页中最近的表那样细化和完整。

[C++ 运算符优先级](https://stackoverflow.com/questions/15295226/c-operator-precedence?rq=1) Agnew 的回答非常好。

他指出，对于一元运算符和 *(p++)，关联确实是 R->L，

1.  **第一个 p++ 求值，但返回**前一个 p 值
***   然后 *p 用这个先前的 p 值进行评估，并且分配发生*   然后语句结束并且 p++ 后增量值现在处于活动状态，即指针 p 现在被碰撞。**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T18:31:56.433

运算符的优先级是编译器对其解释的顺序，而不是它们的执行顺序。

运算符优先级实际上意味着“在哪里放置括号”。因此，您是正确`*p++`的，与 相同`*(p++)`。但是现在我们需要了解什么是`*(p++)`. 由于后固定操作，这意味着取`*p`然后增加。`p++`

因此，简而言之，您只需混合编译器的解释顺序（由括号或优先级决定）和执行顺序（由后置或前置定义决定）。**

# mysql - Mysql：查找列值以特定子字符串结尾的行

> ID：15345400
> 
> 赞同：21
> 
> 时间：2013-03-11T18:01:26.343
> 
> 标签：mysql, sql

我有一列`url`，其中所有值都是 url。我正在尝试更新不同列的值，只要上述 url 以`.pdf`.

谁能帮我这个？我还没有在这里找到答案。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-11T18:06:13.850

我可能过于简单了......但根据你的描述，会[`LIKE`](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)解决你的问题吗？

```
UPDATE YourTable
SET DifferentColumn = 'NewValue'
WHERE Url LIKE '%.pdf' 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-11T18:06:39.977

您可以使用带有前导通配符的 LIKE 条件。`%.pdf`表示该列必须以`.pdf`

```
UPDATE mytable
SET newcolumn = 'PDF found'
WHERE yourcolumn LIKE '%.pdf' 
```

或者，您可以使用该`right()`功能

```
UPDATE mytable
SET newcolumn = 'PDF found'
WHERE right(yourcolumn,4) = '.pdf' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-11T18:07:40.660

在您的 WHERE 子句中，使用类似的东西`LOCATE('.pdf',url) > 0`来标识感兴趣的记录。

正如所指出的，这将为您提供字符串中包含“.pdf”的任何网址...

如果您绝对希望“.pdf”在最后，您也可以尝试：

`LOWER(RIGHT(url,4)) = '.pdf'`

我会使用 LOWER 或 UPPER 来处理任何案例问题。

您也可以`LIKE %.pdf`按照其他人的建议使用（再次注意大写/小写问题）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T18:06:33.137

所以看起来你正在寻找[like](http://www.w3schools.com/sql/sql_like.asp)参数。

例如：

```
SELECT column(s) FROM table WHERE URL LIKE '%.pdf' 
```

或者你可以更新

```
UPDATE table SET column = value, ..., WHERE URL LIKE '%.pdf' 
```

% 就像在 .pdf 是 htis 案例之前说什么。

希望这可以帮助。

# python - 关于 if((var[0] > 6) && (var[0] < 19)) 的 Python 帮助：需要

> ID：15345404
> 
> 赞同：0
> 
> 时间：2013-03-11T18:01:39.533
> 
> 标签：python, if-statement, python-2.7

我在 Python2.7 上相当新，并且完成了我的大部分工作，但是这个术语

```
if((var > 6) && (var < 19)) : 
```

会给出语法错误（当然），但我不明白如何在 Python 中执行此操作

如果varist的内容在6到19之间（这将是早上6点到晚上7点的时钟），我想要一个真实的（进入if的主体）有人可以指出工作解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T18:03:19.837

在 python 中，[布尔 AND 拼写为`and`](http://docs.python.org/2/reference/expressions.html#boolean-operations)：

```
if var > 6 and var < 19: 
```

在这种情况下，您可以使用[比较运算符链接](http://docs.python.org/2/reference/expressions.html#not-in)：

```
if 6 < var < 19: 
```

并完全放弃布尔测试。`(6 < var) and (var < 19)`除了中间的表达式只计算一次之外，这基本上是相同的。

# c# - 如何从 Java 客户端向 C# Web 服务发送数据

> ID：15345405
> 
> 赞同：2
> 
> 时间：2013-03-11T18:01:41.533
> 
> 标签：c#, java, web-services, webmethod

我正在自学 Java，我对 C/C++ 和 C# 有丰富的经验。

我在 C# 中有一个 Web 服务，它具有将记录插入我的数据库的功能，只需一个用户名和密码。

```
 [WebMethod]
    public string InsertNewUser(string username, string password)
    {
        try
        {
            conn.Open();

            string insertQuery = "INSERT INTO Accounts(Username, Password) VALUES ('" + username + "','" + password + "')";

            SqlCommand cmd = new SqlCommand(insertQuery, conn);

            try
            {
                cmd.ExecuteNonQuery();
                conn.Close();
                return "New user added: " + username;
            }
            catch
            {
                return "Error in command execution";
            }
        }
        catch
        {
            return "Error in database connection";
        }
    } 
```

谁能告诉我是否可以在 java 客户端应用程序中调用此函数？如果是这样，我该怎么做？我很难在网上找到很多关于 java 连接到 c# web 服务的信息。

目前我正在使用 asmx Web 服务，但考虑改用 WCF，这会使它更容易还是更难？

任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:05:39.007

A web service is a web service. That means you can call it from anywhere. Be it from C#, Java or anywhere else. The question is how you are exposing your web service. I recommend exposing it as a REST service, that way it will be accessible from everywhere. There is plenty of information available on the web on how to implement RESTful services. There is even a book, RESTFul .Net, that you can read. Once you implement the REST service, then you access it using HTTP GET, PUT, UPDATE, ETC... from your choice of environment.

# jquery - FancyBox 2 加载新 IFrame/内容时更改 FancyBox 标题

> ID：15345406
> 
> 赞同：0
> 
> 时间：2013-03-11T18:01:43.497
> 
> 标签：jquery, html, jsp, fancybox, fancybox-2

我想知道在窗口中加载新内容时如何更改 FancyBox 窗口的标题。我有一个应用程序，其中在 FancyBox 窗口中调用了一个页面，它看起来像这样：

**代码**

```
<script type="text/javascript">     

        $(document).ready(function() {

            $(".fancybox").fancybox({

                autoDimensions : false,
                width: 1300,
                height: 'auto',
                openEffect  : 'elastic',
                closeEffect : 'elastic',
                type: 'iframe',            

                afterLoad: function(){
                    this.title = $(this.element).attr('caption');
                }

            });         
        });
    </script>

  <title><fmt:message key="title"/></title>     

  </head>
  <body>
    <h1><fmt:message key="heading"/></h1>
    <p><fmt:message key="greeting"/></p>

    <p><a class="fancybox fancybox.iframe" caption ="Officer Registration" href="officer_registration.htm" >Officer Registration</a></p>

    <p><a class="fancybox fancybox.iframe" caption ="Citizen Registration" href="<c:url value="citizen_registration.htm"/>">Citizen Registration</a></p>

   </body>
</html> 
```

页面使用 href 标记调用并显示在精美的框中。花式框根据元素中定义的标题属性设置标题。当加载到fancy box的页面被提交到服务器时，服务器返回另一个页面，这个页面将fancybox窗口中的内容替换为新的内容，但是标题保持在旧内容中设置的相同并且没有改变.

我现在想在 iframe 的内容时如何更改fancybox 的标题。

# mkmapview - 我的地图视图在第一次进入视图控制器时没有放大

> ID：15345407
> 
> 赞同：0
> 
> 时间：2013-03-11T18:01:45.463
> 
> 标签：mkmapview, zooming, xcode4.5, region, mkcoordinateregion

有人可以帮我吗？我是 xcode 的新手，对我认为是一个小问题感到困惑。出于某种原因，第一次从我的初始视图控制器打开我的地图时，图钉被放下，但即使纬度和经度正确，地图也不会缩放到正确的区域。

当我回到第一个视图控制器并再次启动它时，缩放工作。

我的代码在 viewdidload 下的视图控制器实现文件中。

-（无效）viewDidLoad {

```
[super viewDidLoad];
NSLog(@"lat in map %@", eventLat);
NSLog(@"long in map %@", eventLong);
[mapview setMapType:MKMapTypeStandard];
[mapview setZoomEnabled:YES];
[mapview setScrollEnabled:YES];

MKCoordinateRegion region = { {0.0, 0.0 }, {0.0, 0.0 } };
region.center.latitude = [eventLat doubleValue];
region.center.longitude = [eventLong doubleValue];
region.span.latitudeDelta = 0.01f;
region.span.longitudeDelta = 0.01f;

[mapview setRegion:region animated:YES];

MMAnnotate *ann = [[MMAnnotate alloc] init];
ann.title = @"Test Title";
ann.subtitle = @"Test Subtitle";
ann.coordinate = region.center;
[mapview addAnnotation:ann]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:39:00.380

您应该尝试在 viewDidAppear 中执行此操作。如果您准备好在每次视图出现时缩放到该位置。viewDidLoad 在 mapview 周期中太早了。

# objective-c - id 类型实例变量向实例方法发送消息

> ID：15345411
> 
> 赞同：3
> 
> 时间：2013-03-11T18:02:09.047
> 
> 标签：objective-c, delegates, protocols

我关于stackoverflow的第一个问题，所以请温柔。我试过寻找答案，但我真的需要帮助。

问题在于从 Neal Goldstein 的 Objective-C for Dummies 中学习代表

**他在Transaction.h**中有以下内容

 **```
#import <Cocoa/Cocoa.h>
@class Budget;

@interface Transaction : NSObject {

  Budget   *budget;  
  double    amount;
  NSString *name;
  id        delegate;
}

//some init method

@end

@protocol TransactionDelegate

@required

- (void) spend: (Transaction *) aTransaction;

//additional optional method

@end

-- 
```

//然后在**Transaction.m**中他有这个

```
#import "Transaction.h"
#import "Budget.h"

@implementation Transaction

@synthesize budget, delegate , amount; 

- (void) spend {

  if ([delegate respondsToSelector:@selector(spend:)])
    [delegate spend:self]; 
}

- (id) initWithAmount: (double) theAmount forBudget: (Budget*) aBudget {
  if (self = [super init]) {
    budget = aBudget;
    [budget retain];
    amount = theAmount;
  }
  return self;
}

- (void) dealloc {

  [budget release];
  [super dealloc];
}

@end 
```

我无法理解 Transaction.m 文件中的花费方法

id 类型实例变量可以调用包含它的类中的任何方法吗？我知道 respondsToSelector 是一个 NSObject 方法，它告诉编译器是否已经实现了一个方法。但是，哪个是 id 类型的委托如何调用该方法呢？编译器甚至还不知道它是什么对象......

请帮忙！

PS如果有人对好的Objective-C书籍有任何建议，我将不胜感激。我想进入 iPhone 开发，但我认为我需要先掌握 Objective-C 的基础知识。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:14:51.837

是的，您可以向`delegate`变量发送任何消息，因为它的类型是`id`.

你写了这个：

```
[delegate spend:self]; 
```

编译器将其转换为对`objc_msgSend`函数的调用，如下所示：

```
objc_msgSend(delegate, @selector(spend:), self); 
```

**在运行时**，该`objc_msgSend`函数在`delegate`的类（及其超类）的方法表中搜索与选择器关联的方法`spend:`。

顺便说一句，我们通常`delegate`这样声明变量：

```
id<TransactionDelegate> delegate; 
```

这会通知编译器`delegate`将成为符合`TransactionDelegate`协议的对象。这个声明将帮助 Xcode 在您尝试向`delegate`. 如果您`delegate`以这种方式声明您的 setter 方法或属性，编译器还将在编译时检查您是否将其设置为符合协议的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:52:22.887

好问题。了解 Obj-C 与其他编译语言之间的主要区别之一。

你可以向任何你喜欢的 Objective-C 对象发送任何消息。消息发送将尝试由称为运行时库的库解析，这发生在运行时。在编译时，如果您有一个不是通用 id 的对象类型，一些 IDE 可能会将其标记为可能的用户错误。

在运行时，运行时库将寻找匹配的方法，然后会查看该类是否具有需要它的回退处理程序，并且作为最后的手段会抛出异常。用户代码可以很好地捕获此异常并将其视为正常情况。**

# hibernate - 持久化上下文缓存id和SQL查询？

> ID：15345419
> 
> 赞同：0
> 
> 时间：2013-03-11T18:02:38.767
> 
> 标签：hibernate

如果一个电话`session.save(customerObject)`，那么就**没有**插入到客户...查询到数据库。**Hibernate 将设置 id 属性（“序列”或“增量”生成器）并将实体绑定到持久性上下文。`transaction.commit()`持久化上下文在被调用时与数据库同步**。
问：Hibernate 会在哪里设置 id 属性？
问：持久化上下文会在与 db 同步之前缓存插入到 customer 中的 sql 查询吗？我的意思是，什么时候生成 sql（在进行保存或 session.flush/tx.commit 时）

编辑：我从[https://forum.hibernate.org/viewtopic.php?t=951275&highlight=difference%20persist%20save得到以下信息](https://forum.hibernate.org/viewtopic.php?t=951275&highlight=difference%20persist%20save)

persist() 定义明确。它使瞬态实例持久化。但是，它不能保证标识符值将立即分配给持久实例，分配可能发生在刷新时间。规范没有这么说，这是我对persist() 的问题。

persist() 还保证如果在事务边界之外调用它，它不会执行 INSERT 语句。这在具有扩展会话/持久性上下文的长时间运行的对话中很有用。

需要像 persist() 这样的方法。

save() 不保证相同，它返回一个标识符，**如果必须执行 INSERT 以获取标识符（例如“身份”生成器，而不是“序列”），则无论您是否在里面，此 INSERT 都会立即发生或交易之外。**这在具有扩展会话/持久性上下文的长期对话中不好。

这更令人困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:34:28.710

一般而言，Hibernate 尝试尽可能晚地写入数据库，而不影响程序的正确性，并尊重它提供的方法的约定。

由于`save()`记录了为保存的实体分配一个 ID 并返回此 ID，因此它在`save()`调用时生成 ID，并返回它。这可能意味着实体是否写入数据库，具体取决于 ID 生成策略。

由于`persist()`不能保证在调用时分配标识符，因此您不能指望在`persist()`调用后分配 ID。而且你也不能指望实体被写入数据库，因为那不是`persist()`。就这么简单。

仅保证在刷新会话时、在提交之前自动或在`flush()`调用时显式地执行对数据库的写入。如果您执行的查询结果可能取决于挂起的写入，您还可以保证执行对 DB 的写入。

# wpf - 模板绑定到同一个属性

> ID：15345421
> 
> 赞同：0
> 
> 时间：2013-03-11T18:02:51.293
> 
> 标签：wpf, templatebinding

谁能解释这个 TemplateBinding 绑定到什么？

```
// excerpt of a Style that applies to an ItemsControl
<Setter Property="ItemsPanel">
  <Setter.Value>
    <ItemsPanelTemplate>
      <local:PiePanel Values="{TemplateBinding local:PiePanel.Values}"/>
    </ItemsPanelTemplate>
  </Setter.Value>
</Setter> 
```

PiePanel 定义了一个 DependencyProperty

```
 public static readonly DependencyProperty ValuesProperty =
        DependencyProperty.RegisterAttached("Values", typeof(ObservableCollection<double>), typeof(PiePanel), ... 
```

AFAIK，模板绑定转换为

```
<local:PiePanel Values={Binding RelativeSource={RelativeSource TemplatedParent}, Path=local:PiePanel.Values}" /> 
```

那么 Values 绑定到 Child 中定义的 Parent 的 Values 属性？我的解释正确吗？没有为 Parent 定义 Values 属性（在本例中是 Style 的 TargetType）。

# c# - ServiceStack.Text 将 json 反序列化为对象总是转换为字符串，并且行为异常带引号

> ID：15345422
> 
> 赞同：3
> 
> 时间：2013-03-11T18:02:56.263
> 
> 标签：c#, json, servicestack

我正在尝试做的事情：

我有 json 对象，其值可以是字符串、整数、双精度值或任何这些值的列表。我试图将这些 json 字符串反序列化为 C# 对象，但因为它们可能有多种类型，所以我坚持使用泛型对象，而不是强类型的替代方案。

我的问题：在 T = object 的情况下，ServiceStack.Text.JsonSerializer.DeserializeFromString(jsonString) 函数的行为似乎很奇怪。它将始终将事物视为字符串，并且不适用于引号。

这是一个例子：

```
string json1 = "[1]";
string json2 = "[1,2]";
string json3 = "['hello']";
string json4 = "['hello','world']";
string json5 = "[\"hello\"]";
string json6 = "[\"hello\",\"world\"]";
object o1 = JsonSerializer.DeserializeFromString<object>(json1);
object o2 = JsonSerializer.DeserializeFromString<object>(json2);
object o3 = JsonSerializer.DeserializeFromString<object>(json3);
object o4 = JsonSerializer.DeserializeFromString<object>(json4);
object o5 = JsonSerializer.DeserializeFromString<object>(json5);
object o6 = JsonSerializer.DeserializeFromString<object>(json6); 
```

预期的基础对象：

```
object    type           value
o1        List           [1]
o2        List           [1,2]
o3        List           ['hello']
o4        List           ['hello','world']
o5        List           ["hello"]
o6        List           ["hello","world"] 
```

实际标的物：

```
object    type           value
o1        String         "[1]"
o2        String         "[1,2]"
o3        String         "['hello']"
o4        String         "['hello','world']"
o5        String         "["
o6        String         "[" 
```

作为参考，使用 Newtonsoft.Json 的相应代码块将底层对象解释为 Netwonsoft.Json.Link.JArray。

按照目前的情况，我必须确保在 json 中使用单引号，然后反序列化递归提取的任何字符串，直到所有内容都被正确提取。

我可以做些什么来让这种行为符合我想要使用 ServiceStack.Text 的方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:49:53.167

ServiceStack 的文本序列化器通过将 JSON 转换为指定的模式来工作，当您使用对象时，无法提前推断类型，因此为了在运行时执行此操作，ServiceStack 的 JSON 序列化器需要发出一个专有的**__type**元数据属性，告诉反序列化器将其反序列化成什么。这只会为**JSON 对象文字**而不是数组发出，这就是它在这里不起作用的原因。

以下是一些反序列化数组的方法：

```
string json6 = "[\"hello\",\"world\"]";

var list = json6.FromJson<List<string>>();
list.PrintDump();

var array = json6.FromJson<string[]>();
array.PrintDump();

var arrayObj = json6.FromJson<object[]>();
arrayObj.PrintDump(); 
```

# asp.net - 如何从asp.net服务器连续接收数据到闪存中？

> ID：15345426
> 
> 赞同：0
> 
> 时间：2013-03-11T18:03:14.093
> 
> 标签：asp.net, actionscript-3, flash, actionscript, actionscript-2

我想像从服务器到闪存的流式下载一样连续接收 XML 数据，可以吗？我在打印数据时每秒在 asp.net 中调用响应刷新，我希望 flash 每秒接收数据，但在接收数据后不关闭连接。例如我在服务器上有这个文件（你可以检查）：

```
http://5.9.121.41/handler.ashx 
```

我可以在闪存上使用什么方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:19:53.857

您需要设置一个套接字服务器，以便在收到数据时将数据推送到 Flash。这样，服务器可以在新数据准备好时不断地通知 Flash，这可能是每秒一次。有关更多详细信息，请参考此 q/a：

[如何将数据从 asp.net 推送到 flash/silverlight 客户端？](https://stackoverflow.com/questions/4213511/how-to-push-data-from-asp-net-to-flash-silverlight-client)

# html - DIV 表格单元格仅使用 height:100% 和 overflow:auto 在 IE9 中不滚动

> ID：15345433
> 
> 赞同：0
> 
> 时间：2013-03-11T18:03:37.260
> 
> 标签：html, css, internet-explorer-9

我已经使用 DIV 创建了一个表格布局，我希望其中一个单元格滚动。为此，我使用了溢出：自动和高度：100%。它适用于 Chrome 和 Safari，但不适用于 IE9。在 IE9 中，它只是扩展了单元格的高度，我可以滚动整个页面，但这不是它应该做的。

关于如何解决这个问题的任何想法？

（注意：我已将其缩小到 SidePanel 类中的 height:100% 样式。如果我使用实际像素值，则单元格将正确滚动。例如：height:500px。-似乎 IE9 和 FF 都有问题使用高度：100% 和溢出：自动渲染它。）

```
<!DOCTYPE html>
<html>
   <head>
     <style>
      * { /* Resetting the defaults */
          margin: 0;
          padding: 0;
      }

      html, body { /* Assigning Height To Containers First */
          height: 100%;
      }

      .headerRow
      {
        height:50px;
      }

      .fullHeight
      {
        height:100%;   
      }

      .sidePanel
      {
        overflow:auto;
        height:100%;    
      }

        .div-table{
          display:table;         
          width:auto;         
          background-color:#eee;         
          border:1px solid  #666666;         
          border-spacing:5px;/*cellspacing:poor IE support for  this*/
        }
        .div-table-row{
          display:table-row;
          width:auto;
          clear:both;
        }
        .div-table-col{
          float:left;/*fix for  buggy browsers*/
          display:table-column;         
          width:200px;         
          background-color:#ccc;  
        }

     </style>
</head>
<body style="background-color:White;overflow:auto">
    <div id="mainTable" class="div-table fullHeight">
        <div class="div-table-row headerRow">
            <div class="div-table-col">
                My Header Is Here
            </div>
        </div>

         <div class="div-table-row">
            <div class="div-table-col">
                Image here
            </div>
            <div class="div-table-col sidePanel">

                  td 2 content <br>too <br>tall <br><br><br><br><br><br>
                  <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
                  <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
                  <br><br><br><br><br><br><br><br><br><br><br><br>to fit height of the screen, 
                  so a scroll bar is added.  In IE9 it doesn't work because it just extends 
                  the height of the DIV

            </div>
         </div>
</div>

</body>
</html> 
```

这是屏幕截图：

![在此处输入图像描述](../Images/7033f021f781c574bd7309b6687ddeaa.png)

![在此处输入图像描述](../Images/9359f23a2219d4b0d15d804c703c1276.png)

# java - 如何检查发射器是否处于活动状态？

> ID：15345434
> 
> 赞同：1
> 
> 时间：2013-03-11T18:03:38.217
> 
> 标签：java, midi

我正在创建一个 MIDI 钢琴，在其中我使用 a`transmitter`来接收 MIDI 键盘按键，并`receivers`在进行一些字节操作后将这些消息发送到扬声器。

我的问题是我想检测用户是否按住键。如果用户按住一个键，则该音符应保持不变。如果不是，则该音符应逐渐消退为静音。

Java MIDI 没有我可以调用的发送器方法，例如`isRunning()`，或者`isActive()`说是发送器，即用户正在按住一个键。有什么办法可以检测到这个吗？

在我的代码中，我有一个无限`while`循环，它不断检查是否`transmitter`已向 发送任何数据`receiver`，是否已处理该数据，否则什么也不做。但是，当按下并按住 MIDI 键盘上的某个键时，MIDI 数据会在按下该键时发送到接收器，但是当 while 循环再次开始时，由于键被保持在原位，因此不会接收到 MIDI 数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:16:15.120

当用户按下一个键时，会发送一条 Note On 消息。释放键时，会发送 Note Off 消息（或具有力度 0 的 Note On 消息）。您可以使用该信息来确定是否持有笔记。

一种方法：每次看到 Note On（速度 > 0）时都会增加一个计数器。每次你看到一个音符关（或一个音符开，速度为 0）时，计数器就会递减。如果您看到 All Notes Off，请将计数器设置为零。每当计数器大于零时，就会按住一个键。

# css - 如何在 Chrome 中的 css 转换顶部使用 DIV 上的悬停效果？（在 FF 中有效）

> ID：15345436
> 
> 赞同：4
> 
> 时间：2013-03-11T18:03:40.257
> 
> 标签：css, google-chrome, transform

我正在尝试制作六边形网格。对于一个时髦的效果，我使用了 css 变换效果。在 FireFox 中，这似乎功能正确，但在 Google Chrome 中，顶部 div 似乎没有给出预期的悬停效果。这是我使用的代码：

```
<html>
<head>
<style>
body{
    margin:0;
}
.board{
    width: 550px;
    height: 300px;
    margin: 20px auto;
    -webkit-transform: perspective(700px) rotateX(65deg);
    -moz-transform: perspective(700px) rotateX(65deg);
    -ms-transform: perspective(700px) rotateX(65deg);
    -o-transform: perspective(700px) rotateX(65deg);
    transform: perspective(700px) rotateX(65deg);
    padding:10;
}
.hex-row {
    clear: left;
}
.hex-row.even {
    margin-left: 53px;
}
.hex:hover{
    background: #446;
}
.hex:hover:before{
    border-bottom: 30px solid #446;
}
.hex:hover:after{
    border-top: 30px solid #446;
}

.hex:before {
    content: " ";
    width: 0; height: 0;
    border-bottom: 30px solid #6C6;
    border-left: 52px solid transparent;
    border-right: 52px solid transparent;
    position: absolute;
    top: -30px;
}
.hex {
    width: 104px;
    height: 60px;
    background-color: #6C6;
    position: relative;
    float:left;
    margin-top: 32px;
    margin-left: 3px;
    margin-bottom: 3px;
}
.hex:after {
    content: " ";
    width: 0;
    position: absolute;
    bottom: -30px;
    border-top: 30px solid #6C6;
    border-left: 52px solid transparent;
    border-right: 52px solid transparent;
}
.hex.disabled{
    background-color: #888;
}
.hex.disabled:before {
    border-bottom: 30px solid #888;
}
.hex.disabled:after {
    border-top: 30px solid #888;
}
</style>
</head>
<body>
<div class="board">
<div class="hex-row">
<div class="hex disabled"></div>
<div class="hex disabled"></div>
<div class="hex"></div>
<div class="hex disabled"></div>
<div class="hex disabled"></div>
</div>
<div class="hex-row even">
<div class="hex"></div>
<div class="hex"></div>
<div class="hex"></div>
<div class="hex"></div>
</div>
<div class="hex-row">
<div class="hex disabled"></div>
<div class="hex"></div>
<div class="hex"></div>
<div class="hex"></div>
<div class="hex disabled"></div>
</div>
<div class="hex-row even">
<div class="hex"></div>
<div class="hex"></div>
<div class="hex"></div>
<div class="hex"></div>
</div>
<div class="hex-row">
<div class="hex disabled"></div>
<div class="hex disabled"></div>
<div class="hex"></div>
<div class="hex disabled"></div>
<div class="hex disabled"></div>
</div>
</div>
</body>
</html> 
```

为了快速尝试，您可以使用以下链接：http: [//jsfiddle.net/a55eF/2/](http://jsfiddle.net/a55eF/2/)并单击“运行”按钮。您将在右下角看到结果。

有没有人有关于修复悬停的建议？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:24:29.473

身体正在阻止悬停事件，这就是我在 firefox 和 google chrome 之间看到的区别。添加高度时：0px；对于 body 元素，它确实会正确触发悬停事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:19:41.230

我将其更改`height`为 10px 并将旋转角度更改为 75 度：

[http://jsfiddle.net/a55eF/5/](http://jsfiddle.net/a55eF/5/)

似乎您想弄乱这些参数，特别是高度，以获得所需的效果。似乎高度越低，您可以悬停的顶行越多。

# python - 如何将千位分隔符添加到已在python中转换为字符串的数字？

> ID：15345438
> 
> 赞同：5
> 
> 时间：2013-03-11T18:03:47.323
> 
> 标签：python, python-2.7, formatting

在我的场景（python 2.7）中，我有：

`str(var)`

其中 var 是一个变量，有时需要数千个分隔符，例如 1,500，但如您所见，它已转换为字符串（用于连接目的）。

我希望能够将该变量打印为带有数千个分隔符的字符串。

我已经阅读了为数字添加格式的解决方案，例如：

```
>>> '{:20,.2}'.format(f)
'18,446,744,073,709,551,616.00' 
```

来自[https://stackoverflow.com/a/1823189/1063287](https://stackoverflow.com/a/1823189/1063287)

但这似乎仅适用于数字，不适用于已转换为字符串的数字。

谢谢你。

**编辑：** 对于更具体的上下文，这是我的实施方案：

```
print 'the cost = $' + str(var1) + '\n'
print 'the cost = $' + str(var2) + '\n' 
```

我有几个'vars'。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T18:07:24.083

不要使用和连接，`str(var)`这`.format()`就是*.* 根据选择的类型`var`之一：

```
'{:,}'.format(var)    # format an integer
'{:,.2f}'.format(var) # format a decimal or float 
```

取决于您拥有的号码类型。

```
>>> var = 12345678.123
>>> '{:,}'.format(int(var))  # ignore the `.123` part
'12,345,678'
>>> '{:,.2f}'.format(var)
'12,345,678.12' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-12T12:01:27.137

我在为同一件事寻找解决方案时发现的这个问题来得太晚了。

使用`,`with 表示法`format()`可以很好地工作，但会带来一些问题，因为不幸的是，该`,`表示法不能应用于字符串。因此，如果您从数字的文本表示开始，那么您必须在调用之前将它们转换为整数或浮点数`format()`。`format()`如果您需要处理需要保留的不同精度级别的整数和浮点数，那么代码很快就会变得非常复杂。为了处理这种情况，我最终编写了自己的代码，而不是使用`format()`. 它使用最广泛使用的千位分隔符`,`（`.`

```
def separate_thousands_with_delimiter(num_str):
    """
    Returns a modified version of "num_str" with thousand separators added.
    e.g. "1000000" --> "1,000,000", "1234567.1234567" --> "1,234,567.1234567".
    Numbers which require no thousand separators will be returned unchanged.
    e.g. "123" --> "123", "0.12345" --> "0.12345", ".12345" --> ".12345".
    Signed numbers (a + or - prefix) will be returned with the sign intact.
    e.g. "-12345" --> "-12,345", "+123" --> "+123", "-0.1234" --> "-0.1234".
    """

    decimal_mark = "."
    thousands_delimiter = ","

    sign = ""
    fraction = ""

    # If num_str is signed, store the sign and remove it.
    if num_str[0] == "+" or num_str[0] == "-":
        sign = num_str[0]
        num_str = num_str[1:]

    # If num_str has a decimal mark, store the fraction and remove it.
    # Note that find() will return -1 if the substring is not found.
    dec_mark_pos = num_str.find(decimal_mark)
    if dec_mark_pos >= 0:
        fraction = num_str[dec_mark_pos:]
        num_str = num_str[:dec_mark_pos]

    # Work backwards through num_str inserting a separator after every 3rd digit.
    i = len(num_str) - 3
    while i > 0:
        num_str = num_str[:i] + thousands_delimiter + num_str[i:]
        i -= 3

    # Build and return the final string.
    return sign + num_str + fraction

# Test with:

test_nums = ["1", "10", "100", "1000", "10000", "100000", "1000000",
             "-1", "+10", "-100", "+1000", "-10000", "+100000", "-1000000",
             "1.0", "10.0", "100.0", "1000.0", "10000.0", "100000.0",
             "1000000.0", "1.123456", "10.123456", "100.123456", "1000.123456",
             "10000.123456", "100000.123456", "1000000.123456", "+1.123456",
             "-10.123456", "+100.123456", "-1000.123456", "+10000.123456",
             "-100000.123456", "+1000000.123456", "1234567890123456789",
             "1234567890123456789.1", "-1234567890123456789.1",
             "1234567890123456789.123456789", "0.1", "0.12", "0.123", "0.1234",
             "-0.1", "+0.12", "-0.123", "+0.1234", ".1", ".12", ".123",
             ".1234", "-.1", "+.12", "-.123", "+.1234"]

for num in test_nums:
    print("%s --> %s" % (num, separate_thousands_with_delimiter(num)))

# Beginners should note that an integer or float can be converted to a string
# very easily by simply using: str(int_or_float)

test_int = 1000000
test_int_str = str(test_int)
print("%d --> %s" % (test_int, separate_thousands_with_delimiter(test_int_str)))

test_float = 1000000.1234567
test_float_str = str(test_float)
print("%f --> %s" % (test_float, separate_thousands_with_delimiter(test_float_str))) 
```

希望这可以帮助。:)

# java - JPA/Hibernate 返回 BigDecimal 不长

> ID：15345440
> 
> 赞同：11
> 
> 时间：2013-03-11T18:03:53.343
> 
> 标签：java, hibernate, jpa

我正在计算按月分组的 SUM

```
Query q = entityManager.createNativeQuery(qlString);
q.setParameter("program", program);
@SuppressWarnings("unchecked")
List<Long> resultList = (List<Long>) q.getResultList();
long tend = System.currentTimeMillis(); 
```

当我将两个结果列表（已关闭：已关闭项目的结果列表，已关闭的项目：已关闭项目的结果列表）传递给计算百分比的方法时，我得到

```
 javax.servlet.ServletException: java.lang.ClassCastException: java.math.BigDecimal cannot be cast to java.lang.Long 
```

.

```
private List<Long> computeOTR(List<Long> closed, List<Long> closedLate) {
    List<Long> monthlyOTR = new ArrayList<Long>();
    long numerator;
    Long denominator;
    for (int i = 0; i <11; i++) {
        numerator = closed.get(i) - closedLate.get(i); <----java.lang.ClassCastException
        denominator = closed.get(i);
        long percentage = (int)(numerator * 100.0 / denominator + 0.5);
        monthlyOTR.add(i, percentage);
    }
    return monthlyOTR; 
```

}

在 Eclipse 调试模式下关闭显示为 BigDecimal。为什么我贴膜时会这样

`List<Long> resultList = (List<Long>) q.getResultList();`

# 编辑休眠查询：

```
public List<Long> findClosedLateByProgram(String program) {

    long tstart = System.currentTimeMillis();
    //@formatter:off
    String qlString = "with PRJ as ( " +
            "select  trunc(END_DATE) as END_DATE,  " +
            "trunc(NEED_DATE) as NEED_DATE   " +
            "from (SELECT UNIQUE * FROM TEST where PROGRAM_NAME = :program " +
            "AND ACTION_BY_ORG = 'AAA') " +
            "),  " +
            "DATES as ( select add_months(trunc(last_day(SYSDATE)), level-7) as thedate  " +
            "from dual connect by level <= 12  )   " +
            "SELECT nvl(sum(case when NEED_DATE <  trunc(thedate,'mm') AND END_DATE between trunc(thedate,'mm') and thedate then 1 end), 0 ) as CLOSED_LATE  " +
            "FROM  DATES, PRJ  " +
            "GROUP BY thedate ORDER BY thedate";
    //@formatter:on

    Query q = entityManager.createNativeQuery(qlString);
    q.setParameter("program", program);
    // q.setParameter("today",date, TemporalType.DATE);

    @SuppressWarnings("unchecked")
    List<Long> resultList =  q.getResultList();
    long tend = System.currentTimeMillis();
    long elapsed = tend-tstart;
    System.out.println("Elapsed Time For Closed But Late: " + elapsed);
    return resultList;
} 
```

# 编辑 2

我想我被 BigDecimal 困住了？ [http://weblogs.java.net/blog/mb124283/archive/2007/04/java_persistenc.html](http://weblogs.java.net/blog/mb124283/archive/2007/04/java_persistenc.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T18:09:36.940

您应该已经收到警告，表明您的演员并没有真正完全检查事情。[类型擦除](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#Topic3)意味着在执行时， a`List<Long>`和 a之间没有区别`List<BigDecimal>`。所以演员表成功了，只有后来的*隐式*演员表`Long`失败了。

基本上，您需要更改查询以确保它创建`Long`值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-07-25T13:43:34.037

我刚刚遇到了同样的问题。

一种解决方案是添加标量（[https://stackoverflow.com/a/29479658](https://stackoverflow.com/a/29479658)）。

但就我而言（带有@Query 注释的Spring data jpa），我无法添加它。一种解决方法是将结果列表作为`List <? extends Number>` （Long 和 BigInteger 的超类）

然后就可以调用 Number 的方法了`longValue()`。

在 java 8 中，您的示例可能变为：

```
List<? extends Number> resultListAsNumber =  q.getResultList();
List<Long> resultList = resultListAsNumber.stream().map(i -> i.longValue()).collect(Collectors.toList()); 
```

此解决方案避免了字符串转换，并且如果有一天休眠返回 Long，它将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-08T22:01:28.063

您应该遍历结果并从 String 转换对象：

```
 Query query = createSQLQuery(sql);
    List<Long> ids = new java.util.ArrayList<Long>();
    java.util.Iterator res = query.list().iterator();

    try {
        while(res.hasNext()){
            ids.add(new Long(res.next().toString()));
        }
    } catch(Exception ex) {
        ex.printStackTrace();
    } 
```

# android - 如何在 android 中创建图像网格（如随附的屏幕截图）

> ID：15345441
> 
> 赞同：0
> 
> 时间：2013-03-11T18:04:02.237
> 
> 标签：android, gridview, imageview

我想创建一个像这样的图像网格：

![在此处输入图像描述](../Images/7080af1ca32263101d1fbd89177ab35d.png)

我要问的是如何使图像看起来合适，而不会被拉伸或有眨眼空间。我只是让图像（不同尺寸）适合可用空间。..

如何 ？并提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:10:48.070

听起来您正在寻找[ImageView.ScaleType](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html) .CENTER_CROP。CENTER_CROP 确保每个图像都适合分配空间的高度和宽度，没有间隙。您可以通过以下方式添加到您的 xml：

```
<ImageView
    ...
    android:scaleType="centerCrop" /> 
```

# android - 不可变位图比可变位图更快吗？

> ID：15345444
> 
> 赞同：17
> 
> 时间：2013-03-11T18:04:10.670
> 
> 标签：android, bitmap, mutable

该类[有](http://developer.android.com/reference/android/graphics/Bitmap.html#copy%28android.graphics.Bitmap.Config,%20boolean%29)一个带有以下签名`Bitmap`的方法：`copy()`

```
public Bitmap copy(Bitmap.Config config, boolean isMutable) 
```

mutable 和 immutable 之间是否存在性能差异`Bitmap`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-25T20:47:34.587

[Romain Guy](https://stackoverflow.com/users/298575/romain-guy)在评论中回答：

> 回答最初的问题：不，没有性能差异。不过，我们可以为可变位图实现一些优化。希望在未来的版本中:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T13:03:43.293

没有性能差异。这不会影响您的应用程序的性能。如果您想执行任何操作，例如旋转等，那么我认为位图应该是可变的...

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-18T10:57:40.937

On Application level, there is always a difference between immutable & mutable Bitmap resources.

You always get an immutable Bitmap from the resources. you need to convert them into mutable bitmap as per necessiti.

Bitmap Bitmap = BitmapFactory.decodeResource(....); Bitmap mutableBitmap = immutableBitmap.copy(Bitmap.Config.ARGB_8888, true);

So probably there must be a performance issue in this reference.

# c# - MembershipCreateUserException：用户名已被使用

> ID：15345446
> 
> 赞同：0
> 
> 时间：2013-03-11T18:04:12.637
> 
> 标签：c#, asp.net, asp.net-mvc-4, simplemembership

我自己创建了简单的成员资格表，这样我就可以更新用户名字段（如果你让它为你自动创建它，就不能这样做）。

```
var confirmationToken = WebSecurity.CreateUserAndAccount(model.UserName, Request["Password"], new { NameFirst = model.NameFirst, NameLast = model.NameLast, ContactId = newContact.ContactId },true); 
```

当我运行这行代码时，我不断收到用户名已经存在的错误消息。奇怪的是，表中没有同名的用户名，并且每次注册都会这样做。这可能与我自己创建表格有关，但我看不出它在哪里有这个问题。

它确实将它添加到我的 UserProfile 表（称为 UserSecurity）中，但不包括在成员资格表中的用户。

编辑：上面的行使用了 pages_Membership 表。我需要它来使用我的 UserMembership 表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:28:46.913

> 编辑：上面的行使用了 pages_Membership 表。我需要它来使用我的 UserMembership 表。

如果您希望 Simple Membership Provider 使用与默认表不同的表，则需要更改`WebSecurity.InitializeDatabaseConnection`指向的表。

在解决方案资源管理器中，转到 Filters ->`InitializeSimpleMembershipAttribute.cs`并改用它：

```
WebSecurity.InitializeDatabaseConnection("MyContext", "TableToPointTo", 
"UserIdColumn", "UserNameColumn", autoCreateTables: true); 
```

# android - 由于我添加了新的主要活动，应用程序崩溃了

> ID：15345448
> 
> 赞同：0
> 
> 时间：2013-03-11T18:04:19.173
> 
> 标签：android, android-manifest, android-xml

我已经成功地预先在另一个项目中添加了一个新的主要活动。但是我尝试在不同的项目中使用相同的技术（由于主线程中的工作量而出现问题）。

我想用一个按钮创建一个名为“HomePage”的简单主页，该按钮可以调出名为“MainActivity”的原始主要活动。“MainActivity 用于连接到名为“GetLightData”的 servlet。该项目在添加主页之前在模拟器上运行（有一些错误），但现在它立即崩溃。我非常感谢针对我的代码的特定答案，谢谢.

主页：

```
package com.example.clearlight;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class HomePage extends Activity {

    private Button ScheduleBtn;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.homepage);

         ScheduleBtn = (Button) findViewById(R.id.home_btn);

        ScheduleBtn.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                Intent myIntent = new Intent(HomePage.this, MainActivity.class);
                HomePage.this.startActivity(myIntent);

            }
        });
    }   

} 
```

主要活动

```
package com.example.clearlight;

import android.os.Bundle;
import android.app.Activity;
import android.widget.TextView;
import android.widget.Toast;

import java.net.URL;

import org.apache.http.client.ResponseHandler;

import org.apache.http.client.methods.HttpGet;

import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;

import android.os.StrictMode;
import android.util.Log;

public class MainActivity extends Activity {

    TextView txt;

      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);

        setContentView(R.layout.relative);
        // Create a crude view - this should really be set via the layout resources but since its an example saves declaring them in the XML.

        /*LinearLayout rootLayout = new LinearLayout(getApplicationContext());
        txt = new TextView(getApplicationContext());
        rootLayout.addView(txt);
        setContentView(rootLayout);*/

        URL url = null;
        DefaultHttpClient httpclient = null;
        try {
            String registrationUrl = "http://10.0.2.2/SensorInfo/GetLightData?sensor=light";
            url = new URL(registrationUrl);

            HttpGet getRequest = new HttpGet(registrationUrl);
            ResponseHandler<String> handler = new BasicResponseHandler();
            httpclient = new DefaultHttpClient();
            // request data from server
            String result = httpclient.execute(getRequest, handler);
            Log.d("MyApp", "Data from server is "+ result);

          //Creating TextView Variable**********************************
            TextView text1 = (TextView) findViewById(R.id.text);

            //Sets the new text to TextView (runtime click event)//*******
            text1.setText("Light Data= " + result);

            Toast.makeText(this, "Light Data:" + result, Toast.LENGTH_SHORT).show(); //MESSAGE BOX
            //txtMessage.setText(String.valueOf(msg1) + "  " + String.valueOf(msg2));
        } catch (Exception ex) {
            ex.printStackTrace();
        }

      }
    } 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.clearlight"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="16" />
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.clearlight.MainActivity"
            android:label="@string/app_name" >

        </activity>
         <activity
            android:name="com.clearlight.HomePage"
            android:label="@string/homepage" 
            android:parentActivityName="com.example.clearlight.MainActivity" >

            <!-- Move the intent filter to HomePage -->
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.clearlight.MainActivity" />
        </activity>
    </application>

</manifest> 
```

日志猫：

> 03-11 18:08:09.522: I/Process(878): 发送信号。PID: 878 SIG: 9 03-11 18:08:14.882: E/Trace(893): 打开跟踪文件时出错: 没有这样的文件或目录 (2) 03-11 18:08:15.192: D/AndroidRuntime(893) : 关闭 VM 03-11 18:08:15.192: W/dalvikvm(893): threadid=1: 线程退出未捕获异常 (group=0x40a13300) 03-11 18:08:15.272: E/AndroidRuntime(893):致命异常：主要 03-11 18:08:15.272：E/AndroidRuntime(893)：java.lang.RuntimeException：无法实例化活动 ComponentInfo{com.example.clearlight/com.clearlight.HomePage}：java.lang.ClassNotFoundException : com.clearlight.HomePage 03-11 18:08:15.272: E/AndroidRuntime(893): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983) 03-11 18:08:15.272: E/AndroidRuntime( 893）：在 android.app.ActivityThread。08:15.272: E/AndroidRuntime(893): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974) 03-11 18:08:15.272: E/AndroidRuntime(893): ... 11 更多 03-11 18:08:19.122：I/Process(893)：发送信号。PID：893 SIG：9

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:06:35.197

改变

```
<activity
        android:name="com.clearlight.HomePage"
        android:label="@string/homepage" 
        android:parentActivityName="com.example.clearlight.MainActivity" >

 .... /> 
```

至

```
 <activity
        android:name="com.example.clearlight.HomePage"
        android:label="@string/homepage" 
        android:parentActivityName="com.example.clearlight.MainActivity" >
 .... /> 
```

目前你正在注册 `HomePage`活动，`AndroidManifest`但`com.clearlight.HomePage`你的主包是`com.example.clearlight`

# python - 使用 python 解析具有异常分隔符的文本文件

> ID：15345450
> 
> 赞同：1
> 
> 时间：2013-03-11T18:04:25.333
> 
> 标签：python, parsing, text

在支持遗留系统时，我面临着一个以以下格式存储数据的现场数据收集器：

```
# This is a comment <-beacuse it starts at the begining of the file
# This is a comment <- see above
# 1\. Item one <- not a comment because it starts with 1.
# Description of Item 1 <- not a comment as it is after a line that starts with a number
data point 1
data point 2
data point etc
3 <-- represents number of data points under Item one

# 2\. Item two <-- not a comment
# Description of item 2 <-- not a comment
data point 1
data point ..
data point 100
100
#3\. Item three <--- not a comment
# Item three description
0 
```

我不确定解析该文件以将每个项目包含为自己的列表的正确方法是什么。请注意，有时但并非总是数据会在两个不同项目之间添加随机空间。

**解析此类文件的正确方法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:12:28.490

I would do this in three steps:

1.  Remove all comments from the start of the file
2.  Split on a regular expression to find all the other comments in the file (see [here](https://stackoverflow.com/a/8081663/901059) for an example of how to split using a regular expression)
3.  Parse the remaining lines

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:12:58.650

You could use REGEX and do a [split](http://docs.python.org/2/library/re.html#module-contents) by: `^(?=\# ?\d+\.)`

Explained example here: [http://regex101.com/r/gB3xD1](http://regex101.com/r/gB3xD1)

# android - Android 应用程序：触摸定时器

> ID：15345456
> 
> 赞同：1
> 
> 时间：2013-03-11T18:04:35.667
> 
> 标签：android, timer

我的代码有问题。我想在 Action_UP 3 秒后清除画布（通过重置功能）（这里我使用了计时器）。在此期间，如果事件 Action_Down OR Action_Move 我必须取消 Timer-Task。

（Action_down & Action_move 应该取消 Action_up 中的计时器）我必须做什么？？请帮我。

谢谢

```
 public boolean onTouch(View view, MotionEvent event) {
            // Check event type

            switch (event.getAction()) {

            // Finger down
            case MotionEvent.ACTION_DOWN:

                    paint.setColor(Color.BLACK);
                    paint.setStrokeWidth(7f);
                    paint.setStrokeJoin(Paint.Join.ROUND);
                    paint.setStrokeCap(Paint.Cap.ROUND);
                    paint.setAntiAlias(true);

                    // Get current position
                    pX = event.getX();
                    pY = event.getY();

                    // Set beginning of path to (posX,posY)

                    path.moveTo(pX, pY);

                    if (start)
                    {
                        mytimer.cancel();
                        start = false;
                    }

                    break;

            // Finger moves
            case MotionEvent.ACTION_MOVE:
                    mX = event.getX();
                    mY = event.getY();

                    // Set position of end of path
                    path.lineTo(mX, mY);

                    // Draw path
                    bitmapCanvas.drawPath(path, paint);

                    // Invalidate canvas (redraw the view)

                    if (start)
                    {
                        mytimer.cancel();
                        start = false;
                    }

                    invalidate();
                    break;

            // Finger up
            case MotionEvent.ACTION_UP:

                    //bitmap = getResizedBitmap(bitmap, 16, 16);
                    //here We have to start our neocogniton :)   

                    mX = event.getX();
                    mY = event.getY();

                    if (mY == pY && mX == pX){                      
                        bitmapCanvas.drawPoint(pX, pY, paint);
                        invalidate();
                    }

                    path.reset();

                    mytimer.schedule(new TimerTask() {                      
                        @Override
                        public void run() {reset();}}, 3000);

                    break;

            }

            return true;
    } 
```

重置（）

```
 public void reset(){
            bitmapCanvas.drawColor(Color.WHITE);
            start = true;    
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:14:28.030

我想您在第二个 timer.cancel 上遇到错误，因为此功能正在取消计时器本身。尝试输入：

```
 myTimer = new Timer(); 
```

前

```
 myTimer.cancel(); 
```

# xslt - 将日期/时间从 2013 年 2 月 13 日 23:59:59 转换为 UNIX 毫秒 (1360817999000)

> ID：15345457
> 
> 赞同：0
> 
> 时间：2013-03-11T18:04:40.550
> 
> 标签：xslt

这是我开始的 XML：

```
<leaveBalanceTotal>

<employeeId>0001234</employeeId>

<uscId>1234567894654</uscId>

<leaveDescription>Sick</leaveDescription>

<leaveCodeStr>SS</leaveCodeStr>

<balanceAmount>90.22</balanceAmount>

<leaveDescription>Vacation</leaveDescription>

<leaveCodeStr>VA</leaveCodeStr>

<balanceAmount>187.11</balanceAmount>

<leaveDescription>Winter Recess</leaveDescription>

<leaveCodeStr>WR</leaveCodeStr>

<balanceAmount>30</balanceAmount>

<effectiveDate>03/11/2013 23:59:59</effectiveDate>

<totalDaysService>6062</totalDaysService>

<lastPayEndDate>03/11/2013 23:59:59</lastPayEndDate>

</leaveBalanceTotal> 
```

我正在使用此 XSLT 将其转换为我需要的格式：

```
<xsl:stylesheet
    version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xtt="urn:com.workday/xtt"
    xmlns:etv="urn:com.workday/etv"
    xmlns:wd="urn:com.workday.report/CR-INT486-Kuali_Trojan_Time-Absence_Balances-Outbound" 
    exclude-result-prefixes="wd xsl"
    >

    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/">
        <document>
            <xsl:for-each select="wd:Report_Data/wd:Report_Entry/wd:All_Eligible_Time_Off_Plans_for_Worker">
                <leaveBalanceTotal>
                    <employeeId><xsl:value-of select="parent::node()/wd:employeeId"/></employeeId>
                    <uscId><xsl:value-of select="parent::node()/wd:uscId"/></uscId>
                    <leaveCodeId><xsl:value-of select="wd:leaveCodeStr"/></leaveCodeId>
                    <balanceAmount><xsl:value-of select="wd:balanceAmount"/></balanceAmount>
                    <effectiveDate><xsl:value-of select="parent::node()/wd:effectiveDate"/></effectiveDate>
                    <totalDaysService><xsl:value-of select="parent::node()/wd:totalDaysService"/></totalDaysService>
                    <lastPayEndDate><xsl:value-of select="parent::node()/wd:lastPayEndDate"/></lastPayEndDate>
                </leaveBalanceTotal>
            </xsl:for-each>
        </document>
    </xsl:template>
</xsl:stylesheet> 
```

这是我得到的输出：

```
<leaveBalanceTotal>

<employeeId>0001234</employeeId>

<uscId>1234567894654</uscId>

<leaveDescription>Sick</leaveDescription>

<leaveCodeStr>SS</leaveCodeStr>

<balanceAmount>90.22</balanceAmount>

<effectiveDate>03/11/2013 23:59:59</effectiveDate>

<totalDaysService>6062</totalDaysService>

<lastPayEndDate>03/11/2013 23:59:59</lastPayEndDate>

</leaveBalanceTotal>

<leaveBalanceTotal>

<employeeId>0001234</employeeId>

<uscId>1234567894654</uscId>

<leaveDescription>Vacation</leaveDescription>

<leaveCodeStr>VA</leaveCodeStr>

<balanceAmount>187.11</balanceAmount>

<effectiveDate>03/11/2013 23:59:59</effectiveDate>

<totalDaysService>6062</totalDaysService>

<lastPayEndDate>03/11/2013 23:59:59</lastPayEndDate>

</leaveBalanceTotal>

<leaveBalanceTotal>

<employeeId>0001234</employeeId>

<uscId>1234567894654</uscId>

<leaveDescription>Winter Recess</leaveDescription>

<leaveCodeStr>WR</leaveCodeStr>

<balanceAmount>30</balanceAmount>

<effectiveDate>03/11/2013 23:59:59</effectiveDate>

<totalDaysService>6062</totalDaysService>

<lastPayEndDate>03/11/2013 23:59:59</lastPayEndDate>

</leaveBalanceTotal> 
```

但是，我需要像这样将两个日期字段转换为 UNIX 毫秒，并将日期转换为 UNIX 毫秒：

```
<leaveBalanceTotal>

<employeeId>0001234</employeeId>

<uscId>1234567894654</uscId>

<leaveDescription>Sick</leaveDescription>

<leaveCodeStr>SS</leaveCodeStr>

<balanceAmount>90.22</balanceAmount>

<effectiveDate>1363060799000</effectiveDate>

<totalDaysService>6062</totalDaysService>

<lastPayEndDate>1363060799000</lastPayEndDate>

</leaveBalanceTotal>

<leaveBalanceTotal>

<employeeId>0001234</employeeId>

<uscId>1234567894654</uscId>

<leaveDescription>Vacation</leaveDescription>

<leaveCodeStr>VA</leaveCodeStr>

<balanceAmount>187.11</balanceAmount>

<effectiveDate>1363060799000</effectiveDate>

<totalDaysService>6062</totalDaysService>

<lastPayEndDate>1363060799000</lastPayEndDate>

</leaveBalanceTotal>

<leaveBalanceTotal>

<employeeId>0001234</employeeId>

<uscId>1234567894654</uscId>

<leaveDescription>Winter Recess</leaveDescription>

<leaveCodeStr>WR</leaveCodeStr>

<balanceAmount>30</balanceAmount>

<effectiveDate>1363060799000</effectiveDate>

<totalDaysService>6062</totalDaysService>

<lastPayEndDate>1363060799000</lastPayEndDate>

</leaveBalanceTotal> 
```

基本上我希望有人能告诉我如何转换这些日期。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:16:21.173

You can get milliseconds since the Unix epoch by dividing the duration since 1970-01-01 by one millisecond.

For example, prefix `xs:` being bound to namespace URI `http://www.w3.org/2001/XMLSchema`, the following XPath 2.0 expression

```
(xs:dateTime('2013-02-14T23:59:59') - xs:dateTime('1970-01-01T00:00:00')) 
div xs:dayTimeDuration('PT0.001S') 
```

evaluates to

> 1360886399000

* * *

*Edited to add:*

For parsing your dates, you might want to look into [regular expression matching](http://www.w3.org/TR/xslt20/#regex-examples) in XSLT 2.0\. For example, you could write a function which allows you to parse your dates into `xs:dateTime` values.

```
<!-- parses a dateTime value from a string of format "mm/dd/yyyy hh:mm:ss" -->
<xsl:function name="foo:parseDateTime" as="xs:dateTime">
  <xsl:param name="input" as="xs:string"/>
  <xsl:variable name="dateTimeLiteral">
    <xsl:analyze-string select="normalize-space($input)" 
                        regex="(\d\d)/(\d\d)/(\d\d\d\d)\s(\d\d):(\d\d):(\d\d)">
      <xsl:matching-substring>
        <xsl:number value="regex-group(3)" format="0001"/>          
        <xsl:text>-</xsl:text>
        <xsl:number value="regex-group(2)" format="01"/>          
        <xsl:text>-</xsl:text>
        <xsl:number value="regex-group(1)" format="01"/>
        <xsl:text>T</xsl:text>
        <xsl:number value="regex-group(4)" format="01"/>
        <xsl:text>:</xsl:text>
        <xsl:number value="regex-group(5)" format="01"/>
        <xsl:text>:</xsl:text>
        <xsl:number value="regex-group(6)" format="01"/>
      </xsl:matching-substring>
    </xsl:analyze-string>
  </xsl:variable>
  <xsl:value-of select="xs:dateTime($dateTimeLiteral)"/>
</xsl:function> 
```

You could write another function which encapsulates the above example of converting into milliseconds:

```
<!-- converts a dateTime into milliseconds since the beginning of 1970" -->
<xsl:function name="foo:toMilliseconds" as="xs:integer">
  <xsl:param name="input" as="xs:dateTime"/>
  <xsl:value-of select="(xs:dateTime($input)-xs:dateTime('1970-01-01T00:00:00'))
                        div xs:dayTimeDuration('PT0.001S')"/>
</xsl:function> 
```

Then you could combine these to write your dates as milliseconds, like this:

```
<xsl:value-of select="foo:toMilliseconds(foo:parseDateTime(lastPayEndDate))"/> 
```

# php - HTML5 Canvas 重新着色图像 *在*渲染之前

> ID：15345459
> 
> 赞同：1
> 
> 时间：2013-03-11T18:04:59.913
> 
> 标签：php, html, html5-canvas

我有一个本质上是星爆效果的图像。星爆的颜色是白色，背景是透明的（PNG w/Alpha）。我在 HTML5 画布上的随机位置随机生成这些星爆，同时生成随机的色相、饱和度和亮度 (HSL) 值。这些可能是 RGB 值，如果这可以简化事情的话。

目标是在将 PNG 渲染到画布之前，根据随机生成的 HLS 值重新着色 PNG 以在 HTML5 画布上显示。

我在 StackOverflow 和其他网站上阅读了其他一些帖子，但我看到的唯一解决方案是将其渲染到画布上，获取图像显示位置的坐标，并逐个像素地修改颜色. 理论上这可以工作，但是一些图像可能会略有重叠。此外，如果已经存在背景，那么据我所知，背景的颜色也会被修改，这对我来说也不是什么解决方案。

如果这超出了 Canvases 的能力范围，作为后备，我想我可以使用 GD2 或 Imagick 通过 PHP 动态重新着色图像，或者通过 Gimp、ImageMagick 或其他一些命令行图片库...

非常感谢！

**- 结果 -**

特别感谢 @jing3142 对屏幕外画布渲染的初步建议，以及 @Jarrod 提供了我缺少的重要部分：`globalCompositeOperation = "source-in"`

这是该概念的工作实现：http: [//jsfiddle.net/fwtW2/2/](http://jsfiddle.net/fwtW2/2/)

工作于：

*   铬合金
*   火狐
*   IE 9（未测试其他版本）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:41:55.013

具有图像大小的第二个画布怎么样，将图像放在该画布上，根据需要重新着色，提取重新着色的图像并随机放置在主画布上，使用新的 HSL 值在第二个画布上重新着色图像，提取并随机放置在主画布上并重复？

这也可能有帮助[https://developer.mozilla.org/en-US/docs/HTML/Canvas/Pixel_manipulation_with_canvas](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Pixel_manipulation_with_canvas)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:05:31.607

**Here’s how to easily recolor your starbursts just before rendering on canvas**

Convert your starburst.png into a vector path! (I know, you will have to drag out Gimp/Illustrator for this one time—but it’s worth it!)

Starburst paths can have fills and the fills can be solid colors or even gradients—as fancy, random recoloring as you need!

Starburst paths can scale without the pixilation of raster images like .png’s.

Starburst paths can rotate to show diversity in your bursts--and even skew to represent a bit of 3d motion.

If you want to get fancy, you can even create “glowing” bursts by using shadows and blurs.

Starburst paths are faster to render than .png images—especially if you need to manipulate each .png before drawing.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T20:33:02.487

我很确定您可以使用该`source-in` `globalCompositeOperation`操作吗？没有必要让所有的硬核和疯狂的矢量图像。

**这段代码是魔法发生的地方：**

```
var color = 'red';
ctx.fillStyle = color;
ctx.globalCompositeOperation = "source-in"; 
```

**但是您需要将其重新绘制到屏幕外的画布上**：您可以这样做

```
createBuffer = function(sizeW, sizeH)
{
    buffer = document.createElement('buffer');
    bufferCtx = buffer.getContext('2d');

    buffer.width = sizeW;
    buffer.height = sizeH; 
```

}

然后只需将您的图像绘制到屏幕外画布并应用全局合成。

# asp.net-mvc-4 - Autofac 和 ASP .Net MVC 4 Web API

> ID：15345462
> 
> 赞同：10
> 
> 时间：2013-03-11T18:05:11.917
> 
> 标签：asp.net-mvc-4, asp.net-web-api, autofac, sharepoint-2013

我在我的 ASP .Net MVC 4 项目中使用**Autofac for IoC。**Autofac 在初始化存储库并将其传递给**API Controller**时遇到了一些麻烦。

我确定我的配置中遗漏了一些东西。

这是我导航到时遇到的错误：`https://localhost:44305/api/integration`

```
<Error>
    <Message>An error has occurred.</Message>
    <ExceptionMessage>
        None of the constructors found with 'Autofac.Core.Activators.Reflection.DefaultConstructorFinder' 
        on type 'EL.Web.Controllers.API.IntegrationController' can be invoked with 
        the available services and parameters: Cannot resolve parameter 
        'EL.Web.Infrastructure.IRepository`1[EL.Web.Models.Integration] repository' of 
        constructor 'Void .ctor(EL.Web.Infrastructure.IRepository`1[EL.Web.Models.Integration])'.
    </ExceptionMessage>
    <ExceptionType>Autofac.Core.DependencyResolutionException</ExceptionType>
    <StackTrace>
        at Autofac.Core.Activators.Reflection.ReflectionActivator.ActivateInstance(IComponentContext context, IEnumerable`1 parameters) 
        at Autofac.Core.Resolving.InstanceLookup.Activate(IEnumerable`1 parameters) 
        at Autofac.Core.Resolving.InstanceLookup.Execute() 
        at Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, IComponentRegistration registration, IEnumerable`1 parameters) 
        at Autofac.Core.Resolving.ResolveOperation.ResolveComponent(IComponentRegistration registration, IEnumerable`1 parameters) 
        at Autofac.Core.Resolving.ResolveOperation.Execute(IComponentRegistration registration, IEnumerable`1 parameters) 
        at Autofac.Core.Lifetime.LifetimeScope.ResolveComponent(IComponentRegistration registration, IEnumerable`1 parameters) 
        at Autofac.ResolutionExtensions.TryResolveService(IComponentContext context, Service service, IEnumerable`1 parameters, Object& instance) 
        at Autofac.ResolutionExtensions.ResolveOptionalService(IComponentContext context, Service service, IEnumerable`1 parameters) 
        at Autofac.ResolutionExtensions.ResolveOptional(IComponentContext context, Type serviceType, IEnumerable`1 parameters) 
        at Autofac.ResolutionExtensions.ResolveOptional(IComponentContext context, Type serviceType) 
        at Autofac.Integration.WebApi.AutofacWebApiDependencyScope.GetService(Type serviceType) 
        at System.Web.Http.Dispatcher.DefaultHttpControllerActivator.GetInstanceOrActivator(HttpRequestMessage request, Type controllerType, Func`1& activator) 
        at System.Web.Http.Dispatcher.DefaultHttpControllerActivator.Create(HttpRequestMessage request, HttpControllerDescriptor controllerDescriptor, Type controllerType)
    </StackTrace>
</Error> 
```

以下是一些相关的代码：

**IoC 引导程序：**

```
public static class Bootstrapper
{
    public static void Initialize()
    {
        var builder = new ContainerBuilder();

        builder.RegisterControllers(Assembly.GetExecutingAssembly());
        builder.RegisterApiControllers(Assembly.GetExecutingAssembly());

        builder.Register(x => new SharePointContext(HttpContext.Current.Request)).As<ISharePointContext>().SingleInstance();
        builder.RegisterType<SharePointRepository<IEntity>>().As<IRepository<IEntity>>();
        builder.RegisterType<SharePointContextFilter>().SingleInstance();

        builder.RegisterFilterProvider();

        IContainer container = builder.Build();
        DependencyResolver.SetResolver(new AutofacDependencyResolver(container));

        var resolver = new AutofacWebApiDependencyResolver(container);
        GlobalConfiguration.Configuration.DependencyResolver = resolver;
    }
} 
```

**存储库：**

```
public interface IRepository<T>
{
    void Add(T entity);

    void Delete(int id);

    IEnumerable<T> Find(Expression<Func<T, bool>> filter = null);

    void Update(int id, T entity);
} 
```

**SharePoint 存储库：**

```
internal class SharePointRepository<T> : IRepository<T> where T : IEntity
{
    private readonly ISharePointContext _context;
    private readonly string _listName;

    internal SharePointRepository(ISharePointContext context)
    {
        _context = context;

        object[] attributes = typeof (T).GetCustomAttributes(typeof (SharePointListAttribute), false);

        if (!attributes.Any())
        {
            throw new Exception("No associated SharePoint list defined for " + typeof (T));
        }

        _listName = ((SharePointListAttribute) attributes[0]).ListName;
    }

    public void Add(T entity)
    {
        throw new NotImplementedException();
    }

    public void Delete(int id)
    {
        throw new NotImplementedException();
    }

    public IEnumerable<T> Find(Expression<Func<T, bool>> filter)
    {
        throw new NotImplementedException();
    }

    public void Update(int id, T entity)
    {
        throw new NotImplementedException();
    }
} 
```

**集成控制器：**

```
public class IntegrationController : ApiController
{
    private readonly IRepository<Integration> _repository;

    public IntegrationController(IRepository<Integration> repository)
    {
        _repository = repository;
    }

    public void Delete(Guid integrationId)
    {
        _repository.Delete(Get(integrationId).Id);
    }

    public IEnumerable<Integration> Get()
    {
        return _repository.Find();
    }

    public Integration Get(Guid integrationId)
    {
        return _repository.Find(i => i.IntegrationId == integrationId).FirstOrDefault();
    }

    public void Post([FromBody] Integration integration)
    {
        _repository.Add(integration);
    }

    public void Put(Guid integrationId, [FromBody] Integration integration)
    {
        _repository.Update(Get(integrationId).Id, integration);
    }
} 
```

**实体：**

```
internal interface IEntity
{
    int Id { get; }
} 
```

**实体：**

```
public abstract class Entity : IEntity
{
    protected Entity(int id)
    {
        Id = id;
    }

    public int Id { get; private set; }
} 
```

**一体化：**

```
[SharePointList("Integrations")]
public class Integration : Entity
{
    public Integration(int id) : base(id)
    {
    }

    public string ApiUrl { get; set; }

    public bool DeletionAllowed { get; set; }

    public Guid IntegrationId { get; set; }

    public string Key { get; set; }

    public string List { get; set; }

    public bool OutgoingAllowed { get; set; }

    public string RemoteWeb { get; set; }

    public string Web { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T19:12:34.103

你已经注册了你的`IRepository`错误。随着线：

```
builder.RegisterType<SharePointRepository<IEntity>>().As<IRepository<IEntity>>(); 
```

你告诉 Autofac，每当有人要求`IRepository<IEntity>`给他们 a`SharePointRepository<IEntity>`时，你要求的是一个具体的`IRepository<Integration>`，所以你得到一个例外。

您需要的是[Autofac 的开放通用注册功能](https://code.google.com/p/autofac/wiki/OpenGenerics)。因此，将您的注册更改为：

```
builder.RegisterGeneric(typeof(SharePointRepository<>))
       .As(typeof(IRepository<>)); 
```

`IRepository<Integration>`当您要求 a它会给出 a时，它会像您期望的那样工作`SharePointRepository<Integration>`。

您还有第二个不相关的问题：您`SharePointRepository`只有一个`internal`构造函数。

Autofac 默认只查找`public`构造函数，因此您可以将构造函数和类更改为，`public`或者您需要告诉 Autofac 使用以下`FindConstructorsWith`方法查找 NonPublic 构造函数：

```
builder
    .RegisterType<SharePointRepository<IEntity>>()
    .FindConstructorsWith(
       new DefaultConstructorFinder(type => 
          type.GetConstructors(BindingFlags.NonPublic | BindingFlags.Instance))) 
    .As<IRepository<IEntity>>(); 
```

# angularjs - Angularjs：如何将http响应流式传输到新窗口？

> ID：15345465
> 
> 赞同：6
> 
> 时间：2013-03-11T18:05:28.557
> 
> 标签：angularjs

如何使用 angularjs`$http`服务向服务器发布请求并将结果流式传输到新的浏览器窗口？

我的服务生成并流回我想在新的浏览器窗口中打开的 pdf 报告。到目前为止，我一直在使用`$http`发布返回 json 数据的请求。我可以用它来更新模型。这很好用。但现在我不想从响应中提取数据，只是显示在另一个窗口中。也许我应该使用较低级别的服务，而不是我一直在使用的数据交换模式？

```
$http(httpPostConfig).success(
    function(data, status, headers, config) {
        ...
    }
).error(

    function(data, status, headers, config) {
        ...
    }
); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-15T19:29:38.423

让您的服务器返回生成的 PDF 的唯一标识符，然后使用 $window 服务打开一个新窗口，其 url 指向服务器端端点，该端点基于唯一标识符（例如`$window.open('/pdf/6234556')`）返回 PDf；

# java - JAVA：从 XML 文档中提取元素

> ID：15345467
> 
> 赞同：0
> 
> 时间：2013-03-11T18:05:44.857
> 
> 标签：java, xml

我正在使用 javax.xml.parsers 浏览 XML 文档，如下所示：

`

```
<ContextElement>
    <DimensionNode>Role</DimensionNode>
    <Value>Administration</Value>
    <TailoringExpressions>
        <TailoringExpression>
            <Relation>Student</Relation>
            <ProjAtt>
                <Attribute>Matr</Attribute>
                <Attribute>SName</Attribute>
                <Attribute>SSurname</Attribute>
                <Attribute>SDateOfBirth</Attribute>
                <Attribute>SEmail</Attribute>
                <Attribute>SAddress</Attribute>
            </ProjAtt>
            <Condition/>
            <SemiJoinRel/>
            <SemiJoinOn/>
            <SemiJoinCond/>
        </TailoringExpression>
    </TailoringExpressions>
</ContextElement>
<ContextElement>
    <DimensionNode>Deadline</DimensionNode>
    <Value>Lost</Value>
    <TailoringExpressions>
        <TailoringExpression>
            <Relation>Deadline</Relation>
            <ProjAtt>
                <Attribute>IdDeadline</Attribute>
                <Attribute>Student</Attribute>                  
                <Attribute>DeadlineDate</Attribute>
                <Attribute>Description</Attribute>
                <Attribute>IsMet</Attribute>
            </ProjAtt>
            <Condition>DeadlineDate LT CurrentDate AND IsMet=False</Condition>
            <SemiJoinRel/>
            <SemiJoinOn/>
            <SemiJoinCond/>
        </TailoringExpression>
    </TailoringExpressions>
</ContextElement> 
```

`

我有一个问题，因为我需要提取对象/节点 ContextElement，它作为 DimensionNode 的值为“Role”，作为 Value 的值为“Administration”，我无法编写工作代码！有人可以告诉我该怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:08:14.663

我认为提取值的最佳方法是使用 xpath：

```
XPath xpath = XPathFactory.newInstance().newXPath();
String expression = "/widgets/widget";
InputSource inputSource = new InputSource("widgets.xml");
NodeSet nodes = (NodeSet) xpath.evaluate(expression, inputSource, XPathConstants.NODESET); 
```

有关更多信息，请查看[oracle 文档](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/xpath/package-summary.html)。

# stanford-nlp - 加载 XML 作为斯坦福 CoreNLP 的注释？

> ID：15345468
> 
> 赞同：0
> 
> 时间：2013-03-11T18:05:48.277
> 
> 标签：stanford-nlp

有很多关于获取注释并将其保存到 XML 的信息。是否可以反序列化，即将 XML 加载到 Annotation 中？例如，我的用例是：我想进行像句子拆分这样的廉价预处理，然后决定进行更昂贵的解析，并且我希望正确保留原始文档的文本偏移量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:50:59.000

```
-  -  -  -  -  转发消息  -  -  -  -  - 
来自：约翰鲍尔
日期：2013 年 3 月 13 日，星期三，凌晨 1:52
主题： Re: [java-nlp-user] XML 可以反序列化为 CoreMap 等结构吗？
致：布伦丹·奥康纳
抄送：“java-nlp-user@lists.stanford.edu”

不，没有反序列化 XML 输出的代码。
不过，我们总是对用户扩展感兴趣 :)

约翰

```

# php - 获得在线网页游戏的分析

> ID：15345470
> 
> 赞同：0
> 
> 时间：2013-03-11T18:05:56.917
> 
> 标签：php, jquery, ajax, codeigniter

我在 jquery 中创建了一个简单的乒乓球游戏。我已经托管在服务器上供用户玩游戏。现在我要做的是分析比赛的统计数据。基本上我想要做的是记录用户完成游戏的时间并将它们存储在数据库中并定期执行分析，如平均完成时间等。我卡住的地方是如何控制执行javascript并启动一个计时器来记录游戏完成所需的时间并在游戏结束时传递它？

还是我应该在游戏本身中添加一个计时器来记录时间，然后在完成后将数据传递到服务器并更新数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:09:26.510

我不会将计时器添加到 javascript，因为它可以由用户操作。我会使用 AJAX 调用来注册游戏的开始，该脚本将开始时间放入该游戏的数据库中，然后当游戏完成时，再进行一次 AJAX 调用来标记结束时间。

# mysql - SQL 查询返回错误值

> ID：15345474
> 
> 赞同：-1
> 
> 时间：2013-03-11T18:06:06.130
> 
> 标签：mysql, sql

我正在研究过滤器搜索，我可以组成一个查询，但它的 AND 部分没有返回正确的值，它为 gpa 返回正确的结果，但它没有为学位检查提供正确的结果，因为它返回所有记录不适用这里的“BSCS”过滤器是查询代码：

```
SELECT *
FROM education
WHERE gpa >= 2.10
OR gpa =0
AND degree = 'BSCS'
OR degree = NULL 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T18:07:42.553

看起来您需要添加一些括号：

```
SELECT *
FROM education
WHERE (gpa >= 2.10 OR gpa =0)
AND (degree = 'BSCS' OR degree is NULL) 
```

如果要扩展该`WHERE`子句，则可以使用：

```
SELECT *
FROM education
WHERE 
(
  (gpa >= 2.10 OR gpa =0)
  AND (degree = 'BSCS' OR degree is NULL)
)
OR
(
  (gpa is null or gpa ='')
  or (degree is null or degree = '')
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:10:22.367

试试下面的代码：

使用 And/OR 条件时，请务必加上括号以避免混淆。检查字段是否为空的最佳方法是`WHERE myField IS NULL`

```
SELECT *
FROM education
WHERE (gpa >= 2.10 OR gpa =0 )
AND (degree = 'BSCS' OR degree is NULL) 
```

# jboss - JBoss eap 6 (as 7) - 2 个具有相同包和名称的不同类

> ID：15345477
> 
> 赞同：2
> 
> 时间：2013-03-11T18:06:18.540
> 
> 标签：jboss, classloader

我遇到了第 3 方开发人员的问题。他们提供了许多 jars，不幸的是，在 2 个不同的 jars 中，他们有一个类的不同实现（相同的名称，相同的包）。

我们使用单个 war 文件进行部署，其中两个 jar（以及许多其他 jar）一起打包在 web-inf/lib 目录中，不幸的是，这两个 jar 都需要。

有没有办法在 JBoss eap 6 中保证 a.jar 中的类在 b.jar 中的类之前加载？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-07T17:09:05.473

您可以[在此链接](https://docs.jboss.org/author/display/AS7/Class+Loading+in+AS7)中找到有关 JBoss 上的类加载的所有答案。但从现在开始，我建议您阅读“JBoss 部署结构文件”部分

使用“jboss-deployment-structure.xml”JBoss 特定部署描述符，您可以以细粒度的方式控制类加载。它应该放在顶层部署中，在 META-INF（或用于 Web 部署的 WEB-INF）中。它可以执行以下操作：

`Prevent automatic dependencies from being added`

`Add additional dependencies`

`Define additional modules`

`Change an EAR deployments isolated class loading behaviour`

`Add additional resource roots to a module`

# c++ - 在 VC++ 6 中销毁 MDI 子窗口

> ID：15345478
> 
> 赞同：0
> 
> 时间：2013-03-11T18:06:27.867
> 
> 标签：c++

我有一个子窗口，在 CMainFrame 中声明：

```
CMDIChildWnd pMyMDI = new CMDIChildWnd;
pMyMDI->Create(NULL, ..., ..., ..., this);

.... some codes....

if (pMyMDI != NULL)
{
   pMyMDI->DestroyWindow();
   pMyMDI = NULL
} 
```

当我尝试使用诸如“无效句柄”之类的消息来销毁窗口时，它总是会出错。我应该如何拿到把手并安全地销毁这个窗口？

# jquery - JQuery - 未调用自动完成时的选择功能？

> ID：15345485
> 
> 赞同：0
> 
> 时间：2013-03-11T18:06:41.183
> 
> 标签：jquery, autocomplete

我有以下代码将自动完成添加到我的文本框，自动完成显示并且一切正常，但是当用户选择一个项目时，选择回调不会被调用？有什么解决办法吗？

```
$(function() {

$("#txtItem").autocomplete({
    minLength: 1,
    source: function (request, response) {
        $.ajax({
            url: "/Correct url here",
            dataType: "json",
            data: {
                term: request.term
            },
            success: function (data) {
                response($.map(data, function (item) {
                    return {
                        label: item.Name,
                        value: item.Name
                    }
                }))
            },
            select: function (event, ui) {
                alert("sdfsdf");
                //$("#txtItemId").val(ui.item.value.ItemId);
            }
        })
    }
})

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:12:03.280

将代码重写为：

```
$(function() {

$("#txtItem").autocomplete({
    minLength: 1,
    source: function (request, response) {
        $.ajax({
            url: "/Correct url here",
            dataType: "json",
            data: {
                term: request.term
            },
            success: function (data) {
                response($.map(data, function (item) {
                    return {
                        label: item.Name,
                        value: item.Name
                    }
                }))
            }            
        })
    },
    select: function (event, ui) {
        alert("sdfsdf");
        //$("#txtItemId").val(ui.item.value.ItemId);
    }
})

} 
```

让我知道它是否有效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-08T17:52:59.393

```
$(function() {

$("#txtItem").autocomplete({
minLength: 1,
source: function (request, response) {
    $.ajax({
        url: "/Correct url here",
        dataType: "json",
        data: {
            term: request.term
        },
        success: function (data) {
            response($.map(data, function (item) {
                return {
                    label: item.Name,
                    ItemId: item.ItemId//this is will put item id in memory
                }
            }))
        }            
    })
},//this is after the source property select is an auto complete property many examples screw this up and it is in side the ajax block of code
select: function (event, ui) {
    alert("sdfsdf");
    //$("#txtItemId").val(ui.item.value.ItemId);
  }
  })} 
```

这是一个工作示例[http://plnkr.co/edit/RbuRDh1xRIwyO1QamvCe?p=preview](http://plnkr.co/edit/RbuRDh1xRIwyO1QamvCe?p=preview)

# jquery - jQuery Chosen 将 div 内容移动到另一个 div

> ID：15345486
> 
> 赞同：1
> 
> 时间：2013-03-11T18:06:44.460
> 
> 标签：jquery, jquery-chosen

我使用**jQuery Chosen**插件，当用户在它附近的**复选框**上时，我试图将完整的**Div 内容**移动到另一个 div 。

 **问题是，当我单击复选框时，div 没有正确呈现，它丢失了选择的信息，结果很丑。

我拥有的 HTML：

```
Div A:<br />
<div id="divA">
</div>

Div B:<br />
<div id="divB">
    <div>
        <input type="checkbox" id="chkChosen" value="1" />&nbsp;
        <select data-placeholder="Testing" id="selectChosen" class="chzn-select" multiple="multiple" style="width:350px;">
            <option value="A">Option A</option>
            <option value="B">Option B</option>
            <option value="C">Option C</option>
        </select>
    </div>
</div> 
```

Javascript代码：

```
$("#selectChosen").chosen();

$('#chkChosen').change(function () {
    if ($(this).prop('checked')) {
        $('#divB div').hide().appendTo('#divA').fadeIn('fast');
    } else {
        $('#divA div').hide().appendTo('#divB').fadeIn('fast');
    }
}); 
```

我创建了一个带有**工作示例**（正常选择）和**问题**（jQuery 选择）的 jsFiddle：http: [//jsfiddle.net/Moonlight/fRHhh/1/](http://jsfiddle.net/Moonlight/fRHhh/1/)

怎么了？我认为“appendTo”会复制所有内容。

**编辑**：我创建了一个我想要实现的新示例：http: [//jsfiddle.net/Moonlight/fRHhh/5/](http://jsfiddle.net/Moonlight/fRHhh/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:31:19.410

我改变了你的 jquery，现在它工作正常。您通过插件移动创建的 html，而不是使用 html 来创建“选择”。将 html 放入正确的容器后，我再次调用 .chosen，瞧。

```
 $("#selectChosen").chosen();

$('#chkChosen').live("change",function () {
    if ($(this).prop('checked')) {
        $('#divB').html("");;
        $('#divA').hide().html('\
        <input type="checkbox" checked="checked" id="chkChosen" value="1" />&nbsp;\
         <select data-placeholder="Testing" id="selectChosen" class="chzn-select" multiple="multiple" style="width:350px;">\
            <option value="A">Option A</option>\
            <option value="B">Option B</option>\
            <option value="C">Option C</option>\
        </select>').fadeIn('fast');
    } else {
        $('#divA').html("");
        $('#divB').hide().html('\
        <input type="checkbox" id="chkChosen" value="1" />&nbsp;\
         <select data-placeholder="Testing" id="selectChosen" class="chzn-select" multiple="multiple" style="width:350px;">\
            <option value="A">Option A</option>\
            <option value="B">Option B</option>\
            <option value="C">Option C</option>\
        </select>').fadeIn('fast');         
    }

      $("#selectChosen").chosen();
});

$('#chkNormal').change(function () {
    if ($(this).prop('checked')) {
        $('#divD div').hide().appendTo('#divC').fadeIn('fast');
    } else {
        $('#divC div').hide().appendTo('#divD').fadeIn('fast');
    }
}); 
```**

# ios - 在静态 iOS 库中重写符号

> ID：15345491
> 
> 赞同：5
> 
> 时间：2013-03-11T18:06:57.507
> 
> 标签：ios, xcode, static-linking

我正在开发一个链接多个静态库的 iOS 应用程序。挑战在于，这些链接库定义了具有不同实现的相同方法名称。奇怪的是，我没有收到任何`duplicate symbol definition`错误；但是，毫不奇怪，我最终只能访问该方法的一种实现。

更清楚地说，假设我有 libA 和 libB，它们都定义了一个名为 func1() 的全局 C 方法

当我链接 libA 和 libB 并调用 func1() 时，它解析为 libA 或 libB 的实现，而没有任何编译警告。但是，我需要能够分别访问 libA 的 func1() 和 libB 的 func1()。

[有一个类似的 SO 帖子](https://stackoverflow.com/questions/6940384/how-to-deal-with-symbol-collisions-between-statically-linked-libraries/6940389#6940389)解释了如何在 C 中完成它（通过符号重命名），但不幸的是，正如我发现的那样，该`objcopy`工具不适用于 ARM 架构（因此是 iPhone）。

（我会将它提交到 App Store，因此，动态链接不是一个选项）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T19:47:31.863

看来你很幸运 - 你仍然可以用 ARM 二进制格式重命名符号，它只是比`objcopy`方法更 hacky......

注意：这只是进行了最低限度的测试，我强烈建议您在尝试之前**备份所有有问题的库！**

另请注意，这仅适用于未使用 C++ 编译器编译的文件！如果在这些文件上使用了 C++ 编译器，这**将失败。**

1.  首先，你需要一个像样的十六进制编辑器，在这个例子中，我将使用[Hex Fiend](http://ridiculousfish.com/hexfiend/)。
2.  接下来，您将打开您的库的副本，我们将其命名为`lib1-renamed.a`，并使用它执行以下操作：

    *   找到您要重命名的符号的名称。可以使用该`nm`工具找到它，或者，如果您知道标题名称，则应该进行设置。

    *   接下来，您将使用 hex fiend，并以文本替换旧名称（在本例中为`foo`），并给它一个新名称（在本例中为`bar`）。这些名称*必须*具有相同的长度，否则会破坏二进制文件的偏移量！

        ^(*注意*：如果有多个函数中包含`foo`'s 的名字，你可能会遇到问题。)

3.  现在，您必须编辑您更改的库的标题，以使用新的函数名称 ( `bar`) 而不是旧的。

如果您正确完成了上述三个简单的^(†</sup> 步骤，您现在应该能够成功编译和链接这两个文件，并调用这两个实现。)

如果您尝试使用通用二进制文件（例如模拟器上的一个）来执行此操作，您最好使用`lipo`分离两个二进制文件，使用`objcopy`i386/x64 二进制文件，然后使用我的方法ARM 二进制文件，然后`lipo`将其重新组合在一起。

^(†：不保证简单性，也不包括在 Richard J. Ross III 超级保修范围内。有关超级保修的更多信息，请立即致电 1-800-FREE-WARRANTY。现在是 1-800 免费保修！)

# ruby-on-rails - 太阳黑子搜索has_one关联，其他模型没有外键

> ID：15345492
> 
> 赞同：0
> 
> 时间：2013-03-11T18:07:02.480
> 
> 标签：ruby-on-rails, sunspot, sunspot-rails

我正在使用 Sunspot Solr 搜索事件，每个事件都有一个 group_id 引用一个 Group 对象（多个事件可以有同一个组）。如果用户搜索组名，我想找到正确的事件。

在可搜索块中尝试的解决方案

```
string :events_group_name do
  group.map(&:name)
end 
```

错误

SQLite3::SQLException: 没有这样的列：groups.event_id: SELECT "groups".* FROM "groups" WHERE "groups"."event_id" = 3 LIMIT 1

问题是 Group 中没有 event_id，那么我怎样才能让它工作呢？解决方法是将组名保存为 Event 对象中的一列，但肯定有更好的方法。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:04:47.700

我对太阳黑子一无所知，但我相信你的模型映射不正确。如果您有这样的关联：

> 1 组 -> N 个事件

您应该在模型中使用 a`has_many`和 a `belongs_to`。`has_one`仅与关联 1 到 1 一起使用。在您的情况下：

```
class Group
  has_many :events
  #...
end

class Event
  belongs_to :group
  #...
end 
```

Rails 指南有一篇关于 Active Record 关联示例的[好文章。](http://guides.rubyonrails.org/association_basics.html)你可以看看它。

# javascript - Onclick 刷新然后 href 使用相同的点击？

> ID：15345500
> 
> 赞同：2
> 
> 时间：2013-03-11T18:07:58.967
> 
> 标签：javascript, html

我需要一点帮助。我在我的网站上使用切换类来隐藏 div 和页面中间的 div 疯狂。首先是网站[http://gregedisonproductions.com](http://gregedisonproductions.com)

第一个是如果您最终单击某些东西，尤其是在左侧栏上它们不会切换，更大的问题是，如果我从左侧边栏观看视频并播放另一个视频，它会切换但音频仍在播放。

我在想如果用户点击任何东西，它会刷新页面，然后执行 href 命令。

任何人都可以在这方面帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T18:18:50.730

如果你想用href重新加载页面，你可以试试这个

```
<a href="#" onClick="window.location.reload();return false;">Reload</a> 
```

您的问题虽然涉及这样一个事实，即当您单击另一个视频时，它不会停止原始视频；它只是隐藏它。Youtube 有一个[API](https://developers.google.com/youtube/js_api_reference)，可以让你通过 javascript 停止视频。我相信要暂停视频，您可以使用 API 执行[pauseVideo](https://developers.google.com/youtube/js_api_reference#pauseVideo)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:19:05.667

如果您想重定向 URL，只需将其添加到您的 onclick 事件中，使用 PHP：

```
header("Location: http://yourpage.com/"); // add your URL  
exit; 
```

使用 Javascrip：

```
window.parent.location = "http://yourpage.com/"; 
```

# objective-c - 使用 id 或指向类名的指针作为将返回“类型化”值的类方法的返回类型的替代方法是什么？

> ID：15345501
> 
> 赞同：0
> 
> 时间：2013-03-11T18:08:03.837
> 
> 标签：objective-c

从objective-c中的类方法返回对象时，我知道可以使用结果类型代替id来返回“类型化”值。那是什么结果类型？

假设类方法如`+ (id)sharedInstance`. `id`除了将返回类的“类型化”实例的类之外，还可以使用什么来代替？

```
@interface SomeClass : NSObject
+ (something_other_than_id_or_SomeClass)sharedInstance;
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:13:20.193

```
+ (instancetype)sharedInstance; 
```

# python - 在 Google App Engine 中存储用户对象

> ID：15345502
> 
> 赞同：2
> 
> 时间：2013-03-11T18:08:07.113
> 
> 标签：python, google-app-engine, webapp2

在将 Webapp2 Auth 用户对象作为参考存储在 google 应用引擎 ndb 域实体中时，试图找出最佳实践。

我能想到的 3 种方法

```
class MyEntity(ndb.Model):
  users = ndb.UserProperty(repeated=True) 
```

或者

```
class MyEntity(ndb.Model):
  users = ndb.StringProperty(repeated=True) 
```

我将在哪里存储来自 webapp2 User 对象的用户 ID，例如

```
user.get_id() 
```

或者

```
class MyEntity(ndb.Model):
  users = ndb.KeyProperty(repeated=True) 
```

我将在哪里存储来自 webapp2 User 对象的用户密钥，例如

```
user.key 
```

我不确定这里的最佳做法是什么？特别是存储 user_id vs key 有什么好处吗？假设 UserProperty 是旧的做事方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:44:55.877

避免使用 UserProperty，而是存储 ID。

直接从源头...

```
# google/appengine/ext/ndb/model.py:1711

class UserProperty(Property):
  """A Property whose value is a User object.

  Note: this exists for backwards compatibility with existing
  datastore schemas only; we do not recommend storing User objects
  directly in the datastore, but instead recommend storing the
  user.user_id() value.
  """ 
```

# d3.js - d3 多行带标签

> ID：15345503
> 
> 赞同：0
> 
> 时间：2013-03-11T18:08:09.027
> 
> 标签：d3.js, visualization

我正在尝试在 D3 中制作具有多条线路径的时间序列折线图。我想将文本标签应用于这些路径。

我目前正在做的是使用实用程序函数`d3.svg.line`根据数据的属性（的值`plotProps`，它们是我的 json 数据中的键）制作几个元素。

```
function makeLine(prop){
         return d3.svg.line()
            .x(function(d){ return x(d.date); })
            .y(function(d){ return y(d[prop]); });

    }

var plotProps = ['registered','subscribers','total','anonymous'];

 plotProps.forEach(function(prop){
        line = makeLine(prop);
        svg.append("path")
          .datum(graph_data)
          .attr("class", "line datapath")
          .attr("d", line)
          .attr('prop',prop)
          .style('text-anchor','middle');

      svg.append('svg:text')
        .attr('class','label')
        .attr("y", "")
        .attr("x", "")
        .attr("dy", ".71em")
        .style("text-anchor", "end")
        .text('foobar');

    }); 
```

我在这里的方法感觉与 d3 的数据连接方法非常违反直觉，因为如果数据源是动态的，我的行生成不兼容。我似乎也无法让标签正确显示。大多数示例使用添加到 g 元素的标签 - 我应该将它们添加到我的案例的路径中（只是每行上方的文本）？将函数传递给我附加的文本元素的 x,y 属性在记录 args 时不会在控制台中输出任何内容。

有没有办法生成多行来允许我链接这些标签调用？我希望我已经足够清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:19:48.223

听起来您想要做的是[嵌套选择](http://bost.ocks.org/mike/nest/)。您可能需要稍微重新格式化您的数据才能做到这一点，但是您应该能够传入不同行的数组数组并相应地附加每一行。文本标签以类似的方式工作。

文本标签对您不起作用的原因可能是因为您没有设置`x`and`y`属性（或者没有将它们设置为有效值）。

# c++ - 是否可以创建一个 SYN 数据包，然后使用套接字 send() 函数传输它？

> ID：15345504
> 
> 赞同：-3
> 
> 时间：2013-03-11T18:08:10.380
> 
> 标签：c++, sockets

所以我目前正在编写一个 C++ 程序，它是一个点对点即时通讯工具。因此，当程序启动时，它会侦听指定端口上的传入连接，但也会允许用户通过输入其 IP 地址来启动与另一台主机的连接。现在，套接字*connect()*函数 AFAIK 的工作方式与*send()*函数非常相似，但它会传输一个 SYN 数据包，直到服务器以*accept()*响应或服务器拒绝连接被关闭。所以主要问题是......如果我创建一个套接字然后调用listen（）函数，如果我在同一个端口上调用connect函数，我会得到一个错误吗？如果是这样，有没有办法创建一个 SYN 数据包，然后调用*send()*函数将其传输到指定主机？该程序与客户端-服务器模型不同，因为运行该程序的任何主机都将充当客户端和服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:10:24.313

套接字可以是`listen`或`connect`。它不能两者兼得。

如果您希望每台主机既是客户端又是服务器，那么每个主机都需要两个套接字。

至少在 MacOS X 上，您在`connect(2)`手册页中尝试执行的操作有一条特定的错误消息：

> `[EOPNOTSUPP]` 因为socket正在监听，所以不允许连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T05:00:25.313

> 现在套接字 connect() 函数 AFAIK 的工作方式与 send() 函数非常相似，但它会传输一个 SYN 数据包，直到服务器以 accept() 响应或服务器拒绝连接被关闭

这是不正确的开始。`connect()`发送 SYN 没问题，但 ACK 回复来自对等 TCP 堆栈，可能早在服务器应用程序接近调用`accept()`. 这是因为监听积压队列。

所以你的动机已经很可疑了。

> 如果我创建一个套接字然后调用listen()函数，如果我在同一个端口上调用connect函数会出错吗？

是的。你不能那样做。你没有激发这个问题，但你甚至不需要这样做。您无需为正在侦听入站连接的出站连接使用相同的本地端口。

> 有没有办法创建一个 SYN 数据包，然后调用 send() 函数将其传输到指定的主机？

你可以手动发送一个 SYN，如果你能弄清楚如何创建一个原始 IP 套接字，但你不能让 TCP/IP 将它识别为 TCP 连接的一部分。同样，这与您的问题无关。

我什至不相信你实际上*有问题。*您只需要一个侦听套接字、接受的套接字和用于出站连接的套接字，所有这些都以通常的方式创建。不需要任何技巧。

# css - Htaccess mod_rewrite 阻止我的 CSS

> ID：15345505
> 
> 赞同：0
> 
> 时间：2013-03-11T18:08:12.807
> 
> 标签：css, .htaccess, mod-rewrite

让 htaccess 重写我的链接以获得更好的 seo，如下所示：

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  .*/([^/]+)/?     [NC]
RewriteCond %{REQUEST_URI}  !index\.php      [NC]
RewriteRule  .*      /index.php?cat=%1 [L,NC,QSA] 
```

重写

```
http://www.example.com/any/number/of/directories/lastDir 
```

至：

```
http://www.example.com/index.php?cat=lastDir 
```

但是我的 css 无法正常工作，当我将 htaccess 上传到服务器时，只有纯文本，没有图像和 css

尝试将基本标记添加到 html 中，但它不起作用

```
<base href="http://www.example.com/"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:15:36.557

您必须将 css 和图像排除在使用 RewriteCond 重写之外

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_URI} !\.(?:css|png|jpe?g|gif)$ [NC,OR]
RewriteCond %{REQUEST_URI} !index\.php [NC]
RewriteRule ([^/]+)/?$ /index.php?cat=$1 [QSA,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:29:15.563

尝试使用

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  .*/([^/]+)/?     [NC]
RewriteCond %{REQUEST_URI} !^(index\.php|robots\.txt|img|font|js|css|scripts) [NC]
RewriteRule  .*      /index.php?cat=%1 [L,NC,QSA] 
```

这将过滤掉某些文件类型和目录，以确保资产不会被重定向

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-25T13:54:13.680

我也遇到了这个问题并找到了解决方案。

如果您的 css / js 文件与相对路径链接，您的 RewriteRule 也会影响它们。您可以通过使用根目录中的路径来避免这种情况，而不是编写 RewriteCond。换句话说：

```
<link type="text/css" rel="stylesheet" href="css/style.css"> 
```

变成

```
<link type="text/css" rel="stylesheet" href="/css/style.css"> 
```

`css`根目录中的目录在哪里。

# javascript - javascript 中的正则表达式出现问题时无法验证

> ID：15345507
> 
> 赞同：0
> 
> 时间：2013-03-11T18:08:15.647
> 
> 标签：javascript, jquery, regex

您好，我正在尝试验证格式需要的某些表单输入。

GBR（完全正确）后跟 [1-9] 表示 1 位数字，然后 [0-9] 表示 2 位数字，然后没有其他内容。

我在一些 jquery 中使用它。

```
 jQuery(function(){
            jQuery("#P3_P_CODE").validate({
                expression: "if (VAL.match(/^\w[GBR]{1,3}[1-9]{1,1}\d[0-9]{1,1}$/)) return true; else return false;",
                message: "Should be a valid Project format"
            });
        }); 
```

意思是

```
/^\w[GBR]{1,3}[1-9]{1,1}\d[0-9]{1,1}$/ 
```

是我的正则表达式。

我遇到的问题是，无论我在输入框中输入什么内容，我仍然会收到一条错误消息，这意味着我的正则表达式一定是不正确的。

我在我的 REGEXP 中尝试了几种不同的组合，但均无济于事。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:14:55.293

```
/^GBR[1-9]\d\d$/ 
```

`[GBR]`表示其中一个字符。

# c# - 验证 ---> ' <--- （单引号）c# 中的异常（防止 SQL 注入）

> ID：15345509
> 
> 赞同：0
> 
> 时间：2013-03-11T18:08:16.653
> 
> 标签：c#, asp.net, regex, validation, sql-injection

嗨，我想知道如何通过捕获 ` 来停止简单的 SQL 注入

> “未闭合的引号” ---> ' <--- 错误

` 当用户在 ASP.NET C# 中的文本框中输入虚假数据时，我想知道是否有一个正则表达式可以修改以捕获除字母表之外的所有字符，因为我需要验证一个只接受字母表的搜索框

> `if a person enters a ---> ' <---`像这样的引号

整个程序因服务器端错误而崩溃

如果有人知道一个可以捕捉到这一点的简单表达式，那就太好了

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T06:59:07.650

我将重新发布 AbZy 的原始评论：

> 使用参数化查询

您回复：

> 抱歉，我无能为力，因为我正在处理一段复杂的代码，我可以做很多事情来进行更改，这就是为什么我问是否有任何其他方法可以捕获异常，而不是经历每一个变化再次查询，这将需要几天的时间:(

这不是避免做这项工作的充分理由，除非这是您打算很快丢弃的应用程序。

如果您（或原作者）编写了大量易受 SQL 注入攻击的不良代码，您确实需要一段时间才能正确修复。这并不意味着您应该尝试通过检测“错误”输入来修补它。迟早有人会需要包含撇号（例如，包含诸如“O'Neill”之类的名字）——此时您将不得不做更多的工作。那时你可能会说“好吧，我不会*检测*到撇号 - 我会*避开它*” - 这将需要你一段时间才能“大部分正确”并且你最终仍然会得到一个几乎可以肯定易受攻击的系统攻击，但以更微妙的方式。

使用参数化查询是解决此问题*的方法。*任何时候你试图走捷径来避免正确解决问题都是浪费时间。咬紧牙关，现在就去做。也许您需要“关闭工具”并且在解决此问题之前什么都不做 - 或者您可以每天选择一个查询来修复，同时继续使用其他功能。无论哪种方式，我认为您不应该再花时间回避这个问题。

在您回应说您*无法*继续正确解决问题之前，请弄清楚是什么阻止了这种情况，以及如何消除这些障碍。您的管理层是否意识到当前的风险（当然，不仅仅是服务器崩溃）？问题是你觉得你没有时间致力于解决它，还是其他一些障碍？是政治的还是技术的？再次，我敦促您考虑该应用程序的长期利益。我见过*很多*情况，人们做了一个短期的“hacky”修复并后悔 - 但我不记得曾经看到有人后悔为仍然有很长一段时间的代码做正确的事情，痛苦的它可以在短期内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T10:01:06.230

正则表达式`[A-Za-z]+`匹配从 A 到 Z（大写或小写）的一个或多个字符。您可以拒绝与此正则表达式不匹配的文本。

如果要查找所有非字母字符，请使用`[^A-Za-z]`匹配任何出现的非字母字符的正则表达式。`Regex.Matches(inputString,"[^A-Za-z]")`给出 a `MatchCollection`，其中的每一个都`Match`将是一个非字母字符。

[A-Za-z] 是一个字符类，允许任何字母并`^`在之后立即添加`[`将匹配除字符类中指定的字符之外的任何字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T18:23:46.340

`using System.Text.RegularExpressions;`

正则表达式模式（仅按字母顺序）：`(?<=\[)[A-Za-z]+(?=\])`

采用：

`var matches = Regex.Matches(input, @"(?<=\[)[A-Za-z]+(?=\])");`

**编辑：**是的，您应该使用参数化查询，但如果您想“实时”捕获其他字符，只需准备一个`TextChanged`事件：

```
private void textBox1_TextChanged(object sender, EventArgs e)
    {
        Match matches = Regex.Matches(input, @"(?<=\[)[A-Za-z]+(?=\])")
        if(!matches.Success)
        {
        MessageBox.Show("Invalid input.", Text, MessageBoxButtons.OK, MessageBoxIcon.Error);
        textBox1.Text = "";
        }
    } 
```

因此，如果一种类型的非字母字符会立即收到错误消息并且正在清除文本框。

![在此处输入图像描述](../Images/12a06f68cbc383d0cfe36eedcfe26de8.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T16:05:08.083

这将在我的应用程序中多次使用
**它是 c# WPF 测试的**

```
 private void textBox1_TextChanged(object sender, TextChangedEventArgs e)
    {
        var tb = sender as TextBox;
        //allowed char's are 0-9, a-z, A-Z, germanChars, '-' and as extra the {0,40} part where you are able to define the Min and Max Char's
        var matches = Regex.Matches(tb.Text, @"^[0-9a-zA-ZäöüßÄÖÜß''-'\s]{0,40}$");
        if (!(matches.Count > 0))
        {
            MessageBox.Show("Invalid input.", "Text", MessageBoxButton.OK, MessageBoxImage.Error);
            textBox1.Text = "";
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T18:51:43.497

您始终可以从输入中删除不必要的字符，只留下您允许的字符。我创建了一个简单的类，其中包含在我的一个应用程序中使用的几种方法。

```
public static string ToLettersAndDigits(this string text)
{
    StringBuilder sb = new StringBuilder();

    foreach (char c in text)
        if (char.IsLetterOrDigit(c) || char.IsWhiteSpace(c))
            sb.Append(c);

    return sb.ToString().Trim();
}

public static string ToLetters(this string text)
{
    StringBuilder sb = new StringBuilder();

    foreach (char c in text)
        if (char.IsLetter(c) || char.IsWhiteSpace(c))
            sb.Append(c);

    return sb.ToString().Trim();
}

public static string ToDigits(this string text)
{
    StringBuilder sb = new StringBuilder();

    foreach (char c in text)
        if (char.IsDigit(c))
            sb.Append(c);

    return sb.ToString().Trim();
} 
```

它检查每个字符的有效输入，如果无效，则不会将其添加到 StringBuilder。在“名称”之类的字段上可能是最好的，在这些字段中您没有数以千计的字符。一旦你上了这门课，你就可以简单地写`resultString = yourString.ToLetters()`了，你最终只会得到字母。不是最优雅的解决方案，但它有效！

编辑：您还可以添加标点符号，

```
foreach (char c in text)
        if (char.IsLetterOrDigit(c) || char.IsWhiteSpace(c) || c == '.' || c == ',' || c == '!')
            sb.Append(c); 
```

# objective-c - 正确使用窗口

> ID：15345510
> 
> 赞同：0
> 
> 时间：2013-03-11T18:08:17.757
> 
> 标签：objective-c, cocoa

我正在开发我的第一个 Cocoa Mac OS X 程序，并且想知道显示窗口的最佳方法。

我将`AppController`/`MainMenu.xib`作为主启动窗口，但 MainMenu.xib 窗口未选中**Visible At Launch**。我这样做是因为在应用程序加载时我正在检查他们是否已登录。如果没有，我想显示`Login.xib`窗口而不是`MainMenu.xib`. 登录后，我会打开`MainMenu.xib`窗口并关闭`LoginController`我在`- (void)applicationDidFinishLaunching:(NSNotification *)aNotification`方法中有这个。

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    NSLog(@"app delegate");
    [[NSUserDefaults standardUserDefaults] registerDefaults:[NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Defaults" ofType:@"plist"]]];
    BOOL didAuth = NO;
    GTMOAuth2Authentication *auth = [GTMClasses authForService];
    if (auth) {
        didAuth = [GTMOAuth2WindowController authorizeFromKeychainForName:kKeychainName authentication:auth];
    }

    if (didAuth) {
        [[DataClass sharedInstance] setIsSignedIn:YES];
        NSLog(@"Already signed in %@", auth);
        NSLog(@"Window: %@", self.window);
        // SHOW MainMenu.xib here
    } else {
        NSLog(@"Not signed in %@", auth);
        loginController = [[LoginController alloc] initWithWindowNibName:@"Login" owner:self];
        [[loginController window] makeKeyAndOrderFront:self];
    }
} 
```

1.  我看到 AppController`awakeFromNib`在`applicationDidFinishLoadingWithOptions`. 最好把那个代码放在我的`awakeFromNib`?
2.  如果没有，从 AppDelegate 打开 MainMenu.xib 窗口的最佳方法是什么？
3.  如果你有更好的方法，那会是什么？

PS：AppController 是的子类，`NSObject`所以我无权访问`windowDidLoad`或`windowWillLoad`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:19:08.157

`awakeFromNib`是第一个被执行的方法。

也可以使用`alloc`or`init`方法。

您可以将您的登录验证码放在那里，没有任何问题。

您一定已经了解了应用程序的生命周期，以及加载哪些方法的方式和时间。

![在此处输入图像描述](../Images/dc6f4e92105c1a8610f4754fe225cdad.png)

# youtube-api - 数据 API 忽略传递的参数/标签

> ID：15345511
> 
> 赞同：1
> 
> 时间：2013-03-11T18:08:20.000
> 
> 标签：youtube-api

我们有一个应用程序通过传递一系列标签来调用 YouTube。然后，它获取这些响应并将它们传递给各种客户端应用程序（网站、移动应用程序），以显示带有分类视频的 UI。以下是我们向 YouTube 提出的示例（但不是实际）请求：

> [https://gdata.youtube.com/feeds/api/videos/-/equipment/remstar-se%7Cgel-blue%7Cresistance-control%7Caccessories?author=philipsrespironics&alt=json&v=2&max-results=50](https://gdata.youtube.com/feeds/api/videos/-/equipment/remstar-se%7Cgel-blue%7Cresistance-control%7Caccessories?author=philipsrespironics&alt=json&v=2&max-results=50)

在这种情况下，它有时会按预期返回结果，而另一些则完全忽略了一些标签以及作者参数，我们收到了 1000 多个结果，不受作者的限制，似乎只针对我们传递的一些标签。这是非常随机的。这在星期五上午第一次被注意到。在此之前，该应用程序运行良好数月。

是否有任何事情会导致 YouTube 结束，如果是，我们如何解决？

# java - Java 代码简单数学

> ID：15345512
> 
> 赞同：0
> 
> 时间：2013-03-11T18:08:22.550
> 
> 标签：java, math

我被困在下面代码 3 的解决方案上。我需要插入一个简单的数学问题，在翻阅我的书和课堂上的示例视频后，我终生无法弄清楚这一点。我想让程序问一个问题，“8 的 2 次幂的答案是什么”，答案是“64”。有人愿意帮助我吗？如果有人能让我开始，我可以提出另外两个问题！非常感谢！！金

```
import java.util.Scanner;  //allows for input

public class ASG03 {

    public static void main(String[] args) {
        Scanner input = new Scanner(System.in); //allows for input

        //Step 1 - Declare and initialize variables
        String candidateName = "";
        String responseE = "";

        int option = 0;
        double score = 0;

        if (score <=85)
            responseE = "Definite";
        else if (score <=70)
            responseE = "Likely";
        else if (score <=60)
            responseE = "Maybe";
        else
            responseE = "No";

        String responseI = "";

        if (score <=85)
            responseI = "Yes";
        else if (score <=70)
            responseI = "Yes";
        else if (score <=60)
            responseI = "Yes";
        else
            responseI = "No";

        //Step 2 -  Process input

        System.out.println("Enter candidate name: ");
        candidateName = input.nextLine();
        System.out.println("Enter score 0 -100: ");
        score = input.nextDouble();
        System.out.println();

        System.out.println("Enter 1 to set employment category ");
        System.out.println("Enter 2 to set interview possibility ");
        System.out.println("Enter 3 to view a sample test question ");
        System.out.println("Enter option now -> ");
        option = input.nextInt();

        //Step 3 and 4 - Process calculations and output
        switch(option)
        {
        case 1:
            System.out.println("You are now setting the employment category...");
            //can use nested if else
            System.out.println("Employment category =  " + responseE);

            break;

        case 2:
            System.out.println("You are now setting the interview possibilities...");
            System.out.println("Interview possibilites = " + responseI);

            break;

        case 3:
            System.out.println("You are now viewing a sample test question...");
            //use random and power from Math library

        default:

        }//end of switch

    }//end of main

}//end of class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:16:27.020

当您运行程序时，`main`您`responseE`将始终将其设置为*"Definite"*。因为：

查看您的代码流程：

```
double score = 0;
if (score <=85)
  responseE = "Definite";
else if (score <=70)
...
... 
```

第一个`if`总是满足的，所以它总是会被执行。

此外，即使您`responseE`在阅读分数后进行评估，您也需要再次考虑如何编写您的条件。请注意，如果`score <= 85`那么`score <= 70`...。

你应该有这样的东西：

**切换**前：

```
responseE = getResponse(score); 
```

这是方法`getResponse`：

```
private static String getResponse(double score) {
  if (score <=85 && score >70)
    return "Definite";
  else if (score <=70 && score > 60)
    return "Likely";
  else if (score <=60 && score > 40) //For example..
    return "Maybe";
  return "No";
} 
```

阅读输入**后**要评估的其他字段也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:14:15.763

我需要更多信息才能给你答案。看起来代码需要一个随机数生成器，但是在您的问题中您要求 8^2 或 8*8。你想要哪个？我问是因为随机数生成与硬编码数字变量有很大不同

# javascript - 将多个元素插入到 PrototypeJS 中的另一个元素中？

> ID：15345513
> 
> 赞同：1
> 
> 时间：2013-03-11T18:08:23.570
> 
> 标签：javascript, prototypejs

在 PrototypeJS 中，有没有更有效的方法将多个 Element 对象插入到一个元素中？这是我现在拥有的代码：

```
var calendar_elem = new Element('div', {
    'id': 'my_calendar'
}).insert({
    bottom: title_elem   // assume these are all Element objects
}).insert({
    bottom: days_of_week_elem
}).insert({
    bottom: month_calendar_elem
}).insert({
    bottom: footer_elem
}); 
```

索引可以`bottom`包含一个数组，还是必须只包含一个 HTML 元素/字符串？`insert`获取每个正在编辑的元素的 HTML、连接它们并将其传递给它会更有效`bottom`吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:14:59.093

Dom 操作很昂贵，因为它们会在每次更改后导致页面重绘/重排。最好将您的 HTML 构建为字符串（或在内存中），然后一次性将它们插入 DOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:14:46.447

这是我在发布问题几分钟后想到的一个解决方案：

```
[title_elem, days_of_week_elem, ...].each(function(obj)
{
    calendar_elem.insert({
        bottom: obj
    });
}); 
```

但我希望有一种内置于 PrototypeJS 中的方法来执行此操作。如果这是使代码更高效的唯一方法，请告诉我。谢谢。

# c# - 是否可以禁用隐式 ToString() 调用？

> ID：15345517
> 
> 赞同：14
> 
> 时间：2013-03-11T18:08:37.453
> 
> 标签：c#

我想知道是否有办法获得此代码的编译错误：

```
var customer = new SomeCustomerClass();
Console.WriteLine("Customer address:" + customer); 
```

所以我将被迫写这样的东西：

```
var customer = new SomeCustomerClass();
Console.WriteLine("Customer address:" + customer.FormatAddress());
Console.WriteLine("Customer accounts:" + customer.FormatAccounts()); 
```

如果“ToString”是一个接口，我可以在我的类中使用显式接口实现来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-11T18:11:06.747

无法在编译时阻止此代码。 `Object.ToString`是每个对象的公共契约的一部分，没有办法阻止它在编译时被调用。在这种特殊情况下，编译器将解析`+`to`String.Concat(object, object)`并且实现最终调用`Object.ToString`. 没有办法改变这一点。我认为你最顺利的前进道路是覆盖`ToString`并让它调用`FormatAddress`

请不要`ToString`像其他一些人建议的那样更改为抛出异常。大多数.Net 期望`ToString`存在并且不抛出。更改它会对您的程序产生许多意想不到的负面影响（包括终止这些对象的调试体验）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-11T18:11:06.383

您可以在客户类中覆盖 ToString，如果需要，您可以在其中调用 FormatAddress 方法。

```
public override string ToString()
{
    return FormatAddress();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-24T21:08:38.607

大多。

通过使用[这个 Roslyn 分析器，如我的问题的](https://www.nuget.org/packages/ToStringWithoutOverrideAnalyzer/)[这个答案](https://stackoverflow.com/a/54355115/939213)所示。

如果您觉得它有用，请在此处为原始答案的贡献者投票。

# spring - 基于登录用户凭据的休眠数据源配置

> ID：15345520
> 
> 赞同：2
> 
> 时间：2013-03-11T18:08:49.860
> 
> 标签：spring, hibernate, postgresql

我正在开发一个 Java webapp，其中 Spring 3.2.1 和 Hibernate 4.1.9 绑定到 Postgres Advanced Server 后端（用于行级安全性）。我要解决的问题是如何将 webapp 登录用户绑定到 Hibernate 会话。具体来说，如果用户 A 登录，那么我希望 webapp 与数据库的连接使用 A' 凭据（只有这样我才能过滤 A 有权查看/更改的记录）。Webapp 和数据库用户在同一个 ldap 服务器上进行验证。

我的配置信息如下：

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="annotatedClasses">
        <list>
            <value>com.mycom.proj.model.A</value>
            <value>com.mycom.proj.model.B</value>
            <value>com.mycom.proj.model.C</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${db.hibernate.dialect}</prop>
            <prop key="hibernate.show_sql">false</prop>
            <prop key="hibernate.hbm2ddl.auto">validate</prop>
        </props>
    </property>
</bean> 
```

基于上述配置，dataSource 和 sessionFactory bean 是单例的。

我可以采取的一种方法是将 dataSource 和 sessionFactory 设置为“会话”范围。我犹豫要不要采用这种方法，原因如下：

a）如果数据库连接在会话范围内，那么我不能使用连接池。（我想我可能不得不忍受它） b）我担心将 sessionFactory 设置为会话范围会破坏 Hibernate 的缓存机制。

关于如何解决这个问题的任何想法/想法？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T22:50:54.500

另一种选择是将所有连接作为具有`NOINHERIT`所有用户角色成员身份的非特权用户进行。然后`SET ROLE`在运行查询之前登录用户。如果`SET ROLE`由于编程错误而失败，则伤害会最小化，因为您没有授予您正在连接的非特权用户任何权利，并且它没有继承任何权利，因此它不能做任何事情。

使用 servlet 过滤器（如果您对整个请求使用一个连接）、CDI 拦截器、连接池周围的包装器、使用连接池实现提供的钩子或各种其他选项来确保它应该很容易做到这一点总是发生。

如果您可以使用它会很好`SET SESSION AUTHORIZATION`，但这需要超级用户连接。我不建议应用程序使用超级用户连接，即使它们只是要降低其权限。一个错误可能会造成非常严重的后果。

不久前，我[在回答一个 DBA 问题时对此进行了更详细的描述](https://dba.stackexchange.com/a/25400/7788)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:48:41.327

通常连接池处理每个用户的池连接，因此您只需要一个适配器来将`getConnection()`调用重定向到`getConnection(user, passwd)`.

Spring提供了一个，见：`org.springframework.jdbc.datasource.UserCredentialsDataSourceAdapter`

`Datasource`例如，您可以在登录过滤器中的via`setCredentialsForCurrentThread()`方法上设置凭据。

# ios - UIScrollView 错误的偏移与自动布局

> ID：15345522
> 
> 赞同：40
> 
> 时间：2013-03-11T18:08:54.570
> 
> 标签：ios, uiscrollview, autolayout

我有一个相当简单的视图配置：

一个`UIViewController`，一个孩子`UIScrollView`和一个`UIImageView`在这`UIScrollView`。我将 设置为`UIImageView`足以突破可见区域的高度（即高于`1024pt`），并将`Bottom space to superview`my 的约束设置`UIImageView`为固定的正值（`20`例如）。

![项目布局](../Images/b9a1ced22ed1950a0fae4353c123983b.png)

整个设置按预期工作，图像在其父级中很好地滚动。除非当视图滚动时（滚动到视图底部效果更明显），然后消失，然后再次出现（您切换到另一个视图并回来）滚动值恢复，但内容滚动视图移动到其父视图的外部顶部。

这个不好解释，我试着画一下： ![上一段的视觉表示](../Images/036d02c4fb0796fec2dd8fd79123f2d4.png)

如果您想测试/查看源代码（或情节提要，我没有编辑任何一行代码）。我在我的github上放了一个小demo：[https ://github.com/guillaume-algis/iOSAutoLayoutScrollView](https://github.com/guillaume-algis/iOSAutoLayoutScrollView)

我确实阅读了[iOS 6 更改日志](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/index.html)和关于这个特定主题的解释，并认为这是第二个选项（纯自动布局）的正确实现，但在这种情况下，为什么`UIScrollView`行为如此不规律？我错过了什么吗？

**编辑**：这与[#12580434 uiscrollview-autolayout-issue 完全相同](https://stackoverflow.com/questions/12580434/uiscrollview-autolayout-issue)。答案只是解决方法，因为有人找到了解决此问题的正确方法，还是这是 iOS 错误？

**编辑 2**：我找到了另一种解决方法，它将滚动位置保持在用户离开它的相同状态（这是对[12580434](https://stackoverflow.com/questions/12580434/uiscrollview-autolayout-issue)接受的答案的改进）：

```
@interface GAViewController ()

@property CGPoint tempContentOffset;

@end

@implementation GAViewController

-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    self.tempContentOffset = self.mainScrollView.contentOffset;
    self.scrollView.contentOffset = CGPointZero;
}

-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    self.scrollView.contentOffset = self.tempContentOffset;
} 
```

这基本上将偏移量保存在 中`viewWillAppear`，将其重置为原点，然后恢复 中的值`viewDidAppear`。问题似乎发生在这两个调用之间，但我找不到它的起源。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-11T22:48:22.347

是的，在纯自动布局环境中 UIScrollView 发生了一些奇怪的事情。第二十次重读[iOS SDK 6.0 发行说明](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/index.html)，我发现：

> 请注意，您可以通过在视图和滚动视图的子树之外的视图（例如滚动视图的超级视图）之间创建约束，使滚动视图的子视图看起来浮动（不滚动）在其他滚动内容之上。

## 解决方案

**将您的子视图连接到外部视图。换句话说，就是嵌入了滚动视图的视图。**

由于 IB 不允许我们在 imageView 和滚动视图的子树之外的视图之间设置约束，例如滚动视图的超级视图，所以我已经在代码中完成了。

```
- (void)viewDidLoad {
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
    [self.view removeConstraints:[self.view constraints]];
    [self.scrollView removeConstraints:[self.scrollView constraints]];
    [self.imageView removeConstraints:[self.imageView constraints]];
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|[_scrollView]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(_scrollView)]];
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[_scrollView]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(_scrollView)]];
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|[_imageView(700)]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(_imageView)]];
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[_imageView(1500)]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(_imageView)]];
} 
```

和沃！有用！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-21T19:24:27.620

编辑对我不起作用。但这有效：

```
-(void)viewWillDisappear:(BOOL)animated
{
     [super viewWillDisappear:animated];

     self.tempContentOffset = self.scrollView.contentOffset;
     self.scrollView.contentOffset = CGPointZero;
}

- (void)viewDidLayoutSubviews {
     [super viewDidLayoutSubviews];
     self.scrollView.contentOffset = self.tempContentOffset;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-05T20:27:19.170

对我来说，我去了 IB，点击了包含滚动视图的视图控制器。然后我转到属性检查器 -> 视图控制器 -> 扩展边缘 -> 取消选中“顶部栏下方”和“底部栏下方”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-08T13:05:04.620

找到简单的解决方案，放

```
[self setAutomaticallyAdjustsScrollViewInsets:NO]; 
```

在您的 ViewControllers viewDidLoad 方法中

```
- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    [self setAutomaticallyAdjustsScrollViewInsets:NO];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-25T23:05:40.897

我在 UIViewController 中使用 UIScrollView 时遇到了类似的问题，顶部的额外空间在 Storyboard 中不可见。我的解决方案是取消选中 ViewController 故事板属性上的“调整滚动视图插图”：请参阅[运行时滚动视图中的答案额外空间（插图）](https://stackoverflow.com/questions/19252852/extra-space-inset-in-scroll-view-at-run-time/19254901#19254901)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-02-28T15:03:29.017

添加一个全局属性 contentOffset 并将当前的 contentOffset 保存在 viewDidDisappear 中。一旦你返回方法 viewDidLayoutSubviews 将被调用，你可以设置你的原始 contentOffset。

```
- (void)viewDidLayoutSubviews
{
    [super viewDidLayoutSubviews];
    [self.scrollView setContentOffset:self.contentOffset animated:FALSE];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
    self.contentOffset = self.scrollView.contentOffset;
    [self.scrollView setContentOffset:CGPointMake(0, 0) animated:FALSE];
} 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2013-08-27T20:43:21.280

看起来问题已经解决`dispatch_async`了`viewWillAppear:`

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    CGPoint originalContentOffset = self.scrollView.contentOffset;
    self.scrollView.contentOffset = CGPointZero;

    dispatch_async(dispatch_get_main_queue(), ^{
        self.scrollView.contentOffset = originalContentOffset;
    });
} 
```

# c++ - 将字符串推送到向量并转换为 int

> ID：15345527
> 
> 赞同：1
> 
> 时间：2013-03-11T18:09:07.283
> 
> 标签：c++, type-conversion

我想读取一串数字，然后将数字一个一个地推到一个向量中。

```
string _inValue = "12345";
vector<int> _value;

void superint::setVector()
{
for(int i=0; i < _inValue.length(); ++i)
{
    _value.push_back(_inValue[i]);
}
} 
```

我要做的是：我将 push_back `'1'`( `49`) 的 ASCII 值。我希望它具有价值`1`。

是最好的方法`_inValue[i]-48`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T18:13:12.667

您需要减去 ASCII '0' 的值：

```
_value.push_back(_inValue[i]-'0'); 
```

这比仅仅使用像 48 这样的幻数更具描述性。

# c++ - 维基百科上的线性插值代码 - 我不明白

> ID：15345528
> 
> 赞同：7
> 
> 时间：2013-03-11T18:09:12.133
> 
> 标签：c++, c, interpolation

我正在阅读以下代码（取自[此处](http://en.wikipedia.org/wiki/Linear_interpolation#C_Language_implementation_of_linear_interpolation)）

```
void linear_interpolation_CPU(float2* result, float2* data, 
                              float* x_out, int M, int N) {     
    float a;
    for(int j = 0; j < N; j++) {
        int k = floorf(x_out[j]);
        a = x_out[j] - floorf(x_out[j]);
        result[j].x = a*data[k+1].x + (-data[k].x*a + data[k].x);
        result[j].y = a*data[k+1].y + (-data[k].y*a + data[k].y);
    }   
} 
```

但我不明白。

为什么不使用计算结果 [y]

![在此处输入图像描述](../Images/b360f835bafd800acd415b42f8085cfb.png)

公式？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-11T18:24:41.363

是这样计算的。

看前两行：

```
int k = floorf(x_out[j]);
a = x_out[j] - floorf(x_out[j]); 
```

第一行定义了`x0`使用 floor 函数。这是因为本文假设样本点的晶格间距为 1，如下所示：

```
the samples are obtained on the 0,1,...,M lattice 
```

现在我们可以将第二行重写为：

```
a = x_out[j] - k; 
```

因此，第二行是`x-x0`。

现在，让我们检查一下方程：

```
result[j].y = a*data[k+1].y + (-data[k].y*a + data[k].y); 
```

`y`用、`x`和重写它，`x0`给出：

```
y = (x-x0)*data[k+1].y + (-data[k].y*(x-x0) + data[k].y); 
```

让我们重命名为`data[k+1].y`y0 ：`y1``data[k].y`

```
y = (x-x0)*y1 + (-y0*(x-x0) + y0); 
```

让我们通过拉出重新排列`x-x0`：

```
y = (x-x0)*(y1-y0) + y0; 
```

并重新排列：

```
y = y0 + (y1-y0)*(x-x0); 
```

同样，晶格间距很重要：

```
the samples are obtained on the 0,1,...,M lattice 
```

因此，`x1-x0`总是 1。如果我们把它放回去，我们得到

```
y = y0 + (y1-y0)*(x-x0)/(x1-x0); 
```

这正是您正在寻找的方程式。

诚然，代码没有写得那么明显是荒谬的。

# c++ - 递归 lambda 的 typedef

> ID：15345529
> 
> 赞同：6
> 
> 时间：2013-03-11T18:09:15.980
> 
> 标签：c++, c++11, lambda

有没有办法创建一个`typedef`这样的（y-combinator的基本“纯”实现）可以编译？

```
typedef ??? f;
[](f x){x(x);} ([](f x){x(x);}); 
```

这具有创建“递归 lambda”的效果，即通过使用第二个 lambda 来调用自身以获取对自身的引用。`x`在第一个 lambda 中是对第二个 lambda 的引用，因此`x(x)`使用对自身的引用调用第二个 lambda。此后，第二个 lambda 通过调用递归`x(x)`。这段代码在执行时应该会产生一个无限循环，直到它遇到堆栈溢出。第二个函数的更复杂的实现可以产生任意递归行为。

我已经尝试过`typedef`各种版本，`void(*)(...)`但我不相信可以成功。我的模板元编程不够强大，无法处理这种事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T18:23:07.460

这个怎么样？

```
#include <functional>
#include <iostream>

struct X
{
    template<typename F>
    X(F f) : _f(f)
    { }

    void operator () (std::function<void(X)> f)
    {
        std::cout << "Calling myself..." << std::endl;
        _f(f);
    }

    std::function<void(X)> _f;
};

int main()
{
    typedef X f;
    [](f x){x(x);} ([](f x){x(x);});
} 
```

# iphone - 如何修复“Interface Builder 文件中的未知类 RootViewController”ios6

> ID：15345535
> 
> 赞同：3
> 
> 时间：2013-03-11T18:09:26.700
> 
> 标签：iphone, ios6

我已经阅读了许多类似的帖子，但我无法得到适合我的答案。我的 AppDelegate 中有这样的开头：

```
//LOAD WINDOWS

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    [self.window makeKeyAndVisible];

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        self.initialViewController = [[InitialViewController alloc] initWithNibName:@"InitialViewController" bundle:nil];
        [self.window setRootViewController:self.initialViewController];
    } else {
        self.patternViewController = [[PatternViewController alloc] initWithNibName:@"PatternView_iPhone" bundle:nil];
        [self.window setRootViewController: self.patternViewController];

    }

    return YES; 
```

这适用于 iPad 版本，但不适用于 iPhone。我在控制台中收到这些消息：

1.  Interface Builder 文件中的未知类 RootViewController。
2.  应用程序窗口应该在应用程序启动结束时有一个根视图控制器

PatternView_iPhone xib 属于 PatternViewController 类。

在项目摘要中，我有以下设置：

![在此处输入图像描述](../Images/a069ad49b4f3c51804c1804fa5fee4e4.png)

和

![在此处输入图像描述](../Images/6c165a526772eca90c9266f1ab810f27.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T05:41:38.883

错误说在 xib 中有一个类名为**RootviewController**的对象。打开 xib/storyboard 作为源代码（右键单击并作为源代码打开）并搜索 RootviewController。找到标签的来源并找到对象并将其更改为有效对象。

# jquery - jQuery 整合和清理

> ID：15345537
> 
> 赞同：0
> 
> 时间：2013-03-11T18:09:36.233
> 
> 标签：jquery

编写一个更干净的版本的最佳方法是什么。我有一些想法，但希望在这里获得第二意见。

```
$('.screenshot1').click(function(){
    $('#screenshot1').show();
});
$('.screenshot2').click(function(){
  $('#screenshot2').show();
});
$('.screenshot3').click(function(){
  $('#screenshot3').show();   
});
$('.screenshot4').click(function(){
  $('#screenshot4').show();
});
  $('.screenshot5').click(function(){
    $('#screenshot5').show();
  });
$('.screenshot6').click(function(){
  $('#screenshot6').show();   
});
$('.screenshot7').click(function(){
  $('#screenshot7').show();   
});
$('#screenshot1, #screenshot2, #screenshot3, #screenshot4, #screenshot5, #screenshot6, #screenshot7, .modal-backdrop').click(function() {
  $('#screenshot1').hide();
  $('#screenshot2').hide();
  $('#screenshot3').hide();
  $('#screenshot4').hide();
  $('#screenshot5').hide();
  $('#screenshot6').hide();
  $('#screenshot7').hide();
}); 
```

HTML 看起来像这样：

```
<a class="screenshot1" href="#"></a>
<div id="screenshot1">
  <img src='homepage/screenshot1.jpg' alt='Screenshot 1' height='565' width='756' />
</div> 
```

ETC....

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:10:36.670

```
$("[class^=screenshot]").click(function() {
      $('[id^="screenshot"]').hide();         
      var id = this.className.match(/screenshot(\d+)/)[1];
      $('#'+id).show()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:11:26.047

我将对所有屏幕截图 ID 使用一个选择器，然后使用[each 方法](http://api.jquery.com/jQuery.each/)。编辑：PSR 的答案更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:12:48.303

I would do something like this:

html:

```
<div class="container">
    <div class="screenshot">
        <img src="image.png"/>
    </div>
</div> 
```

Apply the same class to all your screenshots:

```
$('.screenshot').click(function(){
    $(this).parent('.container'). find('.screenshot') .each(function () {
        $(this).hide();
    });
    $(this).show();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T18:31:11.190

您可以使用以下内容简化您的第一个代码块，

```
$(".screenshot1, .screenshot2, .screenshot3, .screenshot4, .screenshot5, .screenshot6, .screenshot7").click(function(){ 
       $("#" + $(this).attr("class")).show();
    }); 
```

## [演示](http://jsfiddle.net/fRHhh/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T18:26:40.833

不是 100% 确定这是否是您的意思，但我希望它有助于您找到正确的方法：

```
'use strict';
$(document).ready(function(){
    $('[class^="screenshot"]').click(function(){
        // Hide them all
        $('[id^="screenshot"]').hide();

        // Show only the clicked one
        var id_name = $(this).attr('id');
        $('#' + id_name).show();
    });
}); 
```

祝你好运！

# mongodb - 在副本集模式下连接到 Mongo

> ID：15345539
> 
> 赞同：11
> 
> 时间：2013-03-11T18:09:54.970
> 
> 标签：mongodb

我有一个运行副本集的独立 Mongo 实例。但是，我似乎无法在 Mongo shell 中连接和运行任何查询。我得到以下信息：

`error: { "$err" : "not master and slaveOk=false", "code" : 13435 }`

我这样设置 SlaveOk ：

`db.getMongo().setSlaveOk()`

..但我仍然得到一个错误：

```
error: {
"$err" : "not master or secondary; cannot currently read from this replSet member",
"code" : 13436
} 
```

我似乎无法在 Google 上找到直接答案：如何使用 mongo shell 连接到我的副本集？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-27T18:42:54.747

我遇到了同样的问题并使用解决了

```
rs.initiate() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-05T05:04:53.737

如果您要连接到副本集中不是主节点的节点，则需要明确告诉客户端您没有连接到主节点是可以的。

你可以通过调用来做到这一点

> rs.slaveOk()

然后，您可以执行查询。

请注意，当连接到从节点时，您将只能执行查询，而不能对存储库进行更改。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-11T18:52:19.223

您连接到一个既不处于辅助状态也不处于主要状态的节点。该节点可以是仲裁器，也可能是恢复模式中的辅助节点。例如，如果我有一个包含 3 个节点的副本集（其中有一个主节点、一个辅助节点和一个仲裁器），如果我已连接到仲裁器并发出查询，即使我已将 slaveOK 设置为 true，我也会收到相同的错误. shell 的命令行提示符应该指示您连接的节点处于什么状态：

```
foo:ARBITER> db.test.find()
error: {
    "$err" : "not master or secondary; cannot currently read from this replSet member",
    "code" : 13436
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-15T06:35:12.790

我也得到了错误。但是，当我尝试使用机器名称而不是“localhost”或 127.0.0.1 连接到辅助节点时，错误消失了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-31T23:01:20.607

你试过了吗：db.getMongo().setSlaveOk(true)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-04T10:28:56.110

在具有两个副本集的登台服务器上运行 aggregate() 时遇到了同样的错误。我认为您需要将读取首选项更改为“secondaryPreferred”。

只需将 .read('secondaryPreferred') 放在查询函数之后。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-30T00:05:36.063

仅当您在独立模式下运行属于副本集一部分的实例而不将其从副本集中完全删除时，才会显示此错误。例如，您在不同的端口上重新启动您的实例，但在启动它时不要删除 --repSet 选项。这会启动它，但既不是主要的也不是次要的，因此错误 *不是主要的或次要的；*

根据您最初打算执行的操作，在正确的端口上重新启动实例并使用正确的 --repSet 选项。这会将其添加到副本集中并消除此错误

如果您打算将实例作为独立运行一段时间（例如创建索引），则在没有 --repSet 选项的情况下在不同的端口上启动它

# c - 错误：取消引用指向不完整类型的指针

> ID：15345542
> 
> 赞同：2
> 
> 时间：2013-03-11T18:10:04.303
> 
> 标签：c

浏览了许多与此相关的其他 SO 帖子，但没有一个能够帮助我。所以，我定义了以下结构：

```
 typedef struct
    {
    int created;
    double data;
    int timeLeft;
    int destination;
}dataPacket;

typedef struct
{
    dataPacket *array;
    int currIndex;
    int firstIndex;
    int nextTick;
    int maxLength;
    int length;
    int stime;
    int total;

}packetBuffer;

typedef struct{
    int mac;
    struct wire *lconnection;
    struct wire *rconnection;
    int numRecieved;
    struct packetBuffer *buffer;
    int i;
    int backoff;
}node;

typedef struct{
    float length;
    float speed;
    int busy;
    struct dataPacket *currPacket;
    struct node *lnode;
    struct node *rnode;
}wire; 
```

然后我尝试使用以下功能：

```
 int sendPacket(node *n, int tick)
{
    if(n->buffer->length > 0)
    {
        if(n->backoff <= 0)
        {
            if (n->lconnection->busy != 0 || n->lconnection->busy != 0)
            {
                n->i++;
                n->backoff = (512/W * genrand()*(pow(2,n->i)-1))/TICK_LENGTH;
            }
            else
            {
                n->lconnection->busy = 1;
                n->rconnection->busy = 1;
                n->lconnection->currPacket = n->buffer[n->buffer->currIndex];
                n->rconnection->currPacket = n->buffer[n->buffer->currIndex];
            }
        }
        else
        {
            n->backoff--;
        }
    }
} 
```

每次我尝试访问缓冲区、lconnection 或 rconnection 的成员时，都会收到标题中描述的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T18:12:26.807

```
struct packetBuffer *buffer; 
```

You've defined a type `packetBuffer` (a typedef for an otherwise anonymous struct).

You haven't defined `struct packetBuffer`.

In the absence of an existing type `struct packetBuffer`, the compiler treats it as an incomplete type, assuming that you'll complete it later. The declaration

```
struct packetBuffer *buffer; 
```

is perfectly legal, but you can't dereference `buffer` unless the type `struct packetBuffer` is visible.

Just drop the `struct` keyword.

(My personal preference is to drop the `typedef` and consistently refer to struct types as `struct whatever`, but that's a matter of style and taste.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:01:41.243

以下：

`typedef struct { int x; char *y; ... } my_struct;`

为匿名结构创建标识符。为了让结构引用自身的实例，它不能是“匿名的”：

```
typedef struct my_struct {
    int x;
    char *y;
    struct my_struct *link
    ....
} my_struct_t; 
```

这意味着`my_struct_t`现在是类型`struct my_struct`，而不仅仅是匿名结构。另外，请注意`struct my_struct`可以在其自己的结构定义中使用。这对于匿名结构是不可能的。

最后一个问题是， `my_struct`in`struct my_struct`与 .in 位于不同的“命名空间”中`my_struct_t`。这有时用于简化（或混淆）代码中的内容，如下所示：

```
typedef struct my_struct {
    int x;
    char *y;
    struct my_struct *link
    ....
} my_struct; 
```

现在我可以`my_struct`在代码中的任何地方使用，而不是`struct my_struct`.

最后，您可以将 typedef 与结构定义分开以达到相同的效果：

```
struct my_struct {
    int x;
    char *y;
    struct my_struct *link;
    ....
};
typedef struct my_struct my_struct; 
```

正如 David R.Hanson 的**C 接口和实现**中所指出的，“这个定义是合法的，因为结构、联合和枚举标签占据了与变量、函数和类型名称空间分开的相同名称空间。”

# linux - 何时在 nm 中使用 --dynamic 选项

> ID：15345543
> 
> 赞同：19
> 
> 时间：2013-03-11T18:10:06.930
> 
> 标签：linux, shared-libraries, binutils

有时当我对 .so 文件（例如 libstdc++.so.6）执行 nm 时，它显示没有符号，我需要使用 nm --dynamic。但是对于其他一些 .so 文件，我可以看到没有 --dynamic 的符号。

医生说：

显示动态符号而不是普通符号。这仅对动态对象有意义，例如某些类型的共享库。

但这令人困惑……共享库需要哪些“类型”--dynamic？这是如何确定的？在编译库期间？我认为所有共享库都是动态的（我的意思是，可以在运行时动态加载），但似乎我的理解不太正确。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-11T19:40:14.240

如果您的符号没有从您的共享库中导出，很有可能它会以.`normal symbol table`而不是`dynamic symbol table`.

ELF 文件中有多种类型的符号。

*   的符号部分`Normal Symbol table`。这是仅仅`nm libabc.so`or的输出`objdump --syms libabc.so`。这些符号仅在静态链接期间使用。

*   的符号部分`Dynamic Symbol table`。这是`nm --dynamic libabc.so`or的输出`objdump --dynamic-syms libabc.so`。动态符号表是运行时链接器/加载器使用的表，它将符号绑定在引用它们的 ELF 文件和定义它们的 ELF 文件之间。也使用它`static linker`，同时将共享库与需要它的应用程序链接起来。这是有助于在`undefined symbol errors`链接期间显示所有内容的组件。

*   `Hidden symbols`- 这些是使用 标记的符号`_attribute_ ((visibility("hidden")))`。这些符号不会导出到外部，只能在库中使用。在链接步骤期间检查可见性，因此仅对共享库强制执行。默认可见性是`public`，即符号被导出，除非另有说明。可以使用 修改行为`-fvisibility=default|internal|hidden|protected`。

> 将默认的 ELF 图像符号可见性设置为指定的选项——除非在代码中被覆盖，否则所有符号都将被标记。使用此功能可以极大地改善共享对象库的链接和加载时间，生成更优化的代码，提供近乎完美的 API 导出并防止符号冲突。强烈建议您在分发的任何共享对象中使用它。尽管有命名法，但默认总是意味着公开，即；可从共享对象外部链接。protected 和 internal 在实际使用中毫无用处，因此唯一的其他常用选项将被隐藏。如果未指定 -fvisibility，则默认为 default，即公开每个符号——这会导致与 GCC 先前版本相同的行为。
> 
> [在http://gcc.gnu.org/wiki/Visibility](http://gcc.gnu.org/wiki/Visibility)中概述了这些技术、它们的好处以及如何使用它们。

要回答您的问题，您何时会使用`--dynamic`选项`nm`，这将是您想要列出共享库导出的所有符号以及引用它们的 ELF 图像唯一可用的符号时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-23T15:41:36.257

如果共享库被剥离并因此仅包含动态符号表，则需要在共享库上使用`--dynamic`or选项。`-D`

您可能希望将此选项用于其他共享库以显式显示动态符号表，因为这是动态链接器查询的表。

该`file`实用程序指示共享库是否被剥离。例子：

```
$ file /usr/lib64/libcrypt-nss-2.26.so
[..] ELF 64-bit LSB shared object, x86-64 [..], not stripped
$ file /usr/lib64/libxml2.so.2.9.7
[..] ELF 64-bit LSB shared object, x86-64 [..], stripped 
```

不同符号表如何包含不同符号的示例：

```
$ nm -D /usr/lib64/libcrypt-nss-2.26.so | wc -l
39
$ nm /usr/lib64/libcrypt-nss-2.26.so | wc -l 
112 
```

# iphone - 我希望我的控件在出现键盘时保持不变

> ID：15345544
> 
> 赞同：0
> 
> 时间：2013-03-11T18:10:09.100
> 
> 标签：iphone, ios, ipad

似乎应该有一个简单的答案，但我的搜索没有找到答案。

我在 UIViewController 中有一些控件，它们位于另一个 UIViewController 中的容器视图中。当用户点击其中一个 UITextField 时，容器视图控制器中的所有控件都会向上移动以适应当前的键盘。我不想要这个动作。我只是想让他们留在原地。我已经尝试了很多明显的解决方案，但没有一个是令人满意的。

我尝试了一些解决方案来抵消这种行为，包括捕获键盘事件的通知并尝试抵消动画。我不想要一个古怪的反动画。我只是希望在分派键盘时控件保持不变。

似乎现在（使用 iOS 6.1）应该有一种方法可以仅使用 IB 来做到这一点，但我没有看到。

编辑：例如[这篇文章：](https://stackoverflow.com/questions/1851566/display-keyboard-without-animation)禁用动画，但控件仍然重新定位。我根本不希望他们移动。将它们移回原来的位置并不理想，而是完全禁止它们移动。

似乎回到 iOS 4 左右，您必须自己手动移动键盘。现在它是自动完成的，但并不总是需要的。我只想禁用它。

# twitter-bootstrap - 使用 Bootstrap 将所有网站内容居中

> ID：15345545
> 
> 赞同：0
> 
> 时间：2013-03-11T18:10:09.150
> 
> 标签：twitter-bootstrap

如何使用 Boostrap 将我的所有网站内容居中（无论浏览器的宽度是多少）？这是一个小提琴，它演示了当我希望它居中时内容如何倾向于向右倾斜：http: [//jsfiddle.net/Fqzuu/5/embedded/result/](http://jsfiddle.net/Fqzuu/5/embedded/result/)

```
<div class="container">
    <div id="whitespaceOnLeft" class="span2"></div>
    <div id="allSiteContent" class="span8">
        <h1 class="text-center">My Site</h1>

        <div>I'd like my site's content to all be centered, a common web design paradigm.  However, 'container' seems to skew toward the right; using 'container-fluid' seems to skew toward the left.  (More obvious when you make your browser narrower.)</div>
    </div>

    <div id="whitespaceOnRight" class="span2"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:33:15.380

我与 Bootstrap 居中斗争了一段时间，但从未找到完美的响应式解决方案。

我发现最好的解决方案是将其添加到我的 CSS 中：

```
.pull-center{text-align:center;margin:0 auto !important;float:none !important;} 
```

然后根据需要使用“拉中心”类（“容器流体”效果更好）：

```
<div class="container-fluid">
    <div id="whitespaceOnLeft" class="span2"></div>
    <div id="allSiteContent" class="span8 pull-center">
        <h1>My Site</h1>

        <div>I'd like my site's content to all be centered, a common web design paradigm.  However, 'container' seems to skew toward the right; using 'container-fluid' seems to skew toward the left.  (More obvious when you make your browser narrower.)</div>
    </div>

    <div id="whitespaceOnRight" class="span2"></div>
</div> 
```

这是小提琴：

[http://jsfiddle.net/skelly/bGFSz/](http://jsfiddle.net/skelly/bGFSz/)

我还发现 Bootstrap 现在提供了一个“以分页为中心”的类，但它并不真正适用于您想要实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T07:29:04.100

添加一个类。

.center {边距：0 自动；}

# domain-driven-design - 核心域可以跨越多个限界上下文吗？

> ID：15345546
> 
> 赞同：13
> 
> 时间：2013-03-11T18:10:11.400
> 
> 标签：domain-driven-design

1)

埃文的书，第 页。415：

> 此外，域模型的关键方面可能跨越多个有界上下文，但根据定义，这些不同的模型不能被结构化以显示它们的共同焦点。

a) 我假设引用暗示*核心域* **CD**可以跨越*多个有界上下文* **BC**？

b) 我假设**CD**中的**BC**应该只包含*核心元素*，而不包含*通用元素*？如果是这样，这是否意味着我们应该始终*考虑核心域来设计***BC**（**CD**包含的那些）？换句话说，在我们开始设计**BC**之前，我们应该对**CD**是什么有一个大致的了解？

 *********C）

> ...但根据定义，这些不同的模型不能被结构化以显示它们的共同焦点

我意识到**BC**的结构不应使外部世界能够立即弄清楚所有部分（即**BC**）如何组合在一起以及它们的共同目的是什么，但作者是否暗示这种结构（这将隐含地传达不同**BC**的共同目的）即使是偶然也不会发生？如果是这样，为什么？

2）*域模型*可能有几个*通用子域* **GS**，但是一个**GS**可以跨越*多个* **BC**吗？

**更新：**

1)

b)

> > 我假设 CD 中的 BC 应该只包含核心元素，而不包含通用元素？...
> 
> 在定义 BC 时，当然应该对核心域是什么有所了解。如前所述，理想情况下，它们应该是一对一的。但是，可以定义 BC 来满足处于非理想状态的系统的需要。

我假设您是在暗示，在非理想情况下，**CD中的****BC**也可能包含一些*非核心元素*，并且在非理想情况下，**CD**可能包含*多个***BC**？

 ********C）

> 一个域跨越多个 BC，但尽管有明确的边界，域行为当然可以跨越 BC。上下文映射可以描述这种跨 BC 交互。引用本身是基于域愿景声明的概念，其目的是突出核心域的价值并可能解释与 BC 的关系。

但是为什么作者使用“*按定义*”这个词，好像是在暗示**BC**不可能偶然也被构造成它们会显示出它们的*共同焦点*？

2)

> > Domain Model 可能有几个 Generic Subdomains GSs ，但是一个 GSs 可以跨越多个 BCs 吗？
> 
> 多个**BC**可以使用单个通用子域。我会在这里避免使用“跨度”一词，因为这过分强调了通用子域对整个域模型的重要性。

一个）

> 多个 BC 可以使用单个通用子域

不确定我是否理解您的回复。你是说一个*GS* **可以**包含*多个**BCs*？

b)

> 我会在这里避免使用“跨度”一词，因为这过分强调了通用子域对整个域模型的重要性。

也许是一个无用的问题，但您能否详细说明为什么使用“*跨度*”一词会使*通用子域*看起来比实际更重要？

**回复贾科莫·泰西奥：**

1)

b)

> 不，一些通用元素通常在核心域中发挥关键作用。例如，参见许多共享内核中存在的时间、货币和金钱：它们确实是通用的，但对核心域规则很重要。

*因此，如果Core Domain***也**使用通用元素（例如 Time、Currency 和 Money），那么唯一的实现选项是*Shared Kernel*（即，此*通用元素*由*Core Domain*和任何其他需要它的*子*域共享），但是如果*泛型元素*仅由*Core Domain***使用**，那么我们不应该打扰*Shared Kernel*，而是应该直接在*Core Domain中定义**这个泛型元素*？

 *****1)

> c) 上下文边界在术语语义之后定义。在 BC 中，任何术语的含义都不应超过一件事（参见 SRP）。当您看到一个类在领域专家的心目中具有多个含义时，您就知道您混合了不同的 BC。

您能否扩展您的答案，因为我不明白您的答案与我的问题有何关系？

**第二次更新：**

1)

b)

> 也可能是单个 BC 包含多个子域。这通常并不理想，因为它可能表明混合的 BC。

在阅读这本书时，我并没有过多关注作者对“*子域*”一词的使用，但我很确定这本书并没有*对子域*是什么提供完整的定义。那么究竟什么是*子域*呢？只是一堆*逻辑相关的领域概念*？如果是，那么我假设一个*子域*不应该跨越多个**BC**吗？

2)

一个）

> 一个信号 GS 可以被多个 BC 使用。之所以如此，是因为子域是通用的。所以 GS 不包含 BC；相反，它被 BC 引用。

从您的回复看来，您似乎是在暗示*通用子域*从未实现为**BC**？为什么不呢，因为在我看来，不同的*通用子域*可能包含*不同的模型*，而**BC**似乎是分离这些*通用模型*的理想解决方案？！

3）您能否也帮我解决以下问题，因为这让我很困惑：如果*Core Domain***也**使用通用元素（例如 Time、Currency 和 Money ） ，那么唯一的实现选项是*Shared Kernel*（即这个*通用的**元素*由*Core Domain*和任何其他需要它的*子*域共享），但如果*通用元素*仅由*Core Domain***使用**，那么我们不应该打扰*Shared Kernel*，而是应该直接在*Core中定义**这个通用元素**域*？

 *****谢谢你

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T18:37:47.817

1a) 在这句话中，作者指的是整个域，而不是核心域。整个域可以跨越多个 BC。BC 和核心域之间的关系可能更复杂。域、子域和核心域是问题空间的元素。BC 是解决方案空间的产物。实际上，它们可能并不总是一对一的，但这是理想的。

1b) 在定义 BC 时，当然应该对核心域是什么有所了解。如前所述，理想情况下，它们应该是一对一的。但是，可以定义 BC 来满足处于非理想状态的系统的需要。

1c) 域跨越多个 BC，但尽管有明确的边界，域行为当然可以跨越 BC。上下文映射可以描述这种跨 BC 交互。引用本身是基于领域愿景陈述的概念，其目的是突出核心领域的价值，并可能解释与 BC 的关系。

2) 多个 BC 可以使用单个通用子域。我会在这里避免使用“跨度”一词，因为这过分强调了通用子域对整个域模型的重要性。

**更新**

1b) 一个核心域可能是用多个有界上下文实现的。这不一定是缺陷，在某些情况下是理想的。也可能是单个 BC 包含多个子域。这通常并不理想，因为它可能表明混合的 BC。

1c) 根据定义，BC 是物理分区的，不应该有直接的依赖关系。我想这就是作者所指的。他强调的问题是，您可以使用多个 BC，这需要解释，尤其是在处理单个子域时。

2a) 一个信号 GS 可以被多个 BC 使用。之所以如此，是因为子域是*通用*的。所以 GS 不包含 BC；相反，它被 BC 引用。

2b）拥有一个通用子域“跨度”系统可能表明它不是一个真正的通用子域，而是一个核心域。这并不是说不能在整个系统中使用通用组件，恰恰相反。然而，在这种情况下，跨越系统的组件只是一个技术轴。

**更新 2**

1b) 是的，子域是整个域的一个有凝聚力的组成部分。一个子域可以跨越多个 BC。这是可以接受的，因为 BC 是一个解决方案空间工件，它的存在可能存在技术原因甚至组织问题。例如，在线零售商的域中有一个产品目录子域。这将有一个相应的产品BC。然而，关于产品搜索的附加功能可以放在产品搜索 BC 中。这仍然是目录子域的一部分，但出于技术原因，它是一个新的 BC。另一方面，当单个 BC 包含多个子域时，这可能会出现问题。

2a）我认为我对跨度这个词的使用过于语义化。通用子域可以是 BC。但是，必须注意确保通用子域实际上以通用方式使用。

3) 是的。除此之外，像 Money 这样的基类可以为每个子域唯一地实现，即使它们在多个地方使用。有时复制粘贴是最好的模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T21:21:43.313

1a) 是的，核心域本质上是一组有界上下文，从客户的角度来看，值得应用程序开发。

1b) 不，一些通用元素通常在核心域中发挥关键作用。例如，参见许多共享内核中存在的时间、货币和金钱：它们确实是通用的，但对核心域规则很重要。

1c) 上下文边界是在术语的语义之后定义的。在 BC 中，任何术语的含义都不应超过一件事（另请参见[SRP](http://epic.tesio.it/doc/manual/solid_principles.html#about_single_responsibility)）。它们几乎是语言边界！当你看到一个类在领域专家的心目中具有多个含义时，你就知道你混合了不同的 BC。

2）是的，通用子域是域模型（或有界上下文集）中有用但不是应用程序中心的那些部分。我已经使用通用子域构建了几个应用程序：当它们增加了客户希望支付的一些价值时（我无法通过简单的 CRUD 组件提供这样的价值）。

请注意，您的应用程序中的“核心领域”是一个定性定义：我已经多次看到成功应用程序的次要部分在客户的公司组织发生变化时实现重要性。因此，今天的核心领域可能不是明天。***************************

# android - java.lang.NullPointerException 无法解决

> ID：15345549
> 
> 赞同：2
> 
> 时间：2013-03-11T18:10:18.747
> 
> 标签：android, android-emulator, nullpointerexception

我的模拟器显示应用程序意外停止的消息。我在我的代码中找不到错误。

这是我的主要课程，名为`Database2Activity`：

```
package data.base;

import com.example.phone_no.DBhelper;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class Database2Activity extends Activity {
EditText editText;
DBhelper DB;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button button = (Button)findViewById(R.id.button);
    DB = new DBhelper(Database2Activity.this);
    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            String rr = editText.getText().toString();

            DB.open();
             DB.adddata("A", rr, "122");
                DB.getAlldata();
                DB.close();

        }
    });

}
} 
```

这是我的第二个 java 类，名为`DBhelper`：

```
package com.example.phone_no;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBhelper {
public static final String KEY_ID = "id";
public static final String KEY_NAME = "names";

public static final String KEY_PHONE = "phoneno";

private final Context ourContext;
private static final String DATABASE_TABLE = "Contactinfo";
private static final int DATABASE_VERSION = 27;
private static final String DATABASE_NAME = "contactdata.db";
private DbHelper ourHelper;
private SQLiteDatabase ourDatabase;
// end for location
private static class DbHelper extends SQLiteOpenHelper {
    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

        /*db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ID
                + " INTEGER PRIMARY KEY, " + KEY_NAME + " TEXT NULL , "
                + KEY_PHONE + " INTEGER NULL);");*/
        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ID
                + " INTEGER , " + KEY_NAME + " TEXT NULL , "
                + KEY_PHONE + " INTEGER NULL);");

        // string value
        String y = "CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ID
                + " INTEGER PRIMARY KEY  , " + KEY_NAME + " TEXT NULL , "
                + KEY_PHONE + " INTEGER NULL);";

        System.out.println("query" + y);
        Log.d("query", y);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int arg1, int arg2) {
        // TODO Auto-generated method stub
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);

    }

}

public DBhelper(Context c) {
    ourContext = c;
}
public DBhelper open() throws SQLException 
{
    ourHelper = new DbHelper(ourContext);
    ourDatabase = ourHelper.getWritableDatabase();
    return this;
}

public void close() 
{
    ourHelper.close();
}
public long adddata(String id,String name,String number) 
{
    // TODO Auto-generated method stub
    // add the custom Image Gallery Image Path to Data Base
    ContentValues cv = new ContentValues();
    cv.put(KEY_ID, id);
    cv.put(KEY_NAME, name);
    cv.put(KEY_PHONE, number);
    return ourDatabase.insert(DATABASE_TABLE, null, cv);
}

public void getAlldata() 
{
    Cursor details = null;
    if (ourDatabase.isOpen() == false)

        ourDatabase = ourHelper.getWritableDatabase();
    if (ourDatabase.isOpen()) 
    {
        details = ourDatabase.query(DATABASE_TABLE, null, null, null, null, null, null);
         for(details.moveToFirst();!details.isAfterLast();details.moveToNext())
        {
             String a=details.getString(0);
            String b=details.getString(1);
            String c=details.getString(2);
            System.out.println("id--"+a+"name"+b+"phoneno"+c);
        }

    }

}
public long delete_image(String id) 
  {
    if (ourDatabase.isOpen() == false)
        ourDatabase = ourHelper.getWritableDatabase();
      if (ourDatabase.isOpen()) 
        {
            return ourDatabase.delete(DATABASE_TABLE, KEY_ID + "=" + id, null);
        }
        return 0;
    }

} 
```

这是 logcat 窗口上的错误消息：

```
03-11 23:20:32.677: E/AndroidRuntime(444): FATAL EXCEPTION: main
03-11 23:20:32.677: E/AndroidRuntime(444): java.lang.NullPointerException
03-11 23:20:32.677: E/AndroidRuntime(444):  at data.base.Database2Activity$1.onClick(Database2Activity.java:27)
03-11 23:20:32.677: E/AndroidRuntime(444):  at android.view.View.performClick(View.java:2408)
03-11 23:20:32.677: E/AndroidRuntime(444):  at android.view.View$PerformClick.run(View.java:8816)
03-11 23:20:32.677: E/AndroidRuntime(444):  at android.os.Handler.handleCallback(Handler.java:587)
03-11 23:20:32.677: E/AndroidRuntime(444):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-11 23:20:32.677: E/AndroidRuntime(444):  at android.os.Looper.loop(Looper.java:123)
03-11 23:20:32.677: E/AndroidRuntime(444):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-11 23:20:32.677: E/AndroidRuntime(444):  at java.lang.reflect.Method.invokeNative(Native Method)
03-11 23:20:32.677: E/AndroidRuntime(444):  at java.lang.reflect.Method.invoke(Method.java:521)
03-11 23:20:32.677: E/AndroidRuntime(444):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-11 23:20:32.677: E/AndroidRuntime(444):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-11 23:20:32.677: E/AndroidRuntime(444):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T18:11:18.387

你从不要求`findViewById()`所以`editText`它留下来`null`。在尝试使用它之前，您需要这样做：

```
editText = (EditText) findViewById(R.id.your_edittext_id);//replace with your id
button.setOnClickListener(new OnClickListener() {
  //rest of code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:11:49.957

您必须使用`findViewById`返回视图通过给定的 id 获取视图。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    editText = (EditText)findViewById(R.id.editText);

    .....
} 
```

# php - 如何删除数字并将其余部分保留在点之后

> ID：15345553
> 
> 赞同：5
> 
> 时间：2013-03-11T18:10:30.447
> 
> 标签：php

对不起，我无法在标题中清楚地解释。我用其他语言学习数学，我不知道它叫什么。

我有这些价值观。

```
$input = 13.2156;
$input = 45.232;
$input = 1193.215624; 
```

我想要一个 PHP 中的函数来获取点之后的内容，就是这种情况

```
$input = 13.2156;     // 0.2156
$input = 45.232;      // 0.232
$input = 1193.215624; // 0.215624 
```

我知道`intval()`反其道而行之。**但**我想要相反的相反。:D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T18:12:18.400

```
$input = $input - intval($input); 
```

For negative numbers, the above code will get a negative decimal component (which may be desired in some cases). If you always want the positive decimal component, just take the absolute value of `$input`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:14:27.353

试试 $input = $input - intval($input)。

这仅留下分数。

# jquery - 使用 crossrider 将选择选项添加到组合框

> ID：15345554
> 
> 赞同：1
> 
> 时间：2013-03-11T18:10:30.463
> 
> 标签：jquery, html, crossrider

我正在使用 Crossrider 编写扩展程序。我正在显示一个包含组合框的 HTML 表单，并尝试向其中添加选择选项。（在crossrider之外，代码正在运行。）

```
for (var i=0;i<country_list.length;i++)
{
    country_txt = '<option value='+i+'>'+country_list[i]+'</option>';
    console.log(country_txt);
    $('#countrySelect').append(country_txt);
} 
```

代码在控制台上正确显示，但附加不起作用。错误控制台中没有错误。

# php - 如何遍历 MySQL 结果？

> ID：15345558
> 
> 赞同：-5
> 
> 时间：2013-03-11T18:10:44.160
> 
> 标签：php, mysql

我做了一个查询并检索了一组我想在表中输出的 MySQL 结果，我该如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:11:10.697

您好，欢迎来到 Stack Overflow。

例如，如果您有一组 MySQL 结果，您可以使用该方法遍历它们`fetch_assoc()`（假设您使用的是 MySQL 改进扩展）。

例如：

```
$result = $mysqli->query("Your Query");

print("<table>");

while ($row = $result->fetch_assoc()) {
    print("<tr>");
    print("<td>" . $row['columnName'] . "</td>");
    print("</tr>");
}

print("</table>"); 
```

# html - 选择下拉菜单显示第一个选项而不是选定的选项

> ID：15345559
> 
> 赞同：0
> 
> 时间：2013-03-11T18:10:44.877
> 
> 标签：html

我观察到 html 选择的非常奇怪的行为。当页面开始加载时，将显示所选选项（Oprion 3）。当页面完全加载时，选择重置为其第一个选项（选项 1）。页面的来源在第三个选项上显示了选定的属性，如下所示：

```
<form action="#">
  <fieldset>
    <select>
      <option value="value 1">Option 1</option>
      <option value="value 2">Option 2</option>
      <option selected value="value 3">Option 3</option>
    </select>
  </fieldset>
</form> 
```

任何想法可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:40:26.467

我找到了导致此问题的 JS 代码：

```
$(options).removeAttr('selected'); 
$(options[map[my_array]]).attr('selected', 'selected'); 
```

# python - 如何在列表理解中表示嵌套的 fors？

> ID：15345568
> 
> 赞同：1
> 
> 时间：2013-03-11T18:11:29.493
> 
> 标签：python, list, list-comprehension

我有一个像下面这样的构造，如何使用 1 个（或更多）列表推导来获得相同的输出？

```
f2remove = []
for path in (a,b):
    for item in os.listdir(path):
        if os.path.isdir(os.path.join(path,item)):
            x = parse_name(item)
            if x and (ref - x).days >= 0:
                f2remove.append(os.path.join(path,item)) 
```

我尝试了多种方法，例如

```
files = [parse_name(item)\
         for item in os.listdir(path) \
         for path in (a,b)\
         if os.path.isdir(os.path.join(path,item))] # get name error
f2remove = [] # problem, don't have path... 
```

错误：

```
Traceback (most recent call last):
  File "C:\Users\karuna\Desktop\test.py", line 33, in <module>
    for item in os.listdir(path) \
NameError: name 'path' is not defined 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T18:14:47.490

s的顺序`for`不变。您的情况变得尴尬：

```
f2remove = [
    os.path.join(path, item)
    for path in (a,b)
        for item in os.listdir(path)
            if os.path.isdir(os.path.join(path, item))
               for x in (parse_name(item),)
                  if x and (ref - x).days >= 0
   ] 
```

基本上，要将嵌套`for`的 s 转换为列表推导式，您只需将您正在`append`使用的任何内容移到前面：

```
result = []
for a in A:
    for b in B:
      if test(a, b):
         result.append((a, b)) 
```

变成

```
result = [
    (a, b)
    for a in A
    for b in B
    if test(a, b)
] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T18:22:11.943

这应该做的工作，

```
f2remove = [
       os.path.join(path,item) 
            for item in [os.listdir(path)
                for path in (a,b)] 
                     if os.path.isdir(os.path.join(path,item)) 
                           and parse_name(item) and 
                                 (ref - parse_name(item)).days >= 0] 
```

但是您的初始版本确实更具可读性。

# c# - 为什么此查询字符串在 Access 中有效，但在 C# 中无效？

> ID：15345570
> 
> 赞同：0
> 
> 时间：2013-03-11T18:11:35.950
> 
> 标签：c#, sql, ms-access

我有这段代码：

```
conn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0; Data Source=c:\\myDB.accdb");
conn.Open();

sql = string.Format("SELECT Version FROM tblVersions where [FUL Flag] = 'Y'");
OleDbDataAdapter da = new OleDbDataAdapter(sql, conn);
DataSet ds = new DataSet();

da.Fill(ds);
dt = ds.Tables[0];

if (ds.Tables[0].Rows.Count == 1)
{
    tV.Text = dt.Rows[0][0].ToString();    //only looking for the first result
}
else
{
    tV.Text = "no match";
} 
```

当我运行它时，它不会返回任何结果。但是，如果我复制该`SELECT`语句并将其粘贴到 Access 中的查询窗口中，它确实会找到结果。这是我粘贴到 Access 中的内容：

```
SELECT Version FROM tblVersions where [FUL Flag] = 'Y' 
```

这将返回许多行。

我在某处错过了差异吗？谢谢！

编辑：找到解决方案..我应该寻找

```
(ds.Tables[0].Rows.Count > 0) 
```

代替

```
(ds.Tables[0].Rows.Count == 1) 
```

因为可能会返回超过 1 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:13:32.987

I'm assuming that your statement of behaviour here:

> When I run it, it doesn't return any results.

means "the `TextBox` text is replaced with 'no match'". Is that right?

> This returns many rows.

Well that explains it. Look at your condition:

```
if (ds.Tables[0].Rows.Count == 1) 
```

You're claiming there are *no* matches in every case unless there's *exactly one* match.

You probably want:

```
if (ds.Tables[0].Rows.Count > 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:19:24.370

你应该做这个：

```
ds.Tables[0].Rows.Count > 0 instead of ==1 
```

完整示例：

```
if (ds.Tables[0].Rows.Count > 0)
{
    tV.Text = dt.Rows[0][0].ToString();    //only looking for the first result
}
else
{
    tV.Text = "no match";
} 
```

# javascript - 单击命令按钮时更新 div

> ID：15345576
> 
> 赞同：0
> 
> 时间：2013-03-11T18:11:52.753
> 
> 标签：javascript, jquery, ajax, jsf, jsf-2

我想在`h:commandButton`单击 a 时用 id="contents" 更新一个 div，但复杂的部分是 h:commandButton 在 a 中`c:forEach`，所以有多个`h:commandButton`s。我希望在单击任何命令按钮时刷新 div。可以使用ajax或jquery吗？

1)

```
<h:form>

<div id="contents">
 <c:forEach var="p" items="#{statusBean.statusList}">  
   <h:commandButton>Click Me</h:commandButton> 
   //content
  </c:forEach>       
</div>

</h:form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:45:53.747

首先你的按钮根本不是 AJAX 按钮，所以在`f:ajax`里面添加：

```
<h:commandButton value="Click Me">
  <f:ajax render="@form"/>
</h:commandButton> 
```

请注意，我渲染了孔形式，因为您的 div 实际上只是其中的标记。您不能使用 JSF 更新普通的 HTML 标记。您可以将 div 更改为，`h:panelGroup`但在此示例中没有必要。

# ruby-on-rails - Rails 表单在填写时会自动更新？

> ID：15345584
> 
> 赞同：0
> 
> 时间：2013-03-11T18:12:23.153
> 
> 标签：ruby-on-rails, forms

我正在尝试制作一个动态表单，其中底部某些表单的名称基于顶部某些表单的值。例如...

在页面顶部会有两个下拉菜单。在页面底部，将有两个单选按钮。第一个单选按钮的名称将具有第一个下拉菜单选项的名称，第二个单选按钮将具有第二个下拉菜单选项的名称。

这是我到目前为止所拥有的：

```
<%= simple_form_for(@game) do |f| %>
  <%= f.error_notification %>
  <center>
    <div class="form-inputs">
      <%= choices = options_for_select( Team.all.map { |team| team[:name] } ) %>
        <p>Team 1:</p>
        <%= f.select :first_team_name, choices %>
        <p>Team 2:</p>
        <%= f.select :second_team_name, choices %>
        <p>Who you think will win</p>
        <%= f.text_field :user_guess %>

        </br>

        <%= f.submit "Simulate!", class: "btn btn-large btn-primary"%>
    </div>
  </center>
<% end %> 
```

文本字段将被那些单选按钮代替，而不是文本字段。

在提交表单之前如何访问下拉菜单的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:50:11.053

要获得更全面的答案，我建议您观看有关此主题的[railscasts 剧集](http://railscasts.com/episodes/403)，但您需要专业（阅读：付费）订阅。

由于您没有做任何超级复杂的事情，因此您可以使用一些 javascript 快速而肮脏地完成它：

```
$(function(){
  $('select').change(function(){
    html = ''
    $('select').each(function(){
      html += $(this).val() + '<input type="checkbox" name="game[user_guess]" val="' + $(this).val() +'"/>'
    })
    $('div.user_guess').html(html)
  })
}) 
```

如果您直接粘贴代码，您还需要在视图中添加一个 div：

```
<p>Who you think will win</p>
<div class="user_guess"></div> 
```

用 javascript 构建 HTML 感觉不好？您可以让`change()`处理程序进行 ajax 调用，以加载服务器生成的 HTML，这可以使用适当的表单助手等进行。但是对于这样一个简单的任务，它似乎有点过头了。

（另外，请注意，如果团队名称可以由用户定义，则此 javascript 可能会使您面临脚本注入攻击，因此请根据需要进行清理。）

请注意，如果您希望表单在用户交互时更改，而用户实际上不必在表单更改之前提交表单（重建页面并重新加载视图），*则必须*使用 javascript。我认为。你可以用 CSS 做一些时髦的事情，但实现起来真的很讨厌。

# sql-server-2008 - 将参数从临时表传递给存储过程

> ID：15345589
> 
> 赞同：0
> 
> 时间：2013-03-11T18:12:35.310
> 
> 标签：sql-server-2008, tsql

我有一个场景，我必须将参数从一个临时表传递给一个存储过程

```
#student(table)
StudentID  Class
10008        A
10009        A
10010        C 
```

sproc 接受 2 个参数 StudentID 和 Class。

```
Student_Fail @StudentID,@Class 
```

我想为所有的学生 ID（3 次）执行这个存储过程。

如何才能做到这一点？使用while循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:15:46.437

理想情况下，您应该重新编写存储过程，以便它可以直接使用#temp 表，或者创建一个不同的存储过程，或者只是在此代码中复制存储过程尝试对单行执行的操作。（基于集合的操作几乎总是比一次处理一行更好。）

除此之外，您必须使用游标或 while 循环（[不，它们并没有真正的不同](https://sqlblog.org/2012/01/26/bad-habits-to-kick-thinking-a-while-loop-isnt-a-cursor)）。

```
DECLARE @StudentID INT, @Class CHAR(1);

DECLARE c CURSOR LOCAL FAST_FORWARD
  FOR SELECT StudentID, Class FROM #student;

OPEN c;

FETCH c INTO @StudentID, @Class;

WHILE @@FETCH_STATUS = 0
BEGIN
    EXEC dbo.Student_Fail @StudentID, Class;
    FETCH c INTO @StudentID, @Class;
END

CLOSE c;
DEALLOCATE c; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:18:14.887

正如您所指出的，while 循环将执行以下操作：

```
declare @StudentID int
declare @Class char(1)

while exists (select 1 from #student)
begin

  select top 1 @StudentID = StudentID
    , @Class = Class
  from #student

  exec Student_Fail @StudentID, @Class

  delete from #student where @StudentID = StudentID

end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T18:20:00.220

是的，这可以实现为一个`WHILE`循环，或者一个`CURSOR`，因为在这种情况下，它们将执行基本相同的操作，即逐行操作。

但是，理想的解决方案是重新实现`Student_Fail`失败的存储过程，使其基于集合而不是过程。

例如，您可以更改存储过程以接受[**表值参数**](http://msdn.microsoft.com/en-us/library/bb675163.aspx)。

首先，创建表类型：

```
CREATE TYPE dbo.StudentClassTableType AS TABLE
( StudentID int, Class varchar(50) ) 
```

接下来，更改存储过程（或创建新的存储过程）以接受表类型：

```
CREATE PROCEDURE dbo.usp_FailStudents
(@tvpStudentsToFail dbo.StudentClassTableType READONLY)
-- Perform set-based logic using your table parameter.
UPDATE sc
SET Fail = 1
FROM dbo.StudentClass sc
JOIN @tvpStudentsToFail fail 
  ON fail.StudentID = sc.StudentID 
  AND fail.Class = sc.Class 
```

# windows-services - make a jruby program a windows service

> ID：15345592
> 
> 赞同：0
> 
> 时间：2013-03-11T18:12:36.980
> 
> 标签：windows-services

I have a JRuby program that I want to be a windows service. I have seen some things on creating a service with Ruby, but we don't want to install ruby on our client machines. It appears to be not supported in JRuby.

I created a dummy program to try this out:

```
path = "C:/tmp/my-svc.log"

if File.exists?(path)
    File.open(path,"a"){|f| f.write(" called again\n")}
else  
    File.open(path,"w"){|f| f.write(" called first time\n")}
end

while true do   
    sleep 5
    puts 'I am a service'
end 
```

I did this:

Z:\play>sc.exe create "larz service 2.1" binpath= "C:\jruby-1.6.7.2\bin\jruby -S Z:\play\my-win-svc.rb" start= auto

[SC] CreateService SUCCESS

Trying to start it I got this error:

Z:\play>sc start "larz service 2.1"

[SC] StartService FAILED with error 193.

Z:\play>sc query "larz service 2.1"

```
SERVICE_NAME: larz service 2.1`
TYPE               : 10  WIN32_OWN_PROCESS`
STATE              : 1  STOPPED
WIN32_EXIT_CODE    : 0  (0x0)
SERVICE_EXIT_CODE  : 0  (0x0)
CHECKPOINT         : 0x0
WAIT_HINT          : 0x0 
```

I have seen alot of posts on the web on different ways to create windows services, using initsrv.exe, powershell, running CMD, editing the registry and so on, but I am not sure what is really going on or if I need to call some API. It doesn't appear as if the other approaches add any specific start parameters that I could tell. In addition, I added code at the beginning of my test service to write to a file in /tmp and the file is not being written so when I try to start the program, it never actually is being executed.

Thanks ..

* * *

Ok, so I got a little farther, but still mystified

Z:\play>sc config "larz service 2.2" obj= EEE\lgud password= "Ssssssss@"

[SC] ChangeServiceConfig SUCCESS

Z:\play>sc start "larz service 2.2"

[SC] StartService FAILED 1069:

the service did not start due to a logon failure.

It seems I entered the correct format for user/pw as at other times it errored out on the config command.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:37:47.497

如果您确定密码正确，则您指定的用户可能没有作为服务运行的正确权限。[尝试在 Windows 服务应用程序 (services.msc)登录选项卡](http://www.coretechnologies.com/WindowsServices/services-control-panel-log-on-tab.jpg)上输入帐户信息，这将让您知道该用户是否存在问题。

但除此之外，我不知道如果没有安装 Ruby，你将如何实现这一点。您的服务的可执行路径设置为 .rb 文件——如果不是 Ruby，您希望 Windows 启动哪个应用程序来运行该文件？

# c# - 如何使用依赖注入从多个来源获取配置？

> ID：15345594
> 
> 赞同：10
> 
> 时间：2013-03-11T18:12:41.697
> 
> 标签：c#, .net, configuration, dependency-injection, simple-injector

我正在使用 Simple Injector，但也许我需要的是更多概念性的答案。

这是交易，假设我的应用程序设置有一个界面：

```
public interface IApplicationSettings
{
    bool EnableLogging { get; }
    bool CopyLocal { get; }
    string ServerName { get; }
} 
```

然后，通常会有一个实现 IApplicationSettings 的类，从指定的源获取每个字段，例如：

```
public class AppConfigSettings : IApplicationSettings
{
    private bool? enableLogging;
    public bool EnableLogging
    {
        get
        {
            if (enableLogging == null)
            {
                enableLogging = Convert.ToBoolean(ConfigurationManager.AppSettings["EnableLogging"];
            }
            return enableLogging;
        }
    }
    ...
} 
```

**然而！**假设我想`EnableLogging`从 app.config、`CopyLocal`数据库和`ServerName`另一个获取当前计算机名称的实现中获取。我希望能够混合匹配我的应用程序配置，而不必创建 9 个实现，每个组合一个。

我假设我不能传递任何参数，因为接口是由注入器（容器）解析的。

我一开始是这么想的：

```
public interface IApplicationSettings<TEnableLogging,TCopyLocal,TServerName>
where TEnableLogging : IGetValue<bool>
where TCopyLocal : IGetValue<bool>
where TServerName : IGetValue<string>
{
    TEnableLogging EnableLog{get;}
    TCopyLocal CopyLocal{get;}
    TServerName ServerName{get;}
}

public class ApplicationSettings<TEnableLogging,TCopyLocal,TServerName>
{
    private bool? enableLogging;
    public bool EnableLogging
    {
        get
        {
            if (enableLogging == null)
            {
                enableLogging = Container.GetInstance<TEnableLogging>().Value
            }
            return enableLogging;
        }
    }
} 
```

但是，有了这个我有一个主要问题：我怎么知道如何创建一个`TEnableLogging`（它是 a `IGetValue<bool>`）的实例？哦，假设这`IGetValue<bool>`是一个具有 Value 属性的接口，它将由具体类实现。但是具体的类可能需要一些细节（比如 app.config 中的键名是什么）或不需要（我可能只是想始终返回 true）。

我对依赖注入比较陌生，所以也许我的想法是错误的。有没有人对如何做到这一点有任何想法？

（你可以用另一个 DI 库来回答，我不介意。我想我只需要抓住它的概念。）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-11T18:41:52.063

你肯定在这里走错路了。

几年前，我构建了一个应用程序，其中包含一个与您的`IApplicationSettings`. 我相信我将它命名为它`IApplicationConfiguration`，但它也包含所有应用程序的配置值。

虽然一开始它帮助我使我的应用程序可测试，但一段时间后，设计开始妨碍我。许多实现都依赖于该接口，但它不断变化，实现和测试版本也随之改变。

就像你一样，我实现了一些延迟加载，但这有一个可怕的缺点。当其中一个配置值丢失时，我才发现它是在第一次调用该值时发生的。这导致了难以验证的配置。

我花了几次重构迭代来找出问题的核心是什么。大接口是个问题。我的`IApplicationConfiguration`课违反了[接口隔离原则](https://en.wikipedia.org/wiki/Interface_segregation_principle)，结果是可维护性差。

最后我发现这个界面完全没用。除了违反 ISP 之外，这些配置值描述了实现细节，而不是进行应用程序范围的抽象，最好直接为每个实现提供它们需要的配置值，并且只提供它们需要的值。

当你这样做时，最简单的做法是将这些值包装到一个参数对象中（即使它只是一个值），并将这些配置值注入到构造函数中。这是一个例子：

```
var enableLogging =
    Convert.ToBoolean(ConfigurationManager.AppSettings["EnableLogging"]);

container.RegisterSingleton(new LoggerSettings(loggingEnabled: enableLogging)); 
```

在这种情况下，`LoggerSettings`是特定于 的配置对象`Logger`，它需要它作为构造函数参数。

执行此操作时，该`enableLogging`值仅从配置文件中读取一次，并在应用程序启动期间完成。这使它变得快速并在缺少值时在应用程序启动时失败。

# android - WebView wont focus on text area

> ID：15345598
> 
> 赞同：0
> 
> 时间：2013-03-11T18:12:50.090
> 
> 标签：android, webview

I have web application: peekatu.com/mobilechat.php or native version available [https://play.google.com/store/apps/details?id=com.peekatucorp.peekatu&hl=en](https://play.google.com/store/apps/details?id=com.peekatucorp.peekatu&hl=en)

That we have wrapped in a webview to deploy as a native android/iphone application. The function and flow of the application on the devices is just fine. The problem I am having is with Android devices trying to input text. My friend on a Nexus 4 can not even log in. If he selects username/password input field the keyboard appears and immediately disappears. He has to copy and paste just to log in. On my device (Dell Streak, Android 2.3.7) I am able to log in find but when inputting text within the app it does the same thing. It will allow me to input 1 message properly and then start the keyboard disappearing issue. Another problem that is occuring is that the touchscreen seems to be off. It is clicking BELOW where you actually touch for buttons and select list. I am having this issue and a friend on a Galaxy S3\. Any idea whats going on here? Thanks!

```
<div id="tabbar" style="height:95px;">
<div class="messagebox" style="width:100%;height:45px;background-image:-webkit-gradient(linear, 0 0, 0 100%, color-stop(0, #999), color-stop(0.02, #666), color-stop(1, #222))" id="messagetextbox">
            <input type="text" id="msg-text" value="" maxlength="255" style="float:left;width:76%;height:30px;border:1px solid black;margin-top:3px;" placeholder="Enter message" class="textbox" onclick=""/>
          <input type="button" style="float:right;width:19%;height:28px;border:1px solid black;margin-top:5px;" value="Send" class="button1" onclick="sendMessage()"/>
        </div>` 
```

That is the html code for the input box.^^

```
function sendMessage(){
var text = document.getElementById('msg-text').value;
document.getElementById('msg-text').value = '';

function loaded() {updateUserRoomData();

$("#msg-text").bind("keypress", {}, keypressInBox); 
```

Thats the javascript for the msg-box^^

```
 if(iui.getSelectedPage().id=='chat' ||   iui.getSelectedPage().id=='privateconversation')    {document.getElementById('messagetextbox').style.display='';document.getElementById('tabbar').style.height='95px';

}

else{
document.getElementById('messagetextbox').style.display='none';
document.getElementById('tabbar').style.height='48px';

}

if(iui.getSelectedPage().id=='profile')
{
//alert(document.getElementById("profile-country").length);

if (document.getElementById("profile-country").length<2)
get_country();
}

var wrapperDivs = document.querySelectorAll('.wrapper');
var headerH = document.getElementById('toolbar').offsetHeight,
    footerH = document.getElementById('tabbar').offsetHeight,
    wrapperH = window.innerHeight - headerH - footerH;
    //wrapperH-=80;
//  var dd = document.documentElement.clientHeight+20- footerH;
    //document.getElementById('tabbar').style.marginTop=dd+'px';
    //document.getElementById('tabbar').style.bottom='0px';
    var x = getOffset( document.getElementById('tabbar') ).top;
//  alert(headerH+' '+footerH+'  '+x+' '+wrapperH);
    //wrapperH = x -45;
for (var i=0; i<wrapperDivs.length; i++)' 
```

That is Javascript for entire tabbar that messagebox rest in.

# java - 如何从外部类附加 JTextArea？

> ID：15345602
> 
> 赞同：0
> 
> 时间：2013-03-11T18:13:01.120
> 
> 标签：java, swing, jscrollpane, jtextarea

我有 3 个类，一个框架类，一个面板类和一个算法类。首先创建框架并包含面板类，然后面板通过按下按钮启动算法。该面板有一个 JTextArea 日志，算法必须附加该日志。我尝试通过面板，以便它可以访问它，但没有运气。尝试通过 JTextArea 本身，也没有运气。甚至写了一个函数，算法可以调用它来追加，仍然没有。这里的问题在哪里？

代码如下，希望不要太多： PS 代码包含一个 FileLoader 类，但它只是加载一个文件。

框架：

```
 import java.awt.BorderLayout;

  import java.util.LinkedList;
    import javax.swing.BorderFactory;
    import javax.swing.JFrame;
    import javax.swing.JLabel;
    import javax.swing.JPanel;
    import javax.swing.JTabbedPane;
    import javax.swing.border.EtchedBorder;

@SuppressWarnings("serial")
public class ClusteringSelection extends JFrame implements Runnable{

    LinkedList<Record> table;
    KMeansUI kMeansUI;

public void run()
{
    StartUI();
}

public void StartUI()
{
    JTabbedPane tab1=new JTabbedPane();

    tab1.addTab("K-Means", kMeansUI=new KMeansUI(this));
    tab1.addTab("Aglomerative", new JPanel());
    add(tab1);
    JLabel status=new JLabel();
    status.setBorder(BorderFactory.createEtchedBorder(EtchedBorder.RAISED));
    add(status, BorderLayout.SOUTH);
    setSize(320,320);
    setResizable(false);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setVisible(true);
    setLocationRelativeTo(null);
}

@SuppressWarnings("unused")
ClusteringSelection()
{
    FileLoader loader=new FileLoader(this);
}

public static void main(String[] args)
{
    new ClusteringSelection();

}
} 
```

控制板：

```
 import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.BorderFactory;
import javax.swing.ButtonGroup;
import javax.swing.GroupLayout;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.border.EtchedBorder;

@SuppressWarnings("serial")
public class KMeansUI extends JPanel implements Runnable{

    ClusteringSelection mainWindow;
    JTextArea log;
    KMeans kMeans;
    JTextField centroids;

    public void UpdateLog(String text)
    {
        log.append(text+"\n");
    }

    public void run()
    {
        kMeans=new KMeans(mainWindow.table, Integer.parseInt(centroids.getText()), KMeansUI.this);
    }

    public void StartUI()
    {
        centroids=new JTextField();
        log=new JTextArea(" ");

        log.setBorder(BorderFactory.createEtchedBorder(EtchedBorder.RAISED));

        JScrollPane logScrool=new JScrollPane();
        logScrool.add(log);
        logScrool.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);

        JButton start=new JButton("Start");

        start.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                run();
                //kMeans=new KMeans(mainWindow.table, Integer.parseInt(centroids.getText()), KMeansUI.this);
            }
        });

    JLabel cenLabel=new JLabel("Count:");
    JRadioButton euclede=new JRadioButton("Eucledean");
    JRadioButton manhattan=new JRadioButton("Manhattan");
    JRadioButton pearsons=new JRadioButton("Pearson's");

    ButtonGroup messure=new ButtonGroup();
    messure.add(euclede);
    messure.add(manhattan);
    messure.add(pearsons);

    GroupLayout layout=new GroupLayout(this);
    setLayout(layout);

    layout.setAutoCreateGaps(true);
    layout.setAutoCreateContainerGaps(true);

    layout.setHorizontalGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createSequentialGroup()
                                .addComponent(cenLabel)
                                .addComponent(centroids,20,20,20))
                                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                                        .addComponent(euclede))
                                        .addComponent(manhattan)
                                        .addComponent(pearsons)
                                        .addComponent(start))
                .addComponent(logScrool)

            );

    layout.setVerticalGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                                .addComponent(cenLabel)
                                .addComponent(centroids,20,20,20)
                                )
                        .addGroup(layout.createParallelGroup(GroupLayout.Alignment.CENTER)
                                .addGroup(layout.createSequentialGroup()
                                        .addComponent(euclede)
                                        .addComponent(manhattan)
                                        .addComponent(pearsons)
                                        .addComponent(start))))
                .addComponent(logScrool));

    setVisible(true);
}
KMeansUI(ClusteringSelection mainWindow)
{
    this.mainWindow=mainWindow;
    StartUI();
}
} 
```

该算法工作正常，除了不附加。

```
 import java.util.LinkedList;

public class KMeans implements Runnable{

    LinkedList<Record> table;
    LinkedList<Centroid> centroidList;
boolean clusterStop=false;
int precision=10000000;
int centroidCount;
double time, iterCount=0;
KMeansUI kMeansUI;

public void run()
{
    while(clusterStop==false)
    {
        UpdateRecords(centroidList);
        UpdateClusters();
        iterCount++;

        for(int i=0;i<centroidCount;i++)
        {
            int count=0;
            for(int j=0;j<table.size();j++)
            {
                if(table.get(j).type==i)
                {
                    count++;
                }
            }
            System.out.println("Cluster "+(i+1)+" has "+count+" records.");
            //log.append("Cluster "+(i+1)+" has "+count+" records.");
            kMeansUI.UpdateLog("Cluster "+(i+1)+" has "+count+" records.");
        }
    }
    Output();
}

KMeans(LinkedList<Record> table, int centroidCount, KMeansUI kMeansUI)
{
    this.kMeansUI=kMeansUI;
    time=System.currentTimeMillis();
    this.table=table;
    this.centroidCount=centroidCount;
    CreateCentroids();
    run();
}

public void UpdateClusters()
{
    clusterStop=true;
    for(int i=0;i<centroidList.size();i++) //staiga pa centroidiem
    {
        for(int j=0;j<table.get(0).values.size();j++) //staiga pa kolonnam
        {
            double sum=0;
            double count=0;
            for(int k=0;k<table.size();k++) //staiga pa rindam
            {
                if(centroidList.get(i).type==table.get(k).type)
                {
                    sum+=table.get(k).values.get(j);
                    count++;
                }

            }
            if(centroidList.get(i).dimVal.get(j)!=(double) Math.round(((1/count)*sum)*precision)/precision)
            {
                clusterStop=false;
            }
            centroidList.get(i).dimVal.set(j, (double) Math.round(((1/count)*sum)*precision)/precision);

        }

    }
}

public void UpdateRecords(LinkedList<Centroid> centroidList)
{
    for(int i=0;i<table.size();i++)
    {
        table.get(i).Update(centroidList);
    }
}

public void CreateCentroids()
{
    centroidList=new LinkedList<Centroid>();
    for(int i=0;i<centroidCount;i++)
    {
        centroidList.add(new Centroid(table.get(0).values.size(),i));
    }
}

public void Output()
{
    LinkedList<String> types=new LinkedList<String>();
    for(int i=0;i<table.size();i++)
    {
        if(!types.contains(table.get(i).realType))
        {
            types.add(table.get(i).realType);
        }   
    }       
    for(int i=0;i<centroidCount;i++) //staiga pa centroidiem
    {       
        for(int j=0;j<types.size();j++) //staiga pa klasem
        {
            int count=0;
            for(int k=0;k<table.size();k++) // staiga pa rindam
            {
                if(table.get(k).type==i && table.get(k).realType.equals(types.get(j)))
                {
                        count++;    
                }
            }
            System.out.println("Centroid "+(i+1)+" has "+count+" of type "+types.get(j));
            //log.append("Centroid "+(i+1)+" has "+count+" of type "+types.get(j));
            kMeansUI.UpdateLog("Centroid "+(i+1)+" has "+count+" of type "+types.get(j));
        }
    }

    for(int i=0;i<centroidCount;i++)
    {
        int count=0;
        for(int j=0;j<table.size();j++)
        {
            if(table.get(j).type==i)
            {
                count++;
            }
        }
        System.out.println("Cluster "+i+" has "+count+" records.");
        //log.append("Cluster "+i+" has "+count+" records.");
        kMeansUI.UpdateLog("Cluster "+i+" has "+count+" records.");
    }

    time=System.currentTimeMillis()-time;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:59:24.570

而不是：`logScrool.add(log);`使用以下行将日志添加到`JScrollPane`：
`logScrool.setViewportView(log);`

# nginx - Server-Sent Events with Nginx and uWSGI

> ID：15345603
> 
> 赞同：8
> 
> 时间：2013-03-11T18:13:04.623
> 
> 标签：nginx, uwsgi, server-sent-events

Is it possible to use [server-sent events](http://en.wikipedia.org/wiki/Server-sent_events) from a python/Flask application that is behind uWSGI and Nginx?

I've found packages that implement SSE in python/Flask, but they seem to all do so using gevent and greenlets.

[https://github.com/DazWorrall/flask-sse](https://github.com/DazWorrall/flask-sse)

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-13T12:19:04.900

最新版本的 uWSGI（从 1.9 开始）内置了对 websockets / SSE 的支持。这篇文章提供了一个很好的指南：

[uWSGI 文档：卸载 Websocket 和服务器发送事件](http://uwsgi-docs.readthedocs.org/en/latest/articles/OffloadingWebsocketsAndSSE.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:29:22.017

您不能简单地将 gevent 与 uWSGI 一起使用吗？

通常这种技术应该与异步引擎一起使用，因为多线程/多进程范式成本太高。

# php - 在 CodeIgniter 中检查文件扩展名

> ID：15345604
> 
> 赞同：0
> 
> 时间：2013-03-11T18:13:05.000
> 
> 标签：php, codeigniter, fileinfo

我有一个脚本应该告诉文件类型（jpg，bmp，png）。

脚本如下：

```
$file="pic/shimla.png";

$finfo = finfo_open();

$fileinfo = finfo_file($finfo, $file, FILEINFO_MIME);

finfo_close($finfo); 
```

现在假设我之前有一个名为 a.jpg 的文件，后来我将其更改为 a.png，上面的脚本将声明图像实际上是 jpg，即使它被重命名为 a.png

现在我想对 CodeIgniter 做同样的事情，我想知道 CodeIgniter 是否有一些自己的函数可以使它等同于上面的脚本。

我尝试使用 CodeIgniter 的函数`get_mime_by_extension('file')`，但它有一个问题。

如果我将 a.jpg 更改为 a.png，那么上面的函数会返回不正确的 image/png，它应该是 a.jpg，只是最上面的脚本。

所以`get_mime_by_extension('file')`只是返回图像的扩展，它不评估图像的原始性质。如果重命名为bmp，则会抛出bmp，如果重命名为gif，则会抛出gif。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:20:33.707

使用[getimagesize()](http://www.php.net/manual/en/function.getimagesize.php)

```
$result = getimagesize($file);
$mime = $result["mime"]; 
```

# asp.net - Application_Start timeout?

> ID：15345607
> 
> 赞同：0
> 
> 时间：2013-03-11T18:13:08.383
> 
> 标签：asp.net, entity-framework, asp.net-mvc-4, global-asax

I have one piece of code that gets run on `Application_Start` for seeding demo data into my database, but I'm getting an exception saying:

> The ObjectContext instance has been disposed and can no longer be used for operations that require a connection

While trying to enumerate one of my entities `DB.ENTITY.SELECT(x => x.Id == value);`

I've checked my code and I'm not disposing my context before my operation, Below is an outline of my current implementation:

```
protected void Application_Start()
{
   SeedDemoData();
}

public static void SeedDemoData()
{
   using(var context = new DBContext())
   {
       // my code is run here.
   }
} 
```

So I was wondering if `Application_Start` is timing out and forcing my db context to close its connection before it completes.

Note: I know the code because I'm using it on a different place and it is unit tested and over there it works without any issues.

Any ideas of what could be the issue here? or what I'm missing?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:48:51.083

在调查了这个问题几个小时后，我发现它是由数据上下文在不同的线程上有待处理的更改引起的。我们当前的数据库升级/迁移实现在 App_Start 方法的并行线程上运行，因此我注意到我尝试枚举的实体同时被更改，即使它们在不同的数据上下文中运行 EF 注意到访问实体时出现问题并返回不正确的错误消息，说明数据上下文已被释放，而实际异常是实体状态已修改但未保存。

我的问题的实际解决方案是将所有种子数据功能移动到数据库升级/迁移脚本中，以便实体一次只在一个地方修改。

# php - Index products with cron

> ID：15345611
> 
> 赞同：0
> 
> 时间：2013-03-11T18:13:18.070
> 
> 标签：php, magento, cron

I need to re-index all products in Magento every night.

I know this can be achieved with: php /home/path/to/magento/shell/indexer.php reindexall

But how do I add this call into the built-in cron mechanism in Magento?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:36:17.017

1.  第 1 步：将 cron 设置为每 5 分钟或更高频率执行一次。

2.  在 crontab 节点中：0 2 * * * 目录/product_indexer_price::reindexAll

您根据您的日值更改 cron_expr 中的 2 。

# emacs - 如何让 Emacs org-mode 在 DONE 状态下播放声音文件？

> ID：15345614
> 
> 赞同：1
> 
> 时间：2013-03-11T18:13:32.313
> 
> 标签：emacs, org-mode, audio, aquamacs

我希望 org-mode 通过在我将`TODO`项目的状态更改为`DONE`.

我在我的`.emacs`文件中尝试了两种变体，但都没有奏效。我在 OSX 上使用 Aquamacs。

这些都不起作用：

```
'(org-after-todo-state-change-hook (quote (org-clock-out-if-current) (play-sound-file "~/Library/Sounds/InkSoundStroke3.aif")))

'(org-after-todo-state-change-hook (quote (org-clock-out-if-current)     (start-process-shell-command "afplay" nil "mplayer ~/Library/Sounds/InkSoundStroke3.aif"))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:21:02.837

编辑：如果您检查钩子 ( `C-h``v` `org-after-todo-state-change-hook` `RET`) 的文档字符串，您会看到新状态在变量中可用`org-state`，因此我们可以对此进行测试：

```
(add-hook 'org-after-todo-state-change-hook 'my-org-after-todo-state-change)
(defun my-org-after-todo-state-change ()
  (when (string-equal org-state "DONE")
    (org-clock-out-if-current)
    (play-sound-file "~/Library/Sounds/InkSoundStroke3.aif"))) 
```

# php - Parse XML with PHP and XMLReader

> ID：15345615
> 
> 赞同：4
> 
> 时间：2013-03-11T18:13:33.320
> 
> 标签：php, xml, xmlreader

I've been trying to parse a very large XML file with PHP and XMLReader, but can't seem to get the results I am looking for. Basically, I'm searching a ton of information, and if a contains a certain zipcode, I'd like to return that bit of XML, or keep searching until it finds that zipcode. Essentially, I'll be breaking this big file down into only a few small chunks, so instead of having to look at thousands or millions of groups of information, it would be maybe 10's or 20's.

Here's a bit of the XML with what I'd like to

```
//search through xml
<lineups country="USA">
//cache TX02217 as a variable
 <headend headendId="TX02217">
//cache Grande Gables at The Terrace as a variable
  <name>Grande Gables at The Terrace</name>
//cache Grande Communications as a variable
  <mso msoId="17541">Grande Communications</mso>
  <marketIds>
   <marketId type="DMA">635</marketId>
  </marketIds>
//check to see if any of the postal codes are equal to $pc variable that will be set in the php
  <postalCodes>
   <postalCode>11111</postalCode>
   <postalCode>22222</postalCode>
   <postalCode>33333</postalCode>
   <postalCode>78746</postalCode>
  </postalCodes>
//cache Austin to a variable
  <location>Austin</location>
  <lineup>
//cache all prgSvcID's to an array i.e. 20014, 10722
   <station prgSvcId="20014">
//cache all channels to an array i.e. 002, 003  
    <chan effDate="2006-01-16" tier="1">002</chan>
   </station>
   <station prgSvcId="10722">
    <chan effDate="2006-01-16" tier="1">003</chan>
   </station>
  </lineup>
  <areasServed>
   <area>
//cache community to a variable $community   
    <community>Thorndale</community>
    <county code="45331" size="D">Milam</county>
//cache state to a variable i.e. TX
    <state>TX</state>
   </area>
   <area>
    <community>Thrall</community>
    <county code="45491" size="B">Williamson</county>
    <state>TX</state>
   </area>
  </areasServed>
 </headend>

//if any of the postal codes matched $pc 
//echo back the xml from <headend> to </headend>

//if none of the postal codes matched $pc
//clear variables and move to next <headend>

 <headend>
 etc
 etc
 etc
 </headend>
 <headend>
 etc
 etc
 etc
 </headend>
 <headend>
 etc
 etc
 etc
 </headend> 
</lineups> 
```

PHP:

```
<?php
$pc = "78746";
$xmlfile="myFile.xml";
$reader = new XMLReader();
$reader->open($xmlfile); 

while ($reader->read()) { 
//search to see if groups contain $pc and echo info
} 
```

I know I'm making this harder than it should be but am a little overwhelmed trying to manipulate such a large file. Any help is appreciated.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T01:26:33.917

To gain more flexibility with `XMLReader` I normally create myself [iterators that are able to work on the `XMLReader` object and provide the steps I need](https://gist.github.com/hakre/5147685).

That starts with a simple iteration over all nodes over to the iteration over elements optionally with a specific name. Let's call the last one `XMLElementIterator` taking the reader and the element name as parameters.

In your scenario I then would create an iterator that returns a `SimpleXMLElement` for the current element, taking only the `<headend>` elements:

```
require('xmlreader-iterators.php'); // https://gist.github.com/hakre/5147685

class HeadendIterator extends XMLElementIterator {
    const ELEMENT_NAME = 'headend';

    public function __construct(XMLReader $reader) {
        parent::__construct($reader, self::ELEMENT_NAME);
    }

    /**
     * @return SimpleXMLElement
     */
    public function current() {
        return simplexml_load_string($this->reader->readOuterXml());
    }
} 
```

Equipped with this iterator the rest of your job is mainly a piece of cake. First load the 10 gigabyte file:

```
$pc      = "78746";

$xmlfile = '../data/lineups.xml';
$reader  = new XMLReader();
$reader->open($xmlfile); 
```

And then check if the `<headend>` element contains the information and if so, display the data / XML:

```
foreach (new HeadendIterator($reader) as $headend) {
    /* @var $headend SimpleXMLElement */
    if (!$headend->xpath("/*/postalCodes/postalCode[. = '$pc']")) {
        continue;
    }

    echo 'Found, name: ', $headend->name, "\n";
    echo "==========================================\n";
    $headend->asXML('php://stdout');
} 
```

This does literally what you're trying to achieve: Iterate over the large document (which is memory-friendly) until you find the element(s) you're interested in. You then process on the concrete element and it's XML only; [`XMLReader::readOuterXml()`](http://php.net/XMLReader.readOuterXml) is a fine tool here.

Exemplary output:

```
Found, name: Grande Gables at The Terrace
==========================================
<?xml version="1.0"?>
<headend headendId="TX02217">
        <name>Grande Gables at The Terrace</name>
        <mso msoId="17541">Grande Communications</mso>
        <marketIds>
            <marketId type="DMA">635</marketId>
        </marketIds>
        <postalCodes>
            <postalCode>11111</postalCode>
            <postalCode>22222</postalCode>
            <postalCode>33333</postalCode>
            <postalCode>78746</postalCode>
        </postalCodes>
        <location>Austin</location>
        <lineup>
            <station prgSvcId="20014">
                <chan effDate="2006-01-16" tier="1">002</chan>
            </station>
            <station prgSvcId="10722">
                <chan effDate="2006-01-16" tier="1">003</chan>
            </station>
        </lineup>
        <areasServed>
            <area>
                <community>Thorndale</community>
                <county code="45331" size="D">Milam</county>
                <state>TX</state>
            </area>
            <area>
                <community>Thrall</community>
                <county code="45491" size="B">Williamson</county>
                <state>TX</state>
            </area>
        </areasServed>
    </headend> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:24:47.070

编辑：哦，你想返回父块？一瞬间。

这是一个将所有邮政编码提取到数组中的示例。

[http://codepad.org/kHss4MdV](http://codepad.org/kHss4MdV)

```
<?php

$string='<lineups country="USA">
 <headend headendId="TX02217">
  <name>Grande Gables at The Terrace</name>
  <mso msoId="17541">Grande Communications</mso>
  <marketIds>
   <marketId type="DMA">635</marketId>
  </marketIds>
  <postalCodes>
   <postalCode>11111</postalCode>
   <postalCode>22222</postalCode>
   <postalCode>33333</postalCode>
   <postalCode>78746</postalCode>
  </postalCodes>
  <location>Austin</location>
  <lineup>
   <station prgSvcId="20014">
    <chan effDate="2006-01-16" tier="1">002</chan>
   </station>
   <station prgSvcId="10722">
    <chan effDate="2006-01-16" tier="1">003</chan>
   </station>
  </lineup>
  <areasServed>
   <area>
    <community>Thorndale</community>
    <county code="45331" size="D">Milam</county>
    <state>TX</state>
   </area>
   <area>
    <community>Thrall</community>
    <county code="45491" size="B">Williamson</county>
    <state>TX</state>
   </area>
  </areasServed>
 </headend></lineups>';

$dom = new DOMDocument();
$dom->loadXML($string);

$xpath = new DOMXPath($dom);
$elements= $xpath->query('//lineups/headend/postalCodes/*[text()=78746]');

if (!is_null($elements)) {
  foreach ($elements as $element) {
    echo "<br/>[". $element->nodeName. "]";

    $nodes = $element->childNodes;
    foreach ($nodes as $node) {
      echo $node->nodeValue. "\n";
    }
  }
} 
```

输出：

```
<br/>[postalCode]78746 
```

# jquery - “跳出” keyup() 事件

> ID：15345617
> 
> 赞同：0
> 
> 时间：2013-03-11T18:13:33.500
> 
> 标签：jquery

```
$('input[type="text"]').keyup(function(e){

     if(e.which === 13){
         //if enter is pressed
         //ignore the rest of the code below
     }

     doStuff();
}); 
```

在某些条件下（例如按下回车键时）跳过其余代码的正确语法是什么。我知道我只会将它包装在 if 语句中，但我想知道是否有类似于`return false;`.

但是，我知道 return false 会同时执行`e.stopPropagation()`and `e.preventDefault()`，在这种情况下，这显然不是我真正想要的。也许返回一个布尔值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:15:48.567

只需一个`return`语句也可以做到这一点。`return`将导致函数立即退出，之后的任何代码都不会执行。

```
$('input[type="text"]').keyup(function(e){

     if(e.which === 13){
         //if enter is pressed
         //ignore the rest of the code below
         return;
     }

     doStuff();
}); 
```

**编辑 ：**

TJCrowder 已将这些宝贵的信息放在评论中。所以只要把它放在这里，我同意它。

知道在 JavaScript 中根本不使用`return`语句的函数（因此，只是通过到达其代码末尾“返回”）、`return;`不带参数的使用和使用`return undefined;`. 在所有三种情况下，调用函数的代码都将 undefined 视为调用的结果。

# php - PHP - Thrift 0.9.0 - Class 'Thrift\Transport\TTransport' not found in TSocket.php

> ID：15345618
> 
> 赞同：1
> 
> 时间：2013-03-11T18:13:34.233
> 
> 标签：php, hbase, thrift, thrift-protocol

Trying out using PHP with thrift and I can't run it properly due to being unable to find certain classes. I was able to do this in 0.8.0 fine, now that I've downloaded 0.9.0 I'm at a loss as to how I should include the thrift files properly.

Here is my snippet of code:

```
$GLOBALS['THRIFT_ROOT'] = '/home/user/final/Thrift';
require_once( $GLOBALS['THRIFT_ROOT'] . '/Transport/TSocket.php' );
require_once( $GLOBALS['THRIFT_ROOT'] . '/Transport/TBufferedTransport.php' );
require_once( $GLOBALS['THRIFT_ROOT'] . '/Protocol/TBinaryProtocol.php' );
require_once( 'Hbase/Hbase.php');
require_once( 'Hbase/Types.php');

use Hbase\HbaseClient;

try
{
    $socket = new TSocket('127.0.0.1', 9090);
    $transport = new TBufferedTransport($socket, 1024, 1024);
    $protocol = new TBinaryProtocolAccelerated($transport);
    $client = new HbaseClient( $protocol );
    $transport->open();

    //show all tables
    $tables = $client->getTableNames();
    foreach ( $tables as $name )
    {
        echo( "  found: {$name}\n" );
    }
}
catch (Exception $e)
{
    echo "Exception: %e\r\n";
} 
```

All files are layed out properly in the directories as seen here:

![HBase Includes - PHP](../Images/bfcddf0d2e09a73b77760b5e703ad5e3.png) But when I run the file from the command line (php -f index.php) I'm receiving this error:

> Class 'Thrift\Transport\TTransport' not found in /home/user/final/Thrift/Transport/TSocket.php on line 35

I'm really at a loss as to what I should do next, I'm not familiar with using the "use" command or "namespace" in PHP, which I have a feeling would help solve this. The thrift README for php also mentions using symfony, which is just further confusing me.

Any advice would be greatly appreciated!

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-09T22:50:14.553

命名空间 像这样：

```
use Thrift\Transport\TSocket;
use Thrift\Transport\TBufferedTransport;
use Thrift\Protocol\TBinaryProtocolAccelerated;

    try {
                $socket = new TSocket('xxxxx', 9090);
                $transport = new TBufferedTransport($socket, 1024, 1024);
                $protocol = new TBinaryProtocolAccelerated($transport);
                $client = new HbaseClient($protocol);
                $transport -> open();

                //show all tables
                $tables = $client -> getTableNames();
                foreach ($tables as $name) {
                    echo("  found: {$name}\n");
                }
            } catch (Exception $e) {
                print_r($e);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T14:37:55.600

使用类加载器。Hbase 类不支持 classLoader，但使用 Thrift 命名空间。

```
<?php
define('THRIFT_PATH', __DIR__);

require_once THRIFT_PATH . '/Thrift/ClassLoader/ThriftClassLoader.php';

$classLoader = new Thrift\ClassLoader\ThriftClassLoader();
$classLoader->registerNamespace('Thrift', THRIFT_PATH);
$classLoader->register();

// (!) include after classLoader
require_once 'Hbase/Hbase.php';
require_once 'Hbase/Types.php';

try
{
    $socket = new Thrift\Transport\TSocket('127.0.0.1', 9090);
    $transport = new Thrift\Transport\TBufferedTransport($socket, 1024, 1024);
    $protocol = new Thrift\Protocol\TBinaryProtocolAccelerated($transport);
    $client = new Hbase\HbaseClient($protocol);
    $transport->open();

    //show all tables
    $tables = $client->getTableNames();
    foreach ($tables as $name)
    {
        echo "found: {$name}\n";
    }
}
catch (Exception $e)
{
    echo "Exception: %e\r\n";
} 
```

PS 此代码适用于您的目录结构：

![在此处输入图像描述](../Images/bfcddf0d2e09a73b77760b5e703ad5e3.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-17T09:04:57.110

您需要保留 Thrift 父目录名，不要重命名它；像这样的目录结构

Thrift/Base Thrift/ClassLoader Thrfit/xxxx

例如我把整个 Thrift 文件夹放在 htdocs\thrift-0.9.3\

然后它看起来像这个img [![在此处输入图像描述](../Images/0971694ebebdac5a6b6d50199f5dad32.png)](https://i.stack.imgur.com/d5iRA.png)

php代码应该是这样的：

```
<?php
ini_set('display_error', E_ALL);
$THRIFT_ROOT = __DIR__.'/thrift-0.9.3';
require_once $THRIFT_ROOT . '/Thrift/ClassLoader/ThriftClassLoader.php';
use Thrift\ClassLoader\ThriftClassLoader;

$classLoader = new ThriftClassLoader();
$classLoader->registerNamespace('Thrift', $THRIFT_ROOT);
$classLoader->register();

use Thrift\Transport\TSocket;
use Thrift\Transport\TBufferedTransport;
use Thrift\Protocol\TBinaryProtocolAccelerated;

// (!) include after classLoader
/* Dependencies. In the proper order. */
require_once    './hbase-1.2.0-thrift2/THBaseService.php';
require_once    './hbase-1.2.0-thrift2/Types.php';

$host = 'xxxxx';
$port = 19090;
$tableName='test';
$rowKey='b';

$socket = new TSocket($host, $port);
$transport = new TBufferedTransport($socket);
$protocol = new TBinaryProtocolAccelerated($transport);
$client = new THBaseServiceClient($protocol);
$transport->open();

$get = new TGet();
$get->row = $rowKey;

$arr = $client->get($tableName, $get);
$data = array();
$results = $arr->columnValues;
foreach($results as $result)
{
    $qualifier = (string)$result->qualifier;
    $value = $result->value;
    $data[$qualifier] = $value;
}
var_dump($data);
$transport->close(); 
```

# magento - Magento: limit 3 products from category per order

> ID：15345619
> 
> 赞同：0
> 
> 时间：2013-03-11T18:13:35.537
> 
> 标签：magento

I'm trying to set up a sample products category in Magento to allow people to select up to 3 free samples for every purchase, but how can I limit only 3 samples from that category per order?

[EDIT]

This is the current config.xml inside the dir app/code/local/MagePal/LimitCartProductByCategory/etc/config.xml:

```
<?xml version="1.0"?>
<config>
<modules>
    <MagePal_LimitCartProductByCategory>
        <version>1.0.1</version>
    </MagePal_LimitCartProductByCategory>
</modules>

<global>
    <models>
        <limitcartproductbycategory>
            <class>MagePal_LimitCartProductByCategory_Model_Observer</class>
        </limitcartproductbycategory>
    </models>
     <events>
        <checkout_cart_product_add_after>
            <observers>
                <limitcartproductbycategory>
                    <type>singleton</type>
                    <class>MagePal_LimitCartProductByCategory_Model_Observer</class>
                    <method>cartlimit</method>
                </limitcartproductbycategory>
            </observers>
        </checkout_cart_product_add_after>
    </events>
</global>
</config> 
```

MagePal_EnableDuplicateProductStatus.xml in dir app/etc/modules/MagePal_LimitCartProductByCategory.xml:

```
<?xml version="1.0"?>
<config>
<modules>
    <MagePal_LimitCartProductByCategory>
        <active>true</active>
        <codePool>local</codePool>
    </MagePal_LimitCartProductByCategory>
</modules>
</config> 
```

This is the current Observer.php inside the dir app/code/local/MagePal/LimitCartProductByCategory/Model/Observer.php:

```
class MagePal_LimitCartProductByCategory_Model_Observer 
{

public function cartlimit(Varien_Event_Observer  $observer)
{
    $category_ids = array();

    $quote = Mage::getSingleton('checkout/session')->getQuote();
    foreach($quote->getAllVisibleItems() as $item){
          $product = Mage::getModel('catalog/product')->load($item->getId());
          $product_category_ids = explode(",", $product->getCategoryIds());
          //$product_category_ids = $product->getCategoryIds();

          array_push($category_ids, $product_category_ids);
    }

    $justAdded = $observer->getQuoteItem();
    $justAddedCategoryIds = explode(",", $product->getCategoryIds());
    $justAddedId = in_array(58, $justAddedCategoryIds);

    $productJustAdded = Mage::getModel('catalog/product')->load($justAdded->getId());

    //total the catalogegory id in $category_ids
    //if $productJustAdded->getCategoryIds exist in $category_ids, 
    //then check to see if category id count greater than 3
    // if true then add error msg and try setting the qty to 0

    $freesample = 58;
    $tmp = array_count_values($category_ids);
    $cnt = $tmp[$freesample];

    echo $cnt;

    if ($justAddedId == true && $cnt > 3) {

        $quote->removeItem($justAdded->getId())->save();
        Mage::app()->getLayout()->getMessagesBlock()->setMessages('You can only have 3 free samples. Please remove a sample to add another.');
        Mage::app()->getLayout()->getMessagesBlock()->getGroupedHtml();
    }

    return $this;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:49:17.780

为事件创建观察者`checkout_cart_product_add_after`

看看我的示例@[更改重复产品的 Magento 默认状态，以](https://stackoverflow.com/questions/12677971/change-magento-default-status-for-duplicated-products)获取有关如何在观察者上创建的帮助

```
 <events>
        <checkout_cart_product_add_after>
            <observers>
                <enableduplicateproductstatus>
                    <type>singleton</type>
                    <class>limitcartproductbycategory/observer</class>
                    <method>cartlimit</method>
                </enableduplicateproductstatus>
            </observers>
        </checkout_cart_product_add_after>
    </events> 
```

创建：app/code/local/MagePal/LimitCartProductByCategory/Model/Observer.php

```
class MagePal_LimitCartProductByCategory_Model_Observer 
{

    public function cartlimit(Varien_Event_Observer  $observer)
    {
        $category_ids = array();

        $quote = Mage::getSingleton('checkout/session')->getQuote();
        foreach($quote->getAllVisibleItems() as $item){
              $product = Mage::getModel('catalog/product')->load($item->getId());
              $product_category_ids = explode(",", $product->getCategoryIds());
              //$product_category_ids = $product->getCategoryIds();

              array_push($category_ids, $product_category_ids);
        }

        $justAdded = $observer->getQuoteItem();

        $productJustAdded = Mage::getModel('catalog/product')->load($justAdded->getId());

        //total the category id in $category_ids
        //if $productJustAdded->getCategoryIds exist in $category_ids, 
        //then check to see if category id count greater than 3
        // if true then add error msg and try setting the qty to 0

        return $this;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:17:59.520

You should write an observer that observes the cart and checks that only 3 samples are put to it.

Here an example

```
 <checkout_cart_product_add_after>
            <observers>
                <tibdev_fancybox_cart_observer>
                    <type>singleton</type>
                    <class>Tibdev_Fancybox_Model_Cart_Observer</class>
                    <method>applyFancybox</method>
                </tibdev_fancybox_cart_observer>
            </observers>
        </checkout_cart_product_add_after> 
```

Here you can see my observer that observes the event checkout_cart_product_add_after.

# java - 我的小程序无法连接到 Servlet 并传输数据

> ID：15345628
> 
> 赞同：1
> 
> 时间：2013-03-11T18:14:19.953
> 
> 标签：java, mysql, servlets, applet, httpurlconnection

我想将一些数据从我的 Applet 发送到一个特定的 Servlet，该 Servlet 应该连接到 MySQL 数据库并存储传输的数据。在 Applet 端，我使用这种方法将数据从 applet 传输到 servlet：

```
 public void sendData() {
        try {
            URL postURL = new URL("http://localhost:8080/MyApplet/mydb");
            HttpURLConnection conn = (HttpURLConnection) postURL.openConnection();
            conn.setRequestMethod("POST");
            conn.setDoOutput(true);
            conn.connect();

            String param1 = "data1";
            String param2 = "data2";
            String param3 = "data3";

            PrintWriter out = new PrintWriter(conn.getOutputStream());
            out.write("param1=" + URLEncoder.encode(param1, "UTF-8")
                    + "&param2=" + URLEncoder.encode(param2, "UTF-8")
                    + "&param3=" + URLEncoder.encode(param3, "UTF-8"));
            out.flush();

        } catch (Exception e) {
            System.err.println(e.getMessage());
            JOptionPane.showMessageDialog(GameApplet.this, e.getMessage(), "Exception", JOptionPane.ERROR_MESSAGE);
        }
    } 
```

MyApplet/mydb 是我的Selrvet 的路径。在 Servlet 方面，我编写了以下代码：

```
 protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");

        String parameter1 = request.getParameter("param1");
        String parameter2 = request.getParameter("param2");
        String parameter3 = request.getParameter("param3");

        connectToDB();
        insert(parameter1, parameter2, parameter3);
//        insert("X", "Y", "Z");
        closeDB();
} 
```

从和`processRequest()`调用_ 当我直接从其 http 链接调用 Servlet 并毫无问题地填充数据库时，Servlet 可以正常工作，但是当我从 applet 调用它时，什么也没有发生，甚至没有任何异常！老实说，他们无法相互交流，我真的很困惑。`doGet()``doPost()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:17:08.673

我最终使用此代码发送了多个参数：（这只是一个建议，也许还有更好的解决方案，但它对我有用）

> 小程序方面：

```
 URL helloServletURL = new URL(getCodeBase().toString() + "mydb");
    URLConnection urlConnection = helloServletURL.openConnection();
    urlConnection.setDoInput(true);
    urlConnection.setDoOutput(true);
    urlConnection.setUseCaches(false);

    String param1 = "data1";
    String param2 = "data1";
    String param3 = "data1";

    ObjectOutputStream objOut = new ObjectOutputStream(urlConnection.getOutputStream());
    objOut.writeUTF(param1 + "%" + param2 + "%" + param3);

    objOut.flush(); 
```

> Servlet 端：

```
 ObjectInputStream dataInput = new ObjectInputStream(request.getInputStream());
    String param = dataInput.readUTF();

    dataInput.close();

    String[] values = param.split("%"); 
```

# javascript - 从 html 中删除

> ID：15345631
> 
> 赞同：2
> 
> 时间：2013-03-11T18:14:29.603
> 
> 标签：javascript, html, jquery, css

我想`&nbsp;`从下面的代码中删除。

```
<div class="country-IN">
   <span class="locality">Barnala</span>
   &nbsp;&nbsp;
   <span class="state">Punjab</span>
   &nbsp;&nbsp;
   <span class="country">India</span>
</div> 
```

请帮我摆脱它。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-11T18:16:56.773

我建议：

```
var el = document.querySelector('.country-IN');
el.innerHTML = el.innerHTML.replace(/&nbsp;/g,''); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/8aL3J/)。

或者，使用 jQuery：

```
$('.country-IN').html(function(i,h){
    return h.replace(/&nbsp;/g,'');
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/8aL3J/1/)。

甚至：

```
$('.country-IN').children().each(function(i,e){
    this.parentNode.removeChild(this.nextSibling);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/8aL3J/2/)。

*尽管简单地编辑 HTML 文件本身并删除*这些字符串会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:19:25.397

您可以获取所需的元素并将其作为元素的 html 添加回来

```
$('.country-IN').html(function(i,v){
   return $('<div>').append($(this).children('*')).html(); 
}); 
```

[小提琴](http://jsfiddle.net/y5Ly8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:47:05.110

图书馆不可知论者：

```
(function() {
var country_els = document.querySelectorAll('.country-IN');

for (var i = 0; i < country_els.length; i++) {
    for (var j = 0; j < country_els[i].childNodes.length; j++) {
        var node = country_els[i].childNodes[j];
        if (typeof node.tagName === 'undefined') {
            node.parentNode.removeChild(node);
        }
    }  
}
})(); 
```

[小提琴](http://jsfiddle.net/VmeGJ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-22T21:42:42.177

我们不需要为此编写 javascript。我们可以`&nbsp;`只用 CSS 隐藏。添加`font-size: 0`到容器和`font-size: 1rem`子项。

```
.second {
  font-size: 0;
}

.second > span {
  font-size: 1rem;
}
```

```
<div class="country-IN">
  <span class="locality">Barnala</span>
  &nbsp;&nbsp;
  <span class="state">Punjab</span>
  &nbsp;&nbsp;
  <span class="country">India</span>
</div>

<div class="country-IN second">
  <span class="locality">Barnala</span>
  &nbsp;&nbsp;
  <span class="state">Punjab</span>
  &nbsp;&nbsp;
  <span class="country">India</span>
</div>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-19T10:02:24.047

首先，获取整个 HTML div 并将其转换为字符串

```
convertHtmlToText(str)
{
   str = str.toString();
  return str.replace(/<[^>]*(>|$)|&nbsp;|&zwnj;|&raquo;|&laquo;|&gt;/g, ' ');
} 
```

您将获得没有 HTML 标记和   等的文本

您可以在上述解决方案中添加多个条件

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-11T18:18:17.587

您可以使用 PHP 中的 preg_replace 来执行此操作。

```
<?php
$html = "YOUR HTML"
$new = preg_replace("!&nbsp;!", "", $html);
print($new);
?> 
```

我以前使用过这个脚本，它应该可以正常工作。

# php - 在同一页面上的 php 和 javascript 之间共享数据

> ID：15345633
> 
> 赞同：0
> 
> 时间：2013-03-11T18:14:34.423
> 
> 标签：php, javascript

我正在尝试在同一`.php`页面上共享数据。我通过 POST 方法在页面上接收到一些数据，并且我想在页面加载期间在该页面上的 javascript 上使用它。但不知何故 javascript 正在显示价值`undefined`。是什么原因，我该如何解决？

```
<?php
    echo "<label id='origin' style='visibility:hidden;'>".$_POST["startStation"]."</label>";
?> 
```

```
<script type="text/javascript">
    alert(document.getElementById('origin').value);
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:16:03.070

因为`label`没有`.value`. 要访问该数据，您需要使用`.innerHTML`.

```
<?php echo "<label id='origin' style='visibility:hidden;'>".$_POST["startStation"]."</label>"; ?>
<script type="text/javascript"> alert(document.getElementById('origin').innerHTML); </script> 
```

# java - 在测试失败之前尝试在 before() 方法上运行重试

> ID：15345634
> 
> 赞同：4
> 
> 时间：2013-03-11T18:14:34.927
> 
> 标签：java, unit-testing, testing, junit, integration-testing

我有一个不稳定的 ENV，我在上面运行 JUnit 测试。

许多测试在`before()`方法上失败，因为连接/网络/非测试相关问题，我想添加一个重试之前方法的功能 - 在完全失败测试之前。

我已经添加了代码片段，但我不确定这是最好的方法/做法......

```
//hold the max number of before attempts
final private int retries = 3;
//will count number of retries accrued
private int retrieCounter = 0 ;

@Before
public void before() {
    try {
        //doing stuff that may fail due to network / other issues that are not relevant to the test
        setup = new Setup(commonSetup);
        server = setup.getServer();
        agents = setup.getAgents();
        api = server.getApi();
        setup.reset();
    }
    //if before fails in any reason
    catch (Exception e){
        //update the retire counter
        retrieCounter++;
        //if we max out the number of retries exit with a runtime exception
        if (retrieCounter > retries)
            throw new RuntimeException("not working and the test will stop!");
        //if not run the before again
        else this.before();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T04:10:01.537

您可以为此使用[TestRule](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/rules/TestRule.java)，请查看我对[如何立即重新运行失败的 JUnit 测试的回答？](https://stackoverflow.com/questions/8295100/how-to-re-run-failed-junit-tests-immediately/8301639#8301639). 这应该做你想要的。如果您使用该答案中定义的重试规则，如果它抛出异常，这实际上将重新执行 before()：

```
public class RetryTest {
  @Rule
  public Retry retry = new Retry(3);

  @Before
  public void before() {
    System.err.println("before");
  }

  @Test
  public void test1() {
  }

  @Test
  public void test2() {
      Object o = null;
      o.equals("foo");
  }
} 
```

这会产生：

```
before
test2(junit_test.RetryTest): run 1 failed
before
test2(junit_test.RetryTest): run 2 failed
before
test2(junit_test.RetryTest): run 3 failed
test2(junit_test.RetryTest): giving up after 3 failures
before 
```

# assembly - 用 MASM 汇编语言定义带参数的函数

> ID：15345645
> 
> 赞同：2
> 
> 时间：2013-03-11T18:15:06.340
> 
> 标签：assembly, masm

我正在尝试用 x86 汇编语言编写一个接受三个参数的函数。是否可以在 MASM 汇编语言中定义具有多个参数的函数？

```
//this is pseudocode: I'm trying to convert this to a valid macro in MASM
//if var1 is equal to var2, jump to the label jumpToHere
function jumpIfEqual(var1, var2, jumpToHere){
    cmp var1, var2;
    je jumpToHere;
} 
```

如果我可以编写一个有效的函数来做到这一点，那么`jumpIfEqual(5, 5, jumpToHere)`就相当于

```
cmp 5, 5;
je jumpToHere; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:12:18.653

[是的，你可以](http://msdn.microsoft.com/en-us/library/01d2az3t%28v=vs.80%29.aspx)。

例如：

```
jumpIfEqual PROC var1:DWORD, var2:DWORD, jmpAddress:DWORD
    mov eax,var1
    cmp eax,var2
    jne skip
    pop eax
    push jmpAddress
    skip:
    ret
jumpIfEqual ENDP

....

push OFFSET jumpToHere
mov eax, 5
push eax
push eax
call jumpIfEqual 
```

# java - Java控制台日志如何隐藏方法执行

> ID：15345647
> 
> 赞同：0
> 
> 时间：2013-03-11T18:15:15.367
> 
> 标签：java, windows, maven, logging

我正在运行一个 .jar 文件，当我运行它时，我看到我的方法正在执行......

```
INFO: ------- Order #295389
Mar 11, 2013 2:10:31 PM com.production.tasks.ImportNewOrders checkForOrders
INFO:     - Order has already been imported
Mar 11, 2013 2:10:31 PM com.production.tasks.ImportNewOrders checkForOrders
INFO: ...finished fetching orders, will check again in 60 seconds 
```

我宁愿只看到...

```
INFO: ------- Order #295389
INFO:     - Order has already been imported
INFO: ...finished fetching orders, will check again in 60 seconds 
```

如何阻止输出中的方法执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:20:13.090

您必须更改日志级别以仅记录更高级别的日志。现在`INFO`（根据您的输出猜测）您可以将其设置为`WARN`仅记录警告或更高级别的消息。您可以在配置文件中找到这些设置。有关不同级别的更多信息，请访问 log4j 的此[链接](http://www.tutorialspoint.com/log4j/log4j_quick_guide.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:32:54.030

如果您使用的是 Log4J，请找到您的 log4j.properties 文件。请注意使用的 ConversionPattern 属性。特别是，我认为您需要删除`C`（完全限定的类名）和`M`（方法名）。有关选项的完整列表，请参见[此处](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:17:46.010

那不是标准的java输出。看起来您有一个日志框架将其记录下来（可能是 log4j、slf4j、logback、java logger 或 commons logging）。您必须将日志配置为不打印出方法信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T19:13:30.973

这不是 log4j 做的，但它实际上是在`java.util.logging`记录每个方法调用。

这将隐藏方法调用：

`System.setProperty("java.util.logging.SimpleFormatter.format", "%4$s: %5$s%n");`

# c - 使用 ffmpeg api 或 C 代码处理 .raw 文件图像

> ID：15345648
> 
> 赞同：0
> 
> 时间：2013-03-11T18:15:16.270
> 
> 标签：c, qt, image-processing, ffmpeg

我正在尝试处理使用 vrl2 捕获的 .raw 图像文件，它是来自 Logitech c920 网络摄像头的具有 yuv422 色彩空间的 h264 编码图像，[dcraw](http://www.cybercom.net/~dcoffin/dcraw/)对我不起作用，但是从我[之前的问题](https://stackoverflow.com/questions/15031183/processing-raw-images-using-ffmpeg-or-opencv)来看，这个命令在低性能下工作正常（a 32kb jpg 图像，但是使用 opencv 捕获我得到了相同 640x480 分辨率的 900kb 图像）：

> ffmpeg -f rawvideo -s 640x480 -pix_fmt yuyv422 -i frame-1.raw frame-1.jpg

我需要用 C 或 ffmpeg api/OpenCV 等编写的代码 .. 来执行与此命令相同的操作，我不想在 Qt 中使用 QProcess（我正在使用 Qt 的服务器上工作，我正在尝试发送从 Raspberry PI 到服务器的原始文件并对其进行处理），dcraw 输出是损坏的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:28:15.593

[http://ffmpeg.org/doxygen/trunk/examples.html](http://ffmpeg.org/doxygen/trunk/examples.html)

There should be some api samples in there that show how to get the image out with that specific encoding.

When interacting with a RAW file, I have also used IrfanView. If you know the headersize of the file and the width and the height and the bits per pixel per color, you can see what it looks like quickly that way.

EDIT: I tried using Irfanview with your RAW, and I got something close, but not quite. The coloring was always off. I don't think it can handle that particular encoding of a RAW file right now.

# iframe - 如何只刷新一次 iframe 父窗口？

> ID：15345650
> 
> 赞同：0
> 
> 时间：2013-03-11T18:15:35.597
> 
> 标签：iframe

如何只刷新 iframe 父窗口一次？

```
window.top.location = "http://www.site.com"; 
```

带来无尽的清爽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:20:04.663

用一个简单的 `if`？

```
if ( window.top.location <> "http://www.site.com") { window.top.location = "http://www.site.com"; } 
```

# python - 是否有关于 python 请求模块 1.0 版中不兼容更改的指南？

> ID：15345653
> 
> 赞同：1
> 
> 时间：2013-03-11T18:15:36.930
> 
> 标签：python, python-requests

流行的 Python requests 模块去年发布到 1.0，并进行了许多向后不兼容的 API 更改。我确信它们很棒，但我正在尝试将一些现有代码移植到最新版本 1.1，但我无法弄清楚我所依赖的功能发生了什么。

具体来说，`return_response`关键字参数 to`requests.get()`不再有效并且`requests.defaults`不再存在。目前尚不清楚是否有任何方法可以设置`max_retries`。哎呀，我什至找不到宣布 Requests 1.0 的博客文章！Hacker News 上发布的链接是 404： http: [//kennethreitz.org/announcing-requests-v100.html](http://kennethreitz.org/announcing-requests-v100.html)

因此，我要么正在寻找有关 Requests 1.0 与以前版本（我认为是 14.2）之间不兼容差异的指南，要么至少是对上述问题的一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:22:13.840

以下是我发现的直接移植问题的解决方案：

```
# instead of
requests.get(..., return_response=false)
# use:
requests.Request(...).prepare()

# instead of
request.full_url
# use a requests.PreparedRequest and
request.url

# for an unsent request, instead of
request.send()
# use
s = requests.Session()
s.send(request)

# instead of
requests.defaults.defaults['max_retries'] = val
# use
requests.adapters.DEFAULT_RETRIES = val 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T23:11:38.470

自从提出这个问题后，文档中就添加了[迁移指南。](http://docs.python-requests.org/en/latest/api.html#migrating-to-1-x)

# azure - Visual Studio 2012 - Windows Azure：连接字符串不起作用（无数据库交互）

> ID：15345660
> 
> 赞同：0
> 
> 时间：2013-03-11T18:16:00.190
> 
> 标签：azure, connection, azure-sql-database

我正在尝试使用 Windows Azure 提供的云技术将我的 Visual Studio 2012 MVC 4 项目联机。虽然我可以访问我的网站（它可以很好地上传并且可以访问），但我无法使数据连接正常工作。例如，当我尝试将新用户注册到我的实时应用程序时，它返回给我一个简单的错误：“处理您的请求时发生错误”（这是法语的翻译，不过......--'）

我已经在网络上关注了一堆教程，但似乎没有一个能让事情奏效。这是我实际使用的连接字符串：

```
 <add name="yoombysql"
providerName="System.Data.SqlClient"
connectionString="Data Source=tcp:rmy11na948.database.windows.net,1433;Initial Catalog=yoombysql;Integrated Security=False;User Id=yoomby;Password=PASSWORD;Encrypt=True;TrustServerCertificate=False;MultipleActiveResultSets=True" /> 
```

这不是我尝试过的唯一方法，但我的想法已经不多了......所以如果有人对此有提示或线索......提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:28:06.237

确保在右侧“管理允许的 IP 地址”下的 DB rmy11na948 控制面板中，您已选中 WINDOWS AZURE SERVICES =“YES”，如果您在 Azure 之外访问 Azure SQL，则需要添加您的特定 IP测试地址。

**更新**：您还应该添加完整的 userId`User Id=yoomby@rmy11na948;`

同样，从右侧的门户中单击“显示连接字符串”，复制 ADO.NET 连接字符串并替换 {your_password_here}。如果失败，请执行[Windows Azure SQL 数据库防火墙](http://msdn.microsoft.com/en-us/library/windowsazure/ee621782.aspx)中的步骤。

**UPDATE-2**：对于实体框架连接，请阅读[如何：使用 ADO.NET 实体框架连接到 Windows Azure SQL 数据库](http://msdn.microsoft.com/en-us/library/windowsazure/ff951633.aspx)并阅读[实体框架和 SQL Azure](http://msdn.microsoft.com/en-us/data/gg190738.aspx)

# javascript - 后退/前进按钮单击之前的replaceState

> ID：15345668
> 
> 赞同：0
> 
> 时间：2013-03-11T18:16:22.487
> 
> 标签：javascript, html

我需要`replaceState`在用户离开当前页面（例如后退/前进按钮单击）之前调用，以便下次加载页面时历史记录具有最新状态`popstate`。如何？

* * *

我想另一种选择是在`replaceState`每次状态变化时调用，但这对我来说听起来有点乱。

* * *

找到了[解决方法](https://stackoverflow.com/a/10703979/39923)。“pre” popstate 事件将是理想的选择。

# linux - 替代 gdb 从核心提取堆栈跟踪？(Linux)

> ID：15345672
> 
> 赞同：1
> 
> 时间：2013-03-11T18:16:30.393
> 
> 标签：linux, stack-trace, core, suse

尝试提取堆栈跟踪时 GDB 崩溃。它是 gdb 的旧版本，相关人员不想升级。有没有其他工具可以用来提取痕迹？操作系统是 SuSE 10 SP3。

我看过以下主题：

*   如何从 C 中的核心转储文件生成堆栈跟踪，而不调用 gdb 等外部工具
*   如何从核心转储中读取帧（没有 GDB）？

但他们都在寻找编程方法，我正在寻找其他工具。

谢谢，坦尼亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:26:47.290

作为记录，最新版本的[libunwind](http://www.nongnu.org/libunwind/)库似乎支持检查核心文件和获取回溯。不过，我不知道有任何独立工具使用它。

# javascript - 如何使用 jQuery 定位点击下的元素

> ID：15345675
> 
> 赞同：3
> 
> 时间：2013-03-11T18:16:32.787
> 
> 标签：javascript, jquery, html

我想将所有内容隐藏在用户单击的元素下（但保留上面的内容）。看看这个演示：http: [//jsfiddle.net/dS2vA/](http://jsfiddle.net/dS2vA/)

所以如果你点击第二个，它下面`<li>`的三个`<li>`s 应该被隐藏了。如果单击 4th `<li>`，则应仅隐藏第 5 个元素。

我尝试这样做，`:not('clicked')`但它也针对单击元素上方的元素。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T18:18:10.340

只需使用以下内容：

```
$(this).nextAll().hide(); 
```

**演示：http:** [//jsfiddle.net/dS2vA/1/](http://jsfiddle.net/dS2vA/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:30:34.347

尝试这样的事情：

```
$('ul li').click(function() {
    $('ul li').each(function() {
        $(this).removeClass();
    })
    $(this).nextAll("li").slice(0,3).addClass('clicked');
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T18:34:01.207

除了**VisioN**的答案，更具体地说，您可以添加一个选择器过滤器（“li”），`nextAll()`如下所示：

```
$(this).nextAll("li").hide(); 
```

# c++ - C++ 图形界面框架/库

> ID：15345679
> 
> 赞同：2
> 
> 时间：2013-03-11T18:16:48.487
> 
> 标签：c++, interface, graphic

我需要编写一个游戏，它实际上是一个纸牌游戏，我必须用图形界面制作它，但我不知道 C++ 图形界面库。

C++ 是否有类似于 Python 的 Tkinter 或 Pygame 的东西（我不知道是否还有其他的）。

如果有库，它们是否适合构建简单的纸牌游戏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:21:26.467

最常见的跨平台 GUI 工具包是[Qt](http://qt-project.org)，我会为任何 C++ GUI 应用程序使用它。在 Linux 上特别容易，所有发行版都有它的软件包，但 Windows 也有针对不同编译器的二进制安装程序。

您可以使用 Netbeans，但我真的会使用 Qt Creator 进行 Qt 编程。

对于使用 Qt 的纸牌游戏，QGraphicsView 可能是最简单的，如果您想要动画纸牌移动等。对于更静态的 UI，基于 QWidget 的 UI 将非常容易。对于现代视觉丰富的 UI，QML（但 GUI 部分不是 C++）会很好地工作。

Qt 游戏开发的致命弱点是实时游戏音效，但如果你不关心跨平台的东西，你可以轻松混合 Windows 特定的音效，而纸牌游戏也不需要太多，如果有的话。另外，我认为 Qt5 实际上可能对声音有所改进，使纯 Qt 足以胜任游戏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:23:07.960

如果是游戏，可以考虑[SDL](http://www.libsdl.org/)

有趣的事实：pygame 由 SDL 提供支持。

顺便说一句，如果您想在游戏中使用 GUI 控件（[http://www.tayloredge.com/utilities/vbapps/gui.GIF](http://www.tayloredge.com/utilities/vbapps/gui.GIF)），您将需要一个 GUI 库。否则，像 SDL 这样的游戏库更适合您。

# google-analytics - 如何使用 GAPI 和 Google Analytics 获得每天的唯一访问量？

> ID：15345680
> 
> 赞同：2
> 
> 时间：2013-03-11T18:16:52.093
> 
> 标签：google-analytics, google-reporting-api

我在 Google Analytics 中有一个非常简单的自定义报告，其中列出了某个月份的日期、访问次数、唯一身份访问者和浏览量。

我正在尝试使用 GAPI 复制这个非常简单的报告，但我找不到将唯一身份访问者添加到我的表的简单方法。

请参阅下面的代码。如何修改此代码以显示唯一身份访问者？

```
$profile_id = "xxxxxxxx";
$report_id = "xxxxxxxx";
$dimensions = array('date');
$metrics = array('pageviews','visits');
$sort_metric = array('date'); 
$filter = null;
$start_date = '2013-02-01';
$end_date = '2013-02-28';
$start_index = 1;
$max_results = 10000;

echo '<table>';
echo '<tr>';
echo '<th>Date</th>';
echo '<th>Visits</th>';
echo '<th>Unique Visitors</th>';
echo '<th>Page Views</th>';      
echo '</tr>';   

$ga = new gapi('xx@xxxxxxxxx.com','xxxxxxxx'); 

$ga->requestReportData($profile_id, $dimensions, $metrics, $sort_metric, $filter, $start_date, $end_date, $start_index, $max_results); 

foreach($ga->getResults() as $result)
{
    echo '<td>' . $result->getDate() . '</td>';
    echo '<td>' . $result->getVisits() . '</td>';
    echo '<td>' . '?' . '</td>';  
    echo '<td>' . $result->getPageviews() . '</td>';  
    echo '</tr>';  
}
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-25T09:39:51.027

该指标称为访问者，没有访问者，您必须将维度更改为`userDefinedValue`

```
$profile_id = "xxxxxxxx";
$report_id = "xxxxxxxx";
$dimensions = array('userDefinedValue');
$metrics = array('pageviews','visits','visitors');
$sort_metric = array('date'); 
$filter = null;
$start_date = '2013-02-01';
$end_date = '2013-02-28';
$start_index = 1;
$max_results = 10000; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T21:33:14.557

该指标称为“访问者”。尝试将其添加到您的报告中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-06T12:23:17.710

```
$profile_id = "xxxxxxxx";
$report_id = "xxxxxxxx";
$dimensions = array('date');
$metrics = array('pageviews','visits','visitors');
$sort_metric = array('date'); 
$filter = null;
$start_date = '2013-02-01';
$end_date = '2013-02-28';
$start_index = 1;
$max_results = 10000; 
```

# python - 使用 Cherrpy.Tool() 定义自定义 Mako 工具失败

> ID：15345685
> 
> 赞同：0
> 
> 时间：2013-03-11T18:17:06.843
> 
> 标签：python, cherrypy, mako

我正在尝试通过以下内容在我的 cherrpy 服务器中定义我的自定义 Mako 加载程序`server.py`：

```
from my.path.templating import MakoLoader
from HandleEvent import HandleEvent

cherrypy.tools.mako = cherrypy.Tool('on_start_resource', MakoLoader(os.path.join(os.path.dirname(__file__), 'templates')))

root = HandleEvent()

conf = { '/' : { 'request.dispatch' : cherrypy.dispatch.MethodDispatcher()}}

app = cherrypy.tree.mount(root, '/', conf) 
```

然后我尝试使用自定义 mako 加载器作为我的`HandleEvent`类的装饰器，如下所示：

```
 class HandleEvent(object):
        exposed = True

    @cherrypy.tools.mako(template="template.html")
    def GET(self, **urlParams):
        return 'It worked!' 
```

但是，当我尝试启动服务器时，出现以下错误：

```
Traceback (most recent call last):
  File "/usr/local/bin/cherryd", line 5, in <module>
    pkg_resources.run_script('CherryPy==3.1.2', 'cherryd')
  File "/usr/lib/python2.6/dist-packages/pkg_resources.py", line 461, in run_script
    self.require(requires)[0].run_script(script_name, ns)
  File "/usr/lib/python2.6/dist-packages/pkg_resources.py", line 1194, in run_script
    execfile(script_filename, namespace, namespace)
  File "/usr/local/lib/python2.6/dist-packages/CherryPy-3.1.2-py2.6.egg/EGG-INFO/scripts/cherryd", line 95, in <module>
    options.imports)
  File "/usr/local/lib/python2.6/dist-packages/CherryPy-3.1.2-py2.6.egg/EGG-INFO/scripts/cherryd", line 15, in start
    exec "import %s" % i
  File "<string>", line 1, in <module>
  File "/var/my/path/server.py", line 4, in <module>
    from my.path.HandleEvent import http_methods_allowed
  File "/var/my/path/HandleEvent.py", line 63, in <module>
    class handleEvent(object):
  File "/var/my/path/HandleEvent.py", line 76, in HandleEvent
    @cherrypy.tools.mako(template="template.html")
AttributeError: 'Toolbox' object has no attribute 'mako' 
```

我不确定为什么会发生这种情况，因为我之前以这种方式定义了这个自定义加载器。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T05:27:52.173

在我`HandleEvent`将自定义 Mako 加载器分配给`cherrypy.tools.mako`. 所以正确的代码如下：

```
from my.path.templating import MakoLoader

cherrypy.tools.mako = cherrypy.Tool('on_start_resource', MakoLoader(os.path.join(os.path.dirname(__file__), 'templates')))

# The import should come here
from HandleEvent import HandleEvent
root = HandleEvent()

conf = { '/' : { 'request.dispatch' : cherrypy.dispatch.MethodDispatcher()}}

app = cherrypy.tree.mount(root, '/', conf) 
```

# blogs - 在 Orchard CMS 的 blogpost.list.cshtml 中显示 Mediapicker 字段

> ID：15345687
> 
> 赞同：1
> 
> 时间：2013-03-11T18:17:13.370
> 
> 标签：blogs, orchardcms

当我的博客显示`Parts.Blogs.BlogPost.List.cshtml`. 我去了`ContentItems`内容并在我的博客帖子中添加了一个`MediaPicker Field`调用`BlogPostImage`，我还在`Parts.Blogs.BlogPost.List.cshtml`我的主题中做了一个替代（这是我正在编辑的文件。我在那里的代码是：

```
@using Orchard.ContentManagement;
@{
IEnumerable<object> blogPosts =
    Model.ContentItems;
}
@if (blogPosts == null || blogPosts.Count() < 1)

{
    <p>@T("No posts.")</p>
}
else
{
    int count = 0;
    <div id="Blog">
        <div id="slides">
            <div class="slides_container">
                @foreach (dynamic post in blogPosts)
                {
                    count++;
                    string title = post.ContentItem.TitlePart.Title;
                    ContentItem item = post.ContentItem;
                    string text = post.ContentItem.BodyPart.Text;
                    string postImageUrl = post.BlogPostImage.Url;
                    <div class="slide">
                        <a href="@Url.ItemDisplayUrl(item)"><img src="@postImageUrl" width="625" height="400" alt="Slide @count.ToString()"></a>
                        <div class="caption" style="bottom: 0">
                          <h4><a href="@Url.ItemDisplayUrl(item)">@title</a></h4>
                        </div>
                    </div>      
                }
            </div>
        </div>
    </div>
} 
```

但是，我无法弄清楚如何将那个 mediapicker 字段调用到我的列表中。我尝试的任何方式都会在 href 中返回空白，并带有某种查询字符串。类似“？23423455657”的东西。我取下了变量，那个查询字符串仍然出现。我基本上想要完成的是将这些放入幻灯片中，使用 jquery 在`layout.cshtml`. TIA

//解决方案：

经过几天和几天的阅读和研究，我终于找到了一个可行的解决方案。

更换：

```
string postImageUrl = post.BlogPostImage.Url; 
```

和：

```
string postImageUrl =  ((ContentItem)post.ContentItem).Parts.SelectMany(p => p.Fields).Where(f => f.Name == "BlogPostImage").First().Storage.Get<string>(null); 
```

从这里得到它：http: [//blog.cloudconstruct.com/post/Creating-a-rotating-image-gallery-in-Orchard-CMS.aspx](http://blog.cloudconstruct.com/post/Creating-a-rotating-image-gallery-in-Orchard-CMS.aspx)

我希望它可以帮助任何困在同一条船上的人。我仍然很好奇为什么我不能简单地按照我的方式称呼它，但它现在可以工作了！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:17:35.093

您可以使用动态获取图像网址：

```
dynamic postItem = post.ContentItem;
var postImageUrl = (string)postItem.BlogPost.BlogPostImage.Url; 
```

内容项，当用作动态对象时，会公开其所有部分（这里我们使用与类型同名的部分，以及从管理员添加字段时添加字段的位置）。部件本身具有每个字段的动态成员（此处为 BlogPostImage），您可以从那里访问字段的属性（此处为 Url）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T16:15:51.283

我用 1.7 版尝试了上面的答案，没有任何乐趣。我最终不得不下载源代码的副本，以便深入研究这些对象。下面的代码为我提供了我需要的信息，并且将来在我向其他内容添加额外字段时也会有所帮助。我使用上述答案的一部分来获得我的解决方案......

```
IEnumerable<object> blogPosts = Model.ContentItems.ContentItems;
foreach (dynamic post in blogPosts) {
    dynamic q = ((ContentItem)post.ContentItem).Parts.SelectMany(p => p.Fields).Where(f => f.Name == "BlogPostImage").First();
    string postImageUrl = q.MediaParts[0].MediaUrl;
    <img src="@postImageUrl" />
} 
```

希望这可以帮助某人。

# mysql - 用于从运行总计中计算每月总计的 SQL 查询

> ID：15345690
> 
> 赞同：-2
> 
> 时间：2013-03-11T18:17:40.673
> 
> 标签：mysql

我在 MySQL 中有一个标题为“报告”的表，其中有一列标题为“Flow_Total”，它的运行总值每天都在上升并且从不重置，我需要的是一个查询，它获取存储在“Flow_Total”中的值" 列并按月划分，然后告诉我每个月价值上涨多少。

这就是我希望查看数据的方式：

[https://skydrive.live.com/redir?resid=BC22A6E2F92CE833!11843&authkey=!ACgipFLKDJTBlN8](https://skydrive.live.com/redir?resid=BC22A6E2F92CE833!11843&authkey=!ACgipFLKDJTBlN8)

该月的值写入该月的最后一天。我想要做的总结是从 Flow_Total 中减去每月的变化，并将其显示在名为每月总计的单独列中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:43:55.557

也许不是最令人赏心悦目的SQL，但这应该可以满足您的要求；它只会自行加入表，延迟 1 个月并计算其中的差异。

```
SELECT DATE_FORMAT(MAX(a.`DATE`), '%b-%y') `DATE`,
       MAX(a.`FLOW_TOTAL`) `Flow Total`,
       (MAX(a.`FLOW_TOTAL`) - MAX(b.`FLOW_TOTAL`)) `Monthly Total`
FROM Reports a
LEFT JOIN Reports b
  ON YEAR(a.`DATE`)  =  YEAR(DATE_ADD(b.`DATE`, INTERVAL 1 MONTH)) AND
     MONTH(a.`DATE`) = MONTH(DATE_ADD(b.`DATE`, INTERVAL 1 MONTH))
GROUP BY YEAR(a.`DATE`), MONTH(a.`DATE`)
ORDER BY a.`DATE` DESC; 
```

[一个用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/09234/2)。

# python - libvlc "VLC 无法打开 MRL 'C:\Users\Public\Videos\Sample Videos\Wildlife.mwv'"

> ID：15345692
> 
> 赞同：1
> 
> 时间：2013-03-11T18:17:44.200
> 
> 标签：python, vlc, pyside, libvlc

我正在编写一个与 VLC 交互的 PySide Python 应用程序。在 Ubuntu 上运行得很好，但是当我迁移到 Windows 时，我什至无法让 VLC 打开视频文件。

我将 VideoLAN PyQt 示例（[http://git.videolan.org/?p=vlc/bindings/python.git;a=blob;f=examples/qtvlc.py;h=34aeedce116e05f575eb0ebffdacf8f06db80402;hb=HEAD](http://git.videolan.org/?p=vlc/bindings/python.git;a=blob;f=examples/qtvlc.py;h=34aeedce116e05f575eb0ebffdacf8f06db80402;hb=HEAD)）修剪到只是一个窗口和视频播放器，试图找出问题所在，但仍然出现此错误。即使使用打开文件对话框的返回，我仍然得到同样的错误。

下面是 VideoLAN 示例的精简版：

```
import sys
import vlc
import user
from ctypes import pythonapi, c_void_p, py_object
from PySide import QtGui, QtCore

class Player(QtGui.QMainWindow):
  def __init__(self, master = None):
    QtGui.QMainWindow.__init__(self, master)

    self.setWindowTitle('Media Player')

    self.instance = vlc.Instance()
    self.mediaplayer = self.instance.media_player_new()

    self.createUI()

  def createUI(self):
    self.widget = QtGui.QWidget(self)
    self.setCentralWidget(self.widget)

    self.videoframe = QtGui.QFrame()
    self.palette = self.videoframe.palette()
    self.palette.setColor(QtGui.QPalette.Window,
                          QtGui.QColor(0, 0, 0))
    self.videoframe.setPalette(self.palette)
    self.videoframe.setAutoFillBackground(True)

    self.vboxlayout = QtGui.QVBoxLayout()
    self.vboxlayout.addWidget(self.videoframe)

    self.widget.setLayout(self.vboxlayout)

    self.OpenFile()

  def OpenFile(self, filename = None):
    if filename is None:
      filename = QtGui.QFileDialog.getOpenFileName(self, 'Open File', user.home)
      filename = filename[0]
    if not filename:
      return

    print filename
    self.media = self.instance.media_new(unicode(filename))
    self.mediaplayer.set_media(self.media)

    self.media.parse()
    self.setWindowTitle(self.media.get_meta(0))

    if sys.platform == 'linux2':
      self.mediaplayer.set_xwindow(self.videoframe.winId())
    elif sys.platform == 'win32':
      pythonapi.PyCObject_AsVoidPtr.restype = c_void_p
      pythonapi.PyCObject_AsVoidPtr.argtypes = [py_object]
      hWnd = pythonapi.PyCObject_AsVoidPtr(self.videoframe.winId())
      self.mediaplayer.set_hwnd(hWnd)
    elif sys.platform == 'darwin':
      self.mediaplayer.set_agl(self.videoframe.windId())

    self.mediaplayer.play()

if __name__ == '__main__':
  app = QtGui.QApplication(sys.argv)
  player = Player()
  player.show()
  player.resize(640, 480)

  sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-10T20:00:05.383

如果您正在打开文件（而不是流或其他源）libVLC 要求您以“file:///”开始文件路径，在 Windows 上的 python 中使用文件路径时，也需要使用 \ 才能转义\ (a la \')。

因此，用于调用文件的字符串应如下所示：'file:///C:\Users\Public\Videos\Sample Videos\Wildlife.mwv'

另一个注意事项：如果可以，最好从文件路径中删除任何空格（即“示例视频”）

# php - QueryPath 查找具有命名空间属性的元素

> ID：15345694
> 
> 赞同：0
> 
> 时间：2013-03-11T18:17:46.147
> 
> 标签：php, querypath

我没有找到一种方法来检索所有具有属性的元素`ec:edit`。我只找到了获取命名空间元素的示例，但没有找到属性。

`attr()`使用或搜索属性时也没有结果`hasAttr()`。

dbpedia 示例：

```
foreach ($qp->branch()->find('foaf|page') as $img) {
   print $img->attr('rdf:resource') . PHP_EOL;
} 
```

rdf 文件示例：

```
<dbpprop:artist rdf:resource="http://dbpedia.org/resource/The_Beatles" /> 
```

但这不会检索任何结果：

```
$edits = $htmldocument->find('div[mc|edit];
foreach ($edits as $key => $value) {
    echo $value->attr('mc:edit');
} 
```

样本数据：

```
<div mc:edit="stuff"> // etc 
```

我什么都得不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:14:16.407

好的，lambdas 解决了一切：

```
find('div')->filterLambda('return qp($item)->hasAttr("mc:edit");'); 
```

# excel - 复制图像 - Excel VBA

> ID：15345695
> 
> 赞同：12
> 
> 时间：2013-03-11T18:17:50.357
> 
> 标签：excel, vba, copy, image

概要-

我需要将嵌入在一个 Excel 图片对象中的图像（.png 格式）复制到另一张现有图片中（覆盖其图像数据），同时保持目标形状的标识和字段（位置、可见性、大小、标题等）完整。这是简单的图片，而不是 ActiveX OLEObjects。

* * *

情况：

我在 Windows 7、Excel 2010 上。

我在 UI 中有一张包含多个图片对象的表格。

根据用户的设置，显示的图片需要经常改变。我已经设置好了触发等。

有时，单个形状需要显示几张不同图片中的一张。我只想将图片数据从“库”图片（嵌入另一个形状，对用户隐藏）复制到该目的地，但我可以通过简单地交换图片对象来解决这个问题。

然而，有时 UI 中的多个形状需要显示*相同*的图像，即使同时保留它们的唯一数据（名称、ID、大小、可见性、标题等）。“交换”技巧令人望而却步——我必须为每个“库”对象创建 50 个副本，为 UI 中*可能*需要呈现该外观的每个实例创建一个副本。

* * *

愿望：

所以我想做的是简单地拥有这些图片的*一个*库副本，并且能够将该图像复制到集成到 UI 中的图片对象中。

* * *

问题：

我找不到如何做到这一点。

我在 VBA 数据结构中找不到与图片对象的“图像”部分相对应的任何字段。

CopyPicture() 然后 Paste() 似乎只在 Paste() 的目标是地址（例如 Range("A1")）时才起作用，然后它会创建一个*新*的图片对象。但我不想要新对象，也不想粘贴到单元格中。我想用另一个图片对象的图像数据覆盖现有图片对象的图像数据。

Duplicate() 和类似的例程是上述的变体——它们创建一个*新*的图片对象。我有特定事件等与*现有*对象、目标对象相关联，我正在尝试更改其图像数据，因此我必须更改*它的*图像，而不是每次都用一些新创建的对象替换它。

LoadPicture() - 通过硬盘驱动器而不是剪贴板（速度较慢，因此不太理想）似乎不适用于形状对象，仅适用于 OLEObjects。我是否必须将所有这些图片对象更改为 ActiveX 图像？这对于静态图片来说是一大笔开销！而且我预计所有磁盘读取和写入都会显着地拖累工作表。

ActiveX - 我可以将这些图片对象更改为 activeX 图像对象，然后更改“库”对象，然后使用分配 (Shapes("Name").DrawingObject.Object.Picture = Shape("Library").DrawingObject.Object 。图片）。[这种方法与此处的方法[类似-Excel VBA：将图片从图像控件复制到activeX对象](https://stackoverflow.com/questions/7719450/excel-vba-copying-pictures-from-image-controls-to-active-x-objects)]我不确定我是否可以使其适合我的情况。我不仅已经设计了很多 UI 以利用 Shape/Pictures 具有而 OLEObjects 没有的特性和功能（例如 3d 格式和“填充”在图片对象上工作的特定方式），而且操纵 OLEObjects 是*显着*在我的实现中，比处理简单的图片要慢，足以让用户感到沮丧。（这是我在早期开发阶段放弃使用 OLEObjects 的主要原因之一。]

* * *

本质上，我想做与右键单击图片对象时获得的“更改图片”命令的等效项（除了从另一个图片对象或必要时从剪贴板获取图像数据，而不是从磁盘上的文件） . 但是当我录制该动作的宏时，它会出现空 - 显然“更改图片”不会产生任何宏代码。

一大堆网络搜索和文档浏览还没有出现任何其他内容。

* * *

嗯....帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:51:05.560

我不想这么说，但我认为你已经把自己画到了这个角落。Excel 的对象不支持以您描述的方式修改图片数据，这意味着您无法在工作表打开时进行这些更改。即使您知道如何更改原始文件，它也不能满足您的 UI 要求。

您的解决方法可能是您最好的（基于 Excel 的）答案。

# google-app-engine - Google App Engine 上的 PIL 可以使用哪些系统字体？

> ID：15345697
> 
> 赞同：5
> 
> 时间：2013-03-11T18:18:02.400
> 
> 标签：google-app-engine, fonts, python-imaging-library, python-unicode

App Engine 上的 PIL 可以使用哪些字体？

我知道我可以将字体作为应用程序的一部分上传，但我基本上想要的是一个系统提供的无衬线字体，它可以处理 unicode 字符，这是一个好看的 Helvetica（或替代）。谷歌服务器可能已经安装了一些字体，这就是我想要了解的内容。

我想找到一种可以使用 unicode 的字体，以便使用 PIL 正确呈现日语和其他字符。

我有一个使用字体系列正确呈现 unicode 字符的网页：'Helvetica Neue', Helvetica, Arial, sans-serif;

当我使用 PIL 呈现相同的 unicode 字符时，它们无法正确呈现。我作为应用程序的一部分上传的字体在字体中没有必要的 Unicode 字符。

以下是我现在使用的相关 python 代码行。

```
import Image, ImageDraw, ImageFont  

draw = ImageDraw.Draw(my_output)  
font = ImageFont.truetype("FontIAmUsing.otf", font_size, encoding="utf-8")  
draw.text((5, 51), 'abc', fill='#2A2A2A', font=font) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T03:50:01.473

考虑到 PIL 仅附带默认的位图字体（丑陋且可能不包含非常广泛的 unicode 字符），并且由于您必须提供字体文件的完整路径并且您无法在 GAE 中脱离沙盒环境，因此您最好将您的字体与您的应用程序一起上传。如果您不指定路径，它将查看您的 Web 应用程序的根目录。我正在使用适用于 OSX 的 GoogleAppEngineLauncher，并且在部署它时会上传找到的所有文件（包括我与 ImageDraw 一起使用的 .ttf）。

[http://effbot.org/imagingbook/imagefont.htm](http://effbot.org/imagingbook/imagefont.htm)上的文档指出：（1.1.4 中的新功能）加载“总比没有好”的默认字体。我刚刚确认 GAE 上提供了默认字体。

# c++ - 从 C 中的文本文件中读取特定列的数据

> ID：15345698
> 
> 赞同：3
> 
> 时间：2013-03-11T18:18:05.130
> 
> 标签：c++, c

我的文本文件如下所示：

```
987 10.50   N   50
383 9.500   N   20
224 12.00   N   40 
```

我只想读取第二列数据。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T18:20:49.993

您不能只阅读第二列而不阅读其他任何内容。

您可以做的是读取所有数据，并忽略除第二列之外的所有内容。例如，读取一行数据（带有`std::getline`），然后从中提取 an`int`和 a `double`，但忽略`int`该行的其余部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T18:22:27.917

您需要读取所有数据，并丢弃不需要的字段（即“列”）。包含的格式字符串`%*d`正在这样做。

在*C*中，它可能类似于（假设`f`是`FILE*`句柄）

```
 while (!feof(f)) {
    int n=0; double x=0.0; char c[4]; int p=0;
    if (fscanf(f, " %*d %f %*[A-Z] %*d",  &x) < 1)
      break;
    do_something(x);
 } 
```

PS。感谢杰里·科芬的评论

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T18:39:21.153

C89/C90 具有`strtok`可用于逐行读取文件的功能，使用“空格”分隔符分隔列，然后您可以访问第 n 个标记（表示文件中该行中的第 n 列）。

`strtok`被声明在

[http://cplusplus.com/reference/cstring/](http://cplusplus.com/reference/cstring/)

一些实现也有一个线程安全的可重入版本，称为`strtok_r`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-03T09:15:06.497

在**C++**中，您可以考虑使用`std::istringstream`，这需要包含：`#include <sstream>`。就像是：

```
std::ifstream ifs("mydatafile.txt");

std::string line;

while(std::getline(ifs, line)) // read one line from ifs
{
    std::istringstream iss(line); // access line as a stream

    // we only need the first two columns
    int column1;
    float column2;

    iss >> column1 >> column2; // no need to read further

    // do what you will with column2
} 
```

这样做`std::istringstream`是允许您像对待`std::string`常规文件一样对待输入流。

您可以使用`iss >> column1 >> column2`它将列数据读入变量。

# python - 绑定并执行python脚本

> ID：15345704
> 
> 赞同：0
> 
> 时间：2013-03-11T18:18:23.927
> 
> 标签：python

如何将 python 脚本绑定到文件，并在打开文件时在后台运行？

假设我想将文件绑定到照片然后关闭照片或打开脚本运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:23:29.590

在 Windows 中（例如），您可以将**文件类型**（不是一个特定文件，而是具有特定扩展名的所有文件）与 python 脚本相关联，然后启动照片查看器（使用文件名作为参数，以便应用程序打开此文件）来自 python 脚本。这样，您的脚本和“主”应用程序都将在打开文件类型时运行。

顺便说一句：在您的脚本中，您可以测试某些模式或子字符串的文件名，以对该文件类型的不同文件执行不同的操作...

此解决方案可能不像您希望的那样顺利，但它可能可以作为“解决方法”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:05:28.243

检查[这个](https://stackoverflow.com/q/204017/1931274)问题（而不是它的答案）和[这个](https://stackoverflow.com/a/13078786/1931274)答案，
如果你不想做这么多的阅读（尽管你应该），

您可能需要使用：

*   `os.startfile()`在 Windows 上
*   `subprocess.call(['open',..])`在 Mac 上
*   `subprocess.call(['xdg-open', ...])`在 *nix 上

这会是这样的：

```
import platform, os, subprocess

#....

def nix_open(filename):
    pass               # I don't know this one, you can research
def win_open(filename):
    return os.startfile(filename)
def mac_open(filename):
    return subprocess.call(['open',filename])

def handle_open(filename):
    s_name = platform.system()
    if s_name in ('Linux','Unix'):
        return nix_open(filename)
    elif s_name == 'Windows':
        return win_open(filename)
    elif s_name == 'Darwin':
        return mac_open(filename)
    # ...
    else:
        raise EnvironmentError, 'OS not supported' 
```

# android - JSoup 中的 getElemenstByClass() 函数出现问题

> ID：15345705
> 
> 赞同：0
> 
> 时间：2013-03-11T18:18:24.990
> 
> 标签：android, jsoup

我正在编写一个从网站 smsmaza.in 的 html 中获取文本短信的应用程序，为此我使用 Jsoup 来解析 HTML。以下是困扰我的代码

```
 BLOG_URL="http://www.smsmaza.in/"; 
            Document document;
            document = Jsoup.connect(BLOG_URL).timeout(12000).get();
            Elements texts=document.getElementsByClass("sms"); 
```

当我打印 texts.size() 的值时，它为零，这意味着没有选择任何内容。问题是什么？提前致谢。

这是完整的程序：- [http://pastecode.org/index.php/view/20317090](http://pastecode.org/index.php/view/20317090)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:29:25.250

从您使用的代码中：

```
Document document=Jsoup.connect("http://www.smsmaza.in/").timeout(12000).get();
Elements texts=document.getElementsByClass("sms");
Log.e("sms", Integer.toString(texts.size())); 
```

并选择了 logcat show me `10`sms classes。所以它运作良好。

你不应该阻止`setContentView`。并在您的以下代码中：

```
if(texts.size()>0){
  int i=0;
  while(i<texts.size()){
     result[i]=texts.get(i).text();
     //you should increase your i here
  }
} 
```

你应该增加`i++`循环`while`。如果它没有帮助，试试这个：

```
int i = 0;
for(Element element : texts){
    result[i] = element.text();
    i++;
} 
```

# c++ - 将 int 转换为自定义结构 c++

> ID：15345712
> 
> 赞同：0
> 
> 时间：2013-03-11T18:19:03.007
> 
> 标签：c++, vector, struct

我正在尝试`pointT`从`Vector<int>`坐标创建一个新的类型对象。这是我的教程引导我的地方，但我得到了它无法将 int 转换为`object pointT`. `setWall`期望`(a,b, bool)`where`a`和`b`are 的类型`pointT`。

如果这不是方式，我如何`xy`从我的向量构建？

谢谢

```
pointT xy =
{
    coords[0],
    coords[1]
};

m.setWall(xy.col, xy.col, false);} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:23:12.487

尝试这个：

```
struct point_t {
    int x;
    int y;
    point_t(const Vector<int>& v)
        :x(v.x),
         y(v.y)
    {}
};

point_t a(vecA);
point_t b(vecB);

m.setWall(a, b, false); 
```

# xml - Firefox 无法解析 XSLT，IE9 直接忽略，求助调试？

> ID：15345718
> 
> 赞同：-1
> 
> 时间：2013-03-11T18:19:16.343
> 
> 标签：xml, xslt

有人可以帮我调试这个 XSLT 吗？我不能为此花太多时间，因为我这周有很多事情要做，我已经尝试了至少半个小时，但仍然找不到它有什么问题。我在 XSLT 方面的技能是有限的，而且我们在课堂上被问得太多了，此外，Firefox 并没有提供太多帮助，除了抱怨尖锐的字符（á、é...）。

这里贴一个pastie链接，主要是代码太大：[http ://pastie.org/6452944](http://pastie.org/6452944)

再次，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:52:30.163

一个体面的 XML 编辑器可能会告诉您问题所在：

*   你有一个开始`<table>`标签，你应该有一个结束`</table>`标签。
*   `&eq;`在标准 XML 中没有意义；你应该使用`=`
*   `<xsl:choose>`不允许`select`属性
*   以斜杠结束 XPath 是非法的。

还有一个逻辑错误：

*   `@observaciones = urgente`测试是否`@observaciones`等于*节点* `urgente`（在这种情况下不存在）。您将需要使用`@observaciones = 'urgente'`.

当这些都修复后，我想它会起作用。这是一个固定版本：

```
<xsl:stylesheet version="1.0" xmlns="http://www.w3.org/1999/xhtml"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" omit-xml-declaration="yes"/>

  <xsl:template match="/empresa">
    <html>
      <head>
        <title>
          <xsl:value-of select="sede/nombre" />
        </title>
        <link rel="stylesheet" href="empresa.css" />
      </head>
      <body>
        <table>
          <tr class="titulo">
            <td>
              <p>
                <xsl:value-of select="sede/nombre" />
              </p>
            </td>
            <td rowspan="2">
              <img alt="empresa" src="empresa.png" />
            </td>
          </tr>

          <tr class="subtitulo">
            <td>
              <p>Albaran</p>
            </td>
          </tr>

          <xsl:apply-templates select="pedido">
            <xsl:sort select="@id" />
          </xsl:apply-templates>
        </table>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="pedido">
    <tr class="cuerpo">
      <td rowspan="3">
        <span>
          <xsl:value-of select="sucursal/nombre" />
        </span>
        <br />
        <span>
          <xsl:value-of select="sucursal/region" />
        </span>
      </td>
    </tr>

    <tr class="fecha">
      <td>
        <p>
          Albaran con fecha de: <xsl:value-of select="fecha" />
        </p>
      </td>
    </tr>

    <tr class="npedido">
      <xsl:apply-templates select="@id" />
    </tr>
    <tr class="articulos">
      <td>
        <table>
          <tr>
            <th>
              <span>Cod. de articulo</span>
            </th>
            <th>
              <span>N. de unidades</span>
            </th>
            <th>
              <span>Precio por unidad</span>
            </th>
            <th>
              <span>Observaciones</span>
            </th>
          </tr>
          <xsl:apply-templates select="articulo">
            <xsl:sort select="@id" />
          </xsl:apply-templates>
        </table>
      </td>
    </tr>

    <tr class="observaciones">
      <td>
        <xsl:apply-templates select="@observaciones[. = 'urgente' or
                                                    . = 'incompleto']" />
      </td>
    </tr>
  </xsl:template>

  <xsl:template match="articulo">
    <tr>
      <xsl:apply-templates select="@id" />
      <xsl:apply-templates select="@cant" />
      <xsl:apply-templates select="@precioud" />
      <xsl:call-template name="Cell">
        <xsl:with-param name="value" select="@observaciones" />
      </xsl:call-template>
    </tr>
  </xsl:template>

  <xsl:template match="articulo/@* | pedido/@id"
                name="Cell">
    <xsl:param name="value" select="." />
    <td>
      <span>
        <xsl:value-of select="$value" />
      </span>
    </td>
  </xsl:template>

  <xsl:template match="@observaciones">
    <strong>
      <xsl:value-of select="concat(translate(substring(., 1, 1), 'it', 'IT'),
                                     substring(., 2))"/>
    </strong>
  </xsl:template>

</xsl:stylesheet> 
```

# java - 在一个变量中引用方法的参数

> ID：15345727
> 
> 赞同：0
> 
> 时间：2013-03-11T18:19:49.090
> 
> 标签：java, methods, parameters, reference

我有一个方法

```
public void create(String x, String y, String z, Calendar a, Calendar b, Calendar c, List<String> d){
    object.create(x, y, z, a, b, c, d);
} 
```

它通过一些管理课程传递。有没有一种方法可以避免我必须在`object.create`调用中显式键入参数，而是允许我简单地引用方法自己的参数？

我问这个的原因是因为我有几种这样的方法，而且看起来很乱。

请注意，参数的类型不同，它们仍应定义为 such 而不是`Object... args`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T18:22:56.103

这里通常的答案是创建一个具有这些属性的新类，并传递该类的一个实例（有点像消息信封）而不是一堆离散的参数。

例如：

```
public void create(MyNiftyThing thing){
    object.create(thing);
} 
```

...`MyNiftyThing`班级在哪里：

```
class MyNiftyThing {

    private String x;
    private String y;
    private String z;
    private Calendar a;
    private Calendar b;
    private Calendar c;
    private List<String> d;

    public MyNiftyThing(String x, String y, String z, Calendar a, Calendar b, Calendar c, List<String> d) {
        // ...init data members here...
    }

    // ...accessors for the data members here...
} 
```

你可以通过只拥有 getter 而不是 setter 来保持它不可变。有时，如果它***纯粹是***一种方便的数据结构，您可能会为实例成员使用公共，但任何体面的 IDE 都可以为您自动生成访问器（如果您使用公共，您会`final`因为不变性而陷入困境）。

当然，您不必*接受*构造函数中的所有这些（或者您可以有多个构造函数），如果您可以提供合理的默认值。

它可能不适用于这种特定情况，但例如`MyNiftyThing`可以是它自己的构建器，方法是让构造函数接受最少的 args（可能没有），然后是一系列`buildNNN`设置其相关数据成员并返回`this`链接的方法。这可以帮助避免迷失在构造函数签名中（“Was it `x`, `y`, `z`or `x`, `z`, `y`...?”）。:-) 这样做的缺点是你基本上失去了不变性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:24:33.903

可以使用反射，并且如果您的代码是在启用调试的情况下编译的；请参阅以下答案：[我可以使用 Java 反射获取方法参数名称吗？](https://stackoverflow.com/questions/2237803/can-i-obtain-method-parameter-name-using-java-reflection)

# c# - 此操作需要 IIS 集成管道模式 使用 ASP.NET 文件上传字段时出错

> ID：15345728
> 
> 赞同：1
> 
> 时间：2013-03-11T18:19:52.790
> 
> 标签：c#, asp.net, telerik, umbraco

我有一个简单的页面，上面有一个 asp.net 文件上传字段。在开发机器上工作正常但是当部署到服务器时我得到这个操作需要 IIS 集成管道模式错误。

该站点以集成模式运行。

任何回发都会导致错误触发。

该站点正在使用telerik rad 控件（但不在该页面上），并且在umbraco 内容管理系统下的windows server 2008 上运行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:29:41.533

将网站的应用程序池切换到集成模式。您将在 IIS 管理器中找到池。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:32:48.787

事实证明，尽管不需要此控件（在页面上放置控件时可能会自动注册），但 web-config 文件中存在 Telerik Rad Upload 设置。

删除设置，一切正常。

# html - 页面标题不同于显示的标题 html/md

> ID：15345735
> 
> 赞同：0
> 
> 时间：2013-03-11T18:20:11.200
> 
> 标签：html, css

我有一个用 Markdown 编写的简单网页，其标题如下所示：

```
---
title: <h1 class="side">Text Title | </h1><h3 class="side">Text Subtitle</h3>
--- 
```

在页面正文中它显示正确，但它在浏览器标签栏等区域显示格式。我想找到一种方法来保持格式而不显示它。

需要说明的是，这是一个内联显示标题`class="side"`的css ，页面被处理成html，结果如下：`<style>`

```
<title><h1 class="side">Text Title | </h1><h3 class="side">Text Subtitle</h3></title> 
```

正文中正确显示标题的区域如下所示：

```
<header>
    <h1>{{ page.title }}</h1>
</header> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:24:14.427

您不能设置`<title>`元素的样式 - 在外部使用它`<head></head>`是无效的 HTML/XHTML

[来自 w3c 的更多信息](http://www.w3.org/Provider/Style/TITLE.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T18:24:48.920

[标题](http://www.w3.org/Provider/Style/TITLE.html)元素 中不能有 HTML 。

如果您的标题存储在某处并通过服务器端代码写出，您将需要更改服务器端代码以某种方式剥离 HTML。

# java - 如何在 JPA/Hibernate 中使用聚合函数调用 SQL 查询

> ID：15345737
> 
> 赞同：2
> 
> 时间：2013-03-11T18:20:15.630
> 
> 标签：java, sql, hibernate, jpa

是否可以在 JPA/Hibernate 中运行如下这样的查询？

```
select v.country,
v.site,
    SUM(case when s.id = 1 then 1 else 0 end) as Total_SuspectedViolations,
    SUM(case when s.id = 2 then 1 else 0 end) as Total_ConfirmedViolations,
    SUM(case when s.id = 3 then 1 else 0 end) as Total_ConfirmedNoViolations,
    SUM(case when s.id = 4 then 1 else 0 end) as Total_NotDetermined,
    COUNT(*) Total
from violations v
inner join status s
    on v.status_id = s.id
group by v.country, v.site 
```

或者

```
select v.country,
v.site,
    SUM(case when v.status_id = 1 then 1 else 0 end) as Total_SuspectedViolations,
    SUM(case when v.status_id = 2 then 1 else 0 end) as Total_ConfirmedViolations,
    SUM(case when v.status_id = 3 then 1 else 0 end) as Total_ConfirmedNoViolations,
    SUM(case when v.status_id = 4 then 1 else 0 end) as Total_NotDetermined,
    COUNT(*) Total
from violations v
group by v.country, v.site 
```

这适用于 Oracle DB，但是当我使用 JPA/Hibernate 时，我得到：

```
ERROR [PARSER] line 1:311: unexpected token: total
ERROR [PARSER] line 1:375: unexpected token: ON 
```

我问是因为我需要根据一张表“违规”中的数据实现一些简单的统计数据

以下是我的想法：

我需要连接两个表并计算第二个表中的一些值的出现次数，以达到类似于统计表的效果，该表将具有列：

结果表：

*   国家 varchar(20),
*   网站 varchar(20),
*   长时间怀疑违反，
*   确认违规时间长，
*   Confirm_no_violation long,
*   not_determined long,
*   总长

我的结果表需要前两列（contry 和 site）来自第一个表“Violations”，接下来的 5 列将包含 Status 表中每个可能的 id 值中“Violations”中出现的 status_id 的数量（计数）。

所以，我有两个表：违规和状态。

违规行为：

*   身份证长，
*   国家 varchar(20),
*   网站 varchar(20),
*   status_id long, <--这是状态表中的状态id。
*   ...在这种情况下其他列不重要

地位：

*   身份证长，
*   status long 列“status”具有映射到字符串值的值 (1-4)：Suspected Violation (1)、Confirmed Violation (2)、Confirmed No Violation (3)、未确定 (4)

我加入的结果是拥有应该包含列的表：

*   来自违规表：“国家/地区”和“网站”
*   来自状态表：“怀疑违规”、“确认违规”、“确认无违规”、“未确定”、“总计”（其中此列是违规表中出现的计数器）。

更新：据我所知，现在不需要使用连接，查询只能在一张表上运行。

您能建议我在 JPA/Hibernate 中执行此操作的正确方法是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:28:21.597

你必须使用

```
session.createSQLQuery 
```

并且可以使用下面的方法将 sql 结果转换为您需要的 bean

```
query.setResultTransformer(Transformers.aliasToBean(YourBean.class)) 
```

或者您可以使用[投影](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:33:02.763

感谢您的建议，同时我以这种方式解决了它：

```
List<ViolationSummaryDTO> result = em.createQuery(
                "SELECT new ViolationSummaryDTO(v.counName, v.siteNumber," +
                    "sum(case when v.pvClStati.clstId = 1 then 1 else 0 end) as suspectedViolation," +
                    "sum(case when v.pvClStati.clstId = 2 then 1 else 0 end) as confirmedViolation," +
                    "sum(case when v.pvClStati.clstId = 3 then 1 else 0 end) as confirmedNoViolation," +
                    "sum(case when v.pvClStati.clstId = 0 then 1 else 0 end) as notDetermined," +
                    "COUNT(*) as total)" +
                " FROM Violation v" +
                " WHERE v.trial.id = " + trialId +
                " GROUP BY v.counName, v.siteNumber", ViolationSummaryDTO.class).getResultList(); 
```

结果**是**由休眠在**SELECT new**语句中创建的对象列表。

# windows - 如何在不执行参数的情况下查看 windows 环境变量？

> ID：15345738
> 
> 赞同：4
> 
> 时间：2013-03-11T18:20:18.830
> 
> 标签：windows, command-line, batch-file

基本上我想将我的确切`PATH`变量自动导出到文件中。它包含类似的东西`%ANT_HOME%/bin`，我想保持这种状态。据我所知，同时使用 set 和 echo 将执行该参数并给我绝对路径。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T18:52:23.643

*要在不*扩展环境变量的情况下获取 PATH 副本，您可以将以下内容另存为“rawPath.vbs”...

```
Option Explicit
Dim wsh
Set wsh = CreateObject("Wscript.Shell")
Wscript.Echo wsh.RegRead("HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Environment\Path") 
```

...然后发出以下命令将输出通过管道传输到文件

```
cscript -nologo rawPath.vbs > myPath.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:40:03.153

您是否看到`%ANT_HOME%`从提示符执行 SET 的时间？

如果是这样的话，

```
>filename echo %path% 
```

应该根据需要导出路径。

如果 PATH 变量实际上不包含“%”字符，那么它已经被解析了。请记住，“%”实际上是一个合法（但令人讨厌）的文件名字符......

您可以将“%”字符设置为环境变量

```
set var=%%something%% 
```

将 var 设置为`%something%`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:38:06.733

你需要逃离`%`好先生，例如

```
>echo %path%
C:\windows\system32;C:\windows\system32\wbem

>echo ^%path^%
%path% 
```

# excel - 如何将多个表导出到具有 Microsoft 访问权限的 Excel 电子表格

> ID：15345741
> 
> 赞同：0
> 
> 时间：2013-03-11T18:20:41.553
> 
> 标签：excel, ms-access

我有 2 个表可以访问，数据必须从中导出到电子表格。这是否可以使用“DoCmd.TransferSpreadsheet”查询来执行？下面给出代码供参考。

```
Call CreatePieChart("julydupscores", "julyapvscores", "C:\Performance Database\graph123.xlsm")

'FUNCTION

Public Sub CreatePieChart(sSource As String, qSource As String, msFileName As String)
DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel97, sSource, msFileName, False 
```

我如何也可以传输 qsource（第二个来源）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:07:18.827

> 我如何也可以传输 qsource（第二个来源）？

不知道你做了什么“魔法” `graph123.xlsm`，不可能肯定地说，但一般来说，你只需添加第二条指定为源的`DoCmd.TransferSpreadsheet`语句。`qSource`导出到 Excel（至少是最新版本）时，如果您指定相同的 Excel 文件名，则第二个表将作为现有 Excel 文档的另一个选项卡添加。（如果您希望它们位于单独的文件中，请指定不同的 Excel 文件名。）

# css - 显示：在触摸屏设备上没有悬停技巧

> ID：15345743
> 
> 赞同：1
> 
> 时间：2013-03-11T18:20:56.440
> 
> 标签：css, user-interface, touch

我正在使用 CSS 悬停技巧来清理我的界面。仅当光标悬停在元素内时才会显示控件。在触摸屏设备上使用界面时遇到问题。如果未显示控制按钮`display:none`并且我触摸了它应该在的位置，则该按钮仍会触发该事件。

在您的浏览器和触摸屏设备上尝试这个小提琴，看看我的意思...... [http://jsfiddle.net/6PvCn/2/](http://jsfiddle.net/6PvCn/2/)

在触摸屏设备上，触摸红色方块，警报应该会触发，但按钮甚至不会出现。我在桌面 Android 模拟器和我真正的 Android 2.3 手机上测试了这个。

我想要的效果是按钮首先在不触发的情况下显示，即使用户触摸了按钮“所在”的位置。

在诉诸 javascript 之前，我宁愿使用纯 CSS 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:34:13.683

`pointer-events: none;`一起试试`display: none;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:33:45.497

你不能用纯 CSS 来做到这一点，点击按钮会使按钮进入悬停状态并触发点击事件。相反，您应该在活动时关闭按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:38:27.290

这是我想出的解决方案... [http://jsfiddle.net/6PvCn/7/](http://jsfiddle.net/6PvCn/7/)

在 Android 触摸屏上（不了解 IOS），`hover`如果隐藏元素未显示，则不会触发该事件。所以基本上我检查元素是否`hovered`在它之前`clicked`。

简而言之

```
$(".hidden").hover(function(e) {
  if(e.type == "mouseenter") $(this).addClass("hovering");
  else                       $(this).removeClass("hovering");
}).click(function(e) {
    if(!$(this).hasClass("hovering") return false;
}); 
```

小提琴解释了我在表单元素和动态添加内容方面遇到的更复杂的情况。它提供了一个通用的解决方案，而不是这个元素特定的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T18:32:36.040

我刚刚在我的真实设备上对其进行了测试，它确实执行了按钮的操作。您可以尝试将红色框设为图像，并通过使用 Javascript 的 onclick 将图像更改为按钮。如果我时间不短，我会为您提供一些代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-15T15:08:18.383

我为你写了一个 JS 解决方案： [https ://codepen.io/anon/pen/bmYROr](https://codepen.io/anon/pen/bmYROr)

诀窍是防止按钮的单击事件在第一次单击外部 div 时被触发，因为在触摸设备上单击事件具有悬停效果。

```
let isTouchDevice = true;
let isHovered = false;

document.getElementById('outer').addEventListener('click', (e) => {
    if (isTouchDevice) {
        if (!isHovered) {
            e.stopPropagation();
        }
        isHovered = true;
    }
}, true);

document.getElementById('outer').addEventListener('mouseleave', (e) => {
    if (isTouchDevice) {
        isHovered = false;
    }
}, true);

document.getElementById('btn').addEventListener('click', () => {
    alert("hi");
}); 
```

# android - 如何在更改页面时更改视图寻呼机中的片段或页面

> ID：15345744
> 
> 赞同：0
> 
> 时间：2013-03-11T18:21:00.657
> 
> 标签：android, android-fragments, android-viewpager

我正在开发一个在 ViewPager 中有 3 个页面的应用程序。但是我无法在滑动页面时更改片段。请任何人帮助我了解如何做到这一点....

```
public class HomePage extends FragmentActivity {

    ViewPager viewPager;
    PagerTabStrip pagerTabStrip;
    PagerAdapter adapter;
    TextView pageTag;

    FragmentManager fragmentManager;
    FragmentTransaction fragmentTransaction;

    /*
     * ActionBar Fragment Class
     */

    ActionBar actionBar;

    Fragment fragment;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.homepage);

        /*
         * Setting adapter for viewPager
         */
        viewPager = (ViewPager) findViewById(R.id.pager);
        adapter = new TabView(getSupportFragmentManager());
        viewPager.setAdapter(adapter);

        /*
         * Setting coustom Animation for ViewPager
         */

        viewPager.setPageTransformer(true, new CoustomPageTransform());

        /*
         * All properties for pagerTabStrip //
         */
        pagerTabStrip = (PagerTabStrip) findViewById(R.id.tabstrip);
        pagerTabStrip.setDrawFullUnderline(true);
        pagerTabStrip.setTabIndicatorColor(Color.parseColor("#33B5E5"));
        pagerTabStrip.setTextSpacing(80);
        pagerTabStrip.setTextColor(Color.parseColor("#666666"));

        /*
         * Setting Up ActionBar Fragment
         */

        if (savedInstanceState != null) {

            actionBar = new ActionBar();
            fragmentManager = getSupportFragmentManager();
            fragmentTransaction = fragmentManager.beginTransaction();
            fragmentTransaction.add(R.id.fragment_container, actionBar)
                    .commit();

        }

    }

    public class TabView extends FragmentStatePagerAdapter {

        public TabView(FragmentManager fm) {
            super(fm);
            // TODO Auto-generated constructor stub
        }

        @Override
        public Fragment getItem(int position) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return 3;
        }

        @Override
        public CharSequence getPageTitle(int position) {

            switch (position) {
            case 0:

                return "TASKS";

            case 1:
                return "WORKBOOK";

            case 2:
                return "ITINERARY";
            default:
                break;
            }
            return null;
        }

    }

    public class CoustomPageTransform implements ViewPager.PageTransformer {

        float MIN_SCALE = 0.85f;
        float MIN_ALPHA = 0.5f;

        @Override
        public void transformPage(View view, float position) {

            int pageHeight = view.getHeight();
            int pageWidth = view.getWidth();

            if (position < -1) {
                view.setAlpha(0);
            } else if (position <= 1) {
                float scaleFactor = Math.max(MIN_SCALE, 1 - Math.abs(position));
                float vertMargin = pageHeight * (1 - scaleFactor) / 2;
                float horMargin = pageWidth * (1 - scaleFactor) / 2;

                if (position < 0) {

                    view.setTranslationX(horMargin - vertMargin / 2);

                } else {

                    view.setTranslationX(-horMargin + vertMargin / 2);

                }

                view.setScaleX(scaleFactor);
                view.setScaleY(scaleFactor);

                view.setAlpha(MIN_ALPHA + scaleFactor - MIN_SCALE
                        / (1 - MIN_SCALE) * (1 - MIN_ALPHA));
            } else {
                view.setAlpha(0);
            }

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:47:13.153

你没有返回任何片段......你`null`在你的适配器中返回，所以你当然不会看到/做任何事情......

在您的适配器中，您应该保留所需片段的列表/集合，并根据位置返回它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T15:07:37.653

> 试试这种方式！，我不太确定你想做什么，但使用此代码，你可以更改和滑动“页面”

```
 public class MainActivityEPG extends FragmentActivity {

    SectionsPagerAdapter mSectionsPagerAdapter;
    static Context c;
    PagerTitleStrip pagerTabStrip;

    static ViewPager mViewPager;

    @Override
    public void onBackPressed() {
        MainActivity2.deleteBackground(false);
        finish();
        super.onBackPressed();
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.epg_ui);
        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());
        mViewPager = (ViewPager) findViewById(R.id.pager);
        pagerTabStrip = (PagerTitleStrip) findViewById(R.id.pager_title_strip);
            mViewPager.setAdapter(mSectionsPagerAdapter);
    }

    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            Fragment fragment = new DummySectionFragment();
            Bundle args = new Bundle();
            args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public int getCount() {
            return 6;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            Locale l = Locale.getDefault();
            pagerTabStrip.setAlpha(150f);
        pagerTabStrip.setBackgroundColor(Color.parseColor("#80000000"));                

                    switch (position) {
            case 0:
                    return getString(R.string.title_section1);
            case 1:
                return getString(R.string.title_section2);
            case 2:
                return getString(R.string.title_section3);
            case 3:
                return getString(R.string.title_section4);
            case 4:
                return getString(R.string.title_section5);
            case 5:
                return getString(R.string.title_section6);
            }
            return null;
        }
    }

    public static class DummySectionFragment extends Fragment {

        public static final String ARG_SECTION_NUMBER = "section_number";

        public DummySectionFragment() {

        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

            View rootView = inflater.inflate(R.layout.fragment_main_dummy,
                    container, false);

            return rootView;
        }
    }

} 
```

# android - 设置水平滚动视图布局

> ID：15345746
> 
> 赞同：0
> 
> 时间：2013-03-11T18:21:19.627
> 
> 标签：android, android-layout, scrollview

我有一个布局：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <GridView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/gridview" android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/textView2"
        android:layout_below="@+id/textView1" android:columnWidth="90dp"
        android:gravity="center" android:horizontalSpacing="10dp"
        android:numColumns="3" android:stretchMode="spacingWidth"
        android:verticalSpacing="10dp" />

    <TextView android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="15dp" android:text="Level 1"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="20dp" android:text=""
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

因此，当用户向右滚动时，我希望具有相同的布局。将再次出现具有不同图像的网格视图和文本视图。但是，即使我查看示例，我也无法实现。我试图将其转换为线性布局，但我再次无法创建 scoolview。

换句话说，我有这样的布局：

![布局](../Images/f0d3b80937cf6b47d11a2baaa1886cba.png)

当用户向右滚动时，我想要另一个包含不同图像的 gridview。当用户滚动时，没有任何变化，只是图像。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:42:46.253

据我了解，您希望能够在 GridView 中水平滚动图像。你不能用 ScrollView 来实现它。尝试使用[TwoWayGridLayout](https://github.com/jess-anders/two-way-gridview)。或者您可以使用[ViewPager 和 Fragments](http://developer.android.com/training/animation/screen-slide.html)。选择一种对您的目的更方便的。

# javascript - 如何让人们在 Linkedin javascript API 中一次搜索多个名称

> ID：15345752
> 
> 赞同：0
> 
> 时间：2013-03-11T18:22:00.433
> 
> 标签：javascript, linkedin, linkedin-jsapi

我可以使用一次搜索一个人

```
IN.API.PeopleSearch()
      .fields("id", "firstName", "lastName","emailAddress","headline","industry","pictureUrl","positions",
            "summary","numConnections")
    .params({
      "first-name": firstName,
      "last-name": lastName
    })
    .result(function(result, metadata) {
        alert(result.people.values);
} 
```

如何使用多个名称进行搜索，例如

```
.params({
          "first-name": firstName1,firstName2,firstName3
          "last-name": lastName1,lastName2,lastName3
        }) 
```

有没有类似的，请给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:27:12.990

根据[文档](http://developer.linkedin.com/documents/people-search-api)：

> *   应使用空格连接多个单词。由于您需要对输入进行 URL 编码，因此这将转换为 %20。例如，安德鲁%20克拉克。
>     
>     
> *   当您传入多个单词时，我们会搜索字符串中的所有单词，而不考虑它们的传入顺序。在关键字中，这意味着单词可以出现在搜索的任何字段中。

尝试这个 ：

```
.params({
      "first-name": firstName + " " + firstName2 + " " + firstName3, //You might need to Url encode the string
      "last-name": lastName
    }) 
```

# visual-studio - 目标文件与 Visual Studio 的部分链接

> ID：15345754
> 
> 赞同：2
> 
> 时间：2013-03-11T18:22:05.067
> 
> 标签：visual-studio, visual-c++, linker

我们有一个具有多阶段构建系统的项目：它被分成由多个源文件组成的模块，每个模块都被编译并部分链接到单个目标文件中。然后将这些目标文件链接到最终程序中。（出于非技术原因，需要此方法。）

目前我们为此使用 gcc 和 binutils，这很容易：`ld -r`将多个目标文件部分链接到一个文件中。

不幸的是，我们现在面临的平台没有 gcc/binutils 支持，只有 Visual C 支持。所以我一直在改造构建系统以使用本地 Microsoft 工具。不幸的是，我还没有找到一种方法来进行部分链接——link.exe 似乎只支持输出 EXE 或 DLL 文件。

有谁知道在 Visual Studio 中进行部分链接的方法？

请注意，.LIB 库是*不够*的。增量链接也不是。而这一切都是从命令行发生的。

# sql - 选择一列的两个最大值

> ID：15345761
> 
> 赞同：-4
> 
> 时间：2013-03-11T18:22:41.090
> 
> 标签：sql

我有一个包含以下列的表格

```
Store_ID, Item_ID, Sales_Amount 
```

我需要为每家商店检索两个最畅销的商品。有人对这个问题有想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:32:09.960

这应该工作

```
SELECT mytable.Store_ID, mytable.Sales_Amount
FROM mytable
    LEFT JOIN mytable table2 ON mytable.Store_ID = table2.Store_ID 
    AND mytable.Sales_Amount <= table2.Sales_Amount
GROUP BY mytable.Store_ID, mytable.Sales_Amount HAVING COUNT(mytable.*) <= 2; 
```

# testing - 重复“现在开始的异步会话清理阶段”

> ID：15345767
> 
> 赞同：5
> 
> 时间：2013-03-11T18:22:53.110
> 
> 标签：testing, phantomjs, headless-browser

当我运行我的测试服时，我发现一些文本会间歇性地挂起*很*长时间（15 分钟到半小时），而 PhantomJS 会不断报告：

```
Asynchronous Sessions cleanup phase starting NOW
Asynchronous Sessions cleanup phase starting NOW
Asynchronous Sessions cleanup phase starting NOW
Asynchronous Sessions cleanup phase starting NOW
Asynchronous Sessions cleanup phase starting NOW
Asynchronous Sessions cleanup phase starting NOW
Asynchronous Sessions cleanup phase starting NOW
Asynchronous Sessions cleanup phase starting NOW
Asynchronous Sessions cleanup phase starting NOW
Asynchronous Sessions cleanup phase starting NOW
Asynchronous Sessions cleanup phase starting NOW
Asynchronous Sessions cleanup phase starting NOW
Asynchronous Sessions cleanup phase starting NOW
Asynchronous Sessions cleanup phase starting NOW
Asynchronous Sessions cleanup phase starting NOW ... 
```

这是什么，是`Asynchronous Sessions cleanup phase starting NOW`什么导致它挂了这么久？

干杯

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:24:53.167

找到的解决方案：

这`Asynchronous Sessions cleanup phase starting NOW ...`是由对外部提要的一些调用引起的，这些调用间歇性地缓慢。这个阶段一定是在等待这些超时的调用，但是 PhantomJS 坐在那里等待了非常非常长的时间。

在测试时删除这些调用（使用少量 JavaScript，如果主机是 localhost 则使用虚拟对象）解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-23T20:28:49.440

对我有用的解决方法是将 takeScreenshot 功能设置为 false。

```
DesiredCapabilities caps = new DesiredCapabilities();
caps.setCapability("takesScreenshot", false); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-05-22T10:19:56.103

尝试使用 this.driver = new PhantomJSDriver(caps); 现在，我们关闭了。[INFO - 2014-05-01T13:21:09.095Z] ShutdownReqHand - _handle - 即将关闭

但是在我得到相同的pbm之后

# java - 尝试保存图像时出现异常

> ID：15345769
> 
> 赞同：2
> 
> 时间：2013-03-11T18:22:56.170
> 
> 标签：java, jar, javax.imageio, imagej

启动 Java 应用程序时，尝试保存图像时出现异常。然而，在 Eclipse 中，一切正常。该应用程序是使用 fatjar 构建的，并且还选择了必要的库（jar_imageio.jar 和 ij.jar）进行导出。

我尝试使用 ImageIO 和 ImageJ：

a.) ImageIO：

```
ImageIO.write(image, "jpg", new File(f));

Exception in thread "main" sun.misc.ServiceConfigurationError: 
javax.imageio.spi.ImageWriterSpi: 
Provider com.sun.media.imageioimpl.plugins.jpeg.CLibJPEGImageWriterSpi 
could not be instantiated: java.lang.IllegalArgumentException: vendorName == null!
    at sun.misc.Service.fail(Unknown Source)
    at sun.misc.Service.access$200(Unknown Source)
    at sun.misc.Service$LazyIterator.next(Unknown Source)
    at javax.imageio.spi.IIORegistry.registerApplicationClasspathSpis(Unknown Source)
    at javax.imageio.spi.IIORegistry.<init>(Unknown Source)
    at javax.imageio.spi.IIORegistry.getDefaultInstance(Unknown Source)
    at javax.imageio.ImageIO.<clinit>(Unknown Source) 
```

b.) 图片J：

```
IJ.saveAs(image, "jpg", f);
java.lang.NoClassDefFoundError: Could not initialize class javax.imageio.ImageIO

    at ij.plugin.JpegWriter.saveAsJpeg(JpegWriter.java:49)
    at ij.plugin.JpegWriter.save(JpegWriter.java:28)
    at ij.io.FileSaver.saveAsJpeg(FileSaver.java:340)
    at ij.io.FileSaver.saveAsJpeg(FileSaver.java:332)
    at ij.plugin.filter.Writer.run(Writer.java:24)
    at ij.plugin.filter.PlugInFilterRunner.processOneImage(PlugInFilterRunner.java:256)
    at ij.plugin.filter.PlugInFilterRunner.<init>(PlugInFilterRunner.java:105)
    at ij.IJ.runPlugIn(IJ.java:158)
    at ij.Executer.runCommand(Executer.java:127)
    at ij.Executer.run(Executer.java:64)
    at ij.IJ.run(IJ.java:249)
    at ij.IJ.run(IJ.java:296)
    at ij.IJ.saveAs(IJ.java:1579) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:52:56.020

正如@Victor所说，我认为你应该看看

```
Exception in thread "main" sun.misc.ServiceConfigurationError: 
javax.imageio.spi.ImageWriterSpi: 
Provider com.sun.media.imageioimpl.plugins.jpeg.CLibJPEGImageWriterSpi 
could not be instantiated: java.lang.IllegalArgumentException: vendorName == null! 
```

我昨天刚遇到这个问题，这很棘手。[这里](https://stackoverflow.com/questions/7051603/jai-vendorname-null)也有类似的问题。我发现如果我在 jar 中包含 jai_imageio 并且没有修改清单文件以包含 JAI 清单文件的内容或在您的构建中合并 META-INF 的服务文件夹中的文件，那么我有一些类似于您的错误. 我的应用程序在没有包含 JAI 的情况下确实可以工作，因为 JAI 是在本地安装的，我暂时选择在包含 JAI 的情况下构建它。

打开你的jar你会发现一个名为META-INF的目录。里面有文件 MANIFEST.MF。我使用 Maven 在 Manifest 文件中包含 JAI 的东西，所以它看起来像

```
Manifest-Version: 1.0
Implementation-Title: com.sun.media.imageio
Implementation-Version: 1.0_01
Built-By: myName
Specification-Vendor: Sun Microsystems, Inc.
Created-By: Apache Maven
Implementation-Vendor: Sun Microsystems, Inc.
Build-Jdk: 1.6.0_43
Specification-Title: Java Advanced Imaging Image I/O Tools
Specification-Version: 1.0-mr
Extension-Name: com.sun.media.imageio
Main-Class: myMain
Archiver-Version: Plexus Archiver 
```

你应该在那里替换你的名字和你的主要班级。如果您不使用 Maven（或 Ant）来使其工作，您可以只修改此文件并在命令行上自己将其打包。我有一个额外的问题，我的一些包含的 jar 覆盖了 META-INF 的服务文件夹中的文件。相反，我使用 Maven 的 Shade 插件合并了这些文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-17T16:35:39.070

将此行添加到 build.xml （为我解决）

```
<manifest>
    <attribute name="Main-Class" value="${main.class}"/>
    <attribute name="Built-By" value="${user.name}" />
    <attribute name="Built-Date" value="${TODAY}" />                   
    <attribute name="Implementation-Title" value="MyApp" />
    <attribute name="Implementation-Vendor" value="MyCompany" />                
    <attribute name="Implementation-Version" value="${version.num}-b${build.number}"/>                              
</manifest> 
```

# c - 线程 1：EXC_BAD_ACCESS（代码 = 1，地址 = 0x7fff00000001）

> ID：15345770
> 
> 赞同：0
> 
> 时间：2013-03-11T18:23:00.443
> 
> 标签：c, arrays, memory-management, exc-bad-access

我正在尝试将一个数组传递给一个函数，该函数总结了数组中的所有元素，但是我在该行遇到了一个错误的访问错误`sum+=a[i];`我该如何解决这个问题？这是代码：

```
#import <Foundation/Foundation.h>

int sum(int*, int);

int main() {

@autoreleasepool {

    int size = 0;
    int a[size];
    int x;

    NSLog(@"Enter a size for the array ");
    scanf("%i", &size);

    NSLog(@"Enter %i numbers to populate the array ", size);

    for (int i = 0; i < size; i++) {
        scanf("%i", &a[i]);
    }

    x = sum(a, size);

    NSLog(@"The sum of the array is %i ", x);    
}

return 0;

}

int sum(int *a, int n) {

int sum = 0;
for (int i = 0; i < n; i++) {

    sum += a[i];
}
return sum;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:28:38.503

这是因为您的数组大小为 0。从 a[i] 写入/读取可能/可能不会崩溃，因为它的行为未定义。

代替

```
int size = 0;
int a[size];
int x;

NSLog(@"Enter a size for the array ");
scanf("%i", &size); 
```

你应该这样做：

```
int size = 0;
int *a;
int x;

NSLog(@"Enter a size for the array ");
scanf("%i", &size);

a = malloc(sizeof(int) * size); 
```

通过动态分配数组`a`，您的程序不应再崩溃。

并且在我们使用之后`malloc`，当我们不再需要它时，我们必须释放它。把这个放在前面`return 0;`

```
free(a); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:27:34.450

您已经定义了一个大小为 0 的数组。由于数组是一块内存，在这种情况下是一块“无”内存，因此您不能在其中存储任何内容。

您可以按照@Owen 的回答中的说明使用 malloc/free。C99 还增加了在栈上声明数组的能力（所谓的 VLA，Variable Length Arrays）。这可以节省您使用 malloc/free 的时间，但会让您面临耗尽所有堆栈空间的风险。对于您知道的事实值将受到约束，VLA 可能有意义：

```
int size;
NSLog(@"Enter a size for the array ");
scanf("%i", &size);

int arr[size];

.... 
```

请注意，在 C89/C90/ANSI 中，您不能这样做，因为数组的大小必须是编译时常量。

# c# - “无法序列化多维数组” - 它是什么，我打错了什么？

> ID：15345772
> 
> 赞同：1
> 
> 时间：2013-03-11T18:23:01.200
> 
> 标签：c#, xml, xna

很长一段时间以来，我一直在尝试将 XML 文件导入我的 XNA 项目。就在我以为我已经完成了所有工作时，弹出了这个错误。大量搜索，我还没有找到有帮助的答案。这是我的 XML 文档的剪辑版本：

```
<?xml version="1.0" encoding="utf-8" ?>
<XnaContent>
  <!-- TODO: replace this Asset with your own XML asset data. -->
  <Asset Type="Library.Room">
    <Tile itIs="Wall">
      <x>0</x>
      <y>0</y>
      <o>0</o>
    </Tile>
  </Asset>
</XnaContent> 
```

尝试构建时，出现此错误：

“构建内容引发 RankException：无法序列化多维数组。”

即使注释掉我的项目代码行也无法改变这个错误，所以我知道这是我编写 XML 的方式。（我认为还可以）

所以，这告诉我我的 XML 可能写错了。什么是 XML 中的多维数组，我该如何避免它？

___添加信息

我将 XML 信息逐个添加到 Array 中。——当然，一开始我认为这是问题所在，但评论任何一个都没有效果。

```
 public void loadFromFile(string fileName, Room r)
        {
            var doc = XElement.Load(fileName);
            foreach (var v in roomDoc.Elements("Tile"))
            {
                r.blueprint.SetValue(new Things.Wall((int)v.Element("o")), (int)v.Element("x"), (int)v.Element("y"));
            }
        } 
```

# android - Android如何显示具有动画效果的图像

> ID：15345777
> 
> 赞同：0
> 
> 时间：2013-03-11T18:23:21.667
> 
> 标签：android, animation

我有 2 张不同颜色的球的图像。当我按下按钮时，我正在将 imagebutton 上的图像从 image1(ball1) 更改为 image2(ball2)。我想要做的是显示这个图像变化（即带有一点动画的球颜色变化，它旋转和改变颜色的效果。

问题：我怎样才能得到这种旋转球 image1 的效果，使它变成球 image2 ？问：我想在这个效果的同时播放一些声音。怎么办？

编辑：基本上我想要的是：image1 围绕（180 度）旋转并变成 image2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:33:34.793

为了旋转和隐藏图像，您需要使用补间动画框架：http: [//developer.android.com/guide/topics/resources/animation-resource.html#View](http://developer.android.com/guide/topics/resources/animation-resource.html#View)。您需要构建将旋转并减少图像 alpha 的动画集。

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="true" >
    <alpha
        android:fromAlpha="1.0"
        android:toAlpha="0.0" />
    <rotate
        android:fromDegrees="float"
        android:toDegrees="float"
        android:pivotX="float"
        android:pivotY="float" />
</set> 
```

然后只需使用`ImageView.startAnimation(AnimationUtils.loadAnimation(context, R.anim.your_anim));`

这将允许您淡化和旋转 ImageView，同时在当前 ImageView 下方显示另一个 ImageView。

如果您想在单个 ImageView 内进行过渡，您需要使用[TransitionDrawable](http://developer.android.com/reference/android/graphics/drawable/TransitionDrawable.html)，它是一种可将一个图像交叉淡入到另一个图像的可绘制对象。不幸的是，它不允许您旋转内容，因此您要么需要修改它，这更难。

您可以使用[RotateDrawable](http://developer.android.com/reference/android/graphics/drawable/RotateDrawable.html)作为 TransitionDrawable 中的可绘制对象之一，但我从未尝试过。

# ios - 当 UIViewController 的子类未知时如何使用 UIViewController 创建类

> ID：15345782
> 
> 赞同：0
> 
> 时间：2013-03-11T18:23:34.993
> 
> 标签：ios, objective-c, uiview, uiviewcontroller

标题是我认为我需要的，但我会后退一步。我想创建一个类来处理 iOS 应用程序中的某些事情。`UIViewcontrollers`这个类可能在 iOS 应用程序中被多个调用。该类可能需要`UIView`在某个阶段显示 a 以供用户输入。`UIView`所以我的问题是，当我不知道哪个`subclass`在`UIViewController`调用它时，我该如何显示它？我可以`UIView`从这个类中添加什么？

我想有两个可能的答案，要么类找到当前的子类，要么将自己`UIViewController`的调用子类`UIViewController`传递给类，这样类就知道了。

这应该怎么做。

谢谢大家帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:49:01.053

您可以将类转换为字符串并进行比较。

例如，假设您的自定义`UIViewController`子类是`CustomViewCon`并且`UIViewController`对象引用是`myUnknownClassObject`，那么：

```
NSString *classString = NSStringFromClass([myUnknownClassObject class]); 
```

那么你就可以：

```
if([classString isEqualToString:@"CustomViewCon"]){
    //do something like maybe present a particular view
    myUnknownClassObject.view = myCustomView; //or anything..
} 
```

同样，您可以检查任何类。

编辑：根据评论的建议，您还可以执行以下操作（更好的方法）：

```
if([[myUnknownClassObject class] isKindOfClass:[CustomViewCon class]]){
    //same as before
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:39:38.560

我将扩展@ericleaf 关于使用协议和子类的评论。听起来您在问以下问题：

> 如何创建一个可重用的通用类，在 UIViewController 子类中呈现视图？

一个很好的方法是在你的泛型类中定义一个协议，并让你的视图控制器子类支持这个协议。该协议为您的自定义类定义了一个与之通信的接口`delegate`，在本例中是一个`UIViewController`子类。除了协议之外，对象不需要知道关于彼此实现的任何其他信息。

您的自定义对象需要能够在其委托中呈现视图的任何信息都将通过协议方法传递。协议的细节取决于您的需要。您可以让自定义对象“向”委托“询问”信息（例如，我应该将子视图放在哪个视图中？）或者您可以让协议向委托提供信息并让委托处理它（例如，这是您的子视图可以放在任何你想要的地方）。

在 SO 和其他地方有很多关于可用协议的优秀文档。这已经足够长了，所以我保持这个例子相当简单。

## 带有协议定义的自定义类 .h 文件

```
// my custom class that adds adds a view to a view controller that supports it's protocol

// forward class definition for the protocol
@class MyAwesomeObject;

@protocol MyAweseomeObjectDelegate <NSObject>
- (UIView *)viewForMyAwesomeObject:(MyAwesomeObject *)awesomeObject;
@end

// this could be defined such that the delegate *must* be a UIViewController. I've left it generic.
@interface MyAwesomeClassObject : NSObject
@property (nonatomic, weak) id <MyAwesomeObjectDelegate> delegate;
@end 
```

## 自定义类 .m 文件

```
// MyAwesomeObject.m

#import "MyAwesomeObject.h"

@implementation MyAwesomeObject

// this is a dumb example, but shows how to get the view from the delegate
// and add a subview to it
- (void)presentViewInDelegate
{
    UIView *containingView = [self.delegate viewForMyAwesomeObject:self];
    if (containingView) {
        UIView *subview = [[UIView alloc] initWithFrame:containingView.bounds];
        subview.backgroundColor = [UIColor redColor];
        subview.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight;
        [containingView addSubview:subview];
    }
} 
```

## MyViewController .h 使用自定义对象

```
// MyViewController.h

@import "MyAwesomeObject.h"

@interface MyViewController : UIViewController <MyAwesomeObjectDelegate>
@property (nonatomic, strong) MyAwesomeObject *awesomeObject;
@end 
```

## MyViewController .m 使用自定义对象

```
// MyViewController.m

@import "MyViewController.h"

@implementation MyViewController

- (void)init
{
    self = [super init];
    if (self) {
        _awesomeObject = [[MyAwesomeObject alloc] init];
        _awesomeObject.delegate = self;
    }
    return self;
}

// MyAwesomeObjectDelegate
- (UIView *)viewForMyAwesomeObject:(MyAwesomeObject *)awesomeObject
{
    return self.view;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:38:46.560

你为什么不为此使用块？BaseViewController.h：

```
@property (copy) void (^addViewBlock)();
- (IBAction)showViewWhenNeeded; 
```

BaseViewController.m：

```
- (IBAction)showViewWhenNeeded
{
    if (self.addViewBlock)
        self.addViewBlock();
} 
```

在您的子类中，设置该块的操作，并在您觉得应该放置视图时调用该方法。

ChildViewController.m

```
// within some method, propably init or smth
[self setAddViewBlock:^{
    [self.vied addSubView:...];
}];

// when need to actually add the view
[self showViewWhenNeeded]; 
```

# php - 通过 PHP 发送带有外部数据的邮件

> ID：15345783
> 
> 赞同：0
> 
> 时间：2013-03-11T18:23:40.737
> 
> 标签：php, mail-server

我正在研究构建一个可以自行阅读和发送邮件的系统。

邮件服务器已经存在。我要做的就是使用在邮件服务器上本地运行的 php 脚本获取电子邮件数据，将一些数据存储在外部数据库中。

然后，当引发“事件”时，我想运行一个 php 脚本，从数据库中获取一些数据，创建一个邮件，并通过邮件服务器发送它。

我对此很陌生，所以我希望我说的话是有道理的。

这是我的问题：以这种方式工作是否足够安全？我在做任何违反“规则”的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:55:59.397

以这种方式做事并没有错。它不违反规则。但不能保证**电子邮件的送达率**，因为：

1.  无法保证您发送的电子邮件将通过电子邮件提供商的垃圾邮件过滤器。
2.  您每天向 1 个用户发送的电子邮件数量、邮件内容中的任何垃圾邮件关键字、用户将您的电子邮件标记为垃圾邮件等。

基本上，您的邮件服务器可能被电子邮件提供商列入黑名单的原因有很多。为确保电子邮件可送达性，您需要将您的邮件服务器 IP 列入所有电子邮件提供商的白名单。（这并不容易）

我建议您使用Sendgrid、Madmimi 等**批量发送电子邮件的第三方解决方案。参考：**[关于选择电子邮件发送服务的讨论](https://stackoverflow.com/questions/7492425/looking-for-bulk-and-transactional-email-sending-service)

此外，这些服务还提供开放跟踪、点击跟踪等统计信息...

# jquery - 单击更改图标（切换）

> ID：15345784
> 
> 赞同：38
> 
> 时间：2013-03-11T18:23:41.930
> 
> 标签：jquery, twitter-bootstrap

我在 jquery 中有一个简单的脚本，可以在单击 a 时切换 div（显示和隐藏）`<p>`（我正在使用引导程序）。

HTML：

```
<p id="click_advance"><i class="icon-circle-arrow-down"></i> Advanced search</p>
<div id="display_advance">
    <p>This is the advance search</p>
</div> 
```

JS：

```
$('#click_advance').click(function(){
$('#display_advance').toggle('1000');
$(this).html('<i class="icon-circle-arrow-up"></i> Advanced search'); 
```

});

因此，当我第一次单击时，图标从下变为上，但显然当我再次单击“click_advance”时，图标不会变回。所以我想要像显示和隐藏这样的切换效果；但我对如何使用图标一无所知。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-03-11T18:29:58.807

而不是每次都覆盖html，只需切换类。

```
$('#click_advance').click(function() {
    $('#display_advance').toggle('1000');
    $("i", this).toggleClass("icon-circle-arrow-up icon-circle-arrow-down");
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-13T18:55:13.227

如果您的图标基于块中的文本（连字）而不是块的类，那么以下将起作用。此示例使用 Google Material Icons 的“+”和“-”图标作为 MaterializeCSS 的一部分。

```
<a class="btn-class"><i class="material-icons">add</i></a>

$('.btn-class').on('click',function(){
    if ($(this).find('i').text() == 'add'){
        $(this).find('i').text('remove');
    } else {
        $(this).find('i').text('add');
    }
}); 
```

**编辑：**`);`添加了使其正常运行所需的缺失。

它也适用于 JQuery post 1.9，其中不推荐使用函数切换。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-11T18:30:35.663

试试这个：

```
$('#click_advance').click(function(){
  $('#display_advance').toggle('1000');
  icon = $(this).find("i");
  icon.hasClass("icon-circle-arrow-down"){
    icon.addClass("icon-circle-arrow-up").removeClass("icon-circle-arrow-down");
  }else{
    icon.addClass("icon-circle-arrow-down").removeClass("icon-circle-arrow-up");
  }
}) 
```

甚至更好，正如凯文所说：

```
$('#click_advance').click(function(){
  $('#display_advance').toggle('1000');
  icon = $(this).find("i");
  icon.toggleClass("icon-circle-arrow-up icon-circle-arrow-down")
}) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-11T18:30:17.757

如果 .toggle 不起作用，我会执行以下操作：

```
var flag = false;
$('#click_advance').click(function(){
    if( flag == false){
       $('#display_advance').show('1000');
         // Add more code
       flag = true;
    }
    else{
       $('#display_advance').hide('1000');
       // Add more code
       flag = false;
    }
} 
```

代码有点多，但它有效

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-13T12:57:49.253

这是一个非常简单的方法

```
 $(function () {
    $(".glyphicon").unbind('click');
    $(".glyphicon").click(function (e) {
        $(this).toggleClass("glyphicon glyphicon-chevron-up glyphicon glyphicon-chevron-down");
}); 
```

希望这会有所帮助：D

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-17T18:08:53.307

```
$("#togglebutton").click(function () {
  $(".fa-arrow-circle-left").toggleClass("fa-arrow-circle-right");
} 
```

我有一个 ID 为“togglebutton”的按钮和一个来自 FontAwesome 的图标。这可以是一种切换它的方法。从左箭头到右箭头图标

# iphone - 无法取消 NSLocalNotification 并在应用内调用 NSLocalNotification

> ID：15345788
> 
> 赞同：1
> 
> 时间：2013-03-11T18:23:58.427
> 
> 标签：iphone, ios, xcode, ipad, nsnotificationcenter

我有以下代码，但通知出来后，我无法取消图标徽章。为了启动应用程序、取消通知和重置图标徽章，我应该添加什么代码？

另一个问题是为什么通知只出现在手机的主屏幕上？在应用程序中，通知不会显示。谢谢。

```
display.text=[NSString stringWithFormat:@"%@A",display.text];
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Utilities" message:@"Alarm added" delegate:self cancelButtonTitle:@"Done" otherButtonTitles:nil];
    // optional - add more buttons:

    [alert show];

    UILocalNotification *localNotification = [[UILocalNotification alloc] init]; //Create the localNotification object

    NSDate *date = [NSDate date];

    // Add one minute to the current time
    NSDate *dateToFire = [date dateByAddingTimeInterval:20];

    // Set the fire date/time
    [localNotification setFireDate:dateToFire];
    [localNotification setTimeZone:[NSTimeZone defaultTimeZone]];

    [localNotification setAlertAction:@"Done"]; 
    [localNotification setAlertBody:@"(A)"]; 
    [localNotification setHasAction: YES]; 
    [localNotification setSoundName:UILocalNotificationDefaultSoundName];

    [localNotification setApplicationIconBadgeNumber:[[UIApplication sharedApplication] applicationIconBadgeNumber]+1]; 

    [[UIApplication sharedApplication] scheduleLocalNotification:localNotification]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:32:10.983

要删除徽章编号，您可以使用此

```
[UIApplication sharedApplication].applicationIconBadgeNumber = 0; 
```

&

使用此代码取消所有本地通知：

```
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

使用这行代码取消一个本地通知：

```
[[UIApplication sharedApplication] cancelLocalNotification:theNotification]; 
```

# python - scipy.misc 模块没有属性 imread？

> ID：15345790
> 
> 赞同：163
> 
> 时间：2013-03-11T18:24:03.147
> 
> 标签：python, installation, scipy, dependencies, python-imaging-library

我正在尝试使用 scipy 读取图像。但是它不接受该`scipy.misc.imread`部分。这可能是什么原因？

```
>>> import scipy
>>> scipy.misc
<module 'scipy.misc' from 'C:\Python27\lib\site-packages\scipy\misc\__init__.pyc'>
>>> scipy.misc.imread('test.tif')
Traceback (most recent call last):
  File "<pyshell#11>", line 1, in <module>
    scipy.misc.imread('test.tif')
AttributeError: 'module' object has no attribute 'imread' 
```

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2017-12-18T09:43:24.443

`imread`在 SciPy 1.0.0 中已弃用，并将在 1.2.0 中删除。改为使用[`imageio.imread`](http://imageio.github.io)。

```
import imageio
im = imageio.imread('astronaut.png')
im.shape  # im is a numpy array
(512, 512, 3)
imageio.imwrite('imageio:astronaut-gray.jpg', im[:, :, 0]) 
```

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2013-03-11T18:34:35.940

您需要安装[Pillow](https://python-pillow.org/)（以前称为[PIL](http://www.pythonware.com/products/pil/)）。从上[的文档](http://docs.scipy.org/doc/scipy/reference/misc.html)`scipy.misc`：

> 请注意，Pillow 不是 SciPy 的依赖项，但没有它，下面列表中指示的图像处理功能将不可用：
> 
> ...
> 
> `imread`
> 
> ...

安装 Pillow 后，我可以访问`imread`如下：

```
In [1]: import scipy.misc

In [2]: scipy.misc.imread
Out[2]: <function scipy.misc.pilutil.imread> 
```

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2019-05-24T09:05:20.497

imread 在 1.2.0 版本之后贬值！所以为了解决这个问题，我必须安装 1.1.0 版。

```
pip install scipy==1.1.0 
```

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2018-03-31T10:47:40.243

对于 Python 3，最好使用`imread`in `matplotlib.pyplot`：

```
from matplotlib.pyplot import imread 
```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2019-06-26T05:08:20.823

如果有人遇到同样的问题，请卸载 scipy 并安装 scipy==1.1.0

```
$ pip uninstall scipy

$ pip install scipy==1.1.0 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-05-20T12:36:36.857

回答 misc.imread 在 SciPy 1.0.0 中已弃用，并将在 1.2.0 中删除。imageio 是一种选择，它将返回类型的对象：

```
<class 'imageio.core.util.Image'> 
```

但不是 imageio，而是使用 cv2

```
import cv2
im = cv2.imread('astronaut.png') 
```

我将是类型： `<class 'numpy.ndarray'>`

由于 numpy 数组的计算速度更快。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2017-04-11T00:53:35.203

您需要 Python 图像库 (PIL)，但唉！PIL 项目似乎已被放弃。特别是，它还没有被移植到 Python 3。所以如果你想要 Python 3 中的 PIL 功能，你最好使用[Pillow](https://python-pillow.org/)，它是 PIL 的半官方分支，并且似乎正在积极开发。实际上，如果你需要一个现代的 PIL 实现，我会推荐 Pillow。就像`pip install pillow`. 由于它使用与 PIL 相同的命名空间，因此它本质上是一个替代品。

*这个分叉有多“半官方”？*你可能会问。Pillow 文档的[About页面这样说：](http://pillow.readthedocs.io/en/4.1.x/about.html)

> 自上次 PIL 发布以来，随着时间的推移，发布新 PIL 的可能性会降低。但是，我们还没有听到官方的“PIL 已死”声明。所以如果你还想支持 PIL，请先在这里报告问题，然后在这里打开相应的 Pillow 票证。
> 
> 请提供第一个工单的链接，以便我们可以在上游跟踪问题。

[然而，PIL官方网站](http://www.pythonware.com/products/pil/)上最新的 PIL 版本是 2009 年 11 月 15 日。我认为，在（截至撰写本文时）近八年没有新版本发布之后，我们可以放心地宣布 Pillow 是 PIL 的继任者。因此，即使您不需要 Python 3 支持，我建议您避开 PyPI 中可用的古老 PIL 1.1.6 发行版，而只需安装新的、最新的、兼容的 Pillow。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-09-24T14:29:56.737

通过以下命令安装 Pillow 库：

```
pip install pillow 
```

请注意，所选答案已过时。查看 [SciPy的文档](https://docs.scipy.org/doc/scipy/reference/misc.html)

> 请注意，Pillow ( [https://python-pillow.org/](https://python-pillow.org/) ) 不是 SciPy 的依赖项，但没有它，下面列表中指示的图像处理功能将不可用。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-03-24T04:05:08.850

Imread 使用 PIL 库，如果安装了该库，请使用：“from scipy.ndimage import imread”

来源：[http ://docs.scipy.org/doc/scipy-0.17.0/reference/generated/scipy.ndimage.imread.html](http://docs.scipy.org/doc/scipy-0.17.0/reference/generated/scipy.ndimage.imread.html)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-09-17T23:00:40.627

```
python -m pip install pillow 
```

这对我有用。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-08-31T10:05:36.767

在 Jupyter Notebook 中运行以下命令，我收到了类似的错误消息：

```
from skimage import data
photo_data = misc.imread('C:/Users/ers.jpg')
type(photo_data) 
```

“错误”消息：

> D:\Program Files (x86)\Microsoft Visual Studio\Shared\Anaconda3_64\lib\site-packages\ipykernel_launcher.py:3: DeprecationWarning:`imread`已弃用！`imread`在 SciPy 1.0.0 中已弃用，并将在 1.2.0 中删除。改为使用`imageio.imread` 。这与 ipykernel 包是分开的，所以我们可以避免导入，直到

并使用以下方法解决了它：

```
import matplotlib.pyplot
photo_data = matplotlib.pyplot.imread('C:/Users/ers.jpg')
type(photo_data) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-09-04T23:11:54.673

我可以像使用 OpenCv一样获取`.png`我正在使用的文件的唯一方法。`uint8`

`cv2.imread(file)`实际上`numpy.ndarray`返回`dtype=uint8`

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-08-06T11:35:14.903

你需要一个 python 图像库（[**PIL**](http://www.lfd.uci.edu/~gohlke/pythonlibs/)），但现在只有 PIL 是不够的，你最好安装[**Pillow**](http://www.lfd.uci.edu/~gohlke/pythonlibs/)。这很好用。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-05-17T05:09:57.080

在 python 3.6 中对我有用的解决方案如下

> py -m pip install 枕头

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-03-25T13:23:41.687

我有在 jupyter notebook 上提取图像所需的所有软件包，但即便如此，它也显示了同样的错误。

[Jupyter 笔记本上的错误](https://i.stack.imgur.com/YeNSn.png)

阅读上面的评论，我已经安装了所需的软件包。请告诉我是否错过了一些包裹。

```
pip3 freeze | grep -i -E "pillow|scipy|scikit-image"
Pillow==5.4.1
scikit-image==0.14.2

scipy==1.2.1 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-08-07T20:24:36.033

您必须首先安装与 scipy (<3.7) 兼容的 Python 版本。我无法使用 pip 安装 scipy 1.0 版 [我认为 pip 不再支持此版本] 而是使用了 conda：

```
conda install -c anaconda scipy==1.0 
```

然后要使用“imread”，您需要安装 Pillow。

```
pip install pillow 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-10-04T18:49:58.497

imread 在 scipy.misc 中已弃用；改用 imageio.imread。

imageio 提供与 Scipy 相同的功能。但请记住，需要更改一些参数（有关详细信息，请查看[此处](https://imageio.readthedocs.io/en/stable/scipy.html?highlight=imread)）：

1.  代替`mode`，使用`pilmode`关键字参数。
2.  代替`flatten`，使用`as_gray`关键字参数。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-01-12T21:18:22.557

一种方法是像这样使用 PIL：

```
 from PIL import Image
    input_image = Image.open(filename) 
```

# ios - ios滚动webview以在pdf中添加书签

> ID：15345791
> 
> 赞同：0
> 
> 时间：2013-03-11T18:24:07.080
> 
> 标签：ios, pdf, webview, scroll, bookmarks

我的 webview 显示一个 pdf 文件，其中包含某些页面的书签。如何让代码自动滚动到 pdf 中特定书签的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T06:46:58.130

你最好使用 iOS PDF 查看器。（例如[FastPdfKit](http://fastpdfkit.com/)）

# ios - 全球化 UIAlertView

> ID：15345794
> 
> 赞同：0
> 
> 时间：2013-03-11T18:24:13.390
> 
> 标签：ios, xcode

我想知道，如果我在视图控制器 A 中分配 UIAlertView，我可以从视图控制器 B 访问它的响应吗？

例如

视图控制器 A

```
UIAlertView *alert;
alert = [[UIAlertView alloc] init];
[alert setTitle:@"Confirm"];
[alert setMessage:@"Do you pick Yes or No?"];
[alert setDelegate:self];
[alert addButtonWithTitle:@"Yes"];
[alert addButtonWithTitle:@"No"];
[alert show]; 
```

视图控制器 B

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
if (alertView == alert)
{

}
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:25:27.427

如果您将警报视图的委托设置为 ViewController B，则可以。

```
[alert setDelegate:self]; 
```

变成

```
[alert setDelegate:viewControllerB]; 
```

我正在处理的代码库中的一个示例：

```
// Creating the view controller
AreaListController *descendentAreas = [[AreaListController alloc] init];

// Setting the delegate
[alert setDelegate:descendentAreas];

// Pushing the view controller
[self pushViewController:descendentAreas]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-24T08:50:41.420

创建一个像 MyAlertView.swift 这样的 swift 文件

```
import Foundation
import UIKit
|
class MyAlertView{
class func showIt(title: String,message: String) -> UIAlertView{
let alert : UIAlertView!
alert.delegate = self
alert.title = title
alert.message = message
alert.addButtonWithTitle("Cancel")
alert.addButtonWithTitle("Done")
alert.show
return alert
} 
```

并像这样在任何视图控制器中访问它

```
MyAlertView.showIt(title: "I'm Title",message: "I'm Message").delegate = self 
```

# javascript - 确定钛移动应用程序的架构

> ID：15345803
> 
> 赞同：0
> 
> 时间：2013-03-11T18:24:41.387
> 
> 标签：javascript, database-design, architecture, titanium-mobile

我对开发世界还很陌生。我需要在 Titanium 上构建一个编写 javascript 的应用程序，该应用程序应该使用单个代码库在 iOS 和 Android 上运行。我目前的目标是 iPhone。该应用程序是关于一家销售传统服装并让感兴趣的人了解他们拥有的系列的商店。关于我应该决定的架构的任何想法。既然用户经常更新他的服装系列是很合乎逻辑的，我应该怎么做？我应该给他将在他的电脑上运行的客户端应用程序，他将使用它来更新他的更改吗？Appstore 会接受此类应用程序吗？我需要知道的任何其他点，因为我需要尽快开始开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:20:06.007

我认为最好的解决方案是一个以 Web 为后端的应用程序。意味着您可以将数据放在 Web 中，并且您的应用程序使用特定的 URL 以 XML 和 JSON 的形式获取所需的数据。

您的应用程序将解析数据并将其显示在视图上。

如果服务器中有新图像，您的应用会将其下载到 iOS 设备。

* * *

另一种选择是处理 HTML 页面的应用程序。意味着您需要在 Web 视图上显示页面。如果需要更新数据，可以在服务器上更新。它也可以是两种类型

1.  您的应用将使用 url 从远程服务器加载页面
2.  您的应用程序会将页面下载到 iOS 设备并从那里显示，直到发生新的更改。

如果您对 HTML 和 CSS 感兴趣，[PhoneGap](http://phonegap.com/)是另一个跨平台，也可以为您提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T06:16:22.280

为了快速开发，您可以使用 python django ...在您的情况下，您可以将 Django-tastypie 用于后端将是不错的选择。因为使用 django 您可以快速开发它，并且 sweetpie 具有可轻松用于检索和发送数据

你可以通过这个

[http://django-tastypie.readthedocs.org/en/latest/](http://django-tastypie.readthedocs.org/en/latest/)

# javascript - Javascript定义的对象检查

> ID：15345807
> 
> 赞同：2
> 
> 时间：2013-03-11T18:24:57.073
> 
> 标签：javascript

是 `mainobj.object_1 = mainobj.object_1 || []`

好于 `if (mainobj.object_1 == undefined){ mainobj.object_1 = []; }`

在第一个示例中，javascript 似乎会将其值重新分配给自身，但可能不会。

除了第一个示例之外，还会将自己的值重新分配给自己，还是不做任何有价值的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:30:26.837

如果要检查它是否只是未定义，则必须使用第二个示例，因为如果对象为 null、空字符串、零、未定义、NaN 或 false，javascript 将返回 false。

所以它是关于你想要从你的代码中得到什么。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T18:34:16.433

他们做几乎相同的事情。

```
mainobj.object_1 = mainobj.object_1 || [] 
```

将查看`mainobj.object_1`它是否`undefined`不是`null`，否则分配它`[]`；

```
if (mainobj.object_1 == undefined){ mainobj.object_1 = []; } 
```

在`mainobj.object_1`将其与`undefined`. 通常也更好地使用`===`严格比较而不是`==`，它更快更明确。如果您要使用严格的比较，则必须将您的陈述调整为：

```
if (mainobj.object_1 === undefined || mainobj.object_1 === null){ mainobj.object_1 = []; } 
```

至于编码偏好，开发人员更喜欢较短的形式`mainobj.object_1 = mainobj.object_1 || [];`，因为它简洁易读。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T18:34:48.453

最好是

```
if(typeof mainobj.object_1 === "undefined"){
    mainobj.object_1 = [];
} 
```

但是，如果您也想检查 null，那么您还**必须添加**null 检查。

第一种方法可能会导致一些不希望的事情。考虑下面的例子

```
var mainobj = {};
mainobj.object_1 = false;
mainobj.object_1 = mainobj.object_1 || [];
alert(mainobj.object_1); 
```

这里的警报显示为空而不是假。请记住`0`, `false`, `null`, `undefined`, `""` *(empty string)*，`NaN`在 Javascript 中都是错误的。

另外，您需要记住这`undefined`不是javascript中的保留**字**

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-11T18:28:52.950

两者都是正确的。第一个很整洁。但在第二个中，您也应该使用`===`而不是`==`检查类型。

# mysql - 存储过程中的“在第 1 行的 '0' 附近使用正确的语法”

> ID：15345809
> 
> 赞同：1
> 
> 时间：2013-03-11T18:25:04.143
> 
> 标签：mysql, stored-procedures

发生了非常奇怪的错误。我有一个在 Live Server (MySQL v. 5.5.12) 上运行良好的存储过程，但在本地 (v. 5.5.25a) 上出现错误。这是存储过程

```
DELIMITER $$
DROP PROCEDURE IF EXISTS `SaveIDForTable`$$
CREATE DEFINER=`root`@`localhost` PROCEDURE `SaveIDForTable`(IN OffID varchar(100),IN TabName VARCHAR(255))
    DETERMINISTIC
BEGIN
set @sql='create table if not exists '||TabName||'(ID bigint(20) NOT NULL,exp date not null,PRIMARY KEY (ID))';
PREPARE statment FROM @sql;
EXECUTE statment;
DEALLOCATE PREPARE statment;
set @sql='insert ignore into '||TabName||' select ID,curdate() from all_data where Official_ID=\''||OffID||'\'';
PREPARE statment FROM @sql;
EXECUTE statment;
DEALLOCATE PREPARE statment;
END$$ 
```

但是当我运行存储过程时

```
CALL SaveIDForTable ('203200702000000-207-5C2FF0','testTable') 
```

我得到错误

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '0' at line 1 
```

我已经尝试在我的本地机器上运行其他存储过程并且它们工作正常，但是由于某种原因我无法开始工作。任何帮助将不胜感激。

# php - Joomla 3.0+ 从 HTML 内容创建 PDF

> ID：15345810
> 
> 赞同：1
> 
> 时间：2013-03-11T18:25:08.450
> 
> 标签：php, pdf, joomla

所以我试图将某种类型的页面视图转换为 PDF（还有 CSV，但那是另一个障碍）。棘手的部分是我使用的是 Joomla 3.0，所以曾经流行的 PhocaPDF 扩展将无法工作。

到目前为止，我已经尝试使用[http://docs.joomla.org/Creating_PDF_views](http://docs.joomla.org/Creating_PDF_views)，但是在引用`JRENDER()`.

我也试过使用这个扩展 [http://rootprogress.com/index.php/downloads/root-pdf-content](http://rootprogress.com/index.php/downloads/root-pdf-content)

我可以开始工作，但仅限于文章视图。我可以看出这个插件使用 DOMPDF 获取它的代码，并且还从 JOOMLA 中获取了 $article！所以我不知道它从哪里获取 $article 变量（所以我可以将它重新分配给我的新视图）。

有没有人在 Joomla 3.0 中实现了 PDF 生成器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:52:52.143

V1.5 中曾经存在的 PDF 功能在 V1.6 中被删除，请参阅[Changes from 1.5 to 1.6](http://docs.joomla.org/Content_Parameter_Specifications_for_Version_1.6#Changes_from_Version_1.5)。我认为没有人将其放回以后的版本中。如果您确实需要，可以使用[第三方组件。](http://extensions.joomla.org/extensions/directory-a-documentation/print-a-pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T16:53:39.220

Joomla 3.3 有打印文章的选项，您只需启用它。
然后，如果您使用 Google Chrome 浏览，您可以轻松地将页面打印为 PDF。

# android - 每次触摸 SeekBar 时，AdView 都会请求新添加

> ID：15345815
> 
> 赞同：0
> 
> 时间：2013-03-11T18:25:46.380
> 
> 标签：android, admob, live-wallpaper

我正在创建一个动态壁纸设置活动。它有几个搜索栏和一个 Ad Mob 广告视图。每次我触摸其中一个搜索栏时，广告都会暂时消失，然后重新加载新添加。但是，当触摸任何其他首选项时，广告不会改变。触摸搜索栏首选项时如何阻止广告重新加载？我对这个很困惑:-)。代码如下：

广告偏好类：

```
import android.app.Activity;
import android.content.Context;
import android.preference.Preference;
import android.util.AttributeSet;
import android.view.View;
import android.view.ViewGroup;
import android.widget.LinearLayout;

import com.google.ads.AdRequest;
import com.google.ads.AdSize;
import com.google.ads.AdView;

public class AdPreference extends Preference {

    public AdPreference(Context context, AttributeSet attrs, int defStyle) {super    (context, attrs, defStyle);}
    public AdPreference(Context context, AttributeSet attrs) {super(context, attrs);}
    public AdPreference(Context context) {super(context);}

    @Override
    protected View onCreateView(ViewGroup parent) {
        // this will create the linear layout defined in ads_layout.xml
        View view = super.onCreateView(parent);

        // the context is a PreferenceActivity
        Activity activity = (Activity)getContext();

        // Create the adView
        AdView adView = new AdView(activity, AdSize.BANNER, "a151390e12917b5");

        ((LinearLayout)view).addView(adView);

        // Initiate a generic request to load it with an ad
        AdRequest request = new AdRequest();
        request.addTestDevice("23392C83B8B55DE893A18286CB92DDA2");
        request.addTestDevice("E1BAA0317138AEE05268B2E4F76B2D3F");
        adView.loadAd(request);     

        return view;    
    }
} 
```

搜索栏类：

```
import android.content.Context;
import android.content.res.TypedArray;
import android.preference.Preference;
import android.util.AttributeSet;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewParent;
import android.widget.RelativeLayout;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TextView;

public class SeekBarPreference extends Preference implements OnSeekBarChangeListener {

    private final String TAG = getClass().getName();

    private static final String ANDROIDNS="http://schemas.android.com/apk/res/android";
    private static final String ROBOBUNNYNS="http://robobunny.com";
    private static final int DEFAULT_VALUE = 50;

    private int mMaxValue      = 100;
    private int mMinValue      = 0;
    private int mInterval      = 1;
    private int mCurrentValue;
    private String mUnitsLeft  = "";
    private String mUnitsRight = "";
    private SeekBar mSeekBar;

    private TextView mStatusText;

    public SeekBarPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
        initPreference(context, attrs);
    }

    public SeekBarPreference(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        initPreference(context, attrs);
    }

    private void initPreference(Context context, AttributeSet attrs) {
        setValuesFromXml(attrs);
        mSeekBar = new SeekBar(context, attrs);
        mSeekBar.setMax(mMaxValue - mMinValue);
        mSeekBar.setOnSeekBarChangeListener(this);
    }

    private void setValuesFromXml(AttributeSet attrs) {
        mMaxValue = attrs.getAttributeIntValue(ANDROIDNS, "max", 100);
        mMinValue = attrs.getAttributeIntValue(ROBOBUNNYNS, "min", 0);

        mUnitsLeft = getAttributeStringValue(attrs, ROBOBUNNYNS, "unitsLeft", "");
        String units = getAttributeStringValue(attrs, ROBOBUNNYNS, "units", "");
        mUnitsRight = getAttributeStringValue(attrs, ROBOBUNNYNS, "unitsRight", units);

        try {
            String newInterval = attrs.getAttributeValue(ROBOBUNNYNS, "interval");
            if(newInterval != null)
                mInterval = Integer.parseInt(newInterval);
        }
        catch(Exception e) {
            Log.e(TAG, "Invalid interval value", e);
        }

    }

    private String getAttributeStringValue(AttributeSet attrs, String namespace, String name, String defaultValue) {
        String value = attrs.getAttributeValue(namespace, name);
        if(value == null)
            value = defaultValue;

        return value;
    }

    @Override
    protected View onCreateView(ViewGroup parent){

        RelativeLayout layout =  null;

        try {
            LayoutInflater mInflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            layout = (RelativeLayout)mInflater.inflate(R.layout.seek_bar_preference, parent, false);
        }
        catch(Exception e)
        {
            Log.e(TAG, "Error creating seek bar preference", e);
        }

        return layout;

    }

    @Override
    public void onBindView(View view) {
        super.onBindView(view);

        try
        {
            // move our seekbar to the new view we've been given
            ViewParent oldContainer = mSeekBar.getParent();
            ViewGroup newContainer = (ViewGroup) view.findViewById(R.id.seekBarPrefBarContainer);

            if (oldContainer != newContainer) {
                // remove the seekbar from the old view
                if (oldContainer != null) {
                    ((ViewGroup) oldContainer).removeView(mSeekBar);
                }
                // remove the existing seekbar (there may not be one) and add ours
                newContainer.removeAllViews();
                newContainer.addView(mSeekBar, ViewGroup.LayoutParams.FILL_PARENT,
                        ViewGroup.LayoutParams.WRAP_CONTENT);
            }
        }
        catch(Exception ex) {
            Log.e(TAG, "Error binding view: " + ex.toString());
        }

        updateView(view);
    }

    /**
     * Update a SeekBarPreference view with our current state
     * @param view
     */
    protected void updateView(View view) {

        try {
            RelativeLayout layout = (RelativeLayout)view;

            mStatusText = (TextView)layout.findViewById(R.id.seekBarPrefValue);
            mStatusText.setText(String.valueOf(mCurrentValue));
            mStatusText.setMinimumWidth(30);

            mSeekBar.setProgress(mCurrentValue - mMinValue);

            TextView unitsRight = (TextView)layout.findViewById(R.id.seekBarPrefUnitsRight);
            unitsRight.setText(mUnitsRight);

            TextView unitsLeft = (TextView)layout.findViewById(R.id.seekBarPrefUnitsLeft);
            unitsLeft.setText(mUnitsLeft);

        }
        catch(Exception e) {
            Log.e(TAG, "Error updating seek bar preference", e);
        }

    }

    @Override
    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
        int newValue = progress + mMinValue;

        if(newValue > mMaxValue)
            newValue = mMaxValue;
        else if(newValue < mMinValue)
            newValue = mMinValue;
        else if(mInterval != 1 && newValue % mInterval != 0)
            newValue = Math.round(((float)newValue)/mInterval)*mInterval;  

        // change rejected, revert to the previous value
        if(!callChangeListener(newValue)){
            seekBar.setProgress(mCurrentValue - mMinValue); 
            return; 
        }

        // change accepted, store it
        mCurrentValue = newValue;
        mStatusText.setText(String.valueOf(newValue));
        persistInt(newValue);

    }

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {}

    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {
        notifyChanged();
    }

    @Override 
    protected Object onGetDefaultValue(TypedArray ta, int index){

        int defaultValue = ta.getInt(index, DEFAULT_VALUE);
        return defaultValue;

    }

    @Override
    protected void onSetInitialValue(boolean restoreValue, Object defaultValue) {

        if(restoreValue) {
            mCurrentValue = getPersistedInt(mCurrentValue);
        }
        else {
            int temp = 0;
            try {
                temp = (Integer)defaultValue;
            }
            catch(Exception ex) {
                Log.e(TAG, "Invalid default value: " + defaultValue.toString());
            }

            persistInt(temp);
            mCurrentValue = temp;
        }

    }

} 
```

设置活动的 xml 布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:robobunny="http://robobunny.com"
    android:key="disco_wormhole_settings" >

    <com.package.name.and.AdPreference
        android:layout_width="fill_parent"
        androidLlayout_height="wrap_content" />

    <Preference
        android:key="title"
        android:summary="@string/settings_summary"
        android:title="@string/settings_title" />

    <com.package.name.and.SeekBarPreference
        android:defaultValue="50"
        android:key="flight_speed"
        android:max="100"
        android:progressDrawable="@drawable/seek_bar_progress"
        android:summary="@string/flight_speed_summary"
        android:title="@string/flight_speed_title"
        robobunny:min="1"
        robobunny:unitsLeft=""
        robobunny:unitsRight="%" />
    <com.package.name.and.SeekBarPreference
        android:defaultValue="30"
        android:key="num_rings"
        android:max="40"
        android:progressDrawable="@drawable/seek_bar_progress"
        android:summary="@string/num_rings_summary"
        android:title="@string/num_rings_title"
        robobunny:min="1"
        robobunny:unitsLeft=""
        robobunny:unitsRight="" />
    <com.package.name.and.SeekBarPreference
        android:defaultValue="50"
        android:key="particle_speed"
        android:max="100"
        android:progressDrawable="@drawable/seek_bar_progress"
        android:summary="@string/particle_speed_summary"
        android:title="@string/particle_speed_title"
        robobunny:min="1"
        robobunny:unitsLeft=""
        robobunny:unitsRight="%" />

    <Preference
        android:summary="@string/colors_summary"
        android:title="@string/colors_title" >
    </Preference>
    <Preference
        android:defaultValue="0xff7d9fff"
        android:key="color_one"
        android:title="@string/color_one" >
    </Preference>
    <Preference
        android:defaultValue="0xffff4b31"
        android:key="color_two"
        android:title="@string/color_two" >
    </Preference>
    <Preference
        android:defaultValue="0xff64ff46"
        android:key="color_three"
        android:title="@string/color_three" >
    </Preference>

    <CheckBoxPreference
        android:defaultValue="true"
        android:key="use_space_dust"
        android:title="@string/use_space_dust_title" />

    <Preference
        android:key="spacer"
        android:title="@string/single_space" />
    <Preference>
    </Preference>

</PreferenceScreen> 
```

在此先感谢您的帮助，

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:33:29.370

我认为 onCreateView 将被多次调用，因此每次都会创建一个广告请求。尝试将您的 admob 代码移动到类似 onBind 或 onAttached 的位置。

# windows - 为什么 32 位等于 4 GB 而不是 4 GB？

> ID：15345816
> 
> 赞同：2
> 
> 时间：2013-03-11T18:25:54.340
> 
> 标签：windows, memory, operating-system, 32-bit

假设我们有一个 32 位的地址，所以每个位可以是 1 或 0。

所以组合的总数等于 2^32。

所以我们可以表示 2^32 个地址（没有单位）。

但是为什么人们说 32 位地址可以表示 2^32 字节地址（为什么是“字节”地址）？

我已经阅读[了为什么 32 位操作系统支持 4 GB RAM？](https://stackoverflow.com/questions/1119278/why-does-a-32-bit-os-support-4-gb-of-ram)

它不会变成 2^32 * 8 位地址吗？为什么人们可以简单地在末尾添加“字节”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T18:28:18.293

因为内存是字节可寻址的，而不是位可寻址的。

地址 0x100 指的是单个字节，地址 0x101 指的是后面的字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:37:54.027

每个地址指向一个字节。在内存中，寻址的不是单个位，而是字节。

因此，32 位将为您提供 2^32 个项目的可寻址空间，每个项目都是一个完整字节。是的，它可以使每个地址指向一个特定的位，但是不，它们使每个地址指向一个字节。

# c# - 如何修改 CompositeControl 的 ClientId，消除所述 ID 的呈现，而不影响 ChildControls？

> ID：15345818
> 
> 赞同：3
> 
> 时间：2013-03-11T18:25:57.287
> 
> 标签：c#, asp.net, .net-3.5

我有一个呈现的复合控件：

```
<span id="controlID">
   <span id="controID_propertyID">
   <input id="controID_inputID"> 
```

我遇到的问题是当我尝试引用 AssociatedControlID 以便将标签绑定到输入时，我最终得到一个：

```
 <label for="controlID"> 
```

我想要的地方：

```
 <label for="controlID_inputID"> 
```

我试过了：

```
 public override string ClientID
    {
        get
        {
            return _input.ClientID;
        }
    } 
```

但是跨度和输入具有相同的ID。

```
<span id="controID_inputID">
   <span id="controID_propertyID">
   <input id="controID_inputID"> 
```

然后我尝试了：

```
 public override void RenderBeginTag(HtmlTextWriter writer)
    {
        writer.RenderBeginTag(HtmlTextWriterTag.Span);
    }

    public override void RenderEndTag(HtmlTextWriter writer)
    {
        writer.RenderEndTag();
    } 
```

但这也扼杀了我想要的 Property Span 的唯一性。

```
<span>
   <span id="propertyID">   // I still want:  <span id="controlID_propertyID">
   <input id="controID_inputID"> 
```

有没有一种方法可以实现我想要的，而无需将 CompositeControl 切换为 WebControl。我还想避免注入代码块，例如：

```
 <label for="<%=control.ClientID%>_input"> 
```

或者通过代码隐藏、文字或诸如此类的任何类似的变通方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:10:34.107

考虑为您的控件更改 ClientIDMode - 可以选择使子控件的 ID“可预测”。 [http://msdn.microsoft.com/ru-ru/library/system.web.ui.control.clientidmode(v=vs.100).aspx](http://msdn.microsoft.com/ru-ru/library/system.web.ui.control.clientidmode(v=vs.100).aspx)

还有一件事：使用 AssociatedControlID，你在这里传递的是哪个控件？看起来你正在传递父母本身，而不是孩子。

# excel - 如何组合不同的数据透视表excel 2013

> ID：15345819
> 
> 赞同：0
> 
> 时间：2013-03-11T18:25:58.187
> 
> 标签：excel, pivot-table

我所拥有的是一个电子表格中的三个不同的数据透视表，每个表都有一个与之链接的数据透视图，并且这些表的布局都是这样的：

类别|id个数

我想要的是能够将每个数据透视表中的每一行添加到另一个表中的每个相应行。例如...

在 Cat1 数据透视表中，第一个值为 111，第二个值为 50。在 Cat2 数据透视表中，第一个值为 77，第二个值为 12。在 Cat3 数据透视表中，第一个值为 17，第二个值为 12 .

我想要的是能够在 Cat1 数据透视表（111）中添加第一行。到 Cat2 和 Cat3 数据透视表的第一行，与第二行和第三行相同，以此类推...

所以最终我将有一张决赛桌，所有的价值都结合在一起。

感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T13:22:25.833

我要做的是将每个类别的结果复制到它自己的选项卡中，然后创建一个最终的数据透视表。

# css - HTML CSS 在一个容器中并排的 DIV 的动态数量，每个 div 具有动态高度

> ID：15345820
> 
> 赞同：4
> 
> 时间：2013-03-11T18:25:59.450
> 
> 标签：css, html, formatting

您好我正在尝试创建`div`s 的行布局。

`div`每行的未知数。可能是 1 可能是 25。

我使用了表格布局`display: table;`，因为它似乎是使行上所有 'div' 的大小相等的唯一方法，而不知道它们的大小并且`div`在页面缩小时不换行。

我将如何做同样的事情，但`div`s 高度也是动态的。

我试图避免使用表格和使用表格中的表格来解决此类问题的旧布局技术。

这是 jdFiddle 中的一个示例。如您所见，第 2 行第 1 列有额外的行，但该行上的每个单元格都已增长以匹配它。

[http://jsfiddle.net/djlerman/G9dgQ/2/](http://jsfiddle.net/djlerman/G9dgQ/2/)

CSS：

 `````
#row {
  display:            table;
  table-layout:       fixed;
  width:              95%;
  margin:             0 auto;
}

#row div {
  display:            table-cell;
}

.column {
  border:             1px solid;
  -moz-border-radius: 15px;
  border-radius:      15px;
  border-color:       grey;
  box-shadow:         grey 1em 1em 1em
  -webkit-gradient:   grey 1em 1em 1em
  -moz-linear-gradient: grey 1em 1em 1em
  margin:             0 auto;
  padding:            5px;
  text-align:         center;
} 
````  `HTML：

 `````
<div id="row">
  <div class="column">
    Column 1
  </div>
  <div class="column">
    Column 2
  </div>
</div> 

<div id="row">
  <div class="column">
    Column 1
    <br />Line 1<br />Line 2<br />Line 3<br />Line 4<br />Line 5<br />Line 6<br />Line 7<br />
  </div>
  <div class="column">
    Column 2
  </div>
  <div class="column">
    Column 3
  </div>
  <div class="column">
    Column 4
  </div>
  <div class="column">
    Column 5
  </div>
  <div class="column">
    Column 6
  </div>
  <div class="column">
    Column 7
  </div>
  <div class="column">
    Column 8
  </div>
</div> 

<div id="row">
  <div class="column">
    Column 1
  </div>
  <div class="column">
    Column 2
  </div>
  <div class="column">
    Column 3
  </div>
</div> 
````  `谢谢，

~多纳文

+-------------------------------------------------- ------------------+

试图回答我的想法，但它不会让我发布和回答。所以这里...

天哪。这个“div”的东西非常复杂。:-(

这是我想出的。感谢我得到的回复和大量的谷歌搜索。

希望它可以帮助其他人：

[http://jsfiddle.net/djlerman/G9dgQ/5/](http://jsfiddle.net/djlerman/G9dgQ/5/)

CSS：

 `````
 .row {
      display: table;
      table-layout: fixed;
      width: 95%;
      margin: 0 auto;
  }
  .row div {
      display: table-cell;
  }
  .column {
      border: 0px;
      margin: 0 auto;
      padding: 0px;
      text-align: center;
      overflow: auto;
      vertical-align: top;
  }
  .border {
      padding: 5px;
      border: 1px solid;
      -moz-border-radius: 15px;
      border-radius: 15px;
      border-color: grey;
      border-color: grey;
      box-shadow: grey .25em .25em .25em;
      -webkit-gradient: grey .25em .25em .25em;
      -moz-linear-gradient: grey .25em .25em .25em;
      vertical-align: top;
      text-align: center;
      overflow: auto;
      margin: 0 auto;
      width: 1000px;
      max-width: 1000px;
  }
  .columnSpace {
      width: 10px;
  }
  .rowSpace {
      height: 10px;
  } 
````  `HTML：

 `````
<div class="row">
    <div class="column">
        <div class="border">Column 1</div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 2</div>
    </div>
</div>
<div class="rowSpace"></div>
<div class="row">
    <div class="column">
        <div class="border">Column 1
            <br />Line 1
            <br />Line 2
            <br />Line 3
            <br />Line 4
            <br />Line 5
            <br />Line 6
            <br />Line 7
            <br />
        </div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 2</div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 3</div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 4</div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 5</div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 6</div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 7</div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 8</div>
    </div>
</div>
<div class="rowSpace"></div>
<div class="row">
    <div class="column">
        <div class="border">Column 1</div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 2
            <br />Line 1
            <br />Line 2
            <br />Line 3</div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 3</div>
    </div>
</div> 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-06T16:22:25.053

看来SO现在会让我发布一个答案，所以我把答案放在答案部分。

天哪。这个“div”的东西非常复杂。:-(

这是我想出的。感谢我得到的回复和大量的谷歌搜索。

希望它可以帮助其他人：

[http://jsfiddle.net/djlerman/G9dgQ/5/](http://jsfiddle.net/djlerman/G9dgQ/5/)

CSS：

```
 .row {
      display: table;
      table-layout: fixed;
      width: 95%;
      margin: 0 auto;
  }
  .row div {
      display: table-cell;
  }
  .column {
      border: 0px;
      margin: 0 auto;
      padding: 0px;
      text-align: center;
      overflow: auto;
      vertical-align: top;
  }
  .border {
      padding: 5px;
      border: 1px solid;
      -moz-border-radius: 15px;
      border-radius: 15px;
      border-color: grey;
      border-color: grey;
      box-shadow: grey .25em .25em .25em;
      -webkit-gradient: grey .25em .25em .25em;
      -moz-linear-gradient: grey .25em .25em .25em;
      vertical-align: top;
      text-align: center;
      overflow: auto;
      margin: 0 auto;
      width: 1000px;
      max-width: 1000px;
  }
  .columnSpace {
      width: 10px;
  }
  .rowSpace {
      height: 10px;
  } 
```

HTML：

```
<div class="row">
    <div class="column">
        <div class="border">Column 1</div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 2</div>
    </div>
</div>
<div class="rowSpace"></div>
<div class="row">
    <div class="column">
        <div class="border">Column 1
            <br />Line 1
            <br />Line 2
            <br />Line 3
            <br />Line 4
            <br />Line 5
            <br />Line 6
            <br />Line 7
            <br />
        </div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 2</div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 3</div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 4</div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 5</div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 6</div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 7</div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 8</div>
    </div>
</div>
<div class="rowSpace"></div>
<div class="row">
    <div class="column">
        <div class="border">Column 1</div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 2
            <br />Line 1
            <br />Line 2
            <br />Line 3</div>
    </div>
    <div class="columnSpace"></div>
    <div class="column">
        <div class="border">Column 3</div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:53:36.600

**[更新小提琴](http://jsfiddle.net/G9dgQ/3/)**

以下是对 CSS 的相关更改：

```
 #row {
    display:            block;
    table-layout:       fixed;
    width:              95%;
    margin:             0 auto;
    white-space:        nowrap;
  }

  #row div {
    display:            inline-block;
    vertical-align:     top;
  } 
```

**这是做什么的**

显示`table-cell`将（惊喜）使 div 表现得像一个 td。真的，你想要的是一个`inline-block`. 我更新了 CSS 以反映这一点，并将`#row`容器更改为简单的块显示。然后，我将子 div 的垂直对齐设置为顶部，这是必要的，因为（默认情况下）浏览器希望将内联内容与容器的基线（文本底部）对齐。

添加`white-space: nowrap;`div 可以防止 div 在扩展超出容器时中断，这也应该可以解决该问题。

这应该可以充分解决您的问题。

* * *

**更新 2**

[这是一个 flexbox 方法；](http://jsfiddle.net/G9dgQ/4/)

这将保留行的扩展以填充可用空间，就像您在评论中所说的那样。````````

# extjs4.1 - Ext JS：为什么 ViewPort 中的 GridPanel 没有滚动条？

> ID：15345822
> 
> 赞同：0
> 
> 时间：2013-03-11T18:26:10.753
> 
> 标签：extjs4.1

在 ViewPort 中的面板的简单示例中，面板将没有用于文本溢出的滚动条，因为默认为[`autoScroll`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Component-cfg-autoScroll)面板`false`。

这是一个工作示例：http: [//jsfiddle.net/rqZ4y/](http://jsfiddle.net/rqZ4y/)（感谢 CD ..）

这是一个稍微复杂的示例，具有 GridPanel （`autoScroll`默认为`true`，因此不需要显式设置！）

```
Ext.application({
    launch: function () {
        Ext.create("Ext.Viewport", {
//            layout: "fit",
            items: [
                {
                    html: "Hello!"
                },
                {
                    xtype: "grid",
                    title: 'Simpsons Contacts',
                    store: Ext.data.StoreManager.lookup('simpsonsStore'),
                    columns: [
                        { text: 'Name', dataIndex: 'name' },
                        { text: 'Email', dataIndex: 'email', flex: 1 },
                        { text: 'Phone', dataIndex: 'phone' }
                    ]
                }
            ]
        });
    }
}); 
```

**工作示例：http:** [//jsfiddle.net/gXsPk/](http://jsfiddle.net/gXsPk/)

在这种情况下，网格没有滚动条。

`layout: "fit"`为了让两个面板都显示，我已禁用。如果我指定`layout: "fit"`，则会导致“你好！” 面板占用所有可用空间，并且网格根本不可见。

如果我删除“你好！” 面板，然后重新引入该`layout: "fit"`选项，然后我得到一个带有滚动条的网格！

**工作示例：http:** [//jsfiddle.net/VBAyS/](http://jsfiddle.net/VBAyS/)

我在这里做错了什么？！

我正在使用 Ext JS 4.1.1a

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:27:48.080

的默认[`autoScroll`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Component-cfg-autoScroll)值为`false`。

设置`autoScroll: true`为`overflow:'auto'`在组件布局元素上使用，并在必要时自动显示滚动条。

工作示例：http: [//jsfiddle.net/rqZ4y/](http://jsfiddle.net/rqZ4y/)

**编辑：**

使用[`vbox`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.layout.container.VBox)布局应该可以解决您的问题。

我将布局更改为：

```
layout: { type: 'vbox', align: 'stretch' } 
```

接下来，我已添加`flex: 1`到网格中。

工作示例：http: [//jsfiddle.net/gXsPk/1/](http://jsfiddle.net/gXsPk/1/)

# visual-studio-2010 - 在 VS2012 中更新 Silverlight 服务引用时使用 XmlTypeAttribute 而不是 DataContractAttribute 序列化的枚举

> ID：15345823
> 
> 赞同：1
> 
> 时间：2013-03-11T18:26:17.407
> 
> 标签：visual-studio-2010, wcf, silverlight, silverlight-4.0, visual-studio-2012

我目前有一个服务器端类库，其中包含自定义枚举，而 WCF 服务方法又使用它。

**使用*Visual Studio 2012*，当我更新我的服务引用时，我的两个自定义枚举不再在 Silverlight 客户端代码代理中生成。**我项目中的其余服务器端类和枚举在服务更新中都很好。

使用 Visual Studio 2010 对我的项目进行的服务参考更新工作得很好。安装 Visual Studio 2012 之后，它就退出了工作。即使我在 VS2010 中重新打开项目，我仍然无法在更新我的服务参考时得到两个有问题的枚举。

知道为什么这些枚举会在更新 Silverlight 项目上的服务引用后退出生成，只需安装 Visual Studio 2012？

*更新*

更新我的服务参考后，我在 Silverlight 项目中打开了生成的 Reference.cs 文件，我注意到其中一个成功通过的枚举存在以下差异：

```
OLD

[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0")]
[System.Runtime.Serialization.DataContractAttribute(Name="Location", Namespace="http://schemas.datacontract.org/2004/07/MyProject.BusinessLogic")]
public enum Location : int {

    [System.Runtime.Serialization.EnumMemberAttribute()]
    None = 0,

    [System.Runtime.Serialization.EnumMemberAttribute()]
    Section = 4,

    [System.Runtime.Serialization.EnumMemberAttribute()]
    Top = 2,

    [System.Runtime.Serialization.EnumMemberAttribute()]
    Bottom = 3,
}

NEW

[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.18034")]
[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://schemas.datacontract.org/2004/07/MyProject.BusinessLogic")]
public enum Location {

    /// <remarks/>
    None,

    /// <remarks/>
    Section,

    /// <remarks/>
    Top,

    /// <remarks/>
    Bottom,
} 
```

# jsp - " 问问题

> ID：15345824
> 
> 赞同：0
> 
> 时间：
> 
> 标签：jsp, struts, struts-config

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:42:02.417

指定

```
<message-resources
        parameter="path for properties file" /> 
```

在 struts.xml 中

[看这里](http://www.mkyong.com/struts/struts-internationalizing-or-localization-example/)

# java - textPersonName 和 textPassword 之间的比较

> ID：15345827
> 
> 赞同：0
> 
> 时间：2013-03-11T18:26:30.363
> 
> 标签：java, android, string, operators

我的活动是一个简单的登录活动，其中（仅用于测试）如果用户名 && 密码相等，它将返回 true，否则返回 false。

但它总是返回假。

即使我转换`toString();`示例也不行：

```
String a=(txtUserName.getText().toString() == txtPassword.getText().toString()) ? "equal" : "Nequal"; 
```

完整代码：

```
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_login);
  txtUserName = (EditText) this.findViewById(R.id.txtUname);
  txtPassword = (EditText) this.findViewById(R.id.txtPwd);
  btnLogin = (Button) this.findViewById(R.id.btnLogin);
  btnLogin.setOnClickListener(new OnClickListener() {
    @Override

      public void onClick(View v) {
      Toast.makeText(LoginActivity.this,txtUserName.getText(),Toast.LENGTH_LONG).show();
      Toast.makeText(LoginActivity.this,"Just for separate", Toast.LENGTH_LONG).show();
      Toast.makeText(LoginActivity.this,txtPassword.getText(), Toast.LENGTH_LONG).show();

      String a=(txtUserName.getText() == txtPassword.getText()) ? "equal" : "Nequal";

      Toast.makeText(LoginActivity.this, a, Toast.LENGTH_LONG).show();

    }

  });
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T18:27:45.943

利用

```
 String a=(txtUserName.getText().toString().equals(txtPassword.getText().toString())) 
```

您所做的方式不是等同于字符串，而是等同于字符串对象。始终使用 String.equals() 方法进行字符串比较。

[Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:28:04.883

要比较字符串值，请使用 String 的`equals`方法；对象引用的`==`运算符比较引用相等性，因为它们是两个不同的对象，所以它总是返回 false。

```
txtUserName.getText().equals(txtPassword.getText()) 
```

# c# - Access 2003 的 C# 中的 UPDATE 命令参数未更新

> ID：15345830
> 
> 赞同：4
> 
> 时间：2013-03-11T18:26:52.823
> 
> 标签：c#, ms-access

访问 2003 与 2010 c#

我看不出我哪里出错了。没有错误，但没有数据正在更新。我有插入、删除和编辑工作，但我不知道为什么我不能让它工作。请有人在这里帮助我，在此先感谢...

连接字符串

```
 myCon = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data 
 Source=C:..\TempDB.mdb"); 
```

更新方法...

```
 private void btnUpdate_Click(object sender, EventArgs e)
    {
        OleDbCommand cmd = new OleDbCommand();
        cmd.CommandType = CommandType.Text;

        cmd.CommandText = "UPDATE [Family] SET [FirstName] = ?, [LastName] = ?, [FamilyDOB] = ?, [Medical] = ? WHERE [ID] = ?";
        //tried this as well
        //cmd.CommandText = "UPDATE [Family] SET [FirstName] = FirstName, [LastName] = @LastName, [DOB] = @StudentDOB, [Medical] = @Medical WHERE [ID] = @ID";
        cmd.Parameters.AddWithValue("@ID", txtFamID.Text);
        cmd.Parameters.AddWithValue("@FirstName", txtFirstName.Text);
        cmd.Parameters.AddWithValue("@LastName", txtLastName.Text);
        cmd.Parameters.AddWithValue("@FamDOB", txtFamDOB.Text);
        cmd.Parameters.AddWithValue("@Medical", txtMedical.Text);

        cmd.Connection = myCon;
        myCon.Open();
        cmd.ExecuteNonQuery();
        myCon.Close();
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T18:55:12.343

按照它们在 SQL 语句中出现的顺序提供参数值。

```
cmd.Parameters.AddWithValue("@FirstName", txtFirstName.Text);
cmd.Parameters.AddWithValue("@LastName", txtLastName.Text);
cmd.Parameters.AddWithValue("@FamDOB", txtFamDOB.Text);
cmd.Parameters.AddWithValue("@Medical", txtMedical.Text);
cmd.Parameters.AddWithValue("@ID", txtFamID.Text); 
```

OleDB plus MS Access 不关心参数名称，只关心它们的顺序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T18:29:01.423

OLE DB.NET Framework 数据提供程序使用标有问号 (?) 而不是命名参数的位置参数。

改变这个：

```
 cmd.Parameters.AddWithValue("@ID", txtFamID.Text);
    cmd.Parameters.AddWithValue("@FirstName", txtFirstName.Text);
    cmd.Parameters.AddWithValue("@LastName", txtLastName.Text);
    cmd.Parameters.AddWithValue("@FamDOB", txtFamDOB.Text);
    cmd.Parameters.AddWithValue("@Medical", txtMedical.Text); 
```

到：

```
 cmd.Parameters.AddWithValue("?", txtFamID.Text);
    cmd.Parameters.AddWithValue("?", txtFirstName.Text);
    cmd.Parameters.AddWithValue("?", txtLastName.Text);
    cmd.Parameters.AddWithValue("?", txtFamDOB.Text);
    cmd.Parameters.AddWithValue("?", txtMedical.Text); 
```

更多：[OleDbParameter 类](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbparameter.aspx)

# unix - 运行时出错 make autoannotate sundance_apps 4.3.7

> ID：15345833
> 
> 赞同：0
> 
> 时间：2013-03-11T18:27:09.027
> 
> 标签：unix, makefile, sundance

我正在尝试安装意见查找器，但当我尝试为圣丹斯应用程序进行自动注释时，我遇到了困难。

我得到的错误日志很大，并且包含所有未定义的参考错误。

第一行在函数“my_init_sundance(sunstr,sunstr)”和未定义的参考错误列表中说明。

反正我能解决吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T07:09:06.947

在尝试编译 autoannotate 之前，您必须确保 Sundance 编译成功。检查您的 sundance-4.37/bin 是否包含： aslog nlp prepro

为了让 Sundance 在我的 64 位机器上编译，我必须在 src 和 include 中编辑 Makefile 文件，并将 -m32 添加到 CFLAGS 变量（或 NormalCC）中。在shared_lib_linux: 目标之后也下来了。由于我在 OSX 上，我还必须将 -dynamic flat 添加到 NormalOpts 和 LIBS。

# perl - 与引用相关的 Perl 语法

> ID：15345834
> 
> 赞同：4
> 
> 时间：2013-03-11T18:27:09.043
> 
> 标签：perl

考虑 x 是一个数组引用。

我知道这`[]`给出了一个匿名数组引用并`{}`给出了一个匿名哈希引用。现在是什么`@{$x}`意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T18:29:18.203

这意味着*取消引用*数组*ref*。

您将看到引用数组的内容。

请注意，您可以使用简单的

```
@$x 
```

在你的情况下。

`{ }`当您的*数据结构*中有多个级别时，需要这些字符，如下例所示：

```
@{ $foo->{first_level}->{second_level} } 
```

或者

```
@{ $foo->[$first_level]->[$second_level] } 
```

这也适用于其他[印记](http://en.wikipedia.org/wiki/Sigil_%28computer_programming%29)：

```
%{ } # HASH
$    # SCALAR 
```

看[`perldoc perlreftut`](http://perldoc.perl.org/perlreftut.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-11T18:29:36.260

这是一个取消引用。是对数组`@{ $ref }`的引用，这意味着你可以在任何你使用的地方使用.`@array``@{ $ref }``@array`

```
>perl -E"@array = qw( a b c ); say $_ for @array;"
a
b
c

>perl -E"$ref = [qw( a b c )]; say $_ for @{ $ref };"
a
b
c 
```

明确时可以省略花括号。

```
>perl -E"$ref = [qw( a b c )]; say $_ for @$ref;"
a
b
c 
```

*   [迷你教程：取消引用语法](http://www.perlmonks.org/?node_id=977408)
*   [参考快速参考](http://www.perlmonks.org/?node_id=69927)
*   [perlref](http://perldoc.perl.org/perlref.html)
*   [perlreftut](http://perldoc.perl.org/perlreftut.html)
*   [perldsc](http://perldoc.perl.org/perldsc.html)
*   [佩洛尔](http://perldoc.perl.org/perllol.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-11T18:30:25.907

if`$x`是对数组的引用，如

```
@a = (1,2,3);
$x = \@a 
```

然后用`@$x`or `@{$x}`，你回来了`@a`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T22:23:14.393

取决于上下文和接下来的内容。在标量上下文中：

```
$y = @{$x}; 
```

它将返回数组中`$x`作为引用的元素的计数。

在列表上下文中：

```
@y = @{$x}; 
```

它将返回数组的元素。

如果后跟`[LIST]`：

```
@{$x}[1,42] 
```

它产生一个数组切片，一个数组中指定元素的列表，`$x`作为引用。

如果后跟`{LIST}`：

```
@{$x}{ 'foo', 'bar' } 
```

它产生一个散列片，散列中指定键的值列表`$x`作为参考。

[参考快速参考](http://perlmonks.org/?node=References%20quick%20reference)

请注意，`{}`周围`$x`与`{}`用于构造匿名哈希无关，它们是代码块的分隔符。如果里面是一个简单的标量变量，可以省略；如果它们没有被省略，它们可以包含任意表达式，甚至可以包含最后返回引用的多个语句。

# sql-server - 如何在 *nix 上使用 Zend Framework 2 和 MS SQL Server？

> ID：15345838
> 
> 赞同：1
> 
> 时间：2013-03-11T18:27:17.943
> 
> 标签：sql-server, zend-framework2, zend-db

如果存在，那么在非 Windows 操作系统上将 ZF2 与 MS SQL Server 一起使用的规范方法是什么？

从[文档](http://framework.zend.com/manual/2.1/en/modules/zend.db.adapter.html)中我可以看出，官方只支持 Sqlsrv 驱动程序，该驱动程序仅适用于 Windows 平台。

在 ZF1 中，我们使用了`Pdo_Mssql`适配器并将其指定`pdoType`为`dblib`. 我找不到任何关于在 ZF2 中做类似事情的参考资料。

显然，前一段时间有**一个Pdo\Mssql 驱动程序在重大**[重构](https://github.com/zendframework/zf2/commit/00a12ad252fd83fbec486ab6f761d4d820b0a36b)期间被删除，但我没有看到当前记录的使用 Pdo_Dblib 的方式。

根据上面的适配器文档，您可以将适配器配置中的驱动程序设置为`Pdo=OtherPdoDriver`，但没有记录此用法的示例。这是否意味着您可以使用`Pdo=Pdo_Dblib`or`Pdo=dblib`并且它会自动工作？

我发现传递对 PDO ODBC 驱动程序的引用，这将是一个可用的替代方案，但找不到任何文档或代码引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T03:28:04.760

安装 php5-sybase。确保`freetds`已安装。你应该有一个`/etc/freetds`名为的 conf 文件`freetds.conf`。

在您的`freetds.conf`文件中，您应该像这样设置您的 mssql 连接：

```
[MyMsSqlServer]
host = symachine.domain.com
port = 5000
tds version = 5.0 
```

然后，（此处以 ZF2 相册教程为例）您可以像这样设置适配器：

```
return array(
    'db' => array(
        'driver'         => 'Pdo',
        'dsn'            => 'dblib:host=MyMsSqlServer;dbname=zf2tutorial',
        'charset'        =>  'UTF-8',
        'username'       => 'username',
        'password'       => 'password',
        'pdotype'       => 'dblib',
    ),
    'service_manager' => array(
        'factories' => array(
            'Zend\Db\Adapter\Adapter' => 'Zend\Db\Adapter\AdapterServiceFactory',
        ),
    ),
); 
```

看看这是否能帮助您并让我知道。我有一段时间让这个工作，我很乐意帮助其他有这个问题的人！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T11:04:08.653

是的，您可以使用 odbc 进行连接。它目前不受官方支持，但您可以相当轻松地使用它，只需进行最少的修改。

您需要做的第一件事是确保您可以使用基本的 PHP PDO 函数进行连接。所以，做这样的事情：

```
$resource = new PDO('odbc:driver=FreeTDS;dbname=MYDB;Server=127.0.0.1;Port=8090;UID=Testuser;PWD=testpass;', 'Testuser', 'testpass', array());
$s = $resource->prepare('SELECT * FROM TEST_TABLE');
$r=$s->execute();
var_dump($r); 
```

您需要为您的设置更改主机、端口、用户、密码、表名等，但您可以使用它来确保您拥有正确的这些详细信息。一旦你知道你在做什么来连接，你就可以用 Zend 访问它，像这样：

```
$configArray = array(
    'driver' => 'pdo_odbc',
    'driver_options' => array('driver' => 'FreeTDS'),
    'platform' => 'Mssql',
    'dbname' => 'MYDB',
    'host' => '127.0.0.1',
    'port' => 8090,
    'user' => 'Testuser',
    'pass' => 'testpass'
);

$adapter = new Zend\Db\Adapter\Adapter($configArray);

$q = new Zend\Db\Sql\Select();
$q->from('TEST_TABLE');
$sql = $q->getSqlString($adapter->platform);
$r = $adapter->query($sql);
echo $r->getSql()."\n";
$result = $r->execute();
while(($res = $result->next()) !== false){
    print_r($res);
} 
```

**但是**，这实际上不起作用，原因有两个。一、平台——Zend目前没有mssql平台；它默认为 sql92，这是*行不通*的，因为它在 中引用标识符`""`，而当 mssql 需要用 引用它们时`[]`。因此，您需要将 Zend/Db/Adapter/Platform/Sql92.php 复制为 Mssql.php，并将其更改为使用`[`and`]`而不是`"`.

其次，因为连接 odbc 的 dsn 需要 driver 字段，zend 目前不支持。您需要打开 Driver/Pdo/Connection 类并修改连接函数，以便在 $pdoDriver = odbc 时添加`$dsn[] = "driver={$options['driver']}";`和替换。`$dsn[] = "host={$hostname}";``$dsn[] = "server={$hostname}";`

请注意，其他答案是由实际上不了解 Zend 2 库如何工作的人发布的 - 如果您为 'dsn' 指定值，则其他字段将被**忽略**。我不知道他们从哪里得到“pdotype”的想法，因为这不是出现在代码中任何地方的字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T09:43:19.180

您可以使用 pdo 连接并将 pdotype 设置为 dblib（加载 pdo_dblib 扩展名）。 **sqlsrv 仅适用于 Windows。**

在这里，您可以看到如何将 freetds 和 unixodbc 配置为连接到 MS SQL Server。 [http://featurebug.blogspot.de/2011/01/mac-os-x-php-zend-server-ce-freetds-and.html](http://featurebug.blogspot.de/2011/01/mac-os-x-php-zend-server-ce-freetds-and.html)

**更新：** 这是一个如何使用连接字符串进行连接的示例：

```
$db = new Zend\Db\Adapter\Adapter(
    array(
        'driver'        => 'Pdo',
        'dsn'            => 'dblib:host=mssql_freetds;',
        'username'       => 'mssql_username',
        'password'       => 'mssql_password',
        )
); 
```

# binding - Knockout.js - 在一个绑定访问 observable 中，不仅仅是它的值

> ID：15345840
> 
> 赞同：3
> 
> 时间：2013-03-11T18:27:25.543
> 
> 标签：binding, knockout.js

我有以下自定义绑定

```
ko.bindingHandlers.dialogFor = {
    init: function(el, valueAccessor) {
        $(el).dialog();
        var val = valueAccessor();
        if(ko.isObservable(val))
            $(el).on('dialogclose', function(){ 
                val(null) 
            }); 
    }
}; 
```

`dialogFor`这使我可以简单地通过设置 observables来标记带有绑定和打开对话框的 html 片段。

不幸的是，传入的值总是未包装，因此 if 检查永远不会通过，并且在对话框关闭时重置 observable 不起作用。

如何获得传递的实际 observable，而不仅仅是展开的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:39:14.170

我看不到您的 HTML，所以这是一个猜测，我认为您在自定义绑定的值中使用了 observable，例如：

```
 <div data-bind="dialogFor: val()"></div> 
```

如果是，则您已经解开该值，并且只有不是可观察值的值传递给您的自定义绑定，所以这就是您的 if 条件失败的原因。您应该像这样使用它：

```
 <div data-bind="dialogFor: val"></div> 
```

我创建了一个[**工作示例**](http://jsbin.com/inubus/2/edit)，其中 jquery ui 对话框状态由 observable 控制。

# java - 将二维数组转换为一维数组，存储二维数组位置（列、行）和一维数组中的值

> ID：15345841
> 
> 赞同：0
> 
> 时间：2013-03-11T18:27:26.850
> 
> 标签：java

我已经设法将其转换为输出二维数组中的值，但不知道如何获得该位置。

这是我的代码：

```
public static int[] convert(int [][]twodarray)
{
    int[] onedarray = new int[twodarray.length * twodarray.length];
    for(int i = 0; i < twodarray.length; i ++)
    {
        for(int s = 0; s < twodarray.length; s ++)
        {
            onedarray[(i * twodarray.length) + s] = twodarray[i][s];
        }
    }
    return onedarray;
}

public static int [] printonedarray(int [] onedarray)
{
    System.out.print("onedarray: ");

    for(int i = 0; i < onedarray.length; i++) 
    {

            System.out.print(onedarray[i] + "\t");

    }
    System.out.println();
    return onedarray;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:52:55.630

好吧，我不太确定我是否让你正确。但我是这样理解的：
你有一个 2 暗淡。数组并希望将其转换为 1 暗淡。大批。
因此，您要准备第一列和第一行。
然后你想在 1 dim 的最前位置添加这个值。大批。
然后你阅读下一行并想要添加这个值等等。
如果我是对的，我建议为您的 1 dim 数组使用 arrayList。因为你不知道柱子有多深。ArrayLists 是动态的。您可以简单地添加一个元素而无需给出位置。
您的代码建议非常好，我只是将其转换为 ArrayList。

```
import java.util.ArrayList;

    public class test
    {

    public static ArrayList<Integer> convert(int [][]twodarray)
    {
        ArrayList<Integer> onedarray = new ArrayList<Integer> ();
        for(int i = 0; i < twodarray.length; i ++)
        {
            for(int s = 0; s < twodarray[i].length; s ++)
            {
                onedarray.add(twodarray[i][s]);
            }
        }
        return onedarray;
    }

    public static ArrayList<Integer> printonedarray(ArrayList<Integer> onedarray)
    {
        System.out.print("onedarray: ");

        for(int i = 0; i < onedarray.size(); i++) 
        {

                System.out.print(onedarray.get(i) + "\t");

        }
        System.out.println();
        return onedarray;
    }
} 
```

如果我错过了您的问题，我很抱歉回答“错误”。
我希望它会帮助你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:31:38.493

假设您的二维数组不是锯齿状数组，那么原始坐标`A[i]`应该是`A[i/x][i%x]`您的二维数组`x`的最低有效列的原始长度

# git - 有时 git 告诉我每个文件都是新的和未暂存的？

> ID：15345846
> 
> 赞同：4
> 
> 时间：2013-03-11T18:27:40.840
> 
> 标签：git, github-for-windows

我将对文件进行更改，转到 GitHub for windows UI。提交我的更改，然后点击同步按钮。然后它说错误，请尝试改用shell。所以我去 shell 并输入`git status`. 它告诉我 repo 中的每个文件都是新的且未暂存的。大约有 4,000 个未暂存的文件。

这已经发生在我身上 3 次了，在 2 台不同的计算机上，在不同的存储库上，甚至在单独工作的时候。这是一个常见的错误吗？有时我会不知从哪里得到一个分离的头，或者一个 .lock 文件挂得太久。怎么了。每次我都需要很长时间才能从混乱中恢复过来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:24:33.283

对于与 Unix 用户共享存储库并且没有正确设置其 Git 或编辑器行尾设置的 Windows 用户来说，这通常是一个问题。有关以下设置，请参见手册页：

*   核心.autocrlf
*   核心.eol
*   核心.空白

有关详细信息，请参阅[处理行尾](https://help.github.com/articles/dealing-with-line-endings#platform-windows)。

# sorm - 如何在 SORM 中指定 autoIncrement 列？

> ID：15345847
> 
> 赞同：2
> 
> 时间：2013-03-11T18:27:42.117
> 
> 标签：sorm

我想为 SORM 中的数字列添加 autoIncrement 属性。我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:21:52.257

没有办法在 SORM 中配置它，这是有原因的：实际上自动增量属性只需要 id 列，[SORM 为你管理 id](http://sorm-framework.org/Documentation.html#persisted_trait_and_ids)。

但是，如果您绝对确定需要这个，您可以随时让 SORM 生成模式，然后使用 db-administration 工具根据您的需要更改这些详细信息。但同样，我确信您正在错误地解决问题。你需要那个干什么？

# ruby-on-rails - “1”的未定义方法“每个”：字符串

> ID：15345858
> 
> 赞同：1
> 
> 时间：2013-03-11T18:28:16.900
> 
> 标签：ruby-on-rails, validation, activerecord, runtime-error

尝试在 Rails 模型上分配属性时出现奇怪的字符串错误：

```
# POST /apartments
  # POST /apartments.xml
  def create
    @apartment = Apartment.new(params[:apartment]) 
```

参数

```
{"utf8"=>"✓",
 "authenticity_token"=>"Kxxxxx=",
 "apartment"=>{"street"=>"123 Main St",
 "unit"=>"",
 "hide_address"=>"0",
 "city"=>"White Plains",
 "state"=>"New York",
 "zipcode"=>"10840",
 "country"=>"United States",
 "price"=>"4000",
 "security_deposit"=>"",
 "application_fee"=>"",
 "bedrooms"=>"4",
 "bathrooms"=>"3",
 "size"=>"",
 "available_date"=>"",
 "unit_amenities"=>["air conditioning"],
 "description"=>"",
 "rooms"=>"1"},
 "commit"=>"Publish Your Listing"} 
```

错误

```
NoMethodError in ApartmentsController#create
undefined method `each' for "1":String 
```

想法？

# c++ - c++中3D向量的问题

> ID：15345862
> 
> 赞同：1
> 
> 时间：2013-03-11T18:28:22.523
> 
> 标签：c++, vector

我是 C++ 新手，我在尝试使用这个 3D 矢量时遇到了一些问题。问题的核心是下面的代码。我创建了一个 100*100*10 3D 矢量，但在我的主函数中，程序似乎并不知道它的存在，因为我在尝试运行它时遇到错误。“错误：符号particleGrid 未在当前范围内定义”。二维向量没有这个问题。如果这很重要，我正在使用 ROOT 运行代码。

```
using namespace std;
Int_t gridResolution=100;
vector<vector<vector<int>>> particleGrid(gridResolution,vector<vector<int>>(gridResolution,vector<int>(10)));

void main(){
    particleGrid.clear();
} 
```

非常感谢任何帮助或提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:35:55.167

看来这是一个语法错误。

```
vector<vector<vector<int>>> particleGrid(gridResolution,vector<vector<int>>(gridResolution,vector<int>(10))); 
```

您的编译器将`>>>`in`vector<vector<vector<int>>>`和`>>`in`vector<vector<int>>`视为`>>`运算符。解决方法：`>`将这一行中的所有内容分开

```
vector<vector<vector<int> > > particleGrid(gridResolution,vector<vector<int> >(gridResolution,vector<int>(10))); 
```

# python - 多开发人员环境 python 和 sqlalchemy

> ID：15345864
> 
> 赞同：0
> 
> 时间：2013-03-11T18:28:31.390
> 
> 标签：python, database, development-environment

我目前正在探索使用 python 来开发我的服务器端实现。我决定将 SQLAlchemy 用于数据库。

我目前不确定的是应该如何设置它，以便多个开发人员可以在该项目上工作。对于代码，这不是问题，但我如何处理数据库修改？用户如何同步数据库以及如何设置潜在数据？每个开发人员应该/可以使用自己的 sqlite db 进行开发吗？

对于生产，将使用 postgresql，但开发人员必须能够离线工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:38:48.833

您可以使用[Alembic](https://pypi.python.org/pypi/alembic/0.4.2)来管理您的数据库结构。将您的迁移置于版本控制之下，以确保开发人员可以轻松地与更改保持同步。至于数据本身，您可以使用一组固定装置，或者您可以编写一些 Fabric 命令来导入/导出 Postgres 转储，如有必要，您还可以对其进行版本控制——根据数据大小，您可能不想然而，在版本控制下保留一个大的未压缩 SQL 转储（尽管它可以使用 git 或 hg 很好地压缩）。您问题的这方面取决于您的开发团队的规模和数据库的规模。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:44:24.413

确保你有一个 python 程序或程序来从头开始用测试数据填充数据库。它允许每个开发人员从不同的起点开始工作，但也可以使用相同的环境进行测试。

# intersystems-cache - 继承关系未按预期工作

> ID：15345865
> 
> 赞同：0
> 
> 时间：2013-03-11T18:28:35.697
> 
> 标签：intersystems-cache, objectscript

我有以下课程：

```
Class SearchTemplateDO [ Abstract ]
{
 Relationship QueryParts As QueryPartDO [ Cardinality = many, Inverse = SearchTemplate ];
}

Class MyCustomSearchDO Extends (%Persistent, SearchTemplateDO)
{
 /// inherits all properties / relationships from SearchTemplateDO
}

Class QueryPartDO Extends %Persistent
{
   ...

    Relationship SearchTemplate As SearchTemplateDO 
     [ Cardinality = one, Inverse = QueryParts ];

    Index SearchTemplateIndex On SearchTemplate;
} 
```

当我在 SQL 中查看这两个表时，我看到 QueryPartDO 的 SearchTemplate 字段为空，当我查看 MyCustomSearchDO 时，我没有看到“QueryParts”字段，尽管两个表都有数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:23:25.503

从[文档](http://docs.intersystems.com/cache20121/csp/docbook/DocBook.UI.Page.cls?KEY=GOBJ_objectsql#GOBJ_C1746)

MANY 或 CHILD 端不投影为字段，因为这些关系在磁盘上是无状态的，并且 SQL 不处理内存中的对象。相反，您必须根据 ONE 或 CHILD 端的 ID 值和 MANY 或 PARENT 端的参考字段执行简单连接：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:33:55.540

您不能在非抽象子类中引用抽象父类，因为抽象类没有定义存储策略。关系中的两个类必须是抽象的（在这种情况下根本没有存储数据）或非抽象的（在这种情况下你将有适当的存储策略）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T21:14:58.320

最后，我能够通过在抽象类上扩展 %Persistent 来实现这一点。在我尝试之前，没有任何效果，而且我一直收到一个奇怪的错误。但是，我在一个示例项目中尝试了这个，现在它可以工作了。

# android - C2DM - 检测应用程序是如何启动的

> ID：15345868
> 
> 赞同：2
> 
> 时间：2013-03-11T18:28:44.580
> 
> 标签：android, android-c2dm

所以我们有一个 iOS 应用程序和一个 Android 应用程序，每个应用程序都使用各自的通知方法框架......iOS 有推送，Android 有 C2DM（直到我们把它带到 GCM）......在 iOS 上一切都很好，但我寻找一种方法来检测应用程序是否通过单击 C2DM 消息启动（类似于 iOS 上的 didFinishLaunchingWithOptions 功能）。

目前，当在 Android 上收到推送消息时，我会根据消息有效负载中包含的数据执行我需要执行的任何处理......因此，当用户启动应用程序时，他们的体验取决于该推送消息中的内容. 无论他们是通过按主屏幕/历史记录上的图标还是推送消息来启动，情况都是如此。理想情况下，我们希望只有当他们选择该消息时才会发生这种情况，并且如果他们从主/历史屏幕中选择应用程序，那么它应该正常启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:48:19.580

您可以在 GCMIntentService 意图类的 onMessage 侦听器上的 SharedPreferences 中保存一些数据。GCM 监听器毕竟属于你的包应用程序。您保存的内容取决于您的应用程序和消息负载，但它可能是您想要的任何内容。然后在单击通知时启动的 Activity 的 onCreate 函数上，您阅读 Shared Preferences 以查看您是否来自 GCM 通知。请记住清除您保存在 SharedPreferences 中的变量，以便下次用户打开应用程序时，它可以正确显示内容。

你在这里有一个例子。不幸的是，我现在无法尝试，但看到这个想法很有用。它与 G2DM 非常相似，因此您必须在您的情况下寻找等价物。

```
public class GCMIntentService extends GCMBaseIntentService {

    /*... other functions of the class */

    /**
     * Method called on Receiving a new message
     * */
    @Override
    protected void onMessage(Context context, Intent intent) {
        Log.i(TAG, "Received message");
        String message = intent.getExtras().getString("your_message");

        // notifies user
        generateNotification(context, message);
    }

    /**
     * Issues a notification to inform the user that server has sent a message.
     */
    private static void generateNotification(Context context, String message) {
        int icon = R.drawable.ic_launcher;
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager)
            context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);

        // Save your data in the shared preferences
        SharedPreferences prefs = getSharedPreferences("YourPrefs", MODE_PRIVATE);  
        SharedPreferences.Editor prefEditor = prefs.edit();  
        prefEditor.putBoolean("comesFromGCMNotification", true);  
        prefEditor.commit(); 

        String title = context.getString(R.string.app_name);

        Intent notificationIntent = new Intent(context, MainActivity.class);
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
            Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent =
            PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;

        // Play default notification sound
        notification.defaults |= Notification.DEFAULT_SOUND;

        // Vibrate if vibrate is enabled
        notification.defaults |= Notification.DEFAULT_VIBRATE;
        notificationManager.notify(0, notification);     

    }

} 
```

# windows-installer - 有条件地在 InstallShield 2010 中创建一个文件夹

> ID：15345871
> 
> 赞同：0
> 
> 时间：2013-03-11T18:28:53.877
> 
> 标签：windows-installer, installshield, installshield-2010

我正在使用 InstallShield 2010 为我们的产品构建安装程序（是的，我知道它已经过时并且我正在尝试进行升级，但现在这就是我所拥有的）。

安装程序需要做的一件事是创建一个用于存储数据的目录。但是我只想在选择了某种功能组合的情况下创建该目录（基本上，应该选择一个功能，不应该选择另外两个）。

我在“文件和文件夹”视图中创建了该文件夹，但看不到如何有条件地创建它。我尝试将组件与应选择的功能相关联，并将其他两个功能未选择的组件设置为条件，但这不起作用。每次选择关联要素时仍会创建该文件夹，无论是否选择了其他两个要素。

我想我可以使用 InstallScript 在 if 语句中创建它，但如果可能的话，我宁愿从 InstallShield GUI 中创建它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T22:34:53.387

我不认为这是可能的。直到 Costing 才评估 FeatureState，此时组件列表已设置。

您需要在自定义操作中执行此操作；installscript、vbscript、MSI Dll 等，并使用您关心的功能状态作为自定义操作的条件。

# powershell - Powershell 中的自动转义动态字符串

> ID：15345873
> 
> 赞同：3
> 
> 时间：2013-03-11T18:29:01.977
> 
> 标签：powershell, escaping

我有一个将从 3rd 方应用程序动态生成的字符串

```
$somePath = "D:\some\path\name.of - my file [20_32_21].mp4" 
```

我需要能够在函数中验证此路径。

```
$somePath = "D:\some\path\name.of - my file [20_32_21].mp4"

Function ValidatePath{
    Param($path)
    if(Test-Path $path){
        Write-Host "Worked"
    } else {
        Write-Host "Didn't Work"
    }
}

ValidatePath $somePath 
# DIDN'T WORK 
```

问题是它在方括号上失败了。

如何自动转义方括号以验证文件？

```
# Path needs to look like this
$somePath = "D:\some\path\name.of - my file ``[20_32_21``].mp4"
ValidatePath $somePath 
# WORKED!!! 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T18:40:25.620

使用 -LiteralPath 而不是 -Path；例如：

```
if ( test-path -literalpath $path ) {
  ....
} 
```

账单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:42:56.790

您可以尝试使用“test-path -literalpath $path”吗？

# svn - 在颠覆中分支多个项目

> ID：15345879
> 
> 赞同：1
> 
> 时间：2013-03-11T18:29:36.470
> 
> 标签：svn, project-management, branching-and-merging

我们在一个 repo 中有一个包含 20 多个 eclipse 项目的应用程序。到目前为止，我们还没有进行太多分支，但我们将尝试更多地使用分支功能。

每个特性通常都涉及项目的一个子集——它可能涉及所有的 java 项目，或者所有的 flex 前端项目，或者只是其中的一个或两个。

因此，在分支方面有点缺乏经验，我想知道仅从更改的项目创建功能分支是否是一个好主意，或者每次都使用所有项目创建每个功能分支是否是一个更好的做法 - 可能是什么每种方法的优缺点（我主要担心“部分”解决方案的潜在问题，例如如果我需要将另一个项目拉入现有分支怎么办）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T22:39:21.247

我建议避免分支存储库的子集。如果您发现自己真的想要这样做，那么您是否真的需要将内容拆分到多个存储库中可能值得考虑。

分支本身是用廉价副本制作的，每个分支都不会占用服务器上的空间。

管理哪些项目存在于哪个分支上会让人感到困惑，正如您所指出的，对于您的一些团队来说，必须弄清楚将缺失项目的哪个修订版复制到“分支”它也可能是一个障碍。我很确定我工作过的大多数团队的成员都会抓住最新的——这可能是需要的，但从概念上讲，这对我来说似乎更令人困惑。

看到两个分支之间的差异也可能是一个障碍 - 会有很多森林，很难挑选出你真正希望看到的树木。

分支整个 repo 绝对是社区规范。我相信你可以成功——但你的继任者可能会诅咒你。

# hibernate - Merge 会更新新的会话对象更新吗？

> ID：15345890
> 
> 赞同：2
> 
> 时间：2013-03-11T18:30:16.193
> 
> 标签：hibernate

Merge 会将 Name 更新为 Manik 或 Ankit ？

```
Student s1 = null;
s1 = (Student)session1.get(Student.class, new Integer(101));
session1.close();
s1.setName("Manik");
Session session2 = factory.openSession();
Student s2 = null;
Object o1 = session2.get(Student.class, new Integer(101));
s2 = (Student)o1;
s2.setName("Ankit");
Transaction tx=session2.beginTransaction();
session2.merge(s1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:37:24.090

它应该将名称更新为“Manik”（仅供参考，OP 的原始问题：[持久性上下文缓存 id 和 SQL 查询？](https://stackoverflow.com/questions/15345419/persistence-context-cache-the-id-and-sql-query/15345943#15345943)）。

Hibernates 奇怪的可变对象缓存（恕我直言，我一直认为在缓存中存储可变对象是愚蠢的想法）在这里讨论：http: [//apmblog.compuware.com/2009/02/16/understanding-caching-in-hibernate-一部分的会话缓存/](http://apmblog.compuware.com/2009/02/16/understanding-caching-in-hibernate-part-one-the-session-cache/)

合并应替换`s2`为`s1`重新附加`s1`到上下文/会话。刷新或关闭会话后，它将保存到数据库中。如果您已保存`s2`然后合并`s1`，我认为但不确定您是否会在保存时获得机会锁定异常，特别是如果您跨线程共享会话。

确定的最好方法是编写单元测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:34:39.740

这将使用名称 Manik 进行更新。我们将使用合并来更新值而不考虑会话状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:36:15.407

由于这个原因，这将更新到 Manik：`Use merge() if you want to merge your modifications at any time without consideration of the state of the session.`来自[hibernate 文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html#objectstate-detached)。

# c++ - 实现加载屏幕

> ID：15345891
> 
> 赞同：0
> 
> 时间：2013-03-11T18:30:16.247
> 
> 标签：c++, loading, wxwidgets, splash-screen

有时加载二进制可执行文件可能需要一段时间。像 GIMP 和 Code::Blocks 这样的应用程序具有几乎立即弹出的加载屏幕，并提供状态消息，直到加载完整的应用程序。

他们如何在加载应用程序的其余部分之前立即弹出加载屏幕并开始显示进度。

寻求 C++ 特定答案中的 WxWidgets。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:52:20.433

你看过 wxSplashScreen 吗？

[http://docs.wxwidgets.org/trunk/classwx_splash_screen.html](http://docs.wxwidgets.org/trunk/classwx_splash_screen.html)

在开始任何耗时的初始化之前，首先显示此窗口。

顺便说一句，如果您的初始化代码需要很长时间才能完成，您可能应该看看它的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:45:12.530

启动画面本身就是小程序。他们加载他们的父程序，然后关闭。您可能已经注意到（至少对于 Windows），启动画面会在加载时打开一个任务栏按钮，然后瞬间打开两个，然后关闭一个。这是主程序打开和闪屏程序关闭。

# ruby - ruby 枚举器的 erb 模板是什么样的？

> ID：15345893
> 
> 赞同：0
> 
> 时间：2013-03-11T18:30:18.527
> 
> 标签：ruby, enums, erb

ruby 枚举器的 erb 模板是什么样的？答案将是一个 erb 模板。

```
require "erb"

# build data class
class Foo < Array

  def build
    b = binding
    # create and run templates, filling member data variables
    ERB.new(File.read('test2.erb')).result b
  end
end

# setup template data

bar = Foo.new([1,2,3])

puts bar.build 
```

我想要某种方式来访问 erb 模板中的 1,2,3 项。

专注于 Ruby 1.9.3 兼容性。

注意：Class 是 Array 的扩展，我想在它的 erb 模板中访问这个数组的元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:36:58.407

好的，就像进入自我参考一样简单。

```
<% self.each{|element| %> <%= element %> <% } %> 
```

# redis - 有没有办法在 ServiceStack Redis 中使用 Redis MONITOR 数据？

> ID：15345898
> 
> 赞同：1
> 
> 时间：2013-03-11T18:30:41.850
> 
> 标签：redis, servicestack

ServiceStack.Redis 是否有能力调用 Redis Monitor 命令并使用它的数据，类似于[node-redis](https://github.com/mranney/node_redis)客户端？：

```
var client  = require("redis").createClient(),
    util = require("util");

client.monitor(function (err, res) {
    console.log("Entering monitoring mode.");
});

client.on("monitor", function (time, args) {
    console.log(time + ": " + util.inspect(args));
}); 
```

我检查了[IRedisNativeClient 接口](https://github.com/ServiceStack/ServiceStack.Redis/wiki/IRedisNativeClient)，但没有看到 monitor 命令的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:02:15.657

还没有人将 Monitor 命令添加到[ServiceStack.Redis](https://github.com/ServiceStack/ServiceStack.Redis)，因为它不是您通常会在应用程序中使用的东西。即正常的用例是使用`redis-cli`可能通过unix命令管道来监视redis命令以grep输出。

同时，我们仍然欢迎拉取请求以增加对此的支持。

# ios - 使用 OCMock 发生意外崩溃，在 NSString 上模拟“mutableCopy”

> ID：15345899
> 
> 赞同：1
> 
> 时间：2013-03-11T18:30:46.913
> 
> 标签：ios, ocmock, gh-unit

我正在尝试模拟`mutableCopy`在 iOS 上使用 OCMock 和 GHUnit 的调用。

尽管测试通过了，但我`EXC_BAD_ACCESS`在清理过程中遇到了异常，我正在尝试找出原因。

看看这个。该测试表明可以在 mock`mutableCopy`上进行模拟`NSString`。在这个测试中，我返回另一个`NSString`，而不是一个`NSMutableString`. 这只是为了证明`mutableCopy`期望被激发，并且测试通过了。

```
#import <GHUnitIOS/GHUnit.h>
#import "OCMock.h"

@interface TestItClass : GHTestCase @end
@implementation TestItClass

// Test that mutableCopy on an NSString is mockable.
- (void)test_1_mutableCopyOfString_shouldBeMockable_givenAStringIsReturned {
    NSString *string = [OCMockObject mockForClass:NSString.class];
    NSString *copy = @"foo";
    [(NSString *) [[(id) string expect] andReturn:copy] mutableCopy];

    // MutableCopy is mocked to return a string, not a mutable string!
    // This is clearly wrong from a static typing point of view, but
    // the test passes anyway, which is ok.
    NSMutableString *result = [string mutableCopy];
    GHAssertEquals(result, copy, nil);
    [(id)string verify];
} 
```

现在我更改了模拟期望，以便`mutableCopy`现在返回一个`NSMutableString`. 测试仍然通过，但在测试结束时我得到了一个`EXC_BAD_ACCESS`例外。

```
- (void)test_2_mutableCopyOfString_shouldBeMockable_givenAMutableStringIsReturned {
    NSString *string = [OCMockObject mockForClass:NSString.class];
    NSMutableString *copy = [@"foo" mutableCopy];
    [(NSString *) [[(id) string expect] andReturn:copy] mutableCopy];

    // Now mutableCopy is mocked to return a mutable string!
    // The test now blows up during the test teardown! Why?
    NSMutableString *foo = [string mutableCopy];
    GHAssertEquals(foo, copy, nil);
    [(id)string verify];
}

@end 
```

在这两个测试中，验证工作，关于断言。这表明这两个测试都构造良好，并且模拟预期正在按预期触发。但是，第二个测试在拆解时因内存访问错误而失败：

```
Simulator session started with process 7496
Debugger attached to process 7496
2013-03-11 18:23:05.519 UnitTests[7496:c07] TestItClass/test_2_mutableCopyOfString_shouldBeMockable_givenAMutableStringIsReturned ✘ 0.00s
2013-03-11 18:23:06.466 UnitTests[7496:c07] Re-running: TestItClass/test_2_mutableCopyOfString_shouldBeMockable_givenAMutableStringIsReturned <GHTest: 0x7793340>
Exception: EXC_BAD_ACCESS (code=1, address=0x11dfe3ea)) 
```

你能告诉我为什么会发生吗？

谢谢，乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:42:18.643

[您面临的问题是由 ARC 遵循基本内存管理规则](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html%23//apple_ref/doc/uid/20000994-SW1)这一事实引起的。具体来说：

> *   **您拥有您创建的任何对象**
>     
>     
>     
>     您使用名称以“alloc”、“new”、“copy”或“mutableCopy”开头的方法创建对象（例如，alloc、newObject 或 mutableCopy）。

所以解决方案是查看调用选择器来确定`retain`是否`returnValue`。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:23:33.140

我是了解正在发生的事情的一部分。我已经为自己编译了一个调试库，`OCMock`以便我可以了解崩溃发生的位置。

这是我发现的。

在我最初的测试中，我调用`andReturn:`设置返回期望值：

```
NSMutableString *copy = [@"foo" mutableCopy];
[(NSString *) [[(id) string expect] andReturn:copy] mutableCopy]; 
```

这反过来调用`OCMReturnValueProvider`存储 a`copy`以便它可以在适当的时间返回：

```
@implementation OCMReturnValueProvider

- (id)initWithValue:(id)aValue
{
    self = [super init];
    returnValue = [aValue retain];
    return self;
} 
```

此时调试器说那`aValue`是 type `__NSCFString`。（警钟在我脑海中响起；这不是通往底层字符串的免费桥梁吗？不是对 的引用`NSMutableString`）

接下来测试完成并通过。

但是，现在当'd时`OCMReturnValueProvider`会出现问题。`dealloc`

```
@implementation OCMReturnValueProvider
- (void)dealloc
{
    [returnValue release];
    [super dealloc];
} 
```

`[returnValue release]`调用时发生崩溃；正在`OCMReturnValueProvider`尝试发布`__NSCFString`它`retain`之前编辑的内容。

接下来，我打开了 NSZombie 调试，这表明：

```
2013-03-12 20:58:19.654 UnitTests[16667:c07] TestItClass/test_2_mutableCopyOfString_shouldBeMockable_givenAMutableStringIsReturned  
2013-03-12 20:58:21.778 UnitTests[16667:c07] Re-running: TestItClass/test_2_mutableCopyOfString_shouldBeMockable_givenAMutableStringIsReturned <GHTest: 0x4afc5fd0>
2013-03-12 20:58:21.780 UnitTests[16667:c07] *** -[CFString release]: message sent to deallocated instance 0x4b0b1fe0 
```

malloc-history（Find Zombie 工具）有助于阐明这一点：

```
Category            Event Type  Ref Ct  Responsible Caller
CFString (mutable)  Malloc        1     -[TestItClass test_2_mutable...]
CFString (mutable)  Retain        2     -[OCMReturnValueProvider initWithValue:]
CFString (mutable)  Retain        3     -[TestItClass test_2_mutable...]
CFString (mutable)  Retain        4     -[TestItClass test_2_mutable...]
CFString (mutable)  Release       3     -[TestItClass test_2_mutable...]
CFString (mutable)  Release       2     -[TestItClass test_2_mutable...]
CFString (mutable)  Release       1     -[TestItClass test_2_mutable...]
CFString (mutable)  Release       0     -[TestItClass test_2_mutable...]
CFString (mutable)  Zombie       -1     -[OCMReturnValueProvider dealloc] 
```

因此，测试类中的某些内容导致发布多于保留。为什么会这样？奇怪的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:40:37.133

经过更多调查后，我发现了崩溃发生的原因。

我们再来看看测试：

```
- (void)test_2_mutableCopyOfString_shouldBeMockable_givenAMutableStringIsReturned {
    NSString *string = [OCMockObject mockForClass:NSString.class];
    NSMutableString *copy = [@"foo" mutableCopy];
    [(NSString *) [[(id) string expect] andReturn:copy] mutableCopy];

    NSMutableString *foo = [string mutableCopy];
} 
```

正在发生的事情是编译器假设 is 返回的对象`[string mutableCopy]`是`retained`by `mutableCopy`，所以当`foo`is `dealloced`ARC 相当于`[foo release]`. 这是一个问题，因为我们这个对象没有增加它的引用计数`andReturn:`。

我很困惑为什么我们看不到其他配置为由`andReturn:`. 处理模拟`OCMReturnValueProvider`响应不受`ARC`管理，并且不保留返回值：

```
- (void)handleInvocation:(NSInvocation *)anInvocation
{
    [anInvocation setReturnValue:&returnValue];
} 
```

`retain`因此，通过在将返回值设置在 之前先发制人地解决这个问题`NSInvocation`：

```
- (void)handleInvocation:(NSInvocation *)anInvocation
{
    [returnValue retain];
    [anInvocation setReturnValue:&returnValue];
} 
```

这看起来像`OCMock`. 但鉴于该问题并非在所有情况下都会发生，我不确定。我的修复工作，但现在冒着在可能不需要这个额外的对象上泄漏内存的风险`retain`。但是，测试中的内存泄漏与未运行的测试相比，目前对我来说是可以接受的。

# image - 根据浏览器宽度自动隐藏图像的左右两侧

> ID：15345900
> 
> 赞同：0
> 
> 时间：2013-03-11T18:31:04.933
> 
> 标签：image, width

所以我的图像是 1920 像素 x 150 像素，我想要的是当浏览器屏幕小于 1920 像素时，图像应该保持在屏幕的中心，它应该自动从图像的左侧和右侧隐藏等量的像素。

例如，如果浏览器总宽度为 1520 像素，则应隐藏左侧 200 像素和右侧 200 像素（我不希望图像始终位于中心）

有什么办法可以做到这一点吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:49:24.463

`<IMG>`不要在标签中使用图像，而是将其用作`background`a `div`，给它一个 class `imgBG`，并包含以下样式：

```
.imgBG{
background: url(images/imagename.jpg) no-repeat 50% top;
width: 100%;
height: 150px;
margin: auto;
} 
```

# c++ - 表示纪元之前的日期

> ID：15345901
> 
> 赞同：4
> 
> 时间：2013-03-11T18:31:04.513
> 
> 标签：c++, c, windows, datetime, epoch

我们有一个定制的 datetime C++ 类，它表示自纪元以来经过的秒数。这存储为 int64。此类提供了许多帮助函数来读取和写入各种类型的日期时间格式。

不幸的是，它不能处理纪元之前的日期，因为它的方法依赖于 gmtime() 和 mktime() 进行许多操作，而我们的 Windows 系统不支持纪元之前的日期。有谁知道在 Windows 上支持负值的 gmtime 和 mktime 的替换。

这种限制的一个例子是我们的应用程序无法存储 1970 年之前的生日，这是因为每个日期都必须使用这个类。

我不清楚我在问什么，这是因为我对日期时间实现/使用的了解有限，而且我不愿意理解那个巨大的遗留类，所以如果你觉得这个问题可以用另一种方式来表达，或者我可能会寻找一些不同的东西随意建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:36:55.000

您可以使用[Boost.DateTime](http://www.boost.org/doc/libs/1_53_0/doc/html/date_time.html)，或者直接使用[Win32 API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms725473%28v=vs.85%29.aspx)而不是 CRT。

您可能需要进行大量测试，以确保数据处理不会在您的返工中发生变化。在开始任何重构之前，请确保对库进行详尽的单元测试。

如果您必须考虑您的值在世界上多个不同位置有效，请使用[UTC 时间](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724961%28v=vs.85%29.aspx)作为您的规范形式，并根据需要转换为本地时间以进行合理的输入/显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-08T15:29:02.717

也许你在几年前就已经解决了这个问题，但你也可以使用 ICU。示例位于：[http ://userguide.icu-project.org/datetime/calendar/examples](http://userguide.icu-project.org/datetime/calendar/examples)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-08T18:09:04.557

即将推出您附近的[std::lib 实现](http://wg21.link/standard)：

```
#include <chrono>
#include <iostream>

int
main()
{
    using namespace std::chrono;
    std::cout << "Valid range is ["
              << sys_days{year::min()/January/1} + 0us << ", "
              << sys_days{year::max()/December/31} + 23h + 59min + 59s + 999'999us
              << "]\n";
} 
```

输出：

```
Valid range is [-32767-01-01 00:00:00.000000, 32767-12-31 23:59:59.999999] 
```

[可在此处预览。](https://github.com/HowardHinnant/date)

# android - android - TextView 中的自动滚动问题

> ID：15345903
> 
> 赞同：7
> 
> 时间：2013-03-11T18:31:13.630
> 
> 标签：android, textview

我有一个`Activity`用作音乐播放器的。当它启动时，一个`MediaPlayer`对象被初始化并启动。在布局中，我必须`TextViews`显示艺术家和标题。这些值（从服务器检索）可能很长，所以我添加了

```
 android:ellipsize="marquee"
   android:marqueeRepeatLimit="marquee_forever"
   android:scrollHorizontally="true" 
```

使文本滚动。有一个奇怪的问题：当我按下“暂停”按钮时，它们`TextViews`正在滚动，但在播放音乐时它们不滚动。有任何想法吗？

PS 我`SeekBar`每 500 毫秒更新一次`Runnable`，问题可能与此有关吗？

这是我的布局：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#000000"
android:gravity="center_vertical"
tools:context=".MainActivity" >

<LinearLayout
    android:id="@+id/main_header"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:layout_alignParentTop="true"
    android:orientation="horizontal" >
</LinearLayout>

<ImageView
    android:id="@+id/imgCoverArt"
    android:layout_width="150dp"
    android:layout_height="150dp"
    android:layout_below="@+id/main_header"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="15dp"
    android:layout_marginTop="20dp"
    android:src="@drawable/cover_default" />

    <SeekBar
    android:id="@+id/seekBarMain"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/imgCoverArt"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:layout_marginTop="10dp"
    android:paddingLeft="9dp"
    android:paddingRight="9dp"
    android:progressDrawable="@drawable/pb"
    android:thumb="@drawable/pbhead" />

<TextView
    android:id="@+id/tvArtist"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/seekBarMain"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="35dp"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    android:scrollHorizontally="true"
    android:singleLine="true"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#FFFFFF" />

<TextView
    android:id="@+id/tvTitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/tvArtist"
    android:layout_centerHorizontal="true"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    android:scrollHorizontally="true"
    android:singleLine="true"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="#FFFFFF" />

<TextView
    android:id="@+id/tvTimeElapsed"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/seekBarMain"
    android:layout_alignLeft="@+id/seekBarMain"
    android:layout_marginBottom="-10dp"
    android:text="02:54"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#FFFFFF" />

<TextView
    android:id="@+id/tvTotalTime"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/seekBarMain"
    android:layout_alignRight="@+id/seekBarMain"
    android:layout_marginBottom="-10dp"
    android:text="05:45"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#FFFFFF" />

<LinearLayout
    android:id="@+id/LinearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="10dp"
    android:gravity="center_horizontal"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/btnPrevious"
        android:layout_width="100dp"
        android:layout_height="40dp"
        android:layout_gravity="center_vertical"
        android:layout_marginRight="6dp"
        android:background="@drawable/prev_btn_state" />

    <Button
        android:id="@+id/btnPlay"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:layout_gravity="center_vertical"
        android:background="@drawable/button_play" />

    <Button
        android:id="@+id/btnNext"
        android:layout_width="100dp"
        android:layout_height="40dp"
        android:layout_gravity="center_vertical"
        android:layout_marginLeft="3dp"
        android:background="@drawable/next_btn_state" />
</LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:46:52.560

```
<TextView
        android:text="Single-line text view that scrolls automatically if the text is too long to fit in the widget" 
        android:singleLine="true" 
        android:ellipsize="marquee"
        android:marqueeRepeatLimit ="marquee_forever"
        android:focusable="true"
        android:focusableInTouchMode="true" 
        android:scrollHorizontally="true"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"/> 
```

添加这个你的TextView，

```
 android:focusable="true"
            android:focusableInTouchMode="true" 
```

需要自动滚动。

GitHub 中有更多示例。

[https://github.com/FireZenk/FireZenk-s-TickerText](https://github.com/FireZenk/FireZenk-s-TickerText)

[https://github.com/kaeppler/ignition/blob/master/ignition-core/ignition-core-lib/src/com/github/ignition/core/widgets/ScrollingTextView.java](https://github.com/kaeppler/ignition/blob/master/ignition-core/ignition-core-lib/src/com/github/ignition/core/widgets/ScrollingTextView.java)

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-26T20:33:26.787

你可以用你的`onCreate`方法试试这个。

```
yourTexView.setMovementMethod(new ScrollingMovementMethod()); 
```

我也面临着完全相同的问题。就这样解决了。

# excel - EXCEL 有什么方法可以将每个迭代结果复制到单独的表中？

> ID：15345904
> 
> 赞同：1
> 
> 时间：2013-03-11T18:31:18.083
> 
> 标签：excel, save, iteration, output

我有以下问题：我想为单元格 A1 尝试不同的值。每次我将值输入 A1 时，单元格 B1、C1、D1 和 E1 都会发生变化。有什么方法可以创建一个新表，自动将这些迭代的结果复制到单独的单元格中。例如：我选择 A1 = 10。这会自动出现在 A3 处。B1、C1、D1和E1的所有值然后自动全部存储在B3、C3、D3和E3中。然后我更改 A1 = 20。B1、C1、D1 和 E1 的所有新值现在都存储在 B4、C4、D4 和 E4 中。

关于如何做到这一点的任何建议？感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:09:04.633

将此代码放在工作表 Worksheet_Change 模块中，每次更改单元格 A1 时，结果将从第 3 行向下添加。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim i As Integer
    i = 3

    'If there is a change to A1
    If Target.Address = ActiveSheet.Range("A1").Address Then
        Do Until ActiveSheet.Cells(i, 1).Value = vbNullString
            i = i + 1
        Loop

        ActiveSheet.Cells(i, 1).Resize(, 5).Value = ActiveSheet.Range("A1:E1").Value
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:58:44.880

1.  如果 A1 改变，单元格 b1、c1、d1 和 e1 改变，这可以通过通常的代码来解决
2.  对于自动添加新行，您可以使用此宏

> ```
> Sub Macro4()
> '
> ' Macro4 Macro
> '
> ' Keyboard Shortcut: Ctrl+t
> '
> Range("A1:E1").Select
> Selection.Copy
> Cells(Application.Rows.Count, 1).End(xlUp).Offset(1, 0).Select
> ActiveSheet.Paste
> End Sub 
> ```

要使用该宏，您只需按 ctrl + t，（键盘快捷键由您决定）

# least-squares - mpfit 中用户指定的函数

> ID：15345906
> 
> 赞同：3
> 
> 时间：2013-03-11T18:31:22.637
> 
> 标签：least-squares, idl-programming-language

我成为 IDL 程序员已经有一段时间了，并希望过渡到 Python。我发现 Python 中存在 MPFIT 的 IDL 版本。但是，我正在寻找 Python 中的 MPFITFUN 版本（[http://www.physics.wisc.edu/~craigm/idl/down/mpfitfun.pro](http://www.physics.wisc.edu/~craigm/idl/down/mpfitfun.pro)）或类似的东西。

基本上，我正在寻找一个 Python 函数，它采用用户定义的函数并使用 Levenberg-Marquardt 最小二乘拟合（如 MPFIT）。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-30T20:06:35.703

mpfit.py 可从[https://code.google.com/p/astrolibpy/](https://code.google.com/p/astrolibpy/)获取，旧版本托管在[http://cars.uchicago.edu/software/python/mpfit.html](http://cars.uchicago.edu/software/python/mpfit.html)。

一个不错的选择是 lmfit：[https](https://pypi.python.org/pypi/lmfit/) : //pypi.python.org/pypi/lmfit/、https : //github.com/lmfit/lmfit-py、http [:](https://github.com/lmfit/lmfit-py) [//lmfit.github.io//lmfit-py/](http://lmfit.github.io//lmfit-py/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T18:54:34.150

SciPy 中内置了一些拟合函数，但我不知道有什么可以像 MPFITFUN 那样解释数据的不确定性。我发现 Sherpa 是一个出色的 Python 建模和拟合包，它解决了不确定性并取代了 MPFITFUN：[http ://cxc.harvard.edu/contrib/sherpa/](http://cxc.harvard.edu/contrib/sherpa/)

由于 Sherpa 是由天文学家生产的，它有很多内置的天体物理模型，但您可以构建自己的函数以适应 Sherpa 的 Levenberg-Marquardt、Nelder-Mead 或 Monte Carlo 算法。我使用了 pysherpa 博客中的模板：http: [//pysherpa.blogspot.com/2010/06/user-defined-sherpa-model-types-using.html](http://pysherpa.blogspot.com/2010/06/user-defined-sherpa-model-types-using.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:40:03.213

我偶然发现Python中也存在MPFITEXPR。这是代码的链接。您也可以通过 Astrolibpy 项目下载它。

关联：

[https://code.google.com/p/astrolibpy/source/browse/mpfit/mpfitexpr.py?r=3545675a0662392e3e09c88beaf275c9e7881cf6](https://code.google.com/p/astrolibpy/source/browse/mpfit/mpfitexpr.py?r=3545675a0662392e3e09c88beaf275c9e7881cf6)

# php - 在不使用 value 属性的情况下在输入字段上显示 var

> ID：15345908
> 
> 赞同：2
> 
> 时间：2013-03-11T18:31:24.813
> 
> 标签：php, javascript, jquery

我有一个 PHP 变量，我试图在不使用“值”属性的情况下出现在输入字段中，但我似乎无法让它工作。

我尝试了一个 jQuery 代码，我首先发现将变量“附加”到输入字段，但没有奏效。

```
 var first_name = "<?php echo $current_user['first_name']; ?>";
    alert(first_name);
    $('#first_name').val($('#first_name').val() + first_name); 
```

然后我尝试使用 getElementById 但它也没有用。

```
 var first_name = "<?php echo $current_user['first_name']; ?>";
    alert(first_name);
    document.getElementById('first_name').value = first_name; 
```

任何建议将不胜感激！

编辑：

这是 HTML 表单

```
<form name="personal_form" action="includes/editpersonal.php" method="POST">
   <fieldset>
      <legend><h2>Personal Details</h2></legend>
      <table class="personalform">
         <!--if there is an error on first name, the class name 'form_error_row' will be input into the following tr-->
         <!--allows me to colourise the text field to indicate an error on this row-->
         <tr class="<?php echo form_row_class("first_name") ?>" >
            <th><label for="first_name"><p>First Name: </p></label></th>
            <td>
            <input type="text" name="first_name" id="first_name" size="40" />
            <!--if there is an error it will print out a div with the error message-->
            <?php echo error_for('first_name') ?>
            </td>
          </tr>
      </table>  
   </fieldset>
   <input type="submit" class="reg-button" value="Update Records" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:33:34.877

尝试在[document.ready](http://api.jquery.com/ready/)中分配值以确保 html 元素已准备好被脚本访问。

```
$(document).ready(function(){
 $('#first_name').val($('#first_name').val() + first_name);
}); 
```

# html - 如何在表单容器中垂直对齐div

> ID：15345909
> 
> 赞同：0
> 
> 时间：2013-03-11T18:31:29.227
> 
> 标签：html, css

[http://kenzshop.com/test/contact/index.php](http://kenzshop.com/test/contact/index.php)

点击联系我们按钮查看表格。

我确信这是一个非常简单的修复，我只是无法弄清楚我在这里做错了什么。我已经将 div 移到了几个不同的区域，并使用了 CSS，并且似乎无法将它放到我想要的位置，因为它在表单下方没有空白区域。

我在表单下方显示了正确对齐的“信息”文本，但它不应位于表单容器下方。

它在正确的位置对齐。我只需要将它放在表单容器中（fg_formContainer）

谢谢你的帮助。肯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:38:17.567

```
#fg_container_header
{
    float: left;
    width: 100%;
}
#fg_form_InnerContainer
{
    float: left;
} 
```

# lotus-notes - @SetViewInfo - 清除过滤器时的问题

> ID：15345910
> 
> 赞同：1
> 
> 时间：2013-03-11T18:31:30.070
> 
> 标签：lotus-notes, lotus-formula

我有一个让我难过的问题。我一直在寻找解决方案，但还没有找到可行的解决方案。我看到的解决方案引入了其他问题。

这是场景：我有一个包含两个框架的框架集：“Navigator”和“Main”。在“导航器”框架中，我显示了一个名为“导航器”的表单。它包含一个大纲，用于显示菜单。在“主”框架中，我显示用户在导航器中选择的视图。所以这是一个非常传统的 Notes 客户端应用程序。

我现在想在视图顶部（在操作栏中）添加一个复选框，允许用户按他/她自己的名字过滤视图。我为此使用了@SetViewInfo，一切都很完美。

问题是用户切换视图时。@SetViewInfo 过滤器在切换到不同的视图时保持活动状态，所以经过一番搜索，我找到了一些解决方案：

在[http://www-01.ibm.com/support/docview.wss?uid=swg21204481](http://www-01.ibm.com/support/docview.wss?uid=swg21204481) IBM 建议将以下代码放入 QuerySave 事件中：

```
@SetViewInfo([SetViewFilter]; temp ; 0 ;1) 
```

当我切换视图或关闭视图时，我收到错误消息“无法执行指定的命令”。

在[http://www-10.lotus.com/ldd/bpmpblog.nsf/dx/using-setviewinfo-in-a-notes-client-application-to-create-a-user-specific-view](http://www-10.lotus.com/ldd/bpmpblog.nsf/dx/using-setviewinfo-in-a-notes-client-application-to-create-a-user-specific-view) Andre Guirard 建议将以下代码放入 QuerySave 事件中：

```
@SetTargetFrame("frameName");
@UpdateFormulaContext;
@Command([OpenView]; @Subset(@ViewTitle; -1));
@SetViewInfo([SetViewFilter]; ""; "columnName"; 1) 
```

我修改它以匹配我的框架名称和我视图中第一列的程序名称：

```
@SetTargetFrame("Main");
@UpdateFormulaContext;
@Command([OpenView]; @Subset(@ViewTitle; -1));
@SetViewInfo([SetViewFilter]; ""; "Adjuster"; 1) 
```

这在视图之间切换时非常有效。但是当我在这个特定的过滤视图中关闭应用程序时，应用程序会自动重新打开。无论在关闭视图时是否启用过滤器，都会发生这种情况。

但是，当视图重新打开时，框架集不会重新加载，它只是左侧带有内置视图导航器的视图。我终于通过（在内置视图导航器中）选择另一个视图来过滤数据，从而使这个工作。这暂时解决了该问题，但随后又重新开始，并且过滤后的视图在导航器中处于活动状态。

显然是 OpenView 命令导致了这种情况，但如果我只删除该行，我会再次收到“无法执行指定的命令”错误。

任何建议/指针？我正在使用在 Windows 7 Professional 上运行的 Notes 8.5.3。

*这个问题也可以在 IBM developerWorks 论坛上找到 Notes 8.5： [http ://www-10.lotus.com/ldd/nd85forum.nsf/DateAllThreadedWeb/08c73910571306c485257b2b0061ef91](http://www-10.lotus.com/ldd/nd85forum.nsf/DateAllThreadedWeb/08c73910571306c485257b2b0061ef91)*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T03:51:30.337

首先，我建议确保您的视图框架始终称为“NotesView”。如果你这样做，你会遇到更少的兼容性问题。

其次，我想当你说你把它放在 QuerySave 事件中时，你真的是指 QueryClose 事件吗？视图没有 QuerySave 事件。

第三，我发现不需要 @UpdateFormulaContext 行。这就是我认为QueryClose ...

```
@SetTargetFrame("NotesView");
@Command([OpenView]; @Subset(@ViewTitle; -1));
@SetViewInfo([SetViewFilter]; ""; "<programmaticColumnName>"; 1) 
```

而且我可以在视图中关闭应用程序而不会出现任何问题。

# javascript - 隐藏 iframe 滚动条但允许滚动

> ID：15345913
> 
> 赞同：0
> 
> 时间：2013-03-11T18:31:40.740
> 
> 标签：javascript, iframe

我正在开发一个简单的页面，让您可以在桌面浏览器中预览移动网站。它类似于[http://transloc.com/mdemo/](http://transloc.com/mdemo/)。这个想法是我想在 iframe 中显示移动网站的未修改版本，并允许上下滚动。但是，如果 iframe 具有焦点，我想隐藏滚动条并让用户仅使用鼠标滚轮或上/下键盘键滚动。这是否可以在不修改移动网站内的任何 HTML/CSS/JS 的情况下实现？

# mustache - 用 Mustache 选择分音

> ID：15345914
> 
> 赞同：0
> 
> 时间：2013-03-11T18:31:42.363
> 
> 标签：mustache

如果我从 mustache 脚本和一些部分渲染 HTML，我可以根据要渲染的数据选择使用哪个部分吗？

例如：

```
data = {"posts": [
  {"type":"text", "body":"I'm text"},
  {"type":"image", "uri":"http://placekitten.com/200/300"}
]} 
```

使用类似以下内容的基本模板：

```
<ul class="posts">
  <li>
  {{#posts}}
    {{> {{type}}}}
  {{/posts}}
  </li>
</ul> 
```

然后`text.mustache`：

```
<p>{{body}}</p> 
```

并且`image.mustache`：

```
<img src="{{uri}}" /> 
```

这将呈现为：

```
<ul class="posts">
  <li>
    <p>I'm text</p>
  </li>
  <li>
    <img src="http://placekitten.com/200/300" />
  </li>
</ul> 
```

我在这里错过了什么吗？我应该尝试这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:17:31.970

您在这里要问的问题归结为“逻辑”方面，因此，Mustache 试图避免这种情况。这并不是说没有办法，只是可能不是你想的那样:)

在 Mustache 中，很多更高级用法的正确答案是“准备好你的视图”。这也不例外。我会这样做：

```
function addHelpers(posts) {
    for (var i = 0, l = posts.length; i < l; i++) {
        posts[i].isText  = posts[i].type === 'text';
        posts[i].isImage = posts[i].type === 'image';
        posts[i].isVideo = posts[i].type === 'video';
    }
    return posts;
}

data = {"posts": [
  {"type":"text", "body":"I'm text"},
  {"type":"image", "uri":"http://placekitten.com/200/300"}
]}

data.posts = addHelpers(data.posts); 
```

然后您的基本模板将如下所示：

```
<ul class="posts">
  {{# posts }}
    <li>
      {{# isText  }}{{> text  }}{{/ isText  }}
      {{# isImage }}{{> image }}{{/ isImage }}
      {{# isVideo }}{{> video }}{{/ isVideo }}
    </li>
  {{/ posts }}
</ul> 
```

# java - 将方法中创建的 ArrayList 添加到 JCombobox

> ID：15345916
> 
> 赞同：0
> 
> 时间：2013-03-11T18:31:50.957
> 
> 标签：java, netbeans, arraylist, jcombobox

我之前问过类似的问题，但意识到我无法解决的主要问题：

当前有一个名为*SundayList*的 ArrayList ，一旦加载框架*AddStudent*就会加载（GUI 位）

**添加学生**课程： 已***编辑***

```
public class AddStudent extends javax.swing.JFrame {

    public AddStudent() {
    initComponents();
     }
private void loadLists() throws IOException
    {
        //Creating the array of Activities to put into the ComboBoxes
        File f = new File("Activities.dat");

        sundayList = new ArrayList<>();
        mondayList= new ArrayList<>();
        tuesdayList= new ArrayList<>();
        wednesdayList= new ArrayList<>();
        thursdayList= new ArrayList<>();

try{
    BufferedReader reader = new BufferedReader(new FileReader(f));

     while(reader.ready())
        {
            String CDay = reader.readLine();                               
            String CActivityName = reader.readLine();
            String CSupervisor = reader.readLine();
            String CLocation = reader.readLine();
            String CPaid = reader.readLine();
            String nothing = reader.readLine();

            if(CDay.equals("Sunday"))
            {
                sundayList.add(CActivityName);
            }
            else if(CDay.equals("Monday"))
            {
                mondayList.add(CActivityName);
            }
            else if(CDay.equals("Tuesday"))
            {
                tuesdayList.add(CActivityName);
            }
            else if(CDay.equals("Wednesday"))
            {
                wednesdayList.add(CActivityName);
            }
            else if(CDay.equals("Thursday"))
            {
                thursdayList.add(CActivityName);
            }                
    }
    reader.close();
}
catch (IOException ex) 
{
    Logger.getLogger(StartUpFrame.class.getName()).log(Level.SEVERE, null, ex);
} 
}
...
comboboxSunday = new javax.swing.JComboBox();
...
}

 public static void main(String args[]) {

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new AddStudent().setVisible(true);
            }
        });
    } 
```

首先，我尝试将*SundayList*列表调用到组合框*comboboxSunday*中来填充它，但只得到了*找不到符号*错误。

我需要做什么才能使这成为可能？

另外，我计划避免使用我以前见过的涉及 mySQL 的方法，因为我不熟悉它。

**组合框的当前编码**

Netbeans 为组合框自动生成的代码是：

```
comboboxSunday = new javax.swing.JComboBox();

comboboxSunday.setModel(new javax.swing.DefaultComboBoxModel<>(sundayList.toArray(new String[sundayList.size()]))); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:37:00.807

该变量`SundayList`仅限于构造函数的范围。假设您在方法中创建您`JComboBox`的`initComponents`，您将无法访问此变量。

但是，您*可以*创建`SundayList`一个类成员变量，允许您在方法中使用变量。最好有一种方法来加载数据，而不是在 UI 构造函数中使用非 UI 功能：

```
public class AddStudent {
   private List<String> sundayList;
   private List<String> mondayList;
   ...

   private void loadLists() throws IOException {
      sundayList = new ArrayList<>();
      ... 
```

然后添加：

```
comboboxSunday.setModel(new DefaultComboBoxModel<>(sundayList.toArray(new String[sundayList.size()]))); 
```

不要忘记调用新的加载方法：

```
AddStudent addStudent = new AddStudent();
addStudent.loadLists();
addStudent.setVisible(true); 
```

*另外：*请注意，Java 命名约定表明该变量以*小写*字母开头，这将使`SundayList` `sundayList`.

# java - 如何将负值映射到 rgb 组件？

> ID：15345921
> 
> 赞同：0
> 
> 时间：2013-03-11T18:32:08.363
> 
> 标签：java, image-processing, rgb, haar-wavelet

我想对彩色图像应用 haar 变换。为此，我必须分别对红色、绿色和蓝色分量应用 haar 函数。现在根据我的理解，哈尔函数是平均和差分。因此，在某些情况下（在执行差分时），红色、蓝色和绿色分量值变为负值。一旦我得到负值，我就无法映射到 r/g/b 组件。如何解决这个问题呢。我在 JAVA 中实现 haar 函数。此外，我没有使用任何库来计算 harr 转换。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:34:10.520

你有两个选择。要么改变你的表示，这样你就不再使用无符号的 8 位字节，或者添加一个固定的偏移量，比如 128。适当的选择取决于你将如何处理结果。

# jquery - jquery发送post数据但没有响应

> ID：15345925
> 
> 赞同：2
> 
> 时间：2013-03-11T18:32:19.117
> 
> 标签：jquery, jquery-ui-dialog

我有一个对话框，其中包含一个名称和 ID 为“buildtask”的表单。用 Firebug 看它是完全成型的。jquery 代码与同一页面上其他成功的对话框表单提交相同。问题似乎在于，`$(this).dialog("close");`因为如果我将其注释掉，则调用的 ajax php 脚本可以更新数据库并回显一段我可以通过 Firebug 看到的文本。当然，对话框会留在屏幕上。

删除注释后，数据库更新失败，当发布数据显示在 Firebug 中时，响应选项卡丢失并且显示大小为 0B。

我尝试 `$(this).dialog("close");`在其中移动，`function(data){ }`但它会在屏幕上留下对话框。

我已经用问题的每个组合搜索了 Stackoverflow，但没有任何乐趣，而且我已经搞砸了六个多小时。

```
 buttons: {
                "Update": function() {$.post("ajax/udTManage.php", $("#buildtask").serialize(),function(data){alert("Here");});
                    $( this ).dialog( "close" );
                },
                "Cancel": function() {
                    $( this ).dialog( "close" );

                }
            },
            close: function() {
                $("#buildtask").remove();                       
                $('#tasker').submit();

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:18:41.217

您应该将其`$( this ).dialog( "close" );`移入`function(data){}`以确保在完成发送请求之前不会关闭该表单。

尽管如此，由于事件是由 AJAX 调用触发的，因此 using`$( this )`指的是请求而不是对话框。

因此，您应该通过它的 id 调用窗口并执行以下操作：`$("#buildtask").dialog("close");`

然后它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:47:12.457

请注意，关闭函数中的代码将在您单击更新或取消时执行。如果您单击更新，#buildtask 将被删除并在 udTManage.php 仍在执行时提交 #tasker。

在不知道您的流程的情况下，很难确定它在哪里失败，但一种猜测是，udTManage.php 中发生的任何事情都需要在提交#tasker 之前完成。是这样吗？如果是这样，以下应该可以解决问题：

```
buttons: {
    "Update": function() {
        $.post(
            "ajax/udTManage.php",
            $("buildtask").serialize(),
            function(data) {
                // anything here is executed AFTER udTManage.php is executed
                $('#tasker').submit();
            }
        );
        $(this).dialog("close");
    },
    "Cancel": function() {
        $("tasker").submit(); // assuming you need to submit even when cancelling
        $(this).dialog("close");
    }
},
close: function() {
    // This is executed the moment you click either button (because both buttons immediately call the dialog close method)
    $("buildtask").remove(); // not sure why you might need this, though
} 
```

# javascript - 将子图像宽度和高度应用于容器

> ID：15345926
> 
> 赞同：1
> 
> 时间：2013-03-11T18:32:25.870
> 
> 标签：javascript, jquery, html

我有这个标记：

```
 <div class="img_container">
        <img src="file://localhost/img/a_bg.jpeg" alt="a_bg" />
    </div> 
```

如何将图像的宽度和高度应用到 img_container？

**图像在绝对位置**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:40:45.053

未经测试，但我建议：

```
$('.img_container img').each(function(){
    var w = this.naturalWidth,
        h = this.naturalHeight;
    $(this).parent().css({'height': h, 'width' : w});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:36:09.090

**标记：**

您需要`id`在图像中添加一个，如下所示：

```
<div class="img_container">
        <img id="bgimg" src="file://localhost/img/a_bg.jpeg" alt="a_bg" />
    </div> 
```

**查询：**

```
var img = $('#bgimg'); 

img.load(function(){
     //Get width of image
     var width = img.width();
     //Get height of image
     var height = img.height();
     $('.img_container').css("width", width);
     $('.img_container').css("height", height);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:38:04.887

尝试这个

```
<img src="file://localhost/img/a_bg.jpeg" alt="a_bg width="X" height="Y" /> 
```

并将其添加到您的 CSS

```
background-image: url(file://localhost/img/a_bg.jpeg);
background-size: Xpx Ypx;
background-repeat:no-repeat; 
```

# php - 使用 $_POST['name'] 时的数据类型是什么

> ID：15345929
> 
> 赞同：0
> 
> 时间：2013-03-11T18:32:34.297
> 
> 标签：php, mysqli

我想知道使用 $_POST['name'] 时的数据类型是什么，假设我正在绑定参数：

```
$unsafe_variable1=$_POST['name'];
$unsafe_variable2=$_POST['email'];
$unsafe_variable3=$_POST['city'];

$stmt=$con->prepare("INSERT INTO mytable (name, email, city) VALUES ('$bname', '$email', '$city')");

$obj->bind_param('sss', $unsafe_variable1, $unsafe_variable3, $unsafe_variable3); 
```

我的猜测是字符串的's'。

* * *

第二件事是当我使用 sss 时会收到警告：

```
Number of variables doesn't match number of parameters in prepared statement 
```

这让我觉得“s”可能不是正确的数据类型。:o

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-07T15:13:45.233

$_POST 和 $_GET 参数将始终是字符串。

您可以使用 gettype() 来检查，

`echo gettype($_POST['variable_from_form']);`

仅举一个例子，您将看到它将识别`1`为字符串、`1.11`字符串、`any text`字符串和`true/false`字符串而不是布尔值。那是因为 php 使用 PHP 的类型杂耍系统将非字符串值转换为字符串。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T21:28:04.560

请注意，您正在直接使用变量：

```
[...] VALUES ('$bname', '$email', '$city') 
```

只需将其更改为：

```
[...] VALUES (?, ?, ?) 
```

POST 变量通常是字符串。因此，您的`sss`绑定是完美的。为了避免将来出现问题，您可以：

```
$stmt = $con->prepare("INSERT INTO mytable (name, email, city) VALUES (:name, :email, :city)");
$params['name'] = $_POST['name'];
$params['email'] = $_POST['email'];
$params['city'] = $_POST['city'];
$stmt->execute($params); 
```

它将自动检测变量的类型并绑定它。

# r - 调用已分箱并存储在列表中的数据子集中的特定列

> ID：15345935
> 
> 赞同：0
> 
> 时间：2013-03-11T18:19:49.863
> 
> 标签：r

我有一个非常大的数据集，我已经分箱，并将每个箱（子集）存储为一个列表，以便我可以轻松地调用任何给定的子集。我的问题是在子集中调用特定列。

例如，我的数据（以直径和强度为列）按直径分为 20 个箱。我手动将数据分箱，如下所示：

```
subset.1 <- subset(mydata, Diameter <= 0.01) 
```

使用了类似的命令来制作 20 个垃圾箱。然后我将名称（子集 1 到子集 20）存储到一个列表中：

```
diameter.bin<-list(subset.1, ... , subset.20) 
```

我可以使用以下方法成功调用每个直径箱：

```
diameter.bin[x] 
```

现在，如果我只想查看给定直径箱的强度值，我可以使用原始名称（存储在列表中）：

```
subset.x$Strength 
```

但我无法使用列表调用获取此信息：

```
diameter.bin[x]$Strength 
```

该命令返回`NULL`

请注意，当我调用任何子集（通过`diameter.bin[x]`，`subset.x`甚至`subset.x$Strength`）时，我的列标题会显示出来。当我使用：

```
names(subset.1) 
```

这返回`"Diameter"`和`"Strength"`

但是当我使用：

```
names(diameter.bin[1]) 
```

这返回`NULL`。

我假设列标题是问题的一部分，但我不确定如何解决它，除了从原始数据文件中删除标题。如果可能的话，我宁愿不这样做。

最终目标是查看每个直径箱的强度值分布，所以我将做一些事情，比如绘制直方图、计算参数等。我希望按照这些方式做一些事情来生成直方图：

```
n=length(diameter.bin)
for(i in (1:n))
{
  hist(diameter.bin[i]$Strength)
} 
```

并执行与此类似的操作，将每个 bin 的中值存储在新向量中。

非常感谢任何提示，因为现在我一次只做 1 个 bin，而且我知道循环（或类似的东西）真的会加快我的分析速度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T18:33:55.560

你需要两个方括号。这是一个演示该问题的可重现示例：

```
> diam <- data.frame(x=rnorm(5), y=rnorm(5))
> 
> diam.l <- list(diam, diam)
> diam.l[1]$x
NULL
> diam.l[[1]]$x
[1] -0.5389441 -0.5155441 -1.2437108 -2.0044323 -0.6914124 
```

# regex - 正则表达式与 ls 的用法

> ID：15345936
> 
> 赞同：46
> 
> 时间：2013-03-11T18:33:00.950
> 
> 标签：regex, ls, glob

我正在尝试将 ER *（扩展正则表达式）*与`ls`like一起使用`ls .+\..+`。

我正在尝试打印所有包含扩展名的文件（我知道我可以使用`ls *.*`，但我想尝试使用 ER）。

当我运行该代码时，我收到此错误：`ls: .+..+: No such file or directory`.

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-03-11T18:38:27.933

您将正则表达式与[shell globbing](http://tldp.org/LDP/abs/html/globbingref.html)混淆了。如果你想使用正则表达式来匹配文件名，你可以这样做：

```
$ ls | egrep '.+\..+' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T18:43:02.500

您没有说您使用的是什么 shell，但它们通常不支持正则表达式，尽管有常见的 *nix CLI 工具（`grep`,`sed`等）可以支持。

像 bash 这样的 shell 支持的是*[globbing](http://en.wikipedia.org/wiki/Glob_%28programming%29)*，它使用一些类似的字符（例如，*）但不是一回事。

较新版本的 bash 确实有一个正则表达式运算符，`=~`：

```
for x in `ls`; do 
    if [[ $x =~ .+\..* ]]; then 
        echo $x; 
    fi; 
done 
```

# sql - 即使我真的不应该得到一个，也要返回一行

> ID：15345938
> 
> 赞同：1
> 
> 时间：2013-03-11T18:33:06.490
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

数据

```
region class_month attendance
NY  12/1/2011   70444    
NY  1/1/2012    70125
NY  2/1/2012    69582
NY  3/1/2012    71529
NY  4/1/2012    72468
NY  5/1/2012    67068
LA  3/1/2012    1638
LA  4/1/2012    3079
LA  5/1/2012    4205 
```

我希望我的结果是：

```
 region class_month attendance
    NY  1/1/2012    70125
    NY  2/1/2012    69582
    NY  3/1/2012    71529
    NY  4/1/2012    72468
    NY  5/1/2012    67068
    LA  1/1/2012    0
    LA  2/1/2012    0
    LA  3/1/2012    1638
    LA  4/1/2012    3079
    LA  5/1/2012    4205 
```

询问

```
SELECT a.region
    ,a.class_month
    ,CASE 
        WHEN a.attendance IS NULL
            THEN 0
        ELSE a.attendance
        END AS attendance -- this clearly isn't right
FROM dbo.mbo_monthly_attendance a
where class_month between '2012-01-01' and '2012-05-01' 
```

如何在提供的日期范围内没有出勤率的月份内创建 0 出勤率的 LA 返回行？

感谢您朝着正确的方向推动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:48:04.897

编辑2：我认为这会起作用：

```
select mr.region, mr.class_month, coalesce(a.attendance, 0) as attendance
from (select * from 
 (select distinct region as region from mbo_monthly_attendance) r,
 (select distinct class_month as class_month from mbo_monthly_attendance) c) mr 
LEFT OUTER JOIN mbo_monthly_attendance a 
  ON mr.class_month = a.class_month AND mr.region = a.region ; 
```

您可以按视图将其分解以使其更易于理解：

```
create view regions as select distinct region from mbo_monthly_attendance;
create view class_months as select distinct class_month from mbo_monthly_attendance;
create view region_months as select * from regions, class_months;

select mr.region, mr.class_month, coalesce(a.attendance, 0) as attendance
from region_months mr LEFT OUTER JOIN mbo_monthly_attendance a 
  ON mr.class_month = a.class_month AND mr.region = a.region ; 
```

* * *

为“班级月份”创建一个表，并将外部联接与每月出勤表一起使用。

```
create table months (class_month date);
insert into months values ('1/1/2012');
insert into months values ('2/1/2012');
insert into months values ('3/1/2012');
insert into months values ('4/1/2012');
insert into months values ('5/1/2012');
insert into months values ('6/1/2012');

SELECT a.region
    ,a.class_month
    ,COALESCE (a.attendance, 0) AS attendance
FROM dbo.mbo_monthly_attendance a 
    LEFT OUTER JOIN months m ON a.class_month = m.class_month 
WHERE m.class_month between @StartDate and @EndDate; 
```

您可以使用出勤表来获取所有月份，而不是创建单独的表：

```
create view months as select distinct class_month from mbo_monthly_attendance 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:05:49.067

尝试这个

```
DECLARE @startdate datetime, @enddate datetime
set @startdate = '2012-01-01'
set @enddate = '2012-05-01'

;with cte as
(
    select @startdate DateValue
    union all
    select DateValue + 1
    from    cte   
    where   DateValue + 1 < @enddate
), cte2 as
(
    select distinct region, DateValue from dbo.mbo_monthly_attendance a 
    outer apply (select * from cte) x
)

select 
d.region,d.DateValue class_month,COALESCE (a.attendance, 0) AS attendance
from cte2 d
LEFT outer join dbo.mbo_monthly_attendance a
on CONVERT(varchar(15),d.DateValue,101) = CONVERT(varchar(15),a.class_month,101)    
order by d.region,d.DateValue
OPTION (MAXRECURSION 0) 
```

# javascript - 包含 $.ajax() 请求的页面的每一次刷新都会导致状态 412 错误

> ID：15345940
> 
> 赞同：3
> 
> 时间：2013-03-11T18:33:12.733
> 
> 标签：javascript, jquery, ajax, apache, http-status-code-412

该问题仅发生在 Mac 版 Safari 上。我正在加载干净的 json 数据文件，其中包含以下内容：

```
$.ajax({
        url : url,
        type : 'POST',
        dataType : 'json',
        contentType : 'application/json; charset=utf-8',
        crossdomain: true,
        context : contextObj.context,
        success : function(data) {
            // Irrelevant

            callBackHandler.call(contextObj.context, event);
        },
        error: function (xhr, ajaxOptions, thrownError) {
            console.log(xhr.status);
                console.log(thrownError); 
        }
    }); 
```

我的启用 CORS 的服务器具有以下内容：

```
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
Header set Access-Control-Allow-Headers "Content-Type, If-Modified-Since, If-None-Match, *"
Header set Access-Control-Max-Age "3600" 
```

我捕获了请求标头，我看到的唯一区别如下。*需要明确的是，失败的请求中包含以下内容，而下一次刷新不包括以下内容*。因此向 Access-Control-Allow-Headers 添加了项目：

```
If-Modified-Since: Fri, 08 Mar 2013 15:57:07 GMT
If-None-Match: "6801d-c550-4d76be008fac0" 
```

这是服务器配置问题、jQuery 使用问题还是其他问题？让我感到奇怪的是，Safari 在每次刷新时都会不断更改标题。

# spss - 计算所有案例的总和

> ID：15345941
> 
> 赞同：2
> 
> 时间：2013-03-11T18:33:12.970
> 
> 标签：spss

```
browser pageviews   month   totalhits percentage
-------------------------------------------------
ch     227025   Nov 2012    626760      36.22
ie     184232   Nov 2012    626760      29.39
s       81430   Nov 2012    626760      12.99
ff      72140   Nov 2012    626760      11.51
ie      39856   Nov 2012    626760      06.36
o        1010   Nov 2012    626760      00.16
rm        325   Nov 2012    626760      00.05
ot      20742   Nov 2012    626760      03.31 
```

我有上面的数据集。我想根据总点击数计算百分比。但是，我想根据浏览量的总和计算总点击量。如何汇总多个案例？

在 Excel 中，它类似于 SUM(pageviews)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:30:18.157

见`AGGREGATE`命令。下面的例子：

```
data list free /browser (A2) pageviews (F6.0)  month (A3) year (A4) totalhits (F6.0) percentage (F4.2).
begin data
ch     227025   Nov 2012    626760      36.22
ie     184232   Nov 2012    626760      29.39
s       81430   Nov 2012    626760      12.99
ff      72140   Nov 2012    626760      11.51
ie      39856   Nov 2012    626760      06.36
o        1010   Nov 2012    626760      00.16
rm        325   Nov 2012    626760      00.05
ot      20742   Nov 2012    626760      03.31
end data.

compute const = 1.
AGGREGATE
  /OUTFILE=*
  MODE=ADDVARIABLES
  /BREAK=const
  /pageviews_sum = SUM(pageviews).
list vars = pageviews totalhits pageviews_sum. 
```

在输出中返回：

```
pageviews totalhits pageviews_sum

  227025    626760     626760.0
  184232    626760     626760.0
   81430    626760     626760.0
   72140    626760     626760.0
   39856    626760     626760.0
    1010    626760     626760.0
     325    626760     626760.0
   20742    626760     626760.0 
```

# javascript - 迭代对象的属性 knockoutjs

> ID：15345942
> 
> 赞同：1
> 
> 时间：2013-03-11T18:33:22.293
> 
> 标签：javascript, knockout-2.0

从我在网上找到的内容来看，我认为目前无法使用 foreach 数据绑定来遍历淘汰赛中可观察对象的属性。

如果有人可以帮助我解决我正在尝试做的事情，我将非常感激。

假设我有一系列电影对象：

```
var movies = [{
    title: 'My First Movie',
    genre: 'comedy',
    year: '1984'    
},
{
    title: 'My Next Movie',
    genre: 'horror',
    year: '1988'
},
]; 
```

我想做的是将这些数据显示在一个表格中，但对于每种类型的电影都有一个不同的表格。

所以我尝试了这样的事情：

```
<div data-bind="foreach: movieGenre">
    <table>
        <tr>
            <td data-bind="year"></td>
            <td data-bind="title"></td>
            <td data-bind="genre"></td>
        </tr>
    </table>
</div> 
```

我的数据源变成了这样：

```
for (var i = 0; i < movies.length; ++i) {
    if (typeof moviesGenres[movies.genre] === 'undefined')
        moviesGenres[movies.genre] = [];
    moviesGenres[movies.genre].push(movie);
} 
```

我已经尝试了大约十几种其他解决方案，我开始怀疑这是否是我缺乏淘汰赛的知识（我仍然很绿色），或者这不可能是我想要的方式.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:11:39.110

您可以将数组“movies”设为 KO 可观察数组，将数组“movieGenre”设为 KO 计算属性。看看[这个小提琴](http://jsfiddle.net/omegasilva/GXNCs/11/)。

为了方便读者，下面给出了小提琴中的代码；

KO 查看模型

```
function MoviesViewModel() {
    var self = this;
    self.movies = ko.observableArray([
        {
            title: 'My First Movie',
            genre: 'comedy',
            year: '1984'
        },
        {
            title: 'My Next Movie',
            genre: 'horror',
            year: '1988'
        },
        {
            title: 'My Other Movie',
            genre: 'horror',
            year: '1986'
        }
    ]);

    self.movieGenre = ko.computed(function() {
        var genres = new Array();

        var moviesArray = self.movies();
        for (var i = 0; i < moviesArray.length; i++) {
            if (genres.indexOf(moviesArray[i].genre) < 0) {
                genres.push(moviesArray[i].genre);
            }
        }

        return genres;
    });  
}; 
```

HTML

```
<div data-bind="foreach: movieGenre()">
    <h3 data-bind="text: 'Genere : ' + $data"></h3>
    <table border="solid">
        <thead>
            <tr>
                <th>Title</th>
                <th>Genre</th>
                <th>Year</th>
            </tr>
        </thead>
        <tbody data-bind="foreach: $parent.movies">
            <!-- ko if: $data.genre === $parent -->
            <tr>
                <td data-bind="text: $data.title"></td>
                <td data-bind="text: $data.genre"></td>
                <td data-bind="text: $data.year"></td>
            </tr>
            <!-- /ko -->
        </tbody>
    </table>
</div> 
```

如您所见，“movieGenre”是一个计算属性。每当可观察数组“movies”发生变化时，都会计算并缓存 moveGenre。但是，由于 this 未声明为可写计算属性，因此您无法将其绑定到您的视图。因此，它的值用于数据绑定。

渲染的方法是简单地循环计算“movieGenre”，并为电影嵌套另一个循环。在向表中添加一行之前，对于相应的表，电影对象使用当前的电影流派进行评估。在这里，使用了无*容器控制流语法*。我们可以使用“if”绑定，但这会为每个电影对象留下一个空的表行，其中流派是其他类型。

$parent 绑定上下文用于访问嵌套循环中的父上下文。

希望这可以帮助。

# android - 云台锁，不能用四元数解

> ID：15345944
> 
> 赞同：1
> 
> 时间：2013-03-11T18:33:24.497
> 
> 标签：android, sensors, quaternions, pitch

当设备旋转一定量时，一个简单的立方体必须旋转相同的量但方向相反。例如，如果设备向右旋转 45 度，则立方体必须向左旋转 45 度。或者当俯仰角为 30 度时，立方体必须绕 X 轴旋转 -30 度。当偏航角为 10 度时，立方体必须绕 Z 轴旋转 -10 度。我使用了 .getRotationMatrixFromVector 后跟 getOrientation ，如下所示：

```
if (event.sensor.getType() == Sensor.TYPE_ROTATION_VECTOR) {

     SensorManager.getRotationMatrixFromVector(
             mRotationMatrix , event.values);
     SensorManager.getOrientation(mRotationMatrix, orientationVals);
     azimuthVal =  (Math.round((Math.toDegrees(orientationVals[0]))*100.0)/100.0);
     pitchVal= (Math.round((Math.toDegrees(orientationVals[1]))*100.0)/100.0);
     rollVal = (Math.round((Math.toDegrees(orientationVals[2]))*100.0)/100.0);} 
```

但是它的俯仰变化问题会影响滚动，反之亦然，因此当设备围绕 X 轴旋转时，捏值会发生变化->滚动变化->当我不旋转时，立方体不仅围绕 X 还围绕 Y 旋转不需要那个。

我浏览了互联网，许多人将四元数称为解决方案，但我如何将四元数应用于我的特定应用程序，因为我需要知道设备沿轴旋转的度数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-23T09:45:38.993

当您想从旋转矩阵中提取（欧拉）旋转角度时，会发生万向节锁定，基本上在某些特定的旋转中，我们在旋转矩阵分量和旋转角度之间的方程中失去了一个自由度，并且实际旋转角度不可恢复，

所以在你的代码中它可能发生在： SensorManager.getOrientation(mRotationMatrix,orientationVals);

您应该在提取旋转角度之前以某种方式解决问题，这可以通过修改四元数的组件来完成，如下所述：

[http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToEuler/](http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToEuler/)

# css - 定位相对中心屏幕和圆角

> ID：15345945
> 
> 赞同：0
> 
> 时间：2013-03-11T18:33:25.137
> 
> 标签：css, position, rounded-corners

我有这个CSS：

```
#content_search
{
position:relative;
top:50px;
width:650px;
border:5px solid #111;
-moz-border-radius: 5px 5px;
 border-radius: 5px 5px / 5px 5px;

} 
```

在所有的导航器中，如 firefox、chrome 等，都很好看，很完美！但是在 explorer 9 中看到不好，并且在所有版本的 explorer 中，都不能将屏幕中心放在屏幕上总是向左移动，或者在其他情况下，如果我向右更改某些内容

可以将 div 居中，但不使用 div align=center

另一方面，它可能在资源管理器中起作用：

```
-moz-border-radius: 5px 5px;
 border-radius: 5px 5px / 5px 5px; 
```

对于圆角进入资源管理器

感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:35:04.673

如果您希望将`border-radius`所有角设置为相同的单位，则无需指定位置。只是`border-radius: 5px;`工作正常。

如果要将容器元素置于其父 div 的中心，请使用`margin: 0 auto;`. 理论上，您也可以将父 div 设置为`text-align: center;`，将子 div 设置为`display: inline-block;`，但我发现 margin 方法在浏览器中的错误更少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:26:25.490

CSS

```
#content_search
{
  position:relative;
  top:50px;
  width:650px;
  border:5px solid #111;
  -moz-border-radius: 5px;
  border-radius: 5px;
  margin-left: auto;
  margin-right: auto;
} 
```

HTML

```
<div id="container">
    <div id="content_search">
        <span>My Content</span>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T18:26:55.347

用于`margin: 50px auto;`使您的 div 居中（速记边距中的 50px 将替换`top:50px;`）。请记住，当使用左右边距自动时，您必须在 div 上设置宽度

[http://jsfiddle.net/galenw/LWQfA/](http://jsfiddle.net/galenw/LWQfA/)

# android - 获取列表视图的大小

> ID：15345953
> 
> 赞同：5
> 
> 时间：2013-03-11T18:33:53.840
> 
> 标签：android, android-listview

如何理解该列表视图将在屏幕上显示的行数？我试图告诉你的是，当你看到列是水平的，这是我不想要的。我想知道用户的手机可以看到多少行，这将使我的时间表列表适合它。

另外，我怎样才能删除顶部的栏？我不知道它叫什么，所以也找不到它。

![我的应用](../Images/36e7de4101c37df160136a279c2a3b0e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:36:49.467

*对于第一部分，*可能还有其他一些传统的方法，但这是我的处理方式。

首先，找到屏幕的高度使用

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int height = size.y; 
```

然后使用 查找列表中的条目数**`mListView.getCount()`**。将可用的总高度除以行数以获得每行的高度。

*对于你问题的第二部分，*

它被称为**TitleBar**，您可以通过在`AndroidManifest.xml`文件中添加以下代码来隐藏它：

```
<activity android:name=".ActivityName"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen">
</activity> 
```

# azureservicebus - Azure 服务总线超时

> ID：15345956
> 
> 赞同：2
> 
> 时间：2013-03-11T18:33:58.760
> 
> 标签：azureservicebus

今天我在向 azure 服务总线主题发送消息时遇到问题。我有 260 个订阅者。他们中的大多数有 0 条待处理消息，一些关闭了客户端应用程序的有大约 8,000 条待处理消息。

我的主题称为 arklefeed，当我开始在我的应用程序中获取超时时，我打开了示例应用程序 Service Bus Explorer。

我能够查看我的主题和订阅。发送消息超时。异常：操作期间发生超时。TrackingID：Guid_GO_B12。

然后我在同一个命名空间中创建了一个名为 testtopic 的新主题，并尝试通过服务总线资源管理器发送消息，效果很好。

在此之后为了快速恢复和运行，我删除了我的主题并重新创建了订阅。在此之后，消息发送工作正常。

我在网上看到过这个，但我看不出我在哪里违反了任何规则：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee732538.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee732538.aspx)

什么可能导致我的初始超时？可能是没有收集到的消息堆积，还是我的订阅者太多？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T20:15:02.877

当对服务总线的调用因返回跟踪 ID 的异常而失败时，您可以使用它从 Windows Azure 支持获取更多详细信息：http: [//www.windowsazure.com/en-us/support/contact/](http://www.windowsazure.com/en-us/support/contact/)

您在上面描述的可能是导致该特定主题不可用的临时问题。您始终可以在以下网址查看当前和历史服务状态： http: [//www.windowsazure.com/en-us/support/service-dashboard/](http://www.windowsazure.com/en-us/support/service-dashboard/)或联系支持人员以获取故障的根本原因。

与配额相关的任何错误都将使用 QuotaExceededException [http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.messaging.quotaexceededexception.aspx指示](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.messaging.quotaexceededexception.aspx)

如果您正在推动特定的队列/主题超出容量，那么您可能会看到 ServerBusyException [http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.messaging.serverbusyexception.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.messaging.serverbusyexception.aspx)

# api - 按标签获取 Tumblr 帖子

> ID：15345959
> 
> 赞同：2
> 
> 时间：2013-03-11T18:34:03.483
> 
> 标签：api, tumblr

是否有一个 Tumblr API 调用来获取具有特定标签的所有帖子（例如[http://www.tumblr.com/tagged/new+york](http://www.tumblr.com/tagged/new+york)），类似于我如何从特定博客获取所有帖子（即[http: //demo.tumblr.com/api/read/json](http://demo.tumblr.com/api/read/json) )

不幸的是[http://www.tumblr.com/tagged/new+york/api/read/json](http://www.tumblr.com/tagged/new+york/api/read/json)不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:18:22.580

我花了更长的时间才找到它：

[http://www.tumblr.com/docs/en/api/v2#tagged-method](http://www.tumblr.com/docs/en/api/v2#tagged-method)。

只需使用您的 API 密钥访问[http://api.tumblr.com/v2/tagged?tag=gif 。](http://api.tumblr.com/v2/tagged?tag=gif)

# ios - 如何取消阻止 UIScrollViewDelegate 中的平移和捏合事件？

> ID：15345964
> 
> 赞同：0
> 
> 时间：2013-03-11T18:34:20.550
> 
> 标签：ios, events, gestures, uiscrollviewdelegate

我有一个 UIView，它有一个 UIScrollView 子视图并且是一个 UIScrollViewDelegate。自从我实现`viewForZoomingInScrollView`后，我停止获取 UIView 的平移和捏合事件。

我怎样才能找回这些事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:46:44.773

尝试将委托添加到您的手势识别器，以实现

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:47:53.207

尝试：

`[yourviewname setUserInteractionEnabled:YES];`

* * *

编辑：我刚刚重新阅读了您的问题。你是说你不能平移和/或捏？或者您是说平移和/或捏合时没有收到通知？

# php - var_dump 仅在上传超过 1 个文件时显示 1 个数组

> ID：15345968
> 
> 赞同：0
> 
> 时间：2013-03-11T18:34:28.597
> 
> 标签：php, html, forms, upload, var-dump

我有一个脚本可以上传图像然后裁剪它们。但是当我使用

```
 <input type="file" name="filename" multiple="multiple"/><br /> 
```

然后做一个 var_dump 我只得到 1 个数组而不是“例如”10 个图像。

我的上传表单：

```
<form action="uploaded.php" method="POST" enctype="multipart/form-data">
    <hr>
    <input type="file" name="filename" multiple="multiple"/><br />
    <br /><br />
    <hr width="60" align="left">
    <input type="submit" value="Upload" />
</form> 
```

我查看上传文件的代码：

```
<?php
session_start();
echo "<pre>";
var_dump($_FILES);

die();
?> 
```

当我上传 10 张图片时。它只显示第一个选择并打印出 1 个数组。

请帮忙！

谢谢

***编辑：我认为我必须为此使用会话。但我该怎么做？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:49:16.200

与使用不止一次的任何其他表单元素相同：`<input type="file" name="filename[]" multiple="multiple"/>`

# java - 将 .w 文件合并到 Java 程序中

> ID：15345970
> 
> 赞同：0
> 
> 时间：2013-03-11T18:34:38.723
> 
> 标签：java, import

我无法找出这些 .w 文件是什么以及如何将它们与我的 Java 代码一起使用：请参阅[http://see.stanford.edu/see/materials/icspmcs106a/assignments.aspx上的 Assignment1.zip](http://see.stanford.edu/see/materials/icspmcs106a/assignments.aspx)

我会发布我的文件的屏幕截图，但我没有足够的“声誉点”来在这个网站上发布图片——我通常只是阅读其他人的答案 b/c 我只是在学习。我无法打开这些 .w 文件，否则我会将它们的一些内容粘贴到此处。

在过去的一年中，我使用 Python 和 C++ 进行了大量工作，但我决定从这些免费的斯坦福在线讲座中学习一些 Java：[http ://see.stanford.edu/see/lecturelist.aspx?coll=824a47e1 -135f-4508-a5aa-866adcae1111](http://see.stanford.edu/see/lecturelist.aspx?coll=824a47e1-135f-4508-a5aa-866adcae1111)。

我已经看遍了，根本找不到 .w 文件是什么，而且我无法打开它们。我意识到它们显然是图形机器人在其中移动的世界，但我无法让 .java 和 .class 文件与这些 .w（或“世界”）文件一起工作。

如果您愿意，我也很乐意在这里发布我的一些代码。一旦获得足够好的声誉，我就可以发布文件和文件夹的图像。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:51:44.360

您似乎缺少`karel.jar`. 已经有用于读取和使用这些文件的代码，`sandford.karel.KarelWorld`其中有一种`load(File)`方法。但是您还需要使用 jar 文件中的其他类，因此您需要查找文档（可能在讲座视频中给出？），否则您将度过一段非常沮丧的时光。

# android - 如何杀死服务中的线程？

> ID：15345972
> 
> 赞同：1
> 
> 时间：2013-03-11T18:34:46.587
> 
> 标签：android

我有一项服务，只要屏幕打开就会运行。当我让手机进入睡眠状态时，服务和线程应该停止。

我设法停止了服务，但线程仍在运行。我怎样才能杀死线程？

```
void runAppCheck(){
    new Thread(new Runnable() {
        @Override
        public void run() {
            // TODO Auto-generated method stub
            while (true) {
                try {
                    Thread.sleep(10000);
                    mHandler.post(new Runnable() {

                        @Override
                        public void run() {
                            // TODO Auto-generated method stub
                            getForegroundApplication();
                            compareResults();
                            PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
                            boolean screenIsOn = pm.isScreenOn();
                            if (!screenIsOn) {
                                Log.i(TAG ,"Screen is OFF, stopping service");
                                stopSelf();
                                //TODO stop thread
                            }
                        }
                    });
                } catch (Exception e) {
                    // TODO: handle exception
                }
            }
        }
    }).start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:53:15.687

您可以`Thread`使用一个共享变量来停止 a，该变量充当一个标志来要求`Thread`停止。例如，在您的 external中`Thread`，声明`private volatile boolean mRunning = true`并将 tn the outer 更改`while(true)`为`while(mRunning)`。然后实现一个方法来请求它停止运行：

```
public void terminate() {
    mRunning = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:32:06.600

我没有完全理解你的问题，因为答案似乎很简单，除非我遗漏了一些东西。

在您的示例中停止线程似乎就像调用一样简单`return;`，这将结束`public void run()`方法并结束线程。

```
 ....
                       if (!screenIsOn) {
                            Log.i(TAG ,"Screen is OFF, stopping service");
                            stopSelf();
                            return;
                        }
      .... 
```

OP评论后更新：

如果你没有使用 an`AlarmManager`并且你可以确定你的线程仍然接收一些 CPU 周期，你为什么要`mHandler.post(....)`调用？为什么不跳过那个`post`电话。

```
void runAppCheck(){
new Thread(new Runnable() {
    @Override
    public void run() {
        // TODO Auto-generated method stub
        while (true) {
            try {
                Thread.sleep(10000);
                        // TODO Auto-generated method stub
                        getForegroundApplication();
                        compareResults();
                        PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
                        boolean screenIsOn = pm.isScreenOn();
                        if (!screenIsOn) {
                            Log.i(TAG ,"Screen is OFF, stopping service");
                            stopSelf();

                            //stop thread
                            return;
                        }
            } catch (Exception e) {
                // TODO: handle exception
            }
        }
    }
}).start(); 
```

# android - Wei-Meng Lee Eclipse 版本错误开始 Android 4.0 应用程序开发

> ID：15345976
> 
> 赞同：0
> 
> 时间：2013-03-11T18:34:50.587
> 
> 标签：android, eclipse

我是安卓初学者。我正在浏览标题中列出的书。我什至没有通过第一章而没有遇到问题。我已经安装了最新版本的 Eclipse。但是，书中显示的示例与我的版本不太一样。例如，应该在布局文件夹中的 main.xml 文件不存在。“New Android Project”对话框的排列方式非常不同，包资源管理器称为项目资源管理器。有没有办法在书中获得这种日食？还是我只需要尽我所能解释它？任何帮助将非常感激！此问题已被另一位用户否决并关闭。有人可以告诉我为什么吗？我只是想得到一些帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:48:19.800

随着不同 Android API（ICS、JB 等）的发布，它们有时会更改 Eclipse 的 ADT（Android 开发工具）。ADT 是 Eclipse 的插件。该插件为您提供了工具栏中所有这些简洁的按钮和 XML 布局交互。

您正在阅读的这本书是为 Android 4.0（冰淇淋三明治）设计的。截至目前，谷歌已经发布了 Android 4.2.2(JB 4.2)。从 ICS 到 JB 的 ADT 发生了一些重大变化，但在我看来，它们是好的。许多非常整洁的新功能。这是一个 Google 资源，解释了 Android 的不同 API 版本：http: [//developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels)

我想说继续阅读这本书，因为它会教你 Android 的基础知识，但是当你想做一些深入的编码时，那本书不会很有用，你可能需要在网上做一些研究。原因是，谷歌每年至少发布两个新版本的 Android。每个版本都会更改，并添加新功能。换句话说，您正在阅读的书已经过时了。Android 操作系统的开发速度很快，作者可以不断更新他们的书籍。

要回答您的问题，您可能必须尽您所能解释它，因为很可能在 6 月/7 月之前，Key Lime Pie 即将到期，而您现在使用的 ADT 将过时。您应该真正了解 Android 操作系统的基础知识，以及它如何在后台工作以及如何处理事物。在那之后，其他一切都应该更容易学习。

您正在阅读的书的另一种选择是：http: [//developer.android.com/training/basics/firstapp/index.html](http://developer.android.com/training/basics/firstapp/index.html)。这直接来自 Google，并且不断更新和更新。这将是有关如何编写 Android 应用程序的最新和有用的信息。

希望有帮助！

# pdf-generation - HtmlUnit 并将页面另存为 PDF

> ID：15345977
> 
> 赞同：2
> 
> 时间：2013-03-11T18:34:50.207
> 
> 标签：pdf-generation, reporting, htmlunit, headless-browser

在 Java EE 环境中，我想加载一个`XML`和`XSL`文件，将输出呈现到浏览器窗口，并将呈现的页面保存为 PDF。

我想以编程方式完成这一切。我正在寻找 HtmlUnit 以用作无头浏览器。这部分似乎有效，但 HtmlUnit 是否有任何 API 来调用“打印”函数或类似函数来持久化呈现的输出？我正在考虑某种方式将它与 iText 链接起来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:18:59.547

我建议尝试[飞碟](http://code.google.com/p/flying-saucer/)，在这种情况下基本上是启用 CSS/XHTML 的 iText 包装器。

我在下面写了一个简单的例子。不要忘记 HtmlUnit 和飞碟的必要依赖项。

```
//Set up a new WebClient using your favourite settings
WebClient webClient = new WebClient();

//Fetch page
HtmlPage page = webClient.getPage("url-to-target.resource");

//Set PDF target output file
String outputFile = "firstdoc.pdf";
OutputStream os = new FileOutputStream(outputFile);

//Set up flying-saucer IText based renderer 
ITextRenderer renderer = new ITextRenderer();

//Create PDF
renderer.setDocumentFromString(page.asXml();
renderer.layout();
renderer.createPDF(os);

os.close(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T15:27:41.127

如果您使用 Java 进行报告，我强烈建议您使用[Jasper Reports](http://community.jaspersoft.com/)，它相对易于使用，您可以以图形方式设计报告，它可以将 XML 作为输入并为您提供多种格式的报告（包括 PDF）。

# javascript - 在同一函数中多次更改单个元素的样式（仅在函数退出时显示最新样式）

> ID：15345978
> 
> 赞同：0
> 
> 时间：2013-03-11T18:34:51.217
> 
> 标签：javascript, html, css

我已经设置了多个堆叠在一起的图像（image1 = 普通图标，image2 = 突出显示的图标）。

我的目标是突出显示图标，进行处理，然后将图标恢复正常。另外，要尽快处理。瓶颈是让“亮点”出现的变通方法。

为此，我只是切换 .style.visibility = {"hidden", "visible"}

我看到的行为是只显示最新的样式，并且在函数退出之前它不会更新。从我对 SO 的研究中，我发现了以下内容：

*   关闭和打开 .style.visibility 或 .style.display 以强制重绘
    *   没有看到正确的行为。仅显示最新更新
*   使用 setTimeout( *callback* , 0) 或 setInterval( *callback* , 0)
    *   表现如预期。但是，由于浏览器强制执行“最短等待时间”，代码的执行速度没有我需要的那么快。
    *   setInterval() 函数实现要求**调用该函数两次以执行一项操作**（一次突出显示，第二次处理然后取消突出显示）
    *   如有必要，我可以上传代码

我附上了一个快速示例代码来演示只显示最后一个样式

```
<!doctype html>
<head>
<title>test redraw</title>
</head>
<body>
    <img id="logo"
        src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAUA
AAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO
    9TXL0Y4OHwAAAABJRU5ErkJggg=="
        alt="Red dot from wikipedia" /></img>

    <script>
        function pausecomp(ms) {
            ms += new Date().getTime();
            while (new Date() < ms) {
            }
        }
        function hide_then_show() {
            var id = document.getElementById("logo");
            pausecomp(1000);
            id.style.display = "none";
            id.parentNode.style.display = "none";
            id.parentNode.style.display = "block";
            pausecomp(1000);
            id.style.display = "block";
            id.parentNode.style.display = "none";
            id.parentNode.style.display = "block";
        }

        window.addEventListener("click", hide_then_show());
    </script>
</body>
</html> 
```

任何建议，将不胜感激。我不知道我是否是最好的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:39:35.750

我怀疑你没有`setTimeout()`正确使用。以下是如何使这项工作。

```
function hide_then_show() {
    var id = document.getElementById("logo");
    setTimeout(function () {
        id.parentNode.style.display = "none";
        setTimeout(function () {
            id.parentNode.style.display = "block";
        }, 1000); // Hiding time
    }, 1000); // Delay between click and hide
}
window.addEventListener("click", hide_then_show, false); 
```

[jsFiddle](http://jsfiddle.net/dkA9V/)的工作演示。您可以玩小提琴并调整延迟，您会看到切换图像显示的速度有多快。

如果你需要一个闪光灯，你可以检查这个[fiddle](http://jsfiddle.net/PCQap/)。

# ember.js - 从模板中触发视图的显示

> ID：15345979
> 
> 赞同：1
> 
> 时间：2013-03-11T18:34:57.740
> 
> 标签：ember.js

在我的应用程序中，我显示了一个帐户列表，如下所示：

```
<script type="text/x-handlebars" data-template-name="accounts">
{{#each account in controller}}
    {{#linkTo "account" account class="item-account"}}
        <div>
            <p>{{account.name}}</p>
            <p>@{{account.username}}</p>
            <i class="settings" {{ action "openPanel" account }}></i>
        </div>
    {{/linkTo}}
{{/each}}
</script> 
```

每个帐户都有一个按钮，允许用户打开一个包含该帐户设置的设置面板。正如您在此快速截屏视频中所见：

[http://screencast.com/t/tDlyMud7Yb7e](http://screencast.com/t/tDlyMud7Yb7e)

我目前正在从位于以下位置的方法中触发面板的打开`AccountsController`：

```
Social.AccountsController = Ember.ArrayController.extend({
    openPanel: function(account){
        console.log('trigger the panel');
    }
}); 
```

但我觉得从我为此目的定义的视图中打开面板更合适。这将使我能够访问视图，以便我可以对其中包含的 DOM 执行操作。

```
Social.MainPanelView = Ember.View.extend({
    id: 'panel-account-settings',
    classNames: ['panel', 'closed'],
    templateName: 'mainPanel',
    openPanel: function(){
        console.log('opening the panel');
    }
});

<script type="text/x-handlebars" data-template-name="mainPanel">
    <div id="panel-account-settings" class="panel closed">
        <div class="panel-inner">
            <a href="#" class="button button-close"><i class="icon-cancel"></i>close</a>
            <h3>Account Settings</h3>
            <a href="/accounts/social/connections/" class="button button-disconnect">Disconnect Account</a>
        </div>
    </div>
</script> 
```

我遇到的问题是我看不到如何`Social.MainPanelView`从`AccountsController`. 有更好的解决方案吗？

**更新 1**

我已经制作了一个小提琴来说明我在说什么：

[http://jsfiddle.net/UCN6m/](http://jsfiddle.net/UCN6m/)

您可以看到，当您单击按钮时，它会调用上找到的 showPanel 方法`App.IndexController`。但我希望能够调用在上面找到的 showPanel 方法`App.SomeView`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:33:06.880

您需要使用操作助手而不是直接对链接进行编码。默认情况下，动作助手以控制器为目标，但您可以将其更改为以视图为目标：

```
<a {{action openPanel target="view"}}></a> 
```

你的第二个链接应该是一个链接到一个路由，因为你正在指定一个到另一个资源的链接。整个片段，修改：

```
Social.MainPanelView = Ember.View.extend({
    id: 'panel-account-settings',
    classNames: ['panel', 'closed'],
    templateName: 'mainPanel',
    openPanel: function(){
        console.log('opening the panel');
    }
});

<script type="text/x-handlebars" data-template-name="mainPanel">
    <div id="panel-account-settings" class="panel closed">
        <div class="panel-inner">
            <a {{action openPanel target="view"} class="button button-close"><i class="icon-cancel"></a></i>
            <h3>Account Settings</h3>
            {{#linkTo "connections"}}Disconnect Account{{/linkTo}}
        </div>
    </div>
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:43:50.280

## 更新：

### 方法一：

最简单的

```
Social.AccountsController = Ember.ArrayController.extend({
  openPanel: function(account){
    /* we can get the instance of a view, given it's id using Ember.View.views Hash
       once we get the view instance we can call the required method as follows
    */
    Ember.View.views['panel-account-settings'].openPanel();
  }
}); 
```

[小提琴](http://jsfiddle.net/xZdCu/4/)

### 方法二：（关联控制器，更清洁）

**使用 Handlebars`render`助手：**这个助手所做的是将一个控制器与要显示的视图关联起来，这样我们就可以在这个控制器中处理与视图相关的所有逻辑，不同之处在于

```
 {{partial "myPartial"}} 
```

只是渲染视图，而

```
{{render "myPartial"}} 
```

`App.MyPartialController`除了渲染视图之外，渲染视图的关联，[小提琴](http://jsfiddle.net/xZdCu/3/)

现在您可以按如下方式更新您的代码

**application.handlebars** (你要渲染视图的地方)

```
{{render "mainPanel"}} 
```

**帐户控制器**

```
Social.AccountsController = Ember.ArrayController.extend({
  openPanel: function(account){
    this.controllerFor("mainPanel").openPanel();
  }
}); 
```

**主面板视图**

```
Social.MainPanelView = Ember.View.extend({
  id: 'panel-account-settings',
  classNames: ['panel', 'closed']
}); 
```

**主面板控制器**

```
Social.MainPanelController = Ember.Controller.extend({
  openPanel: function(){
    console.log('opening the panel');
  }
}) 
```

**方法三：** 这是手动完成方法二的方法

```
Social.MainPanelView = Ember.View.extend({
  id: 'panel-account-settings',
  controllerBinding: 'Social.MainPanelController',
  classNames: ['panel', 'closed'],
  templateName: 'mainPanel'
});

Social.MainPanelController = Ember.Controller.extend({
  openPanel: function(){
    console.log('opening the panel');
  }
}) 
```

利用`this.controllerFor("mainPanel").openPanel()`

# java - JAVA：将输入或输出流传递给 ITextRenderer（xhtml 到 pdf 转换器）

> ID：15345981
> 
> 赞同：3
> 
> 时间：2013-03-11T18:35:06.790
> 
> 标签：java, itext, inputstream, outputstream, pdf-conversion

我想将我的 XHTML 文本转换为 PDF。我将其转换为，`FileOutputStream`但我找不到将其作为输入传递给`ITextRenderer`. 这可能吗，怎么做？

编码 ：

```
String finalXhtml=xhtmlparser(xmlText);
ByteArrayInputStream finalXhtmlStream = new ByteArrayInputStream(finalXhtml.getBytes());

 String HTML_TO_PDF = "ConvertedFile.pdf";
 OutputStream os = new FileOutputStream(HTML_TO_PDF);       

  ITextRenderer renderer = new ITextRenderer();
      //   renderer.loadDocument(finalXhtmlStream);  i can pass a file here can i pass an input or output stream ?     
         renderer.layout();
         renderer.createPDF(os) ;    
         os.close();
   System.out.println("done."); 
```

注意：我可以将文件传递给`ITextRenderer`如下：

```
 String File_To_Convert = "report.xhtml";
 String url = new File(File_To_Convert).toURI().toURL().toString();
 String HTML_TO_PDF = "ConvertedFile.pdf";
 OutputStream os = new FileOutputStream(HTML_TO_PDF);       

 ITextRenderer renderer = new ITextRenderer();
     renderer.setDocument(url);      
     renderer.layout();
     renderer.createPDF(os);
 os.close();
   System.out.println("done."); 
```

如果我必须提供更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-30T13:00:58.347

我正在使用以下代码通过以下代码将 HTML 数据导出为 PDF：

```
renderer.setDocumentFromString(htmls.toString());
renderer.layout();
response.setContentType("application/octet-stream");
response.setHeader("Content-Disposition", "attachment;filename=\"" + fileName + ".pdf\"");
renderer.createPDF(outputStream);
renderer.createPDF(fos); 
```

现在在这里我使用内联 CSS 使用样式生成 PDF，但是有没有任何选项可以通过加载外部 CSS来使用**setDocumentFromString()函数。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T22:56:03.800

我假设您正在使用`Flying Saucer`. ITextRenderer 有一个方法可以做类似的事情：

```
public void setDocumentFromString(String content) {
    InputSource is = new InputSource(new BufferedReader(new StringReader(content)));
    Document dom = XMLResource.load(is).getDocument();

    setDocument(dom, null);
} 
```

调整你的代码，你想要的看起来像这样：

```
String finalXhtml=xhtmlparser(xmlText);
ByteArrayInputStream finalXhtmlStream = new ByteArrayInputStream(finalXhtml.getBytes());

String HTML_TO_PDF = "ConvertedFile.pdf";
OutputStream os = new FileOutputStream(HTML_TO_PDF);      

Document document = XMLResource.load(finalXhtmlStream).getDocument();

ITextRenderer renderer = new ITextRenderer();
renderer.setDocument(document, null);
renderer.layout();
renderer.createPDF(os) ;    
os.close(); 
```

当然，您也可以这样做并一起跳过输入流：

```
renderer.setDocumentFromString(finalXhtml); 
```

# sql - 我如何避免一遍又一遍地调用相同的sql语句

> ID：15345982
> 
> 赞同：0
> 
> 时间：2013-03-11T18:35:09.787
> 
> 标签：sql, sql-server-2008

我有一个`sql`声明说

```
SELECT coalesce((Select sum(SomeNumber) 
FROM Table 
WHERE ID NOT IN (SELECT IDs...)), 0) MyFirstNumber,
coalesce((Select sum(SomeNumber2) 
FROM Table 
WHERE ID NOT IN (SELECT IDs...)), 0) MySecondNumber 
```

我怎样才能使`(SELECT IDs...)`查询语句只被调用一次，比如在上面的语句之前。

我想它会是这样的

```
DECLARE @MyIDs
SET @MyIDs = SELECT IDs FROM TABLE WHERE ...

SELECT coalesce((Select sum(SomeNumber) 
FROM Table 
WHERE ID NOT IN (@MyIDs)), 0) MyFirstNumber,
coalesce((Select sum(SomeNumber2) 
FROM Table 
WHERE ID NOT IN (@MyIDs)), 0) MySecondNumber 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:43:29.817

如何加入该子选择并仅在连接为假的情况下进行拟合（返回 null）

```
SELECT sum(coalesce(SomeNumber,0)) MyFirstNumber
       ,sum(coalesce(SomeNumber2,0)) MySecondNumber
FROM   Table 
       LEFT JOIN (SELECT IDs.. FROM Table ) AS Filter ON Table.ID = Filter.ID
WHERE  Filter.ID IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:51:19.080

计算一个 SELECT 语句中的金额

```
SELECT COALESCE(SUM(SomeNumber), 0) AS MyFirstNumber, 
       COALESCE(SUM(SomeNumber2), 0) AS MySecondNumber
FROM Table
WHERE ID NOT IN (SELECT IDs FROM TABLE WHERE...) 
```

如果需要不同的条件，您可以在 SUM() 函数中使用[CASE表达式](http://msdn.microsoft.com/en-us/library/ms181765.aspx)

```
SELECT COALESCE(SUM(SomeNumber), 0) AS MyFirstNumber, 
       COALESCE(SUM(SomeNumber2), 0) AS MySecondNumber,
       COALESCE(SUM(CASE WHEN ... THEN SomeNumber3 END), 0) AS MyThirdNumber
FROM Table
WHERE ID NOT IN (SELECT IDs FROM TABLE WHERE...) 
```

# spring - @Component Bean 的 @RequestMapping

> ID：15345983
> 
> 赞同：2
> 
> 时间：2013-03-11T18:35:12.497
> 
> 标签：spring, jsp, jakarta-ee, spring-mvc

只是一个简单的问题。仅`@RequestMapping`适用于`@Controller`类。我正在尝试使用它`@Component`在我的应用程序中映射一个 bean，`@RequestMapping`它总是抛出**noHandlerFound No mapping found for HTTP request with URI**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T18:38:39.087

非常正确，您只能`@RequestMapping`在`@Controller`带注释的类上使用。从类的[javadoc](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/servlet/mvc/Controller.html)`@Controller`：

> 基本控制器接口，表示接收 HttpServletRequest 和 HttpServletResponse 实例的组件，就像 HttpServlet [...]

此外，`@Controller` *扩展*了`@Component`bean、[javadoc](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/stereotype/Component.html)：

> [@Component] 表示带注释的类是“组件”。在使用基于注释的配置和类路径扫描时，此类类被视为自动检测的候选对象。

换句话说，a `@Component`（及其子注解`@Controller`）是使类成为 Spring bean 的原因，但只有`@Controller`注解处理`@RequestMapping`和其他 HTTP 相关操作。

在 Spring[参考文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-stereotype-annotations)中有更多关于*构造型注解*的信息。

# ios - shouldAutorotate 返回 YES，但不发生旋转

> ID：15345985
> 
> 赞同：0
> 
> 时间：2013-03-11T18:35:19.873
> 
> 标签：ios, xcode, uiviewcontroller

我试图让我的视图控制器旋转，但我无法让它工作。我添加了这两种方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return YES; //iOS 5
}

- (BOOL)shouldAutorotate
{
    return YES; //iOS 6
} 
```

第二个（我使用 ios6）确实被调用了，但没有发生旋转。为什么是这样？

感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:38:15.657

同样在 ios6 上实现：

```
- (NSUInteger) supportedInterfaceOrientations
{
   return UIInterfaceOrientationMaskAll; 
} 
```

这篇文章对我支持 ios5 和 6 非常有用： [iOS5/6 中的自动旋转？](https://stackoverflow.com/questions/12169419/auto-rotation-in-ios5-6)

# android - 在画布中的两点之间移动

> ID：15345989
> 
> 赞同：0
> 
> 时间：2013-03-11T18:35:52.070
> 
> 标签：android, android-canvas, android-animation

我有 2 个点（x1，y1）和（x2，y2）。我需要将图像从 (x1,y1) 移动到 (x2,y2)。请让我知道android SDK中是否有任何方法可以实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:50:47.160

如果您正在使用 onDraw 方法处理它的自定义视图，您可以：

1.  创建一个[路径](http://developer.android.com/reference/android/graphics/Path.html)对象：
2.  使用 moveTo 方法移动到位置 1
3.  使用 line2 方法到位置 2
4.  创建[路径测量](http://developer.android.com/reference/android/graphics/PathMeasure.html)对象。
5.  使用路径测量对象以动画到该位置。（[这](http://c05mic.wordpress.com/2012/03/23/animating-a-bitmap-using-path-and-pathmeasure-android/)是一个例子——注意你必须做一些不同的事情，因为代码没有显示 View.onDraw 和 View.invalidate 被调用）。

或者，如果您不处理自己的绘图，则可以简单地使用[TranslateAnimation](http://developer.android.com/reference/android/view/animation/TranslateAnimation.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:55:45.273

看起来你只需要一个动画。

搜索此站点`Animation Drawable`，您将获得大量示例：)

# c++ - 使用 MS Visual Studio 2010 编译 C++ 程序，以不依赖任何外部代码或可再发行组件

> ID：15345990
> 
> 赞同：1
> 
> 时间：2013-03-11T18:35:54.717
> 
> 标签：c++, visual-studio-2010, winapi, compilation

我希望我的 exe 可以在不依赖于任何可再发行包的情况下运行，但是当我在“项目”>“属性”菜单中将“使用 MFC”设置为“在静态库中使用 MFC”时，出现如下错误： - 错误 2 错误LNK2019：未解析的外部符号*_imp* _GetWindowTextW@12 在函数_wmain 中引用所以基本上我得到了函数的未解析的外部符号。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:47:53.387

在项目的链接器设置下，确保您已在“附加依赖项”下包含默认库。

这通常是：

```
kernel32.lib;user32.lib;gdi32.lib;winspool.lib;comdlg32.lib;advapi32.lib;shell32.lib;ole32.lib;oleaut32.lib;uuid.lib;odbc32.lib;odbccp32.lib;%(AdditionalDependencies) 
```

另外，请确保没有设置“忽略所有默认库”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T18:59:26.807

在项目-> 属性-> 链接器-> 命令行类型 user32.lib

# html - 百分比宽度增加到 100%，但显示在两行

> ID：15345992
> 
> 赞同：0
> 
> 时间：2013-03-11T18:35:56.073
> 
> 标签：html, css

这出现在一行上：

```
<label style="display:inline-block;width:30%">xxx</label>
<span style="display:inline-block;width:69%">hey</span> 
```

这出现在 2：

```
<label style="display:inline-block;width:30%">xxx</label>
<span style="display:inline-block;width:70%">hey</span> 
```

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T18:39:42.840

因为`inline-block`元素是[white-spacedependent](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)，也`1%`就是由这个显示值引起的空白。

您可以手动删除 the`<label>`和 the之间的空格，`<span>`也可以通过在一行末尾开始注释并在下一行结束来注释掉空格

# c - 为什么signbit（-0）返回0？

> ID：15345994
> 
> 赞同：6
> 
> 时间：2013-03-11T18:36:03.737
> 
> 标签：c, floating-point, sign

来自*开放组基本规范第 7 期*，IEEE Std 1003.1-2008：

> 当且仅当其参数值的符号为负时，signbit() 宏应返回非零值。

为什么`signbit(-0)`返回`0`？我只是想了解这个决定背后的逻辑。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T19:01:37.060

在`signbit(-0)`：

*   `0`是一个类型的常数`int`。
*   `-0`是否定的结果`0`，所以类型为零`int`。
*   该值被转换为浮点数。
*   浮点值中的符号位为零，因此`signbit(-0)`产生 0。

如果你这样做`signbit(-0.)`：

*   `0.`是一个类型的常数`double`。
*   `-0.`是否定的结果`0.`，所以它是一个负零类型`double`。
*   浮点值中的符号位为 1，因此`signbit(-0.)`产生 1。

关键是`-0`否定整数类型，并且整数类型通常不会将负零编码为与正零不同。当整数零转换为浮点时，结果是简单（正）零。但是，`-0.`否定浮点类型，并且浮点类型确实将负零与正零区分开来。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-11T18:41:38.223

在二进制补码中，这是迄今为止最常见的有符号整数表示，没有负零这样的东西。 `-0 == +0`在所有情况下，甚至按位。因此，当宏的代码处理它时，即使它包含`((float) -0)`，符号也已经消失了。

如果你想测试，你可能有更好的运气，比如`signbit(-0.0)`or `signbit(-1.0 * 0)`。由于此时您没有从整数转换，因此该数字仍应有符号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T18:50:54.080

它没有。该`signbit`宏返回浮点数据的文字符号位。注意文本：“如果论点的符号”是否定的，而不是“如果论点”是否定的。

C 标准中的脚注 236 阐明：

> signbit 宏报告所有值的符号，包括无穷大、零和 NaN。

这是一个假设的问题，还是你有一个错误的实现？

# php - Magento - 通过 CURL 发送字段

> ID：15345995
> 
> 赞同：0
> 
> 时间：2013-03-11T18:36:08.567
> 
> 标签：php, javascript, magento, curl

我希望能够通过 CURL 将联系表的结果发布到我们的 CRM。我有 CURL 连接工作，所有代码都为此工作。我只是想找出一种方法来从这个联系表单中获取信息并将字段设置为变量，以便我可以通过 CURL 发送该数据。

[表格可以在这里看到。](http://www.myfoodstorage.com/contact_us)

问题是表单发布到相同的 URL，所以我不确定如何收集这些字段。我尝试使用 $_REQUEST 但它似乎没有用。

我很感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:05:28.617

首先，不要使用 $_REQUEST，因为您实际上是在说您不关心参数是来自 URL ($_GET) 还是来自浏览器/HTTP 请求 ($_POST)。（更容易被滥用）

其次，您在哪里尝试使用 $_REQUEST？如果它是该页面的模板，那么 $_REQUEST 或 $_POST 将起作用。如果您尝试在 Magento 内部的某些 CMS 页面/内容编辑器中执行此操作，那么您将无法执行此操作。

您将需要使用前端控制器实现扩展以接受帖子，或者只需在您可以实际执行 PHP 的地方进行块/模板更改。大概这就是您“已经使 CURL 连接正常工作”的地方。

# matlab - 如何将两个变量一一取值？

> ID：15345997
> 
> 赞同：1
> 
> 时间：2013-03-11T18:36:10.253
> 
> 标签：matlab, vector

如何在Matlab中将两个变量依次连接成一个变量？即，从第一个中取一个，然后从第二个中取一个，然后从第一个中取一个……

例如，加入

```
1
2
3 
```

和

```
4
5
6 
```

进入

```
1
4
2
5
3
6 
```

也许这是一个非常基本的问题，但我是 Matlab 的新手。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:40:04.330

将它们垂直连接为行向量，然后将结果转换回一列：

```
reshape([x(:), y(:)]', [], 1) 
```

### 例子

```
x = (1:3)';
y = (4:6)';
reshape([x(:), y(:)]', [], 1) 
```

这导致：

```
ans =
     1
     4
     2
     5
     3
     6 
```

# asp.net - 在 PL/SQL Oracle / 404 / Not Found 中使用 REST GET Web 服务

> ID：15345998
> 
> 赞同：1
> 
> 时间：2013-03-11T18:36:12.623
> 
> 标签：asp.net, oracle, rest, plsql

我有以下 REST Web 服务：

```
<WebInvoke(Method:="GET", BodyStyle:=WebMessageBodyStyle.WrappedRequest,
RequestFormat:=WebMessageFormat.Json, ResponseFormat:=WebMessageFormat.Json, UriTemplate:="/GetConfigValue")>
Function GetConfigValue(ByVal ConfigSection As String) As Stream Implements IMediaManagerService.GetConfigValue

    WebOperationContext.Current.OutgoingResponse.ContentType = "application/json; charset=utf-8"

    Dim client As New System.Net.Mail.SmtpClient
    Dim host As String = client.Host
    Dim port As String = client.Port.ToString()

    'Return host
    Return New MemoryStream(Encoding.UTF8.GetBytes(host))

End Function 
```

在 PL/SQL 中，我使用此服务：

```
 FUNCTION GetWebConfig (p_AppUrl VARCHAR2, p_ConfigSection VARCHAR2)
       RETURN VARCHAR2
    AS

   l_param_list      VARCHAR2 (512);

   l_http_request    UTL_HTTP.req;
   l_http_response   UTL_HTTP.resp;

   l_response_text   VARCHAR2 (32767);
BEGIN
   -- service's input parameters
   l_param_list := 'ConfigSection=HOSTSMTP';

   -- preparing Request...
   l_http_request :=
      UTL_HTTP.begin_request (
         'http://localhost/services/myservices.svc/GetConfigValue',
         'GET',
         'HTTP/1.1');

   -- ...set header's attributes
   UTL_HTTP.set_header (l_http_request,
                        'Content-Type',
                        'application/json; charset=utf-8');
   UTL_HTTP.set_header (l_http_request,
                        'Content-Length',
                        LENGTH (l_param_list));

   -- ...set input parameters
   UTL_HTTP.write_text (l_http_request, l_param_list);

   -- get Response and obtain received value
   l_http_response := UTL_HTTP.get_response (l_http_request);

   UTL_HTTP.read_text (l_http_response, l_response_text);

   DBMS_OUTPUT.put_line (l_response_text);

   -- finalizing
   UTL_HTTP.end_response (l_http_response);
EXCEPTION
   WHEN UTL_HTTP.end_of_body
   THEN
      UTL_HTTP.end_response (l_http_response);

    END; 
```

但由于某种原因，响应返回 **404 / Not Found**

我在 FIDDLER 中执行了链接： http:// localhost /services/myservices.svc/GetConfigValue ，它运行良好，但使用它或从 pl/sql 调用它返回找不到。