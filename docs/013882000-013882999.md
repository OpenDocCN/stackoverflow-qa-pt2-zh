# StackOverflow 问答 13882000-13882999

# jquery - JQuery：随机选择一个 来自动态创建的表单数组

> ID：13882010
> 
> 赞同：-1
> 
> 时间：2012-12-14T15:53:09.340
> 
> 标签：jquery

一旦单击按钮，我在从 jQuery 动态创建的 s`<form>`中随机选择 a 时遇到问题。`<form>``<submit>`

我试图用来选择 a`<form>`并隐藏所有其余部分的代码是这样的（不完全是我自己的代码，由此处询问的其他类似代码组装而成）：

```
$('.submit-button').live('click', function(){
    var result = $("form").get().sort(function(){ 
        return Math.round(Math.random())-0.5;
        }).slice(0,1);

        $(result).appendTo(result[0].parentNode).show();    
}); 
```

如果这有帮助，这就是我目前正在开发应用程序的地方：http:
[//yaocho-digital.com/teadecider/](http://yaocho-digital.com/teadecider/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:59:22.160

这将找到所有表单并隐藏除随机表单之外的所有表单：

```
$('.submit-button').live('click', function(){
    var forms = $('form');
    forms.hide()
        .eq(Math.round(Math.random() * forms.length))
        .show();    
});​ 
```

[http://jsfiddle.net/nM8UL/](http://jsfiddle.net/nM8UL/)

# php - POST（PHP）上的请求实体太大错误

> ID：13882017
> 
> 赞同：2
> 
> 时间：2012-12-14T15:53:44.567
> 
> 标签：php, post, curl, http-post

我有一个文本框，当我提交表单时，上面有很多数据我在控制台中收到错误

```
POST http://www.XXX.com/save.php 413 (Request Entity Too Large) 
```

我的 PHP.INI 文件在下面

```
allow_url_include = On 
post_max_size 100M
upload_max_filesize 100M
LimitRequestBody 1024000 
```

为什么我会收到此错误？我该如何解决？我正在发布我认为大约 2-3 Mb 的数据。（它的网页 HTML ）

这是网页，此数据应发送到 php on SAVE 按钮 [http://caarve.com/highlight.php?page=en.wikipedia.org%2Fwiki%2FLydia_Zinovieva-Annibal](http://caarve.com/highlight.php?page=en.wikipedia.org%2Fwiki%2FLydia_Zinovieva-Annibal)

# apache - 使用 .htaccess 保护“友好 URL”

> ID：13882019
> 
> 赞同：1
> 
> 时间：2012-12-14T15:53:51.087
> 
> 标签：apache, .htaccess, security, friendly-url, .htpasswd

我想保护我的 htaccess 文件中的“友好 url”。为了更清楚一点，我有这些规则：

`RewriteRule ^([a-z|A-Z|0-9|\/|\-|\_]+)$ index.php?page=$1`

将 url/test/hello 重定向到 index.php?page=test/hello

我想做的是，例如，当给出一个特定的 url 时（例如，url/text/hello），

`url/institucional`

浏览器会提示用户和密码对话框，这与您可以对 htacces 文件中的目录执行的操作相同。

我试过：

```
<LocationMatch "/institucional">
     AuthType Basic
     AuthName "Padres Secundaria"
     AuthUserFile /url/to/file.passwd
     Require valid-user
</LocationMatch> 
```

但它给了我一个 500 错误页面。

# c# - linq 和字符串数组

> ID：13882024
> 
> 赞同：3
> 
> 时间：2012-12-14T15:54:04.693
> 
> 标签：c#, linq

```
var result=list.select(element=>element.split['_']).list();
/* I want to extract the part of the file name from a list of file names */ 
```

我有一个文件名数组，我想从数组中为每个文件名提取部分名称

例子：

> 0-policy001_Printedlabel.pdf
> 1-policy002_Printedlabel.pdf
> 2-policy003_Printedlabel.pdf
> 3-policy004_Printedlabel.pdf

现在我想使用 Linq 从上面的数组中提取一个数组，这只给了我

> 政策001,政策002,政策003,政策004

你能帮我么？我是 lambda 表达式的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T15:58:32.583

```
Regex regex = new Regex(@".+(policy[0-9]+).+");

var newarray = yourarray.Select(d=>regex.Match(d))
                        .Where (mc => mc.Success)
                        .Select(mc => mc.Groups[1].Value)
                        .ToArray(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T15:59:00.663

```
List<string> output = fileList.Select(fileName => fileName.Split(new char[] {'-','_'})[1]).ToList() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T15:56:09.697

**如果数字是索引**

```
string[] output = fileList.Select(fileName => fileName.Split(new char[] {'_'})[0]).ToArray(); 
```

**如果数字是文件名的一部分**

```
string[] output = fileList.Select(fileName => fileName.Split(new char[] {'-', '_'})[1]).ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T16:07:31.117

如果它总是那么严格：

```
string[] result = list
    .Select(fn => Path.GetFileNameWithoutExtension(fn)
                      .Split(new[] { '-', '_' }, StringSplitOptions.None)
                      .ElementAtOrDefault(1))
    .ToArray(); 
```

# javascript - 将类属性应用于 jquery 1.3.2 的子项

> ID：13882025
> 
> 赞同：0
> 
> 时间：2012-12-14T15:54:08.047
> 
> 标签：javascript, jquery, html, css

我在这里做错了吗？我正在尝试将类属性应用于#one 的孩子

```
<div id="one">
<div id="first"></div>
<div id="second"></div>
</div>

jquery---
$('#one').children().attr('class' , 'className'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T15:55:16.767

试试这个：

```
$(function(){
    $('#one').children().addClass('className');
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T15:56:23.713

使用`.addClass`它从 v1.0 开始就在 jQuery 中

```
 $('#one').children().addClass('className'); 
```

有关此事的 jQuery 文档，请参见[此处](http://api.jquery.com/addClass/)。

# html - Chrome中的身体背景，不考虑身体的位置

> ID：13882026
> 
> 赞同：1
> 
> 时间：2012-12-14T15:54:11.960
> 
> 标签：html, css, google-chrome

当您在 Chrome 中的特定页面上移动 body 元素（测试 v23）`position: relative; top: 100px;`时，背景仍然应用于整个视口。

这是 Chrome 错误还是任何人都可以解释行为/提供灵活的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:00:01.223

这实际上是所有浏览器的预期行为：虽然`body`元素确实从顶部偏移 100 像素，但背景本身正在无缝传播到视口，如[本答案](https://stackoverflow.com/questions/10947541/applying-a-background-to-html-and-or-body/10947583#10947583)第一部分所述。这可能是 HTML 表示属性时代的遗留物，在该时代设置背景属性`body`允许将背景传播到视口，从而呈现将背景应用于整个页面的外观。

如果您想将背景限制为仅`body`元素，只需提供`html`除 之外的任何背景颜色`transparent`，或为其提供背景图像。然后视口将使用背景`html`代替。

# ruby-on-rails - rails中的多表继承

> ID：13882031
> 
> 赞同：1
> 
> 时间：2012-12-14T15:54:38.560
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, orm

在我的 rails 应用程序中，我有一个`CASE`域实体，它充当特定于案例的域模型（即`CASEA`, `CASEB`, `CASEC`）的逻辑超类，如下所示：

```
 +--------+
               |  CASE  |
               +--------+
                    ^
                    |
      +-------------+-------------+
      |             |             |
  +-------+     +-------+     +-------+
  | CASEA |     | CASEB |     | CASEC |
  +-------+     +-------+     +-------+ 
```

这个想法是拥有一个具有所有案例共有的属性的域模型，以及每个特定案例类型的一个域模型，它封装了特定于该案例的属性。

**我需要使用双向**一对一关系实现多表继承设计，其中每个特定案例实例 ( `CASEX`) 必须引用一个且仅一个案例实例 ( `CASE`)。相反，每个`CASE`实例应引用一个且仅一个特定于案例的实例 ( `CASEX`)。请注意，每个特定案例都是不同的域模型类。此外，我希望**CASE**成为关系的所有者，以便将保存、更新和删除级联到另一端，如下所示：

```
case = Case.new
case.case_info = CaseX.new
case.save!
# both case and CaseX are validated and saved 
```

使用活动记录实现这种关系的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:40:22.003

您所描述的内容听起来像是单表继承 (STI) 的强大用例。这意味着您实际上有一个表，其中包含 3 个特定情况（A、B、C）中所有属性的超集，并且 rails 知道拉出正确的表。

一篇很好地描述了这一点的博客文章在这里：

[http://blog.eizesus.com/2009/10/sti-best-practices-in-rails/](http://blog.eizesus.com/2009/10/sti-best-practices-in-rails/)

但这取决于 - 上面链接中的“坏例子”很糟糕，因为属性之间没有重叠。如果您有相对大量的重叠，STI 可能是您的胜利。

如果您打算使用单独的表，您正在查看您的案例和子案例模型之间的 has_many/belongs_to 关系。您可能希望在 Case 对象上使用自定义验证方法，以确保仅存在一种特定的案例类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T18:59:29.250

What i actually want is some kind of a multiple table inheritance. Looking around i came up with this article, explaining how to implement a solution using polymorphic relations. It is exactly what we want to achieve.

[http://mediumexposure.com/multiple-table-inheritance-active-record/](http://mediumexposure.com/multiple-table-inheritance-active-record/)

# asp.net - asp.net 中的会员休息和更改密码

> ID：13882032
> 
> 赞同：0
> 
> 时间：2012-12-14T15:54:38.823
> 
> 标签：asp.net, asp.net-membership, password-recovery, change-password

我想手动更改密码并将密码发送给我的用户，但我得到“对象引用未设置为对象的实例”。错误。我的鳕鱼有什么问题：谢谢：

```
 Random r = new Random();
        string code = r.Next(100000, 9999999).ToString();

        //////////////////////////////////////////////////////////////////////////////////////////////

        string connStr = ConfigurationManager.ConnectionStrings["****"].ConnectionString;
        SqlConnection sqlconn = new SqlConnection(connStr);
        SqlCommand sqlcmd = new SqlCommand();
        sqlcmd = new SqlCommand("SELECT Count(ID) FROM RolInfo where username=@username", sqlconn);
        sqlcmd.Parameters.AddWithValue("@username", TextBox1.Text);

        sqlconn.Open();
        int count = ((int)sqlcmd.ExecuteScalar());

        sqlconn.Close();

        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        if (count != 0)
        {

          Sendmail();

            MembershipUser u = Membership.GetUser();
            u.ChangePassword(u.ResetPassword(), code);
        }
        else
        {
            lab_Message.Visible = true;
            lab_Message.Text = "This username is invalid.";
            lab_Message.ForeColor = System.Drawing.Color.Red;

        }

    }
    else
    {
        lab_Message.Visible = true;
        lab_Message.Text = "Please enter your username.";
        lab_Message.ForeColor = System.Drawing.Color.Red;
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:24:38.220

您没有将参数传递给`Membership.GetUser();`

`Membership.GetUser();`获取当前登录的用户。由于您未登录，它将返回`null`. 如果您已登录，它将只返回您，而不是您的成员。

如果你想获得用户，那么你需要传入他们的`username`. 像这样：

```
MembershipUser u = Membership.GetUser(TextBox1.Text); 
```

**更新**

您无需调用 SQL 数据库来检查用户是否存在。

你可以这样做。

```
 MembershipUser u = Membership.GetUser(TextBox1.Text);

   if (u != null){
      SendMail();
      u.ChangePassword(u.ResetPassword(), code);
   }else{
      lab_Message.Visible = true;
      lab_Message.Text = "This username is invalid.";
      lab_Message.ForeColor = System.Drawing.Color.Red;
   } 
```

顺便说一句，用户密码不会设置为`code`- 这将设置为用户对其安全问题的回答。`ResetPassword`将密码重置为自动生成的密码。

有关文档，请参见此处。[http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.resetpassword.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.resetpassword.aspx)

# iphone - 使用 ios6 在 xcode 4.5 中从 facebook 获取用户详细信息

> ID：13882037
> 
> 赞同：1
> 
> 时间：2012-12-14T15:54:55.817
> 
> 标签：iphone, objective-c, ios, xcode, facebook-login

我已经在我的应用程序中实现了 facebook 登录集成的概念。1---->我能够进行facebook登录，但在用户facebook登录后我想继续我的应用程序，即出现一个带有三个选项卡项目的tabbarController，同时我需要获取facebook用户详细信息（电子邮件、名字、姓氏等)

但我无法检索详细信息。我不明白我要去哪里错了。

在我的 ViewController.m 中：

```
- (IBAction)performLogin:(id)sender
{
    AppAppDelegate *appDelegate = (AppAppDelegate *) [[UIApplication sharedApplication] delegate];

    [appDelegate openSessionWithAllowLoginUI:YES];

    UITabBarController *tabBarController=[[UITabBarController alloc]init];
    SearchViewController *searchViewController=[[SearchViewController alloc]initWithNibName:@"SearchViewController" bundle:nil];

    UserProfile *userprofile=[[UserProfile alloc]initWithNibName:@"UserProfile" bundle:nil];
    userprofile.title=@"My Profile";

    LogOut *logout=[[LogOut alloc]initWithNibName:@"LogOut" bundle:nil];

    logout.title=@"Log Out";
    tabBarController.viewControllers=[NSArray arrayWithObjects:searchViewController,userprofile,logout, nil];

    [self presentModalViewController:tabBarController animated:YES];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(sessionStateChanged:)
                                                 name:FBSessionStateChangedNotification
                                               object:nil];
}

- (void)sessionStateChanged:(NSNotification*)notification {

    if (FBSession.activeSession.isOpen) {

        [FBRequestConnection
         startForMeWithCompletionHandler:^(FBRequestConnection *connection,
                                           id<FBGraphUser> user,
                                           NSError *error) {
             if (!error) {
                 NSString *fbUserEmail= @"";

                 NSLog(@"%@",user);

                 fbUserEmail=[user objectForKey:@"email"];

                 AppAppDelegate *appDelegate = (AppAppDelegate *) [[UIApplication sharedApplication] delegate];

                 appDelegate.fbEmail=fbUserEmail;
             }
         }
         ];
    }
} 
```

但是在这里没有显示 facebook 登录页面，我得到了 tabbarController，我无法检索用户详细信息。

如何先显示 facebook 登录页面，然后显示 tabbarController 和用户详细信息。？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:08:52.960

您可以使用 Facebook Graph API 获取 facebook 用户详细信息，下面的链接演示了使用 Graph API 获取基本用户详细信息。在这里查看：[http ://www.raywenderlich.com/1578/how-to-get-a-user-profile-with-facebooks-new-graph-api-from-your-iphone-app](http://www.raywenderlich.com/1578/how-to-get-a-user-profile-with-facebooks-new-graph-api-from-your-iphone-app)

# c - 在 C 中实现简单的高通和低通滤波器

> ID：13882038
> 
> 赞同：9
> 
> 时间：2012-12-14T15:54:57.893
> 
> 标签：c, filter, signal-processing, portaudio

尝试使用portaudio录制一些数据，然后使用算法过滤器更改录制的语音，然后播放。我已经验证了很多（来自示例），但我对 C 很陌生，我认为在我的过滤器实现中我做了一些愚蠢的事情。

```
#if LOW_PASS 
{
    float RC = 1.0/(CUTOFF*2*3.14);
    float dt = 1.0/SAMPLE_RATE;
    float alpha = dt/(RC+dt);
    float filteredArray[numSamples];
    filteredArray[0] = data.recordedSamples[0];
    for(i=1; i<numSamples; i++){
        filteredArray[i] = filteredArray[i-1] + (alpha*(data.recordedSamples[i] - filteredArray[i-1]));
    }
    data.recordedSamples = filteredArray;
}
#endif
#if HIGH_PASS
{
    float RC = 1.0/(CUTOFF*2*3.14);
    float dt = 1.0/SAMPLE_RATE;
    float alpha = RC/(RC + dt);
    float filteredArray[numSamples];
    filteredArray[0] = data.recordedSamples[0];
    for (i = 1; i<numSamples; i++){
        filteredArray[i] = alpha * (filteredArray[i-1] + data.recordedSamples[i] - data.recordedSamples[i-1]);
    }
    data.recordedSamples = filteredArray;
}
#endif 
```

当记录的信号试图通过这些过滤器时，我得到以下错误：

```
*** glibc detected *** ./paex_record: free(): invalid pointer: 0xbfd68600 ***
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(+0x75ee2)[0xb75e2ee2]
./paex_record[0x8048fe5]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0xb75864d3]
./paex_record[0x80487f1]
======= Memory map: ========
08048000-0804a000 r-xp 00000000 08:05 2363767    /home/svictoroff/Documents/CompArch/portaudio/examples/paex_record
...
bfd68000-bff1a000 rw-p 00000000 00:00 0          [stack]
Aborted (core dumped) 
```

我真的不确定这里发生了什么。有什么想法吗？Free 是从脚本末尾处调用的 terminate here：

```
Pa_Terminate();
    if( data.recordedSamples )       /* Sure it is NULL or valid. */
        free( data.recordedSamples );
    if( err != paNoError )
    {
        fprintf( stderr, "An error occured while using the portaudio stream\n" );
        fprintf( stderr, "Error number: %d\n", err );
        fprintf( stderr, "Error message: %s\n", Pa_GetErrorText( err ) );
        err = 1;          /* Always return 0 or 1, but no other return codes. */
    }
    return err; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:08:54.893

问题是 data.recordedSamples 现在（当时`free()`）指向分配在堆栈上的结构，而不是在堆上！

既然你有这个指令：

```
data.recordedSamples = filteredArray; 
```

这

```
if( data.recordedSamples ) 
```

没有用，因为地址 id 有效，但不一致：它永远不会被分配，`malloc()`它不在堆上，而是在堆栈上！

在您调用 的那一刻`free()`，该地址很可能指向另一个函数的堆栈。

如果需要，将过滤后的数据复制回原始数据`recordedSamples`，只是不要重新分配该指针。

编辑：

用这个：

```
for(i = 0; i<numSamples; i++) {
    data.recordedSamples[i] = filteredArray[i];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:11:32.250

看起来您正在尝试释放堆栈变量。您唯一需要调用的时间`free`是您之前调用过`malloc`（或它的朋友之一`calloc`），或者当您调用的库函数的文档说您需要释放它返回的指针时。

顺便说一句，任何时候你释放一个指针，一个好的做法是在之后立即将它设置为 NULL。

堆栈变量一旦超出范围就会消失。[这](https://stackoverflow.com/questions/5258724/stack-variables-vs-heap-variables)可能会帮助您更好地理解。

# html - 为什么它的边框颜色似乎只在 chrome 中运行，而不是在 internet explore 或 firefox 中运行

> ID：13882044
> 
> 赞同：0
> 
> 时间：2012-12-14T15:55:19.233
> 
> 标签：html, css, internet-explorer, google-chrome, firefox

伙计们，我只是想制作一个带有与我的背景颜色不同的简单边框的网页。当我在 chrome 中加载网页时，它可以按我想要的方式正常工作。但如果我在 Internet Explorer 或 Firefox 中加载页面，它不会显示任何内容。我如何为 internet explore 和 firefox 解决这个问题，因为我喜欢它在 chrome 中的显示方式（它正是我想要在 chrome 中显示的方式）。这是我的代码

```
<html>
<body>
<table width="709" height="278" border="0" bordercolor="#000000">
<tr>
<td>&nbsp;</td>
 </tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T15:57:44.340

在您的表格中，您可以`border="0"`- 更改以表示所需的边框大小：

```
<table width="709" height="278" border="1" bordercolor="#000000"> 
```

虽然，我建议使用 CSS 来完成此操作：

```
table { border: 1px solid #000; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T15:59:18.883

您将边框设置为 0，因此 chrome 中甚至不应该有边框。

如果您将其设置为

```
<html>
<body>
<table width="709" height="278" border="1" bordercolor="#000000">
<tr>
<td>&nbsp;</td>
 </tr>
</table>
</body>
</html> 
```

虽然内联样式不是最好的，所以我建议你使用外部 CSS，例如

```
table { border: 1px solid #000; } 
```

# android - 错误异步任务 doInBackground() & JSoup

> ID：13882046
> 
> 赞同：1
> 
> 时间：2012-12-14T15:55:26.560
> 
> 标签：android, android-asynctask, jsoup

我尝试将 Async 与 JSoup 连接起来。我想从 URL 中获取标题，但捕获异常。但我不明白为什么

我的 LogCat 是：

```
 12-14 23:54:19.612: I/Process(568): Sending signal. PID: 568 SIG: 9
12-14 23:54:55.141: D/gralloc_goldfish(632): Emulator without GPU emulation detected.
12-14 23:55:01.051: I/dalvikvm(632): Could not find method org.jsoup.Jsoup.connect, referenced from method com.example.myexample.MainActivity$MyTask.doInBackground
12-14 23:55:01.081: W/dalvikvm(632): VFY: unable to resolve static method 3465: Lorg/jsoup/Jsoup;.connect (Ljava/lang/String;)Lorg/jsoup/Connection;
12-14 23:55:01.081: D/dalvikvm(632): VFY: replacing opcode 0x71 at 0x000a
12-14 23:55:03.111: W/dalvikvm(632): threadid=11: thread exiting with uncaught exception (group=0x409961f8)
12-14 23:55:03.181: E/AndroidRuntime(632): FATAL EXCEPTION: AsyncTask #1
12-14 23:55:03.181: E/AndroidRuntime(632): java.lang.RuntimeException: An error occured while executing doInBackground()
12-14 23:55:03.181: E/AndroidRuntime(632):  at android.os.AsyncTask$3.done(AsyncTask.java:278)
12-14 23:55:03.181: E/AndroidRuntime(632):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
12-14 23:55:03.181: E/AndroidRuntime(632):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
12-14 23:55:03.181: E/AndroidRuntime(632):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
12-14 23:55:03.181: E/AndroidRuntime(632):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
12-14 23:55:03.181: E/AndroidRuntime(632):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
12-14 23:55:03.181: E/AndroidRuntime(632):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
12-14 23:55:03.181: E/AndroidRuntime(632):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
12-14 23:55:03.181: E/AndroidRuntime(632):  at java.lang.Thread.run(Thread.java:856)
12-14 23:55:03.181: E/AndroidRuntime(632): Caused by: java.lang.NoClassDefFoundError: org.jsoup.Jsoup
12-14 23:55:03.181: E/AndroidRuntime(632):  at com.example.myexample.MainActivity$MyTask.doInBackground(MainActivity.java:50)
12-14 23:55:03.181: E/AndroidRuntime(632):  at com.example.myexample.MainActivity$MyTask.doInBackground(MainActivity.java:1)
12-14 23:55:03.181: E/AndroidRuntime(632):  at android.os.AsyncTask$2.call(AsyncTask.java:264)
12-14 23:55:03.181: E/AndroidRuntime(632):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
12-14 23:55:03.181: E/AndroidRuntime(632):  ... 5 more 
```

据我所知，我对 section 有一个错误`doInBackground`。当我将 params[0] 更改为 params 我也有错误

```
public class MainActivity extends Activity {
MyTask mt;
  TextView tvInfo;
  String URL="http://www.yandex.ru/";
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    tvInfo = (TextView) findViewById(R.id.tvInfo);
  }

  public void onclick(View v) {
    mt = new MyTask();
    mt.execute(URL);
  }

  class MyTask extends AsyncTask<String, Void, String> {
      Document doc;
      String title=null;
    @Override
    protected void onPreExecute() {
      super.onPreExecute();
      tvInfo.setText("Please wait");
    }

    @Override
    protected String doInBackground(String... params) {
      try {
       TimeUnit.SECONDS.sleep(2);
       doc = Jsoup.connect(params[0]).get();
       String title = doc.title();
       Log.d("AsyncTask doInBackground","URL: " + params[0]);
      } catch (InterruptedException e) {
        e.printStackTrace();
      } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
      return title;
    }

    @Override
    protected void onPostExecute(String result) {
      super.onPostExecute(result);
      tvInfo.setText(title);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:58:57.133

使用 params 作为数组`params[0] params[1] ...`是正确的。

您可以添加一个一般异常捕获，以便查看有关 JSoup 连接错误的更多细节吗？

此外，记录 params[0] 的值以确保它是有效的 URL：

```
Log.d("AsyncTask doInBackground","URL: " + params[0]); 
```

尽管没有它们您的项目将无法编译，但请确保您正在导入正确的 Java JSoup 库。您的错误说它找不到静态方法`connection`。

```
import org.jsoup.Jsoup;
import org.jsoup.helper.Validate;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements; 
```

# windows - powershell/cmd 命令在多个文件的多行中查找和替换字符串

> ID：13882047
> 
> 赞同：2
> 
> 时间：2012-12-14T15:55:26.403
> 
> 标签：windows, powershell, cmd, replace

我以前从未使用过 powershell，而且 Google 并没有给出我所需要的答案。我希望你们能帮助我。我需要找到目录（包括子目录）中包含 2 行的所有文件：

```
aaa aaa
bbb bbb 
```

并将第二行替换为`ccc`

`bbb bbb`如果 line没有紧随其后，则不应发生替换`aaa aaa`。

这是我到目前为止所拥有的：

```
$line3 = "aaa[ ]*aaa[ ]*bbb[ ]*bbb"
Get-ChildItem -exclude *.bak -recurse *.txt | Where-Object {$_.Attributes -ne "Directory"} |
    ForEach-Object { 
        Copy-Item $_ "$($_).bak"; 
        $wholeFile = [IO.File]::ReadAllText("$_");
        $wholeFile = $wholeFile.replace("`n", " ");
        $wholeFile = $wholeFile.replace("`r", " ");
        $temp3 = $wholeFile | Select-String -pattern $line3 -quiet;
        if(($temp3 -eq "True")){
            (Get-Content $_)  -replace "bbb[ ]*bbb", "ccc" | Set-Content -path $_;
        }
        else{
            echo failed
        }
    } 
```

我认为这段代码几乎可以工作，除非一个文件有 2 次出现“bbb bbb”：一个紧跟在“aaa aaa”之后，另一个没有“aaa aaa”。两条线都会被替换，我只需要替换第一条线。有什么办法可以解决吗？如果我错过了什么，有更多经验的人可以告诉我吗？我需要什么更简单/更短的解决方案？我在 powershell 中看到了很多简洁的单行解决方案。我的情况有类似的情况吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:58:55.993

这是一个批处理解决方案:)

```
@echo off
setlocal enabledelayedexpansion
cd C:\folder
set aaa=false
for /r C:\folder %%a in (*) do (
for /f "tokens=1,2 delims= " %%x in (%%a) do (
if "!aaa!"=="true" (
if "%%x"=="bbb" if "%%y"=="bbb" (
echo ccc ccc >>temp.txt
del %%a /f /q
ren temp.txt %%~nxa
set aaa=false
)
) else (
if "%%x"=="aaa" if "%%y"=="aaa" set aaa=true
echo %%x %%y >>temp.txt
)
)
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T19:00:24.833

我认为这会做你想要的。它不是单行的，我相信它可以简化。不过，我更担心得到一些功能性的东西。

我也测试了你的用例。这只会在直接跟随 'aaa aaa' 行时替换 'bbb bbb' 行。文件中具有该行的所有其他位置都不会被覆盖。

只需使用您的测试信息修改顶部的变量即可。

我一直认为你会：

1.  只处理 .txt 文件
2.  查询/替换整行数据

```
#script variables
$filePath     = 'C:\Temp\SO\'
$processFiles = Get-ChildItem -Exclude *.bak -Filter *.txt -Recurse -Path $filePath

$query        = 'aaa aaa'
$query2       = 'bbb bbb'
$replace      = 'ccc'

#script begin
foreach ( $file in $processFiles ) {
    #Pre-Processing | backup the file for archival
    $file | Copy-Item -Destination "$file.bak"

    $arrayData = Get-Content $file
    for ($i=0; $i -lt $arrayData.Count; $i++)
    {
        if ( $arrayData[$i] -match $query ) {
            if ( $arrayData[$i+1] -match $query2 ) {
                $arrayData[$i+1] = $arrayData[$i+1].Replace($query2,$replace)
            }
            else {
                #Catch if the second query isn't matched.
            }
        }
        else {
            #Catch if the first query isn't matched.
        }
    }

    #Overwrites the original text file that was being processed
    $arrayData | Out-File $file -Force
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T10:05:50.093

这是一个单行解决方案：

```
$a="aaa aaa";$b="bbb bbb";$c="ccc";ls *.txt -File -Recurse|foreach{$l=0;cp $_ "$($_).bak";(cat $_)|foreach{if($_ -match $a){$l=1;$_}else{if($_ -match $b){if($l -eq 1){$_ -replace($b,$c)}else{$_};$l=2}else{$l=0;$_}}}|sc($_) -Force} 
```

这有点晦涩，我不会称它为“整洁”，但它确实有效。

# asp.net-mvc-3 - MVC：将下拉列表绑定到控制器并在控制器中获取选定索引

> ID：13882049
> 
> 赞同：0
> 
> 时间：2012-12-14T15:55:29.977
> 
> 标签：asp.net-mvc-3, drop-down-menu, model, controller

我有一个 MVC# 下拉列表，其中包含模型中定义的值。

```
@Html.DropDownListFor(model => model.myModel, new SelectList(Model.List, "Value", "Text")) 
```

我希望它像一个按钮，即在选择时，在控制器中执行一个动作并返回到同一个视图。我已经为它创建了一个控制器方法，比如

```
[HttpPost]
public ActionResult Index(int? selectedIndex)
{

} 
```

我想知道如何从视图中获取选定的索引。即，我如何将特定的下拉列表绑定到控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:07:30.353

`@Html.DropDownListFor`呈现一个 html`input`标记，该标记在选择更改时不会发布到服务器。

您必须使用一些 javascript / jQuery 来捕获下拉列表的更改事件并将值发布到服务器，如下所示：

```
$(document).ready(function() {
    $("#myModel").on('change', function(e) {
        $.post('@Url.Action("Index")', {id: $(this).val()}, 
               function(data) {
                  // here data contains the response from your action index
               });
    });
}); 
```

# ios - UICollectionView 的 SectionIndexTitles

> ID：13882052
> 
> 赞同：21
> 
> 时间：2012-12-14T15:55:57.480
> 
> 标签：ios, ios5, ios6, uicollectionview

所以我实现了一个`TableView`带有搜索功能的适当的和`sectionIndexTitles`. 现在，我正在尝试实现 a`UICollectionView`并且到目前为止它正在工作，除了我不能轻易拥有`sectionIndexTitles`（右滚动条）。

如果我查看 Facebook 应用程序，它看起来像一个`UICollectionView`，但确实`sectionIndexTitles`有一个搜索栏。我似乎找不到该`UICollectionView`模型的此类功能。

有任何想法吗？！

谢谢！

![在此处输入图像描述](../Images/8f10a8b5f7fc961c4b97779b3046b7af.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-21T16:57:36.587

我有类似的要求（对于水平集合视图）并最终自己构建了一个索引视图子类。

我计划开源它，但可能要等到下个月，所以这里有一个存根让你开始：

**YMCollectionIndexView.h**

```
@interface YMCollectionIndexView : UIControl

- (id) initWithFrame:(CGRect)frame indexTitles:(NSArray *)indexTitles;

// Model
@property (strong, nonatomic) NSArray *indexTitles; // NSString
@property (readonly, nonatomic) NSUInteger currentIndex;
- (NSString *)currentIndexTitle;

@end 
```

**YMCollectionIndexView.m**

```
#import "YMCollectionIndexView.h"

@interface YMCollectionIndexView ()
@property (readwrite, nonatomic) NSUInteger currentIndex;
@property (strong, nonatomic) NSArray *indexLabels;
@end

@implementation YMCollectionIndexView

- (id) initWithFrame:(CGRect)frame indexTitles:(NSArray *)indexTitles {
    self = [super initWithFrame:frame];
    if (self) {
        self.indexTitles = indexTitles;
        self.currentIndex = 0;
        // add pan recognizer
    }
    return self;
}

- (void)setIndexTitles:(NSArray *)indexTitles {
    if (_indexTitles == indexTitles) return;
    _indexTitles = indexTitles;
    [self.indexLabels makeObjectsPerformSelector:@selector(removeFromSuperview)];
    [self buildIndexLabels];
}

- (NSString *)currentIndexTitle {
    return self.indexTitles[self.currentIndex];
}

#pragma mark - Subviews

- (void) buildIndexLabels {
    CGFloat cumulativeItemWidth = 0.0; // or height in your (vertical) case
    for (NSString *indexTitle in self.indexTitles) {
            // build and add label
        // add tap recognizer
    }
    self.indexLabels = indexLabels;
}

#pragma mark - Gestures

- (void) handleTap:(UITapGestureRecognizer*)recognizer {
    NSString *indexTitle = ((UILabel *)recognizer.view).text;
    self.currentIndex = [self.indexTitles indexOfObject:indexTitle];
    [self sendActionsForControlEvents:UIControlEventTouchUpInside];
}

// similarly for pan recognizer

@end 
```

**在您的视图控制器中：**

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [self.collectionIndexView addTarget:self action:@selector(indexWasTapped:) forControlEvents:UIControlEventTouchUpInside];
    // similarly for pan recognizer
}

- (void)indexWasTapped:(id)sender {
    [self.collectionView scrollToIndexPath:...];
}

// similarly for pan recognizer 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-30T12:08:30.270

从 iOS 14 开始（已大大增强`UICollectionView`，尤其是`UITableView`过时），通过实现委托方法可以按预期工作`indexTitles`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-28T15:58:33.867

索引标题确实适用于 iOS，但在我测试时它似乎只适用于 iOS 14+。

```
func indexTitles(for collectionView: UICollectionView) -> [String]? {
    return Array(Set(objects.map{ String($0.name.prefix(1)) })).sorted(by: { $0 < $1 })
}

func collectionView(_ collectionView: UICollectionView, indexPathForIndexTitle title: String, at index: Int) -> IndexPath {
    guard let index = objects.firstIndex(where: { $0.name.prefix(1) == title }) else {
        return IndexPath(item: 0, section: 0)
    }
    return IndexPath(item: index, section: 0)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-19T15:02:57.773

## 编辑：**这已被验证已修复，并且现在可以在 iOS 14 中按预期工作**

您现在可以简单地使用（从 iOS 10.3 开始）

`optional func indexTitles(for collectionView: UICollectionView) -> [String]?`

它需要一个数组，如： `['A', 'B' ,'C']` 作为它的返回值。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-15T20:08:57.027

[您可以通过实现并返回UICollectionViewDataSource](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionViewDataSource_protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40012175)的以下函数的值来提供此标头

```
collectionView:viewForSupplementaryElementOfKind:atIndexPath: 
```

请注意，标头的大小将来自[UICollectionViewFlowLayoutDelegate](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionViewDelegateFlowLayout_protocol/Reference/Reference.html)方法 collectionView:layout:referenceSizeForHeaderInSection 返回的 CGRect 的高度值：

# javascript - 谷歌地图标记组和信息窗口标签

> ID：13882066
> 
> 赞同：0
> 
> 时间：2012-12-14T15:56:34.680
> 
> 标签：javascript, google-maps, google-maps-api-3

我对此进行了一些研究，但似乎找不到任何可用的代码来解决我需要在我的谷歌地图上发生的事情。我有一个带有数据库信息的 XML 文件，谷歌地图使用该文件将事件和位置的标记放在谷歌地图上，但有些事件在同一位置的不同日期/时间，因此被该站点的下一个标记覆盖.

似乎对此最好的方法是一个选项卡式信息窗口，其中事件列为选项卡。我发现的另一个想法是爆炸标记然后能够从那里选择它们，但是当前的蜘蛛代码在视觉上似乎有点杂乱无章。

是否有任何建议或链接到一些 Java 脚本做这些事情？谢谢！

我想出的方法（但可能不知道所需的所有代码）是在制作标记时检查另一个标记是否具有相同的 LatLng，然后向该标记添加一个选项卡。我认为这将是一个 if/else 语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:59:01.010

您最好的方法是有 2 个表。

表 1\. 带有 ID [**（主键）**](http://dev.mysql.com/doc/refman/5.5/en/optimizing-primary-keys.html)和 lat/lng 等的位置

表 2\. 使用 ID（外键）和事件、日期链接到位置 ID 的事件。

这将使您在每个位置只能看到 1 个标记。对于选项卡式信息窗口，请参阅[**Google 演示**](http://gmaps-samples-v3.googlecode.com/svn/trunk/infowindow/tabs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:13:51.800

Marker clusterer 让您定义标记集群客户端。但我觉得你需要一个更复杂的解决方案，比如邻近搜索或 Harvesine 公式。

# html - 使用纯 CSS 的两列布局

> ID：13882068
> 
> 赞同：2
> 
> 时间：2012-12-14T15:56:41.017
> 
> 标签：html, css

在一个更大的固定宽度的两列块内有名为 a、b、c、d 的块。

![布局](../Images/097d14217e49efdbd5b6c9e3a8b4959b.png)

我想把d留到c和a以下，可以用纯CSS来完成吗？

我尝试过的，

CSS：

```
.wrapper {
    border: 1px dotted #111;
    width: 360px;
    padding: 20px;
    float: left;
}

.rectangle {
    display: inline-block;
    float: left;
    border: 1px solid #333;
    min-height: 100px;
    width: 178px;
}

#a {
    height: 248px;
}

#b {
    height: 148px;
}

#c {
    height: 198px;
}

#d {
    height: 98px;
} 
```

HTML：

```
<div class="wrapper">
<div id="a" class="rectangle">a</div>
<div id="b" class="rectangle">b</div>
<div id="c" class="rectangle">c</div>
<div id="d" class="rectangle">d</div>
</div>​ 
```

[http://jsfiddle.net/imom0/E7GYR/1/](http://jsfiddle.net/imom0/E7GYR/1/)

为了简单起见，我不喜欢使用 JavaScript 或[masonry](http://desandro.com/resources/jquery-masonry)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:59:51.660

尝试让正确的 div正确*浮动*：http : [//jsfiddle.net/E7GYR/7/](http://jsfiddle.net/E7GYR/7/)

* * *

HTML：

```
<div class="wrapper">
<div id="a" class="rectangle left">a</div>
<div id="b" class="rectangle right">b</div>
<div id="c" class="rectangle right">c</div>
<div id="d" class="rectangle left">d</div>
</div>​ 
```

CSS：

```
.wrapper {
    border: 1px dotted #111;
    width: 360px;
    padding: 20px;
    float: left;
}

.rectangle {
    display: inline-block;
    border: 1px solid #333;
    min-height: 100px;
    width: 178px;
}

.left
{
    float:left;       
}

.right
{
    float:right
}

#a {
    height: 248px;
}

#b {
    height: 148px;
}

#c {
    height: 198px;
}

#d {
    height: 98px;
}
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:05:24.630

您可以[`column-count`](https://developer.mozilla.org/en-US/docs/CSS/column-count)像这样使用 CSS 属性：

```
.wrapper {
    border: 1px dotted #111;
    width: 460px;
    padding: 20px;
    float: left;
    column-count:2;
}

.rectangle {
    display: inline-block;
    border: 1px solid #333;
    min-height: 100px;
    width: 170px; 
} 
```

并将您的 HTML 重组为：

```
<div class="wrapper">
<div id="a" class="rectangle">a</div>
<div id="d" class="rectangle">d</div>
<div id="b" class="rectangle">b</div>
<div id="c" class="rectangle">c</div>
</div> 
```

`column-count`大多数浏览器都支持相应的供应商前缀。有关更多信息，请参阅[caniuse](http://caniuse.com/#feat=multicolumn)。

[可以在这里找到一个示例小提琴。](http://jsfiddle.net/E7GYR/8/)

# jquery - jQuery 可拖动和 -webkit-transform: scale();

> ID：13882070
> 
> 赞同：7
> 
> 时间：2012-12-14T15:56:46.097
> 
> 标签：jquery, draggable, webkit-transform

我有一种情况，里面`div`有可拖动的项目。但是，当`div`使用 缩放父级时`-webkit-transform`，draggable 显然会停止正常工作。

我在[这里](http://jsfiddle.net/vMaXm/)重现了这个场景。

如您所见，可拖动项相对于文档移动，即使父项的比例完全不同。

我将比例（`1.5`在示例中）作为 JS 中的变量，所以我可以使用它，但是在哪里呢？我需要将拖动距离除以比例，对吗？我在哪里可以做到这一点？

**编辑：**我尝试将函数设置为`drag`-event，但无法弄清楚如何实际更改拖动距离。

**Edit2：**我挖掘了 jQuery UI 源，似乎没有办法从事件中做到这一点`drag`：

```
if(this._trigger('drag', event, ui) === false) {
    this._mouseUp({});
    return false;
} 
```

如您所见，回调函数的返回值没有以任何方式存储。*回调触发后*，元素的位置会更改，因此更改回调中的 CSS 不起作用。

您可以通过使用此字符串的浏览器内搜索在[此处](http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.js)查看相关代码：

```
_mouseDrag: function(event, noPropagation) { 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-15T10:20:00.650

由于我对 JavaScript 的经验很少，我没有意识到回调实际上可以修改位置，即使它没有`return`任何作用。这是因为在 JS 中，参数显然是默认通过引用传递的。

这是一个工作代码：

```
// Couldn't figure out a way to use the coordinates
// that jQuery also stores, so let's record our own.
var click = {
    x: 0,
    y: 0
};

$('.draggable').draggable({

    start: function(event) {
        click.x = event.clientX;
        click.y = event.clientY;
    },

    drag: function(event, ui) {

        // This is the parameter for scale()
        var zoom = 1.5;

        var original = ui.originalPosition;

        // jQuery will simply use the same object we alter here
        ui.position = {
            left: (event.clientX - click.x + original.left) / zoom,
            top:  (event.clientY - click.y + original.top ) / zoom
        };

    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-16T18:12:35.353

我知道我的答案来得太晚了，这个问题是 8 年前发布的，但我昨天确实遇到了，我在网上找不到任何解决方案。

这是我在[GitHub 上的解决方案](https://github.com/laith7ussein/normalize_ui_position)

```
var element_inside_the_scaled_container = $('#element');

$(element_inside_the_scaled_container).draggable({

    drag: function (event, ui) {

        var constants = normalize_ui_position('#elem_container', UI);

        console.log(constants); // They could be useful!

    }

}); 
```

我调用的函数在我的[github上可用](https://github.com/laith7ussein/normalize_ui_position)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T16:22:14.897

我认为您需要 Transformable (http://plugins.jquery.com/project/transformable) jQuery 插件，以便“规范化”WebKit 缩放。然后拖动将像在 Firefox 中一样工作。

这是插件 - [http://flin.org/js/jquery.transformable.js](http://flin.org/js/jquery.transformable.js)。我认为它应该可以解决您的问题。这是我的代码版本：http: [//jsfiddle.net/vMaXm/4/](http://jsfiddle.net/vMaXm/4/)

```
$("#parent").setTransform("scalex", 1.5);
//$("#parent").setTransform("scaley", 1.5);
$('.draggable').draggable({ containment: "parent" }); 
```

​</p>

但是，此时，如果我取消注释中间行，我会遇到您报告的相同问题。

# python - 如何在 GTK3 中对 GtkTreeView 进行拖放和排序？

> ID：13882076
> 
> 赞同：15
> 
> 时间：2012-12-14T15:57:05.570
> 
> 标签：python, gtk, pygtk, porting, gtk3

我正在将用于处理有向无环图的库[liblarch从 PyGTK (GTK2) 移植到 PyGObject 内省 (GTK3)。](https://github.com/getting-things-gnome/liblarch)我遇到了 GtkTreeView 的问题。

使用 liblarch 的应用程序需要按列对 GtkTreeView 进行排序，但同时，用户可以拖放行，将一行移动到另一行下。为此，我必须手动处理`dnd_data_get()`，`dnd_data_receive()`这完全可以。

在 PyGTK 下工作的 GtkTreeView 有最小的设置。行已排序，用户可以移动行。

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import gtk

window = gtk.Window()
window.set_size_request(300, 200)
window.connect('delete_event', lambda w,e: gtk.main_quit())

# Define Liblarch Tree

store = gtk.TreeStore(str, str)
store.insert(None, -1, ["A", "Task A"])
store.insert(None, -1, ["B", "Task B"])
store.insert(None, -1, ["C", "Task C"])
d_parent = store.insert(None, -1, ["D", "Task D"])
store.insert(d_parent, -1, ["E", "Task E"])

# Define TreeView in similar way as it happens in GTG/Liblarch_gtk
tv = gtk.TreeView()

col = gtk.TreeViewColumn()
col.set_title("Title")
render_text = gtk.CellRendererText()
col.pack_start(render_text, expand=True)
col.add_attribute(render_text, 'markup', 1)
col.set_resizable(True)
col.set_expand(True)
col.set_sort_column_id(0)
tv.append_column(col)
tv.set_property("expander-column", col)

treemodel = store

def _sort_func(model, iter1, iter2):
    """ Sort two iterators by function which gets node objects.
    This is a simple wrapper which prepares node objects and then
    call comparing function. In other case return default value -1
    """
    node_a = model.get_value(iter1, 0)
    node_b = model.get_value(iter2, 0)
    if node_a and node_b:
        sort = cmp(node_a, node_b)
    else:
        sort = -1
    return sort

treemodel.set_sort_func(1, _sort_func)
tv.set_model(treemodel)

def on_child_toggled(treemodel2, path, iter, param=None):
    """ Expand row """
    if not tv.row_expanded(path):
        tv.expand_row(path, True)

treemodel.connect('row-has-child-toggled', on_child_toggled)

tv.set_search_column(1)
tv.set_property("enable-tree-lines", False)
tv.set_rules_hint(False)

#### Drag and drop stuff

dnd_internal_target = ''
dnd_external_targets = {}

def on_drag_fail(widget, dc, result):
    print "Failed dragging", widget, dc, result

def __init_dnd():
    """ Initialize Drag'n'Drop support

    Firstly build list of DND targets:
        * name
        * scope - just the same widget / same application
        * id

    Enable DND by calling enable_model_drag_dest(), 
    enable_model-drag_source()

    It didnt use support from gtk.Widget(drag_source_set(),
    drag_dest_set()). To know difference, look in PyGTK FAQ:
    http://faq.pygtk.org/index.py?file=faq13.033.htp&req=show
    """
    #defer_select = False

    if dnd_internal_target == '':
        error = 'Cannot initialize DND without a valid name\n'
        error += 'Use set_dnd_name() first'
        raise Exception(error)

    dnd_targets = [(dnd_internal_target, gtk.TARGET_SAME_WIDGET, 0)]
    for target in dnd_external_targets:
        name = dnd_external_targets[target][0]
        dnd_targets.append((name, gtk.TARGET_SAME_APP, target))

    tv.enable_model_drag_source( gtk.gdk.BUTTON1_MASK,
        dnd_targets, gtk.gdk.ACTION_DEFAULT | gtk.gdk.ACTION_MOVE)

    tv.enable_model_drag_dest(\
        dnd_targets, gtk.gdk.ACTION_DEFAULT | gtk.gdk.ACTION_MOVE)

def on_drag_data_get(treeview, context, selection, info, timestamp):
    """ Extract data from the source of the DnD operation.

    Serialize iterators of selected tasks in format 
    <iter>,<iter>,...,<iter> and set it as parameter of DND """
    print "on_drag_data_get(", treeview, context, selection, info, timestamp

    treeselection = treeview.get_selection()
    model, paths = treeselection.get_selected_rows()
    iters = [model.get_iter(path) for path in paths]
    iter_str = ','.join([model.get_string_from_iter(iter) for iter in iters])
    selection.set(dnd_internal_target, 0, iter_str)
    print "Sending", iter_str

def on_drag_data_received(treeview, context, x, y, selection, info,\
                          timestamp):
    """ Handle a drop situation.

    First of all, we need to get id of node which should accept
    all draged nodes as their new children. If there is no node,
    drop to root node.

    Deserialize iterators of dragged nodes (see self.on_drag_data_get())
    Info parameter determines which target was used:
        * info == 0 => internal DND within this TreeView
        * info > 0 => external DND

    In case of internal DND we just use Tree.move_node().
    In case of external DND we call function associated with that DND
    set by self.set_dnd_external()
    """
    print "on_drag_data_received", treeview, context, x, y, selection, info, timestamp

    model = treeview.get_model()
    destination_iter = None
    destination_tid = None
    drop_info = treeview.get_dest_row_at_pos(x, y)
    if drop_info:
        path, position = drop_info
        destination_iter = model.get_iter(path)
        if destination_iter:
            destination_tid = model.get_value(destination_iter, 0)

    # Get dragged iter as a TaskTreeModel iter
    # If there is no selected task (empty selection.data), 
    # explictly skip handling it (set to empty list)
    if selection.data == '':
        iters = []
    else:
        iters = selection.data.split(',')

    dragged_iters = []
    for iter in iters:
        print "Info", info
        if info == 0:
            try:
                dragged_iters.append(model.get_iter_from_string(iter))
            except ValueError:
                #I hate to silently fail but we have no choice.
                #It means that the iter is not good.
                #Thanks shitty gtk API for not allowing us to test the string
                print "Shitty iter", iter
                dragged_iter = None

        elif info in dnd_external_targets and destination_tid:
            f = dnd_external_targets[info][1]

            src_model = context.get_source_widget().get_model()
            dragged_iters.append(src_model.get_iter_from_string(iter))

    for dragged_iter in dragged_iters:
        if info == 0:
            if dragged_iter and model.iter_is_valid(dragged_iter):
                dragged_tid = model.get_value(dragged_iter, 0)
                try:
                    row = []
                    for i in range(model.get_n_columns()):
                        row.append(model.get_value(dragged_iter, i))
                    #tree.move_node(dragged_tid, new_parent_id=destination_tid)
                    print "move_after(%s, %s) ~ (%s, %s)" % (dragged_iter, destination_iter, dragged_tid, destination_tid)
                    #model.move_after(dragged_iter, destination_iter)
                    model.insert(destination_iter, -1, row)
                    model.remove(dragged_iter)
                except Exception, e:
                    print 'Problem with dragging: %s' % e
        elif info in dnd_external_targets and destination_tid:    
            source = src_model.get_value(dragged_iter,0)
            # Handle external Drag'n'Drop
            f(source, destination_tid)

dnd_internal_target = 'gtg/task-iter-str'
__init_dnd()
tv.connect('drag_data_get', on_drag_data_get)
tv.connect('drag_data_received', on_drag_data_received)
tv.connect('drag_failed', on_drag_fail)

window.add(tv)
window.show_all()

tv.expand_all()
gtk.main()

# vim: tabstop=4 expandtab shiftwidth=4 softtabstop=4 
```

我将此脚本移植到 PyGObject (GTK3) 中。我的代码：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

from gi.repository import Gtk, Gdk

window = Gtk.Window()
window.set_size_request(300, 200)
window.connect('delete_event', lambda w,e: Gtk.main_quit())

# Define Liblarch Tree

store = Gtk.TreeStore(str, str)
store.insert(None, -1, ["A", "Task A"])
store.insert(None, -1, ["B", "Task B"])
store.insert(None, -1, ["C", "Task C"])
d_parent = store.insert(None, -1, ["D", "Task D"])
store.insert(d_parent, -1, ["E", "Task E"])

# Define TreeView in similar way as it happens in GTG/Liblarch_gtk
tv = Gtk.TreeView()

col = Gtk.TreeViewColumn()
col.set_title("Title")
render_text = Gtk.CellRendererText()
col.pack_start(render_text, expand=True)
col.add_attribute(render_text, 'markup', 1)
col.set_resizable(True)
col.set_expand(True)
col.set_sort_column_id(0)
tv.append_column(col)
tv.set_property("expander-column", col)

treemodel = store

def _sort_func(model, iter1, iter2):
    """ Sort two iterators by function which gets node objects.
    This is a simple wrapper which prepares node objects and then
    call comparing function. In other case return default value -1
    """
    node_a = model.get_value(iter1, 0)
    node_b = model.get_value(iter2, 0)
    if node_a and node_b:
        sort = cmp(node_a, node_b)
    else:
        sort = -1
    return sort

treemodel.set_sort_func(1, _sort_func)
tv.set_model(treemodel)

def on_child_toggled(treemodel2, path, iter, param=None):
    """ Expand row """
    if not tv.row_expanded(path):
        tv.expand_row(path, True)

treemodel.connect('row-has-child-toggled', on_child_toggled)

tv.set_search_column(1)
tv.set_property("enable-tree-lines", False)
tv.set_rules_hint(False)

#### Drag and drop stuff

dnd_internal_target = ''
dnd_external_targets = {}

def on_drag_fail(widget, dc, result):
    print "Failed dragging", widget, dc, result

def __init_dnd():
    """ Initialize Drag'n'Drop support

    Firstly build list of DND targets:
        * name
        * scope - just the same widget / same application
        * id

    Enable DND by calling enable_model_drag_dest(), 
    enable_model-drag_source()

    It didnt use support from Gtk.Widget(drag_source_set(),
    drag_dest_set()). To know difference, look in PyGTK FAQ:
    http://faq.pygtk.org/index.py?file=faq13.033.htp&req=show
    """
    #defer_select = False

    if dnd_internal_target == '':
        error = 'Cannot initialize DND without a valid name\n'
        error += 'Use set_dnd_name() first'
        raise Exception(error)

    dnd_targets = [(dnd_internal_target, Gtk.TargetFlags.SAME_WIDGET, 0)]
    for target in dnd_external_targets:
        name = dnd_external_targets[target][0]
        dnd_targets.append((name, Gtk.TARGET_SAME_APP, target))

    tv.enable_model_drag_source( Gdk.ModifierType.BUTTON1_MASK,
        dnd_targets, Gdk.DragAction.DEFAULT | Gdk.DragAction.MOVE)

    tv.enable_model_drag_dest(\
        dnd_targets, Gdk.DragAction.DEFAULT | Gdk.DragAction.MOVE)

def on_drag_data_get(treeview, context, selection, info, timestamp):
    """ Extract data from the source of the DnD operation.

    Serialize iterators of selected tasks in format 
    <iter>,<iter>,...,<iter> and set it as parameter of DND """
    print "on_drag_data_get(", treeview, context, selection, info, timestamp

    treeselection = treeview.get_selection()
    model, paths = treeselection.get_selected_rows()
    iters = [model.get_iter(path) for path in paths]
    iter_str = ','.join([model.get_string_from_iter(iter) for iter in iters])
    selection.set(dnd_internal_target, 0, iter_str)
    print "Sending", iter_str

def on_drag_data_received(treeview, context, x, y, selection, info,\
                          timestamp):
    """ Handle a drop situation.

    First of all, we need to get id of node which should accept
    all draged nodes as their new children. If there is no node,
    drop to root node.

    Deserialize iterators of dragged nodes (see self.on_drag_data_get())
    Info parameter determines which target was used:
        * info == 0 => internal DND within this TreeView
        * info > 0 => external DND

    In case of internal DND we just use Tree.move_node().
    In case of external DND we call function associated with that DND
    set by self.set_dnd_external()
    """
    print "on_drag_data_received", treeview, context, x, y, selection, info, timestamp

    model = treeview.get_model()
    destination_iter = None
    destination_tid = None
    drop_info = treeview.get_dest_row_at_pos(x, y)
    if drop_info:
        path, position = drop_info
        destination_iter = model.get_iter(path)
        if destination_iter:
            destination_tid = model.get_value(destination_iter, 0)

    # Get dragged iter as a TaskTreeModel iter
    # If there is no selected task (empty selection.data), 
    # explictly skip handling it (set to empty list)
    if selection.data == '':
        iters = []
    else:
        iters = selection.data.split(',')

    dragged_iters = []
    for iter in iters:
        print "Info", info
        if info == 0:
            try:
                dragged_iters.append(model.get_iter_from_string(iter))
            except ValueError:
                #I hate to silently fail but we have no choice.
                #It means that the iter is not good.
                #Thanks shitty Gtk API for not allowing us to test the string
                print "Shitty iter", iter
                dragged_iter = None

        elif info in dnd_external_targets and destination_tid:
            f = dnd_external_targets[info][1]

            src_model = context.get_source_widget().get_model()
            dragged_iters.append(src_model.get_iter_from_string(iter))

    for dragged_iter in dragged_iters:
        if info == 0:
            if dragged_iter and model.iter_is_valid(dragged_iter):
                dragged_tid = model.get_value(dragged_iter, 0)
                try:
                    row = []
                    for i in range(model.get_n_columns()):
                        row.append(model.get_value(dragged_iter, i))
                    #tree.move_node(dragged_tid, new_parent_id=destination_tid)
                    print "move_after(%s, %s) ~ (%s, %s)" % (dragged_iter, destination_iter, dragged_tid, destination_tid)
                    #model.move_after(dragged_iter, destination_iter)
                    model.insert(destination_iter, -1, row)
                    model.remove(dragged_iter)
                except Exception, e:
                    print 'Problem with dragging: %s' % e
        elif info in dnd_external_targets and destination_tid:    
            source = src_model.get_value(dragged_iter,0)
            # Handle external Drag'n'Drop
            f(source, destination_tid)

dnd_internal_target = 'gtg/task-iter-str'
__init_dnd()
tv.connect('drag_data_get', on_drag_data_get)
tv.connect('drag_data_received', on_drag_data_received)
tv.connect('drag_failed', on_drag_fail)

window.add(tv)
window.show_all()

tv.expand_all()
Gtk.main()

# vim: tabstop=4 expandtab shiftwidth=4 softtabstop=4 
```

我无法`dnd_data_receive()`正确处理未引发或未收到数据的情况。它总是因以下回调+其参数而失败：

```
Failed dragging <TreeView object at 0xeb4370 (GtkTreeView at 0xf742a0)> <gtk.gdk.X11DragContext object at 0xf351e0 (GdkX11DragContext at 0xf96ca0)> <enum GTK_DRAG_RESULT_NO_TARGET of type GtkDragResult> 
```

我的问题：**如何将第一个脚本移植到 PyGObject (GTK3) 以便可以对 GtkTreeView 进行排序并同时拖放行？**如何更改处理拖放回调以正确处理拖放？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T08:01:57.347

首先，您得到的错误似乎与 PyGObject 的版本有关。在使用最新的 Ubuntu 13.04 beta 重新安装我的笔记本电脑之前，我确实重现了类似的错误信息。但升级后，错误回调变为类似

```
on_drag_data_get( <TreeView object at 0x1765870 (GtkTreeView at 0x19120a0)> <gtk.gdk.X11DragContext object at 0x1765aa0 (GdkX11DragContext at 0x1988820)> <GtkSelectionData at 0x7fffb106b760> 0 21962912
Traceback (most recent call last):
  File "dnd_gtk3_org.py", line 116, in on_drag_data_get
    selection.set(dnd_internal_target, 0, iter_str)
  File "/usr/lib/python2.7/dist-packages/gi/types.py", line 113, in function
    return info.invoke(*args, **kwargs)
TypeError: argument type: Expected Gdk.Atom, but got str
on_drag_data_received <TreeView object at 0x1765870 (GtkTreeView at 0x19120a0)> <gtk.gdk.X11DragContext object at 0x1765be0 (GdkX11DragContext at 0x1988940)> 45 77 <GtkSelectionData at 0x7fffb106b6e0> 0 21962912
Traceback (most recent call last):
  File "dnd_gtk3_org.py", line 151, in on_drag_data_received
    if selection.data == '':
AttributeError: 'SelectionData' object has no attribute 'data' 
```

只有两个小问题：

*   似乎的第一个参数`SelectionData.set()`只能是`Gtk.gdk.Atom`但不能是指定它的字符串，如在 pygtk 中。
*   `SelectionData`没有`data`属性，但有一个`get_data()`方法。

下面列出的工作代码片段

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

from gi.repository import Gtk, Gdk

window = Gtk.Window()
window.set_size_request(300, 200)
window.connect('delete_event', Gtk.main_quit)

# Define Liblarch Tree

store = Gtk.TreeStore(str, str)
store.insert(None, -1, ["A", "Task A"])
store.insert(None, -1, ["B", "Task B"])
store.insert(None, -1, ["C", "Task C"])
d_parent = store.insert(None, -1, ["D", "Task D"])
store.insert(d_parent, -1, ["E", "Task E"])

# Define TreeView in similar way as it happens in GTG/Liblarch_gtk
tv = Gtk.TreeView()

col = Gtk.TreeViewColumn()
col.set_title("Title")
render_text = Gtk.CellRendererText()
col.pack_start(render_text, expand=True)
col.add_attribute(render_text, 'markup', 1)
col.set_resizable(True)
col.set_expand(True)
col.set_sort_column_id(0)
tv.append_column(col)
tv.set_property("expander-column", col)

treemodel = store

def _sort_func(model, iter1, iter2):
    """ Sort two iterators by function which gets node objects.
    This is a simple wrapper which prepares node objects and then
    call comparing function. In other case return default value -1
    """
    node_a = model.get_value(iter1, 0)
    node_b = model.get_value(iter2, 0)
    if node_a and node_b:
        sort = cmp(node_a, node_b)
    else:
        sort = -1
    return sort

treemodel.set_sort_func(1, _sort_func)
tv.set_model(treemodel)

def on_child_toggled(treemodel2, path, iter, param=None):
    """ Expand row """
    if not tv.row_expanded(path):
        tv.expand_row(path, True)

treemodel.connect('row-has-child-toggled', on_child_toggled)

tv.set_search_column(1)
tv.set_property("enable-tree-lines", False)
tv.set_rules_hint(False)

#### Drag and drop stuff

dnd_internal_target = ''
dnd_external_targets = {}

def on_drag_fail(widget, dc, result):
    print "Failed dragging", widget, dc, result

def __init_dnd():
    """ Initialize Drag'n'Drop support

    Firstly build list of DND targets:
        * name
        * scope - just the same widget / same application
        * id

    Enable DND by calling enable_model_drag_dest(), 
    enable_model-drag_source()

    It didnt use support from Gtk.Widget(drag_source_set(),
    drag_dest_set()). To know difference, look in PyGTK FAQ:
    http://faq.pygtk.org/index.py?file=faq13.033.htp&req=show
    """
    #defer_select = False

    if dnd_internal_target == '':
        error = 'Cannot initialize DND without a valid name\n'
        error += 'Use set_dnd_name() first'
        raise Exception(error)

    dnd_targets = [(dnd_internal_target, Gtk.TargetFlags.SAME_WIDGET, 0)]
    for target in dnd_external_targets:
        name = dnd_external_targets[target][0]
        dnd_targets.append((name, Gtk.TARGET_SAME_APP, target))

    tv.enable_model_drag_source( Gdk.ModifierType.BUTTON1_MASK,
        dnd_targets, Gdk.DragAction.DEFAULT | Gdk.DragAction.MOVE)

    tv.enable_model_drag_dest(\
        dnd_targets, Gdk.DragAction.DEFAULT | Gdk.DragAction.MOVE)

def on_drag_data_get(treeview, context, selection, info, timestamp):
    """ Extract data from the source of the DnD operation.

    Serialize iterators of selected tasks in format 
    <iter>,<iter>,...,<iter> and set it as parameter of DND """
    print "on_drag_data_get(", treeview, context, selection, info, timestamp

    treeselection = treeview.get_selection()
    model, paths = treeselection.get_selected_rows()
    iters = [model.get_iter(path) for path in paths]
    iter_str = ','.join([model.get_string_from_iter(iter) for iter in iters])
    selection.set(selection.get_target(), 0, iter_str)
    print "Sending", iter_str

def on_drag_data_received(treeview, context, x, y, selection, info,\
                          timestamp):
    """ Handle a drop situation.

    First of all, we need to get id of node which should accept
    all draged nodes as their new children. If there is no node,
    drop to root node.

    Deserialize iterators of dragged nodes (see self.on_drag_data_get())
    Info parameter determines which target was used:
        * info == 0 => internal DND within this TreeView
        * info > 0 => external DND

    In case of internal DND we just use Tree.move_node().
    In case of external DND we call function associated with that DND
    set by self.set_dnd_external()
    """
    print "on_drag_data_received", treeview, context, x, y, selection, info, timestamp

    model = treeview.get_model()
    destination_iter = None
    destination_tid = None
    drop_info = treeview.get_dest_row_at_pos(x, y)
    if drop_info:
        path, position = drop_info
        destination_iter = model.get_iter(path)
        if destination_iter:
            destination_tid = model.get_value(destination_iter, 0)

    # Get dragged iter as a TaskTreeModel iter
    # If there is no selected task (empty selection.data), 
    # explictly skip handling it (set to empty list)
    data = selection.get_data()
    if data == '':
        iters = []
    else:
        iters = data.split(',')

    dragged_iters = []
    for iter in iters:
        print "Info", info
        if info == 0:
            try:
                dragged_iters.append(model.get_iter_from_string(iter))
            except ValueError:
                #I hate to silently fail but we have no choice.
                #It means that the iter is not good.
                #Thanks shitty Gtk API for not allowing us to test the string
                print "Shitty iter", iter
                dragged_iter = None

        elif info in dnd_external_targets and destination_tid:
            f = dnd_external_targets[info][1]

            src_model = context.get_source_widget().get_model()
            dragged_iters.append(src_model.get_iter_from_string(iter))

    for dragged_iter in dragged_iters:
        if info == 0:
            if dragged_iter and model.iter_is_valid(dragged_iter):
                dragged_tid = model.get_value(dragged_iter, 0)
                try:
                    row = []
                    for i in range(model.get_n_columns()):
                        row.append(model.get_value(dragged_iter, i))
                    #tree.move_node(dragged_tid, new_parent_id=destination_tid)
                    print "move_after(%s, %s) ~ (%s, %s)" % (dragged_iter, destination_iter, dragged_tid, destination_tid)
                    #model.move_after(dragged_iter, destination_iter)
                    model.insert(destination_iter, -1, row)
                    model.remove(dragged_iter)
                except Exception, e:
                    print 'Problem with dragging: %s' % e
        elif info in dnd_external_targets and destination_tid:    
            source = src_model.get_value(dragged_iter,0)
            # Handle external Drag'n'Drop
            f(source, destination_tid)

dnd_internal_target = 'gtg/task-iter-str'
__init_dnd()
tv.connect('drag_data_get', on_drag_data_get)
tv.connect('drag_data_received', on_drag_data_received)
tv.connect('drag_failed', on_drag_fail)

window.add(tv)
window.show_all()

tv.expand_all()
Gtk.main()

# vim: tabstop=4 expandtab shiftwidth=4 softtabstop=4 
```

上面的片段与您问题中的片段之间的区别是

```
116c116
<     selection.set(selection.get_target(), 0, iter_str)
---
>     selection.set(dnd_internal_target, 0, iter_str)
151,152c151
<     data = selection.get_data()
<     if data == '':
---
>     if selection.data == '':
155c154
<         iters = data.split(',')
---
>         iters = selection.data.split(',') 
```

`TreeView`另外，另一个线程中的GTK+3版本的拖放还有一个例子： [unresponsive drag and drop in pygobject](https://stackoverflow.com/questions/7661016/unresponsive-drag-and-drop-in-pygobject)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T09:20:31.937

GTG 是一款很棒的软件！但它太慢了，至少在我的电脑上。所以我一直在编写一个 C++ 库，它使用 Gtk::TreeView 显示有向无环图，并且我看了很多 LibLarch 源代码。

据我所知，GTK 的 Python 和 C++ 绑定具有相同的限制，来自 GTK 本身（我曾经查看 GTK 源代码以找到它的确切原因）：如果您转向拖放和排序, 拖放将不起作用。我提供了三件你可以做的事情：

1.  为 GTK 打一个补丁，在启用排序时限制 dnd，而不是完全阻止它

2.  自己实现排序。很简单：首先将数据加载到排序的树视图中。现在，每次用户拖放时，使用排序功能将拖动的行移动到新位置。但是让 GTK 整理一下。

3.  这可以在 2 之外完成，这是一个 GUI 设计问题：在 GtkTreeView 中，您可以在兄弟项目之间插入一个项目，这在排序树中没有多大意义。在 UI 方面，最好只允许删除 ON 行，而不是 BETWEEN。示例：Nautilus 列表视图的工作方式如下。解决方案是覆盖 TreeView drag_data_received() 默认处理程序，或者在可维护性方面更好：从视图中向模型发送提示，告诉模型放置位置是 ON 还是 BEFORE。如果位置是之前，让你的树的 drop_possible() 虚拟覆盖返回 false，然后你看不到树视图的“你可以放在这里”didplay”，因此你得到一个更干净的 GUI。

2 和 3 是我在 C++ 中所做的，你应该能够轻松地在 Python 中做到这一点:)

此外，关于选项 1 的注释：GtktreeView（或者是 GtkTreeStore？我忘了）如果启用排序，则只会阻止任何丢弃。如果有人只是修复了这个问题（你......或我......），或者至少编写了一个派生视图类，我们将拥有一个默认的干净 GUI，用于支持 dnd 的排序树。

# scope - Angularjs，在路由之间传递范围

> ID：13882077
> 
> 赞同：87
> 
> 时间：2012-12-14T15:57:07.917
> 
> 标签：scope, routes, angularjs, controllers

我有一个表格跨越几页的情况（可能不理想，但就是这样）。我想为整个表单设置一个范围，随着您的进行而填写，这样如果用户在步骤之间来回切换，就很容易记住状态。

所以我需要用非常伪代码做：

1.  放`$scope.val = <Some dynamic data>`
2.  单击一个链接并被路由到一个新模板（可能使用相同的控制器）。
3.  `$scope.val`仍应与最后一页上的值相同。

以某种方式为范围持久化数据是解决此问题的正确方法，还是有其他方法？您甚至可以创建一个在路由之间具有持久范围的控制器，当然除了将其保存在数据库中。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-12-14T16:15:34.040

您需要使用服务，因为服务将在您的应用程序的整个生命周期中持续存在。

假设您要保存与用户有关的数据

这是您定义服务的方式：

```
app.factory("user",function(){
        return {};
}); 
```

在您的第一个控制器中：

```
app.controller( "RegistrationPage1Controller",function($scope,user){
    $scope.user = user;
    // and then set values on the object
    $scope.user.firstname = "John";
    $scope.user.secondname = "Smith";
});

app.controller( "RegistrationSecondPageController",function($scope,user){
        $scope.user = user;
        // and then set values on the object
        $scope.user.address = "1, Mars";

    }); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-04T22:37:45.420

该服务将起作用，但仅使用普通作用域和控制器的一种合乎逻辑的方法是设置您的控制器和元素，以便它反映您的模型的结构。特别是，您需要建立父范围的父元素和控制器。表单的各个页面应该驻留在父视图的子视图中。即使子视图更新，父范围仍然存在。

我假设您使用的是[ui-router](https://ui-router.github.io)，因此您可以嵌套命名视图。然后在伪代码中：

```
<div ng-controller="WizardController">
  <div name="stepView" ui-view/>
</div> 
```

然后 WizardController 定义您希望在多页表单（我将其称为“向导”）的步骤中保留的范围变量。然后您的路线将`stepView`仅更新。每个步骤都可以有自己的模板、控制器和范围，但它们的范围在页面之间会丢失。但是 WizardController 中的范围在所有页面中都保留。

要从子控制器更新 WizardController 范围，您需要使用类似于 WizardController 的语法`$scope.$parent.myProp = 'value'`或为每个范围变量定义一个函数`setMyProp`。否则，如果您尝试直接从子控制器设置父范围变量，您最终只会在子控制器本身上创建一个新的范围变量，从而隐藏父变量。

有点难以解释，我为缺乏完整的例子而道歉。基本上，您需要一个父控制器来建立父范围，该范围将保留在表单的所有页面中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-09T03:06:20.690

数据可以通过两种方式在控制器之间传递

1.  `$rootScope`
2.  模型

下面的示例演示了使用模型传递值

**应用程序.js**

```
angular.module('testApp')
  .controller('Controller', Controller)
  .controller('ControllerTwo', ControllerTwo)
  .factory('SharedService', SharedService); 
```

**SharedService.js**

```
function SharedService($rootScope){

 return{
    objA: "value1",
    objB: "value2"
  }
} 
```

//修改控制器A中的值

**控制器.js**

```
function Controller($scope, SharedService){

 $scope.SharedService = SharedService;

 $scope.SharedService.objA = "value1 modified";
} 
```

//访问controllertwo中的值

**ControllerTwo.js**

```
function ControllerTwo($scope, SharedService){

 $scope.SharedService = SharedService;

 console.log("$scope.SharedService.objA"+$scope.SharedService.objA); // Prints "value1 modified"
} 
```

希望这可以帮助。

# linux - GNU find：测试文件大小是否更大/更小 - 等于某个大小

> ID：13882081
> 
> 赞同：14
> 
> 时间：2012-12-14T15:57:11.713
> 
> 标签：linux, find

GNU find 有没有办法找到具有大小`>=`或`<=`特定大小的文件？我只分别找到了`>`, `<`,`==`运算符，例如`-size +1M`, `-size -1M`, `-size 1M`。

在[此](http://www.electrictoolbox.com/find-files-bigger-smaller-size/)博客中，作者建议组合多个`-size`参数，如`find . -type f -size +1M -size -2M`. 但是，这不适用于我的 find (GNU findutils) 4.4.2。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-14T20:15:48.633

由于运算符`<=`在逻辑上等价于`not >`（不大于），因此这两个运算符可以相互交换。在我们的示例中，要查找大小小于或等于 1M 的文件，您可以查找不大于 1M 的文件：`-not -size +1M`.

相同的逻辑可以应用于`>=`使用`not <`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-14T16:01:56.160

以下命令似乎有效：

```
]$  find -version
find (GNU findutils) 4.4.2

find  ~ -type f -size '+1k' -a  -size '-3k' -exec ls -lah '{}' ';' 
```

# ajax - ajax重新加载页面重新加载facebook按钮

> ID：13882089
> 
> 赞同：1
> 
> 时间：2012-12-14T15:57:43.530
> 
> 标签：ajax, facebook, jquery-mobile, twitter

我搜索了堆栈并找到了一些主题，但它们都没有显示完整的代码片段，所以在尝试了几个片段和部分代码段后我仍然处于黑暗中。

有人可以澄清当页面重新加载 ajax 时如何让 jquery mobile + twitter 和 facebook 按钮重新出现？

真的不清楚，或者 twitter 和 facebook api 的变化使其不再工作。

我为 Facebook 做这个

$(document).ajaxComplete(function(){ try{ FB.XFBML.parse(); }catch(ex){} });

但是没有按钮再次出现

# java - 是否可以限制 Java 应用程序中允许的 JRuby 命令？

> ID：13882091
> 
> 赞同：2
> 
> 时间：2012-12-14T15:57:43.723
> 
> 标签：java, security, jruby

我在我的 Java 应用程序中使用 JRuby 来允许用户运行他们的脚本。应用程序正常功能所需的操作集并不大。该脚本应控制 Java 代码中的一些变量，并在执行期间更改流程。

所以我想有机会限制允许的操作数量。说，我不希望用户有权访问文件系统。

```
f = File.new("myfile.txt", "w") 
f.puts( "Hello!" ) 
f.close 
```

这应该被禁止。

我该怎么做这样的设置？我唯一的想法是在启动之前解析用户脚本并将脚本与允许操作的白名单进行比较。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T19:27:35.553

您应该做的是创建允许命令的白名单。如果发现脚本包含不在白名单中的命令，则需要拒绝整个脚本。正如 Andrew Thompson 所指出的，安全管理器是一个很好的额外层，但这并不是安全层的终点。我不认为在沙盒小程序中运行真的会为您带来那么多，因为您仍然必须确定脚本是否有效。

**白名单示例**

通常，当您生成白名单时，您希望用户能够从中选择的选项/命令数量有限，其余的将被丢弃。您将创建一些枚举或最终数据结构（以最大程度地减少其在运行时被恶意程序修改的能力）。如果你希望用户只能选择调用你的函数`foo`而不是`bar`你可以写这样的东西，这完全是原始的，但说明了这个概念：

```
class WhiteList  
{  
     allowedCommands = ["foo"];  
} 
```

在你的主要是这样的：

```
class Main  
{  
     for(Command command in userInput)  
     { 
           if(command not in allowedCommands)  
           {  
                log security message;  
                continue/break
           }  
     }  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:20:42.263

为用户代码安装¹。或者更简单，从沙盒小程序或[JWS](https://stackoverflow.com/tags/java-web-start/info)启动的应用程序运行代码。[`SecurityManager`](http://docs.oracle.com/javase/7/docs/api/java/lang/SecurityManager.html)

1.  > 安全管理器是一个允许应用程序实现安全策略的类。它允许应用程序在执行可能不安全或敏感的操作之前确定该操作是什么以及是否在允许执行该操作的安全上下文中尝试该操作。应用程序可以允许或禁止该操作。

# ruby-on-rails - 在 CentOS 上创建设置 rails 环境时出错

> ID：13882092
> 
> 赞同：1
> 
> 时间：2012-12-14T15:57:45.650
> 
> 标签：ruby-on-rails, ruby, rbenv

我尝试在 CentOS 6.3 中部署 rails 应用程序 3 天，直到现在我都没有成功。我想使用 rbenv，但出现以下错误：

我创建了一个新用户“部署者”并使用它安装了 rbenv。注销并再次登录。当我登录时，我收到此错误：

```
-bash: /home/deployer/.rbenv/bin/rbenv: Permission denied 
```

如果我使用 root 用户安装 rbenv，它会在安装后加载 rbenv，但是当我尝试安装 ruby​​ 时出现错误：

```
$ rbenv install 1.9.3-p125
Downloading yaml-0.1.4.tar.gz...
-> http://dqw8nmjcqpjn7.cloudfront.net/36c852831d02cf90508c29852361d01b
Installing yaml-0.1.4...

BUILD FAILED

Inspect or clean up the working tree at /tmp/ruby-build.20121214131627.11110
Results logged to /tmp/ruby-build.20121214131627.11110.log

Last 10 log lines:
yaml-0.1.4/win32/vs2008/run_parser.vcproj
yaml-0.1.4/win32/vs2008/yaml.vcproj
yaml-0.1.4/win32/vs2008/test_version.vcproj
yaml-0.1.4/win32/vs2008/run_emitter.vcproj
yaml-0.1.4/win32/vs2008/example_reformatter.vcproj
yaml-0.1.4/win32/vs2008/run_loader.vcproj
yaml-0.1.4/win32/vs2008/yamldll.vcproj
yaml-0.1.4/win32/config.h
/tmp/ruby-build.20121214131627.11110/yaml-0.1.4 /tmp/ruby-build.20121214131627.11110 ~
/root/.rbenv/plugins/ruby-build/bin/ruby-build: line 321: ./configure: Permission denied 
```

**编辑**

部署者安装的rbenv权限：

```
drwxr-xr-x.  8 deployer  deployer  4096 Dec 14 13:11 .rbenv 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:06:36.827

首先，检查 /home/deployer/.rbenv 的权限和所有者

在第二个示例中，我认为您正在用户下运行安装。尝试在root下运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:07:59.427

看起来 ~/.rbenv 是由另一个用户创建的

尝试

```
$ sudo chown -R deployer ~deployer/.rbenv 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T00:17:36.737

我得到同样的错误。我认为 yaml 是这里的罪魁祸首。如果我们可以在没有 yaml 的情况下安装 ruby​​，那么稍后再安装 yaml

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-20T13:50:46.477

我收到此错误是因为文件夹已安装`noexec`选项。

该线程的相同解决方案：[https ://stackoverflow.com/a/13973592/740394](https://stackoverflow.com/a/13973592/740394)

# c# - 在 c# 4.0 中从 Json 中检索特定值

> ID：13882093
> 
> 赞同：0
> 
> 时间：2012-12-14T15:58:01.523
> 
> 标签：c#, asp.net, json

我必须从 json 中检索特定值。例如：字符串格式的“id”：“217331368373746”。下面是 json 查询和我访问 id=217331368373746 的代码

```
{
   "id": "191746304265586",
   "albums": {
      "data": [
         {
            "id": "217331368373746",
            "created_time": "2012-03-24T20:53:34+0000"
         }
      ],
      "paging": {
         "next": "https://graph.facebook.com/191746304265586/albums?limit=1&fields=id&after=MjE3MzMxMzY4MzczNzQ2"
      }
   }
} 
```

代码：

```
var jsonalbum = Retrivedata("https://graph.facebook.com/191746304265586?fields=albums.limit(1).fields(id)");
        foreach (var objalbum in jsonalbum["albums"])
        {
            //here what code
        }

    public dynamic Retrivedata(string query)
    {
        var request = WebRequest.Create(query);
        var twitpicResponse = (HttpWebResponse)request.GetResponse();
        var reader = new StreamReader(twitpicResponse.GetResponseStream());
        JavaScriptSerializer js = new JavaScriptSerializer();
        return js.Deserialize<dynamic>(reader.ReadToEnd());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:01:48.270

好像

```
foreach (var objalbum in jsonalbum["albums"]["data"])
{
   var id = objalbum["id"]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:00:19.407

看起来`data`您的列表中也有一个属性（数组），`albums`所以您必须这样做：

```
foreach (var objalbum in jsonalbum["albums"]["data"])
{
   var id = objalbum["id"];
   ...
} 
```

# oracle - JSF/ADF selectOneChoice shortDesc 大小

> ID：13882094
> 
> 赞同：3
> 
> 时间：2012-12-14T15:58:04.550
> 
> 标签：oracle, jsf, oracle-adf, jspx

我创建了一个带有属性绑定的 selectOneChoice。

```
<af:selectOneChoice
        simple="true"
        binding="#{backing_Deletion.nodeRenderer.propBinding['value']}"
        contentStyle="width:500px;"/> 
```

提供来自 Oracle DRM 服务器的`nodeRenderer`shortDesc。问题是在渲染时`shortDesc`只有 8 个字符宽和 70 行高。

有没有办法覆盖这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:28:46.143

此属性的长度必须在模型层中。如果它在那里被指定为 LOV 的最大长度为 8 的提示的一部分，那么它不会显示更多。您可以通过以下方式从模型中获得精度：

```
#{bindings.sampleAttribute.hints.precision} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T06:16:19.210

请删除 contentStyle="width:500px; 并添加 "AFStretchWidth" 样式类

# java - 使用处理程序 / AsyncTask 或类似的来运行网络任务

> ID：13882095
> 
> 赞同：0
> 
> 时间：2012-12-14T15:58:09.127
> 
> 标签：java, android, android-asynctask

我知道发生错误是因为我试图在主线程上进行网络调用，所以我需要使用处理程序或异步任务

但是我似乎无法正确处理

这是我试图开始工作的代码

```
 try {
                // Create a URL for the desired page
                URL url = new URL("http://darkliteempire.gaming.multiplay.co.uk/testdownload.txt");

                // Read all the text returned by the server
                BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
                String str;
                while ((str = in.readLine()) != null) {
                    // str is one line of text; readLine() strips the newline character(s)

                    eventText.setText(str);
                    eventText.setText(in.readLine());
                }
                in.close();
            } catch (MalformedURLException e) {
                Toast.makeText(getBaseContext(), "MalformedURLException", Toast.LENGTH_LONG).show();
            } catch (IOException e) {
                Toast.makeText(getBaseContext(), "IOException", Toast.LENGTH_LONG).show();
            } 
```

我想在单击此按钮时调用它

```
public void onClick(View v) {

if (v.getId() == R.id.update) {
}
} 
```

有没有人能告诉我我应该把第一个位包含在什么中以及如何从 onClick 中调用它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:03:51.220

就像是

```
public class TalkToServer extends AsyncTask<String, String, String> {
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

    @Override
    protected void onProgressUpdate(String... values) {
        super.onProgressUpdate(values);

    }

    @Override
    protected String doInBackground(String... params) {
    //do your work here
        return something;
    }

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
           // do something with data here-display it or send to mainactivity
} 
```

完成所有繁重的工作`doInBackground()`，您可以在其他 3 种方法中更新 UI。

**[这](http://developer.android.com/reference/android/os/AsyncTask.html)**是关于 AsyncTask 的文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:01:45.137

在 onClick 方法中创建并实例化 AsyncTask。将 url 调用的调用（和等待）放在 doOnBackground 方法中，然后对 onPostExecute 中的响应做任何你想做的事情（这又发生在主线程中）。

# javascript - 如何将自己的 javascript 文件添加到 nanoc？

> ID：13882097
> 
> 赞同：6
> 
> 时间：2012-12-14T15:58:23.900
> 
> 标签：javascript, url-routing, haml, nanoc

我再次遇到 nanoc 中的文件问题。这次我想将自定义文件附加`slide.js`到我的博客，但我不能（不知道为什么 - 我的路线可能有问题）。这是我的路线：

```
compile '/js/*/' do
  # don’t filter or layout
end

...

route '/js/*/' do
  /'js'/ + item.identifier.chop + '.js'
end 
```

在`head`我的布局部分中，我放了：（`%script{:type => "text/javascript", :src => "/js/slide.js"}/`是的，它是一个 HAML）。

谁能帮我解决这个问题？将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:40:46.353

好吧，我想我已经解决了：

```
compile '/javascripts/*/' do
  nil
end

...

route '/javascripts/*/' do
    item.identifier.chop + ".js"
end 
```

如果有人知道更好的解决方案，请随时将其放在这里。

# javascript - 从下拉框中添加和选择选项值

> ID：13882100
> 
> 赞同：1
> 
> 时间：2012-12-14T15:58:29.877
> 
> 标签：javascript

我需要您的帮助来创建一个函数，该函数允许我根据下拉框中的给定 var 选择给定的选项名称（使用 javascript），如果该值不存在，则将其添加到下拉列表中，然后选择它。

例子：

```
<html>

<head>

<script type="text/javascript">

function test() {

var option_name_to_look_for = "mangos"

if option_name_to_look_for is listed in the drop down box (drop) then select it

if the option_name_to_look_for is not listed in the drop down box (drop), automatically add it to the drop down list (drop) and select it.

}

</script>

</head>

<body>

<select id="drop" style="width: 200px;">
<option value="0"></option>
<option value="1">apples</option>
<option value="2">oranges</option>
<option value="3">pears</option>
<option value="4">mangos</option>
<option value="5">bananas</option>
<option value="6">kiwis</option>

</select>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:16:33.433

使用 jquery：

```
var found = false;
var search = 'something not in the list';
$("#drop").children().each(function() {
    if($(this).html() == search) {
        found = true;
        $(this).attr('selected', true);
        return;
    }
});
if(!found) {
    var nextValue = $("#drop").children(":last").val() + 1;
    $("#drop").append('<option value="' + nextValue + '">'+search+'</option>');
    $("#drop").children(":last").attr('selected', true);
} 
```

[​http://jsfiddle.net/Zhk5w/1/](http://jsfiddle.net/Zhk5w/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:25:21.940

非 jQuerified 版本！

```
function selectMe(name){
  var select = document.getElementById("drop"),
      options = select.options,
      found = false;

  //Search for it!
  for (var x=0; x<options.length; x++){
    if(options[x].text==name){
      options[x].selected=true;
      found = true;
      break;
    }
  }

  //if it isn't found, add it!
  if(!found){
    var option = document.createElement("option");
    option.text = name;
    option.value = options.length;
    select.appendChild(option);
    option.selected=true;
  }
}

selectMe("mangos"); 
```

# ruby-on-rails - Rails 路由问题，使用 form_for 未定义的 '******_path'

> ID：13882104
> 
> 赞同：0
> 
> 时间：2012-12-14T15:58:49.037
> 
> 标签：ruby-on-rails, resources, namespaces, routes, match

所以，我是 Rails 新手，我正在构建一个需要版本控制的应用程序。[我的问题与这个问题](https://stackoverflow.com/questions/8706774/undefined-method-with-path-while-using-rails-form-for)非常相似，但是，尝试给定的解决方案并没有解决我的问题。

这是我得到的错误：

```
ActionView::Template::Error (undefined method `questions_path' for #<#<Class:0x000000057bd2c0>:0x000000057b00e8>) 
```

这是我的看法：

```
<h1>Create Question </h1>
<%= form_for(@question) do |f| %>
  <div>
    <%= f.label :text %>
    <%= f.text_field :text %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

这是我的控制器：

```
class Api::V1::QuestionsController < Api::V1::ApiController
  inherit_resources

  load_and_authorize_resource :user
  load_and_authorize_resource :through => :user

  def index
    respond_with @questions.unanswered(current_user)
  end

  def new
    @question = Question.new
  end

  def create
    @question = Question.new(params[:question])
    if @question.save
      #render :action => 'new'
    else
      puts @question.text
      puts @question.level
      puts @question.answers.inspect
    end
  end

#other methods...
end 
```

最后，我的路线的当前版本：

```
 namespace :api, :defaults => { :format => 'json' } do
    namespace :v1 do
      resources :users do
        resources :questions, :path => 'questions' do
          collection do
            #get 'new', :to => 'questions#new', :as => :new_api_v1_user_question_path
          end
    end
      end

      resources :questions, :path => 'questions' do
        resources :answers do
          resources :responses
        end
        collection do
          #get 'new', :to => 'questions#new', :as => :new_api_v1_question_path
        end
      end
    end
  end

  match 'api/v1/user/:user_id/questions/new.html', :to => 'api/v1/user/:user_id/questions#new', :as => :new_api_v1_user_question 
```

基本上，我不知道如何用我正在做的命名空间的东西来解决[其他问题。](https://stackoverflow.com/questions/8706774/undefined-method-with-path-while-using-rails-form-for)如您所见，我尝试过使用匹配，我已经注释掉了我尝试使用资源和“收集”的地方，但没有骰子。我混合并匹配了各种各样的东西，要么它给了我我在这里描述的错误，要么是“路线不存在”错误。我什至查看了[有关 routing 的 rails guides](http://guides.rubyonrails.org/routing.html)，但无济于事。挣扎了好几天。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-04T16:23:46.577

最终想通了这一点。在我看来，我必须让 form_for 方法调用看起来像这样：

```
<%= form_for(@question, :url => api_v1_questions_path ) do |f| %> 
```

这解决了我的问题。

# asp.net - 模板化 ASP.NET MVC4 站点

> ID：13882105
> 
> 赞同：1
> 
> 时间：2012-12-14T15:58:54.190
> 
> 标签：asp.net, visual-studio, templates, web-applications

嵌入式 Visual Studio 2012 ASP.NET MVC4 模板不为我们组织中的典型 Web 项目提供必要的默认配置。每次我们开始一个新项目时，我们通常会添加 IoC，放置项目结构，集成 HTML5 样板，KOJS 等。

目前，为了节省我们的时间，我们已经创建了一个包含所有这些初始集成和配置的“标准”解决方案，当我们开始一个新项目时，我们只是将命名空间重命名为一个新的项目名称，然后我们就可以开始了。

这根本不是企业方法，或者至少看起来并非如此。我们如何改进我们使用的这个模板的方法？创建 Visual Studio 模板会更好吗？我认为许多网上商店都面临同样的问题，应该有一个可靠的方法来解决它。

# php - cannot connect and select 2 database in one php

> ID：13882110
> 
> 赞同：0
> 
> 时间：2012-12-14T15:58:59.770
> 
> 标签：php

> **Possible Duplicate:**
> [mysql_fetch_array() expects parameter 1 to be resource, boolean given in select](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

```
<?php 
$con=mysql_connect('localhost','root','');
mysql_selectDb('cms',$con);
$con2=mysql_connect('localhost','root','');
mysql_selectDb('cms2',$con2);
$memberId="Member0001";
$select2=mysql_query("select * from member_register where memberID='$memberId'",$con);
$row2=mysql_fetch_array($select2);
?> 
```

i got a code like above, select 2 database from 1 server, sure the code is right, but it appear

> Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in xxx on line xxx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:02:13.830

There is no need to maintain two connections to the same DB server with the same credentials. You can trivally use

```
SELECT db1.table.member_register, ...

SELECT db2.othertable.somefield, ... 
```

using the same single connection. Two connections would only really be needed if you have to connect using DIFFERENT credentials.

In your case, since you're getting a 'boolean received', your query failed, and you simply assumed it succeeded (NOT a good idea). Try:

```
$select2=mysql_query("...",$con) or die(mysql_error());
                                ^^^^^^^^^^^^^^^^^^^^^^ 
```

to find out WHY the query failed.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:04:00.003

If you're passing the exact same connection details to `mysql_connect`, you'll get the same connection back. It's reusing existing connections. So you only have one connection, and your query fails because you're operating on the wrong database.

Use `... FROM database.table ...` in your queries to work across different databases on the same server.

# android - 来自不扩展 Activity 的类的 startService

> ID：13882111
> 
> 赞同：16
> 
> 时间：2012-12-14T15:59:02.580
> 
> 标签：android, android-activity, service, android-context

我创建了一个扩展 IntentService 的类，我想从一个不是 Activity 的类启动服务，因此，我无权访问 Context 对象。我在文档或网络中找不到这样的示例。是否可以 ？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-14T16:03:45.137

您需要将当前 Activity 上下文传递给非 Activity 类，以便从非 Activity 类启动服务：

```
public class NonActivity {
  public Context context;

  public NonActivity(Context context){
    this.context=context;
  }

  public void startServicefromNonActivity(){
     Intent intent=new Intent(context,yourIntentService.class);
     context.startService(intent);
  }
} 
```

并将当前上下文传递为：

```
public class AppActivity extends Activity {
    NonActivity nonactiityobj;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
                 nonactiityobj=new NonActivity(CuttentActivity.this);
                 //start service here
                 nonactiityobj.startServicefromNonActivity();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T17:41:00.040

使用此代码启动和停止服务

```
public class MyService {

Context context ;

public MyService(Context cont) {
    this.context = context ;
}

public void StartMyService()
{
    Intent i = new Intent(context,YourService.class);
    context.startService(i);
}
public void StopMyService()
{
    Intent i = new Intent(context,YourService.class);
    context.stopService(i);
}
} 
```

这只是创建这个类的对象

```
 MyService mySevice ;
  @Override
  public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);
  myService = new MyService(this);
  //For Startting Service
  myService.StartMyService();

  //For Stopping Service
  myService.StopMyService();
} 
```

# mysql - 如何将多个值存储在mysql用户定义的变量中

> ID：13882113
> 
> 赞同：3
> 
> 时间：2012-12-14T15:59:12.953
> 
> 标签：mysql, variables

如何将多个值存储在 mysql 用户定义的变量中

一般来说 ，

```
select @a:=color from tabex; 
```

`tabex`如下_

```
mysql> select * from tabex;

+----+----------+-------+-----------+
| id | personid | color | color_set |
+----+----------+-------+-----------+
|  1 |        1 | red   | red,white |
|  2 |        1 | white | red,white |
|  3 |        2 | blue  | NULL      |
|  4 |        2 | red   | NULL      |
+----+----------+-------+-----------+ 
```

然后如果我执行查询

```
mysql> select @a;

+------+
| @a   |
+------+
| red  |
+------+ 
```

我得到了上述结果，但实际上我想要以下结果

```
+-------+
|  @a   |
+-------+
| red   |
| white |
| blue  |
| red   |
+-------+ 
```

你能请任何人告诉我，这在 mysql 中是否可能。

只是我的问题是如何将多个值存储在 mysql 用户定义的变量中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-19T11:48:24.553

您可以使用以下句子将所有结果作为字符串获取

```
select GROUP_CONCAT(color) from tabex; 
```

点击[这里](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)或更多信息

# java - Java - ExecutorService 用于固定数量的任务

> ID：13882115
> 
> 赞同：1
> 
> 时间：2012-12-14T15:59:18.777
> 
> 标签：java, concurrency, executorservice, executor

我想使用`ExecutorService`Java 实现以下行为。我有大量任务要完成，这些任务都可以并行完成。我想通过以下方式从我的主线程中安排 N 个任务：

*   如果活动任务的数量是 < N => 调度新任务（执行器服务已经这样做了）
*   否则，在主线程上阻塞，直到其中一个任务完成 => 与将 N 个第一个任务存储在队列中然后将第一个任务出队并在其上调用 get() 几乎相同）

有没有办法像上面所说的那样调整 ExecutorService ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:06:16.213

使用由 SynchronousQueue 构造的 N 个线程的 ThreadPoolExecutor。每次将任务提交到线程池时，主线程都会被同步队列阻塞，直到池中的线程从队列中取出任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:36:14.797

您可以将 N 个任务提交给 ExecutorCompletionService，然后在循环中：

```
Future<?> f = executor.take(); //blocks until one task completes
executor.submit(nextTask()); 
```

通过这样做，您可以确保不再有 N 个任务同时在执行程序中排队。

# android - 公共 api com.android.internal.r Android numberpicker

> ID：13882116
> 
> 赞同：2
> 
> 时间：2012-12-14T15:59:20.593
> 
> 标签：android, launcher

嗨，我正在制作一个启动器，一切都很好，但我想为启动器添加一些选项，我需要一个数字选择器，所以我以投石机的来源为例

但这给了我 1 错误我无法导入 com.android.internal.R
com.android.r 是私有的但我不知道公共 api 来修复它希望有人可以帮助我这是代码

```
public class NumberPickerPreference extends DialogPreference {
   private int mMin, mMax, mDefault;

    private String mMaxExternalKey, mMinExternalKey;

    private NumberPicker mNumberPicker;

    public NumberPickerPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
        TypedArray dialogType = context.obtainStyledAttributes(attrs,
                com.android.internal.R.styleable.DialogPreference, 0, 0);
        TypedArray numberPickerType = context.obtainStyledAttributes(attrs,
                R.styleable.NumberPickerPreference, 0, 0);

       mMaxExternalKey =      numberPickerType.getString(R.styleable.NumberPickerPreference_maxExternal);
        mMinExternalKey =   numberPickerType.getString(R.styleable.NumberPickerPreference_minExternal);

        mMax = numberPickerType.getInt(R.styleable.NumberPickerPreference_max, 5);
        mMin = numberPickerType.getInt(R.styleable.NumberPickerPreference_min, 0);

        mDefault =  dialogType.getInt(com.android.internal.R.styleable.Preference_defaultValue, mMin);

        dialogType.recycle();
        numberPickerType.recycle();
    }

    @Override
    protected View onCreateDialogView() {
        int max = mMax;
        int min = mMin;

        // External values
        if (mMaxExternalKey != null) {
            max = getSharedPreferences().getInt(mMaxExternalKey, mMax);
        }
        if (mMinExternalKey != null) {
            min = getSharedPreferences().getInt(mMinExternalKey, mMin);
         }

         LayoutInflater inflater =
                (LayoutInflater)     getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = inflater.inflate(R.layout.number_picker_dialog, null);

       mNumberPicker = (NumberPicker) view.findViewById(R.id.number_picker);

       // Initialize state
       mNumberPicker.setMaxValue(max);
       mNumberPicker.setMinValue(min);
       mNumberPicker.setValue(getPersistedInt(mDefault));
       mNumberPicker.setWrapSelectorWheel(false);

    // No keyboard popup
        EditText textInput = (EditText)   NumberPicker.findViewById(com.android.internal.R.id.numberpicker_input);
        textInput.setCursorVisible(false);
        textInput.setFocusable(false);
        textInput.setFocusableInTouchMode(false);

         return view;
    }

    @Override
    protected void onDialogClosed(boolean positiveResult) {
        if (positiveResult) {
            persistInt(mNumberPicker.getValue());
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-29T10:00:38.107

尝试

```
int id = Resources.getSystem().getIdentifier("numberpicker_input", "id", "android"); 
```

您无法在编译时访问 com.android.internal.R 的 id，但您可以在运行时访问内部资源并通过名称获取资源。您应该知道，这比直接访问要慢，并且不能保证内部资源将在未来的 android 版本中可用。

# ios - genstrings 可以在自定义#defines 上工作吗？

> ID：13882121
> 
> 赞同：6
> 
> 时间：2012-12-14T15:59:31.813
> 
> 标签：ios, localization, genstrings

iOS 用于创建本地化字符串的宏在与`genstrings`. 但是，我想在其中一个宏之上创建自己的#define，如下所示：

```
#define MyLocalizedStringWithDefaultValue(key, tbl, val, comment) \
NSLocalizedStringWithDefaultValue(key, tbl, [NSBundle mainBundle], val, comment)
#endif 
```

本质上，我总是想反对主捆绑，所以我觉得没有必要每次都输入它。这在代码中效果很好，但`genstrings`不接受我的宏。我能做些什么来让它接收我的自定义宏吗？我在手册页上看到有一个看起来像我正在尝试做的常规参数，但我无法让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:03:13.783

键入`genstrings`以查看帮助文本。注意`-s substring`选项。你想要这样的东西：

```
genstrings -s MyLocalizedString -o someDir *.m 
```

# google-apps-script - 无法使 LockService tryLock 失败

> ID：13882123
> 
> 赞同：1
> 
> 时间：2012-12-14T15:59:42.847
> 
> 标签：google-apps-script

我正在使用 LockService 来避免重复操作，但是在测试期间我不能让 tryLock 失败。

假设这段代码几乎同时运行不止一次时应该在 ScriptProperties 中写入错误，但到目前为止还没有。

第二个 App 实例应该在 tryLock 1 秒后失败，而第一个实例正在休眠 15 秒，对吧？

有什么建议么？

```
function doGet() {
  testingLockService(1000, 15000);
  return;
}
function testingLockService(trying, sleeping) {
  var lock = LockService.getPrivateLock();
  var hasMutex = lock.tryLock(trying);
  if (hasMutex == false) { ScriptProperties.setProperty("LockService",new Date().toString()+" tryLock failed"); return; }
  Utilities.sleep(sleeping);
  lock.releaseLock();
  return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:21:13.423

有趣的问题。在玩了一会儿之后，我认为锁定正在起作用，它只是看起来不是因为 Google Apps 脚本似乎不允许并发获取请求，而是将它们排队。通过将锁定测试移动到服务器端，它就可以工作了。

如果您让 get 请求向用户返回某些内容而不是将其放入脚本属性中，这将更容易调试。

以下代码将演示排队的获取请求。测试：发出两个并发请求，并查看返回的时间戳，有趣的是，您会注意到第二个请求在第一个请求的结束时间戳之前不会有一个开始时间戳，无论它们有多接近。所以第二个请求可以完美有效地获得锁。这是代码：

```
function doGet() {
  var app = UiApp.createApplication();

  var tS = new Date();
  var gotLock = testingLockService(0, 5000);
  var tF = new Date();

  var label = app.createLabel(gotLock ? 'Got the lock, and slept' : "Didn't get the lock");
  app.add(label);

  var label = app.createLabel('tS ' + tS.getTime());
  app.add(label);
  var label = app.createLabel('tF ' + tF.getTime());
  app.add(label);
  var label = app.createLabel('t delta ' + (tF - tS));
  app.add(label);

  return app;
}

function testingLockService(trying, sleeping) {
  var lock = LockService.getPrivateLock();
  var hasMutex = lock.tryLock(trying);
  if (!hasMutex) { return false; }
  Utilities.sleep(sleeping);
  lock.releaseLock();
  return true;
} 
```

现在，为了证明锁定确实有效，只需将锁​​定代码移动到服务器端。同样，为了测试，打开两个浏览器窗口并单击两个按钮。这一次你会看到第二个请求获取锁失败并立即返回。

```
function doGet() {
  var app = UiApp.createApplication();
  var serverHandler = app.createServerHandler('doClick');
  var button = app.createButton().setText("click me").addClickHandler(serverHandler);
  app.add(button);
  return app;
}

function doClick() {
  var app = UiApp.getActiveApplication();
  // code from here on is identical to previous example
  var tS = new Date();
  var gotLock = testingLockService(0, 5000);
  var tF = new Date();

  var label = app.createLabel(gotLock ? 'Got the lock, and slept' : "Didn't get the lock");
  app.add(label);

  var label = app.createLabel('tS ' + tS.getTime());
  app.add(label);
  var label = app.createLabel('tF ' + tF.getTime());
  app.add(label);
  var label = app.createLabel('t delta ' + (tF - tS));
  app.add(label);

  return app;
}

function testingLockService(trying, sleeping) {
  var lock = LockService.getPrivateLock();
  var hasMutex = lock.tryLock(trying);
  if (!hasMutex) { return false; }
  Utilities.sleep(sleeping);
  lock.releaseLock();
  return true;
} 
```

Hopefully that has answered your question on the locking. Though it raises questions in my mind about the get request queueing. Is it only requests from the same user? I would love to hear from someone else if they have any more info on that, although, maybe that belongs in a question on its own.

# uiactivityviewcontroller - UIActivityViewController 邮件分享

> ID：13882124
> 
> 赞同：1
> 
> 时间：2012-12-14T15:59:48.850
> 
> 标签：uiactivityviewcontroller

我在我的项目中使用 UIActivityViewController 在 iOS 6.0 中共享。它显示了`Email Option`. 但是当有 时`No Email Account`，它`does not take me to the settings page`会设置我的帐户，但什么都不做，并在“已完成”布尔标志中返回 NO。此问题的任何想法`how to go to the settings page`或任何解决方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:06:01.293

这就是你为 Twitter 做的事情，你必须进行适当的更改才能将它用于邮件：

```
 if (![TwitterSettings hasAccounts]) {

        //NSLog(@"UnAvailable");
        [TwitterSettings openTwitterAccounts];
    }

//
//  TwitterSettings.m
//
//

#import "TwitterSettings.h"

@implementation TwitterSettings

+ (BOOL)hasAccounts {
    // For clarity
    return [SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter];
}

+ (void)openTwitterAccounts {

    SLComposeViewController *ctrl = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
    if ([ctrl respondsToSelector:@selector(alertView:clickedButtonAtIndex:)]) {
        // Manually invoke the alert view button handler
        [(id <UIAlertViewDelegate>)ctrl alertView:nil
                             clickedButtonAtIndex:kTwitterSettingsButtonIndex];
    }
  //  [ctrl release];
}

@end 
```

# objective-c - 核心数据中使用谓词的关系值

> ID：13882127
> 
> 赞同：0
> 
> 时间：2012-12-14T15:59:52.143
> 
> 标签：objective-c, core-data, nspredicate

首先，我必须为这个愚蠢的问题道歉。不幸的是，在阅读了这么多帖子后，我无法弄清楚如何实施。对此感到抱歉。所以，这是我的问题：我有两个实体，地区和国家。每个地区属于一个国家，每个国家都有几个地区。在我的应用程序中，我选择了一个国家并希望显示其所有地区。为简单起见，国家和地区都具有属性名称，地区具有关系“国家”。现在我必须选择一个国家的所有地区：

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *desc = [[model entitiesByName] objectForKey:@"Region"];
[request setEntity:desc];

NSSortDescriptor *sd = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES];
[request setSortDescriptors:[NSArray arrayWithObject:sd]];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"any country LIKE[c] 'aCountry'"];
[request setPredicate:predicate]; 
```

那个看起来不错，但不起作用，因为国家是一种关系，因此国家的名称不存储在关系中，而是存储在实体国家中。然后我尝试了另一种方法：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"any Country.name LIKE[c] 'aCountry'"]; 
```

这会导致错误：

NSInvalidArgumentException'，原因：'keypath Country.name not found in entity'

现在，获得我的地区的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:31:13.490

如果`aCountry`是*Country*实体的对象，并且*country是**Region*到*Country*的一对一关系，则以下获取请求会查找该国家/地区的所有区域：

```
Country aCountry = ... ;
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Region"];
// ... add sort descriptor (optional)
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"country = %@", aCountry];
[request setPredicate:predicate]; 
```

但请注意，如果您还定义了从*Country*到*Region的逆多关系**区域*，那么您只需通过

 **```
NSSet *regionsForCountry = aCountry.regions; 
```

或者，如果您更喜欢数组：

```
NSArray *regionsForCountry = [aCountry.regions allObjects]; 
```**

# jquery - 仅在加载时加载带有图像的 div

> ID：13882136
> 
> 赞同：0
> 
> 时间：2012-12-14T16:00:23.770
> 
> 标签：jquery, image, load

我只想在加载图像时加载它们。

这不起作用，因为在加载图像之前删除了“隐藏”类：

```
$(function(){
$('#nowplaying').load('nowplaying.php', function() {
    $('#images').removeClass('hidden');
}
)}); 
```

我能做什么 ？

编辑：这是我的代码：

在 index.php 我有：

```
<script type="text/javascript">
$(function(){
$('#nowplaying').load('nowplaying.php');
});
var auto_refresh = setInterval(
function ()
{
$('#nowplaying').load('nowplaying.php').fadeIn("slow");
}, 10000); // refresh every 10000 milliseconds
</script> 
```

在 nowplaying.php 我有这个 div：

```
echo "<div id="images">;
foreach ($jpg_files as $file) {
if (file_exists($cover_path."\\\\".$file) && $file!="f.jpg") {
$file = urlencode($file);
echo "<a href=\"getimage.php?img=".$file."\" target=\"_blank\">
<img src=\"getimage.php?img=".$file."&p=".$cover_path."\" /></a>";
echo "&nbsp;&nbsp;&nbsp;&nbsp;";
}
echo "</div>; 
```

我只想在加载时显示 div id #images 的图像（我不希望用户看到在浏览器中制作的图像）。

怎么做？

有人可以发送一个简单的 waitForImages 示例吗？它对我根本不起作用。

编辑 12-12-15：这是有效的：

```
<img style="display:none;" src="big3.jpg">
<script type="text/javascript">
$('img').load(function(){
    $(this).css({'display':'block'})
});
</script> 
```

但这不起作用，为什么？：

```
<div style="display:none;">
    <img src="big3.jpg">
</div>
<script type="text/javascript">
$('div').load(function(){
    $(this).css({'display':'block'})
});
</script> 
```

还是不知道为什么。但如果 img 有正常的 src ，这是有效的：在 div 下方：

```
<script type="text/javascript">
$(document).ready(function(){
$("div.images").hide();
$("div.images").find("img").load(function(){
$(this).closest("div.images").show();
});
});
</script> 
```

现在这是我的大问题：我的图像 src 正在调用脚本：

```
<img src=\"getimage.php?img=".$file."\" />"; 
```

我怎样才能使它与这个一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:33:19.597

`$('img').load()`不可靠，不能跨浏览器工作。我会使用类似 waitForImages 的东西：[https ://github.com/alexanderdickson/waitForImages](https://github.com/alexanderdickson/waitForImages)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:04:24.967

它解决了你的问题吗？

```
$('#images').load(function(){
    $(this).removeClass('hidden');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T16:04:38.680

也许你需要我的插件 - [http://archive.plugins.jquery.com/project/BatchImagesLoad](http://archive.plugins.jquery.com/project/BatchImagesLoad)

然后您可以在加载所有图像后进行操作。

# javascript - 循环中的 SetTimeOut

> ID：13882139
> 
> 赞同：1
> 
> 时间：2012-12-14T16:00:35.427
> 
> 标签：javascript, jquery, asp.net

我想知道以下代码是否会引入竞争条件：

```
 rows.each(function () {

        var current = this;
        var doOperation = function () {
            current.someMethod();      
            // do some operation using current
        };

        setTimeout(doOperation, 1);
    }); 
```

在 settimeout 延迟期间，浏览器是否有可能开始执行循环的下一次迭代并更改“当前”，以便 doOperation 不会使用最初分配的值执行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:02:57.260

那里没有危险，因为每次迭代`doOperation`都会关闭一个新的`current`局部变量，而不会干扰以前的局部变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T16:04:19.333

这里的一切似乎都井然有序。`setTimeout`位于`each`函数的闭包中，因此对于您拥有的每一行，它`doOperation`都会有所不同。

# objective-c - Obj-C：从字符串创建数组，其中项目在 <>

> ID：13882141
> 
> 赞同：0
> 
> 时间：2012-12-14T16:00:43.713
> 
> 标签：objective-c, xcode, arrays

我正在尝试将一个字符串解析为一个数组，每个项目都在 <> 之间，例如`<this is column 1><this is column 2>`等等......

帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:13:29.800

要证明的东西：

```
NSString *string = @"<this is column 1><this is column 2>";
NSScanner *scanner = [NSScanner scannerWithString:string];

NSMutableArray *array = [NSMutableArray arrayWithCapacity:0];

NSString *temp;

while ([scanner isAtEnd] == NO)
{
    // Disregard the result of the scanner because it returns NO if the
    //  "up to" string is the first one it encounters.
    // You should still have this in case there are other characters
    //  between the right and left angle brackets.
    (void) [scanner scanUpToString:@"<" intoString:NULL];

    // Scan the left angle bracket to move the scanner location past it.
    (void) [scanner scanString:@"<" intoString:NULL];

    // Attempt to get the string.
    BOOL success = [scanner scanUpToString:@">" intoString:&temp];

    // Scan the right angle bracket to move the scanner location past it.
    (void) [scanner scanString:@">" intoString:NULL];

    if (success == YES)
    {
        [array addObject:temp];
    }
}

NSLog(@"%@", array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:13:08.593

一种方法可能是使用NSString 中的*componentsSeparatedByCharactersInSet*或*componentsSeparatedByString*。

```
NSString *test = @"<one> <two> <three>";

NSArray *array1 = [test componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"<>"]];

NSArray *array2 = [test componentsSeparatedByString:@"<"]; 
```

之后您需要进行一些清理，在**array2的情况下进行修剪或在****array1**的情况下删除空白字符串

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T16:37:43.863

```
NSString *input =@"<one><two><three>";
NSString *strippedInput = [input stringByReplacingOccurencesOfString: @">" withString: @""]; //strips all > from input string
NSArray *array = [strippedInput componentsSeperatedByString:@"<"]; 
```

请注意， [array objectAtIndex:0] 将是一个空字符串（“”），如果“实际”字符串之一包含 < 或 >，这当然不起作用**

# android - 碎片！！我怎样才能将其用作片段

> ID：13882142
> 
> 赞同：0
> 
> 时间：2012-12-14T16:00:51.370
> 
> 标签：android

```
import java.util.Calendar;
import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.TextView;

public class MyAndroidAppActivity extends Activity {

private TextView tvDisplayDate;
private DatePicker dpResult;
private Button btnChangeDate;

private int year;
private int month;
private int day;

static final int DATE_DIALOG_ID = 999;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    setCurrentDateOnView();
    addListenerOnButton();

}

// display current date
public void setCurrentDateOnView() {

    tvDisplayDate = (TextView) findViewById(R.id.tvDate);
    dpResult = (DatePicker) findViewById(R.id.dpResult);

    final Calendar c = Calendar.getInstance();
    year = c.get(Calendar.YEAR);
    month = c.get(Calendar.MONTH);
    day = c.get(Calendar.DAY_OF_MONTH);

    // set current date into textview
    tvDisplayDate.setText(new StringBuilder()
        // Month is 0 based, just add 1
        .append(month + 1).append("-").append(day).append("-")
        .append(year).append(" "));

    // set current date into datepicker
    dpResult.init(year, month, day, null);

}

public void addListenerOnButton() {

    btnChangeDate = (Button) findViewById(R.id.btnChangeDate);

    btnChangeDate.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            showDialog(DATE_DIALOG_ID);

        }

    });

}

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DATE_DIALOG_ID:
       // set date picker as current date
       return new DatePickerDialog(this, datePickerListener, 
                     year, month,day);
    }
    return null;
}

private DatePickerDialog.OnDateSetListener datePickerListener 
            = new DatePickerDialog.OnDateSetListener() {

    // when dialog box is closed, below method will be called.
    public void onDateSet(DatePicker view, int selectedYear,
            int selectedMonth, int selectedDay) {
        year = selectedYear;
        month = selectedMonth;
        day = selectedDay;

        // set selected date into textview
        tvDisplayDate.setText(new StringBuilder().append(month + 1)
           .append("-").append(day).append("-").append(year)
           .append(" "));

        // set selected date into datepicker also
        dpResult.init(year, month, day, null);

    }
};

} 
```

有人可以帮我如何使用带有片段的日期选择器代码吗

我试图让用户选择一个日期，计算出当前日期和他们选择的日期之间的日期之间的差异，然后将日期差异除以他们想要减轻的磅数（重量），这样一条消息就会显示为在显示目标的空字符串中。例如今天的日期是 14/12/2012 并且用户选择 24/12/2012 日期差是 10 天，他们希望在 10 天内减轻 10 磅（重量）

我如何对其进行编程以根据目标计算出差异/它并显示显示目标的结果，该目标将是每天 1 磅

任何帮助都会很棒，我真的迷路了，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:16:18.923

您首先扩展了类 Fragment 。然后您覆盖`onCreateView()`以膨胀您的内容视图。你用`onActivityCreated`你绑定你的观点。

# java - 从 java 代码调用时，将 select 语句包装在 FUNCTION/PROCEDURE 中会更好吗？

> ID：13882144
> 
> 赞同：1
> 
> 时间：2012-12-14T16:01:03.197
> 
> 标签：java, plsql

我正在编写一个 RESTful 服务来调用我也在编写的一些 PL SQL 过程。在少数情况下，所需要的只是从表中检索到的一条信息。

```
SELECT id FROM dual; 
```

我想知道将它包装在 a`PROCEDURE`中并使用 OUT 参数返回结果是否比简单地`SELECT`从我的 REST 服务执行语句更好？

或者它甚至重要吗？一个比另一个更安全吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:27:30.120

使用 a`PreparedStatement`执行您的 select 语句，如果您需要使用位置参数（而不是连接字符串）对其进行参数化，这将解决有关 SQL 注入的安全问题。如果您想要做多件事并且想要避免在客户端和数据库之间进行往返，或者如果您想要调用一些您不能调用的特定于 Oracle 的 PLSQL，那么您可以为使用存储过程提出一个论据。 t 通过 JDBC 进行。这些似乎与这里无关，所以我不会打扰它。

# c# - 为什么实体框架不能具体化我的实体的一对多关系？

> ID：13882147
> 
> 赞同：0
> 
> 时间：2012-12-14T16:01:19.890
> 
> 标签：c#, .net, ef-code-first, entity

我正在使用带有实体框架的代码优先方法和存储库模式来从我的数据库中获取实体。在我的数据模型中，每个`OverallEvent`都有很多`EventInConcept`孩子。我希望我的`GetEvents`方法返回一个`IList`of `OverallEvent`s，并且我希望将上述关系的子项具体化，以便可以在我的`DbContext`（即`AssessmentSystemContext`）之外访问它们。这是我目前拥有的代码：

```
public IList<OverallEvent> GetEvents() {
    using (var context = new AssessmentSystemContext()) {
        return context.OverallEvents
            .Select(evnt => new {
                OverallEvent = evnt,
                // evnt.EventsInConcept is a public virtual ICollection<EventInConcept>
                ConcreteEventsInConcept = evnt.EventsInConcept
            })
            .AsEnumerable()
            .Select(evntData => {
                evntData.OverallEvent.EventsInConcept = evntData.ConcreteEventsInConcept.ToList();
//              foreach (var eic in evntData.OverallEvent.EventsInConcept) {
//                  eic.Name = eic.Name;
//              }
                return evntData.OverallEvent;
            })
            .ToList();
    }
} 
```

它给了我一个`OverallEvent`实体列表，这很好，但问题是如果我尝试访问子关系`EventsInConcept`，我会得到一个错误。例如：

```
EventRepository repoEvent = new EventRepository();
var gotEvents = repoEvent.GetEvents();
var firstEventInConcept = gotEvents[0].EventsInConcept.FirstOrDefault(); 
```

...给我错误“ObjectContext 实例已被释放，不能再用于需要连接的操作。”

我从对[较早问题](https://stackoverflow.com/questions/13143268/how-to-include-complex-entity-fields-in-a-projected-entity-framework-object)的回答中了解到，如果我投影`EventsInConcept`到一个包装器对象中，然后在以后的`.Select`调用中显式设置它（即。`evntData.OverallEvent.EventsInConcept = evntData.ConcreteEventsInConcept.ToList();`），它将具体化这个 one:many 关系，我将能够`EventsInConcept`在`DbContext`,但它在这里不起作用。请注意，如果我取消注释`foreach`循环，它就会开始工作，所以要让它工作，我*必须*在`EventsInConcept`. 我真的不想这样做（我正在选择一个任意属性，`.Name`，无论如何感觉不对）。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:17:06.240

禁用此查询的延迟加载。在这种情况下以及在检索到实体后处置上下文时，它是没有用的：

```
public IList<OverallEvent> GetEvents() {
    using (var context = new AssessmentSystemContext()) {
        context.Configuration.LazyLoadingEnabled = false;
        return ...
    }
} 
```

当您使用投影（而不是急切或显式加载）时，EF 可能无法识别集合已加载，并在您访问集合时立即触发延迟加载。

# android - 意向新活动

> ID：13882150
> 
> 赞同：1
> 
> 时间：2012-12-14T16:01:29.373
> 
> 标签：android

抱歉愚蠢的问题...我尝试在 AlarmManager 类上集成通知栏（相同的代码在新活动中完美运行）。

```
Context context = getApplicationContext(); and
Intent notificationIntent = new Intent(this, AlarmManager.class); 
```

这不正确吗？

```
 public class AlarmReceiver extends BroadcastReceiver {

    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager mNotificationManager;

    @Override
    public void onReceive(Context context, Intent intent) {
        Toast.makeText(context, "Alarm worked.", Toast.LENGTH_LONG).show();

        mNotificationManager = (NotificationManager) context.getSystemService(ns);
        int icon = android.R.drawable.stat_notify_chat;
        CharSequence tickerText = "tickerText";
        long when = System.currentTimeMillis();
        Notification notification = new Notification(icon, tickerText, when);

        Context context = getApplicationContext();
        CharSequence contentTitle = "Title";
        CharSequence contentText = "Text";
        Intent notificationIntent = new Intent(this, AlarmManager.class);
        PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

mNotificationManager.notify(NOTIFICATION_ID, notification); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:25:51.350

您需要调用`context.getSystemService(ns)`where context 是传递给 onCreate 的变量。

# doctrine - Gedmo Doctrine 扩展的时间戳特征引发错误

> ID：13882153
> 
> 赞同：1
> 
> 时间：2012-12-14T16:01:33.000
> 
> 标签：doctrine, doctrine-orm

我得到了以下实体

```
use Gedmo\Timestampable\Traits\TimestampableEntity;

/**
 * @ORM\Entity
 * @ORM\Table(name="users")
 * @UniqueEntity(fields="email", message="Email already taken")
 */
class User
{
    /**
     * Hook timestampable behavior
     * updates createdAt, updatedAt fields
     */
    use TimestampableEntity; 
```

...

如果我跑

```
$ php app/console doctrine:mapping:info 
```

我得到这个错误

```
found 8 mapped entities:
[OK]   Gedmo\Translatable\Entity\MappedSuperclass\AbstractPersonalTranslation
[OK]   Gedmo\Translatable\Entity\MappedSuperclass\AbstractTranslation
[OK]   Gedmo\Translatable\Entity\Translation
[OK]   Gedmo\Loggable\Entity\MappedSuperclass\AbstractLogEntry
[OK]   Gedmo\Loggable\Entity\LogEntry
[OK]   Gedmo\Tree\Entity\MappedSuperclass\AbstractClosure
[OK]   Psren\CmsBundle\Entity\Group

  [Doctrine\Common\Annotations\AnnotationException]                                                                                                                                                    
  [Semantical Error] The annotation "@Gedmo\Timestampable" in property Psren\CmsBundle\Entity\User::$createdAt was never imported. Did you maybe forget to add a "use" statement for this annotation? 
```

注释 @Gedmo\Timestampable 是在扩展的特征中定义的。所以它必须已经加载。

什么地方出了错？感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:18:34.027

:-)

我只是忘了加载注释。

```
use Gedmo\Mapping\Annotation as Gedmo;
use Gedmo\Timestampable\Traits\TimestampableEntity;

/**
 * @ORM\Entity
 * @ORM\Table(name="users")
 * @UniqueEntity(fields="email", message="Email already taken")
 */
class User
{
    /**
     * Hook timestampable behavior
     * updates createdAt, updatedAt fields
     */
    use TimestampableEntity; 
```

# javascript - HighCharts 从图表底部移动 X 轴

> ID：13882157
> 
> 赞同：0
> 
> 时间：2012-12-14T16:01:43.217
> 
> 标签：javascript, highcharts

我在高图表中有一个柱形图，有正值和负值。我需要 xAxis 线以值 0 显示。但是，我在 HighCharts API 中找不到属性来为我完成此操作。默认情况下，xAxis 线显示在图表底部或最负值。

在这里查看我的示例：http: [//jsfiddle.net/csallemi/HStha/15/](http://jsfiddle.net/csallemi/HStha/15/)。在此示例中，x 轴为 -2%。我需要将其显示为 0% 值。

这是我的 Javascript HighChart 对象，它获取必要的柱形图

```
var YTD = 'YTD'
var yr1 = 'Year 1'
var yr3 = '*3 Year'
var yr5 = '*5 Year'
var sinceIN = '* Since Inception (5/31/2012)'

$(function () {
var chart;
$(document).ready(function() {
chart = new Highcharts.Chart({
   chart: {renderTo: 'container', type: 'column'},
   title: {text: 'Report Title', style: {fontSize: '18px', color: '#1D5293', fontWeight: 'bold'}, },
   subtitle: {text: '(As of 6/30/2012)', style: {fontSize: '18px', color: '#1D5293'}, y: 40},
   xAxis: {categories: [YTD, yr1, yr3, yr5, sinceIN], lineColor: '#C1BADB', tickWidth: 2},
   yAxis: {title: {text: ''},
           lineColor: '#C1BADB',
           lineWidth: 1,
           labels: {formatter: function() {return this.value+'%';}},
           gridLineWidth: '0px',
           tickWidth: 2            

          },
   tooltip: {enabled: true, formatter: function() {return this.series.name +': '+ this.y +'%';},},
  credits: { enabled: false },
  series: [
      {name: 'XXX Company Ltd. (Net)', data: [3.02, -0.61, 2.03, 1.51, 5.35], dataLabels: {enabled: true, color: '#333', formatter: function(){return this.y+'%'}}, color: '#1D5293'},
      {name: 'XXX Relative Return Index (Gross)**', data: [2.45, 0.85, 4.11, 0.73, 3.56], dataLabels: {enabled: true, color: '#333', formatter: function(){return this.y+'%'}}, color: '#9E9E9E'}
      ],
   legend: {layout: 'vertical', align: 'top', verticalAlign: 'top', x: 50, y: 65, borderWidth: 0, margin: 30},
  });
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T12:00:52.863

放

```
yAxis:{
    min: 0
}, 
```

我已经更新了你的小提琴[http://jsfiddle.net/HStha/25/](http://jsfiddle.net/HStha/25/)

希望这是有用的

# java - 服务帐户上的 Java Google Calendar api“access_denied”

> ID：13882162
> 
> 赞同：7
> 
> 时间：2012-12-14T16:01:49.517
> 
> 标签：java, google-api, google-calendar-api, google-apps, google-api-java-client

我正在尝试使用 Java Google Calendar api 连接到日历。Java 应用程序使用服务帐户。

我有以下代码：

```
 java.io.File licenseFile = new java.io.File("39790cb51b361f51cab6940d165c6cda4dc60177-privatekey.p12");

   GoogleCredential credential = new GoogleCredential.Builder()

  .setTransport(HTTP_TRANSPORT)
  .setJsonFactory(JSON_FACTORY)
  .setServiceAccountId("xxx@developer.gserviceaccount.com") 
  .setServiceAccountUser(EMAIL_ADRESS)
  .setServiceAccountScopes(CalendarScopes.CALENDAR)
  .setServiceAccountPrivateKeyFromP12File(licenseFile)
  .build();

  client = new com.google.api.services.calendar.Calendar.Builder(
                        HTTP_TRANSPORT, JSON_FACTORY, credential)
                        .setApplicationName("Google Calendar Sync").build();

  Calendar calendar = client.calendars().get(EMAIL_ADRESS).execute(); 
```

在最后一行，我收到一个带有消息的 IOException：

> ex = (com.google.api.client.auth.oauth2.TokenResponseException) com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request { "error" : "access_denied" }

我重复检查了 GoogleCredential 对象的值，它们是正确的。我还在我的域控制台中添加了[https://www.google.com/calendar/feeds/](https://www.google.com/calendar/feeds/)，[http://www.google.com/calendar/feeds/](http://www.google.com/calendar/feeds/)，应用程序 ID 作为客户端授权第三方应用程序访问

我是不是忘记了一步？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-09T13:24:00.610

api还没有完成。更具体地说，服务帐户部分。

日历所有者需要授予应用程序在其日历设置中读取/写入日历的权限。它位于日历的共享设置中，您可以在其中添加帐户的电子邮件地址并授予他们在您的日历上的权限。

因此，在这种情况下，我必须将：xxx@developer.gserviceaccount.com 添加到应用程序需要访问的日历的权限/共享列表中。

由于上述问题，我还删除了另一篇没有完整工作的帖子。我将取消删除它，因为它包含一些将来可能会帮助其他人的代码片段。但请注意不支持 Google 日历的权限问题和服务帐户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:07:03.887

我让它工作

我不知道为什么，但我删除了该行

```
.setServiceAccountUser(EMAIL_ADRESS) 
```

我还在域范围内添加了一个额外的 url：

```
https://apps-apis.google.com/a/feeds/calendar/resource/#readonly 
```

并删除了一个不起作用的链接。

最后，我将客户端声明中的 applicationName 更改为与 api 控制台中相同的名称

```
client = new com.google.api.services.calendar.Calendar.Builder(
                        HTTP_TRANSPORT, JSON_FACTORY, credential)
                        .setApplicationName("HolidaySyncs").build(); 
```

在这些步骤之后，它开始工作。

另请注意，在我这样做之后我有以下错误以供将来参考：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "notFound",
    "message": "Not Found"
   }
  ],
  "code": 404,
  "message": "Not Found"
 }
} 
```

我通过改变例如解决了这个问题：

```
Event result = client.events().insert(<EMAIL ADRESS>, event).execute(); 
```

到

```
Event result = client.events().insert("primary", event).execute(); 
```

首先，我认为谷歌服务器有问题，但是当您尝试链接到日历 ID 时显然会出现问题。因此，链接到作为帐户主日历的“主要”是有效的。但是根据文档，当您引用特定日历 ID 时，它也应该可以工作，其中电子邮件地址是主日历。应该是bug吧？

更新：在这些代码更正之后，我仍然遇到问题。阅读接受的答案以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:27:25.493

我愿意：

```
List find = client.events().list(EMAIL_ADRESS);
DateTime timeMin = new DateTime(DateUtil.stringToDate("01/01/2013"));
DateTime timeMax = new DateTime(DateUtil.stringToDate("01/02/2013"));

find.setTimeMin(timeMin);
find.setTimeMax(timeMax);

   try{
       Events events = find.execute();
       int i =0;

       while (true) {
           System.out.println("Page: "+(++i)+": "+events.getItems().size());
         for (Event event : events.getItems()) {
           System.out.println(event.getSummary());
         }
         String pageToken = events.getNextPageToken();
         if (pageToken != null && !pageToken.isEmpty()) {
           events = client.events().list(EMAIL_ADRESS).setPageToken(pageToken).execute();
         } else {
           break;
         }
       }

       }catch(GoogleJsonResponseException e){
           System.out.println(e.getMessage());
//         e.printStackTrace();
       } 
```

# javascript - 如何在不更改href的情况下阻止html链接？

> ID：13882167
> 
> 赞同：2
> 
> 时间：2012-12-14T16:02:07.737
> 
> 标签：javascript, html

说我有一个链接：

```
<a href="http://www.example.com">Example!</a> 
```

我想保持链接完整，但我想要一个 onclick 事件来决定链接是否可点击

```
<a onclick='stopLight()' href="http://www.example.com">Example!</a>

function stopLight() {

    // conditional logic
    // return true or return false
} 
```

因此，如果 stopLight() == true，则链接有效，如果 stopLight() == false，则链接无效。在不改变href的情况下使这成为可能，因为我宁愿不

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:07:08.880

用于`return stopLight()`处理`onclick`程序。
[正如 mplungjan 在他的[评论中所建议的那样](https://stackoverflow.com/questions/13882167/how-to-block-an-html-link-without-changing-href/13882256#comment19121591_13882167)]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:09:56.223

为了削减默认动​​作：

```
stopLight = function (e) {
    window.event.preventDefault();
}​ 
```

这将防止事件发生。

所以你可以这样做：

```
<a onclick='isStopLight()' href="http://www.example.com">Example!</a> 
```

而在 JS

```
isStopLight= function(){
   if(stopLight()){
      window.event.preventDefault();
   } 
}

stopLight = function () {
    // conditional logic
    // return true or return false
}​ 
```

干杯。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T16:09:56.287

您可以使用 jQuery 和 event.preventDefault() 方法来做到这一点：

```
$('a.yourLink').on('click',function(e){
  if (stopLight()){ 
    e.preventDefault();
  }
}); 
```

如果 stopLight 为 true`<a>`将阻止默认行为，否则将正常执行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T16:13:23.323

纯JS

*   排队

```
<a onclick='return stopLight()' href="http://www.example.com">Example!</a> 
```

*   不显眼：

```
window.onload=function() {
  document.getElementById("stoplight").onclick=function() {
    // conditional logic
    // return true or return false
  }
}

<a id="stoplight" href="http://www.example.com">Example!</a> 
```

jQuery

```
<a id="stoplight" href="http://www.example.com">Example!</a>

$(function() {
  $("#stoplight").on("click",function(e) {
    // conditional logic
    if (false condition) e.preventDefault(); // (or return false;) 
  });
}); 
```

# xml - 在 XML CALS-Table 中添加 indesign 单元格样式？

> ID：13882169
> 
> 赞同：0
> 
> 时间：2012-12-14T16:02:14.990
> 
> 标签：xml, xslt, html-table, adobe-indesign

我有一个带有 CALS 表的 XML 文件，我想将它导入到 indesign 中。问题是，indesign 中的实际表格定义了一些单元格样式，并且 indesign 不允许将标签（和样式）添加到 CALS 表格（仅限 indesign 表格）。

我的 xml 看起来像这样

```
<table>
<tgroup cols="6">
<colspec colname="c1" colwidth="29pt"/>
<colspec colname="c2" colwidth="172pt"/>
<colspec colname="c3" colwidth="71pt"/>
<colspec colname="c4" colwidth="69pt"/>
<colspec colname="c5" colwidth="113pt"/>
<colspec colname="c6" colwidth="69pt"/>
<thead>
<row>
<entry align="left" colsep="0" valign="bottom">Tag</entry>
<entry align="left" colsep="0" valign="bottom">Datum</entry>
<entry align="left" colsep="0" valign="bottom">Zeit</entry>
<entry align="left" colsep="0" valign="bottom">Ort</entry>
<entry align="left" colsep="0" valign="bottom">Leitung</entry>
<entry align="left" colsep="0" valign="bottom">Kursnummer</entry>
</row>
</thead>
<tbody>
<row>
<entry colsep="0">Mi</entry>
<entry colsep="0" valign="bottom">15.03.2012, 16.03.2012, 17.03.2012</entry>
<entry colsep="0" valign="bottom">10:15 - 11:45</entry>
<entry colsep="0" valign="bottom">someplace</entry>
<entry colsep="0" valign="bottom">some Name</entry>
<entry colsep="0" valign="bottom">ABC-DE-12</entry>
</row>
<row>
<entry colsep="0">Mi</entry>
<entry colsep="0" valign="bottom">15.06.2012, 16.06.2012, 17.06.2012</entry>
<entry colsep="0" valign="bottom">09:15 - 10:45</entry>
<entry colsep="0" valign="bottom">otherplace</entry>
<entry colsep="0" valign="bottom">other Name</entry>
<entry colsep="0" valign="bottom">XYZ-U-K-13</entry>
</row>
</tbody>
</tgroup>
</table> 
```

当我导入它时，我得到一个带有一些黑色边框的标准表格，并且字体大小是错误的。我还在单元格样式中添加了更多细节（即彩色边框底部 0.5pt）。如果我能在 indesign 中完成所有样式，那就太好了。我真的不喜欢`colwidth`在 xml 中设置它，但我明白为什么我必须这样做......

我听说那里有 xslt 或 idml 的解决方案，但我对这两者都是新手......是否有一个简单的解决方案来添加单元格样式（一个 for`<tbody>`和一个 for `<thead>`）？

表格样式也有同样的问题（还不需要这个，但也许我以后需要它......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-01T19:15:53.080

对于仍在寻找的任何人 - 有一个单独的aid5：允许单元格样式的命名空间。您可以在表格标记属性中组合 2 个命名空间，如下例所示，以利用辅助：和辅助 5：属性...也可以使用表格样式，您只需将表格标记“命名”为唯一的名称并使用该名称将您的标签映射到 Indesign 文件中的样式。命名表标签和杂项。命名标签必须手动映射（表格的表格样式，或其他格式的字符样式），而标签内的 cellstyle、pstyle（段落样式）和 cstyle（字符样式）属性**，**只要您的段落、单元格或字符样式具有完全相同的区分大小写的名称，就可以映射它们自己。如果您的 Indesign 模板中可以有一个占位符表格（带有一个标题行和一个正文行），您可以放弃使用宽度。任何预填充的单元格（如标题行）都可以通过使用如下所示的自结束标签来跳过。最后，如果您不知道您将拥有多少行，只需将每个重复行设为自己的完整表格，其中只有一行。不理想，在我的例子中，我们使用了一个变量来填充aid:trows 属性。提供数据的前端为我们计算了行数（进行了编辑、修复了错误的列数并添加了缩进）。

```
 <!-- table with widths declared -->
    <myTableStyleName xmlns:aid="http://ns.adobe.com/AdobeInDesign/4.0/" xmlns:aid5="http://ns.adobe.com/AdobeInDesign/5.0/" aid:table="table" aid:trows="3" aid:tcols="2">
        <Cell aid:table="cell" aid:ccolwidth="200" aid:theader="" aid:crows="1" aid:ccols="1" aid5:cellstyle="headerCell" aid:pstyle="headerCellP">column one header</Cell>
        <Cell aid:table="cell" aid:ccolwidth="200" aid:theader="" aid:crows="1" aid:ccols="1" aid5:cellstyle="headerCell" aid:pstyle="headerCellP">column two header</Cell>
        <Cell aid:table="cell" aid:ccolwidth="200" aid:crows="1" aid:ccols="1" aid5:cellstyle="bodyCellA" aid:pstyle="paragraphAwayGame">row 1 col 1</Cell>
        <Cell aid:table="cell" aid:ccolwidth="200" aid:crows="1" aid:ccols="1" aid5:cellstyle="bodyCellA" aid:pstyle="paragraphHomeGame">row 1 col 2 <myCharStyle>WE WON!</myCharStyle></Cell>
        <Cell aid:table="cell" aid:ccolwidth="200" aid:crows="1" aid:ccols="1" aid5:cellstyle="bodyCellA" aid:pstyle="paragraphAwayGame">row 2 col 1</Cell>
        <Cell aid:table="cell" aid:ccolwidth="200" aid:crows="1" aid:ccols="1" aid5:cellstyle="bodyCellA" aid:pstyle="paragraphHomeGame">row 2 col 2</Cell>
    </myTableStyleName>

    <!-- table data populating starter rows in Indesign, no widths needed -->
    <Table xmlns:aid="http://ns.adobe.com/AdobeInDesign/4.0/" xmlns:aid5="http://ns.adobe.com/AdobeInDesign/5.0/" aid:table="table" aid:trows="3" aid:tcols="2">
        <Cell aid:table="cell" aid:theader="" aid:crows="1" aid:ccols="1" aid5:cellstyle="headerCell" aid:pstyle="headerCellP"/>
        <Cell aid:table="cell" aid:theader="" aid:crows="1" aid:ccols="1" aid5:cellstyle="headerCell" aid:pstyle="headerCellP"/>
        <Cell aid:table="cell" aid:crows="1" aid:ccols="1" aid5:cellstyle="bodyCellA" aid:pstyle="paragraphAwayGame">row 1 col 1</Cell>
        <Cell aid:table="cell" aid:crows="1" aid:ccols="1" aid5:cellstyle="bodyCellA" aid:pstyle="paragraphHomeGame">row 1 col 2</Cell>
        <Cell aid:table="cell" aid:crows="1" aid:ccols="1" aid5:cellstyle="bodyCellA" aid:pstyle="paragraphAwayGame">row 2 col 1</Cell>
        <Cell aid:table="cell" aid:crows="1" aid:ccols="1" aid5:cellstyle="bodyCellA" aid:pstyle="paragraphHomeGame">row 2 col 2</Cell>
    </Table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:09:18.673

1.  您必须使用一些示例数据在 InDesign 中设计表格的外观
2.  标记示例表的内容
3.  使用 XML-Export 函数导出示例表
4.  根据示例 xml-data，您可以为 cals-table 编写转换
5.  应用 indesign xslt 选项导入 Cals 数据

如果您不是那么有经验，那么最棘手的部分可能是为 table 标记及其属性提供正确的命名空间：

```
xmlns:aid="http://ns.adobe.com/AdobeInDesign/4.0/" 
```

* * *

这是一个示例 XSLT 样式表，用于将您的数据转换为带有单元格样式的 indesign 表：

```
<xsl:stylesheet 
xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
xmlns:aid="http://ns.adobe.com/AdobeInDesign/4.0/"
xmlns:aid5="http://ns.adobe.com/AdobeInDesign/5.0/"
exclude-result-prefixes="xs">

<xsl:output indent="yes" encoding="UTF-8" standalone="yes" />
<xsl:strip-space elements="table thead tbody row entry" />

<xsl:variable name="tcols"><xsl:value-of select="table/tgroup/@cols" /></xsl:variable>
<xsl:variable name="trows"><xsl:value-of select="ceiling ( ( count(table/tgroup/thead/row/entry) + count(table/tgroup/tbody/row/entry) ) div $tcols )" /></xsl:variable>

<xsl:template match="/">
    <xsl:processing-instruction name="whitespace-handling">
        <xsl:text>use-tags</xsl:text>
    </xsl:processing-instruction>
    <table aid:table="table" aid:trows="{$trows}" aid:tcols="{$tcols}">
        <xsl:apply-templates select="table/tgroup/thead/row" />
        <xsl:apply-templates select="table/tgroup/tbody/row" />    
    </table>
</xsl:template>

<xsl:template match="thead/row/entry | tbody/row/entry">
    <cell aid:table="cell" aid:crows="1" aid:ccols="1">
        <xsl:if test="ancestor::thead">
            <xsl:attribute name="aid:theader" />
        </xsl:if>
        <!-- Here your style-definition based on something  -->
        <xsl:attribute name="aid5:cellstyle"><xsl:text>mycellstyle</xsl:text></xsl:attribute>
        <xsl:attribute name="aid:ccolwidth">
            <xsl:call-template name="getcolwidth">
                <xsl:with-param name="position">
                    <xsl:value-of select="position()" />
                </xsl:with-param>
            </xsl:call-template>
        </xsl:attribute>
        <xsl:value-of select="." />
    </cell>
</xsl:template>

<xsl:template name="getcolwidth">
    <xsl:param name="position" />
    <xsl:for-each select="/table/tgroup/colspec">
        <xsl:if test="position() = $position">
            <xsl:value-of select="substring-before(@colwidth, 'pt')" />
        </xsl:if>
    </xsl:for-each>
</xsl:template> 
```

# sql-server - 如何在 SQL Server 中强制 nvarchar 输入宽度？

> ID：13882170
> 
> 赞同：5
> 
> 时间：2012-12-14T16:02:19.597
> 
> 标签：sql-server, error-handling, nvarchar

我有一个为我们的生产线创建的脚本，用户在执行之前将一些变量输入到脚本中。问题是变量是 NVARCHAR(9)，如果用户输入一个 10 个字符的字符串，最后一个字符被截断（如预期的那样）我想知道的是，如果他们输入一个值，我如何让 SQL 抛出错误太长？这个问题源于用户对输入的过度指法。例子：

```
Valid input - 
DECLARE @ClientCode NVARCHAR(9)
SET @ClientCode = N'ABCDEFGHI'
SELECT  @ClientCode

Results
ABCDEFGHI 
```

输入无效 -

```
DECLARE @ClientCode NVARCHAR(9)
SET @ClientCode = 'ABCDDEFGHI'
SELECT @ClientCode

Results
ABCDDEFGH 
```

我希望的是一个会让 SSMS 引发错误的设置。我希望避免的是 -

```
DECLARE @ClientCode NVARCHAR(50)
...

IF LEN(@ClientCode) > 9
RAISERROR('Too long dummy.',16,1) 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:11:35.727

请参阅[SQL Server 在存储过程中静默截断 varchar](https://stackoverflow.com/questions/4628140/sql-server-silently-truncates-varchars-in-stored-procedures) - SQL Server 无法设置为在存储过程中自动引发插入截断错误，因此您必须自己执行检查。您可以在存储过程（您列为“希望避免”的代码）中执行此操作，也可以在客户端应用程序中预先验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:19:08.500

我也一直在查看 Scott Chapman 在他的回答中引用的问题，但是，我发现 igorp 的回答中途很有趣，我不得不稍微修改一下以修复 SQL，但它可以工作：

```
declare @p1 varchar(max), @p2 varchar(max)
select @p1 = 'abcd'
declare @p1Int varchar(2), @p2Int varchar(3)
declare @test table (p1 varchar(2), p2 varchar(3))
insert into @test (p1,p2) values (@p1, @p2)
select @p1Int=p1, @p2Int=p2 from @test 
```

# asp.net - 是否尝试设置此报告中未定义的报告参数“名称”？

> ID：13882171
> 
> 赞同：9
> 
> 时间：2012-12-14T16:02:27.213
> 
> 标签：asp.net, parameters

我正在尝试加载一个按 textbox1 中的名称过滤的报告，但我收到错误“尝试设置此报告中未定义的报告参数'名称'”有什么想法吗？

```
Dim ds As New TestDataSetTableAdapters.tblTestDataTableAdapter 

        ' Create report data source 
        Dim ID As ReportParameter 
        ID = New ReportParameter("Name", TextBox1.Text) 

        Dim rds As New ReportDataSource("MyApplication_ModelObject", ObjectDataSource1) 

        ' Clear the datasets in the report viewer and add the new datasource 
        ReportViewer1.LocalReport.DataSources.Clear() 
        ReportViewer1.LocalReport.DataSources.Add(rds) 
        ReportViewer1.LocalReport.SetParameters(ID) 
        ReportViewer1.LocalReport.Refresh() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:21:59.863

*ReportParameter*的`Name`部分必须与 Report 中的参数名称匹配。

 *这可能是`@Name`，最好的做法是打开报告并在那里查看。*

# php - PHP 从 JSON 中读取大整数作为字符串

> ID：13882178
> 
> 赞同：1
> 
> 时间：2012-12-14T16:03:01.907
> 
> 标签：php, twitter

> **可能重复：**
> [在 PHP 中处理 FQL 返回的大用户 ID](https://stackoverflow.com/questions/2907806/handling-big-user-ids-returned-by-fql-in-php)

我有来自 twitter api 的 JSON 响应，我需要使用 php 将推文 ID 存储在数据库中。问题是推文 ID 大约有 18 位数字，而 php 正在以 X.XXE+XX 格式读取。我在 32 位操作系统上。我试过这种方式没有成功

```
$json = json_decode(file_get_contents($urlo, "r"));
foreach($json->results as $key){
$I_WANT_A_STRING = strval($key->id);
} 
```

我真的很感激任何建议！

**已解决**感谢您的建议，但是在将参数设置为 json_decode 函数时，它给了我其他错误。如果有人遇到同样的问题，在 json 响应中，每条推文都有 id 和 id_str 属性。

# c# - 查询未提交读

> ID：13882183
> 
> 赞同：0
> 
> 时间：2012-12-14T16:03:20.767
> 
> 标签：c#, sql, sql-server, entity-framework, transactions

我目前正在尝试创建一个基于电影数据库的应用程序。我正在解析一些 json 文件并将它们插入到 SQL Server 数据库中。

所以，`foreach parent element`我`json file`正在检查它是否已经在我的桌子上。如果不是，我正在插入它。另外，我为这部电影插入流派，并检查该流派是否在我的`Genres`表中，但 10 分钟后我在这里遇到异常。

我的代码是这样的：

```
using (TransactionScope ts = 
           new TransactionScope(TransactionScopeOption.Suppress, 
                                  new TransactionOptions
                                      {
                                         IsolationLevel = IsolationLevel.ReadUncommitted,
                                         Timeout = System.TimeSpan.MaxValue
                                      }))
{
    foreach(parent element)
    {
       // check 
       if !database.movies.any(s=>s.Title == myParentElementTitle)  
       {
           insert movie;
           **- check if !database.MovieGenre.Any(s=>s.Name==myParentElementGenre) -**   
           // NOTE: I get a Time out exception here
       } 
    }

    ts.Complete();
} 
```

我怎样才能在不出现该异常的情况下完成我的交易？我已将 read uncommitted 设置为允许执行任何命令，但这似乎不对。

# c# - 在 Ubuntu 上使用 Mono 连接到 APNS 服务

> ID：13882185
> 
> 赞同：1
> 
> 时间：2012-12-14T16:03:32.550
> 
> 标签：c#, ubuntu, mono, apple-push-notifications, sslstream

我正在尝试建立与 Apple 的 APNS 服务的连接。我在 Ubuntu 上运行 Mono。用于建立连接的代码可以在 Windows 环境中正常工作。该代码是 NT 服务（系统进程）的一部分，而不是网站或服务。

以下是有关环境的一些信息：Ubuntu 12.10。单声道 3.0.5。使用 Mono 的 Certmgr：

*   我在 Mono 机器证书存储 (MY) 中安装了 APNS 证书。
*   我在 Mono 机器证书存储（密钥对）中安装了 APNS 证书私钥。
*   我在 Mono 机器证书存储区 (TRUST) 中安装了 Entrust.net 证书颁发机构 (2048) 根证书。
*   我在 Mono 机器证书存储 (CA) 中安装了 Entrust 证书颁发机构 - 1LC 中间证书。

Telnet 能够到达 gateway.push.apple.com:2195。我正在调试 MonoDevelop 中的代码。MonoDevelop 以 Root (gksudo) 身份运行。

这是我收到的错误：

```
System.IO.IOException: The authentication or decryption has failed. --->
Mono.Security.Protocol.Tls.TlsException: The authentication or decryption has failed.
at Mono.Security.Protocol.Tls.RecordProtocol.ProcessAlert (AlertLevel alertLevel, AlertDescription alertDesc) [0x00000] in <filename unknown>:0
at Mono.Security.Protocol.Tls.RecordProtocol.InternalReceiveRecordCallback (IAsyncResult asyncResult) [0x00000] in <filename unknown>:0
--- End of inner exception stack trace ---
at Mono.Security.Protocol.Tls.SslStreamBase.AsyncHandshakeCallback (IAsyncResult asyncResult) [0x00000] in <filename unknown>:0 } 
```

这是我用来建立连接的代码：

```
m_client = new TcpClient("gateway.push.apple.com", 2195);
m_ssl = new SslStream(m_client.GetStream(), false, new RemoteCertificateValidationCallback(ValidateServerCertificate), null);
m_ssl.AuthenticateAsClient("gateway.push.apple.com", m_certColl, System.Security.Authentication.SslProtocols.Tls, false); 
```

来自调试器的更多信息：

> m_certColl 应该包含 1 个证书，即 APNS 证书。我在调试器中确认了公钥和私钥都被填充了。RemoteCertificateValidationCallback 返回 NO SslPolicyErrors。我可以确认该链包含 3 个证书。1 包含 Apple 的 gateway.push.apple.com 公钥，1 包含 Entrust 的中间证书，1 包含 Entrust 的根证书。

我已经两次和三次检查了所有内容，但我只是不知道从这里去哪里。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:00:42.523

想通了。事实证明，当涉及到 AuthenticateAsClient 时，Windows 和 Mono（至少在 Linux 上）的行为不同。根据您的证书链，Windows 将对身份验证时使用的证书做出“最佳猜测”（因为 APNS 证书是链中唯一的证书，所以很容易猜测）

Mono 根本不会“猜测”。您必须使用 LocalCertificateSelectionCallback 指定证书。你不能像我一样让它“空”

# parameter-passing - 使用输入参数运行自动键脚本

> ID：13882186
> 
> 赞同：1
> 
> 时间：2012-12-14T16:03:33.227
> 
> 标签：parameter-passing, autokey

是否可以使用输入参数运行 AutoKey 脚本？（例如 autokey-run -s scriptname param1 param2 ...）我尝试过使用 sys.argv，但由于某种原因，当通过 AutoKey（而不是通过 python）运行脚本时，argv[0] 只包含字符串“/usr/local/bin/autokey-gtk”，所有其他索引为空。还有另一种方法吗？

这是一些示例代码：

```
import sys
keyboard.send_keys(sys.argv[0])
--
$ autokey-run -s scriptname testparam
>>/usr/local/bin/autokey-gtk 
```

我知道这是 AutoKey 的一种奇怪用法，但我需要它来发送键盘事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-09T21:35:25.927

我通过编写一个 bash 函数来解决这个问题，该函数将参数写入临时文件，运行自动键脚本，然后删除该文件。到目前为止，我对该解决方案没有任何问题。

# c# - 当要求用户输入时，StandardOutput 会阻塞

> ID：13882189
> 
> 赞同：0
> 
> 时间：2012-12-14T16:03:42.860
> 
> 标签：c#, winforms

我目前正在构建一个简单的应用程序，它会启动`openvpn.exe`. 但是，`openvpn.exe`要求输入用户名和密码。

**但是**，当这种情况发生时，我的程序不会读取字符串，它只是等到 CMD 关闭，然后继续执行代码。因此，它会一直阻塞，直到窗口关闭。

有什么办法可以规避这种情况吗？我的代码如下：

```
void button_Connect_Click(object sender, EventArgs e)
{
    var proc = new Process();

    proc.StartInfo.FileName = @"C:\Program Files (x86)\OpenVPN\bin\openvpn.exe";
    proc.StartInfo.Arguments = "--config config.ovpn --auto-proxy";
    proc.StartInfo.UseShellExecute = false;
    proc.StartInfo.WorkingDirectory = @"C:\Program Files (x86)\OpenVPN\bin";

    // set up output redirection
    proc.StartInfo.RedirectStandardOutput = true;
    proc.StartInfo.RedirectStandardError = true;
    // Input
    proc.StartInfo.RedirectStandardInput = true;

    // Other
    proc.EnableRaisingEvents = true;
    proc.StartInfo.CreateNoWindow = false;
    // see below for output handler
    proc.ErrorDataReceived += proc_DataReceived;
    proc.OutputDataReceived += proc_DataReceived;

    proc.Start();

    myStreamWriter = proc.StandardInput;
    proc.BeginErrorReadLine();
    proc.BeginOutputReadLine();

    proc.WaitForExit();
}

void proc_DataReceived(object sender, DataReceivedEventArgs e)
{
    // output will be in string e.Data
    if (e.Data != null)
    {
        string Data = e.Data.ToString();
        if (Data.Contains("Enter Auth Username"))
        {
            this.myStreamWriter.WriteLine("myinput");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:23:22.313

在**新行**`proc_DataReceived`上触发。假设密码是控制台应用程序要求的唯一输入，您可以在开始该过程后将其发送到您的右侧。它会在必要时被缓冲和消耗。**`myStreamWriter`**

# opencv - 无法让 OpenCV 框架符号在 XCode 中链接

> ID：13882191
> 
> 赞同：2
> 
> 时间：2012-12-14T16:03:44.853
> 
> 标签：opencv, titanium, xcode4.5

我在我的项目中使用工作演示中的 OpenCV 框架缺少一些小东西。

重现步骤：

1.  [从http://aptogo.co.uk/2011/09/opencv-framework-for-ios/](http://aptogo.co.uk/2011/09/opencv-framework-for-ios/)下载示例应用程序

2.  使用 Titan create --platform=iphone --type=module --dir= 创建一个新的 Titainum iOS 模块。--name=opencv --id=opencv

3.  打开 XCode 项目，从 FaceTracker 应用程序和其他所需的框架中拖入 OpenCV 框架。

4.  将 OTHER_LDFLAGS=$(inherited) -framework OpenCV 添加到 module.xcconfig

5.  创建名为 OpencvView 和 OpencvViewProxy 的新 TiUIView 和 TiUIViewProxy 类。

6.  在新的 OpencvView 类中，实例化一个使用 OpenCV 的 UIViewController。

该构建将构建 Titanium 模块，但是当我尝试运行模块测试工具时，我收到 OpenCV 对象的以下错误：

架构 i386 的未定义符号：“_CMSampleBufferGetImageBuffer”，引用自：-[VideoCaptureViewController captureOutput:didOutputSampleBuffer:fromConnection:] in libopencv.a(VideoCaptureViewController.o) “_CMSampleBufferGetOutputPresentationTimeStamp”，引用自：-[VideoCaptureViewController captureOutput:didOutputSampleBuffer:fromConnection:] libopencv.a(VideoCaptureViewController.o) "_CMTimeMake"，引用自：-[VideoCaptureViewController createCaptureSessionForCamera:qualityPreset:grayscale:] in libopencv.a(VideoCaptureViewController.o) "_CVPixelBufferGetBaseAddress"，引用自：-[VideoCaptureViewController captureOutput:didOutputSampleBuffer:fromConnection: ] 在 libopencv.a(VideoCaptureViewController.o) "_CVPixelBufferGetBaseAddressOfPlane"，引用自：-[VideoCaptureViewController captureOutput:didOutputSampleBuffer:fromConnection:] in libopencv.a(VideoCaptureViewController.o) "_CVPixelBufferGetHeight"，引用自：-[VideoCaptureViewController captureOutput:didOutputSampleBuffer:fromConnection:] in libopencv.a(VideoCaptureViewController.o ) "_CVPixelBufferGetPixelFormatType"，引用自：-[VideoCaptureViewController captureOutput:didOutputSampleBuffer:fromConnection:] in libopencv.a(VideoCaptureViewController.o) "_CVPixelBufferGetWidth"，引用自：-[VideoCaptureViewController captureOutput:didOutputSampleBuffer:fromConnection:] in libopencv.a(VideoCaptureViewController .o) “_CVPixelBufferLockBaseAddress”，引用自：-[VideoCaptureViewController captureOutput:didOutputSampleBuffer:fromConnection:] in libopencv.a(VideoCaptureViewController.o) "_CVPixelBufferUnlockBaseAddress"，引用自： -[VideoCaptureViewController captureOutput:didOutputSampleBuffer:fromConnection:] in libopencv.a(VideoCaptureViewController.o) "cv::_InputArray ::_InputArray(cv::Mat const&)"，引用自：-[DemoVideoCaptureViewController processFrame:videoRect:videoOrientation:] in libopencv.a(DemoVideoCaptureViewController.o) "cv::_OutputArray::_OutputArray(cv::Mat&)",引用自：-[DemoVideoCaptureViewController processFrame:videoRect:videoOrientation:] in libopencv.a(DemoVideoCaptureViewController.o) "cv::CascadeClassifier::load(std::string const&)"，引用自：-[DemoVideoCaptureViewController viewDidLoad] in libopencv.a(DemoVideoCaptureViewController.o) "cv::CascadeClassifier::CascadeClassifier()"，引用自： -[DemoVideoCaptureViewController .cxx_construct] in libopencv.a(DemoVideoCaptureViewController.o) "cv::CascadeClassifier: :~CascadeClassifier()"，引用自：-[DemoVideoCaptureViewController .cxx_destruct] in libopencv.a(DemoVideoCaptureViewController.o) "cv::Mat::deallocate()"，引用自：-[VideoCaptureViewController captureOutput:didOutputSampleBuffer:fromConnection:]在 libopencv.a(VideoCaptureViewController.o) -[UIImage(UIImage_OpenCV) CVMat] 在 libopencv.a(UIImage+OpenCV.o) -[UIImage(UIImage_OpenCV) CVGrayscaleMat] 在 libopencv.a(UIImage+OpenCV.o) "cv: :Mat::create(int, int const*, int)",引用自：-[UIImage(UIImage_OpenCV) CVMat] in libopencv.a(UIImage+OpenCV.o) -[UIImage(UIImage_OpenCV) CVGrayscaleMat] in libopencv.a(UIImage+OpenCV.o) "cv::flip(cv:: _InputArray const&, cv::_OutputArray const&, int)"，引用自：-[DemoVideoCaptureViewController processFrame:videoRect:videoOrientation:] in libopencv.a(DemoVideoCaptureViewController.o) "cv::resize(cv::_InputArray const&, cv::cv::resize(cv::_InputArray const&, cv::cv::resize(cv::_InputArray const&, cv::*输出数组 const&, cv::Size*, double, double, int)"，引用自：-[DemoVideoCaptureViewController processFrame:videoRect:videoOrientation:] in libopencv.a(DemoVideoCaptureViewController.o) "cv::fastFree(void*)"，引用自：-[VideoCaptureViewController captureOutput: didOutputSampleBuffer:fromConnection:] 在 libopencv.a(VideoCaptureViewController.o) -[UIImage(UIImage_OpenCV) CVMat] 在 libopencv.a(UIImage+OpenCV.o) -[UIImage(UIImage_OpenCV) CVGrayscaleMat] 在 libopencv.a(UIImage+OpenCV. o) "cv::transpose(cv::_InputArray const&, cv::_OutputArray const&)"，引用自：-[DemoVideoCaptureViewController processFrame:videoRect:videoOrientation:] in libopencv.a(DemoVideoCaptureViewController.o) "_kCVPixelBufferPixelFormatTypeKey"，引用自：-[VideoCaptureViewController createCaptureSessionForCamera:qualityPreset:grayscale:] in libopencv.a(VideoCaptureViewController.o) ld: 未找到架构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T13:32:13.037

我有类似的错误。只是改变“构建设置”并没有帮助。

最后，我通过添加一些框架（如 coreMedia、coreVideo 等）解决了这个问题。但是，这些框架并没有在我的代码中使用。

所以我猜openCV需要这些框架。但我不知道为什么。

希望这会有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T18:34:34.037

Xcode 4.5.1 上的默认苹果 llvm 编译器也有类似的问题。尝试将其更改为 gcc（从您的构建选项），看看这是否有效。

# php - Sencha ajax 调用 php 文件

> ID：13882203
> 
> 赞同：0
> 
> 时间：2012-12-14T16:04:25.683
> 
> 标签：php, mysql, ajax, extjs

我既是 sencha 又是 ajax 新手。我正在尝试从连接到 mysql 服务器的 php 文件中返回一些数据。当我按下一个按钮时，我触发了一个 ajax 请求。

这是我按下按钮时的煎茶代码......

```
 onShow: function(){

        setInterval(function(){
            console.log("Server pinged");
            myRequest = Ext.Ajax.request({
            url: 'http://localhost/getpoi.php',
            method: 'GET',
            params: {
                poiid: '3'
            },
            callback: function(response) {
                console.log(response.responseText);
            }
        });

        },5000);
     }, 
```

我的getpoi php文件代码如下......

```
 <?php
    $poiid = $_GET["poiid"];
    $lat;
    $long;
    $con = mysql_connect("localhost","root","");
    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }

    mysql_select_db("murmuration_db", $con);

    $result = mysql_query("SELECT * FROM POI WHERE id=$poiid");

    while($row = mysql_fetch_array($result))
      {
        $lat = $row['anchor_geolocation_lat'];
        $long = $row['anchor_geolocation_lon'];
      }

    $response = $lat. ' '. $long;
    echo $response;
    return $response;
    mysql_close($con);

    ?> 
```

php 文件正在工作，因为如果我在文件本身中将 set poiid 更改为 3 并在浏览器中打开它，我就会得到位置。但是，如果我通过按钮在 sencha 应用程序中调用它，控制台会正确记录“服务器 ping”，但会记录“未定义”而不是坐标。任何想法我做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:09:16.790

看起来你的 ajax 没有正确发送请求。尝试这个：

```
setInterval(function(){
    console.log("Server pinged");
    myRequest = Ext.Ajax.request({
    url: 'http://localhost/getpoi.php?poiid=3',
    method: 'GET',
    callback: function(response) {
        console.log(response.responseText);
    }
}); 
```

确保正在加载按 F12，转到网络并查看请求。;)（Chrome 上的 Firebug 或检查元素）

# asp.net - 如何使用正则表达式替换此 html

> ID：13882204
> 
> 赞同：0
> 
> 时间：2012-12-14T16:04:31.440
> 
> 标签：asp.net, regex, replace

我对 regex 有点陌生，如果您能帮助我了解如何使用 regex 将转义字符替换回文字 html 字符串，我将不胜感激。我尝试使用 string.replace 并且它只替换了代码的某些部分而不是全部。

例如：`string.replace("&lt;","<") ;`//这有效，但仅在一行上，当它变成循环时，这是一个问题，对于熟悉代码的人来说，是的，这是一个 SP 博客代码，其中 SP 将 html 文字标记转换为转义字符。

```
<div class="ExternalClass2BF55814E98A409296EC90A2605D7D74">
  <div>&ltiframe src=&quot
    <a href=http://player.vimeo.com/video/32001208?portrait=0&ampampbadge=0>
            http://player.vimeo.com/video/32001208?portrait=0&ampampbadge=0
    </a>&quot;
    width=&quot;420&quot; height=&quot;281&quot; frameborder=&quot0&quot 
    webkitAllowFullScreen mozallowfullscreen allowFullScreen&gt&lt/iframe&gt; 
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:15:49.047

如果您的字符串是 HTML 编码的，您最好通过`Server.HtmlDecode()`. 这会将其转换回 HTML。

IE

```
 '' In VB
    Dim myHtml as String = Server.HtmlDecode(YourConcatonatedEncodedHTML)

    // in C#
    string myHtml = Server.HtmlDecode(YourConcatonatedEncodedHTML); 
```

# css - 将 Twitter Bootstrap 库存导航栏更改为透明

> ID：13882206
> 
> 赞同：2
> 
> 时间：2012-12-14T16:04:46.417
> 
> 标签：css, twitter-bootstrap, background-color, transparent, navbar

我已经看到了许多关于更改默认 Twitter Bootstrap Primary Navbar 的背景颜色的问题和答案，但它们似乎处理最顶层（navbar-inner 类），掩盖了许多其他颜色和选项下。

我正在寻找一个透明的导航栏，并在添加“背景颜色：透明；”之后 对于我能找到的每一层，我的屏幕顶部仍然有一个白色条。目前我的 app.css 有以下几行：

```
.navbar-inner{
    background-color:transparent;
    }
.navbar-inner container{
    background-color:transparent;
    }
.navbar{
    background-color:transparent;
    }
#nav-main{
    background-color:transparent;
    }
#banner{
    background-color:transparent;
    } 
```

我的猜测已经不多了，我的散点图方法似乎让我失望了。是否有一条我还没有看到（和修改）的规则，或者我是否完全以错误的方式处理这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T17:05:16.917

问题是他们在背景上使用图像。因此，通过设置背景颜色，您只需设置图像背后的颜色。尝试以下方式：

```
 .navbar-inner{
    background:transparent !important;
    }
.navbar-inner container{
    background:transparent !important;
    }
.navbar{
    background:transparent !important;
    }
#nav-main{
    background:transparent !important;
    }
#banner{
    background:transparent !important;
    }​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T01:08:21.283

使用以下方法在 Bootstrap 3 中得到了这个结果：

```
body { background: transparent } 
```

# mysql - 索引未显示为可能的键

> ID：13882210
> 
> 赞同：1
> 
> 时间：2012-12-14T16:04:55.700
> 
> 标签：mysql, indexing, explain

我有几个查询，我为它们创建了 2 个单独的索引，我知道目前它并不需要使用它们，因为表不包含那么多行；但是，`possible key`当我使用`EXPLAIN`.

一个示例查询是：

```
SELECT 
    id,eventname,details,datestart,dateend,smallimage
FROM
    `events`
WHERE
    CAST(dateend AS DATE) >= CURDATE()
AND
    (state='VIC' OR state = 'ALL')
AND
    STATUS = 1
ORDER BY
    datestart ASC; 
```

备用查询只是在状态之前添加了另一个`AND`子句，例如：

```
 AND eventcat = 15 
```

现在，我添加了以下两个索引：

```
KEY `NewIndex4` (`dateend`,`state`,`status`,`datestart`),
KEY `NewIndex5` (`dateend`,`eventcat`,`state`,`status`,`datestart`) 
```

但是，MySQL 仅将以下索引显示为可能的键：

```
KEY `NewIndex1` (`state`,`status`,`frontpage`,`image`) 
```

我的索引错了吗！？为什么这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:19:20.763

问题是您正在对 dateend 字段进行 CAST。当您对字段执行功能时，它不会使用该字段的索引。如果可能，我建议将此字段转换为 DATE 数据类型。如果不使用索引中的第一个字段，则该索引将被忽略。

如果该字段是 DATETIME 字段，则不要使用 CAST 函数。只需将其删除并将其保留为：

```
WHERE
    dateend >= CURDATE() 
```

今天的任何日期时间值都将匹配。您不需要删除时间。例如。2012-12-14 01:00:00 将大于或等于 2012-12-14（CURDATE 函数将返回）。

# java - DispatcherServlet 中的 Bean 访问同级 bean

> ID：13882212
> 
> 赞同：0
> 
> 时间：2012-12-14T16:05:02.033
> 
> 标签：java, spring, servlets, spring-mvc

我们有一个 Web 应用程序，其中包含一个根应用程序上下文 ( `applicationContext.xml`) 和一个调度程序 servlet ( `dispatcher-servlet.xml`)，在我们的`web.xml`类似中定义：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext*.xml</param-value>
</context-param>

...

<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

由于访问限制，我们显然无法`DispatcherServlet`从根父上下文访问任何 bean。

但是，*我们希望能够*访问**兄弟**bean。例如，在我们的`dispatcher-servlet.xml`我们有：

```
<bean id="firstController" class="org.springframework.web.servlet.mvc.multiaction.MultiActionController">
    ...
</bean>

<bean id="secondController" class="org.springframework.web.servlet.mvc.multiaction.MultiActionController">
...
</bean> 
```

**我们如何**`secondController`从内部访问，`firstController`而不需要将其作为构造函数参数传入或设置为属性？

我们`WebApplicationContextUtils.getWebApplicationContext(...)`用来访问 root 中的兄弟姐妹`applicationContext.xml`，但我们想在子上下文中做同样的事情。（来自其中一个孩子。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:11:17.557

您可以`ApplicationContext`使用

`ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("dispatcher-servlet.xml")`

这是假设`dispatcher-servlet.xml`在类路径中。上下文对象必须被缓存。然后用于`context.getBean()`从任何地方访问 bean。

其他选项似乎是，使用重载方法，我们可以传递上下文属性名称。我没用过。 `WebApplicationContextUtils.getWebApplicationContext(ServletContext sc, String attrName)`

# javascript - 从字符串中获取变量

> ID：13882215
> 
> 赞同：3
> 
> 时间：2012-12-14T16:05:08.250
> 
> 标签：javascript, eval

有谁知道我如何从 JavaScript 中的字符串中选择一个变量？这就是我基本上想要实现的目标：

```
var myLang = "ESP";

var myText_ESP = "Hola a todos!";
var myText_ENG = "Hello everybody!";

console.log(myText_ + myLang); // This should trace "Hola a todos!" 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T16:07:46.840

```
var hellos = {
    ESP: 'Hola a todos!',
    ENG: 'Hello everybody!'
};

var myLang = 'ESP';

console.log(hellos[myLang]); 
```

我不喜欢把所有东西都放在全局范围内，然后字符串访问窗口属性；所以这是另一种方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T16:06:11.790

如果您的变量是在全局上下文中定义的，您可以这样做：

```
console.log(window['myText_' + myLang]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T16:08:26.777

```
var myLang = "ESP";

var myText = {
    ESP : "Hola a todos!",
    ENG : "Hello everybody!"
}

console.log(myText[myLang]); // This should trace "Hola a todos!" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T16:08:44.140

您可以使用`eval`它，但这是非常糟糕的做法：

```
console.log(eval("myText_" + myLang); 
```

我建议改用一个对象：

```
var myLang = "ESP";
var texts = {
    'ESP': "Hola a todos!",
    'ENG': "Hello everyboy!"
};
console.log( texts[ myLang ] ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T16:08:12.430

这不是一个好的做法，但您可以尝试使用`eval()`函数。

```
var myLang = "ESP";

var myText_ESP = "Hola a todos!";
var myText_ENG = "Hello everyboy!";

console.log(eval('myText_' + myLang)); 
```

# excel - 如何分别识别分组列和隐藏列？

> ID：13882216
> 
> 赞同：3
> 
> 时间：2012-12-14T16:05:09.463
> 
> 标签：excel, excel-2007, excel-2010, excel-interop, vba

我有一个包含几个分组列的 excel。在该组内，几列是隐藏的。（右键单击隐藏）。当组折叠时，所有列的 .Hidden 属性返回 true，这是我不想要的。有没有办法将原本隐藏的列与折叠组中的其他组列分开？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T17:41:55.307

不完全理解这个问题，但在 VBA 中我可以测试一下是否像这样隐藏了一个列：

```
Option Explicit

Sub TestFunction()

  'hide a few columns and then run me<<<<<<<<<<
  Dim mySearchColumn As Integer
  mySearchColumn = (CInt(Application.InputBox("input a column number")))

  MsgBox ("you wanted to know about column " & mySearchColumn & ". Is it hidden: " & IsColumnHidden(mySearchColumn))

End Sub

Function IsColumnHidden(targetColumn As Integer) As Boolean
    IsColumnHidden = False
    If Columns(targetColumn).EntireColumn.Hidden Then
        IsColumnHidden = True
    End If
End Function 
```

# ruby-on-rails - Heroku 数据库和 amazon s3 加密密钥存储，用于 HIPAA 合规性

> ID：13882218
> 
> 赞同：3
> 
> 时间：2012-12-14T16:05:10.067
> 
> 标签：ruby-on-rails, encryption, heroku, amazon-web-services, key

我希望获得有关存储 HIPAA 合规性以及 Amazon S3 文件存储安全性的数据库加密密钥的最佳方式的建议。我一直在搜索stackoverflow和谷歌搜索，但我无法完全掌握我*具体*做的事情是否足够。我不希望我做的事情与规定的方法不同，以使我的应用程序不安全。

目前，我有一个 Rails 应用程序，它使用 gem attr_encrypted 来加密数据库中敏感的患者识别数据，如姓名、ssn、地址等。我还将签名图像和患者图片等内容存储在 Amazon S3 中使用服务器端加密。我知道我不应该在应用程序或任何可能受到版本控制的文件中对数据库加密密钥进行硬编码，但我可以将它保存在 heroku 的 env 配置变量中吗？这些是如何保护的？它们与数据库有多分离（例如，如果有人进入 heroku 并窃取了数据库的副本，那么 ENV 变量是否也容易受到攻击？）？我目前将 AWS 密钥保存在 heroku 环境变量中，这安全吗？另外，用于加密的最佳密码是什么？我目前正在使用我拥有的书中随机页面中的 2 个句子。

如果我对我概述的任何程序非常天真，请告诉我，如果我提出天真的问题，我提前道歉。我想符合 HIPAA，但此外，我想知道我已经超出了 HIPAA 的要求，因为据我了解，HIPAA 合规性并不总是 = 实际上是安全的。

感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:18:58.520

（这更像是一个评论，但它太长了，无法添加为评论）：

@Eli：HIPAA 实际上并不强制要求任何特定技术。这很好，因为它是一条法律，而不是像不断变化的技术那样易变。

@OP：这是一份关于在 AWS 上构建 HIPAA 投诉应用程序[的白皮书。](http://media.amazonwebservices.com/AWS_HIPAA_Whitepaper_Final.pdf)它应该给你一些好主意。但 Eli 是正确的，因为您需要联系 Heroku 以获取他们的合规信息。或者，此时您最好从 Heroku 迁移出去。以我的经验，它是一个很好的原型设计平台，但是在处理生产环境时很容易（而且很昂贵）开始遇到它的限制。

`/dev/random`@FrederickCheung：如果熵不足，直接读取会阻塞。`/dev/urandom`如果伪随机不够好，通常建议使用或实际的加密库。

# java - JSF 页面模板 - 样式属性值的控制参数

> ID：13882221
> 
> 赞同：0
> 
> 时间：2012-12-14T16:05:25.220
> 
> 标签：java, jsf

我正在寻找为 xhtml 页面组件的样式属性添加值的解决方案。它可以是控件或 HTML 元素，这两种情况都适合我。

这是这个想法的一个例子

```
<ctrl:ctrlName ..... style="The_Parameter" /> 
```

或者

```
<div ..... style="The_Parameter" /> 
```

如果有人碰巧熟悉这个或任何可以帮助的技术，我非常感谢你的帮助，BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:14:44.597

if 可以指定这样的参数`<div ..... style="${parameter}" />`

假设您之前设置了该参数。

如果您使用的是 jstl，您可以使用例如：

`<c:set var="parameter" value="width: 400px;"/>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:18:24.010

您可以只使用引用 JSF 组件属性中的 bean 属性的 EL 表达式`style`，甚至可以使用普通的普通 HTML 元素。

例如

```
<h:panelGroup layout="block" style="#{bean.style}">...</h:panelGroup>
<div style="#{bean.style}">...</div> 
```

和

```
private String style;

@PostConstruct
public void init() {
    style = "background: pink;"; // Or something dynamic.
}

public String getStyle() {
    return style;
} 
```

我只喜欢`styleClass`resp。顺便说一句`class`。`style`将样式与标记（和模型）分开。

# java - JavaFX 应用程序启动时性能

> ID：13882222
> 
> 赞同：3
> 
> 时间：2012-12-14T16:05:34.217
> 
> 标签：java, eclipse, performance, javafx, benchmarking

我正在创建我的第一个 JavaFX 应用程序，这是一个陷入困境的版本：

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

public class Main extends Application
{

    final private StackPane mainpane    = new StackPane();

    @Override
    public void start(Stage primaryStage)
    {
        // main panel
        this.mainpane.setMinWidth(1024);
        this.mainpane.setMinHeight(768);

        // show
        primaryStage.setScene(new Scene(this.mainpane));
        primaryStage.setResizable(false);
        primaryStage.show();
    }

    public static void main(String[] args)
    {
        launch(args);
    }

} 
```

我尝试在三台计算机上启动上述程序，启动时间结果令人惊讶。所有机器都运行最新的 Java 版本。我使用[e(fx)clipse](http://efxclipse.org/)来构建我的应用程序。

我的开发机器是：

```
Intel Core i5-3330 (3GHz)
8 GB RAM
Windows 7 
```

在 Eclipse 中，应用程序在大约**1 秒**内启动。这可以。在同一台机器上启动的内置 JAR`java -jar`大约需要**3-4 秒**才能启动。这太慢了。

另一台机器是：

```
Intel Pentium Dual-Core E5400 (2.7GHz)
4 GB RAM
Windows Vista 
```

在这台机器上启动一个 JAR 需要**1 秒钟**……等等，什么？为什么？

最后：

```
2 x 2.26 GHz Quad-Core Intel Xeon
32 GB 1066 MHz DDR3 ECC
OS X 10.8.2 
```

应用启动时间：**2秒**

o_o

现在，我对优化 Java 应用程序知之甚少，我不知道如何进行分析基准测试，但这似乎很基础，不应该发生这种情况！

我能做些什么来确保在所有这些平台上实现快速、统一的启动时间？我已经在我的机器上启动了其他 JavaFX 应用程序，它们加载速度非常快（[Ensemble](http://www.oracle.com/technetwork/java/javafx/samples/index.html)在我的开发机器上大约需要 2 秒）。

我将不胜感激与 JavaFX 优化有关的任何其他提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:31:11.313

在捆绑应用程序时，我们所做的只是调用 JavaFX ant 任务，所以我不确定该建议什么:-( 唯一的区别是，打包应用程序时，查找 javafxrt.jar 的引导过程必须是完成我认为不需要那么长时间。

我猜你在 win32 系统上运行相同的 Java。顺便说一句，您在我们论坛上的消息显示为已审核，但我认为我在审核时做错了，因为它没有出现在群组中 - 对此感到抱歉:-(

谷歌群组有时表现得很奇怪。

# algorithm - 从 Delaunay 三角剖分计算 Voronoi 区域的大小？

> ID：13882225
> 
> 赞同：3
> 
> 时间：2012-12-14T16:05:37.180
> 
> 标签：algorithm, computational-geometry, voronoi

我想计算 2D 中一组 Voronoi 区域的面积的平均值和标准偏差（如果该区域延伸到无穷大，我将其剪裁到单位正方形）。

但是，如果可能的话，我想在不明确计算 Voronoi 区域的情况下从 Delaunay Triangulation 进行此计算？这甚至可能吗，还是直接计算 Voronoi 图更好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T17:30:56.003

为了计算顶点的 voronoi 区域，您需要围绕它迭代 1 环。那么该区域的面积定义为：

```
A = 1/8 * (sum for every adjacent vertex p_i) { (cot alpha_i + cot beta_i) * (p_i - c).Length² } 
```

![沃罗诺伊地区](../Images/e7b536c9c39acf81e5aedaa821b46b15.png)

在图像中，您可以看到整个浅红色的 voronoi 区域。它的一部分显示为深红色。这是总和累积的部分之一。`alpha`并且`beta`是图像中可见的角度。`c`是中心顶点位置。`p_i`是相反的顶点位置。`alpha`,`beta`并`p_i`在迭代时改变。`c`保持它的价值。

如果你计算每个相邻顶点的这些部分，你会得到 voronoi 区域面积的 8 倍。

# emacs - Emacs auto-complete.el 切换选项卡到空格键

> ID：13882230
> 
> 赞同：1
> 
> 时间：2012-12-14T16:05:46.620
> 
> 标签：emacs, autocomplete

我在 Emacs 中使用 auto-complete.el 已经很久了。这些天我使用 Emacs 的次数多了一点，我的左小指开始因为一直按 TAB 和 ctrl 而出现 RSI。我已经进行了一些键盘重新映射以缓解这种情况，但我通常每隔几个字符就按制表符来完成一个单词。有没有什么办法可以将 auto-complete.el 从使用 TAB 完成切换到使用我较少使用和更强的拇指的空格键？

**Edit2**：我使用的是一个非常旧的 auto-complete.el 版本，这意味着 @hd1 的建议并没有立即对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:14:36.787

转到[源](https://github.com/auto-complete/auto-complete/blob/master/auto-complete.el)并向下滚动到第 235 行显示，如果您设置变量`ac-trigger-key`，则可以更改用于触发完成的键。您应该`custom-set-variables`在 .emacs 文件的块中设置此变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T05:36:14.547

我认为 ac-complete-mode-map 是显示自动完成菜单时使用的键盘映射。不如试试这样的东西（这是我的设置）：

```
(define-key evil-insert-state-map (kbd "C-SPC") 'auto-complete) 
```

如果你不使用 evil，你需要找到另一个 keymap。也许特定模式的地图，甚至全局地图都可以。

# java - 我可以避免 Java 中的 catch 块吗？

> ID：13882232
> 
> 赞同：0
> 
> 时间：2012-12-14T16:05:55.373
> 
> 标签：java, exception, try-catch

在方法内部，我使用 Scanner 读取文件中的文本。这个文件并不总是存在，如果它不存在，我只想什么都不做（即不扫描）。当然，我可以像这样使用 try/catch：

```
String data = null;
try
{
    Scanner scan = new Scanner(new File(folder + "file.txt"));
    data=scan.nextLine();
    scan.close();
}
catch (FileNotFoundException ex)
{
} 
```

我的问题是我能做些什么来避免尝试/捕获？因为我不喜欢未使用的局部变量。我在想类似的东西：

```
String data = null;
File file_txt = new File(folder + "file.txt");
if (file_txt.exists())
{
    Scanner scan = new Scanner(file_txt);
    data=scan.nextLine();
    scan.close();
} 
```

但是当然，我在 Netbeans 中遇到了一个错误，我无法构建我的项目......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T16:07:02.193

**不**，这是检查异常。[try](http://docs.oracle.com/javase/tutorial/essential/exceptions/try.html)后面必须跟[catch](http://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html)块和/或[finally](http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html)块。有两种处理检查异常的方法。

**方法1：使用包装您的代码`try/catch/finally`**

**选项1**

```
try{
    Scanner scan = new Scanner(new File(folder + "file.txt"));
    data=scan.nextLine();
    scan.close();

}
catch (FileNotFoundException ex)
{
   System.out.println("Caught " + ex);
} 
```

**选项 2**

```
try{
    Scanner scan = new Scanner(new File(folder + "file.txt"));
    data=scan.nextLine();
    scan.close();

}
finally
{ 
      System.out.println("Finally ");
} 
```

**选项 3**

```
 try{ 
     Scanner scan = new Scanner(new File(folder + "file.txt"));
     data=scan.nextLine();
     scan.close();
     }catch(FileNotFoundException ex){
          System.out.println("Caught " + ex );
     }finally{
          System.out.println("Finally ");
     } 
```

**方法2：使用抛出异常`throw`并列出所有异常with`throws`子句。**

```
 class ThrowsDemo {

    static void throwOne() throws IllegalAccessException {
        System.out.println("Inside throwOne.");
        throw new IllegalAccessException("demo");
    }

    public static void main(String args[]) {
        try {
            throwOne();
        } catch (IllegalAccessException e) {
            System.out.println("Caught " + e);
        }
    }
    } 
```

**注意：** Checked Exception 意味着编译器强制你写一些东西来处理这个错误/异常。因此，AFAIK，除了上述方法外，没有任何替代检查异常处理的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:07:27.453

`FileNotFoundException`被检查异常，由于[捕获或指定行为](http://docs.oracle.com/javase/tutorial/essential/exceptions/catchOrDeclare.html)，您需要在方法声明的 throws 子句中捕获（或）指定它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T16:09:05.103

怎么样

```
 catch (FileNotFoundException ex)
   {
       // create a log entry about ex
   } 
```

# regex - 尝试使用正则表达式理解现有 TCL 脚本的一部分

> ID：13882234
> 
> 赞同：1
> 
> 时间：2012-12-14T16:06:01.697
> 
> 标签：regex, tcl

我一直在研究这个，因为我正试图在我的商店中使用路由器时开始使用 TCL。我们有一位技术人员正在编写我可以访问的脚本，因此我正在尝试从他的工作中学习。

我在一个脚本的开头遇到了以下部分，我一直在努力理解并且进展甚微。我希望你能帮助任何解释。

该部分设置提示，并创建稍后在脚本中使用的提示设置。

```
set prompt "(%|#|\\$) $"      ;# default prompt
catch {set prompt $env(EXPECT_PROMPT)}
set spec "(,|%|\\)|\\(|;|:|\\.|\\*|\[|\]| |/|{|}|\\||\\$|\"|\'|\\\\|-)" 
```

稍后，变量spec的值使用如下：

```
set cmd "show clock"
regsub -all $spec $cmd "_" cmde 
```

所以我真的很想知道发生了什么，但我的“网络 foo”在这方面完全让我失望。

谢谢！马克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T17:27:45.803

regsub 命令将一组“特殊”字符转换为下划线。正`spec`则表达式可能更容易理解（也更容易阅读），如下所示：

```
set spec {[][,%)(;:.* /{}|$"'\\-]} 
```

[括号、逗号、百分号、圆括号、分号、冒号、点、星号、空格、斜杠、大括号、管道、美元、双引号、单引号、反斜杠、连字符 -- （如果你想在字符类中放置括号，您必须将右括号作为第一个字符）]

稍微推断一下，如果目标是将所有非字母数字字符更改为下划线，请这样做

```
regsub -all {\W} $cmd "_" cmde 
```

`\W`是“非单词字符”的正则表达式简写

[http://tcl.tk/man/tcl8.5/TclCmd/re_syntax.htm](http://tcl.tk/man/tcl8.5/TclCmd/re_syntax.htm)

另一种设置提示变量的方法，以及我将如何编写它：

```
if {[info exists env(EXPECT_PROMPT)]} {
    set prompt $env(EXPECT_PROMPT)
} else {
    set prompt {[%#$] $}
} 
```

如果您正在学习 Tcl，请使用[Tcl 教程](http://tcl.tk/man/tcl8.5/tutorial/tcltutorial.html)。

# sql-server - 为 Windows Azure 虚拟机打开端口

> ID：13882236
> 
> 赞同：1
> 
> 时间：2012-12-14T16:06:09.307
> 
> 标签：sql-server, azure, port, virtual-machine, sql-server-2012

我的 Azure 虚拟机上安装了一个 Sql Server 实例。我已将 Sql Server 的端口更改为...比如说 4849。我在 Windows 防火墙中打开了此端口，并为 TCP 和 UDP 建立了端点。[我通过http://www.yougetsignal.com/tools/open-ports/](http://www.yougetsignal.com/tools/open-ports/)检查端口是否打开并且它仍然关闭。我在这里想念什么？

我在 Windows Server 2012 上使用 SQL Server 2012 SP1。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T18:01:09.570

这需要外界访问吗？如果是这样，您需要在防火墙上打开它，并让防火墙将该端口上的流量转发到您的 VM。

此外，您可能需要检查 VM 网络适配器的配置，如果它使用 NAT 共享主机 IP 地址，您可能会遇到问题，具体取决于您使用的主机，我发现桥接模式效果最好，这样VM 可以在网络上使用它自己的 IP 地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T12:05:05.423

不确定该服务如何检查打开的端口，但如果它通过发送“ping”命令来检查，那么它可能无法正常工作。你需要做额外的事情才能工作。请查看此博客文章了解更多详细信息：http: [//blogs.biztalk360.com/windows-azure-virtual-machines-virtual-network-may-not-ping-automatically/](http://blogs.biztalk360.com/windows-azure-virtual-machines-virtual-network-may-not-ping-automatically/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-19T10:02:05.230

我想你也可以试试这个来为 Azure 虚拟机启用 PING 命令：http: [//blogs.biztalk360.com/windows-azure-virtual-machines-virtual-network-may-not-ping-automatically/](http://blogs.biztalk360.com/windows-azure-virtual-machines-virtual-network-may-not-ping-automatically/)

# c# - 使用 Lambda 表达式从面板控件中删除所有文本框

> ID：13882238
> 
> 赞同：1
> 
> 时间：2012-12-14T16:06:12.877
> 
> 标签：c#, windows-forms-designer

我正在尝试从事件按钮单击中删除`textbox`控件：`panel`

```
private void button2_Click(object sender, EventArgs e)
{
   panel1.Controls.OfType<TextBox>().ToList().Clear();
} 
```

但它不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:08:42.570

您的方法不起作用的原因是您正在创建一个新列表，未连接到面板（您的`ToList`呼叫），然后清除该列表，实际上什么都不做。

您需要直接删除`Controls`集合中的每个项目：

```
 var textBoxes = panel1.Controls.OfType<TextBox>().ToList();
 foreach(var box in textBoxes)
     panel1.Controls.Remove(box); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:09:16.800

如果您想从表单中删除控件而不是简单地清除它们的内容（或从您刚刚创建的列表中删除它们），您需要将它们从面板中删除。不过，您仍然可以通过单线来完成此操作：

```
panel1.Controls
      .OfType<TextBox>()
      .ToList()
      .ForEach(t => panel1.Controls.Remove(t)); 
```

# javascript - Crockford 风格的上下文着色是否在任何代码编辑器中实现？

> ID：13882241
> 
> 赞同：73
> 
> 时间：2012-12-14T16:06:19.630
> 
> 标签：javascript, editor, syntax-highlighting, sublimetext2

我观看了 YUIConf 2012 的一段视频，Douglas Crockford 在其中发表了关于在 JavaScript 中实现 monad 的演讲。在这次演讲中，他给出了一个代码示例，该示例利用了他所谓的“上下文着色”，它摒弃了通过语言语法着色的想法，并为不同级别的范围引入了不同的颜色。这是视频特定部分的链接。

[http://www.youtube.com/watch?feature=player_embedded&v=dkZFtimgAcM#t=15m58s](http://www.youtube.com/watch?feature=player_embedded&v=dkZFtimgAcM#t=15m58s)

**这个上下文着色方案是由 JavaScript 或任何语言的任何代码编辑器实现的吗？**

我使用 Sublime Text，这个编辑器就像我遇到的所有其他代码编辑器一样允许将颜色应用于语法。我不确定插件是否可以解决这个问题，或者是否必须从头开始设计编辑器以允许这种上下文着色方案。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-06T00:31:52.510

我刚刚看了他的视频，很棒的东西。必须[**试一试**](https://github.com/daniellmb/JavaScript-Scope-Context-Coloring)，或者在 GitHub [https://github.com/daniellmb/JavaScript-Scope-Context-Coloring](https://github.com/daniellmb/JavaScript-Scope-Context-Coloring)上查看项目。

![JavaScript 范围上下文着色](../Images/214f47499b05d98ddd198d99188ec4ed.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-02-13T06:35:14.733

## 维姆[（GitHub）](https://github.com/bigfish/vim-js-context-coloring)：

![在此处输入图像描述](../Images/600e9b1ad111c46c56cf7bb8146fecd2.png)

## Emacs [（GitHub）](https://github.com/jacksonrayhamilton/context-coloring/)：

![Emacs 中上下文着色的屏幕截图。](../Images/9e1d8b00410ccc7a7f91b903a17aa473.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-15T14:16:14.623

截至 2013 年 2 月 13 日，Crockford 已向 JSLint 添加了实验性的上下文着色功能。

[https://plus.google.com/118095276221607585885/posts/FzKnHk96m2C](https://plus.google.com/118095276221607585885/posts/FzKnHk96m2C)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-07-13T16:51:39.160

现在有一个 sublime 包：[https ://github.com/mazurov/sublime-levels](https://github.com/mazurov/sublime-levels)

它还在[http://mazurov.github.io/eslevels-demo/有一个在线现场演示](http://mazurov.github.io/eslevels-demo/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-18T17:16:08.867

BlueJ 有它 (1) - 但它也可能没有。javascript 中范围的上下文着色肯定会比任何其他语言（例如 java ）更复杂 - 这个编辑器可以使用它。

写括号的人可能最终会这样做，因为他们崇拜 Crockford (2,3)

为什么不和他们一起帮助编写它，或者至少告诉他们这样做呢？

资料来源：

1) [http://blogs.kent.ac.uk/mik/2010/05/bluej-3-0-whats-new/](http://blogs.kent.ac.uk/mik/2010/05/bluej-3-0-whats-new/)

2) [https://github.com/adobe/brackets/issues/search?q=Crockford](https://github.com/adobe/brackets/issues/search?q=Crockford)

3) [http://www.adobe.com/devnet/html5/articles/bracket-code-architecture.html](http://www.adobe.com/devnet/html5/articles/bracket-code-architecture.html)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-19T08:38:53.110

从来没听说过。这会很棒，但它需要一个特定于 JavaScript 的词法分析器，并且在出现任何语法错误时它可能无法工作。

# java - Hibernate 3.3 在@IdClass 中继承@DiscriminatorColumn

> ID：13882242
> 
> 赞同：2
> 
> 时间：2012-12-14T16:06:26.340
> 
> 标签：java, sql, hibernate, jpa, persistence

我在 id 类中的鉴别器列存在继承问题。该表将成功创建，但每个条目在描述符列中获得“0”值。

这是我的基类：

```
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "type", discriminatorType = DiscriminatorType.INTEGER)
@IdClass(BasePK.class)
@SuppressWarnings("serial")
public abstract class Base implements Serializable {

@Id
protected Test test;

@Id
protected Test2 test2;

@Id
private int type;

....
} 
```

这是我的基础 pk 课程：

```
@Embeddable
public static class BasePK implements Serializable {

@ManyToOne
protected Test test;

@ManyToOne
protected Test2 test2;

@Column(nullable = false)
protected int type;

...
} 
```

我有几个这样的子类：

```
@Entity
@DiscriminatorValue("1")
@SuppressWarnings("serial")
public class Child extends Base {

} 
```

因此，如果我坚持一个新的 Child 类，我希望将“1”作为类型，但我得到“0”。当我从 BasePK 类中删除类型并直接添加到我的 Base 类中时，它可以工作。但是类型应该是键的一部分。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:24:02.887

我做了一些改变，

我跳过了额外的可嵌入类，因为它们是相同的。

我必须在注释和子类的构造函数中设置类型值，否则休眠会话无法处理具有相同值的不同类（得到 NotUniqueObjectException）。

```
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "type", discriminatorType = DiscriminatorType.INTEGER)
@IdClass(Base.class)
public abstract class Base implements Serializable {
    @Id @ManyToOne protected Test test;
    @Id @ManyToOne protected Test2 test2;
    @Id private int type;
}

@Entity
@DiscriminatorValue("1")
public class Child1 extends Base {
    public Child1(){
        type=1;
    }
}

@Entity
@DiscriminatorValue("2")
public class Child2 extends Base {
    public Child2(){
        type=2;
    }
} 
```

# javascript - 使用 jQuery 删除 HTML 文档中的空标签

> ID：13882245
> 
> 赞同：1
> 
> 时间：2012-12-14T16:06:36.167
> 
> 标签：javascript, jquery

我正在尝试使用 jquery 删除空的 p 标签。

我已经写了以下内容，但它似乎不起作用。

```
 $( 'p:empty' ).remove(); 
```

这是一个现场演示...

[http://jsfiddle.net/CuJXG/](http://jsfiddle.net/CuJXG/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:08:19.367

那是因为你的元素不是空的。

做这个 ：

```
$('p').filter(function(){return $(this).text().trim().length==0}).remove(); 
```

[示范](http://jsfiddle.net/7qDdV/)

正如wirey所指出的，要使其在IE8上运行，您应该这样做：

```
$('p').filter(function(){return $.trim($(this).text()).length==0}).remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:08:40.283

您的示例标签内有空格`<p>`，删除它们，它将起作用。为了更加一致，只需编写自己的过滤器功能，就像dystroy建议的那样。

# f# - Intellisense 错误和#I 与脚本文件

> ID：13882250
> 
> 赞同：4
> 
> 时间：2012-12-14T16:06:47.530
> 
> 标签：f#, visual-studio-2012

在使用脚本文件时，Intellisense 和 #I 与 #r 的结合是否存在任何已知问题？

我注意到的是，如果我使用#r 和完整路径引用程序集，我会得到智能感知。

如果我使用#I 添加到我的路径而不是使用#r 而不使用程序集的完整路径，则我无法获得该程序集中类型的智能感知。

这是一个已知的问题？

编辑：

这是示例。

这不会提供 Intellisense，但会运行。

```
#I @"C:\PathToAssembly"
#r "MyAssembly.dll"

open Some.NameSpace //<-- gives errors in intellisense (module not found)
                    // runs just fine when sending to fsi 
```

下一个一切正常的例子。

```
#r @"C:\PathToAssembly\MyAssembly.dll"

open Some.NameSpace <-- no error in intellisense. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-02T11:47:59.503

MS Connect 中有一个案例似乎是同样的问题：

[http://connect.microsoft.com/VisualStudio/feedback/details/733523/f-3-0-beta-intellisense-issues-of-interactive-enviroment](http://connect.microsoft.com/VisualStudio/feedback/details/733523/f-3-0-beta-intellisense-issues-of-interactive-enviroment)

它已被关闭为不可复制，但原始创建者在解决方法部分发布了一些详细信息，表明它是由同一文件夹中的 FSharp.Core DLL 引起的。

您是否可能在此文件夹中也有 FSharp.Core ？如果是这样; 删除它并让它来自 GAC 可能会解决问题（尽管对我来说这听起来仍然是一个错误）。

# ios - ipad图像交换问题

> ID：13882252
> 
> 赞同：-1
> 
> 时间：2012-12-14T16:06:50.900
> 
> 标签：ios, ipad, safari

我遇到了这个非常奇怪的错误，似乎在任何地方都找不到任何信息。

基本上，我的网站上有很多图片，就像你一样。任何代码都没有问题 - 它必须是我在所有浏览器中用作 PC 的 iPad + 我的 iPhone 工作正常。

基本上，它似乎偏爱页面上的一个特定图像，并用该图像替换其他图像？！所以我在屏幕上很多不同的地方都得到了相同的图像，那里应该有很多不同的图像……如果这有意义的话。

有没有其他人遇到过这个问题并且对如何解决有任何想法？

非常感谢

编辑：值得指出的是，我使用的是 3G 连接，尽管它似乎在我的 iPhone 上使用 3G 时可以正常工作——而且它不能缓存问题，因为我已经清除了很多次，而且每张图像总是有一个不同的名字...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:42:21.143

您是否尝试过在 Safari 上查看您的网站？以及其他浏览器（FireFox/Chrome 等）

# jquery - 使用 .click(function(){ 更改 DIV 背景颜色

> ID：13882265
> 
> 赞同：6
> 
> 时间：2012-12-14T16:07:39.480
> 
> 标签：jquery, colors, background, click

如何使用 jQuery 更改背景颜色 .click(function(){

**div 正常，绿色，点击后变为红色背景色**

```
<div class="stileone">
   Div Content
</div> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T16:12:07.760

```
$(".stileone").on("click", function() {
    $(this).css("background", "red");
}) 
```

[**演示**](http://jsfiddle.net/7vZnH/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T17:01:55.320

我知道这里有很多答案，但我想我会指出，有很多方法可以做到这一点，而且许多方法的目的略有不同。

> ***基本的 CSS 伪类旨在处理这样的事情，但是，它们并不总是跨浏览器兼容。例如，我认为以下内容不适用于 IE >=8，但它适用于 Chrome 和 IE9。***

```
div:active { background-color: red; } 
```

> ***然后当然基本单击以更改css。当然，这将使更改永久化，而无需任何其他命令。***

```
$("div").on("click", function() {
    $(this).css("background-color", "red");
});
//  OR
$("div").on("click", function() {
    $(this).css({ backgroundColor: "red" });
}); 
```

> ***如前面的答案所示，点击切换类。在这种情况下，您创建一个具有所需背景的类，然后根据单击操作打开和关闭该类。***

```
$("div").on("click", function() {
    $(this).toggleClass('back-red');
}); 
```

> ***如果你需要一个 jQuery 方式来模仿`:active`，那么你可以使用 mousedown/up 而不是简单的单击。这将允许你有效地“跨浏览器”模仿 CSS 的 ':active' 特性。***

```
$("#div5").on("mousedown", function() {
    $(this).toggleClass('back-red');
})
.on("mouseup", function(e) {
    $(this).toggleClass('back-red');
}); 
```

> ***最后，我现在能想到的最后一个功能方法是使用目前在 NEWEST jQuery (1.8+) 中被破坏的方法，但是，在所有其他 jQuery (1.72-) 中它似乎工作正常。它被称为“切换”方法，通常用于定义一个元素的显示和隐藏。但是在旧版本中，它有一个替代功能，您可以在其中定义回调，从而创建自己的动画。***

```
$("div").toggle(function() {
    $(this).css("background-color", "red");
}, 
function() {
    $(this).css("background-color", "");
}); 
```

# [在此处查看示例！](http://jsfiddle.net/SpYk3/xk6Ut)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T16:13:53.537

与`.on()`. 您`<div.stileone>`在事件`'click'`发生时绑定一个事件，然后`<div.stileone>`在函数中使用`$(this)`. 每次触发事件时，toggleClass都会*添加/删除类。*

jQuery：

```
$('.stileone').on('click',function(){
  $(this).css('backgroundColor','red');
  // OR: if you want to work with a class
  $(this).toggleClass('redClass');
}); 
```

CSS：

```
.redClass {
background-color: red;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-14T16:13:50.297

您需要找到 div 的 onclick 事件，然后使用

```
.css("background-color:#00000;); 
```

# r - 如何在 R 中沿直线或曲线书写文本？

> ID：13882266
> 
> 赞同：4
> 
> 时间：2012-12-14T16:07:44.787
> 
> 标签：r, graph, plot, lm

我有一个数据集，我正在尝试使用`lm()`. 那部分是直截了当的。

我还可以使用`abline( lm( x ~ y ) )`.

但是现在我想写拟合的参数，比如`adjusted r-squared`沿着线。
因此，如果我悬停绘制不同的数据集及其各自的拟合，我应该能够沿线打印一些拟合值。

是否可以在 R 中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:25:46.997

是的，直线很容易做到，曲线更复杂，等宽字体可能更简单。基本技术就是转换你的线性方程，这样你就可以推导出一个带有角度的极坐标表达式。使用该角度通过参数（来自图形参数）设置`text`命令中文本的角度。`srt`

对于曲线，它会有点棘手（可能通过非比例字体简化）。您需要为每个字母计算出一个角度的向量，然后是每个字符的宽度（使用`strwidth`）。你会为你的角色生成一个角度和位置的向量，并循环调用它们`text`。您在这里需要一个循环，因为`text`不能为`srt`参数采用向量。

# database - DDBMS中的初级水平碎片-简单谓词的完整性

> ID：13882268
> 
> 赞同：5
> 
> 时间：2012-12-14T16:07:48.450
> 
> 标签：database, database-fragmentation

“简单谓词的一个重要方面是它们的完整性；另一个是它们的最小性。`simple predicates Pr:`当且仅当每个应用程序访问属于根据定义的任何最小项片段的任何元组的概率相等时，一组被称为完整的到`Pr2`.

`Example:-``PROJ`考虑 中给出的关系碎片`Example 3.8`。如果唯一访问的应用程序`PROJ`要根据位置访问元组，则集合是完整的，因为每个片段`PROJi (Example 3.8)`的每个元组都具有相同的被访问概率。但是，如果有第二个应用程序只访问那些项目元组`budget is less than or equal to $200,000`，那么`Pr is not complete`. 由于第二个应用程序，每个元组中的一些元组`PROJi`具有更高的被访问概率。为了使谓词集完整，我们需要添加`(BUDGET <= 200000, BUDGET > 200000) to Pr`：

`Pr = {LOC=“Montreal”, LOC=“New York”, LOC=“Paris”, BUDGET <= 200000, BUDGET > 200000}"`

我上传了图 3.3 和示例 3.8：-

[图 3.3](http://www.bwor.net/download/Fig_3_3.jpg)

[示例 3.8](http://www.bwor.net/download/Example_3_8.jpg)

现在我不明白我怎么知道 Pr 是否完整

那么“每个应用程序访问属于任何 minterm 片段的任何元组的**概率相等**”是什么意思

任何示例如何计算每个应用程序访问任何元组的**相等概率？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-15T09:11:49.987

[我从 Özsu 和 Valduriez的《分布式数据库系统原理》中](http://www.springer.com/computer/database+management+%26+information+retrieval/book/978-1-4419-8833-1)看到这个例子有点不清楚。等概率只是意味着应用程序**没有** `WHERE`没有单独片段的条件。因此，如果有一个应用程序使用条件匹配元组，则`WHERE budget >= 200 000`必须将其添加`(BUDGET <= 200000, BUDGET > 200000)`到谓词集中。

如果您在网上搜索 minterm 片段，您会发现大部分是学术讲义，并且大多数笔记与书中的示例相同。在现实世界中，查询可能会使用更广泛的条件，并且如果集合应该是完整的，则会产生 1001 个片段（我会挑战任何人提出需要使一组谓词完整的实际和真实世界的示例）。

# php - 具有名称 PHP 的嵌套数组

> ID：13882269
> 
> 赞同：-1
> 
> 时间：2012-12-14T16:07:56.593
> 
> 标签：php, arrays, nested

我正在找人来解决这个问题。所以我想将数组添加到数组中，但名称如下：

```
array( 
   'names' = > array( 'firstname' => 'jean' )
); 
```

第二次我希望附加这样的另一个项目：

```
array( 
   'names' = > array( 'firstname' => 'jean'),
               array(  'age' = > '23')        

); 
```

等等

```
array( 
   'names' = > array( 'firstname' => 'jean'),
               array(  'age' = > '23'),
               array(  'job' = > 'programmer')

); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:10:03.920

```
$a = array('names'=>array());
$a['names'][] = array( 'firstname' => 'jean');
$a['names'][] = array(  'age' = > '23');
$a['names'][] = array(  'job' = > 'programmer'); 
```

或者你可以使用`array_push` [http://php.net/manual/en/function.array-push.php](http://php.net/manual/en/function.array-push.php)

```
$a = array('names'=>array());
array_push($a['names'], array( 'firstname' => 'jean'));
array_push($a['names'], array(  'age' = > '23');
... 
```

至于@deceze 评论，正确的结构是：

```
array(
    array('firstname' => '', 'age' => 100, 'job' => ''),
    array('firstname' => '', 'age' => 100, 'job' => ''),
    array('firstname' => '', 'age' => 100, 'job' => '')
) 
```

你可以把它作为一个子数组放在你的结构中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:10:53.460

```
$arr['names'] = array();
$arr['names'][] = array('firstname' => 'jean');
$arr['names'][] = array('age' => '23');
$arr['names'][] = array('job' => 'programmer'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T11:15:28.477

对不起，我要在这里逆流而上。对我来说，如果你的数组看起来像这样，真的，*真的*，**真的**会更有意义：

```
array('names' => array('jean' => array('age' => '23',
                                       'job' => 'programmer'))); 
```

为了实现这一点，如果你想动态构建这种类型的数组：

```
$main = array('names' => array());
//get data from db or something
$main['names'][$data['firstname']] = array('age' => $data['age'],
                                           'job' => $data['job']); 
```

只是更有意义。列出所有的名字：`array_keys($main['names']);`这个诀窍，所以数组键仍然指示它携带的实际数据。
获取属于某个人的所有数据：

```
$allNames = array_keys($main['names']);
echo $allNames[0].' is a '.$main['names'][$allNames[0]]['age'].' year old '.$main['names'][$allNames[0]]['job'].'<br/>'; 
```

在这种情况下，输出将是*“Jean 是一个 23 岁的程序员”*同样，这可能不是您问题的直接答案，但是当您在确定什么属于什么以及将来
遇到问题时，这可能会很有用。当然，对象是另一种避免这种情况的方法`age``job``name`

# sharepoint - SPListItem 充当文件夹

> ID：13882271
> 
> 赞同：0
> 
> 时间：2012-12-14T16:07:57.810
> 
> 标签：sharepoint, sharepoint-2010, ribbon

```
var item = SPContext.Current.List.Items.Add();
item["ContentTypeId"] = SelectedCurrentType.Id;
item["SomeField"] = ...
//make some fields changes
item.Update(); 
```

但是当我创建这个项目时，我得到一个包含所有字段的文件夹。在列表视图中没有

```
<a onfocus="OnLink(this)" href="/.../Lists/.../AllItems.aspx?RootFolder=%2F..%2FLists%2F..%2F..&amp;FolderCTID=0x0100CBE0798399&amp;View={D1DDC726-FC9C-40D3-A07B-5EAFE2286C66}" onclick="                javascript:EnterFolder(&quot;/.../Lists/.../AllItems.aspx?RootFolder=&quot; + escapeProperly(&quot;/.../Lists/.../...&quot;) + '&amp;FolderCTID=0x0100CBE079839FA443AB3C64E9BA763E776AC0FD9&amp;View={D1DDC726-FC9C-40D3-A07B-5EAFE2286C66}');return false;">Test</a> 
```

在“操作”部分的功能区上，我有一个“打开”按钮，
出了什么问题？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:33:53.510

答案是

```
<SharePoint:CreatedModifiedInfo ControlMode="Display" runat="server"/> 
```

其实不知道为什么，但是这个控件让自定义表单变得很奇怪。所以解决方案是从自定义新表单中删除此控件

# php - 隐藏文件夹和扩展

> ID：13882275
> 
> 赞同：0
> 
> 时间：2012-12-14T16:08:07.983
> 
> 标签：php, file, variables

如果制作了一个显示文件夹内容的脚本，但我不想显示文件夹和扩展名。

有谁知道如何做到这一点

```
// open this directory 
$myDirectory = opendir("../website");

// get each entry
while($entryName = readdir($myDirectory)) {
$dirArray[] = $entryName;
}

// close directory
closedir($myDirectory);

//  count elements in array
$indexCount = count($dirArray);

// sort 'em
sort($dirArray);

// print 'em
// loop through the array of files and print them all
for($index=0; $index < $indexCount; $index++) {
if (substr("$dirArray[$index]", 0, 1) != "."){ // don't list hidden files
print("<ul id=\"navb\" class=\"page\"><a href=\"?mp=$dirArray[$index]\">$dirArray[$index]</a></ul>");
print("\n");
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:14:01.483

你只需要[`is_dir`](http://php.net/manual/en/function.is-dir.php)和[`pathinfo()`](http://php.net/manual/en/function.pathinfo.php)。

```
foreach(glob( $myDirectory . '/*') as $file)
{

  if( is_dir($file) || substr($file,0,1) == '.')
    continue;

  $info = pathinfo($file);

  echo '<li>' . $info['filename'] .'</li>';

} 
```

# c# - 我应该用 C# 还是 VBA 开发这个应用程序？

> ID：13882278
> 
> 赞同：3
> 
> 时间：2012-12-14T16:08:13.350
> 
> 标签：c#, vba, project-planning

首先，这个问题并不是要讨论 C# 与 VBA 的整体优点。我有一个项目，其中有一些更适合 C# 的部分和其他似乎更适合 VBA 的部分，我正在尝试找出如何最好地构建我的开发，因为我没有时间以几种不同的方式构建它并且看看哪个更快。我在这里发布这个问题是因为我可能没有考虑过一种语言的某些东西，这显然使它成为该项目更具吸引力的选择。

该项目：

1.  通过 Web 服务查询或刷新链接到该列表的 Excel 工作表的内容，从 Sharepoint 列表中获取数据集。

2.  使用集合字段之间的不等关系将 Sharepoint 数据集连接到工作簿文件名的 Excel 数据集。这将是多对多的。

3.  对于每组匹配项中的每个工作簿，将其部分数据导出到不同文件夹中的新工作簿，以便每个匹配组位于其自己的文件夹中。

4.  将所有文件夹压缩到一个存档中。

第 1 步似乎 .NET 或 VBA 都可以满足要求。第 2 步似乎更适合 C#，因为它涉及使用 LINQ 而不是一堆 VBA 循环更容易完成的连接查询。第 3 步涉及 Excel 数据传输，这使 VBA 成为更好的候选者，因为我读过很多帖子都同意 VBA 比 .NET Interop for Office 操作更快。第 4 步似乎在 C# 中会更好，因为我可以使用 DotNetZip 而不必依赖 shell 命令。

但是 C# 和 VBA 的混合比单一语言解决方案更不方便维护。所以我不确定我应该采取什么方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T18:10:17.807

您提到的支持 VBA 的唯一一点是与 Excel 交互时的性能提升。

与 VBA 相比，从 C# 与 Excel 交互的开销与其他任务的成本相比可以忽略不计：数据检索、计算......

如果不是，则意味着您做的不好：例如填充值或逐个应用单元格格式。

作为一般规则，如果应用程序的维护者没有足够的开发技能来使用 C#**并且**不想学习一门新语言，则应该只使用 VBA。

通常情况下，维护者是只知道如何制作基本宏的最终客户，如果您的 C# 插件有任何问题，将完全无能为力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T22:28:43.480

看你的要求...

第 1 部分 - Excel 在获取 xml 数据或进行 Web 服务查询时没有真正的问题。我在 Excel 2002 中做过这种事情。

第 2 部分 - 也许你是对的，数据集成在语法上会更好，并且可能在 C# 中得到更好的优化 - linq 非常方便。但这取决于集成是什么。

第 3 部分绝对是 vba 领域，所有更新等。

通过不打开 cmd 窗口，在 c# 中执行此操作的第 4 部分可能看起来更漂亮的 UI - 但代码真正运行的频率与隐藏它们的难易程度。

其他考虑...

除非您进行后期绑定，否则您的 C# 应用程序将与 Excel 版本绑定（当您添加引用时包含 excel 版本会赠送）。如果您部署了新版本的 Excel，那么您必须更新您的 C# 应用程序，其中 vba 最有可能“正常工作”。

资源也不应该有问题——你说你有 C# 开发人员，任何有能力称自己为开发人员的人都应该能够很快适应他们可能会为 .net 开发引用的主要程序语言和库同样在 C# 或 VB.Net 中 - 这不像你在 F# 中编写它。

由于您有一个要合并的 excel 数据集，因此将所有依赖项保持在一起还有很多话要说。

vba 最大的缺点是，如果你把它交给其他人，他们可能会想修补它而不会被编译。:)

考虑到所有因素，我建议使用 VBA 解决方案，因为它将是这项工作最合适的工具。不过，没有任何“引人注目的问题”会极大地改变它。

# php - 表单发布到数据库以及贝宝

> ID：13882280
> 
> 赞同：0
> 
> 时间：2012-12-14T16:08:17.827
> 
> 标签：php, paypal

我有一个表单，提交时会收集数据并在我的数据库中写入字段的值。该表单使用对响应页面的发布请求，然后该响应页面连接到数据库并将所有必需的字段发布到我的数据库。

我还有一个称为付款的单选按钮，其中一个选项是贝宝。我的目标是最终将字段发布到数据库，但同时也将下面的表单数据一次性发布到我的贝宝帐户

```
<form name="_xclick" action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_xclick" />
<input type="hidden" name="business" value="myemails" />
<input type="hidden" name="currency_code" value="GBP" />
<input type="hidden" name="item_name" value="Digital Download" />
<input type="hidden" name="amount" value="9.99" />
<input type="hidden" name="return" value="http://myurl/form.htm" />
<input type="hidden" name="notify_url" value="http://myurl/example/ipn.php" />
<input type="image" src="btn_buynow_LG.gif" border="0" name="submit" alt="Paypal" />
</form> 
```

我知道我可以使用下面的命令重定向到另一个具有表单的页面

```
if($_REQUEST['payment']=="Paypal") { redirect to another page with the code above, but the user has to click on submit again} 
```

但是，我只想让用户单击一次提交，然后我的数据库记录详细信息，然后自动将它们重定向到贝宝。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:14:23.323

这很简单，只需执行以下操作：

```
if($_POST['submit']) {
    // save the POSTed data to the DB
}

// now for PayPal
if($_POST['payment'] == "Paypal") {
    // now connect to PayPal API and process a payment
} 
```

我建议**只**在需要和/或在需要的地方`$_REQUEST`使用和使用。 **`$_GET``$_POST`**

 *** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T16:19:47.860

不确定是否理解您的问题，但您应该在页面加载时将临时数据创建到您的数据库中，并且当 paypal api 回调调用您的 inp.php 时，将您的临时数据转换为经过验证的数据**

# sql - 比较多个表的列，一组表具有前缀并且比其他表具有更少的列

> ID：13882284
> 
> 赞同：1
> 
> 时间：2012-12-14T16:08:28.000
> 
> 标签：sql, oracle10g

嗨，我需要将一组表的列与另一组表进行比较。让我解释一下结构。第二组表取自第一个表，列数较少。

```
TABLE NAMES:
W_table_1_fact
W_tables_2_fact
.........
........
W_table_n_dim
W_table_1_dim
W_tables_2_dim
.........
........
W_table_n_dim

ABC_W_table_1_fact
ABC_W_tables_2_fact
.........
........
ABC_W_table_n_dim
ABC_W_table_1_dim
ABC_W_tables_2_dim
.........
........
ABC_W_table_n_dim 
```

现在带有前缀 ABC 的表的数据和列取自原始表，除了少数缺失的列和可能的一些数据（现在不关心）。我需要检查我们需要的列是否已加载到带有前缀 ABC 的表。所以我需要进行查询，告诉我缺少哪些列，任何人都可以帮我查询。如果您需要任何信息，请随时询问我会提供任何所需的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:35:21.427

所以你想查看源中的列（不是数据），而不是整个表列表的目标？你可以为此在 USER_TAB_COLUMNS 上做一个 MINUS。例如：

```
with tables as
 (select table_name t1, 'ABC_'||table_name t2 --<--- prefixed table 2 based on tables name
    from user_tables 
   where table_name in ('W_TABLE_1_FACT', 'W_TABLES_2_FACT' ))
select t.*,
       cursor (select column_name
                  from user_tab_columns
                 where table_name = t.t1
                minus
                select column_name 
                  from user_tab_columns 
                 where table_name = t.t2) missing_columns
  from tables t 
```

# python - Python：内存泄漏？

> ID：13882291
> 
> 赞同：10
> 
> 时间：2012-12-14T16:08:42.773
> 
> 标签：python, performance, optimization, memory-leaks

## 在 Python 解释器中查询：

```
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> k = [i for i in xrange(9999999)]
>>> import sys
>>> sys.getsizeof(k)/1024/1024
38
>>> 
```

## 在这里 - 看看它需要多少 RAM：

![](../Images/3864c4ef090d39613a954a9ee98bc45f.png)

## 语句后的内存使用`del k`：

![](../Images/c48a82e51a869f55776ef410ea71a209.png)

## 之后`gc.collect()`：

![](../Images/a7ac2b3e99097d6f3056b88abdfd6c8f.png)

为什么预期大小为 38Mb 的整数列表需要 160Mb？

**UPD：** *这部分问题得到了回答（几乎立即和多次:)）*

## 好的 - 这是另一个谜语：

```
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys

>>> str = 'abcdefg'
>>> sys.getsizeof(str)
28
>>> k = []
>>> for i in xrange(9999999):
...     k.append(str)
...
>>> sys.getsizeof(str)*9999999/1024/1024
267 
```

## 你认为它现在会消耗多少？

[![](../Images/abd3e73050b836b94a568e7ccdbc1189.png)](https://i.stack.imgur.com/QK9CL.png)
[（来源：[i.imm.io](http://i.imm.io/P5Yq.png)）]

大小`str`为 28，而在过去的示例中为 12。因此，预期的内存使用量为 267Mb - 甚至比整数还要多。但它只需要~40Mb！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-14T16:19:45.410

`sys.getsizeof()`不是很有用，因为它通常只占您期望的一部分。在这种情况下，它考虑了列表，但不是列表中的所有整数对象。该列表每项大约占用 4 个字节。整数对象每个占用另外 12 个字节。例如，如果您尝试这样做：

```
k = [42] * 9999999
print sys.getsizeof(k) 
```

您会看到该列表仍为每个项目占用 4 个字节，即大约 40MB，但因为所有项目都是指向同一个整数对象 42 的指针，所以总内存使用量不会超过 40MB。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:37:51.207

## 什么是 getsizeof()

首先，我建议看一下 size-of 运算符的含义。[您可以在文档](http://docs.python.org/dev/library/sys)中找到确切的描述。我想放大以下句子。

> 只考虑直接归因于对象的内存消耗，而不考虑它所引用的对象的内存消耗。

这意味着当您询问 sys.getsizeof([a]) 时，您不会得到数组的实际大小。您只能获得专用于管理列表的所有内存的大小。该列表仍然包含 9999999 个整数。每个整数由 12 个字节组成，总共 114 MB。专用于管理数组的内存总和 32MB 加上数组中数据的内存总和为 146 Mb，这更接近您的结果。

# jquery - 如何使用 date.js 解析日期

> ID：13882298
> 
> 赞同：0
> 
> 时间：2012-12-14T16:08:56.033
> 
> 标签：jquery, datejs

我试图做一个简单的解析/计算，但 dateJS 似乎没有工作。我在与我的 HMTL 文件完全相同的目录中加载了 date.js 文件，但我的错误控制台说 Date 对象没有 parse() 的属性。我错过了什么吗？

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.7.js"></script>
<script src="date.js"></script>
<script>
$(document).ready(function(){
 alert("hello");
 var future = new Date.parse("20:34:34");
 var now = new Date();
 var span = new TimeSpan(future - now);
 alert(span);
 alert("bye");
});
</script>
</head>
<body>

</body>
</html> 
```

我更正了 parse 周围的代码，但它仍然失败。我的错误控制台现在说 TimeSpan 没有定义......

我今天从他们的网站上删除了 datejs 代码。虽然 repo 说它最后一次更新是在 2007 年......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:13:02.007

“解析”是一种静态方法。您目前正在将其用作实例方法。尝试改变：

```
Date().parse(..) 
```

到

```
Date.parse(..) 
```

# sql-server - 为什么这个光标会出错？

> ID：13882303
> 
> 赞同：-4
> 
> 时间：2012-12-14T16:09:04.360
> 
> 标签：sql-server, xml, stored-procedures

```
ALTER PROCEDURE [dbo].[sp_Insert_Monthly_Salary_Req]
     @xmlString  ntext
    ,@Message nvarchar(500) output
AS
BEGIN

    SET NOCOUNT ON;
    declare  @Emp_SL int,@Basic  decimal(6,2), @Grad_pay  decimal(6,2), @DA  decimal(6,2), @HRA  decimal(6,2), @MA  decimal(6,2), @Ptax  decimal(6,2), @Itax  decimal(6,2), @pf  decimal(6,2), @LIC  decimal(6,2), @Month_Of  datetime
    Declare @intDoc1 as int
    BEGIN TRANSACTION 
    print @xmlString
    exec sp_xml_preparedocument @intDoc1 OUTPUT, @xmlString
    declare Generate_Rq CURSOR FOR
    SELECT Emp_SL,Basic, Grad_pay, DA, HRA, MA, Ptax, Itax, pf, LIC,  Month_Of
    FROM OPENXML (@intDoc1,'/Salaray/TransactionSalary',1)
    WITH ( Emp_SL int,Basic  decimal(6,2), Grad_pay  decimal(6,2), DA  decimal(6,2), HRA  decimal(6,2), MA  decimal(6,2), Ptax  decimal(6,2), Itax  decimal(6,2), pf  decimal(6,2), LIC  decimal(6,2), Month_Of  datetime)

    OPEN Generate_Rq
    FETCH next FROM Generate_Rq
    INTO @Emp_SL,@Basic, @Grad_pay, @DA, @HRA, @MA, @Ptax, @Itax, @pf, @LIC,  @Month_Of
    print 'Line2'
    WHILE @@Fetch_Status<>-1
        BEGIN
            Print 'Line  ' +@Basic+ '    '+ @Grad_pay+ '    '+ @DA+ '    '+ @HRA+ '    '+ @MA+ '    '+ @Ptax+ '    '+ @Itax+ '    '+ @pf+ '    '+ @Month_Of+ '    '+ @LIC+ '    '+ @Emp_SL

            INSERT INTO [Monthly_Salary_Statement]([Basic], [Grad_pay], [DA], [HRA], [MA], [Ptax], [Itax], [pf], [Month_Of], [LIC], [Emp_SL])
            VALUES (@Emp_SL,@Basic, @Grad_pay, @DA, @HRA, @MA, @Ptax, @Itax, @pf, @LIC,  @Month_Of)
            if(@@ERROR<>0)
                BEGIN
                    rollback transaction
                    Set @Message='sp_Insert_PromtList: ' + @@Error 
                    close Generate_Rq
                    deallocate Generate_Rq
                    Return
                END
            FETCH next FROM Generate_Rq
            INTO @Emp_SL,@Basic, @Grad_pay, @DA, @HRA, @MA, @Ptax, @Itax, @pf, @LIC,  @Month_Of
        END
    CLOSE Generate_Rq
    DEALLOCATE Generate_Rq
    COMMIT TRANSACTION
    set  @Message='True'
END 
```

* * *

xml

```
<Salaray>
  <TransactionSalary EmpSL="2" Basic="9860" Grad_pay="4100.00" DA="6282.00" HRA="2094" MA="300.00" Ptax="150.00" pf="2000" Itax="0.00" LIC="0.00" Month_Of="14/Dec/2012" /> 
  <TransactionSalary EmpSL="1" Basic="12560" Grad_pay="4800.00" DA="7812.00" HRA="2604.00" MA="300" Ptax="150.00" pf="2000" Itax="0.00" LIC="0.00" Month_Of="14/Dec/2012" /> 
  <TransactionSalary EmpSL="4" Basic="11850" Grad_pay="4800.00" DA="7493.00" HRA="2498.00" MA="300" Ptax="150.00" pf="2000" Itax="0.00" LIC="0.00" Month_Of="14/Dec/2012" /> 
  </Salaray>', 
```

表明 ..

> 消息 8115，级别 16，状态 8，过程 sp_Insert_Monthly_Salary_Req，第 26 行将
> nvarchar 转换为数据类型 numeric 的算术溢出错误。
> 消息 16917，级别 16，状态 2，过程 sp_Insert_Monthly_Salary_Req，第 27 行
> 光标未打开。
> 消息 16917，级别 16，状态 1，过程 sp_Insert_Monthly_Salary_Req，第 47 行
> 光标未打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:18:25.127

给定一个输入 XML，您可以使用这个简单的 XQuery 语句将 XML“分解”成相关的行和列 - 只需执行一个简单`INSERT INTO .....`的操作即可。没有凌乱的光标，也不`OPENXML`需要任何东西......

```
DECLARE @input XML = '<Salaray>
  <TransactionSalary 
    EmpSL="2" Basic="9860" Grad_pay="4100.00" DA="6282.00" HRA="2094" MA="300.00" Ptax="150.00" pf="2000" 
    Itax="0.00" LIC="0.00" Month_Of="14/Dec/2012" /> 
  <TransactionSalary EmpSL="1" Basic="12560" Grad_pay="4800.00" DA="7812.00" HRA="2604.00" MA="300" Ptax="150.00" pf="2000" Itax="0.00" LIC="0.00" Month_Of="14/Dec/2012" /> 
  <TransactionSalary EmpSL="4" Basic="11850" Grad_pay="4800.00" DA="7493.00" HRA="2498.00" MA="300" Ptax="150.00" pf="2000" Itax="0.00" LIC="0.00" Month_Of="14/Dec/2012" /> 
  </Salaray>'

/* just add this INSERT INTO statement when you're confident the SELECT returns the right data! 
INSERT INTO [Monthly_Salary_Statement]([Emp_SL], [Basic], [Grad_pay], [DA], [HRA], [MA], [Ptax], [Itax], [pf],  [LIC], [Month_Of])
*/
 SELECT
    Emp_SL = XTbl.TSal.value('@EmpSL', 'int'),
    [Basic] = XTbl.TSal.value('@Basic', 'decimal(10,2)'),
    Grad_pay = XTbl.TSal.value('@Grad_pay', 'decimal(6,2)'),
    DA = XTbl.TSal.value('@DA', 'decimal(6,2)'),
    HRA = XTbl.TSal.value('@HRA', 'decimal(6,2)'),
    MA = XTbl.TSal.value('@MA', 'decimal(6,2)'),
    Ptax = XTbl.TSal.value('@Ptax', 'decimal(6,2)'),
    Itax = XTbl.TSal.value('@Itax', 'decimal(6,2)'),
    pf = XTbl.TSal.value('@pf', 'decimal(6,2)'),
    LIC = XTbl.TSal.value('@LIC', 'decimal(6,2)'),
    Month_Of = XTbl.TSal.value('@Month_Of', 'datetime')
  FROM
    @input.nodes('/Salaray/TransactionSalary') AS XTbl(TSal) 
```

另外：请注意，您的属性值`12560`-`Basic`这些值**不**适合 a `decimal(6,2)`- 总共 6 位数字，其中 2 位在逗号之后 - 这也意味着：逗号*前*只有 4 位数字- 不足以容纳`12560`. 我`decimal(10,2)`改用了 - 那行得通。

给我输出：

![在此处输入图像描述](../Images/4f8b2deeee68d8b8f16ed58fc60afd9d.png)

# c# - 找不到名为的入口点

> ID：13882304
> 
> 赞同：4
> 
> 时间：2012-12-14T16:09:07.273
> 
> 标签：c#, c++, pinvoke

我正在用 c# 编写一个应用程序，该应用程序使用在 cpp 中编码的第三方 dll。我对 dll 进行了几次调用，除了一个之外，它们都在工作。

我的代码以下列方式进行调用：

```
return ObjectGetStringEntryID(pObject, strEntryID, strEntryID.Capacity);

[DllImport(EXTERNAL_DLL, CharSet = DefaultCharSet)]
protected static extern bool ObjectGetStringEntryID(IntPtr pObject, StringBuilder strEntryID, int nMaxLength); 
```

由于我可以访问源代码，我知道它包含以下定义：

```
BOOL ObjectGetStringEntryID(CMAPIObject* pObject, LPTSTR szEntryID, int nMaxLength) 
```

如前所述，我使用相同的格式对该 dll 进行了其他几次调用，它们都成功了。

因此，如果有帮助，我有以下设置：

```
public const CharSet DefaultCharSet = CharSet.Ansi; 
```

有谁看到我在通话中可能做错了什么？从同一个班级，我打电话给：

```
MessageGetSubject(pObject, strSubject, strSubject.Capacity);

[DllImport(EXTERNAL_DLL, CharSet = DefaultCharSet)]
protected static extern void MessageGetSubject(IntPtr pMessage, StringBuilder strSubject, int nMaxLength); 
```

与方法相匹配：

```
void MessageGetSubject(CMAPIMessage* pMessage, LPTSTR szSubject, int nMaxLength) 
```

这来自 c# 和 cpp 中与不起作用的调用相同的类，但它工作得很好。它的调用方式似乎没有任何区别，因此它们都应该工作或不工作。

如果有人对我做错了什么有任何见解，我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T20:49:04.390

`EntryPointNotFoundException`表示符号`ObjectGetStringEntryID`不是由 DLL 导出的。检查导出文件（或 __declspec 声明）以确保它已导出，并且使用该名称。

这可能会有所帮助：[从 DLL 导出](http://msdn.microsoft.com/en-us/library/z4zxe9k8.aspx)

# android - android使用“日期”输入类型对editText设置限制

> ID：13882312
> 
> 赞同：2
> 
> 时间：2012-12-14T16:09:27.697
> 
> 标签：android, xml, date, android-edittext

在我的应用程序中，我有一个`EditText`带日期输入类型。

我希望用户不要将时间设置为大于某个 const 时间或当前时间。怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:16:44.010

更好的选择是使用[DatePicker](http://developer.android.com/reference/android/widget/DatePicker.html)的方法`setMaxDate`和`setMinDate`

# cassandra - Cassandra - 了解 PropertyFileSnitch 示例中的机架概念

> ID：13882313
> 
> 赞同：4
> 
> 时间：2012-12-14T16:09:30.123
> 
> 标签：cassandra

我正在研究多 DC 部署，但我不清楚一件事 - 这是从 Cassandra 角度进行的机架概念解释。

我可以通过定义适当的键范围来强制执行复制顺序。为什么我需要另外指定机架`cassandra-topology.properties`？

让我们以 Cassandra 文档为例：[http ://www.datastax.com/docs/1.1/cluster_architecture/replication](http://www.datastax.com/docs/1.1/cluster_architecture/replication)

如果我的复制因子为 3，并且我的行键存储在节点 1 上，那么副本将存储在节点 2 和 3 上——这在我们查看环结构时很明显，所以......为什么我需要复制这些信息在机架配置中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T17:14:07.903

机架配置允许 cassandra 优化副本放置，以便您拥有更好的容错属性。如果您在机架 1 中拥有所有副本，并且该机架出现故障，您将丢失数据。如果您告诉 Cassandra 您的机架配置，它会将副本保存在不同的机架上。

# java - 在heroku上进行休眠搜索

> ID：13882325
> 
> 赞同：3
> 
> 时间：2012-12-14T16:10:18.993
> 
> 标签：java, heroku, solr, lucene, hibernate-search

我有一个在 Heorku 上运行的 Spring+JPA+Hibernate 构建的应用程序，我使用 Hibernate-Search 进行 FullTextSearch。在我的本地机器上，我将索引存储在文件系统上。我在persistence.xml 中的配置。

```
<property name="hibernate.search.default.directory_provider" 
    value="filesystem"/> 
<property name="hibernate.search.default.indexBase" 
    value="/opt/lucene/indexes"/> 
```

Heroku 对文件系统具有只读访问权限，然后我将索引存储在内存中，但这不是最好的方法，因为当服务器实例重新启动时索引会丢失。最好的方法是如何做到这一点？有没有办法将休眠搜索与 WebSolr 或其他东西集成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T02:06:08.363

我找到了解决方案。我将在 heroku 上使用 mongodb 插件来存储我的索引，我已经实现了一个目录提供程序，用于基于 mongodb 目录的 lucene 目录进行休眠搜索，并且在我的本地机器上工作正常。

# javascript - 如何在 webGL 和 HTML5 中移动整个场景？

> ID：13882327
> 
> 赞同：1
> 
> 时间：2012-12-14T16:10:30.690
> 
> 标签：javascript, html, webgl

我想在 webGL 的画布区域中移动整个场景。

我的意思是如果我使用的是openGL。我会更改剪辑窗口，但我认为在 webGL 中，大世界就是画布，所以我不能在 webGL 中做同样的事情！

例如：我有一个画布宽度：1000，高度：500 2 个正方形：第一个正方形在 X 轴上介于 0 和 1000 之间，所以在画布区域中，第二个在 X 轴上大于 1000。

所以我想点击右箭头按钮，场景向右移动，直到出现另一个方块！使用openGL我会简单地绘制它们（另一个正方形不会出现，因为我会将x轴上的gluOrtho2D设置为（0,1000））然后将gluOrtho2D更改为（500, 1500）然后另一个正方形将出现！！那么如何使用 webGL 做到这一点？我尝试了剪刀功能，但我不会工作，因为画布似乎是整个世界..所以在外面绘制的任何东西都将被忽略！

有任何想法吗 ？

这是代码：我正在尝试绘制 1 个三角形，然后移动场景以完全查看第二个。所以我希望结果是完全绘制的画布中的 2 个三角形。

```
var gl;
var triangleBuffer;
var triangleBuffer2;
var squareBuffer;
var shaderprogram;

function initGL(canvas) {
    try {
      gl = canvas.getContext("experimental-webgl");
      gl.viewportWidth = canvas.width;
      gl.viewportHeight = canvas.height;
    } catch(e) { }
    if (!gl) {
      alert("Could not initialise WebGL!");
    }
}

function getShader(gl, id) {
    var shaderScript = document.getElementById(id);
    if (!shaderScript) {
        return null;
    }

    var str = "";
    var k = shaderScript.firstChild;
    while (k) {
        if (k.nodeType == 3) {
    str += k.textContent;
        }
        k = k.nextSibling;
    }

    var shader;
    if (shaderScript.type == "x-shader/x-fragment") {
        shader = gl.createShader(gl.FRAGMENT_SHADER);
    } else if (shaderScript.type == "x-shader/x-vertex") {
        shader = gl.createShader(gl.VERTEX_SHADER);
    } else {
        return null;
    }

    gl.shaderSource(shader, str);
    gl.compileShader(shader);

    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
        alert(gl.getShaderInfoLog(shader));
        return null;
    }

    return shader;
}

function initShaders(){
    var fragmentShader = getShader(gl, "shader-fs");
    var vertexShader = getShader(gl, "shader-vs");

    // Create a program (piece of code to run on the GPU)
    shaderProgram = gl.createProgram();
    // Attach the vertext and fragment shaders to the program then link them
    gl.attachShader(shaderProgram, vertexShader);
    gl.attachShader(shaderProgram, fragmentShader);
    gl.linkProgram(shaderProgram);

    // If the linking failed
    if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
        alert("Could not initialise shaders");
    }

    // Set the current program
    gl.useProgram(shaderProgram);

    // look up where the vertex data needs to go.
    gl.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "a_position");

    gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);

    var resolutionLocation = gl.getUniformLocation(shaderProgram, "u_resolution");
    gl.uniform2f(resolutionLocation, gl.viewportWidth, gl.viewportHeight);
}

function initBuffers(){
    // Create buffer for the triangle
    triangleBuffer = gl.createBuffer();
    // Set the current buffer to the triangle buffer, so any action or transformation will be done on this current buffer
    gl.bindBuffer(gl.ARRAY_BUFFER, triangleBuffer);

    // One triangle inside the canvas coordinates, the other is not
    var vertices = [500, 250,
            600, 150,
            550, 250,
            900, 100,
            1100, 300,
            900, 200];
    // load the vertices array into the current buffer
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);

    // This array consists of 3 items, each item consists of 3 numbers
    triangleBuffer.numItems = 6;
    triangleBuffer.itemSize = 2;
}

function drawScene(){
    gl.viewport(0, 0, 1000, 500);
    //gl.viewport(0, 0, gl.viewportWidth, gl.viewportHeight);
    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

    gl.bindBuffer(gl.ARRAY_BUFFER, triangleBuffer);
    // call the code the will operate on the current buffer
    gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, triangleBuffer.itemSize, gl.FLOAT, false, 0, 0);
    // Draw the first triangle
    gl.drawArrays(gl.TRIANGLES, 0, 3);

    /* ======================================= here goes the moving of the scene ================== */

    // Draw the second triangle
    gl.drawArrays(gl.TRIANGLES, 3, 3);

}

function start() {

    // get the canvas element source
    var canvas = document.getElementById("game");

    initGL(canvas);
    initShaders();
    initBuffers();

    // Clear the canvas
    gl.clearColor(0.0, 0.0, 0.0, 1.0);

    drawScene();
} 
```

以下是着色器：

```
<script id="shader-fs" type="x-shader/x-fragment">
    precision mediump float;

    void main(void) {
        gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0);
    }
</script>

<script id="shader-vs" type="x-shader/x-vertex">
    attribute vec2 a_position;
    uniform vec2 u_resolution;

    void main(void) {
        // convert from normal coordinates to clipspace coordinates(-1 to 1)
        vec2 clipSpace = ((a_position / u_resolution) * 2.0) - 1.0;
        gl_Position = vec4(clipSpace, 0, 1);

    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:48:54.633

你引入了一个投影和查看矩阵，如下所示：

```
attribute vec3 position;
uniform mat4 proj, view;

void main(void){
    gl_Position = proj * view * vec4(position, 1);
} 
```

glMatrix 库具有设置这些 4x4 矩阵的例程[https://github.com/toji/gl-matrix](https://github.com/toji/gl-matrix)

或者，您可以在 opengl 编程指南（蓝皮书）的附录 F 中查找矩阵公式。

通常您选择投影矩阵作为透视投影，将视图矩阵选择为平移/旋转的组合。

# ios - 在 iCloud 环境中检测应用程序 (IOS/OSX) 的首次运行

> ID：13882331
> 
> 赞同：0
> 
> 时间：2012-12-14T16:10:54.147
> 
> 标签：ios, xcode, macos, core-data, icloud

我在这里看到了几个关于如何检测“独立”应用程序的首次运行的答案。但是进入共享（iCloud）环境，有没有办法检测一个应用程序有：

1.  从未在任何地方运行过

2.  已在此设备上运行

3.  已在另一台设备上运行

这是一个与 CoreData 相关的问题。如果应用程序是基于文档的 - 我可以检查文档是否存在..

我目前正在使用此代码将一些项目加载到实体中 - 仅是第一次。随后，目前，用户可以编辑这些项目。但是，下次在新设备上运行应用程序时，任何更改都将丢失。

```
NSString *bundleVersion = [[NSBundle mainBundle] objectForInfoDictionaryKey:(NSString *)kCFBundleVersionKey];

    appFirstStartOfVersionKey = [NSString stringWithFormat:@"first_start_%@", bundleVersion];

    NSNumber *alreadyStartedOnVersion = [[NSUserDefaults standardUserDefaults] objectForKey:appFirstStartOfVersionKey];
    if(!alreadyStartedOnVersion || [alreadyStartedOnVersion boolValue] == NO) {
        [self firstStartCode];
        [[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithBool:YES] forKey:appFirstStartOfVersionKey];
    } 
```

和

```
-(void) firstStartCode {

    NSLog(@"First Time building categories");
    Category *category = (Category *)[NSEntityDescription insertNewObjectForEntityForName:@"Category" inManagedObjectContext:self.coreDataController.mainThreadContext];
    category.name = @"Web Sites";

    category = (Category *)[NSEntityDescription insertNewObjectForEntityForName:@"Category" inManagedObjectContext:self.coreDataController.mainThreadContext];
    category.name = @"E-mail";

    category = (Category *)[NSEntityDescription insertNewObjectForEntityForName:@"Category" inManagedObjectContext:self.coreDataController.mainThreadContext];
    category.name = @"Social Networks"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:14:03.417

您可以在 iCloud 中检查文档是否存在。唯一的问题是 iCloud 会异步执行它想要的操作，因此无法保证您实际上能够看到该文档的哪一点。

# c# - 常规按钮元素提交表单，这怎么可能？

> ID：13882332
> 
> 赞同：2
> 
> 时间：2012-12-14T16:10:56.570
> 
> 标签：c#, javascript, html, forms, webmatrix

> **可能重复：**
> [Javascript添加删除行发送表单而不是添加行](https://stackoverflow.com/questions/13881113/javascript-add-delete-row-sends-form-instead-of-adding-row)

我有一个包含两种形式的页面。

一种形式只是有一个隐藏的输入元素，用于帮助连接查询字符串。

在另一种形式中，我有一个简单的按钮元素（不是输入类型提交按钮），想法是在单击时提交其他形式（使用 JavaScript）。按钮就是这种形式。

就目前而言（出于测试目的），我现在所做的只是调用一个名为 changeSpec() 的 JavaScript 函数，其中绝对唯一的代码行是一个警告框，它向我显示隐藏输入元素的值。

**按钮：**

```
<td class="entry" colspan="3"><button onclick="changeSpec()">Change Species</button></td> 
```

**带有隐藏输入元素的表单：**

```
<form id="specChange" action="" method="get"><input id="hiddenSpec" type="hidden" value='@oppSpec' /></form> 
```

**JavaScript 函数：**

```
function changeSpec() 
{
    alert($("#hiddenSpec").val());
} 
```

当我单击普通按钮元素时，我得到一个服务器端错误（YSOD）......我的意思是，哇，没有看到这种情况，哈哈。

我得到的错误与此无关，因为它是查询字符串中的一些转换错误，我仍然需要解决（此时，任何时候提交大表单 [不是上面显示的] 时都会发生此 YSOD）。另外这个 YSOD 是运行时错误，不是编译器错误，因为页面加载没有问题，直到它认为提交了，随后执行 IsPost 分支。

无论如何，我可以以某种方式告诉（即使我设置了 onclick=""），这个确实驻留在大表单中的按钮实际上是在尝试提交表单？

不仅我之前在其他表单中使用过常规按钮元素，并且一直认为常规按钮永远无法提交表单，我还多次清除缓存，以确保没有任何愚蠢（在那个级别）发生. 无论如何，我似乎需要有关如何通过 html 表单解释普通按钮元素的教育。

请帮忙，我真的很茫然。这怎么可能？

谢谢，如果需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T16:18:22.583

从[W3C 按钮 wiki 页面](http://www.w3.org/wiki/HTML/Elements/button)：

> 缺失值默认 [for `type`] 是提交按钮状态。

换句话说，任何`button`没有`type`属性的都是提交按钮，默认会提交表单。将您的代码更改为`<button type="button" onclick="...">`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:17:31.873

看看：[http ://www.w3schools.com/tags/tag_button.asp](http://www.w3schools.com/tags/tag_button.asp)

> 提示和注意事项
> 
> 注意：如果您在 HTML 表单中使用该元素，不同的浏览器可能会提交不同的值。用于在 HTML 表单中创建按钮。

如果您想要一个不提交表单的按钮，请使用`<input type=button />`：[HTML button to NOT submit form](https://stackoverflow.com/questions/2825856/html-button-to-not-submit-form)

干杯。

# mysql - 每个查询都会创建一个新的 CONNECTION_ID()

> ID：13882333
> 
> 赞同：5
> 
> 时间：2012-12-14T16:11:04.407
> 
> 标签：mysql, sql, database, phpmyadmin

我向服务器发出的每个 SQL 查询都会`MySQL`创建一个新的 (increments) `CONNECTION_ID()`。这既发生在我的本地服务器上，也发生在我的共享远程服务器上。

这是背后的原因`LAST_INSERT_ID()`和`ROW_COUNT()`结果`0`吗？如何解决这个问题？

最初在[MySQL 中：LAST_INSERT_ID() 返回 0](https://stackoverflow.com/questions/13880267/mysql-last-insert-id-returns-0)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T16:18:34.237

默认情况下，[`PersistentConnections`](http://wiki.phpmyadmin.net/pma/Config#PersistentConnections)在 phpMyAdmin 中被禁用。

> 这是背后的原因`LAST_INSERT_ID()`和`ROW_COUNT()`结果`0`吗？

是的。

> 如何解决这个问题？

启用持久连接：

```
$cfg['PersistentConnections'] = TRUE; 
```

# excel - 在excel vba中的行上循环并获取单元格

> ID：13882335
> 
> 赞同：4
> 
> 时间：2012-12-14T16:11:05.120
> 
> 标签：excel, vba

我需要 Excel 帮助。我的问题是：如何在此循环中获取每行的单元格 42？作为：

```
For Each r In Sheets("Sheet2").UsedRange.Rows
     sval = r.Cells(42)

     If sval = "" Then
         If r.Cells(6).Value <> "" And r.Cells(7).Value <> "" And r.Cells(9).Value <> "" And r.Cells(10).Value <> "" And r.Cells(11).Value <> "" And r.Cells(12).Value <> "" Then
             MsgBox "wtehi"
             r.EntireRow.Interior.ColorIndex = 0
         Else
             MsgBox "yallow"
             emptyMand = "ok"
             r.EntireRow.Interior.ColorIndex = 6
         End If
     End If

Next 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-16T15:54:28.507

要遍历工作表的所有行，`ws`并为每一行获取第 42 列上的单元格，您可以执行以下操作：

```
For Each rw in ws.UsedRange.Rows
    cell = ws.Cells(rw.Row, 42)
Next 
```

但是，下面的方法速度是原来的两倍，而且可读性更强：

```
For i = 1 to ws.UsedRange.Rows.Count
    cell = ws.Cells(i, 42)
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:43:48.083

另一个推荐的非宏选项当然是使用条件格式，我建议将这个用于宏部分：

```
Dim cl As Range
For Each cl In Intersect(Sheets("Sheet2").UsedRange, Sheets("Sheet2").Columns(42))

     If Len(cl) = 0 Then
         If Application.WorksheetFunction.CountIf(Cells(cl.Row, 6).Resize(1, 5), "") <> 5 Then
             MsgBox "wtehi"
             cl.EntireRow.Interior.ColorIndex = 0
         Else
             MsgBox "yallow"
             emptyMand = "ok"
             cl.EntireRow.Interior.ColorIndex = 6
         End If
     End If

Next cl 
```

# java - 基于输入字段的微调器

> ID：13882336
> 
> 赞同：3
> 
> 时间：2012-12-14T16:11:09.440
> 
> 标签：java, android, xml, spinner, textedit

我正在创建一个显示数字的微调器，但由于数字可能高达 256，我不想在我的代码中包含所有条目 1-256。该数字将基于不同类别的输入字段。

IE如果用户输入16，spinner会显示数字1到16。

我对旋转器完全陌生，所以如果可能的话，请有些人用虚拟的语言交谈。

如果这是不可能的，请帮助我另一种解决方案。

非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:36:11.940

我假设您想要一种以`Spinner`编程方式向您的应用程序添加的方法。

假设您将 16 个项目存储在 ArrayList 中

```
ArrayList<String> spinnerArray = new ArrayList<String>(); 
```

可以使用创建微调器`ArrayAdapters`

```
Spinner spinner = new Spinner(this);
ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter (this,android.R.layout.simple_spinner_dropdown_item,spinnerArray);
spinner.setAdapter(spinnerArrayAdapter); 
```

到目前为止，您已经有了一个动态微调器，但现在您需要从中获取数据。这是你如何得到它：

```
 spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onNothingSelected(AdapterView<?> parent) {}
        public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
          //Your logic for what happens when an Item is selected
        }
    }); 
```

# asp.net - 了解 Asp.net、IIS 和 Active Directory

> ID：13882337
> 
> 赞同：2
> 
> 时间：2012-12-14T16:11:09.223
> 
> 标签：asp.net, vb.net, iis, active-directory

谁能向我解释活动目录如何与 IIS 一起工作？我有一个 ASP.net 应用程序，它在服务器上查找文件夹并列出所有子文件夹。这是一个带有节点的树视图。当用户单击该节点时，它会回发以获取子文件夹并将它们附加到树视图中。在各种文件夹中，有远程服务器上共享文件夹的快捷方式，如下所示：

```
\\myServer\somefolder\anotherFolder\shortcutToRemoteFolder\aThirdFolder\aFourthFOlder 
```

我的应用程序使用 Windows 身份验证和活动目录。当用户启动我的应用程序时，我们会得到他们的域\用户 ID。如果我尝试直接：

```
\\myServer\somefolder\anotherFolder\shortcutToRemoteFolder\aThirdFolder 
```

我收到一个错误：

> 使用的帐户是计算机帐户。使用您的全局用户帐户或本地用户帐户访问此服务器。

但是，如果我按照自己的方式向上文件夹链，如下所示：

```
 \\myServer\somefolder\
  \\myServer\somefolder\anotherFolder\
  \\myServer\somefolder\anotherFolder\shortcutToRemoteFolder\
  \\myServer\somefolder\anotherFolder\shortcutToRemoteFolder\aThirdFolder 
```

没关系。权限是否没有传播到移除器服务器？IIS 帐户是否更改？任何见解都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:27:05.503

出于安全原因，IIS 不会利用（已连接客户端的）域帐户凭据连接到另一台服务器。这通常称为“IIS 双跃点”方案。有一些方法可以使用 kerberos 或允许在您的服务器上进行模拟来解决它，但是这些方法中的每一个都有限制（由于允许这种事情的非常严重的后果）。您可以阅读此 SO 帖子：[在 IIS7 windows 2008 中启用双跳委托的步骤，](https://stackoverflow.com/questions/4334665/steps-to-enable-double-hop-delegation-in-iis7-windows-2008)或者只是在“IIS 双跳”上进行网络搜索。

# iphone - 使用 jenkins xcode 构建插件构建时出现代码签名错误

> ID：13882338
> 
> 赞同：3
> 
> 时间：2012-12-14T16:11:08.983
> 
> 标签：iphone, objective-c, ios, xcode, jenkins

使用 jenkins 的 XCodeBuild 插件时出现以下错误：

> 代码签名错误：身份“iPhone 开发人员”与您的钥匙串中的任何有效、未过期的证书/私钥对不匹配

更新：我能够从终端构建 xcodebuild 并将 xcode 构建到模拟器和设备中，但是在 jenkins 中运行它时不能 - jenkins 似乎有一些不同的“共享”osx 用户，因为它的主文件夹在用户/共享中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T21:45:59.843

默认情况下，安装 Jenkins 时，它作为守护进程运行，而不是当前用户下的进程。因此，它无权访问对您的应用进行代码签名所需的任何凭据。

与其将 Jenkins 作为守护进程运行，不如像正常进程一样启动它。它可能看起来像这样：

```
java -jar /Applications/Jenkins/jenkins.war 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T17:31:09.927

您正在使用的构建机器没有与临时配置文件中的证书匹配的私钥。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-10T16:24:48.990

我还将 jenkins 作为守护进程运行，并且代码签名使用插件可以正常工作：

[https://wiki.jenkins-ci.org/display/JENKINS/Keychains+and+Provisioning+Profiles+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Keychains+and+Provisioning+Profiles+Plugin)

（带有 Xcode 8 的 Jenkins 2.19.1）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T08:28:41.670

它不是构建机器，而是进行构建的用户。他缺少那些证书和私钥。您需要手动添加一个 login.keychain 特别为他。

# jquery-mobile - 触发创建jquery mobile

> ID：13882350
> 
> 赞同：0
> 
> 时间：2012-12-14T16:11:46.257
> 
> 标签：jquery-mobile

我有问题，我有这个代码

```
<ul id="lista" data-role="listview"  data-theme="b" data-inset="true">
            <li data-role="list-divider">Players</li> 
```

和这个脚本

```
 $('#home').live('pageinit',function(){
      $.getJSON("prendivalori.php",function(result){
          var nome = result[1].NOME;
          var overall = result[1].OVERALL;
          $('#lista').append('<li data-corners="false" data-count-theme="f" data-icon="arrow-r" data-theme="c" class="ui-btn ui-li-has-count"><a href="#valori"  class="ui-link-inherit data-transition="pop"><h1>'+nome+'</h1><p id="squadra" class= "ui-li-desc" ></p><span id= "" class="ui-li-count ui-btn-corner-all"><font id="number">'+overall+'</font></span></a><span class="ui-icon ui-icon-arrow-r"></span></li>').trigger('create');
          });

}); 
```

但是当页面加载时，listview 看起来不像移动风格，谁能帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:33:57.303

该`.trigger("create")`方法旨在初始化页面上的小部件，在这种情况下，您的 listview 已经被初始化，您想要做的是刷新它（实际上这应该可能真的包含在`.trigger("create")`方法中）。

为了刷新列表视图，您应该使用列表视图的[刷新](http://jquerymobile.com/demos/1.2.0/docs/lists/lists-methods.html)方法

例如

```
 $('#lista').listview('refresh'); 
```

# java - 在 Swing 中使用 Socket 类时出错

> ID：13882351
> 
> 赞同：0
> 
> 时间：2012-12-14T16:11:48.603
> 
> 标签：java, swing, sockets

我正在尝试使用 Swing 构建客户端服务器聊天应用程序。

这样，当我启动客户端时，我会发送一条可以在客户端站点接收到的消息，但是当我在服务器站点上按下一个按钮时，它不会打开一个新框架（在我的情况下是这里的错误）。

我该如何解决？任何人都可以建议我其他方式吗？

我的代码是（服务器站点）：

```
import java.net.*;
import java.io.*;
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
import java.sql.*;
class Cli extends JFrame
{
   ServerSocket ss;
   Socket soc;
   InputStream in;
   OutputStream out;

   DataInputStream sin;
   DataOutputStream sout;

   JLabel l1;
   JTextField txt1;
   JButton addd;
  Cli()  throws Exception
  {
Class.forName("com.mysql.jdbc.Driver");
Connection cn=DriverManager.getConnection("jdbc:mysql://localhost:3306/nirav","root","root");
JPanel pan=new JPanel(new GridLayout(2,1));
ss=new ServerSocket(8888);
//ss.setSOLimit(10000);
l1=new JLabel("waiting for client");
txt1=new JTextField(40);
addd=new JButton("click here to send");
addd.addActionListener(new ActionListener()
      {
    public void actionPerformed(ActionEvent ae) 
        {   try{
                JOptionPane.showMessageDialog(null,"Data is successfully inserted into the database." );    
                l1.setText("waiting");
                Recieve c=new Recieve();
                c.setSize(300,300); 
                c.setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);
                c.setVisible(true);

                }catch(Exception e)
                {
                System.out.println(e.toString());
                }
            }                               
        }); 
soc=ss.accept();
in=soc.getInputStream();
out=soc.getOutputStream();
sin=new DataInputStream(in);
sout=new DataOutputStream(out); 
String s="";
try{
    s=sin.readUTF();        
    }catch(Exception e)
    {
    }
    l1.setText("client :"+s);
pan.add(l1);
pan.add(txt1);
pan.add(addd);
add(pan);
}
class Recieve extends JFrame
{
JLabel msg;
JTextField t1;
JButton a1;
 Recieve() throws Exception
 {  
JPanel pan=new JPanel(new GridLayout(2,1));
t1=new JTextField(40);
a1=new JButton("click here to send");
//msg=new JLabel("waiting...");
 a1.addActionListener(new ActionListener()
{   public void actionPerformed(ActionEvent ae)
        {   try{
                String s;
                String str="Server :";
                sout.writeUTF(t1.getText());
                //msg.setText(str);
                sout.flush();
            }catch(Exception e)
{
System.out.println(e.toString());
}
}});
pan.add(t1);
pan.add(a1);
add(pan);
   }
   }
  }
 class Server 
{   
  public static void main(String args[]) throws Exception
{
try{

Cli c=new Cli();
c.setSize(300,300);
c.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
c.setVisible(true);
}
catch(Exception e)
{
System.out.println(e.toString());
}

}
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:18:30.497

您如何捕获从服务器发送的消息？每当应用程序从服务器接收数据时，您需要实现一些将利用您的 UI 侦听器在聊天窗口上显示更新的东西。

我刚刚做了一个快速研究并找到了这个项目，尝试使用他的代码作为参考来实现你的程序： [https ://github.com/rafaelsakurai/socket-exemlo-chat-swing](https://github.com/rafaelsakurai/socket-exemplo-chat-swing)

# arrays - “错误：矩阵不是矩形”......这是*显示*数据或创建/使用矩阵的错误吗？

> ID：13882356
> 
> 赞同：0
> 
> 时间：2012-12-14T16:12:06.433
> 
> 标签：arrays, matrix, google-apps-script

我正在使用 Google Apps 脚本来处理电子表格。我的代码不起作用，所以我正在努力解决这些错误。它*应该*将电子表格的值复制到一个数组中，在数组中进行一些更改，然后使用这些更改重新编写电子表格的某些部分并重新格式化其他部分。

作为我的错误检查的一部分，我尝试在完成所有所需的更改后将数组写回电子表格中的单元格。当我这样做时，我在问题标题中得到错误：

```
error: Matrix is not rectangular {" ","Score","Max Poss.","","","","asdf","","","","","","","";"Steve:",1,133,"","","","eFEf","","","","","","","";"Chris:",0,126,"","","","First we test the color change.","","","","","","","";"Tyler:",5,130,"","","","And now let's see...","","","","","","","";"Billy:",3,127,"","","","df","","","","","","","";"Drew:",0,122,"","","#N/A","gtttt","","","","","","","";"Yllib:",9,133,"","","","vrrr","","","","","","","";"","","","","","","","","","","","","","";"-W/L-","Drew","Steve","Chris","Tyler","Billy","HOME","AWAY","Billy","Tyler","Chris","Steve","Drew","-W/L-";"l",4,"",4,6,"","","",3,"","",1,"","w";"W","","","",5,"","","",9,"",6,3,5,"l";"",3,12,2,2,2,"","","","","","",""," ";"","","","","","","","",11,1,5,8,6," ";"",10,15,15,8,13,"","","","","","",""," ";"",8,10,14,16,12,"","","","","","",""," ";"","","","","","","","",10,14,10,16,14," ";"",13,13,11,13,16,"","","","","","",""," ";"","","","",4,"","","",4,"",9,6,16," ";"","",9,"","","","","",1,3,8,"",9," ";"","","","","","","","",8,12,13,2,12," ";"","","",1,"",5,"","","",11,"",4,1," ";"","","","","","","","",15,10,12,14,11," ";"",2,"",3,"",6,"","","",9,"",5,"","     ";"W";"",2,"",7,7,7,"NYG -2.5","","","","",7,""," "} 
```

我尝试使用 var sheetArray = new Array (30); 创建数组 和 var sheetArray = []; 结果相同。

我在谷歌上出现的次数不多。我想我的大问题是我是否收到此错误是因为我试图在不兼容的电子表格单元格中显示一个矩形数组，或者问题是否与创建数组本身或与其他方面无关展示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:55:01.430

我假设您正在通过在电子表格公式中编写嵌入式数组来进行测试：

`={"a","b","c";"d","e","f"}`

您收到错误消息是因为您的矩阵不是矩形的。:-)

违规行是倒数第二行，在该行中有一个元素“W”：

`..." ";"W";"",2,"",7,7,7,"NYG -2.5","","","","",7,""," "}`

所以我猜你的数组构造中存在错误（如果你需要帮助，请随时将一些代码发布到问题中）。

# c++ - 继承比较运算符而不能相互比较派生类

> ID：13882358
> 
> 赞同：2
> 
> 时间：2012-12-14T16:12:30.673
> 
> 标签：c++, inheritance, operators, friend

在我问我的问题之前：是的，这是大学的作业。

任务非常简单：实现带有附加功能的 Whist 纸牌游戏。助手希望我们与继承“见面”（这是我第二次学习这门课程，所以，我知道它是什么）并告诉我们为我们的 Card 类使用以下内容：创建一个基类 Card 从中派生根据他们拥有的花色（心形，钻石，...），继承了 4 个类。

我发现我自己在这里使用继承很奇怪（因为这些类`.fSuit`无论如何都会有数据成员）而且我们还没有看到`virtual`，所以我们不会在这里使用它。这并不难编码，但我遇到的问题是：我们需要派生`operators`来比较卡片，但派生类可能不会相互比较（编译器应该根据助手抛出错误）。我第一次使用`friend bool operator<(Card&, Card&)`，但我了解到友元函数与派生类没有任何关联，派生类的处理就好像它们是基类一样。

我应该如何让我的代码按照他想要的方式工作？我知道我可以停止使用`friend`并将运算符作为 Card 类的一部分，但我仍然可以将派生类相互比较。我错过了什么吗？提前非常感谢。

ps：如果它以任何方式编写解决方案都不干净，我不妨在比较之前检查我的 Card 类的操作符部分中的套装。

编辑：他还想让一个运算符 def/decl 一次为所有派生类工作。为每个派生类创建一个友元运算符也是一种可能的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:20:57.930

我想最简单的解决方案是不在`operator<`基类中实现，而只在派生类中实现（每个类只能与自身进行比较，编译器不允许将 dimond 与心脏等进行比较）

这很愚蠢，但可能会回答您的问题，这可能是您应该做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:22:16.213

如果你想要这个

```
class Card {};
class Hearts : public Card {};
Hearts a,b;
a < b; 
```

编译，但不是这个

```
class Card {};
class Hearts : public Card {};
class Diamonds : public Card {};
Hearts a;
Diamonds b;
a < b; 
```

然后，您不能为每个派生类提供泛型`operator<(Card&)`，而只能提供成员。`operator<`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T16:21:09.507

你可以在这里使用友元函数，但你必须声明它接受两个参数

```
class Card {
public:
    friend bool operator<(const Card &c1, const Card &c2);
    ...
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T17:48:36.783

如果您了解游戏规则，那么按照您的导师要求的方式构建课程可能是有意义的。

在这个游戏中，4 名玩家中的每人将从 52 张常规牌组中获得 13 张牌。然后比赛进行 13 轮，称为特技。在每一轮中，最后一轮的获胜者决定必须打出哪个花色，其他人可以跟随花色，打一张王牌（其花色由捐赠者的最后一张牌决定）或任何其他牌（然后比任何花色或王牌都弱）。因此，`<`操作员将根据这些参数为每场比赛（因为王牌从一场比赛到下一场比赛）和每一轮（因为从一轮到下一轮的花色不同）改变含义。

你的类界面看起来很正常。尝试弄清楚比较运算符代码必须如何更改。不知何故，您必须跟踪游戏回合，选择哪一种花色，以及哪一种是王牌。这些参数可能应该是祖先的一部分，而每个专业类都会检查它们是否等于王牌或当前回合的第一张牌颜色。

我认为您不需要为此使用`friend`函数。

理想情况下，游戏机制可能应该与卡片处理部分分开，但我想你可以将这些混合到你的代码中来完成这个任务，因为它是为了研究语言的继承方面。

# python - python将函数传递给类

> ID：13882361
> 
> 赞同：2
> 
> 时间：2012-12-14T16:12:54.940
> 
> 标签：python

我正在编写基于 telnetlib 的简单库，供其他 python 脚本使用。我也在使用日志记录类，因此我有一个问题：有可能吗，做这样的事情是否是好的 python 实践：

```
def printd(args):
    """ debug on stdout """
    sys.stdout.write(time.strftime("%H:%M:%S ") + args.rstrip() + '\n')

def printe(args):
    """ error on stderr """
    sys.stderr.write(time.strftime("%H:%M:%S ") + args.rstrip() + '\n')

class Connections:
    """ Telnet lib connection wrapper """

    def __init__(self, host, port, timeout, logger):
        """ if external logger is passed -  all msgs will be passed to it,
        otherwise will use printd and printe functions """

        self.timeout = timeout
        self.host = host
        self.port = port
        self.connections = {}

        try:
            res = isinstance(logger, logging.Logger)
        except TypeError:
            res = False
        except:
            res = False

        if res == True:
            self.log = logger
            self.log_debug = self.log.debug
            self.log_info = self.log.info
            self.log_error = self.log.error
        else:
            self.log_debug = printd
            self.log_error = printe

    def connect2(self, helloMsg):
        try:
            self.c = telnetlib.Telnet(self.host, self.port)
        except socekt.error:
            self.c = None
            self.log_error("Could not connect to %s:%d" % (self.host, self.port))
        except IOError:
            self.log_error("Could not connect to %s:%d" % (self.host, self.port))
            self.c = None 
```

在构造函数中我传递记录器，如果存在，我想使用它的日志方法来打印消息，如果没有，我想使用`printd`和`printe`函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:20:17.590

是的，这在原则上是完全可以的，只是它`isinstance(logger, logging.Logger)`永远不会引发`TypeError`. 它只会返回一个布尔值。写起来更简单，更pythonic

```
def __init__(self, host, port, timeout, logger=None):
    if logger is None:
        self.log_debug = printd
        self.log_error = printe
    else:
        # use the logger's methods 
```

然后你可以通过`None`来获取内置的日志记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:20:02.020

这对我来说似乎很好。主要问题是`self.log_info`如果您没有收到记录器，您会留下未定义的。

另一种方法是创建一个“合成”记录器对象作为您的默认值`self.log`。

# java - 在我的 REST Web 服务中将正则表达式作为参数传递

> ID：13882362
> 
> 赞同：4
> 
> 时间：2012-12-14T16:12:55.320
> 
> 标签：java, regex, rest

我想做的是为我的第二个参数传递正则表达式。例如 ：

*   。*\\。文本
*   .*2010.*\\.txt

```
@RequestMapping(value = "/filesCleanUp/{confParamName}/{pattern}", method = RequestMethod.GET)
        public ResponseEntity<String> doFilesCleanUp(@PathVariable("confParamName") String confParamName,
                                                     @PathVariable("pattern") String pattern) 
```

这就是我调用服务的方式：

*   /filesCleanUp/param1/.*\\.txt
*   /filesCleanUp/param1/.*2010.*\\.txt

但它不起作用，模式无法从 URL 中正确检索。第一个我得到“.*\\”，第二个我得到“.*2010.*\\”

我用其他值做了其他测试：

*   模式在 URL 中写道：\(.*l
    我得到了：\(

*   模式写在 URL: (2\.[0-3]))
    我得到了: (2\

通常它会与 * 或 .

我确定这没什么，但我找不到。我想要的是得到我写的确切模式

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:31:35.043

如果你真的想传递这样的参数（我强烈不推荐），请参考 [http://perishablepress.com/how-to-write-valid-url-query-string-parameters/](http://perishablepress.com/how-to-write-valid-url-query-string-parameters/)

否则编码并发布它们并在服务器端解码。

# android - 具有 phonegap 的 Android 客户端的 Web 服务的权威签名证书或自己的证书

> ID：13882370
> 
> 赞同：0
> 
> 时间：2012-12-14T16:13:08.890
> 
> 标签：android, cordova, ssl, https, ssl-certificate

我为企业开发 Web 服务，我用来生成我自己的证书，我可以安装在我的客户上，因为我们的 SW 将始终安装在封闭的组织中。

现在我的网络服务将提供一个 Android 应用程序，它确实是一个用 phonegap 编译的 HTML5 和 Javascript 应用程序......

在这里，我不知道如何安装我的证书，我在互联网上找到了一些示例，但它们或多或少是解决方法。

有没有办法在 Android 或 phonegap 使用的浏览器上安装证书，或者我应该考虑从官方提供商处获取证书？

任何进行类似安装的人的帮助或意见都会很棒，这是我的第一个 Android 项目！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:00:05.703

在 Android 4.0 及更高版本上，您可以在系统信任库中安装任何证书（需要用户确认）。在早期版本中，您无法更改系统信任存储。为了确保您的应用程序在所有版本中都能正常工作，您需要通过创建`TrustManager`使用您自己的证书初始化的自定义来将证书包含在应用程序中。关于是否可以与 Phonegap 一起使用，请查看他们的文档。

# c++ - 地图的默认排序

> ID：13882374
> 
> 赞同：1
> 
> 时间：2012-12-14T16:13:23.237
> 
> 标签：c++, map

我有一张地图如下：

```
std::map<A, long> myMap 
```

这张地图的排序很重要，所以我试图弄清楚地图的排序方式。我发现在这个类的文档中它说*在内部，地图中的元素按照构造时设置的特定严格的弱排序标准从低到高的键值排序，*但我不明白这是什么意思。它会调用两个对象上的“<”运算符来确定顺序吗？

我也知道我可以在初始化时将映射传递给如下结构，它会按照我的意愿进行。我只是好奇它默认会做什么。

```
struct classcomp {
  bool operator() (const A& lhs, const A& rhs) const
   {return lhs<rhs;}
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:15:01.667

默认情况下，它调用`less<A>`的是`operator <`（至少如果它不是专门的）

`std::map<A, long, classcomp> myMap`如果您需要另一种排序方式，您可以这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:16:11.867

> 它会调用两个对象上的“<”运算符来确定顺序吗？

是的，它会的：

```
struct A {
    bool operator<(const A& other) const
    {
        return ...; // return true if *this is less than other; false otherwise
    }
}; 
```

确保您定义的“小于”关系`operator<`是可传递的，即 if`A < B`和`B < C`, then也`A`必须小于`C`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T16:20:38.160

默认情况下`std::map`将用于`std::less`比较两个键。默认情况下`std::less`看起来非常像您的`classcomp`并用于`<`进行比较。您可以通过传递不同的比较函数或对象，或者`operator<`为您的类型创建来覆盖默认行为。

# redirect - 如何在没有负载平衡器的情况下为 IIS 中的所有站点设置维护页面？

> ID：13882375
> 
> 赞同：0
> 
> 时间：2012-12-14T16:13:23.887
> 
> 标签：redirect, iis-7.5

在我们的测试服务器上执行维护时，我想简单地将所有流量重定向到服务器上的所有站点，以说明该站点的默认站点，在那里我设置了维护页面。

这怎么能快速完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:46:45.430

我在网站 web.config 中使用这样的一行 `httpRedirect enabled="false" destination="http://someothersite.com/maintenance.htm" exactDestination="true" httpResponseStatus="Temporary"`

在 - 的里面`system.webServer`

当您需要进入维护模式时，将“false”切换为“true”，该站点的所有流量将被定向到[http://someothersite.com/maintenance.htm](http://someothersite.com/maintenance.htm)

# java - Java 控制台无法正确读取中文字符

> ID：13882378
> 
> 赞同：8
> 
> 时间：2012-12-14T16:13:38.160
> 
> 标签：java, eclipse, character-encoding

我正在努力让 Eclipse 正确读取中文字符，而且我不确定我可能哪里出错了。

具体来说，在从控制台读取一串中文（简体或繁体）和输出之间的某个地方，它会出现乱码。即使在输出一大串混合文本（英文/中文字符）时，它似乎也只会改变中文字符的外观。

我已将其缩减为以下测试示例，并用我认为在每个阶段发生的事情明确注释它 - 请注意，我是一名学生，非常想确认我的理解（或其他）:)

```
public static void main(String[] args) {    
    try 
    {
        boolean isRunning = true;

        //Raw flow of input data from the console
        InputStream inputStream = System.in;
        //Allows you to read the stream, using either the default character encoding, else the specified encoding;
        InputStreamReader inputStreamReader = new InputStreamReader(inputStream, "UTF-8");
        //Adds functionality for converting the stream being read in, into Strings(?)
        BufferedReader input_BufferedReader = new BufferedReader(inputStreamReader);

        //Raw flow of outputdata to the console
        OutputStream outputStream = System.out;
        //Write a stream, from a given bit of text
        OutputStreamWriter outputStreamWriter = new OutputStreamWriter(outputStream, "UTF-8");
        //Adds functionality to the base ability to write to a stream
        BufferedWriter output_BufferedWriter = new BufferedWriter(outputStreamWriter);

        while(isRunning) {
            System.out.println();//force extra newline
            System.out.print("> ");

            //To read in a line of text (as a String):
            String userInput_asString = input_BufferedReader.readLine();

            //To output a line of text:
            String outputToUser_fromString_englishFromCode = "foo"; //outputs correctly
            output_BufferedWriter.write(outputToUser_fromString_englishFromCode);
            output_BufferedWriter.flush();

            System.out.println();//force extra newline

            String outputToUser_fromString_ChineseFromCode = "之謂甚"; //outputs correctly
            output_BufferedWriter.write(outputToUser_fromString_ChineseFromCode);
            output_BufferedWriter.flush();

            System.out.println();//force extra newline

            String outputToUser_fromString_userSupplied = userInput_asString; //outputs correctly when given English text, garbled when given Chinese text
            output_BufferedWriter.write(outputToUser_fromString_userSupplied);
            output_BufferedWriter.flush();

            System.out.println();//force extra newline

        }
    }
    catch (Exception e) {
        // TODO: handle exception
    }
} 
```

样本输出：

```
> 之謂甚
foo
之謂甚
ä¹‹è¬‚ç”š

> oaea
foo
之謂甚
oaea

> mixed input - English: fubar; Chinese: 之謂甚;
foo
之謂甚
mixed input - English: fubar; Chinese: ä¹‹è¬‚ç”š;

> 
```

在这篇 Stack Overflow 帖子上看到的内容与我在 Eclipse 控制台中看到的内容以及在 Eclipse 调试器中看到的内容完全一致（查看/编辑变量值时）。通过 Eclipse 调试器手动更改变量值会导致代码取决于该值的行为，就像我通常期望的那样，这表明文本是如何读取*IN*是一个问题。

我尝试了许多不同的扫描仪/缓冲流 [reader|writer] 等组合来读入和输出，无论是否有明确的字符类型，尽管这不是特别系统地完成的，而且很容易错过一些东西。

我已尝试将 Eclipse 环境设置为尽可能使用 UTF-8，但我想我可能错过了一两个地方。请注意，控制台将正确输出硬编码的汉字。

非常感谢您对此事的任何帮助/指导:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:05:01.457

看起来控制台没有正确读取输入。这是我相信描述您的问题和工作回合的链接。

[http://paranoid-engineering.blogspot.com/2008/05/getting-unicode-output-in-eclipse.html](http://paranoid-engineering.blogspot.com/2008/05/getting-unicode-output-in-eclipse.html)

简单答案：尝试在 eclipse.ini 中设置环境变量 -Dfile.encoding=UTF-8。（在为整个 Eclipse 启用此功能之前，您可以尝试在该程序的调试配置中设置它，看看它是否有效）

该链接有更多建议

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:20:46.277

试试这个：在 Eclipse 中，右键单击您的主类，然后单击运行方式 > 运行配置。然后转到常用选项卡并将编码更改为 UTF-8。那应该工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:36:08.810

这似乎是一个编码问题。这里可能有两个问题： 1\. 您没有激活编译器读取除 ASCII 字符之外的任何内容的能力，在您的情况下，您需要能够读取 UTF-8 字符。2.您可能删除了某些语言包？这不太可能，因为您可能会写汉字？

您应该四处搜索并了解如何让您的 IDE 正确编译非 ASCII 字符。在 python 中，这是在代码本身中完成的，我不确定它是如何在 Java 中完成的。

# asp.net - 更新 NuGet 的 WebMatrix 错误

> ID：13882382
> 
> 赞同：0
> 
> 时间：2012-12-14T16:13:47.543
> 
> 标签：asp.net, nuget, webmatrix

两天以来我遇到了一个奇怪的问题。我正在使用 WebMatrix 2（最新，所有更新都已检查）。我运行 NuGet 来检查可用的更新。我看到了一些更新，一切都得到了正确更新，除了 NuGet.Core。

我看到最新的 NuGet 版本 2.2.0 可用。我运行更新，它给了我错误。说找不到与 NuGet.Core.2.2.0 兼容的 Microsoft.AspNet.WebPages.Administration 版本。此错误的详细信息是：

```
An error occurred.

Updating 'NuGet.Core 1.6.2' to 'Nuget.Core 2.2.0' failed. Unable to find a version of 'Microsoft.AspNet.WebPages.Administration' that is compatible with 'Nuget.Core 2.2.0'.

System.InvalidOperationException: Updating 'NuGet.Core 1.6.2' to 'Nuget.Core 2.2.0' failed. Unable to find a version of 'Microsoft.AspNet.WebPages.Administration' that is compatible with 'Nuget.Core 2.2.0'.
   at NuGet.InstallWalker.OnBeforePackageWalk(IPackage package)
   at NuGet.PackageWalker.Walk(IPackage package)
   at NuGet.InstallWalker.ResolveOperations(IPackage package)
   at NuGet.ProjectManager.Execute(IPackage package, IPackageOperationResolver resolver)
   at NuGet.ProjectManager.AddPackageReference(IPackage package, Boolean ignoreDependencies, Boolean allowPrereleaseVersions)
   at NuGet.ProjectManager.UpdatePackageReference(IPackage package, Boolean updateDependencies, Boolean allowPrereleaseVersions)
   at NuGet.ProjectManager.UpdatePackageReference(String packageId, Func`1 resolvePackage, Boolean updateDependencies, Boolean allowPrereleaseVersions, Boolean targetVersionSetExplicitly)
   at NuGet.ProjectManager.UpdatePackageReference(String packageId, SemanticVersion version, Boolean updateDependencies, Boolean allowPrereleaseVersions)
   at Microsoft.WebMatrix.PackageManagement.WebProjectManager.<>c__DisplayClass4.<UpdatePackage>b__3()
   at Microsoft.WebMatrix.PackageManagement.WebProjectManager.PerformLoggedAction(Action action)
   at Microsoft.WebMatrix.PackageManagement.WebProjectManager.UpdatePackage(IPackage package, AppDomain appDomain)
   at Microsoft.WebMatrix.NuGet.NuGetPackageManager.UpdatePackage(IPackage package)
   at Microsoft.WebMatrix.NuGet.NuGetGallery.ExtensibleNuGetPackageManager.UpdatePackage(IPackage package)
   at Microsoft.WebMatrix.NuGet.NuGetModel.UpdatePackage(IPackage package, Boolean isFeatured, Boolean inDetails)
   at Microsoft.WebMatrix.NuGet.PackageViewModel.ExecuteAction(Boolean inDetails)
   at Microsoft.WebMatrix.NuGet.NuGetViewModel.ExecuteNuGetAction(Object completionAction)
   at System.Threading.Tasks.Task`1.InvokeFuture(Object futureAsObj)
   at System.Threading.Tasks.Task.InnerInvoke()
   at System.Threading.Tasks.Task.Execute() 
```

这是什么意思？这里有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T02:14:55.310

这是因为 [http://nuget.org/packages/Microsoft.AspNet.WebPages.Administration](http://nuget.org/packages/Microsoft.AspNet.WebPages.Administration)包依赖于 nuget.core NuGet.Core (≥ 1.6.2 && < 1.7) 不允许它更新到更高版本。我看到这里已经提出了一个问题[http://aspnetwebstack.codeplex.com/workitem/435](http://aspnetwebstack.codeplex.com/workitem/435)使其与 2.x 版本兼容。

# sql - 比较不同数据集中的两个变量

> ID：13882388
> 
> 赞同：1
> 
> 时间：2012-12-14T16:14:08.767
> 
> 标签：sql, sas

我有两个数据集：

设置一和设置二

set.one 中的 var1 包含短语，其中一些包含州和城市

set.two 包含美国各州的列表。

使用 SAS 或 PROC SQL 比较两者的最有效方法是什么，目的是删除包含美国州的短语？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:38:26.327

我会说你最好的选择是创建一个带有第二组的格式，或者一个 SQL 连接，具体取决于细节。就像是：

```
data one;
format var1 $50.;
infile datalines truncover;
input @1 var1 $50.;
datalines;
Arizona
Kalamazoo
California
New Mexico
Las Cruces, New Mexico
California Pizza Kitchen
Cheese
;;;;
run;
data two;
format state $20.;
infile datalines truncover;
input @1 state $20.;
datalines;
Alabama
Arizona
Alaska
Colorado
New Mexico
California
Missouri
;;;;
run;

data for_fmt;
set two;
start=state;
label='STATE';
retain fmtname "$statef";
output;
if _n_ = 1 then do;
start=' ';
label='FALSE';
hlo='o';
output;
end;
run;

proc format cntlin=for_fmt;
quit
;

data want1;
set one;
if put(var1,$statef.)='STATE' then delete;
run;

data want2;
set one;
do __t = 1 to countc(',',var1)+1;
  x=strip(scan(var1,__t,','));
  if put(x,$STATEF.)='STATE' then delete;
end;
run;

proc sql;
  create table want3 as select * from one where not exists (
    select 1 from two where find(strip(one.var1),strip(two.state)) > 0
    );
quit; 
```

WANT1 是最简单的 - 要求整个 VAR1 成为一个状态。还有，最快。WANT2 稍微复杂一些；要求所有 VAR1 都是一个州，或者用逗号分隔（如城市、州）。WANT3 允许最复杂的匹配（任何地方，包括“GeorgiaPeachClub”之类的匹配，根本没有任何空格）。但是，根据数据集的大小（它是笛卡尔连接），它也非常慢。

如果你有一个非常大的数据集，还有其他可能更快的解决方案；可能是 SAS 数据集中的哈希表，或者甚至迭代一个数据集中的两个数据集，或者可能使用索引搜索而不是直接搜索。但是您的问题中没有太多信息。更详细的信息，例如表中的示例数据和表的大小，会很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:13:27.547

如果 set.one 不是太大，您可以使用 sql-outer 连接并返回不匹配的不同值。像这样：

```
PROC SQL;
CREATE TABLE phrases_without_states AS
SELECT DISTINCT A.phrase
FROM set.one A OUTER JOIN set.two B
WHERE A.phrase NOT LIKE '%' + B.state + '%'
;
quit; 
```

不过，我对比较有点不确定。有谁知道如何使用其他变量而不是固定字符串？

# java - ehcache休眠4

> ID：13882393
> 
> 赞同：6
> 
> 时间：2012-12-14T16:14:23.913
> 
> 标签：java, hibernate, ehcache

在我的应用程序中，我使用 hibernate-core-4.1.8 jar 并希望将 ehCache 作为二级缓存。我目前使用的jar是ehcache-core-2.5.0。我把它放在我的 WebContetn/WEB-INF/lib 文件夹中，也把它放在类路径中。

我的 hibernate.cfg.xml 看起来像这样：

```
<hibernate-configuration>
    <session-factory>   
    ....    
        <property name="hibernate.cache.region.factory_class">org.hibernate.cache.ehcache.EhCacheRegionFactory</property>
        <property name="hibernate.cache.use_second_level_cache">true</property>
        <property name="hibernate.cache.use_query_cache">true</property>
    </session-factory>
</hibernate-configuration> 
```

放置在 JavaResources/src 文件夹中的 ehcache.xml：

```
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="ehcache.xsd" updateCheck="true"
        monitoring="autodetect" dynamicConfig="true">

    <defaultCache
                maxElementsInMemory="100000"
                eternal="false"
                timeToIdleSeconds="1000"
                timeToLiveSeconds="1000"
                overflowToDisk="false"
                />
</ehcache> 
```

运行我的应用程序时，找不到类 org.hibernate.cache.ehcache.EhCacheRegionFactory：

```
java.lang.ClassNotFoundException: Could not load requested class : org.hibernate.cache.ehcache.EhCacheRegionFactory
    at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl$1.findClass(ClassLoaderServiceImpl.java:99)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:138)
    at org.hibernate.cfg.SettingsFactory.createRegionFactory(SettingsFactory.java:444)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:275)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2283)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2279)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1748)
    at creator.controllers.MyFactory.<clinit>(MyFactory.java:18)
    at creator.controllers.SchoolDAO.getList(SchoolDAO.java:98)
    ..... 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T16:32:32.733

您需要`hibernate-ehcache.jar`通过[下载它](http://repo1.maven.org/maven2/org/hibernate/hibernate-ehcache/4.0.0.CR6/hibernate-ehcache-4.0.0.CR6.jar)来包含它，或者您正在使用 maven 将它放在您的依赖项中，就像这样

```
<dependency>
<artifactId>hibernate-ehcache</artifactId>
<groupId>org.hibernate</groupId>
<version>4.0.0.CR6</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-04T08:27:04.673

你需要检查你的`hibernate version`，你必须使用相同的版本`hibernate-ehcache`

# iphone - ios5嵌套json解析

> ID：13882400
> 
> 赞同：2
> 
> 时间：2012-12-14T16:14:45.333
> 
> 标签：iphone, json, parsing, ios5, nsjsonserialization

如何使用 NSJSONSerialization 转换此 json？

```
{
   "messages":{
      "message":{
         "user":"value",
         "pass":"value",
         "url":"value"
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T16:19:01.973

```
NSError* error;
NSDictionary *dit = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&error];
if (!error) {
   //Get values from this dict using respective keys
   NSDictionary *msgs = [dict objectForKey:@"messages"];
   NSDictionary *msg = [msgs objectForKey:@"message"];
   NSString *user = [msg objectForKey:@"user"];
   NSString *pass = [msg objectForKey:@"pass"];
   NSString *url = [msg objectForKey:@"url"];
}
else {
   //Your error message
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T17:18:56.667

使用新文字语法的示例：

```
char *jsonChars = "{\
    \"messages\":{\
        \"message\":{\
            \"user\":\"value\",\
            \"pass\":\"value\",\
            \"url\":\"value\"\
        }\
    }\
}";

NSData *responseData = [NSData dataWithBytes:jsonChars length:strlen(jsonChars)];
NSError* error;
NSDictionary *dit = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&error];
NSLog(@"dit: %@", dit);
NSLog(@"dit: messages:message:user = %@", dit[@"messages"][@"message"][@"user"]); 
```

NSLog 输出：

> 滴答：{消息={消息={通过=值；网址=价值；用户=价值；}; }; }
> 
> dit：消息：消息：用户 = 值

# google-chrome - Google Chrome [v23] 阻止通过 javascript 打开多个新标签页 - 如何覆盖？

> ID：13882402
> 
> 赞同：1
> 
> 时间：2012-12-14T16:15:02.590
> 
> 标签：google-chrome

Google Chrome [v23] 阻止通过 javascript 打开多个新标签 [不要问，但这是我的客户希望他的应用程序工作的方式，有时需要打开 2-5 个新标签（其中包含 URL），因为原因]。这工作正常，直到 Chrome v23 发布。

所以我的问题是：如何覆盖这种安全（？）行为？

# c# - 像存档一样合并文件

> ID：13882403
> 
> 赞同：1
> 
> 时间：2012-12-14T16:15:04.867
> 
> 标签：c#, file, encryption, storing-data

我有很多文件要加密，然后像存档一样存储在一个大文件中。然后我希望能够从“存档”中读取文件。我知道如何加密/解密文件，但我不知道如何将它们存储在一个文件中。而且我想知道能够从这个“档案”快速添加/读取/删除文件的最佳方法是什么。这是我使用的加密：http: [//www.codeproject.com/Articles/26085/File-Encryption-and-Decryption-in-C](http://www.codeproject.com/Articles/26085/File-Encryption-and-Decryption-in-C)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:24:55.250

简单的答案：使用[DotNetZip](http://dotnetzip.codeplex.com/)

```
using (ZipFile zip = new ZipFile())
{
    zip.Password= "123456!";
    zip.AddFile("ReadMe.txt");
    zip.AddFile("7440-N49th.png");
    zip.AddFile("2005_Annual_Report.pdf");        
    zip.Save("Backup.zip");
} 
```

您无需担心自己以这种方式对其进行加密。尽管您仍然可以自己加密每个文件，然后将它们压缩在一起。

# java - JAXB - 更改包 - 使用嵌入 JAXB 绑定声明但不使用外部文件

> ID：13882405
> 
> 赞同：3
> 
> 时间：2012-12-14T16:15:15.040
> 
> 标签：java, binding, xsd, jaxb, wsdl

我想更改架构中所有类的包名称。不幸的是，我不能使用 jaxws-maven-plugin 的元素，因为我有一个 WSDL 和更多的模式。

```
<definitions ...>
  <types>
    <s:schema ...>
    </s:schema ...>
    <s:schema ...>
    </s:schema ...>
... 
```

我决定使用 JAXB 绑定文件，但我不能用它修改包名。这是我的绑定文件：

```
<jaxb:bindings version="2.0" 
           xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" 
           xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc" 
           xmlns:xs="http://www.w3.org/2001/XMLSchema" 
           xmlns:jaxws="http://java.sun.com/xml/ns/jaxws"
           xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">

<!--jaxws:bindings wsdlLocation="MYWSDL">
    <jaxb:bindings node="wsdl:definitions/wsdl:types/xs:schema/xs:element[@name='reserveAppointment']">
        <jaxb:package name="WWWWWWW"/>
    </jaxws:bindings>

</jaxws:bindings-->

<jaxws:bindings wsdlLocation="MYWSDL" node="wsdl:definitions/wsdl:types/xs:schema[@targetNamespace='http://www.openuri.org/']">
    <jaxb:package name="WWWWWWW"/>
</jaxws:bindings>

<!--jaxws:bindings wsdlLocation="MYWSDL">
    <jaxws:bindings node="wsdl:definitions/wsdl:types/xs:schema[@targetNamespace='http://www.openuri.org/']">
        <jaxws:bindings node="//xs:element[@name='reserveAppointment']">
            <jaxb:package name="aaaaa"/>
            <jaxb:class name="WWWWWWWW"/>
        </jaxws:bindings>
    </jaxws:bindings>
</jaxws:bindings-->

</jaxb:bindings> 
```

我正在尝试更多的绑定，但我无法做到这一点。我也尝试更改一个元素的包名称。这是我的 WSDL：

```
<definitions ...>
<types>
<s:schema ...>
  <s:import namespace="XXX1"/>
  <s:element name="reserveAppointment"> 
```

如何使用 JAXB 绑定修改包名称？

令我惊讶的是，我可以通过嵌入 JAXB 绑定声明来更改包名称。

```
<s:schema .... xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" jaxb:version="2.0">
    <s:annotation>
        <s:appinfo>
            <jaxb:schemaBindings>
                <jaxb:package name="wwwwwwwwwww"/>
            </jaxb:schemaBindings>
        </s:appinfo>
    </s:annotation>
    <s:import namespace="http://www.bt.com/eai/hub/or/GenericCPWSHubService"/>
    <s:element name="reserveAppointment">
... 
```

但是，我不想更改第三方服务的 WSDL，因为我不太清楚如果我想调用它会导致什么。这个注解/appinfo 元素会改变 WSDL 还是只是对 JAXB 编译器的提示？谢谢！

# python - SQLAlchemy 在删除表时被阻止

> ID：13882407
> 
> 赞同：12
> 
> 时间：2012-12-14T16:15:20.390
> 
> 标签：python, mysql, sqlalchemy

[该代码是 sqlahcmey 的orm 教程](http://docs.sqlalchemy.org/en/rel_0_8/orm/tutorial.html)的分步复制，除了最后一行，我打算在查询后删除所有表。但是程序被阻塞了`Base.metadata.drop_all(bind=engine)`，下面是MySQL当时的状态（取自MySQL Workbench）：

![工作台管理员](../Images/1c2eb5b80944fcb94b396d2cfb58a8c0.png)

如标记行所示，drop table 进程由于 被挂起 `table metadata lock`，我认为元数据锁定是由于`result = session.query(User).all()`如果删除该行，程序没有阻塞，但我仍然不知道原因。所以我的问题是：为什么会发生这种情况，如何避免阻塞

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy import Column, Integer, String

Base = declarative_base()

class User(Base):
    __tablename__ = 'users'
    id = Column(Integer, primary_key=True)
    name = Column(String(16))
    fullname = Column(String(16))
    password = Column(String(16))

    def __init__(self, name, fullname, password):
        self.name = name
        self.fullname = fullname
        self.password = password

    def __repr__(self):
        return "<User('%s','%s', '%s')>" % (self.name, self.fullname, self.password)

uri = 'mysql://root:zxsaqw21@localhost/test_sa'
engine = create_engine(uri, echo=False)

Base.metadata.create_all(engine)

Session = sessionmaker(bind=engine)
session = Session()

user = User('ed', 'Ed Jones', 'edspassword')
session.add(user)
session.commit()

result = session.query(User).all()
print len(result)

Base.metadata.drop_all(bind=engine) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-14T16:21:58.303

在执行 drop_all() 之前调用 session.close()（或 commit() 或 rollback()）。会话仍处于打开的事务中。

本教程针对没有主动表锁定的 sqlite（我假设您的 MySQL 数据库在这里使用 InnoDB）。

# google-apps-script - Utilties.FormatDate 错误

> ID：13882408
> 
> 赞同：1
> 
> 时间：2012-12-14T16:15:28.340
> 
> 标签：google-apps-script

在我用来创建休假请求批准的 Google Apps 脚本中，我使用以下文本在脚本生成的电子邮件中返回适当的时间。

```
Utilities.formatDate(new Date(row.timeToLeaveSchool), "CST", "h:mm aa") 
```

它一直运行良好，直到今天有人向我指出返回的时间显示的是 GMT 而不是 CST。我尝试过 GMT-6 而不是 CST，并且只是更改时区以查看它是否影响脚本。

附加的脚本和电子表格都设置为 CST。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T17:12:32.353

尝试使用`Utilities.formatDate(new Date(), "GMT-06:00", "h:mm aa")`

根据[此页面](http://docs.oracle.com/javase/6/docs/api/java/util/TimeZone.html)：

> 为了与 JDK 1.1.x 兼容，还支持一些其他的三字母时区 ID（例如“PST”、“CTT”、“AST”）。但是，不推荐使用它们，因为相同的缩写通常用于多个时区（例如，“CST”可能是美国“中部标准时间”和“中国标准时间”），Java 平台只能识别其中之一他们。

因此，由于这个原因，CST 可能不起作用。澄清一下，“GMT-6”不起作用，但“GMT-06:00”起作用。

# ruby-on-rails - 扩展设计以支持 JSON API

> ID：13882412
> 
> 赞同：4
> 
> 时间：2012-12-14T16:15:43.367
> 
> 标签：ruby-on-rails, ruby, devise

我们正在升级一个有两种用户身份验证方式的应用程序。

1.  具有`before_filter :authenticate_user!`回调并像标准 Rails 站点一样访问的控制器。
2.  客户端应用程序通过 JSON 访问 API 模块内的控制器。`/api/session_id/`除了仅具有前缀的身份验证操作之外，所有路由都具有前缀`/api`。

两种方式都使用`User`模型对用户进行身份验证。

有没有办法配置设计来支持它们？如何？

注意：我不想通过 JSON 创建用户。我只想对他们进行身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:26:22.897

我通过覆盖设计的会话控制器来做到这一点。

为自定义会话控制器添加路由条目：

```
 devise_for :users, :controllers => {:sessions => 'sessions'} 
```

并覆盖会话控制器：

```
 class SessionsController < Devise::SessionsController

    def create
      resource = warden.authenticate!(:scope => resource_name, :recall => "sessions#failure")
      return sign_in_and_redirect(resource_name, resource)
    end

    def sign_in_and_redirect(resource_or_scope, resource=nil)
      scope = Devise::Mapping.find_scope!(resource_or_scope)
      resource ||= resource_or_scope
      sign_in(scope, resource) unless warden.user(scope) == resource
      respond_with do |format|
        format.json  {render :json => {:success => true} }
        format.any  {super}
      end
    end

    def failure
      respond_with do |format|
        format.json  {render:json => {:success => false, :errors => ["Login failed."]} }
        format.any  {redirect_to :back, :notice => "Wrong Email / Password" }
      end
      #return render:json => {:success => false, :errors => ["Login failed."]}
    end

  end 
```

” [Rails & Devise: Override SessionsController](https://stackoverflow.com/questions/6110047/rails-devise-override-sessionscontroller)是关于同一主题的更多讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:26:31.600

最终[为监狱长制定了新的策略](https://stackoverflow.com/questions/4223083/custom-authentication-strategy-for-devise)。

在`valid?`方法上，我检查是否`params[:controller]`来自 api 命名空间。这样我就没有通过http触及默认的设计认证。

# knockout.js - 从模板内部访问 observable

> ID：13882415
> 
> 赞同：0
> 
> 时间：2012-12-14T16:15:50.017
> 
> 标签：knockout.js, knockout-2.0

我有这个代码：

```
<div class="yui3-u-4-5" data-bind="template:{name:'datetimepickertpl', data: r.startDateTime }"></div> 
```

这会呈现一个使用日期和时间选择器的模板。然而，重要的是要知道我是我的 observables 的扩展器以增强它们的功能。在这个 startDateTime observable 上，我有一个名为“date”的扩展属性。

所以在模板中我这样做（我已经简化了演示代码）

```
<span data-bind="html: date"></span> 
```

但是，找不到日期成员。

我知道这是*为什么*。这是因为模板绑定在将 observable 设置为模板的绑定上下文时将其解包。所以它有效地寻找 startDateTime().date 而不是 startDateTime.date。

那么有谁知道我如何访问模板内的可观察对象而*不是*可观察对象的内容？

我总是可以像这样包装 observable：

```
<div class="yui3-u-4-5" data-bind="template:{name:'datetimepickertpl', data: { ob: r.startDateTime } }"></div> 
```

然后参考 ob.date，然而，这有点乱。

感谢您的帮助

克里斯

# c# - 吊销功能无法检查证书的吊销

> ID：13882418
> 
> 赞同：4
> 
> 时间：2012-12-14T16:16:00.513
> 
> 标签：c#, x509certificate

我正在尝试使用 C# 中的 X509Chain 验证证书是否已被吊销。

```
X509Chain chain = new X509Chain();
chain.ChainPolicy.RevocationMode = X509RevocationMode.Online;
chain.ChainPolicy.RevocationFlag = X509RevocationFlag.EndCertificateOnly;
chain.Build(certificate); 
```

这将返回以下状态：

> 吊销功能无法检查证书的吊销

我确实想检查被吊销的证书，而不仅仅是关闭错误。

如何解决此问题或至少更好地了解原因（例如，如何找出它在哪里检查 CRL？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T16:34:34.827

吊销检查包括检查 CRL 中的证书状态和使用 OCSP 在线检查状态。文档表明 .NET 仅检查 CRL，但“在线”可能意味着应该下载 CRL。在这种情况下，您的错误可能意味着找不到 CRL 位置（证书中不存在）或无法访问它。

第一步是检查证书是否包含 CRL 位置。您可以在证书属性中看到这一点 - 那里有一个 CRL 分发点扩展。

如果 CRL 位置存在并且它指向 HTTP/HTTPS URL，您可以检查该 URL 以查看它是否可访问。

不幸的是，虽然这些步骤可以自动化，但它们并没有涵盖问题的任何根源 - CRL 可能格式不正确，或者服务器可能返回的不是 CRL（例如错误响应），或者 CRL 上的签名无效。因此，上述步骤只会为您提供有关问题的基本信息。

我不知道 .NET 是否能够对故障产生更有意义的描述。在我们的组件 (SecureBlackbox) 中，我们提供了有关故障的更多详细信息，尽管存在关于此主题的大量常见问题解答文章，但这个问题仍然是我们在技术支持中经常收到的问题。

# android - 从短信中获取 MCC、MNC、LAC、小区 ID）详细信息

> ID：13882427
> 
> 赞同：3
> 
> 时间：2012-12-14T16:16:39.283
> 
> 标签：android, mobile

我正在考虑是否有可能从来自手机的短信中获取与以下项目相关的信息.....

*   移动国家代码 (MCC)

*   移动网络代码 (MNC)

*   本地区号(LAC)
*   小区标识

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:24:52.340

如果您要询问发件人的 MCC/MNC，答案是：不。由于此信息不在 SMS 消息中传输，因此 Android 无法访问它。请记住，SMS 消息不一定来自手机。如果您询问接收者，那么是的，[您可以使用](http://developer.android.com/reference/android/telephony/CellIdentityGsm.html)该信息。

# iphone - 视图消失时如何使线程暂停或停止

> ID：13882431
> 
> 赞同：-1
> 
> 时间：2012-12-14T16:16:47.140
> 
> 标签：iphone, ios, multithreading, nsoperation

当视图消失时如何使线程暂停或停止我这样做：

```
- (void)viewDidDisappear:(BOOL)animated {
    [super viewDidDisappear:(BOOL)animated];    

     [NSThread sleepForTimeInterval:10];
} 
```

但没用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:21:05.727

你应该这样做，`viewWillDisappear`但更有可能你不应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:49:54.310

您在 UI 线程中的睡眠时间不应超过几毫秒。如果你这样做，除了表现不佳之外，操作系统还会杀死你的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T12:36:05.127

你按钮禁用而不是 NSThread 睡眠

```
[yourBtn setEnabled:NO]; 
```

当您检索完整数据然后启用它

```
[yourBtn setEnabled:YES] 
```

# java - Java getNodeName 和命名空间

> ID：13882433
> 
> 赞同：2
> 
> 时间：2012-12-14T16:16:49.110
> 
> 标签：java, xml

给定 2 个符合相同模式的 XML 文件（均有效），一个具有命名空间，另一个没有（示例）：

**XML 文件 1**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<message xmlns="http://www.somewhere.com/X">
    <messageheader>
    ...
</message> 
```

**XML 文件 2**

```
<?xml version="1.0" encoding="UTF-8"?>
<ns1:message xmlns:ns1="http://www.somewhere.com/X">
    <ns1:messageheader>
    ...
</ns1:message> 
```

问题在于解析文件的代码在提取和存储文本内容之前使用 Element.getNodeName() getter 来确定节点名称。由于性能原因，在解析 XML 时使用此方法而不是 XPath。

因此，实现了以下示例代码来进行解析：

```
for(int i = 0; i < someElement.getChildNodes().getLength(); i++) {
    if(someElement.getChildNodes().item(i).getNodeType() == org.w3c.dom.Node.ELEMENT_NODE) {
        Element element = (Element) someElement.getChildNodes().item(i);

        if(element.getNodeName().equals("ns1:messageheader")) {
            ...
        }
        ...
    }
} 
```

上述代码仅适用于 XML 文件 2。

是否可以确定文件是否在元素上使用命名空间前缀，以便可以使用 getNodeName() 解析两个文件 - 所以我可以使用相同的代码来解析两个文件？

我同意这是解析 XML 的一种糟糕方式。不幸的是，我的代码是在切换到我喜欢的 JAXB 之前实现的（目前）。

谢谢

安德斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T16:23:09.660

使用`getLocalName()`而不是`getNodeName()`. 这将返回元素的非限定名称。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-14T16:27:03.600

尝试这个：

```
if (element.getLocalName().equals("messageheader") &&
    "http://www.somewhere.com/X".equals(element.getNamespaceURI())) { ... 
```

无论前缀如何，您都必须检查本地名称和命名空间是否匹配。

# visual-studio-2012 - 在 Visual Studio 2012 中是否删除了工具 > 创建 GUID？

> ID：13882434
> 
> 赞同：41
> 
> 时间：2012-12-14T16:16:55.570
> 
> 标签：visual-studio-2012

在 Visual Studio 2010 中，工具菜单中有一个创建 GUID 条目。我一直将它用于 SharePoint 开发。

在 Visual Studio 2012 中是否删除了工具 > 创建 GUID？我没有看到它并求助于 Powershell [System.Guid]::NewGuid().ToString()

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-12-14T16:27:08.343

不，它在那里……至少它在 Visual Studio 2012 Ultimate 中可用。

如果丢失，请尝试通过 Tools -> External Tools 添加它并添加：

> %安装路径%\Microsoft Visual Studio 11.0\Common7\Tools\guidgen.exe

编辑：它可能与 Visual C++ 一起安装。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-10-21T20:26:02.683

如果您安装了 Resharper，您只需`nguid`在 Visual Studio 中键入并点击 Tab。你甚至可以选择你想要的格式。

# php - 获得 oAuth 令牌后在 tumblr 上发帖

> ID：13882438
> 
> 赞同：1
> 
> 时间：2012-12-14T16:17:15.113
> 
> 标签：php, tumblr

我已经设法从[这个例子](https://groups.google.com/forum/?fromgroups=#!topic/tumblr-api/g6SeIBWvsnE)`oAuth`中获得了令牌（`request_token`, `request_token_secret`），但我似乎无法与他们一起发布到用户帐户。 我想我必须先从用户那里阅读并获取他们的博客名称，但我找不到任何关于此的文档。 有没有人可以帮忙看看代币的处理方法，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:24:57.653

获取令牌将为您提供身份验证而不是授权，您仍然需要针对目标 Tumblr 帐户授权您的应用程序。在此处检查 OAuth 工作流程：http: [//hueniverse.com/2007/10/beginners-guide-to-oauth-part-ii-protocol-workflow/](http://hueniverse.com/2007/10/beginners-guide-to-oauth-part-ii-protocol-workflow/)

# asp.net - 动态数据实体框架缺少小数列

> ID：13882440
> 
> 赞同：1
> 
> 时间：2012-12-14T16:17:17.333
> 
> 标签：asp.net, entity-framework-4, asp.net-dynamic-data

我正在尝试构建一个动态数据网站来充当 MySQL 数据库的简单管理界面。

这不是我的专业领域——但在关注微软网站时，一切看起来都非常简单。但是由于某种原因，在项目中使用实体数据模型时，`edmx`模型已创建，但未正确读取其中一个表。

在 MySQL 数据库中，我有一个包含 9 列的大表。第一列是主键，是一个 INT。其余列是`Decimal`长度为 6,2 的类型。

edmx 文件显示 INT 列 - 但无法读取任何`Decimal`列。如果我将这些更改为`VARCHAR`列 - 一切都被完美地阅读了吗？

动态数据字段模板包含一个小数控制，并且实体框架必须能够识别`DECIMAL`类型的列 - 所以我一定做错了 - 我就是不知道是什么！

非常感谢任何帮助！干杯达伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:11:22.890

好的-我自己发现了答案！问题是由于在表结构中使用了无符号十进制值。

如果列标记为无符号，则动态数据/实体框架无法识别十进制数据类型。当我改变它时，实体框架能够正确读取数据库结构！

希望这可以帮助遇到同样问题的其他人！

干杯达伦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-14T12:04:03.067

如果列标记为无符号，则动态数据/实体框架无法识别十进制数据类型。当我改变它时，实体框架能够正确读取数据库结构！

我得到了它：

`Property(x => x.NameColumn).HasColumnName(@"NameColumn").HasColumnType("decimal").IsRequired().HasPrecision(9, 4)`

# php - PHP数组元素比较

> ID：13882441
> 
> 赞同：1
> 
> 时间：2012-12-14T16:17:19.763
> 
> 标签：php

学习PHP，我有一个问题。

如何从数组中获取元素并确定它是否等于静态值？我有一个查询语句的返回集（确认数组具有所有值）。

我试过了：

```
<?  if($row["rowValue"] == 1) { 
    }
?> 
```

我原以为该值为 1，但它返回 null（好像我做错了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:24:12.017

我不确定你到底在做什么，但尝试使用 array_filp() 它将交换所有键及其相关值，而不是你可以做的

```
if($row["rowValue"] == 1) { 
```

[http://in1.php.net/manual/en/function.array-flip.php](http://in1.php.net/manual/en/function.array-flip.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:19:58.407

什么是回归`null`？

尝试这个：

```
if($row["rowValue"] === 1) { ... } 
```

确保被`$row`调用的元素中有一个元素`rowValue`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T16:21:39.317

也许尝试：

```
<?  if($row[0]["theNameOfAColumn"] == 1) { 
    }
?> 
```

通常数据库返回行[0]、行[1]、行[2]等行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T16:21:42.237

你几乎在那里；这样的事情应该为您确认：

```
echo "<p>Q: Does ".$row["rowValue"]." = 1?</p>";
if($row["rowValue"] == 1) {
    echo "<p>A: Yes ".$row["rowValue"]." does equal 1</p>";
} else {
    echo "<p>A: No, '".$row["rowValue"]."' does not equal 1</p>";
} 
```

如果仍然返回“否”，您可以尝试通过执行数组的 var 转储来查看整个`$row`数组，如下所示：

```
var_dump($row); 
```

这将为您提供有关如何构建数组的详细输出，并且您应该能够查看是否调用了数组中的正确元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T16:27:18.590

如果您从 mysqli_fetch_row 中提取它，那么它需要一个数字，而不是列名。如果它是从 mysqli_fetch_array 中提取的，那么它将接受一个列名。

[http://php.net/manual/en/mysqli-result.fetch-row.php](http://php.net/manual/en/mysqli-result.fetch-row.php)

[http://php.net/manual/en/mysqli-result.fetch-array.php](http://php.net/manual/en/mysqli-result.fetch-array.php)

# php - 将度数转换为 SVG 坐标

> ID：13882444
> 
> 赞同：4
> 
> 时间：2012-12-14T16:17:29.733
> 
> 标签：php, jquery, svg

我正在寻找一个 PHP 或 jQuery 函数来将度数转换为 SVG 等效坐标（如果有的话），以简化转换。

例如：

```
90 degree = x1="0%" y1="0%" x2="100%" y2="0%"

180 = x1="0%" y1="0%" x2="0%" y2="100%" 
```

等等..这就是问题。我正在寻找一个函数来处理从 0 到 360 度到 SVG 坐标的任何转换。

到目前为止，我正在研究[http://keith-wood.name/svg.html和其他几个页面，但没有运气。](http://keith-wood.name/svg.html)

如果您确定不存在这样的功能，一个简单的“否”也将非常有帮助。至少我将不得不停止寻找不存在的东西:)

任何提示或参考将不胜感激。谢谢。

更新：作业参考：[http ://www.zahniser.net/~russell/computer/index.php?title=Angle%20and%20Coordinates](http://www.zahniser.net/~russell/computer/index.php?title=Angle%20and%20Coordinates)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:53:15.407

这是简单的几何图形。看看单位圆[http://en.wikipedia.org/wiki/Unit_circle](http://en.wikipedia.org/wiki/Unit_circle)

首先将您的度数转换为弧度

```
radians = degrees * Pi / 180
x = cos(radians) // will give you the value of y fom -1 to 1
y = sin(radians) // will give you the value of x fom -1 to 1 
```

它适用于我知道的所有编程语言，只需选择适合您的语法即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:51:03.650

我假设您正在使用该`<line>`元素。您可以将[`transform`](http://www.w3.org/TR/SVG/coords.html#TransformAttribute)属性使用到`rotate`指定`<line>`的程度。这比手动计算值要简单得多。

# paraview - 在 Paraview 中绘制球体？

> ID：13882445
> 
> 赞同：1
> 
> 时间：2012-12-14T16:17:30.970
> 
> 标签：paraview

有人知道如何在 Paraview 中绘制球体吗？

我尝试了什么：

1.  使用菜单“Sources”制作一些东西：

    *   有一个我无法改变的 Sphere 对象，以使其成为椭球体的方式
    *   有 Programmable 对象，但没有可用的 vtk 数据类型可以制作 spheroid，而 assumable 可以是`vtkParametricEllipsoid`，这是不可用的
2.  阅读手册

Paraview中有Python控制台，所以也许有人知道更多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:50:44.093

万一有人在乎...

这比我想象的要容易得多。
在属性面板的顶部右侧，有一个小的“齿轮”按钮，可以切换高级对象属性。创建球体后，滚动此高级属性并使用缩放输入框定义 X、Y、Z 半径。

# c# - 获取 sql server 中最后插入的行，其中 id 作为主键并且是一个身份

> ID：13882456
> 
> 赞同：2
> 
> 时间：2012-12-14T16:18:31.157
> 
> 标签：c#, asp.net, asp.net-mvc, linq, asp.net-mvc-4

我已经尝试了多种方式的 linq 查询来检索插入到 sql server 表中的最后一行。

我需要这样的东西

```
var lastId = from u in context.sistema_Documentos where u.id == max select u; 
```

有人说这是不可能的，有人说这不安全或严重影响性能..我该如何执行此查询？

Ps ..这是一个好方法吗？

```
var lastId = from u in context.sistema_Documentos orderby u.id descending select u.id; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T16:22:41.690

您正在查找的标识值在您执行该`SubmitChanges()`方法后可用。你可以这样读：

```
context.InsertOnSubmit(entityToInsert);
context.SubmitChanges();
Var lastinsertedId = entityToInsert.Id; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:20:27.130

没有性能问题，简单的查询：

```
var lastId = (from u context.sistema_Documentos
             Select u.id).Max(); 
```

但是，如果您希望在一次更新中设置某种主从关系，这可能不是正确的方法。在这种情况下，您应该使用实体本身。正如乔尔所提到的，它并不总是返回最后一个......

例如。

```
context.InsertOnSumbit(masterEntity)
detail.masterEntity = masterEntity
context.InsertOnSubmit(detail)
SubmitChanges()... 
```

这将在一个事务中正确处理 PK/FK 分配。

# javascript - Javascript获取多个选项值并更新表单字段

> ID：13882465
> 
> 赞同：0
> 
> 时间：2012-12-14T16:19:14.770
> 
> 标签：javascript, forms, option

我正在构建一个页面，供用户输入他们在工作日的开始和结束时间。然后我希望根据他们的选择计算计费时间。不确定这是否可以使用 javascript，因为我尝试了一堆不同的代码，但没有得到我想要的结果。下面是我目前所在的位置。

我是 javascript 新手，非常感谢您提供的任何输入。

谢谢，安德鲁

```
<select id="start_time" name="start_time">
         <option value="" selected="selected" disabled>Choose start time</option>
        <option value="09:00:00">9:00 AM</option>
        <option value="09:15:00">9:15 AM</option>
        <option value="09:30:00">9:30 AM</option>
        <option value="09:45:00">9:45 AM</option>
</select>
<br>
<select name="end_time">
         <option value="" selected="selected" disabled>Choose end time</option>
        <option value="17:00:00">5:00 PM</option>
        <option value="17:15:00">5:15 PM</option>
        <option value="17:30:00">5:30 PM</option>
        <option value="17:45:00">5:45 PM</option>
</select>
<br>
<select name="mealbreak" id="mealbreak">
         <option value="" selected="selected" disabled>Did you stop for lunch?</option>
        <option value="00:30:00">Yes, we ate.</option>
        <option value="00:00:00">No meal breaks.</option>
</select>       
<br>
Billable Hours<input type="text" id="billable_hours" name="billable_hours">

<script>
window.onload = function () {
var time1 = document.getElementById("start_time").options[document.getElementById("start_time").selectedIndex].value;
var time2 = document.getElementById("end_time").options[document.getElementById("end_time").selectedIndex].value;
var mealbreak = document.getElementById("mealbreak").options[document.getElementById("mealbreak").selectedIndex].value;
var billable = time2 - time1 - mealbreak;
    billable_hours = document.getElementById('billable_hours');

function () {
    billable_hours.value = billable.value;
  };
};
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:34:43.143

无需过多更改代码，以下是此示例：http: [//jsfiddle.net/tEnyP/](http://jsfiddle.net/tEnyP/)

```
<html>
<body>
<select id="start_time" name="start_time" onChange="calculateTime();">
         <option value="" selected="selected" disabled>Choose start time</option>
        <option value="0">9:00 AM</option>
        <option value="15">9:15 AM</option>
        <option value="30">9:30 AM</option>
        <option value="45">9:45 AM</option>
</select>
<br>
<select id="end_time" name="end_time" onChange="calculateTime();">
         <option value="" selected="selected" disabled>Choose end time</option>
        <option value="480">5:00 PM</option>
        <option value="495">5:15 PM</option>
        <option value="510">5:30 PM</option>
        <option value="525">5:45 PM</option>
</select>
<br>
<select name="mealbreak" id="mealbreak" onChange="calculateTime();">
         <option value="" selected="selected" disabled>Did you stop for lunch?</option>
        <option value="30">Yes, we ate.</option>
        <option value="0">No meal breaks.</option>
</select>       
<br>
Billable Hours: <input type="text" id="billable_hours"/>

<script>
function calculateTime() {
    var time1 = document.getElementById("start_time").options[document.getElementById("start_time").selectedIndex].value;
    var time2 = document.getElementById("end_time").options[document.getElementById("end_time").selectedIndex].value;
    var mealbreak = document.getElementById("mealbreak").options[document.getElementById("mealbreak").selectedIndex].value;
    var billable = (time2 - time1 - mealbreak)/60;

    document.getElementById('billable_hours').value = billable; 
};
</script>
</body>
</html> 
```

有两个主要区别。首先是我将每个选项的值设为从最早可能开始时间（上午 9:00 -> 0、下午 5:00 -> 480）开始的分钟数，以使最终计算变得非常容易。第二件事是何时调用计算时间的函数。请注意每个选择元素的“onChange”属性。这会导致它们在更改时调用“calculateTime”。

在您进一步编写应用程序之前，我建议您学习 jQuery。它让这样的事情变得容易多了。

# java - Maven：将 3rd-party jars 添加到清单中的类路径的导出 jar

> ID：13882468
> 
> 赞同：1
> 
> 时间：2012-12-14T16:19:22.260
> 
> 标签：java, eclipse, maven, jar

我正在*使用 Eclipse 开发一个 Java maven 项目，*并希望**导出一个包含所有引用库的 jar**。这些引用的库属于以下两类之一：

1.  它们是*显式（或隐式）* **依赖关系`pom.xml`**

2.  我有一些**库不能作为 maven 工件**使用，并将它们放在 /lib 中（并将它们添加到 Eclipse 的构建路径中）

有`maven-assembly-plugin`，它适用于 1)。但是，我无法找到还包含非 Maven 依赖项的 Maven 插件，例如`"all jars in /lib"`.

然后是 Eclipse`FatJar`插件，它可以工作，但自 2009 年以来一直没有更新，所以它似乎没有维护。此外，我更喜欢可以直接在`pom.xml`.

谁能指点我一个`maven`插件或类似的东西来导出*所有引用的库*，包括案例 2) 中的那些？这只需要涉及将它们放入 jar 并在清单的类路径中引用它们。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T08:56:15.550

我认为处理此问题的最佳方法是将您的自定义库包含到本地 Maven 存储库中。现在您可以将您的库包含为 maven 依赖项，并且您可以使用 maven-assembly-plugin 导出您在 pom 中指定的所有依赖项。

这是一个教程，如何将您的库放入 maven 中的本地存储库以在您的 pom.xml 中使用它。[http://www.mkyong.com/maven/how-to-include-library-manully-into-maven-local-repository/](http://www.mkyong.com/maven/how-to-include-library-manully-into-maven-local-repository/)

在你的 pom.xml 中：

```
<!-- setup jar manifest to executable with dependencies -->
<plugin>
  <artifactId>maven-assembly-plugin</artifactId>
  <configuration>
    <descriptorRefs>
      <descriptorRef>jar-with-dependencies</descriptorRef>
    </descriptorRefs>
    <archive>
      <manifest>
        <mainClass>your.main.class</mainClass>
      </manifest>
    </archive>
  </configuration>
  <executions>
    <execution>
      <phase>package</phase>
      <goals>
       <goal>single</goal>
      </goals>  
    </execution>
  </executions>
</plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:35:20.237

这看起来像是[第谷](http://eclipse.org/tycho/)的任务。它是一组 maven 插件，允许使用 maven 创建 eclipse 插件。Tycho 将清单条目视为构建依赖项。

但是我不知道如何将所有这些依赖项打包在一个 jar 中。这也可能与 osgi 规范相冲突。但是如果你想忽略 osgi，你可以试试 jar-with-dependencies 程序集。

# windows-phone-7 - Mono可以将非xna手机应用程序移植到Windows 8手机吗

> ID：13882472
> 
> 赞同：0
> 
> 时间：2012-12-14T16:19:36.067
> 
> 标签：windows-phone-7, mono, xna, windows-phone-8

我正计划为 windows phone 7 制作音板，然后希望移植到 windows phone 8。我在 XNA 方面有丰富的游戏创作经验，但从未制作过非游戏应用程序。使用 Expression Blend 将其作为普通手机应用程序似乎更容易，因此我可以利用 xml。

问题是你可以使用 Mono 来移植一个普通的 windows phone 7 应用程序，还是只使用 XNA 和移植到 windows phone 8 会更简单？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:58:52.437

您确实不需要将 Windows Phone 7 应用程序移植到 Windows Phone 8。如果您想要添加 Windows Phone 8 的特定功能，您可以执行与[本文所述](http://www.developer.nokia.com/Resources/Library/Lumia/#!co-development-and-porting-guide.html)类似的操作。

# java - 用于控制台输入的 Java 的 Scanner 类的替代品

> ID：13882475
> 
> 赞同：1
> 
> 时间：2012-12-14T16:19:45.100
> 
> 标签：java, console, java.util.scanner

对于初级/中级程序员，使用 Scanner 类从控制台读取输入的替代方法有哪些？

我昨天开始看，谷歌带我看了一些关于自然语言处理的文章和一些自然语言处理工具包的列表。我发现的列表没有很好的注释，而且主题变得非常先进，非常快。

我问是因为我开始想知道如何制作自定义分隔符列表，例如“+” | "-" | "*" | “/”。使用扫描仪似乎无法做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:35:20.380

> 我开始想知道如何制作一个自定义的分隔符列表，例如“+” | "-" | "*" | “/”。使用扫描仪似乎无法做到这一点。

你想达到这样的目标吗？

```
String text="Some text +with -delimiters *described /above";
Scanner in=new Scanner(text);
in.useDelimiter("\\+|\\-|\\*|/"); // +,-,* are metacharacters in regex
                                  // to escape its special meaning we need 
                                  // to use "\\" before each of them
int counter=0;
while(in.hasNext())
    System.out.println(counter++ +") "+ in.next()); 
```

输出

```
0) Some text 
1) with 
2) delimiters 
3) described 
4) above 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:45:47.597

听起来您正在编写解释器，并且想要评估您传入的表达式。

我的建议是查看[Flex](http://westes.github.io/flex/manual/ "柔性")，它将对您的输入执行词法分析并将其转换为标记。然后看一下[Gnu Bison](http://www.gnu.org/software/bison/ "牛羚")，它将获取该令牌集，并将它们解析为表达式树。

Flex 和 Bison 将在您的程序内部有效地创建一个“迷你编译器”，并使用它来解析输入，但这将使您能够比使用 Scanner 更好地处理上下文相关的事情。

TL;博士

Flex: 字符串 -> 标记

Bison：令牌 -> 表达式树

你：表情树 -> 魔法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T16:26:22.273

您可以使用 BufferedReaders 和 InputStreams 来完成。

`BufferedReader bufferRead = new BufferedReader(new InputStreamReader(System.in));`

# javascript - Win8 JS单击按钮后显示进度条

> ID：13882478
> 
> 赞同：1
> 
> 时间：2012-12-14T16:19:55.193
> 
> 标签：javascript, html, asynchronous

我有一个问题，这让我在过去 3 天里头疼。我试图将我的按钮绑定到函数处理程序，该函数处理程序将首先显示进度条，然后做一些工作。这是代码：

```
 ready: function (element, options) {

        // SelectBox && Preview Button

        id("selectBtn").addEventListener("click", this.fireAsynchronousEvent.bind(this)); 
```

然后 fireAsynchronousEvent 函数：

```
 fireAsynchronousEvent: function () {
        setProgress().
            then(function () {
                selectHandler();
            }).done();
    }, 
```

设置进度功能：

```
 function setProgress() {
    return new WinJS.Promise(function (complete) {
        divProgress.appendChild(progress);
        complete();
    })
} 
```

并选择处理程序：

```
 function selectHandler() {

        if (selectedFilter == "sepia") {
            document.getElementById('pageTitle').innerHTML = "selected:" + selectedFilter;
            sepia();

        } 
```

这段代码的作用是在我单击按钮后挂起一个小程序，然后进度条显示在画布上应用棕褐色...：/我想首先显示进度，然后在功能结束时显示图片并删除进度。

# c# - 原型缓冲区不以可读格式存储数据

> ID：13882482
> 
> 赞同：1
> 
> 时间：2012-12-14T16:20:08.453
> 
> 标签：c#, protocol-buffers

我正在将我的 protobuf 消息保存到文件中，并且格式一团糟。我之前已经看到它以与 .proto 文件几乎相同的格式将 protobug 消息保存到磁盘。我这样做是这样的：

```
using (Stream output = File.OpenWrite(@"logs\listings.txt"))
{          
    listingBook.AddClisting(_listing);
    listingBook.Build().WriteTo(output);
} 
```

但我得到的是一个损坏的文件，似乎 ENTER 用奇怪的标签分隔。当它保存到磁盘时，我希望它看起来像示例：

```
# Textual representation of a protocol buffer.
# This is *not* the binary format used on the wire.
person {
  name: "John Doe"
  email: "jdoe@example.com"
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T16:25:49.153

多关注评论

> 这*不是*网络上使用的二进制格式。

Protobuf 消息并非设计为人类可读的。将它们存储在文本文件中是没有意义的；它们不是文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:49:23.610

主要的 protobuf 编码格式是二进制。一些实现公开了*一种*辅助文本格式，但它有点失去了 protobuf 的很多优点，并且库对它的支持是不完整的（如果它甚至是正式定义的）。我会说：如果您想要人类可读，请使用 XML 或 json。不是协议缓冲区。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T17:07:30.723

使用 PrintTo 而不是 WriteTo 可以使数据保持可读格式。终于找到了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-12T10:57:08.170

由于 protobuf 旨在快速、二进制兼容和优化；存储为人类可读的消息几乎是不可能的。但是有[JSONFormatter 实用程序](https://developers.google.com/protocol-buffers/docs/reference/csharp/class/google/protobuf/json-formatter)：

它的主要目的是满足您的要求，但请注意，这可能会使一切变得更慢；同时由于转换而增加了一些开销。

# javascript - Masterpage.PageLoad() 中的 RegisterStartupScript 不会在 ContentPlaceHolder 中的异步回发上运行

> ID：13882483
> 
> 赞同：2
> 
> 时间：2012-12-14T16:20:10.133
> 
> 标签：javascript, asp.net, ajax, master-pages, scriptmanager

使用多个不同的关键字在线搜索后，我一直无法找到解决问题的方法。

我首先寻找一种方法来弹出一条消息，要求用户在会话取消前一分钟更新他们的会话。我决定使用的解决方案是在母版页中运行一个 javascript 计时器，并在 Masterpage.Page_Load() 上调用它。这样，每当我的用户从一个页面导航到另一个页面时，他们都会重置计时器。但是，由于用户将使用的许多页面都具有更新面板并异步更新，因此可以访问我正在使用的功能，但会被跳过（根据调试器）。

我正在使用的功能是：

```
ScriptManager.RegisterStartupScript(main, this.GetType(), "callTimer", "callTimer();", true); 
```

此函数在常规回发或母版页上的异步回发上运行良好（我通过在母版页的更新面板上执行回发来更新计时器），但是，在异步回发上将被跳过。

我已经尝试了一些东西，使功能 Page 或 Masterpage 中的 UpdatePanel 或子页面中的 updatepanel 的控制。我也尝试将此代码放在子页面中，但是虽然这些更改确实重置了计时器，但它会导致 javascriptcode 运行多次，并且它们会争夺显示倒计时的标签。

我在这里真的很茫然。我认为一个可能的解决方案是更改启动脚本的控件并再次终止在该代码之前运行的所有 javascript。然而，寻找以编程方式终止、取消或停止 javascript 函数的方法也不会产生有用的结果。

我可以接受的另一个解决方案是在鼠标移动时重置计时器，但由于我正在为 IE8 设计，除非窗口失焦，否则这将不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:45:13.193

在部分回发的情况下需要通过 注入脚本`ScriptManager`，否则不会重新执行。这是一个为您处理注入逻辑的实用程序函数（vb.net）：

```
Public Shared Sub InjectScript(ByVal containingPage As Page, ByVal scriptKey As String, ByVal scriptText As String)
    Dim sManager = ScriptManager.GetCurrent(containingPage)

    If sManager IsNot Nothing AndAlso sManager.IsInAsyncPostBack Then
        //the page is being partially-posted back by an Ajax control (e.g. UpdatePanel)
         ScriptManager.RegisterStartupScript(containingPage, GetType(Page), scriptKey, scriptText, True)
    Else
        //standard postback
        containingPage.ClientScript.RegisterStartupScript(GetType(Page), scriptKey, scriptText, True)
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:47:21.977

我找到了解决这个问题的方法：我可以通过将当前 date.time 作为数字发送到 javascript 函数来解决这个问题。从那里我将倒计时标签的值设置为 date.time。在那里，在我的计时器期间，如果我发现标签的 date.time 与函数开始的那个不匹配，它将返回并结束函数。这意味着只有函数的最新实例在任何给定时间保持运行。

# html - 在html中上传文件后重新加载

> ID：13882486
> 
> 赞同：0
> 
> 时间：2012-12-14T16:20:19.343
> 
> 标签：html, forms, file-upload, onbeforeunload

我有一个 html 表单，可以用来上传文件。当用户导航到另一个部分时，这些文件将被删除。不幸的是，如果用户决定重新加载页面或关闭浏览器窗口，我看不到可以做什么。

我试图同时使用 jQuery `$('window').on('beforeunload')`，但我能实现的只是一条确认消息。

有人有更好的主意吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:23:52.547

这将非常困难，因为它将是特定于浏览器的，IE 不支持许多事件。对于重新加载，您可以向表单操作添加一个参数，例如 ?refresh=true 然后检查它。如果他们关闭窗口，您将没有太多选择。对不起，我可以提供更多帮助

# ruby-on-rails - Devise 的 current_user 是如何在安装在应用程序中的引擎中访问的，我如何使用我的一种方法完成相同的操作？

> ID：13882487
> 
> 赞同：2
> 
> 时间：2012-12-14T16:20:19.077
> 
> 标签：ruby-on-rails, rails-engines

我创建了一个可安装的引擎，我希望一些路由需要身份验证。我看到在我的引擎控制器内部我可以访问`current_user`（由 Devise 定义）。如何在我的主应用程序中创建这样的方法，并在引擎中访问它？基本上，我的引擎需要一个可定制的身份验证方法。

# c# - 从 ActiveX 组件中抓取数据

> ID：13882490
> 
> 赞同：-1
> 
> 时间：2012-12-14T16:20:27.510
> 
> 标签：c#, .net, .net-4.0, activex

使用 C#，是否可以基本上接受一个 activex 对象并从中获取数据？我有一个调用队列监视器，它是一个 activex 对象，我想为我的团队实现一个警报系统，但我不知道如何从 ActiveX 组件中获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:51:43.383

如果组件没有提供特定的方法来做到这一点，那么可能并不容易。如果数据在屏幕上的控件中（例如在某个窗口中），那么您可以使用 win32 功能（FindWindow、GetWindowText 和 pInvoke）来定位具有数据的控件。您需要使用 Spy++ 在窗口中查找控件并确定它们的类名称和窗口名称以执行 FindWindow。

这是来自 SO 的一个示例： [Capturing data from a window in a closed-source third-party Win32 application](https://stackoverflow.com/questions/2551705/capturing-data-from-a-window-in-a-closed-source-third-party-win32-application)

# mysql - mySQL 从记录中删除除关键字之外的所有文本

> ID：13882491
> 
> 赞同：0
> 
> 时间：2012-12-14T16:20:32.747
> 
> 标签：mysql

我基本上希望从名为的记录中删除所有文本，`FaxOutNumber`除了它包含的位置`no`......它在记录中并不一致，所以有时它只是`NO!`和其他时候它的`no@emailaddress.com`.

我想要：

```
FaxOutNumber:
5145555@emailaddress.com
no!@emailadrress.com 
```

更改为：

```
FaxOutNumber:
[null]
no 
```

我实际上只想把这个字段变成一个简单的 BIT，其中“否”也变成“1”或真值。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:27:07.937

您可以使用[正则表达式](http://dev.mysql.com/doc/en/regexp.html)：

```
ALTER TABLE my_table ADD COLUMN isNoRecord BOOLEAN;
UPDATE my_table SET isNoRecord = FaxOutNumber RLIKE '^no(!?)(@.+)?$';
ALTER TABLE my_table DROP COLUMN FaxOutNumber; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:36:54.577

你可以试试这个——

```
UPDATE tableName SET FaxOutNumber = IF(FaxOutNumber RLIKE '^par',"",FaxOutNumber); 
```

# windows-phone-7 - windows phone 7.1 上的 P2P 网络

> ID：13882493
> 
> 赞同：1
> 
> 时间：2012-12-14T16:20:40.530
> 
> 标签：windows-phone-7, c#-4.0

我正在尝试在没有路由器的情况下连接两个 Windows 手机模拟器以形成 p2p 网络，是否有任何解决方案可以将它们与没有路由器和互联网的接入点连接起来。并且可以使用模拟器的IP地址。请回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:21:26.483

据我所知，这在 Mango 中是不可能的——但在 WP8 中是不可能的。但是，您可以使用无线网络创建一个 UDP 多播套接字，然后以这种方式“连接”到另一个。

看看[http://blogs.msdn.com/b/davrous/archive/2010/03/29/windows-phone-7-platformer-starter-kit-for-xna-studio-4-0.aspx](http://blogs.msdn.com/b/davrous/archive/2010/03/29/windows-phone-7-platformer-starter-kit-for-xna-studio-4-0.aspx)它是得到了一些很好的指示。

# python - 对于只能调用一次的函数，我应该在 python 中引发什么样的标准异常

> ID：13882495
> 
> 赞同：0
> 
> 时间：2012-12-14T16:20:43.260
> 
> 标签：python, exception

我正在为我的模块创建一个 init 函数，当用户不小心调用它两次时，我想引发一些异常。我应该提出什么样的标准例外。

```
Class A(object):
    has_init = False

    @classmethod
    def initialize_class(cls):
        if has_init:
             raise Exception('xxx')
        has_init = True

A.initialize_class()
A.initialize_class() # should raise exception 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T16:27:32.320

您可能会引发运行时错误，但最好更改初始化程序，以便在调用两次时不会造成损坏。

这可能是您应该引发自定义异常而不是内置异常的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:28:15.283

[SystemError](http://docs.python.org/2/library/exceptions.html#exceptions.SystemError)是一个选项，但RuntimeError[可能](http://docs.python.org/2/library/exceptions.html#exceptions.RuntimeError)是最合适的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T16:31:24.973

你可以加注`AttributeError`，如下：

```
class A(object):
    @classmethod
    def initialize_class(cls):
        del cls.initialize_class

A.initialize_class()
A.initialize_class() 
```

（虽然我会在导入时亲自初始化模块内的类，而不是让客户端代码来做。如果必须在导入时间之后处理初始化，请考虑将第二次调用设为无操作而不是引发异常。 )

# xpath - 如何获取父节点？

> ID：13882497
> 
> 赞同：1
> 
> 时间：2012-12-14T16:20:46.663
> 
> 标签：xpath

```
//* [ local-name()='component' and namespace-uri()='urn:hl7-org:v3'   ] 
```

使用这个路径，我可以得到一个这样的节点：</p>

```
<?xml version="1.0" encoding="utf-8"?>
<ClinicalDocument xmlns="urn:hl7-org:v3">
<component>
    <structuredBody> 
      <component>
          <section>
          <code code="10164-2" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC"/>
          <title>History of Present Illness</title>
          <text>
          </text>
          </section>
      </component>
    <component>     ......      </component>
    <component>     ......      </component>
</structuredBody>
</component>
</ClinicalDocument> 
```

为了得到如下节点：

```
<component>
        <section>
        <code code="10164-2" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC"/>
        <title>History of Present Illness</title>
        <text>
        </text>
        </section>
    </component> 
```

我将路径更改为：

```
//* [ local-name()='component' and namespace-uri()='urn:hl7-org:v3'  and  position()=1] 
```

但是，我怎样才能通过`[code="10164-2"]`作为资格获得相同的结果呢？

编辑 2012-12-17

> //:组件[1]//:组件[.//:section/:code[@code='10164-2']]

这个 xpath 运行良好，我可以得到我想要的节点。如果我使用我该怎么办

> //*[local-name()='component' and namespace-uri()='urn:hl7-org:v3'])[1]

选择父`<component/>`节点，然后将 [@code='10164-2'] 添加到谓词部分以获得`<component/>`我想要的子节点。（我不想在路径中使用 : 以避免命名空间问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:01:20.347

只需添加`and section/code/@code='10164-2'`到您的谓词：

```
//*:component[namespace-uri()='urn:hl7-org:v3' and section/code/@code='10164-2'] 
```

`namespace-uri()='urn:hl7-org:v3'`注意：如果`component`不在该命名空间中，您可能必须删除。您在“*为了获得如下节点的示例：* ”没有命名空间。

此外，我使用`*:component`而不是`local-name()`因为您标记了问题 XPath 2.0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T19:13:51.777

**使用**：

```
 ((//*[local-name()='component'
         and namespace-uri()='urn:hl7-org:v3']
       )[1]
          //*[local-name()='component'
            and
              namespace-uri()='urn:hl7-org:v3'
             ]
      )[1] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "((//*[local-name()='component'
         and namespace-uri()='urn:hl7-org:v3']
     )[1]
        //*[local-name()='component'
            and
              namespace-uri()='urn:hl7-org:v3']
     )[1]
     "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<component xmlns="urn:hl7-org:v3">
    <structuredBody>
      <component>
          <section>
          <code code="10164-2" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC"/>
          <title>History of Present Illness</title>
          <text>
          </text>
          </section>
      </component>
    <component>     ......      </component>
    <component>     ......      </component>
</structuredBody>
</component> 
```

**对 XPath 表达式求值，并将该求值的结果复制到输出中：**

```
<component xmlns="urn:hl7-org:v3">
   <section>
      <code code="10164-2" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC"/>
      <title>History of Present Illness</title>
      <text/>
   </section>
</component> 
```

# kendo-ui - KendoUI Web Grid Popup 显示小，删除记录

> ID：13882502
> 
> 赞同：0
> 
> 时间：2012-12-14T16:20:56.023
> 
> 标签：kendo-ui

我整理了一个 KendoUI 网络网格的简单示例：

```
<div id="peopleGrid"></div>

<link type="text/css" rel="stylesheet" href="/Content/kendoui.web.2012.3.1114.commercial/styles/kendo.common.min.css" />
<link type="text/css" rel="stylesheet" href="/Content/kendoui.web.2012.3.1114.commercial/styles/kendo.default.min.css" />
<script type="text/javascript" src="/Content/kendoui.web.2012.3.1114.commercial/js/kendo.web.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#peopleGrid').kendoGrid({
            dataSource: {
                type: 'json',
                transport: {
                    read: '/People/JsonTest'
                },
                schema: {
                    model: {
                        fields: {
                            ID: { type: 'number' },
                            FirstName: { type: 'string' },
                            LastName: { type: 'string' }
                        }
                    }
                },
                pageSize: 10,
                serverPaging: false,
                serverFiltering: false,
                serverSorting: false
            },
            height: 250,
            filterable: true,
            sortable: true,
            pageable: true,
            resizable: true,
            reorderable: true,
            editable: {
                mode: 'popup'
            },
            toolbar: ['create'],
            columns: [
                {
                    field: 'ID',
                    filterable: false,
                    hidden: true
                },
                {
                    field: 'FirstName',
                    title: 'First Name'
                }, {
                    field: 'LastName',
                    title: 'Last Name'
                },
                   {
                    command: ['edit', 'destroy'], title: '&nbsp;'
                }
            ]
        });
    });
</script> 
```

网格初始化并且看起来正确。当我单击记录上的编辑按钮或工具栏中的创建按钮时，会显示弹出窗口。但是，它似乎没有动画。它在窗口的中心只有几个像素可见。

检查 DOM 将其显示为弹出窗口包含元素的样式：

```
transform: scale(0.1); 
```

在 DOM 中编辑它会修复显示。所以看起来应该有一些动画正在发生，但没有。我的代码中是否有问题阻止它，或者可能是我需要包含的其他资源？当弹出窗口处于活动状态时，按下`esc`将其关闭会产生一个小动画，将其扩展为正常大小，同时将其淡出。所以动画似乎发生在错误的时间。有任何想法吗？

此外，我看到当弹出窗口关闭时，关联的记录会从网格中删除。我不知道为什么会这样。但任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:43:59.497

这听起来像是我们修复的错误。尝试下载最新的内部版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:23:48.627

我有同样的问题。原来它是由使用稍微过时的 jQuery 版本引起的。

Kendo UI 当前需要 1.8.2 版本

# facebook - Facebook channel.html 文件位置

> ID：13882508
> 
> 赞同：0
> 
> 时间：2012-12-14T16:21:13.913
> 
> 标签：facebook, facebook-javascript-sdk

我一直在查看通道文件的文档，他们提供的示例代码显示了域根目录下的通道文件

```
//WWW.YOUR_DOMAIN.COM/channel.html 
```

[https://developers.facebook.com/blog/post/530/](https://developers.facebook.com/blog/post/530/)

[http://www.masteringapi.com/tutorials/facebook-javascript-sdk-best-practices/58/](http://www.masteringapi.com/tutorials/facebook-javascript-sdk-best-practices/58/)

channel.html 文件是否需要位于域的根目录，或者它仍然可以在子文件夹中使用？

例如，如果我有一个 html 页面位于

```
http://WWW.YOUR_DOMAIN.COM/blah/blah/blah/index.html 
```

我的频道文件位于

```
http://WWW.YOUR_DOMAIN.COM/blah/blah/blah/channel.html 
```

它还会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:42:16.887

频道文件可以在任何地方。它只需要由与您的应用程序相同的域提供服务，并且您提供的路径`FB.init`必须是完整的（例如`//www.mydomain.com/path/to/channel.html`）。

# .htaccess - 拒绝第三方访问我的广告服务器

> ID：13882509
> 
> 赞同：0
> 
> 时间：2012-12-14T16:21:15.447
> 
> 标签：.htaccess, access-denied, advertisement-server

我有这种情况：IP X 的用户使用 IP Y 访问我的网站。该网站有一个外部 < script > 标签，它从 AdServer Z (< script src=Z/script.js />) 获取信息并显示广告.

现在，我想阻止 X 直接访问 Z/script.js，但是当用户访问该网站时，它会显示广告。

我尝试使用 .htaccess 这样做：

```
Order allow,deny
Allow from Y
Deny from all 
```

但它不显示广告，我无法直接访问该文件。

但是当我这样做时：

```
Order allow,deny
Allow from X
Deny from all 
```

该网站显示广告，我可以直接访问该文件。

我以为 Z 上的 Apache 会收到 Y 作为 IP，但显然收到的是 X。这是为什么呢？我可以做些什么来保护 Z 免受用户的侵害，但我的网站可以链接这些文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:39:28.123

您直接链接到广告服务器，而不是代理。这意味着当有人从您的网络服务器加载页面并且浏览器呈现`<script src=ADSERVER/script.js>`时，浏览器会直接向 ADSERVER 发送请求。除非您更改 URL，否则您无法对浏览器*不加载此资源做任何事情。*

您可以将 URL 更改为指向服务器上的 URL，并对其进行代理。例如，假设您将 URL 从 更改`http://ADSERVER/script.js`为`/adserver/script.js`。

您可以使用 ProxyPass（仅在虚拟主机或服务器配置中）执行此操作：

```
 ProxyPass /adserver/script.js http://ADSERVER/script.js 
```

或 mod_rewrite（在 htaccess、server 或 vhost 配置中，但必须加载 mod_proxy）：

```
 RewriteEngine On
    RewriteRule ^/?adserver/script.js http://ADSERVER/script.js [L,P] 
```

然后在广告服务器上，只允许来自 Y（您的网络服务器）的访问。

# ruby-on-rails - Rails 没有从 HTTP 请求中获取参数

> ID：13882511
> 
> 赞同：2
> 
> 时间：2012-12-14T16:21:17.790
> 
> 标签：ruby-on-rails

我正在尝试`POST`将以下数据从 Android 发送到 Rails 服务器（在 WebRick 上运行）。

```
<?xml version='1.0' encoding='UTF-8' standalone='yes' ?>
<data>
  <email>email.test@name.com</email>
  <password>APassw0rd</password>
  <remember_me>1</remember_me>
</data> 
```

现在，有趣的是这些数据从未出现在`params`控制器的字段中。Webrick 不输出任何解析错误。（而且我猜如果它收到一个`POST`没有附加数据的，它会发布一个错误：

```
Started POST "/users/sign_in.xml" for 192.168.1.94 at 2012-12-14 17:33:20 +0100
Processing by Users::SessionController#create as XML
Completed 500 Internal Server Error in 22643ms 
```

`request.env`我还没有发现变量中的数据痕迹。实际上，我`HTTP_BODY`在转储字段中没有看到。怎样才能看到请求的原始正文？如果 webrick 收到`POST`没有附加数据的，它真的不会抱怨吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:44:19.927

`request.env`会将数据显示为 IO 对象，因此您将无法直接查看 xml。

`request.raw_post`应该返回原始数据。

要让 rails 尝试将您的 xml 直接解析为 params 哈希，您需要将请求的内容类型设置为 application/xml。“处理为 xml”的东西意味着 rails 将尝试呈现 xml 响应，并且不一定对发布数据的格式有任何影响

# javascript - Javascript获取元素内的类文本

> ID：13882512
> 
> 赞同：2
> 
> 时间：2012-12-14T16:21:29.457
> 
> 标签：javascript, jquery, html

我的 html 中有一堆 span4 类元素。它们看起来像这样：

```
 <div class="span4">
        <div class="widget">
            <div class="header">blablabla</div>
        </div>
    </div> 
```

我想按该文本 iside 标题类对 span4 进行排序。

我这样做是为了对它们进行排序

```
$(".span4").sort(sortAlpha) 
```

但是如何选择标题类中的文本？

我正在这样做，但我想有更好的方法

```
 function sortAlphaAsc(a,b){  
        var nomeA = $(a.childNodes[1].childNodes[1]).text();
        var nomeB = $(b.childNodes[1].childNodes[1]).text();
        return a.innerHTML.toLowerCase() > b.innerHTML.toLowerCase() ? 1 : -1;  
    }; 
```

一定有比这更好的方法

```
$(a.childNodes[1].childNodes[1]).text() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:27:59.463

```
var elems = $(".span4");

elems.sort(function(a, b) {
    return $(a).find('.header').text().toUpperCase().localeCompare(
         $(b).find('.header').text().toUpperCase()
    );
});

$(".span4").parent().html(elems);​ 
```

[**小提琴**](http://jsfiddle.net/c9ySW/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:26:49.200

尝试这个：

```
function sortAlphaAsc(a,b){  
    var nomeA = $(a).find('div.header').text();
    var nomeB = $(b).find('div.header').text();
    return nomeA.toLowerCase() > nomeB.toLowerCase();  
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T16:38:10.680

您可以分离跨度，对它们进行排序和附加。这也将非常快，因为更改内存中的元素并且最终只更新一次 DOM 非常有效。

```
var $spans = $(".span4").detach();

var sortedSpans = $spans.sort(function(spanA, spanB) {
    var spanTextA = $("div.header", spanA).text();
    var spanTextB = $("div.header", spanB).text();

    return spanTextA > spanTextB;
});

$("body").append(sortedSpans); 
```

显然，而不是`body`将其附加回它的实际容器元素。

或者，如果跨度位于公共容器中，则将父级存储在缓存`var $parent = $spans.parent()`中，最后只需执行 $ `parent.html(sortedSpans)`。

我不知道你的全部标记，但这应该让你开始。

### [演示](http://jsfiddle.net/EVFgF/)- 分离跨度，对它们进行排序并再次附加

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T16:28:23.080

你的意思是这样的：

```
$('.span4').find('.header').text(); 
```

这将返回标题 div 内的文本。

# mongodb - 使用 MongoDB 进行内容标记

> ID：13882516
> 
> 赞同：11
> 
> 时间：2012-12-14T16:21:46.807
> 
> 标签：mongodb, database-design, tagging

我想使用 MongoDB 实现内容标记。**在关系数据库中，最好的方法是在内容**（例如，“产品”）和**标签**表之间建立多对多的关系。但是 NoSQL 数据库的最佳方法是什么？

将每个标签放在“内容”文档的*标签*数组中，还是将*标签*的引用放在字符串中会更好吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-14T16:38:15.673

在 MongoDB 中有一个:m 关系的大多数情况下，您应该使用嵌入而不是引用。所以我建议你在每个产品中都有一个带有标签名称的数组“标签”。我假设查看单个产品将是您系统中最常见的用例。这种设计将允许您通过单个数据库查询向用户显示带有标签名称列表的产品。

当您需要一些关于您不想绑定到产品的标签的额外元数据（如标签的长文本描述）时，您可以创建一个额外的标签集合，其中名称字段获取唯一索引用于快速查找并避免重复。当用户单击或悬停在标签名称上时，您可以使用附加查询来获取标签详细信息。

此设计中的一个问题案例是您想要删除或重命名标签的情况。然后，您必须编辑包含该标签的每个产品。但是因为 MongoDB 不像 SQL 数据库那样知道 CASCADE ON DELETE 的外键，所以当你有文档相互引用时，你总是会遇到这个问题。

通过在产品的标签数组中存储 objectID 而不是名称，可以更轻松地重命名标签。但 ID 的缺点是它们对用户无用。您需要获取标签的名称才能显示产品页面。这意味着您必须从标签集合中请求每一个，这需要额外的数据库查询。

# java - 重放通过 ActiveMQ 发送的消息

> ID：13882523
> 
> 赞同：5
> 
> 时间：2012-12-14T16:22:08.180
> 
> 标签：java, activemq

是否有一种简单的方法可以创建通过队列发送的每条消息的副本，以便在需要时，用户可以浏览先前传输的消息列表并通过单击按钮多次重播它们？

我有程序 X 将消息发送到队列，然后程序 Y 将其读入。我希望能够重播先前发送的消息，而不必返回程序 X 并再次重新生成它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T10:38:47.323

如果您没有太多的消息或太多的队列，那么有一些简单的方法可以开始。

首先，您可以设置将消息复制到“复制队列”。使用此策略，每个队列必须执行一次。像这样在`activemq.xml`

```
 <destinationInterceptors>
      <virtualDestinationInterceptor>
        <virtualDestinations>
          <compositeQueue name="INVOICE.OUT">
            <forwardTo>
              <queue physicalName="INVOICE.IN" />
              <queue physicalName="INVOICE.COPY" />
            </forwardTo>
          </compositeQueue>
        </virtualDestinations>
      </virtualDestinationInterceptor>
    </destinationInterceptors> 
```

然后使用工具浏览 COPY 队列上的消息，如果需要，将它们重新发送到 OUT 队列。我喜欢[Hermes JMS](http://www.hermesjms.com/confluence/display/HJMS/Home)工具来处理这些事情。

如果你想要更花哨的东西，你可以阅读[mirrored queues](http://activemq.apache.org/mirrored-queues.html)。

还有另一种相当简单的方法可以轻松复制所有消息。

使用与 activemq 捆绑的 apache-camel。内部的此配置`camel.xml`将实现将所有消息自动复制到以 FOO 开头的队列中。*此路由需要对复制队列名称进行一些修复，但原则上它作为窃听的一次性配置工作。

```
<route>
   <from uri="activemq:FOO.>"/>
   <setHeader headerName="CamelJMSDestination">
     <simple>COPY.${header.JMSDestination}</simple>
   </setHeader>
   <to uri="activemq:dummy"/>
</route> 
```

这里一个非常重要的方面是，如果您存储所有消息，您的服务器将随着时间的推移而填满。我建议您阅读[ActiveMQ 内存管理](http://activemq.apache.org/scaling-the-depth-of-a-queue.html)，或者在给定的时间范围内保留消息副本。从某种意义上说，这可以自动化，因为发送系统实际上可以设置[消息到期](http://activemq.apache.org/how-do-i-set-the-message-expiration.html)，以便消息在数天/数周/数月后自动删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T19:02:45.163

恐怕没有简单的方法，因为这样的行为会违反排队系统的想法。但是，您可以尝试一些方法：

1.  这有点棘手：将消息发送到持久队列（并确保消息本身是持久的）并禁用自动确认。如果您不确认任何消息，服务器将保留它们，您可以使用 a`QueueBrowser`访问它们。但是，它们最终会超时
2.  当每条消息到达程序 Y 时存储它的副本。实际上，您只需要存储一个引用以确保消息不会被垃圾收集。根据您的消息速率和可用内存，您最终将不得不清除消息
3.  创建一个 ActiveMQ 插件。这绝对是三者中最精细和最复杂的。您将创建一个插件（有关如何创建这些插件，请参阅 ActiveMQ 的文档）并在插件的`send()`或`preDispatch()`方法中拦截消息。**在那里您存储其内容**的副本。您还必须侦听重播请求并根据请求发送您的历史记录（您可以使用 JMS 消息头中的回复字段）。ActiveMQ 附带的统计插件是一个很好的起点。哦，当然你的服务器最终也会耗尽内存。

# c# - 在某个端口上查找传出连接的 IP 地址

> ID：13882529
> 
> 赞同：2
> 
> 时间：2012-12-14T16:22:25.353
> 
> 标签：c#, networking, ip, port

C# 中有没有办法找到我在特定端口上连接的服务器的 IP 地址？

我知道端口将始终为 28961，并且我想获取我在此端口上连接的服务器的 IP 地址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:41:16.550

我写了一个做类似事情的程序。我使用了[SharpPcap](http://sourceforge.net/projects/sharppcap/)组件。下面的代码应该能够帮助您入门：

```
private void StartCapture(ICaptureDevice device)
    {
        // Register our handler function to the
        // 'packet arrival' event
        device.OnPacketArrival += new SharpPcap.PacketArrivalEventHandler(device_OnPacketArrival);

        // Open the device for capturing
        int readTimeoutMilliseconds = 1000;
        device.Open(DeviceMode.Normal, readTimeoutMilliseconds);

        device.Filter = "";

        // Start the capturing process
        device.StartCapture();
    }

private void device_OnPacketArrival(object sender, CaptureEventArgs e)
    {
        var packet = PacketDotNet.Packet.ParsePacket(e.Packet.LinkLayerType, e.Packet.Data);
        var ip = PacketDotNet.IpPacket.GetEncapsulated(packet);

        if (ip != null)
        {
            int destPort = 0;

            if (ip.Protocol.ToString() == "TCP")
            {
                var tcp = PacketDotNet.TcpPacket.GetEncapsulated(packet);

                if (tcp != null)
                {
                    destPort = tcp.DestinationPort;
                }
            }
            else if (ip.Protocol.ToString() == "UDP")
            {
                var udp = PacketDotNet.UdpPacket.GetEncapsulated(packet);

                if (udp != null)
                {
                    destPort = udp.DestinationPort;
                }
            }

            int dataLength = e.Packet.Data.Length;

            string sourceIp = ip.SourceAddress.ToString();
            string destIp = ip.DestinationAddress.ToString();

            string protocol = ip.Protocol.ToString();
        }
    } 
```

通过实现自己的 if 语句，您应该能够使用上面的代码获得所需的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:33:51.983

[这篇 CodeProject](http://www.codeproject.com/Articles/4298/Getting-active-TCP-UDP-connections-on-a-box)文章可能会对您有所帮助。它链接到一个完整工作的演示项目下载。它已经存在了很长时间，毫无疑问，在 .NET 的更高版本中有更简单的方法可以做到这一点。但它仍然有效，应该给你你需要的东西。

获得活动 TCP/IP 连接列表后，您应该拥有在端口 28961 上选择连接并获取 IP 地址所需的一切。

# git - 如何使 emacs + egg (git) 与远程文件一起工作（通过 ssh 访问）

> ID：13882532
> 
> 赞同：1
> 
> 时间：2012-12-14T16:22:35.930
> 
> 标签：git, emacs, ssh, tramp, sshfs

访问本地系统中的 repos/dirs/文件时，我的 emacs + egg 工作正常。

此外，通过 ssh 打开和编辑文件也可以正常工作，例如

```
ctrl-f /ssh:jds@dev.acme.com:/home/jds/src/test.py 
```

但是当执行 egg-status 时，我得到......

```
Opening input file: no such file or directory, /HEAD 
```

请注意，如果我打开一个 shell 并 ssh 进入远程系统，所有 git 命令都可以正常工作。

感谢您提供任何帮助以使其正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T10:09:35.980

我同意[Alex 的回答](https://stackoverflow.com/a/13890975/462302)，即您应该使用更高级和更棒的[magit 包](http://philjackson.github.com/magit/)。

关于为什么 egg 不能按照您想要的方式工作的更长的故事是这样的：egg 的编写方式*不能*使用 TRAMP 对远程文件进行操作，因为 egg.el 使用该`call-process`功能，而[magit](http://philjackson.github.com/magit/)使用[远程进程](http://www.gnu.org/software/emacs/manual/html_node/tramp/Remote-processes.html)`start-file-process`中描述的支持[TRAMP 手册的部分](http://www.gnu.org/software/emacs/manual/html_node/tramp/Remote-processes.html)：

```
5.4 Integration with other Emacs packages.

tramp supports running processes on a remote host. This allows to
exploit Emacs packages without modification for remote file names.
[...]
process-file and start-file-process work on the remote host when the
variable default-directory is remote:

     (let ((default-directory "/ssh:remote.host:"))
       (start-file-process "grep" (get-buffer-create "*grep*")
                           "/bin/sh" "-c" "grep -e tramp *")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:20:35.687

magit[包](http://philjackson.github.com/magit/)适用于远程文件（刚刚重新检查:-)。而且我认为，它是所有 Emacs/Git 软件包中最先进的。

# asp.net - 使用@Html.EditorForModel() 时，[HiddenInput] 属性是否有效？

> ID：13882533
> 
> 赞同：2
> 
> 时间：2012-12-14T16:22:38.460
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, attributes, html-helper

我用“HiddenInput”属性标记了“ProductId”属性：

```
[HiddenInput(DisplayValue = false)]
public int ProductId { get; set; } 
```

当我在“索引”视图中使用@Html.EditorForModel() 时，屏幕上会出现“ProductId”。

```
@model SportStore.Domain.Entities.Product

@using (Html.BeginForm())
{
@Html.EditorForModel()
<input class="AdminButton" type="submit" value="Save changes"/>
} 
```

虽然，当我为每个属性使用 @Html.EditorFor() 时，“ProductId”是隐藏的。

```
@model SportStore.Domain.Entities.Product

@using (Html.BeginForm())
{
    @Html.HiddenFor(x => x.ProductId)
    <nav>Name: <br/>@Html.EditorFor(x => x.Name)<br/></nav>
    <nav>Description: <br/>@Html.EditorFor(x => x.Description)<br/></nav>
    <nav>Price: <br/>@Html.EditorFor(x => x.Price)<br/></nav>
    <nav>Category: <br/>@Html.EditorFor(x => x.Category)<br/></nav>
    <input class="AdminButton" type="submit" value="Save changes"/>
} 
```

那么，@Html.EditorForModel() 不支持 [HiddenInput] 属性或者我犯了一个愚蠢的 :) 错误？

[我在这里](https://stackoverflow.com/questions/11052293/asp-net-hiddeninput-data-attribute-not-working-when-rendered-with-html-editorf?rq=1)发现了相同（但未回答）的问题

# asp.net - AdBlock 阻止 .NET 4.5 网站上的 CSS 和图像

> ID：13882541
> 
> 赞同：4
> 
> 时间：2012-12-14T16:23:04.380
> 
> 标签：asp.net, visual-studio-2012, .net-4.5, adblock

我使用 Visual Studio 2012 附带的默认 web-forms 网站模板创建了一个新网站。只需转到 File--> New Website --> C# --> Asp.Net Web Site，然后让它创建它是基本的模板。

然后我按 F5 进行调试，它运行良好，我得到带有水绿色块的默认欢迎页面，等等......但是当我将它添加到 IIS 并使用 Chrome 中的 localhost/WebsiteName 浏览到它时，AdBlock 插件会阻止所有的 CSS 和图像，所以我看到的只是黑白无样式的文本。当我禁用 AdBlock 时，样式和图像会恢复，并且看起来很正常，就像调试时一样。

我感觉它与捆绑引用有关，但我不确定发生了什么。

AdBlock 拦截具体是什么？

为什么它在通过 Visual Studio 调试时不阻止它，只有在通过 localhost/WebsiteName 浏览到它时才阻止它？

我可以做些什么来防止使用 AdBlock 的用户在明显不是广告的情况下阻止此内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T17:39:14.293

我必须假设您的 Adblock 配置中有匹配的规则。如果您转到**Adblock - 选项**并打开**“我是高级用户，请显示高级选项”。**然后您应该能够重新加载您的页面并从 Adblock 按钮转到**“显示资源列表” 。**页面上的所有项目都将显示，被阻止的项目将显示为红色，并显示匹配的过滤器。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T19:32:02.110

谢谢你的提示。事实证明，AdBlock 会阻止任何匹配 /advertising/* 的内容，而我的应用程序的实际名称是“Advertising”，因为它将成为我组织的广告商管理系统。看起来我需要为该文件夹找到一个新名称。调试时只转到 localhost:5538/ 但 localhost/advertising/default.aspx 因路径中的“广告”一词而被阻止。

# jogl - JOGL 不显示

> ID：13882548
> 
> 赞同：1
> 
> 时间：2012-12-14T16:23:23.750
> 
> 标签：jogl

我正在寻找一个适用于 Mac 和 IBM 的 openGL 库。JOGL 似乎是一个不错的选择，但是，当我导入 JGears 演示时，我得到了一个奇怪的结果。程序中所有与挥杆相关的组件都在显示，但 GLJPanel（被传递给 Animator）没有显示。据我所知，根本没有调用 display 方法。我希望有人能指出我正确的方向。

我正在使用 JDK 1.7，以及最新的 jogl.jar 和 jogl-natives-macosx-universal.jar

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:24:02.873

从今天开始，您需要使用 NEWT 以获得最大的兼容性：

[https://sites.google.com/site/justinscsstuff/jogl-tutorial-2](https://sites.google.com/site/justinscsstuff/jogl-tutorial-2)

但是，Newt 与 Canvas 相比还有其他优点和缺点，请参阅上述链接以获取完整列表。

此外，试试这个 Gears 演示：

[http://jogamp.org/deployment/jogamp-current/jogl-demos/jogl-newt-applet-runner-gears.html](http://jogamp.org/deployment/jogamp-current/jogl-demos/jogl-newt-applet-runner-gears.html)

它应该是您从一开始就在寻找的东西。

# objective-c - 如何在视图之间正确切换

> ID：13882551
> 
> 赞同：0
> 
> 时间：2012-12-14T16:23:32.687
> 
> 标签：objective-c, ios

我正在制作一个 iOS 应用程序（第一个不是 Hello World 的实际应用程序），它将有 2 个屏幕。在如何使一个屏幕（或视图控制器）打开另一个屏幕之前，我在这里询问过，这就是我想使用的：

`[self presentViewController:[[self storyboard] instantiateViewControllerWithIdentifier:@"statView"] animated:YES completion:nil];`

有用。但是，它在运行时给了我以下消息：

`Unknown class statView in Interface Builder file.` （注意：这并不能阻止我使用该应用程序，这似乎只是一个警告。

这让我相信我做错了什么。此外，似乎我正在实例化这个新的视图控制器，但从未摆脱它。所以当我来回走动时，我想我可能每次都将这些视图控制器实例化为新的？

所以我的问题是：

1.  如果有更好的方法在这些窗口之间切换，该怎么做呢？

2.  如果这是正确的，为什么会出现错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:28:30.617

最简单的方法是取消情节提要。添加一个按钮并将其链接到第二个视图。

您可以使用 Segue 解析数据：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if([[segue identifier] isEqualToString:@"SEGUENAME"]) {
        SecondViewController *secondViewController = [segue destinationViewController];
        secondViewController.parameter = parameter;    // Parse a value
     }
} 
```

# jquery - jquery ui对话框模式在ie中加载页面后不打开

> ID：13882552
> 
> 赞同：0
> 
> 时间：2012-12-14T16:23:34.513
> 
> 标签：jquery, jsp, jquery-ui-dialog

我在 ie 中遇到了 jquery ui 对话框模式的问题。

如果我在页面完全加载之前单击以打开 jquery ui 对话框模式，它将正确打开。

问题1：关闭后不会再打开。灰色叠加层出现，但模式未打开。

问题 2：如果我等到页面完全加载，那么我会得到相同的效果。

注意事项。

我相信它在功能上是开放的。它只是没有将对话框的 CSS 样式从无更改为需要显示的样式。

页面中有两个版本的 jQuery。我正在使用 noConflict 选项来处理这个问题。旧版本是 1.6.2，另一个是最新版本 1.8.3

如果我进入控制台窗口并使用 1.6.2 版本，我可以打开它，但 css 仍然有点麻烦。它只显示 1/2 的窗口。

我想知道页面上有两个版本的jQuery是否有问题。

这是代码

头中的内联css（在我让对话框正常工作后，我将它移动到一个css文件中）

```
<style type="text/css">
        .ui-icon-custom{ 
        background-image: url(/webapp/wcs/stores/B2BDirectStorefrontAssetStore/images/pastpurchases/buttons/btnClose.png) !important;
        width: 35px !important; 
        height: 35px !important; 
        margin-left: -9px !important; 
        margin-top: -9px !important
    }
    #dialog-modal{
        display: none;
    }
</style> 
```

旧版本的 jQuery (1.6.3)

```
 <script type="text/javascript">
    var jQuery = $.noConflict(true);
</script> 
```

新版本的 jQuery

```
 <script type="text/javascript" src="/webapp/wcs/stores/B2BDirectStorefrontAssetStore//javascript/jquery-1.8.3.js"></script>
<script type="text/javascript" src="/webapp/wcs/stores/B2BDirectStorefrontAssetStore//javascript/jquery-ui-1.9.2.custom.min.js"></script>
<script type="text/javascript" >
    var jQuery_1_8_3 = $.noConflict(true);
             jQuery_1_8_3(function() {
                    jQuery_1_8_3("#dialog-modal").dialog({
                            height: 600,
            width: 650,
                            autoOpen: false,
                            modal: true,
            position:{
                my: 'center',
                at: 'center',
                of: window},
            resizable: false,
            draggable: false /*,
            create: function(event, ui) {
                var widget = jQuery_1_8_3(this).dialog("widget");
                jQuery_1_8_3(".ui-dialog-titlebar-close span", widget).removeClass("ui-icon-closethick").addClass("ui-icon-custom");
                }
                */  

                    });
            });
          jQuery_1_8_3(document).ready(function() {
            jQuery_1_8_3("#prodEnlarge").click(function() {
                    jQuery_1_8_3("#dialog-modal").dialog('open');
                    return false;
            });

            });     

</script> 
```

正文中的对话框模式

```
<div id="prodEnlarge" onclick="sendOmnitureViewLargerClick('event18','Products;359960', isCLP);" style="cursor: pointer;"><img src="/webapp/wcs/stores/B2BDirectStorefrontAssetStore/images/ico_enlarge.png" alt="enlarge" align="left"/><span>click to view larger</span></div>
        <div id="dialog-modal" style="position:relative" >
                <img src="/prodimg/003/500/204078000003.jpg"/>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:42:51.693

它最终是在页面上加载所有内容后css被覆盖。

我最终将以下内容添加到我的 css 文件中

```
 .ui-dialog-titlebar {
        border: none !important; 
        background: none !important;  
    }
    .ui-icon-custom{ 
        background-image: url(/webapp/wcs/stores/B2BDirectStorefrontAssetStore/images/ui-buttons.png) !important;
        background-position: -608px 0;
        position: absolute;
        width: 32px !important; 
        height: 30px !important; 
        margin-left: 7px !important; 
        margin-top: -20px !important;
        cursor: pointer;
        z-index: 3200;
    }
    .ui-icon-custom:hover{
        background-position:-608px -30px;
    }
    #dialog-modal{
        display: none;
    }
    .ui-dialog{
        overflow: visible;
        width: 650px;
        height: 600px;
        z-index: 9999;
    }
    .ui-state-hover{
        border: none !important;
        background: none !important;
    }
    input.ui-button { padding-bottom: 0 !important;} 
```

# java - java - 在 JBOSS 7.1 服务器上使用 Spring、hibernate 和 JPA 时插入失败

> ID：13882553
> 
> 赞同：0
> 
> 时间：2012-12-14T16:23:39.873
> 
> 标签：java, spring, hibernate, jpa, transactional

我正在尝试在我的项目中设置 hibernate + JPA。但是当我尝试插入时没有任何反应，我进入休眠 jar 的源代码，我看到休眠将我的实体识别为瞬态状态而不是持久状态。

我的一些配置是：

我的春天背景：

```
 <jee:jndi-lookup id="integrationDS" jndi-name="java:jboss/datasources/integrationDS" expected-type="javax.sql.DataSource"/>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="integrationDS" />
</bean> 
```

我的持久性xml：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0">
<persistence-unit name="integrationDS">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>java:jboss/datasources/integrationDS</jta-data-source>
    <class>com.integration.domain</class>
    <class>com.integration.domain.myentity</class>
    <exclude-unlisted-classes>true</exclude-unlisted-classes>
    <validation-mode>NONE</validation-mode>

    <properties>
        <property name="javax.persistence.validation.mode" value="none" />
        <property name="hibernate.validator.autoregister_listeners" value="false" />
        <property name="hibernate.generate_statistics" value="true" />
        <property name="hibernate.jdbc.batch_size" value="100"/>
        <property name="hibernate.validator.apply_to_ddl" value="false" />
        <property name="hibernate.dialect" value="com.integration.util.MysqlBitBooleanDialect" />
        <property name="hibernate.id.new_generator_mappings" value="false" />
        <property name="hibernate.hbm2ddl.auto" value="validate" />
        <property name="hibernate.cache.use_second_level_cache" value="false" />
        <property name="hibernate.cache.use_query_cache" value="false" />
        <property name="hibernate.transaction.jta.platform" value="org.hibernate.service.jta.platform.internal.JBossAppServerJtaPlatform" />
        <property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.JBossTransactionManagerLookup"/>
    </properties>
</persistence-unit> 
```

我的代码：

```
 @Transactional
    public <T> T executeSaveInTransaction(T entity) {

    try {
        getDao().persist(entity);
        return entity;
    } catch (RuntimeException e) {
        //rollbackTransaction();
        throw e;
    } catch (Exception e) {
        //rollbackTransaction();
        throw new DaoException(e);
    } finally {
        // clear resources
    }
} 
```

任何想法？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:36:20.770

persistence.xml 的位置是什么？基本上你确定它正在被读取，因为你没有在你的 spring 上下文中提供对 persistence.xml 的引用。

# c# - 在 C# 中使用 FindAndReplace 向单词添加新行

> ID：13882558
> 
> 赞同：0
> 
> 时间：2012-12-14T16:23:54.157
> 
> 标签：c#, ms-word, newline

现在我正在将一些文本导出到 2010 Word 文档。除了新行，我一切正常。新行的字符是什么？我试过“\r\n”、“^p”和“\n”，没有任何效果。

我正在使用“FindAndReplace”方法用字符串替换字符串。

换行符的目的是一些必需的格式。我的同事有一个文本所属的 6 行框。在该框中的第 1 行我有“”，我用数据库中的信息替换它。如果信息超过 1 行，他们不希望框变成 7 行。所以我想出了如何计算文本需要多少行，并将框重新调整为 1 行。因此，例如，如果我的字符串需要 2 行，我想在那之后放置 4 个空行。

如果这是不可能的，我正在考虑放入那个盒子： `<line1> <line2> <line3> and so on...` 然后单独替换每一行。还有其他想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T17:25:56.493

`^13`您可以使用or （等价物）找到每个`^l`换行符，并通过连接 ^13 将它们替换为所需数量的换行符。下面的“Suchen und Ersetzen”对话框是德语的“搜索和替换”。在 Word 2010 中测试。

例子：

![搜索和替换](../Images/a59437e27a7cd70e2189704393697a66.png)

这应该像使用带有 c# 的 COM 自动化一样工作。如果您需要，请提供示例[链接。](http://www.wwco.com/~wls/blog/2010/07/03/find-and-replace-in-word-using-c-net/)

这是概念验证代码：

```
namespace StackWord
{
    using StackWord = Microsoft.Office.Interop.Word;

    internal class Program
    {
        private static void Main(string[] args)
        {
            var myWord = new StackWord.Application { Visible = true };
            var myDoc = myWord.Documents.Add();
            var myParagraph = myDoc.Paragraphs.Add();
            myParagraph.Range.Text = 
               "Example test one\rExample two\rExample three\r";

            foreach (StackWord.Range range in myWord.ActiveDocument.StoryRanges)
            {
                range.Find.Text = "\r";
                range.Find.Replacement.Text = "\r\r\r\r";
                range.Find.Wrap = StackWord.WdFindWrap.wdFindContinue;
                object replaceAll = StackWord.WdReplace.wdReplaceAll;
                if (range.Find.Execute(Replace: ref replaceAll))
                {
                    Console.WriteLine("Found and replaced.");
                }
            }
            Console.WriteLine("Press any key to close...");
            Console.ReadKey();
            myWord.Quit();

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:26:03.910

您可以随时尝试使用：

```
Environment.NewLine 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-23T04:20:48.687

您将文件字保存到字 97 - 2003(*.doc)，您的“FindAndReplace”方法将起作用：D

# javascript - 通过移动和浏览器上的屏幕方向不同的 javascript/jQuery 函数

> ID：13882559
> 
> 赞同：2
> 
> 时间：2012-12-14T16:23:55.793
> 
> 标签：javascript, jquery, responsive-design

免责声明：我不是 javascript 或 jQuery 专家。

这可能是一个容易解决的问题，因为它只是一个我无法弄清楚的小问题。如果浏览器处于横向模式，我正在实现一个水平的站点，如果是纵向的，我正在实现一个垂直的站点。CSS 更改不是问题，因为媒体查询很容易做到这一点。我遇到的问题是当屏幕处于横向模式时我只想运行特定的脚本。我遇到的下一个问题是我不仅希望它在移动设备上工作，而且我还希望它在标准浏览器中也能响应；即检测何时屏幕宽度> 屏幕高度并运行所述脚本。到目前为止，这是我的代码：

```
var height = $(window).height();
var width = $(window).width();
if (width > height) {
    //run landscape script
} else {
    //run portrait script
}; 
```

这可以很好地检测页面加载时的方向，但是在调整屏幕大小时它不会改变，因为脚本没有绑定到 window.resize。话虽如此，当我将它绑定到 window.resize 时它也不起作用。

有没有更好的方法来解决这个问题？还是我只需要修复这里已经存在的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:45:47.243

万一其他人将来遇到这个问题，我会发布解决我问题的方法。

当我尝试将 resize 事件添加到函数时，我的代码如下所示：

```
$(window).on('resize', function() {
    var height = $(window).height();
    var width = $(window).width();
    if (width > height) {
        //run landscape script
    } else {
        //run portrait script
    };
)}; 
```

这工作得很好，但它并没有出现，因为脚本**仅在浏览器调整大小时被触发**。虽然这是必不可少的，但脚本也需要在页面加载时触发。我的解决方案只是在事件中添加“加载”：

```
$(window).on('resize load', function() {
    var height = $(window).height();
    var width = $(window).width();
    if (width > height) {
        //run landscape script
    } else {
        //run portrait script
    };
)}; 
```

# c++ - Windows 7 中的 QBSDK (QuickBooks)

> ID：13882561
> 
> 赞同：0
> 
> 时间：2012-12-14T16:24:05.607
> 
> 标签：c++, windows-7, quickbooks

我试图让 QBSDK 在我的 Windows 7 机器上运行。我正在尝试运行名为 EventHandler 的示例程序。它与示例 EventSubscribe 一起运行。我在 Visual Studio 2008 中编译了这些。EventHandler 在文件菜单中有一个选项，称为注册回调接口。当我运行它时，它表明 COM 连接已创建，但是当我尝试订阅 EventSubscribe 示例程序中的事件时，它给了我错误“无法从订阅请求中提供的 CLSID 或 ProgID 找到回调应用程序。”

在我的 Windows 7 机器上注册回调接口后，我注意到取消注册命令没有突出显示。我还在一台装有 Visual Studio 2008 的 Windows XP 机器上编译了它，我注意到 Unregister 被突出显示。我在 Windows XP 机器上没有 Quickbooks。

我已经尝试了很多方法来让它发挥作用……知道发生了什么吗？

我正在使用 C++

谢谢，

吉姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:56:29.060

这可能无法直接描述您的情况，但概念相似。从 Vista 开始，由于 Windows UAC 限制，需要使用“以管理员身份运行”来配置 QuickBooks SDK（和其他基于 COM 的技术）的很多变通方法。

从 SDK 文档：

```
After you subscribe your menu extension events and
register them as documented, you need to run QB
using "Run As Administrator." This only has to be
done ONCE, after running QB as admin once, your
menu items will continue to show up and menu
events will be received by your event handler without
running QB as admin. 
```

一般原则是，即使您在管理帐户下运行 Windows，您可能需要在配置过程中同时“以管理员身份运行”QuickBooks UI 和使用 QBSDK 的应用程序。完成所有注册和配置后，它应该可以像普通用户一样工作。

# .htaccess - .htaccess - 当没有请求的 URI 时

> ID：13882565
> 
> 赞同：3
> 
> 时间：2012-12-14T16:24:23.563
> 
> 标签：.htaccess

我正在寻找一个`.htaccess`文件，让任何请求传递到其原始目标但重定向到特定文件夹（在这种情况下为启动屏幕）没有指定目标。我不是很精通，`.htaccess`希望能得到一些帮助。

示例：我请求[http://www.domain.com/folder/file.php](http://www.domain.com/folder/file.php)，它应该通过。但如果我请求[http://www.domain.com/](http://www.domain.com/)，它应该重定向到[http://www.domain.com/splash/](http://www.domain.com/splash/)。

到目前为止，我正确重定向到`/splash/`，但将***所有内容***重定向到`/splash/`.

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    # If the requested URI is empty...
    RewriteCond %{REQUEST_URI} !^$

    # ...then redirect to the "splash" folder
    RewriteRule .* splash [L]

    # Otherwise rewrite the base
    RewriteBase /

    # If the request is not a folder or a file, redirects to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
</IfModule> 
```

谢谢！

编辑：重要的一点是将 http://www.domain.com/ 重定向[到](http://www.domain.com/)http://www.domain.com/splash/ [，](http://www.domain.com/splash/)但允许直接访问[http://www.domain.com/index。 .php](http://www.domain.com/index.php) _

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T16:41:00.177

该`%{REQUEST_URI}`变量包含一个前导斜杠，因此它永远不会为空。你可以摆脱它，只使用这个规则：

```
RewriteRule ^/?$ /splash/ [L,R] 
```

如果您希望浏览器地址栏中显示的 URL 保持不变`http://www.domain.com/`，请删除`,R`方括号中的 : `[L]`。

# java - 在 Java 中从 String 常量映射到 int 常量的更好方法

> ID：13882566
> 
> 赞同：0
> 
> 时间：2012-12-14T16:24:23.247
> 
> 标签：java

我有一堆音乐符号的图像，我需要对其进行一些处理，并且对于每个图像，我都需要获取与其文件名相对应的整数代码。有 23 个可能的文件名字符串和 23 个整数代码，并且在不同的目录下有许多同名的图像。

我到目前为止的解决方案在下面给出（缩写）。我刚刚定义了一个`int`和`String`常量的负载，然后编写了一个方法，它只是一个巨大的`if`语句链来进行翻译。

达到相同效果的更好方法是什么？我这样做的方式看起来真的很糟糕！我考虑过使用某种 . `Map`，但我不确定最好的方法。

```
public class Symbol {
    public static final int TREBLE_CLEF = 0;
    public static final int BASS_CLEF = 1;
    public static final int SEMIBREVE = 2;
    // ...

    public static final String S_TREBLE_CLEF = "treble-clef";
    public static final String S_BASS_CLEF = "bass-clef";
    public static final String S_SEMIBREVE = "semibreve";
    // ...

    public static int stringCodeToIntCode(String strCode) {
        if (strCode == S_TREBLE_CLEF) {
            return TREBLE_CLEF;
        } else if (strCode == S_BASS_CLEF) {
            return BASS_CLEF;
        } else if (strCode == S_SEMIBREVE) {
            return SEMIBREVE;
        } //...

        else {
            return -1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T16:25:42.517

我认为您正在寻找可以拥有 String 常量及其值的[Enum 。](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

例子：

```
public enum YourEnumClass{
    STRING_CONST (5),
    STRING_CONST2 (7),
    .....
     //constructor
     //getValue() method
} 
```

阅读链接教程以获取更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:26:54.610

```
enum StringToInt{
  TREBLE_CLEF(0),

  ......
} 
```

[枚举](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)是要走的路。

另一个例子：

```
public enum Color {
 WHITE(21), BLACK(22), RED(23), YELLOW(24), BLUE(25);

 private int code;

 private Color(int c) {
   code = c;
 }

 public int getCode() {
   return code;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T16:42:06.230

哈希图怎么样

```
HashMap<String,Integer> hm=new HashMap<String,Integer();
hm.put("treble-clef",0);
//rest 
```

并通过使用它来获取它

```
int value=hm.get("treble-clef"); 
```

# java - Android 应用程序未处理异常：找不到类“X”，从方法“Y”引用

> ID：13882567
> 
> 赞同：2
> 
> 时间：2012-12-14T16:24:25.803
> 
> 标签：java, android, eclipse

我对 Android 开发有点陌生，所以请多多包涵。

我已经查看了这个[MapView：找不到从方法 B 引用的类 A](https://stackoverflow.com/questions/6530022/android-mapview-could-not-find-class-a-referenced-from-method-b)和这个[找不到方法 XXX，从方法 YYY 引用](https://stackoverflow.com/questions/2349244/android-could-not-find-method-xxx-referenced-from-method-yyy)

但他们无助于解决我的问题。

尝试运行我的应用程序时，我收到问题标题中报告的错误。我的应用程序需要一个我从 Github 提取的 java 项目，该项目本身需要一些 jar 文件才能自行编译。我编译了 java 项目，Eclipse 使我的 android 项目看起来已经编译，但它在我的手机上不起作用。

我尝试了以下方法，都导致相同的结果：

*   直接使用java构建路径引用了java库
*   构建了一个android项目库，它直接使用java构建路径引用java库，然后将android项目库添加​​到我的项目android库路径中
*   构建了一个引用我从 java 库构建的 jar 的 android 项目库，然后将 android 项目库添加​​到我的项目 android 库路径
*   从java库构建了一个jar，然后将jar添加到我的android项目的构建路径中

最终结果总是一样的，我的程序编译但是当我尝试运行它时崩溃说“找不到来自 GitHub 项目的类”从“我的主要活动方法”中引用

有人可以扔骨头吗？

**日志猫**

```
 12-14 11:08:49.792: I/Process(5538): Sending signal. PID: 5538 SIG: 9
12-14 11:09:56.722: D/szipinf(5626): Initializing inflate state
12-14 11:09:56.732: E/dalvikvm(5626): Could not find class 'gmusic.api.impl.GoogleSkyJamAPI', referenced from method com.example.gpmx.MainActivity.runGoogleAPI
12-14 11:09:56.732: W/dalvikvm(5626): VFY: unable to resolve new-instance 445 (Lgmusic/api/impl/GoogleSkyJamAPI;) in Lcom/example/gpmx/MainActivity;
12-14 11:09:56.732: D/dalvikvm(5626): VFY: replacing opcode 0x22 at 0x0000
12-14 11:09:56.732: D/dalvikvm(5626): VFY: dead code 0x0002-0036 in Lcom/example/gpmx/MainActivity;.runGoogleAPI (Ljava/lang/String;Ljava/lang/String;)V
12-14 11:09:56.812: D/AndroidRuntime(5626): Shutting down VM
12-14 11:09:56.812: W/dalvikvm(5626): threadid=1: thread exiting with uncaught exception (group=0x40018560)
12-14 11:09:56.812: E/AndroidRuntime(5626): FATAL EXCEPTION: main
12-14 11:09:56.812: E/AndroidRuntime(5626): java.lang.NoClassDefFoundError: gmusic.api.impl.GoogleSkyJamAPI
12-14 11:09:56.812: E/AndroidRuntime(5626):     at com.example.gpmx.MainActivity.runGoogleAPI(MainActivity.java:63)
12-14 11:09:56.812: E/AndroidRuntime(5626):     at com.example.gpmx.MainActivity.onResume(MainActivity.java:36)
12-14 11:09:56.812: E/AndroidRuntime(5626):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1150)
12-14 11:09:56.812: E/AndroidRuntime(5626):     at android.app.Activity.performResume(Activity.java:3832)
12-14 11:09:56.812: E/AndroidRuntime(5626):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2231)
12-14 11:09:56.812: E/AndroidRuntime(5626):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2256)
12-14 11:09:56.812: E/AndroidRuntime(5626):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1789)
12-14 11:09:56.812: E/AndroidRuntime(5626):     at android.app.ActivityThread.access$1500(ActivityThread.java:123)
12-14 11:09:56.812: E/AndroidRuntime(5626):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
12-14 11:09:56.812: E/AndroidRuntime(5626):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-14 11:09:56.812: E/AndroidRuntime(5626):     at android.os.Looper.loop(Looper.java:130)
12-14 11:09:56.812: E/AndroidRuntime(5626):     at android.app.ActivityThread.main(ActivityThread.java:3835)
12-14 11:09:56.812: E/AndroidRuntime(5626):     at java.lang.reflect.Method.invokeNative(Native Method)
12-14 11:09:56.812: E/AndroidRuntime(5626):     at java.lang.reflect.Method.invoke(Method.java:507)
12-14 11:09:56.812: E/AndroidRuntime(5626):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
12-14 11:09:56.812: E/AndroidRuntime(5626):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
12-14 11:09:56.812: E/AndroidRuntime(5626):     at dalvik.system.NativeStart.main(Native Method) 
```

如果这有帮助，请再提供一条信息。我正在使用的 java 项目取决于各种 apache 和 google jar，它们位于 java 项目“lib”（而不是“libs”）文件夹中。创建jar时这是一个问题吗？

**最后更新：** 原来有一个教训。至少在我的配置下，我在 android 库中需要的所有 jar 都必须位于同一目录级别，即在“libs”下。我有几个必需的 jar，比如 apaches common.io jar 在它自己的“libs”下的目录中，这导致了一个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:29:21.640

请参阅[此 SO 帖子](https://stackoverflow.com/questions/2231474/how-to-import-existing-android-project-into-eclipse)以正确将现有项目导入 Eclipse ...

最有用的帖子似乎是：

1.  File->Import->General->Existing Projects into Workspace，下一步
2.  选择根目录：/path/to/project
3.  项目->全选
4.  取消选中“将项目复制到工作区”和“将项目添加到工作集”
5.  结束

要将其添加为另一个项目的库，请参阅Android 开发网站中的[此链接](http://developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject)。

1.  在 Package Explorer 中，右键单击库项目并选择 Properties。
2.  在“属性”窗口中，选择左侧的“Android”属性组并找到右侧的库属性。
3.  选择“是库”复选框并单击应用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T07:15:25.450

我遇到过同样的问题。终于找到了解决办法。

您导入的 java 项目应该在构建您的 android 项目时构建。

Java build path -> Order and Export，检查java项目，然后重建你的android项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T15:25:47.473

将 OSMDroid 导入我的应用程序后，我遇到了同样的问题。我检查了 LogCat 输出，这表明 Dex 加载程序在 OSMDroid 中找不到特定的类（GeoPoint）。我意识到bin文件夹中没有类文件，即它没有被编译。原因是我的导入已将源代码放入名为“org”的库中，而不是放入“src”中。将其移至“src”并重建 OSMDroid 在“bin”中生成了正确的类文件，现在一切正常。

# c# - 如何检查 google/gmail 帐户是否真实？

> ID：13882570
> 
> 赞同：0
> 
> 时间：2012-12-14T16:24:46.217
> 
> 标签：c#, login, google-api, google-account

我正在编写一个小应用程序，让用户从他的 Google 文档中获取电子表格。我正在制作一个请求电子邮件地址和姓名的登录表单，然后尝试连接到 Google，并检查输入的帐户是否真实。

我正在使用电子表格 API，并且有一个类被调用`SpreadsheetsService`，但它没有任何状态属性；当我输入错误的帐户名时，它只会引发异常。

我的问题：是否有一个库可以为这种情况返回状态代码？

我应该检查课程 `SpreadsheetsService`并检查是否引发了异常？（我必须使用这个类中的一个函数来产生这个）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:41:55.277

```
bool isValid()
{
    try
    {
       connect();
    }
    catch
    {
       return false;
    }

    return true;
} 
```

# jquery - BR 不适用于 XML / jQuery / 替换

> ID：13882574
> 
> 赞同：0
> 
> 时间：2012-12-14T16:24:59.313
> 
> 标签：jquery, xml, replace

我有一个存储一堆东西的 XML 文件，包括参考书的页码。如果有多个页面，它们用斜线分隔，如下所示：

```
<WeaponPage>119/120</WeaponPage> 
```

然后，我使用 jQuery 在一个精美的锚点悬停中填充这些数据，以在用户悬停在超链接上时显示数据。到目前为止没有问题。加载的 HTML 如下所示：

```
<td><span id="weaponPage2" name="weaponPage2"></span></td> 
```

jQuery 看起来像这样：

```
$("#weaponPage"+person).text(WeaponsArray[xx1][23].replace("/","<br>")); 
```

由于某种奇怪的原因，数据被渲染为 119<br>120。它实际上*显示*了中断标记，而不是将其渲染为中断！如果我注释掉 jQuery 并在 HTML 中硬编码数据，它工作得很好，但很明显，这仅用于调试。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T16:26:07.890

使用[.html()](http://api.jquery.com/html/)代替

```
$("#weaponPage"+person).html(WeaponsArray[xx1][23].replace("/","<br>")); 
```

因为[.text()](http://api.jquery.com/text/)会将其呈现为文本并忽略 html 内容

# design-patterns - 使用 verilog 任务创建模式

> ID：13882576
> 
> 赞同：1
> 
> 时间：2012-12-14T16:25:00.727
> 
> 标签：design-patterns, task, verilog

我被这个愚蠢的想法困住了：在一个verilog测试平台中，我想让不同的信号做一个简单的模式：

****_** -------- ***_* _****

 **因为有很多信号我想像这样切换，所以我创建了一个任务：

```
//timescale 10ns / 100ps//

module tb;

reg  rst_chip_n;

    task reset_phase;
    inout signal;
    begin
      signal = 1'b0;
      #(100);
      signal = 1'b1;
      #(100);
      signal = 1'b0;
      #(100);
    end
    endtask

initial begin
  reset_phase(rst_chip_n);
  $finish;
  end

endmodule 
```

但是，这不起作用，仿真时间为 300，但 rst_chip_n 的值始终未定义。为什么 ？我怎么能创建一个任务，在我想要的任何信号上执行这样的模式？谢谢大家 ！

F

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:47:23.097

Verilog 中任务和函数的参数通过值和类型参数传递，并且`output`仅`inout`在*任务或函数返回时*更新。

所以你的例子中发生的事情是这样的：

1.  `rst_chip_n`初始化为 X
2.  `reset_phase`调用时传入`rst_chip_n`(X)的值
3.  在`reset_phase`任务的生命周期内，`signal`更新。这只是任务内部的。如果您的波形查看器允许您`signal`在任务中查看，您应该能够观察到这一点。
4.  完成`reset_phase`后， 的值`signal`将被复制回`rst_chip_n`

如果您允许模拟运行超过时间 300，您将在时间 300 看到go to 0，因为这是您任务中`rst_chp_n`的最终值。`signal`

我认为您无法通过简单的任务来完成这种类型的模式生成。一种选择是制作一个小模块来驱动模式并将输出连接到您想要控制的信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:07:18.450

无需将参数传递给任务。由于您在模块范围内声明了任务，因此它将在任何时候看到这些变量并使用它们。

```
module tb;

reg  rst_chip_n;

    task reset_phase;
    begin
      rst_chip_n = 1'b0;
      #(100);
      rst_chip_n = 1'b1;
      #(100);
      rst_chip_n = 1'b0;
      #(100);
    end
    endtask

initial begin
  reset_phase;
  $finish;
  end

endmodule 
```**

# tridion - Tridion 2011 SP1 - 错误 - 远程服务器返回错误：（401）未经授权

> ID：13882580
> 
> 赞同：5
> 
> 时间：2012-12-14T16:25:33.343
> 
> 标签：tridion, tridion-2011

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:38:05.787

Fiddler 日志中的每个 401 错误最终都会跟着一个 200 OK 响应，不幸的是，这是[HTTP NTLM 身份验证方案](http://www.innovation.ch/personal/ronald/ntlm.html)的结果。简而言之，您的浏览器根本不知道它需要进行身份验证，直到它被包含 WWW-Authenticate 响应标头的 401 响应反弹。因此，从这个角度来看，一切都在意料之中并且似乎正在发挥作用。

在这两种情况下，您似乎都提到它在创建新用户时失败，是否还有其他导致错误的操作？如果不是，那么我将专注于添加新用户，这可能表明您的 MTSUser 帐户（或运行 Tridion Content Manager COM+ 应用程序的身份）可能无法浏览您的域？

# doctrine-orm - Doctrine 2 查询构建器与实体持久性能

> ID：13882589
> 
> 赞同：2
> 
> 时间：2012-12-14T16:26:13.647
> 
> 标签：doctrine-orm, symfony-2.1, doctrine-query

**摘要：哪个更快：更新/刷新实体列表，或在每个实体上运行查询生成器更新？**

我们在 Doctrine ORM（2.3 版）中有以下情况。

我们有一个看起来像这样的表

```
cow
wolf
elephant
koala 
```

我们想用这张表对一个虚构农场的报告进行排序。问题是用户希望客户订购动物（例如考拉、大象、狼、牛）。现在存在使用 CONCAT 或 CASE 为 DQL 添加权重的可能性（例如 0002wolf、0001elephant）。以我的经验，这要么很难构建，而且当我让它工作时，结果集是一个数组而不是一个集合。

因此，为了解决这个问题，我们为每条记录添加了一个“权重”字段，并且在运行选择之前，我们为每条记录分配了一个权重：

```
$animals = $em->getRepository('AcmeDemoBundle:Animal')->findAll();

foreach ($animals as $animal) {
    if ($animal->getName() == 'koala') {
        $animal->setWeight(1);
    } else if ($animal->getName() == 'elephant') {
        $animal->setWeight(2);
    }
    // etc
    $em->persist($animal);
}
$em->flush();

$query = $em->createQuery(
    'SELECT c FROM AcmeDemoBundle:Animal c ORDER BY c.weight'
); 
```

这完美地工作。为了避免竞争条件，我们在事务块中添加了这个：

```
$em->getConnection()->beginTransaction();

// code from above

$em->getConnection()->rollback(); 
```

这更加强大，因为它可以处理生成相同报告的多个用户。或者，可以像这样对实体进行加权：

```
$em->getConnection()->beginTransaction();
$qb = $em->createQueryBuilder();
$q = $qb->update('AcmeDemoBundle:Animal', 'c')
            ->set('c.weight', $qb->expr()->literal(1))
            ->where('c.name = ?1')
            ->setParameter(1, 'koala')
            ->getQuery();
$p = $q->execute();

$qb = $em->createQueryBuilder();
$q = $qb->update('AcmeDemoBundle:Animal', 'c')
            ->set('c.weight', $qb->expr()->literal(2))
            ->where('c.name = ?1')
            ->setParameter(1, 'elephant')
            ->getQuery();
$p = $q->execute();

// etc

$query = $em->createQuery(
    'SELECT c FROM AcmeDemoBundle:Animal c ORDER BY c.weight'
);
$em->getConnection()->rollback(); 
```

问题：

1）这两个例子中哪一个会有更好的表现？

2）考虑到我们需要一个集合，是否有第三种或更好的方法来做到这一点？

请记住，这只是一个示例——在内存中对结果集进行排序不是一个选项，它必须在数据库级别完成——真正的语句是一个 10 表连接和 5 个 orderby。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T13:15:36.440

最初，您可以使用名为`Logging`(\Doctrine\DBAL\LoggingProfiler) 的 Doctrine 实现。我知道这不是更好的答案，但至少您可以实施它以便为您拥有的每个示例获得最佳结果。

```
namespace Doctrine\DBAL\Logging;

class Profiler implements SQLLogger
{
    public $start = null;

    public function __construct()
    {
    }

    /**
     * {@inheritdoc}
     */
    public function startQuery($sql, array $params = null, array $types = null)
    {
        $this->start = microtime(true);
    }

    /**
     * {@inheritdoc}
     */
    public function stopQuery()
    {
        echo "execution time: " . microtime(true) - $this->start;
    }
} 
```

在您的主要 Doctrine 配置中，您可以启用：

```
$logger = new \Doctrine\DBAL\Logging\Profiler;
$config->setSQLLogger($logger); 
```

# java - session.invalidate() 抛出空指针异常

> ID：13882590
> 
> 赞同：0
> 
> 时间：2012-12-14T16:26:18.773
> 
> 标签：java, spring, hibernate, web

当我使 http 会话无效时，它抛出了一个空指针异常，如下所示：

2012 年 12 月 14 日晚上 9:49:52 org.apache.catalina.session.StandardSession 过期严重：会话事件侦听器抛出异常 java.lang.NullPointerException

建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:45:41.347

在您的代码中放置一些断点并在调试模式下使用您最喜欢的 IDE 来确认此“会话”引用变量是否指向空对象。

然后，只需检查文档以阐明 getSession() 方法的所有细节（它可能会给您一些想法）：http: [//tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/http/ HttpServletRequest.html#getSession%28boolean%29](http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/http/HttpServletRequest.html#getSession%28boolean%29)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-18T10:25:05.423

**我认为您的问题将使用此解决，请尝试一下。通过 Gourav Gavate** public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

```
 response.setContentType("text/html");
    PrintWriter out = response.getWriter();

    String op = request.getParameter("operation");
    System.out.println("operation valuse is ->"+op);
    LoginService service = null;
    ResultSet rs= null;
    HttpSession session=null;
    if (op.equals("Login")){
    //System.out.println("1");
    String un=request.getParameter("username");
    String psd=request.getParameter("password");
    try {
        rs = service.searchByUsernameandPassword(un, psd);
        //System.out.println("2");

         while (rs.next()) {
                //System.out.print(rp.getInt(1));
                //System.out.print("\t"+rs.getString(2));
            // System.out.println("in while");
             if(un.equals(rs.getString(3))&& psd.equals(rs.getString(4)))
             {
            //   System.out.println("in if");
             session=request.getSession(true);
             String name = rs.getString(1)+""+rs.getString(2);
             session.setAttribute("name",name);  
          //   System.out.println("set into session");
              response.sendRedirect("http://localhost:8080/Registration/Registration.jsp");
             }else{

                    response.sendRedirect("http://localhost:8080/Registration/Login.jsp");

             }
         }

    } catch (Exception e4) {
        System.out.println(e4);
    }

}   else    if (op.equals("Logout")){
    /*System.out.println("Into logout");
     if(session!=null){  

         System.out.println("Into logout if");    
            session.removeAttribute("name");
            session.invalidate();  
            response.sendRedirect("http://localhost:8080/Registration/Login.jsp");
     }else{
         System.out.println("Into logout else");
         //   session.removeAttribute("name");
              session.invalidate();  
              response.sendRedirect("http://localhost:8080/Registration/Login.jsp");
     }
    */
    HttpSession session1 = request.getSession(); 
    //session.removeAttribute("name");
    session1.invalidate();
    response.setHeader("Cache-Control","no-cache"); 
    response.setHeader("Cache-Control","no-store"); 
    response.setDateHeader("Expires", 0); 
    response.sendRedirect("http://localhost:8080/Registration/Login.jsp");

}

} 
```

# c# - 如何使用 C# 和/或 Notepad++ 在文本行前面添加连续数字？

> ID：13882595
> 
> 赞同：0
> 
> 时间：2012-12-14T16:26:34.613
> 
> 标签：c#, notepad++

我基本上有一个完整的数据列表，如下所示：

```
text', 0, 16, 0, 160),
text text', 0, 36, 0, 720),
text text text', 6, 14, 200, 400),
text text', 6, 20, 40, 185),
text text text text', 6, 6, 80, 80),
text text', 0, 18, 0, 260),
text text text', 3, 3, 60, 60), 
```

我需要这个看起来像这样：

```
(1444, text text', 0, 36, 0, 720),
(1445, text text text', 6, 14, 200, 400),
(1446, text text', 6, 20, 40, 185),
(1447, text text text text', 6, 6, 80, 80),
(1448, text text', 0, 18, 0, 260),
(1449, text text text', 3, 3, 60, 60), 
```

所以我基本上在 C# 中编写了一个 for 循环来生成数字：

```
 for(int i =0; i < amount; i ++)
        {
            Console.WriteLine("("+counter+",");
            counter++;
        } 
```

Counter 是我需要的数字，而 amount 是我需要生成数字的次数。

我试图弄清楚如何在“text”前面获得“（1111”，0、0、0、0），每行，我试图在记事本中查找和替换，但我无法得到它可以工作，有没有办法我可以在 C# 中完成整个事情？或者其他方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T16:29:46.453

```
var indexedLines = yourData.Select((line, idx) => new {Line = line, Index = idx});

foreach(var indexedLine in indexedLines)
    Console.WriteLine("({0}, {1}", indexedLine.Index, indexedLine.Line); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T16:29:23.800

你不能只使用 Excel 或其他电子表格处理器吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T16:30:10.047

是的，使用以下资源：http: [//msdn.microsoft.com/en-us/library/ezwyzy7b.aspx](http://msdn.microsoft.com/en-us/library/ezwyzy7b.aspx)

并尝试做类似的事情：

```
Console.Writeline("(" + counter + "," + line); 
```

# javascript - Javascript注入PDF，与网站通信

> ID：13882597
> 
> 赞同：3
> 
> 时间：2012-12-14T16:26:40.743
> 
> 标签：javascript, jquery, pdf

我的问题涉及在 pdf 中注入的 Javascript。

1.  从我所看到的情况来看，Adobe Professional 似乎没有将 js 注入 pdf 的替代方案。我错了吗？
2.  有没有办法让 pdf 使用 javascript（或任何其他方式）与网站通信，以便即时更新 pdf 中的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:32:01.983

1.  有多个库允许您在应用程序中编辑 PDF 文件（并且不需要 Acrobat）。只需为您的语言/框架选择一个。对于 .NET，我会推荐 O2 Solutions 的 PDF4NET。
2.  是和不是。据我所知，网络 API 仅在 PDF 在浏览器插件中打开时才有效，如果您在 Acrobat 中打开它则不可用。

# actionscript-3 - 尝试在 AS3 中编写多个影片剪辑实例的随机贝塞尔曲线运动

> ID：13882598
> 
> 赞同：-1
> 
> 时间：2012-12-14T16:26:43.100
> 
> 标签：actionscript-3, random, bezier, tween

对AS3完全陌生，还在学习绳索，所以请多多包涵！我正在尝试使用 ActionScript 3.0 制作一个游戏，该游戏将显示 5 只蚱蜢在舞台上以随机位置跳跃。我尝试使用 TweenLite 和 TweenMax 补间引擎无济于事。很可能我做错了，但我现在不知道该去哪里。任何帮助是极大的赞赏。

编辑：我试图让 TweenMax CirclePath2D 影响蚱蜢的各个实例。我尝试将适用的代码放入“操作”面板本身，但它返回此错误：1020：方法标记覆盖必须覆盖另一个方法；和错误 1024：覆盖未标记为覆盖的函数。

以下是我尝试使用的代码：

```
import com.greensock.TweenMax;
import com.greensock.easing.*;

TweenMax.to(GrassHopper, 0.25, {bezierThrough:[{x:253, y:139}, {x:272, y:335}], ease:Back.easeIn}); 
```

此外，我现在只使用上述位置。有没有办法让蚱蜢跳跃的地方随机化？另外，有什么办法可以让他们不断地到处跳来跳去？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:39:00.057

Well first off, you need to refer to specific objects rather than the overall class, so where you wrote 'Grasshopper' you want a reference to grassHopper1\. Then loop through all your grasshoppers to set tweens on them.

For randomizing the locations, use Math.random(). So instead of writing `x:253` write something like `x:Math.random()*253`

For continuously hopping around, TweenMax gives an onComplete parameter you can use to call a function when the tween completes. So put `onComplete:setHops` in the tween and do all the tweening in the setHops() function (ie. have the function call itself)

# file - 同一格式文件中的不同记录格式 - T-SQL（批量上传 - BCP）

> ID：13882600
> 
> 赞同：1
> 
> 时间：2012-12-14T16:26:50.710
> 
> 标签：file, tsql, format, bcp, bulk

我有使用通过 BCP 命令行创建的 XML 格式文件的经验，然后将其用于只有一种记录格式的批量文件。

我的问题是，有没有办法在 XML 中插入条件语句来处理同一数据文件中的不同记录，即：

数据1 数据2 数据3

数据4 数据5 数据6 数据7 数据8

等等等等……

我查看了 XML 的架构，得出的结论是，这不是批量上传格式文件的设计目的。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:46:04.350

据我所知，没有提供支持可变列集的 SQL Server 导入方法（批量插入、BCP、SSIS 等）。绝对定义的每一列都必须在每个导入行中。

出于这个原因，处理这种（非常常见的）情况的首选方法是以下之一：

**1)**使用（或编写）以通用语言（VB、C# 等）编写的专用导入程序来解析文本文件，然后将其插入 SQL Server 的表中。或者，

**2)**使用 SQL Server 提供的一种导入方法（批量插入、BCP、SSIS 等）将每一行作为单个文本列（如 NVarchar(MAX)）导入临时表，然后使用 SQL 解析这些文本行进入他们的实际列。（这是我的首选方法）

上面 (2) 的典型暂存表如下所示：

```
CREATE TABLE Import_Staging
(
    RowNumber INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
    RowText   NVARCHAR(MAX)
); 
```

如果你确实走这条路，导入工具通常会更高兴，如果你对它们隐藏 IDENTITY 列，这可以通过创建外观视图然后将导入定向到视图而不是表来轻松完成。像这样：

```
CREATE VIEW vImport_Staging AS SELECT RowText FROM Import_Staging; 
```

# python - django/python 自定义数据加密

> ID：13882601
> 
> 赞同：2
> 
> 时间：2012-12-14T16:26:53.253
> 
> 标签：python, django

我有一些字符串，可以说`string = "abcd4345.345rg"`，我正在寻找简单的 python 模块，它允许我使用一些密钥（例如 AES）来加密/解密它。

我写这个问题是因为我在 django 中找不到任何模块——我只找到了散列函数。我需要一个小模块，其功能仅此`encrypt(data,key)/decrypt(data,key)`而已。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:31:10.450

您没有指定是否需要对称或不对称算法。无论如何，您可以查看 python 加密文档（hmac 可以是一个很好的非对称/公钥选项）：

[http://docs.python.org/2/library/crypto.html](http://docs.python.org/2/library/crypto.html)

和用于 AES 的 PyCrypto：

[https://www.dlitz.net/software/pycrypto/](https://www.dlitz.net/software/pycrypto/)

# android - Android - ListView 在项目的部分标题中禁用按下效果

> ID：13882613
> 
> 赞同：3
> 
> 时间：2012-12-14T16:27:23.003
> 
> 标签：android

我有一个带有多个元素和节标题的 listView。所有项目都有一个部分标题，但仅在必要时显示。这里是可能项目的 xml 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@drawable/list_selector_transparent"
android:paddingLeft="@dimen/padding_small"
android:paddingRight="@dimen/padding_small" >

<TextView
    android:id="@+id/item_training_section_header"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_marginTop="@dimen/item_training_section_header_margin_top"
    android:background="@drawable/list_selector_transparent"
    android:paddingLeft="@dimen/padding_small"
    android:textColor="@color/item_training_section_header_color"
    android:textSize="@dimen/item_training_section_header_text_size"
    android:textStyle="bold"
    android:visibility="visible" />

<RelativeLayout
    android:id="@+id/item_training_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@id/item_training_section_header"
    android:background="@drawable/list_selector"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/item_training_logo"
        android:layout_width="@dimen/item_training_image_width"
        android:layout_height="@dimen/item_training_image_height"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_margin="@dimen/margin_small"
        android:contentDescription="@string/image_description" />

    <TextView
        android:id="@+id/item_training_title_formation"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_margin="@dimen/margin_small"
        android:layout_toRightOf="@id/item_training_logo"
        android:textColor="@color/item_training_title_formation_color"
        android:textSize="@dimen/item_training_title_formation_text_size" />
</RelativeLayout> 
```

我用“android：clickable”和“android：descendantFocusability”尝试了几件事，但没有任何效果。你有什么主意吗 ？感谢您的回复？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T16:42:33.507

所以，我找到了解决方案。这很简单，但我不确定为什么：

我只是在我的部分标题处插入可点击参数：

```
android:clickable="true" 
```

这里是所有项目：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:paddingLeft="@dimen/padding_small"
android:paddingRight="@dimen/padding_small" >

<TextView
    android:id="@+id/item_training_section_header"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:clickable="true"
    android:layout_marginTop="@dimen/item_training_section_header_margin_top"
    android:paddingLeft="@dimen/padding_small"
    android:textColor="@color/item_training_section_header_color"
    android:textSize="@dimen/item_training_section_header_text_size"
    android:textStyle="bold"
    android:visibility="visible" />

<RelativeLayout
    android:id="@+id/item_training_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@id/item_training_section_header"
    android:background="@drawable/list_selector"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/item_training_logo"
        android:layout_width="@dimen/item_training_image_width"
        android:layout_height="@dimen/item_training_image_height"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_margin="@dimen/margin_small"
        android:contentDescription="@string/image_description" />

    <TextView
        android:id="@+id/item_training_title_formation"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_margin="@dimen/margin_small"
        android:layout_toRightOf="@id/item_training_logo"
        android:textColor="@color/item_training_title_formation_color"
        android:textSize="@dimen/item_training_title_formation_text_size" />
</RelativeLayout> 
```

任何人都可以解释这个解决方案吗？

# javascript - 通过url获取页面中特定的div区域

> ID：13882618
> 
> 赞同：1
> 
> 时间：2012-12-14T16:27:44.690
> 
> 标签：javascript, drupal, mobile

我在 Drupal 站点的页面中有一个表单。我想知道是否可以通过 URL 仅提供表单所在的 div/box，从页面中提取。例如，没有页眉/页脚和其他页面元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:31:08.300

制作 HTML 文件，使用 AJAX (jQuery/JS) 获取表单页面，解析`responseText`以获取所需`<div>`的`document.write()`内容。使用 URL [http://somepage.com/yourHtmlFile.htm](http://somepage.com/yourHtmlFile.htm)你将只收到那个`<div>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T19:22:00.903

如果您使用 Drupal Webforms，请编辑相关表单。单击“网络表单”选项卡。接下来，单击“表单设置”子菜单。然后，单击页面底部的“高级”可折叠 div。最后，选中“作为块可用”复选框。这使得表单（并且只有表单）作为一个块可用，您可以在其中做任何您喜欢的事情。

# asp.net-mvc - RadioButtonFor 绑定到 MVC 中的模型

> ID：13882621
> 
> 赞同：1
> 
> 时间：2012-12-14T16:28:05.470
> 
> 标签：asp.net-mvc

我正在尝试将一组单选按钮绑定到我的模型中的一个值。通常这很容易做到，但我正在尝试对其进行一些更改，以便它像这样工作。 `IsEventsRegistration`是一个 Int，可能的选择是 0 - 5。我希望首先向用户显示 3 个单选按钮：

如果`IsEventsRegistration`为 0 - 选择第一个单选按钮

如果`IsEventsRegistration`是 1 - 选择第二个单选按钮

If `IsEventsRegistration`is > 1 - 选择第三个单选按钮

然后将显示另一组用 jquery 隐藏的 4 个单选按钮。我可以很好地使用 jQuery 处理广播组的隐藏和显示。我的问题是 - 有没有办法将这些单选按钮绑定到`IsEventsRegistration`Making it 的值，所以如果值是 >1 ，那么我的收音机`2 Or 3 Or 4 Or 5`将被检查并且正确的 Radio 也会被检查？

```
@Html.RadioButtonFor(Function(x) x.IsEventsRegistration , 0) <a>...</a><br />
@Html.RadioButtonFor(Function(x) x.IsEventsRegistration , 1) <a>...</a><br />
@Html.RadioButtonFor(Function(x) x.IsEventsRegistration, 2 Or 3 Or 4 Or 5) <a>...</a><br />

<div class="hideRadios">
   @Html.RadioButtonFor(Function(x) x.IsEventsRegistration , 2) <a>...</a><br />
   @Html.RadioButtonFor(Function(x) x.IsEventsRegistration , 3) <a>...</a><br />
   @Html.RadioButtonFor(Function(x) x.IsEventsRegistration , 4) <a>...</a><br />
   @Html.RadioButtonFor(Function(x) x.IsEventsRegistration , 5) <a>...</a><br />
</div> 
```

这是 VB.Net ，但 ac# 的答案同样好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:57:29.907

由于您能够使用 javascript，因此我可能会推荐以下内容。让 2+ 值的单选不属于绑定到的单选组`IsEventsRegistration.`当“单击”时显示额外的值，使用户能够选择其中一个，甚至默认单选为第一个列表。如果事先检查过，请不要忘记“取消选中” 0 或 1 收音机。如果“单击”了 0 或 1，则折叠该更多选项组。

由于“显示更多”单选不是模型组的一部分，因此您不必在控制器中执行任何特殊操作来解析其中的值。

对于初始绘图，只需`$(function () {...})`检查是否选择了任何“显示更多”单选，然后勾选外部单选按钮以触发 .show 功能。

大致

```
@Html.RadioButtonFor(Function(x) x.IsEventsRegistration , 0) <a>...</a><br />
@Html.RadioButtonFor(Function(x) x.IsEventsRegistration , 1) <a>...</a><br />
<input id="more" type="radio" name="show-others">

<div class="hideRadios">
  @Html.RadioButtonFor(Function(x) x.IsEventsRegistration , 2) <a>...</a><br />
  @Html.RadioButtonFor(Function(x) x.IsEventsRegistration , 3) <a>...</a><br />
  @Html.RadioButtonFor(Function(x) x.IsEventsRegistration , 4) <a>...</a><br />
  @Html.RadioButtonFor(Function(x) x.IsEventsRegistration , 5) <a>...</a><br />
</div>

$(document).on('click', '#more', function () {
  $(this).siblings('input:radio').prop('checked', false);
  $('.hideRadios').show();
});

$(function () {
  if ($('.hideRadios input:checked').val() > 1)
    $('#more').trigger('click');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:51:20.610

我想不出如何做你想做的事......甚至不知道它是否可能......但我可以建议你一些解决方法。

只需在您的模型 (ViewModel) 中创建 2 个属性：一个调用`IsEventsRegistration`，第二个调用`IsEventsRegistrationAdvaced`.

然后，使用隐藏收音机的第二个属性。

使用 jQuery，取消隐藏第二组单选按钮并选择第一组。

这样，一旦发回服务器......您将有 2 个值，如果您需要保存到数据库中的单个字段，您可以在控制器操作中添加逻辑以检查要保存的内容。

如果您需要编辑它，您将需要一些 JS 来设置单选按钮的当前状态，然后 JS 逻辑将与创建视图中的相同。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T16:55:25.347

这是不可能的，单选按钮用于单选选项。

我会将单选按钮分为两组，这些组绑定到控制器中的不同模型属性和处理数据。

模型：

```
class MyModel {
  ...
  public int IsEventRegistrationMain { get; set; }
  public int IsEventRegistrationDetail { get; set; }
  ...
} 
```

看法：

```
@Html.RadioButtonFor(x => x.IsEventRegistrationMain , 0) <a>...</a><br />
@Html.RadioButtonFor(x => x.IsEventRegistrationMain , 1) <a>...</a><br />
@Html.RadioButtonFor(x => x.IsEventRegistrationMain , 2) <a>...</a><br />

<div class="hideRadios">
  @Html.RadioButtonFor(Function(x) x.IsEventRegistrationDetail , 2) <a>...</a><br />
  ... 
```

控制器：

```
public ActionResult Process(MyModel model) {
  ...
  var IsEventRegistration = model.IsEventRegistrationMain == 2 ? model.IsEventRegistrationDetail : model.IsEventRegistrationMain;
  ...    
} 
```

# php - 如何从 HTML 代码块中获取 URL？

> ID：13882627
> 
> 赞同：0
> 
> 时间：2012-12-14T16:28:25.733
> 
> 标签：php

> **可能重复：**
> [获取 A 元素的 href 属性](https://stackoverflow.com/questions/3820666/grabbing-the-href-attribute-of-an-a-element)

我有以下代码：

```
<?php $a= "<a href="http://www.kqzyfj.com/click-6331466-10751223" target="_top">
<img src="http://www.tqlkg.com/image-6331466-10751223" width="300" height="250" alt="Kaspersky Anti-Virus 2013" border="0"/></a>" ?> 
```

请建议我如何在 php 中检索 URL（ [http://www.kqzyfj.com/click-6331466-10751223 ）。](http://www.kqzyfj.com/click-6331466-10751223)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:38:39.073

如果您要解析 HTML 以从锚标记中提取 href 属性值，请使用 HTML/DOM 解析器（绝对不要使用正则表达式）。

[PHP 简单的 HTML DOM 解析器](https://stackoverflow.com/questions/369147/javascript-regex-to-extract-anchor-text-and-url-from-anchor-tags)

[PHP XML DOM](https://stackoverflow.com/questions/5977756/extract-url-using-php)

或者

[不要使用正则表达式来解析 HTML](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。使用 PHP DOM：

```
$DOM = new DOMDocument;
$DOM->loadHTML($str); // Your string

//get all anchors
$anchors = $DOM->getElementsByTagName('a');

//display all hrefs
for ($i = 0; $i < $anchors->length; $i++)
    echo $anchors->item($i)->getAttribute('href') . "<br />"; 
```

如有必要，您可以先检查该节点是否有`href`using 。`hasAttribute()`

和这个[链接](https://stackoverflow.com/questions/5977756/extract-url-using-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:33:39.877

尝试`jquery`要么`DOMXPATH`

这是[DOMXPATH的链接](https://stackoverflow.com/questions/4730642/how-to-get-the-value-of-the-href-attribute)

使用 Jquery，您可以通过为其添加选择器来获取其值，例如`id`，

```
<a href="http://www.kqzyfj.com/click-6331466-10751223" target="_top" id='url'> 
```

然后访问它，

```
$(document).ready(function(){
 var link = $("#url").attr("href");
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-14T16:57:39.190

您可以使用正则表达式：

```
preg_match("/href=\"(http:\/\/.*)\"/U",$a, $matches); 
```

它将搜索 'href="' 和 '"' $matches[1] 之间的文本将包含您的网址。

# flash - flash 元素上带有 translate3d 的 Firefox 错误

> ID：13882629
> 
> 赞同：3
> 
> 时间：2012-12-14T16:28:29.360
> 
> 标签：flash, firefox, css, translate3d

FireFox 中存在一个错误，在该错误中，任何被翻译的父（或祖先）元素的 Flash 元素都不会被渲染。如果翻译被删除，它会立即出现。

这是一个例子：

```
<!DOCTYPE html>
<html>
    <head>
        <title>FireSucks</title>
        <style>
.translated {
    height: 315px;
    width: 560px;
    transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1);
}
        </style>
    </head>
    <body>
        <div class="translated">
            <iframe width="560" height="315" src="https://www.youtube.com/embed/bxAvgm0EXpI" frameborder="0" allowfullscreen></iframe>
        </div>
    </body>
</html> 
```

我已经在 Chrome 中测试了相同的代码，它可以毫无问题地呈现，使用 HTML5 视频似乎是唯一的选择，但我想知道这是否可以修复。

谢谢

*更新：*

这里有一个错误报告 - [https://bugzilla.mozilla.org/show_bug.cgi?id=819763#c0](https://bugzilla.mozilla.org/show_bug.cgi?id=819763#c0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T14:41:08.263

这不是一个真正的答案，但我想值得分享：

我有一个类似的问题；

但在我的情况下，flash 播放器被渲染，但由于flash 播放器中的鼠标位置不正确的`position:absolute`组合`transform: translate(0,0)`。因此，尽管显示了悬停，但实际的点击区域点击是`top`和`left`值的负偏移量。

要重现，请使用以下代码段：

```
<style>
#video{
  position: absolute;
  top: 200px;
  left: 200px;
  transform: translate(0, 0);
}
</style>

<div id="video">
  <iframe src="http://player.vimeo.com/video/18043595" width="960" height="540" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
</div> 
```

小提琴：

### [带变换](http://jsfiddle.net/koenpunt/jHgJh/)

### [无变换](http://jsfiddle.net/koenpunt/jHgJh/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:28:45.323

就像错误报告中提到的一条消息一样，Firefox 不支持转换窗口插件。设置`wmode`为`wmode=transparent`或`wmode=opaque`应该按照那里的建议解决问题。

# bluetooth - 蓝牙低功耗可以像 nfc 一样使用吗？比如打印到 ID 徽章上？

> ID：13882637
> 
> 赞同：2
> 
> 时间：2012-12-14T16:28:58.987
> 
> 标签：bluetooth, bluetooth-lowenergy

我正在使用我的 iPhone 扫描复杂的二维条码。问题是，iPhone 相机在非常近的距离（小于 3 英寸）时表现不佳。

我想知道是否有一种方法可以将蓝牙低功耗“贴纸”贴在一张纸上。这个想法不是使用相机扫描二维条码，我可以将我的 iPhone 放在纸附近并“扫描”它。

我对蓝牙技术非常陌生，所以我所要求的很可能是完全荒谬的。请原谅我，如果是这样的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T17:08:18.393

与 NFC 不同，蓝牙低功耗设备需要电源，因此无法仅“打印”它们。他们需要 BLE 芯片和电池才能运行。因此，虽然您可以使用与使用 NFC（基于接近的操作）相同的方式使用 BLE，但仅靠贴纸是无法做到的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T23:04:17.880

在 bluetooth sig 注册制造商 ID。然后将制造商 id 放入广告包 0xff 中，id（16 位）后跟数据。您必须确保您的长度正确，否则 iOS 无法对其进行解码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-01T03:49:27.973

对于 NFC，您的扫描仪必须非常靠近标签。但是BLE设备在几十米范围内工作没有任何问题。这就像一个有源 RFID 芯片。

当然，你需要一个电源。但是如果你把这个BLE标签打印到一件昂贵的设备上，标签和电池的成本就不是问题了。您可以使用纽扣电池为 BLE 标签供电。让我们每秒广播/广告一些信息。当然，如果你想远离任何重放攻击，你必须添加一些安全机制。

# java - 规则引擎演示

> ID：13882638
> 
> 赞同：-1
> 
> 时间：2012-12-14T16:29:00.433
> 
> 标签：java, .net, rule-engine, scriptengine

我必须`Rule Engine`在几个平台上展示概念及其实现，例如`.Net`，等`Java`，`Python`并在下周与技术人员的会议中进行比较。

我以前不熟悉`Rule Engine`。我开始在网上搜索。我看到`Rule Engine`在几个平台上使用 a 和几个实现的几个原因。

在阅读了多个网页后，我发现了它的好处，`Rule Engine`但认为它也一样`Scripting language(Engine)`。

现在，为我提出一个问题或模棱两可的问题：为什么不使用 a`Scripting Language(Engine)`诸如`Python`、`Groovy`或`Bean Shell`其他代替 a `Rule Engine`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:40:56.637

规则引擎的构建是为了根据一些第三方（如业务分析师）提供的一组标准来评估规则，并评估数据或包含数据的对象。此外，大多数规则处理器允许规则链接，它根据先前规则的结果触发附加规则。

规则引擎最常用于定义一组域特定规则（业务规则）并将其应用于规则处理系统公开的特定数据。例如，这允许规则处理逻辑与正常的应用程序代码分离。

脚本语言就是这样，应该用于脚本。请注意，作为 Windows 工作流的一部分包含一个规则引擎，可以从 .net 使用

# java - 按住键时，Java 键绑定会触发按下和释放

> ID：13882639
> 
> 赞同：2
> 
> 时间：2012-12-14T16:29:00.337
> 
> 标签：java, swing, key-bindings

因此，我创建了一个可以传递 2 的方法`AbstractAction`，第一个执行按键事件，第二个执行按键释放事件。

当我按下并释放`UP`键时，这两个动作都会被触发，这很好。如果我按住`UP`键，两个动作仍然会被触发。为什么两个都被解雇了？不应该只有 Key Pressed 被解雇吗？

**主.java：**

```
package sscce;

import java.awt.event.ActionEvent;
import java.awt.event.KeyAdapter;
import javax.swing.AbstractAction;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;

public class Main extends JFrame{

    public Main(){
        this.setSize(500, 400);
        this.setVisible(true);
        this.setResizable(false);
        this.setLocationRelativeTo(null);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel room = new Room();
        this.add(room);
    }

    public static void main(String[] args){
        Main run = new Main();
    }

    public class Room extends JPanel{

        public Room(){
            KeyboardEvent keyboard = new KeyboardEvent();
            keyboard.setEvent(this, "UP", new AbstractAction(){
                @Override
                public void actionPerformed(ActionEvent evt){
                    System.out.println("Up Pressed");
                }
            }, new AbstractAction(){
                @Override
                public void actionPerformed(ActionEvent evt){
                    System.out.println("Up Released");
                }
            });
        }
    }

    public class KeyboardEvent extends KeyAdapter{

        public void setEvent(JPanel comp, String key, AbstractAction act, AbstractAction actRelease){
            // Key Pressed
            comp.
                    getInputMap(JPanel.WHEN_IN_FOCUSED_WINDOW).
                    put(KeyStroke.getKeyStroke(key), "do" + key + "Action");
            comp.
                    getActionMap().
                    put("do" + key + "Action", act);

            // Key Relseased
            comp.
                    getInputMap(JPanel.WHEN_IN_FOCUSED_WINDOW).
                    put(KeyStroke.getKeyStroke("released " + key), "do" + key + "ActionReleased");
            comp.
                    getActionMap().
                    put("do" + key + "ActionReleased", actRelease);
        }
    }
} 
```

# javascript - 不同图像的不同时间延迟

> ID：13882648
> 
> 赞同：0
> 
> 时间：2012-12-14T16:29:40.187
> 
> 标签：javascript

我需要以不同的时间间隔旋转图像，例如第一张图像应该是 10 秒，第二张是 20 秒计时器等。请任何人都可以帮助我。我在下面有这个脚本：

```
<script type="text/javascript">
var imgs3 = new Array("../webroot/img/1.jpg", "../webroot/img/2.gif", "../webroot/img/3.gif");
var lnks3 = new Array("www.a.com", "www.b.com", "www.c.com");
var alt3 = new Array("StarBid", "Happy Winners", "Special Offer");
var currentAd3 = 0;
var imgCt3 = 3;

function cycle3() {
    if (currentAd3 == imgCt3) {
        currentAd3 = 0;
    }
    var banner3 = document.getElementById('adBanner3');
    var link3 = document.getElementById('adLink3');
    banner3.src = imgs3[currentAd3]
    banner3.alt = alt3[currentAd3] document.getElementById('adLink3').href = lnks3[currentAd3]
    currentAd3++;
}
window.setInterval("cycle3()", 10000);​
<script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:45:54.213

试试我创建的这个小提琴：http: [//jsfiddle.net/cEUZq/14/](http://jsfiddle.net/cEUZq/14/)

将图像替换为您要显示的图像。添加任意数量的图像。该变量`times`是一个数组，其中包含要显示的每张图片的秒数。如果您需要任何帮助，请告诉我。

这需要 jQuery。

# jquery-mobile - 在 pageChange 上取消 1 个间隔

> ID：13882652
> 
> 赞同：0
> 
> 时间：2012-12-14T16:30:14.613
> 
> 标签：jquery-mobile

我有 2 个页面需要每分钟调用一个函数，所以我使用`setInterval()`. 但是，每当我导航到该页面时，都会创建一个新的间隔，并最终使网站陷入困境。每当我离开页面时，有没有办法取消间隔？

```
var pollinginterval = 60000;

$('#HomeViewPage_MyLocation').live('pagebeforeshow', function(toPage, fromPage){
    GetUsersByLocation();

    setInterval(function() {
        GetUsersByLocation();
    }, pollinginterval);
});     

$('#HomeViewPage_ColleagueLocation').live('pageshow', function(toPage, fromPage){
    GetAllUsersByTeam();
    GetAvailableTeams();

    setInterval(function() {
        GetAllUsersByTeam();
        GetAvailableTeams();
    }, pollinginterval);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:34:29.163

你的意思是刷新浏览器页面的时候？然后你可以通过监听来停止它`unload`：

```
var runMyFunction = function() {
  // clear interval
};

window.onunload = runMyFunction(); 
```

如果没有，您仍然可以清除内部页面更改的时间间隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:23:18.720

这是因为 jQM 存在多个事件的问题。好的，这不是问题，您必须了解，在您的情况下，每次访问您的页面时都会再次应用相同的事件。

你可以做两件事来解决这个问题：

1.  而不是实时使用绑定/取消绑定和开/关来取消绑定事件，然后在每个 pagebeforeshow/pageshow 之后再次将其绑定到同一元素。这不是什么好方法。

点击事件示例：

```
$('#elementID').unbind();
$('#elementID').bind('click', function(e) {

}); 
```

1.  正确的一种方法是使用事件过滤器来检查事件是否已经绑定。可以在这里找到：http: [//www.codenothing.com/archives/2009/event-filter/](http://www.codenothing.com/archives/2009/event-filter/)

点击事件示例：

```
$('#elementID:Event(click)').each(function(){

}); 
```

# javascript - Sharepoint 列表上的 getJSON 停止在 1000

> ID：13882653
> 
> 赞同：0
> 
> 时间：2012-12-14T16:30:18.297
> 
> 标签：javascript, jquery, list, sharepoint, getjson

```
$.getJSON("urlhere", {}, function(data)
{
     // Other code is commented out, I'm just using the following loop to test.
     for(var a = 0; a < 2546; a++)
          if(a > 995)
               alert((a + 1) + ": " + data.d.results[a].Column2);
}); 
```

出于某种原因，我没有从我的清单中得到我需要的所有东西。所以我放入这个循环来测试它，它由于某种原因停在 1000 处。为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:24:54.403

SharePoint 每个“页面”仅返回 1000 个结果。如果您看一下，在 JSON 底部附近应该有一个“链接”元素，其中包含指向下一个 1000 个结果的链接。

无论如何，当它返回 XML 时就是这样。没有尝试过 JSON，但我确信它是相似的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T15:38:49.197

`'urlForListData' + '?$filter=Building eq \'' + building + '\''`

我发现您可以根据需要过滤列表，使其永远不会超过 1000，这比我以前做的要简单得多。当然，Building 是 SharePoint 列表中的一列，而 building 是一个包含请求的建筑物编号的变量。

# php - PHP while循环中的HTML表单

> ID：13882656
> 
> 赞同：1
> 
> 时间：2012-12-14T16:30:46.670
> 
> 标签：php, html, forms, loops, while-loop

如何将 html 表单放入 PHP while 循环？

它认为是这样的，但它不起作用：

```
<?php

$i=1;
while ($i<=5){

<form name="X" action="thispage.php" method="POST">
     <input type="text">
     <input type="submit">
</form>;

$i=$i+1;

              }

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T16:32:48.397

你可以，你只是不能像这样在 PHP 中间有原始 HTML。在 HTML 之前结束 PHP 语句，然后像这样重新打开它：

```
 <?php

$i=1;
while ($i<=5){
?>

<form name="X" action="thispage.php" method="POST">
     <input type="text" name="trekking">
 <input type="submit">
</form>

<?php 
   $i=$i+1;
     }

?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T16:32:41.500

```
<?php

$i=1;
while ($i<=5):?>

<form name="X" action="thispage.php" method="POST">
         <input type="text" name="trekking">
     <input type="submit">
</form>

<?php $i=$i+1;

   endwhile;

?> 
```

用于`endwhile`对 php 和 html 进行很好的可读分离。如果不需要，不要回显代码块。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T16:32:21.890

您可以使用`echo`：

```
<?php

$i=1;
while ($i<=5){

    echo '
        <form name="X" action="thispage.php" method="POST">
             <input type="text" name="trekking">
             <input type="submit">
        </form>;
    ';

    $i=$i+1;
}
?> 
```

或者，打开和关闭 PHP 标签：

```
<?php

$i=1;
while ($i<=5){

//closing PHP
?>

        <form name="X" action="thispage.php" method="POST">
             <input type="text" name="trekking">
             <input type="submit">
        </form>;

<?php 
//opening PHP 

    $i=$i+1;
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T16:36:12.207

如果您的目标是尝试输出 5 个具有相同名称的表单（我一开始不建议这样做），您可以试试这个：

```
$i=1;
$strOutput = "";
while ($i<=5){

 $strOutput .= '<form name="X" action="thispage.php" method="POST">';
     $strOutput .= '<input type="text" name="trekking">';
     $strOutput .= '<input type="submit">';
 $strOutput .= '</form>';

   $i=$i+
}

echo $strOutput; 
```

*永远不要*像在问题中那样在 PHP 代码中使用 HTML。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T16:32:15.227

您可以通过在 HTML 之前关闭 PHP 块来做到这一点，然后在其余代码之前`?>`重新打开。`<?php`

不过就个人而言，我更喜欢`echo`在 PHP 中使用 HTML。它使您的代码更具可读性。另外，我建议使用`for`循环而不是你那里的循环。

```
<?php
for ($i=1; $i<=5; $i++) {
    echo '<form name="x" action="thispage.php" method="POST">',
         '<input type="text" name="trekking">',
         '<input type="submit"',
         '</form>';
}
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-14T16:33:41.670

你应该先学习PHP。您试图实现的目标是非常简单的基本 PHP。

但是要回答您的问题，请`"[form-html goes here]";`在 while 循环内回显。确保逃脱所有其他`"`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-14T19:03:55.177

```
<?php

$i=1;
echo"<form name="X" action="thispage.php" method="POST">";
while ($i<=5)
{
    echo"<input type="text">";
    echo"<input type="submit">";
    $i++;
}
echo"</form>";

?> 
```

# github - 如何将 Appharbor 指向 Github 存储库的子文件夹

> ID：13882662
> 
> 赞同：0
> 
> 时间：2012-12-14T16:31:16.067
> 
> 标签：github, appharbor

我在 GitHub 文件夹上有一个私有存储库，我想推送[AppHarbor](https://appharbor.com/)，为此我在那里创建了应用程序，并使用以下选项映射了 GitHub 存储库。

> 配置 GitHub 以部署到 AppHarbor

但是我得到了失败的状态，并注意到我需要将 AppHarbor 应用程序指向子文件夹（WWWroot - 我的 Web 文件所在的位置），目前它尝试与 root 进行映射并导致错误。那么如何将 AppHarbor 指向 Github 存储库的子文件夹？

**更新**

映射 github 存储库后，我在 apphabor 上遇到错误

```
D:\temp\4j3jxorb.0qb\output\_PublishedWebsites\WebMatrixWebsite\src\web.config(65): error ASPCONFIG: It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS. 
```

我认为根目录上没有解决方案文件，因此它将被视为 webmatrix 项目。但是在 github 上，我已将 asp.net 网站的源代码放在**src**文件夹以及带有已发布版本的**wwwroot**文件夹中，那么 appharbor 将如何考虑首先构建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:38:32.017

AppHarbor 将始终构建整个存储库的内容。从文件夹的名称来看，您没有提交带有解决方案文件的源代码。考虑使用这种方法，因为这样可以更轻松地控制 AppHarbor 部署的内容。此处的详细信息：http: [//support.appharbor.com/kb/getting-started/build-process-and-solution-file-convention](http://support.appharbor.com/kb/getting-started/build-process-and-solution-file-convention)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-21T06:48:34.547

我来这里是想我很难让 AppHarbor 将应用程序根设置为像 OP 这样的子目录。然而，我只是在 wwwroot/index.htm 推送了一个包含一个文件的存储库，令我惊讶的是，AppHarbor 自动找到了该文件并显示它，无需配置。

# c++ - 返回循环单链表中任何选定索引的指针

> ID：13882667
> 
> 赞同：1
> 
> 时间：2012-12-14T16:31:29.513
> 
> 标签：c++, singly-linked-list

我设计了这段代码，以便我可以获得用户在循环单链表中想要的任何位置的指针，我正在使用 cout 返回指针，我想要这样一种机制，我可以将它与我的其他函数一起使用，而不是重新编写再次完整的代码，为此我需要对现在无效的返回类型做一些事情

这是功能..

```
void pointer_to_node(int index){
    Node*temptr;
    temptr = new Node;
    temptr = firstptr;

    Node*temptr2;
    temptr2 = new Node;
    temptr2 = NULL;
    int count = 1;

    while (temptr!=temptr2){
        if(count==index){
            cout << "Required Pointer is : ";
            cout<< temptr;}

        count++;
        temptr2=firstptr;
        temptr=temptr->nextptr;
    }

    if (index>size_of_list())
    {
        temptr=NULL;
        cout<< "Can't You think in bounds. Take your NULL Pointer ";
        cout << temptr;
        delete temptr;
        delete temptr2;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:38:39.900

你只需要返回一个`Node *`.

然而，当你这样做的时候，你还真的需要去掉这些：`temptr = new Node;`行和`delete`s，因为你在那里泄漏了内存。您只需通过重新分配指针立即丢弃这些新节点。最后的`delete`s 将完全删除错误的节点，并且无论如何都不会在所有情况下调用。

如果你传递一个 0 的索引，你的循环可能确实需要很长时间。

我假设您有充分的理由想要在列表中循环时返回 NULL。

类似以下内容就足够了：

```
Node *pointer_to_node(int index)
{
    Node *temp = firstptr;
    while(index-- != 0) {
        temp = temp->nextPtr;
        if(temp == firstptr) return NULL;
    }
    return temp;
} 
```

# ruby - 如何在 Ruby 中复制嵌套类结构

> ID：13882670
> 
> 赞同：1
> 
> 时间：2012-12-14T16:31:38.327
> 
> 标签：ruby, class, nested

假设我有一个 A 类，如下所示：

```
class A
  class B
  end
  class C < B
  end
  ...
end 
```

我想创建一个与 A 具有相同嵌套类结构的 D 类

```
class D
  Replicate nested class structure of A here
end 
```

我希望 D 看起来像：

```
class D
  class B
  end
  class C < B
  end
  ...
end 
```

这样我就可以用不同的结果做 A::B 和 D::B

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T18:21:26.703

```
class Module
  def replicate m
    m.constants.each do |sym|
      case mm = m.const_get(sym)
      when Class then const_set(sym, Class.new(mm.superclass)).replicate(mm)
      when Module then const_set(sym, Module.new(mm.superclass)).replicate(mm)
      end
    end
  end
end

class D
  replicate A
end 
```

但是`superclass`此代码可能不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T18:39:57.723

```
class A
end
class D
end

[A, D].each do |c|
    c.class_eval %Q(
        class B
            def bar; puts "B#bar in #{c} is not shared" end # <--- new
        end
        class C < B
            def foo; puts "C#foo in #{c}" end
        end
    )
end

p A.constants
p A::C.instance_methods(false)
p D.constants
p D::C.instance_methods(false)
A::C.new.foo
D::C.new.foo 
```

新的

```
A::B.new.bar
D::B.new.bar
=begin
class B # creates a new class B
    def quux; puts "A::B#quux in #{self}" end
end
A::B.new.quux #=> undefined method `quux' for #<A::B:0x101358a98> (NoMethodError)
=end
class A::B # reopens B in A
    def quux; puts "A::B#quux in #{self}" end
end
A::B.new.quux 
```

执行 ：

```
$ ruby -w t.rb 
["B", "C"]
["foo"]
["B", "C"]
["foo"]
C#foo in A
C#foo in D 
```

新的

```
B#bar in A is not shared
B#bar in D is not shared
A::B#quux in #<A::B:0x10402da28> 
```

它比复制整个内部结构（包括方法和可能的变量）更具重复性。为此，您需要反思，或者可能会进行编组。

新：如果您在 %Q() 内的文本中放入某些内容，class_eval 将为每个类评估它，因此它不共享。B 不是独立的，你有两个不同的类 A::B 和 D::B。

如果您想向两个类添加相同的代码，请创建一个模块并包含它。Ruby 创建一个指向模块的代理并将代理插入从对象的类开始到其超类的指针链中，以便搜索方法机制将在类的方法之后和方法之前查找模块的方法超类。

```
class D
   extend A
end 
```

将 A 的实例方法定义为 D 的类（单例）方法。听起来很难看。我认为您应该进行实验，展示 puts、p、instance_methods、singleton_methods 等会发生什么。

# mysql - 如何计算左连接行？

> ID：13882672
> 
> 赞同：2
> 
> 时间：2012-12-14T15:48:58.470
> 
> 标签：mysql

我有 2 张桌子：

```
articles:
id
title
text
timestamp

articles_views:
id
article_id
timestamp 
```

我需要 sql 查询，该查询将返回按该文章的articles_views 计数排序的所有文章的列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T16:48:18.860

```
SELECT
    a.id
    , a.Title
    , COUNT(v.id)
FROM
    articles a
LEFT JOIN
    article_views v
ON a.id = v.article_id
GROUP BY
    a.id, a.title
ORDER BY
    COUNT(v.id) DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:55:59.550

这将解决您的问题-

```
SELECT articles.*, 
(select count(*) from `articles_views` C where P.id = C.article_id ) as CNT 
FROM articles P inner join articles_views C 
  ON P.id = C.article_id group by P.id
order by cnt desc 
```

# doctrine-orm - 在 Doctrine 中保留许多记录导致内存耗尽

> ID：13882673
> 
> 赞同：-1
> 
> 时间：2012-12-14T16:31:45.843
> 
> 标签：doctrine-orm

在命令行上运行 Symfony 命令时，我正在使用带有 mysql 数据库的 Symfony2 框架和 Doctrine，例如 ...

```
/path/to/php app/console myCommand 
```

此命令用于更新记录负载（大约 35,000+），并且我在 1Gb 时内存耗尽，是否有更好且可能更有效的方法来运行这些命令，所以我没有遇到这个问题？

我可以增加内存限制，但最终这会在某个时候再次失败。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:03:39.697

尝试使用批处理来分块处理更新。

[http://docs.doctrine-project.org/en/2.1/reference/batch-processing.html](http://docs.doctrine-project.org/en/2.1/reference/batch-processing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:22:31.397

在实体管理器上调用 clear

```
$em = $this->getContainer()->get('doctrine')->getEntityManager();
$em->flush();
$em->clear(); 
```

因为您只是在更新数据，而不要求它保留在内存中。

# twitter - 创建在 Twitter 上生成推文的链接

> ID：13882677
> 
> 赞同：0
> 
> 时间：2012-12-14T16:32:11.453
> 
> 标签：twitter, html-email

我刚上网查了一下，没找到答案：

是否可以在 HTML 电子邮件中包含一个链接，这样当用户点击它时，他们会在他们的 Twitter 帐户上发布一个预定义的文本，例如“@username #hashtagterm 这个文本会自动为我出现发推文”？

我猜如果用户没有登录，他们将不得不经过登录屏幕，然后到达他们可以发送推文的页面，对吧？

正如我所说，它需要在电子邮件中可靠地工作，所以我猜它不应该有任何与之关联的 javascript。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:36:44.093

试试这个，用你想要的替换文本：

```
https://twitter.com/intent/tweet?text=this+is+a+test 
```

查看[意图](https://dev.twitter.com/docs/intents)

# c# - 如何从 asp.net-membership 获取用户名和用户 ID 并将其绑定到下拉列表？

> ID：13882680
> 
> 赞同：2
> 
> 时间：2012-12-14T16:32:23.310
> 
> 标签：c#, asp.net, asp.net-membership

我正在尝试获取 userName 和 userID From`Membership.GetAllUsers()`以将其绑定到下拉列表

```
 private void Bind_usersList()
    {
        var dictionary = Membership.GetAllUsers().Cast<MembershipUser>();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:39:21.883

A`MembershipUser`没有“userID”，但 a`ProviderUserKey`可能是`Guid`(fe in `SqlMembershipProvider`)。

这应该有效：

```
MembershipUserCollection members = Membership.GetAllUsers();
DdlUsers.DataSource = members.Cast<MembershipUser>()
    .ToDictionary(m => m.ProviderUserKey, m =>  m.UserName);
DdlUsers.DataValueField = "Key";
DdlUsers.DataTextField = "Value";
DdlUsers.DataBind(); 
```

# wolfram-mathematica - 如何检查两个向量的相等元素？

> ID：13882681
> 
> 赞同：3
> 
> 时间：2012-12-14T16:32:29.750
> 
> 标签：wolfram-mathematica

我有两个向量，我需要检查元素是否相等并返回相等的元素总数。因此比较 a = {1,0,1} 和 b = {1,0,0} 将返回 2。

下面的示例是我对递归函数所做的努力，但正在返回错误。

```
Elementcompare[list1_, list2_] :=   If[First[list1] == First[list2], 1, 0]  + Elementcompare[Rest[list1], Rest[list2]]; 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:36:49.087

我假设向量的长度通常是相同的。有一个功能 - [**HammingDistance**](http://reference.wolfram.com/mathematica/ref/HammingDistance.html)您可以使用它来定义：

```
elcom[a_List, b_List] := Length[a] - HammingDistance[a, b] 
```

测试一下

```
elcom[a, b] 
```

> 2

另请查看[**EditDistance**](http://reference.wolfram.com/mathematica/ref/EditDistance.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T21:36:04.240

一种简单快捷的方法是使用向量级数值运算。

```
a = {0, 1, 0, 1, 2};

b = {2, 1, 3, 1, 2};

a - b 
```

> ```
> {-2, 0, -3, 0, 0} 
> ```

```
Unitize[a - b] 
```

> ```
> {1, 0, 1, 0, 0} 
> ```

```
Tr @ Unitize[a - b] 
```

> ```
> 2 
> ```

这相当于`HammingDistance`在此使用中：

```
HammingDistance[a, b] 
```

> ```
> 2 
> ```

我使用`Tr`sum 因为它在打包数组上非常快。与版本 7 的速度比较，`HammingDistance`有两个长列表：

```
a = RandomInteger[3, 500000];
b = RandomInteger[3, 500000];

Do[HammingDistance[a, b], {50}] // Timing // First

Do[Tr @ Unitize[a - b], {50}]   // Timing // First

0.968

0.171 
```

`a`当和`b`不是打包数组时性能更相似，但数值方法仍然获胜。`Length[a]`正如 Vitaliy 所示，您可以从中减去返回值以获得目标指标。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-30T05:29:06.810

如果您的向量是位向量（0 和 1），您可以通过使用位运算符来加快计算速度：

```
a = RandomInteger[1, 500000];

b = RandomInteger[1, 500000]; 
```

首先，检查一致性：

```
HammingDistance[a, b] 
```

> 249965

```
Tr@Unitize[a - b] 
```

> 249965

```
Total@BitXor[a, b] 
```

> 249965

检查速度：

```
Do[HammingDistance[a, b], {50}] // Timing // First 
```

> 1.98993

```
Do[Tr@Unitize[a - b], {50}] // Timing // First 
```

> 0.437551

```
Do[Total@BitXor[a, b], {50}] // Timing // First 
```

> 0.139816

# javascript - z-index 的问题

> ID：13882682
> 
> 赞同：0
> 
> 时间：2012-12-14T16:32:31.870
> 
> 标签：javascript, html, css, z-index

我知道这里有很多关于 z-index 的问题，但我现在使用 z-index 有一段时间了，它总是工作得很好，但现在我在这个问题上苦苦挣扎，我只是不明白为什么会这样不工作，因为我认为我做了所有必要的步骤。

*测试.html*

```
<!DOCTYPE html>
<html>
    <head>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <meta content="utf-8" http-equiv="encoding">

        <link href="style.css" rel="stylesheet" type="text/css" />

        <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js " type="text/javascript"></script>
        <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js" type="text/javascript"></script>
        <script src="http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.validate.unobtrusive.js" type="text/javascript"></script>

        <script type="text/javascript">
            $(document).ready(function(){
                $('.boxGrid').hover(function(){
                    $(".boxCaption", this).stop().animate({bottom:'0px'},{queue:false,duration:300});
                }, function() {
                    $(".boxCaption", this).stop().animate({bottom:'-121px'},{queue:false,duration:300});
                });
            });
        </script>
    </head>
    <body>
        <div style="position: relative; width: 226px; height: 246px;">
            <div class="boxGrid">
                <div class="buttonBack blogImg">
                    <div class="boxCaption">
                        <h3>Top-Blog</h3>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

*样式.css*

```
.boxGrid
{
    width: 226px;
    height: 246px;
    background-image: url(buttonBorder.png);
    position: absolute;
    top: 0px;
    left: 0px;
    z-index: 100;
}

.buttonBack
{
    position: absolute;
    top: 12px;
    left: 13px;
    border: 0px;
    width: 200px;
    height: 223px;
    z-index: 50;
    overflow: hidden;
}

.blogImg
{
    background-image: url(blogButton.png);
}

.boxCaption
{ 
    position: absolute;  
    background: url(caption.png);
    height: 121px;
    width: 100%;
    bottom: -121px;
    text-align: center;
}

.boxCaption h3
{
    font-size: 30px;
    color: #fff;
} 
```

所以我希望这个`.boxGrid`类在类之上`.buttonBack`，我`position:`向所有使用 z-index 的 div 添加了属性。

[JsFiddle](http://jsfiddle.net/xU8hG/)所以红色盒子需要在蓝色盒子后面。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:59:23.483

您不能在其父元素下“隐藏”子元素，因为当您为父元素设置 z-index 时，子元素也会受到影响。只是让他们成为兄弟姐妹。

```
 <div style="position: relative; width: 226px; height: 246px;">
    <div class="boxGrid"></div>
    <div class="buttonBack blogImg">
        <div class="boxCaption">
            <h3>Top-Blog</h3>
        </div>
    </div>
 </div> 
```

看看这个jsfiddle：http: [//jsfiddle.net/ZwC9n/](http://jsfiddle.net/ZwC9n/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T17:09:07.010

您将 div.buttonBack 作为 div.boxGrid 的子级。您可能需要重新排序 HTML。

```
<div style="position: relative; width: 226px; height: 246px;">
    <div class="buttonBack></div>
    <div class="boxGrid">
        <div blogImg">
            <div class="boxCaption">
              <h3>Top-Blog</h3>
         </div>
     </div>
</div> 
```

# windows - 如何使用 Windows 批处理文件脚本重命名多个文件

> ID：13882684
> 
> 赞同：0
> 
> 时间：2012-12-14T16:32:38.800
> 
> 标签：windows, batch-file, dos

我已经并且将拥有名为“x_1.txt x_2.txt x_3.txt, ...”的文件，我输入这些文件的其他程序无法识别顺序，因此它的排序类似于“x_1.txt，x_101.txt， x_2.txt")。一个解决方案是将文件重命名为 x00001.txt ， x00002.txt ，....到目前为止，我已经写了下面的 .bat 文件，但是我有两个问题，如果你能帮我解决它们，我会很高兴：

1-如何从字符串 x_'number'.txt 中删除 'number'.txt

2-（已解决）如何使用此字符串的变量重命名文件名（此文件的重命名部分不起作用！）

```
cls
setlocal enabledelayedexpansion
set /A count=100000
for %%f in (*.txt) do (
   set /a count+=1
   set str=!count:~1!
   echo !str!
   echo %%f
   set filename=%%f
   set filename=!filename:~0,5! /Comment: here I want to just keep the x_ part which I don't know how"
   echo !filename!
   set str3=!filname!!str! 
   echo !str3!
   /// ren %%f !str3!.txt  /Comment: Here I cannot use the variable str3,
   call:renamer %%f !str3!
 )

 :renamer
 ren %1 %2.txt 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T18:00:27.313

如果满足以下条件：

*   您想重命名当前文件夹中的所有 .txt 文件
*   所有 .txt 文件的名称中都只有一个`_`，紧挨在数字之前
*   您的文件名都不包含`!`

然后以下将起作用

```
@echo off
setlocal enableDelayedExpansion
for %%F in (*.txt) do for /f "tokens=1,2 delims=_." %%A in ("%%F") do (
  set num=0000%%B
  ren "%%F" "%%A!num:~-5!.txt"
) 
```

但是要消除这些条件需要更复杂的代码。

这是一个强大的解决方案，应该正确重命名符合模板的所有文件。

*   它允许`_`名称中有多个。
*   它只重命名名称以`_NNN.txt`NNN 是数字结尾的文件
*   它正确处理`!`文件名。

请注意，它不会正确处理超过 99999 的数字。扩展 0 填充的程度很简单。

```
@echo off
setlocal disableDelayedExpansion
pushd .
subst #: .
#:
for /f "eol=: delims=" %%F in ('dir /b /a-d *.txt^|findstr /er "_[0-9]*.txt"') do (
  set "name=%%~nF"
  setlocal enableDelayedExpansion
  for /f "eol=: delims=" %%A in ("!name:_=\x!") do (
    endlocal
    set "file=%%F"
    set "name=%%~pA"
    set "num=%%~nA"
    setlocal enableDelayedExpansion
    set "num=0000!num:~1!"
    set "name=!name:~1,-1!"
    ren "!file!" "!name:\x=_!!num:~-5!.txt"
    endlocal
  )
)
popd
subst /d #: 
```

# kineticjs - 使用 Node.create 从 json 字符串加载会引发异常

> ID：13882689
> 
> 赞同：1
> 
> 时间：2012-12-14T16:33:05.750
> 
> 标签：kineticjs

在这个页面上 [http://entropy.tmok.com/~gauze/canvas/load.html](http://entropy.tmok.com/~gauze/canvas/load.html)

我收到错误：TypeError：this._createNode 不是函数

与此功能有关：

```
Kinetic.Node.create = function(json, container) {
    return this._createNode(JSON.parse(json), container);
}; 
```

我正在使用的 json 字符串是从 stage.toJSON() 调用中复制粘贴的，当我在上面的那个函数上中断时，`this`根据 firebug 的值是“Window load.html”。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:06:00.160

您只需要`new`在创建节点时删除。
所以.....

```
var stage = new Kinetic.Node.create(json, 'container');​ 
```

……变成……

```
var stage = Kinetic.Node.create(json, 'container');​ 
```

....然后它应该可以正常工作。

# list - 如何获取 amzi prolog 列表中的第一次出现？

> ID：13882693
> 
> 赞同：0
> 
> 时间：2012-12-14T16:33:20.047
> 
> 标签：list, prolog

到目前为止，这是我能想到的 .pro 文件。我想打印/获取/输出“thelist”的第一次出现（=first Head）。

```
thelist([a,b,c,d,e]).

head(H,[H|T]). 
```

为什么它总是返回 NO？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:47:18.543

尝试

```
...
thelist([H|_]), write(H), nl,
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:43:43.640

看来我也可以这样使用：

```
thelist(X),first(F,X). 
```

但以下代码必须添加到知识库（.pro 文件）

```
first(F,[F|_]). 
```

更换

```
head(H,[H|T]). 
```

# c# - 如何使 Mono/Winforms 应用程序看起来像现代应用程序？

> ID：13882694
> 
> 赞同：4
> 
> 时间：2012-12-14T16:33:27.443
> 
> 标签：c#, winforms, mono

当我使用 Winforms GUI 工具包在 Mono 中编写应用程序时，它看起来非常原生（当然，因为它是。），但它看起来很旧，就像为 Windows 98 制作的应用程序。我在 Visual Studio 项目中搜索，进入设计师生成的 GUI 代码，但我看不出有什么区别。VS 设计器还导入了 System.Windows.Forms，但它看起来漂亮而现代，而不是陈旧。

过去，当我在 Visual Basic（不是 .Net 类型）中编写代码时，我们使用清单文件来做这件事，效果很好（在 Windows XP 上，Vista 或 7 当时还没有发布。）。但我怀疑清单文件是否是这里的解决方案，因为我在互联网上找不到与此相关的任何内容。

那么，如何让 Mono 应用程序看起来像现代 Winforms 应用程序？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T16:36:16.700

```
Application.EnableVisualStyles(); //Do this before creating your first form. 
```

[http://msdn.microsoft.com/en-us/library/system.windows.forms.application.enablevisualstyles.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.enablevisualstyles.aspx)

# mysql - mysql 兼容性错误 - rake db:create 上的 rake 中止错误

> ID：13882698
> 
> 赞同：0
> 
> 时间：2012-12-14T16:33:37.257
> 
> 标签：mysql, ruby-on-rails, rake

我是ROR的首发

我正在使用 ruby​​ 1.9.3 和 rails 3.2.1

这是使用 rake db:create 命令时出现的内容

```
**>rake db:create
rake aborted!
Please install the mysql adapter: 'gem install activerecord-mysql-adapter' <can't activate mysql <~> 2.8.1>, already activated mysql-2.9.0-x86-mingw32\. Make sur all dependancies are added to Gemfile.>** 
```

已安装 mysql gem 并将`libmysql.dll`文件复制到`Ruby193/bin`（Phpmyadmin 和 xampp 也很好用）。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:58:21.057

看起来您必须将 mysql2 gem 添加到您的 Gemfile 中。

看看这个答案：[Rails mysql2 undefined method](https://stackoverflow.com/questions/12730190/rails-mysql2-undefined-method-accept-for-nilnilclass/13787696#13787696)

如果这不能解决您的问题，请粘贴 Gemfile 的内容。

# jakarta-ee - java堆空间

> ID：13882704
> 
> 赞同：0
> 
> 时间：2012-12-14T16:33:57.227
> 
> 标签：jakarta-ee

当我执行包含 2 个循环的程序时，其中一个嵌套在另一个循环中，我收到此错误 OutOfMemoryError java heap space。我一直在寻找解决方案一周但没有结果。我知道可能问题在于在我的循环中创建实例所以它需要大量的 memory.son 导致内存泄漏。我尝试增加内存大小，但这还不够。我的问题是如何在不使用大量内存的情况下开发相同的程序。这是我的程序。

```
public String getAllActionsJson(){
        //liste des actions de la table action
        List<Action> actions = actionService.getAllActions();
        //liste onglets de la table typeAction
        List<TypeAction> typesActions=actionService.getTypeActions();
        ActionNoeudJson actionRacine = null;
        ActionNoeudJson actionFeuille = null;
        List<ActionNoeudJson> listeFilles = null;
        for(int i=0;i<typesActions.size();i++)
        {
            listeFilles = new ArrayList<ActionNoeudJson>();
            actionRacine=new ActionNoeudJson();
            actionRacine.setId(typesActions.get(i).getId());
            actionRacine.setText(typesActions.get(i).getLibelle());
            for(int j=0;j<actions.size();j++)
            {
                //si le type de l'action est le meme que le type de l'onglet
                //on affecte actionFeuille à la racine courante(onglet approprié) 
                if(typesActions.get(i).getId()==actions.get(j).getTypeAction().getId())
                {   
                    actionFeuille = new ActionNoeudJson();
                    actionFeuille.setId(actions.get(j).getId());
                    actionFeuille.setText(actions.get(j).getLibelle());
                    actionFeuille.setIconCls("icon-tip");
                    listeFilles.add(actionFeuille);
                    actionRacine.setChildren(listeFilles);
                }   
            }
            listeActions.add(actionRacine);

        }
        return ActionSupport.SUCCESS;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:53:18.250

这是一个称为算法分析的主题的研究领域。如果您至少不熟悉 [Big O Notation](http://en.wikipedia.org/wiki/Big_O_notation)，那么您将很难理解如何改进您的算法。

如果您确实理解该表示法并且可以进行基本分析，那么请尝试找出代码的哪一部分使用的内存量最多，并首先尝试对其进行优化。例如，也许您携带的数据在计算中并不真正需要。

您似乎正在尝试为所有类型的所有操作设置一些值。分块做怎么样？尝试拆分工作，这样您就不会同时将所有内容都保存在内存中。然后逐渐构建一个平面动作数组，然后对数组中的每个元素执行一次 for listeActions.add()。

# asp.net - 当应用程序托管在多个服务器上时如何从单个文件夹下载文件

> ID：13882705
> 
> 赞同：0
> 
> 时间：2012-12-14T16:34:00.097
> 
> 标签：asp.net, .net, c#-4.0, web-garden

我有 asp.net 应用程序，它将部署在多个服务器（网络花园）上。我的一台服务器有**ReadyToExport**文件夹，所有文件都来自不同的服务。当用户单击下载链接时，我想将其路由到这个单个文件夹（**ReadyToExport**）。如何将所有下载请求路由到单个文件夹。请提出解决此问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:36:56.830

在多个服务器之间共享一个文件夹并将文件保存在那里？

# android - 通过使用 2 个 NumberPicker 创建一个对话框需要帮助

> ID：13882707
> 
> 赞同：1
> 
> 时间：2012-12-14T16:34:21.810
> 
> 标签：android, numberpicker

我正在尝试使用 2 NumberPickers 创建一个对话框。我希望它们是默认的 Holo 主题样式。我找不到任何好的例子。到目前为止，我得到了：

```
 LayoutInflater inflater = (LayoutInflater)
        getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View npView = inflater.inflate(R.layout.number_picker_dialog, null);
        NumberPicker minPicker = (NumberPicker) npView.findViewById(R.id.min_picker);
        minPicker.setMaxValue(100);
        minPicker.setMinValue(0);
        NumberPicker maxPicker = (NumberPicker) npView.findViewById(R.id.max_picker);
        maxPicker.setMaxValue(100);
        maxPicker.setMinValue(0);

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Text Size:");
        builder.setView(npView);
        builder.setPositiveButton("Okay",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {

                }
            });
       builder.setNegativeButton("Cancel",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                    }
                });
       dialog = builder.create();
       dialog.show(); 
```

number_picker_dialog xml：

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:holo="http://schemas.android.com/apk/res-auto"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:orientation="horizontal" 
 android:gravity="center">

<NumberPicker 
    android:id="@+id/min_picker"
    android:width="100dip"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:/>

<NumberPicker 
    android:id="@+id/max_picker"
    android:width="100dip"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"/>

</LinearLayout> 
```

但是颜色选择器文本是白色的（像背景一样），我无法设置 NumberPicker 的 textColor。

我该如何设置 textColor 或者有人知道一个好的 NumberPicker 示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:33:04.660

我发现了为什么我的 NumberPicker 不是 Holo.Light 样式的问题：

而不是调用：

```
 LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
   View npView = inflater.inflate(R.layout.number_picker_dialog, null); 
```

我通过调用解决了它：

```
 View npView = getLayoutInflater().inflate(R.layout.number_picker_dialog, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:49:57.727

我的方法是创建一个自定义对话框类，如下所示。

```
public class CustomDialog extends Dialog {
     public CustomDialog(Context context) {
        super(context, R.style.customDialog); //use your style id from styles.xml
     }

     public void setNumberDialog() {
          setContentView(R.layout.number_picker_dialog);
          //add required listeners
          show();
     }
} 
```

从调用活动中调用对话框。

```
 new CustomDialog(context).setNumberDialog(); 
```

并且样式参数在styles.xml中定义

```
<style name="customDialog" parent="android:Theme.Dialog">
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>
    <item name="android:background">@android:color/transparent</item>
    <item name="android:textColor">@color/textColorWhite</item>
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T18:48:35.870

尝试 ：

```
<NumberPicker
    style="@android:style/TextAppearance">
</NumberPicker> 
```

# c++ - 安装 CDT 后 Eclipse 不显示任何 C++ 项目选择

> ID：13882709
> 
> 赞同：1
> 
> 时间：2012-12-14T16:34:22.640
> 
> 标签：c++, eclipse, project, eclipse-cdt, eclipse-juno

我有一个问题，我在eclipse中安装了CDT，安装成功。**但是，当我在 C++ 中尝试一个项目时，在Menu File -> New**中没有 C++ Project 的选择。我试图在任何地方找到它，但它没有出现。我也重装了几次，还是不行。我的 Eclipse 是 JUNO，这是我在帮助中添加到“安装新软件”的链接：http: [//download.eclipse.org/tools/cdt/releases/juno](http://download.eclipse.org/tools/cdt/releases/juno)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:46:39.940

转到文件 -> 新建 -> 其他并找到 C/C++ 项目。除非您有 C/C++ 透视图，否则我不认为 C++ 项目是在 new 的第一级提供的。一旦你真正启动了一个 C++ 项目，Eclipse 会询问你是否要切换到 CDT 视角。

# php - 以非阻塞模式从 cronjob 执行 PHP 脚本

> ID：13882711
> 
> 赞同：0
> 
> 时间：2012-12-14T16:34:28.053
> 
> 标签：php, cron, call, nonblocking

我正在使用 cronjob 在共享服务器上运行一个非常非常慢的 PHP 脚本。（该脚本执行一些 HTTP 请求，这些请求会不时在服务器上暂停其执行……它在大约 15-20 秒内完成执行。）

问题是 cronjob 不时终止，共享服务器的帮助台告诉我它不应该连续运行超过 5 秒。

所以我想（在开始认真的优化任务之前）执行脚本并在脚本继续运行时立即返回。直到现在我想到了两种方法：

1.  Cronjob 不会等待 PHP 脚本完成其工作。
2.  Cronjob 将执行一个虚拟 PHP 脚本，该脚本将调用主 PHP 脚本并立即返回，而无需等待第二个脚本返回。

我已经在网上阅读了这两个选项，尤其是在这个网站上，并没有找到真正有效的东西：如果第一个脚本立即完成，multi_curl 不会做任何事情......

提前致谢。

* * *

使用我刚刚提出的可能解决方案进行编辑：

```
header("Content-Length: 0");
header("Connection: close");
flush();

$mainUrl = 'mySecondScript.php';

$active= null;
$mch = curl_multi_init();  
$ch1 = curl_init($mainUrl);
curl_setopt($ch1, CURLOPT_HEADER, 0);

curl_multi_add_handle($mch, $ch1);  
$resultCurl = curl_multi_exec($mch, $active);  

do {
$resultCurl = curl_multi_exec($mch, $active);
} while ($resultCurl == CURLM_CALL_MULTI_PERFORM); 
```

它可能类似于您在此处或网络上其他任何地方可能熟悉的代码 - 但如果我像其他人为我编写的那样使用它，它将无法工作 - 只能这样！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:38:59.523

如果在您的主机上运行的用户 PHP 具有执行权限，您可以使用[shell_exec](http://php.net/manual/en/function.shell-exec.php)和 & 使其运行后台进程，因此在您的 PHP 文件中是这样的：`shell_exec('/path/to/php /path/to/file >/dev/null 2>&1 &')`

# php - php多维数组中的if语句

> ID：13882721
> 
> 赞同：-1
> 
> 时间：2012-12-14T16:35:08.470
> 
> 标签：php, forms, if-statement

我有一个这样的php代码

```
$output .= '<div>';
$output .= sprintf('<input type="text" name="%s"/>', $field['input_name']);
$output .= '</div>';
return $output; 
```

这些输入字段可以重复。所以`$field['input_name'] is a multidimensional array`

所以看起来像这样

```
name[first_name][1][1] 
```

如果我复制该字段，它看起来像这样

```
name[first_name][2][1] 
```

如果名称字段看起来像，我想显示一个按钮`name[username][][]`

我试过这样。但它不起作用。

```
if ($field['input_name'] == 'name[username][][]') {
    $output .= '<input type="submit" value="Testing">';
} 
```

有人可以给我正确的语法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:53:12.043

您需要实现一个`foreach()`循环或一些函数来搜索您的数组。在这种情况下，你最好的朋友是[**RecursiveIteratorIterator**](http://php.net/manual/de/class.recursiveiteratoriterator.php)。

```
function searchArrayValueByKey(array $array, $needle) {

    foreach (new RecursiveIteratorIterator(new RecursiveArrayIterator($array)) as $key => $value) {
        if ($key === $needle)
        return $value;
    }
    return false;
} 
```

实施（示例）：

```
if (searchArrayValueByKey($name['username'], $field['input_name']) {
    $output .= '<input type="submit" value="Testing">';
} 
```

如果您处理大数据数组，此解决方案可能会很慢。

# mysql - 未在 Mysql 参数中获取值

> ID：13882722
> 
> 赞同：1
> 
> 时间：2012-12-14T16:35:10.283
> 
> 标签：mysql, select, split, substring

```
SELECT INSTR('359616044513513-2574', '-') 
```

我想为**dev=359616044513513**和**id=2574等变量赋值**

我怎样才能在MYSQL的存储过程中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:11:37.390

试试这个：

```
SELECT SUBSTRING_INDEX('359616044513513-2574', '-', 1), 
       SUBSTRING_INDEX('359616044513513-2574', '-', -1) INTO @dev, @id; 
```

# windows - 如何在 Windows 中实现两因素身份验证？

> ID：13882723
> 
> 赞同：1
> 
> 时间：2012-12-14T16:35:17.197
> 
> 标签：windows, authentication, two-factor-authentication

我需要做的是用户像往常一样输入他的域/用户名/密码，但还要输入一个额外的令牌，我可以在登录过程中以某种方式拦截，对其进行身份验证，并允许登录或不登录。因此，有效地，用户*只有*在 Windows 允许的情况下才能登录，*并且*此辅助身份验证过程允许它。

Windows 是否为此提供支持？一些实现这一点的机制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:15:13.007

所有现代版本的 Windows（自 XP 起）都对双重身份验证提供不同程度的本机支持。您的要求不是很具体，但如果您只需要本地工作站身份验证（意味着域用户需要 2FA 才能登录特定 PC），那么您可以使用任何 Yubikey 产品轻松完成此操作。他们的 20 美元 USB 令牌可以使用他们的免费软件和内置的 Microsoft 控件与工作站上的用户相关联。

如果您想要 Active Directory 域级身份验证，那么您将需要像 Authlite 这样的产品来对用户进行身份验证。基本上，您通过 GPO 向所有资源推出一个简单的 .MSI，您可以集中注册用户或用户可以自己注册。密钥对存储在 Active Directory 应用程序分区中，并且所有操作都非常无缝。适用于 32 位或 64 位 Windows，一直到 Windows 8/Server 2012。目前，Authlite 的每位用户费用总计 48 美元，没有经常性费用。每个用户都需要一个 USB 或 NFC 令牌。

马克林戈

# html - 如何在网站上放视频

> ID：13882726
> 
> 赞同：-5
> 
> 时间：2012-12-14T16:35:30.800
> 
> 标签：html

我是处理视频的新手，我想要完成的是将视频放在我的网站上。我一直在研究并没有发现太多，任何帮助将不胜感激。这是我到目前为止所拥有的。

```
 <embed "images/K36U21TR.wmv" width="300" height="300" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:38:10.367

我首选的方法是将视频上传到 YouTube 并使用他们的嵌入代码（即 iframe 标签）将其放置在您的网站上。

这让您的用户在观看视频而不是您的视频时使用 YouTube 的带宽。

或者，您可以查看使用 HTML5 VIDEO 标签。

[http://www.w3schools.com/tags/tag_video.asp](http://www.w3schools.com/tags/tag_video.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:42:21.113

```
<video width="300" height="300" controls>
    <source src="images/K36U21TR.wmv" type="video/wmv">
</video> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T18:59:05.710

视频标签：（支持：IE、Firefox、Chrome、Opera、Safari）

```
<video width="320" height="240" controls="controls">
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
  <source src="movie.webm" type="video/webm">
</video> 
```

嵌入标签：（支持：IE、Firefox、Chrome、Opera、Safari）

```
<embed src="helloworld.swf"> 
```

# c# - 具有两种形状的 WPF 按钮背景

> ID：13882730
> 
> 赞同：1
> 
> 时间：2012-12-14T16:35:40.397
> 
> 标签：c#, wpf, xaml, styles

我想要一个带有 2 种背景颜色的按钮，被椭圆的一部分淹没。像这样：

![在此处输入图像描述](../Images/4932f5d083538661e1b3b369a17ce210.png)

两个实现这一点的最佳方法是什么？我在网上找不到它:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:41:46.160

将矩形和椭圆放在按钮的控件模板中（我建议您从 Expression Blend 中的[SimpleButton](http://expression.microsoft.com/en-us/library/cc294894%28v=expression.40%29)样式开始），就像您在绘图中一样。

然后您可以在父边框上设置[ClipToBounds](http://msdn.microsoft.com/en-us/library/system.windows.uielement.cliptobounds.aspx)以`true`隐藏黑色边框之外的部分。

# xcode - UISplitViewController 的详细视图中的左按钮无法显示 UITabBarController（即主视图）

> ID：13882732
> 
> 赞同：0
> 
> 时间：2012-12-14T16:35:51.703
> 
> 标签：xcode, ios6, uitabbarcontroller, uisplitviewcontroller

我无法通过在详细视图中按左键来显示主视图（即 UITabBarController）。下面的代码是我如何实现 UISplitViewControllerDelegate 来设置左按钮。

我正在使用 iOS 6 和 Xcode 4.5。

```
#pragma mark - UISplitViewControllerDelegate
#warning "incomplete implementation"

- (BOOL)splitViewController:(UISplitViewController *)svc
   shouldHideViewController:(UIViewController *)vc
              inOrientation:(UIInterfaceOrientation)orientation {
    return UIInterfaceOrientationIsPortrait(orientation) ? YES : NO;
}

- (void)splitViewController:(UISplitViewController *)svc
     willHideViewController:(UIViewController *)aViewController
          withBarButtonItem:(UIBarButtonItem *)barButtonItem
       forPopoverController:(UIPopoverController *)pc {
    barButtonItem.title = aViewController.title;

    NSMutableArray *toolbarItems = [self.toolbar.items mutableCopy];
    [toolbarItems insertObject:barButtonItem atIndex:0];
    self.toolbar.items = [toolbarItems copy];
}

- (void)splitViewController:(UISplitViewController *)svc
     willShowViewController:(UIViewController *)aViewController
  invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem {
    NSMutableArray *toolbarItems = [self.toolbar.items mutableCopy];
    [toolbarItems removeObject:barButtonItem];
    self.toolbar.items = [toolbarItems copy];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:45:49.327

问题解决了。我用 UINavigationController 替换了 UIToolbar，现在我可以通过单击左侧按钮来显示主视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:45:25.747

为了将来参考，通过设置拆分视图控制器委托并实现这两种方法，您应该可以开始使用了。

```
- (void)splitViewController:(UISplitViewController *)svc willShowViewController:(UIViewController *)aViewController invalidatingBarButtonItem:(UIBarButtonItem *)button
    {
        //remove button from navigation bar in detail navigation controller
        ((UINavigationController*)[svc.viewControllers objectAtIndex:1]).topViewController.navigationItem.leftBarButtonItem = nil;
    }

- (void)splitViewController: (UISplitViewController*)svc willHideViewController:(UIViewController *)aViewController withBarButtonItem:(UIBarButtonItem*)barButtonItem forPopoverController: (UIPopoverController*)pc{

        //add button to navigation bar in detail navigation controller
        barButtonItem.title = @"Navigation";
        ((UINavigationController*)[svc.viewControllers objectAtIndex:1]).topViewController.navigationItem.leftBarButtonItem = barButtonItem;

    } 
```

barButtonItem 的实例为您处理所有切换过程。

# javascript - 使用 javascript/mozilla 在特定网页中播放 mp3 文件

> ID：13882733
> 
> 赞同：0
> 
> 时间：2012-12-14T16:35:54.997
> 
> 标签：javascript, firefox-addon, mp3

> **可能重复：**
> [为什么 Firefox 不支持 <audio> 中的 mp3 文件格式](https://stackoverflow.com/questions/4923136/why-doesnt-firefox-support-mp3-file-format-in-audio)

我正在尝试使用 Mozilla 附加组件将单个 mp3 文件而不是播放列表嵌入到站点中。我的目标是让这个文件在用户访问特定页面时播放，而不是整个网站。我选择了该网站的站点地图作为示例。我的主文件是 overlay.js，我没有任何基于 html 的文件，所以我想知道如何才能做到这一点，因为我在这里搜索了 Q/A，但其中大多数解释了如何使用 Audio for Html 5，而不是在 javascript 中播放文件，或者当用户单击站点地图按钮时。我努力了：

```
var audio = new Audio();
audio.src = "chrome://path/to/file.mp3";
audio.play(); 
```

它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:39:49.387

Firefox 不支持 mp3 文件。有关更多信息，请尝试：[http ://html5doctor.com/html5-audio-the-state-of-play/](http://html5doctor.com/html5-audio-the-state-of-play/)

# mysql - 设计一个需要包含成分和子食谱的食谱数据库

> ID：13882738
> 
> 赞同：17
> 
> 时间：2012-12-14T16:36:16.300
> 
> 标签：mysql, database-design

我正在设计一个需要非常灵活的配方数据库，因为它将直接与我们的后台库存系统进行通信。这是我到目前为止关于表格的内容：

*   食谱：此表将包含食谱日期：名称、烹饪所需的步骤等。
*   成分/库存：这是我们的内部库存，因此这将包含有关将在我们的食谱中使用的每种产品的信息。
*   食谱行项目：这是一个棘手的表，我希望能够链接到这里的成分以及食谱所需的数量，但我还需要能够直接包含食谱表中的食谱（例如马力拉酱我们内部制造的），这就是为什么我很难找出设计这张桌子的最佳方法。

基本上，配方行项目表需要能够链接到成分表或配方表，具体取决于需要哪个行项目，我想知道处理它的最有效方法是什么。

非常感谢您！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T01:59:09.460

看起来你需要一个类似于这样的数据库模型：

![在此处输入图像描述](../Images/70a2799feb34fdc6f33cb7407ded8a8f.png)

该模型具有以下属性：

*   本质上，每个配方都是一系列步骤。
*   每个步骤都有其相对于同一配方的其他步骤的顺序 (STEP_NO)、单位（质量、体积、计数...）、该单位中的数量等。
*   特定步骤连接到一种成分（当 INGREDIENT_ID 为非 NULL 时）或连接到另一个配方（当 SUBRECIPE_ID 为非 NULL 时）。¹
*   除此之外，STEP 是一个相当标准的连接表，实现了多对多关系，这意味着相同的成分可以用于多个配方（甚至是同一配方的多个步骤），而且一个配方可以是“子-recipe”的多个其他食谱。
*   这本质上是一个有向图。数据模型本身不会阻止循环——应该在客户端代码级别避免循环，并可能被触发器检测到。

* * *

*¹如果 MySQL 支持 CHECK 约束（它[不](https://stackoverflow.com/a/2115511/533120)支持），您可以确保其中一个（但不是两个）是非 NULL 的，如下所示：*

```
CHECK (
    (INGREDIENT_ID IS NULL AND SUBRECIPE_ID IS NOT NULL)
    OR (INGREDIENT_ID IS NOT NULL AND SUBRECIPE_ID IS NULL)
) 
```

*就目前而言，您需要一个触发器。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T16:56:57.107

`Ingredients`并且`Recipes`都是可能的`RecipeItems`：

```
CREATE TABLE RecipeItems (
  ItemID       SERIAL,
  Type         ENUM('Ingredient', 'Recipe'),
  Name         VARCHAR(255) NOT NULL,
  Quantity     FLOAT NOT NULL,
  INDEX (ItemID, Type)
);

CREATE TABLE Ingredients (
  IngredientID BIGINT UNSIGNED NOT NULL,
  Type         ENUM('Ingredient'),
  CostPrice    DECIMAL(6,2),
  PRIMARY KEY (IngredientID),
  FOREIGN KEY (IngredientID, Type) REFERENCES RecipeItems (ItemID, Type)
);

CREATE TABLE Recipes (
  RecipeID     BIGINT UNSIGNED NOT NULL,
  Type         ENUM('Recipe'),
  SellPrice    DECIMAL(6,2),
  Date         DATE,
  Instructions TEXT,
  PRIMARY KEY (RecipeID),
  FOREIGN KEY (RecipeID, Type) REFERENCES RecipeItems (ItemID, Type)
); 
```

然后`RecipeLineItems`：

```
CREATE TABLE RecipeLineItems (
  RecipeID     BIGINT UNSIGNED NOT NULL,
  ItemID       BIGINT UNSIGNED NOT NULL,
  Quantity     FLOAT NOT NULL,
  PRIMARY KEY (RecipeID, ItemID),
  FOREIGN KEY (RecipeID) REFERENCES Recipes     (RecipeID),
  FOREIGN KEY (ItemID)   REFERENCES RecipeItems (ItemID)
); 
```

使用这种方法，我建议您启用严格的 SQL 模式（否则将在`ENUM`具有空字符串的类型列中接受无效值`''`作为特殊错误值）：这可能会破坏上述模型的预期引用完整性。另一种（但稍显乏味）的方法是使用触发器手动强制执行参照完整性。

如果只有 MySQL 支持`CHECK`约束，嗯？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T21:34:04.430

该脚本将为您创建一个数据库，让您可以管理食谱、成分、食谱成分 (ingredients_recipes) 以及您的库存和成分的统一。它还可以让您管理您的库存历史记录。

这是获取当前食谱、所需成分、所需数量和当前库存的查询：

```
SELECT recipes.id, recipes.name AS recipeName, ingredients.name AS ingredientNeeded, CONCAT(ingredients_recipes.Qty,' ',neededUnities.name) AS neededQuantity, CONCAT(inventories.qty,' ',inventoryUnities.name) AS availableQuantity FROM recipes 

LEFT JOIN ingredients_recipes ON recipes.id=ingredients_recipes.recipe_id 
LEFT JOIN ingredients ON ingredients_recipes.ingredient_id = ingredients.id 
LEFT JOIN inventories ON ingredients.id=inventories.ingredient_id 
LEFT JOIN unities AS inventoryUnities ON inventories.unity_id=inventoryUnities.id
LEFT JOIN unities AS neededUnities ON ingredients_recipes.unity_id=neededUnities.id

WHERE inventories.`update` = (SELECT MAX(`update`) FROM inventories AS inv WHERE inv.ingredient_id = inventories.ingredient_id); 
```

数据库：

```
-- --------------------------------------------------------
-- Host:                         127.0.0.1
-- Server version:               5.5.16 - MySQL Community Server (GPL)
-- Server OS:                    Win32
-- HeidiSQL version:             7.0.0.4053
-- Date/time:                    2012-12-14 16:33:22
-- --------------------------------------------------------

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET NAMES utf8 */;
/*!40014 SET FOREIGN_KEY_CHECKS=0 */;

-- Dumping database structure for database
DROP DATABASE IF EXISTS `database`;
CREATE DATABASE IF NOT EXISTS `database` /*!40100 DEFAULT CHARACTER SET latin1 */;
USE `database`;

-- Dumping structure for table database.ingredients
DROP TABLE IF EXISTS `ingredients`;
CREATE TABLE IF NOT EXISTS `ingredients` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `name` varchar(250) NOT NULL,
  `unity_id` int(11) NOT NULL COMMENT 'for the default unity',
  `Created` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `Unity_id` (`unity_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- Dumping data for table database.ingredients: ~0 rows (approximately)
DELETE FROM `ingredients`;
/*!40000 ALTER TABLE `ingredients` DISABLE KEYS */;
/*!40000 ALTER TABLE `ingredients` ENABLE KEYS */;

-- Dumping structure for table database.ingredients_recipes
DROP TABLE IF EXISTS `ingredients_recipes`;
CREATE TABLE IF NOT EXISTS `ingredients_recipes` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `ingredient_id` int(10) NOT NULL,
  `recipe_id` int(10) NOT NULL,
  `Qty` float NOT NULL,
  `Unity_id` int(10) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ingredient_id_recipe_id` (`ingredient_id`,`recipe_id`),
  KEY `Unity_id` (`Unity_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- Dumping data for table database.ingredients_recipes: ~0 rows (approximately)
DELETE FROM `ingredients_recipes`;
/*!40000 ALTER TABLE `ingredients_recipes` DISABLE KEYS */;
/*!40000 ALTER TABLE `ingredients_recipes` ENABLE KEYS */;

-- Dumping structure for table database.inventories
DROP TABLE IF EXISTS `inventories`;
CREATE TABLE IF NOT EXISTS `inventories` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `ingredient_id` int(10) NOT NULL COMMENT 'ingredient',
  `qty` int(10) NOT NULL COMMENT 'quantity',
  `unity_id` int(11) NOT NULL COMMENT 'unity for the ingredient',
  `update` datetime NOT NULL COMMENT 'date of the inventory update',
  UNIQUE KEY `id` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- Dumping data for table database.inventories: ~0 rows (approximately)
DELETE FROM `inventories`;
/*!40000 ALTER TABLE `inventories` DISABLE KEYS */;
/*!40000 ALTER TABLE `inventories` ENABLE KEYS */;

-- Dumping structure for table database.recipes
DROP TABLE IF EXISTS `recipes`;
CREATE TABLE IF NOT EXISTS `recipes` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `name` varchar(250) NOT NULL,
  `cooking` longtext NOT NULL,
  PRIMARY KEY (`id`),
  KEY `name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- Dumping data for table database.recipes: ~0 rows (approximately)
DELETE FROM `recipes`;
/*!40000 ALTER TABLE `recipes` DISABLE KEYS */;
/*!40000 ALTER TABLE `recipes` ENABLE KEYS */;

-- Dumping structure for table database.unities
DROP TABLE IF EXISTS `unities`;
CREATE TABLE IF NOT EXISTS `unities` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- Dumping data for table database.unities: ~0 rows (approximately)
DELETE FROM `unities`;
/*!40000 ALTER TABLE `unities` DISABLE KEYS */;
/*!40000 ALTER TABLE `unities` ENABLE KEYS */;
/*!40014 SET FOREIGN_KEY_CHECKS=1 */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T16:41:37.320

您将需要三个表：一个`recipes`表、一个`ingredients`表和一个`recipe_ingredients`将成分分配给配方的表。您还可以在此表中存储其他信息，例如数量。因此，例如，如果您有一份蔬菜汤食谱，您将有多个对应数量的蔬菜条目。然后，这些条目将通过外键链接到相关的配方和成分。

**编辑：**最简单的模式：

```
CREATE TABLE `ingredients` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(45) NOT NULL,
  PRIMARY KEY (`id`)
) TYPE=InnoDB;

CREATE TABLE `recipes` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(45) NOT NULL,
  PRIMARY KEY (`id`)
) TYPE=InnoDB;

CREATE TABLE `recipe_ingredients` (
  `recipe_id` int(10) unsigned NOT NULL,
  `ingredient_id` int(10) unsigned NOT NULL,
  `quantity` int(10) unsigned NOT NULL,
  KEY `recipe_id` (`recipe_id`),
  KEY `ingredient_id` (`ingredient_id`)
) TYPE=InnoDB;

ALTER TABLE `recipe_ingredients`
  ADD CONSTRAINT `recipe_ingredients_ibfk_2` FOREIGN KEY (`ingredient_id`) REFERENCES `ingredients` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `recipe_ingredients_ibfk_1` FOREIGN KEY (`recipe_id`) REFERENCES `recipes` (`id`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T17:05:42.970

单程。

```
Dish
Key ID Name
1   1  Snails in Marinara Sauce
2   2  Marinara Sauce
3   3  Glass of Water

Ingredient
Key DISHID Name
1   NULL   Snail
2   NULL   Tomato
3   NULL   Onion
4   NULL   Evian
5   2      Marinara Sauce

Recipe
DishID IngredientKey Qty UOM
1      1             6   Each
1      5             3   TblSpoon
2      2             2   Each
2      3             1   Each
3      4             275 Millilitres 
```

因此，如果一种配料是一道菜，它就有一个食谱。

在 OP 提出一个问题后进行了修改，指出了我的潜在答案中的一个小缺陷。

# r - 类尝试在ggplot中返回错误

> ID：13882739
> 
> 赞同：2
> 
> 时间：2012-12-14T16:36:29.617
> 
> 标签：r, ggplot2

我喜欢在我的数据集上运行 method="loess"，如果出现错误，我喜欢尝试 lm 方法。下面是我执行此操作的代码，但它仍然失败，有什么想法吗？

df

```
Date  Duration  Athlete
1/1/2012  60    A
1/2/2012  30    A
1/3/2012  10    B
1/1/2012  5     C
1/2/2012  5     C
1/4/2012  4     C

ggplot(df, aes(Date, Duration, group=Athlete)) + geom_point(position="jitter", size=0.5) +theme_solarized(light = FALSE) +  geom_smooth(method=ifelse(class(try(loess(Duration~Date, df)))=="try-error", "lm","loess"), se=T) 
```

我收到此错误：

```
Error in simpleLoess(y, x, w, span, degree, parametric, drop.square, normalize,  :
  NA/NaN/Inf in foreign function call (arg 2)
In addition: Warning message:
In simpleLoess(y, x, w, span, degree, parametric, drop.square, normalize,  :
  NAs introduced by coercion
Error in function (el, elname)  : 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T17:00:06.463

我认为最好知道您将哪种平滑方法传递给 ggplot2 统计引擎。

例如：

```
mym <- "loess"
tryCatch(loess(Duration~Date, dat), 
         error = function(e) mym <<- "lm") 
```

然后

```
ggplot(dat, aes(Date, Duration, group=Athlete)) + 
  geom_point(position="jitter", size=0.5) + 
  geom_smooth(method=mym, se=T) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T17:17:35.850

您真的不应该尝试在**ggplot2**中执行此操作。`geom_smooth`并非旨在替代实际模型拟合工具。它是用于快速和肮脏可视化的探索性工具。

相反，在 ggplot 之外拟合模型，然后将拟合值添加到数据框中，然后您可以将其传递给 ggplot。

您的示例数据太小而无法真正产生合理的拟合值，因此这里有一个草图，说明您可能如何解决这个问题：

```
library(plyr)
dat <- read.table(text = "Date  Duration  Athlete
1/1/2012  60    A
1/2/2012  30    A
1/3/2012  10    B
1/1/2012  6     C
1/2/2012  5     C
1/4/2012  4     C
1/5/2012  3     C
1/6/2012  2.5   C",header = TRUE,sep = "")

dat$Date <- as.Date(dat$Date)
dat$Date1 <- as.integer(dat$Date)
foo <- function(x){
    m <- try(loess(Duration~Date1,data = x),silent = TRUE)
    if (inherits(m,"try-error")){
        m <- lm(Duration~Date,data = x)
    }
    return(m)
}

dlply(dat,.(Athlete),foo) 
```

`dlply`您可能不想使用, 而不是`ddply`简单地返回拟合模型，而是想要添加一个`x`带有拟合值的列，然后返回修改后的`x`.

`loess`当该方法不起作用时，您可能仍会收到打印出的警告消息。

# php - 如何在php中禁用会话

> ID：13882744
> 
> 赞同：2
> 
> 时间：2012-12-14T16:36:52.173
> 
> 标签：php, session

从[手册](http://us3.php.net/manual/en/function.session-status.php)中，可能的状态之一是[PHP_SESSION_DISABLED](http://php.net/manual/en/session.constants.php#constant.php-session-disabled)。

如何禁用 PHP 中的会话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:39:17.373

从[手册](http://php.net/manual/en/session.installation.php)：

> PHP 中默认启用会话支持。如果您不想使用会话支持构建 PHP，则应指定 **--disable-session**选项进行配置。

# mongodb - 在 Mongodb 中将一个集合转换为另一个集合

> ID：13882751
> 
> 赞同：0
> 
> 时间：2012-12-14T16:37:16.777
> 
> 标签：mongodb

假设我们有一个原始集合（称为源），其中包含三个这样的文档

```
{ "_id" :ObjectId("54"), "f1" : "Josh", "f2" : 12 }
{ "_id" :ObjectId("53"), "f1" : "Ray", "f3" : 1971 }
{ "_id" :ObjectId("56"), "f1" : "Jim", "f2" : 17, "f3" : 5, "f4" : "Spri", "f5" :"hg" } 
```

现在我想创建一个新的空集合（称为 dest），文档数量相同，但格式如下

```
{ "_id" : ObjectId("501"), "f1" : "", "f2" :"", "f3"=""  }
{ "_id" : ObjectId("520"), "f1" : "", "f2" :"", "f3"=""  }
{ "_id" : ObjectId("534"), "f1" : "", "f2" :"", "f3"=""  } 
```

如何从源集合更新新的 dest 集合？我需要找到每个记录/文档的匹配字段并仅更新这些字段。我是否必须使用 db.users.find().forEach 逐条记录？有什么诀窍吗？

# python - 谷歌应用引擎计算内部还是外部交易？

> ID：13882752
> 
> 赞同：0
> 
> 时间：2012-12-14T16:37:26.870
> 
> 标签：python, google-app-engine, transactions

假设我想创建 2 个**新**对象。我想在事务中执行此操作，因为我想确保两者都存在或都不存在。

但我也需要一个大计算，所以我的问题是哪里最适合进行计算。在交易范围内？还是外面？（a1的key与计算无关，不需要先保存）

```
@db.transactional()
def _register(self):
 a1.put()
 result = big_calculation_like_hashing(a1)
 a2.prop = result
 a2.put() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:47:08.063

在交易之外进行大计算是个好主意。

```
@db.transactional()
def _register(self, a1, a2)
        a1.put()
        a2.put()

a2.prop = big_calculation_like_hashing(a1)
self._register(a1,a2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:41:03.530

一如既往，这取决于。由于计算依赖于`a2`完成，因此最好在`a2`创建对象之后在事务之外执行。当然，除非这些都是以某种方式共享的对象，如果是这种情况，您将需要在事务的上下文中执行此操作以防止数据损坏。

# magento - 要观察的 Magento 事件名称

> ID：13882754
> 
> 赞同：1
> 
> 时间：2012-12-14T16:37:38.443
> 
> 标签：magento, magento-1.6

我需要向 Magento (1.6.2) 添加一些代码，以便在订单状态变为 Complete 时执行。在我们的系统中，当订单为“已发货”时会发生这种情况 - 即单击“发货”按钮，并保存发货信息。

我已经搜寻（显然在错误的地方）试图找到该事件将被调用，以便我可以添加一个观察者来观察它的触发，然后运行我的代码。

谁能告诉我这个事件的名称是什么（如果它作为可观察事件存在）？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:38:22.883

我也发现[事件搜索](https://stackoverflow.com/q/5279938/471559)有点像一门黑暗的艺术。在这种情况下，我会尝试`sales_order_save_before`然后签入这样的处理程序：

```
function onSalesOrderSaveBefore(Varien_Event_Observer $observer)
{
    $order = $observer->getOrder();
    if (($order->getData('status') == 'complete')
     && ($order->getOrigData('status') != 'complete')) {
        // then order has just been completed
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:36:40.187

一种可能的解决方案是创建一个覆盖此控制器的自定义模块

> /app/code/core/Mage/Adminhtml/controllers/Sales/Order/ShipmentController.php

然后添加您的自定义代码或创建您自己的自定义事件`public function saveAction()`

# database - Grails 数据库迁移插件 - Java 堆空间

> ID：13882761
> 
> 赞同：0
> 
> 时间：2012-12-14T16:38:18.710
> 
> 标签：database, grails, heap-memory

我正在运行 grails 1.3.7 并使用 grails 数据库迁移插件版本 database-migration-1.0

我遇到的问题是我有一个迁移更改集。那就是将 blob 从表中拉出并将它们写入磁盘。在运行此迁移时，虽然我的堆空间用完了。我在想我需要刷新和清除会话以释放一些空间，但是我很难从迁移中访问会话。顺便说一句，迁移的原因是我们不再将文件存储在 oracle 中，而是将它们放在磁盘上

我试过了

```
SessionFactoryUtils.getSession(sessionFactory, true) 
```

我也试过

```
SecurityRequestHolder.request.getSession(false)   //request in null -> not surprising 
```

* * *

```
changeSet(author: "userone", id: "saveFilesToDisk-1") {
    grailsChange{
        change{
            def fileIds = sql.rows("""SELECT id FROM erp_file""")
            for (row in fileIds) {
                def erpFile = ErpFile.get(row.id)
                erpFile.writeToDisk()
                session.flush()
                session.clear()
                propertyInstanceMap.get().clear()
            }
            ConfigurationHolder.config.erp.ErpFile.persistenceMode = previousMode
        }
    }
} 
```

**任何帮助将不胜感激。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:56:10.467

应用程序上下文将在您的迁移中自动提供为`ctx`. 您可以像这样获得会话：

```
def session = ctx.sessionFactory.currentSession 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:13:20.177

要访问会话，您可以使用 withSession 闭包，如下所示：

```
Book.withSession { session ->
    session.clear()
} 
```

但是，这可能不是您的应用程序堆空间不足的原因。如果数据量很大，那么

```
 def fileIds = sql.rows("""SELECT id FROM erp_file""")
    for (row in fileIds) {
        ..........
    } 
```

会占用你的空间。尝试使用分页处理数据。不要一次加载所有数据。

# c++ - 使用gfortran链接c ++时std :: basic_string的未定义符号？

> ID：13882765
> 
> 赞同：1
> 
> 时间：2012-12-14T16:38:27.217
> 
> 标签：c++, fortran, gfortran

我正在尝试将 C++ 文件与我的 Fortran 90 程序链接，但在使用 gfortran 时遇到链接错误。

我的 Fortran 文件是用：编译的
`gfortran -c -o obj/file.o file.f90 -O0 -g3 -ffree-line-length-none -fcheck-array-temporaries -fbounds-check`，我的 C++ 文件是用`g++-4.7 -c -o obj/cppfile.o cppfile.cpp -O0 -g3 -std=c++11`

然后，所有这些都用 gfortran 链接在一起：
`gfortran -o program obj/file.o obj/cppfile.o -O0 -g3 -ffree-line-length-none -fcheck-array-temporaries -fbounds-check -lm -llapack -lc -lgfortran -lgcc -lstdc++`

执行此操作时，我收到以下链接错误：

> 架构 x86_64 的未定义符号：
> “std::basic_string, std::allocator::basic_string(std::basic_string, std::allocator >&&)”，引用自：
> 
> > cppfile.o 中的 std::basic_string, std::allocator > std::operator+, std::allocator >(char const*, std::basic_string, std::allocator >&&)
> > std::basic_string, std::allocator > std::operator+, std::allocator >(std::basic_string, std::allocator >&&, char const*) in cppfile.o
> > std::basic_string, std::allocator > std::operator+, std:: cppfile.o 中的分配器 >(std::basic_string, std::allocator >&&, std::basic_string, std::allocator >&&)
> > std::basic_string, std::allocator > std::operator+, std::allocator >(std::basic_string, std::allocator >&&, std::basic_string, std::allocator > const&) 在 cppfile.o
> > component::component(component&&) 在 cppfile.o "std::basic_string, std::分配器 >::operator=(std::basic_string, std::allocator >&&)"，引用自：
> > *函数*在 cppfile.o 中的
> > component::operator=(component&&) 在 cppfile.o
> 
> ld：未找到架构 x86_64
> collect2 的符号：错误：ld 返回 1 退出状态
> make：*** [程序] 错误 1

我的 C++ 文件如下所示：

```
#include <iostream>
#include <string>
#include <fstream>
#include <iomanip>
#include <math.h>
#include <stdio.h>
#include <vector>

using namespace std;

struct component
{
    string num;     // numerator of component
    string den;     // denominator of component
    int ind;        // index of variable
};

extern "C"{
void subroutine_ (int num, const int* array)
{
    ...
    return;
} 
```

关于为什么会发生这种情况的任何想法？我确保链接 -lstdc++ 库。这可能与我使用与字符串库相关的 C++11 标准有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:51:09.137

一种解决方案似乎是`-std=c++11`从 C++ 代码的编译中删除。有了它，将链接 C++ 代码与字符串向量（或包含字符串的结构）相结合会导致上述错误。

我将在 GCC Bugzilla 中提交一个错误，同时使用我的解决方案作为解决方法。

# javascript - 多维数组的返回索引

> ID：13882769
> 
> 赞同：0
> 
> 时间：2012-12-14T16:38:49.863
> 
> 标签：javascript

我只想搜索第一列`myarray`并返回索引：

示例搜索“s1”返回 0，搜索“s3”返回 1，依此类推

javascript

```
myarray = [
['s1', 's2'],
['s3', 's4'],
['s5', 's6']
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:13:21.313

感谢所有的帮助家伙...

解决方案

```
function searchCPL(what, find){
  for(var i= 0, L= what.length; i<L; i++){
    if(what[i][0]=== find) return i;
  }
    return '';
};

searchCPL(myarray, 'value'); 
```

# jquery - 使用选择器来定位空 div 以进行删除

> ID：13882772
> 
> 赞同：0
> 
> 时间：2012-12-14T16:38:55.620
> 
> 标签：jquery, css-selectors

如果 div 为空，我正在尝试删除它。我有多个具有相同类的 div，我想删除它，除非它有文本或图像。我希望它忽略空格。我正在使用这个：

```
 if($.trim($(".C1").html()) == "") {
  $(".C1").remove();
} 
```

然后我意识到我需要为要删除的每个 div 输入一个唯一的 id 或类，所以我发现这可行：

```
 if($.trim($(".C1").html()) == "") {
  $(".C1").remove();
}

    if($.trim($(".C2").html()) == "") {
  $(".C2").remove();
} 
```

等等

有没有办法在一个脚本中做到这一点？我试过这样做：.C1、.C2、.C3 等，但只有在所有 div 都为空时才有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:40:02.220

```
$(".C1").filter(':empty').remove() 
```

或者

```
$(".C2").filter(function() {
    return !this.innerHTML.trim();
}).remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:41:05.933

为此，您可以使用 jQuery 的[:empty](https://api.jquery.com/empty-selector/)选择器。

```
// Removes every "empty" element.
$(":empty").remove(); 
```

这是一个具体的例子。

```
$(function() {
  $(".foo, .bar, .baz")
    .filter(function(_, el) {
      return $(el).is(":empty");
    })
    .remove();

  console.log("Empty <div /> has been removed:", $(".foo").length == 0);
});
```

```
<div class="foo"></div>
<div class="bar">Not empty</div>
<div class="baz">
  <img src="/favicon.ico" />
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T16:41:22.127

```
$('.C1, .C2').filter(function(){
     return !$.trim(this.innerHTML)
}).remove() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T16:53:23.020

另一种选择是检查孩子的数量。

```
$(document).ready(function(){
    $('.C1').each(function(){
        if($(this).children().length == 0){
           $(this).remove();     
        }
    });
}); 
```

JSFiddle 链接：http: [//jsfiddle.net/7udv7/1/](http://jsfiddle.net/7udv7/1/)

# jquery - 获取 jQuery 拖放脚本以更新另一个列表

> ID：13882775
> 
> 赞同：1
> 
> 时间：2012-12-14T16:39:00.197
> 
> 标签：jquery, jquery-ui, drag-and-drop, draggable, droppable

在stackoverflow社区的帮助下，我几乎成功地编写了一个jQuery拖放“添加到收藏夹/从收藏夹中删除”网站。

在前端，出现了两个电影列表，一侧是用户收藏的电影，另一侧是不在用户收藏列表中的电影。您可以将标题拖到下拉框以从一个列表中添加/删除它们并将它们放入另一个列表中。这会在后台更新 MySQL 数据库，当标题被拖出列表时，它会根据需要从该列表中消失。

只有一件事仍然不起作用 - 将电影标题添加到它被拖入的列表的前端 - 这需要刷新页面以显示更新的结果。

我看到了问题 - 两个 jQuery 脚本不知道另一个在做什么 - 每个都可以毫无问题地从自己的列表中删除项目，但是如何告诉每个脚本添加到 OTHER 列表，我不知道.

我尝试使用 connectWith 但感到困惑....

HTML（电影列表）：

```
<div class="content_box2 content_box_drag2" onMouseOver="drag_two();">
    (PHP-generated list of all available movies)
</div>

<div class="content_box_drop content_holder_box">
    <p class="dropper">Drop movie title here to remove from favourites</p>
</div> 
```

HTML（收藏夹列表）：

```
<div class="content_box content_box_drag" onMouseOver="drag();">
    (PHP-generated list of favourite movies)
</div>

<div class="content_holder_box2 content_box_drop2">
    <p class="dropper2">Drop movie title here to add to favourites</p>
</div> 
```

从收藏夹中删除电影的脚本：

```
var user_id = "<?php Print($user_id); ?>";

function drag(){

    $( ".content_box_drag p" ).draggable({
        appendTo: "body",
        helper: "clone",
        revert: "invalid",
    });

    $( ".content_box_drop p" ).droppable({
        activeClass: "dropper_hover",
        hoverClass: "dropper_hover",
        accept: ":not(.ui-sortable-helper)",
        drop: function( event, ui ) {
        var parent = $(".dragelement:last"); // KEEP THIS!
        var movie_id = parent.attr('id');    // KEEP THIS!              
           $.ajax({
               url: "php-includes/delete_favs.inc.php",
               type: "GET",
               data: { movie_id: movie_id, user_id: user_id },
               success:function(data){
                   $('#'+movie_id).remove();
               }
           });
        }
    });
} 
```

将电影添加到收藏夹的几乎相同的脚本：

```
var user_id = "<?php Print($user_id); ?>";

function drag_two(){

    $( ".content_box_drag2 p" ).draggable({
        appendTo: "body",
        helper: "clone",
        revert: "invalid",
    });

    $( ".content_box_drop2 p" ).droppable({
        activeClass: "dropper_hover2",
        hoverClass: "dropper_hover2",
        accept: ":not(.ui-sortable-helper)",
        drop: function( event, ui ) {
        var parent = $(".dragelement:last"); // KEEP THIS!
        var movie_id = parent.attr('id');    // KEEP THIS!              
           $.ajax({
               url: "php-includes/add_favs.inc.php",
               type: "GET",
               data: { movie_id: movie_id, user_id: user_id },
               success:function(data){
                   $('#'+movie_id).remove();
               }
           });
        }
    });

} 
```

任何帮助再次非常感谢！

# ruby-on-rails - 强制延迟作业使用单独的数据库连接

> ID：13882777
> 
> 赞同：0
> 
> 时间：2012-12-14T16:39:07.603
> 
> 标签：ruby-on-rails, delayed-job

我的应用程序以这样一种方式设置，即我们使用不同的环境为每个子域使用不同的数据库连接。延迟作业执行您所期望的（我猜）并在将作业插入其延迟作业表时使用该请求的当前环境（以及数据库连接）。

问题是 DJ 无法处理来自所有这些不同表的作业，所以我试图强制 DJ 只使用一个数据库，特别是为它设置的数据库。我已经尝试过[**了，**](https://stackoverflow.com/questions/6479039/how-can-i-force-delayed-job-to-use-a-specific-db-connection)但它不起作用，我不知道下一步该尝试什么。

任何指示/建议将不胜感激，真的以我的智慧结束。

尝试的代码：

```
Delayed::Job.class_eval do
  establish_connection ActiveRecord::Base.configurations["delayed_job"]
end 
```

与数据库的连接是`before_filter`在`ApplicationController`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:37:28.073

ApplicationController 中用于建立每个域的连接的代码只会在每个请求的应用程序服务器中发生。

将 :domain 属性添加到您的 Job 类并在您排队作业时设置它。在 Job#perform 中，建立您的数据库连接。

# escaping - 在 Qt Creator 的代码片段中转义 $

> ID：13882784
> 
> 赞同：3
> 
> 时间：2012-12-14T16:39:32.703
> 
> 标签：escaping, qt-creator, code-snippets

在 Qt Creator 片段中，如何解决`$`被替换的符号？根据[此文档](http://doc.qt.digia.com/qtcreator/creator-completing-code.html)，变量通过将它们的名称括起来来引用，`$`如下所示：`$variable$`。但是，我想要做的是有一个许可证片段，其中也有 SVN Id 标签，例如：

```
/*
 * Copyright (C) 1831 Vasiliy Pupkin & Co <vasiliy.pupkin@county.province.earth>
 * Do not even look at this code.
 *
 * $Id$
 */ 
```

我试过了`$$Id$$`，`\$Id\$`但似乎没有任何效果。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-17T10:07:27.513

你必须写 `\\$Id\\$`。

我有同样的问题，在文档中找不到东西。所以我尝试了一些模式。双反斜杠是解决方案。

# android - 在 doInBackground 中的 AsyncTask 中更改 UI 线程的视图，CalledFromWrongThreadException 并不总是抛出

> ID：13882786
> 
> 赞同：2
> 
> 时间：2012-12-14T16:39:49.467
> 
> 标签：android, android-asynctask, android-view

**AsycnTask 中的以下代码：**

```
@Override
protected Boolean doInBackground(View... params) {

try{

    Drawable drawPhoto = DataDatero.ImageDownload(taskPhotoName);
    ((ImageView)params[0]).setImageDrawable(drawPhoto);
    ((TextView)params[1]).setText(taskItemListText);
    ((TextView)params[2]).setTextColor(taskColore);
    ((TextView)params[2]).setText(taskItemStockText);
    [...]
} 
```

抛出 CalledFromWrongThreadException ，描述：

> 只有创建视图层次结构的原始线程才能接触其视图

这已经在很多问题中讨论过：[例子](https://stackoverflow.com/questions/7937399/android-view-viewrootcalledfromwrongthreadexception-only-the-original-thread-t)，另一个[例子](https://stackoverflow.com/questions/13063408/no-error-only-the-original-thread-that-created-a-view-hierarchy-can-touch-its-v)；并且都得出相同的结论。

**但我不仅得到了例外..**

*我从 List 适配器中的getView*调用它，并且图像（params [0]）在视图中更新，同时为文本引发异常。此外，如果我只留下 textview updates ，则文本会更新并且不会引发异常。

如果我先更新 TextView 再更新 ImageView，则某些文本和图像会更新，而某些图像则不会更新（该 imageDownload 包括 2-3 秒的网络操作）

**为什么有的更新了，有的没更新？**

*注意：这仅在 sdk 4.0、v4 支持、api 16 仿真上进行了测试。我修复了它，我没有触及 doInBackground 中的视图第二个例子是类似的......如果 onCreate 没有完成，操作是否得到验证？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-21T12:01:45.153

我遇到了类似的问题并[在这里](https://stackoverflow.com/questions/29918912/modifying-views-in-asynctask-doinbackground-does-not-always-throw-exception)提出了一个问题（经过大量挖掘后自我回答）。

本质上归结为，与每个人的想法相反，*如果*这些视图尚未经过布局遍历，您*可以*修改 UI 元素。这与执行的主要流程（活动生命周期方法/回调）异步发生，因此如果有问题是在调用之前不久创建的，您*可以*访问它们（意思是，不会抛出异常，这当然仍然是非常糟糕的做法并且不可取）。因为发生在另一个线程上，所以布局遍历（在 UI 线程上运行）可能会在您的`AsyncTask` `execute()` *`View``execute()`*`execute()``execute()`正在运行，这就解释了为什么只有一些视图可以被修改，而其他的会抛出异常。它还解释了为什么“只保留 textview 更新”（并且可能会删除`ImageView`更新）导致这些更新也“神奇地”工作。由于这是一个与时间相关的问题，它取决于许多因素，其中包括`Drawable drawPhoto = DataDatero.ImageDownload(taskPhotoName);`运行需要多长时间。**

 **PS：我意识到这是一个迟到的答案，但我认为这对于首先找到这个答案的人很有用，没有多少帖子涉及这样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:42:23.127

例外很明显。您不能`UI`从不同于`UI Thread`. `doInBackground`在不同的线程中执行代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T16:43:13.440

为什么不能将更新 UI 的信息传递给`onPostExecute`方法？这是 UI 打算更新的地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T16:43:40.283

当您运行`execute`任务的方法时，该`doInBackground`方法在后台线程中执行。

并且您不允许从后台线程修改 UI。

所以，不要在`doInBackground`方法中修改 UI。

你应该在`onPostExecute`方法中做这些 UI 的东西，保证在 UI 线程中执行。**

# sql - MS-Access SQL 的条件过滤困难

> ID：13882788
> 
> 赞同：2
> 
> 时间：2012-12-14T16:39:57.930
> 
> 标签：sql, ms-access

我在 MS-Access 中有一个查询，我试图根据条件提取一些值，然后对结果求和。

```
SELECT SchedulingLog.UserID, SchedulingLog.Category, Sum(SchedulingLog.Value) AS Gain, Sum(SchedulingLog.Value) AS Used, [Gain]+[Used] AS [Left]
FROM SchedulingLog
GROUP BY SchedulingLog.UserID, SchedulingLog.Category, [Gain]+[Used]
HAVING ((
(SchedulingLog.Category) Like "DH*" Or 
(SchedulingLog.Category) Like "Com*") AND 
("Where[CatDetai]" Like "Gain*") AND 
("Where[CatDetai]" Like "Used*")
); 
```

有了这些数据`SchedulingLog`...

```
Userid LogDate EventDate Category CatDetail Value
abc123  1-1-11    7-2-11 DH       DH Used      -1
abc123  1-1-11    7-4-11 DH       DH Gain       1 
```

...我希望我的查询给我这个结果集：

```
Userid Category Gain Used Left
abc123 DH          1   -1    0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T17:12:28.650

以下 SQL 根据您在 Access 2007 中的示例数据进行测试，返回您所要求的内容。

```
SELECT
    Userid,
    Category,
    Sum(IIf(CatDetail ALike '%Gain', [Value], 0)) AS Gain,
    Sum(IIf(CatDetail ALike '%Used', [Value], 0)) AS Used,
    [Gain] + [Used] AS [Left]
FROM SchedulingLog
GROUP BY
    Userid,
    Category 
```

但是，如果您实际上不需要查看 and 的单独值`Gain`，`Used`那么这样做会更简单：

```
SELECT
    Userid,
    Category,
    Sum([Value]) AS [Left]
FROM SchedulingLog
GROUP BY
    Userid,
    Category 
```

# google-chrome - Chrome 要求对我打开的每个页面进行代理身份验证，IE 没有

> ID：13882792
> 
> 赞同：12
> 
> 时间：2012-12-14T16:40:29.117
> 
> 标签：google-chrome, internet-explorer, authentication, proxy, proxy-authentication

Chrome 曾经正常运行，但突然间它开始在我打开的每个页面上询问我的代理的用户名和密码。输入它们后，我会看到页面，但是每当我打开另一个链接时，我都需要再次输入它们。

Chrome（最新版本）在我大学的代理后面，其地址在 Win7“局域网设置”中配置。IE 工作正常。我重新启动了 Chrome，但它没有帮助。

会是什么呢？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-22T17:54:40.410

前往设置。

向下滚动到“ **+ 显示高级设置**”并单击它。

向下滚动直到看到“**网络**”，然后单击“**更改代理设置...** ”

到达那里后，您应该会看到一个类似于 IE 设置中弹出的对话框，然后您将单击“**连接**”选项卡。

在该选项卡中，您会在右下角附近看到“ **LAN 设置**”，单击它。

加载后，在底部，如果选中“**代理服务器**”框，请*取消选中*它并查看是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-23T14:04:25.530

如果您正在处理 VPN 并且需要打开和关闭代理，那么您可以尝试一些**chrome 扩展**来自动设置用户名和密码。

例如，**“proxy auto auth”**或**“proxy helper”**。

# java - 通知其他活动偏好已更改

> ID：13882793
> 
> 赞同：4
> 
> 时间：2012-12-14T16:40:33.203
> 
> 标签：java, android

我试图让主要活动通知 PreferenceActivity 中的首选项发生变化，但是当我更改首选项时 onSharedPreferenceChanged 没有触发。

```
 SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    prefs.registerOnSharedPreferenceChangeListener(new OnSharedPreferenceChangeListener()
    {   
        public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key)
        {
            Log.d("Dict", "PreferenceChanged: " + key);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T18:00:30.380

我的猜测是（因为这是一个常见错误）您正在注册监听器`onResume()`并在`onPause()`. 这将阻止听众开火。如果发生这种情况，将代码更改为在期间注册`onCreate()`和在期间取消注册`onDestroy()`将解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:51:54.227

您可以使用此代码查找根据他的键更改的偏好当前值

公共类 SharedPreferences 实现 OnSharedPreferenceChangeListener {

```
@Override
public void onSharedPreferenceChanged(
        android.content.SharedPreferences sharedPreferences, String key) {
    // TODO Auto-generated method stub

    sharedPreferences.getBoolean(key, defValue);
    sharedPreferences.getFloat(key,defValue);
    sharedPreferences.getInt(key, defValue);
    sharedPreferences.getString(key, defValue);
    sharedPreferences.getString(key, defValue);
} 
```

}

# c# - VSTO 展望 2013

> ID：13882794
> 
> 赞同：1
> 
> 时间：2012-12-14T16:40:34.730
> 
> 标签：c#, outlook

我在新的 Outlook 2013 中遇到了一些关于 VSTO 的问题。过去我们有一些 VBS 脚本可以扩展所有 MAPI 文件夹（包括公共文件夹！）。现在这个脚本不再工作了，所以我尝试使用 VSTO 来处理这个基本简单的事情。出于测试原因，一个简单的安全示例如何选择文件夹：

```
Outlook.MAPIFolder folder = this.Application.Session.PickFolder();
this.Application.ActiveExplorer().CurrentFolder = folder ;
this.Application.ActiveExplorer().CurrentFolder.Display(); 
```

去尝试在 Outlook 2007 到 Outlook 2010 上运行此代码，它将运行。如果您在 Outlook 2013 上尝试此操作，您将看到一个空白收件箱。如果您尝试在其中选择某些内容，您将在后面看到消息，但您看不到它们。我很确定这是一个巨大的（烦人的）MS-Office 2013 错误——你们中的一些人同意吗？

# c# - XML Odata 与 Windows Phone 7 / 8 lib 或最佳实践

> ID：13882796
> 
> 赞同：0
> 
> 时间：2012-12-14T16:40:42.477
> 
> 标签：c#, xml, windows-phone-7, linq-to-xml, odata

我想使用这个 xml 文件：[http](http://skalae.fr/cdt_Evenement.xml) ://skalae.fr/cdt_Evenement.xml 但我不知道从哪里开始......

我怎样才能检索所有“花卉市场”或所有“市场”？

我怎样才能获得有关某个市场的一些信息？

请问有没有使用这种xml数据的库或样本（法国旅游局）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:16:26.253

最佳实践是使用 XML 序列化程序将 xml 反序列化为对象，或者使用 LINQ to Xml 扫描数据并使用您想要的。

将 XML 序列化程序与隔离存储 Xml 文件一起使用的示例：http: [//blogs.msdn.com/b/dawate/archive/2010/08/31/windows-phone-7-xml-isolatedstorage-example.aspx](http://blogs.msdn.com/b/dawate/archive/2010/08/31/windows-phone-7-xml-isolatedstorage-example.aspx)

[一般使用 LINQ to Xml 的示例： http](http://jesseliberty.com/2011/02/15/linq-to-xml/) ://jesseliberty.com/2011/02/15/linq-to-xml/

# iis-7 - 新创建的 IIS AppPool 标识的权限集

> ID：13882802
> 
> 赞同：7
> 
> 时间：2012-12-14T16:41:07.507
> 
> 标签：iis-7, permissions, wix

我需要为创建的 IIS 应用程序池设置日志文件夹的权限。设置权限的代码：

```
<CreateFolder Directory="SiteLogsFolder">
    <util:PermissionEx User="Everyone" Read="yes" GenericRead="yes"/>
    <util:PermissionEx User="[IisSiteUser]" GenericRead="yes" GenericWrite="yes" GenericExecute="yes" Delete="yes" DeleteChild="yes"/>
</CreateFolder>

<CustomAction Id="SetIis6SiteUser" Property="IisSiteUser" Value="NT AUTHORITY\NetworkService"/>
<CustomAction Id="SetIis7SiteUser" Property="IisSiteUser" Value="IIS AppPool\[SITE_APP_POOL]"/>

<InstallExecuteSequence>
  <Custom Action="SetIis7SiteUser" Before="InstallInitialize">IISMAJORVERSION>="#7"</Custom>
  <Custom Action="SetIis6SiteUser" Before="InstallInitialize">IISMAJORVERSION="#6"</Custom>
</InstallExecuteSequence> 
```

这适用于 Windows Server 2003 上的 IIS 6，但适用于 Windows Server 2008 上的 IIS 7.5 失败。我收到错误消息：

```
ExecSecureObjects:  Error 0x80070534: failed to get sid for account: IIS AppPool\MyAppPool 
```

**调查详情：**

*   我也尝试了“IIS APPPOOL”域 - 结果相同。
*   还尝试设置 PermissionEx 元素的 Domain 和 User 属性，而不是将它们合并到 User 属性中。同样的错误。
*   在 PermissionEx 中使用活动目录帐户可以正常工作。设置后，活动目录帐户也可以与 IIS 站点池一起正常工作。
*   如果我尝试为另一个 AppPool 设置权限（不是由我的安装程序创建的，例如 IIS AppPool\DefaultAppPool），再次一切正常。仅当我为安装程序创建的 AppPool 设置权限时才会出现此问题。
*   我检查了 ConfigureIIs、SchedSecureObjects 和 ExecSecureObjects 的顺序，并试图强制 ConfigureIIs 在其他两个之前执行（[在这个线程](https://stackoverflow.com/questions/7241272/how-to-specify-the-apppool-identity-in-a-wix-permission-element)中推荐）。不幸的是，这也没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-04-25T15:06:31.920

当我将 WIX 项目构建为 x86 时，我遇到了这个问题。我通过在 ConfigureIIs 之前安排 SchedSecureObjects 和 ExecSecureObjects 解决了这个问题。

```
<Custom Action="SchedSecureObjects" After="ConfigureIIs" />
<Custom Action="ExecSecureObjects" After="ConfigureIIs" /> 
```

当我开始将项目构建为 x64 时，问题再次出现。这次我还必须在 ConfigureIIs 之前安排 64 位操作。

```
<Custom Action="SchedSecureObjects_x64" After="ConfigureIIs" />
<Custom Action="ExecSecureObjects_64" After="ConfigureIIs" />
<Custom Action="SchedSecureObjects" After="ConfigureIIs" />
<Custom Action="ExecSecureObjects" After="ConfigureIIs" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-27T06:18:32.497

在 Server 2012 上进行测试，我确认在帐户可用之前可能会有延迟。使用以下脚本，我在大约 30 次尝试中的 3 次中重现失败。似乎我们需要在创建应用程序池和查找 SID 之间进行延迟。在我的测试中，它从来没有超过 1 秒。

```
param ($id)
if (!$id) {write-host "specify an id"; return}
c:\windows\system32\inetsrv\appcmd add apppool /name:$id /managedRuntimeVersion:"v4.0" /managedPipelineMode:"Integrated"
$objUser = New-Object System.Security.Principal.NTAccount("IIS APPPOOL\$id")
$sid=""
while (!$sid)
{
  $sid = $objUser.Translate([System.Security.Principal.SecurityIdentifier])
  if (!$sid) {write-host "$id not found"} else {$sid}
  sleep 1
} 
```

# gimp - GIMP Python-fu 嵌套图层组

> ID：13882808
> 
> 赞同：5
> 
> 时间：2012-12-14T16:41:19.707
> 
> 标签：gimp, python-fu

我似乎在 python-fu 界面的任何地方都找不到将组层添加到另一个组层的任何方法。

我也尝试在 Gimp.Layer 对象上找到方法，但没有运气。

如何使用 python-fu 将图层组添加到另一个图层组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T11:07:58.313

对 Python-fu 上的图层组的支持是在 2.8 版本之前的最后几分钟添加的，并且相当不完整。

因此，在 GIMP 2.8 中创建适当图层组的唯一方法是使用 pdb 调用：

```
group = pdb.gimp_layer_group_new(img)
group.name = "my group" 
```

（在 gimp 2.8 上使用 img.GroupLayer 调用是错误的 - 应该是未来的方式）

拥有组后，您可以使用

```
pdb.gimp_image_insert_layer(<img>, <layer>, <parent>, <position>) 
```

像：

```
>>> img = gimp.Image(640, 480, RGB)
>>> pdb.gimp_display_new(img)
<display>
>>> parent_group = pdb.gimp_layer_group_new(img)
>>> child_group_1 = pdb.gimp_layer_group_new(img)
>>> child_group_2 = pdb.gimp_layer_group_new(img)
>>> grand_child_group = pdb.gimp_layer_group_new(img)
>>> img.add_layer(parent_group, 0)
>>> pdb.gimp_image_insert_layer(img, child_group_1, parent_group,0)
>>> pdb.gimp_image_insert_layer(img, child_group_2, parent_group,1)
>>> pdb.gimp_image_insert_layer(img, grand_child_group, child_group_1,0)
>>> l1 = gimp.Layer(img, "test", 320,240)
>>> pdb.gimp_image_insert_layer(img,l1, grand_child_group,0) 
```

因此，确实存在这种极端的 API 不对称性，您可以通过父级上的“add_layer”方法将图层和组添加到图像，但必须将其中任何一个添加到图层组，您必须使用 pdb.gimp_image_insert_layer称呼。

**更新** （2015 年 2 月）- gimp.GroupLayer() 的错误已在 GIMP 的 git 中修复，它将从 GIMP 2.8.16 开始正常工作。现在添加一个新的组层所要做的就是：

```
>>> g = gimp.GroupLayer(img)
>>> pdb.gimp_image_insert_layer(img, g, None, 0) 
```

# configuration - 如何为多个 HostHeaders 配置 Webapi Selfhosted

> ID：13882811
> 
> 赞同：3
> 
> 时间：2012-12-14T16:41:24.183
> 
> 标签：configuration, asp.net-web-api, hostheaders

我如何让我的 asp.net mvc4 web api 响应多个主机头名称，例如当我们添加多个绑定时做 iis 网站。

有谁知道我该怎么做？或者是否可能？

我的默认应用程序（仍然是命令行）如下所示：

```
 static void Main(string[] args)
    {
        _config = new HttpSelfHostConfiguration("http://localhost:9090");

        _config.Routes.MapHttpRoute(
            "API Default", "{controller}/{id}",
            new { id = RouteParameter.Optional });

        using (HttpSelfHostServer server = new HttpSelfHostServer(_config))
        {
            server.OpenAsync().Wait();
            Console.WriteLine("Press Enter to quit.");
            Console.ReadLine();
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T11:33:35.080

您可以尝试将路由配置为具有自定义约束以匹配主机标头（在下面的示例中，仅当主机标头等于 myheader.com 时，路由才会匹配）：

```
_config.Routes.MapHttpRoute(
        "API Default", "{controller}/{id}",
        new { id = RouteParameter.Optional },
        new { headerMatch = new HostHeaderConstraint("myheader.com")}); 
```

约束代码将类似于：

```
public class HostHeaderConstraint : IRouteConstraint
{
    private readonly string _header;

    public HostHeaderContraint(string header)
    {
         _header = header;
    }

    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        var hostHeader = httpContext.Request.ServerVariables["HTTP_HOST"];
        return hostHeader.Equals(_header, StringComparison.CurrentCultureIgnoreCase);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:29:42.710

@Mark Jones 答案适用于像您的示例这样的自托管解决方案，但如果您最终使用 IIS，您只需要添加多个包含所需的所有主机头的绑定。无需更改路线。

# joomla - Joomla 中的原始输出

> ID：13882813
> 
> 赞同：-2
> 
> 时间：2012-12-14T16:41:29.083
> 
> 标签：joomla

嗨，我正在从我的 Joomla 组件中的视图进行 jQuery ajax 调用。并且需要原始输出。

我试图搜索 Joomla 文档，但找不到任何教程或文档如何使用和实现原始输出。有人有链接或者可以告诉我如何使用 joomla 2.5。

真诚的莫顿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T09:53:11.633

这就是我通过 ajax 为 id 为“formdata”的 html 表单请求数据的方式。我序列化表单中的数据，并通过 ajax 将其提交到原始视图，然后将原始视图的内容显示为 id 为“myformoutput”的 div 中的纯文本

```
<script type="text/javascript">
function formupdate()
{
    $.ajax({
        type: "POST",
        url: "index.php?option=com_mycomponent&view=outputview&format=raw",
        data: $('#formdata').serialize(),
        cache: false,
        success: function(html) {
        $('#myformoutput').html(html);
        }

      });   
}
</script> 
```

原始视图来自组件 com_mycomponent，视图名称为“outputview”。

'outputview' 有文件 view.raw.php 而不是 view.html.php。它包含：

类 mycomponentViewoutputview 扩展 JView {

```
function display($tpl = null) 
    {
         echo 'this is raw text';
    } 
```

}

# php - mysql select where 返回不完全匹配

> ID：13882816
> 
> 赞同：1
> 
> 时间：2012-12-14T16:41:36.773
> 
> 标签：php, mysql, codeigniter

`SELECT`在使用简单子句的表上执行 a 时，我看到了奇怪的行为，`WHERE`返回的记录不完全匹配。

我的表有一列`id int(11)`作为主键。例如，要查找 id 为 5350 的记录，以下 2 个查询均返回 id 为 5350 的记录。

```
SELECT * FROM mytable WHERE id="5350"
SELECT * FROM mytable WHERE id="5350abcd" 
```

我的一个想法是删除 5350 附近的“”，但我得到了相同的结果。在codeigniter中，我试过这个：

```
$where = "id=$my_id";
$this->db->where($where); 
```

为什么会发生这种情况，我该如何解决，以便不准确的 id 找不到记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:44:21.907

在第二个查询中，ID 值不是整数。您需要在运行查询之前确保该值是整数，否则它将将该值强制转换为整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:45:06.387

它将它解析为一个数字，因为该字段是 Int。如果你只说 ="abcd" 它会解析为零。

哦，你不需要 int 值的引号

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T16:50:03.763

我的猜测是它会解析出这些字母，因为它是 int 类型的。它忽略了所有 alpha 的东西。因为它具有相同的 ID 并添加了数字，所以它解析为字母之前的数字。

```
5350 <-- INT
5350abcd <--- 'abcd' gets parsed out because it's not of INT type. 
You end up with 5350 without the abcd at the end. 
```

如果您的字段是数据类型 varchar 它会解析所有的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T16:47:44.533

试试这个：

```
$where = array('id' => $my_id);
$this->db->where($where); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T16:47:44.987

```
$where = "id=".((string)(int)$my_id === $my_id ? $my_id : 0);
$this->db->where($where); 
```

但是这个解决方案仍然很丑，因为你什么都不做查询。您应该`$my_id`在查询之前检查是否正确。

# linq - How do I build a repository method that builds an Expression using a passed in parameter?

> ID：13882820
> 
> 赞同：1
> 
> 时间：2012-12-14T16:41:52.937
> 
> 标签：linq, entity-framework, expression-trees

I have a repository where several methods are using the same piece of logic within the predicate.

```
public IList<Loan> GetLoansByCommitmentID(int commitmentID)
{

    var query = this.context.Loans.Where(l => l.CommitmentLoan != null &&
                                         l.CommitmentLoan.CommitmentID == commitmentID && 
                                         (l.LoanStatusTypes == null || (l.LoanStatusTypes.Description != "Invalid")));

    return query.ToList();
} 
```

In the code above, it's the last parenthesized subexpression:

```
(l.loanStatusTypes == null || (l.LoanStatusTypes.Description != "Invalid")) 
```

I'd like to move this piece into a private method of the repository so that it takes a Loan, in this case, and evaluates to a boolean. If I move this logic into a method, however, EF does not understand how to evaluate the method call. So after thinking on it a bit, I decided perhaps the right way to do this would be for the private repository method to take a Loan as a parameter then return an Expression to be used in the calling lambda expression, kind of like an Expression factory method i.e.:

```
public Expression IsLoanInvalid(Loan l); 
```

Does anyone know if this will overcome the inability of EF to understand the method call or should I instead be creating a custom ExpressionVisitor or is there another solution I should be trying?

Also, if the above proposed solution is possible and I go this route, how can I build an expression tree so that it uses the parameter passed in? I've successfully implemented the a method that builds the expression but have been unsuccessful thus far in passing the Loan parameter to the Expression I am building to be returned to the calling code. Thank you in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:35:51.537

You could create a variable to hold that piece of your where predicate.

```
public Expression<Func<Loan, bool>> LoanStatus = loan => loan.LoanStatusTypes == null || loan.LoanStatusTypes.Description != "Invalid"; 
```

And then add a second where off your IQueriable

```
public IList<Loan> GetLoansByCommitmentID(int commitmentID)
{    
    var query = this.context.Loans
         .Where(l => l.CommitmentLoan != null && l.CommitmentLoan.CommitmentID == commitmentID)
         .Where(LoanStatus);

    return query.ToList();
} 
```

# reporting-services - 如何将多行数据导出到多个 Word 文档中？

> ID：13882821
> 
> 赞同：0
> 
> 时间：2012-12-14T16:41:53.937
> 
> 标签：reporting-services, bids

我需要从一个表值函数调用中生成多个单独的 Word 文档。

该函数位于 SQL Server 2008R2 服务器上，我有 Visual Studio 2008 SP1、Visual Studio 2010 和商业智能设计工作室 (BIDS)。

到目前为止，我可以很容易地得到这个设置，在报表设计器的“预览”视图中向我展示一个漂亮的 Word 文档。

我需要的是为报表中的每一行数据生成一个单独的 Word 文档。这份文件大约有 5 页长，而且 - 像往常一样 - 我的时间非常紧迫。除非必须，否则我不想使用自定义 C#/VB 代码走 XML/XSLT 路线。有谁知道是否有一种相对简单的方法可以告诉 BIDS 中的报表设计器为数据集中的每一行数据生成不同的文档？如果是这样，您是否也知道我如何将命名约定应用于生成的文档？

非常感谢你！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:42:53.127

在带有报表管理器或 SharePoint 门户的完整 SSRS 中，这称为“数据驱动订阅”参考：http: [//msdn.microsoft.com/en-us/library/ms159150.aspx](http://msdn.microsoft.com/en-us/library/ms159150.aspx)

听起来您正在构建 ReportViewer 解决方案，在这种情况下，您几乎只能靠自己。您可能需要在报告中添加一个参数，以从每次执行中获取 5 页的“副本”，然后在代码中循环执行所需的执行。

祝你好运！麦克风

# android - 在可扩展列表视图中滚动时，Admob 视图被破坏

> ID：13882832
> 
> 赞同：1
> 
> 时间：2012-12-14T16:42:30.017
> 
> 标签：android, view, admob, expandablelistview, expandablelistadapter

我目前正在使用自定义 ExpandableListView 来显示我的应用程序或一些 AdMob 视图，当我滚动我的活动时，这些 AdMob 视图会不断被破坏和重新创建。

让我们举个例子。如果我的 expandableListView 的第 5 项是 AdView，则当我向下滚动列表时它会被破坏（因此该项目不再在屏幕上可见）并在我再次向上滚动时重新创建。我看到视图在 logcat 中被破坏了

```
12-14 17:28:43.383: D/webviewglue(23775): nativeDestroy view: 0x5149d4c8 
```

我希望在上下滚动时不要破坏和重新创建 Admob 视图。它使我的活动（顺便说一句带有片段的活动）滞后，并且在 ExpandableListView 中弹出的广告非常令人不安。我想知道它是来自我的 ExpandableListAdapter 实现还是来自 AdMob 视图本身。

你们知道这个问题的根源吗？

谢谢 ！

# plsql - 用于将一个记录值设置为另一个记录值的 Oracle PL/SQL 脚本优化

> ID：13882835
> 
> 赞同：0
> 
> 时间：2012-12-14T16:42:40.257
> 
> 标签：plsql, oracle11g

我对 SQL 脚本，尤其是 Oracle SQL 脚本相当陌生。我有一项任务需要获取表中的最新记录并将日期属性更改为以前的日期。

```
Cycle_ID    Extract_DATE
========    ============
119         26-NOV-12
120         03-DEC-12 
```

所以重申一下，我想将 Cycle_ID 120 的 Extract_DATE 设置为 Cycle_ID 119 的 Extract_DATE。

这是我用来完成此任务的脚本。

```
update <table_name>  
set extract_date = (SELECT EXTRACT_DATE 
                   from <table_name> 
                   group by cycle_counter_id, extract_date 
                   having cycle_counter_id=(select max(cycle_counter_id)-1 from <table_name>)) 
where cycle_counter_id = (SELECT CYCLE_COUNTER_ID
                          from <table_name> 
                           group by cycle_counter_id
                           having cycle_counter_id=(select max(cycle_counter_id) from <table_name>)); 
```

我的问题是，如何简化此脚本和/或使其更简洁或更高效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:35:05.157

我给你的解决方案有效，**如果**且仅当，列**cycle_id**是你的表的**主键**。

```
UPDATE pl_updatetest t1
SET t1.extract_date = 
(
    SELECT t2.extract_date
    FROM pl_updatetest t2
    WHERE t1.cycle_id = t2.cycle_id + 1
)
WHERE t1.cycle_id <> (SELECT MIN(cycle_id) FROM pl_updatetest); 
```

这是一个测试演员表，说明如何使用此查询来更改您的表。

```
DROP TABLE pl_updatetest;
CREATE TABLE pl_updatetest
(
    cycle_id        NUMBER      NOT NULL,
    extract_date    DATE        NOT NULL
);
ALTER TABLE pl_updatetest ADD CONSTRAINT PK_PL_UPDATETEST
    PRIMARY KEY(cycle_id);

INSERT ALL
    INTO pl_updatetest(cycle_id, extract_date) 
        VALUES(100, TO_DATE('01-JAN-2012', 'DD-MON-YYYY'))
    INTO pl_updatetest(cycle_id, extract_date) 
        VALUES(101, TO_DATE('02-JAN-2012', 'DD-MON-YYYY'))
    INTO pl_updatetest(cycle_id, extract_date) 
        VALUES(102, TO_DATE('03-JAN-2012', 'DD-MON-YYYY'))
    INTO pl_updatetest(cycle_id, extract_date) 
        VALUES(103, TO_DATE('04-JAN-2012', 'DD-MON-YYYY'))
    INTO pl_updatetest(cycle_id, extract_date) 
        VALUES(104, TO_DATE('05-JAN-2012', 'DD-MON-YYYY'))
    INTO pl_updatetest(cycle_id, extract_date) 
        VALUES(105, TO_DATE('06-JAN-2012', 'DD-MON-YYYY'))
SELECT * FROM DUAL;

Table dropped.

Table created.

Table altered.

6 rows created.

SQL> SELECT * FROM pl_updatetest;

  CYCLE_ID EXTRACT_D
---------- ---------
   100     01-JAN-12
   101     02-JAN-12
   102     03-JAN-12
   103     04-JAN-12
   104     05-JAN-12
   105     06-JAN-12

6 rows selected.

SQL> 

UPDATE pl_updatetest t1
SET t1.extract_date = 
(
    SELECT t2.extract_date
    FROM pl_updatetest t2
    WHERE t1.cycle_id = t2.cycle_id + 1
)
WHERE t1.cycle_id <> (SELECT MIN(cycle_id) FROM pl_updatetest);

5 rows updated.

SQL> 
SQL>
SQL> SELECT * FROM pl_updatetest;
CYCLE_ID    EXTRACT_D
---------- -----------
 100       01-JAN-12
 101       01-JAN-12
 102       02-JAN-12
 103       03-JAN-12
 104       04-JAN-12
 105       05-JAN-12

 6 rows selected.

 SQL> 
```

问候

达里约什

# c#-4.0 - 遇到位于 Linux 机器上的 SOLR 时出现找不到文件错误

> ID：13882838
> 
> 赞同：1
> 
> 时间：2012-12-14T16:43:01.863
> 
> 标签：c#-4.0

我正在使用以下 URL 从内容文件服务器流式传输 html 文件以在 SOLR 中对其进行索引，我的 SOLR 位于 Linux 框中：

> 服务器名称：8080/htmlsolr/update/extract?stream.file=//contenfileserverpath/Article/test.html&literal.id=test.html|//contenfileserverpath/Article/test.html&commit=true

每当我点击 URL 时，我都会收到以下错误：

> HTTP 状态 500 - //contenfileserverpath/Article/test.html（没有这样的文件或目录）java.io.FileNotFoundException：//contenfileserverpath/Article/test.html（没有这样的文件或目录）在 java.io.FileInputStream.open (Native Method) at java.io.FileInputStream.(Unknown Source) at org.apache.solr.common.util.ContentStreamBase$FileStream.getStream(ContentStreamBase.java:108) at org.apache.solr.handler.extraction.ExtractingDocumentLoader .load(ExtractingDocumentLoader.java:182) 在 org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(ContentStreamHandlerBase.java:58) 在 org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129) 在 org. apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.handleRequest(RequestHandlers.java:244) 在 org.apache.solr.core.SolrCore.execute(SolrCore.java:1376) 在 org.apache.solr。servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:365) at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:260) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) 在 org.apache.catalina.core.StandardContextValve.invoke （StandardContextValve.java:191）在 org.apache.catalina.valves.org.apache.catalina.valves.org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127).ErrorReportValve.invoke(ErrorReportValve.java:102) 在 org.apache。 catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293) 在 org.apache。coyote.http11.Http11Processor.process(Http11Processor.java:859) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602) 在 org.apache.tomcat.util.net.JIoEndpoint$Worker。在 java.lang.Thread.run 运行（JioEndpoint.java:489）（未知来源）

即使文件在给定的位置，它也会抛出错误。

# javascript - 用jquery解析xml

> ID：13882841
> 
> 赞同：1
> 
> 时间：2012-12-14T16:43:23.920
> 
> 标签：javascript, jquery, xml

我有这个函数，我想用 jquery 解析 xml。

```
function xmlParser(xml) {

     var xmlTitle = xml.data;
     alert($(xmlTitle).find('title'));
} 
```

我想像这样提醒 xml 的标题，但它不起作用。这就是我所做的，这可以帮助您查看 xml 对象。

```
alert(xml); 
alert(xml.data); 
```

xml 警报：[对象对象。]

xml.data 警报：`<data><title>Hello</title><topic>World</topic></data>`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T16:45:30.247

那是一个带有标签的元素`title`，这意味着它是一个对象，并且警报不能显示对象，你应该使用 console.log 。要显示元素文本，您可以执行以下操作：

```
function xmlParser(xml) {
     var xmlTitle = xml.find('title');
     alert($(xmlTitle).text());
} 
```

[**小提琴**](http://jsfiddle.net/dwKLs/1/)

如果您使用 jQuery 方法获取 XML `$.ajax`，则应该已经对其进行了解析，否则一个好的做法是使用[**$.parseXML**](http://api.jquery.com/jQuery.parseXML/)解析 XML，以确保 jQuery 可以以通常的方式处理它。

```
function xmlParser(xml) {
     var xmlTitle = $.parseXML(xml.data);
     alert($(xmlTitle).find('title').text());
}

var xml = {}
    xml.data = '<data><title>Hello</title><topic>World</topic></data>';

xmlParser(xml)​ 
```

# javascript - Google Maps V3 只是一个 ajax 查询后的灰色框

> ID：13882845
> 
> 赞同：0
> 
> 时间：2012-12-14T16:43:43.933
> 
> 标签：javascript, html, google-maps, twitter-bootstrap

我最近才开始使用 html、javascript、webapps 等，我决定尝试编写自己的 Prey 独立网络服务器。

我在 UI 上使用 Twitter Bootstrap，在 javascript 上使用 jQuery。[**我的报告页面**](http://prey-geniass.dotcloud.com/devices/l6wyd/reports.xml)列出了所有报告，并允许用户选择一个在地图上查看。然后页面从服务器获取数据作为 JSON，一切正常。但是，当我调用地图时`map.setCenter(new google.maps.LatLng(data['lat'], data['lng']))`，地图只是变成灰色而不是移动到那个位置。

我已经在 chrome 和 firefox 中尝试过这个，我遇到了同样的问题。奇怪的是，chrome console-debugger-thing 和 firebug 都没有错误。我可以在“类似问题”下看到大约 10 个类似的问题；但是，这些解决方案（例如 CSS）都没有帮助。

这是网站（它是 dotCloud 上的沙箱，所以它可能会很慢）：[http ://prey-geniass.dotcloud.com/devices/l6wyd/reports.xml](http://prey-geniass.dotcloud.com/devices/l6wyd/reports.xml)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:03:51.020

所以我注意到您将地图对象存储为`window['map']`（有趣的是*每个人*似乎都这样做......当我不必深入研究源代码时使调试更容易:)）。

我尝试使用一组已知的坐标自己设置中心：

```
map.setCenter(new google.maps.LatLng('51.0453246', '-114.0581012')); 
```

这工作正常，所以实际的代码工作正常。我测试了一些情况下的值不正确......`null`并且`0`会把我放在海洋的某个地方，但`undefined`对于两者来说`lat`，`lng`都会把地图变成灰色。也许您传入的值不正确，最终变成`undefined`?

查看第二个`alert`，相关属性是`latitude`and `longitude`，尽管您似乎在传递`data['lat']`and `data['lng']`。会是这个原因吗？

这应该解决它：

```
//update map
marker = new google.maps.Marker({
    position: new google.maps.LatLng(data['latitude'], data['longitude']),
    title:"Last Known Position"
});
marker.setMap(map);
map.setCenter(new google.maps.LatLng(data['latitude'], data['longitude']))
// google.maps.event.trigger(map, 'resize'); 
```

请注意，我注释掉了您的“调整大小”触发器（我假设您可能添加了该触发器以解决此问题？我记得在这里向其他用户建议过 :)）。在您的情况下不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:28:41.730

好的，我刚刚发现了问题。它实际上是服务器端，我没有将响应标记为 JSON，因此 javascript 实际上正在接收一个字符串，我试图将它用作 JSON 对象。对于使用 Flask 的任何人，这里是执行此操作的代码： `return Response(json.dumps(report), mimetype='text/json')`.

现在我真的不知道哪个答案可以标记为正确的答案（两者在技术上都是正确的，因为有两个不同的问题）

# excel - 通过 OleDbDataAdapter 将 excel 数据导入数据表将方括号替换为圆括号

> ID：13882846
> 
> 赞同：1
> 
> 时间：2012-12-14T16:43:46.363
> 
> 标签：excel, datatable, square-bracket, oledbdataadapter

我正在使用此代码导入 excel (.xls) 数据，但列中的所有方括号都替换为圆括号。例如列 dm[kg]：

进口前：dm[kg]

进口后：dm(kg)

我会很感激任何帮助。

```
public static DataTable ImportWorkSheet(string excelFile, bool hasHeaderRow, bool allText, string tabName)
    {

        string connectionString = GetExcelConnectionString(excelFile, hasHeaderRow, allText);

        using (OleDbConnection connection = new OleDbConnection(connectionString))
        {

            connection.Open();

            if (Path.GetExtension(excelFile).Equals(".csv", StringComparison.OrdinalIgnoreCase))

                tabName = Path.GetFileName(excelFile);

            else

                tabName = EnsureTableName(connection, tabName);

            string selectString = string.Format("SELECT * FROM [{0}]", tabName);

            DataTable table = new DataTable(tabName);

            using (OleDbDataAdapter adapter = new OleDbDataAdapter(selectString, connection))
            {
                adapter.Fill(table);

            }

            return table;

        }

    }
private static string EnsureTableName(DbConnection connection, string tabName)
    {

        if (string.IsNullOrEmpty(tabName))
        {

            //use GetSchema to find the first sheet == table name

            DataTable worksheets = connection.GetSchema("Tables");

            foreach (DataRow row in worksheets.Rows)
            {

                //this can also return Excel named ranges

                tabName = (string)row["TABLE_NAME"];

                //so look for sheets (excel puts $ after the name and may single-quote the name)

                if (tabName.EndsWith("$") || tabName.EndsWith("$'"))

                    return tabName;

                //otherwise we'll fall through with whatever we find

            }

        }

        //they supplied a worksheet name; ensure always has $ suffix

        else if (!tabName.EndsWith("$"))

            tabName += "$";

        return tabName;

    }

    private static string GetExcelConnectionString(string filePath, bool hasHeaderRow, bool allText)
    {

        //http://www.connectionstrings.com/?carrier=excel

        string connectionString;

        string ext = Path.GetExtension(filePath);

        if (ext.Equals(".csv", StringComparison.OrdinalIgnoreCase))
        {

            //uses directory path, not file path

            //for format definition, write a schema.ini in the folder: http://msdn.microsoft.com/en-us/library/ms709353.aspx

            connectionString = string.Format(

                @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0}; Extended Properties=""text;FMT=Delimited;{1}{2}""",

                filePath.Remove(filePath.IndexOf(Path.GetFileName(filePath))),

                hasHeaderRow ? "HDR=YES;" : "HDR=NO;",

                allText ? "IMEX=1" : string.Empty);

        }

        else if (ext.Equals(".xlsx", StringComparison.OrdinalIgnoreCase))
        {

            //if this fails, install 2007 providers from http://www.microsoft.com/downloads/details.aspx?FamilyID=7554F536-8C28-4598-9B72-EF94E038C891&displaylang=en

            connectionString = string.Format(

                @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0}; Extended Properties=""Excel 12.0 Xml;{1}{2}""",

                filePath,

                hasHeaderRow ? "HDR=YES;" : "HDR=NO;",

                allText ? "IMEX=1" : string.Empty);

        }

        else //assume normal excel
        {

            connectionString = string.Format(

                @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0}; Extended Properties=""Excel 8.0;{1}{2}""",

                filePath,

                hasHeaderRow ? "HDR=YES;" : "HDR=NO;",

                allText ? "IMEX=1" : string.Empty);

        }

        return connectionString;

    } 
```

# java - 使用 Java API 读取 mime 文件名

> ID：13882849
> 
> 赞同：0
> 
> 时间：2012-12-14T16:43:56.157
> 
> 标签：java, mime

> **可能重复：**
> [使用 JavaMail 读取阿拉伯语附件](https://stackoverflow.com/questions/7783066/reading-arabic-attachments-using-javamail)

我有使用 Java API 从 mime 消息中提取文件名、正文、主题的代码。但如果文件名是中文字符，代码会将其读取为一些编码值

```
for (int i = 0; i < multipart.getCount(); i++) {

    BodyPart bodyPart = multipart.getBodyPart(i);  
    **String fileName   = bodyPart.getFileName();
} 
```

我在哪里设置任何类型的字符集以便准确读取？

# javascript - HTML 表单目标在 Chrome 20+ 中不起作用

> ID：13882857
> 
> 赞同：0
> 
> 时间：2012-12-14T16:44:31.730
> 
> 标签：javascript, html, google-chrome, popup

有谁知道如何将 HTML FORM 的目标设置为 Chrome 20+ 中新创建的弹出窗口。以下代码适用于所有浏览器，甚至适用于以前版本的 Chrome，除了 Chrome 20+：

```
var f = document.getElementByID("my_form");
window.open('','popup_win','scrollbars=yes,menubar=no,height=500,width='+(screen.width>1100?1100:screen.width)+',resizable=yes,toolbar=no,status=no,location=0');
f.target = this.win;
f.submit(); 
```

此代码创建一个新窗口，但它不包含生成的表单提交页面内容。

我们需要使用“window.open”，以便我们可以最好地设置要显示的应用程序的窗口大小。

在做了一些研究之后，它似乎与 Chrome 弹出窗口阻止程序有关。（[新窗口链接不适用于 Chrome](http://www.sitepoint.com/forums/showthread.php?711054-link-open-new-window-not-working-in-Chrome-browser)）。在我将网站添加到 Chrome 中的“始终允许”列表后，显示的内容。

任何人都知道如何在没有任何用户交互的情况下做这种事情？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T01:21:31.833

这是 Chrome 弹出窗口阻止设置的原因，一旦添加以允许站点正确显示。

如果空白窗口将我们的站点添加到您的允许弹出站点，则在 chrome 用户的按钮上方添加一条消息。

# java - 如何在 Spring MVC 中处理 HTTP 标头？

> ID：13882858
> 
> 赞同：0
> 
> 时间：2012-12-14T16:44:41.590
> 
> 标签：java, spring, spring-mvc, http-headers, httprequest

在此期间，我正在研究 Spring MVC 展示示例。现在我正在研究 Spring MVC 如何需要数据。

我很难理解如何处理 HTTP 请求标头。

在实践中，我有以下链接：

```
<a id="header" class="textLink" href="<c:url value="/data/header" />">Header</a> 
```

此链接生成一个对 URL 的 HTTP 请求：**“/data/header”**

这是处理这个HTTP请求的RequestDataController类的方法（整个类被@RequestMapping("/data")注解：所以这个方法处理/data/header URL）

```
@RequestMapping(value="header", method=RequestMethod.GET)
public @ResponseBody String withHeader(@RequestHeader String Accept) {
    return "Obtained 'Accept' header '" + Accept + "'";
} 
```

因此 withHeader 方法接受一个由**@RequestHeader**注释注释的参数，该注释指示方法参数应绑定到 Web 请求标头。

好的，所以我的答案是：Accept 变量中到底有什么？我的 HTTP Accetp Header 的值？要不然是啥？

Fow 我所知道的 Accept request-header 字段可用于指定响应可接受的某些媒体类型。接受标头可用于指示请求特别限于一小组所需类型，例如对内嵌图像的请求。

所以我的输出（返回值）是：**Obtained 'Accept' header 'text/plain, */* ; q=0.01'**

嗯...这究竟意味着什么 Accept headers 字段值？

谢谢

安德烈亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T17:42:37.993

是的，当您使用 @RequestHeader 注释参数时，参数名称用于检索标头信息 - 在您的情况下，这将是“接受”的标头名称 - 参数名称也可能是`accept`，标头名称在不区分大小写的方式。

您也可以通过这种方式明确指定标头名称：`@RequestHeader("Accept")`

像您所指出的那样接受标头是客户端（浏览器）说出它可以接受什么作为响应的媒体类型的一种方式。

# arrays - shell脚本数组长度

> ID：13882859
> 
> 赞同：2
> 
> 时间：2012-12-14T16:44:44.010
> 
> 标签：arrays, shell

我假设我的 shell 脚本的参数将`./x.sh subject N file1 file2 fileN` 是所以我`argv`从 3 开始拼接到结束`candidates=${@:3}`

现在我想检查候选人的长度是否与`N`我正在尝试`echo $((${#candidates[@]}))`的总是返回的给定相同`1`。

我可以，`echo "$#-2" | bc`但是，我不应该能够获得数组大小吗？

我可以`bc`用来做整数比较。但我必须知道我没有得到正确的`candidates 数组的大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T17:01:37.567

您分配的方式`candidates`不是制作数组。要使其成为数组，请执行以下操作：

```
candidates=(${@:3}) 
```

在 bash 中，您可以使用`${#candidates[*]}`. 要检查是否等于`$2`，只需执行以下操作：

```
[[ ${#candidates[*]} == "$2" ]] 
```

# java - 使用 onCreate 中的变量

> ID：13882862
> 
> 赞同：1
> 
> 时间：2012-12-14T16:44:58.157
> 
> 标签：java, android, android-activity

我是 android 编程的新手，但我似乎无法在网上找到一些小东西。我的问题是我想在另一个方法中使用 onCreate 方法中的变量。我确定这是在某个地方在线，但无论我搜索什么，我都找不到灵魂。也许我的措辞都是错误的......我想重新使用 onCreate 中的双打来执行 IF 语句，看看答案是否正确。应用程序此时崩溃..

这是我的代码：

```
 public class Addition extends Activity implements OnClickListener{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_addition);

    View results = findViewById(R.id.check_button1);

//set event listener
    results.setOnClickListener(this);

        double myRanNumber1; {

        // variable we will use to store a random number
        myRanNumber1 = Math.random(); 
        //myRanNumber generated between 0.000000... & 9.9999...
        myRanNumber1 = myRanNumber1 *10; 
        // myRanNumber between 0.00.. and 9.999..
        myRanNumber1 = (int) myRanNumber1;// myRanNumber between 0 and 9 (fraction chopped off)
        double myRanNumber=(myRanNumber1);
        DecimalFormat df = new DecimalFormat("####");
        String number = df.format(myRanNumber);
        String printnumber = number;
        TextView random = (TextView) findViewById(R.id.TextViewRand);
        random.setText(printnumber); 
        }

         double myRanNumber2; 
         {
        // variable we will use to store a random number
        myRanNumber2 = Math.random(); 
        //myRanNumber generated between 0.000000... & 9.9999...
        myRanNumber2 = myRanNumber2 *10; 
        // myRanNumber between 0.00.. and 9.999..
        myRanNumber2 = (int) myRanNumber2;// myRanNumber between 0 and 9 (fraction chopped off)
        double myRanNumber=(myRanNumber2);
        DecimalFormat df = new DecimalFormat("####");
        String number = df.format(myRanNumber);
        String printnumber = number;
        TextView random = (TextView) findViewById(R.id.TextViewRand1);
        random.setText(printnumber); 
        }

         double additionRes1 = addition1(myRanNumber1, myRanNumber2);
         Intent theIntent = new Intent(this, Results.class);

         Bundle b = new Bundle();
         b.putDouble("key", additionRes1);
         theIntent.putExtras(b);
         startActivity(theIntent);

}

private double addition1 (double myRanNumber1, double myRanNumber2)

{

    return (double) (myRanNumber1 + myRanNumber2);
} 
```

非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:48:51.267

如果要从不同的函数中操作变量，则变量的基本作用域要求将它们声明为类范围的变量。

```
public class MainActivity extends Activity {

    //Declare a class variable to use in this class
    public Double myNumber1;
    public Double myNumber2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            myNumber1 = 250;
            myNumber2 = 10;

            //mySum is only available for use within this method
            Double mySum = addition1 (myNumber1, myNumber2);

    }
    private double addition1 (double myRanNumber1, double myRanNumber2) {
       return myRanNumber1 + myRanNumber2;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:16:44.220

使用密钥代码.......您可以使用密钥存储值并使用密钥获取值

```
 Intent i = new Intent();
    i.putExtra("key", doubleValue);

    i.getDoubleExtra("key", defValue); 
```

# tfs - 如何获取 TFS 集合的总代码行数？

> ID：13882863
> 
> 赞同：0
> 
> 时间：2012-12-14T16:45:02.657
> 
> 标签：tfs

找出 TFS 集合中总代码行的最佳方法是什么？我是否需要以某种方式使用 SDK 来执行此操作？或者有没有报告工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:47:57.307

我不知道最好的方法，但是您几乎可以肯定必须将源代码放入工作区，然后运行您选择的工具来计算“行”（取决于您认为是“代码行”的内容） .

计算源文件中的行数的工具没有尽头，而且自己编写一个也很简单，所以我不会尝试详细介绍这部分问题。

因此，另一部分是手动将源代码获取到您的 PC，或使用[tf.exe](http://msdn.microsoft.com/en-us/library/fx7sdeyf%28v=vs.100%29.aspx)从批处理文件或类似文件中自动执行获取过程。棘手的一点是找出相当不友好的 tf 命令行，但如果您仔细阅读文档，这是一个非常容易实现的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T13:29:24.320

我承认我在试图找到一个很好的理由时不知所措，但如果你得到了整个集合，那么你可以计算每个文件中包含代码的类型的行数（ *.cs、vb、aspx 等）

许多工具可以计算行数，但如果您需要自己滚动，您可以尝试计算诸如“.+\n”之类的正则表达式的出现次数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-16T03:01:27.710

I had written this many years ago. It can work on local folders though, so if you have a local copy of the TFS code, it can still work. Not the best quality code, but just a quick and dirty way to get a report in the grid that you can copy to Excel (again, not the best automation, but gets the job done)-

[Add a few controls that are needed in the forms app]

```
 private static int totalLinesCount = 0;
    private static int totalLinesOfCode = 0;
    private static int totalComments = 0;

    private void btnCount_Click(object sender, EventArgs e)
    {
        try
        {
            totalLinesCount = 0;
            totalLinesOfCode = 0;
            totalComments = 0;
            lblTotalCount.Text = "";
            DirectoryInfo di = new DirectoryInfo(txtFileName.Text);
            if (di.Exists)
            {
                FileInfo[] fis = di.GetFiles(txtSearchPattern.Text, SearchOption.AllDirectories);
                rtbReport.Text = "";
                Dictionary<string, int> dictionary = new Dictionary<string, int>();
                DataSet ds = new DataSet("Report");
                DataTable dt = new DataTable();
                dt.Columns.Add("FileName", typeof(string));
                dt.Columns.Add("TotalCount", typeof(string));
                dt.Columns.Add("Code", typeof(string));
                dt.Columns.Add("Commented", typeof(string));
                dt.Columns.Add("Summary", typeof(string));
                ds.Tables.Add(dt);
                foreach (FileInfo fi in fis)
                {
                    if (fi.Exists)
                    {
                        int fileLinesCount = File.ReadAllLines(fi.FullName).Length;
                        int commentedCode = 0;

                        foreach (string line in File.ReadLines(fi.FullName))
                        {
                            if (line.TrimStart().StartsWith("/") || (line.TrimStart().StartsWith("*")))
                            {
                                commentedCode++;
                            }
                        }

                        rtbReport.Text += string.Format("{0}: {1}; Actual Code: {2}; Commented lines: {3};{4}",
                            fi.Name, fileLinesCount.ToString(), fileLinesCount - commentedCode, commentedCode,"\n");
                        totalLinesCount += fileLinesCount;
                        totalComments += commentedCode;

                        DataRow dr = ds.Tables[0].NewRow();
                        dr["FileName"] = fi.Name;
                        dr["TotalCount"] = fileLinesCount;
                        dr["Code"] = fileLinesCount - commentedCode;
                        dr["Commented"] = commentedCode;
                        dr["Summary"] = string.Format("Code: {0}, Commented: {1}, Total: {2}",
                            fileLinesCount-commentedCode, commentedCode, fileLinesCount);

                        ds.Tables[0].Rows.Add(dr);
                    }
                }
                if (ds.Tables.Count > 0)
                {
                    dataGridView1.DataSource = ds.Tables[0].DefaultView;

                    dataGridView1.Columns[0].AutoSizeMode = DataGridViewAutoSizeColumnMode.DisplayedCells;
                    dataGridView1.Columns[0].DefaultCellStyle.WrapMode = DataGridViewTriState.True;
                    dataGridView1.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.AllCells;
                }

                totalLinesOfCode = totalLinesCount - totalComments;

                lblTotalCount.Text = string.Format("{0}: {1}; Code: {2}; Comments: {3}",
                    "Total Number of lines in all files", totalLinesCount.ToString(),
                    totalLinesOfCode.ToString(), totalComments.ToString());
                rtbReport.Text += lblTotalCount.Text;
            }
            else
                MessageBox.Show("Folder does not exist. Select a valid folder",
                    "Folder not found", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

# sublimetext2 - Sublime Text 2 - 将字符添加到自动匹配设置

> ID：13882865
> 
> 赞同：3
> 
> 时间：2012-12-14T16:45:05.903
> 
> 标签：sublimetext2, textile

是否可以将字符添加到 sublime text 2 用于自动匹配功能的列表中。

这是首选项中描述的方式。

```
// Controls auto pairing of quotes, brackets etc
"auto_match_enabled": true, 
```

我想补充一下；

```
* _ 
```

因为我用纺织标记语言写了很多东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:50:31.890

我还没有机会详细查看这些内容，但我刚刚遇到了同样的问题，以下看起来像是很好的资源：

[http://brettterpstra.com/2012/05/17/markdown-editing-for-sublime-text-2-humble-beginnings/](http://brettterpstra.com/2012/05/17/markdown-editing-for-sublime-text-2-humble-beginnings/)

[http://www.sublimetext.com/forum/viewtopic.php?f=2&p=29300](http://www.sublimetext.com/forum/viewtopic.php?f=2&p=29300)

[Sublime Text 2——双重自动配对字符](https://stackoverflow.com/questions/14260649/sublime-text-2-doubled-autopaired-characters)

我假设 sublime 键盘映射中的部分在附近：

`{ "keys": ["\""], "command": "insert_snippet", "args": {"contents": "\"$0\""}, "context":`

如果我能尽快解决这个问题，我会更新这个答案。

# hibernate - 一对多/多对一关系的休眠设置

> ID：13882877
> 
> 赞同：2
> 
> 时间：2012-12-14T16:45:55.783
> 
> 标签：hibernate

在使用 Hibernate 时，我对一对多/多对一关系的拥有方的正确选择有点困惑。我可以想象这种关系的两个例子：

1.  Order/OrderLine 对是第一个示例。在这对中，订单具有“主人”角色。一个人想保存订单，结果保存所有的项目。
2.  组/用户对是第二个示例。在这一对中，用户具有“主人”角色。人们宁愿通过将用户分配到某个组来保存用户。

如果我们从细节中抽象出来，两个示例的内部结构是相同的，例如

```
public class Order/Group implements Serializable {
    private Integer id;
    private Set<OrderLine/User> children = new HashSet<OrderLine/User>();
}

public class OrderLine/User implements Serializable {
    private Integer id;
    private Order/Group parent;
} 
```

hibernate注解映射将分别为

```
@OneToMany(mappedBy = "parent")

@ManyToOne
@JoinColumn(name = "id", nullable = false) 
```

逻辑上将 OrderLine/User 保留为拥有方。

上述用例对关系拥有方的选择有影响吗？一个反转拥有方或使用级联选项保存/删除父级就足够了吗？添加/删除一些子项然后使用`orphanRemoval`（订单 - 订单行）或不使用它（组 - 用户）将父级持久保存到数据库是否正常？到底是哪一方负责某些操作，比如清除当前所在的群组用户，或者通过添加和删除项目来更改顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T17:00:21.663

其实，你没有太多选择。在双向 OneToMany 关联中，所有者方始终是多方（Hibernate 有一些技巧可以使逆向成为可能，但这很可怕，并且 JPA、AFAIK 不支持）。

但是不要把太多的价值归于这种所有权。唯一的意思是 Hibernate 将只考虑`parent`OrderLine（或 User）中的字段来确定是否存在关联。就这样。您仍然可以随意组织您的代码，前提是如果您想将 OrderLine 添加到 Order 中，请记住初始化父字段，如果您想将其与 Order 分离，请记住将其设置为 null。

# internet-explorer-8 - IE8 选择问题 - 将鼠标移动到选项关闭选择框

> ID：13882878
> 
> 赞同：2
> 
> 时间：2012-12-14T16:45:58.750
> 
> 标签：internet-explorer-8, option

本质上，问题是悬停（或悬停 div）中包含的选择框不允许您实际选择选项 - 当您从选择框移动到选项时，悬停会失去焦点并关闭。仅在 IE8 及更低版本中发生，因为据我了解，这些选项不被视为 IE8 或更早版本中选择框的实际部分。

在这里以最基本的形式展示：

[http://jsfiddle.net/3qVv7/88/](http://jsfiddle.net/3qVv7/88/)

仅在 IE8 及更早版本中发生。

我认为理想的解决方案将是一个更通用的脚本，它可以重置 IE8 或更早版本中的选择和选项，使其像在其他所有内容中一样。Chrome、FF、IE9+等都没有问题。

谢谢！

的HTML

```
<div id="button_box"><h2>Hover This</h2>
    <div id="form_box">
        <form action="#" method="post">
            <select id="select_option" onChange="Javascript:doSomething();">
                <option value="a">Value A</option>
                <option value="a">Value B</option>
                <option value="a">Value C</option>
                <option value="a">Value D</option>
                <option value="a">Value E</option>
            </select>
        </form>               
    </div>
</div> 
```

​CSS

```
#button_box { display:block; width: 150px; height: 75px; position:relative; background: #ddd; }

#button_box h2 { text-align: center }

#button_box #form_box { display: none; position:relative; width: 150px; background: #ccc }

#button_box:hover #form_box { display:block }

#form_box select { background: #bbb }​ 
```

# linux - 在 Linux 上将格式错误的 PDF 批量转换为 TIF

> ID：13882880
> 
> 赞同：2
> 
> 时间：2012-12-14T16:46:08.140
> 
> 标签：linux, pdf, imagemagick, ghostscript

我需要将多页 PDF 转换为 TIF，但它似乎是我们客户提供的格式错误的 PDF。我尝试使用 ImageMagick 和 GhostScript，但它们没有正确转换文件。结果只有大约 85-90% 的正确率。我发现唯一似乎可以完成这项工作的是 GIMP，但我找不到通过其 PDF 批处理方法使用它的示例。

以下是我从 ImageMagick 和 GhostScript 得到的警告：

```
 **** Warning: Tf refers to an unknown resource name: FORMS$.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: P06BOB.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: UN308E.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: P06BOB.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: UN308E.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: P06BOB.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: UN308E.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: UN307A.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: UN104A.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: UN308E.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: UN208E.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: UN308E.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: UN208E.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: HE14BP.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: UN208E.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: UN106E.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: UN208E.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: UN106E.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: UN208E.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: HE08BP.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: HE11BP.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: AR10NP.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: UN308E.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: JIMP2.l Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: HS11C.l Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: FORMS$.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: UN104A.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: UN208E.f Assuming it's a font name.
 **** Warning: Tf refers to an unknown resource name: UN307E.f Assuming it's a font name.

 **** This file had errors that were repaired or ignored.
 **** Please notify the author of the software that produced this
 **** file that it does not conform to Adobe's published PDF
 **** specification. 
```

我也愿意接受其他建议。谢谢！

编辑：我正在测试 GhostScript 8.7 和 ImageMagick 6.5.4.7-6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T17:02:00.923

不能在没有看到文件的情况下发表任何实质性评论。您是否考虑过简单地将文件发回并告诉他们制作正确的文件？

你也没有说你使用的是什么版本的 GS 和 ImadeMagick。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T22:14:04.020

损坏的 PDF……我“喜欢”它们。实际上，一个奇怪但好主意是将pdf“打印”到另一个pdf或ps文件中。这有很大帮助。

# api - 在 mq api 出口中获取别名队列的已解析队列名称

> ID：13882882
> 
> 赞同：2
> 
> 时间：2012-12-14T16:46:18.047
> 
> 标签：api, queue, alias, ibm-mq, exit

我试图通过查看对象描述符（MQOD）的 ResolvedQName 字段在 open_after 和 put1_before API 退出中获取已解析的队列名称（即别名队列的基本队列名称）。但它似乎不包含这些出口中的基本队列名称（即为空白或某些意外值，例如......'1.59.15'）。但是，我可以看到 ObjectName 已使用别名队列名称正确设置。为清楚起见，我的别名队列和基本队列都具有相同的本地 QM。

所以我想知道在使用别名队列进行 (open + put) 或 put1 调用时是否有办法在 MQ API 出口中获取已解析的队列名称。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:16:26.537

您需要读取 cmqc.h 文件中的 MQOD 结构。仅当应用程序使用 MQOD 结构的版本 3（或更高版本）时，ResolvedQName 字段才可用。如果您检查 MQOD 的版本号，我敢打赌您会看到它是版本 1 或 2。

注意：MQOD 的默认版本号是 1。因此，ResolvedQName 字段不可用。

最后，MQGMO 和 MQPMO 结构都具有从结构版本 1 开始的 ResolvedQName 字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T17:06:53.160

我猜你正在使用该`MQPMO_SYNCPOINT`选项？您是否也在使用该`MQPMO_SYNC_RESPONSE`选项？请参阅有关该`MQPUT1`主题的最后一条注释，其中指出：

> 当使用 MQPMO_SYNCPOINT 发出 MQPUT1 调用时，默认行为会更改，因此 put 操作异步完成。这可能会导致某些应用程序的行为发生变化，这些应用程序依赖于返回的 MQOD 和 MQMD 结构中的某些字段，但现在这些字段包含未定义的值。应用程序可以指定 MQPMO_SYNC_RESPONSE 以确保同步执行 put 操作并完成所有适当的字段值。

换句话说，在`PUT1`名称解析发生之前，将其移交给 WMQ，并将控制权返回给程序。

在任何情况下，`PUT1_BEFORE`出口点都不会解析名称。假设`MQPMO_SYNC_RESPONSE`已指定，您应该能够在`PUT1_AFTER`出口点找到它。

如果您从[SupportPac MA0W](http://ibm.co/SupptPacMA0W)安装 API 出口，它会将所有控制块和标志解析为英文并格式化列表。如果您查看该出口的输出，您应该能够准确地看到哪些出口点和字段包含已解析的名称以及何时。

因此，请务必指定`MQPMO_SYNC_RESPONSE`并考虑使用 MA0W API 出口作为参考和学习帮助。

# php - 多组 html 复选框的相同 Javascript

> ID：13882886
> 
> 赞同：3
> 
> 时间：2012-12-14T16:46:39.080
> 
> 标签：php, javascript, html, join, checkbox

我有一个 javascript 代码，用于一组复选框，用于过滤网站中显示的产品。

现在，我想添加一组新的复选框。原来的设置按颜色过滤，这个新的将按价格过滤。

我的问题是关于 javascript 部分。有什么方法可以使两个复选框的排序集通用吗？或者我应该为第二个过滤器创建一个新的 javascript，等等我想添加的任何新的排序过滤器？

请看下面的代码。

谢谢！

```
<script type="text/javascript">
//http://jsbin.com/ujuse/1/edit
$(function() {
    $("input[type='checkbox']").on('change', function() {
        var colors = [];
        $("input[type='checkbox']:checked").each(function() {
            colors.push(this.value);
        });
        if (colors.length) {
            $(".loadingItems").fadeIn(300);
            $(".indexMain").load('indexMain.php?color=' + colors.join("+"), function() {
            $(".indexMain").fadeIn('slow');
            $(".loadingItems").fadeOut(300);
            });

        } else {
            $(".loadingItems").fadeIn(300);
            $(".indexMain").load('indexMain.php', function() {
            $(".indexMain").fadeIn('slow');
                $(".loadingItems").fadeOut(300);
            });
        }
    });
});

</script> 
```

第一排序集：

```
<div class="bgFilterTitles">
    <h1 class="filterTitles">COLOR</h1>
</div>
<div class="colors">
<?php
include ("connection.php");
$colors = $con -> prepare("SELECT DISTINCT color_base1 FROM item_descr ORDER BY color_base1 ASC");
$colors ->execute();
while ($colorBoxes = $colors->fetch(PDO::FETCH_ASSOC))
{
echo "<input type='checkbox' class='regularCheckbox' name='color[]' value='".$colorBoxes[color_base1]."' /><font class='similarItemsText'>   ".$colorBoxes[color_base1]."</font><br />";
}
?>
</div>
</div> 
```

第二个排序集

```
<div class="bgFilterTitles">
    <h1 class="filterTitles">PRICE</h1>
</div>
<div class="colors">
<?php
include ("connection.php");
$prices = $con -> prepare("SELECT DISTINCT price FROM item_descr ORDER BY price ASC");
$prices ->execute();
while ($priceSort = $prices->fetch(PDO::FETCH_ASSOC))
{
echo "<input type='checkbox' class='regularCheckbox' name='price[]' value='".$priceSort[price]."' /><font class='similarItemsText'>   ".$priceSort[price]."</font><br />";
}
?>
</div>
</div> 
```

------------ 应用答案后：

```
 <script type="text/javascript">
//http://jsbin.com/ujuse/1/edit
$(function() {
    $("input[type='checkbox']").on('change', function() {
        var boxes = [];
        // You could save a little time and space by doing this:
        var name = this.name;
        // critical change on next line
        $("input[type='checkbox'][name='"+this.name+"']:checked").each(function() {
            boxes.push(this.value);
        });
        if (boxes.length) {
            $(".loadingItems").fadeIn(300);
            // Change the name here as well
            $(".indexMain").load('indexMain.php?'+this.name+'=' + boxes.join("+"),
            function() {
                $(".indexMain").fadeIn('slow');
                $(".loadingItems").fadeOut(300);
            });

        } else {
            $(".loadingItems").fadeIn(300);
            $(".indexMain").load('indexMain.php', function() {
                $(".indexMain").fadeIn('slow');
                $(".loadingItems").fadeOut(300);
            });
        }
    });
});
</script>

<?php
function echoCheckboxSet($header, $divClass, $columnName, $setName) {

    include ("connection.php");
$checkboxes = $con -> prepare("SELECT DISTINCT $columnName FROM item_descr ORDER BY $columnName ASC");
$checkboxes->execute();
?>
<div class="bgFilterTitles">
    <h1 class="filterTitles"><?php echo $header;?></h1>
</div>
<div class="<?php echo $divClass; ?>">
<?php
    while ($box = $checkboxes->fetch(PDO::FETCH_ASSOC)):
    $boxColumnName = str_replace('_',' ',$box[$columnName]);
?>
        <input type='checkbox' class='regularCheckbox' name='<?php echo $setName; ?>' value='<?php echo $box[$columnName]; ?>' />
        <font class='similarItemsText'><?php echo $boxColumnName; ?></font>
        <br />
<?php
endwhile;
?>
</div>
<?php
} // end of echoCheckboxSet

// Call our method twice, once for colors and once for prices
echoCheckBoxSet("COLOR", "colors", "color_base1", "color[]");
echoCheckBoxSet("PRICE", "prices", "price", "price[]");
?> 
```

我看到复选框并单击它们，但没有任何反应。

我的 indexMain.php 检索这样的值：

```
$colors = $_GET['color[]'];
echo "TEST".$colors[1];
            $colors = explode(' ', $colors);
            $parameters = join(', ', array_fill(0, count($colors), '?'));
            $items = $con -> prepare("SELECT * FROM item_descr WHERE color_base1 IN ({$parameters})");
            $items ->execute($colors);
            $count = $items -> rowCount(); 
```

我究竟做错了什么？？？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T17:48:39.733

可以向 jQuery`.change()`函数传递一个 eventObject 参数，该参数上有一堆关于事件的数据。更重要的是，在`.change`函数内部，局部变量`this`被设置为触发事件的项目。所以你应该能够做这样的事情：

```
$(function() {
    $("input[type='checkbox']").on('change', function() {
        var boxes = [];
        // You could save a little time and space by doing this:
        var name = this.name;
        // critical change on next line
        $("input[type='checkbox'][name='"+this.name+"']:checked").each(function() {
            boxes.push(this.value);
        });
        if (boxes.length) {
            $(".loadingItems").fadeIn(300);
            // Change the name here as well
            $(".indexMain").load('indexMain.php?'+this.name+'=' + boxes.join("+"),
            function() {
                $(".indexMain").fadeIn('slow');
                $(".loadingItems").fadeOut(300);
            });

        } else {
            $(".loadingItems").fadeIn(300);
            $(".indexMain").load('indexMain.php', function() {
                $(".indexMain").fadeIn('slow');
                $(".loadingItems").fadeOut(300);
            });
        }
    });
}); 
```

因此，您的更改功能现在仅将复选框输入聚合在一起，这些输入与更改的输入具有相同的名称。看起来这与您的标记兼容。我假设您的`indexMain.php`加载程序脚本对价格的作用与对颜色的作用相同。您可能需要去掉`[]`名称末尾的方括号 ( ) 才能执行正确的操作。如果您的行为需要在颜色和价格之间显着不同，您总是可以在名称上运行一个开关。

**编辑：**在这里尝试以类似的方式整合您的 php 代码（我认为这就是您所要求的），这就是我要尝试的。

```
<?php
function echoCheckboxSet($header, $divClass, $columnName, $setName) {

    include ("connection.php");
    $checkboxes = $con -> prepare("SELECT DISTINCT $columnName FROM item_descr ORDER BY $columnName ASC");
$checkboxes->execute();
?>
<div class="bgFilterTitles">
    <h1 class="filterTitles"><?php echo $header;?></h1>
</div>
<div class="<?php echo $divClass; ?>">
<?php
    while ($box = $colors->fetch(PDO::FETCH_ASSOC)):
?>
        <input type='checkbox' class='regularCheckbox' name='<?php echo $setName'?>' value='<?php echo $box[$columnName]; ?>' />
        <font class='similarItemsText'><?php echo $box[$columnName]; ?></font>
        <br />
<?php
endwhile;
?>
</div>
<?php
} // end of echoCheckboxSet

// Call our method twice, once for colors and once for prices
echoCheckBoxSet("COLOR", "colors", "color_base1", "color[]");
echoCheckBoxSet("PRICE", "prices", "price", "price[]");
?> 
```

一些额外的点：

*   看起来你`</div>`在第一个例子中有一个备用的。我删除了它。
*   每个脚本多次包含一个连接文件是不寻常的，从函数内部包含它更不寻常。我不知道它在做什么，所以我根本没有重构它；看起来它负责创建和/或修改一个名为 的变量`$con`，这不是我最喜欢的连接数据库的方式。
*   `while (expr):`to`endwhile;` [语法](http://php.net/manual/en/control-structures.while.php)正是我在将标记与控制结构混合时喜欢使用的语法。如果您愿意，您仍然可以使用花括号来包含标记本身。
*   You should really consider doing away with the `<font>` tag. As of html 4.0, it is deprecated. See [html 4 spec, section 15.2.2](http://www.w3.org/TR/html4/present/graphics.html#h-15.2.2). Use instead a `<span>` or a `<label>` with a `for` [attribute](http://www.w3.org/TR/html401/interact/forms.html#h-17.9) and adding an ID to each of the generated checkbox inputs.

# ruby-on-rails - mongoid 和 cancan：使用 .only() 和 cancan 的问题？帮手

> ID：13882890
> 
> 赞同：1
> 
> 时间：2012-12-14T16:46:44.567
> 
> 标签：ruby-on-rails, mongoid, cancan

我有一个索引操作，我想在表格中显示所有产品，如果当前用户具有该产品的管理能力，请提供该产品的链接。

我的产品文档可能非常大，因此我想在查询中使用 .only() 来仅获取与表相关的那些字段。

当我使用 .only() 时，我无法获得罐头？帮助程序正常工作。省略 .only() 效果很好。我尝试将所有我认为可能对罐子有影响的属性添加到 .only() 中？帮手无济于事。

```
#products_controller.rb
...
def index
  @products = Product.all #can? helper in view satisfied for proper products
  @products = Product.all.only(:name, :_id, :price)  # can? helper never satisfied
end 
```

模型实例需要哪些属性才能满足 can？：管理助手？

编辑：能力.rb

```
 ...
 can :manage, Product, :_id.in => user.products 
```

products 是存储在用户文档中的属于用户的产品 ID 数组

# c++ - 我在 cpp 中为某个类定义了一个模板函数 - 而不是 hpp。小孩子可以用吗？

> ID：13882891
> 
> 赞同：-1
> 
> 时间：2012-12-14T16:46:51.077
> 
> 标签：c++, templates, inheritance

我使用以下内容在 cpp 而不是头文件中编写模板，因为我更喜欢保持代码干净。

[将 C++ 模板函数定义存储在 .CPP 文件中](https://stackoverflow.com/questions/115703/storing-c-template-function-definitions-in-a-cpp-file)

在**.hpp**
`template <class obj_class> void plotLaser(int zoom, void * obj);`

在**.cpp**
`class visualizer {...};`
`class annotator : public visualizer {...};`
`template void plotLaser<visualizer>(int zoom, void * obj) {...};`

我可以使用模板调用`plotLaser<annotator>(...);`还是必须重写它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:56:20.513

我认为你需要重新编写它。因为你的代码

```
 template void plotLaser<visualizer>(int zoom, void * obj) {...}; 
```

是一门专业。

如果你需要一个注释器，你需要一个专门化的。

# ms-access - 如何使用 MS Access 2010 中的报告编辑记录？

> ID：13882892
> 
> 赞同：0
> 
> 时间：2012-12-14T16:46:50.873
> 
> 标签：ms-access

我使用查询创建了一个报告，该报告显示了一个表中的所有记录，报告的每一行都显示了表的一条记录。现在我想删除同一个报告中的记录，我创建了一个按钮，每一行生成相同的按钮并执行相同的删除操作。现在我也想编辑（更新）我的记录。所以我又添加了一个按钮编辑，现在当我单击输入到特定文本框的报告光标的任何行中的记录但无法修改其中的值时。我想使用相同的报告和编辑命令按钮更新记录，我认为它可能设置为只读但我在文本框的属性窗口中找不到它，此报告是通过单击查询自动生成的，它会加载结果查询是我的问题的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T05:47:09.497

尝试使用表单向导制作表单。这应该允许您创建新记录、编辑现有记录，甚至相当轻松地删除记录。

报告是只读的，打算打印到纸上。在报表中放置按钮以删除记录并不是 Access 中报表的设计目的。

# javascript - 在 Fusion Tables 中，可以通过基于 Javascript 的 Google Maps API 设置渐变吗？

> ID：13882895
> 
> 赞同：3
> 
> 时间：2012-12-14T16:47:09.207
> 
> 标签：javascript, google-maps-api-3, google-fusion-tables

这是我下面的代码。出于某种原因，正确渲染的唯一样式是笔触（它是白色）和不透明度（设置为 0.4）。但是，我的渐变似乎没有加载。相反，它全是红色的。为什么是这样？

```
<html>
<head>
    <meta charset="UTF-8">

    <title>Customizing Fusion Tables map using Fusion Tables' Javascript API</title>

    <style type="text/css">
        #map-canvas {
            height: 800px;
            width: 800px;
        }
    </style>

    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> <!-- Google Maps API -->
    <script type="text/javascript">
        var locationColumn = "geometry";
        var tableId = "1FbzvoRkdJzXvIxMJg2mGYVz5Q1BW2-4feMolgVc"; // California Census Tracts FT
        var condition = "'Median income (dollars)'>0";

        var mapOptions = {
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        function initialize() {
            var geocoder = new google.maps.Geocoder();
            var gmap = new google.maps.Map(document.getElementById('map-canvas'),mapOptions);
            var layer = new google.maps.FusionTablesLayer({
                query: {
                    select: locationColumn,
                    from: tableId,
                    where: condition
                },
                styles: [
                    {
                        polygonOptions: {
                            strokeColor: "#ffffff",
                            strokeOpacity: 0.4,
                            strokeWeight: 1,

                            fillColorStyler: {
                                kind: "fusiontables#gradient",
                                columnName: "Median income (dollars)",

                                gradient: {
                                    min: 28183.65,
                                    max: 122762.9,
                                    colors: [
                                        {
                                            color:"#990000",
                                            opacity:0.4
                                        },
                                        {
                                            color:"ffd966",
                                            opacity:0.4
                                        },
                                        {
                                            color:"#274e13",
                                            opacity:0.4
                                        }
                                    ]
                                }
                            }
                        }
                    }
                ]
            });

            geocoder.geocode(
                {
                    'address':'California'
                },
                function(results,status){
                    var sw = results[0].geometry.viewport.getSouthWest();
                    var ne = results[0].geometry.viewport.getNorthEast();
                    var bounds = new google.maps.LatLngBounds(sw,ne);
                    gmap.fitBounds(bounds)
                }
            );

            layer.setMap(gmap);
        }

        google.maps.event.addDomListener(window, 'load', initialize);
    </script>
</head>
<body>
    <div id="map-canvas"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T23:52:54.480

**更新 1**

我做了更多的研究。不幸的是，不支持此功能。您的代码在[文档](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)`new google.maps.FusionTablesLayer`中没有提及渐变。我建议使用我的最后一个解决方案（效果很好）或支持渐变*的*[业务人口统计层](https://developers.google.com/maps/documentation/business/demographics#gradients)。这里也得出了同样的结论：[Gradient for Fusion Table Layer](https://stackoverflow.com/questions/11791898/gradient-for-fusion-table-layer)。因此，回答您的问题：不，您不能使用基于 Google Maps JavaScript 的 API 创建渐变。

 ***更新 0**

我能够使用[Google Maps JavaScript API v3: Layers](https://developers.google.com/maps/documentation/javascript/layers)完成所需的渐变。具体来说，我在[Fusion Table Styles](https://developers.google.com/maps/documentation/javascript/layers#fusion_table_styles)小节中找到了一个有用的示例。

**工作示例：http:** [//jsbin.com/alahup/1/edit](http://jsbin.com/alahup/1/edit)

**相关代码**

```
var layer = new google.maps.FusionTablesLayer({
  query: {
      select: locationColumn,
      from: tableId,
      where: condition
  },
  styles: [{
      where: "'Median income (dollars)' < 35000",
      polygonOptions: {
          fillColor: '#2EFEF7',
          fillOpacity: 0.4
      }
  }, {
      where: "'Median income (dollars)' > 34999.99 AND 'Median income (dollars)' < 65000",
      polygonOptions: {
          fillColor: '#2E9AFE',
          fillOpacity: 0.4
      }
  }, {
      where: "'Median income (dollars)' > 64999.99 AND 'Median income (dollars)' < 120000",
      polygonOptions: {
          fillColor: '#2E2EFE',
          fillOpacity: 0.4
      }
  }, {
      where: "'Median income (dollars)' > 119999.99",
      polygonOptions: {
          fillColor: '#0B0B61',
          fillOpacity: 0.4
      }
  }]
}); 
```

**结果**

![融合表梯度示例](../Images/2d366042ba9bfe307bf4ee0b71b8f34b.png)

* * *

这是一个快速的解决方案：

```
var layer = new google.maps.FusionTablesLayer({
            query: {
                select: locationColumn,
                from: tableId,
                where: condition
            },
            styleId: 2 // <-- replace current style code with this
 }); 
```

[Gradient for Fusion Table Layer](https://stackoverflow.com/questions/11791898/gradient-for-fusion-table-layer)有更多关于预定义样式的信息。我会进一步调查。

* * *

**此外**，谷歌的这个例子看起来和你想要完成的几乎一样。我会审查并使用他们的代码。

[https://developers.google.com/fusiontables/docs/samples/adv_fusiontables](https://developers.google.com/fusiontables/docs/samples/adv_fusiontables)

![在此处输入图像描述](../Images/84dac07053c9eff3f778b1f84c69da69.png)*

# jquery - 选择 HTML 内容并替换

> ID：13882898
> 
> 赞同：0
> 
> 时间：2012-12-14T16:47:24.767
> 
> 标签：jquery, jquery-selectors

我对 jquery 有一点问题。

假设我有以下声明：

```
var content = $('#details').html(); 
```

我如何在**内容**中找到一些东西？

这是我尝试过的：

```
// i want to empty the data inside the id=student
content.find('#student').html(''); 
```

但是由于内容是一个字符串......我如何将 HTML 分配给一个变量并能够搜索它？

**更新 ：**

这是我想要实现的目标：

我有一个 ajax 查询，我需要完整的 (#details) 结构。

如果我清空结构，然后对于不同的 ajax 查询，我可能需要在 #student 内进行一些替换，因为它已被清除，所以不可用......

前任：

```
<div id="details">

 <div id="student">
   <span> {%weeks%} </span>
 </div>

 <div id="teacher">
   <span> {%whatever%} </span>
 </div>
</div> 
```

所以有时我需要根据 ajax 查询清除学生/有时老师，这就是我复制 html 的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:48:45.150

你可以使用选择器

```
$('#student', content); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:05:34.000

由于 ID 必须是*唯一的*，您可以直接通过 ID 选择元素，这比创建冗余 jQuery 对象更有效。

```
$('#student').html(''); 
```

您也可以使用空方法：

```
$('#student').empty(); 
```

请注意，如果您使用的是 ajax，则可以使用`html`更改元素的 html 内容的方法，无需删除 html 内容。

```
// ...
success: function(data) {
     $('#student').html(data);
} 
```

如果要缓存对象，可以使用`end`返回先前状态的方法：

```
var $content = $('#details');
$content
   .find('#something').foo().end()
   .find('#anotherElement').bar().end() 
```

或者，如果要复制元素，请使用`clone`方法：

```
var $contentCloned = $('#details').clone(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T17:05:47.497

为什么你不能做

```
$('#details').find('#student').html('') 
```

**或更好**

```
$('#student').html('') 
```

# c# - 具有计算属性的实体框架

> ID：13882899
> 
> 赞同：1
> 
> 时间：2012-12-14T16:47:38.830
> 
> 标签：c#, entity-framework

我正在寻找完成以下任务的最干净/最佳实践方式：

我正在使用 EF，代码优先，存储库模式。我有一个名为 Project 的实体，它又具有描述该项目的标签或关键字列表：

```
public class Tag {
   public int TagID { get; set; }
   public int ProjectID { get; set; }
   public string TagValue { get; set; }
} 
```

我在强类型 Razor 视图中使用此数据，并在项目标题下方显示标签。这样做时，我希望每个标签都指示它在数据库中出现的次数，例如：

> 一些项目名称
> 
> C# (5)、实体框架 (17)

在我看来，最好的计划是为实体添加一个计算属性：

```
public class Tag {
   public int TagID { get; set; }
   public int ProjectID { get; set; }
   public string TagValue { get; set; }
   public int TagCount { get { _context.Tags("Some Filter on TagValue").Count() }}
} 
```

或者，我正在考虑在控制器中填充 TagCount 属性，调用 TagRepository 中的方法，例如：

```
public int countTags(string TagValue); 
```

**意识到我可能完全错过了这里的大局，我的问题是：这些方法中的任何一种都在正确的轨道上吗？**

**更新**：按要求添加项目模型。

抽象项目：

```
public abstract class Project {
    public int ProjectID { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
    public virtual ICollection<Tag> Tags { get; set; }
} 
```

实施的项目类型：

```
public class Scientific : Project {
    public int ScientificProjectNumber { get; set; }
    public string FileNumber { get; set; }
    public int Year { get; set; }
    public DateTime StartDate { get; set; } 
```

}

**更新：** 我基于 Brian Cauthon 的回答的解决方案是执行以下操作：

- 我没有创建一个全新的类，而是继承了我正在扩展的类： 注意：我必须创建一个附加属性 TagsView 因为我无法覆盖 Scientific : Project 类的虚拟属性。

```
public class ScientificView : Scientific {
    public virtual ICollection<TagView> TagsView { get; set; }
} 
```

- 我对 TagView 做了同样的事情，扩展类而不是复制它 - 希望随着这些对象的发展为我节省一些精力：

```
 public class TagView : Tag {
    public int TagCount { get; set; }
} 
```

-添加了建议的 TagRepository 方法：

```
public Dictionary<string, int> countTags(IEnumerable<string> tags) {
        Dictionary<string, int> result = new Dictionary<string, int>();
        var query = from o in _context.Tags
                group o by o.TagValue into tagGroup
                select new {TagText = tagGroup.Key,
                    TagCount = tagGroup.Count()};

        foreach (var tagGroup in query) {
            result.Add(tagGroup.TagText, tagGroup.TagCount);
        }
        return result;
    } 
```

-更新全部从控制器执行。感谢您提供优秀 AutoMapper 项目的链接：

```
public ViewResult Scientific(int projectID) {
        Scientific project= _scientificRepository.Scientific.FirstOrDefault(l => l.ProjectID == projectID);
        Dictionary<string, int> tagCounts = _tagRepository.countTags(project.Tags.Select(t => t.TagValue));

        Mapper.CreateMap<Scientific, ScientificView>();
        ScientificView sv = Mapper.Map<Scientific, ScientificView>(project);

        Mapper.CreateMap<Tag, TagView>();
        sv.TagsView = new List<TagView>();
        foreach (Tag t in project.Tags) {
            TagView tv = Mapper.Map<Tag, TagView>(t);
            tv.TagCount = tagCounts[tv.TagValue];
            sv.TagsView.Add(tv);
        }
        return View(sv);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:29:07.220

对于实际的问题，我个人认为不是模型的业务知道如何实现业务逻辑，而是让模型上的方法做业务逻辑。如果标签计数是从模型外部计算的（即从存储过程），那么也许我会沿着您开始的路线走，但将其定义为计算列（[在此处讨论](http://geekswithblogs.net/DavidPaquette/archive/2012/09/23/calculated-columns-in-entity-framework-code-first-migrations.aspx)）

但是，对于您要实现的目标可能会产生疑问，因为目前您可能会为相同的数据调用数据库数百次，`_context.Tags("").Count()`因为加载到每个项目中的每个标签都将执行此调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T17:29:23.057

我会从标签存储库中提取计数。由于您可能一次提取多个标签的计数，因此我将更改您的存储库方法以一次提取所有标签。

[我会为您的视图创建特定的视图模型，然后使用Automapper](https://github.com/AutoMapper/AutoMapper)将您的`Project`和映射`Tag`到它们。

```
public class ProjectView {
    public int ProjectID { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
    public virtual ICollection<TagView> Tags { get; set; }
}

public class ProjectTagView {
   public int TagID { get; set; }
   public string TagValue { get; set; }
   public int TagCount { get; set; }
} 
```

然后在你的控制器中你会有这样的东西。

```
var model = AutoMapper.Map<Project,ProjectView>(project);
Dictionary<string,int> tagCounts = tagRepository.getCounts(model.Tags.Select(t=>t.TagValue));
foreach(var t in model.Tags){
    t.TagCount = tagCounts[t.TagValue];
} 
```

# android - 如何使用安卓标签

> ID：13882902
> 
> 赞同：0
> 
> 时间：2012-12-14T16:47:51.450
> 
> 标签：android, android-layout, tabs

我有一个关于安卓的问题。我是 Android 新手，正在尝试制作一个带有标签作为主要导航元素的小应用程序。好吧，我不是 100% 确定如何正确使用标签。也许你可以在那里指导我。

据我所知，基本上有两种不同的选择。我可以使用操作栏中的选项卡或 TabHost。在我看来，前者是正确的方法。这里有什么优点和缺点？

如果我使用操作栏中的选项卡，建议不要超过 3 个选项卡。如果我需要更多导航选项怎么办（据我了解，它不像 iOS 选项卡那样有“...”选项）？

我应该使用不同类型的导航元素吗？（我想在我的情况下我会有 4 个“标签”）

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T17:08:55.547

行动栏绝对是要走的路。TabHost 已被弃用，Google 更喜欢使用 Action bar，因为它确实符合 ICS 之后的设计理念。

您可以使用[ActionBarSherlock](http://actionbarsherlock.com/)支持 2.1 (Eclair) 之后的所有 android 版本。

以下是一些帮助您入门的教程：

[http://avilyne.com/?p=180](http://avilyne.com/?p=180)

[http://xrigau.wordpress.com/2012/03/15/using-an-actionbar-in-your-application-with-actionbarsherlock/](http://xrigau.wordpress.com/2012/03/15/using-an-actionbar-in-your-application-with-actionbarsherlock/)

视频教程：

[http://www.youtube.com/watch?v=avcp6eD_X2k](http://www.youtube.com/watch?v=avcp6eD_X2k)

[http://www.youtube.com/watch?v=4mOMOh-fH-c](http://www.youtube.com/watch?v=4mOMOh-fH-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T18:10:57.670

尝试这样的事情：

```
Activity sampleActivity = (Activity) View.getContext();
ActionBar actionBar = sampleActivity.getActionBar();
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
Tab tab = actionBar.newTab();
tab.setText("This is the name of the tab");
actionBar.addTab(tab, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T17:08:36.387

用这个例子来解决他/她的问题

Tab 的这个主 xml 文件

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp">
    <TabWidget`enter code here`
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp" />
</LinearLayout> 
```

文件

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_layout);

    Resources ressources = getResources();
    TabHost tabHost = getTabHost();

            Intent intentAndroid = new Intent().setClass(this,FirstClass.class);

    TabSpec tab1 = tabHost
            .newTabSpec("Android")
            .setIndicator("",ressources.getDrawable(R.drawable.icon_android_config))
            .setContent(intentAndroid);

Intent intentAndroid2 = new Intent().setClass(this,FirstClass.class);

    TabSpec tab2 = tabHost
            .newTabSpec("Android")
            .setIndicator("",ressources.getDrawable(R.drawable.icon))
            .setContent(intentAndroid2);

            tabHost.addTab(tab1);
    tabHost.addTab(tab2);

           tabHost.setCurrentTab(0); 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-12T11:33:11.523

```
public int getCount() {
            // Show 3 total pages.
            return 5;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            switch (position) {
                case 0:
                    return "Items";
                case 1:
                    return "Food";
                case 2:
                    return "Drink";
                case 3:
                    return "soft";
                case 4:
                    return "warm";
            }
            return null;
        }
    } 
```

# jquery - jQuery 验证 addmethod 总是返回 true

> ID：13882903
> 
> 赞同：0
> 
> 时间：2012-12-14T16:48:03.260
> 
> 标签：jquery, jquery-validate

我在我的 jquery 验证页面中添加了一个用户名检查可用功能。如果我查看 Firebug 中远程功能的响应，我会看到正确的响应 - TRUE 或 FALSE。同样，如果我在响应消息中添加一个 alert() ，它会显示正确。但是，使用下面的代码 - addmethod 总是返回 TRUE。

```
$.validator.addMethod('usernamecheck',function(username) {
    var postURL = [url to remote function]
    $.ajax({
        cache:false,
        async:false,
        type: "POST",
        data: "username=" + username,
        url: postURL,
            success: function(msg) {
                result = (msg=='FALSE') ? false : true;
            }
    });
    return result;
}, ''); 
```

我已经验证了该函数仅返回布尔值 true 或 false，但我很难理解为什么`true`每次都返回结果。

解决了

我切换了 CFC 以确保它被设置为返回布尔值和普通值：

```
<cffunction name="checkUsernameRemote" access="remote" returntype="boolean" output="no" returnformat="plain"> 
```

然后对我的返回值进行了序列化 JSON：

```
<cfset LOCAL.result = SerializeJSON(LOCAL.result)/>      
<cfreturn LOCAL.result /> 
```

在我的 jQuery 中，我摆脱了 addMethod() 并将其移至远程规则中：

```
username: {
    required: true,
    rangelength: [4,50],
    remote: {
        cache:false,
        async:false,
        url: compath + "/rmtUserCFC.cfc?method=checkUsernameRemote&returnformat=json",
        type: "post"
    }
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:51:18.160

`success`尝试在函数内添加您的回报。

```
success: function(msg) {
          return (msg=='FALSE') ? false : true;
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:26:02.700

我切换了 CFC 以确保将其设置为返回布尔值和普通值：

```
<cffunction name="checkUsernameRemote" access="remote" returntype="boolean" output="no" returnformat="plain"> 
```

然后对我的返回值进行了序列化 JSON：

```
<cfset LOCAL.result = SerializeJSON(LOCAL.result)/>      
<cfreturn LOCAL.result /> 
```

在我的 jQuery 中，我摆脱了 addMethod() 并将其移至远程规则中：

```
username: {
required: true,
rangelength: [4,50],
remote: {
    url: compath + "/rmtUserCFC.cfc?method=checkUsernameRemote&returnformat=json",
    type: "post"
  }
}, 
```

# php - 会话上的未定义变量突然没有进行任何更改

> ID：13882913
> 
> 赞同：0
> 
> 时间：2012-12-14T16:48:53.837
> 
> 标签：php, mysql

![在此处输入图像描述](../Images/0cd189ec44e83d49e80917fbb83580e3.png)

```
<?

session_start();

$client_name=$_SESSION['client_name'];

if ($client_name !== 'admin')
{
include "client_header.php";
$client_id=$_SESSION['client_id'];
$first_name=$_SESSION['first_name'];
$last_name=$_SESSION['last_name'];
$remoteaddr=$_SESSION['remoteaddr'];
$date_in=$_SESSION['date_in'];
$time_in=$_SESSION['time_in'];
$cisloggedin=$_SESSION['cisloggedin'];

$url_access=$_SERVER['REQUEST_URI'] ;

$isql = "INSERT INTO patient (first_name,last_name, email, country , address , phone , gender , height , weight , bloodpressure , bloodtype)
VALUES ('$first_name','$last_name','$email','$country','$address','$phone','$gender','$height','$weight','$bloodpressure','$bloodtype')";
$result = mysql_query($isql);
?>
<h2><br>Welcome <b>
  <?=$client_name?>

  Here are your bills:
  </b></h2>

<?

$result = mysql_query("SELECT * FROM invoices WHERE clientid = '$client_id' ORDER BY id",$db);

echo "<p><table border=1 cellspacing=0 cellpadding=2 bordercolor=#000000 width=90%>";
echo "<tr align=top>
<td class=topHeadrow5><b>Inv. #</b></td>
<td class=topHeadrow5><b>Receipt Date</b></td>
<td class=topHeadrow5><b>Due Date</b></td>
<td class=topHeadrow5><b>Total</b></td>
<td class=topHeadrow5><b>Status</b></td>
<td class=topHeadrow5>&nbsp;</td></tr>";

while ($row = mysql_fetch_array($result))
{
    $id = $row["id"];
    $date = $row["date"];
    $bill_date = $row["bill_date"];
    $due_date = $row["due_date"];
    $paid_date = $row["paid_date"];
    $dateshow = fixDate($date);
    $dateshow1 = fixDate($bill_date);
    $dateshow2 = fixDate($due_date);
    $dateshow3 = fixDate($paid_date);
    $total = $row["total"];
    $status = $row["status"];

if ($alternate == "1") {
    $color = "#ffffff";
    $alternate = "2";
    }
    else {
    $color = "#c0c0c0";
    $alternate = "1";
    }

echo "<tr valign=top bgcolor=$color><td>$id</td><td>$dateshow</td><td>$dateshow2</td><td align=right>$currency$total</td>";
if($status == "paid"){
echo "<td bgcolor=#33cc33>$status</td>";
}else{
echo "<td>$status</td>";
}
echo "<td>[ <a href='invoice.php?id=$id'>view</a> ] [ <a target=_blank href='invoice_print.php?id=$id'>Print</a> ]</td></tr>";
}
echo "</table>";
//-------------------------------------------------Begin Admin-------------------------------------------------
}
elseif ($client_name == 'admin')
{
include "header.php";

$url_access=$_SERVER['REQUEST_URI'] ;

?>
<h2><br>Hello <b>
  <?=$client_name?>

  Patients List:
  </b></h2>

<?

if ($menusort1 = $menusort1) {
$result = mysql_query("SELECT invoices.*, clients.*
FROM invoices,clients
WHERE invoices.clientid = clients.clientid && invoices.date >'$ytd'
ORDER BY $menusort1 ASC",$db);

}
if ($menusort = $menusort) {
$result = mysql_query("SELECT invoices.*, clients.*
FROM invoices,clients
WHERE invoices.clientid = clients.clientid && invoices.date >'$ytd'
ORDER BY $menusort DESC",$db);

}
if (!$menusort and !$menusort1) {
$result = mysql_query("SELECT invoices.*, patient.*
FROM invoices,patient
WHERE invoices.clientid = clients.clientid && invoices.date >'$ytd'
ORDER BY id",$db);
}
echo "<p><table border=1 cellspacing=0 cellpadding=2 bordercolor=#000000 width=95%>";
echo "<tr align=top>
<td class=topHeadrow5><b>ID number: <a href='menu.php?menusort=id'><img class=arrows src=images/dn_arrow.gif></a><a href='menu.php?menusort1=id'><img class=arrows src=images/up_arrow.gif></a></b></td>
<td class=topHeadrow5><b>Name <a href='menu.php?menusort=name'><img class=arrows src=images/dn_arrow.gif></a><a href='menu.php?menusort1=name'><img class=arrows src=images/up_arrow.gif></a></b></td>
<td class=topHeadrow5><b>Out Patient<a href='menu.php?menusort=date'><img class=arrows src=images/dn_arrow.gif></a><a href='menu.php?menusort1=date'><img class=arrows src=images/up_arrow.gif></a></b></td>
<td class=topHeadrow5><b>Due Date <a href='menu.php?menusort=due_date'><img class=arrows src=images/dn_arrow.gif></a><a href='menu.php?menusort1=due_date'><img class=arrows src=images/up_arrow.gif></a></b></td>
<td class=topHeadrow5>&nbsp;</td>
<td class=topHeadrow5>&nbsp;</td>
<td class=topHeadrow5>&nbsp;</td>
<td class=topHeadrow5>&nbsp;</td></tr>";

while ($row = mysql_fetch_array($result))
{
    $id = $row["id"];
    $clientid = $row["clientid"];
    $name = $row["first_name"];
    $date = $row["date"];
    $bill_date = $row["bill_date"];
    $due_date = $row["due_date"];
    $paid_date = $row["paid_date"];
    $dateshow = fixDate($date);
    $dateshow1 = fixDate($bill_date);
    $dateshow2 = fixDate($due_date);
    $dateshow3 = fixDate($paid_date);

if ($alternate == "1") {
    $color = "#ffffff";
    $alternate = "2";
    }
    else {
    $color = "#e5e5e5";
    $alternate = "1";
    }

echo "<tr valign=top bgcolor=$color>
<td width=10>$id</td><td>$name</td>
<td>$dateshow</td><td>$dateshow2</td>
<td align=right>$currency$total</td>";
if ($status == 'pending') {
echo "<td  bgcolor=$color>$status</td>";

} else {
echo "<td class=rowviewinv >$status</td>";
}
if ($status == 'pending') {
echo "<td>[ <a href='admin_invoice.php?id=$id'>view / change status</a> ]</td>";
}
else {
echo "<td class=rowviewinv>[ <a class=inv_links href='admin_invoice.php?id=$id'>view</a> ]</td>";
}
if ($status == 'pending') {
echo "<td>[ <a href='notifyclient.php?id=$id&clientid=$clientid'>notify client</a> ]</td>";
} else {
echo "<td class=rowviewinv>[ Paid $dateshow3 ]</td>";
}

echo "<td>[ <a href='edit_invoice.php?id=$id'>edit</a> ]</td><td>[ <a href='delete_invoice.php?id=$id' onClick=\"return confirm('Are you sure?')\">delete</a> ]</td></tr>";
}
$result = mysql_query("SELECT sum(total) AS sum FROM invoices WHERE date >'.$ytd.'");
$sum = mysql_result($result,0,"sum");

if ($sum == 1){
echo "";
}else{
echo "";
}
echo "</table>";

?>
<p align="center"><font class="medBold">You can review previous dates by selecting from the calendar icons.
</font></p>
<form method="post" name=form1 action="invoice_history.php">
<input type="text" name="invdate" id="invdate">
<img src="img.gif" id="f_trigger_c"
     style="cursor: pointer; border: 1px solid red;"
     title="Date selector"
     onmouseover="this.style.background='red';"
     onmouseout="this.style.background=''" />
<script type="text/javascript">
    Calendar.setup({
        inputField     :    "invdate",
        ifFormat       :    "%Y-%m-%d",
        button         :    "f_trigger_c",
        align          :    "Tl",
        singleClick    :    true
    });
</script>
<input type="Submit" name="submit" value="Submit Invoice Date"></form>
<?
}

?> 
```

它以前工作得很好。我没有做任何事情，因为我不是编写代码的人。我所做的只是将文件复制到一个新文件夹，但两个文件都不起作用。在数据库中，我确实修改了一些，但不是在该程序正在使用的数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:51:57.580

`include "client_header.php";`

您缺少此文件，因此它可能会丢弃其余代码。您可能将这些文件移动到不同的目录，更改`include`以允许目录更改。

代码中还有其他`include`内容，因此也要更新它们。

// 编辑

检查原始来源，因为你说这是别人的代码，可能有副本存在。该`include`命令指示该`client_header.php`文件将可用，无论是在同一文件夹中还是作为`PATH`. 有关更多详细信息，请参阅[PHP 包含](http://php.net/manual/en/function.include.php)文档和[有关 include_path 的注释](http://php.net/manual/en/ini.core.php#ini.include-path)。

唯一的另一种可能性是这些错误之前存在，但由于 php 设置不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:52:10.627

您移动了脚本，因此您需要更正包含路径：

```
include "client_header.php"; 
```

这期望包含在当前目录中，因此如果您已将其移至子目录，则可以为其添加前缀`../`或为其提供绝对路径。

# wpf - 模仿用户控制

> ID：13882916
> 
> 赞同：0
> 
> 时间：2012-12-14T16:49:17.217
> 
> 标签：wpf, user-controls, popup

我有一个带有文本框和复选框的 wpf 用户控件。用户控件使用元素宿主在 winforms 选项卡控件中呈现。我希望通过单击用户控件上的按钮将用户控件弹出到一个全新的 winform 中。

我尝试了一个示例项目，我可以简单地通过

```
void button1_Click(object sender, EventArgs e)
{
    Form frm = new Form();
    UserControl uc = userControl11;
    frm.Controls.Add(uc);
    frm.Show();
} 
```

但是，我想要一种方法，以便用户可以单击按钮将用户控件弹出到新表单中，然后单击相同的按钮关闭新的弹出表单并在选项卡页中显示控件。显然，所有用户输入的数据应该仍然存在。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:32:15.263

[MVVM](http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial)是你的朋友。将 UserControl 的所有逻辑（用户数据、弹出状态等）集中在 ViewModel 对象中，并将其设置为控件的 DataContext。要“弹出”控件，只需创建一个新控件并将其 DataContext 设置为第一个的 ViewModel。您可以在 ViewModel 中有一个属性来了解控件是否弹出，相应地采取行动并在点击弹出按钮时切换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:39:15.717

一旦你创建了你的用户控件，它就被创建了，你可以将它分配给另一个 ElementHost（我的例子，两个表单都有元素控件）。看看这是否符合您的要求。

**表格1**

```
public partial class Form1 : Form
{
    Form2 frm2;
    bool popout = false;
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (popout)
        {
            frm2.Close();
        }
        else
        {
            frm2 = new Form2();
            frm2.FormClosed += new FormClosedEventHandler(frm2_FormClosed);
            this.elementHost1.Child = null;
            frm2.setUserControl(userControl11);
            frm2.Show();
            popout = true;
        }
    }

    void frm2_FormClosed(object sender, FormClosedEventArgs e)
    {
        frm2.setUserControl(null);
        this.elementHost1.Child = userControl11;
        frm2.FormClosed -= new FormClosedEventHandler(frm2_FormClosed);
        popout = false;
    } 
} 
```

**表格2**

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }
    public void setUserControl( System.Windows.Controls.UserControl item)
    {
        elementHost1.Child = item ;
    }
} 
```

# node.js - 带有express的nodejs中的Tcp延迟ack

> ID：13882919
> 
> 赞同：5
> 
> 时间：2012-12-14T16:49:28.243
> 
> 标签：node.js, http, tcp, express, tcpdump

我正在对 nginx 进行压力测试，并使用 nodejs 后端。我发现keepalive有延迟。我从测试中删除了 nginx，我遇到了同样的问题。

我正在使用：

*   ApacheBench，版本 2.3
*   节点 v0.8.14。
*   Ubuntu 12.04.1 LTS
*   快递 3.0.3

源代码是：

```
var express = require('express');
var cluster = require('cluster');
var numCPUs = require('os').cpus().length;

if (cluster.isMaster) {
      for (var i = 0; i < numCPUs; i++) {
        cluster.fork();
      }

      cluster.on('exit', function(worker, code, signal) {
        console.log('worker ' + worker.process.pid + ' died');
      });
} else {
    var buffer = new Buffer(1048576);
    buffer.fill("a");
    var app = express();
    app.listen(8080);
    app.get('/test', function(req, res){
        setTimeout(function () {
            res.set('Content-Type', 'text/html');
            res.send(buffer.slice(0, req.query.size))
        }, req.query.delay);
    });
} 
```

没有keepalive的tcpdump示例：`ab -c 1 -n 10 -r "172.16.76.253:8080/test?size=1024&delay=100"`

```
10:58:59.403876 IP 172.16.180.47.57380 > 172.16.76.253.http-alt: Flags [P.], seq 1:122, ack 1, win 15, options [nop,nop,TS val 65479762 ecr 362284218], length 121
10:58:59.403961 IP 172.16.76.253.http-alt > 172.16.180.47.57380: Flags [.], ack 122, win 29, options [nop,nop,TS val 362284218 ecr 65479762], length 0
10:58:59.504631 IP 172.16.76.253.http-alt > 172.16.180.47.57380: Flags [P.], seq 1:146, ack 122, win 29, options [nop,nop,TS val 362284243 ecr 65479762], length 145
10:58:59.504890 IP 172.16.76.253.http-alt > 172.16.180.47.57380: Flags [FP.], seq 146:1170, ack 122, win 29, options [nop,nop,TS val 362284243 ecr 65479762], length 1024
10:58:59.505727 IP 172.16.180.47.57380 > 172.16.76.253.http-alt: Flags [.], ack 146, win 17, options [nop,nop,TS val 65479787 ecr 362284243], length 0
10:58:59.505741 IP 172.16.180.47.57380 > 172.16.76.253.http-alt: Flags [.], ack 1171, win 21, options [nop,nop,TS val 65479787 ecr 362284243], length 0 
```

ab结果：

```
Server Hostname:        172.16.76.253
Server Port:            8080

Document Path:          /test?size=1024&delay=100
Document Length:        1024 bytes

Concurrency Level:      1
Time taken for tests:   1.025 seconds
Complete requests:      10
Failed requests:        0
Write errors:           0
Total transferred:      11690 bytes
HTML transferred:       10240 bytes
Requests per second:    9.75 [#/sec] (mean)
Time per request:       102.530 [ms] (mean)
Time per request:       102.530 [ms] (mean, across all concurrent requests)
Transfer rate:          11.13 [Kbytes/sec] received

Connection Times (ms)
          min  mean[+/-sd] median   max
Connect:        1    1   0.1      1       1
Processing:   101  102   0.5    102     102
Waiting:      101  102   0.5    102     102
Total:        102  102   0.6    103     103
WARNING: The median and mean for the total time are not within a normal deviation
    These results are probably not that reliable.

Percentage of the requests served within a certain time (ms)
  50%    103
  66%    103
  75%    103
  80%    103
  90%    103
  95%    103
  98%    103
  99%    103
 100%    103 (longest request) 
```

带有 keepalive 的 tcpdump 示例`ab -c 1 -n 10 -k -r "172.16.76.253:8080/test?size=1024&delay=100"`

```
11:00:12.567741 IP 172.16.180.47.57385 > 172.16.76.253.http-alt: Flags [P.], seq 1306:1451, ack 10567, win 26, options [nop,nop,TS val 65498053 ecr 362302509], length 145
11:00:12.567761 IP 172.16.76.253.http-alt > 172.16.180.47.57385: Flags [.], ack 1451, win 50, options [nop,nop,TS val 362302509 ecr 65498053], length 0
11:00:12.668837 IP 172.16.76.253.http-alt > 172.16.180.47.57385: Flags [P.], seq 10567:10717, ack 1451, win 50, options [nop,nop,TS val 362302534 ecr 65498053], length 150
11:00:12.706745 IP 172.16.180.47.57385 > 172.16.76.253.http-alt: Flags [.], ack 10717, win 26, options [nop,nop,TS val 65498088 ecr 362302534], length 0
11:00:12.706765 IP 172.16.76.253.http-alt > 172.16.180.47.57385: Flags [P.], seq 10717:11741, ack 1451, win 50, options [nop,nop,TS val 362302544 ecr 65498088], length 1024
11:00:12.707901 IP 172.16.180.47.57385 > 172.16.76.253.http-alt: Flags [F.], seq 1451, ack 11741, win 26, options [nop,nop,TS val 65498088 ecr 362302544], length 0
11:00:12.708141 IP 172.16.76.253.http-alt > 172.16.180.47.57385: Flags [F.], seq 11741, ack 1452, win 50, options [nop,nop,TS val 362302544 ecr 65498088], length 0 
```

ab结果：

```
Server Hostname:        172.16.76.253
Server Port:            8080

Document Path:          /test?size=1024&delay=100
Document Length:        1024 bytes

Concurrency Level:      1
Time taken for tests:   1.361 seconds
Complete requests:      10
Failed requests:        0
Write errors:           0
Keep-Alive requests:    10
Total transferred:      11740 bytes
HTML transferred:       10240 bytes
Requests per second:    7.35 [#/sec] (mean)
Time per request:       136.073 [ms] (mean)
Time per request:       136.073 [ms] (mean, across all concurrent requests)
Transfer rate:          8.43 [Kbytes/sec] received

Connection Times (ms)
          min  mean[+/-sd] median   max
Connect:        0    0   0.3      0       1
Processing:   103  136  11.6    140     140
Waiting:      100  101   0.7    101     102
Total:        104  136  11.3    140     140

Percentage of the requests served within a certain time (ms)
  50%    140
  66%    140
  75%    140
  80%    140
  90%    140
  95%    140
  98%    140
  99%    140
 100%    140 (longest request) 
```

nodejs 在两个数据包中发送响应，一个带有标头，一个带有数据，并在第一个数据包后等待 ack。

我尝试设置 sysctl net.ipv4.tcp_slow_start_after_idle=0 && sysctl net.ipv4.route.flush=1，但没有任何效果。

当使用 keepalive 时，会有 40 毫秒的额外延迟。问题是：额外的 40ms 是什么时候来的？也许我做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T13:48:36.103

这是一个错误。它固定[在这里](https://github.com/joyent/node/commit/5a19c07)。

问题是[4415](https://github.com/joyent/node/issues/4415)

我更改`res.send(buffer.slice(0, req.query.size))`了`res.send(buffer.slice(0, req.query.size).toString())`作为此测试的解决方法。

# java - 通过Java在MySQL中插入文件文件路径

> ID：13882920
> 
> 赞同：1
> 
> 时间：2012-12-14T16:49:48.053
> 
> 标签：java, mysql, phpmyadmin

我的 java 程序从文本字段中收集文件路径：

```
pathField.getText(); 
```

并将结果插入我的数据库（phpMyAdmin）。但是，它似乎不包括反斜杠（）。EG - C:UsersSteveDesktop

数据库中的 FilePath 字段设置为“文本”。我已经`pathField.getText()`在一个`System.out`声明中测试了它，它用反斜杠打印。

```
Statement st = (Statement) conn.createStatement();

            String query_to_update = "INSERT INTO `evidence_db`.`mcases` ("
                    + "`PID`,"
                    + " `FilePath`) "
                    + "VALUES ("
                    + "DEFAULT,"
                    + " '" + pathField.getText() + "');";

            System.out.println("Query: " + query_to_update);

            int val = st.executeUpdate(query_to_update); 
```

请注意，我已经编辑了上面的代码，所以可能会有一些小错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T17:05:42.770

你应该使用准备好的语句来避免这种错误

```
public static void main(String args[]) {

  Connection con = null;
  PreparedStatement pst = null;
  ResultSet rs = null;

  try {

  Class.forName(driver);
  con = DriverManager.getConnection(connection);

  String sql =
  "select * from Employees where FirstName " + "in(?,?,?)";
  pst = con.prepareStatement(sql);

  pst.setString(1, "komal");
  pst.setString(2, "ajay");
  pst.setString(3, "santosh");

  rs = pst.executeQuery();
  System.out.println("EmployeeID\tFirstName");
  while (rs.next()) {
  System.out.print("  "+rs.getString(1));
  System.out.print("\t\t"+rs.getString(2));
  System.out.println("\t\t"+rs.getString(3));
  }

  } catch (Exception e) {
  System.out.println(e);
  }
  }
} 
```

所以在你的情况下

```
String query_to_update = "INSERT INTO `evidence_db`.`mcases` ("
                    + "`PID`,"
                    + " `FilePath`) "
                    + "VALUES (?,?);";

PreparedStatement pst=coneection.prepareStatement(query_to_update);
pst.setString(1,"DEFAULT");
pst.setString(2,pathField.getText());
pst.executeUpdate(); 
```

# ruby-on-rails - 如何用德语写黄瓜场景？

> ID：13882926
> 
> 赞同：1
> 
> 时间：2012-12-14T16:50:04.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cucumber, locale

对于我当前的项目，我需要 Cucumber 场景使用德语。

有什么简单的方法可以代替：背景、场景、给定、何时、然后，以及......他们的德语翻译？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T17:02:27.597

只需添加`# language: de`到第一行。

[https://github.com/cucumber/cucumber/wiki/Spoken-languages](https://github.com/cucumber/cucumber/wiki/Spoken-languages)

# objective-c - 根据 frame.origin.y 对 UIView 的 NSMutableArray 进行排序

> ID：13882927
> 
> 赞同：6
> 
> 时间：2012-12-14T16:50:11.343
> 
> 标签：objective-c, ios, uiview, nsarray, sorting

我想根据它们的 frame.origin.y 对 UIViews 的 NSMutableArray 进行排序，我希望以 y 为第一的最低视图等。这可能是 2 个 UIViews 具有相同来源的情况。有没有现成的方法呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-14T16:58:06.637

`NSMutableArray`有几种排序方法。选择其中一个，实现排序选择器、块或函数并比较`y`值。下面是一个使用块的例子：

```
NSComparator comparatorBlock = ^(UIView *obj1, UIView *obj2) {
    if (obj1.frame.origin.y > obj2.frame.origin.y) {
        return (NSComparisonResult)NSOrderedDescending;
    }

    if (obj1.frame.origin.y < obj2.frame.origin.y) {
        return (NSComparisonResult)NSOrderedAscending;
    }
    return (NSComparisonResult)NSOrderedSame;
};

[array sortUsingComparator:comparatorBlock]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-07T06:16:24.943

虽然这不是 frame.origin.y，但您也可以通过使用 SortDescriptor 并将 layer.position.y 作为键来执行此操作。

```
[array sortedArrayUsingDescriptors:@[[[NSSortDescriptor alloc] initWithKey:@"layer.position.y" ascending:YES]]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-08T10:27:53.393

这就是你在 Swift 中的做法：

```
listOfViews.sortInPlace { CGRectGetMinY($0.frame) < CGRectGetMinY($1.frame) } 
```

就是这样 :-) 我对 Swift 的爱 :-)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-14T16:52:40.577

您可以使用获取子视图数组

```
yourView.subviews 
```

然后您可以遍历每个并检查每个 frame.origin.y 并进行编码

# ruby-on-rails - ruby-on-rails 中的分页

> ID：13882928
> 
> 赞同：0
> 
> 时间：2012-12-14T16:50:22.510
> 
> 标签：ruby-on-rails

我最近开始学习 ruby​​-on-rails，现在我已经到了可以创建一些东西但仍然对语法不太熟悉的地步。

今天我一直在研究分页，所以你可以看到我想每页显示 15 个项目，所以现在这很好用：

```
<% (0..@items_count).step(15) do |i| %>
     <li class="<%='active' if params[:offset].to_i == i%>"><%= link_to i/15+1, items_path(:offset => i) %></li>
<% end %> 
```

这是我卡住的部分：

```
<% (0..@items_count).step(15) do |i| %>
     <li class="<%='active' if params[:offset].to_i == i%>"><%= link_to i/15+1, items_path(:offset => i, :age => 10) %></li>
<% end %> 
```

我正在尝试在偏移量之外传递一些额外的参数，但由于语言技能限制（从我这边）而无法做到

所以目前我的链接看起来像这样：

```
http://localhost:3000/items?offset=20 
```

但我的观点是与多个参数有这样的链接：

```
http://localhost:3000/items?offset=20&age=10 
```

但不仅仅是一个，而是 n 个参数

**解决方案 ：**

感谢Yoshiji先生提供答案。我试图直接用`:age => "params[:age]"`

但这有效：

```
:age=> "#{params[:age]}" 
```

应用于上述示例的逻辑：

```
<% (0..@items_count).step(15) do |i| %>
         <li class="<%='active' if params[:offset].to_i == i%>"><%= link_to i/15+1, items_path(:offset => i, :age => "#{params[:age]}") %></li>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T17:03:33.577

您可以在路径助手中传递更多属性：

```
items_path(:offset => i, :age => 10) 
# should generates an url with get params like following: 
/items?offset=12&age=10 # (assuming 'i' = 12) 
```

从[**APIdock.com #link_to**](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to)[上看到](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to)**的文档：**

 **```
link_to "Nonsense search", searches_path(:foo => "bar", :baz => "quux")
# => <a href="/searches?foo=bar&baz=quux">Nonsense search</a> 
```**

# string - 用于分析 URL 列表和带有黑名单字词的黑名单 URL 的算法

> ID：13882929
> 
> 赞同：2
> 
> 时间：2012-12-14T16:50:25.147
> 
> 标签：string, algorithm, machine-learning, spam

假设文本文件中有一个 URL 列表（以百万为单位），并且文本文件中有另一个列表，其中包含列入黑名单的单词。

我愿意对 URL 列表做如下处理。

```
- Parse the URLs and store them in some DS
- Process the URLs and blacklist those URLs which contain atleast one of the 
  blacklisted words.
- If there exists a URL containing 50% or more blacklisted words, add the other 
  words of that URL in the list of blacklisted words.
- Since now the blacklisted words list has been modified then it's probable 
  that the URLs which were not blacklisted earlier can get blacklisted now. So, 
  the algorithm should handle this case as well and mark the earlier whitelisted 
  URLs as blacklisted if they contain these newly added blacklisted words. 
```

最后，我应该有一个列入白名单的 URL 列表

有什么建议可以用来实现最有效的时间和空间复杂度解决方案的最佳算法和 DS 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:10:51.627

使用矩阵来存储 URL。

1.  [首先，通过Porter Stemmer](http://tartarus.org/martin/PorterStemmer/)将每个 URL 分解为单词，并将它们放入矩阵中（一个 URL 一行，一个单词一个项目）。

2.  然后使用[TFIDF](http://en.wikipedia.org/wiki/Tf%E2%80%93idf)对矩阵中的每个词进行评分，并删除低分词（它们将是流行词，如 'a'、'the' 等，对于判断垃圾邮件没有信息）。

3.  手动初始化黑名单（把一些常用的黑字放进去）。

4.  只需按照您给定的方式运行该过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:33:10.113

我将只回答这个问题的机器学习部分，并让数据结构/高效文本匹配的东西保持开放。

首先，如果不确定性是一个问题，您可以在更新之前使用给定版本的黑名单/分类器对数据进行完整的传递。这样，无论输入的顺序如何，您都会得到相同的答案。另一方面，我认为决定论不应该被看重。在机器学习中，随机梯度下降不是顺序不变的，但它在实践中表现良好，尤其是在大型数据集上。

其次，您可能想要小心使用直接的黑名单，除非您愿意手动过滤提议的候选术语（甚至可能仍然如此），并且可能想要使用更柔和的概率方法。朴素贝叶斯是可以合理工作的最简单的方法。例如，这可能会让您将有关伟哥的医学文章标记为非垃圾邮件，即使它包含垃圾邮件词，因为它来自非常受信任的主机（如 webmd）。

您可以使用您手动选择的黑名单术语来生成一组初始的带有负面标签的 URL。然后你可以想出另一组正标签（甚至可能从你的语料库中随机挑选，假设它大多是好的），并用它来训练一个初始的朴素贝叶斯分类器。[然后，您可以利用您的想法，通过进行半监督学习](http://matpalm.com/semi_supervised_naive_bayes/intro.html)，根据特定语料库上的分类器自己的输出来更改分类器。这将从一小部分初始标记文档中为您提供良好的学习/雪崩效果。

# c# - 当应用程序被 Windows Mobile 6.x 杀死时整理后台线程

> ID：13882931
> 
> 赞同：1
> 
> 时间：2012-12-14T16:50:32.177
> 
> 标签：c#, multithreading, windows-mobile, compact-framework

我正在开发一个在 Windows Mobile 6 上运行的 C# 应用程序，因此是 .NET Compact Framework。它使用后台线程来处理网络通信并保持 UI 空闲。

这些线程在对象内（作为另一个项目的一部分编写）。主应用程序实例化对象，并告诉他们开始连接。所有的线程控制都是由'connection'对象完成的。

当应用程序通过菜单退出时，它调用 connection.Stop() 方法，该方法告诉连接对象断开连接，释放其资源并关闭线程。这一切都很好，但是如果应用程序从任务管理器中被终止，或者通过从“正在运行的程序”下拉列表中点击“X”，则应用程序的主 GUI 会关闭，但这些对象已启动的线程不会。

使用设备上的第 3 方任务管理器，我可以看到“正在运行的应用程序”下没有应用程序的迹象，但它在“正在运行的进程”下以与应用程序相同的二进制文件列出。我尝试重新启动应用程序，然后它在屏幕上轻弹，然后再次关闭。

我如何捕捉应用程序关闭的事件，捕捉表单关闭不是我想要做的 - 无论如何，Closing 事件似乎都不会触发。

我在线程上设置了 isBackgroundWorker 但这没有效果。

如果我无法捕获正在关闭的应用程序，我将如何让线程检查应用程序的 UI 是否仍然存在，如果不存在则关闭。

**我在输入此内容时遇到了一些问题。如果主应用程序被杀死并且它的对象被释放，那么这些对象由主应用程序实例化。这会让这些线程陷入困境吗？我应该在“连接”对象的 onDispose 中清除它们吗？

*编辑*- 根据要求添加代码，这些是我认为相关的片段，应用程序很大。这是在主应用程序内

```
 public Connection = new Connection(id, server, port, onStatusChange);

    this.Connection.Start();

    onStatusChange is a delegate on the main app 
```

在连接对象中.. Connection.Start() 看起来像；

```
 public void Start()
    {
        //Since we can't check the thread state then we have to kill the existing thread
        Stop();
        //Should not be able to start a new thread if one is already running
        lock (this.pushLock)
        {
            ConnectionThreadStart = new ThreadStart(ConnectionThreadMethod);
            ConnectionThread = new Thread(ConnectionThreadStart);
            ConnectionThread.Name = "Connection";
            ConnectionThread.IsBackground = true;
            //Start the new thread
            this.start = true;
            ConnectionThread.Start();
        }
    }

    /// <summary>
    /// Method ran by the connection thread
    /// </summary>
    private void ConnectionThreadMethod()
    {
        //Take ownership of ConnectionThread until we exit
        lock (this.pushLock)
        {
            //Keep trying to connect until flag tells us not to
            while (this.start)
            {
              //establish and maintain connection
             }
         }
     }

    public void Stop()
    {
        //Indicate to thread that it should not continue running.
        this.start = false;
        //Attempt to close the socket on which the connection listens, this should cause it to fail with an exception
        try
        {
            Socket.Client.Close();
        }
        catch(Exception e)
        {
        }
        try
        {
            Socket.Close();
        }
        catch(Exception e)
        {
        }
        //If for some reason the thread is still going ask it to abort which, again, should cause it to throw an exception and exit
        try
        {
            ConnectionThread.Abort();
        }
        catch(Exception e)
        {
        }
        //Finally join the thread if it is still going and wait for it to exit. It will give up waiting after 10 seconds
        try
        {
            if (!ConnectionThread.Join(10000))
            {
                //The thread failed to stop, we can do no more, the thing is borken
            }
        }
        catch (Exception e)
        {
        }
    } 
```

因此，当应用程序正常退出时，我只需调用 Connection.Stop() 并关闭它。

进一步编辑；- 添加了这个..仍然没有像我预期的那样做。

```
 private bool disposed = false;

    //Implement IDisposable.
    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    protected virtual void Dispose(bool disposing)
    {
        if (!disposed)
        {
            if (disposing)
            {
                Stop();
            }
            disposed = true;
        }
    }

    ~Connection()
    {
        // Simply call Dispose(false).
        Dispose (false);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:51:51.167

如果应用程序通过任务管理器强行终止，则您的托管应用程序无法运行清理代码。它只是被终止了，无论它在做什么，它都停在它的轨道上。如果您可以看到它仍在运行，则可能是由于较低级别的驱动程序拒绝让步。如果没有看到这些线程在做什么，就不可能确定地知道。

如果您通过 WM“正在运行的进程”实用程序终止应用程序，我*相信*会在您的表单窗口中发布一条`WM_QUIT`消息，因此您确实有机会在退出前正确处理它并进行清理。

处理意外退出请求等意外事件应该做的是在`Application.Run()`. finally 块中的代码将在您的应用程序正常关闭时执行，因此是编写这些类型的清理例程的理想场所。

这是一些伪代码，描述了它的外观：

```
 try
        {
            //application startup code here//

            System.Windows.Forms.Application.Run(new YourMainForm());
        }

        catch (Exception x)
        {
            log.Fatal("FATAL application exception occurred.", x);
           //TODO: decide how to handle fatal exception. Feedback to user?

        }

        finally
        {
            try
            {
                //shut down application activities 
                //shutdown your connection object here                  
            }
            catch (Exception ex)
            {
                log.Error("A fatal error occurred while attempting to shutdown the application", ex);

            }
        } 
```

# javascript - 带有标签的 jQuery 滑块

> ID：13882932
> 
> 赞同：-2
> 
> 时间：2012-12-14T16:50:43.940
> 
> 标签：javascript, jquery, slider

我正在尝试创建一个应该相对容易的滑块，但我不确定是否必须手动构建它，或者是否有可以用于它的现有脚本。

滑块设计可以在[这里](http://imgur.com/y8g3V)看到。

我想我可以对顶部的文本和照片使用淡入/淡出效果，然后为下面的“标签”添加/删除一个活动类。

有没有关于我可以使用的预制脚本的建议，还是我别无选择只能手动执行？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T18:01:31.847

几天前我写了一个非常简单的解决方案，看看：[http ://cssdeck.com/labs/tabs](http://cssdeck.com/labs/tabs)

```
var menu = $('.menu'),
    tabs = menu.find('a'),
    panes = $('.tab_pane');

tabs.on('click', function() {
    var elem = $(this);

    if (!elem.hasClass('active')) {
        panes.stop(true, true).slideUp();
        tabs.removeClass('active');
        $(panes[elem.parent().index()]).slideDown();
        elem.addClass('active');
    }

}); 
```

# web-services - RESTful Web 服务中的 HttpSession 为空？

> ID：13882935
> 
> 赞同：0
> 
> 时间：2012-12-14T16:51:09.883
> 
> 标签：web-services, jersey, jax-rs, httpsession

在我的 web 服务类 using(jersey)中，`@Context`我注入了用于身份验证的对象，我称之为servlet。`HttpServletRequest``HttpServletResponse``ServletContext``ValidateUser`

```
@Path("/server")
public class WebServer { 
    @Context 
    private ServletContext context; 

    @Context
    private HttpServletRequest request;

    @Context
    private HttpServletResponse response;

    @POST
    @Path("/auth")
    @Consumes(MediaType.APPLICATION_JSON)
    public Response createTrackInJSON(Track track) throws IOException, ServletException{ 
    ....
    context.getRequestDispatcher("/ValidateUser")include(request, response);
    ...
    }        
} 
```

在 ValidateUser.java 中，我在验证后创建了会话：

```
HttpSession session = request.getSession(true); 
```

到目前为止一切正常，但是当我打电话时：

```
HttpSession session = request.getSession(false);
session.invalidate(); 
```

在注销 Servlet 会话中是`null`. 我知道 RESTful Web 服务是无状态的，但我需要在服务器端维护会话有什么办法可以实现吗？`@PerSession`注释呢？在这种情况下会有用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:59:15.497

以下是调试会话的一些方法：

*   您能看到在您的客户端上创建的会话 cookie 吗？
*   你确定你没有使用多个前端吗？也许您需要将会话持久化到数据库？
*   会话是否已超时？验证调用和注销之间可能需要很长时间吗？

> @PerSession 注释呢？在这种情况下会有用吗？

将`@PerSession`使用相同的基础会话信息。我不认为它会解决你的问题。

# wordpress - 关于元值的 Wordpress 查询帖子

> ID：13882936
> 
> 赞同：0
> 
> 时间：2012-12-14T16:51:13.983
> 
> 标签：wordpress

我在使用查看与帖子关联的元值的自定义搜索脚本时遇到问题。

```
 <?php
 $gender = $_POST['gender'];
 $eyes = $_POST['eyes'];

 if ($eyes == "{empty}") {$eyes = "%%";} 
 if (($gender == "either") || (empty($gender))) {$gender ="%%";}
 $args = array(
 'meta_query'=> array(
 array(
 'key'=>"Eyes",
 'value'=> "$eyes",
 ),
 array(
 'key' => "Gender",
 'value'=> "$gender",
 )
 ));
 query_posts($args);
 ?> 
```

我目前只有一个帖子，即 Gender-Female 和 Eyes-Green。

如果变量设置为女性，绿色将显示帖子。但是，如果 Gender 设置为任一或留空，它将不起作用。似乎我的通配符不起作用。

我尝试过很多不同的方法，但没有运气。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T18:16:45.923

代替 ：

```
array( 
 'key'=>"Eyes",
 'value'=> "$eyes",
 ), 
```

和

```
array(array( 
 'key'=>"Eyes",
 'value'=> "$eyes",
 )), 
```

# java - ResultSet 的最大可识别提取大小是多少

> ID：13882941
> 
> 赞同：3
> 
> 时间：2012-12-14T16:51:24.303
> 
> 标签：java, sql, jdbc, resultset

如标题所述，Java`ResultSet`对象可识别的最大大小是多少？特别是[setFetchSize](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#setFetchSize%28int%29)函数。

```
ResultSet results...;
results.setFetchSize(HUGE_VALUE); 
```

更重要的是，如果没有“最大值”，那么获取大小的限制因素是什么？

**评论**

> int 是数据类型，所以我想它会接受到 MAX_INT，其余的东西取决于驱动程序的实现。

尽管如此，这与我的问题几乎没有关系，我问的是什么是公认的，而不是我可以传递给它的。虽然这听起来像是分裂的头发，但这就是这个问题的本质。

**更新**

因为这似乎得到了一些“不是一个真正的问题”的密切投票。这是专门针对 Oracle JDBC 驱动程序的，`ojdbc14`. 正如有人在下面发布的那样，我正在撤回数亿的结果集，因此根据我的测试，30 或 200 远不是正确获取大小的正确答案。目前我的获取大小是`10,000,000`，但我无法验证数据库使用的大小为 1000 万。此外，我了解数据库提示的工作原理，根据我的经验，您通常可以让数据库使用您提供的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:24:48.620

我怀疑该`setFetchSize()`方法没有按照您的想法进行，建议您仔细阅读以下两篇文章，并在使用 10,000,000 之类的值之前进行一些认真的分析。 [本文](http://blog.fatalmind.com/2010/01/29/oracle-jdbc-prefetch-portability/)解释了 JDBC 如何`setFetchSize`等同于 Oracle 的预取功能。它还演示了如何设置一些简单的分析来检查不同提取大小的影响。 [这篇文章](http://docs.oracle.com/cd/E14072_01/java.112/e10589/oraperf.htm#CHDHDADD)（由第一篇链接）解释了预取没有最大值（除了我假设 MAX_INT），但警告不要使用远大于几百的值。第二篇文章还提到了以下内容，进一步证实了 setFetchSize 和 prefetching 之间的联系：

> 不要在您的应用程序中混合使用 JDBC 2.0 提取大小应用程序编程接口 (API) 和 Oracle 行预取 API。您可以使用其中一种，但不能同时使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T22:05:38.720

这是对数据库的提示。有些人甚至可能不会使用这个提示。其他人可能允许一个非常大的值，直到 int 数据类型限制。然而，大多数人会接受这个提示，直到最大的合理值。请记住，此数字越大，处理结果时需要使用的内存就越多。

这只是好奇还是您打算将其设置为您的数据库最大获取大小？如果是后者，我强烈建议您反对。相反，正确的一些测试和性能测试基于不同的 fetch size 提示。在某些数据库中，30 可能是最佳的，而 200 会使处理速度更慢。正确的数字还取决于行的大小或任何 blob 数据等。

所以，一个更好的问题可能是——在这个特定数据库上，这个查询的最佳获取大小是多少，答案是尝试它们并测量性能。

# jquery - 单击任何链接几秒钟后如何在jquery中执行任何功能

> ID：13882945
> 
> 赞同：0
> 
> 时间：2012-12-14T16:51:26.537
> 
> 标签：jquery, struts2-jquery

我有 struts2 jquery 网格，在单击一行时，我正在调用一个 jQuery 函数来执行 struts2 操作。我的代码运行良好。

我想在延迟几秒钟后执行我的 jQuery 函数。我怎样才能做到这一点？

```
 <script type="text/javascript"> 
 //assume this code is working fine on rowselect from my jquery grid, New Updation in it is "i want to execute or load the url  after few seconds"
     $(function(){
            $.subscribe('rowselect', function(event,data) {
                var param = (event.originalEvent.id);  
                $("#myAdvanceDivBoxx").load('<s:url action='InsertbooksToSession' namespace='/admin/setups/secure/jspHomepage/bookstransaction'/>'+"?bid="+event.originalEvent.id);  
            });  
     }); 
</script> 
```

**我尝试的是以下代码**，但无法获得我正在寻找的输出：

```
 <script type="text/javascript">  
 $(function(){
        $.subscribe('rowselect', function(event,data) {
            var param = (event.originalEvent.id);  
            $("#myAdvanceDivBoxx").load('<s:url action='InsertbooksToSession' namespace='/admin/setups/secure/jspHomepage/bookstransaction'/>'+"?bid="+event.originalEvent.id);  
        }).delay(9000);  
 }); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:01:26.873

仅`delay`用于某些动画/效果，例如：

```
$("div.first").slideUp(300).delay(800).fadeIn(400); 
```

[**jQuery 延迟**](http://api.jquery.com/delay/)

--

这应该可以完成工作，只需使用`setTimeout`（[**docs**](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)），看看是否对您有帮助。

```
$.subscribe('rowselect', function(event,data) {
     var param = (event.originalEvent.id);  
     setTimeout(function(){
          $("#myAdvanceDivBoxx").load('<s:url action='InsertbooksToSession' namespace='/admin/setups/secure/jspHomepage/bookstransaction'/>'+"?bid="+event.originalEvent.id);  
     }, 9000);
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:55:15.317

delay 推迟了链接在它之后的函数。

[http://api.jquery.com/delay/](http://api.jquery.com/delay/)

你只需要一个久经考验的真实 setTimeout。

[https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

# sql - 播放 Anorm 和 SQL 连接

> ID：13882947
> 
> 赞同：3
> 
> 时间：2012-12-14T16:51:33.900
> 
> 标签：sql, playframework-2.0, anorm

Play 2.0 in Scala with anorm 框架提供了两种与数据库交互的方法：

```
def withConnection[A](name: String)(block: Connection => A): A = {
    val connection = new AutoCleanConnection(getConnection(name))
    try {
      block(connection)
    } finally {
      connection.close()
    }
  }

  /**
   * Execute a block of code, in the scope of a JDBC transaction.
   * The connection and all created statements are automatically released.
   * The transaction is automatically committed, unless an exception occurs.
   *
   * @param name The datasource name.
   * @param block Code block to execute.
   */
  def withTransaction[A](name: String)(block: Connection => A): A = {
    withConnection(name) { connection =>
      try {
        connection.setAutoCommit(false)
        val r = block(connection)
        connection.commit()
        r
      } catch {
        case e => connection.rollback(); throw e
      }
    }
  } 
```

我现在很清楚，每次调用 withConnection 时都会获取并关闭连接。

为什么这两种方法每次都创建和关闭连接？这不是一个昂贵的过程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-24T12:55:09.577

em...没有问题，因为我们可以从连接池中检索连接。所以 close() 方法只是将连接返回到池中，而不是实际关闭。

# regex - 正则表达式匹配（如果存在）

> ID：13882951
> 
> 赞同：0
> 
> 时间：2012-12-14T16:51:57.880
> 
> 标签：regex

我怎样才能写一个reg exp来做：

```
"SomeString" # Match the string
`SomeString Bonus_string" # Match "SomeString" AND "Bonus_string" 
```

基本上我想匹配一个字符串，如果它存在，但如果它不存在仍然匹配其他的......

我希望这只是一个小小的改变。这是我到目前为止的进展：[http ://rubular.com/r/4YRagwSuTN](http://rubular.com/r/4YRagwSuTN)

以供参考：`(.+)(?:| .+)`

我有一种感觉，我必须`*`在某个地方放一个..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:01:03.090

终于想通了...

```
(\w+)( \w+)* 
```

[http://rubular.com/r/VSRDMrOYlN](http://rubular.com/r/VSRDMrOYlN)

# javascript - 使用 JQuery 或 Javascript，如何绑定 click 函数来控制元素/div 的滚动？

> ID：13882954
> 
> 赞同：0
> 
> 时间：2012-12-14T16:52:22.627
> 
> 标签：javascript, jquery, scroll, scrollbar, mouse

使用 JQuery 或 Javascript，如何绑定 click 函数来控制元素/div 的滚动？我想添加按钮来控制 div 的垂直滚动而不改变定位或边距？先感谢您！

现在我隐藏了滚动条，我只能使用鼠标滚轮滚动，我需要添加另一个功能，以防用户在移动设备上或鼠标上没有滚轮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T17:02:31.823

```
$(".up-button").on('click', function () {
   $("#containing-div").animate({scrollTop: '-=20px'});
}); 
```

因为`.down-button`你会使用`+=20px`

[http://jsfiddle.net/Yyw7Z/](http://jsfiddle.net/Yyw7Z/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:59:21.440

看看jQuery api，他们有[`scrollTop()`](http://api.jquery.com/scrollTop/)

# ruby - 减少哈希值

> ID：13882956
> 
> 赞同：38
> 
> 时间：2012-12-14T16:52:35.700
> 
> 标签：ruby, hash, reduce

我在使用 reduce 的语法时遇到问题。我有以下格式的哈希：

```
H = {"Key1" => 1, "Key2" => 2} 
```

我想使用 reduce 来查找此函数中值的总和。

就像是

```
H.reduce(0) {|memo, elem| memo+=elem} 
```

我知道这是错误的。我不明白如何使 elem 成为哈希值。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-12-14T17:17:54.967

您可以`elem`通过将其拆分为 2 个变量来包含该值：

```
H.reduce(0) {|memo, (key, val)| memo + val} 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-12-14T16:58:49.957

如果哈希恰好为空，请使用[`Enumerable#reduce`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-reduce)，如果您可以获取：`nil`

```
H.values.reduce(:+) # => 3
Hash.new.values.reduce(:+) # => nil 
```

要`0`在哈希为空时安全地获取，请使用：

```
H.values.reduce(0) { |sum,x| sum + x } # or...
H.reduce(0) { |sum,(key,val)| sum + val } # ...if you need to inspect the key 
```

这是一个快速的基准测试。请注意，仅减少值而不是键/值对中的值似乎稍微快一些：

```
 user     system      total        real
H.values.reduce(:+)        4.510000   0.080000   4.590000 (  4.595229)
H.values.reduce(0) {...}   4.660000   0.080000   4.740000 (  4.739708)
H.reduce(0) {...}          5.160000   0.070000   5.230000 (  5.241916) 
```

```
require 'benchmark'

size = 1_000
hash = Hash[* Array.new(size*2) { rand } ]

N=10_000
Benchmark.bm(24) do |x|
  x.report('H.values.reduce(:+)')      { N.times { hash.dup.values.reduce(:+) } }
  x.report('H.values.reduce(0) {...}') { N.times { hash.dup.values.reduce(0) { |sum,x| sum + x } } }
  x.report('H.reduce(0) {...}')        { N.times { hash.dup.reduce(0) { |sum,(_,v)| sum + v } } }
end 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-14T16:58:43.903

试试这个：

```
H.reduce(0) { |memo, elem| memo += elem[1] } 
```

或者

```
H.reduce(0) { |memo, (key, value)| memo += value } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-29T21:28:42.160

我知道我正在挖掘这个，但如果你碰巧使用 Rails，该[`.sum`方法](http://apidock.com/rails/v4.2.1/Enumerable/sum)会有所帮助：

```
H = {"Key1" => 1, "Key2" => 2}
=> {"Key1"=>1, "Key2"=>2}
> H.values.sum
=> 3 
```

优点是它返回`0`空哈希：

```
> {}.values.sum
=> 0
> {}.values.reduce(:+)
=> nil 
```

我注意到它是特定于 Rails 的，只有在输入这个答案之后。我知道 OP 没有添加 Rails 标签，但我认为它可能对路过的人有用。

请注意，从 Ruby 2.4.0 开始，[`.sum`现在可以使用](https://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-sum).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T16:56:26.610

```
h = {"Key1" => 1, "Key2" => 2}

h.values.inject(0){|f,v| f += v.to_i }
# => 3 
```

或者

```
h.values.inject(:+)
# => 3 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-02T18:47:17.960

在复杂散列的情况下，首先将其映射到值数组可能更容易，然后减少：

```
values = H.map do |k, v|
    # some complex logic here
end
values.reduce(:+) 
```

或者`values.reduce(0, :+)`如果数组可能为空。

# java - Dropwizard中的Java复杂验证？

> ID：13882958
> 
> 赞同：3
> 
> 时间：2012-12-14T16:52:41.570
> 
> 标签：java, json, validation, jax-rs, dropwizard

我想在 REST 端点上接受 JSON 并将其转换为正确的类型以便立即验证。

端点如下所示：

```
@POST
public Response createCar(@Valid Car car) { 
    // persist to DB
    // ... 
} 
```

但是有很多 Car 的子类，例如 Van、SelfDrivingCar、RaceCar 等。我如何才能在端点上接受不同的 JSON 表示，同时保持资源中的验证代码像这样简洁`@Valid Car car`？

再次：我发送 JSON 格式（这里，它是 Car 的一个子类的表示，即 SelfDrivingCar）：

```
{ 
    "id" : "t1",                      // every Car has an Id
    "kind" : "selfdriving",           // every Car has a type-hint
    "max_speed" : "200 mph",          // some attribute
    "ai_provider" : "fastcarsai ltd." // this is SelfDrivingCar-specific
} 
```

我希望验证机制查看`kind`属性，创建适当子类的实例，例如`SelfDrivingCar`并执行验证。

我知道我可以为所有类型的汽车创建不同的端点，但这似乎并不干燥。而且我知道我可以使用实数`Validator`而不是注释并手动完成，所以我只是问是否有一些优雅的捷径可以解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T16:59:27.803

提取正确的多态类型并对其进行验证不是您的验证框架的责任。事实上，当验证开始时，对象*已经被创建了*。它只能使用它当时拥有的东西。但请注意：

```
public Response createCar(@Valid Car car) {
    // ...
} 
```

将在“汽车”的实际运行时类型上调用验证。所以很明显你想要做的是确保`car`变量在运行时绑定到正确的类型。这是您的***反序列化框架***的责任。您需要确定使用应用程序中使用的 JSON 库的正确方法，但对于 Jackson，您将使用 @JsonTypeInfo 注释来确定多态类型的范围。

```
@JsonTypeInfo(use=Id.NAME, include=As.PROPERTY, property="kind")
public class Car implements Serializable {
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-17T07:43:25.683

使用 DW 0.7.1

在我的情况下，我有一个自定义用户类，我在那里添加：

```
@ValidationMethod(message="user_name is null or empty")
public boolean isUserName() {       
    if (Strings.isNullOrEmpty(user_name)) {
        return false;
    } else {
        return true;
    }
} 
```

现在使用了@Valid，我在测试中得到了一个 javax.validation.ConstraintViolationException --> @Test(expected=javax.validation.ConstraintViolationException.class)

# timer - 需要帮助在 Python 中创建计时器

> ID：13882959
> 
> 赞同：0
> 
> 时间：2012-12-14T16:52:41.257
> 
> 标签：timer

我一直在尝试一个计时器，它一直打印 0，我不知道如何修复它

```
 import time
    x=time.time
    y=time.time
    z=0
    b=2
    while b<10000:
        print b
        b=b+10
    z=x-y
    print z 
```

我认为我一直得到 0 的原因是因为我正在做 xy 但如果我只是离开它并打印 x 或 y 它会出现完全错误的事情。谁能告诉我如何进行这项工作，所以最后它会打印程序运行了多长时间，假设 while 循环需要 20 秒，它应该打印 20 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:04:32.470

您的代码在 3 行创建后永远不会更新 y 变量。在循环之后放置“y=time.time()”行。

实际上你不需要计时器，你需要程序运行时计算。看看 -[你如何在 python 中计算程序运行时间？](https://stackoverflow.com/questions/5622976/how-do-you-calculate-program-run-time-in-python)

PS您的示例在语法上不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T13:36:15.247

修复示例中的逻辑和语法：

```
import time
x = time.time()
b = 2
while b<10000:
    print b
    b = b+10
y = time.time()
z = x-y
print z 
```

将给出所需的输出。更好的是：

```
import timeit
start = timeit.default_timer()

b = 2
while b<10000:
    print b
    b = b+10

stop = timeit.default_timer()
print stop - start 
```

# c# - asp.net 重写一个选择渲染代码

> ID：13882960
> 
> 赞同：-1
> 
> 时间：2012-12-14T16:52:43.573
> 
> 标签：c#, asp.net

我怎样才能使这段代码更好更短？

```
<select id="products" name="products" multiple="multiple">
        <% foreach (var item in Model.Products){%>
        <option value="<%= item.Id%>" 
         <% if (item.isAvailable)
            {
              response.write("selected='selected'");
            }
          %> >
           <%= item.Name%>
         </option>
        <% } %>
    </select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:23:25.507

你不需要`response.write`这里：

```
<option value="<%= item.Id%>" <% if (item.isAvailable) { %> selected="selected" <% } %>><%= item.Name%></option> 
```

# c - 将递归函数更改为非递归函数

> ID：13882961
> 
> 赞同：1
> 
> 时间：2012-12-14T16:52:50.743
> 
> 标签：c, recursion

我在下面有一个函数，它是递归的，因为它最后会调用自己，但是如何将它更改为非递归？

```
int ACR(int q, int*a, int n, int i){
    if(i>=n){
        return 0;
    }
    else{
        if(a[i] == q){
            return 1;
        }
        else{
            return ACR(q,a,n,i+1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:55:30.950

您可以改用循环

```
int ACR(int q, int*a, int n, int i){
    int j;
    for (j=i; j<n; j++) {
        if (a[j] == q) {
            return 1;
        }
    }
    return 0;
} 
```

对迭代版本的每次调用都会`ACR`测试数组的单个元素是否`a`与`q`. 如果我们在没有匹配的情况下到达数组的末尾，我们返回 0。很容易将其转换为循环。

请注意，`i`如果您总是想搜索整个数组（即从索引 0 开始），则可能不再需要作为参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T17:05:21.770

看起来它在索引 i 和 n 之间的 a 中搜索 q，排他性的。

它会是这样的：

```
int ACR(int q, int*a, int n, int i) {
    int count;
    for(count =i ; count<n; count++)
         if(a[count] == q)
            return 1;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T16:57:48.283

试试这个，这是我能想到的最短方法：

```
int ACR(int q, int*a, int n, int i) {
    while (i < n && a[i] != q) i++;
    return i < n ? 1 : 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T19:46:25.490

你为什么要改变它？（我想这是一个练习......）

这里有一些有趣的东西：

递归版本（你的，括号更少）：

```
$ cat acr.c
int has(int q, int*a, int n, int i) {
  if (i >= n)
    return 0;
  else if (a[i] == q)
    return 1;
  else
    return has(q,a,n,i+1);
} 
```

迭代版本（我的，但与其他版本类似）：

```
$ cat aci.c
int has(int q, int* a, int n, int i) {
  for (; i < n; ++i)
    if (a[i] == q) return 1;
  return 0;
} 
```

将两者编译为汇编代码并进行比较：

```
$ diff <(gcc-4.7 -std=c99 -S -o - -O3 acr.c) <(gcc-4.7 -std=c99 -S -o - -O3 aci.c)
1c1
<       .file   "acr.c"
---
>       .file   "aci.c"
9,10c9,10
<       cmpl    %ecx, %edx
<       jle     .L5
---
>       cmpl    %edx, %ecx
>       jge     .L5 
```

所以重写恰好改变了一个微不足道`n ≤ i`的细节：一个检查和另一个检查`i ≥ n`。（哦，源文件的名称不同。）

这是相同的测试，带有铿锵声：

```
$ diff <(clang -std=c99 -S -o - -O3 acr.c) <(clang -std=c99 -S -o - -O3 aci.c)
1c1
<       .file   "acr.c"
---
>       .file   "aci.c"
12c12
< .LBB0_1:                                # %tailrecurse
---
> .LBB0_1:                                # %for.cond
17c17
< # BB#2:                                 # %if.else
---
> # BB#2:                                 # %for.body 
```

Clang 在汇编代码中加入了不同的注释。哦，文件名仍然不同。

# php - 内部连接数组结果与另一个表 id、名称

> ID：13882962
> 
> 赞同：0
> 
> 时间：2012-12-14T16:53:02.340
> 
> 标签：php, mysql, arrays, join, foreach

是否可以获取数组的结果并将其与另一个表 ID 连接以输出 ID 的名称？

这是数组的输出： `Array ( [0] => 3 [1] => 1 [2] => 2 )`

这是mysql：

```
SELECT * 
FROM 
    meet 
    INNER JOIN location 
    ON meet.meetLoc = location.locID 
    LEFT JOIN team ON meet.meetTeams = team.teamID 
ORDER BY meetDate ASC 
```

这是 PHP，但是，当我需要“Bob : Sally : Sue”时，它只输出“3 : 1 : 2”：

```
$teams = explode(", ", $row_rsCurMeet['meetTeams']);
$tmp = array();
foreach ($teams as $team)
$tmp[] = $team;
echo implode('&nbsp;&nbsp;:&nbsp;&nbsp;',$tmp); 
```

我也试过这个，但它返回“鲍勃：鲍勃：鲍勃”

```
$team_id = $row_rsCurMeet['teamID'];    
$team_name = $row_rsCurMeet['teamName'];
$team = $row_rsCurMeet['teamName'];
$teams = explode(", ", $row_rsCurMeet['meetTeams']);
foreach ($teams as $key => $value) {
$key = $team_id;
$value = $team_name;
print_r ($value);
} 
```

有什么想法吗？我的头因为撞墙而疼。谢谢！

```
SAMPLE DATA

Table meet             Table  team
meetID  meetTeams      teamID   teamName
1        3, 1, 2         1      Sally
2        2, 3, 1         2      Sue
3        1, 3, 2         3      Bob 
```

请忽略位置信息，因为这不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:38:39.613

您的第一个问题是，如果您希望能够真正将会议与团队联系起来，您需要进行架构更改。在 meet.meetTeams 中具有类似的值`1,2,3`会阻止您在团队表上进行有意义的联接。

因此，我的建议是您`meet.meetTeams`完全删除该列以支持具有`meetTeams`这样结构的新表（或任何您想调用的名称）

```
meetId    teamID
------    ------
  1         1
  1         2
  1         3
  2         1
  2         2
  2         3
etc. 
```

然后你会像这样查询：

```
SELECT * 
FROM 
    meet 
    INNER JOIN location 
    ON meet.meetLoc = location.locID 
    INNER JOIN meetTeams
    ON meet.meetID = meetTeams.meetID
    INNER JOIN team
    ON meetTeams.teamID = team.teamID 
ORDER BY meet.meetDate ASC 
```

如果您真正需要做的只是列出会议和团队，您可能可以从查询中删除位置表。您还可以通过不执行`SELECT *`并仅返回您需要的字段来限制返回的字段。

现在您可能需要获取结果集并将其读入一个多维数组，`meetID`作为第一维。这很容易做到。它可能看起来像这样：

```
$meet_array = array()
while ($row = [YOUR PHP TO RETRIEVE ROW ARRAY FROM RESULT SET]) {
   $meet_array[$row['meetID']] = $row;
}

foreach ($meet_array as $meet_id => $meet_data) {
    echo 'Meet ID: ' . $meet_id . ' <br />';
    foreach ($meet_data as $data) {
        echo 'Team ID: ' . $data['teamID'] . ', Team Name: ' . $data['teamName'] . ' : ';
    }
    echo '<br />';
} 
```

# visual-studio-2010 - 如何在 MVC3 解决方案中跨区域引用 javascript？

> ID：13882964
> 
> 赞同：1
> 
> 时间：2012-12-14T16:53:11.573
> 
> 标签：visual-studio-2010, javascript, projects-and-solutions

给定这样的解决方案结构：

```
/solution
 / client app
   / Company.Client.WebClient
     / scripts
       / libs
         / some_lib.js
     / web.config <--included for reference to indicate heirarchy
 / libraries included
 / libraries included
 / widgets
   / area1
   / area2
   / area3
     / resources
       / scripts
         / my_file.js 
```

并且给定包括：
* MvcContrib（用于区域支持）和 MVC3，
* VS2010，
* 没有安装特定的 javascript 辅助插件（如果这些是这里的答案）

我怎样才能`<reference>`在我的顶部包含一行，`my_file.js`以便我可以对 ? 中的函数名称进行智能感知`some_lib.js`？

我已经尝试过`/// <reference path="../../../Company.Client.WebClient/scripts/lib/some_lib.js" />`了，但这似乎并不适合我想要的。（即没有智能感知）

那么我做错了什么？引用如何跨区域和项目进行这样的工作，或者确实如此？我唯一的选择是在每个区域中包含一个副本（浪费吗？我可以在 Windows 中使用“快捷方式”来避免将它复制到我需要的每个子目录吗？）？

# c++ - Qt5 无法在 Windows 8 上编译

> ID：13882967
> 
> 赞同：1
> 
> 时间：2012-12-14T16:53:18.400
> 
> 标签：c++, qt, mingw

我是第一次下载QT。我安装了新的 5.0RC2 SDK。我创建了一个新项目并将编译器设置为 mingw `C:\MinGW\bin\gcc.exe` [http://doc.qt.digia.com/qtcreator-2.4/creator-tool-chains.html](http://doc.qt.digia.com/qtcreator-2.4/creator-tool-chains.html)

但是如果我尝试编译它，我会收到大量看起来像这样的错误消息

```
C:\Qt\Qt5.0.0-rc2\Tools\QtCreator\bin\GL\main.cpp:8: error: undefined reference to `_imp___ZN7QWidget4showEv' 
```

我还将套件中的编译器设置为 mingw 并将设备类型设置为桌面。

任何想法出了什么问题？

编辑：

好的，我可能知道问题所在。[http://qt-project.org/downloads](http://qt-project.org/downloads) QT5 仅适用于 vs2010。（有点隐藏）。我只是为mingw尝试QT 4.8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:14:37.053

尝试在 .pro 中添加这一行

```
 CONFIG(release, debug|release): LIBS += "C:\\Qt\\4.8.3\\lib\\QWidget4.a" 
```

替换你的lib文件夹的路径。并`QWidget4.a`来自错误所说的类似错误，并且在 lib 文件夹中可用。

这只是一个建议。试试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T16:38:42.987

As you discovered yourself, Qt5.0.0 is currently only released for VS2010 on Windows. There are some problems with compiling the webkit component for MinGW. If you can live without Webkit (embedded browser) you can compile it yourself (I just did that on a fresh Win8 install for both 64bit and 32bit MinGW). All of this requires a bit of very 'Unixy' fiddling that not all Windows users may feel up to - but, heck, you want to use MinGW instead of MSVC anyway!.

Since Stackoverflow will not allow me to post more than one link, I posted my recipe here: [http://silmor.de/qtstuff.qt5mingw.php](http://silmor.de/qtstuff.qt5mingw.php)

# javascript - SQLite 和 JS - 确定事务何时完成

> ID：13882970
> 
> 赞同：2
> 
> 时间：2012-12-14T16:53:27.863
> 
> 标签：javascript, html, sqlite, transactions

这是我的第一篇文章，但我现在已经为这个解决方案搜索了很多，但我仍然找不到答案。我认为自己是一名 JavaScript 开发新手，所以我希望有人能指出我做错了什么。

我正在使用 HTML5 开发 iPhone 游戏。我想要发生的是，每当我在游戏中死去时，它应该用新分数更新数据库，然后跳转到新页面（分数屏幕）。

我有一个游戏类（使用“类”这个词，因为没有更好的词），它调用更新方法，然后在事务完成后调用 showScoreScreen 函数（关闭当前页面）的*回调*。唯一的问题是它没有等待足够长的时间来完成交易并且我的分数没有更新。

如果我在其中添加一些代码以等待 1 秒，然后再跳转到分数屏幕，那么一切正常。因此，要么是我的回调在事务完成之前实现，要么我的回调没有正确实现（很可能）。谁能指出我在这里做错了什么？这是我第一次使用 SQLite，但是经过数小时的文档阅读后，我似乎在做正确的事情。

供参考 -

-我尝试在成功处理程序而不是*finally*块中实现回调，但遇到了同样的问题。

- 我将“self”传递给*updateScore的原因是它在**setInterval*函数中更改为新的上下文

- 我在这个线程中发现了一个类似的问题，但没有真正的答案 - [SQLite Success Callback Fires Before Transaction Finishes](https://stackoverflow.com/questions/13568502/sqlite-success-callback-fires-before-transaction-finishes)

```
///////////////////////// GAME CLASS ///////////////////////////////////

endLevel: function(){

    var self = this;            
    self.setGameOver(true);

    // Wait until death animation has played
    var wait = setInterval(function() {
        if(self.canEndLevel){

            var score = self.getScore();
            self.updateScore(self);
            clearInterval(wait);
        }
    }, 200);                               
},

updateScore: function(self){
    //TODO: Get score and determine if higher
    self.dbConnection.updateScore(self.showScoreScreen);    
},

showScoreScreen: function(){

    window.location.href='./score.html?level=' + window.levelNo + '&score=' + 'S'                           
},

/////////////////////////////////////////////////////////////////

///////////////////// DBConnection Class //////////////////////////

updateScore: function(callback){            

    var sucessHandler = this.sucessHandler;
    var errorHandler = this.errorHandler;

    try{
        this.db.transaction(
            function (transaction) {        
                transaction.executeSql('update score set grade = "JAME444" where levelId = 1', [], sucessHandler, errorHandler);
            }
        );  
    }
    catch(e){}
    finally {
        callback();
    }
},
.
.

//////////////////////////////////////////////////////////// 
```

# windows-8 - Visual Studio 2012 Windows 应用商店 appmanifest.xml 设计器缺少项目

> ID：13882975
> 
> 赞同：1
> 
> 时间：2012-12-14T16:54:09.063
> 
> 标签：windows-8, visual-studio-2012, windows-store-apps

我正在使用 Visual Studio 2012 Premium 创建一个 Windows 商店应用程序。当我打开 Package.appxmanifest 设置应用程序的 toast 功能时，应用程序 UI 选项卡中的通知设置部分丢失。

在我的另一台机器上，在同一版本的 Visual Studio 中具有相同的项目，通知设置在设计器中正确显示。

我已经尝试卸载/重新安装 VS2012 以及 Windows 8 SDK。还是完全一样的。

任何想法，将不胜感激。

我还应该提到，我认为这是某种工具问题，就好像我创建了一个新的空白 Windows 商店应用程序一样，我也遇到了同样的问题。

# asp.net-mvc-3 - 如何在 MVC3 的共享布局中使用模型？

> ID：13882976
> 
> 赞同：0
> 
> 时间：2012-12-14T16:54:10.403
> 
> 标签：asp.net-mvc-3

我的“News_layout.cshtml”中有一个共享视图。我想显示数据库中的参数，所以我需要我的控制器进入数据库并将其返回到“News_layout”.cshtml。

我该怎么做，因为调用的控制器在用户访问的每个页面上总是不同的。有没有办法让控制器具有共享布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:02:32.063

您可以创建自己的 HTML 助手并在共享 lyout 中使用它

```
public static class MyHelpers
{
    public static string DoSomething(this HtmlHelper helper)
    {
         // Do stuff with your database here.
        return "Whatever";
    }
} 
```

然后在共享布局中：

```
@Html.DoSomething() 
```

我希望这足以让你开始？显然，您将需要修改我的代码以满足您的需求，但希望主要思想能为您实现。

# cocoa - 使 NSCollectionView 垂直渲染项目

> ID：13882977
> 
> 赞同：5
> 
> 时间：2012-12-14T16:54:11.260
> 
> 标签：cocoa, monomac, nscollectionview

是否可以使`NSCollectionView`渲染中的项目自上而下然后从左到右而不是从左到右然后自上而下？为了直观地描述它，项目当前按以下顺序呈现：

```
[ 1 ] [ 2 ] [ 3 ]
[ 4 ] [ 5 ] [ 6 ] 
```

我希望它们看起来像这样：

```
[ 1 ] [ 3 ] [ 5 ]
[ 2 ] [ 4 ] [ 6 ] 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:38:11.643

项目的显示顺序由它们在保存数据的数组中的顺序决定。如果将滚动更改为水平，您将获得所需的顺序，但如果您希望滚动保持垂直，则需要更改数组中对象的顺序。

要使滚动水平，请执行以下操作：

```
 flowLayout.scrollDirection = UICollectionViewScrollDirectionHorizontal; 
```

flowLayout 是对集合视图初始化时使用的 UICollectionViewFlowLayout 对象的引用（我假设您已经这样做了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-04T01:53:38.007

**是的，有一点需要注意。**

如果将*Scroll Direction*设置为*Horizo​​ntal*`NSCollectionView`将导致collection view 中的项目以列而不是行布局。

 *```
[ 1 ] [ 5 ] [ 9 ]
[ 2 ] [ 6 ]   |
[ 3 ] [ 7 ]   |
[ 4 ] [ 8 ]   V 
```

要在 Interface Builder 8 中执行此操作，请选择集合视图，打开*Attributes Inspector*并从弹出按钮中选择 Horizo​​ntal：

[![NSCollectionView 滚动方向设置](../Images/9207a297f09a8965127ef1d6729364a5.png)](https://i.stack.imgur.com/xapDH.png)

您还可以通过`scrollDirection`在集合视图的布局上设置属性来在代码中实现相同的效果。注意集合视图的布局需要`NSCollectionViewFlowLayout`

```
NSCollectionViewFlowLayout *flowLayout = [NSCollectionViewFlowLayout alloc] init];
flowLayout.scrollDirection = NSCollectionViewScrollDirectionHorizontal;

NSCollectionView *collectionView = [NSCollectionView alloc] init];
collectionView.collectionViewLayout = flowLayout; 
```

**需要注意的是，这与您对部分的期望不同。** 您可能希望部分在视图中展开，顺着屏幕向下流动，然后将项目布置在嵌套在每个部分中的列中。 **事实并非如此**。部分将成为垂直分隔符并拉伸视图的高度，并与项目一起在屏幕上布置，如下所示：

```
⌈s⌉ [ 1 ]  ⌈s⌉ [ 1 ] [ 5 ] 
|s| [ 2 ]  |s| [ 2 ] [ 6 ] 
|s| [ 3 ]  |s| [ 3 ] 
⌊s⌋        ⌊s⌋ [ 4 ] 
```*

# windows-installer - 如何配置 InstallShield 以删除已删除的文件

> ID：13882978
> 
> 赞同：0
> 
> 时间：2012-12-14T16:54:14.567
> 
> 标签：windows-installer, installshield, installshield-2009

所以基本上我们发布了一个恢复镜像，其中删除了一个文件，该文件作为我们 installshield 安装程序的一部分安装。

现在，当我们在缺少文件的安装之上进行安装时，我们有了软件更新，InstallShield 会尝试取消注册 exe 并给出错误消息。

该文件应该已从安装程序中删除，而不是手动删除，但现在我需要一种不显示此错误消息的方法，因为系统上不存在该文件。

我已经尝试从有问题的组件中删除文件，以及完全删除组件。在这两种情况下，仍然会出现错误消息。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T18:41:10.070

我能想到的一些选择...

1.  从原始安装创建补丁 (msp)。该补丁应更新取消注册 EXE 的自定义操作的条件。如果它通过 SelfReg 表注册/注销，则应通过从该表中删除相关条目来创建补丁。确保补丁在升级前执行。（引导程序 exe 可以做到这一点。）

2.  在“支持文件”部分拥有原始 exe，添加自定义操作以将其复制到原始文件夹并在“RemoveExistingProducts”操作之前安排自定义操作。对其进行调节，使其仅在升级时执行。

--贾格

# php - 我的 IF 语句正在更改 PHP 中的变量

> ID：13882980
> 
> 赞同：2
> 
> 时间：2012-12-14T16:54:33.193
> 
> 标签：php, if-statement

我对整个编程很陌生，所以如果这是一个愚蠢的问题，请原谅我。奇怪的是我以前没有遇到过。

我正在尝试为蛋糕制作订单。您填写表格并提交，然后它将在新窗口中显示订单，然后您点击“提交”并将其上传到数据库。在提交表单之前，我有一系列 If 语句来检查表单中的错误。这是代码的简化版本。写是指你想在蛋糕上写什么，名字是你的名字，蛋糕是你想要什么类型的蛋糕（默认为“无”）。

```
try {
$name = trim($params->name);
$cake = trim($params->cake);
$writing = trim($params->writing);
if (strlen($name) < 3){
    throw new Exception("Please enter Your name.");
    }
if ($cake = "None") {
        throw new Exception("Please select a Cake"
     }
if ($cake = "Caramel Apple Pie" or $cake = "Pumpkin Pie" or $cake = "Eggnog Pie" and strlen($writing) > 1) {
    throw new Exception("We are sorry, but you can't write on any of our specialty pies.");
    }

} catch(Exception $x) {
    $error = $x->getmessage();
    } 
```

所以发生的事情是，当我第一次点击提交时，会出现正确的蛋糕类型，但是当你第二次提交时，会出现错误，说我选择了“无”。所有其他值都存在并且保持不变。我认为问题在于第一个“IF”语句（其中显示“If($cake = "None")）会自动将 $cake 更改为“None”，因为我已尝试仅将该语句注释掉，然后它会将蛋糕更改为“焦糖苹果派”，它位于下一个 IF 语句的顶部。

任何人都知道它为什么这样做？以及如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T16:55:37.173

您正在使用 a`=`而不是 a`==`

*   `=`是一个赋值运算符，即它改变了我们的变量值。在 -statement 中使用它`if`会导致设置变量并检查结果。
*   `==`是比较操作
*   `===`也是一个比较运算符，它额外检查类型是否相等。

有关更多信息，请参阅 PHP[赋值运算符](http://php.net/manual/en/language.operators.assignment.php)和[比较运算符](http://php.net/manual/en/language.operators.comparison.php)手册

补充笔记：

*   该行`throw new Exception("Please select a Cake"`也丢失`);`了。
*   在您的示例情况下，使用异常写入消息`$error`有点矫枉过正！例如，只需使用`$error = "Please enter Your name."`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:56:03.397

`=`是赋值。 `==`是对平等的测试。

一些程序员像这样编写他们的相等测试来捕获这个错误：

```
if ( 'foo' == $x ) 
```

因为如果你有这个

```
if ( 'foo' = $x ) 
```

这是一个语法错误，因为您不能分配`$x`给字符串文字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T16:55:59.827

问题是您正在使用赋值运算符。将您的代码更改为：

```
if($cake == "None") 
```

`=`操作员：

在问题语言中`=`代表一项任务。您正在为特定变量赋值。

```
I.E.
$truck = "Ford";
//$truck has now been assigned the value of "Ford" 
```

`==`操作员：

`==`称为等式。这将检查您正在比较的值和/或变量是否相等。

```
I.E.
$truck = "Ford";
if($truck == "Ford") //returns true 
```

# css - 转换 CSS 伪元素中的内容

> ID：13882982
> 
> 赞同：0
> 
> 时间：2012-12-14T16:54:49.497
> 
> 标签：css, pseudo-element, css-transforms

我正在尝试向 div 添加一个三角形以创建某种对话气泡。那个泡泡应该有阴影。我发现你可以使用 unicode 并将其混合成一个伪元素来创建一个三角形。现在我有点困惑如何缩放 Unicode 字符，因为它看起来有点奇怪。

```
...:after {
content: "◀";
transform: scaleY(2.5); //doesnt seem to work :-(
top: 50px;
left: -11px;
position: absolute;
text-shadow: -1px 0 2px #ccc;
pointer-events: none; } 
```

感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:19:29.693

而不是使用：

```
transform: scaleY(...) 
```

您是否尝试过使用：

```
zoom:2.5; 
```

[这是小提琴](http://jsfiddle.net/TNCodeMonkey/79fDM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:47:23.927

**原始答案：**您可以使用`font-size`伪元素使文本变大。只需添加`font-size:2.5em;`.

**新想法：**我知道问题是关于转换内容箭头，但是对于您的语音气泡的替代解决方案。使用 css 边框箭头“hack”怎么样（请参阅下面的带有扩展示例的我的 codepen 链接）：

```
.bubble:after {
  content:"";
  height:0px;
  width:0px;
  border-color: transparent transparent transparent #cccccc;
  border-style: solid;
  border-width: 10px;
  position:absolute;
  top:20px;
  right:-20px;
  /* Now transform will work since this is not a character: */
  -webkit-transform: scaleY(1.5);
  transform: scaleY(1.5);
} 
```

[代码笔示例](http://codepen.io/djfarrelly/pen/BKLwe)

# asp.net - 方法“标签”没有重载需要 3 个参数

> ID：13882984
> 
> 赞同：4
> 
> 时间：2012-12-14T16:54:53.387
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, overloading

我正在使用 ASP.Net MVC 3，已经引用了所有正确的 DLL（请参阅包含的屏幕截图），但由于某种原因，我得到了这个编译错误。

![方法签名](../Images/47322166b0ca59ed920d6d852594f5b1.png)

![Web.config 程序集](../Images/f9bbc0e3b789344e234a9f0668c84320.png)

![编译错误](../Images/c0440547476a850047504927c8b1c056.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T21:29:43.450

这是一个奇怪的事件。我能够重现您的错误。我还能够弄清楚它发生的原因以及如何绕过它。

**为什么会发生**

[`System.Web.Mvc.Html`](http://msdn.microsoft.com/en-us/library/gg453858(v=vs.108).aspx)和之间存在命名空间冲突[`System.Web.WebPages.Html`](http://msdn.microsoft.com/en-us/library/gg538318(v=vs.111).aspx)

**碰撞的结果是什么**

*System.Web.Mvc.Html*

此命名空间包含该方法的定义

`LabelExtensions.Label (HtmlHelper, String, String)`

正如您将注意到的，这是具有先例并导致问题的命名空间。它只有两个重载。`(String)`或`(String, String)`。在测试时，这是唯一出现的选项。

* * *

**如何绕过它**

你真正想要的是这个命名空间

*System.Web.WebPages.Html*

此命名空间包含该方法的定义

`HtmlHelper.Label (String, String, IDictionary<String, Object>)`

您现在可以看到`new { @class = "myClass" }`存在添加的可用性。

**创建您自己的实例**

获取自己的`HtmlHelper`并绕过`LabelExtension`这样的：

*剃刀*

```
@{
 var h = new System.Web.WebPages.Html.HtmlHelper();
} 
```

*ASP*

```
<% var h = new System.Web.WebPages.Html.HtmlHelper(); %> 
```

确保它没有嵌套在剃刀或`<%=`块内，因为它会阻止它可用。它需要在页面的全局级别。

**使用正确的标签**

现在你可以使用这个：

*剃刀*

`@h.Label("firstName", "First Name", new { @class = "control-label" })`

*ASP*

`<%= h.Label("firstName", "First Name", new { @class = "control-label" }) %>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:19:20.037

在我看来，您从*Asp.Net Mvc 4中选择了一个重载，然后编译器抱怨，因为它在**Asp.Net Mvc 3*中不存在。

查看这些链接以查看`Html.Label(...)`不同版本的 Asp.Net Mvc 中的重载：

[Asp.Net Mvc 2](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.labelextensions%28v=vs.100%29.aspx)
[Asp.Net Mvc 3](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.labelextensions%28v=vs.98%29.aspx)
[Asp.Net Mvc 4](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.labelextensions%28v=vs.108%29.aspx)

根据链接页面中的信息，似乎您的 Visual Studio（出于某种原因）正在为您提供基于*Asp.Net Mvc 4*的 Intellisense ，但是当页面应该被编译时，使用 Mvc 版本 3 并且您的重载已选择不存在。

不知道为什么 VS 从版本 4 开始提供 Intellisense ......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:19:43.593

看看你的`~/Views/Web.config`

看看有没有`configuration/system.web/pages/namespaces`节点

尝试`<add namespace="System.Web.Mvc.Html"/>`在那里添加。

Label 方法位于上述命名空间中。看起来你的视图没有找到它。

由于您不编译视图，因此它构建得很好。此外，您的智能感知从参考资料中得到了很好的方法。但是，这几乎就像您的视图在运行时没有获取该方法一样。

虽然将上述命名空间添加到 web.config 中可能会解决问题，但它会在您的应用程序中隐藏一个潜在的更大问题。“修复”应该为您提供进一步调试情况的起点。

如果这解决了您的问题，请尝试将您的 web.config 文件与一个全新且未受影响的 MVC 项目进行比较。看看你有什么不同，这可能会阻止视图找到 Html Helper。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T20:37:25.067

你得到这个异常是因为你试图使用`HtmlExtension`默认情况下在 ASP.NET MVC3 中不存在的。您需要将 HTML 属性支持添加到`Html.Label()`.

基本上你需要为`HtmlHelper`. 您可以从 MVC3 源代码开始。添加这个类：

```
public static class MyLabelExtensions
{
    public static MvcHtmlString Label(this HtmlHelper html, string expression,
        string labelText, object htmlAttributes)
    {
        return Label(html, expression, labelText, 
                        new RouteValueDictionary(htmlAttributes));
    }

    public static MvcHtmlString Label(this HtmlHelper html, string expression,
        string labelText, IDictionary<string, object> htmlAttributes)
    {
        return LabelHelper(html,
          ModelMetadata.FromStringExpression(expression, html.ViewData),
          expression, labelText, htmlAttributes);
    }

    // added htmlAttributes to the default MVC implementation
    internal static MvcHtmlString LabelHelper(HtmlHelper html,
        ModelMetadata metadata, string htmlFieldName,
        string labelText = null,
        IDictionary<string, object> htmlAttributes = null)
    {
        string str = labelText;
        if (str == null)
        {
            string displayName = metadata.DisplayName;
            if (displayName == null)
            {
                string propertyName = metadata.PropertyName;
                if (propertyName == null)
                    str = Enumerable.Last(
                        htmlFieldName.Split(
                            new[]
                                {
                                    '.'
                        }));
                else
                    str = propertyName;
            }
            else
                str = displayName;
        }
        string innerText = str;
        if (string.IsNullOrEmpty(innerText))
            return MvcHtmlString.Empty;
        TagBuilder tagBuilder = new TagBuilder("label");
        tagBuilder.Attributes.Add("for", TagBuilder.CreateSanitizedId(
            html.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(
            htmlFieldName)));

        // this differs from MVC3 source code:
        tagBuilder.MergeAttributes(htmlAttributes);

        tagBuilder.SetInnerText(innerText);

        // this is different too:
        return MvcHtmlString.Create(tagBuilder.ToString(TagRenderMode.Normal));
    }
} 
```

添加这些扩展方法后，您可以在视图中使用它们，如下所示：

```
<%= Html.Label("firstName", "First Name", new { @class = "control-label" }) %> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-14T17:13:33.170

而不是使用

```
 <%=Html.Label("firstname","First Name",new {@class="control-label"})%> 
```

尝试使用以下：

**剃须刀：**

```
 @Html.Label( "firstname", "First Name" ,new {  @class = "control-label" }); 
```

但是，我个人建议您不要这样做。如果您有一个模型并且您从中获取名字，那么您可以使用如下：

```
 @Html.Label( model=>model.FirstName, "First Name" ,new {  @class = "control-label" }); 
```

**在 ASPX 视图引擎中：**

```
 <%=Html.Label(model=>model.FirstName,"First Name",new {@class="control-label"})%> 
```

请务必在视图页面中添加您当前的模型，如下所示：

```
 <%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<Project.Models.Whatever>" %> 
```

# mysql - 在 MySql 中插入后带有触发器的竞争条件

> ID：13882985
> 
> 赞同：5
> 
> 时间：2012-12-14T16:54:59.533
> 
> 标签：mysql, triggers, race-condition

我有一个 mysql 触发器，我担心几天前将触发器部署到我的生产站点后注意到我的数据库中有一些“未同步”的数据。

为了在此处发布，我已经简化了我的代码。

有3张表：

**分数**表：ID、UserID、Score、GameID（用户每次玩游戏输入一个分数，可以多次玩同一个游戏）

**score_summary**表：ID、UserID、GameID、SummaryValue（此表保存每个用户每场比赛的跑分）

**game_summary**表：ID、GameID、SummaryValue（此表保存每场比赛的跑分总分）

当将用户的游戏得分输入到得分表中时，触发器用于更新表 score_summary 中的用户运行总得分 (SummaryValue) 并更新给定 GameID 的 game_summary 表。

```
CREATE TRIGGER scores_insert_trigger AFTER INSERT ON scores
FOR EACH ROW BEGIN

    UPDATE scores_summary
    SET SummaryValue=SummaryValue + NEW.Score 
    WHERE UserID=NEW.UserID
    SELECT ROW_COUNT() INTO rowCount;
    IF (rowCount=0) THEN
        INSERT INTO scores_summary
        (UserID, GameID, SummaryValue)
        VALUES
        (NEW.UserID, NEW.GameID, NEW.Score);
    END IF;

    UPDATE game_summary
    SET SummaryValue=SummaryValue + NEW.Score 
    WHERE GameID=NEW.GameID
    SELECT ROW_COUNT() INTO rowCount;
    IF (rowCount=0) THEN
        INSERT INTO game_summary
        (GameID, SummaryValue)
        VALUES
        (NEW.GameID, NEW.Score);
    END IF;
END; 
```

我担心如果多个用户同时输入分数，触发器会进入竞争条件 - 特别是当特定游戏不存在分数时更新 game_summary - 如果两个用户同时尝试此操作时间，他们都会得到 rowCount=0，然后都会进行插入？

我的担忧是否合理，如果是，我能做些什么吗？

提前谢谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:16:09.043

只需创建`UNIQUE`索引`game_summary.GameID`或使其成为主键。

`UNIQUE`index 将防止第二个用户添加重复的行。整个事务将失败并被回滚，因此您的应用程序需要处理此异常，例如在失败后在放弃之前重试。此解决方案的缺点是在非常繁忙的环境中，这将导致许多冲突和许多回滚，但您可以确定不会有任何重复的行。

您还可以使用[GET_LOCK(str, timeout)](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_get-lock "GET_LOCK")函数来获得给定的排他锁`GameID`，更新或插入值，最后是[RELEASE_LOCK(str)](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_release-lock)以便下一个用户也可以更新分数。在某些情况下，这可能会更有效，但您需要检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T00:12:00.733

我想为我的特殊情况提供一个答案。

我的更新语句是原子更新，这意味着 mysql 引擎可以处理任何潜在的竞争条件。

为了避免插入时出现竞争条件，我选择了 ON DUPLICATE KEY UPDATE，这将再次是原子的，并且将避免两个或多个线程导致创建多行。

谢谢你的帮助。

# mysql - 将查询限制为特定项目

> ID：13882986
> 
> 赞同：0
> 
> 时间：2012-12-14T16:55:05.940
> 
> 标签：mysql

> **可能重复：**
> [mysql：在 GROUP BY 中使用 LIMIT 来获得每组 N 个结果？](https://stackoverflow.com/questions/2129693/mysql-using-limit-within-group-by-to-get-n-results-per-group)

我有一个包含数千个域和数据的数据库。我只想列出每个域的 100 行。我不能使用 LIMIT 100 因为它只限制 100 条记录，但我希望 dom1 列出 100 dom2 列出 100 dom3 列出 100

一站式查询。这就是我到目前为止所拥有的。

```
 SELECT domain COUNT(Key) AS DomCount
    FROM table_domain
    GROUP BY user,location
    ORDER BY domain,DomCount DESC 
```

我可以使用 CASE 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:01:40.717

尝试这个

[在此处查看以下查询的 DEMO](http://sqlfiddle.com/#!2/0cac8/3)

```
SELECT key,domain FROM (
SELECT key,domain,
   @drank:=CASE 
               WHEN @domain_v <> domain THEN 1 
               ELSE @drank+1 END AS rn,
   @domain_v:= domain AS domain_set
FROM
  (SELECT @drank:= -1) nr,
  (SELECT @domain_v:= -1) n,
  (SELECT * FROM TableName ORDER BY domain) t
  ) x WHERE rn < 101 
```

# python - 将 Python 脚本转换为 plone 模板以呈现对象列表

> ID：13882991
> 
> 赞同：3
> 
> 时间：2012-12-14T16:55:16.330
> 
> 标签：python, plone

我试图将一个对象列表渲染到一个 plone 模板中，我用查询编写了 python 脚本来获取一个对象列表，然后它返回一个包含对象的列表。

```
lista-fixos = context.portal_catalog.searchResults(
        Subject = { "query": ["Destaques", "Destaques-fixo"],
                     "operator": "and" 
                     }
)
lista-normal = context.portal_catalog.searchResults(
        Subject = { "query": ["Destaques"]}

)

lista-fixos.append(lista-normal)

for e in lista-fixos:
       if e not in lista-final:
           lista-final.append(e)
return lista-fixos 
```

在这里我试着得到

```
tal:define="results here/getCatalogDestaques.py" 
```

这是脚本和模板 [http://pastie.org/5530478](http://pastie.org/5530478)

我的问题是每次我尝试调用模板时都会出现以下错误：

```
Traceback (innermost last):
  Module ZPublisher.Publish, line 126, in publish
  Module ZPublisher.mapply, line 77, in mapply
  Module ZPublisher.Publish, line 46, in call_object
  Module Shared.DC.Scripts.Bindings, line 322, in __call__
  Module Shared.DC.Scripts.Bindings, line 359, in _bindAndExec
  Module Products.CMFCore.FSPageTemplate, line 240, in _exec
  Module Products.CMFCore.FSPageTemplate, line 180, in pt_render
  Module Products.PageTemplates.PageTemplate, line 79, in pt_render
  Module zope.pagetemplate.pagetemplate, line 113, in pt_render
   - Warning: Macro expansion failed
   - Warning: <type 'exceptions.AttributeError'>: header
  Module zope.tal.talinterpreter, line 271, in __call__
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 858, in do_defineMacro
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 533, in do_optTag_tal
  Module zope.tal.talinterpreter, line 518, in do_optTag
  Module zope.tal.talinterpreter, line 513, in no_tag
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 851, in do_condition
  Module Products.PageTemplates.Expressions, line 205, in evaluateBoolean
  Module zope.tales.tales, line 696, in evaluate
   - URL: file:/media/New Volume/ambiente_nportal/ploneAmbiente/eggs/Products.CMFContentPanels-2.6b2-py2.7.egg/Products/CMFContentPanels/skins/contentpanels/cp_new_panel_form.pt
   - Line 160, Column 7
   - Expression: <PythonExpr usemacro and exists(viewletConfPath)>
   - Names:
      {'container': <PloneSite at /Plone>,
       'context': <ATTopic at /Plone/destaques/destaques-portal>,
       'default': <object object at 0xb73016b0>,
       'here': <ATTopic at /Plone/destaques/destaques-portal>,
       'loop': {},
       'nothing': None,
       'options': {'args': ()},
       'repeat': <Products.PageTemplates.Expressions.SafeMapping object at 0xce95c84>,
       'request': <HTTPRequest, URL=http://localhost:8080/Plone/destaques/destaques-portal/cp_new_panel_form>,
       'root': <Application at >,
       'template': <FSPageTemplate at /Plone/cp_new_panel_form used for /Plone/destaques/destaques-portal>,
       'traverse_subpath': [],
       'user': <PropertiedUser 'admin'>}
  Module Products.PageTemplates.ZRPythonExpr, line 48, in __call__
   - __traceback_info__: usemacro and exists(viewletConfPath)
  Module PythonExpr, line 1, in <expression>
  Module zope.tales.pythonexpr, line 77, in __call__
  Module zope.tales.expressions, line 216, in __call__
  Module Products.PageTemplates.Expressions, line 162, in _exists
  Module zope.tales.expressions, line 124, in _eval
  Module Products.PageTemplates.Expressions, line 74, in boboAwareZopeTraverse
  Module OFS.Traversable, line 315, in restrictedTraverse
  Module OFS.Traversable, line 248, in unrestrictedTraverse
   - __traceback_info__: ([], 'macros')
  Module Products.PageTemplates.PageTemplate, line 51, in macros
  Module Products.CMFCore.FSPageTemplate, line 168, in pt_macros
  Module Products.PageTemplates.PageTemplate, line 60, in pt_macros
   - Warning: Compilation failed
   - Warning: zope.tal.taldefs.TALError: Invalid variable name "here.getCatalogDestaques" in expression u'here.getCatalogDestaques', at line 7, column 1
PTRuntimeError: Page Template template-destaques has errors: ['Compilation failed', 'zope.tal.taldefs.TALError: Invalid variable name "here.getCatalogDestaques" in expression u\'here.getCatalogDestaques\', at line 7, column 1'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T17:02:56.717

尝试`.py`从通话中删除该部分。IE：

```
tal:define="results here/getCatalogDestaques" 
```

# symfony - 检查表单父级在 Symfony2 中是否有效

> ID：13882992
> 
> 赞同：0
> 
> 时间：2012-12-14T16:55:17.363
> 
> 标签：symfony

有任何方法可以知道父表单是否有效。这是代码。它总是抛出：“您不能在未绑定的表单上调用 isValid()。”。谢谢！！

```
class FoorType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('field_1') // Required
            ->add('field_2') // Required
            ->add('field_3') // Required
            ->add('bar', 'my_custom_form_type') // Not required
    }
} 

class MyCustomFormType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->addEventListener(FormEvents::POST_BIND, function(DataEvent $event) {
            $form = $event->getForm();
            $data = $event->getData();

            if ($form->getParent()->isValid()) {
                // Do smething...
            }
        });
    }

    public function getParent()
    {
        return 'text';
    }

    public function getName()
    {
        return 'my_custom_form_type';
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:28:06.083

嗨找到了解决方案！

在 addEventListener 中使用 getParent()：

```
$builder->getParent()->addEventListener(FormEvents::POST_BIND, function(DataEvent $event)   
{
     // Code
}); 
```

# java - 如何从依赖其他方法获取数据的方法中获取数据？

> ID：13882994
> 
> 赞同：1
> 
> 时间：2012-12-14T16:55:19.060
> 
> 标签：java, list, methods, parameter-passing

我有三种方法。

1.  第一个方法从 List 中获取数据（其中包含特定于我们的应用程序的数据对象），然后调用第二个方法，将它获取的数据作为参数传递。

2.  然后，第二种方法使用此信息作为参考，从另一个列表中获取特定信息，调用第三种方法并将此信息作为参数传递给它。

3.  第三种方法与第二种方法相同，使用传入的数据作为引用来查找列表中的特定数据。

现在的问题是，我想以完全不同的方法使用这些信息。

我应该如何调用我的方法以获取数据？

```
private void getRecords() {
    List<LabelSet> allSets = labelSetStructureService.getLabelSets();
    for (LabelSet labelSet : allSets) {
        List<LabelSet> groups = labelSetStructureService.getLabelGroupsForSet(labelSet.getId());
        for (LabelGroup group : groups) {
             getValuesForLabel(group.getCustomerMeasure(), labelSetStructureService.getLabelsForLabelGroup(group.getCustomer().getId(), group.getId()), labelSet);
        }
    }
}

private void getValuesForLabel(CustomerMeasure measure, List<Label> labels, LabelSet labelSet) {
    for (Label label : labels) {
        List<LabelSet> usageRecs = labelDataService.getLabelData(label, LabelSetStorage.DAY_BY_MONTH_STORAGE, new DateTime(), new DateTime().minusWeeks(1));
        preProcessUsageRecs( usageRecs, labelSet);
    }
}

private List<LabelUsage> preProcessUsageRecs(List<LabelUsage> usageRecs, LabelSet labelSet) {
    //Format records, use list instead strings where possible

    List<LabelSet> usageRecords = usageRecs; {
      for( LabelUsage labelUsage : usageRecs)
          usageRecords.addAll(usageRecs);
    }
     return usageRecords;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:05:01.037

Java 是一种基于对象的语言，因此请使用成员变量来存储该调用的结果，如下所示：

```
public List<LabelUsage> labels;
...
private List<LabelUsage> preProcessUsageRecs(List<LabelUsage> usageRecs, LabelSet labelSet) {
    //Format records, use list instead strings where possible

    List<LabelSet> usageRecords = usageRecs; {
      for( LabelUsage labelUsage : usageRecs)
          usageRecords.addAll(usageRecs);
    }
    this.labels = usageRecords;
     return usageRecords;
} 
```

然后访问`this.labels`您需要使用此方法结果的任何地方；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:02:38.590

听起来您正在编写一些可疑代码。根据您的描述，如果我理解问题，您的 API 应该看起来像这样：

```
public void go(Map<MapKey,Collection<MyObject>> values, Keyword keyword)  
{  
      for(MapKey key: values.keyset())  
     {  
                 search(values.get(key),keyword);
     }  
}  

public void search(Collection<MyObject> searchSpace, Keyword key)  
{  
       for(MyObject currentSearch : searchSpace)  
       {  
            if(currentSearch == key)  
            {  
                //do something
            }  
       }  
} 
```

关键是您应该能够将搜索概括为一个函数，如果需要发生一些特殊情况，您可以将一些私有（帮助）函数应用于此过程并通过 switch 语句绑定它们。

# ios - 来自锚链接的短信 - Html5 Iphone

> ID：13882995
> 
> 赞同：2
> 
> 时间：2012-12-14T16:55:22.320
> 
> 标签：ios, html, cordova

是否可以通过 HTML5 Iphone 应用程序中的超链接触发 SMS - 与 mailto: 和 tel: 的工作方式相同？

IE？

```
 <a href="mailto:joeblogs@blah.net">mail</a> 
```

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T16:58:47.287

对的，这是可能的：

```
sms:12345678?body=TEXT 
```

`12345678`电话号码在哪里