# StackOverflow 问答 12724000-12724999

# c# - 从 xaml 中的按钮继承的自定义按钮在命名空间错误中不存在

> ID：12724003
> 
> 赞同：2
> 
> 时间：2012-10-04T09:14:05.537
> 
> 标签：c#, wpf, xaml, namespaces

奇怪的是，它确实存在，并且可以在 xaml 编译良好时找到它。

它在用户控件中定义如下：

```
xmlns:local="clr-namespace:myResources" 
```

每当添加新按钮时，如下所示：

```
 <local:KeyboardButton 
```

它说名称keyboardbutton在命名空间myResources中不存在键盘按钮的所有类都在该命名空间中，所以我没有想法，有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T09:23:16.427

您还应该写下您的程序集名称.. smth，例如：

```
xmlns:local="clr-namespace:myResources;assembly=myResources" 
```

# visual-c++ - vc++ mfc应用程序中的“First-chance exception”是什么意思？

> ID：12724007
> 
> 赞同：0
> 
> 时间：2012-10-04T09:14:20.467
> 
> 标签：visual-c++, mfc

> **可能重复：**
> [这个 mfc 应用程序“第一次机会异常”异常是什么意思？](https://stackoverflow.com/questions/12722780/what-does-this-mfc-appliction-first-chance-exception-exception-mean)

Media.exe 中 0x75fdb9bc (KernelBase.dll) 的第一次机会异常：0x000006BA：RPC 服务器不可用。

# c# - 为原子、中子、质子、化学反应创建类层次结构

> ID：12724012
> 
> 赞同：-3
> 
> 时间：2012-10-04T09:14:36.660
> 
> 标签：c#, .net, visual-c#-express-2010

我需要帮助来创建一个程序，该程序可以显示任何原子及其组件（中子、质子、电子和化学反应）的层次结构这是我到目前为止所做的代码，作为该主题的新手

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Atoms
{
    public class Atoms
    {
      protected string name = "Sodium";
          protected string element ="Metal";

        public virtual void GetInfo()
        {
         Console.WriteLine("name: {0}",name);
            Console.WriteLine("element: {0}", element);

        }
    }
    class Proton : Atoms
    {
        public int number = 11 ;
        public override void  GetInfo()
{
     base.GetInfo();
            Console.WriteLine("Proton number: {0}",number);

      }
}
    class Electron : Atoms
    {
        public int number = 11;
        public override void GetInfo()
        {
            base.GetInfo();
            Console.WriteLine("Electron number: {0}", number);
        }
        class Neutrons : Atoms
        {
            public int number = 12;
            public override void GetInfo()
            {
                base.GetInfo();
                Console.WriteLine("Neutron  number: {0}", number);
            }
            class TestClass
            {
                static void Main()
                {
                    Proton P = new Proton();
                    P.GetInfo();
                    Neutrons N = new Neutrons();
                    N.GetInfo();
                    Electron E = new Electron();
                    E.GetInfo();
                    Console.WriteLine("click any key to exit");
                    Console.ReadLine();
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T09:35:44.727

*警告：请原谅我高中时对亚原子物理学的理解，如果我有任何事实错误，我相信我会很好地解释这个原理*

您要建模的是一系列 `has a`关系。IE

*   一个*原子* **有零**个或多个*Nutron*
*   一个*原子* **有**一个或多个*电子*
*   一个*原子* **有**一个或多个*质子*

现在，*没有*像您尝试做的那样使用继承建模，而是通过组合建模。

```
public class Atom
{
    private List<Neutron> neutrons;
    private List<Electron> electrons;
    private List<Proton> neutrons;
} 
```

很可能每个类`Neutron`都有`Electron`一个`Proton`共同的基类/接口，将它们与`Atom`它们所属的相关联：

```
public interface IAtomicComponent
{
    Atom Parent{ get; }
} 
```

这些只是作为想法提出，因为你的问题有点含糊，但希望能给你一些继续下去的机会。

化学反应，有`takes a`关系`Atom`。[根据我通过阅读关于化学反应的维基百科文章的](http://en.wikipedia.org/wiki/Chemical_reaction)基本理解，有几种基本类型，最简单的是合成。这似乎需要 2 个原子并返回一个新原子。您可以使用接口再次建模：

```
public interface ISynthesisReaction
{
   Atom Synthesise(Atom left, Atom right);
} 
```

然后您编写该接口的一个或多个实现。另一个可能是分解，它采用单个 Atom 并可以返回多个：

```
public interface IDecompositionReaction
{
   Atom [] Decompose(Atom atom);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:34:41.627

您已经创建了继承自 Atom 的 Proton、Neutron 和 Electon。你在这里说的是基本单位是原子，质子、中子和电子是特殊的原子。这显然不是这样的。质子、中子和电子是基本单位，因为您没有指定任何更小的单位，并且一个原子包含许多质子、中子和电子。

因此，我将首先创建一个 Atom 类，该类具有描述它所拥有的质子、中子和电子数量的属性。你可以制作质子、中子和电子类，并让原子包含一系​​列质子、电子和中子，但我不确定这是否有用。当然，您可以将每个质子视为与任何其他质子无法区分，中子也是如此，但您可能希望对电子更聪明。电子可能无法区分，但能级并非如此可以填充或不填充 - 取决于这是为了什么。

你有一个字符串描述这是什么类型的元素——“金属”。如果您要设置一些规则，例如金属可以与非金属发生反应，您最好定义不同元素类型的枚举。通过这种方式，您可以比较整数而不是字符串，这样效率更高，并且输入错误并最终得到“反应”代码无法识别的新元素类型的范围更小。

此外，你似乎已经在电子类中制造了你的*中子*。这意味着中子只能作为电子的一部分存在。您的 TestClass 再次在中子内。您需要考虑不同类之间的逻辑关系，在这样的系统中，您不太可能需要在类中定义类——将它们作为不同的对象并具有适当类型的类的字段。所以你的原子类也许可以这样开始：

```
public class Atom
{
    public int number = 11;
    public Electron[] electrons;
    public Proton[] protons;
    public Neutron[] neutrons;
    public string name="Sodium";
    public ElementTypeEnum elementType;

    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:40:38.387

鉴于没有明确的问题，我假设您想要批评。

仅当实体具有“IS A”关系时才应使用继承。例如，如果您可以声明“电子是原子”，那么您应该考虑从原子继承电子。由于电子不是原子，因此表明您的继承是错误的。相反，您会说“一个原子有一个电子”；'HAS A' 关系表明聚合，因此可能给出：

```
    类原子
    {
        公共电子 {get;set;}

        ...
    }

```

（更准确地说，对于现实世界，我希望一个原子有一个包含 1 个或多个电子的列表。）

您似乎将原子的类型硬编码到类（钠）中。理想情况下，您将创建一个基类，其中包含原子类型的持有者，并具有特定原子类型的派生类。例如

```
 public class Atom
{
    public string Name {get; protected set;}
    public string Type {get; protected set;}
}

public class SodiumAtom : Atom
{
    public SodiumAtom()
    {
        Name = "Sodium";
        Type = "Metal";
    }

} 

```

这将允许您创建特定类型的原子，然后将其视为通用原子：

```
 Atom a = new SodiumAtom();
    a.GetInfo(); 

```

您所有的课程都有一个“GetInfo”方法。这是一个“横切”功能，因为您可能希望很多类都具有此功能，无论它们是否具有相同的基类。我建议使用接口：

```
 public Interface IDisplayInfo
{
    void GetInfo();
}

public class Atom : IDisplayInfo
{
    public void GetInfo()
    {
        ...
    }
}

public class Electron : IDisplayInfo
{
    public void GetInfo()
    {
        ...
    }
} 

```

# android - 由于包名称不正确，无法启动活动

> ID：12724013
> 
> 赞同：0
> 
> 时间：2012-10-04T09:14:36.947
> 
> 标签：android, maven, intellij-idea

我正在使用 maven 构建一个项目，并且似乎遇到了一些问题。当我启动应用程序时，我收到以下错误。

```
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.appname/com.appname.HelloAndroidActivity}: java.lang.ClassNotFoundException: com.appname.HelloAndroidActivity 
```

首先看起来不对的是这部分

> com.appname/com.appname.HelloAndroidActivity

看起来它将包名称放入两次。为了提供一些背景知识，我最初使用[此处](http://stand.spree.de/wiki_details_maven_archetypes)的快速入门来构建项目。

我还发现[这个](http://youtrack.jetbrains.com/issue/IDEA-81559)链接可能是相关的，但我不确定它是否相关。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.appname" android:versionCode="1" android:versionName="1">

  <application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".HelloAndroidActivity">
      <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>
    </activity>
  </application>

</manifest> 
```

我在我的 POM 中注意到了这一点

> 你的公司

这通常设置为什么？

# java - 模态对话框阻止正确的光标状态

> ID：12724023
> 
> 赞同：4
> 
> 时间：2012-10-04T09:15:43.120
> 
> 标签：java, swing, cursor, modal-dialog, jdialog

我在同时显示模式对话框和忙碌光标时遇到问题。

我显示一个模式对话框并将主框架的光标设置为“等待状态”。一切都很好，除了如果鼠标退出主框架并再次进入，它永远不会回到“等待状态”。如果对话框不是模态的，则不会发生此错误 (?)。

测试程序：

```
 public static void main(String[] args) {
        final JFrame frame = new JFrame();
        frame.setSize(new Dimension(500, 500));

        final JDialog dialog = new JDialog(frame);
        dialog.setModal(true);

        frame.add(new JButton(new AbstractAction("Dialog") {
            @Override
            public void actionPerformed(ActionEvent e) {
                frame.setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));
                dialog.setVisible(true);
            }
        }));
        frame.setVisible(true);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:23:20.180

> `frame.setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));`

*   `Cursor`有可能改变（或改变是可见的）窗口，这是模态窗口或s 的`focus`基本属性，`ModalityType`

> 它永远不会回到“等待状态”。如果对话框不是模态的，则不会发生此错误 (?)。

*   孩子`JDialog`关闭后，`JFrame`可以`Cursor`改为`WAIT_CURSOR`

*   `Cursor`您可以通过删除`setModal()`或将更改`ModalityType`s更改为可见更改`ModalityType.MODELESS`

# java - GWT JQueryUI 对话框包装器不“附加小部件”

> ID：12724026
> 
> 赞同：3
> 
> 时间：2012-10-04T09:15:53.977
> 
> 标签：java, jquery-ui, gwt, jsni

我编写了一个简单的类来包装 JQUEeryUI 对话框。它基本上看起来像这样：

```
public class Dialog extends Composite
{
    final String id;

    public Dialog(IsWidget body) {
            initWidget(body.asWidget());
            id = DOM.createUniqueId();
            getElement().setId(id);
    }

    public void create() {
            create(id);
    }

    public void open() {
            open(id);
    }

    final native void create(String id) /*-{
            $wnd.jQuery("#" + id).dialog({ autoHide: true });
    }-*/;

    final native void open(String id) /*-{
            $wnd.jQuery("#" + id).dialog("open");
    }-*/;
} 
```

我传递了初始化的视图（我使用的是 uibinder 模板）。当视图仅包含简单的 HTML 元素（例如复选框）时，它可以正常工作，但是当它包含复杂的小部件（例如显示面板或单元格列表）时 - 面板无法响应点击事件。披露面板没有打开，单元列表也没有响应事件，尽管这两个视图在它们被安置在“GWT 弹出面板”之前工作正常。

## 更新

这是更多显示对话框如何初始化的源代码。

```
HasDialog parent = (HasDialog) body;
Dialog dialog = parent.getDialog();
dialog.open(); 
```

仅供参考 HasDialog 只是小部件继承的接口。

```
interface HasDialog { Dialog getDialog(); } 
```

例如，包含披露面板小部件的小部件如下所示：

```
final Dialog dialog;

@Override
public Dialog getDialog()
{
    if (dialog == null) {  // only one instance
        dialog = new Dialog(this);
        dialog.create();
    }

    // dialog buttons and events have been commented out

    return dialog;
} 
```

我们可以假设小部件没有内部问题，因为它在与 GWT 弹出面板一起使用时可以正常工作：

```
PopupPanel popup = new PopupPanel();
popup.setWidget(body);
popup.center(); 
```

我同意[logan](https://stackoverflow.com/users/151365/logan)的观点，我认为**onAttach**或**onLoad**事件正在为视图子小部件沉没。我注意到这些方法受到保护。什么是正确接线的正确方法？

## 更新 2

我已经缩小了问题的范围，因为小部件（通过构造函数传递）没有附加到 DOM - 就小部件本身而言。

```
public void open()
{
    open(id);
    if (getWidget().isAttached() == false) {
        Window.alert("Widget not attached");
    }
} 
```

我相信 Widget Javadoc 为我的情况提供了一些相关信息。

> 受保护的无效 doAttachChildren()
> 
> 如果小部件包含一个或多个不在逻辑小部件层次结构中的子小部件（子小部件仅在 DOM 级别上物理连接），则它必须覆盖此方法并为其每个子小部件调用 onAttach()。

鉴于 Dialog 类应该能够使用任何小部件，我不想放弃我的小部件并开始编写大量样板文件，当然必须有一种方法可以优雅地附加小部件。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:30:23.063

修改你的打开方法：

```
 public void open() {
        onAttach();
        RootPanel.detachOnWindowClose(this);
        open(id);
    } 
```

添加关闭处理程序：

```
 void onClose() {
        if(RootPanel.isInDetachList(this)) {
            RootPanel.detachNow(this);
        }
        else {
            onDetach();
        }
    } 
```

在创建对话框时注册 onclose 处理程序：

```
 final native void create(String id) /*-{
        var _self = this;
        $wnd.jQuery("#" + id).dialog({ 
            autoHide: true, 
            close: function(event, ui) {
                _self.@your.package.Dialog::onClose()();
                _self = null;
            }
        });
    }-*/; 
```

让其余的保持不变；）

编辑：实际上您甚至不必生成 DomNode 的 id，因为您可以直接在 DomNode 上实例化 Jquery 对象。修改后的全班：

```
public class Dialog extends Composite {

    public Dialog(IsWidget body) {
        initWidget(body.asWidget());
    }

    public void create() {
        create(getElement());
    }

    public void open() {
        onAttach();
        RootPanel.detachOnWindowClose(this);
        open(getElement());
    }

    void onClose() {
        if(RootPanel.isInDetachList(this)) {
            RootPanel.detachNow(this);
        }
        else {
            onDetach();
        }
    }

    final native void create(Element element) /*-{
        var _self = this;
        $wnd.jQuery(element).dialog({ 
            autoHide: true, 
            close: function(event, ui) {
                _self.@your.package.Dialog::onClose()();
                _self = null;
            }
        });
    }-*/;

    final native void open(Element element) /*-{
        $wnd.jQuery(element).dialog("open");
    }-*/;
} 
```

# ios - 视网膜屏幕上的 GestureRecognizer

> ID：12724028
> 
> 赞同：1
> 
> 时间：2012-10-04T09:16:03.743
> 
> 标签：ios, gesture, retina-display

视网膜设备每侧的像素数是非视网膜设备的两倍。使用 UIPanGestureRecognizer 时，我可以通过调用 - (CGPoint)velocityInView:(UIView *)view 在指定视图的坐标系中以像素/秒为单位获取平移速度，但我需要将返回值除以 2 以获得正确的速度？我已经阅读了苹果的文档，开发人员不关心 x2 问题。但是 UIPanGestureRecognizer.h 中的评论让我感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T09:19:34.237

不，它`points`每秒返回它，而不是每秒像素。

苹果之所以选择 for`points`作为一个单元，是因为它不依赖于`pixel densitiy`屏幕。这意味着 3G 和 iPhone 4 使用此手势识别器具有完全相同的结果。iPhone5 有一个更大的屏幕，但这并没有改变你对识别器返回的内容所做的任何事情。

因此，您的回答是：不，您不应该将其除以 2，苹果正在处理他们的 API。

# java - 我必须为 Struts 2 中的 BaseConroller 类添加哪个 jar 文件？

> ID：12724030
> 
> 赞同：0
> 
> 时间：2012-10-04T09:16:09.693
> 
> 标签：java, struts2, tiles2

我正在使用下面的代码，

[http://books.google.co.in/books?id=1rbeG3-jdnoC&pg=PA383&lpg=PA383&dq=BaseController++struts+2+jar+file&source=bl&ots=cYl89RBGnJ&sig=M3kyXKvV5ARK6SysxI8diagRces&hl=en&sa=X&ei=jzttUO-_FoLirAf-r4CQBWved& =0CCgQ6AEwAQ#v=onepage&q=BaseController%20%20struts%202%20jar%20file&f=false](http://books.google.co.in/books?id=1rbeG3-jdnoC&pg=PA383&lpg=PA383&dq=BaseController++struts+2+jar+file&source=bl&ots=cYl89RBGnJ&sig=M3kyXKvV5ARK6SysxI8diagRces&hl=en&sa=X&ei=jzttUO-_FoLirAf-r4CQBw&ved=0CCgQ6AEwAQ#v=onepage&q=BaseController%20%20struts%202%20jar%20file&f=false)

我在 Struts 2 中阅读过。但我无法导入 BasceCntoller 类。谁能告诉我我缺少哪个 jar 文件？

请帮助我。提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:21:13.537

好吧，如果您刚刚开始使用 Struts2，我建议您从 Struts2 主页下载[示例应用程序并运行它们。](http://struts.apache.org/download.cgi#struts2341)

这些示例应用程序带有运行 Struts2 应用程序所需的 jars。

或者，如果您可以继续使用 maven，我建议您使用 maven 创建示例 Struts2 应用程序，[让](http://struts.apache.org/2.2.3/docs/struts-2-maven-archetypes.html)maven 下载并为您提供运行示例应用程序所需的所有依赖项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:53:54.427

我还没有找到 Struts 2 的 BaseController [http://struts.apache.org/2.0.9/struts2-core/apidocs/index.html](http://struts.apache.org/2.0.9/struts2-core/apidocs/index.html)它看起来像一个 Spring MVC 类而不是[http://javadoc.jetbrains.net /teamcity/openapi/current/jetbrains/buildServer/controllers/BaseController.html](http://javadoc.jetbrains.net/teamcity/openapi/current/jetbrains/buildServer/controllers/BaseController.html)。我没有使用过这个类，但是它是 spring-webmvc.jar 通常包含接口的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:05:13.463

S2iA 的目标是 Struts 2.0，一个非常旧的版本。

任何状况之下：

```
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.apache.struts2.ServletActionContext;
import org.apache.tiles.AttributeContext;
import org.apache.tiles.context.TilesRequestContext;
import org.apache.tiles.preparer.ViewPreparer;

import com.opensymphony.xwork2.util.ValueStack;
import com.strutsschool.db.DB;

public class BaseController implements ViewPreparer {

    private Log log = LogFactory.getLog(this.getClass());
    protected DB db;
    private ValueStack stack;

    public void execute(TilesRequestContext tilesContext,
                        AttributeContext attributeContext) {
        stack = (ValueStack) tilesContext.getRequestScope().get(ServletActionContext.STRUTS_VALUESTACK_KEY);
    }

    public ValueStack getStack() {
        return stack;
    }

    public DB getDb() {
        return db;
    }

    public void setDb(DB db) {
        this.db = db;
    }

} 
```

# c++ - 跨不同计算机识别设备

> ID：12724031
> 
> 赞同：2
> 
> 时间：2012-10-04T09:16:21.983
> 
> 标签：c++, windows, winapi

我在这里读到：

[https://kc.mcafee.com/corporate/index?page=content&id=KB53715&cat=CORP_DATA_LOSS_PREVENTION_HOST&actp=LIST](https://kc.mcafee.com/corporate/index?page=content&id=KB53715&cat=CORP_DATA_LOSS_PREVENTION_HOST&actp=LIST)

HID、PID、VID 和 GUID 嵌入在设备的硬件中。

以下内容是否有意义：

1.  我拿了一个USB键盘，把它插到我的电脑上。
2.  我读出了设备的 HID、PID、VID 和 GUID，并将其保存在某处。
3.  我将此 HID、PID、VID 和 GUID 发送到我朋友的计算机。
4.  我的朋友插入 USB 键盘。
5.  如果 HID、PID、VID 和 GUID 匹配，那么我们有相同类型的键盘，甚至可能是相同的键盘，如果不匹配，那么我们没有键盘类型。

我问这个是因为我想区分不同计算机上的不同键盘，这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:25:24.250

是的，这是正确的。如果 PID 和 VID 匹配 - 它是相同类型的键盘。如果一切都匹配 - 它是同一个键盘。

# reporting-services - 哪些创建“动态 MDX”的方法最适合在 SSRS 中进行调试？

> ID：12724036
> 
> 赞同：2
> 
> 时间：2012-10-04T09:16:53.853
> 
> 标签：reporting-services, ssrs-2008, parameter-passing, ssas, mdx

我刚刚继承了一些似乎执行以下操作的报告：

在数据集中，有一个调用
`code.getmymdx(dateparam, anotherparam, blahblahparam,...)`

然后在代码中出现了一系列循环，天知道如何构造随后的 MDX 语句。

到目前为止，我发现“查看”MDX 的唯一方法是将表达式放在相同的文本框中，即

```
 = code.getmymdx(datep... 
```

当然有更好的方法将东西传递给 SSAS 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T06:02:18.230

哇，他们说编码大师编写的代码会编写代码，但在这种情况下，我认为这是矫枉过正。Code.getmymdx() 函数可能强制执行合法的业务规则，但如果它只是递归构造 MDX 语句的一种奇特方式，那么对于聪明但无聊的编码人员来说，这听起来只是一个有趣的项目。由于您概述的原因，在实践中不是那么有用 - 您如何查看查询文本？

诚然，MDX 是一种很难编写的语言，但是 SSRS 中有一个内置工具可以直观地编写 MDX 查询。它还允许您创建计算成员，因此在深入了解 mdx 并进行手动编辑之前，这是一个很好的起点。创建到“Microsoft SQL Server Analysis Services”的数据源连接，然后当您创建数据集并编辑查询时，它将连接到多维数据集并让您拖放字段，以及创建参数、过滤器，正如我已经说过的计算。

在某些情况下，出于各种原因（例如，组合多个数据源），我对某些报告使用了带有内联 MDX 的存储过程。在深入研究并手动编辑它之前，我仍然经常从创建 MDX 的自动工具开始。保存存储过程的 SQL Server 具有到 SSAS 实例的链接服务器连接，并在动态 SQL 中使用 Openquery()。复杂但至少您存储的过程都在一个易于管理的地方。

# c++ - 在 C++03 中将 std::string 移动到 boost::thread 中

> ID：12724040
> 
> 赞同：2
> 
> 时间：2012-10-04T09:16:59.090
> 
> 标签：c++, boost, boost-thread, stdstring, boost-move

我在没有 C++11 的多个平台和编译器上使用 boost 1.51。

在我的主线程中，我有一个非常长且昂贵的复制，`std::string` `veryLongString`我需要将其传递给一个新线程进行处理。
创建新线程后，我不再使用`veryLongString`主线程，所以我想*将*它移到`boost::thread`ctor中。
主线程或 的范围`veryLongString`可能在新线程完成之前结束，因此通过引用传递（例如 with `boost::ref`）不是一种选择。

显然，如果`veryLongString`创建为 a`shared_ptr<std::string>`那么我可以将其复制`shared_ptr`到线程 ctor 中，但事实并非如此，所以无论如何我都需要复制它。

我怎样才能`[boost::]move()` `veryLongString`进入`boost::thread`ctor （可能使用 via `boost::bind`）？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:56:50.543

如果字符串的复制成本很高，则传递一些持有它但复制成本较低的东西。例如，您可以使用`shared_ptr<std::string>`. 您可以将共享指针传递给合适的包装器，该包装器调用您实际想要调用的函数（并且可能通过引用或`const`引用获取参数）。

要将字符串放入共享指针中，您可能需要将其移到那里：

```
shared_ptr<std::string> ptr(new std::string);
ptr->swap(your_long_string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:55:40.027

您可以将它作为对构造函数的引用传递，并在构造函数中使用`move`（甚至`swap`）“移动”字符串。

# android - Android 我使用 Intent 拍照

> ID：12724043
> 
> 赞同：0
> 
> 时间：2012-10-04T09:17:02.797
> 
> 标签：android

使用此代码，我可以拍照，但在**onCreate() 中，图像的名称是静态的，例如“name.jpg”，但是当我将其更改为 new Date().toString()+".jpg"**时，它停止工作.. .请帮我根据拍摄的时间使图像的名称动态化。谢谢

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.picturelayout);
        String imageName=new Date().toString();
        path=Environment.getExternalStorageDirectory()+"/TrackMe/"+"name.jpg";
    }
    public void CLICK(View v)
    {
        File f=new File(path);

         Uri myuri=Uri.fromFile(f);
         Intent i =new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
         i.putExtra(MediaStore.EXTRA_OUTPUT, myuri);
         startActivityForResult(i, 0);
    }
     public void back(View view){
         Intent intentBack=new Intent(getApplicationContext(),SettingsActivity.class);
         startActivity(intentBack);
     }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
        if(resultCode==0)
        {
            Toast.makeText(getApplicationContext(), "Photo not taken", 
Toast.LENGTH_LONG).show();
        }
        else
        {
        Bitmap bm = BitmapFactory.decodeFile(path); 
        ImageView iv=(ImageView)findViewById(R.id.trackMePicture);
        iv.setImageBitmap(bm);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:20:27.770

生成时间戳为

```
SimpleDateFormat s = new SimpleDateFormat("ddhhmmss");
format = s.format(new Date()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:24:05.960

用这个

```
 SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd_HHmmss");
    String imageName = sdf.format(new Date());
    path=Environment.getExternalStorageDirectory()+"/TrackMe/"+imageName+".jpg"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:24:08.790

试试这个，

为了获取日期值，

```
String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date()); 
```

使用此字符串保存

```
 path=Environment.getExternalStorageDirectory()+"/TrackMe/"+"timeStamp.jpg" 
```

# c# - 处理未选中的复选框

> ID：12724045
> 
> 赞同：0
> 
> 时间：2012-10-04T09:17:07.410
> 
> 标签：c#, wpf

我正在尝试创建一种方法，用于检查我的复选框是否未选中，如果是，它将显示一个消息框，然后运行我的循环，该循环应该将我的所有部门设置为不显示，但是我似乎无法为了让我的代码检测复选框何时未选中，它只需点击第一个 if 语句并且即使未选中复选框并将其设置为 false，也不会进一步。

```
 private void displayOnWebsite_Checked(object sender, RoutedEventArgs e)
    {
        CheckBox displayOnWebsite = sender as CheckBox;

        if (displayOnWebsite.IsChecked == false)
        {
            var departments = model.Name;
            var departmentChildren = model.Children;
            var messagebox = System.Windows.MessageBox.Show("Do you wish to hide all sub deparments and products.",
                 "List of Box",
                 MessageBoxButton.YesNo);

            if (!session.IsConnected)
                session.Reconnect();

            // Used to hide child departments and products.
            if (messagebox == MessageBoxResult.Yes)
            {
                if (departmentChildren != null)
                {
                    int zeroChildren = 0;

                    if (departmentChildren.Count.Equals(zeroChildren))
                    {
                        foreach (Department children in departmentChildren)
                            children.IsVisibleOnWebsite = false;
                    }
                }
            }
            else
                System.Windows.MessageBox.Show("Nevermind then...");
        }
        else
            System.Windows.MessageBox.Show("nothing happened here");
    } 
```

WPF：

```
 <CheckBox IsChecked="{Binding IsVisibleOnWebsite}" Name="displayOnWebsite" Style="{StaticResource Label}" Checked="displayOnWebsite_Checked">Display On Website</CheckBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:30:27.740

使用“Unchecked”事件来处理取消选中。

# python - python2.4和python2.7的easy_install冲突

> ID：12724050
> 
> 赞同：-1
> 
> 时间：2012-10-04T09:17:18.343
> 
> 标签：python, easy-install, python-2.x

我已经在已经安装了 python2.4 的 CentOS 机器上的 /opt/python2.7.1/ 下安装了 python，并将其配置为默认运行 python2.7。

但是，当我编写“easy_install”时，它会引发错误，例如

```
Traceback (most recent call last):
    File "/opt/python2.7.1/bin/easy_install", line 5, in ?
        from pkg_resources import load_entry_point
    File "/usr/lib/python2.4/site-packages/pkg_resources.py", line 2482, in ?
        for dist in working_set.resolve(
    File "/usr/lib/python2.4/site-packages/pkg_resources.py", line 483, in resolve
        raise DistributionNotFound(req)  # XXX put more info here
    pkg_resources.DistributionNotFound: setuptools==0.6c11 
```

我认为`easy_install`在`/usr/bin/`指向 python2.4 的链接下。我怎样才能运行`/opt/python2.7.1/bin/easy_install`默认值？

对于 $PATH：

```
/opt/python2.7.1/bin:/usr/devs/bin:/usr/local/bin:/bin:/usr/bin:/home/ops/bin 
```

对于 $LD_LIBRARY_PATH：

```
/opt/python2.7.1/lib: 
```

对于easy_install：

```
Traceback (most recent call last):
File "/opt/python2.7.1/bin/easy_install", line 5, in ?
    from pkg_resources import load_entry_point
File "/usr/lib/python2.4/site-packages/pkg_resources.py", line 2482, in ?
    for dist in working_set.resolve(
File "/usr/lib/python2.4/site-packages/pkg_resources.py", line 483, in resolve
    raise DistributionNotFound(req)  # XXX put more info here
pkg_resources.DistributionNotFound: setuptools==0.6c11 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:05:10.370

您必须使用[virtualenv](http://www.virtualenv.org/en/latest/index.html)才能使事情正常运行，并且在具有多个 Python 版本的系统中无需担心。

实际上，如果您运行多个 Python 应用程序，即使在具有单个 Python 版本的系统 q 中，它也是相当有帮助的。

Visrtualenv 不仅会为您设置所有适当的环境变量以使用一种 Python 或另一种 Python，因为它允许您使用单独的环境，您可以安全地“轻松安装”Python 2.4 模块而不会与 CentOS .rpm 冲突这些相同模块的包。

# java - 比较器最佳实践

> ID：12724051
> 
> 赞同：5
> 
> 时间：2012-10-04T09:17:20.713
> 
> 标签：java, collections, comparator

如果我实现了一个自定义比较器，是否被认为是一种好习惯`equals`？ 此外，是否有明确的合同？`compare`
`Comparator`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T09:20:15.990

Comparator的[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)指出：

> 当且仅当 c.compare(e1, e2)==0 对于每个 e1 具有与 e1.equals(e2) 相同的布尔值时，比较器 c 对一组元素 S 施加的排序被称为与 equals 一致和 S 中的 e2。
> 
> 当使用能够施加与等于不一致的排序的比较器来对排序集（或排序映射）进行排序时，应谨慎行事。假设带有显式比较器 c 的有序集合（或有序映射）与从集合 S 中提取的元素（或键）一起使用。如果 c 对 S 施加的排序与 equals 不一致，则有序集合（或有序映射）将表现得“奇怪”。特别是有序集合（或有序映射）将违反集合（或映射）的一般合同，它是根据等式定义的。

所以答案是肯定的，这是一个很好的做法（至少对于你的第一个问题）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T09:23:16.677

Comparator 的契约[在其 javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)中定义。尤其是：

> 当使用能够施加与等于不一致的排序的比较器来对排序集（或排序映射）进行排序时，应谨慎行事。假设带有显式比较器 c 的有序集合（或有序映射）与从集合 S 中提取的元素（或键）一起使用。如果 c 对 S 施加的排序与等于不一致，则有序集合（或有序映射）将表现得“奇怪”。特别是有序集合（或有序映射）将违反集合（或映射）的一般合同，它是根据等式定义的。

通常，如果 2 个对象从一个角度看是相等的，但从一个`equals`角度看不相等`compareTo`，您可以将这两个对象作为键存储在 TreeMap 中。这可能导致不直观的行为。它也可以在特定情况下故意进行。

例如，[此答案](https://stackoverflow.com/a/12588005/829571)显示了一个示例，其中**希望 equals 和 compareTo 不一致**。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T09:21:14.150

我认为如果你觉得你正在测试平等，你只需要覆盖 equals 。通常，当我编写比较器时，它们会比较对象中的属性，并且我会继续在这些属性上使用 compareTo。

例如

```
public class ToCompare {

    public static final Comparator<ToCompare> ID_COMPARATOR = new Comparator(){
        @Override
        public int compare(ToCompare o1, ToCompare o2) { 
             return o1.id.compareTo(o2.id);
        }
    }
    private Integer id;
    //... other fields here

} 
```

我倾向于将这些比较器作为公共静态最终字段存储在对象中，以便可以从任何可能想要对该对象进行排序的代码中访问它们。如果对象已更新（添加/删除字段），那么我可以立即查看比较器是否存在问题，而不是通过所有代码查找问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T09:46:42.283

是的。正如[Comparator](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)的 java doc 中所建议的那样， 我会说这取决于您的需求。

> 例如，假设将两个元素 a 和 b 相加，使得 (a.equals(b) && c.compare(a, b) != 0) 到具有比较器 c 的空 TreeSet。第二个 add 操作将返回 true（并且树集的大小将增加），因为从树集的角度来看 a 和 b 不等价，即使这与 Set.add 方法的规范相反。

但是，如果您考虑下面的示例，您只需对特定列表进行排序，那么您可能不必这样做。

`Employee`让我们以具有两个属性`id`的Class 为例`name`。

```
class Employee {
    int id;// sample so access not considered
    String name;// sample so access not considered
} 
```

假设有两个单独的选项对列表进行排序`id`或`name`单独排序。为了实现这一点，我需要实现两个比较器，一个在名称上进行比较`id`，另一个`compares`在名称上进行比较。

现在，如果我想根据`id`它的类型来实现比较器，`int`那么包装器类型`Integer`和`Integer`提供`compareTo`方法就使用它。

的情况也是如此`String`。这样你就不必担心写作`compare`或`compareTo`方法。

在编写方法时我几乎不需要考虑，`compare`因为我总是在对象的属性上使用内置方法。

```
class EmpIdComparator implements Comparator<Employee> {

    @Override
    public int compare(Employee o1, Employee o2) {
        return Integer.valueOf(o1.id).compareTo(o2.id);// Make use of
                                                        // existing
                                                        // comparators
                                                        // provided by java
    }

}

class EmpNameComparator implements Comparator<Employee> {

    @Override
    public int compare(Employee o1, Employee o2) {
        return o1.name == null ? o2.name == null ? 0 : 1 : o1.name
                .compareTo(o2.name);// Make use of
        // existing
        // comparators
        // provided by java
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-23T10:25:09.890

我觉得其他答案没有抓住重点：`Comparator`的比较方法比较两个给定的参数，而一个`Comparator`等于方法将`Comparator`自身与另一个对象进行比较。

`Comparator#equals`至少较新的 JDK的 javadoc详细解释了它：

```
/**
 * Indicates whether some other object is &quot;equal to&quot; this
 * comparator.  This method must obey the general contract of
 * {@link Object#equals(Object)}.  Additionally, this method can return
 * <tt>true</tt> <i>only</i> if the specified object is also a comparator
 * and it imposes the same ordering as this comparator.  Thus,
 * <code>comp1.equals(comp2)</code> implies that <tt>sgn(comp1.compare(o1,
 * o2))==sgn(comp2.compare(o1, o2))</tt> for every object reference
 * <tt>o1</tt> and <tt>o2</tt>.<p>
 *
 * Note that it is <i>always</i> safe <i>not</i> to override
 * <tt>Object.equals(Object)</tt>.  However, overriding this method may,
 * in some cases, improve performance by allowing programs to determine
 * that two distinct comparators impose the same order.
 *
 * @param   obj   the reference object with which to compare.
 * @return  <code>true</code> only if the specified object is also
 *          a comparator and it imposes the same ordering as this
 *          comparator.
 * @see Object#equals(Object)
 * @see Object#hashCode()
 */
boolean equals(Object obj); 
```

因此，重写 .equals 方法很少有用`Comparator`。`Comparable`不过会有所不同。

# visual-studio-2012 - TFS 2012 查询所有签出的文件

> ID：12724052
> 
> 赞同：4
> 
> 时间：2012-10-04T09:17:22.960
> 
> 标签：visual-studio-2012

> **可能重复：**
> [其他用户签出在源代码管理资源管理器 (TFS Express) 中不可见](https://stackoverflow.com/questions/12621607/other-users-checkouts-are-not-visible-in-source-control-explorer-tfs-express)

对于 TFS 2010，我使用 Team Foundation SideKicks 检查我们团队中的某个人是否已签出文件。

在 TFS2012 中，Team Foundation Sidekicks 不再起作用。

所以我想弄清楚如何查看某人（任何人）是否已签出文件。所以我自己检查了一些文件，以进行测试。

**首先**：在 VS2012 > Source Control Explorer > Rightmouse on $\ (top root node) > Find > Find By Status > Path": $/, Wildcard left empy > Checked Recursive > Checked Status > Checked Display all check out. > 查找按钮.

结果：没有！！！未找到任何项目。啊？？？？？？？这怎么可能。我已签出文件，如果我浏览到该节点，我会看到已签出的文件。这里发生了什么？？？？？？？？

这是bug？？？

**第二**：命令行：

```
tf.exe status $/ /s:http://[server]:8080/tfs /recursive 
```

信息：

```
Changes from local workspaces will not be displayed when using the /user option
if a workspace is not supplied or if that workspace is on another machine.
There are no pending changes. 
```

我认为这是因为我们使用的是本地工作区？我仍想使用本地工作区。

但是我如何检查是否有人签出了文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:01:03.317

好的，我发现了问题......

在 vs2012 中编辑工作区时，在高级视图中（编辑工作区时单击高级按钮），有一个名为“位置”的属性。这被设置为“本地”。当我们将其设置为“服务器”时，上述所有查询都再次起作用。

似乎这是 TFS2012/VS2012 中的一个新功能。而在 TFS2010/VS2010 时代，默认值类似于“服务器”。

问题解决了....

# objective-c - 如何在 UIWebView 中查看特殊字符？

> ID：12724055
> 
> 赞同：0
> 
> 时间：2012-10-04T09:17:37.937
> 
> 标签：objective-c, ios5

我试图在 UIWebView 中显示特殊字符，但它没有显示任何内容。这条线是“100% 纯棉”，但目前它显示“100ure 棉”我现在将如何显示它提前谢谢

# c++ - 立即检测 Windows 上的堆损坏错误。如何？

> ID：12724057
> 
> 赞同：14
> 
> 时间：2012-10-04T09:17:45.630
> 
> 标签：c++, c, heap-memory, heap-corruption, virtualalloc

我睡不着！:)

我在 Windows 上有一个相当大的项目，遇到了一些堆损坏问题。我已经阅读了所有内容，包括这个不错的主题：[如何调试堆损坏错误？](https://stackoverflow.com/q/1010106/1065190)，但是没有什么可以开箱即用地帮助我。`Debug CRT`并`BoundsChecker`检测到堆损坏，但地址总是不同的，检测点总是远离实际的内存覆盖。我直到半夜才睡觉，并制作了以下技巧：

```
DWORD PageSize = 0;

inline void SetPageSize()
{
    if ( !PageSize )
    {
        SYSTEM_INFO sysInfo;
        GetSystemInfo(&sysInfo);
        PageSize = sysInfo.dwPageSize;
    }
}

void* operator new (size_t nSize)
{
    SetPageSize();
    size_t Extra = nSize % PageSize;
    nSize = nSize + ( PageSize - Extra );
    return Ptr = VirtualAlloc( 0, nSize, MEM_COMMIT, PAGE_READWRITE);
}

void operator delete (void* pPtr)
{
    MEMORY_BASIC_INFORMATION mbi;
    VirtualQuery(pPtr, &mbi, sizeof(mbi));
    // leave pages in reserved state, but free the physical memory
    VirtualFree(pPtr, 0, MEM_DECOMMIT);
    DWORD OldProtect;
    // protect the address space, so noone can access those pages
    VirtualProtect(pPtr, mbi.RegionSize, PAGE_NOACCESS, &OldProtect);
} 
```

一些堆损坏错误变得很明显，我能够修复它们。退出时不再有 Debug CRT 警告。但是，我对这个 hack 有一些疑问：

**1.**它会产生任何误报吗？

**2.**它可以遗漏一些堆损坏吗？（即使我们替换 malloc/realloc/free？）

**3.**它无法在 32 位上运行`OUT_OF_MEMORY`，只能在 64 位上运行。我是对的，我们只是用完了 32 位的虚拟地址空间吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T09:54:29.590

> 它会产生任何误报吗？

因此，这只会捕获“在 free() 之后使用”类的错误。为此，我认为这是相当不错的。

如果你尝试`delete`一些没有被`new`编辑过的东西，那是一种不同类型的错误。`delete`您应该首先检查内存是否确实已分配。您不应该盲目地释放内存并将其标记为不可访问。我会尽量避免这种情况并报告（例如，通过调试中断）当有人尝试`delete`不应该删除的东西时，因为它从未被删除`new`。

> 它可以错过一些堆损坏吗？（即使我们替换 malloc/realloc/free？）

显然，这不会捕获`new`和 和 各自的堆数据的所有损坏`delete`。它只会捕获那些在 之后尝试过的人`delete`。

例如：

```
myObj* = new MyObj(1,2,3);
// corruption of *myObj happens here and may go unnoticed
delete myObj; 
```

> 它无法在 32 位目标上运行并出现 OUT_OF_MEMORY 错误，只能在 64 位上运行。我们只是用完了 32 位的虚拟地址空间，我说得对吗？

通常，在 32 位 Windows 上，您可以使用大约 2GB 的虚拟地址空间。这对于最多 ~524288`new`就像在提供的代码中一样。但是对于大于 4KB 的对象，您将能够成功分配比这更少的实例。然后地址空间碎片将进一步减少这个数字。

如果您在程序的生命周期中创建了许多对象实例，这是一个完美的预期结果。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-04T09:36:46.063

这不会抓住：

*   使用未初始化的内存（一旦你的指针被分配，你可以随意从中读取垃圾）
*   缓冲区溢出（除非您超出 PageSize 边界）

理想情况下，您应该在分配的块之前和之后编写一个众所周知的位模式，以便`operator delete`检查它们是否被覆盖（指示缓冲区溢出或不足）。

目前，这将在您的方案中静默允许，并且切换回`malloc`etc. 将允许它*静默*损坏堆，并在稍后显示为错误（例如，在溢出后释放块时）。

但是您无法捕获所有内容：请注意，例如，如果潜在问题是（有效）指针某处被垃圾覆盖，则在取消引用损坏的指针之前您无法检测到这一点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-21T18:28:11.720

是的，您当前的答案可能会错过**缓冲区** **under-**和**overruns**的堆损坏。
你的*delete()*函数非常好！
我以类似的方式实现了一个*new()*函数，它为欠载和溢出添加了保护页面。
从**GFlags**文档中，我得出结论，它只能防止溢出。

请注意，当仅返回一个靠近欠载保护页面的指针时，溢出保护页面很可能位于远离分配对象的位置，并且在分配的对象**未受保护之后****紧邻**。 为了弥补这一点，需要返回这样一个指针，即对象位于溢出保护页面之前（在这种情况下，再次不太可能检测到欠载）。 下面的代码为每次调用*new()*交替执行一个或另一个。或者有人可能想要修改它以使用线程安全随机生成器来防止对调用*new()*的代码产生任何干扰。 ****考虑到这一切，人们应该意识到，通过以下代码检测不足和溢出在一定程度上仍然是概率性的——这在某些对象在整个程序期间仅分配一次的情况下尤其重要。****

 ******注意！**因为*new()*返回一个修改后的地址，*delete()*函数也必须进行一些调整，所以它现在使用*mbi.AllocationBase*而不是*ptr*来表示*VirtualFree()*和*VirtualProtect()*。

PS。*[Driver Verifier](http://msdn.microsoft.com/en-us/library/windows/hardware/ff545470(v=vs.85).aspx "驱动程序验证器")的* [Special Pool](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551832(v=vs.85).aspx "特别池")使用了类似的技巧。

```
volatile LONG priorityForUnderrun = rand(); //NB! init with rand so that the pattern is different across program runs and different checks are applied to global singleton objects

void ProtectMemRegion(void* region_ptr, size_t sizeWithGuardPages)
{
    size_t preRegionGuardPageAddress = (size_t)region_ptr;
    size_t postRegionGuardPageAddress = (size_t)(region_ptr) + sizeWithGuardPages - PageSize;   

    DWORD flOldProtect1;
    BOOL preRegionProtectSuccess = VirtualProtect(
        (void*)(preRegionGuardPageAddress),
        pageSize,
        PAGE_NOACCESS,
        &flOldProtect1  
    );

    DWORD flOldProtect2;
    BOOL postRegionProtectSuccess = VirtualProtect(
        (void*)(postRegionGuardPageAddress),
        PageSize,
        PAGE_NOACCESS,
        &flOldProtect2  
    );
}   

void* operator new (size_t size)
{
    size_t sizeWithGuardPages = (size + PageSize - 1) / PageSize * PageSize + 2 * PageSize;

    void* ptr = VirtualAlloc
    (
        NULL,
        sizeWithGuardPages,
        MEM_COMMIT | MEM_RESERVE,
        PAGE_READWRITE
    );

    if (ptr == NULL)    //NB! check for allocation failures
    {
        return NULL;
    }

    ProtectMemRegion(ptr, sizeWithGuardPages);

    void* result;
    if (InterlockedIncrement(&priorityForUnderrun) % 2)
        result = (void*)((size_t)(ptr) + pageSize);
    else 
        result = (void*)(((size_t)(ptr) + sizeWithGuardPages - pageSize - size) / sizeof(size_t) * sizeof(size_t)); 

    return result;
}   

void operator delete (void* ptr) 
{
    MEMORY_BASIC_INFORMATION mbi;
    DWORD OldProtect;

    VirtualQuery(ptr, &mbi, sizeof(mbi));
    // leave pages in reserved state, but free the physical memory
    VirtualFree(mbi.AllocationBase, 0, MEM_DECOMMIT);
    // protect the address space, so noone can access those pages
    VirtualProtect(mbi.AllocationBase, mbi.RegionSize, PAGE_NOACCESS, &OldProtect);
} 
```****

# cakephp - 在 CakePHP 2.2 中更改验证错误重定向

> ID：12724065
> 
> 赞同：0
> 
> 时间：2012-10-04T09:18:09.527
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-2.2

我有一个与多个控制器交互的视图（帖子、评论、类别...）

如果评论不为空，它将执行相同的操作（评论/添加），但在这种情况下，我会手动将它们再次重定向到上一个视图，如下所示：

```
$this->redirect(array('controller' => 'posts', 'action' => 'view', $this->request->data['Comment']['posts_id'], '#' => $this->Comment->id)); 
```

问题是，例如，当他们尝试发布空评论时，评论的验证会将其重定向到评论/添加（这是表单操作上的路由），但我不希望重定向这样做。我希望它恢复到原始视图，并且无论如何我都不需要在控制器或模型上更改它（据我所知）

有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:39:31.803

最简单的方法是通过 AJAX 提交表单。因此，您不会在提交时刷新整个页面 - 您只需将表单返回，并带有错误（如果有的话）。

显然，这不适用于没有 Javascript 的用户。所以你可以不用担心这些用户，或者你可以让你的评论控制器的 add 方法使用你想要的视图。像这样的东西：

```
if ($this->request->is('ajax')) {
    $this->render('/Elements/comment_form');
    return;  // return the form only
} else {
    $this->render('/Posts/view'); // Your post view.ctp would have the comment form on it.
} 
```

以下是我使用该方法的页面示例：[http://www.lintonmeagher.com/contact](http://www.lintonmeagher.com/contact)尝试提交其中一个没有数据的表单。

如果您需要更多信息，请告诉我。

# ruby - Sinatra - 注册启动和关闭操作

> ID：12724066
> 
> 赞同：1
> 
> 时间：2012-10-04T09:18:12.693
> 
> 标签：ruby, sinatra

我正在使用 Sinatra 设计一个 Web 服务，我需要在服务启动时执行某些操作，而在服务器停止时执行一些其他操作。

如何注册这些操作以与 sinatra 完全集成？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:03:19.937

答案取决于您需要如何执行操作。它们是否需要为每个 ruby​​ 进程运行，还是只需要为服务运行一次。我想这是所有服务的一次，并且在最新的情况下：

您可能想在 Sinatra 应用程序启动之前运行一些代码，但这并不是您所期望的行为。稍后我会解释为什么。解决方法是在您的 sinatra 类之前添加代码，例如

```
require "sinatra"
puts "Starting"

get "/" do 
  ...
end 
```

顺便说一句，您也可以在 config.ru 中添加一些代码，效果相同，但我不知道哪个更丑。

为什么这是错误的？因为当您托管您的 Web 服务时，将触发许多 Web 服务器实例，并且每个实例都将执行 puts 方法或您的“启动”代码。当您想要初始化应用程序实例本地的东西时，这是正确的，例如数据库连接，但不初始化所有它们共享的东西。

关于代码最后触发的问题，你不能（或者你可以用一些非常丑陋的解决方法，但你会以与开始时相同的问题结束）。

因此，处理开启和关闭操作的最佳方式是将其包装在您的任务中，以触发您的服务。

1.  运行一些 rake 任务或 ruby​​ 脚本来完成你的初始化工作
2.  启动您的网络服务器

并阻止它

1.  运行停止服务器的 rake 任务或 ruby​​ 脚本
2.  运行执行清理操作的 rake 任务或 ruby​​ 脚本。

您可以通过直接从 ruby​​ 启动您的应用服务器，将它们包装到一个单一的 rake 任务中，就像我在[https://github.com/TactilizeTeam/photograph/blob/master/bin/photograph](https://github.com/TactilizeTeam/photograph/blob/master/bin/photograph)中所做的那样。

这样，您可以在启动服务之前轻松添加一些代码以运行，仍然将其保留在单个任务中。通过一些管道，我想您可以启动多个精简实例，然后允许您启动您的精简（或任何您使用的）实例集群，并且仍然有一项任务可以依赖。

我想说向 SIGINT 信号添加处理程序可以让您在退出之前运行一些代码。请参阅[http://www.ruby-doc.org/core-1.9.3/Signal.html](http://www.ruby-doc.org/core-1.9.3/Signal.html)了解如何执行此操作。您可能想检查 Thin 是否还没有为该信号注册陷阱，我不确定这是在库中处理还是在用于启动 Thin 的脚本中处理（ $PATH 中的“瘦”可执行文件）。

处理退出的另一种方法是拥有一个看门狗进程，该进程检查您的集群是否正在运行，如果没有更多实例在运行，则可以确保正在运行停止代码。

# graphics - directx 11 中的 getBuffer() 和 CreateRenderTargetView 有什么区别？

> ID：12724068
> 
> 赞同：0
> 
> 时间：2012-10-04T09:18:14.643
> 
> 标签：graphics, directx, directx-11, rendertarget

我是 DirectX11 的新手并且正在学习它。（我来自openGL背景）。

我很困惑，并试图了解以下 API 调用的确切作用以及它们之间的区别：

```
ID3D11Texture2D* pBackBuffer = NULL;
hr = g_pSwapChain->GetBuffer( 0, __uuidof( ID3D11Texture2D ), ( LPVOID* )&pBackBuffer ); 
```

和

```
hr = g_pd3dDevice->CreateRenderTargetView( pBackBuffer, NULL, &g_pRenderTargetView );
pBackBuffer->Release(); 
```

`GetBuffer`真正做什么？那么我们如何使用`pBackBuffer`in`CreateRenderTargetView`呢？另外，有人可以解释或指向一个链接来解释什么是**渲染目标视图**？[msdn 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476582%28v=vs.85%29.aspx)对我来说没有多大意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:52:43.367

我记得， `GetBuffer()`返回指向设备使用的内部后备缓冲区的指针。然后从那里创建一个`RenderTarget`可以绑定为`"Real backbuffer"`目标的对象。

把它想象成： `pBackbuffer = glBindFramebuffer(GL_FRAMEBUFFER, 0);`

我就是这样记的。（前段时间我用 dx11 做了这个）

编辑* 和`rendertargetview`, 是`framebuffer`. 它是一种纹理，您可以绑定以进行读取和写入。

# objective-c - 位置管理器不工作，信号量错误，没有调用代表，为什么？

> ID：12724069
> 
> 赞同：1
> 
> 时间：2012-10-04T09:18:15.940
> 
> 标签：objective-c, ios, gps, automatic-ref-counting, core-location

我相信我已经阅读并遵循了大多数关于如何为用户接收位置更新的教程。我有一个类（UserTracker），它导入 CoreLocation 并实现正确的委托协议。我也实施了正确的方法。问题是当我用这种方法测试类时：

```
-(bool)test
{
    UserTracker * ut = [[UserTracker alloc] init];
    [ut startTracking]; 

    [NSThread sleepForTimeInterval:30];

    [ut stopTracking];

    NSLog(@"Accumulated distance is %f m", [pt sumDist]);

    return true;
} 
```

我收到以下错误：

```
libdispatch.dylib`dispatch_semaphore_signal:
0x1e07e02:  movl   4(%esp), %eax
0x1e07e06:  movl   $1, %ecx
0x1e07e0b:  lock                         Thread 1: EXC_BAD_ACCESS (code=2, address=0x20)
0x1e07e0c:  xaddl  %ecx, 32(%eax)
0x1e07e10:  incl   %ecx
0x1e07e11:  testl  %ecx, %ecx
0x1e07e13:  jg     0x1e07e22                 ; dispatch_semaphore_signal + 32
0x1e07e15:  cmpl   $2147483648, %ecx
0x1e07e1b:  je     0x1e07e25                 ; dispatch_semaphore_signal + 35
0x1e07e1d:  jmp    0x1e081c1                 ; _dispatch_semaphore_signal_slow
0x1e07e22:  xorl   %eax, %eax
0x1e07e24:  ret    
0x1e07e25:  ud2 
```

顺便说一句，两者都在同一个线程上运行（这是一个问题吗？）。

UserTrack.m 中的一些方法：

```
-(void)startTracking
{
    if(_isTracking)
        return;
    // Clear old data
    [_locations removeAllObjects];
    [_lm startUpdatingLocation];
    _isTracking = true;
    NSLog(@"is tracking!");
}

// Stop tracking GPS coordinates
-(void)stopTracking
{
    if (!_isTracking)
        return;
    if(_lm != nil)
        [_lm stopUpdatingLocation];
    _isTracking = false;
    NSLog(@"STOPPED TRACKING");
}

-(id)init
{
    if(self = [super init])
    {
        _isTracking = false;
        _locations = [[NSMutableArray alloc] init];
        _lm = [[CLLocationManager alloc] init];
        _lm.delegate = self;
        _lm.distanceFilter = kCLDistanceFilterNone; // whenever we move
        _lm.desiredAccuracy = kCLLocationAccuracyBestForNavigation;
    }

    return self;
} 
```

也在同一个类中实现：

```
-(void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
-(void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
// Callback: new GPS coordinate available
-(void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation 
```

没有被调用...这是线程问题吗？为什么我会收到这个奇怪的信号量错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:17:45.867

位置管理器类在这里进行了测试：

```
int main(int argc, char *argv[])
{
    @autoreleasepool
    {
        // TODO: remove this class
        BPTest * bt = [[BPTest alloc] init];
        [bt runTests];
        // Above must be removed and the location test inserted directly here...

        return UIApplicationMain(argc, argv, nil, NSStringFromClass([BPAppDelegate class]));    
    }
} 
```

作为一种快速的“hacky”方式来测试它......只有当我试图将测试完全移出“BPTest”类并在调用“UIApplicationMain”之前直接执行它时，才似乎得到了委托方法叫...

# perl - 是否保证在文档中的任何地方，具有相同键的散列也将具有相同的顺序？

> ID：12724071
> 
> 赞同：8
> 
> 时间：2012-10-04T09:18:22.560
> 
> 标签：perl, hash

Perl 中的哈希键顺序没有太多保证。在我找不到的文档中是否有任何提及会说只要两个哈希使用完全相同的键，它们就会以完全相同的顺序排列？

简短的测试似乎证实了这一点。即使我在分配给两个不同的哈希之间为内部键表生成了一些额外的键，它们的键也会以相同的顺序返回：

```
my %aaa;
my %bbb;
my %ccc;
my %ddd;

@aaa{qw(a b c d e f g h i j k l)}=();
# Let's see if generating more keys for internal table matters
@ccc{qw(m n o p q r s t u v w x)}=();
@bbb{qw(a b c d e f g h i j k l)}=();
# Just to test if different insertion order matters
@ddd{qw(l k c d e f g h i j a)}=(); $ddd{b} = ();

print keys %aaa, "\n";
print keys %bbb, "\n";
print keys %ddd, "\n"; 
```

但是，我不会依赖 udocumented 行为，唯一可以在文档中轻松找到的事实是，只要不修改哈希，所有这些都将使用相同的顺序`keys`。`values``each`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-04T09:25:09.127

来自 perlsec：

> **Perl 从不保证散列键的任何顺序**，并且在 Perl 5 的生命周期中，顺序已经改变了好几次。此外，散列键的顺序一直并且继续受到插入顺序的影响。

[http://perldoc.perl.org/perlsec.html](http://perldoc.perl.org/perlsec.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-04T14:58:35.013

更长的测试证明了这一点。

因此，具有相同键集的不同哈希*并不*总是具有相同的顺序。对我来说，下面的程序演示了两个带有键的哈希`qw(a b c d e f)`的顺序可能不同：

```
v5.16.0
%h1: ecabdf
%h2: eadcbf 
```

程序：

```
#!/usr/bin/env perl

use strict;
use warnings;
use feature qw(say);

# http://stackoverflow.com/q/12724071/132382

use constant KEYS => qw(a b c d e f);

my %h1 = map { $_ => undef } KEYS;
my %h2 = map { $_ => undef } KEYS;

delete @h2{'b', 'd', 'f'};
@h2{'x', 'y', 'z'} = ();
@h2{'b', 'd', 'f'} = ();
delete @h2{'x', 'y', 'z'};

say $^V;
say '%h1: ', keys(%h1);
say '%h2: ', keys(%h2); 
```

## 更新

这是一个更简单的演示，仅插入顺序很重要：

```
$ perl -MList::Util=shuffle -E \
> '@keys = ('a'..'z'); @h1{@keys} = @h2{shuffle @keys} = ();
> say keys(%$_) for (\%h1, \%h2)'
wraxdjyukhgftienvmslcpqbzo
warxdjyukhgftienmvslpcqbzo
#^^             ^^  ^^
#||             ||  || 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-04T17:55:17.703

特别保证这是不可靠的。

请参阅完整的[算法复杂性攻击](http://perldoc.perl.org/perlsec.html#Algorithmic-Complexity-Attacks)部分`perlsec`。尽管令人遗憾的不一致，但它指出

*   在 5.8.1 中，保证每次的顺序都是随机的。
*   在 5.8.2 及更高版本中，顺序将是相同的，除非 Perl 检测到异常行为（特别是，一系列键都将散列到少量存储桶，导致散列性能受损）。在这些情况下，“函数受到伪随机种子的干扰”。

文档不*保证*顺序始终相同；事实上，它特别指出，在病理情况下它是*不可*预测的。如果在将来的版本中更改散列函数，以前不会生成退化散列的数据现在可能会这样做，然后会受到随机扰动的影响。

所以要点是，如果您不使用 5.8.1，*也许*您会得到相同的顺序，并且当您更新 Perl 时它可能不会改变，但它可能会改变*。*如果您使用的是 5.8.1，则*保证*随机顺序。

如果您想要一个可靠的顺序，请使用提供具有保证键顺序的哈希的 CPAN 类之一 - [Tie::Hash::Indexed](http://p3rl.org/Tie%3a%3aHash%3a%3aIndexed)，[Tie::IxHash](http://p3rl.org/Tie%3a%3aIxHash) - 或者只是对您的键进行排序。如果您有一个少于几千个键的散列，您可能不会注意到明显的差异。如果它有更多，也许你应该考虑一个更重的解决方案，比如数据库。

编辑：为了让它更有趣，[从 5.18 开始，键将随机排序](http://www.perlmonks.org/?node_id=1005122)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-04T16:17:15.323

这是一个比[@pilcrow](https://stackoverflow.com/a/12730135/100754)短的反例（当我第一次看这个问题时，显然我错过了他的答案）：

```
#!/usr/bin/env perl

use strict; use warnings;

my @hashes = (
    { map { $_ => rand } 'a' .. 'z' },
    { map { $_ => rand } 'a' .. 'd', 'f' .. 'z' }
);

delete $hashes[0]{e};

print "@{[ keys %$_ ]}\n" for @hashes; 
```

输出：

```
C:\温度> t
wraxdjyukhgftinvmslcp q b zo
wraxdjyukhgftinvmslcp b qzo
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-04T09:24:51.007

[perldoc -f keys](http://perldoc.perl.org/functions/keys.html)有一些关于排序的信息：

> 哈希的键以明显随机的顺序返回。实际的随机顺序在 Perl 的未来版本中可能会发生变化，但它保证与值或每个函数产生的顺序相同（假设哈希没有被修改）。**从 Perl 5.8.1 开始，出于安全原因，即使在 Perl 的不同运行之间，排序也可能不同**（请参阅 perlsec 中的算法复杂性攻击）。

所以唯一的保证是不保证订购。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-24T11:04:03.043

从至少 5.18 开始，在[perldoc perlsec](http://perldoc.perl.org/perlsec.html#Algorithmic-Complexity-Attacks)中明确提到了以下内容：

> `keys`, `values`, 并`each`以每个哈希随机顺序返回项目。通过插入修改哈希将更改该哈希的迭代顺序。

* * *

> Perl 从未保证哈希键的任何顺序，并且在 Perl 5 的生命周期中顺序已经改变了好几次。此外，哈希键的顺序一直并且继续受到插入顺序和历史记录的影响哈希在其生命周期内所做的更改。

因此，具有相同键集的两个哈希不能明确保证以相同的顺序迭代。

# object - 我可以向主干视图添加属性吗？

> ID：12724073
> 
> 赞同：5
> 
> 时间：2012-10-04T09:18:37.327
> 
> 标签：object, backbone.js, backbone-views

我已经与骨干合作了一段时间，现在我正在使用许多视图。在我的一些观点中，我有时会添加自定义属性，例如：

```
 var DataGrid = Backbone.View.extend({
        className:"datagrid",
        lookup: {
            header: "", //Header wrapper row element
            headers: [], //Views in header
            body: "", //Body wrapper row element
            rows: [] //Views in body
        },

        events: {
            ...
        },

        initialize: function() {
            ...
        },

        render: function() {
            ...
        }
    }); 
```

如您所见，我将“查找”作为对象的额外属性。我在许多视图中使用 DataGrid，我遇到了一种非常奇怪的行为。当我在使用 DataGrid 的视图之间切换时，“查找”仍将填充旧数据。我在创建新 DataGrid 时使用“new”，但我仍然找到旧数据。我错过了什么吗？

**编辑：在@rabs 回复之后。我对 Backbone 中的静态变量进行了搜索，发现：[Simplify using static class properties in Backbone.js with Coffeescript](http://taurenmills.wordpress.com/2011/10/08/backbone-js-with-class-properties/)**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-30T15:03:42.107

我知道（不久前）已经接受了一个答案，但是当我最近在从事骨干项目时遇到这个问题时，我认为值得一提的是，您也可以将属性定义为函数。这对于需要将属性设置为当前模型中的值的视图特别有用。

通过将属性定义为函数，您可以执行类似的操作

```
var myObject = Backbone.View.extends({
    attributes: function() {
        if(this.model) {
            return {
                value: this.model.get('age')
            }
        }
        return {}
    }
}); 
```

希望对某人有所帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T09:32:14.620

以这种方式声明变量，变量的范围是类而不是实例，类似于静态或类变量。

所以是的，查找对象将在您的不同实例之间共享。

当您创建它时，您可以将查找对象传递给您的实例，这样它将表现为实例变量。

# html - 后退按钮在 jquery mobile 中不起作用

> ID：12724075
> 
> 赞同：0
> 
> 时间：2012-10-04T09:18:43.790
> 
> 标签：html, jquery-mobile

您好朋友，我创建了两个页面，第一页是`index.html`，第二页是`about.html`。我只想在`about.html`使用 jQuery mobile 时添加返回按钮。我已经尝试过了，但是后退按钮在我的代码中不起作用我不知道是什么问题

**HTML**

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>Page Title</title> 

    <meta name="viewport" content="width=device-width, initial-scale=1"> 

    <link rel="stylesheet" href="jquery.mobile-1.2.0.min.css" />
    <script src="jquery-1.8.2.min.js"></script>
    <script src="jquery.mobile-1.2.0.min.js"></script>
</head> 

<body> 
    <div data-role="page">
    <div data-role="data-add-back-btn ">Back</div>
        <div><h1>Page title</h1>
        <a href="about.html" data-role="button">About us</a></div>
    </div>
</body>
</html> 
```

请帮我。提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T09:34:12.400

您可以尝试使用`data-rel="back"`以下方法创建后退按钮：

```
<a data-role="button" data-rel="back">Back</a> 
```

**完整的 HTML：**

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>Page Title</title> 

    <meta name="viewport" content="width=device-width, initial-scale=1"> 

    <link rel="stylesheet" href="jquery.mobile-1.2.0.min.css" />
    <script src="jquery-1.8.2.min.js"></script>
    <script src="jquery.mobile-1.2.0.min.js"></script>
</head> 

<body> 
    <div data-role="page">
        <a data-role="button" data-rel="back">Back</a>
        <div>
            <h1>Page title</h1>
            <a href="about.html" data-role="button">About us</a>
        </div>
    </div>
</body>
</html> 
```

查看`"Back" button links`在线文档部分以获取更多信息：http: [//jquerymobile.com/demos/1.2.0/docs/pages/page-links.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-links.html)

# iphone - 在 iphone 上部署使用 DashCode 制作的 Web 应用程序项目

> ID：12724076
> 
> 赞同：0
> 
> 时间：2012-10-04T09:18:59.217
> 
> 标签：iphone, dashcode

我已经使用 Dashcode for iPhone 开发了一个 Web 应用程序项目。

它在 iPhone 模拟器上运行良好。谁能帮我将它部署在 iPhone 上并进行测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:11:36.857

webapp 基本上是一个基于 HTML CSS 和 JS 并且完全在移动设备的网络浏览器上运行的应用程序。

我正在从 Safari 浏览器调用我的应用程序的 URL，因此能够看到它。

# c++ - C++ 重载 -> 运算符，它是如何工作的？

> ID：12724078
> 
> 赞同：1
> 
> 时间：2012-10-04T09:19:02.780
> 
> 标签：c++, operator-overloading

我试图实现一个类似于标准库 auto_ptr 的智能指针类，因此我不得不重载 -> 运算符。这是我的代码

```
template <typename T>
class SmartPtr
{

   T * operator -> ()
  {
    return _pAct;
  }

 private:
 T * _pAct;
}; 
```

其余的实现没有显示，以避免转移我的查询。

现在我创建一个 A 类的 SmartPtr 并在其上调用 A 中的 Show() 方法：

```
SmartPtr smPtr(new A);
smPtr->Show(); 
```

这是我的查询（不知道它是否也有效）

由于 SmartPtr::operator->() 返回 A*，因此对 show 的调用应转换为 (A*)Show。为什么它转换为 (A*)->Show() ？

或者换句话说， smPtr->Show() 如何在任何 smPtr->() 运算符返回时调用 Show() ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T09:21:15.210

因为运算符`->`按顺序应用，直到不能再应用为止。

### 13.5.6 类成员访问 [over.ref]

> 1)`operator->`应该是一个不带参数的非静态成员函数。`-> postfix-expression -> id-expression` **它使用一个表达式`x->m``(x.operator->())->m``x``T``T::operator->()`**来实现类成员访问，**如果** **存在并且如果运算符被重载决策机制（13.3）选择为最佳匹配函数，则表达式****被解释为****类型****的类对象。**（强调我的）

这意味着，在您的情况下，它转化为：

```
smPtr.operator->()->Show();
          |           |
      returns A*   call Show on the A* 
```

# unix - 查找当前光标单词并从光标行之前找到所有相同的单词 vim 中的光标行

> ID：12724080
> 
> 赞同：0
> 
> 时间：2012-10-04T09:19:25.943
> 
> 标签：unix, vim

在当前行之前找到位于光标位置的单词假设如果我的光标在行中，则单词上的光标是“and”我想将光标移动到光标行之前的所有“and”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T09:23:45.553

只需使用`#`. 如果要向前搜索，请使用`*`.

[这](http://www.viemu.com/vi-vim-cheat-sheet.gif)是基本 vim 功能的备忘录。

# jquery-ui - 避免使用多组对 JQGrid 中的行进行客户端排序

> ID：12724081
> 
> 赞同：1
> 
> 时间：2012-10-04T09:19:26.533
> 
> 标签：jquery-ui, jquery, jquery-plugins, jqgrid

我注意到，一旦通过 ajax getJSon() 检索到值列表，JQGrid 中的多分组会引发行排序以内联方式重新排列。有时，重新排序会将相同元素的组拆分为多个组，这是应该的。

我想解决方案是避免客户端对 JQGrid 行进行重新排序，目的是明确地**重用 JSON 中给出的相同顺序而不进行更改**——正如服务器返回的那样。

我正在使用以下配置：

```
jq("#myGrid").jqGrid({
  datatype: 'local',
  data: myvar.detail,  // a well formatted json locally stored
  colNames: [ ....],
  colModel: [
    {name:'nome_attr',index:'nome_attr', sorttype: function () {return 1;}, editable:true, editrules:{required:true}, editoptions:{size:27}, align:'center'},
    {name:'desc_attr', index:'desc_attr', sorttype: function () {return 1;}, editable:true, editrules:{required:false}, edittype: "textarea",editoptions:{rows:5, cols:25}, hidden:true},
    {name:'valore',index:'valore', sorttype: function () {return 1;},editable:true, editrules:{required:false}, editoptions:{size:30}, width:120},
     ....
          ],
   loadonce: false,     // to dis-able sorting on client side
   sortable: false,     
   grouping:true,
   groupingView : {
         groupField : ['nome_attr', 'valore'],
         groupColumnShow: [false,false],
         groupText : ['{0}'],
         groupCollapse: true,
         groupDataSorted: false, 
         groupSorted: false, 
         groupOrder: false
        }
  }); 
```

注意（1）我已经在使用解决方法来禁用排序类型

```
 sorttype: function () {return 1;} 
```

[如此处](https://stackoverflow.com/questions/10977583/jqgrid-grouping-deactivating-client-side-sorting-on-page-navigation)所述，并且 in`"#myGrid"`是一个子网格，其中`datatype: local`, 表​​示先前已在容器网格中检索到的行。

有谁知道`colModel`属性的配置和`groupingView`要设置的参数是为了避免在多分组的情况下进行在线重新排序？

提前致谢，

米歇尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:38:26.653

修复自动排序的一种解决方法是允许客户端工作以重新生成相同的值列表（重新创建相同的顺序）。

首先，准备一个 JScript 函数，强制为每个分组列设置正确的顺序值：

```
 /** 
    * Sort type in subgrid's gropued rows
    */
   function sortGroup(cellValus, rowData, ty) {     
       if(ty==='attribute_1')
        return rowData.attr1_order;
       else if(ty==='attribute_2')
        return rowData.attr2_order;
    } 
```

其次，在`colModel`.

三、在每个分组的列中触发前面的函数`sorttype`，使用列类型知道订单属于哪个组：

```
 colModel: [
     {name:'nome_attr',index:'nome_attr', sorttype: function (cellValus, rowData) {return sortGroup(cellValus, rowData, 'attribute_1')}, editable:true, editrules:{required:true}, editoptions:{size:27}, align:'center'},
     {name:'desc_attr', index:'desc_attr', editable:true, editrules:{required:false}, edittype: "textarea",editoptions:{rows:5, cols:25}, hidden:true},
     {name:'valore',index:'valore', sorttype: function (cellValus, rowData) {return sortGroup(cellValus, rowData, 'attribute_2')},editable:true, editrules:{required:false}, editoptions:{size:30}, width:120},
      .....
     {name:'attr1_order',index:'attr1_order', editable:false, hidden:true},
     {name:'attr2_order',index:'attr2_order', editable:false, hidden:true}
     ] 
```

# linux - Linux : 值将从哪里提供给 linux 脚本文件

> ID：12724085
> 
> 赞同：0
> 
> 时间：2012-10-04T09:19:39.910
> 
> 标签：linux, sh

我正在处理现有的构建脚本，其中脚本文件包含这些（某些部分）作为构建过程的一部分，我需要运行这个脚本文件。

```
#!/bin/sh

if  [ -z $1 ];  then
    help
elif [ $1 == 'test' ]; then 
test 
```

任何人都可以让我知道这是什么意思以及价值将从哪里得到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:26:50.350

如果第一个参数 ( `$1`) 为“空”，则调用`help`，否则`"CheckIn"`调用`CheckIn`。

这是非常基本的东西，你应该阅读[手册页](http://linux.die.net/man/1/sh)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:26:49.630

您应该使用参数调用脚本：

```
/path/to/script.sh argument 
```

如果有更多参数，它们被称为 $1, $2, ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T09:27:39.920

实际上这个脚本说：

1.  如果不带参数调用脚本，则调用函数`help`
2.  否则，如果传递给脚本的第一个参数是`CheckIn`调用函数`CheckIn`

一个例子可能是：

```
#!/bin/sh

CheckIn() {
 echo "CheckIn called!!";
}

help () {
 echo "Help called!!";
}

if  [ -z $1 ];  then
   help
elif [ $1 == 'CheckIn' ]; then
   CheckIn
fi 
```

所以如果这个脚本被命名，即`test.sh`运行它的输出将是：

`sh test.sh`
**输出**：`Help called!!`

`sh test.sh CheckIn`
**输出**：`CheckIn called!!`

最后请注意，在您登录的用户 shell 中，可以内置名为`help`和的脚本`CheckIn`。在这种情况下，将调用这些脚本/命令，并且不需要存在名为`help`/的函数`CheckIn`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T09:27:53.713

`$1`指在命令行上传递给脚本的第一个参数。例如，如果您的脚本被调用`myscript.sh`并且您使用 运行它`myscript.sh foo`，那么`$1`就是`foo`.

`if [ -z $1 ]`是一个 if 语句，用于检查 的长度`$1`是否为零。如果是这样，它将运行`help`必须在脚本中此点上方某处定义（或获取）的函数。

`elif [ $1 == 'CheckIn' ]`检查是否`$1`是`CheckIn`，如果是，则运行该`CheckIn`函数。

看：

[Bash 初学者指南：if 简介](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_01.html)

# jquery - 如何保留两个版本的jquery

> ID：12724086
> 
> 赞同：1
> 
> 时间：2012-10-04T09:19:39.173
> 
> 标签：jquery

> **可能重复：**
> [我可以在同一页面上使用多个版本的 jQuery 吗？](https://stackoverflow.com/questions/1566595/can-i-use-multiple-versions-of-jquery-on-the-same-page)

我在使用 1.2.4 的网站中添加了一些新的 javascript 代码。我现在添加的代码需要 1.8.2 版本。

所以，这是我的代码：

```
var thisPageUsingOtherJSLibrary = false;

if (typeof jQuery == 'undefined' || jQuery.fn.jquery !== '1.8.2') {
    if (typeof $ == 'function') {
        thisPageUsingOtherJSLibrary = true;
    }

    function getScript(url, success) {
        var script = document.createElement('script');
        script.src = url;

        var head = document.getElementsByTagName('head')[0];

        done = false;
        script.onload = script.onreadystatechange = function () {
            if (!done && (!this.readyState || this.readyState == 'loaded' || this.readyState == 'complete')) {
                done = true;
                success();
                script.onload = script.onreadystatechange = null;
                head.removeChild(script);
            };
        };

        head.appendChild(script);
    };

    getScript('http://code.jquery.com/jquery-1.8.2.min.js', function () {
        if (typeof jQuery !== 'undefined') {
            if (!thisPageUsingOtherJSLibrary) {
                jQuery(document).ready(function ($) {
                    initWithNewJquery($);
                });
            } else {
                var jQuery_1_8_2 = $.noConflict(true);
                jQuery_1_8_2(document).ready(function ($) {
                    initWithNewJquery($);
                });
            }
        }
    });

} else {
    jQuery(document).ready(function ($) {
        initWithNewJquery($);
    });
}

function initWithNewJquery($){

} 
```

我需要的是：在我添加代码的网站上使用旧的 jquery。将新的 jquery 用于我的新函数/处理程序（将添加到 function 中`initWithNewJquery($)`）。

由于某些原因，我认为我写的代码是错误的，也因为我得到了这个错误：

```
TypeError: a.livequery is not a function 
```

那么，这里应该如何正确使用`noConflict()`呢？

# python - 在try块中引发错误的pythonic方法

> ID：12724087
> 
> 赞同：4
> 
> 时间：2012-10-04T09:19:42.853
> 
> 标签：python, exception-handling, try-catch

我有一种方法可以检查某些东西并且可以

*   本身引发异常
*   返回真
*   返回假

我想正确地捕获异常以自己提出一个异常，但如果测试返回 False。这样做的错误方法是

```
try:
    if not check():
        raise MyException()
except:
    raise MyException() 
```

因为第一个`MyException`被抓住`except`了。正确处理此问题的一种方法是

```
try:
    flag = check()
except:
    raise MyException()
else:
    if not flag:
        raise MyException() 
```

这是处理这种情况的唯一方法，还是有另一种更有效的方法来处理它，摆脱`flag`变量？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T09:27:36.303

你永远不应该使用 except: 因为它会捕获所有异常，包括 SystemExit，你应该这样做：

```
try:
    if not check():
        raise MyNewException()
except ExceptionRaisedByCheck:
    raise MyNewException() 
```

如果来自 check() 的异常与您要引发的异常相同，则应该更改它。

编辑：如果异常相同，您也可以简单地执行此操作（Mark Byers 在他的回答中有这个，但现在已经消失了）：

```
if not check():
    raise TheSameException() 
```

如果 False，这将传播异常或引发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T09:23:43.103

```
try:
   # whatever
except MyException:
   raise # reraise it
except Exception as e:
   raise MyException(some_info(e)) # unify user-visible exception type 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T09:27:31.047

在 python 3.3 中，您可以使用新的[`contextlib.ExitStack`上下文管理器](http://docs.python.org/py3k/library/contextlib.html#contextlib.ExitStack)：

```
with ExitStack() as stack:
    stack.callback(lambda: raise MyException)

    if check():
        stack.pop_all() 
```

这将引发`MyException`，*除非*您使用清除堆栈回调`pop_all()`。

您可以将其编码为自定义上下文管理器：

```
from contextlib import ExitStack

class ExceptionUnlessCancelled(ExitStack):
    def __init__(self, exception, *args, **kw):
        super(Callback, self).__init__()
        self.exception = exception
        self.callback(self.raiseException, *args, **kwds)

    def raiseException(self, *args, **kw):
        raise self.exception(*args, **kw)

    def cancel(self):
        self.pop_all()

with ExceptionUnlessCancelled(MyException) as exc:
    if check():
        exc.cancel() 
```

# asp.net-mvc-3 - 如何使用 EF 模型优先方法检查唯一约束？

> ID：12724088
> 
> 赞同：0
> 
> 时间：2012-10-04T09:20:07.840
> 
> 标签：asp.net-mvc-3, entity-framework, ef-model-first

我正在使用 MVC3 使用**模型优先方法**开发网站。

我的“员工”模型中有一个字段是“用户名”。**而且这个字段既不是唯一字段也不是外键**。我的申请要求是`username should be unique, and if user enters duplicate value then it show error message`。

**对于我的 mvc 项目，我将实体框架创建为类库，并将其引用添加到 mvc 项目中以访问模型类，所有这些都与我为我的网站创建的实体框架相关。**

**如何使用 EF 模型优先方法在模型本身中执行此操作？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:15:52.847

我在我的项目中遇到了这种类型的问题。我正在研究 asp.net 应用程序，它是一个工作门户，所以候选人的电子邮件 ID 是唯一的，所以我这样检查并解决这个问题。它在下面

在表格中

```
<div id="dvErrorMessage" style="display: none;" title="Message">
    <p>
        Please Registered with different EmailId.This is allready exists.</p>
</div>

 $("#txtEmailID").blur(function (e) {
            if (document.getElementById("txtEmailID").value == "") {
                document.getElementById("txtEmailID").focus();
                document.getElementById("lblEmailID").innerHTML = "Please Enter Email ID";
                document.getElementById("imgEmailID").src = "images/cross-sign.png";
            }
else {
                e.preventDefault();
                var EmailID = $("#txtEmailID").val();
                var url = "JsonData.asmx/GetCompanyEmailAccessbility";
                var emailformate = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
                $.ajax({
                    type: "POST",
                    url: url,
                    contentType: "application/json; charset=utf-8",
                    dataType: 'json',
                    data: '{EmailID:"' + EmailID + '"}',
                    success: function (msg) {
                        var data = msg.d;
                        if (data == 0) {
                            if (emailformate.test(document.getElementById("txtEmailID").value) == false) {
                                document.getElementById("imgEmailID").src = "images/cross-sign.png";
                                document.getElementById("lblEmailID").innerHTML = "Please Enter Valid Email ID";
                                document.getElementById("txtEmailID").focus();
                                return false;
                            }
                            else {
                                document.getElementById("imgEmailID").src = "images/right-sign.png"
                            }
                        }
                        else {
                            if ($("#dvErrorMessage").css('display') == 'none') {
                                $("#dvErrorMessage").css('display', 'block');
                                $("#dvErrorMessage").dialog({
                                    autoOpen: false,
                                    modal: true,
                                    width: 400,
                                    resizable: false,
                                    height: 200,
                                    buttons: {
                                        "OK": function (e) {
                                            e.preventDefault();
                                            $(this).dialog('close');
                                            document.getElementById("txtEmailID").focus();
                                            document.getElementById("imgEmailID").src = "images/cross-sign.png";
                                        }
                                    }
                                });

                                $("#dvErrorMessage").dialog('open');
                            }
                            else {
                                $("#dvErrorMessage").dialog({
                                    autoOpen: false,
                                    modal: true,
                                    width: 400,
                                    resizable: false,
                                    height: 200,
                                    buttons: {
                                        "OK": function (e) {
                                            e.preventDefault();
                                            $(this).dialog('close');
                                            document.getElementById("txtEmailID").focus();
                                            document.getElementById("imgEmailID").src = "images/cross-sign.png";
                                        }
                                    }
                                });

                                $("#dvErrorMessage").dialog('open');
                            }
                        }
                    }
                });
            }
        });
    } 
```

在我的网络服务中

```
 public List<CompanyData> GetCompanyEmailAccessbility(string EmailID)
        {
            PresenterData objpreseData = new PresenterData();
            LMGDAL.db_LMGEntities dbData = new db_LMGEntities();
            var dataAccessibility = dbData.tblCompanies.Where(x => x.CompanyEmailId == EmailID).ToList().Select(item => new CompanyData { EmailID = item.CompanyEmailId }).ToList();
            return dataAccessibility.ToList();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:22:54.950

我认为您可以通过使用模型中用户字段上方的 [Key] 表示法来设置此要求。但我不确定:)

# javascript - 使用 (jQuery, window, document) 跟随函数有什么作用；意思是？

> ID：12724090
> 
> 赞同：7
> 
> 时间：2012-10-04T09:20:14.767
> 
> 标签：javascript, jquery

我有以下插件：

```
;(function($, window, document)
{
...
...

})(jQuery, window, document); 
```

我能理解 ; 是为了并且也意识到 $ 是 jQuery 但有人可以解释为什么函数后面是 (jQuery, window, document);

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T09:22:17.457

它被称为“自我调用”或“立即调用”功能。这意味着该函数在使用最后一组括号中的参数创建后立即运行。

[更多信息](http://sarfraznawaz.wordpress.com/2012/01/26/javascript-self-invoking-functions/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T09:31:30.620

这称为**立即调用函数表达式**或**自执行匿名函数**。它使开发人员能够隐藏他的私有声明。

```
;(                                 // <---------------+
                                   //                 | encapsulate the function
  function($, window, document) {  // <--+ declare    | and call it passing three
                                   //    | anonymous  | arguments.
  }                                // <--+ function   |
                                   //                 |
)(jQuery, window, document);       // <---------------+ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T09:23:21.390

我不确定我是否完全理解您的要求，但他们所做的是将`jQuery`对象、`window`对象和`document`对象传递给函数。

他们很可能出于性能原因这样做。这使得最小化器可以缩短对和之类的所有引用`window`，`document`因为`w`它`d`是局部变量。在大型库中，这可以节省几个字节。

此外，我相信*（没有参考 atm）*与全局变量相比，访问局部变量会稍微快一些（虽然实际上是一个微优化）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T09:22:27.023

这是一个[立即调用的函数表达式](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)

这意味着，该函数被立即声明和执行。这样做是为了创建一个新的范围。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T09:22:41.687

这是一个立即调用的匿名函数（所谓的 IIFE）。

将`jQuery`别名传递给`$`，`window`因此`document`他们可以确保引用是外部环境中的正确版本。

# entity-framework - DbContext.Entry 性能问题

> ID：12724092
> 
> 赞同：9
> 
> 时间：2012-10-04T09:20:18.200
> 
> 标签：entity-framework, dbcontext, entity-framework-5

遵循 Julia Lermas 的关于跟踪更改的 N 层解决方案的“DbContext”一书，我为每个实体提供了一个 State 属性和一个 OriginalValues 字典（通过 IObjectWithState）。构造实体后，我将原始值复制到此字典。请参阅本书的示例（4-23）：

```
public BreakAwayContext()
{
  ((IObjectContextAdapter)this).ObjectContext.ObjectMaterialized += (sender, args) =>
  {
      var entity = args.Entity as IObjectWithState;
      if (entity != null)
      {
        entity.State = State.Unchanged;
        entity.OriginalValues = BuildOriginalValues(this.Entry(entity).OriginalValues);
      }
    };
} 
```

在 BreakAwayContext（继承自 DbContext）的构造函数中，ObjectMaterialized 事件被捕获。为了检索实体的原始值，通过调用 this.Entry(entity) 从上下文中检索 DbEntityEntry。这个电话正在减慢这个过程。此事件处理程序 80% 的时间都花在此调用上。

是否有更快的方法来检索原始值或实体 DbEntityEntry？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-11T20:46:28.413

Context.Entry() 调用`DetectChanges()`取决于上下文中对象的数量，并且可能非常慢。在您的情况下，您可以用更快的版本替换`((IObjectContextAdapter) ctx).ObjectContext.ObjectStateManager.GetObjectStateEntry(obj);`

# c# - 在 C# .NET Web 服务中持久化对象

> ID：12724093
> 
> 赞同：6
> 
> 时间：2012-10-04T09:20:20.233
> 
> 标签：c#, .net, wcf, web-services

我坚持在 WCF 中确定是一个基本且易于解决的问题，只需要引导正确的方式。

我有一个需要通过 C# .NET 中的 Web 服务公开的大对象（实际上是经过训练的文本分类器）。分类器对象可以在服务初始启动时从磁盘加载，但我不想每次请求都从磁盘加载（服务请求的对象目前占用内存约 6 GB，需要一段时间才能保持为每个请求从磁盘加载它），所以**我想在对该 Web 服务的所有请求中将该对象持久保存在内存中**，并且**该对象应该只在服务启动时**加载（而不是在第一个 Web 请求触发它时加载它）。

我该怎么做呢？

**感谢您**的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T09:33:46.667

可能最简单的方法是将您的服务创建为[单例](http://msdn.microsoft.com/en-us/magazine/cc163590.aspx#S6)。这涉及在您的服务类定义`InstanceContextMode = InstanceContextMode.Single`中指定一个`ServiceBehavior`属性。

**但是**，是否建议使用 WCF 通过线路发送 6GB 对象是*非常值得怀疑的。*使用这种方法，您可能会遇到各种服务可用性问题。

此外，单例在主机内是不可扩展的（每个主机只能有一个实例），尽管您可以托管多个单例服务，然后对请求进行负载平衡。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T09:37:02.533

我在过去遇到问题的项目中这样做的方式是在 Windows 服务中自行托管 WCF 服务。

然后，我将服务内部的数据存储对象设置为在服务生命周期内持续存在的单例。然后，每个 WCF 服务调用在每次需要对数据执行某些操作时都会获取单例。

我会避免在 IIS 中运行，因为您无法直接控制服务的生命周期，因此无法充分控制何时处理和实例化事物。

# java - Spring WS 2.1.0：端点拦截器顺序

> ID：12724098
> 
> 赞同：2
> 
> 时间：2012-10-04T09:20:41.350
> 
> 标签：java, spring, interceptor, spring-ws, endpoint

我在 Spring WS 上有一个带有两个端点拦截器的 Web 服务。XML 配置如下所示

```
<sws:interceptors>
    <bean class="org.someorg.security.SignatureInterceptor"/>
    <bean class="org.someorg.common.LoggingInterceptor">
        <constructor-arg value="logger_1"/>
    </bean>    
</sws:interceptors> 
```

SignatureInterceptor 验证传入 SOAP 信封的签名并签署传出 SOAP 信封。

LoggingInterceptor 将原始 SOAP 数据（字节数组）存储在数据库中。

我需要 SignatureInterceptor 在 LoggingInterceptor 之前调用并以这种方式编写拦截器 bean，我希望它可以解决我的问题。但是根据日志消息 LoggingInterceptor 首先调用，因此未签名的数据存储在数据库中。

然后我更改了配置，只是交换了 bean 声明，它们开始按我的预期工作

```
<sws:interceptors>
    <bean class="org.someorg.common.LoggingInterceptor">
        <constructor-arg value="logger_1"/>
    </bean>    
    <bean class="org.someorg.security.SignatureInterceptor"/>    
</sws:interceptors> 
```

但是这个案子我不清楚。如何显式设置拦截器的调用顺序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T13:21:43.733

顺序应该是您指定的方式（除非它们映射到特定的端点 url，在这种情况下它们最后处理） - 请注意处理 handleResponse 的顺序与 handlRequest 相反-

理想情况下，您应该看到：

1.  SignatureInterceptor.handleRequest(..)
2.  LoggingInterceptor.handleRequest(..)
3.  端点处理请求
4.  LoggingInterceptor.handleResponse()
5.  SignatureInterceptor.handleResponse()

我尝试了一个小测试，它对我的​​工作方式相同。

# c# - 为什么在处理功能区单击事件时会收到 InvalidOperationException（跨线程操作无效）？

> ID：12724101
> 
> 赞同：0
> 
> 时间：2012-10-04T09:20:46.720
> 
> 标签：c#, vsto, async-await, c#-5.0

我为我的应用程序创建了一个“进度/取消”机制，我可以在执行长时间运行的操作时显示一个模式对话框，并让对话框给出一些进度指示。该对话框还有一个取消按钮，允许用户取消操作。（感谢 SO 社区帮助我完成这部分）。

以下是运行虚拟长时间运行操作的代码：

```
 public static async Task ExecuteDummyLongOperation()
    {
        await ExecuteWithProgressAsync(async (ct, ip) =>
        {
            ip.Report("Hello world!");
            await TaskEx.Delay(3000);
            ip.Report("Goodbye cruel world!");
            await TaskEx.Delay(1000);
        });
    } 
```

Lamba 的参数是 a`CancellationToken`和 an `IProgress`。我没有`CancellationToken`在这个例子中使用 ，但`IProgress.Report`方法是在我的进度/取消表单上设置标签控件的文本。

如果我从表单上的按钮单击处理程序开始这个长时间运行的操作，它工作正常。但是，我现在发现，如果我从 VSTO PowerPoint 加载项中功能区按钮的单击事件处理程序开始操作，它会在*第二次*调用时失败`ip.Report`（在它尝试设置标签控制）。在这种情况下，我害怕`InvalidOperationException`说存在无效的跨线程操作。

有两点让我感到困惑：

*   为什么通过单击功能区上的按钮调用操作时会出现问题，而通过单击表单上的按钮调用操作时不会出现问题？
*   为什么问题出现在第二次调用`ip.Report`而不是第一次调用？我没有在这两个调用之间切换线程。

您当然希望查看其余代码。我试图将所有东西都剥离到裸露的骨头上：

```
using System;
using System.Threading;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace AsyncTestPowerPointAddIn
{
    internal partial class ProgressForm : Form
    {
        public ProgressForm()
        {
            InitializeComponent();
        }

        public string Progress
        {
            set
            {
                this.ProgressLabel.Text = value;
            }
        }

        private void CancelXButton_Click(object sender, EventArgs e)
        {
            this.DialogResult = DialogResult.Cancel;

            this.Close();
        }

        public static async Task ExecuteDummyLongOperation()
        {
            await ExecuteWithProgressAsync(async (ct, ip) =>
            {
                ip.Report("Hello world!");
                await TaskEx.Delay(3000);
                ip.Report("Goodbye cruel world!");
                await TaskEx.Delay(1000);
            });
        }

        private static async Task ExecuteWithProgressAsync(Func<CancellationToken, IProgress<string>, Task> operation)
        {
            var cancellationTokenSource = new CancellationTokenSource();

            var progress = new Progress<string>();

            var operationTask = operation(cancellationTokenSource.Token, progress);

            // Don't show the dialog unless the operation takes more than a second

            const int TimeDelayMilliseconds = 1000;

            var completedTask = TaskEx.WhenAny(TaskEx.Delay(TimeDelayMilliseconds), operationTask).Result;

            if (completedTask == operationTask)
                await operationTask;

            // Show a progress form and have it automatically close when the task completes

            using (var progressForm = new ProgressForm())
            {
                operationTask.ContinueWith(_ => { try { progressForm.Close(); } catch { } }, TaskScheduler.FromCurrentSynchronizationContext());

                progress.ProgressChanged += ((o, s) => progressForm.Progress = s);

                if (progressForm.ShowDialog() == DialogResult.Cancel)
                    cancellationTokenSource.Cancel();
            }

            await operationTask;
        }
    }
} 
```

表单本身只有一个标签 ( `ProgressLabel`) 和一个按钮 ( `CancelXButton`)。

功能区按钮和表单按钮的按钮单击事件处理程序只需调用该`ExecuteDummyLongOperation`方法。

* * *

**编辑：更多信息**

应@JamesManning 的要求，我进行了一些跟踪以观察 ManagedThreadId 的值，如下所示：

```
 await ExecuteWithProgressAsync(async (ct, ip) =>
            {
                System.Diagnostics.Trace.TraceInformation("A:" + Thread.CurrentThread.ManagedThreadId.ToString());

                ip.Report("Hello world!");

                System.Diagnostics.Trace.TraceInformation("B:" + Thread.CurrentThread.ManagedThreadId.ToString());

                await TaskEx.Delay(3000);

                System.Diagnostics.Trace.TraceInformation("C:" + Thread.CurrentThread.ManagedThreadId.ToString());

                ip.Report("Goodbye cruel world!");

                System.Diagnostics.Trace.TraceInformation("D:" + Thread.CurrentThread.ManagedThreadId.ToString());

                await TaskEx.Delay(1000);

                System.Diagnostics.Trace.TraceInformation("E:" + Thread.CurrentThread.ManagedThreadId.ToString());
            }); 
```

这很有趣。从表单调用时，线程 ID 不会更改。但是，当从功能区调用时，我得到：

```
powerpnt.exe Information: 0 : A:1
powerpnt.exe Information: 0 : B:1
powerpnt.exe Information: 0 : C:8
powerpnt.exe Information: 0 : D:8 
```

因此，当我们从第一次等待“返回”时，线程 ID 正在发生变化。

我也很惊讶我们在跟踪中看到“D”，因为紧接在此之前的调用就是发生异常的地方！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T10:31:45.390

如果当前线程（您在其上调用 ExecuteDummyLongOperation() 的线程）没有同步提供程序，这是预期的结果。没有一个，*await*操作符之后的继续只能运行在一个线程池线程上。

您可以通过在 await 表达式上放置断点来诊断此问题。检查 System.Threading.SynchronizationContext.Current 的值。如果它为*空*，则没有同步提供程序，当您从错误的线程更新表单时，您的代码将按预期失败。

我不完全清楚为什么你没有。在调用方法**之前**，您可以通过在线程上创建表单来获取提供程序。这会自动安装一个提供程序，即 WindowsFormsSynchronizationContext 类的一个实例。在我看来，您创建 ProgressForm 为时已晚。

# c# - 如何检查已处置的对象并在方法中抛出 ObjectDisposedException（如果已处置）

> ID：12724102
> 
> 赞同：1
> 
> 时间：2012-10-04T09:20:52.210
> 
> 标签：c#, .net, design-patterns, objectdisposedexception, disposable

我有一个一次性类，它使用一次性模式实现 IDisposalbe 接口。为了保持这些约束，我需要确保当对象被释放后，对任何公共方法的任何后续调用都会引发 ObjectDisposedException。显而易见的解决方案是检查 bool 值 isDisposed 并抛出异常。但是我如何使用一些基于反射的解决方案（如果有的话或其他方法）自动将此约束应用于每个公共方法。我不想做的是在我拥有的每个方法中进行此检查（即在每次调用之前我不想调用 IsObjectDisposed() 方法）

除了我之前描述的实际应用之外，我还需要知道一种自动调用方法的方法，比如 Foo()，每次调用类的方法，比如 MyClass

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:26:30.640

海事组织，您在这里有两个解决方案：

*   或手动调用它们，因此实际上编写代码，为每个`public`方法执行检查。

*   或者可以使用[面向方面的编程](http://www.codeproject.com/Articles/337564/Aspect-Oriented-Programming-Using-Csharp-and-PostS)将函数调用*注入*到由某个属性标记的每个方法的开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:26:23.103

您是否考虑过在使用代码之前简单地执行一次空检查？

IE。if(null!=object) { 做操作 }

或者您是否正在寻找某种对象包装器而不是使用 virtual 关键字？例如，使用统一的方面或弹簧使用方面。这些允许您将依赖注入代码到您的应用程序中，并允许您通过代码库应用“横切关注点”，即安全性、日志记录、打印和边界检查。

# c++ - Qt 4.7.4 QPropertyAnimation 不工作

> ID：12724104
> 
> 赞同：0
> 
> 时间：2012-10-04T09:21:01.353
> 
> 标签：c++, qt, animation, qwidget

我正在尝试在按钮单击事件上设置动画。但不知何故，动画不起作用。我参考了 Qt 参考文档，但找不到导致问题的根本原因

以下是示例代码：

```
void MainWindow::AnimationClick()
{
    // define toolbar y movement positions for animation
    TOOLBAR_Y_SHOWN = 0;
    TOOLBAR_Y_HIDDEN = -m_AnimatedWidget->height();
    m_AnimatedWidget = new AnimatedWidget(this);

    QPropertyAnimation *m_ani = new QPropertyAnimation(m_AnimatedWidget, "pos", this);

    m_ani->setDuration(500);

    m_ani->setEndValue(QPoint(m_AnimatedWidget->pos().x(), TOOLBAR_Y_HIDDEN));
    m_ani->setEasingCurve(QEasingCurve::InBack);

    m_ani->start();
} 
```

通过上述实现，点击事件没有发生任何事情。任何建议，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:29:28.727

这看起来不对：

```
TOOLBAR_Y_HIDDEN = -m_AnimatedWidget->height();
m_AnimatedWidget = new AnimatedWidget(this); 
```

首先你访问`m_AnimatedWidget` *然后*你分配它？

当您遇到崩溃（例如分段错误）时，请始终在调试器中运行您的程序。它会帮助你很容易地发现这个错误，因为它会在错误的行停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:42:56.777

`m_ani->setDuration(500);`

`setDuration()`参数以毫秒表示。在测试时，您可能应该放置半秒以上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:47:07.813

我知道了。我不允许 m_AnimatedWidget 在屏幕上显示。以下是编辑后的片段。

```
void MainWindow::AnimationClick()
{
    // define toolbar y movement positions for animation
    TOOLBAR_Y_SHOWN = 0;
    m_AnimatedWidget = new AnimatedWidget(this);
    TOOLBAR_Y_HIDDEN = -m_AnimatedWidget->height();

    QPropertyAnimation *m_ani = new QPropertyAnimation(m_AnimatedWidget, "pos", this);

    m_ani->setDuration(5000);

    m_ani->setEndValue(QPoint(m_AnimatedWidget->pos().x(), TOOLBAR_Y_HIDDEN));
    m_ani->setEasingCurve(QEasingCurve::InBack);

    m_ani->start();
    m_AnimatedWidget->show();
} 
```

# android - 应用程序不在 Nexus 7 上运行，但在其他设备上运行

> ID：12724105
> 
> 赞同：0
> 
> 时间：2012-10-04T09:21:05.543
> 
> 标签：android

我已经制作了一个可以很好地在 android 手机和模拟器上运行的应用程序，但是当我在 Nexus 7 上运行它时它给了我一个错误：

这是我的 logcat 报告：

```
java.lang.RuntimeException: Unable to start activity
ComponentInfo{com.aks.mobilereagents/com.aks.mobilereagents.MobileReagentsAc
tivity}: java.lang.NullPointerException at
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method) at
java.lang.reflect.Method.invoke(Method.java:507)
at
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:8
67)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method) Caused by:
java.lang.NullPointerException at
com.aks.mobilereagents.MobileReagentsActivity.onCreate(MobileReagentsActivit
y.java:153)
at
android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:51:45.143

您需要更仔细地阅读您的异常。该错误几乎肯定在您的代码中（特别是 at `com.aks.mobilereagents.MobileReagentsActivity.onCreate(MobileReagentsActivit y.java:153)`），而不是 Nexus 7 本身的错误。

# asp.net-mvc - VB.Net 中的 ASP.Net 会话

> ID：12724108
> 
> 赞同：3
> 
> 时间：2012-10-04T09:21:12.840
> 
> 标签：asp.net-mvc, vb.net, session

我在我的 ASP.Net 上创建了一个公共属性，它包含一个实体的会话。其目的是当用户在表单上填写多个步骤时添加实体，然后将整个批次保存到数据库中。但是，当我使用会话时，我收到错误“对象引用未设置为对象的实例”。

这是我的代码：

```
Public ReadOnly BreadQuestionnaire as Bread 
                          Implements IQuestionnaire.BreadQuestionnaire
       Get
           If Me.Session("BreadQuestionnaire") Is Nothing Then
              Me.Session("BreadQuestionnaire") = New Bread()
           End If
       Return TryCast(Me.Session("BreadQuestionnaire"),Bread)
      End Get
End Property 
```

它基于我在 C# 中使用的代码，以前从未给我带来任何麻烦，但是我已经将 VB.Net 强加给了我。

那么，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T22:41:30.850

`system.web.httpcontext.current.session.add("BreadQuestionnaire", Bread)`

我不确定 me.session 会起作用 - 该属性是属于页面类还是属于它自己的？无论哪种方式使用 httpcontext.current 都应该始终可用。

而且您要检索会话两次，您可以一次完成：

```
Public ReadOnly BreadQuestionnaire as Bread 
                          Implements IQuestionnaire.BreadQuestionnaire
       Get
           Dim _sessionBread = system.web.httpcontext.current.session("BreadQuestionnaire")
           If_sessionBread Is Nothing Then
             Dim _bread As New Bread
             system.web.httpcontext.current.session.add("BreadQuestionnaire", _bread)
             Return _bread
           Else
           Return _sessionBread
           End If
      End Get
End Property 
```

# ruby - 将标记插入到匹配模式的字符串中，而不考虑 ruby 中的大小写

> ID：12724112
> 
> 赞同：1
> 
> 时间：2012-10-04T09:21:22.207
> 
> 标签：ruby, string

我正在做一个搜索功能，我想突出显示匹配的模式。所以，无论哪种情况，我都必须分别在字符串中添加和附加所有`<$>`模式`</$>`。

```
highlight("RajkumarrAjkumarRAjkumaraj", "Ra") 
# should return "<$>Ra</$>jkumar<$>rA</$>jkumar<$>RA</$>jkuma<$>ra</$>j"

highlight("RajkumarrAjkumarRAjkumaraj", "ra") 
# should return "<$>Ra</$>jkumar<$>rA</$>jkumar<$>RA</$>jkuma<$>ra</$>j"

highlight("RajkumarrAjkumarRAjkumaraj", "rA") 
# should return "<$>Ra</$>jkumar<$>rA</$>jkumar<$>RA</$>jkuma<$>ra</$>j"

highlight("RajkumarrAjkumarRAjkumaraj", "RA") 
# should return "<$>Ra</$>jkumar<$>rA</$>jkumar<$>RA</$>jkuma<$>ra</$>j" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T09:25:00.763

你可以使用[`String#gsub()`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-gsub).

```
def highlight(str, pattern)

    str.gsub(/(#{Regexp.escape(pattern)})/i, "<$>$1</$>")

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:17:29.283

试试这个

```
> "RajkumarrAjkumarRAjkumaraj".gsub(/(ra)/i, '<$>\1</$>') 
```

# rally - 自定义应用程序无法在 Rally 上启动

> ID：12724116
> 
> 赞同：1
> 
> 时间：2012-10-04T09:21:31.360
> 
> 标签：rally

我是 Rally SDK 的新手，并已遵循 2.0p4 SDK“入门工具包”中的所有说明，但由于某种原因，示例应用程序未在 Rally Custom HTML 应用程序中启动。

如果您能指导我如何调试它，我将不胜感激。

如果您需要任何其他信息来帮助我，请告诉我 ;-)

**- - - -编辑**

有关我的调试的更多信息。我使用的是 Firefox 15.0.1，但没有收到任何脚本错误。当我切换到 IE 8 时，我收到了一个包含以下详细信息的脚本错误：

"

网页错误详情

用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；WOW64；Trident/4.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；.NET CLR 1.1。 4322；MS-RTC LM 8；InfoPath.3；.NET4.0C；.NET4.0E) 时间戳：2012 年 10 月 4 日星期四 11:44:42 UTC

消息：'Rally' 未定义行：9 字符：9 代码：0 URI：https: `<my server URL>`///slm/panel/html.sp?width=1639&panelOid=105518795&cpoid=104144067&projectScopeUp=true&projectScopeDown=false

"

注意：为保密起见，我更改了服务器名称

这是我正在使用的应用程序源文件（一个非常简单的只显示 1 个按钮）：

```
<!DOCTYPE html>
<html>
<head>
    <title>MyCardBoard</title>

    <script type="text/javascript" src="/apps/2.0p4/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function() {
           Ext.define('CustomApp', {
                extend: 'Rally.app.App',
                componentCls: 'app',

               launch: function() {
                    //Write app code here
                    this.iterationCombobox = this.add({
                    xtype: 'rallyiterationcombobox'
                });

                }
            });

            Rally.launchApp('CustomApp', {
                name: 'MyCardBoard'
            });
        });
    </script>

    <style type="text/css">
        .app {
             /* Add app styles here */
        }
    </style>
</head>
<body></body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:00:39.347

找到根本原因 - 我在尚未部署 SDK 2.0p4 时尝试使用它。真正在我的服务器上运行的最新 SDK 是 1.32（这是最新部署的）。

# xcode - 如何在 Xcode 中使用 Profile 调试 EXC_BAD_ACCESS 错误

> ID：12724122
> 
> 赞同：0
> 
> 时间：2012-10-04T09:22:06.910
> 
> 标签：xcode, debugging, exc-bad-access, profile

在收到 exc_bad_access 错误后，我阅读了本教程： http: [//www.ioslearner.com/debugging-exc_bad_access-error-xcode-instruments/](http://www.ioslearner.com/debugging-exc_bad_access-error-xcode-instruments/)并按照以下步骤操作：

*   运行配置文件
*   选择僵尸

除了我没有收到 Zomie 信号外，我的电脑上的一切看起来都一样。

为了确保我没有忘记某个步骤，我使用教程中提供的示例代码进行了尝试。在那里我看到了僵尸信号

**那么如何使用 Xcode -> Profile 在我的项目中获取僵尸信号？**

这是我使用的示例代码：

我很清楚这两个版本会导致错误。同样的问题是如何使用 Xcode 在配置文件中获取“僵尸消息”：

```
NSArray *currentRestaurant = [restaurants objectAtIndex:i];
RestauInfo *restauInfo = [NSEntityDescription
                         insertNewObjectForEntityForName:@"RestauInfo" 
                         inManagedObjectContext:context];
[restauInfo release];
restauInfo.Name = [currentRestaurant objectAtIndex:0];
restauInfo.Cuisine = [currentRestaurant objectAtIndex:1];
NSError *error;
if (![context save:&error]) {
    NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
}
[restauInfo release];// - this release would cause an EXC_BAD_ACCESS 
```

另一个问题是：为什么我在第二个版本中得到 bad_access - 而不是在第一个版本之后访问 restauInfo 时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:12:22.847

我发现了另一种检测内存管理故障的方法：

在 Xcode 中，您可以选择“运行”、“测试”、“配置文件”和“分析”
（按住左上角的运行按钮）

运行分析会发现内存管理错误——例如

*   过度释放
*   泄漏

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T07:41:39.050

您正在过度释放 restauInfo，它是一个自动释放的对象，您`-release`手动调用两次，导致崩溃。

[http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSEntityDescription_Class/NSEntityDescription.html](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSEntityDescription_Class/NSEntityDescription.html)

# windows - Windows CMD FOR 循环

> ID：12724123
> 
> 赞同：0
> 
> 时间：2012-10-04T09:22:12.530
> 
> 标签：windows, batch-file, cmd

我正在尝试编写一个代码，它将从 HELP 输出的所有行中获取第一个单词并回显该变量。这是我的代码：

```
@echo off
set a=
for /F "tokens=1,*" %%i in ('help') do (
set a=%a% %%i 
)
echo %a% 
```

但它仅从最后一行返回第一个单词。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T12:14:34.753

Bali C 如前所述解决了您的问题，但在我看来，您正在尝试获取在 HELP 中找到的命令列表。

一些命令出现在多行上，所以你会得到一些无关紧要的词。在不需要的英文机器上，还有一条以“For”开头的前导行和尾随行。

这是一个用于构建命令列表的英文机器的简短脚本。FINDSTR 命令必须针对不同的语言进行更改。

```
@echo off
setlocal enableDelayedExpansion
set "cmds="
for /f "eol= delims=." %%A in ('help^|findstr /bv "For"') do (
  for /f %%B in ("%%A") do set "cmds=!cmds! %%B"
)
set "cmds=%cmds:~1%"
echo %cmds% 
```

**编辑**

Ansgar Wiechers 提出了一种更有效的算法，可以仅提取[https://stackoverflow.com/a/12733642/1012053](https://stackoverflow.com/a/12733642/1012053)上的命令名称，我认为它应该适用于所有语言。我用他的想法来简化下面的代码。

```
@echo off
setlocal enableDelayedExpansion
set "cmds="
for /f %%A in ('help^|findstr /brc:"[A-Z][A-Z]*  "') do set "cmds=!cmds! %%A"
set "cmds=%cmds:~1%"
echo %cmds% 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T09:38:41.953

您需要在`for`循环中使用延迟扩展

```
@echo off
setlocal enabledelayedexpansion
set a=
for /F "tokens=1,*" %%i in ('help') do (
set a=!a! %%i 
)
echo %a% 
```

不是在变量`%`周围使用 's ，而是使用's 来使用延迟扩展。`a``!`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T09:23:38.613

因为回声在do之外（......）

```
@echo off
for /F "tokens=1,*" %%i in ('help') do (
echo %%i
) 
```

并且不需要打印a，可以直接使用%%i。
另一个非常简单的例子可能是这样的批处理保存为 help1.cmd

```
@echo off
for /F "tokens=1,*" %%i in ('help') do (
if /I "%%i" EQU "%1" echo %%j
) 
```

你把这批叫做

```
help1 MKDIR 
```

获取 MKDIR 命令的简短帮助文本

# nhibernate - 流畅的 Nhibernate 枚举映射

> ID：12724128
> 
> 赞同：5
> 
> 时间：2012-10-04T09:22:29.003
> 
> 标签：nhibernate, fluent-nhibernate

`enum`我在流畅的 NHibernate 中映射有一些问题。我知道这个问题已经被问过很多次了，但我找不到任何适合我的解决方案。我是 NHibernate 的新手，看起来我可能错过了一些简单而愚蠢的事情。这是我的代码。

```
public class DBPublication
{
    public virtual int pub_id { get; set; }
    public virtual PublicationStatuses status { get; set; }
    ...
}

public enum PublicationStatuses 
{
    on_moderation,
    active,
    ...
}

public class DBPublicationMap : ClassMap<DBPublication>
{
    public DBPublicationMap()
    {
        Table("content.publications");
        Id(x => x.pub_id).GeneratedBy.Sequence("content.pub_sq");           
        Map(x => x.status);
        ...
    }
} 
```

postgres 枚举类型

```
CREATE TYPE content.enum_publication_status AS ENUM('on_moderation', 'active', ...); 
```

但是当我尝试保存时，postgres 会抛出这个

```
column "status" is of type content.enum_publication_status but expression is of type text 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T08:02:51.850

这是配置 nhibernate 以存储枚举字段的工作示例。

```
public class Entity
{
    public virtual int id { get; set; }

    public virtual SomeEnum EnumField { get; set; }
}

public enum SomeEnum
{
    Value1,
    Value2
}

class EntityMap : ClassMap<Entity>
{
    public EntityMap()
    {
        Id(x => x.id).GeneratedBy.Native();
        Map(x => x.EnumField);
    }
}

class Program
{
    static void Main(string[] args)
    {
        var factory = Fluently.Configure().Mappings(x => x.FluentMappings.AddFromAssemblyOf<Entity>())
                                .ExposeConfiguration(config => new SchemaExport(config).Create(false, true))
                                .Database(MsSqlConfiguration.MsSql2008.ConnectionString("Data Source=.;Initial Catalog=nhtest;Integrated Security=True"))
                                .BuildSessionFactory();
        using (var session = factory.OpenSession())
        {
            using (var transaction = session.BeginTransaction())
            {
                var entity = new Entity();
                entity.EnumField = SomeEnum.Value2;
                session.Save(entity);
                transaction.Commit();
            }
        }

    }
} 
```

在这种情况下，它作为字符串存储在数据库中。如果要将其保存为整数，则需要将 Enum 字段属性的映射更改为以下内容：

```
Map(x => x.EnumField).CustomType<int>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:49:06.820

为什么要在 progres 中创建枚举类型？这不是维护噩梦吗？你的配置是什么样的？[您是否已经尝试过使用此处](https://stackoverflow.com/questions/439003/how-do-you-map-an-enum-as-an-int-value-with-fluent-nhibernate)描述的约定？看起来像一个简单的转换错误，所以请考虑在映射中使用 CustomType() / CustomSQLType()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-05T23:19:12.803

只需将此类添加到您的项目中：

```
public class PgEnumMapper<T> : NHibernate.Type.EnumStringType<T>
{
   public override NHibernate.SqlTypes.SqlType SqlType
   {
      get { return new NHibernate.SqlTypes.SqlType(System.Data.DbType.Object); }
   }
} 
```

然后，您可以使用：

```
Map(x => x.status).CustomType<PgEnumMapper<PublicationStatuses>>(); 
```

# eclipse - 自定义 Eclipse (CDT) 项目布局，不同于文件夹结构

> ID：12724135
> 
> 赞同：0
> 
> 时间：2012-10-04T09:22:48.270
> 
> 标签：eclipse, eclipse-cdt

向 Stackoverflow 的同胞们问好。

我在这里遇到了一个小难题。

在我的工作中，我们曾经使用 UltraEdit 项目，但我们想迁移到使用 Eclipse CDT。（不使用它的编译器/构建选项，我们需要一个外部 SDK）。

在硬盘上，我们有一个特定的文件夹结构来保持两个团队之间的分离。即'productcode' + 'applicationcode'-group 和'drivercode'-group。两组都有自己的文件夹，他们将源代码放在其中。

*   应用
*   驱动程序代码
*   产品代码

文件名有一个特定的前缀，表示它们属于哪个“层”。

*   操作系统（操作系统）
*   应用
*   系统
*   单元
*   零件
*   IO
*   硬件

所有这些文件（除了只允许在应用程序文件夹中的应用程序）都可以在产品或驱动程序代码文件夹中。在 UltraEdit 中，所有这些文件都分组在它们各自的层下。所以我们的项目有以下文件夹：

*   0 操作系统
*   1 应用层
*   2 系统安全层
*   3单元层
*   4 组件层
*   5 IO层
*   6 硬件层
*   通用的
*   XML

虚拟文件夹 '0 操作系统' 包含来自真实文件夹 'drivercode/productcode' 的所有 os_xxx 文件，对于 2、3、4、5 和 6 也是如此。

**TL;DR**：
是否有可能在 Eclipse CDT 中获得相同的（虚拟）文件夹结构？

为了使事情更复杂，整个文件夹结构分为 3 个项目。EG proj-1、proj-2、proj-3，还有一个共享文件夹，其中包含项目之间共享的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-01T21:23:28.693

我也有类似的情况。而不是一堆寻找/啄链接资源，这往往会破坏在其他地方重用 .*project 文件的能力，我制作了一个“工作区设置”脚本，只是将源符号链接到他们的项目所在的目录中。这样默认的 Eclipse 机制（在树中构建所有源代码）开箱即用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T07:16:47.703

我找到了一种方法，但它很麻烦。

我可以使用链接资源文件夹和文件创建我想要的结构。

但是，这意味着我需要遍历每个文件夹/文件的所有对话框才能将它们添加到列表中。我希望还有其他方法。所以我暂时不会接受我自己的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T07:29:07.443

Eclipse CDT 与现有项目配合得很好。

我猜您可能还手动生成了 Makefile？然后你只需要使用 File -> Import -> C/C++ -> Existing code as Makefile Project。

这将使您的所有源代码留在原处，并且不喜欢使用 Eclipse 的团队成员仍然可以使用他们想要的任何东西，并从命令行构建。

# xml - 如何获取下拉控件的值？

> ID：12724136
> 
> 赞同：1
> 
> 时间：2012-10-04T09:22:53.067
> 
> 标签：xml, vba, excel, ribbon

功能区上的下拉菜单：

```
<dropDown id="dd01"
onAction="dd01OnAction"/> 
```

在VBA中我需要

```
Sub dd01OnAction(control As IRibbonControl, ID As String, index As Integer)
If dd01.Value = "Sky" Then MsgBox "323"
End Sub 
```

如何获得 dropDown 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:58:06.027

我不认为你可以直接获得价值。

我通常从集合对象中加载下拉列表，并确保集合中的 ID 与下拉列表中的索引匹配。这样我就可以根据回调中的索引或 ID 参数从集合中获取所有相关值。你可以使用类似的东西作为workaraound吗？

> 这是否意味着每次更改集合后，我都需要使功能区无效？Mamma Mia，几乎每次点击后都会出现

是的，但是，通过使用`ribbonobject.InvalidateControl("ID")`您可以使特定的下拉控件无效，而不是整个功能区。

非常简短的例子：

```
Sub dd01OnAction(control As IRibbonControl, ID As String, index As Integer)
    '***** Assumes that MyCollection is initialized elsewhere
    '***** and filled with strings :)
    Debug.Print "The value is " & MyCollection.Item(index)

    If MyCollection.Item(index) = "Sky" Then MsgBox "323"

End Sub 
```

# makefile - 当由 PHONY 依赖项更新时，为什么不考虑没有配方过期的目标？

> ID：12724137
> 
> 赞同：5
> 
> 时间：2012-10-04T09:22:54.337
> 
> 标签：makefile, gnu-make

```
.PHONY: b
c: a
    @touch c
    @echo "Changed"
a: b
b:
    @date +%s > a 
```

使用示例 make 文件运行 make 会导致在第一次运行时打印“Changed”；但“已更改”仅在第 3 次、第 5 次等执行时打印。这是因为 make 似乎没有认识到执行目标“b”的配方会更新 a。

将“a”作为目标的规则更改为空配方会导致每次运行 make 时都会打印“Changed”（如您所料 - 虚假目标始终被视为“过时”）。例如

```
a: b ; 
```

Make 应该跳过 PHONY 目标的隐式规则搜索，但“a”不是 PHONY。如果没有为“a”找到隐含规则，是否正确不考虑“a”可能已被其 PHONY 依赖项“b”更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:29:31.860

Make不能分析命令的效果，所以正确组织规则是用户的责任。

考虑一个稍微不同的情况：

```
d: c b
c: a
    @touch c
    @echo "Changed"
a:
b:
    @date +%s > a 
```

这与您的示例具有相同的行为；不可能期望 Make 知道`c`“真的”取决于`b`. makefile 的作者有错。

现在应该这样写：

```
c: a
        @touch c
        @echo "Changed"

.PHONY: a
a:
        @date +%s > a 
```

该`a`规则修改文件`a`（并且`PHONY`只是为了强制`a`规则运行）。这是告诉 make`@date ...`命令修改的方法`a`。这个 makefile 可以正常工作。

您的示例介于这两者之间。如果一条规则修改了另一个规则的目标文件，则 makefile 组织不良，而 Make 没有错。是的，Make 可以假设依赖于`PHONY`规则的目标*可能在该规则运行时已更新*，但它也可以假设*任何目标可能在任何规则运行时已更新*。如果 Make 是那种偏执狂，那它的效率就不会很高。

# travis-ci - 将秘密环境变量添加到 Travis CI

> ID：12724139
> 
> 赞同：9
> 
> 时间：2012-10-04T09:23:02.823
> 
> 标签：travis-ci

我目前正在尝试向 Travis-CI 添加一个秘密环境变量。[在文档](http://about.travis-ci.org/docs/user/build-configuration/)（“安全环境变量”）中，我找到了以下行来执行此操作：

```
gem install travis
travis encrypt -r travis-ci/travis-core MY_SECRET_ENV=super_secret 
```

如果我理解正确，我必须用`travis-ci/travis-core`我自己的存储库的名称替换，因为加密应该只对我的存储库有效。因此，存储库中必须有一个公钥。是否有特殊`travis`命令可以添加此密钥？这究竟是如何工作的？或者这只是我的 ssh 公钥？

当我运行以下命令时：

```
travis encrypt -r my_username/my_repo MY_SECRET_ENV=super_secret 
```

我收到以下错误：

```
There was an error while fetching public key, please check if you entered correct slug 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T08:59:37.573

这是一个已知的问题。它已经[在 GitHub 上有一个拉取请求](https://github.com/travis-ci/travis-cli/pull/2)来修复它。问题是获取存储库公钥的请求不起作用，因为他们将 API 更改为 SSL。如果您不想等待合并拉取请求，您可以简单地[将源更改为使用 https 而不是 http](https://github.com/travis-ci/travis-cli/pull/2/files)。

# jsp - JSP 还是 XHTML？PWC6228：模板文本正文中不允许使用 #{...}

> ID：12724142
> 
> 赞同：1
> 
> 时间：2012-10-04T09:23:11.267
> 
> 标签：jsp, templates, jsf, el, facelets

我第一次尝试使用 JSF，但我不了解 JSF 的 JSP 标签库。

在 Eclipse (Indigo) 下，当我创建一个新的 JSP 文件时，我可以在一些模板之间进行选择：

*   新的 JavaServer Faces (JSF) 页面 (html)
*   新的 JavaServer Faces (JSF) 页面 (xhtml)
*   新的 JavaServer Faces (JSF) 页面（xhtml、xml 语法）
*   ...

html 模板使用`<%@ taglib prefix="..." uri="..." %>`，而 xhtml 模板使用`<html xmlns:...="...">`.

当我选择 xhtml 模板时，似乎不支持 JSF taglib，因为当我使用时，`<h:outputText value="#{bean.beanMethod}" />`我收到了 Exception ：

> [#|2012-10-04T10:51:45.734+0200|警告|glassfish3.1.1|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=39;_ThreadName=Thread-2;| ApplicationDispatcher[/testjsf] PWC1231: Servlet jsp 的 Servlet.service() 抛出异常 org.apache.jasper.JasperException: /b.jsp(14,25) PWC6228: #{...} not allowed in a template text body。在 org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:81) 在 org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:376) 在 org.apache.jasper.compiler.ErrorDispatcher.jspError (ErrorDispatcher.java:188) 在 org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:755) 在 org.apache.jasper.compiler.Node$ELExpression.accept(Node.java:947) 在org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2297) 在 org。

使用 html 模板，它可以工作。

那么如何将 JSF 与 xhtml 模板一起使用呢？

它使用：

```
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"> 
```

**和**

```
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h" %>
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %> 
```

在一起，但我相信声明`xmlns`会取代`<%@ taglib %>`指令？

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:43:39.973

大约 3 年前，JSP 已被[弃用为 JSF 2.0 视图技术。](http://docs.oracle.com/javaee/6/tutorial/doc/giepx.html)你为什么要使用它？

* * *

回到你的具体问题：

> PWC6228：模板文本正文中不允许使用 #{...}。

这基本上意味着`<h:outputText>`没有被 解析，`FacesServlet`因此被解释为纯模板文本，包括 EL 表达式。但是，在 JSP 中不支持在`#{}`模板文本中。`<p>#{foo}</p>`它仅在其继任者 Facelets 中受支持。

`<h:outputText>`不被解析`FacesServlet`只能意味着浏览器地址栏中出现的请求 URL 与webapp中定义`<url-pattern>`的. 这种方式不会被调用，并且所有 JSF 组件都不会被解析并被视为纯文本。`FacesServlet``/WEB-INF/web.xml``FacesServlet`

也许您已经将它映射到`*.xhtml`它解释 Facelets 文件工作正常？然后，您应该通过`b.xhtml`而不是打开它`b.jsp`。

然而，如前所述，自 JSF 2.0 起，JSP 已被弃用。它不允许您使用 JSF 2.0 的所有功能，例如`<h:head>`,`<f:ajax>`等，更不用说[Facelet 模板功能](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen/6822269#6822269)了。忘记 JSP 并坚持使用它的继任者 Facelets。

# jquery - 如何使用 jQuery 手动触发委托事件？

> ID：12724147
> 
> 赞同：35
> 
> 时间：2012-10-04T09:23:16.770
> 
> 标签：jquery

jQuery 有没有办法手动触发委托事件处理程序？

采取以下示例代码：

```
<div class="container">
  <input type="button" value="Hello">
  <span class="output"></span>
</div>
​
<script>
  $('.container')
    .on('click', '[type=button]', function(e) {
      $(e.delegateTarget).find('.output').text($(this).val());
    })
    .find('[type=button]').triggerHandler('click');​
</script> 
```

（在线：http: [//jsfiddle.net/TcHBE/](http://jsfiddle.net/TcHBE/)）

我原以为这会起作用，并且文本“Hello”会出现在跨度中，而无需实际单击按钮，但事实并非如此。

我`e.delegateTarget`在处理程序内部使用，因为`.ouput`除了`.container`. 这就是我首先使用委托事件处理程序的原因。

**更新：**

我也在使用`triggerHandler`，因为该事件在我不想触发的真实代码中具有默认行为。（在实际代码中，该事件是 Bootstrap Modal 插件的自定义事件`hide`，[但](http://twitter.github.com/bootstrap/javascript.html#modals)我实际上并不想在页面加载时触发事件处理程序时隐藏模式）。

我可以将处理程序提取到一个命名函数中并直接调用它，但是由于使用`e.delegateTarget`，这会使 how 构造更加复杂。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-04T09:46:49.380

您可以手动创建一个 Event 对象并`target`相应地设置属性以诱使 jQuery 认为该事件冒泡了。

```
var c = $('#container');

c.on('click', '[type=button]', function(e) {
    $(e.delegateTarget).find('span').text($(this).val());
});

var event = jQuery.Event('click');
event.target = c.find('[type=button]')[0];

c.trigger(event); 
```

[http://jsfiddle.net/PCLFx/](http://jsfiddle.net/PCLFx/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-12T08:05:27.577

我知道，这个问题很*古老*，但是当我在寻找另一个问题的答案时绊倒了它时，我想我不妨在这里分享我稍微简单的方法。

这个想法是直接在所需的*目标元素*上创建事件：`$(target_selector).trigger(event_type)`或者 - 对于像“click”这样的标准事件甚至更短 - do `$(target_selector).click()`，请参见下面的小小提琴：

```
$(function(){
 $('.container').on('click','button',function(){
  console.log('delegated click on '+$(this).text());
  return false;
 });
 $('#other').click(e=>$('.container button').trigger('click'));
 $('#clickone').click(e=>$('.container .one').click());
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<form class="container">
<button type="submit" class="one">click 1</button> and another chance to click here on <button class="two">click 2</button>.
</form><br>
<div id="other">Trigger clicks on both buttons here!</div><br>
<div id="clickone">Trigger a click on button "one" only.</div>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-03T08:43:40.373

我们可以传递一个附加`event configuration`的`jQuery's $.Event()`作为`second argument`. 更多信息[在这里](http://api.jquery.com/category/events/event-object/)。

```
$('#click-me').on('click', function(evt){
  $(document).trigger($.Event('custom-click', {target: evt.currentTarget}));
});

$(document).on('custom-click', '#click-me', function(evt){
  alert(`${evt.type} was triggered on button with ${evt.target.id} id.`);
})
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<button id="click-me">Click Me</button>
```

祝你好运...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T10:00:49.677

方法中的选择器`.on()`是可选的。
当你写：

```
 $('.container')
    .on('click', '[type=button]', function(e) {
      $(e.delegateTarget).find('.output').text($(this).val());
    })
    .find('[type=button]').triggerHandler('click');​ 
```

您告诉事件处理程序只听容器内的按钮单击。
`$(e.delegateTarget)`只是对外部容器的引用。

我已经更新[了你的小提琴来回应这个](http://jsfiddle.net/TcHBE/3/)。

这是[来自 API 的引用：](http://api.jquery.com/on/)

> 当提供选择器时，事件处理程序被称为委托。当事件直接发生在绑定元素上时，不会调用处理程序，而只会调用与选择器匹配的后代（内部元素）。jQuery 将事件从事件目标冒泡到附加处理程序的元素（即，从最内到最外的元素），并为沿该路径匹配选择器的任何元素运行处理程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-16T11:37:56.927

作为@Prinzhorn 答案的补充，拥有这个 JQuery 函数可能很有用：

```
(function( $ ){
    $.fn.triggerParent = function (eventName, parent) {
        this.each(function() {
            var event = jQuery.Event(eventName);
            event.target = this;
            $(parent).trigger(event);
        });
    };
})( jQuery ); 
```

# javascript - 变量输出不一致

> ID：12724151
> 
> 赞同：1
> 
> 时间：2012-10-04T09:23:21.873
> 
> 标签：javascript, jquery

几天前，我为我和朋友一起玩的一款名为《Broken History》的游戏制作了一个领主生成器，我自己开始了代码，但最终得到了代码的帮助来完成它。

然后我开始为同一个游戏制作一个字符生成器，​​使用与以前完全相同的方法，一切看起来都很好，每个元素都做了它应该做的事情。但是，当我第一次获得结果文本时，变量 curFaction 被调用，它`undefined`在第二次读取用户在选择框中选择的派系时读取，即`Saxathia`. 变量是在`$(document).ready()`函数中赋值的，所以理论上应该在调用之前赋值对吗？

我想不出为什么会发生这种情况，变量被称为数组的一部分，这有什么区别吗？

![在此处输入图像描述](../Images/af4f105661b6c766ebb8b40edcb291e6.png)

这是 jsLint [http://jsfiddle.net/CYe8J/31/](http://jsfiddle.net/CYe8J/31/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:48:21.340

您的问题是您在页面加载时设置字符描述字符串，在用户选择派系之前。

```
// curFaction is undefined here, as user cannot select a faction 
// *before* the page is loaded!!
var aLevel[1] = "Description1 of guy from " + curFaction + "."; 
```

**最快**的解决方法是在需要时生成描述。一种方法是将函数存储在 中`aLevel`，而不是字符串，如下所示：

```
var aLevel[1] = function () { "Description1 of guy from " + curFaction + "."; };
var aLevel[2] = function () { "Description2 of guy from " + curFaction + "."; };
var aLevel[3] = function () { "Description3 of guy from " + curFaction + "."; }; 
```

然后，当您需要您的描述时，调用该函数：

```
// Original code:
"Stuff about claim on throne. " + aLevel[temp6] + ".";

// New code - note brackets after "aLevel[temp6]"
"Stuff about claim on throne. " + aLevel[temp6]() + "."; 
```

我[创建了一个 Fiddle 来](http://jsfiddle.net/XJjxT/)展示这一点。

顺便说一句，您的代码通常可以重构很多 - 通常，如果您发现自己一遍又一遍地编写相同的算法，那么您需要记住[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself):)

# java - 如何使用 OAuth2.0 访问 Google feeds(Reader)？

> ID：12724154
> 
> 赞同：0
> 
> 时间：2012-10-04T09:23:34.277
> 
> 标签：java, oauth-2.0, google-authentication, google-feed-api

我想使用 OAuth2.0 访问谷歌提要。我使用[google-oauth-java-client](http://code.google.com/p/google-oauth-java-client/)来获取我的访问令牌。如何使用它来访问提要 API？

我引用[了 dailymotion-cmdline-sample](http://samples.google-oauth-java-client.googlecode.com/hg/dailymotion-cmdline-sample/instructions.html)，并将 SCOPE 更改为`http://www.google.com/reader/api`获取凭证。

它返回：

```
401 Unauthorized

You must be signed in to access this stream. 
```

而且我不知道怎么了...

我还阅读了一些帖子，显示 OAuth2.0 可以完成这项工作，但对我来说还不够详细：

[仅对 Google OAuth 2.0 令牌的读取权限？](https://groups.google.com/forum/?fromgroups=#!topic/fougrapi/U_8eT4yyLsY)

[使用 Google 阅读器 API](http://blog.martindoms.com/2009/08/15/using-the-google-reader-api-part-1/)

[使用 OAuth2 access_token 访问 Google Reader 订阅](https://stackoverflow.com/questions/8530790/accessing-google-reader-subscriptions-with-oauth2-access-token)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T15:35:42.850

我的范围与`http://www.google.com/reader/api/*`. 我通过将范围更改为`http://www.google.com/reader/api/`. 试试`/`最后的。

# c# - 使用 C# 的 3D 引擎

> ID：12724163
> 
> 赞同：0
> 
> 时间：2012-10-04T09:23:54.050
> 
> 标签：c#, 3d, 3d-engine

我个人实验的目标是用 C# 创建一个 3D 引擎。

我读过一些关于 XNA 和 SlimDX 的文章。我不确定 XNA，因为它基本上已经是一个完整的引擎，所以我不会做太多事情。SlimDX 看起来更接近我的假设，但如果有任何其他建议，我将不胜感激。

我有一些使用 OpenGL 的经验，并为 Android 游戏和使用 jogl 的 PC 编写了一个简单的引擎。

我有兴趣听到类似于通过 Java / OpenGL 提供的抽象级别的东西，但这次是 DirectX。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:27:52.623

您可以从[这里](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=10084)下载旧的*DirectX SDK*，它将为您提供 Direct3D 的 C# 包装器。

但是...如果您确实想给 XNA 一个机会，这可能是最好的入门教程之一（我所说的开始是指足以实现您自己的游戏，但这需要大量工作） .

[http://www.riemers.net/](http://www.riemers.net/)

[您可以在此处](http://www.microsoft.com/en-us/download/details.aspx?id=23714)获取 XNA SDK 的当前版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:06:22.397

作为 DirectX c# 包装器，还有[http://sharpdx.org/](http://sharpdx.org/)

Xna/SlimDX 之间的几个优点/缺点

Xna 易于学习，您已经拥有一些内置函数来加载模型、绘制文本、一些内置渲染状态预设、数学类/结构。另一方面，与新的显卡功能相比，它的功能集相当有限。您将有一些东西快速启动并运行，但另一方面，您最终可能会受到高级功能的限制（镶嵌/计算/附加缓冲区/只读深度等等）。当然，你还有很多工作要做。

SlimDX/SharpDX 相当小（它们主要包含 DirectX 功能），所以如果您想使用 DirectX11（如果您想使用 9 go for xna :)，您将需要做一些工作才能让某些东西运行首先，但您将拥有完整的 DX 功能和完全的灵活性来组织您的引擎。您将需要拥有自己的模型导入器、字体渲染器 (DirectWrite)、状态管理器。最常见的数学部分已经存在（矩阵/向量），因此您不必担心这部分。

# objective-c - iOS 帧率 - UIImage 总是 30fps？

> ID：12724169
> 
> 赞同：0
> 
> 时间：2012-10-04T09:24:12.143
> 
> 标签：objective-c, ios, uiviewanimation

我想用一组图像创建一个逐帧动画。

有设置`animationDuration`，标准值为1。

当我开始动画时，我可以确定每个 iOS 设备上的帧率始终为 30fps`startAnimating`吗？

所以我需要 15 张图像来制作 1 秒的动画 - 当我有超过或少于 15 张必须在一秒钟内制作动画的图像时，我可以使用特殊计算吗？

例如 60/15*（数组中的图像计数）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:42:58.253

我认为您不能指望`UIImageView` `animationImages`随时随地为您提供 30FPS。

实际上，这适用于非常简单和“机会主义”的动画。如果您搜索它，您会发现该方法占用设备的[报告（在特定条件下）。](http://www.iphonedevsdk.com/forum/iphone-sdk-game-development/13966-frame-by-frame-animation-uiimageview-vs-opengl.html)另一方面，如果您的图像很小，那么它可能会起作用，但您无法得到任何保证（也无法强制执行所需的 FPS）。

> 所以我需要 15 张图像来制作 1 秒的动画 - 当我有超过或少于 15 张必须在一秒钟内制作动画的图像时，我可以使用特殊计算吗？

如果我正确理解您的问题，那么您可以尝试：

```
duration = number_of_images / FPS; // e.g., 60 images / 30 FPS = 2 seconds 
```

当然，如果设备能够以 30 FPS 正确显示 60 张图像，那就另当别论了。

# jenkins - 使用 Jenkins 获取类和方法的 LOC 计数

> ID：12724171
> 
> 赞同：1
> 
> 时间：2012-10-04T09:24:15.390
> 
> 标签：jenkins, lines-of-code

我已经为我的项目安装了 Jenkins。自动构建和部署正在成功进行。我想获得以下数据：

1.  行数在 0-50 范围内的类数
2.  行数在 301-500 范围内的类数
3.  行数在 501-1000 范围内的类数
4.  行数 > 1000 等的类数

对于方法，我想要同样的东西：例如：行数在 0-50 范围内的方法我怎样才能得到这些数据？

请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T16:56:04.357

I suggest you use [http://cloc.sourceforge.net/](http://cloc.sourceforge.net/)

You can then extract the data as SQL data import it in a H2 database (in-memory) to group accordingly to your needs.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T17:33:50.510

也许比你需要的更多，但你看过 Sonar 吗？( [http://www.sonarsource.org/](http://www.sonarsource.org/) ) 它与您的构建集成，并且可以提供您正在寻找的指标以及更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:04:35.947

还有其他几个有用且易于使用的工具：

*   javancss：Java 的源测量套件[http://www.kclee.de/clemens/java/javancss/](http://www.kclee.de/clemens/java/javancss/)
*   ckjm：Chidamber 和 Kemerer Java 指标[http://www.spinellis.gr/sw/ckjm/](http://www.spinellis.gr/sw/ckjm/)

一些相关工具：

*   经典 - [http://classycle.sourceforge.net/](http://classycle.sourceforge.net/)
*   jdepend - [http://clarkware.com/software/JDepend.html](http://clarkware.com/software/JDepend.html)

您还可以使用[XRadar](http://xradar.sourceforge.net)汇总所有这些报告并获得称为“项目运行状况”的内容。XRadar 还支持前面提到[的 CLOC](http://cloc.sourceforge.net/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-09T13:37:02.063

我不知道这个问题是否仍然与您有关。其他回复没有针对詹金斯。Jenkins 有几个插件，例如[http://www.dwheeler.com/sloccount/](http://www.dwheeler.com/sloccount/)。安装插件后，您可以通过 Jenkins REST API 检索代码指标。

# android - 使 ImageView 从方法中不可见

> ID：12724174
> 
> 赞同：1
> 
> 时间：2012-10-04T09:24:34.230
> 
> 标签：android, android-layout

我创建了`HideImages()`如下所示的函数。问题是，运行此代码会导致 NullPointerExcpection。当我注释掉这些`setVisibility`行时，它工作正常。我究竟做错了什么？

```
public class MainActivity extends Activity implements SurfaceHolder.Callback {
  ImageView img_w0, img_w1, img_w2;
  public void onCreate(Bundle savedInstanceState) {
    ImageView img_w0 = (ImageView)findViewById(R.id.img0);
    ImageView img_w1 = (ImageView)findViewById(R.id.img1);
    ImageView img_w2 = (ImageView)findViewById(R.id.img2);

    HideImages();

  }
  public void HideImages() {
    img_w0.setVisibility(View.INVISIBLE);
    img_w1.setVisibility(View.INVISIBLE);
    img_w2.setVisibility(View.INVISIBLE);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T09:27:06.223

将 ImageView 的所有引用设置为 Global as

```
public class MainActivity extends Activity implements SurfaceHolder.Callback {
  ImageView img_w0, img_w1, img_w2;
  public void onCreate(Bundle savedInstanceState) {
    img_w0 = (ImageView)findViewById(R.id.img0);
     img_w1 = (ImageView)findViewById(R.id.img1);
     img_w2 = (ImageView)findViewById(R.id.img2);

    HideImages();

  }
  public void HideImages() {
    img_w0.setVisibility(View.INVISIBLE);
    img_w1.setVisibility(View.INVISIBLE);
    img_w2.setVisibility(View.INVISIBLE);
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:26:28.443

我认为这可能会导致问题，因为您已经`ImageView`在 onCreate() 方法上方进行了初始化，这就是您在此处声明的原因，

```
img_w0 = (ImageView)findViewById(R.id.img0);
img_w1 = (ImageView)findViewById(R.id.img1);
img_w2 = (ImageView)findViewById(R.id.img2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T09:26:47.130

问题就在这里。您已经将`ImageView`对象声明为全局对象。而且，您再次在内部声明`onCreate()`

因此，只需删除其中的声明`onCreate()`并运行。如下图——

```
public void onCreate(Bundle savedInstanceState) {
    img_w0 = (ImageView)findViewById(R.id.img0);
    img_w1 = (ImageView)findViewById(R.id.img1);
    img_w2 = (ImageView)findViewById(R.id.img2); 
```

}

# javascript - 如何发送带有用户输入地址的 HTML 电子邮件？

> ID：12724179
> 
> 赞同：0
> 
> 时间：2012-10-04T09:25:03.760
> 
> 标签：javascript, html, email, mailto

我有一个正在设计的应用程序，并且有一个电子邮件页面。用户输入他们的姓名、电子邮件地址和消息，然后单击“提交”。这可行，但我不知道如何让用户的输入出现在电子邮件中。这是到目前为止的代码；

```
<form id="contacts-form" action="mailto:megan.sime@idoxgroup.com">
    <ul class = "rounded">
        <li style = "color: #FFFFFF">Full Name:<input type="text" placeholder = "J. Doe" name = "signature" id = 'signature' /></li>
        <li style = "color: #FFFFFF">E-mail:<input type="text" placeholder = "www.example@examplemail.com" name = "address" id = 'address' /></li>
        <li style = "color: #FFFFFF">Message:<input type = "text" placeholder = "Message" name = "message" id = 'message' /></li>

        <a href="mailto:address?subject=subject&body=message" class="button">Submit</a>
    </ul>
</form> 
```

有谁知道如何更改代码以允许用户输入进入电子邮件？非常感谢提前x

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T09:36:04.490

尝试编写这样的函数：

```
function sendEmail(){
    var addr = document.getElementById('address').value;
    var sig = document.getElementById('signature').value;
    var msg= document.getElementById('message').value;

    //concatenate to string to build URL
    var url = "mailto:" + .... + addr + ...;
    location.href = url; //(might want to use window.location or something else here)
} 
```

然后将您的链接更改为：

```
<a href="javasctipt:void(0)" onclick="javascript:sendEmail()" class="button">Submit</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:30:59.983

通过“允许用户输入进入电子邮件”不完全确定您在问什么，但 using`document.getElementById('signature').value`将返回输入的值。然后，您可以将其包含在您的帖子/获取中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:37:24.683

您必须使用 javascript 来获取输入值。与`onclick="javascript:window.location='putURLhere'"`你可以模仿一个链接。现在剩下的是创建一个包含您的值的 URL，您可以使用`document.getElementById(id).value`. `+`你可以连接它们。

例子：

```
<a onclick="javascript:window.location='mailto:?subject=Message from '+document.getElementById('address').value+'&body='+document.getElementById('message').value">Submit</a> 
```

我希望这有帮助！

# ruby-on-rails - 为什么 f.label 将“ALL”大写字符串转换为“All”大写

> ID：12724180
> 
> 赞同：7
> 
> 时间：2012-10-04T09:25:05.943
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个对象，其值都是大写字母，我希望`f.label`助手将其打印为所有大写字母 - 无需进行 CSS 转换。

现在，如果我的`AAPL`对象中有字符串，`f.label`则将其吐出为`Aapl`.

我不想使用 CSS 转换的原因是因为对象的值并不总是需要全部大写。我只想`f.label`完全按照它存储在数据库中的方式输出它 - 最好没有任何 CSS 恶作剧。

我怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-04T09:38:49.743

听起来好像有什么东西在召唤[`humanize()`](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-humanize)。这似乎发生在 Rails 将元素名称转换为标签标题时。可能您应该为它的表单元素明确定义标签的文本。

```
<%= f.label(:aapl, 'AAPL') %> 
```

甚至

```
<%= f.label(:aapl, @yourVar) %> 
```

您的另一个选择可能是 Rails 提供的翻译功能。这对 Rails > 3.1 有效！

在您看来：

```
<% form_for @post do |f| %>
  <%= f.label :title %>
  <%= f.text_field :title %>
  <%= f.submit %>
<% end %> 
```

在您的 en.yml 中：

```
en:
  helpers:
    label:
      post:
        title: 'Your Title' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-29T13:11:46.243

试试这个：

```
f.label(topic).upcase.html_safe 
```

# c# - 来自资源的 Facebook XMPP IM 名称

> ID：12724190
> 
> 赞同：0
> 
> 时间：2012-10-04T09:25:30.063
> 
> 标签：c#, facebook, client, facebook-chat, agsxmpp

我正在使用 FB XMPP，我想知道用户使用的是什么客户端。如果我使用 Google Talk 聊天，我可以在资源属性中获取/设置它。但在 FB 聊天中它不起作用。尽管我设置了它，但它总是空的。

jid = [节点“@”]域[“/”资源]

使用 agsXMPP：

放：`xmppClient.Resource = "::ISIM::";`

得到：`presence.From.Resource`

谷歌：id@gmail.com/::ISIM::478f568d

脸书：id@chat.facebook.com/

我怎样才能得到那个用户正在使用我的客户端？有人有经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:23:19.683

服务发现和软件版本不适用于 Facebook 的 XMPP 服务器。这是一个例子，我刚刚尝试发送一个简单的：

```
<iq xmlns="jabber:client" type="get" to="xxxxxxx@chat.facebook.com" 
id="5"><query xmlns="http://jabber.org/protocol/disco#info"/></iq> 
```

这就是 Facebook 的回答：

```
<iq from="xxxx@chat.facebook.com" to="xxxxxx@chat.facebook.com/xxxxxx" type="error" xml:lang="en" 
id="5"><query xmlns="http://jabber.org/protocol/disco#info"/><error code="503" 
type="cancel"><service-unavailable xmlns="urn:ietf:params:xml:ns:xmpp-
stanzas"/></error></iq> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:48:50.997

您应该为此使用服务发现或客户端版本。
请参阅：
[XEP-0030：服务发现](http://xmpp.org/extensions/xep-0030.html)
[XEP-0092：软件版本](http://xmpp.org/extensions/xep-0092.html)

# magento - Magento 收集过滤器

> ID：12724192
> 
> 赞同：2
> 
> 时间：2012-10-04T09:25:34.273
> 
> 标签：magento

在 magento 集合中，我想使用“store”属性过滤值。我在数组中有一些值。基于该数组，我需要过滤值。但是以下两个功能都不起作用。

```
$collection->addAttributeToFilter('store',array('in' => array(1,2,3)));
$collection->addFilter('store',array('in' => array(1,2,3)); 
```

有没有其他可能让它发挥作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T09:47:43.593

```
$collection->addFieldToFilter('stores', array('in' => array(1,2,3))); 
```

addFieldToFilter 完成了这项工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-14T09:32:56.347

这是因为计算出来的sql会是这样的：

```
select 'fields' from 'tablename' where stores in ('1','2','3'); 
```

如您所见`in`，操作员需要一个数组。

# c# - 如何用我的数据库中的值填充我的 CheckBoxList？

> ID：12724197
> 
> 赞同：1
> 
> 时间：2012-10-04T09:25:45.960
> 
> 标签：c#, asp.net, html

如何`CheckBoxList`使用存储在数据库中的值设置值？我尝试使用 a`datareader`但它不起作用，我不知道为什么。

我的代码：

```
cmd = new SqlCommand("SELECT [SeatID], [Flag] FROM [SeatingPlan] WHERE ([SectionID] = 1 )", con);
dr = cmd.ExecuteReader();
while (dr.Read())
{
    for (int i = 0; i < 15; i++)
    {
        if (dr.GetString(1).Equals("true"))
        {
            chkBoxDaysList.Items[i].Selected = true;
            chkBoxDaysList.Items[i].Enabled = false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T09:48:04.583

您应该使用数据适配器而不是使用数据阅读器。

并像这样绑定它。

```
chkBoxDaysList.DataSource = tempds.Tables(0)
chkBoxDaysList.DataTextField = "SeatID"
chkBoxDaysList.DataValueField = "Flag"
chkBoxDaysList.DataBind() 
```

# php - 谷歌云打印。如何提交有效的能力？

> ID：12724201
> 
> 赞同：2
> 
> 时间：2012-10-04T09:26:12.480
> 
> 标签：php, google-cloud-print

当我发送没有功能的打印机作业时，它的工作和打印：

```
<?php
$url = "http://www.google.com/cloudprint/submit?printerid=" . $printer_id . &output=json";
        $post = array(
            "printerid" => $printer_id,
            "capabilities" => '',
            "contentType" => "text/plain",
            "title" => $title,
            "content" => $docBytes
        );
        $post = http_build_query($post);
        $ret = $this->processRequest($url, $post, "");
?> 
```

但现在我需要以 A7 格式的字母打印信息。所以我用一些功能编写了这段代码：

```
<?php
 $url = "http://www.google.com/cloudprint/submit?printerid=" . $printer_id . "&output=json";
        $post = array(
            "printerid" => $printer_id,
            "capabilities" => array('psk:MediaSizeWidth' => '74000', 'psk:MediaSizeHeight' => '104700'), 
            "contentType" => "text/plain",
            "title" => $title,
            "content" => $docBytes
        );

        $post = http_build_query($post);
        $ret = $this->processRequest($url, $post, "");
?> 
```

**而且它不想打印。只是错误。也许有人知道如何正确地做到这一点？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T20:02:35.007

我目前正在使用云打印为 Web 应用程序实现无人值守打印，这是漫长的一天！

从谷歌对话框（[https://www.google.com/cloudprint/gadget.html](https://www.google.com/cloudprint/gadget.html)）打印时一切正常，但是通过我的 API 发送文件把一切都搞砸了（在热敏打印机上打印餐厅门票，最终得到 50 厘米上边距）

在网上到处查看后，我意识到 google print gadget 是纯 html，使得提交请求非常容易捕获。只需启动您的开发人员工具，从对话框中打印一些内容，然后检查发布数据的“功能”值。

令人困惑的部分是这些设置需要采用类似 PPD 的格式，而不仅仅是普通的关联数组。

您可以使用正确的设置从所需的打印机进行打印，然后按照您的 API/其他内容复制“功能”部分。例如，这是我的：

```
{"capabilities":[{"name":"TmtPaperSource","type":"Feature","options":[{"ppd:value":"\"\"","name":"PageFeedCut","displayName":"Page [Feed, Cut]"}]},{"name":"TmtPaperReduction","type":"Feature","options":[{"ppd:value":"\"\"","name":"Both","displayName":"Top & Bottom margins"}]}]} 
```

并格式化：

```
{
    "capabilities":[
        {
            "name":"TmtPaperSource",
            "type":"Feature",
            "options":[{
                "ppd:value":"\"\"",
                "name":"PageFeedCut",
                "displayName":"Page [Feed, Cut]"
            }]
        },
        {
            "name":"TmtPaperReduction",
            "type":"Feature",
            "options":[{
                "ppd:value":"\"\"",
                "name":"Both",
                "displayName":"Top & Bottom margins"
            }]
        }
    ]
} 
```

最后一点：您需要将整个事情作为“功能”参数传递，这意味着您的请求类似于`.../submit?capabilities={capabilities:[...]}`，也非常令人困惑！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:23:29.243

在我发现的 GCP 文档中，该功能（打印格式、副本计数等）仅支持 Google Cloud Ready 打印机！

目前我发现只有一种方法可以做到这一点：只需立即在打印机的操作系统驱动程序中配置设置以在 A7 中打印，它将始终在 A7 中打印

# asp.net - SignalR 和浏览器连接限制

> ID：12724202
> 
> 赞同：20
> 
> 时间：2012-10-04T09:26:15.773
> 
> 标签：asp.net, iis, push-notification, signalr

我用 SignalR 制作了一个简单的应用程序进行测试。当页面加载时，它调用服务器上的一个函数，然后该函数调用一个在屏幕上打印消息的客户端函数。我这样做是为了检查客户端和服务器功能是否正常工作以及 SignalR 通信是否正常。

我的问题是，如果我在两个不同的选项卡上打开同一个页面（在 Chrome 中完成），第一页加载正常，但第二页不调用服务器的功能 - 只有当我关闭第一页时。

据我了解，它们可能是与浏览器相关的连接限制，不允许 SignalR 连接一次以上（实际上是两个，一个用于接收，一个用于发送）

更新：我找到了我们打开的其他选项卡，但现在我已经检查过了，它只允许**4 个选项卡**/页面与连接处于活动状态。如果我尝试将同一页面放在新选项卡上，则不会发送任何数据，当我关闭其他选项卡之一时，新选项卡会立即发送数据。

我想知道是否有任何解决方案，因为如果用户决定在两个或更多选项卡上打开同一页面，我希望此连接可用。

我不相信它与 IIS 有任何关系，因为据我所知它可以接受数千个连接。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-23T18:35:07.393

这个问题最好由未来的[通道消息](http://www.whatwg.org/specs/web-apps/current-work/multipage/web-messaging.html#channel-messaging)规范解决，该规范迄今为止尚未被任何浏览器实现，但我设法通过[限制](http://www.codetunnel.com/cannot-have-many-tabs-open-with-signalr)Alex Ford 描述的连接数量并`localStorage`用作选项卡之间的消息总线来解决它.

该`storage`事件允许您在选项卡之间传播数据，同时保持单个 SignalR 连接打开（从而防止连接饱和）。调用将在所有其他选项卡（不是调用者）中`localStorage.setItem('sharedKey', sharedData)`引发事件：`storage`

```
$(window).bind('storage', function (e) {
    var sharedData = localStorage.getItem('sharedKey');
    if (sharedData !== null)
        console.log(
            'A tab called localStorage.setItem("sharedData",'+sharedData+')'
        );
}); 
```

您可以测试`if ($.connection.hub.state === 1)`以确定给定选项卡是否应通过 localStorage（由 Alex 提供）通知其他选项卡，以防止重复`localStorage.setItem`调用。

Facebook 通过在多个子域上提供持久连接来克服浏览器的限制，但这会使部署和测试复杂化。

## 注意事项

**旧连接：**在 Alex 的解决方案中，您需要小心`Disconnect()`不要被调用（例如异常），并且您需要`HubConnections`用旧的集线器连接填充您的存储桶（或存储库）。如果会话 ID 没有更改（可能发生），这可能会阻止新客户端建立 SignalR 连接，即使没有处于活动状态。或者，为新连接添加时间戳并设置一个滑动过期时间以最大限度地减少潜在影响。

**锁定：** `localStorage`可能会受到竞争条件的影响，因为它没有实现[此处描述的](http://balpha.de/2012/03/javascript-concurrency-and-locking-the-html5-localstorage/)任何锁定。

为了支持不同类型的事件，您应该在 JSON 消息中编码一个*eventType*并在`storage`事件上对其进行测试。

## 后备

如果无法建立 SignalR 连接，我会每 45 秒轮询一次服务器以检索通知计数。

如果不想使用localStorage，可以使用cookies，但不是那么干净。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-02T22:28:19.010

我创建了[IWC-SignalR](https://github.com/slimjack/IWC-SignalR)实用程序，它允许为同一应用程序的所有窗口（选项卡）建立单个 SignalR 连接。

**这个怎么运作**

其中一个窗口成为连接所有者（随机选择）并持有真正的 SignalR 连接。如果连接所有者关闭或崩溃，另一个窗口将成为连接所有者 - 这会自动发生。窗口间通信是通过[窗口间通信库](https://github.com/slimjack/IWC)（基于`localStorage`）完成的。该库提供了在窗口之间以及在并行进程（锁、共享数据、事件总线......）之间进行通信的功能。希望它对某人有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T08:52:42.637

为了扩展@FreshCode 的答案，这就是我实现他的想法的方式。

我需要在选项卡之间传递两个不同的操作。我可以设置通知或删除通知。这些通知由浏览器接收并存储为将在指定时间触发的超时。第一个选项卡有 SignalR 连接，而其他所有选项卡都没有。我必须克服的一个问题是，无论我打算执行哪个操作（设置/删除），“存储”事件都会触发。

我最终做的是传递一个自定义 JSON 对象，其中包含我想要执行的操作的属性：

```
$(window).bind('storage', function () {
    var updateInfo = JSON.parse(localStorage.getItem('updateInfo'));
    if (updateInfo.action == 'removeNotification')
        removeNotification(updateInfo.notificationId);
    else if (updateInfo.action == 'setNotification')
        setNotification(updateInfo.notification);
}); 
```

这样，每次我在本地存储中设置一个项目时，我只需指定需要发生的操作，并且只有该操作会在其他选项卡上发生。例如，如果我更新一个通知，它是客户端收到通知时这两种操作的组合。它删除通知并使用更新的值设置通知。因此，`localStorage.setItem`正在拨打两个电话。

```
function removeNotification(id) {
    // Check if signalR is connected. If so, I am the tab that will update
    // the other tabs.
    if ($.connection.hub.state === 1) {
        var updateInfo = {
            action: 'removeNotification',
            notificationId: id
        };
        localStorage.setItem('updateInfo', JSON.stringify(updateInfo));
    }
    // brevity brevity
} 
```

同样，`setNotification`函数。

```
function setNotification(notification) {
    if ($.connection.hub.state === 1) {
        var updateInfo = {
            action: 'setNotification',
            notification: notification
        };
        localStorage.setItem('updateInfo', JSON.stringify(updateInfo));
    }
    // brevity brevity
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-16T13:21:26.693

确保 SignalR 可以使用并且正在使用 WebSocket，并且它不会使用您的应用程序允许使用的有限数量的连接之一。

[SignalR kan 使用不同的传输协议，这里描述](https://docs.microsoft.com/en-us/aspnet/signalr/overview/getting-started/introduction-to-signalr#transports-and-fallbacks)了 SignalR 如何决定使用哪个：

> **HTML 5 传输**
> 
> 这些传输依赖于对 HTML 5 的支持。如果客户端浏览器不支持 HTML 5 标准，则将使用较旧的传输。
> 
> *   **WebSocket**（如果服务器和浏览器都表明它们可以支持 Websocket）。WebSocket 是唯一一种在客户端和服务器之间建立真正持久的双向连接的传输方式。但是，WebSocket 也有最严格的要求；它仅在最新版本的 Microsoft Internet Explorer、Google Chrome 和 Mozilla Firefox 中完全支持，并且仅在 Opera 和 Safari 等其他浏览器中部分实现。
> *   **Server Sent Events**，也称为 EventSource （如果浏览器支持 Server Sent Events，基本上是除了 Internet Explorer 之外的所有浏览器。）

和

> **传输选择过程** 下面的列表显示了 SignalR 用来决定使用哪个传输的步骤。
> 
> 1.  如果浏览器是 Internet Explorer 8 或更早版本，则使用长轮询。
>     
>     
> 2.  如果配置了JSONP（即启动连接时jsonp参数设置为true），则使用Long Polling。
>     
>     
> 3.  如果正在建立跨域连接（即，如果 SignalR 端点与托管页面不在同一个域中），则如果满足以下条件，则将使用 WebSocket：
>     
>     
>     *   客户端支持 CORS（跨域资源共享）。有关哪些客户端支持 CORS 的详细信息，请参阅 caniuse.com 上的 CORS。
>         
>         
>     *   客户端支持WebSocket
>         
>         
>     *   服务器支持WebSocket
>         
>         
>         
>         如果这些标准中的任何一个不符合，将使用长轮询。有关跨域连接的更多信息，请参阅如何建立跨域连接。
>         
>         
> 4.  如果没有配置 JSONP 且连接不是跨域的，则在客户端和服务器都支持的情况下使用 WebSocket。
>     
>     
> 5.  如果客户端或服务器不支持 WebSocket，则使用服务器发送事件（如果可用）。
>     
>     
> 6.  如果服务器发送事件不可用，则尝试使用 Forever Frame。
>     
>     
> 7.  如果 Forever Frame 失败，则使用长轮询。

使用开发人员工具，检查在您的页面上进行的网络调用。您应该能够看到如下内容：

`.../connect?transport=webSockets&clientProtocol=1.5&connectionToken=...`

如果`transport`不是`webSockets`（例如`serverSentEvents`或`longPolling`），您可能需要对客户端和服务器进行故障排除，以了解为什么握手不会导致使用 WebSockets。（就我而言，我错过了为 IIS 安装*WebSocket 协议*窗口功能。

# c# - 如何在 wp7 Bing 地图服务中搜索位置？

> ID：12724203
> 
> 赞同：1
> 
> 时间：2012-10-04T09:26:14.993
> 
> 标签：c#, windows-phone-7, xaml

[我从http://blog.jerrynixon.com/2011/10/bing-maps-geocoding.html](http://blog.jerrynixon.com/2011/10/bing-maps-geocoding.html)复制了一个代码

并以 Little Way 编辑。但它不起作用。

Xaml 代码是

```
<phone:PhoneApplicationPage 

x:Class="MapLocationSearch1.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"

FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"

SupportedOrientations="Portrait" Orientation="Portrait"
shell:SystemTray.IsVisible="True" xmlns:my="clr-

namespace:Microsoft.Phone.Controls.Maps;assembly=Microsoft.Phone.Controls.Maps">

<!--LayoutRoot is the root grid where all page content is placed-->

<Grid x:Name="LayoutRoot" Background="Transparent">

    <my:Map Height="526" HorizontalAlignment="Left" Name="map1" VerticalAlignment="Top" Width="480" Hold="map1_Hold" CredentialsProvider="Key"/>

    <TextBox Height="72" HorizontalAlignment="Left" Margin="0,532,0,0" Name="txtSearch" Text="" VerticalAlignment="Top" Width="460" />

    <Button Content="Search" Height="72" HorizontalAlignment="Left" Margin="151,624,0,0" Name="btnSearch" VerticalAlignment="Top" Width="160" Click="btnSearch_Click" />
</Grid>

<!--Sample code showing usage of ApplicationBar-->
<!--<phone:PhoneApplicationPage.ApplicationBar>

    <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
        <shell:ApplicationBarIconButton IconUri="/Images/appbar_button1.png" Text="Button 1"/>
        <shell:ApplicationBarIconButton IconUri="/Images/appbar_button2.png" Text="Button 2"/>
        <shell:ApplicationBar.MenuItems>
            <shell:ApplicationBarMenuItem Text="MenuItem 1"/>
            <shell:ApplicationBarMenuItem Text="MenuItem 2"/>
        </shell:ApplicationBar.MenuItems>
        </shell:ApplicationBar>

    </phone:PhoneApplicationPage.ApplicationBar>-->

</phone:PhoneApplicationPage> 
```

运行时代码是

```
using System;    
using System.Collections.Generic;
using System.Linq;    
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using MapLocationSearch1.GeocodeService;
using Microsoft.Phone.Shell;
using System.Diagnostics;
using System.Windows.Controls.Primitives;
using System.Collections.ObjectModel;
using System.ServiceModel;
using System.Device.Location;
using Microsoft.Phone.Controls.Maps;

namespace MapLocationSearch1

{
    public partial class MainPage : PhoneApplicationPage

    {

    public MainPage()

    {
        InitializeComponent();

    }

    private void map1_Hold(object sender, GestureEventArgs e)

    {
    }

    private void btnSearch_Click(object sender, RoutedEventArgs e)

    {
        SetPushpin();   
    }

    public static void GeoCode(string address, Action<GeocodeResult, Exception> callback)

    {
        try

        {
            if (string.IsNullOrWhiteSpace(address))
                throw new ArgumentException("address");
            //Build a Request
            var _Credentials = new MapLocationSearch1.GeocodeService.Credentials { ApplicationId = "key" };
            var _Filters = new ObservableCollection<FilterBase>

            {
                new ConfidenceFilter {MinimumConfidence = Confidence.Medium}
            };
            var _Request = new GeocodeService.GeocodeRequest

            {
                Credentials = _Credentials,
                Query = address,
                Options = new GeocodeOptions{Filters = _Filters}
            };

            // Take out the data
            var _Service= new GeocodeServiceClient("BasicHttpBinding_IgeocodeService");
            _Service.GeocodeCompleted+=(s,e)=>

                {
                    callback(e.Result.Results.FirstOrDefault(),e.Error);
                };
            _Service.GeocodeAsync(_Request);
        }
        catch (Exception ex)

        {
            callback(null,ex);
        }
    }
    public void SetPushpin()

    {
        var _Address = txtSearch.Text;
        MainPage.GeoCode(_Address, (r, e) =>

        {
            Dispatcher.BeginInvoke(() =>

            {
                if (r == null || !r.Locations.Any())

                {
                    MessageBox.Show("Location Was not found");
                    return;
                }
                var _Pushpin = new Pushpin

                {
                    Location = new GeoCoordinate

                    {
                        Latitude = r.Locations[0].Latitude,
                        Longitude = r.Locations[0].Longitude
                    },
                    Content = _Address
                };
                map1.Children.Clear();
                map1.Children.Add(_Pushpin);
                map1.Center = _Pushpin.Location;
                map1.ZoomLevel = 10;

            });
        });
    } 
```

需要建议请...

我认为它没有显示任何地理编码..它没有将地理编码结果返回到图钉方法。

每个 Search 字符串只给出一个 null 作为回报。

# iphone - 触摸接受选择的按钮后如何在弹出窗口中关闭视图控制器

> ID：12724207
> 
> 赞同：1
> 
> 时间：2012-10-04T09:26:24.877
> 
> 标签：iphone, ios, ipad, uipopovercontroller, dismiss

在我当前的项目中，针对 iOS 5.0 及更高版本，我想显示一个带有一些按钮的视图，让用户选择当前在屏幕上绘制的布局。

在 iPhone 和 iPod Touch 上，我通过调用让选择视图控制器占据整个屏幕：

```
[self presentViewController:choiceController animated:YES completion:nil]; 
```

在 iPad 上，我通过调用以下命令在弹出窗口中显示相同的视图控制器的视图：

```
 [self setChooseLayoutPopover:[[UIPopoverController alloc] initWithContentViewController:choiceController]];
    [[self chooseLayoutPopover] setDelegate:self];
    [[self chooseLayoutPopover] setPopoverContentSize:CGSizeMake(320.0, 460.0)];        
    [[self chooseLayoutPopover] presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

在这两种情况下，我将两个关闭块传递给选择视图控制器，一个用于实际选择布局时，一个用于用户取消操作时。在 iPad 上触摸弹出框边界之外确实会取消它，在 iPhone 和 iPod Touch 上，我显示了一个也可以使用的取消按钮。

在 iPhone 和 iPod Touch 上，我通过调用以下方式做出选择的关闭块：

```
[[self presentingViewController] dismissViewControllerAnimated:YES completion:[self dismissBlockDone]]; 
```

但在 iPad`presentingViewController`上始终为零，即使我自己使用上述调用将指针传递给呈现视图控制器，在 iPad 上也没有任何作用。

我确实实现`-(void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController`并将呈现视图控制器设置为弹出框的委托，并且当用户触摸弹出框外部时确实会调用此方法，但是在用户实际触摸选择按钮后我找不到要调用的内容。我可以设置选择的值，但我不知道之后如何摆脱弹出窗口。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T09:33:26.807

你不应该这样称呼：

```
 [popoverController dismissPopoverAnimated:YES]; 
```

关闭弹出窗口？还是我不明白什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:15:00.340

称呼

```
[popoverController dismissPopoverAnimated:NO]; 
```

希望这可以帮助！

# .net - Visual Studio 组件选项卡

> ID：12724218
> 
> 赞同：0
> 
> 时间：2012-10-04T09:26:43.423
> 
> 标签：.net, wpf, visual-studio, visual-studio-2012, xbap

我正在使用 Visual Studio 2012，并制作了一个 WPF 浏览器应用程序。我想添加一些组件（BackgroundWorker），但我没有在工具箱中看到组件选项卡。我应该更改一些配置才能看到它吗？如何查看组件选项卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T11:07:44.647

如果您创建自定义控件或从控件类继承的其他东西，您可以使用并添加以编程方式形成您的控件，但如果 Visual Studio 没有出现在工具箱中您的组件或控件引用，您大多数是每个控件的实现设计器

# c# - 在 winform 上显示 HTML

> ID：12724223
> 
> 赞同：19
> 
> 时间：2012-10-04T09:26:50.693
> 
> 标签：c#, html, winforms

我正在开发一个 win-form 应用程序，它需要某个时间来显示一个“弹出”表单，该表单在 Internet (HTML) 上显示网页的一部分。我正在使用经典网络请求获取页面的 HTML：

```
 var serviceRequest = new WebClient();
 var response = serviceRequest.DownloadString(new Uri("www.something.com")); 
```

我已经尝试使用运行良好的**Web 浏览器**控件，但是您知道使用它有几个问题，因为它基于 COM 对象。（如果不创建线程，我无法动态创建另一个包含 Web 浏览器控件的表单STA等）

我所需要的只是“容器”，我可以在其中注入我想要显示的 HTML。

有什么建议么？

多谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-04T09:36:35.370

您可以使用网络浏览器控制。它可以直接注入所有html代码。

```
webBrowser1.DocumentText = "<html>hello <script>alert('hi');</script></html>"; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-04T09:29:03.977

尝试使用内置的 WebBrowser 控件。

CodeProject 的参考资料：

对于托管 HTML 渲染，请参阅[专业 HTML 渲染器](http://www.codeproject.com/Articles/32376/A-Professional-HTML-Renderer-You-Will-Use)

对于动态 HTML 呈现，请参阅[在 WinForm 应用程序中显示动态 HTML](http://www.codeproject.com/Articles/101403/Show-Dynamic-HTML-in-WinForm-Applications)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-05T17:55:05.640

```
webBrowser1.Document.Write(yourHtmlText); 
```

# php - 如何检查方法参数是否为stdClass对象

> ID：12724224
> 
> 赞同：8
> 
> 时间：2012-10-04T09:26:53.330
> 
> 标签：php

我正在传递`$row`已分配`$statement->fetchAll();`给它的东西

```
public function hello(array $row) 
```

我将如何检查它是否是 stdClass Object ？

最后这叫做​​类型提示吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-04T09:54:40.027

这是一个小脚本，可以帮助您检查变量是对象还是特定类型的对象，如果不想将参数函数转换为所需的对象类型。

```
<?php
function text($a){

   if(is_object($a)){
       echo 'is object';
   }else{
       echo 'is not object';
   }

   //or if you want to be more accurate 
   if($a instanceof stdClass){
       echo 'is object type stdClass';
   }else{
       echo 'is not object of type stdClass';
   }

}

$b = new stdClass();
text($b); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T09:33:31.627

很好的解决方案看起来很简单。

`public function hello(stdClass $row)`

我检查了 php 5.3 版，它可以工作。就像传递一个 stdclass 对象一样，但所有其他类型都给出了可缓存的致命错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:38:32.710

每当您想明确说明函数接收哪种对象作为参数时：

如果您期待一个 Person 对象：

```
public function talkTo(Person $person){

} 
```

如果您期待一个 stdClass 对象：

```
public function printOut(stdClass $row){

} 
```

需要数据库对象吗？

```
public function save(Database $db){

} 
```

# css - 连接字符串和 var less css

> ID：12724227
> 
> 赞同：17
> 
> 时间：2012-10-04T09:27:11.303
> 
> 标签：css, less

谁能告诉我如何在LESS中连接一个var和一个字符串，这样我就没有它们之间的空间了？

我有以下代码：

```
.text(@size) {
    font-size: @size + px;
    line-height: (@size / 10) + em;
}

h1 {
   .text(16)
} 
```

LESS 输出如下：

```
h1 {
    font-size: 12 px;
    line-height: 1.2 em;
} 
```

我需要找到一种方法来删除空格。

谢谢皮特

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-05-31T16:35:38.953

万一后来者发现这个帖子：

为此有一个内置函数：

```
unit(@dimension, [@unit: ""]); 
```

所以`font-size: unit(@size, px);`应该导致`font-size: 12px`. 我测试了它。

[http://lesscss.org/#reference](http://lesscss.org/#reference)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-06T10:07:12.587

你可以使用这样的东西：

```
.text(@size) {
    @lineheight: @size / 10;
    font-size: ~"@{size}px";
    line-height: ~"@{lineheight}em";
} 
```

但在 lesscss.org 上是这样的：在 less 1.3.1 之前，支持 (~"@{name}") 类型的选择器。**对此的支持将在不久的将来删除**。

我认为另一种解决方法是不可能的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-04T12:10:28.010

我认为最干净的方法（没有字符串插值）是将 0px 添加到您的变量中，例如`@size + 0px`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-24T19:07:19.870

如果您需要将它与 CSS 函数（例如 calc）结合使用，这是一种方法：

```
@width: 12;
width: %(~"calc(33%% - %dpx)", @width); 
```

输出：

```
width: calc(33% - 12px); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-19T14:55:57.870

这就是我最近解决类似问题的方法。

```
.text(@size: 10) {
  font-size: e(%("%dpx", @size));
  line-height: e(%("%dem", @size/10));
} 
```

%("string", value) 函数只是格式化一个字符串，因此它在字符串中获取 %d 并将其转换为任何值。这里有一个例子：http: [//cdpn.io/hAbwl](http://cdpn.io/hAbwl)

希望这能有所帮助。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-08T14:25:05.927

Less 会用空格替换除值之外的任何内容，因此要转换单位，请添加该单位的 0。只是不要传入单位值。

```
.my_mixin(@num) {
 @result: @num / 16; //12 / 16
 font-size: @result + 0em; //0.750em
}

p {
 .my_mixin(12);
} 
```

希望这对其他人有帮助。

# wpf - 如何从 Lync 联系人卡片中获取用户的电话号码或其他联系人详细信息？

> ID：12724230
> 
> 赞同：1
> 
> 时间：2012-10-04T09:27:30.437
> 
> 标签：wpf, lync

如何在我的 Lync WPF 应用程序中从 Lync 联系人卡片中获取用户的电话号码或其他联系人详细信息？（用户是指来电者或登录用户）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:42:30.090

您实际上是指（或需要使用）联系卡吗？

如果您有 Contact 对象（您可以轻松地从已登录的用户或任何来电用户中获取），您可以使用[Contact.GetContactInformation](http://msdn.microsoft.com/en-us/library/lync/hh380108%28v=office.14%29.aspx)以这种方式获取您的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:07:21.957

如果您有一个具有`contactCard`XML 属性（类型为`PresenceCategoryWithMetaData`）的用户存在，则可以使用`new ContactCard(categoryWithMetaData);`.

生成的对象将具有属性`public Collection<PhoneNumber> PhoneNumbers { get; }`等。

# uitouch - 以编程方式在 xCode 4.5 中模拟 UITouch (UISpec)

> ID：12724233
> 
> 赞同：2
> 
> 时间：2012-10-04T09:27:37.527
> 
> 标签：uitouch, xcode4.5, uispec

我在我的项目中使用[UISpec](http://code.google.com/p/uispec/)进行自动化测试。在 Apple 发布带有 iOS 6 SDK 的 xCode 4.5 之前，一切都很好。现在 UISpec 项目无法编译，因为 UITouch 类中的错误列表。这是代码：

```
//
//  TouchSynthesis.m
//  SelfTesting
//
//  Created by Matt Gallagher on 23/11/08.
//  Copyright 2008 Matt Gallagher. All rights reserved.
//
//  Permission is given to use this source code file, free of charge, in any
//  project, commercial or otherwise, entirely at your risk, with the condition
//  that any redistribution (in part or whole) of source code must retain
//  this copyright and permission notice. Attribution in compiled projects is
//  appreciated but not required.
//

@implementation UITouch (Synthesize)

//
// initInView:phase:
//
// Creats a UITouch, centered on the specified view, in the view's window.
// Sets the phase as specified.
//
- (id)initInView:(UIView *)view
{
    self = [super init];
    if (self != nil)
    {
        CGRect frameInWindow;
        if ([view isKindOfClass:[UIWindow class]])
        {
            frameInWindow = view.frame;
        }
        else
        {
            frameInWindow =
            [view.window convertRect:view.frame fromView:view.superview];
        }

        _tapCount = 1;
        _locationInWindow =
        CGPointMake(
                    frameInWindow.origin.x + 0.5 * frameInWindow.size.width,
                    frameInWindow.origin.y + 0.5 * frameInWindow.size.height);
        _previousLocationInWindow = _locationInWindow;

        UIView *target = [view.window hitTest:_locationInWindow withEvent:nil];

        _window = [view.window retain];
        _view = [target retain];
        _phase = UITouchPhaseBegan;
        _touchFlags._firstTouchForView = 1;
        _touchFlags._isTap = 1;
        _timestamp = [NSDate timeIntervalSinceReferenceDate];
    }
    return self;
}

//
// setPhase:
//
// Setter to allow access to the _phase member.
//
- (void)setPhase:(UITouchPhase)phase
{
    _phase = phase;
    _timestamp = [NSDate timeIntervalSinceReferenceDate];
}

//
// setPhase:
//
// Setter to allow access to the _locationInWindow member.
//
- (void)setLocationInWindow:(CGPoint)location
{
    _previousLocationInWindow = _locationInWindow;
    _locationInWindow = location;
    _timestamp = [NSDate timeIntervalSinceReferenceDate];
}

@end 
```

编译器在“_tapCount = 1;”之类的行上给出错误 错误是“未知类型名称“_tapCount”；您的意思是......？”

我做了什么：

1.  使用运行时函数“class_copyIvarList”获取 UITouch 类的实例变量列表，并检查这些变量是否仍然存在。他们是这样。
2.  试图在运行时更改所需的值，例如

    uint uPhase = UITouchPhaseBegin; object_setInstanceVariable(self, "_phase", &uPhase);

或者

```
Ivar var = class_getInstanceVariable([self class], "_phase");
object_setIvar(self, var, [NSNumber numberWithInt:UITouchPhaseBegin]); 
```

在这两种情况下，都将无效值写入“_phase”成员。我通过将 UITouch 实例的描述打印到控制台来检查这一点。它被写成“阶段：未知”。

然后我决定尝试键值编码并像这样实现它：

```
[self setValue:[NSNumber numberWithInt:1] forKey:@"tapCount"];
[self setValue:[NSNumber numberWithInt:UITouchPhaseBegin] forKey:@"phase"]; 
```

现在它给出了一些结果。编译错误被消除，UITouch 实例的成员值被改变但仍然没有任何反应。我在适当的 UI 对象（在我的例子中是 UIButton）的“touchesBegan:...”和“touchesEnded:...”方法中设置断点并调试它。这些方法被调用，但没有任何反应 - 按钮处理程序未被调用。

同样由于 KVC，我不得不注释 UITouch 类别的方法“setPhase”和“setLocationInWindow”，否则会发生无休止的递归。属性的 setter 调用自身。

现在我没有想法了。此类别是“由 Matt Gallagher 于 2008 年 11 月 23 日创建。”，这意味着它是 UISpec 的第三方代码。所以我希望它在除 UISpec 之外的其他地方使用，并且有人知道解决方法。

谢谢。

PS我知道这是一个私有API。它不包含在项目的发布配置中。我只需要它来进行自动化测试

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T20:32:36.623

您不必更改 UIQuery.m 文件中的任何内容。请将以下代码行添加到 UIQuery.h 文件：

```
#ifdef __IPHONE_6_0
@interface UITouch () {
    NSTimeInterval _timestamp;
    UITouchPhase _phase;
    UITouchPhase _savedPhase;
    NSUInteger _tapCount;

    UIWindow *_window;
    UIView *_view;
    UIView *_gestureView;
    UIView *_warpedIntoView;
    NSMutableArray *_gestureRecognizers;
    NSMutableArray *_forwardingRecord;

    CGPoint _locationInWindow;
    CGPoint _previousLocationInWindow;
    UInt8 _pathIndex;
    UInt8 _pathIdentity;
    float _pathMajorRadius;
    struct {
        unsigned int _firstTouchForView:1;
        unsigned int _isTap:1;
        unsigned int _isDelayed:1;
        unsigned int _sentTouchesEnded:1;
        unsigned int _abandonForwardingRecord:1;
    } _touchFlags;
}
@end
#endif 
```

谢谢。

# android - 在 android 中截取 SurfaceView 的屏幕截图

> ID：12724237
> 
> 赞同：11
> 
> 时间：2012-10-04T09:27:44.930
> 
> 标签：android

我正在使用以下方法对 SurfaceView 的特定视图进行屏幕截图。

```
public void takeScreenShot(View surface_view){

    // create bitmap screen capture
    Bitmap bitmap;
    View v1 = surface_view;
    v1.setDrawingCacheEnabled(true);
    bitmap = Bitmap.createBitmap(v1.getDrawingCache());
    v1.setDrawingCacheEnabled(false);

    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    bitmap.compress(CompressFormat.PNG, 0, bos);
    byte[] imageData = bos.toByteArray();

} 
```

问题是它给了我整个活动屏幕图像。但我需要拍摄特定视图的屏幕截图。我尝试了其他方法，但那些给我一个黑屏作为屏幕截图，一些帖子说它需要根设备。任何人都可以帮助我。我需要这个解决方案。帮我....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:56:54.713

表面视图是一个视图，但表面视图上的项目（如位图或其他对象）不是任何视图。因此，当您捕获表面视图时，它将捕获表面上的所有事物。您必须使用其他视图，例如图像视图或其他表面视图，然后捕获这些视图。

首先获取要拍照的视图然后执行此操作

```
 Bitmap bitmap;
            View rv = **your view**
            rv.setDrawingCacheEnabled(true);
            bitmap = Bitmap.createBitmap(rv.getDrawingCache());
            rv.setDrawingCacheEnabled(false);

            // Write File to internal Storage

            String FILENAME = "captured.png";
            FileOutputStream fos = null;

            try {

                fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);

            } catch (FileNotFoundException e1) {

                e1.printStackTrace();
                Log.v("","FileNotFoundException: "+e1.getMessage());

            }

            try {
                bitmap.compress(Bitmap.CompressFormat.JPEG, 90, fos);
                fos.flush();
                fos.close();

            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:39:42.717

一旦你得到位图，你可以像这样复制它的一部分：

```
 private Bitmap copyBitmap(Bitmap src){

     //Copy the whole bitmap
     //Bitmap newBitmap = Bitmap.createBitmap(src);

     //Copy the center part only
     int w = src.getWidth();
     int h = src.getHeight();
     Bitmap newBitmap = Bitmap.createBitmap(src, w/4, h/4, w/2, h/2);

     return newBitmap;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:36:08.750

尝试使用这个

```
Bitmap b = Bitmap.createBitmap(width , height, Bitmap.Config.ARGB_8888);  
v.setDrawingCacheEnabled(false);            
v.layout(0, 0, v.getLayoutParams().width, v.getLayoutParams().height);
v.draw(c); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-05T07:31:17.410

使用这种方法对我来说效果很好，实际上surfaceview不适用于 v1.setDrawingCacheEnabled(true); 我通过使用此代码来做到这一点。

```
 jpegCallback = new PictureCallback() {

        public void onPictureTaken(byte[] data, Camera camera) {

            camera.startPreview();
            Bitmap cameraBitmap = BitmapFactory.decodeByteArray
                    (data, 0, data.length);
            Matrix matrix = new Matrix();
            matrix.postRotate(90);
            pd = new ProgressDialog(MainActivity.this);
            pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            pd.setTitle("Wait!");
            pd.setMessage("capturing image.........");
            pd.setIndeterminate(false);
            pd.show();

            progressStatus = 0;
            new Thread(new Runnable() {
                @Override
                public void run() {
                    while (progressStatus < 100) {
                        // Update the progress status
                        progressStatus += 1;

                        try {
                            Thread.sleep(20);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }

                        handler.post(new Runnable() {
                            @Override
                            public void run() {
                                // Update the progress status
                                pd.setProgress(progressStatus);
                                // If task execution completed
                                if (progressStatus == 100) {
                                    // Dismiss/hide the progress dialog
                                    pd.dismiss();
                                }
                            }
                        });
                    }
                }
            }).start();

            Bitmap rotatedBitmap = Bitmap.createBitmap(cameraBitmap, 0, 0, cameraBitmap.getWidth(), cameraBitmap.getHeight(), matrix, true);
            if (rotatedBitmap != null) {
                rotatedBitmap = combinebitmap(rotatedBitmap, bitmapMap);
                Random num = new Random();
                int nu = num.nextInt(1000);
                ByteArrayOutputStream bos = new ByteArrayOutputStream();
                rotatedBitmap.compress(Bitmap.CompressFormat.JPEG, 100, bos);
                byte[] bitmapdata = bos.toByteArray();
                ByteArrayInputStream fis = new ByteArrayInputStream(bitmapdata);
                String picId = String.valueOf(nu);
                String myfile = "Ghost" + picId + ".jpeg";
                File dir_image = new File(Environment.getExternalStorageDirectory() +//<---
                        File.separator + "LiveCamera");          //<---
                dir_image.mkdirs();                                                  //<---

                try {
                    File tmpFile = new File(dir_image, myfile);
                    FileOutputStream fos = new FileOutputStream(tmpFile);

                    byte[] buf = new byte[1024];
                    int len;
                    while ((len = fis.read(buf)) > 0) {
                        fos.write(buf, 0, len);
                    }
                    fis.close();
                    fos.close();
                    Toast.makeText(getApplicationContext(),
                            " Image saved at :LiveCamera", Toast.LENGTH_LONG).show();
                    camera.startPreview();
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                MediaScannerConnection.scanFile(MainActivity.this,
                        new String[]{dir_image.toString()}, null,
                        new MediaScannerConnection.OnScanCompletedListener() {
                            public void onScanCompleted(String path, Uri uri) {
                            }
                        });

                safeToTakePicture = true;

            }

        }

    }; 
```

# ssh - 公钥身份验证在 Cyber Duck 中不起作用

> ID：12724241
> 
> 赞同：3
> 
> 时间：2012-10-04T09:27:52.980
> 
> 标签：ssh, cyberduck

我正在尝试使用公钥通过 ssh 连接到服务器。

当我从终端尝试 ssh 命令时，一切正常：

```
ssh user@server.org 
```

但是当我尝试从cyberduck连接时，我得到“连接被拒绝”

这些是我的价值观：

```
server: user@server.org
user:
use public key authentication: ˜/.ssh/id_rsa 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T22:10:47.050

在 Mac 上，您的登录钥匙串中保存的标准密码可能与公钥密码不匹配。如果您之前使用标准`password`身份验证连接，后来切换到`publickey`，则可能存在不匹配，因为两者都使用相同的名称保存在钥匙串中。

使用 Mac OSX [Keychain Access](http://en.wikipedia.org/wiki/Keychain_Access)删除（或编辑）`server.org`.

我看到您的 Cyber​​Duck 设置中有一个空的用户名，并且使用了 user@server.org 格式的服务器字段。要简化 SSH/SFTP 连接设置，您可以使用为终端和 Cyber​​Duck[`~/.ssh/config`合并 (SFTP) 设置。`server.org`](http://trac.cyberduck.ch/wiki/help/en/howto/sftp)如果您在“打开连接”或“添加/编辑书签”中`ssh`编辑服务器名称，Cyber​​Duck 将获取设置。*使用 Cyber​​Duck 的最新/当前**[快照版本进行](http://trac.cyberduck.ch/wiki/help/en/faq#SnapshotandBetabuilds)**了测试，因为旧版本中存在问题 - 但当前快照中还有其他带有书签的错误。*`server.org`

# intellij-idea - IntelliJ IDea：保存“手表”表达式？

> ID：12724246
> 
> 赞同：7
> 
> 时间：2012-10-04T09:28:21.027
> 
> 标签：intellij-idea

有谁知道我是否可以保存/保留我在“手表”窗口中的表达式？

我厌倦了必须一直输入它们...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:43:09.977

手表[没有保存](http://youtrack.jetbrains.com/issue/IDEA-42954)，这是一个已知的限制。另请参阅[相关请求](http://youtrack.jetbrains.com/issue/IDEA-64029)。

# javascript - 为多个创建的元素创建函数

> ID：12724249
> 
> 赞同：0
> 
> 时间：2012-10-04T09:28:23.353
> 
> 标签：javascript, html

我创建了以下小提琴：

[http://jsfiddle.net/cgoddard/eceGc/1/](http://jsfiddle.net/cgoddard/eceGc/1/)

我想知道需要做什么，以便三个创建的链接中的每一个都会提醒一个数字（即当时它所`i`在的数字）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T09:30:12.643

查看更新的小提琴：http: [//jsfiddle.net/eceGc/2/](http://jsfiddle.net/eceGc/2/)

```
var selectorObject = document.getElementById('selector');
for (var i = 0; i < 3; i++) {
   (function(i) {
       /* all code here */
   }(i));
} 
```

只需将循环体包装成一个闭包（一个自执行的匿名函数），将当前`i`作为参数传递。

您的代码出现问题是因为触发 click 事件时， 的值`i`已达到循环内的限制，因此您正在读取该值。

* * *

避免这种行为的另一种方法是通常将循环内的所有代码移动到一个函数中，然后在循环内调用该函数（始终将`i`变量作为参数传递）

# mysql - MySQL中的空间交集

> ID：12724251
> 
> 赞同：1
> 
> 时间：2012-10-04T09:28:32.837
> 
> 标签：mysql, geospatial, intersection, spatial

我正在运行 LAMP 堆栈并想做一些高级空间查询。有没有人有找到两个多边形相交形状的解决方案？我知道目前 MySQL 不支持交集函数，但我希望有人可能有自己的交集函数或其他解决方案。

如果它更清楚，这将是 MSSQL 中的等价物

```
SELECT
      T1.id,
      T2.id,
      T1.shape.STIntersection(T2.shape) Intersection

FROM
      table1 T1
      INNER JOIN table2 T2
      ON T1.shape.STIntersects(T1.shape) = 1
      AND T1.id > T2.id 
```

感谢 [查找多边形重叠](https://stackoverflow.com/questions/10079879/find-polygon-overlaps)帖子。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-04T11:11:07.603

> 我知道目前 MySQL 不支持交集功能

[真的吗？](http://dev.mysql.com/doc/refman/5.0/en/functions-that-create-new-geometries-from-existing-ones.html#function_intersection)

# c# - 是否可以在 SaveChanges 之后停止实体框架“修复”关系？

> ID：12724253
> 
> 赞同：6
> 
> 时间：2012-10-04T09:28:34.523
> 
> 标签：c#, .net, entity-framework-4.3.1

我从 Entity Framework 4.3.1 中得到了这个异常（顺便说一下，来自在 Visual Studio 2010 中针对 .NET 4 构建的 ASP .NET MVC 3 Web 应用程序）：

> System.InvalidOperationException：对数据库的更改已成功提交，但在更新对象上下文时发生错误。ObjectContext 可能处于不一致的状态。内部异常消息：无法将对象添加到对象上下文。对象的 EntityKey 有一个 ObjectStateEntry，表明该对象已经参与了不同的关系。

我做了一些谷歌搜索，然后我来到了这个（在 msdn 上）：

[保存时出现 InvalidOperationException](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/ec51c3a4-063f-44c1-860e-366f34045b21)

在那个 Jeff Derstadt （接受的答案）中说：

> 然后，当您调用 SaveChanges 时，上下文会保留更改，然后尝试修复状态条目。当它这样做时，它会执行“密钥修复”，将临时 EntityKeys 转换为完整的 EntityKeys。在这种情况下，临时密钥 TKP2 现在将等于 P2 的密钥。上下文尝试将状态管理器中的密钥条目“提升”为完整的实体条目，并在此过程中修复图形。这是因为存在冲突而发生异常的地方：P1.Spouse = P2，因此 P2.Spouse 应该 = P1，但由于添加了项目，P2.Spouse 已经等于 P3，并且 EntityReference 不能有多个值。

我在这里以一种“肮脏”的方式思考，所以我的问题是......

因为我并不真正关心保存更改后对象图的样子（这是我的请求的结束，所以无论如何都被丢弃了）并且数据已被插入（当我在 SQL Server 中查看它时实际上完全没问题在我让它在调试器中继续运行之后） - 有没有办法告诉实体框架不要执行此步骤（因此不会出现此异常，并且可能也节省了一些时间）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:01:11.147

如果您需要更好的帮助，您应该发布一些代码。

尽管如此，我还是发现自己与其中的一些错误作斗争，并得出了一个基本事实：如果您要引用数据库中已经存在的内容，请务必引用它。不要只使用键或代码，而是使用 DbContexts 中表示的实际对象。您可以使用 DbContext.Entry() 方法找到它们。

另一方面，如果原始对象和引用对象都是在运行时创建的，请确保为它们提供唯一 ID，并且该 ID 在运行时由实体框架（而不是数据库）知道。否则（例如，如果您依赖 NEWID() Sql 函数），对象 A 引用的对象 B 的运行时 ID 可能不等于同一对象一旦存储在数据库中的 ID。

正如我所说，如果您愿意发布一些代码，我们可能会提供更好的帮助；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T09:19:32.290

没有官方的方法可以做到这一点，但试试这个：

```
private static readonly Lazy<MethodInfo> internalDeleteMethod = new Lazy<MethodInfo>(
    () => typeof(ObjectContext).Assembly.GetType("System.Data.Objects.EntityEntry").GetMethod("Delete", BindingFlags.Instance | BindingFlags.NonPublic, null, new[] { typeof(bool) }, null)); 

public static void Delete<TEntity>(Func<DbContext> dbContextFactory, TEntity entity,
    Func<DbContext, IEnumerable<DbEntityValidationResult>> onSaving = null,
    Action<DbContext> onSaved = null,
    bool referenceFixup = true)
        where TEntity : class
{
    Guard.ArgumentNotNull(dbContextFactory, "dbContextFactory");
    Guard.ArgumentNotNull(entity, "entity");
    onSaving = onSaving ?? (_ => null);
    onSaved = onSaved ?? (_ => { });

    using (var dbContext = dbContextFactory())
    {
        var set = dbContext.Set<TEntity>();
        set.Attach(entity);

        var entry = ((IObjectContextAdapter)dbContext).ObjectContext.ObjectStateManager.GetObjectStateEntry(entity);
        internalDeleteMethod.Value.Invoke(entry, new object[] { referenceFixup });

        dbContext.SaveChanges();
     }
 } 
```

# java - Java 高 cpu 使用率 Debian

> ID：12724254
> 
> 赞同：0
> 
> 时间：2012-10-04T09:28:37.333
> 
> 标签：java, debian

当我在我的 Debian 服务器（例如 tomcat、jvirtualvm）上运行任何 Java 程序时，cpu 使用率会飙升至 100%，然后始终保持在 80% 和 120% 之间。由于 jvirtualvm 也会导致这个问题，所以我不能真正使用它来调试。有什么想法可以让我了解更多信息吗？当我使用 sun-java 或 open-jdk 时会发生这种情况。我从存储库安装了这两个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:31:17.077

在尝试在 ubuntu 上运行 tomcat 之前，我确实遇到了类似的问题，我使用 apt-get 来安装 tomcat 包，因为它很容易，但使用起来似乎很复杂。

[所以我尝试从http://ftp.heanet.ie/mirrors/www.apache.org/dist/tomcat/tomcat-6/v6.0.35/bin/apache-tomcat-6.0.35.tar.gz](http://ftp.heanet.ie/mirrors/www.apache.org/dist/tomcat/tomcat-6/v6.0.35/bin/apache-tomcat-6.0.35.tar.gz)安装tomcat

只需下载 tarball，然后像这样将其解压缩到 /opt

```
wget http://ftp.heanet.ie/mirrors/www.apache.org/dist/tomcat/tomcat-6/v6.0.35/bin/apache-tomcat-6.0.35.tar.gz
tar xfzv apache-tomcat-6.0.35.tar.gz
sudo mv apache-tomcat-6.0.35 /opt/tomcat 
```

现在，如果您已经安装了 JDK，只需启动您的 tomcat，

```
sudo /opt/tomcat/bin/startup.sh 
```

然后访问你的tomcat，

```
http://localhost:8080 
```

您可能需要先删除现有的 tomcat 包。

# testing - 分布式浏览器测试

> ID：12724255
> 
> 赞同：0
> 
> 时间：2012-10-04T09:28:39.393
> 
> 标签：testing, browser, cloud

我需要在全球范围内进行分布式浏览器测试。即我想让 x 台计算机分布在世界各地（不在同一个位置），它们都在运行 chrome beta（现在），并告诉他们去一个我决定的地址 y 时间，然后测试结束。我自己从我的服务器中提取和分析数据。我还需要知道这些计算机上的黑白信息。有许多用于压力测试的工具 .etc，但它们通常在同一台机器上运行很多实例。

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:33:27.010

您可以为此目的使用代理。负载生成器本身可以在一个地方，但您可以使用世界各地的代理启动单独的负载生成器。

这将获得或多或少类似的结果（除非您想测量客户端响应时间）。

由于您希望从服务器中提取数据，因此它应该适合您的目的。

# android - 如何在android中使用layerlist设计Button

> ID：12724266
> 
> 赞同：1
> 
> 时间：2012-10-04T09:29:03.960
> 
> 标签：android, button, drawable

我想在android中设计下面的按钮。我使用 shape drawable 来设计它。

[http://i48.tinypic.com/9gh7ye.png](http://i48.tinypic.com/9gh7ye.png)

我几乎设计了这个，但无法在按钮上获得边界。（每个按钮的上边界）。

你可以看到每个按钮的顶部都有深色边框。如何设计这个。我听说过 layerlist 但不知道如何使用它？

有人可以知道吗？请分享您的想法。提前致谢。

最新按钮 xml-->

```
 <Button
        android:id="@+id/buttonRefresh"
        android:layout_width="@dimen/titlebar_refresh_button_width"
        android:layout_height="@dimen/titlebar_button_height"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:background="@drawable/refresh_btn_state_list_drawable"
        android:drawableLeft="@drawable/refresh"
        android:paddingLeft="14dp" /> 
```

1.  最新的_btn_state_list_drawable.xml

    ```
    <item android:drawable="@drawable/newest_btn_shape_drawable_h" android:state_pressed="true"/>
    <!-- pressed -->
    <item android:drawable="@drawable/newest_btn_shape_drawable_f" android:state_selected="true"/>
    <!-- focused -->
    <item android:drawable="@drawable/newest_btn_shape_drawable"/>
    <!-- default --> 
    ```

2.newest_btn_shape_drawable.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <gradient
        android:angle="45"
        android:endColor="#6080A8"
        android:startColor="#6080A8" />

    <padding
        android:bottom="5dp"
        android:left="5dp"
        android:right="5dp"
        android:top="5dp" />

    <corners
        android:bottomLeftRadius="5dp"
        android:bottomRightRadius="0dp"
        android:topLeftRadius="5dp"
        android:topRightRadius="0dp" />

    <stroke
        android:width="0.2dip"
        android:color="#000000" >
    </stroke>

</shape> 
```

3.newest_btn_shape_drawable_h.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <gradient
        android:angle="45"
        android:endColor="#405070"
        android:startColor="#405070" />

    <padding
        android:bottom="5dp"
        android:left="5dp"
        android:right="5dp"
        android:top="5dp" />

    <corners
        android:bottomLeftRadius="5dp"
        android:bottomRightRadius="0dp"
        android:topLeftRadius="5dp"
        android:topRightRadius="0dp" />

    <stroke
        android:width="1dip"
        android:color="#000000" >
    </stroke>

</shape> 
```

4.newest_btn_shape_drawable_h.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <gradient
        android:angle="45"
        android:endColor="#405070"
        android:startColor="#405070" />

    <padding
        android:bottom="5dp"
        android:left="5dp"
        android:right="5dp"
        android:top="5dp" />

    <corners
        android:bottomLeftRadius="5dp"
        android:bottomRightRadius="0dp"
        android:topLeftRadius="5dp"
        android:topRightRadius="0dp" />

    <stroke
        android:width="1dip"
        android:color="#000000" >
    </stroke>

</shape> 
```

# .net - 如何从 cli::array 转换 到一个字符串？

> ID：12724267
> 
> 赞同：2
> 
> 时间：2012-10-04T09:29:06.090
> 
> 标签：.net, arrays, c++-cli

我有一个`array<unsigned char>^`包含大量 ascii 字符的文件，我想将其转换为`String^`. 最有效的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:48:33.693

[在这里](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/f94ca9d3-17ba-4fc1-9c4b-be94f0b77f06)找到了解决方案：

```
BufferedStream file = gcnew BufferedStream(gcnew FileStream(fileName,FileMode::Open)); 
array<unsigned char>^ arr = gcnew array<unsigned char>(10); 
file->Read(arr,0,10); 

String^ s; 
Text::Encoding^ enc = Text::Encoding::UTF8; 
s = enc->GetString(arr); 
```

# deployment - 如何使用 Pharo 或 Squeak 部署一个不错的单窗口应用程序？

> ID：12724270
> 
> 赞同：6
> 
> 时间：2012-10-04T09:29:27.157
> 
> 标签：deployment, smalltalk, squeak, pharo, morphic

我有一个应用程序，它在一个 Morph 中拥有整个 GUI。Pharo 和 Squeak 在主机操作系统中有一个窗口。

现在我想将这个 Morph 绑定到一个 Pharo/Squeak 窗口，使其填充整个 Pharo/Squeak 窗口，调整大小（并更新 Morph 的布局），当调整 Pharo/Squeak 窗口的大小时，并且以某种方式用户没有（意外）可能访问该 Morph 之外的任何内容（不过，这只是关于可用性，而不是关于安全性！）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T13:52:42.440

在它的方法中调整你的变形边界`step`：

```
step
    (self position = (0 @ 0) and: [self extent = owner extent]) ifFalse: [
        self position: 0 @ 0.
        self extent: owner extent]. 
```

您可能希望以“部署”标志为条件，该标志仅在保存用户图像时启用。例如，Scratch ( [http://info.scratch.mit.edu/Scratch_1.4_Download](http://info.scratch.mit.edu/Scratch_1.4_Download) ) 是如何做到的。

# windows-phone-7 - WP7后台任务

> ID：12724273
> 
> 赞同：1
> 
> 时间：2012-10-04T09:29:39.263
> 
> 标签：windows-phone-7, background, settings, task, agent

在[阅读后台代理](http://msdn.microsoft.com/en-us/library/hh202941%28v=vs.92%29.aspx)时，我很困惑

1.  Windows Phone 7 允许使用计划任务来注册后台代理。那么计划任务和后台代理有什么区别呢？
2.  有两种类型的计划任务，我都使用它们

> ```
> ScheduledActionService.Add(periodicTask); 
> 
> ScheduledActionService.Add(resourceIntensiveTask); 
> ```

在 MSDN 中指出

> 描述字段是必需的，用于在设备的后台任务设置页面中向用户描述代理

但是在后台任务设置中，我**只看到定期任务**

这是为什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:48:45.010

任务是由操作系统管理并在指定时间运行的容器。它运行的代理是实际的代码有效负载。

看看[这个](http://channel9.msdn.com/Series/Mango-Jump-Start/Mango-Jump-Start-06-Windows-Phone-Multi-tasking--Background-Tasks?format=html5)

# android - 下载后执行解压缩

> ID：12724275
> 
> 赞同：2
> 
> 时间：2012-10-04T09:29:49.950
> 
> 标签：android, download, unzip, compression

您好，我已设法下载文件。现在我正在使用来自

[http://www.jondev.net/articles/Unzipping_Files_with_Android_%28Programmatically%29](http://www.jondev.net/articles/Unzipping_Files_with_Android_%28Programmatically%29)

所以，我想要一个关于我应该在哪里实现这个类的建议。还有有什么方法可以在解压后删除 zip 文件？谢谢你。

这是我的主要代码

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.xml);
 btn_src = (Button) findViewById(R.id.source);

    btn_src.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            String link;
            link = resurl + "9_1342080926-1.0.zip";

            downloadRes = new downloadRes();
            downloadRes.execute(link);          
        }

        });

    String zipFile = Environment.getExternalStorageDirectory() + 
"/aiyo/aiyomag/edition/9_1342080926-1.0.zip"; 
    String unzipLocation = Environment.getExternalStorageDirectory() + 
"/aiyo/aiyomag/edition/sourcetest"; 

    Decompress d = new Decompress(zipFile, unzipLocation); 
    d.unzip(); 
```

这是我实施解压缩过程的正确方法吗？

我真的是android的新手。任何形式的帮助将不胜感激。

编辑 - 在 ASYNCTASK 中解压缩

```
public class downloadRes extends AsyncTask<String, String, String> {
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        showDialog(DIALOG_DOWNLOAD_PROGRESS);
    }

    @Override
    protected String doInBackground(String... params) {

        try {

            File root = android.os.Environment
                    .getExternalStorageDirectory();
            File dir = new File(root.getAbsolutePath() + "/aiyo/aiyomag/edition/sourcetest");

            if (dir.exists() == false) {
                dir.mkdirs();
            }

            Log.d("param", params[0]);
            URL url = new URL(params[0]); // you can write here any link
            URLConnection connection = url.openConnection();
            connection.connect();

            // get file name and file extension

            String fileExtenstion = MimeTypeMap
                    .getFileExtensionFromUrl(params[0]);
            String name = URLUtil.guessFileName(params[0], null,
                    fileExtenstion);
            File file = new File(dir, name);
            Log.d("File in content","The file is "+file.getName());

            /*
             * Define InputStreams to read from the URLConnection.
             */
            InputStream is = connection.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(is);
            OutputStream fos = new FileOutputStream(file);

            /*
             * Read bytes to the Buffer until there is nothing more to
             * read(-1).
             */

            int lenghtOfFile = connection.getContentLength();
            int total = 0;
            byte baf[] = new byte[1024];
            int current = 0;
            while ((current = bis.read(baf)) != -1) {

                total += current;
                // publishProgress("" + (int) ((total * 100) /
                // lenghtOfFile));
                mProgressDialog.setProgress(((total * 100) / lenghtOfFile));
                fos.write(baf, 0, current);
            }

            // close every file stream
            fos.flush();
            fos.close();
            is.close();

        } catch (IOException e) {
            Log.e("DownloadManager", "Error: " + e);
        }
       return null;
    }

    @Override
    protected void onProgressUpdate(String... values) {
        mProgressDialog.setProgress(Integer.parseInt(values[0]));
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
      //  if (fileInteger == max) {
      //      dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
      //      return;
      //  }

        Log.d("post execute", "i::" + fileInteger);
      //  fileInteger++;
        // publishProgress("" + (int) ((fileInteger * 100) / max));
    //    mProgressDialog.setSecondaryProgress(((fileInteger * 100) / max));
        String link = resurl+"9_1342080926-1.0.zip";

        downloadRes = new downloadRes();
        downloadRes.execute(link);
    }

} 
```

然而，这只是课程。我仍然在 onCreate 中调用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:19:27.007

一些伪代码来重新迭代已回答的内容：

```
onCreate()
{
    buttonOnClick
    {
        DownloadAndUnzip.execute(the url)
    }
}

inner class DownloadAndUnzip()
{
    boolean failed;

    preExecute()
    {
        failed = false;
    }

    doInBackground()
    {
        try
        {
            start download stream
        }
        catch
        {
            failed = true
        }
        finally
        {
            close streams
        }

        if failed == false
        {
            try
            {
                decompress(zip file)
            }
            catch
            {
                failed = true
            }
            finally
            {
                close streams
            }
        }
    }

    postExecute()
    {
        if failed
        {
            download failed

            notify user
        }
        else
        {
            download and unzip is good

            zip.delete
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T10:04:13.163

我建议你在[AsyncTask](https://stackoverflow.com/questions/9671546/asynctask-android-example)中执行下载和解压。这是一个很好的做法，可以避免在该过程需要一段时间时冻结您的 Activity 或 GUI。从 ICS（或更早）开始，您无法在 Activity 代码中执行 webrequest，并且必须使用 Async 方法。否则，webrequest 或下载将失败。

编辑：这可能是有用的[链接教程](http://www.vogella.com/articles/AndroidPerformance/article.html)。

# iphone - iOS 6.0 和 HTML 嵌入图像 (RFC2397)

> ID：12724277
> 
> 赞同：1
> 
> 时间：2012-10-04T09:29:50.310
> 
> 标签：iphone, ios, image

这是嵌入图像的简单页面的 HTML 代码（B64 编码）：

```
<HTML>
<BODY>
    <img src="data:image/png;base64, iVBORw0KGgoAAAANS[...]UhEUgAAACAAAAAgI=">
</BODY>
</HTML> 
```

在运行 iOS 5.0 的 iPhone 上，这可以工作并显示嵌入的图像（至少在邮件应用程序中，当我将此 .html 文件用作邮件的附件时）。

在运行 iOS 6.0 的 iPhone 上，嵌入的图像不显示。看起来 Apple 不再支持 RFC2397，但我没有找到任何说明这一点的文档。

你有关于这一点的任何信息吗？

谢谢

# scala - Playframework：覆盖 BadRequest

> ID：12724281
> 
> 赞同：2
> 
> 时间：2012-10-04T09:30:05.707
> 
> 标签：scala, playframework-2.0

我正在使用 Playframework 2.0（scala 版本），我想在我的一个控制器中覆盖“BadRequest”方法。我的控制器扩展了一个特征：

```
package controllers

import play.api._
import play.api.mvc._
import play.api.libs.json.JsValue
import play.api.libs.json.JsObject

/*
 * Simple trait to factor common code used by all controllers...
 */
trait AbstractController extends Controller {
 // Personal useful methods
 // ...
 // Implementation of an override of BadRequest ?
} 
```

我的控制器：

```
package controllers

import play.api._
import play.api.mvc._
import play.api.Play.current
import play.api.libs.json._
import play.api.libs.json._
import play.api.libs.concurrent.Promise

object MyController extends AbstractController
{

 def myFunc (s: String) = {
    BadRequest(s) // should return what I'll define in MY BadRequest implementation
  }
} 
```

*我想要做的：仅为*扩展 AbstractController 的控制器实现 BadRequest 的新部分（即返回带有错误详细信息的 JSON） 。播放文档建议在 Global Object（扩展 GlobalSettings）中执行此操作并覆盖 onBadRequest 方法。但我不想要一个如此全球化的方法……只在特定的控制器中。

什么是最好的解决方案？

谢谢你的帮助。格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:48:54.990

我真的不明白这里有什么问题。只是覆盖它有什么问题？

```
trait AbstractController extends Controller {
  override val BadRequest = ... 

} 
```

# hibernate - 使用休眠在数据库中未更新对象值

> ID：12724282
> 
> 赞同：0
> 
> 时间：2012-10-04T09:30:08.243
> 
> 标签：hibernate, object

我在我的应用程序中使用 Spring、hibernate、jsf 和 jquery。我通过休眠保存查询在数据库中插入一个 Question 对象。问题对象包含 id 、question、answertype 和使用 form_id 对表单对象的引用。现在我想通过更改存储在指定索引位置的 Question 对象列表中的值来更改存储在数据库中的 Question 对象的值。如果我更改列表中的值，则更新查询不会更改数据库中的值。您能否提一些建议。

Question.java包com.otv.model；

```
import java.io.Serializable;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.Table;

import org.apache.commons.lang.builder.ToStringBuilder;

@Entity
@Table(name = "questions")
public class Question implements Serializable {

    @Id
    @GeneratedValue
    @Column(name = "id", unique = true, nullable = false)
    private int id;

    @Column(name = "question", nullable = false)
    private String text;

    @Column(name = "answertype", nullable = false)
    private String answertype;

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "form_id")
    private Form form;

    // @JoinColumn(name = "form_id")
    // private int formId;

    public Question() {
    }

    public Question(String text, String answertype) {
        this.text = text;
        this.answertype = answertype;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getQuestion() {
        return text;
    }

    public void setQuestion(String question) {

        this.text = question;
    }

    public String getAnswertype() {
        return answertype;
    }

    public void setAnswertype(String answertype) {
        this.answertype = answertype;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((answertype == null) ? 0 : answertype.hashCode());
        result = prime * result + id;
        result = prime * result + ((text == null) ? 0 : text.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        Question other = (Question) obj;
        if (answertype == null) {
            if (other.answertype != null)
                return false;
        } else if (!answertype.equals(other.answertype))
            return false;
        if (id != other.id)
            return false;
        if (text == null) {
            if (other.text != null)
                return false;
        } else if (!text.equals(other.text))
            return false;
        return true;
    }

    public void setForm(Form form) {
        this.form = form;
    }

    @Override
    public String toString() {
        return ToStringBuilder.reflectionToString(this);
    }

} 
```

表单.java

```
package com.otv.model;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.OneToMany;
import javax.persistence.Table;

import org.apache.commons.lang.builder.ToStringBuilder;

@Entity
@Table(name = "FORM")
public class Form implements Serializable {

    @Id
    @GeneratedValue
    @Column(name = "id", unique = true, nullable = false)
    private int id;

    @Column(name = "name", nullable = false)
    private String name;

    @Column(name = "description", nullable = false)
    private String description;

    @OneToMany(mappedBy = "form", fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    List<Question> questions = new ArrayList<Question>();

    public Form(String name) {
        super();
        this.name = name;
    }

    public Form() {
        super();
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public List<Question> getQuestions() {
        return questions;
    }

    public void setQuestions(List<Question> formQuestions) {
        this.questions = formQuestions;
    }

    public void addQuestion(Question question) {
        questions.add(question);
        question.setForm(this);
    }

    public void removeQuestion(Question question) {
        questions.remove(question);
        question.setForm(this);
    }

    @Override
    public String toString() {
        return ToStringBuilder.reflectionToString(this);
    }

    public void replaceQuestion(int index, Question question) {
        Question prevQuestion = questions.get(index);
        // prevQuestion.setQuestion(question.getQuestion());
        // prevQuestion.setAnswertype(question.getAnswertype());
        question.setId(prevQuestion.getId());
        question.setForm(this);
        questions.set(index, question);
    }

} 
```

问题DAO.java

```
package com.otv.user.dao;

import java.util.List;

import org.hibernate.SessionFactory;

import com.otv.model.Question;

public class QuestionDAO implements IQuestionDAO {

    private SessionFactory sessionFactory;

    public SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    public void addQuestion(Question question) {
        getSessionFactory().getCurrentSession().save(question);
    }

    public void deleteQuestion(Question question) {
        getSessionFactory().getCurrentSession().delete(question);
    }

    public void updateQuestion(Question question) {
        getSessionFactory().getCurrentSession().update(question);
    }

    public Question getQuestionById(int id) {
        List list = getSessionFactory().getCurrentSession().createQuery("from Questions where id=?")
                .setParameter(0, id).list();
        return (Question) list.get(0);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:35:42.933

只是一个非常快速的评论，可能无法回答您的问题，但是：

我以前有这个，我没有提交我的会议！我在您的代码中没有看到您提交的任何地方......希望您找到答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T11:56:16.220

提交事务或刷新会话。

如果那也行不通。使用刷新对象，

```
session.refresh(object, LockOptions.NONE) 
```

它将从 DB 获取最新信息。

# php - Jquery mobile：如何调试？

> ID：12724286
> 
> 赞同：1
> 
> 时间：2012-10-04T09:30:23.977
> 
> 标签：php, debugging, jquery-mobile

我想，在我的 jquery 移动页面中，我有一些问题，但我找不到问题。Firebug 不会触发任何错误，甚至不会发出警告。Chrome 的控制台同上。唯一的症状是我的某些页面（不是全部）无法加载。我只能看到一个圆圈的加载动画不断打开自己......

一般来说，我有一个索引页，包含 15 页，如下所示：

```
<div data-role="page" id="page1">
<div data-role="header" class="ui-bar-b">
    <h1>Yea</h1>
</div>
<?php include 'page1.php'; ?>
<?php include 'footer.php'; ?>
</div> 
```

前三个工作就像一个魅力，另一个导致问题。现在每个页面的代码都在一个单独的 php 页面中。我也尝试单独加载其他页面，但没有错误......

我正在使用 jquery mobile 1.1.1 和 jquery 1.7.1。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:47:45.247

如果你需要调试，你不应该在每个页面上都有你的 JS，你应该在入口点加载 JS，或者使用 RequireJS 根据你导航到的页面按需加载它们。这样，您还可以在所有 JS 上放置断点并轻松调试。

如果您在每个页面上都包含 JS，它需要在您的`<div data-role="page"/>`标签中，这是因为 jQM 使用 AjAX 加载，并且您的 JS 中可能`<head/>`没有被拉入。

如果您在组织 JS 方面需要帮助，请参见此处：[https ://stackoverflow.com/a/9368352/737023](https://stackoverflow.com/a/9368352/737023)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:00:33.500

只是为了完整起见：最后我解决了这个问题。页面中有一个未关闭的 div。有趣的是，我无法加载的页面不是拥有错误的页面，而是后续！现在看起来很明显，但是如果 javascript 和 php 没有触发错误，那么唯一要看的地方就是 html！我用这个验证了代码并发现了错误。[http://validator.w3.org/#validate_by_uri+with_options](http://validator.w3.org/#validate_by_uri+with_options) 谢谢大家提供的有用信息！

# jboss7.x - Jboss AS 7 中的模块 xml 中的插槽

> ID：12724288
> 
> 赞同：0
> 
> 时间：2012-10-04T09:30:32.783
> 
> 标签：jboss7.x

在 Jboss AS 7 的 module.xml 文件中，我有一个依赖项

```
<dependencies> 
     <module name="org.apache.camel.components" slot="company"/>
</dependencies> 
```

我不知道依赖模块中的插槽指的是什么。

请指导我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T00:15:41.860

该`slot`属性用于指定要包含的模块的版本，`main`未指定时默认为。

供参考，请参阅

*   jboss Modules wiki 上的[模块描述符](https://docs.jboss.org/author/display/MODULES/Module+descriptors)
*   GitHub 上[的 module-1_1.xsd](https://raw.github.com/jbossas/jboss-modules/1.1.3.GA/src/main/resources/schema/module-1_1.xsd)

# javascript - RaphaelJS HTML5 库：沿圆圈发光动画

> ID：12724291
> 
> 赞同：0
> 
> 时间：2012-10-04T09:30:50.337
> 
> 标签：javascript, jquery, html, raphael, vector-graphics

我有一个可以移动它的圆圈，我怎样才能使发光效果跟随那个圆圈。

```
circle = paper.circle(x, y, 5);
glowSet = circle.glow({
    'fill': true,
    'color': '#bbb'
});   

// ...
// I animate the circle later on using

circle.animate({
    cx: coordX,
    cy: coordY
}); 
```

我已经尝试过在整个场景中使用动画

```
glowSet.animate({
    x: coordX,
    y: coordY
}); 
```

我尝试在集合上使用 forEach 应用于每个项目

```
glowSet.forEach(function(item) {
    item.animate({
        x: coordX,
        y: coordY
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:32:23.917

发光集和圆圈保持独立。您应该能够通过简单地将它们组合成一个集合来实现您想要的效果，如下所示：

```
circle = paper.circle(x, y, 5);
glowSet = paper.set(circle, circle.glow({
    'fill': true,
    'color': '#bbb'
})); 
```

然后将您的动画应用到`glowSet`.

# android - 延迟暂停、早期恢复和唤醒锁。请解释

> ID：12724292
> 
> 赞同：1
> 
> 时间：2012-10-04T09:30:53.920
> 
> 标签：android, linux, linux-kernel, power-management, wakelock

什么是功能，为什么在 Android 内核中引入它？通过引入这一点，电源管理是否以任何方式变得高效？这些是我在研究 Android 内核中的 PM 模块时遇到的几个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T11:27:39.363

Android分为2层

*   应用
*   Linux内核

对硬件、CPU、内存的所有低级访问都是由 linux 内核完成的。内核反过来提供系统调用和驱动程序作为应用程序与硬件对话的机制。

现在对于任何智能手机来说，电池寿命都是最重要的，因此需要电源管理。想法是让设备在活动和待机情况下消耗尽可能少的功率。这将意味着更长的电池寿命。

唤醒锁是一种机制，应用程序可以通过该机制要求系统处于高功率状态。不同的唤醒锁使系统的不同部分保持打开状态，例如屏幕、CPU、键盘等。当 Android 必须进入低功耗状态时，它会检查是否使用了唤醒锁。如果没有，则进入深度睡眠状态。因此，应用程序持有唤醒锁的时间过长是不好的。

Android 控制应该打开哪个设备。特定设备驱动程序将根据是否需要打开/关闭。

建议您阅读[此链接](http://www.thinksrc.com/?p=173001)以获取有关此的重要信息！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T23:04:58.313

关于 Android 内核中电源管理的一个很好的[链接](http://developer.android.com/reference/android/os/PowerManager.html)：

解释如下：

1.  唤醒锁
2.  唤醒锁的类型
3.  电源管理器类
4.  向 PM 驱动程序注册驱动程序
5.  提前暂停

# c# - 从字符串复制到字符串并粘贴到新文件中

> ID：12724308
> 
> 赞同：0
> 
> 时间：2012-10-04T09:32:25.550
> 
> 标签：c#, c++, c

我的问题如下..

我有一个纹理文件，世界上任何纹理编辑器都无法打开它，该文件包含例如 100 个纹理。获取这些纹理的唯一方法是使用 Hex Editor（例如 Hex Workshop）打开文件并找到“GBIX”字符串。当您找到一个“GBIX”字符串时，您开始从那里复制直到另一个 GBIX 的开始，您创建一个新文件，将其粘贴到那里，将其保存为 PVR，然后您就有了纹理。但是，您需要这样做 100 次，因为该文件有 100 个“GBIX”字符串（100 个纹理）。好吧，现在，我有一些编程技巧，特别是在 C# 中，但我不知道如何创建一个从字符串复制到字符串然后将其保存在新文件中的程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:37:42.953

在 C 中，这将是微不足道的：

1.  将文件加载到内存中
2.  循环槽，`strstr()`用于寻找`GBIX`模式
3.  对于每个找到的模式，查找下一个（或文件结尾）
4.  对于每个找到的端，写出一个新的二进制文件之间的范围

我想在高级语言中它会更容易。:)

你的问题是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T10:29:40.510

你能用C编程吗？然后做以下事情

```
1.open the file using `fopen()` in binary mode.
2.use a loop upto the end of file and search for the string what you want (strstr() to look for the GBIX pattern)-copied from unwind 
3.Then after finding each pattern get the position of the file pointer using ftell() and store it to a array of 100 integer(as 100 of texture you have ).
4.Then go to the first byte of file by using fseek().
5.Now you can use your array to find the location and read the whole data up to the next array element (do it in a loop upto 100 times).
6.then store this data or write it to another file(open a file in append mode and write there). 
```

我觉得有点棘手，但使用这个算法并从互联网上搜索代码你肯定能做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:42:08.657

我认为这个代码示例可能会对您有所帮助。它显示了如何为您解析文件。您需要做的就是创建一个新文件..

```
using System;
using System.IO;
using Extensions;
using System.Drawing;

/* Archive Module */
namespace puyo_tools
{
    public class Images
    {
        /* Image format */
        private ImageClass Converter = null;
        public GraphicFormat Format  = GraphicFormat.NULL;
        private Stream Data          = null;
        private Bitmap imageData     = null;
        public string ImageName      = null;
        private string FileExt       = null;

        /* Image Object for unpacking */
        public Images(Stream dataStream, string dataFilename)
        {
            /* Set up our image information */
            Data = dataStream;

            ImageInformation(ref Data, out Format, out Converter, out ImageName, out FileExt);
        }

        /* Unpack image */
        public Bitmap Unpack()
        {
            return Converter.Unpack(ref Data);
        }
        public Bitmap Unpack(Stream palette)
        {
            return Converter.Unpack(ref Data, palette);
        }

        /* Pack image */
        public Stream Pack()
        {
            return Converter.Pack(ref imageData);
        }

        /* Output Directory */
        public string OutputDirectory
        {
            get
            {
                return (ImageName == null ? null : ImageName + " Converted");
            }
        }

        /* File Extension */
        public string FileExtension
        {
            get
            {
                return (FileExt == null ? String.Empty : FileExt);
            }
        }

        /* Get image information */
        private void ImageInformation(ref Stream data, out GraphicFormat format, out ImageClass converter, out string name, out string ext)
        {
            try
            {
                /* Let's check for image formats based on the 12 byte headers first */
                switch (data.ReadString(0x0, 12, false))
                {
                    case GraphicHeader.GIM: // GIM (Big Endian)
                    case GraphicHeader.MIG: // GIM (Little Endian)
                        format    = GraphicFormat.GIM;
                        converter = new GIM();
                        name      = "GIM";
                        ext       = ".gim";
                        return;
                }

                /* Ok, do special checks now */

                /* PVR file */
                if ((data.ReadString(0x0, 4) == GraphicHeader.GBIX && data.ReadString(0x10, 4) == GraphicHeader.PVRT && data.ReadByte(0x19) < 64) ||
                    (data.ReadString(0x0, 4) == GraphicHeader.PVRT && data.ReadByte(0x9) < 64))
                {
                    format    = GraphicFormat.PVR;
                    //converter = new PVR();
                    converter = null;
                    name      = "PVR";
                    ext       = ".pvr";
                    return;
                }

                /* GVR File */
                if ((data.ReadString(0x0, 4) == GraphicHeader.GBIX && data.ReadString(0x10, 4) == GraphicHeader.GVRT) ||
                    (data.ReadString(0x0, 4) == GraphicHeader.GCIX && data.ReadString(0x10, 4) == GraphicHeader.GVRT) ||
                    (data.ReadString(0x0, 4) == GraphicHeader.GVRT))
                {
                    format    = GraphicFormat.GVR;
                    converter = new GVR();
                    name      = "GVR";
                    ext       = ".gvr";
                    return;
                }

                /* SVR File */
                if ((data.ReadString(0x0, 4) == GraphicHeader.GBIX && data.ReadString(0x10, 4) == GraphicHeader.PVRT && data.ReadByte(0x19) > 64) ||
                    (data.ReadString(0x0, 4) == GraphicHeader.PVRT && data.ReadByte(0x9) > 64))
                {
                    format    = GraphicFormat.SVR;
                    converter = new SVR();
                    name      = "SVR";
                    ext       = ".svr";
                    return;
                }

                /* GMP File */
                if (data.ReadString(0x0, 8, false) == "GMP-200\x00")
                {
                    format    = GraphicFormat.GMP;
                    converter = new GMP();
                    name      = "GMP";
                    ext       = ".gmp";
                    return;
                }

                /* Unknown or unsupported compression */
                throw new GraphicFormatNotSupported();
            }
            catch (GraphicFormatNotSupported)
            {
                /* Unknown or unsupported image format */
                format     = GraphicFormat.NULL;
                converter  = null;
                name       = null;
                ext        = null;
                return;
            }
            catch
            {
                /* An error occured. */
                format     = GraphicFormat.NULL;
                converter  = null;
                name       = null;
                ext        = null;
                return;
            }
        }

        /* Image Information */
        public class Information
        {
            public string Name = null;
            public string Ext = null;
            public string Filter = null;

            public bool Unpack = false;
            public bool Pack  = false;

            public Information(string name, bool unpack, bool pack, string ext, string filter)
            {
                Name   = name;
                Ext    = ext;
                Filter = filter;

                Unpack = unpack;
                Pack   = pack;
            }
        }
    }

    /* Image Format */
    public enum GraphicFormat : byte
    {
        NULL,
        GIM,
        GMP,
        GVR,
        PVR,
        SVR,
    }

    /* Image Header */
    public static class GraphicHeader
    {
        public const string
            GBIX = "GBIX",
            GCIX = "GCIX",
            GIM  = ".GIM1.00\x00PSP",
            GMP  = "GMP-200\x00",
            GVRT = "GVRT",
            MIG  = "MIG.00.1PSP\x00",
            PVRT = "PVRT";
    }

    public abstract class ImageClass
    {
        /* Image Functions */
        public abstract Bitmap Unpack(ref Stream data);   // Unpack image
        public abstract Stream Pack(ref Bitmap data);     // Pack Image
        public abstract bool Check(ref Stream data);      // Check Image
        public abstract Images.Information Information(); // Image Information
        public virtual Bitmap Unpack(ref Stream data, Stream palette) // Unpack image (with external palette file)
        {
            return null;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T15:03:09.630

你说你用过C#。这应该让您大致了解如何在 C# 中执行此操作，尽管我自己没有测试过。

在开始之前，您的文件有多大？如果它可以完全放入内存，读取它的最简单方法是使用[`File.ReadAllBytes`](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx)，它将整个文件读入一个很大的字节数组。（如果您的文件大小为千兆字节，您将无法一次全部加载。如果是这种情况，有更高级的方法来读取文件，但我暂时不会继续讨论这些方法。）

您可以使用[`File.ReadAllBytes`](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx)读取文件，[`Array.IndexOf`](http://msdn.microsoft.com/en-us/library/01h9de4t.aspx)在其中搜索字节“G”，并使用普通数组索引来检查其他字母。当您找到它们时，您可以使用复制出数组的一部分[`Array.Copy`](http://msdn.microsoft.com/en-us/library/z50k9bft.aspx)并将其保存到使用[`File.WriteAllBytes`](http://msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx).

您的问题对文件的格式并不完全清楚。根据你的描述，我认为是这样的：

```
HEADERBYTESblahblahblahGBIXcontentcontentcontentGBIXmorecontentGBIXyetmorecontent 
```

并且您希望将其丢弃：

```
HEADERBYTESblahblahblah 
```

以及要创建的三个单独的文件：

```
GBIXcontentcontentcontent
GBIXmorecontent
GBIXyetmorecontent 
```

所以我假设在第一个“GBIX”之前可能有文本并且你想忽略它，并且从最后一个“GBIX”到文件末尾是你想要提取的正确纹理，没有任何内容在它之后。我还假设字符“GBIX”永远不会出现在其中一个纹理的中间 - 如果它们出现，那么您将需要使用能够真正理解文件格式的东西。

```
using System;
using System.IO;

public class Program
{
    public static void WriteFile(int aFileIndex, byte[] sourceBytes, int firstByteIndex, int byteCount)
    {
        string filename = String.Format("output{0}.pvr", aFileIndex);
        byte[] outputBytes = new byte[byteCount];
        Array.Copy(sourceBytes, firstByteIndex, outputBytes, 0, byteCount);
        File.WriteAllBytes(filename, outputBytes);
    }

    public static void Main()
    {
        byte[] fileBytes = File.ReadAllBytes("inputfile");
        int filesOutput = 0;
        int startIndex = -1;
        int currentIndex = 0;
        for (;;)
        {
            int nextIndex = Array.IndexOf(fileBytes, (byte)'G', currentIndex);
            if (nextIndex == -1)
            {
                // There are no more ASCII 'G's in the file.
                break;
            }
            if (nextIndex + 4 >= fileBytes.Length)
            {
                // There aren't enough characters left in the file for this
                // to be an ASCII "GBIX" string.
                break;
            }
            if (fileBytes[nextIndex+1] == (byte)'B' &&
                fileBytes[nextIndex+2] == (byte)'I' &&
                fileBytes[nextIndex+3] == (byte)'X')
            {
                // Found ASCII "GBIX" at nextIndex. Output the previous
                // complete file, if there is one.
                if (startIndex != -1)
                {
                    Write(filesOutput, fileBytes, startIndex, nextIndex - startIndex);
                }
                filesOutput += 1;
                startIndex = nextIndex;
            }
            currentIndex = nextIndex + 1;
        }
        if (startIndex != -1)
        {
            WriteFile(filesOutput, fileBytes, startIndex, fileBytes.Length - startIndex);
        }
    }
} 
```

# c# - 更改 Web 浏览器控件滚动条的颜色

> ID：12724309
> 
> 赞同：2
> 
> 时间：2012-10-04T09:32:28.277
> 
> 标签：c#, winforms

我在我的 Windows 应用程序中使用 Web 浏览器控件。我想改变滚动条的外观。为此，我找到了下面给出的代码项目的链接。这似乎更麻烦。因此，除此之外，还有其他方法可以自定义滚动条。我想设计没有上下箭头的滚动条。只是滚动条。我无法用这段代码做到这一点。或者我可以改变默认滚动条的外观和感觉，即颜色宽度等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:13:48.340

您可以使用[`IHTMLDocument2.styleSheets`](http://msdn.microsoft.com/en-us/library/aa752607%28VS.85%29.aspx)设置样式表：

```
IHTMLDocument2 _htmlDocument = webBrowser.Document.DomDocument as IHTMLDocument2;
int length = _htmlDocument.styleSheets.length;
IHTMLStyleSheet styleSheet = _htmlDocument.createStyleSheet(@"", length + 1);
styleSheet.addRule("BODY", "scrollbar-face-color: #FF0000;");
styleSheet.addRule("BODY", "scrollbar-highlight-color: #FF00FF;");
styleSheet.addRule... 
```

或者您可以`CSS`直接在`HTML`代码中设置：

***`CSS:`***

```
<STYLE type="text/css">
<!--
BODY
{
scrollbar-face-color: #FF0000;
scrollbar-highlight-color: #FF00FF;
scrollbar-3dlight-color: #00FF00;
scrollbar-darkshadow-color: #00FFFF;
scrollbar-shadow-color: #0000FF;
scrollbar-arrow-color: #FF00FF;
scrollbar-track-color: #FFFF00;
}
-->
</STYLE> 
```

并在您的***`C#`***代码集[`WebBrowser.DocumentText`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documenttext%28v=vs.100%29.aspx)属性中：

```
webBrowser.DocumentText = "<html><head><STYLE type=\"text/css\"><!--BODY{scrollbar-face-color: #FF0000;scrollbar-highlight-color: #FF00FF;scrollbar-3dlight-color: #00FF00;scrollbar-darkshadow-color: #00FFFF;scrollbar-shadow-color: #0000FF;scrollbar-arrow-color: #FF00FF;scrollbar-track-color: #FFFF00;}--></STYLE></head><body>aaaa</body></html>"; 
```

请注意：如果您运行 IE 5.5，您只能看到彩色滚动条。

# c# - 在写入所有字节之前，C# 无法关闭流

> ID：12724311
> 
> 赞同：0
> 
> 时间：2012-10-04T09:32:36.260
> 
> 标签：c#, httplistener

我写了一个模拟 c# http 服务器，但我遇到了问题。当客户端第一次关闭连接（响应的所有数据都已收到）时，我的程序会抛出一个异常：

> *InvalidOperationException：在写入所有字节之前无法关闭流。*

我应该怎么办？这是否意味着服务器套接字也已关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:42:28.033

服务器是否读取了整个请求？

通常关闭连接的一方是一个好习惯，然后读取直到获得零字节（这意味着另一方关闭了连接），然后释放套接字。

```
private void SafeShutdown( Socket s )
{
    socket.Shutdown( Send );
    var buff = new byte[200];
    while( socket.Receive( buff ) > 0 )
        ;
    socket.Shutdown( Receive );
    socket.Close();
} 
```

# c# - Topshelf 服务崩溃

> ID：12724312
> 
> 赞同：3
> 
> 时间：2012-10-04T09:32:38.807
> 
> 标签：c#, .net, windows, windows-services, topshelf

我使用 Topshelf 来托管我的 WCF 客户端（在 Windows XP 上），它连接到 WCF 服务（Windows Server 2008）并在后台执行一些工作。

当我在控制台应用程序（在 TopShelf 中）中测试服务时，我对此没有任何问题，但可能是因为我不时重新启动应用程序。

现在我已经将它部署为 Windows 服务，它运行良好，但是我前几天发现这个服务没有启动，我检查了 EventLog 并发现了这个：

“RemoteDeskService 服务第三次意外结束。” 并且没有其他信息。

我使用 Topshelf 3.0.1 版本，也使用 Log4Net 来写日志。它正确地写入了所有日志，但是对于此事件没有任何内容，似乎没有人知道服务发生了什么事。

我在 WindowsHost 的 TopShelf 代码中发现他们有 AppDomain.Current.UnhandledException 的处理程序，它应该写入日志 - 但日志中没有任何内容。

您有什么想法可以在哪里查看以及如何解决问题？

我检查了我的代码 - 它被 try/catch 块覆盖并且我记录了异常，所以我不知道是什么导致了这个“意外结束”

谢谢

# html - Html 悬停更改列表样式图像

> ID：12724313
> 
> 赞同：0
> 
> 时间：2012-10-04T09:32:39.177
> 
> 标签：html, html-lists

`list-style-image:`有可能改变html`hover`或`active`? 请举例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T09:40:52.300

您将使用 CSS 而不是 HTML 来实现这一点：

**HTML**

```
<ul>
    <li>abc</li>
    <li>def</li>
</ul>` 
```

**CSS**

```
li {
    list-style-image: url('original.png');
}

li:hover {
    list-style-image: url('replacement.png');
} 
```

# c# - 类 CheckComboBox 可以设计，但不是文件中的第一个类。

> ID：12724319
> 
> 赞同：0
> 
> 时间：2012-10-04T09:33:04.933
> 
> 标签：c#, winforms, combobox, ownerdrawn

我正在开发一个 winform 应用程序，它有一个所有者绘制的带有复选框的组合框。但是在视觉工作室中，我面临着以下错误

"**类 CheckComboBox 可以设计，但不是文件中的第一个类。Visual Studio 要求设计者使用文件中的第一个类。移动类代码，使其成为文件中的第一个类**"

以及 **如何移动类代码，使其成为文件中的第一个类？**

我检查了以前的帖子，但没有得到它。

请帮忙..提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:37:44.153

最简单的方法是为您编写的每个类创建单独的文件。它将解决问题并被认为是一种良好的做法。

如果您不能/不会，那么只需选择整个课程内容，将其剪切并粘贴到 namespace opening 下`{`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:48:24.193

您必须为所有 UI 部分创建单独的命名空间，因为位于 windows 窗体后面的设计器文件也试图找到命名空间，但是当它没有找到相同的命名空间时，它认为类是不同的。要解决此问题，请在同一命名空间中的 Designer 文件中包含代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T07:43:16.797

最后我得到了答案。我正在阅读错误，突然点击。在命名空间中， CheckComboBox 应该是第一个类（意味着它应该始终是第一个类，如果命名空间中有任何其他类，请将其放在后面）

```
 namespace **xyz**
 {
     class **xyz** 
     {
     }  
     class pqr 
     {
     }
} 
```

# sql-server-2008 - 强制代码优先始终初始化一个不存在的数据库？

> ID：12724320
> 
> 赞同：17
> 
> 时间：2012-10-04T09:33:07.860
> 
> 标签：sql-server-2008, entity-framework, ado.net, ef-code-first

有时，我会删除我的开发数据库并运行我的 EF 代码优先应用程序。我会得到错误：

> 无法打开登录请求的数据库“AssessmentSystem”。登录失败。用户“AssessmentAdmin”登录失败。

我认为这是因为`DbContext`只有“第一次使用上下文时每个 AppDomain 一次”运行 DB 初始化逻辑，如[本页](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm)所述。这意味着如果我删除它，我需要回收 IIS 应用程序池以让 EF 重新创建我的数据库。

*每次*我尝试访问数据库时，有什么方法可以让数据库初始化代码运行？因此，它将始终检查数据库是否存在，如果不存在，则创建它而不是尝试打开它，即使它使用以前访问我现在删除的数据库的同一个 AppDomain？

请注意，我希望对*每个查询都*进行此初始化检查，因此即使完成它`Application_Start`也不够；理想情况下，我希望能够加载一些数据库数据，删除数据库，然后加载一些数据库数据，它会重新创建数据库，而我什至不必重新启动应用程序（基本上我只需要重新加载网页加载一些数据库数据）。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-08T09:13:58.030

**当您需要访问数据库时执行**初始化程序，因此如果您想在应用程序启动时创建数据库，请使用以下任何内容：****

 **```
 context.Database.Initialize(true); //If set to true the initializer is run even if it has already been run.       
    context.Database.Create() 
```

[http://msdn.microsoft.com/en-us/library/system.data.entity.database.initialize(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/system.data.entity.database.initialize(v=vs.103).aspx)

**CreateDatabaseIfNotExists IDatabaseInitializer** 的一个实现，仅当数据库不存在时，它将重新创建并选择性地为数据库重新播种数据。要为数据库播种，请创建派生类并覆盖 Seed 方法。

```
Database.SetInitializer<MyContext>(new CreateDatabaseIfNotExists<MyContext>()); 
```

[http://msdn.microsoft.com/en-us/library/gg679221(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/gg679221(v=vs.103).aspx)

**DropCreateDatabaseIfModelChanges IDatabaseInitializer** 的实现，仅当模型在创建数据库后发生更改时，它才会删除、重新创建和可选地重新为数据库提供数据。这是通过在创建时将存储模型的散列写入数据库，然后将该散列与从当前模型生成的散列进行比较来实现的。要为数据库播种，请创建派生类并覆盖 Seed 方法。

> 初始化策略可以选择检查数据库是否存在，创建一个新数据库，并为数据库提供数据。默认策略是 CreateDatabaseIfNotExists 的一个实例。

Database.SetInitializer(new DropCreateDatabaseIfModelChanges());

> 请注意，这假设您有权删除您的数据库。

[http://msdn.microsoft.com/en-us/library/gg679604(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/gg679604(v=vs.103).aspx)

**DropCreateDatabaseAlways**

IDatabaseInitializer 的一个实现，在应用程序域中第一次使用上下文时，它将始终重新创建并可选地用数据重新播种数据库。要为数据库播种，请创建派生类并覆盖 Seed 方法。

```
Database.SetInitializer<MyContext>(new DropCreateDatabaseAlways<MyContext>()); 
```

[http://msdn.microsoft.com/en-us/library/gg679506(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/gg679506(v=vs.103).aspx)

如果您想跟踪，我建议您查看**迁移，将您对数据库所做的更改恢复到以前的状态**[http://msdn.microsoft.com/hr-hr/data/jj591621](http://msdn.microsoft.com/hr-hr/data/jj591621)。

**更新**

```
context.Database.Initialize(true); 
```

> 如果参数 force 设置为 true，则无论之前是否运行过初始化程序，都会运行该初始化程序。如果在应用程序运行时删除了数据库并且需要重新初始化，这将很有用。

对于 MVC 应用程序，在**Global.asax**`Application_Start()`中的方法中添加一个部分

 **```
protected void Application_Start() {

     Database.SetInitializer<MyContext>(new DropCreateDatabaseAlways<MyContext>()); 

     // Forces initialization of database on model changes.
     using (var context= new MyContext()) {
          context.Database.Initialize(force: true);
     }    
} 
```

您也可以使用自定义初始化程序：

```
public class MyDbInit : DropCreateDatabaseAlways<MyContext>
{

} 
```

然后使用

```
Database.SetInitializer(new MyDbInit()); 
```

**更新 2**

**创建一个名为DeleteDBOnEveryRequest**的新空 MVC4 应用程序。将以下内容放入 Global.asax Application_start

```
protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            WebApiConfig.Register(GlobalConfiguration.Configuration);
            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);

            Database.SetInitializer<BlogContext>(new DropCreateDatabaseAlways<BlogContext>());    

            using (var context = new BlogContext())
            {
                context.Database.Initialize(force: true);
            }    
        } 
```

使用两个操作创建一个名为**DatabaseController的新控制器。**

在**访问**操作中，您删除数据库并重定向到**重新创建**操作，您可以从该操作创建数据库，因为它之前已被删除。

```
namespace DeleteDBOnEveryRequest.Controllers
{
    public class DatabaseController : Controller
    {
        public ActionResult Access()
        {
            using (var context = new BlogContext())
            {
                context.Database.Delete();
            } 
            return RedirectToAction("Recreated");
        }

        public ActionResult Recreated()
        {
            using (var context = new BlogContext())
            {
                context.Database.Initialize(force: true);                
            }
            return View();
        }
    }
} 
```

这是你想要的吗？****

# android - Android：USB 通信 Android <-> 外接设备

> ID：12724330
> 
> 赞同：5
> 
> 时间：2012-10-04T09:33:43.320
> 
> 标签：android, usb, serial-port

我发现了几个关于这个主题的线程，但是在阅读它们之后，我对我的问题没有一个清晰的想法。

我们有一个外部设备（类似于 tomtom 设备，我的意思是，不是附件），我们想将此设备连接到 android 设备。我们希望使用 USB 连接在外部设备和 android 设备之间进行串行通信。（此时外接设备与其他非安卓设备使用RS232接口进行通信，但外接设备可以使用usb线处理通信）

正如我所读到的，我们从 3.1 开始就支持 USB API。

我们可以开发一个使用 USB 电缆与我们的外部设备通信的 android 应用程序吗？我的意思是，向设备发送数据和从设备接收数据，这两种方式，我们都希望将 Android 设备用作“显示器”。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T08:53:54.663

我基本上和你描述的一样。我仍处于早期阶段，但我在一些限制下管理了这样的沟通：

1.  您需要支持 USB Host API 的设备。API 本身自 Android 3.2 左右就已经存在，但似乎并非所有设备都支持它。看起来大多数运行 >4.0 的设备应该可以工作，但仍然是您应该进行的每台设备检查。我目前正在使用 Acer Iconia Tab A510，到目前为止它似乎可以工作，但有一些故障：例如，您无法在使用 USB 端口时为设备充电，因为它与充电器共享但与 USB 不兼容。
2.  正如 Neil 所说，USB API 是低级的，所以我认为您需要一个用于 USB 芯片组的驱动程序（您身边的那个，即在您的设备中）。我在这里非常幸运，因为有一个开源项目正在开发 FTDI 芯片组，而这恰好是我选择的。如果这也是你的情况，你应该检查项目：
    *   FTDriver：[https ://github.com/ksksue/FTDriver](https://github.com/ksksue/FTDriver)
    *   Android USB Serial Monitor Lite：[https](https://github.com/ksksue/Android-USB-Serial-Monitor-Lite) ://github.com/ksksue/Android-USB-Serial-Monitor-Lite这个甚至在 Google Play 中有一个应用程序，所以你可以安装它并开始“播放”;-)

我希望这有帮助。正如我所说，我开始在这个生态系统中工作，但我仍然需要在许多“地方”中找到自己的方式。

干杯，阿西尔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:18:49.353

目前 adb 接口是一种方式。流量由主机 PC 使用 adb 控制。查看您的要求，您可能需要打开源代码，重新调整 USB 驱动程序以允许双向通信。之后，您需要设计自己的 API，允许应用程序通过 USB 发送消息。这将需要大量工作，因为当前的 Android 模型不支持它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T00:08:24.847

如果您要连接设备的 android 设备支持主机模式，那么 usb api 可以提供帮助。然而，它是一个在 USB 请求缓冲区 (URB) 中交谈的低级 api，我目前正在使用这个 api 编写一个串行抽象，但它目前还没有准备好播出。

如果您的非 android 设备能够充当主机，那么正如 Royston 建议的那样，adb 路由可能最适合您，并且在 api 版本 12 后的 api 包中提供了如何执行此操作的示例。

# sql - 如何在 SQL Server 中使用 GETDATE() 函数来选择列值？

> ID：12724337
> 
> 赞同：0
> 
> 时间：2012-10-04T09:33:54.620
> 
> 标签：sql, sql-server, tsql

如何使用`GETDATE()`SQL Server 中的函数来计算执行查询前一年的日期？我想在查询中使用这个值。

例如：

```
 Select LTRating, RHDate 
 from Accounts and If LTRating ='D' then RHDate = CURRENTDATE()-365 
```

我希望检索值为“D”且日期正好是一年前的所有`LTRating`列值。`LTRating`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:34:53.500

您可以使用[DATEADD](http://msdn.microsoft.com/de-de/library/ms186819.aspx)并访问恰好在一年前的日期：

```
dateadd(yy, -1, getdate()) 
```

例如

```
select 
LTRating
, case when LTRating = 'D' then dateadd(yy, -1, getdate()) else RHDate end
from Accounts 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:19:39.127

```
Select LTRating, RHDate 
from Accounts 
where LTRating <> 'D' 
OR (LTRating ='D' and RHDate = DATEADD(year, -1, GETDATE())) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:44:49.117

```
select  LTRating, RHDate 
from Accounts 
where datediff (yy, RHDate, getdate()) = 1 
```

通过使用`datediff`函数可以获得月份和年份的差异

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T09:45:28.240

```
select * from yourtable where RHDate = DATEADD(yy,-1,getdate()) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T09:41:24.753

或者使用 datediff 函数：

```
Select ...
from table
where datediff(Day, RHDate, getdate()) = 365 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T09:54:41.853

```
select [LTRating], [RHDate] from [Accounts] 
where [LTRating] = 'D' AND [RHDate] >= DATEADD(year, -1, GETDATE()) 
```

将 -1 添加到当前日期的年份基本上只是反转函数 dateadd 因为没有 dateminus :)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-04T10:00:30.247

以下语句返回

*   所有`LTRating`不是“D”的；和
*   选择以下选项之一：
    *   `LTRating`值为“D”且`RHDate`正好**是**一年；或者
    *   `LTRating`为“D”且`RHDate`超过**一年**的值；或者
    *   `LTRating`值为“D”且`RHDate`年轻**一年**。

```
SELECT LTRating, RHDate 
FROM Accounts
WHERE ( LTRating != 'D'

  -- use this for exact comparison (including seconds!)
  OR RHDate = DATEADD(YEAR, -1, GETDATE())

  -- use this for RHDate older than one year
  OR RHDate < DATEADD(YEAR, -1, GETDATE())

  -- use this for RHDate younger than one year
  OR RHDate > DATEADD(YEAR, -1, GETDATE())

); 
```

请记住，DATETIME 和 SMALLDATETIME 类型包括时间分量（至少到秒），因此，在大多数情况下，日期时间列比较是使用`>`or`<`运算符完成的。

# c# - 将 SQL int 转换为 C# 字符串

> ID：12724342
> 
> 赞同：1
> 
> 时间：2012-10-04T09:34:20.363
> 
> 标签：c#, sql, sql-server

我一直在尝试将一个 INT 从我的 SQL-Server DB 加载到我的 C# 应用程序中并将其转换为字符串。

基本上，它是我想用作字符串的数据库表的 ID/主键。这就是我所做的：

```
string Variable_ID;
Variable_ID = HandleDBNull(reader, "ID"); 
```

我得到一个 IndexOutOfRange 异常。

这是 HandleDBNull 函数：

```
 private string HandleDBNull(SqlDataReader r, string columnName)
    {
        if (!r.IsDBNull(r.GetOrdinal(columnName)))
            return r[columnName].ToString();
        else 
            return String.Empty;
    } 
```

它适用于字符串列，因此转换似乎有问题。我已经尝试过 Convert.ToString 并得到了同样的错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T09:38:08.113

我猜你`columnName`和`columnOrder`彼此格格不入。一个是错误的。因为它们表达了相同的信息，所以一个是多余的。我会改用：

```
// probably should be renamed, btw
private string isDBNull(SqlDataReader r, int columnOrder)
{
    if (!r.IsDBNull(columnOrder))
    {
        return r[columnOrder].ToString();
    }
    else return "";
} 
```

显然有：

```
Variable_ID = isDBNull(reader, 0); 
```

虽然我*不太*确定我是否希望所有内容都作为字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T09:36:35.090

您可以尝试 - 因为您的条件基于 columnOrder

```
 ... 
 return r[columnOrder].ToString(); 
```

建议

```
private bool isDBNull(SqlDataReader r, string columnName, int columnOrder)
    {
        if (!r.IsDBNull(columnOrder))
        {
            return true;
        }
        return false;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T09:38:30.687

简化代码：

```
string Variable_ID;
Variable_ID = isDBNull(reader, "ID");

private string isDBNull(SqlDataReader r, string columnName)
{
    if (!r.IsDBNull(r.GetOrdinal(columnName)))
        return r[columnName].ToString();
    else 
        return string.Empty;
} 
```

# c++ - 从坐标向量中提取坐标并保存到文件

> ID：12724345
> 
> 赞同：1
> 
> 时间：2012-10-04T09:34:30.597
> 
> 标签：c++, opencv, vector, coordinates, extract

我有一个包含列表坐标的向量 ...x1,y1 ；x2,y2....xn,yn

我正在尝试提取作为坐标的每个单独元素，然后将它们保存到文件中，作为一个可以轻松阅读的漂亮描绘的坐标对。或者我保存它们会有什么好处，这样我就可以在 excel 等中绘制一些东西（作为 x 和 y 值的列）。

我的原始向量大小为 31，最初构造为

```
vector<vector<Point> > myvector( previous vector.size() ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T09:40:16.263

在 for 循环中使用`std::vector<std::vector<Point>>::const_iterator`以遍历坐标列表的所有元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T10:56:43.953

在 C++ 中写入 Excel 文件很容易。您可以按如下方式进行。

```
 #include<iostream>
      #include<fstream>
      #include<vector>

      using namespace std;

      vector<Point> myVec;

      void main()
      {
         ofstream fout("C:/output.xls");

         for(unsigned int i=0; i<myVec.Size(); i++)
         {
             int x = myVec[i].x;
             int y = myVec[i].y;

             fout<<x;      //Write value of x in first column

             fout<<"\t";   //Jump to next column

             fout<<y;      //Write value of y in next column

             fout<<endl;   //Jump to first column of next row
         }

         fout.close();
       } 
```

使用 Microsoft Excel 打开输出文件时，可能会显示警告。你可以忽略它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:53:55.690

您可以使用`at`or`[]`运算符并迭代向量的元素。然后按照您的要求将每一个保存到文件或 Excel 表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T10:02:34.053

“提取”向量中的元素（一种可能的方式！）：

```
std::vector<anObj> myVec;
//...fill the vector...
//get the elements:
for(int i = 0; i < myVec.length(); i++)
{
     int x = myVec.at(i).x;
     int y = myVec.at(i).y;
     //do something else
} 
```

在 C++ 中使用 Excel 有点复杂。请参阅托管和非托管方式的一些[示例](http://msdn.microsoft.com/en-us/library/ms384314%28v=vs.71%29.aspx)。

# database - Access中的规则表/方法，有人听说过吗？

> ID：12724346
> 
> 赞同：0
> 
> 时间：2012-10-04T09:34:34.647
> 
> 标签：database, ms-access, database-design, rules

我们有 5000 种产品都有不同的价格，而 200 位客户可能对每种产品都有不同的价格。我们需要某种方式允许销售团队更改个别客户或产品或范围/类别的价格，而不会影响其他客户的其余价格。

现在，这是通过复制和粘贴价目表、进行手动更改并将新的价目表作为类别导入来完成的。这不是我们想要的。

有人告诉我一种实现相同目标的方法，只需将一组价格存储在 access 中，然后使用一个规则表，该表根据以下信息应用规则：

*   顾客
*   产品
*   类别
*   价格
*   百分比

这将允许我们为每次价格变化存储一行信息，而不是仅仅为了进行一次修改而存储整个价格列表。

基本上我在问是否有人听说过这种方法，我们在哪里可以找到关于这种方法的更多信息以及它是如何工作的/如何应用它？

在此先感谢，鲍勃 P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:35:47.293

您需要一张基本上是每个客户的特价表的表格。该表将由客户编号、零件编号和价格组成。只有与一般价格表不同的价格才应出现在此表中。

在查找给定客户的零件价格应该是多少时，首先程序将检查此表以查看是否有给定零件和客户的条目。如果没有找到记录，则使用通用价目表。

# php - 复制 PHP 函数 isset

> ID：12724353
> 
> 赞同：4
> 
> 时间：2012-10-04T09:35:05.617
> 
> 标签：php, isset

我已经使用自定义`__isset()`函数很长时间了，它基本上只是为了让代码看起来更好并节省输入时间：

```
function __isset(&$aVariable, $aDefault = null) {
    return isset($aVariable) ? $aVariable : $aDefault;
} 
```

但是今天我发现这个函数实际上是在创建不存在的变量！当您检查数组属性时，这是一个大问题：

```
$lArray = ('A', 'B', 'C');
$lValue = __isset($lArray[4], 'D');
print_r($lArray); // Outputs 0=>'A', 1=>'B', 2=>'C', 3=>NULL 
```

所以我想要的是`isset()`从 PHP 复制当前函数并将其更改为我想要的。`isset()`问题是我在 PHP 源代码中找不到实际的函数......

许多框架都在使用`isset()`我在第一个示例中展示的功能，我无法想象我是第一个遇到这个问题的人。

所以我的问题是：

1.  我在哪里可以找到实际的`isset()`PHP 函数？
2.  我在哪里可以找到实际的`isset()`C 函数（真正的实现）？
3.  如何更改代码以使其返回值或指定的默认值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T09:44:33.383

为什么这一切？删除`&`，就是这样：

```
function __isset($aVariable, $aDefault = null) {
    return isset($aVariable) ? $aVariable : $aDefault;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:03:01.243

删除`&`标志`alone`会产生`Notice: Undefined offset: 4 in`我认为你应该做的是删除`&`并抑制任何`E_NOTICE error`与`@`;

```
$lArray = array('A', 'B', 'C');
$lValue = __isset(@$lArray[4], 'D'); // or @__isset($lArray[4], 'D');

var_dump($lValue);
var_dump($lArray);

function __isset($aVariable, $aDefault = null) {
    return isset($aVariable) ? $aVariable : $aDefault ;
} 
```

输出（没有 E_NOTICE 错误）

```
string 'D' (length=1)
array
  0 => string 'A' (length=1)
  1 => string 'B' (length=1)
  2 => string 'C' (length=1) 
```

另一种解决方案是使用另一个`isset`来管理数组和对象

```
$lArray = array('A','B','C');
$lValue = __issetComplex($lArray, 4, 'D');

var_dump($lValue);
var_dump($lArray);

function __issetComplex($mixed, $key, $aDefault = null) {
    if (is_array($mixed))
        return array_key_exists($key, $mixed) ? $mixed[$key] : $aDefault;
    if (is_object($mixed))
        return isset($mixed->key) ? $mixed->key : $aDefault;
    return $aDefault;
} 
```

最后，您可以自己覆盖 PHP isset 函数，请参阅[override_function](http://php.net/manual/en/function.override-function.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:42:46.220

[使用array_key_exist](http://www.php.net/manual/en/function.array-key-exists.php)在实际比较之前检查数组键是否存在

```
$lArray = array('A','B','C');
$LValue = array_key_exists(2, $lArray)?$lArray[2]:'D';
echo $LValue; 
```

确保您必须将 __isset 修改为特殊的句柄数组

# asp.net - 在 VS2012 中使用动态数据实体网站时出错

> ID：12724354
> 
> 赞同：4
> 
> 时间：2012-10-04T09:35:05.923
> 
> 标签：asp.net, entity-framework, asp.net-dynamic-data

我决定在 VS2012 中使用动态数据实体网站。

所以，我创建了这个网站，然后添加了`App_Code`目录并添加了一个新`edmx`的并将其命名为`myDB.edmx`. 之后，我取消了`Global.asax`注册实体上下文的代码行的注释：

```
DefaultModel.RegisterContext(typeof(myDBEntities), new ContextConfiguration() { ScaffoldAllTables = true }); 
```

但是当我运行该网站时，会发生此错误：

```
The context type 'myDBEntities' is not supported. 
```

我该如何解决？

`Dynamic Data L2S Web Site`ps：您现在使用 L2S和使用 Entity Framework之间存在一些差异`Dynamic Data Entities Web Site`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T14:38:48.923

我仍在寻找原因，但目前唯一的选择是在 VS2010 中创建项目，然后将项目迁移到 VS2012 中，然后运行应用程序没有任何问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-19T06:45:16.650

发生此问题是因为在 Visual Studio 2012 中，您会获得`DbContext`（而不是`ObjectContext`在 Visual Studio 2010 中）默认为使用 EF 设计器创建的所有新模型生成的代码。为了解决一个问题，您需要恢复`ObjectContext`代码生成。

有关详细信息，请参阅[在 EF 设计器中恢复到 ObjectContext](http://msdn.microsoft.com/en-us/data/jj556581.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-24T21:46:39.447

在 Global.asax 文件中，取消注释其他 RegisterContext 行。

```
 DefaultModel.RegisterContext( _
           New System.Func(Of Object)(Function() DirectCast(New [Your edmx](), IObjectContextAdapter).ObjectContext), _
           New ContextConfiguration() With {.ScaffoldAllTables = True} _
         ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-12T19:38:13.567

1.  从模型中删除 TT 文件

2.  将“代码生成策略”更改为“默认”

# android - Android 上的持久 UDP 会话

> ID：12724357
> 
> 赞同：0
> 
> 时间：2012-10-04T09:35:19.423
> 
> 标签：android, udp

我有一个客户端-服务器应用程序，它需要我通过 UDP 维护一个持久会话。

目标是维护从服务器到移动 Android 设备的路径，无论它有什么路由到互联网（WiFi 或移动网络）。

我需要电话能够始终与服务器保持五分钟的保持活动*状态*。理想情况下，我希望在不维护设备上的任何唤醒锁的情况下执行此操作。例如，我不希望每次向服务器发送 UDP 时屏幕都亮起，也不希望对电池使用造成破坏性影响。

有没有人解决这个问题？

# routes - 带有 id 和子操作的 MVC 路由

> ID：12724358
> 
> 赞同：0
> 
> 时间：2012-10-04T09:35:27.437
> 
> 标签：routes, asp.net-web-api

我不知道我需要用 MVC 路由做什么才能完成这项工作

这是我的一条路线：

```
routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "{controller}/{id}/{action}",
    defaults: new { id = RouteParameter.Optional, action = RouteParameter.Optional }
); 
```

请求**/Shipments/**效果很好。

请求**/Shipments/3/Packages**效果很好。

然而，请求**/Shipments/3**失败并出现错误：

> 找到与请求匹配的多个操作：System.Linq.IQueryable`1[Api.Controllers.RequisitionsController+PackageRequisitionWithTracking] GetPackageRequisitions(Int32) on type Api.Controllers.RequisitionsController Api.Models.ShipmentRequisition GetShipmentRequisitions(Int32) on type Api.Controllers .RequestsController

它似乎无法区分：

```
// No ActionName    
public ShipmentRequisition GetShipmentRequisitions(int id) 
```

和

```
[ActionName("Packages")]
public IQueryable<PackageRequisitionWithTracking> GetPackageRequisitions(int id) 
```

我会认为 get shipping by id 上缺少操作名称将允许该路线工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:56:42.557

这里已经回答过几次了——你不能混合使用 REST 风格的路由（你用 GET 请求控制器，它返回默认的 Get 动作）和 RPC 路由（你在路由中提供明确的动作名称） ) 在*单个控制器*中。

Web API 将不知道将哪个操作用作默认的“GET”操作。

Web API 团队在 ASP.NET Web Stack 的 Codeplex 上存在一个问题 - [http://aspnetwebstack.codeplex.com/workitem/184](http://aspnetwebstack.codeplex.com/workitem/184)。

你现在最好的选择是将你的控制器分成使用 REST 路由（基于 HTTP 动词的路由）和 RPC 路由（基于 URL 中的动作名称的路由）的控制器。

# bash - 为什么 shell 脚本给了我太多参数错误？

> ID：12724361
> 
> 赞同：0
> 
> 时间：2012-10-04T09:35:35.370
> 
> 标签：bash, shell

```
#! /bin/bash

if [ !\(-f new.bash -o -d new.bash\) ]
then
    echo "Neither"
else
    echo "yes"
fi 
```

它可以工作，但会出现错误：

```
/file_exist_or_not.bash      
./file_exist_or_not.bash: line 3: [: too many arguments
yes 
```

顺便说一句，为什么需要转义内括号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T09:39:58.737

Bash 使用空格来分隔标记，然后将它们作为参数传递给命令（在这种情况下，命令是`test`）。有关更多详细信息，请参见手册页`test`。

要解决，您需要在操作数之间添加空格。

```
if [ ! \( -f new.bash -o -d new.bash \) ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T14:21:08.123

如果您正在使用`bash`并且不介意放弃 POSIX 兼容性，则以下内容会更简单一些：

```
if [[ ! ( -f new.bash || -d new.bash ) ]]; then 
```

您可以使用`||`而不是`-o`，括号不需要转义。

# jquery - 在jquery中按索引删除数组值

> ID：12724363
> 
> 赞同：50
> 
> 时间：2012-10-04T09:35:43.473
> 
> 标签：jquery

大批：

```
var arr = {'abc','def','ghi'}; 
```

我想通过使用索引来删除上面的数组值'def'。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-10-04T09:42:57.713

使用[拼接方法](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice)。

```
ArrayName.splice(indexValueOfArray,1); 
```

`1`这会从数组中删除从 开始的项目`indexValueOfArray`。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-04T09:36:52.170

您的示例代码错误，将引发 SyntaxError。您似乎将创建对象的语法[`Object`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object)与创建[`Array`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array).

正确的语法是：`var arr = [ "abc", "def", "ghi" ];`

要根据其值从数组中删除一个项目，请使用[splice](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)方法：

```
arr.splice(arr.indexOf("def"), 1); 
```

要按索引删除，直接引用即可：

```
arr.splice(1, 1); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-04T09:45:00.887

您的语法不正确，您应该指定一个哈希：

```
hash = {abc: true, def: true, ghi: true}; 
```

或者一个数组：

```
arr = ['abc','def','ghi']; 
```

您可以通过简单地将其设置为 null 来有效地从哈希中删除一个项目：

```
hash['def'] = null;
hash.def = null; 
```

或完全删除它：

```
delete hash.def; 
```

要从数组中删除一个项目，您必须遍历每个项目并找到您想要的项目（可能有重复项）。您可以使用数组搜索和拼接方法：

```
arr.splice(arr.indexOf("def"), 1); 
```

这会找到“def”的第一个索引，然后使用拼接将其从数组中删除。但是我会推荐 .filter() 因为它给了你更多的控制权：

```
arr.filter(function(item) { return item !== 'def'; }); 
```

这将创建一个新数组，其中仅包含不是“def”的元素。

需要注意的是 arr.filter() 将返回一个新数组，而 arr.splice 将修改原始数组并返回删除的元素。这些都可能很有用，具体取决于您要对这些项目做什么。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-04T09:39:23.340

```
delete arr[1] 
```

试试这个，如果你有一个像 var 这样的数组，它应该可以工作`arr =["","",""]`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-04T10:00:09.093

1.  查找数组中的元素并获取其位置
2.  使用位置删除

```
var array = new Array();

array.push('123');
array.push('456');
array.push('789');

var _searchedIndex = $.inArray('456',array);
alert(_searchedIndex );
if(_searchedIndex >= 0){
  array.splice(_searchedIndex,1);
  alert(array );
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
```

*   inArray() - 帮助你找到位置。
*   splice() - 帮助您删除该位置的元素。

# linker - 自动制作和自定义 rpath

> ID：12724365
> 
> 赞同：3
> 
> 时间：2012-10-04T09:35:45.737
> 
> 标签：linker, autotools, automake, libtool, rpath

我必须提供一个带有应用程序的第三方库。因为我不想`LD_LIBRARY_PATH`手动设置或需要任何包装脚本，所以我希望 automake 设置自定义`rpath`. 不幸的是`libtool`，它有自己的`-rpath`选择，并且只添加`-Wl,-rpath,/foo/bar`到`LDFLAGS`结果

```
g++: unrecognized option '-rpath' 
```

因为`libtool`似乎对命令行选项感到困惑。替代形式也是如此`-Wl,-rpath -Wl,/foo/bar`。

有没有办法在没有 libtool 干扰的情况下指定自定义 rpath？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T09:25:24.447

正如你所说，`libtool`有自己的`-rpath`选择。有什么理由不想使用它？

```
% libtool link g++ foo.cc -o foo -rpath /somewhere
libtool: link: g++ foo.cc -o foo  -Wl,-rpath -Wl,/somewhere
% readelf -d foo | grep RPATH
0x000000000000000f (RPATH)              Library rpath: [/somewhere] 
```

Automake 或 Libtool 手册中的示例均未`-Wl`用于指定`-rpath`.

# android - 从片段填充列表视图

> ID：12724372
> 
> 赞同：0
> 
> 时间：2012-10-04T09:36:13.037
> 
> 标签：android, listview

我有一个包含列表视图的布局文件，我想在片段的帮助下填充它。但它继续给我错误。布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true" >
</ListView>

<TableLayout
    android:id="@+id/details"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:stretchColumns="1" >

    <Button
        android:id="@+id/create_patient_button"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/create_patient_button" />
</TableLayout>

</RelativeLayout> 
```

我的片段活动：

```
public class BasicFragmentActivity extends FragmentActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.create_patient_view);

    FragmentManager fm       = getSupportFragmentManager();
    Fragment        fragment = fm.findFragmentById(R.id.list);

    if (fragment == null) {

        FragmentTransaction ft = fm.beginTransaction();
        ft.add(R.id.list, new BasicFragment());
        ft.commit(); // Make sure you call commit or your Fragment will not be added. 
                     // This is very common mistake when working with Fragments!
    }
}

} 
```

我的列表片段：

```
public class BasicFragment extends ListFragment {

private PatientAdapter pAdapter;

@Override
public void onActivityCreated(Bundle savedState) {
    super.onActivityCreated(savedState);

    pAdapter = new PatientAdapter(getActivity(), GFRApplication.dPatients);
    setListAdapter(pAdapter);
}
} 
```

错误：java.lang.UnsupportedOperationException：AdapterView 不支持 addView(View)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:54:53.477

`findFragmentById(...)`函数将片段（！）的 ID 作为参数。但你称它为ListView ( )`R.id.list`的。这是错误的，因为它不是片段。这是第一个问题。`ID``<ListView android:id="@+id/list" ...``ListView`

第二个问题是：

```
 FragmentTransaction ft = fm.beginTransaction();
       ft.add(R.id.list, new BasicFragment()); 
```

函数中的`ft.add()`第一个参数是要放置片段的容器的 ID。但是你使用`R.id.list`which 是你的`ListView`. 这是错误的，因为 ListView 不是可以直接放入片段的容器。

如果要将片段放入`ListView`项目中，您可以：

1.  填充`ListView`自定义视图。
2.  声明`<fragment ...>`为自定义视图布局 (XML)。或者在自定义视图布局中创建片段容器（例如 FrameLayout）并在运行时将片段放在那里（在 getView() 方法中）。

# android - android评级栏xml和numStars

> ID：12724376
> 
> 赞同：3
> 
> 时间：2012-10-04T09:36:27.780
> 
> 标签：android, ratingbar

我是使用 XML 进行设计的初学者：D 这是我的评分栏和朋友的 XML：

```
 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:weightSum="2" >

    <TextView
        android:id="@+id/txtTitle"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginBottom="5dp"
        android:layout_marginTop="5dp"
        android:layout_weight="1"
        android:gravity="center_vertical"
        android:textColor="#336699"
        android:textSize="18dp"
        android:textStyle="bold" />

    <RatingBar
        android:id="@+id/rtbHighScore"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:layout_marginBottom="5dp"
        android:layout_marginTop="5dp"
        android:numStars="5"
        android:max="100"
        android:rating="0.0"
        android:stepSize="0.0"
        style="?android:attr/ratingBarStyleSmall"         
        android:layout_weight="1" />

    <ImageView
        android:id="@+id/imgRow"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="right"
        android:layout_marginBottom="5dp"
        android:layout_marginRight="15dp"
        android:layout_marginTop="5dp"
        android:gravity="center_vertical"
        android:src="@drawable/rightarrow" />
</LinearLayout> 
```

是`android:numStars`5，但这是我得到的：

![在此处输入图像描述](../Images/107cc2059d1886db04f3a467ad90b774.png)

我读到`layout_width`必须是`wrap_content`这样，所以评分栏星星会跟随我`android:numStars`，这就是我将其更改为时得到的结果`wrap_content`：

![在此处输入图像描述](../Images/7e39f5c8fd8cf2e860d0a83049d60e3a.png)

**我想在我的 textview 右侧（或我的右箭头图像的左侧）创建 5 星评分栏** 谢谢：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T09:47:16.300

使用此布局文件获得适当的 5 星。

```
<TextView
    android:id="@+id/txtTitle"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginBottom="5dp"
    android:layout_marginTop="5dp"
    android:layout_weight="1"
    android:gravity="center_vertical"
    android:textColor="#336699"
    android:textSize="18dp"
    android:textStyle="bold" />

<RatingBar
    android:id="@+id/rtbHighScore"
    style="?android:attr/ratingBarStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp"
    android:layout_marginRight="45dp"
    android:max="5"
    android:numStars="5"
    android:rating="0.0"
    android:stepSize="0.0" />

<ImageView
    android:id="@+id/imgRow"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_gravity="right"
    android:layout_marginBottom="5dp"
    android:layout_marginRight="15dp"
    android:layout_marginTop="5dp"
    android:gravity="center_vertical"
    /> 
```

我认为 android:gravity="center_vertical" 是问题所在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T03:44:43.467

好的，我有一个使用相对布局的想法，我还使用了一点拖放：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:weightSum="2" >

    <TextView
        android:id="@+id/txtTitle"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginBottom="5dp"
        android:layout_marginTop="5dp"
        android:layout_marginLeft="5dp"
        android:gravity="center_vertical"
        android:textColor="#336699"
        android:textSize="18dp"
        android:textStyle="bold" 
        android:layout_weight="1"
        />

    <RelativeLayout 
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        >

        <RatingBar
            android:id="@+id/rtbHighScore"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="15dp"
            android:layout_marginTop="15dp"
            android:layout_marginRight="45dp"
            android:numStars="5"
            android:max="100"
            android:rating="0.0"
            android:stepSize="0.0"
            style="?android:attr/ratingBarStyleSmall"
            />

        <ImageView
            android:id="@+id/imgRow"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="96dp"
            android:src="@drawable/rightarrow" />

    </RelativeLayout>
</LinearLayout> 
```

这段代码使我的布局“完美”

# jquery-ui - Backbone.js 和 jQuery UI 手风琴

> ID：12724378
> 
> 赞同：0
> 
> 时间：2012-10-04T09:36:29.030
> 
> 标签：jquery-ui, backbone.js

我正在尝试使用 Backbone.js 视图呈现的标记创建一个 jQuery UI 手风琴小部件。我的视图代码如下：

```
var AccessPointAccordion = Backbone.View.extend({
  el: $("#access_point_accordion"),
  initialize: function() {
    this.collection = new AccessPoint(bootstrappedModels);
    this.render();  // renders the markup correctly
    this.$el.accordion();
  }
  .
  .
  .
}); 
```

虽然标记被正确呈现，但它并没有被呈现为手风琴小部件，而是被保留为无样式的标记。我是 Backbone.js 新手，有人可以指出我是否犯了一个简单的错误以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:44:28.110

你可以在你的渲染函数中试试这个：

```
render: function(){

    //template and other code

    setTimeout("this.$el.accordion();",0);

    return this;
} 
```

# iphone - iPhone App 在 beta/adhoc 测试中崩溃。但在调试模式下工作正常

> ID：12724379
> 
> 赞同：1
> 
> 时间：2012-10-04T09:36:33.360
> 
> 标签：iphone, ios, xcode4, in-app-purchase

我已经在我的 iPhone 应用程序中实现了应用程序内购买，并且它在调试模式下运行良好。但是，一旦我通过 Testflight/iTunes 进行临时测试，它就会在购买过程中崩溃。

我正在使用测试用户凭据进行购买。我已在此处发布了我的崩溃日志。提前致谢。

[http://pastebin.com/C6WZVTtK](http://pastebin.com/C6WZVTtK)

# android - 省略号不起作用

> ID：12724382
> 
> 赞同：1
> 
> 时间：2012-10-04T09:36:40.213
> 
> 标签：android

我有一个编辑文本，当文本长于编辑文本时，我想在末尾显示 3 个点。

我发现有一个方法 setEllipsize 所以我用过，但它不起作用..
这是我的代码：

```
 edt.setInputType(InputType.TYPE_CLASS_TEXT);
    edt.setFocusable(false);
    edt.setCursorVisible(false);
    edt.setMaxLines(1);
    edt.setHorizontallyScrolling(true);
    edt.setSingleLine(true);
    edt.setEllipsize(TruncateAt.END); 
```

如您所见，我尝试添加多个参数，但它们都不起作用。

我可以尝试更多选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:50:49.733

或者在 XML 文件中为 editText 设置这些

```
android:inputType="text"
android:maxLines="1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:48:13.937

//尝试设置Ems

```
edt.setMaxEms(5); 
```

或者

```
android:maxEms="5" 
```

**注意：**您可以根据要显示的字符数调整 em 大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T10:06:29.333

SetEllipsize 将在 TextView 中工作 试试看

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-09T17:04:12.357

这里的问题是您使用 setEllipsize 和 InputType = InputType.TYPE_CLASS_TEXT

出于某种原因，这两个不能一起工作:(

# mysql - 字段“类”没有默认值

> ID：12724385
> 
> 赞同：2
> 
> 时间：2012-10-04T09:36:46.463
> 
> 标签：mysql, grails

在我们的应用程序中，我有一个描述人的类（眼睛和头发的颜色、身高等）。一旦完成注册的形式，我点击提交按钮，就会抛出异常：

```
Class: java.sql.SQLException
Message: Field 'class' doesn't have a default value 
```

我对此摸不着头脑，因为出于显而易见的原因（这是一个保留字），没有一个类有一个名为 class 的字段，而且在数据库中也没有名为 class 的列。

知道为什么会这样吗？以及如何解决？

编辑：

我试过这个：

```
classThrowingExceptionInstance.class=ClassThrowingException 
```

现在它说Cannot set readonly property: class for class ClassThrowingException

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:56:44.753

似乎是 MySQL 错误 1364 - 消息：字段 '%s' 没有默认值。

检查您修改的表。有没有没有默认值的字段？如果 INSERT 和 UPDATE 语句不发布这些字段值，还要分析它们。

要修复此错误：

*   修改表 - 为您需要的字段设置默认值

或者

*   在 INSERT/UPDATE 语句中将具体值传递给这些字段。

# javascript - 创建多个放置在彼此顶部的可放置同级

> ID：12724388
> 
> 赞同：7
> 
> 时间：2012-10-04T09:36:56.567
> 
> 标签：javascript, jquery, jquery-ui, jquery-droppable

我正在尝试创建多个彼此相邻的 jquery droppables，其中某些部分可能重叠，在这些情况下，我希望顶部的那个（z-index 明智）是贪婪的。

我尝试`greedy: true`在 droppable 中设置选项，但这似乎没有帮助。我也尝试过`return false`drop 事件并使用`event.stopPropagation();`.

这是一个基于jquery[演示页面的](http://jqueryui.com/demos/droppable/#propagation)[jsfiddle](http://jsfiddle.net/jeffreydev/SPcLF/)。

如果有另一个 droppable 触发它，是否有任何方法可以阻止 drop 事件传播，最好是具有最高 z-index 的那个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T12:01:48.410

用于`document.elementFromPoint`检查光标正下方的元素。如果它不是你的 droppable，请不要做任何事情。将以下内容添加到处理程序的顶部`drop:`：

```
var droppable = $(this);
ui.helper.css({pointerEvents: 'none'});
var onto = document.elementFromPoint(event.clientX, event.clientY);
ui.helper.css({pointerEvents: ''});
if(!droppable.is(onto) && droppable.has(onto).length === 0) {
    return;
} 
```

禁用助手上的指针事件对于`document.elementFromPoint`忽略您拖动的内容并仅在下方检查是必要的。我已经[更新](http://jsfiddle.net/SPcLF/19/)了您的 jsFiddle 以进行快速演示。请注意，突出显示仍然会影响这两个元素。您应该能够通过不让 jQuery UI 进行突出显示来改变这一点，而是自己在 draggables`drag:`事件中编写它。然而，我发现这在实践中是不可用的，因为这个检查（和禁用指针事件）非常慢并且还可能导致闪烁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T15:59:22.743

您需要一个函数来检查元素是否是最高可见元素。某些东西是最高可见的，当

1.  该项目在 dom 列表中的后面
2.  它具有更高的 z-index 集

下面的函数可用于查看当前元素（在可放置设置中的 over 方法或 drop 方法中）是否实际上是最高可见元素。

```
function isHighestVisible(cEl) {
    cEl = $(this); //use this if you want to use it in the over method for draggable, else just pass it to the method

    //get all active droppable elements, based on the classes you provided
    var $list = $('.ui-widget-header.ui-state-active');
    var listCount = $list.length;
    var HighestEl = null;
    var HighestZI = -1;

    //one element is always highest.
    if (listCount<=1) {
        console.log(cEl.attr('id'));
        return true;
    }

    //check each element
    $list.each(function(i) {
        var $el = $(this);

        var id = $el.attr('id');

        //try to parse the z-index. If its 'auto', return 0.

        var zi = isNaN(parseInt($el.css('z-index'))) ? 0 : parseInt($el.css('z-index'));

        if (zi>0) {
            //z-index is set, use it.
            //I add the listCount to prevent errors when a low z-index is used (eg z-index=1) and there are multiple elements.
            //Adding the listCount assures that elements with a z-index are always later in the list then elements without it.
            zi = zi + listCount;
        } else {
            //z-index is not set, check for z-index on parents
            $el.parents().each(function() {
                $par = $(this);
                var ziParent = isNaN(parseInt($par.css('z-index'))) ? 0 : parseInt($par.css('z-index'));
                if (ziParent>0) {
                    zi = ziParent;
                    return false;
                }
            });
        }

        //add the current index of the element to the zi
        zi += i;

        //if the calculated z-index is highest, change the highest element.
        if (HighestEl==null || HighestZI<zi) {
            HighestEl=$el;
            HighestZI = zi;
        }
    });

    //if the highest found active element, return true;
    if (HighestEl.attr('id')==cEl.attr('id')) {
        console.log(cEl.attr('id'));
        return true;
    }

    //if all else fails, return false
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:41:30.753

如果我有这个问题，我会使用 jQuery 的 .addclass

```
.droppablewidgetforce {
z-index: 1000 !important; 
} 
```

制作一个这样的类，以便无论如何该层都保持在顶部..这应该可以解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T23:52:59.537

贪婪选项仅适用于具有可放置父级的嵌套元素。

在您的代码中，2 个可放置元素是兄弟元素，因此贪婪选项将不起作用：

```
<div id="droppable3" class="ui-widget-header">
    <p>Outer droppable</p>
</div>
<div id="droppable3-inner" class="ui-widget-header">
    <p>Inner droppable (greedy)</p>
</div> 
```

如果您仍然想使用兄弟姐妹而不是父母和孩子，这是一个混乱的解决方法。

实时代码[示例](http://jsfiddle.net/nameIsNull/FgUYm/)。

```
function normalDraggedOver() {
    $( this ).addClass( "ui-state-highlight" )
             .find( "> p" )
             .html( "Droppeeeed!" );
}

var options = {
    activeClass: "ui-state-hover",
    hoverClass: "ui-state-active",
    greedy: true,
    drop: normalDraggedOver
};

var options2 = {
    activeClass: "ui-state-hover",
    hoverClass: "ui-state-active",
    disabledClass: "ui-state-disabled",
    hoverStateClass: "ui-state-hover",
    greedy: true,
    greedyWithSibligs: true,
    drop: normalDraggedOver,
    over: function () {
    /* if we have previous siblings of the inner element we handle them as parents */
        if(options2.greedyWithSibligs && $(this).prev().length > 0) {       
            $(this).siblings().slice(0, $(this).index())
            .removeClass(options2.hoverClass)
            .droppable('disable')
            .removeClass(options2.disabledClass)
            .removeClass(options2.hoverStateClass);
        }
    },
    out: function () {
    /* all the siblings of the inner element that were handled as parents act as one*/
        if(options2.greedyWithSibligs && $(this).prev().length > 0) {
            $(this).siblings().slice(0, $(this).index())
            .droppable('enable')
            .addClass(options2.hoverClass);
            console.log($(this).attr('id'));
        }
    }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T06:23:15.333

如果只是希望它看起来相同，您可以将 #droppable3 设置为 position: relative 并将子 #droppable3-inner 设置为 position: absolute。

HTML：

```
<div id="droppable3" class="ui-widget-header">
    <p>Outer droppable</p>
</div>
<div id="droppable3-inner" class="ui-widget-header">
    <p>Inner droppable (greedy)</p>
</div> 
```

这是现场[示例](http://jsfiddle.net/nameIsNull/SPcLF/18/)

# jquery - 如何迭代 JSON

> ID：12724389
> 
> 赞同：0
> 
> 时间：2012-10-04T09:36:59.317
> 
> 标签：jquery, asp.net, json

如何迭代以下列表并打印其值？

```
 public class DummyVersions
 {
      public List<string> Version { get; set; }
 }

 [WebMethod]
 public static DummyVersions GetDummyVersions()
 {
      DummyVersions dummyversions = new DummyVersions
      {
           Version = new List<string>
           {
                "1.1.0",
                "1.1.1",
                "1.1.2",
                "1.1.3",
                "1.1.4",
                "1.1.5",
           }
      };
      return dummyversions;
 } 
```

```
 $.ajax({
      type: "POST",
      url: "ManagerBaseKit.aspx/GetDummyVersions",
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function (result) {
           $.each(result, function (i, val) {
                alert(); // ??? here i want to print all version one by one
           });
      }
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:43:18.220

`WebMethod`ASP.NET 会自动将您的响应转换为 json，因此您可以使用以下代码迭代您的版本：

```
$.each(result.d.Version, function (i, val) {
  alert(val);
}); 
```

它可以是`result.d.Version`或`result.Version`取决于您的 ASP.NET 版本，更多信息可以在这里找到：[ASP.NET AJAX 版本之间的重大变化](http://encosia.com/a-breaking-change-between-versions-of-aspnet-ajax/)

# android - android包重新启动广播不起作用

> ID：12724391
> 
> 赞同：2
> 
> 时间：2012-10-04T09:37:05.417
> 
> 标签：android, broadcastreceiver, android-manifest

我正在开发一个应用程序，每次打开应用程序时都需要广播。我已经像这样在清单中注册了接收器。

```
<receiver android:name="package.broadcast.example" >
    <intent-filter>
        <action android:name="android.intent.action.PACKAGE_RESTARTED" />
        <data android:scheme="package"/>
    </intent-filter>
</receiver> 
```

但我无法接收广播。我花了 3 个小时在这上面仍然找不到错误。谁能向我推荐这个广播的工作示例。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:59:37.983

重新启动的应用程序/包没有收到广播...

查看以下链接了解详细信息，您可以查看此链接

[http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_RESTARTED](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_RESTARTED)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:45:50.913

您是否有以下扩展广播接收器的代码，如果没有，请尝试以下代码：

```
 public class AutoConnection extends BroadcastReceiver {

     @Override
     public void onReceive(Context context, Intent intent) {
        if ((intent.getAction() != null)
                && (intent.getAction()
                        .equals("android.intent.action.PACKAGE_RESTARTED"))) {
            Toast.makeText(context, "Pacakge Restarted",
                    Toast.LENGTH_LONG).show();

        }
    }

     } 
```

并在 android manifest 文件中添加以下代码：

```
 <receiver android:name=".AutoConnection" >
        <intent-filter>
            <action android:name="android.intent.action.PACKAGE_RESTARTED" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </receiver> 
```

# android - Android手机上的蓝牙有多可靠？

> ID：12724393
> 
> 赞同：3
> 
> 时间：2012-10-04T09:37:18.377
> 
> 标签：android, bluetooth, libgdx

Android上的蓝牙有多可靠？我在 Libgdx 上用蓝牙写了一个草稿游戏。但是 25% 的数据包消失了。所以演员的动作是生涩的。然后我为收到的数据包添加确认。但它会减慢性能。有时数据包会重新发送几次。这些设备彼此靠近。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T09:51:03.297

如果是这种情况，那么两个设备之间的文件传输可能永远不会成功，因为您永远不会在另一端获得完整的文件。

重要的是您实施的[BT 配置文件。](http://en.wikipedia.org/wiki/Bluetooth_profile)

[HID](http://en.wikipedia.org/wiki/Bluetooth_profile#Human_Interface_Device_Profile_.28HID.29)用于游戏鼠标、键盘等。

但是大多数安卓手机，至少有一段时间没有实施 HID 配置文件，对三星手机有一些经验，但我猜平板电脑可能会有所不同。

# servicestack - 无法获取自定义响应过滤器属性来触发

> ID：12724394
> 
> 赞同：4
> 
> 时间：2012-10-04T09:37:21.860
> 
> 标签：servicestack, filterattribute

我得到了要触发的请求过滤器属性，但响应过滤器永远不会触发。我错过了什么？

```
[MyResponse]
[MyRequest]
public class MyService : Service
{
        public object Get(RequestDto request)
        {
            return new {foo = "bar"};
        }
}

public class MyResponseAttribute : ResponseFilterAttribute
{
    public override void Execute(IHttpRequest req, IHttpResponse res, object requestDto)
    {
        var x = requestDto;
    }
}

public class MyRequestAttribute : RequestFilterAttribute
{
    public override void Execute(IHttpRequest req, IHttpResponse res, object responseDto)
    {
        var x = responseDto;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:49:57.997

我无法用[我刚刚添加的测试](https://github.com/ServiceStack/ServiceStack/commit/5d308eb7cfe3fd698a659ab2115db1454733e602)来复制这种行为。

如果您仍然认为这是框架的问题，您是否可以向项目提交失败的单元测试（首选拉取请求）。

# php - 使用 switch 和 $_GET

> ID：12724396
> 
> 赞同：0
> 
> 时间：2012-10-04T09:37:25.430
> 
> 标签：php

我正在为服装电子商务网站创建一个大型菜单。这些类别分为**New In**、**Women**和**Men**。 **New In**将直接链接到特定产品，但我希望**女性**和**男性**类别仅通过两个页面链接到相关类别。**因此，在女性**类别之下将是例如裙子和上衣。

我的代码是从...开始的

```
$ItemCategory = ['$category'];
$category = "";

switch ($_GET['$category']) {
    case "Women";
    // the difference in variables go here;
    break;

    case "Men";
    // the difference in variables go here;
    break;
} 
```

我不知道我是否以正确的方式或以何种方式处理它。显然，评论所在的位置将是我输入每个类别的位置。虽然我不确定这里会发生什么。

另外，例如裙子的链接是什么？可不可能是

```
<a href="http://mysite.com/store.php?gender=Women&category=skirts">Skirts</a> 
```

还是我完全错过了重点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:05:49.607

这需要一个组合开关或 if-else：

```
$ItemCategory = $_GET['category'];
$gender = $_GET['gender'];

if($gender == 'Women'){
    switch ($ItemCategory) {
        case "Skirts":
        // content
        break;

        case "Hats":
        // content
        break;
    }
}else if($gender == 'Men'){
    switch ($ItemCategory) {
        case "Ties":
        // content
        break;

        case "Trousers":
        // content
        break;
    }
} 
```

另一种方法是将类别存储在数据库中（无论如何您可能都会这样做）并定义哪个类别属于男性和女性。然后，您只能使用单个类别 ID 进行导航。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:48:16.340

```
$ItemCategory = $_GET['category'];
$category = "";

switch ($ItemCategory) {
    case "Women":
    // the difference in variables go here;
    break;

    case "Men":
    // the difference in variables go here;
    break;
} 
```

# javascript - 获得 IE8 与 EaselJS 和 ExplorerCanvas 的兼容性

> ID：12724404
> 
> 赞同：1
> 
> 时间：2012-10-04T09:37:57.903
> 
> 标签：javascript, internet-explorer, canvas, internet-explorer-8, easeljs

我正在使用 EaselJS 并希望允许与 ExplorerCanvas 向后兼容。

这应该可以使用以下代码（请参见[此处](https://github.com/CreateJS/EaselJS/issues/83)）：

```
createjs.createCanvas = function () { ... return canvas implementation here ... } 
```

但是，如果我在此函数中发出警报并运行代码，则该函数永远不会运行。

我该如何让它发挥作用？

编辑：

这是我正在使用的代码的简化示例：

```
<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='utf-8' />
    <script src='/Scripts/jquery-1.7.1.js'></script>
    <script src="/Scripts/excanvas/excanvas.compiled.js"></script>
    <script src="/Scripts/easeljs/lib/easeljs-0.5.0.min.js"></script>
    <script src='/Scripts/core/jquery.mousewheel.js'></script>
    <style>
        canvas
        {
            border: 1px solid #ccc;
        }
    </style>
    <script type='text/javascript'>
        $(document).ready(function () {
            // Variables
            var img;
            var stage;
            var bmp;

            // Bindings
            $('#load').click(function () { initialize() }); // DELETE

            // Functions

            function initialize() {
                img = new Image();
                img.onload = imageLoadedEvent;
                img.src = '/Scripts/viewer/June.jpg';
            }

            function imageLoadedEvent() {
                var canvasElement = generateContext('testCanvas', 400, 400);

                stage = new createjs.Stage('testCanvas');
                bmp = new createjs.Bitmap(img);

                stage.autoClear = true;
                stage.addChild(bmp);
                stage.update();
            }

            function generateContext(canvasID, width, height) {
                var canvasElement = document.createElement('canvas');

                if (typeof (G_vmlCanvasManager) != 'undefined')
                    canvasElement = G_vmlCanvasManager.initElement(canvasElement);

                canvasElement.setAttribute("width", width);
                canvasElement.setAttribute("height", height);
                canvasElement.setAttribute("id", canvasID);

                document.getElementById('viewer').appendChild(canvasElement);
            }
        });
    </script>
</head>
<body>
    <div id='viewer'>
        <button id='load'>load</button>
    </div>

</body>
</html> 
```

此示例将在 Chrome 和 IE9 中运行，因为创建和使用了原生画布元素。但是在 IE8 中它失败了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:29:39.370

我也遇到了这个问题，试图让 ExCanvas 与 EaselJS 配合得很好。这是我如何让它工作的。希望这对您的图像问题有所帮助。

*   获取 EaselJS 的源代码：[https](https://github.com/gskinner/EaselJS.git) ://github.com/gskinner/EaselJS.git 。这会将所有 javascript 文件分离成它们自己的部分。
*   将所有这些文件复制到项目目录中的“画架”文件夹中。
*   加载文件的顺序很重要，因此请参阅下文了解如何执行此操作。
*   EaselJS 有一个选项来覆盖 createCanvas 方法，这是使用 ExCanvas 所必需的。这发生在加载 SpriteSheet.js 文件之后，以及加载 Graphics.js、DisplayObject.js、Container.js 等之前。在下面的代码中，我使用 jQuery 加载了easelJs 所需的其余 js 文件。这一切都发生在 $(document).ready() 函数中。
*   如果操作正确，您应该会在 IE 中看到一个 700 x 700 的画布，从左上角到右下角有一条红线（在 8 中测试）。

    头>

    ```
     <!--
                Load ExCanvas first, and jquery
            -->
            <script type='text/javascript' src='./javascript/excanvas.js'></script>
            <script type='text/javascript' src='./javascript/jquery-1.8.2.min.js'></script>

            <!--
                Have to load Easel js files in a certain order, and override the createCanvas
                function in order for it to work in < IE9.
            -->
            <script type='text/javascript' src='./javascript/easel/UID.js'></script>
            <script type='text/javascript' src='./javascript/easel/Ticker.js'></script>
            <script type='text/javascript' src='./javascript/easel/EventDispatcher.js'></script>
            <script type='text/javascript' src='./javascript/easel/MouseEvent.js'></script>
            <script type='text/javascript' src='./javascript/easel/Matrix2D.js'></script>
            <script type='text/javascript' src='./javascript/easel/Point.js'></script>
            <script type='text/javascript' src='./javascript/easel/Rectangle.js'></script>
            <script type='text/javascript' src='./javascript/easel/Shadow.js'></script>
            <script type='text/javascript' src='./javascript/easel/SpriteSheet.js'></script>

            <script type='text/javascript'>
                var canvas, stage;

                createjs.createCanvas = function () { return getCanvas(); };

                function getCanvas() {
                    // This is needed, otherwise it will keep adding canvases, but it only use the last one it creates.
                    canvas = document.getElementById("myCanvas");
                    if (canvas != null) {
                        document.getElementById("container").removeChild(canvas);
                    }
                    canvas = document.createElement("canvas");
                    document.getElementById("container").appendChild(canvas);
                    if (typeof (G_vmlCanvasManager) != 'undefined') {
                        canvas = G_vmlCanvasManager.initElement(canvas);
                        canvas.setAttribute("height", "700");
                        canvas.setAttribute("width", "700");
                        canvas.setAttribute("style", "height:700px; width:700px;");
                        canvas.setAttribute("id", "myCanvas");
                    }
                    return canvas;
                }
            </script>

            <script type="text/javascript">
                $(document).ready(function () {
                    loadOtherScripts();
                    stage = new createjs.Stage(canvas);

                    // Draw a red line from top left to bottom right
                    var line = new createjs.Shape();
                    line.graphics.clear();
                    line.graphics.setStrokeStyle(2);
                    line.graphics.beginStroke("#FF0000");
                    line.graphics.moveTo(0, 0);
                    line.graphics.lineTo(700, 700);
                    stage.addChild(line);

                    stage.update();
                });

                function loadOtherScripts() {
                    var jsAr = new Array(13);

                    jsAr[0] = './javascript/easel/Graphics.js';
                    jsAr[1] = './javascript/easel/DisplayObject.js';
                    jsAr[2] = './javascript/easel/Container.js';
                    jsAr[3] = './javascript/easel/Stage.js';
                    jsAr[4] = './javascript/easel/Bitmap.js';
                    jsAr[5] = './javascript/easel/BitmapAnimation.js';
                    jsAr[6] = './javascript/easel/Shape.js';
                    jsAr[7] = './javascript/easel/Text.js';
                    jsAr[8] = './javascript/easel/SpriteSheetUtils.js';
                    jsAr[9] = './javascript/easel/SpriteSheetBuilder.js';
                    jsAr[10] = './javascript/easel/DOMElement.js';
                    jsAr[11] = './javascript/easel/Filter.js';
                    jsAr[12] = './javascript/easel/Touch.js';

                    for (var i = 0; i < jsAr.length; i++) {
                        var js = jsAr[i];
                        $.ajax({
                            async: false,
                            type: "GET",
                            url: js,
                            data: null,
                            dataType: 'script'
                        });
                    }
                }
        </head>
        <body>
            <div id="container"></div>
        </body>
    </html> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:26:58.540

[您应该通过引用项目页面示例](http://code.google.com/p/explorercanvas/wiki/Instructions)`canvas`中提供的原始画布源来实例化准元素：

```
<head>
<!--[if lt IE 9]><script src="excanvas.js"></script><![endif]-->
</head>

var el = document.createElement('canvas');
G_vmlCanvasManager.initElement(el);
var ctx = el.getContext('2d'); 
```

**编辑：**

经过进一步调查，我得出以下结论！无法将图像包含到画布中的原因有多种：

1.  第一个可能是 excanvas 代码中存在一个错误，因为它无法模仿本机画布功能。我更成功地使用了修改后的 sancha 代码，您可以在这里获得：http: [//dev.sencha.com/playpen/tm/excanvas-patch/excanvas-modified.js](http://dev.sencha.com/playpen/tm/excanvas-patch/excanvas-modified.js)。在此处查看实时示例：http: [//jsfiddle.net/aDHKm/](http://jsfiddle.net/aDHKm/) （*在 IE 上尝试*）。
2.  在 Easeljs 初始化核心对象和类之前的第二个首先是搜索画布元素的存在。因为 IE < 9 没有实现画布，很明显easeljs 核心图形API 不能被实例化。我认为这是您的代码无法正常工作的两个主要原因。

我的建议是尝试在没有画架的情况下重新制作代码。我做了一个必要的修改，向您展示如何在没有easeljs的情况下完成：http: [//jsfiddle.net/xdXrw/](http://jsfiddle.net/xdXrw/)。我不知道您是否绝对必须使用easeljs，但在IE8 hacked canvas 方面肯定有一些限制。

# sql - SQL 搜索和替换高级

> ID：12724406
> 
> 赞同：2
> 
> 时间：2012-10-04T09:37:59.507
> 
> 标签：sql

通常当我搜索和替换时，我使用以下代码：

```
UPDATE wp_posts SET post_content = REPLACE (post_content, 'old string', 'new string'); 
```

现在我想替换`<h1>Title</h1>`为`<table>...<h1>Title</h1>...</table>`

问题当然是标签之间的文本对于所有页面都是不同的（它是一个 wordpress 主页）。

关于如何解决这个问题的任何想法？可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:39:55.110

如果您只需要将`<table>...</table>`标签放在开头和结尾，请使用 Anant Dabhi 的解决方案。但是，如果您需要做比这更聪明的事情，SQL 确实不是适合这项工作的工具。

简单处理 HTML 的问题有很多：

1.  如果您要查找的标签存在于评论中怎么办？
2.  如果`<h1>`标签里面有属性怎么办？
3.  如果帖子中有多个`<h1>...</h1>`怎么办？

潜在的问题还在继续。

既然您使用的是 WordPress，为什么不使用 PHP，它可以让您访问真正的 HTML 解析器？这个讨论可以让你开始：

[您如何在 PHP 中解析和处理 HTML/XML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:47:34.523

试试这个它更新你的专栏并将文本添加到你的所有记录中

```
UPDATE wp_posts SET post_content = `<table>`+ post_content+`</table>` ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:50:43.687

这两个更新语句可以帮你做

```
UPDATE wp_posts 
 SET post_content = REPLACE (post_content, '<h1>', '<table><h1>');

 UPDATE wp_posts 
 SET post_content = REPLACE (post_content, '</h1>', '</table></h1>'); 
```

# tomcat - 使用 Orbeon CE 驱动日志文件分析 (Saxon)

> ID：12724418
> 
> 赞同：0
> 
> 时间：2012-10-04T09:38:55.273
> 
> 标签：tomcat, xquery, orbeon, saxon

我是 Orbeon 新手。我有一套 XQuery 脚本，我想自动执行这些脚本。Orbeon 看起来像是实现我在下面概述的过程的潜在解决方案。基本上我只是想知道 Orbeon CE 是否会在流程的每个阶段为我提供正确的支持？

我有一组原始日志文件，其中包含一些系统测试用例的记录输出。每个原始 txt 日志都有一个匹配的 XQuery 模块来验证测试并生成带有支持数据的测试通过/失败结果。为了实现这一点，我想要实现的过程如下所示：-

1.  从 UI 屏幕将一些原始 (txt) 系统日志数据上传到服务器 (Tomcat)。可以上传单个 txt 文件或包含所有文件的 zip。
2.  执行自定义的内部解析器可执行文件以将原始日志数据转换为输出 XML。（可以来自上传的 txt 文件或最初提取上传的 ZIP）。
3.  执行 grep 以进一步细化步骤 2 中的 XML
4.  运行 XQuery (xq) 脚本（最初为 Saxon 编写）以分析来自 2&3 的 XML
5.  在 UI 中显示分析结果

您认为我可以使用 Orbeon CE 快速实现这一目标吗？是否有任何类似的示例/教程可以帮助我实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T06:18:02.830

是的，您当然可以为此使用 Orbeon Forms。关于我将如何使用 Orbeon Forms 的一些评论：

1.  如果要支持上传的 zip 文件，则可以使用[解压缩处理器](http://wiki.orbeon.com/forms/doc/developer-guide/processors-zip-unzip#TOC-Unzip-processor)解压缩 zip 文件，并访问其中包含的文件。我会在 XForms 中编写 UI，利用`xf:upload`. 当用户提交表单时，`xf:submission replace="instance"`运行，它将上传的文件发布到服务，使用管道实现。该管道运行下面的步骤 2-4。
2.  如果您已经拥有此解析器的 Java 代码，那么您可以[从 XSLT 调用它](http://www.saxonica.com/documentation9.1/extensibility/functions/staticmethods.html)，您可以从管道运行它。否则，您可以直接在 XSLT 中进行解析。
3.  使用 XSLT 对 XML 数据执行 grep 应该很容易。
4.  从管道，使用`oxf:xquery`处理器，它调用 Saxon 的 XQuery 引擎。
5.  管道将结果返回给显示它的表单。

# c# - c#复杂集合DataBinding DataGridView List of Lists

> ID：12724420
> 
> 赞同：1
> 
> 时间：2012-10-04T09:39:09.563
> 
> 标签：c#, list, data-binding, collections, datagridview

我正在尝试将`page`类列表绑定到`datagridview`.

```
class Page : INotifyPropertyChanged
{
    public List<Tuple<DateTime, String>> Lines { get; set; }
    public Color c { get; set; }
    public String filePath { get; set; }

//rest of class code...
}
//on the 'Form1' class
BindingList<Page> pages = new BindingList<Page>(); 
```

我希望其中`datagridview`的一行代表列表中的一行

```
List<Tuple<DateTime, String>> Lines 
```

一列用于 ，一列用于`DateTime`对应`string`。

每一行都应与其所属`color`的行相协调。`page`

我正在尝试绑定它，因为我希望通过源文件的更新实时更新 GUI。

我的实现已经循环了好几天，任何帮助/建议将不胜感激。谢谢！

编辑：一些示例数据：

```
20-Apr-11 08:36:44.312   Start       I *** C:\Cromos 3.0\toolset\Ntbin\Release\crm_gui_gtm.exe on BENJAMIN-PC - release - cromos: build 2780, Gui version: 400, File version: 80 ***
20-Apr-11 08:36:44.312   symbol element total: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:42:32.190

对于查看此问题的任何人，我通过更改我的数据结构来解决问题。我为单行创建了一个类，如下所示：

```
 class Line : INotifyPropertyChanged
{
    public Color _c;
    public DateTime _dateTime;
    public String _comment;
    public event PropertyChangedEventHandler PropertyChanged;
} 
```

然后实现 a`BindingList`来存储所有行并按照 Vikram 链接的示例进行操作。

```
 BindingList<Line> all = new BindingList<Line>(); 
```

另外，请确保您将这一行包含在表单初始化程序中，而不是像我一样的方法！

```
 dataGridView1.DataSource = all; 
```

# php - 这是否可以通过使用非托管加密按钮动态覆盖金额

> ID：12724421
> 
> 赞同：2
> 
> 时间：2012-10-04T09:39:13.027
> 
> 标签：php, paypal, paypal-ipn, paypal-sandbox

我希望贝宝接受用户输入的金额。但在重定向到贝宝时它不接受金额为空白。这是否可以通过使用非托管加密按钮动态覆盖金额。任何人都可以帮助.我无能为力

这是我的表格

```
 <form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post" target=_blank>
     <input type="hidden" name="cmd" value="_s-xclick">
     <input type="hidden" name="encrypted" value="<?PHP echo $encrypted; ?>">

     <div  class="paypal_list2">   
     <input type="hidden"><h3>Enter the amount</h3><br /> </div>
     <input id="total" class="paypal_input_1" type="text" value="" name="amount">

    <input class="paypal_btn" type="image"src="https://www.sandbox.paypal.com/en_US/i/btn/btn_paynowCC_LG.gif" name="submit" alt="PayPal - The safer, easier way to pay online!">                                  
     </form> 
```

这是我的 php 代码

```
 <?php

    $MY_KEY_FILE = "/home/khader/smsmobilebase/certs/private-key.pem";

    $MY_CERT_FILE = "/home/khader/smsmobilebase/certs/publi-cert.pem";

    $PAYPAL_CERT_FILE = "/home/khader/smsmobilebase/certs/paypal_cert_pem.txt";

     $OPENSSL = "/usr/bin/openssl";

     $form = array('cmd' => '_xclick','business' => 'roki_1347003608_biz@gmail.com','cert_id' => '6BPQP9KEEBCJ6','currency_code' => 'USD',
'no_shipping' => '1',
'item_name' => 'PayNow',

'cancel_return' => 'http://mobiletool.xichlomobile.com/',
'amount' => "'$amount'"
           );

  $encrypted = paypal_encrypt($form);

 function paypal_encrypt($hash)
   {

         global $MY_KEY_FILE;
         global $MY_CERT_FILE;
         global $PAYPAL_CERT_FILE;
         global $OPENSSL;

       if (!file_exists($MY_KEY_FILE)) {
      echo "ERROR: MY_KEY_FILE $MY_KEY_FILE not found\n";
    }
       if (!file_exists($MY_CERT_FILE)) {
      echo "ERROR: MY_CERT_FILE $MY_CERT_FILE not found\n";
        }
        if (!file_exists($PAYPAL_CERT_FILE)) {
       echo "ERROR: PAYPAL_CERT_FILE $PAYPAL_CERT_FILE not found\n";
         }

      $data = "";
      foreach ($hash as $key => $value) {
      if ($value != "") {
     //echo "Adding to blob: $key=$value\n";
    $data .= "$key=$value\n";
        } 
     }

     $openssl_cmd = "($OPENSSL smime -sign -signer $MY_CERT_FILE -inkey $MY_KEY_FILE " .
                "-outform der -nodetach -binary <<_EOF_\n$data\n_EOF_\n) | " .
                "$OPENSSL smime -encrypt -des3 -binary -outform pem $PAYPAL_CERT_FILE";

          exec($openssl_cmd, $output, $error);

         if (!$error) {
        return implode("\n",$output);

          print $hash;
           } else {
             return "ERROR: encryption failed";
          }
                }
             ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:44:47.460

每次`encrypted`用户更改`amount` . 使用像 jQuery 这样的库很容易做到这一点：

```
$('input[name=amount]').change( function () {

   $.ajax({
     url: "http://mydomain.com/encrypter.php",
     type: "POST",
     data: { amount: $('input[name=amount]').val() }
   }).done(function ( data ) {
     $('input[name=enctypted]').val(data);
   });

}); 
```

# c# - 自动更新NHibernate中的相应集合？

> ID：12724422
> 
> 赞同：3
> 
> 时间：2012-10-04T09:39:17.143
> 
> 标签：c#, nhibernate, nhibernate-mapping

我的数据库有两个表：

```
Users
    UserId        PK

Likes
    LikeId        PK
    LikedUserId   FK
    LikingUserId  FK 
```

这些表代表用户的“喜欢”。喜欢是有方向的——用户 A 喜欢用户 B，但用户 B 不喜欢用户 A。

我正在使用 NHibernate 进行映射，如下所示：

```
<class name="User" table="Users">
    <id name="UserId">
        <generator class="assigned"></generator>
    </id>

    <idbag name="LikedBy" table="Likes" inverse="true">
        <collection-id column="LikeId" type="guid">
            <generator class="guid.comb"/>
        </collection-id>
        <key column="LikedUserId"/>
        <many-to-many column="LikingUserId" class="User"/>
    </idbag>

    <idbag name="Liking" table="Likes">
        <collection-id column="LikeId" type="guid">
            <generator class="guid.comb"/>
        </collection-id>
        <key column="LikingUserId"/>
        <many-to-many column="LikedUserId" class="User"/>
    </idbag>
</class> 
```

对应这个类：

```
public class User 
{
    public Guid UserId { get; set; }
    public ICollection<User> LikedBy { get; set; }
    public ICollection<User> Liking { get; set; }
} 
```

这工作正常。但是，两个不同用户的`Liking`和集合可能会不同步。`LikedBy`例如：

```
using (var session = new NHibHelp.OpenSession())
{
    var user1 = session.GetById<User>(id1);
    var user2 = session.GetById<User>(id2);

    int initialCount = user2.LikedBy.Count();

    user1.Liking.Add(user2);
    session.Update(user1);

    int finalCount = user2.LikedBy.Count();

    Assert.AreEqual(initalCount,finalCount); // passes
} 
```

所以如果我添加到`Liking`一个用户的`LikedBy`集合中，另一个用户的集合不会更新。要更新它，我需要做`Session.Refresh()`.

这并不理想。我对 NHibernate 很陌生，所以我不知道是否有其他解决方案 - 我能做些什么更好的事情吗？例如，是否可以以`LikedBy`适当时自动更新的方式映射此场景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:51:12.720

`User`您可以向同步两个集合的类添加一个方法：

```
public class User 
{
    public Guid UserId { get; set; }
    public ICollection<User> LikedBy { get; set; }
    public ICollection<User> Liking { get; set; }

    public void Like(User user) 
    {
       this.Liking.Add(user);
       user.LikedBy.Add(this);
    }
} 
```

您还可以将此集合设置为对外部代码只读：

```
private ICollection<User> likedBy;
private ICollection<User> liking;

public IEnumerable<User> LikedBy { get { return this.likedBy; } }
public IEnumerable<User> Liking { get { return this.liking; } }

<idbag access="field.camelcase" ... /> 
```

# ruby-on-rails - Rails：Collection_select 将 ID 保存为一个条目

> ID：12724432
> 
> 赞同：0
> 
> 时间：2012-10-04T09:39:58.633
> 
> 标签：ruby-on-rails, ruby, database, controller

我正在尝试使用 collection_select 而不是 select。

```
<%= form_for(@technol) do |tech| %>
  <div class="field">
    <%= tech.label :tech %><br />
    <%=  tech.select(:tech, Technol.all.map {|p| [p.tech]}.uniq,:prompt => "Select a previous role") %>
  </div>
<%end%> 
```

此代码有效，允许我将一项技术链接到一个项目。我试图这样做：

```
<%= form_for(@technol) do |tech| %>
   <div class="field">
    <%= tech.label :tech %><br />
    <%= tech.collection_select(:tech,  Technol.all, :id, :tech, {}, {:multiple => true} ) %>
  </div>
<%end%> 
```

出现collection_select，所有技术都显示在下拉列表中，当我选择一些并提交项目时，这些技术显示为一个条目，通过它们的ID。

`--- - '' - '11' - '12' - '13'`

这是我的创建操作，我认为是导致问题的原因：

```
def create
    @project = Project.new(params[:project])
    @technol = Technol.new(params[:tech])

    params[:technol].each_value do |tech|

    technology = Technol.find_or_create_by_tech(tech)

    @project_technol = @project.projecttechnols.build(:technol_id => technology.id) 
end

    respond_to do |format|
      if @project.save
        format.html { redirect_to @project, notice: 'Project was successfully created.' }
        format.json { render json: @project, status: :created, location: @project }
      else
        format.html { render action: "new" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end 
```

我认为这是我循环的方式有问题。希望有人能看到。我是 Rails 新手，所以在尝试帮助我时请记住这一点。提前致谢。

**更新**

我尝试将 collection_select 更改为：

```
<%=  tech.select(:technol, :id, Technol.all.map {|p| [p.tech]}.uniq,:prompt => "Select a previous role") %> 
```

我得到这个错误。`wrong number of arguments (7 for 6)`

罗斯更新：

```
wrong number of arguments (7 for 6)
Extracted source (around line #273):

273: tech.collection_select(:tech, :tech_ids, Technol.all, :id, :tech, {:prompt => "Select a previous role"}, {:multiple => true} ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:11:29.747

利用

```
collection_select(:test, :tech_ids, Technol.all, :id, :tech, {:prompt => "Select a previous role"}, {:multiple => true} ) 
```

# css - 如何将两个 DOM 元素放在同一行

> ID：12724433
> 
> 赞同：0
> 
> 时间：2012-10-04T09:40:09.220
> 
> 标签：css, css-float

我试图放在同一条`$('.prize-item input')`线上`$('.prize-edit')`

这是 DOM 结构 (1) 和 CSS 代码 (2)。

我试图起诉`display:inline-block`没有成功。

前提条件如下：
1) 不得使用绝对位置。
2) 调整屏幕大小，按钮与输入框的距离不应该改变。
3）只有在无法获得我用 CSS 请求的结果时才应该更改 DOM 结构。

演示：http: [//jsfiddle.net/jBme9/8/](http://jsfiddle.net/jBme9/8/)

* * *

(1)

```
<div class="control-group">
    <div class="controls">
        <div class="prize-edit">
            <button type="button" class="btn" data-toggle="collapse" data-target="">Edit Same line</button>
        </div>
        <div class="prize-item">
            <div class="control-group ">
                <label class="control-label">Name</label>
                <div class="controls">
                    <input type="text" class="form-prize-item-name" value="prize same line">
                </div>
            </div>
        </div>

    </div> 
</div> 
```

## ​</h2>

(2)

```
.prize-edit {
    float: right;
    display: inline-block;
}

.prize-item input {
    float: left;
    display: inline-block;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:44:12.020

您可以使用相对定位。请为您的真实页面调整这些值。

[**演示**](http://jsfiddle.net/gionaf/sUvAC/)

代码：

```
.controls button {
    float: right;
    position:relative;
    top:38px;
    right:17px;
} 
```

我使用了像素，因为您使用的是像素，但这也可以使用`em`s 来完成。

* * *

要将 推到`button`外部`input`，请将另一个类添加到输入的包装器中。我们称之为“controlsWrapper”。

这样您就可以在html中拥有：

```
<div class="controls controlsWrapper"><input...other stuff...></div> 
```

在 CSS 中

```
.controls button {
    float: right;
    position:relative;
    top:38px;
}
.controlsWrapper {
    box-sizing: border-box;
    width:100%;
    padding-right:40px; /* width of the button + some space */
} 
```

[检查演示](http://jsfiddle.net/gionaf/J738k/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:23:41.127

我认为这种 DOM 结构是不可能的。你想要这样的东西：

```
<div class="aWrapper">
  <div class="control-group">
    <label class="control-label">Name</label>
    <div class="controls">
      <div class="prize-edit">
        <button type="button" class="btn" data-toggle="collapse" data-target="">Edit Same line</button>
      </div>
      <div class="prize-input"><!-- I renamed the class! -->
                <input type="text" class="form-prize-item-name" value="prize same line">
      </div>
    </div>
  </div>
</div> 
```

额外的：

```
.label { diplay: block; }
.prize-edit { float: right; width: 20%; // adjust with paddings etc. }
.prize-input { float: left; width: 80% // adjust ... } 
```

# asp.net-mvc - 在 asp.net 视图中动态更改@section

> ID：12724434
> 
> 赞同：0
> 
> 时间：2012-10-04T09:40:12.173
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我正在处理 asp.net MVC 3 应用程序，我有一个布局页面，其中包含如下部分：

```
 <div class="rt-block">
                                <div id="rt-mainbody">
                                    @if (IsSectionDefined("BodyTitle"))
                                    {
                                        <div class="rt-headline">
                                            <h1 class="rt-article-title">
                                                @RenderSection("BodyTitle", false)
                                            </h1>
                                        </div>   
                                    }
                                    <div class="clear">
                                    </div>
                                    <div>
                                        @RenderBody()
                                    </div>
                                </div>
                            </div> 
```

在我的观点中，我正在定义这样的部分：

```
@section BodyTitle {
    <span>Verify</span> Your Identity
}

partail view here 
```

此视图根据链接点击加载两个部分视图之一。

我希望在加载一个局部视图时，该部分具有不同的文本，而当加载其他局部视图时，它应该具有不同的文本。如何更改部分视图更改部分内容？

我试图将部分移动到部分视图，但在这种情况下它根本没有加载。我们不能在布局视图中声明的局部视图中定义部分吗？

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:58:46.390

您不能在局部视图中定义部分。它们必须在主视图中定义。所以基本上你需要的是在单击链接时更新 DOM 的 2 个不同部分。实现此目的的一种可能方法是[将部分视图呈现为](https://stackoverflow.com/a/4344602/29407)控制器操作内的字符串，然后返回包含 2 个属性和相应部分内容的 JSON 结果。

```
return Json(new
{
    partialHtml = RenderPartialViewToString("_SomePartial"),
    sectionHtml = RenderPartialViewToString("_SomeSection")
}); 
```

接着：

```
$.ajax({
    url: '...',
    type: 'POST',
    success: function(result) {
        // first update the partial
        $('#partialContainerId').html(partialHtml);

        // now update the section
        $('.rt-article-title').html(sectionHtml);
    }
}); 
```

您可以将部分内容外部化。

# linq - Linq 选择子查询

> ID：12724435
> 
> 赞同：0
> 
> 时间：2012-10-04T09:40:13.463
> 
> 标签：linq

正如标题所述，我正在尝试在 Linq-To-SQL 中执行选择子查询。这是我的情况：

我有一个返回以下字段的数据库视图：

*   来源 ID
*   许可证编号
*   许可证名称
*   特征 ID
*   特征名称

现在我希望能够将其存储在我的模型中，该模型具有以下属性

*   ID
*   姓名
*   特征（这是具有 Id、名称和图标的列表 => 图标是字节 []）

这是我写的不起作用的查询：

```
var licensesWithCharacteristics =
                _vwAllLicensesWithAttributesAndSourceIdRepository.GetAll()
                .Where(x => x.SourceID == sourceId)
                .Select(a => new LicenseWithCharacteristicsModel()
                {
                    LicenseId = a.LicenseId,
                    LicenseName = a.LicenseName
                        ,CharacteristicList = _vwAllLicensesWithAttributesAndSourceIdRepository.GetAll()
                     .Where(x => x.LicenseId == a.LicenseId)
                     .Select(c => new CharacteristicModel { Id = c.CharacteristicID, Name = c.CharacteristicName, Icon = c.Icon })
                     .Distinct().ToList()
                })
                .Distinct().ToList(); 
```

你会如何解决这个问题？我试图在一个查询中执行此操作以保持我的性能，但我有点卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:07:57.953

您的示例查询和模型不是那么连贯（`Icon`来自哪里，特性或特性列表），但无论如何。

我分两部分执行此操作，您当然可以在一个查询中重新组合。我在分组后枚举了结果，您可以尝试不枚举（全部在linq to sql中，但不确定它是否会起作用）。

```
var groupedResult = 
     _vwAllLicensesWithAttributesAndSourceIdRepository.GetAll()
         .Where(x => x.SourceID == sourceId)
         .GroupBy(m => new {m.LicenseId, m.LicenseName})
         .ToList();

var results = groupedResult.Select(group => new LicenseWithCharacteristicsModel {
                  LicenseId = group.Key.LicenseId,
                  LicenseName = group.Key.LicenseName,
                  Characteristics = group.Select(m=> new CharacteristicModel {
                       Id = m.CharacteristicId,
                       Name = m.CharacteristicName
                      }).ToList()
                  }); 
```

在“单个查询”中

```
_vwAllLicensesWithAttributesAndSourceIdRepository.GetAll()
    .Where(x => x.SourceID == sourceId)
    .GroupBy(m => new {m.LicenseId, m.LicenseName})
    .Select(group =>
        new LicenseWithCharacteristicsModel
        {
            LicenseId = group.Key.LicenseId,
            LicenseName = group.Key.LicenseName,
            Characteristics = group.Select(m =>
                new CharacteristicModel
                {
                    Id = m.CharacteristicId,
                    Name = m.CharacteristicName
                }).ToList()
        }); 
```

# python - Buildout 和 Pythonbrew

> ID：12724438
> 
> 赞同：1
> 
> 时间：2012-10-04T09:40:18.687
> 
> 标签：python, linux, buildout

我正在将 Python 2.7.2 与 Pythonbrew 一起使用，并且我想为我的一些项目使用 buildout，其中包括一些需要使用 C 扩展编译的包。

但是，在构建它时，似乎 buildout 找不到位于`~/.pythonbrew/pythons/Python-2.7.2/include`. 如果我尝试一个简单的`pip install simplejson`，那么它的工作原理。因此，似乎 buildout 正在寻找默认包含位置。

是否有我可以在构建中为此设置的参数配置？还是环境变量（我在 Centos 6.3 下）？

相关：[构建 - 使用不同的 python 版本](https://stackoverflow.com/questions/5726289/buildout-using-different-python-version)，但我更喜欢保留我的 pythonbrew 安装，因为我可能在其他工作站上有不同的场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T07:30:53.263

对于它的价值（如果它可以帮助任何人），我可以通过使用 Pythonbrew 编译带有共享库的 Python 来解决我的问题。

```
pythonbrew install --configure="--enable-shared" 2.7.2 
```

# objective-c - 如何在 [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:distantFuture] 之后唤醒线程？

> ID：12724439
> 
> 赞同：0
> 
> 时间：2012-10-04T09:40:18.223
> 
> 标签：objective-c, nsurlconnection, nsthread, nsoperation, nsrunloop

我有一个处理**NSURLConnection的****Download**对象。

 **然后我有**NSOperation**对象（**DownloadOperation**），它将**下载**对象作为属性。

**下载**对象具有*启动/暂停/恢复/取消*的能力。

这是**DownloadOperation的主要方法**

```
- (void)main
{
    @autoreleasepool {

        BOOL isDone = NO;

        if (![self isCancelled]) {   
            [_download start]; //Download object start (creates NSURLConnection internally)
        }

        NSDate *distantFuture = [NSDate distantFuture];
        while(!isDone && ![self isCancelled]) {

            [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:distantFuture];

            if (!_download.isActive) { //internal state of Download
                isDone = YES;
            }
        }

        [self completeOperation]; //this sets finished and executing flags
    }
} 
```

从外部（从 UI），我使用**Download**对象进行操作：*Start*、*Pause*、*Resume*、*Cancel*。在内部我正在改变它的状态，所以当**下载**完成或取消时，*isActive*设置为**NO**并且 while 循环应该结束。

如果我开始**下载**并让它完成（在后台，**NSURLConnection**完成并调用委托 - *connectionDidFinish* ...） ，这将起作用

如果我*暂停/恢复* **Download**，下载将继续下载并完成（并更改其内部状态：*isActive* -> **NO**）。暂停时我取消**NSURLConnection**并在恢复时创建新的。

或者如果我*取消*下载，它也将处于非活动状态（**NSURLConnection**被取消）。

但问题是：

`[[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:distantFuture];`在这些情况下永远不会返回（当我取消**NSURLConnection**时）并且我的“ *if* ”语句永远不会被处理，所以这个**DownloadOperation**总是被认为正在运行并且永远不会退出我的**NSOperationQueue**。

看起来没有可以触发的事件会导致 runloop 唤醒。

我试过

```
 [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate dateWithTimeIntervalSinceNow:0.05]]; 
```

这种工作但不是那么顺利，我认为这不是最好的解决方案。

我真正想知道的是，如何强制**NSRunLoop**唤醒（如何触发一些会导致它唤醒的事件）并继续我的 while 循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T05:51:03.863

这就是我所做的。

好消息是我的应用程序中有通知，并且我确切地知道下载何时发生变化。所以我创建了一个实例变量`NSThread currentThread`，并在 main 的开头调用`currentThread = [NSThread currentThread]`.

在我收到我知道应该导致我的线程唤醒的通知后，我打电话给：

`[self performSelector:@selector(wakeUpThread:) onThread:currentThread withObject:nil waitUntilDone:NO];`

`- (void)wakeUpThread`什么都不做，它是空方法，但这样做的目的是唤醒线程并导致我的运行循环继续。**

# xml - SQL Server：验证 XML

> ID：12724440
> 
> 赞同：0
> 
> 时间：2012-10-04T09:40:19.467
> 
> 标签：xml, sql-server-2008, tsql, sql-server-2005, validation

我正在使用 SQL Server 2005 和 2008 并尝试将各种不同的 XML 文件导入到我的数据库中，有时 XML 无效。每个 XML 文件都与上一个不同。

有什么方法可以创建一个返回 0 或 1 的函数，具体取决于 XML 是否有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:50:57.940

试试这个：

```
try
 {
   XDocument xdfile = new XDocument();
   xdfile = XDocument.Load(your_filepath);
 }
 catch (XmlException exception)
 {
     ShowMessage("Invalid");
 } 
```

SQL 服务器：参考下面的链接

1.  [http://www.sqlteam.com/article/xml-validator](http://www.sqlteam.com/article/xml-validator)
2.  [http://blog.sqlauthority.com/2009/12/02/sql-server-validate-an-xml-document-in-tsql-using-xsd-by-jacob-sebastian/](http://blog.sqlauthority.com/2009/12/02/sql-server-validate-an-xml-document-in-tsql-using-xsd-by-jacob-sebastian/)

# azure - 如果我添加一个在 Windows Azure 上的部署失败

> ID：12724441
> 
> 赞同：0
> 
> 时间：2012-10-04T09:40:22.930
> 
> 标签：azure

我有一个 Azure 部署，已经运行了几个月。我多次更改并重新部署它，没有任何问题。

现在我正在尝试将第二个 Web 应用程序添加到同一部署中。[我关注了http://sanganakauthority.blogspot.ch/2012/02/hosting-multiple-virtual-applications.html](http://sanganakauthority.blogspot.ch/2012/02/hosting-multiple-virtual-applications.html)上的博客文章，其中描述了如何通过向`<VirtualDirectory ...>`服务定义添加标签来添加第二个 Web 应用程序：

```
<WebRole name="MyWebsite1">
  <Sites>
    <Site name="Web">
      <VirtualApplication name="MyWebsite2" physicalDirectory="..\..\WebProject2\WebProject2"></VirtualApplication>
    <Bindings>
    ... 
```

我这样做了，在 Azure 模拟器中，一切正常。我可以在以下位置访问第一个 Web 应用程序

```
http://127.0.0.2:81 
```

和新的，虚拟的

```
http://127.0.0.2:81/MyWebsite2 
```

但是当我部署到 Azure 时，在 Visual Studio 的 Azure 控制台中出现以下部署错误：

```
10:55:33 - Preparing deployment for {...} with Subscription ID: {...}...
10:55:33 - Connecting...
10:55:34 - Uploading Certificates...
10:56:08 - Verifying storage account '{...}'...
10:56:09 - Uploading Package...
11:00:04 - The HTTP request to 'https://management.core.windows.net/{...}/services/hostedservices/{...}?embed-detail=true' has exceeded the allotted timeout of 00:01:00\. The time allotted to this operation may have been a portion of a longer timeout.
11:00:04 - Deployment failed with a fatal error 
```

当我`<VirtualApplication>`从服务定义中删除标签时，部署又像以前一样工作了。

**我怎样才能找出这个错误的原因？该错误发生在实例启动之前，因此 RDP 没有帮助。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:08:28.383

没关系，当我创建第二个`<Site>`而不是`<VirtualApplication>`：

```
<WebRole name="MyWebsite1">
  <Sites>
    <Site name="Web">
      <Bindings>
      ...
    </Site>
    <Site name="MyWebsite2" physicalDirectory="..\..\WebProject2\WebProject2">
      <Bindings>
      ...
    </Site>
  </Sites>
  ... 
```

# jquery - JQuery用大量数据填充选项标签会导致浏览器崩溃

> ID：12724446
> 
> 赞同：0
> 
> 时间：2012-10-04T09:40:34.420
> 
> 标签：jquery, html, crash, generated-code

当我使用以下代码时

```
var html = "";
$.map(data.modelTypes, function (item) {
    html+= "<option>" + item.type + "</option>";
});
$("#drowdown").html(html); 
```

有太多的 HTML 我的 javascript 必须添加到 $("#dropdown") 元素它会使任何浏览器崩溃几秒钟，最后它可以正常工作并填满下拉列表但无论如何让我的浏览器不会崩溃？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:46:39.770

不要连接必须解析的巨大字符串，创建实际元素并放入选择中：

```
var options = $.map(data.modelTypes, function (item) {
  return $('<option>', { text: item.type })[0];
});
$("#drowdown").empty().append(options); 
```

注意：您使用的是`map`as 方法，您应该在函数中返回值，然后您将获得从该方法`each`返回的值的数组。`map`

### 编辑：

一些测试表明，使用更普通的 Javascript 而不是使用 jQuery 来循环和创建元素可以使其速度提高一倍：

```
var options = [];
for (var i =0; i < data.modelTypes.length; i++) {
  var o = document.createElement('OPTION');
  o.text = data.modelTypes[i].type;
  options.push(o);
}
$("#drowdown").empty().append(options); 
```

在我的 Firefox 计算机上，这会在一秒钟左右添加 1000000 个选项元素。

无论如何，如果你有这么多选择，你可能应该重新考虑 UI ......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:49:49.653

[javascript 中使用 StringBuffer 代替字符串连接](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/72429b15-73e2-4b4e-9288-9e1dfd47858b/)

[Javascript中的字符串连接与字符串缓冲区](https://stackoverflow.com/questions/1370830/string-concatenation-vs-string-buffers-in-javascript)

字符串连接是非常慢的操作。您必须使用字符串缓冲区。

```
function StringBuffer() {
this.__strings__ = new Array;
}

StringBuffer.prototype.append = function (str) {
    this.__strings__.push(str);
};

StringBuffer.prototype.toString = function () {
    return this.__strings__.join("");
};

StringBuffer.prototype.empty = function(){
    this.__strings__.length = 0;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:52:01.777

不确定这是否会为您加快速度，但为什么不直接附加到下拉列表中呢？

```
$.each(data.modelTypes, function(i, value) {
        $('#drowdown').append($('<option>').text(value).attr('value', value)); 
```

由于在您的情况下您有大量项目，您可能需要考虑使用 DocumentFragment。类似的东西：

```
var dropdown= $("#drowdown").empty();

var frag = document.createDocumentFragment();
data.modelTypes.each( function(item) {
    frag.appendChild($('<option>').text(item).attr('value', item));
});

dropdown.append(frag); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T10:33:28.963

首先是 $.map 的使用。与来自 JS 的 for 相比，它的性能有所不同。另一件事是 .html 的使用。推荐，但是如果你有很多数据，浏览器JS解释器会阻塞几秒钟。为什么不使用 append 在循环中一次添加一个选项？

```
for (i = 0; i < data.modelTypes.length; i++) {
  $("#drowdown").append("<option>"+data.modelTypes[i].type+"</option>")); 
} 
```

这有点伪代码，不知道它是否编译，但这是我的两分钱。除此之外，HTML 结构的动态更改总是很繁重，但是您可以通过依赖字符串而不是 JS vars 或 jquery 对象来缓解这种情况。

# java - 正则表达式模式问题

> ID：12724452
> 
> 赞同：0
> 
> 时间：2012-10-04T09:40:49.967
> 
> 标签：java, regex

我有以下字符串：

```
!date +10 (yyyy-MM-dd'T'HH:mm:ssz) 
```

这个字符串也可以是（注意减号而不是加号。：

```
!date -10 (yyyy-MM-dd'T'HH:mm:ssz) 
```

我需要一个正则表达式模式来提取+（或-）之后的数字。可能不止一位。

我还需要一个模式来提取括号 () 的内容；

我玩过正则表达式朋友。但无法获得工作模式。

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T09:50:12.777

要选择数字和括号内容，您可以执行以下操作：

```
String str = "date +10 (yyyy-MM-dd'T'HH:mm:ssz)";
Matcher m = Pattern.compile(".*[+|-](\\d+).*\\((.*)\\).*").matcher(str);
if (m.matches()) {
    System.out.println(m.group(1));
    System.out.println(m.group(2));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:46:04.813

此正则表达式应分别为您提供与 +/- 之后的数字以及第一个和第二个捕获组中括号内容的匹配：

```
"!date\\s[+-](\\d+)\\s\\(([^)]*)\\)" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:49:34.910

以下正则表达式导致 2 个包含您想要的内容的捕获组

```
"!date\\s[+-](\\d+)\\s\\((\\d{4}-\\d{2}-\\d{2}'T'\\d{2}:\\d{2}:\\d{2}z)\\)" 
```

# asp.net - IIS URL 重写：添加尾部斜杠，.html 和 .aspx 除外

> ID：12724455
> 
> 赞同：21
> 
> 时间：2012-10-04T09:40:53.753
> 
> 标签：asp.net, iis, url-rewriting, url-rewrite-module

通过 IIS URL 重写模块向所有 URL 添加尾部斜杠已广泛传播，但是如何**为以 .html 和 .aspx 结尾的 URL 添加例外**？

今天我有这个：

```
<rule name="Add trailing slash" stopProcessing="true">
  <match url="(.*[^/])$" />
  <conditions>
    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    <!-- Doesn't seem to be working -->
    <!--<add input="{REQUEST_URI}" pattern="(.*?).html$" negate="true" />-->
    <!--<add input="{REQUEST_URI}" pattern="(.*?).aspx$" negate="true" />-->
  </conditions>
  <action type="Redirect" redirectType="Permanent" url="{R:1}/" />
</rule> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-15T10:08:24.317

如果你想把事情做好，你必须自己做，很明显......

这是我的问题的解决方案：

```
<rule name="Add trailing slash" stopProcessing="true">
  <match url="(.*[^/])$" />
  <conditions>
    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    <add input="{REQUEST_FILENAME}" pattern="(.*?)\.html$" negate="true" />
    <add input="{REQUEST_FILENAME}" pattern="(.*?)\.aspx$" negate="true" />
  </conditions>
  <action type="Redirect" redirectType="Permanent" url="{R:1}/" />
</rule> 
```

**更新**：[我在博客上对此进行了更详细的介绍](http://sebnilsson.com/c985a7fd/iis-url-rewrite-rules-skipping-files-types/)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-07-10T23:56:41.887

改变其他答案，我使用了这个，所以我不必指定文件扩展名列表：

```
<!-- Ensure trailing slash -->
<rule name="Add trailing slash" stopProcessing="true">
  <match url="(.*[^/])$" />
  <conditions>
    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    <add input="{REQUEST_FILENAME}" pattern="(.*?)\.[a-zA-Z]{1,4}$" negate="true" />
  </conditions>
  <action type="Redirect" redirectType="Permanent" url="{R:1}/" />
</rule> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-12T18:21:02.717

我们像这样添加多个扩展：

```
<add input="{URL}" negate="true" pattern="((.+).(jpg|ico|gif|js|png|htm|css|html))" ignoreCase="true" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-14T19:06:07.990

为了防止所有文件都添加斜线，我将匹配规则更改为：

```
<match url="^([^.]*[^/])$" /> 
```

这仅适用于包含不以斜杠结尾的任意数量的非点字符的路径。因此，任何包含点的路径（例如 xxx.html、xxx.aspx 等）都将被排除在外，而无需任何额外的否定规则。

查找匹配规则中是否存在点允许我完全删除使用匹配类型 IsFile 和 IsDirectory 的条件规则。这些匹配类型只允许在分布式规则 (web.config) 中，而不是在全局规则 (applicationHost.config) 中，因此我被迫为每个站点复制此规则，而不是使用全局规则将其应用于所有站点。通过修改匹配规则中的正则表达式以排除文件并删除 IsFile 和 IsDirectory 条件，我能够创建一个全局规则，而不是拥有多个分布式规则。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-09T05:55:50.650

```
 <conditions>
                <add input="{URL}" pattern="(.*)\.(.*)[a-z]$" negate="true" />
                <add input="{URL}" pattern="(.*)\.(.*)[0-9]$" negate="true" />
            </conditions> 
```

.html 和 .aspx 和 .woff2 除外

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T13:30:52.963

这几乎对我有用。我不得不把它改成

```
<add input="{URL}" pattern="(.*?)\.html$" negate="true" />
<add input="{URL}" pattern="(.*?)\.aspx$" negate="true" /> 
```

否则，谢谢！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-28T11:23:12.690

为了防止 POST、DELETE 和其他没有尾部斜杠的 REST 方法调用通过重定向错误地变为 GET 请求，请考虑添加以下条件：

```
<add input="{REQUEST_METHOD}" matchType="Pattern" pattern="GET" ignoreCase="true" /> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-10T13:35:40.750

你可以试试这个：

```
 <conditions>
            <add input="{URL}" pattern="(.*)\.(.*)$" negate="true" />
        </conditions> 
```

# android - 操作栏行为

> ID：12724458
> 
> 赞同：0
> 
> 时间：2012-10-04T09:40:56.053
> 
> 标签：android, android-actionbar

我知道有很多关于操作栏的问题。并且可能是我的问题不需要代码示例，但这纯粹是编码的东西。

android 如何决定在操作栏中它需要显示 TABS 或列表。我的问题严格针对 android 4.0 及更高版本，无论是智能手机还是平板电脑。有什么方法可以让我们发现设备将在操作栏中显示 Spinner 或选项卡。当我将我的应用程序部署到 Google nexus 和三星 Tab2 时，我的问题出现了。在选项卡中，我在纵向模式下将操作栏作为列表，在横向模式下作为选项卡。虽然我在 Google Nexus 中观察到相反的情况。*注意*当我将导航模式设置为选项卡时会发生这种情况`actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);`

我的问题很简单直接，Android 如何决定在操作栏中显示 List 或 Tab。？以及开发人员如何检查是否会显示列表模式或选项卡将显示在操作栏中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:04:32.970

我可以假设并发现android本身会检查紧凑模式并相应地显示微调器和标签。不是一个令人满意的答案，但我没有其他要思考和找到的东西。任何具有更好解释的答案都是可以接受和欢迎的。

如果`actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);`设置后 4.0 android 将检查是否有足够的空间来显示选项卡。如果不是，则将选项卡传输到微调器（作为下拉菜单）。

# c# - 在这种情况下，如何以及在哪里有效地存储和检索每秒的数据？

> ID：12724459
> 
> 赞同：-1
> 
> 时间：2012-10-04T09:40:55.177
> 
> 标签：c#, sql-server, read-write

嗨专家 :) 我正在使用 wpf 和 sql server

问题1：创建了大量数据并且必须每秒保存到db，但同时程序的多个部分写入同一个表。每秒保存到数据库效率不高，因为数据库方法很昂贵，您的专家不同意还是我该怎么办？不确定最好的做法是什么，xml 或文本文件什么时候会更有用？

问题 2：我必须从问题 1 保存到的表中检索数据库中的数据，以便在实时图表上显示。这会导致读/写问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:47:41.247

1.  一个接一个地加载大量数据`inserts`并不是一个好主意。尝试查看[SqlBulkCopy](http://msdn.microsoft.com/it-it/library/system.data.sqlclient.sqlbulkcopy%28VS.80%29.aspx)

2.  数据库可以很好地处理并发性，您可以将写入隔离在适当的事务中，以便在完成写入时仅查看数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:45:52.393

1 你可以使用`Caching`为了持久化你的数据，你可以用`Cache`类保存

链接：http: [//msdn.microsoft.com/en-us/library/system.web.caching.cache.add.aspx](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.add.aspx)

2 您对第二种情况没有问题，您可以使用 Transaction 以确保您获得提交的数据。

链接：http: [//msdn.microsoft.com/en-us/library/system.transactions.transaction.aspx](http://msdn.microsoft.com/en-us/library/system.transactions.transaction.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:45:59.850

考虑到你有时间限制，你必须在 1 秒内以某种方式*处理*数据。

我会建议：

**问题 1**：将您生成的数据保存在*注入*到`Stack<..>`. 从另一个线程进程将*块*`Stack<..>`保存到数据库之后，直到不为空。由于*没有任何保证*您可以在 1 秒内将数据保存在内存中之后。*`Stack<..>`*

 ****问题 2**：已经在内存中，您可以获得最大可能的性能，保持在可接受的分配内存限制内。

在这里很难提出真正实用的建议，因为性能*始终*是严格特定于领域的，不能用简短的问题完全描述。但是解决方案，可以作为一个基本的指导方针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T10:12:30.757

另一种选择是拆分表。

您的其他功能是否仅写入记录字段的子集。

因此，您在两个表之间有一个 1 对 1 的映射，一个用于初始数据，另一个用于 functionA。取决于您对后端需求的分区程度，但它可以显着减少冲突。

基本思想是让您的表格更像对象。所以你有一个基表，那么如果它是一个类型 1 的东西，你添加一个 1 对 1 链接到相关表。类型 1 周围的业务功能只需要写入该表，而不需要写入实体表。

反正有可能。**

# java - 脚本 bash 或 java 代码在我的文件夹的每个文件 html 中删除一个标签

> ID：12724460
> 
> 赞同：0
> 
> 时间：2012-10-04T09:41:02.027
> 
> 标签：java, bash

嗨，伙计，我的文件夹中有很多文件 html 相等（唯一的区别是字符串）。我想在我文件夹的每个文件 html 中删除一个标签。我的文件 html 的示例：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <title>P0001 Generic DTC: Fuel Volume Regulator Control Circuit/Open</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="P0001 diagnostic trouble code details." />
    <meta name="keywords" content="P0001, obd code, obd codes, diagnostic codes, trouble codes, diagnostic trouble codes, ford, gm, toyota, chrysler, dodge, nissan, chevy, dtc, dtcs, engine code, engine codes, check engine light" />
    <link rel="stylesheet" type="text/css" href="/static/css/base.css"/>
    <link rel="shortcut icon" href="/static/img/favicon.ico" />

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-1196991-3']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body  class="results one">
    <div id="main">
      <div id="header">
        <div id="logo"><a href="/">DTCSearch.com</a></div>
        <form action="/" method="post">
          <p>
            <input type="text" id="query" name="query" value="P0001"/>
            <input type="submit" id="submit" value=""/>
          </p>

        </form>
      </div>
      <div id="content">

<h1>P0001 OBD Trouble Code</h1>
<p>1 result found</p>

<div id="content-body">

  <table cellspacing="0" class="one">
    <caption>P0001 - Generic</caption>
    <tr>
      <th>Type</th>
      <td>Powertrain - Fuel and Air Metering - ISO/SAE Controlled</td>
    </tr>
    <tr>
      <th>Description</th>
      <td><p>Fuel Volume Regulator Control Circuit/Open</p></td>
    </tr>

  </table>

  <p style="font-weight:bold">Try also: <a href="http://www.obd-codes.com/p0001" target="_blank">http://www.obd-codes.com/p0001</a></p>
</div>

      </div>
      <div id="footer">
   <div id="footer_banner">

<a href="http://affiliates.eautorepair.net/z/15/CD65/&dp=84"><img src="http://affiliates.eautorepair.net/42/65/15/&dp=84" alt="Do it Yourself Automobile Repair Information" border="0"></a>

   </div>
        <p>Copyright &copy; 2008&ndash;2012 DTCSearch.com<br/>
        DTCSearch.com is hosted by <a href="http://www.scantool.net">ScanTool.net, LLC</a></p>
      </div>
    </div>
  </body>
</html>` 
```

我想在每个文件中删除这个标签：

```
<a href="http://affiliates.eautorepair.net/z/15/CD65/&dp=84"><img src="http://affiliates.eautorepair.net/42/65/15/&dp=84" alt="Do it Yourself Automobile Repair Information" border="0"></a> 
```

这是怎么做的？告诉我使用 java 或 bash 或其他技术的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:58:30.903

您可以使用`sed`从文件中删除一行。

例如，命令：

```
sed '/foo/d' myfile 
```

将删除所有包含单词`foo`from的行`myfile`。

如果您有多个文件，您可以运行：

```
sed -i '/foo/d' *.html 
```

该`-i`选项告诉`sed`就地编辑文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:14:39.320

我用了：

```
sed -i 's#<a href="http://affiliates.eautorepair.net/z/15/CD65/&dp=84"><img src="http://affiliates.eautorepair.net/42/65/15/&dp=84" alt="Do it Yourself Automobile Repair Information" border="0"></a>##g' * 
```

现在我有一个更严重的问题。我想删除

```
<p>
            <input type="text" id="query" name="query" value="XXXXX"/>
            <input type="submit" id="submit" value=""/>
          </p> 
```

其中 xxxxx 在每个文件中都有 5 个不同的字符。怎么办？

# progress-4gl - Progress 4gl 中 if 语句的奇怪行为

> ID：12724464
> 
> 赞同：2
> 
> 时间：2012-10-04T09:41:23.203
> 
> 标签：progress-4gl, openedge

我注意到 Progress 4gl 中的 IF 语句有一个非常奇怪的行为。

我定义了一个格式为“999”的整数，它告诉它有 3 位数字，然后我分配一个小于 100 的值（例如 12），然后当我显示它时，它应该显示为“012”。

但是当我在 DISPLAY 语句中添加一个实际上不应该做任何事情的 IF 语句时，变量显示为“12”。

这是清除差异的测试代码。LABEL 不影响变量的输出。

```
DEF VAR tmp AS INTEGER FORMAT "999".
ASSIGN tmp = 12.

DISPLAY 
    tmp LABEL "disp1".

DISPLAY
    IF TRUE THEN tmp ELSE tmp LABEL "disp2". 
```

通过将格式更改为“>99”也可以实现相同的行为。

我的问题是：为什么 IF 语句会改变变量的显示方式？

最好的问候 //MrBucket

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T10:38:58.593

您的第二个示例类似于：

```
define variable tmp1 as integer no-undo format "999".
define variable tmp2 as integer no-undo format "99999".

display
  if true then tmp1 else tmp2
. 
```

编译器看到 IF 函数返回一个整数并应用整数的默认格式。编译器不会尝试再次猜测您并注意到（在您的示例中）两个结果都是同一个变量。

（在这种情况下，IF 是嵌入在 DISPLAY 中的函数——不是它自己的独立语句。）

要获得您正在寻找的结果：

```
display
  ( if true then tmp1 else tmp2 ) format "999"
. 
```

每当我嵌入一个 IF 函数时，我都会把它放在括号中——这有助于清楚地表明它是嵌入的，并清楚地显示了诸如 FORMAT 短语之类的东西适用的地方。

# java - 尝试使用 microsoft translate API 进行翻译时出现 unkownHostException

> ID：12724467
> 
> 赞同：2
> 
> 时间：2012-10-04T09:41:32.213
> 
> 标签：java, html, api, exception, translation

我正在编写一个简单的程序来将输入的韩文文本翻译成英文我正在使用 microsoft-translator-java-api-0.6.1-jar 进行翻译。甚至用谷歌翻译 API 尝试过，并得到同样的问题，即 unkownHostException

这是post方法的servlet代码

```
 String koreanText=request.getParameter("koreanText");

    System.out.println(koreanText);
    System.setProperty("http.proxyHost", "proxy");
    System.setProperty("http.proxyPort", "8080");
    Translate.setClientId("client id");
    Translate.setClientSecret("client secret");

   System.out.println(Language.KOREAN);
   System.out.println(koreanText);
try {
    **String translatedText = Translate.execute(koreanText, Language.KOREAN, Language.ENGLISH)**;

    System.out.println(translatedText);

} catch (Exception e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

出现异常的地方是**标记的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:29:43.737

我假设您已将代理系统属性放在那里，因为您需要通过代理来访问外部 Web 服务？通过从 java 代码中的 URL 读取一些字节来检查它是否工作。

# hadoop - 如何增加 Mahout MatrixMultiplicationJob 中的映射器数量？

> ID：12724468
> 
> 赞同：2
> 
> 时间：2012-10-04T09:41:32.177
> 
> 标签：hadoop, matrix, mapreduce, mahout, multiplication

我正在使用 Mahout 0.7`MatrixMultiplicationJob`来乘以一个大矩阵。但它总是使用 1 个地图任务，这使得它变慢了。这可能是由于`InputSplit`这迫使映射器的数量为 1。

有没有一种方法可以有效地将 Hadoop / Mahout 中的矩阵相乘或更改映射器的数量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:39:19.017

最终，决定使用多少映射器的是 Hadoop。通常，每个 HDFS 块（通常为 64 或 128MB）使用一个映射器。如果您的数据小于该数据，那么它太小而无法使用超过 1 个映射器。

`mapred.max.split.size`您可以通过设置小于 64MB来鼓励它使用更多（记住该值以字节为单位，而不是 MB）。但是，你确定要吗？更常见的是需要更多的 reducer，而不是 mapper，因为 Hadoop 永远不会使用超过 1 个，除非你（或你的工作）告诉它。

*还要知道 Hadoop 将无法在单个压缩*文件上使用多个映射器。因此，如果您的输入是一个巨大的压缩文件，它只会在该文件上使用 1 个映射器。但是，您可以自己将其拆分为许多较小的压缩文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:15:32.053

您是否尝试通过带有`-Dmapred.map.tasks=N`选项的命令行指定映射器的数量？我没有尝试过，但它应该可以工作。如果不行，那就尝试在`MAHOUT_OPTS`环境变量中设置这个参数...

# iphone - iphone中的有限状态机

> ID：12724469
> 
> 赞同：1
> 
> 时间：2012-10-04T09:41:36.900
> 
> 标签：iphone, ios5, ios6, nsxmlparser, state-machine

我想将应用程序开发为基于状态机的概念，但我不了解状态机方法。我有以下代码作为 xml 格式如何解析这个或任何可用的教程

```
<scxml initial="idle" name="atm.connRestored" version="0.9" xmlns="http://www.w3.org/2005/07/scxml">
<state id="idle">  
<transition event="atm.connected" target="loading"></transition>
</state>
<state id="loading">
    <transition event="atm.loadSuccess" target="inService"></transition>
    <transition event="atm.connClosed" target="disconnected"></transition>
    <transition event="atm.loadFail" target="outOfService"></transition>
</state>
<state id="inService"> 
   <transition event="atm.shutdown" target="outOfService"</transition>
   <transition event="atm.connLost" target="disconnected"></transition>
</state>
<state id="outOfService">
   <transition event="atm.startup" target="inService"></transition>
   <transition event="atm.connLost" target="disconnected"></transition>
</state>
<state id="disconnected">
   <transition event="atm.connRestored" target="inService"></transition>
</state>
</scxml> 
```

# java - 数字字符引用的 JSoup 编码问题

> ID：12724470
> 
> 赞同：2
> 
> 时间：2012-10-04T09:41:38.043
> 
> 标签：java, character-encoding, jsoup

我们正在执行以下操作：

1.  使用某些指定的编码打开文件的阅读器。
2.  读入每一行，将其解析为 CSV。
3.  对于 CSV 数据中的某些列，将其传递给 JSoup 以清除 HTML，如下所示：

    ```
    public String apply(@Nullable String input) {
        Document document = Jsoup.parse(input);

        return document.text();
    } 
    ```

这很好用，除非存在[数字字符引用](http://en.wikipedia.org/wiki/Numeric_character_reference)，例如`&#160;`. 似乎正在发生的事情是，由于我们必须在弄清楚编码之后进行 JSoup 调用（以使 CSV 解析工作），当 JSoup 开始将硬编码字节转换为字符时，我们正在工作使用错误的字符集。字节 160 (0xa0) 是 windows-1252 中的不间断空格，但不是有效的 Unicode 字符，因此当 JSoup 将数字字符引用替换为字节时，会给我们带来错误的数据。

有没有解决的办法？它需要为 JSoup 提供数字字符引用的“源编码”，或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:52:35.177

尝试调用以下之前`text()`：

```
document.outputSettings().charset("windows-1252"); 
```

有关更多输出设置，请参阅[javadoc](http://jsoup.org/apidocs/org/jsoup/nodes/Document.OutputSettings.html)。

# c++ - Windows/C++：带有 GetExceptionCode() 的 FormatMessage() 忽略 FORMAT_MESSAGE_IGNORE_INSERTS

> ID：12724473
> 
> 赞同：3
> 
> 时间：2012-10-04T09:41:42.777
> 
> 标签：c++, windows, exception, formatmessage

我想使用类似于以下的代码来报告被零除、访问冲突等。我的问题是，尽管设置了 flag `FORMAT_MESSAGE_IGNORE_INSERTS`，但消息在插入位置被截断。

```
__try
{
    int *p=0;
    int i = *p; // access violation
}
__except (EXCEPTION_EXECUTE_HANDLER)
{
    char  message[1024];
    FormatMessageA(
        FORMAT_MESSAGE_FROM_HMODULE | FORMAT_MESSAGE_IGNORE_INSERTS,
        GetModuleHandleA("NTDLL.DLL"),
        GetExceptionCode(),
        MAKELANGID(LANG_NEUTRAL, SUBLANG_NEUTRAL),
        message, 
        sizeof (message), 
        0);
    OutputDebugStringA(message);
} 
```

上面的代码`"The instruction at 0x"`在调试输出中产生，这并不是很有帮助。

难道我做错了什么？

# python - 如何解决此错误 googleApp 引擎错误 10054

> ID：12724475
> 
> 赞同：1
> 
> 时间：2012-10-04T09:41:56.060
> 
> 标签：python, google-app-engine, networking, webserver, localhost

我在我的服务器上使用谷歌应用引擎（听 --address=0.0.0.0 所有网络）我的应用程序在短时间内纠正（我得到一些用户输入，一些进程，显示数据并插入 mysql db）在我出现这个错误之后消息和网络浏览器没有显示任何内容，我的系统：谷歌应用引擎，python 2.7，mysql（通过 rdbms）我更改端口（8080,8091,8090vs ...）或重新启动应用引擎，我的应用再次工作，但然后再次出现相同的错误消息

```
Traceback (most recent call last):
  File "C:\Python27\lib\SocketServer.py", line 284, in _handle_request_noblock
    self.process_request(request, client_address)
  File "C:\Python27\lib\SocketServer.py", line 310, in process_request
    self.finish_request(request, client_address)
  File "C:\Python27\lib\SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 2734, in __init__
    BaseHTTPServer.BaseHTTPRequestHandler.__init__(self, *args, **kwargs)
  File "C:\Python27\lib\SocketServer.py", line 639, in __init__
    self.handle()
  File "C:\Python27\lib\BaseHTTPServer.py", line 343, in handle
    self.handle_one_request()
  File "C:\Python27\lib\BaseHTTPServer.py", line 313, in handle_one_request
    self.raw_requestline = self.rfile.readline(65537)
  File "C:\Python27\lib\socket.py", line 476, in readline
    data = self._sock.recv(self._rbufsize)
error: [Errno 10054] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:56:17.963

尝试切换到更严肃的网络框架，而不是基于玩具 HTTP 服务器（BaseHTTPServer 是玩具 HTTP 服务器）。

10054 是 Windows 错误 ECONNRESET。这表明您的 HTTP 服务器尝试读取的连接已关闭。这不完全是错误情况 - 连接被关闭，这是它们生命周期的正常部分 - 但您使用的 Google AppEngine（开发！）服务器似乎将其视为错误。也许这样做最终也会错误地响应其他请求。

一个正确的 HTTP 服务器处理这种情况不会有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:25:38.267

AppEngine 开发服务器确实非常有限（单线程，仅限 HTTP 1.0，对连接重置不可靠），但它是在本地开发中模拟的唯一选择。环境 生产服务器的行为，包括 AppEngine 服务的存根和某些模块（包括`os`和`socket`）的沙盒。

在 Google 为我们提供更强大的替代方案之前，我在`handle_one_request`方法中为预期的套接字错误添加了异常处理程序`BaseHTTPServer.py`（位于`Lib`Python 安装目录的子目录中）

```
[end of BaseHTTPServer.py::handle_one_request() - Python 2.7]
  except socket.error as socket_error:
    import errno
    if socket_error.errno in (errno.ECONNABORTED, errno.WSAECONNABORTED, errno.ECONNRESET, errno.WSAECONNRESET):      
      pass
    else:
      raise 
```

`ECONNABORTED`/`WSAECONNABORTED`发生在远程断开连接 - 有关详细信息，请参阅[Python 问题 14574](http://bugs.python.org/issue14574)。

# asp.net - 如何在 asp.net 图像控件中显示 mysql blob 图像？

> ID：12724476
> 
> 赞同：2
> 
> 时间：2012-10-04T09:42:05.607
> 
> 标签：asp.net, mysql, image, blob

我知道在 Windows 窗体中显示 mysql blob 图像的方法。

```
try
            {
                MySqlConnection connection = new MySqlConnection(hp.myConnStr);
                MySqlCommand command = connection.CreateCommand();
                MySqlDataReader Reader;
                command.CommandText = "select logo from mcs_institude where id = 1";
                connection.Open();
                Reader = command.ExecuteReader();
                while (Reader.Read())
                {
                    pictureBox1.Image = new Bitmap(new MemoryStream((byte[])Reader.GetValue(0)));
                }
                connection.Close();
            }
            catch(Exception ex)
            {
                MessageBox.Show("Error in Get_ImageFormDB"+ ex.Message, "Information", MessageBoxButtons.OK, MessageBoxIcon.Information);
            } 
```

但现在我在做一个 asp.net 项目。在这个图像中没有图像属性，。

```
command = connection.CreateCommand();
            command.CommandText = "Select FO_Roomdet_Image from fo_roomtype where FO_Roomdet_Id=1";
            connection.Open();
            Reader = command.ExecuteReader();
            while (Reader.Read())
            {
                Image1.ImageUrl  = new MemoryStream((byte[])Reader.GetValue(0));                                    
            }
            connection.Close(); 
```

当我在 asp.net 中尝试这个时，它通过一个错误。

> 错误 1 ​​无法将类型“System.IO.MemoryStream”隐式转换为“字符串”

我该如何解决这个问题。并获取 mysql blob 图像只显示在 asp.net 图像控件中。

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:06:54.630

您尝试做的事情没有意义：尝试显示您的图像的浏览器将需要知道从哪里下载它。

您应该设置一个专用于图像生成的特殊 aspx 页面，例如 GetImage.aspx。

然后，您的主页将具有指向此图像生成页面的 img html 标记：

```
<img src="/GetImage.aspx?id=your_image_id"/> 
```

然后，在 GetImage.aspx 中，您根据其 id（从 URL 参数获取）从 DB 中检索图像。代码将类似于：

```
command = connection.CreateCommand();
        command.CommandText = "Select FO_Roomdet_Image from fo_roomtype where FO_Roomdet_Id=1"; // or dynamically fetch id with Request.QueryString and properly escape it
        connection.Open();
        Reader = command.ExecuteReader();
        while (Reader.Read())
        {

            Response.ContentType = "image/jpeg"; // if your image is a jpeg of course
            Response.BinaryWrite((byte[])Reader.GetValue(0));                                 
        }
        connection.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-03T18:12:15.020

好吧，这绝对不是最简单的答案。每次使用时，您不需要创建额外的 aspx 文件来生成和重新生成图像。

您实际上可以通过它的字节数组将图像文件嵌入到 html 标记语言中。

您需要做的就是从数据库中获取 BLOB 字节数组并使用它：

```
<img src="data:image/png;base64,<%= System.Convert.ToBase64String((byte[])dr["img"])%>" /> 
```

...其中 dr 是从 DataSet 对象获得的 DataRow。

我已经在 Internet Explorer 8 和所有现代浏览器中对其进行了测试，并且可以正常工作。

# c# - 将双引号从 VB 转换为 C# 的问题

> ID：12724479
> 
> 赞同：1
> 
> 时间：2012-10-04T09:42:18.620
> 
> 标签：c#, vb.net

我正在尝试将下面的 VB 代码转换为 C#.Net 但在替换`""""c`时遇到问题`""`

什么是`""""c`在 vb.

```
Dim strDeviceName As String = mo("Dependent").ToString.Replace(""""c, "") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:32:11.490

> vb中的“”“”c是什么？

`""""c`表示VB中的双引号字符。在字符串文字中，您必须编写两个双引号字符来表示一个双引号。第一个和最后一个双引号分隔字符串的开始和结束，`c`字符表示它应该被解释为 Character 对象而不是 String 对象。

在 C# 中，翻译是：

```
string strDeviceName = mo("Dependent").ToString.Replace('"', ""); 
```

在 C# 中，字符由单引号分隔，因此您不必转义双引号！

# java - 类似于 stackoverflow 的 jQuery 工具提示

> ID：12724480
> 
> 赞同：-3
> 
> 时间：2012-10-04T09:42:18.727
> 
> 标签：java, javascript, jquery

我想使用这种风格的工具提示（stackoverflow 焦点评论表单），我该如何实现？我们有没有类似的例子。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:44:14.653

您可以查看[jQuery 工具提示插件](http://jquery.bassistance.de/tooltip/demo/)。

# mysql - mysql中的特殊字符

> ID：12724486
> 
> 赞同：0
> 
> 时间：2012-10-04T09:42:46.403
> 
> 标签：mysql

我有一个 mysql DB 包含阿拉伯数据。通过 mysql 工作台打开数据库时，数据看起来像“ßÇÙã ÇáÌãÇÓí”。

当制作一个从数据库读取的简单 php 文件时，数据看起来很好（阿拉伯语）。

但是当通过 ASP.net 读取数据时，数据看起来像“ßÇÙã ÇáÌãÇÓí”。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:10:53.863

在从 ASP.net 应用程序运行 SELECT 查询之前，请尝试在连接到数据库后运行两个查询：

```
SET CHARACTER SET 'utf8'; 
SET NAMES utf8; 
```

基本上，您需要让您的应用了解可能的国际字符。

PS 这应该在每次建立连接时再次运行，例如，您不能从 MySQL 工作台运行一次并修复您的应用程序。您的应用程序需要自行完成。

# objective-c - 将自定义对象序列化为 PLIST

> ID：12724487
> 
> 赞同：0
> 
> 时间：2012-10-04T09:42:47.433
> 
> 标签：objective-c, ios, serialization, plist, nscoding

我希望能够获取一个对象并将其所有属性写入 PLIST。我到目前为止：

```
// Get the properties of the parent class
NSMutableArray *contentViewPropertyNames = [self propertyNamesOfObject:[contentView superclass]];

// Add the properties of the content view class
[contentViewPropertyNames addObjectsFromArray:[self propertyNamesOfObject:contentView]];

// Get the values of the keys for both the parent class and the class itself
NSDictionary *keyValuesOfProperties = [contentView dictionaryWithValuesForKeys:contentViewPropertyNames];

// Write the dictionary to a PLIST
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *pathAndFileName = [documentsDirectory stringByAppendingPathComponent:[dataFileName stringByAppendingString:@".plist"]];

[keyValuesOfProperties writeToFile:pathAndFileName atomically:YES]; 
```

一切都很好，除了我不能将它写入 PLIST，因为它包含一些不符合 PLIST 的属性，因此`writeToFile:atomically:`失败并返回`NO`。

有没有一种好方法可以仅将那些可序列化为 PLIST 的属性序列化或修改我的对象的基类以使其工作？

我意识到我可以归档到二进制文件没有问题，`NSCoding`但是我需要能够在 MacOS 应用程序和 iOS 应用程序之间传输输出，因此需要通过中间的、平台独立的格式。

当然，如果我有请告诉我，我可能会完全忽略这一点，并且一如既往，任何帮助都是有用的。

此致

戴夫

附言

这是我获取对象属性名称的方法：

```
- (NSMutableArray *)propertyNamesOfObject:(id)object {
    NSMutableArray *propertyNames = nil;
    unsigned int count, i;
    objc_property_t *properties = class_copyPropertyList([object class], &count);

    if (count > 0) {
        propertyNames = [[[NSMutableArray alloc] init] autorelease];

        for(i = 0; i < count; i++) {
            objc_property_t property = properties[i];
            const char *propName = property_getName(property);
            if(propName) {
                NSString *propertyName = [NSString stringWithCString:propName encoding:NSUTF8StringEncoding];
                [propertyNames addObject:propertyName];
            }
        }
    }
    free(properties);

    return propertyNames;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:34:24.510

看看能不能在类似情况下应用我最近写的这个函数：

```
// Property list compatible types: NSString, NSData, NSArray, or NSDictionary */
- (BOOL)isPlistCompatibleDictionary:(NSDictionary *)dict {
    NSSet *plistClasses = [NSSet setWithObjects:[NSString class], [NSData class],
        [NSArray class], [NSDictionary class], [NSDate class], 
        [NSNumber class], nil];

    BOOL compatible = YES;
    NSArray *keys = [dict allKeys];
    for (id key in keys) {
        id obj = [dict objectForKey:key];
        if (![plistClasses containsObject:[obj class]]) {
            NSLog(@"not plist compatible: %@", [obj class]);
            compatible = NO;
            break;
        }
    }

    return compatible;
} 
```

# java - 在节点上运行时找不到类

> ID：12724492
> 
> 赞同：0
> 
> 时间：2012-10-04T09:43:00.230
> 
> 标签：java, cloudbees

我已经配置了一个从机在我的机器上运行，从机连接并被 Jenkins 识别。

我已将我的项目配置为使用该特定从属设备，并且我可以看到它在需要完成工作时开始运行。

过了一会儿，我收到以下错误：

```
[Android Tunneling] $ /opt/jdk/jdk1.7.0/bin/java -cp maven3-agent.jar:/opt/maven/apache-      maven-3.0.4/boot/plexus-classworlds-2.4.jar org.jvnet.hudson.maven3.agent.Maven3Main /opt/maven/apache-maven-3.0.4 /home/efi/Documents/jenkins/jenkins-cli.jar maven3-interceptor.jar 34176
Error: Could not find or load main class org.jvnet.hudson.maven3.agent.Maven3Main
ERROR: Failed to launch Maven. Exit code = 1 
```

通过终端在本地运行此命令时，我得到

```
Exception in thread "main" java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:337)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:198)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.<init>(Socket.java:425)
    at java.net.Socket.<init>(Socket.java:208)
    at org.jvnet.hudson.maven3.agent.Maven3Main.main(Maven3Main.java:128)
    at org.jvnet.hudson.maven3.agent.Maven3Main.main(Maven3Main.java:63) 
```

知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T09:01:19.807

命令行正在寻找要安装在 /opt/maven/apache-maven-3.0.4 上的 maven（cloudbees 从属服务器的默认位置）。如果您的本地设置与此不匹配，则需要覆盖此自定义从站的工具位置

# javascript - 将 JavaScript requestAnimFrame 移植到 TypeScript

> ID：12724495
> 
> 赞同：4
> 
> 时间：2012-10-04T09:43:10.023
> 
> 标签：javascript, porting, typescript

我目前正试图将此代码移植到 TypeScript。

```
if (typeof window !== 'undefined') {
  window.requestAnimFrame = (function(callback){
      return window.requestAnimationFrame ||
      window.webkitRequestAnimationFrame ||
      window.mozRequestAnimationFrame ||
      window.oRequestAnimationFrame ||
      window.msRequestAnimationFrame ||
      function(callback){
          window.setTimeout(callback, 1000 / 60, new Date().getTime());
      };
  })();
} 
```

我得到的 tsc 错误是：

> 提供的参数与调用目标的任何签名都不匹配

我试过声明一个`interface WindowEx extends Window`包含签名，然后转换为`(< WindowEx>window).xxx`，但我怀疑这是转换这个“典型”代码的正确方法。

一次尝试：

```
interface WindowEx extends Window {
  requestAnimFrame(callback, target?):number;
  webkitRequestAnimationFrame(callback, target?):number;
  mozRequestAnimationFrame(callback, target?):number;
  oRequestAnimationFrame(callback, target?):number;
  // msRequestAnimationFrame already at WindowAnimationTiming interface
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T16:12:40.387

这是我为编译您的代码所做的工作。我只是将其定义`requestAnimFrame()`为全局并键入它，以便 TypeScript 可以验证对它的调用。没有像`window`目前这样扩展内置类型的好方法，因此需要做类似`(<any>window).webkitRequestAnimationFrame`. 作为一般规则，如果编译器抱怨并且您知道它是有效的 JavaScript，您总是可以强制转换`<any>`以使其工作。

```
var requestAnimFrame: (callback: () => void) => void = (function(){ 
  return window.requestAnimationFrame || 
  (<any>window).webkitRequestAnimationFrame || 
  (<any>window).mozRequestAnimationFrame || 
  (<any>window).oRequestAnimationFrame || 
  window.msRequestAnimationFrame || 
  function(callback){ 
      window.setTimeout(callback, 1000 / 60, new Date().getTime()); 
  }; 
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:34:14.490

提供的参数与调用目标的签名不匹配的原因是因为您正在调用这样的函数：

```
(function(callback) { ... })(); 
```

也就是说，该函数接受`callback`但您没有传递一个。

您应该将`callback`其作为参数删除，因为您没有在函数的任何地方使用它。

# elf - 如何获取 ELF 存档文件中某个部分的实际位置？

> ID：12724501
> 
> 赞同：1
> 
> 时间：2012-10-04T09:43:25.403
> 
> 标签：elf, objdump, objcopy, carchive

我想从 Linux 中的 .a ELF 存档文件中提取二进制部分。

当我在存档文件上运行 objdump -h 时，它会列出它包含的目标文件以及每个部分的部分标题。但是，“文件偏移”列似乎与存档中的目标文件位置相关，否则它们将所有部分重叠。

我希望我可以使用 dd 从存档文件中提取二进制信息。（请参阅[如何仅提取 ELF 部分的内容](https://stackoverflow.com/questions/3925075/how-do-you-extract-only-the-contents-of-an-elf-section)）。我如何使用存档来做到这一点？

我还应该提到我正在提取的部分是用这个命令添加的：

```
echo "hi" > commentFile
objcopy libmylib.a --add-section .mysection=commentFile libmylib.a 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T15:43:10.980

> 文件偏移列似乎与存档中的目标文件位置相关

您从中获得的文件偏移量`objdump`是相对于单个目标文件的开头的。您可以将档案库视为书架，并将输出`objdump -h`视为每本书中的索引。您不会期望索引会根据书架上的其他书籍或您从书架上取书的时间而改变。同样，目标文件本身（以及 的输出`objdump -h`）在您放入库时不会改变，或者再次将其提取出来（您会得到位相同的副本）。

> 我希望我可以使用 dd 从存档文件中提取二进制信息

您*可以*使用`dd`，但您必须首先找到存档中每个单独对象文件的位置。这并不太难：UNIX 归档文件的格式已[记录在案](http://en.wikipedia.org/wiki/Ar_%28Unix%29)。但是格式可能会根据您使用的 UNIX 变体而改变，而且对于您要执行的任务来说，这并不是真正必要的。

> 我如何使用存档来做到这一点？

如果您知道`.mysection`所有对象文件中的内容相同`libmylib.a`（就像`objcopy --add-section`您给出的命令一样），则从存档中提取*一个*对象，然后提取该部分：

```
firstobj=$(ar t libmylib.a | grep '\.o$' | head -1)
ar x libmylib.a $firstobj
# use objdump -h and dd to extract section context.
# or use "readelf -p .mysection $firstobj
rm -f $firstobj 
```

如果`.mysection`不同目标文件的内容可能不同，将它们解压到一个临时目录：

```
mkdir tmp.$$ && cd tmp.$$ && ar x ../libmylib.a
for obj in $(find . -type f); do
  # extract .mysection from $obj
done
cd .. && rm -rf tmp.$$ 
```

# .net-4.5 - WIF 4.5 中的 FederatedPassiveSignIn 替换是什么

> ID：12724504
> 
> 赞同：2
> 
> 时间：2012-10-04T09:43:29.677
> 
> 标签：.net-4.5

从 MS 开始，WIF 4.5 不再支持 FederatedPassiveSignIn， http: [//msdn.microsoft.com/en-us/library/jj157091.aspx](http://msdn.microsoft.com/en-us/library/jj157091.aspx)。我想知道如何在 asp.net 页面上替换该控件以进行升级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T16:27:41.107

最近，我建立了一个替代品并发布到一个社区。它现在支持基本按钮样式和自动登录，我对错误提交和功能请求持开放态度。

[http://netpl.blogspot.com/2013/06/federatedpassivesignin-for-wif-and.html](http://netpl.blogspot.com/2013/06/federatedpassivesignin-for-wif-and.html)

# javascript - Aptana 3 和 dojo 1.8.0 结束标记问题

> ID：12724506
> 
> 赞同：1
> 
> 时间：2012-10-04T09:43:30.420
> 
> 标签：javascript, html, ide, dojo, aptana

我刚刚安装了 Aptana 3，创建了一个新的 Web 项目，并将[dojo 1.8 版的完整源代码复制到该项目中。](http://dojotoolkit.org/download/)

在完全刷新和构建之后，Aptana 似乎发现了大量的问题。其中一些是由于缺少结束标签，但经过快速检查，实际上是表格的内容。还有其他错误，有些是正确的，我将分别查看。

我不知道如何阻止 Aptana 报告这些问题，有人可以帮忙吗？

我已经阅读了以下帖子，但没有运气，后来给了我一个临时修复，但问题只有在项目清理后才出现：

[Aptana 3.1.3 中的 dojo 库语法错误](https://stackoverflow.com/questions/11145273/dojo-library-syntax-error-in-aptana-3-1-3)

[Aptana Studio 3.0.4：错误和警告卡在“问题”窗格中](https://stackoverflow.com/questions/7250705/aptana-studio-3-0-4-errors-and-warnings-stuck-in-problems-pane)

这是显示示例的代码片段：

```
 <tr>
                <td>
                    Y >=
                </td>
                <td>
                    <input data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="graphMinY" class="dojoxCalcGraphMinY" value="-10" />
                </td>

                <td>
Problem ==>         Y <=
                </td>
                <td>
                    <input data-dojo-type="dijit.form.TextBox" data-dojo-attach-point="graphMaxY" class="dojoxCalcGraphMaxY" value="10" />
                </td>
            </tr> 
```

我已经标记了仅报告一个问题的行，但您可以看到它显然只是表格内容。另外，这直接来自道场的网站，未经更改。

对于此特定示例，从 Aptana 复制的实际问题是：

标记 Grapher.html /MSVis/libs/dojo-release-1.8.0-src/dojox/calc/templates 第 31 行 HTML 语法问题结尾的“<”缺少 '>'

提前感谢您对此提供的任何帮助。

# c++ - C ++如何使用字符串和空格而不是整数来制作二维数组

> ID：12724509
> 
> 赞同：0
> 
> 时间：2012-10-04T09:43:35.430
> 
> 标签：c++, arrays, input

我正在制作一个数独程序，我有一个 test.txt 文件，内容为

```
53__7____    
6__195___
_98____6_
8___6___3
4__8_3__1
7___2___6
_6____28_
___419__5
____8__79 
```

其中“_”实际上是空格。我给你 _ 的原因是你可以看到每行实际上只有 9 个字符。

我当时在想我必须做一些类似 GRID[row][column] 的事情，但坦率地说，我不知道我应该把我的数组作为什么类型，我只是迷路了。

我只是想这样做，所以当我想输出说 GRID[0][0] 它返回 5，而如果我要求 GRID[0][3] 它返回一个''。

它得到了它，所以数组存储数字和空格是我完全迷路的地方

到目前为止我目前尝试过的内容：

```
int main()
{
 ifstream myfile(test.txt);
 string line;
 char sudoku_grid[9][9];

 if (myfile.is_open())
 {
  while(myfile.good())
   {
    getline(myfile, line);
    cout << sudoku_grid[line] << endl;
   }
   myfile.close();
  }
 else cout << "error";
 return 0;
} 
```

它返回错误行 12: no match for 'operator [ ]' in 'sudoku_grid[line]'

这是我通过你们指导的尝试：

```
int main()
{
 ifstream myfile(test.txt);
 string line;
 char sudoku_grid[9][9];

 if (myfile.good())
 {
  for(int i = 0; i < 9; i++)
   {
    getline(myfile, line);
    for(int j = 0; j < 9; j++)
       {
       if (line[j] == ' ')
          sudoku_grid[j][i] = -1;
       else  sudoku_grid[j][i] = line[i];
       }
    cout << sudoku_grid[i] << endl;
   }
   myfile.close();
  }
 else cout << "error";
 return 0;
} 
```

结果是一个非常尴尬的奇怪字母和新数字的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:52:45.973

我只会给你算法/逻辑，而不是为你编写代码。尝试一下，卡住时回来。

1.  初始化内存二维数组中的输出：`numbers[9][9]`
2.  打开文件
3.  直到文件中没有任何一行
    ：获取线`i`
    b。直到该行中没有更多字符：
      b1。获取 c
      b2 行的每个字符。如果字符不是空格，则`numbers[i]=c`，否则`numbers[i]=-1`

您的数组可以由`int`b2 组成，如果`whitespace`遇到 a ，您可以插入`-1`以指示缺少数字。当然，您的代码操作`numbers`数组需要考虑到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:50:04.570

由于您需要存储 chars 和 integer 类型值，请使用**char**。您的每个整数都在 0-9 范围内，因此可以存储为字符。

```
char Grid[9][9]; 
```

现在您可以从字符串中读取每个字符并将其存储在数组中。它不仅可以保持您的空间完整，还可以保持每个字符。永远记得使用 ASCII 码来访问网格的元素。对于**0-9**，ASCII 码是**48-57**，**空格**的 ASCII 码是**32**。

希望能帮助到你...

编辑代码：这是最简单的例子... 将您的测试文件放在 d: 中，或在代码中编辑文件的路径

```
int main (void)
{
    FILE    *fp = fopen("d:\\test.txt","r");
    char sudoku_grid[9][9], ch;
    // I am assuming that file is valid and data in that is also valid
    if(fp)
    {
        for(int i = 0; i < 9; i++)
        {            
            for(int j = 0; j < 9; j++)
            {
                //too read each character
                ch = fgetc(fp);
                sudoku_grid[i][j] = ch;   
            }
            // to read '\n' from the line
            ch = fgetc(fp);
        }
//for checking if data went correctly
        for(int i = 0; i< 9;i++)
        {
            for(int j= 0; j<9;j++)
                cout<<sudoku_grid[i][j];
            cout<<endl;
        }
    }

 return 0; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:43:51.950

在第一个代码中，您会收到错误消息，因为 sudoku_grid 只能按数字而不是字符串来索引。

在第二个代码行

```
sudoku_grid[j][i] = line[i]; 
```

应该是

```
sudoku_grid[j][i] = line[j]; 
```

这回答了你的问题了吗？

# java - 如何在 Eclipse 4 RCP 中获取 IHandlerService 对象？

> ID：12724511
> 
> 赞同：0
> 
> 时间：2012-10-04T09:43:42.563
> 
> 标签：java, eclipse-rcp

我正在做一个测试项目并遵循[Vogella 的 RCP 教程](http://www.vogella.com/articles/EclipseRCP/article.html#tutorial_modelelements)。之后，我对其进行了一些更改，例如。创建了一个`JFace` `TreeView`. 现在我希望如果用户双击一个`TreeView`元素，它会打开另一个`Part`. 我有它的命令，但我不知道如何调用它。如果您查看教程，您可能会注意到它仅使用部件，而不是视图，而且我没有`Application.java`启动工作台的类。因此，以下方法对我不起作用：

1.  `IHandlerService handlerService = (IHandlerService) viewer.getSite().getService(IHandlerService.class);`
2.  `IWorkbenchWindow window = PlatformUI.getWorkbench().getActiveWorkbenchWindow();` `IHandlerService handlerService = (IHandlerService)window.getService(IHandlerService.class);` `handlerService.executeCommand(cmdID, null);`

他们两个都给我`NullPointerException`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T13:10:49.033

根据 Lars Vogel 的说法，推荐的方法是注入如下所示的服务（这对我有用）。唯一的障碍是根据插件规则，包 org.eclipse.e4.core.commands 似乎无法访问（可能尚未导出）。

但这有效：

```
import org.eclipse.e4.core.commands.ECommandService;
import org.eclipse.e4.core.commands.EHandlerService;

public class MyPart{
public static final String S_CMD_MY_COMMAND_ID = "my.command";

@Inject ECommandService commandService;
@Inject EHandlerService service;

@PostConstruct
public void createComposite(Composite parent) {
    parent.setLayout(new GridLayout(2, false));
            ....
    Button btnMyButton = new Button(parent, SWT.NONE);
    btnMyButton.addSelectionListener(new SelectionAdapter() {
        @SuppressWarnings({ "restriction" })
        @Override
        public void widgetSelected(SelectionEvent e) {
            try {
                Command command = commandService.getCommand( S_CMD_MY_COMMAND_ID );
                if( !command.isDefined() )
                    return;
                ParameterizedCommand myCommand = commandService.createCommand(S_CMD_MY_COMMAND_ID, null);
                service.activateHandler(S_CMD_MY_COMMAND_ID, new MyCommandHandler());
                if( !service.canExecute(myCommand ))
                    return;
                service.executeHandler( myCommand );
            } catch (Exception ex) {
                throw new RuntimeException("command with id \"my command id\" not found");
            }           
        }
    });

    ....
} 
```

该处理程序将按如下方式实现（不包含在适当的命令插件扩展中，除非您还希望它实现 IDefaultHandler 以实现兼容性）：

```
public class MyCommandHandler{

@Execute
public Object execute() throws ExecutionException {
    System.out.println("Hello");
    return null;
}

@CanExecute
public boolean canExecute() {
    return true;
}
} 
```

详情见： [http ://www.vogella.com/articles/Eclipse4Services/article.html](http://www.vogella.com/articles/Eclipse4Services/article.html)

[https://groups.google.com/forum/#!topic/vogella/n5ztV-8GmkU](https://groups.google.com/forum/#!topic/vogella/n5ztV-8GmkU)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:53:33.303

这个旧待机怎么样：

```
Command command = ((ICommandService)getSite().getService(ICommandService.class)).getCommand(commandId);
...
final Event trigger = new Event();
ExecutionEvent executionEvent = ((IHandlerService)getSite().getService(IHandlerService.class)).createExecutionEvent(command, trigger);
command.executeWithChecks(executionEvent); 
```

# mysql - 我正在尝试使用 vb 2010 express 连接到 mysql，访问被拒绝

> ID：12724515
> 
> 赞同：1
> 
> 时间：2012-10-04T09:43:48.663
> 
> 标签：mysql, vb.net, wamp

我已经阅读了大量关于在 Wamp 中将 vb 2010 express 连接到 Mysql 的帖子，但没有一个能解决我的问题：P。问题是我有一个本地 Mysql 服务器正在运行，我在 PHP 和 MySQL Workbench 中可以毫无问题地连接到该服务器，但是当我尝试使用 vb 2010 express 连接时，我发现我必须导入连接器然后构建代码因此。

我认为我的代码没问题，但仍然收到消息“WindowsApplication1.vshost.exe 错误：0：用户'root'@'localhost'的访问被拒绝（使用密码：YES）”

这是代码：

```
 Private Sub CheckPayments()

    Try
        myPassword = ""

        myConnstr = "Server=localhost;Database=kiosk;Uid=root;Pwd=myPassword"
        myQuery = "select * from products where deleted = 0"

        Dim myConn As New MySqlConnection(myConnstr)
        Dim myDa As New MySqlDataAdapter(myQuery, myConn)

        If myDa.Fill(myDs) Then ' 1 significa que a ligação foi efetuada com sucesso
            mysqldump.DataSource = myDs.Tables(0)
        End If

        myConn.Close()

    Catch ex As Exception
        MessageBox.Show(ex.Message)
    End Try

End Sub 
```

因此错误陷入项目，需要快速帮助！提前感谢您可以给我的任何帮助:)

BR，卡洛斯·门德斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:09:38.317

希望这对需要将 VB2010 Express 连接到 MySQL 的人有所帮助。

此代码在 DataGridView 对象中显示 MySQL 数据。连接问题已解决:)。

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)  Handles Button1.Click
    Dim con As MySqlConnection = New MySqlConnection("Data Source=localhost;Database=<your db>;User ID=<your user>;Password=<your password>;")
    Dim sql As MySqlCommand = New MySqlCommand("SELECT * FROM <your table>", con)

    Dim ds As DataSet = New DataSet()

    Dim DataAdapter1 As MySqlDataAdapter = New MySqlDataAdapter()

    con.Open()

    DataAdapter1.SelectCommand = sql

    DataAdapter1.Fill(ds, "<DataGridView table name>")

    DataGridView1.DataSource = ds

    DataGridView1.DataMember = "<DataGridView table name>"

    con.Close()
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:08:41.000

您应该导入连接器，这是没有任何麻烦的更好的好方法！

mysql-connector-net-6.4.5-noinstall

然后转到项目 -> 添加参考 -> TAB-浏览

浏览保存“mysql-connector-net-6.2.2”的位置

只选择 mysql.data.dll

然后使用您的 Connection 命令连接 WAMP MYSQL！就是这样..

# java - Simple-XML：在运行时覆盖元素名称

> ID：12724517
> 
> 赞同：1
> 
> 时间：2012-10-04T09:43:51.240
> 
> 标签：java, xml, simple-framework

我正在使用 simple-xml 在我的 Java 应用程序中执行 XML 序列化/反序列化。我有一堂课如下：

```
@Root(name="config")
public class Config{
    @Element(name="update_interval")
    private int updateInterval;

    @Element(name="timestamp")
    private long timestamp;

    //...
    //...
} 
```

现在，这将生成如下所示的 XML：

```
<config>
    <update_interval>2000</update_interval>
    <timestamp>1234567890</timestamp>
</config> 
```

**问题：**

如何在运行时覆盖元素名称，以便在某些情况下，XML 如下所示？

```
<config>
    <updt_int>2000</updt_int>
    <ts>1234567890</ts>
</config> 
```

## 编辑：

为了澄清，我只想在**某些情况下**覆盖元素名称。所以基本上，

```
if(condition){
    //Override Element Names
} else {
    //Serialize Normally
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:54:44.610

[多亏了这个评论](https://stackoverflow.com/questions/12724517/simple-xml-overriding-an-element-name-at-runtime#comment17187863_12724517)，我找到了一种在这种情况下实现序列化的简单方法。

但是，我无法***反序列化***这样的 XML 文档。这是我的部分解决方案：

```
/*
 * Config.java
 */

@Root(name="config", strict = false)
public class Config {

    @Element(name="timestamp", required = false)
    private long timestamp;

    @Element(name = "update_interval", required = false)
    private int updateInterval;

    public Config() {
    }

    public int getUpdateInterval() {
        return updateInterval;
    }

    public void setUpdateInterval(int updateInterval) {
        this.updateInterval = updateInterval;
    }

    public long getTimestamp() {
        return timestamp;
    }

    public void setTimestamp(long timestamp) {
        this.timestamp = timestamp;
    }

    @Override
    public String toString() {
        return "Config{" +
                "timestamp=" + timestamp +
                ", updateInterval=" + updateInterval +
                '}';
    }
}

/*
 * Custom Visitor implementation
 */
public class MyInterceptor implements Visitor {

    private static int sReadCount = 0;
    private static int sWriteCount = 0;
    @Override
    public void read(Type field, NodeMap<InputNode> node) throws Exception {
        /*
         * This is where I need help!
         *
         * 
         * This method is only called once: for the <config> node
         * It is not called for the other nodes since they are not "recognized" 
         * i.e., there are no annotations for the nodes <ts> and <updt_int>
         */

        System.out.println("Read Count : "+ (++sReadCount));
        System.out.println(node.getName());
        System.out.println(node.getNode());

    }

    @Override
    public void write(Type field, NodeMap<OutputNode> node) throws Exception {

        /* 
         * This works like a charm.
         */
        System.out.println("Write Count : "+ (++sWriteCount));
        OutputNode opNode = node.getNode();
        if("timestamp".equals(opNode.getName())){
            opNode.setName("ts");
        }
        if("update_interval".equals(opNode.getName())){
            opNode.setName("updt_int");
        }

    }

}

/*
 *
 */ Main class
public class Bootstrap {

    static final Random RANDOM = new Random();
    public static void main(String [] args){
        Config cfg = new Config();
        cfg.setTimestamp(RANDOM.nextLong());
        cfg.setUpdateInterval(1000);

        Serializer serializer = new Persister(new VisitorStrategy(new MyInterceptor()));

        StringWriter writer = new StringWriter();
        try {
            serializer.write(cfg, writer);
        } catch (Exception e) {
            e.printStackTrace();
        }

        String serialized = writer.toString();
        System.out.println(serialized);

        Config desCfg = null;
        try {
            desCfg = serializer.read(Config.class, serialized);
        } catch (Exception e) {
            e.printStackTrace();
        }

        if(desCfg != null){
            System.out.println(desCfg.toString());
        }
    }
} 
```

# c++ - VT_BSTR 中嵌入的小数点和使用德语语言环境时的转换不正确

> ID：12724518
> 
> 赞同：0
> 
> 时间：2012-10-04T09:43:51.357
> 
> 标签：c++, excel, locale, decimal-point

我有一段代码（c ++）正在编写一些浮点值以像这样表现出色：

```
...
values[ position ].bstrVal = formattedValue;
values[ position ].vt = VT_BSTR;
... 
```

如您所见，这些浮点值以字符串的形式存储，小数点以不同的方式格式化，例如：“110.000000”、“20.11”等（此示例适用于英语语言环境）

现在，当使用英语语言环境时，它可以完美运行。但是，当我在控制面板中切换到德语区域设置时，小数点更改为“，”（这很好），但是在将这些本地化字符串传递给 Excel 后，它们没有正确转换。例如，在写“110,000000”的情况下，我在 excel 中获得了 1 亿。诸如“20,11”之类的其他值保留为文本。

解决此问题的唯一方法是用“。”覆盖小数点。在我的程序中写入 Excel 之前。任何想法为什么在使用 VT_BSTR 时转换不支持区域设置？

我还应该补充一点，我尝试将程序中的语言环境从默认设置切换为德语 - 仍然没有运气。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:25:02.307

让 Excel 猜测值类型绝不是一个好主意。不要**使用**VT_BSTR，货币值应该是变体类型 VT_CY。为 cyVal 成员分配值。它是一个 8 字节整数值（LONGLONG 类型的 int64 成员），货币金额乘以 10,000。一万：）

# ruby-on-rails-3 - rails 3 在邮件操作中加载不同的部分

> ID：12724519
> 
> 赞同：1
> 
> 时间：2012-10-04T09:43:53.453
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2, actionmailer

所以我有 2 个邮件操作的一种布局：`signup_email`和`change_password`

```
 def signup_email(user, url)
    @user = user
    @url  = url
    mail(to:user.username, subject:"Welcome to Clubicity!", template_path: "mail_templates", template_name: "system")
  end

  def change_password(username,url)
    @url = url
    mail(to:username,subject:"Clubicity - password recovery", template_path: "mail_templates", template_name: "system")
  end 
```

我设法为这 2 个动作获得了一个布局，但现在在这个布局中，我需要根据调用的动作、注册或 change_pwd 呈现 2 个不同的部分。

我查看了 RailsGuides 和 api.rubyonrails.org，他们只说模板。

拜托，需要这方面的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:52:00.040

使用这样的邮件布局得到它

```
 def change_password(username,url)
    @url = url
    mail(to:username,subject:"Clubicity - password recovery") do |format|
      format.html { render :layout => 'mail_templates/system'}
    end
  end

  def signup_email(user, url)
    @user = user
    @url  = url
    mail(to:user.username, subject:"Welcome to Clubicity!") do |format|
      format.html { render :layout => 'mail_templates/system'}
    end
  end 
```

并在布局中放**<%= yield %>**

和摇滚！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:55:47.403

因此，您希望将一个文件用于不同的操作。当然，您必须在模板中定义操作。

我建议为每个动作制作一个视图文件。

要使用一种布局，只需添加`<%= render 'email_header' %>`到每个视图的顶部和`<%= render 'email_footer' %>`底部。还要制作`_email_header.html.erb`并`_email_footer.html.erb`带有适当的标记。

# java - 刷新时如何防止重复条目？

> ID：12724526
> 
> 赞同：6
> 
> 时间：2012-10-04T09:44:15.943
> 
> 标签：java, html, jsp, servlets, post-redirect-get

我有一个`index.jsp`页面，我有一个表单，用户可以在其中输入一些数据，这些数据使用 Controller servlet 存储在数据库中。

在数据库中输入数据后，我想显示`index.jsp`与该表单相同的页面 ( )。另外，我想显示用户在数据库中输入的所有条目。

我尝试`forward()`使用`RequestDispatcher`. 它工作正常（这意味着我能够再次显示相同的表单，并且还显示该用户使用 JSTL 在表单下方输入的所有数据）。

但问题是，每当用户按下`Refresh or F5`按钮时，所有以前的数据也会输入到数据库中，当我显示所有数据时，也会出现重复的条目。

我想过使用 POST-REDIRECT-GET 模式，但问题是当我重定向时，我没有使用 JSTL 显示这些数据。

我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T22:06:39.743

> *我想过使用 POST-REDIRECT-GET 模式，但问题是当我重定向时，我没有使用 JSTL 显示这些数据。*

只需发送一个请求参数以及标识您希望在新 GET 请求中显示的信息即可。

```
// ...
Long id = dataService.save(data);
// ...
response.sendRedirect(request.getContextPath() + "/index?editId=" + id); 
```

然后在映射到 URL 模式的[servlet中](https://stackoverflow.com/tags/servlets/info)`/index`

```
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    Long editId = Long.valueOf(request.getParameter("editId")); // Handle nullcheck yourself.
    Data editData = dataService.find(editId);
    request.setAttribute("editData", editData); // For the edit form.
    List<Data> allData = dataService.list();
    request.setAttribute("allData", allData); // For the table/list of all data.
    request.getRequestDispatcher("/index.jsp").forward(request, response);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T09:57:08.917

我会在页面上添加一个不可见的 ID。如果数据是数据库中的新数据（ID = 未知），则插入并创建一个 ID 并使用该 ID 更新页面。这样您就知道它是否是 ID ！= 未知，并且您不必进行插入。如果数据没有改变，你甚至不必进行更新......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:05:32.047

这是最简单的解决方案

```
<%@page import="java.util.*"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<%!
//This List is just for demonstration purposes
List<String> names = new ArrayList<String>();
%>
<%
if(request.getParameter("name")!=null ){
    names.add(request.getParameter("name"));
    session.setAttribute("nameList", names);
    //Here you put your database insert code

    //Whenever the code execution reaches this line , 
    //then it means that you have a new page submission
    //and not a refresh or f5 case

    response.sendRedirect("index.jsp");
}
%>

<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <form action="index.jsp" method="post">
            <input type="text" id="name" name="name"/>
        </form>
        <p>
            <table>
                <c:forEach items="${nameList}" var="element">    
                    <tr>
                        <td>Name:  <c:out value="${element}"/> </td>
                    </tr>
                </c:forEach>
            </table>
        </p>
    </body>
</html> 
```

诀窍在于`response.sendRedirect("index.jsp");`. 这使得`null`所有请求参数。如果`f5`or`refresh`被命中，则`if`永远不会执行。如果是正常提交​​，则`if`执行 并调用 `response.sendRedirect("index.jsp");`.

总之，您真正需要做的就是：

1) 检查`if(request.getParameter("name")!=null )`

2）如果以上是真的，那么做数据库插入

3）如果以上是真的，那么`response.sendRedirect("index.jsp");`

**更新**

```
if(request.getParameter("name")!=null ){
    DbUtility.addNameToDb(request.getParameter("name"));
    ArrayList<String> currentList = DbUtility.getAllNamesFromDb();
    session.setAttribute("nameList", currentList);
    response.sendRedirect("index.jsp");
} 
```

你只需要实现这两种方法。这`addNameToDb(String)`将`insert`在您的数据库中生成。并且`getAllNamesFromDb()`将返回一个`ArrayList<String>`对象，该对象将代表您数据库中的条目。（并且您不再需要`names`我之前在第一个答案中介绍的列表）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T05:55:21.863

我认为 PRGP（Post Redirect Get Pattern）是解决这个问题的方法。如果您使用的是 Spring Web Flow，它有一个 FlashScope，您可以在其中放置要在 Post-get-redirection 之后保留的数据。使用这种方法，您可以保留的不仅仅是编辑 ID。

# lua - 电晕遮罩，如何添加 2 个或更多遮罩以显示组

> ID：12724527
> 
> 赞同：0
> 
> 时间：2012-10-04T09:44:20.380
> 
> 标签：lua, coronasdk, mask, displayobject

大家好，我正在 Corona 开发 1 个适用于 Android 和 iOS 的小游戏。

当用户触摸组时，我需要为图像设置蒙版。这是我的代码：

```
 local function eat( event )
      if event.phase == "began" the

        local mask = graphics.newMask( "file/mask.png" )
        local playSound = audio.play( biteSound )

        onDishGroup:setMask( mask )
        onDishGroup.maskX= event.x
        onDishGroup.maskY = event.y

    return true
end 
```

问题是，如何向该组添加多个掩码？它工作得很好，但这一次只能设置 1 个掩码，旧的将删除，或者它只是移动到新的 x y。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:51:38.537

你不能像那样添加多个面具......

但是你可以把几个组放在一个里面，然后给他们添加面具......是的，这是一个丑陋的黑客，但是......

# jquery - Solr JQuery 自动完成不会自动完成

> ID：12724528
> 
> 赞同：5
> 
> 时间：2012-10-04T09:44:21.653
> 
> 标签：jquery, autocomplete, solr

我正在尝试使用 Solr 和 JQuery UI 实现 HTML 自动完成表单。

Solr 的服务器记录查询并且 Firebug 确认我得到了一个 json 数组：

```
{"responseHeader":{"status":0,"QTime":3,"params":{"fl":"defaultCommonNameString","q":"defaultCommonName:angle","wt":"json"}},"response":{"numFound":42,"start":0,"docs":[{"defaultCommonNameString":["angle"]},{"defaultCommonNameString":["reporter un angle"]},{"defaultCommonNameString":["formule pour un angle"]},{"defaultCommonNameString":["angle droit"]},{"defaultCommonNameString":["angle au centre"]}, ...]}}} 
```

但此代码不显示响应：

```
<link rel="stylesheet" type="text/css" href="css/demos.css" />
<script type="text/javascript" src="jquery/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="jquery/jquery.ui.core.js"></script>
<script type="text/javascript" src="jquery/jquery.ui.widget.js"></script>
<script type="text/javascript" src="jquery/jquery.ui.position.js"></script>
<script type="text/javascript" src="jquery/jquery.ui.autocomplete.js"></script>
<script>
$(function() {
    $("#autosearch").autocomplete({
        source: function( request, response ) {
            $.ajax({
            url: "http://localhost:8080/solr/select",
            data: { 
                q: "defaultCommonName:"+request.term,
        wt:"json",
        fl: "defaultCommonNameString",
             }, 
             dataType: "json",
             type: "GET",

             success: function( data ) {
                data=parse();
                function parse(){
                var parsedQueries=[];
                    for(var i=0;i<data.response.docs.length;i++){
                        parsedQueries[i]=data.response.docs[i].Query;
                    }
                    return parsedQueries;
                }

                response($.map(data.response.docs, function( item ) { 
                    return { 
                        label: item,
                        value: item
                    }; 
            }));
            }
          }); 
         },
        minLength: 1
        });
    });
</SCRIPT>
</head>
<body>
<label for="autosearch">Search Here :  </label>
<input id="autosearch"/>
</body> 
```

感谢帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T08:17:34.357

非常感谢 D_K，这很好！

编码 ：

```
$(function() {
    $("#autosearch").autocomplete({
        source: function( request, response ) {
            $.ajax({
            url: "http://localhost:8080/solr/select",
            data: { 
                q: "defaultCommonName:"+request.term,
                fl: "defaultCommonNameString",
                wt: 'json',
             }, 
             dataType: "jsonp",
             jsonp: 'json.wrf',

             success: function( data ) {
                response($.map(data.response.docs, function( item ) { 
                    return { 
                        label: item.defaultCommonNameString,
                        value: item.defaultCommonNameString,
                    }; 
            }));
            }
          }); 
         },
        minLength: 1
        });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:15:21.537

我正在使用上面的代码，它工作正常，但是服务器 ip 和端口直接在页面源上打开，有什么方法可以加密这些信息。

# c# - 如何在可取消的异步/等待中处理 TransactionScope？

> ID：12724529
> 
> 赞同：79
> 
> 时间：2012-10-04T09:44:21.497
> 
> 标签：c#, .net, database, transactions, async-await

我正在尝试使用新的 async/await 功能来异步处理数据库。由于某些请求可能很长，我希望能够取消它们。我遇到的问题是`TransactionScope`显然具有线程亲和力，并且似乎在取消任务时，它`Dispose()`在错误的线程上运行。

具体来说，当我打电话时，我`.TestTx()`得到以下`AggregateException`内容：`InvalidOperationException``task.Wait ()`

```
"A TransactionScope must be disposed on the same thread that it was created." 
```

这是代码：

```
public void TestTx () {
    var cancellation = new CancellationTokenSource ();
    var task = TestTxAsync ( cancellation.Token );
    cancellation.Cancel ();
    task.Wait ();
}

private async Task TestTxAsync ( CancellationToken cancellationToken ) {
    using ( var scope = new TransactionScope () ) {
        using ( var connection = new SqlConnection ( m_ConnectionString ) ) {
            await connection.OpenAsync ( cancellationToken );
            //using ( var command = new SqlCommand ( ... , connection ) ) {
            //  await command.ExecuteReaderAsync ();
            //  ...
            //}
        }
    }
} 
```

更新：注释掉的部分是为了表明有一些事情要做 - 异步 - 一旦连接打开，但不需要该代码来重现问题。

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2013-07-08T13:25:46.093

在 .NET Framework 4.5.1 中，有一组[新的 TransactionScope 构造函数，](http://msdn.microsoft.com/en-us/library/System.Transactions.TransactionScope.TransactionScope.aspx)它们采用**TransactionScopeAsyncFlowOption**参数。

根据 MSDN，它支持跨线程延续的事务流。

我的理解是，它是为了让您可以编写如下代码：

```
// transaction scope
using (var scope = new TransactionScope(... ,
  TransactionScopeAsyncFlowOption.Enabled))
{
  // connection
  using (var connection = new SqlConnection(_connectionString))
  {
    // open connection asynchronously
    await connection.OpenAsync();

    using (var command = connection.CreateCommand())
    {
      command.CommandText = ...;

      // run command asynchronously
      using (var dataReader = await command.ExecuteReaderAsync())
      {
        while (dataReader.Read())
        {
          ...
        }
      }
    }
  }
  scope.Complete();
} 
```

我还没有尝试过，所以我不知道它是否会起作用。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2019-01-21T21:15:08.563

我知道这是一个旧线程，但如果有人遇到 System.InvalidOperationException 问题：必须将 TransactionScope 放置在创建它的同一线程上。

解决方案是至少升级到 .net 4.5.1 并使用如下事务：

```
using (var transaction = new TransactionScope(TransactionScopeAsyncFlowOption.Enabled))
{
   //Run some code here, like calling an async method
   await someAsnycMethod();
   transaction.Complete();
} 
```

现在事务在方法之间共享。看看下面的链接。它提供了一个简单的例子和​​更多的细节

有关完整的详细信息，请查看[此](https://particular.net/blog/transactionscope-and-async-await-be-one-with-the-flow)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-06T14:06:51.903

问题源于我在控制台应用程序中对代码进行原型设计，我没有在问题中反映这一点。

async/await 之后继续执行代码`await`的方式取决于 的存在`SynchronizationContext.Current`，而控制台应用程序默认没有，这意味着继续使用 current 执行`TaskScheduler`，即 a `ThreadPool`，所以它（*可能？*）执行在不同的线程上。

因此，只需要一个`SynchronizationContext`可以确保将`TransactionScope`其部署在它创建的同一线程上。WinForms 和 WPF 应用程序将默认拥有它，而控制台应用程序可以使用自定义的，也可以`DispatcherSynchronizationContext`从 WPF 借用。

这里有两篇详细解释机制的精彩博文：
[Await、SynchronizationContext 和控制台应用程序](http://blogs.msdn.com/b/pfxteam/archive/2012/01/20/10259049.aspx)
[等待、SynchronizationContext 和控制台应用程序：第 2 部分](http://blogs.msdn.com/b/pfxteam/archive/2012/01/21/10259307.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-22T06:22:35.647

面向 .NET Framework 4.6+、.NET Core 2.1+ 或 .NET Standard 2.0+

考虑使用[Microsoft.Data.SqlClient](https://devblogs.microsoft.com/dotnet/introducing-the-new-microsoftdatasqlclient/)，它将 .NET Framework 和 .NET Core 的 System.Data.SqlClient 组件集中在一个屋檐下。如果您想使用一些较新的 SQL Server 功能，也很有用。

查看[repo](https://github.com/dotnet/SqlClient)或从[nuget](https://www.nuget.org/packages/Microsoft.Data.SqlClient/)中提取。

添加包后添加 using 语句：

```
using Microsoft.Data.SqlClient; 
```

使用 C# 8 的示例：

```
// transaction scope
using var scope = new TransactionScope(TransactionScopeAsyncFlowOption.Enabled);

// connection
await using var connection = new SqlConnection(_connectionString);

// open connection asynchronously
await connection.OpenAsync();
await using var command = connection.CreateCommand();
command.CommandText = "SELECT CategoryID, CategoryName FROM Categories;";

// run command asynchronously
await using var dataReader = await command.ExecuteReaderAsync();

while (dataReader.Read())
{
    Console.WriteLine("{0}\t{1}", dataReader.GetInt32(0), dataReader.GetString(1));
}

scope.Complete(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T09:53:04.753

是的，您必须将事务范围保持在单个线程上。由于您在异步操作之前创建事务范围，并在异步操作中使用它，因此事务范围不在单个线程中使用。TransactionScope 不是为那样使用而设计的。

我认为一个简单的解决方案是将 TransactionScope 对象和 Connection 对象的创建移到**异步**操作中。

更新

由于异步操作在 SqlConnection 对象内，我们无法更改它。我们能做的，就是[在事务范围内登记连接](https://stackoverflow.com/questions/934316/is-there-a-way-to-use-transactionscope-with-an-existing-connection)。我将以异步方式创建连接对象，然后创建事务范围，并登记事务。

```
SqlConnection connection = null;
// TODO: Get the connection object in an async fashion
using (var scope = new TransactionScope()) {
    connection.EnlistTransaction(Transaction.Current);
    // ...
    // Do something with the connection/transaction.
    // Do not use async since the transactionscope cannot be used/disposed outside the 
    // thread where it was created.
    // ...
} 
```

# ruby-on-rails - Rails 引擎：何时将代码放入应用程序、何时放入 lib 以及何时放入供应商文件夹？

> ID：12724531
> 
> 赞同：13
> 
> 时间：2012-10-04T09:44:32.580
> 
> 标签：ruby-on-rails, ruby, rails-engines

我正在开发一个 Rails 引擎，所以我对现有的引擎进行了一些研究。我注意到他们中的许多人`app`在.`lib`和. 中都有文件`vendor`。

我很清楚，我应该将主机应用程序可以替换的任何代码放入`app`文件夹中（例如，当有一个模型时`app/user.rb`，主机应用程序可以很容易地拥有自己的`app/user.rb`文件并使用这个文件而不是引擎文件）。

但我不确定，什么时候我必须把东西放进去`lib`，什么时候放进去`vendor`？我认为，`vendor`我应该只将我想在我的项目中使用的来自其他开发人员或项目的“外部”代码放入其中，`lib`并将我自己实际在项目中工作的其他库放入其中。但是，例如，为什么 WiceGrid 会将内容放入其[wice_grid/vendor/assets](https://github.com/leikind/wice_grid/tree/rails3/vendor/assets)目录？在我看来，它不像外部代码，而是仅为 WiceGrid 开发的代码，因此应该在`lib`目录中？

**更新**

在进行一些试验时，我注意到`lib`在开发引擎时文件夹中的所有代码都没有重新加载（我想`vendor`目录也是如此），所以我应该将它们放入一个文件夹中`app`，但究竟在哪里？

例如，我有一个文件`lib/iq_list_controller.rb`，其中包含一些类和实例方法`ApplicationController`，我将这些方法混合到其中，`engine.rb`如下所示：

```
initializer "wice_grid_railtie.configure_rails_initialization" do |app|
  ActiveSupport.on_load(:action_controller) do
    extend  IqList::Controller::ClassMethods
    include IqList::Controller::InstanceMethods
  end
end 
```

我应该把这个文件放在哪里，以便 Ruby 正确找到它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-11T10:06:50.960

关于开发重新加载问题，如果 lib 文件夹是您的文件的自然归宿，则将其添加到 Rails 的加载路径中，如下所示：

```
module MyEngine
  class Engine < ::Rails::Engine
    config.autoload_paths << File.expand_path("../../lib", __FILE__)
  end
end 
```

关于供应商资产的具体情况，将引擎的资产放在 app/assets 中似乎是合理的，主机 Rails 应用程序将在其中找到它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-28T15:21:16.320

如果您希望自动加载内容，请将它们放入`/app`. 否则，我认为`/lib`应该手动要求其中的任何内容。我通常认为自动加载 lib 文件夹是不好的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-10T10:46:47.717

您的 MVC 基本代码位于 app 文件夹中。现在假设您有一个经常使用的通用方法/模块，因此要为您的代码实现 DRYness ......所有通用和通用实用程序都可以简单地放在 lib 文件夹中。

有一个很好的解释[何时使用 lib](http://reefpoints.dockyard.com/ruby/2012/02/14/love-your-lib-directory.html)和[在 rails 中使用 lib 文件夹](http://blog.codeclimate.com/blog/2012/02/07/what-code-goes-in-the-lib-directory/)

# iphone - 如何添加叠加层以查看 UIPickerView 中的选定值？

> ID：12724536
> 
> 赞同：0
> 
> 时间：2012-10-04T09:44:48.533
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我已经创建了一个`UIPickerView`并且我想添加一个覆盖视图来向用户展示他选择的内容。我不知道如何添加它。有什么财产吗？例如，当我们选择一个日期时，中间会出现一些叠加视图`UIPickerView`，我应该如何获得它？

喜欢： http: [//www.inexika.com/blog/Customizing-UIPickerView-UIDatePicker](http://www.inexika.com/blog/Customizing-UIPickerView-UIDatePicker)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:53:13.990

在 中`UIPickerView`，定义添加

```
pickerView.showsSelectionIndicator = YES; 
```

并使用以下方法：-

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
} 
```

现在在这个添加一个`UIView`你可以在这里调用的，或者只是在这里分配它本身添加你想要`addSubView`的`UIView`。希望这么多信息是足够的，否则请告诉。谢谢 ：）

# joomla - Joomla htaccess 重写 url - 参数必须按数字索引 - 为什么？

> ID：12724540
> 
> 赞同：0
> 
> 时间：2012-10-04T09:45:07.097
> 
> 标签：joomla, rewrite

这是第一次在这里提出问题，所以不要难为我。谢谢你。

我目前设置了一个 joomla 网站。我在 template/index.php 中创建了一个页面、一个新模板和一个模块，我称之为我的模块。

有效的原始网址类似于：index.php/danh-sach-game?gt_name=game_mang_xa_hoi

danh-sach-game：是页面。game-mang-xa-hoi：是模块的输入参数。

一切正常，但我想将网址重写为：

danh-sach-game/game-mang-xa-hoi

所以我创建了一个 .htaccess 内容：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^danh-sach-game/(.*)$ index.php/danh-sach-game?gt_name=$1 [L]
</IfModule> 
```

现在是“魔法”的时候了，如果我输入网址：danh-sach-game/game-mang-xa-hoi 然后 Joomla 推送消息“发生错误。找不到请求的页面。”

但是，如果我用这样的数字索引参数：danh-sach-game/1-game-mang-xa-hoi（注意：数字 1）。然后它可以找到。任何由数字组成的参数索引都可以找到。

我将 url 重写为一个测试文件（用 test.php 替换 index.php），而不是页面 test.php 接收参数作为 usuas，有或没有数字索引参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T05:32:16.593

这是因为 Joomla 和大多数 Joomla 扩展使用内容的 ID 列作为标识符来查找数据库。一些 SEF 工具（例如 AceSef、sh404Sef）提供了使用别名（数字和连字符后面的文本）进行查找的工具，但是会增加数据库查询的成本（它们将依次在内部查询正确的 url）。

URL 最后一部分中的数字将被处理并作为您正在查看的特定页面/内容的 ID 传递。这是在特定组件的 router.php 文件中完成的。因此，请检查您正在使用的组件的 router.php 文件，以检查 url 是如何被解析的。

# ubuntu - JRuby + SWT + 系统托盘：我做错了什么？

> ID：12724544
> 
> 赞同：2
> 
> 时间：2012-10-04T09:45:38.427
> 
> 标签：ubuntu, swt, jruby, system-tray

我正在尝试使用 JRuby 来显示带有 SWT 的托盘项目。我在 Windows 7、Ubuntu Unity/gnome 3/ 和 gnome classic 上试过这个。

我发现托盘项目没有出现。菜单也显示在鼠标光标位置。

我在这里做错了什么？

```
=begin
# references
* usage of swt gem -- https://github.com/danlucraft/swt/blob/master/examples/menu_and_toolbar.rb
* SWT tray example -- http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet143.java
=end

require 'java'
require_relative '../dependencies/swt/lib/swt'

class Doro
  include Swt::Widgets

  IMAGE = File.expand_path('../../assets/doro.jpg', __FILE__)

  def initialize
    ui_start
    setup_tray
    ui_end
  end

  def ui_start
    display = Display.get_current
    @shell = Shell.new
    #@shell.text = self.class.to_s
  end

  def ui_end
    #@shell.set_bounds(50, 50, 300, 200)
    #@shell.visible = false
    @shell.pack
    @shell.open
  end

  def setup_tray
    display = @shell.display
    tray = display.get_system_tray
    tray_item = TrayItem.new(tray, Swt::SWT::NONE)
    tray_item.tool_tip_text = 'Doro'
    tray_item.image = Swt::Graphics::Image.new(display, IMAGE)

    tray_item.add_selection_listener { }

=begin
    tray_item.add_show_listener { |event| puts 'show' }
    tray_item.add_listener(Swt::SWT::Show, Swt::SWT::Listener.new { |event| puts 'show' })
    tray_item.add_hide_listener { }
    tray_item.add_default_selection_listener { }
=end

    setup_menu tray_item

    tray_item.visible = true
  end

  def setup_menu(parent)
    menu = Swt::Widgets::Menu.new(@shell, Swt::SWT::POP_UP)

    fileItem = Swt::Widgets::MenuItem.new(menu, Swt::SWT::PUSH)
    fileItem.setText("File")

    editItem = Swt::Widgets::MenuItem.new(menu, Swt::SWT::PUSH)
    editItem.setText("Edit")

    menu.visible = true

    parent.add_menu_detect_listener do
      menu.each { |m| m.visible = true }
    end
  end

  def start
    display = @shell.display

    while !@shell.isDisposed
      display.sleep unless display.read_and_dispatch
    end

    display.dispose
  end
end

app = Doro.new
Swt::Widgets::Display.set_app_name app.class.to_s
app.start 
```

更新：

我在工作中看到此代码在我的 Windows 7 m/c 上没有任何更改。我正确地看到了图标。我想知道为什么它在我家的窗户上不起作用。（当然永远不会在 ubuntu 上）。我使用了相同版本的 SWT jar 和 swt gem。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:37:13.737

我发现您引用 TrayItem 类的方式存在问题：

```
def setup_tray
    ...     
    # tray_item = TrayItem.new(tray, Swt::SWT::NONE) # here is the problem, replace with above
    tray_item = org.eclipse.swt.widgets.TrayItem.new(tray, Swt::SWT::NONE) 
```

此更改使图标出现在托盘中。

要在右键单击图标时显示菜单，请修复 setup_menu：

```
def setup_menu(parent)
    menu = Swt::Widgets::Menu.new(@shell, Swt::SWT::POP_UP)

   fileItem = Swt::Widgets::MenuItem.new(menu, Swt::SWT::PUSH)
   fileItem.setText("File")

   editItem = Swt::Widgets::MenuItem.new(menu, Swt::SWT::PUSH)
   editItem.setText("Edit")

   menu.visible = false # FIXED   
   parent.add_menu_detect_listener do
=begin # fixed debug code     
     items = menu.getItems
     puts "this code block run every time you rightclick the icon in the systray,"
     puts "your menu consists of #{items.count} items"
     items.each { |m| p m.text }
=end      
     # items.each { |m| m.visible = true } #original code
     menu.visible = true # FIXED
   end
end 
```

关于引用 swt 类的方法，我参考了这篇文章：*Sébastien Le Callonnec*的[using swt with jruby](http://www.weblogism.com/item/255/using-swt-with-jruby)

 *否则，按照 Martin Sadler 的文章：[An Introduction to Desktop Apps with Ruby，](http://rubylearning.com/blog/2010/09/29/an-introduction-to-desktop-apps-with-ruby/)我找到了一个基于 AWT（不是 SWT）的解决方案

有一些编辑：

1) 在您的 jruby 类中包含您需要的 Java 和导入 awt 类

```
class Doro
  include Java
  import java.awt.TrayIcon
  import java.awt.Toolkit
  ... 
```

2) 设置菜单并在 setup_tray 中设置托盘图标

```
 def setup_tray
    # Setup our menu items
    file_item = java.awt.MenuItem.new("File")
    edit_item = java.awt.MenuItem.new("Edit")
    # Add the items to the popup menu itself
    menu = java.awt.PopupMenu.new
    menu.add(file_item)
    menu.add(edit_item)
    # Give the tray an icon and attach the popup menu to it
    image    = java.awt.Toolkit::default_toolkit.get_image(IMAGE)
    tray_icon = TrayIcon.new(image, "Screenshot!",  menu)
    tray_icon.image_auto_size = true
    # Finally add the tray icon to the tray
    tray = java.awt.SystemTray::system_tray
    tray.add(tray_icon)
  end 
```

测试：

> 操作系统：Microsoft Windows [版本 6.1.7601]
> 
> ruby 解释器：jruby 1.6.7 (ruby-1.9.2-p312) (2012-02-22 3e82bc8) (IBM J9 VM 1.6.0) [Windows Vista-amd64-java]
> 
> 宝石：swt（0.13）*

# ls - 文件的选择性列表 (ls)

> ID：12724545
> 
> 赞同：0
> 
> 时间：2012-10-04T09:45:41.017
> 
> 标签：ls, negate

我有一个文件列表，例如：（
一般来说，它的格式是`/data/logs/var_YYYYMMDDHHMMSS.log`）

```
/data/logs/var_20121002103531.log
/data/logs/var_20121002104215.log
/data/logs/var_20121002120001.log 
```

我徒劳地尝试将所有没有 12 的文件列为 HH。
即输入：

```
/data/logs/var_20121002103531.log
/data/logs/var_20121002104215.log
/data/logs/var_20121002120001.log  # THIS IS TO BE OMITTED
/data/logs/var_20121002140001.log 
```

所需输出：

```
/data/logs/var_20121002103531.log
/data/logs/var_20121002104215.log
/data/logs/var_20121002140001.log 
```

我试过了

```
ls -1tr /data/logs/var_20121002^[12]
ls -1tr /data/logs/var_20121002![11] 
```

但是，没有得到我所期望的。

有人可以指出我哪里出错了吗？

# java - 如何在不中断其他工作的情况下在线程中上传文件？

> ID：12724546
> 
> 赞同：0
> 
> 时间：2012-10-04T09:45:40.857
> 
> 标签：java

我正在通过编写此代码在线程中上传文件

```
import java.io.*;
public class FileUploadThread extends Thread {

    File f1, f2;
    String fileName;
    InputStream stream;
    byte[] b = new byte[1024];

    public FileUploadThread(File f1, File f2, InputStream stream, String filename) {
        System.out.println("external class file name--->" + filename);
        this.f1 = f1;
        this.f2 = f2;
        this.stream = stream;
        this.fileName = filename;
    }

    public void run() {
        try {
            f2 = new File(f1, fileName);
            OutputStream w = new FileOutputStream(f2);

            int res = stream.read(b);
            System.out.println("res = "+res);
            while (res >= 0) {
                for (int i = 0; i < res; i++) {
                    w.write(b);
                }
              res = stream.read(b);
              System.out.println("res--->" + res);
            }

        } catch (Exception e) {
            System.out.println("In the run method of the thread");
            e.printStackTrace();
        }
    }

} 
```

它向我展示了`ArrayIndexOutOfBoundsException`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:51:26.397

尝试使用`w.write(b, 0, res)`

您使用的方法本质上是调用`w.write(b, 0, b.length)`，但读取最多可以返回`b.length`字节

**更新**

你的复制循环应该看起来更像......

```
OutputStream w = null;
try {
    f2 = new File(f1, fileName);
    w = new FileOutputStream(f2);

    int res = -1;
    while ((res = stream.read(b)) != -1) {
        w.write(b, 0, res);
    }

} catch (Exception e) {
    System.out.println("In the run method of the thread");
    e.printStackTrace();
} finally {
    try {
        w.close();
    } catch (Exception e) {
    }
} 
```

别忘了，如果你打开一个流，你有责任关闭它……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:45:01.657

我不知道你的情况如何，但它对我来说很好用。我对这个程序有两个建议：

1.既然你在run函数中将f2引用赋值为`f2 = new File(f1, fileName);`，为什么还要`File f2`在构造函数中传递另一个File参数？据我所知，构造函数中的 f2 参数是没用的。

2.你不需要for循环来写。一旦你调用`w.write(b)`它，它实际上会刷新 b 中的所有字节，然后写入 f2。

# ios - 实现 UIActivityItemSource 协议

> ID：12724547
> 
> 赞同：16
> 
> 时间：2012-10-04T09:45:46.997
> 
> 标签：ios, ios6

我有这些协议方法，

`activityViewControllerPlaceholderItem:`和`activityViewController:itemForActivityType:`

但他们从来没有被叫过。我如何告诉`UIActivityViewController`他们打电话给他们？

我也有一个`UIActivityItemProvider`子类，但是我对谁调用这两种方法感到困惑。我真的很感激一些示例代码，因为我在网上找不到任何东西。:)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-06T21:59:23.977

您可以在任何地方实现协议，即使您的视图控制器也可以。只需使用`initWithActivityItems:@[self]`.

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-01-28T08:00:37.153

[JotWee](https://stackoverflow.com/users/1725834/jotwee)的回答帮助了我。

不需要子类化，`UIActivityItemSource`协议方法可以在实现分享按钮的视图控制器中实现。

添加`self`活动项目数组非常重要，如下所示（正如 JotWee 建议的那样）：

```
NSArray *activityItems = [NSArray arrayWithObjects:self, url, image, nil]; 
```

这是我的最终实现：

视图控制器.h

```
@interface ViewController : UIViewController <UIActivityItemSource> 
```

视图控制器.m

```
- (void)shareBarButtonItemClick:(UIBarButtonItem *)sender
{
    NSURL *url = [NSURL URLWithString:@"http://example.com"];
    NSURL *imageUrl = [NSURL URLWithString:@"http://example.com/images/1.jpg"];
    UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:imageUrl]];

    NSArray *activityItems = [NSArray arrayWithObjects:self, url, image, nil];

    UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];

    [self presentViewController:activityViewController animated:YES completion:nil];
}

- (id)activityViewController:(UIActivityViewController *)activityViewController itemForActivityType:(NSString *)activityType
{
    return @"Summary Text";
}

- (id)activityViewControllerPlaceholderItem:(UIActivityViewController *)activityViewController
{
    return @"";
}

- (NSString *)activityViewController:(UIActivityViewController *)activityViewController subjectForActivityType:(NSString *)activityType
{
    return @"Subject";
} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-10-04T10:27:58.787

根据文档。您传递给的活动项
`-initWithActivityItems:applicationActivities:`数组可以是数据对象数组，如字符串或图像，也可以是实现`UIActivityItemSource`协议的对象数组。

如果您传递一个实现`UIActivityItemSource`协议的对象数组，那么您的实例`UIActivityViewController`将在您的活动项目上调用这些方法。这些对象不一定是`UIActivityItemProvider`. `UIActivityItemProvider`只是一个符合这个协议的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-10T22:58:52.837

借鉴**JotWee**和**Sihad Begovic**提供的内容，这里是**Swift 5.0**版本，让您`ViewController`采用该`UIActivityItemSource`协议并使用`share`barButtonItem 触发与您的 iPhone（s）和/或 iPad（s）上的其他应用程序共享对象：

在**`viewDidLoad`**您的类的方法中`ViewController`，实现以下内容：

```
 navigationItem.rightBarButtonItem = UIBarButtonItem(barButtonSystemItem: .action, target: self, action: #selector(shareBarButtonItemClicked(_:))) 
```

在你的**`viewDidLoad`**方法之外的某个地方，但在你的`ViewController`类中，让我们实现如下`shareBarButtonItemClicked`方法：

```
@objc func shareBarButtonItemClicked(_ sender: UIBarButtonItem) {
    //Here, iOS requires that you use self for your array of items 
    let items = [self]
    let activityVC = UIActivityViewController(activityItems: items, applicationActivities: nil)

    //App activities to be excluded from sharing to
    activityVC.excludedActivityTypes = [
        UIActivityType.airDrop,
        UIActivityType.print,
        UIActivityType.saveToCameraRoll,
        UIActivityType.addToReadingList
    ]

    if UIDevice.current.userInterfaceIdiom == .pad {
        if activityVC.responds(to: #selector(getter: UIViewController.popoverPresentationController)) {
            activityVC.popoverPresentationController?.barButtonItem = sender
        }
    }

    self.present(activityVC, animated: true, completion: nil)
} 
```

现在事情变得有趣了。我们需要使您的`ViewController`类符合`UIActivityItemSource`协议并实现其所需的方法，如下所示：

```
extension ReferAFriendViewController: UIActivityItemSource {
func activityViewControllerPlaceholderItem(_ activityViewController: UIActivityViewController) -> Any {
    return String(describing: "Sharing my awesome app")
}

func activityViewController(_ activityViewController: UIActivityViewController, itemForActivityType activityType: UIActivityType) -> Any? {
    return String(describing: "Sharing my awesome app")
}

// Now you can modify and use the same above method if you want different messages/info to be presented for different apps user selects to share with. 
// The Secret is utilizing the activityType parameter. 
// You just have to uncomment below method and swap it with above method.

/*
func activityViewController(_ activityViewController: UIActivityViewController, itemForActivityType activityType: UIActivityType) -> Any? {
    if activityType == .postToTwitter {
    return "Download #MyAwesomeApp via @vickSwift."
    } else if activityType == .mail {
        return String(describing: "My awesome app is lit. So download it")
    } else {
        return String(describing: "Download my awesome app")
    }
}
*/

// Now note that when you share your app via a mail app, you might need to provide `subject` line. 
// In fact, the `UIActivityItemSource` protocol provide us an optional delegate method to accomplish just that; implemented below: 
func activityViewController(_ activityViewController: UIActivityViewController, subjectForActivityType activityType: UIActivityType?) -> String {
    return String(describing: "My Awesome app email's subject title")
}
} 
```

这就是您采用类以符合 UIActivityItemSource 协议并实现其方法的方式。要阅读更多内容，我发现[HackingWithSwift](https://www.hackingwithswift.com/articles/118/uiactivityviewcontroller-by-example)网站上的这篇网络文章非常有见地。

快乐编码！

# eclipse - 打开的编辑器数量，除了那些固定的

> ID：12724548
> 
> 赞同：-1
> 
> 时间：2012-10-04T09:45:47.940
> 
> 标签：eclipse, eclipse-plugin

有没有办法增加关闭前打开的编辑器数量，而不考虑那些被固定的？

那些被固定的很重要，所以如果我把数字放在 6，打开 6，pin 2，那么我应该可以再打开 2 个。

此外，关闭所有但固定！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:50:22.293

在常规-> 编辑下

“当所有编辑器都变脏或固定时” - 选择打开新编辑器

（我使用的是 Eclipse 3.7.2）

# c# - Microsoft.WindowsAPICodePack.Shell 无法加载文件或程序集

> ID：12724551
> 
> 赞同：3
> 
> 时间：2012-10-04T09:45:58.727
> 
> 标签：c#

当我尝试使用此 dll 运行项目时。我收到以下错误：

> 无法加载文件或程序集“Microsoft.WindowsAPICodePack.Shell, Version=1.0.0.0, Culture=neutral, PublicKeyToken=90ba9c70f846762e”或其依赖项之一。该系统找不到指定的文件。

我已经尝试了这些属性的所有可能组合：

![项目属性](../Images/13595517a7aee91c4950d75e8dec7577.png)

还尝试重新添加参考。解决方案中有两个项目，两个项目都有参考（如果该信息有任何用处）。

这是一个 C#、.NET 4 项目。

是什么导致了错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-08-18T19:12:37.180

甚至 MS 包也给出了同样的错误，我确实安装了这个 [https://github.com/contre/Windows-API-Code-Pack-1.1](https://github.com/contre/Windows-API-Code-Pack-1.1)并且它运行良好

[![在此处输入图像描述](../Images/08c9dc8e86f5a6df63a6ef95f45d0a56.png)](https://i.stack.imgur.com/WSEgS.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-10T06:59:12.977

这实际上不是一个解决方案，因此解决了错误。但我找到了一个效果很好的替代包：

[![在此处输入图像描述](../Images/5e11cbbfced105df5537d5e310e481a2.png)](https://i.stack.imgur.com/3kqz6.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-26T12:13:16.990

我遇到了同样的问题，并通过设置默认文件夹路径解决了它，如下所示：

```
CommonOpenFileDialog dialog = new CommonOpenFileDialog();
dialog.InitialDirectory = Directory.GetCurrentDirectory(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-10T06:56:02.930

我不能代表 JJ_Jason，但我相信我收到了这个错误，因为我使用了错误的 Microsoft.WindowsAPICodePack.Shell。

有三种：

1：Microsoft.WindowsAPICodePack.Shell，由微软编写

2：Microsoft.WindowsAPICodePack.Shell，由 Lischee 编写

3：Microsoft-WindowsAPICodePack.Shell，由 rpastric 编写

我在使用 Lischee 版本的软件包时收到此错误，但是当我切换到 Microsoft 版本时，问题就消失了。我假设 Malior 和 BigOmar 有同样的问题，但相反。

# php - 我在哪里添加 return true 或 false 在这里

> ID：12724562
> 
> 赞同：0
> 
> 时间：2012-10-04T09:46:20.800
> 
> 标签：php

我正在使用下面的代码来重新调整 php 中的图像大小。它在一个函数内部。如果 $imgSource 为真，它就会执行。如果其中的某些内容失败，我希望它返回 false（可能 imagecopyresampled 失败或其他失败）。问题是，我在哪里放置 return true 或 false 声明。现在，即使事情进展顺利，它也会返回 false 。我是否必须为那里的所有内容编写 if 语句。你能建议一个好的方法来做到这一点。

```
if ($imgSource)
{

list($width,$height)=getimagesize($thisImage);

$dispImageWidth=500;
$dispImageHeight=($height/$width)*$dispImageWidth;
$tempDisplayImage=imagecreatetruecolor($dispImageWidth,$dispImageHeight);

$thumbImageWidth=250;
$thumbImageHeight=($height/$width)*$thumbImageWidth;
$tempThumbImage=imagecreatetruecolor($thumbImageWidth,$thumbImageHeight);

imagecopyresampled($tempDisplayImage,$imgSource,0,0,0,0,$dispImageWidth,$dispImageHeight,$width,$height);
imagecopyresampled($tempThumbImage,$imgSource,0,0,0,0,$thumbImageWidth,$thumbImageHeight,$width,$height);

$displayImageTarget = $thisPath.'disp_'.$fileName;
$thumbImageTarget = $thisPath.'thumb_'.$fileName;

imagejpeg($tempDisplayImage,$displayImageTarget,100);
imagejpeg($tempThumbImage,$thumbImageTarget,100);

imagedestroy($imgSource);
imagedestroy($tempDisplayImage);
imagedestroy($tempThumbImage);
unlink($thisImage); 

//Where do I put the return true or false?

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:48:52.713

做一些像`if(! your statement ) return false;`

**代码** if ($imgSource) {

```
list($width,$height)=getimagesize($thisImage);

$dispImageWidth=500;
$dispImageHeight=($height/$width)*$dispImageWidth;
$tempDisplayImage=imagecreatetruecolor($dispImageWidth,$dispImageHeight);

$thumbImageWidth=250;
$thumbImageHeight=($height/$width)*$thumbImageWidth;
$tempThumbImage=imagecreatetruecolor($thumbImageWidth,$thumbImageHeight);

if(! imagecopyresampled($tempDisplayImage,$imgSource,0,0,0,0,$dispImageWidth,$dispImageHeight,$width,$height)) return false;
if(! imagecopyresampled($tempThumbImage,$imgSource,0,0,0,0,$thumbImageWidth,$thumbImageHeight,$width,$height)) return false;

$displayImageTarget = $thisPath.'disp_'.$fileName;
$thumbImageTarget = $thisPath.'thumb_'.$fileName;

if(!imagejpeg($tempDisplayImage,$displayImageTarget,100)) return false;
if(!imagejpeg($tempThumbImage,$thumbImageTarget,100)) return false;

if(!imagedestroy($imgSource)) return false;
if(!imagedestroy($tempDisplayImage)) return false;
if(!imagedestroy($tempThumbImage)) return false;
if(!unlink($thisImage)) return false;

return true;

} 
```

如果您只想检查未设置

做就是了`return unlink($thisImage);`

**unlink 成功时返回 TRUE，失败时返回 FALSE。**见[php手册](http://php.net/manual/en/function.unlink.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:57:21.520

当某些事情失败时，您可以使用“Try catch”返回 false。

```
if ($imgSource)
{

try

{

 list($width,$height)=getimagesize($thisImage);

 $dispImageWidth=500;
 $dispImageHeight=($height/$width)*$dispImageWidth;
 $tempDisplayImage=imagecreatetruecolor($dispImageWidth,$dispImageHeight);

 $thumbImageWidth=250;
 $thumbImageHeight=($height/$width)*$thumbImageWidth;
 $tempThumbImage=imagecreatetruecolor($thumbImageWidth,$thumbImageHeight);

 imagecopyresampled($tempDisplayImage,$imgSource,0,0,0,0,$dispImageWidth,$dispImageHeight,$width,$height);
 imagecopyresampled($tempThumbImage,$imgSource,0,0,0,0,$thumbImageWidth,$thumbImageHeight,$width,$height);

 $displayImageTarget = $thisPath.'disp_'.$fileName;
 $thumbImageTarget = $thisPath.'thumb_'.$fileName;

 imagejpeg($tempDisplayImage,$displayImageTarget,100);
 imagejpeg($tempThumbImage,$thumbImageTarget,100);

 imagedestroy($imgSource);
 imagedestroy($tempDisplayImage);
 imagedestroy($tempThumbImage);
 unlink($thisImage); 

 return true;

}

catch(Exception $e)

{

  return false;

}
//Where do I put the return true or false?

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:58:22.550

许多图像函数根据成功或失败返回真或假，因此您可以执行以下操作：

```
if(imagejpeg($tempDisplayImage,$displayImageTarget,100)==false){
    return false;
} 
```

对于您使用的每个支持它的图像功能。

然后加上 return true; 在您的功能结束时。

# java - 谷歌地理编码的“连接被拒绝”错误

> ID：12724565
> 
> 赞同：0
> 
> 时间：2012-10-04T09:46:29.857
> 
> 标签：java, google-maps, geolocation, geocoding

我编写了一个“java”程序来使用地理编码获取给定邮政编码的坐标（纬度和经度）。我在家中测试了该程序，它运行良好，但是当我在办公室运行相同的程序时，它会抛出“网络错误”。堆栈跟踪如下所示。

> [2012-10-04 10:50:34.337 MESZ] [main] 错误 com.google.code.geocoder.Geocoder - 连接被拒绝：连接 java.net.ConnectException：连接被拒绝：在 java.net.DualStackPlainSocketImpl.connect0 连接（本机方法）~[na:1.7.0_03] at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69) ~[na:1.7.0_03] at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)~ [na:1.7.0_03] 在 java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200) ~[na:1.7.0_03] 在 java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182) ~[na:1.7 .0_03] 在 java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157) ~[na:1.7.0_03] 在 java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391) ~[na:1.7.0_03] 在java.net.Socket。connect(Socket.java:579) ~[na:1.7.0_03] at java.net.Socket.connect(Socket.java:528) ~[na:1.7.0_03] at sun.net.NetworkClient.doConnect(NetworkClient. java:180) ~[na:1.7.0_03] 在 sun.net.www.http.HttpClient.openServer(HttpClient.java:388) ~[na:1.7.0_03] 在 sun.net.www.http.HttpClient。 openServer(HttpClient.java:483) ~[na:1.7.0_03] at sun.net.www.http.HttpClient.(HttpClient.java:213) ~[na:1.7.0_03] at sun.net.www.http .HttpClient.New(HttpClient.java:300) ~[na:1.7.0_03] 在 sun.net.www.http.HttpClient.New(HttpClient.java:316) ~[na:1.7.0_03] 在 sun.net .www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:992) ~[na:1.7.0_03] at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:928) ~[na: 1.7.0_03] 在 sun.net.www.protocol.http.HttpURLConnection。connect(HttpURLConnection.java:846) ~[na:1.7.0_03] 在 sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1296) ~[na:1.7.0_03] 在 java.net。 URL.openStream(URL.java:1035) ~[na:1.7.0_03] at com.google.code.geocoder.Geocoder.request(Geocoder.java:72) ~[geocoder-java-0.9.jar:na] at com.google.code.geocoder.Geocoder.geocode(Geocoder.java:63) ~[geocoder-java-0.9.jar:na] 在 de.dmc.intersport.enfinity.ch.b2c.app.capi.GoogleGeoLocation.getGeoResults (GoogleGeoLocation.java:36) [lib/:na] 在 de.dmc.intersport.enfinity.ch.b2c.app.capi.GoogleGeoLocation。(GoogleGeoLocation.java:21) [lib/:na] 在 de.dmc。 intersport.enfinity.ch.b2c.app.capi.GoogleGeoLocation.main(GoogleGeoLocation.java:67) [lib/:na]HttpURLConnection.getInputStream(HttpURLConnection.java:1296) ~[na:1.7.0_03] at java.net.URL.openStream(URL.java:1035) ~[na:1.7.0_03] at com.google.code.geocoder。 Geocoder.request(Geocoder.java:72) ~[geocoder-java-0.9.jar:na] at com.google.code.geocoder.Geocoder.geocode(Geocoder.java:63) ~[geocoder-java-0.9.jar :na] 在 de.dmc.intersport.enfinity.ch.b2c.app.capi.GoogleGeoLocation.getGeoResults(GoogleGeoLocation.java:36) [lib/:na] 在 de.dmc.intersport.enfinity.ch.b2c.app .capi.GoogleGeoLocation.(GoogleGeoLocation.java:21) [lib/:na] 在 de.dmc.intersport.enfinity.ch.b2c.app.capi.GoogleGeoLocation.main(GoogleGeoLocation.java:67) [lib/:na ]HttpURLConnection.getInputStream(HttpURLConnection.java:1296) ~[na:1.7.0_03] at java.net.URL.openStream(URL.java:1035) ~[na:1.7.0_03] at com.google.code.geocoder。 Geocoder.request(Geocoder.java:72) ~[geocoder-java-0.9.jar:na] at com.google.code.geocoder.Geocoder.geocode(Geocoder.java:63) ~[geocoder-java-0.9.jar :na] 在 de.dmc.intersport.enfinity.ch.b2c.app.capi.GoogleGeoLocation.getGeoResults(GoogleGeoLocation.java:36) [lib/:na] 在 de.dmc.intersport.enfinity.ch.b2c.app .capi.GoogleGeoLocation.(GoogleGeoLocation.java:21) [lib/:na] 在 de.dmc.intersport.enfinity.ch.b2c.app.capi.GoogleGeoLocation.main(GoogleGeoLocation.java:67) [lib/:na ]请求（Geocoder.java:72）~[geocoder-java-0.9.jar:na] at com.google.code.geocoder.Geocoder.geocode(Geocoder.java:63)~[geocoder-java-0.9.jar:na] ] 在 de.dmc.intersport.enfinity.ch.b2c.app.capi.GoogleGeoLocation.getGeoResults(GoogleGeoLocation.java:36) [lib/:na] 在 de.dmc.intersport.enfinity.ch.b2c.app.capi .GoogleGeoLocation.(GoogleGeoLocation.java:21) [lib/:na] 在 de.dmc.intersport.enfinity.ch.b2c.app.capi.GoogleGeoLocation.main(GoogleGeoLocation.java:67) [lib/:na]请求（Geocoder.java:72）~[geocoder-java-0.9.jar:na] at com.google.code.geocoder.Geocoder.geocode(Geocoder.java:63)~[geocoder-java-0.9.jar:na] ] 在 de.dmc.intersport.enfinity.ch.b2c.app.capi.GoogleGeoLocation.getGeoResults(GoogleGeoLocation.java:36) [lib/:na] 在 de.dmc.intersport.enfinity.ch.b2c.app.capi .GoogleGeoLocation.(GoogleGeoLocation.java:21) [lib/:na] 在 de.dmc.intersport.enfinity.ch.b2c.app.capi.GoogleGeoLocation.main(GoogleGeoLocation.java:67) [lib/:na]21) [lib/:na] 在 de.dmc.intersport.enfinity.ch.b2c.app.capi.GoogleGeoLocation.main(GoogleGeoLocation.java:67) [lib/:na]21) [lib/:na] 在 de.dmc.intersport.enfinity.ch.b2c.app.capi.GoogleGeoLocation.main(GoogleGeoLocation.java:67) [lib/:na]

我认为这是“防火墙设置”的问题。我能做些什么来摆脱这个。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:56:39.340

由于**防火墙限制**，您可能没有足够的权限从办公室计算机连接**Google Geo Coding API**。这就是为什么您在家中成功运行的同一程序面临***“网络错误”的原因。***尝试在其他没有防火墙限制的计算机上运行相同的应用程序/程序。

 ***您可以向公司的网络管理员寻求帮助，以***绕过*****计算机IP**的防火墙限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:20:02.217

我找到了上述问题的解决方案，必须在你的 r java 代码中设置如下代理设置

> System.getProperties().put("http.proxyHost", "proxyname"); System.getProperties().put("http.proxyPort", "portnumber");

那么事情应该没问题***

# php - 如何在php中更新mysql数据库

> ID：12724566
> 
> 赞同：1
> 
> 时间：2012-10-04T09:46:29.967
> 
> 标签：php, mysql

```
$query="update attendance 
SET 
    `day1`='$day1', `day2`='$day2',  `day3`='$day3', `day4`='$day4', 
    `day5`='$day5', `day6`='$day6', `day7`='$day7', `day8`='$day8', 
    `day9`='$day9', `day10`='$day10', `day11`='$day11', `day12`='$day12', 
    `day13`='$day13', `day14`='$day14', `day15`='$day15', `day16`='$day16', 
    `day17`='$day17', `day18`='$day18', `day19`='$day19', `day20`='$day20', 
    `day21`='$day21', `day22`='$day22', `day23`='$day23', `day24`='$day24', 
    `day25`='$day25', `day26`='$day26', `day27`='$day27', `day28`='$day28', 
    `day29`='$day29', `day30`='$day30', `day31`='$day31', `accident`='$a1', 
    `disiplinary`='$d1', `family_death`='$fd1', `family_illness`='$fi1', 
    `holiday`='$h1', `illness`='$i1', `jury_duty`='$j1', `leave`='$l1', 
    `layoff`='$lo1', `personal`='$p1', `tardy`='$t1', `vacation`='$v1' 
WHERE `month`='January'";

$result=mysql_query($query); 
```

这里`day1`更新的值（值为1），下一次更新的值为`day2`1，此时`day2`值被更新（1），但`day1`值变为零。

我所做的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:46:39.493

您表达查询的方式，所有变量`$day1`都必须在 PHP 中设置。如果不是，则将一个空字符串粘贴到请求中，然后由 MySQL 服务器将其转换为零。

因此，如果您只想修改`day2`，请执行以下操作：

```
UPDATE attendance SET day2 = ? WHERE month = 'January' 
```

也就是说，您可以通过多种方式改进当前的方法。

*   您不应该使用[`mysql_query`](http://de2.php.net/manual/en/function.mysql-query.php)它，因为它已被[弃用](http://de2.php.net/manual/en/mysqlinfo.api.choosing.php)。
*   您不应该直接在查询中包含变量，因为这会为错误和 SQL 注入漏洞打开大门。`?`改为使用占位符，并在执行此查询时[提供实际值。](http://de2.php.net/manual/en/mysqli-stmt.bind-param.php)
*   每天有一列看起来是一个非常糟糕的数据库模式。取而代之的是一张桌子，每天有一排。您可以根据输出计算每月概览，但一般来说，这样的请求在数据库级别上会更容易处理。如果您每个月想要一些列，您可以将这些列放在一个额外的表中。
*   您可能应该按照刚才描述的方式使用[`DATE`类型](http://dev.mysql.com/doc/refman/5.6/en/datetime.html)来描述每一天。如果你真的必须有一个每个月有一行的表，那么你可能仍然用 a`DATE`来描述它，用当月的第一天来标识整个月。这将允许您轻松地在该列上使用日期和时间函数。如果您想要单独的年份和月份列，我想我仍然会按数字而不是名称来识别月份。

# php - BigCommerce - 如何在前端查找类别 ID

> ID：12724567
> 
> 赞同：1
> 
> 时间：2012-10-04T09:46:30.850
> 
> 标签：php, e-commerce

当您在类别页面中时，无论如何都可以获得类别 ID（动态）。

例如，我期待类似 %%GLOBAL_CategoryId%%

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-19T15:29:20.503

我不是专家，花了很多时间寻找这个问题的答案，但没有任何运气。我确实查看了我试图编辑的网站的源代码，并且幸运地猜到了答案。我意识到这个问题很老，但正如我所提到的，我没有运气在其他地方找到答案。在 BigCommerce 中获取您正在使用的页面的类别 ID：

%%GLOBAL_CatId%%

# git - 将文件夹结构与 github 和 Web 服务器配对以进行部署设置

> ID：12724574
> 
> 赞同：1
> 
> 时间：2012-10-04T09:47:05.257
> 
> 标签：git, version-control, phpstorm

我现在正在 github 环境中开发一个项目。

在 github 上是这样的：

```
project-name-folder
-- application
-- htdocs
-- system 
```

在 Web 服务器端，因为我们在子域上运行：

```
/
-- application
-- public_html
-- -- subdomain_name (counterpart of htdocs above)
-- system 
```

如何通过在 PHP Storm 上配置部署来将这两者配对？我需要一个答案或一盏灯才能找到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:50:58.350

将 htdocs 保存在您的存储库中并创建一个符号链接：

```
/
-- application
-- htdocs
-- public_html
-- -- subdomain_name -> ../htdocs
-- system 
```

符号链接不需要受版本控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:52:06.780

PhpStorm 中有映射功能，您可以通过本地、远程和相对路径映射文件夹。您应该首先设置部署服务。

# asp.net - ASP.NET 中的 MailChimp oauth2 不断返回 invalid_grant

> ID：12724581
> 
> 赞同：3
> 
> 时间：2012-10-04T09:47:22.720
> 
> 标签：asp.net, asp.net-mvc, oauth, mailchimp

我正在开发一个提供与 MailChimp 集成的新应用程序。基本上，它使用户能够轻松地将他们的客户联系信息直接导出到 MailChimp 帐户（即，导出到 MailChimp 内的特定邮件列表）。所有这些都有效，并且与我的问题有些无关。

为了不要求用户每次都输入 MailChimp-credentials，我即将实现 oauth2 授权工作流程，如下所述：http: [//apidocs.mailchimp.com/oauth2/](http://apidocs.mailchimp.com/oauth2/)

它在第 1-3 步中工作得很好，但第 4 步正在杀死我。这是我第一次使用 oauth，但我似乎了解基础知识。

**这是我的问题：**

当我对[https://login.mailchimp.com/oauth2/token](https://login.mailchimp.com/oauth2/token) -URI 进行 POST 调用以获取最终访问令牌时，我不断收到 JSON 结果中的错误：**“invalid_grant”**

我检查了请求和响应流，我的 url 编译正确。

这是我在控制器中的代码：

（GrantEcoAccess 只是授予对另一个应用程序的访问权限 - 其余的应该是不言自明的）

```
public class HomeController : ApplicationController
{

    private readonly string authorize_uri = "https://login.mailchimp.com/oauth2/authorize";
    private readonly string access_token_uri = "https://login.mailchimp.com/oauth2/token";
    private readonly string mailchimp_clientid2 = "xxx";
    private readonly string mailchimp_secret2 = "yyy";

    ...

    public ActionResult GrantEcoAccess()
    {

        //if exist: use saved token
        var user = (Mailchimp_users)Session["user"];
        if (!string.IsNullOrWhiteSpace(user.EcoToken))
            return RedirectToAction("GrantMailChimpAccess");

        // if !
        var url = "https://secure.e-conomic.com/secure/api1/requestaccess.aspx?role=superuser&appId=MailChimp&redirectUrl=http://localhost:18017/Home/IncomingToken";
        Redirect(url).ExecuteResult(ControllerContext);
        return null;
    }

    public ActionResult IncomingToken(string token)
    {
        var user = (Mailchimp_users)Session["user"];
        user.EcoToken = token;
        EcoSession.DataSession.Refresh(System.Data.Objects.RefreshMode.ClientWins, user);
        EcoSession.DataSession.SaveChanges();

        return RedirectToAction("GrantMailChimpAccess");
    }

    public ActionResult GrantMailChimpAccess()
    {

        //if exist: use saved token
        var user = (Mailchimp_users)Session["user"];
        if (!string.IsNullOrWhiteSpace(user.MailChimpToken))
            return RedirectToAction("Index", "Subscribe");

        //if !
        var url = string.Format("{0}?response_type=code&client_id={1}&redirect_uri=", authorize_uri, mailchimp_clientid2, "http://127.0.0.1:18017/Home/IncomingMailChimpToken");
        Redirect(url).ExecuteResult(ControllerContext);
        return null;
    }

    public ActionResult IncomingMailChimpToken(string code)
    {

        var url = "https://login.mailchimp.com/oauth2/token?grant_type=authorization_code&client_id=XX&client_secret=XX&code=" + code + "&redirect_uri=http://127.0.0.1:18017/Home/AuthComplete";
        //var url = string.Format("?grant_type=authorization_code&client_id={0}&client_secret={1}&code={2}&redirect_uri={3}", mailchimp_clientid, mailchimp_secret, code, Url.Action("AuthComplete"));

        Response.Clear();

        StringBuilder sb = new StringBuilder();
        sb.Append("<html>");
        sb.AppendFormat(@"<body onload='document.forms[""form""].submit()'>");
        sb.AppendFormat("<form name='form' action='{0}' method='post'>", access_token_uri);

        sb.Append("<input type='hidden' name='grant_type' value='authorization_code'>");
        sb.AppendFormat("<input type='hidden' name='client_id' value='{0}'>", mailchimp_clientid2);
        sb.AppendFormat("<input type='hidden' name='client_secret' value='{0}'>", mailchimp_secret2);
        sb.AppendFormat("<input type='hidden' name='code' value='{0}'>", code);
        sb.AppendFormat("<input type='hidden' name='redirect_uri' value='{0}'>", "http://127.0.0.1:18017/Home/AuthComplete");
        // Other params go here

        sb.Append("</form>");
        sb.Append("</body>");
        sb.Append("</html>");

        Response.Write(sb.ToString());
        Response.End();

        return null;

    }

    public ActionResult AuthComplete(string access_token, string expires_in, string scope)
    {
        if (string.IsNullOrWhiteSpace(access_token))
            throw new Exception("Could not authorize user with MailChimp");

        var user = (Mailchimp_users)Session["user"];
        user.MailChimpToken = access_token;
        EcoSession.DataSession.Refresh(System.Data.Objects.RefreshMode.ClientWins, user);
        EcoSession.DataSession.SaveChanges();

        return RedirectToAction("Index", "Subscribe");
    }

} 
```

杀死我的是第 4 步，而不是第 5 步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-10T13:17:43.737

您应该使用 post 在正文中发送您的请求参数，如果您使用 curl php，您可以这样做：

```
$value = http_build_query($params); //params is an array
curl_setopt($ch, CURLOPT_POSTFIELDS, $value); 
```

值应如下所示：

```
grant_type=authorization_code&client_id=635959587059&client_secret=0da3e7744949e1406b7b250051ee1a95&code=1edf2589e664fd317f6a7ff5f97b42f7&redirect_uri=http%3A%2F%2F192.168.1.8%2Foauth%2Fcomplete.php 
```

请注意，您应该以查询字符串的形式创建一个正文请求，不要发送 json，他们不会找到您的参数。如果您在执行此操作后收到无效的授权响应或其他内容，请检查您用于获取第一个代码的重定向 uri 是否与您发送以获取令牌的重定向 uri 完全相同。

此外，对于那些使用 PHP 的人，为了匹配[mailchimp 文档](http://apidocs.mailchimp.com/oauth2/#full-flow-with-requestresponse-data)状态使用这个：

```
curl_setopt($ch, CURLOPT_USERAGENT, 'oauth2-draft-v10');
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/x-www-form-urlencoded')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T01:09:48.990

如果您不想自己实现它，那么有一个不错的包装器，它可以处理对 MailChimp 的 oAuth2 和 RESTapi 调用。

[https://github.com/jamierytlewski/eepOAuth2-MVC](https://github.com/jamierytlewski/eepOAuth2-MVC)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:18:39.537

第 4 步是“您的应用程序必须使用代码向 access_token_uri 发出带外请求”

这里的要点是“带外”。您必须构建并发送一个 post 请求**server-side**。客户不应该有你的 mailchimp_secret

您的 IncomingMailChimpToken 可能如下所示：

```
 public ActionResult IncomingMailChimpToken(string code)
    {
        string mcPostData = String.Format(
            "grant_type={0}&client_id={1}&client_secret={2}&code={3}&redirect_url={4}",
            System.Web.HttpUtility.UrlEncode("authorization_code"),
            System.Web.HttpUtility.UrlEncode(mailchimp_clientid2),
            System.Web.HttpUtility.UrlEncode(mailchimp_secret2),
            System.Web.HttpUtility.UrlEncode(code),
            System.Web.HttpUtility.UrlEncode("http://127.0.0.1:18017/Home/AuthComplete")
            );
        WebRequest request = WebRequest.Create(access_token_uri);
        // Set the Method property of the request to POST.
        request.Method = "POST";
        request.ContentType = "application/json";
        byte[] byteArray = Encoding.UTF8.GetBytes(mcPostData);
        request.ContentLength = byteArray.Length;
        // Get the request stream.
        Stream dataStream = request.GetRequestStream();
        // Write the data to the request stream.
        dataStream.Write(byteArray, 0, byteArray.Length);
        // Close the Stream object.
        dataStream.Close();
        // Get the response.
        WebResponse response = request.GetResponse();
        // Get the stream containing content returned by the server.
        dataStream = response.GetResponseStream();
        // Open the stream using a StreamReader for easy access.
        StreamReader reader = new StreamReader(dataStream);
        // Read the content.
        string responseFromServer = reader.ReadToEnd();
        // Cleanup the streams and the response.
        reader.Close ();
        dataStream.Close ();
        response.Close ();

        // parse the json responseFromServer to extract token, expires_in and scope
        // and call AuthComplete with these params
    } 
```

# sql-server-2012 - 数据清理图标不在工具栏中

> ID：12724582
> 
> 赞同：2
> 
> 时间：2012-10-04T09:47:24.357
> 
> 标签：sql-server-2012, data-quality-services, sql-server-2012-datatools

我安装了带有数据质量服务的 SQL Server 2012 - 企业版。

现在，我想使用数据质量服务，来自集成服务包中的数据清理任务。问题是我在工具栏中找不到任务。我是否必须为 Visual Studio 或 sql server 数据工具安装插件？

![在此处输入图像描述](../Images/f0164f03b32b70768ac2db9eb3ce086a.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T16:21:23.133

DQS Cleansing 是一个 DataFlow 组件，因此它仅在您位于 DataFlow 选项卡中时才会显示...

![在此处输入图像描述](../Images/0d09e32a1f6a14d76e594a97957b9680.png)

# android - 单击表单元格上的侦听器未调用单击方法？

> ID：12724585
> 
> 赞同：0
> 
> 时间：2012-10-04T09:47:31.833
> 
> 标签：android, onclick, tablelayout

我通过以编程方式膨胀行创建了一个表，并尝试在这些行中的每个视图上设置点击侦听器，但它似乎不起作用。

这是我的充气机以及我如何调用我的点击方法。

```
 inflater = (LayoutInflater) getActivity().getSystemService(
            Context.LAYOUT_INFLATER_SERVICE);

    for (int i = 0; i < time.length; i++) {

        TableRow row = (TableRow) inflater.inflate(R.layout.week_view_cust,
                t_layout, false);
        TextView tv = (TextView) row.findViewById(R.id.time_week_tv);
        LinearLayout ll = (LinearLayout) row.findViewById(R.id.time_ll1);
        ll = (LinearLayout) row.findViewById(R.id.time_ll2);
        ll = (LinearLayout) row.findViewById(R.id.time_ll3);
        ll = (LinearLayout) row.findViewById(R.id.time_ll4);
        ll = (LinearLayout) row.findViewById(R.id.time_ll5);
        ll = (LinearLayout) row.findViewById(R.id.time_ll6);
        ll = (LinearLayout) row.findViewById(R.id.time_ll7);
        (new CustomListener()).onClick(ll);
        tv.setText("" + time[i]);
        t_layout.addView(row);

    } 
```

这是我的点击监听类。

```
 public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.time_ll1:

        LinearLayout ll = (LinearLayout)v.findViewById(R.id.time_ll1);
        TextView tv = new TextView(v.getContext());
        tv.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
        tv.setTextSize(12);
        tv.setTextColor(000000);
        Log.i("============", "success");
        tv.setText("hello");
        ll.addView(tv);
        break;

    case R.id.time_ll2:
        break;
    case R.id.time_ll3:
        break;
    case R.id.time_ll4:
        break;
    case R.id.time_ll5:
        break;
    case R.id.time_ll6:
        break;
    case R.id.time_ll7:
        break;
    } 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:00:53.693

我想你应该像这样为每个 LinearLayout设置**onClickListener ：**

猜测 CustomListener 正在实现您的 onClick() 方法

```
LinearLayout ll = (LinearLayout) row.findViewById(R.id.time_ll1);
ll.setOnClickListener(new CustomListener());
ll = (LinearLayout) row.findViewById(R.id.time_ll2);
ll.setOnClickListener(new CustomListener());
ll = (LinearLayout) row.findViewById(R.id.time_ll3);
ll.setOnClickListener(new CustomListener());
ll = (LinearLayout) row.findViewById(R.id.time_ll4);
ll.setOnClickListener(new CustomListener());
ll = (LinearLayout) row.findViewById(R.id.time_ll5);
ll.setOnClickListener(new CustomListener());
ll = (LinearLayout) row.findViewById(R.id.time_ll6);
ll.setOnClickListener(new CustomListener());
ll = (LinearLayout) row.findViewById(R.id.time_ll7);
ll.setOnClickListener(new CustomListener()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:00:06.880

据我所知，您没有设置`onClickListener` 您需要调用`ll.setOnClickListener(this);`每个单元格

# iphone - IOS 6 mapview中缩放级别的无关行为

> ID：12724589
> 
> 赞同：5
> 
> 时间：2012-10-04T09:47:42.243
> 
> 标签：iphone, ios6, ios6-maps

我一直在使用以下代码来缩放地图视图，以便所有注释将以最佳缩放级别同时显示在视图中。但在 IOS 6 中，缩放级别似乎存在一些问题。测试几个案例，我发现 1\. 如果联系人在美国，当地图加载时，它会在其他地方缩放。2.英国地区的缩放级别似乎是正确的（据我测试）。3\. 当我同时包含来自英国和美国的联系人时，英国联系人会正确缩放，但美国联系人不在视图中。但轻轻滑动将确保所有联系人都适合视图并正确缩放。

```
-(void)zoomToFitMapAnnotations:(MKMapView*)mapViews insideArray:(NSArray*)anAnnotationArray
{ 
if([mapViews.annotations count] == 0) return;

CLLocationCoordinate2D topLeftCoord;
topLeftCoord.latitude = -90;
topLeftCoord.longitude = 180;

CLLocationCoordinate2D bottomRightCoord;
bottomRightCoord.latitude = 90;
bottomRightCoord.longitude = -180;

for(MKPointAnnotation* annotation in anAnnotationArray)
{
    topLeftCoord.longitude = fmin(topLeftCoord.longitude, annotation.coordinate.longitude);
    topLeftCoord.latitude = fmax(topLeftCoord.latitude, annotation.coordinate.latitude);

    bottomRightCoord.longitude = fmax(bottomRightCoord.longitude, annotation.coordinate.longitude);
    bottomRightCoord.latitude = fmin(bottomRightCoord.latitude, annotation.coordinate.latitude);
}

MKCoordinateRegion region;
region.center.latitude = topLeftCoord.latitude - (topLeftCoord.latitude - bottomRightCoord.latitude) * 0.5;
region.center.longitude = topLeftCoord.longitude + (bottomRightCoord.longitude - topLeftCoord.longitude) * 0.5;
region.span.latitudeDelta = fabs(topLeftCoord.latitude - bottomRightCoord.latitude) * 1.1; // Add a little extra space on the sides
region.span.longitudeDelta = fabs(bottomRightCoord.longitude - topLeftCoord.longitude) * 1.1; // Add a little extra space on the sides

region = [mapViews regionThatFits:region];
[mapView setRegion:region animated:YES];
} 
```

加载带有注释的地图视图后，在随机情况下，我得到以下日志

```
<GEOTileSource: 0x108f6470>: Error downloading tiles Server Error: Error Domain=GEOErrorDomain Code=-204 "The operation couldn’t be completed. (GEOErrorDomain error -204.)" UserInfo=0x18a5b9c0 {UnderlyingErrors=(
"Error Domain=GEOErrorDomain Code=-204 \"The operation couldn\U2019t be completed. (GEOErrorDomain error -204.)\""
)} 
```

这可能是什么原因，我该如何纠正？谷歌搜索后找不到任何有用的东西。

我无法识别这种缩放不一致的任何特定模式。上面的代码在以前的 IOS 版本中运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:36:50.987

我几乎对你的问题提出了赏金，但后来我注意到，使用 iOS6 中的新地图，你无法缩小以查看整个世界（在地图应用程序中自己尝试）。您可以通过注释掉`for`循环并记录以下内容来确定最大缩放级别：

```
NSLog(@"region.span.latitudeDelta = %f", region.span.latitudeDelta);
NSLog(@"longitudeDelta = %f", region.span.longitudeDelta);

[map setRegion:region animated:NO];

NSLog(@"region.span.latitudeDelta = %f", map.region.span.latitudeDelta);
NSLog(@"longitudeDelta = %f", map.region.span.longitudeDelta); 
```

输出如下所示：

```
region.span.latitudeDelta = 179.283409
longitudeDelta = 360.000000
region.span.latitudeDelta = 76.269114
longitudeDelta = 98.437499 
```

# database - 我可以同时拥有一个主键和一个单独的聚集索引吗？

> ID：12724593
> 
> 赞同：1
> 
> 时间：2012-10-04T09:47:50.707
> 
> 标签：database, database-design, indexing, primary-key, clustered-index

假设我已经有一个主键，它确保了唯一性。我的主键也是记录的排序索引。**但是，我对磁盘中记录的物理顺序（如果有的话）的主键任务**感到好奇。实际的问题是**我可以为这些记录创建一个单独的聚集索引吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T12:16:13.533

[根据与@Catcall 的讨论，这是在聚集表上测试](https://stackoverflow.com/a/12730056/533120)[覆盖](http://use-the-index-luke.com/sql/glossary/covering-index)二级索引的大小和性能特征的尝试。

所有测试都是在 MS SQL Server 2008 R2 Express 上完成的（在一个功率相当不足的 VM 内）。

## 尺寸

首先，我用二级索引创建了一个聚集表，并用一些测试数据填充它：

```
CREATE TABLE THE_TABLE (
    FIELD1 int,
    FIELD2 int NOT NULL,
    CONSTRAINT THE_TABLE_PK PRIMARY KEY (FIELD1)
);

CREATE INDEX THE_TABLE_IE1 ON THE_TABLE (FIELD2) INCLUDE (FIELD1);

DECLARE @COUNT int = 1;
WHILE @COUNT <= 1000000 BEGIN
    INSERT INTO THE_TABLE (FIELD1, FIELD2) VALUES (@COUNT, @COUNT);
    SET @COUNT = @COUNT + 1;
END;

EXEC sp_spaceused 'THE_TABLE'; 
```

最后一行给了我以下结果......

```
name        rows        reserved    data        index_size  unused
THE_TABLE   1000000     27856 KB    16808 KB    11008 KB    40 KB 
```

因此，索引的 B-Tree (11008 KB) 实际上小于表的 B-Tree (16808 KB)。

## 速度

我在表中的数据范围内生成了一个随机数，然后将其作为从表中选择整行的标准。重复 10000 次，测量总时间：

```
DECLARE @I int = 1;
DECLARE @F1 int;
DECLARE @F2 int;
DECLARE @END_TIME DATETIME2;
DECLARE @START_TIME DATETIME2 = SYSDATETIME();

WHILE @I <= 10000 BEGIN

    SELECT @F1 = FIELD1, @F2 = FIELD2
    FROM THE_TABLE
    WHERE FIELD1 = (SELECT CEILING(RAND() * 1000000));

    SET @I = @I + 1;
END;

SET @END_TIME = SYSDATETIME();
SELECT DATEDIFF(millisecond, @START_TIME, @END_TIME); 
```

最后一行产生的平均时间（10 次测量）为 181.3 毫秒。

当我将查询条件更改为：`WHERE FIELD2 = ...`，所以使用二级索引时，平均时间为 195.2 毫秒。

执行计划：

![在此处输入图像描述](../Images/a8666492979ef8b433e4bcfffab8c948.png)

![在此处输入图像描述](../Images/8fb22f466d3aa904dd560cddfd6e0ac1.png)

因此（选择 PK 与选择覆盖二级索引的性能）似乎是相似的。对于大量数据，我怀疑二级索引可能会稍微快一些（因为它看起来更紧凑，因此对缓存友好），但我在测试中还没有达到这一点。

## 字符串测量

使用`varchar(50)`as 类型`FIELD1`和`FIELD2`插入长度在 22 到 28 个字符之间的字符串给出了类似的结果。

尺寸为：

```
name        rows        reserved    data        index_size  unused
THE_TABLE   1000000     208144 KB   112424 KB   95632 KB    88 KB 
```

平均时间为： search on 254.7 ms`FIELD1`和 fir 296.9 ms `FIELD2`。

## 结论

如果聚集表具有覆盖二级索引，则该索引将具有与表本身相似的空间和时间特征（可能稍慢，但幅度不大）。如果有效，您将拥有两个 B 树，它们对数据进行不同的排序，但在其他方面非常相似，从而实现拥有“第二个集群”的目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T14:53:53.173

这取决于您的数据库管理系统。并非所有这些都实现了聚集索引。那些这样做的人有可能以不同的方式实施它们。据我所知，每个实现聚集索引的平台还提供了选择聚集索引中的列的方法，尽管通常主键是默认值。

在 SQL Server 中，您可以像这样创建非聚集主键和单独的聚集索引。

```
create table test (
  test_id integer primary key nonclustered,
  another_column char(5) not null unique clustered
  ); 
```

我认为在 Oracle 中与此最接近的是索引组织表。我可能是错的。这与在 SQL Server 中创建具有聚集索引的表并不完全相同。

SQL Server 中的单个表不能有*多个聚集索引。*表的行一次只能按一个顺序存储。实际上，我想您*可以*将行存储在多个不同的订单中，但是您必须为每个订单复制全部或部分表。（虽然我在写这个答案的时候并不知道，[DB2 UDB 支持多个聚集索引](http://www.ibmsystemsmag.com/aix/administrator/highavailability/The-Luster-of-Data-Clustering/)，这是一个相当古老的功能。它的[设计和实现](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=/com.ibm.db2.luw.admin.partition.doc/doc/c0007201.html)与 SQL Server 有很大的不同。）

主键的工作是保证唯一性。虽然这项工作通常是通过在主键列上创建唯一索引来完成的，但严格来说，唯一性和索引是两个不同的东西，具有两个不同的目标。唯一性旨在数据完整性；索引旨在提高速度。

主键声明并不打算为您提供有关磁盘*上行顺序的任何信息。*实际上，它通常会为您提供有关磁盘上*索引条目顺序的一些信息。*（因为主键通常使用唯一索引来实现。）

如果您从具有聚集索引的表中选择行，您仍然不能保证这些行将按照它们存储在磁盘上的相同顺序*返回给用户。*粗略地说，聚集索引帮助查询优化器更快地*找到*行，但它不控制这些行返回给用户的顺序。保证行返回给用户的顺序的*唯一*`ORDER BY`方法是使用显式子句。（这似乎是一个相当常见的混淆点。当聚集索引上的裸 SELECT 没有按照他们期望的顺序返回行时，很多人似乎感到惊讶。）

# sql - 如何计算 Hibernate 在一个 Grails 请求中执行了多少 SQL 查询？

> ID：12724594
> 
> 赞同：8
> 
> 时间：2012-10-04T09:47:59.897
> 
> 标签：sql, hibernate, grails, logging

我需要使用一个非常慢的请求来调试 Grails 应用程序。我有 SQL 日志记录，但希望在不手动计算的情况下查看 SQL 查询的数量。

```
debug    'org.hibernate.SQL'
trace    'org.hibernate.type' 
```

对于 eaxmple，在每个请求之后都有以下行（其中 x 是对 SQL 服务器进行的所有查询的数量）：

[2012-10-04 13:41:45,049][LoggingFilters] INFO - 请求在 8296 毫秒内完成**并生成了 x 个 SQL 语句**

经过一番谷歌搜索后，Grails 似乎无法做到这一点，所以也许 MySQL 可以提供信息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T13:17:11.350

您可以通过使用过滤器和休眠统计信息来做到这一点。在 conf 文件夹中创建类 ExampleFilters.groovy。这是课程的内容：

```
import org.hibernate.stat.Statistics
class ExampleFilters {

    def sessionFactory

    def filters = {
    // your filters here

        logHibernateStats(controller: '*', action: '*') {
            before = {
            Statistics stats = sessionFactory.statistics;
            if(!stats.statisticsEnabled) {stats.setStatisticsEnabled(true)}
                   }

        afterView = {
            Statistics stats = sessionFactory.getStatistics()
            double queryCacheHitCount  = stats.getQueryCacheHitCount();
            double queryCacheMissCount = stats.getQueryCacheMissCount();
            double queryCacheHitRatio = (queryCacheHitCount / ((queryCacheHitCount + queryCacheMissCount) ?: 1))
            println """
######################## Hibernate Stats ##############################################
Transaction Count:${stats.transactionCount}
Flush Count:${stats.flushCount}
Total Collections Fetched:${stats.collectionFetchCount}
Total Collections Loaded:${stats.collectionLoadCount}
Total Entities Fetched:${stats.entityFetchCount}
Total Entities Loaded:${stats.entityFetchCount}
Total Queries:${stats.queryExecutionCount}
queryCacheHitCount:${queryCacheHitCount}
queryCacheMissCount:${queryCacheMissCount}
queryCacheHitRatio:${queryCacheHitRatio}
######################## Hibernate Stats ##############################################
"""
            stats.clear()
        }

    }

    }

} 
```

要阅读有关各种 Hibernate 统计信息的更多信息，请阅读本文： [http ://www.javalobby.org/java/forums/t19807.html](http://www.javalobby.org/java/forums/t19807.html)

另请注意，使用它时会对性能产生影响，因此它应该只在开发环境中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:04:19.943

您是否考虑过一些低技术解决方案，例如运行输出`wc -l`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:59:41.137

在 grails 中使用 `loggingSql`

```
dataSource {
 dbCreate = "update" // one of 'create', 'create-drop','update'
 url = "jdbc:postgresql://localhost:5432/demodb"
 loggingSql = true
} 
```

您会注意到 Grails 使用的所有 SQL 语句都将被记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T16:19:27.387

正如 Burt Beckwith 在他的博客文章“我学到的咨询”中所说的那样[http://burtbeckwith.com/blog/?p=1570](http://burtbeckwith.com/blog/?p=1570)

SQL 日志记录

有两种方法可以查看查询的 SQL 输出；在 DataSource.groovy 中添加 logSql = true 并配置 Log4j 记录器。Log4j 方法更加灵活，因为它不仅可以转储到标准输出，而且可以路由到文件或其他附加程序，并且可以方便地启用和禁用。但事实证明，切换 logSql SQL 控制台日志记录很容易。获取对 sessionFactory bean 的引用（例如，使用 def sessionFactory 的依赖注入）并打开它

```
sessionFactory.settings.sqlStatementLogger.logToStdout = true

and off with

sessionFactory.settings.sqlStatementLogger.logToStdout = false 
```

# actionscript - apk 文件上的 Flex 移动 HTTP 请求错误

> ID：12724598
> 
> 赞同：0
> 
> 时间：2012-10-04T09:48:05.333
> 
> 标签：actionscript, mxml, flex-mobile, httpservice, http-request

我正在使用 Flex Builder 4.6 开发一个 android 应用程序。这是一个相当复杂的应用程序，我正在使用**HTTPService**与服务器进行通信。它工作正常，直到最近**它在制作 apk 文件后停止工作**。因此，在桌面模拟器中，在移动设备的调试模式下，HTTPService 工作正常，但是当我进行发布构建并将其安装在移动设备中时，它就无法正常工作。

我试图追查错误，它只是简单地显示“HTTP 请求错误”。例如这里是我正在使用的 mxml 代码

```
<s:HTTPService id="sayHi" method="GET" result="sayHi_resultHandler(event)" fault="sayHi_faultHandler(event)"
                   url="https://zaawi.co.uk/developer/controller.php" useProxy="false">
        <s:request xmlns="">
            <h>sayHi</h>
        </s:request>
    </s:HTTPService> 
```

我在浏览器中检查了 url [https://zaawi.co.uk/developer/controller.php?h=sayHi](https://zaawi.co.uk/developer/controller.php?h=sayHi)，在模拟器和调试模式下都可以正常工作。

服务器（php）以xml格式发送响应

```
print '<?xml version="1.0" encoding="UTF-8"?><data><hi>hello world</hi></data>'; 
```

它工作了将近一年，最近才停止工作。

如果其他人有这个问题，请告诉我，我该如何解决这个问题。

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:25:33.127

I had a similar problem a while ago, my HTTPService requests started to fail and i didn't got anything useful in the FaultEvent, but after hours of trying different things **i noticed that i had the network monitor enabled** in flex, and since i had nothing to loose, **i disabled it a voila! The app worked again!**

I think when you have the network monitor enabled, the app redirects all requests thru a local proxy or something and that way you can sniff the requests, but this seems to stay when you create a release version and mess all requests.

So if you have network monitor enabled, just disable it, and then try to build your app again.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T03:40:32.443

似乎它与强制运行时如何调用 https 端点有关。在 Nexus 平板电脑上使用 HTTPS 时，Adobe AIR 移动应用程序在此线程上[失败，但在 Kindle 上工作](https://stackoverflow.com/questions/14970148/adobe-air-mobile-app-fails-when-using-https-on-nexus-tablet-but-works-on-kindle)时发现，通过从强制运行时切换到使用共享 AIR 运行时，错误消失了。您可能还想尝试最新的 AIR SDK 并查看是否能解决问题（尽管我一直看到使用 3.8 beta 构建在 iOS 上运行的应用程序存在问题，因此您可能想先尝试 3.7）。

# logging - 如何在 Cloudbees 上使用 logback

> ID：12724599
> 
> 赞同：1
> 
> 时间：2012-10-04T09:48:07.960
> 
> 标签：logging, deployment, lift, logback, cloudbees

我想知道是否可以在 Cloubees 上使用我自己的 logback 配置，我有一个`default.logback.xml`在本地可以正常工作的文件，但是一旦我部署到 Cloudbees，它就会被忽略。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:40:29.813

登录 CloudBees 是通过 stdout 和 stderror - 这些通过 syslog-ng 管道传输到各种系统（并非所有系统都是基于文件的） - 因此您可以根据需要配置日志记录 - 但如果您希望管理日志 - 最好以确保事情最终出现在标准输出和标准错误中。

# javascript - 加载 Knockout.js 模板时如何触发事件

> ID：12724605
> 
> 赞同：2
> 
> 时间：2012-10-04T09:48:16.777
> 
> 标签：javascript, knockout.js, template-engine

我正在使用淘汰赛外部模板引擎来创建我网页的一部分。模板里面有一个 ul ，我想在它上面执行一个功能。

```
<ul id="myTags"></ul 
```

因此，例如，一旦从服务器加载了模板，我想调用一些方法：

```
$("#myTags").doSomething(...) 
```

从服务器下载模板并插入文档后，如何调用此方法？注意 这可能会发生不止一次......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T20:34:32.387

`template`绑定确实有一个回调，您可以使用它`afterRender`来处理新元素： http: [//knockoutjs.com/documentation/template-binding.html#note_3_using_afterrender_afteradd_and_beforeremove](http://knockoutjs.com/documentation/template-binding.html#note_3_using_afterrender_afteradd_and_beforeremove)

我不知道你想用你的元素做什么，但我会考虑为此目的使用自定义绑定。描述了自定义绑定：http: [//knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)和[http://www.knockmeout.net/2011/07/another-look-at-custom-bindings-for.html](http://www.knockmeout.net/2011/07/another-look-at-custom-bindings-for.html)

即使您只是使用`init`自定义绑定的功能，它也会在每次呈现您的模板时运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:08:47.937

我这样做的方式是使用 jQuery livequery 插件：

```
 $('#myTags').livequery(doSomething); 
```

有没有更好的办法？

# c# - 为什么需要重新绑定水晶报表

> ID：12724607
> 
> 赞同：0
> 
> 时间：2012-10-04T09:48:21.557
> 
> 标签：c#, asp.net, crystal-reports

我创建了一个水晶报表。它工作正常。然后我尝试在 Asp.Net 中使用它

```
<CR:CrystalReportViewer ID="CrystalReportViewer1" runat="server"
DisplayGroupTree="False"  /> 
```

第一次，它工作正常，但是当我单击`print`按钮时，报告消失并给出错误。当我将我的`BindReport`方法移出时，`if(!IsPostBack)`它开始正常工作。

单击打印按钮时出现以下错误：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
    {
        BindReport(); 
    }
} 
```

但这很好用

```
protected void Page_Load(object sender, EventArgs e)
{
     BindReport(); 
} 
```

有人可以帮我理解是什么原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:58:23.267

只要CrystalReportViewer控件的鼠标点击事件可以序列化为ViewState，绑定到可以序列化的报表类在重新加载页面时会产生一个无法解决的问题：

1 如果报表绑定代码放置在 Not IsPostBack 条件块中，则 ViewState 中的鼠标点击事件会被保留，但报表的绑定不会发生，并抛出异常。

2 如果报表绑定代码放在条件块外，报表绑定正确，但过程中ViewState的内容被压碎，鼠标点击事件丢失。

注意：当在报表中单击 CrystalReportViewer 控件的多个页面时，最常发生这种情况。报告继续，然后神秘地回到第 1 页。

```
Solution 
```

将绑定代码 CrystalReportViewer 控件放在 Init 事件中

链接：http: [//msdn.microsoft.com/fr-fr/library/ms225455%28v=vs.90%29.aspx](http://msdn.microsoft.com/fr-fr/library/ms225455%28v=vs.90%29.aspx)

# c# - 寻找正则表达式以匹配 URL 的某些部分

> ID：12724615
> 
> 赞同：0
> 
> 时间：2012-10-04T09:48:41.400
> 
> 标签：c#, regex

我正在寻找一个正则表达式来匹配 URL 的某些部分以相应地重定向我的页面。

我没有运气用谷歌搜索它。

前任：

## [http://www.somesite.com/cat1/cat2/](http://www.somesite.com/cat1/cat2/)

在此，我希望匹配域名后的任何单词或字符，因此它将是 /cat1/cat2/

## [http://www.somesite.com/cat1/cat2/cat3/](http://www.somesite.com/cat1/cat2/cat3/)

在此，我希望匹配域名后的任何单词或字符，因此它将是 /cat1/cat2/cat3/

* * *

寻找 2 diff 正则表达式来匹配这种 url。第一个仅匹配 2 个类别的正则表达式和第二个仅匹配 3 个类别的正则表达式。

提前谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:00:19.637

这将适用于第一种情况，所需的部分位于第一个捕获组中：

```
^http://[^/]+(/(?:[^/]*/){2})$ 
```

`{2}`将零件更改`{3}`为第二种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:58:10.980

听起来很简单。

第一个正则表达式就像：http://.+/([^/]+)/([^/]+)/

我会让你猜猜第二个正则表达式是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T10:15:10.760

据我所知，正则表达式不支持反向匹配。这意味着，您不能编写与正则表达式中不匹配的正则表达式（如果我错了，请有人纠正我）。话虽这么说，你可以使用这个：

```
^http:\/\/[^\/]+\/(.*) 
```

使用分组，您可以匹配 URL 域之后的任何内容。因此，在这种情况下，您要查找的内容可以通过 $1 （由正则表达式末尾的括号表示的组）获取。另一个重要的事情是正则表达式开头的 ^。这样您就不会捕获作为 URL 的查询参数传递的 URL 字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T09:55:59.307

您可以从中获取路径名`windwo.location.pathname`

```
var path = window.location.pathname 
```

得到这个后，`path`你可以使用`split('/');`

# php - 从一个文本框进行高级搜索

> ID：12724622
> 
> 赞同：2
> 
> 时间：2012-10-04T09:48:59.877
> 
> 标签：php, search, advanced-search

我想在我的程序中实现高级搜索功能，但我不想创建这样的界面（这只是示例）：

![在此处输入图像描述](../Images/b4a8457d2b354cdc8b6c80eec316aa6c.png)

我想要的只是一个文本框，用户可以在其中编写这样的查询（假设它是一个“联系人”应用程序）：

```
contact_name:john,michael,-michelle age:<=20,=>15 location:usa 
```

到目前为止我的想法：

首先，用空格分解文本，然后用冒号分解。因此，第一项将是“搜索字段”，第二个数组将是要查找的值。但是像`<=`,`-`和之类的运算符会出现问题`*`。它们不是固定宽度，所以我不知道我应该为运算符做多少字符“substr”。

顺便说一句：如果这个搜索操作有一个通用名称，如“基于令牌的搜索”或类似的名称，我可以搜索一个已经完成工作的库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:04:41.073

您将不得不使用自动建议来构建类似于高级搜索（也许）的东西来构建用户查询：这样您就可以更好地控制查询结构。
如果您尝试解析徒手查询，您会让自己对查询误解持开放态度：

您是否会认为以下查询有效
`contact_name:john,michael,-michelle age:<=20,=>15 location:usa`
而以下表示相同的无效？
`contact_name:john, michael,-michelle age:<=20,=>15 location:usa`
（在任何地方插入任意数量的空格）

尝试搜索“查询构建器”或类似的东西，但考虑到该实现是**非常**特定于应用程序的，我不确定您是否会发现任何有用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:54:02.103

我猜你可以使用一些带有[回调](http://php.net/manual/en/function.preg-replace-callback.php)的正则表达式。

就像是 ：

```
"`[a-z]+:([*<=>])([a-z],)+ `U" 
```

这只是一个示例，您必须完成才能满足您的需求。

祝你好运。

# permissions - Liferay6中的相应组织应该如何查看与媒体和文档portlet一起上传的文件？

> ID：12724626
> 
> 赞同：0
> 
> 时间：2012-10-04T09:49:15.770
> 
> 标签：permissions, liferay, portlet, liferay-6

如果我必须在 Liferay 中使用文档和媒体 portlet 以及以下设施，那么我该如何实现呢？

![在此处输入图像描述](../Images/9ba861477b80bcd23b57a468fc79088d.png)

现在从上面的图片中，我希望如果组织 A 用户上传了一些内容，那么它应该只能由组织 A 用户查看。现在任何有权查看文档和媒体 portlet 的人都可以查看我上传的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T23:46:32.643

我认为，这种级别的控制通常是通过为您的组织创建站点来处理的。（可能还有其他方法，我也希望看到讨论）。

例如，如果您为每个组织创建一个站点，那么将自动生成该站点专用的文档和媒体库。如果您不需要，该站点不需要任何页面或任何内容。

您可以通过转到“用户和组织”，单击进入感兴趣的组织，然后使用控制菜单中的“组织站点”来为组织创建站点。

![在此处输入图像描述](../Images/f652b010dab33d7669402b3c0646a4d6.png)

创建站点后，可以为新站点选择控制面板“站点”级别的所有内容。选中后，文档和媒体 portlet 将显示您组织的顶级文件夹。

![在此处输入图像描述](../Images/804417ce215aa2f8294e9d433ca15ddc.png)

现在，您可以使用子文件夹甚至单个项目的正常权限设置来限制“站点成员”的可用性，在这种情况下，“站点成员”将是“组织成员”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T07:56:23.020

好吧，如果 kirkz 的回答不能解决您的问题，那么我建议您尝试以下方法：

1）为每个组织设置一个Liferay“用户角色”。您将在控制面板的“门户”部分中找到“角色”

2) 将相关用户分配给您根据其组织创建的每个角色

3) 然后进入文档库并使用您创建的角色为每个文件夹设置所需的权限。因此，例如，您可以为每个组织创建一个顶级文件夹。然后只需设置每个文件夹的权限，以便只有一个角色可以访问它。

这应该可以解决您的问题，但是 kirkz 解决方案实际上是您应该实现此层次结构的方式。

# objective-c - 释放电影播放器 期间的内存泄漏

> ID：12724630
> 
> 赞同：0
> 
> 时间：2012-10-04T09:49:34.740
> 
> 标签：objective-c, ios, xcode, ipad, mpmovieplayercontroller

在我的一个应用程序中，我想从 local.so 播放视频文件，因此我使用以下代码播放文件。

```
-(IBAction)playMovie{

NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]pathForResource:@"Myvideo" ofType:@"mov"]];

MPMoviePlayerController *moviePlayer=[[[MPMoviePlayerController alloc]initWithContentURL:url]autorelease];
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(moviePlayBackDidFinish:) name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayer];

moviePlayer.controlStyle = MPMovieControlStyleEmbedded;
moviePlayer.shouldAutoplay = YES;

[self.view addSubview:moviePlayer.view];
[moviePlayer setFullscreen:YES animated:YES];
//[moviePlayer release];
}

-(void) moviePlayBackDidFinish:(NSNotification*)notification {

MPMoviePlayerController *moviePlayer = [notification object];

[[NSNotificationCenter defaultCenter] removeObserver:self      
                                                name:MPMoviePlayerPlaybackDidFinishNotification
                                              object:moviePlayer];
if ([moviePlayer 
     respondsToSelector:@selector(setFullscreen:animated:)])
{
   [moviePlayer.view removeFromSuperview];
}
[moviePlayer release];

} 
```

当我去分析或做上述代码的配置文件时，显示警告潜在泄漏发生在 2 个地方，即，

```
[moviePlayer setFullscreen:YES animated:YES];

//[moviePlayer release]; 
```

另一个是泄漏在这部分

```
{

  [moviePlayer.view removeFromSuperview];

}
[moviePlayer release] 
```

那么如何避免这种内存泄漏。即使我尝试在代码的开头自动释放 NSURL 行，当我执行自动释放泄漏时不会发生但视频不会播放。那么如何解决这个问题有人能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:54:45.193

在moviePlayBackDidFinish方法中试试这个，可能会有所帮助

```
 if (videoPlayer) {
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:MPMoviePlayerPlaybackDidFinishNotification object:videoPlayer];

    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:MPMoviePlayerLoadStateDidChangeNotification object:videoPlayer];

    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:MPMovieMediaTypesAvailableNotification object:videoPlayer];
    [videoPlayer pause];
    videoPlayer.initialPlaybackTime = -1;
    [videoPlayer stop];
    [videoPlayer.view removeFromSuperview];
    [videoPlayer release];
    videoPlayer = nil;
} 
```

# hibernate - PostgreSQL Money 类型 :: 如何将其映射到 Hibernate JPA？

> ID：12724634
> 
> 赞同：4
> 
> 时间：2012-10-04T09:49:54.193
> 
> 标签：hibernate, postgresql, jpa, jboss7.x

我似乎在使用以下 JPA 片段将**PostgreSQL 货币**类型映射到**java.util.Currency类型时遇到问题：**

```
@Basic(optional = true)                                 
@Column(name = "cafl_bubgeted_amount")
private Currency bubgetedAmount; 
```

列*cafl_budgeted_amount*在 PostgreSQL 中属于**money**类型。

当代码部署在 JBoss AS 7.1.1 中时，我得到了帖子末尾显示的跟踪信息。有人处理过那个映射吗？

### 在 JBoss AS 7.1.3 中部署时的跟踪

```
引起：java.lang.IllegalArgumentException
    在 java.util.Currency.getInstance(Currency.java:303) [rt.jar:1.7.0_07]
    在 java.util.Currency.getInstance(Currency.java:284) [rt.jar:1.7.0_07]
    在 org.hibernate.type.descriptor.java.CurrencyTypeDescriptor.wrap(CurrencyTypeDescriptor.java:66) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.type.descriptor.java.CurrencyTypeDescriptor.wrap(CurrencyTypeDescriptor.java:35) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.type.descriptor.sql.VarcharTypeDescriptor$2.doExtract(VarcharTypeDescriptor.java:66) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.type.descriptor.sql.BasicExtractor.extract(BasicExtractor.java:65) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:269) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:265) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:238) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.type.AbstractStandardBasicType.hydrate(AbstractStandardBasicType.java:357) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.persister.entity.AbstractEntityPersister.hydrate(AbstractEntityPersister.java:2695) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.loader.Loader.loadFromResultSet(Loader.java:1552) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.loader.Loader.instanceNotYetLoaded(Loader.java:1484) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.loader.Loader.getRow(Loader.java:1384) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:640) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.loader.Loader.doQuery(Loader.java:856) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.loader.Loader.loadEntity(Loader.java:2058) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:82) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:72) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3697) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.event.internal.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:439) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.event.internal.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:420) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.event.internal.DefaultLoadEventListener.load(DefaultLoadEventListener.java:204) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.event.internal.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:251) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.event.internal.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:148) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.internal.SessionImpl.fireLoad(SessionImpl.java:954) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.internal.SessionImpl.internalLoad(SessionImpl.java:903) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:610) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.type.EntityType.resolve(EntityType.java:438) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.engine.internal.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:150) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:1006) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.loader.Loader.doQuery(Loader.java:883) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.loader.Loader.doList(Loader.java:2463) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.loader.Loader.doList(Loader.java:2449) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2279) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.loader.Loader.list(Loader.java:2274) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:470) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:196) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.internal.SessionImpl.list(SessionImpl.java:1115) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.internal.QueryImpl.list(QueryImpl.java:101) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:252) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    在 gr.neuropublic.gaia.cashflow.services.TransactionGroupService.copyTransactionGroups(TransactionGroupService.java:29) [cashflow-ejb.jar:]
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_07]
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_07]
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_07]
    在 java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_07]
    在 org.jboss.as.ee.component.ManagedReferenceMethodInterceptorFactory$ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptorFactory.java:72) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    在 org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    在 org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    在 org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:36) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    在 org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    在 org.jboss.as.jpa.interceptor.SBInvocationInterceptor.processInvocation(SBInvocationInterceptor.java:47) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    在 org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    在 org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    在 org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    在 org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    在 org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:53) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
    在 org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    在 org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    在 org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    在 org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:228) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
    ... 54 更多

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-05-20T17:31:45.947

A java.util.Currency represents a currency, like USD or EUR, not an actual amount like 456.34 from Postgres MONEY. The exception is because it's trying to parse the number as a currency code.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T13:34:44.267

I highly recommend avoiding MONEY currently and going with NUMERIC. There are a number of specific issues. It doesn't perform as well for arithmetic as NUMERIC does and the currency it represents is dependent on your localization settings, which means that as soon as you need multiple currencies, bad things happen. Worse still, two different users with different localization settings will see the same amount but a different currency specified.....

Additionally DECIMAL and NUMERIC are better supported cross-db than is MONEY (but DECIMAL is just a one-way alias for NUMERIC in PostgreSQL) so going lowest common denominator suggests going with a more generic, losslessly base 10 floating point number rather than a specialized monetary amount that has interesting corner cases and gotchas.

# php - 如何将 WordPress 站点从服务器移动到本地服务器

> ID：12724637
> 
> 赞同：0
> 
> 时间：2012-10-04T09:50:07.293
> 
> 标签：php, wordpress

我是 word press 的新手。我有一个网站的 .tar.gz 包和 db.sql，不，我想将它移动到我的本地服务器上进行一些开发。我面临的问题是当我在我的xammp 服务器它运行但重定向到它的站点 url，当我在 wamp 上运行它时，它给了我 500 内部服务器错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:23:47.707

在本地服务器 (PHPMYADMIN) 中创建一个数据库，并将旧 URL 从 WP_OPTIONS 表更改为新 URL，并在 WP.CONFIG.php 中进行更改。更改数据库名称、用户名和密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:44:16.963

适合您的步骤： 1\. 在编辑器中打开 .sql 文件，找到旧网站 url 并将其替换为您的新 url（在本地链接 localhost/mywordpress）并保存。

1.  打开 localhost/phpmyadmin，创建新数据库。导入您修改的 .sql 文件。

2.  从压缩文件夹中提取所有文件，将它们复制并粘贴到 www.open config.php 文件中的文件夹中，更改 dbname、pass、username、hostname。保存。

你完成了。你的路径现在是 localhost/mywordpress。

编码快乐！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:54:15.847

*   `mod_rewrite`在本地主机中启用
*   创建数据库并导入转储文件
*   数据库中的更改，在表`wp_options`中`siteurl``localhost`
*   更改您`wp-config.php`使用的数据库用户、密码、dbname 和主机。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T12:39:40.900

将 Wordpress 移动到不同的 URL 很棘手，因为网站 URL 在许多地方的数据库中。您可以“查找和替换”，但我推荐这个有趣的解决方法：您将开发站点设置为与生产站点相同的 URL。

`hosts file`然后您可以通过编辑或使用自动切换软件手动切换这两个`hosts`，例如[http://hostprofiles.codeplex.com/](http://hostprofiles.codeplex.com/)

# php - 如何使用 PHP 显示一个特定类别（Lund、Cyklar 和 Kultur）？

> ID：12724645
> 
> 赞同：-2
> 
> 时间：2012-10-04T09:50:39.063
> 
> 标签：php, html

如何使用 Php 显示一个特定类别（Lund、Cyklar 和 Kultur）？

我只想在页面上显示前隆德的帖子。

```
<form action="<?php $self ?>" method="post">
    <h2>LundaBlogg</h2>
    <div class="fname">
        <label for="name"><p>Namn:</p></label><input name="name" type="text" cols="20"/>
    </div>
    <div class="femail">
        <label for="email"><p>Epost:</p></label><input name="email" type="text" cols="20"/>
    </div>
    <div class="where">
        <label for="lund"><p>Skriv ditt blogg ämne:</p></label>
        <input name="lund" type="text" cols="20"/>
    </div>
    <p>Starta tråden med att posta något:</p>
    <textarea name="post" rows="5" cols="40"></textarea>
    </br>
    <p>Välj kategori som du vill lägga din post i:</p>
    <select name="LundaBlogg" size="1">
        <option value="Lund">Lund</option>
        <option value="Cyklar">Cyklar</option>
        <option value="Kultur">Kultur</option>
    </select>
    </br>
    </br>
    <input name="send" type="hidden"/>
    <p><input type="submit" value="skicka"/></p>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:16:14.040

尝试，

```
$query = "SELECT * FROM shouts WHERE LOWER(`LundaBlogg`)='lund' ORDER BY `id` DESC";
$result = @mysql_query("$query") or die('<p class="error">Det blev fel när du försökte hämta blogg inläggen från databasen.</p>'); 
```

# c# - EF Code First 排除列

> ID：12724651
> 
> 赞同：5
> 
> 时间：2012-10-04T09:51:00.050
> 
> 标签：c#, entity-framework, ef-code-first

> **可能重复：**
> [使用实体框架 4 和代码优先从数据库中排除字段/属性](https://stackoverflow.com/questions/1707663/exclude-a-field-property-from-the-database-with-entity-framework-4-code-first)

我使用的是 EF 4 代码优先。

有什么方法可以排除在数据库中创建列吗？

例如，我想排除`Zip`要创建的列。

```
public string Address { get; set; }
[StringLength(40)]
public string City { get; set; }
[StringLength(30)]
public string State { get; set; }
[StringLength(10)]
public string Zip { get; set; } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T09:59:19.620

您可以将`[NotMapped]`属性添加到要从数据库中排除的属性：

```
public string Address { get; set; }

[StringLength(40)]
public string City { get; set; }

[StringLength(30)]
public string State { get; set; }

[StringLength(10)]
[NotMapped]
public string Zip { get; set; } 
```

# zend-framework2 - zendframework 2 inputfilter自定义默认错误信息

> ID：12724653
> 
> 赞同：10
> 
> 时间：2012-10-04T09:51:08.593
> 
> 标签：zend-framework2

我正在尝试自定义`Value is required and can't be empty`zf2 中的默认错误消息“”

我正在使用以下代码在 inputfilter 的验证器中添加自定义默认错误消息

```
$inputFilter->add($factory->createInput(array(
                'name' => 'username',
                'required' => true,
                'filters' => array(
                    array('name' => 'StripTags'),
                    array('name' => 'StringTrim'),
                ),
                'validators' => array(
                    array(
                        'name' => 'StringLength',
                        'options' => array(
                            'encoding' => 'UTF-8',
                            'min' => 4,
                            'max' => 20,
                            'messages' => array(
                                'isEmpty' => 'Please enter User Name between 4 to 20 character!' 
                            ),                            
                        ),
                    ),
                ),
            ))); 
```

但我收到以下错误。

```
Zend\Validator\Exception\InvalidArgumentException

File:
    /home/website/vendor/zendframework/zendframework/library/Zend/Validator/AbstractValidator.php:220

Message:
    No message template exists for key 'isEmpty' 
```

我做错了什么？

[参考](http://samsonasik.wordpress.com/2012/10/01/zend-framework-2-extending-zendform-to-add-select-multicheckbox-emaildate-textarea-and-radio-element/)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-04T10:14:33.240

试试这个

```
$inputFilter->add($factory->createInput(array(
                'name' => 'username',
                'required' => true,
                'filters' => array(
                    array('name' => 'StripTags'),
                    array('name' => 'StringTrim'),
                ),
                'validators' => array(
                    array(
                      'name' =>'NotEmpty', 
                        'options' => array(
                            'messages' => array(
                                \Zend\Validator\NotEmpty::IS_EMPTY => 'Please enter User Name!' 
                            ),
                        ),
                    ),
                    array(
                        'name' => 'StringLength',
                        'options' => array(
                            'encoding' => 'UTF-8',
                            'min' => 4,
                            'max' => 20,
                            'messages' => array(
                                'stringLengthTooShort' => 'Please enter User Name between 4 to 20 character!', 
                                'stringLengthTooLong' => 'Please enter User Name between 4 to 20 character!' 
                            ),
                        ),
                    ),
                ),
            ))); 
```

[参考](http://zend-framework-community.634137.n4.nabble.com/zf2-custom-messages-in-input-filter-td4655498.html)

[其他验证器集](http://framework.zend.com/manual/2.0/en/modules/zend.validator.set.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T12:44:13.873

您还可以设置 inputFilter 的错误消息：

```
 $form = new ParticipantForm();  
    $mailInput = new Input('mail');
    $mailInput->setRequired(true);
    $mailInput->setErrorMessage("Empty input"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T11:07:55.847

StringLength 验证器不检查输入是否为空。它检查长度。StringLength 验证器存在以下消息模板：

```
const INVALID   = 'stringLengthInvalid';
const TOO_SHORT = 'stringLengthTooShort';
const TOO_LONG  = 'stringLengthTooLong';

/**
 * @var array
 */
protected $messageTemplates = array(
    self::INVALID   => "Invalid type given. String expected",
    self::TOO_SHORT => "The input is less than %min% characters long",
    self::TOO_LONG  => "The input is more than %max% characters long",
); 
```

有关直接方法，请参阅@Developer 的示例。虽然我建议使用验证器的 CamelCased 命名，所以`'name' => 'NotEmpty'`不要`'name' => 'not_empty'`

如果您看到每个验证器类的代码，您可以检查存在哪些 messageTemplates。你会在下面找到它们`./vendor/zendframework/zendframework/library/Zend/Validator/*`

# mysql - 如何消除 MySQL 中不符合特定条件的行

> ID：12724654
> 
> 赞同：1
> 
> 时间：2012-10-04T09:51:09.157
> 
> 标签：mysql, sql

我有用于管理体育学院的数据库。现在我有玩家表，class 和 class_player（加入另外两个表）。我想要做的是在将玩家注册到 A 类时，将注册到 B 类的玩家（与 A 类时间相交）从选择语句的结果集中删除

```
Player Table:         class Table               class_player Table
ID INT                ID INT                    classID INT
                      timeFrom TIME             playerID INT
                      timeTo TIME
                      days BIT(7) 
```

在 "class" 表中： timeFrom：是上课的开始时间
timeTo：是上课的结束时间
days：保存上课的天数，
例如：0x000001 -> 7 天之一将包括该课程

我用来获取玩家的 select 语句：

```
(
SELECT `players`.`ID`
FROM `players` JOIN `class_player` ON `players`.`ID` = `class_player`.`playerID`
JOIN `classes` ON `class_player`.`classID` = `classes`.`ID`
WHERE (
    -- Get all player with no day intersection
    -- 1 is a variable of the entered day ex: 0x00100100
    NOT (`classes`.`days` & 1)

    -- Time Intersection
    OR (
            -- Entered "FROM" != Existing "FROM"
            '10:00:00' != `timeFrom` 

            -- Entered "TO" != Existing "TO"
            AND '13:00:00' != `timeTo`

            -- Entered "FROM" Not Between Existing (FROM, TO)
            AND NOT ('10:00:00' > `timeFrom` AND  '10:00:00' < `timeTo`)
            -- AND '10:00:00' NOT BETWEEN `timeFrom` AND `timeTo`

            -- Entered "TO" Not Between Existing (FROM, TO)
            AND NOT ('13:00:00' < `timeTo` AND '13:00:00' > `timeFrom`)
            -- AND '13:00:00' NOT BETWEEN `timeFrom` AND `timeTo` 

            -- Entered "FROM" Not Less than Existing "FROM"
            -- Entered "TO" Not Bigger than Existing "TO"
            AND NOT ('10:00:00' < `timeFrom` AND  '13:00:00' > `timeTo` )

        )
    )
)
UNION
(
    -- Players who don't have any classes
    SELECT `players`.`ID`
    FROM `players`
    WHERE `players`.`ID` NOT IN (SELECT `playerID` FROM `class_player`)
); 
```

问题是当一个玩家有两个类时，一个与 classA 时间相交，一个与 classA 时间不相交，该玩家会显示在结果集中！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:05:15.400

首先：感谢[wojciechz](https://stackoverflow.com/users/1269481/wojciechz)的努力，解决方案在他的第二个答案中，但直到我的朋友告诉我一个类似的解决方案，我才明白。

第二：SQL中的解决方法是：
1.获取所有忙碌的玩家
2.然后搜索不在此列表中的玩家

```
SELECT DISTINCT `ID` FROM `players` WHERE `ID` NOT IN (
    (
        SELECT `players`.`ID`
        FROM `players` JOIN `class_player` ON `players`.`ID` = `class_player`.`playerID`
        JOIN `classes` ON `class_player`.`classID` = `classes`.`ID`
        WHERE (
            -- Get all player with no day intersection
            -- 1 is a variable of the entered day ex: 0x00100100
            (`classes`.`days` & 1)

            -- Time Intersection
            AND (
                    -- Entered "FROM" != Existed "FROM"
                    '10:00:00' = `timeFrom` 

                    -- Entered "TO" != Existed "TO"
                    OR '13:00:00' = `timeTo`

                    -- Entered "FROM" Not Between Existing (FROM, TO)
                    OR ('10:00:00' > `timeFrom` AND  '10:00:00' < `timeTo`)
                    -- AND '10:00:00' NOT BETWEEN `timeFrom` AND `timeTo`

                    -- Entered "TO" Not Between Existing (FROM, TO)
                    OR ('13:00:00' < `timeTo` AND '13:00:00' > `timeFrom`)
                    -- AND '13:00:00' NOT BETWEEN `timeFrom` AND `timeTo` 

                    -- Entered "FROM" Not Less than Existing "FROM"
                    -- Entered "TO" Not Bigger than Existing "TO"
                    OR ('10:00:00' < `timeFrom` AND  '13:00:00' > `timeTo` )

            )
        )
    )
    UNION
    (
        -- ANOTHER DATE AND TIME
    )
) 
```

# apache - httpd内存释放慢

> ID：12724656
> 
> 赞同：0
> 
> 时间：2012-10-04T09:51:17.780
> 
> 标签：apache, httpd.conf, mod-jk, worker

我在 RHEL5 上使用带有 mod jk 1.2.28 的 httpd。在 httpd 之后，我确实运行了 tomcat。从 httpd 到 tomcat 的连接是通过 ajp 连接器使用 modjk 进行的。我只是在负载测试 httpd - 使用 JMeter，当我在 120 秒内同时从两个不同的 JVM 创建 2000 个用户时，httpd 内存使用率很高，当所有连接释放缓慢时，httpd 内存释放非常慢。有时我确实需要重新启动 httpd 进程。当我重新启动 httpd 时，内存使用量立即下降。在不重新启动 httpd 进程的情况下，我应该怎么做才能加快 httpd 内存释放？在 workers.properties 和 httpd.conf 中是否有任何属性可以实现这一点？

请提供一些帮助。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:33:24.863

我的一个有趣的观察 -

在 tomcat server.xml 中的 maxThread 值较低，例如 200，httpd 变得无响应，我需要在运行 jmeter 负载测试后重新启动 httpd。测试完成后内存不会自动释放 8009 上的连接是 CLOSE_WAIT

tomcat server.xml 中 maxThread 的高值说 2000，运行 JMeter 负载测试后无需重新启动 httpd，因为内存在测试完成后自动释放 8009 上的连接是 LAST_ACK

我的 httpd.conf 如下。我不明白使用这两个 MPM 中的哪一个。因此，我需要修改 MaxClient 值。请帮助我不想重新启动 httpd 并且我不想要 maxThread 的高值。

```
<IfModule prefork.c>
StartServers       8
MinSpareServers    5
MaxSpareServers   20
ServerLimit      256
MaxClients       256
MaxRequestsPerChild  4000
</IfModule>

<IfModule worker.c>
StartServers         2
MaxClients         150
MinSpareThreads     25
MaxSpareThreads     75
ThreadsPerChild     25
MaxRequestsPerChild  0
</IfModule> 
```

# javascript - 收到错误 Microsoft JScript 运行时错误：“数组”未定义

> ID：12724658
> 
> 赞同：0
> 
> 时间：2012-10-04T09:51:34.880
> 
> 标签：javascript, jquery, asp.net

Microsoft JScript 运行时错误：`'Array'`未定义

```
var Page_Validators =  new Array(document.getElementById("rfvOthers"), document.getElementById("rfvREJECT_REASON_COMMENTS")); 
```

谁能告诉我这可能是什么解决方案

 **单击按钮时**更新**
我正在使用以下功能导致 它在 ie8 中正常工作而在 ie 9 中导致错误的问题**

 **```
function ClientValidation() {
    if ($("#hidTabValue").val() == "15268") {
        $("#trOthers").show();
        ValidatorEnable(document.getElementById('rfvOthers'), true);
        ValidatorEnable(document.getElementById('rfvREJECT_REASON_COMMENTS'), false);
        $("#trREJECT_REASON_OTHER").hide();
        $("#hidOther").val($("#txtOthers").val());
    }
} 
```

我根据条件隐藏 Asp.net 必填字段验证器并面对此错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:24:22.083

无法看到您的屏幕，只能推测。但是，只要元素实际存在，代码在这里就可以正常工作。

```
<!DOCTYPE html>
<html>
<head>
<script>
function byId(e){return document.getElementById(e);}
function myTest()
{
    var mArray = new Array( byId('div1'), byId('mBtn') );
    alert(mArray.length);
}
</script>
</head>
        <div id='div1'>Div1</div>
        <button id='mBtn' onclick='myTest();'>click me</button>
    </body>
</html> 
```**

# c++ - 类内类访问外部类的数据成员

> ID：12724661
> 
> 赞同：2
> 
> 时间：2012-10-04T09:51:51.257
> 
> 标签：c++

我试图这样做，

```
class Outer {
public:
    struct inner_t {
        void foo()
        {
            printf("%d", _x);
        }
    };
    int _x;
};

int main()
{
    Outer o;
    o._x = 10;
} 
```

以上无法编译错误：

> 错误：非静态数据成员'Outer::_x'的使用无效</p>

但是按照[这个帖子](https://stackoverflow.com/a/8870002/888051)，`inner_t`确实可以访问`Outer::_x`，怎么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T09:53:09.530

问题是：`inner_t`不知道`Outer`要读取的实例`_x`。

如果你写过（例如）：

```
void foo(const Outer *o)
{
    printf("%d", o->_x);
} 
```

或者如果`_x`是`Outer`. 然后它应该可以工作（至少它不会出错）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T09:53:54.363

您确实可以访问`_x`类型的对象`Outer`。您基本上尝试以静态方式访问实例字段。传递一个实例`Outer`然后使用它。

# iphone - iOS - 成员引用是一个指针？

> ID：12724662
> 
> 赞同：4
> 
> 时间：2012-10-04T09:51:55.603
> 
> 标签：iphone, ios, ipad

我正在尝试使用此将 AVAudioPlayer 分配给属性

```
NSURL *soundURL = [[NSBundle mainBundle] URLForResource:@"error"
                                          withExtension:@"aiff"];
AVAudioPlayer *avSound = [[AVAudioPlayer alloc]
           initWithContentsOfURL:soundURL error:nil];
self.soundError = avSound; 
```

我在最后一行收到一条错误消息：**成员引用类型'struct objc_class *'是一个指针；也许你的意思是使用 '->' ？**

该属性被声明为

```
@property (nonatomic, strong) AVAudioPlayer *soundError; 
```

指针？我不明白。

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-04T10:03:20.043

您没有发布完整的方法，但错误可能表明您正在尝试在类方法中分配属性，而不是在实例方法中。

检查您的方法声明是否正确 - 可能应该是

```
- (void) someMethod 
```

代替

```
+ (void) someMethod 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:16:09.487

要使用点表示法，您需要 getter/setter 方法。如果您不提供自己的方法，请使用

```
@synthesize soundError; 
```

否则，用于`self->soundError`设置 ivar。

# xcode - 可可 - 应用架构

> ID：12724665
> 
> 赞同：0
> 
> 时间：2012-10-04T09:52:05.583
> 
> 标签：xcode, json, cocoa, http, architecture

我有一个可以进行 HTTP GET 调用和解析 JSON 响应的应用程序。我有大约 5/6 种不同的观点，它们正在等待响应来呈现信息。内容很像文本和图像。

问题： - 如果我只在用户进入视图时提出请求，他必须等待很长时间，这不是一个好的用户体验。- 如果我在第一个视图控制器上发出所有请求，应用程序会变得更慢，有时响应用户点击需要很长时间。

问题： - 实现应用程序的最佳方式是什么，所以我有良好的用户体验和良好的性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:46:43.487

我认为这取决于您下载的数据量。如果一个视图需要大量数据，最好仅在该视图即将显示时才下载它，这样您的应用就不会不必要地使用带宽。

如果您确实想预先加载数据，最好在单独的线程中这样做，这样 UI 线程就不会被阻塞。

您还可以缓存数据并在后台下载最新数据时使用此缓存。这创造了无缝的用户体验。

# methods - Webkit 桌面通知 - 没有方法“createHTMLNotification”

> ID：12724667
> 
> 赞同：6
> 
> 时间：2012-10-04T09:52:09.300
> 
> 标签：methods, webkit, notifications, desktop

webkit html 通知 (createHTMLNotification) 工作正常，直到昨天。出现错误（见下文），代码没有改变 -> 与最新版本的 chrome 不兼容？

```
Error message : Uncaught TypeError: Object #<NotificationCenter> has no method 'createHTMLNotification' 
```

如果我使用方法“createNotification”，它工作正常，但我需要使用 HTML 通知。

chrome 的设置允许所有网站的弹出窗口和通知（并且测试在代码中进行检查）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-05T06:20:11.177

不幸的是，此功能已从铬中删除...

见： https: [//plus.google.com/u/0/+GoogleChromeDevelopers/posts/8vWo8hq4pDm](https://plus.google.com/u/0/+GoogleChromeDevelopers/posts/8vWo8hq4pDm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-05T06:42:36.907

[http://developer.chrome.com/extensions/desktop_notifications.html](http://developer.chrome.com/extensions/desktop_notifications.html)

警告：Web 通知 API 中的 webKitNotifications.createHTMLNotification() 已被弃用。新的网络通知 API 只允许文本。Chrome 通知 API 将很快升级为稳定版，并且网络通知将更新为使用新的丰富通知格式。

仍有希望。

# javascript - 如何在 Html 和 KnockOut JS 下拉列表中动态设置索引？

> ID：12724669
> 
> 赞同：3
> 
> 时间：2012-10-04T09:52:22.867
> 
> 标签：javascript, html, knockout-mvc

我有以下代码。我在 Razor 视图中使用 Html 并使用 KnockOut JS 绑定到我的下拉列表。

如您所见，我以编程方式将索引设置为 td 是每个索引的一部分，并且我需要索引是唯一的。

我面临的问题是在选项部分，我只能通过实际硬编码来设置索引。

请有人可以告诉我如何设置它，它显示为：

选项：viewModel.MyForm.Items()[' + Index() + '].SubItems()[' + Index() + '].MyItemsList()，值：viewModel.MyForm.Items()[' + Index( ) + '].SubItems()[' + Index() + '].Id，对此的任何帮助将不胜感激。

非常感谢。

```
<td>
<select data-bind="attr: { name: 'MyForm.Items[' + Index() + '].SubItems[' + Index() + '].Id', 
id: 'MyForm_Items[' + Index() + '].SubItems[' + Index() + ']._Id'}, 
options: viewModel.MyForm.Items()[0].SubItems()[0].MyItemsList(), value: viewModel.MyForm.Items()[0].SubItems()[0].Id, 
optionsCaption: 'Select', optionsText: 'Text', optionsValue: 'Value'"
data-val-required="Required." data-val-number="The field must be a number" data-val="true"></select></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:13:27.803

澄清一下，您是否需要让 TD 携带一个唯一 ID 以匹配您的模型的一部分？否则，将 for 移动到每个循环之前和之后，并在下拉列表中构建项目。

```
<td><select name='subitems' id='subitems'>
@{foreach (blah in ViewModel.MyForm.Items)
   {
      ...          
   }
}
</select> 
```

# android-layout - 如何使用 Robotium 放大/缩小？

> ID：12724676
> 
> 赞同：1
> 
> 时间：2012-10-04T09:53:07.970
> 
> 标签：android-layout, robotium

我尝试打开网络浏览器 apk，打开一个网页。是否可以使用robotium 放大/缩小此网页？

我尝试使用robotium 使用open Office apk 自动化打开一个docx 文件。是否可以使用 robotsium 放大/缩小此文档页面？

任何人都有解决方案然后请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T07:00:20.517

据我所知，Robotium 中没有类似的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:07:11.677

对于网页，您可以使用 webview 的 zoomIn() 方法，您已经获得了参考，可以使用任意数量的方式来使用 robots.

为了能够使用此方法，您必须将您从 robotsium 获得的视图投射到 WebView 并执行缩放，您必须在 uithread 上运行。代码看起来像：

```
final WebView webView = (WebView) Solo.getView(R.id.web_views_id);
instrumentation.runOnMainSync(new Runnable() {
        @Override
        public void run() {
            webView.zoomIn()
        }
    }); 
```

# unit-testing - 基于部分单元测试的软件方法

> ID：12724679
> 
> 赞同：0
> 
> 时间：2012-10-04T09:53:14.287
> 
> 标签：unit-testing, testing, tdd

考虑到有这么多软件方法的名称，我想知道是否有任何建议只进行部分单元测试。

我是 TDD 的信徒，但有时我会感受到以下两点：

1.  大多数关于更好和更可维护的结构/设计的思考主要是通过类的第一次测试来实现的。

2.  在处理其他人的代码时，单元测试更重要

因此，我想有些人正在使用中间方法写他们的经历。我想对该主题进行一些自我研究，并了解在推动一些 TDD 实践时是否可以获得“B计划”。

有没有基于部分单元测试的软件方法论或趋势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:39:45.703

您可以在遗留代码上编写[特征测试](https://en.wikipedia.org/wiki/Characterization_test)，以捕获代码的实际行为。这是该过程的一个很好的演示：[https ://www.youtube.com/watch?v=J4dlF0kcThQ](https://www.youtube.com/watch?v=J4dlF0kcThQ)

# c# - 如何解析通过 使用 watin 标记。我想从此标签中读取数据

> ID：12724680
> 
> 赞同：0
> 
> 时间：2012-10-04T09:53:15.020
> 
> 标签：c#, watin

我想使用 watin 从 html 中的标签中读取数据。watin 中是否有任何内置功能来读取这些数据。我在下面给出 html 代码。我想基本上阅读特定领域的领域。

* * *

```
<\dl id="idname" class="classname">

        <dt>Date</dt>
            <dd>04/10/2012</dd>
        <dt>Lastdate</dt>
            <dd>04/10/2012</dd>
    <dt>Label 1</dt>
    <dd>
        data1</dd>

    <dt>label 2</dt>

    <dd>
        data2</dd>

    <dt>Label3</dt>

    <dd>
        data3</dd>

</dl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:19:11.397

不确定，但你可以试试这个：

```
var elementText =  IE.Element(Find.ById("idname")).DomContainer.Element(
                   Find.ByElement((e => e.TagName.Equals("dt" )))).Text; 
```

这应该返回第一个“dt”元素的文本。

# c# - 在 .net 中获取 imap 未读电子邮件计数，而无需臃肿的 3rd 方库

> ID：12724684
> 
> 赞同：2
> 
> 时间：2012-10-04T09:53:27.407
> 
> 标签：asp-classic, asp.net, iis, php, c#, asp.net, vb.net, imap

**背景：我们有一个用**[asp-classic](/questions/tagged/asp-classic "显示标记为“asp-classic”的问题")和[asp.net](/questions/tagged/asp.net "显示标记为“asp.net”的问题") 编写的内部 Intranet 系统- [iis](/questions/tagged/iis "显示标记为“iis”的问题")服务器没有安装[php](/questions/tagged/php "显示标记为“php”的问题")（在 php 中看到了一些漂亮的解决方案，例如这样，[但](https://stackoverflow.com/questions/7363077/using-imap-in-php-to-get-recent-unread-emails-count)我们不能真正使用这些。） - 我们需要显示给我们的用户在他们的 imap 邮箱中有多少未读邮件。他们的 imap 邮箱内部托管在运行 postfix 和 dovecot imap 的 linux 机器上。

**我的问题：** 如何通过 .net（vb 或 c#）中的 Dovecot Imap 连接到 Postfix 邮件系统并确定未读邮件的数量？

**我已经尝试过：** 我们使用了[Limilabs 邮件 dll](http://www.limilabs.com/mail)和以下内容：

```
Imports System.Net.Security
Imports System
Imports Limilabs.Mail
Imports Limilabs.Client.IMAP
Imports Limilabs.Client

Function RetrieveUnread(_server, _user, _password)
    Using imap As New Limilabs.Client.IMAP.Imap
        '#### Handler needed because of self signed certificates
        RetrieveUnread = vbNull
        AddHandler imap.ServerCertificateValidate, AddressOf ValidateCertificate
        imap.ConnectSSL(_server)
        Try
            imap.Login(_user, _password)
        Catch ex As Exception
            RetrieveUnread = "Failed to login"
        End Try
        If CStr(RetrieveUnread) <> "Failed to login" Then
            imap.SelectInbox()
            Dim uids As List(Of Long) = imap.Search(Flag.Unseen)        'Find all unseen messages.
            'Console.WriteLine("Number of unseen messages is: " & CStr(uids.Count))
            RetrieveUnread = CStr(uids.Count)
        End If
        imap.Close()
    End Using
End Function

Private Sub ValidateCertificate(ByVal sender As Object, ByVal e As ServerCertificateValidateEventArgs)
    Const ignoredErrors As SslPolicyErrors = SslPolicyErrors.RemoteCertificateChainErrors Or SslPolicyErrors.RemoteCertificateNameMismatch        ' name mismatch
    Dim nameOnCertificate As String = e.Certificate.Subject
    If (e.SslPolicyErrors And Not ignoredErrors) = SslPolicyErrors.None Then
        e.IsValid = True
        Return
    End If
    e.IsValid = False
End Sub 
```

然而，虽然这种方法有效，但这种方法依赖于第三方，如果许可没有到位/不是最新的并且对于我们需要做的事情来说过于臃肿，DLL 将失败。我们只是好奇这是否可以在本机 .net 代码中完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:48:27.563

您不需要第 3 方 dll；一个简单的[`TcpClient`](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx)就行了。

您可以将正确的 IMAP 命令发送到您的服务器，并使用正则表达式解析结果。

* * *

**LINQPad 就绪示例：**

```
Sub Main()
    Dim client = New System.Net.Sockets.TcpClient("hostname", 143)
    Using s = client.GetStream(), 
        reader = New StreamReader(s),
        writer = New StreamWriter(s)

            Dim send As Action(Of String) = Sub(command) 
                writer.WriteLine(command)
                writer.Flush()
            End Sub

            Dim recieve As Func(Of String, String) = Function(tag) 
                Dim response As String
                Dim str As String = ""
                response = reader.ReadLine()
                While response IsNot Nothing
                    str += response
                    If response.StartsWith(tag, StringComparison.Ordinal) Then
                        Exit While
                    End If
                    response = reader.ReadLine()
                End While
                Return str
            End Function

            send("a login username password"): recieve("a")
            send("b select inbox"): recieve("b")

            send("b2 SEARCH UNSEEN")
            Dim b2response = recieve("b2")
            Dim items = Regex.Match(b2response, "SEARCH (.*) OK").Groups(1).Value.Split(" "c)
            Console.WriteLine("Unread items: " + items.Count().ToString())

            send("c logout"): recieve("c")
    End Using
End Sub 
```

* * *

```
void Main()
{
    var client = new System.Net.Sockets.TcpClient("hostname", 143);
    using (var s = client.GetStream())
    using (var reader = new StreamReader(s))
    using (var writer = new StreamWriter(s))
    {
        Action<string> send = (command) => 
        {
            writer.WriteLine(command);
            writer.Flush();
        };

        Func<String, String> recieve = (tag) =>
        {
            string response;
            string str="";
            while ((response = reader.ReadLine()) != null ) 
            {
                str+=response;
                if (response.StartsWith(tag, StringComparison.Ordinal))
                    break;
            }
            return str;
        };

        send("a login username password"); recieve("a");
        send("b select inbox"); recieve("b");

        send("b2 SEARCH UNSEEN");
        var b2response = recieve("b2");
        var items = Regex.Match(b2response, @"SEARCH (.*) OK").Groups[1].Value.Split(' ');
        Console.WriteLine("Unread items: " + items.Count().ToString());

        send("c logout"); recieve("c");
    }
} 
```

如果要使用 SSL，则必须先将流包装`s`在 an 中[`SslStream`](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx)并调用[`AuthenticateAsClient`](http://msdn.microsoft.com/en-us/library/ms145060.aspx)（并且可能使用端口 993）。

# java - 如何更改 JOptionPane 的字体大小

> ID：12724686
> 
> 赞同：1
> 
> 时间：2012-10-04T09:53:36.743
> 
> 标签：java, swing, joptionpane

```
import java.awt.ComponentOrientation;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JOptionPane;
import javax.swing.JScrollPane;

public class trial2 
{   
public static void main(String[] args) 
{
    String[] option = {"Chorita M. Adlawan", "Noel B. Angeles", "Julie P. Benenoso", "Percival P.Bermas", 
            "Beverly Mae M. Brebante","Adela N. Cabaylo", "Carol G. Cainglet", "Oscar U. Cainglet", 

    String selected = (String)JOptionPane.showInputDialog(null, "MINES AND GEOSCIENCES BUREAU - REGION XI, DAVAO CITY\n" +
            "                         LIST OF REGISTERED EMPLOYEES", 
            "Please Select Employee",JOptionPane.DEFAULT_OPTION, null, option , "Adlawan");     

}
} 
```

这些是我上面的代码。我的问题是，我可以更改我的 JOptionPane 的字体大小和样式以使我的列表字体更大，非常感谢任何提示。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T10:05:29.007

如果希望所有`JOptionPane`s 具有相同的字体样式和大小，可以更改`UIManager`with 的属性：

```
javax.swing.UIManager.put("OptionPane.font", new Font("yourFontName", Font.BOLD, 30)); 
```

要获取可用字体名称的列表，请使用以下代码段：

```
GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
String[] fontNames = ge.getAvailableFontFamilyNames();

for (int index = 0; index < fontNames.length; index++)
{
     System.out.println(fontNames[index]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:58:24.330

最简单的方法之一是直接在字符串文字中使用 HTML。例如：

`"MINES AND GEOSCIENCES BUREAU - REGION XI, DAVAO CITY\n"`

很容易变成：

`"<html><span style='font-size:2em'>MINES AND GEOSCIENCES BUREAU - REGION XI, DAVAO CITY"`

请注意，当您使用 HTML 时，您不能再使用`\n`换行符。改为使用`<br>`。

# javascript - 在下拉框中进行选择后显示一个值

> ID：12724690
> 
> 赞同：-1
> 
> 时间：2012-10-04T09:53:48.880
> 
> 标签：javascript, jquery, html

我正在创建这样的标记

```
<select name="country" class="country">
<option selected="selected">--Select Country--</option>
<option value="1">India</option>
<option value="2">United States</option>
<option value="3">United Kingdom</option>
</select> 
```

现在我的要求是当我从下拉列表中选择任何内容时，其各自的值应该是一个值。任何人都可以提出一些如何实现这一目标的建议。我正在考虑这样做 onChange 但问题是当我第二次单击下拉列表时，该值将被重新替换。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:59:44.313

像这样的东西？

```
<select name="country" class="country">
   <option selected="selected">--Select Country--</option>
   <option value="1" data-text='india'>India</option>
   <option value="2" data-text='United States'>United States</option>
   <option value="3" data-text='United Kingdom'>United Kingdom</option>
</select> 
```

```
$('.country').change(function(){
    $('option', this).text(function(){
       return this.dataset.text
    })
    $(':selected', this).text(this.selectedIndex)
}) 
```

[​http://jsfiddle.net/aVBKq/](http://jsfiddle.net/aVBKq/) ​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:06:10.827

弄清楚了。`mouseup`不工作，但是`mousedown`！而且我的解决方案也不需要你写两次国家名称。

```
$('.country').change(function() {
    var selected = $(':selected', this);
    var index = this.selectedIndex;
    if (index) {
        selected.data('savedtext', selected.text()).text(index);
    }
});
$('.country').mousedown(function() {
    $(':selected', this).text($(':selected', this).data('savedtext'));
}); 
```

​<a href="http://jsfiddle.net/barmar/aVBKq/3/" rel="nofollow">小提琴

编辑：

这是显示选项值而不是索引的另一个版本：

```
$('.country').change(function() {
    var selected = $(':selected', this);
    var value = selected.val();
    if (value) {
        selected.data('savedtext', selected.text()).text(value);
    }
});
$('.country').mousedown(function() {
    $(':selected', this).text($(':selected', this).data('savedtext'));
});​ 
```

[小提琴](http://jsfiddle.net/barmar/aVBKq/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T10:34:19.183

当您 `$("select[name='country']").val();`默认使用时，将显示正确的值。对于 --Select-- 使用 0 作为值。

# android - 从 Eclipse 调试时的 ADB 命令行选项？

> ID：12724694
> 
> 赞同：2
> 
> 时间：2012-10-04T09:53:54.097
> 
> 标签：android, eclipse, debugging, adb, options

我正在使用 Eclipse 在设备上调试 Android 应用程序。我想在调试会话之间保留应用程序数据。我应该能够从命令行执行此操作，如下所示：

```
adb uninstall -k com.package.myprogram
adb install -r MyProgram.apk 
```

但是，我必须在命令行上进行调试——Eclipse 更好！当我使用 Eclipse 进行调试时，是否可以设置这些选项？或者以某种方式通过 ADB shell 设置这些选项，但仍然使用 Eclipse 来捕获断点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:14:34.627

Eclipse 不做任何黑魔法！对于所有事情，最终都会访问 adb.exe 与设备对话。只需在命令行上键入 adb，您将获得许多选项，您可以使用这些选项做很多事情。除了 adb，还有其他工具可以帮助调试。研究一下哪个最适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T17:55:44.203

只需在 Eclipse 中为您的 Android 项目创建启动配置（在*运行*菜单中）。如果您修改应用程序代码并再次运行启动配置，Eclipse 将在设备上安装应用程序的新版本，而不会触及其任何数据。完全没有必要先卸载旧版本。

# java - Netbeans 看不到引用库中的类

> ID：12724697
> 
> 赞同：1
> 
> 时间：2012-10-04T09:54:07.013
> 
> 标签：java, android, netbeans, ide, actionbarsherlock

我正在使用带有 NBAndroid 扩展的 netbeans 7.2。在我的 android 项目中，我引用了一个不在 jar 中的库（ActionBarSherlock）（由于某种原因不能）。问题是，netbeans 没有看到该库中的类并给我错误（包不存在等）但是它构建并运行正常，库被正确添加。Netbeans 只是没有看到它。

这是一个[截图](http://oi50.tinypic.com/10fq9i0.jpg)。

这是类似的问题，没有解决方案[包 com.actionbarsherlock.app 不存在](https://stackoverflow.com/questions/12060208/package-com-actionbarsherlock-app-does-not-exist)

有没有办法来解决这个问题？感谢帮助！

* * *

**编辑：**所以我找到了解决这个问题的方法，它更像是一种解决方法而不是解决方案。我从名为 classes.jar 的库类中创建了一个 jar 文件。我把它放在 libs 文件夹中，所以 netbeans 可以看到它。比我创建的 custom_rules.xml （它是通过 build.xml 导入的）。在其中，我将 classes.jar 从 libs 文件夹中移开，这样我就可以构建它，最后我将它移回原处。

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="imported">

    <copy file="libs/classes.jar" todir="./" />
    <delete file="libs/classes.jar" />

    <target name="-post-compile">
        <copy file="./classes.jar" todir="libs/" />
        <delete file="./classes.jar" />
    </target>

</project> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-07T19:03:34.287

您看到的错误是因为 NetBeans 无法识别包、类、方法等。当您构建或运行程序时，NetBeans 求助于 Android 项目的 Ant 脚本，该脚本显然已正确配置以查找类。就编译和运行而言，你不会有问题。但是，如果您想使用 NetBeans 的自动完成和错误检测功能，则需要对其进行配置以检测您的库。为此，只需在“项目”窗格中右键单击您的项目名称，然后从上下文菜单中单击“属性”。接下来，单击左侧类别下的库。然后单击 Add JAR/Folder 并导航到包含第三方库的文件夹。您可以选择路径选项之一，然后单击“确定”。现在，NetBeans 应该能够找到标识符并帮助您编写代码。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-11T11:49:17.113

我建议您使用 ActionBarSherlock 作为库项目，而不是在您的构建脚本中做一些技巧。您应该能够在项目定制器中执行此操作（选择项目，右键单击，选择属性）。

[另请参阅http://actionbarsherlock.com/usage.html](http://actionbarsherlock.com/usage.html)中的“包含在您的项目中”项目符号 2。

-拉迪姆

# ios - 从 UIBarButton 访问 UIToolbar

> ID：12724700
> 
> 赞同：0
> 
> 时间：2012-10-04T09:54:23.273
> 
> 标签：ios, facebook-ios-sdk

我有一个 UIBarButton，我想访问包含它的 UIToolbar。由于按钮不是 UIView 我不能简单地获得超级视图。有谁知道是否有办法做到这一点？

蒂姆

PS 如果你对我为什么需要这个感到好奇，我正在使用 Facebook SDK 中的 FBFriendPicker 类，它会在顶部显示带有 UIToolbar 的朋友列表。我需要更改工具栏的色调，但 SDK 只允许我访问按钮。我当然可以更改源，但我宁愿没有自己对 SDK 的更改的维护开销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:08:28.553

好吧，似乎不可能从 UIButtonItem 中找到 UIToolbar。

为了解决手头的问题，我从控制器中找到了它....

```
 [self.friendPickerController presentModallyFromViewController:_controller
                                                         animated:YES
                                                          handler:nil];

    // Find the UIToolbar so that we can change its colour

    for (UIView *view in self.friendPickerController.view.subviews) {
        if ([view isKindOfClass:[UIToolbar class]]) {
            UIToolbar *toolbar = (UIToolbar *)view;
            toolbar.tintColor = BRANDINGTEXTCOLOUR;
            break;
        }
    } 
```

# sql - SQL 文本 LIKE 并不总是有效

> ID：12724702
> 
> 赞同：-3
> 
> 时间：2012-10-04T09:54:26.373
> 
> 标签：sql, sql-server-2008, tsql, full-text-search, sql-like

我正在比较 SQL Server 2008 中同一表和同一列中的文本值，但结果有时不正确。可能相关的列信息：

```
Data type: text  
Full Text: True  
Collation: SQL_Latin1_General_CP1_CI_AS 
```

在 100 个实际匹配中，我只得到 62 个。我在一些比较工具中比较了 LIKE 未拾取的字段值，它们 100% 相同，没有额外的空格、换行符等。

知道为什么文本 LIKE 并不总是有效吗？

SQL：

```
SELECT a.text as one, b.text as two
  FROM [Db].[dbo].[Table] a join
  [Db].[dbo].[Table] b on
  a.text LIKE b.text 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T11:52:21.403

以下两个示例显示`LIKE`完全按预期工作。我怀疑你说“`LIKE`并不总是有效”的原因是因为你不知道如何`LIKE`工作。

这是一个应该发生一个匹配的示例：

```
CREATE TABLE #tmpTable
(
  [Text] TEXT
);

INSERT INTO #tmpTable VALUES ('Hello');

SELECT *
  FROM #tmpTable tmpTable1
       INNER JOIN #tmpTable tmpTable2
         ON tmpTable1.[Text] LIKE tmpTable2.[Text];

DROP TABLE #tmpTable; 
```

“`Hello`就像`Hello`，”你说。

这是一个不应该发生匹配的匹配：

```
CREATE TABLE #tmpTable
(
  [Text] TEXT
);

INSERT INTO #tmpTable VALUES ('[h]');

SELECT *
  FROM #tmpTable tmpTable1
       INNER JOIN #tmpTable tmpTable2
         ON tmpTable1.[Text] LIKE tmpTable2.[Text];

DROP TABLE #tmpTable; 
```

“但`[h]` *就像*，`[h]`”你说。

`LIKE`不是相等运算符，它具有用于搜索单个字符、字符范围和可变字符数的特殊语法。如果您碰巧在使用该特殊语法（有意或无意）的列中为其提供文本，它将将该特殊语法视为字符匹配指令，而不是文字文本。

# apache - mod_pagespeed 缓存文件夹中的奇怪域

> ID：12724705
> 
> 赞同：3
> 
> 时间：2012-10-04T09:54:37.843
> 
> 标签：apache, vps, mod-pagespeed

大约一年前，我在我的 VPS 服务器上安装了 mod_pagespeed，设置好它并让它运行。最近我在浏览我的服务器上的文件，去 pagespeed 缓存文件夹并发现了一些奇怪的文件夹。

所有文件夹通常以这种方式命名`,2Fwww.mydomain.com`或`,2F111.111.111.111`用于 IP 地址。我很惊讶地看到一些不属于我的域，例如：

```
24x7-allrequestsallowed.com
allrequestsallowed.com
m.odnoklassniki.ru
www.fbi.gov
www.securitylab.ru 
```

看起来有什么诡异的事情发生了，我的服务器被入侵了，有什么合理的解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:52:41.400

那看起来确实很奇怪。缓存文件夹中的所有内容都应该是 mod_pagespeed 尝试重写的文件。据我所知，有两种方式会发生这种情况：

1）您引用了一些第三方资源（例如来自另一个域的图像，或谷歌分析脚本），并且您已明确启用使用`ModPagespeedDomain www.example.com`or重写该域`ModPagespeedDomain *`。

2) 如果您的服务器接受带有无效 Host 标头的 HTTP 请求。尝试（例如）`wget --header="Host: www.fbi.gov" www.yourdomain.com/foo/bar.html`。如果您的服务器接受这样的请求，它可能会为 mod_pagespeed 提供不正确的基本域，然后将从同一域获取子资源（因此，如果 www.yourdomain.com/foo/bar.html 引用 some.jpeg，并且您的服务器接受无效的主机头，我们可以获取 www.fbi.gov/foo/some.jpeg 作为资源）。最近有一个安全版本确保所有这些子请求都是针对 localhost（不是任意第三方网站）完成的。请参阅：[https ://developers.google.com/speed/docs/mod_pagespeed/CVE-2012-4001](https://developers.google.com/speed/docs/mod_pagespeed/CVE-2012-4001)

您可能想要查看这些文件夹并查看其中有哪些特定资源。我认为您应该最担心的是有人可能试图对您的用户执行 XSS 攻击，或者可能是对另一个网站（如 www.fbi.gov）的 DDoS 攻击，使用您的服务器作为一个载体。我不认为这些文件夹表明您的服务器本身已受到威胁。

如果您想对此进行更多讨论，[https://groups.google.com/forum/?fromgroups#](https://groups.google.com/forum/?fromgroups#!forum/mod-pagespeed-discuss) !forum/mod-pagespeed-discuss是一个很好的加入和发送电子邮件的列表。

# intellisense - 为什么 IntelliSense 不总是填满 Dynamics AX 2012

> ID：12724713
> 
> 赞同：0
> 
> 时间：2012-10-04T09:54:52.553
> 
> 标签：intellisense, axapta, dynamics-ax-2012

我在 Microsoft Dynamics Ax 2012 中使用的智能感知存在问题。它似乎并非每次都被填满。

当我尝试编辑现有作业或类方法时，我使用 . （点）或 ::（双冒号）我得到一个小空白框（大约一毫米厚，智能感知框的正常宽度）。如果我在此之后继续输入，则文本不会在屏幕上填写，但是当我点击选项卡时，会使用智能感知的第一个选项。所以智能感知系统可以工作，但我只是看不到这些选项。（这让我在互联网上查找每个类的方法）。但是，每当我做一项新工作或新方法时，我都会让智能感知框完全填满所有选项。

有没有人遇到过类似的问题？（并找到了解决方案？）

我试过用不同的屏幕、不同的分辨率来解决它，在我的客户端版本和服务器上尝试过。其他用户似乎没有这个问题，所以我假设它是我电脑上本地的东西......

谢谢你，洛德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:19:35.227

我从未在 AX2012 中处理过这种情况，但在以前的版本中，IntelliSense 问题是由于隐藏的编译错误（有错误，但编译器没有显示它们）或损坏的元数据（内部问题）造成的。

一些解决方案，首先，编译我们有问题的对象（如果它是一个类，则向前编译）。如果这似乎不起作用，运行更新 AOT 上的元数据的作业（它们位于开发菜单下），最后，更新给出问题的对象的交叉引用（右键单击对象）或最坏的情况，更新整个 AOT（定期作业）的所有交叉引用

# lotus-notes - 如何删除 32k 错误的文档？

> ID：12724715
> 
> 赞同：1
> 
> 时间：2012-10-04T09:55:17.360
> 
> 标签：lotus-notes, lotusscript, lotus-formula

我有一些文件。如果我尝试打开文档，则会显示诸如“字段太大 32k 或视图的列和选择公式太大”之类的错误

每当我尝试删除文档时，都会遇到同样的错误。我无法删除。

好的，我们可以尝试通过后端获取文档，但是在那里，我无法获取文档句柄。

无论我尝试搜索什么，文档集合计数都是 0。

> 重要提示：- 我使用的是 Notes 6.5.2。

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:08:24.260

您可以创建数据库的新副本，不会复制损坏的文档。您也可以尝试使用 Ytria 的 ScanEZ 工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T15:35:58.370

“好的，我们可以尝试通过后端获取文档，但是在那里，我无法获取文档句柄。”

你能发布你正在使用的代码吗？我不明白为什么以下代码不起作用：

```
Dim session As New NotesSession
Dim db As NotesDatabase
Dim col As NotesDocumentCollection
Dim doc As NotesDocument
Dim deleteDoc List as NotesDocument

Set db = session.Currentdatabase
'*** Get collection of selected documents
Set col = db.UnprocessedDocuments
'*** Loop through selected documents
Set doc = col.GetFirstDocument
Do Until doc Is Nothing
    '*** Add document to list to delete later
    Set deleteDoc(doc.UniversalID) = doc
    Set doc = col.GetNextDocument(doc)
Loop

'*** Delete all documents in list from database
ForAll d in deleteDoc
    Call d.Remove(True)
End ForAll 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T03:04:58.873

也许您可能希望将导致您头痛的字段更改为富文本，因为富文本字段的限制比普通文本字段稍大。富文本文件的限制仅受最多 1GB 的可用磁盘空间限制

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T02:43:16.127

您是否尝试过简单地删除损坏文档上的问题字段，然后删除该文档？您可以尝试执行以下操作：

1-使用以下公式创建一个代理集以在选定的文档上运行：

```
FIELD corruptfield := @DeleteField; 
```

2 - 在视图中选择一个问题文档并运行代理

3 - 如果没有出错，请尝试从视图中手动删除文档。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-30T21:02:30.887

这对我有用：

1/ 使用 DocViewer 获取文档的 Note ID

**可能有许多其他方法可以获取 NoteID，但它只是在我尝试通过DocViewer**发送文档时出现，众所周知的免费工具
[https://www.openntf.org/main.nsf/project.xsp?r =项目/文档%20查看者/摘要](https://www.openntf.org/main.nsf/project.xsp?r=project/Document%20Viewer/summary)

2/ 使用 Notes C API 删除文档

我听从了*pstr*的建议，很快就找到了这个脚本 [http://www.nsftools.com/tips/ApiStublessDelete.lss](http://www.nsftools.com/tips/ApiStublessDelete.lss)
只要把它对准好的数据库，用 Note ID，就可以了！

我试图更改脚本以不删除删除存根（我希望删除将复制到我的集群和本地副本上）。但是您又回到了 32k 错误！因此，您必须对每个副本应用删除（当然也可以重新创建副本）。

# java - 将控制权返回给java中的switch语句？

> ID：12724722
> 
> 赞同：2
> 
> 时间：2012-10-04T09:55:45.143
> 
> 标签：java, loops

我有一个基于客户端-服务器控制台的应用程序，在客户端我使用 switch 语句来选择诸如上传/下载/更改密码等选项。当用户输入一个数字进行假设时

```
 String userchoice = console.readLine("Enter your choice :"); 
      int choice= Integer.parseInt(userchoice);
      switch (choice){  
      case 3: 
      ........
      Socket soc = new Socket("localhost", 6007);
      String reply;
      String client = username;
      char newpswd[] = console.readPassword("Enter your new Password :");
      String newpwd=new String(newpswd);
      char newpswd1[] = console.readPassword("Confirm your new Password :");
      String newpwd1=new String(newpswd1);
      if(newpwd.equals(newpwd1)) {
      ........
      }
      else {
      S.O.P ("Passwords don't match");  
      }
      break; 
```

该过程完成后，我需要再次发送用户切换（选择）语句，要求输入选项编号。我试过**continue**，**return**但没有一个对我有用。**return** - 我想将返回到 JVM，它正在退出程序。由于 Java 中不使用 goto，我的替代方案是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T09:59:19.217

> 该过程完成后，我需要再次发送用户切换（选择）语句

然后你需要一个循环：

```
while (!quit) {
    String userchoice = console.readLine("Enter your choice :"); 
    ...
    switch (...) {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T10:00:23.697

```
do {

...

}while(choice != EXIT_CHOICE); 
```

其中 EXIT_CHOICE 是一个常数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T10:00:08.000

您可以使用 while 循环，该循环将一直执行到它的条件为假或从内部中断为止。

```
while (some condition) {
    String userchoice = console.readLine("Enter your choice :");
    ......
    if (some case is met) {
        break;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T10:00:42.390

你可以把它全部放在一个返回布尔值的方法中，如果密码匹配，则返回 true，否则返回 false。然后你可以使用类似的东西：

```
boolean loginSuccess = false;
while (!loginSuccess) {
    loginSuccess = loginMethod();
} 
```

**编辑**

或者你可以使用一个do循环......

```
do {
    String userchoice = console.readLine("Enter your choice :"); 
    int choice= Integer.parseInt(userchoice);
    switch (choice){  
    case 3: 
    ........
    Socket soc = new Socket("localhost", 6007);
    String reply;
    String client = username;
    char newpswd[] = console.readPassword("Enter your new Password :");
    String newpwd=new String(newpswd);
    char newpswd1[] = console.readPassword("Confirm your new Password :");
    String newpwd1=new String(newpswd1);
} while (!newpwd.equals(newpwd1)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T10:01:28.720

它不能以这种方式工作。当你到达一个开关时，它决定（基于评估的表达式和存在的选择）哪个将是下一个要执行的操作，并且什么都不做（这就是为什么你需要`break`语句来避免遇到下一个代码）。

让开关进入循环或被调用两次的函数。

# java - Android 在同一布局 xml 上有一个表格和按钮

> ID：12724726
> 
> 赞同：0
> 
> 时间：2012-10-04T09:55:56.687
> 
> 标签：java, android, android-listview

我有一个页面，我想在中间放一张桌子，上面和下面都有按钮。我的布局有以下 XML。但即使我能解决它也行不通！

编辑：我更新了我的 XML 以显示我想要实现的目标。里面的桌子，但它不会让我通过`ListView listView = (ListView) findViewById(R.id.lvLocation);`

![在此处输入图像描述](../Images/5162e9872d0a57b15a78a31ec4be6f0f.png)

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/btnAdd"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Add Item" />

       <ListView
           android:id="@+id/lvLocation"
           android:layout_width="match_parent"
           android:layout_height="fill_parent"
           android:layout_above="@+id/btnBack"
           android:layout_alignParentLeft="true"
           android:layout_below="@+id/btnAdd"
           android:drawSelectorOnTop="false" >

    </ListView>

    <Button
        android:id="@+id/btnBack"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:text="Back" />

</RelativeLayout> 
```

我的代码：（删除了 Db 调用和数组设置）

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_location_list_view);

    ListView listView = (ListView) findViewById(R.id.lvLocation);
    final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
          android.R.layout.simple_list_item_2, android.R.id.text1, mArrayList);

    int[] colors = {0, 0xFFFF0000, 0}; 
    listView.setDivider(new GradientDrawable(Orientation.RIGHT_LEFT, colors));
    listView.setDividerHeight(1);
    listView.setAdapter(adapter); 

    }

} 
```

这是我想要实现的目标。不是颜色，只是概念：

![在此处输入图像描述](../Images/ffee0724e7e15609c6600e74e29cddab.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:59:03.210

我认为这会有所帮助

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/btnAdd"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Add Item" />

    <TableLayout
        android:id="@+id/lvLocation"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/btnBack"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/btnAdd" >

    </TableLayout>

    <Button
        android:id="@+id/btnBack"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:text="Back" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:23:41.320

代替 ：

```
ListView listView = (ListView) findViewById (R.id.lvlocation); 
```

只需使用：

```
 ListView listView  = getListView(); 
```

# c# - FileSystemWatcher 的文件访问错误

> ID：12724728
> 
> 赞同：0
> 
> 时间：2012-10-04T09:56:04.740
> 
> 标签：c#, .net, service, file-io

我正在使用 File Watcher (.NET) 并且总是收到以下错误 - 另一个进程正在使用文件。

上述错误仅出现在网络共享中，即监视目录是共享的，如果有人将文件放入该目录，则只会出现此错误。当我将文件从我的 m/c 放到观看目录（本地）时，它工作正常。

这就是我下面的代码的样子，错误出现在第一行本身。我已经尝试了网上给出的所有解决方案，但似乎没有任何效果。当我放置 Thread.Sleep(500) 时，唯一的解决方案有效，但之后它无法选择下一个文件。任何建议都会有很大帮助。

```
 try
        {

         using (Stream stream = File.Open(xmlPath, FileMode.Open, FileAccess.Read,             FileShare.Read))
          {
                    XmlTextReader xmlTextReader = new XmlTextReader(stream);
                    document = XDocument.Load(xmlTextReader);
                    ........ // my code
                    xmlTextReader.Close();
                    stream.Close();

           }
        }
       catch (Exception exception)
            {
                EventLog.WriteEntry("Application", exception.ToString(), EventLogEntryType.Error);

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:05:00.853

我想您会发现该文件不可访问，因此为什么等待有效..

看看这段代码，看看这是否有帮助......

```
// Consider having a List<String> named _changedFiles

private void OnChanged(object source, FileSystemEventArgs e)
{
    lock (_changedFiles)
    {
        if (_changedFiles.Contains(e.FullPath))
        {
            return;
        }
    }

    // do your stuff

    System.Timers.Timer timer = new Timer(1000) { AutoReset = false };
    timer.Elapsed += (timerElapsedSender, timerElapsedArgs) =>
    {
        lock (_changedFiles)
        {
            _changedFiles.Remove(e.FullPath);
        }
    };
   timer.Start();
} 
```

来自： [FileSystemWatcher Changed 事件引发两次](https://stackoverflow.com/questions/1764809/filesystemwatcher-changed-event-is-raised-twice)

# android - 显示键盘时布局不正确

> ID：12724729
> 
> 赞同：1
> 
> 时间：2012-10-04T09:56:14.940
> 
> 标签：android, android-layout

我在RelativeLayout中有TextView，它可以正常工作：

```
<TextView
    android:id="@+id/tv_client_in"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/tv_label_client_out"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/tv_label_client_in"
    android:background="@drawable/border"
    android:ems="10" /> 
```

现在我需要将此 TextView 放在 ScrollView 中：

```
<ScrollView android:id="@+id/sv_client_in"
    android:layout_width="fill_parent" 
    android:layout_height="match_parent"
    android:layout_above="@+id/tv_label_client_out"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/tv_label_client_in"
    android:background="@drawable/border"
    android:fillViewport="true"
    >

    <TextView
        android:id="@+id/tv_client_in"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ems="10"
         />

</ScrollView> 
```

在此更改后布局看起来不错（第一张图片），但是当显示键盘时，它已损坏（第二张图片）。我怎样才能解决这个问题？

![好的](../Images/7fc06d8f742a1bd8ccf5d6eb7b26af7e.png)

![坏的](../Images/fc892a9dbe754840dc90524899930106.png)

完整布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/tv_label_client_host"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="20dp"
    android:ems="10"
    android:text="@string/label_host" />

<EditText
    android:id="@+id/et_client_host"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/tv_label_client_host"
    android:ems="10" 
    android:inputType="text"
    android:lines="1" />

<TextView
    android:id="@+id/tv_label_client_port"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/et_client_host"
    android:ems="10"
    android:text="@string/label_port" />

<EditText
    android:id="@+id/et_client_port"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/tv_label_client_port"
    android:ems="10"
    android:inputType="number"
    android:lines="1" />

<ScrollView android:id="@+id/sv_client_in"
    android:layout_width="fill_parent" 
    android:layout_height="match_parent"
    android:layout_above="@+id/tv_label_client_out"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/tv_label_client_in"
    android:background="@drawable/border"
    android:fillViewport="true"
    >

    <TextView
        android:id="@+id/tv_client_in"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ems="10"
         />

</ScrollView>

<Button
    android:id="@+id/btn_client_send"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:text="@string/btn_send"
    android:onClick="OnBtnSendClick" 
    />

<TextView
    android:id="@+id/tv_label_client_out"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/btn_client_send"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:ems="10"
    android:text="@string/label_client_out" />

<EditText
    android:id="@+id/et_client_out"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_toLeftOf="@+id/btn_client_send"
    android:ems="10" 
    android:inputType="text"
    android:lines="1" />

<Button
    android:id="@+id/btn_client_clear"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/et_client_port"
    android:text="@string/btn_client_clear"
    android:onClick="OnBtnClearClick"
    />

<Button
    android:id="@+id/btn_client_disconnect"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/et_client_port"
    android:text="@string/btn_client_disconnect"
    android:onClick="OnBtnDisconnectClick" 
    />

<Button
    android:id="@+id/btn_client_connect"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/et_client_port"
    android:layout_toLeftOf="@+id/btn_client_disconnect"
    android:text="@string/btn_client_connect"
    android:onClick="OnBtnConnectClick" 
    />

<TextView
    android:id="@+id/tv_label_client_in"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/btn_client_connect"
    android:ems="10"
    android:text="@string/label_client_in"
    />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:45:12.010

使用LinearLayout解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:01:22.867

这主要是因为视图与底部对齐。您已将它们与底部对齐，因此当键盘弹出时底部会发生变化，因此与之关联的视图也会发生变化。尝试检查您的 xml 文件。

# javascript - 如何在wordpress模板中定义jquery

> ID：12724730
> 
> 赞同：2
> 
> 时间：2012-10-04T09:56:14.370
> 
> 标签：javascript, jquery, wordpress

如何在我的新 wordpress 主题中定义 jquery 我都知道 jquery 没有定义，所以所有与 jquery 一起使用的插件都不能正常工作，因为更快速的图像插入或 jquery 手风琴菜单垂直以及 wordpress 中的任何弹出窗口 cpanil 尝试添加

```
<?php wp_enqueue_script("jquery"); ?> 
```

前

```
<?php wp_head(); ?> 
```

并尝试在 function.php 中添加这一行

```
if (!is_admin()) add_action("wp_enqueue_scripts", "my_jquery_enqueue", 11);
function my_jquery_enqueue() {
   wp_deregister_script('jquery');
   wp_register_script('jquery', "http" . ($_SERVER['SERVER_PORT'] == 443 ? "s" : "") . "://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js", false, null);
   wp_enqueue_script('jquery');
} 
```

我做对了吗

我怎么知道 jquery 在主题中定义？或者在所有站点中停用 jquery 可能会发生什么冲突

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:25:13.347

您可以检查 jQuery 是否包含在 Google Chrome 中。只需使用检查元素，您应该会在头部标签的某处或正文的末尾看到一个脚本标签（在 src 中有 jquery 文件，您可以检查它以验证代码是否真的存在）。

您的代码看起来正确，但可能有错误。最好检查实际页面。另外，请记住，您应该在其他 jQuery 插件之前包含 jQuery。

还有一件事，我认为最好使用 WordPress 的 jQuery 来确保不会引入错误或与 Google 的不兼容。你可以通过把它放在functions.php中来做到这一点

```
function insert_jquery(){
   wp_enqueue_script('jquery');
}
add_filter('wp_head','insert_jquery'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:28:49.727

您自己在 wp 和 jQuery 中的脚本可能无法很好地协同工作。你应该使用 jQuery 的[noConflict](http://api.jquery.com/jQuery.noConflict/)模式！（我很抱歉内容相当糟糕，但我现在在移动设备上。稍后会添加来源和示例。）

您可以将其用作 var，如下所示：

```
$j = jQuery.noConflict();

$j(document).ready(function(){
    $j("form#searchform input[type=text]").focus(function() {
        $j(this).animate({
            width: "140px"
        }, 400);
    });
    $j("form#searchform input[type=text]").blur(function() {
        $j(this).animate({
            width: "60px"
        }, 400);
    });
}); 
```

# jquery - 需要将价格查询附加到当前 url？

> ID：12724731
> 
> 赞同：1
> 
> 时间：2012-10-04T09:56:15.507
> 
> 标签：jquery, html, jquery-ui, jquery-slider

我正在使用下面的 JQUery 滑块代码..

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>jQuery UI Slider - Range slider</title>
    <link rel="stylesheet" href="../../themes/base/jquery.ui.all.css">
    <script src="../../jquery-1.8.2.js"></script>
    <script src="../../ui/jquery.ui.core.js"></script>
    <script src="../../ui/jquery.ui.widget.js"></script>
    <script src="../../ui/jquery.ui.mouse.js"></script>
    <script src="../../ui/jquery.ui.slider.js"></script>
    <link rel="stylesheet" href="../demos.css">
    <style>
    #demo-frame > div.demo { padding: 10px !important; };
    </style>
    <script>
    $(function() {
        $( "#slider-range" ).slider({
            range: true,
            min: 0,
            max: 500,
            values: [ 75, 300 ],
            slide: function( event, ui ) {
                $( "#minprice" ).val( ui.values[ 0 ] );     
                $( "#maxprice" ).val( ui.values[1 ] );  

            }

        });

    });

    </script>
</head>
<body>

<div class="demo">

<form style="margin-top:10px">

      £<input type="text" size="4" id="minprice"> - £<input type="text" size="4" id="maxprice" >
<input type="hidden" name="price" id="pricefilter">

<input type="submit" value="GO" id="pricego" class="ui-button ui-widget ui-state-default ui-corner-all" role="button" aria-disabled="false">
</form>

<div id="slider-range"></div>

</div><!-- End demo -->

</body>
</html> 
```

我需要调整表单以将 2 个输入字段（minprice 和 maxprice）作为 1 个字段（price）发送到 URL。

我的意思是 url 的 o/p 应该是这样的：

```
http://www.mywebsite.com/category/shoes/?price=150-300 
```

这将需要修改 HTML，可能还需要修改用于操作数据的 jQuery...

那么，谁能告诉我实现这一目标......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:23:04.683

将函数更改`slide`为：

```
 slide: function( event, ui ) {
            $( "#minprice" ).val( ui.values[ 0 ] );     
            $( "#maxprice" ).val( ui.values[1 ] );  
            $( "#pricefilter" ).val( ui.values[0]+'-'+ui.values[1] );
        } 
```

# google-maps - 街景控件在 Chrome 中不可见

> ID：12724732
> 
> 赞同：0
> 
> 时间：2012-10-04T09:56:15.643
> 
> 标签：google-maps, google-maps-api-3, google-street-view

我试图弄清楚为什么街景控件在以编程方式打开街景时不会出现在 Chrome 浏览器中，但在使用街景小人显示街景时它们确实会出现......

这是地图： [http ://beta.findtoilet.dk/?term=2&lat=55.678937&lng=12.575738&zoom=15&​​maptype=roadmap](http://beta.findtoilet.dk/?term=2&lat=55.678937&lng=12.575738&zoom=15&maptype=roadmap)

拖动街景小人以显示街景，它可以完美运行。您可以看到右上角的关闭按钮、缩放和指南针控件以及左下角和右下角的 Google 链接。

现在通过单击标记或侧边栏项目打开信息窗口。信息窗口包含一个用于打开该标记的 StreetView 的链接 - 单击该链接。StreetView 显示，但没有任何控件可见，底部的两个 Google 链接也不可见。然而，如果您将鼠标悬停在将显示控件的位置，则鼠标单击就像控件可见一样起作用。如果您将鼠标悬停在右上角直到它变成指向手并单击缩放控件所在的位置，则街景将放大或缩小，并且在缩放时您可以看到所有不可见的控件。

在 Firefox 和 IE9 上一切正常。我在 64 位 Windows 7 电脑上使用所有浏览器的最新版本，另一个人在 32 位 Windows XP 上报告了同样的问题。

我尝试使用 Chrome 开发人员工具，但没有看到任何会导致控件不可见的内容。

这曾经在 Chrome 中正常工作，所以我不确定问题是否与 Chrome 更新或 Google Maps API 的更改有关 - 最近没有对地图 JavaScript 进行任何更改。

谁能建议可能出了什么问题？

谢谢。

马丁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:55:14.957

问题似乎与`-webkit-transform:scale(1)`您申请`#toiletMap div[style]`.

删除它，它解决了问题..

或者，您可以添加`translateZ(0)`以解决问题。

```
-webkit-transform:scale(1) translateZ(0); 
```

**更新**

它必须与

*   [http://code.google.com/p/gmaps-api-issues/issues/detail?id=3928&q=webkit%20Transform&colspec=ID%20Type%20Status%20Introduced%20Fixed%20Summary%20Stars%20ApiType%20Internal](http://code.google.com/p/gmaps-api-issues/issues/detail?id=3928&q=webkit%20Transform&colspec=ID%20Type%20Status%20Introduced%20Fixed%20Summary%20Stars%20ApiType%20Internal)
*   [http://code.google.com/p/gmaps-api-issues/issues/detail?id=2835](http://code.google.com/p/gmaps-api-issues/issues/detail?id=2835)
*   [webkit-transform 覆盖 Chrome 13 中的 z-index 排序](https://stackoverflow.com/questions/6953497/webkit-transform-overwrites-z-index-ordering-in-chrome-13)

# entity-framework - 错误来自 {"Invalid object name 'dbo.TableName'."}

> ID：12724733
> 
> 赞同：0
> 
> 时间：2012-10-04T09:56:18.370
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1

我正在使用实体框架和 MVC3，我使用了 Model First 方法...我使用*Company*作为基类，并从中继承了*潜在客户*类。

当我运行应用程序时，它给出了一个错误......

这是基类

```
using System;
using System.Collections.Generic;

    namespace CRMEntities
    {
        public partial class Company
        {
            public int Id { get; set; }
        }

    } 
```

这是领导班（儿童）

```
using System;
using System.Collections.Generic;

namespace CRMEntities
{
    public partial class Lead : Company
    {
        public Lead()
        {
            this.Status = 1;
            this.IsQualified = false;

        }

        public Nullable<short> Status { get; set; }
        public Nullable<bool> IsQualified { get; set; }

    }

} 
```

我添加了控制器，并在索引视图中添加了此代码...

```
public class Default1Controller : Controller
    {
        private CRMWebContainer db = new CRMWebContainer();

        //
        // GET: /Default1/

        public ViewResult Index()
        {

            return View(db.Companies.OfType<Lead>().ToList());
         } 
    } 
```

这是数据库和模型...

![在此处输入图像描述](../Images/01509c2edce9fcc5ec9baca5b6baf3e0.png)

它给出了内部错误-

> {“执行命令定义时发生错误。有关详细信息，请参阅内部异常。”} {“无效的对象名称'dbo.Companies'。”}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:57:20.070

您的数据库中是否有 Companies 表或 Company 表。看起来您遇到了映射问题。Entity Framework 将对默认情况下如何将实体名称复数进行一些猜测。

# c++ - 在 C++ 中存储指向向量的指针的类

> ID：12724735
> 
> 赞同：0
> 
> 时间：2012-10-04T09:56:25.110
> 
> 标签：c++, pointers, vector, operator-keyword

我正在实现一个类 Aviary，它可以存储指向鸟对象的指针。现在，我有以下内容：

```
class Aviary {

public:
    const Bird &operator[](const size_t index) const {
    return birds[index];
    }

    Bird &operator[](const size_t index) {
    return birds[index];
    }

private:
    std::vector<Bird*> birds; 
```

为了避免对象切片，Bird 对象被存储为指针。但是，操作符 [] 的实现存在问题（对类型“const Bird”的引用无法绑定到“const value_type”（又名“Bird *const”）的左值）。

如何正确实现 operator[]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:15:08.080

两个旁注：

1.  值传递的`const`in a 参数 ( `const size_t index`) 是无用的，您的编译器将忽略它。您可以尝试在实现中声明它`const`并删除它`const`：编译器将正确地认为您的实现与声明匹配。
2.  实现非`const`版本的规范方法`operator[]`如下：

如下

```
Bird &operator[](size_t index) {
  return const_cast<Bird&>(const_cast<const Aviary*>(this)->operator[](index));
} 
```

我知道所有这些`const_cast`看起来都很丑，但它们都是安全的，这是确保两个版本都`operator[]`做同样事情的正确方法（你只需`const`要从现在开始维护版本），同时还要确保你没有做任何事情版本中不可`const`操作`const`。

除此之外，您的代码的问题在于您返回的是指针，而不是（引用）它们所指向的值，正如 Luchian 和 ForEveR 已经指出的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:58:03.800

由于您存储指针，因此您应该`dereference`将指针用于返回引用。

```
const Bird &operator[](const size_t index) const {
return *birds[index];
}

Bird &operator[](const size_t index) {
return *birds[index];
} 
```

旁注：使用智能指针，而不是原始指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:58:03.490

您需要取消引用：

```
return *(birds[index]); 
```

`birds[index]`是 a `Bird*`，所以你不能直接把它作为 a 返回`Bird&`。

# java - 关于查询专辑的 Genres.Members.EXTERNAL_CONTENT_URI

> ID：12724736
> 
> 赞同：1
> 
> 时间：2012-10-04T09:56:29.137
> 
> 标签：java, android, mediastore

我有兴趣对特定类型的所有专辑执行查询。Android 使用 可以轻松地对来自特定艺术家的专辑执行类似的查询`MediaStore.Audio.Artists.Albums.getContentUri`，但就查询流派而言，`MediaStore.Audio.Genres.Members.getContentUri`这是提供的最佳方式，但这用于从流派中返回歌曲。

在执行查询后，您可以轻松地返回每个流派成员的专辑名称，`Genres.Members`然后使用`MediaStore.Audio.Genres.Members.ALBUM`, 返回专辑名称，但同样只有在显示歌曲时才有用。

是否可以进行某种选择以仅返回某个流派的专辑，或者`Uri`我可以使用的特殊专辑？我还没有找到任何关于此的文档，所以如果有人有任何信息，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T10:43:51.417

这个给你：

```
 {
        int genreId = 2; // << Set Your Genre ID Here
        Uri uri = MediaStore.Audio.Albums.getContentUri("external");
        Log.i("XXX", "uri = " + uri.toString());
        Cursor cursor = null;
        try {

            String selection = "album_info._id IN "
                    + "(SELECT (audio_meta.album_id) album_id FROM audio_meta, audio_genres_map "
                    + "WHERE audio_genres_map.audio_id=audio_meta._id AND audio_genres_map.genre_id=?)";
            String[] selectionArgs = new String[] { String.valueOf(genreId) };
            String[] proj = { AlbumColumns.ALBUM };
            cursor = getContentResolver().query(uri, proj, selection,
                    selectionArgs, null);
            if (null != cursor) {
                Log.i("XXX", "cursor rows count = " + cursor.getCount());
                while (cursor.moveToNext()) {
                    Log.i("XXX", "  Album: " + cursor.getString(0));
                }
                cursor.close();
                Log.i("XXX", "cursor closed");
            }
        } catch (Exception ex) {
            Log.e("XXX", "Error Querying Database");
        } finally {
            if (cursor != null) {
                cursor.close();
            }
        }
    } 
```

*修复了编辑*
查询以获取具有指定流派 ID 的所有专辑

# jquery - 制作自动完成文本框/输入区域

> ID：12724741
> 
> 赞同：-1
> 
> 时间：2012-10-04T09:56:53.933
> 
> 标签：jquery, autocomplete, jquery-autocomplete, jquery-ui-autocomplete

我正在尝试制作一个*jQuery 自动完成*输入框，以便人们可以看到预设的建议。实际上并不难，但不知何故，我似乎无法解决一个**不会显示建议**的问题。

这是一个小提琴：http: [//jsfiddle.net/tbBy6/](http://jsfiddle.net/tbBy6/)

这是我的 HTML 文件：

```
<head>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
  <script>
  $(document).ready(function() {
    $("input#search-textbox").autocomplete({
    source: ["c++", "java", "php", "coldfusion", "javascript", "asp", "ruby"]
});
  });
  </script>
</head> 
```

文本框：

```
<body>
<input id="search-textbox" class="topic-picker ui-autocomplete-input" type="text" maxlength="100" name="q" accesskey="b"  autocomplete="off" placeholder="enter text" role="textbox" aria-autocomplete="list" aria-haspopup="true"> 
```

例如，如果我输入“java”，为什么看不到建议？

**我的第二个问题：如何从数据库中获取数据？**

PS：我使用了这里的代码：http: [//docs.jquery.com/UI/API/1.8/Autocomplete](http://docs.jquery.com/UI/API/1.8/Autocomplete)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:03:23.147

如果您在 fiddle 中进行测试，您需要将左侧的框架更改为 jQuery，而不是 MooTools，并且您还需要包含 jQuery UI。

试试这个：

[**更新的小提琴**](http://jsfiddle.net/tbBy6/1/)

# asp.net - 如何通过该活动链接下的箭头标记突出显示页面中的选定链接？

> ID：12724743
> 
> 赞同：0
> 
> 时间：2012-10-04T09:57:02.193
> 
> 标签：asp.net, html, css

我的html代码是：

```
 <div id="arrow">
     <b>Filter By: </b>

    <a href="__#" onclick="GetAllTasks();" id="id_all" style="color: #88b807;">All</a> 

    <input type="text" size="3" style="display: none;" id="DateFilter" />

    <a href="__#" onclick="GetByDate(this);" style="vertical-align: middle;"   id="cal_icon">EndDate</a>

    <a href="#"__0  onclick="GetMyTasks();" id="id_myposts">My Requests</a>
    </div> 
```

我的CSS代码是：

```
a:active  {font-family: Verdana, Sans-serif;
            color:#FF0000;
            text-decoration:none;

            background: url("Images/arrow_down.png") no-repeat;
            background-position:center;
            } 
```

在这里，我希望箭头图像位于活动链接下方，以表明它处于活动状态。我已经尝试了上面的代码，但我没有得到所需的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:10:35.873

您可以使用纯 CSS 显示箭头（见下文），但您需要 javascript 来保持类“活动”。

**[演示](http://jsfiddle.net/gionaf/EBhVu/)**（点击链接）

HTML：

```
<b>Filter By: </b>
<a href="#">All</a> 
<a href="#">EndDate</a>
<a href="#">My Requests</a> 
```

CSS：

```
a  {
    position:relative;
}
a:active:after, a.active:after  {
    background: url("Images/arrow_down.png");
    width:10px; /* arrow's width */
    height:10px; /* arrow's height */
    margin-left:-5px; /* half of arrow's width */
    position:absolute;
    top:100%;
    right:50%;
    content:" ";
} 
```

jQuery：

```
$('a').on('click',function(){
    $('a').removeClass('active');
    $(this).addClass('active');
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:05:30.847

您可能必须使用一些脚本来做到这一点。为活动状态创建一个单独的类并在单击时添加该类。

```
$('a').click(function(){
    $(this).addClass("active");
});​ 
```

这是演示[http://jsfiddle.net/qvQxp/1/](http://jsfiddle.net/qvQxp/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T01:49:36.263

我尝试了 Giona 的回答，发现浏览器忽略了 margin-left 的负边距，并且箭头仍然偏离中心箭头图像宽度的一半。要解决此问题，请改为将负边距应用于 margin-right。

# r - ddply + 汇总函数列名输入

> ID：12724745
> 
> 赞同：4
> 
> 时间：2012-10-04T09:57:04.290
> 
> 标签：r, plyr

我正在尝试从包中使用`ddply`和`summarise`一起使用，`plyr`但在解析不断变化的列名时遇到困难......在我的示例中，我想要以编程方式在 X1 中解析的东西，而不是在 X1 中硬编码到 ddply 函数中。

树立榜样

```
require(xts)
require(plyr)
require(reshape2)
require(lubridate)
t <- xts(matrix(rnorm(10000),ncol=10), Sys.Date()-1000:1)
t.df <- data.frame(coredata(t))
t.df <- cbind(day=wday(index(t), label=TRUE, abbr=TRUE), t.df)
t.df.l <- melt(t.df, id.vars=c("day",colnames(t.df)[2]), measure.vars=colnames(t.df)[3:ncol(t.df)]) 
```

这是我正在努力解决的问题......

```
cor.vars <- ddply(t.df.l, c("day","variable"), summarise, cor(X1, value)) 
```

我不想使用 X1 这个词，而是想使用类似的东西

```
cor.vars <- ddply(t.df.l, c("day","variable"), summarise, cor(colnames(t.df)[2], value)) 
```

但这出现了错误：`Error in cor(colnames(t.df)[2], value) : 'x' must be numeric`

我还尝试了各种其他组合，这些组合在 cor 中解析 x 参数的向量值......但由于某种原因，它们似乎都不起作用......

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T10:11:10.343

虽然这可能不是预期的用途，`summarize`并且必须有更好的方法来解决您的问题，但您问题的直接答案是使用`get`：

```
ddply(t.df.l, c("day","variable"), summarise, cor(get(colnames(t.df)[2]), value)) 
```

编辑：例如，这是我认为更适合您的问题的一种方法：

```
ddply(t.df.l, c("day", "variable"), function(x)cor(x["X1"], x["value"])) 
```

上面，`"X1"`也可以替换`2`为变量的名称`"X1"`，等等。这取决于您希望如何以编程方式访问该列。

# iphone - 在 iphone 中设置没有 UITextviews 的位置

> ID：12724750
> 
> 赞同：3
> 
> 时间：2012-10-04T09:57:24.650
> 
> 标签：iphone, objective-c, cocoa-touch, animation, uitextview

我以编程方式在我的 UIView 上添加了一个**UITextView 。**添加的**textview**是不可编辑的，它只是为了显示一些数据。textview 中显示的数据是从数组中获取的。textview 的个数与**我**存储在**Array**中的文本相同。Textview 是从头到尾一个一个显示的。我需要先一个一个地设置 textview 的位置textview 来设置在某个位置，second 将设置为 first **textview**之前，third 将设置在 second 之前，依此类推.. **注意：使用****Animation**之类的东西。假设一个**文本视图**来自顶部，它在 Y 位置 250 处停止，然后是下一个**文本视图**将在此之前设置..它不能达到 Y 位置的 250。等等。我不知道该怎么做。请给我一些想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T10:10:35.397

不要考虑数组和`UITextView`数据..它是临时的..

```
NSMutableArray *array = [[NSMutableArray alloc]initWithObjects:@"One",@"Two",@"three",@"Four",@"Five",@"Six",@"Seven",@"Eight",@"Nine",@"Ten", nil];

for(int i=0;i<[array count];i++) {
    UITextView *textView = [[UITextView alloc]init];
    [textView setFrame:CGRectMake(20, 20*i+height, 200, height)];
    [textView setBackgroundColor:[UIColor redColor]];
    [textView setText:[array objectAtIndex:i]];
    [self.view addSubview:textView];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T10:11:52.260

您想基于数组以编程方式在视图中添加文本视图，如果您将文本视图添加到视图中，那么就会出现问题（如果您有更多的文本视图，那么您必须采用滚动视图），这就是为什么最好采用滚动视图并将滚动视图添加到您的视图之后，您将向滚动视图添加文本视图，

```
now take constant x-coordinate value ,width and height only change y-coordinate value and you must give the content size to scrollview .

for(int i=1;i<[array length];i++){
    text_desc = [[UITextView alloc] initWithFrame:CGRectMake(63,64*i,370,60)];
    text_desc.font = [UIFont fontWithName:@"Helvetica" size:13.0];
    text_desc.editable=NO;
    text_desc.tag=1;
} 
```

然后设置 srollview 内容大小，

```
scroll.contentSize = CGSizeMake(0,total*87); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T10:07:54.427

**//循环遍历数组类型的子字符串以在运行时添加文本字段**

```
for (int i = 0; i < [substrings count]; i++)
{
    CGRect frame = CGrectMake(0, i * 40, 100, 30);
    UITextField * txtDynamic = [[UITextField alloc] initWithFrame: frame];
    txtDynamic.text = [substrings objectAtIndex:i];

    //add as subview
    [view addSubview:txtDynamic];

    //if you are not using ARC release the txtDynamic
} 
```

**注意** 如果 UITextField 的数量更多，即超出屏幕，则将 UITextField 添加到 UIScrollView，您可以使其大小和内容大小动态化。

**希望这会给你一些线索。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T10:09:30.307

嘿，伙计，然后拿一个滚动视图，并在其中设置所有文本视图，`ContentSize`如下所示

这里我举个例子，

**注意：**这只是示例，这里取一个`UIScrollView`并命名为 scrview，然后在其中添加所有这些`UITextField`。

在文本字段中添加数据后添加此代码

```
 txt1.frame = CGRectMake(txt1.frame.origin.x,    txt1.frame.origin.y, txt1.frame.size.width, txt1.contentSize.height); 

float txtscreen1 = txt1.frame.origin.y + txt1.contentSize.height + 10;

txt2.frame = CGRectMake(txt2.frame.origin.x, txtscreen1, txt2.frame.size.width, txt2.contentSize.height);

float txtscreen2 = txt2.frame.origin.y + txt2.contentSize.height + 10;

txt3.frame = CGRectMake(txt3.frame.origin.x, txtscreen2, txt3.frame.size.width, txt3.contentSize.height);

//.....and so on to 10

float txtscreen10 = txt3.frame.origin.y + txt3.contentSize.height + 10;

txt10.frame = CGRectMake(txt10.frame.origin.x, txtscreen10, txt10.frame.size.width, txt10.contentSize.height);

float scrollviewscreen = txtscreen10.frame.origin.y + txtscreen10.frame.size.height + 20;
scrview.contentSize=CGSizeMake(320, scrollviewscreen);//take scrollview 
```

我希望这对你有帮助....

:)

# matlab - 四面体面的大型、大部分为空的数据结构

> ID：12724751
> 
> 赞同：4
> 
> 时间：2012-10-04T09:57:27.340
> 
> 标签：matlab, data-structures, tetrahedra

我正在尝试将四面体中每个面的节点 ID 与其对应的四面体 ID 链接起来。

```
tetras = [1 2 3 4  % Tetra 1
          5 6 7 8] % Tetra 2 
```

对于 tetra 1，有四个面：

```
faces = [1 2 3; 1 2 4; 1 3 4; 2 3 4] % Notice these are sorted 
```

然后我想将这些存储在数据结构中：

```
tet_for_face = cell(8,8,8) % 8 allows for the maximum node id

tet_for_face{1,2,3} = 1;
tet_for_face{1,2,4} = 1;
tet_for_face{1,3,4} = 1;
tet_for_face{2,3,4} = 1; 
```

这意味着我可以在**O(1)**中找到任何特定面的 tetra ID ：

```
tet_for_face{2,3,3}
ans = []
tet_for_face{2,3,4}
ans = 1 
```

这种方法的问题是它需要连续的内存。随着我的网格变大，我的内存不足：

```
cell(1000, 1000, 1000)
??? Error using ==> cell
Out of memory. Type HELP MEMORY for your options. 
```

我也玩过使用嵌套单元格：

```
tet = cell(num_nodes, 1);
tet2 = cellfun(@(x) cell(num_nodes, 1), tet, 'UniformOutput', 0);
tet3 = cellfun(@(x) cellfun(@(y) cell(num_nodes, 1), x, 'UniformOutput', 0), tet2, 'UniformOutput', 0);

tet3{2}{3}{4} = 1;
... 
```

虽然这适用于小网格，并且不需要连续内存（AFAIK），但它有一个令人讨厌的习惯，即在 N=1000 时使 MATLAB 崩溃。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:24:41.783

在玩了一些稀疏数组（只能是 1D 或 2D，而不是 3D）之后，我决定使用containers.Map（HashMap）。

我使用了字符串键，我发现生成它们的最快方法是使用 sprintf（而不是 int2str 或 mat2str）

示例代码：

```
tet = containers.Map;
for tetra_id in tetras 
    for face in faces
        face_key = sprintf('%d ', face);
        tet(face_key) = tetra_id; 
```

这给了我一张这样的地图：

```
tet('1 2 3') = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T10:23:03.733

您可以使用稀疏矩阵来处理网格产生的许多问题。这取决于您在实践中要使用此数据结构做什么，但这里有一个示例：

```
% tetras and faces are transposed - column-wise storage
tetras = [1 2 3 4; 5 6 7 8]';
faces = [1 2 3; 1 2 4; 1 3 4; 2 3 4]';

ntetras    = size(tetras, 2);
nfaces     = size(faces, 2);
nfacenodes = size(faces, 1);

% construct face definitions for all tetras
tetras_faces = reshape(tetras(faces, :), nfacenodes, ntetras*nfaces);

% assign the faces to tetras keeping the face id within the tetra, if you need it
enum_faces  = repmat(1:ntetras*nfaces, nfacenodes, 1);

% create a sparse matrix connecting tetra faces to tetras.
% Every column contains 3 non-zeros - 1 for every node in a face
% The number of matrix columns is ntetras*nfaces - 4 columns for every element.
A = sparse(tetras_faces, enum_faces, 1); 
```

现在要提取您需要的信息，您可以将 A 乘以包含您要查找的面部信息的向量：

```
v = sparse(ntetras*nfaces, 1);
v([1 2 3]) = 1;
tetra_id = ceil(find(A*v==nfacenodes)/nfaces) 
```

请注意，这只是一个示例。您可以通过这种方式提取更多有用的信息，并且可以使用矩阵-矩阵乘法而不是矩阵-向量乘法来执行更复杂的搜索。

# javascript - 获取 html 标签的大小

> ID：12724753
> 
> 赞同：2
> 
> 时间：2012-10-04T09:57:39.857
> 
> 标签：javascript, html, css

当我在 Chrome 中使用开发工具的链接时，我可以选择任何标签（在源代码中）并显示有关所选元素的信息（下图）。我需要编写可以执行相同操作的脚本。如何获取源代码中每个标签的宽度和高度。任何想法？ ![在此处输入图像描述](../Images/5bc63f1c0b691caae9f5eaeb160ad159.png).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T10:01:26.883

你知道[jQuery](http://jquery.com/)吗？使用此库，您可以检索：

```
$('#element').innerWidth(); ---> width of #element's content + padding
$('#element').width(); ---> width of #element including padding and borders
$('#element').outerWidth(); ---> width of #element + padding + borders + margins 
```

身高相同的东西：

```
$('#element').innerHeight(); ---> height of #element's content + padding
$('#element').height(); ---> height of #element including padding and borders
$('#element').outerHeight(); ---> height of #element + padding + borders + margins 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T09:59:13.727

有这个可爱的[getBoundingClientRect](https://developer.mozilla.org/en-US/docs/DOM/element.getBoundingClientRect)函数。不需要 jQuery。适用于所有浏览器。

```
var rect = document.getElementById('foobar').getBoundingClientRect();

console.log(rect.width);
console.log(rect.height);
console.log(rect.left);
console.log(rect.right);
console.log(rect.top);
console.log(rect.bottom); 
```

# objective-c - CGContextEOFillPath + CGContextDrawLinearGradient

> ID：12724754
> 
> 赞同：0
> 
> 时间：2012-10-04T09:57:42.227
> 
> 标签：objective-c, ios, quartz-2d

我已经使用CGContextEOFillPath成功地绘制了一个在圆角矩形形状内部有一个孔的矩形。我可以改变我的形状的颜色。但是，我想使用渐变，我想我必须使用 CGContextDrawLinearGradient，但是，我不能让它工作。它继续绘制整个矩形，包括孔。

这是我正在使用的代码

```
- (void)drawRect:(CGRect)rect 
{
[super drawRect:rect];

CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSaveGState(context);
CGFloat frameWidth = 1; //[CQMFloatingContentOverlayView frameWidth];

CGFloat radius = [self cornerRadius];
CGSize viewSize = [self frame].size;
CGPathRef path = CQMPathCreateRoundingRect(CGRectMake(frameWidth, frameWidth,
                                                      viewSize.width - frameWidth * 2,
                                                      viewSize.height - frameWidth * 2),
                                 radius, radius, radius, radius);
CGContextAddRect(context, CGRectMake(0, 0, viewSize.width, viewSize.height));
CGContextAddPath(context, path);
    CGContextEOFillPath(context);
CGPathRelease(path);
CGContextRestoreGState(context);
}

CGPathRef CQMPathCreateRoundingRect(CGRect rect, CGFloat blRadius, CGFloat brRadius, CGFloat trRadius, CGFloat tlRadius) {
CGPoint tlPoint = rect.origin;
CGPoint brPoint = CGPointMake(rect.origin.x + rect.size.width,
                              rect.origin.y + rect.size.height);
CGMutablePathRef path = CGPathCreateMutable();

CGPathMoveToPoint(path, NULL, tlPoint.x + tlRadius, tlPoint.y);
CGPathAddArcToPoint(path, NULL,
                    brPoint.x, tlPoint.y,
                    brPoint.x, tlPoint.y + trRadius,
                    trRadius);
CGPathAddArcToPoint(path, NULL,
                    brPoint.x, brPoint.y,
                    brPoint.x - brRadius, brPoint.y,
                    brRadius);
CGPathAddArcToPoint(path, NULL,
                    tlPoint.x, brPoint.y,
                    tlPoint.x, brPoint.y - blRadius,
                    blRadius);
CGPathAddArcToPoint(path, NULL,
                    tlPoint.x, tlPoint.y,
                    tlPoint.x + tlRadius, tlPoint.y,
                    tlRadius);
CGPathCloseSubpath(path);

return path;
} 
```

我不知道在哪里放置渐变代码，我在 CGContextEOFillPath 之前和之后都尝试过，但无法达到我的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:30:20.310

这段代码应该是你想要的（检查语法和拼写错误，代码直接写在答案中）

```
- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    CGFloat gradientColors[] =
    {        
        0.1, 0.1, 0.5, 1.00,
        0.9, 0.9, 1.0, 1.00,
    };

    CGGradientRef gradient = CGGradientCreateWithColorComponents(colorSpace, gradientColors, NULL, sizeof(gradientColors)/(sizeof(gradientColors[0])*4));

    CGColorSpaceRelease(colorSpace);

    CGContextSaveGState(context);
    CGFloat frameWidth = 1; //[CQMFloatingContentOverlayView frameWidth];

    CGFloat radius = [self cornerRadius];
    CGSize viewSize = [self frame].size;
    CGPathRef path = CQMPathCreateRoundingRect(CGRectMake(frameWidth, frameWidth,
                                                      viewSize.width - frameWidth * 2,
                                                      viewSize.height - frameWidth * 2),
                                     radius, radius, radius, radius);
    CGContextAddRect(context, CGRectMake(0, 0, viewSize.width, viewSize.height));
    CGContextAddPath(context, path);
    CGContextEOClip(context);

    CGContextDrawLinearGradient(context, gradient, CGPointMake(0, 0),           CGPointMake(viewSize.width, viewSize.height), kCGGradientDrawsBeforeStartLocation);

CGPathRelease(path);
    CGContextRestoreGState(context);
} 
```

# java - 部署为战争时 JSF Bean 不可访问

> ID：12724755
> 
> 赞同：1
> 
> 时间：2012-10-04T09:57:43.567
> 
> 标签：java, spring, jsf, javabeans, war

我遇到了一个奇怪的问题。我目前正在开发一个具有以下配置的项目：

*   数据服务的 Spring 框架
*   JSF 和 Vaadin 作为 web 框架（2 个单独的子上下文）
*   Tomcat 7 作为应用程序容器
*   Spring EL 解析器

当我将此应用程序部署到我的 Tomcat 服务器时，一切正常。当我使用 maven 将应用程序构建为 war 文件并将此 war 文件部署到我的 Tomcat（同一个 tomcat！）上时，Vaadin 前端工作正常，但在 JSF 中，所有带有来自 beans 的值的标签都保持为空。仅包含纯文本的标签会被正确处理。

我最大的问题是，我没有得到任何例外。我也有点困惑，我也没有得到异常，当我尝试在我的 eclipse 部署环境中访问不存在的 bean 时，没有发生错误，只是没有产生输出。我将所有日志级别提高到最大，但在日志中一切似乎都很好。

那么，有没有人知道如何让 JSF 显示错误、何时无法访问 bean 以及为什么我直接从 eclipse 或从 war 文件部署时会有所不同？

提前致谢！

恩克拉森

# java - 日期格式图片在转换整个输入字符串之前结束

> ID：12724756
> 
> 赞同：0
> 
> 时间：2012-10-04T09:57:53.660
> 
> 标签：java, oracle, date, time

> **可能重复：**
> [ORA-01830：日期格式图片在转换整个输入字符串之前结束](https://stackoverflow.com/questions/595072/ora-01830-date-format-picture-ends-before-converting-entire-input-string)

我通过以下方式获取系统当前日期和时间：

```
String months[] = {"Jan", "Feb", "Mar", "Apr","May", "Jun", "Jul", "Aug","Sep", "Oct",     "Nov", "Dec"};
Calendar cal = new GregorianCalendar();
String month = (months[cal.get(Calendar.MONTH)]);
int year = cal.get(Calendar.YEAR);
int day = cal.get(Calendar.DAY_OF_MONTH);

int second = cal.get(Calendar.SECOND);
int minute = cal.get(Calendar.MINUTE);
int hour = cal.get(Calendar.HOUR);

String date= day+"/"+month+"/"+year;
String time=hour+":"+minute+":"+second;

ps.setString(14, date+" "+time); 
```

但是，现在当我尝试使用上述准备好的语句在表中插入日期和时间时。

出现以下错误：

> 日期格式图片在转换整个输入字符串之前结束

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:11:18.770

1.  如果您的列具有存储日期和时间的类型，请尝试传递给您的 PreparedStatement Date 而不是 String
2.  如果您只想保存创建或更新时间戳，则使用触发器或默认列值使用 DB 更容易且不易出错
3.  对于将日期格式化为字符串，最好使用 SimpleDateFormat 或类似的。
4.  如果您想传递字符串以供 Oracle 解析，您应该关心 Oracle 和您的应用程序中的语言环境设置，或者您可以修改您的脚本以包含格式：例如使用类似于`to_date(:paramString, 'YOUR_DATE_FORMAT')`

# objective-c - 根视图控制器内置在代码中 - 不会为 iPad 调整大小

> ID：12724758
> 
> 赞同：0
> 
> 时间：2012-10-04T09:58:01.753
> 
> 标签：objective-c, ios, xcode, resize

我试图将我的 iphone 应用程序转换为 ipad，直到我的根视图控制器都很好。它是内置在代码中的，无论我做什么，我都无法调整它的大小/居中。我的主页没有笔尖。Autoresize 蒙版没有任何作用，尽管尽了最大努力，添加 iPad 笔尖也没有任何作用，但会继续在左上角显示 iphone 屏幕，并使用`if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)` 加载一个空白的黑色 iPad 屏幕。我现在真的不知道该怎么办。如果我将我的屏幕元素设置`initWithFrame:[[UIScreen mainScreen] bounds]];`为艺术品，则会因过度拉伸而变形。

```
// Create the main view
UIView *mainView = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
mainView.backgroundColor = [UIColor blackColor];

 if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {

 UIImageView *textureBg = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 768.0f, 1024.0f)];
 textureBg.image = [UIImage imageNamed:@"BgTexture"];
 [textureBg addSubview:textureBg];
}
 else {

// Add textured background
UIImageView *textureBg = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320.0f, 1024.0f)];
textureBg.image = [UIImage imageNamed:@"BgTexture"];
[textureBg addSubview:textureBg];

 }

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {    

 UIImageView *clipBg = [[UIImageView alloc] initWithFrame:CGRectMake(7.0f, 6.0f, 605.0f, 865.0f )];
 clipBg.image = [UIImage imageNamed:@"BgHomeNew2"];
 clipBg.userInteractionEnabled = YES;

 }
 else {
// Add clipboard background
UIImageView *clipBg = [[UIImageView alloc] initWithFrame:CGRectMake(7.0f, 6.0f, 305.0f, 465.0f )];
clipBg.image = [UIImage imageNamed:@"BgHomeNew2"];
clipBg.userInteractionEnabled = YES;
//[clipBg setAutoresizingMask:(UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleRightMargin|UIViewAutoresizingFlexibleTopMargin )];

   if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) { 

// Add about button to clipbg
UIButton *aboutButton = [UIButton buttonWithType:UIButtonTypeCustom];
aboutButton.frame = CGRectMake(240.0f, 90.0f, 31.0f, 33.0f);

[aboutButton setImage:[UIImage imageNamed:@"LabelButton"] forState:UIControlStateNormal];
[aboutButton addTarget:self action:@selector(aboutButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
[aboutButton addSubview:aboutButton];

}
else {
// Add about button to clipbg
UIButton *aboutButton = [UIButton buttonWithType:UIButtonTypeCustom];
aboutButton.frame = CGRectMake(240.0f, 90.0f, 31.0f, 33.0f);

[aboutButton setImage:[UIImage imageNamed:@"LabelButton"] forState:UIControlStateNormal];
[aboutButton addTarget:self action:@selector(aboutButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
[aboutButton addSubview:aboutButton];
} 
```

如何为通用应用程序制作 ipad 视图，其中根视图控制器内置在代码中？我什至愿意将 iphone 屏幕简单地居中于 ipad 屏幕的中间，但由于自动调整不起作用，它只是卡在了左上角。这将是 2 分钟的 IB！

总结一下为什么下面的代码不会将图像移动到 iPad 屏幕的中心？

```
 UIImageView *clipBg = [[UIImageView alloc] initWithFrame:CGRectMake(7.0f, 6.0f, 305.0f, 465.0f )];  
clipBg.image = [UIImage imageNamed:@"BgHomeNew2"];
clipBg.userInteractionEnabled = YES;
[clipBg setAutoresizingMask:(UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin)]; 
```

编辑真的不知道我在这里错过了什么，现在已经一整天了，似乎无法在内置代码的 iphone 屏幕上追溯添加一个 xib，所以当使用 ipad 时，我会满足于在屏幕中间居中对象而不是而不是一直卡在左上角。那剂量也有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:17:45.923

好的排序

我终于想现在添加 xibs，所以我可以根据需要进行调整，我之前无法初始化 xibs，因为我在 rootview 控制器中错过了这行代码

```
- (id)init
{

[[NSBundle mainBundle] loadNibNamed:@"ICHomeController" owner:self options:nil]; 
```

# image - imagesc图中的阴影区域

> ID：12724762
> 
> 赞同：1
> 
> 时间：2012-10-04T09:58:05.720
> 
> 标签：image, matlab, matlab-figure

是否可以用图像遮蔽图形中的区域？

我有一个数据系列，我正在使用某个函数进行分析，该函数会生成结果的图像。导入函数的原始数据包含一些缺失值，这些缺失值是从以前的值中插入的，因此不准确。我想知道是否有一种方法可以在当前打开的图像（在我的情况下为插值）图形的某些部分上放置阴影区域。

希望这是有道理的，请问我是否不清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T10:29:23.017

你可以画一个透明的补丁：

```
im = imread('peppers.png');
figure;imshow(im);
hold on;
patch([10 10 200 200],[10 200 200 10],[0 0 0],'FaceAlpha',0.5); 
```

补丁可以是任何多边形。透明度由`FaceAlpha`属性设置

![在此处输入图像描述](../Images/71ac0fe420d135170916704894d82f2d.png)

# java - NMEA校验和计算

> ID：12724764
> 
> 赞同：8
> 
> 时间：2012-10-04T09:58:12.590
> 
> 标签：java, gps, checksum, nmea

我在计算 NMEA 句子的校验和时遇到问题。我正在使用以下java代码：

```
private static String getSum(String in) {
    int checksum = 0;
    if (in.startsWith("$")) {
        in = in.substring(1, in.length());
    }

    int end = in.indexOf('*');
    if (end == -1)
        end = in.length();
    for (int i = 0; i < end; i++) {
        checksum = checksum ^ in.charAt(i);
    }
    String hex = Integer.toHexString(checksum);
    if (hex.length() == 1)
        hex = "0" + hex;
    return hex.toUpperCase();
} 
```

这段代码类似于互联网上的许多其他示例，在我尝试这样的句子之前一切正常。

`$PSRF101,-2686700,-4304200,3851624,96000,497260,921,12,3*1C`

这句话来自[NMEA 参考手册](http://www.sparkfun.com/datasheets/GPS/NMEA%20Reference%20Manual-Rev2.1-Dec07.pdf)，所以我假设校验和是正确的。但是当我计算它时，我得到 *2F 作为校验和，而不是 1C。

我认为这是因为句子中的负值，但我不知道如何处理它们。有人有建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T10:33:31.803

假设和计算的校验和的差等于省略（或有一个额外的字符'3'）；所以我很想相信 NMEA 参考手册中的错误。

您可以尝试一些在线 NMEA 计算器来验证结果。
例如[http://www.hhhh.org/wiml/proj/nmeaxor.html](http://www.hhhh.org/wiml/proj/nmeaxor.html)

# php - JavaScript 函数不适用于换行符 / br

> ID：12724765
> 
> 赞同：-3
> 
> 时间：2012-10-04T09:58:16.767
> 
> 标签：php, javascript

我正在尝试从数据库中获取一些文本并使用 Javascript 显示它。

**这是我的代码：**

```
while ($row = mysql_fetch_array($result)) {

    $content = nl2br($row['content']);
    echo "<a id=\"details\" onclick=\"show_details('{$content}');\"></a>";
    echo "<script type=\"text/javascript\" charset=\"utf-8\">";
    echo "function show_details(id, title, content) {
        alert(content);
    }";
    echo "</script>"; 
```

文本类型是`utf8_general_ci`，当它包含新行时，Javascript 不起作用！

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:05:59.433

定义一次函数，并遵守参数。您刚刚定义了 id，而不是 content。内容是第三个参数，而不是第一个。

```
echo "<script type=\"text/javascript\" charset=\"utf-8\">"; 
echo "function show_details(id, title, content) { 
  alert(content); 
}"; 
echo "</script>"; 
while ($row = mysql_fetch_array($result)) { 

  $content = nl2br($row['content']); 
  echo "<a id=\"details\" onclick=\"show_details('id', 'title', '$content');\"></a>"; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:07:30.737

如果文本包含输入，它将像这样呈现 javascript：

```
show_details('piece of
content'); 
```

这是无效的。

将输入替换为 \n：

```
while ($row = mysql_fetch_array($result)) 
{
    $content = $row['content'];
    $content = strreplace("\n", "\\n", $content); // 'escape' breaks.
    $content = strreplace("'", "\\'", $content); // escape quotes.

    ?> 
    <a id="details" onclick="show_details('<?=$content?>');"></a>";
    <?
}
?>
<script type="text/javascript" charset="utf-8">";
function show_details(content) {
    alert(content);
}
</script>; 
```

如您所见，我将 show_details 的声明移出循环，您只需要它一次。我还删除了回声。您将失去任何 HTML 语法突出显示，并且需要所有转义。我认为这种方法更清洁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T10:10:58.560

我认为您最好将 JavaScript 和 PHP 分开。

因此，在您的 PHP 文件（或 HTML 模板）中，设置您的脚本：

```
<script type="text/javascript" charset="utf-8">
    function show_details(id, title, content) {
        alert(content);
    }
</script> 
```

**我注意到的其他事情：**为什么你的`show_details`函数有三个参数（`id`, `title`, `content`）但你下面的初始化函数只有`content`？**尝试删除`id`和`title`暂时，看看你是否可以开始`content`工作。**

那么你的 PHP 可能只是：

```
while ($row = mysql_fetch_array($result)) {
    $content = nl2br($row['content']);
    echo '<a id="details" onclick="show_details(\'' . $content . '\');"></a>';
} 
```

现在，就导致问题的新线路而言，您是否尝试过这样的事情？

JavaScript 添加：

```
function escapeHtml(unsafe) {
  return unsafe
      .replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;")
      .replace(/"/g, "&quot;")
      .replace(/'/g, "&#039;");
} 
```

PHP：

```
while ($row = mysql_fetch_array($result)) {
    $content = nl2br($row['content']);
    echo '<a id="details" onclick="show_details(escapeHtml(\'' . $content .'\'));"></a>';
} 
```

**或者**，正如本文评论所建议的那样，您可以尝试使用`htmlentities`或`htmlspecialchars`在您的 PHP 上使用，`$content`例如：

```
while ($row = mysql_fetch_array($result)) {
    $content = htmlentities( nl2br( $row['content']) );
    echo '<a id="details" onclick="show_details(escapeHtml(\'' . $content .'\'));"></a>';
} 
```

我不相信这是一个编码问题，但我肯定是错的...... :)

# android - AOSCompiler 出错 - CM10 - Galaxy Nexus/maguro

> ID：12724766
> 
> 赞同：0
> 
> 时间：2012-10-04T09:58:18.043
> 
> 标签：android, ubuntu, compiler-errors, adb, android-source

我试图用 AOSCompiler 编译 CM10（使用 ubuntu）。我有两个问题：

1.它说我找不到我的设备：

```
elichai@elichai-MT6840:~/.aoscompiler/build$ . build/envsetup.sh
including device/generic/armv7-a-neon/vendorsetup.sh
including device/generic/armv7-a/vendorsetup.sh
including device/ti/panda/vendorsetup.sh
including vendor/cm/vendorsetup.sh
including sdk/bash_completion/adb.bash
elichai@elichai-MT6840:~/.aoscompiler/build$ lunch cm_maguro-userdebug
build/core/product_config.mk:189: *** _nic.PRODUCTS.[[device/*/maguro/cm.mk]]:    "device/samsung/tuna/device.mk" does not exist.  Stop.
Device maguro not found. Attempting to retrieve device repository from CyanogenMod    Github (http://github.com/CyanogenMod).
Found repository: android_device_samsung_maguro
CyanogenMod/android_device_samsung_maguro already exists
Syncing repository to retrieve project.
Fetching projects: 100% (1/1), done.  

Repository synced!
Looking for dependencies
Done
build/core/product_config.mk:189: *** _nic.PRODUCTS.[[device/*/maguro/cm.mk]]:   "device/samsung/tuna/device.mk" does not exist.  Stop.

** Don't have a product spec for: 'cm_maguro'
** Do you have the right repo manifest? 
```

我试图只做“午餐”并从列表中选择我的设备，它给了我同样的错误。我尝试使用“早餐”，它也给了我同样的错误。

2.AOSCCompiler 说：

> Adb 没有运行需要 adb 来设置供应商文件。
> 
> 这是你要自己做的事情吗？
> 
> 请再试一次。

即使我在文件'/etc/bash.bashrc 中添加了这一行：

> 导出 PATH=${PATH}:/home/elichai/Downloads/SDK/tools:/home/elichai/Downloads/SDK/platform-tools

（这是我的 SDK 位置）现在我可以使用“adb”而无需进入 SDK 文件夹。但它仍然无法正常工作（AOSCompiler）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T22:24:24.247

抱歉，我知道它已经过时了，但是，`export PATH=${PATH}:/home/elichai/Downloads/SDK/tools:/home/elichai/Downloads/SDK/platform-tools`您应该删除 {}s `export PATH=$PATH:/home/elichai/Downloads/SDK/tools:/home/elichai/Downloads/SDK/platform-tools` 这就是我所做的。我在 Ubuntu 10.04

此外，假设您在 shell 中使用 bach，您可以将路径添加到您的 .bashrc。

如果我错了，我相信有人会纠正我。

# php - Symfony 2.1 app.session.flashbag.get('something') 返回空值

> ID：12724771
> 
> 赞同：1
> 
> 时间：2012-10-04T09:58:23.880
> 
> 标签：php, session, symfony

我在使用`app.session.flashbag.get('notice')`.

在我制作的控制器中

```
public function updateAction(Request $request, $id)
{
    $em = $this->getDoctrine()->getManager();

    $entity = $em->getRepository('SomeBundle:SomeEntity')->find($id);

    $editForm = $this->createForm(new SomeEntityType(), $entity);
    $editForm->bind($request);

    if ($editForm->isValid()) {
        $em->persist($entity);
        $em->flush();

        $flash = $this->get('translator')->trans('Some Entity was successfully updated');
        $this->get('session')->getFlashBag()->add('notice', $flash);

        return $this->redirect($this->generateUrl('some_entity_edit', array('id' => $id)));

    } 
```

在 editAction 中，我从会话中获取信息：

```
public function editAction($id)
{
    $em = $this->getDoctrine()->getManager();

    $flashes = $this->get('session')->getFlashBag()->get('notice', array());

    //...
    //...

    return array(
        'entity'      => $entity,
        'edit_form'   => $editForm->createView(),
        'flashes' => $flashes
    );
} 
```

我正在尝试在 TWIG 中从会话中获取信息：

```
TWIG: {% for flashMessage in app.session.flashbag.get('notice') %}{{ flashMessage }}{% endfor %}

PHP: {% for flashMessage2 in flashes %}{{ flashMessage2 }}{% endfor %} 
```

app.session.flashbag.get('notice') 是空的，flash 有一个值。

您有什么想法，为什么我无法从 app.session.flashbag.get('notice') 获取数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T17:31:08.137

它的正常行为。您首先访问控制器中的闪存，然后将其返回并取消设置。当您再次访问它时，闪存包中不存在密钥，这种方式是空的。

在 github 上查看[FlashBag::get](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Session/Flash/FlashBag.php#L95)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T08:21:05.707

使用[FlashAlertBundle](https://github.com/rasanga/FlashAlertBundle)可以轻松处理（添加/显示）**Symfony flash 消息**，它是使用纯 JavaScript 实现的独立 Symfony2 包，因此您不必担心使用 JS 库。

您只需要以下代码即可在 twig 模板上呈现 flash 消息：

```
{{ render_flash_alerts() }} 
```

**可通过**
[https://github.com/rasanga/FlashAlertBundle](https://github.com/rasanga/FlashAlertBundle)
[https://packagist.org/packages/ras/flash-alert-bundle](https://packagist.org/packages/ras/flash-alert-bundle)

# matlab - 图像处理：使用边界条件最小化拉普拉斯范数

> ID：12724776
> 
> 赞同：-2
> 
> 时间：2012-10-04T09:58:43.517
> 
> 标签：matlab, optimization

我试图最小化这个功能（通过A）：

argmin_A (||L(A)||^2 + a||AB||^2*)

在哪里：

*   A 是 MxN 图像 L 是拉普拉斯算子
*   ||。|| 是通常的规范 (Frobrenius)
*   a 是权重参数
*   B 是大小为 (M+2*k)xN 的矩阵，其中 k 是整数参数。
*   (*) 表示**我们只考虑边界中的像素**（我们希望在 A 中保留 B 边界中的像素）。

也许这个问题有一个微不足道的解决方案，但我完全被阻止了。

如果您需要更多详细信息，请参阅[本文](http://www.cse.cuhk.edu.hk/~leojia/papers/deconvolution_boundary_iccp08.pdf)中的 (4) 等式。

我将非常感谢提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:20:14.667

如果不仔细看那篇论文，[gridfit](http://www.mathworks.com/matlabcentral/fileexchange/8998-surface-fitting-using-gridfit)基本上就是这样做的，尽管它没有使用您要求的边界条件。但是，您当然可以写出您想要的内容，或者您​​可以简单地对边界点施加权重。这不是一个难题，但为了有效地解决它，您需要使用 MATLAB 的稀疏矩阵功能。

# android - 使用 Sqlite DB 时获取 CursorIndexOutOfBoundsException

> ID：12724777
> 
> 赞同：0
> 
> 时间：2012-10-04T09:58:43.350
> 
> 标签：android, sqlite

我正在使用此代码从光标中获取计数。在 SQLite 管理器中执行 Select 查询时，我的计数为 6。

```
public int getCount(String name){           
        Cursor cursor;
        cursor = myDataBase.rawQuery(
                "select count(*) as _count from tProviderNode where parentId IN(select identifier from tProviderNode where name='"
                        + name + "');", null);
        return cursor.getInt(cursor.getColumnIndex("_count"));
    } 
```

在执行此功能时，我收到以下错误：-

```
android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1 
```

为什么我会收到此错误？我有什么遗漏吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T10:00:49.903

`cursor.moveToFirst()`在使用之前调用`Cursor`：

```
// ...
cursor.moveToFirst();
return cursor.getInt(cursor.getColumnIndex("_count")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:03:25.393

调用 cursor.moveToFirst() 来解决这个问题。

# mp3 - 如何限制上传除mp3文件以外的其他文件

> ID：12724781
> 
> 赞同：1
> 
> 时间：2012-10-04T09:58:56.293
> 
> 标签：mp3

我只想在我的项目中上传 mp3 文件，但是当我将 docs 文件的扩展名更改为 mp3 时，它也很容易上传。我能得到任何限制上传此类文件的代码吗？

# c# - 检测 IIS 网站被挂起

> ID：12724783
> 
> 赞同：0
> 
> 时间：2012-10-04T09:58:58.160
> 
> 标签：c#, iis, web, detection, suspend

我目前能够使用以下代码检测 IIS 网站是否已启动/暂停/停止：

```
public int GetWebsiteStatus(string machineName, int websiteId)
{
    DirectoryEntry root = new DirectoryEntry(
        String.Format("IIS://{0}/W3SVC/{1}", machineName, websiteId));
    PropertyValueCollection pvc = root.Properties["ServerState"];
    return pvc.Value
    // - 2: Website Started
    // - 4: Website Stopped
    // - 6: Website Paused
} 
```

我还想检测网站是否被暂停。如果网站被暂停，上面的方法仍然返回 2（这是正确的）但对我来说还不够。

我找不到任何可以为 IIS6 及更高版本工作的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T16:45:48.620

啊，你的意思是应用程序池因为超时配置而停止了吗？这是一个不同状态的网站还记得吗？好吧，当然，您可以更改设置使其不被回收，但您也可以尝试使用这样的代码；

首先，添加对\Windows\System32\inetsrv\Microsoft.Web.Administration.dll的引用，然后；

```
using System;
using System.Collections.Generic;
using System.Text;
using Microsoft.Web.Administration;
namespace MSWebAdmin_Application
{
    class Program
    {
        static void Main(string[] args)
        {
            ServerManager serverManager = new ServerManager();
            Site site = serverManager.Sites["Default Web Site"];

            // get the app for this site
            var appName = site.Applications[0].ApplicationPoolName;
            ApplicationPool appPool = serverManager.ApplicationPools[appName];

            Console.WriteLine("Site state is : {0}", site.State);
            Console.WriteLine("App '{0}' state is : {1}", appName, appPool.State);

            if (appPool.State == ObjectState.Stopped)
            {
                // do something because the web site is "suspended"
            }
        }
    }
} 
```

该代码将独立检查您的 appPool 的状态，而不是您的网站。网站可能会返回“已启动”，而应用程序池可能会返回“已停止”。

看看它是否适用于你的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:41:07.113

您可能想尝试使用以下代码，添加您自己的逻辑并进行整理......但本质上您需要执行以下操作并根据您认为合适的方式修改您的代码。

添加以下枚举

```
public enum ServerState
        {
            Unknown = 0,
            Starting = 1,
            Started = 2,
            Stopping = 3,
            Stopped = 4,
            Pausing = 5,
            Paused = 6,
            Continuing = 7
        } 
```

搜索站点并处理它...

```
DirectoryEntry w3svc = new DirectoryEntry("IIS://" + "localhost" + "/W3SVC");
//check each site
foreach (DirectoryEntry site in w3svc.Children)
{
    foreach (var s in site.Properties)
    {
        try
        {
            ServerState state =
                (ServerState)
                Enum.Parse(typeof (ServerState), site.Properties["ServerState"].Value.ToString());

            if (state == ServerState.Paused)
            {
                //Do action
            }
        }
        catch (Exception)
        {

        }

    }
} 
```

我希望这对你也有用......

[http://csharp-tipsandtricks.blogspot.co.uk/2009_12_01_archive.html](http://csharp-tipsandtricks.blogspot.co.uk/2009_12_01_archive.html)

# xcode - 重复的目标：Xcode 无法使用选定的目标运行

> ID：12724786
> 
> 赞同：4
> 
> 时间：2012-10-04T09:59:08.150
> 
> 标签：xcode, macos, xcode4.5

（OS X，不是 iOS）：“选择具有受支持架构的目标以便在此系统上运行”

修复了构建设置中复制的 .plist，从新产品名称中删除了空格。找不到与原始目标设置的任何差异，仍然是这个可怕的错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T05:51:59.357

在 Xcode 4.5 下打开旧项目时出现此错误。问题：构建设置设置为标准架构，即 64 位和 32 位，而最小部署目标设置为 OS X 10.4。

将**最低部署目标**设置为 OS X **10.5**可以解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T18:10:33.353

当我遇到这个问题时，在 xcode 窗口顶部，我将 My Mac 64-bit 更改为 My Mac 32-bit。它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T12:34:42.663

对我来说，可执行文件的文件名（由目标构建设置中的“产品名称”指定）与 Info.plist 中指示的可执行文件名不匹配。事实上，当您复制一个目标时，您会得到一个通常会立即更改的“副本”后缀，这可能会导致一些错误。

在 Xcode 中选择产品应用程序并在 Finder 中打开它时，可以看到这种不匹配的附加指示。如果应用程序图标上覆盖有一种“停止”符号，则说明您的应用程序不可执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T22:52:58.877

如果一切正常，最后一件事是您应该检查应用程序的内容。很可能应用程序名称 Info.plist 文件与您在构建配置中的内容不匹配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T12:00:33.253

使用 Xcode 4.5.2。(4G2008a) 这个问题显然已经消失了。我现在可以复制原始目标，修复产品名称，并获得一个正常运行的应用程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-04T23:37:30.753

我开始得到同样的东西。我做了一个清洁，它似乎已经修复了它。狮子/Xcode 4.6.2

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-01T13:40:36.200

意外将二进制文件复制到 /usr/local/bin 后，我收到了相同的错误消息。二进制文件是由 Makefile “手动”生成的 - Xcode (5.1) 的构建过程也被配置为将二进制文件放在 /usr/local/bin 中。删除手动生成的文件并再次开始构建解决了问题。

# asp.net-mvc - 在 ASP.NET MVC 应用程序中将查询结果导出到 Excel

> ID：12724787
> 
> 赞同：1
> 
> 时间：2012-10-04T09:59:07.767
> 
> 标签：asp.net-mvc, export-to-excel

我在 c# 中有 asp.net MVC 应用程序，我得到查询结果（来自实体框架），我需要将数据放在用户可以下载的 Excel 表中。所以这就是我想要做的，我想知道如何将每一行数据写入 excel 表？我应该采取的任何其他方法也是受欢迎的。

```
var certs = CertificateService.ReadAllSentCertificates();
                Application excel = new Application();
                string filePath = "C:/ToDoList/SentStats_" + DateTime.Now.ToString() + ".xls";

                Workbook mybook = excel.Workbooks.Add();
                excel.Visible = true;
                try
                {
                    mybook.Activate();
                    Worksheet mysheet = mybook.Worksheets.Add();

                     foreach (var x in certs)
                    {
                        // How to write each row in excel??

                    }
                   //mybook.SaveAs(Filename: filepath);
                    mybook.Save();
                }
                catch (Exception ex)
                {
                }
                finally
                {
                    mybook.Close();
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:34:14.000

不要在 Web 应用程序中使用 Office 互操作。MS Office 从未设计为在服务器上运行。如果要构建 Excel 工作表，可以在服务器上使用[OpenXML 。](http://msdn.microsoft.com/en-us/library/office/hh180830.aspx)

作为替代方案，您可以在 a 中返回包含结果的视图，并使用响应标头`<table>`提供此视图。`application/vnd.ms-excel` `Content-Type`与使用可让您完全控制的 OpenXML SDK 相比，您对结果表格式的控制要少得多。

# spring - 使用@Autowired 时是否需要定义构造函数？

> ID：12724788
> 
> 赞同：0
> 
> 时间：2012-10-04T09:59:11.970
> 
> 标签：spring

由于@AutoWired 告诉应用程序上下文在此处注入 UserService 的实例，是否需要 UserController 构造函数？

```
@Autowired
private UserService service;

public UserController(UserService service) {
    this.service = service;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:00:22.913

不会。只要您为类所在的包启用注释扫描，Spring Framework 将自动注入依赖项。

# django - django，多对多关系 get_field 名称

> ID：12724789
> 
> 赞同：0
> 
> 时间：2012-10-04T09:59:12.817
> 
> 标签：django, many-to-many

我有两个与多对多关系相关的 django 模型。

第一个模型：

```
class Category(models.Model):

   name = models.CharField(max_length=255)
   products = models.ManyToManyField(Product, related_name='categories',
                                  blank=True, null=True,
                                  verbose_name=_('Products'),
                                  ) 
```

第二个模型：

```
class Product(models.Model):

    description = models.TextField(verbose_name=_('Description'), default='')
    manifactor = models.CharField(verbose_name=_('Manifactor'), default='Blackberry', max_length=255) 
```

好的，所以：

```
product = Product.objects.all()[0]
product.categories  - give me a list of categories for this product. 
```

但：

```
product._meta.many_to_many - return empty list [].
and product._meta.get_field('categories') - return None. 
```

为什么 ？

如何从产品对象中获取类别字段的详细名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:20:17.653

你可以加

```
categories = models.ManyToManyField(Category, 
                                    through=Category.products.through) 
```

到您的产品型号

# c# - 处理异常时未保留视图状态

> ID：12724794
> 
> 赞同：1
> 
> 时间：2012-10-04T09:59:23.457
> 
> 标签：c#, asp.net, .net, web, viewstate

我正在使用详细信息视图与用户进行对话，当插入数据时出现错误，似乎没有保留视图状态。

我在数据源上使用 OnInserted 处理程序来检查是否存在如下异常：

```
protected void areaInsertHandler(Object sender, SqlDataSourceStatusEventArgs e)
    {
        if (e.Exception != null)
        {
            // There was an error in submitting, show the error dialog
            ScriptManager.RegisterClientScriptBlock(Page, GetType(), "DialogHandler", "showError('#overlayAreas');", true);
            e.ExceptionHandled = true;
        }
    } 
```

它只是调用客户端 JS 函数：

```
function showError(overlayName) {
    $(".msgError").css('visibility', 'visible');
    $(overlayName).css('visibility', 'visible');
} 
```

我的详细信息视图如下所示：

```
<asp:UpdatePanel ID="AreaUP" runat="server" UpdateMode="Conditional">
  <ContentTemplate>
    <div id="overlayAreas" class="overlay">
        <asp:DetailsView 
            ID="DetailsView_Areas"
            runat="server"
            Visible="True"

            AutoGenerateInsertButton="False"
            AutoGenerateRows="False"

            caption="<a style='font-weight: bold;'>Bold</a> = Required field"
            CaptionAlign="Bottom"
            headertext="Create new area"   
            EnableViewState="true"

            DataKeyNames="Area_Name"
            DataSourceID="AreasSource"
            DefaultMode="Insert">
                <Fields>
                    ...
                </Fields>
        </asp:DetailsView>
    </div>

    <br />
    <asp:Button width="200" height="30"  ID="Button_CreateArea" runat="server" OnClientClick="return btnToggle('#overlayAreas')" Text="Create new area" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

一切正常，但由于某种原因，没有保留 ASP 视图状态。这意味着如果我在表单中填写了不正确的信息并提交，我会收到相应的错误，并且仍然会显示对话框。但是这些字段没有填写我的旧值。

如果有人可以给我一些指示或帮助我，我将不胜感激

编辑 10-08：仍然无法解决它，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-19T14:31:10.837

基本上：

1.  避免 DetailsView_Areas.DataBind()

    ```
     if (DetailsView_Areas.CurrentMode != DetailsViewMode.Insert) DetailsView_Areas.DataBind(); 
    ```

2.  为您的 DetailsView_Areas 创建 ItemInserted 事件并放置

    ```
     if (e.AffectedRows < 0) e.KeepInInsertMode = true; 
    ```

请参阅[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsviewinsertedeventargs.affectedrows(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsviewinsertedeventargs.affectedrows(v=vs.110).aspx)

# javascript - 文档在新窗口中准备就绪，跨域

> ID：12724804
> 
> 赞同：0
> 
> 时间：2012-10-04T09:59:44.023
> 
> 标签：javascript, jquery, cross-domain

重新加载文档后，如何检查新窗口中的文档是否准备就绪。

这是我的例子：

我需要从某个站点（它是跨域的）将搜索结果页面获取到新窗口。我需要先发出 POST 请求（他们可能在会话中存储搜索参数），然后转到 reslut 页面。

这是我的代码：

```
var windowname = "window"+(new Date().getTime()); // so I can open multiple windows, not very relevant 
var new_window = window.open("", windowname); // prepare named window

// prepare form with post data targeted to new window
var dataform = $("<form method='post' target='"+windowname+"' action='https://www.ebi.ac.uk/chembldb/compound/smiles/'><input name='smiles' value='"+$("#id_smiles").text()+"'></form>");

// Need to get the form into page for Mozilla, webkit allows to submit forms that are not in page
$("body").append(dataform);

// submit the form and remove it, no need to keep it
dataform.submit().remove();

// form opens in my new window
$(new_window.document).ready(function(){

    // this is carried out apparently too soon, because the POST data didn't work
    // when I use timeout (commented below, but i don't like this solution) it works
    window.open("https://www.ebi.ac.uk/chembldb/index.php/compound/results/1/chemblid/asc/tab/smiles", windowname);
    // setTimeout( function(){window.open("https://www.ebi.ac.uk/chembldb/index.php/compound/results/1/chemblid/asc/tab/smiles", windowname)}, 1000);
}); 
```

在该站点上，首先使用 AJAX 发出 POST 请求，然后它们只是简单地发出请求，但由于它是跨域的，因此对我来说是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:26:00.913

您可以运行跨域中的 javascript 代码，为此您应该使用 JSONP 概念（[http://en.wikipedia.org/wiki/JSONP）/](http://en.wikipedia.org/wiki/JSONP)跨源资源共享（[http://en.wikipedia.org /wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)）。

只需在 apache 服务器设置中进行少量更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:09:43.897

我相信这是不可能的。如果您使用 new_window （跨域）的引用，甚至某些浏览器也会抛出异常。我得到了以下异常。在尝试使用 url `http://www.google.com`(Browser Chrome) 访问新窗口的引用时。并且引用没有任何属性。

**不安全的 JavaScript 尝试从带有 URL [Document ready in new window, cross-domain的框架访问带有 URL](https://stackoverflow.com/questions/12724804/document-ready-in-new-window-cross-domain) [http://www.google.co.in/](http://www.google.co.in/)的框架。域、协议和端口必须匹配。**

# asp.net - 如何在 ASP .NET 中缓存输出响应流

> ID：12724805
> 
> 赞同：0
> 
> 时间：2012-10-04T09:59:46.317
> 
> 标签：asp.net, caching

我想在 asp.net 中缓存输出流。例如，我想在渲染后缓存网格的 html 结果。由于我的网格被一些参数填充，我不能使用缓存的用户控件。我无法缓存页面。现在我缓存数据库结果，但是我页面中的 asp .net 进程很高，我想通过它。

我该怎么做？

# android - 如何在android中更改默认媒体播放器的背景图像

> ID：12724806
> 
> 赞同：2
> 
> 时间：2012-10-04T09:59:52.550
> 
> 标签：android, android-intent

我使用流动代码播放音频

```
String image_url_path =  "htts: image path of url "   

    Uri uri = Uri.parse(image_url_path);

        Intent intent = new Intent(android.content.Intent.ACTION_VIEW); 
                        intent.setDataAndType(uri, "audio/*"); 
                        startActivity(intent); 
```

任何想法然后帮助我！

# excel-2010 - Excel 兼容模式停止 FileSystemWatcher 事件

> ID：12724807
> 
> 赞同：2
> 
> 时间：2012-10-04T09:59:53.773
> 
> 标签：excel-2010, xls, filesystemwatcher

在 Office 2010 中打开旧的 .xls 文件时，不再捕获有关更改的所有事件，filesystemwatcher 仍在监视该文件，因为如果我从 Temp 文件夹打开它，则会触发一个事件，但它在最初打开时连接到 Excel 似乎迷失。

有没有人见过这个？通过谷歌搜索我没有出现太多。

谢谢

# objective-c - 预处理器宏和 BOOL 怪异

> ID：12724808
> 
> 赞同：4
> 
> 时间：2012-10-04T09:59:56.410
> 
> 标签：objective-c, c-preprocessor

下面的代码产生输出“yes defined”、“no defined”和“yes”。为什么？

```
#define FOOBAR NO
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
#ifdef YES
    NSLog(@"yes defined");
#endif

#ifdef NO
    NSLog(@"no defined");
#endif

#if FOOBAR == YES
    NSLog(@"yes");
#else
    NSLog(@"no");
#endif
    // ...
} 
```

YES 和 NO 不是未定义的，objc.h 将它们定义为：

```
typedef signed char     BOOL;
#define YES             (BOOL)1
#define NO              (BOOL)0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T10:07:38.437

的价值是`NO`多少？如果它是未定义的（如`YES`），它们都将[评估为 0](http://gcc.gnu.org/onlinedocs/cpp/If.html#If)。

这意味着你的表达本质上是

```
#if 0 == 0 
```

这当然是正确的，因此会导致第一次调用被编译。

更新：不确定如何`BOOL`定义，但在处理预处理器时，转换为可能是`typedef`:ed 类型并不是一个好主意。请记住，`#if`由预处理器而不是编译器评估。阅读类似[这样](http://gcc.gnu.org/onlinedocs/cpp/If.html#If)的内容以获取有关预处理器中表达式的更多信息。尤其：

> 预处理器对语言中的类型一无所知。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T10:07:57.563

预处理器不知道的所有标识符都替换为指令`0`中的评估。`#if`如果您没有定义`YES`并且`NO`两者都是`0`（因此相等）。

# android - 如何 在 BasicNameValuePair 中放入 \n 值或（新行）

> ID：12724814
> 
> 赞同：0
> 
> 时间：2012-10-04T10:00:15.123
> 
> 标签：android, http, android-webview

我想发送带有许多新行或一些粗体文本或一些超链接的消息

例如：下面是我的代码

```
 List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
  String model = Build.MODEL + ",  " + Build.MANUFACTURER;
  nameValuePairs.add(new BasicNameValuePair("message", "Your Last Alert:  On "+mDate+" at "+mTime+", "+ model +" reported that its battery level was down to "+batteryLevel+". You might want to get it on a charger before it's too late! &nbsp;&nbsp Do you know where "+model+" is? </br></br> Click "+s+" to view in Google Maps.\n To find "+model+" with the Last Alert app on Android-phone, click here. \n\n\n\n\n\n Last Known Location : \n San Francisco California United States 94108"+"\n\n\n\n\n GPS Coordinates \n"+lat+", "+lon+"Altitude\n"+alt+"\n\nLocation Accuracy"+"16.40ft Diameter")); 
```

我已经使用`&nbsp;`了空间，`<br>`换行也`\n`用于换行，但问题是仅以纯文本形式发送的消息（我已在 gmail 中发送邮件，这是我的帐户），如下所示

```
 Your Last Alert: On 10/04/2012 at 03:23 pm, LG-P500, LGE reported that its battery level was down to 100\. You might want to get it on a charger before it's too late!  &nbsp Do you know where LG-P500, LGE is? Click https://maps.google.com/maps?q=0.0,0.0 to view in Google Maps. To find LG-P500, LGE with the Last Alert app on Android-phone, click here. Last Known Location : San Francisco California United States 94108 GPS Coordinates 0.0, 0.0Altitude -1.79769313486231E308 Location Accuracy16.40ft Diameter 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:16:50.537

一个猜测..尝试用“ `</br></br>`”替换“ `<br/><br/>`”。这可能会解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T10:16:34.290

1.  您是否将“内容类型”（在您的 http 请求的标头中）设置为： `text/html`？
2.  将您的信息包装成`<html>`
3.  使用`<br/>`标签代替`\n`

# c# - 应用程序池回收的 SignalR 连接处理

> ID：12724819
> 
> 赞同：10
> 
> 时间：2012-10-04T10:00:25.513
> 
> 标签：c#, signalr, signalr-hub

我正在将 SignalR (0.5.3) Hubs 用于聊天应用程序，其中每个击键都发送到服务器（保存在数据库中），中继到所有客户端，并从服务器。

它工作正常，直到应用程序池回收，然后它停止将击键中继到所有客户端（因为我想内存中的服务器状态丢失了）并且服务器也不会返回任何值。此时，我想所有通过 SignalR 的请求都由 IIS 排队，然后在应用程序池被回收后处理。

我的问题是如何处理这种情况，以便所有客户端都知道由于应用程序池回收导致服务器不可用/延迟，通知用户等待一段时间，然后在重新连接时恢复操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T16:28:42.380

有两种选择。

对于 0.5.3，您可以检测客户端何时进入“重新连接”或“断开连接”并通知用户存在服务器问题。请记住，在大多数情况下，如果服务器刚刚离开，客户端实际上不会知道它已断开连接。

或者

如果您等待下一个版本（1.0alpha），我们将为您处理大部分内容。在缺少服务器时，我们将触发 onConnectionSlow 事件，这将导致客户端进入“重新连接”（如果它没有收到任何信息）状态，直到服务器重新联机。客户端还将知道服务器是否因应用程序池回收等边缘情况而消失（我们正在添加此功能）。

希望这可以帮助！

# python - 什么是 Django 中 openinviter 的好选择

> ID：12724820
> 
> 赞同：5
> 
> 时间：2012-10-04T10:00:27.327
> 
> 标签：python, django

我想实现一个功能，该功能将从用户选择的不同站点（如 gmail、yahoo、facebook 等）导入用户的联系人。我发现[Django openinviter](https://github.com/tschellenbach/DjangoOpenInviter)是一个用 openinviter api 编写的 django 应用程序，但我的要求是导入联系人的身份验证应该像 oauth 一样完成，即我们不应该向用户询问密码。所以任何人都可以帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:51:44.653

试试[CloudSponge](http://www.cloudsponge.com)。如果您想让用户界面与小部件的外观不同，我们有一个很棒的小部件可以使集成变得非常容易（5 分钟复制/粘贴工作）和一个 API。

# ruby-on-rails - 需要“twitter-text”gem 时加载错误

> ID：12724821
> 
> 赞同：1
> 
> 时间：2012-10-04T10:00:28.103
> 
> 标签：ruby-on-rails, rubygems

我正在尝试在我的 Rails 3 应用程序中使用 twitter-text-rb (https://github.com/twitter/twitter-text-rb)。

我使用 bundler 和我的 gemfile 安装了它 - 看似成功 - 但是当我尝试在我的应用程序助手中包含它的自动链接功能时，如下所示：

```
require 'twitter-text'
module ApplicationHelper
include Twitter::Autolink
end 
```

当我尝试加载应用程序的根目录时，我在浏览器中收到此错误：

> 路由错误未初始化常量 Twitter::Autolink 尝试运行 rake 路由以获取有关可用路由的更多信息。

[我已经按照Ruby Gems 手册](http://docs.rubygems.org/read/chapter/19#page105)中的这些故障排除问题进行了 操作，但这似乎不是他们在“为什么需要 'some_gem' 失败？”下提出的两个可能问题中的任何一个。

这是我使用终端从应用程序的根目录按照他们的说明进行操作时的摘录：

```
manager$ gem list twitter-text

*** LOCAL GEMS ***

twitter-text (1.5.0)
manager$ ruby -rubygems -e 'require "twitter-text"'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:60:in `gem_original_require': no such file to load -- twitter-text (LoadError)
    from /Library/Ruby/Site/1.8/rubygems/custom_require.rb:60:in `require'
    from -e:1
manager$ gem contents --no-prefix twitter-text | grep lib
lib/twitter-text.rb
lib/twitter-text/autolink.rb
lib/twitter-text/deprecation.rb
lib/twitter-text/extractor.rb
lib/twitter-text/hit_highlighter.rb
lib/twitter-text/regex.rb
lib/twitter-text/rewriter.rb
lib/twitter-text/unicode.rb
lib/twitter-text/validation.rb
manager$ ruby -rubygems -e 'require "twitter-text"'
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:60:in `gem_original_require': no such file to load -- twitter-text (LoadError)
    from /Library/Ruby/Site/1.8/rubygems/custom_require.rb:60:in `require'
    from -e:1
manager$ which ruby
/usr/bin/ruby
manager$ gem env | grep 'RUBY EXECUTABLE'
  - RUBY EXECUTABLE: /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby 
```

我在应用程序中使用了一些其他的 gem，以前没有遇到过类似的问题。

我不知道下一步该尝试什么。我对 Ruby/Rails 很陌生（以及一般的编程！）所以任何帮助都将不胜感激。

谢谢，

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T05:58:58.490

我现在已经让这个 gem 工作并删除了加载错误（虽然我不能确定什么是正确的）。

我安装了 RVM 并使用 Ruby 1.9.2 和 Rails 3.2.3 尝试了我的应用程序和 twitter_gem。我之前使用的是系统默认的 Ruby - 1.8.7 - 和 Rails 3.2.3。宝石已正确加载并且运行良好。

因此，问题似乎在于在早期版本的 Ruby 上运行的 gem 或 RVM 的 gemset 帮助应用程序正确加载了 gem。

# jquery - 使用 Ajax 处理外部页面上的 Play Framework 请求

> ID：12724823
> 
> 赞同：3
> 
> 时间：2012-10-04T10:00:31.573
> 
> 标签：jquery, post, jquery-mobile, playframework

所以我看到的所有例子，看起来都像是在游戏框架中使用的。

我正在尝试处理来自外部页面的简单登录，该外部页面最终将在使用 phoneGap 的移动应用程序上使用。

当我发送 ajax 请求时，我得到一个 302 代码，我认为这很好，因为我想重定向到管理页面。我的问题是我不知道如何处理重定向，或者播放框架向我发送了错误的信息。

这是我的ajax调用。

```
 $("#loginPage").on('pageinit',function(event){ 
                $("#loginBtn").click(function() { 
                    $surl =  "http://morning-oasis-8528.herokuapp.com/login";
                    $username = $('#username').val();
                    $password = $('#password').val();
                    var bool = new Boolean("TRUE");
                    $.ajax({
                        type:"POST",
                        url: $surl,
                        data: {username:$username, password:$password, remember:bool},
                        dataType: "json",
                        success :  function(data, textStatus) {
                            if(data.redirect){
                                window.location.href = data.redirect;
                            } else {
                                alert(data);
                            } 
                        }
                    });

                });
            }); 
```

这是我的html：

```
 <div data-role="header" data-theme="b">
            <h1>Login Form</h1>
            <a href="index.html" data-icon="gear" class="ui-btn-right">Options</a>
            <a data-rel="back" data-role="button" class="ui-btn-left" data-icon="back">Back</a>         
        </div><!-- /header -->
        <div data-role="content" data-theme="d">    
            <div data-role="fieldcontain">
                <label for="username">Username :</label>
                <input type="text" name="username" id="username" required="required" /><br/><br/>
                <label for="password">Password:</label>
                <input type="password" name="password" id="password" required="required" />
                <button data-theme="b" id="loginBtn" >Log-In</button>
            </div>
        </div><!-- /content -->
        <div data-role="footer" data-theme="b" >
            <p>Login Form</p>
        </div><!-- /footer -->
    </div><!-- /page --> 
```

# orchardcms - Orchard cms 扩展菜单项部分

> ID：12724825
> 
> 赞同：1
> 
> 时间：2012-10-04T10:00:37.387
> 
> 标签：orchardcms

扩展果园菜单部分的最佳方法是什么？

我想对大多数内容类型使用普通菜单部分。

但我也想要一个自定义 MainNavigationMenuPart。它具有菜单部分的所有内容，但添加了一个媒体选择器字段和一个文本字段。- 这些项目将在菜单翻转时显示。

**选项1**

我认为这是最好的方法......

我已经研究过编写自定义菜单部分 - 但菜单部分当前的工作方式似乎有很多功能，我不确定如何以 DRY 的方式最好地利用它。

我可以将 MenuPartItem 添加到我的 customPart，所以主菜单部件模型看起来像这样

```
public class MainMenuPart : ContentPart<MainMenuRecord>
    {
        public MenuPart MenuPart { get; set; }

        public string ShortDescription
        {
            get { return Record.ShortDescription; }
            set { Record.ShortDescription = value; }
        }

    } 
```

但 ...

*   如何在部件的编辑器视图中呈现它？
*   我想使用现有的 MenuPartItemEditor。
*   如何将此信息保存在零件的记录中？

**选项 2**

我还研究了向菜单部分添加字段（通过 cms）。

我的菜单部分现在在后端看起来像这样

![在此处输入图像描述](../Images/78fa2d57845125df5a39a0bbef295d44.png)

在这里，我根据内容类型自定义了菜单的管理视图。购买在**Views/EditorTemplates**中创建**Parts.Navigation.Menu.Edit.cshtml**，在我的自定义中我可以访问菜单部分，但我似乎可以控制已添加到该部分的文件的显示。（菜单图像、突出显示和简短说明）

 **这是自定义的 Parts.Navigation.Menu.Edit.cshtml （原始在 Orchard.Core/Navigation/Views/EditorTemplates/Parts.Navigation.Menu.Edit.cshtml 中找到）

```
@model Orchard.Core.Navigation.ViewModels.MenuPartViewModel

@using Orchard.ContentManagement
@using Orchard.Core.Navigation.Models;

@if (!Model.ContentItem.TypeDefinition.Settings.ContainsKey("Stereotype") || Model.ContentItem.TypeDefinition.Settings["Stereotype"] != "MenuItem")
{

    if (Model.ContentItem.ContentType == "StandardIndexPage" ||
        Model.ContentItem.ContentType == "AlternateIndexPage" ||
        Model.ContentItem.ContentType == "MapIndexPage")
    {

        var sd = ((dynamic)Model.ContentItem).MenuPart.ShortDescription;

        @sd

        <fieldset>

            @Html.HiddenFor(m => m.OnMenu, true)
            @Html.HiddenFor(m => m.CurrentMenuId, Model.CurrentMenuId)
            <div>
                <label for="MenuText">@T("Menu text (will appear on main menu)")</label>
                @Html.TextBoxFor(m => m.MenuText, new { @class = "text-box single-line" })
                <span class="hint">@T("The text that should appear in the menu.")</span>
            </div>

        </fieldset>
    }

    else
    {
          <fieldset>

            @Html.EditorFor(m => m.OnMenu)
            <label for="@Html.FieldIdFor(m => m.OnMenu)" class="forcheckbox">@T("Show on menu")</label>
            <div data-controllerid="@Html.FieldIdFor(m => m.OnMenu)" class="">
                <select id="@Html.FieldIdFor(m => m.CurrentMenuId)" name="@Html.FieldNameFor(m => m.CurrentMenuId)">
                    @foreach (ContentItem menu in Model.Menus)
                    {
                        @Html.SelectOption(Model.CurrentMenuId, menu.Id, Html.ItemDisplayText(menu).ToString())
                    }
                </select>
                <span class="hint">@T("Select which menu you want the content item to be displayed on.")</span>

                <label for="MenuText">@T("Menu text")</label>
                @Html.TextBoxFor(m => m.MenuText, new { @class = "text-box single-line" })
                <span class="hint">@T("The text that should appear in the menu.")</span>

            </div>
        </fieldset>    
    }

}
else
{

    <fieldset>
        <label for="MenuText">@T("Menu text")</label>
        @Html.TextBoxFor(m => m.MenuText, new { @class = "textMedium", autofocus = "autofocus" })
        <span class="hint">@T("The text that should appear in the menu.")</span>
        @Html.HiddenFor(m => m.OnMenu, true)
        @Html.HiddenFor(m => m.CurrentMenuId, Request["menuId"])
    </fieldset>

} 
```

我还尝试使用主题中的placement.info 来控制字段的显示

```
<Match ContentType="StandardIndexPage">
    <Place Fields_Boolean_Edit-Highlight="-"/>
  </Match> 
```

没有成功。**

# ruby-on-rails - 使用 Carrierwave 直接上传到 S3

> ID：12724826
> 
> 赞同：7
> 
> 时间：2012-10-04T10:00:39.243
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, amazon-s3, carrierwave

我最近将以下内容从使用 Paperclip 转换为上传到 Amazon S3 的 Carrierwave，这样我就可以使用carrierwave_direct gem，然后使用 Sidekiq 或其他后台处理 gem。

```
class Release < ActiveRecord::Base
  has_many :releases_tracks, :dependent => :destroy
  has_many :tracks, :through => :releases_tracks, :order => "releases_tracks.position DESC"
  accepts_nested_attributes_for :tracks, :reject_if => lambda { |a| a[:name].blank? }, :allow_destroy => :true
  accepts_nested_attributes_for :releases_tracks  
end

class Track < ActiveRecord::Base
  mount_uploader :track, TrackUploader
  has_many :releases_tracks, :dependent => :destroy
  has_many :releases, :through => :releases_tracks 
end 
```

/views/releases/track_upload.html.erb

```
<%= form_for(@release, :html => { :multipart => true }) do |f| %>
<h3>Upload Tracks for <%= @release.title %></h3>
    <% index = 0 %>
    <%= f.fields_for :tracks do |builder| %>
    <%= @release.tracks[index].name %>
        <%= f.file_field :track, :class => "file styled", :title => 'Select Track'%>
    <% index += 1 %>
    <% end %>

    <%= f.submit "Upload Tracks", :class => "submit" %>
<% end %> 
```

Carrierwave 上传工作正常，但我不知道如何让直接部分工作。部分原因是我不知道如何合并建议的表单代码：

```
<%= direct_upload_form_for @uploader do |f| %>
  <%= f.file_field :track %>
  <%= f.submit %>
<% end % 
```

或者在我的轨道或发布控制器中我放置建议的位置：

```
@uploader = User.new.track
@uploader.success_action_redirect = new_user_url 
```

自述文件[https://github.com/dwilkie/carrierwave_direct](https://github.com/dwilkie/carrierwave_direct)和 Railscast [http://railscasts.com/episodes/383-uploading-to-amazon-s3](http://railscasts.com/episodes/383-uploading-to-amazon-s3)都指向首先上传文件，然后创建数据库条目。在我的应用程序中，数据库条目已经存在。Railscast 确实说这是可能的，但没有通过它。所以这是第一个问题。

第二个是我需要一次上传多个文件。上面的代码确实实现了这一点，但速度很慢，而且它当然会使我的应用程序变得毫无用处。

任何人都可以帮忙吗？提前致谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-08T21:49:33.820

首先我建议你不要使用carrierwave_direct，我真的不喜欢这个gem，有很多原因。其中一个原因是，正如文档中所说

> 请注意，此 gem 仅支持单个文件上传。如果您想同时上传多个文件，则必须使用 javascript 或 flash 上传器。

但如果你想使用它，我猜你必须这样做：

所以首先关于

```
@uploader = User.new.track
@uploader.success_action_redirect = new_user_url 
```

您似乎正在尝试上传曲目，并且正如您所说的那样，您的模型已经创建，我猜您正在尝试为现有版本上传新曲目。如我错了请纠正我。

所以你应该`@uploader`在`#track_upload`你的`ReleasesController`.

```
class ReleasesController
  ...  
  def track_update 
    @uploader = User.new.track
    @uploader.success_action_redirect = new_user_url
  end
  ...
end 
```

然后在关联的视图 ( `/views/releases/track_upload.html.erb`) 中，您可以使用`direct_upload_form`

```
<%= direct_upload_form_for @uploader do |f| %>
  <%= f.file_field :track %>
  <%= f.submit %>
<% end %> 
```

在您选择文件后，表单将直接将文件上传到 s3。那我不知道具体是怎么做的，但是carrierwave_direct应该会给你上传文件的url。我不确定这一点，因为我从来没有那么远，但想法是你的文件刚刚上传到 s3，现在它必须链接到你的模型，所以文件不会丢失'。所以也许carrierwave_direct通过做一些ajax请求或其他任何事情自己做事情（我怀疑......）。

无论如何，由于您要上传多个文件，我想向您指出[我最近写的一个教程](https://pjambet.github.io/blog/direct-upload-to-s3)

这显示了如何在没有carrierwave_direct 的情况下直接将文件上传到s3，而是自己做。这需要更多的代码和时间，但您可以更好地控制正在发生的事情。

在您的情况下，您需要将我在教程中使用的表单放在您的视图中，即 /views/releases/track_upload.html.erb 视图中。然后，一旦您选择了一个文件，成功的 AJAX 请求（由 jQueryFileUpload 插件发出）将为您提供上传文件的 URL，以便您可以将其保存在 Track 模型中（您可能想要发出一个新的 AJAX 请求到您的服务器以创建新的 Track 模型，或在页面上填充其他表单，例如您在 /views/releases/track_upload.html.erb 文件中使用的表单，然后在提交时将保存轨道。 ）我不确定我是否真的很清楚，如果您需要更多解释，请告诉我。

这样做的好处是，如果您只是添加`multiple`到您的文件输入中，那么很棒的[jQueryFileUpload](https://blueimp.github.io/jQuery-File-Upload/)插件将向每个文件发送一个请求到 s3，然后您将在每个 ajax 结果中获得上传文件的 URL：D

你可以调整一些东西来添加进度条，比如使用 jQuery 插件，你真的可以创造出很棒的东西。

希望对你有帮助！

# html - 带有 HTML5 内容的 HTML 4 iframe

> ID：12724828
> 
> 赞同：1
> 
> 时间：2012-10-04T10:00:42.543
> 
> 标签：html, iframe, xhtml-1.0-strict

所以我还有一个问题。我用**xhtml1 doctype**创建了一个页面。

`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">`

我在那个页面上放了一个视频元素和一个使用占位符的表单元素。对我来说，视频和占位符不会加载/被识别是有道理的，因为我不使用 HTML5 文档类型。

**然而，事实恰恰相反，它加载为 html5。**

除此之外，我在 xhtml1 页面中创建了一个 iframe。我想知道，如果我将 HTML5 页面作为源放在该 iframe 中会发生什么。最后，它还加载为 html5。

但是，我如何确保 xhtml1 页面不加载 html5，而 iframe html5 页面可以？

我认为**不同之处在于文档类型**，但也许**是别的东西**？浏览器？还是在某处重新发布，使浏览器将其初始化为 xhtml1，用 html5 加载 iframe，并将整个页面返回为 html5？

**有人有这方面的信息吗？以及可能的解决方法？**

感谢您的帮助！:)

Ps: 1x xhtml1 页面与 iframe。（应该只加载 xhtml1） 1x html5 页面放置在 iframe 中。（应该加载 html5） 如果一切都太混乱，我将发布小代码示例来说明问题。就告诉我嘛。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:04:32.187

您放入标头的内容类型与浏览器解析标签无关。因此，如果您的 html 代码具有 html5 标签，它们将正常执行。
除了手动检查代码外，我看不到任何方法可以阻止这种情况。

# html - 图像在打印预览中调整大小

> ID：12724834
> 
> 赞同：2
> 
> 时间：2012-10-04T10:00:55.013
> 
> 标签：html, css, print-css

我的网页上有几张图像（不是背景图像），当我看到 100% 比例的打印预览时，图像看起来不错，但我的问题是当我使用缩小以适应比例进行打印预览时，所有图像都来了比实际尺寸小。我没有在 IMG 标签上提供任何宽度或高度属性，所以我假设在打印预览中它会在它们出现在屏幕上时加载。我在 IMG 的打印媒体中使用了下面的 css，但它没有用

```
img {max-width:100%; } 
```

我期望 Shrink 中的相同图像尺寸适合并 100% 缩放。

这可能吗？我在打印 css 中遗漏了什么吗？请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-05-16T06:51:53.177

在处理我的项目时，当我需要在打印预览中获取图像的原始大小时，我必须使用`!important.`否则，它不会覆盖最初为页面上的图像定义的样式。

我还必须修改图像容器的高度：

```
@media print {
      .logo-container,
      .img-wrapper,
      img {
        max-height: none !important;
        height: 100% !important;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-02T06:14:16.400

你有你的图像在“容器”或“div”等吗？您应该为它们创建打印样式，而不仅仅是为 img 元素。

我建议在 screen 和 print 的元素上使用相同的样式，就像这样（这是我的 print.css）：

```
/*How they look like on the print preview*/
@media print {
    #poweredbyLogo{
        width:213px;
    }
    #logoframe{
        height:80px;
        margin-top:6px;
    }

    .space{
        padding-left:20px;
    }

    .col-md-6.a1{
        background-color: #0000f6!important;
    }
    .col-md-6.a2{
        background-color: #d3d3d3!important;
    }
}
/*How they look like on the screen*/
@media screen {
    #poweredbyLogo{
        width:47%;
    }

    #logoframe{
        height:80px;
        margin-top:6px;
    }

    .space{
        padding-left:20px;
    }
} 
```

希望有帮助，祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-05T17:04:57.170

Also you can try this.

```
<img class="application-logo res-media" width="65" height="65">

@media screen {
    .application-logo{
        width: 65px !important;
        height: 60px !important;
        cursor: pointer;
        margin: 25px;
    }
}

@media print {
    .application-logo, ._imgcont, img {
        max-height: none !important;
        height: 65px !important;
    }
} 
```

# scribe - Scribe 令牌到期

> ID：12724835
> 
> 赞同：1
> 
> 时间：2012-10-04T10:00:59.687
> 
> 标签：scribe

我保存通过授权获得的令牌并将它们用于发布和类似请求。但是，如果令牌过期，我需要知道何时重新登录。

抄写员会抛出任何相对异常吗？从消息来源来看，它没有，但也许它会抛出任何其他问题？也许您可以提出更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T23:36:12.333

Scribe 无法判断令牌是否过期。在 OAuth 中，提供者没有标准的方式来通知您令牌有效，而现在它不是。

它以这种方式工作是合乎逻辑的，令牌有生命周期，之后它们就会变成垃圾。没有办法区分刚刚过期的令牌和随机字符串。

您可以检查的唯一方法是（惊喜！）提出请求并查看它是否有效。您的客户端可以保持某种状态来检查请求是否使用以前有效的令牌获得未经授权的响应，在这种情况下尝试重新验证，但遗憾的是，提供者（或就此而言的抄写员）无法让这更容易为你。对不起。

# c# - 将小数小时添加到时间跨度

> ID：12724846
> 
> 赞同：5
> 
> 时间：2012-10-04T10:01:32.487
> 
> 标签：c#, .net, .net-3.5, timespan

我有一个`Decimal`值表示时间间隔中的小数小时数。

现在我需要将此值与 a 相加`TimeSpan`，但我找不到有效的方法来做到这一点。

目前，我的解决方案是执行以下操作：

```
myTimeSpan + new TimeSpan(0, 0, Math.Abs(decimalHours * 3600)) 
```

有没有更好的方法来解决我的问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T10:05:04.460

怎么样

```
myTimeSPan + TimeSpan.FromHours((double)decimalHours); 
```

# php - 谁能告诉我paypal按钮之间的区别

> ID：12724848
> 
> 赞同：2
> 
> 时间：2012-10-04T10:01:34.583
> 
> 标签：php, paypal, paypal-ipn, paypal-sandbox

谁能告诉我 Paypal 按钮之间的区别，例如托管按钮、非托管按钮、加密按钮、非加密按钮。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:24:34.480

通常，您希望使用托管按钮解决方案。此处解释了差异：[https ://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ButtonMgrAPIIntro#id093VD0JE0Y4](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ButtonMgrAPIIntro#id093VD0JE0Y4)

托管：所有参数都被编码成一个 id 并存储在 paypal 服务器上。你按下按钮，就是这样。当您更改参数时，id 保持不变，并且按钮仍在您的所有页面上工作。

加密：值是加密的，用户不能更改。更改参数时必须更新所有按钮代码 - 按钮代码基本上以加密形式存储在您的 html 中。

明文：值（如金额）是明文（在您的 html 中）并且可以由用户更改！灵活，但您必须注意欺诈行为。

# typo3 - TypoScript：从列中选择特定的内容元素

> ID：12724849
> 
> 赞同：0
> 
> 时间：2012-10-04T10:01:42.027
> 
> 标签：typo3, typoscript

选择单个内容元素的最佳方式是什么？我有一个像这样的静态 html 模板：

```
<html>
...
<div class="left clearfix">
    <h1><img src="fileadmin/templates/images/ueberschrift_startseite.png" alt="Willkommen" /><span>Willkommen</span></h1>
    <p>EINLEITUNGSTEXT 1 EINLEITUNGSTEXT 1</p>
    <ul>
        <li>LI 1</li>
        <li>LI 2</li>
        <li>LI 3</li>
        <li>LI 4</li>
    </ul>

    <h3>HEADLINETEXT 3</h3>
    <p>TEXT TEXT TEXT TEXT </p>
</div>
...
</html> 
```

在我的后端我添加了

1.  的内容元素`<h1>`
2.  应该在现在显示的`<p>`标签之间显示的内容元素`Einleitungstext1`
3.  一个内容元素，其中包含`LI`该`UL`部分的

等等。

所有元素都在同一列中。

我拿我的静态 HTML 模板并用可以在后端编辑的元素填充几个特定部分。

我希望我能解释我的问题是什么。

你如何配置你的模板？是否有更好的方法来仅替换静态模板的特定部分？

问候， 马克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:09:02.600

我假设您知道如何在 TypoScript 中使用`marks`和使用`subparts`，在这种情况下，您需要在模板中设置标记，将每个 CE 放在单独的列中（如果 all `left`、`default`和`right`( `border`0 -3）列用于其他用途）最后只需将这些列映射到标记。

提示：TemplaVoila 允许更多组合，因为您不仅可以映射 CE 的容器，还可以映射其他内容（标题字段、图像字段、TS 片段等）

# c++-cli - 数组在函数中分配

> ID：12724852
> 
> 赞同：1
> 
> 时间：2012-10-04T10:01:56.720
> 
> 标签：c++-cli

我在函数中分配 cli::array 时遇到问题。

我有这种对象：

```
array<double>^ tmsr2; 
```

现在我想在函数中分配它：

```
void allocate(array<double>^ tmsr2)
{
    tmsr2=gcnew array<double>(100);
} 
```

现在，函数中的 tmsr2 得到了很好的分配，但是在返回 main() 时我丢失了指针问题对我来说很清楚，就像我想分配简单的数组 "double *a"; 我需要将指针传递给函数所以“&a”，然后一切正常。我只是不知道托管数组的语法。非常感谢帮助。

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:17:07.707

您可以将数组作为参考传递：

```
void allocate(array<double>^ &tmsr2)
{
    tmsr2=gcnew array<double>(100);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T18:17:23.893

由于`array<double>`是托管类型，因此您可以在此处使用托管跟踪引用，而不是普通引用。

```
void allocate(array<double>^% tmsr2)
{
    tmsr2 = gcnew array<double>(100);
} 
```

这是我的测试应用程序：

```
public ref class AsAClassField
{
public:
    array<double>^ b;

    AsAClassField()
    {
        allocate(b);
        Debug::WriteLine("b = " + (b != nullptr ? "array" : "null"));
    }
};

int main(array<System::String ^> ^args)
{
    array<double>^ a = nullptr;
    allocate(a);
    Debug::WriteLine("a = " + (a != nullptr ? "array" : "null"));
    AsAClassField^ foo = gcnew AsAClassField();

    return 0;
} 
```

输出：

```
a = 数组
b = 数组

```

* * *

当然，您可以随时切换 allocate 函数以返回新分配的数组，而不是将其作为参考。那将更多地采用托管风格。

# php - twitter-async 中的异常

> ID：12724855
> 
> 赞同：0
> 
> 时间：2012-10-04T10:02:07.740
> 
> 标签：php, twitter, twitter-oauth

我正在尝试使用库[jmathai/twitter-async](http://www.jaisenmathai.com/articles/twitter-async-documentation.html)发送推文，但我得到一个没有消息的异常：

```
//not logged in:
if($oauth_token == '')
{
    try
    {

        $authorizationUrl = $twitterObj->getAuthorizeUrl();
        /*
        if (isset($authorizationUrl))
        {
            $twitterMessage = '<p>'._('twitter.signin.message').' : '.
            '<a href="'. $authorizationUrl.  '">'.
            '<img class="signin" src="images/sign-in.png" /></a></p>';
        }
        else
        {
        $twitterMessage .= '<p>'._('twitter.error.message').' (error 1)</p>';
        }
        */
    }
    catch(EpiTwitterException  $e)
    {
                $twitterMessage .= 'epiError '.$e->getCode() . ' ' . $e->getMessage();
    }
    catch(EpiOAuthException $e)
    {
                $twitterMessage .= 'oAutherror: '$e->getCode() . ' ' . $e->getMessage();
    }
} 
```

这与“oAutherror：0”相呼应

这是结果`var_dump($e->getTrace());`：

```
array(3) {
  [0]=>
  array(6) {
    ["file"]=>
    string(70) "/.../lib/jmathai-twitter-async/EpiOAuth.php"
    ["line"]=>
    int(404)
    ["function"]=>
    string(5) "raise"
    ["class"]=>
    string(17) "EpiOAuthException"
    ["type"]=>
    string(2) "::"
    ["args"]=>
    array(2) {
      [0]=>
      object(EpiCurlManager)#3 (2) {
        ["key:private"]=>
        string(14) "Resource id #8"
        ["epiCurl:private"]=>
        object(EpiCurl)#2 (9) {
          ["mc:private"]=>
          resource(7) of type (curl)
          ["msgs:private"]=>
          NULL
          ["running:private"]=>
          NULL
          ["execStatus:private"]=>
          NULL
          ["selectStatus:private"]=>
          NULL
          ["sleepIncrement:private"]=>
          float(1.1)
          ["requests:private"]=>
          array(1) {
            ["Resource id #8"]=>
            resource(8) of type (Unknown)
          }
          ["responses:private"]=>
          array(1) {
            ["Resource id #8"]=>
            array(6) {
              ["data"]=>
              bool(false)
              ["code"]=>
              int(0)
              ["time"]=>
              float(0)
              ["length"]=>
              float(0)
              ["type"]=>
              bool(false)
              ["url"]=>
              string(43) "https://api.twitter.com/oauth/request_token"
            }
          }
          ["properties:private"]=>
          array(5) {
            ["code"]=>
            int(2097154)
            ["time"]=>
            int(3145731)
            ["length"]=>
            int(3145743)
            ["type"]=>
            int(1048594)
            ["url"]=>
            int(1048577)
          }
        }
      }
      [1]=>
      bool(false)
    }
  }
  [1]=>
  array(6) {
    ["file"]=>
    string(70) "/.../lib/jmathai-twitter-async/EpiOAuth.php"
    ["line"]=>
    int(53)
    ["function"]=>
    string(5) "__get"
    ["class"]=>
    string(16) "EpiOAuthResponse"
    ["type"]=>
    string(2) "->"
    ["args"]=>
    array(1) {
      [0]=>
      string(11) "oauth_token"
    }
  }
  [2]=>
  array(6) {
    ["file"]=>
    string(44) "/.../main.inc.php"
    ["line"]=>
    int(29)
    ["function"]=>
    string(15) "getAuthorizeUrl"
    ["class"]=>
    string(8) "EpiOAuth"
    ["type"]=>
    string(2) "->"
    ["args"]=>
    array(0) {
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:53:51.623

当我从文件夹（名为 ca_bundle.crt 的文件）中删除证书时，问题似乎已经解决了。

见[https://github.com/jmathai/twitter-async/issues/134](https://github.com/jmathai/twitter-async/issues/134)

# c# - 无法在其他计算机上加载 mysql.data

> ID：12724857
> 
> 赞同：2
> 
> 时间：2012-10-04T10:02:19.653
> 
> 标签：c#, mysql

我用 C# 和 MySQL 制作了一个 Winform 应用程序。它在我的计算机上完美运行，但是当我发布它并在同一网络上的另一台机器上运行它时，当我尝试使用 MySQL 查询的函数时出现此错误。

> 无法加载文件或程序集“MySql.date，版本=6.5.4.0，文化=中性，publicKeyToken=c5687fc88969c44d”或其依赖项之一。该系统找不到指定的文件

我需要在这些计算机上安装 MySQL 还是有其他解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T10:14:20.203

你不需要在每台机器上都安装 MySQL 服务器。看起来在您将应用程序部署到的机器上找不到您引用的程序集。

在您的解决方案资源`Copy Local`管理器中，将您引用的 MySQL 程序集的属性设置为`true`

![在此处输入图像描述](../Images/83a339a4811196ab0d8b41cfb7ee4468.png)

当您部署到其他机器时，请确保将 包含在`MySQL.Data.dll`您的应用程序中。

# c# - 如何停止 Parallel.ForEach 的所有执行线程？

> ID：12724867
> 
> 赞同：3
> 
> 时间：2012-10-04T10:03:02.077
> 
> 标签：c#, task-parallel-library

我怎样才能立即摆脱以下 Parallel.ForEach 循环...

```
Parallel.ForEach(
                    webnode.ChildNodes.OfType<XmlNode>(),
                    (node,loopState) =>
                        {
                            if(threadCommand!=null &&                   threadCommand.CurrentSubIndicator.StopSignaled)
                                loopState.Stop();

                            string title = node.Attributes["Title"].Value;
                            string url = node.Attributes["Url"].Value;
                            if (!string.IsNullOrEmpty(specificItemUrl) &&
                                (!url.Equals(specificItemUrl)))
                                return;
                            Site partialSubSite = new WSS(site, Guid.Empty, title, url, "", null, null);

                            try
                            {
                                GetSite(partialSubSite, lite, readNavigation);
                            }
                            catch (Exception ex)
                            {
                                LogERError("Failed to fully read sub-site: {0}", url, ex);
                                partialSubSite.Guid = Constants.BadItemId;
                            }

                        }); 
```

`if (threadCommand!=null && threadCommand.CurrentSubIndicator.StopSignaled)`一旦我检查条件并发现为真，我想退出所有线程以停止执行 。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:20:00.513

检查 TPL 的 CancellationTokens。[http://blogs.msdn.com/b/pfxteam/archive/2009/06/22/9791840.aspx](http://blogs.msdn.com/b/pfxteam/archive/2009/06/22/9791840.aspx) 将 CancellationToken 传递给 Parallel.Foreach() 可以使其工作。当您想停止所有任务时，只需使用：

cts.Cancel()

在你的任务方法的地方

```
 cts.Token.ThrowIfCancellationRequested(); 
```

当您想检查任务是否需要停止时，因为另一个任务取消了进程。

这是如何使用它的未经测试的示例：

```
CancellationTokenSource cts = new CancellationTokenSource(); 
ParallelOptions options = new ParallelOptions 
                             {CancellationToken = cts.Token}; 

Parallel.ForEach(
                webnode.ChildNodes.OfType<XmlNode>(),
                 options 
                (node,loopState) =>
                    {

                        if(threadCommand!=null &&                   threadCommand.CurrentSubIndicator.StopSignaled)
                            cts.Cancel();

                        string title = node.Attributes["Title"].Value;
                        string url = node.Attributes["Url"].Value;
                        if (!string.IsNullOrEmpty(specificItemUrl) &&
                            (!url.Equals(specificItemUrl)))
                            return;
                        cts.Token.ThrowIfCancellationRequested();
                        Site partialSubSite = new WSS(site, Guid.Empty, title, url, "", null, null);

                        try
                        {
                            GetSite(partialSubSite, lite, readNavigation);
                        }
                        catch (Exception ex)
                        {
                            LogERError("Failed to fully read sub-site: {0}", url, ex);
                            partialSubSite.Guid = Constants.BadItemId;
                        }

                    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T10:11:52.650

你不能让他们立即停止。取消是合作的。您的线程需要通过定期检查取消来进行合作。没有其他方法，因为只是在这种情况下不适用的情况下杀死工作线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:33:23.693

我可以这样用吗

```
 Parallel.ForEach(
                    webnode.ChildNodes.OfType<XmlNode>(),
                   (node, loopState) =>
                    {
                        if (threadCommand != null && threadCommand.CurrentSubIndicator.StopSignaled)
                            loopState.Stop();

                        string title = node.Attributes["Title"].Value;
                        string url = node.Attributes["Url"].Value;
                        if (!string.IsNullOrEmpty(specificItemUrl) &&
                            (!url.Equals(specificItemUrl)))
                            return;

                        if (loopState.IsStopped)
                            loopState.Break();

                        Site partialSubSite = new WSS(site, Guid.Empty, title, url, "", null, null);

                        try
                        {
                            if (loopState.IsStopped)
                                loopState.Break();

                            GetSite(partialSubSite, lite, readNavigation);
                        }
                        catch (Exception ex)
                        {
                            LogERError("Failed to fully read sub-site: {0}", url, ex);
                            partialSubSite.Guid = Constants.BadItemId;
                        }

                        if (partialSubSite.Web.IsBucketWeb)
                        {
                            lock (others)
                                others.AddRange(partialSubSite.Web.SubWebUrls.Cast<string>());
                            return;
                        }
                        lock (subSites)
                            subSites.Add(partialSubSite as WSS);
                    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T10:10:51.053

`ParallelLoopState.Stop()`我找到了这篇文章，它介绍了使用和之间的区别`ParallelLoopState.Break()`。这似乎表明尽管线程可能会继续工作，但您可以检查一下`ParallelLoopState.IsStopped`，如果是真的，请确保您的线程不会保存它的工作。

[http://msdn.microsoft.com/en-us/library/dd460721.aspx](http://msdn.microsoft.com/en-us/library/dd460721.aspx)

# c++ - 在构造函数之前调用的静态对象和成员方法

> ID：12724870
> 
> 赞同：0
> 
> 时间：2012-10-04T10:03:16.283
> 
> 标签：c++, static, constructor

我有两个类 A 和 B 使得 A 有一个静态 B 实例作为其成员。B 有一个函数 Show()，这是我的 A 类：

```
class A
{
  A()
  {
    _b.Show();
  }
private:

  static B _b; 
}; 
```

随后的代码是

```
A a;
B A::_b;

int main()
{
} 
```

现在由于我定义 a 和 _b 的顺序，在构造 B 之前调用了 B::Show()。但是这究竟是如何工作的，即如何才能调用尚未构造的对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T10:05:32.680

这是不可能的，这是未定义的行为（在这种情况下，因为您正在访问一个未初始化的对象），因为`a`在`A::_b`.

查找*静态初始化命令惨败*。您不会收到错误，因为 99% 的情况都会发生这种情况，而且不容易诊断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T10:11:42.833

这是静态初始化顺序问题。在一般情况下很难解决，但解决某些情况的一种方法是将依赖项放在这样的函数中：

```
class A
{
public:
    A()
    {
        getB().Show();
    }
private:
    static B& getB()
    {
        static B b;
        return b;
    }
}; 
```

函数内的静态变量保证在第一次调用它时被初始化。此外，在 C++11 中，这也保证是线程安全的。

进一步阅读：

[http://www.parashift.com/c++-faq/static-init-order-on-first-use.html](http://www.parashift.com/c++-faq/static-init-order-on-first-use.html)

[查找 C++ 静态初始化顺序问题](https://stackoverflow.com/questions/335369/finding-c-static-initialization-order-problems)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:21:43.810

> 怎么可能调用仍未构造的对象？

嗯，简单的答案是，代码就是这样做的。`<g>`. 在同一翻译单元的文件范围内定义的对象是按照它们的定义发生的顺序构造的，因此如果一个对象的构造函数依赖于另一个对象，则必须确保在构造函数时已经构造了第二个对象第一个对象运行。

C++ 在这里没有提供任何帮助。你必须自己跟踪它。

# java - 渲染 jsf 后 - 空 tbody 元素

> ID：12724871
> 
> 赞同：0
> 
> 时间：2012-10-04T10:03:16.980
> 
> 标签：java, html, css, jsp, jsf

绘图表意味着 JSF 该表仅包括标题。渲染后仍然是一个空标签 TBODY

JSF：

```
 <h:dataTable>
         <h:column>
             <f:facet name="header">
               <h:outputText value="col1" />
             </f:facet>
          </h:column>
          <h:column>
             <f:facet name="header">
               <h:outputText value="col2" />
             </f:facet>
          </h:column>
    </h:dataTable> 
```

html结果：

```
<table>
  <thead>
    <tr>
      <th>
        <span>col1</span>
      </th>
      <th>
        <span>col2</span>
      </th>
     </tr>
  </thead>
  <tbody> </tbody>
</table> 
```

如何编写不会创建空 TBODY 元素的 JSF 代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:01:42.910

您的数据表没有任何问题。您定义的唯一内容是：

*   我想要一张桌子；
*   我希望表格有 2 列；
*   我希望第一列的标题为“col1”；
*   我希望第二列的标题为“col2”；

这正是 JSF 为您呈现的内容。您没有将任何数据传递给数据表。您必须使用该`value`属性并传递一个列表。

[BalusC 有一篇关于使用数据表的旧文章，但仍然很有用。](http://balusc.blogspot.com.br/2006/06/using-datatables.html)

# javascript - 自定义 JavaScript/HTML5 播放器问题

> ID：12724873
> 
> 赞同：1
> 
> 时间：2012-10-04T10:03:19.893
> 
> 标签：javascript, html, audio

我一直在使用这个自定义音频播放器，我在互联网上整理了一些教程和解决方案，并且在过去的 2 个月里一直在使用它。

它在 Chrome 中 100% 工作，但在更新后，搜索栏碰巧停止工作。

这是我的问题吗？还是对其他人有用？

**HTML：**

```
 <div id="musicplayer">
      <table>
           <tr>
                <audio id="audio" src="../audio/oby/weightless/Got To Be Free.mp3"></audio>
                <td>
                     <button id="play" type="button" onclick="playPause()" ></button>
                </td>
                <td>
                     <div id="boxed" >
                          <a href="#" id="songName">Select a song from the playlist</a>
                          <p class="right" id="timeInfo">00:00</p>
                          <input type="range" step="any" id="seekbar"></input> 
                     </div>
                </td>       
           </tr>
      </table>
 </div> 
```

**JavaScript：**

```
<script>    
    var audio = document.getElementsByTagName('audio')[0],
    div = document.getElementById('timeInfo');

     function formatTime(s, m) {
     s = Math.floor( s );    
     m = Math.floor( s / 60 );
     m = m >= 10 ? m : '0' + m;    
     s = Math.floor( s % 60 );
     s = s >= 10 ? s : '0' + s;    
     return m + ':' + s;
     }

     setInterval(function() 
     {
     div.textContent = formatTime(audio.currentTime);
     }, 100);

     seekbar.value = 0;
     var audio = document.getElementById("audio");
     var seekbar = document.getElementById('seekbar');

     function setupSeekbar() {
     seekbar.min = audio.startTime;
     seekbar.max = audio.startTime + audio.duration;
     }
     audio.ondurationchange = setupSeekbar;

     function seekAudio() {
     audio.currentTime = seekbar.value;
     }

     function updateUI() {
     var lastBuffered = audio.buffered.end(audio.buffered.length-1);
     seekbar.min = audio.startTime;
     seekbar.max = lastBuffered;
     seekbar.value = audio.currentTime;
     }
     seekbar.onchange = seekAudio;
     audio.ontimeupdate = updateUI;
     audio.addEventListener('durationchange', setupSeekbar);
     audio.addEventListener('timeupdate', updateUI);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:41:56.820

重复代码：

```
audio.ondurationchange = setupSeekbar; 
```

和

```
audio.addEventListener('durationchange', setupSeekbar); 
```

尝试删除任何这些行。

如果在 javascript 中设置 seekbar 值会触发 onchange ......你将不得不删除`seekbar.onchange = seekAudio;`

当用户随时点击时，您的搜索栏不会搜索吗？或者更新时间有问题。（时间在更新，但 seekbar 没有）？

你不需要这些代码，也可能导致问题一...（搜索栏更新问题）

```
var lastBuffered = audio.buffered.end(audio.buffered.length-1); 
seekbar.min = audio.startTime; 
seekbar.max = lastBuffered; 
```

编辑（题外话）：为了更好的性能删除代码

```
 setInterval(function()  
 { 
 div.textContent = formatTime(audio.currentTime); 
 }, 100); 
```

并将其附加到 updateUI

```
div.textContent = formatTime(audio.currentTime); 
```

# ruby-on-rails - 只缓存rails中的主要内容

> ID：12724876
> 
> 赞同：0
> 
> 时间：2012-10-04T10:03:25.400
> 
> 标签：ruby-on-rails, caching

使用 Rails 3.1.1 和 Heroku。

我相信这应该是一个相当容易解决的问题，但我找不到（并且很容易验证）如何做到这一点。我有一个非常慢的控制器（6 秒）`Product#show`，有很多**N+1**和其他我必须解决的事情。

该网站是一个两栏网站 (`main-column`和`right-column`)，其中主要内容`Product#show`显示在一栏中，另一栏`daily product`显示，包括**“数据库中的随机产品”**。

我想要做的是让其中`main-column`创建的内容`Product#show`被缓存（从而绕过控制器并赢得 6 秒）。但是，我确实希望右列是动态的（并为每个页面请求加载）。

如果我使用`caches_page :show`它将缓存整个网站，包括 . `right-column`，这使我必须每天都使缓存过期才能加载新的`Daily Product`. 不是一个好的解决方案。

如果我使用`cache('product-show' + @product.slug) do`它只缓存视图（对吗？）并且仍然必须通过控制器。

那么，我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:39:08.373

您可以通过片段缓存来实现这一点，如下所示：

```
def show

  if !fragment_exist?("main_content")
    @products = Product.all
    @users_count = User.count
  end

  @random_products = Product.order("RANDOM()").limit(10)

end 
```

**显示.html.erb**

```
<!--MAIN CONTENT-->
<% cache("main_content") do %>
    <%= @users_count %>
    <% @products.each do |product| %>
        <%= product.name %>
    <% end %>
<% end %>

<!--SIDE CONTENT-->
<% @random_products.each do %>
    <%= product.name %>  
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:07:32.527

使用片段缓存，不要在控制器中加载东西。

如果你有一个非常复杂的查询，让它作为一个范围存在于控制器中，并且只在视图中评估它。

如果您有一个复杂的过程，那么必须执行查询，请使用辅助方法。

如果你设法在控制器中加载惰性查询，如果缓存被命中，它们都不会被执行。

# wordpress - 仅在 wp 查询中列出特定时期的帖子

> ID：12724879
> 
> 赞同：0
> 
> 时间：2012-10-04T10:03:57.703
> 
> 标签：wordpress, wordpress-theming

在 WordPress 上，我怎样才能完成这项工作？

将 wp 查询限制为仅列出最近一年（365 天）的帖子，并且不列出早于 365 天的帖子。

有这个插件吗？请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:45:49.307

codex 上有一个示例，显示了如何列出过去 30 天的帖子： http: [//codex.wordpress.org/Class_Reference/WP_Query#Time_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Time_Parameters)

您应该调整它以满足您的需求，例如（未测试）：

```
// Create a new filtering function that will add our where clause to the query
function filter_where( $where = '' ) {
    $where .= " AND post_date > '" . date('Y-m-d', strtotime('-1 year')) . "'";
    return $where;
}

add_filter( 'posts_where', 'filter_where' );
$query = new WP_Query( $query_string );
remove_filter( 'posts_where', 'filter_where' ); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T11:39:23.580

```
<?php 

$date1yrback = date('Y-m-d',strtotime(date("Y-m-d", mktime()) . " - 365 day")); // Find Date 1 year back

$countp = 0;

if ( have_posts() ) : while ( have_posts() ) : the_post();

$my_date = the_date('Y-m-d', FALSE);    //Find Post Date

if($my_date > $date1yrback)             //Check if Post date is greater than date year back
{
    echo "<h1>".the_title()."</h2>";
    echo "<p>".the_content()."</p>";
    $countp++;                          //Increment counter as post in above criteria is found
}

endwhile; endif; 

if($countp == 0)
{
    ?>
        <p><?php _e('Sorry, no posts matched your criteria.'); ?></p>
    <?php 
}

?> 
```

# c# - 查询没有产生预期的结果

> ID：12724882
> 
> 赞同：0
> 
> 时间：2012-10-04T10:04:08.593
> 
> 标签：c#, linq, entity-framework-4

```
using (Entities PlatfrmName = new Entities())
{
    foreach (string selectedProject in SplitSelectedprojects)
    {
        var platformId = from platformID in PlatfrmName.AppProjects84
                         where platformID.ProjectName == selectedProject
                         select platformID.PlatformId;

                        var platformName = from platfrmName in PlatfrmName.AppPlatforms84
                                           where platfrmName.PlatformId.ToString() == platformId.ToString()
                                           select platfrmName.PlatformName;
                        //Get the projects based on the platforms
                        if (platformName.ToString() == "Base")
                            BASE += selectedProject + ",";
                        if (platformName.ToString() == "Windows")
                            WINDOWS += selectedProject + ",";
                        if (platformName.ToString() == "Web")
                            WEB += selectedProject + ",";
                        if (platformName.ToString() == "Wpf")
                            WPF += selectedProject + ",";
                        if (platformName.ToString() == "Silverlight")
                            SILVERLIGHT += selectedProject + ",";
                        if (platformName.ToString() == "Mvc")
                            MVC += selectedProject + ",";
    }
} 
```

我希望结果为`platformName == Base`，那么应该将该项目添加到 BASE 变量中。当控件到达时 `if (platformName.ToString() == "Base")`，我将光标悬停在它上面，它什么也不显示。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:32:49.573

第二个查询的结果不是 Platform 的对象，而是 IQueryable。因此 ToString 不会返回您期望的任何字符串。此外，第二个查询（可能是第一个查询）根本不会针对数据库执行，因为没有任何东西可以强制执行（即没有评估）。我也相信你可以只有一个查询而不是两个。像这样的东西：

```
var platformName = (from platform in PlatfrmName.AppProjects84 
                   where platformID.ProjectName == selectedProject 
                   select platform.PlatformName).Single(); 
```

应该做的伎俩 - 首先，它结合了两个查询。其次，它通过使用 .Single() 强制查询评估。这样查询被发送到数据库以获取结果。我假设您对给定项目只期望一个结果，因此我使用了 Single()。.Single() 的结果是单个对象而不是 IEnumerable，因此您应该能够获取您的平台名称。此外，如果 platformName 是字符串，则不必使用 .ToString()。

# javascript - 使用 jQuery 验证表单

> ID：12724884
> 
> 赞同：0
> 
> 时间：2012-10-04T10:04:14.990
> 
> 标签：javascript, jquery

单击表单提交按钮时，将调用验证所有字段的函数。但是，如果验证失败，则不会发生任何事情。

我正在使用`mailto:`作为我的行动，这有什么不同吗？
我想澄清两件事：

1.  这是单击提交按钮时调用函数的正确方法吗？

    ```
    $(document).ready(function(){
        $('#contactForm').submit(function(){
            checkMail();
        });
    }); 
    ```

2.  即使我正在使用，我仍然可以验证这些字段`mailto:`吗？

这是其余的代码：

```
function checkEmail(){
    var email = document.contact.email.value;

    if(email == "") {
        document.getElemtById("email_error").innerHTML = "No Email Address";
        return false;
    }
    else {
        document.getElementById("email_error").innerHTML = ""
        return true;
    }
} 
```

HTML：

```
<form name="contact" action="mailto:exampleemail@hotmail.com" method="post">
    <li>
        <label for="email">Email</label>
    <input id="email" type="text" name="email" placeholder="Enter Email Address">
    </li>
    <span id="email_error"></span> 
```

此外，单击提交时我没有收到错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:11:00.763

不，您需要事件处理程序`return false`以防验证失败。这将阻止执行该操作，即启动邮件程序。

> **我们可以通过在事件对象上调用 .preventDefault()或从我们的处理程序返回 false**来取消提交操作。

[来源](http://api.jquery.com/submit/)

像这样修改它：

```
$(document).ready(function(){
    $('#contactForm').submit(function(){
        return validate();
    });
}); 
```

当然，这意味着如果验证失败，`validate()`函数需要实际返回**，***否则*。`false` **`true`**

 *****此外**，您的标签上还缺少`id="contactForm"`您。`<form>`

此外，您需要正确获取电子邮件值：

```
var email = $("#email").val(); 
```

还有一个错误：你拼错了`getElementById()`. 这是一个更正的版本：

```
function checkEmail() {
    var email = $("#email").val();

    if (email == "") {
        document.getElementById("email_error").innerHTML = "No Email Address";
        return false;
    }
    else {
        document.getElementById("email_error").innerHTML = ""
        return true;
    }
} 
```

或者，使用所有 jQuery：

```
function checkEmail() {
    var email = $("#email").val();
    var $error = $("#email_error");
    if (email == "") {
        $error.html("No Email Address");
        return false;
    }
    else {
        $error.html("");
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:10:11.507

这是您需要的：

```
$(document).ready(function(){
   $('#contactForm').submit(function(){
       if (!validate()) {
           return false; // Prevent the submit
       }
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T10:11:50.747

为了验证表单的字段，在发送之前，您可以使用 jQuery 的验证插件：

```
$(document).ready(function(){

    $("#contactForm").validate({
        submitHandler: function(form) {
            // some other code
            // maybe disabling submit button
            // then:
            $(form).submit();
        }
    });

}); 
```

查看在线文档以获取更多信息和示例：[http ://docs.jquery.com/Plugins/Validation#Validate_forms_like_you.27ve_never_been_validating_before.21](http://docs.jquery.com/Plugins/Validation#Validate_forms_like_you.27ve_never_been_validating_before.21)***

# silverlight - WP中应用程序菜单栏中的大写字母

> ID：12724886
> 
> 赞同：3
> 
> 时间：2012-10-04T10:04:19.763
> 
> 标签：silverlight, windows-phone

我必须在我的 Windows Phone 应用程序的应用程序菜单栏中显示术语“Apple”和“Grapes”。我的 XAML 如下所示：

```
 <AppBar:BindableApplicationBar.MenuItems> 
            <AppBar:BindableApplicationBarMenuItem 
            Text="Apple" 
                Command="{Binding AppBarMenuClickedCommand}"
            IsEnabled="True" >
            </AppBar:BindableApplicationBarMenuItem>
        </AppBar:BindableApplicationBar.MenuItems> 
```

但是，即使我给出了上面提到的词，在模拟器/设备上，它也显示为“苹果”和“葡萄”。但是，在图片应用程序中打开图像后，它会显示“在 SkyDrive 上共享”。因此，这似乎是可能的，但默认情况下不会发生。在我的情况下，有没有办法以大写字母显示 A 和 G。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-22T15:01:37.443

不幸的是，这是不可能的 - 应用程序菜单栏中的文本按设计显示为小写，如此[处所述](https://social.msdn.microsoft.com/forums/windowsapps/en-us/261c653b-a3d7-41d7-8d73-6114da2aa805/why-menuitems-in-application-bar-always-lower-case "为什么应用程序栏中的 MenuItems 总是小写？")

> 它是地铁设计的一部分。将文本硬编码为大写会导致文本以全部小写形式显示，除非语言要求单词为大写。即德语名词必须大写，所以单词的第一个字母可以保持大写。

# c++ - 在高性能金融应用程序中缓存

> ID：12724887
> 
> 赞同：0
> 
> 时间：2012-10-04T10:04:23.617
> 
> 标签：c++, caching, memory, memory-profiling

我正在编写一个应用程序，其目的是优化交易策略。为简单起见，仅假设我们有一个交易策略，即“在此处进入”，然后是“在交易中退出”，然后让我们有两个模型：一个说我们应该承担多少风险（如何如果我们站在市场的错误一边，我们会损失多少），另一个说我们应该获得多少利润（即如果市场同意，我们将获得多少利润）。

为简单起见，我将历史已实现交易称为刻度。这意味着，如果我“在第 28 次交易时输入”，这意味着我将在我的数据集中的第 28 次交易时以该交易的价格输入交易。刻度按时间顺序存储在我的数据集中。

现在，想象一下整个数据集的入口策略有 500 个入口。对于每个条目，我可以预先计算确切的条目刻度。我还可以计算每个入口点的退出策略所确定的退出点（同样作为刻度数）。对于每个条目，我还可以预先计算建模的损失和利润以及这些损失或利润会受到打击的刻度。剩下要做的最后一件事是计算首先会发生什么，即退出策略、退出亏损或退出盈利。

因此，我遍历交易数组并计算 exitTick[i] = min(exitTickByStrat[i], exitTickByLoss[i], exitTickByProfit[i])。整个过程非常缓慢（假设我这样做了 100M 次）。我怀疑缓存未命中是罪魁祸首。问题是：这能以某种方式更快吗？我必须遍历 4 个非平凡长度的数组。我提出的一个建议是将数据分组为四个元组，即具有一组结构，例如（entryTick、exitOnStrat、exitOnLoss、exitOnProfit）。由于更好的缓存可预测性，这可能会更快，但我不能肯定地说。为什么我到目前为止还没有测试它是因为检测分析器在某种程度上不适用于我的应用程序的发布二进制文件，而采样分析器在我看来是不可靠的（我已经尝试过英特尔的分析器）。

所以最后的问题是：这个问题可以做得更快吗？使用发布二进制文件进行内存分析的最佳分析器是什么？我在Win7，VS2010上工作。

编辑：非常感谢大家。我试图尽可能地简化我原来的问题，因此造成了混乱。只是为了确保它的可读性 - 目标意味着设想/实现的利润，止损意味着设想/实现的损失。

优化器是蛮力的。所以，我有一些策略设置（例如指标周期等），然后是最小/最大 breakEvenAfter/breakEvenBy，然后是为您提供止损/目标值的公式。这些公式也是优化的对象。因此，我有一个优化结构，如

```
for each in params
{
   calculateEntries()
   for each in beSettings
   {
      precalculateBeData()
      for each in targetFormulaSettings
      {
          precalculateTargetsAndRespectiveExitTicks
          for each in stopFormulaSettings
          {
              precalulcateStopsAndRespectiveExitsTicks
              evaluateExitsAndDetermineImprovement()
          }
       }
    }
} 
```

所以我尽可能地预先计算一些东西，只在需要时计算一些东西。在 30 秒中，计算在 evaluateExitsAndDetermineImprovement() 函数中花费了 25 秒，该函数执行我在原始问题中描述的操作，即选择 min(exitOnPattern、exitOnStop、exitOnTarget)。我需要调用函数 100M 次的原因是因为我有 100M 的所有参数组合。但在最后一个 for 循环中，只有 exitOnStops 数组发生变化。如果有帮助，我可以发布一些代码。我感谢所有的评论！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:39:25.157

我对交易策略了解不多，但我通常会做一些优化。嗯，有很多优化方法。比如，容器类型，使用不同的 min 函数（我认为 boost 的函数比 stl 库中的函数快一些），尝试减少相同的计算等。您还可以通过使用更快的函数来提高速度，或通过重新设计您的算法来进行优化。

对于分析，我在 Win7 x64 下使用 GlowCode，发布版本也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:25:03.140

也许我完全误解了您的系统，但是：
您“预先计算”的是什么以及何时以及**为什么**要进行100M 次？

我不知道它是否会对您有所帮助，但它可能会显着简化您的系统 - 有两种常见的交易策略：（描述是我的而**非官方**的）
1）“定点退出” - 当交易发生时，所有退出点都会被计算出来一次，并定期根据市场条件/价格检查它们。
2）“可变点退出” - 当市场移动时，退出点被重新计算（通常是为了锁定更多利润/减少损失）。

在情况 1) 实际计算只发生一次，所以它应该**非常**快
在情况 2) 计算每次都会发生，但它可以通过许多不同的方式进行优化 - 其中之一是您可以存储您的交易以退出索引点，只有得到和重新计算那些接近实际市场情况。

我不确定您指的是哪个缓存未命中？你数据缓存？CPU缓存？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:04:53.567

所以，经过一番工作，我理解了 Alexandre C 的建议。当我运行缓存未命中分析时，我发现在评估Exits() 函数的 15M 调用中，我只有 30K 缓存未命中，因此不能阻碍该函数的性能通过缓存。因此，我不得不“开始相信”VTune 实际上产生了有效的结果，尽管很奇怪。由于 VTune 输出的分析与当前线程的名称不匹配，我决定启动一个新[线程](https://stackoverflow.com/questions/12826508/understanding-vtune-report)。谢谢大家的意见和建议。

# javascript - 在 javascript 中添加/删除 android OS 中的类

> ID：12724889
> 
> 赞同：0
> 
> 时间：2012-10-04T10:04:27.767
> 
> 标签：javascript, android, cordova

我正在使用 phone-gap(1.3) 进行 android 应用程序开发。如何在 javascript 中添加/删除 android OS 中的类。我试过这个：

```
document.getElementById('delete_a').classList.add('whiteButton');
document.getElementById('delete_a').classList.remove('redButton'); 
```

但它不起作用。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:34:14.597

你试过这个吗：

```
document.getElementById('delete_a').className = "whiteButton"; 
```

参考[这里](https://stackoverflow.com/questions/195951/change-an-elements-css-class-with-javascript)

# android - Android AndEngine：sprite.detachSelf() 不会删除精灵

> ID：12724893
> 
> 赞同：5
> 
> 时间：2012-10-04T10:04:47.430
> 
> 标签：android, andengine

我正在制作小气球游戏。气球随机弹出并在一段时间后消失。当我点击它们时，我想让它们消失并显示 +1 而不是气球。当我点击气球时，我想拆下气球精灵。我的问题是当我在代码中调用 sprite.detachSelf() 时，精灵只是消失了，但实际上精灵并没有被删除。它只会变得不可见。当我再次单击该位置时，气球会出现，即使在气球消失后它也会显示+1。这意味着我认为气球没有正确分离。

这是我的代码：

```
@Override
protected Scene onCreateScene() {

    //this.mEngine.registerUpdateHandler(new FPSLogger());
    scene = new Scene();

    backgroundSprite = new Sprite(0, 0, this.mBackgroundTextureRegion,
            getVertexBufferObjectManager());
    backgroundSprite.setSize(CAMERA_WIDTH, CAMERA_HEIGHT);
    scene.attachChild(backgroundSprite);
    scene.unregisterTouchArea(backgroundSprite);

    text = new Text(0, 0, font, "Score : 00",
            getVertexBufferObjectManager());
    scene.attachChild(text);

    textTime = new Text(displayMetrics.widthPixels - 220, 0, font,
            "00 : 60", getVertexBufferObjectManager());
    scene.attachChild(textTime);

    timer = new TimerClock(1, new TimerClock.ITimerCallback() {
        TimerClock t = timer;
        public void onTick() {
            System.out.println("timer inside");
            if (time > 0) {
                time = time - 1;
                System.out.println("timer inside : " + time);
                scene.detachChild(textTime);
                textTime = new Text(displayMetrics.widthPixels - 220, 0,
                        font, "00 : " + time,
                        getVertexBufferObjectManager());
                if (time < 10) {
                    textTime.setColor(1, 0, 0);
                }
                scene.attachChild(textTime);
                deleteSpriteSpawnTimeHandler(sprite);

            }
            else{
                scene.unregisterUpdateHandler(this.t);
            }

        }
    });
    this.mEngine.registerUpdateHandler(timer);

    createSpriteSpawnTimeHandler();
    return scene;
}

private void deleteSpriteSpawnTimeHandler(final IEntity ball) {
    TimerHandler spriteTimerHandler1;
    final Engine e = mEngine;
    this.getEngine().registerUpdateHandler(
            spriteTimerHandler1 = new TimerHandler(0.5f, true,
                    new ITimerCallback() {
                        @Override
                        public void onTimePassed(
                                final TimerHandler spriteTimerHandler1) {
                            spriteTimerHandler1.reset();

                            deleteSprite(ball);
                        }
                    }));
}

private void gameOverSpawnTimeHandler() {
    TimerHandler spriteTimerHandler1;
    final Engine e = mEngine;
    this.getEngine().registerUpdateHandler(
            spriteTimerHandler1 = new TimerHandler(60, true,
                    new ITimerCallback() {

                        @Override
                        public void onTimePassed(
                                final TimerHandler spriteTimerHandler1) {
                            spriteTimerHandler1.reset();

                            timeDue = 0;
                            scene.detachChild(textComment);
                            textComment = new Text(CAMERA_WIDTH / 2 - 100,
                                    CAMERA_HEIGHT / 2, font,
                                    "Game Over...!!!",
                                    getVertexBufferObjectManager());
                            textComment.setColor(1.0f, 0.0f, 0.0f);
                            scene.attachChild(textComment);

                            SharedPreferences myPrefs = getApplicationContext().getSharedPreferences("myPrefs",
                                            MODE_WORLD_READABLE);
                            SharedPreferences.Editor prefsEditor = myPrefs.edit();

                            String score1 = myPrefs.getString("SCORE1", "0");
                            String score2 = myPrefs.getString("SCORE2", "0");

                            int scoreInt1 = Integer.parseInt(score1);
                            int scoreInt2 = Integer.parseInt(score2);

                            System.out.println("session in" + score1 + " "
                                    + score2);
                            currScore = totalScore;

                            if (currScore > scoreInt1 && currScore > scoreInt2) {
                                prefsEditor.clear();
                                prefsEditor.commit();
                                prefsEditor.putString("SCORE1", String.valueOf(currScore));
                                prefsEditor.putString("SCORE2", String.valueOf(scoreInt1));
                                prefsEditor.commit();
                            } else if (currScore < scoreInt1 && currScore > scoreInt2) {
                                prefsEditor.clear();
                                prefsEditor.commit();
                                prefsEditor.putString("SCORE1", String.valueOf(scoreInt1));
                                prefsEditor.putString("SCORE2", String.valueOf(currScore));
                                prefsEditor.commit();
                            } else {

                            }

                        }
                    }));
}

private void createSpriteSpawnTimeHandler() {
    TimerHandler spriteTimerHandler;

    final Engine e = mEngine;
    this.getEngine().registerUpdateHandler(
            spriteTimerHandler = new TimerHandler(0.75f, true,
                    new ITimerCallback() {
                        @Override
                        public void onTimePassed(
                                final TimerHandler spriteTimerHandler) {
                            spriteTimerHandler.reset();

//                              scene.detachChild(backgroundSprite);
//                              scene.attachChild(backgroundSprite);

                            // Random Position Generator
                            final float xPos = MathUtils.random(50.0f,
                                    (CAMERA_WIDTH - 50.0f));
                            final float yPos = MathUtils.random(75.0f,
                                    (CAMERA_HEIGHT - 75.0f));
                            gameOverSpawnTimeHandler();
                            if (timeDue > 0) {
                                createSprite(xPos, yPos);
                            }else{
                                //scene.unregisterUpdateHandler(spriteTimerHandler);
                            }
                        }
                    }));
}

private void createSpriteTextSpawnTimeHandler() {
    TimerHandler spriteTimerHandler;

    final Engine e = mEngine;
    this.getEngine().registerUpdateHandler(
            spriteTimerHandler = new TimerHandler(mEffectSpawnDelay, true,
                    new ITimerCallback() {
                        @Override
                        public void onTimePassed(
                                final TimerHandler spriteTimerHandler) {
                            spriteTimerHandler.reset();

                            if (totalScore > 50 && totalScore < 60) {
                                textComment = new Text(150, 100, font,
                                        "Ohhhh...you are doing good.",
                                        getVertexBufferObjectManager());
                                textComment.setColor(1.0f, 0.0f, 0.0f);
                                scene.attachChild(textComment);
                            }
                            deleteSpriteSpawnTimeHandler(textComment);

                            // e.getScene().detachChild(backgroundSprite);
                            // e.getScene().attachChild(backgroundSprite);
                        }
                    }));
}

private void createSprite(final float pX, final float pY) {

    sprite = new Sprite(pX, pY, this.mrball, getVertexBufferObjectManager()) {
        Engine e = mEngine;
        TextureRegion gball = mgball;
        float x = pX;
        float y = pY;
        private int score = totalScore;
        private Text textComment;;

        @Override
        public boolean onAreaTouched(
                org.andengine.input.touch.TouchEvent pSceneTouchEvent,
                float pTouchAreaLocalX, float pTouchAreaLocalY) {

            if (pSceneTouchEvent.getAction() == TouchEvent.ACTION_DOWN) {
                this.e.getScene().detachChild(this);
                if (timeDue > 0) {
                    mBrushDrawingSound.play();
                    totalScore = totalScore + 1;
                    String score = "Score : " + totalScore;
                    scene.detachChild(text);
                    text = new Text(0, 0, font, score,
                            getVertexBufferObjectManager());
                    scene.attachChild(text);

                    //sprite.detachSelf();
                    createSpriteTextSpawnTimeHandler();

                    textScorePlus = new Text(x, y, font, "+1",
                            getVertexBufferObjectManager());
                    scene.attachChild(textScorePlus);
                    scene.unregisterTouchArea(textScorePlus);

                    deleteSpriteSpawnTimeHandler(textScorePlus);
                }
            } else if (pSceneTouchEvent.getAction() == TouchEvent.ACTION_UP) {
            }

            // e.getScene().unregisterTouchArea(sprite);
            return true;
        }
    };
    spriteBalloon.add(sprite);
    sprite.setSize(100, 100);
    sprite.setAlpha(0.8f);
    Random randomGenerator = new Random();
    red = randomGenerator.nextInt(255);
    green = randomGenerator.nextInt(255);
    blue = randomGenerator.nextInt(255);
    sprite.setColor(red, green, blue);
    scene.registerTouchArea(sprite);
    scene.attachChild(sprite);
    deleteSpriteSpawnTimeHandler(sprite);
}

private void deleteSprite(IEntity pBall) {
    IEntity gball = pBall;
    scene.detachChild(gball);;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-05T04:41:08.613

附着时，需要分离；当你`scene.registerTouchArea(sprite)`，你需要`scene.unregisterTouchArea(sprite)`。

# php - 亚马逊云上的 Magento 多站点

> ID：12724900
> 
> 赞同：-2
> 
> 时间：2012-10-04T10:05:11.667
> 
> 标签：php, magento, amazon-web-services

我正在尝试将我们的 Magento 迁移到 Amazon Cloud。

目前我们有这个设置：

```
www.xyz.com (/var/www/vhosts/xyz.com/httpdocs) 
```

这是设置 Magento 的地方：

```
www.abc.com 
```

这是我们的 Wordpress 设置的地方：

```
www.abc.com/store/ 
```

这是一个多商店设置，用于使用代码`xyz.com`调用`index.php`Magento 应用程序。

最初，我想为 Magento 使用 1 个 EC2 实例，为 Wordpress 使用另一个 EC2 实例。然后我会为 2 个实例设置 2 个弹性 IP，然后相应地指向`abc.com`它们`xyz.com`的 EIP。

但是，我想不出一种方法让下面的`/store/`文件夹`abc.com`为 Magento 使用相同的源代码。

有人可以建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T02:51:23.307

我不太确定您的需求，但我建议将 store.abc.com 作为子域 - 这样您可以将 xyz.com 和 store.abc.com 链接到同一个文件夹，并将 abc.com 保留到主 wordpress文件夹。但再次需要更深入地研究设置。我们刚刚将其中一家商店转移到亚马逊 AWS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T23:47:59.390

您唯一的选择是代理。其他所有内容（如 mod_rewrite / Alias）都会进行标头重定向，并将目标地址公开给用户。

然而，Apache 的代理似乎并没有那么复杂。最基本的例子是

ProxyPass /mirror/foo/ [http://backend.example.com/](http://backend.example.com/)

请注意，代理当然会使您的流量翻倍，因为请求的每个字节都必须从远程机器上获取。

来源：[子目录到不同的服务器](https://stackoverflow.com/questions/6019328/sub-directory-to-a-different-server)

# java - 我的代码有什么问题（GWT）

> ID：12724903
> 
> 赞同：1
> 
> 时间：2012-10-04T10:05:19.467
> 
> 标签：java, gwt, compiler-errors

我正在使用 Google Web Toolkit(GWT) 在 Eclipse 上创建一个登录应用程序。该代码检查用户名和密码，如果正确，它将显示 o/p 为欢迎。编译后仍然给我错误。我正在共享代码和错误消息。请帮帮我。

```
 package com.vin.client;
import java.sql.DriverManager;
import java.sql.ResultSet;
import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.dev.generator.ast.Statement;
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.event.dom.client.ClickHandler;
import com.google.gwt.user.client.Window;
import com.google.gwt.user.client.ui.*;

public class HelloWorld implements EntryPoint{
    public void onModuleLoad() {
        Button click=new Button("Click Here");
        Label name=new Label("Enter Name");
        Label passwrd=new Label("Enter Password");
        final TextBox t_name=new TextBox();
        final TextBox t_passwrd=new TextBox();
        click.addClickHandler(new ClickHandler() {
        public void onClick(ClickEvent ev) {
            try {
                String temp_user=t_name.getText();
                String temp_pass=t_passwrd.getText();
                java.sql.Connection con = null;
                Class.forName("org.hsqldb.jdbcDriver");
                con = DriverManager.getConnection("jdbc:hsqldb:hsql://localhost/", "SA", "");
                Statement st=(Statement) con.createStatement();
                ResultSet rs=((java.sql.Statement) st).executeQuery("select username,password from lgfrm");
                String user=rs.getString(1);
                String pass=rs.getString(2);
                if(temp_user.equals(user) && temp_pass.equals(pass)) {
                    Window.alert("Welcome");
                }
                else {
                    Window.alert("Please enter valid details");
                }
        }
        catch (Exception ae) {}
        }
    });
        RootPanel.get().add(name);
        RootPanel.get().add(t_name);
        RootPanel.get().add(passwrd);
        RootPanel.get().add(t_passwrd);
        RootPanel.get().add(click);
    }
    } 
```

错误信息是---------

> 在线程“UnitCacheLoader”java.lang.RuntimeException 中编译模块 com.vin.HelloWorld 异常：无法从 com.google.google.gwt.dev.util.DiskCache.transferFromStream(DiskCache.java:166) 的字节缓存中读取 com.google .gwt.dev.util.DiskCacheToken.readObject(DiskCacheToken.java:87) at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown Source) ......还有更多这样的...... ..**请帮帮我**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:28:26.463

为服务器端尝试以下操作：

**用户服务.java**

```
@RemoteServiceRelativePath("userService")
public interface UserService extends RemoteService {
    String loginUser(String username,String password);
} 
```

**UserServiceAsync.java**

```
public interface UserServiceAsync {
    void loginUser(String username, String password, AsyncCallback<String> callback);
} 
```

**UserServiceImpl.java**

```
public class UserServiceImpl extends RemoteServiceServlet  implements UserService {

        public String loginUser(String username, String password){
            //database interaction
            return "result"; //return success or failure depending upon logic
    }
} 
```

关注[与 GWT 中的服务器通信](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideServerSide)和[服务剖析](https://developers.google.com/web-toolkit/doc/latest/images/AnatomyOfServices.png) ![在此处输入图像描述](../Images/f7ce27348871130e7bdbc15a525c3e5e.png)

**对于客户端：**

```
public class HelloWorld implements EntryPoint{
    //(1) Create the client proxy.
    private UserServiceAsync userService = (UserServiceAsync) GWT.create(UserService.class);
    public void onModuleLoad() {
        Button click=new Button("Click Here");
        Label name=new Label("Enter Name");
        Label passwrd=new Label("Enter Password");
        final TextBox t_name=new TextBox();
        final TextBox t_passwrd=new TextBox();
        click.addClickHandler(new ClickHandler() {
        public void onClick(ClickEvent ev) {
                 String temp_user=t_name.getText();
                 String temp_pass=t_passwrd.getText();   
                 /// (2) Create an asynchronous callback and Make the call
                 userService.loginUser(temp_user, temp_pass, new AsyncCallback<String>() {
                     public void onFailure(Throwable caught) {
                             Window.alert("Please enter valid details");
                      }

                     public void onSuccess(String result) {
                         Window.alert("Welcome");
                     }
                 });//end of service call
       });//end of clickhandler
        RootPanel.get().add(name);
        RootPanel.get().add(t_name);
        RootPanel.get().add(passwrd);
        RootPanel.get().add(t_passwrd);
        RootPanel.get().add(click);
    }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T10:13:17.410

不能将 DB 相关代码放在 Entry point 类中，需要在 click 方法上调用 GWT-RPC。

实际上，这个 EntryPoint 类将由 GWT 处理器编译，它会在输出中创建 javascript，然后在浏览器中运行。所以没有理由你可以在javascript中调用db。

GWT-RPC 是代码驻留在服务器中的异步调用。在这里你可以编写所有的业务逻辑，数据库交互等。

[关联](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideRemoteProcedureCalls)

# git - 如何管理 git 存储库中的多个模块

> ID：12724905
> 
> 赞同：1
> 
> 时间：2012-10-04T10:05:28.500
> 
> 标签：git, version-control, branch

我有一个包含多个模块的项目，其中一些依赖于其他模块，例如：

*   `X`
*   `A, which depends on X`
*   `B, which depends on X`

开发`A`或`B`导致 X 发生许多变化。

我在 git 上有开发分支，我正在开发 A 和 B。

如何管理将 A 或 B 推送到某种稳定的分支？

我的意思是，我的情况如下：

[实际稳定分支版本，之后提交在开发分支]

*   Commit1：更改 A 和 X
*   Commit2：更改 B 和 X
*   Commit3：更改 A 和 X

在提交 3 之后，我希望将 A 推到稳定状态。所以我需要 Commit1:A,X, Commit2:X, Commit3:A,X

有没有办法做到这一点？我不想在其中添加其他存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:53:54.260

您仍然需要一个额外的 repo，即一个“父 repo”，它将记住`A`、`B`和`X`.
这就是**[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)**的用途：`A`，`B`并且`X`将被声明为父 repo 的子模块。

您可以像往常一样推送您的修改（到您选择的分支），但*此外*，您还可以提交并推送父 repo，以记录每个子模块的提交。
有关这种工作方式的更多信息，请参阅“[子模块的真实性质](https://stackoverflow.com/questions/1979167/git-submodule-update/1979194#1979194)”。

# jsf - JSF2 格式日期与相同的 postgres 时间戳列不同

> ID：12724906
> 
> 赞同：1
> 
> 时间：2012-10-04T10:05:29.770
> 
> 标签：jsf, date, jsf-2

在 postgres 9.2 我有一个带有时间戳的列

```
CREATE TABLE pilot
(
  id bigint NOT NULL,
  birthdate timestamp without time zone NOT NULL,
  firstname character varying(50) NOT NULL,
  CONSTRAINT pilot_pkey PRIMARY KEY (id )
) 
```

我直接使用带有 Hibernate 的 java main 插入了一些行：

```
 for (int i = 0; i < 10; i++) {
        Pilot p = new Pilot();
        p.setBirthdate(new Date());
        p.setFirstname("Johnson_" +tabchar[i] );
        em.persist(p);
    } 
```

我的财产看起来像这样：

```
@Temporal(TemporalType.TIMESTAMP)
@Column(name = "birthdate", nullable = false, unique = false)
public java.util.Date getBirthdate() {
    return birthdate;
} 
```

JSF2 插入了一些行并中继到休眠：我正在使用 JSF 2.1.13

```
 <h:form id="formPilot">
        <h:panelGrid columns="2">
            <h:outputLabel value="#{appMsg['pilot.firstname']}" />
            <h:inputText id="firstname" label="#{appMsg['pilot.firstname']}" value="#{pilotHolder.pilot.firstname}"
                required="true" />

            <h:outputLabel value="#{appMsg['pilot.birthdate']}" />
            <h:inputText id="birthdate" label="#{appMsg['pilot.birthdate']}" value="#{pilotHolder.pilot.birthdate}"
                required="true">
                <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" timeZone="GMT+1"/>
            </h:inputText>

        </h:panelGrid>
        <h:commandButton id="merge" action="#{pilotAction.doMerge}"
            value="#{pilotHolder.pilot.id ne null ? appMsg['pilot.update'] : appMsg['pilot.create']}" />
    </h:form> 
```

在数据库中一切正常，所有日期都正确（小时数正常）

但是，当我显示 Pilot 列表并在页面上显示它们时，Hibernate 在没有 JSF 的情况下插入的日期有一个少 1 小时的错误，而不是我用 JSF 插入的时间戳？

```
 <h:column>
            <f:facet name="header">
                <h:outputText value="#{appMsg['pilot.birthdate']}" />
            </f:facet>
            <h:outputText value="#{p.birthdate}" >
               <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" timeZone="GMT+1"/>
            </h:outputText>
        </h:column> 
```

奇怪的是，我在使用 DBvisualizer 的数据库中没有任何区别，它们看起来都很相似，如果我在 Hibernate 获取它们之后打印日期，一切都很好。

如果我仔细查看 Hibernate 插入并取回的日期，它们包含一个字段 cdate 不是 Gregorian$Date 类型的空值。由 JSF 插入并取回的日期具有 cdate=null。

为什么？为什么 JSF2 对它们的解释不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T13:23:19.810

我认为这与**DAYLIGHT SAVING TIME**相关

试试这个`web.xml`

```
<context-param>
    <param-name>javax.faces.DATETIMECONVERTER_DEFAULT_TIMEZONE_IS_SYSTEM_TIMEZONE</param-name>
    <param-value>true</param-value>
</context-param> 
```

或者你可以告诉使用`f:dateTimeConverter`哪个`timeZone`。只需使用`Time Zone`不使用**夏令时**的。

# java - 为什么我不能返回我的数组的值？

> ID：12724913
> 
> 赞同：1
> 
> 时间：2012-10-04T10:05:47.500
> 
> 标签：java, arrays, methods

我对 Java 很陌生，所以可能对此有一个简单的解释，但无论如何我可能会觉得很愚蠢。

我正在尝试使用一种方法来读取文件，从该文件数据中填充一个二维数组，然后返回填充的数组，以便我可以在我的主类中使用它并从那里打印出数组内容。

这是我到目前为止所得到的：

```
public class ScoreProcessor { 
    static public readFile() throws IOException {
        File filedata = new File("src/JavaApp2/Data.txt");        
        Scanner file = new Scanner (filedata);        
        int row = 0, col = 0;            
        String[][] scores = new String[8][5];

        while (file.hasNextInt()){               
            Scanner readfile = new Scanner (filedata);
            readfile.nextLine();
            readfile.useDelimiter(",");

            while (readfile.hasNext(",")){
                String line = readfile.next();
                scores[row][col] = line; 
                col++;  
            }            
            row++;  
            col=0;
        }
        return scores;
    }    
} 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:12:48.013

正如 Peter Lawrey 所说，您需要将 rtuerntype String[][] 添加到您的方法头中，如下所示：

```
static public String[][] readFile() throws IOException {
   ... 
```

此外，如果您事先不知道大小，则不应使用数组。在这种情况下使用列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T10:10:06.883

```
static public String[][] readFile() throws IOException { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T10:12:03.723

关于返回在方法中声明您的返回类型。

```
 public static String[][] readFile() throws IOException { 
```

关于您可以使用的打印

```
Arrays.deepToString(scores); 
```

# android - 用于在 Google 地图中绘制形状的 Android 叠加层

> ID：12724915
> 
> 赞同：0
> 
> 时间：2012-10-04T10:05:53.973
> 
> 标签：android, google-maps, overlay, shape, itemizedoverlay

我想为一个城市的不同区域绘制几个形状（超过 40 个），我不确定什么是最佳选择，实际上我正在考虑使用以下方法绘制形状：

*   逐项叠加。
*   叠加层：所有形状的叠加层。
*   叠加层：每个形状一个叠加层。

你怎么看？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:29:16.113

我没有使用 ItemizedOverlay，所以不能说什么，但是如果您要在 Overlay 和 Overlays 之间进行选择 - 为所有项目使用一个 Overlay。

一个叠加层是一个画布和一个绘制方法。每个对象的一个​​叠加层是多个画布和绘图方法。这是没有意义的。

仅当您创建可见或不可见的“图层”（作为一个整体图层）时，您才应该使用不同的叠加层，例如 Google 卫星或 Google 街景。

# javascript - 在javascript中访问类外的函数

> ID：12724916
> 
> 赞同：0
> 
> 时间：2012-10-04T10:05:56.487
> 
> 标签：javascript, jquery, oop

我的班级结构是这样的：

```
var jpTWUI = function(id, connection){
    this.id = id;
    this.muteButton = "#mute";
    this.hangupButton = "#hang";
    this.transferButton = "#trans";
    this.parentElement = jQuery('#timerCon');
    this.connection = connection;

    this.interval = "";

    this.createElements();
    this.addEvents(); 
};

jpTWUI.prototype = { 
    createElements: function(){ ... }, 
    addEvents: function(){...}, 
    startTimer: function(){...}
} 
```

现在我创建了一个对象并将类称为这样的

```
var callHandler = new jpTWUI('timerCon', connection);
callHandler.startTimer(); 
```

但问题是该方法`startTimer`具有`setInterval`以分钟和秒显示持续时间的功能。

我想实现另一种方法`stopTimer`，比如停止那个`startTimer`间隔，我知道我必须用户`window.clearInterval`。但是当我在同一个类中实现该函数`stopTimer`时，我不知道如何使用该类访问该方法，例如：

```
var callHandler = new jpTWUI('timerCon', device);
callHandler.stopTimer(); 
```

希望你们理解我想要实现的目标，这是我第一次在 javascript 中使用该类。

请指导我这种方法是否正确？或者我如何使它正确..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:12:56.127

修改后的代码。将 setInterval 的返回值保存在 setIntervalConst 中并使用它 clearInterval。您应该在调用 startTimer 和 stopTimer 时使用相同的 jpTWUI 实例。

```
var callHandler = new jpTWUI('timerCon', connection);
callHandler.startTimer();

///var callHandler = new jpTWUI('timerCon', device); // remove this line if you want access same instance of jpTWUI.
callHandler.stopTimer(); 
```

.

```
jpTWUI.prototype = { 
    createElements: function(){ ... }, 
    addEvents: function(){...}, 
    setIntervalConst: 0,
    startTimer: function(){ this.setIntervalConst = setInterval(....) ....},
    stoptTimer: function(){ clearInterval(this.setIntervalConst ); ....}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:13:54.230

`setInterval`返回一个标识符，您可以将其传递`clearInterval`给停止计时器，因此您可以执行以下操作：

```
jpTWUI.prototype = { 
    …
    startTimer: function(){
        this.timer = setInterval(function(){
            console.log("interval")
        },2000) // every 2 seconds
    },
    stopTimer: function(){
        if(this.timer){
            clearInterval(this.timer);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T10:12:14.443

创建时获取 id 并清除它。

```
this.interval = setInterval(function(){..}, 1000)
clearInterval(this.interval ); 
```

这对你的概率有帮助吗？

# solr - 获取 solr 中的相关性值并乘以一个字段并以此进行排序

> ID：12724918
> 
> 赞同：0
> 
> 时间：2012-10-04T10:05:58.530
> 
> 标签：solr

是否有可能获得相关性分数并与字段中的某个值相乘并使用该字段进行排序

说返回文档的相关性是 0.8，我有字段分数，它有 3 我需要与该字段相乘 0.8*3=2.4 所以我需要用那个最高字段进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:49:50.217

如果您使用的是[ExtendedDisMax](http://wiki.apache.org/solr/ExtendedDisMax)，那么您可以使用[此处](http://wiki.apache.org/solr/ExtendedDisMax#boost_.28Boost_Function.2C_multiplicative.29)`boost`解释的参数。

# javascript - CRM 2011“此页面正在访问不受其控制的信息”

> ID：12724919
> 
> 赞同：1
> 
> 时间：2012-10-04T10:05:58.903
> 
> 标签：javascript, dynamics-crm-2011

我在 CRM 表单上有以下 javascript，用于获取主题实体记录的本地副本：

```
function refreshSubjects() {
    sgc_subjectCache = [];
    var options = "$select=Title,SubjectId,ParentSubject";
    SDK.REST.retrieveMultipleRecords("Subject", options, refreshSubjectsCallback, function(error) {
        alert( error.message );
    }, refreshSubjectsComplete);
} 
```

但这会导致烦人的“此页面正在访问不受其控制的信息”对话。我不确定为什么，因为没有跨域发布。

有没有办法在不影响浏览器安全的情况下抑制这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:15:19.773

我找到了答案：[http ://social.microsoft.com/Forums/en-IE/crmdevelopment/thread/6e050347-e584-47c2-aab1-8fdf74e8ef1e](http://social.microsoft.com/Forums/en-IE/crmdevelopment/thread/6e050347-e584-47c2-aab1-8fdf74e8ef1e)

基本上，数据库中的域是正确的，但我在 Web 浏览器中使用的是“localhost”，而 SDK 使用的是 FQDN。

通过浏览器中的 FQDN 调用站点消除了问题！

# c# - 使用 linq 从表 1 中获取其 id 在表 2 中的名称

> ID：12724921
> 
> 赞同：0
> 
> 时间：2012-10-04T10:06:04.187
> 
> 标签：c#, asp.net, xml, linq-to-sql

我想获取某些属性（会话、交易、学生等）的详细信息，并且我使用 linq 在 ProgressCard 表中有他们的 ID。并将结果数据保存在 XML 中

我正在这样做

```
 public List<ShowProgressCard> GetCardListToShow()
    {
        try
        {
            List<ShowProgressCard> CardList = new List<ShowProgressCard>();
            using (ProgressCardLINQDataContext c = new ProgressCardLINQDataContext())
            {
                CardList = (from card in c.GetTable<T_PROGRESSCARD>()
                            where card.RecordStatus.Equals(RecordStatus.Active)
                            select new ShowProgressCard
                            {
                                Session=(from session in c.T_SESSIONs
                                         where session.Id.Equals(card.SessionId)
                                         select session.Name).ToString(),
                                Trade=(from trade in c.T_TRADEs
                                       where trade.Id.Equals(card.TradeId)
                                       select trade.Name).ToString(),
                                Student=(from student in c.T_STUDENTs
                                         where student.Id.Equals(card.StudentId)
                                         select student.Name).ToString(),
                                Test=(from test in c.T_TESTs
                                      where test.Id.Equals(card.TestId)
                                      select test.Name).ToString(),
                                MaxMarks = (from test in c.T_TESTs
                                            where test.Id.Equals(card.TestId)
                                            select test.MaxMarks).ToString(),
                                MarksObtain=card.MarksObtain.ToString(),
                                Percentage=card.Percentage.ToString("N2")
                            }).ToList<ShowProgressCard>();
            }
            return CardList;
        }
        catch
        {
            return new List<ShowProgressCard>();
        }
    } 
```

但给了我意想不到的价值..

```
<ShowProgressCard>
<Session>System.Collections.Generic.List`1[System.String]</Session>
<Trade>System.Collections.Generic.List`1[System.String]</Trade>
<Student>System.Collections.Generic.List`1[System.String]</Student>
<Test>System.Collections.Generic.List`1[System.String]</Test>
<MaxMarks>System.Collections.Generic.List`1[System.Int32]</MaxMarks>
<MarksObtain>123</MarksObtain>
<Percentage>0.000000000000000e+000</Percentage>
</ShowProgressCard> 
```

请帮助我跟踪错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:10:26.333

```
 Session=(from session in c.T_SESSIONs
                                     where session.Id.Equals(card.SessionId)
                                     select session.Name).ToString(),
                            Trade=(from trade in c.T_TRADEs
                                   where trade.Id.Equals(card.TradeId)
                                   select trade.Name).ToString(),
                            Student=(from student in c.T_STUDENTs
                                     where student.Id.Equals(card.StudentId)
                                     select student.Name).ToString(),
                            Test=(from test in c.T_TESTs
                                  where test.Id.Equals(card.TestId)
                                  select test.Name).ToString(),
                            MaxMarks = (from test in c.T_TESTs
                                        where test.Id.Equals(card.TestId)
                                        select test.MaxMarks).ToString(), 
```

此块将只返回您的值的 IEnumerables。在 ToString() 之前添加 Single() 或 First()：

```
MaxMarks = (from test in c.T_TESTs where test.Id.Equals(card.TestId) select test.MaxMarks).Single().ToString(), 
```

# php - 使用正则表达式删除 html 标签

> ID：12724922
> 
> 赞同：-1
> 
> 时间：2012-10-04T10:06:06.303
> 
> 标签：php, regex, preg-replace, preg-match-all

> **可能重复：**
> [PHP 清理粘贴的 Microsoft 输入](https://stackoverflow.com/questions/379342/php-to-clean-up-pasted-microsoft-input)

嗨帮助使用正则表达式或任何可以删除的 php 函数

```
<o:p></o:p> or <o:p>&nbsp;</o:p> or <o:p> </o:p> 
```

从我的字符串

例子

```
<p class=MsoNormal>Category: Paul :asadad<o:p></o:p></p><p class=MsoNormal>Car: Toyota <o:p> </o:p></p><p class=MsoNormal>Sports: Soccer<o:p>&nbsp;</o:p></p> 
```

我需要它

```
<p class=MsoNormal>Category: Paul :asadad</p><p class=MsoNormal>Car: Toyota 1</p><p class=MsoNormal>Sports: Soccer</p> 
```

非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:15:13.193

```
<?php
   $str =  '<p class=MsoNormal>Category: Paul :asadad<o:p></o:p></p><p class=MsoNormal>Vessel Name: Vessel 1<o:p> </o:p></p><p class=MsoNormal>Sub Category: asdasdad<o:p>&nbsp;</o:p></p>';
   $pattern = '#(<o:p>\s*[\&nbsp;]*\s*<\/o:p>)#';
   $str = preg_replace($pattern, '', $str);
   echo $str; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:21:31.237

如果您使用的是 PHP，为什么不直接使用[strip_tags() 函数](http://php.net/manual/en/function.strip-tags.php)呢？我会试一试，你甚至可以指定标签，你想留在文本中。请参阅链接查看更多细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T10:59:56.017

```
preg_replace('#<o:p>(\s|&nbsp;)*</o:p>#', '', $text); 
```

# jquery - Selecting in groups of 3

> ID：12724930
> 
> 赞同：4
> 
> 时间：2012-10-04T10:06:39.060
> 
> 标签：jquery, css-selectors, grouping

I am trying to select `<li>` in groups of 3, currently I am using `:gt` and `:lt` like this

```
 $('.events_list li:lt(7):gt(3)').css('display', 'block'); 
```

This is ok but seems like there may be a better way. I just want to click a button and select the next 3 `<li>`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T10:16:07.597

Try

```
var triplet = 0;

$('button').click(function(){
    $('.events_list li')
        .hide() // hide the ones that are visible
        .filter(function(i){
            return i >= triplet*3 && i < (triplet+1)*3; // filter the next 3
        })
        .show(); // and show them

    triplet++;
}); 
```

**demo at** [http://jsfiddle.net/PyEhU/](http://jsfiddle.net/PyEhU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:13:39.953

you can try also [nextUntil](http://api.jquery.com/nextUntil/):

```
$('.events_list li:eq(3)').nextUntil('.events_list li:eq(7)').css('display', 'block'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T10:16:34.643

```
jQuery("ul li").filter(function(index,el){return index>3 && index<7}).css('display', 'block'); 
```

Try this.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-24T15:16:06.850

[Gaby's answer](https://stackoverflow.com/a/12725082/932484) worked well for me (and I would have upvoted it if I could), but *my* use case required a loop, and the one issue with $.filter is that it goes over all the elements in every loop pass. So I used [slice](http://api.jquery.com/slice/) instead, which allows you to select elements out of a set. It also makes the code slightly simpler. As an added bonus, I moved the selector out of the function, as I assume the list itself does not change and therefore there's no need to select it again and again.

This is my version, based on Gaby's:

```
var triplet = 0;
var $elements = $('.events_list li');

$('button').click(function(){
    $elements
        .hide() // hide the ones that are visible
        .slice( triplet*3, (triplet+1)*3)
        .show(); // and show them

    triplet++;
}); 
```

Demo at [http://jsfiddle.net/sf3N9/](http://jsfiddle.net/sf3N9/)

# pdf - StackOverflowError 应用 Alfresco Rule 将 Word Doc 转换为 PDF

> ID：12724931
> 
> 赞同：3
> 
> 时间：2012-10-04T10:06:38.780
> 
> 标签：pdf, alfresco, openoffice.org, libreoffice

我正在尝试针对以下内容：

使用 WebDav 或抛出**Alfresco (Community): Current version 3.4.0 (d 3370) schema 4113** Admin interface，我正在尝试将 Microsoft Office 2003/2007 或 OpenOffice/LibreOffice 文档上传到 Alfresco 存储库并带有与相关节点关联的规则，将文档转换为**PDF**格式。

Alfresco 实例在**WnXP上运行，LibreOffice 在****CentOS** 6.4上作为无头实例运行

我按照此处引用的链接将 OpenOffice 支持添加到我的 Alfresco 实例，但实际上似乎不起作用。当规则试图启动时，我有一个例外。

**链接：**

```
http://wiki.alfresco.com/wiki/Setting_up_OpenOffice_for_Alfresco 
```

**例外 ：**

```
ERROR;04/10/2012 16:48:55;;;[Utils];Failed to create content due to error: 09040000 Exception in Transaction.
org.alfresco.error.AlfrescoRuntimeException: 09040000 Exception in Transaction.
at org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:466)
at org.alfresco.web.bean.dialog.BaseDialogBean.finish(BaseDialogBean.java:124)
at org.alfresco.web.bean.dialog.DialogManager.finish(DialogManager.java:528)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.myfaces.el.MethodBindingImpl.invoke(MethodBindingImpl.java:132)
at org.apache.myfaces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:61)
at javax.faces.component.UICommand.broadcast(UICommand.java:109)
at javax.faces.component.UIViewRoot._broadcastForPhase(UIViewRoot.java:97)
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:171)
at org.apache.myfaces.lifecycle.InvokeApplicationExecutor.execute(InvokeApplicationExecutor.java:32)
at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:95)
at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:70)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:139)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.alfresco.web.app.servlet.AuthenticationFilter.doFilter(AuthenticationFilter.java:104)
at sun.reflect.GeneratedMethodAccessor416.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.alfresco.repo.management.subsystems.ChainingSubsystemProxyFactory$1.invoke(ChainingSubsystemProxyFactory.java:116)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy232.doFilter(Unknown Source)
at org.alfresco.repo.web.filter.beans.BeanProxyFilter.doFilter(BeanProxyFilter.java:82)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.alfresco.repo.web.filter.beans.NullFilter.doFilter(NullFilter.java:68)
at sun.reflect.GeneratedMethodAccessor416.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.alfresco.repo.management.subsystems.ChainingSubsystemProxyFactory$1.invoke(ChainingSubsystemProxyFactory.java:116)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)Caused by: java.lang.StackOverflowError
at org.springframework.beans.factory.support.AbstractBeanFactory.transformedBeanName(AbstractBeanFactory.java:951)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:229)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:265)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:189)
at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1004)
at org.alfresco.repo.management.subsystems.SubsystemProxyFactory$1.invoke(SubsystemProxyFactory.java:69)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy98.isConnected(Unknown Source) 
```

**我的配置：** *tomcat/shared/classes/alfresco-global.properties*

```
module.id=org.alfresco.remoteOpenOffice
module.version=0.1
module.title=Remote OpenOffice
module.repo.version.min=2.2
ooo.host=192.168.14.67
ooo.port=8100
ooo.enabled=true 
```

*tomcat/shared/classes/alfresco/extension/remote-openoffice-context.xml*

```
<bean id="openOfficeConnection" class="net.sf.jooreports.openoffice.connection.SocketOpenOfficeConnection">
<constructor-arg type="java.lang.String" value="192.168.14.67"/>
<constructor-arg type="int" value="8100"/>
 </bean>
 <bean id="transformer.OpenOffice" class="org.alfresco.repo.content.transform.RemoteOpenOfficeContentTransformer" parent="baseContentTransformer" >
<property name="connection">
    <ref bean="openOfficeConnection" />
</property>
<property name="documentFormatsConfiguration">
    <value>classpath:alfresco/mimetype/openoffice-document-formats.xml</value>
</property>
 </bean> 
```

并添加了*tomcat/shared/classes/alfresco/mimetype/openoffice-document-formats.xml*

Alfresco 主机和 openOffice 主机之间没有防火墙

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:31:09.537

`StackOverflowError`通常是由无限（或至少过度）递归引起的。既然你提到了一个规则，那么你的规则的结果（例如修改或创建一个节点）是否有可能再次触发规则，导致无穷无尽的序列？

您使用的规则到底是什么？例如，它会触发任何 mimetype，还是仅触发 Word 文档？

该文件夹上只有一个规则还是多个？

# ruby-on-rails - 让指南针混合组件与 Rails 一起工作

> ID：12724932
> 
> 赞同：1
> 
> 时间：2012-10-04T10:06:40.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, compass-sass, sass

我正在尝试让 scss 渐变从[colorzilla 的方便渐变编辑器](http://www.colorzilla.com/gradient-editor/)中工作。将该 scss 代码添加到 assets/stylesheets/header.css.scss 时出现错误：

> 未定义的混合“过滤梯度”。（在 /Users/me/code/app/assets/stylesheets/header.css.scss 中）

所以我将其添加`@import "compass/css3/images";`到我的 header.css.scss 文件中：

```
@import "compass/css3/images";

header address {
  background-color: #c9de96;
  @include filter-gradient(#c9de96, #398235, vertical);
  $experimental-support-for-svg: true;
  @include background-image(linear-gradient(top,  #c9de96 0%,#8ab66b 44%,#398235 100%));
} 
```

现在我得到这个错误：

> 找不到或无法读取要导入的文件：compass/css3/images。加载路径：Sass::Rails::Importer(/Users/me/code/app/assets/stylesheets/header.css.scss) （在/Users/me/code/app/assets/stylesheets/header.css.scss )

我必须将 compass-rails 添加到我的 Gemfile 中：

```
group :assets do
  gem 'sass-rails'
  gem 'coffee-rails'
  gem 'compass-rails'
  gem 'uglifier'
end 
```

如何让这些线性渐变与 scss 和 rails 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:49:18.077

很生气在这上面浪费时间。我只需要重新启动网络服务器！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T11:04:41.247

I am posting this answer just in case someone runs into a similar problem like I did using compass 0.12.2\. In your .scss file include this:

```
@import "compass"; 
```

# php - 盐和密码

> ID：12724935
> 
> 赞同：23
> 
> 时间：2012-10-04T10:06:53.900
> 
> 标签：php, passwords, salt

> **可能重复：**
> [PHP 密码的安全哈希和盐](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)

**警告**不要使用 MD5 作为密码，使用 bcrypt 之类的替代方法

* * *

对于我的密码，我应该像这样使用盐吗（盐对每个用户都是唯一的，而不是直接与密码一起存储）......

```
$salt = sha1(md5("coders gonna code"));
$password = md5($salt.$password); 
```

或者如果我只是使用它可以吗：

```
$password = md5($password); 
```

因为如果我使用了salt，即使用户编造了一个像密码这样的错误密码也没关系，因为salt（在这种情况下）将是`145ac26ff093c6e1317f7d5fb4c9fd11c77be975`这样的密码条目将是`145ac26ff093c6e1317f7d5fb4c9fd11c77be975password`根据`http://howsecureismypassword.net/`它需要3个octodecillion年才能破解....所以意见？或者我应该更糟然后去

```
$password = md5($salt.$password.md5($salt)); 
```

如果这个人已经走得足够远，可以得到盐哈希，还有什么可以阻止然后继续前进吗？< 更多的声明这最后一个密码

* * *

对于每个说我应该为每个用户做的人......我知道，这只是一个例子。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-04T10:10:00.933

您完全错误地使用了盐。盐应该是不可预测的；你的盐正好相反（固定）。由于固定哈希绝对没有任何好处，因此您似乎还指望攻击者不知道盐。这是通过默默无闻来定义安全性，这是另一种不好的做法。

你应该做的是：

1.  使用不可预测的合理长度的字符串作为盐。从池中随机生成 8 个字符的字符串，例如小写/大写字母和数字都可以。
2.  为每个用户使用不同的盐，并在他们每次更改密码时更改它。
3.  从 MD5（被认为是损坏的）转移到另一个更适合此应用程序的哈希函数。SHA-1 更好，因为它不被认为是损坏的；`bcrypt`是最好的，因为它具有可配置的负载因子。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-04T10:11:37.750

您应该更改盐，使其特定于每个用户，而不是系统范围的常量。这将使针对您的密码哈希的彩虹表攻击更加不方便。

在Troy Hunt的这篇[文章](http://www.troyhunt.com/2012/06/our-password-hashing-has-no-clothes.html)中，有一篇很好的关于盐渍演变的文章。

**编辑**

`$salt`每个密码记录都有一些独特的东西，这增加了很多熵。这通常是一个随机的字节序列，与用户帐户一起存储。

散列传统上是在`salt`+的连接上完成的`password`。

```
$passwordHash = hash($salt.$password); 
```

正如其他人所说，不要使用 MD5 进行散列。它被打破。

[不建议](http://crackstation.net/hashing-security.htm#ineffective)在散列之前对密码或盐应用额外的专有算法。相反，请查看诸如[PBKDF2](https://en.wikipedia.org/wiki/PBKDF2)之类的行业实力解决方案，除了盐渍之外，它还需要多次（通常 > 10k）重复迭代，这将进一步减慢攻击者的速度。

如果您采用[OWASP 指南](https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet)，则应定期增加执行的哈希数（以抵消摩尔定律）。每个用户还应该保留哈希的数量，这意味着您需要存储哈希密码、盐和迭代次数的三元组。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-04T10:12:07.610

1.  不要`MD5`用作您的散列算法，使用更安全的东西，例如`SHA256`或什至`bcrypt`.

2.  一定要对密码加盐，如果有人确实进入了您的数据库，他们将无法反转常见哈希的密码或使用彩虹攻击等技术。

[http://michaelwright.me/php-password-storage](http://michaelwright.me/php-password-storage)

[http://en.wikipedia.org/wiki/Bcrypt](http://en.wikipedia.org/wiki/Bcrypt)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-04T10:14:18.470

首先，您永远不应该直接存储您已经识别的 md5。PHP 5.5 将带来在 1 行中轻松创建和验证密码的新方法，在此之前，您可以使用[https://github.com/ircmaxell/password_compat](https://github.com/ircmaxell/password_compat)（向前兼容）来生成和验证安全密码哈希。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-04T10:12:28.093

我认为盐在这里的理解不正确。盐的想法是每个哈希应该是唯一的。原因是当您创建散列时，一些不同的字符串可能具有相同的散列。

在您的示例中，您也在对密码进行哈希处理，因此它看起来不会像：`145ac26ff093c6e1317f7d5fb4c9fd11c77be975password`

PS使用bcrypt。它更可靠。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-04T10:12:11.663

盐是完全随机的，与您存储哈希的实际密码无关。

你真正应该做的是生成一个完全随机的盐，然后做

```
$password = md5($salt.$password); 
```

并存储用户的用户名、盐和哈希密码。

# ruby-on-rails - Nginx 和 Mongrel 的区别？

> ID：12724943
> 
> 赞同：12
> 
> 时间：2012-10-04T10:07:40.510
> 
> 标签：ruby-on-rails, nginx, mongrel

我经常读到 Nginx 和 Mongrel 一起使用。有人可以向我解释它们有何不同吗？为什么需要 Mongrel？为什么不建议让 Nginx 直接与许多 Rails 服务器通信？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-04T10:41:47.933

两者都是 Web 服务器，但它们的关注点不同：

*   Mongrel 基本上是一个提供 HTTP 接口的 ruby​​ 应用程序服务器。它只做一件事，接受一个请求，将它传递给你的 ruby​​ 代码，然后在 http 中返回答案。它不处理并发性或任何与性能相关的功能。一个 mongrel 意味着有一个 ruby​​ 进程可以处理请求。
*   Nginx 是一个功能齐全的 Web 服务器，旨在实现性能。它可以在静态文件上提供高性能，并且不能直接处理 Ruby、Python 或任何其他语言。它依靠 FastGCI 或代理到其他应用程序服务器来做到这一点。

需要明确的是，你的 rails 应用程序本身不能直接使用，它需要你可以称之为容器的东西（我建议你阅读一些关于[http://rack.github.com/](http://rack.github.com/)的内容），在这种情况下是 Mongrel。当您运行 rails 控制台时，它通常是 webrick，这是我们在 Ruby 中拥有的最基本的网络“应用程序”服务器（它是标准库的一部分）。

那我们前面为什么要用Nginx呢？假设我们只使用 Mongrel ：我们触发一个 mongrel 实例，侦听端口 80。如果您的请求需要例如 500 毫秒才能完成，那么您每秒只能处理 2 个客户端。但是等待显然是不够的。让我们启动另一个杂种实例。但是我们不能让它监听端口 80，因为它已经被第一个实例使用了，我们对此无能为力。

所以我们需要一些可以处理多个 Mongrel 实例的东西，仍然监听端口 80。你扔进一个 Nginx 服务器，它将（代理）将请求分派到你的许多 Mongrel 实例，你现在可以添加更多实例来提供更多服务客户同时。

回到回答您的问题，让 NGinx 与 Rails 服务器通信，意味着触发一个或多个 Mongrel（或 Thin / Unicorn，无论可用的服务器）并通知 NGinx 它必须将请求传递给它们。在使用Passenger 之后托管rails 服务是一种流行的模式，它基本上为Apache 工作人员提供了一种处理ruby 代码的方法。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-04T10:19:34.653

> Nginx 和 Mongrel 的区别

两者确实都是 HTTP 服务器，但它们的侧重点不同。Mongrel 是一个快速的 HTTP 服务器，主要针对基于 Ruby 的应用程序。它可以使用 Ruby 代码轻松扩展。但是，它在提供静态文件方面不是很好，即它比 Apache 和 nginx 慢。此外，Rails 是单线程的，这意味着在请求过程中（调用控制器方法直到实际呈现）mongrel 被锁定。

为了解决上述 Mongrel 和 Rails 的缺点，生产应用程序中的首选设置是将 Apache 或 nginx 作为主 Web 服务器，如果收到对非静态 Rails 页面的请求，则将其传递给一个数字底层的 mongrel，让 mongrel 将渲染的页面交还给 Apache/nginx 并提供该页面，以及诸如图像/样式表/之类的静态文件……一开始可能看起来有点令人生畏和复杂，但一旦你真正实现它非常强大和稳定（我有几个应用程序已经在服务器上运行了几个月到几年而无需重新启动）。归根结底就是，让Apache/nginx做自己擅长的事情，让mongrel集群做自己擅长的事情，大家开心就好。

选择 nginx 而不是 Apache 主要是基于内存考虑。Apache 是一个非常强大的网络服务器，特别是如果你实际上所做的只是用它提供一些静态文件并将其余部分平衡在一堆杂种上。Nginx 非常轻量级和高性能，可以完成与 Apache 一样好的工作。但是，如果您熟悉 Apache，不想掌握 nginx 配置并且您的服务器上有大量内存，您仍然可以选择 Apache。在基本的 VPS 上，nginx 是一种更合适的方法。

# 为您提供更多信息

## 阿帕奇与 Nginx

它们都是 Web 服务器。它们可以提供静态文件，但 - 使用正确的模块 - 也可以提供动态 Web 应用程序，例如那些用 PHP 编写的应用程序。Apache更流行，功能更多，Nginx更小更快，功能更少。

Apache 和 Nginx 都不能为 Rails 应用程序提供开箱即用的服务。为此，您需要将 Apache/Nginx 与某种附加组件结合使用，稍后将进行介绍。

Apache 和 Nginx 也可以充当反向代理，这意味着它们可以接收传入的 HTTP 请求并将其转发到另一个也使用 HTTP 的服务器。当该服务器响应 HTTP 响应时，Apache/Nginx 会将响应转发回客户端。稍后您将了解为什么这是相关的。

## Mongrel vs WEBrick

Mongrel 是一个 Ruby 的“应用服务器”。具体而言，这意味着 Mongrel 是一个应用程序，它：

1.  在自己的进程空间中加载您的 Rails 应用程序。
2.  设置一个 TCP 套接字，允许它与外部世界（例如 Internet）进行通信。Mongrel 在此套接字上侦听 HTTP 请求并将请求数据传递给 Rails 应用程序。然后，Rails 应用程序返回一个对象，该对象描述 HTTP 响应的外观，Mongrel 负责将其转换为实际的 HTTP 响应（实际字节）并通过套接字将其发送回。

WEBrick 做同样的事情。与杂种的区别：

*   它完全用 Ruby 编写。Mongrel 是 Ruby 部分 C 部分；主要是 Ruby，但它的 HTTP 解析器是用 C 编写的以提高性能。
*   WEBrick 速度较慢且不太健壮。它有一些已知的内存泄漏和一些已知的 HTTP 解析问题。
*   WEBrick 通常仅在开发过程中用作默认服务器，因为 Ruby 默认包含 WEBrick。Mongrel 需要单独安装。没有人在生产环境中使用 WEBrick。

另一个属于同一类别的 Ruby 应用程序服务器是 Thin。虽然它在内部与 Mongrel 和 WEBrick 有所不同，但在使用情况及其在服务器堆栈中的整体角色方面属于同一类别。

# cordova - Cordova/Phonegap 外部页面加载起始页面

> ID：12724950
> 
> 赞同：7
> 
> 时间：2012-10-04T10:08:02.277
> 
> 标签：cordova

我试图在重定向到外部页面后返回我的应用程序。

我在同一个 web 视图中加载 www.external.com（查看设置 OpenAllWhitelistURLsInWebView = YES）。白名单拒绝不是问题，主机配置了外部主机 plist 设置。

www.external.com 包含一个简单的：

```
<?php
$url = urldecode($_GET['url']);     
header('Location: ' . $url);   
?> 
```

然后我想回到 index.html#my/route 问题是 phonegap 主页面的绝对路径是：

```
file:///var/mobile/Applications/48D1C223-FD34-436E-85BE-8C0B58859ECF/MyApp.app/www/index.html#my/route/ 
```

我得到（在模拟器或设备上）一个安全错误：

```
Failed to load webpage with error: You do not have permission to access the requested resource. 
```

我不能使用 window.history.back() 因为我重定向了不止一次。顺便说一句，window.history.back() 正在工作，我回到我的应用程序。

我在 xCode 4.5 上使用科尔多瓦 2.1。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-02T07:07:32.287

这是我创建[cordova-plugin-startpage](https://github.com/aabluedragon/cordova-plugin-startpage)的部分原因。

调用`startpage.loadContentSrc()`插件方法，它应该将您重定向回来。

# c# - 防止复选框被点击或显示

> ID：12724954
> 
> 赞同：1
> 
> 时间：2012-10-04T10:08:20.650
> 
> 标签：c#, extjs

我可以防止单击网格单元格上的复选框吗？

这是我的专栏：

```
{
    header: 'Select',
    dataIndex: 'indexSelect',
    width: 75,
    xtype: 'checkcolumn',
    renderer: this.CheckColumn_CheckStatus,
} 
```

我正在尝试使用渲染器使复选框禁用或不可见：

```
CheckColumn_CheckStatus: function (value, metaData, record, rowIndex, colIndex, store) 
{
   //do something
} 
```

如果我不返回任何内容甚至返回空字符串，则该复选框不会在 UI 上呈现，但仍可以选中它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:36:38.100

您可以简单地从`beforecheckchange`侦听器返回 false 例如

如果您使用的是 MVC 模式，只需将其包含在您的控制器中：

```
'yourgridpanel checkcolumn': {

    beforecheckchange: function(column, index) {
        var user = Ext.getStore('User').first();

        // I was doing this if a user doesn't have permission but
        // if you want to stop all edits you can just return false
        // without the "if" statement
        if (!user || !user.get('edit_permission')) {
            return false; // cancels checkchange event
        }
    }
} 
```

如果您不使用 MVC 模式，您可以将侦听器附加到列本身（我假设您要取消此示例中的所有检查更改）：

```
{
    header: 'Select',
    dataIndex: 'indexSelect',
    width: 75,
    xtype: 'checkcolumn',
    listeners: {
        beforecheckchange: function() {
            return false; // cancels all checkchanges
        }
    }
}, {
    // another column definition, etc...
} 
```

# google-apps-script - 使用 Apps 脚本创建日历预约空档

> ID：12724958
> 
> 赞同：3
> 
> 时间：2012-10-04T10:08:37.327
> 
> 标签：google-apps-script, google-calendar-api

我正在使用 Google Apps 脚本创建日历事件，但还想创建约会空档。Apps Scrip 似乎还不支持预约空档（或者我错过了什么？）。如果没有，有谁知道这是否可能会很快添加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-03-23T12:21:09.110

这仍然是不可能的。我创建了一个空日历，并在[此处](https://developers.google.com/calendar/v3/reference/events/list#try-it)调用了事件列表 API 。我有一个空日历。然后，我添加了一个预约空档，并调用了相同的 API。我得到了同样的空日历。然后，为了确保我的破解不高，我创建了一个测试事件，并调用了相同的 API。我看到了我的测试活动。

因此，我的结论是谷歌日历约会槽仍然是半生不熟的，如果没有一些主要的黑客/网络抓取，在第三方应用程序中集成是不可接受的。

这是我的结果列表，其中包含一个/没有预约空档：

```
{
 "kind": "calendar#events",
 "etag": "\"p32k9df48mm1dk0g\"",
 "summary": "API Testing",
 "description": "Testing Calendar API",
 "updated": "2018-03-23T12:10:57.161Z",
 "timeZone": "Europe/Moscow",
 "defaultReminders": [],
 "nextSyncToken": "CKiWvIi1gtoCEKiWvIi1gtoCGAY=",
 "items": []
} 
```

这是一个事件的结果：

```
{
 "kind": "calendar#events",
 "etag": "\"p33kdnpkimq1dk0g\"",
 "summary": "API Testing",
 "description": "Testing Calendar API",
 "updated": "2018-03-23T12:15:47.265Z",
 "timeZone": "Europe/Moscow",
 "defaultReminders": [],
 "nextSyncToken": "COjb5pK2gtoCEOjb5pK2gtoCGAY=",
 "items": [
  {
   "kind": "calendar#event",
   "etag": "\"3043614692092000\"",
   "id": "5q94fuj2ufmgq29tmg4fibn8sr",
   "status": "confirmed",
   "htmlLink": "https://www.google.com/calendar/event?eid=NXE5NGZ1ajJ1Zm1ncTI5dG1nNGZpYm44c3Igbm92ZW50dW0udXNfZGpvdmRrdTdjNzNzbDFjZjl2ajFtaHQyYzBAZw",
   "created": "2018-03-23T12:15:46.000Z",
   "updated": "2018-03-23T12:15:46.046Z",
   "summary": "Appointment",
   "creator": {
    "email": "brian@pleasenospam.com"
   },
   "organizer": {
    "email": "noventum.us_djovdku7c73sl1cf9vj1mht2c0@group.calendar.google.com",
    "displayName": "API Testing",
    "self": true
   },
   "start": {
    "dateTime": "2018-03-23T16:30:00+03:00"
   },
   "end": {
    "dateTime": "2018-03-23T17:30:00+03:00"
   },
   "iCalUID": "5q94fuj2ufmgq29tmg4fibn8sr@google.com",
   "sequence": 0,
   "reminders": {
    "useDefault": true
   }
  }
 ]
} 
```

如果您打算与此集成，我建议每六个月左右测试一次此功能。

这是不幸的。我的客户在他的网站上有一个用于安排活动的 Web 表单。他希望我与他的谷歌日历集成，这对于预约安排来说非常酷。不幸的是，这在我们设想的方式中是不可能的（在他的网站上获取预约空档列表，将其显示为可用时间，然后在用户选择一个/提交表格时进行预订。）

相反，我将建议从应用程序中假设预约空档是硬编码的。这有明显的缺点，并且对于管理预约空档不是很酷。他也可以有一个我扫描的“特殊”事件，然后将它们用作约会槽（即通过相互尊重的魔法词将约会槽破解到 API 中。）

有了 Google 的所有资源，实施起来岂不是很酷……？你知道你想。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:17:45.200

它不支持它们，并且在不久的将来不太可能这样做，尽管从长远来看，我们最终可能会添加对更新日历功能的支持。

# android-layout - 图像在 android 手机中是拉伸的。wvga800

> ID：12724963
> 
> 赞同：0
> 
> 时间：2012-10-04T10:09:08.280
> 
> 标签：android-layout

我必须开发一个android应用程序。哪个应用程序已经开发为 iphone 应用程序。我有所有用于 iphone 应用程序的图像。

在我的应用程序中，在第一个屏幕中我必须设置 2 个图像。它们是 640 x 684 和 640 x236

我的模拟器大小是 wvga800。(440*800) 但是当我通过模拟器运行应用程序时。第一张图像显示为拉伸，它已被第二张图像重叠。

我使用了一个相对层。这是xml代码。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:scaleType="fitCenter"
        android:contentDescription="@string/main_image"/>

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <ImageView
            android:id="@+id/imageView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/presshereclick" 
            android:visibility="invisible"
            android:contentDescription="@string/main_image"/>

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:adjustViewBounds="true"
            android:contentDescription="@string/main_image"
            android:src="@drawable/presshere" />

    </FrameLayout>

</RelativeLayout> 
```

我计划将图像调整为适合屏幕尺寸（440 * 800），但我觉得这可以从编码方面处理。这是我使用 android 的第三天。

请帮我解决这个问题。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:17:52.253

使用`RelativeLayout`时方向标签没有意​​义。您需要使用相对标签。对于您的问题，`FrameLayout`您希望.`ImageView``android:layout_below="@id/imageView1"``FrameLayout`

# css - 左边固定宽度div，右边填充剩余宽度div

> ID：12724967
> 
> 赞同：51
> 
> 时间：2012-10-04T10:09:31.153
> 
> 标签：css, css-float, overflow, fixed-width, variable-width

我想要一个在左侧具有固定宽度图像的 div 和一个具有背景颜色的可变宽度 div，它应该在我的设备上扩展其宽度 100%。我无法阻止第二个 div 溢出我的固定 div。

当我在可变宽度 div 处添加溢出：隐藏时，它只会跳到照片下方，在下一行。

我怎样才能以正确的方式解决这个问题（即没有hacks或margin-left，因为我需要稍后通过媒体查询使网站响应，并且我必须为每个设备使用其他分辨率图像更改图像）？

*   初学者网页设计师试图解决响应式网站的恐惧 -

HTML：

```
<div class="header"></div>
<div class="header-right"></div> 
```

CSS：

```
.header{
    float:left;
    background-image: url('img/header.png');
    background-repeat: no-repeat;
    width: 240px;
    height: 100px;
    }

.header-right{
    float:left; 
    overflow:hidden; 
    background-color:#000;
    width: 100%;
    height: 100px;
    } 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-04T10:54:40.443

尝试删除`float:left`and `width:100%`——然后`.header-right`权利`div`按要求运行。

```
.header {
  float: left;
  background: #efefef;
  background-repeat: no-repeat;
  width: 240px;
  height: 100px;
}

.header-right {
  overflow: hidden; 
  background-color: #000;
  height: 100px;
}
```

```
<div class="header"></div>
<div class="header-right"></div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-18T13:58:40.820

使用`css grid`你可以更轻松地实现这一目标

*   你需要将这些 div 包装在一个包装器中，比如说`parent`
*   给`.parent` `display: grid`
*   屈服于两者 `grid-template-areas`_ `.parent`_`grid-area``children`
*   无需使用`float: left`in`children` 调整左侧 div 的`grid-template-columns`宽度`.parent`

```
.parent {
  display: grid;
  grid-template-columns: 240px 1fr;
  grid-template-rows: auto 1fr;
  grid-template-areas: "header-left header-right";
}
.header {
    background-image: url(img/header.png);
    background-color: #ebebeb;
    background-repeat: no-repeat;
    height: 100px;
    grid-area: header-left;
}

.header-right {
    overflow: hidden;
    background-color: #000;
    width: 100%;
    height: 100px;
    grid-area: header-right;
}
```

```
<div class="parent">
  <div class="header"></div>
  <div class="header-right"></div>
</div>
```

css 变得更加高级，并且在高级 css 的帮助下回答，只要它对某人有用:)

# magento-1.7 - Magento 保存订单时保存自定义 sales_flat_order 属性

> ID：12724969
> 
> 赞同：0
> 
> 时间：2012-10-04T10:09:43.083
> 
> 标签：magento-1.7

我正在使用 Magento 1.7.0.2 我使用此安装程序代码在 sales_flat_order 表中创建了一个自定义属性：

```
$setup = new Mage_Sales_Model_Mysql4_Setup('core_setup');
$setup->addAttribute('order', 'my_custom_attribute', array(
  'type'    => 'varchar'
)); 
```

我对 IWD onepagecheckout 模块进行了一些更改以显示我的自定义属性输入字段，但我不知道如何强制将此属性值保存在 sales_flat_order 中？

如何解决这个问题？（我会感谢这个与 couse 相关的问题没有给我答案的真实例子）

PS请注意，我没有更改任何核心文件，因此解决方案可以使用我已经拥有的自定义模块。

此致！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:49:44.103

从另一个答案：如果您使用默认的单页结帐结帐，您可以收听 checkout_type_onepage_save_order_after 事件或 checkout_onepage_controller_success_action。前者在创建并保存订单时调用，后者在成功下订单时调用。

您可以在此处找到有关如何使用事件的教程：http: [//www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)。

希望有帮助:-)

# java - DB2 JDBC 创建 clob 错误

> ID：12724971
> 
> 赞同：1
> 
> 时间：2012-10-04T10:09:44.720
> 
> 标签：java, jdbc, db2, clob

我正在使用 9 系列的 db2jcc 驱动程序 FIX Pack 6。

我的代码

```
public void setParamsPreparedStatement(PreparedStatement s, String[][] params) throws Exception {
  ...
  Clob myClob = s.getConnection().createClob();
  myClob.setString(1, params[i][0]);

  s.setClob(i+1, myClob); 
```

在 JBoss 5.1.0 GA 中，它会抛出错误：

```
12:01:54,914 242266 ERROR [org.jboss.aspects.tx.TxPolicy] (ConsumerMessageQueue:(1):) javax.ejb.EJBTransactionRolledbackException: Unexpected Error
java.lang.AbstractMethodError: org.jboss.resource.adapter.jdbc.jdk5.WrappedConnectionJDK5.createClob()Ljava/sql/Clob;
    at database.Executer.setParamsPreparedStatement(Executer.java:761) 
```

在普通的java中，它给出了错误：

```
Exception in thread "main" java.lang.AbstractMethodError: com.ibm.db2.jcc.b.b.createClob()Ljava/sql/Clob;
    at TestClob.main(TestClob.java:20) 
```

原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T11:31:24.220

根据我的经验，`createClob()`根本不需要打电话。只需使用`PreparedStatement.setCharacterStream()`

```
PreparedStatement pstmt = conn.prepareStatement("insert into clob_table (id, clob_colum) values (?,?)";
String clobData = "....";
Reader reader = new StringReader(clobData);
pstmt.setInt(1, 42);
pstmt.setCharacterStream(2, reader, clobData.length());
pstmt.executeUpdate(); 
```

我发现这是处理 CLOB（以及以类似方式处理 BLOB）的唯一跨 DBMS/JDBC 解决方案。

# android - 每次访问 TabActivity 时重新加载活动

> ID：12724973
> 
> 赞同：0
> 
> 时间：2012-10-04T10:10:00.970
> 
> 标签：android, tabactivity

在安卓`TabActivity`中。我想在每次访问时重新加载一个标签。例如，如果有一个从数据库获取数据的选项卡，我想在每次出现选项卡活动时获取数据。

我需要把从数据库中获取数据的操作放在`onCreate`函数上，`onResume`.. ??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:19:12.750

像这样使用第一个选项卡

```
public class TabsActivity extends TabActivity {

TabSpec spec1 = tabHost.newTabSpec("tabone");
spec1.setIndicator(createTabView(tabHost.getContext(), "tabone", R.drawable.tab_home));
Intent inte = new Intent(TabsActivity.this, PhotosActivity.class);
inte.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
spec1.setContent(inte);

TabSpec spec2 = tabHost.newTabSpec("tabtwo");
spec2.setIndicator(createTabView(tabHost.getContext(), "tabtwo", R.drawable.tab_account));
Intent _int = new Intent(TabsActivity.this, TabTwoActivity.class);
_int.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
spec2.setContent(_int);

tabHost.addTab(spec1);
tabHost.addTab(spec2); 
```

第二个标签

```
 public class TabTwoActivity extends TabActivity {

   TabSpec spec1 = tabHostacc.newTabSpec("tabone");
spec1.setIndicator(createTabView(tabHostacc.getContext(), "tabone", R.drawable.tab_home));
Intent inte = new Intent(TabTwoActivity .this,  yourfirstActivity.class);
inte.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
spec1.setContent(inte);      

TabSpec spec2 = tabHostacc.newTabSpec("tabtwo");
spec2.setIndicator(createTabView(tabHostacc.getContext(), "tabtwo", R.drawable.tab_account));
Intent _int = new Intent(TabTwoActivity .this, yoursecondActivity.class);
_int.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
spec2.setContent(_int);      

tabHostacc.addTab(spec1);
tabHostacc.addTab(spec2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T10:41:23.847

将您的操作放入`OnTabChangeListener`. 在这里您可以检查当前选择的选项卡。相应地进行编码。

请查看[这个](https://stackoverflow.com/questions/2243360/how-to-use-tabhost-ontabchangelistener-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T10:24:25.720

实现这一点的简单方法：在 Activity 的 onPause 方法中调用 finish()。

```
public void onPause() {
    super.onPause();
    finish();
    } 
```

但你不应该真的这样做。尊重 Activity 生命周期，并在用户从 onCreate() 切换到此选项卡时将您需要做的事情移动到 onResume()。

为您清理事情：

-onCreate() 在您第一次切换到选项卡时被调用 - 或者如果它被系统杀死或通过调用 finish()

每次切换到选项卡时都会调用 -onResume()

-onPause() 在您切换离开选项卡时被调用

最好的做法：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setup your contentview etc
    }
  public void onResume() {
    super.onResume();
    //get your data
    } 
```

# npm - 未安装软件包 - “错误：无法建立隧道套接字”

> ID：12724974
> 
> 赞同：2
> 
> 时间：2012-10-04T10:10:01.197
> 
> 标签：npm

Debian挤压（通过Tor运行的互联网连接），从当前源构建的nodejs - 错误才刚刚开始发生：

```
root@...# npm install coffee-script
npm http GET https://registry.npmjs.org/coffee-script
npm http GET https://registry.npmjs.org/coffee-script
npm http GET https://registry.npmjs.org/coffee-script
npm ERR! Error: tunneling socket could not be established, cause=socket hang up
npm ERR!     at ClientRequest.onError (/usr/local/lib/node_modules/npm/node_modules/request/tunnel.js:161:17)
npm ERR!     at ClientRequest.g (events.js:193:14)
npm ERR!     at ClientRequest.EventEmitter.emit (events.js:93:17)
npm ERR!     at CleartextStream.socketErrorListener (http.js:1330:9)
npm ERR!     at CleartextStream.EventEmitter.emit (events.js:93:17)
npm ERR!     at SecurePair.exports.connect.cleartext._controlReleased (tls.js:1298:15)
npm ERR!     at SecurePair.EventEmitter.emit (events.js:93:17)
npm ERR!     at SecurePair.error (tls.js:952:10)
npm ERR!     at EncryptedStream.CryptoStream._done (tls.js:432:17)
npm ERR!     at EncryptedStream.CryptoStream._pull (tls.js:577:12)
npm ERR! If you need help, you may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>

npm ERR! System Linux 3.2.0-3-486
npm ERR! command "/usr/local/bin/node" "/usr/local/bin/npm" "install" "coffee-script"
npm ERR! cwd /home/...
npm ERR! node -v v0.8.11
npm ERR! npm -v 1.1.62
npm ERR! code ECONNRESET
npm ERR! 
...
npm ERR! not ok code 0 
```

Iceweasel 还显示 [https://registry.npmjs.org/coffee-script](https://registry.npmjs.org/coffee-script)的安全证书无效错误。

有人知道这里缺少什么吗？（它在过去发生过，但由于某种奇怪的原因而自行修复。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T10:39:59.137

尝试设置`ca`和配置选项`strict-ssl`（分别为 null[和](http://registry.npmjs.org/)false`registry`

# database - symfony2 认证

> ID：12724985
> 
> 赞同：0
> 
> 时间：2012-10-04T10:10:31.917
> 
> 标签：database, security, symfony

我想针对数据库创建 SF2 身份验证，我使用了 SF2 的官方文档[http://symfony.com/doc/2.0/cookbook/security/entity_provider.html](http://symfony.com/doc/2.0/cookbook/security/entity_provider.html)，问题是检查不起作用，我不'不知道怎么回事，我没有收到任何错误，输入用户信息后我仍然在同一页面/登录，没有错误，我真的不明白。

安全.yml

```
security:
encoders:
  TEST\UserBundle\Entity\User:
    algorithm: sha512
    encode-as-base64: true
    iterations: 10

role_hierarchy:
    ROLE_ADMIN:       ROLE_USER
    ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

providers:
    main:
        entity: { class: TESTUserBundle:User, property: username }

firewalls:
    login:
        pattern: ^/(login|reset|accueil)
        anonymous: true
    main:
        pattern: /.*
        form_login:
            check_path: /check_login
            login_path: /login
        logout:
            path: /logout
            target: /login
        security: true
        anonymous: false

access_control:
    #- { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY, requires_channel: https }
    #- { path: ^/_internal, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 }
    #- { path: ^/admin, roles: ROLE_ADMIN } 
```

问题是错误始终为空，这是我的登录表单

```
 {% if error == 1 %}
        <span class="pw-alert">E-mail et/ou mot de passe erroné(s)</span>
        {% endif %}
                <form action="{{ path('_security_check_user') }}" method="POST">
    <div>
        <label for="username">Username:</label>
        <input type="email" id="username" name="_username" value="{{ last_username }}" />
    </div>

    <div>
        <label for="password">Password:</label>
        <input type="password" id="password" name="_password" />
    </div>
                    <input type="submit" value="Se connecter" name="login"/>
                </div>

            </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:18:02.247

check_path 应该是`/login_check`而不是`/check_login`（对我有用）。对于提供者，请尝试以这种方式指示您的类：（`TEST\UserBundle\Entity\User`由于您想从数据库中记录它们，因此您必须提供用户实体的路径，而不是用户控制器）。并添加`provider: main`到您的主防火墙。

它有帮助吗？

# ip - 如何在 jmeter 中设置 IP 欺骗？

> ID：12724989
> 
> 赞同：10
> 
> 时间：2012-10-04T10:10:36.493
> 
> 标签：ip, jmeter, load-testing, spoofing

我现在正在通过我的机器上的 jmeter 对网站进行负载测试。但我想要一个真实世界的场景，所以 jmeter 可以使用 IP 别名或 IP 欺骗，这看起来像是从不同的 IP 地址发送请求。？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T11:09:12.480

是的，它可以，请参阅属性**源 IP 地址**：：

*   [http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request)

请注意，您必须使用 HTTPClient 实现。

有关完整教程，请参阅：

*   [http://blog.milamberspace.net/index.php/2009/12/03/changer-ladresse-ip-source-dune-requete-http-lors-dun-test-avec-jmeter-549.html](http://blog.milamberspace.net/index.php/2009/12/03/changer-ladresse-ip-source-dune-requete-http-lors-dun-test-avec-jmeter-549.html)

# jquery - 事件内的jQuery日历事件

> ID：12724990
> 
> 赞同：-2
> 
> 时间：2012-10-04T10:10:43.373
> 
> 标签：jquery, fullcalendar

我正在做一个项目。在我的要求中，有资源计划（例如，X 光机可用于上午 8:00 开放时间至晚上 9:00 关闭时间）。此资源计划应在日历上可见。现在可以针对此资源进行患者预约。所以这些约会块应该在资源调度块内。

我怎样才能实现这个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:40:23.530

您可以从 0800-2100 添加一个事件并以一种颜色（比如灰色或绿色）呈现它。然后只需为应用程序添加使用时间的事件，并以不同的方式呈现它们（比如红色），它将出现在顶部。

另一种方式：以 15 分钟（或其他）间隔添加事件，并将它们标记为可用。单击这些时，将它们标记为已占用（在您的数据库中）并以不同方式呈现它们。

# asp.net - 如何从bin文件夹导入dll而不在asp.net中添加引用

> ID：12724996
> 
> 赞同：0
> 
> 时间：2012-10-04T10:10:57.957
> 
> 标签：asp.net, dll, dllimport

在我的项目中，我通过在我的项目 bin 文件夹中引用使用了一些 dll，这仅在我将我的 dll 粘贴到我的“C：windows/system32/mydll.dll”中时才有效，但是当我将我的 dll 粘贴到 bin 文件夹中然后运行我的网站时在服务器上它会显示错误...."file not found" 。而且我还使用此方法 [DllImport("~/bin/mydll.dll")] 导入它....但它仍然向我显示相同的错误“找不到文件”

如果我使用添加引用方法，那么它会显示“无效的 COM 组件”错误.....

请建议一些简单而有用的解决方案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:14:05.930

因为您的 dll 已添加`COM composant`到您的参考资源管理器中，而不是简单的程序集。

注意：如果要将程序集注册为 COM，可以使用`RegSvr32 tool`

链接：http: [//msdn.microsoft.com/en-us/library/ms859484.aspx](http://msdn.microsoft.com/en-us/library/ms859484.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-02T11:25:55.920

在代码中尝试：

```
 if (!Environment.GetEnvironmentVariable("PATH", EnvironmentVariableTarget.Process).Contains(HttpRuntime.BinDirectory))
        Environment.SetEnvironmentVariable("PATH", Environment.GetEnvironmentVariable("PATH", EnvironmentVariableTarget.Process) + ";" + HttpRuntime.BinDirectory, EnvironmentVariableTarget.Process); 
```