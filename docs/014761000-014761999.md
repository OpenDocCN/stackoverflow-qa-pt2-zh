# StackOverflow 问答 14761000-14761999

# php - PHP MySQL 问题并插入 UTF-8

> ID：14761012
> 
> 赞同：1
> 
> 时间：2013-02-07T21:08:31.263
> 
> 标签：php, mysql

我有 php & mysql 的问题，使用 utf-8 插入数据库。第一个文件：addsite：

```
<?php
include 'header.php';
if(isset($data)) {
foreach($_POST as $key => $value) {
$posts[$key] = filter($value);
}
if(isset($posts['type'])){
if($posts['url'] == "http://" || $posts['url'] == ""){
$error = "Add your page link!";
}else if($posts['title'] == ""){
$error = "Add your page title!";
}else if(!preg_match("/\bhttp\b/i", $posts['url'])){
$error = "URL must contain http://";
}else if(!preg_match('|^http(s)?://[a-z0-9-]+(.[a-z0-9-]+)*(:[0-9]+)?(/.*)?$|i',       $posts['url'])){
$error = "Please do not use special characters in the url.<";
}else{
    include "plugins/" . $posts['type'] . "/addsite.php";
}
}
?>
<div class="contentbox">
<font size="2">
<li>Pick the type of exchange you are promoting from the dropdown menu.</li>
<li>Set the amount of coins you wish to give per user complete(CPC).</li>
<li>The higher the amount of coins the higher the Links position.</li>
</div>
<div class="contentbox">
<div class="head">Add Site</div>
<div class="contentinside">
    <?php if(isset($error)) { ?>
    <div class="error">ERROR: <?php echo $error; ?></div>
    <?php }
    if(isset($success)) { ?>
    <div class="success">SUCCESS: <?php echo $success; ?></div>
    <?php }
    if(isset($warning)) { ?>
    <div class="warning">WARNING: <?php echo $warning; ?></div>
    <?php } ?>

    <form class="contentform" method="post">
        Type<br/>
        <select name="type"><?php $select = hook_filter('add_site_select', ""); echo   $select; ?></select><br/><br/>
        Link<br/>
        <input name="url" type="text" value="<?php if(isset($posts["url"])) { echo $posts["url"]; } ?>"/><br/><br/>
        Title<br/>
        <input name="title" type="text" value="<?php if(isset($posts["title"])) { echo $posts["title"]; } ?>"/><br/><br/>
        Cost Per Click<br/>
        <?php if($data->premium > 0) { ?>
        <select name="cpc"><?php for($x = 2; $x <= $site->premcpc; $x++) { if(isset($posts["cpc"]) && $posts["cpc"] == $x) { echo "<option selected>$x</option>"; } else { echo "<option>$x</option>"; } } ?></select><br/><br/>
        <?php }else{ ?>
        <select name="cpc"><?php for($x = 2; $x <= $site->cpc; $x++) { if(isset($posts["cpc"]) && $posts["cpc"] == $x) { echo "<option selected>$x</option>"; } else { echo "<option>$x</option>"; } } ?></select><br/><br/>
        <?php } ?>
        <input style="width:40%;" type="Submit"/>
    </form>
</div>
 </div>
<?php
 }
else
 {
echo "Please login to view this page!";
 }
 include 'footer.php';
  ?> 
```

第二个文件，插件addsite.php

```
<?php
$num1 = mysql_query("SELECT * FROM `facebook` WHERE `url`='{$posts['url']}'");
$num = mysql_num_rows($num1);
if($num > 0){
$error = "Page already added!";
 }else if(!strstr($posts['url'], 'facebook.com')) {
$error = "Incorrect URL! You must include 'facebook.com'";
}else{
mysql_query($qry);
  mysql_query("INSERT INTO `facebook` (user, url, title, cpc) VALUES('{$data->id}', '{$posts['url']}', '{$posts['title']}', '{$posts['cpc']}') ");
$success = "Page added successfully!";
}
?> 
```

当我在表单中编写阿拉伯语并提交时，它以未知语言进入数据库，例如：

```
 &Oslash;&pound;&Oslash;&sup3;&Ugrave; 
```

数据库整理：utf8_general_ci

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '0');

$host       =   "localhost"; // your mysql server address
$user       =   "z*******"; // your mysql username
$pass       =   "m********"; // your mysql password
$tablename  =   "z*******"; // your mysql table

session_start();
$data = null;
if(!(@mysql_connect("$host","$user","$pass") && @mysql_select_db("$tablename"))) {
    ?>
    <html>
    MSQL ERROR
    <?
    exit;
}

include_once 'functions.php';
require_once "includes/pluggable.php";
foreach( glob("plugins/*/index.php")  as $plugin) {  
  require_once($plugin);  
}  

hook_action('initialize');

$site = mysql_fetch_object(mysql_query("SELECT * FROM settings"));
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:56:12.700

添加这一行：

```
 mysql_query("SET NAMES 'utf8'");

Like this

if(!(@mysql_connect("$host","$user","$pass") && @mysql_select_db("$tablename"))) {
    ?>
    <html>
    MSQL ERROR
    <?
    exit;
}
else{
    mysql_query("SET NAMES 'utf8'");
} 
```

另外： - 将元字符集添加到表单页面

```
<meta http-equiv='Content-Type' content='text/html; charset=utf-8'> 
```

或 HTML5

```
 <meta charset='utf-8'> 
```

# c - memset 一个数组为 1

> ID：14761015
> 
> 赞同：10
> 
> 时间：2013-02-07T21:08:44.260
> 
> 标签：c

我正在尝试用一些整数初始化一个二维数组。如果我将数组初始化为 0，我会得到正确的结果，但如果我使用其他整数，我会得到一些随机值。

```
int main()
{
    int array[4][4];
    memset(array,1,sizeof(int)*16);
    printf("%d",array[1][2]); <---- Not set to 1
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-07T21:09:58.720

`memset`将数组的每个字节设置为`1`不是每个`int`元素。

使用将所有值设置为 1 的初始化列表或循环语句将值复制`1`到所有元素。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-07T21:11:29.573

`memset`仅在逐字节的基础上工作。将位清零通常是有效的，因为所有整数零通常都是全零位，因此将四个全零位字节组合成一个全零位`int`仍然会给您零。但是，对于不是字节的东西，初始化所有它们的最简单方法就是显式初始化所有它们。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-07T21:25:59.733

`memset`允许您将单个字节填充为内存，并且您尝试设置整数值（可能是 4 个或更多字节。）您的方法仅适用于数字`0`，`-1`因为它们都以二进制表示为`00000000`or `11111111`。

for 循环并不太麻烦：

```
int main() {
    int i, val = 1, max = 4;
    int array[max][max];

    max = max * max;

    for(i = 0 i < max; i++) {
       array[i] = val;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-23T06:21:10.423

因为**memset**对字节起作用并将每个字节设置为 1。

```
memset(hash, 1, cnt); 
```

因此，一旦读取，它将显示的值**16843009 = 0x01010101 = 1000000010000000100000001**
不是**0x00000001**
但是如果您的要求仅适用于布尔值或二进制值，那么我们可以使用 C 库的 C99 标准进行设置

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdbool.h>        //Use C99 standard for C language which supports bool variables

int main()
{
    int i, cnt = 5;
    bool *hash = NULL;
    hash = malloc(cnt);

    memset(hash, 1, cnt);
    printf("Hello, World!\n");

    for(i=0; i<cnt; i++)
        printf("%d ", hash[i]);

    return 0;
} 
```

**输出：**

你好世界！
1 1 1 1 1

# c++ - 指针和原始类型返回不同的数组成员

> ID：14761018
> 
> 赞同：0
> 
> 时间：2013-02-07T21:08:51.437
> 
> 标签：c++

一些东西。

1.  当我用 size 的成员数组声明我的结构时`3`，这是否意味着该数组有 4 个元素？0、1、2、3？为什么他们，当我尝试插入字符`A`时`B`，`C`它告诉我`initializer-string for array of chars is too long [-fpermissive]`？

    ```
    #include <iostream>
    using namespace std;

    struct Student {
        double no;
        char grade[3];
    };

    int main() {
        struct Student harry = {975, "ABC"};
    } 
    ```

2.  当我打印字符数组的特定索引的地址时，我从以下代码中得到以下结果：

    ```
    struct Student {
        double no;
        char grade[4];
    };

    int main() {

        struct Student harry = {975, "ABC"};

        for (int i = 0; i < 4; i++)
            cout << "h.g[" << i << "]" << harry.grade[i] << endl;

        for (int i = 0; i < 4; i++)
            cout << "h.g[" << i << "]" << &harry.grade[i] << endl;
    } 
    ```

结果：

```
h.g[0]A
h.g[1]B
h.g[2]C
h.g[3]
&h.g[0]ABC
&h.g[1]BC
&h.g[2]C
&h.g[3] 
```

为什么第一个索引打印`ABC`, 然后`BC`, 等等而不是像第一个循环那样单独打印每个字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:10:33.657

不，声明一个数组 like`T arr[3]`会给你一个包含 3 个元素的数组，而不是 4 个。声明中的 3 是数组的大小。索引从 0 开始，因此元素的索引是 0、1 和 2。

字符串文字`"ABC"`为您提供了一个“4 数组`const char`”，其中最后一个元素是空字符。如果您尝试使用包含太多字符的字符串文字来初始化数组，则您的程序格式错误：

> 初始化器的个数不得多于数组元素的个数。

在第一个循环中，您将获取数组的每个字符并将其打印出来。当您打印 a 时，`char`您只会得到它`char`作为输出。

当您获取数组元素的地址时`&harry.grade[i]`，您会得到一个`char*`. 当您输出 a`char*`时，I/O 库将其视为 C 风格的以空值结尾的字符串。它将从该字符输出到它找到的第一个空字符。这就是为什么你让角色在位置上`i`，然后在它后面的角色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:10:09.257

> 当我用大小为 3 的成员数组声明我的结构时，这不意味着该数组有 4 个元素吗？0、1、2、3？

不，这意味着它具有三个元素，您可以使用索引 0、1、2 访问它们。

> 为什么第一个索引打印 ABC，然后是 BC，等等，而不是像第一个循环那样分别打印每个字符？

~~您正在访问超出数组的范围，这会导致**未定义的行为**。这意味着任何事情都可能发生。您还将一个大小为 4 的字符数组 , 分配给`"ABC"`一个大小为 3 的数组。所以你没有债券的读写权限。~~ char 数组“ABC”中的第 4 个元素是 null-termination `\0`。当您用 打印 a 的任何元素的地址时`char[N]`，`std::cout`它会看到 a `char*`，它会将其解释为以 null 结尾的字符串。所以它将打印字符直到空终止。所以如果你从头开始打印，你会得到`A, b, C`. 如果你从你得到的第二个元素打印`B,C`，依此类推。

# css - 同样的空间 div - 将它们锚定到背景图像 - 无论窗口大小如何？

> ID：14761020
> 
> 赞同：1
> 
> 时间：2013-02-07T21:08:53.040
> 
> 标签：css, responsive-design

我有一个 1387 像素宽的联系栏 (.png) 和四个相同的 div，其中包含覆盖它的联系信息（电子邮件、twr、fb）。这应该是这样的：

![页脚](../Images/dea7dbf31a08a5c165d2a38a709798e3.png)

**问题：** 无论窗口大小如何，我如何平均分配联系人 div 并将它们锚定到背景图像？

**结构：**

```
<div id="footer">
    <div id="contact-row">
        <div class="contact">
            <a class="email" href="mailto:#">email</a>  
            <a class="tw" href="http://twitter.com/#" target="_blank"></a> 
            <a class="fb" href="http://www.facebook.com/pages/#" target="_blank"></a>            
        </div>
        ...+ 3 more divs with class of "contact"
    </div>
</div> 
```

**款式：**

```
#footer {
    width: 100%;
    height: 178px;
    background: url('../img/contact-bg.png') no-repeat center; 
    position: relative;
    clear: both;
}

#contact-row {  
   width: 100%;  
   height: 178px;
   border: solid 1px #aaa;  
   text-align: center;  
   overflow: hidden;  
   margin: 0 auto 0 auto;
}  

.contact {  
    width: 150px;  
    height: 25px;  
    border: solid 1px #ccc;  
    display: inline-block;  
    margin: 0 50px;
} 
```

我尝试了许多不同的解决方案，但没有一个与背景图像相关联或适应较小的浏览器窗口。工作副本可以在这里找到：[aaargb！！！](http://pikku.co/test/aaargb/index.html)

我会很感激一些新鲜的眼睛。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:16:09.323

我认为主要问题是您将 #contact-row 设置为`width: 100%`. 您应该将其设置为，`width: 1387px`因为这将始终是多宽。然后你应该能够`.contact`在不担心窗口大小的情况下平均分配你的 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T17:57:46.677

问题是，`#footer` *并被* `#contact-row`设置为`width:100%`. 取消相对 100% 的宽度*都*阻止了它相对于父宽度调整大小。

事实证明，`#contact-row`是不必要的。摆脱它并继续：

```
<div id="footer">
    <div class="contact">
         <a class="email" href="mailto:#">email</a>  
         <a class="tw" href="http://twitter.com/#" target="_blank"></a> 
         <a class="fb" href="http://www.facebook.com/pages/#" target="_blank"></a>            
    </div>
        ...+ 3 more divs with class of "contact"
</div> 
```

这些样式`.contact`同样以 div 为中心：

```
#footer {
    width:1400px;
    height:178px;
    background:url('../img/contact-bg.png') no-repeat center;
    margin:0 auto; 
    position:relative;
    clear:both;
    overflow:hidden;
}

.contact {  
    width:225px;  
    height:25px;    
    display:inline-block;  
    margin:0 50px 0 68px;
} 
```

# windows-8 - Windows 8 应用程序分辨率

> ID：14761021
> 
> 赞同：0
> 
> 时间：2013-02-07T21:08:58.303
> 
> 标签：windows-8, windows-store-apps, windows-store

我已经开发了 Windows 8 应用程序。当我尝试运行它时，在另一台笔记本电脑上进行测试；设计变得最糟糕，一切看起来都很糟糕。（字体，图像，..）这与分辨率有关吗？如果是，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:02:39.580

另一个要检查的领域是像素密度。请遵循[缩放到像素密度的指南，](http://msdn.microsoft.com/en-us/library/windows/apps/hh465362.aspx)以确保您的应用在缩放时看起来很棒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T22:23:52.843

您的应用程序是如何开发的？这是适用于 Windows 8 商店应用程序的 xaml/cs 应用程序还是 html/js 应用程序？它是在商店里还是只是测试？是否支持多种分辨率？

您需要测试各种分辨率以了解您的应用如何处理它们。在此处使用您的应用程序进行测试的两个链接：

[Windows 应用商店应用开发小吃：模拟器提示和技巧](http://www.sadev.co.za/content/windows-store-app-development-snack-simulator-tips-tricks)

[缩放到不同的屏幕re](http://blogs.msdn.com/b/b8/archive/2012/03/21/scaling-to-different-screens.aspx)

# javascript - 当一个文件已经缓存时，Yepnope 不会触发完成或回调

> ID：14761022
> 
> 赞同：1
> 
> 时间：2013-02-07T21:08:58.753
> 
> 标签：javascript, jquery, yepnope, jquery-address

我将 yepnope 与 jQuery 地址一起使用。在某些 yepnope 调用中，某些要检索的文件可能之前已加载。但是，当这种情况发生时，yepnope 不会触发完成或回调。我应该如何解决这个问题？

```
yepnope({
load: ['/js_scripts/jquery.selectbox-0.2.min.js','/js_scripts/jquery-ui-1.10.0.custom.min.js','/js_scripts/jquery.ba-throttle-debounce.min.js','/css/jquery-ui-1.8.23.custom.css','/js_scripts/search.js'],
    callback: {
        "search.js": function () {
            doSearch();
        }
    }
}); 
```

所以基本上我希望它以与 Query.getScript 相同的方式工作。无论检索到的文件是否已下载或已缓存，请始终执行回调。或者也许我应该只使用 getScript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:57:19.437

改用 LABjs 修复它。通过 LABjs 我可以做到：

```
$LAB
.script('/js_scripts/jquery.selectbox-0.2.min.js','/js_scripts/jquery-ui-1.10.0.custom.min.js','/js_scripts/jquery.ba-throttle-debounce.min.js','/js_scripts/search.js')
.wait(function(){ // wait for all scripts to execute first
    doSearch();
}); 
```

它会一直加载。[http://labjs.com/documentation.php](http://labjs.com/documentation.php)

# ios - Core Plot 的标注不跟随滚动

> ID：14761025
> 
> 赞同：0
> 
> 时间：2013-02-07T21:09:06.177
> 
> 标签：ios, graph, core-plot, callouts

我在[这里](https://stackoverflow.com/questions/12302051/coreplot-display-callout-when-select-point-is-upside-down)使用代码的修改版本来显示来自图表中点的标注弹出窗口。我已经让它大部分工作了，但我遇到的问题是，当我滚动或缩放图形时，标注停留在屏幕上的同一位置，而不是随着点的移动而跟随。

如果您想要一些代码示例来玩，它们就在这里。关于如何使标注与情节点一起旅行的任何想法？谢谢！

```
-(void)scatterPlot:(CPTScatterPlot *)plot plotSymbolWasSelectedAtRecordIndex:(NSUInteger)idx {
    if ([plot.identifier isEqual:_plotIdentifier]) {

        NSArray *selectedSymbolItem = [self.data.xyArrays objectAtIndex:idx];
        NSNumber *x = [selectedSymbolItem objectAtIndex:0];
        NSNumber *y = [selectedSymbolItem objectAtIndex:1];
        double doublePrecisionPlotPoint[2];
        doublePrecisionPlotPoint[0] = x.doubleValue;
        doublePrecisionPlotPoint[1] = y.doubleValue;
        CGPoint pointTouched = [plot.graph.defaultPlotSpace plotAreaViewPointForDoublePrecisionPlotPoint:doublePrecisionPlotPoint];

        CGPoint convertedPoint = [plot.graph convertPoint:pointTouched toLayer:self.view.layer];

        _popupView = [[SMCalloutView alloc] init];
        _popupView.title = [NSString stringWithFormat:@"Thing %i", idx];
        [_popupView presentCalloutFromRect:CGRectMake(convertedPoint.x, convertedPoint.y, 10, 10) inLayer:self.view.layer constrainedToLayer:self.hostView.layer permittedArrowDirections:SMCalloutArrowDirectionDown animated:YES];

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T01:59:05.063

使用绘图空间委托来监控绘图空间的变化并根据需要更新标注位置。

# python - 简单的 Tk 应用程序 - 单击按钮即可绘制

> ID：14761031
> 
> 赞同：2
> 
> 时间：2013-02-07T21:09:26.607
> 
> 标签：python, canvas, python-3.x, tkinter, tk

谁能告诉我为什么单击 self.rec 按钮时我的“addLine”方法无法调用？

```
from tkinter import *
from tkinter import ttk
root = Tk()

class Paint:
    def __init__(self, parent):
        self.parent = parent
        self.whiteBoard = Canvas(self.parent)
        self.whiteBoard.grid(column=0, row=0, sticky=(N,W,E,S))
        self.lastx = 0
        self.lasty = 0
        self.rec = self.whiteBoard.create_rectangle((10, 10, 30, 30), fill="red")
        self.whiteBoard.tag_bind(self.rec, "<Button-1>", self.getClick)

    def xy(self, event):
        self.lastx, self.lasty = event.x, event.y
        print (event.x, " is the x coordinate")
        print (event.y, " is the y coordinate")

    def addLine(self, event):
        canvas.create_line((lastx, lasty, event.x, event.y))
        self.lastx, self.lasty = event.x, event.y

    def getClick(self, event):
        self.whiteBoard.bind("<Button-1>", self.xy)
        self.whiteBoard.bind("B1-Motion>", self.addLine)

white = Paint(root)

root.mainloop() 
```

这都是尝试使用 Tkinter 制作 MS 绘画克隆的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:13:35.547

首先，您绑定到`B1-Motion>`（注意缺少的`<`）。但是，更重要的是，不要做这样的绑定。看起来`getClick`方法实际上是“选择线工具”。然后，将绑定`<Button-1>`和添加`<B1-Motion>`到画布本身。调用回调时，您将根据所选工具执行操作。

这是遵循此建议的粗略草图（带有`RECTANGLE`工具作为奖励）：

```
import tkinter

# TOOLS
LINE, RECTANGLE = list(range(2))

class Paint:
    def __init__(self, canvas):
        self.canvas = canvas
        self._tool, self._obj = None, None
        self.lastx, self.lasty = None, None
        self.canvas.bind('<Button-1>', self.update_xy)
        self.canvas.bind('<B1-Motion>', self.draw)

    def draw(self, event):
        if self._tool is None or self._obj is None:
            return
        x, y = self.lastx, self.lasty
        if self._tool in (LINE, RECTANGLE):
            self.canvas.coords(self._obj, (x, y, event.x, event.y))

    def update_xy(self, event):
        if self._tool is None:
            return
        x, y = event.x, event.y
        if self._tool == LINE:
            self._obj = self.canvas.create_line((x, y, x, y))
        elif self._tool == RECTANGLE:
            self._obj = self.canvas.create_rectangle((x, y, x, y))
        self.lastx, self.lasty = x, y

    def select_tool(self, tool):
        print('Tool', tool)
        self._tool = tool

class Tool:
    def __init__(self, whiteboard, parent=None):
        self.whiteboard = whiteboard

        frame = tkinter.Frame(parent)
        self._curr_tool = None
        for i, (text, t) in enumerate((('L', LINE), ('R', RECTANGLE))):
            lbl = tkinter.Label(frame, text=text, width=2, relief='raised')
            lbl._tool = t
            lbl.bind('<Button-1>', self.update_tool)
            lbl.pack(padx=6, pady=6*(i % 2))
        frame.pack(side='left', fill='y', expand=True, pady=6)

    def update_tool(self, event):
        lbl = event.widget
        if self._curr_tool:
            self._curr_tool['relief'] = 'raised'
        lbl['relief'] = 'sunken'
        self._curr_tool = lbl
        self.whiteboard.select_tool(lbl._tool)

root = tkinter.Tk()

canvas = tkinter.Canvas(highlightbackground='black')
whiteboard = Paint(canvas)
tool = Tool(whiteboard)
canvas.pack(fill='both', expand=True, padx=6, pady=6)

root.mainloop() 
```

# javascript - JavaScript快速排序中的无限递归？

> ID：14761032
> 
> 赞同：31
> 
> 时间：2013-02-07T21:09:33.853
> 
> 标签：javascript, algorithm, sorting, quicksort

这是我写的[快速排序](http://en.wikipedia.org/wiki/Quicksort)代码。该功能不起作用，因为它无法达到基本情况。如果我将数据透视表记录到控制台`r`，`l`无论调用多少次排序函数，它们都保持不变。所以我想知道参数`l`,`r`是否真的没有作为数据传递给函数。为什么会这样？

```
function sort(data){
    if(data.length < 2){
        return data;
    }
    else{
        var l = [];
        var r = [];
        var pivot = parseInt(data.length/2);
        for(i=0; i<data.length; i++){
            if(data[i] > data[pivot]){
                r.push(data[i]);
            }
            else{
                l.push(data[i]);
            }
        }
        return sort(l).concat(sort(r));
    }
} 
```

* * *

## 回答 #1

> 赞同：337
> 
> 时间：2013-02-07T21:20:43.063

我认为这里的问题是您的分区步骤不一定会缩小输入数组。例如，让我们跟踪如果您尝试对 [1, 2] 进行排序会发生什么。在这种情况下，您的枢轴元素将是元素 2。由于 1 > 2 为假，因此将 1 添加到列表中`l`。由于 2 > 2 为假，因此将 2 添加到列表中`l`。结果，您对列表的递归调用`l`将具有与原始调用完全相同的参数，从而导致无限递归。

要解决此问题，请尝试将输入分成三个列表 - 一个较小的值、一个相等的值和一个较大的值。此代码显示在这里：

```
function sort(data){
  if (data.length < 2){
    return data;
  } else {
    var l = [];
    var r = [];
    var e = [];
    var i = 0;
    var pivot = (data.length / 2) | 0;

    for(i = 0; i < data.length; i++) {
      if (data[i] > data[pivot]) {
        r.push(data[i]);
      } else if (data[i] < data[pivot]) {
        l.push(data[i]);
      } else {
        e.push(data[i]);
      }
    }  
    return sort(l).concat(e, sort(r)); 
  }
} 
```

这个新版本明确地将相等的元素分组到它们自己的列表中，因此它们不会被任何一个递归调用递归排序。它还优雅地处理重复元素。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:25:24.497

如果您选择数组的最大值作为枢轴元素，那么 的所有值都`data`将在数组中结束，`l`而在`r`. 因此将使递归永远不会停止（并保持`l`,`r`和`pivot`相同的值）。除非这是一项大脑练习，否则使用`data.sort()`应该做得更好。;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:23:21.063

JavaScript 通过引用传递对象（数组也是对象）。如果要按值传递它们，则需要使用[此处](http://orizens.com/wp/topics/javascript-arrays-passing-by-reference-or-by-value/)说明的 splice 函数。

请注意，这将创建大量数据副本。您可能想要使用本机 sort() 函数。

# java - 图片正在播放动画，图片可点击

> ID：14761035
> 
> 赞同：1
> 
> 时间：2013-02-07T21:09:40.147
> 
> 标签：java, android, animation, onclick, click

我为图像制作了一个简单的动画，并在图像上设置了事件 OnClick 来祝酒。问题是我让图像开始在 onCreate 上制作动画，并且我设置了要单击的图像并触发 toast 但问题是图像不可点击，但是如果我按下原始位置图像，吐司开始（onClick没有随着动画移动）

谢谢你的帮助

这是 anim 文件夹中的动画代码 (translate.xml)

```
<?xml version="1.0" encoding="utf-8"?>
    <set xmlns:android="http://schemas.android.com/apk/res/android"
      android:interpolator="@android:anim/linear_interpolator" >
    <translate
        android:duration="1500"
        android:fromXDelta="-100%p"
        android:repeatCount="0"
        android:repeatMode="reverse"
        android:toXDelta="0" />

    </set> 
```

这是活动类

```
package com.example.animatest;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.ImageView;
import android.widget.Toast;

public class MainActivity extends Activity {

private ImageView image01;

private long aefe;
private ImageView image1;
private ImageView image2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    image01 = (ImageView) findViewById(R.id.imageView1);

    final Animation animTranslate1 = AnimationUtils.loadAnimation(this,
            R.anim.translate);

    image01.startAnimation(animTranslate1);

    image01.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View view) {

            Toast.makeText(MainActivity.this, "hello", Toast.LENGTH_SHORT)
                    .show();

        }
    });

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:23:32.640

阅读 Android 动画系统的文档（[文档链接](http://developer.android.com/guide/topics/graphics/overview.html)），特别是 View Animation 和 Property Animation 之间的区别。以下是来自 View Animation 文档的引用：

> 注意：无论您的动画如何移动或调整大小，保存动画的 View 的边界都不会自动调整以适应它。

本质上，当使用 View Animation 时，视图本身永远不会被翻译，只有它被绘制的位置。对象保持在其原始坐标，这就是为什么您必须点击旧位置才能获得事件。这是 View Animation 的一个已知限制，也是在 Android 3.0+ 中引入 Property Animation 的原因之一

# objective-c - Cocos2d 在 NSWindowController 自定义 View 中创建 CCG LView

> ID：14761040
> 
> 赞同：0
> 
> 时间：2013-02-07T21:10:17.440
> 
> 标签：objective-c, opengl-es, cocos2d-iphone, nswindowcontroller

我希望能够让 Cocos2d 包含在它自己的 NSWindowController 中，这样 AppDelegate 将能够管理在不同窗口中同时运行的多个不同的 Cocos2d 实例。

每次我在 NSWindowController 子类中加载 Cocos2d 时，我都会在 OpenGL 视图中看到一个空白视图。

![生成的 OpenGL 视图子类化为 CCGLView](../Images/54908589ee6a43fac627c5b4169434f9.png)

为什么不能正确渲染场景？

**Cocos2dWindowController.h**

```
#import <Cocoa/Cocoa.h>
#import "cocos2d.h"

@interface Cocos2dWindowController : NSWindowController <CCDirectorDelegate>{

    CCGLView    *glView_;

}

@property (strong) IBOutlet CCGLView    *glView;

@end 
```

**Cocos2dWindowController.mm**

```
#import "Cocos2dWindowController.h"
#import "PuzzleWorld.h"

@interface Cocos2dWindowController ()

@end

@implementation Cocos2dWindowController

@synthesize glView=glView_;

- (id)initWithWindow:(NSWindow *)window
{
    self = [super initWithWindow:window];
    if (self) {
        // Initialization code here.

    }

    return self;
}

- (void)windowDidLoad
{
    [super windowDidLoad];

    // Implement this method to handle any initialization after your window controller's window has been loaded from its nib file.

    //Check to see if the view is empty prior to launching
    CCDirectorMac *director = (CCDirectorMac*) [CCDirector sharedDirector];
    // enable FPS and SPF
    [director setDisplayStats:YES];

    // connect the OpenGL view with the director
    [director setView:glView_];

    director.delegate = self;

    // EXPERIMENTAL stuff.
    // 'Effects' don't work correctly when autoscale is turned on.
    // Use kCCDirectorResize_NoScale if you don't want auto-scaling.

    [director setResizeMode:kCCDirectorResize_AutoScale];

    // Enable "moving" mouse event. Default no.
    [self.window setAcceptsMouseMovedEvents:NO];

    // Center main window
    [self.window center];

    CCScene *scene = [CCScene node];

    [scene addChild:[PuzzleWorld node]];

    // Run whatever scene we'd like to run here.
    if(director.runningScene)
        [director replaceScene:scene];
    else
        [director runWithScene:scene];

}

//Override the close action to kill off Cocos2d and OpenGl
- (void)close{

    [super close];

    //Check to see if the view is empty prior to launching
    CCDirectorMac *director = (CCDirectorMac*) [CCDirector sharedDirector];
    [director setDelegate:nil];
    [director end];

}

@end 
```

![Xib 配置](../Images/1343bd2c2fd7d5d88a494f59a1c0a62e.png)

这发生在带有 Xcode 版本 4.6 (4H127) 的 Cocos2d 2.0 上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:45:17.413

我不能告诉你为什么你的屏幕是白色的。如果您基于 Cocos2D Mac 模板，请检查 MainWindow.xib。Cocos2D 视图跨越整个窗口，所以只需调整它的大小并使用它。

我**可以**告诉你的是，你**运行多个 cocos2d 视图的目标是徒劳的**：cocos2d 只支持一个视图。

多年来，对多视图的支持一直在路线图上，而且看起来不会很快出现。考虑到 cocos2d 对许多核心类（Director、ActionManager、Scheduler、Caches 等）的 Singleton 的依赖程度，这也是一个不小的变化。

# unit-testing - Jasmine 使用 templateUrl 测试 AngularJS 指令

> ID：14761045
> 
> 赞同：71
> 
> 时间：2013-02-07T21:10:28.283
> 
> 标签：unit-testing, angularjs, jasmine, angularjs-directive

我正在用 Jasmine 为 AngularJS 编写指令测试，并与它们一起使用 templateUrl：[https ://gist.github.com/tanepiper/62bd10125e8408def5cc](https://gist.github.com/tanepiper/62bd10125e8408def5cc)

但是，当我运行测试时，我得到了要点中包含的错误：

```
Error: Unexpected request: GET views/currency-select.html 
```

从我在文档中读到的内容来看，我认为我这样做是正确的，但似乎并非如此 - 我在这里错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-02-07T21:45:55.653

### 如果您使用的是 ngMockE2E 或 ngMock：

*所有*HTTP 请求都使用您指定的规则在本地处理，*没有一个*请求被传递到服务器。由于模板是通过 HTTP 请求的，因此它们也在本地处理。由于当您的应用程序尝试连接时您没有指定要执行的任何操作`views/currency-select.html`，它会告诉您它不知道如何处理它。您可以轻松地告诉 ngMockE2E 传递您的模板请求：

```
$httpBackend.whenGET('views/currency-select.html').passThrough(); 
```

请记住，如果您愿意，您还可以在路由路径中使用正则表达式来传递所有模板。

文档对此进行了更详细的讨论：http: [//docs.angularjs.org/api/ngMockE2E.$httpBackend](http://docs.angularjs.org/api/ngMockE2E.$httpBackend)

### 否则使用这个：

您需要使用`$injector`来访问新的后端。从链接的文档：

```
var $httpBackend;
beforeEach(inject(function($injector) {
  $httpBackend = $injector.get('$httpBackend');
  $httpBackend.whenGET('views/currency-select.html').respond(200, '');
})); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-05-10T17:51:03.267

Karma 方式是将模板 html 动态加载到 $templateCache 中。您可以只使用 html2js 业力预处理器，如此[处所述](https://github.com/vojtajina/ng-directive-testing/blob/master/test/tabsSpec.js)

这归结为将模板“ *.html”添加到 conf.js 文件中的文件以及预处理器 = { '* .html': 'html2js' };

并使用

```
beforeEach(module('..'));

beforeEach(module('...html', '...html')); 
```

进入你的 js 测试文件

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-06-29T07:18:53.040

如果这是一个单元测试，您将无法访问`$httpBackend.passthrough()`. 这仅在 ngMock2E2 中可用，用于端到端测试。我同意涉及`ng-html2js`（曾经被命名为 html2js）的答案，但我想在这里扩展它们以提供完整的解决方案。

为了呈现你的指令，Angular 使用`$http.get()`从`templateUrl`. 因为这是单元测试并且`angular-mocks`已加载，`angular-mocks`所以拦截调用`$http.get()`并给您`Unexpected request: GET`错误。您可以尝试找到绕过此问题的方法，但仅使用 Angular`$templateCache`预加载模板要简单得多。这样一来，`$http.get()`也不会成为问题。

这就是[ng-html2js 预处理器](https://github.com/karma-runner/karma-ng-html2js-preprocessor)为你做的事情。要让它工作，首先安装它：

```
$ npm install karma-ng-html2js-preprocessor --save-dev 
```

然后通过添加/更新以下字段来配置它`karma.conf.js`

```
{
    files: [
      //
      // all your other files
      //

      //your htmp templates, assuming they're all under the templates dir
      'templates/**/*.html'
    ],

    preprocessors: {
        //
        // your other preprocessors
        //

        //
        // tell karma to use the ng-html2js preprocessor
        "templates/**/*.html": "ng-html2js"
    },

    ngHtml2JsPreprocessor: {
        //
        // Make up a module name to contain your templates.
        // We will use this name in the jasmine test code.
        // For advanced configs, see https://github.com/karma-runner/karma-ng-html2js-preprocessor
        moduleName: 'test-templates',
    }
} 
```

最后，在您的测试代码中，使用`test-templates`您刚刚创建的模块。只需添加`test-templates`到您通常在 中进行的模块调用`beforeEach`，如下所示：

```
beforeEach(module('myapp', 'test-templates')); 
```

从这里开始应该一帆风顺。要更深入地了解这个和其他指令测试场景，请查看[这篇文章](http://taivo.github.io/guides/unit-testing-angular-directives)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-07T22:48:41.827

您也许可以`$templatecache`从注射器中获取，然后执行类似的操作

```
$templateCache.put("views/currency-select.html","<div.....>"); 
```

代替`<div.....>`您将模板放在哪里。

之后你设置你的指令，它应该工作得很好！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-11T05:11:01.630

如果还是不行，用fiddler查看htmltojs处理器动态生成的js文件的内容，检查模板文件的路径。

它应该是这样的

```
angular.module('app/templates/yourtemplate.html', []).run(function($templateCache) {
  $templateCache.put('app/templates/yourtemplate.html', 
```

就我而言，它与导致问题的实际指令中的不同。

在所有地方都有完全相同的 templateURL 让我通过了。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-06-25T03:52:06.563

根据要求，将评论转换为答案。

* * *

对于想要在**Yeoman**应用程序中使用 @Lior 答案的人：

有时在 karma config 中引用模板的方式以及因此产生的模块名称与指令定义中`ng-html2js`指定为 s 的值不匹配。 您将需要调整生成的模块名称以匹配s。 这些可能会有所帮助：`templateUrl`
`templateUrl`

*   [https://github.com/karma-runner/karma-ng-html2js-preprocessor#configuration](https://github.com/karma-runner/karma-ng-html2js-preprocessor#configuration)
*   要点：[https ://gist.github.com/vucalur/7238489](https://gist.github.com/vucalur/7238489)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-07-21T05:59:32.417

这是如何测试使用部分作为 templateUrl 的指令的示例

```
describe('with directive', function(){
  var scope,
    compile,
    element;

  beforeEach(module('myApp'));//myApp module

  beforeEach(inject(function($rootScope, $compile, $templateCache){
   scope = $rootScope.$new();
   compile = $compile;

   $templateCache.put('view/url.html',
     '<ul><li>{{ foo }}</li>' +
     '<li>{{ bar }}</li>' +
     '<li>{{ baz }}</li>' +
     '</ul>');
   scope.template = {
     url: 'view/url.html'
    };

   scope.foo = 'foo';
   scope.bar = 'bar';
   scope.baz = 'baz';
   scope.$digest();

   element = compile(angular.element(
    '<section>' +
      '<div ng-include="template.url" with="{foo : foo, bar : bar, baz : baz}"></div>' +
      '<div ng-include="template.url" with=""></div>' +
    '</section>'
     ))(scope);
   scope.$digest();

 }));

  it('should copy scope parameters to ngInclude partial', function(){
    var isolateScope = element.find('div').eq(0).scope();
    expect(isolateScope.foo).toBeDefined();
    expect(isolateScope.bar).toBeDefined();
    expect(isolateScope.baz).toBeDefined();
  })
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-15T11:11:35.587

如果您将[jasmine-maven-plugin](https://searls.github.io/jasmine-maven-plugin/)与 RequireJS 一起使用，您可以使用[文本插件](https://github.com/requirejs/text)将模板内容加载到变量中，然后将其放入模板缓存中。

```
 define(['angular', 'text!path/to/template.html', 'angular-route', 'angular-mocks'], function(ng, directiveTemplate) {
    "use strict";

    describe('Directive TestSuite', function () {

        beforeEach(inject(function( $templateCache) {
            $templateCache.put("path/to/template.html", directiveTemplate);
        }));

    });
}); 
```

# c# - 如何重复使用相同的代码来清除文本框

> ID：14761046
> 
> 赞同：0
> 
> 时间：2013-02-07T21:10:29.653
> 
> 标签：c#, winforms, visual-studio-2010

我有很多文本框和大约五个按钮。我想清除文本框并做一些在所有五个按钮中重复的其他事情。我想创建一个新类并放置所有重复的代码，以便我可以通过函数或方法重用代码。但是，问题是如果我创建一个新类，文本框会被识别。例如，如果我说`txtFirstName.Clear()`在一个新班级中，它不会被识别，因为它是一个新班级。有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:23:14.677

为您需要一直重复使用的代码创建一个具有静态方法的实用程序类。一个示例是一种方法，您可以将容器引用传递给它，它会清除该容器或任何子容器内的所有文本框（或将它们设为只读）。请参阅下面的代码：

```
public class utility
{

public static void MyTextBoxes(Control container, string CommandName){

        foreach (Control c in container.Controls){
        MyTextBoxes(c, CommandName);        

        if(c is TextBox){ 
          switch (CommandName)
          {
            case "Clear":
                c.Text = "";   
                break;
            case "ReadOnly":
                ((TextBox)c).ReadOnly = true;
                break;
          }  

        }   
    }    
} 
```

在您的`Form`代码中，调用如下方法：

```
utility.MyTextBoxes(this, "Clear");
utility.MyTextBoxes(this, "ReadOnly"); 
```

这样，我使用相同的方法通过将命令指定为字符串来执行不同的命令。如果您愿意，您可以使用不同的方法执行不同的命令（以提高代码的可读性）。我相信这已经让您了解了如何创建实用程序方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:13:44.207

您可以将文本框引用传递给类上的新方法。

```
public void ClearTextbox(Textbox textBoxToClear) { textBoxToClear.Clear; } 
```

只需将您的文本框传递给新方法。

或清除一堆文本框：

```
public void ClearTextBoxes(IEnumerable<Textbox> textBoxesToClear) { foreach(Textbox textbox in textBoxesToClear) {textbox.Clear();} } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:14:35.923

您可以通过将当前表单作为参数传递给新类的构造函数来实现此目的。

```
public class MyNewClass
{
    Form1 _form;

    public MyNewClass(Form1 form)
    {
        _form = form;
    }

    public void ClearTextBoxes()
    {
        _form.txtFirstName.Clear();
        //Clear the rest
    }
} 
```

# java - JAXB 编组不会忽略命名空间

> ID：14761051
> 
> 赞同：0
> 
> 时间：2013-02-07T21:11:02.813
> 
> 标签：java, jaxb, marshalling, xml-namespaces, unmarshalling

我花了一些时间调查问题是什么，但我无法解决。当我在 XML 下面解组并编组回来时，我看到了不同的 XML。

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root>
 <one>test</one>
 <three>\MySG\test.jsp</three>
 <two>
    <st>
        <seeta>
            <Source>

                <problemtag xmlns="uuid:B89290D2-36FB-4EBC-A581-69B16D59EB92">
                    <p>deploy_test_page_renderingMetadata</p>
                </problemtag>
            </Source>
        </seeta>
        <Template id="tcm:1-63-32" title="Smart Compound Component Template"/>
        <Publication id="tcm:0-1-1" title="Publication"/>
    </st>
 </two>
</root> 
```

*   在上面的 xml 中，只有一个标签（第一个）预期剩余所有（包括命名空间）是意外元素。另一个应用程序发送上述 XML。

# 我的映射是这样的

```
 package com.seeta.xml;

import java.util.ArrayList;
import java.util.List;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAnyElement;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name="root")
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {
    @XmlElement(name="one")
    private String one;

    public String getOne() {
        return one;
    }

    public void setOne(String one) {
        this.one = one;
    }

    @XmlElement(name="three")
    private String three;

    @XmlAnyElement
    private List<Object> remaining = new ArrayList<Object>();

    public String getThree() {
        return three;
    }

    public void setThree(String three) {
        this.three = three;
    }

    public List<Object> getRemaining() {
        return remaining;
    }

    public void setRemaining(List<Object> remaining) {
        this.remaining = remaining;
    }

    public String toString() {
        return String.format("One [%s]-> Number of remaing elements [%d]-> three [%s]", one, remaining.size(), three);
    }
} 
```

# 这是我的简单代码

```
package com.seeta.xml;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.StringWriter;
import java.net.URL;
import java.net.URLDecoder;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import javax.xml.bind.Unmarshaller;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.OutputKeys;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.w3c.dom.Document;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
        public class JaxbSample {

        public Document getDOMDocument(InputStream inputStream) throws ParserConfigurationException, SAXException, IOException {
            DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();
            documentBuilderFactory.setNamespaceAware(true);
            DocumentBuilder documentBuilder = documentBuilderFactory.newDocumentBuilder();
            if (inputStream != null) {
                return documentBuilder.parse(new InputSource(inputStream));
            } else {
                return documentBuilder.newDocument();
            }
        }
        public Root unmarshall(Document document) throws JAXBException {
            JAXBContext context = JAXBContext.newInstance(Root.class);
            Unmarshaller unmarshaller = context.createUnmarshaller();
            Root root = (Root) unmarshaller.unmarshal(document);
            return root;
        }

        public Document marshall(Root root) throws JAXBException, ParserConfigurationException, SAXException, IOException {
            JAXBContext context = JAXBContext.newInstance(Root.class);
            Marshaller marshaller = context.createMarshaller();
            Document document = getDOMDocument(null);
            marshaller.marshal(root, document);
            return document;
        }

        private String transform(Document document) throws TransformerException {
            StringWriter sw = new StringWriter();
            TransformerFactory transformerFactory = TransformerFactory.newInstance();
            Transformer transformer = transformerFactory.newTransformer();
            transformer.setOutputProperty(OutputKeys.INDENT, "yes");
            transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
            transformer.transform(new DOMSource(document), new StreamResult(sw));
            return sw.toString();
        }

        public void testUnmarshallMarshallUsingDocument() throws ParserConfigurationException, SAXException, IOException, JAXBException, TransformerException {
            InputStream inputStream = this.getClass().getResourceAsStream("jaxb.xml");
            Document document = getDOMDocument(inputStream);
            Root root = unmarshall(document);
            Document documentAfterMarshal = marshall(root);
            String output = transform(documentAfterMarshal);
            System.out.println(output);
        }

        public static void main(String[] args) throws ParserConfigurationException, SAXException, IOException, JAXBException, TransformerException {
            JaxbSample jaxbTest = new JaxbSample();
            jaxbTest.testUnmarshallMarshallUsingDocument();
        }
    } 
```

# 输出是

```
 <root>
<one>test</one>
<three>\MySG\test.jsp</three>
<two>
<st>
<seeta>
<Source>
<problemtag:problemtag xmlns="uuid:B89290D2-36FB-4EBC-A581-69B16D59EB92" xmlns:problemtag="uuid:B89290D2-36FB-4EBC-A581-69B16D59EB92">
<p>deploy_test_page_renderingMetadata</p>
                </problemtag:problemtag>
            </Source>
        </seeta>
<Template id="tcm:1-63-32" title="Smart Compound Component Template"/>
<Publication id="tcm:0-1-1" title="Publication"/>
    </st>
 </two>
</root> 
```

# 我也尝试了以下

*   我尝试使用 NamespacePrefixMapper。我可以提供不同的命名空间但不能为空（“”）。我根本不想要任何命名空间。

new NamespacePrefixMapper() { public String getPreferredPrefix(String namespaceUri, String 建议，布尔 requirePrefix) { return ""; } };

*   我们的项目中没有任何 xsd（至少我不知道）来尝试不合格的东西

*   我真的不明白 QName 的事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:38:53.717

如果您只想保留未使用的元素并将它们编组回来，我认为您应该能够执行以下操作：

```
@XmlRootElement(name="Root")
@XmlAccessorType(XmlAccessType.FIELD)
class Root {
    @XmlElement(name="One")
    private String one;

    @XmlAnyElement
    private List<Any> otherElements;
}

class AnyAdapter extends XmlAdapter<Element,Any> {
    @Override
    public Any unmarshal(Element element) throws Exception {
        return new Any(element);
    }

    @Override
    public Element marshal(Any any) throws Exception {
        return any.element;
    }
}

@XmlJavaTypeAdapter(AnyAdapter.class)
class Any {
    Element element;

    Any(Element element) {
        this.element = element;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:43:12.523

> 我根本不想要任何命名空间。

您将无法单独使用 JAXB 完成此操作。告诉解组器将`@XmlAnyElement`它无法处理的元素转储到您的列表中。这些元素附加了命名空间。然后，当您对这些元素进行编组时，将使用它们的命名空间来编写它们。

一种选择是使用不知道名称空间的 DOM 解析器解析传入的 XML，然后使用 DOM 树解组它。[`Unmarshaller`JavaDoc](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Unmarshaller.html)中有一个这样的例子（它使用了一个命名空间感知解析器；应该很明显改变什么让它不知道命名空间）。

> 我真的不明白 QName 的事情

你的意思是你不明白为什么输出是一个限定名，或者为什么它选择了特定的前缀？或者 QNames 是什么意思？

这是一个限定名称，因为这是表示元素的最明确的方式。

我不能告诉你为什么它选择了这个特定的前缀；JAXP 序列化程序选择短名称，如“ns1”、“ns2”等。

# java - 使用 Jsch 绕过或强制会话身份验证

> ID：14761054
> 
> 赞同：2
> 
> 时间：2013-02-07T21:11:08.310
> 
> 标签：java, sftp, jsch

我正在使用`com.jcraft.jsch.JSch`创建 SFTP 连接。

有没有办法绕过/跳过无法建立连接的真实性时弹出的真实性警告？

这里有更多细节：

我的代码看起来有点像这样：

```
Session session = jsch.getSession(user, host, port);
UserInfo ui = new MyUserInfo();
session.setUserInfo(ui);
session.connect(); 
```

`session.connect();`调用该行时，我收到一个弹出窗口，内容为：

```
The authenticity of host <MY HOST> can't be established.
...
Are you sure you want to continue connecting?
[No] [Yes] 
```

有没有办法以编程方式绕过/跳过此弹出窗口并接受连接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T21:21:38.337

看看 Jsch 的这些例子：[http://www.jcraft.com/jsch/examples/Exec.java.html](http://www.jcraft.com/jsch/examples/Exec.java.html) [http://www.jcraft.com/jsch/examples/Shell.java.html](http://www.jcraft.com/jsch/examples/Shell.java.html)你会请注意，它们都创建了一个自定义`UserInfo`类并将其传递给带有`session.setUserInfo(UserInfo ui);`.

避免该弹出窗口的方法是传入您自己的`UserInfo`对象。您可以通过扩展`UserInfo`类并覆盖`promptYesNo`函数来做到这一点，如下所示：

```
public boolean promptYesNo(String str){ return true; } 
```

请注意，名称以“提示”一词开头的所有函数都用于通过弹出对话框提示用户输入信息。您可以覆盖这些函数以以其他方式传递信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-14T02:40:15.287

我知道这个线程已经很老了，如果它已经解决了就不需要任何回复，但是一周前我也在研究一个有类似要求的应用程序。

Jon7 说的是对的；除此之外，还有一种不同的方式，即不扩展任何类。

```
Session session = jsch.getSession(user, host, port);
...
Properties prop = new Properties();
prop.setProperty("StrictHostKeyChecking", "no");
session.setConfig(prop);
session.connect(); 
```

只是另一种可以帮助他人的方式:)

问候，

icr

# ssis - ssisPackage.Execute (false, null, executionParameter) 超时

> ID：14761056
> 
> 赞同：1
> 
> 时间：2013-02-07T21:11:24.160
> 
> 标签：ssis

我正在尝试以编程方式执行一个包。SSIS 包是使用项目部署模型部署的。我以以下为例： [http ://microsoft-ssis.blogspot.com/2013/01/call-ssis-2012-package-within-net.html](http://microsoft-ssis.blogspot.com/2013/01/call-ssis-2012-package-within-net.html)

```
 // Connection to the database server where the packages are located             
    SqlConnection ssisConnection = new SqlConnection
            (@"Data Source=SSIS_SERVER;Initial Catalog=master;
               Integrated Security=SSPI;");   

// SSIS server object with connection             
    IntegrationServices ssisServer = new IntegrationServices(ssisConnection);        

// The reference to the package which you want to execute  
     // (Note: formatted for ease of reading)           
    PackageInfo ssisPackage = ssisServer
                               .Catalogs["SSISDB"]
                               .Folders["DEV_FOLDER"]
                               .Projects["TestParentChildDeployment"]
                               .Packages["Child.dtsx"];     

// Add execution parameter to override the default asynchronized execution. 
//If you leave this out the package is executed asynchronized             

    //Collection<PackageInfo.ExecutionValueParameterSet> executionParameter 
    //    = new Collection<PackageInfo.ExecutionValueParameterSet>();   

    var executionParameter = new Collection<PackageInfo
                                   .ExecutionValueParameterSet>();

    executionParameter.Add
        (new PackageInfo.ExecutionValueParameterSet 
            { 
                ObjectType = 50
                              , ParameterName = "SYNCHRONIZED"
                              , ParameterValue = 1 
            }
        );               

// Get the identifier of the execution to get the log             
    long executionIdentifier = ssisPackage.Execute (false, null, executionParameter); // Times out here <<<< 
```

这是错误：消息=超时已过期。在操作完成之前超时时间已过或服务器没有响应。

它偶尔会成功运行一次，但通常会失败。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:26:34.053

这是我的解决方案。不是同步调用包，而是异步调用，并在调用代码中使用 ManualResetEvent 来阻塞主线程，直到包完成。

```
namespace Anthony.Staging.Integration.Tests
{
    using System;
    using System.Data;
    using System.Data.SqlClient;
    using System.Diagnostics;
    using System.Linq;
    using System.Threading;
    using Microsoft.SqlServer.Management.Common;
    using Microsoft.VisualStudio.TestTools.UnitTesting;

    //Add references via %WINDIR%\assembly\GAC_MSIL\:
    /* Microsoft.SqlServer.ConnectionInfo
     * Microsoft.SqlServer.Management.InterationServices
     * Microsoft.SqlServer.Management.Sdk.Sfc
     * Microsoft.SqlServer.Smo
     */
    using Microsoft.SqlServer.Management.IntegrationServices;

    [TestClass]
    public class ConnectionTests
    {
        private const string connectionString = @"Data Source=Anthony\MSSQL11;Initial Catalog=SSISDB;Integrated Security=SSPI;";

        private static SqlConnection connection;

        private static ServerConnection conn;

        private static IntegrationServices ssis;

        private static string catalog = "SSISDB";

        private static string folder = "Anthony.Integration";

        [TestInitialize]
        public void MyTestInitialize()
        {
            connection = new SqlConnection(connectionString);
            ssis = new IntegrationServices(connection);
        }

        [TestMethod]
        public void CanConnect()
        {
            Assert.IsNotNull(connection);
            Assert.IsTrue(connection.State == ConnectionState.Open);
        }

        [TestMethod]
        public void CanGetKnownPackage()
        {
            try
            {
                var package = this.GetPackage(catalog, folder, "Anthony.Staging", "_Extract_Full.dtsx");
                Assert.IsNotNull(package);
            }
            catch (Exception ex)
            {
                Assert.Fail(ex.Message);
            }
        }

        [TestMethod]
        public void CanExecuteKnownPackage()
        {
            const int MAX_RETRIES = 20;
            const int RETRY_INTERVAL_SECONDS = 10; 
            const int OPERATION_TIMEOUT_MINUTES = 10;

            // get the package from the SSISCatalog and start it asynchronously
            // because starting it synchronously will time out after 30 seconds.
            var package = this.GetPackage(catalog, folder, "Anthony.Staging", "_Extract_Full.dtsx");
            var executionIdentifier = package.Execute(false, null);

            // block the main thread and kick off a timer immediately which checks execution status for an ssis execution identifier.
            var mre = new ManualResetEvent(false);
            var statusChecker = new StatusChecker(executionIdentifier, MAX_RETRIES);
            var timer = new Timer(statusChecker.CheckStatus, new StatusCheckerState(mre), new TimeSpan(0, 0, 0), new TimeSpan(0, 0, RETRY_INTERVAL_SECONDS)); 
            WaitHandle.WaitAny(new WaitHandle[] { mre }, (int)new TimeSpan(0, OPERATION_TIMEOUT_MINUTES, 0).TotalMilliseconds, false);
            mre.Dispose();
            timer.Dispose();

            // get the results
            var execution = ssis.Catalogs.Single(x => x.Name.Equals(catalog)).Executions.Single(x => x.Id.Equals(executionIdentifier));
            var errors = execution.Messages.Where(m => m.MessageType == 120).Select(m => m.Message);
            var warnings = execution.Messages.Where(m => m.MessageType == 110).Select(m => m.Message);
            Assert.AreEqual(0, errors.Count());
            Assert.AreEqual(Operation.ServerOperationStatus.Success, execution.Status);
        }

        class StatusCheckerState
        {
            public StatusCheckerState(ManualResetEvent waitHandle)
            {
                this.WaitHandle = waitHandle;
            }

            public ManualResetEvent WaitHandle { get; private set; }
        }

        class StatusChecker
        {
            private readonly long executionIdentifier;

            private int invokeCount;

            private ManualResetEvent waitHandle;

            private readonly int maximumCount;

            public StatusChecker(long executionIdentifier, int maxCount)
            {
                this.executionIdentifier = executionIdentifier;

                invokeCount = 0;
                maximumCount = maxCount;
            }

            // This method is called by the timer delegate. 
            public void CheckStatus(object state)
            {
                var localState = ((StatusCheckerState)state);
                this.waitHandle = localState.WaitHandle;

                if (invokeCount > 0)
                {
                    Debug.WriteLine("Retry attempt: {0}", invokeCount);
                }

                invokeCount++;
                if (invokeCount == maximumCount)
                {
                    // Reset the counter and signal Main.
                    invokeCount = 0;
                    waitHandle.Set();
                }

                var execution = new IntegrationServices(connection).Catalogs.Single(x => x.Name.Equals(catalog)).Executions.Single(x => x.Id.Equals(executionIdentifier));
                Debug.WriteLine("Status of execution " + executionIdentifier + " is " + execution.Status);
                if (execution.Status == Operation.ServerOperationStatus.Success)
                {
                    // Reset the counter and signal Main.
                    invokeCount = 0;
                    waitHandle.Set();
                }
            }    
        }

        [TestCleanup]
        public void MyTestCleanup()
        {
            if(connection.State == ConnectionState.Open)
                connection.Close();

            ssis = null;
        }

        private PackageInfo GetPackage(string catalog, string folder, string project, string package)
        {
            if (ssis.Catalogs.Contains(catalog))
            {
                var cat = ssis.Catalogs[catalog];

                if (cat.Folders.Contains(folder))
                {
                    var fold = cat.Folders[folder];

                    if (fold.Projects.Contains(project))
                    {
                        var proj = fold.Projects[project];

                        if (proj.Packages.Contains(package))
                        {
                            var pkg = proj.Packages[package];
                            return pkg;
                        }
                    }
                }
            }

            throw new Exception("Cannot find package!");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-14T11:30:13.303

这是一些解决超时的代码......它有点脏，但效果很好：

```
// Get the identifier of the execution to get the log
long executionIdentifier = ssisPackage.Execute(false, null, executionParameter);

/****
* This is a shameful workaround to not having a timeout override 
* for PackageInfo.Execute.
****/
ExecutionOperation executionOperation = ssisServer.Catalogs["SSISDB"].Executions[executionIdentifier];

while (!(executionOperation.Completed))
{
  executionOperation.Refresh();
  System.Threading.Thread.Sleep(5000);
} 
```

**资料来源：** [https://social.msdn.microsoft.com/Forums/sqlserver/en-US/7f0967af-fdeb-4040-9c57-2fe14f2291b5/timeout-after-30-seconds-when-executing-package-via-net?论坛=sqlintegrationservices](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/7f0967af-fdeb-4040-9c57-2fe14f2291b5/timeout-after-30-seconds-when-executing-package-via-net?forum=sqlintegrationservices)

# php - $array[$key] 返回空值

> ID：14761057
> 
> 赞同：0
> 
> 时间：2013-02-07T21:11:25.210
> 
> 标签：php

任何人都可以快速查看我的阵列吗？

我不明白到底发生了什么。

这里是`var_dump($result)`

```
array(24) {
  ... had to remove some code
  ["fuel"]=>
  string(8) "Gasoline"
  ["type"]=>
  string(13) "Full-size Van"
  ["internetPrice"]=>
  string(4) "9988"
  ["listing title"]=>
  string(53) "2008 Ford Econoline E350 Super Duty One Owner Box Van"
  ["Car URL"]=>
  string(67) "http://www.familytrucksandvans.com/vehicle.cfm?vehicleID=220459648
"
} 
```

`$result['Car URL']`返回`NULL`（这是最后一个值），即使它存在。

所有其他值都有效（`$result['listing title']`等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:21:26.217

“汽车网址”最后有`\r`和`\n`符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:23:20.780

```
<?php

$array = array('Car URL'=> 'http://www.blablabla.com',
        'listing title' => '2008 Ford Mondeo');

print $array['Car URL'];

redi$ php test.php 
http://www.blablabla.com 
```

根据您在此处显示的内容，没有明显的理由说明它不应该起作用。

我的疯狂猜测是任何拼写错误

# sql-server-2008 - SQL Server 2008 - 避免 foreach 循环

> ID：14761061
> 
> 赞同：3
> 
> 时间：2013-02-07T21:11:35.043
> 
> 标签：sql-server-2008

我正在拼命地避免在 SQL Server 2008 中出现 foreach 情况（我的背景是 c#）。

基本上，我有一个 SKU 列表。对于列表中的每个 SKU，我需要执行一些计算以确定该特定 SKU 是否会显示在网络上。

要获取我的 SKU 列表，我使用以下命令：

```
SELECT Feed.StyleCode as SKU
FROM [eCommerce].[dbo].[BABW_ItemFeed] as Feed
WHERE Feed.ProductDefinition = 'Kit' 
```

返回这个：

![在此处输入图像描述](../Images/613062a2c76d497fa5a9bdf52ea82572.png)

为了计算每个 SKU 字段，我一直在使用这个：

```
DECLARE @SKU AS varchar(50)
SET @SKU= '11993_16559_16227'
SELECT
    @SKU as SKU,
    0 AS Quantity,
    MIN(ISNULL(Sending.IsActive, 'WEBNO')) AS IsActive, 
    MAX(ISNULL(Sending.IsDiscontinued, 1)) AS IsDiscontinued
FROM
( 
    SELECT * FROM [eCommerce].[dbo].[Split] (
      @SKU
      ,'_') 
) AS SplitSkus 
LEFT JOIN #SkusToSend AS Sending
    ON Sending.SKU = SplitSkus.items 
```

返回这个：

![在此处输入图像描述](../Images/07e09b06192e1e77182a43fecbadb35f.png)

现在我需要将两个表同步在一起，删除@SKU 声明。我认为我不能使用 UNION 来执行此操作，因为第二个功能需要预先了解它将处理的 SKU……而 JOIN 需要加入一些东西，而我不需要真的有。是否有一些我不熟悉的功能可以在没有循环机制的情况下一次性创建完整的 SKU 表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T21:24:01.153

尝试[`CROSS APPLY`](http://technet.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)... 它将为中的每一行执行您的 UDF `BABW_ItemFeed`：

```
SELECT
    Feed.StyleCode as SKU,
    COUNT(*) AS Quantity,
    MIN(ISNULL(Sending.IsActive, 'WEBNO')) AS IsActive, 
    MAX(ISNULL(Sending.IsDiscontinued, 1)) AS IsDiscontinued
FROM
    [eCommerce].[dbo].[BABW_ItemFeed] as Feed 
    CROSS APPLY [eCommerce].[dbo].[Split] (Feed.StyleCode, '_') AS SplitSkus 
    LEFT JOIN #SkusToSend AS Sending
        ON Sending.SKU = SplitSkus.items
WHERE
    Feed.ProductDefinition = 'Kit'
GROUP BY
    Feed.StyleCode 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:20:36.797

停止使用 Min() 和 Max()...否则，*拉*SKU（不要使用 SELECT 中的参数）。

试试这个：

```
SELECT
    SKU,
    0 AS Quantity,
    MIN(ISNULL(Sending.IsActive, 'WEBNO')) AS IsActive, 
    MAX(ISNULL(Sending.IsDiscontinued, 1)) AS IsDiscontinued
FROM
( 
SELECT [eCommerce].[dbo].[Split] (Feed.StyleCode,'_')  as SKU
FROM [eCommerce].[dbo].[BABW_ItemFeed] as Feed
WHERE Feed.ProductDefinition = 'Kit'
) AS SplitSkus 
LEFT JOIN #SkusToSend AS Sending
    ON Sending.SKU = SplitSkus.items 
```

# php - 包括和 _SERVER['REQUEST_URI']

> ID：14761065
> 
> 赞同：0
> 
> 时间：2013-02-07T21:11:59.487
> 
> 标签：php

我有 2 页。file2.php 正在生成链接，具体取决于您在网站上的哪个页面。

文件1.html

```
<!--#include virtual="file2.php" -->
<a href="<?php echo $link ?>">Link</a> 
```

文件2.php

```
$q = $_SERVER['REQUEST_URI'];
if (preg_match('/\bSOMETHING\b/i', $q)) {
    $link = "whateverpage.php";
    //... 
```

我的问题是在我的开发服务器上，我得到 $q=file1.html 但在我的实时服务器上，$q=file2.php。知道为什么我会得到 2 个不同的值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:17:20.990

如果文件、路径等完全一样，你可以比较 phpinfo(); 的结果。在每台机器上。

# jquery - 针对同一元素的jQuery多个按钮

> ID：14761071
> 
> 赞同：2
> 
> 时间：2013-02-07T21:12:19.933
> 
> 标签：jquery

我要做的是定位一个 div 并根据按钮单击用文本填充它。会说，三个按钮，用户单击第一个按钮，文本填充在下面的文本框中。

这是我的脚本代码：

```
<script type="text/javascript">
$(document).ready(function (){
$('#button1').click(function (){
            $('#textbox').empty();
    $('#textbox').prepend('Some text from Button 1');
});
});
</script> 
```

这是我到目前为止所拥有的：http: [//jsfiddle.net/nzTwU/](http://jsfiddle.net/nzTwU/)

这是我在这个网站上的第一个问题，所以如果有什么不对的地方，我很抱歉。我以前也从未使用过 jsfiddle，所以我希望这也是正确的。如果不是让我知道。

现在第一个按钮工作正常，我已经先清空了 div，所以如果你多次单击该按钮，它不会一遍又一遍地输入相同的文本。如何为其他按钮编写相同的脚本？我是否使用 if 语句？对于我正在尝试做的事情，是否有更好或更合适的方法？还是我想做的甚至可能？我对 jQuery 有非常基本的了解，但我不确定如何去做。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:15:57.047

```
(document).ready(function (){
$('#button1').click(function (){
            $('#textbox').empty();
    $('#textbox').prepend('Some text from Button 1');
});
  $('#button2').click(function (){
            $('#textbox').empty();
    $('#textbox').prepend('Some text from Button 2');
});
     $('#button3').click(function (){
            $('#textbox').empty();
    $('#textbox').prepend('Some text from Button 3');
});
}); 
```

这是我编辑过的 jsfiled

[http://jsfiddle.net/nzTwU/3/](http://jsfiddle.net/nzTwU/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:25:12.790

如果您不希望菜单中的所有按钮都添加文本，我会为您的按钮添加一个类。

此外，除非您想在 click 事件中为每个文本框硬编码 if 语句，否则您可以使用`data`元素将唯一文本添加到每个按钮：

```
<ul id="menu">
    <li class="buttons">
        <button id="button1" class="addtext" data-text="Some text from button 1">Button 1</button>
    </li>
    <li class="buttons">
        <button id="button2" class="addtext" data-text="Some other text from button 2">Button 2</button>
    </li>
    <li class="buttons">
        <button id="button3" class="addtext" data-text="Even more text from button 3">Button 3</button>
    </li>
</ul>
<div class="clear"></div>
<div id="textbox"></div> 
```

这样你就可以只写一个简单的函数并准备好文本：

```
$(document).ready(function () {
    $('.addtext').click(function () {
        $('#textbox').text($(this).data("text"));
    });
}); 
```

和一个很好的衡量标准的[jsFiddle](http://jsfiddle.net/Psnr5/2/ "jsFiddle")。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T21:21:06.310

```
$('.buttons button').click(function (){
            $('#textbox').empty().prepend('Some text from ' + $(this).attr('id'));
}); 
```

使用您的课程将`li`其应用于所有内容。在这个测试用例中，我们只获取点击的 ID 并将其用于文本。

由于您要跨多个相似对象寻找相同的功能，因此最好稍微抽象一下您的代码并将您的输出基于操作发生的元素。

[http://jsfiddle.net/nzTwU/5/](http://jsfiddle.net/nzTwU/5/)

# php - PHP登录不保护页面

> ID：14761075
> 
> 赞同：2
> 
> 时间：2013-02-07T21:12:27.763
> 
> 标签：php, login

我知道这个主题已经涵盖了很多，并且我已经查看和搜索过，所以我认为我缺少一些基本的东西。

我有一个用户名密码登录系统，设置为：

登录页面：设置为 Action - checklogin.php

checklogin.php - 检查数据库中的用户名和密码，然后在标题中将它们带到他们的自定义 URL，该 URL 位于数据库的第 3 列中。所以 user1 去 folder1/，user2 去 folder2/，等等。

它似乎工作正常，但假设我以 user1 (URL /folder1/) 身份登录，它允许我在 URL 窗口中输入“/folder2/”，然后文件夹索引文件出现。

所以基本上，如果我登录任何用户名，我可以拉出其他用户文件夹/index.php 文件。

所以我认为 index.php 页面上的代码无法正确验证用户。

代码（顶部很好，连接到数据库等，所以我把它省略了）：

```
checklogin.php:
// Define $username and $password
$username=$_POST['username'];
$password= $_POST['password'];

// To protect MySQL injection 
$username = stripslashes($username);
$password = stripslashes($password);
$username = mysql_real_escape_string($username);
$password = mysql_real_escape_string($password);

$sql="SELECT * FROM $tbl_name WHERE username='$username' and password='$password'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $username and $password, table row must be 1 row

if($count==1){

 // Register $username, $password and redirect to file "index.php"
session_start();
$_SESSION[$username];
$_SESSION[$password];
$_SESSION['loggedin'] = true;
$_SESSION[$id];
$row = mysql_fetch_assoc($result);
$result = mysql_query("SELECT folder FROM users2");
$_SESSION['folder'] = $row['folder'];
   if( isset($username) ) {
$_SESSION["loggedin"] = true;
$_SESSION["username"] = $username;
header('Location: clients/'. $row['folder'].'/index.php');
exit();
}
else {
echo "Wrong Username or Password";
}
ob_end_flush();
}
?> 
```

在接收 URL index.php 页面上：

```
session_start();
if (!isset($_SESSION['loggedin']) || $_SESSION['loggedin'] !== true)  {
// not logged in, move to login page
 header("location:../../login.php");
exit;
} 
```

我已经尝试了接收“保护页面”代码的许多其他变体，但似乎没有一个能正常工作。是接收码还是登录码？？？我觉得我错过了一些明显的东西。

在此先感谢，对此的任何看法将不胜感激。- 兰迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:05:34.500

您使用了很多不必要的`!==` 替换其中的大多数`!=`

也改变

```
if($count==1){ 
```

至

```
while($count>=1){ 
```

改变

```
if( isset($username) ) { 
```

至

```
if( isset($username) && $username != "" && $username != NULL ) { 
```

`Var_dump` `$result`，确保它包含你想要的，你已经列出了两次。

当您在会话中引用变量时，我建议双/单引用它。

`magic quotes`帮自己一个忙，完全避免`mssql()`。切换到`pdo`或`MYSQLI`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:21:17.373

您需要在受保护的页面中添加额外的检查；您不仅需要登录用户，还需要检查请求的路径并查看用户是否可以访问该路径。

类似的东西（例如......）：

```
session_start();
if (!isset($_SESSION['loggedin']) || $_SESSION['loggedin'] !== true 
    || stripos($_SERVER['REQUEST_URI'], $_SESSION['folder']) === false)  {
// not logged in, move to login page
 header("location:../../login.php");
exit;
} 
```

除此之外，您永远不应该存储纯文本密码，您应该真正切换到 PDO（或 mysqli）并使用绑定变量准备语句。

**编辑：**另一个明确发生了什么的解决方案：

```
session_start();
if (!isset($_SESSION['loggedin']) || $_SESSION['loggedin'] !== true)  {
  // not logged in, move to login page
  header("location:../../login.php");
  exit();
}
elseif (stripos($_SERVER['REQUEST_URI'], $_SESSION['folder']) === false)
{
  // $_SESSION['folder'] is not found in the path,
  // not user's folder, go to own folder
  header('Location: /clients/'. $_SESSION['folder'].'/index.php');
  exit();
}
else
{
  // show page of user
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T22:00:17.403

```
if (!isset($_SESSION['loggedin']) |$_SESSION['loggedin'] !== true)     
if (stripos($_SERVER['REQUEST_URI'], $_SESSION['folder']) === false)
 { 
// not logged in, move to login page
 header("location:../../login.php"); exit; } – RandyS just now edit 
```

# c# - 使用 FileHelper 格式化属性

> ID：14761076
> 
> 赞同：6
> 
> 时间：2013-02-07T21:12:33.493
> 
> 标签：c#, csv, filehelpers

[FileHelpers](http://www.filehelpers.com/)有一个不错的字段日期转换器：

```
[FieldConverter(ConverterKind.Date, "MM-dd-yyyy")] 
public DateTime MyDate; 
```

FieldConverter 虽然不适用于属性。我必须处理使用属性的对象，所以我正在寻找这样的东西：

```
[PropertyConverter(ConverterKind.Date, "MM-dd-yyyy")] 
public DateTime MyDate { get; set; } 
```

**如何使用属性执行此操作？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T21:50:33.260

您不能将转换器与属性一起使用。

但是，您可以做的只是为不绑定到域对象的导入/导出记录创建数据模型。这个数据模型可以有字段而不是属性。

因此，如果您有客户，例如，它是一个域持久数据对象，您可以创建类似 CustomerRecord 的东西，它将客户作为构造函数参数并复制所有数据（或使用类似 Automapper 的东西轻松地为您复制值），然后只需使用文件记录数据模型来执行文件助手操作，而不是域模型。

这似乎是额外的工作，而且确实如此，但它也将您的域模型与文件操作分离，这是一种良好的可维护性设计模式。

# java - 使用什么样的组件和技术来创建 Bitdefender 的 GUI？

> ID：14761080
> 
> 赞同：1
> 
> 时间：2013-02-07T21:12:47.593
> 
> 标签：java, swing, user-interface

我很好奇 BitDefender 的 GUI 上的每个组件是什么。我提供了一张图片，希望有人能解释这种类型的 GUI 是如何实现的。

我不想重新创建 GUI，我只是想知道是否有人可以为组件命名，也许可以告诉我他们做了什么来获得那种外观和感觉？

感谢任何花时间解释的人。

![在此处输入图像描述](../Images/65f70b4b1f49c4a161b1a2e13776aa24.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:42:39.403

Swing 的 GUI 框架非常灵活，顶部的大圆形按钮等任意组件很可能只是具有漂亮外观的自定义组件。

其余的只是看起来是具有自定义皮肤的标准组件，例如容纳防病毒/防火墙/反垃圾邮件/更新的大矩形只是 jpanels 甚至是不可选择的按钮。有很多方法可以让某件事情看起来像你想要的那样，而且从来没有一种标准的方法可以做到这一点。

# .htaccess - .htaccess 文件中过度热心的 RedirectMatch

> ID：14761081
> 
> 赞同：0
> 
> 时间：2013-02-07T21:13:04.030
> 
> 标签：.htaccess, mod-rewrite

我刚刚转换了一个包含数千个错误链接的网站，并且我一直在清理数以万计的索引错误，其中一些带有重定向 301，有些带有 RedirectMatch。但是，我遇到了一个令我困惑的错误。

.htaccess 文件中的这两行代码中的任何一个

```
RedirectMatch 301 /faqs(.*) http://www.belleviewanimalclinic.com/pet-care-faqs/
RedirectMatch 301 /faq(.*) http://www.belleviewanimalclinic.com/pet-care-faqs/ 
```

导致这个页面

`http://www.belleviewanimalclinic.com/denver-veterinarian-articles/faqs-about-pet-dentistry/`

被重定向到这里

`http://www.belleviewanimalclinic.com/pet-care-faqs/`

有很多以 /faqXXXXXX 开头的旧 URL 需要重定向到新的常见问题页面。但是，我不希望这适用于上面的文章。

有没有办法可以重写 RedirectMatch 规则，以便仅重定向以 /faq 开头的 URL，而不是请求 URL 中间的某个位置？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:45:08.087

使用插入符号匹配路径的开头：

```
RedirectMatch 301 ^/faqs?(.*) http://www.belleviewanimalclinic.com/pet-care-faqs/ 
```

我通过将“s”设为可选（通过在其后加上“？”）将这两行合并为一条。插入符号应该使路径必须以 faq 开头，而不仅仅是包含它。

*注意：我最初删除了起始斜线，因为匹配字符串通常在起始斜线之后开始，但是我更习惯于 RewriteRules 而不是 RedirectMatches，我相信行为可能会有所不同。*

# java - 如何让方法等待执行程序运行？

> ID：14761084
> 
> 赞同：1
> 
> 时间：2013-02-07T21:13:30.350
> 
> 标签：java, multithreading, executorservice, executor

我有一个执行器在 singleThreadExecutor 中运行，我需要在它完成调用其他方法（**saveJsonFile()**）之后，但只有当我的执行器完成时

我和执行人的课

```
 ExecutorService e = Executors.newSingleThreadExecutor();

                    //Download HTML and Unzip Threads
                    typeDownloaded = "html";
                    DownloadUtil.downloadHtml(e, this, dns, port, offlineUuid, filePathHtmlDownload, cookies, typeDownloaded);
                    UnzipUtil.unZipHtml(e, this, filePathHtmlDownload, outputFolder, typeDownloaded);
                    e.shutdown();
                    saveJsonFile(); 
```

我的 UnzipUtil 类：

```
public class UnzipUtil {

    public static void unZipHtml(Executor e, MainViewController controller, String zipFile, String outputFolder, String type) {
        e.execute(new UnzipTask(controller, zipFile, outputFolder, type));
    }

    public static void unZipImages(Executor e, MainViewController controller, int numImg, String outputFolder, String type) throws SystemException, PortalException {
        String filePath;

        filePath = System.getProperty("user.home") + File.separator + "Documents" + File.separator + "TargetApp" + File.separator + "TempImageDownload.zip";
        System.out.println(filePath);
        e.execute(new UnzipTask(controller, filePath, outputFolder, type));

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:22:32.123

也许我没有得到问题，但你不能使用[Futures 和 Callables](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html)吗？基本上，您可以指定一个“回调”，当您的解压缩任务完成时将调用它......从链接中引用（您还可以在其中找到有关如何使用机器的简单示例）：

> Future 表示异步计算的结果。提供了检查计算是否完成、等待其完成以及检索计算结果的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:18:43.787

使用提交而不是 e.exectute。这将返回一个 Future，result.get 将阻塞直到你的任务被执行

```
Future<?> result = e.submit(...);
result.get() 
```

# java - MySQL结果集到java数组

> ID：14761087
> 
> 赞同：0
> 
> 时间：2013-02-07T21:13:50.927
> 
> 标签：java, mysql, resultset

我目前做的事情做得不是很好。目的是从 MySQL 表中获取所有信息并将其放入数组中。一旦进入一个数组，我将使用 java 中的优先级队列并尝试让它与它一起工作......但这不是我目前遇到的问题。

public static void array(String args[]) { // 创建优先队列

```
 try { 
        String url = "jdbc:mysql://localhost:3306/project"; 
        Connection conn = DriverManager.getConnection(url,"root","nbuser"); 

        PreparedStatement stmt = conn.prepareStatement("SELECT user_id,s_date,e_date,d_date,department,projectname,projectapplication FROM booking");
        ResultSet rs; 
        rs=stmt.executeQuery();

                  List<User> userList = new ArrayList<User>();
        while(rs.next()) {
        User user = new User(); //issue here with non-static variable
        user.userid(rs.getString("user_id"));
        user.s_date(rs.getObject("s_date"));
        user.e_date(rs.getObject("e_date"));
        user.d_date(rs.getObject("d_date"));
        user.department(rs.getObject("department"));
        user.projectname(rs.getObject("projectname"));
        user.projectapplication(rs.getObject("projectapplication"));
        user.priority(rs.getObject("priority"));

        userList.add(user);
     }

        conn.close(); 
    } catch (Exception e) { 
        System.err.println("Got an exception! "); 
        System.err.println(e.getMessage()); 
    } 
} 
```

目的是让它遍历表中的所有不同部分并将它们填充到一个数组中，但我坚持填充数组。

任何帮助将不胜感激。

编辑：

```
public class User {
public String userid;
public String s_date;
public String e_date;
public String d_date;
public String department;
public String projectname;
public String projectapplication;
public int priority;

    private void userid(String string) {
        throw new UnsupportedOperationException("Not yet implemented");
    }

    private void s_date(Object object) {
        throw new UnsupportedOperationException("Not yet implemented");
    }

    private void e_date(Object object) {
        throw new UnsupportedOperationException("Not yet implemented");
    }

    private void d_date(Object object) {
        throw new UnsupportedOperationException("Not yet implemented");
    }

    private void department(Object object) {
        throw new UnsupportedOperationException("Not yet implemented");
    }

    private void projectname(Object object) {
        throw new UnsupportedOperationException("Not yet implemented");
    }

    private void projectapplication(Object object) {
        throw new UnsupportedOperationException("Not yet implemented");
    }

    private void priority(Object object) {
        throw new UnsupportedOperationException("Not yet implemented");
    }
} 
```

类似于这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:20:00.200

在 SQL 表中创建一个`User`具有适当字段的类，并将每个用户保存在一个列表中。

```
 List<User> userList = new ArrayList<User>();
  while(rs.next()) {
     User user = new User();
     user.setId(rs.getString("user_id"));
     user.setStartDate(rs.getTimestamp("s_date");
     ....
     userList.add(user);
  }
  return userList; 
```

**编辑**：

```
 class User {
   private String id;
   private Date startDate;
   //other fields need to be declared as well as their setter methods

   public void setStartDate(Date startDate) {
      this.startDate = startDate;
   }

   public void setId(String id) {
      this.id = id;
   }
  } 
```

我还建议看一下`JPA`and `Hibernate`。

# sql - 如何在我的第一次选择中使用第二次选择的结果

> ID：14761088
> 
> 赞同：3
> 
> 时间：2013-02-07T21:13:53.773
> 
> 标签：sql, sql-server, sql-server-2012

我试图用一秒钟`SELECT`来获取一些 ID，然后在一秒钟内使用该 ID，但`SELECT`我不知道如何。

```
SELECT Employee.Name 
FROM Emplyee, Employment 
WHERE x = Employment.DistributionID 
(SELECT Distribution.DistributionID FROM Distribution 
       WHERE Distribution.Location = 'California') AS x 
```

**这篇文章很长，但这里有一个简短的“提示”**

虽然我选择的语法不好，但逻辑却不是。我需要那个“x”。所以第二个`select`是最重要的。然后我必须在第一个`select`. 我只是不知道如何

**/小费**

这是我唯一能想象的，我对Sql很新，我想在练习之前我需要一本书，但现在我已经开始了，我想完成我的小程序。

**编辑：**

好的，我查了连接，还是不明白

```
SELECT Employee.Name 
    FROM Emplyee, Employment 
    WHERE x = Employment.DistributionID 
    LEFT JOIN Distribution ON
    (SELECT Distribution.DistributionID FROM Distribution 
           WHERE Distribution.Location = 'California') AS x 
```

`AS`在和获取错误消息`Left`

我使用名称从上红色中查找 ID，我使用从下表中的上红色中找到的 ID。然后我将找到的 ID 与 Green 匹配。我使用Green ID来查找对应的Name

![在此处输入图像描述](../Images/056e0019cc2337ddf2adae61ff898eba.png)

我有`California`来自 C# 的输出数据。我想用它`California`来查找 DistributionID。我使用 DistributionID 来查找 EmployeeID。我使用 EmployeeID 来查找 Name

**我的逻辑：**

```
Parameter: Distribution.Name (from C#)

Find DistributionID that has Distribution.Name
Look in Employment WHERE given DistributionID 
      reveals Employees that I am looking for (BY ID)
Use that ID to find Name
      return Name 
```

表：

**注意：**在此示例图片中，员工因选择而重复，它们实际上是单数

在“Locatie”（中间表）中是位置，我（再次）从 C# 中获取位置，我`California`以此为例。`ID`我首先要找到！

![在此处输入图像描述](../Images/12f5c6a3a5eb6db93b0c1ebcfa752691.png)

抱歉，它们不是英文的，但这里是创建表：

![在此处输入图像描述](../Images/b02effbd0a717e931eedfda558eba352.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T23:18:44.933

试试这个解决方案：

```
DECLARE @pLocatie VARCHAR(40)='Alba'; -- p=parameter

SELECT a.AngajatID, a.Nume
FROM Angajati a
JOIN Angajari j ON a.AngajatID=j.AngajatID
JOIN Distribuire d ON j.DistribuireID=d.DistribuireID
WHERE d.Locatie=@pLocatie 
```

您应该在 Angajari 表 (Employment) 上添加一个唯一键，因此：

```
ALTER TABLE Angajari
ADD CONSTRAINT IUN_Angajari_AngajatID_DistribuireID UNIQUE (AngajatUD, DistribuireID); 
```

这将防止重复`(AngajatID, DistribuireID)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T14:21:11.597

尝试这个：

```
SELECT angajati.Nume 
FROM angajati 
JOIN angajari  ON angajati.AngajatID = angajari.AngajatID
JOIN distribuire ON angajari.distribuireid = distribuire.distribuireid
WHERE distribuire.locatie = 'california' 
```

由于您有一张表将员工映射到他们的分布位置，因此您只需在中间加入该表即可创建映射。如果您喜欢 WHERE 子句，您可以使用变量，以便您可以将其作为存储过程调用，或者从 C# 代码的输出中调用任何您需要的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:26:03.493

I don't know how you are connecting Emplyee(sic?) and Employment, but you want to use a join to connect two tables and in the join specify how the tables are related. Joins usually look best when they have aliases so you don't have to repeat the entire table name. The following query will get you all the information from both Employment and Distribution tables where the distribution location is equal to california. You can join employee to employment to get name as well.

```
SELECT *
FROM Employment e
JOIN Distribution d on d.DistributionID = e.DistributionID
WHERE d.Location = 'California' 
```

This will return the contents of both tables. To select particular records use the alias.[Col_Name] separated by a comma in the select statement, like d.DistributionID to return the DistributionID from the Distribution Table

# android - Ext.device.Connection.isOnline() 和 Ext.browser.is.WebView 在 Sencha Touch 2.0.1 上不起作用

> ID：14761092
> 
> 赞同：2
> 
> 时间：2013-02-07T21:14:01.790
> 
> 标签：android, cordova, sencha-touch-2, cordova-2.0.0, android-2.3-gingerbread

我正在使用 Sencha Touch 开发 Android 应用程序，但 Ext.device.Connection.getType() 总是为我返回 UNKNOWN。我找到了使用 navigator.onLine 函数的解决方法（来自[确定互联网连接是否可用](https://stackoverflow.com/questions/5728346/determine-if-internet-connection-is-available)）。然而，我有点担心这个基本功能没有按照文档（[http://docs.sencha.com/touch/2-0/#!/api/Ext.device.Connection](http://docs.sencha.com/touch/2-0/#!/api/Ext.device.Connection)）工作。查看源代码（[http://docs.sencha.com/touch/2-0/source/Connection2.html#Ext-device-Connection](http://docs.sencha.com/touch/2-0/source/Connection2.html#Ext-device-Connection)）我看到 Connection 构造函数检查 Ext.browser.is.WebView 并很好奇. 运行以下行会记录很多看似不正确的信息：

```
for (prop in Ext.browser.is) { console.log('Ext.browser.is.' + prop + ': ' + Ext.browser.is[prop]); } 
```

例如：

```
Ext.browser.is.Safari: true
Ext.browser.is.WebView: false
Ext.browser.is.webview: false 
```

这些 Ext.browser.is 属性是否错误？似乎 Ext.browser.is 属性可能会在我的应用程序中导致许多其他问题，而 Connection.isOnline 只是更深层次问题的症状。是否有让 Ext.device.Connection.isOnline() 工作的特定技术或代码？

如果在我的应用程序的要求中获得了“Ext.device.Device”和“Ext.device.Connection”，并且在 AndroidManifest.xml 中有以下权限：

```
<uses-permission android:name="android.permission.INTERNET" />   
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

我正在使用 Sencha Touch 2.0.1（使用 PhoneGap/Cordova 2.2.0）& 测试设备是三星 Stratosphere（使用 Android 2.3.6）

# python - Tastypie - 更新嵌套资源而不是在 POST 上创建

> ID：14761093
> 
> 赞同：4
> 
> 时间：2013-02-07T21:14:02.803
> 
> 标签：python, django, rest, tastypie

我正在尝试发布一个基本上由子资源列表组成的资源。这是我的资源：

```
class MovementResource(ModelResource):
    transactions = fields.ToManyField('stock.api.TransactionResource',
        'transaction_set', related_name='movement', full=True)

    class Meta:
        queryset = Movement.objects.all()
        resource_name = 'movement'
        always_return_data = True
        authorization = Authorization()

class TransactionResource(ModelResource):
    movement = fields.ToOneField(MovementResource, 'movement')
    product = fields.ToOneField(ProductResource, 'product', full=True)

    class Meta:
        queryset = Transaction.objects.all()
        resource_name = 'transaction'
        authorization = Authorization() 
```

这表示库存中各种产品的移动。移动表单只是一个内联列表，每个事务都有一个。它根本不使用 django 表单。

我的问题是，当尝试发布指定要创建的交易列表的动作时，我发现 Tastypie 不是插入新交易而是更新现有交易。这是 POST 请求的 JSON，表示只有一个事务的移动：

```
{
    'transactions': [
        {
            'product': '/api/v1/product/3/',
            'quantity': '1'
        }
    ]
} 
```

响应 JSON 显示移动已创建，但交易有一个以前存在的 id 并且具有相同的产品和数量。此事务对象中的运动 FK 已更新为指向新创建的运动。响应数据：

```
{
    'date': '2013-02-07 ···',
    'id': '66',
    'resource_uri': '/api/v1/movement/66/',
    'transactions': [
        {
            'date': '2013-01-30 ···', # Should be the same as parent movement's date
            'id': '30',
            'movement': '/api/v1/movement/66/',
            'product': { ··· product resource data ··· },
            'quantity': '1',
            'resource_uri': '/api/v1/transaction/30/',
        }
    ]
} 
```

我错过了什么吗？Tastypie 不应该将嵌套资源创建为 POST 到列表端点吗？我已经尝试使用 ForeignKey 和 ToOneField 到 MovementResource，看看它是否会有所作为，但没有成功。（我实际上找不到两者之间的区别。）

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-27T05:51:43.190

我遇到了同样的问题。

经过几个小时的努力，我找到了一种解决方法，它强制在相关资源上进行 POST：如果您`null`为嵌套资源的主键传递一个值，那么美味派 POST 一个新的，而不是更新现有的。

如果您发布以下内容，您应该得到您正在寻找的行为：

```
{
   'transactions': [
        {
            'product': '/api/v1/product/3/',
            'quantity': '1',
            'id': null
        }
   ]
} 
```

# regex - 谷歌电子表格翻译返回双引号

> ID：14761096
> 
> 赞同：1
> 
> 时间：2013-02-07T21:14:15.777
> 
> 标签：regex, google-sheets

我正在使用 GoogleTranslate() 函数在 Google 电子表格中将一种语言翻译成另一种语言。我在 A1 列“Lorem ipsum dolor sit amet”有一个（已知）语言的句子，我想在 B1 列用英语翻译它。所以我用了这个：

```
=GoogleTranslate(A1, "li", "en") 
```

结果是：

```
"Lorem ipsum dolor sit amet". 
```

现在有双引号。我希望翻译是单引号（像以前一样），我发现了它的谷歌错误（是的，我说它是谷歌的错误哈哈）。所以解决方案可能在正则表达式或其他东西中......

如何替换 Google 电子表格中已翻译句子的双引号（仅在存在和结尾处）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:37:11.473

你可以尝试类似...

```
=SUBSTITUTE(A2,"''","'") 
```

这个（也许过于简单？）函数将用一个单引号替换两个相邻的单引号。因此，您可以将它们结合起来并最终得到：

```
=SUBSTITUTE(GoogleTranslate(A1, "li", "en"),"''","'") 
```

这不是最优雅的，但我认为它应该工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:26:45.673

Based on the docs it looks like Google Spreadsheets only allows you to *search* with regex and not replace, but in case you actually can:

```
Find: "(.*?)"
Replace: '\1' 
```

You can of course also do this with some other program using the same regexen.

# excel - 安装插件时 Excel 崩溃

> ID：14761099
> 
> 赞同：1
> 
> 时间：2013-02-07T21:14:31.440
> 
> 标签：excel, installation, add-in

Excel AddIn、.NET 4.0、NetOffice 1.5.1.2、ExcelDNA 1.29、C# 安装程序使用 VBA 调用 xls (install.xls)，如下所示 在 install.xls 结束时，Excel 将关闭。但是，在 Excel 关闭后，Excel 崩溃说“Excel 停止工作......请向 Microsoft 发送报告”有两个按钮，一个是“不发送”，另一个是发送

这只发生在 Windows XP + Excel 2007 或 WinXP + Excel 2010 上。此外，在调试过程中，我注意到如果我用 MsgBox 替换 Application.Wait，则根本没有崩溃问题。我觉得有某种时间问题，但真的不知道没有控制。这个问题让我发疯。请帮忙。谢谢！

```
Private Sub Workbook_Open()

Dim quit As Integer
Dim added As Boolean
added = Add_Addin
Application.Wait (Now + TimeValue("0:00:02"))
If Workbooks.Count = 1 Then
    Application.Wait Now + TimeValue("0:00:03")
    Application.quit
Else
    Application.Wait Now + TimeValue("0:00:03")
    Me.Close
End If

End Sub

Private Function Add_Addin() As Boolean
    On Error GoTo ERR_

Dim addinFile As String

addinFile = ThisWorkbook.Path & "\" & "MyAdd-In.xll"

If Len(addinFile) > 0 Then
        Dim LEA As AddIn
        Set LEA = Application.AddIns.Add(addinFile)
        If (Not LEA Is Nothing) Then
            LEA.Installed = True
        Else
            MsgBox "Failed to add XLL"
        End If

    'If (Application.RegisterXLL(addinFile) = True) Then
     '   MsgBox "Yeah, succeed registering XLL"
    'Else
     '   MsgBox "Failed to register XLL"
    'End If

Else
    MsgBox "XLL file not found"
End If

addinFile = ThisWorkbook.Path & "\" & "MyFunc.xla"
If Len(addinFile) > 0 Then
        Dim LEA2 As AddIn
        Set LEA2 = Application.AddIns.Add(addinFile)
        If (Not LEA2 Is Nothing) Then
            LEA2.Installed = True
        Else
            MsgBox "Failed to add xla"
        End If
Else
    MsgBox "xla file not found"
End If

Add_Addin = True

Exit Function

ERR_:
    MsgBox ("Error " & Err.Number & " " & Err.Description)
    Add_Addin = False

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:17:36.407

我想到了。当 Excel 打开时，我通过回调异步启动了 Web 服务调用。在 Excel 被释放或关闭后执行 Web 服务调用的回调时，发生了崩溃。回调根据 Web 服务的结果禁用/启用功能区按钮。我通过在回调中执行任何其他操作之前检查 Excel 是否为空或已处置来修复它。

# licensing - Loadrunner truclient 许可

> ID：14761100
> 
> 赞同：0
> 
> 时间：2013-02-07T21:14:32.150
> 
> 标签：licensing, loadrunner, truclient

我工作的公司有 Loadrunner，我认为大约有 400 个 vuser 许可证。我也知道他们在 VUGen 中有 TruClient。但是他们是否需要额外的 TruClient 许可证，或者当前的 400 个数量是否还包括从控制器使用的 TruClient VUser？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:36:06.637

来自 LoadRunner 帮助文档。

“注意：要运行各种协议，您必须拥有全局许可证或所需协议的许可证。有关详细信息，请在 LoadRunner 启动器中选择配置 > LoadRunner 许可证（开始 > 程序 > LoadRunner > LoadRunner）。”

我认为这意味着您还需要专门针对 TruClient 协议的许可证，除非您拥有的 400 是全球性的。我不是 Performance Center 管理员，请注意，我只是偶尔修改一两个脚本。

# asp.net - 限制多行文本框中的行数

> ID：14761105
> 
> 赞同：0
> 
> 时间：2013-02-07T21:15:13.857
> 
> 标签：asp.net, .net, regex, textbox, multiline

有没有办法限制多行文本框中的行数？我只想允许用户在多行文本框中输入最多 12 行文本。现在，文本框接受的行数与用户输入的行数一样多。

另一个障碍是多行文本框位于列表视图内部，因此很难使用 JavaScript 检索文本框名称。

我可以简单地使用正则表达式验证器将新行数限制为 12 吗？如果是这样，正确的正则表达式是什么？我试过`^(\n|\r|\r\n){0,12}$`了，但它根本不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:30:08.050

您应该可以为此使用正则表达式验证器。试试这个表达式：

```
^[^\n]*(?:\n[^\n]*){0,11}$ 
```

如果您还想将每行限制为最多 65 个字符，您可以使用：

```
^[^\n]{0,65}(?:\n[^\n]{0,65}){0,11}$ 
```

如果您想计算行数，就好像超过 65 个字符的行有软换行符，这可以工作：

```
^[^\n]{0,65}(?:\n?[^\n]{0,65}){0,11}$ 
```

注意`?`之后`\n`，使换行符成为可选的。

您可能希望通过添加原子组来优化此表达式以最小化回溯，例如：

```
^(?>[^\n]{0,65})(?>(?>\n?[^\n]{0,65}){0,11})$ 
```

# algorithm - 确定是否有超过一半的数组在不同的数组中重复

> ID：14761106
> 
> 赞同：9
> 
> 时间：2013-02-07T21:15:15.357
> 
> 标签：algorithm, data-structures

我正在查看[Glassdoor 的以下问题](http://www.glassdoor.com/Interview/Given-N-credits-cards-determine-if-more-than-half-of-them-belong-to-the-same-person-owner-All-you-have-is-an-array-of-the-QTN_384804.htm)：

给定 N 张信用卡，确定其中一半以上是否属于同一个人/所有者。你所拥有的只是一个信用卡号码数组，以及一个类似 isSamePerson(num1, num2) 的 api 调用。

很清楚如何在 O(n^2) 内完成，但一些评论者说它可以在 O(n) 时间内完成。甚至可能吗？我的意思是，如果我们有一个信用卡号码数组，其中一些数字是重复的，那么这种说法是有道理的。但是，我们需要对每个信用卡号进行 API 调用以查看其所有者。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-07T21:31:33.197

算法如下：

如果一个项目（这里是一个人）占多数，那么如果你将不相等的项目配对（以任何顺序），这个项目将被留下。

*   从一个空的候选槽开始
*   对于每个项目
    *   如果候选槽为空（count = 0），则将其放在那里。
    *   否则，如果它等于插槽中的项目，则增加其计数。
    *   否则减少该插槽的计数（弹出一项）。
*   如果候选位置上没有任何东西，则没有明确的多数。否则，
*   计算候选的出现次数（第二次通过）。
*   如果出现次数超过 50%，则宣布为获胜者，
*   否则没有多数。

请注意，如果阈值低于 50%，则不能应用此方法（但应该可以通过保持两个、三个...候选插槽并仅弹出一个不同的三重、四重来适应 33%、25% 的阈值... ...）。

这也适用于信用卡的情况：您只需要比较两个元素（人）是否相等（通过 API 调用），以及一个能够容纳元素总数的计数器。

时间复杂度：`O(N)`
空间复杂度：`O(1)`+输入
API调用：最多2N-1：每遍一次，第一遍第一个元素没有API调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T21:34:57.307

令 x1,x2,...,xn 为信用卡号。

请注意，由于其中一半以上属于同一个人，因此如果考虑两个相邻的数字，则至少其中一对将属于同一个人。

如果考虑所有对 (x1,x2), (x3,x4)....，并考虑两个元素都属于同一个人的对子集，则大多数同一人对属于拥有多数的人卡在第一位。因此，对于每个相同的人对，保留一个卡号，对于非同一个人对，丢弃两者。递归执行此操作并返回最后剩余的同一人对。

您最多需要执行 n 次比较。

注意：如果 n 是奇数，则保留未配对的数字。

为什么会这样：考虑 n 是偶数并且人 A 拥有 n/2 + 1 张牌的情况。在最坏的情况下，您恰好有一对，其中两张牌都归 A 所有。在这种情况下，其他对都不属于同一个人（其他对包含 A 的一张牌和其他人的牌）。

现在，要创建一对匹配的 B（非 A 人），您还必须创建一对 B。因此，在每个实例中，大多数匹配对都归 A 所有。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-10T21:39:22.033

我没有评论的声誉。Jan Dvorak 所讲述的方法被称为摩尔投票算法（流计数算法）。这是代码。

```
int majorityElement(int* nums, int numsSize) {
int count =0, i, majorityElement;
/*Moore's voting algorithm Order(n), Auxiliary space: Order(1)*/
/*step:1-To get candidate for the majority element*/
for(i=0; i < numsSize; i++)
{
    if(count==0)
        majorityElement = nums[i];
    if(nums[i]==majorityElement)
        count++;
    else
        count--;
}
/*Step:2- To check whether this candidate occurs max no. of times */
count =0;
for(i=0; i<numsSize; i++)
{
    if(nums[i]==majorityElement)
        count ++;
}
if(count>numsSize/2) /*It can only be applied for majority check */
    return majorityElement; 
return -1;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-23T09:11:27.583

问题是找出数组中的多数元素。我将使用 Boyer-Moore 多数投票算法。我正在使用 HashMap 执行此操作。

```
public class majorityElement1 {
public static void main(String[] args) {
    int a[] = {2,2,2,2,5,5,2,3,3,3,3,3,3,33,3};
    fix(a);

}

public static void fix(int[] a ) {
 Map<Integer,Integer> map = new HashMap<>();

 for(int i = 0 ; i<a.length ; i++) {
     int r  = a[i];
     if(!map.containsKey(r)) {
         map.put(r, 1);
     }else {

         if(map.get(r) +1 >= a.length/2) {
             System.out.println("majority element => "+ r);
             return ;
             }else {
                 map.put(r,map.get(r) +1);
             }

     }//else1
 }//for
    }
} 
```

输出为 3。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-08T07:08:24.123

**一次性完成：**

*   从数组的第二个索引开始，最初说 i=1。
*   最初计数=1。
*   调用 isSamePerson(a[i],a[i-1]) 其中数组 a[] 包含信用卡号。
*   如果返回值为正，则执行 count++ 和 i++
*   否则，如果返回值为 0 并且 count==1 ，则 i++
*   否则，如果返回值为 0 且 count>1 ，则执行 count-- 和 i++
*   如果 i!=(n-1) ，转到第 3 步，其中 n 是牌的数量。
*   else 如果在数组的末尾 count>1 ，则有超过一半的卡片属于一个人
*   否则，没有超过 50% 的明确多数。

我希望这是可以理解的，并且编写代码将是一件容易的事情。

**时间复杂度 - O(N)**
**API 调用次数 = N-1**
**空间复杂度 - O(1)**

# jquery - JAWS 和 IE 9 没有读取手风琴标题的内容

> ID：14761107
> 
> 赞同：1
> 
> 时间：2013-02-07T21:15:28.337
> 
> 标签：jquery, internet-explorer-9, accessibility, screen-readers, wai-aria

我正在使用扩展为包含[WAI-ARIA 1.0 Authoring Practices for Accordions 的 jQuery 手风琴](http://www.w3.org/WAI/PF/aria-practices/#accordion)。使用 NVDA 时的结果是我对所有浏览器的预期。一旦您关注手风琴的标题，就会读取标题中的所有内容。

将 IE 9 与 JAWS 配对时，JAWS 仅读取标题中的第一行并跳过其余内容。JAWS 与 Chrome 和 Firefox 一起阅读整个标题。

标头 HTML 的内容：

```
<div id="accordionpanelCourse<%=Model.Id%>" class="ui-full">
<article class="ui-padLeft ui-padRight">
<div tabIndex="0" class="ItemTab iconOpen ItemTabExpanded" id="Div1" role="tab" aria-expanded="true" aria-controls="div1">
        <div class="imgCourseBox"></div>
        <span class=""> </span><span title="Awesome title" class="title AwesomeItemTitle">Awesome title</span>
        <div class="textActions summaryBox">
            <div>
                <span class="ui-left">Actions:</span>
                <ul class="styled">
                    <li class="styled ui-inlineBlock">
                        <a title="Unable To be Awesome" class="iconAwesome disabled" id="A1" href="javascript:void(0);" actionTarget="/Awesome/Beawesome/">&nbsp;</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="textActions summaryBox">
            <div class="ui-left">
                <span class="">Level:  </span><span title="Batman" class="textActionsBold">Batman</span>|
                <span class="">Status:  </span><span title="Attended" class="textActionsBold">Super Awesome</span>
            </div>
        </div>
    </div>
    <div id="Div1" class="ItemPanel" aria-labeledby="triggerAwesome<%=Model.Id%>" role="tabpanel" tabindex="0">
        <article id="contentAwesome<%=Model.Id%>"></article>
    </div>
</article> 
```

# php - 为什么我在 PHP 中遇到分段错误？

> ID：14761109
> 
> 赞同：5
> 
> 时间：2013-02-07T21:15:41.393
> 
> 标签：php, arrays, segmentation-fault

在今天之前，我从未在 PHP 中看到过 SegFault，但显然这是可能的。起初我以为是 mysql 驱动程序，但事实证明这是我的代码；）。

我花了大约 2 天的时间调试我的代码并最终找到了它的原因（所以对于所有遇到此问题的未来 PHP 程序员，欢迎您！）

长话短说，你**不能`unset()`在你正在走路的同一个阵列上做一个`array_walk()`。**

目的是消除 $this->votes 中不存在于 $out 数组中的所有元素（其中 $this->votes 的键与 $out 中元素之一的 id 属性匹配）。

**我遇到的问题**大约是代码运行正常的一半时间，而另一半代码会因 apache 日志中的分段错误而崩溃（这使得调试非常困难，因为直到我注意到这个错误之前已经有一段时间了）。

是的，这是一段经过深思熟虑的代码......

```
 array_walk($this->votes, function(&$o, $key) use($that, $out) {
        $found = array_filter($out, function($p) use($key) {
            return $p['id'] == $key;
        });

        if(count($found) == 0) {
            unset($this->votes[$key]); //very very bad!!!!
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:15:41.393

据我了解，最终发生的事情是`unset()`弄乱了`$this->vote`s 数组的长度。`array_walk`使用一个迭代器，它期望`$this->votes`数组在整个遍历过程中保持相同的长度。如果我编写自己的`array_walk`函数 ( `for ($i = 0; $i < count($this->votes); $i++`)，它只会抛出未定义的索引通知。但是由于我们正在使用`array_walk`它，它实际上会尝试查看内存中可能有也可能没有一些数据的位置。这可能会导致函数的不可预测性（有时代码可以正常运行，有时会导致段错误）。

所以正确的方法是

```
 $tmpVotes = array();
    array_walk($this->votes, function(&$o, $key) use($that, $out, $tmpVotes) {
        $found = array_filter($out, function($p) use($key, $that, $tmpVotes) {
            return $p['id'] == $key;
        });

        if(count($found) > 0) {
            $tpmVotes[$key] = $o;
        }
    });

    $this->votes = $tmpVotes; 
```

来自 PHP 手册：

> 只有数组的值可能会改变；它的结构不能改变，即程序员不能添加、**取消设置**或重新排序元素。如果回调不遵守此要求，则此函数的行为未定义且不可预测。

如果有人有更好的方法来解释这里发生的事情，请发帖！

# mysql - MYSQL 用值填充外部 id

> ID：14761112
> 
> 赞同：1
> 
> 时间：2013-02-07T21:15:48.443
> 
> 标签：mysql, database-design

![印刷表](../Images/4d1cb05558081741e02a07762fa39359.png)

我在这里有一个打印的表，我发出一个查询以尝试加入 Tech_id、clients_id、job_id、part_id 也应该在其表/列中填充相应键的表。

这是我的查询：

```
SELECT * FROM work_orders, technicians as tech, parts_list as parts, job_types as    job, clients as client 
LEFT JOIN technicians ON tech_id = technicians.tech_name
LEFT JOIN parts_list ON part_id = parts_list.Part_Name
LEFT JOIN job_types ON job_id = job_types.Job_Name
LEFT JOIN clients ON clients_id = clients.client_name 
```

我弄乱了多种不同的变体，这个似乎语法正确，但现在我得到了：**on 子句中的列 'clients_id' 不明确**

我相信这不仅会发生在客户身上，也可能会发生在其他人身上。我希望能够打印如上图所示的表格，但列出了客户。是否也可以通过一个查询来完成？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:25:40.177

你有两个问题。

首先（这可能不是您的问题，但这是一个“好习惯”），您不应该使用 SELECT *，因为您确实可以在不同的表中拥有同名的字段。

这是在 Select 子句中避免 * 的（众多）好理由之一。

然后，您的主要问题是您在 from 子句中选择表，然后再次加入。

有问题的线路：

```
FROM work_orders, technicians as tech, parts_list as parts, job_types as    job, clients as client 
```

所以（我不知道你的表结构，所以它们可能是错误的，但你明白了）

```
SELECT 
  w.client_id, 
  t.tech_name
  --etc 
 FROM work_orders w
LEFT JOIN technicians t ON c.tech_id = t.tech_name
LEFT JOIN parts_list  p ON c.part_id = p.Part_Name
LEFT JOIN job_types j ON w.job_id = j.Job_Name
LEFT JOIN clients c ON w.clients_id = c.client_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:18:32.933

这意味着clients_id 存在于多个表中。你需要指定你想要哪一个。因此，例如，如果您想要 clients 表的 clients_id，请执行 SELECT clients.clients_id

如果您的问题中列出的所有字段都在客户表中，您可以这样做：

```
SELECT clients.* FROM work_orders, technicians as tech, parts_list as parts, job_types as    job, clients as client 
LEFT JOIN technicians ON tech_id = technicians.tech_name
LEFT JOIN parts_list ON part_id = parts_list.Part_Name
LEFT JOIN job_types ON job_id = job_types.Job_Name
LEFT JOIN clients ON clients_id = clients.client_name 
```

# android - 从列表项Android的onClick运行方法

> ID：14761113
> 
> 赞同：0
> 
> 时间：2013-02-07T21:15:50.473
> 
> 标签：android, android-listview, onclick

如何从列表项的 OnClick 运行方法？

我的方法称为 CallEmergency()

```
public void CallEmergency(View arg0) {
        String phone_no = "911";
        Intent callIntent = new Intent(Intent.ACTION_CALL);
        callIntent.setData(Uri.parse("tel:" + phone_no));
        callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(callIntent);
    } 
```

我可以通过以下方式开始其他活动：

```
public void onItemClick(AdapterView<?> parent, View view,
          int position, long id) {
            Intent i = new Intent(getApplicationContext(), Activity.class);
                    startActivity(i);} 
```

但我只想运行这个 CallEmergency() 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:17:45.803

只需使用：

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    callEmergency(null);
} 
```

（请阅读有关[Java 命名约定](http://java.about.com/od/javasyntax/a/nameconventions.htm)的内容，其中指出方法`callEmergency()`应以小写字母开头。）

# sql - 如何使用复杂的“Where”语句执行“Select Count”来计算共现？

> ID：14761114
> 
> 赞同：0
> 
> 时间：2013-02-07T21:15:52.953
> 
> 标签：sql, select, count

让我们举个例子来说明我的担忧：
假设我们有一个表（标签），它有两列像这样

```
UserID -------------------------------- Tag
1 -------------------------------------- SQL
1 -------------------------------------- Select
1 -------------------------------------- DB
2 -------------------------------------- SQL
2 -------------------------------------- Programming
2 -------------------------------------- Code
2 -------------------------------------- Software
3 -------------------------------------- Code
4 -------------------------------------- SQL
4 -------------------------------------- Code 
```

我需要根据 UserID 计算每个标签的 DISTINCT 共现次数

所以，输出应该是这样的（按共现顺序排序）：

```
Tag -------------------------------- Co-occurrences
---------------------------------------------
SQL --------------------------------------- 5
Programming ------------------------------- 3
Code -------------------------------------- 3
Software ---------------------------------- 3
Select ------------------------------------ 2
DB ---------------------------------------- 2 
```

这只是一个例子。。

我怎样才能做出可以做到这一点的 Select 语句？

我想出了一种方法，但只有一个特定的标签：

```
SELECT count (distinct (Tag)) - 1 as Co_occurrences
FROM Tags
WHERE Tag is NOT NULL and UserID in
    (   SELECT UserID
        FROM Tags 
        where tag = 'SQL') 
```

是否可以更改上述语句以使其对表中的所有标签通用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:33:47.563

```
SELECT t2.tag, count (distinct (t1.Tag)) - 1 as Co_occurrences
FROM Tags t1 inner join 
    Tags t2 on t1.UserId = t2.UserId 
GROUP BY t2.tag    
ORDER BY count (distinct (t1.Tag)) desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:21:29.477

A`GROUP BY`是您正在寻找的内容：

```
SELECT 
    UserID,
    Tag,
    COUNT(DISTINCT Tag) - 1 AS Co_occurrences
FROM Tags
GROUP BY UserID, Tag
ORDER BY UserID, Tag 
```

*编辑*：如评论中所述，以上内容并未回答问题。我稍微改进了@OSA-E 的答案，以解释`-1`计数后在做什么。

```
SELECT
  [t1].[Tag],
  COUNT(DISTINCT [t2].[Tag]) AS [Co_occurrences]
FROM [Tags] [t1]
INNER JOIN [Tags] [t2] ON [t1].[UserID] = [t2].[UserID]
WHERE [t1].[Tag] <> [t2].[Tag]
GROUP BY [t1].[Tag]
ORDER BY [Co_occurrences] DESC 
```

[这是小提琴](http://www.sqlfiddle.com/#!3/f6e22/7)。

# actionscript-3 - 组合框不需要的填充

> ID：14761115
> 
> 赞同：0
> 
> 时间：2013-02-07T21:15:54.950
> 
> 标签：actionscript-3, apache-flex

我想将我的文本和组合框排列成一条很好的直线，垂直对齐到中间，下面有一个 HRule。

它工作得很好，直到我添加一个组合框，它似乎添加了一些我无法摆脱的填充。意思是，我现在离 HRule 远了几个像素。

它来自哪里，我该如何摆脱它？

这是我的代码：

```
<s:HGroup>

<mx:Image
    visible="{meetingList_vs.selectedIndex==0}"
    includeInLayout="{meetingList_vs.selectedIndex==0}"
    source="{arrow}"
    width="5"
    height="10"/>

<s:Label 
    left="0" 
    text="{ 'In Progress and Upcoming ' + '(' + model.generalInfo.upcomingMeetingList.length + ')'}" 
    styleName="groupTitleLabel"
    buttonMode="true"
    click="{meetingList_vs.selectedIndex=0}"/>

<s:Label 
    left="0" 
    text="for"
    styleName="groupTitleLabel"/>

<s:ComboBox 
    id="selectedUser" 
    width="125"
    height="25"
    borderVisible="false"/> 
```

感谢您提供任何有用的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:27:17.910

您是否将 ComboBox 上的填充设置为 0？paddingBottom 样式的[默认](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/ComboBox.html)值为 3。

```
<s:ComboBox paddingBottom="0" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:36:33.493

```
<s:HGroup verticalAlign="middle"> 
```

或垂直对齐的其他适当设置，例如“基线”

# java - 在杰克逊中使用 JsonParser.nextToken 时如何将值读取为 JSON

> ID：14761118
> 
> 赞同：2
> 
> 时间：2013-02-07T21:16:05.520
> 
> 标签：java, json, jackson

我正在从树模型转换为 Jackson 中的流式 API，以防止 Android 上出现堆内存不足的问题。我想通过将整个“标签”值数组作为 JSON 字符串读取来进一步加快处理速度。在此示例中，我想要一个 JSON 字符串，其中包含每个报告 ID 的所有三个标签及其值。

我的数据的简化版本是：

```
 "TagRpts":[
   {  "ID":46,
      "Tags":[
         {  "Name":"Tag1",
            "Values":[
                {"t":"Instance 1","v":"407"},
                {"t":"Instance 2","v":"360"},
                {"t":"Instance 3","v":"309"}]},
         {  "Name":"Tag2",
            "Values":[
                {"t":"Instance 1","v":"926"},
                {"t":"Instance 2","v":"168"},
                {"t":"Instance 3","v":"366"}]},
         {  "Name":"Tag3",
            "Values":[
                {"t":"Instance 1","v":"744"},
                {"t":"Instance 2","v":"668"},
                {"t":"Instance 3","v":"62"}]}]},
   {  "ID":47,
      "Tags":[
         {  "Name":"machine 1",
            "Values":[
                {"t":"Instance 1","v":"613"},
                {"t":"Instance 2","v":"882"},
                "t":"Instance 3","v":"602"}]},
         {  "Name":"machine 2",
            "Values":[
                {"t":"Instance 1","v":"38"},
                {"t":"Instance 2","v":"38"},
                {"t":"Instance 3","v":"329"}]},
         {  "Name":"machine 3",
            "Values":[
                {"t":"Instance 1","v":"276"},
                {"t":"Instance 2","v":"721"},
                {"t":"Instance 3","v":"660"}]}]}
] 
```

我目前正在使用此代码阅读它（为说明而简化 - 将处理逗号的区域删除到 stringbuilder 等）：

```
if ("TagRpts".equals(fieldname)) { // TagRpts 
    jParser.nextToken(); // [ or null
    if (jParser.getText() != "null") {
        while (jParser.nextToken() != JsonToken.END_ARRAY) { // Tag report Array
            while (jParser.nextToken() != JsonToken.END_OBJECT) {
                fieldname = jParser.getCurrentName();

                if ("ID".equals(fieldname)) {
                    jParser.nextToken();
                    aTagReport.ID = jParser.getText();}

                if ("Tags".equals(fieldname)) {
                    StringBuilder sb = new StringBuilder();
                    sb.append("[");

                    while(jParser.nextToken() != JsonToken.END_ARRAY) {
                        fieldname = jParser.getCurrentName();

                        if ("Name".equals(fieldname)) {
                            jParser.nextToken();
                            sb.append("{\"Name\":\"" + Utility.encodeJSON(jParser.getText()) + "\"");}

                        if ("Values".equals(fieldname)) {
                            sb.append("\"Values\":[");

                            while(jParser.nextToken() != JsonToken.END_ARRAY) {
                                fieldname = jParser.getCurrentName();

                                if ("t".equals(fieldname)) {
                                    jParser.nextToken();
                                    sb.append("{\"t\":\"" + Utility.encodeJSON(jParser.getText()) + "\"");}

                                if ("v".equals(fieldname)) {
                                    jParser.nextToken();
                                    sb.append(",\"v\":\"" + Utility.encodeJSON(jParser.getText()) + "\"}");}
                            }
                            sb.append("]}");
                        } 
                    } 
                    sb.append("]");
                    aTagReport.Tags = sb.toString();
                } 
            } 
            aTagReport.SaveTagReport();
            aTagReport = new TagReport();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:17:01.387

当你在它的时候，你为什么不直接用它`JsonParser.readValueAsTree()`来读取子树呢？然后使用`ObjectMapper.writeValueAsString(rootNode)`.

# html - 如何阻止 div 换行？

> ID：14761119
> 
> 赞同：10
> 
> 时间：2013-02-07T21:16:06.260
> 
> 标签：html, css

我用 CSS 定义了一个 div：

```
height: 100%;
width: 360px;
float: left. 
```

现在，我有一个按钮可以动态地将这些 div 添加到正文中。问题是当浏览器窗口太多而无法容纳时，它们会将下一个 div 像这样放在其他 div 的下方。

```
|bar|  |bar|  |bar|
|bar|  |bar|
|<---- Page width ---->| 
```

现在，我想要的是让它像这样继续向右移动：

```
|bar|  |bar|  |bar|  |bar|  |bar|
|<---- Page width ---->| 
```

当然，还会有一个滚动条。如果没有定义，这可能吗？

```
body {
    width: XXXpx;
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-07T21:22:45.213

代替 using `float: left;`，您可以使用`display: inline-block;`并使用 包装在容器中`white-space: nowrap;`。

[http://jsfiddle.net/Jeff_Meadows/JJ5kT/](http://jsfiddle.net/Jeff_Meadows/JJ5kT/)

# css - CSS - 定位页脚

> ID：14761122
> 
> 赞同：0
> 
> 时间：2013-02-07T21:16:10.317
> 
> 标签：css

我的页脚底部有一个空白：http: [//pactlegacy.com/site/overview.php](http://pactlegacy.com/site/overview.php)

我真的想不通，因为它正好在窗口的底部。我最近将页面更改为 PHP，但我看不出这会产生什么影响。

我对 CSS 还是很陌生，所以我得到了 Firefox Web Developer 工具来帮助我解决问题。但这并没有显示任何填充或边距，这会给我在底部的差距。

我真的不确定我在这里缺少什么。有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:21:24.873

前后有一些空白字符`<a href="#" id="totop">TOP</a>` ，删除它们可以解决问题（我已经在 Google Chrome 开发工具上检查过）

编辑：更准确地说，尝试从您的代码中删除这些行：

```
<!--////////////////// Load JS Files -->

<!-- JavaScript at the bottom for fast page loading --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T21:00:23.977

我能够弄清楚。我的页脚位于一个包含文件中，该文件正在另一个编辑器中进行编辑。它将文件保存为 UTF-8 格式，而主文件保存为 ANSI。

将它们都保存为 ANSI 格式消除了差距。

# objective-c - 如果 setA 中的任何元素在 setB 中

> ID：14761123
> 
> 赞同：0
> 
> 时间：2013-02-07T21:16:14.587
> 
> 标签：objective-c, nsset, nsmutableset

只是一个关于 Obj-c 中集合的快速问题。给定两组：

```
NSMutableSet* a = [NSMutableSet setWithObjects: 1, 2, 3, nil];
NSMutableSet* b = [NSMutableSet setWithObjects: 3, 4, 5, nil]; 
```

是否有一种快速简便的方法来确定集合 A 中的任何元素是否也在集合 B 中？

就像是 ...

```
if ([a contains:[b allObjects]])
   // do something 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:19:05.627

这是[`-intersectsSet:`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSSet_Class/Reference/Reference.html#//apple_ref/doc/uid/20000143-CHDCFHHG)为了什么。

```
if ([a intersectsSet:b])
    // do something 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:19:18.130

你要找的词是“相交”:)

```
if ([a intersectsSet:b]) {
    ...
} 
```

# mozilla - Mozilla Persona：获取电子邮件地址

> ID：14761124
> 
> 赞同：0
> 
> 时间：2013-02-07T21:16:14.903
> 
> 标签：mozilla, browserid

我觉得我在这里缺少一些基本的东西，但是找不到它。我只需要访问某人用来登录 Persona 的电子邮件地址。我正在寻找电子邮件地址，以便将其作为 Open Badges 的断言传递。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:57:51.057

The way to get the email address out of the assertion is to simply send the assertion to the verifier: [https://developer.mozilla.org/en-US/docs/Persona/Quick_Setup#Step_4.3A_Verify_the_user.E2.80.99s_credentials](https://developer.mozilla.org/en-US/docs/Persona/Quick_Setup#Step_4.3A_Verify_the_user.E2.80.99s_credentials)

# regex - perl 删除字符串中的 " 并从 json 中返回一个单词

> ID：14761125
> 
> 赞同：-1
> 
> 时间：2013-02-07T21:16:19.123
> 
> 标签：regex, json, perl

我有这个字符串：
`'{"file_type":"/video/2012/09/10/prn-exceo.jpg"}'`
我想要：
`'{file_type:/video/2012/09/10/prn-exceo.jpg}'`
尝试过： 我做错了什么
`$str=~m/\"(.+)\"/` ？`$str=~ s/"//g;`

更新
一个 json 调用给了我这个字符串：
`'{"file_type":"/video/2012/09/10/prn-exceo.jpg"}'`
我试图`prn-exceo.jpg`像这样返回：
`my $json = JSON->new->allow_nonref->encode('prn-exceo.jpg');`

但我有一个`parsererror`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:20:12.910

你没有做错什么。替换做你想要的。

```
david@elgin ~ $ cat x.pl
use strict;
use warnings;
use v5.14;

my $str = '{"file_type":"/video/2012/09/10/prn-exceo.jpg"}';
$str=~ s/"//g;
say $str;
~ :
david@elgin ~ $ perl x.pl
{file_type:/video/2012/09/10/prn-exceo.jpg} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T02:34:58.123

在我看来，您使用 JSON 非常不正确。让我看看我是否理解正确，您从某个外部源获取包含 JSON 的字符串，然后您想从`file_type`键中获取值。在这种情况下，您想要解码 JSON 字符串，而不是对其进行编码。

```
#!/usr/bin/env perl

use strict;
use warnings;

use JSON;

my $json_string = '{"file_type":"/video/2012/09/10/prn-exceo.jpg"}';

my $data = JSON->new->decode($json_string);
my $file = $data->{file_type};

print $file . "\n";

# if you just want the filename then use 

use File::Basename;

my $filename = fileparse $file;

print $filename . "\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T21:22:28.480

另一种方法是使用`tr`运算符：

```
$str =~ tr/"//d; 
```

# javascript - 如何安装具有多个域的多个 nodejs 应用程序？

> ID：14761132
> 
> 赞同：4
> 
> 时间：2013-02-07T21:16:47.960
> 
> 标签：javascript, node.js, nginx, express

这段时间我阅读的内容比以往任何时候都多，这将是我的第一个网页，所以我决定安装在 nodejs 上。我非常快速地制作应用程序并在 localhost:9000 中进行测试

所以我想在 VPS 上运行更多应用程序，我搜索信息，我有两个选择

首先使用 nginx 代理应用程序...

```
upstream example1.com {
    server 127.0.0.1:3000;
}

server {
listen   80;
server_name  www.example1.com;
rewrite ^/(.*) http://example1.com/$1 permanent;
}

# the nginx server instance
server {
    listen 80;
    server_name example1.com;
    access_log /var/log/nginx/example1.com/access.log;

    # pass the request to the node.js server with the correct headers and much more can be added, see nginx config options
    location / {
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header Host $http_host;
      proxy_set_header X-NginX-Proxy true;

      proxy_pass http://example1.com;
      proxy_redirect off;
    }
 } 
```

我不理解这个配置文件，因为我从不使用 nginx，所以我搜索了第二个选项

使用来自 expressjs() 的虚拟主机

```
express()
.use(express.vhost('m.mysite.com', require('/path/to/m').app))
.use(express.vhost('sync.mysite.com', require('/path/to/sync').app))
.listen(80) 
```

我正在使用 expressjs，并且我了解如何配置，但是有一些关于 wich 是最佳选择的问题，因为使用 express() 我有一个应用程序管理多个应用程序，所以我认为这不是一个好的做法并且浪费资源。

从[这篇](https://stackoverflow.com/questions/9332865/how-should-i-organize-multiple-express-servers-on-the-same-system)文章中，大卫埃利斯说

如果你不需要使用 WebSockets（或者任何 HTTP 1.1 特性，真的），你可以使用 NginX 作为你的代理。

优点是 NginX 可以处理的总负载与 Node 相比更高（基本上是静态编译和专门用于此类事情的），但是您失去了流式传输任何数据的能力（一次发送较小的块）。

对于较小的站点，或者如果您不确定将来需要哪些功能，最好坚持使用 node-http-proxy 并且仅在您可以证明代理是服务器上的瓶颈时才切换到 NginX。幸运的是，如果您以后确实需要 NginX，设置起来并不难。

从[这篇](https://serverfault.com/questions/414263/configure-nginx-for-multiple-node-js-apps-with-own-domains)文章中，我阅读了一个使用许多应用程序配置 xginx 的示例，但我不明白如何为我使用它

```
upstream example1.com {
    server 127.0.0.1:3000;
}

server {
listen   80;
server_name  www.example1.com;
rewrite ^/(.*) http://example1.com/$1 permanent;
}

# the nginx server instance
server {
    listen 80;
    server_name example1.com;
    access_log /var/log/nginx/example1.com/access.log;

    # pass the request to the node.js server with the correct headers and much more can be added, see nginx config options
    location / {
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header Host $http_host;
      proxy_set_header X-NginX-Proxy true;

      proxy_pass http://example1.com;
      proxy_redirect off;
    }
 }

upstream example2.com {
    server 127.0.0.1:1111;
}

server {
listen   80;
server_name  www.example2.com;
rewrite ^/(.*) http://example2.com/$1 permanent;
}

# the nginx server instance
server {
    listen 80;
    server_name example2.com;
    access_log /var/log/nginx/example2.com/access.log;

    # pass the request to the node.js server with the correct headers and much more can be added, see nginx config options
    location / {
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header Host $http_host;
      proxy_set_header X-NginX-Proxy true;

      proxy_pass http://example2.com;
      proxy_redirect off;
    }
 } 
```

所以问题是最好的选择，使用 nginx 还是使用 vhost ？？？

如果我必须使用 nginx，有任何教程如何配置 nginx 以在节点 js 上服务许多应用程序？？？

全部

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T23:01:44.710

您的 Nginx 配置示例似乎是您正在寻找的。你应该在 /etc/nginx/sites-available 下创建你的配置文件，然后为那些你想要启用到 /etc/nginx/sites-enabled 的人创建一个符号链接

也许这会对你有所帮助 - [http://blog.dealspotapp.com/post/40184153657/node-js-production-deployment-with-nginx-varnish](http://blog.dealspotapp.com/post/40184153657/node-js-production-deployment-with-nginx-varnish)

# vba - VBA：带有if语句并返回true或false的子程序？

> ID：14761134
> 
> 赞同：0
> 
> 时间：2013-02-07T21:16:55.697
> 
> 标签：vba, excel, subroutine

***解决了！***

我必须验证某些单元格不是空的，所以我想创建一个子程序并传递我需要检查的变量。

这就是我想出的：

```
Sub errorMessage(errMsg As String, errRange As String)
If Range(errRange) = "" Then
    MsgBox errMsg, , "Error:"
    Range(errRange).Activate
    'this is what i was looking for :doh:, the 'end' line terminates everything..
    END
End Sub 
```

现在，当我从按钮调用它时，它实际上会结束按钮的子部分吗？

IE

```
Private Sub CommandButton1_Click()

    Call errorMessage("name is missing", "D4")

    'this function shouldn't be called if there was a msgbox displayed with the above call 
sendEmail 

End Sub 
```

我怎样才能做到这一点？

***编辑：***

好的所以这就是我解决它的方式，我试图这样做的原因是为了避免buttonClick sub中的大量代码行，你的想法是什么？

请记住，在执行 sendEmail 子之前，这个东西必须检查大约 25 个问题的空白。

```
Private Sub CommandButton1_Click()

    Call validateEntry("Client Name is missing.", "D4")
    Call validateEntry("# not complete.", "D5")

    Call validateEntry("Address same as CV?", "D6")

    Call validateEntry("Number missing.", "D8")
    Call validateEntry("Type missing.", "D9")
    Call validateEntry("Q1 requires a Yes or No.", "E19")
    Call validateEntry("Q2 requires a Yes or No.", "E21")
    Call validateEntry("Q3 requires a Yes or No.", "E23")
    Call validateEntry("Q4 requires a Yes or No.", "E25")
    Call validateEntry("Q5 requires a Date.", "D28")
    Call validateEntry("Q6 requires a Yes or No.", "E30")
    Call validateEntry("Q7 requires a Yes or No.", "E32")

MsgBox "passed"
'sendEmail
End Sub

Sub validateEntry(errMsg As String, errRange As String)
    If Range(errRange) = "" Then
        MsgBox errMsg, , "Error:"
        Range(errRange).Activate
        End
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:26:21.213

So, in your example, you're looking for the "passed" notification to only be sent when there is data in cell D4, right?

This should work:

```
Private Function errorMessage(errMsg As String, errRange As String) As Boolean
    errorMessage = False

    If Len(Trim(Range(errRange))) = 0 Then
        MsgBox errMsg, , "Error:"
        Range(errRange).Activate

        errorMessage = True
    End If
End Function

Public Sub CommandButton1_Click()
    If errorMessage("name is missing", "D4") = False Then
        MsgBox "passed"
    End If
End Sub 
```

Alternatively, you can handle all MsgBox notifications from within the function, to group similar logic together, and keep the Button Click Event Sub clean:

```
Private Function errorMessage(errMsg As String, errRange As String)
    If Len(Trim(Range(errRange))) = 0 Then
        MsgBox errMsg, , "Error:"
        Range(errRange).Activate
    Else
        MsgBox "passed"
    End If
End Function

Public Sub CommandButton1_Click()
    Call errorMessage("name is missing", "D4")
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:27:39.447

这里有很多误解。

首先，不，默认情况下它不会结束按钮例程。你需要在你的按钮中处理它。

接下来，您`End If`在这里缺少一个地方：

```
Sub errorMessage(errMsg As String, errRange As String)
    If Range(errRange) = "" Then  ' This may not be the best way to check for 
                                  ' an empty range
        MsgBox errMsg, , "Error:"
        Range(errRange).Activate
        Exit Sub
End Sub 
```

你真的不想要一个子程序，你想要一个返回布尔值的函数，像这样：

```
Function errorMessage(errMsg As String, errRange As String) as Boolean
    ' Function returns True if an error occured
    errorMessage = False
    If Range(errRange) = "" Then
        MsgBox errMsg, , "Error:"
        Range(errRange).Activate
        errorMessage = True
    End If
End Sub 
```

然后在这里：

```
Private Sub CommandButton1_Click()

    If errorMessage("name is missing", "D4") Then
        Exit Sub
    End If

    'this msgbox should not display if the above msgbox is displayed
    MsgBox "passed"

    ' continue on with all of your fun processing here
End Sub 
```

# ruby-on-rails - Ruby on Rails 模型关联问题

> ID：14761136
> 
> 赞同：0
> 
> 时间：2013-02-07T21:17:02.283
> 
> 标签：ruby-on-rails, rails-activerecord, model-associations

抱歉标题含糊不清，但一句话解释得有点多。

我有三个模型，用户、设备和设备消息。他们的关系相当简单：

*   一个用户`has_many :devices`，
*   一个设备`belongs_to :user`，
*   一个设备`has_many :device_messages`，
*   和一个 DeviceMessage `belongs_to :device`。

Rails 提供了快速开始使用这些关联的方法，例如获取属于某个用户（从任何设备）的所有设备消息的能力。

为了做到这一点，我在 User 模型中定义了一个方法：

```
 class User < ActiveRecord::Base
      ...
      has_many :devices, :as => : owner #Other entities may "own" a device

      def device_feed
        DeviceMessage.that_belong_to_user(self)
      end
    end 
```

我在 DeviceMessage 模型中定义了被调用的方法：

```
 class DeviceMessage < ActiveRecord::Base
      ...
      belongs_to :device

      def self.that_belong_to_user(user)
        device_ids = "SELECT owner_id FROM devices WHERE owner_id = :user_id 
                     AND owner_type = \"User\""
        where("device_id IN (#{device_ids})", user_id: user.id)
      end
    end 
```

我定义了一个用户页面，他们可以在其中将设备与他们的帐户相关联（设备也有名称），并且在将设备添加到帐户后，它会将名称添加到左侧窗格中的设备名称列表中，同时显示用户的设备提要，就像 twitter 提要一样（是的，我遵循了 Michael Hartl 的 RoR 教程）。在这一点上，重要的是要注意我正在使用帮助函数来跟踪当前用户，因此当用户在登录时访问 root_path 时，我可以显示此信息。访问 root_path 时，root_path 的控制器被定义为那：

```
 if user_signed_in?
      @device_feed_items = current_user.device_feed.paginate(page: params[:page])
    end 
```

这一切都完美无缺！

所以……有什么问题？当我通过注册页面创建新用户并通过设备关联页面关联设备时，我被重定向到 root_path，设备名称**正确**显示在左窗格中（这意味着设备与新用户正确关联用户），但**不**显示 device_feed。

我已经使用 Rails 控制台来验证设备消息*是否应该*显示（`User.find(2).devices.first.device_messages.first`显示与第一个设备相关联的第一条消息，该设备与第二个用户新关联），所以我知道我需要深入数据库才能获取current_user 的新副本而不是缓存副本，但我很困惑，因为每次`user.device_feed`调用该方法时似乎都应该发生这种情况，因为它的使用`where()`是查询 API 的一部分...

有任何想法吗？提前感谢您的任何和所有答案。

-毫米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:14:30.353

我只是想知道为什么你有 device_feed 功能。对于您的提要显示，您是否可以不只是像这样的循环，这是

```
class Device < ActiveRecord::Base

  scope :in_new_message_order, :joins => :device_messages, :order => "created_at DESC"      

end 
```

添加了一个连接范围

```
class User < ActiveRecord::Base
  ...
  has_many :devices, :as => : owner #Other entities may "own" a device
  scope :in_sort_order, order("message_date DESC")

  def device_feed
    DeviceMessage.that_belong_to_user(self)
  end
end 
```

上面我添加了一个范围来对您的消息进行排序

```
<% user.devices.in_new_message_order.each do |device| %>
    <% device.device_messages_in_sort_order.each do |message| %>
        <%= ....render out the message %>
    <% end %>
<% end %> 
```

# macos - jtds 和 rjdbc 类路径 - .jfindClass 中的错误

> ID：14761138
> 
> 赞同：0
> 
> 时间：2013-02-07T21:17:25.363
> 
> 标签：macos, jtds, rjdbc

我正在尝试使用 jtds 驱动程序连接到 SQL 服务器以进行 JDBC 连接，但 RJDC 中的 JDBC 调用不断返回错误消息。我在 Mac OSX 中使用 R

'.jfindClass(as.character(driverClass)[1]) 中的错误：找不到类'

当我使用 Microsoft 的 JDBC 驱动程序时，我能够成功创建连接，但对于我的一生，我无法弄清楚为什么根本找不到 jtds JDBC 驱动程序的类路径。

以下脚本调用适用于 Microsoft JDBC 驱动程序 drv <- JDBC("com.microsoft.sqlserver.jdbc.SQLServerDriver","/Library/Java/Extensions/sqljdbc4.jar", "'")

不起作用的 jtds 调用是 drv <- JDBC("net.sourceforge.jtds.jdbc.Driver","/Library/Java/Extensions/jtds-1.3.0-dist/jtds-1.3.0.jar", "'")

如果您知道我正在犯的潜在错误，有人可以说明一下吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T19:39:09.413

尝试改用 jtds-1.2.7。我在 Linux 上遇到了与 jdts-1.3.1 完全相同的问题，当我切换到 1.2.7 时它就消失了。

# c++ - 访问指针的数据成员

> ID：14761147
> 
> 赞同：-7
> 
> 时间：2013-02-07T21:17:55.910
> 
> 标签：c++

```
class Cat
{
  public:
    int name;
    Cat();
    int getName();
} 
```

如果我有：

```
Cat* pointer = new Cat();
pointer->getName();
pointer->name; //this doesn't work 
```

那么如何访问数据成员：名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:23:59.103

它工作得很好：http: [//ideone.com/3E5Uec](http://ideone.com/3E5Uec)

```
#include <iostream>
using std::cout; using std::endl;

class Cat
{
  public:
    int name;
    Cat() : name(0) { }
    int getName() { return name; }
};

int main()
{
    Cat* pointer = new Cat();
    pointer->name = 42;
    cout << "getName: " << pointer->getName() << endl;
    cout << "name: " << pointer->name << endl;
    delete pointer;
} 
```

请注意，我必须对您提供的代码进行一些补充，因为它没有按照您提供的那样编译：

*   我添加了缺少的#include 指令
*   我添加了 Cat::Cat() 和 Cat::getName() 的定义
*   `;`我在类定义之后添加了缺失
*   我将您的代码包装在 main() 中，并输出结果`pointer->name`以验证它是否有效

# jquery - jQuery代码重构

> ID：14761148
> 
> 赞同：-1
> 
> 时间：2013-02-07T21:18:02.760
> 
> 标签：jquery

只是想要一些关于如何更好地编写此代码的意见，它工作正常，我只是想学习如何更好地编写 jQuery，所以我想要一些聪明人的意见。谢谢！

它通过查找“PO”的变体来检查送货地址字段以查看它是否包含邮政信箱地址，然后在输入后显示警告消息，如果它确实包含它。

[http://jsfiddle.net/ferne97/6RnxG/](http://jsfiddle.net/ferne97/6RnxG/)

```
(function ($) {
    var $shipAddress = $('input[name="user_data[s_address]"]'),
        message = '<div class="message hidden"><p>We <strong>don\'t ship to PO Boxes</strong>. Sorry for the inconvenience.</p></div>';

    $shipAddress.after(message);

    $shipAddress.keyup(function () {
        var $value = $(this).val();

        if ($value === 'po' || $value === 'p.o' || $value === 'PO' || $value === 'P.O') {
            $shipAddress.siblings('.message').removeClass('hidden');
        } else if ($value === '') {
            $shipAddress.siblings('.message').addClass('hidden');
        }
    });

}(jQuery)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:26:01.263

It's pretty good code. I see you are adding/removing classes to hide/show elements. Instead of using classes to handle the visibility of elements, you could do `.hide()` and `.show()`. This will add/remove inline style `display: none;`

So, instead of

```
$shipAddress.siblings('.message').removeClass('hidden');
$shipAddress.siblings('.message').addClass('hidden'); 
```

You can do simply:

```
$shipAddress.siblings('.message').show();
$shipAddress.siblings('.message').hide(); 
```

So you don't need to write extra css classes. But thats only a minor improvement. Maybe that's only a matter of opinion, but i would prefer hide and show function.

See: [http://jsfiddle.net/6RnxG/2/](http://jsfiddle.net/6RnxG/2/)

# java - 三星 Galaxy SL 的球体上不显示纹理

> ID：14761154
> 
> 赞同：0
> 
> 时间：2013-02-07T21:18:17.053
> 
> 标签：java, android, opengl-es, rajawali

我正在研究 Android 的[Rajawali](https://github.com/MasDennis/Rajawali) 框架。我尝试了他们的第一个基本教程，如下所示：

```
public class RRenderer extends RajawaliRenderer {
private DirectionalLight mLight;
private BaseObject3D mSphere;

public RRenderer(Context context) {
    super(context);
    setFrameRate(60);
}

protected void initScene() {
    mLight = new DirectionalLight(1f, 0.2f, 1.0f); // set the direction
    mLight.setColor(1.0f, 1.0f, 1.0f);
    mLight.setPower(2);

    Bitmap bg = BitmapFactory.decodeResource(mContext.getResources(), R.drawable.earthtruecolor_nasa_big);
    DiffuseMaterial material = new DiffuseMaterial();
    mSphere = new Sphere(1, 18, 18);
    mSphere.setMaterial(material);
    mSphere.addLight(mLight);
    mSphere.addTexture(mTextureManager.addTexture(bg));
    addChild(mSphere);

    mCamera.setZ(-4.2f);
}

public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    super.onSurfaceCreated(gl, config);
}

public void onDrawFrame(GL10 glUnused) {
    super.onDrawFrame(glUnused);
    mSphere.setRotY(mSphere.getRotY() + 1);
}

} 
```

我所做的只是创建一个球体并将地球图像作为纹理添加到它。图像大小为 1024x512。

当我在三星 Galaxy SL 上运行此代码时，球体没有此纹理，而是呈深灰色。但是当我在其他设备（Nexus 7 和 Sony Xperia）上运行此代码时，纹理显示正确。此外，如果我使用 512x512 之类的纹理，则纹理会在三星 Galaxy SL 上正确显示。

我找到了一个提示，但不知道如何继续：[OpenGL ES 2.0 texture not displayed on some device](https://stackoverflow.com/questions/11427010/opengl-es-2-0-texture-not-showing-on-some-device)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:10:59.737

opengl 提供的最小过滤器是

GLES20.GL_LINEAR_MIPMAP_LINEAR、GLES20.GL_NEAREST_MIPMAP_NEAREST、GLES20.GL_LINEAR、GLES20.GL_NEAREST

纹理似乎正在渲染以下代码行 GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_LINEAR);

我得出的结论是，当 Mipmapping 打开时，设备不会渲染纹理。

# c# - Unicode 正则表达式不起作用

> ID：14761155
> 
> 赞同：0
> 
> 时间：2013-02-07T21:18:21.640
> 
> 标签：c#, regex

我有这个字符串：`"asdf"` 并且这个正则表达式无法识别它：`^[\p{L}]{3,32}$`。据我所知，`\p{L}`应该匹配任何 unicode 字母。为什么不呢？当我用 A-Za-z 替换它时，它工作正常，但我需要 unicode 字符。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:27:19.820

```
// [\p{L}]{3,32}

// A character with the Unicode property “letter” (any kind of letter from any language) «[\p{L}]{3,32}» Between 3 and 32 times, as many times as possible, giving back as needed (greedy) «{3,32}» 
```

根据定义：`"`不是任何语言的字母！

试试这个正则表达式：`^"[\p{L}]{3,32}"$`

```
using System;
using System.Text.RegularExpressions;

public class Test
{
    public static void Main()
    {
        Console.WriteLine(Regex.IsMatch("\"asdf\"", "^\"[\\p{L}]{3,32}\"$"));  //True
    }
} 
```

# php - PHP 从 CLI 执行的文件中访问 CodeIgniter 类

> ID：14761157
> 
> 赞同：0
> 
> 时间：2013-02-07T21:18:28.247
> 
> 标签：php, codeigniter, class, command-line-interface

我有一个`CI_Model`名为`Xray`. 我有一个控制器类`Pages`，它处理我在应用程序中的所有页面。这些页面之一称为`worker.php`. 我通过 CLI执行`worker.php`使用。`Supervisord`

我希望能够从 访问`Xray`的函数`worker.php`，但不能通过命令行（执行后我不会使用命令行`worker.php`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:39:59.197

将 Xray 作为模型或库加载，以更合适的方式加载，并正常访问

```
class Pages extends CI_Controller {

    function worker()
    {
        $this->load->library('Xray');
        echo $this->xray->my_func();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:36:56.897

以下是在外部加载的脚本中包含 CodeIgniter 功能所需的代码：

```
ob_start();
include('/path/to/your/index.php');
ob_end_clean();

$ci =& get_instance();
$ci->load->model('xray'); 
```

所以问题是没有`CI`实例，因此什么都不会加载。

取自[Ellislabs 论坛](http://ellislab.com/forums/viewthread/101620/#716311)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-27T10:38:29.257

问题`$this`是当前的`null`。

我只是先调用父母的构造函数：

```
function __construct()
{
   parent::__construct();
} 
```

如果您检查`parent`，您将看到`class CI_Controller`并从那里`function __contruct()`帮助您正确启动。

现在你`$this`是一个对象，你可以做

`$this->config->load()`或者`$this->load->library('Xray');`

# search - 如何启用在谷歌网站中搜索附件的内容

> ID：14761158
> 
> 赞同：1
> 
> 时间：2013-02-07T21:18:27.953
> 
> 标签：search, google-sites

目标：我希望能够通过我网站的搜索框搜索位于我的谷歌网站上的附件内容。附件，例如 google doc 或 google sheet 的内容。

问题：所以我在我的谷歌网站上有一个文件柜，里面装满了我谷歌驱动器中某些文件夹中的文件。如果我在我的 google 网站上的文档中搜索关键字，则搜索返回没有结果。如果我在我的谷歌驱动器中进行完全相同的搜索，我会得到我期望的结果。有没有办法在我的谷歌网站中启用此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-21T21:28:43.523

我还没有找到一种可以搜索*通过 Google Drive*加载到文件柜中的文件的方法。但是，如果您从本地磁盘上传原始格式（.docx、.pdf 等）的文件，则会对它们进行解析、索引和搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T12:39:19.770

我无法在文件柜中搜索文件，如果您需要解决方案，请使用此小工具。

[https://docs.google.com/a/essilor.fr/document/d/1G9JiOOFT5VKYGITvrLdlv0pBnJM0rXdrruSd91zAcCM/edit](https://docs.google.com/a/essilor.fr/document/d/1G9JiOOFT5VKYGITvrLdlv0pBnJM0rXdrruSd91zAcCM/edit)

您的电子表格中有一些数据（数据、文件、...），此小工具显示您的数据。如果您想要 StringFilter 和其他 Filters ，并且您的文件在您的驱动器上，那么简单且更好。

# r - 用ggplot绘制融化的data.frame，aes（x）是否需要成为一个因素？

> ID：14761166
> 
> 赞同：1
> 
> 时间：2013-02-07T21:18:50.787
> 
> 标签：r, ggplot2

我不明白为什么 ggplot 不能绘制这个 data.frame ：

```
sample <- dput(melted)
structure(list(alleles = c(98, 100, 102, 106, 124, 126, 128, 
132, 134, 142, 144, 145, 146, 147, 148, 149, 151, 152, 153, 156, 
158, 159, 165, 167, 169, 171, 173, 175, 177, 181, 184, 187, 193, 
194, 196, 197, 200, 228, 233, 234, 238, 240, 241, 242, 243, 244, 
245, 246, 247, 249, 251, 253, 363, 364, 365, 367, 371, 377, 380, 
384, 391, 98, 100, 102, 106, 124, 126, 128, 132, 134, 142, 144, 
145, 146, 147, 148, 149, 151, 152, 153, 156, 158, 159, 165, 167, 
169, 171, 173, 175, 177, 181, 184, 187, 193, 194, 196, 197, 200, 
228, 233, 234, 238, 240, 241, 242, 243, 244, 245, 246, 247, 249, 
251, 253, 363, 364, 365, 367, 371, 377, 380, 384, 391), variable = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("Parents", "Nymphes"
), class = "factor"), value = c(11, 17, 13, 1, 1, 18, 5, 8, 10, 
6, 9, 1, 25, 17, 2, 1, 1, 2, 0, 2, 0, 2, 1, 1, 8, 9, 6, 10, 35, 
1, 3, 4, 20, 3, 2, 39, 2, 0, 0, 1, 8, 25, 2, 27, 6, 8, 0, 3, 
1, 8, 1, 2, 14, 17, 2, 5, 1, 2, 1, 2, 0, 12, 49, 33, 0, 4, 35, 
6, 7, 14, 7, 25, 0, 44, 26, 3, 0, 6, 0, 9, 3, 1, 0, 1, 4, 15, 
22, 8, 24, 69, 0, 2, 5, 35, 2, 18, 92, 0, 2, 6, 0, 22, 44, 6, 
56, 13, 12, 1, 6, 2, 21, 0, 3, 12, 9, 5, 3, 0, 1, 1, 0, 1)), .Names = c("alleles", 
"variable", "value"), row.names = c(NA, -122L), class = "data.frame") 
```

ggplot 命令：

```
ggplot(sample,aes(x=alleles,y=value)) + geom_bar(aes(fill=variable),position="dodge") + theme(axis.text.x=element_text(angle = -75, hjust = 0)) 
```

错误 ：

stat_bin：binwidth 默认为 range/30。使用 'binwidth = x' 来调整它。pmin(y, 0) 中的错误：找不到对象“y”

如果 data.frame 的第一列（等位基因）是一个因素，那么情节就会出来，但是我对数据的排序有问题。我需要列等位基因按顺序排列，如上面的 data.frame 所示。很明显，有什么东西让我无法理解……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:25:41.400

我觉得你用`geom_bar`错了。如果您已经计算出频率（或条的长度），您应该使用`weight =`如下美学：

```
sample$alleles <- factor(sample$alleles)
ggplot(sample, aes(x = alleles)) + 
    geom_bar(aes(weight = value, fill = variable), position = "dodge") + 
    theme(axis.text.x=element_text(angle = -75, hjust = 0)) 
```

如果通过因式分解它没有按照您想要的顺序排列绘图，那么您可以以这种方式订购您的因数（如果您希望保留数字顺序）：

```
sample$alleles <- factor(sample$alleles, 
                levels=sample$alleles[!duplicated(sample$alleles)], ordered = T) 
```

现在，绘图应该导致数字顺序。如果要将顺序更改为其他内容，请`levels =`适当设置。

重新排序和绘图后，这就是我得到的：

![ggplot2_weight](../Images/5d17697ba1659b550738954d3fa2f3a2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:28:31.833

如果这是您正在寻找的：

![在此处输入图像描述](../Images/ac7514b0983d8a8799da166a65f7f22e.png)

你需要`stat = "identity"`设置`geom_bar`

```
ggplot(sample,aes(x=alleles + (as.numeric (variable)/2 - .75), y=value)) + 
    geom_bar(aes(fill=variable),position="identity", stat = "identity") + 
    theme(axis.text.x=element_text(angle = -75, hjust = 0)) 
```

`geom_bar`默认为计数（即制作直方图），但如果我理解正确，计数（或值）已经计算出来。

# spring - 在 Grails 中加载 bean 时出现 ClassNotFound 期望

> ID：14761169
> 
> 赞同：0
> 
> 时间：2013-02-07T21:18:57.777
> 
> 标签：spring, grails, grails-2.0

我有一个 jar 文件，其中包含在 applicationContext.xml 中定义的 bean。我已将 jar 文件添加到 lib 目录，并将构建配置修改为

> 运行时“内容：内容审查员数据：1.0”

我在resource.groovy 中定义了bean，如下所示

> 豆子= {
> 
> ```
> importBeans("classpath*:/applicationContext.xml") 
> ```
> 
> }

bean定义如下

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mongo="http://www.springframework.org/schema/data/mongo"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/data/mongo http://www.springframework.org/schema/data/mongo/spring-mongo-1.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd">

    <mongo:mongo host="localhost" port="27017" />

    <bean class="org.springframework.data.mongodb.core.MongoTemplate"
        id="mongoTemplate">
        <constructor-arg ref="mongo"></constructor-arg>
        <constructor-arg value="documents"></constructor-arg>
    </bean>
    <mongo:db-factory id="mongoDbFactory" dbname="database" mongo-ref="mongo"/>
  <mongo:mapping-converter id="converter" />

  <bean id="gridTemplate" class="org.springframework.data.mongodb.gridfs.GridFsTemplate">
    <constructor-arg ref="mongoDbFactory" />
    <constructor-arg ref="converter" />
  </bean>

  <bean id="ceMongoStore" class="gov.ic.isso.ce.service.mongoimpl.CEStorageMongoImpl">
    <constructor-arg ref="mongoTemplate" />
    <constructor-arg ref="gridTemplate" />
    <constructor-arg value="cedocs" />
  </bean>
</beans> 
```

使用 run-app 选项运行应用程序时出现如下错误

```
 Error 2013-02-07 16:08:24,806 [localhost-startStop-1] ERROR context.GrailsContextLoader  - Error executing bootstraps: Cannot find class [gov.ic.isso.ce.service.mongoimpl.CEStorageMongoImpl] for bean with name 'ceMongoStore' defined in URL [jar:file:/C:/development/projects/sentrytrunk/Latest/fc/content-examiner-web/lib/content-examiner-data-1.0.jar!/applicationContext.xml]; nested exception is java.lang.ClassNotFoundException: gov.ic.isso.ce.service.mongoimpl.CEStorageMongoImpl
Message: Cannot find class [gov.ic.isso.ce.service.mongoimpl.CEStorageMongoImpl] for bean with name 'ceMongoStore' defined in URL [jar:file:/C:/development/projects/sentrytrunk/Latest/fc/content-examiner-web/lib/content-examiner-data-1.0.jar!/applicationContext.xml]; nested exception is java.lang.ClassNotFoundException: gov.ic.isso.ce.service.mongoimpl.CEStorageMongoImpl
   Line | Method
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread

Caused by ClassNotFoundException: gov.ic.isso.ce.service.mongoimpl.CEStorageMongoImpl
->> 202 | run      in java.net.URLClassLoader$1 
```

当我使用 jar tvf 转储 jar 文件时，我得到以下输出

```
1472 Thu Feb 07 16:00:30 EST 2013 applicationContext.xml
   709 Thu Feb 07 16:00:30 EST 2013 gov/ic/isso/ce/data/CEStorage.class
  1946 Thu Feb 07 16:00:30 EST 2013 gov/ic/isso/ce/data/model/document/Document.class
  1186 Thu Feb 07 16:00:30 EST 2013 gov/ic/isso/ce/data/model/document/DocumentStatus.class
  5995 Thu Feb 07 16:00:30 EST 2013 gov/ic/isso/ce/service/mongoimpl/CEStorageMongoImpl.class
     0 Thu Feb 07 16:00:34 EST 2013 META-INF/maven/
     0 Thu Feb 07 16:00:34 EST 2013 META-INF/maven/gov.ic.isso.content-examiner/
     0 Thu Feb 07 16:00:34 EST 2013 META-INF/maven/gov.ic.isso.content-examiner/content-examiner-data/
  1925 Thu Feb 07 15:54:44 EST 2013 META-INF/maven/gov.ic.isso.content-examiner/content-examiner-data/pom.xml
   146 Thu Feb 07 16:00:34 EST 2013 META-INF/maven/gov.ic.isso.content-examiner/content-examiner-data/pom.properties 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:54:13.373

删除`runtime "content:content-examiner-data:1.0"`或 jar 文件 - 你只需要一个。如果将jar文件添加到lib目录，则需要运行`grails compile --refresh-dependencies`才能将其添加到类路径中

# macos - 可编辑 NSTextField 的灵活高度

> ID：14761171
> 
> 赞同：1
> 
> 时间：2013-02-07T21:18:59.793
> 
> 标签：macos, cocoa, nstextfield

我创建了一个非常简单的演示项目，其中包含基于视图的表格视图和以下`NSTableViewDelegate`实现

```
- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    NSTableCellView *result = [tableView makeViewWithIdentifier:@"MyView" owner:self];
    result.textField.stringValue = [NSString stringWithFormat:@"Row %ld Row %ld Row %ld Row %ld Row %ld Row %ld Row %ld Row %ld Row %ld Row %ld Row %ld Row %ld end", row, row, row, row, row, row, row, row, row, row, row, row];
    return result;
} 
```

通过将`NSTextField`单元格中的 设置为自动换行，文本字段会自动获得正确的高度：

![所需布局](../Images/8c2b51900c28b111eb001a8f456e94bb.png)

一旦我改变`NSTextField`from `None`to的行为`Editable`，文本字段只显示一行： ![可编辑时的布局](../Images/757de97d5e54ab8eb1b5c71eb08d75c4.png)

我不知道为什么——有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:29:48.397

将您的开发人员工具更新到 Interface Builder 3.1.2 并重置文本字段上的布局和换行符设置。这样就行了！

# javascript - 如何在单击时使用 ajax 在动态创建的 div 中加载内容

> ID：14761180
> 
> 赞同：1
> 
> 时间：2013-02-07T21:19:45.500
> 
> 标签：javascript, jquery

这是我当前的代码：

```
var container, url;

$(".nav-list li a").on("click", function(e) {

   e.preventDefault();

   var $url = this.href + " #content";
   var container = $("#content");

   $(".nav li").removeClass("active");
   $(this).parent().addClass("active");

   $(this).addClass("clicked");

   var $row = $(".span10");
   var $rowNew = $('.new');

   if ($rowNew.children().length > 1) {
        $(".span10 div").removeClass("new");
        $('<div class="row-fluid new"></div>').prependTo($row);
   }

   if ($(".new").length == 0) {
        $('<div class="row-fluid new"></div>').prependTo($row);
        $('<div class="span6">' + container.load(url) + '</div>').appendTo('.new');
   } else {
        $('<div class="span6">' + container.load(url) + '</div>').appendTo('.new');
   }

}); 
```

我正在尝试在`<div class="span6">`HERE中加载内容，`</div>`但我对如何设置 .load 并在其中加载内容感到困惑。

当前的html输出：

```
<div class="row-fluid new">
   <div class="span6">
       container.load(url)
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:39:55.840

我认为您不应该使用`load`这种方式；它只是将结果放入您事先知道的现有元素中。更好地使用`get`成功回调：

```
 e.preventDefault();

    var url = $(this).attr('href') + ".content";

    [...]

    $.get(url, '', function(result) {
      if ($(".new").length == 0) {
        $('<div class="row-fluid new"></div>').prependTo($row);
        $('<div class="span6">' + result+ '</div>').appendTo('.new');
      } else {
        $('<div class="span6">' + result + '</div>').appendTo('.new');
      }
    }); 
```

在此过程中无需使用 `var container = $("#content");`并删除其 id。

# java - hibernate.QueryException：无法解析属性

> ID：14761181
> 
> 赞同：1
> 
> 时间：2013-02-07T21:19:46.037
> 
> 标签：java, hibernate

这是此错误的另一种情况：

```
21:22:15,881 ERROR [SessionFactoryImpl] Error in named query: ch.software.gvs.TroubleNotification_DeviceType.byType org.hibernate.QueryException: 
could not resolve property: type of: ch.ildsoftware.gvs.TroubleNotification_DeviceType
[select d.id from ch.ildsoftware.gvs.TroubleNotification_DeviceType d where d.type = :type] 
```

我有以下设置：

查询.xml：

```
<named-query name="ch.ildsoftware.gvs.TroubleNotification_DeviceType.byType">
    <query>
    select t.id from TroubleNotification_DeviceType t where t.type = :type
    </query>        
</named-query> 
```

TroubleNotification_DeviceType.java

```
import java.io.Serializable;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.Table;

@Entity
@Table(name = "tblgwTroubleNotification_ADSTyp")
public class TroubleNotification_DeviceType implements Serializable {

private static final long serialVersionUID = 1L;

private TroubleNotification id;
private DeviceType type;
private String createdBy;
private String createdDate;

public TroubleNotification_DeviceType() 
{}

public TroubleNotification_DeviceType(TroubleNotification id, DeviceType type) {
    this.id = id;
    this.type = type;
}

@Id
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "IDgwTroubleNotification", nullable = false)
public TroubleNotification getId() {
    return id;
}

public void setId(TroubleNotification id) {
    this.id = id;
}

@Id
@Column(name = "ADSTypID", nullable = false)
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "GeraeteTypID", nullable = false)
public DeviceType getType() {
    return type;
}

public void setType(DeviceType type) {
    this.type = type;
}

@Column(name = "Created", nullable = false)
public String getCreatedBy() {
    return createdBy;
}

public void setCreatedBy(String createdBy) {
    this.createdBy = createdBy;
}

@Column(name = "CreatedDate", nullable = false)
public String getCreatedDate() {
    return createdDate;
}

public void setCreatedDate(String createdDate) {
    this.createdDate = createdDate;
}
} 
```

我怀疑@Column 和@JoinColumn 注释可能有问题。只是我加入的列名来自一个别名列名的视图。但也许还有其他问题。我对此很陌生。

DeviceType 的片段：

```
private static final long serialVersionUID = 1L;
private Integer id;
private String name;

    ....

@Id
@Column(name = "GeraeteTypID", nullable = false)
public Integer getId()
{
    return this.id;
} 
```

在其他类中，引用将是这样的，并且运行良好（但列名相同）：

```
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "GeraeteTypID", nullable = false)
public DeviceType getType()
{
    return this.type;
} 
```

从 EJB 中提取的片段：

```
@Override
@SuppressWarnings("unchecked")
public List<TroubleNotification> getTroubleNotificationByDeviceType(DeviceType aType)
{
    // first get all IDgwTroubleNotification for ADSTypID
    Query idSet = gvsData.createNamedQuery(
            TroubleNotification_DeviceType.class.getName() + ".byType");
    idSet.setParameter("type", aType);
    List<TroubleNotification> idSetResult = idSet.getResultList();

    final List<TroubleNotification> troubleNotificationResult = new ArrayList<TroubleNotification>();
    for (int i = 0; i <  idSetResult.size(); i++) {
        // get all Notification for IDgwTroubleNotification
        Query notificationById = gvsData.createNamedQuery(
                TroubleNotification.class.getName() + ".byId");
        notificationById.setParameter("id", idSetResult.get(i));
        troubleNotificationResult.add((TroubleNotification) notificationById.getResultList());
    }
    return troubleNotificationResult;
} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:02:03.920

我发现我的数据库映射根本不正确。我有一个 n:m 关系，这似乎不是一个简单的 hibernate 关系。但这非常有帮助： [Hibernate Many-To-Many Revisited](http://planet.jboss.org/post/hibernate_many_to_many_revisited)

但这仍然不能解决问题。我发现我有复合主键，两个表的主键映射到 n:m 表中。另一个不太容易的设置。所以我关注了这个线程：[Mapping ManyToMany with composite Primary key and Annotation：](https://stackoverflow.com/questions/6405746/mapping-manytomany-with-composite-primary-key-and-annotation)

来自第二个链接的配置以及根据第一个链接中的第二个策略的 SQL 语句有效。

# php - 我似乎无法删除除最新消息之外的所有消息

> ID：14761183
> 
> 赞同：0
> 
> 时间：2013-02-07T21:19:49.887
> 
> 标签：php, gmail, imap

我正在使用您可能从 php.net 识别的以下代码来删除我收件箱中的所有电子邮件：

```
function deleteEmails($emailAddress)
{    
    // connect to gmail with your credentials
    $hostname = '{imap.gmail.com:993/imap/ssl}INBOX';
    $username = $emailAddress; # e.g somebody@gmail.com
    $password = '****************';

    // try to connect
    $inbox = imap_open($hostname,$username,$password) or die('Cannot download information: ' . imap_last_error());

    $check = imap_mailboxmsginfo($inbox);
    echo "Messages before delete: " . $check->Nmsgs . "<br />\n";

    imap_delete($inbox, '1:*');

    $check = imap_mailboxmsginfo($inbox);
    echo "Messages after  delete: " . $check->Nmsgs . "<br />\n";

    imap_expunge($inbox);

    $check = imap_mailboxmsginfo($inbox);
    echo "Messages after expunge: " . $check->Nmsgs . "<br />\n";

    imap_close($inbox);
} 
```

如果我让它失控，这有助于处理我的帐户偶尔会发生的堵塞。但是，我真正需要的是它删除我所有的电子邮件，除了最近的一封。我试图改变`imap_delete($inbox, '1:*');`，`imap_delete($inbox, '2:*');`但这只是导致它根本不起作用。

我错过了什么？

**编辑** 下面的建议我尝试了以下方法：

```
imap_delete($inbox, "2:$check->Nmsgs"); 
```

但有趣的是，它删除了所有“对话”，但在 gmail 中“对话”最多可以发送 61 封电子邮件！我不知道如何解决这个问题。此外，删除的内容在几分钟后返回......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:18:41.870

我知道 gmail 做了一些有趣的事情，只是对其进行了不同的标记并将其放入所有邮件文件夹中，因为在大多数 IMAP 系统上没有实际的“文件夹”。您是否尝试过只给它一个范围，例如

```
imap_delete($inbox,2:$check->Nmsgs); 
```

如果这不起作用，您可能只需要循环标记它们以进行删除，然后再删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T00:33:42.893

我发现了这个问题。默认情况下，Gmail 使用“对话”设置，这意味着任何带有相同主题的电子邮件都会组合在一起。这对所有东西都很有用，但可以在 gmail 设置中关闭。完成后，我需要确保我删除了除最新的以外的所有内容。使用`imap_delete($inbox,2:$check->Nmsgs);`删除所有，但最旧的。所以下面的代码为我做了：

```
 $emails = ($check->Nmsgs)-1;
    imap_delete($inbox, '1:' . $emails); 
```

这样我就得到了数字，但是直到最后一个进来的数字都被删除了（最近的）

完毕

# heroku - 播放 2：Json 请求在本地有效，但在 Heroku 上无效

> ID：14761185
> 
> 赞同：0
> 
> 时间：2013-02-07T21:20:03.270
> 
> 标签：heroku, playframework

我制作了一个简单的移动（Android）应用程序和网络（Play 2.1.0）应用程序。它实际上是 Android 上的打地鼠游戏，您可以在 Web 应用程序上发布您的分数（当然还可以获取前 10 名分数的列表）。

因此，GET 最高分请求和 POST 请求都可以在本地（在我的计算机上）完美运行。但是当我在 Heroku 上推送我的应用程序时，只有 GET 最高分请求有效。正如我所注意到的，POST 请求的问题在于接收 JSON（来自 Android）的 web api (Play2) 控制器。我猜它不知道如何从请求中解析 Json ......

我使用这种处理 Json 请求的方式：[http ://www.playframework.com/documentation/2.1.0/JavaJsonRequests](http://www.playframework.com/documentation/2.1.0/JavaJsonRequests)

我修改了我的代码以发现问题：

```
@BodyParser.Of(BodyParser.Json.class)
public static Result newScore() {
    JsonNode json;
    try {
        json = request().body().asJson();
        String jsonString = json.toString();
        return ok(jsonString);
    } catch (Exception e1) {
        return ok("PROBLEM");
    } 
} 
```

localhost 上的响应是我发送的 json 字符串。Heroku 上的响应被 String PROBLEM 捕获异常。这是一个非常奇怪的问题，我不知道为什么它在 localhost 上可以正常工作，但在 heroku 上却不行……有什么想法吗？:)

更新（Android logcat）：

```
02-08 00:01:09.140: I/SendResultService(18709): <!DOCTYPE html>
02-08 00:01:09.140: I/SendResultService(18709): <html>
02-08 00:01:09.140: I/SendResultService(18709):     <head>
02-08 00:01:09.140: I/SendResultService(18709):         <title>Error</title>
02-08 00:01:09.140: I/SendResultService(18709):         <link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAlFJREFUeNqUU8tOFEEUPVVdNV3dPe8xYRBnjGhmBgKjKzCIiQvBoIaNbly5Z+PSv3Aj7DSiP2B0rwkLGVdGgxITSCRIJGSMEQWZR3eVt5sEFBgTb/dN1yvnnHtPNTPG4PqdHgCMXnPRSZrpSuH8vUJu4DE4rYHDGAZDX62BZttHqTiIayM3gGiXQsgYLEvATaqxU+dy1U13YXapXptpNHY8iwn8KyIAzm1KBdtRZWErpI5lEWTXp5Z/vHpZ3/wyKKwYGGOdAYwR0EZwoezTYApBEIObyELl/aE1/83cp40Pt5mxqCKrE4Ck+mVWKKcI5tA8BLEhRBKJLjez6a7MLq7XZtp+yyOawwCBtkiBVZDKzRk4NN7NQBMYPHiZDFhXY+p9ff7F961vVcnl4R5I2ykJ5XFN7Ab7Gc61VoipNBKF+PDyztu5lfrSLT/wIwCxq0CAGtXHZTzqR2jtwQiXONma6hHpj9sLT7YaPxfTXuZdBGA02Wi7FS48YiTfj+i2NhqtdhP5RC8mh2/Op7y0v6eAcWVLFT8D7kWX5S9mepp+C450MV6aWL1cGnvkxbwHtLW2B9AOkLeUd9KEDuh9fl/7CEj7YH5g+3r/lWfF9In7tPz6T4IIwBJOr1SJyIGQMZQbsh5P9uBq5VJtqHh2mo49pdw5WFoEwKWqWHacaWOjQXWGcifKo6vj5RGS6zykI587XeUIQDqJSmAp+lE4qt19W5P9o8+Lma5DcjsC8JiT607lMVkdqQ0Vyh3lHhmh52tfNy78ajXv0rgYzv8nfwswANuk+7sD/Q0aAAAAAElFTkSuQmCC">
02-08 00:01:09.140: I/SendResultService(18709):         <style>
02-08 00:01:09.140: I/SendResultService(18709):             html, body, pre {
02-08 00:01:09.140: I/SendResultService(18709):                 margin: 0;
02-08 00:01:09.140: I/SendResultService(18709):                 padding: 0;
02-08 00:01:09.140: I/SendResultService(18709):                 font-family: Monaco, 'Lucida Console', monospace;
02-08 00:01:09.140: I/SendResultService(18709):                 background: #ECECEC;
02-08 00:01:09.140: I/SendResultService(18709):             }
02-08 00:01:09.140: I/SendResultService(18709):             h1 {
02-08 00:01:09.140: I/SendResultService(18709):                 margin: 0;
02-08 00:01:09.140: I/SendResultService(18709):                 background: #A31012;
02-08 00:01:09.140: I/SendResultService(18709):                 padding: 20px 45px;
02-08 00:01:09.140: I/SendResultService(18709):                 color: #fff;
02-08 00:01:09.140: I/SendResultService(18709):                 text-shadow: 1px 1px 1px rgba(0,0,0,.3);
02-08 00:01:09.140: I/SendResultService(18709):                 border-bottom: 1px solid #690000;
02-08 00:01:09.140: I/SendResultService(18709):                 font-size: 28px;
02-08 00:01:09.140: I/SendResultService(18709):             }
02-08 00:01:09.140: I/SendResultService(18709):             p#detail {
02-08 00:01:09.140: I/SendResultService(18709):                 margin: 0;
02-08 00:01:09.140: I/SendResultService(18709):                 padding: 15px 45px;
02-08 00:01:09.140: I/SendResultService(18709):                 background: #F5A0A0;
02-08 00:01:09.140: I/SendResultService(18709):                 border-top: 4px solid #D36D6D;
02-08 00:01:09.140: I/SendResultService(18709):                 color: #730000;
02-08 00:01:09.140: I/SendResultService(18709):                 text-shadow: 1px 1px 1px rgba(255,255,255,.3);
02-08 00:01:09.140: I/SendResultService(18709):                 font-size: 14px;
02-08 00:01:09.140: I/SendResultService(18709):                 border-bottom: 1px solid #BA7A7A;
02-08 00:01:09.140: I/SendResultService(18709):             }
02-08 00:01:09.140: I/SendResultService(18709):         </style>
02-08 00:01:09.140: I/SendResultService(18709):     </head>
02-08 00:01:09.140: I/SendResultService(18709):     <body>
02-08 00:01:09.140: I/SendResultService(18709):         <h1>Oops, an error occured</h1>
02-08 00:01:09.140: I/SendResultService(18709):         <p id="detail">
02-08 00:01:09.140: I/SendResultService(18709):             This exception has been logged with id <strong>6d9a6k11h</strong>.
02-08 00:01:09.140: I/SendResultService(18709):         </p>
02-08 00:01:09.140: I/SendResultService(18709):     </body>
02-08 00:01:09.140: I/SendResultService(18709): </html> 
```

解决方案：好的，我解决了一个问题——这实际上是我的 Android 代码中的一个问题：

```
public void postData(String url,JSONObject obj) {
        HttpParams myParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(myParams, 10000);
        HttpConnectionParams.setSoTimeout(myParams, 10000);
        HttpClient httpclient = new DefaultHttpClient();

        try {
            HttpPost httppost = new HttpPost(url.toString());
            httppost.setHeader("Content-type", "application/json");

            StringEntity se = new StringEntity(obj.toString());
            //se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json")); // <-- PROBLEM
            httppost.setEntity(se); 

            HttpResponse response = httpclient.execute(httppost);
            String temp = EntityUtils.toString(response.getEntity());
            Log.i(TAG, temp);
        } 
        catch (ClientProtocolException e) {Log.e(TAG, "Client protocol ex");} 
        catch (IOException e) {Log.e(TAG, "io ex");}
    } 
```

这段代码现在可以工作了，我评论了有问题的部分：将 BasicHeader 设置为字符串实体。这显然不是 localhost 的问题，但它是 Heroku 的问题。

# python - PyLucene 的自定义停用词

> ID：14761186
> 
> 赞同：1
> 
> 时间：2013-02-07T21:20:05.830
> 
> 标签：python, filter, set, stop-words, pylucene

在 PyLucene 中，有一个称为过滤器的过滤器`StopFilter`，它根据给定的停用词过滤令牌。示例调用如下：

```
result = StopFilter(True, result, StopAnalyzer.ENGLISH_STOP_WORDS_SET) 
```

替换停用词集的参数似乎应该很容易，但这实际上有点挑战性：

```
>>> StopAnalyzer.ENGLISH_STOP_WORDS_SET

<Set: [but, be, with, such, then, for, no, will, not, are, and, their, if, this, on, into, a, or, there, in, that, they, was, is, it, an, the, as, at, these, by, to, of]> 
```

这是一个`Set`，无法实现：

```
>>> Set()

NotImplementedError: ('instantiating java class', <type 'Set'>) 
```

有人建议在别处使用`PythonSet`PyLucene 附带的 a ，但事实证明这不是 a 的实例，`Set`不能与 a 一起使用`StopFilter`。

如何给出一`StopFilter`组新的停用词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:20:05.830

我通过 pylucene 开发列表上的这个线程在写这个问题的过程中发现了这个问题的答案：

[http://mail-archives.apache.org/mod_mbox/lucene-pylucene-dev/201202.mbox/thread](http://mail-archives.apache.org/mod_mbox/lucene-pylucene-dev/201202.mbox/thread)

您可以`StopFilter`使用自定义列表定义一个，如下所示：

```
mystops = HashSet(Arrays.asList(['a','b','c']))
result = StopFilter(True, result, mystops) 
```

# java - 在Java中递归传递计数器变量

> ID：14761189
> 
> 赞同：3
> 
> 时间：2013-02-07T21:20:12.397
> 
> 标签：java, recursion, counter

我有一个递归调用自身的函数：

```
public int foo(int num, int counter)
{
    if (num > 0)
    {
        counter++;
        num--;
        foo(num, counter);
    }

    return counter;
} 
```

从主要方法我调用函数：

```
System.out.println(bst.foo(3, 0)); 
```

我期待这样的行为：

```
public int foo(int num, int counter)
{
    // counter = 0
    // num = 3
    if (num > 0)
    {
        counter++; // counter = 1
        num--; // num = 2
        if (num > 0)
        {
            counter++; // counter = 2
            num--; // num = 1
            if (num > 0)
            {
                counter++; // counter = 3
                num--; // num = 0
                if (num > 0)
                {
                    // don't execute as num = 0
                }
            }
        }
    }

    return counter; // return 3
} 
```

但是函数总是返回`1`，我不知道为什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T21:22:01.880

您传递的是 的*值*，`counter`而不是变量本身。您的递归调用无法修改`counter`外部调用中的值。Java 是按值传递的。

一种可能的解决方案是

```
 counter = foo(num, counter); 
```

在递归调用中。或者，或者，只是，因为之后除了返回它之外`return foo(num, counter)`你不做任何事情。`counter`

# php - 如何检测同一封电子邮件是否在 2 分钟内多次出现？

> ID：14761194
> 
> 赞同：4
> 
> 时间：2013-02-07T21:20:25.937
> 
> 标签：php, html, sql, if-statement

如何检测同一电子邮件是否在 2 分钟内出现多次。

这是我的输出：

```
07-02-13 20:08:41   test11@gmail.com
07-02-13 20:09:41   test11@gmail.com
07-02-13 20:21:25   hottie@gmail.com
07-02-13 20:56:51   ugly@gmail.com
07-02-13 21:42:37   selma532@gmail.com
07-02-13 22:09:11   blalbla421@gmail.com 
```

这是我的 SQL 语句。

```
$results = $this->EE->db->query("SELECT t.* FROM transactions as t WHERE t.cardid > 0 ORDER BY t.created DESC"); 
```

我要他们分开她。因此，如果相同的邮件在 2 分钟内出现，则必须进行不良交易。

```
foreach ($results->result_array() as $filter) 
{ 
```

我可以帮忙：我有一个 $filter['created'] = 这包含时间，我有一个 $filter['email'] ）这包含电子邮件。

```
if(//Filter goes here) {
  $badtransactions[]=$filter;
} else {
  $cooltransactions[]=$filter;
} 
```

这是我的

```
<table class="table">
  <h3>Cool Transactions (<?php print_r($sizeCoolTransactions)?>) </h3>
  <thead>
    <tr>
      <th>Time</th>
      <th>Email</th>
    </tr>
  </thead>
  <tbody>
    <?php
    //Foreach over cooltransactions
    foreach($cooltransactions as $transaction) {

      // IS NEW?
      $isactive = false;
      if($transaction['created'] > time()-$refresh_timer){
        $isactive = true;
      }

      // Get user mail.
      $member_sql = $this->EE->db->query("SELECT email FROM exp_members WHERE member_id = '".($transaction['cardid']-10000000)."'");

      $member_result = $member_sql->result_array();
      if(isset($member_result[0])) {
        $member_result1 = $member_result[0];
      }
    ?>
    <tr class="<?= $isactive ? 'alert-success' : ''; ?>">

      <td><?= date('d-m-y H:i:s', $transaction['created']); ?></td>
      <td><?= isset($member_result1['email']) ? $member_result1['email'] : '<span style="color:red">Email mangler</span>'; ?></td>
    </tr>
    <?php
      }
    ?>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:13:20.597

这是你要找的吗？不幸的是，它是为 MSSQL 编写的，但希望您可以更改语法以使用您的 RDBMS。

基本上设置您的当前时间（我默认它以适应提供的数据）并使用 DATEADD() 创建一个范围。查询日期时间在过去 2 分钟内为您提供所有电子邮件的范围内的哪个位置。最后将其包装在 GROUP BY Email HAVING COUNT(*) > 1 中以显示所有重复项。

[http://sqlfiddle.com/#!3/1d759/17](http://sqlfiddle.com/#!3/1d759/17)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:25:20.050

您可以编写如下所示的 SQL 查询。基本上所有这些都是，对于数据库中返回的每一行，检查同一个表中具有该电子邮件地址的条目以及大于 -2（过去两分钟）的日期时间字段（在本例中为 Created）上的 timediff 和+2（未来两分钟）。如果在当前记录的两分钟内找到一条记录，它将 OccursWithinTimescale 字段值设置为匹配记录的 id 的值。因此，如果 OccursWithinTimescale 为空，则该电子邮件在两分钟内没有出现在表中，否则它有，并且您有违规记录的 id。

```
select l1.id, created,
(select max(id) from log where email = l1.email 
    and (
            (minute(timediff(created, l1.created)) <= 2 and minute(timediff(created, l1.created)) >= -2)
        ) 
    and id <> l1.id
    and date(created) = date(l1.created)
) as OccursWithinTimescale, 
l1.email from log l1 
```

使用这种方法有一些限制，因为我没有包含任何关于索引的内容，您需要使用这种子查询来研究它。此外，如果在大型数据集上使用子查询，可能会消耗大量资源。但这至少是一种选择，尽管可能不是最好的。

您可以通过在 OccursWithinTimescale is not null 上添加 where 子句来进一步调整该查询以仅返回在两分钟内发生的所有记录。

# windows-8 - SQL Server 2008 Express 先决条件失败

> ID：14761201
> 
> 赞同：1
> 
> 时间：2013-02-07T21:20:39.830
> 
> 标签：windows-8, sql-server-2008-express

我有一个以 SQL Server 2008 Express 作为先决条件的应用程序。

在 Windows 8 Pro 中安装失败，但出现以下错误消息：

> 使用命令 'C:\Users\Ranjith\AppData\Local\Temp\VSD26C2.tmp\SqlExpress2008\SQLEXPR32_x86_ENU.EXE' 和参数 '/q /hideconsole /action=Install /features=SQL /instancename=SQLEXPRESS /enableranu=1 安装/sqlsvcaccount="NT Authority\Network Service" /AddCurrentUserAsSqlAdmin /skiprules=RebootRequiredCheck' 进程退出，代码为 -2068643839 安装后包“SQL Server 2008 Express”的状态为“InstallFailed”

退出代码`-2068643839`是什么意思？

注意：尝试在 social.msdn.microsoft.com 上发帖但没有太多回应。

# c# - 使用 nhibernate 的 mvc4 自定义成员资格提供程序

> ID：14761202
> 
> 赞同：0
> 
> 时间：2013-02-07T21:20:42.203
> 
> 标签：c#, asp.net-mvc-3, nhibernate, asp.net-mvc-4

我已经实现了自定义 nhibernate 会员提供程序的工作解决方案以在`mvc3`项目中使用。它是独立的 web.membership 项目，涵盖了我在网络应用程序中需要的所有内容。

现在我想切换到 mvc4，我注意到它使用了`System.Web.Security.FormsAuthentication`类中的类`Account controller`，它也使用了`WebMatrix.WebData.Security`类。

如果有人知道有关如何编写自定义（nhibernate 与否）的有用教程，`simple membership provider` 那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:25:25.763

与`System.Web.Security.FormsAuthentication`会员资格完全无关。这用于发出表单身份验证 cookie，这是自 ASP.NET 1.0 以来存在的类，并不特定于 MVC4。

SimpleMembership Provider 确实是为 ASP.NET MVC 4 设计的新的自定义成员资格提供程序，它使用 SQL Server 来查询数据库。

您仍然可以在 MVC4 中使用您的自定义会员提供程序，而不会出现任何问题。创建简单成员资格提供程序是为了让没有任何现有成员资格提供程序代码的用户开始使用 MVC。由于您已经有了 NHibernate 的有效实现，我建议您使用它。Simple Membership Provider 不打算以这种方式进行定制。

# javascript - ReferenceError：找不到变量：WebForm_DoPostBackWithOptions

> ID：14761210
> 
> 赞同：2
> 
> 时间：2013-02-07T21:21:20.680
> 
> 标签：javascript, iphone, asp.net, ipad, postback

我在 ASP.NET Webforms 登录页面上遇到了 iPhone / Droids / iPad 最奇怪的问题。

一切正常，用户名/密码 Javascript 验证触发一切......当用户推送提交时，页面简单地超时很长时间，并出现此错误。我不确定这是否是一些奇怪的 JS / 后端 / 等类型的问题！

> ReferenceError：找不到变量：WebForm_DoPostBackWithOptions

在按钮本身上，从 ASP.NET 生成的代码是：

```
href='javascript:WebForm_DoPostBackWithOptions(new 
    WebForm_PostBackOptions("ctl00$MainContent$btnSubmit", "", true, 
    "LoginUserValidationGroup", "", false, true))' 
```

至于后端，除了登录验证之外，该事件没有做任何特别的事情！

```
Protected Sub btnSubmit_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnSubmit.Click
    ' Check U/Password etc...
End Sub 
```

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:52:53.183

我也有这个问题。我的第一个倾向是认为这是由 WebResource.axd 加载的包含 WebForm_PostBackOptions 函数的脚本在首次点击登录按钮时未完全加载的时间问题。我怀疑这是发生在浏览器插件或其他方便的工具上，例如 LastPass，它会在表单可见但可能在加载所有资源之前非常快速地自动填充并提交登录表单。

我试图通过将登录表单放在隐藏的 div 中，然后在 jquery $(document).ready(function () 中显示 div 来解决这个问题。我们将看看它是如何工作的。

# ios - 如何覆盖自定义 UIButton 的 VoiceOver 光标矩形？

> ID：14761214
> 
> 赞同：1
> 
> 时间：2013-02-07T21:21:30.270
> 
> 标签：ios, accessibility, voiceover

我有一个 UIViewController，它在一个拆分器类型的界面中包含两个 UIView。在第一个视图中，我有许多 UIButtons，它们的位置通常使按钮超出视图的边缘，因此不完全可见。在这种情况下，VoiceOver 光标的问题是光标围绕按钮的整个范围，因此光标会延伸到视图的右侧。

在无障碍培训课程中，有人告诉我，您可以以某种方式覆盖按钮边缘周围的默认光标，并让它围绕您喜欢的任何矩形，但我找不到如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:53:03.590

听起来您想在每个按钮上设置一个自定义的[accessibilityFrame 。](http://developer.apple.com/library/ios/documentation/uikit/reference/UIAccessibility_Protocol/Introduction/Introduction.html#//apple_ref/occ/instp/NSObject/accessibilityFrame)[如果您使用CGRectIntersection()](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html#//apple_ref/c/func/CGRectIntersection)将屏幕矩形与每个按钮的框架相交，则可以获得屏幕上每个按钮框架的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-05T16:13:16.227

如果您必须绘制除矩形以外的其他内容，您可以使用或 调整您想要的每个可访问元素[的焦点区域。](http://a11y-guidelines.orange.com/mobile_EN/dev-ios.html#modify-the-focus-area-of-voiceover) 在第一种情况下，该方法可能对构建最终矩形非常有帮助。`accessibilityFrame``accessibilityPath`
`union`

最后，不要忘记指定 ，`accessibilityActivationPoint`以免使用不同大小的`Dynamic Type`.

# jquery - 如何使用当前版本的 jquery ui 记住活动选项卡

> ID：14761225
> 
> 赞同：4
> 
> 时间：2013-02-07T21:22:00.600
> 
> 标签：jquery, jquery-ui

当我的页面刷新时，我希望能够返回到用户上次使用的选项卡。当前的 api 文档不再提及 cookie 来进行选项卡选择。现在如何使用 cookie 进行此操作？

```
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>jQuery UI Tabs - Default functionality</title>
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
        <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
        <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
        <link rel="stylesheet" href="/resources/demos/style.css" />
        <script>
            $(function() {
                $("#tabs").tabs();
            });
        </script>
    </head>
    <body>
        <div id="tabs">
            <ul>
                <li><a href="#tabs-1">Nunc tincidunt</a></li>
                <li><a href="#tabs-2">Proin dolor</a></li>
                <li><a href="#tabs-3">Aenean lacinia</a></li>
            </ul>
            <div id="tabs-1">
                <p>Tab 1 text</p>
            </div>
            <div id="tabs-2">
                <p>Tab 2 text</p>
            </div>
            <div id="tabs-3">
                <p>Tab 3 text</p>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T22:14:20.723

所以这就是我想出的。当用户激活选项卡时，将使用所选选项卡的索引设置 cookie。初始化选项卡小部件时，将从 cookie 中读取值并加载。即使 cookie 不存在并且仅在 cookie 存在时加载用户最后选择的选项卡，这似乎也有效。

```
$("#tabs").tabs({
    activate: function( event, ui ) {
        $.cookie("tabs_selected", $("#tabs").tabs("option","active"));
    },
    active: $("#tabs").tabs({ active: $.cookie("tabs_selected") })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:59:34.540

```
$("#tabs").tabs({ cookie: { expires: 30} }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-11T20:15:23.353

你可以编辑 jquery-ui.js 文件

1.  打开文件
2.  搜索`this.anchors.bind("click.tabs",function(){return!1})}`
3.  用。。。来代替`this.anchors.bind("click.tabs",function(){})}`

刷新你的页面就好了

# ssh - vagrant：在主机和来宾之间共享 ssh 文件夹

> ID：14761229
> 
> 赞同：4
> 
> 时间：2013-02-07T21:22:11.880
> 
> 标签：ssh, vagrant

为了`bundle`在我的虚拟机中作为我的正常自我连接到 Github，我想`config.vm.share_folder "ssh", "/home/vagrant/.ssh", "~/.ssh"`.

除了这会破坏 vagrant 的公钥/私钥身份验证。

### 尝试的解决方案#1

我试图将我的公钥复制为`authorized_keys`. 相同的行为；我需要输入密码`vagrant ssh`。

### 尝试的解决方案#2

将公钥复制到`authorized_keys`，还要设置`config.ssh.private_key_path = "~/.ssh/id_dsa"`。不过，这只是把一切都搞砸了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T21:51:50.907

我认为您要研究的是 SSH 代理转发。[Vagrant 有一个配置选项来启用它](http://docs.vagrantup.com/v1/docs/config/ssh/forward_agent.html)。如果您已经在本地运行 SSH 代理，这绝对是可行的方法。

事实上，即使您没有运行 SSH 代理，我仍然建议您研究一下。

另一种但非常肮脏的解决方案可能是使用[vagrant shell 配置](http://docs.vagrantup.com/v1/docs/provisioners/shell.html)器将您的私钥放在 ~/.ssh/ 中，并将相关条目设置在 ~/.ssh/config 中。就像是：

```
Host *
    IdentityFile ~/.ssh/my_non_vagrant_key 
```

# eclipse - spring tool suite spring mvc项目——创建后的22个问题

> ID：14761234
> 
> 赞同：5
> 
> 时间：2013-02-07T21:22:43.407
> 
> 标签：eclipse, maven, spring-mvc, eclipse-plugin

因此，我下载并安装了 STS，然后创建了一个新的 Spring MVC 项目。紧接着 sts 提醒我 22 个问题，它们是：

```
Description Resource    Path    Location    Type
Missing artifact aopalliance:aopalliance:jar:1.0    pom.xml /ContactManager line 1          Maven Dependency Problem
Missing artifact org.springframework:spring-beans:jar:3.1.1.RELEASE pom.xml /ContactManager line 1  Maven Dependency Problem
Missing artifact org.springframework:spring-context:jar:3.1.1.RELEASE   pom.xml /ContactManager line 1  Maven Dependency Problem
Missing artifact org.springframework:spring-aop:jar:3.1.1.RELEASE   pom.xml /ContactManager line 1  Maven Dependency Problem
ArtifactDescriptorException: Failed to read artifact descriptor for org.slf4j:slf4j-api:jar:1.6.6: ArtifactResolutionException: Failure to transfer org.slf4j:slf4j-api:pom:1.6.6 from http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced. Original error: Could not transfer artifact org.slf4j:slf4j-api:pom:1.6.6 from/to central (http://repo.maven.apache.org/maven2): C:\Users\Skeeve\.m2\repository\org\slf4j\slf4j-api\1.6.6\slf4j-api-1.6.6.pom.ahc3656264e3b414ddf (Не удается найти указанный файл)   pom.xml /ContactManager line 1  Maven Dependency Problem
Missing artifact org.slf4j:jcl-over-slf4j:jar:1.6.6 pom.xml /ContactManager line 1  Maven Dependency Problem
Missing artifact org.aspectj:aspectjrt:jar:1.6.10   pom.xml /ContactManager line 1  Maven Dependency Problem
Missing artifact org.springframework:spring-web:jar:3.1.1.RELEASE   pom.xml /ContactManager line 1  Maven Dependency Problem
Missing artifact org.springframework:spring-context-support:jar:3.1.1.RELEASE   pom.xml /ContactManager line 1  Maven Dependency Problem
Missing artifact org.springframework:spring-webmvc:jar:3.1.1.RELEASE    pom.xml /ContactManager line 1  Maven Dependency Problem
Missing artifact org.springframework:spring-asm:jar:3.1.1.RELEASE   pom.xml /ContactManager line 1  Maven Dependency Problem
Missing artifact org.springframework:spring-expression:jar:3.1.1.RELEASE    pom.xml /ContactManager line 1  Maven Dependency Problem
Missing artifact org.springframework:spring-core:jar:3.1.1.RELEASE  pom.xml /ContactManager line 1  Maven Dependency Problem
Missing artifact junit:junit:jar:4.7    pom.xml /ContactManager line 1  Maven Dependency Problem
Missing artifact javax.servlet:jstl:jar:1.2 pom.xml /ContactManager line 1  Maven Dependency Problem
Missing artifact javax.servlet.jsp:jsp-api:jar:2.1  pom.xml /ContactManager line 1  Maven Dependency Problem
Missing artifact javax.servlet:servlet-api:jar:2.5  pom.xml /ContactManager line 1  Maven Dependency Problem
Missing artifact javax.inject:javax.inject:jar:1    pom.xml /ContactManager line 1  Maven Dependency Problem
Missing artifact log4j:log4j:jar:1.2.15 pom.xml /ContactManager line 1  Maven Dependency Problem
Missing artifact org.slf4j:slf4j-log4j12:jar:1.6.6  pom.xml /ContactManager line 1  Maven Dependency Problem

Description Resource    Path    Location    Type
The project cannot be built until build path errors are resolved    ContactManager      Unknown Java Problem

Description Resource    Path    Location    Type
The container 'Maven Dependencies' references non existing library 'C:\Users\Skeeve\.m2\repository\org\springframework\spring-context\3.1.1.RELEASE\spring-context-3.1.1.RELEASE.jar'   ContactManager      Build path  Build Path Problem 
```

我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T09:04:25.053

我在第一次创建新的 STS 项目时也遇到了很多错误。这似乎只有在我没有任何 Maven 存储库或之前没有启动/使用 Maven 时才会发生。就我而言，我通过手动从命令行启动 Maven 命令来解决这个问题。尝试从那里“cd”到包含`pom.xml`和调用`mvn`STS 附带的项目目录。

```
 cd c:\users\name\sts-projects\projectname
   c:\programs\springsource\apache-maven-3.0.3\bin\mvn compile 
```

然后，打开 STS，右键单击项目名称，选择“Maven”，“更新项目...”选择“强制更新快照/发布”。不要选择“离线”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T21:26:05.050

你在代理后面吗？如果是这样，您需要配置 Maven 才能使用它。

如果不是这种情况，只需右键单击您的项目并选择**Maven->Update Project Configuration**。这应该有效。可能您必须清理/刷新项目。

# javascript - 如何使用 jquery 将事件或函数从 Chrome 开发工具控制台附加到当前页面？

> ID：14761240
> 
> 赞同：0
> 
> 时间：2013-02-07T21:23:10.243
> 
> 标签：javascript, jquery, dom, google-chrome-devtools

我不是前端开发人员，然后我是 jquery 的新手，现在当我开发/设计任何东西时，我经常使用 Chrome 开发人员工具的控制台来测试我的查询，这非常有用。

但是今天我遇到了一个问题，我需要在一个 div 上放置一个点击事件，我把这个函数放在 View(MVC) 上，然后启动应用程序，通过登录，点击这里，点击那里。而当考验的时刻到来时，事件并没有奏效。

如果使用 jquery 我可以从 Chrome 开发工具的控制台向 div 附加一个新的点击事件，而不是更改视图-编译-执行等，那会很好。

我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:27:33.593

我不确定我是否真的明白你的意思。但我认为你的意思是如何触发特定 div 上的点击事件。

如果是这样，您可以使用`$("div#id").click();`（它是 的快捷方式`$("div#id").trigger("click")`）

当然，您可以在控制台上运行它

# android - Android 谷歌地图 API V2 黑屏

> ID：14761245
> 
> 赞同：25
> 
> 时间：2013-02-07T21:23:22.390
> 
> 标签：android, google-maps, google-maps-android-api-2

嗨，我最近关注了 Vogella 关于 Google Map API v2 的教程。代码与他的相似。但是由于某种原因，地图显示为空白，并且 logcat 也没有显示错误。我还按照此[视频](http://www.youtube.com/watch?v=dSqLKIow7sY)获取 SHA1 指纹，然后将 API 密钥放入清单文件中。我使用了调试密钥库 C:\Users\UserName.android\debug.keystore，它也是位于 Eclipse -> Windows -> Preference -> Android -> Build 中的默认调试密钥库。

我还生成了一个新的 API 密钥，但它仍然不起作用。

清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.barcodelibrary"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="15" />

    <permission
        android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />
    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.camera.autofocus" />
    <uses-feature android:name="android.hardware.camera.flash" />

    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.VIBRATE"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.SET_DEBUG_APP"></uses-permission>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".HomeActivity"
            android:label="@string/title_activity_home" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity>
        <activity android:name=".ScanActivity"/>
        <activity android:name=".MapActivity"/>
        <activity android:name=".BarcodeHelper"/>
        <activity android:name=".JsonHelper"/>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="my api key" />
    </application>

</manifest> 
```

这是我的地图活动布局文件：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MapActivity" >

        <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.MapFragment" />

</RelativeLayout> 
```

这是我的地图活动：

```

`public class MapActivity extends Activity 
{
    static final LatLng HAMBURG = new LatLng(53.558, 9.927);
    static final LatLng KIEL = new LatLng(53.551, 9.993);
    private GoogleMap map;
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_map);

        map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
                .getMap();
            Marker hamburg = map.addMarker(new MarkerOptions().position(HAMBURG)
                .title("Hamburg"));
            Marker kiel = map.addMarker(new MarkerOptions()
                .position(KIEL)
                .title("Kiel")
                .snippet("Kiel is cool")
                .icon(BitmapDescriptorFactory
                    .fromResource(R.drawable.ic_launcher)));
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_map, menu);
        return true;
    }
}` 

谢谢！

            回答 #1

赞同：28

时间：2013-02-07T22:03:27.210

您的清单有几个权限问题。首先，在下面你需要用你的包替换包名，你还需要作为一个`uses-permission`

```
 <permission
        android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" /> 
```

根据你的包名，应该是——

```
<permission
          android:name="com.example.barcodelibrary.permission.MAPS_RECEIVE"
          android:protectionLevel="signature"/>
<uses-permission android:name="com.example.barcodelibrary.permission.MAPS_RECEIVE"/> 
```

最后，您似乎缺少[入门指南的](https://developers.google.com/maps/documentation/android/start)[指定权限](https://developers.google.com/maps/documentation/android/start#specifying_permissions)部分中的以下权限-

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

            回答 #2

赞同：10

时间：2014-07-09T11:05:56.927

对我来说，事实证明我没有启用[`Google Maps Android API v2`](https://console.developers.google.com). 我们正在使用另一个我认为是相同的 Google Maps API。  

            回答 #3

赞同：2

时间：2013-09-04T12:48:42.260

如果它不起作用，请按照这个

解决地图上的黑屏问题：您好，我已经通过这个黑屏很长时间了，并尝试了您可以想象的所有解决方案。现在它解决了，步骤是：

1-仔细[阅读本教程的所有步骤。](https://blog-emildesign.rhcloud.com/?p=435)

2-如果空白屏幕仍然相同，请删除 c:\Users\youUser.android\debug.keystore 中存在的调试密钥存储文件 <-- 删除此文件

3-在 eClips IDE 上重建您的应用程序，以便它会自动重新创建此文件。4-在 eclips 上转到 Window-->preferences-->android-->Build 复制新生成的 SHA1，然后按照正常的密钥生成步骤。5-在你的真实设备上运行，我希望你能看到你的地图 :)

            回答 #4

赞同：2

时间：2016-08-30T20:04:35.480

我必须将正确的 SHA-1 证书指纹添加到我的 Google Developer Console。

1.  显示当前指纹：`keytool -list -keystore ~/.android/debug.keystore`

2.  复制指纹（例如**48:6F:55:B7:C5:E4:54:E1:29:D5:E1:E1:E2:A8**）

3.  [在Google Developer Console](http://console.developers.google.com)中将其添加到该特定应用的凭据中

            回答 #5

赞同：1

时间：2015-04-30T15:42:08.833

我的地图也有类似的问题。修复所有库和关键问题后，我只看到一个标有“Google”的白色屏幕。问题是，我`MapFragment`把`ScrollView`. 删除后`ScrollView`一切正常。我可以看到地图。

            回答 #6

赞同：0

时间：2014-09-17T23:18:20.733

您必须在具有以下配置的模拟器中运行您的应用程序.. 
 **1) Google API(x86 System image) 2) 选中指示使用主机 GPU 的复选框..**

            回答 #7

赞同：0

时间：2014-11-16T01:56:04.577

大多数人忘记[在开发者控制台中激活 Google Maps Android API V2](https://code.google.com/apis/)，我激活了它，瞧，我的地图出现了。

            回答 #8

赞同：0

时间：2014-12-05T01:23:28.427

将自定义键位设置为与默认键位相同（Eclipse）。并按照文档中的说明在 google 控制台中注册一个 API 密钥。

            回答 #9

赞同：0

时间：2016-08-10T13:08:58.317

就我而言，这是我从 GitHub 克隆的现有应用程序，并且没有更改 API 密钥。对我有用的是启用我的签名证书的 SHA-1。按照这些[简短说明](https://developers.google.com/android/guides/client-auth)获取 SHA-1 指纹。

[然后我让主要开发人员在此处](https://console.developers.google.com/apis/credentials?)将我的 SHA-1 指纹添加到他的相关 API 密钥的授权包中。然后我以同样的方式再次进行了构建，并且成功了。

            回答 #10

赞同：0

时间：2017-09-15T02:30:03.417

[我在其他帖子中的回答](https://stackoverflow.com/a/46230805/4107223)是对我真正有用的，我粘贴了**App 签名证书**sha-1

            回答 #11

赞同：0

时间：2021-02-14T07:03:43.400

确认您的 api-key 是正确的。您还可以尝试从 API 密钥中删除限制

            回答 #12

赞同：-1

时间：2015-11-04T22:11:55.337

**Android Studio：**
确保将密钥放在正确的层次结构中

[![在此处输入图像描述](../Images/481214dc76b7d4a528f7feb2b8ad193e.png)](https://i.stack.imgur.com/fnRIl.png)

            回答 #13

赞同：-2

时间：2015-06-24T15:24:52.897

我有一个类似的问题，调试没问题，但发布时出现空白屏幕。API 密钥很好。

有效的方法是替换它：

```
<meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="@string/google_maps_key" /> 
```

这样

```
<meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXGNc" /> 
```

直接添加您的 api 密钥，无需资源字符串

```

# knockout.js - 替换淘汰赛数组中的项目

> ID：14761246
> 
> 赞同：0
> 
> 时间：2013-02-07T21:23:29.503
> 
> 标签：knockout.js

更新后我需要替换 ko 数组中的一个项目。问题在于我需要旧项目的替换功能。

这是我的功能：

```
self.saveMarket = function (market) {
    var item = ko.toJS(market);

    $.ajax({
        type: (item.MarketId != "" ? 'PUT' : 'POST'),
        url: url + (item.MarketId != "" ? '?id=' + item.MarketId : ''),
        data: item,
        success: function (data) {
            self.Markets.push(market);
            self.showList();
        },
        error: function (err) {
            alert(err);
        },
    });
} 
```

这应该同时处理插入和更新。插入适用于推送（市场），但如果我进行更新，如何用新项目替换旧项目？

谢谢指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:45:53.640

您可能必须遍历您的可观察数组（使用 ko.utils.arrayForEach 或 $.each），找到具有匹配市场 ID 的项目，从数组中删除该元素，然后推送新元素。

# c# - 当应用程序失去焦点时，WaitForExit 进程结束

> ID：14761253
> 
> 赞同：1
> 
> 时间：2013-02-07T21:23:54.743
> 
> 标签：c#, process

我正在尝试做这样的事情：

```
var process = Process.Start("MyGame.exe");
process.WaitForExit();
MessageBox.Show("Game is closed"); 
```

问题是当我`Alt + Tab`玩游戏时，我的应用程序认为游戏已经退出，然后显示消息。我想在消息出现之前完全等待程序关闭。

有没有解决的办法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:41:55.810

Alt+Tabbing 离开使用 DirectX 的程序会生成“设备丢失”错误代码。[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174714%28v=vs.85%29.aspx)中描述：

> 根据设计，未指定可能导致设备丢失的全部场景。一些典型示例包括失去焦点，**例如当用户按下 ALT+TAB**或初始化系统对话框时。设备也可能由于电源管理事件或其他应用程序采用全屏操作而丢失。此外，来自 IDirect3DDevice9::Reset 的任何故障都会使设备进入丢失状态。

这个错误在游戏逻辑中可能很难处理，因为它恰好在游戏循环的中心出现。显然，您游戏的程序员找到了一个非常棘手但有效的解决方案：他只需重新启动程序。这会恢复程序状态并在重新获取显示后立即让游戏重新开始。

一种可能的解决方法是在 WaitForExit() 完成后休眠一段时间，然后使用 Process.GetProcessesByName() 来确定它是否开始备份。这将为您提供新的项目参考，冲洗并重复。

# ruby-on-rails-3 - 生产中的大型日志文件

> ID：14761260
> 
> 赞同：0
> 
> 时间：2013-02-07T21:24:34.370
> 
> 标签：ruby-on-rails-3, logging

我有一个生产中的 Rails 3 应用程序，生产日志很大。我可以安全地删除它并允许 Rails 生成另一个吗？我是否必须重新启动 Rails 应用程序或重新部署？我必须触摸 production.log 吗？

这个东西有300mb大小，我想杀了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:33:44.600

将无论何时 gem 添加到您的 gem 文件中

```
gem "whenever", "~> 0.7.2", require: false 
```

并创建一个随时任务来执行此操作

例如，在您的 Rails 应用程序上运行`wheneverize`commanad，它将在您的配置目录中为您创建一个 schedule.rb 文件，您可以向其中添加一个任务，例如

```
every 1.day, :at => '4:30 am' do
  rake "log:clear"
end 
```

如果您使用 capistrano 进行部署，请将其添加到您的 deploy.rb

```
set :whenever_command, "bundle exec whenever" 
```

这将随时为您自动设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:01:42.550

您可以随时删除日志，而不必担心应用程序。理想情况下，您应该轮换这些日志以防止它们变得如此之大。您可以使用 logrotate 执行此操作。对于 ubuntu，它会是这样的（取自[这个问题](https://stackoverflow.com/questions/4883891/ruby-on-rails-production-log-rotation)）：

```
 /path/to/rails.example.com/tmp/log/*.log {
        weekly
        missingok
        rotate 52
        compress
        delaycompress
        notifempty
        create 640 root adm
        copytruncate
    } 
```

[这](http://linuxcommand.org/man_pages/logrotate8.html)是 logrotate 手册页以获取更多信息，尽管说明有些不言自明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T22:37:38.837

```
/home/deploy/appname/current/log/*.log {
  daily
  missingok
  rotate 7
  compress
  delaycompress
  notifempty
  copytruncate
} 
```

将 logrotate 与上述配置一起使用，它运行良好。

# sql - 遍历数据集一次

> ID：14761265
> 
> 赞同：0
> 
> 时间：2013-02-07T21:24:46.977
> 
> 标签：sql, sql-server, vb.net

我的任务是更新位于 SQL 2005 数据库中的表中的一些字段。我目前正在使用 vb.net 2010 (.net 4) 并且仍在学习这些东西，所以请保持温和。如果我错过了什么，请告诉我，我会尽快补上。最后，对不起，这太长了，但否则我很难创建一个描述。

除了包含的表格中显示的字段外，还有一些其他字段，但在整体方案中并不重要。此表用于劳动力跟踪，因此操作员/用户登录到工作并填充以下字段：EmployeeWorkID（主键）、EmployeeID（从单独的表派生）、LoginDatetime（日期时间戳）和状态。填充 db 表的真实世界示例：

> 运行应用程序之前的表格：

```
EmplWorkID EmplID  LoginDateTime     LogoutDateTime    Status LoggedIn LoggedOut
93464       376    2013-01-31 15:00  2013-01-31 17:25    C       0        0
93466       376    2013-01-31 17:26  2013-01-31 23:00    C       0        0
93468       376    2013-02-01 15:00  2013-02-01 23:00    C       0        0
93484       380    2013-02-01 07:00  2013-02-01 09:17    C       0        0
93485       380    2013-02-01 09:18  2013-02-01 11:22    C       0        0
93486       380    2013-02-01 11:23  NULL                A       0        0
93479       385    2013-01-31 07:03  2013-01-31 09:32    C       0        0
93481       385    2013-01-31 09:33  NULL                A       0        0
93473       385    2013-02-01 07:05  2013-02-01 09:13    C       0        0
93482       385    2013-02-01 09:14  2013-02-01 11:34    C       0        0
93480       385    2013-02-01 11:35  2013-02-01 13:41    C       0        0
93483       385    2013-02-01 13:42  2013-02-01 15:03    C       0        0
93478       394    2013-01-31 23:03  2013-02-01 00:53    C       0        0
93475       394    2013-02-01 00:54  2013-02-01 03:26    C       0        0
93476       394    2013-02-01 03:27  2013-02-01 05:39    C       0        0
93477       394    2013-02-01 05:44  2013-02-01 07:03    C       0        0 
```

> 第一次运行后的表：

```
EmplWorkID EmplID  LoginDateTime     LogoutDateTime    Status LoggedIn LoggedOut
93464       376    2013-01-31 15:00  2013-01-31 17:25    C       1        0
93466       376    2013-01-31 17:26  2013-01-31 23:00    C       0        1
93468       376    2013-02-01 15:00  2013-02-01 23:00    C       1        1
93484       380    2013-02-01 07:00  2013-02-01 09:17    C       1        0
93485       380    2013-02-01 09:18  2013-02-01 11:22    C       0        0
93486       380    2013-02-01 11:23  2013-02-01 15:00    C       0        1
93479       385    2013-01-31 07:00  2013-01-31 09:32    C       1        0
93481       385    2013-01-31 09:33  2013-01-31 15:00    C       0        1
93473       385    2013-02-01 07:00  2013-02-01 09:13    C       1        0
93482       385    2013-02-01 09:14  2013-02-01 11:34    C       0        0
93480       385    2013-02-01 11:35  2013-02-01 13:41    C       0        0
93483       385    2013-02-01 13:42  2013-02-01 15:00    C       0        1
93478       394    2013-01-31 23:00  2013-02-01 00:53    C       1        0
93475       394    2013-02-01 00:54  2013-02-01 03:26    C       0        0
93476       394    2013-02-01 03:27  2013-02-01 05:39    C       0        0
93477       394    2013-02-01 05:44  2013-02-01 07:00    C       0        1 
```

> 第二次运行后的表：

```
EmplWorkID EmplID  LoginDateTime     LogoutDateTime    Status LoggedIn LoggedOut
93464       376    2013-01-31 15:00  2013-01-31 17:25    C       1        0
93466       376    2013-01-31 15:00  2013-01-31 23:00    C     **1**      1
93468       376    2013-02-01 15:00  2013-02-01 23:00    C       1        1
93484       380    2013-02-01 07:00  2013-02-01 09:17    C       1        0
93485       380    2013-02-01 07:00  2013-02-01 11:22    C     **1**      0
93486       380    2013-02-01 11:23  2013-02-01 15:00    C       0        1
93479       385    2013-01-31 07:00  2013-01-31 09:32    C       1        0
93481       385    2013-01-31 07:00  2013-01-31 15:00    C     **1**      1
93473       385    2013-02-01 07:00  2013-02-01 09:13    C       1        0
93482       385    2013-02-01 07:00  2013-02-01 11:34    C     **1**      0
93480       385    2013-02-01 11:35  2013-02-01 13:41    C       0        0
93483       385    2013-02-01 13:42  2013-02-01 15:00    C       0        1
93478       394    2013-01-31 23:00  2013-02-01 00:53    C       1        0
93475       394    2013-02-01 00:54  2013-02-01 03:26    C       0        0
93476       394    2013-02-01 03:27  2013-02-01 05:39    C       0        0
93477       394    2013-02-01 05:44  2013-02-01 07:00    C       0        1 
```

The second run shows the records that have been incorrectly updated. The Login/LogoutDateTimes were updated as well as the LoggedIn flag. What I need my vb app to do is set each employee's first LoginDateTime = Time & Attendance clock-in, and set their last LogoutDateTime = T&A clock out. The included images show the first, and second runs of my app where it sets the LoggedIn and LoggedOut fields where necessary. However, this app will be ran several times during the day and will update new records as they are added. The problem: (yeah I know...finally) subsequent runs of the application (see 'Table after second run:') pick up extra records that should not be updated. For example, on the second run of the app the record for EmployeeWorkID = 93466 is picked up and the LoginDateTime is set to the T&A clock in (it would look like EmployeeWorkID = 93464), and the LoggedIn flag would be set to 1\. I've tried numerous ways of doing this both through SQL queries and vb code but am left without a solution. Here is the main SQL call that I make within the app, it may not look pretty but it is effective (for one run at least).

```
SELECT     
ew2.EmployeeWorkID
, qryID.Empl
, qryID.LoggedIn
, qryID.LoginDateTime
, ew2.LogoutDateTime
, qryID.RoundedInPunchDate
, qryID.RoundedOutPunchDate
, qryID.ScheduledInDateTime
, qryID.ScheduledOutDateTime
FROM         
(
 SELECT     
 ew.EmployeeID
 , stmE.Empl
 , stmE.STM_Employee_id
 , MIN(ew.LoginDateTime) AS LoginDateTime
 , vIO.RoundedInPunchDate
 , vIO.RoundedOutPunchDate
 , vES.ScheduledInDateTime
 , vES.ScheduledOutDateTime
 , ew.LoggedIn
FROM          
  tblEmployeeWork AS ew INNER JOIN
  tblEmployees AS e ON ew.EmployeeID = e.EmployeeID INNER JOIN
  STROMBERG.StrombergTest.dbo.STM_Employee AS stmE ON e.Empl = stmE.Empl INNER JOIN
  STROMBERG.StrombergTest.dbo.v_BI_Employee_InOutPunches_AutoLogout2 AS vIO ON  
    stmE.STM_Employee_id = vIO.STM_Employee_id 
 AND CONVERT(varchar, ew.LoginDateTime, 101) = CONVERT(varchar, vIO.RoundedInPunchDate, 
   101) INNER JOIN
 STROMBERG.StrombergTest.dbo.v_BI_DailyEmplScheduleAndHoursWorked AS vES ON 
   vIO.STM_Employee_id = vES.STM_Employee_id AND 
 CONVERT(varchar, vIO.RoundedInPunchDate, 101) =   
     CONVERT(varchar,vES.ScheduledInDateTime, 101)
WHERE      
  (ew.LogoutDateTime BETWEEN '1/31/2013' AND DATEADD(d, 2, '1/31/2013')) AND     
  (vIO.RoundedInPunchDate BETWEEN '1/31/2013' AND DATEADD(d, 2, '1/31/2013')) AND 
  (ew.LoginDateTime BETWEEN '1/31/2013' AND DATEADD(d, 2, '1/31/2013'))
GROUP BY DAY(CONVERT(varchar, ISNULL(ew.LoginDateTime, vES.ScheduledInDateTime), 101)), 
  ew.EmployeeID, vIO.RoundedOutPunchDate, stmE.Empl, stmE.STM_Employee_id,  
  vIO.RoundedInPunchDate, vES.ScheduledInDateTime, vES.ScheduledOutDateTime, stmE.Empl, 
  ew.LoggedIn) AS qryID INNER JOIN
tblEmployeeWork AS ew2 ON qryID.EmployeeID = ew2.EmployeeID AND qryID.LoginDateTime = 
   ew2.LoginDateTime
ORDER BY ew2.EmployeeID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:07:17.157

I think I see what you are trying to do. You want to set the first checkin of the day to 1 in the LoggedIn field and the last checkout of the day to 1 in the LoggedOut field.

This query will give you all the first checkins of the day and last checkouts of the day for every employee and every day.

```
select EmplID, min(LoginDateTime), max(LogoutDateTime)
group by EmplID, year(LoginDateTime), month(LoginDateTime), day(LoginDateTime) 
```

Well, not exactly. It will only work if no employee is checked in over mid-night. Otherwise, the logout time will be when they logged out from starting on the given day.

So, the VB code can be used to set all the values from this result to 1, and everything else to 0.

Multiple runs on the same data will set the same values as before. If more data is added, the results will fix the data, as long as the code will set values back to 0.

Performance can be dealt with by adding a where clause which will only change the data for the past N days. For the last 7 days,

```
where LoginDateTime >= DATEADD(day, -7, GETDATE()) 
```

# javascript - Backbone View - 根据动态类名触发事件

> ID：14761266
> 
> 赞同：0
> 
> 时间：2013-02-07T21:24:54.397
> 
> 标签：javascript, web-applications, backbone.js

朋友，我有以下代码：

```
App.Views.Bed = Backbone.View.extend({
tagName: 'li',
template: _.template( App.Templates.Bed ),

events: {
    'click .booked': 'showReservation',
    'click .occupied': 'showGuest',
    'click .free': 'checkIn'
},

render: function(){
    if( this.model.get('id_bookings') ){
        this.clase = 'booked';
    }
    if( this.model.get('id_guests') ){
        this.clase = 'occupied';
    }else{
        this.clase = 'free';
    }
    this.$el.addClass(this.clase).html( this.template( this.model.toJSON() ) );

    return this;
},

checkIn: function(){
    console.log('Check-in form load');
},

showReservation: function(){

},

showGuest: function(){

}

}); 
```

我试图根据类名（我根据内容的模型设置）触发不同的方法。

在定义视图的事件时，有没有办法按类过滤？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:02:21.140

简而言之，使用声明性哈希是不可能的`events`，除非你愿意做一些`:parent`选择器黑客，而且我也不确定这是否可能。

问题是您用于定义元素的任何 jQuery 选择器（例如类选择器`.booked`）都应用**在**视图`el`中，因此选择器中不考虑元素自己的类。

相反，我会动态设置处理程序方法。就像是：

```
events: {
    'click': 'onClick'
},

render: function(){
    if( this.model.get('id_bookings') ){
        this.clase = 'booked';
        this.onClick = this.showReservation;
    }
    if( this.model.get('id_guests') ){
        this.clase = 'occupied';
        this.onClick = this.showGuest;
    }else{
        this.clase = 'free';
        this.onClick = this.checkIn;
    }
    _.bindAll(this, 'onClick');

    this.$el.addClass(this.clase).html( this.template( this.model.toJSON() ) );
    return this;
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T22:12:19.697

把事情简单化。您只需要为您的按钮设置一键式处理程序并让它代理到正确的方法。

```
App.Views.Bed = Backbone.View.extend({
    tagName: 'li',
    template: _.template( App.Templates.Bed ),

    events: {
        'click': 'click_handler'
    },

    render: function(){
        if( this.model.get('id_bookings') ){
            this.clase = 'booked';
        }
        if( this.model.get('id_guests') ){
            this.clase = 'occupied';
        }else{
            this.clase = 'free';
        }
        this.$el.addClass(this.clase).html( this.template( this.model.toJSON() ) );

        return this;
    },

    click_handler: function() {
        if (this.$el.hasClass('booked')) {
            this.showReservation();
        } else if (this.$el.hasClass('occupied')) {
            this.showGuest();
        } else if (this.$el.hasClass('free')) {
            this.checkIn();
        } else {
            // oops!?
        }
    },

    checkIn: function(){
        console.log('Check-in form load');
    },

    showReservation: function(){

    },

    showGuest: function(){

    }
}); 
```

# css - 我可以将我的 CSS 中的 Twitter Bootstrap 脚手架跨度称为 mixin 而不是类吗？

> ID：14761268
> 
> 赞同：3
> 
> 时间：2013-02-07T21:25:05.913
> 
> 标签：css, html, twitter-bootstrap, less

我知道我可以将 a 添加`class="span3"`到 a `div`，但是如果我想通过 LESS 将等效属性赋予另一个类怎么办？

例子：

```
<div class="span3">This width is span3</div>
<div class="anotherClass">I want to make this also span3, but without explicitly calling it out</div> 
```

在 LESS 中，我想做类似的事情：

```
.anotherClass {
    .span3();
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:42:52.173

该[文档](http://lesscss.org/#-mixins)说您可以通过引用不带括号的任何类或 id 规则集来包含它：

```
.anotherClass {
    .span3;
} 
```

但是，对于您的特定情况，您不能`include`编译 Bootstrap CSS 并能够像这样混合在类中，并且 Bootstrap LESS 源没有直接定义类/mixins`.span1`等`.span2`。

在[mixins.less](https://github.com/twitter/bootstrap/blob/master/less/mixins.less#L573)中，有一个名为 mixin `.span(@columns)`，用于计算宽度，取决于参数`@gridColumnWidth`并`@gridGutterWidth`与参数一起计算。您可以使用以下方法调用它：

```
.anotherClass {
    #grid > .core > .span(3);
} 
```

这只会为您的目标提供为 a 计算的宽度`.span3`。

如果这就是你想要的，那很好，但是还有其他规则适用于名为 的元素`.span3`，例如`[class*="span"]`. 因此，如果您也尝试镜像这些，您将无法以编程方式进行，您必须手动梳理文件并复制您想要的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T12:30:21.567

```
.anotherClass {
    .span(3);
} 
```

将完成这项工作。由于引导程序正在定义一个通用类 spanX 来创建跨度。

# flash - Flash DataGrid DataProvider 操作

> ID：14761272
> 
> 赞同：0
> 
> 时间：2013-02-07T21:25:19.850
> 
> 标签：flash, actionscript, datagrid, dataprovider

**为同事发帖。请不要投赞成票或反对票。**

这都在同一个 MXML 文件中。

```
public function toggleMonitor(part:Object):void { 
    if(part.active == 0)
        part.active = 1;
    else
        part.active = 0;
}

public function monitorAll(monitor:int):void {
    for(var part:Object in blah) {
        part.active = monitor;
    }
}

<mx:DataGrid dataProvider="{blah}">
    <mx:columns>
        <mx:DataGridColumn>
            <mx:itemRenderer>
                <mx:Component>
                    <mx:Image source="{data.active == 0 ? img1 : img2}" click="outerDocument.toggleMonitor(data)"/>
                </mx:Component>
            </mx:itemRenderer>  
        </mx:DataGridColumn>
    </mx:columns>
</mx:DataGrid>

<mx:Button click="monitorAll(1)"/> 
```

单击图像正确切换图像（即`toggleMonitor`功能有效）。但是单击按钮不会（即该`monitorAll`功能不起作用）。为什么按钮不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:58:45.003

他设法解决了这个问题。方法应该是这样的：

```
public function monitorAll(monitor:int):void {
    blah.refresh(); 
        for (var i:int = 0; i < blah.length; i++){
            (blah.getItemAt(i) as Object).active = monitor; 
        }
    blah.refresh(); 
} 
```

# wcf - GetCallbackChannel() 如何在双工 wcf 通道上工作？

> ID：14761284
> 
> 赞同：0
> 
> 时间：2013-02-07T21:26:03.570
> 
> 标签：wcf

当服务在 WCF 中使用双工绑定时，您可以在操作中执行此操作：

```
OperationContext.Current.GetCallbackChannel<IClientReceiver>() 
```

获取对调用者的引用。那参考是什么？我的意思是，它看起来像是在做一些巫术魔术。允许服务将消息发送回客户端的幕后发生了什么？

这在 TCP 绑定和双工 http 绑定上有何不同？因为我知道 TCP 可以本机回调客户端，但 http 不能，所以它必须在服务器端创建第二个通道来调用客户端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:51:30.507

`WSDualHttpBinding`实际上有两个HTTP连接：一个从客户端到服务器，一个从服务器到客户端。`GetCallbackChannel<T>`将返回对知道如何向客户端发送消息的通道的引用，并且正如您所指出的，它依赖于底层传输。

# sql - Linq to sql 双内连接语句

> ID：14761287
> 
> 赞同：2
> 
> 时间：2013-02-07T21:26:09.343
> 
> 标签：sql, linq-to-sql

我正在尝试编写一个 linq to sql 语句，它将加入总共 3 个表。表 1 = 用户（用户 ID） 表 2 = 用户课程（用户 ID，课程 ID），表 3 = 课程（课程 ID）。

这就是我想要做的：

```
from u in db.Users join uc in userCourse on u.userId = uc.Id
                   join c in course on uc.courseId = c.courseId

                   where u.userId = uc.userId
                   select c.name 
```

什么是正确的语法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T21:29:24.463

假设您的密钥类型匹配，您就快到了。您只需要在子句中使用`equals`关键字：`join`

```
from u in db.Users join uc in userCourse on u.userId equals uc.Id
                   join c in course on uc.courseId equals c.courseId   
                   where u.userId = uc.userId
                   select c.name 
```

这是 LINQ 有点奇怪的少数几个地方之一，因为我们不能在 join 子句中使用相等运算符，但需要使用语言中其他任何地方都没有使用的关键字。这也意味着我们不能加入任意表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:32:24.603

尝试

```
from u in db.Users 
join uc in userCourse on u.userId equals  uc.Id
join c in course on uc.courseId equals c.courseId

where u.userId = uc.userId
select c.name 
```

也可以参考下面的链接

[https://web.archive.org/web/20101030154925/http://blogs.msdn.com/b/tikiwan/archive/2010/06/18/linq-to-sql-inner-join-left-join-示例-教程-示例-the-basic.aspx](https://web.archive.org/web/20101030154925/http://blogs.msdn.com/b/tikiwan/archive/2010/06/18/linq-to-sql-inner-join-left-join-examples-tutorial-samples-the-basic.aspx)

# vb.net - 每次都在同一个地方弹出表格

> ID：14761288
> 
> 赞同：1
> 
> 时间：2013-02-07T21:26:14.997
> 
> 标签：vb.net, winforms

我一直在寻找这个答案，但似乎找不到。我正在用 VB.Net 运行 VS2012 并有一个多形式的应用程序。当表格打开时，它们总是出现在不同的位置，如果我要同时打开它们，它们几乎会从屏幕上倾泻而下。我怎样才能让它们总是居中显示？

例如：

```
Form1.ShowDialog() 
```

它应该在屏幕的中央，每次打开时都会出现在那里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T21:28:45.637

尝试：

```
Form1.StartupPosition = FormStartPosition.CenterScreen
Form1.ShowDialog() 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2020-10-28T13:18:22.337

Form.StartPosition = FormStartPosition.CenterScreen;

# php - Mysql返回具有正确数据类型的数组

> ID：14761289
> 
> 赞同：1
> 
> 时间：2013-02-07T21:26:15.207
> 
> 标签：php, mysql, types, sqldatatypes

我有一个数据库表`client`，其中包含一个字段`id INT(6)`（带有主键和自动增量）。我选择最后一个`id`使用：

```
$findClient = mysql_query("SELECT `id` FROM `client` ORDER BY `id` DESC LIMIT 1");
$client = mysql_fetch_assoc($findClient))
var_dump($client); 
```

发生的事情是数组中的 id 变成了字符串，而它在数据库中是整数。为什么可以巧妙地解决这个问题？我需要它是一个整数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:30:07.653

这是正常的。从结果中提取的所有行都是字符串数组。如果您希望 id 值为 int，只需更改数据类型：

```
$result['id'] = (int) $result['id']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:30:35.077

既然你知道它是`int`，你总是可以手动投射它。否则，查看`mysql_field_type()`获取字段的类型。

# powershell - PowerShell 在不同的路径上运行远程命令

> ID：14761293
> 
> 赞同：2
> 
> 时间：2013-02-07T21:26:35.860
> 
> 标签：powershell, path, remoting

我可以通过执行以下操作从本地计算机向不同域中的服务器运行远程 powershell 命令：

```
Invoke-Command -ComputerName serverName -ScriptBlock {Get-Process} -Credential $credential 
```

但是，由于某种原因，这在此默认目录中运行 -`c:\users\username\documents`

我的实际情况略有不同。我有一个 powershell 脚本 ( `Test.ps1`) 坐在这里：

```
C:\Data\Shared\Installation 
```

我想远程运行这个脚本。我在 ScriptBlock 中尝试了不同的东西，但它总是出错。看起来像语法问题。例如我试过这个：

`Invoke-Command -ComputerName serverName -ScriptBlock {cd "C:\Data\Shared\Installation" ./Test.ps1} -Credential $credential`

但这会出现以下错误

```
A positional parameter cannot be found that accepts argument './Test.ps1'. 
```

只是需要一些帮助。谢谢。

编辑

![在此处输入图像描述](../Images/525d77067d0619e1e65f0bbb0ceaa7d9.png)

编辑 2

是的，谢谢你的评论（现在已经消失了）——在路径工作后加一个分号。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T21:44:16.697

如果您需要在脚本块中运行多个命令，则需要使用换行符或分号将它们分开`;`。尝试：

```
Invoke-Command -ComputerName serverName -ScriptBlock {cd "C:\Data\Shared\Installation"; ./Test.ps1} -Credential $credential 
```

或者试试这个（如果您的脚本使用相对路径，这不是一个好的解决方案）：

```
Invoke-Command -ComputerName serverName -ScriptBlock {C:\Data\Shared\Installation\Test.ps1} -Credential $credential 
```

# algorithm - How safe/mature is the simulated annealing algorithm given in Numerical Recipes?

> ID：14761294
> 
> 赞同：6
> 
> 时间：2013-02-07T21:26:39.140
> 
> 标签：algorithm, optimization, simulated-annealing

The authors of "Numerical Recipes" give in Ch. 10 an implementation of the simulated annealing algorithm that combines the "classical" simulated annealing with the Nelder-Mead downhill simplex method.

What I really like about this algorithm is the way it converges to a classic downhill search as the annealing temperatures reaches 0\. However, I have never found any other reference to this algorithm; is it a safe, mature variant of the simulated annealing algorithm (i.e. production-ready) or should it be considered as an experimental idea thrown into the book?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T22:34:38.837

不，不安全，保证给你带状疱疹。

作为专业从事人工智能和智能系统工作的人，我可以告诉你，很少有这样的算法被认为是成熟的。就其本质而言，高级算法都倾向于对它们具有实验性。例如，在模拟退火中，您需要制定冷却计划。你如何做到这一点是非常特定于问题的，需要你试验和调整算法。NR 代码是执行此操作的合理起点。

# xml - 避免使用“ancestor::” Xpath 轴

> ID：14761295
> 
> 赞同：1
> 
> 时间：2013-02-07T21:26:40.210
> 
> 标签：xml, xpath, xslt-2.0

我正在尝试找到一种方法来将此转换重新工作到我不必`ancestor::`在 Xpath 中使用轴的位置：

```
<xsl:template match="p[ancestor::p]">
     <xsl:apply-templates select="node() except ppr" />
</xsl:template> 
```

来源示例：

```
<root>
  <p>
     <p/>
     <section>
        <p/>
     </section>
     <ppr/>
     <content/>
     <p/>
     <picture/>
  </p>
</root> 
```

期望的输出：

```
<root>
  <p>
     <section>
     </section>
     <ppr/>
     <content/>
     <picture/>
  </p>
</root> 
```

我不能使用显式 Xpath 或定位来抓取这些`<p>`元素，因为它们的位置是随机的，并且在我的原始源文档中没有模式。

我试图不使用的原因`ancestor::`是因为我使用的 XSLT 处理器需要 30-50 秒来评估 Xpath 表达式。**我不希望这个问题是关于我正在使用哪个 XSLT 处理器或我的设置的其他实现，而是关注手头的问题：有什么方法可以不在`ancestor::`我的上述转换中使用吗？**

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T00:03:01.810

结果很简单：

```
//p//p 
```

# c++ - lexical analyzer using c++

> ID：14761296
> 
> 赞同：0
> 
> 时间：2013-02-07T21:26:42.060
> 
> 标签：c++

I have coded a lexical analyzer which parses through a file and just displays the token , lexeme and if they are value/valuer/literal (int,float or literal)

I am pretty sure , the code for the analyzer works but I can't write down the displaytoken where it will show the output in the following way :

Token Lexeme Value/valuer/literal

numt 1234 value

i have this code sample : for the lexical.cpp file

```
#include <cstdlib>
#include <iostream>
#include <fstream>
#include <string>
#include <cstring>

#include "lexical.h" 

int value ; // integer
float valuer ; // float
char ch ; // character
string lexeme ; // string
SYMBOL Token ; // token of symbols 
string Literal ; // string literals 

string reswords[15] ; // reserved words 

using namespace std;

//constructor 

Lexical::Lexical()
{

}

//destructor 

Lexical::~Lexical()
{

}

void Lexical::GetNextToken()
{
           // getting the lexeme *******************
           // **************************************

            value = 0 ;
            valuer = 0.0 ;

            int i = 1 ; // line tracker 

            while(!(fin.eof()))
            {
                lexeme[i] = ch ;
                fin.get(ch);
            }

            if(fin.peek() == '\n')
            {
                i++ ; // increment the line !
            }
            if(!fin.eof())
            {
                ProcessToken() ;
            }
            else
            {
                fin.close() ;
                Token = eofilet ; // set to end of file 
            }

    }

//rules not implemented yet
void Lexical::displayToken() 
{
    cout << "Token" << "           " << "Lexeme" << "           " << " value/valuer/Literal " << endl ;

    cout << Token <<   "           " << lexeme <<   "           " <<  value ;

}

//initialize reserved words 
void Lexical::InitResWords()
{
    reswords[begint].copy("BEGIN",5,0);
    reswords[programt].copy("PROGRAM",7,0);
    reswords[constt].copy("CONST",5,0);
    reswords[vart].copy("VAR",3,0);
    reswords[proceduret].copy("PROCEDURE",9,0);
    reswords[ift].copy("IF",2,0);
    reswords[whilet].copy("WHILE",5,0);
    reswords[thent].copy("THEN",4,0);
    reswords[elset].copy("ELSE",4,0);
    reswords[realt].copy("REAL",4,0);
    reswords[integert].copy("INTEGER",7,0);
    reswords[booleant].copy("BOOLEAN",7,0);
    reswords[chart].copy("CHAR",4,0);
    reswords[arrayt].copy("ARRAY",5,0);
    reswords[endt].copy("END",3,0);
} 

void Lexical::ProcessToken()
{
    lexeme.at(0) = ch ; // 1 character at a time 
    fin.get(ch) ;

    if((lexeme.at(0) >= 'A' && lexeme.at(0) <= 'Z') || (lexeme.at(0) >= 'a' && lexeme.at(0) <= 'z')) // if alphabets
    {
        int counter = 0 ;
        //match word token
            if(!isdigit(lexeme.at(0)) && !isalpha(lexeme.at(0)) && lexeme.at(0) != '_')
            {
            //*********** Working with reserved words !!! **************************************************
                        int j = 0 ;
                        bool flag = false ;
                        while(j < endt)
                            {
                                if(lexeme.compare(reswords[j]) == 0)
                                {
                                    Token = (SYMBOL)j;
                                    displayToken();
                                    flag = true ;
                                }
                            }       
            //**********************************************************************************************

            // if not a token , then we are alrea
                        Token = idt ;// then an identifier token
                        displayToken();
                        return ;
            }// if ends

            lexeme.at(counter) = ch ;// keep proceeding 
            fin.get(ch) ;
    }
    else if (lexeme.at(0) >= '0' && lexeme.at(0) <= '9') // if numbers
    {
        NumToken() ; 
    }
    else if (lexeme.at(0) == '\"') // for string literal
    {
        ProcessLiteralToken();
    }
    else if (lexeme.at(0) == '/') // entering comment section
      {
                if (ch == '/' || ch == '*')
                {
                       // MatchComment();
                        if (ch == '/') // start of a comment maybe ?
                            {
                            //Line comment
                              while(ch != '\n')
                                fin.get(ch);
                            }
                        else if(ch == '*') // end of a comment ?
                            {
                                  while(true) 
                                {
                                  fin.get(ch);
                                  if (ch == '*') 
                                  {
                                       char peek_value = fin.peek();
                                       if (peek_value == '/') 
                                           {
                                               fin.get(ch);
                                             //  fin.get(ch);
                                               return;
                                           }
                                      else 
                                          continue;
                                  }
                               } // while ends
                            }
                       else
                          {
                            cout << "ERROR !!!" ;
                          }

                      GetNextToken();
                      } // comment analyzer then moves to next token !
                else 
                {
                  OpToken();
                }
      }
  else if ((lexeme.at(0) == '<') || (lexeme.at(0) == '>') || (lexeme.at(0) == '='))
      {
        if (ch == '=')
          {
             lexeme.at(1) = ch;
             Token = relop ;
             fin.get(ch);
          }
        else
          OpToken() ; // process the final token
      }
  else if ((lexeme.at(0)) == ':')
      {
          if (ch == '=')
          {
             lexeme.at(1) = ch;
             Token = relop ;
             fin.get(ch);
          }
     }
  else
     OpToken();
}
void Lexical::OpToken()
{
    //Need to detect +, -, ||, *, /, &&, =, (), {}, comma, semicolon, period, quotation("), and []
if(lexeme.at(0) == '+' || lexeme.at(0) == '-' || lexeme.at(0) == 'OR')
      {
          Token = addop ;
          return;
      }
else if(lexeme.at(0) == '*' || lexeme.at(0) == '/' || lexeme.at(0) == 'DIV' || lexeme.at(0) == 'MOD' || lexeme.at(0) == 'AND')
    {
      Token = mulop ;
      return;
    }
else if(lexeme.at(0) == '<' || lexeme.at(0) == '>' || lexeme.at(0) == '=')
    {
      Token = relop ;
      return;
    }
else if(lexeme.at(0) == '(')
    {
      Token = lparen;
      return;
    }
else if(lexeme.at(0) == ')')
    {
      Token = rparen;
      return;
    }
else if(lexeme.at(0) == '{')
    {
      Token = clbrat;
      return;
    }
else if(lexeme.at(0) == '}')
    {
      Token = crbrat;
      return;
    }
else if(lexeme.at(0) == ',')
    {
      Token = comma;
      return;
    }
else if(lexeme.at(0) == ';')
    {
      Token = semicolon ;
      return;
    }
else if(lexeme.at(0) == '.')
    {
      Token = period ;
      return;
    }
else if(lexeme.at(0) == '~')
    {
      Token = tildat;
      return;
    }
else if(lexeme.at(0) == '[')
    {
      Token = lbrat;
      return;
    }
else if(lexeme.at(0) == ']')
    {
      Token = rbrat;
      return;
    }
else if(lexeme.at(0) == '#')
    {
      Token = nott ;
      return;
    }

else 
  {
    Token = unknownt ;
    cout << "Error !!" ;
    exit(0);
  }
}

void Lexical::NumToken()
{
 int i = 0;
  while (isdigit(ch)) 
  {
    //Update Lexeme and keep going
    lexeme.at(i++) = ch;
    fin.get(ch);
  }

  if (ch == '.') // checking for float 
  {
    //if ch is a period, then we might be dealing with a float. We need to ensure that the next character is a digit
    lexeme.at(i++) = ch;
    fin.get(ch);
    if (isdigit(ch)) 
    {
      //ch is a digit, so we are good to go.
      while (isdigit(ch)) 
      {
        lexeme.at(i++) = ch;
        fin.get(ch);
      }
      //If we are here, then we have a float and we have just encountered a new token
      Token = numt;
      valuer = atof(lexeme.c_str());
      return;
    }
    //If we are here, then we have a period but no digit after it--an error
    Token = unknownt ;
    cout << "Error." << endl;
    exit(0);
  }
  else {
    //If we are here, then it means that the next char is not a period.... so we have a NUMT int token
    Token = numt;
    value = atoi(lexeme.c_str());
    return;
  }

}

void Lexical::ProcessLiteralToken()
{

  int i = 0;
  while (ch != '\"') 
  {
    if (ch == '\n') 
    {
      Token = unknownt ;
      cout << "Error!" << endl ;
      exit(0);
    }
    Literal.at(i++) = ch ; // advance !
    fin.get(ch);
  }
  //Literal[i++] = ch;
  Token = literalt;
  fin.get(ch);
  return;

} 
```

My lexical.h ( HEADER FILE ) is this :

```
#ifndef _LEXICAL_H
#define _LEXICAL_H

#include <iostream>
#include <fstream>

using namespace std ; 

            // enumerated data type 
            enum SYMBOL
            {
                begint,programt, constt, vart, proceduret, ift, whilet, thent, elset, realt, integert, booleant, chart, arrayt, endt, divt, modt, andt, nott, ort, addop, mulop, assignop, lparen, rparen, comma, semicolon, period, numt, idt, literalt, unknownt, eofilet, relop, clbrat, crbrat, tildat, lbrat, rbrat ,colon
            };

            //extern int size = 15 ;
            extern int value ; // integer
            extern float valuer ; // float
            extern char ch ; // character
            extern string lexeme ; // string
            extern SYMBOL Token ; // token of symbols 
            extern string Literal ; // string literals 
            extern string reswords[15] ; // string array

class Lexical {

        public :

            Lexical(); // constructor 

            ~Lexical() ; // destructor

            //GetNextToken function
            void GetNextToken() ;

            //displayToken function
            void displayToken() ;

        private :

            //initialize reserved words 
            void InitResWords() ;

            //ProcessToken
            void ProcessToken() ;

            // operator tokens
            void OpToken() ;

            //NumToken
            void NumToken() ;

            //Process string literals
            void ProcessLiteralToken() ;

            ifstream fin ; // file 

} ;

#endif // !_lexical_H 
```

The code is give if anyone wants to go through it , for any function.

**I just cannot figure out how to correctly display my tokens ! (displayToken) Can some one help me with the function so for every token , it parses , it displays it by the format :** Token ----- Lexeme ------- Value/valuer/literal numt ----- 1234 ------ value

**i just want to write down the display token function. How will you display the lexeme, token and whether they are value/valuer or literal after you process each token ?**

this is my driver file

```
#include "lexical.h"

#include <iostream>
#include <fstream>

using namespace std;

int main()
{  
   cout << "creating the constructor" << endl << endl ;
   Lexical myLex ;
   ifstream fin;

   fin.open("test.txt") ;

   while (Token != eofilet) 
   {
      myLex.GetNextToken();
      myLex.displayToken();
   }

   cout << endl << "success" << endl ;
   fin.close();
   //system("pause");
   return 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:41:40.763

你偷看'\n'，我看不出你在哪里消费那个角色。

实现简单词法分析器/解析器的最简单方法是 Wirth 在 Pascal 示例中的做法（不记得在哪里，抱歉）：

*   你总是有一个字符前瞻，你在一开始就读一个字符作为前瞻（在你的构造函数中）
*   每次您开始处理一个标记时，您都会查看前瞻字符，并根据它决定什么会出现（例如，数字--> 数字、字母-->（暂定）标识符，...）。要跳过空格，您只需读取下一个字符，直到它不是 ' '（或 '\t'），以计算行数，您将它们计数在 '\n' 上并读取下一个字符。
*   每当您需要一个角色时，您都会消耗前瞻，并获得下一个。

解析器（递归下降）反过来有一个用于前瞻标记的变量，并按照类似的方式工作。

这样，您就不需要在什么时候阅读字符时搞乱 peek 和混淆。

# java - 休眠和生成的值

> ID：14761308
> 
> 赞同：0
> 
> 时间：2013-02-07T21:27:21.940
> 
> 标签：java, hibernate, jpa, jpa-2.0, hibernate-annotations

我的表中有一个列，在我的 Hibernate JPA 模型对象中映射如下：

```
@Generated(GenerationTime.INSERT)
@Column(name = "column", nullable = false, unique = false, insertable = true, updatable = false)
private Long column; 
```

虽然大多数时候我希望数据库为我生成值，但在某些时候我想手动为该列分配一个值。这可能吗？

我试图从 setter 方法中为列赋值，但是这在插入时被覆盖。

在此先感谢您的时间。

# javascript - Firebug 显示构造函数的无限递归

> ID：14761309
> 
> 赞同：6
> 
> 时间：2013-02-07T21:27:21.983
> 
> 标签：javascript, firebug

我想深入研究 javascript 的语言特定构造“原型”。这是我的学习目的代码：

```
var f = function() {};
f.ext = 1;
f.prototype.pext = 2; 
```

当我现在使用 firebug 调试此代码时，我得到以下信息： ![在此处输入图像描述](../Images/db78392bb2ef16678ffc219f83045123.png)

这种无限嵌套从何而来？让我们从头开始（OK=unterstood）：

f（OK） -ext（OK）
-prototype （OK
）
-pext（OK）-constructor（
我被困在这一点上）

那是谁的构造函数？为什么我们会有这种无限嵌套？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T21:31:49.463

这仅仅是因为`f === f.prototype.constructor`，它们是相同的，而 Firebug 将它们显示为循环引用。

与以下相同：

```
var a = {},
    b = a;
a.b = b; 
```

你也会在这里看到无限的引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T21:34:23.380

当你这样做时

```
Foo = function () {
    // Do something
}; 
```

那么你会有这个

```
Foo.prototype.constructor == Foo 
```

和`Foo`构造函数一样`Foo`：

```
var foo = new Foo(); // <-- Foo is the constructor. 
```

我推荐阅读：[http ://beej.us/blog/data/javascript-prototypes-inheritance/](http://beej.us/blog/data/javascript-prototypes-inheritance/)

# asp.net - 如何在razor v2中从c#调用javascript函数

> ID：14761311
> 
> 赞同：0
> 
> 时间：2013-02-07T21:27:23.093
> 
> 标签：asp.net, web, webforms, razor-2

我有 javascript 函数，它使用 noty javascript 插件创建通知，

```
 <script type="text/javascript">
    function generateAnoty(message) {
        var noty_id = noty({
            layout: 'center',
            text: message,
            modal: true,
            type: 'success',
        });
    }
    </script> 
```

我使用 razor v2 作为带有 C# 的视图引擎和 web 表单框架，而不是 mvc。提交表单后，我想调用上面的 javascript 函数。这是我正在尝试做的一个例子；

```
 //place for c#
   if (IsPost)
   {
       //after submitting the form
       //I wanna somehow call the js to show noty message
       generateAnoty("You have successfully submitted the form!")
   } 
```

ps 如果我尝试使用任何 html 按钮 onclick 事件处理程序调用 generateAnoty(message) js 方法，它运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:02:36.400

根据您提交表单的方式，您可以执行此操作..

```
@using (Ajax.BeginForm("Results", new AjaxOptions { UpdateTargetId="Results", OnBegin="ShowLoading", OnComplete="generateAnoty", OnFailure="Error" }))
{
   // Code here
} 
```

注意：您必须根据表单上的内容替换某些事物的名称。在这个例子中，我有一个显示加载图像 OnBegin 和 OnComplete 的函数，你可以让它消失，或者显示消息，无论你想要什么。只需更换您需要的东西，它应该可以解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:26:51.817

要在框架中添加回发后运行的脚本，您可以使用[ScriptManager.RegisterStartupScript](http://msdn.microsoft.com/en-us/library/bb310408%28v=vs.100%29.aspx)或[Page.ClientScriptManager.RegisterStartupScript](http://msdn.microsoft.com/en-us/library/asz8zsxy.aspx)方法。

如果`ScriptManager.RegisterStartupScript`框架内的 Web 表单使用 UpdatePanel 则使用，否则使用`Page.ClientScriptManager.RegisterStartupScript`方法。

作为 RegisterStartupScript 的一种统一解决方案，您可以使用以下扩展方法：

```
public static void RegisterStartupScript(this Page page, string scriptText)
{
    var scriptManager = ScriptManager.GetCurrent(page);
    if (scriptManager != null && scriptManager.IsInAsyncPostBack)
        ScriptManager.RegisterStartupScript(page, page.GetType(), Guid.NewGuid().ToString(), scriptText, true);
    else
        page.ClientScript.RegisterStartupScript(page.GetType(), Guid.NewGuid().ToString(), scriptText, true);
} 
```

# css - 高级 CSS 翻转 - 父容器图像交换

> ID：14761316
> 
> 赞同：3
> 
> 时间：2013-02-07T21:27:42.037
> 
> 标签：css

我正在使用 CSS 并尝试在不使用 js 触发翻转的情况下构建导航菜单。这个导航有点棘手，因为设计有箭头状的分隔线，分割成单独的链接背景会很痛苦......

出于某种原因，我现在无法弄清楚这一点，并认为我会把问题放在那里......是否可以使用伪类 :hover 用每个链接交换 UL 的背景。

我创造了一切。[http://jsfiddle.net/kenaesthetic/dkEAr/](http://jsfiddle.net/kenaesthetic/dkEAr/)

```
body{
    background-color:#efefef;
    font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
}

#content{
    background-color:white;
    margin: 28px auto;
    padding:33px;
    width:894px;
    border-radius:8px;
    box-shadow:1px 1px 5px #ddd;
    height:600px;
}

ul#nav{
    width:100%;
    height:48px;
    background-image:url(http://www.mniac.com/mniac-assets/images/nav-sprite.png);
}

ul#nav li{
    float:left;
}

ul#nav li a{
    display:block;
    color:#6f6f70;
    text-transform:uppercase;
    text-decoration:none;
    padding:17px 0 16px 0;
    text-align:center;
    font-size:15px;
}

ul#nav li a:hover{
    color:#fff;
}

ul#nav li a.home{
    width:56px;
    text-indent:-9999px;
}

ul#nav li a.home:hover{

}

ul#nav li a.background{
    width:210px;
}

ul#nav li a.process{
    width:214px;
}
ul#nav li a.impliment{
    width:214px;
}

ul#nav li a.reference{
    width:200px;
} 
```

这是CSS。

有人想试一试吗？这可以做到吗？我头疼 ：）

谢谢大家。

**更新：**

好的，伙计们/女孩们，这是我的解决方案（注意：必须在 IE8 中工作）

我使用了绝对定位和一个新的精灵。

[http://jsfiddle.net/kenaesthetic/rA59L/2/](http://jsfiddle.net/kenaesthetic/rA59L/2/)

最后一个链接不起作用......不知道为什么，因为它在这里可以正常工作。没有时间再纠结这个了。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:47:46.260

[是的，这是可能的](http://jsfiddle.net/U2kX5/)，使用大量的伪类并`::after`从最后`li`一项开始放置背景。

但更好的方法是将背景的一部分应用到每个列表项，这样你就可以打开它`li:hover`

* * *

好吧，我忍不住了，[做了一个没有图像](http://dabblet.com/gist/4736353)的，使用渐变和变换:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:48:25.293

```
ul#nav li.home:hover{
    background-image:url('newBackgroundimage.png');
} 
```

虽然你不需要那么具体：

```
li.home:hover{
     background-image:url('newBackgroundimage.png');
}
li.background:hover{
     background-image:url('newBackgroundimage.png');
}
li.process:hover{
     background-image:url('newBackgroundimage.png');
} 
```

等等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T22:08:06.457

您可以这样做的一种方法是将背景图像切换到`li`s 而不是 ul，因为让悬停的子元素影响父元素可能很困难。

像这个例子这样的东西可能会起作用，尽管它只是构建得足够远以显示**背景**悬停在行动中。

[http://jsfiddle.net/PzHT9/](http://jsfiddle.net/PzHT9/)

# .net - 3rd Party Control 将不会安装在 Windows 8/IE 10 上

> ID：14761318
> 
> 赞同：1
> 
> 时间：2013-02-07T21:27:46.967
> 
> 标签：.net, windows-8, internet-explorer-10, txtextcontrol

我们有一个使用 txTextControl 文本编辑器的基于 .NET Framework 2 的应用程序。我们有一个为我们的用户设置 CASPOL 的内置脚本。当我们尝试在 Windows 8/IE 10 机器上安装此控件时，我们收到“拒绝访问”错误，如下图所示。我已经安装了 3.5 框架（也安装了 2 和 3），但安装控件仍然没有乐趣。

非常感谢任何想法和建议，因为越来越多的用户希望在 Windows 8 机器上使用我们的系统！

麦克风

![错误截图](../Images/6d96a2e8bba2f078d1c967d43be42fd0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:18:39.030

由于 .NET 4.5 的更改（在 Win8 上），他们在此处发布了一些信息来帮助解决此问题

查看： [http ://www.textcontrol.com/en_US/blog/archive/20130119/](http://www.textcontrol.com/en_US/blog/archive/20130119/)

```
自 .NET 4.5 以来，安全模型已更改并托管这些控件
默认情况下在 Internet Explorer 中被阻止。以前的行为可以是
通过设置注册表子项的 EnableIEHosting 值恢复
HKLM/SOFTWARE/MICROSOFT/.NETFramework 为 1。

```

# memory - 每个进程在记忆中都有自己的乌托邦部分吗？

> ID：14761322
> 
> 赞同：1
> 
> 时间：2013-02-07T21:28:03.697
> 
> 标签：memory, assembly, stack-overflow, buffer-overflow

通过`cat /proc/*some PID*/maps`在一台机器上对多个进程执行一些操作，我注意到它们在内存地址方面都有相同的起点，即`0x8048000`. 这是否意味着每个进程都有“它自己的内存空间，包括堆栈、堆等”？在运行时？

如果是这样，攻击者如何区分一个进程的内存地址与另一个进程的内存地址？

因此，如果一台机器有 2GB 的 RAM，并且有几个进程同时运行 - 我们如何知道我们的目标内存地址是什么？还是我把这一切都弄错了，攻击从查看过程本身开始，然后从那里推进？

请原谅*初学者的*问题，我刚刚进入 Assembly 并且正在同时阅读 5 个教程，并且有点难以将其全部掌握到一定程度的理解。

请注意这个问题是放在这里而不是在 IT 安全中，因为我确实提到了大会方面的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T21:47:35.730

Each process has its own "virtual memory", where it stores its own stack, heap, instructions, etc. Each process can use the entire 32/64-bit address space independently of any other process. The kernel manages the mapping between each processes virtual memory and the machine's physical RAM. [Wikipedia](http://en.wikipedia.org/wiki/Virtual_memory) covers this in more detail.

Most attacks target memory in one particular process. Attackers use addresses from the address space of the process they are targeting. As you observed, many executables load at standard virtual addresses, making it easier for attackers to predict the memory layout of a process.

# java - 如何使用 Java 中的一种方法将素数打印到 N

> ID：14761323
> 
> 赞同：1
> 
> 时间：2013-02-07T21:28:12.400
> 
> 标签：java

我正在尝试制作一个 void 方法，可以打印素数到给定的 int 参数。这就是我所拥有的，但它不起作用。

```
public class listPrimes {
    public static void main(String[] args) {
        printPrimes(1000);

    }

static void printPrimes(int max) {
    int counter = 0;
    for (int i = 2; i <= max; i++) {
        for (int n = 2; n < i; n++) {
            if (i % n == 0) {
                counter++;
            }
        }
        if (counter == 0) {
            System.out.println(i);
            counter = 0;
        }
    }
}
} 
```

我能够使用以下两种方法创建所需的效果，但我想用一种方法来实现。我上面的代码有什么问题？

```
public class listPrimes {
    public static void main(String[] args) {
        printPrimes(1000);
    }

private static void printPrimes(int max) {
    for (int i = 2; i <= max; i++) {
        if (primeCheck(i)) {
            System.out.println(i);
        }
    }
}

static boolean isPrime(int check) {
    for (int i = 2; i < check/2; i++) {
        if (check % i == 0) {
            return false;
        }
    }
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T21:31:49.230

您永远不会重置`counter`. `outer loop`因此，一旦增加，它就永远不会为 0。所以，只需`counter`在外循环开始处重置：-

```
for (int i = 2; i <= max; i++) {
    counter = 0;
    for (int n = 2; n < i; n++) {
        if (i % n == 0) {
            counter++;
        }
    }
    if (counter == 0) {
        System.out.println(i);
    }
} 
```

但是，我更喜欢第二种方式，因为它以不同的方法划分任务。因此，这两种方法都有其定义的角色。您可以轻松地在其他地方使用它们。请记住，您在不同方法之间划分任务越多，您获得的可重用性就越高。让一种方法只完成一项任务总是更好。

另外，我建议将方法重命名为 - `primeCheck`，`isPrime`因为它正在返回一个`boolean`值。所以，只要遵循命名约定，`isPrime`就会是一个好名字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T22:12:24.407

一种变体，以获得更好的性能：

```
public static void main(String[] args) {
    printPrimes(100);
}

public static void printPrimes(int range) {
    for (int iCounter=1; iCounter<=range; ++iCounter) {
        if (iCounter <= 1) continue;
        if (iCounter == 2 || iCounter == 3) {
            System.out.println(iCounter);
            continue;
        }
        if (iCounter%2 == 0) continue;
        int iCounterSqrt = (int) Math.sqrt(iCounter);

        boolean bPrime = true;
        for (int iDenom=3; iDenom <= iCounterSqrt; iDenom += 2) {
            if (iCounter % iDenom == 0)
                bPrime = false;
        }

        if (bPrime) {
            System.out.println(iCounter);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-14T08:30:40.940

```
/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

package javaapplication4;

/**
 *
 * @author sahadev & vignesh
 */
 class primecollection {

    public static void main(String[] args) {
     int r,s=0,k=0;
      int i,j;
      int a[] = new int[50];
      for(i=2;k<10;i++)
      {
        for(j=1;j<=i;j++)
        {
         r = i%j;

         if(r==0)
         {
          s++;
         }
         if(s==2)
         {
           a[k] = i; 
           k++;
         }
        }
        System.out.println(a[k]);
    }

}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-10T17:36:29.103

如果您使用大量数据对此进行测试，则使用 SQRT 会更有效。 [http://www.wikihow.com/Check-if-a-Number-Is-Prime](http://www.wikihow.com/Check-if-a-Number-Is-Prime)

```
 Scanner reader = new Scanner(System.in);
    System.out.println("Enter the a number");
    int num = reader.nextInt();
    int counter = 0;
    int root = 0;
    boolean prime_flag;

    if (2 <= num) {
        // 2 is the only even prime number
        counter++;
    }

    for (int i = 3; i < (num + 1); i++) {

        // test only for odd number
        if (i % 2 != 0) {
            prime_flag = true;
            root = (int) (Math.sqrt(i) + 1);

            for (int j = 3; j < (root + 1); j++) {
                if ((i % j == 0) && (i != j)) {

                    prime_flag = false;
                    break;
                }
            }

            if (prime_flag) {
                counter++;
            }

        }

    }

    System.out.println("Count of prime numbers upto " + num + " is "
            + counter); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-21T07:23:37.433

这是在Javascript中获取素数直到'n'的代码。这是一个优化的代码，你可以相应地重构你的代码。基本逻辑：对于每个数字，我检查它是否可以被我们已经找到的任何素数整除，直到它小于或等于 i/2。

```
function getPrimesTill(n){
  var i, j, len, limit, result = [];
  for(i=2;i<n;i++){
      limit = i/2;
      len = result.length;
      isPrime = true;
      for(j=0;len && result[j]<=limit;j++){
          if(i%result[j] == 0){
              isPrime = false;
              break;
          }
      }
      if(isPrime) result.push(i);
  }
  return result;
}
getPrimesTill(100); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-12T16:02:18.183

***您可以按照以下步骤减少计算机查找质数的时间！***

*   您只需要检查新数字是否可以被前素数整除
*   您只需执行此操作直至所检查数字的平方根
*   你只需要检查一个数字，如果它是一个公正的数字

*所以我会这样做：*

```
public static void searchPrimes() {

    List<Long> primes = new ArrayList<Long>();

    System.out.println(2);

    loop:
    for(long x = 3; x < 100; x += 2) {

        int y = 0;

        while(primes.get(y) < Math.sqrt(x)) {

            if(x % primes.get(y) == 0) {

                continue loop;
            }

            y++;
        }

        primes.add(x);
        System.out.println(x);
    }
} 
```

*这是我找到的最干净、最快的方法！*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-03T10:45:40.530

最简单的方法。

```
private static void nPrimeNumber(int n) {
    boolean result = true;
    for (int i = 2; i <= n; i++) {
        result = true;
        for (int j = 2; j < i; j++) {
            if (i % j == 0 ) {
                result = false;
                break;
            }
        }
        if(result){
            System.out.print(i+" ");
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-08-26T10:05:28.500

```
public class listPrimes {
public static void main(String[] args) {
    printPrimes(1000);

}

static void printPrimes(int max) 
{

    for(int k=2;k<=max;k++)
    { 
        int counter=0;
        for(int i=1;i<=k;i++)
        {
            if((k%i)==0)
            {
                counter++;
            }
        }
        if(counter==2)
        {
            System.out.println(k+"is prime");
        }
    }
} 
```

}

# c# - 在表单之间传输字符串变量

> ID：14761326
> 
> 赞同：-1
> 
> 时间：2013-02-07T21:28:24.000
> 
> 标签：c#, variables

我希望这里有人可以帮助我或为我指明正确的方向。我正在尝试用 C# 创建一个应用程序，我有 2 个类，DB_Connection 和 MainForm。DB_Connection 是连接到数据库的地方，而 MainForm 是包含我的界面的主窗体。

我发现自己很难过，我试图将一个字符串从我的 DB_Connection 表单传递到 MainForm 都没有成功。这应该做的是从数据库中获取一个查询，将其分配给**usr**变量并将该变量传递给 MainForm ，它将由消息框收集（作为示例），所有这一切都只需单击一个按钮。

任何帮助表示赞赏，谢谢！

**DB_Connection findUsrn 方法：**

```
public void findUsrn()
    {
        try {
            conn.Open();
            if(conn.State.ToString() != "Open")
            {
                MessageBox.Show("Could not connect to the database");
                return;
            }
            else
            {
                sql = "SELECT First_Name FROM all_users";
                cmd = new MySqlCommand(sql, conn);
                rdr = cmd.ExecuteReader();
                while (rdr.Read()) {
                usr = rdr.GetString(0);
                }
                rdr.Close();
                conn.Close();
            }
        } catch (Exception ex) {
            MessageBox.Show(ex.Message);
            return;
            throw;
        }
    } 
```

**MainForm BtnSearchClick 事件：**

```
void BtnSearchClick(object sender, EventArgs e)
    {
        DB_Connection frmDB = new DB_Connection();
        string showUsr = frmDB.getString();
        MessageBox.Show(showUsr);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:35:55.123

你的`findUsrn`方法是`void`，所以它不返回任何东西。您的代码读取数据库并将结果放入局部变量`usr`中，但随后不对其执行任何操作。由于`usr`是本地的，因此当方法失去作用域时它会丢失。您可以让该方法返回一个字符串：

```
public string findUsrn() 
```

然后添加一个 return 子句（这应该在`conn.Close()`语句之后）：

```
return usr; 
```

# javascript - 多个单页应用程序或单页应用程序

> ID：14761328
> 
> 赞同：1
> 
> 时间：2013-02-07T21:28:32.597
> 
> 标签：javascript, ajax, rest, single-page-application, hateoas

我正在编写一个（几乎）“向导”基于网络的项目。基本架构是一个由 Web 客户端使用的 Restful 服务，旨在遵循 HATOAS 方法。由于不是一个轻量级的项目，我正在考虑将项目拆分为三个不同的 SinglePageApplications。对你们来说，这是个好主意吗？如果是这样，在页面之间传递参数的最佳方法是什么？例如。一个页面管理一个“资源A”，你做一些基本的CRUD操作，然后选择其中一个进行下一步：例如。analisys 基于与“资源 A”相关的对象，因此您应该至少传递“资源 A”ID 以及其他一些参数。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:46:59.800

I had a similar project, had to write "Contract Manegement System" for mobile network company, I had login page for 3 type of users - "Admin" , "Manager", "Resposible Person", there were 3 page for these type of users, each of these page represent Single Page Application, that used REST services for interaction with server, and pure JavaScript for passing data into HTML elements, it worked very quickly like desktop application...

# c# - 与 awesominum webcontrol 交互

> ID：14761334
> 
> 赞同：1
> 
> 时间：2013-02-07T21:29:15.930
> 
> 标签：c#, web-controls, awesomium

你能在 awesomium webcontrol 中找到 HTML 元素来做进一步的处理吗？

例如，我可以使用以下方法在 Watin 中找到必要的元素（甚至是元素集合）：

```
Link playButton = myie.ElementOfType<Link>(Find.ById("myid")); // find link (<a>)
Div test = myie.Div(Find.ById("audio")); // find div (<div>) 
```

找到后 - 您可以提取该元素的多个属性

```
string classname = playButton.ClassName; // alternatively -> inner text, link, id, class and all bucket of other properties 
```

我如何在 awesomium 中做到这一点？它是否具有内置的 DOM 解析器来操作网站控件？（div、链接、表格等）

到目前为止，我只能找到 javascript 执行命令**，但这不是我要找的**..

另外，我想知道如何将网页的 HTML 保存为字符串（在 awesomium 中）？

```
string mysite = webControl1.SiteHTML.ToString(); // something like this
// instead of
string mysite = webControl1.ExecuteJavascriptWithResult("document.documentElement.outerHTML").ToString(); 
```

**编辑：解释**

看起来 awesomium 本身不支持 HTML 元素解析，所以我的备份计划如下：

1.  在 awesomium 中打开网页
2.  抓取 HTML 到字符串（当前使用：ExecuteJavascriptWithResult()）
3.  将字符串解析为 HTML（当前使用：“HTML 敏捷包”）
4.  做我需要做的事情（查找元素、集合等）
5.  根据上一步结果在 awesomium 中执行 JS 命令

如果 awesomium 支持 DOM，所有这一切都会变得更容易......但是......好吧......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-28T16:37:32.310

还有一个`JS`技巧怎么样？

```
public string GetHTML(WebControl control)
{
          return control.ExecuteJavascriptWithResult("document.getElementsByTagName('html')[0].outerHTML");

} 
```

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T09:53:29.793

是的，我们可以找到 html 元素进行进一步处理。例如;

```
 dynamic document = (JSObject)webControl.ExecuteJavascriptWithResult("document");

using (document)
                {
                    try
                {
                    dynamic email = document.getElementById("email");
                    dynamic password = document.getElementById("password");

                    if (email == null && password == null)
                        return;

                    using (email)
                    {
                        email.value = "abc@msn.com";
                    }

                    using (password)
                    {
                        password.value = "password";
                    }
                }
                catch (Exception)
                {

                }

            } 
```

这是我找到 htmlInputElement 的方式，我已经对其进行了测试，它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:43:40.647

关于“如何获取 HTML”问题，我似乎记得在遇到此问题时使用了一种半骇人听闻的方式：

```
var control = <some awesomium WebControl instance>;
control.SelectAll();
control.CopyHtml();
var html = Clipboard.GetText(); 
```

# php - 将参数从 php 传递到 javascript

> ID：14761337
> 
> 赞同：0
> 
> 时间：2013-02-07T21:29:27.243
> 
> 标签：php, javascript

我编写了一个代码，它将查询发送到 mysql 数据库，然后使用 $row = mysql_fetch_assoc($result) 逐行获取结果。

我需要将每一行的数据发送到一个 javascript 函数。

这是我使用的一段代码：

```
while($row = mysql_fetch_assoc($result))
{

echo '<script type="text/javascript">'.'queryResults('. json_encode($row) . ');'.'</script>';

} 
```

在我的 javascript 函数中，我有：

```
function queryResults(data){
var results = JSON.parse(data);} 
```

但是，我收到错误：

```
"SyntaxError: JSON.parse: unexpected character" 
```

我的代码哪里出了问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:33:25.850

[直接在脚本标签内的JSON](http://json.org/)被解释为 JavaScript[对象字面](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Object_literals)量——您实际上将对象传递给`queryResults`函数。要使用`JSON.parse()`（您不必这样做），您需要将其包装在 JavaScript 字符串分隔符中并转义返回的字符串中的所有引号`json_encode`，以便 JavaScript 可以看到有效的字符串。

`data`顺便说一句，您的示例函数在其签名中缺少参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:33:11.447

我认为问题在于您没有在函数签名中指定参数。这可以解决问题：

```
function queryResults(data){
var results = JSON.parse(data);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:31:07.350

您需要表的字段名称。

```
json_encode($row['fieldname']) 
```

# ios - iOS 中的世界地图

> ID：14761342
> 
> 赞同：2
> 
> 时间：2013-02-07T21:30:00.083
> 
> 标签：ios, graphics, map, vector

有很多很好的地图库，比如默认的 MapKit 或 Route-Me 或 MapBox。我需要的是一种机制，它可以帮助我显示带有一些图形或文本标记的世界地图，但我不需要比国家视图更进一步。要求是：

*   项目清单
*   自由的
*   可定制（更改颜色、文本）
*   能够在国家/地区绘制一些元素（draw（SomeCountry，SomeGraphics）
*   能够突出显示某些部分（highlight(SomeCountry)）
*   能够离线工作（或加载一次地图）

我看到了两种可能的变体： - 找到一个符合所有这些要求的库（请记住：细节级别超过朝臣级别是多余的）。在这种情况下，你能推荐这样一个吗？- 使用一些矢量图像（例如 SVG）并找到一个工具，以最大限度地减少实现上述功能（绘制、突出显示）的工作量。另外，您可以推荐什么库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T21:52:58.433

看看 WhirlyGlobe：

[http://mousebird.github.com/WhirlyGlobe/](http://mousebird.github.com/WhirlyGlobe/)

这是您正在寻找的国家级酷炫视图。

![在此处输入图像描述](../Images/8d3c4d01c31f654e5cc02d9a0413697f.png)

# python - 将 mmap 指针从 C 传递给 python 作为 mmap 对象

> ID：14761350
> 
> 赞同：0
> 
> 时间：2013-02-07T21:30:27.953
> 
> 标签：python, c, pointers, mmap, word-wrap

我正在尝试将 C 库（beaglebone PRU 驱动程序 prussdrv.c）与 Python 接口。我要访问的特定函数返回一个 mmap 指针，如下所示：

```
int __prussdrv_memmap_init(void) {
      prussdrv.pru0_dataram_base = mmap(0, prussdrv.pruss_map_size, PROT_READ | PROT_WRITE,
         MAP_SHARED, prussdrv.mmap_fd, PRUSS_UIO_MAP_OFFSET_PRUSS);
      ...

int prussdrv_map_prumem(unsigned int pru_ram_id, void **address) {    
     switch (pru_ram_id) {
     case PRUSS0_PRU0_DATARAM:
          *address = prussdrv.pru0_dataram_base;
           break;

prussdrv_map_prumem (DATARAM[PRU_NUM], &pruDataMem);
pruDataMem_byte = (unsigned char*) pruDataMem; 
```

我想封装 pruDataMem 或 pruDataMem_byte 并将其作为 mmap 对象传递给 Python。有没有一种简单的方法可以做到这一点？我看过胶囊和 ctypes 但他们似乎没有做我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:39:28.960

我认为没有任何方法可以`mmap`从这样的本机映射中创建 Python 对象。该协议未发布，内部格式也未发布。

当然[，源](http://hg.python.org/cpython/file/3.3/Modules/mmapmodule.c)是可用的。因此，只要您的映射满足与创建的映射相同的所有标准`new_mmap_object`，您就可以手动构造一个`mmap_object`包装信息，并将其传回。（您*实际上*无法访问该`mmap_object`类型，因为它不在任何头文件中。但是如果您创建等效类型，或者只是复制并粘贴代码，您将把它作为 a 传递`PyObject *`，并且只要它的类型字段指向正确的类型，它会工作。）

但是，我不确定您是否需要这样做。你真的需要一个`mmap`，或者只是任何你可以视为字符串/列表/迭代器的缓冲区吗？因为后者要容易得多。为此，您可以只创建一个[旧式缓冲区](http://docs.python.org/2/c-api/objbuffer.html#old-buffer-protocol)或[新式缓冲区](http://docs.python.org/2/c-api/buffer.html#buffers-and-memoryview-objects)类——或者，如果您只需要 2.7+，则使用具体[`memoryview`](http://docs.python.org/2/library/stdtypes.html#memoryview)类型。从概念上讲，返回映射内存的视图而不是映射本身似乎是有道理的，但我可以想象一些可能不合适的用例。

最后，您始终可以创建一个新类，该类公开您想要围绕映射的任何接口，并使其尽可能多（或尽可能少）像`mmap`您想要的那样。

# mysql - 为什么我的 mysql.sock 文件只在重启后出现？

> ID：14761357
> 
> 赞同：2
> 
> 时间：2013-02-07T21:30:54.240
> 
> 标签：mysql, mysql.sock

我需要安装 DMG MySQL 启动包，然后每次重新启动我的计算机，以便我的 mysql.sock 文件出现在我的`/tmp/`文件夹中。否则，我无法找到该文件，并且出于所有意图和目的，它不可用。

注意：我正在运行 Lion 10.7.5，并且我正在使用 MySQL5.6.10（64 位），如果这有什么不同的话。

我该如何解决这个问题，以便 mysql.sock 文件将永久保留在该文件夹中？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T21:36:37.803

`mysql.sock`是一个套接字文件，只会在你的 MySQL 服务器进程 (mysqld) 运行时出现。启动您的 MySQL 服务器进程，它将出现在 mysql 配置指示的位置。套接字文件的位置在你的 mysql 配置文件中定义，通常`/etc/my.cnf`在 linux 机器上可以找到，但在 OSX 上它取决于你的 mysql 的安装位置。

当你找到 my.cnf 文件时，你可以寻找这样的一行来确认它确实是要在 /tmp 中创建的：

```
 socket=/tmp/mysql.sock 
```

注意：套接字不是传统意义上的文件。它基本上是一个命名管道，用于在基于 unix 的系统上的进程之间进行通信。它看起来是 0 字节，并且仅在创建套接字的程序运行时出现。

# javascript - 如何为翻转安装 JS 代码

> ID：14761365
> 
> 赞同：0
> 
> 时间：2013-02-07T21:31:20.137
> 
> 标签：javascript, rollover, installation

我用谷歌搜索了翻转代码，发现一个似乎应该在这个地址工作的代码：[http](http://www.dnolan.com/code/js/rollover/) ://www.dnolan.com/code/js/rollover/ 。它可能有效，但是……嘿嘿……我不知道如何“为文档中的任何图像创建翻转状态”。诺兰先生给出指令的方式意味着它比在文档标题中安装代码更简单，因此不需要解释，但遗憾的是，我的情况并非如此。

我的导航栏需要它，它由一排 8 个圆形图像组成，在悬停时用相同大小和形状但颜色不同的图像替换。

你们中的任何一个有才华的人都可以填写缺失的信息吗？我只需要没有相应示例的部分——我在标签和标题中找到了部分，并对图像的名称进行了适当的更改。或者，如果你能成为一个真正的桃子，一步一步地给我整件事，我将永远感激不尽。

```
 <div id="header">
    <div id="home"><a href="feather.html"><img src="images/buttons/home.png" width="89"     height="89" alt="Home"></a></div>
    <div id="security"><a href="security.html"><img src="images/buttons/security_o.png" width="89" height="89" alt="Security"></a></div>
    <div id="phase_1"><a href="phase_1.html"><img src="images/buttons/phase_1.png" width="89" height="89" alt="Phase 1"></a></div>
    <div id="phase_2"><a href="phase_2.html"><img src="images/buttons/phase_2.png" width="89" height="89" alt="Phase 2"></a></div>
    <div id="phase_3"><a href="phase_3.html"><img src="images/buttons/phase_3.png" width="89" height="89" alt="Phase 3"></a></div>
    <div id="basic_package"><a href="basic_package.html"><img src="images/buttons/basic_package.png" width="89" height="89" alt="Basic Package"></a></div>

#header  {
background-image: url(images/complete_header.jpg);
background-repeat: no-repeat;
height: 391px;
width: 900px;
position: relative;
}

#home  {
width: 89px;
height: 89px;
position: absolute;
top: 199px;
left: 91px;
} 
```

其他 7 个按钮的 CSS 完全相同，除了左侧位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:36:10.417

只需进一步阅读您的链接：

> 对于文档中的任何图像，您都需要为其创建翻转状态，此图像的唯一要求是它的名称与原始图像完全相同，但名称末尾需要 _o。

因此，如果您有一个图像`foo.jpg`，它希望您有一个`foo_o.jpg`在翻转中替换它。

当然，使用 css 和 sprites 会更好。谷歌搜索应该会带来很多结果。这是我想到的[第一个例子](http://www.elated.com/articles/css-rollover-buttons/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:35:17.563

我认为您应该为`imgover`要使用翻转的每个图像添加一个类。

例如`<img src="sample.jpg" alt="Some Image">`，在您的代码中替换为`<img src="sample.jpg" alt="Some Image" class="imgover">`并创建一个 sample_o.jpg 图像

# sql - 查找不同年份的重复数据

> ID：14761369
> 
> 赞同：2
> 
> 时间：2013-02-07T21:31:39.613
> 
> 标签：sql, sql-server-2008

我有一张桌子。其中我有客户、订单和订单日期。让我们假设它是这样的：

```
Customer   Orders  Date
----       ----    ----
Smith        1     2012-02-18 11:22:29.000
John         1     2012-08-21 02:04:38.000
Jones        1     2013-01-02 03:23:12.000
Smith        1     2013-02-06 09:12:32.000 
```

我想知道哪些客户在一年多的时间内退货和下订单，他们下了多少订单。那么，史密斯在 2012 年和 2013 年订购了吗？是的。这两年有多少次？两次。

结果将是这样的：

```
Customer   Orders  
----       ---- 
Smith        2 
```

我知道如何计算两年内下订单的次数，但我不知道如何排除仅在一年内下单的人，而不是两者兼而有之。

```
SELECT 
    o.Customer, 
    COUNT(o.Orders) as Orders
FROM Order as o
WHERE Date BETWEEN '2012-01-01' AND '2014-01-01'
GROUP BY o.Customer 
```

我确实先环顾四周，但我只看到从两张不同的桌子上提取的答案，我迷路了。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:33:20.050

使用 HAVING 子句。

```
SELECT 
    o.Customer, 
    COUNT(o.Orders) as Orders
FROM Order as o
WHERE Date BETWEEN '2012-01-01' AND '2014-01-01'
GROUP BY o.Customer
HAVING COUNT(o.Orders) > 1 
```

如果您专门寻找不同年份的订单，那么这里是查询

```
SELECT 
        o.Customer,  
        COUNT(o.Orders) as Orders
    FROM Orders as o
    WHERE Date BETWEEN '01-Jan-2012' AND '01-Jan-2014'
    GROUP BY o.Customer
    HAVING COUNT(DISTINCT YEAR(Date)) > 1 
```

这是一个[SQL 小提琴](http://sqlfiddle.com/#!3/53033f/16)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:30:09.377

这是我要做的：

```
 WITH A AS (
  SELECT Customer
     ,   Orders
     ,   Date
     ,   [Year] = Year(Date)
  FROM   [Order]
 )
 ,   B AS (
  SELECT Customer
     ,   Orders = SUM(A.Orders)
     ,   [Year]
  FROM   A
  GROUP BY  
         Customer
    ,    A.[Year]
)
,    Orders2012 AS (
  SELECT *
  FROM   B
  WHERE  B.[Year] = 2012
)
,    Orders2013 AS (
   SELECT *
   FROM   B
   WHERE  B.[Year] = 2013
)
SELECT   O12.Customer
     ,   Orders2012 = O12.Orders
     ,   Orders2013   O13.Orders
     ,   TotalOrders = O12.Orders + O13.Orders
FROM    Orders2012 O12
    JOIN Orders2013 O13
        ON O12.Customer = O13.Customer 
```

通过将其分解为小块处理，（我希望）每一步都清楚我在做什么。我所有的选择都很简单。我的查询很长，但很容易理解、扩展、修改或增加一年。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:36:28.287

这将检查您是否有不同年份的订单。

```
SELECT 
    o.Customer, 
    COUNT(*) as Orders
FROM Order as o
WHERE Date BETWEEN '2012-01-01' AND '2014-01-01'
GROUP BY o.Customer
HAVING MIN(YEAR(o.Date)) <> MAX(YEAR(o.Date)) 
```

如果你的日期不是真的只是一年。

[SqlFiddle](http://sqlfiddle.com/#!2/5f2d1/6)，有一点不同的数据，看看有子句的区别。

提示：不要使用 Order 作为表名：这是保留关键字，会造成混淆。

# ssas - SSAS keylimit 错误配置

> ID：14761378
> 
> 赞同：1
> 
> 时间：2013-02-07T21:32:01.137
> 
> 标签：ssas, dimensions, ssas-2008

有人可以向我解释一下 keyerrolimit 如何处理其他类型的错误吗？让我问一下，如果 KeyDuplicate 设置为 IgnoreError 并且 KeyNotFound 设置为 ReportAndStop，KeyErrorLimit 是否需要大于 0 才能忽略 KeyNotFound 错误？我认为关于 BOL 或过去一小时的谷歌搜索没有好的信息。此外，这些错误（KeyNotFOund、KeyDuplicate、NullKeyNotAllowed）只是处理可能出现错误的常见方式，还是处理可能出现错误的所有方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:26:20.613

KeyErrorLimit 定义在错误模式设置为 ReportAndContinue 的维度/多维数据集的源表中可以遇到的最大行级错误数。因此，如果您将 KeyDuplicate 和 KeyNotFound 都设置为 ReportAndContinue，您将 KeyErrorLimit 设置为 2，并且在一行中存在重复键错误，而在另一行中存在键未找到错误，则处理不会失败（尽管失败的行将是忽略）。第三个行级错误将导致处理失败。

ReportAndStop 意味着如果发生任何该类型的错误（KeyDuplicate、KeyNotFound、NullKeyConvertedToUnknown 或 NullKeyNotAllowed），则处理应立即停止并失败。ReportAndStop 忽略 KeyErrorLimit 参数。

IgnoreError 意味着任何具有相关错误类型的行都将被静默丢弃并且不包含在多维数据集/维度中。忽略的错误不计入 KeyErrorLimit 计数。

这些错误类型并不是处理过程中可能发生的唯一错误。但是，它们是 SSAS 允许您定义继续/停止/忽略行为的唯一错误。所有其他错误（连接等）只会使多维数据集处理失败。

# java - 使用堆排序对数组进行排序

> ID：14761379
> 
> 赞同：0
> 
> 时间：2013-02-07T21:32:05.133
> 
> 标签：java, sorting, heap

```
class HeapSort{
   public static void main(String args[]){
      int A[]={6,5,4,3,2,1};
      HeapSor obj=new HeapSor(6);
      obj.Heap_Sort(A);
      obj.print(A);
   }
}

class HeapSor{

    int lenOfArray;
    int HeapSize;

    HeapSor(int len){
    this.lenOfArray=len;
    this.HeapSize=len;
    }

    void Heap_Sort(int A[]){
    for(int i=0; i<lenOfArray; i++){
        BuiltHeap(A);
        HeapSize--;
        swap(A,i,lenOfArray-i);
    }
    }

    void BuiltHeap(int A[]){
    for(int i=lenOfArray/2; i>=0; i--)
        MaxHeapify(A,i);
    }

    void MaxHeapify(int A[],int i){
    int l=2*i;
    int r=2*i+1;
    int max=i;

    if(i>HeapSize)
        return;
    if(A[l]>A[r])
        max=l;
    else
        max=r;

    if(A[i]<A[max])
        swap(A,i,max);
    //max=i;
    }

    void swap(int A[],int i,int j){
    if(i==j)
        return;

    int temp=A[i];
    A[i]=A[j];
    A[j]=temp;
    }

    void print(int A[]){
    for(int i=0; i<lenOfArray; i++)
        System.out.print(A[i]+" ");

    System.out.println();
    }
} 
```

当我编译它给了我这个错误

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 6
    at HeapSor.MaxHeapify(HeapSort.java:41)
    at HeapSor.BuiltHeap(HeapSort.java:31)
    at HeapSor.Heap_Sort(HeapSort.java:23)
    at HeapSort.main(HeapSort.java:5) 
```

我真的很想知道现在出了什么问题，但我失败了请任何人告诉我我的问题是什么？

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:43:28.497

两个问题开始（会有更多）。

1）Java不是C。查找`A`使用`A.length`不传递单独变量的长度。

2）你对 l 和 r 的计算被打破了。你传入`6/2`=`3`然后你得到`2*3`和`2*3+1`(`6`和`7`) 作为你的索引。这些都不是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:44:16.650

我的猜测是你的问题在这里： `void MaxHeapify(int A[],int i)`

您分配左右孩子：

```
int l=2*i;  
int r=2*i+1; 
```

但是您不检查它们是否超出范围。你检查`i`.

```
if(i>HeapSize)  
        return; 
```

但`2*i`可能超出范围，您可以使用它：

```
 if(A[l]>A[r])  
        max=l;  
    else  
        max=r; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-16T00:13:46.987

```
void max_heapify(int a[],int i,int n) {
    int mxPos = i;
    int l = i*2; // left child
    int r = i*2+1; // right child

    if( l <= n and a[l] > a[mxPos] ) mxPos = l;
    if( r <= n and a[r] > a[mxPos] ) mxPos = r;

    if( mxPos != i ) {
        swap( a[i] , a[mxPos] );
        max_heapify( a , mxPos , n );
    }
}

void build_max_heap( int a[] ,int n) {
    for(int i = n / 2 ; i >= 1 ; i-- ) max_heapify(a,i,n);
}

void heapsort(int a[],int n) {
    build_max_heap(a,n);
    for( int i = n ; i >= 2 ; i-- ) {
        swap( a[1] , a[i] );
        n--;
        max_heapify( a , 1 , n );
    }
}

int main() {
    int n , a [100] ;
    cin >> n ;
    for( int i = 1 ; i <= n ; i++ ) cin >> a[i] ;
    heapsort(a,n);
    for( int i = 1 ; i <= n ; i++ ) cout << a[i] << endl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-16T05:57:49.420

这对我有用：

```
package Heap;

public class HeapSort {

    private static int[] a;
    private static int n;
    private static int left;
    private static int right;
    private static int largest;

    public static void buildheap(int[] a) {
        n = a.length - 1;
        for (int i = n / 2; i >= 0; i--) {
            maxheap(a, i);
        }
    }

    public static void maxheap(int[] a, int i) {
        left = 2 * i;
        right = 2 * i + 1;
        if (left <= n && a[left] > a[i]) {
            largest = left;
        } else {
            largest = i;
        }

        if (right <= n && a[right] > a[largest]) {
            largest = right;
        }
        if (largest != i) {
            exchange(i, largest);
            maxheap(a, largest);
        }
    }

    public static void exchange(int i, int j) {
        int t = a[i];
        a[i] = a[j];
        a[j] = t;
    }

    public static void sort(int[] a0) {
        a = a0;
        buildheap(a);

        for (int i = n; i > 0; i--) {
            exchange(0, i);
            n = n - 1;
            maxheap(a, 0);1
        }
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        int[] a1 = { 4, 1, 3, 2, 16, 9, 10, 14, 8, 7 };
        sort(a1);
        for (int i = 0; i < a1.length; i++) {
            System.out.print(a1[i] + " ");
        }

    }

} 
```

# asp.net - 防止在 ASP.Net 中重新提交表单（不重定向到我自己）

> ID：14761382
> 
> 赞同：6
> 
> 时间：2013-02-07T21:32:31.183
> 
> 标签：asp.net, forms, http, code-behind

我有一个带有 Form 元素 ( `<form runat="server">`) 的母版页、一个带有 Button 元素 ( `<asp:Button ID="Button1" runat="server" OnClick="Button1_Click" Text="Sync" />`) 的内容页，以及一个包含该`Button1_Click`函数的 Code Behind 页面。

用户来到页面并单击按钮。代码背后的代码执行（在服务器上），它更新数据库中的一些表。Code behind 代码所做的最后一件事是`InnerHTML`在内容页面上设置 Span 元素的成功或失败消息。

这一切都很好。问题是如果用户刷新页面，表单被重新提交并且浏览器询问这是否真的是用户想要的。如果用户的回答是肯定的，则重新执行 Code Behind 代码并再次更新数据库。如果用户做出否定的回应，那么什么也不会发生。

重新执行代码背后的代码没什么大不了的。它不会伤害任何东西。但这并不是我想要的行为。

我知道我可以使用 Response.Redirect() 重定向回页面，但是用户永远不会看到我的成功或失败消息。我应该提到该消息实际上不仅仅是“成功”或“失败”，否则我想我可以在重定向的查询字符串中添加一些内容。

有没有办法从代码隐藏代码中重置表单元素，以便如果用户刷新页面，表单不会重新提交？

主页面...

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.master.cs" Inherits="IntuitSync.SiteMaster" %>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" xmlns:ipp="">
    <head runat="server">
    </head>
    <body>
        <form runat="server">
            <div runat="server" id="mainContetntDiv">
                <asp:ContentPlaceHolder ID="MainContent" runat="server" />
            </div>
        </form>
    </body>
</html> 
```

内容...

```
<%@ Page Language="C#" AutoEventWireup="true" MasterPageFile="~/Site.master" CodeBehind="SyncToCloud.aspx.cs" Inherits="IntuitSync.SyncToCloud" %>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:Button ID="Button1" runat="server" OnClick="Button1_Click" Text="Sync" />
    <span runat="server" id="SyncStatus"></span>
</asp:Content> 
```

背后的代码...

```
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;
using System.Globalization;
using System.Web;

namespace IntuitSync
{
    public partial class SyncToCloud : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            //
        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            /*
                Do a bunch of stuff and put the results in syncResults which is a List.
            */
            SyncStatus.InnerHtml = string.Join("", syncResults.ToArray()); // I'd rather do this...
            //Response.Redirect(Request.Url.PathAndQuery, true);  // ...and not do this.
        }
    }
} 
```

非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T22:07:33.083

问题是你正在做一个表单 POST，如果用户随后刷新页面，它会做它应该做的事情：重新提交 POST。没有其他办法了。因此，您可以使用的选项如下：

1.  重定向到确认页面，以某种方式将操作结果传递给确认页面（如果查询字符串/cookie/等不可行，通常从某个数据存储库重新加载）。
2.  重定向到同一页面，但通过查询字符串参数传递成功消息（或者愚蠢地将其存储在 session/ViewState/what-have-you-silliness 中）。
3.  不要发布，而是获取表单，因为您似乎没有发布任何值，只是启动某种服务器端处理。为此，只需将您的表单从帖子更改为获取，或者只是做一个链接。这里的危险是您不应该在任何 get 操作中进行任何变革性/破坏性操作。

*注意*：确保清理所有用户输入（始终将用户输入视为邪恶）。

您可能对最后一个选项最满意，但这完全取决于“做一堆东西并将结果放入 syncResults ...”真正需要什么。

**更新（多年后）**

*虽然这应该是显而易见的，但对某些用户来说可能不够明显*：您永远不应该通过直接显示未经清理的“通过查询字符串参数的成功消息”来向 XSS 攻击敞开心扉。这些建议认为这很明显，但回想起来，这方面应该是明确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-22T03:38:39.833

我建议进入 JASON 路线

在 SyncToCloud.aspx.cs

```
[System.Web.Services.WebMethod]
    public static string updateSyncStatus()
    {
        /*
                Do a bunch of stuff and put the results in syncResults which is a List.
            */
            SyncStatus.InnerHtml = string.Join("", syncResults.ToArray()); // I'd rather do this...
            //Response.Redirect(Request.Url.PathAndQuery, true);  // ...and not do this.
    } 
```

在 SyncToCloud.aspx

```
function SyncStatus(){
                $.ajax({
                            type: "POST",
                            async:true,
                            url: "syncToCloud.aspx/updateSyncStatus",
                            data: <if have anydata>,
                            contentType: "application/json; charset=utf-8",
                            dataType: "json",
                            success: function (msg) {
                                if (msg.d == "Success") {                                    
                                    //Set message on some lable or do something
                                } else {
                                    //Proceed to show message on wrong password
                                }
                            } 
                        }); 
            } 
```

按钮上的标记

```
<asp:Button ID="Button1" runat="server" OnClientClick="SyncStatus(); return false;" Text="Sync" /> 
```

# javascript - ASP.NET AJAX：更新面板中的按钮导致 OnClick 事件在 window.onbeforeunload 之前触发

> ID：14761383
> 
> 赞同：0
> 
> 时间：2013-02-07T21:32:33.687
> 
> 标签：javascript, asp.net, updatepanel

aspx：

```
<script type="text/javascript">
    window.onbeforeunload = function (e) {
        if (unsavedData()) {
            return "Exit page?";
        }
    }

    function unsavedData() {
        //logic for unsaved data here
        //let's just return true for this example
        return true;
    }
</script>

<asp:UpdatePanel ID="updatePnlContent" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="false">
    <ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="btnSave" EventName="Click" />
            <%-- triggers for other buttons  --%>
        </Triggers>
        <ContentTemplate>
            <asp:Button ID="btnSave" runat="server" Text="Save" OnClick="btnSave_Click"/>
            <asp:Button ID="btnCancel" runat="server" Text="Cancel" OnClick="btnCancel_Click"/>
            <%-- Other fields and buttons  --%>
        </ContentTemplate>
    </ContentTemplate>
</asp:UpdatePanel> 
```

后面的代码

```
protected void btnSave_Click(object sender, EventArgs e)
{
    //save data
}

protected void btnCancel_Click(object sender, EventArgs e)
{
    Response.Redirect("Default.aspx");
} 
```

如果我单击“取消”按钮并且有未保存的数据，则会提示单击“确定”继续或单击“取消”以留在此页面上，如预期的那样。但是，当我按取消停留在此页面上时，我在 Microsoft AJAX javascript 之一中收到未指定的错误。

我认为发生的是 OnCilck 事件在 window.onbeforeunload 函数之前触发。如何确保 OnClick 事件仅在用户单击“确定”继续时才触发，而不是在单击“取消”以留在此页面时触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:40:57.667

从 Cancel 按钮中移除 OnClick 方法并将其替换为 OnClieckClick 并调用 unsavedData() 函数。

如果您想同时使用 OnClick 和 OnClientClick，请参阅此帖子以获取解决方案：[OnclientClick 和 OnClick 不能同时工作？](https://stackoverflow.com/questions/2155048/onclientclick-and-onclick-is-not-working-at-the-same-time)

# c# - 使用 DataContractJsonSerializer 解析 Json

> ID：14761384
> 
> 赞同：0
> 
> 时间：2013-02-07T21:32:33.577
> 
> 标签：c#, json

我使用*DataContractJsonSerializer*进行 Json 解析。请告诉我如何解析这个json：

```
{"response":[2,{"mid":95001,"date":1360173495,"out":0,"uid":32578013,"read_state":0,"title":"Head","body":"message"}, {"mid":95000,"date":1360173439,"out":0,"uid":32506752,"read_state":0,"title":" Theme ","body":"message2"}]} 
```

我不明白我需要什么结构。我正在尝试写这个：

```
[DataContract]
internal class Message
{
    [DataMember]
    public int IntMember { get; set; } 

    [DataMember]
    public List<Messages> response { get; set; }        

    [DataContract]
    protected internal struct Messages
    {
        [DataMember]
        public string mid { get; set; }            
        [DataMember]
        public string uid { get; set; }            
        [DataMember]
        public string date { get; set; }           
        [DataMember]
        public string title { get; set; }     
        [DataMember]
        public string body { get; set; }       
    }
} 
```

但这不起作用，因为一开始是 2。该怎么办？在解析之前删除这个数字，或者你可以直接忽略它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:36:24.987

不幸的是，您似乎无法使用内置的序列化程序来获得所需的东西。该数组看起来像是包含一个整数作为其第一个元素，该元素指示数组的长度，这不是标准的 JSON，并且（正如您显然发现的那样）意味着该数组包含一个异构元素列表。

使用更专用的 JSON 库（如[JSON.net ）可能会让您更幸运](http://james.newtonking.com/projects/json-net.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T18:13:57.977

感谢问题已解决。借助正则表达式找到“不必​​要的数字”并删除

如果您需要号码本身：

```
@"(?<=response\D*)\d+" 
```

如果您需要带逗号的数字：

```
@"(?<=response\D*)\d[^{]*" 
```

然后替换

```
Replace(jsonString, RegEx); 
```

感谢互联网，书 C# 5.0 和论坛 Cyber​​Forum

# javascript - 变量作为参数再次传递回变量

> ID：14761387
> 
> 赞同：0
> 
> 时间：2013-02-07T21:32:42.820
> 
> 标签：javascript, jquery, object, parameters

好的，我不知道我是否能够完全描述我正在做的事情的范围，但希望我可以在这里传达一些层次，希望有人能理解。所以..

我在我的javascript中定义了这些全局变量，即：

```
var abc = '';
var def = '';
var ghi = ''; 
```

有了这些变量，我稍后可以通过函数在我的脚本中定义它们。所以它们稍后可以被其他功能重用。那部分我已经很好了。现在我有一个有趣的想法，让我很难过。这种情况下的变量最终是我在函数之间传递的对象，我可以将其用于各种比较，并根据需要进行更新。现在我已经到了需要在特定函数的末尾重新定义整个对象的地步。但我只是在对象本身周围传递，所以关于哪个对象是起点的参考丢失了。

所以现在我想弄清楚有没有一种方法可以重新定义它，比如我的功能是

```
function monkey(var)
{
   //code to do stuff
   //something here after stuff to redefine var as the object it once was referenced
   //example ghi = something_from_code_generation_above
}
monkey(abc);
monkey(def);
monkey(ghi); 
```

在进行这样的调用之后，abc 对象更新、def 对象更新或 ghi 对象更新。但是将其限制在函数内，而不是通过像这样的闭包

```
ghi = monkey(ghi); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:36:47.793

我知道如何做到这一点的唯一方法是将封闭范围作为额外参数传递，并传递*name*，而不是变量的*值*。

```
monkey(window, "abc"); // sends the global variable "abc" and allows it to be modified

function monkey(scope, name)
{
    var v = scope[name];
    // do stuff to v
    scope[name] = whatever; // destructively updates the variable in the original scope
} 
```

如果您已经知道传递的所有变量都将在特定范围内（例如，它们都是某些已知命名对象的一部分），您可以只通过字符串传递变量名称。

如果它们都是全局变量，正如您在问题中指出的那样，请执行以下操作：

```
monkey("abc"); // instead of monkey(abc);
function monkey(name)
{
    var v = window[name];
    window[name] = whatever; // updates the global variable by name
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:36:57.103

不确定这是您想要实现的目标。

```
function monkey(my_var)
{
   console.log('Im ', my_var.id);
}
abc = {id: 'abv'};
def = {id: 'def'}; 
```

# python - 将 CellRendererToggle 的单行设置为不一致

> ID：14761389
> 
> 赞同：5
> 
> 时间：2013-02-07T21:32:48.860
> 
> 标签：python, gtk, gtk3

在 Gtk+3 上，我使用 a`TreeModel`来存储嵌套信息，并用 a`CellRendererText`和 a显示它`CellRendererToggle`。用户可以点击每个切换按钮，当有嵌套的按钮并且它们处于不同的状态时，我希望上层的按钮反映“不一致”状态。如何为***一个元素***设置此属性？

为了更清楚起见，我想从传输 bittorrent 客户端实现的示例： ![在此处输入图像描述](../Images/a79d2320dcda6095b9bdc9edfad784df.png)

我知道如何将单元格渲染器的所有按钮设置为不一致的状态，`myCellRendererToggle.set_properties(inconsistent=True)`但似乎我无法从这里访问一个元素；

我知道如何访问我的 TreeStore 模型的特定行，但我只能设置 «True» 和 «False» 值。

我的代码非常接近官方文档，因此您可以帮助我：[https](https://python-gtk-3-tutorial.readthedocs.org/en/latest/cellrenderers.html#cellrenderertoggle) ://python-gtk-3-tutorial.readthedocs.org/en/latest/cellrenderers.html#cellrenderertoggle（我使用 treeStore 而不是列表存储）

这是我的代码：

```
class HelloMyApp:

def __init__(self):

    # Set the Glade file
    self.builder = Gtk.Builder()
    self.builder.add_from_file(GLADEFILE)

    dic = {
        "on_button1_clicked" : self.btnValidate_clicked,
        "on_MainWindow_destroy" : self.quit,
        "on_window1_delete_event" : self.quit,

        }

    self.builder.connect_signals(dic)

    window = self.builder.get_object("window1")

    treeview1 = self.builder.get_object("treeview1")

    ######## This is my model : it stores a string and a boolean. #########
    self.treeModel = Gtk.TreeStore(str, bool)

    # Example on how to insert data in the model
    treeIter = self.treeModel.append(None, ['example one', True])
    self.treeModel.append(treeIter, [' simple elt', True])
    treeIter = self.treeModel.append(treeIter, ['example two', False])
    self.treeModel.append(treeIter, ['under example two', True])

    select = treeview1.get_selection()
    select.set_mode(Gtk.SelectionMode.BROWSE)

    select.connect("changed", self.on_tree_selection_changed, buf) 

    # Using one column of text and another column with the toggle buttons
    renderer = Gtk.CellRendererText()
    column = Gtk.TreeViewColumn("Title", renderer, text=0)
    treeview1.append_column(column)

    ######  Here is the CellRendereToggle  ################
    renderer_toggle = Gtk.CellRendererToggle()
    renderer_toggle.connect("toggled", self.on_cell_toggled)
    column_toggle = Gtk.TreeViewColumn("Installer", renderer_toggle, active=1)
    treeview1.append_column(column_toggle)

    treeview1.set_model(self.treeModel)

    window.show_all()

if __name__ == "__main__":

    HelloMyApp = HelloMyApp()
    Gtk.main() 
```

谢谢 ！

**编辑：回答马库斯**：我想不通，当我在函数内更改 CellRendererToggle 的属性时，它会更改每一行。

**编辑解决方案**：正如 Marcu 指出的那样，我们必须在每种情况下设置属性，这就是我添加该`else`部分的原因。

```
def cellRenderer_func(column, cellRenderer, treeModel, treeIter, userData):
    if 'cat' in treeModel.get_value(treeIter, 0): 
        # it happens only ones in my model, 
        # so here I am in a row I want to change to inconsistent.
        cellRenderer.set_property('inconsistent',True) 
        # I was expecting that changes the box of that row but it affects every row. 

    else: 
        cellRenderer.set_property('inconsistent', False) # and that's ok now. 
```

我得再试一次。我想知道......我们真的必须手动完成吗，它不能成为 treeView 的开箱即用功能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T22:51:38.990

可以通过使用单元格数据函数来设置一个元素的属性。由于我只在 C 中完成此操作，因此我只能将 PyGTK 文档的链接传递给您，我还没有看到 PyGObject 的此功能的相关文档。

对于 PyGTK 已在[此处](http://www.pygtk.org/docs/pygtk/class-gtktreeviewcolumn.html#method-gtktreeviewcolumn--set-cell-data-func)记录，[此](http://faq.pygtk.org/index.py?query=pixbufs&querytype=simple&req=search)页面在底部为您提供了一个示例，PyGTK 的单元格数据函数的使用也在[此](http://www.pygtk.org/pygtk2tutorial/sec-CellRenderers.html#celldatafuncfig)文档中进行了介绍。

例如，如果您想做与传输相同的操作，您可以执行以下操作：由于您接收当前迭代器作为单元格数据函数的参数，您可以在那里循环遍历其所有子节点并检查孩子们。然后，您将知道在父节点上设置哪个状态。现在主要的一点是，在单元格数据函数中设置一个属性只会影响这个单个单元格，而不是树视图的所有元素。

我还可以为我自己的应用程序提供一个可视化示例：

![在此处输入图像描述](../Images/a8677dd591b2591f59213112ce2a07cc.png)

我在此树视图中有“值”列。如果“菜单元素”列中的值设置为“启用”并且“类型”列中的值是“选项”，则会显示一个复选框而不是文本（我已经突出显示了这一行）。示例图像还显示了一个活动搜索，它突出显示了搜索结果。两者都可以使用单元格数据函数来设置您在问题中要求的一个元素的属性。

**编辑**

我已经完成了一些示例代码。要点是始终为每个单元格设置单元格属性。所以不仅仅是“如果……，那么设置属性”，而是“如果，像这样设置属性，否则，像那样设置属性”。（它基于旧的 PyGTK 文档，但无论如何它应该澄清一些事情）。

```
#!/usr/bin/env python

# example basictreeview.py

import pygtk
pygtk.require('2.0')
import gtk

class BasicTreeViewExample:

    def set_status(self, column, cell, model, iter):
        if 'inconsistent' in model.get_value(iter, 0):
            cell.set_property('inconsistent',True) 
        else:
            cell.set_property('inconsistent',False)
        return

    def delete_event(self, widget, event, data=None):
        gtk.main_quit()
        return False

    def __init__(self):
        self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)

        self.window.set_title("Basic TreeView Example")

        self.window.set_size_request(200, 200)

        self.window.connect("delete_event", self.delete_event)

        self.treestore = gtk.TreeStore(str)

        for parent in range(4):
            piter = self.treestore.append(None, ['parent %i' % parent])
            for child in range(3):
                if child == 1:
                    self.treestore.append(piter, ['consistent'])
                else:
                    self.treestore.append(piter, ['inconsistent'])

        self.treeview = gtk.TreeView(self.treestore)

        self.tvcolumn0 = gtk.TreeViewColumn('Column 0')
        self.tvcolumn1 = gtk.TreeViewColumn('Column 1')

        self.treeview.append_column(self.tvcolumn0)
        self.treeview.append_column(self.tvcolumn1)

        self.text = gtk.CellRendererText()
        self.toggle = gtk.CellRendererToggle()

        self.tvcolumn0.pack_start(self.text, True)
        self.tvcolumn1.pack_start(self.toggle, True)

        self.tvcolumn0.add_attribute(self.text, 'text', 0)
        self.tvcolumn1.set_cell_data_func(self.toggle, self.set_status)

        self.window.add(self.treeview)

        self.window.show_all()

def main():
    gtk.main()

if __name__ == "__main__":
    tvexample = BasicTreeViewExample()
    main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-30T14:47:48.860

我最近遇到了同样的问题，发现如果您希望直接从模型中的列设置属性，则不需要单元格数据函数。实现该问题的代码中所需的更新应如下所示：

```
self.treeModel = Gtk.TreeStore(str, bool, bool)
...
column_toggle = Gtk.TreeViewColumn("Installer", renderer_toggle, active=1, inconsistent=2) 
```

然后根据需要在新列中设置不一致的值。

作为关于何时在模型中选择单元格数据函数或新列的提示，请考虑以下事项（[Gtk+ By Example](http://en.wikibooks.org/wiki/GTK%2B_By_Example/Tree_View/Columns_and_Renderers#Cell_Data_Functions)）：

> 每次渲染该（渲染器）列中的单元格时，都会调用您的单元格数据函数。如果你曾经使用过这个函数，去检查一下这个函数在你的程序中被调用的频率。如果您在单元格数据函数中执行耗时的操作，事情不会很快，特别是如果您有很多行。

# php - Zend Framework 2 路由中的编码参数

> ID：14761392
> 
> 赞同：1
> 
> 时间：2013-02-07T21:33:10.530
> 
> 标签：php, zend-framework2

我在为我的 ZF2 项目设置路由参数时遇到问题。我希望能够将 URL 作为参数传递给页面，但每次尝试都会导致 404。

我创建了一个 URL 模块并希望对其进行设置，以便以下控制器将 URL 作为 id 参数传递。控制器扩展了 AbstractRestfulController 类，因此下面的示例将使用 get($id) 方法。

控制器地址：

```
http://localhost/url/ 
```

带参数：

```
http://localhost/url/http://www.google.co.uk 
```

我的 module.config.php 的路由器部分如下所示：

```
'router' => array(
    'routes' => array(
        'url' => array(
            'type' => 'segment',
            'options' => array(
                'route' => '/url[/][:id]',
                'defaults' => array(
                    'controller' => 'URL\Controller\URL',
                ),
            ),
        ),
    ),
), 
```

如果我必须通过编码参数，那么它不会是世界末日，尽管我不希望这样做。

使用参数编码：

```
http://localhost/url/http:%2F%2Fwww.google.co.uk 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T07:48:29.980

这并不直接涉及您的问题，但我建议您稍微调整一下路线！目前你的路线会匹配太多，即使这样：

```
http://localhost/url1 
```

而且我认为您不想使用此功能，这是我的建议：

```
'type'    => 'segment',
'options' => array(
    'route'    => '/url[/[:id]]',
    'defaults' => array(
        'controller' => 'URL\Controller\URL',
    ),
    'constraints' => array(
        'id' => '<InsertURLRegexHere>'
    )
) 
```

与您的问题更相关：ViewHelpers 自动对重要字符进行 urlencode，如 中所示[`Zend\Mvc\Router\Http\Segment`](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Router/Http/Segment.php#L411)，在`encode()`中使用`buildPath()`。

您的行为究竟发生在哪里，您确定不只是浏览器为了查看目的而对 url 进行解码？Chrome 喜欢做这种事情^^

# c++ - 使用 Rcpp::IntegerVectors 添加 int

> ID：14761403
> 
> 赞同：2
> 
> 时间：2013-02-07T21:33:55.800
> 
> 标签：c++, r, rcpp

这是我在各种情况下遇到的问题的可重现示例。基本上我有一个 C++`int`和一个 Rcpp `IntegerVector`，我只想将一个整数加到另一个整数上并将其存储到一个新的`IntegerVector`. 数字类型也会出现同样的问题，但现在让我们将其保留为整数。

```
library(inline)

set.seed(123)
x <- sample(1:100,5)

cpp_src <- '
Rcpp::IntegerVector xa = clone(x);
Rcpp::IntegerVector sa(s);
int currentSum = 12; 
std::cout << sa[0] << " ";
std::cout << currentSum << " ";
Rcpp::IntegerVector remainingQuantity = sa[0] - currentSum;
std::cout << remainingQuantity << "\\n";
return remainingQuantity;
'

sumto <- cxxfunction( signature(x="integer", s="integer"), body=cpp_src, plugin="Rcpp", verbose=TRUE )

testresult <- sumto(x=x, s=100L) 
```

以下是（灾难性的！）结果：

```
> testresult <- sumto(x=x, s=100L)
100 12 0x50ebf50
> x
[1] 29 79 41 86 91
> testresult
 [1] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
[63] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
> length(testresult)
[1] 88 
```

我怀疑问题的根源在于我是一个 C++ 新手，对于 C 变量类型之外的任何东西都没有一个好的心理模型（即我在功能级别上理解指针、引用和取消引用，但我不知道为什么取消引用 an`IntegerVector`似乎在某些地方有效但在其他地方无效，或者`std::accumulate`返回什么数据类型等）。

无论如何，如果有人能给我一个关于如何添加`int`到的成语`Rcpp::IntegerVectors`，将不胜感激。如果您能解释为什么您发布的任何解决方案都有效，则更有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T21:57:11.880

我承认我不完全确定你的例子是什么意思，但这里有一个变体，使用犰狳类型。我保留了您的输入向量，并将其显示在`stdout`.

```
cpp_src <- '
  arma::ivec sa = Rcpp::as<arma::ivec>(x);
  Rcpp::Rcout << sa << std::endl;
  int currentSum = 12;
  Rcpp::Rcout << sa[0] << " ";
  Rcpp::Rcout << currentSum << " ";
  int remainingQuantity = arma::as_scalar(sa[0]) - currentSum;
  Rcpp::Rcout << remainingQuantity << std::endl;
  return Rcpp::wrap(remainingQuantity);
'

armasumto <- cxxfunction(signature(x="numeric", s="integer"), 
                         body=cpp_src, plugin="RcppArmadillo", verbose=FALSE )

testresult <- armasumto(x=x, s=100L) 
```

有了这个，我得到：

```
R> cpp_src <- '
+   arma::ivec sa = Rcpp::as<arma::ivec>(x);
+   Rcpp::Rcout << sa << std::endl;
+   int currentSum = 12;
+   Rcpp::Rcout << sa[0] << " ";
+   Rcpp::Rcout << currentSum << " ";
+   int remainingQuantity = arma::as_scalar(sa[0]) - currentSum;
+   Rcpp::Rcout << remainingQuantity << std::endl;
+   return Rcpp::wrap(remainingQuantity);
+ '
R> 
R> armasumto <- cxxfunction(signature(x="numeric", s="integer"), 
+                           body=cpp_src, plugin="RcppArmadillo", verbose=FALSE )
R> testresult <- armasumto(x=x, s=100L)
        29
        79
        41
        86
        91

29 12 17
R> 
```

为了完整起见，现在我们确定一切都在标量上，与 Rcpp 向量相同：

```
R> cpp_src <- '
+   Rcpp::IntegerVector xa(x);
+   int currentSum = 12;
+   Rcpp::Rcout << xa[0] << " ";
+   Rcpp::Rcout << currentSum << " ";
+   int remainingQuantity = xa[0] - currentSum;
+   Rcpp::Rcout << remainingQuantity << std::endl;
+   return Rcpp::wrap(remainingQuantity);
+ '
R> newsumto <- cxxfunction(signature(x="integer", s="integer"), 
+                          body=cpp_src, plugin="Rcpp" )
R> testresult <- newsumto(x=x, s=100L)
29 12 17
R> 
```

# meteor - 可以从 Meteor.autorun 中排除依赖关系吗？

> ID：14761405
> 
> 赞同：1
> 
> 时间：2013-02-07T21:34:02.837
> 
> 标签：meteor

我们正在使用 Meteor.autorun 来查找“过滤器”会话变量中的更改，对服务器进行两次异步调用以获取过滤后的数据，并使用结果更新两个“列表”会话变量。在另一个 .autorun 函数中，脚本等待列表会话变量中的更改，然后打开适用的模板。

所以，

```
Meteor.autorun(function(){

    set_search_session(Session.get('filters'));

    render_templates(
         Session.get('places'),
         Session.get('awards')
    );

});

var set_search_session = function(filters) {
      Meteor.call('search_places', filters.places, function(error, data) {
          Session.set('places', data);
      };
      Meteor.call('search_awards', filters.awards, function(error, data) {
          Session.set('awards', data);
      };
};

var render_templates = function(places, awards) {
      var filters = Session.get('filters');
      if (!awards && _.isUndefined(filters['neighborhood'])) {
           Session.set('template', 'place_detail');
      };
}; 
```

问题是 render_templates 函数运行了两次，因为它显然仍然依赖于 Session.get('filters')。因此，在任何自动运行功能中，您似乎都无法使用与您正在观察更改的功能分开的 Session.get() 功能。

有没有解决的办法？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:46:09.590

`filters`改变电话有两个不同的原因`render_templates`。一个是`render_templates`在与 ; 相同的自动运行中调用`Session.get('filters')`。另一种是`render_templates`本身调用`Session.get('filters')`。

要修复前者，请将自动运行拆分为两个单独的自动运行：

```
Meteor.autorun(function(){
    set_search_session(Session.get('filters'));
});
Meteor.autorun(function(){
    render_templates(
         Session.get('places'),
         Session.get('awards')
    );    
}); 
```

要解决后者，也许将“社区”字段移出`Session.get('filters')`它自己的会话字段？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T16:06:06.097

我可能在这里比赛迟到了，但我遇到了同样的问题（当反应变量发生变化时我需要修改当前用户，但当用户改变时不需要，我在自动运行中使用 Meteor.user() ）。

答案来自追踪器手册：[https ://github.com/meteor/meteor/wiki/Tracker-Manual#ignoring-changes-to-certain-reactive-values](https://github.com/meteor/meteor/wiki/Tracker-Manual#ignoring-changes-to-certain-reactive-values)

```
Tracker.autorun(function () {
    Tracker.nonreactive(function () {
        console.log("DEBUG: current game umpire is " + game.get("umpire"));
    });
    console.log("The game score is now " + game.get("score") + "!");
}); 
```

# c# - 来自没有 Active Directory 的 ASP.NET 应用程序的 Office365 SSO

> ID：14761407
> 
> 赞同：0
> 
> 时间：2013-02-07T21:34:16.267
> 
> 标签：c#, asp.net, single-sign-on, office365

我们希望从将用户名和密码存储在数据库中的 ASP.NET Web 应用程序对 Office365 进行单点登录。我们没有这些用户的 Active Directory 帐户。

我可以了解到关于 office365 的 SSO 的信息是，它只允许使用本地 AD 进行 SSO。但是应该有一些解决方法。

任何人都可以给我一个关于如何实现这一点的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:44:27.247

这是可能的，但很困难。我们花了大约一个月的时间来完成它。

您需要做的是设置您自己的 ws-federation 安全令牌服务。您使用 WIF 开发它。它应该公开确切的元数据并声称 ADFS2.0 确实如此。这是棘手的部分之一，因为这在任何地方都没有记录，并且需要对 ADFS 元数据进行一些逆向工程。

当 sts 准备就绪并可以正常工作时，O365 将不会看到您的 sts 和 thr ADFS 之间的差异，并且会很高兴地根据您自己的 sts 对用户进行身份验证。sts 可以使用您想要的任何用户后备库。

另一个问题是您自动化 O365 以创建用户帐户的方式。这更简单，因为 powershell api 有很好的文档记录，并且允许您模仿 DirSync 的工作方式，这样您就不需要 DirSync 和 AD。

这只触及表面，并为艰难的研究做好准备。可以回答任何具体问题，但我不希望任何人提供分步教程。至少我们什么都没找到，都是我们自己做的。

# jquery - 当月份使用jQuery正确更改时，我应该如何更改事件列表？

> ID：14761408
> 
> 赞同：0
> 
> 时间：2013-02-07T21:34:17.323
> 
> 标签：jquery, html, web

提前致谢

我正在制作一个日历，其中包含月份列、事件列和事件描述列。我应该如何做到这一点，以便我能够在不同月份点击时更改事件？

“使用 jQuery 正确更改月份时，我应该如何更改事件列表？” 这是我当前的代码

* * *

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="Mitchell Bregman">
    <meta charset="UTF-8">

    <title>Community Page | Events</title>

    <link rel="shortcut icon" href="">
    <script src="http://code.jquery.com/jquery-1.7.2.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <script type="text/javascript">
        $(document).ready(function(){   

            $('#description').hide();
            $('.e1').hide();
            $('.e2').hide();
            $('.e3').hide();
            $('.e4').hide();

            $('.ev1').click(function(){
               $('#description').fadeIn();  
               $('.e1').show();
               $('.e2').hide();
                $('.e3').hide();
                $('.e4').hide();
            });

            $('.ev2').click(function(){
               $('#description').fadeIn();  
               $('.e2').show();
               $('.e1').hide();
                $('.e3').hide();
                $('.e4').hide();
            });

            $('.ev3').click(function(){
               $('#description').fadeIn();  
               $('.e3').show();
               $('.e2').hide();
                $('.e1').hide();
                $('.e4').hide();
            });

            $('.ev4').click(function(){
               $('#description').fadeIn();  
               $('.e4').show();
               $('.e2').hide();
                $('.e3').hide();
                $('.e1').hide();
            });

        });
    </script>
    <style type="text/css">
    body{
        background-image: url('http://subtlepatterns.com/patterns/kindajean.png');
        top: 0px;
        right: 0px;
        bottom: 0px;
        left: 0px;
        overflow-x: hidden;
        overflow-y: hidden;
    }
    p, h1, h2, h3, h4, h5, h6, span{
        margin-top: 0px;
        margin-bottom: 0px;
        font-family: 'Open Sans', Arial, Helvetica, sans-serif; 
    }
    #white_bar{
        height: 100%;
        left: 0;
        top: 0;
        position: absolute;
        width: 1%;
        background-color: white;
        border-right: 1px solid #BABABA;
    }
    #months{
        width: 17%;
        height: 100%;
        top: 0;
        left: 1%;
        position: absolute;
        background-image: linear-gradient(left , rgb(22,21,26) 0%, rgb(24,22,28) 100%);
        background-image: -o-linear-gradient(left , rgb(22,21,26) 0%, rgb(24,22,28) 100%);
        background-image: -moz-linear-gradient(left , rgb(22,21,26) 0%, rgb(24,22,28) 100%);
        background-image: -webkit-linear-gradient(left , rgb(22,21,26) 0%, rgb(24,22,28) 100%);
        background-image: -ms-linear-gradient(left , rgb(22,21,26) 0%, rgb(24,22,28) 100%);

        background-image: -webkit-gradient(
            linear,
            left top,
            right top,
            color-stop(0, rgb(22,21,26)),
            color-stop(1, rgb(24,22,28))
        );
        border-right: 1px solid #363636;
    }
    #months h1{
        font-size: 19px;
        color: white;
        padding: 20px;
    }
    #months li{
        list-style-type: none;
        font-family: 'Open Sans', Arial, Helvetica, sans-serif; 
        margin-bottom: 3px;
        font-size: 14px;
        color: #BDBDBD;
        padding: 5px 0px 5px 20px;
        cursor: pointer;
        -webkit-transition: all .2s ease;
        -moz-transition: all .2s ease;
        -ms-transition: all .2s ease;
        -o-transition: all .2s ease;
        transition: all .2s ease;
    }
    #months li:hover{
        background-color: rgba(120, 120, 120, .12);
        -webkit-transition: all .2s ease;
        -moz-transition: all .2s ease;
        -ms-transition: all .2s ease;
        -o-transition: all .2s ease;
        transition: all .2s ease;
    }
    #events{
        width: 28%;
        height: 100%;
        top: 0;
        left: 18%;
        position: absolute;
        background-image: linear-gradient(left , rgb(174,170,189) 0%, rgb(190,187,199) 100%);
        background-image: -o-linear-gradient(left , rgb(174,170,189) 0%, rgb(190,187,199) 100%);
        background-image: -moz-linear-gradient(left , rgb(174,170,189) 0%, rgb(190,187,199) 100%);
        background-image: -webkit-linear-gradient(left , rgb(174,170,189) 0%, rgb(190,187,199) 100%);
        background-image: -ms-linear-gradient(left , rgb(174,170,189) 0%, rgb(190,187,199) 100%);

        background-image: -webkit-gradient(
            linear,
            left top,
            right top,
            color-stop(0, rgb(174,170,189)),
            color-stop(1, rgb(190,187,199))
        );
        border-right: 1px solid #B3B3B3;
    }
    #events h1{
        font-size: 21px;
        color: black;
        padding: 20px;
    }
    #events li{
        list-style-type: none;
        font-family: 'Open Sans', Arial, Helvetica, sans-serif; 
        margin-bottom: 3px;
        font-size: 14px;
        color: #333333;
        padding: 5px 0px 5px 20px;
        cursor: pointer;
        -webkit-transition: all .2s ease;
        -moz-transition: all .2s ease;
        -ms-transition: all .2s ease;
        -o-transition: all .2s ease;
        transition: all .2s ease;
    }
    #events li:hover{
        background-color: rgba(41, 127, 214, .5);
        -webkit-transition: all .2s ease;
        -moz-transition: all .2s ease;
        -ms-transition: all .2s ease;
        -o-transition: all .2s ease;
        transition: all .2s ease;
    }
    #description{
        width: 500px;
        background-color: white;
        height: 90%;
        top: 50%;
        margin-top: -45%;
        left: 46%;
        position: absolute;
        overflow: none;
    }
    #description p{
        padding: 20px 20px 20px 20px;
    }
    </style>

    </head>

    <body>
        <div id="white_bar">
        </div>
        <div id="months">
            <h1>Months</h1>
            <li class="jan">January</li>

            <li class="feb">February</li>
            <li class="mar">March</li>
            <li class="apr">April</li>
            <li class="may">May</li>
            <li class="jun">June</li>
            <li class="jul">July</li>
            <li class="aug">August</li>
            <li class="sep">September</li>
            <li class="oct">October</li>
            <li class="nov">November</li>
            <li class="dec">December</li>
        </div>
        <div id="events">
            <h1>Events</h1>
            <li class="ev1">1/2/13 - General Meeting</li>
            <li class="ev2">Event 2</li>
            <li class="ev3">Event 3</li>
            <li class="ev4">Event 4</li>
        </div>
        <div id="description">
            <p class="e1">
            <div style="margin: 0 auto; width:100%; height:400px;"><object type="text/html" data=".//Blank.html"" style="width:490px; height:1200px; margin:1%;"></object></div>
            </p>
            <p class="e2">event 2 desc</p>
            <p class="e3">event 3 desc</p>
            <p class="e4">event 4 desc</p>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:40:07.180

```
$('#months li').click(function () {
    myClass = $(this).attr('class');
    $('.events').hide();
    $('.events.' + myClass).show();
}); 
```

[http://jsfiddle.net/k3MtK/10/](http://jsfiddle.net/k3MtK/10/)

请注意，我删除了一堆东西以更清楚地说明我在做什么，并且我确实将 .events 添加到您的 CSS 中。您还可以使用此示例来简化其余代码。

# c# - 读取和操作 HDF5 文件

> ID：14761412
> 
> 赞同：1
> 
> 时间：2013-02-07T21:34:32.263
> 
> 标签：c#, hdf5

[我在HDF5 示例代码](https://stackoverflow.com/questions/7939723/c-sharp-hdf5-example-code)中发现了一个类似的问题，
但我无法正确查看 hdf5 数据集内容。

我正在查看的数据集包含字符串标题，第一列中包含字符串，其他列中包含字符串。

这是我的代码的样子：

```
public static void readh5(string path, string filename)
{
    H5.Open();
    var fileID = H5F.open(path + filename, H5F.OpenMode.ACC_RDONLY);

    var groupID = H5G.open(fileID, "/Example Group/");
    var datasetID = H5D.open(groupID, "Events");
    var dataSpace = H5D.getSpace(datasetID);
    var size = H5S.getSimpleExtentDims(dataSpace);
    var dataType = H5D.getType(datasetID);

    double[,] dataArray = new double[size[0],11];
    var wrapArray = new H5Array<double>(dataArray);
    H5D.read(datasetID, dataType, wrapArray);
    Console.WriteLine(wrapArray);
} 
```

当我调试并查看 wrapArray 时，每个元素的值都是从 10^300 到 10^-300 的非常大或小的双打，我不知道为什么。我不认为这些是元素的 ID 号。我尝试将 wrapArray 和 dataArray 的数据类型更改为对象，但这仍然没有给我数据集的确切内容。

我为 wrapArray 得到的输出如下所示：

```
[0,0] 4.0633928641260729E+87  
[0,1] 9.77854726248995E-320  
[0,2] 1.52021104712121E-312 
```

等等

但我想要的是：

```
[0,0] Event1  
[0,1] 2  
[0,2] 56 
```

等等

在读取数据集后，我想遍历第一列以查找特定字符串，并获取其他列中的相应元素。但我必须弄清楚这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T14:28:20.720

对我来说，它通过简单地检查 DataSet 的实际数据类型（使用 HDFView）然后制作包含该数据类型而不是双精度数的数组来工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T20:52:45.480

约翰，如果数据集的一列填充字符串值，第二列填充双值，则数据集由“复合”类型组成。那时事情有点复杂，（据我今天所知..我是 HDF5 的新手）不可能简单地将值加载到 2D 数组。相反，您必须：

```
//1) Define byte array in memory. We know that it is one string and two doubles. 
//Check that string in dataset is really 256 chars long.
 int rows = size[0]; //this should be number of rows in dataset. 
 int oneRowDataSize = 256+8+8; //string+double+double 
 byte[] data_to_read = new byte[oneRowDataSize * rows];

// 2) Read data to our byte array
 H5D.read(datasetID, dataType, new H5Array<byte>(data_to_read));

 // 3) Decompose our byte array to rows and individual values
 for (int m = 0; m < rows; m++)
  {

 //4) offset of the row in the byte array
      int pos = m*oneRowDataSize;

 //5) compute individual offsets
      int posString = pos;
      int posDouble1 = pos + 256; //change the 256 to the correct size of string in dataset
      int posDouble2 = pos + 256 + 8;

 //6) convert bytes to values
     string valString = Encoding.UTF8.GetString(data_to_read, posString, 256);
     double valDouble1 = BitConverter.ToDouble(data_to_read, posDouble1);
     double valDouble2 = BitConverter.ToDouble(data_to_read, posDouble2);

//7 And use these values for your csharp lists/arrays...

  } 
```

我没有测试这段代码。它只是为您的情况从我的情况下重写的。希望这会有所帮助。

菲利普

# ruby-on-rails-3 - Rails 3 has_many 通过 3 个表

> ID：14761414
> 
> 赞同：1
> 
> 时间：2013-02-07T21:34:42.727
> 
> 标签：ruby-on-rails-3, database-design, has-many-through, belongs-to

用这个敲打我的头，我问过类似的问题，但一无所获。所以我有三张桌子 Superheros、Powers 和 Teams。一个超级英雄可以有许多权力和许多团队，一个权力可以与许多超级英雄相关，而一个团队由许多超级英雄组成。我决定将这些保存到一个大的关系表（我称之为 Marvel）

这是我设置的：

```
class Superhero < ActiveRecord::Base
  attr_accessible :name, :power_ids, :team_ids, :attributes_marvels

  has_many :marvels, :dependent => :destroy
  has_many :powers, :through => :marvels
  has_many :teams, :through => :marvels
  accepts_nested_attributes_for :marvels
end

class Power < ActiveRecord::Base
  attr_accessible :name

  has_many :marvels, :dependent => :destroy
end

class Team < ActiveRecord::Base
  attr_accessible :name

  has_many :marvels, :dependent => :destroy
end

class Marvel < ActiveRecord::Base
  attr_accessible :power_id, :superhero_id, :team_id

  belongs_to :superhero
  belongs_to :power
  belongs_to :team
end 
```

这是创建超级英雄的表格：

```
<%= form_for(@superhero) do |f| %>
 <div class="field">
  <%= f.label :name %><br />
  <%= f.text_field :name %>
 </div>
<div class="field">
 <p>Please select which team you work for:</p>
 <%= f.collection_select(:team_ids, Team.all(:order=>:name), :id, :name, {:prompt => true}) %>
 </div>
 <div class="field">
<p>Please check all powers that apply to you.</p>
<% Power.all.each do |power| %>
     <label class="checkbox">
     <%= check_box_tag "superhero[power_ids][]", power.id, @superhero.power_ids.include?(power.id) %>
     <%= power.name %>
    </label>
    <% end %>
 </div>
 <div class="actions">
  <%= f.submit %>
 </div>
<% end %> 
```

超级英雄控制器

```
 def new
   @superhero = Superhero.new
  end

  def create
   @superhero = Superhero.new(params[:superhero])
  end 
```

我创建这种方式是因为我希望能够在表单中询问（复选框）权力列表，（下拉）团队列表，现在根据这些标准向我显示超级英雄列表。

我几乎可以正常工作，但是保存时遇到问题，我在记录器文件中注意到它给了我这个：

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"sgD0NIjDM8QhMdzSsb7M/+PFd+FxMtNeOGukrdw9qFA=", "superhero"=>{"name"=>"Storm", "team_ids"=>"3", "power_ids"=>["1"]}, "commit"=>"Create Superhero"}

INSERT INTO "superheros" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Thu, 07 Feb 2013 19:59:24 UTC +00:00], ["name", "Storm"], ["updated_at", Thu, 07 Feb 2013 19:59:24 UTC +00:00]]

INSERT INTO "marvels" ("created_at", "power_id", "superhero_id", "team_id", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Thu, 07 Feb 2013 19:59:24 UTC +00:00], ["power_id", nil], ["superhero_id", 8], ["team_id", 3], ["updated_at", Thu, 07 Feb 2013 19:59:24 UTC +00:00]]

INSERT INTO "marvels" ("created_at", "power_id", "superhero_id", "team_id", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Thu, 07 Feb 2013 19:59:24 UTC +00:00], ["power_id", 1], ["superhero_id", 8], ["team_id", nil], ["updated_at", Thu, 07 Feb 2013 19:59:24 UTC +00:00]] 
```

为什么它会插入两次，当您可以清楚地看到参数中的值时，为什么会有 Nil 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:35:50.697

您需要在表的两侧创建依赖关系：

```
class Superhero < ActiveRecord::Base
  attr_accessible :name, :power_ids, :team_ids, :attributes_marvels

  has_many :marvels, :dependent => :destroy
  has_many :powers, :through => :marvels
  has_many :teams, :through => :marvels
  accepts_nested_attributes_for :marvels
end

class Power < ActiveRecord::Base
  attr_accessible :name

  `has_many :superheros, :through => :marvels`
  has_many :marvels, :dependent => :destroy
end

class Team < ActiveRecord::Base
  attr_accessible :name

  `has_many :superheros, :through => :marvels`
  has_many :marvels, :dependent => :destroy
end

class Marvel < ActiveRecord::Base
  attr_accessible :power_id, :superhero_id, :team_id

  belongs_to :superhero
  belongs_to :power
  belongs_to :team
end 
```

通过这种方式，您可以在 Marvels 中为每个模型添加 ID 密钥，并且可以访问它们，请在 assosiations guide 中查看

# asp.net - 将 SQL 查询的返回保存在字符串数组中，不适用于 ASP.NET

> ID：14761417
> 
> 赞同：-2
> 
> 时间：2013-02-07T21:34:53.943
> 
> 标签：asp.net, sql, sql-server

我在 SQL Server 上测试了查询，它可以工作，但不能在 C# 上工作。错误消息指向我的查询返回的变量的存储机制，但我认为问题可能是查询本身。

在 Delphi 中，有一种方法可以调试查询语句（`showMessage`statement）。

例如：-

```
DMS.ADOQuery1.SQL.Clear;
DMS.ADOQuery1.SQL.Add('select FIRSTNM, LASTNM, STREET, STREET2, CITY, STATE, ZIP, MEMBERKEY, MEMBID, BIRTH' +
        ' from MEMBER' +
        ' where MEMBID = ''' + Mem_ID + ''''
       );
showmessage(DMS.ADOQuery1.SQL[0]); 
```

***有没有办法在 C# 中做类似的事情？谁能看一下，让我知道为什么 SQL 查询在 ASP.net 中不起作用但在 SQL Server 中起作用？***

```
// initialize
string [] HPCODE = new string[20] ;
string [] OPFROMDT = new string [20] ;
string [] OPTHRUDT = new string [20] ;

// Second SQL Query to find out eligibility information about the requested Member. // 
SqlConnection Connection1 = new SqlConnection(DBConnect.SqlServerConnection);
String strSQL1 = "SELECT MEMBER, HPCODE, convert(varchar, OPFROMDT, 101) as OPFROMDT, convert(varchar, OPTHRUDT, 101) as OPTHRUDT FROM [main].[dbo].[MEMBER] INNER JOIN [main].[dbo].[MEMBHP] ON MEMBER.MEMBERKEY = MEMBHP.MEMBERKEY and opthrudt >= opfromdt INNER JOIN [main].[dbo].[HPCONTRACT] ON MEMBHP.HPCODEKEY = HPCONTRACT.HPCODEKEY INNER JOIN [main].[dbo].[LOB] ON HPCONTRACT.LOB_KEY = LOB.LOB_KEY where MembID = @memID";
SqlCommand command1 = new SqlCommand(strSQL1, Connection1);
//command1.Parameters.AddWithValue("@memID", memID);

// SQL reader variable is set.
SqlDataReader Dr1;
// Connection is explicitly opened.
Connection1.Open();
// Reader is executed.
Dr1 = command1.ExecuteReader();

int i = 0;

while (Dr1.Read())
{
//    if (memID == Dr["MEMBID"].ToString() )
//     {
// store subID in the Global variable called ID.

    HPCODE[i]   = (Dr1["HPCODE"].ToString()).TrimEnd();
    OPFROMDT[i] = (Dr1["OPFROMDT"].ToString()).TrimEnd();
    OPTHRUDT[i] = (Dr1["OPTHRUDT"].ToString()).TrimEnd();

    i = i + 1; 
//     }
}

// Reader variable must always be explicitly closed to prevent memory leaks.
Dr1.Close(); 
```

**错误：**

> *用户代码未处理的索引超出范围异常：=HPCODE*

**注意：-**
`Parameters.AddwithValue`未注释，因为它是在我之前的代码部分中预定义的。如果解决方案这么简单，我会自己解决。***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T21:49:12.453

```
// initialize
string [] HPCODE = new string[20] ;
string [] OPFROMDT = new string [20] ;
string [] OPTHRUDT = new string [20] ; 
```

返回的行数超过 20 行，因此在尝试填充循环中的第 21 行时出错。这不是 SQL 问题。这是一个编码问题。

作为快速修复，您可以执行以下操作。但是，如果所有信息都相关，您可能希望创建一个类来保存您的信息并创建`List`该类。

```
// initialize
List<string> HPCODEs = new List<string>();
List<string> OPFROMDTs = new List<string>();
List<string> OPTHRUDTs = new List<string>(); 
```

在您的循环中，您需要以下内容：

```
HPCODEs.Add((Dr1["HPCODE"].ToString()).TrimEnd());
OPFROMDTs.Add((Dr1["OPFROMDT"].ToString()).TrimEnd());
OPTHRUDTs.Add((Dr1["OPTHRUDT"].ToString()).TrimEnd()); 
```

# html - 浏览器错误解释 URL 中的“¬”

> ID：14761418
> 
> 赞同：12
> 
> 时间：2013-02-07T21:34:55.670
> 
> 标签：html, browser, html-parsing

显然，如果包含文本的 URL`&not`用作字段属性的一部分，许多浏览器会将其解释为['¬'](http://webref.info/?ID=12071)。所以这个 HTML 代码：

```
<a href="#" onclick="window.location='http://www.example.com?some_param=1&notify=true';">Click here</a> 
```

将呈现为：

```
<a href="#" onclick="window.location='http://www.example.com?some_param=1¬ify=true';">Click here</a> 
```

我找到了几个替代方案，方法是替换`&not`为`&%6Eot`，或者通过发布表单而不是获取参数化 URL。但是 POST 并不总是一个受欢迎的替代方案，替换无疑是一种 hack——它还需要处理其他常见的标记，如`&cent`, `&curren`, `&pound`, `&sect`, `&copy`, `&reg`... （列表取自[此处](https://www.x.com/developers/paypal/forums/ipn/pdt/paypal-ipn-problem-not-and-current)）。

肯定有人对此有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-07T21:36:28.037

元素属性由 HTML 解析器解释，因此您必须`&`将字符转义为`&amp;`. 即使您不这样做，它也可以在大多数情况下工作，但是在某些情况下（例如您的情况），您必须“正确”地进行操作，否则它将无法正常工作。

# arrays - 对元胞数组的成员大小求和

> ID：14761421
> 
> 赞同：4
> 
> 时间：2013-02-07T21:35:02.243
> 
> 标签：arrays, matlab

我有一个单元阵列，

```
a=cell(2,1); 
a{1,1}=[1 2 3];
a{2,1}=[4 5]; 
```

我需要计算字段长度的总和`a`，即答案应该是`3+2=5`。这可以使用`for`循环来完成，

```
sum=0;
for i=1:size(a,1)
    sum = sum + size(a{i},2); 
end 
```

但是，我需要一个没有循环的行命令。有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T21:44:24.403

对于单线，使用`cellfun`

```
sum(cellfun(@length,a)) 
```

`cellfun`将命令应用于 的`length`每个元素`a`，然后`sum`添加输出。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T21:45:21.690

你可以这样做：

```
length( [ a{:} ] ) 
```

# api - 使用 ServiceStack 的 Swagger 插件，如何实现带有预设值列表的字符串字段

> ID：14761424
> 
> 赞同：4
> 
> 时间：2013-02-07T21:35:15.717
> 
> 标签：api, servicestack, swagger

我正在使用 ServiceStack 的新 Swagger 插件实现 Swagger API 文档，并试图确定如何使用“容器”数据类型。我需要显示一个字符串字段，该字段具有预定值列表和其他作为子对象列表的参数。

除非我遗漏了一些东西，否则我相信 swagger 只能采用一个文本字段，您可以为您的子对象列表输入 JSON。我相信这段代码应该可以解决问题。

```
[ApiMember(Name = "Connections", Description = "insert JSON sample here", ParameterType = "body", DataType = "container", IsRequired = false, Verb = "Post")] 
```

我不知道（希望有人可以帮助我）是否有可能拥有一个来自预设值列表的字符串字段。在 Swagger 中，此代码片段说明了如何执行此操作。

```
"Pet":{
    "id":"Pet",
    "properties":{
    ...
      "status":{
        "type":"String",
        "description":"pet status in the store",
        "allowableValues":{
          "valueType":"LIST",
          "values":[
            "available",
            "pending",
            "sold"
          ]
        }
      },
      "happiness": {
        "type": "Int",
        "description": "how happy the Pet appears to be, where 10 is 'extremely happy'",
        "allowableValues": {
          "valueType": "RANGE",
          "min": 1,
          "max": 10
        }
      },
      ... 
```

有谁知道这是如何使用 ServiceStack.Api.Swagger 完成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T22:43:24.213

我一直在为同样的问题而苦苦挣扎，但意识到目前不支持此功能。您基本上不能使用模型 POST 或 PUT 数据。此功能正在不断变化且正在开发中，所以我猜它在待办事项列表中。

如果查看源代码，您将看到[ResourcesResponse](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Api.Swagger/SwaggerResourcesService.cs#L19)数据协定中不`Models`支持任何属性：

```
[DataContract]
public class ResourcesResponse
{
    [DataMember(Name = "swaggerVersion")]
    public string SwaggerVersion { get; set; }
    [DataMember(Name = "apiVersion")]
    public string ApiVersion { get; set; }
    [DataMember(Name = "basePath")]
    public string BasePath { get; set; }
    [DataMember(Name = "apis")]
    public List<RestService> Apis { get; set; }
} 
```

如果您将此与 Wordnik 上的 Petstore 示例进行比较，您会发现模型作为根节点包含在内：

```
{
   "apiVersion":"0.2",
   "swaggerVersion":"1.1",
   "basePath":"http://petstore.swagger.wordnik.com/api",
   "resourcePath":"/pet",
   "apis":[
      {
         "path":"/pet.{format}",
         "description":"Operations about pets",
         "operations":[
            {
               "httpMethod":"POST",
               "summary":"Add a new pet to the store",
               "responseClass":"void",
               "nickname":"addPet",
               "parameters":[
                  {
                     "description":"Pet object that needs to be added to the store",
                     "paramType":"body",
                     "required":true,
                     "allowMultiple":false,
                     "dataType":"Pet"
                  }
               ],
               "errorResponses":[
                  {
                     "code":405,
                     "reason":"Invalid input"
                  }
               ]
            }
         ]
      }
   ],
   "models":{
      "Category":{
         "id":"Category",
         "properties":{
            "id":{
               "type":"long"
            },
            "name":{
               "type":"string"
            }
         }
      },
      "Pet":{
         "id":"Pet",
         "properties":{
            "tags":{
               "items":{
                  "$ref":"Tag"
               },
               "type":"Array"
            },
            "id":{
               "type":"long"
            },
            "category":{
               "type":"Category"
            },
            "status":{
               "allowableValues":{
                  "valueType":"LIST",
                  "values":[
                     "available",
                     "pending",
                     "sold"
                  ],
                  "valueType":"LIST"
               },
               "description":"pet status in the store",
               "type":"string"
            },
            "name":{
               "type":"string"
            },
            "photoUrls":{
               "items":{
                  "type":"string"
               },
               "type":"Array"
            }
         }
      },
      "Tag":{
         "id":"Tag",
         "properties":{
            "id":{
               "type":"long"
            },
            "name":{
               "type":"string"
            }
         }
      }
   }
} 
```

我认为解决这个问题的唯一方法是自己发布整个对象。拥有一个接受整个对象的请求对象，例如 Pet。设置`ParameterType`to`body`和`DataType`to `Pet`。在 Swagger 界面中，您将看到一个文本区域，您必须将实际的 JSON 对象粘贴到其中。您的请求将如下所示：

```
[Api("The Thing Service")]
[Route("/thing", "POST", Summary = @"POST a new thing", Notes = "Send a thing here")]
public class ThingRequest
{
    [DataMember]
    [ApiMember(Name = "Thing", Description = "The thing", ParameterType = "body", DataType = "Thing", IsRequired = false)]
    public ThingDto Thing { get; set; }
} 
```

你的服务是这样的：

```
/// <summary>
/// Summary description for ThingService
/// </summary>
public class ThingService : Service
{
    public IThingRepository ThingRepository { get; set; }

    public object Post(ThingRequest request)
    {
        var thing = Thing.Map(request);
        ThingRepository.Save(thing);
        return new ThingResponse();
    }
} 
```

将呈现以下内容：

![大摇大摆的输出](../Images/d7cb5cf8503191d81f6875060e30c651.png)

像这样输入对象，请求将被正确解析：

![在此处输入图像描述](../Images/99eeef7307c5e13c01de9a18d587ef08.png)

# python - 如何在 if 语句中匹配它

> ID：14761429
> 
> 赞同：0
> 
> 时间：2013-02-07T21:35:33.347
> 
> 标签：python, django

我正在使用 Django 表单向导。在这一部分中，我想使用 if 语句：

```
def get_form_initial(self, step):
        if step =='2':
                x = self.get_cleaned_data_for_step('0') or {}
                if x['Color']  == 'Red': 
```

无论我尝试什么，我都不会得到 x['Color'] 匹配 'Red'

我检查并 x 获取值：

```
{'Color': <Products: Red>} 
```

我还尝试了 x['Color']['Products'] == 'Red' （以及许多其他选项），但这导致了一条错误消息。

这可能很容易，但我无法弄清楚......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:38:52.640

由于您没有指定您正在使用的模型和表单，所以我将来到这里，但我希望它必须是这样的：

```
def get_form_initial(self, step):
        if step =='2':
                x = self.get_cleaned_data_for_step('0') or {}
                if x['Color'].color  == 'Red': 
```

从我可以收集的内容中`x['Color']`返回一个对象，我在这里看不到它有什么属性。`Products`要调试，您可以尝试打印`x['Color'].__dict__`

# sql - 使用“REPLACE”匹配列名，然后加入表 - SSMS

> ID：14761431
> 
> 赞同：0
> 
> 时间：2013-02-07T21:35:41.873
> 
> 标签：sql, ssms

我有下表 - 称之为 Table1：

```
SIMULATION  PRODUCT               PERIOD    OUTPUT_OL_EstRes
0           USSIC_Aviation        2012Q3    25787698
0           Avemco_Aviation       2012Q3    13374366
0           HC_Houston_Aviation   2012Q3    41626488
0           Other_Aviation        2012Q3    700829
0           Disability            2012Q3    8566175 
```

我正在尝试加入下表 - 称之为 Table2：

```
RptLOB                RptLOBPrintOrder  RptSegt
USSIC Aviation        1                 US Property & Casualty
Avemco Aviation       2                 US Property & Casualty
HC Houston Aviation   3                 US Property & Casualty
Other Aviation        4                 US Property & Casualty
Disability            5                 US Property & Casualty 
```

使用以下代码：

```
select a.SIMULATION, REPLACE(a.PRODUCT,'_',' ') as PRODUCT, a.PERIOD, a.OUTPUT_OL_EstRes , b.RptLOBPrintOrder, b.RptSegt
from Table1 as a
left join Table2 as b
on a.PRODUCT=b.RptLOB 
```

我在 RptLOBPrintOrder 和 RptSegt 列上得到 NULL 值（值 Disability 除外，因为我不必去掉下划线）。我确保摆脱了“_”，所以我不太确定为什么会发生这种情况。输出表如下：

```
SIMULATION  PRODUCT                 PERIOD  OUTPUT_OL_EstRes    RptLOBPrintOrder    RptSegt
0           USSIC Aviation          2012Q3  25787698            NULL                NULL
0           Avemco Aviation         2012Q3  13374366            NULL                NULL
0           HC Houston Aviation     2012Q3  41626488            NULL                NULL
0           Other Aviation          2012Q3  700829              NULL                NULL
0           Disability              2012Q3  8566175             5                   US Property & Casualty 
```

任何帮助将不胜感激！有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:39:18.317

询问：

**[SQLFIDDLEX示例](http://sqlfiddle.com/#!3/2b347/2)**

```
SELECT a.SIMULATION,
       REPLACE(a.PRODUCT,'_',' ') AS PRODUCT,
       a.PERIOD,
       a.OUTPUT_OL_EstRes ,
       b.RptLOBPrintOrder,
       b.RptSegt
FROM Table1 AS a
LEFT JOIN Table2 AS b ON REPLACE(a.PRODUCT,'_',' ')=b.RptLOB 
```

结果：

```
| SIMULATION |             PRODUCT | PERIOD | OUTPUT_OL_ESTRES | RPTLOBPRINTORDER |                RPTSEGT |
------------------------------------------------------------------------------------------------------------
|          0 |      USSIC Aviation | 2012Q3 |         25787698 |                1 | US Property & Casualty |
|          0 |     Avemco Aviation | 2012Q3 |         13374366 |                2 | US Property & Casualty |
|          0 | HC Houston Aviation | 2012Q3 |         41626488 |                3 | US Property & Casualty |
|          0 |      Other Aviation | 2012Q3 |           700829 |                4 | US Property & Casualty |
|          0 |          Disability | 2012Q3 |          8566175 |                5 | US Property & Casualty | 
```

# java - 拆分逗号分隔的字符串并提取特定值

> ID：14761433
> 
> 赞同：0
> 
> 时间：2013-02-07T21:35:48.450
> 
> 标签：java, regex, string, parsing

我有一个查询连接两列的值并返回一个字符串，如下所示：

```
423545(50),AXX-10, ABB-1234X(30), 7568787(50),53654656,2021947(50),ABCD-2343423,FDKHD-324342(20), 
```

我想拆分该字符串并将其放入一个数组中，丢弃括号中的所有值。输出如下图所示：

```
[423545,AXX-10, ABB-1234X, 7568787,53654656,2021947,ABCD-2343423,FDKHD-324342] 
```

*   字符串末尾的逗号是可选的
*   并非所有列都包含括号中的值

我知道我可以使用 String.split() 但字符串末尾的可选括号值和逗号使其复杂化。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:40:35.883

您可以分成两种模式：-

*   One on `\\(\\d+\\),[ ]*`，它将处理括号中的术语
*   其次`,[ ]*`，这将适用于正常的`,`分离值。

您只需要使用 a 合并这些正则表达式`pipe(|)`，然后立即执行拆分。

因此，您的拆分标准变为：-

```
str.split("(?:\\(\\d+\\),[ ]*)|(?:,[ ]*)"); 
```

可以进一步简化为：-

```
str.split("(?:\\(\\d+\\))?,[ ]*"); 
```

我们只是做了一个可选的部分，把公共部分放在外面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:52:42.130

就像是

```
([a-zA-Z\-\d]+)[()\d]*,* 
```

? 我在[这里](http://www.cis.upenn.edu/~matuszek/General/RegexTester/regex-tester.html)对其进行了测试，它似乎有效：如果第 0 个是整个匹配项，那么您将令牌插入到第 1 组的结果字符串中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T22:03:34.650

您可以过滤掉括号中的值，然后拆分。

```
 String str = "423545(50),AXX-10, ABB-1234X(30), 7568787(50),53654656,2021947(50),ABCD-2343423,FDKHD-324342(20)";

    String str2 = str.replaceAll("\\(\\d+\\)", "");
    for (String string : str2.split(",")) {
        System.out.println(string);
    } 
```

# android - 用于 ACRA 的 Bugsense 的任何替代品

> ID：14761435
> 
> 赞同：9
> 
> 时间：2013-02-07T21:35:57.077
> 
> 标签：android, acra, bugsense

我在 Android 中使用 Bugsense 作为 ACRA 的后端。Bugsense 很好，报告演示也很好。

我面临的问题是它每月只允许 500 个免费报告。

我正在寻找可以在我的服务器上托管并拥有无限报告的替代品。

Kevin Gaudin 正在开发[Acralyzer](https://github.com/ACRA/acralyzer)，但看起来它仍在进行中。

他们还有其他选择吗？

附言

本题属于FAQ**程序员常用的软件工具。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T12:01:42.607

现在有许多更高级的移动和网络分析平台，如 **flurry、mixpanel、*crittercism*、zubhium**。我发现**crittercism**对移动应用性能监控和崩溃报告更有用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T21:43:39.680

它不是 ACRA 的后端，但您可以使用 . [适用于 Android 的谷歌分析](https://developers.google.com/analytics/devguides/collection/android/)

他们也支持 Crahes 和 Exception。看[这里](https://developers.google.com/analytics/devguides/collection/android/v2/exceptions)

//编辑：对不起，我跳过了你想在你自己的服务器上托管的部分。我的错

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-19T08:03:53.370

您可以使用[TestFlight](https://testflightapp.com/)进行崩溃报告。请注意，它在内部使用 ACRA。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-11T18:54:50.513

[ACRA 的创建者推出了一个名为Acralyzer](https://github.com/ACRA/acralyzer)的开源项目作为 ACRA 的后端。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T03:40:02.693

这在 App Engine 上运行，而不是在您自己的服务器上运行，但看起来不错：[http](http://code.google.com/p/acra-reporter/) ://code.google.com/p/acra-reporter/ 。

（旧）ACRA 文档中也有一些链接：[http ://code.google.com/p/acra/wiki/Contribs](http://code.google.com/p/acra/wiki/Contribs)

# php - 如何检查内容是否已经在数据库中，如果没有，则输入它？

> ID：14761439
> 
> 赞同：0
> 
> 时间：2013-02-07T21:36:07.550
> 
> 标签：php, mysql, wordpress

我制作了一个简单的 php 类，它从 astrology.com 中提取星座的每日星座运势，我想在 wordpress 中使用它（使用 $wpdb）。

工作原理（理论上）：

1.  检查内容是否已经在数据库中（并返回）。
2.  如果内容不在数据库中，则添加它（调用我制作的 php 类）。
3.  如果该类没有返回内容，则检查数据库是否有前一天的条目并将其返回。
4.  如果这些都不起作用，则返回错误消息

问题是我被困在第 2 点和第 3 点之间……（我不知道如何检查课程是否返回了一些内容，如果不显示前一天的内容）

```
<?php require('./wp-blog-header.php');

$horoscope = new Horoscope(); global $wpdb;

$config = array('sign' => 'cancer',
                'type' => 'daily',
                'date' => date('Y-m-d'),);

$query = $wpdb->get_results("SELECT * FROM `wp_horoscope` WHERE zodiacal_sign = '".$config['sign']."' AND last_updated = '".$config['date']."';", ARRAY_A);

// step 1
if( $query && $query['0']['content'] != '' ){ $content = $query['0']['content']; }

// step 2
elseif( empty($query) || $content === '' ){
$content = $horoscope->get_daily_horoscope($config);
$fetched_content = $content;
$update = $wpdb->prepare("INSERT INTO `wp_horoscope` (`last_updated`, `content`, `zodiacal_sign`) values (%s,%s,%s)", $config['date'], $content, $config['sign']);
$wpdb->query($update);}

// step 3
elseif( $fetched_content === '' ) { // if previous function `get_daily_horoscope` does not return any content return the content for previous day
$yesterday_date = date('Y-m-d', strtotime('- 1 day'));
$query = $wpdb->get_results("SELECT * FROM `wp_horoscope` WHERE zodiacal_sign = '".$config['sign']."' AND last_updated = '".$yesterday_date."';", ARRAY_A);
$content = $query['0']['content']; }

// step 4
else{$content = 'The information is not in the DB';}

echo $content;

?> 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:45:08.260

在我看来，您永远不会进入第 3 步，因为第 2 步满足了您对第 3 步的情况。

```
elseif( a || b) {

}
elseif( b ) {

} 
```

如果 b 为真，则永远不会到达 elseif(b)，因为 b 在 elseif(a || b) 中已经为真。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T21:41:56.340

您总是会`// step 2`因为内容未初始化而命中，因此`elseif ( empty($query) || $content == '' )`将始终返回 true，因为未声明的`$content`将“等于”''。

您可以尝试：（`$content === ''`注意额外的“=”），除非它实际上是一个空字符串，否则它不会是真的。

# php - 下载名称中包含非 ASCII 字符的文件

> ID：14761441
> 
> 赞同：0
> 
> 时间：2013-02-07T21:36:11.850
> 
> 标签：php, html, apache, filenames

我的网站允许用户上传任何名称的文件。当然，有些名称将包含非 ASCII 字符。当用户上传文件时，我将其保存在具有原始名称的文件夹中。但是，当我尝试下载它时，通过访问它的位置（例如，`files/Tolstoy - How much land does a man need?.pdf`），我得到一个 404。有没有办法解决这个问题，使文件保持原来的名称？通过 Apache，也许？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:38:29.790

嗯，只是使用 url 编码，也称为[百分比编码](http://en.wikipedia.org/wiki/Percent-encoding)？这是为了处理 web.xml 中的 url。所有打印到 HTML 的 url 都应该是 url 编码的。

对于 PHP，应该使用[rawurlencode ，因为它应该符合标准，而](http://php.net/rawurlencode)[urlencode](http://www.php.net/manual/en/function.urlencode.php)不是。

编辑：对于这个问题

> PHP 将“é”编码为“e%26%23769%3B”，而不是“e%CC%81”

`e%CC%81`将是 UTF-8 用于`é`. `e%26%23769%3B`将是 for `e&#769;`，它是相同的 HTML 实体。这意味着您在 urlencoding 之前在那里进行显式 htmlentities() 调用，或者您的服务器设置会自动执行此操作。如果有适当的字符集（实际上只需要 htmlspecialchars 调用），则不需要它，但它也不应该破坏任何东西。

一些在线工具，如果你想测试这些：

*   [http://htmlentities.net/](http://htmlentities.net/)测试来回转换html实体
*   [http://www.hypergurl.com/urlencode.html](http://www.hypergurl.com/urlencode.html)来回测试 url 编码，使用 UTF-8 和 ASCII

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:39:23.877

解决方法：在上传时将文件名转换为 ASCII。你会很高兴的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:54:06.027

好吧，出于某种我仍然不明白的原因，使用`rawurlencode()`而不是`urlencode()`使它起作用。

然而，这个字符`é`（我敢肯定）仍然被奇怪地编码（`e%26%23769%3B`而不是简单地`%C3%A9`）。更奇怪的是包含它的链接有效。

# r - 粘贴函数参数的名称以在函数体中使用

> ID：14761442
> 
> 赞同：3
> 
> 时间：2013-02-07T21:36:12.490
> 
> 标签：r

我试图在我的函数体内连接我的函数的参数，以便在预兆内进一步评估。我经历了许多代码*改进*试图解决这个问题，但不能。

`Example:`在提供类似 的函数调用时`fun(x,y)`，我希望能够粘贴我为`x`、 输入`$`的字符以及我为 y 输入的字符，以调用数据集中的一个字段进行分析。`car`因此，如果我为参数`x`和`toyota`参数提供字符`y`，我将获得`car$toyota`变量名以在函数体中使用。

我试过了：

```
gtData <- function(data,field,k)
d <- diff(data$field)  ## I also tried sum(data$field) to eliminate issues with diff() 
```

但`d`评估为`0` ## 我知道这不是因为当我运行代码时`diff(car$toyota)`我得到了正确的答案。我不认为它在做我想让它做的事情。我还尝试将参数粘贴到正文中，如下所示：

```
gtData(data,field,k)
a <- paste(data,"$",field) 
```

它抱怨`toyota`不存在，因为丰田不是数据集，而是数据集中的一个字段。

我尝试了许多其他变体，似乎`paste()`无法在这里做我想做的事情。

我想要得到的是字符串`car$toyota`，所以我可以将它作为变量传递到身体的下方，以进行进一步的评估。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T22:09:25.627

好记`fortune(312)`

```
The problem here is that the $ notation is a magical shortcut and like any other magic if used incorrectly
is likely to do the programmatic equivalent of turning yourself into a toad.
   -- Greg Snow (in response to a user that wanted to access a column whose name is stored in y via x$y
      rather than x[[y]])
      R-help (February 2012) 
```

你想要的`[[`不是`$`

```
gtData <- function(data,field,k){
  a <- data[[field]]
} 
```

* * *

粘贴在这里绝对是错误的。

编辑——部分匹配

如果您想允许部分匹配，您可以将`exact`for设置`[[`为`FALSE`或`NA`。从`?`[[``

> 值 NA 允许部分匹配，但在发生时会发出警告。值 FALSE 允许部分匹配而没有任何警告。

然后再次

> x$name 等价于 x[["name", exact = FALSE]]。

* * *

根据您的评论。我认为您需要查看[R 手册 2.1.8](http://cran.r-project.org/doc/manuals/r-release/R-lang.html#Function-objects)和[Hadley 的 devtools wiki](https://github.com/hadley/devtools/wiki/Functions)，了解函数参数和承诺的方式

> Promise 对象是 R 的惰性求值机制的一部分。它们包含三个槽：一个值、一个表达式和一个环境。当一个函数被调用时，参数是匹配的，然后每个形式参数都绑定到一个 Promise。为该形式参数给出的表达式和一个指向调用该函数的环境的指针存储在 Promise 中。
> 
> 在访问该参数之前，没有与该承诺关联的值。当参数被访问时，存储的表达式在存储的环境中被计算，并返回结果。结果也被 promise 保存了。替换函数将提取表达式槽的内容。这允许程序员访问与 promise 关联的值或表达式。

所以当你通过

```
gtData(data = mtcars, field = mpg) 
```

参数`data`是一个promise，`mtcars`当它在函数中被访问时，它的值将是来自调用环境的对象。

如果`field`您想访问字符串`"mpg"`而不是调用环境中关联的值`mpg`，如手册中所建议的那样，惯用的方法是使用`deparse(substitute())`

例如

```
gtData <- function(data,field,k){
  fieldChar <- deparse(substitute(field))
  a <- data[[fieldChar]]
} 
```

这样做的危险是，如果你认为你可以`field`在函数内访问，在这种情况下它会被评估，并且会给出一个错误（如果它在调用环境中不存在），或者可能是一个意外的值如果它*被*定义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:23:05.883

感谢 mnel，我意识到使用 $ 而不是“[”是问题所在。他还提供了很好的参考资料。

但解决方案很简单。与其用名称调用函数内部的字段，不如通过其编号调用它。所以 data[,x] 没有问题。

谢谢 mnel

# c++ - 未经用户许可将数据发送到特定计算机？C++

> ID：14761443
> 
> 赞同：0
> 
> 时间：2013-02-07T21:36:18.010
> 
> 标签：c++, networking

我最近有一些人来测试我的游戏，用 C++ 编程，所以我可以改进它。

我还添加了一个收集数据的功能，并希望始终能够访问该文件（一个 .txt 文件）

由于我没有静态 IP 地址，因此通过它发送它会非常棘手。

我需要这个功能，因为我不想一直为 .txt 文件而打扰测试我游戏的人。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:43:36.887

您的程序应该将信息发送到网络服务器（我假设您可以以最低的费用获得一个小型托管数据包），您的监控界面也可以是一个网络应用程序。

也不要忘记在程序中的某处打印它收集数据用于测试目的。

# json - 迁移以使用 Jackson 和 Jersey 时的向后兼容性问题

> ID：14761444
> 
> 赞同：0
> 
> 时间：2013-02-07T21:36:24.830
> 
> 标签：json, serialization, jersey, jackson, backwards-compatibility

我正在使用 Jersey 1.16 为我的客户端应用程序提供宁静的服务。

我正在尝试从默认的 Jersey JSON 序列化程序转移到使用基于这个优秀博客条目的杰克逊：

[http://crazytechbuddy.blogspot.co.il/2012/06/making-jersey-to-use-jackson-instead-of.html?showComment=1360271858862#c6459334450173933715](http://crazytechbuddy.blogspot.co.il/2012/06/making-jersey-to-use-jackson-instead-of.html?showComment=1360271858862#c6459334450173933715)

它工作得很好，似乎正是我想要的。但是，它现在为我的宁静服务带来了向后兼容性问题。

例如：我曾经序列化的时间戳字段`"timestamp":"2012-12-25T14:22:24+02:00"`现在序列化为`"timestamp":1356438144000`.

有没有办法选择仅在特定请求上激活基于杰克逊的新序列化模式（可能使用版本参数，我必须决定使用哪种类型的序列化）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:16:21.520

Jackson 有很多序列化选项。在您的情况下，您需要设置：

```
private ObjectMapper mapper = new ObjectMapper();
mapper.configure(SerializationConfig.Feature.WRITE_DATES_AS_TIMESTAMPS, false); 
```

如果您使用的是 Jackson 1.x 或

```
private ObjectMapper mapper = new ObjectMapper();
mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false); 
```

如果您使用的是 Jackson 2.x。

要允许 Jersey 访问您的自定义`ObjectMapper`，您需要创建一个提供程序：

```
@Provider
public class ObjectMapperProvider implements ContextResolver<ObjectMapper>
{
  private final transient ObjectMapper mapper;

  @Inject
  public ObjectMapperProvider()
  {
    this.mapper = MyMapper.getMapper();
  }

  @Override
  public ObjectMapper getContext(final Class<?> type)
  {
    return this.mapper;
  }
} 
```

在哪里`MyMapper.getMapper()`返回您的自定义`ObjectMapper`。

# entity-framework-4 - 如何修复由实体框架在 Visual Studio 错误列表窗口中引发的错误错误 6036

> ID：14761450
> 
> 赞同：0
> 
> 时间：2013-02-07T21:36:40.877
> 
> 标签：entity-framework-4, edmx

我更改了我的 edmx 文件，以便所有 EF 类都是内部的。在类内部，所有属性都标记为公共。项目编译，但我在 Visual Studio 的错误列表窗口中收到错误的错误消息。

```
Error 6036: EntityType 'A' has 'internal' accessibility and EntitySet 'B' has a get property with 'public' accessibility. The get property of the EntitySet must not have less restrictive access than the containing EntityType has. 
```

基本上我有这种情况

```
 internal class A
        {
        }

        internal class B
        {
            public A A
            {
                get { return new A(); }
            }
        } 
```

这段代码编译没有任何问题。

# batch-file - 批处理文件..从多行文本中获取一个字符

> ID：14761452
> 
> 赞同：0
> 
> 时间：2013-02-07T21:36:45.933
> 
> 标签：batch-file

我在 .txt 文件中有此文本

```
Job Status  : RUN OK (1)
Job Controller  : not available
Job Start Time  : Thu Feb 07 15:13:47 2013
Job Wave Number : 4
User Status : not available
Job Control : 0
Interim Status  : NOT RUNNING (99)
Invocation ID   : not available
Last Run Time   : Thu Feb 07 15:13:53 2013
Job Process ID  : 0
Invocation List : Param_Test_Job
Job Restartable : 0 
```

有没有一种方法可以让我在第 1 行的 () 之间获得数字 1（在 RUN OK 之后）以使用下游的条件逻辑。我正在尝试在批处理文件中实现这一点。

（此编号将始终位于第一行，并且文本“工作状态”也将始终存在）

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:28:17.920

无论出现哪一行作业状态，这都会起作用。如果 Job Status 出现多次，它将采用最后一次出现的值。

```
@echo off
for /f "tokens=2 delims=()" %%N in (
  'findstr /bc:"Job Status" test.txt'
) do set "result=%%N" 
```

# python - 如何在 Python 中处理小网格数据？

> ID：14761453
> 
> 赞同：3
> 
> 时间：2013-02-07T21:36:46.153
> 
> 标签：python, dictionary, multidimensional-array

我需要通过读取/更改一些 ID3 标签以及获取有关文件大小等的详细信息来处理文件夹中的所有 MP3 文件。最终目标是构建一个 RSS 文件，这样这些 MP3 将成为一个自定义播客。我看到每个文件可能需要多达 200 个文件（行？）和 5 或 6 条数据（列？）。需要读取所有数据，使用数据确定排序顺序，并构建 rss/xml 文件。不确定 Python 中处理数据的最佳方法。

看到这个“字典字典”的代码想法，但这看起来有点笨拙？

```
mydict = {'MP3_File_1.mp3': 
          {'SIZE': '123456789','MODDATE': '20120508', 'TRKNUM': '152'}, 
           'MP3_File_2.mp3': 
          {'SIZE': '45689654', 'MODDATE': '20120515', 'TRKNUM': '003'}, 
           'MP3_File_3.mp3': 
          {'SIZE': '98754651', 'MODDATE': '20130101', 'TRKNUM': '062'}} 
```

一个真正的数据库或 pyTables 似乎都是矫枉过正。我也在考虑创建一个自定义类，但在 Python 方面还没有足够的经验。是否有我缺少的模块/最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:44:39.557

我会创建一个自定义类来包含一个 MP3 文件，每个字段一个变量。这样，您可以轻松编写函数来修改这些字段。然后我会为每个文件构造一个对象（使用文件名作为构造函数的参数，并使用构造函数填充字段），并将所有对象放入一个列表中。此类将包含对对象进行排序所需的功能。最后，我将编写一个自定义函数来从该列表生成 XML 文件。

这不是唯一的方法，但我会这样做。

```
class Mp3file(object):
    def __init__(self, filename):
        # read the file
        self.name = filename
        self.size = ...
        self.moddate = ...
        self.track_num = ...
        ...

    def to_xml(self):
        return ...

    def __lt__(self):
         ....
    def __eq__(self):
         ....
    ...

mp3list = []
for filename in directory:
    mp3list.append(Mp3file(filename))

def mp3list_to_xml(mylist):
    # write preamble
    for mf in sorted(mylist):
        x = mf.to_xml()
        # Add x to xml
    # write footer 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T22:06:30.277

字典列表对我来说更有意义。

```
mp3s = [
      {'NAME': 'lalala.mp3', 'SIZE': '123456789','MODDATE': '20120508', 'TRKNUM': '152'}, 
      {'NAME': 'lelele.mp3', 'SIZE': '45689654', 'MODDATE': '20120515', 'TRKNUM': '003'}, 
      {'NAME': 'lululu.mp3', 'SIZE': '98754651', 'MODDATE': '20130101', 'TRKNUM': '062'}] 
```

如果要排序就这么简单：

```
sor = sorted(mp3s, key=lambda x: x['NAME']) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T23:35:10.723

为什么不直接使用[sqlite](http://docs.python.org/2/library/sqlite3.html)，它是免费捆绑的。

You get sorting & searching builtin and the databases are disposable so extra processes to manage.

Also the likelihood that as your code develops you'll want to add more attributes to you data and by then a dict etc. will become unmanageable.

It helps to be able to look a database select and think

> Yeah, my data looks good - the next part should be easy.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T22:41:03.290

也许是[`NamedTuple`s 的](http://docs.python.org/2/library/collections.html#collections.namedtuple)列表？元组应该是 Python AFAIK 中内存消耗最少的类型之一。

# javascript - Javascript 和 jQuery 的变量

> ID：14761460
> 
> 赞同：0
> 
> 时间：2013-02-07T21:37:11.223
> 
> 标签：javascript, jquery, syntax

`head`请在以下 3 行代码中解释 var 发生了什么（以及使用），而不是偶然发现它（我的理解有限） 。

```
<script type="text/javascript">
  var head = $("thead#tHead1").clone().removeAttr("class");
  $(head).find("#hRow2").remove();
  head = $(head).wrap("<thead>").parent().html(); 
```

**编辑**在第1 行设置然后将 head 分配给另一个值`$(head)`之后，在第 2 行代码上 使用有什么意义？`head =`

查看我学到的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:46:54.293

```
// Find an element, make a copy of it, and remove it's class
var head = $("thead#tHead1").clone().removeAttr("class");

// Within the cloned element (not on the DOM yet),
// Find an element within and then remove that found element.
$(head).find("#hRow2").remove();

// Wrap the cloned element in another element, giving it a parent.
// Traverse to that parent and return it's html content
head = $(head).wrap("<thead>").parent().html(); 
```

请注意`$(head)`这里不需要。那可以简单地`head`代替。您不需要将元素转换为 jQuery 包装的对象，因为它应该已经是一个。

* * *

此外，这是一个糟糕的代码。做它应该做的任何事情都是对 DOM 的一个笨拙的黑客攻击。相反，您应该使用某种模板引擎根据一些输入数据根据需要生成新的 DOM 片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:49:38.757

我将引导您完成以下工作：

1.  一个开始`<script>`标签，顺便说一下，它不需要`type`属性。

2.  找到`<thead>`id 的`tHead1`元素，复制包含子节点的元素，并`class`从新元素中删除属性，然后将新元素分配给`head`变量。

3.  `hRow2`删除我们之前创建的元素中 id的元素。

4.  将我们之前创建的元素包装在一个`thead`元素中，并将`head`变量重新分配为等于该 '' 元素的 innerHTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:05:09.593

从评论和进一步研究中，我认为这可以更好地写成：

```
var head = $("#tHead1").clone().removeAttr("class");   // clean & clone the head  
head.find("#hRow2").remove();                          // remove 2nd row
head = head[0].outerHTML;                              // get 'only' the desired html 
```

为了回答我自己的问题，（我不确定术语）`head =`在这种情况下最后一个是必要的，不显示`[object Object]`. 它不是一个对象，而是分配所需的 HTML（标题行），以便稍后在代码中使用几行。`console.log(head)`揭示了这个教训。我也不确定为什么不能将第 1 行和第 2 行链接起来，所以这是尽可能干净的。

这个练习的更高目的是在打印之前将一个大表分成单独的（45 行）表，在后续页面上只有 3 个标题行中的 2 个可见，并且不联系服务器或重新加载页面。我的方法是在第 n 行添加一个页尾类，完成上述操作，然后在该行之后 appendTo() 新表和标题。

# php - 基于用户选项的 PHP 动态 SQL SELECT 语句

> ID：14761462
> 
> 赞同：4
> 
> 时间：2013-02-07T21:37:27.683
> 
> 标签：php, mysql, sql, select

首先，我想提一下，我一直在疯狂地尝试和搜索以找到解决方案，但到目前为止还没有运气。我的问题如下：

我有一个包含几十行的 MySQL 数据库，我创建了一个 jQuery 网格来显示数据；这个页面已经在工作了。根据要求，我正在整理一个页面，人们可以在其中从复选框中选择几个选项并过滤结果。这就是它的工作方式：

第 1 页将有 3 组复选框（姓名、地点、语言），每组都有不同的选项（[姓名：大卫、尼克等]、[地点：纽约、华盛顿、孟买、伦敦、迈阿密]、[语言：英语，西班牙语]。一旦用户选择了他的选项，它将提交一个类似这样的表单

grid.php?location=华盛顿&location=孟买&language=英语&name=大卫

创建字符串很容易，但是接收这个参数并放置在一个数组中然后创建 SQL 语句的接收器是我苦苦挣扎的地方。

我试过这样的事情：

```
$location= $_GET['location'];
$language= $_GET['language'];
$name= $_GET['name'];

if($location!=""){
    $where[] = 'location=';
    $where_args[] = $location;
}
//same code for the other 2 options

$where_clause = implode(' OR ', $where_args);

$sql_json = "SELECT * FROM myTable WHERE $where_clause ORDER BY id DESC"; 
```

没有一个选项是强制性的，因此查询需要接受该值可能设置也可能不设置的可能性，因此它最终可能类似于 grid.php?language=English。

我知道上面的代码不太有效，但如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T21:47:03.327

试试这个：

```
<?php
$location= $_GET['location'];
$language= $_GET['language'];
$name= $_GET['name'];

if($location!=""){
    $where[] = " `location` = '".mysql_real_escape_string($location)."'";
}
if($language!=""){
    $where[] = " `language` = '".mysql_real_escape_string($language)."'";
}
if($name!=""){
    $where[] = " `name` = '".mysql_real_escape_string($name)."'";
}
$where_clause = implode(' OR ', $where);
//same code for the other 2 options

$sql_json = "SELECT * FROM myTable WHERE $where_clause ORDER BY id DESC";
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T21:48:15.433

您总是可以遍历 $_GET 并获取带有值的键，因此：

```
foreach ($_GET as $key=>$val) {
   if ($val != "") {
      $where_args[] = "$key='$val'";
  }
} 
$where_clause = implode(' OR ', $where_args); 
```

不过，您可能希望进行比上述示例更好的验证，并且如果您需要对特定值执行检查，则可以添加 select/case 语句......

# android - Android 相对布局高度

> ID：14761466
> 
> 赞同：1
> 
> 时间：2013-02-07T21:37:44.390
> 
> 标签：android, mobile, android-relativelayout

我有一个内部有多个 TextView 的相对布局。此布局在其高度上有“wrap_content”。当按下某些导航按钮时，我会更改 TextView 的可见性，以便显示所需的内容。

但是，当下一个显示的内容小于上一个时，布局不会缩小，并且会留下大量的空白空间。布局保持最大显示内容的高度，并保持这种状态。

我想缩小这个布局，让它包裹显示的内容，并且没有多余的空间。

这是布局代码：

```
 <RelativeLayout 
        android:id="@+id/brief_box"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:background="#7A08AB"
        android:layout_below="@+id/description_navigation">

        <ImageView 
            android:id="@+id/dot_separator_1"
            android:layout_height="1dp"
            android:layout_width="fill_parent"
            android:background="@drawable/dot_separator"
            android:layout_alignParentTop="true"
            android:layout_marginTop="2dp"/>

        <TextView 
            android:id="@+id/brief_about_text"
            android:layout_height="wrap_content"
            android:layout_width="fill_parent"
            android:layout_below="@+id/dot_separator_1"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="14dp"
            android:layout_marginTop="4dp"
            android:textColor="#FFFFFF"
            android:textSize="16sp"
            android:textStyle="bold"
            android:text="Venga a drogarse compipa! Venga a drogarse compipa! Venga a drogarse compipa! Venga a drogarse compipa! Venga a drogarse compipa!"/>

        <TextView 
            android:id="@+id/brief_about_update_time"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_below="@+id/brief_about_text"
            android:layout_alignParentRight="true"
            android:layout_marginRight="6dp"
            android:textSize="12sp"
            android:textColor="#DFCAE8"
            android:text="Hace 3 horas"/>

        <TextView 
            android:id="@+id/brief_menu_update_time"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_below="@+id/brief_menu_text"
            android:layout_alignParentRight="true"
            android:layout_marginRight="6dp"
            android:textSize="12sp"
            android:textColor="#DFCAE8"
            android:text="Última actualización hace 2 días."
            android:visibility="gone"/>         

        <TextView 
            android:id="@+id/brief_menu_title"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_below="@+id/dot_separator_1"
            android:layout_marginLeft="20dp"
            android:layout_marginTop="4dp"
            android:textColor="#FFFFFF"
            android:textSize="18sp"
            android:textStyle="bold"
            android:text="Menú cachero"
            android:visibility="gone"/>         

        <TextView 
            android:id="@+id/brief_menu_price"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_below="@+id/dot_separator_1"
            android:layout_alignParentRight="true"
            android:layout_marginTop="4dp"
            android:layout_marginRight="10dp"
            android:textColor="#FFFFFF"
            android:textSize="18sp"
            android:textStyle="bold"
            android:text="$4.500"
            android:visibility="gone"/>  

        <TextView 
            android:id="@+id/brief_menu_text"
            android:layout_height="wrap_content"
            android:layout_width="fill_parent"
            android:layout_below="@+id/brief_menu_title"
            android:layout_marginTop="4dp"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="10dp"
            android:textColor="#FFFFFF"
            android:textSize="12sp"
            android:textStyle="bold"
            android:text="Fantástico menú que contiene ilimitadas posibilidades de contraer una diarrea que durará mas de una semana. Contiene cochayuyo con guatitas y caca, sopa, ensalada, y bebida."
            android:visibility="gone"/>                         

        <TextView 
            android:id="@+id/brief_where_title"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_below="@+id/dot_separator_1"
            android:layout_marginLeft="20dp"
            android:layout_marginTop="6dp"
            android:textColor="#FFFFFF"
            android:textSize="14sp"
            android:text="Encuéntranos en:"
            android:visibility="gone"/>        

        <TextView 
            android:id="@+id/brief_where_text"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_below="@+id/brief_where_title"
            android:layout_marginLeft="20dp"
            android:layout_marginBottom="8dp"
            android:textColor="#FFFFFF"
            android:textSize="18sp"
            android:text="Lota 3495, Providencia"
            android:visibility="gone"/>  

        <ImageView 
            android:id="@+id/brief_where_how_to_arrow"
            android:layout_width="11dp"
            android:layout_height="20dp"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/dot_separator_1"
            android:layout_marginRight="4dp"
            android:layout_marginTop="20dp"
            android:background="@drawable/arrow_tag"
            android:visibility="gone"/>                                 

        <TextView 
            android:id="@+id/brief_where_how_to"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_below="@+id/dot_separator_1"
            android:layout_toLeftOf="@+id/brief_where_how_to_arrow"
            android:layout_marginTop="16dp"
            android:textColor="#FFFFFF"
            android:textSize="11sp"
            android:textStyle="bold"
            android:text="content"
            android:visibility="gone"/>           

    </RelativeLayout> 
```

这是该问题的一些屏幕截图。

这是大内容：

[http://i46.tinypic.com/29xwuw0.png](http://i46.tinypic.com/29xwuw0.png)

这是小内容，大内容布局：

[http://i47.tinypic.com/29gbogm.png](http://i47.tinypic.com/29gbogm.png)

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:40:27.160

请务必使用 View.GONE 使视图消失（而不是 View.INVISIBLE）。

而且，在查看您的 XML 布局时，垂直 LinearLayout 似乎更适合您想要完成的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:44:21.813

更改值后，在 ViewGroup 上调用[invalidate()](http://developer.android.com/reference/android/view/View.html#invalidate%28%29)（在您的情况下为 RelativeLayout）。这应该强制 View / ViewGroup 重新测量其子项。

# django - 您如何使用 AWS Elastic Beanstalk 运行工作程序？

> ID：14761468
> 
> 赞同：47
> 
> 时间：2013-02-07T21:37:58.760
> 
> 标签：django, amazon-web-services, celery, amazon-elastic-beanstalk

我正在 AWS Elastic Beanstalk 上启动一个 Django 应用程序。我想运行后台任务或工作人员以运行芹菜。

我找不到它是否可能。如果是，如何实现？

这是我现在正在做的事情，但这每次都会产生事件类型错误。

```
container_commands:
  01_syncdb:
    command: "django-admin.py syncdb --noinput"
    leader_only: true
  50_sqs_email:
    command: "./manage.py celery worker --loglevel=info"
    leader_only: true 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2014-03-20T13:00:00.453

正如@chris-wheadon 在他的评论中建议的那样，您应该尝试在后台运行 celery 作为守护进程。AWS Elastic Beanstalk 已经使用[supervisord](http://supervisord.org/)来运行一些守护进程。因此，您可以利用它来运行 celeryd 并避免为此创建自定义 AMI。它对我很有效。

我所做的是在 EB 将应用程序部署到实例后，以编程方式将 celeryd 配置文件添加到实例中。棘手的部分是该文件需要为守护程序设置所需的环境变量（例如，如果您在应用程序中使用 S3 或其他服务，则为 AWS 访问密钥）。

下面是我使用的脚本的副本，将此脚本添加到`.ebextensions`配置 EB 环境的文件夹中。

安装脚本在所有 EB 实例上的`/opt/elasticbeanstalk/hooks/appdeploy/post/`文件夹 ([文档](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/custom-platform-hooks.html)) 中创建一个文件。那里的任何 shell 脚本都将在部署后执行。放置在那里的 shell 脚本的工作方式如下：

1.  在`celeryenv`变量中，virutalenv 环境以遵循 supervisord 表示法的格式存储。这是一个逗号分隔的环境变量列表。
2.  然后脚本创建一个变量`celeryconf`，其中包含配置文件作为字符串，其中包括先前解析的 env 变量。
3.  然后将该变量通过管道传输到一个名为 的`celeryd.conf`文件中，该文件是 celery 守护进程的 supervisord 配置文件。
4.  最后，新创建的配置文件的路径被添加到主`supervisord.conf`文件中，如果它不存在的话。

这是脚本的副本：

```
files:
  "/opt/elasticbeanstalk/hooks/appdeploy/post/run_supervised_celeryd.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/usr/bin/env bash

      # Get django environment variables
      celeryenv=`cat /opt/python/current/env | tr '\n' ',' | sed 's/export //g' | sed 's/$PATH/%(ENV_PATH)s/g' | sed 's/$PYTHONPATH//g' | sed 's/$LD_LIBRARY_PATH//g'`
      celeryenv=${celeryenv%?}

      # Create celery configuraiton script
      celeryconf="[program:celeryd]
      ; Set full path to celery program if using virtualenv
      command=/opt/python/run/venv/bin/celery worker -A myappname --loglevel=INFO

      directory=/opt/python/current/app
      user=nobody
      numprocs=1
      stdout_logfile=/var/log/celery-worker.log
      stderr_logfile=/var/log/celery-worker.log
      autostart=true
      autorestart=true
      startsecs=10

      ; Need to wait for currently executing tasks to finish at shutdown.
      ; Increase this if you have very long running tasks.
      stopwaitsecs = 600

      ; When resorting to send SIGKILL to the program to terminate it
      ; send SIGKILL to its whole process group instead,
      ; taking care of its children as well.
      killasgroup=true

      ; if rabbitmq is supervised, set its priority higher
      ; so it starts first
      priority=998

      environment=$celeryenv"

      # Create the celery supervisord conf script
      echo "$celeryconf" | tee /opt/python/etc/celery.conf

      # Add configuration script to supervisord conf (if not there already)
      if ! grep -Fxq "[include]" /opt/python/etc/supervisord.conf
          then
          echo "[include]" | tee -a /opt/python/etc/supervisord.conf
          echo "files: celery.conf" | tee -a /opt/python/etc/supervisord.conf
      fi

      # Reread the supervisord config
      supervisorctl -c /opt/python/etc/supervisord.conf reread

      # Update supervisord in cache without restarting all services
      supervisorctl -c /opt/python/etc/supervisord.conf update

      # Start/Restart celeryd through supervisord
      supervisorctl -c /opt/python/etc/supervisord.conf restart celeryd 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-09T03:06:11.090

我试图在 PHP 中做类似的事情，但是无论出于何种原因，我都无法让工作人员继续运行。我切换到 EC2 服务器上的 AMI 并从那以后取得了成功。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-13T16:15:45.020

对于那些将 Elasticbeanstalk 与 Rails 和 Sidekiq 一起使用的人。这是最终为我解决问题的 ebextensions 集合：

[https://gist.github.com/ctrlaltdylan/f75b2e38bbbf725acb6d48283fc2f174](https://gist.github.com/ctrlaltdylan/f75b2e38bbbf725acb6d48283fc2f174)

# javascript - 从 iframe 中获取一些内容

> ID：14761470
> 
> 赞同：0
> 
> 时间：2013-02-07T21:38:07.400
> 
> 标签：javascript

我正在尝试从 iframe 中获取 div 的内容。我有以下代码：

```
$('iframe').load(function() {
  setTimeout(function() {
    content = $("iframe").contents().find("div#totaltime").html();
    alert(content);
  }, 800);
}); 
```

我的警报消息说“未定义”，但是当我删除“.html()”时，我收到一个警报，说“[object Object]”......任何想法如何提取这个 div 的内容。div 中应该只有一个时间，例如“1:33”，但是当我运行 .text() 而不是 .html() 时，我只会收到一个空白警报。

这是 iframe 内部的 html：

```
<div id="totaltime" class="item graytext" style="visibility: visible; left: 368px; top: 51px; width: 32px; height: 16px; font-size: 11px; font-family: Arial;">06:44</div> 
```

谢谢！

**更新**

好的，我已更改为：

```
$(window).load(function() {
  setTimeout(function() {
    content = $("iframe").html();
    alert(content);
  }, 800);
}); 
```

现在我只得到一个空白的警报框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:02:39.540

如果你`parent and child` *是* `both in the same domain`那么，试试这个（`using pure javascript`）。如果它们*不在*同一个域中，出于安全原因，*无法*访问不同域的 iframe 内的内容；

```
var iframe = document.getElementById("your_iframeId");
alert(iframe.contentWindow.document.getElementById('totaltime').innerHTML); 
```

# python - python函数重新定义

> ID：14761472
> 
> 赞同：1
> 
> 时间：2013-02-07T21:38:17.137
> 
> 标签：python, function, redefinition

我想做这样的事情：

```
f = lambda x: None

x = [f]

def f(n):
    return n

print x[0](2) 
```

预期的结果是`2`，但实际上是`None`。

我知道可以用类来解决，但是没有它们可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:13:44.403

嗯，这很容易（：。函数和其他任何东西一样是一个对象。那该怎么办

```
x = [f] 
```

或者

```
x[0] = f 
```

在你重新定义 f?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:59:13.087

您可以将 f 设置为全局变量：

全局 f
f = lambda x: x+1

x = f

x(1)

输出：2

f = λ x: x+2

x = f

x(1)

输出：3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:46:47.837

Here you are creating an anonymous function and adding it to a list. Now there are two references pointing to the lambda. Although you define another function with same name f, this does not effect the reference in the list as it points to the lambda.

What are you trying to achieve here?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T21:48:11.080

您正在列表 x 中存储对该函数的引用，而不是其名称。

你可以做类似的事情

```
f = lambda x: None
x = ['f']
def f(n):
    return n

print globals()[x[0]](2) 
```

但这有点“糟糕”。也许您可以解释为什么要这样做，我们可以为您找到更好的方法。

# sshd - sshd_config 允许用户

> ID：14761473
> 
> 赞同：11
> 
> 时间：2013-02-07T21:38:18.450
> 
> 标签：sshd

我正在尝试遵循以下逻辑的 AllowUsers 指令的非常具体的配置：

*   允许 user1 从 host1 SSH
*   拒绝 user1 从任何其他主机 ssh
*   允许来自任何主机的所有其他用户

我尝试了以下方法：

```
AllowUsers user1@host1 user1@!* *@* 
```

不幸的是，当*@*出现时，它会否定前面的参数，无论顺序是什么。

我有两个问题；是否有执行 AllowUsers 指令中的参数的顺序，上面的逻辑是否可能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-11-24T10:41:46.340

[sshd_config man](http://manpages.ubuntu.com/manpages/precise/en/man5/sshd_config.5.html)说处理顺序是：

> 允许/拒绝指令按以下顺序处理：DenyUsers、AllowUsers、DenyGroups，最后是 AllowGroups。

所以如果“user1”也有自己的组“user1”你可以使用这个配置：

```
AllowUsers *@host1
DenyGroups user1
AllowGroups * 
```

另一种选择是使用否定：

```
DenyUsers user1@!host1
AllowUsers *@* 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-07T03:52:54.443

仅使用一个 sshd 实例无法实现上述逻辑。但是，如果您运行第二个 sshd 实例（配置为侦听不同的端口），这是可能的。

配置第一个实例：

```
DenyUsers user1 
```

配置第二个实例：

```
AllowUsers user1@host1 
```

告诉 user1 连接到第二个实例（不同的端口）。告诉所有其他用户连接到第一个实例（默认端口）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-22T00:04:55.543

注意：您也可以通过使用 SSH PAM CONFIG（推荐用于大量用户）或 TCP Wrappers 来允许或拒绝 ssh 访问，但您需要获取 libwrap.a 库才能使其与 SSH 一起使用。

如果您想通过 SSHD CONFIG 限制访问，您可以使用以下四个条目：

AllowUsers AllowGroups DenyUsers DenyGroups

模式匹配按以下顺序发生：DenyUsers、AllowUsers、DenyGroups、AllowGroups。这意味着，例如，如果您将用户添加到两个条目（AllowUsers 和 DenyUsers），无论规则在配置脚本中出现的顺序如何，都会导致该用户被拒绝。

要完成您提到的 3 个限制，您可以尝试创建一个组*sshgroup并配置除**user1*之外的每个用户帐户以包含在该组中。最后，您可以创建一个脚本，将*sshgroup*中的用户添加到 sshd_config 文件中的规则中，该规则始终包括：

允许*用户 user1@host1*

导致：

AllowUsers *user1@host1 user2 user3...*

为了使 sshd 配置文件保持最新，您可以在每次创建/删除用户时调用该脚本。每次更改配置文件后，不要忘记重新启动 ssh 守护进程。

[在这里](http://www.ibm.com/developerworks/aix/library/au-ssh_restrict/)你可以找到一个脚本“pop_user_allow_ssh”，它也试图生成一个用户列表。

你没有提到你的操作系统，但这就是我在 AIX 上的做法。我希望这个想法有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-28T09:21:06.457

```
# Deny user1 from all hosts but host1
DenyUsers user1@!host1,*
# Allow all users from any host that are not denied yet
AllowUsers *@* 
```

# ruby - string#gsub 链的性能影响？

> ID：14761474
> 
> 赞同：4
> 
> 时间：2013-02-07T21:38:19.940
> 
> 标签：ruby, regex, coding-style

Ruby 中字符串上的 .gsub 和/或 .sub 方法链对性能有什么影响吗？

例如，下面是一个来自 Rails 源代码的方法示例，该方法为图像创建 alt 标记。它会删除文件扩展名和摘要（如果有）。

```
def image_alt(src)
  File.basename(src, '.*').sub(/-[[:xdigit:]]{32}\z/, '').capitalize
end 
```

在我的应用程序中，我希望它将下划线或连字符更改为空格，因此我想`gsub`在最后添加一个方法：

```
def image_alt(src)
  File.basename(src, '.*').sub(/-[[:xdigit:]]{32}\z/, '').gsub(/(_|-)/, ' ').capitalize
end 
```

这是否会在性能或风格方面引发危险信号？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T22:04:26.407

```
str.tr('-_', ' ') 
```

值得考虑（[文档](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-tr)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T00:24:52.047

当链中正则表达式的匹配不应该重叠时，然后在单[`StringScanner`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/strscan/rdoc/StringScanner.html)次迭代下的条件内运行它们，同时将结果输出到 a[`StringIO`](http://ruby-doc.org/stdlib-1.9.3/libdoc/stringio/rdoc/StringIO.html)中可能会提高性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:43:31.677

我没有问题。我在我的几个程序中使用了`gsub`电话号码，并且我没有遇到性能问题。从性能的角度来看，我不会担心它。至于风格，我想这是个人喜好。就我个人而言，我会不惜一切代价避免使用正则表达式。但是，这只是我。

# android - 集成 Facebook-android-sdk-3.0 引发 Resources$NotFoundException

> ID：14761477
> 
> 赞同：5
> 
> 时间：2013-02-07T21:38:37.400
> 
> 标签：android, facebook-android-sdk, android-resources

我正在尝试将 Facebook 集成到我的应用程序中。但是一旦我点击`fbphoto`它就会抛出错误`android.content.res.Resources$NotFoundException`。我确实知道它会引发错误，因为在运行时没有建立适当的资源。

发现错误是在`facebook.authorize(this, new String[] { "email", "publish_stream"}, new DialogListener() {}`. 但根本原因仍然缺失。

```
fbphoto.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            loginToFacebook();
        }
    });

public void loginToFacebook()
{
if(!facebook.isSessionValid())
    {
        facebook.authorize(this, new String[] { "email", "publish_stream"}, new DialogListener() {

        });
    } 
```

* * *

```
02-08 02:57:58.236: E/AndroidRuntime(1582): FATAL EXCEPTION: main
02-08 02:57:58.236: E/AndroidRuntime(1582): android.content.res.Resources$NotFoundException: String resource ID #0x7f050011
02-08 02:57:58.236: E/AndroidRuntime(1582):     at android.content.res.Resources.getText(Resources.java:201)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at android.content.res.Resources.getString(Resources.java:254)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at android.content.Context.getString(Context.java:183)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at com.facebook.widget.WebDialog.onCreate(WebDialog.java:188)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at android.app.Dialog.dispatchOnCreate(Dialog.java:307)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at android.app.Dialog.show(Dialog.java:225)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at com.facebook.AuthorizationClient$WebViewAuthHandler.tryAuthorize(AuthorizationClient.java:462)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at com.facebook.AuthorizationClient.tryCurrentHandler(AuthorizationClient.java:210)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at com.facebook.AuthorizationClient.tryNextHandler(AuthorizationClient.java:189)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at com.facebook.AuthorizationClient.authorize(AuthorizationClient.java:117)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at com.facebook.AuthorizationClient.startOrContinueAuth(AuthorizationClient.java:98)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at com.facebook.Session.tryLegacyAuth(Session.java:1096)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at com.facebook.Session.authorize(Session.java:893)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at com.facebook.Session.open(Session.java:957)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at com.facebook.Session.openForPublish(Session.java:415)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at com.facebook.android.Facebook.openSession(Facebook.java:319)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at com.facebook.android.Facebook.authorize(Facebook.java:313)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at com.facebook.android.Facebook.authorize(Facebook.java:149)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at com.example.splashscreen.SecondScreen.loginToFacebook(SecondScreen.java:110)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at com.example.splashscreen.SecondScreen$1.onClick(SecondScreen.java:73)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at android.view.View.performClick(View.java:2485)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at android.view.View$PerformClick.run(View.java:9080)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at android.os.Handler.handleCallback(Handler.java:587)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at android.os.Looper.loop(Looper.java:123)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at android.app.ActivityThread.main(ActivityThread.java:3683)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at java.lang.reflect.Method.invokeNative(Native Method)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at java.lang.reflect.Method.invoke(Method.java:507)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-08 02:57:58.236: E/AndroidRuntime(1582):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-14T06:31:06.677

请注意，如果您正在运行 IntelliJ 并将 Facebook 源代码作为库模块包含在您的项目中，也会发生此错误。

目前还不清楚究竟是什么*导致*了这种情况发生，但是当 Facebook 项目（整个树）作为库模块包含在 IntelliJ 项目中时，facebook strings.xml 文件有时会被一个非常简单的 strings.xml 文件覆盖，并中断Facebook 登录屏幕上出现 Resources Not Found 异常的应用。不仅如此，Facebook AndroidManifest 有时也会被覆盖并导致编译时问题。

替换伪造的 strings.xml 和 AndroidManifest.xml 文件将解决此问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T21:53:45.950

从堆栈跟踪，错误是由这一行引起的：

```
spinner.setMessage(getContext().getString(R.string.com_facebook_loading)); 
```

源代码在[这里](https://github.com/facebook/facebook-android-sdk/blob/master/facebook/src/com/facebook/widget/WebDialog.java)

[资源在res/values/string.xml](https://github.com/facebook/facebook-android-sdk/blob/master/facebook/res/values/strings.xml)中正确定义

显然，错误不在 facebook-android-sdk 中。

我猜你的项目设置有问题。您可以按照本[指南](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)正确设置您的项目。

# ios - UITextView 隐藏文本

> ID：14761478
> 
> 赞同：0
> 
> 时间：2013-02-07T21:38:49.177
> 
> 标签：ios, objective-c, uitextview, uitextviewdelegate

我想知道是否可以从 UITextView 的文本中隐藏特定的单词或表达式。例如：

```
UITextView* txt = @"hello how are you" 
```

有什么办法可以隐藏“你”，使其对用户不可见（考虑到用户无法编辑txt，但仍然是文本的一部分，所以我可以做txt.text来获取ehole 字符串 ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:46:39.707

As of iOS 6.0, UITextView can work with NSAttributedStrings (see the [`attributedText` property](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextView_Class/Reference/UITextView.html#//apple_ref/occ/instp/UITextView/attributedText)) and using attributed strings, you can change the color to be clear (or hidden). It'll still be selectable, though, and may show up when highlighted.

And because of that last sentence, I'm not sure if this is what you want.

You may also find some helpful hints [in this related question](https://stackoverflow.com/questions/949361/how-can-i-set-a-hidden-attribute-for-text-inside-nsattributedstring).

# database - 将表从一个数据库自动迁移到不同服务器上的其他数据库的方法？

> ID：14761485
> 
> 赞同：2
> 
> 时间：2013-02-07T21:39:27.210
> 
> 标签：database, postgresql, e-commerce

我有一个具有用户成员资格并使用 postgresql 的系统，现在我正在开发另一个迷你电子商务应用程序，它将使用与 postgresql 用户应用程序相同的用户凭据。当新用户注册 postgresql 用户应用程序时，从 postgres 到电子商务网站的数据将自动更新。

> 请注意：将为两个不同的应用程序使用 2 个不同的数据库，但在两个应用程序上使用相同的用户表。电子商务应用程序上不会有注册或注册。原始（主数据库）肯定是 postgresql 8.4，但另一个可能是 mysql 或类似的 postgresql 尚未真正决定，因为电子商务应用程序可能在 php 中，而主应用程序在 grails（java）中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:31:40.233

第一个也是显而易见的解决方案是使用[dblink](http://www.postgresql.org/docs/9.1/static/dblink.html)假设两台服务器都是 postgres。

但是，您可以编写自己的*部分复制守护程序*。下面是一个将表*用户*复制到 SQlite 数据库的简单示例。

我们在 postgres *usersdb*数据库中有表*用户：*

 *```
create table users (
    id serial primary key,
    name text); 
```

*为用户*创建日志表：

```
create table users_log (
    id serial primary key,
    action text); 
```

*在表用户*上创建触发器：

```
create or replace function users_trigger ()
returns trigger language plpgsql as $$
declare
    newaction text;
begin
    if (TG_OP = 'UPDATE') then
        newaction:= 'update users set 
        name = '''||new.name||''' where id = '||old.id::text;
    elsif (TG_OP = 'INSERT') then
        newaction:= 'insert into users values 
        ('||new.id::text||', '''||new.name||''')';
    elsif (TG_OP = 'DELETE') then
        newaction:= 'delete from users where id = '||old.id::text;
    end if;
    insert into users_log (action) values (newaction);
    return null;
end; $$;

create trigger users_trigger
  after insert or update or delete
  on users
  for each row
  execute procedure users_trigger(); 
```

在其中创建 SQlite3 数据库*users.db*和表*users*：

```
create table users (
    id integer primary key,
    name text); 
```

守护程序脚本每 2 秒检查 users_log。如果有新动作，那么脚本会在 SQlite 数据库中将它们一一生成并从 users_log 中删除：

```
<?php
$postgres = new PDO('pgsql:host=localhost port=5432 dbname=usersdb');
$sqlite = new PDO('sqlite:users.db'); 

$sql = 'select * from users_log order by id limit 1';
while (true) {
    sleep(2);
    while ($row = $postgres->query($sql)->fetch()) {
        $sqlite->query($row[1]);
        echo $row[1]. "\n";
        $postgres->query("delete from users_log where id = $row[0]");
    }
}
?> 
```

为简单起见，该脚本绝对是极简的，应该配备必要的异常处理。*

# visual-studio-2010 - 如何将 VS 2010 WinForm Designer 指向不同的资源文件以选择图像？

> ID：14761495
> 
> 赞同：1
> 
> 时间：2013-02-07T21:40:12.263
> 
> 标签：visual-studio-2010, dialog, designer, resx

在 Visual Studio 2010 窗体设计器中，您可以通过单击控件的 Image 属性将资源文件中的图像分配给各种 WinForm 控件。“选择资源”对话框将显示如下：

![资源对话框](../Images/cc7ac2f714ab4b053fcbff1fe67effa3.png)

在上图中，请注意“项目资源文件：”的选项被选中，其下方有一个下拉列表，其中显示“Properties\Resources.resx”以及属于 Resources.resx 文件的图像列表。

DropDown 列表表明，如果我将多个 *.resx 文件添加到项目中，我可以选择 *.resx 文件，然后选择该文件中的图像。比如这个测试项目有4个资源文件：

*   属性\资源.resx
*   属性\Resources1.resx
*   属性\Resources2.resx
*   属性\Resources3.resx

![解决方案](../Images/aca48e053c50dc576089c840d5b76a48.png)

但是，该对话框从不显示项目中的任何其他 *.resx 文件。

文件“Properties\Resources.resx”是唯一一个填充在下拉列表中的 *.resx 文件，因此我无法使用 WinForm 设计器从其他文件中选择图像。

**显然，我可以在代码中分配图像或将所有图像堆积到一个 *.resx 文件中，但我很好奇是否有人知道为什么其他资源文件没有显示在对话框中，或者如何获取 Visual Studio承认他们的存在？**

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:23:10.197

您将它们添加到错误的节点，将它们添加到项目根目录而不是 Properties 节点。当您右键单击项目，添加新项目，资源文件时，它是自动的。您可以通过拖动 .resx 文件来修复它。当您将鼠标悬停在项目根节点上时，将其*向上拖动并松开。*

# r - 在 R 中保存和加载模型

> ID：14761496
> 
> 赞同：37
> 
> 时间：2013-02-07T21:12:46.603
> 
> 标签：r, r-caret

使用[caret](http://cran.r-project.org/web/packages/caret/index.html)时，如何在训练后保存模型，并稍后加载（例如在不同的会话中）以进行预测？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2017-02-17T09:07:07.730

现在更好的解决方案是使用 saveRDS 保存和 readRDS 读取：

```
saveRDS(model, "model.rds")
my_model <- readRDS("model.rds") 
```

这使您可以为对象选择一个新名称（您无需记住保存时使用的名称）

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-09-24T23:51:17.020

正确的语法是使用：

```
save(model, file="model.Rdata") 
```

此后，可以使用 load() 命令加载它。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-07T22:29:22.980

以下代码假定您的模型的变量名称是“模型”：

```
save(model, "model.RData") 
```

这会将您的模型保存为当前工作目录中的“model.RData”。您可以通过发出以下命令找出工作目录是什么：

```
getwd() 
```

要重新加载它，请确保您的模型保存在您的工作目录中并发出：

```
load("model.RData") 
```

# php - CakePHP 1.3：如何检查 $this->save() 是成功还是失败？

> ID：14761497
> 
> 赞同：0
> 
> 时间：2013-02-07T21:40:21.960
> 
> 标签：php, cakephp-1.3

我重新访问了我之前编写的一些旧代码，其中我有一个 if-else 语句来检查 a`$this->save()`是真还是假是否成功。`save()`但是，无论输入是什么以及数据是否成功保存在数据库中，似乎都会返回一个数组。

这是一个名为 的表的示例`product`，它没有名为`iddd`or的列`out_of_stocksdsd`：

```
$temp = array();
$temp['Product']['iddd'] = '1';
$temp['Product']['out_of_stocksdsd'] = '1';           
$q = $this->save($temp);            
debug($q); 
```

`debug($q)`返回下面的内容。请注意，该数组包括表中存在的`modified`索引。`created``product`

```
Array
(
    [Product] => Array
    (
        [iddd] => 1
        [out_of_stocksdsd] => 1
        [modified] => 2013-02-07 21:28:51
        [created] => 2013-02-07 21:28:51
    )

) 
```

以上内容不会更新数据库中的任何内容，并且如您所见，没有任何迹象表明它是否有效。那么，如何检查是否`$this->save()`成功执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:35:51.003

我知道如何检查是否`$this->Model->save()`成功的最好方法是使用`if/else`. 如果数据未成功保存，则返回且应在变量中的唯一内容`$q`是 boolean `FALSE`。

另外，请记住，CakePHP/PHP 并不关心要保存的数组中的内容。如果您的 Db 表有 5 列（id、name、content、created、modified），那么 cake 将只关心这些值（取决于验证）。如果向数组添加更多列（idddddd、nameeeeee、anothercolum 等），它们将被跳过并且不会引发错误。

此处编写代码的方式，它永远不会保存任何内容，因为您没有传递 ID。尽管该命令会成功，但您的条目一旦到达 MySQL 就会神奇地消失。如果您想在表中创建新条目，则必须在调用`$this->Model->create()`之前调用`$this->Model->save()`，除非您正在更新表中的条目，您需要传递一个 ID 或分配一个 ID，如下所示：`$this->Model->id = 1;`

# xml - 简单教程，骆驼弹簧路由，activemq，xslt

> ID：14761502
> 
> 赞同：0
> 
> 时间：2013-02-07T21:40:32.920
> 
> 标签：xml, spring, xslt, activemq, apache-camel

我试图找出是否有人知道一个简单的教程，它执行以下步骤：

1.  发送xml消息到activemq主题
2.  使用 xslt 转换主题中的消息
3.  将转换后的消息发送到第二个主题
4.  注销转换后的 xml 消息的内容

我正在尝试使用基于骆驼弹簧的路由来执行以下操作。任何帮助将不胜感激。我目前有一个程序，它将一个简单的字符串发送到一个 activemq 主题，注销字符串的内容，然后将字符串传递给第二个主题。所以基本上我只想将发送简单的文本消息更改为沿途转换的 xml 消息。

预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:58:50.663

以下是资源列表，您应该能够找到文章，帮助您完成您想做的事情。

*   [StackOverflow 讨论](https://stackoverflow.com/questions/4406656/is-there-any-simple-tutorial-or-a-source-to-learn-apache-camel)
*   [Apache Camel 站点上托管的教程](http://camel.apache.org/tutorials.html)
*   [文章列表](http://camel.apache.org/articles.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T11:36:10.733

添加到 Romins 的答案中，特别是使用 XSLT 转换消息是微不足道的，并且在[camel xslt docs](http://camel.apache.org/xslt)中有详细描述。

你似乎已经完成了其他部分。

# configuration - 如何限制Hadoop中每个键的最大值？

> ID：14761503
> 
> 赞同：0
> 
> 时间：2013-02-07T21:40:33.143
> 
> 标签：configuration, hadoop, mapreduce

这是我的问题。我有一个大数据集可以使用，我需要限制每个键的最大值。有时我每个键有 10000+ 个值，而这正是我需要的。

那么如何配置我的工作以获取每个键的“x”值？（任何键）在减少阶段之后。

编辑：这是减少源代码。我的主要问题是有时我会出现 OutOfMemory，这是因为 StringBuilder 变得很大。

也许有一种方法可以通过配置说“我只想要每个键 10.000 个值”。如果没有，我必须在我的减速器中添加一些额外的代码......

```
public void reduce(Text domain, Iterable<Text> inLinks, Context context) throws IOException,
            InterruptedException {
        allInlinks = new StringBuilder();

        for (Text text : inLinks) {

                allInlinks.append(text.toString());
                allInlinks.append(",");               
        }

        allLinksText.set(allInlinks.toString());

        context.write(domain, allLinksText);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:50:36.943

我认为您可能会感到困惑，因为 reduce 阶段的记录输出形式为 (K,V)，而不是 (K, {V,V,V})。现在，从 Map 阶段输出的记录采用 (K, {V,V,V}) 的形式，并且由 reducer 来压缩这些中间值，但它认为合适。如果您正在运行自己的基于 Java 的 MapReduce 作业，您可以尝试通过代码限制每个阶段输出的记录数，但这并不完全符合大数据范式。有必要进一步澄清您的数据/当前解决方案/所需输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T22:14:21.487

像这样简单的事情不起作用吗？也许我没有完全理解你的问题。

```
reduce(Key key, Iterator<Value> values) {
    int count = 0;
    while (values.hasNext()) {
        if (count < x) {
            // do whatever
            count++;
        } else {
            return;
        }
    }
} 
```

是的，有一些“浪费”，因为每个键的所有值仍然被排序并复制到减速器，但我真的没有看到解决方法。您可以在组合器中做类似的事情，并且每个键最多只能输出 x ，但是根据您的键/映射器的分布，这只会有一点帮助。

# android - 按照给定的顺序创建具有 X 值的折线图

> ID：14761510
> 
> 赞同：2
> 
> 时间：2013-02-07T21:40:39.563
> 
> 标签：android, achartengine

是否可以`AChartEngine`制作 X 值不总是增加的折线图？我认为一张图片最能说明我的意思。

![完整的折线图](../Images/2e5e292efac05aaef3665fbc77d9bdda.png)

在上图中，线条连接 X 值增大（从左到右）和 X 值减小（从右到左）的点。

现在，当我尝试将此数据传递给折线图时，`AChartEngine`它会自动按 X 值对点进行排序。我得到如下所示的内容：

![排序 X](../Images/3cd2fb07e0d573de8d1c0877e48463fc.png)

我想创建一个图表，其中点按给定的顺序连接，即使这意味着画一条*向后*的线。有没有办法做到这一点`AChartEngine`？

# sql - 在 MS Access 中将 2 个相似字段合并为 1 个

> ID：14761511
> 
> 赞同：3
> 
> 时间：2013-02-07T21:40:41.407
> 
> 标签：sql, ms-access

我有 5 列：c1=Item、c2=LHrs、c3=WHrs、c4=Lead、c5=Worker，构造如下：

```
ITEM  LHRS  WHRS  LEAD  WORKER
123   25    10    John  Gary
456   15    20    John  John 
```

我希望结果看起来像这样：

```
RESOURCE  ITEM  HRS
John       123   25
Gary       123   10
John       456   35 
```

连接名称并执行结果“AS Resource”不会按照我想要的方式分解它。基本上我想知道每个人，每个项目，他们工作了多少小时，无论他们是领导（LHrs）还是工人（WHrs）。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:47:08.413

How about a UNION query?

```
SELECT item, person, sum(hrs) AS sumhours 
FROM (
   SELECT Item, lhrs as hrs,lead as person from wk
   UNION ALL
   SELECT Item, whrs, worker AS person from wk) a
GROUP BY item, person 
```

Where wk is the name of the table.

# math - 集合操作 X 和集合名册符号？

> ID：14761513
> 
> 赞同：-2
> 
> 时间：2013-02-07T21:40:42.777
> 
> 标签：math, computer-science, notation

令 S = {2,4,6} 和 T = {1,3,5}。使用 set-roster 表示法写出以下每个集合，并指出每个集合中的元素数量？

一种。SXT

湾。TXS

C。SXS

d。TXT

问题是我不知道这里有什么东西，书中没有可以提供帮助的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:33:19.077

我相当确信 SXT 应该被解释为 S × T，即 S 和 T 的[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)。这是所有对的集合，其第一个元素来自 S，第二个元素来自 T。鉴于 S = { 2, 4, 6} 和 T = {1, 3, 5}，这将是集合

> { (2, 1), (2, 3), (2, 5), (4, 1), (4, 3), (4, 5), (6, 1), (6, 3), ( 6, 5) }

以此为起点，您应该能够回答 (b) 到 (d) 部分。术语“set-roster notation”指的是一次只列出一个所有元素的表示法，正如我在上面所做的那样。

希望这可以帮助！

# java - 方法上的空指针异常

> ID：14761516
> 
> 赞同：-3
> 
> 时间：2013-02-07T21:40:53.820
> 
> 标签：java, android

我试图从我的代码中的几个方法将两个转换后的日期和时间返回为字符串，以允许用户更新我的数据库中的用户约会时间和数据。当我单击按钮并调用 OnClickListner 时，出现空指针错误：

日志猫：

```
 02-07 21:26:04.869: W/dalvikvm(305): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
02-07 21:26:04.949: E/AndroidRuntime(305): FATAL EXCEPTION: main
02-07 21:26:04.949: E/AndroidRuntime(305): java.lang.NullPointerException
02-07 21:26:04.949: E/AndroidRuntime(305):  at com.example.flybase2.AppointmentEditChanges.setTime(AppointmentEditChanges.java:278)
02-07 21:26:04.949: E/AndroidRuntime(305):  at com.example.flybase2.AppointmentEditChanges.onClick(AppointmentEditChanges.java:304)
02-07 21:26:04.949: E/AndroidRuntime(305):  at android.view.View.performClick(View.java:2408)
02-07 21:26:04.949: E/AndroidRuntime(305):  at android.view.View$PerformClick.run(View.java:8816)
02-07 21:26:04.949: E/AndroidRuntime(305):  at android.os.Handler.handleCallback(Handler.java:587)
02-07 21:26:04.949: E/AndroidRuntime(305):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-07 21:26:04.949: E/AndroidRuntime(305):  at android.os.Looper.loop(Looper.java:123)
02-07 21:26:04.949: E/AndroidRuntime(305):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-07 21:26:04.949: E/AndroidRuntime(305):  at java.lang.reflect.Method.invokeNative(Native Method)
02-07 21:26:04.949: E/AndroidRuntime(305):  at java.lang.reflect.Method.invoke(Method.java:521)
02-07 21:26:04.949: E/AndroidRuntime(305):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-07 21:26:04.949: E/AndroidRuntime(305):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-07 21:26:04.949: E/AndroidRuntime(305):  at dalvik.system.NativeStart.main(Native Method) 
```

在这里我的整个班级，这两种方法都在底部，希望有人能看到我哪里出错了！：

```
package com.example.flybase2;

public class AppointmentEditChanges extends Activity implements OnClickListener {
    String dateToSetA;
    String timeToSetA;
    String dateToSetB;
    String timeToSetB;
    Date setDate;
    Long passedID;
    EditText editAppointName;
    Spinner editTime;
    TimePicker editTimePicker;
    DatePicker editDatePicker;
    Date dateToEdit;
    Date cake;
    Date dateToEditApp;
    EditText editCommentsApp;
    ToggleButton editToggle;
    boolean setTog;
    Button editUpdateApp;
    Button editDelApp;
    String updateNameAppoint;
    String updateCommsAppoint;
    TimePicker setTime;
    DatePicker setDateb;
    String  typeToSet;
    boolean check;
    Boolean alarmToSet;
    String dateToSet;
    String timeToSet;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.editappointment);

        editAppointName = (EditText) findViewById(R.id.inputNewAppName);
        editTime = (Spinner) findViewById(R.id.spinner1);
        editTimePicker = (TimePicker) findViewById(R.id.timePickerEdit);
        editDatePicker = (DatePicker) findViewById(R.id.datePickerEdit);
        editCommentsApp = (EditText) findViewById(R.id.inputNewComm);
        editToggle = (ToggleButton) findViewById(R.id.toggleButton1);
        editUpdateApp = (Button) findViewById(R.id.btnChangesApp);
        editDelApp = (Button) findViewById(R.id.btnDeleteApp);

        Bundle extras = getIntent().getExtras(); 
        if (extras != null) {
            passedID = extras.getLong("passedID"); 
        }

        DBHandlerApp getName = new DBHandlerApp(this, null, null);

        getName.open();
        String nameReturned = getName.getNameEditForAppointment(passedID);
        String typeReturned = getName.getAppointTypeEditForAppointment(passedID);
        getName.close();

        editAppointName.setText(nameReturned);

        List<String> list = new ArrayList<String>();
        list.add("-");
        list.add("Medical");
        list.add("Business");
        list.add("Family");
        list.add("Other");
        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        editTime.setAdapter(dataAdapter);

        for(int a = 0; a < list.size(); a ++) {
            if (typeReturned.equals(list.get(a))) {
                editTime.setSelection(a);
            }
        }

        DBHandlerApp timeToEdit= new DBHandlerApp(this, null, null);
        timeToEdit.open();
        String returnedTime = timeToEdit.getTime(passedID);
        timeToEdit.close(); 

        SimpleDateFormat newFormat = new SimpleDateFormat("HH:mm");
        try {
            cake = newFormat.parse(returnedTime);
        } 
        catch (ParseException e) {
            e.printStackTrace();
        }     

        Calendar cal = Calendar.getInstance();
        cal.setTime(cake);
        editTimePicker.setCurrentHour(cal.get( Calendar.HOUR_OF_DAY ));
        editTimePicker.setCurrentMinute(cal.get( Calendar.MINUTE ));

        DBHandlerApp dateToEdit= new DBHandlerApp(this, null, null);
        dateToEdit.open();
        String returnedDate = dateToEdit.dateToEdit(passedID);
        dateToEdit.close();

        SimpleDateFormat newFormatDate = new SimpleDateFormat("dd-MMM-yyyy");

        try {
            dateToEditApp = newFormatDate.parse(returnedDate);
        } 
        catch (ParseException e) {
            e.printStackTrace();
        }     

        Calendar calDate = Calendar.getInstance();

        calDate.setTime(dateToEditApp);

        int year = calDate.get(Calendar.YEAR);
        int monthOfYear = calDate.get(Calendar.MONTH);
        int dayOfMonth = calDate.get(Calendar.DAY_OF_MONTH);

        editDatePicker.init(year, monthOfYear, dayOfMonth, null);

        DBHandlerApp commentsApp = new DBHandlerApp(this, null, null);
        commentsApp.open();

        String returnedComment = commentsApp.getComments(passedID);

        commentsApp.close();
        editCommentsApp.setText(returnedComment);
        typeToSet =  editTime.getSelectedItem().toString();

        DBHandlerApp editAlarm = new DBHandlerApp(this, null, null);

        editAlarm.open();

        Integer alarmEditResult =  editAlarm.checkAlarmStatus(passedID);
        editAlarm.close();

        if (alarmEditResult == 1) {
            setTog = true;
            editToggle.setChecked(setTog);
        }
        else {
            setTog = false;
            editToggle.setChecked(setTog);
        }
        editToggle.setChecked(setTog);

        editToggle.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                if (editToggle.isChecked()) {
                    setTog = true;
                    editToggle.setChecked(setTog);
                } 
                else {
                    setTog = false;
                    editToggle.setChecked(setTog);
                }
            }
        });

        editUpdateApp.setOnClickListener(this);
        editDelApp.setOnClickListener(this);
    }

    @Override
    public void onClick(View editChoice) {
        switch(editChoice.getId()){
        case R.id.btnChangesApp:
            updateNameAppoint = editAppointName.getText().toString();
            updateCommsAppoint = editCommentsApp.getText().toString();

            dateToSetA = setDate();
            timeToSetA = setTime();

            if(setTog != false) {
                try{
                    alarmToSet =  true;

                    DBHandlerApp updateApp = new DBHandlerApp(this, null, null);
                    updateApp.open();
                    updateApp.updateAppDetails(passedID, updateNameAppoint, typeToSet, timeToSetA,  dateToSetA, updateCommsAppoint, alarmToSet);
                    updateApp.close();
                    //AlarmManager dateSet = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
                    //Intent intent = new Intent(this, DateAlarm.class);
                    //PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);
                    //dateSet.set(AlarmManager.RTC_WAKEUP, setDate.getTime(), pendingIntent); 
                }
                catch (Exception e) {
                    check = false;
                    Dialog d = new Dialog(this);
                    d.setTitle("Appointment Failed To Be Updated 1");
                    TextView txt = new TextView(this);
                    txt.setText("Fail");
                    d.setContentView(txt);
                    d.show();
                }
                finally {
                    if(check) {
                        Dialog e = new Dialog(this);
                        e.setTitle("Appointment Has Been Updated.");
                        TextView txt = new TextView(this);
                        txt.setText("Success");
                        e.setContentView(txt);
                        e.show();
                    }
                }
            }
            else if(setTog == false) {
                alarmToSet = false;

                updateNameAppoint = editAppointName.getText().toString();
                updateCommsAppoint = editCommentsApp.getText().toString();

                dateToSetB = setDate();
                timeToSetB = setTime();

                alarmToSet = false;
                try {
                    DBHandlerApp updateApp = new DBHandlerApp(this, null, null);
                    updateApp.open();
                    updateApp.updateAppDetails(passedID, updateNameAppoint, typeToSet, timeToSetB,  dateToSetB, updateCommsAppoint, alarmToSet);
                    updateApp.close();
                }
                catch (Exception e) {
                    check = false;
                    Dialog d = new Dialog(this);
                    d.setTitle("Appointment Failed To Be Added 2");
                    TextView txt = new TextView(this);
                    txt.setText("Fail");
                    d.setContentView(txt);
                    d.show();
                }
                finally {
                    if(check) {
                        Dialog e = new Dialog(this);
                        e.setTitle("New Appointment Added.");
                        TextView txt = new TextView(this);
                        txt.setText("Success");
                        e.setContentView(txt);
                        e.show();
                    }
                    finish();
                }
            }

            break;
        case R.id.btnDeleteApp:
            DBHandlerApp deleteApp = new DBHandlerApp(this, null, null);
            deleteApp.open();
            deleteApp.deleteAppointment(passedID);
            deleteApp.close();
            break;
        }
    }

    public String setDate() {
        Format formatterDate;
        Calendar calendarDate = Calendar.getInstance();
        calendarDate.set(Calendar.YEAR, editDatePicker.getYear());
        calendarDate.set(Calendar.MONTH, editDatePicker.getMonth());
        calendarDate.set(Calendar.DAY_OF_MONTH, editDatePicker.getDayOfMonth());

        formatterDate = new SimpleDateFormat("dd-MMM-yyyy");
        dateToSet = formatterDate.format(calendarDate.getTime());

        return dateToSet;
    }

    public String setTime() {
        Format formatter;
        Calendar calendar = Calendar.getInstance();
        calendar.set(Calendar.HOUR_OF_DAY, setTime.getCurrentHour());
        calendar.set(Calendar.MINUTE, setTime.getCurrentMinute());

        formatter = new SimpleDateFormat("HH:mm");
        timeToSet = formatter.format(calendar.getTime());

        return timeToSet;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:44:28.520

```
TimePicker setTime; 
```

看来您还没有为变量分配任何`TimePicker`实例。`setTime`

因此，当您执行以下呼叫时，`setTime`是`null`.

```
calendar.set(Calendar.HOUR_OF_DAY, setTime.getCurrentHour()); 
```

你得到`NullPointerException`.

**编辑：**

如果您阅读异常，则有两行为您提供线索：

```
com.example.flybase2.AppointmentEditChanges.setTime(AppointmentEditChanges.java:278) 
```

上面的行告诉`AppointmentEditChanges.java`第 278 行是问题，并`setTime(...`告诉这是`setTime`方法。

```
02-07 21:26:04.949: E/AndroidRuntime(305): java.lang.NullPointerException 
```

告诉您的应用程序由于`NullPointerException`.

当您阅读指定行的源代码时，您可以轻松识别以下代码

calendar.set(Calendar.HOUR_OF_DAY, setTime.getCurrentHour());

从上面，您调用 tell `calendar`variable is not `null`，因此唯一的可能性是`setTime`可变的。

# c++ - Qmake 创建 Visual Studio 项目 - 设置“工作目录”

> ID：14761520
> 
> 赞同：2
> 
> 时间：2013-02-07T21:40:58.923
> 
> 标签：c++, visual-studio-2010, qt, qmake

如何设置 .pro 文件中的 Visual Studio“工作目录”字段以使用 qmake 读取？

避免每次运行 qmake 时都必须设置它会很好。

我看过[这里](http://pepper.troll.no/s60prereleases/doc/qmake-variable-reference.html)，但不确定它们中的任何一个是否有效......

* * *

![在此处输入图像描述](../Images/76e3c32383991a8aaf88ee1b22c4a335.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:23:01.780

据我所知 - 我认为甚至没有一种方法可以使用 vcproj 以自动化方式改变它。

有人将此[报告](https://bugreports.qt-project.org/browse/QTBUG-407?page=com.atlassian.streams.streams-jira-plugin%3aactivity-stream-issue-tab)为错误/功能请求，但此后似乎没有取得任何进展。

# java - 即使 cast-from 父类实际上是 cast-to 子类的实例，也会引发 Java Class Cast 异常

> ID：14761521
> 
> 赞同：1
> 
> 时间：2013-02-07T21:41:04.377
> 
> 标签：java, android, classcastexception

我正在尝试将返回的 Thread 对象从 Java 的 ThreadFactory.newThread(Runnable r) 转换为我的 Android 应用程序使用的 Thread 的特定子类，如下所示：

```
private ThreadFactory mvThreadSource = Executors.defaultThreadFactory();

...

//Invokes the thread factory's newThread(Runnable r) method 
//mvThreadsVector is an ArrayList<BackgroundThread>
//class BackgroundThread extends Thread and implements an interface
public void spawnBGThreads(int numThreads){
 for (int i=0;i<numThreads;i++){
  mvThreadsVector.add((BackgroundThread) mvThreadSource.newThread(new
  BackgroundThread())); 
 }
} 
```

这会引发一个类转换异常，但我不知道为什么；我知道我似乎在尝试向下转换，这是无法完成的，但是 mvThreadSource.newThread(new BackgroundThread()) 返回的线程实际上应该是 BackgroundThread 的一个实例。据我了解，这应该使我在上面尝试的“向下转换”合法化（因为它不应该真正向下转换），但 Android 运行时（针对 SDK 修订版 17）不同意。上述演员阵容有什么违法之处？我应该使用什么替代方法（希望没有创建我自己的扩展 ThreadFactory 的 BackgroundThreadFactory 类）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T21:44:18.823

`ThreadFactory`围绕 a 包裹一个线程`Runnable`。因此，它正在创建其他类型的方法，它将在启动时`Thread`调用`run()`您的方法。`BackgroundThread`

可能您想要做的是创建自己的`ThreadFactory`实现来创建`BackgroundThread`s.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T21:49:39.863

> 但是 mvThreadSource.newThread(new BackgroundThread()) 返回的 Thread 实际上应该是 BackgroundThread 的一个实例

什么让你有那个想法？

是什么让您认为首先传递 to 的实例是个好`Thread`主意`ThreadFactory.newThread`？我相信在某些情况下，创建`Thread`实例而不启动它们实际上会导致内存泄漏。（很可能不在 Android 上，请注意。）

[`ThreadFactory.newThread`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadFactory.html#newThread%28java.lang.Runnable%29)参数为类型`Runnable`而不是类型是有原因的`Thread`- 它只是*“*应该运行的操作”而不是线程。`ThreadFactory`创建线程以运行操作是 的工作 - 这就是它被称为的原因`ThreadFactory`:)

您*可以*创建自己的`ThreadFactory`创建`BackgroundThread`实例，但不清楚为什么要首先这样做。您在这里的实际要求是什么？也许您实际上不应该构建一个`List<BackgroundThread>`，而是`List<BackgroundRunnable>`在哪里构建一个`BackgroundRunnable`接口，该接口扩展`Runnable`并具有您想要的任何额外方法...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T21:46:32.223

不，ThreadFactory.newThread 返回一个线程：

```
class SimpleThreadFactory implements ThreadFactory {
    public Thread newThread(Runnable r) {
        return new Thread(r);
    }
} 
```

newThread 返回的线程不是代码中的 BackGroundThread --> ClassCastException。

请注意，newThread 的输入参数采用 Runnable。您的 BackGroundThread 是可运行的，但 newThread 并不意味着接受线程。它应该接受将被包装到线程中的 Runnables。

# php - 获取Nginx中URL问号后的所有信息

> ID：14761522
> 
> 赞同：0
> 
> 时间：2013-02-07T21:41:08.617
> 
> 标签：php, nginx

我正在尝试创建一个页面，允许我`www.example.com/create?453lk6m4y`通过该页面访问并创建链接到该 ID 的帐户`createUser.php?id=453lk6m4y`。我遇到的问题是，如果我将它直接传递给 PHP 脚本，GET 请求会将键设置为`453lk6m4y`，将值设置为空。

换句话说，如果我访问那个 url，页面就会理解 GET 请求

```
Array
(
    [453lk6m4y] => 
) 
```

我想通过 Nginx 重写来重写 URL。到目前为止我有这个：

`rewrite ^/create(\?.*)?$ /createUser.php?id=$1 last; #user creation page`

但是，此重写更改了 get 请求以反映以下内容：

```
Array
(
    [id] => 
    [453lk6m4y] => 
) 
```

任何重写 url 以便 GET 请求反映的方法

```
Array
(
    [id] => 453lk6m4y
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:06:21.620

首先，我实际上不确定是否`www.example.com/create?453lk6m4y`是有效的网址：

*   `?`被定义为位置和（获取）参数之间的分隔符
*   获取参数通常是通常的形式`<parameter>=<value>`，不同参数之间有`&`分隔符

也就是说，如果您查看[http://wiki.nginx.org/HttpCoreModule#Variables](http://wiki.nginx.org/HttpCoreModule#Variables)，您将看到 nginx 中可用的所有标准变量：

*   具体来说，`$args`-variable 将保存整个 get 参数，即之后的所有内容`?`
*   您还可以使用`$arg_PARAMETER`-variables 来访问各个参数值​​。（所以如果你有一个 url`example.org/createuser.php?id=1234&page=abc`那么你有一个`$arg_id`带有 value`1234`的变量和一个`$arg_page`带有 value的变量`abc`）

# python - 读取 XML

> ID：14761524
> 
> 赞同：0
> 
> 时间：2013-02-07T21:41:24.827
> 
> 标签：python, xml

我试图从中提取作者：

```
<icon>
    <tags>
        <tag>steam</tag>
    </tags>
    <author>Author Name</author>
    <authorwebsite>http://www.domain.com/</authorwebsite>
    <license>
        Creative Commons (Attribution-Noncommercial-Share Alike 3.0 Unported)
    </license>
    <licensewebsite>http://creativecommons.org/licenses/by-nc-sa/3.0/</licensewebsite>
    <iconset>Name</iconset>
    <iconsetid>slug</iconsetid>
    <attribution/>
    <additionalsizes>
        <icon>
            <id>99633</id>
            <size>128</size>
            <tags/>
            <image>
                http://url1
            </image>
        </icon>
        <icon>
            <id>99633</id>
            <size>256</size>
            <tags/>
            <image>
                http://url2
            </image>
        </icon>
        <icon>
            <id>99633</id>
            <size>512</size>
            <tags/>
            <image>
                http://url3
            </image>
        </icon>
    </additionalsizes>
</icon> 
```

我试过了：

```
name = dom.getElementsByTagName('author')
print name[0].firstChild.nodeValue 
```

AttributeError：“NoneType”对象没有属性“nodeValue”

和：

```
name = dom.getElementsByTagName('author')
print " ".join(t.nodeValue for t in name[0].childNodes if t.nodeType == t.TEXT_NODE) 
```

返回空字符串。

怎么了？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:59:55.217

使用[ElementTree](http://docs.python.org/2/library/xml.etree.elementtree.html)，正如@Martijn Pieters 所建议的那样：

```
from xml.etree import ElementTree
tree = ElementTree.fromstring('<icon><author>Author Name</author></icon>')
print tree.find('author').text 
```

更多示例： http: [//www.doughellmann.com/PyMOTW/xml/etree/ElementTree/parse.html](http://www.doughellmann.com/PyMOTW/xml/etree/ElementTree/parse.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T22:01:35.867

您忘记从图标标签中获取作者

```
from xml.dom.minidom import parse
dom = parse('test.xml')
icon = dom.getElementsByTagName('icon')[0]
author = icon.getElementsByTagName('author')[0]
print author.firstChild.nodeValue 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T22:03:10.853

使用 lxml 轻松实现：

```
from lxml import etree
dom=etree.fromstring(XML_DOC)
dom.xpath('/icon/author/text()')[0] 
```

返回“作者姓名”

# asp.net - 向表中添加行需要添加到视图状态？

> ID：14761525
> 
> 赞同：2
> 
> 时间：2013-02-07T21:41:33.283
> 
> 标签：asp.net, vb.net, viewstate

您好，我从一个单行 5 列的表开始。我添加了一个按钮和返回代码来添加额外的行。第一行显示正常，但之后保持在 2 行。正在调试页面。我已经阅读了 viewstate 我只是不完全了解如何添加它，如果这有意义的话。

编辑

```
 <asp:UpdatePanel ID="upTable" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="true">
    <Triggers>
            <asp:AsyncPostBackTrigger ControlID="btnNewRow" EventName ="click" />
    </Triggers> 
    <ContentTemplate>
            <div>
                <asp:Table ID="tblPrice" runat="server" GridLines="Both">
                    <asp:TableRow>
                        <asp:TableCell>QTY.</asp:TableCell>
                        <asp:TableCell>MATERIAL</asp:TableCell>
                        <asp:TableCell>COST</asp:TableCell>
                        <asp:TableCell>PRICE</asp:TableCell>
                        <asp:TableCell>TOTAL</asp:TableCell>
                    </asp:TableRow>
                    <asp:TableRow>
                        <asp:TableCell>
                            <asp:TextBox ID="tbQty1" runat="server" Width="40" Text="0"></asp:TextBox>
                        </asp:TableCell>
                        <asp:TableCell>
                            <asp:TextBox ID="tbMaterial1" runat="server"></asp:TextBox>
                        </asp:TableCell>
                        <asp:TableCell>
                            <asp:TextBox ID="tbCost1" runat="server" OnTextChanged="PriceChange" AutoPostBack ="true" Text="0"></asp:TextBox>
                            <asp:MaskedEditExtender ID="meeCost1" runat="server" Mask="99,999,999.99" DisplayMoney="Left" TargetControlID="tbCost1" MaskType="Number">
                            </asp:MaskedEditExtender>
                        </asp:TableCell>
                        <asp:TableCell>
                            <asp:TextBox ID="tbPrice1" runat="server" OnTextChanged="PriceChange" AutoPostBack="true"  Text="0"></asp:TextBox>
                            <asp:MaskedEditExtender ID="meePrice1" runat="server" Mask="99,999,999.99" DisplayMoney="Left" TargetControlID="tbPrice1" MaskType="Number">
                            </asp:MaskedEditExtender>
                        </asp:TableCell>
                        <asp:TableCell>
                            <asp:Label ID="lblTotal1" runat="server" Text="$0.00"></asp:Label>
                        </asp:TableCell>
                    </asp:TableRow>
                </asp:Table>
            </div>
        </ContentTemplate>
    </asp:UpdatePanel>
    <asp:Button ID="btnNewRow" runat="server" Text="Add Row" /> 
```

VB

```
Protected Sub btnNewRow_Click(sender As Object, e As EventArgs) Handles btnNewRow.Click
    Dim TRow As New TableRow()
    Dim qtyCell As New TableCell()
    Dim materialCell As New TableCell()
    Dim costCell As New TableCell()
    Dim priceCell As New TableCell()
    Dim totalCell As New TableCell()

    Dim qtyTB As New TextBox()
    Dim materialTB As New TextBox()
    Dim costTB As New TextBox()
    Dim priceTB As New TextBox()

    Dim costMEE As New AjaxControlToolkit.MaskedEditExtender
    Dim priceMEE As New AjaxControlToolkit.MaskedEditExtender

    Dim rowsCount As Integer = tblPrice.Rows.Count
    Dim rowsString As String = rowsCount.ToString

    qtyTB.Width = 40

    'configure the masked edit extender controls
    With costMEE
        .ID = "meeCost" & rowsString
        .Mask = "99,999,999.99"
        .DisplayMoney = AjaxControlToolkit.MaskedEditShowSymbol.Left
        .TargetControlID = "tbCost" & rowsString
        .MaskType = AjaxControlToolkit.MaskedEditType.Number
    End With
    With priceMEE
        .ID = "meePrice" & rowsString
        .Mask = "99,999,999.99"
        .DisplayMoney = AjaxControlToolkit.MaskedEditShowSymbol.Left
        .TargetControlID = "tbPrice" & rowsString
        .MaskType = AjaxControlToolkit.MaskedEditType.Number
    End With

    'Add masked edit extender to textboxes
    costTB.Controls.Add(costMEE)
    priceTB.Controls.Add(priceMEE)

    'add id names to the textboxes
    qtyTB.ID = "tbQty" & rowsString
    materialTB.ID = "tbMaterial" & rowsString
    costTB.ID = "tbCost" & rowsString
    priceTB.ID = "tbPrice" & rowsString

    'Add textbox to the table cells
    qtyCell.Controls.Add(qtyTB)
    materialCell.Controls.Add(materialTB)
    costCell.Controls.Add(costTB)
    priceCell.Controls.Add(priceTB)

    'Add table cells to the table row
    TRow.Cells.Add(qtyCell)
    TRow.Cells.Add(materialCell)
    TRow.Cells.Add(costCell)
    TRow.Cells.Add(priceCell)
    TRow.Cells.Add(totalCell)

    'Add table row to the table
    tblPrice.Rows.Add(TRow)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:15:32.240

您不能在 ViewState 中存储 Table 对象，它不可序列化。考虑将您的代码更改为使用[DataTable](http://msdn.microsoft.com/en-us/library/system.data.datatable%28v=vs.100%29.aspx)，否则您将需要手动编写代码将您的表转换为 DataTable ，这将是太多不必要的服务器处理。

将其更改为 DataTable 后，只需搜索 -“*在 ViewState VB.NET 中存储 DataTable* ”，就有足够多的示例了

# opengl - OpenGL合并多个帧缓冲区

> ID：14761526
> 
> 赞同：0
> 
> 时间：2013-02-07T21:41:38.890
> 
> 标签：opengl, merge, framebuffer

我有一个分成多个 z 级别的 2D 场景。对于每个 z 级别，我都有一个帧缓冲区。我如何将这些帧缓冲区合并到最终的帧缓冲区中，它将被显示（整个场景）

这背后的想法：大多数动画（等）将发生在更高的 z 级别。使用单独的帧缓冲区，我可以只渲染 z 级别的变化，所以我不会最终重绘背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:39:23.347

如果这些帧缓冲区由纹理作为颜色附件支持，则只需将这些纹理全视口绘制回前面，并进行深度测试并禁用写入和启用混合。

# c - 将多个数据加载到命令行 c

> ID：14761527
> 
> 赞同：0
> 
> 时间：2013-02-07T21:41:43.073
> 
> 标签：c, command-line

嗨，我有一个 ac 程序，它根据 14 个不同的参数计算分数（每人）：

```
$ ./ScorecommandLine 30 0 0 0 0 0 35 1 1 1 130 1 1 1
0.057748 
```

但是目前我一次只能计算一个分数。我想做的是为很多不同的人多次加载参数，而不是这样做：

```
$ ./ScorecommandLine 150 0 0 0 0 0 35 1 1 1 130 1 1 1
    0.0577487
$ ./ScorecommandLine 30 1 0 10 4 0 31 1 15 1 90 1 4 1
    0.0897333
$ ./ScorecommandLine 50 0 0 9 0 0 25 1 3 1 123 1 0 0
    0.4567748
$ ./ScorecommandLine 30 0 1 0 0 8 35 1 1 1 130 1 1 1
    0.0838395
$ ./ScorecommandLine 30 1 1 0 1 0 65 4 4 1 32 1 3 1
    0.0495855 
```

我必须运行命令 5 次并且每次都必须为每个人输入新数据，我宁愿将数据保存在 csv 文件中并将其加载到命令行中，以便我的程序一次性返回所有分数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T21:45:45.043

我建议用 打开文件，用`fopen()`读取每一行`fgets()`，然后用 解析出数字`sscanf()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T21:52:08.310

你已经有了正确的想法！你的程序是完美的，它只需要被调用 N 次就可以完成一项工作，而且这一切都可以定义，就像你在 .csv 文件中所说的那样。

现在您所需要的只是一个读取 .csv 文件并调用您的程序 N 次来完成工作的程序。一个很好的方法是使用单独的 c 程序并使用`popen`. 更好的是，因为这是一项小工作，所以编写一个 shell 脚本来为你做这件事。

使用类似的东西`popen`非常简单，也很令人兴奋；尝试[The Art of Linux Programming](http://www.faqs.org/docs/artu/ch01s06.html#id2877537)以了解如何开始。

如果您没有时间学习`popen`，那么您可以随时编辑您的原始程序。例如，只需检查第一个参数是否为“-csv”，如果是，则调用加载 csv 文件的单独函数，并根据需要进入 while 循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T21:49:01.377

让您的程序从`stdin`using读取整行`fgets`，例如在 while 循环内。然后使用`sscanf`将整行解析为您的代码需要的变量。仍在 while 循环内，运行生成分数的位。

编译程序后 - 假装它是 myprog：

```
myprog < myfile.csv 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T21:57:36.520

一个更简单的方法是做这样的事情：

```
#include <stdio.h>

void doYourCalculation(int *iArray) { 
   /*do whatever you do*/
}

int main(int argc, char *argv[])
{
  int iArray[14];
  int i = 0;
  while(1){
    if(scanf("%d",&iArray[i]) != 1){
      break;
    }
    i++;
    if(i == 14) {
      i = 0;
      doYourCalculation(iArray);
    }
  }
  return 0;
} 
```

由于您使用的是 unix/linux，因此请利用 shell：

在终端中发出此命令：

```
$ cat your_data_file.dat | ScorecommandLine 
```

your_data_file.dat 看起来像：

```
150 0 0 0 0 0 35 1 1 1 130 1 1 1
130 0 0 0 0 0 25 1 1 1 150 2 4 3
50 0 0 9 0 0 25 1 3 1 123 1 0 0
- 
```

最后`-`的 标记输入结束。

编程的哲学是使其尽可能简单和准确。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T21:46:26.557

我建议您编写简单的 shell 脚本来读取文件并在 while 循环中将参数传递给您的程序。[这里](https://stackoverflow.com/questions/9736202/bash-read-file-line-into-array)例如描述了如何在 bash 中读取 csv 文件。也检查[一下](https://stackoverflow.com/questions/3017128/how-do-you-read-a-csv-file-into-a-two-dimensional-array-in-bash)。

# python - Django：检查对象是否存在但不是对象的当前实例

> ID：14761528
> 
> 赞同：1
> 
> 时间：2013-02-07T21:41:44.747
> 
> 标签：python, django, django-validation

我已经为一个项目组装了一个基本的 CMS 系统，并且我正在添加一个订单系统，以便您可以在导航栏中对创建的页面进行排序。不幸的是，我编写的自定义验证器有点激进，并且在您编辑页面时会引发错误，因为正确地，该订单已经存在于数据库中。

表单基于的模型：

```
class Page(models.Model):
page_name = models.CharField(max_length=100)
page_content = models.CharField(max_length=16777000)
link = models.URLField(blank=True)
order = models.IntegerField() 
```

自定义验证器：

```
def clean_order(self):
    data = self.cleaned_data['order']
    pg = Page.objects.filter(order=data)
    if pg.count() > 0:
        raise forms.ValidationError("This order number already exists. Use another.")
    return data 
```

在执行更新时，我有什么办法让自定义验证器仅在新订单已经存在但不是当前页面对象的情况下引发错误。就像是：

```
pg = Page.objects.filter(order=data).filter(pk!=editpagepk) 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T22:01:26.997

使用[exclude](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.exclude)方法，如下所示：

```
pg = Page.objects.filter(order=data).exclude(pk=self.instance.pk) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T22:04:13.333

使用 Django查询集[`exclude`](https://docs.djangoproject.com/en/dev/topics/db/queries/#retrieving-specific-objects-with-filters)从结果中排除当前对象。假设您`id`在模型中有一个字段`Page`充当主键：

```
def clean_order(self):
    order = self.cleaned_data['order']
    pg = Page.objects.filter(order=order).exclude(id=self.instance.id)
    if pg.count() > 0:
        raise forms.ValidationError(" ... ")
    return data 
```

以上假设您使用的是 ModelForm，因为这是您需要找到通过 POST 提交的当前对象实例的内容`self.instance`。关于最后一点的更多细节[在这里](https://stackoverflow.com/a/4476701/1211429)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T18:23:33.657

我想您可以尝试查询匹配的对象并捕获异常：

```
try:
    Page.objects.filter(order=data).get(pk=editpagepk)
except Page.DoesNotExist:
    raise forms.ValidationError("...") 
```

# javascript - 表单验证 javascript 在 Joomla 文章中不起作用

> ID：14761531
> 
> 赞同：1
> 
> 时间：2013-02-07T21:42:03.580
> 
> 标签：javascript, forms, validation, joomla

我制作了一个自定义表单（您可以在此处查看：http: [//tylypahka.tk/pisteet/pisteet.php](http://tylypahka.tk/pisteet/pisteet.php)），它使用基于 javascript 的表单验证。我尝试将以下代码嵌入到带有 Flexi 内容插件的 Joomla 模块中，该插件允许模块中的自定义代码。

因此，如果我将模块放置在适当的位置，它工作得很好（你可以在这里测试它：http: [//tylypahka.tk/index.php/uutiset/78-pysyvae/75-tupapisteet](http://tylypahka.tk/index.php/uutiset/78-pysyvae/75-tupapisteet)）。但是，如果我尝试将完全相同的模块放入文章中，由于某种原因，验证 javascript 无法正常工作。我试图通过各种不同的插件嵌入模块，但它们似乎都没有让 javascript 工作。我在模块中有以下代码：

```
<link rel="stylesheet" type="text/css" href="http://tylypahka.tk/pisteet/pisteet.css">
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://tylypahka.tk/pisteet/jquery.validate.min.js" type="text/javascript"></script>
<script>
$(document).ready(function(){
    $("#pisteet").validate({
  rules: {
    pisteet: {
      required: true,
      maxlength: 3
    }
  }
  });
  });
</script>

<div id="tupapisteet">
<div id="stylized" class="myform">
  <h1>Tupapisteet</h1>
   <p>Lisää tai vähennä tupapisteitä tuvilta, hyvän syyn kera</p>
        <form method="post" action="#" id="pisteet">

          <label for="nimi" class="label">Oma nimi<span class="small">Kirjoita oma nimimerkkisi</span></label>
          <input type="text" name="nimi" id="nimi" class="required">
          <br><br><br>

          <label for="tupa" class="label">Tupa<span class="small">Valitse tupa</span></label>
          <select name="tupa">
              <option type="text" name="Rohkelikko" id="Rohkelikko" value="Rohkelikko">Rohkelikko</option>
              <option type="text" name="Luihuinen" id="Luihuinen" value="Luihuinen">Luihuinen</option>
              <option type="text" name="Korpinkynsi" id="Korpinkynsi" value="Korpinkynsi">Korpinkynsi</option>
              <option type="text" name="Puuskupuh" id="Puuskupuh" value="Puuskupuh">Puuskupuh</option>
          </select>
          <br><br><br>

          <label for="pisteet" class="label">Pisteet<span class="small">Jos haluat vähentää pisteitä, laita eteen -</span></label>
          <input type="text" name="pisteet" id="pisteet" class="required number" maxlength="10">
          <br><br><br><br>

          <label for="syy" class="label">Syy<span class="small">Kirjoita tähän hyvät perustelut</span></label>
          <textarea type="text" name="syy" id="syy" class="required"></textarea>
          <br><br><br>

          <button type="submit" name="submit" value="submit">Oikeus tapahtukoon!</button>
        </form>
  </div> 
```

有谁知道这里可能是什么问题？任何建议或帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:33:51.137

您的网站上运行了 3 个版本的 jQuery，所以我强烈感觉这可能是由于 jQuery 冲突。

我不确定您在哪里添加代码，但请尝试使用我们用来检测是否已加载 jQuery 的代码。如果不是，它会导入它。

```
<?php
  if(!JFactory::getApplication()->get('jquery')){
     JFactory::getApplication()->set('jquery',true);
     $document = JFactory::getDocument();
     $document->addScript(JURI::root() . "components/your_component/jquery.js");
  }
?> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:56:18.870

我认为由于与 mootools 库冲突，您的代码无法正常工作。尝试使用`jQuery.noConflict()`.

```
 var $j = jQuery.noConflict();
    $j(document).ready(function(){
        $j("#pisteet").validate({
      rules: {
        pisteet: {
          required: true,
          maxlength: 3
        }
      }
      });
 }); 
```

希望这会有所帮助。

# c# - 亚马逊 MWS C#/.NET SubmitFeed：尝试签署请求时出现字符串引用错误

> ID：14761532
> 
> 赞同：1
> 
> 时间：2013-02-07T21:42:08.173
> 
> 标签：c#, asp.net, amazon-web-services

在为 OrderFulfillment 请求构建 AmazonEnvelope、将该信封的内容添加到 SubmitFeedRequest 并设置 MarketplaceWebServiceClient 之后 - 所有这些都没有错误 - 我停止尝试提交提要。异常消息的确切措辞是：

```
String reference not set to an instance of a String.
Parameter name: s 
```

这引用了一个称为 GetBytes 的系统级方法，当 WebServiceClient 尝试对数据进行签名时会调用该方法。完整的堆栈跟踪：

```
at System.Text.Encoding.GetBytes(String s)
at MarketplaceWebService.MarketplaceWebServiceClient.Sign(String data, String key, KeyedHashAlgorithm algorithm)
at MarketplaceWebService.MarketplaceWebServiceClient.SignParameters(IDictionary`2 parameters, String key)
at MarketplaceWebService.MarketplaceWebServiceClient.AddRequiredParameters(IDictionary`2 parameters)
at MarketplaceWebService.MarketplaceWebServiceClient.InvokeT,K(IDictionary`2 parameters, K clazz)
at MarketplaceWebService.MarketplaceWebServiceClient.SubmitFeed(SubmitFeedRequest request)
at ProcessTracking.ProcessTracking.Execute(Int32 companyId) in c:\ProcessTracking\ProcessTracking\ProcessTracking.cs:line 281" 
```

也许我错过了提要所需的数据？以下是提交提交请求的完整代码：

```
/** build the feed **/

var envelope = new AmazonEnvelope
{
    Header = new Header
    {
        DocumentVersion = "1.01",
        MerchantIdentifier = ConfigurationManager.AppSettings["AmazonMerchantId"]
    },
    MarketplaceName = ConfigurationManager.AppSettings["AmazonMarketplaceId"],
    EffectiveDate = DateTime.Now,
    EffectiveDateSpecified = true,
    MessageType = AmazonEnvelopeMessageType.OrderFulfillment
};

envelope.Message = new AmazonEnvelopeMessage[1];
envelope.Message[0] = new AmazonEnvelopeMessage
{
    MessageID = order.AltPaymentId,
    OperationType = AmazonEnvelopeMessageOperationType.Update,
    OperationTypeSpecified = true
};

var products = new OrderFulfillmentItem[order.OrderLineItems.Count];
var count = 0;
foreach (var product in order.OrderLineItems)
{
    foreach (var option in product.OrderLineItemOptions)
    {
        var qty = (option.PriceAdder == 0) ? product.Quantity.ToString() : "1";
        products[count] = new OrderFulfillmentItem
        {
            ItemElementName = ItemChoiceType3.MerchantOrderItemID,
            MerchantFulfillmentItemID = option.ProductAttributeId.ToString(),
            Quantity = qty
        };

        count++;
    }
}

envelope.Message[0].Item = new OrderFulfillment
{
    ItemElementName = ItemChoiceType2.AmazonOrderID,
    MerchantFulfillmentID = order.AltPaymentId,
    FulfillmentDate = DateTime.Now,
    FulfillmentData = new OrderFulfillmentFulfillmentData
    {
        ShippingMethod = order.ShippingType.Name,
        ShipperTrackingNumber = order.TrackingNumber,
        Item = order.Shipper == "FedEx" ? CarrierCode.FedEx : CarrierCode.UPS,
    },
    Item1 = products
};

var myserializer = new XmlSerializer(typeof(AmazonEnvelope));
var mywriter = new StreamWriter(Environment.CurrentDirectory + "\\AmazonOrders\\Details-" + order.ID.ToString() + ".xml");
myserializer.Serialize(mywriter, envelope);
mywriter.Close();

/** submit the feed **/
var request = new SubmitFeedRequest
{
    Merchant = ConfigurationManager.AppSettings["AmazonMerchantId"],
    Marketplace = ConfigurationManager.AppSettings["AmazonMarketplaceId"],
    FeedType = "_POST_ORDER_FULFILLMENT_DATA_",
    FeedContent = File.Open(Environment.CurrentDirectory + "\\AmazonOrders\\Details-" + order.ID.ToString() + ".xml", FileMode.Open, FileAccess.Read)
};

request.ContentMD5 = MarketplaceWebServiceClient.CalculateContentMD5(request.FeedContent);

var serviceConfig = new MarketplaceWebServiceConfig
{
    serviceURL = "https://mws.amazonservices.com",
    marketplaceId = ConfigurationManager.AppSettings["AmazonMarketplaceId"],
    accessKey = ConfigurationManager.AppSettings["AmazonAWSkeyId"],
    secretKey = ConfigurationManager.AppSettings["AmazonAWSsecretId"],
};

var serviceFeed =
    new MarketplaceWebServiceClient(
        ConfigurationManager.AppSettings["AmazonAWSkeyId"],
        ConfigurationManager.AppSettings["AmazonAWSsecretId"],
        "ProcessTracking",
        "2.0",
        serviceConfig
    );

var response = serviceFeed.SubmitFeed(request); 
```

对不起所有的文字，但这个错误不是很具有描述性......任何和所有的帮助都非常感谢！

# c# - 如何按泛型类型转换

> ID：14761536
> 
> 赞同：-4
> 
> 时间：2013-02-07T21:42:47.600
> 
> 标签：c#, generics, casting, abstract-class

我想使用泛型类型进行转换，有什么简单的方法可以做到这一点吗？这是一个例子：

```
var resource = viewBase.getAnyInstance(resourceName) as T; 
```

其中 T 是现有类型之一。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:08:18.800

A`Generic`是一种处理多种类型的奇特方式，`Objects`而无需对您的操作有任何清晰简洁的了解。这本身就产生了相当大的灵活性，因为它可以缓解您在使用`Boxing`和`Unboxing`.

为了帮助`Generics`您澄清，我将使用该`List`示例。主要是因为至少对我而言，它确实`Casting`与`Generics`.

**问题是，如果你尝试过，`Cast`你`List Generics`会很快看到......你不能。**

在我的示例中，我将使用 Shapes，因此理论上您有三个类。

课程：

*   圆圈
*   正方形
*   多边形

当你学会了`Casting`这很容易做到。

```
int i = 10;
string j = "I have ";
string d = j + (string)i; 
```

并且您已将您的`variable i`转换为`String`. 只要类型合适；你没事吧。如果没有，您将遇到异常。

当你介绍`Generics`它时，它会迅速变化。

现在，正如您在上面看到的，我们有`Classes`三个代表`Shapes`. 现在 a`Shape`将是一个普通的`Object`，在技术上应该被那些 继承`Shapes`。所以`List<Square>`不能继承，`List<Circle>`反之亦然。这似乎是定量的，似乎是合理的。但不是，为什么呢？

这是由于`Constructed Type`发生数据转换的地方。

因此，在某些情况下，`List`您必须编写 a`Loop`才能将数据从一个传输`List`到另一个。

所以这是`Generics`非常有用的地方。

```
// Square List:
List<Square> lSq = new List<Square>();

   lSq.Add(new Square("Red Square"));
   lSq.Add(new Square("Blue Square")); 
```

我们创建了一个`Square List`来保存我们的对象。

```
// Generic Shape
List<Shape> shp = lSq.ConvertAll(
   new Converter<Square, Shape>(lSqToshp)); 
```

我们实际上已经`Generic`将`Cast`这些值直接用于我们的 new `List`。

现在，我明白这不是你的问题。您的询问：

> 我想使用泛型类型进行转换，有什么简单的方法可以做到这一点吗？

简短的回答，是的。但是变化会因您的目标和用途而异。你提到它是一个`Abstract Class`.

现在，您是否正在尝试执行以下操作：

```
public void SomeMethod(object caller)
{
   someClass<T> info = caller as someClass<T>;
   if (info != null)
   {}
} 
```

那将描述`Casting`为`Abstract Class`.

```
var detail = (SomeClassBase)viewBase.getAnyInstance(detailName); 
```

有很多变化。

一个听起来与您[在此处](https://stackoverflow.com/questions/1175235/casting-to-generic-abstract-class-shows-t-as-unresolved-symbol)模糊的问题相似的帖子。另一篇文章可能会[在此处](https://stackoverflow.com/questions/9949406/best-way-to-do-this-generic-abstract-class-in-c)提供更多详细信息。需要注意的是，如果你试图传递一个`Object`已知的，为什么不直接使用调用者呢？

不幸的是，您的问题需要更多详细信息才能获得更好的答案。但是听上去你的理解有困难`Generics`。

# c++ - 有没有办法在 c++ 中使用异常而不会使我增加 60k 的二进制大小？

> ID：14761541
> 
> 赞同：9
> 
> 时间：2013-02-07T21:43:10.693
> 
> 标签：c++, compiler-construction, exception-handling, embedded

我在一个嵌入式平台上工作，我不习惯将 60k 添加到我的二进制文件中。无论如何，有一些论点可以避免嵌入式系统上的异常，但我认为它们中的大多数都是虚假的。例外是有道理的，但我无法证明目前的成本是合理的。我正在使用 gcc 4.6.3，也许我错过了一个选项，或者这可能只是异常的开销。我试过-Os，并将例外更改为longjmp，但无济于事。我可能错过了什么。

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:58:13.590

You can turn off exceptions in GCC using [`-fno-exceptions`](http://gcc.gnu.org/onlinedocs/libstdc++/manual/using_exceptions.html).

However, you can't have your cake and eat it too. Turning off exceptions means you can't catch them, and it will also break if you link against code compiled with exceptions on. But it does reduce the binary size as you intended.

Code without exceptions (but with the same level of error checking) is ugly as sin but it's a price you have to pay.

Lovely exception-free robust code example in C :)

```
error_t foo(void) {
    if (!do_foo()) {
        error_code = E_FOO;
        goto bail;
    }
    if (!do_bar()) {
        error_code = E_BAR;
        goto bail;
    }
    /* repeat 100 times */
bail:
    cleanup();
    return error_code;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T22:40:17.693

**第一，不！**

异常处理会带来一些成本，主要是要求 RTTI 支持主要是恕我直言（到目前为止还没有通过实验证明这一点）。RTTI 支持将导致代码文本段的一些费用使用，特别是如果有很多模板实例化（例如，广泛使用具有多种类型的 STL 模板类/容器类）。

另一方面，与减少 newlib 所需实现的其他可能性相比，60k 开销的成本并没有那么多。

**你真的应该三思而后行让异常支持消失！**

有趣的是，我今天和我的同事讨论了这个话题，当时我们面临一个明显由内存不足情况引起的错误。有问题的固件（以及它与 FreeRTOS 的操作系统绑定）不支持异常，但如果您无法使用`new()`. 这可能会使用一些 STL 诱导算法发生，并且您没有机会使用`try/catch`故障块（例如使用简单的`std::vector`）来拦截它。

因此，您应该决定如何处理错误情况，不使用或不使用异常，并确保提供一致的行为，例如使用常见的 STL 模式等，并权衡您为`.text`节大小支付的成本。

# .net - 如何使用 .NET 反射来添加新的事件处理程序 - 需要一个小问题，非标准方法

> ID：14761543
> 
> 赞同：0
> 
> 时间：2013-02-07T21:43:11.707
> 
> 标签：.net, web-services, events, reflection, delegates

很久以前我上次在这里问一个问题:) 现在是时候再问一次了，因为我没有任何想法来实现我需要的东西......

需要注意的一件重要事情 - 我正在为 Windows Phone 7.5 编写应用程序，它等于 Silverlight 3.0，因此您可能建议的某些功能在那里不起作用（比如 iClientMessageInspector 在 SL 3.0/WP7.5 中不存在，或者我不能通过使用反射设置某个类的私有字段 - 值得一提）。

好的，我的目标是订阅生成的 Web 服务代理类的每个事件，其中事件名称以“已完成”结尾，并了解 Web 操作是否因异常而失败（所以 - 目标是有一个地方来处理错误来自项目中的所有 Web 服务 - 例如，由于会话结束，用户未经过身份验证）。

我有一个类来创建所有 Web 服务客户端（在我的项目中大约有 4 个 Web 服务引用），因此只有一个方法来处理所有 Web 发起的 Web 服务调用中出现的所有异常可能很有用-服务类型。此类名称是 WebManager，它包含创建 Web 服务的属性（一种 Web 服务类型的 1 个属性），如下所示：

```
 public SomeServiceReference.AuthenticationServiceClient AuthenticationService
    {
        get
        {
            var web = new SomeServiceReference.AuthenticationServiceClient();  
            // here i plan to subscribe to xxxCompleted event 
            // i'll provide final code below            
            return web;
        }
    } 
```

在生成的 Web 服务代理类（Reference.cs）中，我有几个事件，每次 Web 操作结束时都会触发它们，它们都以这种模式命名：“Web_service_OperationName”+“Completed”，示例：

```
public event System.EventHandler<SomeOperationCompletedEventArgs> SomeOperationCompleted; 
```

另一件重要的事情要提到： SomeOperationCompletedEventArgs 是从标准 System.ComponentModel.AsyncCompletedEventArgs 继承的，所以在 WebManager 类中我可以编写一些方法并将其用作默认事件处理程序：

```
public void TestEventHandler(object sender, System.ComponentModel.AsyncCompletedEventArgs e)
{
    // analyze web-call results here: 
    // do we have exception or web-operation completed successfully
    // if (e.Error != null) { /*do something there*/  }
} 
```

所以我可以这样做，以便订阅 SomeOperationCompleted 事件并了解操作是否失败：

```
 public SomeServiceReference.AuthenticationServiceClient AuthenticationService
    {
        get
        {
            var web = new SomeServiceReference.AuthenticationServiceClient();  
            web.SomeOperationCompleted += TestEventHandler;          
            return web;
        }
    } 
```

这种方法效果很好，如果您在 TestEventHandler 方法中放置断点，您将在“e”参数中看到操作详细信息。

但这不是为 Reference.cs 中的每个事件编写所有事件订阅的最佳方式，因此我试图找到一种方法来自动化它。

我尝试为 Reference.cs 中的所有事件添加新的事件处理程序，如下所示：

```
 public SomeServiceReference.AuthenticationServiceClient AuthenticationService
    {
        get
        {
            var web = new SomeServiceReference.AuthenticationServiceClient();
            var bindingFlags = BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance;
            var type = web.GetType();
            var eventsCompleted = type.GetEvents(bindingFlags).Where(e => e.Name.EndsWith("Completed")).ToArray();
            var methodInfo = this.GetType().GetMethod("TestEventHandler");
            foreach (var eventInfo in eventsCompleted)
            {
                //Delegate handler = Delegate.CreateDelegate(eventInfo.EventHandlerType, this, methodInfo);
                Delegate handler = Delegate.CreateDelegate(typeof(System.EventHandler<System.ComponentModel.AsyncCompletedEventArgs>), this, methodInfo);
                //eventInfo.AddEventHandler(this, handler);
                MethodInfo addHandler = eventInfo.GetAddMethod();
                Object[] addHandlerArgs = { handler };
                //var p = addHandler.GetParameters();
                addHandler.Invoke(web, addHandlerArgs);
            }
            return web;
        }
    } 
```

这种方法不像 SomeOperationCompleted 那样工作，`System.EventHandler <SomeOperationCompletedEventArgs> delegate`并且 TestEventHandler 方法具有`System.EventHandler <System.ComponentModel.AsyncCompletedEventArgs>`参数类型。同时我可以写`web.SomeOperationCompleted += TestEventHandler;`

我应该如何修改我的代码，以便能够在我的 WebManager 类中订阅这些事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:01:48.560

像往常一样，在我发布我的问题后，我就能回答它:)

此代码有效：

```
 public void TestEventHandler(object sender, System.ComponentModel.AsyncCompletedEventArgs e)
    {
        // analyze web-call results here: 
        // do we have exception or web-operation completed successfully
        // if (e.Error != null) { /*do something there*/  }        
    }
    public SomeServiceReference.AuthenticationServiceClient AuthenticationService
    {
        get
        {
            var web = new SomeServiceReference.AuthenticationServiceClient();
            var bindingFlags = BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance;
            var type = web.GetType();
            var eventsCompleted = type.GetEvents(bindingFlags).Where(e => e.Name.EndsWith("Completed")).ToArray();
            var methodInfo = this.GetType().GetMethod("TestEventHandler");
            foreach (var eventInfo in eventsCompleted)
            {
                Delegate handler = Delegate.CreateDelegate(eventInfo.EventHandlerType, this, methodInfo);
                MethodInfo addHandler = eventInfo.GetAddMethod();
                Object[] addHandlerArgs = { handler };
                addHandler.Invoke(web, addHandlerArgs);
            }
            return web;
        }
    } 
```

# angularjs - 仅在令牌定义后才使 Angular $resource 请求起作用

> ID：14761546
> 
> 赞同：4
> 
> 时间：2013-02-07T21:43:18.213
> 
> 标签：angularjs, promise

我正在尝试使用 $resource 和请求包装器创建一个 REST 客户端。你可以看到下面的代码。一切正常，但我有一个问题。

RequestWrapper 模块用于设置访问令牌（来自片段 URI）。我需要的是能够阻止可能的请求，直到从 requestWrapper.set() 函数设置访问令牌。

```
resources.factory('RequestWrapper', ['$http', '$q', function($http, $q) {
  var scope;
  var requestWrapper = {};
  var deferred = $q.defer();

  // get info about the token
  requestWrapper.get = function() { return scope; };

  // Set the info related to the token
  requestWrapper.set = function(newScope) {
    scope = newScope;
    $http.defaults.headers.common['Authorization'] = 'Bearer ' + scope.token.access_token;

    // Here I resolve the promise
    deferred.resolve(true);
  };

  requestWrapper.wrap = function(resource, actions) {
    var wrappedResource = resource;
    for (var i=0; i < actions.length; i++) { request(wrappedResource, actions[i]); };
    return wrappedResource;
  };

  var request = function(resource, action) {

    resource['_' + action]  = resource[action];

    resource[action] = function(param, data, success, error) {
      if (scope && scope.token.expires_at < new Date()) {
        window.location.replace(scope.endpoint)
      } else {
        return resource['_' + action](param, data, success, error);
      }
    };
  };

  return requestWrapper;
}]);

// Example on using the Request Wrapper
resources.factory('Profile', ['RequestWrapper', '$resource', function(RequestWrapper, $resource) {
  var resource = $resource(endpoint + '/me');
  return RequestWrapper.wrap(resource, ['get']);
}]); 
```

我尝试使用 Promise（我不是专家），并且我得到了它背后的逻辑。我在模块初始化期间定义它，并在定义访问令牌后解决它。现在，我主要关心的是了解我可以将 promise.then() 方法放在哪里，以便仅在设置令牌时才开始请求。

```
deferred.promise.then(function() { ... }) 
```

我试图把它`resource['_' + action](param, data, success, error)`放在包装函数和其他一些地方，但我觉得自己很盲目。

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T22:36:22.873

为什么不使用 Session 服务来提供令牌，比如在其他控制器中`$scope.token`使用 a 触发后续操作？`$scope.$watch('token', ...)`

我建议您阅读`$http`AngularJS 文档中的页面，如果您仍想“阻止”请求，您可以使用拦截器（请参阅[http://code.angularjs.org/1.1.5/docs/api/ng.$ http](http://code.angularjs.org/1.1.5/docs/api/ng.%24http)）。

# ruby - 为什么 Proc#binding 在定义时显示变量已定义？才不是

> ID：14761552
> 
> 赞同：0
> 
> 时间：2013-02-07T21:43:38.790
> 
> 标签：ruby, metaprogramming

这个问题专门针对 Ruby 1.9.3：

```
p defined?(a)
p binding.eval "defined?(a)"
b = lambda { |x| x }
p b.binding.eval "defined?(a)" # This prints "local-variable"
p defined?(a) # This prints nil!
a = 2
p defined?(a)
p b.binding.eval "defined?(a)" 
```

让我困惑的是第四行。我不确定为什么这会打印“局部变量”而不是零。这似乎暗示 lambda 在某种程度上“看得更远”。（我`defined?`认为作为一名操作员与此有关。）

此外，虽然绑定说它已定义，但尝试像这样使用它：

```
p b.binding.eval "a" 
```

*在*第 6 行的赋值导致 NameError 之前。

编辑：我已经对此进行了测试

*   1.9.3-362
*   1.9.3-374
*   2.0.0-预览2

在所有情况下，我都会得到相同的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T01:23:10.937

发生的情况是调用`defined?`发生在解析时，并且由于`a`尚不存在变量，因此它`nil`按预期返回。但是，当您调用时`eval`，`defined?`它会延迟到运行时。但是`defined?`仍然是词法范围的，并且由于整个文件已经被解析和编译，因此该变量`a` *确实*存在，因为它是在解析时创建的，现在已经完成了。

我们可以在一个简化的例子中展示这一点：

```
defined? a         #=> nil
eval 'defined? a'  #=> "local-variable"
a = 2
defined? a         #=> "local-variable" 
```

但是如果我们根本不定义`a`：

```
defined? a         #=> nil
eval 'defined? a'  #=> nil 
```

正如您所看到的，它与 没有任何关系`binding`，而只是与在整个文件被解析后`eval`推迟对 till 的评估有关。`defined?`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:37:33.500

实际上是第六行是谜团的来源。即使代码没有执行，Ruby 也会在条件中创建对象。如果一个变量被赋值，它被隐式声明。 [这篇博文有一个快速的解释](http://ramenlabs.com/2010/02/26/rubys-surprising-handling-of-local-variables/)

我自己觉得这有点令人惊讶。至于您的代码，在一个新的 IRB 会话中，您应该看到“nil”作为第四行的输出，但是如果您多次运行代码，您的变量已经存在（以 Nil 对象的形式）并且您'会得到一个令人费解的消息，即存在局部变量。YMMV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:53:46.927

这是 Ruby 源代码解析器的一个特性。如果 Ruby 源代码中确实存在变量赋值，即使在程序执行期间从未调用它，它也会被初始化为 nil（因此它被定义）。第 6 行对局部变量*a* ( `a = 2`) 进行了赋值。*在第 3 行分配之后*定义它并不重要，因为它在源代码执行之前被 ruby​​ 解析器初始化为 nil。由于 lambda 没有引入新的作用域，它*知道**一个*变量，所以你会毫不奇怪地得到“局部变量”结果（a == nil）。有关详细信息，请参阅此[答案](https://stackoverflow.com/questions/4021477/in-ruby-why-after-starting-irb-foo-nil-says-undefined-error-and-foo-nil-gi#4023224)。

在 irb 中运行或传递给 ruby​​ 解释器之间的不同行为与上述段落直接相关。irb 逐行计算表达式（REPL），ruby 在执行之前解析整个源代码。

# android - 声明具有相同名称但类型不同的属性

> ID：14761556
> 
> 赞同：1
> 
> 时间：2013-02-07T21:43:41.737
> 
> 标签：android, eclipse, android-custom-view, custom-view

我正在尝试为不同的类声明属性，其中一些属性具有相同的名称，但在不同的类上具有不同的类型。这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="net.firouz.mastergardner.IntEditView">
        <attr name="caption" format="string" />
        <attr name="min_val" format="integer" />
        <attr name="max_val" format="integer" />
    </declare-styleable>
    <declare-styleable name="net.firouz.mastergardner.FloatEditView">
        <attr name="min_val" format="float" />
        <attr name="max_val" format="float" />
    </declare-styleable>    
</resources> 
```

但是eclipse抱怨属性已经被定义了`max_val`。`min_val`我怎样才能解决这个问题。

谢谢山姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T22:20:07.280

您可以使用以下两种解决方案中的任何一种

```
<?xml version="1.0" encoding="utf-8"?>
<attr name="min_val" format="float" />
<attr name="max_val" format="float" />
<resources>
    <declare-styleable name="net.firouz.mastergardner.IntEditView">
        <attr name="caption" format="string" />
        <attr name="min_val" />
        <attr name="max_val" />
    </declare-styleable>
    <declare-styleable name="net.firouz.mastergardner.FloatEditView">
        <attr name="min_val" />
        <attr name="max_val" />
    </declare-styleable>    
</resources> 
```

或者

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="net.firouz.mastergardner.IntEditView">
        <attr name="caption" format="string" />
        <attr name="min_val_i" format="integer" />
        <attr name="max_val_i" format="integer" />
    </declare-styleable>
    <declare-styleable name="net.firouz.mastergardner.FloatEditView">
        <attr name="min_val_f" format="float" />
        <attr name="max_val_f" format="float" />
    </declare-styleable>    
</resources> 
```

android 只为所有属性“R.attr”生成一个类，并且由于 min_val 和 max_val 已经被定义为整数，所以下次它看到它的声明为浮点数时会抱怨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T22:15:24.267

将您的属性直接添加为节点的子节点：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <attr name="min_val" format="float" />
    <attr name="max_val" format="float" />

    <declare-styleable name="net.firouz.mastergardner.IntEditView">
       <attr name="caption" format="string" />
       <attr name="min_val" />
       <attr name="max_val"/>
   </declare-styleable>

   <declare-styleable name="net.firouz.mastergardner.FloatEditView">
      <attr name="min_val" />
      <attr name="max_val"/>
   </declare-styleable>
</resources> 
```

否则，您必须为浮点和整数属性使用不同的属性名称

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T15:50:52.280

[在这篇](https://stackoverflow.com/questions/3441396/defining-custom-attrs)文章的帮助下，我找到了更好的答案。显然属性可以有多种格式，这使得以下代码有效并且可以为我工作。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <attr name="min_val" format="float|integer|reference" />
    <attr name="max_val" format="float|integer|reference" />
    <declare-styleable name="IntEditView">
        <attr name="Caption" format="string|reference" />
        <attr name="min_val" />
        <attr name="max_val" />
    </declare-styleable>
    <declare-styleable name="FloatEditView">
        <attr name="min_val" />
        <attr name="max_val" />
    </declare-styleable>    
</resources> 
```

谢谢大家

# ms-access - 如何从 Access 2010 VBA 连接到 Excel xls 文件

> ID：14761559
> 
> 赞同：1
> 
> 时间：2013-02-07T21:43:59.837
> 
> 标签：ms-access, vba

我为此搜索了很多，但我无法找到它..

我有一个大约 13K 行的 excel 文件 (.xls)。我希望能够从 Access 2010 VBA 连接到它，然后能够从中复制我工作所需的数据。

任何人都建议我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:04:43.957

您可以在 MS Access 中创建查询：

```
INSERT INTO Table1 
SELECT FROM [Excel 8.0;HDR=YES;DATABASE=Z:\Docs\Test.xlsm].[Sheet1$] s
WHERE s.SomeField=2 
```

或者

```
SELECT * INTO Table1 
FROM [Excel 8.0;HDR=YES;DATABASE=Z:\Docs\Test.xlsm].[Sheet1$] s
WHERE s.SomeField=2 
```

您还可以引用命名范围和范围。您还可以简单地设置查询并允许用户创建自己的生成表查询。

在 VBA 中

```
 Dim db As Database
 Set db = CurrentDB

 ssql="SELECT * INTO Table1 " _
  & "FROM [Excel 8.0;HDR=YES;DATABASE=Z:\Docs\Test.xlsm].[Sheet1$] s " _
  & "WHERE s.SomeField=2"
 db.Execute ssql, dbFailOnError 
```

# css - html单选按钮在所有浏览器中的样式相同

> ID：14761565
> 
> 赞同：1
> 
> 时间：2013-02-07T21:44:22.483
> 
> 标签：css, html, radio-button

如何在所有浏览器中获得相同样式的输入 type="radio"。我试图在页面上从左到右获取 3 个单选按钮，单选按钮和文本使用 css 在所有 IE9、Chrome 和 FF 中居中。我正在使用所有不同的类型或垂直对齐和填充，它们适用于某些浏览器但不是全部。

```
<input class="text-bottom" type="radio" value="1"  name="ProcessingComplete">Works in FF & Chrome
<input class="middle" type="radio" value="1"  name="ProcessingComplete">Works in IE
<input class="top" type="radio" value="1"  name="ProcessingComplete">Works in FF & Chrome

.middle
{
vertical-align: middle;
}
.top
{
vertical-align: top;
}
.text-bottom
{
vertical-align:text-bottom;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:11:43.057

[正如 Dario在 HTML/CSS 中的 Radio/checkbox alignment 中](https://stackoverflow.com/questions/396439/radio-checkbox-alignment-in-html-css)指出的那样，试试这个：

```
input[type="radio"] {
  margin-top: -1px;
  vertical-align: middle;
} 
```

另外，请记住，使用`<label>`标签包装单选按钮标签是最佳做法。

见[演示](http://jsfiddle.net/zaknotzak/wCykt/)。

# html - 修复html和css

> ID：14761569
> 
> 赞同：0
> 
> 时间：2013-02-07T21:44:29.897
> 
> 标签：html, css

首先..我该如何解决这个问题：http: [//jsfiddle.net/kLjcq/](http://jsfiddle.net/kLjcq/)

我在浏览器上看到这个格式正确..！

*   [http://picpaste.com/pics/Screenshot_from_2013-02-07_13_31_20-ViIvXLQf.1360273538.png](http://picpaste.com/pics/Screenshot_from_2013-02-07_13_31_20-ViIvXLQf.1360273538.png)
*   [http://picpaste.com/pics/Screenshot_from_2013-02-07_13_37_15-GBjeEsL8.1360273595.png](http://picpaste.com/pics/Screenshot_from_2013-02-07_13_37_15-GBjeEsL8.1360273595.png)

但是在小提琴上它把事情搞砸了.. :(发生了什么事？我该如何解决这个问题？

其次是..如果我有长字符串...它会射过标题“从xml读取...”的浅灰色边框。

我正在寻找的是该文本的最大传播达到该边界..然后..它中断到下一行..这样文本被正确封闭..

在 div.content

```
div.content {
    background-color: #add8e6;
    display:inline-block;
    margin-top: 20px;
    border-radius: 10px;
    position: relative;
    top:-5px;
} 
```

我试图添加限制和东西..但它将蓝色框限制为像素值，但我希望文本（和蓝色框）限制在某个限制之后，然后它会换行......任何线索。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:50:50.993

你绝对是定位`.checksheet`类。这会将其从文档流中删除。像你的 -class 等其他元素`.content`不关心它。

我不知道你为什么`position: absolute;`在这种情况下使用，但它会产生你的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:57:56.847

你的小提琴坏了，因为你使用的是绝对定位。当屏幕很窄时，清单中的元素会环绕，但后面的元素的定位方式是假设前面的元素只有 1 行而不是 2 行。

如果没有与您的第二个问题相关的实际标记，我们只能猜测实际问题是什么。但是，由于您在`pre`提供的示例中使用，因此罪魁祸首很可能在那里。您需要添加这样的属性：

```
white-space: pre-wrap 
```

如果没有这个属性，pre 标签一般不允许元素自动换行，这会导致它占用尽可能多的水平空间来显示所有的文本。

# android - 使用 L2CAP 连接到蓝牙 HID 设备（鼠标）

> ID：14761570
> 
> 赞同：4
> 
> 时间：2013-02-07T21:44:32.193
> 
> 标签：android, bluetooth, hid, l2cap

我正在寻找一种使用 L2CAP 连接到 HID 设备（鼠标）的方法，这适用于 android 应用程序。但是在接受连接时出现错误。我正在使用反射来创建套接字。但有些事情是错误的。有人可以指导我使用这种方式使用 L2CAP 连接到 HID 设备但没有生根的 android 示例代码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T16:55:42.103

您的**Android 设备**和**Android 版本**是什么？如果是 Android 4.2，他们现在正在使用我所理解的 Broadcom，因此我们只能创建 SDP 连接。

在我的 Nexus 7（带有 CyanogenMod ROM 10 的 Android 4.2.2）和 Wiimote 之间建立蓝牙连接时，我遇到了同样的问题。这是一个 HID 设备，所以我需要使用 L2CAP。最新版本的 Android 能够创建这种连接（我们可以通过查看市场来确定）。如果您在市场上搜索处理此问题的应用程序，您会通过查看说明发现不支持所有 Android 版本 4.0+ 的设备。

我几分钟前才发现这篇文章可以帮助你：[stackoverflow.com/a/7838587/1772805](https://stackoverflow.com/a/7838587/1772805)

如果你解决了这个问题，请告诉我。如果我发现任何东西，我会与您保持联系。

**编辑＃1：**我尝试了上面链接上的解决方案。我将其更改为使用不同的构造函数，如下所示：

```
private static final int TYPE_RFCOMM = 1;
private static final int TYPE_SCO = 2;
private static final int TYPE_L2CAP = 3;

/**
 * Create a BluetoothSocket using L2CAP protocol
 * Useful for HID Bluetooth devices
 * @param BluetoothDevice
 * @return BluetoothSocket
 */
private static BluetoothSocket createL2CAPBluetoothSocket(BluetoothDevice device){
  int type        = TYPE_L2CAP; // L2CAP protocol
  int fd          = -1;         // Create a new socket
  boolean auth    = false;      // No authentication
  boolean encrypt = false;      // Not encrypted
  int port        = 0;          // port to use (useless if UUID is given)
  ParcelUuid uuid = new ParcelUuid(wiimoteUuid); // Bluetooth UUID service

  try {
    Constructor<BluetoothSocket> constructor = BluetoothSocket.class.getDeclaredConstructor(
      int.class, int.class, boolean.class, boolean.class,
      BluetoothDevice.class, int.class, ParcelUuid.class);
    constructor.setAccessible(true);
    BluetoothSocket clientSocket = (BluetoothSocket) constructor.newInstance(
      type, fd, auth, encrypt, device, port, uuid);
    return clientSocket;
  } catch (Exception e) {
    e.printStackTrace();
    return null;
  }
} 
```

我成功创建了套接字，但是当我调用方法时`connect()`，我得到了这个错误：`bt l2cap socket type not supported, type:3`。这个日志对我来说是一个非常糟糕的新消息，因为我发现这个[线程](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/zJYMoiLLF0M)说**Android 4.2 不支持 L2CAP**（或者只是被 Google 禁用了......）。

因为我的设备植根于 CyanogenMod 10，所以该功能可能会在新版本中恢复。我希望..

**编辑#2：**这是指向包含问题原因的 C 文件的链接：[btif_sock.c](https://android.googlesource.com/platform/external/bluetooth/bluedroid/+/master/btif/src/btif_sock.c)。如果有人知道是否可以重写此文件或如何使用外部 C 库将 L2CAP 功能添加到 Android。恐怕这不是一项简单的任务。

# ruby-on-rails - 编写嵌套关联

> ID：14761572
> 
> 赞同：0
> 
> 时间：2013-02-07T21:44:37.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-activerecord

从一个组织表中，另外两个表`belongs_to`与`has_many`关联挂起，它们都具有该**organization_id**键。

![在此处输入图像描述](../Images/a3da3ef7baaacee29d0c5439e7cfad0b.png)

所以对于急切的加载，我写了这个：

```
@organization = Organization.includes(:population_summaries, :key_performance_inds).find(params[:id]) 
```

这应该有效。

但现在我有第三张桌子要包括在内。**key_performance_interval** 具有`kpi_id`用作外键以指向 key_performance_int 表的字段。我无法编写该部分并将其添加到我的急切加载部分。我应该如何添加那个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:14:14.317

要包含嵌套关联，请将其编写为哈希：

```
@organization = Organization.includes([:population_summaries, key_performance_inds:  :key_performance_interval]).find(params[:id]) 
```

您可以在第 12.1.2 节下的此[导轨指南](http://guides.rubyonrails.org/active_record_querying.html)中阅读有关它的信息

# jquery - 使用 div jQuery 刷新文件

> ID：14761575
> 
> 赞同：0
> 
> 时间：2013-02-07T21:44:48.740
> 
> 标签：jquery, ajax, templates, refresh, smarty

我有这个`.tpl`文件：

```
{include file="companies-list.tpl"} 
```

我想`{include file="companies-list.tpl"}`使用 div jQuery 每 5 秒自动刷新一次。有可能的 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:07:52.577

试试这个

```
 var refreshId = setInterval(function() {
       jQuery("#divid").load(yourfilename,
        function(response, status, xhr) {           
                    if (status == "error") {
                    var msg = "Sorry but there was an error: ";
    jQuery("#youdiv").html(msg + xhr.status + " " + xhr.statusText);
                          }
                });
         },5000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:53:07.277

您需要一个页面来呈现包含的文件。

```
setInterval( function() { $('#yourdiv').load("companies-list.php"); }, 5000 ); 
```

这并不理想（需要错误检查和超时能力等），但它应该让你走上正轨。

# java - 在客户端和服务器端使用相同的私钥进行 SSL 连接

> ID：14761576
> 
> 赞同：1
> 
> 时间：2013-02-07T21:44:52.520
> 
> 标签：java, ssl, ssl-certificate

我正在开发一个收集环境信息并将其数据发送回单个服务器进行处理的电路板。与该服务器的唯一连接将由最终投入现场的板建立。大部分开发已经完成，但现在我想尝试保护所有连接。速度至关重要，因为数据是实时敏感的，并且板上有一个相当小的处理器 (8Mhz)。由于我对它有如此严格的控制，我想在 WiFi 芯片和接受连接的基于 Java 的服务器之间共享相同的私钥。这有望让我通过 SSL 解密和加密消息，而无需在每次连接其中一个板时都经过握手过程。正确的？

我已经尝试了几天没有运气。但在我深入兔子洞之前，我想确保这甚至是可能的。谢谢，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T22:38:06.357

您似乎对 SSL/TLS 的工作原理感到困惑。

在握手期间，服务器出示其证书（除非使用匿名密码套件）以向客户端证明其身份，然后与客户端商定共享密钥（通过交换预主密钥）。握手完成后，仅使用共享密钥进行加密。[（这里](https://security.stackexchange.com/q/20803/2435)有更多细节。）

服务器的私钥用于向客户端证明其身份（通过其证书）。这样做的目的是防止 MITM 攻击。

将服务器的私钥提供给客户端只会允许任何客户端冒充服务器。

您无法真正避免握手，如果您进行多个连续连接，您也可以使用会话恢复。您还可以使用 TLS PSK（预共享密钥）密码套件（共享对称密钥，而不是私有密钥），但它们在 Oracle JSSE 提供程序中不可用。

# javascript - 从 javascript 中的字符串变量创建正则表达式

> ID：14761577
> 
> 赞同：0
> 
> 时间：2013-02-07T21:45:00.957
> 
> 标签：javascript, regex, variables

```
var tags=["div","span","body"];
for (i=0; i<=tags.length; i++){
  source = source.replace(/\&lt\;<tags[i]/i, '<span class="tags[i]">&lt;tags[i]</span>');
} 
```

基本上，我试图将所有打开的 div、span 和 body 标签放在一个 span 周围，并相应地设置一个类。但是，我在将变量放在那里时遇到了问题。

我可以为每个不同的标签添加行和行，但考虑到每次按键都会调用此函数，我希望使代码尽可能小且高效。

或者还有其他选择吗？我的意思是，如果这些方面的事情是可能的，那就更好了：

```
source = source.replace(/\&lt\;<div|<span/i, '<span class="div|span">&lt;div|span</span>'); 
```

但是，它显然没有让我到任何地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:57:03.907

您可以使用 RegExp 对象从字符串构造您的正则表达式：

```
source = source.replace(new RegExp("\\&lt\\;<" + tags[i], "i"), '<span class="' + tags[i] + '">&lt;' + tags[i] + '</span>'); 
```

但是您也可以通过捕获标签并在替换中引用它来实现替代想法：

```
source = source.replace(/\&lt\;<(div|span|body)/i, '<span class="$1">&lt;$1</span>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:58:32.977

您可以使用带有`| (equivalent of OR)`:`()`的正则表达式来获取匹配的元素（div、span 或 body），您可以使用`$1`

```
source.replace(/<(div|span|body)/i,'<span class="$1">&lt;$1&gt;</span>') 
```

# c++ - C++98/03 参考折叠和 cv 限定符

> ID：14761581
> 
> 赞同：6
> 
> 时间：2013-02-07T21:45:18.320
> 
> 标签：c++, reference, c++03, qualifiers, c++98

下面的代码编译（gcc 4.7.2 或 icc 13）并产生“1 2”输出。这意味着`const`限定符被删除，即`f<int&>`具有参数类型`int&`。

为什么会这样？据我了解，根据§14.3.1.4：

> 如果模板参数的模板参数`T`将类型命名为“对*cv1* `S`的引用”，则尝试创建类型“对*cv2* `T`的引用”会创建类型“对*cv12* `S`的引用”，其中*cv12*是 cv 限定符*cv1*的并集和*cv2*。冗余的 cv 限定符被忽略。

`const`不应该被丢弃。这是代码：

```
#include <iostream>
using namespace std;

template <typename T>
void f(const T& t)
{
    t++;
}

int main()
{
    int a = 1;

    cout << a;
    f<int&>(a);
    cout << ' ' << a << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T21:59:05.533

这是 1770 年，有问题的引用似乎起源于：

[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1770.html](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1770.html)

> 14.3.1 - 模板类型参数
> 
> -4- 如果模板参数 T 的模板参数将类型命名为“lvalue-reference to cv1 S”，则尝试创建类型“(lvalue or rvalue) reference to cv2 T”会创建类型“lvalue-reference到 cv12 S”，其中 cv12 是 cv 限定符 cv1 和 cv2 的并集。如果模板参数将类型命名为“对 cv1 S 的右值引用”，则尝试创建类型“对 cv2 T 的左值引用”会创建类型“对 cv12 S 的左值引用”。如果模板参数将类型命名为“对 cv1 S 的右值引用”，则尝试创建类型“对 cv2 T 的右值引用”会创建类型“对 cv12 S 的右值引用”。冗余的 cv 限定符被忽略。

这是 2118 的报价已被删除的地方：

[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n2118.html](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n2118.html)

> 14.3.1 - 模板类型参数
> 
> -4- 如果模板参数 T 的模板参数将类型~~“对 cv1 S~~的引用”命名为对类型 A 的引用，则尝试创建类型~~“对 cv2 T~~的引用”“对 cv 的左值引用” T”创建类型~~“对 cv12 S 的引用”，其中 cv12 是 cv 限定符 cv1 和 cv2 的并集。冗余 cv 限定符被忽略~~“对 A 的左值引用”，而尝试创建类型“对 cv T 的右值引用”会创建类型 T。

您引用的内容似乎是过时的措辞。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T21:56:20.490

指定标志时，GCC 4.7.2 不会**编译**`-std=c++98`它。事实上，在 C++98（以及 C++03）中，对引用的引用不会崩溃。

尝试实例化`f<int&>`, where`T = int&`会产生以下函数签名（这里我有意切换参数类型`T`和说明符的位置`const`，这是允许的，因为`const T&`与 相同`T const&`）：

```
void f(int& const& t) // ERROR: reference to reference is illegal 
```

以上在 C++98 和 C++03 中都是不合法的。始终如一，这是您从 GCC 4.7.2 得到的错误：

```
Compilation finished with errors:
source.cpp: In function 'int main()':
source.cpp:15:14: error: no matching function for call to 'f(int&)'
source.cpp:15:14: note: candidate is:
source.cpp:5:6: note: template<class T> void f(const T&)
source.cpp:5:6: note:   template argument deduction/substitution failed:
source.cpp: In substitution of 'template<class T> void f(const T&) [with T = int&]':
source.cpp:15:14:   required from here
source.cpp:5:6: error: forming reference to reference type 'int&' 
```

然而，如果您使用该`-std=c++11`标志，则编译器会在实例化模板时执行引用折叠：对左值引用的左值引用变为左值引用：

```
void f(int& const& t) == void f(int& t) 
```

在这里，`const`限定符被删除，因为**它适用于引用**，而不是被引用的对象。由于引用不能被重新分配，它们是`const`天生的，这就是为什么`const`认为是多余的和删除的。有关解释，请参阅**[关于 SO 的此问答](https://stackoverflow.com/questions/4425182/question-about-c0x-reference-collapse)**。

这会产生一个对左值引用的左值引用，它解析为一个简单的左值引用。因此，右侧的签名被实例化。

以上是解决调用的可行候选者`f<int&>(a)`，因此它编译时没有错误。

# php - 为什么 PHP/MSSQL 不能正确显示日期/时间？

> ID：14761588
> 
> 赞同：5
> 
> 时间：2013-02-07T21:45:47.103
> 
> 标签：php, sql-server, datetime

我最近将服务器上运行的 PHP 版本升级到 5.3.20。从那时起，每当我从 MSSQL 数据库 (mssql_query) 中提取日期时间时，我都会收到奇怪的错误日期。

我检查了语言环境设置，默认时区设置为“澳大利亚/布里斯班”，我还检查了 php.ini 设置并确认`mssql.datetimeconvert`已关闭。The dates seem to come through preformatted (without seconds) when the option is turned on, however when the option is turned off I get a date that looks like this.

> mssql.datetimeconvert （关闭）：2013-07-38 **16:00:20**
> 
> mssql.datetimeconvert（开启）：2013 年 2 月 7 日晚上 9:37

有简单的解决方法吗？

这是比较 mysql/mssql 源之间的输出的代码：

```
$rs = $db->query("select id, servertime from bobstable where id = 86427420");
$mss_set = mssql_query("select id, servertime from T_bobstable WITH (NOLOCK) where id = 86427420");

$myrow = $rs->fetch_assoc();
$msrow = mssql_fetch_array($mss_set);

var_dump($myrow);
echo "<br>";
var_dump($msrow); 
```

其输出如下：

```
array(2) { ["id"]=> string(8) "86427420" ["servertime"]=> string(19) "2013-02-08 14:00:24" } 
array(4) { [0]=> float(86427420) ["id"]=> float(86427420) [1]=> string(19) "2013-08-39 24:673:0" ["servertime"]=> string(19) "2013-08-39 24:673:0" } 
```

这是我从 SQL Server Studio 收到的输出

```
2013-02-08 14:00:24.673 
```

我可以理解它是如何被格式化的（因为这部分问题在下面得到了回答）但我不明白为什么它会以这种格式出现，或者如何更改 PHP 的配置以避免这种情况。在我升级 PHP 之前，它曾经是**2013-02-08 14:00:24**。有没有人经历过或看到过这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:52:47.823

找到了一个似乎坚持的解决方案： -

我将安装在服务器上的 FreeTDS 版本从以下位置降级：

```
freetds.x86_64 0.91-2.el5  to 
freetds.x86_64 0.64-11.el5.centos 
```

这确定了日期。

不知道为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:19:40.007

今天 2 月 7 日，DAYOFYEAR() 是 38。

可能问题出在日期格式上

# excel - 如何动态选择要在公式中引用的 Excel 工作表？

> ID：14761592
> 
> 赞同：1
> 
> 时间：2013-02-07T21:46:00.270
> 
> 标签：excel

我有一个名为“A”、“B”、“C”等的工作表的 xlsx。我需要形成一个名称为“A”、“B”、“C”的表作为第一列，以及来自的一些数据每个工作表中与第二列相同的单元格。例如，这可能看起来像：

```
 Sheet          Data
   A              =A!C2
   B              =B!C2 
```

在我的“数据”列中，是否有某种方法可以从“工作表”列中引用名称“A”和“B”，所以我可以只填写一次论坛并在添加更多工作表时更新它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T21:51:17.427

假设您的工作表名称`A`在`A2`- 在 B2 中使用：`=INDIRECT("'"&A2&"'!C2")`

# html - Outlook 2010 - 内联表

> ID：14761593
> 
> 赞同：2
> 
> 时间：2013-02-07T21:46:04.030
> 
> 标签：html, email, mobile, outlook, responsive-design

我正在创建响应式电子邮件，当在手机上查看时，它们会将两列布局转换为堆叠的一列电子邮件。该过程运行良好，但需要一些代码按摩才能使基于桌面的 Outlook 2010 满意。此页面解释了为了取悦 Outlook 2010 必须采取的过程和步骤。修复效果很好。

[http://www.emailonacid.com/blog/details/C13/removing_unwanted_spacing_or_gaps_between_tables_in_outlook_2007_2010](http://www.emailonacid.com/blog/details/C13/removing_unwanted_spacing_or_gaps_between_tables_in_outlook_2007_2010)

...除非电子邮件很长。一旦第一列内容达到一定长度，Outlook 就会停止将第二列放在它旁边，而是将其扔到布局的下方，以至于它将在第一列内容下方创建一个大的装订线，并在上方创建一个巨大的空白标题右栏。下面的代码虽然很简单，但如果您在 IE 中打开它并选择文件/通过电子邮件发送页面，它将重复此行为。您可以通过删除一些 X 来解决渲染问题
的，whihc 指向 ling 长度限制或 Word 渲染引擎的一些疯狂的“我正在寻找分页符”行为。我知道 Word 渲染引擎很糟糕，但我想知道一个说明何时会发生此问题的指南，因为此时 Word 引擎的大多数问题都已记录在案，并且相当一致。我的问题是大多数人都知道发送简短的电子邮件，所以没有这个问题。我与喜欢数量的团体一起工作。

如果有人知道如何避免这种情况或知道具体的触发特征，请告诉我。仅供参考，您可以用 p 或行替换 br，问题是一样的。显然，我发送的电子邮件比这复杂得多，但这就是这段代码的重点，以展示在仍然产生问题的同时事情可以多么简单。

* * *

```
<table width="100" border="0" cellsbracing="0" cellbradding="0" valign="top">
<tr></tr>
<tr>
  <td align="left" valign="top"><table align="left">
    <tr>
      <td align="left" valign="tobr">
X<br>X<br>X<br>X<br>X<br>X<br>X<br>
X<br>X<br>X<br>X<br>X<br>X<br>X<br>
X<br>X<br>X<br>X<br>X<br>X<br>X<br>
X<br>X<br>X<br>X<br>X<br>X<br>X<br>
X<br>X<br>X<br>X<br>X<br>X<br>X<br>
X<br>X<br>X<br>X<br>X<br>X<br>X<br>
X<br>X<br>X<br>X<br>X<br>X<br>X<br>
X<br>X<br>X<br>X<br>X<br>X<br>X<br>
X<br>X<br>X<br>X<br>X<br>X<br>X<br>
X<br>X<br>X<br>X<br>X<br>X<br>X<br>
X<br>X<br>X<br>X<br>X<br>X<br>X<br>
X<br>X<br>X<br>X<br>X<br>X<br>X<br>
X<br>X<br>X<br>X<br>X<br>X<br>X<br>
X<br>X<br>X<br>X<br>X<br>X<br>X<br>
X<br></td>
    </tr>
  </table>
    <table align="left">
      <tr>
        <td align="left" valign="top">O<br>
          O<br>O<br>O<br>O<br>O<br>O<br>O
          <br>O<br>O<br>O<br>O<br>O<br>O
          <br>O<br>O<br>O<br>O<br>O</td>
      </tr>
  </table></td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T14:25:40.320

天哪，检查我是否解决了一个月大的问题。

我不想听起来迂腐或傲慢，我不知道这是否实际上是您用来复制问题的代码，或者您只是将其重写以发布在这里 - 但浏览器可以解释的小错误当被电子邮件客户端解释时，正确地出现了可怕的错误。

所以，只是为了澄清拼写错误等小错误，即这样的事情：

```
<cellbradding> 
```

并且有很多元素缺少它们的结束标签。

通过 w3c 验证器作为过渡运行电子邮件可能是值得的，只是为了找出它们的错误类型，或者任何支持 HTML 的 IDE。

我知道我唯一一次遇到疯狂的电子邮件渲染问题是他们不知道如何解释我写的疯狂的东西。

# javascript - Three.js 对象在远距离“闪烁”

> ID：14761595
> 
> 赞同：2
> 
> 时间：2013-02-07T21:46:07.413
> 
> 标签：javascript, three.js, webgl

我目前正在从事一个项目，该项目涉及在对象大小范围为 10 到 1000000 的场景中工作。我一直有一个问题，当我在这些尺寸的大范围内时，物体开始“闪烁”这只发生在物体相交时，然后随着相机远离物体它变得越来越“暴力” .

我在这里上传了问题的图片：http: [//imgur.com/SOeemng](http://imgur.com/SOeemng)

虽然我不知道是什么原因造成的，但我对可能导致它的原因有一些可能的想法：

首先，是不是我的工作尺寸对于three.js / webgl来说太大了

第二种可能性我认为可能是一个问题是使用我制作的相机控件，如下所示：

```
 if(mouseIsDown == true){
        if(this.movementSpeed < this.maxSpeed){
            this.movementSpeed += this.acceleration
        }else{
            this.movementSpeed = this.maxSpeed
        }

    }else{
        if(this.movementSpeed > this.minSpeed){
            this.movementSpeed = this.movementSpeed/this.deceleration
        }else{
            this.movementSpeed = this.minSpeed  
        }

    } 
```

其中 this.minSpeed = 0，this.movementSpeed 用于像这样移动相机：

```
var actualSpeed = delta * this.movementSpeed;
this.object.translateZ( -actualSpeed * forwardOrAuto );
this.object.translateX( actualSpeed * sideSpeed );
this.object.translateY( actualSpeed * upSpeed ); 
```

我不认为这会是问题，但由于移动速度实际上永远不会等于零，这可能是个问题。即使移动速度为 10^-20 或 -30 时，仍然会发生闪烁。

如果这很重要，我也在 r.55 上。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-08T01:29:12.807

听起来像精度问题。运动可以放大舍入误差的影响。在three.js中处理太阳系模型（uom：米）时，我自己遇到了许多“闪烁”纹理/模型的问题。gaitat 绝对正确，您遇到了 z 缓冲区深度精度问题。我和我的搭档有几种处理方法。

z 缓冲区不是线性的。gaitat 提到的 sjbaker 的网站会像几个月前对我一样清楚地说明这一点。大多数 z 缓冲区精度都在附近。如果您的对象的大小达到 1000000 个单位，那么对象本身，更不用说它们之间的空间，已经超出了有效精度的范围。许多许多视频游戏使用的一种解决方案是*不*移动玩家（相机），而是移动世界。这样，随着物体靠近相机，它的精度就会提高。这对于远处的大型重叠对象上的纹理（闪烁/遮挡）或远离轴向原点的小网格最为重要，在这些情况下，舍入问题变得严重到足以将网格跳出视野。说起来容易做起来难，因为您要么必须进行“及时”计算以移动与玩家相关的所有内容（并且仍然会遇到舍入错误），要么提出更优雅的解决方案。

对于非常高的远距离数字，您将损失很少的近精度，但您将在中等范围内获得相当大的精度，而近数字略大。即使您正在使用的网格可以小到 10 个单位，近摄像机设置为 10 或 100 可能会给您带来一些松弛。相机设置不是处理 z-buffer 的唯一方法。

[polygonOffset](http://www.opengl.org/archives/resources/faq/technical/polygonoffset.htm) - 您有效地告诉 z 缓冲区哪个东西（网格上的材料）属于顶部。它可以引入尽可能多的问题，因为它解决了，并且可能需要相当多的调整。认为它类似于 css 中的 z-index，但更易变。增加一种材质的偏移量以确保它渲染到远处的某物上，可能会使其渲染到近处的某物上。它会滚雪球，迫使您在大多数对象上设置偏移量。对于 polygonOffset，因子和单位数通常在 -1.0 和 1.0 之间，并且可能需要调整。

[depthWrite=false](http://threejsdoc.appspot.com/doc/three.js/src.source/materials/Material.js.html) - 这意味着“不要写入深度缓冲区”，并且非常适合应该*始终*呈现在所有内容“后面”的材质。很好的例子是天空盒和背景。

我们的项目使用了上述所有方法，但结果仍然很平庸，尽管我们处理的数字大到 40 个以米为单位的天文单位（冥王星）。

“他们”称其为“z-fighting”，所以要打好仗！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T23:10:07.137

由于您的范围如此之大，因此您必须将相机设置为接近 0 的平面和接近 1000000 的远平面。但是没有足够的 z 分辨率。您可以在[http://www.sjbaker.org/steve/omniv/love_your_z_buffer.html](http://www.sjbaker.org/steve/omniv/love_your_z_buffer.html)阅读更多相关信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-29T19:19:03.243

一个我不知道如何实现但可能可行的解决方案是使用两个场景和两个摄像头。

一个场景是近距离的东西，另一个是远距离的东西。每个场景都使用具有适合所需内容的 zNear 和 zFar 的相机进行渲染。即近距离场景有一个 zNear = 0.1 和 zFar = 10,000 的相机，而远景有一个 zNear = 10,000 和 zFar = 6,000,000 的相机

困难在于将 TrackballControls 连接到两个摄像机以同步场景。

# java - 将文本写入具有图像背景的 JTextPane

> ID：14761598
> 
> 赞同：0
> 
> 时间：2013-02-07T21:46:13.203
> 
> 标签：java, image, bufferedimage, jtextpane

我有一个带有背景图像的 JTextPane。

```
prevWords = new JTextPane()
    {
        public void paint(Graphics g)
        {
            BufferedImage img;
            try 
            {
                img = ImageIO.read(new File("Images/logo.png"));
                img.getGraphics().setColor(new Color(Color.TRANSLUCENT));
                g.drawImage(img, 0, 0, null);
            } 
            catch (IOException e) 
            {
                System.out.println("Failed to load logo.");
            }
            super.paintComponents(g);
        }
    }; 
```

当我将文本写入窗格时，我看不到它。我也将窗格中的文本设置为白色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:43:32.950

这是一个完整的黑客。

这里的问题是，UI 正在绘制背景**两次**......

您需要以这样一种方式绕过 UI，以便您可以将图像绘制到背景中，同时仍然让文本呈现在顶部。

最后，我必须让文本窗格透明，这样我才能强制 UI 不绘制背景。

![在此处输入图像描述](../Images/04d826b755dc46f7afd36393e1539ae5.png)

```
public class TextPaneBackground {

    public static void main(String[] args) {
        new TextPaneBackground();
    }

    public TextPaneBackground() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new JScrollPane(new TextPaneWithBackground()));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TextPaneWithBackground extends JTextPane {

        private BufferedImage background;

        public TextPaneWithBackground() {
            try {
                background = ImageIO.read(new File("C:/Users/shane/Dropbox/MegaTokyo/Evil_Small.jpg"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
            setForeground(Color.WHITE);
            setOpaque(false);
        }

        @Override
        public Dimension getPreferredScrollableViewportSize() {
            return background == null ? super.getPreferredScrollableViewportSize() : new Dimension(background.getWidth(), background.getHeight());
        }

        @Override
        public Dimension getPreferredSize() {
            return background == null ? super.getPreferredSize() : new Dimension(background.getWidth(), background.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            Graphics2D g2d = (Graphics2D) g.create();

            if (isOpaque()) {
                g2d.setColor(getBackground());
                g2d.fillRect(0, 0, getWidth(), getHeight());
            }

            if (background != null) {
                int x = (getWidth() - background.getWidth()) / 2;
                int y = (getHeight()- background.getHeight()) / 2;
                g2d.drawImage(background, x, y, this);
            }

            getUI().paint(g2d, this);
            g2d.dispose();
        }
    }
} 
```

Reimeus 暗示了将图像直接插入的能力`Document`，这可能是一个更好的长期解决方案。

# python - python中的数据结构列表类

> ID：14761601
> 
> 赞同：0
> 
> 时间：2013-02-07T21:46:28.740
> 
> 标签：python, list

我正在研究 python 中的数据结构列表类。我想获得列表中最大的项目。

```
 inlist = self.data
    if inlist[0] > inlist[1]:
        largest = inlist[0]
    else:
        largest = inlist[1]

    for item in inlist[2]:
        if item > largest:
            largest = item
    return largest 
```

随着上述卡在最大获得回报

```
<bound method ListData.largest2 of <list.ListData instance at 0x2b35602c3440>> 
```

而数据

```
[2, 5] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:50:42.180

相信循环可以获取所有指标，而不是自己指定它们。

```
if len(self.data) == 0:
  return None
result = self.data[0]
for item in self.data:
  if item > result:
    result = item
return result 
```

for 循环正在遍历您的所有数据。试图强制索引会让你陷入困境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:53:00.987

您可以使用内置[max()](http://docs.python.org/2/library/functions.html#max)函数。

```
mylist = [2, 5]
mymax = max(mylist) 
```

# qt - Does Qt provide a timer to calculate elapsed CPU time?

> ID：14761605
> 
> 赞同：0
> 
> 时间：2013-02-07T21:46:30.207
> 
> 标签：qt, timer

I checked QTimer and QBasicTimer. But they are not for the purpose. Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:06:28.450

不，Qt 提供的计时器用于自动化/动画目的，或一般计时到（大约）毫秒精度。

如果您需要跨平台，尽可能准确的计时，我建议使用[Boost::Timer](http://www.boost.org/doc/libs/1_53_0/libs/timer/doc/cpu_timers.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:41:52.217

我认为[QElapsedTimer](http://doc.qt.digia.com/stable/qelapsedtimer.html)正是您需要的（或最接近的）。

# javascript - ajax - request data from multiple files on one page?

> ID：14761611
> 
> 赞同：0
> 
> 时间：2013-02-07T21:46:55.247
> 
> 标签：javascript, ajax

I am trying to run multiple Ajax functions on load in a single page which will get data from two different php pages. Both the Ajax functions will then print the retrieved data onto the page from which the ajax function was called. The problem I encountered was that the last function call which I make from the Ajax overrides the first function call, and so only the second function result is showed.

The code for one of the Ajax function (since both of the are very similar to each other):

```
function favorite_track_request(str){

switch(str){
case 'next_track':
    var feed = 'require_fav_track_info';
    var offset = track_currentOffset + 5;
    if(offset > max_track_range){
        offset -= 5;
    }
    break;
case 'prev_track':
    var feed = 'require_fav_track_info';
    var offset = track_currentOffset - 5;
    if(offset < 0){
       offset = 0;
    }
    break;
default:
    var feed = 'require_fav_track_info';
    var offset = 0;
}

request = new ajaxRequest()

request.open("GET", "scripts/"+feed+".php?offset="+offset, true)

request.onreadystatechange = function(){
    if(this.readyState == 4){
        if(this.status == 200){
            if(this.responseText != null){
               if(request.responseText){
                   document.getElementById('fav_tracks').innerHTML = request.responseText;
               }
           }else alert("No data recieved");
        }else {
           alert("Ajax error: "+this.statusText);
        }
    }
}

request.send(null); 
    track_currentOffset = offset;
} 
```

This ajax would then print to `<div id="fav_tracks"></div>`, however this gets overridden because another call (similar to the Ajax above) is made and that overrides the previous one. Is there any way to stop this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:01:31.067

我建立了一个数据处理程序“类”来管理这样的事情。你是对的，一个压倒另一个。我没有调查它，但这可能是因为您正在重新分配 AJAX 使用的 onEvent 。

下面是我构建的类（我知道，它不是 JQuery ......它有效）。它的作用是使用超时来“知道”何时触发第二个和第三个异步请求。可能有一个 JQuery 函数可以做同样的事情。

您可以通过对每个 AJAX 调用使用以下内容来调用它（给每个调用一个唯一的 var 名称）：

```
dataHandler = new DataHandler("[name of datafile to call]");
dataHandler.query['[myQueryName]'] = 'myValue' //this is an Object used to build a query string, if needed, so use as many data pairs as you need
dataHandler.asynchronous(myOnReadyStateChangeFN);//put the fn you want to use for readystatechange as a reference... do not includ the () 
```

这是“类”：

```
function DataHandler(dataFile){
    this.dataFile = dataFile;
    dataInProgress = false;
    this.query = new Object();

        this.asynchronous = function(fn){
        var thisFunction = this.asynchronous
        var rand = Math.floor(Math.random()*100001);
        var query, timeOutFunctionString;
        if(this.dataInProgress){
            timeOutFunctionString = callingObjectName+".asynchronous("+fn+")";
            this.thisTimeout = setTimeout(timeOutFunctionString,500);
        }else{
            dataInProgress = true;
            this.assignRequestObject.xmlHttp.onreadystatechange = function () {
                fn();
                dataInProgress = false;
                return;
            };
        }
        query = this.dataFile + '?r=' + rand;
        for (var key in this.query) query = query + '&' + key + '=' + this.query[key];

        //console.info("DataHandler.asynchronous\nquery = "+query+'\nthis.dataFile = ' + this.dataFile);
        this.assignRequestObject.xmlHttp.open('GET', query, true);
        this.assignRequestObject.xmlHttp.send(null);
    };
    this.AssignRequestObject = function() {
        try { this.xmlHttp = new XMLHttpRequest() } catch (e) {
            try { this.xmlHttp = new ActiveXObject("Msxml2.XMLHTTP") } catch (e) {
                try { this.xmlHttp = new ActiveXObject("Microsoft.XMLHTTP") } catch (e) {
                    alert("Your browser does not support AJAX!");
                    return false
                }
            }
        }
    };
    this.assignRequestObject = new this.AssignRequestObject();
}; 
```

# ios - Strong and weak modifiers with ios interface elements

> ID：14761613
> 
> 赞同：7
> 
> 时间：2013-02-07T21:47:02.313
> 
> 标签：ios, pointers, uikit, weak-references, strong-references

in my projects I don't use Interface Builder and I've noticed one thing that I don't know how to explain. Yet. So, to the point. When we are using IB and defining elements of user interface like UILabel or UIButton in our controller we use this ugly prefix IBOutlet and a 'weak' modifier. This works like music. But when we decide not to use IB and define whole user interface from code it just doesn't work.

Let's assume that I want to add UILabel to controller (using IB). I will have something like this i *.h file:

```
@property (nonatomic, weak) IBOutlet UILabel * label; 
```

And I don't have to do anything more in *.m file. But if I remove the *.xib file and try to setup my UILabel in, for example, one of init methods, like this:

```
self.label = [[UILabel alloc] initWithFrame:CGRectMake(0,0,100,20)];
self.label.text = @"some text";
[self.view addSubview:self.label]; 
```

It doesn't work until I alter my *.h file to this:

```
@property (nonatomic, strong) UILabel * label; 
```

Now, I know the difference between weak and strong but I have no idea why we can use weak for ui elements when using IB? Something must keep a strong pointers to these elements, right? But what?? In second case it is controller, but I don't understand how it behaves in the first case.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T22:10:34.370

Interface Builder 为 IBOutlets 创建弱引用的原因如下：

IB 知道视图由其父视图保留。因此，视图树中的任何对象都不需要强引用，除了根对象。`view`视图控制器在其主要属性中保留了这个强引用。

现在，当视图处于卸载状态时（至少在 iOS 5 之前），UIViewController 的`view`属性设置为 nil，释放主视图。如果该超级视图的子视图的 IBOutlets 是强引用，它们会将视图层次结构的一部分保留在内存中。这是不需要的（并且在访问这些孤立视图时可能会导致混淆）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T21:53:23.223

> 某些东西必须保持对这些元素的强指针，对吗？但是什么？？

正确，您必须至少有 1 个对对象的强引用才能存在。您只需要对 UI 的根级别对象有一个强引用，低于此的任何内容都可能是弱引用（因为父对象将拥有它们的子对象）。`.xib`与其文件所有者协调的文件会为您完成此操作。

有关文件的工作原理，请参阅[此`xib`文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4-SW8)。具体来说，这个片段：

> 您通常需要对顶级对象的强引用以确保它们不会被释放；您不需要对图中较低的对象进行强引用，因为它们归其父对象所有，并且您应该尽量减少创建强引用循环的风险。
> 
> 从实际的角度来看，在 iOS 和 OS X 中的 outlet 应该被定义为声明的属性。出口通常应该是弱的，除了从文件所有者到 nib 文件中的顶级对象（或者，在 iOS 中，故事板场景）应该是强的。因此，您创建的奥特莱斯通常应该很弱

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T22:12:44.137

尽管有公认的答案，但这就是您**可以在代码中实现的方法**：

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0,0,100,20)]; // strong ref
label.text = @"some text";
[self.view addSubview:label]; // strong ref from superview
self.label = label; // weak ref
// Now you can do `label = nil;` 
```

这是从 XIB 加载时的要点。当它被分配给您的弱属性时，它`label` **已经具有超级视图。**

# c# - Yet another "The HTTP verb POST used to access path '[my path]' is not allowed"

> ID：14761615
> 
> 赞同：0
> 
> 时间：2013-02-07T21:47:02.937
> 
> 标签：c#, wcf, post

I have check ALL related topics, but nothing was helpful. I do not use url rewriting, I do not click any buttons. My web service expects POST from other service and then it should returns 200 OK with certain payload.

Some of you might say "Ok, the specific servlet does not support post". The most confusing thing is that when I send POST from Chrome Simple REST client it works! When third party web service sends me the same POST it gives me an error.

Here's what I do, I use ASP.NET development server as web service available to be reached from outside by tunneling (thanks to this [topic](https://stackoverflow.com/questions/18918/can-i-access-asp-net-development-server-in-an-intranet)) -> this works from REST client. And then wait for POST which gives me "The HTTP verb POST used to access path 'EndPoint' is not allowed"

Here's web.config

```
<httpHandlers>   
      <add verb="*" path="EndPoint"
          type="MyHandler" />     
</httpHandlers> 
```

My code that parses POST message and returns the required message:

```
public class MyHandler : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        var stream = context.Request.InputStream;
        byte[] buffer = new byte[stream.Length];
        stream.Read(buffer, 0, buffer.Length);
        string xml = Encoding.UTF8.GetString(buffer);

        StringBuilder sb = new StringBuilder();
        XDocument doc = XDocument.Parse(xml);            

        var id = XElement.Parse(xml)
            .Descendants("id")
            .First()
            .Value;

        string file = "c:/message.xml";            
        XDocument d = XDocument.Load(file);

        d.Descendants("context").Where(x => x.Attribute("id").Value == id).Single().SetAttributeValue("value", "54");
        d.Save(file);  

        string responseMessage = @"
            <?xml version=""1.0"" encoding=""UTF-8""?>            
            <Message>                
                <code>Fine</code> 
            </Message>
            ";

        context.Response.StatusCode = 200;     
        context.Response.AddHeader("Content-Type", "application/xml");
        context.Response.Write(responseMessage);            

    } 
```

This is log from Tunnel [monitor](https://stackoverflow.com/questions/18918/can-i-access-asp-net-development-server-in-an-intranet)

```
<!-- 
[HttpException]: The HTTP verb POST used to access path &#39;/EndPoint/&#39; is not allowed.
   at System.Web.DefaultHttpHandler.BeginProcessRequest(HttpContext context, AsyncCallback callback, Object state)  at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
--> 
```

**EDIT** Answer was straightforward. External service was sending to EndPoint/ instead of subscribed url without "/" i.e. EndPoint.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T06:44:48.183

以下应该有效：

```
<httpHandlers>   
    <add verb="*" path="EndPoint" type="MyHandler/*" />
</httpHandlers> 
```

# apple-push-notifications - APNS Connection Issue

> ID：14761620
> 
> 赞同：0
> 
> 时间：2013-02-07T21:47:09.550
> 
> 标签：apple-push-notifications, apns-php

OK, I know there has been a lot of discussion regarding APNS connection failures. Most of the discussion recommends checking the outgoing server port 2195 to be sure it will allow the connection. This is not my problem, although I am experiencing the 'connection refused' error (111).

I have validated communication between my server and the sandbox server be receiving a 200 response from the Apple Gateway. I know my certificates are good because I have tested the connection using openssl from a Mac. I have also been able to connect with the gateway ***once*** from my server but cannot get a consistent connection.

The test code I am using is as follows:

```
$ctx = stream_context_create();

stream_context_set_option($ctx,'ssl', 'local_cert', $pem);
stream_context_set_option($ctx, 'ssl', 'passphrase', $key);
$gateway = 'gateway.sandbox.push.apple.com';
$port = '2195';

$remote_socket = 'ssl://'.$gateway.':'.$port;
$fp = stream_socket_client($remote_socket, $err, $errstr, 60,STREAM_CLIENT_CONNECT, $ctx);

if (!$fp){
    echo $err.'<br>';
    echo $errstr.'</br>';
    echo 'error=apple failed to connect';
} else {
    fclose($fp);
    echo 'success';
} 
```

I have placed the .pem file in the same directory as the script file, removed the use of the passphrase, specified verify_peer, used the STREAM_CLIENT_ASYNC_CONNECT and the STREAM_CLIENT_PERSISTENT flags without success.

Is this an issue with something that I am doing, an issue with the apns sandbox server or is this what I should expect from the apns? Any insights or help you can provide is greatly appreciated -- my hair is getting pretty thin!

Regards.

PS -- If I remove the passphrase I get a 115 error saying the key cannot be accessed.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:43:58.080

尽管至少可以连接一次，但事实证明，如果没有 GoDaddy 上的虚拟专用服务器，您将无法访问 APNS 网关。每月至少 80 美元，预付，这太贵了。以其他方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:31:12.647

其他一些可以尝试的事情：

1.  在 stream_socket_client 调用中使用**STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT**
2.  不要使用 verify_peer
3.  检查 PHP 脚本的所有者是否有足够的权限来读取 pem 文件并连接到位于其他地方的端口（即/不仅仅是本地主机）

# java - 在一行中使用数组初始化 ArrayList

> ID：14761623
> 
> 赞同：3
> 
> 时间：2013-02-07T21:47:18.193
> 
> 标签：java, arrays, list, data-structures

我有一个`String`s 数组，我希望能够按照以下方式做一些事情

```
String[] arrayOfStrings = {"this", "is", "an", "array", "of", "strings"};
List<String> listOfStrings = new ArrayList<String>( arrayOfStrings ); 
```

或者

```
List<String> listOfStrings = new ArrayList<String>();
listOfStrings.addAll( arrayOfStrings ); 
```

我知道如果我的字符串已经在集合中，我可以同时执行这两项操作，并且我可以遍历数组并单独添加它们，但这有点混乱。

有没有办法`List`用数组初始化一个（或任何集合）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T21:49:15.387

您可以使用[`Arrays.asList`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList%28T...%29)方法，它接受一个，并返回一个由数组支持`var-args`的固定大小。`List`因此，您不能将任何元素添加到此列表中。此外，对元素所做的任何修改`List`都将反映在`array`.

```
String[] arrayOfStrings = {"this", "is", "an", "array", "of", "strings"};
List<String> list = Arrays.asList(arrayOfStrings); 
```

或者： -

```
List<String> list = Arrays.asList("this", "is", "an", "array", "of", "strings"); 
```

* * *

如果要增加此列表的大小，则必须在`ArrayList`构造函数中传递它。

```
List<String> list = new ArrayList<String>(Arrays.asList(arrayOfStrings)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T21:49:04.133

您可以使用`Arrays.asList()`静态方法。

例如：

```
String[] arrayOfStrings = {"this", "is", "an", "array", "of", "strings"};
List<String> list = Arrays.asList(arrayOfStrings); 
```

请注意，您以这种方式创建了一个“由数组备份”的固定大小的列表。如果您希望能够扩展它，则必须执行以下操作：

```
String[] arrayOfStrings = {"this", "is", "an", "array", "of", "strings"};
List<String> list = new ArrayList<String>(Arrays.asList(arrayOfStrings)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T21:49:27.207

您可以使用 asList()

Arrays.asList(T... a) 返回由指定数组支持的固定大小的列表。

[http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T21:53:30.167

这可能不完全属于您的问题，但可能值得考虑。

```
List<String> list = Arrays.asList("this", "is", "an", "array", "of", "strings"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-05T20:23:11.167

`ArrayList<List<String>> arrayStringMega = new ArrayList<List<String>>(Arrays.asList(Arrays.asList("1","2","3"),Arrays.asList("2","3","4")));`

# mongodb - Losing documents in my collection

> ID：14761624
> 
> 赞同：0
> 
> 时间：2013-02-07T21:47:23.207
> 
> 标签：mongodb, mongoid

I'm looking for suggestions on how to debug this one.

When one of my documents gets too large in a collection, the entire document is removed from the collection. I'm using heroku with mongoid 2.2.6 and rails 3.0.20 with MongoHQ. I'm unable to reproduce the problem locally.

We started writing this code two years ago and it's been slowly maintained by some of my students. The site is similar to a basic blogging site where a "post" will have "comments." The initial design had the post versioned and each post contains all of the comments. Because of versioning, the size of the document can grow very quickly. We tried to limit the size of the versions with max_versions 5, but we can still reproduce the problem with extremely large comments. It may be the case that the site is fully useable, but since we loose the entire document (and not just the comment), I'd like to find a solution. Had I noticed that the comments were being versioned within the document, I'd have change the design to store comments outside of the post.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:35:59.647

一些可能有帮助的信息：

*   如果文档超过 16MB 限制，服务器将不会删除该文档；相反，它会引发错误（例如，大小无效）。

*   据我所知，如果更新操作失败，Mongoid 和 MongoDB Ruby 驱动程序都不会删除文档。

*   如果应用程序删除一个文档，然后为每次更新插入一个新文档，我建议修改应用程序以利用更新并确保正确处理任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:27:20.197

正如评论所说，您的文档很可能只是变得太大。一段时间以来，所有 MongoDB 驱动程序都默认为 Acknowledged Writes，如果无法存储或更新文档，在大多数情况下，这会给您一个异常。请检查您是否使用最新的驱动程序版本和/或是否打开了确认写入（有时也称为“安全”）。

我仍然认为你最好的选择是改变你的架构。如果您有大量的评论，那么即使在某些时候没有版本控制，您也会遇到这个问题。或者，您可以将较旧的评论和/或帖子存储在单独的集合中。

# latex - 缩放页面的 MathJax 分数渲染问题

> ID：14761628
> 
> 赞同：0
> 
> 时间：2013-02-07T21:47:40.183
> 
> 标签：latex, markdown, ipython, mathjax

我在 IPython 笔记本（OS 10.8.2，Google Chrome 浏览器）的 markdown 单元格中呈现以下行：

```
$$\frac{d}{dx}g(x) = f(x)$$ 
```

在正常缩放级别，它看起来像这样

![normal_zoom](../Images/f7d03d63ece97fc4aeae1f3f757c8ab2.png)

我正在尝试在网络广播中使用它并希望将缩放应用于屏幕

> 块引用

. 在我想要的缩放级别，分数渲染变得丑陋。

![放大](../Images/7c61b96452969c38a6034019316ad486.png)

有没有办法控制这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:22:55.713

似乎不是 IPython 问题，我可以在这里重现它：http: [//util.io/mathjax](http://util.io/mathjax) with {\partial \over \partial x}g(x) 只是为了让数学更大还是整个页面? 您可以尝试在 mathjax 选项/右键单击中更改方程的缩放因子。不过，笔记本服务器尚未公开配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:47:40.183

该问题仅存在于谷歌浏览器中。它在 Safari 中正确呈现：

![big_zoom，正确渲染](../Images/326ffdd6ab05db3deb5e258a7109400f.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T13:42:04.720

这是 Chrome 中的一个错误，但 MathJax v2.1 中有一个解决方法。我怀疑你使用的是早期版本，所以如果你更新它，它应该可以解决你的问题。

# css - Is it possible to apply css transform to image on currently transformed div

> ID：14761635
> 
> 赞同：1
> 
> 时间：2013-02-07T21:47:56.930
> 
> 标签：css, webkit, transform, css-animations

I have a div which is already rotated, however all content within it is transformed in the same fashion.

I have plugged a fiddle below to better illustrate what I am trying to achieve.

What would be the proper way to transform the image of the 'moon' so that it maintains it's original shape as it travels the path?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:04:16.293

很简单：让月亮反方向旋转！

[http://jsfiddle.net/hsntY/3/](http://jsfiddle.net/hsntY/3/)

```
#moon { width:150px; animation:RotateRev 15s linear infinite;}

@keyframes RotateRev        
    {from {transform:rotate(360deg);}
     to   {transform:rotate(0deg);}} 
```

（另外，我可以理解它是否只是示例或其他东西，但您应该使用标准规范并具有前缀后备）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T20:57:07.380

转换图像的正确方法是应用您已应用于所有元素的相反变换。

在您的情况下，这包括路径中的 rotateX 和 rotateY 以及动画中的旋转。

为此，您还需要指定 -webkit-transform-style: preserve-3d; 这样转换可以真正撤消以前的转换。

但是有一个问题，我认为这是一个 Chrome 错误：当您应用关键帧动画时，preserve-3d 停止工作。

所以，很抱歉，我无法让它工作；我认为如果不纠正这个错误是不可能的。可能在另一个浏览器中？

[您可以在没有动画](http://jsfiddle.net/vals/xDv6v/1/)的情况下检查静态正确的小提琴正确的小提琴

您还可以看到反向关键帧动画，您需要让它工作。

我建议您创建在平面上缩放圆的椭圆，而不是在 3D 中旋转它，我相信您可以通过这种方式进行操作

CSS 的结尾是这样的：

```
#Path{margin:5% 15% auto; position:relative;
       height:500px;width:500px;
       background-color:rgba(0,200,200, .1);
       border:1px solid black;
       border-radius:300px;
       -webkit-transform:perspective(0px) rotateX(50deg) rotateY(25deg);
       -webkit-transform-style: preserve-3d;}

#moonContain {width:500px;height:500px;position:absolute; margin-left:-0.5%;
-webkit-transform-style: preserve-3d;
            }

#moon { width:150px;-webkit-transform-style: preserve-3d;
       -webkit-transform:perspective(0px)  rotateX(-50deg) rotateY(-25deg);    }

@-webkit-keyframes Rotate        
{from {-webkit-transform:rotate(0deg);}
 to   {-webkit-transform:rotate(360deg);}}    
@-webkit-keyframes counterRotate        
{from {-webkit-transform:rotate(360deg);}
 to   {-webkit-transform:rotate(0deg);}} 
```

**更正**

我错误地解释了当您在月球本身中设置动画时出现的问题；我认为这是 Chrome 中的一个错误。真正发生的是动画正在为变换属性设置动画，并且撤消了月亮本身中指定的变换属性。正确答案：

在动画中设置两个变换，即使后者是恒定的：

```
@-webkit-keyframes counterRotate        
{from {-webkit-transform:rotate(360deg) rotateX(-50deg) rotateY(-25deg);}
 to   {-webkit-transform:rotate(0deg) rotateX(-50deg) rotateY(-25deg);}}    

 #moon { width:150px;-webkit-transform-style: preserve-3d;
    -webkit-animation:counterRotate 15s linear infinite;} 
```

## [正确的演示](http://jsfiddle.net/vals/xDv6v/3/)

# objective-c - 如何在可可中绘制椭圆渐变？

> ID：14761636
> 
> 赞同：0
> 
> 时间：2013-02-07T21:47:58.413
> 
> 标签：objective-c, cocoa, quartz-graphics

是否有可能在可可中获得这种渐变？ ![在此处输入图像描述](../Images/14d6ab8e16d9ff063703626d0039a7d7.png)

我可以使用简单`CGContextDrawRadialGradient`的夹子制作，`CGContextAddEllipseInRect`但效果会略有不同。

是否有可能准确地绘制这种阴影/渐变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:47:51.323

我会使用径向渐变，然后应用比例变换，使得 y 坐标被压缩，而 x 保持不变。

有一个高级主题，您可以在其中定义自己的渐变，提供一个计算颜色左右的回调。在 Core Graphics 文档中有说明。

# svg - Accessing external SVG graphics with the USE tag

> ID：14761638
> 
> 赞同：1
> 
> 时间：2013-02-07T21:48:01.250
> 
> 标签：svg

Dear Stack Overflow,

I am trying to reference individual SVG graphics which reside in different SVG files via the tag and ID numbers in a master HTML5 page.

I want to be able to put onclicks on the use tags in the HTML page in order to make a multiple choice quiz (and then keep a score which I know how to do), The graphics are going to be bulky. Therefore, these need to be in an external svg files.

Here however, I have used a simple rectangle to make my question easier to follow

Here is my HTML

```
<html>
<head></head>

<body>

<svg>  
<use xlink:href="LINK.svg#link" />
</svg>
</body>
</html> 
```

and here is My SVG

```
<?xml version="1.0" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg">
<g id="link">
 <rect x="0" y="0" width="50" height="50" style="fill:red"/>
</g>
</svg> 
```

This works exactly the way I want it to in Firefox and Opera. However, it does not work in Chrome or Safari. Not sure about Internet Explorer

Is there an alternative method that will allow me external access to the SVG data, and scripting from the main HTML page (because I want can keep a score over multiple SVG elements)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:10:43.847

您可以使用`<object>`标签访问您的 SVG。[此链接](https://jwatt.org/svg/demos/scripting-across-object.html)向您展示如何从 html 到 SVG 编写脚本，反之亦然。

# ruby-on-rails - 关于 Ruby on Rails 和 Apache2 的书？

> ID：14761641
> 
> 赞同：0
> 
> 时间：2013-02-07T21:48:11.187
> 
> 标签：ruby-on-rails, ruby, apache, controller

我以前用Webrick服务器做Ruby on Rails，现在老板让我在apache服务器上运行ROR代码，我看到这两个服务器有一些区别，我不知道如何访问控制器/对 apache 采取行动，所以有人碰巧知道任何关于 apahce 的 ROR 的书吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T22:01:13.110

要直接在 Apache 中运行，最好的办法是使用[Phusion Passenger](http://www.modrails.com)，它可以充当 Apache 模块。

* * *

但是，我认为您也缺少一些概念信息。以下是一些用于托管 rails 的常见 Rack 服务器：

**WEBrick**：纯粹用 Ruby 实现的 Web 服务器（随 Ruby 一起提供）。它的性能不是很好，并且相对有限。它是一个伟大的开发网络服务器，但大多数人不会在生产中使用它。

[**Thin**](http://code.macournoyer.com/thin)：一个非常容易启动和运行的高性能事件 Web 服务器。

[**Unicorn**](http://unicorn.bogomips.org/)：广泛使用和推荐的分叉 Web 服务器（由 GitHub 编写） - 但需要更多管理才能在生产中启动和运行。

**然而，在几乎所有情况下**，人们通常在他们选择的 Rails 网络服务器（作为代理）前安装 Nginx 或 Apache：

*   Nginx/Apache 在提供静态文件方面比上述任何选项都做得更好。如果您不使用 CDN 来托管您的资产，则绝对应该配置代理来托管它们。

*   Nginx/Apache 非常擅长管理大量请求并将它们排队，以便您的应用服务器可以专注于进行中的请求，而不是大量排队的请求。

*   减少安全漏洞的表面积。

*我选择的配置是Nginx+Unicorn；我发现 Apache 管理起来太笨拙，而 Unicorn 尤其出色。*

# eclipse - 项目删除操作后的 Eclipse 撤消

> ID：14761644
> 
> 赞同：0
> 
> 时间：2013-02-07T21:48:16.083
> 
> 标签：eclipse, eclipse-rcp

我正在开发一个类似于 eclipse 的 RCP 应用程序。

对于项目导航器中的 eclipse，如果我们删除一个项目（也标记了从磁盘中删除项目内容的复选框）并按`Ctrl`+ `Z`，我们可以看到项目再次返回但没有内容，并且在大多数情况下性质的项目也没有了。我无法理解这种现象。当磁盘中的内容也被删除时，为什么项目删除操作应该是可撤销的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:51:59.633

如果您**使用**“删除磁盘上的项目内容”复选框删除项目，则您的数据将消失。您无法撤消此操作。

如果您不选择复选框，Eclipse 将能够“恢复”您的所有项目。

![在此处输入图像描述](../Images/5d240b77ac913d9e380d324275eecc54.png)

相关问题：

*   [从 Eclipse 返回已删除的项目](https://stackoverflow.com/questions/4556438/return-deleted-project-from-eclipse)
*   [Eclipse项目被删除了如何撤消呢？或恢复它](https://stackoverflow.com/questions/7736733/eclipse-project-was-deleted-how-to-undo-it-or-recover-it)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:32:34.297

尝试蚀当地历史。您可能能够恢复一些源文件。你最好的选择

# jquery-knob - 使用 jQuery Knob 作为度数范围输入

> ID：14761648
> 
> 赞同：2
> 
> 时间：2013-02-07T21:48:26.810
> 
> 标签：jquery-knob

我想让我的用户在一个漂亮的 UI 中输入一系列度数。即类似 45-135 的东西（在我的应用程序中，这实际上意味着 NE-SE 风向......）。找到 jQuery Knob，但不知道如何使用它来允许值是一个范围。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T12:59:23.297

您可以将最小值和最大值设置为 0 和 360。像这样：

```
$(".dial").knob({min':0,'max':360}); 
```

您甚至可以使用一些步骤将可能的值限制为与 N-NE-E-SE-S-SO-O-NO 对应的某些内容

我希望这会有所帮助，如果没有，对不起。

# c++ - OpenGL 2D 代理动画和场景刷新

> ID：14761660
> 
> 赞同：0
> 
> 时间：2013-02-07T21:49:34.710
> 
> 标签：c++, opengl, animation

我正在尝试做一个 2D 小游戏来学习如何做并提高我的编程技能。我使用 C++/C 和 OpenGL 3.0 和 GLUT 对游戏进行编程。我对一些关于动画和场景刷新的重要概念感到困惑。

1.  只有在关卡开始时才加载所有纹理是一个好习惯？
2.  我将 fps 速率选择为 40 fps，我应该重绘所有场景和每一帧中的代理还是只重绘修改？
3.  在代理动画中，我应该重绘所有的代理还是只重绘从过去发生变化的部分？
4.  如果场景的某些部分发生变化（一堵墙或类似的东西被破坏），我应该重绘整个场景还是只重绘发生变化的部分？

现在我的“游戏”以 40fps 的帧速率运行，但游戏的**闪烁**效果看起来很奇怪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T22:11:34.227

1.  是的，每帧创建和删除纹理/缓冲区是一种巨大的浪费。

2.  重新绘制整个场景几乎总是更便宜。GPU 就是为此而构建的，速度非常快。

    将帧缓冲区从 VRAM 读回常规 RAM 并计算差异会慢得多，特别是因为 OpenGL 不会跟踪您的“对象”，它一次只需要一个三角形，将其栅格化，然后忘记它.

3.  取决于你如何定义动画。如果您正在谈论类似精灵的动画，其中每一帧都是单独的图像，那么仅参考新纹理并重绘是最便宜的。

    如果你有一个纹理图集，更新纹理坐标并重绘，如果你正在使用着色器（如果你想成为 OpenGL 3.0，你几乎必须这样做），你可能能够摆脱一个偏移的制服纹理坐标。

4.  是的，正如我之前所说，硬件是为了清除屏幕并重绘所有内容而构建的。

对于帧率，您应该使用显示器的刷新率来避免垂直撕裂。现在几乎所有的显示器都是 60Hz，所以 60fps 是最常见的“目标”帧率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T21:58:02.857

选择 30 或 60 fps，因为大多数现代显示器以 60 Hz 的速率刷新。因此，每个“监视器帧”有 2 个或 1 个渲染帧。这应该可以减少闪烁效果。（我不是 100% 确定您是否指的是“闪光效果”。）

关于所有其他问题（听起来几乎相同）：在 OpenGL 渲染中，重绘所有内容非常普遍，因为在大多数游戏中，几乎整个屏幕在每一帧中都会发生变化，例如，如果你正在四处移动。您*可以*进行部分屏幕更新，但这在 CPU 方面非常罕见且成本更高，因为您必须计算要绘制哪些部分，而不仅仅是“绘制所有内容”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T22:29:55.593

1.  是的

2-4。是的-希望这可以帮助您理解为什么必须...

想象一下，你有 2 张纸。第一张纸你画了一个站着不动的火柴人，然后给别人看。

第二张纸，当用户在看那张纸时，你又画了同样的东西，但这次你稍微移动了手臂。

现在你给他们看第二张纸，当他们看第二张纸时，你清除第一张纸并画出那个人稍微移动他的手臂。

这几乎就是它的工作原理，也是您必须始终渲染整个图像的原因，无论是否没有任何变化。

# javascript - 标记图显示不正确

> ID：14761665
> 
> 赞同：0
> 
> 时间：2013-02-07T21:49:46.133
> 
> 标签：javascript, google-maps, google-maps-api-2

我有不同步骤的订单格式的谷歌地图，这是由隐藏的 div 完成的。首先我得到了地图上的灰色区域。这是通过更改此代码解决的

第一的：

```
map = new GMap2(document.getElementById("map_canvas"); 
```

现在：

```
map = new GMap2(document.getElementById("map_canvas"),{ size: new GSize(430, 315) }); 
```

但现在我的地图不再居中。当我根据地址添加标记时，标记位于谷歌地图的右上角。

有没有人对此有解决方案？我知道我在 V2 中工作，但现在它必须工作，所以我正在创造更多时间来迁移到 V3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:42:23.907

用于[`setCenter()`](https://developers.google.com/maps/documentation/javascript/v2/reference?hl=de#GMap2.setCenter)重新居中地图。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T08:34:51.347

你是说这个莫勒博士？

```
<div class="gb_map_locator" id="gb_maplocator">
<a id="btnAddtomap"><?php echo JText::_('LOCATE_ADDRESS_TO_MAP');?></a>
<fieldset class="adminform"><input type="hidden" name="glat"
    id="map_glat" /> <input type="hidden" name="glng" id="map_glng" /> <input
    type="hidden" name="level" id="map_level" />

<div id="map_canvas" style="width:430px; height: 315px;"></div>
<br />
<div class="mapbuttons"><a id="addMarkerButton"><?php echo JText::_('ADD_MARKER');?></a>
<a id="fixMarkerButton"><?php echo JText::_('FIX_MARKER');?></a></div>
</fieldset> 
```

# sql - 与 curdate 约会数学

> ID：14761666
> 
> 赞同：0
> 
> 时间：2013-02-07T21:50:13.107
> 
> 标签：sql, ibm-midrange

我需要在`lpdt7`今天的 7 天内选择我所在的位置。下面的代码返回：“日期、时间或时间戳字符串中的值无效。”

```
SELECT lnmast.sname,
       lnmast.status,
       ddmast.acctno,
       ddmast.status,
       date(digits(lpdt7)) AS closed
FROM mydat.lnmast lnmast
LEFT OUTER JOIN mydat.ddmast ddmast ON lnmast.cifno = ddmast.cifno
AND lnmast.altadd = ddmast.altadd
WHERE lnmast.status = 2
  AND date(digits(lpdt7)) >= curdate() -7 days 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:02:55.733

我认为日期函数不适用于像 date(digits(lpdt7)) 这样的小数，并导致您看到的错误。假设您的十进制日期为 YYYYMMDD 格式。你可以像这样转换它。

```
 DATE (SUBSTR ( DIGITS (lpdt7) , 1 , 4 ) || '-' || 
       SUBSTR ( DIGITS (lpdt7) , 5 , 2 ) || '-' || 
       SUBSTR ( DIGITS (lpdt7) , 7 , 2 ) ) 
```

我使用 DIGITS 而不是 CHAR，因为它不会抑制 0。最好在您的系统中创建日期转换函数 - sql 代码看起来会更清晰。这个答案取自我们实时系统中使用的日期函数的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:10:43.850

我的错误伙计们。我必须首先在日期字段中捕获空值。

```
WHERE lnmast.status = 2 and lpdt7 > 1 and date(digits(lpdt7)) >= curdate() - 7 days 
```

# xml - 动态创建填充有 XML 数据的多个文本框

> ID：14761667
> 
> 赞同：0
> 
> 时间：2013-02-07T21:50:12.290
> 
> 标签：xml, actionscript-3, flash, for-loop, each

我应该进一步描述这一点。在我的 AS3 中，我目前正在将 XML 工作表中的动态文本创建到文本字段中。我的代码看起来像这样有助于进一步描述这一点：

```
 function XMLLoader(e:Event):void
    {
        xmlData = new XML(e.target.data);
        ParseList(xmlData);

    }

    function ParseList(nameData:XML):void
    {
     var nameList:XMLList = nameData.Searchtext.Name;
     for each (var nameElement:XML in nameList){
      directory_text.appendText(nameElement.text() + "\n");
     trace(nameElement.text());
     }
    } 
```

我想要做的是使用相同的格式，为每个输出的项目（在本例中为名称）创建一个文本框，以便我可以使每个单独的项目可点击并添加一个功能。我希望用“for each”来做到这一点，但没有一个明确的方法来做到这一点。

有任何想法吗？我的 AS3 调用了所有下面列出的，最多可以达到 50 多个项目，所以我想动态添加它。

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:42:55.013

这是一个按照您的要求做的简单示例。这会`TextField`为容器对象中的每个*Name*节点`Sprite`添加一个，然后向容器添加一个事件侦听器，以捕获容器（以及它的子级）上发生的任何点击。

在事件侦听器方法中，它会找出`TextField`被单击的 s 的哪个实例并跟踪其内容。

您可能无法立即使用此代码，但它显示了如何完成此类操作的原理。

```
function parseList(nameData:XML):void {
    var nameList:XMLList = nameData.Searchtext.Name;

    var textContainer:Sprite = new Sprite();
    this.addChild(textContainer);

    for each (var node:XML in nameList) {
        var currTextField:TextField = new TextField();
        currTextField.text = node.text();
        currTextField.y = textContainer.height; //Place the textfield below any previous textfields
        currTextField.height = 30;
        currTextField.selectable = false;
        textContainer.addChild(currTextField);
    }

    textContainer.addEventListener(MouseEvent.CLICK, onTextClick);
}

function onTextClick(e:MouseEvent):void {
    if (e.target is TextField) {
        var currTextField:TextField = e.target as TextField;
        trace("This name was clicked:", currTextField.text);
    }
} 
```

# vim - 如何在线格式化html？

> ID：14761668
> 
> 赞同：0
> 
> 时间：2013-02-07T21:50:14.760
> 
> 标签：vim

假设我有一行 html 代码，

```
<div><p><span>foo</span></p></div> 
```

我想把它转换成类似的东西

```
<div>
  <p>
    <span>foo</span>
  </p>
</div> 
```

是否有任何插件或本机解决方案可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T22:19:52.723

使用[tidy](http://tidy.sourceforge.net/)程序（或其[HTML5 兄弟](https://github.com/w3c/tidy-html5)）。

这就是它的设计目的，而这就是正则表达式的设计目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T22:19:43.817

如果您在 linux 机器上工作，通常`xmllint`已经安装了。试试这个命令：

```
:%!xmllint --format - 
```

这会将文本更改为您想要的。但`<?xml version="1.0"?>`一开始就有。不知道你是否可以。

如果要删除，执行命令后，光标会在行，输入dd删除。或者你可以把它写在一个映射中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T00:31:34.557

`:%s/></>\r</g``Enter``gg``Shift-v``Shift-g``=``Enter`

（`:set ft=html`如果你还没有，你将需要）

当我执行上述操作时，我得到

```
<div>
    <p>
    <span>foo</span>
    </p>
</div> 
```

不幸的是，VIM 在大多数与前端相关的缩进（html、javascript）方面做得很差。这是一个常见的抱怨，尽管 vim 的所有可定制功能都可能永远不会有一个好的解决方案。

# ruby-on-rails-3 - 在 elasticsearch 中加入/拆分搜索词（使用轮胎）

> ID：14761671
> 
> 赞同：2
> 
> 时间：2013-02-07T21:50:32.103
> 
> 标签：ruby-on-rails-3, elasticsearch, tire, fuzzy-search

我有以下分析器（对雪球的设置方式稍作调整）：

```
 string_analyzer: {
    filter: [ "standard", "stop", "snowball" ],
    tokenizer: "lowercase"
  } 
```

以下是它适用的领域：

```
 indexes :title, type: 'string', analyzer: 'string_analyzer'

  query do
    match ['title'], search_terms, fuzziness: 0.5, max_expansions: 10, operator: 'and'
  end 
```

我的索引中有一条带有 title 的记录`foo bar`。

如果我搜索`foo bar`它会出现在结果中。

但是，如果我搜索`foobar`它不会。

有人可以解释为什么，如果可能的话我怎么能得到它？

有人可以解释一下我如何才能让这个反向工作，以便如果我有一个带有标题`foobar`的记录，用户可以搜索`foo bar`并看到它作为结果？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:43:43.367

您只能搜索索引中的标记。所以让我们看看你在索引什么。您当前正在使用`lowercase`标记器（它标记非字母字符上的字符串并将它们小写）然后应用`standard`过滤器（冗余，因为您没有使用`standard`标记器），`stop`and`snowball`过滤器。

如果我们创建该分析器：

```
curl -XPUT 'http://127.0.0.1:9200/test/?pretty=1'  -d '
{
   "settings" : {
      "analysis" : {
         "analyzer" : {
            "string_analyzer" : {
               "filter" : [
                  "standard",
                  "stop",
                  "snowball"
               ],
               "tokenizer" : "lowercase"
            }
         }
      }
   }
}
' 
```

并使用`analyze`API 对其进行测试：

```
curl -XGET 'http://127.0.0.1:9200/test/_analyze?pretty=1&text=foo+bar&analyzer=string_analyzer' 
```

你会看到`"foo bar"`产生了 terms`["foo","bar"]`并`"foobar"`产生了 term `["foobar"]`。因此，目前无法进行索引`"foo bar"`和搜索。`"foobar"`

如果您希望能够搜索“内部”单词，那么您需要将单词分解为更小的标记。为此，我们使用`ngram`分析器。

所以删除测试索引：

```
curl -XDELETE 'http://127.0.0.1:9200/test/?pretty=1' 
```

并指定一个新的分析器：

```
curl -XPUT 'http://127.0.0.1:9200/test/?pretty=1'  -d '
{
   "settings" : {
      "analysis" : {
         "filter" : {
            "ngrams" : {
               "max_gram" : 5,
               "min_gram" : 1,
               "type" : "ngram"
            }
         },
         "analyzer" : {
            "ngrams" : {
               "filter" : [
                  "standard",
                  "lowercase",
                  "ngrams"
               ],
               "tokenizer" : "standard"
            }
         }
      }
   }
}
' 
```

现在，如果我们测试分析器，我们会得到：

```
"foo bar" => [f,o,o,fo,oo,foo,b,a,r,ba,ar,bar]
"foobar"  => [f,o,o,b,a,r,fo,oo,ob,ba,ar,foo,oob,oba,bar,foob,ooba,obar,fooba,oobar] 
```

因此，如果我们索引`"foo bar"`并`"foobar"`使用`match`查询进行搜索，那么查询将成为查找任何这些标记的查询，其中一些标记存在于索引中。

不幸的是，它也会与`"wear the fox hat"`( `f`, `o`, `a`) 重叠。虽然`foobar`会出现在结果列表的较高位置，因为它有更多的共同标记，但您仍然会得到明显不相关的结果。

这可以通过使用`minimum_should_match`参数来控制，例如：

```
curl -XGET 'http://127.0.0.1:9200/test/test/_search?pretty=1'  -d '
{
   "query" : {
      "match" : {
         "my_field" : {
            "minimum_should_match" : "60%",
            "query" : "foobar"
         }
      }
   }
}
' 
```

的确切值`minimim_should_match`取决于您的数据 - 尝试一下。

# c++ - 为什么我不能将受保护的嵌套类用作另一个嵌套受保护类的模板参数？

> ID：14761672
> 
> 赞同：2
> 
> 时间：2013-02-07T21:50:32.560
> 
> 标签：c++, templates, c++11, nested-class

在了解嵌套类是嵌套类的成员并因此可以完全访问嵌套类的成员这一事实之后（至少对于 C++11，请参见[此处](https://stackoverflow.com/q/14758881/1984137)），我在尝试创建嵌套类模板时遇到了一个问题：

```
#include <iostream>

using namespace std;

// #define FORWARD 

class A {

// public: // if FooBar is public, the forward declared version works
protected:
  enum class FooBar { // line 11, mentioned in the error message
    foo,
    bar
  };

protected:
#ifdef FORWARD
  // forward declaration only
  template< FooBar fb = FooBar::foo >
  struct B; 
#else
  // declaration and definition inline
  template< FooBar fb = FooBar::foo >
  struct B{
    void print(){ cout << A::i << (fb==FooBar::foo ? " foo" : " not foo") << endl;};
  };
#endif

public:
  B<>* f;
  B<FooBar::bar>* b;
private:
  static const int i = 42;
}; 

#ifdef FORWARD
// definition of forward declared struct
template< A::FooBar fb>
struct A::B{
  void print(){ cout << A::i << (fb==FooBar::foo ? " foo" : " not foo") << endl; };
}; // line 41, mentioned in the error message
#endif

int main(int argc, char **argv)
{
  A a;
  a.f->print();
  a.b->print();
  return 0;
} 
```

这应该（并且确实）输出：

```
42 foo
42 not foo 
```

## 问题

`#define FORWARD`如果未注释，即已`FORWARD`定义，为什么这段代码不编译？

我得到的错误（来自 gcc 4.7.2）是

```
main.cpp:11:14: error: ‘enum A::FooBar’ is protected
main.cpp:41:2: error: within this context 
```

从对早期[问题的](https://stackoverflow.com/q/14758881/1984137)[回答](https://stackoverflow.com/a/14759027/1984137)中，我了解到它是它的成员，并且应该可以访问它的（私人）成员（它确实如此，它会打印）。那么为什么不能在类外声明中访问呢？`B``A``A::i``A::FooBar`

## 背景

对于标头和实现分离的其他一些代码，这显然是一个最小的示例。我本来希望只转发声明嵌套类模板`B`以使类的接口`A`更具可读性，因为那时我可以将模板类的实现推到头文件的末尾（即一个人会得到的行为/设置通过取消注释`#define FORWARD`）。所以是的，这是一个相当*美观*的问题——但我相信这表明我不明白发生了什么，因此我很想了解这个问题，*但为什么呢？*.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T23:25:41.150

您可以将示例简化为：

```
class A
{
private:
  enum FooBar { foo };

public:
  template< FooBar fb = foo >
  struct B;
};

template< A::FooBar >
struct A::B
{
};

A::B<> a; 
```

[正如DR 580](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#580)所阐明的那样，这是合法的，并且被 Clang++ 接受，所以看起来 G++ 还没有实现该解决方案。

我已将此报告为[GCC PR 56248](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=56248)并且还报告[了 Clang PR 15209](http://llvm.org/bugs/show_bug.cgi?id=15209)，因为 Clang 也没有完全实现 DR 580。

# php - 使用 Utf8 并插入到 mysql 的问题

> ID：14761684
> 
> 赞同：0
> 
> 时间：2013-02-07T21:51:14.417
> 
> 标签：php, mysql

我有 php & mysql 的问题，使用 utf-8 插入数据库。第一个文件：addsite：

```
<?php
include 'header.php';
if(isset($data)) {
foreach($_POST as $key => $value) {
$posts[$key] = filter($value);
}
if(isset($posts['type'])){
if($posts['url'] == "http://" || $posts['url'] == ""){
$error = "Add your page link!";
}else if($posts['title'] == ""){
$error = "Add your page title!";
}else if(!preg_match("/\bhttp\b/i", $posts['url'])){
$error = "URL must contain http://";
}else if(!preg_match('|^http(s)?://[a-z0-9-]+(.[a-z0-9-]+)*(:[0-9]+)?(/.*)?$|i',       $posts['url'])){
$error = "Please do not use special characters in the url.<";
}else{
    include "plugins/" . $posts['type'] . "/addsite.php";
}
}
?>
<div class="contentbox">
<font size="2">
<li>Pick the type of exchange you are promoting from the dropdown menu.</li>
<li>Set the amount of coins you wish to give per user complete(CPC).</li>
<li>The higher the amount of coins the higher the Links position.</li>
</div>
<div class="contentbox">
<div class="head">Add Site</div>
<div class="contentinside">
    <?php if(isset($error)) { ?>
    <div class="error">ERROR: <?php echo $error; ?></div>
    <?php }
    if(isset($success)) { ?>
    <div class="success">SUCCESS: <?php echo $success; ?></div>
    <?php }
    if(isset($warning)) { ?>
    <div class="warning">WARNING: <?php echo $warning; ?></div>
    <?php } ?>

    <form class="contentform" method="post">
        Type<br/>
        <select name="type"><?php $select = hook_filter('add_site_select', ""); echo   $select; ?></select><br/><br/>
        Link<br/>
        <input name="url" type="text" value="<?php if(isset($posts["url"])) { echo $posts["url"]; } ?>"/><br/><br/>
        Title<br/>
        <input name="title" type="text" value="<?php if(isset($posts["title"])) { echo $posts["title"]; } ?>"/><br/><br/>
        Cost Per Click<br/>
        <?php if($data->premium > 0) { ?>
        <select name="cpc"><?php for($x = 2; $x <= $site->premcpc; $x++) { if(isset($posts["cpc"]) && $posts["cpc"] == $x) { echo "<option selected>$x</option>"; } else { echo "<option>$x</option>"; } } ?></select><br/><br/>
        <?php }else{ ?>
        <select name="cpc"><?php for($x = 2; $x <= $site->cpc; $x++) { if(isset($posts["cpc"]) && $posts["cpc"] == $x) { echo "<option selected>$x</option>"; } else { echo "<option>$x</option>"; } } ?></select><br/><br/>
        <?php } ?>
        <input style="width:40%;" type="Submit"/>
    </form>
</div>
 </div>
<?php
 }
else
 {
echo "Please login to view this page!";
 }
 include 'footer.php';
  ?> 
```

第二个文件，插件addsite.php

```
<?php
$num1 = mysql_query("SELECT * FROM `facebook` WHERE `url`='{$posts['url']}'");
$num = mysql_num_rows($num1);
if($num > 0){
$error = "Page already added!";
 }else if(!strstr($posts['url'], 'facebook.com')) {
$error = "Incorrect URL! You must include 'facebook.com'";
}else{
mysql_query($qry);
  mysql_query("INSERT INTO `facebook` (user, url, title, cpc) VALUES('{$data->id}', '{$posts['url']}', '{$posts['title']}', '{$posts['cpc']}') ");
$success = "Page added successfully!";
}
?> 
```

当我在表单中编写阿拉伯语并提交时，它以未知语言进入数据库，例如：

```
 &Oslash;&pound;&Oslash;&sup3;&Ugrave; 
```

## 数据库整理：utf8_general_ci

配置文件

```
$host       =   "localhost"; // your mysql server address
$user       =   ""; // your mysql username
$pass       =   ""; // your mysql password
$tablename  =   ""; // your mysql table

session_start();
$data = null;
if(!(@mysql_connect("$host","$user","$pass") && @mysql_select_db("$tablename"))) {
    ?>
    <html>
    MSQL ERROR
    <?
    exit;
}

include_once 'functions.php';
require_once "includes/pluggable.php";
foreach( glob("plugins/*/index.php")  as $plugin) {  
  require_once($plugin);  
}  

hook_action('initialize');

$site = mysql_fetch_object(mysql_query("SELECT * FROM settings"));
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:37:04.680

将表格的整理和字符集更改为 utf8

```
alter table <some_table> convert to character set utf8 collate utf8_unicode_ci; 
```

# c# - 如何在新线程中调用长方法以保持 UI 在 C# 中运行

> ID：14761687
> 
> 赞同：4
> 
> 时间：2013-02-07T21:51:38.863
> 
> 标签：c#, wpf, multithreading, user-interface, reporting-services

我有一个 WPF 应用程序，其中包含一个填充用户的组合框、一个显示所选用户的一些数据的网格和一个调用 DoTimeSheetReport() 的按钮。

DoTimeSheetReport() 做了一些工作，然后打开一个带有 SSRS 报告的新窗口。一切正常，但该方法需要很长时间才能完成，主要是因为报告，这意味着我的 UI 变得无响应。我尝试了几种方法来启动一个新的线程/任务，但它们都阻塞了 UI 的线程。我可能做错了什么，但我不知道。

为了不阻塞用户界面，调用长方法的最佳方法是什么？

**编辑**

我更改了代码以隔离耗时的部分。

```
reportViewer.SetPageSettings(reportConfiguration.PageSettings); 
```

在这部分使用 backgroundWorker 做到了。谢谢您的帮助。

@LuisQuijada：那行得通，请发布答案，以便我接受。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T21:53:53.093

```
using System.Threading;
new Thread(() => 
{
    Thread.CurrentThread.IsBackground = true; 
    /* run your code here */ 
    Console.WriteLine("Hello, world"); 
}).Start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T22:00:28.680

**简而言之：**你需要做的是看看**如何使用异步调用**。

作为开始，您可以查看帖子和/或 MSDN 文章中的建议链接：

*   [异步调用同步方法](http://msdn.microsoft.com/en-us/library/2e08f6yc.aspx)
*   [Dispatcher.BeginInvoke 方法（DispatcherPriority、Delegate）](http://msdn.microsoft.com/en-us/library/ms591206.aspx)

# perl - Perl - 如何按给定顺序对数组值进行排序？

> ID：14761688
> 
> 赞同：1
> 
> 时间：2013-02-07T21:51:42.310
> 
> 标签：perl, hashtable

在那[如何按给定顺序对列表进行排序？](https://stackoverflow.com/questions/14730683/perl-how-to-sort-a-list-with-a-given-order)

我们已经讨论了如何使用 map 和 $_ 根据给定的顺序对列表进行排序。今天我还有一个问题。

我有同样的订单：

```
my @orderby = ( 'car', 'boat', 'chicken', 'cat', 'dog', 'mouse');
# or if it's better to the code:
my %orderby = ( 'car' => 0, 
                'boat' => 1, 
                'chicken' => 2, 
                'cat' => 3, 
                'dog' => 4, 
                'mouse' => 5); 
```

现在我有以下需要通过 orderby 订购：

```
print Dumper \%toys;
$VAR = {
         'animals'  =>  [
                          [
                            'feather', 'cluck-2', 'chicken', 'white'
                          ],
                          [
                            'bald', 'bark', 'dog', 'black stripes'
                          ],
                          [
                            'feather', 'cluck-2', 'chicken', 'white'
                          ]
                        ],
         'notanima' =>  [
                          [
                            'paited', 'motor', 'boat', 'red'
                          ],
                          [
                            'painted', 'motor', 'car', 'blue on top'
                          ]
                        ]
       }; 
```

代码需要使用基于 orderby 的 3 列进行排序。您需要对动物和 notanima 使用相同的命令。重新排列后，$VAR 将是：

```
$VAR = {
         'animals'  =>  [
                          [
                            'feather', 'cluck-2', 'chicken', 'white'
                          ],
                          [
                            'feather', 'cluck-2', 'chicken', 'white'
                          ],
                          [
                            'bald', 'bark', 'dog', 'black stripes'
                          ]
                        ],
         'notanima' =>  [
                          [
                            'painted', 'motor', 'car', 'blue on top'
                          ],
                          [
                            'paited', 'motor', 'boat', 'red'
                          ]
                        ]
       }; 
order %toys{key} by orderby; 
```

我试图更改@ikegami 提供的地图解决方案

```
my %counts; ++$counts{$_} for @list;
my @sorted = map { ($_) x ($counts{$_}||0) } @orderby; 
```

但我没有成功。你们有什么想法我该如何实现这个目标？

提前谢谢！

**更新！**
我试图使用 ikegami 的建议，我这样做了：

```
# that first foreach will give one ARRAY for animals and one ARRAY for notanima
foreach my $key (keys %toys)
{
   # that one will give me access to the ARRAY referenced by the $key.
   foreach my $toy_ref ($toys{$key})
   {
       my %orderby = map {$orderby[$_] => $_} 0..$#orderby;
       my @sorted = sort { $orderby{$a} <=> $orderby{$b} } @{$toy_ref};
       # my @sorted = sort { $orderby{$a} <=> $orderby{$b} } $toy_ref;
       print Dumper @sorted;
   }
} 
```

首先，这给了我警告：

```
Use of uninitialized value in numeric comparison (<=>) at.... 
```

以及 notanima 的排序结果（我会忽略动物，所以帖子不会那么大）：

```
$VAR1 = [
         'paited', 'motor', 'boat', 'red'
       ];
$VAR2 = [
         'painted', 'motor', 'car', 'blue on top'
       ]; 
```

基于orderby，打印顺序需要：

```
$VAR1 = [
         'painted', 'motor', 'car', 'blue on top'
       ];
$VAR2 = [
         'paited', 'motor', 'boat', 'red'
       ]; 
```

汽车需要先来。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:08:01.377

所以你有 6 个数组要排序，所以你需要 6 次调用`sort`.

1.  对于 %toys 的每个元素，
    1.  对于 %toys 的该元素引用的数组的每个元素，
        1.  如前所示对引用的数组进行排序。

并且请不要使用标有“扰乱人心”的解决方案。

# matlab - 如何在matlab中使用lassoglm

> ID：14761693
> 
> 赞同：-1
> 
> 时间：2013-02-07T21:52:00.643
> 
> 标签：matlab

我在 matlab 中使用 lassoglm 函数时遇到了这个问题。我的 matlab 说已经安装了统计工具箱。但是，我在我的 matlab 中看不到 lassoglm 函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:10:37.280

您的 Matlab 版本不够新。

我的 R2010a 版本上没有它。网站上的文档适用于 2012b。

# r - R在一个数据框中查询日期，其中日期来自单独的数据框

> ID：14761694
> 
> 赞同：3
> 
> 时间：2013-02-07T21:52:00.613
> 
> 标签：r, date

搜索了几个小时后，我似乎找不到以下问题的解决方案。我有 2 个数据框，一个包含一列观察日期，另一个包含开始日期和结束日期：

例如：

```
head(x)
station temp obsdate
311820  65.0 1973-01-01
311821  62.0 1973-01-02
etc...

head(seasonDates)
season startDate    endDate
A      1973-11-01   1974-06-30
B      1974-11-01   1975-06-30
C      1975-11-01   1976-06-30
etc... 
```

如果观察日期“obsdate”在“startDate”到“endDate”指示的日期范围内，我想将“seasonDates”数据框中的“season”分配给“x”数据框。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T22:31:05.410

假设三个日期列属于 "Date" 类：

```
library(sqldf)
sqldf("select * from x left join seasonDates on
        (obsdate between startDate and endDate)") 
```

# java - 合并网络摄像头流和视频文件并通过 RTP 或 RTSP 发送结果

> ID：14761698
> 
> 赞同：0
> 
> 时间：2013-02-07T21:52:09.603
> 
> 标签：java, video, stream, rtp, jmf

**你好，**

我们是从事 Java 项目的学生，我们必须：

1.  从网络摄像头捕获视频流
2.  将此流与视频文件合并（我们取每个像素颜色的平均值，因此两个流是叠加的）
3.  使用 RTP 或 RTSP 在网络上传输此合并的结果（理论上，它将被 2 个 Android 平板电脑接收）。

非常重要的一件事是所有这些操作都应该是**实时的**（或几乎是实时的）。应该在网络摄像头捕获视频的同时接收 RTP 流。

为此，我们使用 Java Media Framework (JMF) API。第一点和第二点已经成功实现：每秒，来自网络摄像头的 30 个**BufferedImage**与来自视频文件的30 个**BufferedImage**合并。结果显示在经典的 JFrame 上（我们只使用 Swing 和 JMF），而且效果非常好。

我们还要做第三点。通过 RTP 发送视频流并不难。 **但问题是：**由于第 1 点和第 2 点，我们没有视频流，而是一系列 BufferedImages。我们知道如何从这些 BufferedImage 中获取视频文件。但它只是硬盘上录制的视频文件，无法在网络上实时发送。那么我们如何从这些 BufferedImage 中制作一个可以通过 RTP 直接发送*的动态流呢？*

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:32:04.480

我想改进我的答案。

首先是你是否真的必须使用 RTP/RTSP 的问题。如果您不需要，您可以仅通过 DatagramSocket 发送图像数据，并假设接收者知道如何解码它们。使用类似的东西

```
DatagramSocket socket = new DatagramSocket(port);
DatagramPacket packet = new DatagramPacket(new byte[1], 1);    

packet.setAddress(receiver.getAddress());
packet.setPort(port);

while(running)
{
   byte[] data = getMergedImageData();

   packet.setData(data);
   packet.setLength(data.length);

   socket.send(packet);
} 
```

如果你必须使用 RTP，你应该看看[mjsip](http://www.mjsip.org/)项目。基本上，您必须创建一个有效的 RTP 标头（例如数据缓冲区中的前 12 个字节）。如果您知道每个位所属的位置，这将相当简单。

根据您对图像进行编码的方式，您可能需要警惕额外的要求。例如，当通过 RTP 发送 Jpeg 时，您必须删除完整的 Jpeg 标头并创建一个缩写的 RTP/Jpeg 标头并将其放在 RTP 标头和有效负载之间。接收方必须从缩写的标头重新创建 Jpeg 标头。对于 Jpeg，如果还没有，请确保在您的图像中添加 EOI 标记。我认为在这方面，如果你敢于深入 JNI，[ffmpeg可以为你做很多工作。](http://www.ffmpeg.org/)

有关如何调整 RTP 有效负载的更多信息，请参阅[此](http://www.iana.org/assignments/rtp-parameters/rtp-parameters.xml)。

干杯~

# hibernate - JPA (Hibernate) + Tomcat + 两个不同的数据库

> ID：14761706
> 
> 赞同：0
> 
> 时间：2013-02-07T21:52:35.587
> 
> 标签：hibernate, jakarta-ee, tomcat, hbm2ddl

我有一个使用 Hibernate 和 Tomcat 提供的 JPA 的 webapp。我没有 DI 框架，没有 Spring，没有 Guice，没有完整的 Java EE 应用服务器。

我需要 JPA 连接到两个不同的数据库。我像这样连接到第一个数据库：

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("mydb");
[...]
EntityManager em = emf.createEntityManager(); 
```

我在 persistence.xml 中声明了“mydb”持久性单元，并通过 JNDI 链接到它在 context.xml 中声明的资源。直到这里一切正常。

现在我需要连接到另一个数据库。我已将其添加到 persistence.xml 和 context.xml，并将持久性单元命名为“mydb2”。现在我假设我可以像这样使用它：

```
EntityManagerFactory emf2 = Persistence.createEntityManagerFactory("mydb2");
EntityManager em2 = emf2.createEntityManager(); 
```

Hibernate 配置为验证两个数据库上的类和表

```
<property name="hibernate.archive.autodetection" value="class, hbm"/>
<property name="hibernate.hbm2ddl.auto" value="validate"/> 
```

在persistence.xml 中。但是，当我运行/调试 webapp 时，Hibernate 尝试验证 mydb 上属于 mydb2 的 @Entity 类，但显然失败了。现在有趣的是，如果我将 Hibernate 验证属性设置为“无”，我的应用程序确实可以正常工作并根据需要连接到正确的数据库......

有没有办法让 Hibernate 只验证属于它们各自数据库的类/表？

编辑：虽然可以在 @Table 注释中指定目录名称，但在我的情况下，这不是一个好的解决方案，因为我在生产中有多个此 webapp 的实例，并且每个实例都连接到一对不同的数据库。在投入生产之前被迫接触源代码是不好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:23:23.607

如果使用@javax.persistence.Table 注解，则可以使用目录参数来区分数据库。

编辑：尝试定义单独的 hibernate-cfg.xml 文件（称它们为 db1-hibernate-cfg.xml 和 db2-hibernate-cfg.xml）并在 xml 元素中使用该元素列出与该工厂对应的实体。您也可以在对应于 JPA 的 orm.xml 中定义这些。

然后在你的spring配置中明确定义哪个hibernate-cfg（或orm.xml）映射到哪个EntityManager：

使用 Spring 的 LocalContainerEntityManagerFactoryBean 的示例：

```
<bean id="emf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitManager" ref="pum" />
    <property name="persistenceUnitName" value="my-pu" />
    <property name="jpaProperties">
        <props>
            <prop key="hibernate.ejb.cfgfile">my-hibernate.cfg.xml</prop>
                            ... other configurations
                    </props>
 </bean> 
```

如果你去定义单独的 orm.xml 文件，那么在你的 persistence-unit-manager 中，为每个实体管理器工厂（比如 db1-persistence.xml 和 db2 ..）定义一个单独的 persistence.xml 文件。在persistence.xml 文件中使用该元素来定义相应的orm.xml 文件。

这些文件的默认位置是类路径相关的。

# oracle - Oracle 供应商代码 17002 大型选择列

> ID：14761709
> 
> 赞同：0
> 
> 时间：2013-02-07T21:52:43.297
> 
> 标签：oracle

执行在多个表中返回大量列的选择时，会收到错误“供应商代码 17002”。查询只返回一个结果。当返回的列数小于 635 时，查询有效。当添加另一列时，会看到错误。

在转储文件中看到以下内容：

```
Exception [type: ACCESS_VIOLATION, UNABLE_TO_READ] [ADDR:0x45] [PC:0x35797B4, _kkqstcrf()+1342]
DDE: Problem Key 'ORA 7445 [kkqstcrf()+1342]' was flood controlled (0x6) (incident: 10825)
ORA-07445: exception encountered: core dump [kkqstcrf()+1342] [ACCESS_VIOLATION] [ADDR:0x45] [PC:0x35797B4] [UNABLE_TO_READ] []
Dump file c:\app\7609179\diag\rdbms\orcl\orcl\trace\orcl_s001_9928.trc
Thu Feb 07 15:10:56 2013
ORACLE V11.2.0.1.0 - Production vsnsta=0
vsnsql=16 vsnxtr=3
Dumping diagnostics for abrupt exit from ksedmp 
```

Windows 7，Oracle 11.2.0.1.0 企业版，SQL Developer，Java 应用程序的相同结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:11:58.587

ORA-07445 是一个通用错误，Oracle 使用它来表示操作系统中的意外行为，即错误。

该跟踪文件中应该有一些附加信息：

```
c:\app\7609179\diag\rdbms\orcl\orcl\trace\orcl_s001_9928.trc 
```

你看过了吗？

不幸的是，ORA-07445 的性质意味着解决底层问题通常是由于平台、操作系统和数据库版本的特定组合造成的。Oracle 已发布了一些关于诊断的建议，但大多数途径都导致致电 Oracle 支持。 [了解更多](https://blogs.oracle.com/db/entry/ora-7445_troubleshooting)。

至少你知道直接原因。因此，如果您没有支持合同，则有一种解决方法：更改您的应用程序，这样您就不必选择第 635 列。在单个查询中包含大量列。

查询投影中允许的列数没有实际限制，但语句的总长度可能超过限制。此限制因多个因素而异，并且[未在 docs 中指定](http://docs.oracle.com/cd/E11882_01/server.112/e25513/limits003.htm#i288032)。有和没有那个讨厌的附加列的语句有多长（多少个字符）？也许缩短一些列名可以解决问题。

# c# - 如何以编程方式获取特定的服务器标识

> ID：14761712
> 
> 赞同：2
> 
> 时间：2013-02-07T21:52:49.533
> 
> 标签：c#, asp.net, asp.net-mvc-3

如果我有多个服务器节点都链接到一个数据库。我想通过在表中添加一个名为“ServerName”的列来跟踪哪些事务来自哪个服务器。我可以在 c# 中做些什么来获取服务器名称、mac 地址或我可以放在该列中的东西，当我将数据保存到数据库表时，我可以在该列中唯一标识事务来自哪个服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:54:49.717

如果您只想要计算机名称，您可以使用Environment 类的[MachineName属性：](http://msdn.microsoft.com/en-us/library/system.environment.machinename.aspx)

```
Environment.MachineName 
```

现在无法保证此值的唯一性，因为多台机器可以具有相同的名称。不过，对于许多环境来说，这应该足够好了。

如果需要，您也可以获取[MAC 地址](https://stackoverflow.com/questions/850650/reliable-method-to-get-machines-mac-address-in-c-sharp)，但这对您的使用来说可能是多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:56:27.783

System.Environment.MachineName 应该为您解决问题。

# python - 太多 sse 连接挂起网页

> ID：14761713
> 
> 赞同：5
> 
> 时间：2013-02-07T21:52:53.173
> 
> 标签：python, django, gunicorn, server-sent-events

什么限制了 SSE（服务器发送事件）连接的数量？

我一直在使用 django/gunicorn/django-sse 进行项目。

当我限制到页面的 sse 连接数（5 个工作 6 个挂起）时，我的项目效果很好，这不是一个大问题，因为我使用分页，因此可以限制每页的数量。但我更希望能够拥有尽可能多的东西。

我的问题是：是连接数减慢了速度，还是正在传输的数据量？

我认为我可以通过让他们共享连接来解决第一个问题，但第二个问题可能会限制我更多。

有什么想法吗？

编辑：

客户端 JS SSE 代码：

```
function event(url, resource_name, yes, no, audio_in, audio_out, current_draw){
    /**
     * Listens for events posted by the server
     * 
     * Useful site for understanding Server Sent Events:
     *    http://www.w3.org/TR/eventsource/
     */
    var source = new EventSource(url);
    source.addEventListener("message", function(e) {
        resetTime(resource_name);
        data = updateStatus(e.data, yes, no, audio_in, audio_out, current_draw);
        document.getElementById(resource_name+"-in").src = data.audio_in_src
        document.getElementById(resource_name+"-in").alt = data.audio_in_alt
        document.getElementById(resource_name+"-out").src = data.audio_out_src
        document.getElementById(resource_name+"-out").alt = data.audio_out_alt
        document.getElementById(resource_name+"-current").innerHTML = data.current_draw + " A"
    });
} 
```

在views.py中

```
class ServerSentEvent(RedisQueueView):

    def get_redis_channel(self):
        """
        Overrides the RedisQueueView method to select the channel to listen to
        """
        return self.kwargs["resource_name"] 
```

在 urls.py

```
urlpatterns = patterns('',
                       url(r'^$',
                           views.Resources_page.as_view(),
                           name='resources_page'),
                       url(r'^(?P<resource_name>\w+)/$',
                           views.StatusPage.as_view(),
                           name='status_page'),
                       url(r'^(?P<resource_name>\w+)/sse/$',
                           views.ServerSentEvent.as_view(),
                           name='sse'),) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:30:17.107

如果您将`sync`工作进程用于 gunicorn（默认设置），那么与您的服务器的并发连接数只能与工作进程的数量一样多。

`sync`worker 是为 CPU 密集型任务设计的，因此建议使用worker `2N + 1`（其中 N 是可用的内核数）。如果您的 SSE 端点是这个的逻辑等价物......

```
while True:
    msg = "foo"
    yield msg
    sleep(1) 
```

...然后你有一个 I/O 绑定视图。无论您在该代码块上投入多少 CPU 时间，它都被设计为永无止境。如果您使用该`django_sse`项目，那么这几乎正是[您的 SSE 视图正在做的事情](https://github.com/niwibe/django-sse/blob/1eedac5229e5a9128c4fbc09f7d7b97a3859e9b9/django_sse/redisqueue.py#L62)。

解决方案是为 gunicorn 使用异步工作者类。安装`gevent`并将`--worker-class=gevent`选项传递给 gunicorn，您就在通往异步乌托邦的路上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T06:45:56.720

浏览器通常限制与同一服务器的连接，您可以从浏览器的配置中检查，例如在 Firefox 中，您可以在“about:config”页面上查看，在那里您可以看到这样的 key:value { network.http.speculative -parallel-limit 6 }，当然你可以把数字改成更多，测试一下。

所以这不是服务器端的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T10:36:48.633

我有同样的问题。我确定我使用 gevent 作为工作人员，但我只有大约 6 个连接。

解决方案很愚蠢。这是浏览器的限制。我把它写在这里，让下一个偶然发现的人看到..

在 firefox 中，about:config 中有一个名为的参数`network.http.max-persistent-connections-per-server`来控制它。因此，在我的情况下，解决方案是将该数字从 6（默认）增加，或者使用多个浏览器..

# macos - OSX USB 监控

> ID：14761714
> 
> 赞同：7
> 
> 时间：2013-02-07T21:52:54.407
> 
> 标签：macos, usb

如何监控 OSX 上的所有 USB 流量？我从 Apple Dev 网站下载了 USB 监控扩展并运行了 USB Prober。当我开始监控时什么都没有显示，并且在监控时有数据发送到 USB 设备和从 USB 设备发送数据。

我在这个网站上发现了 2 个类似的主题，但除了使用 libusb 之外，都没有给出答案。我希望我不必使用 libusb 从头开始​​编写自己的监视器。鉴于问题是在 2010 年提出的，我希望从那时起已经开发出工具来在 OSX 上完成此任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-11-28T11:30:19.417

在高山脉（可能还有旧版本）中是可能的，你需要[Wireshark 的夜间构建](https://www.wireshark.org/download/automated/osx/)（我使用的是 V2.5.0rc0）。安装后，您需要调出 USB“接口”：

```
sudo ifconfig XHC20 up 
```

之后，您可以使用wireshark 嗅探`XHC20`接口中的所有流量。完成后，记得关闭界面：

```
sudo ifconfig XHC20 down 
```

来源：[audio-ios](https://aud-ios.com/2017/10/22/usb-monitoring-with-wireshark/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T17:03:16.387

USB Prober 不会记录所有 USB 流量。它仅记录 USB/HID 驱动程序消息（由 USB/HID 驱动程序发布的诊断/信息消息）。

我从未为此尝试过 libusb，但我怀疑它无法捕获所有 USB 流量以太网（但我可能是错的）。

如果您对监控 USB 流量非常认真，您应该考虑使用硬件 USB 协议分析仪，例如 Total Phase 的 Beagle 12：[http ://www.totalphase.com/products/beagle_usb12/](http://www.totalphase.com/products/beagle_usb12/)

或 Ellisys 的 USB Explorer 200：[http ://www.ellisys.com/products/usbex200/index.php](http://www.ellisys.com/products/usbex200/index.php)

您可能有兴趣为这个 kickstarted 项目做出贡献：

[http://www.kickstarter.com/projects/busing/openvizsla-open-source-usb-protocol-analyzer?ref=card](http://www.kickstarter.com/projects/bushing/openvizsla-open-source-usb-protocol-analyzer?ref=card)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-08T23:23:11.460

usbtracer 包含在 USB Prober.app 中： [https ://developer.apple.com/library/mac/qa/qa1370/_index.html](https://developer.apple.com/library/mac/qa/qa1370/_index.html)

*   那里没有 HTML 锚点，因此请搜索“我在哪里可以找到 usbtracer 工具以及如何使用它？”
*   我不知道它是否显示所有流量，但至少在我的情况下它显示了一些东西，而 USB Prober 什么也没显示

# spring - Google App Engine：ID 为“”的对象由不同的对象管理器管理 - 重新访问

> ID：14761716
> 
> 赞同：1
> 
> 时间：2013-02-07T21:52:57.073
> 
> 标签：spring, google-app-engine, jpa, datanucleus

使用 GAE、JPA 和 Spring 时出现以下错误

> id为“”的对象由不同的对象管理器管理

当我第一次创建帐户时，我将 User 对象放入会话中。然后，当我在初始会话期间更新用户配置文件时，我合并了分离的用户。一切都很好。

然后我注销并稍后创建一个新会话。这一次，我加载 User 对象并将其放入会话中。仍然可以，但问题是当我更新用户配置文件时，合并失败并出现上述错误。

```
public boolean loadProfile(String openId, String email) {
    User user = null;
    try {
        user = userDao.findByOpenId(openId);
    } catch (NoResultException e) {
    }
    if (user != null) {
        logger.error(JDOHelper.getPersistenceManager(user));
        getSessionBean().setUser(user);
        return true;
    } else {
        user = createNewAccount(openId, email);
        getSessionBean().setUser(user);
        return false;
    }

}

@Transactional(propagation=Propagation.REQUIRES_NEW)
private User createNewAccount(String openId, String email) {
    User user = new User();
    user.setDisplayName(Long.toString(System.currentTimeMillis()));
    OpenIdentifier oid = new OpenIdentifier();
    oid.setOpenId(openId);
    oid.setEmail(email);
    oid.setUser(user);
    Set<OpenIdentifier> openIds = new HashSet<OpenIdentifier>();
    openIds.add(oid);
    user.setOpenIds(openIds);
    user = userDao.merge(user);
    return user;
}

@Transactional(propagation=Propagation.REQUIRED)
public void createOrUpdate(ActionEvent e) {
    logger.error(JDOHelper.getPersistenceManager(userFacade.getDelegate()));
    User user = userDao.merge(userFacade.getDelegate());
    sessionBean.setUser(user);
} 
```

我找到了这些相关的问题，但我仍然无法解决。

1.  [AppEngine 数据存储区：“具有 id ... 的对象由不同的对象管理器管理”](https://stackoverflow.com/questions/1403515/appengine-datastore-object-with-id-is-managed-by-a-different-object-manage)
2.  [Google App Engine - id为“”的对象由不同的JPA管理](https://stackoverflow.com/questions/11110826/google-app-engine-object-with-id-is-managed-by-a-different-jpa)
3.  [Datanucleus：从@Transactional 迁移到非事务性](https://stackoverflow.com/questions/7354101/datanucleus-moving-from-transactional-to-non-transactional)
4.  [http://www.atentia.net/2010/03/object-with-id-is-managed-by-a-different-object-manager/](http://www.atentia.net/2010/03/object-with-id-is-managed-by-a-different-object-manager/)

WRT 关闭 PM（根据 1 和 2），我无法显式关闭 PM，因为我使用的是 Spring org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter。从日志中，它似乎在每个页面请求上打开和关闭。

WRT 使实体可拆卸（根据 3 和 4），首先，我使用的是 JPA，使用 JDO 相关的注释似乎是错误的。其次，当我尝试时它没有工作。

对于额外的功劳，您如何使用 JDOHelper.getPersistenceManager(obj) 进行调试？在这种情况下，我得到空值，因为用户在页面请求之间分离。这对我来说似乎很正常，所以我不清楚如何调试它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:08:54.973

1.  你没有PM，你有EM。不知道你在那里指的是什么。
2.  可拆卸：使用 JPA，所有类都（增强为）可拆卸
3.  您在那里使用了一些古老的 GAE JPA 插件（v1.x？），并且使用不受支持的旧版本的 DataNucleus。使用 GAE JPA v2.x。“ObjectManager”在 DataNucleus 中已经存在多年了。
4.  您（或您正在使用的软件）必须关闭 EM，否则您的资源会到处泄漏。

NucleusJPAHelper.getEntityManager(obj); 是如何获得管理对象的 EntityManager（在 DataNucleus v3.x 中，由 GAE JPA v2.x 使用）

# php - 有没有一种简单的方法可以按月和年对数组进行排序？

> ID：14761719
> 
> 赞同：0
> 
> 时间：2013-02-07T21:53:01.597
> 
> 标签：php, arrays, date, sorting

我有一个数组，但我需要按顺序对其进行排序。有什么简单的方法可以做到这一点？数组如下所示：

```
( [01/2012] => 0 [01/2013] => 4 [02/2011] => 0 [02/2012] => 0
[03/2011] => 0 [03/2012] => 0 [04/2011] => 0 [04/2012] => 0
[05/2011] => 0 [05/2012] => 0 [06/2011] => 0 [06/2012] => 0
[07/2011] => 0 [07/2012] => 0 [08/2011] => 0 [08/2012] => 1
[09/2011] => 0 [09/2012] => 5 [10/2011] => 0 [10/2012] => 3
[11/2011] => 0 [11/2012] => 7 [12/2011] => 0 [12/2012] => 2 ) 
```

我需要它从最远回到最新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:00:20.100

您将使用[uksort](http://www.php.net/manual/en/function.uksort.php)功能。

```
uksort ( $myArray , function($keyA, $keyB){
    $monthYearA = explode('/', $keyA);
    $monthYearB = explode('/', $keyB);
    return $monthYearA[1].$monthYearA[0] >
           $monthYearB[1].$monthYearB[0] ? 1 : -1;
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T22:36:28.773

通过将每个键转换为 unix 时间戳，对键进行排序（ksort），然后再次将它们变成月份和年份来解决它。

```
 while($row = mysql_fetch_array($conversions_query)){
    if($row['data']){
      $data = unserialize($row['data']);
      foreach($data as $month=>$visits){
        if($visits == ""){
          $visits = 0;
        }
        $monthstring = explode("/", $month);
        $output[strtotime($monthstring[0]."/01/".$monthstring[1])] = $visits;
      }
    }
  }

  ksort($output);

  foreach($output as $key => $val){
    $thisdate = date("m/y", $key)."<br>";
    $output[$thisdate] = $output[$key];
    unset($output[$key]);
  }

  echo "<br>SORTED OUTPUT: ";
  print_r($output); 
```

# html - AngularJS：从字符串中插入 HTML

> ID：14761724
> 
> 赞同：74
> 
> 时间：2013-02-07T21:53:14.700
> 
> 标签：html, string, angularjs

我已经为此寻找了很多，但我要么找不到答案，要么不明白。一个具体的例子将赢得投票=）

*   我有一个返回 HTML 字符串的函数。
*   我无法更改功能。
*   我希望将字符串表示的 html 插入到 DOM 中。
*   我很乐意使用控制器、指令、服务或其他任何有效的东西（并且是相当好的做法）。
*   免责声明：我不太了解 $compile 。

这是我尝试过的：

```
// My magic HTML string function.
function htmlString (str) {
    return "<h1>" + str + "</h1>";
}

function Ctrl ($scope, $compile) {
  $scope.htmlString = htmlString;
}
Ctrl.$inject = ["$scope", "$compile"]; 
```

那没有用。

我也尝试将其作为指令：

```
// My magic HTML string function.
function htmlString (str) {
    return "<h1>" + str + "</h1>";
}

angular.module("myApp.directives", [])
  .directive("htmlString", function () {
    return {
      restrict: "E",
      scope: { content: "@" },
      template: "{{ htmlStr(content) }}"
    }
  });

  ... and in my HTML ...

  <html-string content="foo"></html-string> 
```

帮助？

*笔记*

我查看了这些以及其他内容，但无法使其正常工作。

*   [AngularJS：将 HTML 插入视图](https://stackoverflow.com/questions/9381926/insert-html-into-view-using-angularjs)
*   [AngularJS $http HTML 解析器](https://stackoverflow.com/questions/13141080/angularjs-http-html-parser)
*   [angularjs - 插入 $compile-d html](https://stackoverflow.com/questions/14737795/angularjs-inserting-compile-d-html)
*   [AngularJS 不会在使用 document.write() 插入的 HTML 中执行](https://stackoverflow.com/questions/13656533/angularjs-doesnt-execute-in-html-inserted-with-document-write)
*   [在 AngularJS 指令中转义 HTML 文本](https://stackoverflow.com/questions/14462612/escape-html-text-in-an-angularjs-directive/14514299#14514299)

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-02-07T22:55:33.823

看看这个链接中的例子：

[http://docs.angularjs.org/api/ngSanitize.$sanitize](http://docs.angularjs.org/api/ngSanitize.$sanitize)

基本上，Angular 有一个指令可以将 html 插入页面。在您的情况下，您可以使用 ng-bind-html 指令插入 html，如下所示：

如果您已经完成了所有这些：

```
// My magic HTML string function.
function htmlString (str) {
    return "<h1>" + str + "</h1>";
}

function Ctrl ($scope) {
  var str = "HELLO!";
  $scope.htmlString = htmlString(str);
}
Ctrl.$inject = ["$scope"]; 
```

然后在该控制器范围内的 html 中，您可以

```
<div ng-bind-html="htmlString"></div> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-10-21T03:50:44.503

你也可以使用`$sce.trustAsHtml('"<h1>" + str + "</h1>"')`，如果你想了解更多细节，请参考[$sce](https://docs.angularjs.org/api/ng/service/$sce)

# ruby - 如何在rails中覆盖attr_accessor getter和<<？

> ID：14761728
> 
> 赞同：1
> 
> 时间：2013-02-07T21:53:26.720
> 
> 标签：ruby, ruby-on-rails-3, singleton, overriding

我正在尝试将 Redis 集成到 Rails 应用程序中以替换“has_many through”关系。我想无缝地做到这一点，这样我们就不必在整个应用程序中更改代码。我的想法是覆盖某些类属性（例如 Speaker 类的 follower 属性）的不同方法，以便能够在使用它们时创建自定义行为：以下是我想要达到的行为：

```
s = Speaker.new
s.followers # calls custom getter and returns [User1, User2]
s.followers << User.create
s.followers # calls custom getter and returns [User1, User2, User3] 
```

这是我的想法，灵感来自[Ruby 中的 Overriding instance variable array's operator](https://stackoverflow.com/questions/1656090/overriding-instance-variable-arrays-operators-in-ruby)

```
class Speaker < ActiveRecord::Base  
  attr_accessor :followers

  def initialize
    super
    @followers = []
    class << @followers
      def <<(u)
        puts "setter #{u.id}" 
        $redis.set "speaker#{self.id}followers", u.id
        super(u.id)
      end
    end
  end

  def followers
    puts "getter"
    user_ids = $redis.get "speaker#{self.id}followers"
    User.find_all user_ids
  end

end 
```

问题是追随者getter的实现覆盖了“def <<（val）”的实现

如果没有定义吸气剂“def 追随者”：

```
s.followers
# []
s.followers << User.create 
# "setter 1"
# [1]
s.followers
# [1]
s.followers << User.create 
# "setter 2"
# [1, 2]
s.followers
# [1, 2] 
```

如果定义了 getter“def 参加者”：

```
s.followers << User.create
# ["My", "Custom", "Array", User1]
s.followers
# ["My", "Custom", "Array"]
s.followers << User.create
# ["My", "Custom", "Array", User2]
s.followers
# ["My", "Custom", "Array"] 
```

我怎样才能让 getter 和 setter "<<" 一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:00:17.710

```
def followers<<(val) 
```

那是行不通的。原因是：

```
foo.followers << "abc"
# is actually 2 methods!
foo.followers().<<("abc") 
```

所以`#followers`需要返回一个具有重写`#<<`方法的类的对象。

* * *

与 rails 关联返回关联代理对象的方式非常相似。

```
# Book has_many Pages
book.pages # an assoc proxy
book.pages << Page.new # calls #<< on the assoc proxy 
```

`Book#pages<<`不存在。 `Book#pages`返回一个实例`ActiveRecord::HasManyAssociationProxy`（或类似的东西），然后实现`#<<`实例方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:24:46.200

您的问题是 getter 正在返回一个新数组。您修改了`@followers`数组的单例类，但在 getter 中没有使用它：

```
def followers
  puts 'getter'
  ['a','new','array']
end 
```

如果你想要一个自定义的getter，那么你需要确保getter返回@followers（不改变底层引用），或者你需要重新装饰数组。

但是，AlexWayne 建议的是这样做的正确方法。返回处理 redis 详细信息的代理对象：

```
class FollowersList < SimpleDelegator
  def initialize(assoc)
    @assoc = assoc
    super(_followers)
  end

  def _reload
    __setobj__ _followers
    self
  end

  def _followers
    user_ids = $redis.get key
    User.find_all user_ids
  end

  def _key
    "speaker#{@assoc.id}followers"
  end

  # implement your overrides. The _reload method is to force the list to sync
  # with redis again, there are other ways to do this that wouldn't do the query
  # again
  def <<(val)
    $redis.lpush key, val.id
    _reload
  end

  #etc
end 
```

# php - 如何在函数中显示复选框

> ID：14761733
> 
> 赞同：0
> 
> 时间：2013-02-07T21:53:50.640
> 
> 标签：php, html

在下面的代码中，通过使用 implode 和 explode 并通过查找每个问题的选项类型，我尝试从完整选项类型中检索每个单独的选项。

例如：

`A-E`使`A B C D E`

`A-C`使`A B C`

`True or False`使`True False`

`Yes or No`使`Yes No`

现在这适用于以下代码：

```
<?php

  function ExpandOptionType($option) { 
      $options = explode('-', $option);
      if(count($options) > 1) {
        $start = array_shift($options);
        $end = array_shift($options);
        do {
          $options[] = $start;
        }while(++$start <= $end);
      }
      else{
        $options = explode(' or ', $option);
      }
      return implode(" ", $options);
    }

foreach ($arrQuestionId as $key=>$question) {

    ?>

    <div class='lt-container'>

    <p><?php echo htmlspecialchars($arrQuestionNo[$key]) . ": " .  htmlspecialchars($arrQuestionContent[$key]); ?></p>

    <p><?php echo ExpandOptionType(htmlspecialchars($arrOptionType[$key])); ?></p>

    </div>

    <?php

    }

    ?> 
```

但我想要做的是，除了仅通过字符串显示各个选项之外，我还想将它们显示为复选框。但是我在下面的尝试没有奏效，我怎样才能显示复选框？我实际上收到一条警告：`Warning: explode() expects parameter 3 to be long, string given in ... on line 241`

```
 function ExpandOptionType($option) { 
        $options = explode('-', '<input type=\"checkbox\" name=\"anstype\" class=\"answers\" id=\"answer".$option."\" name=\"answerName[$option]\" value=\"$option\" />', $option);
 //LINE 241
      if(count($options) > 1) {
        $start = array_shift($options); 
        $end = array_shift($options);
        do {
          $options[] = $start;
        }while(++$start <= $end);
      }
      else{
          $options = explode(' or', '<input type=\"checkbox\" name=\"anstype\" class=\"answers\" id=\"answer".$option."\" name=\"answerName[$option]\" value=\"$option\" />', $option);

      }
      return implode(" ", $options);
    }
    ?> 
```

# cocos2d-iphone - 如何在 Cocos2d 中暂停和恢复

> ID：14761735
> 
> 赞同：1
> 
> 时间：2013-02-07T21:53:52.887
> 
> 标签：cocos2d-iphone, delay, resume

所以我的想法是有一个特殊的子弹冻结敌人，一段时间后敌人解冻并继续他们的动作/动画。这是我所做的一个简单版本：

```
-(void)update:(ccTime)dt
{
     CCSprite *enemySprite;
     CCARRAY_FOREACH(enemies, enemySprite)
     {
         if (CGRectIntersectsRect(_bullet.boundingBox, enemySprite.boundingBox))
         {
               _bullet.visible = NO;
               [enemySprite pauseSchedulerAndActions];
               enemySprite.pausingDuration = CACurrentMediaTime() +5;
         }
         if (CACurrentMediaTime() > enemySprite.pausingDuration)
              [enemySprite resumeSchedulerAndActions];
     }
} 
```

现在，我想我遇到的问题是enemySprite已经停止更新它的调度程序，所以下次调用更新方法时，已经暂停的enemySprite不会得到更新！我希望我知道一种更好的解释方式，但我认为任何专业的程序员都会立即看到这段代码有什么问题。请帮助我提出改进代码的建议，或者甚至只是一个想法将不胜感激，谢谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:59:44.217

你打过电话了？:)

是的，pauseSchedulerAndActions 以及 Director 的 pause 方法都是实现暂停的糟糕方法，因为您无法控制暂停的内容以及可以继续运行的内容（例如暂停菜单层）。

在您的情况下，您至少可以更具体，例如只暂停操作，而不是计划更新：

```
[enemySprite.actionManager pauseTarget:enemySprite]; 
```

对于更细粒度的控制，建议不要过于依赖每个对象中的预定方法，而是让一个中心对象（场景或图层）将所有更新发送给它的子对象 - 这样您以后可以更轻松地决定哪些子对象应该继续在暂停期间接收更新。

# maven - WSO2 示例 Maven pom.xml

> ID：14761744
> 
> 赞同：1
> 
> 时间：2013-02-07T21:54:44.540
> 
> 标签：maven, build, wso2, wso2carbon

我想将我的 wso2 项目打包到 Maven 中，第一步是将 WSO2 示例放入 maven 构建中，然后在此基础上构建......但是，到目前为止，无法创建将编译示例代码的 pom.xml。

在线跟踪一些线索后： [Maven 中的 WSO2 BAM 2.0 库](https://stackoverflow.com/questions/10489177/wso2-bam-2-0-libraries-in-maven)

其中包括将 pom 下载并安装到本地存储库中，因为它在 wso2 存储库中不存在，仍然出现错误...

感谢您提供任何帮助或最好的帮助，如果有人有用于 WSO2 示例的 pom.xml 并且可以分享它...

这是当前的pom：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

<parent>
    <groupId>org.wso2.carbon</groupId>
    <artifactId>carbon-components</artifactId>
    <version>3.2.0</version>
</parent>

<repositories>
    <repository>
        <id>wso2-maven2-repository</id>
        <name>WSO2 Maven2 Repository</name>
        <url>http://dist.wso2.org/maven2</url>
        <snapshots>
        <enabled>true</enabled>
        </snapshots>
        <releases>
        <enabled>true</enabled>
        <updatePolicy>never</updatePolicy>
        <checksumPolicy>fail</checksumPolicy>
        </releases>
    </repository>
</repositories>

<modelVersion>4.0.0</modelVersion>
<groupId>acme</groupId>
<artifactId>acme.wso2</artifactId>
<version>1.0-SNAPSHOT</version>

<dependencies>

    <dependency>
        <groupId>org.wso2.carbon</groupId>
        <artifactId>org.wso2.carbon.bam.agent</artifactId>
        <version>3.2.4</version>
    </dependency>

    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>org.apache.axis2</groupId>
        <artifactId>axis2</artifactId>
        <version>1.5.1</version>
    </dependency>

    <dependency>
        <groupId>org.apache.ws.commons.axiom</groupId>
        <artifactId>axiom-api</artifactId>
        <version>1.2.11</version>
    </dependency>

</dependencies>

</project> 
```

以下是我在构建时收到的错误：

```
c:\projects\acme.wso2> mvn compile

[INFO] Scanning for projects...
[WARNING]
[WARNING] Some problems were encountered while building the effective model for acme:acme.wso2:jar:1.0-SNAPSHOT
[WARNING] 'dependencyManagement.dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: org.wso2.carbon:org.wso2.carbon.core.common:jar -> duplicate declaration of version ${carbon.platform.version} @ org.wso2.carbon:c
arbon-components:3.2.0, C:\Users\Tony\.m2\repository\org\wso2\carbon\carbon-components\3.2.0\carbon-components-3.2.0.pom, line 1025, column 25
[WARNING] 'dependencyManagement.dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: org.wso2.carbon:org.wso2.carbon.mashup.jsservices.stub:jar -> duplicate declaration of version ${carbon.platform.version} @ org.ws
o2.carbon:carbon-components:3.2.0, C:\Users\Tony\.m2\repository\org\wso2\carbon\carbon-components\3.2.0\carbon-components-3.2.0.pom, line 2128, column 25
[WARNING]
[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
[WARNING]
[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
[WARNING]
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building acme.wso2 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[WARNING] The POM for net.sf.saxon:saxon:jar:8.9 is missing, no dependency information available
Downloading: http://maven.wso2.org/nexus/content/groups/wso2-public/org/eclipse/osgi/org.eclipse.osgi.services/3.2.0.v20
090520-1800/org.eclipse.osgi.services-3.2.0.v20090520-1800.pom
[WARNING] Checksum validation failed, expected <!DOCTYPE but is 8edc83998e0bf2a8867395883f3853eb901be267 for http://maven.wso2.org/nexus/content/groups/wso2-public/org/eclipse/osgi/org.eclipse.osgi.services/3.2.0.v20090520-1800/org.eclipse.osgi.services-3.2.0.v20090520-1800.pom
Downloading: http://maven.wso2.org/nexus/content/groups/wso2-public/org/apache/bsf/bsf-all/3.0/bsf-all-3.0.pom
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 11.956s
[INFO] Finished at: Thu Feb 07 16:43:12 EST 2013
[INFO] Final Memory: 12M/161M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project acme.wso2: Could not resolve dependencies for project acme:acme.wso2:jar:1.0-SNAPSHOT:
    Failed to collect dependencies for [org.wso2.carbon:org.wso2.carbon.bam.agent:jar:3.2.4 (compile),
    javax:javaee-api:jar:6.0 (provided),
    org.apache.axis2:axis2:jar:1.5.1 (compile),
    org.apache.ws.commons.axiom:axiom-api:jar:1.2.11 (compile)]:
    Failed to read artifact descriptor for org.eclipse.osgi:org.eclipse.osgi.services:jar:3.2.0.v20090520-1800:
    Could not transfer artifact org.eclipse.osgi:org.eclipse.osgi.services:pom:3.2.0.v20090520-1800 from/to wso2-nexus
    (http://maven.wso2.org/nexus/content/groups/wso2-public/):
    Checksum validation failed, expected <!DOCTYPE but is 8edc83998e0bf2a8867395883f3853eb901be267 -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-17T03:43:16.070

你能像这样构建这个pom文件吗？

mvn 干净安装 -c

这将忽略校验和错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-02T11:34:56.657

将您的`repositories`标签替换为以下内容。您的依赖项将在这些存储库之一中可用。如果校验和错误似乎仍然存在，请参考@Harsha 的回答。

```
<repositories>
    <repository>
        <id>wso2-nexus</id>
        <name>WSO2 internal Repository</name>
        <url>http://maven.wso2.org/nexus/content/groups/wso2-public/</url>
        <releases>
            <enabled>true</enabled>
            <updatePolicy>daily</updatePolicy>
            <checksumPolicy>ignore</checksumPolicy>
        </releases>
    </repository>
    <repository>
        <id>wso2.releases</id>
        <name>WSO2 internal Repository</name>
        <url>http://maven.wso2.org/nexus/content/repositories/releases/</url>
        <releases>
            <enabled>true</enabled>
            <updatePolicy>daily</updatePolicy>
            <checksumPolicy>ignore</checksumPolicy>
        </releases>
    </repository>
    <repository>
        <id>wso2.snapshots</id>
        <name>WSO2 Snapshot Repository</name>
        <url>http://maven.wso2.org/nexus/content/repositories/snapshots/</url>
        <snapshots>
            <enabled>true</enabled>
            <updatePolicy>daily</updatePolicy>
        </snapshots>
        <releases>
            <enabled>false</enabled>
        </releases>
    </repository>
</repositories> 
```

# php - 调试 PHP 的分段错误

> ID：14761747
> 
> 赞同：0
> 
> 时间：2013-02-07T21:54:47.690
> 
> 标签：php, c, linux

我对 PHP5.4.11 和 APC 扩展（在 apache2 上）有疑问。在缓存一定数量的文件后，它会崩溃。我猜我需要一个核心转储来用 gdb 调查它？我还假设我必须使用调试标志编译扩展（或者可能）整个 PHP 以使源代码对 gdb 可见？

以上是我的猜测。如果有更好的方法，我愿意接受建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:31:29.147

尝试在您编译的 C 代码中添加一个段错误处理程序，这将帮助您找到问题所在

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>
#include <execinfo.h>
#include <signal.h>

void *array[50];
char **strings;
size_t size,i;

void handler(int)
{
size = backtrace(array,50);
strings = backtrace_symbols(array,size);
for (i=0;i < size;i++)
   printf("%s\n",strings[i]);
free(strings);
printf("sig sev caught\n");
exit(0);
}

void toto()
{
char *x;
*x = 8; // writing uninitialized pointer
}

int main()
{
signal(SIGSEGV,handler);

toto();

} 
```

# ios - iOS 设备未收到 Urban Airship iOS 推送通知

> ID：14761755
> 
> 赞同：0
> 
> 时间：2013-02-07T21:55:29.657
> 
> 标签：ios, push-notification, apple-push-notifications, urbanairship.com

我试图设置 Urban Airship 以向我的 iOS 应用程序发送推送通知，但没有成功。

以下是我拥有的东西：

*   启用推送通知的开发人员配置文件
*   在设备上推送通知证书并上传到 Urban Airship
*   任何地方都没有错误 - UA 的错误控制台是空的，我检查了我的设备令牌是否处于活动状态

这是我的 AppDelegate.m 文件中的一些片段

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{    
//Push notifications
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeAlert)];

    //Init Airship launch options
    NSMutableDictionary *takeOffOptions = [[NSMutableDictionary alloc] init];
    [takeOffOptions setValue:launchOptions forKey:UAirshipTakeOffOptionsLaunchOptionsKey];

    // Create Airship singleton that's used to talk to Urban Airship servers.
    // Please populate AirshipConfig.plist with your info from http://go.urbanairship.com
    [UAirship takeOff:takeOffOptions];

    // Register for notifications
    [[UAPush shared] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge |
                                          UIRemoteNotificationTypeSound |
                                          UIRemoteNotificationTypeAlert)];

    [UAirship setLogging:YES];
}

- (void)application:(UIApplication *)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)devToken {
    // Updates the device token and registers the token with UA
    NSLog(@"APN device token: %@", devToken);
    [[UAPush shared] registerDeviceToken:devToken];
} 
```

当我通过 UA 的“测试推送通知”选项卡发送通知或通过终端发送 CURL 命令时，没有调用以下方法

```
- (void)application:(UIApplication *)app didFailToRegisterForRemoteNotificationsWithError:(NSError *)err {
    NSLog(@"Error in registration. Error: %@", err.description);
}

- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    NSLog(@"Received push notification with userInfo:%@", userInfo);
}
- (void)handleNotification:(NSDictionary *)notification applicationState:(UIApplicationState)state
{
    NSLog(@"Received push notification with notification:%@", notification);
} 
```

我尝试在关闭应用程序的情况下发送测试推送通知，iOS 也没有做任何事情。我在 iphone 上检查了设置并转到我的应用程序，它显示为徽章和横幅启用了推送。我在 iPhone 5 上运行 iOS 6.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T23:56:13.113

我想通了 - 我一定错过了文档中的这一行：

```
[[UAPush shared] handleNotification:[launchOptions valueForKey:UIApplicationLaunchOptionsRemoteNotificationKey]
                   applicationState:application.applicationState]; 
```

# c++ - NANT 修改 C++ 项目的程序集版本

> ID：14761757
> 
> 赞同：1
> 
> 时间：2013-02-07T21:55:36.803
> 
> 标签：c++, visual-c++, ant, nant

下面是我的 NANT 脚本片段，它从我的一个 C# 项目中读取 Assemblyversion 并自动增加它。

```
<target name="CheckAssembly">
    <echo message="Check Assembly File version..." />
    <property name="file.contents" value="" />
    <loadfile property="file.contents" file="${properties.path}\AssemblyInfo.cs" />
    <regex pattern="(AssemblyVersionAttribute|AssemblyVersion)\(\x22(?'major'\d+).(?'minor'\d+).(?'build'\d+).(?'revision'\d+)\x22\)" input="${file.contents}" />
    <property name="application.AssemblyInfo.dir" value="${properties.path}" />
    <property name="AssemblyVersion" value="${major}.${minor}.${build}.${int::parse(revision)}" />

    <if test="${int::parse(updates.count)&gt;1}">
        <property name="AssemblyVersion" value="${major}.${minor}.${build}.${int::parse(revision) +1}" />
        <call target="UpdateAssembly" />
    </if>

</target>

<target name="UpdateAssembly" description="generates the version number">
    <echo message="Setting the build version to ${AssemblyVersion}..." />
    <attrib file="${application.AssemblyInfo.dir}\AssemblyInfo.cs" readonly="false" />
    <asminfo output="${application.AssemblyInfo.dir}\AssemblyInfo.cs" language="CSharp">
        <imports>
            <import namespace="System.Runtime.CompilerServices" />
            <import namespace="System.Reflection" />
            <import namespace="System.Runtime.InteropServices" />
        </imports>
        <attributes>
            <attribute type="AssemblyTitleAttribute" value="${appName}" />
            <attribute type="AssemblyDescriptionAttribute" value="" />
            <attribute type="AssemblyConfigurationAttribute" value="" />
            <attribute type="AssemblyCompanyAttribute" value="Company Name" />
            <attribute type="AssemblyProductAttribute" value="" />
            <attribute type="AssemblyCopyrightAttribute" value="Copyright ©  2010-2013" />
            <attribute type="AssemblyTrademarkAttribute" value="" />
            <attribute type="AssemblyCultureAttribute" value="" />
            <attribute type="AssemblyVersionAttribute" value="${AssemblyVersion}" />
            <attribute type="AssemblyFileVersionAttribute" value="${AssemblyVersion}" />
        </attributes>
    </asminfo>
    <attrib file="${application.AssemblyInfo.dir}\AssemblyInfo.cs" readonly="true" />
</target> 
```

现在我正面临下一个挑战。我有一个 C++ 项目，使用 NANT 可以很好地编译，但我想更新与您在上面看到的类似的程序集版本。在这个 C++ 项目中，我的 ProductVersion 保存在资源文件 (.rc) 中。

你知道 NANT 是否有任何有助于改变这一点的功能/标签？如果没有，您对我应该如何处理这个有任何想法吗？我已经考虑过读取文件内容并使用正则表达式来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T04:30:12.103

我知道这是一个非常古老的问题，但我今天一直在解决同样的问题。我使用 ANT 解决了这个问题（请原谅我的正则表达式：/）。我假设 Nant 将以与普通 ANT 非常相似的方式运行。

```
<echo message="Modifying VersionResource.rc" />
<replaceregexp byline="true" flags="g" encoding="UTF-16LE" >
    <regexp pattern="[0-9]+,[0-9]+,[0-9]+,[0-9]+" />
    <substitution expression="${adapter_resource}" />
    <fileset dir="${my.dir}">
        <include name="VersionResource.rc" />
  </fileset>
</replaceregexp>

<echo message="Modifying VersionResource.rc again..." />
<replaceregexp byline="true" flags="g" encoding="UTF-16LE" >
    <regexp pattern="&quot;(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}&quot;" />
    <substitution expression="&quot;${adapter_versions}&quot;" />
    <fileset dir="${my.dir}">
        <include name="VersionResource.rc" />
    </fileset>
</replaceregexp> 
```

${adapter_versions} 在调用构建过程时在命令行中设置。

# javascript - 为什么 FireFox 并不总是选择正确的事件目标？（具体的路径元素）

> ID：14761758
> 
> 赞同：3
> 
> 时间：2013-02-07T21:55:37.323
> 
> 标签：javascript, jquery, html, firefox

我不确定这是不是 Firefox 中的错误，但我遇到的问题仅存在于 Firefox 中。

我有下面的html代码：

```
<div id="Div1"></div>   
<div id="mydiv">
   <div style="height: 590px;">
      <svg id="mySvg" style="height: 100%; width: 100%; z-index: 8000;">
         <g>
            <path stroke="black" d="M50,123L1400,323" style="stroke-width: 10; opacity: 1;">  </path>
         </g>
      </svg>
   </div>
</div> 
```

使用 javascript / jquery，我正在尝试处理 mousemove 事件：

```
$("#mydiv").mousemove(function (x) {
  Div1.innerHTML = x.target.tagName;
}); 
```

我遇到的问题是，即使鼠标位于该行的顶部，它也不总是将路径显示为事件目标 tagName。

请注意：

1.  当路径的角度为（0度）时，这似乎不是问题
2.  当线路很短时，这似乎不是问题
3.  如前所述，这在 IE9 和 Chrome v24 中都不是问题。我正在使用 FireFox v18 进行测试。

我创建了[jsFiddle](http://jsfiddle.net/CxEYV/3/)以供审查。

如果可能的话，如果我做错了什么，或者是否有解决此问题的方法，请告诉我。

谢谢大家的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T09:13:32.313

我相信这之前已经发布过，它与 Firefox 中的一个错误有关。

[https://bugzilla.mozilla.org/show_bug.cgi?id=676001](https://bugzilla.mozilla.org/show_bug.cgi?id=676001)

# mysql - SQL Query 以根据正在加入的主表的 PK 填充表

> ID：14761763
> 
> 赞同：0
> 
> 时间：2013-02-07T21:55:51.803
> 
> 标签：mysql, database, database-design

这是我的数据库结构（基本关系）： ![数据库结构](../Images/0514c4b320cbfbb2ef494e399336f07b.png)

我正在尝试制定一个单行查询，该查询将填充 clients_ID、Job_id、tech_id 和 Part_id 并**返回所有存在的工作订单**。不多不少。

到目前为止，我一直在努力生成这个查询：

```
SELECT      cli.client_name,    tech.tech_name,  job.Job_Name, w.wo_id,  w.time_started, w.part_id, w.job_id, w.tech_id, w.clients_id, part.Part_name   
 FROM work_orders as w, technicians as tech, clients as cli, job_types as job, parts_list as part
LEFT JOIN technicians as techy ON tech_id = techy.tech_name
LEFT JOIN parts_list  party ON part.part_id = party.Part_Name
LEFT JOIN job_types joby ON job_id = joby.Job_Name
LEFT JOIN clients cliy ON clients_id = cliy.client_name 
```

显然，*一旦所有连接发生，它甚至不会根据它们的引用填充正确的外键值*。

*   [有些值是实际的外键ID，甚至不是对应的值。]

    根据我拥有的表的最大行（以上之一），它只会持续大约 20-30 次。

**我只创建了两个工作订单**，所以理想情况下它应该只返回两个记录、列和具有正确信息的字段。我可能做错了什么？使用 MySQL 的时间不长，但我正在尽可能多地学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:00:02.993

您的加入条件错误。加入 tech_id = tech_id，而不是 tech_id = tech_name。看起来您对所有连接都执行此操作，因此它们都需要修复。

我真的不按照你的问题的文字，所以我的回答完全基于你的查询。

**编辑**

在这里回复你的评论。你说你想“加载”技术名称列。我假设您的意思是您希望技术名称成为您的结果集的一部分。

The SELECT part of the query is what determines the columns that are in the result set. As long as the table where the column lives is referenced in the FROM/JOIN clauses, you can SELECT any column from that table.

将 JOIN 语句视为一种基于另一个表中的值“查找”一个表中的值的方法。这是一个非常简化的定义，但它是开始思考它的好方法。您希望结果集中包含技术名称，因此您在 Technicians 表中查找它，这就是它所在的位置。但是，您希望通过 Work Orders 表中的值来查找它。您在 Work Orders 表中拥有的与 Technicians 表相关联的键（实际上称为*外键*）是 tech_id。您可以使用 tech_id 在 Technicians 表中查找相关行，这样可以在结果集中包含该表中的任何列。

# jquery - CarouFredSel 图片链接

> ID：14761768
> 
> 赞同：3
> 
> 时间：2013-02-07T21:56:16.277
> 
> 标签：jquery, image, hyperlink, caroufredsel

我正在将 CarouFredSel 用于我正在设计的网站，但是我遇到了一个问题……在我尝试将图像链接到 url 之前，一切都按预期工作。

`script`看起来像：

```
$(function() {
    /* Homepage */
    $("#slide-image > div").carouFredSel({
        auto: false,
        items: {
            visible: 2
        },
        next: "#next",
        prev: "#prev",
        scroll: {
            easing: "quadratic",
            items: 1
        },
        width: "100%"
    });
}); 
```

`code`看起来像：

```
<div id="slide-image">
    <div>
        <a href="www.example.com"><img src="images/example.jpg"></a>
    </div>
</div> 
```

任何帮助表示赞赏:)

谢谢，
乔什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:03:14.667

我想到了！！

当我环顾四周时，我发现在 CarouFredSel 网站上，他们有一些提示和技巧（[http://caroufredsel.dev7studios.com/support/tips-and-tricks.php](http://caroufredsel.dev7studios.com/support/tips-and-tricks.php)），并且在页面中间他们记录了“使用向左浮动的块元素“......在`HTML`他们使用的代码被链接的正下方......所以我只是复制了它并且presto！

所以，现在我的`script`样子：

```
$(function() {
    /* Homepage */
    $("#slide-image").carouFredSel({
        auto: false,
        items: {
            visible: 2
        },
        next: "#next",
        prev: "#prev",
        scroll: {
            easing: "quadratic",
            items: 1
        },
        width: "100%"
    });
}); 
```

`code`看起来像：

```
<div class="slide-image">
    <div id="slide-image">
        <a href="www.example.com"><img src="images/example.jpg"></a>
    </div>
    <div class="clear">
        <!-- -->
    </div>
</div> 
```

改变的主要事情是：

*   我给了内部 div 一个 ID，这导致我的主要功能也发生了变化
*   我正在清除浮动，这有点难以看到，因为我没有发布我的 css（尽管它与以下示例相同：[http](http://caroufredsel.dev7studios.com/support/tips-and-tricks.php) ://caroufredsel.dev7studios.com/support/tips-and-tricks.php )

除了代码与我最初发布的完全相同......很高兴这是一个简单的修复 - 希望这对某人有所帮助！

谢谢，
乔什

# android - Android（仅限果冻豆）- MapActivity 覆盖导致内存不足错误

> ID：14761769
> 
> 赞同：2
> 
> 时间：2013-02-07T21:56:16.833
> 
> 标签：android, memory, overlay, android-4.2-jelly-bean

* * *

更新（2.8.2013）：感谢 Geobits 的位图课程！我不认为 PNG 是一种压缩格式（那些 DOH 时刻之一）：D

最后，虽然旧版本的 Android 和 Jelly Bean 之间仍然存在问题...这是我的 ICS 手机上的堆屏幕截图和 JellyBean 模拟器上的屏幕截图...ICS = <6MB，JB = >22MB对于完全相同的应用程序，完全相同的图像！

（ICS 使用 <6MB 堆）：
[https ://docs.google.com/file/d/0B7GW5mJ5fr3XSTFYWU54VjdUTEk/edit?usp=sharing](https://docs.google.com/file/d/0B7GW5mJ5fr3XSTFYWU54VjdUTEk/edit?usp=sharing)

（JB 相同的应用程序 - 下面的一个 - 使用 >22MB）：
[https ://docs.google.com/file/d/0B7GW5mJ5fr3XUGlCdHNMUGJJVFE/edit?usp=sharing](https://docs.google.com/file/d/0B7GW5mJ5fr3XUGlCdHNMUGJJVFE/edit?usp=sharing)

所以问题仍然存在……旧版本在做什么来防止 JB 没有的 OOM 条件？以及如何在不降低分辨率的情况下在 Jelly Bean 中覆盖这一点（我必须深入到非常像素化的叠加层以避免 JB 中的 OOM）？

* * *

我遇到了 MapActivity 和大型位图覆盖的 Jelly Bean 特定问题。当查看第一次运行 Jelly Bean 时的堆占用超过 22MB 时，与占用约 6MB 的 ICS 相比。在它增长后的每次运行中，根据你的位图的大小，它会给你一个 OOM 错误或者只是有一个超大的堆。

应用程序描述（此示例应用程序的作用）

下面这不是我的原始应用程序...我制作了一个功能齐全的应用程序，下面的代码可以复制问题并保持代码简单；这是一个具有父活动 (Start.java) 和子活动 (MainActivity.java) 的应用程序。Start.java 只是一个带有按钮的屏幕，它将加载 MainActivity.java（我在时间上不遗余力；）。

MainActivity.java 将加载地图并有一个大的覆盖。我的叠加层是来自 GoogleMaps 的纽约部分剪辑，我在 GIMP 中添加了一个过滤器，因此您可以看出它不同。然后，此叠加层由“topLeft”GeoPoint 和“bottomRight”GeoPoint “固定”到地图，因此当您在地图上缩放时它会缩放。

位图大约 7MB 大......所以看起来 JellyBean 将它加载了 3 倍（堆大约为 22MB）。看着堆，我看到它从 8MB 开始，然后迅速移动到 16MB 和 22MB。它也位于“res/drawable-nodpi”文件夹中。

我在以前的版本中看到了这个问题，“修复”是将位图放在“drawable-nodpi”中，这就是它存在的原因，但是对于 JellyBean，这种多重加载又回来了（旧问题链接：[https://stackoverflow. com/questions/13906037/android-mapactivity-overlay-bitmap-not-relasing-memory-when-finish-executes](https://stackoverflow.com/questions/13906037/android-mapactivity-overlay-bitmap-not-relasing-memory-when-finish-executes)）

我尝试过的事情 1) 尝试将位图放在所有可绘制文件夹中（-ldpi、-mdpi、-hdpi、-xhdpi） 2) 我尝试过使覆盖更小......它确实远离 OOM 崩溃但是仍然加载 3 倍……由于我的其他更复杂的应用程序有其他更小的图像，这不是解决方案 3）我尝试创建一个“res/drawable”文件夹并将位图放入其中，它在第一次加载时崩溃MainActivity.java - 似乎加载超过 3x) 4) 在 onDestroy() 方法中添加了 bitmap.recycle() - 这确实使此示例应用程序免受 OOM 错误但如上所述，我需要占用 3x MB修复最多。

项目名称 - TestMapOverlayJB 完整代码 ZIP 存档（减去我的 MAP 密钥 - 您需要添加自己的） [https://docs.google.com/file/d/0B7GW5mJ5fr3XY3h1MmFuREpoaDA/edit?usp=sharing](https://docs.google.com/file/d/0B7GW5mJ5fr3XY3h1MmFuREpoaDA/edit?usp=sharing)

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.testmapoverlayjb"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-permission android:name="android.permission.INTERNET"/>

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library android:name="com.google.android.maps"/>
        <activity
            android:name=".Start"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".MainActivity" />
        <activity android:name=".MyBaseImageOverlay" />
    </application>
 </manifest> 
```

启动.java：

```
package com.example.testmapoverlayjb;
import android.app.Activity;
import android.content.ActivityNotFoundException;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class Start  extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.start);

    Button buttonMainMenuSettings = (Button) findViewById(R.id.buttonNY);
    buttonMainMenuSettings.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
         try {
                 Intent myIntent = new Intent(Start.this, MainActivity.class);
                 startActivity(myIntent);
         }
         catch (ActivityNotFoundException e) {
             Toast.makeText(getBaseContext(), "Activity Not Found", Toast.LENGTH_SHORT).show(); 
         }
    }});
    }
} 
```

MainActivity.java：

```
package com.example.testmapoverlayjb;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import android.os.Bundle;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.view.Menu;

public class MainActivity extends MapActivity {
    Bitmap bitmapMapOverlay;
    MyBaseImageOverlay baseLargeOverlay;
    MapView mapView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);

        GeoPoint topLeft = new GeoPoint((int)40723714, (int)-74029412);
        GeoPoint bottomRight = new GeoPoint((int)40704522, (int)-73976011);
        bitmapMapOverlay = BitmapFactory.decodeResource(getResources(), R.drawable.ny_base1);
        baseLargeOverlay = new MyBaseImageOverlay(topLeft, bottomRight, bitmapMapOverlay);
        mapView.getOverlays().add(baseLargeOverlay);
        MapController mapController = mapView.getController();
    mapController.setZoom(16);
        mapController.setCenter(new GeoPoint((int)40715029,(int)-74001975));
    mapView.setSatellite(true);
    mapView.setStreetView(false);
        mapView.postInvalidate();
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    @Override
    protected void onDestroy() {
        bitmapMapOverlay.recycle();
        baseLargeOverlay = null;
        mapView = null;
        super.onDestroy();
    }

} 
```

MyBaseImageOverlay.java：

```
package com.example.testmapoverlayjb;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Point;
import android.graphics.Rect;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;

public class MyBaseImageOverlay extends Overlay {
    private Bitmap baseBitmap;
    GeoPoint topLeft;
    GeoPoint bottomRight;

    public MyBaseImageOverlay(GeoPoint topL, GeoPoint bottomR, Bitmap bmp) {
        baseBitmap = bmp;
        topLeft = topL;
        bottomRight = bottomR;
    }

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    if(shadow) {
           return;
        }
        super.draw(canvas, mapView, shadow);
        // convert bitmap's bounding box into pixels 
        Point top_left = new Point(); 
        mapView.getProjection().toPixels(topLeft, top_left); 
        Point bottom_right = new Point(); 
        mapView.getProjection().toPixels(bottomRight, bottom_right); 
        // Prepare two rectangles (pixels) 
        Rect src = new Rect( 0,0,baseBitmap.getWidth() - 1, baseBitmap.getHeight() - 1 ); 
        Rect dst = new Rect( top_left.x, top_left.y, bottom_right.x,bottom_right.y ); 

        // draw bitmap 
        canvas.drawBitmap(baseBitmap, src, dst, null); 
    }
} 
```

开始.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/buttonNY"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="20dp"
    android:text="NY" />

</RelativeLayout> 
```

活动主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="YOUR_MAP_KEY_HERE"
/> 
```

叠加位图： [https ://docs.google.com/file/d/0B7GW5mJ5fr3XZFdWYnVBUW45bWM/edit?usp=sharing](https://docs.google.com/file/d/0B7GW5mJ5fr3XZFdWYnVBUW45bWM/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:15:55.633

问题是，你的位图不是~7MB 大，你的 PNG 有多大。它是压缩的（除非您使用 16bpp 颜色空间）。您的图像是 2800x1324，因此假设是普通的 ARGB_8888 格式，它应该占用大约 15MB 未压缩。7 用于加载 PNG，加上 15 用于未压缩的位图... 22。因此，在将图像解压缩到内存期间，它将使用所有这些。

您提到了您尝试的几件事，它们消除了 OOM 错误（较小的位图、回收），但没有解决“3x”问题。您可以尝试使用`Bitmap.Config.RGB_565`加载图像。这应该以牺牲质量为代价来节省一些内存（总共应该只使用大约 15MB），但除此之外，除了你尝试过的之外，你不能做很多事情。

# android - 如何检测 Android 服务/后台应用程序中的用户活动/不活动？

> ID：14761771
> 
> 赞同：1
> 
> 时间：2013-02-07T21:56:22.090
> 
> 标签：android, android-service

如何从相同或其他应用程序检测 android 服务/后台应用程序中的用户活动/不活动？

我想知道用户停止触摸屏并且不忙于显示通知弹出窗口的其他活动。不确定除了使用 AccessibilityService 之外没有其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:59:48.400

一种方法是通过阅读 Android 日志知道这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:06:10.120

在活动和服务中定义接口。在活动集的 oncreate 中对服务方法中的活动的引用。现在您拥有整个服务生命周期的活动参考。

另一种方法是应用程序类，相同的应用程序类由活动和服务共享，因此您可以使用应用程序类将这两者相互关联。

如果您想从应用程序中查看，请使用广播接收器，这是唯一的 wau

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T22:06:25.447

使用启动接收器来设置 AlarmManager（当然也检查从主 Activity 开始轮询，以防您的应用程序已安装且系统未启动）并让 AlarmManager 为另一个接收器发送 Intent。

我认为他们在这个问题中回答了它来做你正在寻找的东西： [android: running a background task using AlarmManager](https://stackoverflow.com/questions/3859489/android-running-a-background-task-using-alarmmanager)

# regex - 使用正则表达式为词法分析器标记字符串是个坏主意吗？

> ID：14761776
> 
> 赞同：11
> 
> 时间：2013-02-07T21:56:38.703
> 
> 标签：regex, tokenize, lexer

我不确定我将如何标记词法分析器的来源。目前，我只能考虑使用正则表达式将字符串解析为具有给定规则（标识符、+、- 等符号）的数组。

例如，

```
begin x:=1;y:=2; 
```

然后我想标记单词，变量（在这种情况下为x，y）和每个符号（:,=,;）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T22:02:00.827

使用正则表达式是实现词法分析器的常用方法。如果您不想使用它们，那么无论如何您最终都会自己实现一些正则表达式部分。

虽然在性能方面，如果你自己做会更有效率，但这不是必须的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-07T22:14:15.137

使用正则表达式是生成令牌的传统方式。lex 和 yacc（或 flex 和 bison）是传统的编译器创建对，其中 lex 除了标记符号并将它们传递给 YACC 之外什么都不做

[http://en.wikipedia.org/wiki/Lex_%28software%29](http://en.wikipedia.org/wiki/Lex_%28software%29)

YACC 是一个处理符号的基于堆栈的状态机（下推自动机）。

我认为正则表达式处理是解析任何复杂程度的符号的方法。正如 Oak 所提到的，您最终将编写自己的（可能较差的）正则表达式解析器。唯一的例外是它非常简单，甚至您发布的示例也开始超过“非常简单”。

在 lex 语法中：

```
:=                   return ASSIGN_TOKEN_OR_WHATEVER;
begin                return BEGIN_TOKEN;
[0-9]+               return NUMBER;
[a-zA-Z][a-zA-Z0-9]* return WORD; 
```

字符序列可选地与标记一起传递。

本身就是标记的单个字符[例如“;” ) 未经修改即可通过。它不是唯一的方法，但我发现它工作得很好。

看看： http: [//www.faqs.org/docs/Linux-HOWTO/Lex-YACC-HOWTO.html](http://www.faqs.org/docs/Linux-HOWTO/Lex-YACC-HOWTO.html)

# node.js - 在查询字符串中将 pdf url 传递给 pdf.js

> ID：14761777
> 
> 赞同：1
> 
> 时间：2013-02-07T21:56:46.087
> 
> 标签：node.js, pdf.js

我是 node/pdf js 的新手。我只是安装节点并运行 pdf.js。

现在我想知道如何通过在查询字符串中传递 pdf 文件 url 作为参数来使用 pdf js 打开 pdf 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T03:07:09.983

尝试添加`?file=document.pdf`到查看器网址。另请参阅[https://github.com/mozilla/pdf.js/issues/2496](https://github.com/mozilla/pdf.js/issues/2496)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T07:39:46.993

这将需要在以下方面进行一些更改`viewer.js`：

*   移到`parseQueryString: function pdfViewParseQueryString(query)`外面`var PDFView`，所以它是一个独立的功能：`function pdfViewParseQueryString(query)`
*   替换所有出现的`PDFView.parseQueryString(..)`to`pdfViewParseQueryString(..)`
*   更改`var DEFAULT_URL = ''`为`var urlParm = pdfViewParseQueryString(document.location.search.substring(1)); var DEFAULT_URL = urlParm.url;`
*   您现在应该可以使用类似的方式调用查看器`$("actualViewer").src = 'pdfViewer?url=' + encodeURIComponent(pathToFile);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T18:41:46.810

进一步说明，重要的是要知道 file=document.pdf 参数必须位于井号之前：

[http://myserver.com/web/viewer.html?file=test.pdf#page=6&zoom=page-fit,0,540](http://myserver.com/web/viewer.html?file=test.pdf#page=6&zoom=page-fit,0,540)

高温高压

# android - Proguard 不与 Chartboost 合作？

> ID：14761778
> 
> 赞同：2
> 
> 时间：2013-02-07T21:56:48.367
> 
> 标签：android, proguard, chartboost

尝试使用 Chartboost Android SDK 编译项目时出现 proguard 错误：

```
 [proguard] Unexpected error while editing code:
 [proguard]   Class       = [com/chartboost/sdk/Libraries/d]
 [proguard]   Method      = [b(Landroid/content/Context;)Lcom/chartboost/sdk/Libraries/CBOrientation;]
 [proguard]   Exception   = [java.lang.IllegalArgumentException] (Invalid instruction offset [65674] in code with length [236]) 
```

我添加了这些行，`proguard.cfg`但这没有帮助：

```
-libraryjars ./libs/chartboost.jar
-keep class com.chartboost.sdk.**  { *; } 
```

我尝试在 Mac 和 PC 上编译项目，但结果是一样的。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-08T10:16:37.390

更新到他们的 SDK 的 beta 版本后，错误就消失了。

# c++ - QT Creator 配置更改以解决链接错误？

> ID：14761787
> 
> 赞同：2
> 
> 时间：2013-02-07T21:57:22.760
> 
> 标签：c++, visual-studio, qt, linker, qt-creator

构建 QT 应用程序，我有以下形式的链接错误

```
mainwindow.obj : error LNK2019: unresolved external symbol "public: __cdecl GLWidget::GLWidget(class QWidget *)" (??0GLWidget@@QEAA@PEAVQWidget@@@Z) referenced in function "public: __cdecl MainWindow::MainWindow(class QWidget *)" (??0MainWindow@@QEAA@PEAVQWidget@@@Z) 
```

自定义类从哪里`GLWidget`派生`QGLWidget`

我的理论是问题是由旧版本的类引起的，清理代码可以解决问题。

```
15:50:59: Running steps for project qtTest1...
15:50:59: Starting: "C:\Qt\qtcreator-2.6.2\bin\jom.exe" clean
--- lots of lines
15:50:59: The process "C:\Qt\qtcreator-2.6.2\bin\jom.exe" exited normally.
15:50:59: Configuration unchanged, skipping qmake step.
15:50:59: Starting: "C:\Qt\qtcreator-2.6.2\bin\jom.exe" 
C:\Qt\Qtbuild\qtbase\bin\uic.exe ..\qtTest1\mainwindow.ui -o ui_mainwindow.h 
```

不幸的是，我似乎无法清理代码似乎不起作用，我想知道如果我强制 QT 重新配置自身以便不会出现以下行，我的错误是否会得到解决

> 配置不变，跳过 qmake 步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:01:48.383

解决方案是`run qmake`从 Qt Creator 菜单命令。

# reporting-services - 删除 SSRS 报告组中的冗余值

> ID：14761790
> 
> 赞同：1
> 
> 时间：2013-02-07T21:57:38.477
> 
> 标签：reporting-services, grouping, cumulative-sum

我正在使用以下数据集开发 SSRS 报告。“期间”有一个过滤器。它是一个多选过滤器。数据按“帐户”字段分组。我需要显示每个组的总费用（这很容易）。我还需要在同一组级别显示“预算”。问题是预算数据是多余的——见下文。

假设第一组（Account=100 AND Period=201301）`Sum([Budget])`将生成 200，这是不正确的。如果用户从过滤器中仅选择一个期间，我可以使用平均功能。如果他们选择多个值（例如 201301,201302），则平均值将为 (100+100+150+150)/4=125，这是错误的，因为它必须是 100+150=250。我不想在返回的数据集中的所有行中取平均值。

```
ID Account Period  Expense Budget
1  100     201301  20      100
2  100     201301  30      100
3  100     201302  10      150
4  100     201302  40      150
5  200     ................... 
```

那么，我该如何编写表达式来实现这一点呢？一个肮脏的解决方法是消除预算列中的冗余值，这样我就可以安全地使用而`Sum([Budget])`不必担心重复。更新后的数据集如下所示：

```
ID Account Period  Expense Budget
1  100     201301  20      100
2  100     201301  30      NULL
3  100     201302  10      150
4  100     201302  40      NULL
5  200     ................... 
```

请对任何一种方法提出建议。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:23:59.860

最优雅的方式是使用[`FIRST()`](http://technet.microsoft.com/en-us/library/ms159861%28v=sql.100%29.aspx)聚合函数。

```
=FIRST(Fields!Budget.Value, "MyAccountGroupName") 
```

在某些情况下这是行不通的。然后，您需要按照您的描述将逻辑移动到您的查询中，或者您可以在报告中使用嵌入式代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T02:59:55.067

I would follow your "dirty workaround" approach. You might possibly be able to achieve the result just inside SSRS with some fancy calculations, but it will be totally obscure.

# javascript - 从 json 调用第一个字符串

> ID：14761795
> 
> 赞同：0
> 
> 时间：2013-02-07T21:57:54.463
> 
> 标签：javascript, html, ajax, json, jsonp

这是“维基搜索”和回调“维基百科”的维基百科链接。

[http://en.wikipedia.org/w/api.php?action=opensearch&search=wiki&callback=wikipedia](http://en.wikipedia.org/w/api.php?action=opensearch&search=wiki&callback=wikipedia)

我使用类似以下的东西

```
function wikipedia(w){
   alert(w)
} 
```

这给了我自动建议，但它给了我整个代码。是否有任何javascript代码可以调用，例如这个json的第一个结果。

我已经尝试了很多类似以下的

```
w[1]
w.wiki[0] 
```

但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T22:02:12.690

建议列表可在 中找到`w[1]`，您需要遍历该列表才能对其进行处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T22:00:17.130

你必须把这个 JSON 字符串解析成一个对象，如果你知道 jQuery，你可以试试[这个](http://api.jquery.com/jQuery.parseJSON/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T22:09:45.200

如果 w[1] 像您说的那样抛出该错误，则您的代码可能还有其他问题。如果你可以使用 jQuery，我强烈推荐它用于 jsonp。这段代码可以满足您的要求：

[http://jsfiddle.net/Hg4KJ/](http://jsfiddle.net/Hg4KJ/)

```
$.ajax({
    url: 'http://en.wikipedia.org/w/api.php?action=opensearch&search=wiki&callback=wikipedia',
    dataType: 'jsonp',
    callback: 'wikipedia'
}).done(function(w){
    var items = w[1];

    for(var i = 0, il = items.length; i < il; i++){
        console.log(items[i]);
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T22:11:19.540

尝试这个

```
function wikipedia(w) {
    "use strict";
    var j = w;//JSON.parse(w); as commented, no need to parse.
    alert(j[1]);
} 
```

如果您仍然不使用 jQuery。

# java - 使用 Jackson 序列化通用接口子类

> ID：14761800
> 
> 赞同：3
> 
> 时间：2013-02-07T21:58:26.067
> 
> 标签：java, json, generics, interface, jackson

我有一个带有几个实现类的通用接口，我需要通过 Json 对其进行序列化和反序列化。我试图开始使用杰克逊，使用完整的数据绑定，但运气不佳。

示例代码说明了问题：

```
import org.codehaus.jackson.map.*;
import org.codehaus.jackson.map.type.TypeFactory;
import org.codehaus.jackson.type.JavaType;

public class Test {

    interface Result<T> {}

    static class Success<T> implements Result<T> {
        T value;
        T getValue() {return value;}
        Success(T value) {this.value = value;}
    }

    public static void main(String[] args) {
        Result<String> result = new Success<String>("test");
        JavaType type = TypeFactory.defaultInstance().constructParametricType(Result.class, String.class);
        ObjectMapper mapper = new ObjectMapper().enableDefaultTyping();
        ObjectWriter writer = mapper.writerWithType(type);
        ObjectReader reader = mapper.reader(type);

        try {
            String json = writer.writeValueAsString(result);
            Result<String> result2 = reader.readValue(json);
            Success<String> success = (Success<String>)result2;
        } catch (Throwable ex) {
            System.out.print(ex);
        }
    }
} 
```

调用 to`writeValueAsString`会导致以下异常：

org.codehaus.jackson.map.JsonMappingException：没有为类 Test$Success 找到序列化程序，也没有发现用于创建 BeanSerializer 的属性（为避免异常，请禁用 SerializationConfig.Feature.FAIL_ON_EMPTY_BEANS）

为什么杰克逊希望我注册一个序列化程序 - 我虽然完全数据绑定的重点是我不需要这样做？

上述方法是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:14:26.680

首先，您需要使用工厂方法注册专用类型以与 Jackson 一起使用`TypeFactory.constructSpecializedType`。然后，专门的类型应该是一个 bean（它应该有一个默认的构造函数、getter 和 setter）来反序列化它。

看看这些测试澄清剂。

```
@Test
public void canSerializeParametricInterface() throws IOException {
    final ObjectMapper mapper = new ObjectMapper().enableDefaultTyping();
    final JavaType baseInterface = TypeFactory.defaultInstance().constructParametricType(Result.class, String.class);
    final JavaType subType = TypeFactory.defaultInstance().constructSpecializedType(baseInterface, Success.class);
    final ObjectWriter writer = mapper.writerWithType(subType);
    final String json = writer.writeValueAsString(Success.create("test"));
    Assert.assertEquals("{\"value\":\"test\"}", json);
}

@Test
public void canDeserializeParametricInterface() throws IOException {
    final ObjectMapper mapper = new ObjectMapper().enableDefaultTyping();
    final JavaType baseInterface = TypeFactory.defaultInstance().constructParametricType(Result.class, String.class);
    final JavaType subType = TypeFactory.defaultInstance().constructSpecializedType(baseInterface, Success.class);
    final ObjectReader reader = mapper.reader(subType);
    final Success<String> success = reader.readValue("{\"value\":\"test\"}");
    Assert.assertEquals("test", success.getValue());
}

public static interface Result<T> {
}

public static class Success<T> implements Result<T> {

    private T value;

    public static <T> Success<T> create(T value) {
        final Success<T> success = new Success<T>();
        success.value = value;
        return success;
    }

    public T getValue() {
        return value;
    }

    public void setValue(T value) {
        this.value = value;
    }
} 
```

# css - 为什么我不能摆脱我的 div 上方的这个空白？

> ID：14761806
> 
> 赞同：0
> 
> 时间：2013-02-07T21:58:57.890
> 
> 标签：css, html, whitespace

我不知道为什么我的 div 上方有大约 20 px 的空白。我正在尝试在页面顶部创建一个水平菜单。这是代码[JSFiddle](http://jsfiddle.net/5u6tA/)，但此处未显示空白。不要嘲笑我，但是我仍在使用 Frontpage，它也没有出现在那里。它只显示在浏览器中——Chrome、FF 和 IE9。

我已经尝试了所有我能想到的方法，包括确保边距全部设置为 0：

```
html, body {
padding:0;
margin:0;
} 
```

但是没有什么能摆脱那个空白！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:08:05.023

只需将以下内容添加到您的样式表中：

```
ul {
  margin: 0;
  padding: 0;
} 
```

或在您的 html、正文声明中添加 ul

```
html, body, ul {
  padding:0;
  margin:0;
} 
```

# regex - 正则表达式中的括号和字符串 (elisp)

> ID：14761808
> 
> 赞同：0
> 
> 时间：2013-02-07T21:59:01.977
> 
> 标签：regex, string, emacs, elisp

我正在创建一个括号/括号完成函数，就像自动配对这样的包。

我将组合存储在`alist`：`("[" . "]")`.

当我尝试将 用作正则`(car (car my-alist))`表达式时， in `(looking-back REGEXP)`，这不起作用，因为它将它视为`"["`，而不是字符串，它是一个不完整的正则表达式：

`looking-back: Invalid regexp: "Unmatched [ or [^"`

我该如何使用它，以便仍然可以将它作为字符串插入`(car (car my-alist))`（所以“[”），同时还可以使用“[”作为正则表达式？

请注意，这确实适用于`"("`，因为这不是特殊的正则表达式字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:01:55.187

您可以使用`(looking-back (regexp-quote (caar my-alist)))`.

`regexp-quote`是 C 源代码中的内置函数。

```
(regexp-quote STRING) 
```

返回与 STRING 完全匹配的正则表达式字符串，仅此而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T22:11:47.230

不直接回答你的问题...

您可能应该考虑查看该[`paren`库](http://git.savannah.gnu.org/cgit/emacs.git/tree/lisp/paren.el?h=trunk)是如何实现的，特别是它是使用[语法 table](http://www.gnu.org/software/emacs/manual/html_node/elisp/Syntax-Class-Table.html)的开/关括号类实现的。

[通过这样做，您将能够利用导航 s 表达式的](http://www.gnu.org/software/emacs/manual/html_node/elisp/List-Motion.html#List-Motion)所有内置函数- 并正确处理嵌套匹配对。

利用这个内置功能将使您的代码更简单，并且能够独立于模式工作（即不仅限于`[`and `]`）。

# web-applications - 尝试使用 EC2 托管持久性 Web 应用程序

> ID：14761813
> 
> 赞同：0
> 
> 时间：2013-02-07T21:59:34.987
> 
> 标签：web-applications, amazon-ec2, web.py

我刚刚创建了一个轻量级 web.py Web 应用程序，我能够成功地将它托管在 Amazon EC2 实例上。我可以使用以下命令很好地提供网页：

```
python bin/app.py & 
```

我在末尾特别添加了 & 符号，以确保该过程在后台继续进行，并且即使我关闭与我的 EC2 实例的 ssh 连接，也会提供 Web 应用程序。但是，我注意到一段时间后，在尝试访问同一页面时，我开始收到一些错误消息。会不会是 EC2 在一段时间后以某种方式从我的实例中夺走了资源，这可能是造成这种情况的原因吗？我在 EC2 上创建持久 Web 服务的方法也很好，还是有更好的方法？

我看到的错误是：

```
Traceback (most recent call last):
  File "/usr/lib/python2.6/site-packages/lpthw.web-1.1-py2.6.egg/web/wsgiserver/__init__.py", line 1245, in communicate
req.respond()
  File "/usr/lib/python2.6/site-packages/lpthw.web-1.1-py2.6.egg/web/wsgiserver/__init__.py", line 775, in respond
self.server.gateway(self).respond()
  File "/usr/lib/python2.6/site-packages/lpthw.web-1.1-py2.6.egg/web/wsgiserver/__init__.py", line 2018, in respond
response = self.req.server.wsgi_app(self.env, self.start_response)
  File "/usr/lib/python2.6/site-packages/lpthw.web-1.1-py2.6.egg/web/httpserver.py", line 268, in __call__
return self.app(environ, xstart_response)
  File "/usr/lib/python2.6/site-packages/lpthw.web-1.1-py2.6.egg/web/httpserver.py", line 236, in __call__
return self.app(environ, start_response)
  File "/usr/lib/python2.6/site-packages/lpthw.web-1.1-py2.6.egg/web/application.py", line 287, in wsgi
start_resp(status, headers)
  File "/usr/lib/python2.6/site-packages/lpthw.web-1.1-py2.6.egg/web/httpserver.py", line 265, in xstart_response
self.log(status, environ)
  File "/usr/lib/python2.6/site-packages/lpthw.web-1.1-py2.6.egg/web/httpserver.py", line 281, in log
print >> outfile, utils.safestr(msg)
IOError: [Errno 5] Input/output error 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:05:57.500

带有 lighttpd 的 FastCGI 是在生产中使用 web.py 的推荐方式。我推荐关于部署的 web.py 文档：[http ://webpy.org/deployment](http://webpy.org/deployment)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-25T02:31:25.407

使用 No Hangup 命令确保关闭 SSH 会话时不会终止后台进程。

```
$ nohup python bin/app.py & 
```

# regex - 带有 awk 或 gawk 的正则表达式

> ID：14761815
> 
> 赞同：4
> 
> 时间：2013-02-07T21:59:35.263
> 
> 标签：regex, awk, gawk

我是 awk/gawk 的初学者。如果我在下面运行，shell 什么也没给我。请帮忙！

```
echo "A=1,B=2,3,C=,D=5,6,E=7,8,9"|awk 'BEGIN{
n = split($0, arr, /,(?=\\w+=)/)
for (x=1; x<n; x++) printf "arr[%d]=%s\n", x, arr[x]
}' 
```

..................................................... ...

我正在尝试解析：

```
A=1,B=2,3,C=,D=5,6,E=7,8,9 
```

预期输出：

```
A=1
B=2,3
C=
D=5,6
E=7,8,9 
```

我敢打赌我的 awk 有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T22:12:50.520

gawk**不**支持前瞻。

如果您希望**gawk**按预期解析它，请尝试以下操作：

```
awk '{n=split(gensub(/,([A-Z])/, " \\1","g" ),arr," ");for(x=1;x<=n;x++)print arr[x]}' 
```

用你的例子测试：

```
kent$  echo "A=1,B=2,3,C=,D=5,6,E=7,8,9"|awk '{n=split(gensub(/,([A-Z])/, " \\1","g" ),arr," ");for(x=1;x<=n;x++)print arr[x]}'
A=1
B=2,3
C=
D=5,6
E=7,8,9 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T22:04:56.043

使用 sed 可能会更容易：

```
$ echo "A=1,B=2,3,C=,D=5,6,E=7,8,9" | sed 's/,\(\w\+=\)/\n\1/g'
A=1
B=2,3
C=
D=5,6
E=7,8,9 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T17:40:06.783

如果你使用 gnu awk，你可以这样做：

```
awk '{printf $0 "\n" substr( RT, 2 )}' RS=,[A-Z] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T22:04:55.083

作为 nhahtdh，在 awk 中没有前瞻...但是您可以为分配使用不同的分隔符。为什么不是“A=1;B=2,3,4;C=5...”？如果您的输入必须具有该格式，请尝试使用 flex...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T23:30:09.910

您还可以使用逗号作为*记录*分隔符：

```
echo "A=1,B=2,3,C=,D=5,6,E=7,8,9" |
awk -v RS=, '{sep=","} /=/ {sep="\n"} NR==1 {sep=""} {printf "%s%s", sep, $0}' 
```

输出

```
A=1
B=2,3
C=
D=5,6
E=7,8,9 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T22:28:17.713

你有两个问题。首先，你不想要一个`BEGIN`子句；您只希望它在每个输入行上运行。其次，您正在尝试使用 AWK 不支持的正则表达式功能。

与其尝试使用拆分字符串的花哨模式，不如使用循环和调用`match()`来解析出您想要的功能。

```
echo "A=1,B=2,3,C=,D=5,6,E=7,8,9"|awk '
{
    line = $0
    for (i = 0;;)
    {
        i = match(line, /([A-Z]+)=([0-9,]*)(,|$)/, arr)
        if (0 == i)
            break
        key = arr[1]
        value = arr[2]
        l = length(key "=" value ",") + 1
        line = substr(line, l)
        printf "DEBUG: key '%s' value '%s'\n", key, value
    }
}' 
```

这打印：

```
DEBUG: key A value 1
DEBUG: key B value 2,3
DEBUG: key C value
DEBUG: key D value 5,6
DEBUG: key E value 7,8,9 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-08T03:04:59.603

使用 awk 的其他方式

```
awk '{print gensub(/,([A-Z]+=)/, "\n\\1","g")}' temp.txt 
```

输出

```
A=1
B=2,3
C=
D=5,6
E=7,8,9 
```

# jquery - 没有“?callback=?”的跨域 $.ajax()

> ID：14761816
> 
> 赞同：0
> 
> 时间：2013-02-07T21:59:35.993
> 
> 标签：jquery, json, jsonp

`$.ajax`没有可能使用`?callback=`吗？

我正在尝试为此网址[http://gbrds.gbif.org/registry/organisation/15b278a8-1356-4f7b-ba32-3c733c3d0aac.json?op=contacts](http://gbrds.gbif.org/registry/organisation/15b278a8-1356-4f7b-ba32-3c733c3d0aac.json?op=contacts)获取 JSON 响应，但是，在请求中，jQuery 添加`?callback=`到 url，因此得到不同的结果。

该请求是针对远程域的：

```
 $.ajax({ url: encodeURI("http://gbrds.gbif.org/registry/organisation/15b278a8-1356-4f7b-ba32-3c733c3d0aac.json?op=contacts"),
     dataType: 'jsonp', 
     type: 'GET',
     success: function(data){...}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:50:26.233

是的，这是可能的 - 但是，您必须有一个支持[CORS](http://caniuse.com/#feat=cors)（[跨域资源共享](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)）的浏览器，并且您需要确保服务器设置为通过发送[访问控制至少允许来自您的域的请求-允许来源](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS#Access-Control-Allow-Origin)HTTP 标头。一旦你拥有了这两个，只需将你的`dataType`from更改`jsonp`为`json`.

# sql - 具有布尔值的条件存储过程

> ID：14761820
> 
> 赞同：2
> 
> 时间：2013-02-07T21:59:47.320
> 
> 标签：sql, stored-procedures, sql-server-2012

我正在尝试组装一个存储过程以返回一组结果。

在我的页面上，我有三个复选框和一个搜索框。

然后在存储过程中，我有这个：

```
CREATE Procedure [dbo].[sp_Search]
   @Bool1 bit = NULL, 
   @Bool2 bit = NULL,
   @Bool3 bit = NULL,
   @SearchTerm nvarchar(30)
As
Begin
   Select 
        [CompanyID],
        [CompanyName],
        [Label],
        [Bool1],[Bool2],[Bool3]     
    From [Contract Companies]
    WHERE (CompanyName LIKE @SearchTerm OR [Label] LIKE @SearchTerm) AND
    if(@Bool1 IS NOT NULL)
    [Bool1] = 'True'
    end 

if(@Bool2 IS NOT NULL)
 AND    [Bool2] = 'True'
    end 

if(@Bool3 IS NOT NULL)
AND [Bool3] = 'True'
    end 
```

类似的事情，这三个布尔值并非始终为真，就在它们的复选框将被选中时。

我怎样才能做到这一点？

提前致谢， Laziale

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:14:41.550

你可以尝试这样的事情：

```
create procedure [dbo].[sp_Search]
   @Bool1 bit = null, 
   @Bool2 bit = null,
   @Bool3 bit = null,
   @SearchTerm nvarchar(30)
as
begin
   select 
        CompanyID,
        CompanyName,
        Label,
        Bool1,
        Bool2,
        Bool3    
    from Contract Companies
    where (CompanyName like @SearchTerm or Label like @SearchTerm)
        and (Bool1 = @Bool1 or @Bool1 is null)
        and (Bool2 = @Bool2 or @Bool2 is null)
        and (Bool3 = @Bool3 or @Bool3 is null)
end 
```

如果存在，这将获得每个布尔值的匹配记录，否则将获得所有记录。

值得注意的是，这[可能不是](http://sqlinthewild.co.za/index.php/2009/03/19/catch-all-queries/)动态检查值的最佳执行方法，但它们在这里是位（[通常没有索引](https://dba.stackexchange.com/questions/12888/should-i-index-a-bit-field-in-sql-server)），我认为它非常适合。那篇文章中讨论了替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:31:57.107

带有[**CASE**](http://msdn.microsoft.com/en-us/library/ms181765%28v=sql.105%29.aspx)表达式的选项

```
CREATE Procedure [dbo].[sp_Search]
   @Bool1 bit = NULL, 
   @Bool2 bit = NULL,
   @Bool3 bit = NULL,
   @SearchTerm nvarchar(30)
As
Begin
   Select 
        [CompanyID],
        [CompanyName],
        [Label],
        [Bool1],[Bool2],[Bool3]     
    From [Contract Companies]
    WHERE (CompanyName LIKE @SearchTerm OR [Label] LIKE @SearchTerm) AND
          [Bool1] = CASE WHEN @Bool1 IS NOT NULL THEN 'True' ELSE [Bool1] END AND
          [Bool2] = CASE WHEN @Bool2 IS NOT NULL THEN 'True' ELSE [Bool2] END AND
          [Bool3] = CASE WHEN @Bool3 IS NOT NULL THEN 'True' ELSE [Bool3] END 
```

# knockout.js - 如何：redactor.js Knockout.js 活页夹

> ID：14761822
> 
> 赞同：4
> 
> 时间：2013-02-07T21:59:53.523
> 
> 标签：knockout.js, redactor

我正在使用这个很棒的编辑器，但我不知道如何将内容绑定到淘汰赛：

[http://imperavi.com/redactor/](http://imperavi.com/redactor/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-18T00:23:14.620

这是一个完成这项工作的双向绑定处理程序。与此类处理程序一样，该`update`函数将更改从 VM 传递到 UI 元素（Redactor 元素），`init`并将更改从 Redactor 传递回 VM。

当我发布此内容时，它是为 Redactor 9 发布的，我现在已经为 Redactor 10 更新了它。

```
ko.bindingHandlers.redactor = {

    init: function(element, valueAccessor) {

        var value = valueAccessor();

        // We only want Redactor to notify our value of changes if the value
        // is an observable (rather than a string, say).

        if (ko.isObservable(value)) {
            $(element).redactor({
                changeCallback: value
            });
        }

    },

    update: function(element, valueAccessor) {

        // New value, note that Redactor expects the argument passed to 'set'
        // to have toString method, which is why we disjoin with ''.

        var value = ko.utils.unwrapObservable(valueAccessor()) || '';

        // We only call 'set' if the content has changed, as we only need to
        // to do so then, and 'set' also resets the cursor position, which
        // we don't want happening all the time.

        // This code would work with Redactor 9, but no longer works with Redactor 10
        //if (value !== $(element).redactor('get')) {
        //    $(element).redactor('set', value);
        //}

        // The API method has become 'code.get', and it behaves a bit differently: it
        // returns formatted HTML, i.e. with whitespace and EOLs.  That means that we
        // would update the Redactor content every time the observable changed, which
        // was bad.  So instead we can use this:
        if (value !== $(element).redactor('core.getTextarea').val()) {
            $(element).redactor('code.set', value );
        }
   }

} 
```

如果要使用 Redactor 编辑的内容的 KO observable 是，`content`那么您可以执行以下操作：

```
<textarea data-bind="redactor: content"></textarea> 
```

要使上述内容与 Redactor 10 一起使用，您必须进行一些更改。首先，您必须使用“code.set”和“code.get”，而不是简单的“set”和“get”来与 HTML 交互。但是如果你只这样做，你会发现'code.get'返回的HTML

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-21T11:16:45.840

我不知道它是否正确，但这段代码对我有用：

创建新的绑定处理程序：

```
 ko.bindingHandlers.imperavi =
    {
            init: function(element, valueAccessor, allBindings)
            {
                var startValue = allBindings().value();
                var $el = $(element);
                $el.val(startValue).change();
                $el.redactor({
                    changeCallback: function(html)
                    {
                        $el.val(html).change();
                    }
                });
            }
    }; 
```

在 HTML 中：

```
<textarea data-bind="value: Text, imperavi: true"></textarea> 
```

视图模型：

```
var VM = function()
{
    this.Text = ko.observable('<p>Hello world</p>');
};

var vm = new VM();
ko.applyBindings(vm); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-07T18:37:54.947

我已经更新了 dvijaz 的 Redactor 10 版本以支持新的 Redactor 2 版本（感谢 dvijaz！）：

```
ko.bindingHandlers.redactor = {

init: function(element, valueAccessor) {

    var value = valueAccessor();

    // We only want Redactor to notify our value of changes if the value
    // is an observable (rather than a string, say).

    if (ko.isObservable(value)) {
        $(element).redactor({ callbacks: { change: value } });
    }

},

update: function(element, valueAccessor) {

    // New value, note that Redactor expects the argument passed to 'set'
    // to have toString method, which is why we disjoin with ''.

    var value = ko.utils.unwrapObservable(valueAccessor()) || '';

    // We only call 'set' if the content has changed, as we only need to
    // to do so then, and 'set' also resets the cursor position, which
    // we don't want happening all the time.

    // This code would work with Redactor 9, but no longer works with Redactor 10
    //if (value !== $(element).redactor('get')) {
    //    $(element).redactor('set', value);
    //}

    // The API method has become 'code.get', and it behaves a bit differently: it
    // returns formatted HTML, i.e. with whitespace and EOLs.  That means that we
    // would update the Redactor content every time the observable changed, which
    // was bad.  So instead we can use this:
    if (value !== $(element).redactor('core.textarea').val()) {
        $(element).redactor('code.set', value);
    } 
```

} }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-29T18:48:53.420

我喜欢我***应该***能够相互独立地使用 knockoutjs 和 redactorjs 的想法。当 redactorjs 更新 textarea 时，knockoutjs 应该接管并通过它的绑定更新模型。

我发现当 textarea 更改时 redactorjs 没有传播更改事件。为了解决这个问题，我手动添加了它：

```
$('textarea').each(function() {
  var textareaEl = $(this);
  textareaEl.redactor({
    blurCallback: function() {
      textareaEl.change();
    }
  });
});
```

~~这里还有改进的余地，因为这似乎在每个关键事件上都会触发 changeCallback。~~ 但是这个解决方案有效并且不会使 redactorjs 成为您的 knockoutjs 应用程序中的依赖项（或在 redactor 版本更改时中断）。

**编辑：**我在 redactorjs 的源代码中发现了一个未记录的 blurCallback。替换了似乎在 keyUp 上触发的 changeCallback 的使用。

# sql-server - ServiceStack Ormlite 和 RowVersion 支持

> ID：14761830
> 
> 赞同：3
> 
> 时间：2013-02-07T22:00:18.390
> 
> 标签：sql-server, servicestack, ormlite-servicestack, rowversion

在更新期间支持 sql server rowversion 的最简单方法是什么？

我试过这个：

```
db.UpdateOnly(u, f => new { f.Name, f.Description, f.Modified, f.ModifiedBy }, f => f.Version == u.Version && f.Id == u.Id); 
```

但这失败得很惨，因为它将版本比较为`Varchar(8000)`, go figure。

不完全相同，但仍然是 ServiceStack 和 OrmLite 的问题：

急切加载相关实体描述的最佳方式是什么？我已经[看到了，](https://stackoverflow.com/questions/8616516/servicestack-ormlite-how-to-include-field-from-foreign-key-lookup)但注意到`Join`正在签入变更集？这导致 POCO 类现在对每个外键都有额外的“忽略”描述。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T17:42:12.940

由于 RowVersion 是一个`byte[]`字段，它需要对更新/插入的参数化支持，这些支持[已添加到 v3.9.37 中的 ServiceStack.OrmLite 中](https://github.com/ServiceStack/ServiceStack.OrmLite/#new-parameterized-apis)。

该`Join`支持是我们计划添加到 OrmLite 的新表达式构建器的一部分，它还没有准备好。对于即时加载，您可以使用自定义 SQL，或者根据您的查询，您可以[使用 Linq2Objects 将结果集加入内存中](https://stackoverflow.com/a/14504260/85785)。

# symfony-2.1 - 如何强制教条从数据库中重新加载数据？

> ID：14761833
> 
> 赞同：46
> 
> 时间：2013-02-07T22:00:26.420
> 
> 标签：symfony-2.1, doctrine-odm

我在 symfony2.1 安装中使用了学说/mongodb 1.0.0-BETA1。

所以我试图强制我的存储库从我的数据库中调用数据，而不是使用它缓存的对象。

```
$audit = $dm->getRepository("WGenSimschoolsBundle:Audit")->findOneById("xxxx");

.... do something somewhere to change the object .... 
```

此时如果我打电话

```
$audit = $dm->getRepository("WGenSimschoolsBundle:Audit")->findOneById("xxxx"); 
```

审计数据没有改变。它仍然具有最初获取的对象。如果我尝试

```
$dm->refresh($audit) 
```

我得到同样的东西。无论如何，我是否可以返回数据库获取价值？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-04-29T09:34:15.393

您是否刷新了对`$audit`对象的更改？

```
$audit = $dm->getRepository("WGenSimschoolsBundle:Audit")->findOneById("xxxx");
//do something somewhere to change the object
$dm->flush(); 
```

* * *

每次您执行`findBy(...)`或`findOneBy(...)`实际从数据库中获取一个新文档时。（你应该在 Symfony 分析器中看到查询）

使用 find() 代替，它将从他的内部代理缓存中获取文档。在您调用该`$dm->clear()`方法之前，文档将保留在代理缓存中。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-03-28T17:24:13.750

这对我有用：

```
$doc = $this->documentManager->getRepository('MyBundle:MyDoc')->find($id);

/* ... in the meanwhile another external process is doing some changes to the object ...*/
$doc = $this->documentManager->getRepository('MyBundle:MyDoc')->find($id); // Perhaps this is not useful
$this->documentManager->refresh($doc); 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-04-17T10:04:11.963

添加到以前的答案中，我正在搜索如何刷新数据库`Entity`，而不是 a，`Document`但解决方案很接近。我将它发布在这里，以供其他人在此页面上遇到同样的问题。

在我的一项功能测试中，我使用了两次相同的查询：

```
$em = $kernel->getContainer()->get('doctrine.orm.entity_manager');
$user = $em->getRepository('AcmeUserBundle:User')->findOneBy(array('email' => 'james.bond@secure.gov.co.uk'));
echo "Old hash: ".$user->getPassword() . "\n";
// result: 8bb6118f8fd6935ad0876a3be34a717d32708ffd 
```

然后测试会经历一个更改密码的过程。然后我重新查询用户以比较密码哈希是否已通过*相同*的查询更改：

```
$user = $em->getRepository('AcmeUserBundle:User')->findOneBy(array('email' => 'james.bond@secure.gov.co.uk'));
echo "New hash: ".$user->getPassword() . "\n";
// result: 8bb6118f8fd6935ad0876a3be34a717d32708ffd # Same ! 
```

问题是，即使被测试的控制器更新了哈希，实体管理器也将实体放在**缓存**中。

因此，解决方案是在两个查询之间添加以下内容：

```
$em->clear(); 
```

现在，密码哈希在查询之间发生了变化！耶 ！

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-03-19T21:58:42.947

您可以使用方法 refresh ：

```
$post; # modified
$entityManager->refresh();
$post; # reset from db 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-31T09:53:58.233

在处理相关实体时，如果修改相关实体并通过父对象保存，则必须添加选项 cascade={"detach"} 才能使分离生效。

例如，假设您要更新 Person 对象上的 Friends 列表，方法是向列表中添加新对象、删除其中一些对象并更新一些现有对象。你会有

```
$em->flush();
$em->detach($entity); 
```

并在您的 Person 实体中确保更新您的朋友关系：

```
@ORM\OneToMany(targetEntity="Somewhere\PeopleBundle\Entity\Person", mappedBy="person", cascade={"detach"})
private $friends; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-10T13:37:23.893

尝试类似的东西

```
$dm->getUnitOfWork()->clear('WGenSimschoolsBundle:Audit'); 
```

# c# - 如何获取从特定类型继承的类的所有方法

> ID：14761837
> 
> 赞同：2
> 
> 时间：2013-02-07T22:00:34.273
> 
> 标签：c#

我有一大堆从基类“端口”继承的类

有谁知道如何获取从“端口”继承的所有类的所有公共方法

我知道我必须调用 GetMethods 方法，而您将其称为类型。

我想如果我能以某种方式获得从 Port 继承的所有类的列表，我可以这样做：

（从端口继承的所有类型）.SelectMany(x => x.GetMethods());

有人可以在这里帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:05:38.047

你可以使用这样的东西：

```
Assembly assembly = [get your assembly instance];
Type t = typeof(Port)
var methods = assembly.GetTypes()
                 .Where(p => t.IsAssignableFrom(p))
                 .SelectMany(x => x.GetMethods()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T22:05:38.650

好的，现在我们知道他们在同一个程序集中，我怀疑你想要：

```
var methods = from type in typeof(Port).Assembly.GetTypes()
              where typeof(Port).IsAssignableFrom(type)
              from method in type.GetMethods()
              select method; 
```

又名

```
var methods = typeof(Port).Assembly.GetTypes()
                          .Where(type => typeof(Port).IsAssignableFrom(type))
                          .SelectMany(type => type.GetMethods()); 
```

请注意，这*会将*其自身包含`Port`在要获取的类型列表中。

您可能希望使用它`BindingFlags.DeclaredOnly`来避免一遍又一遍地使用相同的方法 - 这取决于您之后尝试对它们做什么。

# javascript - 从 Web 应用程序访问服务器的文件系统

> ID：14761838
> 
> 赞同：-4
> 
> 时间：2013-02-07T22:00:40.003
> 
> 标签：javascript, python, web-applications, web

我应该使用什么作为后端：Python 或 Server-Side-Javascript？我认为 Node.js 允许用户访问文件系统，但我不知道这是否是最佳选择。

编辑：我只是想做一种使用网络技术的文件管理器，同时学习，因为我对网络编程一无所知。如果我使用 Python，我将学习 Django，如果我使用 Node.js，我将学习 Node，但我不知道哪个最适合该任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T22:05:27.587

这里的正确答案是，*无论您最熟悉什么语言*。所有服务器端语言选择都有一些用于访问本地文件系统的 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T22:15:50.663

我不确定您的问题是否有足够的信息来提供有用的答案。最终的选择将取决于多种因素，例如：

*   项目的目标是什么。
*   项目的限制是什么。
*   谁将最终维护此代码。

另请注意，如果您只想从文件系统的某个子集提供文件，那么使用 Web 服务器可能会更好，而不是基本上自己滚动。该代码的作者可能已经处理了您可能忽略的任何令人讨厌的安全问题和极端情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T22:04:53.147

Python 和 Node.js 都有 API 来访问文件系统。他们可以执行诸如读取文件、遍历目录等操作...对于 python，您可以查看这里[http://docs.python.org/2/library/filesys.html](http://docs.python.org/2/library/filesys.html)和 nodejs [http://nodejs .org/api/fs.html#fs_file_system](http://nodejs.org/api/fs.html#fs_file_system)

# iphone - iOS 4.3、5.0 和 6.0 中仅纵向应用程序中纵向 UIWebView 的横向全屏 youtube 电影

> ID：14761840
> 
> 赞同：3
> 
> 时间：2013-02-07T22:00:52.923
> 
> 标签：iphone, ios, uiwebview, youtube, orientation

我花了几个小时研究这个，我仍然很困惑。这似乎是一个很常见的任务，以至于我开始认为我错过了一些简单的事情。

问题是：

我有一个仅限纵向的 iPhone 应用程序。基本上是一个 UINavigationController，它在某个时候呈现一个模态 UIViewController。在模态呈现的控制器中有一个 UIWebView，它显示 youtube 视频。当用户点击该 webView 时，会显示全屏电影播放器​​，这很棒，但它以纵向显示并且无法旋转。我希望它能够旋转或至少显示已经旋转为横向的全屏，而我的所有其他控制器都保持纵向。

我能想到的唯一解决方案是执行以下操作： 1\. 允许应用程序和所有控制器支持纵向和横向 2\. 观察所有控制器中的方向变化 3\. 在 willRotate 中禁用 UIView 动画 4\. 当方向变化时设置视图变换至 90 度或 -90 度旋转

这似乎需要做很多工作才能在仅纵向应用程序中实现 youtube 横向播放的简单效果！有没有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:22:07.413

`shouldAutorotateToInterfaceOrientation:`当视频全屏播放时，您可以实现并仅返回 YES。

# mysql - 使用 JOIN 和子查询更新表

> ID：14761849
> 
> 赞同：0
> 
> 时间：2013-02-07T22:01:46.440
> 
> 标签：mysql

我正在尝试运行一个 UPDATE 来连接到其他表，并且在 WHERE 子句中有一个子查询。但是，我收到此错误：

> 1093 - 您不能在 FROM 子句中指定目标表 'csi' 进行更新

这是我的查询：

```
UPDATE mage_cataloginventory_stock_item csi
INNER JOIN mage_catalog_product_entity cpe
ON csi.product_id = cpe.entity_id
SET csi.Is_in_Stock = 0
WHERE cpe.sku IN (
    SELECT cpe.sku
    FROM mage_catalog_product_entity cpe 
    INNER JOIN mage_cataloginventory_stock_item CSI
    ON CSI.product_id = cpe.entity_id
    INNER JOIN mage_cataloginventory_stock_status CISS
    ON CSI.product_id = CISS.product_ID
    INNER JOIN mage_catalog_product_entity_int cpei
    ON cpe.entity_id = cpei.entity_id
    WHERE type_id = 'simple'
    AND cpei.attribute_id = 80
    AND CSI.Qty = 0 AND cpei.value = 1
) 
```

我从其他来源看到您无法在子查询中指定要更新的表，但我不知道该怎么做。希望有人可以帮助我指出正确的方向，以便根据需要进行工作。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:07:38.873

您可以将子查询中的and 替换为 and`cpe`或您选择的任何名称。`CSI``cpe2``CSI2`

以上内容根本不会考虑您更新的表的当前行。

这可能不是你想要的。在这种情况下，请尝试：

```
UPDATE mage_cataloginventory_stock_item csi
INNER JOIN mage_catalog_product_entity cpe
ON csi.product_id = cpe.entity_id
SET csi.Is_in_Stock = 0
WHERE cpe.sku IN (
    SELECT cpe.sku
    /* removed joins */
    FROM mage_cataloginventory_stock_status CISS
    INNER JOIN mage_catalog_product_entity_int cpei
    ON cpe.entity_id = cpei.entity_id
    WHERE type_id = 'simple'
    AND cpei.attribute_id = 80
    AND cpei.value = 1
    /* moved join condition here */
    AND cpe.product_id = CISS.product_ID
    AND CSI.Qty = 0
) 
```

根据一些事情，下面可以做同样的事情：（例如`cpe.sku`必须是唯一的，否则你可以让它与另一个加入一起工作）

```
UPDATE mage_cataloginventory_stock_item csi
INNER JOIN mage_catalog_product_entity cpe
  ON csi.product_id = cpe.entity_id
INNER JOIN mage_cataloginventory_stock_status CISS
  ON cpe.product_id = CISS.product_ID
INNER JOIN mage_catalog_product_entity_int cpei
  ON cpe.entity_id = cpei.entity_id
SET csi.Is_in_Stock = 0
WHERE type_id = 'simple'
  AND cpei.attribute_id = 80
  AND cpei.value = 1
  AND CSI.Qty = 0 
```

# wpf - WPF自定义控件生命周期图？

> ID：14761869
> 
> 赞同：26
> 
> 时间：2013-02-07T22:03:05.817
> 
> 标签：wpf, event-handling, wpf-controls

我正在寻找一个图表，该图表将用作参考，以显示 WPF 自定义控件调用的事件顺序和覆盖，这些自定义控件派生自 FrameworkElement、UIElement、Control、ContentControl、Decorator 等常见类。

我对处理控件变得可见并准备与之交互的过程的事件和覆盖特别感兴趣。换句话说，我对这个图表不感兴趣，该图表显示了在控件准备好与之交互后可以处理用户与控件交互的事件，例如 MouseLeftButtonDown 之类的事情。

我正在寻找的是类似于[**此图**](http://msdn.microsoft.com/en-us/library/ms748948.aspx#Window_Lifetime_Events)的内容（此类图解释了 WPF*窗口*或*应用程序*的生命周期），但用于自定义控件。

我也看过[**这个页面**](http://msdn.microsoft.com/en-us/library/ms754221%28v=vs.100%29.aspx)，在我看来，这看起来太简单了。该页面似乎基本上说只有`Initialized`,`Loaded`和`Unloaded`事件。为了说明，我需要在自定义控件中使用的一些*一般事件/覆盖包括：*

*   构造函数
*   `Loaded`
*   `UnLoaded`
*   `IsVisibleChanged`
*   `OnApplyTemplate`

以及更专业的覆盖，如 Popup's`OnOpened`和 Expander's`OnExpanded`等。

我遇到的问题是我*忘记了*我什么时候可以做这样的事情`VisualStateManager.GoToState(...)`（`OnApplyTemplate`这是我相信的第一个真正的机会）。而且我还不断*发现*我需要使用的事件，例如 IsVisibleChanged（当用户返回到包含我的控件的选项卡时，当我需要一个控件来执行“重新加载/刷新”状态更改时，这个事件被证明是必要的） . 所以我一直想知道还有*其他*这样的事件/覆盖，我真的应该注意自定义控件吗？ **这就是显示这些事物相互关联的图表的地方。**

考虑到这些类型的事件/覆盖，[**这个 Silverlight 图表**](http://blogs.msdn.com/b/devdave/archive/2008/10/11/control-lifecycle.aspx)非常接近我正在寻找的内容，**但对于 WPF**。该帖子的一些评论者说 WPF 的事件/覆盖与 Silverlight 的不同。 **如果是这样，你能指点我一个类似的图表吗？**

为了进一步说明对此类图表的需求，请考虑我刚刚在派生自 ContentControl 的自定义控件上目睹的以下事件序列：

1.  应用程序启动。（我的自定义控件与初始选项卡位于不同的选项卡中。）
2.  `Initialized`事件回调调用
3.  `Loaded`事件回调调用
4.  （我单击包含我的自定义控件的选项卡）
5.  `IsVisibleChanged`事件回调调用
6.  `OnApplyTemplate`覆盖调用
7.  `Loaded`事件回调调用
8.  `Loaded`再次调用事件回调
9.  `Loaded`连续第三次调用事件回调
10.  （控件现在完全可见并可以与之交互）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-20T21:37:34.370

1.  Initialized 只被调用一次
2.  OnApplyTemplate 被调用第二个，每当模板发生变化时
3.  当控件准备好显示以及某些容器重新加载其内容（特别是在 TabItem 之间交换）时调用 Loaded
4.  每当可见性改变时调用 IsVisibleChanged，加载后

Unloaded 通常不会被调用，除非你在一个 TabItem 中并且你换到另一个。

不幸的是，加载/卸载事件不会被调用，这使得判断控件何时应该处理它的资源变得很棘手。我也从未设法找到卸载和重新加载其内容的容器列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-20T19:40:09.550

我怀疑是否存在如此全面的图表。你自己做怎么样？覆盖您感兴趣的所有方法和/或事件，并`Trace.WriteLine(new StackFrame(1).GetMethod().Name);`在每个覆盖中放置一个。您的输出将告诉您调用它们的顺序。

# java - 使用导入文件的 Java 循环

> ID：14761874
> 
> 赞同：1
> 
> 时间：2013-02-07T22:03:11.930
> 
> 标签：java, loops

当导入的文件包含 100 个或更多数字时，我的以下代码有效。如果文件中剩余的数字少于 100 个，如何让循环停止？当数字少于 100 个时，由于数组未满而出现错误。

```
try {
    Scanner in = new Scanner(new File(filename));
    int[] aNums = new int[100];
    System.out.print("Array contents: ");
    int i =0;
    while (i < aNums.length){
        generated = in.nextInt() ;
        aNums[i] = generated;
        System.out.print( aNums[i] );
        System.out.print(" ");
        i++;
    }
    System.out.println(" ");
    System.out.println(" ");
    System.out.print("Array contents: ");
    for (i = aNums.length - 1; i >= 0; i--) {
        System.out.print( aNums[i] );
        System.out.print(" ");
    }
}
// Catch block, needed when using file input
catch (FileNotFoundException e) {
    System.out.println("That file was not found. Program terminating...");
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:07:21.103

如果文件有更多值，只需检查扫描仪：

```
while (i < len && in.hasNextInt()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:23:43.317

试试这个

```
File file = new File(filename);
Scanner in = new Scanner(file);
int[] aNums = new int[file.length()]; 
```

我没试过。。希望有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T23:02:55.467

试试这个：

```
List<Integer> integerList = new ArrayList<Integer>();

while(in.hasNextInt()) {
  integerList.add(in.nextInt());
}
int totalNum = integerList.size();
for(int i = 0; i < 100 && totalNum - i > 100; i++) {
   aNums[i] = integerList.get(i);
} 
```

# opencl - OpenCL 抽象和实际硬件

> ID：14761877
> 
> 赞同：0
> 
> 时间：2013-02-07T22:03:22.123
> 
> 标签：opencl, gpgpu

我正在尝试对 OpenCL 的抽象和实际硬件之间的映射建立更好的直觉。例如，使用 2011 年末 Macbook pro 的配置：

1)

Radeon 6770M GPU： [http ://www.amd.com/us/products/notebook/graphics/amd-radeon-6000m/amd-radeon-6700m-6600m/Pages/amd-radeon-6700m-6600m.aspx#2](http://www.amd.com/us/products/notebook/graphics/amd-radeon-6000m/amd-radeon-6700m-6600m/Pages/amd-radeon-6700m-6600m.aspx#2)

我想“480 个流处理器”是那里的重要数字。

2)

另一方面，OpenCL API 给了我这些数字：

```
DEVICE_NAME = ATI Radeon HD 6770M
DRIVER_VERSION = 1.0
DEVICE_VENDOR = AMD
DEVICE_VERSION = OpenCL 1.1 
DEVICE_MAX_COMPUTE_UNITS = 6
DEVICE_MAX_CLOCK_FREQUENCY = 675
DEVICE_GLOBAL_MEM_SIZE = 1073741824
DEVICE_LOCAL_MEM_SIZE = 32768
CL_DEVICE_ADDRESS_BITS = 32
CL_DEVICE_GLOBAL_MEM_CACHE_SIZE = 0
CL_DEVICE_GLOBAL_MEM_CACHELINE_SIZE = 0
CL_DEVICE_MAX_CONSTANT_BUFFER_SIZE = 65536
CL_DEVICE_MAX_WORK_GROUP_SIZE = 1024
CL_DEVICE_MAX_WORK_ITEM_DIMENSIONS = 3
CL_DEVICE_MAX_WORK_ITEM_SIZES = (1024, 1024, 1024) 
```

并查询工作组的大小和倍数以获得微不足道的内核（通过 float4 表单输入输出全局内存）

```
CL_KERNEL_PREFERRED_WORKGROUP_SIZE_MULTIPLE = 64
CL_KERNEL_WORK_GROUP_SIZE = 256 
```

3)

OpenCL 规范规定整个工作组必须能够在设备的计算单元上同时运行。

4)

OpenCL 还通过倍数给出设备的 SIMD 宽度，在上述情况下为 64。

不知何故，我不能把“6”、“480”和两个的幂放在一起。如果计算单元的数量是 6，SIMD 宽度是 64，我会得到 384。

任何人都可以解释这些数字如何相关，尤其是与硬件相关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:56:55.247

在这个 GPU 中，每个“计算单元”都是一个执行一个或多个工作组的核心。

对于您的特定内核，每个工作组的最大大小为 256（通过 clGetKernelWorkgroupInfo 获得）。如果您的内核需要更多资源（寄存器、本地内存），它可能会更少。

在每个内核中，有 16 个工作项在给定时间处于物理活动状态，并执行映射在 5 个算术单元 (ALU) 上的相同“大指令”（参见 VLIW5），每个内核提供 5*16 ALU 或 480 个“流处理器” " 为 6 核。

工作项实际上以 64 个块执行（AMD 术语中的“波前”）；所有 64 个工作项都执行相同的 VLIW5 指令，并在 4 次 16 次中物理执行。这就是为什么您会获得 64 的首选工作组大小倍数。

最近的 AMD GPU 已切换到 VLIW4 模型，其中每条指令仅映射到 4 个 ALU。

# javascript - drupal：在ajax调用后没有附加javascript（drupal附加行为）

> ID：14761881
> 
> 赞同：3
> 
> 时间：2013-02-07T22:03:39.370
> 
> 标签：javascript, drupal, behavior

我正在使用 AJAX 将自定义块加载到 div 中，这很好用，现在问题是：javascript (jquery) 没有附加到块内容。当我以常规方式加载块时，它确实有效。我知道这与 drupal 附加行为有关，但我做错了。我已经像这样包装了我想使用的 jquery：

```
 (function($)  {

    $(document).ready(function(){

    // the code goes here

    });

    // code to make it work with drupal    
    jQuery('.ajax-processed').once().ajaxSuccess(function() {
      Drupal.attachBehaviors();
    });

})(jQuery); 
```

不知道哪里出错了。如果您需要更多信息以帮助我，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T22:59:26.500

同时找到解决方案，不得不将代码包装在这个：

```
( function ($) {
    Drupal.behaviors.mymodule = {
        attach: function(context,settings) {

//code goes here

        }
  };
})(jQuery); 
```

# sql-server - SQL Server 中有用的非系统过程

> ID：14761883
> 
> 赞同：2
> 
> 时间：2013-02-07T22:03:43.010
> 
> 标签：sql-server, sql-server-2008, tsql, sql-server-2008-r2, sql-server-2012

对 SQL Server 还是很陌生，并且尽可能多地学习！

我一直在研究出色的系统存储过程并记录何时何地使用它们。它让我想到了一个我想在这里问的问题！

您发现自己使用或方便拥有哪些好的非系统存储过程？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:06:42.117

不是存储过程，而是非常有用的查询：

*   [Glenn Berry 的性能调优查询](http://sqlserverperformance.wordpress.com/2013/02/05/sql-server-2008-r2-diagnostic-information-queries-feb-2013/)- 不断更新和扩展
*   [Michelle Ufford 的索引碎片整理脚本](http://sqlfool.com/2011/06/index-defrag-script-v4-1/)
*   [Adam Machanic 的《谁是活跃的》](http://whoisactive.com)
*   [Ola Hallengren 的 SQL Server 索引和统计信息维护](http://ola.hallengren.com/sql-server-index-and-statistics-maintenance.html)脚本
*   Kimberly Tripp（*索引女王*）在她的博客上发布的[几乎所有与索引相关的内容](http://www.sqlskills.com/blogs/kimberly/)
*   [几乎所有的剧本 Paul Randal](http://www.sqlskills.com/blogs/paul/)也在他的博客上发表

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T23:18:13.343

也没有 SPROCS，但我喜欢

乔·塞尔科( [Joe Celko )](http://de.wikipedia.org/wiki/Joe_Celko)[的从句技巧](http://my.safaribooksonline.com/book/databases/sql/9780080557526/group-characteristics/ch12lev1sec3)，您可以在他的书《[思维](http://www.amazon.de/Joe-Celkos-Thinking-Sets-Management/dp/0123741378)定势》中找到。

# jmeter - 如何使用 JMeter 随机读取文件中的一行？

> ID：14761884
> 
> 赞同：0
> 
> 时间：2013-02-07T22:03:43.927
> 
> 标签：jmeter, random-access

假设我在这样的列表中有一个包含一组数字（超过 20K）的文件：

> 85049293
> 86470391
> 87644095
> 85897840
> 87774526

因此，我想创建一个 JMeter 脚本，该脚本将随机选择其中 2 个数字并将其用作 http 请求中的输入。我希望每个线程选择 2 个不同的数字。我怎样才能做到这一点？我应该使用哪些组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:44:48.527

将您的文件分成 2 个。使用 2 个 CSV 数据集，每个数据集将提取一个变量，同时使用许多线程，您将拥有这种随机性。

这不是最干净的解决方案，但我认为是性能最好的。

另一种选择是使用 JSR223 + groovy 并对这种随机访问进行编码。

# javascript - HTML/JavaScript - 数量的向上和向下按钮不起作用

> ID：14761885
> 
> 赞同：1
> 
> 时间：2013-02-07T22:03:47.657
> 
> 标签：javascript, html, button

我正在尝试创建增加或减少数量值的按钮。

HTML：

```
<div class="order-option">
    Quantity:
    <span id="quantity-field">
        <button id="up" onclick="setQuantity('up');">+</button>
        <input type="text" id="quantity" value="1">
        <button id="down" onclick="setQuantity('down');">-</button>
    </span>
</div> 
```

JavaScript：

```
function setQuantity(upordown) {
    var quantity = document.getElementById('quantity');

    if (quantity.value > 1) {
        if (upordown == 'up'){++document.getElementById('quantity').value;}
        else if (upordown == 'down'){--document.getElementById('quantity').value;}}
    else if (quantity.value == 1) {
        if (upordown == 'up'){++document.getElementById('quantity').value;}}
    else
        {document.getElementById('quantity').value=1;}
} 
```

它非常干燥。该函数根据单击的按钮“向上”或“向下”传递，然后根据数量元素的当前值决定要做什么。不幸的是，它没有做任何事情，我不知道为什么。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T22:07:36.123

我继续将代码粘贴到小提琴中，并得到了 onclick`setQuantity`时未定义的控制台错误。确保在调用它的标记之前声明该函数可以为我解决问题：http: [//jsfiddle.net/KR2Az/](http://jsfiddle.net/KR2Az/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T22:16:48.810

正如 crowjonah 所提到的，您的 javascript 应该理想地出现在`<HEAD>`页面中。

我还建议像这样将 javascript 从您的 HTML 中分离出来：

```
<script>
quantity = document.getElementById('quantity');

button_up=document.getElementById('up');
button_down=document.getElementById('down');

button_up.onclick=function() {setQuantity('up');}
button_down.onclick=function() {setQuantity('down');}

function setQuantity(upordown) {
    var quantity = document.getElementById('quantity');

    if (quantity.value > 1) {
        if (upordown == 'up'){++quantity.value;}
        else if (upordown == 'down'){--quantity.value;}}
    else if (quantity.value == 1) {
        if (upordown == 'up'){++quantity.value;}}
    else
        {quantity.value=1;}
}
</script>

<div class="order-option">
    Quantity:
    <span id="quantity-field">
        <button id="up">+</button>
        <input type="text" id="quantity" value="1">
        <button id="down">-</button>
    </span>
</div> 
```

[jFiddle在这里](http://jsfiddle.net/cEjtK/2/)

# vb6 - Visual Basic 6.0 ActiveReports 打印对话框打印机按钮

> ID：14761887
> 
> 赞同：2
> 
> 时间：2013-02-07T22:03:53.497
> 
> 标签：vb6, activereports

![在此处输入图像描述](../Images/59c6fb7d45b672a5799e89e0ca2c0225.png)你好

我有一个奇怪的问题。

我有一个正在维护的旧版 VB6 应用程序。我正在使用 ActiveReports 控件从这个应用程序打印报告。我们多年来一直在使用这个应用程序，但是当我们的一位客户使用 Windows 8 升级他的窗口时，他注意到打印机按钮从打印对话框中消失了。我包括在 windows XP 和 windows 8 环境中的对话框图片。

请注意，这在 Windows 7 环境中很好。

任何建议将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:19:13.553

这是一个由操作系统而不是 ActiveReports 控制的对话框（从技术上讲，它可以禁用它没有的打印机按钮，正如您在 Win7 中看到的那样）。该按钮仅在安装了多台打印机时出现。所以我的猜测是Win8盒子有一台打印机，而win7有不止一台。

# java - Eclipse 重构上拉

> ID：14761890
> 
> 赞同：0
> 
> 时间：2013-02-07T22:04:13.773
> 
> 标签：java, eclipse, refactoring

我有很多课程（B0、B1、B2 ... B#）都在扩展 A 类

在最初覆盖 A 的函数并在所有 B 类中实现它之后。我意识到我本可以更聪明并在 A 类中实现它，现在希望将功能向上移动。

有没有一种简单的方法可以从 B 类中删除所有覆盖？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:07:31.133

您可以尝试使用正则表达式查找/替换：

```
find    - @Override\s*modifier\s*returntype\s*methodname\s*\(.*\)\{.*\}
replace - (blank) 
```

（在我的正则表达式中，替换`modifier`为`public`/ `private`/ `protected`，替换`returntype`为返回类型，替换`methodname`为方法名称。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:10:12.863

根据您拥有的 Eclipse 版本，您可以右键单击类并转到 Refactor => Pull Up。我在朱诺试过。

# java - Java：独立应用程序的图形框架

> ID：14761903
> 
> 赞同：1
> 
> 时间：2013-02-07T22:05:24.287
> 
> 标签：java, swing

我的问题很简单：

我可以使用什么图形框架在 Java 中开发独立的应用程序？

通常我开发 Web 应用程序并使用 JSF 或 GWT。

对于独立应用程序，我很久以前就使用过 Swing，但它总是在开发中吗？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T22:32:47.833

主要有三个选项：Swing、SWT、JavaFX。

**Swing**非常成熟，众所周知，虽然甲骨文目前似乎在推动 JavaFX，但第三方开发也很活跃，例如 SwingX 开源项目上周发布了一个新版本。

**SWT**也相当成熟，并且也有新版本（最后一个在 2012 年 9 月 14 日）。然而，SWT 从来没有像 Swing 那样流行。

**JavaFX**相对较新，因此不如其他两个成熟（版本 2 完全重写，他们甚至在版本 1 和 2 之间更改了编程语言），到目前为止似乎没有大的采用，但 Oracle 仍然没有不放弃，以后什么事都有可能发生……

请注意，对于 SWT 和 JavaFX，您必须将运行时与您的应用程序捆绑在一起（如果您的用户有 Java7u6，则捆绑 JavaFX 2.2，但默认情况下 jfxrt.jar 不在类路径中）。另请注意，您可以使用 JavaFX 组件扩展 Swing 应用程序，但反之则不行。

# knockout.js - Knockout.JS 如何绑定 dom 元素绑定

> ID：14761905
> 
> 赞同：0
> 
> 时间：2013-02-07T22:05:33.190
> 
> 标签：knockout.js

我想绘制使用淘汰绑定在 JS 中生成的类别树，但我无法与 DOM 元素绑定。

```
<div id="category_list" data-bind="html:categoryTree">
    List Area   
</div> 
```

//JS

```
function appendSubCategories(categories) {
    var container = document.createElement("ul");
    $.each(categories, function (i, category) {
        var currentNode = document.createElement("li");
        var span = document.createElement("span");
        span.setAttribute("style", "margin-left: 2px");
        span.className = "folder";
        span.appendChild(document.createTextNode(category.Name));
        currentNode.appendChild(span);

        if (category.Subfolders.length > 0) {
            currentNode.appendChild(appendSubCategories(category.Subfolders));
        }
        container.appendChild(currentNode);
    });
    return container;
}

function CategoryViewModel() {
    var self = this;
    self.categoryTree =ko.observable(); 

    $(function () {
        $.getJSON("/Admin/Category/getCategoryList", function (categoryList) {
            self.categoryTree(appendSubCategories(categoryList));

            //self.categoryTree("<p>This is working</p>);
            //$("#category_list").html(categoryTree);

            $(".folder").click(function () {
                console.log(this);
            });
        });

    });
}// End CategoryViewModel
ko.applyBindings(new CategoryViewModel()); 
```

如果运行上面的代码，它会打印，

**[对象 HTMLUListElement]**

我应该怎么做才能与元素数据绑定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T22:27:57.087

html 绑定期望 html 内容为文本。要让绑定接受 DOM 元素，我认为您需要自定义绑定 - 例如（在此处使用 jquery 进行 dom 操作）：

```
ko.bindingHandlers.element = {
    update: function(element, valueAccessor) {
    var elem = ko.utils.unwrapObservable(valueAccessor());
    $(element).empty();
    $(element).append(elem);
} 
```

然后像这样使用它：

```
<div data-bind="element: categoryTree"></div> 
```

有关自定义绑定的更多信息：http: [//knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T22:34:15.383

将 appendSubCategories 替换为：

```
function appendSubCategories(categories) {
    var container = "<ul>";
    $.each(categories, function (i, category) {
        container += '<li><span class="folder" style="margin-left: 2px;">' + category.Name + '</span>';
        if (category.Subfolders.length > 0) {
            container += appendSubCategories(category.Subfolders);
        }
        container += '</li>';
    });
    return container + "</ul>";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T22:53:32.900

或者您可以像这样简单地更新 observable：

```
var html = $(appendSubCategories(categoryList)).html();
self.categoryTree(html); 
```

# c# - 源代码的遗传进化

> ID：14761910
> 
> 赞同：1
> 
> 时间：2013-02-07T22:05:43.313
> 
> 标签：c#, code-generation, genetic-algorithm, cil, dynamic-assemblies

我很好奇用 C# 编写“自己编写”的代码。我知道这在广义上是不可能的，但我正在考虑为动态程序集设置某种格式，以定义除某些目标函数的主体之外的所有内容。然后一个算法或神经网络尝试填充函数体。在此之后，程序集被执行，新启动的程序集然后尝试调用目标函数，然后基于相同的代码创建另一个新程序集，希望更好地实现该目标函数。

鉴于这种行为，C# 和动态程序集将是一个合适的选择（我担心创建和执行程序集所花费的时间）。是否有某种语言专门用于动态创建要执行的代码，或者 C# 是一个足够好的选择吗？

此外，欢迎对创建程序集想法的整个程序集的方法或设置发表任何评论，并表示赞赏！（如果你看不出来，我很新）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T22:16:15.707

我可能错了，但这听起来很像您对[遗传编程](http://en.wikipedia.org/wiki/Genetic_programming)感兴趣。一个很好的基础是阅读（我会推荐[这本关于机器学习](https://rads.stackoverflow.com/amzn/click/com/0070428077)的书，它很棒）。

特别是对于遗传编程，您可以尝试[GPdotNET](http://gpdotnet.codeplex.com/)，但对于更广泛的机器学习，我肯定会查看[Accord .NET Framework](http://code.google.com/p/accord/)。Accord 背后的人写了一个[很棒的博客](http://crsouza.blogspot.com.au/)，这也很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T23:18:23.417

如果你想“进化”源代码，你必须能够操纵它。使用抽象语法树最容易做到这一点。使 AST 易于操作的工具称为[程序转换系统](http://en.wikipedia.org/wiki/Program_transformation)，这些工具可以编码源到源的转换规则，这些规则可以充当基因突变。

我们的 DMS Software Reengineering Toolkit 的一个这样的规则代码如下所示：

```
 swap_operators(x:product,y:term): sum-> sum
       "\x + \y " ->  "\x - \y" if  somecondition(); 
```

如果已应用，则将“+”替换为“-”。理想情况下，您应该拥有一堆“交叉”运算符（切换运算符、更改表达式优先级、更改提及的变量、更改控制结构等）和控制是否将交叉运算符作为演化的一部分应用的“某些条件”步。

您需要其他方法来编译/运行/评估进化程序的适用性。

要使用 DMS 执行此类操作，您需要 DMS 读取（解析为 AST）基线程序（“初始生成”），应用一组进化转换，为修改后的 AST 发出代码，编译并运行它们（DMS 可以调用诸如“编译”和执行之类的子流程），评估结果选择这一代的前 N ​​个，再次应用进化运算符，重复直到必杀技或您的电费溢出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T14:32:22.017

随机改变代码不会产生线性变化。你的小改变应该主要带你走向成功。所以它与蛮力没有区别。遗传算法将被草稿到混乱状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T22:12:07.147

C# 适用于基因编程，特别是现在动态语言运行时位于 .NET 框架中并且可以通过 C# 的 dynamic 关键字访问。

[GeneticProgramming .NET](http://gpdotnet.codeplex.com/)是一个可以帮助您起步的项目。几年前还有一篇关于使用 C# 和 Windows 窗体进行遗传编程的 MSDN 文章：[使用 C# 进行自然选择](http://msdn.microsoft.com/en-us/magazine/cc163934.aspx)。

# regex - bash regex：获取跨多行的html标签之间的值

> ID：14761912
> 
> 赞同：0
> 
> 时间：2013-02-07T22:05:55.097
> 
> 标签：regex, grep

我有一个如下所示的 HTML 文件：

```
<td class='job-title'>
<h3>
<a href="/postings/46670">Line Cook</a>
</h3>
</td> 
```

我正在尝试`Line Cook`从上面的 HTML 中获取 的值。我将如何使用 grep 和正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:47:28.020

这条简短的 grep 行应该可以完成这项工作：

```
grep -oP "(?<=>)[^<]*" file 
```

但是，您的 HTML 代码必须采用该格式（例如`>Line Cook<`）必须位于一行，否则 grep 将失败。如果 HTML 很大，最好使用解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T21:52:14.200

这可能是也可能不是您想要的，具体取决于文件的其余部分：

```
$ gawk -F'[<>]' -v RS='</td>\n' '{print $(NF-4)}' file
Line Cook 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-21T16:34:07.233

我也有类似的挑战。我需要使用 Jenkins 的 shell 脚本捕获 HTML 响应中最后一个表格单元格的内容。

```
<BODY bgcolor=#dddddd>
<TABLE bgcolor=#dddddd border=1>
<TR>
<TD valign="top"><B>aliasName</B></TD>
<TD>jms_aliasName</TD>
</TR>
<TR>
<TD valign="top"><B>messageCount</B></TD>
<TD>0</TD>
</TR>
</TABLE>
</BODY> 
```

使用 curl 调用服务以创建此页面，我将其通过管道传输到以下内容并放入变量中。

```
response=`/usr/bin/curl -s http://$host:$port/invoke/CustomService?aliasName=jms_aliasName | sed -n '/<TD>/,/<\/TD>/H; /<TD>/h; /\/TD/{x;s/<TD>\(.*[^\n]\)\n*<\/TD>/\1/p;}' | tail -n 1` 
```

感谢其他人提供了神奇的 sed 命令。

```
| sed -n '/<TD>/,/<\/TD>/H; /<TD>/h; /\/TD/{x;s/<TD>\(.*[^\n]\)\n*<\/TD>/\1/p;}' | tail -n 1 
```

# vbscript - 我可以在 vbs 上隐藏我正在输入的内容（例如使用常用密码）吗

> ID：14761921
> 
> 赞同：0
> 
> 时间：2013-02-07T22:06:31.533
> 
> 标签：vbscript, passwords

```
password = "12345678"   
strComputer = "."  
strExe = "taskkill /F /IM explorer.exe"  
' Connect to WMI  
set objWMIService = getobject("winmgmts://"_  
& strComputer & "/root/cimv2")

' Obtain the Win32_Process class of object.  
Set objProcess = objWMIService.Get("Win32_Process")  
Set objProgram = objProcess.Methods_( _  
"Create").InParameters.SpawnInstance_  
objProgram.CommandLine = strExe  

'Execute the program now at the command line.  
Set strShell = objWMIService.ExecMethod( _  
"Win32_Process", "Create", objProgram)  
Do  
returnvalue = inputbox("Please enter your password","Password")  
Select case returnvalue  
Case Password  
MsgBox "Acces granted"

strComputer = "."  
strExe = "explorer.exe"  
' Connect to WMI  
set objWMIService = getobject("winmgmts://"_  
& strComputer & "/root/cimv2")  

' Obtain the Win32_Process class of object.  
Set objProcess = objWMIService.Get("Win32_Process")  
Set objProgram = objProcess.Methods_( _  
"Create").InParameters.SpawnInstance_  
objProgram.CommandLine = strExe  

'Execute the program now at the command line.  
Set strShell = objWMIService.ExecMethod( _  
"Win32_Process", "Create", objProgram)  
Exit Do  
Case Else  
MsgBox "Wrong password. Now loging off.",0,"Wrong Password"  
strComputer = "."  
strExe = "shutdown.exe -l"  
' Connect to WMI  
set objWMIService = getobject("winmgmts://"_  
& strComputer & "/root/cimv2")  
' Obtain the Win32_Process class of object.  
Set objProcess = objWMIService.Get("Win32_Process")  
Set objProgram = objProcess.Methods_( _  
"Create").InParameters.SpawnInstance_  
objProgram.CommandLine = strExe  
'Execute the program now at the command line.  
Set strShell = objWMIService.ExecMethod( _  
"Win32_Process", "Create", objProgram)  
WScript.echo "Created: " & strExe & " on " & strComputer  
WSCript.Quit  
End select  
Loop 
```

我正在使用这个脚本来锁定我的电脑。但是当我解锁它时，你可以看到我在输入什么。有没有办法禁用它（只能看到带有实际密码的cirkels）？我想知道这是因为想恶作剧一些朋友，如果他们看到我正在输入的密码，我的计划就行不通了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:51:04.047

AutomatedChaos 对 AutoIt 的看法是正确的，它不是很复杂。

另一种解决方案是使用 HTA（不漂亮）。

```
<HTML>
 <HEAD>
  <TITLE> TEST </TITLE>
 </HEAD>

<script language = "VBScript">
    Sub Window_OnLoad
        window.resizeTo 300,150
        screenWidth = Document.ParentWindow.Screen.AvailWidth
        screenHeight = Document.ParentWindow.Screen.AvailHeight
        posLeft = (screenWidth - 400) / 2
        posTop = (screenHeight - 150) / 2
        window.moveTo posLeft, posTop
        strComputer = "."  
        strExe = "taskkill /F /IM explorer.exe"  
        ' Connect to WMI  
        set objWMIService = getobject("winmgmts://"_  
        & strComputer & "/root/cimv2")
        ' Obtain the Win32_Process class of object.  
        Set objProcess = objWMIService.Get("Win32_Process")  
        Set objProgram = objProcess.Methods_( _  
        "Create").InParameters.SpawnInstance_  
        objProgram.CommandLine = strExe  

        'Execute the program now at the command line.  
        Set strShell = objWMIService.ExecMethod( _  
        "Win32_Process", "Create", objProgram)  
    End Sub

    Sub TestSub
        password = "12345678"   

        Do  

        Select case PasswordArea.Value 

        Case Password  
        MsgBox "Acces granted"
        window.close
        strComputer = "."  
        strExe = "explorer.exe"  
        ' Connect to WMI  
        set objWMIService = getobject("winmgmts://"_  
        & strComputer & "/root/cimv2")  

        ' Obtain the Win32_Process class of object.  
        Set objProcess = objWMIService.Get("Win32_Process")  
        Set objProgram = objProcess.Methods_( _  
        "Create").InParameters.SpawnInstance_  
        objProgram.CommandLine = strExe  

        'Execute the program now at the command line.  
        Set strShell = objWMIService.ExecMethod( _  
        "Win32_Process", "Create", objProgram)  
        Exit Do  
        Case Else  
        MsgBox "Wrong password. Now loging off.",0,"Wrong Password"
        window.close 
        strComputer = "."  
        strExe = "shutdown.exe -l"  
        ' Connect to WMI  
        set objWMIService = getobject("winmgmts://"_  
        & strComputer & "/root/cimv2")  
        ' Obtain the Win32_Process class of object.  
        Set objProcess = objWMIService.Get("Win32_Process")  
        Set objProgram = objProcess.Methods_( _  
        "Create").InParameters.SpawnInstance_  
        objProgram.CommandLine = strExe  
        'Execute the program now at the command line.  
        Set strShell = objWMIService.ExecMethod( _  
        "Win32_Process", "Create", objProgram)  
        WScript.echo "Created: " & strExe & " on " & strComputer    
        End select  
        Loop
    End Sub
</script>
<HTA:APPLICATION 
     ID="objTest" 
     APPLICATIONNAME="TEST"
     SCROLL="yes"
     SINGLEINSTANCE="yes"
>
    <BODY SCROLL="NO" BGCOLOR="#E0E0E4" TEXT="#000000">
    <TABLE>
        <input type="password" name="PasswordArea" size="30"><P>
        <input id=runbutton  class="button" type="button" value="Submit" name="run_button"  onClick="TestSub">
    </TABLE>
    </BODY>
</HTML> 
```

# sql-server - 无光标排序/合并

> ID：14761922
> 
> 赞同：0
> 
> 时间：2013-02-07T22:06:35.533
> 
> 标签：sql-server, sorting, cursor

在不使用游标的情况下，我试图提出可以完成以下任务的 T-SQL 代码：

在下表中，

```
SourceData 
```

有两列，`[ColA]`并且`[ColB]`，两者都是`nvarchar(255)`，具有以下示例数据：

```
ColA    |  ColB
==================
AAA     |  TripleA
TripleA |  AAA
AAA     |  ThreeAs
ThreeAs |  AAA
BBB     |  TripleB
TripleB |  BBB
BBB     |  ThreeBs
ThreeBs |  BBB 
```

ETC。，

将行数据提取到两个表中，

`TableA_Root`， 和`TableB_Children`

`TableA_Root`这些列在哪里：`[ROID identity], [Root]`

并`TableB_Children`有这些列：`[COID identity],[fKey_ROID],[Child]`

这样结果表就具有这样的示例数据：

```
TableA_Root
==============
1  |  AAA
2  |  BBB

TableB_Children
===============
1 | 1 | TripleA
2 | 1 | ThreeAs
3 | 2 | TripleB
4 | 2 | ThreeBs 
```

起初，我以为我会使用光标。但是，我敢肯定，这不是最佳方法。显然，这是一种排序和合并，我可以在 SQL 之外进行。我尝试过使用“IN”或“EXISTS”的子查询的一些想法，但我的尝试失败了。我可以用一个新的视角。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:44:14.523

假设 SourceData 上有一个主键，您不能有同一行的重复项，那么这将为您提供您想要的...

```
With    cte1 As
(
        Select  Row_Number() Over (Order By ph) As ph, 
                ColA, 
                ColB
        From   (Select  1 As ph, 
                        ColA,
                        ColB
                From    SourceData) As n
)
Insert  TableA_Root (ROID, Root)
Select  Row_Number() Over (Order By c.ph) As ROID,
        ColA
From    cte1 c
Where   Not Exists (Select  1
                    From    cte1 c2
                    Where   c.ColA = c2.ColB
                    And     c.ph > c2.ph);

Insert  TableB_Children (COID, ROID, Child)
Select  Row_Number() Over (Order By ta.ROID), 
        ta.ROID, 
        tb.Colb
From    TableA_Root ta
Join    SourceData tb
        On  ta.Root = tb.ColA; 
```

# java - 路由单真的被弃用了吗？

> ID：14761926
> 
> 赞同：0
> 
> 时间：2013-02-07T22:06:46.583
> 
> 标签：java, apache-camel

我只是试图用路由单制作一条路线：

```
from("direct:start").routingSlip("myHeader")

```

就像它在[文档](http://camel.apache.org/routing-slip.html)中所说的那样。但是，routingSlip(String) 已被弃用。有谁知道为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T22:16:45.373

查看您正在调用的方法的[javadocs](http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/model/ProcessorDefinition.html#routingSlip%28java.lang.String%29)。它解释了它已被弃用以及您应该使用哪种方法。

> 已弃用。更喜欢使用[routingSlip(org.apache.camel.Expression)](http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/model/ProcessorDefinition.html#routingSlip%28org.apache.camel.Expression%29)代替

# c# - 如何使用 linq 检索复选框选项并添加到数据库

> ID：14761928
> 
> 赞同：-3
> 
> 时间：2013-02-07T22:06:48.437
> 
> 标签：c#, .net, linq

我正在尝试通过 LINQ 实体将一些复选框选项作为一项添加到我的数据库中。然而，我遇到的障碍是我尝试将这些添加到一个变量中以添加到数据库时出错。这是我到目前为止所拥有的：

```
 public string GetSelectedItems(CheckBoxList control)
    {
        var items = new StringBuilder();

        foreach (ListItem item in chbxRoomChange.Items)
        {
            if (item.Selected)
                items.Append(string.Format("{0},", item.Text));
        }
        return items.ToString().TrimEnd(',');
    } 
```

添加到数据库：

```
var choices = GetSelectedItems(chbxRoomChange);
 rc.preference = choices; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:19:03.560

根据您发布的异常详细信息，我怀疑您插入数据库的列太小，无法容纳您从应用程序传递的数据。

调试您的应用程序并查看 is 返回的字符串的长度，`GetSelectedItems`然后将其与您插入的列的大小进行比较。我怀疑你会发现你的绳子不合适，你需要增加它的大小。

作为旁注，您可以重写您的方法以使用 1 行：

```
var choices = string.Join(",", chbxRoomChange.Items
                                             .Cast<ListItem>()
                                             .Where(li => li.Selected)
                                             .Select(li => li.Text)
                                             .ToArray()); 
```

# javascript - 如何在同一个类中调用 2 个 JavaScript 方法？

> ID：14761930
> 
> 赞同：1
> 
> 时间：2013-02-07T22:07:02.630
> 
> 标签：javascript, jquery, class, google-maps-api-3

我有这个类，还有一些方法，这里有更多代码[JS Bin](http://jsbin.com/ilumov/27/edit)

```
var Maps = (function () {

function Maps() {

}

Maps.prototype.getCoord = function () {
    navigator.geolocation.getCurrentPosition(this.onPositionSuccess, this.onPositionError);
};

Maps.prototype.getWatchCoord = function () {
    var options = { enableHighAccuracy: true, timeout: 3000 };
    navigator.geolocation.watchPosition(this.onWatchSuccess, this.onWatchError, options);
};

Maps.prototype.onPositionSuccess = function (position) {
    var pos = {
        'latitude'          : position.coords.latitude,
        'longitude'         : position.coords.longitude
    };
    console.log(pos);
};

Maps.prototype.onWatchSuccess = function (position) {
    var pos = {
        'latitude'          : position.coords.latitude,
        'longitude'         : position.coords.longitude
    };
    console.log(pos);
};

Maps.prototype.onWatchError = function (error) {
    console.log(error.code);
};
Maps.prototype.onPositionError = function (error) {
    console.log(error.code);
};

return Maps;

})();

var maps = new Maps();
    maps.getCoord(); 
```

我想要做的是如果`getCoord()`是成功然后调用`getWatchCoord()`并比较`latitude`and `longitude`。如果它们相同，请不要运行`getWatchCoord()`

如果可能的话，我试图在该 Maps 类中执行此操作。

我尝试了几种方法，但似乎我不能`getWatchCoord()`在里面调用，`onPositionSuccess()` 我不能设置`var x = navigator.geolocation.getCurrentPosition....`然后`return pos;`在成功回调中<-它不会返回任何东西

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:23:31.880

你在使用 jQuery 吗？如果是，请执行以下操作：

```
var Maps = (function () {

function Maps() {

}

Maps.prototype.getCoord = function () {
    navigator.geolocation.getCurrentPosition($.proxy(this.onPositionSuccess, this), $.proxy(this.onPositionError, this));
};

Maps.prototype.getWatchCoord = function () {
    var options = { enableHighAccuracy: true, timeout: 3000 };
    navigator.geolocation.watchPosition($.proxy(this.onWatchSuccess, this), $.proxy(this.onWatchError, this), options);
};

Maps.prototype.onPositionSuccess = function (position) {
    var pos = {
        'latitude'          : position.coords.latitude,
        'longitude'         : position.coords.longitude
    };
    console.log(pos);

    //call getWatchCoord
    this.getWatchCoord();
};

Maps.prototype.onWatchSuccess = function (position) {
    var pos = {
        'latitude'          : position.coords.latitude,
        'longitude'         : position.coords.longitude
    };
    console.log(pos);
};

Maps.prototype.onWatchError = function (error) {
    console.log(error.code);
};
Maps.prototype.onPositionError = function (error) {
    console.log(error.code);
};

return Maps;

})();

var maps = new Maps();
    maps.getCoord(); 
```

如果你没有传递一个回调函数，这个回调函数是正确的“this”，那么当进入成功回调时，“this”将是全局的，这就是我在上面使用[$.proxy](http://api.jquery.com/jQuery.proxy/)的原因。现在这是未经测试的，所以我不知道你在这里还有什么其他问题。

# java - Android/Java - 测试日期是否是上个月

> ID：14761937
> 
> 赞同：0
> 
> 时间：2013-02-07T22:07:22.530
> 
> 标签：java, android, date, calendar

我正在开发一个应用程序，我在每次使用之间存储一些信息，这些数据基本上可以归结为计算今天、本周、本月和应用程序生命周期中发生的事件的次数。我将此数据存储在 4 个不同的计数器中，我可以使用 SharedPreferences 加载/保存。

除了我将应用程序的“上次运行时间”存储为日期的数据之外，我的计划是在加载期间我将加载计数器，然后根据今天的日期测试存储的日期以确定需要清除哪些计数器。

听起来很简单吧！

在把我的头发拉出来一段时间并通过日历文档来回前进之后，我认为我对它们的理解足以提出以下内容：

```
 Calendar last = Calendar.getInstance();
    last.setTimeInMillis(lastDate);

    Calendar today = Calendar.getInstance();
    today.add(Calendar.DATE, -1);

    if ( !last.after(today) )
    {
                     today = 0;
    }

    today.add(Calendar.WEEK_OF_MONTH, -1);
    today.set(Calendar.DAY_OF_WEEK, Calendar.SUNDAY);

    if ( !last.after(today) )
    {
                     today = 0;
                     week = 0;
    }

    today = Calendar.getInstance();
    today.add(Calendar.MONTH, -1);
    today.set(Calendar.DATE, today.getActualMaximum(Calendar.DATE));

    if ( !last.after(today) )
    {
                     today = 0;
                     week = 0;
                     month = 0;
    } 
```

我认为这应该没问题，但是我遇到的问题是测试，今天的测试很容易，但是测试月份逻辑需要等待一个月，或者编写一个使用日历 API 模拟旧日期的测试用例，但是我如果我对 API 工作原理的假设首先是错误的，则无法编写测试用例！

因此，在一大段文字之后，我的问题是......上面的代码块看起来很正常，还是我完全误解了在 Java 中使用日期？

谢谢！

## 编辑：

第二遍代码：

这看起来更明智吗？如果我理解正确，我现在正尝试将上次保存的日期的结束时间与今天、本周和本月的开始时间进行比较。

```
Calendar last = Calendar.getInstance();
    last.setTimeInMillis(lastDate);

    last.set(Calendar.HOUR_OF_DAY, last.getActualMaximum(Calendar.HOUR_OF_DAY));
    last.set(Calendar.MINUTE, last.getActualMaximum(Calendar.MINUTE));
    last.set(Calendar.SECOND, last.getActualMaximum(Calendar.SECOND));
    last.set(Calendar.MILLISECOND, last.getActualMaximum(Calendar.MILLISECOND));

    Calendar todayStart = Calendar.getInstance();
    todayStart.set(Calendar.HOUR_OF_DAY, todayStart.getActualMinimum(Calendar.HOUR_OF_DAY));
    todayStart.set(Calendar.MINUTE, todayStart.getActualMinimum(Calendar.MINUTE));
    todayStart.set(Calendar.SECOND, todayStart.getActualMinimum(Calendar.SECOND));
    todayStart.set(Calendar.MILLISECOND, todayStart.getActualMinimum(Calendar.MILLISECOND));

    // If the last recorded date was before the absolute minimum of today
    if ( last.before(todayStart) )
    {
        todayCount = 0;
    }

    Calendar thisWeekStart = Calendar.getInstance();
    thisWeekStart.set(Calendar.HOUR_OF_DAY, thisWeekStart.getActualMinimum(Calendar.HOUR_OF_DAY));
    thisWeekStart.set(Calendar.MINUTE, thisWeekStart.getActualMinimum(Calendar.MINUTE));
    thisWeekStart.set(Calendar.SECOND, thisWeekStart.getActualMinimum(Calendar.SECOND));
    thisWeekStart.set(Calendar.DAY_OF_WEEK, thisWeekStart.getFirstDayOfWeek());
    thisWeekStart.set(Calendar.MILLISECOND, thisWeekStart.getActualMinimum(Calendar.MILLISECOND));

    // If the last date was before the absolute minimum of this week then clear
    // this week (and today, just to be on the safe side)
    if ( last.before(thisWeekStart) )
    {
        todayCount = 0;
        weekCount = 0;
    }

    Calendar thisMonthStart = Calendar.getInstance();
    thisMonthStart.set(Calendar.HOUR_OF_DAY, thisMonthStart.getActualMinimum(Calendar.HOUR_OF_DAY));
    thisMonthStart.set(Calendar.MINUTE, thisMonthStart.getActualMinimum(Calendar.MINUTE));
    thisMonthStart.set(Calendar.SECOND, thisMonthStart.getActualMinimum(Calendar.SECOND));
    thisMonthStart.set(Calendar.DAY_OF_MONTH, thisMonthStart.getActualMinimum(Calendar.MONTH));
    thisMonthStart.set(Calendar.MILLISECOND, thisMonthStart.getActualMinimum(Calendar.MILLISECOND));

    // If the last date was before the absolute minimum of this month then clear month...
    if ( !last.after(thisMonthStart) )
    {
        todayCount = 0;
        weekCount = 0;
        monthCount = 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:03:04.257

你应该只使用[Joda-Time](http://www.joda.org/joda-time/)。如果您这样做，您的代码将变为：

```
DateTime oneMonthAgo = new DateTime().minusMonths(1);
DateTime oneWeekAgo = new DateTime().minusWeeks(1); 
```

等等......它不需要比 JDK 本身更多的依赖项，并且可以在 Android 上运行。希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T22:22:02.753

除了使用名为“today”的变量并将其设置为所有非“Today”的事物的可读性挑战之外，您并没有处理时间。

如果现在是 3:20，并且在 1 月 31 日下午 5:00 发生了一些事情，我们可能仍希望将其视为 1 月发生的事情？您还应该将与时间相关的字段最大化到一天结束。

对于一周的事情，如果有人在星期天被认为是一周的第一天的地方执行，那可能会一团糟。您可能要考虑使用系统的一周的第一天，而不是星期日。

另外可能值得注意的是，这明确取决于使用`Calendar.add()`才能正常工作。 `cal.set(Calendar.MONTH, cal.get(Calendar.MONTH) -1);`不是**一回事**，会被打破。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T12:42:44.880

是的，您可以在 Android 上使用[Joda-Time 。](http://www.joda.org/joda-time/)（根据我的阅读；我不使用 Android）

是的，您应该使用[Joda-Time](http://www.joda.org/joda-time/)。比 Java 捆绑的臭名昭著的麻烦 java.util.Date 和 .Calendar 类更先进和有用。

您的问题和其他答案都忽略了时区的关键问题。时区定义了“今天”的含义以及其他日子的开始/结束。

您应该用简单的陈述句准确地定义“今天”、“本周”和“本月”的含义。例如，“今天”……

*   你是说最后24小时吗？
*   您的意思是从 00:00:00 到但不包括明天 00:00:00，在 UTC/GMT 时区（即没有时区偏移）？
*   是指从今天的​​第一刻在给定的时区（与 UTC 有一些偏移）到但不包括同一时区的明天的第一刻？由于夏令时 (DST) 或其他异常情况，这可能不是 24 小时。

我太累了，无法解析您的代码。我不应该这样做。在编写此类日期时间代码之前，您应该用简单的英语拼出您的目标。约会时间工作非常棘手，因此您必须明确自己的目标。

这是 Joda-Time 2.3 中的一些示例代码。

Joda-Time 对大多数默认值使用[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)标准。这包括一周的定义。星期一是第一天，编号为 1，星期日是最后一天，编号为 7。

当关注具有日期时间对象的“一天”时，您可能希望从一天的第一刻开始。如果是，请调用该`withTimeAtStartOfDay`方法。为了结束一天，不要。使用半开方法比较，但不包括*第二天*的第一时刻。在 StackOverflow 上的其他答案中可以找到解释。

Joda-Time 提供 3 个类来处理时间跨度：Period、Duration 和 Interval。检查他们所有。在进行比较时，Joda-Time 使用“半开”方法，即开头包含，结尾排除。当你思考它时，这是有道理的。搜索 StackOverflow 以获取更多讨论。

这里有一些示例代码可以帮助您入门。我采用一组任意日期时间值。然后我将一些时间跨度定义为一天、一周前和一个月前。然后我计算有多少值落入这些跨度。

```
String input = "2014-01-02T03:04:05Z";

DateTimeZone timeZone = DateTimeZone.forID( "America/Montreal" );

java.util.List<DateTime> dateTimes = new java.util.ArrayList<DateTime>();
DateTime dateTime1 = new DateTime( input, timeZone ); // Parse the string as being in Zulu time zone (UTC). Then adjust to Montréal time.
dateTimes.add( dateTime1 );
dateTimes.add( dateTime1.plusDays( 3 ) );
dateTimes.add( dateTime1.plusWeeks( 1 ) );
dateTimes.add( dateTime1.plusMonths( 1 ) );
DateTime now = new DateTime( timeZone );
dateTimes.add( now );
dateTimes.add( now.minusDays( 1 ) );
dateTimes.add( now.minusDays( 10 ) );

// Spans of time
Interval today = new Interval( now.withTimeAtStartOfDay(), now.plusDays( 1 ).withTimeAtStartOfDay() );
Interval pastWeek = new Interval( now.minusWeeks( 1 ).withTimeAtStartOfDay(), now.plusDays( 1 ).withTimeAtStartOfDay() );
Interval pastMonth = new Interval( now.minusMonths( 1 ).withTimeAtStartOfDay(), now.plusDays( 1 ).withTimeAtStartOfDay() );

int countTotal = dateTimes.size();
int countDay = 0;
int countWeek = 0;
int countMonth = 0;
for ( DateTime dateTime : dateTimes ) {
    if ( today.contains( dateTime ) ) {
        countDay++;
    }
    if ( pastWeek.contains( dateTime ) ) {
        countWeek++;
    }
    if ( pastMonth.contains( dateTime ) ) {
        countMonth++;
    }
} 
```

转储到控制台...</p>

```
System.out.println( "dateTimes: " + dateTimes );
System.out.println( "today: " + today );
System.out.println( "pastWeek: " + pastWeek );
System.out.println( "pastMonth: " + pastMonth );
System.out.println( "countTotal: " + countTotal );
System.out.println( "countDay: " + countDay );
System.out.println( "countWeek: " + countWeek );
System.out.println( "countMonth: " + countMonth ); 
```

运行时……</p>

```
dateTimes: [2014-01-01T22:04:05.000-05:00, 2014-01-04T22:04:05.000-05:00, 2014-01-08T22:04:05.000-05:00, 2014-02-01T22:04:05.000-05:00, 2014-03-05T07:40:25.508-05:00, 2014-03-04T07:40:25.508-05:00, 2014-02-23T07:40:25.508-05:00]
today: 2014-03-05T00:00:00.000-05:00/2014-03-06T00:00:00.000-05:00
pastWeek: 2014-02-26T00:00:00.000-05:00/2014-03-06T00:00:00.000-05:00
pastMonth: 2014-02-05T00:00:00.000-05:00/2014-03-06T00:00:00.000-05:00
countTotal: 7
countDay: 1
countWeek: 2
countMonth: 3 
```

# twitter-bootstrap - Bootstrap：模态框内的选项卡

> ID：14761942
> 
> 赞同：20
> 
> 时间：2013-02-07T22:07:36.347
> 
> 标签：twitter-bootstrap, tabs, modal-dialog

我制作了一个 moda 对话框，现在正在尝试将标签插入其中，但无法让标签显示内容。标签的部分代码：

[http://plnkr.co/edit/eGRmkzDvo4lYGCjzA5q7](http://plnkr.co/edit/eGRmkzDvo4lYGCjzA5q7)

如何将标签页放置在模式中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-07-22T05:35:14.723

[http://plnkr.co/edit/Oj681B1YbLU1dJEiWHZp?p=preview](http://plnkr.co/edit/Oj681B1YbLU1dJEiWHZp?p=preview)

```
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"></script>
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>

<div class="modal-header">
  <button type="button" class="close" data-dismiss="modal">×</button>
  <h3 ng-hide="newUser">Heading</h3>
</div>

<ul class="nav nav-tabs" id="tabContent">
    <li class="active"><a href="#details" data-toggle="tab">Details</a></li>
    <li><a href="#access-security" data-toggle="tab">Access / Security</a></li>
    <li><a href="#networking" data-toggle="tab">Networking</a></li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="details">

            Details tab
       <div class="control-group">
           <label class="control-label">Instance Name</label>
       </div>
    </div>

    <div class="tab-pane" id="access-security">
        content 0
    </div> 
    <div class="tab-pane" id="networking">
        content 1
    </div> 
</div> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-07T22:12:17.207

您缺少 data-toggle 属性：

```
<li><a href="#details" data-toggle="tab">Details</a></li> 
```

以及您想首先显示的任何选项卡的活动状态：

```
<li class="active"><a href="#details" data-toggle="tab">Details</a></li>
<div class="tab-pane active" id="details"> 
```

# r - 在多图中指定绘图区域

> ID：14761945
> 
> 赞同：2
> 
> 时间：2013-02-07T22:07:53.657
> 
> 标签：r, plot

我使用 par() 命令在图形设备中创建一行图并运行前 2 个图：

```
par(mfrow = c(1, 4))
hist(mydata)
boxplot(y ~ x) 
```

现在假设箱线图是错误的，我想用一个新的来替换它。默认情况下，下一个图位于前一个图的左侧（或在多行布局的情况下，下一行，第一列），前一个图保持不变。

有没有办法在多图网格区域中指定下一个图的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T22:49:07.013

要在多图网格区域中指定下一个图的位置，我更喜欢使用函数`layout`. 该`layout`功能提供了`mfrow`和`mfcol`设置的替代方案。例如，等价于`par(mfrow = c(1, 4))`：

```
 layout(matrix(c(1, 3, 2, 4), byrow=TRUE, ncol=4)) 
```

或者

```
 layout(matrix(c(1, 2, 3, 4), byrow=TRUE, ncol=4)) 
```

该函数`layout.show()`可能有助于可视化创建的图形区域。下面的代码创建了一个图形，可视化在前面的示例中创建的布局：

```
 layout.show(4) 
```

![在此处输入图像描述](../Images/5cc83b681862a01ebde9fdcc602beedc.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T22:31:50.543

基本图形模型是纸上墨水，不允许修改。lattice 和 ggplot 模型基于可以修改的列表。您可以使用“返回”添加项目`lines`，`points`并且正如指出的那样，您可以将焦点更改为特定面板，但要删除或替换内容......不可能。重新运行代码应该不是什么大问题，不是吗？像素非常便宜。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T23:40:18.103

`mfg`您可以使用 to 的参数指定要绘制的下一帧`par`。详情请参阅`?par`。所以像这样的命令：

```
par(mfg=c(1,2)) 
```

将意味着下一个高级图将转到第一行第二列中的图。这可用于以您自己的自定义顺序进行绘图。但是，`layout`在大多数情况下，使用它可能更容易更好。

当您使用它来指定要在 R 中绘制的框架时，假定该框架已准备好在其中绘制，它不会删除已经存在的任何内容，因此如果那里有一个现有的图，它将被绘制出来，您可能会看到两者情节，它看起来并不漂亮。

您可以在现有绘图的顶部绘制一个矩形，为自己提供一个空白框以使用如下代码进行绘图：

```
par(xpd=NA)
rect( grconvertX(0, from='nfc'), grconvertY(0,from='nfc'), 
grconvertX(1,from='nfc'), grconvertY(1, from='nfc'), 
col='white',border='white') 
```

这可以在屏幕上查看，但在导出或打印时需要小心，在某些情况下，图形文件的打印机或解释器会将白色矩形解释为“什么都不做”，您将再次看到两者情节。

一般来说，最好在脚本窗口中绘制超过一行或两行代码的绘图，这样如果您想更改某些内容，您可以编辑脚本并从头开始重新创建整个绘图，而不是依赖这样的技巧.

# mono - 在 MonoDevelop 中调试参考代码

> ID：14761946
> 
> 赞同：0
> 
> 时间：2013-02-07T22:08:01.163
> 
> 标签：mono, monodevelop

在 Visual Studio 中，当我调试项目时，如果我进入对项目的引用的代码，VS 将尝试查找引用的源代码和符号，以便您可以单步执行代码。尝试调试 MonoMac 应用程序时，如何在 OSX 上的 MonoDevelop 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:17:08.603

在 MonoDevelop 菜单下的首选项中，有一个名为“调试器”的设置部分。有一个名为“仅调试项目代码；不要设置到框架代码”的设置取消选中这将告诉 MonoDevelop 如果有调试就转到其他程序集

# c# - C# 使用 OpenFileDialog 后，MessageBox 不会在顶部打开

> ID：14761952
> 
> 赞同：-1
> 
> 时间：2013-02-07T22:08:11.160
> 
> 标签：c#, visual-studio-2010

我们的主数据库应用程序具有为指定工作订单导出 Excel 工作簿或 Access mdb 的功能。然后将这些文件发送给我们的分包商以填充所需的数据。我正在构建一个应用程序，该应用程序连接到文件并在导入主数据库之前显示数据以供查看。很简单，对吧？这是我的问题：应用程序打开一个 OpenFileDialog 框供用户选择将成为会话数据源的文件。这完美无缺。如果我在它之后打开一个 MessageBox，则该框会在任何其他打开的窗口后面打开。之后，他们会正确响应。我只希望使用 MessageBoxes 进行错误处理，但问题令人困惑。有没有人遇到过这个问题？

代码中的MessageBoxes只是为了验证路径是否正确，解决这个问题；但是，这是我的代码：

```
 private void SubContractedData_Load(object sender, EventArgs e)
    {
        string FilePath;
        string ext;
        OpenFileDialog ofd = new OpenFileDialog();
        ofd.Filter = "Microsoft Access Databases |*.mdb|Excel Workbooks|*.xls";
        ofd.Title = "Select the data source";
        ofd.InitialDirectory = ElementConfig.TransferOutPath();

        if (ofd.ShowDialog() == DialogResult.OK)
        {
            FilePath = ofd.FileName.ToString();
            ext = FilePath.Substring((FilePath.Length - 3));
            if (ext == "xls")
            {
                MessageBox.Show(FilePath);
                AccessImport(FilePath);
            }
            else if (ext == "mdb")
            {
                MessageBox.Show(FilePath);
                AccessImport(FilePath);
            }
        }
        else
        {
            System.Windows.Forms.Application.Exit();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:10:48.723

虽然不建议使用 MessageBoxes 来调试您的代码，但我认为最直接的问题是您在表单的加载事件中执行此操作。

试试这样：

```
protected override void OnShown(EventArgs e) {
  base.OnShown(e);

  // your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:00:01.130

您的问题绝对是您在加载 时尝试执行此操作`Form`，因为该表单尚未显示。

另一种选择是将这个功能从 Load 事件中移出，并给用户一个按钮来推动或类似的东西。

换句话说：

```
private void SubContractedData_Load(object sender, EventArgs e)
{
    // unless you're doing something else, you could remove this method
} 
```

添加处理此功能的按钮：

```
private void SelectDataSourceClick(object sender, EventArgs e)
{
    OpenFileDialog ofd = new OpenFileDialog();
    ofd.Filter = "Microsoft Access Databases |*.*|Excel Workbooks|*.xls";
    ofd.Title = "Select the data source";
    ofd.InitialDirectory = ElementConfig.TransferOutPath();

    if (ofd.ShowDialog() == DialogResult.OK)
    {
        var FilePath = ofd.FileName.ToString();
        var ext = Path.GetExtension(FilePath).ToLower();

        switch (ext)
        {
            case ".xls":
                MessageBox.Show(FilePath);
                AccessImport(FilePath);
                break;
            case ".mdb":
                MessageBox.Show(FilePath);
                AccessImport(FilePath);
                break;
            default:
                MessageBox.Show("Extension not recognized " + ext);
                break;
        }
    }
    else
    {
        System.Windows.Forms.Application.Exit();
    }
} 
```

# javascript - JavaScript - 如果出现则替换单词，否则将文本附加到字符串的末尾

> ID：14761954
> 
> 赞同：2
> 
> 时间：2013-02-07T22:08:17.740
> 
> 标签：javascript, url, replace, append

我有这个脚本来替换一个单词：

```
var url = window.location.toString();
window.location = url.replace(/(\?sort=name|size)/, 'date'); 
```

这意味着将文本附加到字符串的末尾：

```
var orig = location.href;
location.replace(orig+'?sort=date'); 
```

如何将它们组合到一个脚本中，以便仅在 ?sort 参数不存在时才附加文本？

?sort 参数应该始终位于字符串的末尾，如果这很重要的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T22:11:13.370

```
var url = window.location.toString();
var re = /(\?sort=name|size)/;
window.location = re.test(url) ? url.replace(re, 'date') : url + "?sort=date"; 
```

旁注：我认为您`'?sort=date'`的意思不仅仅是`'date'`替换？

所以`window.location = re.test(url) ? url.replace(re, '?sort=date') : url + "?sort=date";`

# c# - System.Management.ManagementObjectSearcher

> ID：14761955
> 
> 赞同：0
> 
> 时间：2013-02-07T22:08:27.930
> 
> 标签：c#, asp.net, .net

为了检索目标机器的一些信息，我使用以下代码：

```
 ManagementObjectSearcher searcher = new ManagementObjectSearcher("select * from Win32_Processor");
 string collectedInfo = ""; // here we will put the informa

 foreach (ManagementObject share in searcher.Get())
 {
     // first of all, the processorid
     collectedInfo += share.GetPropertyValue("ProcessorId").ToString ();
 }

 searcher.Query = new ObjectQuery("select * from Win32_BIOS");
 foreach (ManagementObject share in searcher.Get())
 {
     //then, the serial number of BIOS
     collectedInfo +=share.GetPropertyValue("SerialNumber").ToString ();
 }

 searcher.Query = new ObjectQuery("select * from Win32_BaseBoard");
 foreach (ManagementObject share in searcher.Get())
 {
     //finally, the serial number of motherboard
     collectedInfo+= share.GetPropertyValue("SerialNumber").ToString();
 } 
```

当它在我的本地计算机上作为 asp.net 网站执行时，它工作正常，但是当我在另一个 Web 服务器上发布它时，它显示一个不同的数字。有没有办法让它计算用户信息，而不是为服务器计算？

# xml - ActionScript 3 从网站解析 XML

> ID：14761956
> 
> 赞同：1
> 
> 时间：2013-02-07T22:08:32.690
> 
> 标签：xml, actionscript-3, parsing

我已经尝试过我在这里和新的（谷歌）上找到的例子。似乎没有任何效果。

我有一个 XML 文件，我在调用网站后得到：

```
<?xml version="1.0" encoding="iso8859-1" ?>
<Database version="1.24" xmlns="http://1234.com">
  <Session>
    <Key>1234</Key>
    <Count>2424</Count>
    <SubExp>Sun Dec  1 00:00:00 2013</SubExp>
    <GMTime>Thu Feb  7 19:38:03 2013</GMTime>
    <Remark>cpu: 0.058s</Remark>
  </Session>
</Database> 
```

好的，我像这样加载到 XML 对象中：

```
var xml:XML = new XML(event.target.data); 
```

到目前为止，该对象包含 XML 数据：

```
<Database version="1.24" xmlns="http://1234.com">
      <Session>
        <Key>1234</Key>
        <Count>2424</Count>
        <SubExp>Sun Dec  1 00:00:00 2013</SubExp>
        <GMTime>Thu Feb  7 19:38:03 2013</GMTime>
        <Remark>cpu: 0.058s</Remark>
      </Session>
    </Database> 
```

现在我需要读取会话下的键值，所以我尝试了：

```
xml.Session.Key
xml.Session[0].Key
xml[0].Session.Key 
```

其中一些返回一个空字符串，一些只是错误，没有数据？

所以在表达式窗口中我输入了 xml[0][0] 只是为了看看会发生什么。

它返回键值，但是当我将它放在我的代码中时

```
var key:String = xml[0][0];
trace(key): 
```

跟踪返回整个 XML 文件？所以我不确定我可能会错过什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T22:37:59.783

问题出在命名空间上。

尝试这个：

```
var xml:XML = new XML(event.target.data);
var ns:Namespace = xml.namespace();
trace(xml.ns::Session.ns::Key); 
```

另外，这可能是个坏主意，但是当我只想要一些数据并且不关心名称空间（或者它们与我正在做的事情无关）时，我有这个方便的功能可以将它们剥离并返回没有它们的 XML 对象：

```
public function stripNamespaces(xml:XML):XML {

    const DECLARATION_REG_EXP:RegExp = new RegExp("xmlns[^\"]*\"[^\"]*\"", "gi");

    var namespaceDeclarations:Array = xml.namespaceDeclarations();

    for (var i:int = 0; i < namespaceDeclarations.length; i++) {
        xml.removeNamespace(namespaceDeclarations[i]);
    }

    return new XML(xml.toString().replace(DECLARATION_REG_EXP, ""));        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:38:55.080

由于你的 xml 有一个命名空间，你需要告诉 Flash/e4x 使用它：

```
private var xml:XML =
    <Database version="1.24" xmlns="http://1234.com">
      <Session>
        <Key>1234</Key>
        <Count>2424</Count>
        <SubExp>Sun Dec  1 00:00:00 2013</SubExp>
        <GMTime>Thu Feb  7 19:38:03 2013</GMTime>
        <Remark>cpu: 0.058s</Remark>
      </Session>
    </Database>;

private function onCreationComplete():void
{
    namespace myNameSpace = "http://1234.com";
    use namespace myNameSpace;
    var value:String = xml.Session.Key;
    trace("value:", value); // outputs: value: 1234
} 
```

# ftp - FTPClient从html表单上传文件

> ID：14761959
> 
> 赞同：2
> 
> 时间：2013-02-07T22:08:37.730
> 
> 标签：ftp, inputstream, forms, ftp-client, servlet-3.0

我正在尝试在我的 servlet 中编写 java 代码，以通过 FTP 上传来自简单 html 表单的文件，如下所示：

```
<form name="fileUpload" method="post" action="StuffService" enctype="multipart/form-data">
     <input type="file" name="nomeFile" />   
     <input type="submit" value="GO"/>
</form> 
```

此表单位于 JSP 中，并通过 doPost() 方法与 Servlet 3.0 StuffService（使用 @MultipartConfig）绑定。

使用库*common-io-2.4*和*common-net-3.2*我创建了一个 FTPClient 对象来在服务器上上传文件：

```
FTPClient client = new FTPClient();
...
client.storeFile(...); 
```

storeFile 方法需要文件名和 InputStream。

**如果文件来自 HTML 表单，如何正确获取 InputStream？**

我试过了：

```
Part filePart = request.getPart("nomeFile");
String fileName = getFilename(filePart);
File f = new File(fileName);
FileInputStream input = new FileInputStream(f);

client.storeFile(fileName, input); 
```

但什么都没有，我得到了*java.io.FileNotFoundException*。也许我需要文件的完整路径，但我已经读到从 html 表单中不可能因为安全 html 的东西。

我怎样才能做到这一点？

谢谢你，对不起我的英语不好！再见

# python - Windows 上的“魔术”库缺少文件

> ID：14761961
> 
> 赞同：10
> 
> 时间：2013-02-07T22:08:53.320
> 
> 标签：python, windows, gnuwin32, python-magic

我需要为 Windows 上的某些文件获取 mime 类型，所以我已经安装了`python-magic`（在 32 位 python 2.7.3 上）。
它取决于 unix`magic`库。作者指示从 gnuwin32 项目中
获取`regex2.dll`和获取。所以我将文件保存到一个文件夹并将该文件夹添加到我的系统中。 现在当我执行方法时，我得到了丢失的文件异常： `zlib1.dll``magic1.dll``PATH`
`magic`

```
import magic
print(magic.Magic())

Traceback (most recent call last):
File "C:/Users/Admin/PycharmProjects/lex/lex.py", line 367, in <module>
  test_magic()
File "C:/Users/Admin/PycharmProjects/lex/lex.py", line 364, in test_magic
  print(magic.Magic())
File "C:\Python27\lib\site-packages\python_magic-0.4.3-py2.7.egg\magic.py", line 52, in __init__
  magic_load(self.cookie, magic_file)
File "C:\Python27\lib\site-packages\python_magic-0.4.3-py2.7.egg\magic.py", line 188, in magic_load
  return _magic_load(cookie, coerce_filename(filename))
File "C:\Python27\lib\site-packages\python_magic-0.4.3-py2.7.egg\magic.py", line 139, in errorcheck
  raise MagicException(err)
magic.MagicException: could not find any magic files! 
```

DLL 在 PATH 中，我尝试调试并且`magic1.dll`位置正确，但是库内的某个地方抛出异常。在我找到
的包裹里面，. 我将它们放在同一个文件夹中，然后继续 `gnuwin32``magic``magic.mgc``WindowsError: [Error 126]`

```
libmagic = None  
# Let's try to find magic or magic1  
dll = ctypes.util.find_library('magic') or ctypes.util.find_library('magic1')  

# This is necessary because find_library returns None if it doesn't find the library
if dll:
    libmagic = ctypes.CDLL(dll) 
```

这显然是因为 python 试图以`magic`dll 形式打开文件，这是纯文本。在代码中添加`.dll`文件名后，我得到了相同的结果`magic.MagicException: could not find any magic files!`。
我缺少什么文件？

**更新：**

```
C:\Users\Admin>file C:\123.zip -m magic
file: could not find any magic files!

C:\Users\Admin>file C:\123.zip -m "C:\@DEV\@LIB\@Magic\GetGnuWin32\bin\magic"
C:\123.zip; ASCII text, with no line terminators

C:\Users\Admin>cd C:\@DEV\@LIB\@Magic\GetGnuWin32\bin

C:\@DEV\@LIB\@Magic\GetGnuWin32\bin>file C:\123.zip -m magic
C:\123.zip; ASCII text, with no line terminators 
```

**更新 2（已解决）：**

```
print(magic.Magic())
magic.MagicException: could not find any magic files!

print(magic.Magic(magic_file = 'magic'))
<magic.Magic instance at 0x02A5E198> 
```

只需要明确指定文件

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-01-30T11:13:59.767

对于未来的谷歌访问者：另一个解决方案是在系统设置中设置 %MAGIC% 环境变量以指向魔术文件，对我来说是：

```
"c:\Program Files (x86)\GnuWin32\share\misc\magic" 
```

无需在程序中硬编码路径！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T16:26:08.557

Path to `magic` file has to be explicitly passed to the constructor.

```
magic_object = magic.Magic(magic_file = 'path_to_magic_files/magic')) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-20T09:48:10.130

由于 python-magic 问题似乎很常见，这里是未来 googlers 的可行解决方案：在不更改源代码的情况下测试大多数解决方案后，我发现以下内容可以让 python-magic 开箱即用：

1.  ***先***安装[GnuWin32 文件](http://gnuwin32.sourceforge.net/packages/file.htm)
**   设置环境变量MAGIC=path\to\gnuwin32\share\misc\magic*   确保所有已安装的可执行文件/库都可以通过 PATH 访问*   通过 pip 安装 python-magic*

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-15T15:55:35.967

请尝试安装此软件包：

```
pip install python-magic-bin 
```*

# javascript - 如何在 d3.js 中绘制历史楣

> ID：14761964
> 
> 赞同：0
> 
> 时间：2013-02-07T22:09:14.127
> 
> 标签：javascript, d3.js

我有一个这样的 json 对象：

```
{
"data":{
"2012-12-29":[
    {"Dir":112.5,"Spd":2,"Spl":7,"Max":16},
    {...}
    {"Dir":"null","Spd":0,"Spl":1,"Max":null}
],
"2012-12-20":[
    {"Dir":22.5,"Spd":2,"Spl":7,"Max":16},
    {...}
    {"Dir":"null","Spd":0,"Spl":1,"Max":null}
],
"2012-12-31":[
    {"Dir":90,"Spd":2,"Spl":7,"Max":16},
    {...}
    {"Dir":"null","Spd":0,"Spl":1,"Max":null}
],
...
} 
```

我想在 X 轴上绘制每个日期，用圆圈表示每个日期。Y 值始终为：0，所有圆都在 X 轴上。

在我包含`D3.on("click",function (){...})`在每个圆圈上以显示内部数据之后。

在第一步中，我只创建了一个 DATE 数组：

```
var list=[];
for (var keydate in DATA) {
    list.push(keydate);
    i++;
} 
```

在我想画我的 DATE 但我不知道怎么画之后？

```
var svg = d3.select(container)
    .append("svg")

svg.selectAll("circle")
   .data(list)
   .enter()
   .append("circle") 
```

# javascript - 检索 gmail 联系人的照片

> ID：14761967
> 
> 赞同：1
> 
> 时间：2013-02-07T22:09:33.123
> 
> 标签：javascript, gmail

我正在尝试从 javascript 中检索我所有 gmail 联系人的照片图像。

使用[https://code.google.com/p/google-api-javascript-client/](https://code.google.com/p/google-api-javascript-client/)

当我尝试向图像 url 发出授权的 AJAX GET 请求时，我收到以下错误消息：

XMLHttpRequest 无法加载。Access-Control-Allow-Origin 不允许 Origin。

这就是我提出请求的方式：

```
$.ajax({ url: "https://www.google.com/m8/feeds/photos/media/atameem%40spokeo.com/16e8f6a1892842c7", data: authParams, success: function(data) { console.log(data); } }); 
```

我在浏览器网络选项卡中看到的带有访问令牌的 GET URL 是：

[https://www.google.com/m8/feeds/photos/media/atameem%40spokeo.com/16e8f6a1892842c7?state=&access_token=ya29.AHEGYGMYP-G_3FmAxzDuWD3a4j4_mBVY&token_type=Bearer&expires_in=3600&alt=json](https://www.google.com/m8/feeds/photos/media/atameem%40spokeo.com/16e8f6a1892842c7?state=&access_token=ya29.AHEGYGMYP-G_3FmAxzDuWD3a4j4_mBVY&token_type=Bearer&expires_in=3600&alt=json)

任何帮助将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:47:16.843

当您尝试从请求以外的其他域进行 ajax 调用时，会显示此错误。您不能进行跨域 ajax 调用来检索响应。请参阅：[https](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS) ://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS 。

但是，您可以设置标题以允许跨域资源共享 (CORS)：[http ://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing)

您也可以通过凭据请求任何文件：

```
$.ajaxSetup({
    type: "POST",
    data: {},
    dataType: 'json',
    xhrFields: {
       withCredentials: true
    },
    crossDomain: true
}); 
```

最新的主要浏览器支持 CORS。您可以通过以下代码段检查您的浏览器是否支持：

```
//Detect browser support for CORS
if ('withCredentials' in new XMLHttpRequest()) {
    /* supports cross-domain requests */
    document.write("CORS supported (XHR)");
}
else{
  if(typeof XDomainRequest !== "undefined"){
     //Use IE-specific "CORS" code with XDR
     document.write("CORS supported (XDR)");
  }else{
     //Time to retreat with a fallback or polyfill
     document.write("No CORS Support!");
  }
} 
```

# css - 将导入语句转换为内联样式标签中的链接标签

> ID：14761974
> 
> 赞同：2
> 
> 时间：2013-02-07T22:10:10.307
> 
> 标签：css, import

我正在尝试编写一个将`@import`语句转换为 `<link>`标签的脚本，我有两个问题：

1.  一个声明和其他样式声明可以在标签`@import`内共存吗？`<style>`例如：

    ```
    <style type="text/css">
        @import url(http://www.example.com/style.css);
        body {
            background: #FFF;
        }
        ..NUI_ContentFrameHeader_l {
            clear: both;
            height: 50px;
            margin: 0;
            color: black;
            background: url(/vpn/images/NUI_box_l.png) no-repeat left top;
            border: solid 0px #BBC6D6;
            overflow: hidden;
            letter-spacing: 0;
            padding: 0 0 0 15px;
        }
    </style> 
    ```

2.  `@import`如果标签的开头有多个语句`<style>`并且这不是范围样式标签，我们可以将`@import`语句转换为语句并将它们移动到标签`<link>`上方吗？`<style>`喜欢：

    ```
    <style type="text/css">
        @import url(http://www.example.com/style1.css);
        @import url(http://www.example.com/style2.css)
        body {
            background: #FFF;
        }
        ..NUI_ContentFrameHeader_l {
            clear: both;
            height: 50px;
            margin: 0;
            color: black;
            background: url(/images/NUI_box_l.png) no-repeat left top;
            border: solid 0px #BBC6D6;
            overflow: hidden;
            letter-spacing: 0;
            padding: 0 0 0 15px;
        }
    </style> 
    ```

    会变成：

    ```
    <link type="text/css" media="screen" rel="stylesheet"
                            href="http://www.example.com/style1.css" />
    <link type="text/css" media="screen" rel="stylesheet"
                            href="http://www.example.com/style2.css" />
    <style type="text/css" media="screen">
        body {
            background: #FFF;
        }
        ..NUI_ContentFrameHeader_l {
            clear: both;
            height: 50px;
            margin: 0;
            color: black;
            background: url(/images/NUI_box_l.png) no-repeat left top;
            border: solid 0px #BBC6D6;
            overflow: hidden;
            letter-spacing: 0;
            padding: 0 0 0 15px;
        }
    </style> 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:33:33.570

> @import 语句和其他样式语句可以在标签内共存吗？

是的。

> 如果标签开头有多个@import 语句，并且这不是一个作用域样式标签，我们可以将@import 语句转换为语句并将它们移动到标签上方吗？

是的。

由于阻塞文件加载，将语句转换为自己的样式表被认为是[最佳实践](https://www.stevesouders.com/blog/2009/04/09/dont-use-import/)——如果它们在自己的标签中作为单独的表格加载，它们可以由浏览器并行加载。`@import``@import``<style>`

# c# - 在 iphone 中获取重复电话号码的理想方法是什么 - MonoTouch

> ID：14761980
> 
> 赞同：0
> 
> 时间：2013-02-07T22:10:36.693
> 
> 标签：c#, iphone, ios, xamarin.ios, abaddressbook

我正在尝试在 iPhone 通讯录上获取重复的电话号码。我的问题是，我的 iPhone 上有 264 个联系人，这个过程需要 16 秒！我已经从 iTunes 购买了应用程序，并且没有时间做同样的过程。所以我相信我的方法是不正确的。我知道在 Xcode 中我应该使用 NSPredicate 。我试图用 c# 谓词做到这一点，但结果相同。以下是我获取重复电话号码的代码：

```
 ABAddressBook ab = new ABAddressBook ();
    OrderedDictionary persons = new OrderedDictionary ();

            foreach (ABPerson p in ab.GetPeople()) {

            foreach (var phoneNumber in p.GetPhones().GetValues()) {
                var duplicates = SearchByPhoneNumber (ab, phoneNumber);
                if (duplicates.Count > 1) {
                    if (!persons.Contains (phoneNumber)) {
                        persons.Add (phoneNumber, duplicates);
                    }
                }

            }
        }

     private  List<ABPerson> SearchByPhoneNumber ( ABAddressBook ab, string phoneNumber)
    {
        List<ABPerson> duplicatepeople = new List<ABPerson> ();
        phoneNumber = Regex.Replace (phoneNumber, "[^0-9]", "");

        var people = ab.Where(x=> x is ABPerson).Cast<ABPerson>()
        .Where((e)=> { return (e.GetPhones().Any((p)=>{return (Regex.Replace(p.Value,"[^0-9]", "")==phoneNumber); }));}).ToList ();

        return people;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:17:33.217

这在我的 iPhone 4s 上运行大约 150 毫秒。

```
 NSError err;
        ABAddressBook ab = ABAddressBook.Create(out err);
        Dictionary<string,List<string>> phones = new Dictionary<string,List<string>> ();

        ab.RequestAccess(delegate(bool granted,
                               NSError error) {
            if (granted)
            {
                foreach (ABPerson p in ab.GetPeople()) {
                    foreach (var phoneNumber in p.GetPhones().GetValues()) {
                        if (phones.ContainsKey(phoneNumber))
                        {
                            phones[phoneNumber].Add (p.FirstName + " " + p.LastName);
                        }
                        else
                        {
                            phones.Add (phoneNumber,new List<string>() { p.FirstName + " " + p.LastName });
                        }

                    }

                }

                var dupes = (from x in phones where x.Value.Count() > 1 select x);

                foreach(var d in dupes)
                {
                    Console.Write(d.Key + ": ");

                    foreach (string s in d.Value)
                    {
                        Console.Write(s + ", ");
                    }

                    Console.WriteLine();
                }

            }
        }); 
```

# signal-processing - 卷积运算是否用于 IIR 滤波器？

> ID：14761985
> 
> 赞同：0
> 
> 时间：2013-02-07T22:11:00.730
> 
> 标签：signal-processing

我是信号处理的新手。我理解离散卷积运算是用于FIR滤波器的：在卷积公式`y[n] = x[n] * h[n] = sum(x[k] x h[n-k])`中，右边显然没有`y[n]`。根据这个卷积运算的定义，我是否正确假设它一般**不**用于 IIR 滤波器，因为 IIR 滤波器可以`y[]`在右侧引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:00:17.630

信号处理的一个基本结果是任何 LTI 滤波器（FIR 或 IIR）都可以表示为输入与脉冲响应的卷积：

```
y[n] = x[n] * h[n] 
```

现在，FIR 滤波器（或“全零滤波器”）是`h[n]`有界支持的滤波器，即它具有*有限*（因此得名）数量的非零系数。因此，输出可以表示为输入的（有限）线性组合，或有限卷积。相比之下，IIR 具有无限系数，因此输出仍然是输入的卷积（或线性组合），但具有无限项。当然，如果必须以数字方式实现卷积，则除非具有有限数量的项，否则无法明确地做到这一点。

一个简单的 IIR 示例是`y[n] = y[n-1]/2 + x[n]`(1)

这个 IIR 滤波器的脉冲响应是一个递减指数：`h[n]= (1/2)^n (n>0)`，这意味着输入-输出可以表示为

`y[n] = x[n] + x[n-1]/2 + x[n-2]/4 + x[n-3]/8 + ....` (2)

这也可以通过检查获得。现在，第一种形式 (1) 是递归的，并且是以数字方式实现过滤器的自然方式（不是唯一的方式）。第二种形式 (2) 是非递归的（但有无限项）并明确显示卷积 `y[n] = x[n] * h[n]`；它在概念上很重要，但是，当然，这不是实现它的可行方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:32:08.467

虽然你的符号有点奇怪，但你关于 IIR 滤波器的陈述是正确的。IIR 滤波器是使用差分方程实现的，而不是卷积。

您可能会对这篇博文感兴趣，以帮助您入门：[http ://blog.bjornroche.com/2012/08/basic-audio-eqs.html](http://blog.bjornroche.com/2012/08/basic-audio-eqs.html)

# javascript - 为什么在我将 jQuery 包含到页面后，“位置”属性最终会出现在 Object.keys() 中？

> ID：14761987
> 
> 赞同：4
> 
> 时间：2013-02-07T22:11:05.487
> 
> 标签：javascript, jquery, html

我有这个代码：

```
<script>
    console.log( Object.keys( this ) );
</script>

<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>

<script>
    console.log( Object.keys( this ) );
</script> 
```

在 Firefox 中，控制台会记录以下内容：

```
[ "window", "document", "InstallTrigger", "console", "getInterface" ]
[ "window", "document", "InstallTrigger", "console", "getInterface", "location", "$", "jQuery" ] 
```

**现场演示：http:** [//jsfiddle.net/eX8jQ/](http://jsfiddle.net/eX8jQ/)

`Object.keys(this)`注意jQuery 执行后如何返回三个附加元素。我明白为什么`"$"`，并且`"jQuery"`被添加了，但是为什么`"location"`？

我还在 Chrome 和 IE10 中进行了测试。在两者中，只有`"$"`和`"jQuery"`被添加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-22T23:18:13.627

jQuery 1.9.1 在其内部初始化代码中包含以下内容：

```
var location = window.location; 
```

在顶级上下文中，`this`is `window`，所以您正在测试`Object.keys(window)`. 显然 Firefox 神奇地处理了该属性——除非被访问，否则它`window.location`不会显示在其中。`keys`所以上述赋值的一个副作用是让它出现在那里。

这个局部变量不在 jQuery 1.11.1 或 jQuery 2.1.1 中，所以简单地加载 jQuery 应该不会有这个副作用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T22:39:44.567

在 Firefox 中，Location 默认不在键中，但在 Chrome 和 IE 中，它一开始就在那里。在 Chrome 和 IE10 中对此进行测试：http: [//jsfiddle.net/eX8jQ/1/](http://jsfiddle.net/eX8jQ/1/)在您的小提琴中，您可以在 chrome 中看到 Location ，即它只是不在数组中的同一位置。

因为我必须包含代码才能发布这个......

```
<script>
    console.log( Object.keys( this ) );
</script> 
```

*我还没有在 IE10 中实际测试过这个，我目前无法访问它。*

# ruby - 使用 Ruby/Rake 实现 VMware Workstation 8 自动化？

> ID：14761989
> 
> 赞同：2
> 
> 时间：2013-02-07T22:11:14.137
> 
> 标签：ruby, rake, vmware, vmware-workstation

我正在考虑在我们的构建过程中进行更多的自动化；我们使用 TeamCity 和 rake 来完成构建任务。我们将我们的网站构建成一个 MSI，这就是我们 CI 系统的范围。我想将部署添加到自动化中。

我们使用 VMware Workstation，所以我想将构建任务添加到：

1.  将 VM 还原到某个快照。
2.  在 VM 上安装 MSI。
3.  在实际环境中运行一些验收测试。

有没有人对实现这一目标的最佳方法有任何建议？

我看过以下但不确定它们是否合适：

*   [Vixr](https://github.com/rhythmx/vixr)似乎可以通过我的 rake 任务使用，但我不确定，因为它已经很老了，而且我不知道与 Workstation 8 的兼容性。
*   [RVC](https://github.com/vmware/rvc)看起来不错，但我认为它与 VM Workstation 不兼容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:49:12.327

对于简单的任务，您应该考虑`vmrun.exe`在每个工作站安装文件夹中使用存在。

手册在这里：[vmrun 文档](http://vmware.com/pdf/vix160_vmrun_command.pdf)

# freemarker - Freemarker 如何将 HashMap 传递给 TemplateMethodModel

> ID：14761990
> 
> 赞同：0
> 
> 时间：2013-02-07T22:11:16.843
> 
> 标签：freemarker

我有一个实现 TemplateMethodModel 的 MyMethod 类。我需要将 HashMap 传递给 exec 函数的参数。

我怎样才能从 ftl 模板中做到这一点？

仅供参考，我已经尝试过 ${myMethod({"key":"value"})} 但大括号内不被接受..

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:33:52.867

您需要使用`TemplateMethodModelEx`, as`TemplateMethodModel`将参数转换为字符串（这是一个传统......）。（你仍然不会得到 a `HashMap`，而是 a `TemplateHashModelEx`。）

# c++ - ifstream 链接器错误

> ID：14761995
> 
> 赞同：1
> 
> 时间：2013-02-07T22:11:40.540
> 
> 标签：c++, file, file-io, include, undefined-reference

我正在尝试读取文件。我尝试在 read() 中使用 ifstream，但出现以下错误。

> 对`std::basic_ifstream<char, std::char_traits<char> >::basic_ifstream()' /home/ameya/Documents/computer_science/cs130B/prog2/prog2.cpp:24: undefined reference to`std::basic_ifstream >::~basic_ifstream()' prog2.o:(.eh_frame+0x6b) 的未定义引用：对 `__gxx_personality_v0' collect2 的未定义引用：错误：ld 返回 1 退出状态 make：*** [prog2] 错误 1

它表示对 ifstream 的未定义引用，但我将其包含在顶部，为什么会出现该错误？提前致谢

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ifstream>

using namespace std;

class DepthMap{
public:
  int merge(int numbers[]);
  int mergehelper(int left[], int right[]);
  void read();
};

int DepthMap::merge(int numbers[]){
  return -43;
}

int DepthMap::mergehelper(int left[], int right[]){
  return -43;
}

void DepthMap::read(){
  ifstream inputFile;
}

int main(int argc, char* argv[])
{
  DepthMap depth;

  printf("Here");
  return 0;
} 
```

这是我的 Makefile

```
CXX = g++
CXXFLAGS = -Wall

all: prog2

prog2: prog2.o

clean:
    rm -f prog2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:12:59.300

我相信你正在寻找的是

```
#include <fstream> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T22:15:34.657

`#include <fstream>`应该是这样。

你的`g++`好像坏了 为什么不安装`clang`？

以下是对您的 makefile 的一些建议更正：

```
CXX = g++
CXXFLAGS = -Wall

prog2: prog2.o
      g++ $(CXXFLAGS) prog2.o -o prog2
prog2.o: prog2.cpp
      g++ $(CXXFLAGS) prog2.cpp -o prog2.o
clean:
    rm -f prog2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T22:22:39.513

您正在使用`gcc`编译和链接而不是`g++`. 通过使用后者，它将确保您链接到 libstdc++.so 而无需显式添加它。

查看您的 Makefile 确认上述链接。

尽管您定义`CXX`为仅用于编译源文件的隐式规则的 g++。链接的隐含规则`CC`可能会退回到`gcc`. 请参阅GNU make[的隐式规则目录。](http://www.gnu.org/software/make/manual/html_node/Catalogue-of-Rules.html#Catalogue-of-Rules)

# javascript - 在滑块打开时交换图像

> ID：14761999
> 
> 赞同：0
> 
> 时间：2013-02-07T22:11:50.117
> 
> 标签：javascript, slider

在此站点[csr.steelcase.com](http://csr.steelcase.com)的主页上，当您单击“阅读更多”和滑块框上的向下箭头时，当它向下滑动并且类型更改为“关闭”时，我正试图使其到达我试图使向下箭头变成向上箭头。

控制网站这一部分的代码在 footer.php 中：

```
 $('.slide-read-more,.slide-tab-down').click(function (e) {
      mySlider.pause();
      $('.slide-content').slideToggle('slow', 'swing', function () {
          if ($('.slide-content').is(":hidden")) {
              $('.slide-read-more').text('| | Read More | |');
          } else {
              $('.slide-read-more').text('| | Close | |');
          }
      });
      e.preventDefault();
  }); 
```

我创建了一个新的向上箭头图像并将其上传到图像文件夹，并为新的向上箭头创建了一个 css 规则，我只是不知道如何让图像换出。

```
.slide-tab-up {display:block; width:40px; height:43px; margin:0 0 0 358px; background:url(images/tab-upturn.png) no-repeat;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:14:51.270

在您的点击功能中，尝试添加

```
$('.slide-tab-down').toggleClass('slide-tab-up'); 
```

只要您的`.slide-tab-up`样式覆盖您的`.slide-tab-down`样式，这应该可以工作。

另一方面，我建议将也放在`e.preventDefault()`函数的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:21:29.730

我建议将另一个泛型类添加到`<a>`包含该图像的类中。让我们称之为“slider-img”。所以在你下面的标记中：

```
<div class="slide-read-more-wrap" style="text-align:center;-webkit-backface-visibility: hidden;">
        <a title="Read More" class="slide-read-more">| | Read More | |</a>
        <a href="#" title="" class="slide-tab-down slider-img"></a>
</div> 
```

然后在您的 JS 中，在您的 slideToggle 函数中，您只需要这一行来切换 .slider-img 元素上的 slide-tab-down/slide-tab-up 类：

```
$('.slide-content').slideToggle('slow','swing', function(){
        $('.slider-img').toggleClass('slide-tab-up').toggleClass('slide-tab-down');

        if ($('.slide-content').is(":hidden")) {
              $('.slide-read-more').text('| | Read More | |');
        } else {
              $('.slide-read-more').text('| | Close | |');
        }
}); 
```