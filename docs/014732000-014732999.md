# StackOverflow 问答 14732000-14732999

# php - Magento Uncaught SoapFault 异常：[0] 无法在 /opt/local/apache2/htdocs/code/ 中的服务器上加载 Soap 扩展

> ID：14732009
> 
> 赞同：1
> 
> 时间：2013-02-06T14:56:28.593
> 
> 标签：php, apache, magento, soap, soap-client

我现在很迷茫。我正在尝试使用 Soap 客户端，但出现以下错误

```
Uncaught SoapFault exception: [0] Unable to load Soap extension on the server in /opt/local/apache2/htdocs/code/import.php 
```

在 import.php 里面

# 导入.php

```
$client = new SoapClient('http://mymagentowebsite.com/api/soap/?wsdl');
$session = $client->login('api_master', 'api123'); 
```

当我进入我的 phpinfo 时，我可以看到我的肥皂客户端已启用 ![在此处输入图像描述](../Images/6203ade5bf7d8074c6b2ed6650dc2d2c.png)

我正在使用 Macports，并且我也安装了肥皂端口扩展

以下是我在 php.ini 中找到的内容

```
extension=php_soap.dll
[soap]
; Enables or disables WSDL caching feature.
; http://php.net/soap.wsdl-cache-enabled
soap.wsdl_cache_enabled=1

; Sets the directory name where SOAP extension will put cache files.
; http://php.net/soap.wsdl-cache-dir
soap.wsdl_cache_dir="/tmp"

; (time to live) Sets the number of second while cached file will be used
; instead of original one.
; http://php.net/soap.wsdl-cache-ttl
soap.wsdl_cache_ttl=86400

; Sets the size of the cache limit. (Max. number of WSDL files to cache)
soap.wsdl_cache_limit = 5 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T22:46:51.953

我已经想通了。我的本地机器安装了 SOAP CLIENT 和 SERVER 扩展，但我调用的服务器没有。我不得不去远程服务器并安装soap扩展。我从以下得到了我的消息来源。

我很困惑，因为我认为错误指的是我的本地机器，但它指的是我的远程机器。

[PHP SOAP 致命错误消息](https://stackoverflow.com/questions/7235446/php-soap-fatal-error-message)

# xquery - 如何从 xquery 正确生成 xml

> ID：14732010
> 
> 赞同：1
> 
> 时间：2013-02-06T14:56:29.140
> 
> 标签：xquery

我是 xquery 的新手，正在尝试阅读有关使用该工具的不同参考资料。我一直在尝试测试并尝试生成一些 xml 格式的消息，但这让我感到困惑。这是我的 xQuery 代码：

**示例 XQuery**

```
declare variable $requestBody as element() external;
declare function VerifyOrderDetailTransformation($requestBody as element())
as element() {
    <msg>
        <header>
            <headtitle>This is the title</headtitle>
        </header>
        <dbody>
            {GenerateEquipmentListNodes($requestBody)} 
        </dbody>
    </msg>
};

declare function GenerateEquipmentListNodes($requestBody as element())
as element()* {

    let $titleList := (
        for $e in $requestBody//bookstore//book
            let $dTitle := $e/title/text()
            return 
               <theTitle>{$dTitle}</theTitle>
        )

    return 
       <dTitleList>
           {$titleList}
       </dTitleList>
};

VerifyOrderDetailTransformation($requestBody) 
```

**示例 XML**

```
<bookstore>

<book category="COOKING">
    <title lang="en">Everyday Italian</title>
    <author>Giada De Laurentiis</author>
    <year>2005</year>
    <price>30.00</price>
</book>

<book category="CHILDREN">
    <title lang="en">Harry Potter</title>
    <author>J K. Rowling</author>
    <year>2005</year>
    <price>29.99</price>
</book>

<book category="WEB">
    <title lang="en">XQuery Kick Start</title>
    <author>James McGovern</author>
    <author>Per Bothner</author>
    <author>Kurt Cagle</author>
    <author>James Linn</author>
    <author>Vaidyanathan Nagarajan</author>
    <year>2003</year>
    <price>49.99</price>
</book>

<book category="WEB">
    <title lang="en">Learning XML</title>
    <author>Erik T. Ray</author>
    <year>2003</year>
    <price>39.95</price>
</book>

</bookstore> 
```

以下是在 XML 上运行 xQuery 生成的输出：

**电流输出**

```
<msg> 
    <head> 
        <title>This is the title</title> 
    </head> 
    <body> 
        <dTitleList/> 
    </body> 
</msg> 
```

**预期产出**

```
<msg> 
    <head> 
        <title>This is the title</title> 
    </head> 
    <body> 
        <dTitleList> 
        <theTitle>Everyday Italian</theTitle>
        <theTitle>Harry Potter</theTitle>
        <theTitle>XQuery Kick Start</theTitle>
        <theTitle>Learning XML</theTitle>
        <dTitleList/> 
    </body> 
</msg> 
```

* * *

我的问题是，我可能错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:46:54.373

您的输入存在一些问题：您正在查询此 XML：

```
<bookstore>
  <book>
    <!-- snip -->
  </book>
  <!-- snip -->
</bookstore> 
```

XPath 查询的第一部分，即`$queryBody//bookstore`查找所有具有`<bookstore/>`以下元素的后代元素 - 返回空结果。`$queryBody//bookstore`也不会这样做，因为上下文已经在`<bookstore/>`元素上。

出于这个原因， ommit `//bookstore`，所以你的 this 应该是`$queryBody//book`。

将此函数与其中已更改的 XPath 一起使用：

```
declare function local:GenerateEquipmentListNodes($requestBody as element())
as element()* {

    let $titleList := (
        for $e in $requestBody//book
            let $dTitle := $e/title/text()
            return 
               <theTitle>{$dTitle}</theTitle>
        )

    return 
       <dTitleList>
           {$titleList}
       </dTitleList>
}; 
```

* * *

还有一点：您应该将自己的函数放入`local:`函数命名空间或定义自己的函数。不鼓励使用默认命名空间，并且不与所有处理器兼容。我将其更改为`local:`-namespace。

# markdown - 将 ID 或 Class 添加到 Markdown-element

> ID：14732028
> 
> 赞同：35
> 
> 时间：2013-02-06T14:57:26.987
> 
> 标签：markdown, multimarkdown

是否可以将 id 或类添加到（多）markdown 元素？

例如表格、段落或代码块？

我想用 css 设置表格的样式，但没有以下工作：

```
[captionid][This is the caption, not the table id]
| First Header  | Second Header |
| ------------- | ------------- |
| Content Cell  | Content Cell  |
| Content Cell  | Content Cell  | 
```

* * *

```
| First Header  | Second Header |
| ------------- | ------------- |
| Content Cell  | Content Cell  |
| Content Cell  | Content Cell  |
[captionid][This is the caption, not the table id] 
```

* * *

```
| First Header  | Second Header |
| ------------- | ------------- |
| Content Cell  | Content Cell  |
| Content Cell  | Content Cell  |
[tablecaption](#tableid) 
```

* * *

```
<div class="special_table">

| First Header  | Second Header |
| ------------- | ------------- |
| Content Cell  | Content Cell  |
| Content Cell  | Content Cell  |

</div> 
```

网上找不到别的了。。

我不是说 github 或 stackoverflow 风味的降价顺便说一句。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-09-21T14:13:28.103

出于 CSS 的目的，您可以将 id 添加到前一个元素，然后使用选择器来更改以下元素。

像这样的降价：

```
<div class="special_table"></div>

| First Header  | Second Header |
| ------------- | ------------- |
| Content Cell  | Content Cell  |
| Content Cell  | Content Cell  | 
```

像这样的CSS：

```
div.special_table + table tr:nth-child(even) {background: #922} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-18T22:56:20.570

您可以通过将类或 id 放在元素之后的大括号内来向元素添加自定义类或 id，如下所示：`{#id .class}`

例如：

```
[Read more](http://www.stackoverflow.com "read more"){#link-sf .btn-read-more} 
```

将呈现如下：

`<a href="http://www.stackoverflow.com" title="read more" id="link-sf" class="btn-read-more">Read more</a>`

你可以参考[https://michelf.ca/projects/php-markdown/extra/#spe-attr](https://michelf.ca/projects/php-markdown/extra/#spe-attr)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-28T22:08:46.897

经过一番研究，我想出了一个简单直接的解决方案:)

我在两个 HTML 占位符之间放置了表格，并使用 jQuery 来微调这些，并且只根据需要调整那些：

## 表的开头

```
<div class="tables-start"></div> 
```

## 桌子

`id | name ---|--- 1 | London 2 | Paris 3 | Berlin`

## 表尾

```
<div class="tables-end"></div> 
```

## jQuery：通过添加类来微调表

```
<script type="text/javascript">
(function() {
    $('div.tables-begin').nextUntil('div.tables-end', 'table').addClass('table table-bordered');
})();
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-18T21:33:54.237

我[只使用文档](https://pmarsceill.github.io/just-the-docs)，解决方案有点不同。DAMIEN JIANG 为我指明了正确的方向。这对我有用：

`[[2]](references#2){: #references-2 }`

呈现如下：

`<a href="references#2" id="references-2">[2]</a>`

# c# - 从客户端接收文件并在 C# 中保存到服务器中的文件

> ID：14732030
> 
> 赞同：1
> 
> 时间：2013-02-06T14:57:38.073
> 
> 标签：c#, sockets, file-transfer

我想要做的是接收从客户端发送的文件。但是在下面显示的问题行中，我得到了一个异常

> *System.IO.DirectoryNotFoundException：找不到路径“C:\Users\asd\Desktop\”的一部分。*

这是我的服务器代码：

```
IPEndPoint ipEnd;
Socket sock;
byte[] clientData = new byte[1024 * 5000];
ipEnd = new IPEndPoint(IPAddress.Any, 5000);
sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);
sock.Bind(ipEnd);
sock.Listen(5000); 
Socket clientSock=sock.Accept();                
int receivedBytesLen = clientSock.Receive(clientData);
int fileNameLen = BitConverter.ToInt32(clientData, 0);
string fileName = Encoding.ASCII.GetString(clientData, 4, fileNameLen);
BinaryWriter bWrite = new BinaryWriter(File.Open(@"C:\Users\asd\Desktop\"+           fileName,FileMode.Append));//problem Line
bWrite.Write(clientData, 4 + fileNameLen, receivedBytesLen - 4 - fileNameLen);
bWrite.Close();
clientSock.Close();               
MessageBox.Show("recieved..."); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:04:33.097

我不会将您的代码保存到桌面，如果您的代码以与您指定的桌面不同的用户身份运行，您可能会遇到权限问题。将您的代码更改为以下内容，看看是否可以解决您的问题

```
string destFolder = @"C:\ReceivedFiles"
if (Directory.Exists(destFolder) == false)
    Directory.CreateDirectory(destFolder);
BinaryWriter bWrite = new BinaryWriter(File.Open(Path.Combine(destFolder, FileName), FileMode.Append)); 
```

* * *

关于您的代码的其他问题：

```
int receivedBytesLen = clientSock.Receive(clientData); 
```

首先，**这并不能保证您获得了所有数据**。如果有效负载大于一个数据报，则需要`Receive`多次调用。知道需要调用多少次的唯一方法是，您需要事先以某种方式发送整个二进制文件的长度，或者在文件完成客户端后关闭连接并循环构建缓冲区（或将其写出来） in) 直到 Receive 返回 0。

其次，您还应该使用`using`它来确保您的类在发生异常时得到正确处理

```
using(Socket clientSock=sock.Accept())
{
    //This needs to be redone, see my first point
    int receivedBytesLen = clientSock.Receive(clientData);
    int fileNameLen = BitConverter.ToInt32(clientData, 0);
    string fileName = Encoding.ASCII.GetString(clientData, 4, fileNameLen);
    using(BinaryWriter bWrite = new BinaryWriter(File.Open(@"C:\Users\asd\Desktop\"+           fileName,FileMode.Append)))
    {
        bWrite.Write(clientData, 4 + fileNameLen, receivedBytesLen - 4 - fileNameLen);
    }
} 
```

# expression - 在记事本++中删除“\”字符后的换行符“\n”

> ID：14732032
> 
> 赞同：0
> 
> 时间：2013-02-06T14:57:43.523
> 
> 标签：expression, notepad++, line-breaks

我有一个 CSV 文件，其中包含大约 100'000 条记录，其中一些在导出期间已在源数据中的“\”字符处分成多行。谁能帮我用一个表达式来删除数据中“\”字符后面的任何换行符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:22:15.460

1.  在“替换”对话框中，从“搜索模式”部分（对话框左下方）选择“扩展”。
2.  在“查找内容”框中键入：`\\\n`
3.  在“替换为”框中键入：`\\`
4.  点击“全部替换”
5.  享受

![查找和替换对话框](../Images/73f9cc36a6e42e954f5bf65e56f8d599.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:01:29.777

下午好。您是否尝试从应用程序“Notepad ++”中单击“**编辑**”菜单和“**转换换行符**”？

![在此处输入图像描述](../Images/6678783fd0a1304fa5c2771a3f4f3168.png)

# json - 是否可以让球衣在不使用 bean 的情况下读取请求正文的 json 变量？

> ID：14732036
> 
> 赞同：0
> 
> 时间：2013-02-06T14:58:03.490
> 
> 标签：json, jersey

在 jersey 中，Java bean 可以从请求正文中自动反序列化，但是如果我想在不创建特殊类型的情况下读取参数怎么办。是否可以使用注释来做到这一点。

我目前的代码是：

```
public class RequestData {
    String param;
}

...

public Response readData(RequestData data) {
    data.getParam();
    ...
} 
```

我希望它是这样的：

```
public Response readData(@RequestParam("param") String param) {
    ...
} 
```

如果它尚未清除输入 JSON 是：

```
{
    "param":"some value"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:02:37.153

您的输入 JSON 的类型是`Map<String, String>`这样的，如果您想要无差别的输入，您可以使用它作为您的请求参数并读取您需要的值。

请注意，它`@RequestParam`查看的是请求参数而不是正文，所以它是一个不同的野兽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:43:22.423

为此，您可以让 Jersey 按原样（根据注释）传递 String，然后使用 Jackson 对其进行数据绑定`ObjectMapper`（Jersey 在内部用于 JSON 绑定）：

```
Map<String,Object> map = objectMapper.readValue(param, Map.class); 
```

要访问`ObjectMapper`，您可以在资源类中使用 JAX-RS 注入注释（`@Context`我认为？）：

```
@Context
private ObjectMapper objectMapper; 
```

# java - Axis2 生成的服务创建了错误的请求

> ID：14732037
> 
> 赞同：1
> 
> 时间：2013-02-06T14:58:07.167
> 
> 标签：java, web-services, axis2

我使用axis2-wsdl2code-maven-plugin（1.4.1）生成了一些java（1.5）WS类。当我使用这些时，发生了一些奇怪的事情，我根本不明白发生了什么。

问题是我调用了一种方法，但发生的实际 Web 服务调用是不同的。

```
ConfigServiceStub service = new ConfigServiceStub(URL);

ServiceRequest request = new ServiceRequest();
request.setProcessId(processId);
request.setServiceCode(BigInteger.valueOf(113));

service.removeService(request); 
```

当我运行此代码时，实际发生的是对`getServiceDetails`. 我不明白为什么。以下结果会导致正确的 Web 服务调用。

```
service.getServiceDetails(request); 
```

我在 XSD 中的重用是否有问题，或者这里发生了什么？

* * *

这是相关的 WSDL 和 XSD：

**捆绑**

```
<operation name="getServiceDetails">
    <soap:operation soapAction="http://api.nwn.no/webservices/ProductConfigurator/getServiceDetails" />
    <input><soap:body /></input>
    <output><soap:body /></output>
    <fault name="fault"><soap:fault name="fault" /></fault> 
</operation>

<operation name="removeService">
    <soap:operation soapAction="http://api.nwn.no/webservices/ProductConfigurator/removeService" />
    <input><soap:body /></input>
    <output><soap:body /></output>
    <fault name="fault"><soap:fault name="fault" /></fault>     
</operation> 
```

**端口类型**

```
<operation name="getServiceDetails">
    <input message="tns:getServiceDetailsRequest" />
    <output message="tns:getServiceDetailsResponse" />
    <fault message="tns:fault" name="fault" />          
</operation>

<operation name="removeService">
    <input message="tns:removeServiceRequest" />
    <output message="tns:removeServiceResponse" />
    <fault message="tns:fault" name="fault" />      
</operation> 
```

**信息**

```
<message name="getServiceDetailsRequest">
    <part name="body" element="tns:getServiceDetailsRequest" />
</message>
<message name="getServiceDetailsResponse">
    <part name="body" element="tns:getServiceDetailsResponse" />
</message>

<message name="removeServiceRequest">
    <part name="body" element="tns:removeServiceRequest" />
</message>
<message name="removeServiceResponse">
    <part name="body" element="tns:removeServiceResponse" />
</message> 
```

**架构**

```
<xsd:element name="getServiceDetailsRequest" type="ServiceRequest" />
<xsd:element name="getServiceDetailsResponse" type="ServiceResponse" />

<xsd:element name="removeServiceRequest" type="ServiceRequest" />
<xsd:element name="removeServiceResponse" type="ServiceConfigurationResponse" />

<xsd:complexType name="ProcessRequest">
    <xsd:sequence>
        <xsd:element ref="processId" />
    </xsd:sequence>
</xsd:complexType>

<xsd:complexType name="ServiceRequest">
    <xsd:complexContent>
        <xsd:extension base="ProcessRequest">
            <xsd:sequence>
                <xsd:element name="serviceCode" type="ServiceCode" />
            </xsd:sequence>
        </xsd:extension>
    </xsd:complexContent>
</xsd:complexType> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:32:34.777

你能确定 SOAPAction 的生成值吗？它应该是不同的。

您应该考虑不要为不同的操作重用 XML 元素。它不符合 WS-I。对于 WS-I 兼容的服务，SOAPAction 不是强制性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:25:39.210

另一种选择是使用 databindingName 参数使用另一个数据绑定，如下所述：

[http://axis.apache.org/axis2/java/core/tools/maven-plugins/maven-wsdl2code-plugin.html](http://axis.apache.org/axis2/java/core/tools/maven-plugins/maven-wsdl2code-plugin.html)

# vb.net - 如何根据组合框中选择的选项切换到表单？

> ID：14732038
> 
> 赞同：0
> 
> 时间：2013-02-06T14:58:10.473
> 
> 标签：vb.net, visual-studio-2010

我在 vb 2010 中有一个 Windows 窗体应用程序，其中包含一个组合框和一个按钮。要显示的下一个表单取决于用户选择的选项。如果单击按钮，我如何放置此代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:02:55.520

这是一个如何执行此类操作的示例：

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Dim nextForm As Form = Nothing
    Select Case ComboBox1.SelectedText
        Case "Option 1"
            nextForm = New Form2()
        Case "Option 2"
            nextForm = New Form3()
    End Select
    If nextForm IsNot Nothing Then
        nextForm.Show()
    End If
End Sub 
```

# clickonce - 如何在不提示用户的情况下安装 ClickOnce 应用程序？

> ID：14732040
> 
> 赞同：7
> 
> 时间：2013-02-06T14:58:17.367
> 
> 标签：clickonce

有没有办法在不提示用户的情况下安装 ClickOnce 应用程序？我说的是用户第一次运行应用程序时得到的“运行/不运行”。

[这里](http://msdn.microsoft.com/en-us/library/ms996418.aspx)似乎有一些线索，但我相信这是关于跳过“海拔”（UAC）和安全提示，而不是实际的初始“运行/不运行”屏幕。

我只能找到有关如何静默更新过去安装的应用程序的信息，但没有找到有关第一次静默安装应用程序的信息。

我还发现[这篇文章](https://stackoverflow.com/questions/1762875/automating-clickonce-deployment-with-security-certificates-etc-such-that-cl)似乎是相关的，但同样，不确定我们是否在谈论相同的用户提示......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-11T14:20:42.333

可以避免“运行”/“不运行”提示，尽管您仍然存在实际将文件复制给用户的问题，这通常需要他们通过链接启动 .application。但是，您可以通过登录脚本或类似的方式启动它。大概您已经以某种方式解决了该问题，因为它暗示了您的问题。您链接到的另一个问题围绕着这个问题徘徊，但它并没有真正让您一路走好。

我知道您可以绕过“运行”/“不运行”提示，因为我刚刚使用 ClickOnce 成功完成了它，我们将其部署为自助服务终端机器上的自定义 shell。关键是 ClickOnce 必须由受信任的发布者签名。如果您在客户端机器上配置了正确的东西，即使是自签名也是可以的。

因此，让网络管理员推出一个信任用于签署您的应用程序的代码签名证书的组策略。这里有关于如何在 TechNet 上执行此操作的信息：[http](http://technet.microsoft.com/en-us/library/cc770315%28v=WS.10%29.aspx) ://technet.microsoft.com/en-us/library/cc770315(v=WS.10).aspx ，在此简要转载：

1.  打开组策略管理控制台。

2.  查找现有 GPO 或创建新 GPO 以包含证书设置。确保 GPO 与您希望其用户受策略影响的域、站点或组织单位相关联。

3.  右键单击 GPO，然后选择编辑。组策略管理编辑器打开，并显示策略对象的当前内容。

4.  在导航窗格中，打开计算机配置\Windows 设置\安全设置\公钥策略\受信任的发布者。

5.  单击操作菜单，然后单击导入。

6.  按照证书导入向导中的说明查找并导入证书。

7.  如果证书是自签名的，并且无法追溯到受信任的根证书颁发机构证书存储中的证书，那么您还必须将证书复制到该存储。在导航窗格中，单击受信任的根证书颁发机构，然后重复步骤 5 和 6 以将证书副本安装到该存储。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-30T12:23:45.683

如何创建自定义 ClickOnce 安装程序？[http://msdn.microsoft.com/en-us/library/dd997001.aspx](http://msdn.microsoft.com/en-us/library/dd997001.aspx)

更新链接（2016 年 10 月 6 日）

[演练：为 ClickOnce 应用程序创建自定义安装程序](https://msdn.microsoft.com/en-us/library/dd997001.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-05-17T14:47:07.343

除了 MikeBazs Answer，我想提供以下“解决方法”，它使 Click-Once-Application 的安装“非交互式”和“几乎无声”（用户在安装过程中看到进度窗口，没有点击需要和/或可能）

有一些“问题”需要考虑，但如果您遵循本指南，结果应该是您所需要的：

1.)**签署您的应用程序：**在 Visual Studio 中，您可以使用自己的证书轻松签署您的应用程序，这没什么大不了的。

2.）**分发证书：**为了避免对话框，如果应该安装应用程序，您需要将您的证书分发到任何机器上的以下商店（为此使用 GPO）：`Trusted Publishers`和`Trusted Root Certification Authorities`

**现在，用户只需单击即可安装应用程序 - 没有安全问题。**但我们想要零点击：

3.) 创建一个位于服务器上的 powershell 脚本，该脚本调用应用程序的 setup.exe（如果尚未安装）：

```
$appInfo = Get-ChildItem HKCU:\Software\Microsoft\Windows\CurrentVersion\Uninstall | foreach-object {Get-ItemProperty $_.PsPath}
$displayName = $appInfo | ? { $_.displayname -eq "MyApplicationName" } | select displayName

if ($displayName -eq $null){
  # MyApplicationName not installed, install! 
  Start-Process "\\server\share\MyApplication\Application\setup.exe"
} 
```

**现在，用户可以执行该脚本，只需安装一次，无需进一步确认。**但应用程序在安装后启动。

4.)**修改应用程序的源代码：**我使用了一个虚拟文件来检测应用程序的首次运行。如果它是第一次运行，（即安装后）我只是再次关闭它：

```
private void Form1_Load(object sender, EventArgs e)
    {
        //first run? That's a initial deployment, close application.
        if (!File.Exists("C:\\some\\static\\path\\notfirstrun.dat"))
        {
            File.WriteAllText("C:\\some\\static\\path\\notfirstrun.dat", "1");
            Application.Exit();
        } 
```

**现在，用户可以执行该脚本，只需安装一次，无需进一步确认，并且应用程序在安装后不会“自动启动”。**

但我们也想避免“点击”：

如果我们在 Startup-Folder 中设置 powershell 脚本 - 它会弹出，这很难看。如果我们将其设置为 Login-Script，它不会在用户上下文中运行，而这是 Click-Once 所必需的。

作为“这个”问题的解决方法，您可以将其包装在`vbs`脚本中，调用 powershell 脚本。请注意，这是在用户上下文中执行的，因此用户需要权限才能执行 powershell-scripts：

```
Dim objShell
Set objShell=CreateObject("WScript.Shell")

strCMD="powershell.exe -sta -noProfile -NonInteractive -nologo -ExecutionPolicy Bypass -f \\server\share\scripts\install_App.ps1" 
objShell.Run strCMD,0,True 
```

最后，使用 GPO 将您的 vbs 脚本部署到任何用户的启动文件夹中。

用户将看到的只是“安装”进度。

简而言之：

*   签署您的代码
*   分发您的证书
*   使用 powershell 脚本触发安装
*   将该 powershell 脚本包装在一个不可见的 vbs 脚本中
*   将 vbs 脚本部署到每个用户的启动文件夹。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-25T07:46:54.183

如果不提示用户，就无法安装 ClickOnce 应用程序。如果您希望用户能够双击它，并且它只是安装而无需与用户进行验证，请不要使用 ClickOnce。坦率地说，根据我的经验，只有在企业环境中使用 SMS 推送的恶意软件和程序包才会安装，而不会向用户发出任何提示。

# git - 在 Git 中合并冲突案例

> ID：14732044
> 
> 赞同：0
> 
> 时间：2013-02-06T14:58:39.270
> 
> 标签：git

我刚刚开始使用 Git，之前使用 CVS 进行版本控制。

有人可以解释一下如何处理 Git 中的合并冲突情况吗？在这种情况下要遵循的标准程序是什么。

执行以下步骤后，我遇到了一种情况，

1.  `git add`我已经使用和提交了一些文件到我的本地存储库中`git commit`
2.  后来，当我尝试将本地 repo 更改推送到远程 repo 时，它会因*非快进错误*而失败，并提示我在推送前拉取。
3.  所以我试图`git pull`从远程仓库中获取最新的信息到我的本地仓库中。拉失败，说有合并冲突。

假设我从远程拉入本地仓库，然后执行第 1 步（提交文件）。如果其他人在我推送到远程仓库之前推送了他们的更改会发生什么。我相信以合并结尾的推送是一种常见的情况。如何处理这些情况？

我假设拉涉及获取+合并。就我而言，自动合并似乎失败了。在上述情况下我该怎么办？还请告诉我如何避免陷入这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:15:28.260

当你有冲突的文件时，git 会在每个冲突的文件中插入冲突标记。冲突标记包含来自两个分支的代码，如下所示：

```
 <<<<<<<<< LOCAL_BRANCH_NAME
 local code goes here
 ==========
 merge branch code goes here
 >>>>>>> MERGE_SHA 
```

当您执行 git status 时，您会看到这些文件的状态为“都已修改”，这些文件是冲突的。从技术上讲，解决这些问题所需要做的就是 do `git add file`，但显然如果这就是你所做的*一切*，你的代码就会被搞砸。

解决冲突的最简单方法是使用`git mergetool`. 当文件发生冲突时运行`git mergetool`，git 会询问您要使用哪个合并工具，它支持很长的列表，我首选的工具是 kdiff3。 `git`然后将引导您浏览每个冲突的文件，如果您的工具支持它，则使用 3 路差异（强烈推荐，它使事情变得更容易）。

正如评论中未收集的建议，当你开始时，阅读[git 书是必须的。](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging#)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:02:45.253

这是我如何进行 git 提交的快速列表：

1.  `git clone <repository url>`
2.  做出改变
3.  `git stash`：这会将您未提交的更改存储在临时缓存中（并暂时将它们从工作目录中删除，因此您有一个干净的副本）
4.  `git pull`获取最新的存储库版本
5.  `git stash pop`将隐藏的更改应用于本地存储库（并将它们从存储中删除）；这可能会产生冲突，就像合并或变基一样
6.  修复任何冲突
7.  `git add <changed files>`
8.  `git commit`,`-m`用于提供短消息或将其保留以打开编辑器
9.  `git push`将您的更改发布到远程

他们避免您遇到的问题的方法是在拉取之前存储您的更改，然后在拉取完成后弹出存储。

# arrays - 将数组中的“NULL”字符串更改为数组perl中的undef

> ID：14732049
> 
> 赞同：2
> 
> 时间：2013-02-06T14:58:54.320
> 
> 标签：arrays, perl

我正在从用作参数列表的数据文件构建一个数组到缓存的 SQL 语句。这适用于针对 Oracle 数据库运行的 perl DBI。

例如：

```
@params = ("This", "that", "NULL", "finish"); 
```

我需要将其更改为：

```
@params = ("This", "that", undef, "finish"); 
```

我已经对此进行了谷歌搜索，并建议使用 s/// 进行字符串替换。我不知道如何在给定条件下取消定义数组中的元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T15:01:53.000

```
for (@params) { $_ = undef if $_ eq 'NULL'; } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T15:02:29.213

`@params = map { $_ eq 'NULL' ? undef : $_ } ("This", "that", "NULL", "finish");`应该这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T15:13:54.410

这可以非常简单地使用以下`for`提供的列表循环来完成`grep`：

```
undef $_ for grep $_ eq 'NULL', @params; 
```

# jquery - 在一页上使用两个 Jquery 幻灯片

> ID：14732051
> 
> 赞同：0
> 
> 时间：2013-02-06T14:58:58.607
> 
> 标签：jquery

我是使用 Jquery 的新手。我知道关于同一主题有很多不同的问题，但这些建议似乎都没有帮助。有人可以帮我写代码吗。

这是我的代码：

```
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script src="P1js/jquery.rs.slideshow.js"></script>
  <script src="L1js/jquery.rs.slideshow.js"></script>

  <script>
                $(document).ready(function () {
                $('.rs-slideshowP1').rsfSlideshow();
                });

                $(document).ready(function () {
                $('.rs-slideshowL1').rsfSlideshow();
                });
                </script>

</head>
<body>

      <div id="slideshowP1" class="rs-slideshowP1">
            <div class="slide-containerP1">
                <img src="P1images/0.jpg" />

            </div>
            <ol class="slidesP1">
                <li>
                    <a href="P1images/0.jpg"></a>
                </li>
                <li>
                    <a href="P1images/1.jpg"></a>
                </li>
                <li>
                    <a href="P1images/2.jpg"></a>
                </li>
                <li>
                    <a href="P1images/3.jpg"></a>
                </li>
                <li>
                    <a href="P1images/4.jpg"></a>
                </li>
                <li>
                    <a href="P1images/5.jpg"></a>
                </li>
            </ol>

    </div>

<div id="slideshowL1" class="rs-slideshowL1">
            <div class="slide-containerL1">
                <img src="L1images/1.jpg" />

            </div>
            <ol class="slidesL1">
                <li>
                    <a href="L1images/1.jpg"></a>
                </li>
                <li>
                    <a href="L1images/2.jpg"></a>
                </li>
                <li>
                    <a href="L1images/3.jpg"></a>
                </li>
                <li>
                    <a href="L1images/4.jpg"></a>
                </li>
                <li>
                    <a href="L1images/5.jpg"></a>
                </li>
                <li>
                    <a href="L1images/6.jpg"></a>
                </li>
                <li>
                    <a href="L1images/7.jpg"></a>
                </li>
                <li>
                    <a href="L1images/8.jpg"></a>
                </li>
                <li>
                    <a href="L1images/9.jpg"></a>
                </li>
                <li>
                    <a href="L1images/10.jpg"></a>
                </li>
                <li>
                    <a href="L1images/11.jpg"></a>
                </li>
                <li>
                    <a href="L1images/12.jpg"></a>
                </li>
            </ol>

 </div> 
```

我真的很感谢任何可以帮助我的人。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:16:57.337

虽然我无法理解您面临的问题，但这可能会对您有所帮助..

```
 <script type="text/javascript">
                $(document).ready(function () {
                   $('.rs-slideshowP1').rsfSlideshow();
                });

                var j=jQuery.noConflict();

                j(document).ready(function () {
                   j('.rs-slideshowL1').rsfSlideshow();
                });
            </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:04:55.373

只需通过他们的唯一标识符（即）通过他们的 id 来引用他们。如果您仍然遇到问题，请告诉我们您收到的错误消息到底是什么

# android - Android 谷歌地图唯一标识标记 onInfoWindowClick

> ID：14732052
> 
> 赞同：2
> 
> 时间：2013-02-06T14:59:00.773
> 
> 标签：android, google-maps-markers, android-maps, google-maps-android-api-2

嗨，我正在使用 google android maps v2 并向地图添加一堆标记，但是我需要向标记对象添加其他数据，以便稍后在 onInfoWindowClick 函数中调用。

我目前有一个 MarkerManager 单例类，它维护一个并发的场所列表，但是在 onInfoWindowClick 函数中，我需要通过 MarkerManager 中的某种形式的键来调用它。

似乎标记是静态最终的，不能扩展，所以我有点坚持如何做到这一点。

谢谢，

安迪

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T15:03:10.727

您可以创建一个 HashMap：

```
 Map<Marker, YourCustomObject> theMap; 
```

然后将标记添加为键：

```
Marker m = mMap.addMarker(new MarkerOptions().icon(BitmapDescriptorFactory.fromResource(R.drawable.whatever)).position(new LatLng(mLat, mLong)));
theMap.put(m, yourCustomObjectInstance); 
```

最后，在您的信息窗口提供程序中，您可以通过提供给`getInfoWindow`函数的标记检索您的对象`：

```
mMap.setInfoWindowAdapter(new InfoWindowAdapter() {
    @Override
    public View getInfoWindow(Marker marker) {
        YourCustomObject yourCustomObjectInstance = theMap.get(marker);
    } 
```

# html - 为什么我的 span 标签与按钮对齐？我似乎根本没有在 CSS 中告诉它

> ID：14732058
> 
> 赞同：-3
> 
> 时间：2013-02-06T14:59:18.453
> 
> 标签：html, css

（嗯，我确定我有，但我就是不知道为什么它会这样对齐。）

见这里：[http ://web.cs.dal.ca/~selig/serverside/assignment2/](http://web.cs.dal.ca/~selig/serverside/assignment2/)

我会提供 CSS，但我根本不知道什么是相关的。我不相信我已经告诉它任何可以像这样对齐它的规则。我希望它在两个按钮下方居中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:19:55.790

我认为，由于 div#upload 是一个内联块，因此浮动它也没有多大意义。如果删除浮动，跨度开始表现（它与上传按钮对齐，因为它们都被浮动 div 推到右侧），但是上传按钮的位置变得有趣。更改 div#upload 的垂直对齐方式以某种方式解决了这个问题。

```
#upload {
    float: none;
    vertical-align: top
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:06:22.373

如果你添加`float: left;`到你的跨度类它应该可以工作，但你不能在你的跨度之前关闭表单标签吗？

例如：

```
</form>
<span class="valid-formats">Valid input: .txt files &lt;= 512 KB</span> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:10:11.447

它是失控的，即失控。

```
.valid-formats {
  clear: both;
  color: #999999;
  float: left;
  font-size: 0.8em;
} 
```

会修复它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T18:53:53.290

也许可以使用一张桌子。例子：

```
<table>
  <tr style="vertical-align:top;">
    <td>No file selected</td>
    <td><input type="button" value="Browse"></td>
    <td><input type="submit" name="submit" value="Upload"><br />
      Valid input:<br />
      .txt files &lt;= 512 KB</td>
  </tr>
</table> 
```

您需要添加一些 CSS，但至少我认为对齐是您想要的。

# jquery - 未捕获的类型错误：无法读取未定义的属性“聊天”

> ID：14732059
> 
> 赞同：2
> 
> 时间：2013-02-06T14:59:20.473
> 
> 标签：jquery, asp.net, signalr

我有一个用过的 SignalR 来创建聊天。它工作得很好但是当我在母版页中使用它时会出现以下错误

```
Uncaught TypeError: Cannot read property 'chat' of undefined
(anonymous function)
fire
self.fireWith
jQuery.extend.ready
DOMContentLoaded 
```

错误在于：

```
 <script type="text/javascript">
    $(function () {
      var chat = $.connection.chat;
**Uncaught TypeError: Cannot read property 'chat' of undefined**

      $.connection.hub.start({ transport: 'auto' }, function () {
        //alert('connected');
        $('#MainContent_connected').text('Connected to chat room');
      });

      $("#broadcast").click(function () {
        chat.send($("#MainContent_userName").text() + $("#msg").val());
        $("#msg").val('')
      });

      /* Declaring the Function on the chat hub in order for the server to
      be able to invoke it. */
      chat.addMessage = function (message) {
        $('#messages').append('<li>' + message + '</li>');
      };
    });
  </script> 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:44:05.660

确保您包含脚本标记：`<script src="signalr/hubs"></script>`

这个动态代理（“signalr/hubs”）是从 $.connection 创建 .chat 属性的原因

# matlab - 为 MATLAB 绘图函数实现多种语法

> ID：14732064
> 
> 赞同：1
> 
> 时间：2013-02-06T14:59:35.883
> 
> 标签：matlab

MATLAB 和工具箱中的许多绘图函数（并非全部）都允许以下两种语法：

```
plotfcn(data1, data2, ...)
plotfcn(axes_handle, data1, data2, ...) 
```

第一个绘制到当前坐标区 ( `gca`) 或创建并绘制到新坐标轴（如果不存在）。第二个用句柄绘制到轴中`axes_handle`。

研究了几个 MATLAB 和工具箱绘图函数的内部结构后，看起来 MathWorks 并没有真正的标准化方式来执行此操作。一些绘图例程使用内部但开放的函数`axescheck`来解析输入参数；有些人对第一个输入参数进行简单检查；有些使用更复杂的输入解析子功能，可以处理更多种类的输入语法。

请注意，这`axescheck`似乎使用了一种未记录的语法`ishghandle`- 文档说`ishghandle`只接受一个输入，如果它是任何 Handle Graphics 对象，则返回 true；但`axescheck`将其称为`ishghandle(h, 'axes')`，仅当它专门是一个轴对象时才返回 true 。

有人知道实现这种语法的最佳实践或标准吗？如果不是，您发现哪种方式最稳健？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-25T14:45:30.617

如果有人仍然感兴趣，在我发布问题四年后，这是我主要确定的模式。

```
function varargout = myplotfcn(varargin)
% MYPLOTFCN Example plotting function.
%
% MYPLOTFCN(...) creates an example plot.
%
% MYPLOTFCN(AXES_HANDLE, ...) plots into the axes object with handle
% AXES_HANDLE instead of the current axes object (gca).
%
% H = MYPLOTFCN(...) returns the handle of the axes of the plot.

% Check the number of output arguments.
nargoutchk(0,1);

% Parse possible axes input.
[cax, args, ~] = axescheck(varargin{:});

% Get handle to either the requested or a new axis.
if isempty(cax)
    hax = gca;
else
    hax = cax;
end

% At this point, |hax| refers either to a supplied axes handle,
% or to |gca| if none was supplied; and |args| is a cell array of the
% remaining inputs, just like a normal |varargin| input.

% Set hold to on, retaining the previous hold state to reinstate later.
prevHoldState = ishold(hax);
hold(hax, 'on')          

% Do the actual plotting here, plotting into |hax| using |args|.

% Set the hold state of the axis to its previous state.
switch prevHoldState
    case 0
        hold(hax,'off')
    case 1
        hold(hax,'on')
end

% Output a handle to the axes if requested.
if nargout == 1
    varargout{1} = hax;
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:27:13.493

不确定我是否理解这个问题。我所做的是将数据的绘图与绘图的生成/设置分开。因此，如果我想以标准化的方式绘制直方图，我有一个调用函数`setup_histogram(some, params)`，它将返回适当的句柄。然后我有一个函数`update_histogram(with, some, data, and, params)`将数据写入适当的句柄。

如果您必须以相同的方式绘制大量数据，这非常有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:50:19.440

副业的两个建议：

1.  如果你不需要，不要去无证。
2.  如果一个简单的检查就足够了，这将是我个人的偏好。

# javascript - 在javascript onchange中，我希望将日期输入数字（01022013）转换为日期格式）01/02/2013）

> ID：14732066
> 
> 赞同：0
> 
> 时间：2013-02-06T14:59:46.220
> 
> 标签：javascript, validation, data-conversion

我想创建一个表单，用户输入 01022013 格式和 onchange 它应该转换为日期格式。同样 onfocus 它应该是数字格式。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:06:02.530

尝试这个：

```
'01022013'.replace(/(\d{2})(\d{2})(\d{4})/, '$1/$2/$3') // -> "01/02/2013" 
```

# sql - 跨产品、价格和日期计算方差 T_SQL

> ID：14732067
> 
> 赞同：0
> 
> 时间：2013-02-06T14:59:53.670
> 
> 标签：sql, sql-server, tsql, report, variance

我已经阅读了 stackoverflow 上的几篇文章，试图确定计算项目表在一段时间内的价格差异的最佳路线。我的 ITEM_NO、Month 和 Year 以及 Unit cost 都在同一个表中。基本上，我在这里有一些示例数据：

```
DECLARE    @Inventory TABLE (Month NUMERIC, Year NUMERIC, ItemNumber NUMERIC, Cost DECIMAL)

INSERT     @Inventory
SELECT     '01', '12', '0001', '1.05' 
SELECT     '02', '12', '0001', '1.05' 
SELECT     '03', '12', '0001', '1.02' 
SELECT     '02', '12', '0002', '1.25' 
SELECT     '03', '12', '0003', '1.55'
SELECT     '03', '12', '0003', '1.57'
SELECT     '03', '12', '0003', '1.61'
SELECT     '03', '12', '0002', '1.29' 
```

本质上，输出将是

```
Item Number |  Current Cost  |  % Change  |  Month  | Year
-----------------------------------------------------------
       0001 |           1.02 |       0.01 |      02 |    12 
```

ETC

如果这是一个很好的方法。我只是在寻找一种计算价格差异的方法。由于此表有大约 600,000 行，并且 item_number 重复多次，并且随着时间的推移具有不同的价格（每个月或每隔几个月不同），因此生成关于它的报告会很好。我对 SQL 并不完全陌生，但对 T_SQL 有点陌生，并试图围绕这个想法展开思考。

我试过了：

```
USE BWDW; -- database
GO
SELECT ITEM_NO AS 'Item Number', TXN_YR AS 'Year', TXN_MON AS 'Month', UNIT_COST AS 'Item Price', STDEV(UNIT_COST) AS 'Variance Price'
FROM DS_tblFactInventoryTxnHistory
GROUP BY ITEM_NO, TXN_YR, TXN_MON, UNIT_COST
ORDER BY ITEM_NO;
GO 
```

输出为：

```
Item Number Year    Month   Item Price  Variance Price
02009739        11  11  6180.0000   0
02009779        11  11  5459.0000   0
104415          12  8   0.0618  0
104415          12  9   0.0618  NULL
104650          11  5   1.0000  0
104650          11  7   1.0000  0
104650          11  8   0.2575  NULL
104650          11  10  0.2575  0
104650          11  12  0.0319  NULL
104650          11  12  0.1071  0
104650          11  12  0.1823  0
104650          11  12  0.2575  0
104650          12  8   0.0319  1.07539867831324E-09
104650          12  9   0.0319  1.57825377906919E-09 
```

对于最终是美元的东西来说，这似乎是很多小数。我知道我可以将最后一列四舍五入。我一直在阅读 MSDN 上的 STDEV、网站上的各种资源以及 sqlteam 网站上的 DATEDIFF 解释。

这可能是一个完全新手的问题，我感谢任何人可以提供的任何见解来帮助实现我的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:42:11.977

难道你真的不想要这样的东西：

```
SELECT
            ITEM_NO ItemNumber,
            TXN_YR Year,
            TXN_MON Month,
            AVG(UNIT_COST) AveragePrice,
            VAR(UNIT_COST) PriceVarianceInMonth
    FROM
            DS_tblFactInventoryTxnHistory
    GROUP BY
            ITEM_NO,
            TXN_YR,
            TXN_MON
    ORDER BY
            ITEM_NO,
            TXN_YR,
            TXN_MON 
```

它将提供更有意义的数据。

* * *

本质上，group 子句用于将数据分组。`ITEM_NO`在我的查询中，我按`TXN_YR`和对数据进行分组`TXN_MON`。结果每个月的每个项目都应该有一个组。`UNIT_COST`可能因组中的每个成员而异。

在结果中，我可以将聚合函数应用于组，以允许我表达组的某些属性。在我的示例中，我返回了该组的平均单位成本，以及该组的统计方差。

因此，结果集中的每一行将包含每个组的一行，包括：

*   `ITEM_NO`
*   `TXN_YR`
*   `TXN_MON`
*   `UNIT_COST`该月 的平均值
*   `UNIT_COST`该月 的方差

# git - 创建 Git 分支功能/x/y？

> ID：14732069
> 
> 赞同：4
> 
> 时间：2013-02-06T14:59:56.677
> 
> 标签：git, internationalization, branch

我目前有一个 Git 分支`feature/i18n`，我用它来创建我的应用程序的不同本地化。我想为每种语言创建一个子分支，以便可以单独集成它们。是否可以创建子目录，例如`feature/i18n/French`or `feature/i18n/Spanish`，以便更容易组织？我从 Git 收到以下错误消息：`error: unable to resolve reference refs/heads/feature/i18n/spanish: Not a directory`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T15:06:00.660

是的，您可以创建这些分支。可以这么说，阻止您细分 i18n 命名空间的问题是您已经有了`feature/i18n`分支。

每个分支都创建为 .git/refs/heads 下的文件，因此当您创建分支时，Git 创建了文件 .git/refs/heads `.git/refs/heads/feature/i18n`。

现在您正在尝试 created `.git/refs/heads/feature/i18n/spanish`，git 尝试为其创建一个`i18n`文件夹——它不能，因为有一个同名的文件。

要创建这些“子分支”，您必须删除或重命名您的`feature/i18n`分支。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T15:05:34.897

你已经创建了一个分支特性/i18n

这意味着您已经创建了一个名为 feature/i18n 的文件。

现在要创建一个文件 feature/i18n/spanish，i18 必须是一个目录。

要修复此删除功能/i18n 分支并创建功能/i18n/spanish

# winforms - 在 MVP 中，IView 可以在单独的项目中实现吗？

> ID：14732073
> 
> 赞同：0
> 
> 时间：2013-02-06T15:00:19.137
> 
> 标签：winforms, architecture, mvp

**简介：** 我将 MVP 用作具有一些基本 CRUD 操作的 Windows 窗体应用程序的设计模式。

**要求** 我想将 IView 接口实现为抽象类，因为它将被多个视图使用，并且我可以提供一些常见的具体实现（例如显示带有错误消息的对话框）。现在我的 IView 与 Presenter 在同一个项目中实现。因此，我无法在此项目中添加任何 Windows.Forms 引用，因为它违反了 MVP 模式。

**建议的解决方案：** 我的解决方案是将 IView 移至不同的新项目。在此处添加我的获胜表格参考。这将使我能够完成上述工作。

**问题** 我只是不确定这是否是好的设计。我在这里违反任何规则吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:51:48.017

您可以在 Presenter 项目中声明视图接口，在 Views 项目中声明抽象基视图类，如下所示：

（主讲项目）

```
public interface IView 
{
  void ShowErrorMessage(string message);
}

public interface IFooView : IView
{
  string SomeField { get; set; }
  //...
  event EventHandler SomethingClicked;
  //...
}

public class FooPresenter 
{
  private readonly IFooView _view;

  public FooPresenter(IFooView view)
  {
    // inject view here
  }

  public void DoSomething()
  {
    // error case
    _view.ShowErrorMessage("some message");
  }
} 
```

（查看项目）

```
public abstract class BaseView : IView
{
  protected void ShowErrorMessage(string message)
  {
    // implement shared behavior here
  }
}

public class FooView : BaseView, IFooView
{
  // view specific behavior here
} 
```

# java - 在 repaint() 调用之后，如何知道所有 Java2D 渲染何时完成？

> ID：14732074
> 
> 赞同：0
> 
> 时间：2013-02-06T15:00:22.220
> 
> 标签：java, swing, java-2d

我有一个标准的paintComponent() 方法，可以通过Java2D 在Swing JPanel 上绘制一些形状。

最初，JPanel 表面以干净的白色背景显示。

用户选择文件后，我根据文件上的说明构建形状（在单独的线程中）。

然后，我调用 JPanel 的 rapaint() 方法，你知道，将在 EDT 处理。

我可以知道 repaint() 处理何时结束：我只需要查看屏幕上的新图纸。

所以，今天早上我没有太多的想法来回答这个问题：如何通过代码知道相同的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:08:29.127

您没有任何自动通知，但您可以设置一个布尔变量或在您的paintComponent() 末尾调用一个方法。

请注意，通常您不应该有这个问题，因为 paintComponent() 应该只包含快速执行的代码，任何初始化/计算都应该转移到另一个方法。

# php - 验证对 API 的访问

> ID：14732076
> 
> 赞同：2
> 
> 时间：2013-02-06T15:00:39.750
> 
> 标签：php, javascript, api

我正在尝试制作我的第一个 API，我以前从未做过 API。我确实阅读了一些文档，但找不到足够简单的东西来描述身份验证过程。

如何通过 API 对用户进行身份验证？比如我如何为应用程序开发人员提供一种方法，以便他们制作一个登录表单，允​​许他们的用户访问他们在我的数据库中的信息，并让我根据登录的用户提供数据。

我对通过 API 验证用户的想法感到困惑，他们如何安全地发送密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:03:50.620

当您在谈论 PHP 和 javascript 时，我假设您在谈论 HTTP (REST) api。在那种情况下，我几乎总是主张使用标准的 HTTP 身份验证。这将发送以 BASE64 编码的用户名和密码。这可能看起来是加密的，但顾名思义，它只是一种编码。因此它不安全。如果你想安全地做到这一点，我强烈建议使用 HTTPS。

看一下：

[PHP 中的 HTTP 身份验证](http://php.net/manual/en/features.http-auth.php)

[相关标准](http://www.ietf.org/rfc/rfc2617.txt)

**编辑：**根据要求简要介绍其工作原理。冗长（并且有点难以阅读）的标准描述了，服务器可以请求客户端对自己进行身份验证。然后客户端将用户名和密码（用户名：密码的基本 64 位编码版本）发送到服务器。由于标准中指定了此基本 HTTP 身份验证，因此它被广泛传播，并且几乎每种语言都有大量的库。但是，如前所述，我强烈建议将其与 HTTPS 一起使用。否则，它只会将用户的密码暴露在互联网上。

虽然我强烈支持使用标准 HTTP 身份验证，但您可能还想看看其他概念：OAuth、[apikeys](https://stackoverflow.com/questions/9386930/rest-api-authorization-authentication-web-mobile)、[Amazon Stuff](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T15:15:29.857

也许您应该看看[oauth](http://oauth.net/)，例如，这就是 twitter 的工作方式。

# java - 嵌套循环和超时

> ID：14732077
> 
> 赞同：0
> 
> 时间：2013-02-06T15:00:41.483
> 
> 标签：java, multithreading

我有一个生成决策树的大型嵌套循环（深达 6 层）。但是，这是一个相当时间紧迫的程序，我需要在时间到时中止生成。

我知道每个循环都可以检查计时器，但会降低效率。我正在考虑使用监视线程或类似机制，我想知道是否有一种有效的方法可以为整个循环和中断设置超时（可能使用“goto”子句）？

还是我应该将嵌套循环切割成嵌套线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:02:39.760

检查时钟值*的效率有多*低？`System.currentTimeMillis()`我强烈怀疑它可以忽略不计，这很可能是您最简单和最有效的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:04:22.897

您可以测试检查最内层循环上的计时器，如果太慢，请将其移至您的`Level 5`，如果太慢，您的`Level 4`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:18:38.330

如果你想停止整个生成过程，如果它没有在一定的时间限制内完成，你可以把所有的循环放在一个线程中，让线程运行特定的时间，如果它没有完成则终止。这是我将如何做到这一点：

```
Thread generationThread = new Thread(){

    public void run(){
        // All your loops

        // You can check for isInterrupted and simply return to terminate the process
        if(isInterrupted()){
          return;
        }
    }
}
generationThread.start();
generationThread.join(MAX_TIME); // how long in ms this process is allowed to run
// Terminate the thread if it did not finish
if(generationThread.isAlive()){
   generationThread.interrupt();
} 
```

此代码仅供*说明*，请根据需要更改。

# iphone - rooViewController 在屏幕底部留下空隙

> ID：14732080
> 
> 赞同：0
> 
> 时间：2013-02-06T15:00:47.443
> 
> 标签：iphone, uiviewcontroller, simulator

Mt rootViewController（即第一个视图控制器）没有占据全屏，而其他 VC 则占据了（见截图）。在 IB 中，它们看起来相同。我正在使用 iOS 6 / iOS 5.1 模拟器。

我的 AppDelegate 方法看起来很无辜。有什么建议么？

```
`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // hide status bar
    [UIApplication sharedApplication].statusBarHidden = YES;
    _window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // allocate the root view controller
    _window.rootViewController = [[LMHomeViewController alloc] init];
    // add a navigation controller
    [LMNavigationController initSharedInstanceWithRootViewController:self.window.rootViewController];
    [_window addSubview:LMNavigationController.sharedInstance.view];
    // show the window
    [_window makeKeyAndVisible];
    return YES;
}`

![在此处输入图像描述](../Images/ff19059f6223768b88d574c1b8e16d15.png)

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2013-02-06T15:05:17.343

隐藏 LMHomeViewController xib 文件中的状态栏。

在您的 info.plist 中，将“状态栏最初隐藏”设置为“是”。

我认为问题在于您的 LMHomeViewController 获得“使用状态栏渲染”，然后将此视图添加到没有状态栏的视图中，因此存在 20 px 的间隙。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2013-02-06T18:05:13.170

//在 appDelegate.h 文件中

@property (strong, nonatomic) UIWindow *window;

@property（强，非原子） LMHomeViewController *homeController;

//在 appDelegate.m 文件中

self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

self.homeController = [[[LMHomeViewController alloc] initWithNibName:@"LMHomeViewController" bundle:nil] autorelease];

self.window.rootViewController = self.viewController; 
```

# wcf - WCF 和 Web 服务描述

> ID：14732081
> 
> 赞同：0
> 
> 时间：2013-02-06T15:00:51.123
> 
> 标签：wcf, web-services, presentation

通常在 Web 服务中，当您导航到 .asmx 时，您将获得操作列表，然后能够单击它们并获取调用的详细信息，例如要传入的参数及其返回。对于客户和任何需要从外部调用服务的人来说非常有用。

然而，在 WCF 中，.svc 带来了一些完全不同的东西，如果不使用工具就很难破译。有没有办法让 WCF 像旧的 Web 服务一样呈现这些服务，或者这样的功能是否被完全删除，开发人员是否必须使用像 Storm 这样的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:05:40.783

您可以创建 matadataexchenge 端点，任何人都可以创建代理类或查看接口`../visual_studio/common7/ide/WcfTestClient.exe`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:32:05.843

同事有一个相当简单的解决方案，效果很好。

我创建了一个 SOAP Web 服务，然后通过该服务调用 WCF 服务。用户只会看到更容易理解的 SOAP 并与之交互，然后 Web 服务会将数据传递给 WCF。

# mysql - 在连接之间共享临时表

> ID：14732086
> 
> 赞同：1
> 
> 时间：2013-02-06T15:01:16.873
> 
> 标签：mysql

是否可以在多个数据库连接之间共享临时变量？

我有一个连接池，但是我的查询的性质使得每个查询都需要大量的临时表（但它们对于所有查询都是相同的）。通过使用连接池，我无权访问临时表。在仍然使用连接池的同时，有什么好的方法可以规避这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:03:22.570

你必须想出一个不同的解决方案。特定于每个连接的临时表，不能共享。

# c# - 如何将从数据库检索到的 smalldatetime 转换回 smalldatetime 以重新发布到数据库

> ID：14732087
> 
> 赞同：2
> 
> 时间：2013-02-06T15:01:20.290
> 
> 标签：c#, sql, visual-studio

我有一个表单，它从我的“smalltime”类型的数据库中获取一个项目，我想将它重新添加到另一个数据库中作为“smalldatetime”但是我遇到的问题是正在读取我的项目一个字符串。我不确定采取什么方法来转换它，但这是我到目前为止所拥有的：

```
var checkOutDate = Convert.ToDateTime(ddlCheckOutDate.Text);
sl.ReqCheckOutDate = checkOutDate; 
```

谁能帮我克服这个障碍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:05:44.233

您报告的问题是由于文化差异造成的。您使用的是美国格式的日期，并且当前的文化设置为英国或类似的，因此它认为您使用的是日/月/年，这使得 12/14/2013 是 Day=12 Month=14 Year=2013，因此无效。

使用[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)将允许您控制日期的精确转换：

```
CultureInfo provider = CultureInfo.InvariantCulture;
string dateAsText = "12/14/2012 12:00:00 PM";
DateTime something = DateTime.ParseExact(dateAsText, "MM/dd/yyyy hh:mm:ss tt", provider); 
```

# android - Android Loaders 生命周期，或者：onStopLoading() 是否总是在 onReset() 之前调用？

> ID：14732095
> 
> 赞同：4
> 
> 时间：2013-02-06T15:01:56.260
> 
> 标签：android, android-loadermanager, android-loader

有没有直接在它之前`onReset()`调用而被调用的情况？`onStopLoading()`

更一般地说，我试图弄清楚加载器的生命周期，a-la[活动生命周期](http://developer.android.com/reference/android/app/Activity.html)图表，以及哪个`onSomething()`在 Activity/Fragment 的生命周期状态的哪个状态中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-06T14:56:09.723

是的，`onReset()`可以在没有事先调用 的情况下被调用`onStopLoading()`。的实现`onStopLoading()`必须确保在此之后不会触发任何负载，而`onReset()`如果尚未释放资源，则应该这样做并释放资源。`onStartLoading()`必须能够从两种状态开始/恢复。

[因此，像AsyncTaskLoader 参考页面](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)上的示例代码那样调用 的实现`onStopLoading()`似乎是一个好习惯。`onReset()`

# c# - wpf datagrid标题中的访问复选框

> ID：14732096
> 
> 赞同：8
> 
> 时间：2013-02-06T15:01:56.830
> 
> 标签：c#, wpf, datagrid

嘿，

我需要帮助弄清楚如何访问 wpf datagrid 标题中的复选框。这是我所拥有的：

```
<DataGrid.Columns>
    <DataGridTemplateColumn CanUserReorder="False" CanUserResize="False">
        <DataGridTemplateColumn.HeaderTemplate>
            <DataTemplate>
                <CheckBox Name="cbxAll" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" HorizontalAlignment="Center" VerticalAlignment="Center" />
            </DataTemplate>
        </DataGridTemplateColumn.HeaderTemplate>
        <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
                <CheckBox IsChecked="{Binding Path=Checked, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding Path=NoErrors}" Name="theCheckbox" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" HorizontalAlignment="Center" VerticalAlignment="Center" />
            </DataTemplate>
        </DataGridTemplateColumn.CellTemplate>
    </DataGridTemplateColumn>
</DataGrid.Columns> 
```

我已经设置了`Name`复选框，但由于某种原因我无法从代码端访问它。

刷新我的数据网格项目后，我需要访问复选框以取消选中它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T11:55:19.210

MVVM 中的一个工作示例：

**视图模型**

```
public class MainWindowViewModel : INotifyPropertyChanged
{
    private bool allItemsAreChecked;

    public event PropertyChangedEventHandler PropertyChanged;

    public bool AllItemsAreChecked
    {
        get
        {
            return this.allItemsAreChecked;
        }
        set
        {
            this.allItemsAreChecked = value;
            var handler = this.PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs("AllItemsAreChecked"));
            }
        }
    }
} 
```

**XAML**

```
<DataGridTemplateColumn CanUserReorder="False" CanUserResize="False">
    <DataGridTemplateColumn.HeaderTemplate>
        <DataTemplate>
            <CheckBox IsChecked="{Binding
                RelativeSource={RelativeSource AncestorType={x:Type DataGrid}},
                Path=DataContext.AllItemsAreChecked}" />
        </DataTemplate>
    </DataGridTemplateColumn.HeaderTemplate>
</DataGridTemplateColumn> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T08:04:29.007

尽管绑定可能是您应该采用的方式，但您可以按照您的要求进行操作。这是一种方法：

1.给你的标题`CheckBox`一个 Uid

```
<CheckBox Uid="CheckAll" /> 
```

2.命名你的`DataGrid`

```
<DataGrid Name="myDataGrid" /> 
```

3.实现如下扩展方法

```
public static UIElement FindUid(this DependencyObject parent, string uid)
{
    var count = VisualTreeHelper.GetChildrenCount(parent);
    if (count == 0) return null;

    for (int i = 0; i < count; i++)
    {
        var el = VisualTreeHelper.GetChild(parent, i) as UIElement;
        if (el == null) continue;

        if (el.Uid == uid) return el;

        el = el.FindUid(uid);
        if (el != null) return el;
    }
    return null;
} 
```

4.像这样访问并取消选中`CheckBox`后面的代码

```
CheckBox checkBox = myDataGrid.FindUid("CheckAll") as CheckBox;
checkBox.IsChecked = false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-23T17:30:46.437

设置一个简单的事件：

```
<CheckBox x:Name="cbxAll" Click="cbxAll_Click"/> 
```

在事件中点击代码：

```
private void cbxAll_Click(object sender, RoutedEventArgs e)
{
   var ckbox = sender as CheckBox;
   if (ckbox.IsChecked == true)
   {
    //Check all itens
   }
   else
   {
    //Uncheck all itens
   }
} 
```

注意：发件人是复选框

# hibernate - Hibernate FechType.LAZY 不适用于复合 @ManyToOne 关系

> ID：14732098
> 
> 赞同：4
> 
> 时间：2013-02-06T15:01:57.470
> 
> 标签：hibernate, jpa-2.0, composite-key

没有复合关系的@ManyToOne 关系工作得很好：

```
@Entity
@Table
public class Telefoni{
    ... other fields not included for simplicity sake

    private DjecaRoditelja djecaRoditelja;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "IDDjeteta", referencedColumnName = "IDDjeteta")
    public DjecaRoditelja getDjecaRoditelja() {
        return this.djecaRoditelja;
    }

    public void setDjecaRoditelja(DjecaRoditelja djecaRoditelja) {
        this.djecaRoditelja = djecaRoditelja;
    }
}

...

// in some DAO method
tel = entityManager.find(Telefoni.class, primaryKey); 
```

这将执行 1 个 SQL 查询，仅从 Telefoni 表中获取一行并持续约 10 毫秒。

但是，当使用复合 @JoinColumns 添加任何 @ManyToOne 关系时，延迟获取将停止工作：

```
@Entity
@Table
public class Telefoni{
    ... other fields not included for simplicity sake

    private KontaktOsobe kontaktOsobe;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumns({
            @JoinColumn(name = "KORISNIK", referencedColumnName = "korisnik"),
            @JoinColumn(name = "PARTNER", referencedColumnName = "Partner"),
            @JoinColumn(name = "SifraKonOs", referencedColumnName = "SifraOsobe") })
    public KontaktOsobe getKontaktOsobe() {
        return this.kontaktOsobe;
    }

    public void setKontaktOsobe(KontaktOsobe kontaktOsobe) {
        this.kontaktOsobe = kontaktOsobe;
    }
}

...

// in some DAO method
tel = entityManager.find(Telefoni.class, primaryKey); 
```

这会执行 37 个 SQL 查询，急切地获取每个父实体和每个父实体的父实体，直到它解决所有关系。这将持续大约 600 毫秒。

为我的实体添加一个额外的关系，我的性能降低了 60 倍......除了更改我的数据库模型之外，还有什么方法可以让懒惰的获取与复合关系一起工作？

编辑：

在对此进行了更详细的调查之后，该问题与复合关系无关，而是通过任何不超过 JPA/Hibernate 定义的主键的关系。

因此，如果我有一个具有标识列和自然唯一性的表，以及通过一个或另一个相关的各种表 - 我必须决定急切获取哪个灾难性较小，并将另一个作为 Hibernate 的主键.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:47:23.840

在相关表 KontaktOsobe 上，主键必须是由构成关系的组件组成的 @EmbeddedId。

```
@Entity
@Table
public class KontaktOsobe{
    private KontaktOsobePK pk;

    @EmbeddedId
    public KontaktOsobePK getPk() {
        return pk;
    }
    // ... 
}

@Embeddable
public class KontaktOsobePK implements Serializable {
    private static final long serialVersionUID = 1L;

    private String sifraOsobe;
    private String partner;
    private String korisnik;

    // getters, setters, equals and hashode methods go here...
} 
```

如果同时您还具有针对另一个字段（即自动增量身份字段）的关系，您必须决定哪个延迟获取将起作用......

# ruby-on-rails - 仅 1 个操作出现资产路由错误

> ID：14732100
> 
> 赞同：0
> 
> 时间：2013-02-06T15:02:00.113
> 
> 标签：ruby-on-rails

我的 Rails 应用程序出现奇怪的路由错误。我有一个名为的控制器`file_ops`，我正在使用 REST url 理念。我可以访问`index`并且`new`很好，我什至将静态路由设置为名为`fileScan`. 但是，如果我尝试`show`通过输入或通过链接来执行操作，我会得到：

```
ActionController::RoutingError (No route matches [GET] "/assets") 
```

到目前为止，这似乎是发生这种情况的唯一行动。除了上面提到的静态路由外，我的设置中没有任何不标准的东西。我四处搜索，但人们遇到的其他问题似乎指向`/assests`不存在的文件。我的似乎是在引用文件夹本身。

# flash - 如何使 actionscript 2 将代码解释为纯文本？

> ID：14732101
> 
> 赞同：0
> 
> 时间：2013-02-06T15:02:01.590
> 
> 标签：flash, actionscript-2, textinput, plaintext

我正在尝试制作一个基于 Flash 的活动，最终用户将输入一些 Java 作为写作练习，完成后，他们将按 Enter 键，Flash 将检查他们是否输入正确。

问题出在我正在编写动作脚本的地方。当我测试这部电影时，flash 会抛出很多错误，因为它认为我在输入文本框中键入的 Java 只是格式不正确的代码。我使用的代码过去曾用于简单的事情，例如键入名称或数字，但使用代码类型输入时，它会中断。我知道 HTML 中有标签可以将代码显示为文本，但我在 actionscript 2 中找不到任何关于如何执行此操作的信息。这就是我所拥有的：

```
keyListener = new Object();
keyListener.onKeyDown = function() {
if(Key.getCode() == Key.ENTER){
if(allthecode.text == "
    // Import the required API classes.
    import java.util.Scanner;

    public class ShowByte 
    {
    public static void main(String[] args) 
    {
    // Create the scanner.
    Scanner GetByte = new Scanner(System.in);

    // Obtain a byte value.
    System.out.print("Type any number: ");
    byte MyByte = GetByte.nextByte();

    // Display the value on screen.
    System.out.println("The value of MyByte is: " + MyByte);
    }
    }
    ") {gotoAndPlay(150);
        }
    }
};
Key.addListener(keyListener); 
```

编辑：Lee 发现代码在多行上。一旦我将所有内容都放在“ ”标记内并将所有内容压缩成一行，它就起作用了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:04:48.220

我认为由于您格式化字符串的方式，您遇到了错误 - 您有 " 周围的字符串但也在其中 - flash 会混淆。使用 " 或 ' 来包围字符串，然后在字符串中使用其他类型。例如：

```
if (allthecode.text == '
    // Import the required API classes.
import java.util.Scanner;

public class ShowByte 
{
public static void main(String[] args) 
{
// Create the scanner.
Scanner GetByte = new Scanner(System.in);

// Obtain a byte value.
System.out.print("Type any number: ");
byte MyByte = GetByte.nextByte();

// Display the value on screen.
System.out.println("The value of MyByte is: " + MyByte);
}
}
') {gotoAndPlay(150); 
```

或发布您收到的错误消息并证明我错了；）

# django - 调试设置为关闭时评论中断

> ID：14732103
> 
> 赞同：1
> 
> 时间：2013-02-06T15:02:05.893
> 
> 标签：django, django-comments, mezzanine

调试打开时评论工作正常，但是当我关闭它时，我收到“发生错误”消息，它无法将我重定向回原始页面，而是在 url “www.MYSITE/comments”处显示错误消息。如果有帮助，我正在 Mezzanine 上使用 django 线程评论。我只是想要一种至少查看错误消息的方法。最好的，

杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:26:29.423

您是否尝试过使用[Django Middleware](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs#process-exception)，更准确地说是`process_exception`部分？您可以编写自己的中间件类来记录异常或将其显示在结果页面中。

# android - android UI 优化有哪些选项？

> ID：14732104
> 
> 赞同：6
> 
> 时间：2013-02-06T15:02:10.107
> 
> 标签：android, android-ui

我有一个包含大量图形元素的应用程序，我试图通过使用 RelativeLayout 来消除布局复杂性，并想知道还有什么可以做来加速基于具有大量图形元素的标准布局系统的 UI？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:59:10.740

您可以查看[Romain Guy的博客](https://stackoverflow.com/users/298575/romain-guy) [http://www.curious-creature.org/category/android/](http://www.curious-creature.org/category/android/)，他经常写关于性能主题的文章。特别是看看这篇[文章](http://www.curious-creature.org/2012/12/01/android-performance-case-study/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:04:16.230

android 开发者网站上有一个 UI 设计和性能指南：

[安卓用户界面性能](http://developer.android.com/training/improving-layouts/index.html)

玩得开心

# apache - 部署 WSGI 应用程序 - Apache 和/或 Nginx

> ID：14732105
> 
> 赞同：1
> 
> 时间：2013-02-06T15:02:11.493
> 
> 标签：apache, nginx, wsgi

我最近才开始使用基于 Python WSGI 的框架（Pyramid 和 Flask）。从那以后我一直在使用 Apache，但最近我对 node.js 和 Nginx 等基于异步非阻塞事件的技术大肆宣传。

所以我决定，当我的应用程序投入生产时，它会在 Nginx 上的虚拟云服务器中运行，它会超级、超级快……但比我想象的要快……等一下……wsgi应用程序是设计上的阻塞应用程序。那么 wsgi 应用程序在 Nginx 上的运行实际上不会比 Apache 更差，因为它会阻塞进程并立即阻塞服务器？Apache 的多线程可能比我的应用程序要好得多。

无论如何，现在我正试图弄清楚我将在生产中使用什么，所以我可以以这种方式进行准备和优化。我在这个领域几乎是新手，所以我有一些想法，但我不确定该采取什么路线。

```
1.) Have nginx serve my wsgi app, but create some kind of load balancer that sends requests to various nginx instances, as running single process would probably fail miserably as my python app would be blocking it. So I would have 4-8 nginx's running.
2.) Have apache serve everything, wsgi+static
3.) Have apache serve the app via mod_wsgi, and nginx serve static files
4.) Any other solutions? 
```

我正在寻找性能、资源使用、可靠性和便利性之间的最佳平衡。如果配置正确，我认为 nginx 或 apache 都不会成为我的应用程序的瓶颈。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T01:25:07.613

我还没有找到直接部署 nginx + wsgi 的方法。每个人都说使用 Gunicorn，并且有一些程序可以找到。但是，我只能找到一个程序来显示如何在启动时启动 Gunicorn 并作为后台进程运行，这很复杂。需要安装主管并创建自定义脚本以按照推荐的方式运行 Gunicorn，它是作为套接字而不是守护进程。其他一切都只是展示了如何从命令行运行 Gunicorn，这对开发之外的任何东西都没有用。

考虑到每个人都在推荐 Gunicorn，我感到非常惊讶，但是没有直接的方法来设置开机启动并在后台运行。

我最终使用了 Apache + mod_wsgi，它更容易安装并且可以正常工作。忘记使用 nginx + wsgi 恕我直言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:01:18.623

您应该考虑同时设置它们并运行一些基准测试，看看哪个最适合您的应用程序。

Apache 或 Nginx 都可能是有益的，这取决于您的资源需求以及您的应用程序如何处理连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T02:18:15.450

您没有说您打算如何使用 nginx 运行 WSGI 应用程序。如果您正在查看 ngx_wsgi_module 则不要，因为它会由于在 nginx 进程内部运行而引入阻塞问题。看：

*   [http://blog.dscpl.com.au/2009/05/blocking-requests-and-nginx-version-of.html](http://blog.dscpl.com.au/2009/05/blocking-requests-and-nginx-version-of.html)

如果您正在谈论更多地使用 nginx 作为代理，通过 WSGI 应用程序作为 FASTCGI、SCGI、uWSGI 或什至在 gunicorn 作为后端运行，那么您很好，尽管 nginx 会在等待特定请求时阻塞WSGI 应用程序，由于其异步设计，它在代理时具有很高的并发请求处理能力。

# javascript - Javascript：将命名函数分配给变量时出现不一致（命名函数表达式）

> ID：14732107
> 
> 赞同：5
> 
> 时间：2013-02-06T15:02:14.120
> 
> 标签：javascript, internet-explorer, firefox, cross-browser

谁能解释 Internet Explorer 和 Firefox 在以下方面的行为差异：

```
var myNamespace = (function () {
  var exposed = {};

  exposed.myFunction = function myFunction () {
    return "Works!";
  }

  console.log(myFunction()); 
  // IE: "Works!"
  // Firefox: ReferenceError: myFunction is not defined

  console.log(exposed.myFunction());
  // IE: "Works!"
  // FF: "Works!"

  return exposed;
})();

console.log(myNamespace.myFunction()); 
// IE: "Works!"
// FF: "Works!" 
```

`myFunction()`在 Internet Explorer 中，此方法允许我通过使用或来从命名空间函数内部调用我的函数`exposed.myFunction()`。

在我的命名空间功能之外，我可以使用`myNamespace.myFunction()`

在 Firefox 中，结果是相同的，除了不工作的裸命名函数调用。

它应该工作吗？如果不应该，那为什么不呢？

如果应该那么这是一个已知的错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T15:18:35.660

为防止虚假信息：

**IE 在命名函数表达式**方面存在问题，这就是您所拥有的。**函数的名称应该只在函数内部**可用。从[规范](http://es5.github.com/#x13)：

> 可以从*FunctionExpression*的*FunctionBody内部引用**FunctionExpression*中的*标识符*，以允许函数递归地调用自身。但是，与 FunctionDeclaration 不同，*FunctionExpression**中*的标识符*不能*被引用，也不影响包含*FunctionExpression*的范围。

 ***其中*FunctionExpression*定义为：

> *FunctionExpression* :
>      `function` *标识符*[opt] `(` *FormalParameterList* [opt] ) `{` *FunctionBody* `}`

但是在 IE 中，它并没有使名称仅在函数内部可用，而是创建了两个*不同*的函数对象，一个分配给变量，另一个分配给您为函数提供的名称。以下将`false`在 IE 中产生（并在其他浏览器中引发错误）：

```
exposed.myFunction === myFunction; 
```

这是一个已知的错误，如果你必须为（旧版本的）IE 编写代码，你最好避免使用命名函数表达式。

* * *

相关问题：

*   [detachEvent 不适用于命名的内联函数](https://stackoverflow.com/questions/2553632/detachevent-not-working-with-named-inline-functions)
*   [IE 中的命名函数表达式，第 2 部分](https://stackoverflow.com/questions/2679657/named-function-expressions-in-ie-part-2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T15:12:21.223

这个：

```
exposed.myFunction = function myFunction () {
    return "Works!";
} 
```

没用（-纠正自己：这不是不正确的-）并且显然有问题（请参阅Felix的帖子）。如果你想声明一个函数的一部分，`exposed`你不需要命名它：

```
exposed.myFunction = function() {
    return "Works!";
} 
```

但是，如果您想声明一个本地函数**，然后将**其影响到您的数组`exposed`，您可以执行以下操作：

```
function myFunction () {
    return "Works!";
}

exposed.myFunction = myFunction; 
```

在这种情况下，这将成功验证`(exposed.myFunction === myFunction) === true;`

另外，请注意，您的呼叫`console.log(myNamespace.myFunction());`与您的呼叫相同，`console.log(exposed.myFunction());`因为`myNamespace`实际上是 object `exposed`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:19:08.877

此外，通过定义

```
exposed.myFunction = function() {} 
```

您将`exposed`' 的*属性*设置为`myFunction`。

`myNamespace`并且在范围内不可用。

通过定义

```
exposed.myFunction = function myFunction() {} 
```

该函数在 的范围内创建`myNamespace`，然后作为 的属性引用`exposed`。***

# android - Android Handler NullPointerException（发送消息时）

> ID：14732111
> 
> 赞同：1
> 
> 时间：2013-02-06T15:02:35.067
> 
> 标签：android, nullpointerexception, handler

我有一个问题`Handler`。这就是我的应用程序的作用：

1.  新线程已创建。
2.  Thread 下载数据，然后将它们放入消息中。
3.  线程向处理程序发送消息。

问题就从这里开始了。根据日志应用程序`NullPointerException`在这一行中抛出：

```
replyTo.sendMessage(msg); 
```

有时一切正常，有时则不然。Handler 是在创建新线程之前放置的。这是处理程序的代码：

```
Handler responseHandler = new Handler() {
    public void handleMessage(Message msg) {
        ad.dismiss();
        populateListWithVideos(msg);
        };
}; 
```

你有什么想法为什么会发生这种情况？

编辑：这是我的 Logcat。如何阅读：

*   “Powstała nowa biblioteka” - 新的 ArrayList 已创建
*   "Array" - JSONArray 已收到
*   "Obiekt"/"Tytuł" + number - 来自 JSONArray 的对象/字符串已被接收（number - 对象编号）
*   “Dodano do biblioteki” - 从 Object 接收的字符串已作为 Video 添加到数组中
*   “Nowa biblioteka” - 从 ArrayList 创建的新库
*   "Serializable" - 库序列化成包
*   “Otrzymano wiadomość” - 使用 Message.obtain() 获得的消息
*   “Ustalono wiadomość” - 使用 Message.setData() 将包放入 Message
*   “Wysłano wiadomość” - 发送给 Handler 的消息

    ```
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Powstała nowa biblioteka
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Array
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Obiekt0
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Tytuł0
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Dodano do biblioteki
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Obiekt1
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Tytuł1
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Dodano do biblioteki
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Obiekt2
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Tytuł2
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Dodano do biblioteki
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Obiekt3
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Tytuł3
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Dodano do biblioteki
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Obiekt4
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Tytuł4
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Dodano do biblioteki
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Obiekt5
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Tytuł5
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Dodano do biblioteki
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Obiekt6
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Tytuł6
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Dodano do biblioteki
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Obiekt7
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Tytuł7
    02-07 13:17:13.885: D/Ignaś TV(24913): Thread-6447| Dodano do biblioteki
    ...
    02-07 13:17:13.905: D/Ignaś TV(24913): Thread-6447| Obiekt48
    02-07 13:17:13.905: D/Ignaś TV(24913): Thread-6447| Tytuł48
    02-07 13:17:13.905: D/Ignaś TV(24913): Thread-6447| Dodano do biblioteki
    02-07 13:17:13.905: D/Ignaś TV(24913): Thread-6447| Obiekt49
    02-07 13:17:13.905: D/Ignaś TV(24913): Thread-6447| Tytuł49
    02-07 13:17:13.905: D/Ignaś TV(24913): Thread-6447| Dodano do biblioteki
    02-07 13:17:13.905: D/Ignaś TV(24913): Thread-6447| Nowa biblioteka
    02-07 13:17:13.905: D/Ignaś TV(24913): Thread-6447| Serializable
    02-07 13:17:13.905: D/Ignaś TV(24913): Thread-6447| Otrzymano wiadomość
    02-07 13:17:13.905: D/Ignaś TV(24913): Thread-6447| Ustalono wiadomość
    02-07 13:17:13.905: E/Ignaś TV(24913): Thread-6447| Koniec listy //Error
    02-07 13:17:13.905: E/Ignaś TV(24913): java.lang.NullPointerException
    02-07 13:17:13.905: E/Ignaś TV(24913):  at         com.ignas.ignastv.service.task.GetData.run(GetData.java:142)
    02-07 13:17:13.905: E/Ignaś TV(24913):  at java.lang.Thread.run(Thread.java:856) 
    ```

# javascript - 适用于 JavaScript 的 Visual Studio 2012 任务列表

> ID：14732119
> 
> 赞同：5
> 
> 时间：2013-02-06T15:02:47.353
> 
> 标签：javascript, visual-studio-2012, tasklist

是否可以通过评论将任务（待办事项、黑客等）添加到任务列表中。（对于**javascript** 文件）

类似于这里解释的功能：

*   [http://code-inside.de/blog-in/2008/11/19/howto-taskmanagement-with-visual-studio-todos-hacks-co/](http://code-inside.de/blog-in/2008/11/19/howto-taskmanagement-with-visual-studio-todos-hacks-co/)
*   [http://www.youtube.com/watch?v=l47g7_Qe8HE&feature=player_embedded](http://www.youtube.com/watch?v=l47g7_Qe8HE&feature=player_embedded)

第二个视频中的菜单点仅适用于 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-08T17:13:21.487

另一种选择是优秀的 Javascript 解析器扩展：http: [//visualstudiogallery.msdn.microsoft.com/288a2b0f-1357-47b4-8215-1134c36bdf30](http://visualstudiogallery.msdn.microsoft.com/288a2b0f-1357-47b4-8215-1134c36bdf30)

我刚刚偶然发现它支持 // TODO: 类型注释的功能，您可以定义自己的关键字。

显然，任务列表功能在普通的 Visual Studio for javascript 文件中不可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T22:13:36.237

好消息是您可以通过安装扩展“JSLint.VS2012”来获得它。

[http://visualstudiogallery.msdn.microsoft.com/1a417c37-4d6f-43ca-b753-6ea6eb5041fd](http://visualstudiogallery.msdn.microsoft.com/1a417c37-4d6f-43ca-b753-6ea6eb5041fd) [http://jslint4vs2010.codeplex.com/](http://jslint4vs2010.codeplex.com/)（VS2012 版本仅更改安装目标）

我偶然发现了这一点，因为他们自己的文档（在 codeplex 上）没有显示他们有这个。安装后设置在工具 | Visual Studio 选项选项卡上的 JS Lint 选项。

![JsLint TODO 的演示](../Images/d4f5d5fabd0f75e64de5ddbf44bcb046.png)

坏消息是它有点粗糙。

1.  您最终会得到多个实例（每次连续构建？）。您可以手动删除它们以重新开始。
2.  双击不会跳转到代码。但是文件和行列在那里。

也可以通过 Resharper 或 Telerik JustCode 提供的 SO 上的某个地方找到。或者通过在[http://forums.asp.net/t/414634.aspx/1](http://forums.asp.net/t/414634.aspx/1)[的 Visual Studio 任务列表中列出 javascript 任务](https://stackoverflow.com/questions/2183439/list-javascript-tasks-in-visual-studio-task-list?rq=1)的旧的“滚动你自己的”解决方案

# jquery - 在浏览器大小上缩放许多图像（CSS / jQuery？）

> ID：14732122
> 
> 赞同：0
> 
> 时间：2013-02-06T15:02:59.510
> 
> 标签：jquery, css, responsive-design, image-scaling

我有一个小的网络项目。在此页面上，我有一些尺寸相同（360x270 像素）的图像。我想为浏览器窗口的视口缩放正确大小的图像。一个样本将证明我的意思。我希望有人能帮助我。这里是演示站点的链接。

[http://oscar-charlie.de/#/clients](http://oscar-charlie.de/#/clients)

在我的页面上，我有两行三个图像。我不知道根据浏览器大小按比例缩放图像的解决方案。我的第一个想法基于 jquery 或 css3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:13:22.380

你可能想要这样的东西：

```
.classforimages {
    width:33%;
    max-width:360px;
    height:auto;
} 
```

这将使图像占据其父级的 33%，最大宽度为 360 像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:13:55.003

您可以通过以下方式实现[`media-queries`](http://www.w3.org/TR/css3-mediaqueries/)：

```
/* Normal behavior: 4 images */
.your-img {
    height: 25%;
    width: auto;
}
/* If the browser window is 800px high: 3 images */
@media (max-height:800px) {
    .your-img {
        height: 33.3%
    }
}
/* If the browser window is 600px high: 2 images */
@media (max-height:600px) {
    .your-img {
        height: 50%
    }
}
/* If the browser window is 400px high: 1 image */
@media (max-height:400px) {
    .your-img {
        height: 100%
    }
} 
```

这是一个快速而肮脏的[jsFiddle](http://jsfiddle.net/vWjsZ/1/)

也看看这个优秀的资源：

[developer.mozilla.org](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

[www.smashingmagazine.com](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:09:55.590

调整窗口大小时，您可以尝试这样的方法来调整图像大小：

```
$(window).resize(function() {
    $(".item img").css({"width": $(window).width()/3, "height": "auto"});
    $(".item").css({"width": $(".item img").width(), "heigt": $(".item img").height()});
}); 
```

但是你仍然会遇到问题，准确地填充窗口的高度或宽度，保持正确的比例。

# jquery - AJAX 异步调用——不能用回调返回数据？

> ID：14732123
> 
> 赞同：1
> 
> 时间：2013-02-06T15:03:07.250
> 
> 标签：jquery, ajax, callback

我下面有这段代码，我想在ajax调用的成功函数中返回数据。当然，如果我执行 async:false 并直接返回它，我会得到它，但我不想这样做。

如果我像现在一样运行它，信息变量是未定义的（如果我执行 async:false，它会获取信息，所以问题不是数据的内容）。

我只是不明白为什么它不起作用，我用谷歌搜索了回调函数，看来我做得对......

```
function PUT_updateSystem(id) {
    var system= {};
    system= getSystemInformation(name, function(data){
                                var system = data;
                                return system;});

    var information = system.info;

}
// Returns system information
function getSystemInformation(name,callback){
    $.ajax({
        type:"GET",
        url: getUrl(),
        cache: false,
        dataType: "json",
        success: function(data){
            callback(data);
        }
    });
} 
```

编辑：将我的代码更改为我目前拥有的

我正在使用此数据生成一个 jsTree，并为该树创建 json 数据，我正在执行上述操作，但将信息变量放入一个对象并对其进行迭代以创建节点。问题不在于树，所以我不会在这里包括它。我什至可以把这个逻辑拿出来进行测试。

那么发生了什么，

1.  页面开始加载
2.  我执行上述
3.  信息被放入一个 javascript 对象中
4.  我遍历了 javascript 对象。
5.  我收到错误“无法读取未定义的属性‘长度’”
6.  在调试时，我看到它跳过了 system.done。这是有道理的，因为它可能不会完成。

有没有办法等待它完成？

编辑：提供更多信息

> // 在一个名为 loadinfo.js 的文件中

```
// Returns system information promise
function getSystemInformation(){
    return $.ajax({
        type:"GET",
        url: getUrl(), // url is defined somewhere else
        cache: false,
        dataType: "json"
    });
}

// IN A FILE CALLED tree.js
// I have other variables from loadinfo.js that are here so they can communicate fine

    $.when(getSystemInformation(), $.Deferred(function(deferred) {
        $(deferred.resolve);
    })).done(function(data) {
        mapCache["system"] = data;
        console.log("defer DONE!!");

$.each(mapCache["system"], function(index, system) {
            var children = doDisplayChildNodes(system.name);
            ...
                    ...
}); 
```

我在 $.each 中所做的只是从 mapCache["system"] 中获取数据并创建一个“jstree”节点。我做了一个子函数来做同样的事情，因为我有与每个系统关联的子节点。所有这些逻辑都有效，因为当我将 ajax 调用设为“async:false”时它可以正常工作——所以我不会发布它。

我在 $.each 期间收到无法读取未定义的属性“长度”。这很奇怪，因为我在 mapCache 上设置了“Watch”，并且在加载所有内容后，mapCache 填充了正确的值。我正在使用谷歌浏览器调试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T15:16:49.510

您使用了回调，但是您仍然使用同步逻辑而不是异步来使用它。尝试这样做：

```
function PUT_updateSystem(id) {
    var system = getSystemInformation(name);
    system.done(function(data){
        var information = data.info;
        // do stuff with `information` here, not elsewhere.
    });
}
// Returns system information promise
function getSystemInformation(name){
    return $.ajax({
        type:"GET",
        url: getUrl(),
        cache: false,
        dataType: "json"
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:18:27.537

异步意味着当 PUT_updateSystem 已经完成时调用回调。

当您调用 getSystemInformation 时向服务器发出请求，但在调用该函数后立即继续 var information = system.info; 在服务器有时间响应so system.info之前；尚未设置。如果您的浏览器带有开发工具 IE、带有 firebug 插件的 firefox、Chrome，您只需按 F12。并运行以下代码，您可能会理解回调意味着在控制台中查看消息的含义（警报不起作用，因为它会暂停 JavaScript 执行。

```
function PUT_updateSystem(id) {
    var system= {};
    system= getSystemInformation(name, function(data){
                                var system = data;
// you re declare system here so it' actually not set
// if you want to set system in PUT_updateSystem you should
// do system = data; without the val
console.log("this comes last");
console.log("data is returned now",data);
                                return system;});
console.log("This comes first");
    var information = system.info;

}
// Returns system information
function getSystemInformation(name,callback){
    $.ajax({
        type:"GET",
        url: getUrl(),
        cache: false,
        dataType: "json",
        success: function(data){
console.log("this comes second");
            callback(data);
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:14:15.803

```
function PUT_updateSystem(id) {
    var system= {};
    system= getSystemInformation(name, callbackfunction);

    var information = system.info;

}
//callbackfuncion
function callbackfunction(data){
    var system = data;
    return system;
}
// Returns system information
function getSystemInformation(name,callback){
    $.ajax({
        type:"GET",
        url: getUrl(),
        cache: false,
        dataType: "json",
        success: function(data){
            window[callback](data);
        }
    });
} 
```

只是代替`callback(data);`
put`window[callback](data);`
并将函数名称作为变量

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-06T15:11:05.873

你做得不对，回调不返回任何数据。JavaScript 中没有等待语句。异步调用被执行，然后 JavaScript 继续处理其余代码。

你的代码应该是

```
function PUT_updateSystem(id) {
    var system= {};

    function processData(data) {
        var information = data.info;
        alert("Do next step");
    }

    system = getSystemInformation(name, processData);
} 
```

把你的逻辑分成两个步骤。

1.  进行 Ajax 调用
2.  处理回调中的数据

# eclipse - 在 Eclipse 中将颠覆用户名翻译成更有用的名称

> ID：14732124
> 
> 赞同：2
> 
> 时间：2013-02-06T15:03:09.357
> 
> 标签：eclipse, svn

这是一个很长的镜头，但是在使用 Eclipse 时，有什么方法可以将 SVN 用户名转换为更有意义的名称？

我们必须使用由另一个组织管理的存储库，我们的用户名类似于“xy12345”。我可以教我们的 Hudson 持续集成服务器 xy12345 实际上是“Fred Bloggs”，但是有没有办法在 Eclipse 中实现类似的效果？

# javascript - 查找具有条件的下一个元素

> ID：14732126
> 
> 赞同：0
> 
> 时间：2013-02-06T15:03:15.200
> 
> 标签：javascript, jquery

层次树：

```
 mouse (depth:0, sequence:0)
    *   organ system (depth:1, sequence:1)
        o   visceral organ (depth:2, sequence:2)
              urinary system (depth:3, sequence:3)
              mesentery (depth:4, sequence:4)
                  *   rest of mesentery (depth:5, sequence:5)
                  *   urogenital mesentery (depth:5, sequence:6)
              metanephros (depth:4, sequence:7)
                  *   renal capsule (depth:5, sequence:8)
                  *   nephrogenic zone (depth:5, sequence:9) 
```

我有以下代码，它应该检索所选节点之后的第一个下一个节点的名称，该节点与所选节点具有相同的深度，并且序列值应该大于 selected_node_sequence ：

```
/** node id has the same value as node_depth **/

  var selected_node_depth = parseInt($j(element).attr('APO_DEPTH'));
  var selected_node_sequence = parseInt($j(element).attr('APO_SEQUENCE'));

  var first_next_node_with_same_depth = $j("#"+selected_node_depth).next().attr("name"); [where first_next_node_with_same_depth sequence value > selected_node_sequence] 
```

例如，如果 'selected_node' = 肠系膜，则 'first_next_node_with_same_depth' 应该是后肾

任何关于如何做到这一点的建议都非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:11:39.900

用纯JS获取下一个节点的简单方法：

```
(yournode).nextElementSibling 
```

显然，您可以使用 getElementById 语句来获取节点，或者如果您已将节点存储在代码中的其他位置，则可以使用节点本身。如果您需要/提供更多信息，我们很乐意完善此答案。

# bash - 在后台自动运行 bash 脚本

> ID：14732129
> 
> 赞同：0
> 
> 时间：2013-02-06T15:03:26.047
> 
> 标签：bash

我有兴趣了解我如何能够自动执行以下操作。

现在我有一个看起来像这样的 bash 脚本：

```
#!/bin/sh
sass --watch htdocs/css/scss:htdocs/css --debug-info 
```

现在，因为我希望能够在运行此脚本的同时运行其他命令行任务，所以我可以在新窗口中运行它，但我更喜欢让它作为后台进程运行，这是我实现的经过：

*   点击 [ctrl] + [Z]
*   跑步`bg`

这让我可以继续使用命令行，同时还能看到`sass`命令的输出。

我还可以用来`jobs`查看正在运行的内容，最后`fg`将后台脚本置于最前面，并使用 [ctrl] + [c] 取消它。

所有这些都很好，但有点啰嗦——有什么方法可以编辑 bash 脚本，让它在后台自动运行，类似于我上面描述的？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:04:35.597

```
$ ./script &
           ^--- run script in background from the get-go 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-14T18:23:15.647

我发现有用的替代方法是编写一个函数 `Foo(){ Do stuff }`

并调用该函数并将其发送到后台

`Foo &`

全部**在脚本**中，所以你不必做

`script.sh &`

相反，只需调用脚本就会将其发送到后台。

# c++ - 使用临时函数对象进行全局初始化

> ID：14732132
> 
> 赞同：11
> 
> 时间：2013-02-06T15:03:44.473
> 
> 标签：c++, gcc, c++11, clang

以下代码

```
#include <random>
std::mt19937 generator((std::random_device())()); 
```

只用 clang 编译文件：

```
$ clang++ -c -std=c++0x test.cpp 
```

但使用 gcc 失败：

```
$ g++ -c -std=c++0x test.cpp 
test.cpp:3:47: erro: expected primary-expression before ‘)’ token 
```

该代码在 C++11 中有效吗？它是 GCC 中的错误还是 Clang 的扩展/错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T17:55:12.593

gcc 将子表达式解析`(std::random_device())()`为函数类型的强制转换`std::random_device()`。它有助于查看 icc 的错误输出，它比 gcc 的信息略多：

```
source.cpp(6): error: cast to type "std::random_device ()" is not allowed
  std::mt19937 generator((std::random_device())());
                          ^

source.cpp(6): error: expected an expression
  std::mt19937 generator((std::random_device())());
                                                ^ 
```

相关制作为5.4p2：

> *演员表*：
> 
> *   *一元表达式*
> *   ( *type-id* )*强制转换表达式*

由于一对空括号`()`不是一*元表达式*，因此该产生式不可用，编译器应从 5.2p1 中选择产生式：

> *后缀表达式*：
> 
> *   [...]
> *   *后缀表达式*（*表达式列表*[*选择*]）
> *   [...]

*后缀表达式*在哪里，`(std::random_device())`表达式*列表*被省略。

我已经在 gcc bugzilla 上提交了[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=56239](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=56239)，看起来应该很快就会解决。

请注意，如果您向 提供参数，`operator()`则 8.2p2 要求编译器将表达式解析为强制转换，即使强制转换为函数类型是非法的（如果有多个参数，则参数列表被解析为使用逗号运算符的*表达式：*

```
(std::less<int>())(1, 2);
^~~~~~~~~~~~~~~~~~ illegal C-style cast
 ^~~~~~~~~~~~~~~~ type-id of function type std::less<int>()
                  ^~~~~~ argument of C-style cast
                    ^ comma operator 
```

写这个的正确方法（除了使用 C++11 通用初始化语法）是添加另一层括号，因为*type-id*不能包含外括号：

```
((std::less<int>()))(1, 2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T15:16:17.620

似乎 GCC 处理函数声明的方式存在问题。举个例子：

```
struct A
{
    bool operator () () { return true; }
};

struct B
{
    B(bool) { }
};

B b((         // This cannot be parsed as a function declaration,
    A()()     // and yet GCC 4.7.2 interprets it as such:
    ));       // "error: 'type name' declared as function returning 
              // a function B b((A()()));"

int main() { } 
```

由于 周围存在额外的括号`A()()`，语法形式`B b(( A()() ));`不能被解析为函数的声明。

您问题示例中的声明略有不同：

```
B b(
   (A())()
   ); 
```

但是，即使在这种情况下，`(A())()`也不能将其解释为返回函数的函数类型`A`（总是试图将其视为`b`带有未命名参数的函数声明）。所以问题是：它可以被解释为其他什么吗？如果是这样，并且如果它在这种情况下有意义，那么编译器应该考虑将整个表达式解析为 object 的构造`b`。

这可能是 GCC 和 Clang 不同意的根本点：

```
int main()
{
    (A())(); // OK for Clang, ERROR for GCC
} 
```

`A`除了尝试构造一个临时类型并调用其调用运算符之外，我看不出如何将上述内容解释为其他任何东西。它不能是函数声明，因为如果`A`被解释为返回类型，则名称丢失（反之亦然）。

另一方面，`(A())`是创建临时类型的有效表达式`A`，并且该临时支持调用运算符（其返回类型与 的构造函数接受的类型相同`B`）。因此，`(A())()`应该是 type 的有效表达式`bool`。

由于这个原因，我认为GCC的解析是错误的。

# wpf - 显示进度条直到 window.show()

> ID：14732142
> 
> 赞同：0
> 
> 时间：2013-02-06T15:04:09.087
> 
> 标签：wpf, progress-bar

我在加载窗口时显示进度条有问题。实际上，我在数据网格中有很多项目的窗口。当我调用 window.Show() 时，它需要很长时间才能打开，所以我想知道，是否可以调用类似：

```
 ShowProgressBar spb = new ShowProgressBar();
            spb.Topmost = true;
            spb.Owner = this.Owner;
            spb.Show();

            while(mainWin.isLoaded)
                  spb.updatePB(); // this method updating progressbar.value.
mainWindow.Show(); 
```

但它根本不显示progresbarr，在加载时，只在窗口满载时显示。

有什么有用的代码吗？;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:19:26.140

您的问题是它们都在 UI 线程上，因此在完成加载 MainWindow 之前，您将无法更新进度条的 UI。解决方案是使用另一个线程来更新 ProgressBar 的 UI....

像这样的东西应该工作：

```
 Dispatcher progressDisptacher;
 var uiThread = new Thread(() =>
  {
      ShowProgressBar spb = new ShowProgressBar();
      spb.Topmost = true;
      spb.Show();
      progressDisptacher = spb.Dispatcher;

      // allowing the main UI thread to proceed 
     System.Windows.Threading.Dispatcher.Run();
   });
   uiThread.SetApartmentState(ApartmentState.STA);
   uiThread.IsBackground = true;
   uiThread.Start();

   mainWindow.Show();
   progressDisptacher.BeginInvokeShutdown(DispatcherPriority.Send); 
```

如您所见，在 mainWindow 加载后，您可以使用以下命令终止进度条线程： `progressDisptacher.BeginInvokeShutdown(DispatcherPriority.Send);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:26:25.417

我假设您想在主窗口未加载时更新进度条。所以首先你应该想要反转while循环。

然而，它有点微妙的单一问题。

欢迎来到 STA 线程极其痛苦的工作。一个快速的经验法则是，任何与您在屏幕上看到的内容有关的事情都必须通过主线程来完成。事实上，很多事情发生在您不使用主线程时，.net 使用它来重绘任何已更改的内容（例如进度条）。

为了能够显示进度条，您必须将 UI 线程的控制权返回到所谓的消息循环。最简单的方法是返回方法调用。但在此之前，您需要设置一个计时器来定期检查进度。

您当前的代码只会花一整天时间检查是否加载了 mainWindow，而不是实际加载 mainWindow。

但是mainWindow的实际加载很可能会再次需要使用主线程来构造。

Soooo ...最后，您应该 IsAsync 将项目加载到数据网格中的绑定。

# google-analytics-api - 谷歌分析 shorturlclicks 与 longurlclicks

> ID：14732143
> 
> 赞同：1
> 
> 时间：2013-02-06T15:04:15.513
> 
> 标签：google-analytics-api

我不明白谷歌分析 url-shortener 的 shortURL 历史中的**longUrlClicks参数是什么：** [https ://developers.google.com/url-shortener/v1/getting_started#url_analytics](https://developers.google.com/url-shortener/v1/getting_started#url_analytics)

如果它代表这个 url 的点击次数，那么 google 怎么知道呢？我可以假设谷歌只计算来自谷歌子域之一的点击......我是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-06T00:24:48.287

analytics.allTime.shortUrlClicks = 此短 URL 的点击次数。

analytics.allTime.longUrlClicks = 指向该长 URL 的所有 goo.gl 短 URL 的点击次数。

参考：[https ://developers.google.com/url-shortener/v1/url](https://developers.google.com/url-shortener/v1/url)

# php - 会话在本地主机上工作而不是在网络上工作

> ID：14732149
> 
> 赞同：0
> 
> 时间：2013-02-06T15:04:28.827
> 
> 标签：php, session

我有一个将变量分配给特定会话的脚本。它在本地主机上完美运行，但在线上传后，它无法在网络上运行。IE

这是通过 $_GET 将变量发送到脚本的链接

```
<a href="user_entry_chk.php?pubc_req&amp;c_id=<?php echo $course_details['id']; ?>">Register for this course</a> 
```

这是用于将变量分配给会话的脚本

```
if (isset($_REQUEST['pubc_req'])) {

$c_id = $_GET['c_id'];

session_name("pubc_cart");
session_start();

$pubc_cart = $_SESSION[pubc_cart];
if ($pubc_cart) {

//$get_pub_arr[] = array();
$pubc_cart = $_SESSION[pubc_cart];

$get_pubc_arr[] = array();
$get_pubc_arr = $_SESSION[pubc_cart];

if(in_array($c_id, $get_pubc_arr)){ 

//$_SESSION['inh_cart'] = array();

?>
    <script language="javascript">
    window.location = "user_allc_booking.php?ex_pub_cid=<?php echo $c_id; ?>";
    </script>
<?php

}
else {

//$_SESSION['pubc_cart'] = array();
$_SESSION[pubc_cart][] = $c_id;
//$pubc_cart[] = array();
//$pubc_cart = $_SESSION['pubc_cart'];

}

} else {
$_SESSION[pubc_cart][] = $c_id;
//$pubc_cart[] = array();
//$pubc_cart = $_SESSION['pubc_cart'];
}
//$_SESSION['pubc_cart'] = $pubc_cart;

?>
    <script language="javascript">
    window.location = "user_allc_booking.php";
    </script>
<?php

$pub_query_course_info = @mysql_query("select * from public_courses where id='".$c_id."'");
$pub_course_det = array();
$pub_course_det = @mysql_fetch_assoc($pub_query_course_info);   
$pub_course_title = $pub_course_det['title'];

} 
```

此外：

对于同一应用程序，还有另一个会话可以在本地和网络上完美运行。

```
This session is $_SESSION['member_id'] 
```

member_id 会话在注册课程时处理所有用户的登录 ID。除了包含课程 ID 的 pubc_cart 之外，它工作正常。

我真的很困惑。是否有另一种方法可以将变量分配给与此不同的会话，或者您是否必须在本地编写不同的脚本，然后为网络编写不同的脚本......请我在这里真的很困惑......很高兴得到帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:06:34.170

这可能是由于您的会话在另一台服务器上过期太快的原因。首先确保您正确设置会话变量。会话可能未启用或未在服务器上的 php.ini 文件中正确配置。

您可以尝试将其放在文件前面以查看任何错误。当您看到错误时，您可以找出错误的地方。

```
error_reporting(E_ALL);
ini_set('display_errors', 1); 
```

# qt - 嵌入式 linux 的 Qt 信号和插槽开销

> ID：14732152
> 
> 赞同：1
> 
> 时间：2013-02-06T15:04:34.750
> 
> 标签：qt, embedded-linux

我只是好奇我可能会在一个程序中产生多少开销......荒谬地滥用信号和插槽。我们的应用程序几乎所有东西都通过信号和插槽连接起来。我们已经将调用函数替换为用于一般数据流的信号和槽，因此我们沿着一条疯狂的链传递数据。

我已经对此设计表示了一些关注，以了解稍后调试/跟踪将是多么容易，但我对我们将看到的性能感到好奇。我们现在有一个小应用程序，但我想随着程序失控，我们会看到一些问题。

只是为了稍微了解一下我们滥用了多少信号，我们正在发出一个信号来调用一个日志记录函数

# javascript - Highcharts 重叠类别标签

> ID：14732154
> 
> 赞同：8
> 
> 时间：2013-02-06T15:04:38.303
> 
> 标签：javascript, highcharts

我需要有关 xAxis 类别标签问题的帮助。当所有类别标签都没有空间时，它们会挤在一起并相互重叠。

我已经搜索过是否可以找到某种方法来确保不会发生这种情况，首先我寻找滚动解决方案，然后进行某种缩放，最终我尝试使用 staggerLines。

问题是，如果我要使用 staggerLines，我需要根据我拥有的类别数量来设置值。如果我有 10 个或更少，则 staggerLine 值设置为 1、11-20 我希望将其设置为 2、21-30 我希望将其设置为 3，依此类推。我不能简单地将其设置为 3，因为有时它只会显示几个类别，而且使用 staggerLines 看起来不太好。

有人对如何解决这个问题有很好的建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T16:30:38.477

您根本不必使用类别。一般来说，类别可以很好地显示，例如水果或名称 - 如何定义应该显示哪个名称，哪些不应该显示？苹果比香蕉重要吗？

但是，解决方案非常简单，使用 xAxis 标签格式化程序，看看：http: [//jsbin.com/oyudan/27/edit](http://jsbin.com/oyudan/27/edit)

```
xAxis: {
  labels: {
    formatter: function(){
      return names[this.value];
    }
  }
}, 
```

# java - 处理中的 NullPointerException

> ID：14732156
> 
> 赞同：-1
> 
> 时间：2013-02-06T15:04:43.270
> 
> 标签：java, nullpointerexception, processing

我必须编写一个程序，要求用户输入 10 个名称，然后按字母顺序对名称进行排序，然后打印每个名称、多少个字符和多少个元音。我想我很接近但在处理过程中不断收到这个错误。有人能帮忙吗？

```
`Exception in thread "Animation Thread" java.lang.NullPointerException
at java.lang.String$CaseInsensitiveComparator.compare(String.java:1217)
at java.lang.String$CaseInsensitiveComparator.compare(String.java:1211)
at java.lang.String.compareToIgnoreCase(String.java:1258)
at test.setup(test.java:35)
at processing.core.PApplet.handleDraw(PApplet.java:2117)
at processing.core.PGraphicsJava2D.requestDraw(PGraphicsJava2D.java:193)
at processing.core.PApplet.run(PApplet.java:2020)
at java.lang.Thread.run(Thread.java:662)` 
```

我的代码是：

```
import javax.swing.*;
String names[] = new String[10];
String temp;
String nameInput;
int length;
int vowel = 0;
char ch;
length = 0;
// store user input to array
for (int i = 0; i < names.length; i++) {
  nameInput = JOptionPane.showInputDialog ("Enter a name:");
  names[i] = nameInput;
  length = names[i].length();

// sort into alphabetical order
  for (int j = 0; j < names.length - 1; j++) {
    for (int k = j + 1; k < names.length; k++) {
      if (names[j].compareToIgnoreCase(names[k]) > 0) {
        temp = names[j];
        names[j] = names[k];
        names[k] = temp;
      }
    }
  }
  // count vowels
  char[] characters = nameInput.toCharArray();
  for (int m = 0; m < characters.length; m++) {
    ch = nameInput.charAt(m);

    if ((ch == 'A') || (ch == 'a')
      ||  (ch == 'E') || (ch == 'e')
      ||  (ch == 'I') || (ch == 'i')
      ||  (ch == 'O') || (ch == 'o')
      ||  (ch == 'U') || (ch == 'u')) {
      vowel++;
    }
  }

  System.out.println("Name: " + names[i] + ", Length: " + length + ", Vowels: " + vowel);
  vowel = 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:06:27.640

这就是问题：

```
for (int i = 0; i < names.length; i++) {
  nameInput = JOptionPane.showInputDialog ("Enter a name:");
  names[i] = nameInput;
  length = names[i].length();

  // sort into alphabetical order
  for (int j = 0; j < names.length - 1; j++) {
    for (int k = j + 1; k < names.length; k++) {
      if (names[j].compareToIgnoreCase(names[k]) > 0) { 
```

您正在尝试*在输入 names 的同一循环中*进行排序。

所以在输入名字后，第一个元素将是非空的，但所有*其他*数组元素都是空引用，这就是导致问题的原因。

我建议你把它分成两个单独的循环：

1.  输入所有名称
2.  对它们进行排序

基本上，您需要提前关闭第一个循环：

```
for (int i = 0; i < names.length; i++) {
  // No need to use a separate variable: assign directly into the array
  names[i] = JOptionPane.showInputDialog ("Enter a name:");
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-06T15:16:42.533

您的字符串数组的语法也是错误的。

```
String names[] = new String[10]; 
```

正确的方法是：

```
String[] names = new String[10]; 
```

# awk - awk 匹配/连接两个文件，其中 1 是一个变量

> ID：14732157
> 
> 赞同：0
> 
> 时间：2013-02-06T15:04:43.773
> 
> 标签：awk

大家好，我使用两个物理文件使 awk 工作正常：

```
awk 'NR==FNR { _[$1]=$2 } NR!=FNR { if(_[$2] != "") print $0"  "_[$2]}' codes.txt text.txt 
```

我正在尝试做的事情：与其使用物理文件，不如使用变量代替第二个文件。

```
awk 'NR==FNR { _[$1]=$2 } NR!=FNR { if(_[$2] != "") print $0"  "_[$2]}' codes.txt $variable 
```

因为我必须将结果导出到物理文件，然后使用此命令将其他文件值映射到第一个文件...

我试过了

```
echo $variable|awk 'NR==FNR { _[$1]=$2 } NR!=FNR { if(_[$2] != "") print $0"  "_[$2]}' codes.txt 
```

这没有奏效:(

正如这里所问的例子：

```
cat text.txt 
564 ERR0001
535 ERR0002

 cat codes.txt 
ERR0001 This_is_error_1
ERR0002 This_is_error_2

 awk 'NR==FNR { _[$1]=$2 } NR!=FNR { if(_[$2] != "") print $0"  "_[$2]}' codes.txt text.txt 
564 ERR0001  This_is_error_1
535 ERR0002  This_is_error_2

 awk 'NR==FNR { _[$1]=$2 } NR!=FNR { if(_[$2] != "") print $0"  "_[$2]}' codes.txt text.txt |tr "_" " "
564 ERR0001  This is error 1
535 ERR0002  This is error 2 
```

* * *

这是失败：

```
gg=$(cat text.txt)

echo $gg
564 ERR0001 535 ERR0002

awk 'NR==FNR { _[$1]=$2 } NR!=FNR { if(_[$2] != "") print $0"  "_[$2]}' codes.txt $gg |tr "_" " "
awk: (FILENAME=codes.txt FNR=2) fatal: cannot open file `564' for reading (No such file or directory)

IFS=' ';
echo $gg
564 ERR0001
535 ERR0002

awk 'NR==FNR { _[$1]=$2 } NR!=FNR { if(_[$2] != "") print $0"  "_[$2]}' codes.txt $gg |tr "_" " "
awk: (FILENAME=codes.txt FNR=2) fatal: cannot open file `564' for reading (No such file or directory) 
```

按照建议加入：

```
join -1 2 -2 1 text.txt codes.txt 
ERR0001 564 This_is_error_1
ERR0002 535 This_is_error_2

join -1 2 -2 1 $gg codes.txt 
join: extra operand `ERR0002'
Try `join --help' for more information.

echo $gg
564 ERR0001
535 ERR0002 
```

三人组回答

```
echo $gg|join -1 2 -2 1 -  codes.txt 
ERR0001 564 This_is_error_1
ERR0002 535 This_is_error_2

 echo $gg|awk 'NR==FNR { _[$1]=$2 } NR!=FNR { if(_[$2] != "") print $0"  "_[$2]}' codes.txt - |tr "_" " "
564 ERR0001  This is error 1
535 ERR0002  This is error 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:13:11.220

您可以`echo`将变量传递给任何读取标准输入的命令。

对于它的价值，许多 Unix 实用程序接受一个文件名参数`-`来表示标准输入。

```
echo "$gg" | sort | join -1 2 -2 1 - text.txt 
```

最近版本的 Bash 也有`<<<"$gg"`here-string 运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:52:41.147

有[一个命令](http://linux.die.net/man/1/join)可以为您执行此操作：

```
$ join -1 2 -2 1 text.txt codes.txt 
```

# css - 更改 Sublime 文本括号/缩进规则

> ID：14732158
> 
> 赞同：2
> 
> 时间：2013-02-06T15:04:43.617
> 
> 标签：css, editor, sublimetext2

我试图弄清楚如何更改 CSS 的 Sublime Texts 自动括号规则。

我默认得到这个：

```
.class {
    #CURSOR
} 
```

我想要这个：

```
.class {
    #CURSOR} 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T17:28:11.087

您可以将此快捷方式添加到您的`Key Bindings - User`：

```
{ "keys": ["enter"], "command": "insert", "args": {"characters": "\n\t"}, "context":
    [
        { "key": "setting.auto_indent", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "preceding_text", "operator": "regex_contains", "operand": "\\{$", "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^\\}", "match_all": true },
        { "key": "selector", "operator": "equal", "operand": "source.css" }
    ]
} 
```

修改文件的`enter`关键行为`css`。

或者您可以使用代码段。`Tools/New Snippet...`：

```
<snippet>
    <content><![CDATA[
{
    ${1}}
]]>
    </content>
</snippet> 
```

将其另存为`Packages/User/CSSBrackets.sublime-snippet`.

然后，在您的文件中添加一个快捷方式以`Key Bindings - User`在按下文件时触发它：`{``css`

```
{ "keys": ["{"], "command": "insert_snippet", "args": {"name": "Packages/User/CSSBrackets.sublime-snippet"}, 
"context":
    [
        { "key": "selector", "operator": "equal", "operand": "source.css" }
    ]
} 
```

# python - 分隔符之间的 NLTK 一致性

> ID：14732167
> 
> 赞同：1
> 
> 时间：2013-02-06T15:05:22.230
> 
> 标签：python, nltk, custom-formatting

我正在使用 Python 和 NLTK 来分析一些“目标”标题。基本上，人们会设定一些目标，例如“努力工作”、“看日出”等。我想要做的是查看每个非停用词在条目列表中的出现方式和位置，并将结果转储到文件中。我知道我可以给“索引”一个宽度，这有一点帮助（帮助我从输出中删除不重要的数据）。

理想情况下，我想做的是显示逗号之间的索引（一个“目标”条目用逗号分隔）。我知道我可以使用搜索而不是 nltk 来执行此操作，但是 nltk 包要优雅得多，如果可能的话，我想使用它。

# sql - SQL 差距重叠日期范围

> ID：14732168
> 
> 赞同：0
> 
> 时间：2013-02-06T15:05:25.500
> 
> 标签：sql, sql-server-2008-r2, recursive-query

我有一个查询可以识别 sql server 2008 r2 中日期范围的间隙和重叠。每个唯一数据集有 12 条记录。我想做的是调整或添加识别间隙和重叠的代码，并将记录更新为连续的。

```
--gaps and overlaps tbl_volumes
with s as
(
select esiid,Read_Start,Read_End ,row_number() over(partition by esiid order by Read_Start) rn
from tbl_Volumes
where Status=0
group by esiid,Read_Start,Read_End)
select a.esiid, a.Read_Start, a.Read_End, b.Read_Start as nextstartdate,datediff(d,a.Read_End, b.Read_Start) as gap
into #go
from s a
join s b on b.esiid = a.esiid and b.rn = a.rn + 1
where datediff(d, a.Read_End, b.Read_Start) not in (0,1)
order by a.esiid 
```

这是我希望看到的坏记录集：

```
e                   Read_Start  Read_End    Source
10032789402145965   2011-01-21  2011-02-22  867_03_1563303
10032789402145965   2011-02-22  2011-03-21  867_03_1665865
10032789402145965   2011-03-26  2011-04-20  867_03_1782993 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:25:20.133

好吧，您可以`Read_end`根据下一个值为每条记录分配一个新值。新开始的计算可以这样完成：

```
select t.*,
       (select top 1 Read_Start
        from t t2
        where t2.e = t.e and t2.Read_Start > t.Read_Start
        order by t2.Read_Start
       ) as New_Read_End
from t 
```

你真的想更新值还是只是看看它应该是什么？

# excel - 对象集合中对象的访问 ID (VBA)

> ID：14732169
> 
> 赞同：0
> 
> 时间：2013-02-06T15:05:25.793
> 
> 标签：excel, vba

我在 VBA 中创建了一个对象集合，每个对象都有一个唯一的 ID。我知道我可以访问集合中的“项目”，这是 VBA 的内置功能。有没有办法可以访问对象的 ID？（我不确定如何设置循环..

目前我正在做类似的事情：

```
For each objectName in CollectionName

objectName.Item(index)

Next objectName 
```

这是访问集合项目的正确语法，但我无法深入研究集合以获取对象/项目的 ID……这可能吗？

仅供参考，对象的 id 设置为 mID 并且是整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:19:16.217

不幸的是，`Collection`该类没有为 ID 提供迭代器。:-(

如果你想要这个，请改用一个`Dictionary`对象！它是 `Microsoft Scripting Runtime' 的一部分（在工具->参考中选择） - 并且像集合一样工作 - 但具有许多附加功能。

这是一个例子：

```
公共子TestDictionary()
    Dim dict 作为新词典
    变暗变体

    dict.Add "Key1", 1
    dict.Add 2, "项目 2"
    dict.Add "另一个键", "blabla"

    对于 dict.Keys 中的每个 var
        Debug.Print var, dict(var)
    下一个变量
结束子

```

# android - Android列表视图 - 在列表视图行中的单独项目上接收点击事件

> ID：14732170
> 
> 赞同：1
> 
> 时间：2013-02-06T15:05:33.313
> 
> 标签：android, listview, click

我有一个列表视图，我在其中为每个项目膨胀一个线性布局。此线性布局包含 2 个相对布局。在这 2 个相对布局中的每一个中，我都使用了另一个布局，因此列表将每行显示 2 个元素。我怎么知道用户点击了这两个元素中的哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:33:54.803

我认为如果您为这两个元素分配事件，您的问题可能会得到解决。在适配器的 getView 方法中，您需要分配 clickListener 事件并将标记设置为两个视图。例如：

```
 relativeLayout1.setOnClickListener(yourClickListener);
        relativeLayout1.setTag(yourPositionTag);
        relativeLayout2.setOnClickListener(yourClickListener);
        relativeLayout2.setTag(yourPositionTag); 
```

这样，您就可以检测在 onClick 方法中选择了哪个视图：

```
 public void onClick(View v) {
    yourTag = v.getTag();
    switch (v.getId()) {

    case R.id.relativeLayout1:
        // your code here
        break;
    case R.id.relativeLayout2:
        // your code here
        break;
} 
```

希望这有帮助！

# android - 程序执行不正确

> ID：14732175
> 
> 赞同：-1
> 
> 时间：2013-02-06T15:05:47.680
> 
> 标签：android, android-emulator

当我单击程序中的按钮而不输入数据时，它会同时显示两个错误（我在下面的程序中突出显示）。在这里，我一次只需要得到一个错误，我的意思是当它为空时，它显示适当的一个。反之亦然..

```
b.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        if(v==findViewById(R.id.button1)) {
        et1 = (EditText) findViewById(R.id.editText1);
        if(et1.getText()!=null ) {
        try {
                radius = Double.valueOf(et1.getText().toString());
        }
        catch (Exception e) {
            Toast.makeText(getApplicationContext(), "Please enter correct value", Toast.LENGTH_SHORT).show();
        }
        }

        if(radius==0.0) {
            Toast.makeText(getApplicationContext(), "Value cannot be 0", Toast.LENGTH_SHORT).show();
        }
        try {
            output = (double) Math.round(Math.PI * radius * radius);
            String s = Double.toString(output);
            tv1.setText(s);
        }
        catch (Exception e) {
            Toast.makeText(getApplicationContext(), "Please enter correct value", Toast.LENGTH_SHORT).show();
        }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:42:51.217

do not make things more complicated as they actually are. You can be sure that a correct value was entered without any try/catch blocks. Possible approach:

```
 b.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            switch (v.getId()) {

            case R.id.button1:
                Pattern p = Pattern.compile("([0-9]*)");

                if (et1.getText().toString().trim().length() > 0) {
                    Matcher m = p.matcher(et1.getText().toString().trim());

                    if (m.matches()) {
                        radius = Double.valueOf(et1.getText().toString());
                        output = (double) Math.round(Math.PI * radius
                                * radius);
                        tv1.setText(Double.toString(output));
                    } else
                        Toast.makeText(getApplicationContext(),
                                "incorrect value", Toast.LENGTH_SHORT)
                                .show();
                } else
                    Toast.makeText(getApplicationContext(),
                            "input is empty", Toast.LENGTH_SHORT).show();

                break;

            default:
            }

        }
    }); 
```

In the above code you check if there was any text entered. The second **if** checks whether the input is numeric using a java regex. When both requirements are met you can be sure the output is calculated correctly.

BTW, using switch-case is a better approach for click listeners

# vb.net - 无法在 VBCodeProvider 中加载临时文件

> ID：14732176
> 
> 赞同：1
> 
> 时间：2013-02-06T15:05:49.927
> 
> 标签：vb.net, function

这是我的脚本代码：

```
Imports System.Diagnostics

Public Class Script
Implements IScript

Public Sub DoWork(w As WebBrowser, f As Form1) Implements IScript.DoWork
    w.Navigate("http://www.google.com")
    wait("5000")
    w.Document.All("input").InvokeMember("click")
    w.Document.All("input").SetAttribute("value", "Torrenter is the best!")
    wait("2000")
    w.Document.All("421").InvokeMember("click")
wait("1000")
End Sub

Public Sub wait(ByVal interval As Integer)
    Dim sw As New Stopwatch
    sw.Start()
    Do While sw.ElapsedMilliseconds < interval
        ' Allows UI to remain responsive
        Application.DoEvents()
    Loop
    sw.Stop()
End Sub 
```

结束类

代码内：

```
Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    If int1.Text = "1" Then
        int1.Text = "0"
        Dim script As IScript = GenerateScript(File.ReadAllText(ListBox2.Items.Item(int2).ToString()))
        script.DoWork(WebBrowser1, Me) 'Object reference not set to an instance of an object.
        int2 = int2 + 1
        int1.Text = "1"
    End If
End Sub 
```

为什么？:( 它应该在第一个脚本完成后开始下一个脚本。我尝试了 4 种方法，但我不明白为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:56:05.873

问题是您的脚本代码无法编译，但无论如何您都试图从已编译的程序集中实例化一个对象。由于编译失败，程序集实际上并不存在，因此出现错误。如果修改方法`Return`中的行`GenerateScript`，让它显示编译错误，实际问题会更清楚：

```
Dim results As CompilerResults = provider.CompileAssemblyFromSource(parameters, codes)
If results.Errors.HasErrors Then
    Dim builder As New StringBuilder()
    builder.AppendLine("Script failed to compile due to the following errors:")
    For Each i As CompilerError In results.Errors
        builder.AppendFormat("Line {0}: {1}", i.Line, i.ErrorText)
        builder.AppendLine()
    Next
    Throw New Exception(builder.ToString())
Else
    Return CType(results.CompiledAssembly.CreateInstance("Script"), IScript)
End If 
```

我怀疑它无法编译的原因之一是脚本使用`IScript`的是未定义的。它会抱怨它未定义的原因有两个。首先，您将`IScript`接口声明为嵌套在`Form1`类中。您应该将它移到表单类之外，这样它就不会嵌套在任何其他类型中。其次，您没有指定完整的命名空间，也没有在脚本中导入命名空间。您可以`Imports`在编译之前自动将该行添加到脚本代码的开头，如下所示：

```
Dim interfaceNamespace As String = GetType(IScript).Namespace
Dim codes As String = "Imports " & interfaceNamespace & Environment.NewLine & code 
```

正如我在上面的评论中提到的，你真的应该将一个字符串数组传递给`CompileAssemblyFromSource`方法，而不是一个字符串。我不确定它是如何编译的，除非那是`Option Strict Off`某种允许的东西？无论如何，它需要一个数组，所以你真的应该给它一个，像这样：

```
Dim interfaceNamespace As String = GetType(IScript).Namespace
Dim codeArray() As String = New String() {"Imports " & interfaceNamespace & Environment.NewLine & code}
Dim results As CompilerResults = provider.CompileAssemblyFromSource(parameters, codeArray) 
```

脚本无法编译的另一个明显原因是因为您使用了`Form1`类的方法和属性，就好像它是该类的成员一样。请记住，`Script`脚本文件源代码定义的类是单独程序集中的一个完全独立的类。除非你给它一个引用，否则它不会引用表单，例如，你可以像这样定义接口：

```
Public Interface IScript
    Sub DoWork(f As Form1)
End Interface 
```

然后，在您的脚本中，您可以这样做：

```
Public Class Script
    Implements IScript
    Public Sub DoWork(f As Form1) Implements IScript.DoWork
        f.WebBrowser1.Navigate("http://www.google.com")
        f.wait("5000")
        f.wait("4000")
        f.WebBrowser1.Document.All("input").InvokeMember("click")
        f.WebBrowser1.Document.All("input").SetAttribute("value", "User")
        f.wait("2000")
        f.WebBrowser1.Document.All("421").InvokeMember("click")
    End Sub
End Class 
```

## 更新

好的，既然你不能让它工作，而且我不希望整个对话完全失败，我就整理了一个工作项目并对其进行了测试。这是您需要执行的操作才能使其正常工作。

**IScript.vb 的内容**

```
Public Interface IScript
    Sub DoWork(w As WebBrowser)
End Interface 
```

**Form1.vb 的内容**

```
Imports Microsoft.VisualBasic
Imports System.CodeDom.Compiler
Imports System.Reflection
Imports System.IO
Imports System.Text

Public Class Form1
    Dim int1 As Integer = 0
    Dim int2 As Integer = 0
    Dim p As Point

    Public Function GenerateScript(ByVal code As String) As IScript
        Using provider As New VBCodeProvider()
            Dim parameters As New CompilerParameters()
            parameters.GenerateInMemory = True
            parameters.ReferencedAssemblies.Add(GetType(WebBrowser).Assembly.Location)
            parameters.ReferencedAssemblies.Add(Assembly.GetExecutingAssembly().Location)
            Dim interfaceNamespace As String = GetType(IScript).Namespace
            code = "Imports System.Windows.Forms" & Environment.NewLine & "Imports " & interfaceNamespace & Environment.NewLine & code
            Dim results As CompilerResults = provider.CompileAssemblyFromSource(parameters, code)
            If results.Errors.HasErrors Then
                Dim builder As New StringBuilder()
                builder.AppendLine("Script failed to compile due to the following errors:")
                For Each i As CompilerError In results.Errors
                    builder.AppendFormat("Line {0}: {1}", i.Line, i.ErrorText)
                    builder.AppendLine()
                Next
                Throw New Exception(builder.ToString())
            Else
                Return CType(results.CompiledAssembly.CreateInstance("Script"), IScript)
            End If
        End Using
    End Function

    Public Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        For Each File As FileInfo In New System.IO.DirectoryInfo(Application.StartupPath & "/scripts").GetFiles
            If CheckedListBox1.GetItemCheckState(int2) = CheckState.Checked Then
                ListBox1.Items.Add(File.FullName)
            End If
            int2 = int2 + 1
        Next
        int2 = 0
        Dim script As IScript = GenerateScript(File.ReadAllText(ListBox1.Items.Item(int2).ToString()))
        script.DoWork(WebBrowser1)
    End Sub
End Class 
```

**脚本文件的内容**

```
Imports System.Diagnostics

Public Class Script
    Implements IScript

    Public Sub DoWork(w As WebBrowser) Implements IScript.DoWork
        w.Navigate("http://www.google.com")
        wait("5000")
        wait("4000")
        w.Document.All("input").InvokeMember("click")
        w.Document.All("input").SetAttribute("value", "User")
        wait("2000")
        w.Document.All("421").InvokeMember("click")
    End Sub

    Public Sub wait(ByVal interval As Integer)
        Dim sw As New Stopwatch
        sw.Start()
        Do While sw.ElapsedMilliseconds < interval
            ' Allows UI to remain responsive
            Application.DoEvents()
        Loop
        sw.Stop()
    End Sub
End Class 
```

# android - Android Activity 到 Fragments 列表视图

> ID：14732182
> 
> 赞同：0
> 
> 时间：2013-02-06T15:06:07.997
> 
> 标签：android, android-layout, android-intent, android-fragments, android-fragmentactivity

您好，我已经构建了智能手机应用程序，但现在我开始着手一个项目，以使我的应用程序与平板电脑兼容。现在我正在使用片段，这是我第一次使用片段，所以这就是为什么我需要你的建议，请帮助或用我的代码给我示例。非常感谢

我的代码我的“新闻”类：

```
import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;

public class Nieuws extends FragmentActivity{

    // Connection detector
    //ConnectionDetector cd;

    // Alert dialog manager
    //AlertDialogManager alert = new AlertDialogManager();

    // Progress Dialog
    //private ProgressDialog pDialog;

    private static String URL = "http://localhost/fetch.php?page=2&android";

    // JSON Node namen
    static final String TAG_DATA = "data";
    static final String TAG_ID = "id";
    static final String TAG_CATEGORY = "category";
    static final String TAG_TITLE = "title";
    static final String TAG_AUTHOR = "author";
    static final String TAG_DATE = "date";
    static final String TAG_INTRODUCTION = "introduction";
    static final String TAG_CONTENT = "content";
    static final String TAG_THUMBNAIL = "thumbnail";
    static final String TAG_MEDIA = "media";
    static final String TAG_SOURCE = "source";
    static final String TAG_LINKEDMEDIA = "linkedMedia"; //array waarin de plaatjes zitten*/

    // Nieuws JSONArray
    JSONArray newsArray;

    ListView list;
    LazyAdapter adapter;

    private PullToRefreshListView mPullRefreshListView;

    ArrayList<HashMap<String, String>> newsList; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.nieuws);
    //list=(ListView)findViewById(R.id.list);
    mPullRefreshListView = (PullToRefreshListView) findViewById(R.id.pull_to_refresh_listview);

/*    FragmentManager fm = getSupportFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();

    StartFragment myFragment = new StartFragment();
    ft.add(R.id.myFragment, myFragment);
    ft.commit();*/

    /*  cd = new ConnectionDetector(getApplicationContext());

    // Check for internet connection
    if (!cd.isConnectingToInternet()) {
        // Internet Connection is not present
        alert.showAlertDialog(Nieuws.this, "Internet Connectie Error", "Zorg voor een werkende internet connectie", false);
        // stop executing code by return
        return;
    }*/

    // Set a listener to be invoked when the list should be refreshed.
    mPullRefreshListView.setOnRefreshListener(new OnRefreshListener<ListView>() {
        @Override
        public void onRefresh(PullToRefreshBase<ListView> refreshView) {

            // Do work to refresh the list here.
            new GetJSONData().execute();
        }
    });

    //Async 
    new GetJSONData().execute();

}

class GetJSONData extends AsyncTask<Void, Void, ArrayList<HashMap<String, String>>>{

    /**
     * Before starting background thread Show Progress Dialog
     */
    @Override
    protected void onPreExecute(){
        super.onPreExecute();
        //pDialog = new ProgressDialog(Nieuws.this);
        //pDialog.setMessage("Nieuws laden ...");
        //pDialog.setIndeterminate(false);
        //pDialog.setCancelable(false);
        //pDialog.show();   
    }

    /**
     * Get de json
     */
@Override
protected ArrayList<HashMap<String, String>> doInBackground(Void... arg0) {
    // Hashmap voor listView
    final ArrayList<HashMap<String, String>> newsList = new ArrayList<HashMap<String, String>>();

    // Maak een JSON Parser instance
    JSONParser jParser = new JSONParser();

    // Pakt JSON string uit URL
    JSONObject json = jParser.getJSONFromUrl(URL);

    try{
        // Pakt de Array van Nieuwsartikelen
        newsArray = json.getJSONArray(TAG_DATA);

        // Loop door alle Nieuwsartikels
        for(int i=0; i < newsArray.length(); i++){
            JSONObject c = newsArray.getJSONObject(i);

            // Het plaatsen van elk json item in variabele
            String title = c.getString(TAG_TITLE);
            String content = c.getString(TAG_CONTENT);
            String date = c.getString(TAG_DATE);
            //String introduction = c.getString(TAG_INTRODUCTION);
            String thumbnail = c.getString(TAG_THUMBNAIL);
            String linkedMedia = c.getString(TAG_LINKEDMEDIA);

            //String thumbnailName = c.getString(TAG_THUMBNAIL);
            //String thumbnailFormat = "http://iappministrator.com/mooiwark/media/%s";
            //String thumbnail = String.format(thumbnailFormat, thumbnailName);

            // maak een nieuwe HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // voeg elk item child node in de Hashmap -> value
            map.put(TAG_TITLE, title);
            map.put(TAG_CONTENT, content);
            map.put(TAG_DATE, date);
            //map.put(TAG_INTRODUCTION, introduction);
            map.put(TAG_THUMBNAIL, thumbnail);
            map.put(TAG_LINKEDMEDIA, linkedMedia);

            // voeg de HashList toe aan ArrayList
            newsList.add(map);

             // Click event for single list row
           mPullRefreshListView.setOnItemClickListener(new OnItemClickListener(){
            //list.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {

                    HashMap<String, String> map = newsList.get(position - 1);
                     Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);

                    //Intent in = new Intent(SingleMenuItemActivity.this, org.scout.android.library.LibraryDetail.class);
                    in.putExtra(TAG_TITLE, map.get(TAG_TITLE));
                    in.putExtra(TAG_CONTENT, map.get(TAG_CONTENT));                         
                    in.putExtra(TAG_DATE, map.get(TAG_DATE));
                    //in.putExtra(TAG_INTRODUCTION, map.get(TAG_INTRODUCTION));
                    in.putExtra(TAG_THUMBNAIL, map.get(TAG_THUMBNAIL));
                    in.putExtra(TAG_LINKEDMEDIA, map.get(TAG_LINKEDMEDIA));

                    startActivity(in);

                }
            });
        }
    } catch(JSONException e){
        e.printStackTrace();
    }
    return newsList;
}
@Override
protected void onPostExecute(ArrayList<HashMap<String, String>> result) {

    //De items worden ingeladen
    adapter=new LazyAdapter(Nieuws.this, result, R.layout.list_row, 
            new String[]{TAG_TITLE, TAG_CONTENT, TAG_DATE, TAG_THUMBNAIL}, new int[] {
            R.id.title, R.id.subtitle, R.id.date, R.id.list_image});   //TAG_INTRODUCTION mist nog 
    //list.setAdapter(adapter);
    mPullRefreshListView.setAdapter(adapter);

    // dismiss the dialog after getting all deelnemers
    //pDialog.dismiss();

    mPullRefreshListView.onRefreshComplete();

    super.onPostExecute(result);
        }
    }
} 
```

在此活动中，它通常会在单击时加载内容。这个类是我试图变成片段类“SingleMenuItemActivity”类的类：

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;
import android.widget.TextView;

public class SingleMenuItemActivity  extends Fragment {

    // JSON node keys
    private static final String TAG_TITLE = "title";
    private static final String TAG_CONTENT = "content";
    private static final String TAG_DATE = "date";
    private static final String TAG_LINKEDMEDIA = "linkedMedia";
    //private static final String TAG_THUMBNAIL = "thumbnail";

    // Connection detector
    ConnectionDetector cd;

    // Alert dialog manager
    AlertDialogManager alert = new AlertDialogManager();

    /*@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.single_list_item);*/
   View view;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        view = inflater.inflate(R.layout.single_list_item, container, false);

        return view;

        cd = new ConnectionDetector(getActivity().getApplicationContext());

        // Check for internet connection
        if (!cd.isConnectingToInternet()) {
            // Internet Connection is not present
            alert.showAlertDialog(getActivity(), "Internet Connectie Error", "Zorg voor een werkende internet connectie", false);
            // stop executing code by return
            return;
        }

        // getting intent data

        Intent in = getIntent().getExtras();

        //final String image_url = in.getStringExtra(TAG_THUMBNAIL);
        final String image_url = in.getStringExtra(TAG_LINKEDMEDIA);

        ImageView imgv = (ImageView) getView().findViewById(R.id.images_label);
        ImageLoader imageLoader = new ImageLoader(getActivity().getApplicationContext());
        imageLoader.DisplayImage(image_url, imgv);

        // Get JSON values from previous intent
        String title = in.getStringExtra(TAG_TITLE);
        String date = in.getStringExtra(TAG_DATE);
        String message = in.getStringExtra(TAG_CONTENT);
        //String images = in.getStringExtra(TAG_IMAGES);
        //Bitmap bitmap = in.getParcelableExtra(TAG_IMAGES);
        //ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image);

        // Displaying all values on the screen
        TextView lblTitle = (TextView)getView().findViewById(R.id.title_label);
        TextView lblDate = (TextView) getView().findViewById(R.id.date_label);
        TextView lblMessage = (TextView) getView().findViewById(R.id.message_label);
        //ImageView lblImages = (ImageView) findViewById(R.id.images_label); 
        //TextView lblImages = (TextView) findViewbyId(R.id.images_label);

        // loader image
        //int loader = R.drawable.loader;
        System.out.println("Ja en nu werkt het niet meer");

        // image url
        //String image_url = "http://d24w6bsrhbeh9d.cloudfront.net/photo/5614379_460s.jpg";

       //ImageLoader imgLoader = new ImageLoader(getApplicationContext());
        //-imgLoader.DisplayImage(song.get(CustomizedListView.TAG_IMAGES), lblImages);
        System.out.println("Error? haha bam jammer dan:");
       //imgLoader.DisplayImage(images, lblImages);
        //System.out.println("Plaatjes?:"+ images);

        lblTitle.setText(title);
        lblDate.setText(date);
        lblMessage.setText(message);

        //lblImages.setImageURI(Uri.parse(images));

        //ImageLoader imageLoader = new ImageLoader(getApplicationContext());
        //imageLoader.DisplayImage(images,lblImages);

        //lblImages.setImageResource(images);
        //imageLoader.displayImage(images);
        //lblImages.setImageBitmap(bitmap);
        //lblImages.setImageResource(R.drawable.bitmap);
        //lblImages.setImageResource(images);
        /*if (d instanceof BitmapDrawable) {
            Bitmap bm = ((BitmapDrawable)d).getBitmap();
            //Maybe more code here?
            lblImages.setImageBitmap(bm);
    }*/
        //lblImages.setImageResource(images);
        //lblImages.DisplayImage(images);
        //lblImages.DisplayImage(images);
    }
} 
```

现在我正在进入我不理解的部分，我的 Intent in = getIntent() 不起作用我得到错误。有人可以指导我将代码从活动转换为片段吗？非常感谢

截屏： ![在此处输入图像描述](../Images/0e51c8707bb39581cbd3ab79ccf6baf3.png)

左“新闻类”右“SingleMenuItemActivity”

当我单击左侧类中的 onclick 时出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:47:37.360

首先，我建议您为列表使用 ListFragment 并为 onclick 事件定义一个侦听器（此侦听器可能是您的 Nieuws 活动）。

然后你需要有2个布局。经典的一个片段：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/onepane_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_horizontal"
    android:orientation="vertical" >
</LinearLayout> 
```

另一个有两个片段：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:id="@+id/towpane_layout">
    <fragment android:id="@+id/listFragment"
              android:layout_height="fill_parent"
              android:name="com.example.MyListFragment"
              android:layout_width="400dp"
              android:layout_marginRight="10dp"/>
    <fragment android:id="@+id/displayFragment"
              android:layout_height="fill_parent"
              android:name="com.example.MyDisplayFragment"
              android:layout_width="fill_parent" />
</LinearLayout> 
```

在您的 Nieuws Activity 中，您将检查加载的布局是否有两个片段，如果没有，您将使用片段管理器加载 ListFragment

```
//Check that the activity is not using the layout with fragment;
        if(findViewById(R.id.onepane_layout) != null) {
            if (savedInstanceState != null) {
                return;
            }
            MyListFragment lFragment = new MyListFragment ();

            // In case this activity was started with special instructions from an Intent,
            // pass the Intent's extras to the fragment as arguments
            lFragment .setArguments(getIntent().getExtras());

             getFragmentManager().beginTransaction()
             .add(R.id.onepane_layout, lFragment ).commit();
        } 
```

然后在您的项目选择方法中，如果您处于单窗格模式，您需要再次加载显示片段：

```
MyDisplayFragment dispFrag = (MyDisplayFragment)
                getSupportFragmentManager().findFragmentById(R.id.displayFragment);

 if (dispFrag != null) {
        // If display frag is available, we're in two-pane layout...

        // Call a method in the DisplayFragment to update its content
        dispFrag.updateView(position);

    } else {
        // If the frag is not available, we're in the one-pane layout and must swap frags...

        // Create fragment and give it an argument for the selected article
        MyDisplayFragment newFragment = new MyDisplayFragment ();
        Bundle args = new Bundle();
        args.putInt(MyDisplayFragment.ARG_POSITION, position);
        newFragment.setArguments(args);
        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

        // Replace whatever is in the fragment_container view with this fragment,
        // and add the transaction to the back stack so the user can navigate back
        transaction.replace(R.id.fragment_container, newFragment);
        transaction.addToBackStack(null);

        // Commit the transaction
        transaction.commit();
    } 
```

还有更多要解释的，但这是基础知识。您可能需要检查这两个有用的链接：http: [//developer.android.com/training/multiscreen/adaptui.h​​tml](http://developer.android.com/training/multiscreen/adaptui.html)

[http://developer.android.com/training/basics/fragments/fragment-ui.html](http://developer.android.com/training/basics/fragments/fragment-ui.html)

您还需要处理屏幕旋转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:53:45.103

在你的`FragmentActvity`，而不是创建`Intent`，你需要创建对象`Bundle`

```
mPullRefreshListView.setOnItemClickListener(new OnItemClickListener(){
    //list.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {

        HashMap<String, String> map = newsList.get(position - 1);
        Bundle in = new Bundle();
        in.putString("TAG_TITLE",map.get(TAG_TITLE));

        in.putString(TAG_TITLE, map.get(TAG_TITLE));
        in.putString(TAG_CONTENT, map.get(TAG_CONTENT));                         
        in.putString(TAG_DATE, map.get(TAG_DATE));
        //in.putExtra(TAG_INTRODUCTION, map.get(TAG_INTRODUCTION));
        in.putString(TAG_THUMBNAIL, map.get(TAG_THUMBNAIL));
        in.putString(TAG_LINKEDMEDIA, map.get(TAG_LINKEDMEDIA));
        SingleMenuItemActivity singleMenu = new SingleMenuItemActivity(in); 
        FragmentManager fragmentManager=getFragmentManager();
        FragmentTransaction fragmentTransaction=fragmentManager.beginTransaction();
        fragmentTransaction.add(android.R.id.content, SingleMenuItemActivity);
        fragmentTransaction.addToBackStack("");//if needed
        fragmentTransaction.commit();

    }
});
} 
```

在你的`SingleMenuItemActivity`类中创建构造函数，它接受参数一个`Bundle`对象

```
public DetailActvity(Bundle bundle)
    {
    this.bundle=bundle;//update global Bundle object
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);

        mView= inflater.inflate(R.layout.YOUR_FRAGMENT_LAYOUT, container,false);

        imgView = (ImageView)mView.findViewById(R.id.imageView1);

        tvDetail = (TextView)mView.findViewById(R.id.tvDetail);
        String detail=bundle.getString("KEY");
        tvDetail.setText(detail);
        String image=bundle.getString("KEY");
        return mView;

    } 
```

# django - Django-social-auth：拆分从 Facebook 请求的权限

> ID：14732183
> 
> 赞同：0
> 
> 时间：2013-02-06T15:06:07.923
> 
> 标签：django, django-socialauth

Facebook 建议您仅在需要时请求所需的权限。我有一个带有 facebook 登录的 Django 应用程序，还有一个发布到 facebook 的功能。目前，我要求使用 django-social-auth 注册两个权限。所以在我的设置中，我有：

```
FACEBOOK_EXTENDED_PERMISSIONS = ["email", "publish_stream"]
FACEBOOK_EXTRA_DATA = [("gender", "username")] 
```

但这怎么能拆分，所以在注册时我只要求：

```
FACEBOOK_EXTENDED_PERMISSIONS = ["email"] 
```

当用户尝试发布到他或她的时间线时，我还要求：

```
FACEBOOK_EXTENDED_PERMISSIONS = ["publish_stream"] 
```

# google-maps - markerclusterer 测试文件不工作

> ID：14732189
> 
> 赞同：1
> 
> 时间：2013-02-06T15:06:17.943
> 
> 标签：google-maps, markerclusterer

我犹豫要不要发布这个项目——我一定是犯了一个简单的错误。

我复制了 MarkerClusterer 的示例代码并链接到[http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerclusterer](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerclusterer)上的数据源文件和 markerclusterer 源文件，但是当我在localhost，它会引发“错误：ReferenceError：未定义MarkerClusterer”的错误。

我也尝试将 json 文件和 js 文件复制到我的本地服务器，但得到了同样的错误。

这是我的代码。谁能告诉我我犯了什么愚蠢的错误，好吗？

```
<!DOCTYPE>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>MarkerClusterer v3 Example</title>

    <style type="text/css">
      body {
        margin: 0;
        padding: 10px 20px 20px;
        font-family: Arial;
        font-size: 16px;
      }

      #map-container {
        padding: 6px;
        border-width: 1px;
        border-style: solid;
        border-color: #ccc #ccc #999 #ccc;
        -webkit-box-shadow: rgba(64, 64, 64, 0.5) 0 2px 5px;
        -moz-box-shadow: rgba(64, 64, 64, 0.5) 0 2px 5px;
        box-shadow: rgba(64, 64, 64, 0.1) 0 2px 5px;
        width: 600px;
      }

      #map {
        width: 600px;
        height: 400px;
      }

    </style>

    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/data.json"></script>
    <script type="text/javascript">
      var script = '<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js ';
      if (document.location.search.indexOf('compiled') !== -1) {
        script += '_compiled';
      }
      script += '.js"><' + '/script>';
      document.write(script);
    </script>

    <script type="text/javascript">
      function initialize() {
        var center = new google.maps.LatLng(37.4419, -122.1419);

        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 3,
          center: center,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        var markers = [];
        for (var i = 0; i < 100; i++) {
          var dataPhoto = data.photos[i];
          var latLng = new google.maps.LatLng(dataPhoto.latitude,
              dataPhoto.longitude);
          var marker = new google.maps.Marker({
            position: latLng
          });
          markers.push(marker);
        }
        var markerCluster = new MarkerClusterer(map, markers);
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <h3>A simple example of MarkerClusterer (100 markers)</h3>
    <p>
      <a href="">Compiled</a> |
      <a href="">Standard</a> version of the script.
    </p>
    <div id="map-container"><div id="map"></div></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:36:24.840

我建议改变这个：

```
 <script type="text/javascript">
      var script = '<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js ';
      if (document.location.search.indexOf('compiled') !== -1) {
        script += '_compiled';
      }
      script += '.js"><' + '/script>';
      document.write(script);
    </script> 
```

至：

```
<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js"></script> 
```

（将文件复制到本地服务器并在那里引用它通常更安全，除非它是[谷歌托管库](https://developers.google.com/speed/libraries/)）

[MarkerClusterer 的工作示例](http://www.geocodezip.com/v3_MW_example_map3_clustered.html)

# html - 如何在 HTML 中正确显示面板？

> ID：14732190
> 
> 赞同：0
> 
> 时间：2013-02-06T15:06:18.163
> 
> 标签：html, panel, fragment-identifier

我正在构建一个包含完整窗口画布的 HTML5 游戏。我想偶尔在画布上显示一个面板，用于显示设置等。

实现这一点的一种方法`<div id="panel">`是使用默认隐藏并绝对位于画布顶部的 a。当用户想要显示面板时，我可以简单地使用 jQuery 来显示面板。

我还希望服务器能够使用片段标识符打开此面板。

请有人解释（其中一种）显示和隐藏面板的最佳方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:50:14.143

考虑到您想要实现的目标，我会采用其中一种方法：

**AJAX**

*   创建一个处理*面板中所有内容的 JavaScript 对象*
*   创建一个可以根据用户的操作显示/隐藏面板的句柄（例如`onclick`）
*   设置检查服务器上的某些内容是否已更改的时间间隔
    *   如果`true`使用此调用的响应（可能是 JSON 对象）来更新显示面板

**HTML5 网络套接字**

另一种可能性是使用 HTML5 WebSockets。使用 WebSocket，您可以在服务器和浏览器之间建立全双工连接：

> WebSocket 是一种通过单个 TCP 连接提供全双工通信通道的 Web 技术。[…] WebSocket 旨在在 Web 浏览器和 Web 服务器中实现，但它可以被任何客户端或服务器应用程序使用。WebSocket 协议是一个独立的基于 TCP 的协议。它与 HTTP 的唯一关系是它的握手被 HTTP 服务器解释为升级请求。[1] WebSocket 协议使浏览器和网站之间的更多交互成为可能，促进实时内容和实时游戏的创建。[…]

来自[Wikipedia.org “WebSocket”](http://en.wikipedia.org/wiki/WebSockets)

您可以在这篇文章中找到很多很好的示例和信息：
[学习 HTML5 WebSocket 的好资源是什么？](https://stackoverflow.com/questions/4262543/what-are-good-resources-for-learning-html5-websocket)

# spring - ActiveMQ，骆驼，春天，简单的路线不起作用

> ID：14732192
> 
> 赞同：0
> 
> 时间：2013-02-06T15:06:20.740
> 
> 标签：spring, jms, activemq, apache-camel

我在使用简单的骆驼路由时遇到了一些问题，该路由应该从我拥有的 ActiveMQ 主题中获取消息，然后通过使用 log 将消息的内容打印到控制台。

现在它只是 camel-context.xml 和一个 java 类，它在 ActiveMQ 中生成主题并将简单的字符串消息添加到队列中。我正在使用 ActiveMQ 接口来检查是否正在创建主题，并且确实是，但是我的消息没有被添加到主题中，也没有通过骆驼路由进行路由。运行 main 我可以将我的 sys 的输出输出到控制台，我在 activemq 接口中看到 1 条消息“入队”，1 条消息“出队”。我只是没有从我的路由中的“日志消息”获得任何输出到控制台。

任何帮助或提示将不胜感激，因为我对所有这 3 种技术都是新手，我只想让这个简单的“Hello World”工作。

谢谢！这两个文件在下面找到：

经过进一步测试后，我认为这与我尝试记录消息内容的方式有关，因为我知道它正在选择我的骆驼路线，因为我添加了第二个主题并告诉骆驼路线将消息路由到它，如下所示：

到 uri="activemq:topic:My.SecondTestTopic"

我可以看到是否被重定向到 activeMQ 接口中的该队列。

* * *

## TestMessageProducer.java

```
package com.backend;

import javax.jms.*;

import org.apache.activemq.ActiveMQConnection;
import org.apache.activemq.ActiveMQConnectionFactory;

public class TestMessageProducer {

 private static String url = ActiveMQConnection.DEFAULT_BROKER_URL;

    public static void main(String[] args) throws JMSException {

        ConnectionFactory connectionFactory = new ActiveMQConnectionFactory(url);
        Connection connection = connectionFactory.createConnection();
        connection.start();

        Session session = connection.createSession(false,
                Session.AUTO_ACKNOWLEDGE);

        Topic topic = session.createTopic("My.TestTopic");

        MessageProducer producer = session.createProducer(topic);

        TextMessage message = session.createTextMessage();

        message.setText("THIS IS A TEST TEXT MESSAGE BEING SENT TO THE TOPIC AND HOPEFULLY BEING PICKED UP BY THE" +
                "CAMEL ROUTE");

        producer.send(message);
        System.out.println("Sent message '" + message.getText() + "'");

        connection.close();
    } 
```

}

* * *

## 骆驼上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<spring:beans xmlns:spring="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://camel.apache.org/schema/spring"
xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:alch="http://service.alchemy.kobie.com/"
xsi:schemaLocation="http://www.springframework.org/schema/beans classpath:META-INF/spring/spring-beans.xsd 
    http://camel.apache.org/schema/spring classpath:META-INF/spring/camel-spring.xsd">

<!-- load properties -->
<spring:bean
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <spring:property name="locations" value="file:backend.properties" />
</spring:bean>

<spring:bean id="properties"
    class="org.apache.camel.component.properties.PropertiesComponent">
    <spring:property name="location" value="file:backend.properties" />
</spring:bean>

<spring:bean id="jmsConnectionFactory" 
    class="org.apache.activemq.ActiveMQConnectionFactory">
    <spring:property name="brokerURL" value="tcp://0.0.0.0:61616?useLocalHost=true" />
</spring:bean>

<spring:bean id="pooledConnectionFactory" 
    class="org.apache.activemq.pool.PooledConnectionFactory">
    <spring:property name="maxConnections" value="8" />
    <spring:property name="maximumActive" value="500" />
    <spring:property name="connectionFactory" ref="jmsConnectionFactory" />
</spring:bean>

<spring:bean id="jmsConfig" 
    class="org.apache.camel.component.jms.JmsConfiguration">
    <spring:property name="connectionFactory" ref="pooledConnectionFactory"/>
    <spring:property name="transacted" value="false"/>
    <spring:property name="concurrentConsumers" value="1"/>
</spring:bean>

<spring:bean id="activemq" 
    class="org.apache.activemq.camel.component.ActiveMQComponent">
    <spring:property name="configuration" ref="jmsConfig"/>
</spring:bean>

<!-- camel configuration -->

 <camelContext xmlns="http://camel.apache.org/schema/spring">
<route>
  <from uri="activemq:topic:My.TestTopic"/>
  <log message="Output of message from Queue: ${in.body}"/>
  <to uri="activemq:topic:My.SecondTestTopic" />
</route> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:47:54.337

并且您首先启动了 Camel 应用程序。例如，当您向主题发送非持久性消息时。如果发送时没有活跃的订阅者，那么任何人都不会收到消息。您可能想改用持久性持久主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:01:21.690

我怀疑您正在创建 ActiveMQ 代理的两个单独实例。您可以更新您的**TestMessageProducer**以使用 URL *tcp://localhost:61616*吗？另外，您可以使用 jconsole 检查两个 VM 上的 activemq 实例中的主题活动吗？

**=== 更新 ===**

我错过了有关您验证第二个主题确实收到了消息的信息，因此您的路线正在运行....必须是记录器。如果您的 IDE 中有骆驼源代码，您可以打开调试器并在其上放置一个断点

```
org.apache.camel.component.log.LogProducer
    .process(Exchange exchange, AsyncCallback callback) 
```

看看会发生什么以及它是否被调用。您配置了哪个日志记录包？

# ruby-on-rails - 包括对 to_json 调用的方法

> ID：14732197
> 
> 赞同：0
> 
> 时间：2013-02-06T15:06:30.723
> 
> 标签：ruby-on-rails, json, paperclip, rails-activerecord

我正在尝试从一个`ActiveRecord::Base`对象渲染一个 json，包括`paperclip`'s 方法。

```
> i = Model.last
> i.to_json methods: :picture
=> # Successful output 
```

问题是，我需要`.picture.url(:tiny)`而且`to_json methods: 'picture.url(:tiny)'`不工作。**有没有办法让`to_json`工作或者我必须以其他方式解决这个问题？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:10:43.147

在您的图片模型中，创建一个名为`picture_avatar`

```
def tiny_avatar
  picture.url(:tiny)
end 
```

然后使用该方法传递给`to_json`

```
i.to_json methods: :tiny_avatar 
```

# java - GWT 编译器不会注意到代码的变化

> ID：14732198
> 
> 赞同：2
> 
> 时间：2013-02-06T15:06:30.643
> 
> 标签：java, eclipse, gwt, maven, compiler-construction

我在一个项目上使用了 GWT 插件，它是从 maven 导入的。由于某种原因，在编译我的 Web 应用程序时不会考虑我的代码中的更改。如果我在 Eclipse 中启动预览模式，则会显示更改，但是当我通过控制台编译应用程序时：（`mvn clean gae:run -DskipTests`这是我可以运行我的应用程序的唯一方法，因为 GWT 开发模式不起作用 -[请参阅此线程](https://stackoverflow.com/questions/14731663/gwt-development-mode-doesnt-compile-web-application)），我仍然得到一些旧版本的 Web 应用程序，其中不包含我的更改。我已经清除了浏览器的缓存并重建了我的 eclipse 项目，但仍然没有效果。

有谁知道如何让编译器考虑我的更改？

# java - 如何更改单选按钮的高度

> ID：14732200
> 
> 赞同：1
> 
> 时间：2013-02-06T15:06:31.360
> 
> 标签：java, swing, jradiobutton

我有一个 JTable，其中 1 列每个单元格包含 3 个单选按钮

```
mgrdData.getColumnModel().getColumn(intCol).setCellRenderer(new RadioButtonRenderer());
RadioButtonEditor butEdit = new RadioButtonEditor(new JCheckBox());
mgrdData.getColumnModel().getColumn(intCol).setCellEditor(butEdit); 
```

当显示单选按钮并选择正确的单选按钮时，这可以正常工作。

但是单选按钮太大而无法完全可见，所以我想降低单选按钮的高度。

我尝试更改字体大小以及 .setSize()，但这对单选按钮的高度没有任何影响。

经过大量搜索，我能找到的只有以下内容：

```
btnVA.putClientProperty("JComponent.sizeVariant","mini");
btnUIT.putClientProperty("JComponent.sizeVariant","mini");
btnAAN.putClientProperty("JComponent.sizeVariant","mini"); 
```

其中 btnVA、btnUIT 和 btnAAN 是我的 RadioButtonRenderer 中的单选按钮。

如果您想查看更多代码，请告诉我，我将对其进行编辑。

我应该添加什么特别的东西来使单选按钮应用这个 ClientProperty？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:12:02.690

试试 setPreferredSize() // 很确定这是语法。

方法，看看是否有帮助。记得我班上有人遇到这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:19:55.873

我忽略了这段代码需要 Nimbus LookAndFeel。

为了更轻松地使用各种 LookAndFeels 进行测试，我创建了一个函数，我在 Applet 的 init() 中调用它：

```
private void setLaF()
{
  try
  {
    for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels())
    {
      if ("Nimbus".equals(info.getName()))
      {
        UIManager.setLookAndFeel(info.getClassName());
        break;
      }
    }
  } catch (Exception e)
  {
      // If Nimbus is not available, you can set the GUI to another look and feel.
  }
} 
```

调用此函数后，单选按钮的行为，并相应地改变它们的高度

# android - Google Play SDK 不在 SDK 管理器中

> ID：14732203
> 
> 赞同：0
> 
> 时间：2013-02-06T15:06:49.973
> 
> 标签：android, google-play

我需要下载 Google Play SDK（用于地图），但出于某种原因，它没有出现在 SDK 下载列表中。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T09:19:02.643

我有类似的问题......上面“强制https”的答案解决了这个问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:38:03.483

在 SDK 管理器中，转到工具菜单，然后转到选项。然后选中其写的 Force https://...... 现在附加列表将完全显示。

# jquery - 如何将 2 个 Jquery UI 日期选择器与 Knockout 链接？

> ID：14732204
> 
> 赞同：2
> 
> 时间：2013-02-06T15:06:52.363
> 
> 标签：jquery, jquery-ui, knockout.js, datepicker

我想将 startDatePicker 与 endDatePicker 链接，有没有办法将它们与 Knockout.js 链接？

当用户选择一个新的开始日期时，endDatePicker 将被更新，将 minDate 设置为新的开始日期，并且关于新日期是否在其自己的日期之后，它是否也会更新当前日期？

在此先感谢，我正在尝试使用自定义活页夹，但我无法得到任何工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:17:48.420

您可以使用`subscribe`订阅可观察对象的更改。文档在这里： http: [//knockoutjs.com/documentation/observables.html#explicitly_subscribing_to_observables](http://knockoutjs.com/documentation/observables.html#explicitly_subscribing_to_observables)

```
var ViewModel = function() {
   var self = this;
   self.startDatePicker = ko.observable();
   self.endDatePicker = ko.observable();

   self.startDatePicker.subscribe(function(newValue) {
       // set the value on the other one
   });

   self.endDatePicker.subscribe(function(newValue) {
       // set the value on the other one
   });
}; 
```

其余的取决于您的绑定...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T15:14:56.423

That code should work, when selecting a minimum date it will then set the minDate of the second datepicker to its value, vice versa for max.

```
$('#min').datepicker({
    onSelect: function( selectedDate ) {
    $( "#max" ).datepicker( "option", "minDate", selectedDate );
    }
})

$('#max').datepicker({
    onSelect: function( selectedDate ) {
    $( "#min" ).datepicker( "option", "maxDate", selectedDate );
    }
}) 
```

# highcharts - 使用 usehtml 的 Highcharts 图例样式

> ID：14732206
> 
> 赞同：6
> 
> 时间：2013-02-06T15:06:58.443
> 
> 标签：highcharts, legend

我需要使用 Highcharts (v2.3.5) 图例的分页，因为我的图表使用了大量数据系列。问题是我想在每个图例项上添加一个图像（带有专用工具提示），因此使用 useHTML 属性来启用更复杂的标签格式。

问题在于，在这种情况下，图例会溢出通常的框架并越过导航按钮，从而使它们无法使用。你会在这里找到这个问题的一个简单例子：http: [//jsfiddle.net/APtZ3/190/](http://jsfiddle.net/APtZ3/190/)

```
 legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'top',
        y: 30,
        labelFormatter: function () {return '<span>' + this.name+'</span>';},
        useHTML:true
    }, 
```

请让我知道是否有人可以帮助我。

注意：问题将通过 highcharts 新版本解决，但事实并非如此（请参阅[http://dev.highslide.com/forum/viewtopic.php?f=9&t=22192&p=86900&hilit=legend+navigation#p86900](http://dev.highslide.com/forum/viewtopic.php?f=9&t=22192&p=86900&hilit=legend+navigation#p86900)）

# php - 解析缺少节点的 XML

> ID：14732209
> 
> 赞同：0
> 
> 时间：2013-02-06T15:07:04.603
> 
> 标签：php, xml, simplexml

我有一个带有订单的 XML 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<orders>
<order order-no="1234567">
    <order-date>2012-09-15T12:28:45.000Z</order-date>
    <invoice-no>123</invoice-no>
    <customer>
        <customer-no>1234</customer-no>
        <customer-name>test</customer-name>
    </customer>
    <payments>
        <payment>
            <custom-method>
                <method-name>example</method-name>
            </custom-method>
            <amount>12334</amount>
        </payment>
    </payments>
</order>
<order>
   .......
</order>
</orders> 
```

一个文件中有许多`<order>`节点。一切都是正确的，但突然之间我收到了一个没有任何付款信息的订单

```
<orders>
<order order-no="1234567">
    <order-date>2012-09-15T12:28:45.000Z</order-date>
    <invoice-no>123</invoice-no>
    <customer>
        <customer-no>1234</customer-no>
        <customer-name>test</customer-name>
        <billing-address/>
    </customer>
    <payments/>
</order> 
```

注意空`<payments/>`节点。我的 PHP 脚本如下所示：

```
$file = file_get_contents('orders.xml');
$orders = new SimpleXMLElement($file);
foreach ($orders as $order) {
    $var = $order->payments->payment->{'custom-method'}->{'method-name'};
} 
```

对于第一个 XML 示例，一切都很好，但是当我偶然发现来自第二个 XML 示例的命令时，我的脚本抛出异常`Trying to get property of non-object`并且显然停止解析文件的其余部分。
我希望我的脚本**不会**停止，而是继续解析文件的其余部分。我不想让你成为“闭嘴”`@`操作员，但我看不到任何其他方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:17:46.027

您需要添加逻辑以确保`<payments>`有支付数据（即`payment`节点）。

```
foreach ($orders as $order) {
    if ($order->payments->count()) {
        // has payment data... run your payment code
    }
} 
```

### 更新

尽管[文档声称](http://php.net/manual/en/simplexmlelement.count.php)上述内容应该适用于 PHP > 5.3，但它`1`在 OP 的情况下返回（不知道为什么）。

最终需要以下内容：

```
count($order->payments->children()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:41:48.613

SimpleXML 带有一些*魔法*。让我们看看如何访问（现有或不存在的）`<payment>`元素：

```
$order->payments->payment 
```

这将（总是！）导致`SimpleXMLElement`无论`<payment>`元素内的`<payments>`元素计数是零还是更大。

但是，如果计数实际上为零，则访问第一个`<payment>`元素将返回`NULL`：

```
$order->payments->payment[0] 
```

这是访问第一个（SimpleXML 中从零开始的索引）支付元素。由于它不存在，因此导致`NULL`. 所以你可以检查一下：

```
foreach ($orders as $order) 
{
    if (!$order->payments->payment[0]) 
        continue;

    $var = $order->payments->payment->{'custom-method'}->{'method-name'};
} 
```

另一个答案建议使用该[`SimpleXMLElement::count()`](http://php.net/SimpleXMLElement.count%28%29)方法。它计算元素的子元素并且它也可以工作，但是另一个答案建议使用它的位置错误，正确的位置是`<payment>`元素，而不是`<payments>`元素：

```
$order->payments->payment->count() 
```

这将返回`0`您想要检查的（零）个元素。所以这同样有效：

```
foreach ($orders as $order) 
{
    if (!$order->payments->payment->count()) 
        continue;

    $var = $order->payments->payment->{'custom-method'}->{'method-name'};
} 
```

然而，这个游览并不完整，无法真正向您展示一种可能最适合`SimpleXMLElement`. 它基于空`SimpleXMLElement`等于 false 的事实：

```
foreach ($orders as $order) 
{
    if (!$order->payments->payment) 
        continue;

    $var = $order->payments->payment->{'custom-method'}->{'method-name'};
} 
```

正如所有这些示例所示，您需要稍微探索一下 SimpleXML 以了解它的魔力，以便从中受益。

如果您更喜欢魔幻程度较低的界面，请查看姐姐[`DOMDocument`](http://php.net/DOMDocument)。

并且独立于`SimpleXMLElement`，只要你有一个`Traversable`（它也是），你可以使用一个调用的函数[`iterator_count`](http://php.net/iterator_count)来返回迭代计数。对于 a`SimpleXMLElement`它意味着孩子的数量。

# jquery - 声音管理器按钮暂停声音（带内嵌播放器）

> ID：14732214
> 
> 赞同：1
> 
> 时间：2013-02-06T15:07:10.747
> 
> 标签：jquery, audio, soundmanager2

我想制作一个按钮来暂停页面上正在播放的所有声音。

我正在使用内联播放器，但希望有一个按钮来暂停页面上其他位置的声音（在导航栏中）有人知道该怎么做吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-01T15:15:17.193

如[soundManager2 API](http://www.schillmania.com/projects/soundmanager2/doc/#api)中所述，您可以在主 soundManager 对象上暂停所有

```
soundManager.pauseAll(); 
```

# java - 使用异步 Http 客户端获取响应

> ID：14732217
> 
> 赞同：0
> 
> 时间：2013-02-06T15:07:28.130
> 
> 标签：java, android, android-asynctask

早上好。我想在 TextView 中发送获取请求并显示响应。

```
public class MyHttpClient {

private static final String BASE_URL = "http://pgu.com";

private static AsyncHttpClient client = new AsyncHttpClient();

 public static void get(String url, RequestParams params, AsyncHttpResponseHandler responseHandler) {
      client.get(getAbsoluteUrl(url), params, responseHandler);
 }   
 private static String getAbsoluteUrl(String relativeUrl) {
      return BASE_URL + relativeUrl;
  }} 
```

我从这门课上打电话

```
public class MyHttpClientUsage {

Handler h;

public MyHttpClientUsage(Handler h){
    this.h = h;
}

public void getInfoAbout() throws HttpException{

    RequestParams params = new RequestParams();
    params.put("a", "Static");
    params.put("content", "47");

    MyHttpClient.get("", params, new AsyncHttpResponseHandler(){
         @Override
            public void onSuccess(String response) {
                  System.out.println(response);
                              //Simplify sending int to TextView
                  MyHttpClientUsage.this.h.sendEmptyMessage(678); 
                         }
    });
}} 
```

在活动中，我有一个处理程序来获取消息并设置 TextView

```
public class MainActivity extends Activity {

Handler h;
TextView largeText;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    largeText = (TextView) findViewById(R.id.textView1);

    h = new Handler(){

        public void handleMessage(android.os.Message msg){
            largeText.setText(msg.what);
        }

    };

    MyHttpClientUsage connect = new MyHttpClientUsage(h);
    try {
        connect.getInfoAbout();
    } catch (HttpException e) {
        e.printStackTrace();
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}} 
```

在 LogCat 我有这个警告

```
02-06 14:30:51.783: W/dalvikvm(546): threadid=1: thread exiting with uncaught exception (group=0x409961f8) 
```

和错误

```
02-06 14:30:51.833: E/AndroidRuntime(546): android.content.res.Resources$NotFoundException:   String resource ID #0x2a6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:49:20.027

如您在此处看到的 [消息。什么](http://developer.android.com/reference/android/os/Message.html#what)是 int。您将 int 传递给作为 参数的`setText`方法。将您的代码更改为：`TextView``CharSequence`

```
largeText.setText(String.valueOf(msg.what)); 
```

**或者**

```
largeText.setText(msg.what.toString()); 
```

# c# - WebRequest 和 WebClientProtocol 的通用基本类型

> ID：14732223
> 
> 赞同：0
> 
> 时间：2013-02-06T15:07:46.383
> 
> 标签：c#, .net, vb.net, web-services, security

我正在尝试使用一个函数来为 WebClientProtocol 和 WebRequest 分配凭据属性。问题是，使用 strict 选项，我找不到既继承又公开我需要的 3 个属性的基类型：

凭据、预验证、连接组名、

我正在尝试制作的简单子：

```
Private Shared Sub SecureIntegrated(ByRef webRequest As ???????)

        webRequest.Credentials = CredentialCache.DefaultNetworkCredentials
        webRequest.PreAuthenticate = True
        webRequest.ConnectionGroupName = WindowsIdentity.GetCurrent().Name

End Sub 
```

我使用适配器设计模式进行管理，但这似乎有点矫枉过正（我必须添加 2 个类和一个接口......）。谁能想到更好的方法？我对通用开放，但我想不出一个好方法让它在严格选项打开的情况下工作。

* * *

在与服务代理具有相同名称和命名空间的部分类中添加以下内容：

```
public partial class Service1
{
    protected override WebRequest GetWebRequest(Uri uri)
    {
        HttpWebRequest request = (HttpWebRequest) base.GetWebRequest(uri);
        request.KeepAlive = true;
        return request;
    }
} 
```

此示例设置`KeepAlive`标志，但可以设置许多其他内容。

# jstree - jsTree：如何添加复杂节点

> ID：14732228
> 
> 赞同：1
> 
> 时间：2013-02-06T15:08:03.510
> 
> 标签：jstree

如何在 jstree 实例中添加*分支*（即具有未知级别子节点的节点）。

```
// example of a branch (with one level)
var branch = {
    "data":"Folder 1",
    "attr":{"rel":"Layer","elt":1},
    "state":"closed",
    "children":[
        {
            "data":"Item 4",
            "attr":{"rel":"File 1","elt":2},
            "state":"",
            "children":null
        }
    ]
}; 
```

并将此分支添加到 jstree 实例中：

```
// -1 means root
$.jstree._reference('#tree').create_node(-1, 'last', branch, false, false); 
```

但它失败了！孩子不是被创造出来的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:08:03.510

我的解决方案是手动递归创建所有节点：

```
function LoadElement(node, branch) {
    data = {
        data: branch.name,
        attr: branch.attr,
        state: branch.state
    };
    var node = $.jstree._reference('#tree').create_node(
        node, 'last', data, false, false
    );
    if (typeof branch.children === 'undefined') return false;
    for (var i=0; i<branch.children.length; i++) {
        LoadElement(node, branch.children[i]);
    }
}

// -1 means root
LoadElement(-1, branch); 
```

# list - 如何匹配一个空的元组列表？

> ID：14732232
> 
> 赞同：1
> 
> 时间：2013-02-06T15:08:09.497
> 
> 标签：list, f#, tuples

以下函数在我尝试匹配空列表时给出编译错误：

```
let rec tuplesToList (acc: int list) (remaining: int*int list) =
    match remaining with
    | [] -> acc
    | (a, b) :: tail -> tuplesToList (a :: b :: acc) 
```

错误是：

```
This expression was expected to have type int * int list but here has type 'a list 
```

`remaining`当是一个简单的`int`s 列表而不是元组时，这很好用。如何匹配一个空的元组列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T15:10:49.157

`[]`可以匹配一个空的元组列表。但是根据您的类型注释，`remaining`它不是元组列表，而是包含一个 int 和一个 int 列表的元组。元组列表将是`(int*int) list`. `int * int list`被解析为`int * (int list)`，不是`(int * int) list`。

如果您修复类型，您的代码应该可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T15:17:27.473

除了 sepp2k 的观察之外，您还忘记`tail`了递归调用中的第二个参数 ( )。此外，您的代码可以在没有任何类型注释的情况下正常工作：

```
let rec tuplesToList acc remaining =
  match remaining with
  | [] -> List.rev acc //reverse to preserve original order
  | (a, b) :: tail -> tuplesToList (a :: b :: acc) tail 
```

# jquery - 如何删除jqgrid中的行

> ID：14732234
> 
> 赞同：3
> 
> 时间：2013-02-06T15:08:09.590
> 
> 标签：jquery, ajax, jqgrid

在我的 jqgrid 中，我有一个图标，当我单击它时，我必须调用 ajax 的函数来删除我的数据库中的数据。

这是代码：

```
 function loadnotespese(){
     $("#clienti-navgrid").jqGrid( {    
            ....
            colNames:['Tipo spesa','Importo','Unita di misura','Descrizione',''],                 
            colModel:[
                    {name:'category', index:'category', width:'20', sortable:false},  
                    {name:'value', index:'value', width:'10', sortable:false}, 
                    {name:'um', index:'um', width:'5', sortable:false},  
                    {name:'note', index:'note', width:'30', sortable:false},
                    {name:'links', index:'links', width:'5', sortable:false, align:'center', formatter: currencyFmatter, 
                        cellattr: function (rowId, tv, rawObject, cm, rdata) {
                            return ' onClick="deleteNote(' + rowId + ')"';
                        }
                    },
            ],
           ....
        });//jqGrid
} 
```

这里有2个功能：

```
function currencyFmatter(cellvalue, options, rowObject) {
    var cellValue = rowObject.id;
    return "<img title= 'Elimina' src='/images/delete-icon.png' />";
}

function deleteNote(value){
    var params = {};
    params['idProgetto'] = value;
    $.ajax({
        url: '/project/deletenota.do',
        type: 'GET',
        dataType: 'json',
        data: params,
        success: function(response){
            if (response != "error"){
                $("#clienti-navgrid").trigger("reloadGrid", [{current: true}]);
                dialogNotice("Nota spesa inserita<br/> ", 300, 150);
            }
            else 
                dialogNotice("E' avvenuto un errore nell'inserimento della nota spesa<br/> ", 300, 150);
            }
    });
} 
```

像这样调用 deleteNote() 是否正确？还是我错了？因为什么也没有发生。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:32:42.710

If you want to have a delete button per row you could add it via

```
 {name : 'actions', index: 'actions', formatter:'actions',
    formatoptions: {
    keys: true,
    editbutton: false,
    delOptions: { url: '/controller/deleteRecordAction' }
    }}, 
```

You would specify your own controller action in place of the above url to handle the delete action.

Here is a working example [http://jsfiddle.net/dumbguy5689/9ueDL/6/](http://jsfiddle.net/dumbguy5689/9ueDL/6/)

# node.js - 有没有办法在nodejs pdfkit中使一行中的文本片段变为粗体？

> ID：14732238
> 
> 赞同：7
> 
> 时间：2013-02-06T15:08:26.900
> 
> 标签：node.js, pdf, pdf-generation

节点pdfkit [http://pdfkit.org/index.html](http://pdfkit.org/index.html)

我正在使用 nodejs pdfkit 来生成 pdf。我希望能够将一行中的单个单词**加粗**或*斜体。*看起来 pdfkit 不支持这个，所以我想知道是否有人做过类似的事情？

真正有用的是调用 doc.text 函数，但让文档保留它的 x 位置，以便我可以执行以下操作。

```
doc.text('some words then ');
doc.font('Helvetica-Oblique');
doc.text('italic');
doc.font('Helvetica');
doc.text(' then the remaining words'); 
```

并查看输出：

一些单词然后*斜体*然后剩余的单词。

现在它每个文本函数输出一行。

有人知道这样做的好方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T15:44:21.353

此功能由 ej4 在此拉取请求中添加[https://github.com/devongovett/pdfkit/pull/60](https://github.com/devongovett/pdfkit/pull/60)

它还没有合并到主项目中，所以我最终自己派生了 pdfkit，包括 ej4s 的更改和我自己的一些更改。

基本结果是这些更改可以添加

```
continued: true 
```

到选项对象。然后 Pdfkit 会记住插入符号的位置并将您返回到该位置以获取下一行文本。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-09T13:49:53.043

请参阅：[使用 pdfkit 时，我可以在同一段落中混合字体粗细吗？](https://stackoverflow.com/questions/20598693/can-i-mix-font-weights-in-the-same-paragraph-when-using-pdfkit)

```
pdf.text('Hello ', LEFT, 200, {
    //here it is, 
    lineBreak : false
}).font(bold).text('World!'); 
```

# java - 检查 ZK Window 是否有焦点

> ID：14732240
> 
> 赞同：2
> 
> 时间：2013-02-06T15:08:30.883
> 
> 标签：java, zk

如何检查 a`Window`当前是否具有“焦点”？

即检查它是否具有最高的 ZIndex。我可以使用`getZIndex()`，但我仍然不知道它是否是最高的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:08:00.723

基本上你可以知道一个窗口在 onClick 和 onMove 时成为最上面的一个，

例如，

```
<zk>
  <window mode="overlapped" title="win one" border="normal" width="200px" height="150px">
    <attribute name="onMove"><![CDATA[
      ((Label)self.getFirstChild()).setValue("My Zindex is the highest one");
      ((Label)self.getNextSibling().getFirstChild()).setValue("");
    ]]></attribute>
    <attribute name="onClick"><![CDATA[
      ((Label)self.getFirstChild()).setValue("My Zindex is the highest one");
      ((Label)self.getNextSibling().getFirstChild()).setValue("");
    ]]></attribute>
    <label value="" />
  </window>
  <window mode="overlapped" title="win two" border="normal" width="200px" height="150px">
    <attribute name="onMove"><![CDATA[
      ((Label)self.getFirstChild()).setValue("My Zindex is the highest one");
      ((Label)self.getPreviousSibling().getFirstChild()).setValue("");
    ]]></attribute>
    <attribute name="onClick"><![CDATA[
      ((Label)self.getFirstChild()).setValue("My Zindex is the highest one");
      ((Label)self.getPreviousSibling().getFirstChild()).setValue("");
    ]]></attribute>
    <label value="" />
  </window>
</zk> 
```

# html - Appcache 缓存未包含在清单中的页面

> ID：14732241
> 
> 赞同：0
> 
> 时间：2013-02-06T15:08:35.050
> 
> 标签：html, codeigniter, html5-appcache

我有一个 codeigniter 站点，我想通过 appcache 存储以下文件：jquery.js、style.css 和 offline.html（后备）。

因此，清单文件自然如下所示。我的清单文件被称为 manifest.appcache。

```
CACHE MANIFEST:

jquery.js
style.css

NETWORK:
*

FALLBACK:
/ /offline.html 
```

我打开我的网站，确实看到下载了 .js、.css 和 .html 文件。但后来我看到页面[http://mysite.com/home（codeigniter](http://mysite.com/home)中的默认路由）也在下载。是什么赋予了？我没有在我的清单文件中包含这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T08:20:36.237

这来自 w3 标准文档：任何在 HTML 元素中具有 manifest 属性的页面都将被缓存，即使未包含在清单文件中，即使包含在 NETWORK 中：

# javascript - Jquery在头部冲突 - 引导和超大

> ID：14732249
> 
> 赞同：0
> 
> 时间：2013-02-06T15:09:17.533
> 
> 标签：javascript, jquery, twitter-bootstrap, head, supersized

我在我的网站的头部部分与冲突的 jquery 有点挣扎。

如果我将引导 jquery 放在下面，然后它会停止工作并且超大的确实可以工作，就会出现问题。

但是当我交换它们时，反之亦然，超大的不起作用，而引导程序起作用。

这是我目前的头部

```
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/1140.css">
    <link rel="stylesheet" href="/css/ie.css">

    <!-- Bootstrap (for mobile navigation) -->
    <link href="/css/bootstrap.css" rel="stylesheet" media="screen and (min-width: 0px) and (max-width:480px)">
    <link href="/css/bootstrap-responsive.css" rel="stylesheet" media="screen and (min-width: 0px) and (max-width:480px)">

    <!-- supersized sytlesheets -->
    <link rel="stylesheet" href="/css/supersized.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="/theme/supersized.shutter.css" type="text/css" media="screen" />

    <script src="js/vendor/modernizr-2.6.1.min.js"></script>

    <!-- supersized scripts (can't go in the bottom as it stops working -->

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>

    <script type="text/javascript" src="js/jquery.easing.min.js"></script>
    <!--bootstrap has to go below min jquery for it to work and above supersized-->
    <script src="/js/bootstrap/jquery.js"></script>

    <script type="text/javascript" src="js/supersized.3.2.7.min.js"></script>
    <script type="text/javascript" src="theme/supersized.shutter.min.js"></script> 
```

当我查看 bootstrap/jquery.js 文件时，我无法理解它，因为它只是所有块文本。

有人有任何解决方案吗？我也只使用移动版本的引导程序，所以有没有一种方法可以只包含一定宽度的 jquery，例如 480 - （这是我禁用超大尺寸的时候）。

我在文档的底部也有脚本，也许这也会影响这个？？

```
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.0.min.js"><\/script>')</script>

    <script type="text/javascript" src="js/css3-mediaqueries.js"></script>
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>

    <!-- Bootstrap Scripts -->

    <script src="/js/bootstrap/bootstrap-transition.js"></script>
    <script src="/js/bootstrap/bootstrap-dropdown.js"></script>
    <script src="/js/bootstrap/bootstrap-collapse.js"></script>

    <!-- Bootstrap scripts end -->

    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    <script>
        var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
        (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
        g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
        s.parentNode.insertBefore(g,s)}(document,'script'));
    </script> 
```

基本上，只是由于反复试验，由于某种原因，超大尺寸无法在底部工作，必须进入我的头部。当引导程序工作时，超大的将不会。

请让我知道一种方法来解决这个问题，如果我的头部有什么地方做错了导致这个问题。

谢谢

# c++ - Boost xpressive 正则表达式导致垃圾字符

> ID：14732252
> 
> 赞同：0
> 
> 时间：2013-02-06T15:09:27.013
> 
> 标签：c++, regex, boost

我正在尝试编写一些代码，将“/path/file.extension”之类的字符串更改为另一个指定的扩展名。我正在尝试使用 boost::xpressive 来做到这一点。但是，我遇到了问题。输出中似乎出现了一个垃圾字符：

```
#include <iostream>
#include <boost/xpressive/xpressive.hpp>

using namespace boost::xpressive;
using namespace std;

int main()
{
    std::string str( "xml.xml.xml.xml");
    sregex date = sregex::compile( "(\\.*)(\\.xml)$");

    std::string format( "\1.zipxml");

    std::string str2 = regex_replace( str, date, format );
    std::cout << "str  = " << str << "\n";
    std::cout << "str2 = " << str2 << "\n";

    return 0;
} 
```

现在编译并运行它：

```
[bitdiot@kantpute foodir]$ g++ badregex.cpp
[bitdiot@kantpute foodir]$ ./a.out > output
[bitdiot@kantpute foodir]$ less output
[bitdiot@kantpute foodir]$ cat -vte output
str  = xml.xml.xml.xml$
str2 = xml.xml.xml^A.zipxml$ 
```

在上面的示例中，我将输出重定向到一个文件，并使用 cat 打印出不可打印的字符。注意 str2 中的 ctrl-A。

无论如何，我是否错误地使用了 boost 库？这是一个提升错误吗？是否有另一个正则表达式可以让我用其他字符串替换“.tail”？（在我的示例中已修复。）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:15:23.837

至少在我阅读的时候，罪魁祸首就在这里：`std::string format( "\1.zipxml");`.

你忘了转义反斜杠，所以`\1`给你一个控制-A。你几乎肯定想要`\\1`。

或者（如果您的编译器足够新）您可以改用原始字符串，因此它类似于: `R"(\1.zipxml)"`，并且您不必转义反斜杠。我可能不会费心提及这一点，除了如果你用 C++ 字符串编写 RE，那么原始字符串几乎是你最好的新朋友（无论如何，IMO）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:32:47.227

正如杰里科芬向我指出的那样。这是我的一个愚蠢的错误。

错误代码如下：

```
std::string format( "\1.zipxml"); 
```

这应该替换为：

```
std::string format( "$1.zipxml"); 
```

谢谢大家的帮助。

# three.js - Three.js 的导出 Blender 模型中的材料不起作用

> ID：14732253
> 
> 赞同：5
> 
> 时间：2013-02-06T15:09:44.440
> 
> 标签：three.js, webgl, blender

我正在尝试使用 Blender 创建的模型和 Three.js 该模型非常基本，两个立方体相互叠加。一个立方体是红色的，另一个是绿色的。

我已经使用 Three.js 的 Blender 导出器插件导出了模型当我手动将材质分配给对象时，例如：

```
loader.load("model.js", function ( geometry, material ) {

    material = new THREE.MeshBasicMaterial( { color: 0xFF0000 } );

    mesh = new THREE.Mesh( geometry, material);

    scene.add(mesh);

    animate();

}); 
```

没有问题，如[https://googledrive.com/host/0B9t0vRo6sUnzWndDTGxicENIdDg/index.html所示](https://googledrive.com/host/0B9t0vRo6sUnzWndDTGxicENIdDg/index.html)

但是，当我删除该行时：

```
material = new THREE.MeshBasicMaterial( { color: 0xFF0000 } ); 
```

使用模型的材料。这会产生 Three.js 的错误：

> TypeError：程序未定义[中断此错误]
> 
> p_uniforms = program.uniforms,

[您可以在https://googledrive.com/host/0B9t0vRo6sUnzWndDTGxicENIdDg/index2.html](https://googledrive.com/host/0B9t0vRo6sUnzWndDTGxicENIdDg/index2.html)亲自查看

有谁知道什么可能导致这个问题？[您可以在https://googledrive.com/host/0B9t0vRo6sUnzWndDTGxicENIdDg/model.blend](https://googledrive.com/host/0B9t0vRo6sUnzWndDTGxicENIdDg/model.blend)下载 Blender 文件

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T15:21:58.780

简单的。材料是一个数组。您需要执行以下操作：

```
loader.load( "model.js", function ( geometry, materials ) {

    mesh = new THREE.Mesh( geometry, materials );

    scene.add( mesh );

    animate();

} ); 
```

三.js r.88

# javascript - JQUERY 自动完成在 chrome 和 firefox 中工作，但在 IE 中不工作

> ID：14732264
> 
> 赞同：0
> 
> 时间：2013-02-06T15:10:22.350
> 
> 标签：javascript, jquery, ajax, internet-explorer, autocomplete

我正在使用函数中的变量来创建自动完成功能，代码如下：

```
 function autocomplete(mp_info){
        var request_data = {
                '_action': 'GET'
            };
        $(mp_info).find("#id_mp_element").autocomplete({
            source: function( request, response, elems ) {
                    alert("working");
                    $.ajax({
                        url: "/api/slots/"+request.term+"/12/",
                        dataType: "json",
                        type: 'POST',
                        data: request_data,
                        success: function( data ) {
                            response($.map(data, function(item) {
                                return {
                                    label: item.name,
                                    id: item.id,
                                    pos: item.position
                                }
                            }));
                        }
                    });
                },
                minLength: 2,
                select: function( event, ui ) {
                    var info_row = $(".info_row").has(this);
                    $($('td',info_row.parent().prev())[2]).text($(".info_row     #id_mp_element").val()+" / "+ui.item.pos);
                    $("#id_mp_s").val(ui.item.id);
                    $("#id_mp_position_metric").val(ui.item.pos);
                },
        });
    } 
```

当我们在文本输入中写一些东西时，它没有显示在 IE 中的警报消息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:13:50.533

最后去除昏迷：

```
 select: function( event, ui ) {
                var info_row = $(".info_row").has(this);
                $($('td',info_row.parent().prev())[2]).text($(".info_row     #id_mp_element").val()+" / "+ui.item.pos);
                $("#id_mp_s").val(ui.item.id);
                $("#id_mp_position_metric").val(ui.item.pos);
            }            <------- there shouldn't be a come here
    }); 
```

# ruby-on-rails - Rails 3 calendar_helper gem

> ID：14732266
> 
> 赞同：0
> 
> 时间：2013-02-06T15:10:38.387
> 
> 标签：ruby-on-rails, calendar, gem

我的 Gemfile 中有这一行：

```
gem 'calendar_helper', :git => 'git://github.com/topfunky/calendar_helper.git' 
```

一切正常，可以使用：

```
= calendar(:year => 2013, :month => 3, :first_day_of_week => 1) 
```

但是文件“calendar_helper.rb”在哪里？我在我的项目文件夹中到处搜索它，但我找不到它。我需要它来修改日历。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:34:34.753

尝试： bundle show calendar_helper 或 bundle open calendar_helper

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:29:40.030

`echo $GEM_PATH`在终端上做。你会得到`rvm gems path`. 如果您已`rvm`在`home`用户中安装。你会发现`gems`在`~/.rvm/gems`. 它将显示`gemsets`您创建的不同（作为目录）。转到您当前正在使用的一个。在那里你会看到`gems`目录。在那里，您将拥有您使用的所有宝石。在此您将看到`calender_helper`包含相关代码的目录。

# ruby-on-rails - 无法批量分配受保护的属性：电子邮件、密码

> ID：14732268
> 
> 赞同：0
> 
> 时间：2013-02-06T15:10:43.617
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, model, mass-assignment

我知道您应该使用“attr_accessible”来允许批量分配保护，这实际上就是我在我的用户模型中所做的。怎么还抱怨？

```
Can't mass-assign protected attributes: email, password 
```

**用户控制器：**

```
class UsersController < ApplicationController

  def index
    @users = User.new
  end

  def show
    @user = User.find(2)
  end

  def login
    @user = Project.new(params[:user])
    ...
  end

end 
```

**用户模型：**

```
class User < ActiveRecord::Base
  has_and_belongs_to_many :projects
  belongs_to :project
  belongs_to :ticket

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password
end 
```

**视图，_navigation.html.erb：**

```
<%= form_for("user", :url => login_users_path, :html => { :method => :post }) do |f| %>
    <%= f.label :email%>
    <%= f.text_field(:email, :size => 30, :class => 'login_field', :placeholder => 'Användarnamn')%>
    <%= f.label :password%>
    <%= f.text_field(:password, :size => 30, :class => 'login_field', :placeholder => 'Lösenord')%>

    <%= f.submit "Logga in", :class => 'login_submit btn btn-primary' %>
<% end %> 
```

**来自 config/routes.rb：**

```
resources :users do
  post :login, on: :collection, as: :login
end 
```

因为我正在使用上面的集合，所以它应该（据我所知）是我正在使用的正确控件/模型（用户）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:18:04.500

我认为应该`User`不是`Project`

```
 def login
     @user = User.new(params[:user])
     ...
   end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T15:34:20.347

您还应该将索引操作更改为：

```
def index
  @users = Users.all
end 
```

并采取行动：

```
def show
  @user = User.find(params[:id])
end 
```

# perl - 如何在 perl 中使用 FILE::FIND 从搜索中排除扩展名为“.doc 或 .jar”的文件

> ID：14732269
> 
> 赞同：1
> 
> 时间：2013-02-06T15:10:46.577
> 
> 标签：perl, search, file-find

我面临两个问题。

1）我正在为某些关键字搜索目录，并且该目录包含具有许多扩展名的文件，例如 .java .sql .ksh .pl .jar 等。现在我的问题是我不想搜索具有 .jar 或 .doc 或 .docx 的文件。目前我的代码如下所示

```
use strict;
use warnings;
use File::find;

my $dir = "C:\DURAB\";
my $out = "output.txt";
open my $out, ">", "output.txt";
find(\&printFile,$dir);                                       

sub printFile {
   my $element = $_;

   if(-f $element && $element =~ /\.*$/){ 

      open my $in, "<", $element or die $!;
      while(<$in>) {
         if (/\Q$searchString\E/) {
       my $last_update_time = (stat($element))[9];
            my $timestamp  = localtime($last_update_time);
            print $out "$File::Find::name". "     $timestamp". "     $searchString\n";
            last;
           }
         }

      }
    } 
```

在此它正在搜索所有文件，现在我想限制搜索，以便无需搜索 .jar、.exe 、.doc 类型的扩展名。

2）在搜索目录时，我有很多子目录。我不想在名称已过时或已退休的目录中搜索（例如 obsolete_dr 、 denied_as ）我如何使用 file::find 来实现这一点

我想我有点困惑实际上下面是我需要的输出

从上面的代码 $file::find::name 显示文件路径，如果此文件路径包含过时或退役，则不应显示该输出。

例如，我得到了类似的路径

```
c:\DURAB\ASD\OBSOLETE_EC23\sirgu.sql and c:\DURAB\AS\drive.ksh 
```

不应显示上述第一个路径，因为它的单词已过时。

我想现在我很清楚了。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:30:59.613

要拒绝不需要的文件，您应该使用正则表达式检查文件的名称，并在必要时`return`从子例程中检查。`print_file`

要忽略包含`obsolete`or的目录，`retired`您应该检查节点是否是名称包含这些单词中的任何一个的目录。如果是这样，那么设置`$File::Find::prune`为真值将防止`File::Find`递归进入它。

请注意，如果调用不起作用，我使用`use autodie`了 which 将隐式引发异常，并允许按名称访问调用结果的字段。`open`[`File::stat`](https://metacpan.org/module/File%3a%3astat)`stat`

我不确定您的正则表达式是什么意思`/\.*$/`，它将匹配任何字符串，因为它需要零个或多个尾随点，但此代码还排除了以点结尾的文件名。

```
use strict;
use warnings;

use File::Find;
use File::stat;
use autodie;

my $dir = 'C:\DURAB';
my $search_string = 'ABCDEF';

my $out = 'output.txt';
open my $outfh, '>', $out;

find(\&print_file, $dir);

sub print_file {

  if ( -d and /obsolete|retired/i ) {
    $File::Find::prune = 1;
    return;
  }

  return unless -f and not /\.(exe|doc|docx|exe|)$/;

  my $element = $_;

  open my $in, '<', $element;

  while (<$in>) {
    if ( /\Q$search_string\E/ ) {
      my $last_update_time = stat($element)->mtime;
      my $timestamp = localtime $last_update_time;
      printf $outfh "%s     %s     %s\n",
          $File::Find::name,
          $timestamp,
          $search_string;
      last;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:15:01.790

```
return if /\.(?:docx?|jar)\z/; 
```

和

```
if (/obsolete|retired/) {
   $File::Find::prune = 1;
   return;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T15:17:22.200

更改此行

```
 if(-f $element && $element =~ /\.*$/){ 
```

对此

```
 if( (-f $element && $element !~ /\.(jar|docx?)$/i) || ( $File::Find::dir !~ /(obsolete|retired)/i) ){ 
```

一个很好的指南：[http ://www.perlmonks.org/?node_id=217166](http://www.perlmonks.org/?node_id=217166)

问候，

# ember.js - 如何正确使用 ember-bootstrap 项目中的 Bootstrap.Tabs？

> ID：14732272
> 
> 赞同：5
> 
> 时间：2013-02-06T15:10:57.803
> 
> 标签：ember.js

我正在尝试使用 Bootstap.Tabs 组件来创建一些引导选项卡。

我已将选项卡声明如下：

```
{{view Bootstrap.Tabs
  contentBinding="App.tabsContent"
  selectionBinding="App.selection"}} 
```

我正在使用以下代码来设置选项卡的内容。

```
App.ready = function() {
  App.tabsContent= Ember.A([{value: "cred_app.associate_clients", title: "Associate clients"}, {value: "cred_app.facilities", title: "Facilities"}]);    
}; 
```

使用它，我可以成功呈现引导选项卡.. 并且路由名称会在*App.selection*中弹出。

我只是不明白如何使链接正常工作，以便控制器转换到路由。我还想让活动选项卡获得正确的 css 应用于它，以便选项卡显示当前正在显示的路线。

更新：

我使用更简单的方法实现了这一点：

```
<ul class='nav-tabs'>
  {{#linkTo 'cred_app.associate_clients' model tagName='li' href=false}}
    {{#linkTo 'cred_app.associate_clients' model}}Client Hierachy{{/linkTo}}
  {{/linkTo}}
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:45:53.203

你可以这样做：（使用我派生的[Bootstrap.Tabs](https://github.com/pjlammertyn/ember-bootstrap/blob/master/packages/ember-bootstrap/lib/views/tabs.js)实现）

```
{{#view Bootstrap.TabContainerView currentView="patient"}}
  <ul class="nav nav-tabs">
    {{#view Bootstrap.TabView value="patient"}}<a>Patient</a>{{/view}}
    {{#view Bootstrap.TabView value="visits"}}<a>Visits</a>{{/view}}
    {{#view Bootstrap.TabView value="contacts"}}<a>Contacts</a>{{/view}}
    {{#view Bootstrap.TabView value="sessions"}}<a>Sessions</a>{{/view}}
   </ul>
   {{#view Bootstrap.TabPaneView viewName="patient"}}
     {{render "patient"}}
   {{/view}}
   {{#view Bootstrap.TabPaneView viewName="visits"}}
     {{render "visits"}}
   {{/view}}
   {{#view Bootstrap.TabPaneView viewName="contacts"}}
     {{render "contacts"}}
   {{/view}}
   {{#view Bootstrap.TabPaneView viewName="sessions"}}
     {{render "sessions"}}
   {{/view}}
{{/view}} 
```

或使用路由器：

```
<ul class="nav nav-tabs">
  {{#view Bootstrap.TabItem item="patient"}}
    {{#linkTo "tab.patient" content}}Patient{{/linkTo}}
  {{/view}}
  {{#view Bootstrap.TabItem item="visits"}}
    {{#linkTo "tab.visits" content}}Visits{{/linkTo}}
  {{/view}}
  {{#view Bootstrap.TabItem item="contacts"}}
    {{#linkTo "tab.contacts" content}}Contacts{{/linkTo}}
  {{/view}}
  {{#view Bootstrap.TabItem item="sessions"}}
    {{#linkTo "tab.sessions" content}}Sessions{{/linkTo}}
  {{/view}}
</ul>
{{outlet}} 
```

魔术是由 Bootstrap.TabItem 完成的，它从 linkTo 助手获取活动状态

```
Bootstrap.TabItem = Ember.View.extend({
  tagName: 'li',
  classNameBindings: ['active'],

  activeChanged: function () {
    var self = this;
    Ember.run.next(this, function () { //delay
      if (!self.isDestroyed) {
        self.set('active', self.get('childViews.firstObject.active'));
      }
    });
  }.observes('childViews.firstObject.active') //get the active state from the linkTo helper
}); 
```

现在您只需要一个路由器，如下所示：

```
App.Router.map(function (match) {
  ...
  this.resource('tab', { path: '/tab' }, function () {
    this.route('patient');
    this.route('visits');
    this.route('contacts');
    this.route('sessions');
  });
  ...
}); 
```

一个 jsFiddle 可能会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-31T00:06:05.393

请查看*Ember 的 Bootstrap*

它完全支持药片和标签：

[https://github.com/ember-addons/bootstrap-for-ember](https://github.com/ember-addons/bootstrap-for-ember)

展示：ember-addons.github.io/bootstrap-for-ember

# algorithm - Quadratic algorithm for 4-SUM

> ID：14732277
> 
> 赞同：11
> 
> 时间：2013-02-06T15:11:08.590
> 
> 标签：algorithm, sum

The 4-SUM is as follows:

> Given an array of N distinct integers find 4 integers a, b, c, d such that a+b+c+d = 0.

I could come up with a cubic algorithm using quadratic algorithm for 3-SUM problem. Can we do better than cubic for 4-SUM?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-06T15:15:37.160

Yes you can. Go over all pairs of numbers and store their sum(and also store which numbers give that sum). After that for each sum check if its negation is found among the sums you have. Using a hash you can reach quadratic complexity, using std::map, you will reach `O(n^2*log(n))`.

EDIT: to make sure no number is used more than once it will better to store indices instead of the actual numbers for each sum. Also as a given sum may be formed by more than one pair, you will have to use a hash multimap. Having in mind the numbers are different for a sum `X = a1 + a2` the sum `-X` may be formed at most once using `a1` and once using `a2` so for a given sum `X` you will have to iterate over at most 3 pairs giving `-X` as sum. This is still constant.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-06T19:22:16.713

There is also a O(N²) algorithm for this problem using O(N²) extra memory.

1.  Generate all the pairwise sums in O(N²) and store the pair (a[i], a[j]) in a hash table and use the absolute value of their sum as the key of the hash table (a[i] and a[j] are two distinct numbers of the input array)

2.  Iterate over the table and find a key which has both negative and positive sum with four distinctive elements and return is as the answer

There is an alternative if you prefer not using hash table. Since your numbers are integers, you can sort the list of all the sum in a linear time of the elements in the sum list using something like a **Radix sort** (there are O(N²) elements in the sum list).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-25T18:31:17.773

Sharing my code for a 4-sum problem, which will give you Quadratic Time complexity. You can run this program with any given sum number. In your case you want the sum to be zero, so passing 0 in function parameters. The idea is we can precompute the sum of a + b and store into a map first if it does not exist in the map, and then we can do `c + d` and checking if target `-(c + d)` is in the map.

```
import java.util.*;

public class FourSumPractice {
    public List<List<Integer>> quadTuple(int[] arr, int len, int sum){
    Map<Integer, Set<List<Integer>>> map = new HashMap<>();
    Set<List<Integer>> res = new HashSet<>();

    for (int i = 0; i < len - 1; i++) {
        for (int j = i + 1; j < len; j++) {
            int requiredSum = sum - (arr[i] + arr[j]);
            if(map.containsKey(requiredSum)){
                for (List<Integer> l : map.get(requiredSum)) {
                    int x = l.get(0);
                    int y = l.get(1);

                    if((x != i && x != j) && (y != i && y != j)){
                        List<Integer> quard = Arrays.asList(arr[i], arr[j], arr[x], arr[y]);
                        Collections.sort(quard);
                        res.add(quard);
                    }
                }
            }
            map.putIfAbsent(arr[i] + arr[j], new HashSet<>());
            map.get(arr[i] + arr[j]).add(Arrays.asList(i,j));
        }
    }
    return new ArrayList<>(res);
}

public static void main(String[] args)
{
    int[] A = { -10, 30, -15, -5, -5, -25, 0, 10, 51 };
    int sum = 0;
    FourSumPractice obj = new FourSumPractice();
    List<List<Integer>> l = obj.quadTuple(A, A.length, sum);
    for(List<Integer> sub:l){
        for(int i : sub){
            System.out.print(" "+ i);
        }
        System.out.println(" ");
       }
    }
} 
```

# javascript - 作为滑动轮播的视差背景图像

> ID：14732278
> 
> 赞同：1
> 
> 时间：2013-02-06T15:11:09.513
> 
> 标签：javascript, carousel, parallax

在过去的几天里，我一直在修补创建一个视差滚动网站。我有一个很好的原型，可以滚动不同的背景图像。看起来很酷。

我想更进一步。我基本上有一个分配有背景图像的 div。背景图像以不同的速度滚动。我现在想添加单击左箭头或右箭头并更改背景的功能。基本上是一个旋转木马。但是，如果用户向下滚动，我仍然想保持视差效果。

HTML的结构是：

```
<section id="one">
<div id="mainimagewrapper">
    <div class="image1">
        <div class="image2">
            <div id="textdiv">this is some text</div>
        </div>
    </div>
</div>
</section> 
```

mainimagewrapper 包含我要更改的大图像。textdiv 将是我将链接添加到下一个图像的地方。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:59:35.120

js 将背景更改为数组中的随机背景：

```
function changeBG()
{
    var images = new Array('http://www.windows-7-wallpapers.com/wallpapers/img24-1920x1200.jpg',
                           'http://www.pptbackgroundstemplates.com/backgrounds/seamless-white-texture-ppt-backgrounds-powerpoint.jpg',
                          'http://awesomewallpapers.files.wordpress.com/2009/08/white2.png',
                          'http://www.wallpaperpimper.com/wallpaper/Flower/Flower_Art/Flower-Art-Winter-White-1-1920x1200.jpg');

    $('#mainimagewrapper').css("background-image", "url("+ images[getRandom(0, images.length - 1)] +")");
}

function getRandom(min, max) {
    if (min > max) {
        return -1;
    }

    if (min == max) {
        return min;
    }

    var r;

    //do {
    r = Math.random();
    //}
    //while (r == 1.0);

    return min + parseInt(r * (max - min + 1));
} 
```

您可以像这样创建按钮：

```
<input type="button" onclick="changeBG();" > 
```

或像这样：

```
<a href="javascript:changeBG();">ButtonText</a> 
```

这应该将背景图像更改为那 4 张图片中的随机一张...

# sql-server - BreezeJs/EntityFramework 按空/空字符串处理排序

> ID：14732279
> 
> 赞同：1
> 
> 时间：2013-02-06T15:11:13.607
> 
> 标签：sql-server, entity-framework, asp.net-web-api, breeze

我有一个使用 BreezeJs 查询由 EntityFramework 和 SQL 存储支持的标准 WebApi 控制器的应用程序。当我使用 order by 子句时，我希望 NULL 和空字符串值始终排在最后（对于升序和降序）。

在 SQL 甚至 EF 服务器端，这不是一项艰巨的任务。但是，我无法找到 BreezeJs 的文档，该文档显示了如何实现这一点。

理想的解决方案是修改我的 EF 上下文的某种方式，因此这是在查询命中数据库之前检测到任何 Order By 时的默认行为。如果做不到这一点，也许我在 Breeze 本身中错过了一种方法来指定如何在结果中处理空值。

最坏的情况是，我需要在客户端编写两个单独的查询并合并结果，一个用于指定列中的值，一个用于没有值。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:32:03.450

这是个有趣的问题。

Breeze 当前有一个名为**LocalQueryComparisonOptions**的类，可用于控制客户端排序是否区分大小写以及字符串比较是否应符合 SQL92。这里的想法是，应该使用此类来匹配您选择的任何服务器实现使用的任何排序规则。

听起来您想要的是还可以选择**完全**控制查询的本地排序，可能是通过提供您自己的排序功能。如果是这种情况，请将其添加到微风[用户语音](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions)并投票。这似乎很合理，如果它获得足够的选票，我认为将其添加到产品中是有意义的。

请注意，您仍然需要确保 EF（或您使用的任何后端）遵守这些相同的排序规则。

另外，出于好奇，您如何使 EF 始终以这种方式订购空值？

# php - PHP表单中的乘法提交到CSV

> ID：14732280
> 
> 赞同：1
> 
> 时间：2013-02-06T15:11:15.797
> 
> 标签：php, html, csv

我创建了一个基于 HTML Web 的打印日志，它使用 PHP 将其表单数据发送到 .CSV 文件中。一切都已设置并完美运行。现在，我正在尝试添加一个新功能，当提交表单时，它将“份数”乘以“类型”，技术上是每份的价格，并将结果发送到 .CSV 文件中的附加单元格。

回顾一下；表单将所有用户填写的数据正确发送到 CSV 文件中。我只想在提交表单时将另一个项目添加到 CSV 文件中，该文件是通过将副本数乘以类型（技术上是每份的价格）生成的。

我不太确定如何去做。我也不确定 PHP 是否是一个选项。任何想法将不胜感激。为了更好的视觉效果，我附上了下面的屏幕截图：

[http://i47.tinypic.com/2rpz1xh.jpg](http://i47.tinypic.com/2rpz1xh.jpg)

将表单数据发送到 CSV 的代码：

```
<?php

if(isset($_POST["submit"]))
{ 
    $type = trim($_POST["type"]); 
    $date = $_POST["date"]; 
    $job_number = trim($_POST["job_number"]); 
    $phase = $_POST["phase"];
    $task = $_POST["task"];
    $number_copies = $_POST["number_copies"];
    $name =  trim($_POST["name"]);
    $comment = $_POST["comment"];

    if(empty($type)||empty($date)||empty($job_number)||empty($number_copies)||empty($name))  
    { 
        header('Location: submit/unsuccessful.htm'); 
        die; 
    } 
    $cvsData = "\"$job_number\",\"$phase\",\"$task\",\"$date\",\"$comment\",\"$type\",\"$number_copies\"".PHP_EOL; 
    $fp = fopen("log.csv", "a"); 

    if($fp) 
    { 
        fwrite($fp,$cvsData); // Write information to the file 
        fclose($fp); // Close the file 
        header('Location: submit/successful.htm');

    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:27:12.603

您可以通过简单地将变量相乘来做到这一点：

```
$total_cost = $type * $number_copies;
$cvsData = "\"$job_number\",\"$phase\",\"$task\",\"$date\",\"$comment\",\"$type\",\"$number_copies\",\"$total_cost\",".PHP_EOL; 
```

# solr - 关于使用 Lucene 进行搜索？

> ID：14732281
> 
> 赞同：0
> 
> 时间：2013-02-06T15:11:22.850
> 
> 标签：solr, lucene, elasticsearch

我正在使用基于 Lucene 的搜索引擎。

例如，我有一个像“name”这样的字段：“blue sky”

我可以使用蓝色或天空进行搜索，但不能使用蓝色。我认为蓝光是蓝色的一部分，为什么我不能搜索蓝光？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:15:06.543

您需要使用通配符 ( `blu*`) 或模糊搜索 ( `blu~`)。更多信息可[在此处](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1)获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:35:42.500

或者，您可以定义一个特殊的映射来满足该需求。例如，在 elasticsearch 中，您可以为字段定义一个[edgeNgram](http://www.elasticsearch.org/guide/reference/index-modules/analysis/edgengram-tokenizer.html)分析器。

WildcardQueries 搜索比 termQueries 慢。您也可以使用[PrefixQuery](http://www.elasticsearch.org/guide/reference/query-dsl/prefix-query.html)。

# javascript - 从json文件中提取数据

> ID：14732292
> 
> 赞同：0
> 
> 时间：2013-02-06T15:12:02.473
> 
> 标签：javascript, jquery, json

如果我的服务器上有一个静态 json 文件，是否可以使用 javascript 仅提取 json 数据的所需部分而不下载整个 json 文件？

我知道我可以使用服务器端技术根据我想要的动态生成 json 数据，但我只是想知道是否可以使用 javascript 从服务器 json 文件中提取数据而无需下载整个文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:13:27.953

不，您不能在客户端执行此操作，因为 javascript 调用的浏览器只能获取整个文件。

如果您真的只需要获取文件的一部分，则必须构建服务器端代码。

但之前通过分析检查您是否需要进行此优化。并且不要忘记仅获取文件的一部分会阻止文件作为一个整体被缓存和重用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:14:50.237

对于服务器上的静态文件，JavaScript 如何在不下载整个文件的情况下访问它？

恐怕这是不可能的。您可以下载文件并过滤客户端上的数据，或者您可以编写服务器端代码为您进行过滤，然后将结果输出给调用者——您的客户端 JavaScript 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:22:09.747

答案是否定的，但是如果您可以在服务器端处理 json 数据，您可以在 ajax 调用中发送参数时创建一个 json 响应，以根据您发送的参数检索不同的结果。这些参数将限制您想要的部分。

# javascript - SlideUp/SlideDown 不太好用

> ID：14732295
> 
> 赞同：0
> 
> 时间：2013-02-06T15:12:10.533
> 
> 标签：javascript, jquery

我有一个切换元素的功能：

```
function toggle(elemName) {
    text = document.getElementById(elemName);
    var isHidden = text.style.display == 'none';
    text.style.display = isHidden ? 'block' : 'none';

    if (text.style.display == 'none') {
        $(text).slideUp();
    }
    else {
        $(text).slideDown();
    }
    return false;
} 
```

我真正需要的是，如果它被隐藏，则向下滑动，如果它是可见的，则将其向上滑动并使其消失。

它正在隐藏和显示，但滑动不起作用。

有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:18:08.590

slideToggle 会满足您的需求吗？

```
function toggle(elemName) {
    text = document.getElementById(elemName);
    $(text).slideToggle(); 
```

}

[http://jsfiddle.net/kmd97/heVEE/](http://jsfiddle.net/kmd97/heVEE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:19:04.470

请参阅工作演示[http://jsfiddle.net/CAeSD/4/](http://jsfiddle.net/CAeSD/4/)

你有你的逻辑倒退，使用`!= 'none'`not `== 'none'`。

还要删除你说这样的话：

```
var isHidden = text.style.display == 'none';
text.style.display = isHidden ? 'block' : 'none'; 
```

所以**工作代码**如下：

```
function toggle(elemName) {
    text = document.getElementById(elemName);

    if (text.style.display != 'none') {
        $(text).slideUp();
    }
    else {
        $(text).slideDown();
    }
    return false;
}

$("#name").on('click', function(){
                  toggle("txt");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:14:18.540

您在调用`slideUp()`or之前隐藏元素`slideDown()`。

删除此行，它应该可以正常工作：

```
text.style.display = isHidden ? 'block' : 'none'; 
```

希望能帮助到你 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T15:15:47.097

尝试这个：

```
function customToggle(elemId) {
    var elem = $('#'+elemId);

    if ( elem.is(':visible') ) { elem.slideUp(); }
    else { elem.slideDown(); }
}

$(document).ready(function() {
    customToggle('myId');
}); 
```

请注意，在您的示例`$(text).slideUp();`中不起作用，因为文本将仅返回 id 名称，如下所示：`$('myId').slideUp();`并且在 jQuery 中应该是这样的：`$('#myId').slideUp();`

# grid-layout - Susy 在最宽处没有网格填充

> ID：14732297
> 
> 赞同：0
> 
> 时间：2013-02-06T15:12:20.443
> 
> 标签：grid-layout

我将 Susy 用于我的网格布局，并希望容器在 960 像素以下的宽度处应用网格填充，但在 960 像素及以上时删除网格填充。我可以将网格填充设置为 0，然后使用断点应用填充，但希望能够在其他情况下应用它。我尝试使用 Eric Meyer 的 bleed mixin，但它会将我的网格发送到左侧。我修改了 bleed mixin 以删除填充并使容器居中，但我不确定这是最好的方法。有没有更好的方法来实现这一点，同时保持其他出血选项可行？

苏西变量

```
// --- Layout --- 
$max-site-width: 960px; // sets the max width

// --- Susy Grid System ---
$container-style: magic;
$container-width: $max-site-width;
$total-columns: 12;
$column-width: 4em;
$gutter-width: 2em;
$grid-padding: 1em; 
```

埃里克的出血混合：

```
@mixin bleed($padding: $grid-padding, $sides: left right) {
  @if $sides == 'all' {
    margin: - $padding;
    padding: $padding;
  } @else {
    @each $side in $sides {
      margin-#{$side}: - $padding;
      padding-#{$side}: $padding;
    }
  }
} 
```

用 $orient 修改以使容器居中而不填充

```
@mixin bleed($orient: center, $padding: $grid-padding, $sides: left right) {
  @if $orient == 'center' {
        @each $side in $sides {
          margin-#{$side}: auto;
          padding-#{$side}: $padding - $padding;
        }
    } @else{
        @if $sides == 'all' {
        margin: - $padding;
        padding: $padding;
    } @else {
        @each $side in $sides {
          margin-#{$side}: - $padding;
          padding-#{$side}: $padding;
        }
    }

  }
} 
```

在 SCSS 中应用 bleed，其中断点是 at-max = $max-site-width 的独立 mixin

```
.test-grid{
    @include container;
    @include breakpoint(at-max){
        @include bleed($orient: center);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:47:35.287

在这种情况下，您根本不想要 bleed mixin。您只想删除/添加网格填充。bleed mixin 用于将元素推到它们的容器之外——但如果你想让*所有元素*都流血，你应该去掉容器上的填充。这很容易：

```
.test-grid{
  @include container;
  @include breakpoint(at-max){
    padding: 0;
  }
} 
```

# windows - 如何在 Delphi 7 上检测 Windows Aero 主题？

> ID：14732301
> 
> 赞同：2
> 
> 时间：2013-02-06T15:12:38.960
> 
> 标签：windows, delphi, delphi-7, aero

您如何通过 Delphi 7 上的代码检测用户在其操作系统上运行 Windows Aero 主题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T15:28:35.030

我们需要使用的函数是`Dwmapi.DwmIsCompositionEnabled`，但它不包含在 Delphi 7 附带的 Windows 标头翻译中，并在 Delphi 7 之后发布的 Vista 中添加。它还在 Windows XP 上使应用程序崩溃 - 所以在检查后调用它`if Win32MajorVersion >= 6`。

```
function IsAeroEnabled: Boolean;
type
  TDwmIsCompositionEnabledFunc = function(out pfEnabled: BOOL): HRESULT; stdcall;
var
  IsEnabled: BOOL;
  ModuleHandle: HMODULE;
  DwmIsCompositionEnabledFunc: TDwmIsCompositionEnabledFunc;
begin
  Result := False;
  if Win32MajorVersion >= 6 then // Vista or Windows 7+
  begin
    ModuleHandle := LoadLibrary('dwmapi.dll');
    if ModuleHandle <> 0 then
    try
      @DwmIsCompositionEnabledFunc := GetProcAddress(ModuleHandle, 'DwmIsCompositionEnabled');
      if Assigned(DwmIsCompositionEnabledFunc) then
        if DwmIsCompositionEnabledFunc(IsEnabled) = S_OK then
          Result := IsEnabled;
    finally
      FreeLibrary(ModuleHandle);
    end;
  end;
end; 
```

# javascript - 模仿警报框行为

> ID：14732303
> 
> 赞同：0
> 
> 时间：2013-02-06T15:12:48.003
> 
> 标签：javascript

我的网页中有一个包含一定行数的数据表。我提供了一个选项来删除该表中的多行，方法是单击每行上的复选框，最后单击“删除”按钮。删除每一行需要用户的某些输入，然后单击该输入框中的“确定”或“删除”按钮。现在我的问题是如何保持代码不显示下一个输入框，直到用户在当前输入框中执行某些操作。一些像警报框之类的东西。模型框似乎没有帮助，因为它们不执行。

[如何让javascript等到某些事件发生](https://stackoverflow.com/questions/6902334/how-to-let-javascript-wait-until-certain-event-happens)的可能重复

[使函数在返回之前等待事件](https://stackoverflow.com/questions/8027392/making-a-function-to-wait-an-event-before-returning)

如果答案不是不可能。那么你如何解决这种GUI场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:39:06.613

1.  将选定行的 ID 添加到数组中。
2.  单击“删除”按钮会调用一个函数，该函数会为第一个选定行（数组中的第一项）显示您的自定义确认对话框。
3.  单击警报中的任何按钮都会执行它应该执行的操作，并且
    *   关闭对话框
    *   对数组中的下一项执行第二步和第三步，直到最后一个元素。

这是一个基本示例：

**Javascript**

```
<script>
var itemsToDelete = new Array;
function updateItemsToDelete( row ) {
    var getIndex = itemsToDelete.indexOf( row.id );
    if ( getIndex == -1 ) {
        itemsToDelete.push( row.id );
    } else {
        itemsToDelete.splice( getIndex, 1 );
    }
}

function removeRow( rowID ) {
    var toDelete = document.getElementById( rowID );
    toDelete.parentNode.removeChild( toDelete );
    itemsToDelete.shift();
    requestConfirmation();
}
function nextPlease() {
    itemsToDelete.shift();
    requestConfirmation();  
}

function requestConfirmation() {
    if ( itemsToDelete.length == 0 ) {
        document.getElementById( "box" ).style.display = "none";
        return;
    }

    document.getElementById( "box" ).style.display = "block";
    document.getElementById( "message" ).innerHTML = "Remove " + itemsToDelete[0] + "?";
    document.getElementById( "yes_button" ).onclick = function() { removeRow( itemsToDelete[0] ); };
    document.getElementById( "no_button" ).onclick = nextPlease;
}
</script> 
```

**HTML**

```
<div id="box" style="display:none;">
    <span id="message"></span>
    <input type="button" id="yes_button" value="yes" />
    <input type="button" id="no_button" value="no" />
</div>
<table>
    <tr id="row1">
        <td>
            <input type="checkbox" onclick="updateItemsToDelete( this.parentNode.parentNode );" />
        </td>
        <td>row 1</td>
    </tr>
    <tr id="row2">
        <td>
            <input type="checkbox" onclick="updateItemsToDelete( this.parentNode.parentNode );" />
        </td>
        <td>row 2</td>
    </tr>
    <tr id="row3">
        <td>
            <input type="checkbox" onclick="updateItemsToDelete( this.parentNode.parentNode );" />
        </td>
        <td>row 3</td>
    </tr>
    <!-- and so on... -->
</table>
<input type="button" onclick="requestConfirmation();" value="delete selected" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:14:03.477

单击自定义模式的按钮实际上应该进行处理，而不是单击该行的按钮。

单击该行的按钮应设置一个包含您要删除的数据的字段。对话框中的按钮执行您最初对行所做的操作。

其他选择是使用`return window.confirm("Are you sure?");`

# intuit-partner-platform - 其他任何对 intuit.ipp.anywhere.logout 调用有问题的人

> ID：14732304
> 
> 赞同：1
> 
> 时间：2013-02-06T15:12:59.367
> 
> 标签：intuit-partner-platform

在注销过程中，我正在调用 intuit.ipp.anywhere.logout 并将其传递给回调函数。回调函数处理正确；但是，它不会退出应用中心。还有其他人有类似的问题吗？

```
logout: function (callback) {
    intuit.ipp.jQuery.ajax({
Uncaught TypeError: Cannot call method 'ajax' of undefined (repeated 2 times)
                url: "https://" + intuit.ipp.anywhere.serviceHost + "/Account/LogoutJSONP?callback=?",
                dataType: "jsonp",
                complete: function () {
                    callback();
                    //intuit.ipp.anywhere.view.popup.hide();
                }
            });
    //intuit.ipp.anywhere.view.logout.render(callback);
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:39:23.970

您是否包括[https://js.appcenter.intuit.com/Content/IA/intuit.ipp.anywhere.js](https://js.appcenter.intuit.com/Content/IA/intuit.ipp.anywhere.js)？我不确定“未捕获的 TypeError ......”的起源

这个简单的测试 HTML 页面运行良好：[https](https://dl.dropbox.com/u/19213950/logout.html) : //dl.dropbox.com/u/19213950/logout.html 登录 AppCenter 后，单击此测试 HTML 上的注销链接，您应该会看到 AppCenter 会话无效.

# hadoop - 将 Hadoop 流与不受干扰的二进制数据一起使用

> ID：14732305
> 
> 赞同：1
> 
> 时间：2013-02-06T15:13:00.230
> 
> 标签：hadoop, hadoop-streaming

我正在尝试制作一个脚本，该脚本使用 Hadoop 流式仅映射作业通过 Unix 过滤器对 HDFS 文件进行管道传输。我不关心输入拆分，无论如何我的文件都是压缩的。我不关心键/值对，而且我有一段时间摆脱了 hadoop 想要粘贴在我的输出中的标签。我更喜欢输入和输出简单的原始二进制数据，但我可以接受 UTF-8 文本行或类似的行。

`mapreduce.output.textoutputformat.separator`我已经尝试了and的各种设置`stream.map.output.field.separator`，使用[typedbytes](http://static.last.fm/johan/huguk-20090414/klaas-hadoop-1722.pdf)等。选项卡不会消失。有任何想法吗？

如果有区别，我将 CDH 4.1 与 YARN (MRv2) 一起使用。

# jquery - JQuery没有在点击时运行

> ID：14732307
> 
> 赞同：1
> 
> 时间：2013-02-06T15:13:02.473
> 
> 标签：jquery

早上好伙计们，我正在尝试学习 jquery，并且从我从 js 中知道的帽子，这应该可以工作，但它不是......基本上点击提交按钮，它应该改变内部 html。有更多经验的人有什么想法吗？

jQuery：

```
$(function() {
    $("#submitButton").click(function(){
        reply();
    })
});

function reply(){
 document.getElementById("#progressBar").innerHTML = "worksbro";
} 
```

html:

```
<button type="button" id="submitButton">Submit</button> 
```

如果我没记错的话，这应该有效。它应该改变`progressBar`但 onclick 什么都不做

为了消除一些混乱：

```
<div id = "progressBar"></div> 
```

所有代码：

```
<!DOCTYPE html>
<html>
<head>
<script src="theJS.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">

$(function() {
    $("#submitButton").click(function(){
        reply();
    })
});

function reply(){
 $("progressBar").html("worksbro");
}

</script>

<title>
One neat van page
</title>
</head>
<body>
<div id="tableone">
<?php
//connect to db
include 'connect.php';

//start the table float left
cho '<table>';
echo '<tr><td style="background-color:#03899C; color:white; text-align:center;">Driver</td>
<td style="background-color:#03899C; color:white; text-align:center;">Van</td></tr>';

//lets get dem drivers and vans
//actually just the vans, realistically. 
$sql= 'SELECT *
FROM Vans';

//make a table float let with driver name and an info(keep it simple)
foreach($conn->query($sql) as $row) {
  echo '<tr id="'.$row['Owner'].'" style="cursor:pointer;" onClick="more(this.id)">';
    echo "<td style=\"background-color:#FFFC00;\"><a href=#>".$row['Owner']."</a></td>";
    echo "<td style=\"background-color:#FFFC00;\">".$row['Year']." ".$row['Make']." ".$row['Model']."</td>";
  echo '<tr>';      
}

echo '</table>';
?>
</div>

<div id="more">
<div id="edit"></div>
<h1 id="van"><u>More Info</u></h1>
<div id="vanList">
</div><!--end vanList-->
</div>

<div id = "progressBar">
<progress value="0" max="100"></progress>
</div>

<div id="innactive">
<h3>Innactive Vans</h3>
<table>
<?php
//connect to the database
include 'connect.php';
//get inactive vans
//my brain is mush right now, so bear with me...
$sql = "SELECT *
FROM Vans
";

foreach($conn->query($sql) as $row) {
if (!empty($row['Innactive'])){

echo '<tr><td style="background-color:#03899C; color:white; text-align:center;">Driver</td>
<td style="background-color:#03899C; color:white; text-align:center;">Van</td></tr>';

  echo '<tr id="'.$row['Owner'].'" style="cursor:pointer;" onClick="more(this.id)">';
    echo "<td style=\"background-color:#FFFC00;\"><a href=#>".$row['Owner']."</a></td>";
    echo "<td style=\"background-color:#FFFC00;\">".$row['Year']." ".$row['Make']." ".$row['Model']."                    </td>";
  echo '</tr>';
}
}

?>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:24:23.747

现在我们有了完整的代码，问题就很清楚了...... HTML 中没有#submitButton –

“对不起，我的错，按钮在那里，它是根据 ajax 请求通过 php 创建的”

解决方案，需要未来的事件

```
$(function() {
    $(document).on('click', '#submitButton', function(e){
        e.preventDefault();
        $('#progressBar').html("worksbro");
    })
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T15:16:14.583

你可以这样做

```
 $("#submitButton").click(function() {
         $("#progressBar").html("worksbro");
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T15:16:37.417

如果你有`progressBar`这样的例子：

```
<div id="progressBar"></div>

<button type="button" id="submitButton">Submit</button> 
```

然后改为：

```
$(function()
{
    $("#submitButton").click(function()
    {
        reply();
    })
});

function reply()
{
     $("#progressBar").html("worksbro");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T15:22:17.037

我的猜测是您在单击`#submitButton`.

表单的默认操作将回发到页面本身，这将导致`#progressBar`具有其原始值。

尝试添加一个`<input type="button"/>`元素并像上面一样处理 onclick 事件，甚至

```
$(function() {
    $("#submitButton").click(reply);
});

function reply(){
    document.getElementById("progressBar").innerHTML = "worksbro";
    //the jQuery way:
    //$('#progressBar').html('worksbro');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T15:28:16.597

可能有很多东西。也许您在 DOM 中有其他一些具有相同 ID (progressBar) 的元素会更新，而不是您期望的。将需要查看您的整个代码以确切了解问题所在。

# html-email - 在 html 电子邮件中显示的关闭表格标签

> ID：14732308
> 
> 赞同：1
> 
> 时间：2013-02-06T15:13:01.693
> 
> 标签：html-email, outlook-2003

编辑以添加我的代码。

我为我的企业设计并编写了一个新的 html 电子邮件模板，我 99.99% 确信我的所有表格标签都已正确关闭，但是当我在 Outlook 2003 中收到电子邮件时，有（两个）随机关闭和标签。我已经通过 W3Cs 验证器运行了电子邮件的在线版本，并且一切正常。

以前有人遇到过这个吗？或者这是我必须忍受的事情以及 html 电子邮件的其他几个问题？

可以在[此处](http://s9.postimage.org/v37g3s4un/email.jpg)找到电子邮件的结果。

我的代码：

```
<!-- Main holding table -->
<table cellspacing="0" cellpadding="0" border="0" width="100%" bgcolor="#350d03">
    <tr><!-- Main holding table row -->
        <td><!-- Main holding table data -->
            <!-- Header table -->
            <table cellspacing="0" cellpadding="0" width="600" bgcolor="#ffffff" align="center">
                <tr><!-- Spacer row -->
                    <td height="30" width="600"></td>
                </tr><!-- End spacer row -->
                <tr>
                    <td width="600" align="center"><a href="http://www.example.co.uk" target="_blank"><img src="linktoimage" alt="Western House Hotel" title="Western House Hotel" border="0" width="312" height="38" /></a></td>
                </tr>
                <tr><!-- Spacer row -->
                    <td height="20" width="600"></td>
                </tr><!-- End spacer row -->
            </table> <!-- End header table -->   
        </td>
    </tr>
    <tr>
        <td>
            <!-- Main image feature table -->
            <table cellspacing="0" cellpadding="0" width="600" bgcolor="#ffffff" align="center">
                <tr>
                    <td width="600"><img src="linktoimage" alt="Western House Hotel" title="Western House Hotel" width="600" height="340" /></td>
                </tr>
            </table><!-- End main image feature table -->        
        </td>
    </tr>
    <tr>
        <td>
            <!-- Book direct with us table -->
            <table cellspacing="0" cellpadding="0" width="600" bgcolor="#210401" align="center">
                <tr><!-- Spacer row -->
                    <td height="10" width="25"></td>
                    <td height="10" width="400"></td>
                    <td height="10" width="150"></td>
                    <td height="10" width="25"></td>
                </tr><!-- End space row -->
                <tr>
                    <td height="10" width="25"></td>
                    <td width="400" valign="middle"><p style="font-size: 16px; font-family: Helvetica, Arial, sans-serif; font-weight: bold; color: #ffffff; margin: 0px 0px 0px 0px; text-transform: uppercase;">For best available rates <span style="font-size: 16px; font-family: Helvetica, Arial, sans-serif; font-weight: normal; color: #bb8d09; margin: 0px 0px 0px 0px; text-transform: none;">book direct with us</span></p></td>
                    <td height="10" width="150" align="right"><a href="http://www.example.co.uk" target="_blank"><img src="linktoimage" alt="Visit our website" title="Visit our website" border="0" width="136" height="28" /></a></td>
                    <td height="10" width="25"></td>
                </tr>
                <tr><!-- Spacer row -->
                    <td height="10" width="25"></td>
                    <td height="10" width="400"></td>
                    <td height="10" width="150"></td>
                    <td height="10" width="25"></td>
                </tr><!-- End space row -->    
            </table><!-- End book direct with us table --> 
        </td>
    </tr>
    <tr>
        <td>
            <!-- Main content table -->
            <table cellspacing="0" cellpadding="0" width="600" bgcolor="#ffffff" align="center">
                <tr><!-- Spacer row -->
                    <td height="20" width="25"></td>
                    <td height="20" width="265"></td>
                    <td height="20" width="20"></td>
                    <td height="20" width="265"></td>
                    <td height="20" width="25"></td>
                </tr><!-- End spacer row -->
                <tr>
                    <td height="25" width="25"></td>
                    <td height="25" width="550" colspan="3" align="center"><img src="linktoimage" alt="Page divide" width="548" height="18" /></td>
                    <td height="25" width="25"></td>
                </tr>
                <tr><!-- Spacer row -->
                    <td height="20" width="25"></td>
                    <td height="20" width="265"></td>
                    <td height="20" width="20"></td>
                    <td height="20" width="265"></td>
                    <td height="20" width="25"></td>
                </tr><!-- End spacer row -->
                <tr>
                    <td height="20" width="25"></td>
                    <td height="20" width="265">
                        <!-- Main feature left table -->
                        <table cellspacing="0" cellpadding="0" width="265" bgcolor="#ffffff" align="center">
                            <tr>
                                <td width="265"><p style="font-size: 20px; font-family: Verdana, Helvetica, Arial, sans-serif; font-weight: bold; color: #350d03; margin: 0px 0px 0px 0px; text-transform: uppercase;">Special Valentines Package!</p></td>
                            </tr>
                            <tr><!-- Spacer row -->
                                <td height="15" width="265"></td>
                            </tr><!-- End spacer row -->
                            <tr>
                                <td width="265"><p style="font-size: 16px; font-family: Verdana, Helvetica, Arial, sans-serif; font-weight: normal; color: #bb8d09; margin: 0px 0px 0px 0px;">Stay and dine in the beautiful 4 star Western House Hotel between 9th and 17th February for only &pound;139*!</p></td>
                            </tr>  
                            <tr><!-- Spacer row -->
                                <td height="25" width="265"></td>
                            </tr><!-- End spacer row -->
                            <tr>
                                <td width="265" align="left" valign="middle"><a href="http://www.example.co.uk" target="_blank"><img src="linktoimage" alt="Book Now!" title="Book Now!" border="0" width="114" height="27" /></a></td>
                            </tr>      
                        </table><!-- End main feature left table -->        
                    </td>
                    <td height="20" width="20"></td>
                    <td height="20" width="265"><img src="linktoimage" alt="Special Valentines Package" title="Special Valentines Package" width="265" height="175" /></td>
                    <td height="20" width="25"></td>
                </tr>
                <tr><!-- Spacer row -->
                    <td height="20" width="25"></td>
                    <td height="20" width="265"></td>
                    <td height="20" width="20"></td>
                    <td height="20" width="265"></td>
                    <td height="20" width="25"></td>
                </tr><!-- End spacer row -->
                <tr>
                    <td height="25" width="25"></td>
                    <td height="25" width="550" colspan="3" align="center"><img src="linktoimage" alt="Page divide" width="548" height="18" /></td>
                    <td height="25" width="25"></td>
                </tr>
                <tr><!-- Spacer row -->
                    <td height="20" width="25"></td>
                    <td height="20" width="265"></td>
                    <td height="20" width="20"></td>
                    <td height="20" width="265"></td>
                    <td height="20" width="25"></td>
                </tr><!-- End spacer row -->
                <tr>
                    <td width="25"></td>
                    <td width="265">
                        <!-- Sub feature table left -->
                        <table cellspacing="0" cellpadding="0" width="265" bgcolor="#ffffff" align="center">
                            <tr>
                                <td width="265"><img src="linktoimage" alt="Mother's Day Treat" title="Mother's Day Treat" width="265" height="140" /></td>
                            </tr>
                            <tr>
                                <td height="15" width="265"></td>
                            </tr>
                            <tr>
                                <td width="265"><p style="font-size: 17px; font-family: Verdana, Helvetica, Arial, sans-serif; font-weight: bold; color: #350d03; margin: 0px 0px 0px 0px; text-transform: uppercase;">Mother's Day Treat!</p></td>
                            </tr>
                            <tr>
                                <td height="10" width="265"></td>
                            </tr> 
                            <tr>
                                <td width="265"><p style="font-size: 13px; font-family: Verdana, Helvetica, Arial, sans-serif; font-weight: normal; color: #7a7a7a; margin: 0px 0px 0px 0px;">Treat your mother to a fantastic dinner and a nights stay in the 4 star Western House Hotel for only &pound;139*!</p></td>
                            </tr>
                            <tr>
                                <td height="25" width="265"></td>
                            </tr>   
                            <tr>
                                <td><a href="http://www.example.co.uk" target="_blank"><img src="linktoimage" alt="Book Now!" title="Book Now!" border="0" width="114" height="27" /></a></td>
                            </tr>    
                        </table><!-- End sub feature table left -->        
                    </td>
                    <td width="20"></td>
                    <td width="265">
                    <!-- Sub feature table right -->
                        <table cellspacing="0" cellpadding="0" width="265" bgcolor="#ffffff" align="center">
                            <tr>
                                <td width="265"><img src="linktoimage" alt="Mother's Day Treat" title="Mother's Day Treat" width="265" height="140" /></td>
                            </tr>
                            <tr>
                                <td height="15" width="265"></td>
                            </tr>
                            <tr>
                                <td width="265"><p style="font-size: 17px; font-family: Verdana, Helvetica, Arial, sans-serif; font-weight: bold; color: #350d03; margin: 0px 0px 0px 0px; text-transform: uppercase;">Easter Special Offer!</p></td>
                            </tr>
                            <tr>
                                <td height="10" width="265"></td>
                            </tr> 
                            <tr>
                                <td width="265"><p style="font-size: 13px; font-family: Verdana, Helvetica, Arial, sans-serif; font-weight: normal; color: #7a7a7a; margin: 0px 0px 0px 0px;">Stay in the 4 star Western House Hotel for 2 nights for only &pound;135 per night and 3 nights for only &pound;125 per night**!</p></td>
                            </tr>
                            <tr>
                                <td height="25" width="265"></td>
                            </tr>   
                            <tr>
                                <td><a href="http://www.example.co.uk" target="_blank"><img src="linktoimage" alt="Book Now!" title="Book Now!" border="0" width="114" height="27" /></a></td>
                            </tr>    
                        </table><!-- End sub feature table right -->
                    </td>
                    <td width="25"></td>
                </tr>
                <tr><!-- Spacer row -->
                    <td height="20" width="25"></td>
                    <td height="20" width="265"></td>
                    <td height="20" width="20"></td>
                    <td height="20" width="265"></td>
                    <td height="20" width="25"></td>
                </tr><!-- End spacer row -->
                <tr>
                    <td height="25" width="25"></td>
                    <td height="25" width="550" colspan="3" align="center"><img src="linktoimage" alt="Page divide" width="548" height="18" /></td>
                    <td height="25" width="25"></td>
                </tr>
                <tr><!-- Spacer row -->
                    <td height="20" width="25"></td>
                    <td height="20" width="265"></td>
                    <td height="20" width="20"></td>
                    <td height="20" width="265"></td>
                    <td height="20" width="25"></td>
                </tr><!-- End spacer row -->
                <tr>
                    <td height="25" width="25"></td>
                    <td height="25" width="550" colspan="3" align="left"><p style="font-size: 13px; font-family: Verdana, Helvetica, Arial, sans-serif; font-weight: bold; color: #350d03; margin: 0px 0px 0px 0px;">Terms and conditions</p></td>
                    <td height="25" width="25"></td>
                </tr>
                <tr>
                    <td height="25" width="25"></td>
                    <td height="25" width="550" colspan="3" align="left"><p style="font-size: 11px; font-family: Verdana, Helvetica, Arial, sans-serif; font-weight: normal; color: #7a7a7a; margin: 0px 0px 0px 0px;">* Based on two guests sharing. ** Per room per night on a dinner, bed and breakfast basis, based on two guests sharing. Subject to availability. Upgrades available.</p></td>
                    <td height="25" width="25"></td>
                </tr>
                <tr><!-- Spacer row -->
                    <td height="20" width="25"></td>
                    <td height="20" width="265"></td>
                    <td height="20" width="20"></td>
                    <td height="20" width="265"></td>
                    <td height="20" width="25"></td>
                </tr><!-- End spacer row -->                   
            </table><!-- End main content table -->                                     
        </td><!-- End main holding table data -->
    </tr><!-- End main holding table row -->                                  
</table> <!-- End main holding table --> 

<!-- Footer spacer table -->
<table cellspacing="0" cellpadding="0" border="0" width="100%" bgcolor="#350d03">
    <tr><!-- Footer spacer table row -->
        <td><!-- Footer spacer table data -->
            <!-- Spacer table -->
            <table cellspacing="0" cellpadding="0" width="600" bgcolor="#350d03" align="center">
                <tr><!-- Spacer row -->
                    <td height="30" width="600"></td>
                </tr><!-- End spacer row -->
            </table><!-- End spacer table -->
        </td><!-- End footer spacer table data -->
    </tr><!-- End footer spacer table row -->
</table><!-- End footer spacer table -->

<!-- Footer holding table -->
<table cellspacing="0" cellpadding="0" border="0" width="100%" bgcolor="#210401">
    <tr><!-- Footer holding table row -->
        <td><!-- Footer holding table data -->
            <!-- Footer table -->
            <table cellspacing="0" cellpadding="0" width="600" bgcolor="#210401" align="center">
                <tr><!-- Spacer row -->
                    <td height="20" width="25"></td>
                    <td height="20" width="265"></td>
                    <td height="20" width="20"></td>
                    <td height="20" width="265"></td>
                    <td height="20" width="25"></td>
                </tr><!-- End spacer row -->
                <tr>
                    <td height="30" width="25"></td>
                    <td height="30" width="265">
                        <!-- Connect table -->
                        <table cellspacing="0" cellpadding="0" width="265" bgcolor="#210401" align="center">    
                            <tr>
                                <td width="265" colspan="3"><p style="font-size: 20px; font-family: Verdana, Helvetica, Arial, sans-serif; font-weight: normal; color: #bb8d09; margin: 0px 0px 0px 0px;">Connect with Us</p></td>
                            </tr> 
                            <tr><!-- Spacer row -->
                                <td height="20" width="25"></td>
                                <td height="20" width="15"></td>
                                <td height="20" width="225"></td>
                            </tr><!-- End spacer row -->
                            <tr>
                                <td width="25"><img src="linktoimage" alt="Find us on Facebook" title="Find us on Facebook" width="25" height="25" /></td>
                                <td width="15"></td>
                                <td width="225"><p style="font-size: 12px; font-family: Verdana, Helvetica, Arial, sans-serif; font-weight: normal; color: #ffffff; margin: 0px 0px 0px 0px;"><a href="http://www.example.co.uk" target="_blank" title="Find us on Facebook" style="color: #ffffff; text-decoration: none;">facebook.com/westernhousehotel</a></p></td>
                            </tr> 
                            <tr><!-- Spacer row -->
                                <td height="10" width="25"></td>
                                <td height="10" width="15"></td>
                                <td height="10" width="225"></td>
                            </tr><!-- End spacer row -->
                            <tr>
                                <td width="25"><img src="http://www.example.co.uk" alt="Follow us on Twitter" title="Follow us on Twitter" width="25" height="25" /></td>
                                <td width="15"></td>
                                <td width="225"><p style="font-size: 12px; font-family: Verdana, Helvetica, Arial, sans-serif; font-weight: normal; color: #ffffff; margin: 0px 0px 0px 0px;"><a href="http://www.example.co.uk" target="_blank" title="Follow us on Twitter" style="color: #ffffff; text-decoration: none;">twitter.com/westernhouseayr</a></p></td>
                            </tr> 
                        </table><!-- End connect table -->  
                    </td>
                    <td height="30" width="20"></td>
                    <td height="30" width="265">
                    <!-- Connect table -->
                        <table cellspacing="0" cellpadding="0" width="265" bgcolor="#210401" align="center">    
                            <tr>
                                <td width="265" colspan="3"><p style="font-size: 20px; font-family: Verdana, Helvetica, Arial, sans-serif; font-weight: normal; color: #bb8d09; margin: 0px 0px 0px 0px;">Contact Us</p></td>
                            </tr> 
                            <tr><!-- Spacer row -->
                                <td height="20" width="25"></td>
                                <td height="20" width="15"></td>
                                <td height="20" width="225"></td>
                            </tr><!-- End spacer row -->
                            <tr>
                                <td height="25" width="225" colspan="3"><p style="font-size: 12px; font-family: Verdana, Helvetica, Arial, sans-serif; font-weight: normal; color: #ffffff; margin: 0px 0px 0px 0px;">01292 294990</p></td>
                            </tr> 
                            <tr><!-- Spacer row -->
                                <td height="10" width="25"></td>
                                <td height="10" width="15"></td>
                                <td height="10" width="225"></td>
                            </tr><!-- End spacer row -->
                            <tr>
                                <td height="25" width="225" colspan="3"><p style="font-size: 12px; font-family: Verdana, Helvetica, Arial, sans-serif; font-weight: normal; color: #ffffff; margin: 0px 0px 0px 0px;"><a href="http://www.example.co.uk" target="_blank" title="Send us an Email" style="color: #ffffff; text-decoration: none;">info@westernhousehotel.co.uk</a></p></td>
                            </tr> 
                        </table><!-- End connect table -->
                    </td>
                    <td height="30" width="25"></td>
                </tr>
                <tr><!-- Spacer row -->
                    <td height="30" width="25"></td>
                    <td height="30" width="265"></td>
                    <td height="30" width="20"></td>
                    <td height="30" width="265"></td>
                    <td height="30" width="25"></td>
                </tr><!-- End spacer row -->
                <tr>
                    <td height="20" width="25"></td>
                    <td height="20" width="500" colspan="3" align="center"><p style="font-size: 12px; font-family: Verdana, Helvetica, Arial, sans-serif; font-weight: normal; color: #ffffff; margin: 0px 0px 0px 0px;">Western House Hotel | Craigie Road | Ayr, South Ayrshire | Scotland | KA7 0HA</p></td>
                    <td height="20" width="25"></td>
                </tr>
                <tr><!-- Spacer row -->
                    <td height="20" width="25"></td>
                    <td height="20" width="265"></td>
                    <td height="20" width="20"></td>
                    <td height="20" width="265"></td>
                    <td height="20" width="25"></td>
                </tr><!-- End spacer row -->
            </table><!-- End footer table -->
        </td><!-- End footer holding table data -->
    </tr><!-- End footer holding table row -->
</table><!-- End footer holding table -->                       

</body>
</html> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:09:26.990

您需要在 Outlook 中查看页面的代码。它会很乱，但它至少会告诉你为什么`</td>`'s 漂浮在那里。那里可能有一个混乱的跨度或其他东西。

从那里你只需要排除故障，尝试以下一些：

*   设置你的字符集`<meta http-equiv="Content-Type" content="text/html; charset=utf-8">`

*   试试`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">`doctag

如果这不起作用，请尝试：

*   删除`<p>`标签并`<br>`在问题发生的地方使用 's 以查看 Outlook 处理是否不同

*   尝试缩短您的电子邮件，使错误部分保持不变，看看它是否与您的代码长度有关

并不是说这些东西总是必要的，但是您需要隔离 Outlook“不喜欢”的内容，即使按照正常的 Web 标准，该解决方案看起来很愚蠢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:46:17.510

您是否尝试过仅发送正文的内部 html？我只是将其添加为评论，但显然在我获得更高的声誉之前我不能。我尝试发送内部 html，但通过 Powershell 没有任何多余的标签。你到底是怎么寄的？

# c# - 使用 c# 将 ppsx 转换为 pdf

> ID：14732309
> 
> 赞同：1
> 
> 时间：2013-02-06T15:13:05.250
> 
> 标签：c#, pdf, powerpoint

我想使用 C# 和 Microsoft.Office.Interop.PowerPoint 将 pps(x) 或 ppt(x) 转换为 PDF。为此，我使用执行以下编码的方法：

```
Microsoft.Office.Interop.PowerPoint.Presentation presentation = null;
Microsoft.Office.Interop.PowerPoint.Application application = null;
try
{
    application = new Microsoft.Office.Interop.PowerPoint.Application();
    presentation = application.Presentations.Open(sourcePath, MsoTriState.msoTrue, MsoTriState.msoFalse, MsoTriState.msoFalse);
    presentation.SaveAs(targetPath, PpSaveAsFileType.ppSaveAsPDF, Microsoft.Office.Core.MsoTriState.msoTrue);
    result = true;
}
catch (Exception ex)
{
    Console.WriteLine(ex.Message);
    result = false;
}
finally
{
    if (presentation != null)
    {
        presentation.Close();
        presentation = null;
    }
    if (application != null)
    {
        application.Quit();
        application = null;
    }
}
return result; 
```

第一次调用该方法时，ppsx成功保存为pdf。但是当再次调用该方法时，会引发以下异常`application = new Microsoft.Office.Interop.PowerPoint.Application();`

异常消息是：`Creating an instance of the COM component with CLSID {91493441-5A91-11CF-8700-00AA0060263B} from the IClassFactory failed due to the following error: 800706b5 The interface is unknown. (Exception from HRESULT: 0x800706B5).`就在引发此异常之前，控制台显示另一个异常`"System.Runtime.InteropServices.COMException" in mscorlib.dll`。

通过 F12导航到该界面时`Microsoft.Office.Interop.PowerPoint.Application`，该界面的 GUID 为 9149344 **2** -5A91-11CF-8700-00AA0060263B。所以它与异常消息中的 GUID 略有不同。

想请教一下，这个问题怎么解决？

PS：本笔记本安装了Microsoft Office 2010（运行Microsoft Win 7）

感谢你并致以真诚的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T02:17:22.040

以下（可以说是~~愚蠢~~的）解决方法对我有用：

```
try
{
    app = new Application();
}
catch (COMException)
{
    app = new Application();
} 
```

编辑：谢谢杰西:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T11:58:14.520

在返回值之前尝试关闭演示文稿和应用程序。

```
presentation.Close();
application.Quit(); 
```

否则文档和应用程序保持打开状态，无法访问

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-03T08:26:39.953

您可以尝试使用此代码将任何 ppt 文件转换为具有互操作性的 pdf，并且它可以正常工作。即使在后台进程中也不会保持打开的 COM 对象。

```
Microsoft.Office.Interop.PowerPoint.Application app = new Microsoft.Office.Interop.PowerPoint.Application();
                    app.Visible = MsoTriState.msoTrue;
                    Presentations presentations = app.Presentations;
                    Presentation presentation = presentations.Open(fileLocation, ReadOnly: MsoTriState.msoCTrue);
                    presentation.ExportAsFixedFormat(outLocation, PpFixedFormatType.ppFixedFormatTypePDF);

                    Marshal.ReleaseComObject(presentations);
                    presentation.Close();
                    Marshal.ReleaseComObject(presentation);
                    app.Quit();
                    Marshal.ReleaseComObject(app); 
```

# zend-framework2 - Zend Framework 2：Zend\Mvc\Router\Http\Regex 可选值

> ID：14732310
> 
> 赞同：0
> 
> 时间：2013-02-06T15:13:06.407
> 
> 标签：zend-framework2

我有一个控制器和操作，它采用客户名称，然后在数据库上进行搜索以匹配客户。有些客户可能有中间名，有些则没有。

为此，我有以下两条路线：

```
 'full-name' => array(
            'type' => 'regex',
            'options' => array(
                'regex' => '/(?<title>Mr|Miss|Mrs|Ms)/(?<firstname>[a-zA-Z0-9_-]+)/(?<middlename>[a-zA-Z0-9_-]+)/(?<lastname>[a-zA-Z0-9_-]+)',
                'defaults' => array(
                    'controller' => 'Application\Controller\Customers',
                    'action'     => 'index',
                ),
                'spec'  => '/%firstname%/%middlename%/%lastname%'
            )
        ),
        'name' => array(
            'type' => 'regex',
            'options' => array(
                'regex' => '/(?<title>Mr|Miss|Mrs|Ms)(?<firstname>[a-zA-Z0-9_-]+)/(?<lastname>[a-zA-Z0-9_-]+)',
                'defaults' => array(
                        'controller' => 'Application\Controller\Customers',
                        'action'     => 'index',
                ),
                'spec'  => '/%firstname%/%lastname%'
            )
        ), 
```

我想知道是否有办法将它们组合成一个正则表达式规则，但我找不到任何适用于中间名的东西。我尝试了一些方法，例如：

```
(?<middlename>[a-zA-Z0-9_-]?)
(?<middlename>[a-zA-Z0-9_-]+|^$) 
```

但后来它抱怨说，当我在没有中间名的情况下尝试它时没有匹配的路由。显然，我可以保持原样，因为它可以工作，但如果可以将两条路线组合成一条路线，那就太好了。

有谁知道这样做的方法？

编辑：与我实际需要的相比，我最初简化了代码，但这导致解决方案无法回答我关于正则表达式中可选值的问题。我更改了代码以反映我为什么不能有分段路线。

作为参考，这是我的初始代码：

```
 'full-name' => array(
            'type' => 'regex',
            'options' => array(
                'regex' => '/Customer/(?<firstname>[a-zA-Z0-9_-]+)/(?<middlename>[a-zA-Z0-9_-]+)/(?<lastname>[a-zA-Z0-9_-]+)',
                'defaults' => array(
                    'controller' => 'Application\Controller\Customers',
                    'action'     => 'index',
                ),
                'spec'  => '/%firstname%/%middlename%/%lastname%'
            )
        ),
        'name' => array(
            'type' => 'regex',
            'options' => array(
                'regex' => '/Customer/(?<firstname>[a-zA-Z0-9_-]+)/(?<lastname>[a-zA-Z0-9_-]+)',
                'defaults' => array(
                        'controller' => 'Application\Controller\Customers',
                        'action'     => 'index',
                ),
                'spec'  => '/%firstname%/%lastname%'
            )
        ), 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:21:47.340

我对`Regex`路由类不太熟悉。我知道这可以通过`Segment`路线来完成。

```
'name' => array(
    'type'    => 'Segment',
    'options' => array(
        'route'    => '/[:title[/]]:firstname[/:middlename]/:lastname',
        'constraints' => array(
            'title' => 'Mr|Miss|Mrs|Ms',
            'firstname' => '[a-zA-Z0-9_-]+',
            'middlename' => '[a-zA-Z0-9_-]+',
            'lastname' => '[a-zA-Z0-9_-]+',
        ),
        'defaults' => array(
            'controller' => 'Application\Controller\Customers',
            'action'     => 'index',
        ),
    ),
), 
```

**编辑：**更新答案以反映评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:50:43.710

当您从匹配的路由中获取参数时，您可以尝试在控制器中解决此问题：

```
'full-name' => array(
    'type' => 'regex',
    'options' => array(
        // look here how I changed the regex in a way that the last parameter is optional
        'regex' => '/Customer/(?<firstname>[a-zA-Z0-9_-]+)/(?<middlename>[a-zA-Z0-9_-]+)/*(?<lastname>[a-zA-Z0-9_-]*)',
        'defaults' => array(
            'controller' => 'Application\Controller\Customers',
            'action'     => 'index',
            'lastname'   => false, // add some default value to the optional parameter
        ),
        'spec'  => '/%firstname%/%middlename%/%lastname%'
    )
), 
```

然后在控制器...

```
public function userAction()
{
    $firstName = $this->params()->fromRoute('firstname');

    // if lastname === false, we have just two parameters (firstname/lastname)
    if ($this->params()->fromRoute('lastname') === false) {
        $lastName = $this->params()->fromRoute('middlename');
        $middleName = NULL;
    } else {
        // if not, we have the three parameters (firstname/middlename/lastname)
        $lastName = $this->params()->fromRoute('lastname');
        $middleName = $this->params()->fromRoute('middlename');
    }
} 
```

编写控制器动作的其他方式（实际上是同一件事）：

```
public function userAction()
{
    $firstName = $this->params()->fromRoute('firstname');

    $lastName = $this->params()->fromRoute('lastname') === false ?
        $this->params()->fromRoute('middlename') :
        $this->params()->fromRoute('lastname');

    $middleName = $this->params()->fromRoute('lastname') === false ?
        NULL : $this->params()->fromRoute('middlename');
} 
```

这样您就可以只使用一条路线。我想不出别的办法！

# html - 像文件一样输入PATH，但没有上传

> ID：14732328
> 
> 赞同：1
> 
> 时间：2013-02-06T15:13:57.500
> 
> 标签：html, file, firefox, path, firefox-addon

我目前正在为我们的本地网络构建一个基于 Web 的系统，并希望用户在 Web 表单上选择存储某些文件的位置（网络驱动器和子目录）。

有谁知道通过浏览而不是文本输入来输入 PATH 的简单方法。我最初想使用 < input type="file" /> 但没有 multipart-form，然后使用 javascript/jQuery 读取输入，但这是一个安全问题，不可用。

我可以更改 Firefox 浏览器的配置设置，但我无法找到如何允许这样做。

是否有 Firefox 插件或 Flash 实用程序可以完成此操作。

迄今为止，我唯一的解决方案是让他们打开文件资源管理器并将路径粘贴到表单中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:19:32.207

如果 Firefox 是最新的，您可以使用 HTML5 文件系统 API： http: [//net.tutsplus.com/tutorials/html-css-techniques/toying-with-the-html5-filesystem-api/](http://net.tutsplus.com/tutorials/html-css-techniques/toying-with-the-html5-filesystem-api/)

当前兼容性：[http ://caniuse.com/#feat=filereader](http://caniuse.com/#feat=filereader)

# regex - 对还是错：纯正则表达式可以将大写转换为小写？

> ID：14732333
> 
> 赞同：1
> 
> 时间：2013-02-06T15:14:13.330
> 
> 标签：regex, replace, uppercase, lowercase

有没有办法使用 perl 风格的正则表达式来匹配一个字符并将其替换为它的大写/小写等效而不依赖于另一种语言（php、javascript 等）？

修改字符串大小写会很方便，以便能够在 VI 编辑器*和*Notepad++*和*PHP 等中进行，而不是为每个上下文使用不同的方法。

应该不会吧。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:19:37.133

就像你说的，*“可能不会。”*

正则表达式并不意味着修改字符串，只是为了搜索/匹配它们。您将始终需要某种“外部”语言或程序来进行修改或以其他方式处理正则表达式的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:20:13.230

据我了解，答案是错误的。

正则表达式定义语法，如何匹配文本。但是如何对匹配的文本做进一步的操作，这是具体实现的工作。某些工具中的类似替换功能`python/java/perl/vim/sed/awk/...`不提供该功能，例如`grep`.

大小写更改相同。

如果您考虑一下，这些语言/工具之间的替换方法/功能是不同的

```
awk: sub/gsub
sed: s/../../
vim: s/../../
python: re.sub()
java: replaceAll(..) ...
... 
```

如果正则表达式支持它，为什么没有标准功能？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:18:36.327

正则表达式用于匹配，您的工具（Vi、Notepad++、PHP）正在执行替换。

# python - 如何使用 Python win32com 调用 Excel VBA 函数和子函数？

> ID：14732340
> 
> 赞同：8
> 
> 时间：2013-02-06T15:14:24.840
> 
> 标签：python, excel, vba, win32com

我的 Excel 工作簿包含类似于以下内容的 VBA 子程序和宏；他们坐在Module1中。

如何使用 Python win32com 模块调用它们？

```
Public Sub setA1(ByVal s As String)
    ThisWorkbook.ActiveSheet.Range("A1").Value = s
End Sub

Public Function getA1() As String
    getA1 = ThisWorkbook.ActiveSheet.Range("A1").Value
End Function 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-06T15:38:10.890

```
import win32com.client
xl=win32com.client.Dispatch("Excel.Application")
xl.Workbooks.Open(Filename="c:\\temp\\book1.xls",ReadOnly=1)
xl.Application.Run("setA1", '4')
res = xl.Application.Run("getA1")
print res
xl = 0 
```

就这么简单......

# python-2.7 - 选择默认的python

> ID：14732341
> 
> 赞同：0
> 
> 时间：2013-02-06T15:14:28.287
> 
> 标签：python-2.7, debian, development-environment

我刚刚在我的发行版 debian 挤压中安装了 python2.7。我对系统搜索 python 可执行文件的方式有点困惑。例如，当我输入`ls -l | grep python`

我有

```
lrwxrwxrwx 1 root   root          23 Feb  5 17:14 pdb2.5 -> ../lib/python2.5/pdb.py
lrwxrwxrwx 1 root   root          23 Nov 23 18:29 pdb2.6 -> ../lib/python2.6/pdb.py
lrwxrwxrwx 1 root   root           9 Nov 23 18:29 python -> python2.6
-rwxr-xr-x 1 root   root     1390792 Nov 28  2010 python2.5
-rwxr-xr-x 1 root   root     2617520 Dec 27  2010 python2.6
-rwxr-xr-x 1 root   root        1452 Dec 27  2010 python2.6-config
lrwxrwxrwx 1 root   root          16 Nov 23 18:49 python-config -> python2.6-config
lrwxrwxrwx 1 root   root          29 Nov 23 18:29 pyversions -> ../share/python/pyversions.py 
```

符号链接显示 python 指向 python2.6，但是当我输入

```
python

The python 2.7 is the default python executable
Python 2.7.3 (default, Feb  6 2013, 12:12:35) 
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information. 
```

我需要做什么才能使默认 python 回到 python 2.6？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:20:11.397

对于您的问题，请参阅命令`ls -l $( which python )`显示的内容。我想这可能会让你大吃一惊。

如果您真的想选择自己的 Python 可执行文件，独立于系统上安装或配置的内容，我建议您使用[pythonbrew](https://github.com/utahta/pythonbrew)。

# asp.net-mvc - 我可以对单个 RESTful Url 的 POST 和 GET 使用两种不同的模型吗？

> ID：14732343
> 
> 赞同：2
> 
> 时间：2013-02-06T15:14:39.610
> 
> 标签：asp.net-mvc, http, rest, asp.net-mvc-4, asp.net-web-api

我已经在 SO 上的其他地方寻找这个问题的答案，但找不到。

我正在构建一个 MVC Web API，它将在一定程度上启动远程机器上的进程。截至目前，“blah.com/Process”的 POST 会将一些初始化数据保存到数据库并指示 Windows 服务开始对其进行操作。对“blah.com/Process/{Id}”的 GET 请求将检索进程的当前进度。

这两个控制器动作使用两种不同的模型。POST 接受一个包含参数信息的模型，GET（因为它用于报告进度，我不太关心参数）不返回。这是否违反了 RESTful 设计？我应该使用两个不同的 URL，还是*违反*REST？据我了解，正在传输的数据应该代表流程的当前状态，在我看来，这两种情况都是如此。

**编辑：**感谢您的回复。我现在对自己的方法感到更加安全。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:21:57.773

[根据维基百科](http://en.wikipedia.org/wiki/Representational_state_transfer)：

> 符合 REST 约束通常被称为“RESTful”。如果服务违反了任何必需的约束，则不能严格将其视为 RESTful。

在不涉及复杂细节的情况下，这些约束是：

*   客户端服务器
*   无状态
*   可缓存
*   分层系统
*   按需编码（可选）
*   统一的界面

您的描述中的任何一种情况都没有违反这些原则。做对 API 的使用者最有意义的事情，使整体尽可能简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T17:05:15.990

正如其他人指出的那样，这并不违反 REST。但即使是这样，如果它对你有用，它可能仍然没问题，只要它对你的设计有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:18:41.500

我已经看到 GET 和 POST 方法结合到同一个 URL。这样做是可以接受的，并且不违反 RESTful 设计。

# python - 带有要提取的匹配组的正向后视

> ID：14732345
> 
> 赞同：0
> 
> 时间：2013-02-06T15:14:50.570
> 
> 标签：python, regex, lookbehind

```
testString = ("<h2>Tricks</h2>"
              "<a href=\"#\"><i class=\"icon-envelope\"></i></a>")
import re
re.sub("(?<=[<h2>(.+?)</h2>\s+])<a href=\"#\"><i class=\"icon-(.+?)\"></i></a>", "{{ \\1 @ \\2 }}", testString) 
```

这会产生：`invalid group reference`.

使替换 take only `\\1`， only extracts `envelope`，这让我认为后视被忽略了。有没有办法从lookbehind中提取一些东西？

我期待制作：

```
<h2>Tricks</h2>
{{ Tricks @ envelope }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:05:03.477

看起来您真的想改用 HTML 解析器。混合正则表达式和 HTML 真的很痛苦，真的很快。

在您的正则表达式中，您在这里创建了一个由 <、h、2、> 等组成的字符类（一组允许匹配的字符）：

```
[<h2>(.+?)</h2>\s+] 
```

可以写成：

```
[<>h2()+.?/\s] 
```

它会匹配相同的字符。

不要使用 [..] 除非您想为匹配创建一组字符（\s、\d 等是预构建的字符类）。

但是，即使您要删除括号，也不允许向后看。不允许在后视中使用可变宽度模式（无 + 或 *）。因此，*对于*字符类，lookbehind 不再匹配您认为它匹配的内容，*没有它*，lookbehind 是不允许的。

总而言之，只是[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)代替。

# python - 使用谷歌应用引擎作为 smtp 服务器

> ID：14732353
> 
> 赞同：1
> 
> 时间：2013-02-06T15:15:12.143
> 
> 标签：python, google-app-engine

我们正在寻找使用谷歌发送电子邮件，看起来这可以通过谷歌应用引擎很容易地完成：[https ://developers.google.com/appengine/docs/python/mail/sendingmail](https://developers.google.com/appengine/docs/python/mail/sendingmail)

但是我想知道的是，我们是否可以将谷歌应用程序用作 smtp 服务器/网关，以便我们可以将应用程序中的地址放入我们当前发送消息的位置，应用程序会将它们接收并提交给谷歌通过他们的api发送？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T17:37:03.890

这无法完成，因为 GAE 不支持 SMTP 所需的入站套接字连接。

此外，从 GAE 发送邮件有许多限制：邮件只能以来自管理员/开发人员帐户或当前登录用户的身份发送（仅通过 Google 帐户，而不是联合登录）。

# opengl - 当我的主循环等待通道滴答并传递事件时，OpenGL 似乎卡住了

> ID：14732354
> 
> 赞同：5
> 
> 时间：2013-02-06T15:15:14.577
> 
> 标签：opengl, go

我写了一个简单的 Go 程序。它的目标是使用 OpenGL 在屏幕上旋转一个三角形。

**编辑：主循环似乎是负责任的，OpenGl 很好，但我在 goroutine 和/或通道上做错了。请参阅这篇文章的底部。我正在适当地更改这个问题的标题。**

该程序几乎可以工作。它口吃，在按预期旋转之间交替，只是在不绘制任何东西的情况下闪烁两个 OpenGL 缓冲区。我尝试渲染的大约三分之二的帧都以静默方式失败，我不明白为什么。

这不取决于我的帧速率。无论我以 50 FPS 还是 1 FPS 更新，我都会得到一长串混乱的帧，然后是较短的工作帧系列。我不认为我要求 OpenGL 工作得太快（而且我还是打电话`glFinish()`）。

我开始试验，发现了一个奇怪的行为。`glGetUniformLocation`作为第一步，我将新的旋转矩阵发送到顶点缓冲区。我注意到，如果我要求`glGetUniformLocation`告诉我在哪里可以找到`"dummy"`，着色器中显然不存在的参数，它并不总是按预期返回 -1；它有时会返回 0。该虚拟属性与问题无关，它只是一种症状。

我在每次 OpenGL 调用后检查 glGetError，它们总是返回 NO_ERROR。

我在这里粘贴我的代码。我希望我能把它做得更短。我的真实代码在每次调用 OpenGl 后都会检查 glError，并且还会查看 0 个缓冲区或 -1 个位置。这个版本更轻。 `func main`在顶部，跟随我负责旋转的循环。

```
package main

import (
    "fmt"
    "github.com/0xe2-0x9a-0x9b/Go-SDL/sdl"
    gl "github.com/chsc/gogl/gl33"
    "math"
    "time"
    "unsafe"
)

const DEG_TO_RAD = math.Pi / 180

type GoMatrix [16]float64
type GlMatrix [16]gl.Float

var good_frames, bad_frames, sdl_events int

func main() {

    //=================================================================
    // Just opening a window, skip to the next part.

    if status := sdl.Init(sdl.INIT_VIDEO); status != 0 {
        panic("Could not initialize SDL: " + sdl.GetError())
    }
    defer sdl.Quit()

    sdl.GL_SetAttribute(sdl.GL_DOUBLEBUFFER, 1)
    const FLAGS = sdl.OPENGL
    if screen := sdl.SetVideoMode(640, 480, 32, FLAGS); screen == nil {
        panic("Could not open SDL window: " + sdl.GetError())
    }

    if err := gl.Init(); err != nil {
        panic(err)
    }

    gl.Viewport(0, 0, 640, 480)
    gl.ClearColor(.5, .5, .5, 1)

    //=================================================================
    // Simplest shaders ever.

    // A matrix to move the model, nothing else.
    vertex_code := gl.GLString(`
    #version 330 core
    in vec3 vpos;
    uniform mat4 MVP;
    void main() { 
        gl_Position = MVP * vec4(vpos, 1);
    }   
    `)
    // Everything is red.
    fragment_code := gl.GLString(`
    #version 330 core
    void main(){
        gl_FragColor = vec4(1,0,0,1);
    }
    `)
    vs := gl.CreateShader(gl.VERTEX_SHADER)
    fs := gl.CreateShader(gl.FRAGMENT_SHADER)
    gl.ShaderSource(vs, 1, &vertex_code, nil)
    gl.ShaderSource(fs, 1, &fragment_code, nil)
    gl.CompileShader(vs)
    gl.CompileShader(fs)
    prog := gl.CreateProgram()
    gl.AttachShader(prog, vs)
    gl.AttachShader(prog, fs)
    gl.LinkProgram(prog)
    // Did it compile?
    var link_status gl.Int
    gl.GetProgramiv(prog, gl.LINK_STATUS, &link_status)
    if link_status == gl.FALSE {
        var info_log_length gl.Int
        gl.GetProgramiv(prog, gl.INFO_LOG_LENGTH, &info_log_length)
        if info_log_length == 0 {
            panic("Program linking failed but OpenGL has no log about it.")
        } else {
            info_log_gl := gl.GLStringAlloc(gl.Sizei(info_log_length))
            defer gl.GLStringFree(info_log_gl)
            gl.GetProgramInfoLog(prog, gl.Sizei(info_log_length), nil, info_log_gl)
            info_log := gl.GoString(info_log_gl)
            panic(info_log)
        }
    }
    gl.UseProgram(prog)
    attrib_vpos := gl.Uint(gl.GetAttribLocation(prog, gl.GLString("vpos")))

    //=================================================================
    // One triangle.

    positions := [...]gl.Float{-.5, -.5, 0, .5, -.5, 0, 0, .5, 0}

    var vao gl.Uint
    gl.GenVertexArrays(1, &vao)
    gl.BindVertexArray(vao)

    var vbo gl.Uint
    gl.GenBuffers(1, &vbo)
    gl.BindBuffer(gl.ARRAY_BUFFER, vbo)
    gl.BufferData(gl.ARRAY_BUFFER,
        gl.Sizeiptr(unsafe.Sizeof(positions)),
        gl.Pointer(&positions[0]),
        gl.STATIC_DRAW)

    gl.EnableVertexAttribArray(attrib_vpos)
    gl.VertexAttribPointer(attrib_vpos, 3, gl.FLOAT, gl.FALSE, 0, gl.Pointer(nil))

    //=================================================================

    Loop(prog)
    fmt.Println("Good frames", good_frames)
    fmt.Println("Bad frames ", bad_frames)
    fmt.Println("SDL events ", sdl_events)
}

func Loop(program gl.Uint) {
    start_time := time.Now()
    ticker := time.NewTicker(100 * time.Millisecond)
    defer ticker.Stop()
    running := true
    for running {
        select {
        case tick_time := <-ticker.C:
            OnTick(start_time, tick_time, program)
        case event := <-sdl.Events:
            running = OnSdlEvent(event)
        }
    }
}

func OnSdlEvent(event interface{}) bool {
    sdl_events++
    switch event.(type) {
    case sdl.QuitEvent:
        return false // Stop the main loop.
    }
    return true // Do not stop the main loop.
}

func OnTick(start_time, tick_time time.Time, program gl.Uint) {
    duration := tick_time.Sub(start_time).Seconds()
    speed := 10.
    angle := math.Mod(duration*speed, 360)
    gom := RotZ(angle)
    MVP := ToGlMatrix(gom)

    /* HERE, SOMETHING FISHY HAPPENS.

    Problem: sometimes, actually often, OpenGl returns 0 instead of -1 for
    the dummy parameter.  This is entirely correlated to the stuttering.

    With my implementation of OpenGl, swap buffer does a real swap.
    That means I get to see the last two pictures rendered.
    Thing is, I can see the swap, that means the pictures are different.
    That means that the call to DrawArrays is ignored.

    OpenGl is just crapping its pants.
    */
    matrix_loc := gl.GetUniformLocation(program, gl.GLString("MVP"))
    dummy_matrix_loc := gl.GetUniformLocation(program, gl.GLString("dummy"))
    if gl.GetError() != gl.NO_ERROR {
        fmt.Println("Error get location") // Never happens.
    }
    if dummy_matrix_loc == -1 {
        good_frames++ // Because is SHOULD fail.
    } else {
        bad_frames++ // That's not normal.
    }
    gl.UniformMatrix4fv(matrix_loc, 16, gl.TRUE, &MVP[0])
    if gl.GetError() != gl.NO_ERROR {
        fmt.Println("Error send matrix") // Never happens.
    }
    gl.Clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT)
    if gl.GetError() != gl.NO_ERROR {
        fmt.Println("Error clearing") // Never happens.
    }
    gl.DrawArrays(gl.TRIANGLES, 0, 3)
    if gl.GetError() != gl.NO_ERROR {
        fmt.Println("Error drawing") // Never happens.
    }
    gl.Finish() // Does not seem to make anything work better.
    sdl.GL_SwapBuffers()
}

func RotZ(angle float64) GoMatrix {
    var gom GoMatrix
    a := angle * DEG_TO_RAD
    c := math.Cos(a)
    s := math.Sin(a)
    gom[0] = c
    gom[1] = s
    gom[4] = -s
    gom[5] = c
    gom[10] = 1
    gom[15] = 1
    return gom
}

func ToGlMatrix(gom GoMatrix) GlMatrix {
    var glm GlMatrix
    glm[0] = gl.Float(gom[0])
    glm[1] = gl.Float(gom[1])
    glm[2] = gl.Float(gom[2])
    glm[3] = gl.Float(gom[3])
    glm[4] = gl.Float(gom[4])
    glm[5] = gl.Float(gom[5])
    glm[6] = gl.Float(gom[6])
    glm[7] = gl.Float(gom[7])
    glm[8] = gl.Float(gom[8])
    glm[9] = gl.Float(gom[9])
    glm[10] = gl.Float(gom[10])
    glm[11] = gl.Float(gom[11])
    glm[12] = gl.Float(gom[12])
    glm[13] = gl.Float(gom[13])
    glm[14] = gl.Float(gom[14])
    glm[15] = gl.Float(gom[15])
    return glm
} 
```

根据要求，输出`glxinfo`。

```
> glxinfo
name of display: :0
display: :0  screen: 0
direct rendering: Yes
server glx vendor string: ATI
server glx version string: 1.4
server glx extensions:
    GLX_ARB_multisample, GLX_EXT_import_context, GLX_EXT_texture_from_pixmap, 
    GLX_EXT_visual_info, GLX_EXT_visual_rating, GLX_OML_swap_method, 
    GLX_SGI_make_current_read, GLX_SGI_swap_control, GLX_SGIS_multisample, 
    GLX_SGIX_fbconfig, GLX_SGIX_pbuffer, GLX_SGIX_visual_select_group
client glx vendor string: ATI
client glx version string: 1.4
client glx extensions:
    GLX_ARB_create_context, GLX_ARB_create_context_profile, 
    GLX_ARB_get_proc_address, GLX_ARB_multisample, GLX_EXT_import_context, 
    GLX_EXT_visual_info, GLX_EXT_visual_rating, GLX_MESA_allocate_memory, 
    GLX_MESA_copy_sub_buffer, GLX_MESA_swap_control, 
    GLX_MESA_swap_frame_usage, GLX_NV_swap_group, GLX_OML_swap_method, 
    GLX_SGI_make_current_read, GLX_SGI_swap_control, GLX_SGI_video_sync, 
    GLX_SGIS_multisample, GLX_SGIX_fbconfig, GLX_SGIX_pbuffer, 
    GLX_SGIX_swap_barrier, GLX_SGIX_swap_group, GLX_SGIX_visual_select_group, 
    GLX_EXT_texture_from_pixmap, GLX_EXT_framebuffer_sRGB, 
    GLX_ARB_fbconfig_float, GLX_AMD_gpu_association
GLX version: 1.4
GLX extensions:
    GLX_ARB_create_context, GLX_ARB_create_context_profile, 
    GLX_ARB_get_proc_address, GLX_ARB_multisample, GLX_EXT_import_context, 
    GLX_EXT_visual_info, GLX_EXT_visual_rating, GLX_MESA_swap_control, 
    GLX_NV_swap_group, GLX_OML_swap_method, GLX_SGI_make_current_read, 
    GLX_SGI_swap_control, GLX_SGI_video_sync, GLX_SGIS_multisample, 
    GLX_SGIX_fbconfig, GLX_SGIX_pbuffer, GLX_SGIX_swap_barrier, 
    GLX_SGIX_swap_group, GLX_SGIX_visual_select_group, 
    GLX_EXT_texture_from_pixmap
OpenGL vendor string: ATI Technologies Inc.
OpenGL renderer string: ATI Mobility Radeon HD 4500 Series
OpenGL version string: 3.3.11005 Compatibility Profile Context
OpenGL shading language version string: 3.30
OpenGL extensions:
    GL_AMDX_debug_output, GL_AMDX_vertex_shader_tessellator, 
    GL_AMD_conservative_depth, GL_AMD_debug_output, 
    GL_AMD_depth_clamp_separate, GL_AMD_draw_buffers_blend, 
    GL_AMD_name_gen_delete, GL_AMD_performance_monitor, GL_AMD_pinned_memory, 
    GL_AMD_sample_positions, GL_AMD_seamless_cubemap_per_texture, 
    GL_AMD_shader_stencil_export, GL_AMD_texture_cube_map_array, 
    GL_AMD_texture_texture4, GL_AMD_vertex_shader_tessellator, 
    GL_ARB_ES2_compatibility, GL_ARB_blend_func_extended, 
    GL_ARB_color_buffer_float, GL_ARB_copy_buffer, GL_ARB_depth_buffer_float, 
    GL_ARB_depth_clamp, GL_ARB_depth_texture, GL_ARB_draw_buffers, 
    GL_ARB_draw_buffers_blend, GL_ARB_draw_elements_base_vertex, 
    GL_ARB_draw_instanced, GL_ARB_explicit_attrib_location, 
    GL_ARB_fragment_coord_conventions, GL_ARB_fragment_program, 
    GL_ARB_fragment_program_shadow, GL_ARB_fragment_shader, 
    GL_ARB_framebuffer_object, GL_ARB_framebuffer_sRGB, 
    GL_ARB_geometry_shader4, GL_ARB_get_program_binary, 
    GL_ARB_half_float_pixel, GL_ARB_half_float_vertex, GL_ARB_imaging, 
    GL_ARB_instanced_arrays, GL_ARB_map_buffer_range, GL_ARB_multisample, 
    GL_ARB_multitexture, GL_ARB_occlusion_query, GL_ARB_occlusion_query2, 
    GL_ARB_pixel_buffer_object, GL_ARB_point_parameters, GL_ARB_point_sprite, 
    GL_ARB_provoking_vertex, GL_ARB_sample_shading, GL_ARB_sampler_objects, 
    GL_ARB_seamless_cube_map, GL_ARB_separate_shader_objects, 
    GL_ARB_shader_bit_encoding, GL_ARB_shader_objects, 
    GL_ARB_shader_precision, GL_ARB_shader_stencil_export, 
    GL_ARB_shader_texture_lod, GL_ARB_shading_language_100, GL_ARB_shadow, 
    GL_ARB_shadow_ambient, GL_ARB_sync, GL_ARB_texture_border_clamp, 
    GL_ARB_texture_buffer_object, GL_ARB_texture_buffer_object_rgb32, 
    GL_ARB_texture_compression, GL_ARB_texture_compression_rgtc, 
    GL_ARB_texture_cube_map, GL_ARB_texture_cube_map_array, 
    GL_ARB_texture_env_add, GL_ARB_texture_env_combine, 
    GL_ARB_texture_env_crossbar, GL_ARB_texture_env_dot3, 
    GL_ARB_texture_float, GL_ARB_texture_gather, 
    GL_ARB_texture_mirrored_repeat, GL_ARB_texture_multisample, 
    GL_ARB_texture_non_power_of_two, GL_ARB_texture_query_lod, 
    GL_ARB_texture_rectangle, GL_ARB_texture_rg, GL_ARB_texture_rgb10_a2ui, 
    GL_ARB_texture_snorm, GL_ARB_timer_query, GL_ARB_transform_feedback2, 
    GL_ARB_transform_feedback3, GL_ARB_transpose_matrix, 
    GL_ARB_uniform_buffer_object, GL_ARB_vertex_array_bgra, 
    GL_ARB_vertex_array_object, GL_ARB_vertex_buffer_object, 
    GL_ARB_vertex_program, GL_ARB_vertex_shader, 
    GL_ARB_vertex_type_2_10_10_10_rev, GL_ARB_viewport_array, 
    GL_ARB_window_pos, GL_ATI_draw_buffers, GL_ATI_envmap_bumpmap, 
    GL_ATI_fragment_shader, GL_ATI_meminfo, GL_ATI_separate_stencil, 
    GL_ATI_texture_compression_3dc, GL_ATI_texture_env_combine3, 
    GL_ATI_texture_float, GL_ATI_texture_mirror_once, GL_EXT_abgr, 
    GL_EXT_bgra, GL_EXT_bindable_uniform, GL_EXT_blend_color, 
    GL_EXT_blend_equation_separate, GL_EXT_blend_func_separate, 
    GL_EXT_blend_minmax, GL_EXT_blend_subtract, GL_EXT_compiled_vertex_array, 
    GL_EXT_copy_buffer, GL_EXT_copy_texture, GL_EXT_direct_state_access, 
    GL_EXT_draw_buffers2, GL_EXT_draw_instanced, GL_EXT_draw_range_elements, 
    GL_EXT_fog_coord, GL_EXT_framebuffer_blit, GL_EXT_framebuffer_multisample, 
    GL_EXT_framebuffer_object, GL_EXT_framebuffer_sRGB, 
    GL_EXT_geometry_shader4, GL_EXT_gpu_program_parameters, 
    GL_EXT_gpu_shader4, GL_EXT_histogram, GL_EXT_multi_draw_arrays, 
    GL_EXT_packed_depth_stencil, GL_EXT_packed_float, GL_EXT_packed_pixels, 
    GL_EXT_pixel_buffer_object, GL_EXT_point_parameters, 
    GL_EXT_provoking_vertex, GL_EXT_rescale_normal, GL_EXT_secondary_color, 
    GL_EXT_separate_specular_color, GL_EXT_shadow_funcs, GL_EXT_stencil_wrap, 
    GL_EXT_subtexture, GL_EXT_texgen_reflection, GL_EXT_texture3D, 
    GL_EXT_texture_array, GL_EXT_texture_buffer_object, 
    GL_EXT_texture_compression_latc, GL_EXT_texture_compression_rgtc, 
    GL_EXT_texture_compression_s3tc, GL_EXT_texture_cube_map, 
    GL_EXT_texture_edge_clamp, GL_EXT_texture_env_add, 
    GL_EXT_texture_env_combine, GL_EXT_texture_env_dot3, 
    GL_EXT_texture_filter_anisotropic, GL_EXT_texture_integer, 
    GL_EXT_texture_lod, GL_EXT_texture_lod_bias, GL_EXT_texture_mirror_clamp, 
    GL_EXT_texture_object, GL_EXT_texture_rectangle, GL_EXT_texture_sRGB, 
    GL_EXT_texture_shared_exponent, GL_EXT_texture_snorm, 
    GL_EXT_texture_swizzle, GL_EXT_timer_query, GL_EXT_transform_feedback, 
    GL_EXT_vertex_array, GL_EXT_vertex_array_bgra, 
    GL_IBM_texture_mirrored_repeat, GL_KTX_buffer_region, GL_NV_blend_square, 
    GL_NV_conditional_render, GL_NV_copy_depth_to_color, 
    GL_NV_explicit_multisample, GL_NV_float_buffer, GL_NV_half_float, 
    GL_NV_primitive_restart, GL_NV_texgen_reflection, GL_NV_texture_barrier, 
    GL_SGIS_generate_mipmap, GL_SGIS_texture_edge_clamp, GL_SGIS_texture_lod, 
    GL_SUN_multi_draw_arrays, GL_WIN_swap_hint, WGL_EXT_swap_control 
```

**编辑：主循环似乎是负责任的，OpenGl 很好，但我在 goroutine 和/或通道上做错了。**

如果我用不依赖通道和 goroutine 的东西替换我的主循环，那么 OpenGl 的表现就完美了。

```
func Loop(program gl.Uint) {
    start_time := time.Now()
    stop_time := start_time.Add(time.Duration(30 * time.Second))
    running := true
    for running {
        tick_time := time.Now()
        OnTick(start_time, tick_time, program)
        time.Sleep(10 * time.Millisecond)
        if tick_time.After(stop_time) {
            running = false
        }
    }
} 
```

我的问题可能来自 OpenGl 在主 Goroutine 中，它在等待通道传递滴答声或 SDL 事件时阻塞。我不知道，我很困惑。

对于OpenGL*不存在的属性，*从 glGetUniformLocation 更改标题通常返回 0 而不是 -1，*而我的主循环等待通道滴答并传递事件时似乎卡住了。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T16:21:28.130

问题在于图形库 SDL 和 OpenGL 对线程的使用施加了限制。Golang 会在它认为合适的情况下在线程之间打乱 goroutine，而不知道这些限制。因此，一些呼叫丢失，发生不可预知的行为。

通过将 OpenGL 锁定到主线程，我可以让它工作，而不必放弃使用 goroutine。

这是我采用的解决方案： [http](http://code.google.com/p/go-wiki/wiki/LockOSThread) ://code.google.com/p/go-wiki/wiki/LockOSThread 请注意，函数中有一个错字`do`：应该阅读`mainfunc`而不是`ch`.

我的主文件现在看起来像这样：

```
// Arrange that main.main runs on main thread.
func init() {
    runtime.LockOSThread()
}

// Queue of work to run in main thread.
var mainfunc = make(chan func())

// Run all the functions that need to run in the main thread.
func Main() {
    for f = range mainfunc {
        f()
    }
}

// Put the function f on the main thread function queue.
func do(f func()) {
    done := make(chan bool, 1)
    mainfunc <- func() {
        f()
        done <- true
    }
    <-done

// The real main function.
func main() {
    go Everything()
    Main()
}

// Your entire application comes here.
func Everything() {
    defer close(mainfunc)
    do(func(){
        // init SDL, OpenGl, all that.
    })
    defer sdl.Quit()

    var some_variable int // Starts at 0.
    do(func(){
        // OpenGl code
        some_variable = 42 // Closure allows for communication.
    })
    Loop(some_variable) // Now 42.
} 
```

# java - 如何让 EclipseLink MOXy 在基于 JAX-WS 的 Web 服务中的 WebLogic 中工作？

> ID：14732355
> 
> 赞同：3
> 
> 时间：2013-02-06T15:15:17.003
> 
> 标签：java, jax-ws, eclipselink, weblogic-10.x, moxy

我想在 WebLogic 10.3.6.0 中使用 EclipseLink 来使用 JAX-WS 托管 Web 服务。这在 Tomcat 中完美运行。

环境：

*   Java 1.6
*   WebLogic 10.3.6.0
*   EclipseLink 2.4.0.v20120608-r11652
*   JAXWS 2.2.7-20120813

WEB-INF/lib 包含：

*   eclipselink.jar
*   快速信息集.jar
*   gmbal-api-only.jar
*   ha-api.jar
*   javax.annotation.jar
*   jaxb-api.jar
*   jaxb-impl.jar
*   jaxb-xjc.jar
*   jaxws-api.jar
*   jaxws-eclipselink-plugin.jar
*   jaxws-rt.jar
*   jaxws-tools.jar
*   jsr181-api.jar
*   邮件.jar
*   管理-api.jar
*   mimepull.jar
*   策略.jar
*   saaj-api.jar
*   saaj-impl.jar
*   stax-ex.jar
*   stax2-api.jar
*   流缓冲.jar
*   woodstox-core-asl.jar

我的代码如下：

TestRequestDTO.java

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name = "test_request")
public class TestRequestDTO implements Serializable {
    @XmlPath("request/name/text()")
    private String requestName;
    @XmlPath("request/value/text()")
    private String requestValue;
    //getter setters
} 
```

TestResponseDTO.java

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name = "test_response")
public class TestResponseDTO implements Serializable {
    @XmlPath("response/name/text()")
    private String responseName;
    @XmlPath("response/value/text()")
    private String responseValue;
    //getter setters
} 
```

服务：SampleTest.java

```
@WebService
public class SampleTest {
    @WebMethod
    public TestResponseDTO fetchResponse(TestRequestDTO request) {
        System.out.println("request.getRequestName()" + request.getRequestName());
        System.out.println("request.getRequestValue()" + request.getRequestValue());
        TestResponseDTO response = new TestResponseDTO();
        response.setResponseName("Service Response");
        response.setResponseValue(new Date().toString());
        return response;
    }
} 
```

Tomcat 中的完美 XML：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:q0="http://service.test.services.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <soapenv:Body>
        <q0:fetchResponse>
            <arg0>
                <request>
                    <name>this-that</name> 
                    <value>home-run</value> 
                </request>
            </arg0>
        </q0:fetchResponse>
    </soapenv:Body>
</soapenv:Envelope>

<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Body>
        <ns0:fetchResponseResponse xmlns:ns0="http://service.test.services.com/">
            <return>
                <response>
                    <name>Service Response</name> 
                    <value>Wed Feb 06 20:21:13 XXX 2013</value> 
                </response>
            </return>
        </ns0:fetchResponseResponse>
    </S:Body>
</S:Envelope> 
```

weblogic中的错误XML：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:q0="http://service.test.services.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <soapenv:Body>
        <q0:fetchResponse>
            <arg0>
                <requestName>hello</requestName> 
                <requestValue>wassup</requestValue> 
            </arg0>
        </q0:fetchResponse>
    </soapenv:Body>
</soapenv:Envelope>

<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Body>
        <ns2:fetchResponseResponse xmlns:ns2="http://service.test.services.com/">
            <return>
                <responseName>Service Response</responseName> 
                <responseValue>Wed Feb 06 20:30:06 IST 2013</responseValue> 
            </return>
        </ns2:fetchResponseResponse>
    </S:Body>
</S:Envelope> 
```

如果您认为我需要发布更多代码，请告诉我。

我想在 weblogic 的输出中查看 tomcat 的 XML 输出

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:40:36.627

WebLogic 10.3.6 中的 JAX-WS 实现经过硬编码以使用 JAXB 参考实现。 [**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)是 WebLogic 12.1.1 的默认 JAXB 提供程序，您可以在您的 JAX-WS Web 服务中利用我们的所有扩展：

*   [http://blog.bdoughan.com/2011/12/eclipselink-moxy-is-jaxb-provider-in.html](http://blog.bdoughan.com/2011/12/eclipselink-moxy-is-jaxb-provider-in.html)

对于不提供与 MOXy 作为 JAXB 提供者的集成的 JAX-WS 实现，您可以利用该`javax.xml.ws.Provider`接口而不是传统的服务端点接口。Provider 让您可以访问实际的 XML 消息。通过访问 XML 消息，您可以使用 MOXy 直接与其交互。

```
import javax.xml.bind.*;
import javax.xml.bind.util.JAXBSource;
import javax.xml.transform.Source;
import javax.xml.ws.*;

@ServiceMode(Service.Mode.PAYLOAD)
@WebServiceProvider(
    portName = "FindCustomerPort", 
    serviceName = "FindCustomerService", 
    targetNamespace = "http://service.jaxws.blog/", 
    wsdlLocation = "WEB-INF/wsdl/FindCustomerService.wsdl")
public class FindCustomerService implements Provider<Source> {

    private JAXBContext jaxbContext;

    public FindCustomerService() {
        try {
            jaxbContext = JAXBContext.newInstance(FindCustomerResponse.class,
                    FindCustomerRequest.class);
        } catch (JAXBException e) {
            throw new WebServiceException(e);
        }
    }

    @Override
    public Source invoke(Source request) throws WebServiceException {
        try {
            Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();
            FindCustomerRequest fcRequest = (FindCustomerRequest) unmarshaller
                    .unmarshal(request);

            Customer customer = new Customer();
            customer.setId(fcRequest.getArg0());
            customer.setFirstName("Jane");
            customer.setLastName("Doe");

            FindCustomerResponse response = new FindCustomerResponse();
            response.setValue(customer);

            return new JAXBSource(jaxbContext, response);
        } catch (JAXBException e) {
            throw new WebServiceException(e);
        }
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2013/02/leveraging-moxy-in-your-web-service-via.html](http://blog.bdoughan.com/2013/02/leveraging-moxy-in-your-web-service-via.html)
*   [如何在 Web 服务中使用 Moxy XPath 注释 bean？](https://stackoverflow.com/questions/13474816/how-to-use-moxy-xpath-annotated-beans-in-web-services/13477125#13477125)

# javascript - 用 Javascript 调试 Spotify 应用程序——一定有更好的方法

> ID：14732367
> 
> 赞同：3
> 
> 时间：2013-02-06T15:15:34.937
> 
> 标签：javascript, spotify

我在他们的网站上缺少某种 Spotify 开发工具包吗？开发者文档建议获取 Spotify 开发工具“就像下载 Spotify 桌面客户端一样简单”。

但是，为了运行 Spotify API，我需要使用 Spotify 运行我的应用程序，这意味着在 Spotify 客户端中打开它。这也意味着用 Firefox 之类的东西打开它是不可能的。因此，我的应用程序的唯一视图是 Spotify 应用程序视图，它不提供调试功能，甚至不提供任何编译器级别的错误处理。如果我搞砸了仍然允许应用程序运行的代码的一小部分，我不会收到任何警告和错误。此外，每次对应用程序进行更改时，我都必须重新启动 Spotify。

如果我尝试使用 Firefox 之类的调试器打开它，调试器将无法通过第一行代码，因为`getSpotifyApi(1)`在 Spotify 之外没有任何意义。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T15:47:45.393

Spotify 应用程序包含标准的 Chrome 开发人员检查器和工具集。

要获得它，请右键单击您的应用程序并选择“检查元素”或从“开发”菜单中选择“打开检查器”。请注意，这仅适用于从 ~/Spotify 文件夹本地运行的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-02-18T17:34:54.580

默认情况下，您无法在 Spotify 桌面应用程序中打开开发工具。

要启用开发工具，请确保 Spotify 已关闭，打开文件`%appdata%\Spotify\prefs`，添加新行`app.enable-developer-mode=true`并确保保存文件。

之后，您可以再次启动 Spotify 应用并使用`Ctrl + Shift + I`.

如果您在关闭 Spotify 后打开开发工具时遇到问题，这可能是因为应用程序重置了此`prefs`文件。这可以通过仅授予对文件的读取访问权限来解决。

# ruby-on-rails-3 - rails 3 xml builder不包括nil

> ID：14732379
> 
> 赞同：0
> 
> 时间：2013-02-06T15:16:09.890
> 
> 标签：ruby-on-rails-3

有两个模型:names 和:rat1。每个名字在 rat1 中可能有也可能没有评级。我希望能够显示我所有存在的评级，而只为那些不存在的评级添加 N/A。

路线.rb

```
resources :names do
  resource :rat1
end 
```

名字.rb

```
has_one :rat1 
```

大鼠1.rb

```
belongs_to :names 
```

我目前正在尝试将 html 表转换为可以导出到 javascript 表的 xml 块。我想做与此类似的事情。

```
<%= @name.rat1.rating || 'N/A' %> 
```

但是当我尝试

```
xml.tag!("cell", @name.rat1.rating || 'N/A') 
```

它不起作用。如果它是 nil，它会抛出一个 nil 类错误并失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:00:08.660

你可以试试这个，也许评估出错是因为你缺少括号：

```
 xml.tag!("cell", (@name.rat1.rating || 'N/A')) 
```

**编辑：**

您可以执行以下操作：

```
xml.tag!(cell, (@name.rat1.rating.present? then @name.rat1.rating else "N/A" end )) 
```

为您节省几行代码。

```
<%= if @name.rat1.rating.present? then @name.rat1.rating else "N/A" end %> 
```

首先它检查@name.rat1.rating 是否存在，如果存在则呈现@name.rat1.rating。它不能为零，因为你已经检查到现在？方法。如果 @name.rat1.rating 不存在，它将遵循 else 条件并返回“N/A”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:14:47.487

所以我的解决方案最终如下。我在 names_helper.rb 中创建了一个辅助方法

```
def show_rating(rating)
  if rating.present?
     rating.rating
  else
     "N/A"
  end
end 
```

我在 xml 中提供它的方式是

```
xml.tag!("cell", show_rating(name.rat1)) 
```

这样，我在尝试拉取 .rating 值之前检查 rat1 模型的存在。

谢谢你的帮助！

# android - 获取有关刚刚创建的视图的信息

> ID：14732380
> 
> 赞同：-2
> 
> 时间：2013-02-06T15:16:10.487
> 
> 标签：android, android-layout

首先，你好。我有一个问题 - 我想获得刚刚从 xml 文件创建的视图的顶部像素。有 on create 方法。我需要获取有关布局的信息，但是尚未创建布局。那该怎么办>>？！我尝试使用 OnStart 和 OnResume 方法，但即使在那时也没有创建布局。

```
protected void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
    //full screen
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    //full screen
    setContentView(R.layout.activity_main);
    setIdAndConsturtor();
    buildLevels();
    setIdViews();
    setEvents();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:59:26.167

只需调用其中的方法：

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);
    //Here you can get put the methods
    setIdAndConsturtor();
    buildLevels();
    setIdViews();
    setEvents();
} 
```

# dxf - DXF 实体中的应用程序特定数据

> ID：14732382
> 
> 赞同：2
> 
> 时间：2013-02-06T15:16:12.557
> 
> 标签：dxf

我正在寻找一种使用我选择的数字 ID 在 DXF 中标记实体（例如[arc ）的方法。](http://www.autodesk.com/techpubs/autocad/acad2000/dxf/arc_dxf_06.htm)有没有一种好的（标准兼容）方法可以做到这一点？

查看 DXF 格式参考，我看到有一个“公共组代码” *102*，它被记录为“应用程序定义的代码”。我可以用那个吗？如果是这样一个正确使用它的方法的例子会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:56:52.697

[在Autodesk 论坛上](http://forums.autodesk.com/t5/AutoCAD-2013/DXF-Application-defined-codes-in-entities/m-p/3780379/)提出类似问题后，我发现我可以使用[扩展数据](http://docs.autodesk.com/ACD/2011/ENU/filesDXF/WS1a9193826455f5ff18cb41610ec0a2e719-7943.htm)添加我的数字 ID。

扩展数据附加在实体的末尾，在我的情况下，我将通过附加以下内容来解决它：

```
1001
MYAPP
1002
{
1070
    12
1002
} 
```

*   其中 1001 标志着扩展数据的开始
*   1002 标记列表的开始结束结束
*   1070 是一个 16 位整数

也可以使用命令 _xdata 从 Autocad 软件添加扩展数据

# php - 每个文件的 PHP 复制 + 覆盖对话框

> ID：14732385
> 
> 赞同：2
> 
> 时间：2013-02-06T15:16:18.080
> 
> 标签：php, ajax, file, directory, copy

我正在用 PHP + AJAX 开发一个系统，可以将文件从服务器上的一个文件夹复制到服务器上的另一个文件夹。

我的问题是，当我尝试将文件夹复制到另一个文件夹中时，其中已经有一些同名文件。

在这种情况下，我想向用户显示一个弹出窗口，以确认他是否要覆盖其中的每个文件。

我怎么能那样做？开始复制后如何等待用户对每个对话框的响应？

顺便说一句，使用`cp`linux 的命令更好还是使用`unlink`PHP`rmdir`的命令更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:25:49.237

我认为你应该把这个过程分成几个部分：

1.  检查冲突文件。
2.  如果存在一些冲突文件，请将它们列出给用户并要求确认（对话框）。
3.  如果没有冲突，或者如果用户确认他同意覆盖目标文件，则复制文件。

如果您想询问每个文件，请询问每个文件的确认（带有复选框的对话框，或多个对话框）。用户确认（或不确认）每次覆盖后，复制文件。

# gtk - 双击最大化窗口时如何防止小部件接收点击事件？

> ID：14732386
> 
> 赞同：0
> 
> 时间：2013-02-06T15:16:21.763
> 
> 标签：gtk

我有一个对点击事件做出反应的小部件。但是，当我双击窗口的标题栏时，它会最大化窗口，并且鼠标指针经常会进入我的小部件，导致它接收到不需要的点击事件。在这种情况下，如何防止我的小部件接收点击事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:07:45.433

你不能在 GTK 中真正做到这一点，因为它是你的窗口管理器负责这种不良行为，所以要么使用更好的 WM，要么修复它（提交错误）。

如果您坚持尝试在 gtk 中解决此问题，您可以尝试查看您的窗口是否在鼠标抬起之前接收到鼠标按下事件（而不是单独按下事件） - 不能保证这甚至会做任何有用的事情！

# xml - 为 XMLDocument 构建 DataTable 和绑定到 Gridview 的优化方式

> ID：14732389
> 
> 赞同：1
> 
> 时间：2013-02-06T15:16:28.527
> 
> 标签：xml, azure, xml-parsing, linq-to-entities, linq-to-xml

我尝试了几种方法从生成的 xml 中提取数据

```
<HostedService xmlns="http://schemas.microsoft.com/windowsazure">
  <Url>hosted-service-url</Url>
  <ServiceName>hosted-service-name</ServiceName>
  <HostedServiceProperties>
    <Description>description</Description>
    <Location>location</Location>
    <AffinityGroup>affinity-group</AffinityGroup>
    <Label>base-64-encoded-name-of-the-service</Label>
  </HostedServiceProperties>
  <Deployments>
    <Deployment>
      <Name>deployment-name</Name>
      <DeploymentSlot>deployment-slot</DeploymentSlot>
      <PrivateID>deployment-id</PrivateID>
      <Status>deployment-status</Status>
      <Label>base64-encoded-deployment-label</Label>
      <Url>deployment-url</Url>
      <Configuration>base-64-encoded-configuration-file</Configuration>
      <RoleInstanceList>
        <RoleInstance>
          <RoleName>role-name</RoleName>
          <InstanceName>role-instance-name</InstanceName>
          <InstanceStatus>instance-status</InstanceStatus>
        </RoleInstance>
      </RoleInstanceList>
      <UpgradeDomainCount>upgrade-domain-count</UpgradeDomainCount>
      <RoleList>
        <Role>
          <RoleName>role-name</RoleName>
          <OsVersion>operating-system-version</OsVersion>
        </Role>
      </RoleList>
      <SdkVersion>sdk-version-used-to-create-package</SdkVersion>
      <InputEndpointList>
         <InputEndpoint>
            <RoleName>role-name</RoleName>
            <Vip>virtual-ip-address</Vip>
            <Port>port-number</Port>
         </InputEndpoint>
         …
      </InputEndpointList>
      <Locked>deployment-write-allowed-status</Locked>
      <RollbackAllowed>rollback-operation-allowed</RollbackAllowed>
    </Deployment>
  </Deployments>
</HostedService> 
```

我需要上面提到的 RoleName,InstanceName Url InstanceStatus InstanceSize CreatedTime LastModifiedTime DeploymentStatus Environment IpAddress SdkVersion 的几个字段的数据

这是我做的示例方式

```
var result = XmlDoc.GetElementsByTagName("RoleInstance");

foreach (XmlNode node in result)
                {
                    DataRow dr = hostedserviceproperties.NewRow();

                    dr["RoleName"] = node.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "RoleName").Any() ?
                        node.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "RoleName").First().InnerText : string.Empty;
                    dr["InstanceName"] = node.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "InstanceName").Any() ?
                        node.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "InstanceName").First().InnerText : string.Empty;
                    dr["Url"] = node.ParentNode.ParentNode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "Url").Any() ?
                        node.ParentNode.ParentNode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "Url").First().InnerText : string.Empty;
                    dr["InstanceStatus"] = node.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "InstanceStatus").Any() ?
                        node.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "InstanceStatus").First().InnerText : string.Empty;
                    dr["InstanceSize"] = node.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "InstanceSize").Any() ?
                        node.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "InstanceSize").First().InnerText : string.Empty;
                    dr["CreatedTime"] = node.ParentNode.ParentNode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "CreatedTime").Any() ?
                        node.ParentNode.ParentNode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "CreatedTime").First().InnerText : string.Empty;
                    dr["LastModifiedTime"] = node.ParentNode.ParentNode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "LastModifiedTime").Any() ?
                        node.ParentNode.ParentNode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "LastModifiedTime").First().InnerText : string.Empty;
                    dr["DeploymentStatus"] = node.ParentNode.ParentNode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "Status").Any() ?
                        node.ParentNode.ParentNode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "Status").First().InnerText : string.Empty;
                    dr["Environment"] = node.ParentNode.ParentNode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "DeploymentSlot").Any() ?
                        node.ParentNode.ParentNode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "DeploymentSlot").First().InnerText : string.Empty;
                    dr["IpAddress"] = node.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "IpAddress").Any() ?
                        node.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "IpAddress").First().InnerText : string.Empty;
                    dr["SdkVersion"] = node.ParentNode.ParentNode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "SdkVersion").Any() ?
                        node.ParentNode.ParentNode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "SdkVersion").First().InnerText : string.Empty;
                    hostedserviceproperties.Rows.Add(dr);
                } 
```

在此之后，我将它作为数据源（是数据表）提供给 gridview

但是我觉得很费时间。任何更好的方法可以更快地检索数据。

提前致谢。

# asp.net - 如何使用 RowDataBound 显示这样的网格数据

> ID：14732397
> 
> 赞同：0
> 
> 时间：2013-02-06T15:16:46.757
> 
> 标签：asp.net

我有个问题

我的网格有列

```
-Name-----------From--------To----------Rate---
Amenity         8/8/2012    8/9/2012    50.00
Amenity         8/6/2012    8/7/2012    50.00
Amenity         8/9/2012    8/10/2012   50.00
Amenity two     7/28/2012   7/31/2012   0.00
Amenity two     8/3/2012    8/4/2012    0.00 
```

我怎样才能在我的前端得到这个结构

```
-Name-----------From--------To----------Rate---
Amenity         8/8/2012    8/9/2012    50.00
                8/6/2012    8/7/2012    50.00
                8/9/2012    8/10/2012   50.00
Amenity two     7/28/2012   7/31/2012   0.00
                8/3/2012    8/4/2012    0.00 
```

重复`Name`- 我只想展示一次。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:28:06.190

假设您使用的是 DataGrid（因为您提到了该`RowDataBound`事件），那么经典的方法是：

1.  在页面级别创建一个字符串变量并将其命名为“lastAmenityName”之类的名称。

2.  将以下代码放入您的 DataRowBound 中（这是来自内存，因此可能不太正确）：

..

```
string amenityName = ((yourobject) e.Row.DataItem).AmenityName;
if(amenityName != lastAmenityName)
     e.Row.Cells[whatevercolumn].Text = amenityName;
else
     e.Row.Cells[whatevercolumn].Text = "";
lastAmenityName = amenityName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:14:45.980

您可以使用嵌套的 GridView 来显示您提到的方式。

![在此处输入图像描述](../Images/a5afe7b6c6fb1666f12edf57db513bfc.png)

```
public class User
{
    public int UserId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

public class Date
{
    public int DateId { get; set; }
    public int UserId { get; set; }
    public DateTime FromDate { get; set; }
    public DateTime ToDate { get; set; }
    public decimal Rate { get; set; }
}

public List<User> Users
{
    get
    {
        return new List<User>
            {
                new User {UserId = 1, FirstName = "John", LastName = "Doe"},
                new User {UserId = 2, FirstName = "Marry", LastName = "Newton"},
                new User {UserId = 3, FirstName = "Joe", LastName = "Black"}
            };
    }
}

public List<Date> Dates
{
    get
    {
        return new List<Date>
            {
                new Date
                    {
                        DateId = 1,
                        UserId = 1,
                        FromDate = Convert.ToDateTime("8/8/2012"),
                        ToDate = Convert.ToDateTime(" 8/9/2012"),
                        Rate = 50.00M
                    },
                new Date
                    {
                        DateId = 2,
                        UserId = 1,
                        FromDate = Convert.ToDateTime("8/6/2012"),
                        ToDate = Convert.ToDateTime("8/7/2012"),
                        Rate = 50.00M
                    },
                new Date
                    {
                        DateId = 3,
                        UserId = 1,
                        FromDate = Convert.ToDateTime("8/9/2012"),
                        ToDate = Convert.ToDateTime("8/10/2012"),
                        Rate = 50.00M
                    },
            };
    }
}

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        GridView1.DataSource = Users;
        GridView1.DataBind();
    }
}

protected void GridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        var user = e.Row.DataItem as User;

        var gridView2 = ((GridView) e.Row.FindControl("GridView2"));

        gridView2.DataSource = Dates.Where(d => d.UserId == user.UserId);
        gridView2.DataBind();
    }
}

<asp:GridView runat="server" ID="GridView1" AutoGenerateColumns="False" OnRowDataBound="GridView_RowDataBound">
    <Columns>
        <asp:BoundField DataField="LastName" HeaderText="LastName" />
        <asp:BoundField DataField="FirstName" HeaderText="FirstName" />
        <asp:TemplateField>
            <ItemTemplate>
                <asp:GridView runat="server" ID="GridView2" AutoGenerateColumns="False">
                    <Columns>
                        <asp:BoundField DataField="FromDate" HeaderText="From" />
                        <asp:BoundField DataField="ToDate" HeaderText="To" />
                        <asp:BoundField DataField="Rate" HeaderText="Rate" />
                    </Columns>
                </asp:GridView>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

# postscript - 加载 RGB 图像并转换为 CMYK

> ID：14732401
> 
> 赞同：0
> 
> 时间：2013-02-06T15:16:51.060
> 
> 标签：postscript

如何从 postscript 中的源文件加载图像并将其转换为 cmyk？

Shell 我用DCTDecode？

我不知道如何实现这一目标。我发现了一些打印 rgb 图像的示例，但不一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T17:01:43.237

你为什么要这样做？为了管理它，您必须了解图像操作符在 PostScript 中的工作原理，然后详细检查 PostScript 程序以找出提取图像样本所需的操作。然后你需要将它们转换为 CMYK。

如果您想将其注入到原始文件中，则需要更多 PostScript 编程技能来弄清楚如何做到这一点。它可能，但它不是微不足道的，也许如果你能解释你的目标，一个更好的方法可能是可能的。

一种方法是将 PostScript 文件转换为 PDF，然后使用 Adob​​e Acrobat Professional 对图像进行“修饰”，这可以在图像编辑应用程序（例如 Photoshop）中打开图像，您可以在其中进行转换。

这个问题真的不能按原样回答。

# css - 位置固定不适用于标题

> ID：14732403
> 
> 赞同：40
> 
> 时间：2013-02-06T15:16:53.380
> 
> 标签：css, position, css-position

我正在尝试创建一个非常简单的效果，当您向下滚动页面时，导航会停留在页面顶部。我所要做的就是将“位置：固定”设置为我目前拥有的标题。出于某种原因，它更像是一个“位置：绝对”元素而不是固定元素。我在页面上的其他元素上进行了尝试，效果相同，所以我的 HTML 或 CSS 代码中肯定有一些导致问题的东西。有任何想法吗？

[http://jsfiddle.net/apautler/yDhXG/1/embedded/result/](http://jsfiddle.net/apautler/yDhXG/1/embedded/result/)

标题 CSS

```
.nav-main  {overflow: visible; position: fixed;
            top: 0; left: 0; right: 0; height: 60px; width: 100%;} 
```

*请注意，该网站是响应式的，因此`position: fixed`在 768 像素处开始。*

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2013-02-06T15:31:38.297

目前，[Chrome 无法`position:fixed`在 transform 下的元素上](http://code.google.com/p/chromium/issues/detail?id=20574)渲染。删除（无内容）

```
-webkit-transform: translate3d(0, 0, 0); 
```

它[会起作用](http://jsfiddle.net/phihag/yDhXG/2/embedded/result/)的。

# mysql - 未找到简单的 sql 列

> ID：14732407
> 
> 赞同：1
> 
> 时间：2013-02-06T15:16:58.780
> 
> 标签：mysql, sql, sql-update

我在这个 sql 中做错了什么：

```
Update products 
Set products.products_status = 0
Where products.products_id = products_to_categories.products_id And
products_to_categories.categories_id = 114 
```

我得到的错误是：#1054 - 'where 子句'中的未知列'products_to_categories.products_id'，但该列确实存在，我检查了拼写。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T15:18:16.290

原因是您没有`products_to_categories`在`UPDATE`语句中指定表格。即使使用语句，您也可以加入表格`update`，尝试，

```
Update  products a
        INNER JOIN products_to_categories b
            ON a.products_id = b.products_id
Set a.products_status = 0
Where b.categories_id = 114 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T15:18:54.903

您之前在查询中没有提到该表`products_to_categories`，因此其中的所有列都是未知的。

您需要添加 FROM 子句或类似的东西；详细的符号取决于您使用的 DBMS，我第一次回答时没有指定。

DBMS 已被识别为 MySQL（基于错误号），因此在[UPDATE](http://dev.mysql.com/doc/refman/5.6/en/update.html)语句的手册中描述了 MySQL 中的正确语法。它不使用 FROM 子句（但其他 DBMS 使用）。请参阅[JW](https://stackoverflow.com/users/491243/jw)的[答案](https://stackoverflow.com/a/14732435/15168)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:20:16.873

它存在于另一个表中，而不是您正在更新的表中！您要做的是通过加入进行更新。根据您使用的数据库，语法会有所不同。

例如，这里是伪语法：

```
Update products,   products_to_categories
Set products.products_status = 0
Where products.products_id = products_to_categories.products_id And
products_to_categories.categories_id = 114 
```

# jquery - Jquery：分离和重新附加元素的简单方法？

> ID：14732408
> 
> 赞同：1
> 
> 时间：2013-02-06T15:17:06.080
> 
> 标签：jquery, dom-manipulation, detach

我知道 detach() 和插入 html 的各种方法。但是如何分离一个元素，留下一个占位符，然后稍后用该元素替换该占位符？

我能想到的唯一解决方案是检查 prev()，然后是 next()，然后是 parent()。存储该占位符，然后稍后使用该占位符将元素放回原处。

必须有一个更简单的方法......

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:30:09.003

使用好的 'ol`$(elem).css('visibility', 'hidden');`隐藏它，同时保持它的位置，

然后`$(elem).replaceWith(newElem);`把它换掉；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:28:01.847

[`replaceWith`](http://api.jquery.com/replaceWith/)方法是你需要的，不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:24:19.840

要附加元素，您必须像这样使用[.append()](http://api.jquery.com/append/)

```
 $('form').append("<div id='appended'>Hello World</div>"); 
```

要分离元素，您应该像这样使用[.remove()](http://api.jquery.com/remove/)

```
 $('#appended').remove(); 
```

# asp.net - Resuming HTTP download in IE9

> ID：14732413
> 
> 赞同：0
> 
> 时间：2013-02-06T15:17:17.907
> 
> 标签：asp.net, asp.net-mvc, http, http-headers, download

i'm really stuck with resuming download process in IE 9\. Everything works great in other browsers and download managers. I know about required headers to resume download, but IE does not send them after i try to resume download. HTTP header log: Requesting file:

```
======================= Request ===========================
Connection=Keep-Alive
Accept=*/*
Accept-Encoding=gzip, deflate
Host=localhost
User-Agent=Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
======================= Response ===========================
Status code 200
Server=Microsoft-IIS/7.5
X-AspNetMvc-Version=3.0
Last-Modified=Thu, 07 Jun 2012 14:31:35 GMT
ETag="BCZFgJdhKko3IfS9D4nojw=="
Accept-Ranges=bytes
Expires=Sat, 10 Oct 2020 07:10:10 GMT
Content-Length=4048784811
Content-Disposition=attachment; filename=DEM_AK_Bristol Bay.zip
Cache-Control=private
X-AspNet-Version=4.0.30319
Content-Type=application/zip 
```

And here is log for resuming:

```
======================= Request ===========================
Connection=Keep-Alive
Accept=*/*
Accept-Encoding=gzip, deflate
Host=localhost
User-Agent=Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
======================= Response ===========================
Status code 200
Server=Microsoft-IIS/7.5
X-AspNetMvc-Version=3.0
Last-Modified=Thu, 07 Jun 2012 14:31:35 GMT
ETag="BCZFgJdhKko3IfS9D4nojw=="
Accept-Ranges=bytes
Expires=Sat, 10 Oct 2020 07:10:10 GMT
Content-Length=4048784811
Content-Disposition=attachment; filename=DEM_AK_Bristol Bay.zip
Cache-Control=private
X-AspNet-Version=4.0.30319
Content-Type=application/zip 
```

As you can see they are **absolutely** the same. And here is log for firefox: First request:

```
======================= Request ===========================
Connection=keep-alive
Accept=text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding=gzip, deflate
Accept-Language=ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3
ASP.NET_SessionId=zv0ro2lhiumuijipzuamuemg
Host=localhost
User-Agent=Mozilla/5.0 (Windows NT 6.1; WOW64; rv:18.0) Gecko/20100101 Firefox/18.0
======================= Response ===========================
Status code 200
Server=Microsoft-IIS/7.5
X-AspNetMvc-Version=3.0
Last-Modified=Thu, 07 Jun 2012 14:31:35 GMT
ETag="BCZFgJdhKko3IfS9D4nojw=="
Accept-Ranges=bytes
Expires=Sat, 10 Oct 2020 07:10:10 GMT
Content-Length=4048784811
Content-Disposition=attachment; filename=DEM_AK_Bristol Bay.zip
Cache-Control=private
X-AspNet-Version=4.0.30319
Content-Type=application/zip 
```

And resuming download

```
======================= Request ===========================
Connection=keep-alive
Accept=text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding=gzip, deflate
Accept-Language=ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3
ASP.NET_SessionId=zv0ro2lhiumuijipzuamuemg
Host=localhost
<b>If-Match="BCZFgJdhKko3IfS9D4nojw=="
If-Unmodified-Since=Thu, 07 Jun 2012 14:31:35 GMT
Range=bytes=526057028-</b>
User-Agent=Mozilla/5.0 (Windows NT 6.1; WOW64; rv:18.0) Gecko/20100101 Firefox/18.0
======================= Response ===========================
Status code 206
Server=Microsoft-IIS/7.5
X-AspNetMvc-Version=3.0
Last-Modified=Thu, 07 Jun 2012 14:31:35 GMT
ETag="BCZFgJdhKko3IfS9D4nojw=="
Accept-Ranges=bytes
Expires=-1
Content-Length=3522727783
Content-Range=bytes 526057028-4048784810/4048784811
Cache-Control=no-cache
X-AspNet-Version=4.0.30319
Content-Type=application/zip
Pragma=no-cache 
```

Does anybody know what can cause this problem? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T17:26:36.780

I found the solution and its very easy. Caching settings is my application made "the best browser in the world" think that file has been modified and redownload from the very beginning. It's very strange behaviour because other browsers and download managers are fine.

# javascript - 如何使用 jquery 替换字符串中的字符？

> ID：14732416
> 
> 赞同：4
> 
> 时间：2013-02-06T15:17:24.700
> 
> 标签：javascript, jquery

如何使用 jquery 将字符串中的字符“/”替换为“-”。

我想要如下：

```
06/01/2013 to 06-01-2013 
```

在我的情况下：

我从输入框中取值

```
<input id="from-date" value="06/01/2013" name="from-date"/>

fdate = $("#from-date").val();
fdate.replace('/','-');
console.log(fdate); 
```

但它返回相同`string(06/01/2013)`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T15:18:22.100

您不需要 jQuery，而是使用正确的正则表达式语法的标准替换函数：

```
fdate = fdate.replace(/\//g, '-'); 
```

请注意，`replace`这不会更改您传递的字符串，而是返回一个新字符串。另请注意，您需要传递`g`标志，以便替换所有出现。

# php - 页面刷新后如何保持单选按钮处于选中状态？

> ID：14732422
> 
> 赞同：1
> 
> 时间：2013-02-06T15:17:43.217
> 
> 标签：php, javascript, radio-button, refresh, checked

我在 foreach 循环中有很多单选按钮，它是 onclick 它转到它对应的 url 。我希望使用 php 或 javascript 刷新页面后选中的单选按钮保持选中状态。对不起我的英语不好。

```
<ul>
 <?php foreach($companyStatus as $statuses => $status): ?>
  <li>

   <input
   type="radio"
   value="<?php echo $url?>"
   name="group1"
   onclick="if(this.checked){window.location=this.value;}"
   ><?php echo htmlspecialchars($status['fldStatusName'])?>

 </li>
<?php endforeach;?>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:29:00.060

使用 Javascript 设置 cookie（单击单选按钮）并包含如下脚本：

```
window.addEventListener('load', function() { READ COOKIE FUNCTION HERE }, false); 
```

有关如何读取特定 cookie的信息，请参阅[按名称获取cookie。](https://stackoverflow.com/questions/10730362/javascript-get-cookie-by-name)然后，根据 cookie 中的状态设置单选按钮。

//编辑：更多细节

1.  将事件侦听器绑定到设置 cookie 的单选按钮（有关如何设置cookie `document.getElementById('radiobuttonid').addEventListener('click', function() { SET COOKIE HERE }, false);`，请参见[http://www.w3schools.com/js/js_cookies.asp ）](http://www.w3schools.com/js/js_cookies.asp)
2.  将上述侦听器添加到您的 html 页面`window.addEventListener('load', function() { READ COOKIE FUNCTION HERE }, false);`

READ COOKIE FUNCTION HERE 包括读取单选按钮的 cookie 值并为其设置属性**checked="checked"**。

要获得更多信息，您可以参考[http://www.somacon.com/p143.php](http://www.somacon.com/p143.php)（还有一些 sorcecode，但我没有检查）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:29:27.150

您需要在 cookie 或会话变量或平面文件或数据库中记录单选按钮的选中状态。哪种方法最好取决于您，取决于您希望脚本“记住”它多长时间，有多少单选按钮要“记住”，您希望它被记住的“好坏”程度（例如：使用仅 cookie 不是长期的最佳方式，因为客户可以轻松删除它）

# c# - EventWaitHandle - WaitAny() 和 WaitOne() 之间的区别

> ID：14732425
> 
> 赞同：14
> 
> 时间：2013-02-06T15:17:51.410
> 
> 标签：c#, .net, multithreading

我有 3 个线程，两个“工人”和一个“经理”。“工人”线程等待`EventWaitHandle`“经理”线程将发出信号，`EventWaitHandle`之后他们会增加他们的计数器。这些“工作”线程之间的唯一区别是一个使用`EventWaitHandle.WaitAny()`，另一个使用`EventWaitHandle.WaitOne()`.

这是代码：

```
class Program
{
    static void Main(string[] args)
    {
        MultiThreadedJobs multyThreadedJobs = new MultiThreadedJobs();
        multyThreadedJobs.Start();

        Console.ReadLine();

        multyThreadedJobs.Stop();
    }
}

class MultiThreadedJobs : IDisposable
{
    private EventWaitHandle syncEvent;
    private EventWaitHandle[] syncEventsArray;

    private Thread managerThread;
    private Thread firstWorkerThread;
    private Thread secondWorkerThread;

    private volatile bool running = false;

    public MultiThreadedJobs() // Ctor
    {
        syncEvent = new EventWaitHandle(false, EventResetMode.AutoReset, "JobsSyncEvent");

        syncEventsArray = new EventWaitHandle[1];
        syncEventsArray[0] = syncEvent;

        managerThread = new Thread(ManagerThreadMethod);
        firstWorkerThread = new Thread(FirstWorkerThreadMethod);
        secondWorkerThread = new Thread(SecondWorkerThreadMethod);
    }

    public void Start()
    {
        running = true;

        managerThread.Start();
        firstWorkerThread.Start();
        secondWorkerThread.Start();
    }

    public void Stop()
    {
        running = false;
    }

    private void ManagerThreadMethod() // Manager Thread
    {
        while (running)
        {
            Thread.Sleep(1000);
            syncEvent.Set();
        }
    }

    private void FirstWorkerThreadMethod() // Worker Thread
    {
        int counter = 0;
        while (running)
        {
            syncEvent.WaitOne();
            counter++;
        }
    }

    private void SecondWorkerThreadMethod() // Worker Thread
    {
        int counter = 0;
        while (running)
        {
            EventWaitHandle.WaitAny(syncEventsArray);
            counter++;
        }
    }

    public void Dispose()
    {
        syncEvent.Close();
    }
} 
```

问题是，只有第二个工作线程`EventWaitHandle.WaitAny()`总是捕获事件，并让第一个工作线程挨饿。而不是每个人的大约 50/50%。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-10T13:55:32.497

您正在寻找解决软件工程中一个非常常见的问题，即[生产者-消费者问题的解决方案](http://en.wikipedia.org/wiki/Producer-consumer_problem)。链接的 Wikipedia 文章有不错的背景信息，特别是展示了如何以错误的方式进行操作。

您肯定在寻求一种错误的解决方案。AutoResetEvent 太简单了。你已经发现了一个问题，它不提供*公平性*。它还有许多其他问题，特别是当生产者线程比消费者线程更快地产生作业时，它会遭受令人讨厌的线程竞争。

示例代码过于人工，无法提供一个好的替代方案。低级锁定可以由 ReaderWriterLock/Slim 类实现。一个特别适合解决生产者/消费者问题的类是 .NET 4 BlockingCollection 类。支持任意数量的生产者和消费者线程并提供节流以确保当消费者跟不上生产者时程序不会崩溃。您可以使用从生产者传递到消费者线程的假“令牌”来重写您的示例。A`BlockingColletion<bool>`完成工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T07:14:47.097

**WaitHandle**类使客户端可以进行异步调用和等待：单个 XML Web 服务 (WaitHandle.WaitOne)、许多 XML Web 服务中的第一个 (WaitHandle.WaitAny) 或所有 XML Web 服务 (WaitHandle. WaitAll) 返回结果。如果要在结果到达时对其进行处理，可以使用**WaitHandle.WaitAny**方法。此方法将指示其中一项操作已完成，并将标识已完成的操作。

这两种方法都是overiddable。并且根据传递的参数，实现也有所不同。例如，WaitHandle.WaitAny 方法(WaitHandle[], Int32, Boolean) 等待指定数组中的任意元素接收信号，使用32位有符号整数来测量时间间隔，并指定等待前是否退出同步域。

**WaitHandle.WaitOne** Method (Int32, Boolean) 在派生类中重写时，阻塞当前线程，直到当前WaitHandle收到信号，使用32位有符号整数测量时间间隔并指定等待前是否退出同步域.

# python - 在函数中使用 numpy ndarray

> ID：14732426
> 
> 赞同：0
> 
> 时间：2013-02-06T15:17:53.317
> 
> 标签：python, matrix, rows, multidimensional-array

我有以下代码。我有一个矩阵，我想一次取两行并放入这些函数中。我已经查看了 intertools，但我不确定它们是否可以在这种情况下工作。我尝试了 islice，但它没有给出我想要的输出。我知道我必须为“方法”提供位置参数，但我将它们排除在外，因为这段代码会给出结果，它们只是相同的最小值，最大值等等。我正在尝试给我有关索引错误和不可下标的对象的问题。我是 python 新手，我正在阅读一些书籍，但它们没有直接涵盖这一点。我查看了一些人在 stackoverflow 上寻找的内容，但他们主要想一次读取 2 行文件，而不是 numpy ndarrays。任何建议表示赞赏。

```
import numpy as np

def xmax():
    for i in range(1):
        setOne = (matrix[i:1])
        setTwo = (matrix[i+1:2])
         if setOne[i][0:1] > setTwo[i][0:1]:
            xMax = setOne[i][0:1]
         else:
            xMax = setTwo[i][0:1]
         return(xMax)

def xmin():
    for i in range(1):
        setOne = (matrix[i:1])
        setTwo = (matrix[i+1:2])
        if setOne[i][0:1] < setTwo[i][0:1]:
            xMin = setOne[i][0:1]
        else:
            xMin = setTwo[i][0:1]
        return(xMin)

def ymax():
    for i in range(1):
        setOne = (matrix[i:1])
        setTwo = (matrix[i+1:2])
        if setOne[i][1:2] > setTwo[i][1:2]:
            yMax = setOne[i][1:2]
        else:
            yMax = setTwo[i][1:2]
        return(yMax)

def ymin():
    for i in range(1):
        setOne = (matrix[i:1])
        setTwo = (matrix[i+1:2])
        if setOne[i][1:2] < setTwo[i][1:2]:
            yMin = setOne[i][1:2]
        else:
            yMin = setTwo[i][1:2]
        return(yMin)

def zmax():
     for i in range(1):
         setOne = (matrix[i:1])
         setTwo = (matrix[i+2:3])
         if setOne[i][2:3] > setTwo[i][2:3]:
             zMax = setOne[i][2:3]
         else:
             zMax = setTwo[i][2:3]
         return(zMax)

def zmin():
    for i in range(1):
        setOne = (matrix[i:1])
        setTwo = (matrix[i+2:3])
        if setOne[i][2:3] < setTwo[i][2:3]:
            zMin = setOne[i][2:3]
        else:
            zMin = setTwo[i][2:3]
        return(zMin)

 '''***********************************************************************************
Created on Jan 27, 2013

@author: 
***********************************************************************************'''

 f ='/Users/Documents/workspace/findMinMax/crapc.txt'
 x,y,z = np.loadtxt(f, unpack=True, usecols=(1,2,3), ndmin = 2)

 maxZ = max(z)
 minZ = min(z)
 print("Maximum Z value: " + str(maxZ))
 print("Minimum Z value: " + str(minZ))
 matrix = [x,y,z]  
 matrix = np.rot90(matrix)
 matrix = matrix[::-1]

"""for each_row in range(0,len(matrix)-1,2):
        print("Xmax:" + str(xmax()))   
        print("Xmin:" + str(xmin()))
        print("Ymax:" + str(ymax()))
        print("Ymin:" + str(ymin()))
        print("Zmax:" + str(zmax()))
        print("Zmin:" + str(zmin()))""" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:45:17.250

我不清楚你在做什么，我不理解你的代码结构（你在这里提供的不是一个独立的例子），但是你代码中的索引是错误的，而不是 python/numpy作品。

范围 vec[a:b] 从 vec 获取 ba 元素（不是 b-a+1！），从索引 a 开始，到索引 b-1 结束。您似乎假设它将包含索引 b 处的元素；它没有。

# java - 如何在控制器中缺少参数时自动返回 405

> ID：14732427
> 
> 赞同：0
> 
> 时间：2013-02-06T15:17:55.887
> 
> 标签：java, php, spring, controller

在 Spring Framework for Java 中，`405 Method Not Allowed`如果请求中缺少一个或多个必需参数，则控制器会返回。在 PHP 中是否有一种**聪明**或**简单的方法来做同样的事情？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:24:47.677

是或否，取决于你所说的聪明和/或容易。但是（见下文）我猜你会说“不”。

`405 Method Not Allowed`是一个 HTTP 状态代码，默认情况下 PHP 根本不会返回这些（例如，如果您通过 apache 发送默认的 200 标头）。

标准 PHP 中没有“控制器”，因此您无需期待任何回报。您可以使用或构建一个框架，如果缺少参数，它可能会返回一些东西。

如果您要自己实现它，则返回一个像这样的标题。

```
header('HTTP/1.1 405 Method Not Allowed'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:25:02.237

如果您要自制一个在验证控制器参数时触发的类似功能，大多数大型框架都提供此类功能。

```
function forward_not_allowed()
{
    header("Status: 405 Method Not Allowed");
    exit;
} 
```

如果你想要一些更高级和自动化的东西，你可以注册你自己的错误处理程序来解析如果使用无效参数调用方法并在那里创建重定向时抛出的 php-waring/错误。[http://phpmaster.com/error-handling-in-php/](http://phpmaster.com/error-handling-in-php/)

# iphone - 更新后，我在 Titanium Studio 中遇到错误

> ID：14732428
> 
> 赞同：0
> 
> 时间：2013-02-06T15:17:57.463
> 
> 标签：iphone, ios-simulator, titanium, titanium-mobile

当我收到 `node.js`需要新版本的通知时。我已将**Titanium**更新到最新版本。更新并重新启动我的**Titanim Studio**后，在 iPhone 模拟器中运行我的应用程序时出现此错误

> [错误] 无效的 --ios-version 值 '5.0'
> 
> 接受的值：

**钛 iPhone 模拟器配置**

![钛 iPhone 模拟器](../Images/7b26851224754fa6843a9dbb921e7da5.png)

然后我现在重新安装了我的**Titanim Studio**，我收到了这个错误：

```
[INFO] One moment, building ...
[INFO] Titanium SDK version: 3.0.0 (12/12/12 18:49 a5894b3)
[INFO] iPhone Device family: iphone
[INFO] iPhone SDK version: 5.0
[INFO] iPhone simulated device: iphone
[INFO] Performing full rebuild. This will take a little bit. Hold tight...
[INFO] Minimum iOS version: 4.3 Linked iOS Version 5.0 
[ERROR] 
[ERROR] Error: Traceback (most recent call last):
  File "/Library/Application Support/Titanium/mobilesdk/osx/3.0.0.GA/iphone/builder.py", line 1374, in main
    execute_xcode("iphonesimulator%s" % link_version,["GCC_PREPROCESSOR_DEFINITIONS=__LOG__ID__=%s DEPLOYTYPE=development TI_DEVELOPMENT=1 DEBUG=1 TI_VERSION=%s %s %s" % (log_id,sdk_version,debugstr,kroll_coverage)],False)
  File "/Library/Application Support/Titanium/mobilesdk/osx/3.0.0.GA/iphone/builder.py", line 1281, in execute_xcode
    output = run.run(args,False,False,o)
  File "/Library/Application Support/Titanium/mobilesdk/osx/3.0.0.GA/iphone/run.py", line 41, in run
    sys.exit(rc)
SystemExit: 65 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:18:00.260

实际上 Ti 3.0.0 仅用于 ios 6.0。你不能在低于 ios 6.0 的应用程序中运行它。

所以这个错误是由于这个。3.0.0 仅支持 ios 6

# c# - 给定 PartitionKey、RowKey、属性名称和值，如何更新该实体的属性值？

> ID：14732429
> 
> 赞同：4
> 
> 时间：2013-02-06T15:17:57.743
> 
> 标签：c#, azure, azure-table-storage

使用 azure 表，如果我知道实体的 RowKey 和 PartitionKey（以便我可以检索该实体），如何编辑该实体上的特定属性值？

这听起来像是一个非常标准的操作，但正常的做法是这样的：

```
public void UpdateEntity(ITableEntity entity)
{
    TableOperation replaceOperation = TableOperation.Replace(entity);
    table.Execute(replaceOperation);
} 
```

即一个完整的 C# TableEntity 对象作为替换，而不是一个单独的属性名称/值对。

我想要更多类似的东西：

```
public void UpdateEntityProperty<T>(string partitionKey, string rowKey,
                                string propertyName, T newPropertyValue)
{
    TableOperation retrieveOperation = TableOperation.Retrieve(partitionKey, rowKey);
    TableResult retrievedResult = table.Execute(retrieveOperation);
    TableEntity entity = (TableEntity)retrievedResult.Result;

    // This  line, of course, doesn't compile. But you get the idea.
    entity.SetPropertyValue(propertyName, newPropertyValue);

    TableOperation replaceOperation = TableOperation.Replace(entity);
    table.Execute(replaceOperation);
} 
```

我的理解是，在幕后，行存储为一组与该行上的属性相对应的键值对，因此更新属性的值应该很容易，而无需定义从 TableEntity 派生的整个 C# 类这样做。

我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T11:54:24.547

为了完整起见，受 Gaurav Mantri 的回答启发，我最终使用了以下内容：

```
public void UpdateEntityProperty(string partitionKey, string rowKey,
                                 string propertyName, string newPropertyValue)
{
    var entity = new DynamicTableEntity(partitionKey, rowKey);
    var properties = new Dictionary<string, EntityProperty>();
    properties.Add(propertyName, new EntityProperty(newPropertyValue));
    var mergeOperation = TableOperation.Merge(entity);
    table.Execute(mergeOperation);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-06T15:34:44.970

代替“替换”操作，执行“合并”操作（[http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.table.tableoperation.merge](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.table.tableoperation.merge)）。合并操作将确保只有正在修改的属性被更改，而所有其他属性都保持不变。

```
public void UpdateEntityProperty<T>(string partitionKey, string rowKey,
                                    string propertyName, T newPropertyValue)
{
    TableOperation retrieveOperation = TableOperation.Retrieve(partitionKey, rowKey);
    TableResult retrievedResult = table.Execute(retrieveOperation);
    TableEntity entity = (TableEntity)retrievedResult.Result;

    // This  line, of course, doesn't compile. But you get the idea.
    entity.SetPropertyValue(propertyName, newPropertyValue);

    TableOperation mergeOperation = TableOperation.Merge(entity);
    table.Execute(mergeOperation);
} 
```

下面是一个更完整的例子。在这里，我首先创建了一个员工，然后只更改了该员工的“MaritalStatus”属性：

```
CloudStorageAccount storageAccount = CloudStorageAccount.DevelopmentStorageAccount;

CloudTable table = storageAccount.CreateCloudTableClient().GetTableReference("Employee");
DynamicTableEntity entity = new DynamicTableEntity()
{
    PartitionKey = "Employee",
    RowKey = "01",
};
Dictionary<string, EntityProperty> properties = new Dictionary<string, EntityProperty>();
properties.Add("Name", new EntityProperty("John Smith"));
properties.Add("DOB", new EntityProperty(new DateTime(1971, 1, 1)));
properties.Add("MaritalStatus", new EntityProperty("Single"));
entity.Properties = properties;

TableOperation insertOperation = TableOperation.Insert(entity);
table.Execute(insertOperation);

DynamicTableEntity updatedEntity = new DynamicTableEntity()
{
    PartitionKey = "Employee",
    RowKey = "01",
    ETag = "*",
};
Dictionary<string, EntityProperty> newProperties = new Dictionary<string, EntityProperty>();
newProperties.Add("MaritalStatus", new EntityProperty("Married"));
updatedEntity.Properties = newProperties;
TableOperation mergeOperation = TableOperation.Merge(updatedEntity);
table.Execute(mergeOperation); 
```

您也可以尝试 InsertOrMerge ( [http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.table.tableoperation.insertormerge.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.table.tableoperation.insertormerge.aspx) ) 操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:27:12.197

尝试这个：

```
if (entity != null)
{
     entity.propertyName = newPropertyValue;
     TableOperation updateOperation = TableOperation.Replace(entity);
     table.Execute(updateOperation);
} 
```

# git - Git 在之前合并的分支中合并

> ID：14732430
> 
> 赞同：4
> 
> 时间：2013-02-06T15:17:58.243
> 
> 标签：git, github

我遇到过这样一种情况，其中一个分支在之前的某个时间点被合并到主分支中，并且来自分支的更改不再在主分支中。这可能是由于对合并冲突的处理不当，但目前我还不确定。

在主分支中需要对先前合并的分支进行更改，但现在如果我尝试将分支合并到主分支，Git 会返回消息“已经是最新的”。因为该分支之前已合并。强制重新合并该分支以掌握的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:05:31.477

我想这会做你

```
mkdir alreadyapplied.patches
git format-patch -o alreadyapplied.patches master..alreadyapplied 
```

接着

```
git checkout -b wip master
git am alreadapplied.patches
# (do whatever's necessary to deal with conflicts here)
# (rebase wip here if the conflict resolution has taken
# long enough that the wip branch has gotten behind master)
git checkout -B master wip
git branch -d wip 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:29:44.573

根据涉及的提交数量，您可以依次[挑选](http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)每个提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T17:08:30.100

另一种方法是在合并之前获取分支的提交 ID 并将您的 HEAD 重置为指向它，然后您可以进行所需的任何修复并将该分支重新合并到 master

IE

```
git reset (--hard/--soft/--mixed) _commit_ # where the _commit_ is the commit ID of the old branch
<work and make changes>
git commit -m "Made changes to commit before merging into master"
git checkout master 
git merge (--no-ff) otherBranch 
```

重置你的 HEAD 将有效地让你回到那次提交时的情况。请注意，使用*--hard*选项可能很危险，因为它具有破坏性，并且会使您的索引和工作区看起来与提交阶段完全相同（您将丢失其他工作）。

# wpf - WPF - window.ShowDialog 内的 window.Loaded

> ID：14732437
> 
> 赞同：1
> 
> 时间：2013-02-06T15:18:19.893
> 
> 标签：wpf, wpf-controls

在 WPF 应用程序中，我想在加载窗口 a 时将窗口 b 显示为窗口 a 内的对话框。我使用以下伪代码执行此操作：

```
window a.Loaded += WindowALoaded();
WindowALoaded
{
  window b.ShowDialog();
} 
```

这行得通。但是，它显示窗口 b，并且在我关闭窗口 b 之前，窗口 a 不会显示。我想完全显示窗口a，然后显示窗口b。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:33:13.620

您可以使用*Activated*事件而不是*Loaded*

```
<Window x:Class="WpfApplication.WindowA"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="WindowA" Height="300" Width="300" 
        Activated="Window_Activated_1"  >
(...)
</Window> 
```

在你的代码后面：

```
 private void Window_Activated_1(object sender, EventArgs e)
 {       
    WindowB windowB = new WindowB();
    windowB.ShowDialog();
  } 
```

此外，如果不想使用 XAML，这也很有效。

```
 public WindowA()
    {    
        this.Activated += Window_Activated_1;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:25:52.843

这是因为在 WindowA 的加载事件中，它执行 WindowB 的 ShowDialog()，然后将 WindowA 中的所有代码拖到 WindowB 关闭之前。如果您只执行 WindowB.Show()，您可能会看到 WindowA 被加载。您可能需要弄乱 Window.Focus() 和/或 Window.TopMost 属性，具体取决于您希望窗口如何在彼此之上显示。

还有一个 Window.ContentRendered 事件而不是 Window.Loaded 事件，这可能有助于您的解决方案

# css - 如何使 div 上的滚动条仅在必要时可见？

> ID：14732448
> 
> 赞同：208
> 
> 时间：2013-02-06T15:18:45.393
> 
> 标签：css, html, scrollbar

我有这个 div：

```
<div style='overflow:scroll; width:400px;height:400px;'>here is some text</div> 
```

滚动条始终可见，即使文本没有溢出。我想让滚动条仅在必要时可见 - 也就是说，仅当框中有足够的文本需要它们时才可见。就像 textarea 一样。我该怎么做呢？或者是我唯一的选择来设置文本区域的样式，让它看起来像一个 div？

* * *

## 回答 #1

> 赞同：419
> 
> 时间：2013-02-06T15:20:17.377

使用`overflow: auto`. 滚动条只会在需要时出现。

（旁注，您也可以仅指定 x 或 y 滚动条：`overflow-x: auto`和`overflow-y: auto`）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-06T15:20:43.947

试试这个：

```
<div style='overflow:auto; width:400px;height:400px;'>here is some text</div> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-06T15:20:46.130

尝试

```
<div style='overflow:auto; width:400px;height:400px;'>here is some text</div> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-11-12T07:45:51.113

尝试

```
<div id="boxscroll2" style="overflow: auto; position: relative;" tabindex="5001"> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2021-07-04T10:39:59.313

将 CSS的**溢出**属性更改`block`为**`auto`**.

```
overflow: auto; 
```

只有在需要时，它才会在左侧自动添加滚动条。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-05T14:29:34.747

我发现 div 的高度仍然显示，无论是否有文本。因此，您可以使用它来获得最佳效果。

```
<div style=" overflow:auto;max-height:300px; max-width:300px;"></div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-25T09:28:13.043

您可以尝试以下一种：

```
 <div style="width: 100%; height: 100%; overflow-x: visible; overflow-y: scroll;">Text</div> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-05T07:44:36.373

[Stackblitz游乐场](https://stackblitz.com/edit/web-platform-xkvpvz?file=me.html)

```
<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
    #scrollable-content {
        background: #eee;
        height: 150px;
        width: 400px;
        overflow-y: scroll;
    }
    </style>
</head>

<body>
    <div id="original-content"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. </div>
    <br />
    <div id="scrollable-content"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. </div>
</body>

</html> 
```

# python - 如何在 Instagram API 上注册新客户

> ID：14732454
> 
> 赞同：6
> 
> 时间：2013-02-06T15:18:55.387
> 
> 标签：python, instagram

您好我正在尝试创建一个新的 client_ID，但我没有网站。我想要一个client_id，用于学习目的。当我尝试创建一个新客户端时，我收到以下问题：应用程序名称：amb1s1_test 描述：学习如何使用 instagram 和 python

网站：（不知道用什么，因为我将使用我的家用电脑来使用 intagram python api）

OAuth redirect_uri：（我不知道）

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T15:31:34.147

Instagram API 需要一个网站。流量是

1.  您将用户引导到 Instagram 网站进行身份验证。
2.  Instagram 使用必要的数据将用户重定向回您`redirect_uri`以获取访问令牌
3.  您获得访问令牌，然后使用它来请求用户的数据

对于开发，你可以使用`http://localhost`作为网站地址，这`redirect_uri`取决于你网站的结构。

*   [官方文档](http://instagram.com/developer/authentication/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-21T09:52:13.800

您可以在没有网站的情况下“玩耍”。Dikei 的答案在技术上是正确的，但是如果您知道要查找的内容，则可以输入任何想要的返回 URL。

如果您将`http://www.google.com`作为您的返回 URI，然后从登录帐户访问此
`https://api.instagram.com/oauth/authorize/?client_id=CLIENT-ID&redirect_uri=http://www.google.com&response_type=code`

将 CLIENT-ID 替换为您的应用程序 ID，然后您将收到您帐户的授权请求表 instagram。一旦您接受，您将返回给 Google，并附上一个查询字符串，如下所示：`http://www.google.com?code=AABSDAKJHSF1283789012ASDBALKSD`

查询字符串中的代码（在授权后的短时间内）可用于获取该用户的授权令牌。然后，您可以在 API 中运行任何其他有趣的东西。

这就是没有返回 URL 的诀窍，其余的都在这里：http: [//instagram.com/developer/authentication/](http://instagram.com/developer/authentication/)

# javascript - 获取图像包含属性 onclick 然后隐藏 img

> ID：14732462
> 
> 赞同：0
> 
> 时间：2013-02-06T15:19:17.060
> 
> 标签：javascript, jquery, html

选择器可以获取包含onclick属性的图片

在 onclick 中有一个 JS 代码（ windows.open ....href 以 (/dailyTickets/front/requesttype.form.php) 开头）

我想要这样的东西：

```
 var attr = $('img').attr('onclick');
    if(typeof attr !== 'undefined' && attr !== false)
    {
$ImgIndex = $('img').attr('onclick').value().indexOf("var w = window.open('/dailyTickets/front/requesttype.form.php").index();

       if ($('img').attr('onclick').value().indexOf("var w = window.open('/dailyTickets/front/requesttype.form.php") == 0)
    {
       $('img:eq('"+$ImgIndex +"').hide();
    }
    } 
```

你可以在这里测试它：http: [//jsfiddle.net/zu44E/3/](http://jsfiddle.net/zu44E/3/)

这是图像：

```
<img 
    alt="" 
    title="Ajouter" 
    src="/dailyTickets/pics/add_dropdown.png" 
    style="cursor:pointer; margin-left:2px;" 
    onclick="var w = window.open('/dailyTickets/front/requesttype.form.php?popup=1&amp;rand=1489777051', 'glpipopup', 'height=400, width=1000, top=100, left=100, scrollbars=yes' );w.focus();"
></img> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:28:45.013

我觉得你的方法有点不对劲。首先。这是我的更新：

[http://jsfiddle.net/zu44E/7/](http://jsfiddle.net/zu44E/7/)

以下是我所做的主要更改：

1.  选择 an 后，`attr`您不会通过调用获得该 attr 的值`value()`
2.  如果您将一个变量分配给一系列链式函数调用，那么您最终得到的是链中的*最后一个*值而不是第*一个*值，因此如果您的方法有效，变量的值`$ImgContains`将是真/假，因为您等同到`indexOf`0（因此是布尔值，真或假）
3.  充分利用 jquery。Jquery 可以对记录进行批量操作。您无需逐个元素地寻找东西。如果您需要进行更深入的测试并且或多或少地逐个元素地进行测试，请使用迭代 jquery 方法，例如`filter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:20:41.543

你想要这个吗？这将获取所有具有 onclick 属性的图像

```
$('img[onclick]') 
```

隐藏具有该属性的所有图像

```
$('img[onclick]').hide() 
```

# intel-mkl - mkl_set_num_threads() 没有相应地工作

> ID：14732463
> 
> 赞同：1
> 
> 时间：2013-02-06T15:19:19.317
> 
> 标签：intel-mkl

我想为每个节点（同一个集群）的每个进程创建不同的 MKL 线程数。以这种方式在输入文件中提供每个进程的线程数。

主机线程

主机名_1 t=4

主机名_2 t=7

主机名_3 t=2

我的代码是这样的：

```
 #ifdef HAVE_LIBMKL_CORE
  char* subopts = strdup(conf->subopts);
  char* subopts_0 = subopts;
  char* tokens[] = {"t"};
  char* value;
  while (*subopts != '\0') {
    switch (getsubopt(&subopts, tokens, &value)) {
      case 0:
        int threads = atoi(value);
        mkl_set_num_threads(threads);
        break;
    }
  }
  free(subopts_0);
  #endif 
```

当我建立每个节点的性能模型时。它对所有人显示相同的结果。相反，具有更多线程的进程应该更快。有人可以帮助我为什么 mkl_set_num_threads(threads) 无法正常工作。或者我如何检查以确保在该函数之后创建所需的线程数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:32:07.050

我得到它的工作。为了如果有人也有同样的问题，我发布我的答案。我只是添加 mkl_set_dynamic(0); 禁用动态线程并且它可以工作:)

# python - NLTK 使用语料库标记西班牙语单词

> ID：14732465
> 
> 赞同：19
> 
> 时间：2013-02-06T15:19:25.387
> 
> 标签：python, nltk

我正在尝试学习如何使用 NLTK 标记西班牙语单词。

从[nltk book](http://nltk.org/book/ch05.html)中，使用他们的示例标记英语单词非常容易。因为我是 nltk 和所有语言处理的新手，所以我对如何继续感到很困惑。

我已经下载了`cess_esp`语料库。有没有办法在`nltk.pos_tag`. 我查看了`pos_tag`文档，并没有看到任何暗示我可以的东西。我觉得我错过了一些关键概念。我是否必须针对 cess_esp 语料库手动标记文本中的单词？（手动我的意思是标记我的句子并在语料库中运行它）或者我完全偏离了标记。谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-07T02:12:06.117

首先，您需要**从语料库中读取标记的句子。**NLTK 提供了一个很好的界面，不用担心来自不同语料库的不同格式；您可以简单地导入语料库，使用语料库对象函数来访问数据。请参阅[http://nltk.googlecode.com/svn/trunk/nltk_data/index.xml](http://nltk.googlecode.com/svn/trunk/nltk_data/index.xml)。

然后你必须**选择你选择的标注器并训练标注器**。还有更多花哨的选项，但您可以从 N-gram 标记器开始。

然后你可以使用标注器来标注你想要的句子。这是一个示例代码：

```
from nltk.corpus import cess_esp as cess
from nltk import UnigramTagger as ut
from nltk import BigramTagger as bt

# Read the corpus into a list, 
# each entry in the list is one sentence.
cess_sents = cess.tagged_sents()

# Train the unigram tagger
uni_tag = ut(cess_sents)

sentence = "Hola , esta foo bar ."

# Tagger reads a list of tokens.
uni_tag.tag(sentence.split(" "))

# Split corpus into training and testing set.
train = int(len(cess_sents)*90/100) # 90%

# Train a bigram tagger with only training data.
bi_tag = bt(cess_sents[:train])

# Evaluates on testing data remaining 10%
bi_tag.evaluate(cess_sents[train+1:])

# Using the tagger.
bi_tag.tag(sentence.split(" ")) 
```

在大型语料库上训练标注器可能需要很长时间。不是每次需要时都训练一个标注器，而是方便地将训练过的标注器保存在一个文件中以供以后重用。

请查看[http://nltk.googlecode.com/svn/trunk/doc/book/ch05.html中的](http://nltk.googlecode.com/svn/trunk/doc/book/ch05.html)**存储标签**部分

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-28T17:04:43.983

鉴于上一个答案中的教程，这里有一个来自意大利面条标记器的更面向对象的方法：[https ://github.com/alvations/spaghetti-tagger](https://github.com/alvations/spaghetti-tagger)

```
#-*- coding: utf8 -*-

from nltk import UnigramTagger as ut
from nltk import BigramTagger as bt
from cPickle import dump,load

def loadtagger(taggerfilename):
    infile = open(taggerfilename,'rb')
    tagger = load(infile); infile.close()
    return tagger

def traintag(corpusname, corpus):
    # Function to save tagger.
    def savetagger(tagfilename,tagger):
        outfile = open(tagfilename, 'wb')
        dump(tagger,outfile,-1); outfile.close()
        return
    # Training UnigramTagger.
    uni_tag = ut(corpus)
    savetagger(corpusname+'_unigram.tagger',uni_tag)
    # Training BigramTagger.
    bi_tag = bt(corpus)
    savetagger(corpusname+'_bigram.tagger',bi_tag)
    print "Tagger trained with",corpusname,"using" +\
                "UnigramTagger and BigramTagger."
    return

# Function to unchunk corpus.
def unchunk(corpus):
    nomwe_corpus = []
    for i in corpus:
        nomwe = " ".join([j[0].replace("_"," ") for j in i])
        nomwe_corpus.append(nomwe.split())
    return nomwe_corpus

class cesstag():
    def __init__(self,mwe=True):
        self.mwe = mwe
        # Train tagger if it's used for the first time.
        try:
            loadtagger('cess_unigram.tagger').tag(['estoy'])
            loadtagger('cess_bigram.tagger').tag(['estoy'])
        except IOError:
            print "*** First-time use of cess tagger ***"
            print "Training tagger ..."
            from nltk.corpus import cess_esp as cess
            cess_sents = cess.tagged_sents()
            traintag('cess',cess_sents)
            # Trains the tagger with no MWE.
            cess_nomwe = unchunk(cess.tagged_sents())
            tagged_cess_nomwe = batch_pos_tag(cess_nomwe)
            traintag('cess_nomwe',tagged_cess_nomwe)
            print
        # Load tagger.
        if self.mwe == True:
            self.uni = loadtagger('cess_unigram.tagger')
            self.bi = loadtagger('cess_bigram.tagger')
        elif self.mwe == False:
            self.uni = loadtagger('cess_nomwe_unigram.tagger')
            self.bi = loadtagger('cess_nomwe_bigram.tagger')

def pos_tag(tokens, mmwe=True):
    tagger = cesstag(mmwe)
    return tagger.uni.tag(tokens)

def batch_pos_tag(sentences, mmwe=True):
    tagger = cesstag(mmwe)
    return tagger.uni.batch_tag(sentences)

tagger = cesstag()
print tagger.uni.tag('Mi colega me ayuda a programar cosas .'.split()) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-02-18T11:46:13.243

我最终在这里寻找其他语言的词性标注器，然后是英语。您的问题的另一个选择是使用 Spacy 库。它为多种语言提供 POS 标记，例如荷兰语、德语、法语、葡萄牙语、西班牙语、挪威语、意大利语、希腊语和立陶宛语。

来自 Spacy 文档：

```
import es_core_news_sm
nlp = es_core_news_sm.load()
doc = nlp("El copal se usa principalmente para sahumar en distintas ocasiones como lo son las fiestas religiosas.")
print([(w.text, w.pos_) for w in doc]) 
```

导致：

> [('El', 'DET'), ('copal', 'NOUN'), ('se', 'PRON'), ('usa', 'VERB'), ('principalmente', 'ADV') , ('para', 'ADP'), ('sahumar', 'VERB'), ('en', 'ADP'), ('distintas', 'DET'), ('ocasiones', 'NOUN') , ('como', 'SCONJ'), ('lo', 'PRON'), ('son', 'AUX'), ('las', 'DET'), ('fiestas', 'NOUN') , ('religiosas', 'ADJ'), ('.', 'PUNCT')]

并在笔记本中可视化：

```
displacy.render(doc, style='dep', jupyter = True, options = {'distance': 120}) 
```

[![在此处输入图像描述](../Images/37f638df636eca03803f42f3f994a654.png)](https://i.stack.imgur.com/Vy3iw.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-03T22:06:30.580

以下脚本为您提供了一种快速获取西班牙语句子中“词袋”的方法。请注意，如果你想正确地做到这一点，你必须在标记之前标记句子，所以'religiosas'。必须用两个标记“religiosas”、“。”分隔。

```
#-*- coding: utf8 -*-

# about the tagger: http://nlp.stanford.edu/software/tagger.shtml 
# about the tagset: nlp.lsi.upc.edu/freeling/doc/tagsets/tagset-es.html

import nltk

from nltk.tag.stanford import POSTagger

spanish_postagger = POSTagger('models/spanish.tagger', 'stanford-postagger.jar', encoding='utf8')

sentences = ['El copal se usa principalmente para sahumar en distintas ocasiones como lo son las fiestas religiosas.','Las flores, hojas y frutos se usan para aliviar la tos y también se emplea como sedante.']

for sent in sentences:

    words = sent.split()
    tagged_words = spanish_postagger.tag(words)

    nouns = []

    for (word, tag) in tagged_words:

        print(word+' '+tag).encode('utf8')
        if isNoun(tag): nouns.append(word)

    print(nouns) 
```

给出：

```
El da0000
copal nc0s000
se p0000000
usa vmip000
principalmente rg
para sp000
sahumar vmn0000
en sp000
distintas di0000
ocasiones nc0p000
como cs
lo pp000000
son vsip000
las da0000
fiestas nc0p000
religiosas. np00000
[u'copal', u'ocasiones', u'fiestas', u'religiosas.']
Las da0000
flores, np00000
hojas nc0p000
y cc
frutos nc0p000
se p0000000
usan vmip000
para sp000
aliviar vmn0000
la da0000
tos nc0s000
y cc
también rg
se p0000000
emplea vmip000
como cs
sedante. nc0s000
[u'flores,', u'hojas', u'frutos', u'tos', u'sedante.'] 
```

# django - Django-celery 项目，如何处理来自结果后端的结果？

> ID：14732479
> 
> 赞同：7
> 
> 时间：2013-02-06T15:20:04.333
> 
> 标签：django, celery

1) 我目前正在开发一个 Web 应用程序，该应用程序公开一个 REST api 并使用 Django 和 Celery 来处理请求并解决它们。对于要解决的请求，必须将一组 celery 任务提交到 amqp 队列，以便它们在工作人员（位于其他机器上）上执行。每个任务都占用大量 CPU 资源，并且需要很长时间（数小时）才能完成。

我已将 Celery 配置为也使用 amqp 作为结果后端，并且我使用 RabbitMQ 作为 Celery 的代理。

每个任务都会返回一个结果，该结果需要随后存储在数据库中，而不是由工作人员直接存储。只有“中央节点”——运行 django-celery 并在 RabbitMQ 队列中发布任务的机器——可以访问这个存储数据库，所以工作人员的结果必须以某种方式在这台机器上返回。

问题是之后如何处理任务执行的结果？因此，在工作人员完成后，它的结果将存储在配置的结果后端（amqp）中，但现在我不知道从那里获取结果并处理它们的最佳方法是什么。

我在文档中可以找到的只是您可以不时检查结果的状态：

```
result.state 
```

这意味着基本上我需要一段专门的代码来定期运行这个命令，因此只用这个来保持整个线程/进程的忙碌，或者用以下方法阻止所有内容：

```
result.get() 
```

直到任务完成，这不是我想要的。

我能想到的唯一解决方案是在“中央节点”上有一个额外的线程，该线程定期运行一个函数，该函数基本上检查每个任务在提交时返回的 async_results，并在任务具有完成状态时采取行动。

有没有人有任何其他建议？

此外，由于后端结果的处理发生在“中央节点”上，我的目标是尽量减少此操作对这台机器的影响。

最好的方法是什么？

2）**人们通常如何解决处理worker返回的结果并放入backend-results的问题？**（假设已经配置了后端结果）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:51:01.180

我不确定我是否完全理解你的问题，但考虑到每个任务都有一个任务 ID。如果用户正在发送任务，您可以存储 ID，然后使用 json 检查结果，如下所示：

```
#urls.py 
from djcelery.views import is_task_successful

urlpatterns += patterns('',
    url(r'(?P<task_id>[\w\d\-\.]+)/done/?$', is_task_successful,
        name='celery-is_task_successful'),
    ) 
```

其他相关概念是[信号](http://docs.celeryproject.org/en/latest/userguide/signals.html)的概念，每个完成的任务都会发出一个信号。一个完成的任务会发出一个 task_success 信号。更多可以在[实时](http://docs.celeryproject.org/en/latest/userguide/monitoring.html#real-time-processing)过程中找到。

# xml - 从 XML/JSON 解释计划中获取查询中的列（和表）列表

> ID：14732480
> 
> 赞同：0
> 
> 时间：2013-02-06T15:20:06.137
> 
> 标签：xml, json, postgresql, sql-execution-plan, postgresql-9.0

我有大约。200条sql语句，我需要分析这些列中使用了哪些列和表。我发现 PostgreSQL 9.0+ 中提供了 XML 解释计划。

有没有一种已知的方法可以从该计划中获取使用的列和表的列表？

更新后的版本：

**测试数据**

```
CREATE TABLE tmp.a (id integer, b integer, c integer, d integer, e integer, f integer, g integer, h integer, i integer);
CREATE TABLE tmp.b (id integer, b integer, c integer, d integer, e integer, f integer, g integer, h integer, i integer);
CREATE TABLE tmp.c (id integer, b integer, c integer, d integer, e integer, f integer, g integer, h integer, i integer);
CREATE TABLE tmp.d (id integer, b integer, c integer, d integer, e integer, f integer, g integer, h integer, i integer);
CREATE TABLE tmp.e (id integer, b integer, c integer, d integer, e integer, f integer, g integer, h integer, i integer);

insert into tmp.a values (1,1,1,1,1,1,1,1,1);
insert into tmp.a values (2,1,1,1,1,1,1,1,1);
insert into tmp.a values (3,1,1,1,1,1,1,1,1);
insert into tmp.a values (4,1,1,1,1,1,1,1,1);
insert into tmp.b values (1,1,1,1,1,1,1,1,1);
insert into tmp.b values (2,1,1,1,1,1,1,1,1);
insert into tmp.b values (3,1,1,1,1,1,1,1,1);
insert into tmp.b values (4,1,1,1,1,1,1,1,1);
insert into tmp.c values (1,1,1,1,1,1,1,1,1);
insert into tmp.c values (2,1,1,1,1,1,1,1,1);
insert into tmp.c values (3,1,1,1,1,1,1,1,1);
insert into tmp.c values (4,1,1,1,1,1,1,1,1);
insert into tmp.d values (1,1,1,1,1,1,1,1,1);
insert into tmp.d values (2,1,1,1,1,1,1,1,1);
insert into tmp.d values (3,1,1,1,1,1,1,1,1);
insert into tmp.e values (2,1,1,1,1,1,1,1,1);
insert into tmp.e values (3,1,1,1,1,1,1,1,1);
insert into tmp.e values (4,1,1,1,1,1,1,1,1); 
```

**示例 SQL 和解释计划**

```
explain (verbose true, format xml, costs false)
select 
    a.b,
    a.c,
    b.c,
    d.b,
    e.f
from
    tmp.a a
    join tmp.b b using (id)
    join tmp.c c using (id)
    left join tmp.d d on (a.id = d.id)
    left join tmp.e e on (b.id = e.id)
where
    c.d = 1 and (d.f > 0 or e.g is null) 
```

**存储在表中的 XML 结果**

```
create table tmp.file (fcontent text);

insert into tmp.file values ('
    <explain xmlns="http://www.postgresql.org/2009/explain">
      <Query>
        <Plan>
          <Node-Type>Merge Join</Node-Type>
          <Join-Type>Left</Join-Type>
          <Output>
            <Item>a.b</Item>
            <Item>a.c</Item>
            <Item>b.c</Item>
            <Item>d.b</Item>
            <Item>e.f</Item>
          </Output>
          <Merge-Cond>(b.id = e.id)</Merge-Cond>
          <Filter>((d.f &gt; 0) OR (e.g IS NULL))</Filter>
          <Plans>
            <Plan>
              <Node-Type>Merge Join</Node-Type>
              <Parent-Relationship>Outer</Parent-Relationship>
              <Join-Type>Left</Join-Type>
              <Output>
                <Item>a.b</Item>
                <Item>a.c</Item>
                <Item>b.c</Item>
                <Item>b.id</Item>
                <Item>d.b</Item>
                <Item>d.f</Item>
              </Output>
              <Merge-Cond>(a.id = d.id)</Merge-Cond>
              <Plans>
                <Plan>
                  <Node-Type>Sort</Node-Type>
                  <Parent-Relationship>Outer</Parent-Relationship>
                  <Output>
                    <Item>a.b</Item>
                    <Item>a.c</Item>
                    <Item>a.id</Item>
                    <Item>b.c</Item>
                    <Item>b.id</Item>
                  </Output>
                  <Sort-Key>
                    <Item>a.id</Item>
                  </Sort-Key>
                  <Plans>
                    <Plan>
                      <Node-Type>Hash Join</Node-Type>
                      <Parent-Relationship>Outer</Parent-Relationship>
                      <Join-Type>Inner</Join-Type>
                      <Output>
                        <Item>a.b</Item>
                        <Item>a.c</Item>
                        <Item>a.id</Item>
                        <Item>b.c</Item>
                        <Item>b.id</Item>
                      </Output>
                      <Hash-Cond>(b.id = a.id)</Hash-Cond>
                      <Plans>
                        <Plan>
                          <Node-Type>Seq Scan</Node-Type>
                          <Parent-Relationship>Outer</Parent-Relationship>
                          <Relation-Name>b</Relation-Name>
                          <Schema>tmp</Schema>
                          <Alias>b</Alias>
                          <Output>
                            <Item>b.id</Item>
                            <Item>b.b</Item>
                            <Item>b.c</Item>
                            <Item>b.d</Item>
                            <Item>b.e</Item>
                            <Item>b.f</Item>
                            <Item>b.g</Item>
                            <Item>b.h</Item>
                            <Item>b.i</Item>
                          </Output>
                        </Plan>
                        <Plan>
                          <Node-Type>Hash</Node-Type>
                          <Parent-Relationship>Inner</Parent-Relationship>
                          <Output>
                            <Item>a.b</Item>
                            <Item>a.c</Item>
                            <Item>a.id</Item>
                            <Item>c.id</Item>
                          </Output>
                          <Plans>
                            <Plan>
                              <Node-Type>Hash Join</Node-Type>
                              <Parent-Relationship>Outer</Parent-Relationship>
                              <Join-Type>Inner</Join-Type>
                              <Output>
                                <Item>a.b</Item>
                                <Item>a.c</Item>
                                <Item>a.id</Item>
                                <Item>c.id</Item>
                              </Output>
                              <Hash-Cond>(a.id = c.id)</Hash-Cond>
                              <Plans>
                                <Plan>
                                  <Node-Type>Seq Scan</Node-Type>
                                  <Parent-Relationship>Outer</Parent-Relationship>
                                  <Relation-Name>a</Relation-Name>
                                  <Schema>tmp</Schema>
                                  <Alias>a</Alias>
                                  <Output>
                                    <Item>a.id</Item>
                                    <Item>a.b</Item>
                                    <Item>a.c</Item>
                                    <Item>a.d</Item>
                                    <Item>a.e</Item>
                                    <Item>a.f</Item>
                                    <Item>a.g</Item>
                                    <Item>a.h</Item>
                                    <Item>a.i</Item>
                                  </Output>
                                </Plan>
                                <Plan>
                                  <Node-Type>Hash</Node-Type>
                                  <Parent-Relationship>Inner</Parent-Relationship>
                                  <Output>
                                    <Item>c.id</Item>
                                  </Output>
                                  <Plans>
                                    <Plan>
                                      <Node-Type>Seq Scan</Node-Type>
                                      <Parent-Relationship>Outer</Parent-Relationship>
                                      <Relation-Name>c</Relation-Name>
                                      <Schema>tmp</Schema>
                                      <Alias>c</Alias>
                                      <Output>
                                        <Item>c.id</Item>
                                      </Output>
                                      <Filter>(c.d = 1)</Filter>
                                    </Plan>
                                  </Plans>
                                </Plan>
                              </Plans>
                            </Plan>
                          </Plans>
                        </Plan>
                      </Plans>
                    </Plan>
                  </Plans>
                </Plan>
                <Plan>
                  <Node-Type>Sort</Node-Type>
                  <Parent-Relationship>Inner</Parent-Relationship>
                  <Output>
                    <Item>d.b</Item>
                    <Item>d.id</Item>
                    <Item>d.f</Item>
                  </Output>
                  <Sort-Key>
                    <Item>d.id</Item>
                  </Sort-Key>
                  <Plans>
                    <Plan>
                      <Node-Type>Seq Scan</Node-Type>
                      <Parent-Relationship>Outer</Parent-Relationship>
                      <Relation-Name>d</Relation-Name>
                      <Schema>tmp</Schema>
                      <Alias>d</Alias>
                      <Output>
                        <Item>d.b</Item>
                        <Item>d.id</Item>
                        <Item>d.f</Item>
                      </Output>
                    </Plan>
                  </Plans>
                </Plan>
              </Plans>
            </Plan>
            <Plan>
              <Node-Type>Sort</Node-Type>
              <Parent-Relationship>Inner</Parent-Relationship>
              <Output>
                <Item>e.f</Item>
                <Item>e.id</Item>
                <Item>e.g</Item>
              </Output>
              <Sort-Key>
                <Item>e.id</Item>
              </Sort-Key>
              <Plans>
                <Plan>
                  <Node-Type>Seq Scan</Node-Type>
                  <Parent-Relationship>Outer</Parent-Relationship>
                  <Relation-Name>e</Relation-Name>
                  <Schema>tmp</Schema>
                  <Alias>e</Alias>
                  <Output>
                    <Item>e.f</Item>
                    <Item>e.id</Item>
                    <Item>e.g</Item>
                  </Output>
                </Plan>
              </Plans>
            </Plan>
          </Plans>
        </Plan>
      </Query>
    </explain>
    '); 
```

**解释计划中的项目**

```
with elements as (
    SELECT trim(a[rn]) AS elem, rn
    FROM   (
        SELECT *, generate_series(1, array_upper(a, 1)) AS rn
        FROM  (
        SELECT string_to_array(fcontent, chr(10)) AS a
        FROM   tmp.file
        ) x
        ) y
    )
select 
    regexp_replace(elem, E'<Item>|</Item>', '', 'g' ) as sql_line
from 
    elements where elem like '<Item>%' 
group by 
    regexp_replace(elem, E'<Item>|</Item>', '', 'g' )
order by
    regexp_replace(elem, E'<Item>|</Item>', '', 'g' ) 
```

`Item`标签中有 25 列。但是，要执行此查询，您只需要 13: `a.b, a.c, b.c, d.b, e.f, a.id, b.id, c.id, d.id, e.id, c.d, d.f, e.g`。有没有办法让我只将这些列排除在解释计划之外？

* * *

**原版**

例如我确实有以下查询（更多用于说明，无需理解）：

```
select
    dd.id_databox_data,
    dd.recipient_id,
    dd.sender_id,
    lp.business_name,
    fa.repayment_identification,
    perform_time,
    dd.subject as dd_subject,
    ca.subject as ca_subject,
    d.unique_name,
    s.name,
    s.long_name,
    lld.legal_template,
    lld.issue_date,
    ca.perform_time,
    dd.id_recipient_document_ident,
    dd.id_sender_document_ident,
    dci1.ref_number,    
    dci2.ref_number     
from 
    databox_data as dd 
    join databox_data_attachments as dda on (dd.id_databox_data = dda.id_databox_data)
    join databox_attachment as da on (da.id_databox_attachment = dda.id_databox_attachment)
    join document as d on (d.id_document = da.id_document)
    join external_file_letter_data as fld on (fld.id_document = d.id_document)
    join letter_data as ld on (ld.id_letter_data = fld.id_letter_data)
    join legal_letter_data lld on (ld.id_letter_data = lld.id_letter_data)
    join legal_instrument li using (id_legal_instrument)
    left join execution e using (id_legal_instrument)
    join v_communication_act as ca on (ca.id_letter_data = ld.id_letter_data)
    join solver s using (id_solver)
    join responsibility as r on (r.id_responsibility = ca.id_related_responsibility)
    join party pr on (r.id_responsible = pr.id_party)
    join financial_accountability fa using (id_accountability)
    join flight f using (id_flight)
    join portfolio p using (id_portfolio)
    join legal_person lp on (pr.id_source = lp.id_party)
    left join v_authority va on (dd.recipient_id = va.data_box_id) 
    left join databox_document_ident dci1 on (dd.id_recipient_document_ident = dci1.id_databox_document_ident)
    left join databox_document_ident dci2 on (dd.id_recipient_document_ident = dci2.id_databox_document_ident)      
where
    ca.perform_time > (Now()::date - 1)
    and s.id_solver = 41 
```

我正在使用`explain (verbose true, format xml, costs false)`.

这导致了以下解释计划（XML 版本），不幸的是我无法插入整个解释计划（因此对帖子长度的限制），如果您需要完整的解释计划版本，请使用此[pastebin ：](http://pastebin.com/ptNcb9Jg)

```
<explain xmlns="http://www.postgresql.org/2009/explain">
  <Query>
    <Plan>
      <Node-Type>Nested Loop</Node-Type>
      <Join-Type>Left</Join-Type>
      <Output>
        <Item>dd.id_databox_data</Item>
        <Item>dd.recipient_id</Item>
        <Item>dd.sender_id</Item>
        <Item>lp.business_name</Item>
        <Item>fa.repayment_identification</Item>
        <Item>act.perform_time</Item>
        <Item>dd.subject</Item>
        <Item>communication_act.subject</Item>
        <Item>d.unique_name</Item>
        <Item>s.name</Item>
        <Item>s.long_name</Item>
        <Item>lld.legal_template</Item>
        <Item>lld.issue_date</Item>
        <Item>act.perform_time</Item>
        <Item>dd.id_recipient_document_ident</Item>
        <Item>dd.id_sender_document_ident</Item>
        <Item>dci1.ref_number</Item>
        <Item>dci2.ref_number</Item>
      </Output>
      <Plans>
        <Plan>
          <Node-Type>Nested Loop</Node-Type>
          <Parent-Relationship>Outer</Parent-Relationship>
          <Join-Type>Left</Join-Type>
          <Output>
            <Item>dd.id_databox_data</Item>
            <Item>dd.recipient_id</Item>
            <Item>dd.sender_id</Item>
            <Item>dd.subject</Item>
            <Item>dd.id_recipient_document_ident</Item>
            <Item>dd.id_sender_document_ident</Item>
            <Item>d.unique_name</Item>
            <Item>lld.legal_template</Item>
            <Item>lld.issue_date</Item>
            <Item>communication_act.subject</Item>
            <Item>act.perform_time</Item>
            <Item>s.name</Item>
            <Item>s.long_name</Item>
            <Item>fa.repayment_identification</Item>
            <Item>lp.business_name</Item>
            <Item>dci1.ref_number</Item>
          </Output>
          <Plans>
            <Plan>
              <Node-Type>Nested Loop</Node-Type>
              <Parent-Relationship>Outer</Parent-Relationship>
              <Join-Type>Inner</Join-Type>
              <Output>
                <Item>dd.id_databox_data</Item>
                <Item>dd.recipient_id</Item>
                <Item>dd.sender_id</Item>
                <Item>dd.subject</Item>
                <Item>dd.id_recipient_document_ident</Item>
                <Item>dd.id_sender_document_ident</Item>
                <Item>d.unique_name</Item>
                <Item>lld.legal_template</Item>
                <Item>lld.issue_date</Item>
                <Item>communication_act.subject</Item>
                <Item>act.perform_time</Item>
                <Item>s.name</Item>
                <Item>s.long_name</Item>
                <Item>fa.repayment_identification</Item> 
```

有没有办法（最好是 SQL 方式）我如何从这样的计划中获取使用的列和表的列表？仅查询行是不够的`<Item>`，因为当表第一次出现在解释计划中（在最低级别）时，所有列都列在`<Item>`标记中，尽管其中许多列不需要完成查询。

我使用以下 SQL 列出唯一`<Item>`标签：

```
with elements as (
    SELECT trim(a[rn]) AS elem, rn
    FROM   (
        SELECT *, generate_series(1, array_upper(a, 1)) AS rn
        FROM  (
        SELECT string_to_array(fcontent, chr(10)) AS a
        FROM   tmp.file
        ) x
        ) y
    )
select 
    regexp_replace(elem, E'<Item>|</Item>', '', 'g' ) as sql_line
from 
    elements where elem like '<Item>%' 
group by 
    regexp_replace(elem, E'<Item>|</Item>', '', 'g' )
order by
    regexp_replace(elem, E'<Item>|</Item>', '', 'g' ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T00:09:31.187

在我看来，您需要解析 XML 的三个区域。

从查询返回的列将位于第一个`output`元素下（在`item`标签中）。

连接的每个子节点都有一个`output`由计划者认为必须使用的列组成。加入列将在这里。如果这给了您一个超集，您可能需要解析 的内容`join-filter`才能在此处获取信息。

这两个不会给你你需要的一切。您当然需要解析`filter`元素以从中提取列。

如果您打算在 SQL 中执行此操作，您应该查看 PostgreSQL 中的[xml 函数](http://www.postgresql.org/docs/8.3/static/functions-xml.html)。您可以在 PostgreSQL 中对 xml 运行 xpath 查询，或者通过 xslt 运行。这将比尝试使用正则表达式解析它要好得多。

不幸的是，这有点超出工作示例的复杂性，但我希望这足以让您入门。

# javascript - 从 div 获取复选框 id 和值的列表并将其传递给控制器

> ID：14732481
> 
> 赞同：0
> 
> 时间：2013-02-06T15:20:07.213
> 
> 标签：javascript, jquery, asp.net-mvc-3, razor

我的视图模型填充了一个复选框列表。我在复选框元素中指定 id 和 value。我需要将这些信息保存在数据库中。目前我有它，我把复选框 id 和复选框值放在一个键值对中，我打算对我的控制器进行 ajax 调用。有没有更好的方法来做到这一点（mvc）？你会怎么做？谢谢

我的代码：

看法

```
 <div class = "divSubject">
     @foreach (var item in Model.dictionarySubject)
            {
     <div>
           @Html.CheckBoxFor(model => item.Value, new { @id = item.Key.subjectID})
           @Html.DisplayFor(model => item.Key.subjectName)
    </div>

            }
   </div> 
```

jQuery

```
 $("#btnSave").click(function () {
 var dict = []; // create an empty array
              $('.divSubject input[type=checkbox]').each(function () {
                  var id = $(this).attr('id')
                  dict.push({
                      key: id,
                      value: $(this).attr('checked')
                  });
                  alert(JSON.stringify(dict))
              });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:59:52.440

DOM 元素的 id 有一些限制。例如，它不能以数字开头。我建议您使用 HTML5 data-* 属性来保存此元数据信息：

```
@Html.CheckBoxFor(
    model => item.Value, 
    new { data_id = item.Key.subjectID }
) 
```

然后在你的javascript里面：

```
$('.divSubject input[type=checkbox]').each(function () {
    var id = $(this).data('id')
    dict.push({
        key: id,
        value: $(this).attr('checked')
    });
    alert(JSON.stringify(dict))
}); 
```

除此之外，您的代码似乎还不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:05:45.610

你的代码工作得很好，但我相信你想要成对的键和布尔值。在这种情况下，请考虑以下代码：

```
dict.push({
     key: id,
     value: !!$(this).attr('checked')
}); 
```

$(this).attr('checked') 将返回“checked”或 null，而不是布尔值。

# jquery - 如何在 jQuery Mobile 中将标题设置为全屏模式？

> ID：14732482
> 
> 赞同：1
> 
> 时间：2013-02-06T15:20:09.903
> 
> 标签：jquery, jquery-mobile

`data-fullscreen="true"`当我为标题设置属性时，它工作正常。但是当我收到一些事件时，我确实需要在运行时执行此操作。我试过这个：

```
$(document).ready(function() {
    $("[data-role=header]").attr("data-fullscreen", "true");
}); 
```

在 Chrome 的元素检查中，属性`data-fullscreen`更改为`true`，但标题没有任何反应。有谁知道另一种方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:01:07.710

这是一个工作示例：http: [//jsfiddle.net/Gajotres/HCcUe/](http://jsfiddle.net/Gajotres/HCcUe/)

和代码示例：

```
$(document).on('pagebeforeshow', '#index', function(){       
    $('[data-role="header"]').attr({'data-fullscreen':'true','data-position':'fixed'}).html('<h3>Test</h3>');
    $('#index').trigger('pagecreate');                                    
}); 
```

使用 pageshow 或 pagebeforeshow 页面事件来设置此属性。也不要使用 jQuery Mobile 准备好的文档，在这里你会发现原因：[https ://stackoverflow.com/a/14469041/1848600](https://stackoverflow.com/a/14469041/1848600)

# asp.net - 用户“ndt”登录失败，请帮我破译堆栈跟踪

> ID：14732492
> 
> 赞同：0
> 
> 时间：2013-02-06T15:20:36.663
> 
> 标签：asp.net, mysql, connection-string

我正在使用其他人的代码。试图解决它。我们重新映像了我们的服务器并上传了新的干净文件。（与之前的相同，只有这些没有被感染）我还恢复了我创建的数据库备份。

以前一切正常，但现在我们遇到了问题。我对这种类型的身份验证没有经验。在查询数据之前，它似乎要通过一个 mdf 文件。

似乎无法绕过用户错误登录失败。

```
[SqlException (0x80131904): Login failed for user 'ndt'.]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +187
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) +199
   System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +2297
   System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK) +34
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +606
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +220
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +502
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +28
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +429
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +70
   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +512
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +85
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +104
   System.Data.SqlClient.SqlConnection.Open() +177
   System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior) +118
   System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior) +140
  System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, String srcTable) +83
  System.Web.UI.WebControls.SqlDataSourceView.ExecuteSelect(DataSourceSelectArguments arguments) +1748
  System.Web.UI.DataSourceView.Select(DataSourceSelectArguments arguments, DataSourceViewSelectCallback callback) +13
  System.Web.UI.WebControls.DataBoundControl.PerformSelect() +149
  System.Web.UI.WebControls.BaseDataBoundControl.DataBind() +68
  System.Web.UI.WebControls.GridView.DataBind() +4
  NDTCourses.TimeKeeping.WebForm14.Page_Load(Object sender, EventArgs e) in C:\Documents and Settings\cflick\Desktop\NDTCourses\NDTCourses\TimeKeeping\declare_time.aspx.cs:264
  System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +13
  System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +45
  System.Web.UI.Control.OnLoad(EventArgs e) +98
  System.Web.UI.Control.LoadRecursive() +71
  System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +4315

<connectionStrings>
  <remove name="LocalSqlServer" />
  <add name="LocalSqlServer" connectionString="Data Source=TECH-ILL\\SQLEXPRESS;Initial Catalog=timeKeep;Integrated Security=True"
   providerName="System.Data.SqlClient" />
  <add name="db" connectionString="Data Source=TECH-ILL\\SQLEXPRESS;Initial Catalog=timeKeep;Integrated Security=True" />
  <add name="timeKeepConnectionString" connectionString="Data Source=TECH-ILL\SQLEXPRESS;Initial Catalog=timeKeep;Integrated Security=True"
   providerName="System.Data.SqlClient" />
 </connectionStrings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:31:56.270

ndt 服务器登录不再存在，或者服务器登录不再与数据库用户（通常称为孤立用户）关联。

在第一种情况下，您需要创建数据库登录，然后处理孤立用户。

将数据库还原到新的或重建的服务器或重新创建数据库登录时会发生孤立用户。您可以在[http://msdn.microsoft.com/en-us/library/ms175475.aspx](http://msdn.microsoft.com/en-us/library/ms175475.aspx)找到解决此问题的说明。

# javascript - 每设置数量的孩子添加新行

> ID：14732495
> 
> 赞同：0
> 
> 时间：2013-02-06T15:20:45.643
> 
> 标签：javascript, jquery

我正在尝试每 2 个孩子添加一个新行，并且每次将 2 个新孩子放在一个新行中。

起始html：

```
<div class="row_1"></div> 
```

第一次运行后，我得到：

```
<div class="newRow">
   <div class="span6" id="content"></div>
</div>
<div class="row_1"></div> 
```

但随着我不断添加，我得到：

```
<div class="newRow">
  <div class="span6">...</div>
  <div class="span6" id="content">...</div>
  <div class="span6" id="content"></div> <== Empty extra div
</div>
<div class="newRow"></div> <== Empty extra div
<div class="row_1"></div> 
```

预期的结果是

```
<div class="newRow">
  <div class="span6">...</div>
  <div class="span6" id="content">...</div>
</div>
<div class="newRow">
  <div class="span6">...</div>
  <div class="span6">...</div>
</div>
<div class="row_1"></div> 
```

以下是我正在使用的 jQuery

```
$(".nav li a").on("click", function(e) {

$('#content').removeAttr('id');

var $row = $(".row_1");
var $rowNew = $('.newRow');

if($rowNew.length < 2){
        $('<div id="content" class="span6"></div>').appendTo('.newRow');
} 

if ($rowNew.children().length > 2) {
        $('<div class="row-fluid new"></div>').insertBefore($row);
}

else {
        $('<div class="row-fluid new"></div>').insertBefore($row);
        $('<div id="content" class="span6"></div>').appendTo('.newRow');
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:32:13.683

“最终我解决了它”：

```
$(".nav li a").on("click", function(e) {

$('#content').removeAttr('id');

var $row = $(".span9");
var $rowNew = $('.new');

if ($rowNew.children().length > 1) {
        $(".span9 div").removeClass("new");
        $('<div class="row-fluid new"></div>').prependTo($row);
}

if ($(".new").length == 0) {
        $('<div class="row-fluid new"></div>').prependTo($row);
        $('<div id="content" class="span6"></div>').appendTo('.new');
} else {
    $('<div id="content" class="span6"></div>').appendTo('.new');
}

}); 
```

# sql - 当一对一表中并非所有键都存在时，通过一对一表连接两个表

> ID：14732497
> 
> 赞同：1
> 
> 时间：2013-02-06T15:20:47.223
> 
> 标签：sql, oracle

我有`menu`和`action`表，它们通过一对一的表共享链接：

```
菜单：ID，名称
行动：身份证，姓名
MenAct：menu_id，action_id

```

并非全部都`menu.id`在`MenAct.menu_id`集合中（换句话说，某些菜单没有关联的操作）...

我不能写选择，它给出了成对的`menu.name, action.name`时间：

```
menu.id = MenAct.menu_id AND action.id = MenAct.action_id

```

否则`menu.name, NULL`...

这需要嵌套请求或其他 SQL 技术，但我对 Oracle SQL 非常陌生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T15:25:50.580

听起来你想要一个`LEFT JOIN`不是`INNER JOIN`：

```
select m.name, a.name
from menu m
left join menuact ma
    on m.id = ma.menu_id
left join action a
    on ma.action_id = a.id 
```

A`LEFT JOIN`将返回表中的所有行`menu`，无论它在其他表中是否有匹配的行。如果它不存在，那么您将`null`在`action`.

如果您在学习`JOIN`语法方面需要帮助，这里有一个很好[的连接可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# sql - 使用 LEFT JOIN 和 CASE 语句的 SQL QUERY

> ID：14732500
> 
> 赞同：8
> 
> 时间：2013-02-06T15:21:10.077
> 
> 标签：sql, sql-server, select

**这是我的两个表的示例。**

![在此处输入图像描述](../Images/48d96071addff1f6f252f01197b74a92.png)

**问题：** 如何使用左连接创建 SQL 查询？

**这是场景**

正如我之前所说，我有两个表（TABLE1 和 TABLE2），我尝试使用左连接，以便可以将两个 UserID 组合在一个表中

**所以这是代码**

```
select * from table1 a left join table2 on a.userid = b.userid 
```

所以现在合并了两个表。

**我需要做的是：**
如果状态**全部完成**，则“完成”，
然后如果状态包含**完整和不完整，**则“不完整”，
否则“无状态”

它应该是这样的。

![在此处输入图像描述](../Images/736c5d33baa65d0ec12b01496ec810ca.png)

**注意**：
由于**UserID = 1** (table1) 包含**完整和不完整**状态 (table2)
然后它显示**“不完整”** (新列)

因为**UserID = 4** (table1) 包含**所有完整**状态 (表 2)
然后它显示**“完成”** (新柱子）

## ----------------------------------

**如果我将状态更改为整数会怎样？**

![在此处输入图像描述](../Images/cf9b65697fe062b85a10867a47b77754.png)

相同的程序。谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T15:29:55.623

```
SELECT  a.*, 
        CASE WHEN b.totalCount = 1 AND b.totalINC = 0 THEN 'Complete'
             WHEN totalCount IS NULL THEN ''
             ELSE 'Incomplete'
        END STatus
FROM    table1 a
        LEFT JOIN
        (
            SELECT  UserID, 
                    COUNT(DISTINCT STATUS) totalCount,
                    SUM(CASE WHEN status = 'Incomplete' THEN 1 ELSE 0 END) totalINC
            FROM table2
            GROUP BY UserID
        ) b ON a.UserID = b.UserID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/d6ee1/4)

**更新 1**

你唯一要改变的是`CASE`

```
SELECT  a.*, 
        CASE WHEN b.totalCount = 1 AND b.totalINC = 0 THEN 'Complete'
             WHEN totalCount IS NULL THEN ''
             ELSE 'Incomplete'
        END STatus
FROM    table1 a
        LEFT JOIN
        (
            SELECT  UserID, 
                    COUNT(DISTINCT STATUS) totalCount,
                    SUM(CASE WHEN status <> 100 THEN 1 ELSE 0 END) totalINC
            FROM table2
            GROUP BY UserID
        ) b ON a.UserID = b.UserID; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/082a7/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T15:26:16.500

简单但棘手的解决方案：

因为 INCOMPLETE 比 COMPLETE 大（对于一个 db），你可以简单地做

```
SELECT a.UserID, 
  LOWER(COALESCE(MAX(b.status) , 'NO STATUS'))
  FROM table1 a 
 LEFT JOIN table2 b on a.userid = b.userid
 GROUP BY a.UserID 
```

[SqlFiddle](http://sqlfiddle.com/#!3/0545d/8)（也有 Andomar 更好的解决方案）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T15:28:47.290

```
select  a.UserID
,       case
        when sum(case when b.status = 'Incomplete' then 1 end) > 0 
            then 'Incomplete' 
        when sum(case when b.status = 'Complete' then 1 end) > 0 
            then 'Complete' 
        else 'No Status' 
        end
from    table1 a 
left join 
        table2 b
on      a.userid = b.userid
group by
        a.UserID 
```

# r - 滚动回归返回多个对象

> ID：14732505
> 
> 赞同：1
> 
> 时间：2013-02-06T15:21:40.397
> 
> 标签：r, regression, xts, zoo, lm

我正在尝试基于[此处](https://stackoverflow.com/questions/11583177/dynamic-time-series-prediction-and-rollapply)的示例构建滚动回归函数，但除了返回预测值之外，我还想返回一些滚动模型诊断（即系数、t 值和 mabye R^2）。我希望根据结果类型以离散对象的形式返回结果。上面链接中提供的示例成功地创建了滚动预测，但我需要一些帮助打包和写出滚动模型诊断：

最后，我希望该函数返回三 (3) 个对象：

1.  预测
2.  系数
3.  T 值
4.  R^2

下面是代码：

```
require(zoo)
require(dynlm)

## Create Some Dummy Data
set.seed(12345)
x <- rnorm(mean=3,sd=2,100)
y <- rep(NA,100)
y[1] <- x[1]
for(i in 2:100) y[i]=1+x[i-1]+0.5*y[i-1]+rnorm(1,0,0.5)
int <- 1:100
dummydata <- data.frame(int=int,x=x,y=y)
zoodata <- as.zoo(dummydata)

rolling.regression <- function(series) {
  mod <- dynlm(formula = y ~ L(y) + L(x), data = as.zoo(series)) # get model

  nextOb <- max(series[,'int'])+1 # To get the first row that follows the window
  if (nextOb<=nrow(zoodata)) {   # You won't predict the last one

    # 1) Make Predictions
    predicted <- predict(mod,newdata=data.frame(x=zoodata[nextOb,'x'],y=zoodata[nextOb,'y']))
    attributes(predicted) <- NULL
    c(predicted=predicted,square.res <-(predicted-zoodata[nextOb,'y'])^2)

    # 2) Extract coefficients
    #coefficients <- coef(mod)

    # 3) Extract rolling coefficient t values
    #tvalues <- ????(mod)

    # 4) Extract rolling R^2
    #rsq <-

  }
}    

rolling.window <- 20
results.z <-  rollapply(zoodata, width=rolling.window, FUN=rolling.regression, by.column=F, align='right') 
```

因此，在弄清楚如何从模型（即 mod）中提取 t 值之后，我需要做什么才能使函数返回三 (3) 个单独的对象（即预测、系数和 T 值）？

我对 R 相当陌生，对功能真的很陌生，对动物园也很陌生，我被困住了。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T17:04:50.490

我希望我能正确理解您，但这里是您功能的一个小编辑：

```
rolling.regression <- function(series) {
  mod <- dynlm(formula = y ~ L(y) + L(x), data = as.zoo(series)) # get model

  nextOb <- max(series[,'int'])+1 # To get the first row that follows the window
  if (nextOb<=nrow(zoodata)) {   # You won't predict the last one
    # 1) Make Predictions
    predicted=predict(mod,newdata=data.frame(x=zoodata[nextOb,'x'],y=zoodata[nextOb,'y']))
    attributes(predicted)<-NULL
    #Solution 1; Quicker to write
    #     c(predicted=predicted, 
    #       square.res=(predicted-zoodata[nextOb,'y'])^2,
    #       summary(mod)$coef[, 1],
    #       summary(mod)$coef[, 3],
    #       AdjR = summary(mod)$adj.r.squared)

    #Solution 2; Get column names right
    c(predicted=predicted, 
      square.res=(predicted-zoodata[nextOb,'y'])^2,
      coef_intercept = summary(mod)$coef[1, 1],
      coef_Ly = summary(mod)$coef[2, 1],
      coef_Lx = summary(mod)$coef[3, 1],
      tValue_intercept = summary(mod)$coef[1, 3],
      tValue_Ly = summary(mod)$coef[2, 3],
      tValue_Lx = summary(mod)$coef[3, 3],
      AdjR = summary(mod)$adj.r.squared)
  }
}

rolling.window <- 20
results.z <-  rollapply(zoodata, width=rolling.window, FUN=rolling.regression, by.column=F, align='right')

    head(results.z)
   predicted square.res coef_intercept   coef_Ly  coef_Lx tValue_intercept tValue_Ly tValue_Lx      AdjR
20 10.849344   0.721452     0.26596465 0.5798046 1.049594       0.38309211  7.977627  13.59831 0.9140886
21 12.978791   2.713053     0.26262820 0.5796883 1.039882       0.37741499  7.993014  13.80632 0.9190757
22  9.814676  11.719999     0.08050796 0.5964808 1.073941       0.12523824  8.888657  15.01353 0.9340732
23  5.616781  15.013297     0.05084124 0.5984748 1.077133       0.08964998  9.881614  16.48967 0.9509550
24  3.763645   6.976454     0.26466039 0.5788949 1.068493       0.51810115 11.558724  17.22875 0.9542983
25  9.433157  31.772658     0.38577698 0.5812665 1.034862       0.70969330 10.728395  16.88175 0.9511061 
```

要了解它是如何工作的，请用回归做一个小例子：

```
x <- rnorm(1000); y <- 2*x + rnorm(1000)
reg <- lm(y ~ x)
summary(reg)$coef
              Estimate Std. Error    t value Pr(>|t|)
(Intercept) 0.02694322 0.03035502  0.8876033 0.374968
x           1.97572544 0.03177346 62.1816310 0.000000 
```

如您所见，`summary`首先调用然后获取它的系数（`coef(summary(reg))`也可以）为您提供一个包含估计值、标准误差和 t 值的表格。因此估计值保存在该表的第 1 列中，t 值保存在第 3 列中。这就是我在更新`rolling.regression`函数中获取它们的方式。

**编辑**

我更新了我的解决方案；现在它还包含调整后的 R2。如果您只想要普通的 R2，请摆脱`.adj`.

**编辑 2**

快速而肮脏的 hack 如何命名列：

```
rolling.regression <- function(series) {
  mod <- dynlm(formula = y ~ L(y) + L(x), data = as.zoo(series)) # get model

  nextOb <- max(series[,'int'])+1 # To get the first row that follows the window
  if (nextOb<=nrow(zoodata)) {   # You won't predict the last one
    # 1) Make Predictions
    predicted=predict(mod,newdata=data.frame(x=zoodata[nextOb,'x'],y=zoodata[nextOb,'y']))
    attributes(predicted)<-NULL
    #Get variable names
    strVar <- c("Intercept", paste0("L", 1:(nrow(summary(mod)$coef)-1)))
    vec <- c(predicted=predicted, 
             square.res=(predicted-zoodata[nextOb,'y'])^2,
             AdjR = summary(mod)$adj.r.squared,
             summary(mod)$coef[, 1],
             summary(mod)$coef[, 3])
    names(vec)[4:length(vec)] <- c(paste0("Coef_", strVar), paste0("tValue_", strVar))

    vec
  }
} 
```

# django - Django表单：如果用户将字段留空，则默认值

> ID：14732515
> 
> 赞同：9
> 
> 时间：2013-02-06T15:22:07.677
> 
> 标签：django, django-forms

在 Django Forms 上，如果用户将其留空，如何为字段指定默认值？Initial 设置一个初始值，但用户可以删除它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T15:41:50.310

If you're using a `ModelForm` simply follow Dan's advice.

If however you're simply using a `Form` then you may have to specify how to deal with validation. [Example Documentation](https://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-a-specific-field-attribute)

```
class YourForm(forms.Form):
    ...

    def clean_field(self):
        data = self.cleaned_data['field']
        if not data:
            data = 'default value'

        return data 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T15:28:08.860

[在模型中设置默认值。](https://docs.djangoproject.com/en/dev/ref/models/fields/#default)

```
class YourModel(models.Model):
    this_field = models.TextField(default="default_value") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-23T16:41:18.673

WallyBay 的回答对我有用。（+添加我的经验）

如果您将表单字段留空，则将传递**None值。**您可以通过打印 from.cleaned_data() 来检查这一点。

但是，在我的例子中，None 值并没有被模型的默认值替换。

我通过在 shell('python manage.py shell') 中创建对象进行测试，传递**1)None 值**和**2)empty 参数**。

我的模型：

```
class Cart(models.Model):
    total_amount = models.DecimalField(decimal_places=2, max_digits=1000, default=1, blank=True, null=True)
    quantity = models.IntegerField(default=1, blank=True)
    note = models.CharField(max_length=300, default='nothing to mention')
    summery = models.TextField(blank=False, null=True)
    event_won = models.BooleanField(default=False) 
```

我的表格：

```
class CartForm(forms.ModelForm):
    summery = forms.CharField() 
    total_amount = forms.DecimalField(required=False)
    quantity = forms.IntegerField(initial=20)
    note = forms.CharField(widget=forms.TextInput(attrs={"placeholder":"write a note"}))

    class Meta: 
        model = Cart 
        fields = [
            'summery',
            'total_amount',
            'quantity',
            'note'
        ] 
```

1) 通过传递 None 值来创建对象。 `Cart.objects.create(total_amount=None)`

> 结果：默认值不适用。total_amount 为 Null（无）。

2）创建对象而不传递任何东西。 `Cart.objects.create()`

> 结果：默认值有效。总金额为 1。

当我删除 Model 类中 total_amount 的 null=True 选项时，它给了我一个错误“NOT NULL constraint failed”

# java - Scriptella：使用集合和每个循环

> ID：14732519
> 
> 赞同：0
> 
> 时间：2013-02-06T15:22:15.007
> 
> 标签：java, collections, foreach, scriptella

如何在 scriptella 中编写以下代码？看起来它认为我正在尝试比较 Set 和 String，并且它不喜欢最后一个 for 循环。以及写 && 之类的逻辑表达式的方法是什么。谢谢你。

```
<connection id="java" driver="scriptella.driver.janino.Driver"/>

<script connection-id="java>

//some code

if(finalOrderCounter &lt; numberOfEntries){
    Set &lt;String> set = new HashSet &lt;String>();
    for(int i = 0; i &lt; fieldNames.length; i++){
        set.add(fieldNames[i]);
    }
    for(int i = 0; i &lt; fieldNamesFromXML.length; i++){
        set.remove(fieldNamesFromXML[i]);
    }
    String exception = "";
    for(String element:set)
        exception += element +"\n";
    throw new IOException("Field(s)\n" + exception + "do(es) not exits in the source database");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:21:03.323

也许您可以尝试“经典”“for”循环语法？

```
StringBuffer exception = new StringBuffer();
for (int i = 0; i &lt; set.size(); ++i) {
    String element = (String) set.get(i);
    exception.append(element);
    exception.append("\n");
}
throw new IOException("Field(s)\n" + exception.toString() + "do(es) not exits in the source database"); 
```

顺便说一句，你得到什么错误？

# jquery - 显示模态对话框并停止所有其他事件

> ID：14732523
> 
> 赞同：0
> 
> 时间：2013-02-06T15:22:18.770
> 
> 标签：jquery, events

**当访客选择Cape Cod Local Van Delivery 1.00 美元**时，我正在尝试打开一个模式对话框

 **```
<select name="ShippingSpeedChoice" onchange="this.form.submit();" style="">
    <option value="0">PLEASE SELECT</option>
    <option value='101' >Free Shipping (UPS Ground) </option>
    <option value='1001'>Cape Cod Local Van Delivery $1.00 </option>
</select> 
```

我的脚本：

```
$("#v65-cart-shipping-details select").change(function(event) {
if (this.value == '1001'){
    $("#dialog-modal").dialog({
    height: 140,
    modal: true
    });
}
}); 
```

模态显示几秒钟，并且页面重新加载由于`onchange="this.form.submit();"`

我需要停止此事件，直到我关闭模式对话框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:35:03.397

从您的 HTML 中删除 onchange 事件

```
<select name="ShippingSpeedChoice" style="">
    <option value="0">PLEASE SELECT</option>
    <option value='101' >Free Shipping (UPS Ground) </option>
    <option value='1001'>Cape Cod Local Van Delivery $1.00 </option>
</select> 
```

并像这样放置jQuery：

```
$("#v65-cart-shipping-details select").change(function(event) {
    if (this.value == '1001'){
       $("#dialog-modal").dialog({
           height: 140,
           modal: true,
           close:function(){
              // form submit action here
           }
       });
    }
}); 
```**

# sql-server - MS SQL Express - 内存限制与 Web 应用程序

> ID：14732525
> 
> 赞同：-2
> 
> 时间：2013-02-06T15:22:40.543
> 
> 标签：sql-server, sql-server-2008, memory-management, licensing

我有类似于论坛的网络应用程序。我计划在这个应用程序上拥有几千多个用户，我想知道我是否可以使用 MS SQL Express - 这是它的限制列表： ![SQLExpr 限制](../Images/342e574c530a99304e756bd8bbefa72f.png)

尽管使用了 cpu，我想知道这 1 GB 的内存使用是否足够。谁能告诉我这是否足够，或者可以给我一些例子，这 1 GB 就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:37:00.970

我觉得应该没问题。根据每行中有多少列及其类型，您应该能够将至少 100 万行放入 1GB 的磁盘空间中。数据库只会在内存中加载所需的表。如果它达到其内存限制，它将开始分页。

如果您使用的是 SQL 2008 R2，那么实际的数据库最多只能增长到 10GB，这是您应该关注的真正限制。

在我们的数据库中，大约 1GB 的表包含大约 400 万行。我们有 2 个 50GB 的数据库，一个占用 16GB 的 RAM，另一个占用 2GB。所以这取决于访问频率和访问哪些表。

# javascript - Ember.js（pre4）数组控制器不保持状态

> ID：14732528
> 
> 赞同：0
> 
> 时间：2013-02-06T15:22:49.250
> 
> 标签：javascript, ember.js, ember-router

**编辑 2013-03-02**

这似乎在 RC1 中得到解决

* * *

在之前的 Ember.js 版本中，控制器会保持分配给它们的状态，但这似乎是 Pre4 中的一个问题。

所以如果我有这个控制器

```
App.UsersController = Ember.ArrayController.extend({
    content: ['mike', 'jen', 'sofia'],

    _content_observer: (function(){
         /* I'm called, but my author doesn't know why */
         console.log('Content was altered! But why? And by whom?');
    }).observes('content')
}); 
```

由于某些无法解释的原因，内容被覆盖。我**不想使用 ember data**，但似乎我被迫朝那个方向发展。

这个[JS Fiddle](http://jsfiddle.net/wmarbut/XSZZW/)举例说明了这个问题。

这是怎么回事？我该如何阻止它，或者这是否根深蒂固于余烬中的固执己见，以至于我需要接受它并顺其自然？

* * *

**编辑**

更进一步，即使您覆盖了钩子，似乎设置的任何内容`model`都将设置为该值。`content``setupController`

例如：

```
UsersRoute = Ember.Route.extend({
    model: function() {
        /*I should never be called, but I am. How curious.*/
        return ['This','Shouldnt','Be','Assigned'];
    },
    setupController: function() {
        /* According to http://emberjs.com/guides/routing/specifying-a-routes-model/, I should prevent the model from being assigned to content, but I don't */
    }
}); 
```

`UsersController.content`遗嘱以价值结束`['This','Shouldnt','Be','Assigned']`

看到这个更新[的小提琴](http://jsfiddle.net/wmarbut/dz98R/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:28:23.070

您可以使用该`setupController`方法随意设置控制器的内容：

```
setupController: function(controller) {
    controller.set('content', []);
} 
```

看到[这个小提琴](http://jsfiddle.net/dz98R/3/)

### 编辑

您可以使用该`model`方法返回原始内容：

```
model: function () {
    var c = this.controllerFor('users');
    return c.get('content');
} 
```

这有点骇人听闻，但仍然.. :)

查看[更新的小提琴](http://jsfiddle.net/dz98R/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:01:07.930

这不是真正的余烬数据。新路由器自动设置控制器的内容属性。不要从控制器定义中设置内容，而是通过覆盖模型钩子来自定义将用于您的路由的模型。例如：

```
App.UsersRoute = Ember.Route.extend({
    model: function() {
      return ['mike', 'jen', 'sofia', 'greta']
    }
} 
```

我在这里修改了你的 jsfiddle：http: [//jsfiddle.net/WGYmg/](http://jsfiddle.net/WGYmg/)

# testing - OSGI容器中func的集成测试

> ID：14732530
> 
> 赞同：1
> 
> 时间：2013-02-06T15:22:56.127
> 
> 标签：testing, osgi, integration, fuseesb

我正在使用 FuseESB 运行我的应用程序，它本质上是 OSGI 容器（Felix），我想找到在集成模式下测试我的 OSGI 服务的方法（包括外部依赖项，如 DB、外部服务等）。首先想到的是能够将特定包运行到容器中，该容器涉及所有应用程序服务到运行此包中定义的测试。有人可以帮助解决这种问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T08:24:14.647

有不同的测试方法。由于 FuseESB 基于 Apache Karaf，您可以使用 apache karaf-pax-exam 工具进行测试，以自动测试完整的容器设置。在 OSGi 容器中测试 OSGi 包的另一种方法是直接使用 pax-exam。最后但并非最不重要的一点是，如果您只是想测试您可能会使用 pojosr 测试的服务查找功能，它非常适合测试，但它有局限性，尤其是在您依赖容器功能的情况下。也就是说，您将在以下页面找到信息：

[大同考试](http://team.ops4j.org/wiki/display/PAXEXAM3/Pax+Exam)

[阿帕奇卡拉夫](http://karaf.apache.org/)

[示例 Pax-Web 如何在其 iTests 中使用 pax-exam](https://github.com/ops4j/org.ops4j.pax.web/tree/master/itest)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:40:52.297

您可能会发现[http://www.javabeat.net/2011/11/how-to-test-osgi-applications/](http://www.javabeat.net/2011/11/how-to-test-osgi-applications/)作为各种 OSGi 测试选项的概述很有帮助。配置 PAX-Exam 以拉入您的整个 FuseESB 容器并让您的所有应用程序服务存在将涉及某些挑战，但是一旦您掌握了诀窍，它就会非常方便。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T15:59:23.520

bndtools 作为在容器内进行 JUnit 测试的可能性。

# sql - Service Broker 和数据库所有权不匹配

> ID：14732532
> 
> 赞同：3
> 
> 时间：2013-02-06T15:22:58.763
> 
> 标签：sql, sql-server, service-broker, ownership

我有一个 SQL Server 2008 R2 实现，为在同一个盒子上运行的 .Net/IIS 网站打开了 Service Broker。

当 global.asax application_startup 事件触发时它不会抛出错误，但是事件日志每秒都会被垃圾邮件发送：

> [dbo].[SqlQueryNotificationStoredProcedure-e6946263-93b8-445e-9d92-6fbd49a4b089]'在队列'XXXXXX.dbo.SqlQueryNotificationService-e6946263-93b8-445e-9d92-6fbd49a4b089'上运行输出以下内容：'数据库所有者SID记录在master 数据库与数据库“XXXXXXX”中记录的数据库所有者 SID 不同。您应该通过使用 ALTER AUTHORIZATION 语句重置数据库“XXXXXXX”的所有者来纠正这种情况。

此外，Service Broker 没有正确发送消息（对于 SqlCacheDependency）——它基本上不起作用。

我运行了以下查询并确定存在所有权不匹配：

```
SELECT
    SUSER_SNAME(d.owner_sid) AS OwnerName
    ,d.owner_sid AS OwnerSID
    ,dp.sid AS DboUserSID 
    ,SUSER_SNAME(dp.sid) AS DboUserMapping
FROM sys.databases AS d
JOIN sys.database_principals AS dp ON
    dp.name = 'dbo'
WHERE d.database_id = DB_ID(); 
```

> 所有者名称：usrAAAAA
> 
> OwnerSID: 0xAAAAA
> 
> DboUserMapping: 萨
> 
> DboUserSID: 0x01

我见过的大多数地方都建议我应该使用 ALTER AUTHORIZATION 将“sa”显式设置为数据库所有者。但是，我不确定它是否应该设置为`sa`or `usrAAAAA`，并且我不确定是否有任何可能的影响（我还能破坏什么其他东西？如果有的话）。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:29:12.823

将数据库所有者设置为“sa”是最有可能在不引起其他问题的情况下工作的方法，但它可能存在一些与安全相关的问题，如下所述：[是否有理由不将我的数据库所有者设置为 sa？](https://dba.stackexchange.com/questions/20641/are-there-reasons-why-i-should-not-set-my-db-owner-to-sa/20650#20650).

另请注意，根据您的应用程序要求和帐户的使用方式，如果您删除 'usrAAAAA' 作为 dbo，您可能需要将它们作为用户重新添加到数据库中，并且您可能还需要授予他们权限（例如“db_owner”）。如果是这种情况，并且您已将数据库设置为`TRUSTWORTHY`（Service Broker 相关用法通常要求），那么您可能应该将所有者设置为“usrAAAAA”并尝试使其正常工作。

# mysql - Pyramid、Python3、SQLAlchemy 和 MySQL

> ID：14732533
> 
> 赞同：1
> 
> 时间：2013-02-06T15:23:11.273
> 
> 标签：mysql, python-3.x, sqlalchemy, pyramid

我希望 Pyramid、Python3、SQLAlchemy 和 MySQL 在单台机器上运行良好。[以前有人问过](https://stackoverflow.com/a/14282839/)这个问题，但是已经有足够长的时间了，我希望答案已经改变了……

**问题：**

*什么驱动程序可以让 Python 3 Pyramid 应用程序通过 SQLAalchemy 与 MySQL 很好地对话？这甚至可能吗？*

我在这个项目中已经走了很远，认为切换数据库是一件简单的事情，现在我有点卡住了，降级到 Python 2.7 并不是我想要经历的事情。所以我的第二个问题是：

*如果不降级就无法很好地与 MySQL 对话，那么是否有 Python 3 可以使用的数据库（除了 SQLite）？*

或者最后，*我将如何克服下面“我尝试过的东西”部分中提到的任何问题？*

**我试过的东西：**

*PyMySQL*

我安装了 PyMySQL，我什至让它抱怨密码不正确和数据库丢失，所以它得到了正确的结果。但是当我尝试初始化我的数据库（使用`initialize_foo_db`）时，一切都变糟了：

```
2013-02-06 17:18:31,282 INFO  [sqlalchemy.engine.base.Engine][MainThread] b'SELECT DATABASE()'
2013-02-06 17:18:31,282 INFO  [sqlalchemy.engine.base.Engine][MainThread] ()
Traceback (most recent call last):
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/pool.py", line 719, in _do_get
return self._pool.get(wait, self._timeout)
File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/util/queue.py", line 137, in get
raise Empty
sqlalchemy.util.queue.Empty

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "../bin/initialize_mega_db", line 9, in <module>
load_entry_point('mega==0.0', 'console_scripts', 'initialize_mega_db')()
  File "/home/sheena/MegaCatalogue/env/mega/mega/scripts/initializedb.py", line 46, in main
Base.metadata.create_all(engine)
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/schema.py", line 2567, in create_all
tables=tables)
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/engine/base.py", line 2301, in _run_visitor
conn = self.contextual_connect(close_with_result=False)
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/engine/base.py", line 2492, in contextual_connect
self.pool.connect(), 
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/pool.py", line 224, in connect
return _ConnectionFairy(self).checkout()
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/pool.py", line 387, in __init__
rec = self._connection_record = pool._do_get()
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/pool.py", line 741, in _do_get
con = self._create_connection()
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/pool.py", line 188, in _create_connection
return _ConnectionRecord(self)
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/pool.py", line 273, in __init__
pool.dispatch.first_connect.exec_once(self.connection, self)
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/event.py", line 279, in exec_once
self(*args, **kw)
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/event.py", line 288, in __call__
fn(*args, **kw)
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/engine/strategies.py", line 168, in first_connect
dialect.initialize(c)
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/dialects/mysql/base.py", line 1999, in initialize
default.DefaultDialect.initialize(self, connection)
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/engine/default.py", line 177, in initialize
self._get_default_schema_name(connection)
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/dialects/mysql/base.py", line 1964, in _get_default_schema_name
return connection.execute('SELECT DATABASE()').scalar()
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/engine/base.py", line 1449, in execute
params)
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/engine/base.py", line 1628, in _execute_text
statement, parameters
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/engine/base.py", line 1691, in _execute_context
context)
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/SQLAlchemy-0.7.8-py3.2.egg/sqlalchemy/engine/default.py", line 333, in do_execute
cursor.execute(statement, parameters)
  File "/home/sheena/MegaCatalogue/env/local/lib/python3.2/site-packages/PyMySQL3-0.5-py3.2.egg/pymysql/cursors.py", line 108, in execute
query = query % escaped_args
TypeError: unsupported operand type(s) for %: 'bytes' and 'tuple' 
```

*我们的sql*

我尝试使用安装oursql`pip install -r file`

其中文件包含：

```
#oursql==0.9.3 but need special Python 3 build https://bugs.launchpad.net/oursql/+bug/1051512
https://launchpad.net/oursql/py3k/py3k-0.9.3/+download/oursql-0.9.3.zip
pyramid==1.3.4 
```

我得到了：

```
oursqlx/compat.h:13:19: fatal error: mysql.h: No such file or directory
compilation terminated.
error: command 'gcc' failed with exit status 1 
```

*myconnpy*

这安装没有错误，但我似乎无法找出我应该告诉 SQLAlchemy 寻找什么。`settings.ini`在我尝试过的相应文件中：

```
sqlalchemy.url = mysql+myconnpy://... 
```

以及一堆其他的东西。谷歌在这方面让我失望了......

**更新——进步的表象**

我已经成功安装了 oursql 构建依赖项：

```
sudo aptitude install python-pip libmysqlclient-dev 
```

然后我下载了oursql0.9.3并运行：

```
setup.py install 
```

输出是这样的：

```
cython not found, using previously-cython'd .c file.
running install
running build
running build_ext
running install_lib
copying build/lib.linux-x86_64-3.2/oursql.cpython-32mu.so -> /home/sheena/MegaCatalogue/env/lib/python3.2/site-packages
running install_egg_info
Writing /path/to/virtualenv/foo/lib/python3.2/site-packages/oursql-0.9.3.egg-info 
```

我打开了一个外壳，显然该模块不存在 - 无论如何都无法导入。但是由于某种原因，如果我说 help() 然后是模块，它就会被列出

# html - 仅在 IE 中将网站居中

> ID：14732534
> 
> 赞同：0
> 
> 时间：2013-02-06T15:23:11.153
> 
> 标签：html, css, internet-explorer

当尝试将[网站居中时](http://vandabaths.com/uk/gallery/)

我尝试使用

```
* { margin: 0 auto; padding: 0; text-align:center; }

#container {
    width: 960px;
    margin: 0 auto;
    text-align:left;              
} 
```

但问题是网站内的所有文本都居中对齐，请帮忙。我目前将其还原并取消了 text-align:center; 和文本对齐：左；从现场。请帮忙。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:25:24.860

```
#container {
    width: 960px;
    margin: 0 auto 0 auto;
    text-align:left;              
} 
```

这应该使容器居中，并且在您拥有整个网站的容器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:27:26.800

如果您使用ie 也可以将 div 居中`<!DOCTYPE html>` 。`margin: auto`

旁注。你的html代码搞砸了。你面前有一些*垃圾*`doctype`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:27:46.117

添加此规则

```
#container * { text-align:left; } 
```

并更改`#container`为：

```
#container { width: 960px; margin: 0 auto; } 
```

我建议`text-align:center;`从选择器中删除`all (*)`并更具体地对齐文本

# git - git 抓取历史

> ID：14732536
> 
> 赞同：0
> 
> 时间：2013-02-06T15:23:20.217
> 
> 标签：git

有没有办法查看执行历史`git fetch`（从远程更新）命令？
例如：
01 Jan 从 sha: 01abcdf 获取到 sha: bdf412

我的代码中有回归，我知道这种回归不存在的时间。
我的 git 图是直的，所以我想，如果知道我的 fetch 历史，我可以很容易地检测到带来这种回归的提交。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T15:26:29.883

如果要检测回归的来源，请使用`git bisect`

git bisect 进行二分法搜索，您必须指定一个好哈希和一个坏哈希，然后它会跳转到修订并询问您提交是好还是坏。

```
git bisect start
git bisect good SOME_HASH
git bisect bad SOME_OTHER_HASH
# Git will jump to a revision and let you test
git bisect good # Or bad, depending on if the bug is still here
git bisect bad ...
# And so on 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:32:06.767

据我所知，没有这样的日志（用于获取），但是还有其他方法可以找到引入错误的时间。

1.  使用[git rev-list](http://www.kernel.org/pub/software/scm/git/docs/git-rev-list.html)查看您实际签出的提交（这与简单地获取不同）。
2.  如果这没有帮助，请使用[git bisect](http://www.kernel.org/pub/software/scm/git/docs/git-bisect.html)，这是一个更强大和更复杂的工具。这将使提交提交变得更容易，直到您找到被破坏的提交。

# javascript - Kendo UI Web ListView 和外部模板以及如何呈现 HTML

> ID：14732539
> 
> 赞同：0
> 
> 时间：2013-02-06T15:23:28.557
> 
> 标签：javascript, kendo-ui

使用 Kendo UI Web ListView 和外部模板时，我想知道如何将文字 HTML 打印到浏览器。

这是我尝试过的。

```
<p class="responsibilities">${ #= ResponsibilitiesHtml # } </p>
<p class="responsibilities">#= ${ ResponsibilitiesHtml } #</p>
//This Encodes the HTML    
<p class="responsibilities"> ${ ResponsibilitiesHtml } </p> 
```

这只是作为无效模板失败。

他们所谓的文档位于此处

[http://docs.kendoui.c​​om/getting-started/framework/templates/overview](http://docs.kendoui.com/getting-started/framework/templates/overview)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:26:38.880

我不确定我理解你想要什么，但是`${variable}`使用时没有`#`。

如果你想执行一些 javascript，你会做这样的事情：

```
<p class="responsibilities">#= data.ResponsibilitiesHtml # </p> 
```

# cakephp - CakePhp 文件无法启动下载

> ID：14732547
> 
> 赞同：0
> 
> 时间：2013-02-06T15:24:02.497
> 
> 标签：cakephp, download

我是新来的，使用 cakephp，我使用 MediaViews 从服务器（pdf）下载文件，我在 cakephp.org、google 和 here 上关注媒体视图教程，但仍然有问题，当我点击链接时，我得到了查看，但没有文件，没有任何变化。(book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Views.html) 我的下载功能：

```
function download () {
$this->view = 'Media';
$params = array(
'id' => 'dino.pdf',
'name' => 'dino',
'extension' => 'pdf',
'download' => true,
'mimeType' => array('pdf' => 'application/pdf'),   
'path' => APP.'files'.DS
);
$this->set('dino',$params);
} 
```

我将 var_dump 用于parmas，结果：

```
 array(6) { ["id"]=> string(8) "dino.pdf" ["name"]=> string(4) "dino"   ["extension"]=> string(3) "pdf" ["download"]=> bool(true) ["mimeType"]=> array(1) { ["pdf"]=> string(15) "application/pdf" } ["path"]=> string(20) "D:\medium\app\files\" } 
```

我在磁盘上的文件：D:\medium\app\files\dino.pdf

任何可以帮助我的人，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:39:32.320

请阅读“正确”的文档。您在使用 2.x 时发布了 1.3 链接。

[http://book.cakephp.org/2.0/en/controllers/request-response.html#cakeresponse](http://book.cakephp.org/2.0/en/controllers/request-response.html#cakeresponse)

```
$this->autoRender = false;
$this->response->type('pdf');
$this->response->file($path . $filename, array('download' => true, 'name' => $name)); 
```

请注意，file() >= 2.3。您可能想要升级。

对于 <= 2.2，您也许可以这样做

```
$this->response->body($contentOfPdf);
$this->response->download($name); 
```

# c# - 在Gridview中显示长表记录以及与List结合的各种表单控件

> ID：14732549
> 
> 赞同：0
> 
> 时间：2013-02-06T15:24:08.970
> 
> 标签：c#, .net, winforms, user-interface

我的 BLL 将一些东西的列表返回到我的 UI：

```
List<ProductionParamater> l = BLL.GetProductionParameters(); 
```

该记录包含大约 42 个字段。其中 5 个我想在网格中显示它们，而所有其他的我想在网格下方以类似形式的外观显示它们。我还需要能够编辑它们并将更改的列表行发送回 bll 进行更新。

我当前的结构使用带有数据读取器的数据访问层来获取数据。BLL 执行 dal 方法，应用所需的逻辑并将结果返回到 UI（Windows 窗体）。

我计划挂钩网格事件并在每个事件触发时更新表单控件的其余部分。此外，根据更改，我会将列表项发送回 bll 以进行更改。

这是正确的方法吗？

# c++ - 使用 std::ends() 和 freeze(false)

> ID：14732550
> 
> 赞同：1
> 
> 时间：2013-02-06T15:24:10.610
> 
> 标签：c++, stream, std

我正在查看一些遗留代码，并且有相当多的`stringstream`使用。到目前为止，该代码通常从各种类型生成消息。除了在某些情况下执行以下操作之外：

```
 std::ostringstream f1;
   f1 << sDirectory << mFileName << sFileExtension << '\0'; 
```

和其他人做的（只是说明）

```
 std::ostringstream f1;
   f1 << sDirectory << mFileName << sFileExtension << std::ends; 
```

我相信这些调用是因为它进一步访问`f1.str().c_str()`并需要空终止它。

这些电话有什么区别吗？我从[http://en.cppreference.com/w/cpp/io/manip/ends](http://en.cppreference.com/w/cpp/io/manip/ends)看到 std::ends 不刷新，std::ends 在不同平台（Linux/Windows/Mac）上是否不同？我应该更喜欢一个吗？

除此之外，我读到应该`freeze(false)`在范围的后面（`str()`使用后）调用字符串流以允许释放缓冲区（[http://en.cppreference.com/w/cpp/io/ostrstream/freeze](http://en.cppreference.com/w/cpp/io/ostrstream/freeze)）。再次（可能我误读或误解了）但没有调用`freeze(false)`所以这是否表明上面的每个流都在泄漏？

NB FYI 这是 Visual Studio 2005/Windows 7，但我不知道这是否有任何裸露。

抱歉，如果我很密集...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:58:39.303

`std::ends`被定义为具有以下效果：

> 在输出序列中插入一个空字符：调用`os.put(charT())`。

当`charT`is时`char`，它的值被初始化为值为 0，相当于字符字面量`\0`。因此，通常是什么时候`charT`，`char`两行代码完全相同。

但是，`std::ends`即使流的字符类型不是 ， using 也能正常工作`char`。

# java - 实现比较方法的规则

> ID：14732551
> 
> 赞同：5
> 
> 时间：2013-02-06T15:24:11.950
> 
> 标签：java, compare, rules, comparator, compareto

像 compareTo 一样，必须是“自反的、反对称的和传递的”，是否有任何规则来实现比较方法？谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-06T15:26:53.630

从[比较器 API](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html#compare%28T,%20T%29)：

> 1.  实现者必须确保所有 x 和 y 的 sgn(compare(x, y)) == -sgn(compare(y, x))。（这意味着当且仅当 compare(y, x) 抛出异常时 compare(x, y) 必须抛出异常。）
> 2.  实现者还必须确保关系是可传递的： ((compare(x, y)>0) && (compare(y, z)>0)) 意味着 compare(x, z)>0。
> 3.  最后，实现者必须确保 compare(x, y)==0 意味着所有 z 的 sgn(compare(x, z))==sgn(compare(y, z))。
> 4.  通常是这样，但并不严格要求 (compare(x, y)==0) == (x.equals(y))。一般来说，任何违反此条件的比较器都应清楚地表明这一事实。推荐的语言是“注意：这个比较器强加了与等于不一致的排序。”

# objective-c - 来自服务器的空数据，在非空条件下？

> ID：14732555
> 
> 赞同：-2
> 
> 时间：2013-02-06T15:24:25.477
> 
> 标签：objective-c

我从服务器收到了回复：

```
 [NSURLConnection
     sendAsynchronousRequest:request
     queue:[[NSOperationQueue alloc] init]
     completionHandler:^(NSURLResponse *response,
                         NSData *data,
                         NSError *error)
     {

         if ([data length] >0 && error == nil)
         {
             NSLog(@"DATA1: %@",data);
             NSString *content;
             content = [NSString stringWithUTF8String:[data bytes]];
             NSLog(@"DATA2: %@",content); 
```

这里有些奇怪。第二个`NSLOG`向我展示了一个`null`数据 - 但如果数据为空，他怎么能通过`if statement`？第一个日志告诉我：`<636f6e66 69726d65 64>`。

我不得不说，有时它确实有效！它以某种方式取决于价值观...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:28:52.273

因为使用第一个日志，您正在打印`NSData`实例，而使用第二个日志，您`NSString`想要从数据中生成。但是如果数据不是有效的 UTF-8（可能是这种情况，因为它不是 NUL 终止的，并且`stringWithUTF8String:`需要一个 NUL 终止的字符串，所以它不会在最后停止并且它可能会读取垃圾），那么它返回`nil`。

你想要的是：

```
content = [[[NSString alloc] initWithBytes:data.bytes length:data.length encoding:NSUTF8StringEncoding] autorelease]; 
```

# jsf - 素面： 问题在于“p:ajax event="rowDblselect" listener="#{companyBean.update()}" ...”，当我第一次双击时，方法“update()”被调用一次（完美！），但 问问题 问问题 2013-02-06T15:24:34.243 3259 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 问题在于“p:ajax event="rowDblselect" listener="#{companyBean.update()}" ...”，当我第一次双击时，方法“update()”被调用一次（完美！），但之后当我按下命令按钮“button1”并再次双击组件时，“update()”被调用了 2 次。当我再重复一次时，“update()”被调用了 3 次………………这很奇怪！我认为当我使用 commandButton 更新数据表时，ajax 事件会自行保持升级。我不知道（？）...有人可以帮我解决吗？ <h:panelgrid id="panel" columns="5"><p:commandbutton id="button1" value="Search" actionlistener="#{ companyBean.search()}" update="dataTable"></p:commandbutton></h:panelgrid><p:datatable id="dataTable" var="companyTO" value="#{companyBean.companiesTO}" selection="#companyBean.selectedCompanyTO}" rowkey="#{companyTO}" emptymessage="" selectionmode="single"><p:ajax event="rowDblselect" listener="#{companyBean.update()}" immediate="true" process="@this"><p:column>... <p:datatable>obs：当我删除“update="dataTable"时，"event="rowDblselect"" 工作正常，只调用一次方法。所以，问题出在更新上。 我在这里发现了同样的问题：https ://stackoverflow.com/questions/11904556/updating-datatable-with-own-datamodel-calls-method-more-and-more 是或否，取决于你所说的聪明和/或容易。但是（见下文）我猜你会说“不”。 405 Method Not Allowed是一个 HTTP 状态代码，默认情况下 PHP 根本不会返回这些（例如，如果您通过 apache 发送默认的 200 标头）。 标准 PHP 中没有“控制器”，因此您无需期待任何回报。您可以使用或构建一个框架，如果缺少参数，它可能会返回一些东西。 如果您要自己实现它，则返回一个像这样的标题。 header('HTTP/1.1 405 Method Not Allowed'); jsfprimefacesdatatable 4 1 回答 1 This answer is useful 1 尝试删除事件的immediate属性并添加属性：ajaxcommandbutton process="@this" partialSubmit="true" ajax="true" 像这样的东西： 事件： <p:ajax event="rowDblselect" listener="#{companyBean.update()}" process="@this" partialsubmit="true">按钮： <p:commandbutton id="button1" value="Search" actionlistener="#{ companyBean.search()}" update="dataTable" process="@this" partialsubmit="true" ajax="true">于 2013-12-27T16:14:16.700 回答 Related 2 c# - 通过单击两个按钮从.aspx网页获取数据c#.net 1 grid - 我怎样才能拥有可以在 GXT 3 中充当容器的单元格网格？ 7 sql - 如何从 SQL Server 中的日期获取月份编号（不是月份名称）？ 1 php - 防止 XSS - 用户提供部分 url 1 objective-c - 使用块发送 AsynchronousRequest - 正确的方式 0 asp.net-mvc-3 - 关于在 mvc3 中使用缓存 1 sql - 如何将此不可扩展的查询转换为动态列的窗口函数？ 1 eclipse - vm参数中的eclipse斜线 1 android - Proguard 的 Admob 问题 3 ios - 推送一个新的 ViewController 并从 NavigationStack 中弹出最后一个 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</p:commandbutton></p:ajax></p:datatable></p:column></p:ajax></p:datatable>

> ID：14732556
> 
> 赞同：3
> 
> 时间：
> 
> 标签：jsf, primefaces, datatable

问题在于“p:ajax event="rowDblselect" listener="#{companyBean.update()}" ...”，当我第一次双击时，方法“update()”被调用一次（完美！），但之后当我按下命令按钮“button1”并再次双击组件时，“update()”被调用了 2 次。当我再重复一次时，“update()”被调用了 3 次………………这很奇怪！我认为当我使用 commandButton 更新数据表时，ajax 事件会自行保持升级。我不知道（？）...有人可以帮我解决吗？

```
<h:panelGrid id="panel" columns="5">
  <p:commandButton id="button1"  value="Search" actionListener="#{                     
     companyBean.search()}" update="dataTable"/>          
</h:panelGrid> 
```

```
<p:dataTable id="dataTable" var="companyTO" value="#{companyBean.companiesTO}"                      
  selection="#companyBean.selectedCompanyTO}" rowKey="#{companyTO}"                   
  emptyMessage="" selectionMode="single" >   

 <p:ajax event="rowDblselect" listener="#{companyBean.update()}" immediate="true"   
        process="@this" />

 <p:column >

     ...
<p:dataTable> 
```

obs：当我删除“update="dataTable"时，"event="rowDblselect"" 工作正常，只调用一次方法。所以，问题出在更新上。

我在这里发现了同样的问题：[https ://stackoverflow.com/questions/11904556/updating-datatable-with-own-datamodel-calls-method-more-and-more](https://stackoverflow.com/questions/11904556/updating-datatable-with-own-datamodel-calls-method-more-and-more)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-27T16:14:16.700

尝试删除事件的`immediate`属性并添加属性：`ajax``commandbutton`

```
process="@this" partialSubmit="true" ajax="true" 
```

像这样的东西：

事件：

```
 <p:ajax event="rowDblselect" listener="#{companyBean.update()}" process="@this" partialSubmit="true" /> 
```

按钮：

```
 <p:commandButton id="button1"  value="Search" actionListener="#{                     
         companyBean.search()}" update="dataTable" process="@this" partialSubmit="true" ajax="true"/> 
```

# bash - sed 新手 - 解析文本文件以获取数据

> ID：14732561
> 
> 赞同：0
> 
> 时间：2013-02-06T15:24:50.497
> 
> 标签：bash, shell, sed

假设我有一个这样的字符串

```
这里有一些随机词 25 ms

```

我想提取 25 并将其放入另一个文本文件中。我该怎么做？

基本上，每一行的开头都有一些单词，最后是一个浮点小数，后面是**ms**。25只是作为例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:37:56.023

仅`awk`打印倒数第二个字段：

```
$ awk '{print $(NF-1)}' <<< "Some random words here 25 ms" 
25 
```

在[积极的前瞻](http://www.regular-expressions.info/lookaround.html)`grep`中：

```
grep -Po "[0-9.]+(?= ms)"  <<< "Some random words here 25 ms" 
25 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:26:41.453

25应该去哪里？你完成你的问题了吗？

根据您问题的当前版本。所以 25 不是随机的。只是

```
echo "25" > another.file 
```

如果 25 是随机数，则始终位于该行的末尾：

```
grep -oE '[0-9]+$' <<<" Some random words here 25" > another.file 
```

**编辑**

```
grep -Po '\d+(?= ms)' <<<"Some random words here 25 ms" > another.file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:28:33.870

```
sed 's/[^0-9\. ]*//g' input.txt > output.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T15:33:07.190

我会在`ms`.

```
sed 's/.* \([0-9.]*\) ms$/\1/' input.txt > output.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T01:31:54.333

如果有些行最后没有 ms 那么你也可以这样做

`awk '$NF ~ /ms/{print $(NF-1)}' temp.txt`

它只会选择那些最后一个字段有的行`ms`

# html - 在单独的行上显示内联内容

> ID：14732562
> 
> 赞同：1
> 
> 时间：2013-02-06T15:24:50.790
> 
> 标签：html, css

我有一个简单的内容块：

```
<div>
    <img src="/img/sample.png" alt="Sample image">
    <span class="colored-text">Company name</span>
    <em>Address</em>
</div> 
```

我希望“公司名称”和“地址”位于不同的行。

现在我有几个可用的选项：

制作额外`<div>`的 s，在and`<br/>`标签之间添加标签，也许还有其他一些解决方案。添加此类功能的正确方法是什么？`<span>``<em>`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T15:28:13.487

你应该做在语义上最有意义的事情。通常，`div`标签旨在表示页面中的某种 DIVision。如果您只是列出一个地址，那么这样做是没有意义的。我个人会`<br />`在行尾使用 a 来添加换行符，而不会对您的内容做出任何语义声明。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T15:39:30.293

您只能使用 CSS 并使`em`标签在自己的行中中断：

```
div em {display:block} 
```

或者

```
div em {float:left;clear:both} 
```

无论哪种方式，地址都会断线，您不必触摸您的`HTML`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T15:30:59.487

有多种选择。

```
<div>
    <img src="/img/sample.png" alt="Sample image">
    <span class="colored-text">Company name</span>
    <br />
    <em>Address</em>
</div> 
```

或者

```
<div>
    <img src="/img/sample.png" alt="Sample image">
    <p class="colored-text">Company name</p>
    <p><em>Address</em></p>
</div> 
```

或者

```
<ul>
        <li><img src="/img/sample.png" alt="Sample image">
        <span class="colored-text">Company name</span></li>
        <li><em>Address</em></li>
    </ul> 
```

还有更多，包括列出的变体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T15:31:20.400

遵循 CSS 可以解决问题：

```
span.colored-text{ display:block; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T15:32:30.607

在每行的末尾添加一个中断。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T15:51:31.477

**可能性 1（没有 CSS）：http:** [//jsfiddle.net/mnnLG/1/](http://jsfiddle.net/mnnLG/1/)

用于跳到`<br />`新行。

**可能性 2（使用 CSS）：http:** [//jsfiddle.net/mnnLG/2/](http://jsfiddle.net/mnnLG/2/)

使用`display:block`CSS 使内联元素具有块属性。

**另一种可能性：**

用块类型元素包装每个元素。它可以是`ul/ol`->`li`组合，也可以是一个简单的`div`元素。

# asp.net - 将预编译的网络应用程序转换为“普通”网络应用程序

> ID：14732567
> 
> 赞同：3
> 
> 时间：2013-02-06T15:25:12.160
> 
> 标签：asp.net, .net, visual-studio, compilation

我有一个关于预编译网络应用程序的快速问题：

我最近接手了一个别人做的项目，这是一个预编译的网络应用程序。这意味着它当然没有 App_Code 文件夹。由于这个项目的性质，无论如何我想把我的代码放在服务器上。

我不能只添加代码，因为我会收到一个异常，指出不允许 App_Code 文件夹，因为它是一个预编译的 Web 应用程序。如果我删除文件“PrecompiledApp.config”，那么我的应用程序就会崩溃。

那么将预编译的 Web 应用程序转换为按需编译的 Web 应用程序的正确步骤是什么？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:34:11.000

我可以在 VS2010 中使用它。

转到您的 Web 应用程序设置并选择打包/发布 Web 选项卡。有一个下拉菜单可能默认为“仅运行此应用程序所需的文件”。如果我使用它，它只会将编译后的 DLL 发布到服务器和 Web 文件，但不会发布任何代码。

如果我将其更改为“项目文件夹中的所有文件”，那么我将得到所有内容 - 例如，我的控制器的所有 C# 代码。

当然，您是否希望您的生产代码在服务器上是一个不同的问题，而且您还会获得所有 VS 解决方案文件和类似的东西，所以它看起来很混乱。

# button - 第二次单击时调用的按钮操作

> ID：14732577
> 
> 赞同：1
> 
> 时间：2013-02-06T15:25:34.050
> 
> 标签：button, jsf-2

我有 2 个命令按钮和一个选择一个菜单。我需要根据选定的按钮和菜单中当前选定的项目调用 bean 方法。

```
<h:form id="form1">
    <h:outputLabel value="menu:" /> 
    <h:commandButton  value ="en" action="#{bean.exec}" >
        <f:setPropertyActionListener target="#{bean.menu}" value='en' />
    </h:commandButton>
    <h:commandButton value ="fr" action="#{bean.exec}" >
        <f:setPropertyActionListener target="#{bean.menu}" value='fr' />
    </h:commandButton>      

    <h:outputLabel value="id:" />
    <h:selectOneMenu value="#{bean.id}">
        <f:selectItems value="#{bean.idlist}" />
        <f:ajax listener="#{bean.exec}" render ="form1" />
    </h:selectOneMenu>
</h:form> 
```

但是，虽然第一个按钮更新了我的属性并调用了操作方法，但第二个按钮给了我以下消息

> 警告：FacesMessage(s) 已入队，但可能尚未显示

并且视图不会在第一次单击时更新。但是，在第二次单击时，属性会立即更新，视图也会更新。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:49:11.540

> 我确实看到了日志，但是我不明白错误：这是它显示的内容：form1：j_idt124：验证错误：值无效什么值和在哪里？

`<h:message>`如果您为所有输入组件提供一个 ID 并按如下方式附加到它们，则更容易识别该值：

```
<h:outputLabel for="id" value="id:" />
<h:selectOneMenu id="id" value="#{bean.id}">
    <f:selectItems value="#{bean.idlist}" />
    <f:ajax listener="#{bean.exec}" render ="form1" />
</h:selectOneMenu>
<h:message for="id" /> 
```

这样，您将获得`form1:id`标签而不是`form1:j_idt124`. 或者，您还可以指定`label`输入组件的：

```
<h:selectOneMenu label="id" ... /> 
```

至于“值无效”错误，当在处理表单提交过程中选择的值与任何一个可用值不匹配时，您将收到此错误。`#{bean.idlist}`当处理表单提交期间后面的属性发生不兼容的更改时，就会发生这种情况。当 bean 是请求范围时，这又会发生。将 bean 放在视图范围内应该可以修复它。

### 也可以看看：

*   [验证错误：值无效](https://stackoverflow.com/questions/9069379/validation-error-value-is-not-valid/9069660#9069660)

# php - 将带有括号的javascript对象作为键传递给PHP

> ID：14732578
> 
> 赞同：0
> 
> 时间：2013-02-06T15:25:37.247
> 
> 标签：php, javascript, arrays, object

假设我在 JavaScript 中有这个对象，它是这样构建的：

```
var obj = {};
var fields = ['table_name[field_name]', 'tale_name[field_name_2]']

for(var i; i < fields.length; i++){
    obj[fields[i]] = someBulkOfData;
} 
```

登录控制台时，obj会输出

```
{
   table_name[field_name]   : {...},
   tabke_name[field_name_2] : {...}
} 
```

这一切正常，直到我通过 jQuery.ajax() 通过 PHP 传递对象。

当我在 PHP 中收到我的请求时，数组如下所示：

```
[
    ['table_name[field_name']   => ...,
    ['table_name[field_name_2'] => ...
] 
```

所以这里发生的事情是在发送 AJAX 请求和接收 PHP 中的数据之间的某个地方，每个键的最后一个方括号都消失了。

有人可以向我解释为什么会发生这种情况，以及是否有一种巧妙的方法来解决这个问题？

我有一个解决方案的标准，那就是我不能更改键（例如'table_name\[field_name\]'）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:41:18.563

你试过用`$.serialize()`吗？

使用 serialize 将 javascript 对象转换为可以通过 AJAX 轻松传输的字符串 - 如下所示：

```
var ajaxableString = $(obj).serialize(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:40:57.497

您可以通过重组 JS 对象来解决该问题：

```
{
  table_name : {
    field_name_1 : {...},
    field_name_2 : {...}
  },
  another_table : {
    ...
  }
} 
```

这样你就可以避免那种奇怪的命名约定。

另外，我怀疑你对我们隐瞒了什么。在 this 和 PHP 之间有一些东西（一个操作），可能在你的 AJAX 代码的某个地方，你没有告诉我们。也许您正在将此对象序列化为一个字符串并将该字符串作为一个查询参数传递给服务器。这个序列化步骤可能是原因。

但为了确定，您可以检查调试器的 Net 部分并检查请求标头是否发送的数据格式完美。

据我所知，[`jQuery.ajax`](http://api.jquery.com/jQuery.ajax/)接受一个 JS 对象作为数据，并将其完美地转换为查询字符串。这样，您无需手动对其进行序列化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:01:06.693

借助@fab，解决方案是使用 JSON 对数据进行编码：

```
$.ajax({
    data : {
        obj:JSON.stringify(obj)
    },
    ...
}); 
```

在 PHP 中：

```
json_decode($_REQUEST['obj']); 
```

这将输出一个完美的 stdClass 对象，并保留键。

# php - codeigniter 中脚本的最佳方式

> ID：14732580
> 
> 赞同：1
> 
> 时间：2013-02-06T15:25:47.693
> 
> 标签：php, codeigniter, scripting

在 CodeIgniter 中，我经常有许多项目固有的脚本，例如：

```
 <?php    
// Load many things
$this->load->model('news_model');
$this->load->helper('utility_helper');
$news = $this->news_model->get_basic_news();

// For moment no news
$view_datas['news']['check'] = false;

if ($news) {

    $view_datas['news'] = array(

        'check' => true,
        'news' => _humanize_news($news)

        );
}
?> 
```

该脚本用于不同的控制器，目前我创建了一个`scripts`文件夹并像这样导入它：`include(APPPATH . 'scripts/last_news.php');`我很确定这不是处理这个问题的最佳方法。对此有什么想法吗？

**更新：** 答案中给出的解决方案是使用 a`helper`或 a `library`。让我们想象一下我之前的代码的重写：

```
class Scripts {

public function last_news() {
    // Load many things to use
    $CI =& get_instance();
    $CI->load->model('news_model');
    $CI->load->model('utility_helper');

    $news = $CI->news_model->get_basic_news();

    // Avoid the rest of code
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:27:20.470

只需创建一个新库并根据需要加载该库吗？例如

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Newclass {

    public function get_news($limit)
    {
      //return news
    }
}

/* End of file Newsclass.php */ 
```

在您的控制器中

```
$this->load->library('newsclass');
$this->newsclass->get_news($limit); 
```

或者另一个想法是创建辅助函数。

# c++ - 如何使用 boost::is_any_of 和 boost::replace_all_copy

> ID：14732585
> 
> 赞同：4
> 
> 时间：2013-02-06T15:25:56.610
> 
> 标签：c++, boost

我正在尝试使一段简单的代码与`boost::is_any_of`and一起使用`boost::replace_all_copy`。片段如下：

```
std::string someString = "abc.def-ghi";
std::string toReplace = ".-";
std::string processedString = boost::replace_all_copy(someString, boost::is_any_of(toReplace), " "); 
```

但是，我收到了一个编译器错误，该错误太长，无法粘贴到此处。有这两个功能经验的人可以指出我的错误吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T16:45:49.983

我不认为你不能。[的三个参数版本`boost::replace_all_copy`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost/algorithm/replace_all_copy.html)接受输入字符串、替换字符串和要搜索的字符串。返回的是`boost::is_any_of`谓词函子。

你可能想要的是[`boost::replace_if`](http://www.boost.org/doc/libs/1_46_0/libs/range/doc/html/range/reference/algorithms/mutating/replace_if.html)：

```
#include <boost/algorithm/string.hpp>            // for is_any_of
#include <boost/range/algorithm/replace_if.hpp>  // for replace_if
#include <string>
#include <iostream>

std::string someString = "abc.def-ghi";
std::string toReplace = ".-";
std::string processedString =
   boost::replace_if(someString, boost::is_any_of(toReplace), ' ');

int main()
{
    std::cout << processedString;
} 
```

这会修改原始文件，因此如果您需要保留它，可以使用[`boost::replace_copy_if`](http://www.boost.org/doc/libs/1_46_0/libs/range/doc/html/range/reference/algorithms/mutating/replace_copy_if.html)：

```
#include <boost/algorithm/string.hpp>
#include <boost/range/algorithm/replace_copy_if.hpp>
#include <string>
#include <iostream>
#include <iterator>    // for back_inserter

std::string someString = "abc.def-ghi";
std::string toReplace = ".-";

int main()
{
    std::string processedString;
    boost::replace_copy_if(someString,
        std::back_inserter(processedString), boost::is_any_of(toReplace), ' ');
    std::cout << processedString;
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T16:44:08.190

我对那个特定方法并不太熟悉，但它似乎`replace_all_copy`只需要一个替换字符串而不是`is_any_of`.

[浏览字符串算法](http://www.boost.org/doc/libs/1_53_0/doc/html/string_algo/quickref.html#idp163449456)的其他选项，我注意到有一个正则表达式版本也可以工作：

```
#include <iostream>                                                                                                                                                                  
#include <boost/algorithm/string.hpp>                                                                                                                                                
#include <boost/algorithm/string/regex.hpp>                                                                                                                                          

int main(int argc, char** argv) {                                                                                                                                                    
    std::string someString = "abc.def-ghi";                                                                                                                                          
    std::cout << someString << std::endl;                                                                                                                                            
    std::string toReplace = "[.-]"; // character class that matches . and -                                                                                                          
    std::string replacement = " ";                                                                                                                                                   
    std::string processedString =                                                                                                                                                    
        boost::replace_all_regex_copy(someString, boost::regex(toReplace), replacement);                                                                                             
    std::cout << processedString << std::endl;                                                                                                                                       
    return 0;                                                                                                                                                                        
} 
```

输出：

```
abc.def-ghi
abc def ghi 
```

这确实需要链接到 boost 正则表达式库。就我而言，我使用：

`g++ -L/usr/local/Cellar/boost/1.52.0/lib -lboost_regex-mt main.cpp`

# linux - Linux：如何将整个数据包发送到另一台主机上的特定端口？

> ID：14732586
> 
> 赞同：2
> 
> 时间：2013-02-06T15:26:06.957
> 
> 标签：linux, networking, tcp, network-programming, libpcap

我已经使用 libpcap 捕获了一个 TCP 数据包，我想将整个数据包（不修改它）发送到另一台主机上的特定端口（它有另一个嗅探器监听该端口）。

有什么办法可以做到这一点吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:31:33.727

您没有指定您正在使用哪种编程语言以及到目前为止您尝试过的内容。

将 IP 地址字段更改为目标 IP，将 TCP 端口字段更改为您想要的端口。不要忘记更新两个校验和。

![IP数据包格式](../Images/a78044cc9deb95cf2b6f9be0bef27a49.png) ![TCP 数据包格式](../Images/d1f66c4a742a0560049b6a27763d834f.png)

如果您想要的是 TCP 转发，[Linux 内核已经为您完成了这项工作](https://serverfault.com/questions/140622/how-can-i-port-forward-with-iptables)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:55:35.763

netcat 可能在这种情况下工作，虽然我认为你可能必须重建标题，但没有尝试过。

[如何在 netcat 中转义十六进制值](https://stackoverflow.com/questions/1553572/how-to-escape-hex-values-in-netcat)

另一种选择是使用 iptables 将数据包发送到另一个嗅探器，同时仍然在你的包分析器中捕获它

[http://www.bjou.de/blog/2008/05/howto-copyteeclone-network-traffic-using-iptables/](http://www.bjou.de/blog/2008/05/howto-copyteeclone-network-traffic-using-iptables/)

另一种选择是使用端口镜像，这取决于所使用的交换机有几个不同的名称，但它允许您将交换机上的端口设置为本质上是集线器。

我认为如果你不能让 netcat 工作，你最好的选择是使用 iptables，你甚至可以添加过滤器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T23:19:39.850

我不知道您是否必须使用 C，但即使您这样做，我还是建议您首先使用 Python/Scapy 构建原型。

使用 scapy，步骤如下：

1.  使用 rdpcap() 读取 pcap 文件。
2.  获取目标 IP 地址和 TCP 目标端口号 (pkt.getlayer(IP).dst, pkt.getlayer(TCP).dport) 并将其保存为所需格式的字符串（例如 payload = "192.168.1.1: 80 英寸）。
3.  更改数据包的目标 IP 地址和目标端口号，以便侦听特定端口的其他主机可以接收它。
4.  在数据包顶部添加有效负载（pkt = pkt / 有效负载）
5.  发送数据包 (sendp(pkt, iface='eth0'))
6.  您将不得不剖析另一台主机上的数据包以获取有效负载。在不确切知道原始数据包中 TCP 层顶部的内容的情况下，我无法为此提供准确的代码，但应该相对简单。

使用 Python/Scapy 这一切都非常简单，但我预计使用 C 会更困难，必须手动计算正确的偏移量和校验和等。祝你好运，我希望这会有所帮助。

# java - Robocode：我在哪里可以获得引擎的 JAR 文件？

> ID：14732588
> 
> 赞同：-1
> 
> 时间：2013-02-06T15:26:16.383
> 
> 标签：java, jar, robocode

我希望在比赛中自动运行一系列 Robocode 坦克，并接收他们的分数和其他信息。我相信我需要 Robocode 引擎，并且想知道在哪里可以获得 JAR 文件以便在 Java 中使用它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:14:33.793

我已经计算出我需要使用这些方法的 Jar 文件实际上位于已安装的 Robocode 客户端的 libs 文件夹中。它的名字是robocode.jar。它只需要作为外部库添加到我的项目的构建路径中

# javascript - 传输原始二进制文件而不是 JSON

> ID：14732591
> 
> 赞同：2
> 
> 时间：2013-02-06T15:26:23.020
> 
> 标签：javascript, json, binary, typed-arrays

我们都知道，在客户端和服务器（确切地说是 Web 浏览器和 Web 服务器）之间发送**原始二进制**而不是**JSON**可以大大减少带宽的使用并提高传输数据的速度，但是正如我们所见，所有流行的基于 Web 的系统仍然使用**JSON**。*Gmail、Google Plus、Facebook、Linkedin 和...*
现在，我们使用`Typed Array`JavaScript 可以真正轻松快速地解析二进制数据。

目前我正在开发一个基于网络的金融系统，我认为使用**原始二进制文件使系统比****JSON**快得多。

我想知道**为什么**那些流行的基于 Web 的系统不使用**原始二进制文件**而不是**JSON**在客户端和服务器之间传输数据？有什么我不知道的技术原因吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T15:30:08.597

Typed Arrays 是最近才出现的，历史上并没有被许多浏览器支持。当您希望尽可能多的人使用您的产品时，您将选择最常见的分母。

这并不是说这些系统将来不会转向使用这种方法，而是在得到大多数人的支持之前不会。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T15:31:31.033

字节顺序问题将是原因之一。灵活性是另一个，二进制你的数据包格式是固定的，所以你需要第一次把它弄好，像 JSON 这样的东西没有严格的字段顺序，你可以添加新的而不破坏兼容性（不适用于删除它们）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T15:36:27.463

浏览器兼容性（主要是 IE）。查看 Caniuse 类型数组：[http ://caniuse.com/typedarrays](http://caniuse.com/typedarrays)

# css - Primefaces：文件上传游标问题

> ID：14732595
> 
> 赞同：0
> 
> 时间：2013-02-06T15:26:27.440
> 
> 标签：css, jsf, file-upload, primefaces, cursor

当我将鼠标光标放在 FileUpload 按钮上时，会发生这种情况：**指针类型仅显示在按钮的侧面，但当它位于标签区域上时，光标变为 text 类型**。默认的 FileUpload CSS 似乎很好，而且我还没有找到任何关于标签的样式选项或可能导致一些摩擦的类似内容。

![在此处输入图像描述](../Images/8010ea4c112312b64124f226f0cf583e.png)

**文件上传默认 CSS**

```
.fileupload-buttonbar .ui-button input {
  position: absolute;
  top: 0;
  right: 0;
  margin: 0;
  border: solid transparent;
  border-width: 0 0 100px 200px;
  opacity: 0;
  filter: alpha(opacity=0);
  -o-transform: translate(250px, -50px) scale(1);
  direction: ltr;
  cursor: pointer;
  z-index: 5000;
} 
```

**XHTML**

```
<p:fileUpload style="pointer:cursor !important"
    fileUploadListener="#{controller.doSomething}"
    mode="advanced" label="Examinar"
    auto="true" 
/> 
```

我尝试覆盖 CSS 但没有更改。

**注意：**此行为仅发生在**Chrome**（默认光标）和**Firefox**（文本光标）中。在 IE 上运行良好。

我已经阅读了有关数据表组件的一些游标问题，但到目前为止，我还无法摆脱这种奇怪的不便。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:00:53.837

这应该让您开始使用 Chrome：

```
input[type="file"]::-webkit-file-upload-button { cursor: pointer; } 
```

在我的脑海中，我认为后备策略适用于 Firefox？：

```
input[type="file"] { cursor: pointer; cursor: hand; } 
```

您可能想用 CSS 标记您的答案，因为这是浏览器样式的“东西”。

# spring - 应用@valid之前的spring mvc进程对象

> ID：14732598
> 
> 赞同：4
> 
> 时间：2013-02-06T15:26:31.100
> 
> 标签：spring, bean-validation, hibernate-validator

我有一个弹簧 mvc 控制器，如下所示

```
@RequestMapping(value="/new", method=RequestMethod.POST)
public String createBooking(@Valid Booking booking, BindingResult bindingResult, Model model, Principal principal)
{
    if(bindingResult.hasErrors()) {
        return "booking/edit";
    }
    //Store Booking in db...
    ... 
```

问题是我从 POST 获得的 Booking 对象是由 Spring 构造的，但无法填充验证器所需的属性之一，因为该属性不存在于表单中。所以我的问题是我有没有办法在预订被@Valid 标签处理程序处理以添加这个必需的属性之前拦截它？

干杯! NFV

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-06-02T13:53:56.063

`@Valid`在将触发之前，有两种方法可以修改模型属性对象：

1.  移除`@Valid`并自动连接验证器并手动触发验证器：

```
class MyController {

  private final Validator validator;

  class MyController(Validator validator) {
    this.validator = validator;
  }

  @PostMapping("/new")
  public String createBooking(Booking booking, BindingResult bindingResult, Model model, Principal principal) {
    // edit booking here

    validator.validate(booking, result)

    // original method body here
  }
} 
```

2.  装饰默认验证器并在装饰的验证器内预处理`booking`对象。

```
class MyController {

  @InitBinder
  public void initBinder(WebDataBinder binder) {
      binder.setValidator(new PreProcessBookingValidator(binder.getValidator()));
  }

  @PostMapping("/new")
  public String createBooking(@Valid Booking booking, BindingResult bindingResult, Model model, Principal principal) {
    ...
  }

  private static class PreProcessBookingValidator implements Validator {
        private final Validator validator;

        public PreProcessBookingValidator(Validator validator) {
            this.validator = validator;
        }

        @Override
        public boolean supports(@Nonnull Class<?> clazz) {
            return validator.supports(clazz);
        }

        @Override
        public void validate(@Nonnull Object target, @Nonnull Errors errors) {
            if (target instanceof Booking) {
                Booking booking = (Booking) target;
                // manipulate booking here

            }

            validator.validate(target, errors);
        }
    }

} 
```

（这第二个技巧是我从[https://github.com/spring-projects/spring-framework/issues/11103](https://github.com/spring-projects/spring-framework/issues/11103)获得的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:11:26.633

我不确定我是否理解这个问题，但听起来你想在你的命令被表单提交绑定之前将命令对象中的一个字段设置为一个值。如果是这样，您可以在控制器中添加一个方法，如下所示...

```
@ModelAttribute
public Booking getBooking() {
    Booking booking = new Booking();
    booking.setMyRequiredProperty("some value");
    return booking;
} 
```

希望有帮助

# jquery - Curtain.js + Jquery + HTML5 - 标题和控件在第二张幻灯片后消失

> ID：14732599
> 
> 赞同：1
> 
> 时间：2013-02-06T15:26:32.473
> 
> 标签：jquery, html, header, safari

谁能帮助我创建我的第一个 HTML5 和 Jquery 网站？

我正在使用这个窗帘.js，它允许我有分层的固定幻灯片，一次显示一张幻灯片，具有类似窗帘的效果。

我有一个固定的标题和控件，它们应该保持在相同的位置并且可以看到整个索引页面的查看和滚动。

它可以在桌面上的 FireFox、桌面上的 Chrome 和 iPhone5 上的 safari 上正常工作。奇怪的是，在我的桌面上使用 Safari 6.0.2 进行第二张幻灯片后，标题和控件消失了。

真的很困扰我，我不知道为什么。请帮忙。

在此先感谢，希望有人可以成为我的救星！

[http://www.taggrafx.com/HarrisHousing/index.html](http://www.taggrafx.com/HarrisHousing/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:31:05.110

将 -webkit-transform 添加到固定元素为我解决了这个问题。

```
.fixed_element {
   -webkit-transform: translateZ(0);
   position: fixed;
   ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-21T18:22:45.607

对我有用的是添加 -webkit-transform: translateZ(0); 到 .curtains 类

# android - 如何缩放用 Canvas 绘制的线条

> ID：14732606
> 
> 赞同：1
> 
> 时间：2013-02-06T15:26:49.253
> 
> 标签：android, canvas, zooming, android-view, pinchzoom

我正在使用一个名为 ImageTouchView 的库来在我的应用程序中提供缩放缩放功能。但是每当我使用 Canvas 在上面画一条线时，绘制的线不会放大/缩小，它只是保持相同的大小。我如何能够缩放绘制的线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:58:55.857

我已经解决了。为此，我必须获得 Canvas 绘图（包含我想要的所有线条）并将其转换为位图。然后我将此位图设置为 ImageView 位图。奇迹般有效！

# objective-c - 分离的 NSThreads 总是在应用程序退出之前完成吗？

> ID：14732609
> 
> 赞同：0
> 
> 时间：2013-02-06T15:27:05.830
> 
> 标签：objective-c, cocoa, nsthread

使用`NSThread`'s`detachNewThreadSelector:toTarget:withObject:`时，我发现如果用户在后台进程执行时尝试退出应用程序，线程将在应用程序正常终止之前完全完成其执行。

在这种情况下，这是我想要的行为，但我在 Apple 的文档中找不到任何表明这种情况永远存在的内容。我能找到的唯一相关信息如下，来自 Apple 的[Threading Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html)：

> 重要提示：在应用程序退出时，分离的线程可以立即终止，但可连接的线程不能。在允许进程退出之前，必须加入每个可连接线程。因此，在线程正在执行不应中断的关键工作（例如将数据保存到磁盘）的情况下，可连接线程可能更可取。

因此，我知道分离线程*可以*在应用程序退出时终止，但它们会自动终止吗？或者，我是否总是可以安全地假设线程将在应用程序退出之前完成其执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T17:01:45.903

无论文档如何，您都不能假设任何线程（包括主线程）都会正常完成执行。

这是因为用户可以随时退出应用程序，系统可能会断电/恐慌，或者应用程序可能会崩溃。

至于分离线程，一旦主事件循环放弃幽灵，系统框架在超时一段时间后自动强制终止应用程序并不是闻所未闻的。

# ios - iCarouselTypeLinear 超过 6 张图像

> ID：14732610
> 
> 赞同：0
> 
> 时间：2013-02-06T15:27:07.357
> 
> 标签：ios, icarousel

出于某种原因，当我设置时`iCarousel.type = iCarouselTypeLinear`，我不能使用超过 6 张图像。当我尝试滚动时，出现以下错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString objectAtIndex:]: unrecognized selector sent to instance 0xa47c2b0' 
```

我错过了什么？

任何帮助将不胜感激。

控制器代码：

```
journalCarouselItems = [NSMutableArray arrayWithObjects:
                         [UIImage imageNamed:@"Icon-JCO1.png"],
                         [UIImage imageNamed:@"Icon-JCO2.png"],
                         [UIImage imageNamed:@"Icon-JCO3.png"],
                         [UIImage imageNamed:@"Icon-JCO4.png"],
                         [UIImage imageNamed:@"Icon-JCO5.png"],
                         [UIImage imageNamed:@"Icon-JCO6.png"],
                         [UIImage imageNamed:@"Icon-JCO7.png"],
                         [UIImage imageNamed:@"Icon-JCO8.png"],
                         [UIImage imageNamed:@"Icon-JCO9.png"],
                         [UIImage imageNamed:@"Icon-JCO10.png"],
                         [UIImage imageNamed:@"Icon-JCO11.png"],
                  nil];

//     Initialize and configure the carousel

carouselId = 2;
journalCarousel = [[iCarousel alloc] initWithFrame: CGRectMake ( 10, 340, 748, 240)];
journalCarousel.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
journalCarousel.type = iCarouselTypeLinear;
journalCarousel.delegate = self;
journalCarousel.dataSource = self;

[self.view addSubview:journalCarousel]; 
```

编辑：在调试时，我注意到当我有 6 个图像时，每次都会调用下面的函数并且索引值从 0 变为 5，但是当我有超过 6 个图像时，不会为每个图像调用相同的函数，索引值是 0,2,8,9。

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(ReflectionView *)view
{
        UIImage *image = [journalCarouselItems objectAtIndex:index];
        UIButton *button = [[[UIButton alloc] initWithFrame:CGRectMake(0, 0, image.size.width, image.size.height)] autorelease];
        [button setBackgroundImage:image forState:UIControlStateNormal];
        [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
        button.titleLabel.font = [button.titleLabel.font fontWithSize:50];
        button.layer.cornerRadius = 8.0f;
        button.tag=index;

        [view addSubview:button];

        return view;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:29:14.180

我认为问题可能来自`journalCarouselItems`数组的初始声明。该错误消息意味着您正在将 objectAtIndex: 消息发送到 NSString 类型的对象（或者可能是 CFString）。然后，您期望您`journalCarouselItems`成为一个数组，但它可能被释放得太早（几乎可以肯定是自动释放），并且当上述方法被称为`journalCarouselItems`现在指向的内存时，它拥有不同的东西。

尝试`retain`在其声明的最后对数组进行 ing，以确保它位于正确的内存位置。

```
journalCarouselItems = [[NSMutableArray arrayWithObjects:
                     [UIImage imageNamed:@"Icon-JCO1.png"],
                     [UIImage imageNamed:@"Icon-JCO2.png"],
                     [UIImage imageNamed:@"Icon-JCO3.png"],
                     [UIImage imageNamed:@"Icon-JCO4.png"],
                     [UIImage imageNamed:@"Icon-JCO5.png"],
                     [UIImage imageNamed:@"Icon-JCO6.png"],
                     [UIImage imageNamed:@"Icon-JCO7.png"],
                     [UIImage imageNamed:@"Icon-JCO8.png"],
                     [UIImage imageNamed:@"Icon-JCO9.png"],
                     [UIImage imageNamed:@"Icon-JCO10.png"],
                     [UIImage imageNamed:@"Icon-JCO11.png"],
              nil] retain]; 
```

# makefile - makefile 中的条件语句

> ID：14732614
> 
> 赞同：0
> 
> 时间：2013-02-06T15:27:16.360
> 
> 标签：makefile, conditional

我在 C++ 代码 _2G_MYSQL_ 中定义了一个指令，它在定义时包括其他 mysql 文件。而且我只想在代码中定义了这个标记时才使用特定的库。有没有办法在Makefile中做到这一点。

就像是，

ifdef _2G_MYSQL_ LIBS = -lstdc++ -lmysqlclient -lz -lcrypt -lnsl -lssl -lcrypto -ldl -lm -lMst_main -lAMR_Reject_DSP -lFalseReject -lMStream_setting 否则 LIBS = -lm -lMst_main -lAMR_Reject_DSP -lFalseReject -lMStream_setting endif

这显然不起作用，因为令牌在头文件中而不是在生成文件中。有什么建议么 ？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:03:46.650

如果您使用`gcc`（以及通常的文本工具），您可以通过以下方式进行操作：

```
 SYMBOL=_2G_MYSQL_
 MAINFILE=myfile.c

 CHECK=$(shell gcc -E -dD $(MAINFILE) | grep $(SYMBOL))

 ifeq ($(findstring define $(SYMBOL), $(CHECK)),define $(SYMBOL))
     LIBS=-lstdc++ -lmysqlclient ....
 else
      LIBS=-lm -lMst_main ...
 endif 
```

# java - 接收错误：“200”：“parsererror”：SyntaxError：jquery ajax 调用期间“意外结束输入”

> ID：14732618
> 
> 赞同：0
> 
> 时间：2013-02-06T15:27:27.297
> 
> 标签：java, jquery, ajax, json

这是我的代码：

```
$.ajax({
        url: "MyServlet",
        dataType: "json",
        data: data,
        type: "post",
        cache: false
    }).done(function (data) {
        alert('hello');
    }).fail(function (XMLHttpRequest, textStatus, errorThrown) {
        alert('error: ' + XMLHttpRequest.status + ": " + XMLHttpRequest.responseText + ": " + textStatus + ": " + errorThrown);
    }); 
```

我收到：“错误：200: parsererror: SyntaxError: Unexpected end of input”

我不知道为什么。有什么帮助吗？

我的 servlet 基本上返回以下内容：

```
PrintWriter out = response.getWriter();
JSONObject json = new JSONObject();
json.put("test", "hello servlet");
out.print(json);
out.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:49:30.840

我已经想通了。我没有正确关闭我的 servlet 中的输出流，导致返回错误的 json 数据。

# c - GtkListStore - 如何使文本居中？

> ID：14732620
> 
> 赞同：0
> 
> 时间：2013-02-06T15:27:32.480
> 
> 标签：c, gtk

我已经包含了一个简短的代码片段。我正在制作一个有 5 列的树视图。我已将最后一列粘贴到 for 循环中，该循环生成要存储在 GtkListStore 中的数据。我可以轻松地将树视图的列居中。我在网上查看了如何将 GtkListStore 中的文本居中，但我没有找到解决方案。我浏览了文档：

[http://developer.gnome.org/gtk3/3.4/GtkListStore.html](http://developer.gnome.org/gtk3/3.4/GtkListStore.html)

在最后一个链接上，我没有看到对齐属性。有没有办法通过 GtkTreeModel 对齐所有对象？我还没有找到任何使用 GtkListStore 和对齐文本的在线示例......非常感谢您的帮助！

```
// Append Table Velocity column
column = gtk_tree_view_column_new();
gtk_tree_view_column_set_title(column, "Pressure");
gtk_tree_view_column_set_min_width(column, 60);
gtk_tree_view_column_set_alignment(column, 0.5); // 0.0 left, 0.5 center, 1.0 right
// Code Above center's the column title in the Tree View

renderer = gtk_cell_renderer_text_new();
g_object_set( G_OBJECT( renderer ), "xalign", 0.5 );    // xalign, 0.5
// Code above doesn't change alignment..

gtk_tree_view_column_pack_start(column, renderer, FALSE);
gtk_tree_view_column_set_attributes(column, renderer, "text", 4, NULL);
gtk_tree_view_append_column(GTK_TREE_VIEW(treeview), column);

// List Store
liststore = gtk_list_store_new(5, G_TYPE_INT, G_TYPE_STRING, G_TYPE_STRING, G_TYPE_STRING, G_TYPE_STRING);
gtk_tree_view_set_model(GTK_TREE_VIEW(treeview), GTK_TREE_MODEL(liststore));

int i;
for(i=1; i<=6; i++) {
// Append test data
gtk_list_store_append(liststore, &iter);
gtk_list_store_set(liststore, &iter, 0, i, 1, "5", 2, "0.2", 3, "123", 4, "0.5", -1);
// How do I center the text stored in the GtkListStore?
}

gtk_widget_show_all(window); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:58:01.440

我能够找到一个名为 gtk_tree_view_column_with_attributes() 的便捷函数。使用这个函数和另外两行代码，我可以方便地将标题和列表存储中的文本居中。

```
// Append Pressure column
column = gtk_tree_view_column_new_with_attributes("Pressure", renderer, "text", 4, NULL);
gtk_tree_view_column_set_alignment(column, 0.5);
gtk_tree_view_append_column(GTK_TREE_VIEW(treeview), column); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:52:00.560

Try `g_object_set (renderer, "xalign", 0.5, NULL);` with the NULL at the end, g_object_set needs a sentinel. Actually leaving out the sentinel should have given you at least a compiler warning, or did you leave it out deliberately or by mistake?

# ios - self.tabBarControllerdismissViewControllerAnimated 不起作用

> ID：14732622
> 
> 赞同：2
> 
> 时间：2013-02-06T15:27:42.427
> 
> 标签：ios, uiviewcontroller, uitabbarcontroller

我的应用程序中有一个 UITabBarController。

我想从一个选项卡，另一个 UIViewController 中呈现。

所以我写了`ViewControllerA`（这是tabviewcontroller中的一个选项卡）：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
MyViewController *chooseTemplateController = [storyboard instantiateViewControllerWithIdentifier:@"myController"];
[self.tabBarController presentViewController:myController animated:NO completion:nil]; 
```

这很好地显示了 MyViewController。

但是，我怎样才能解除 MyViewController？

我读到了许多我需要打电话的问题：

```
[self.tabBarController dismissViewControllerAnimated:NO completion:nil]; 
```

但是 - 我从哪里调用它？我从 MyViewController 尝试过 - 但由于它不是 UITabBar 的一部分，所以 self.tabBarController 为空。

我从情节提要而不是从 appDelegate 初始化 UiTabBarController，我想保持这种状态。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T15:31:10.953

使用呈现的 viewController 的`presentingViewController`属性

### Objective-C

```
[self.presentingViewController  dismissViewControllerAnimated:NO completion:nil]; 
```

### 迅速

```
presentingViewController?.dismissViewControllerAnimated(false, completion: nil) 
```

你也可以使用这个速记版本（我不建议你这样做，但你会经常看到）

### Objective-C

```
[self dismissViewControllerAnimated:NO completion:nil]; 
```

### 迅速

```
dismissViewControllerAnimated(false, completion: nil) 
```

请参阅
[关闭呈现的视图控制器](https://stackoverflow.com/questions/14636891/dismissing-a-presented-view-controller/14637067#14637067)

# html - VIdeojs 无法在 IE6 上运行

> ID：14732624
> 
> 赞同：0
> 
> 时间：2013-02-06T15:27:46.123
> 
> 标签：html, video, video.js

我从 videojs.com 下载了演示页面，但它在 IE6 上根本不起作用。在 FF 上运行良好。我无法在 IE6 上查看网络上的视频，所以我认为它工作不正常，这不是我的错。

有人可以在 IE6 上使用此工具观看视频吗？如何？

谢谢

# jquery - 在脚本 http://arborjs.org/ 中显示没有悬停动作的节点链接

> ID：14732636
> 
> 赞同：1
> 
> 时间：2013-02-06T15:28:14.823
> 
> 标签：jquery, arbor.js

我正在使用 [http://arborjs.org](http://arborjs.org)脚本。当鼠标指向其中一个节点时，它会显示链接。但是我需要在脚本加载后（不悬停任何）在其中一个节点上显示此类链接。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T01:57:09.753

没有任何代码很难回答，但如果您使用与主页相同的代码：

*   将节点的 alpha 属性设置为 1
*   不要设置`shape:'dot'`一个节点是否有你想看的子节点

# git - Git 冲突（重命名/重命名）

> ID：14732639
> 
> 赞同：35
> 
> 时间：2013-02-06T15:28:22.210
> 
> 标签：git, git-merge, merge-conflict-resolution

合并分支后，我收到了`conflict (rename/rename)`一堆文件，带有`file~HEAD`，并`file~my_test_branch`创建了。如何解决这些？

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-01-12T06:17:03.943

给定以下测试设置：

```
git init resolving-rename-conflicts
cd resolving-rename-conflicts
echo "this file we will rename" > will-be-renamed.txt
git add -A
git commit -m "initial commit"
git checkout -b branch1
git rename will-be-renamed.txt new-name-1.txt
git commit -a -m "renamed a file on branch1"
git checkout -b branch2 master
git rename will-be-renamed.txt new-name-2.txt
git commit -a -m "renamed a file on branch2"
git checkout master 
```

然后合并branch1和branch2

```
git merge --no-ff branch1
git merge --no-ff branch2 
```

产量：

```
CONFLICT (rename/rename): Rename "will-be-renamed.txt"->"new-name-1.txt" in branch "HEAD" rename "will-be-renamed.txt"->"new-name-2.txt" in "branch2"
Automatic merge failed; fix conflicts and then commit the result.

git status

On branch master
You have unmerged paths.
  (fix conflicts and run "git commit")

Unmerged paths:
  (use "git add/rm <file>..." as appropriate to mark resolution)

    added by us:        new-name-1.txt
    added by them:      new-name-2.txt
    both deleted:       will-be-renamed.txt

no changes added to commit (use "git add" and/or "git commit -a") 
```

如果您想保留一个文件，请说`new-name-2.txt`：

```
git add new-name-2.txt
git rm new-name-1.txt will-be-renamed.txt
git commit 
```

当然，在选择一个文件或另一个文件时，您可能需要对按名称引用此文件的文件进行其他更改。此外，如果文件有其他非重命名更改，分支上的前后重命名，您将需要手动比较并合并这些更改以将它们保留在您保留的文件中。

如果您想保留这两个文件：

```
git add new-name-1.txt new-name-2.txt
git rm will-be-renamed.txt
git commit 
```

# c# - 如何将焦点放在 OnNavigatedTo 事件中的 TextBox 上？

> ID：14732640
> 
> 赞同：4
> 
> 时间：2013-02-06T15:28:27.230
> 
> 标签：c#, xaml, windows-runtime

在 Windows 8 中，当导航页面时，我需要将焦点放在特定的 TextBox 上。

我用了：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    base.OnNavigatedTo(e);
    myControl.Focus(Windows.UI.Xaml.FocusState.Keyboard);
} 
```

但它不起作用。但是，如果我`myControl.Focus(Windows.UI.Xaml.FocusState.Keyboard);`从按钮单击事件调用，它工作正常。

加载页面时如何将焦点设置到文本框？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T15:49:42.180

尝试`myControl.Focus(Windows.UI.Xaml.FocusState.Keyboard);` 调用`this.Dispatcher`

代码示例：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    base.OnNavigatedTo(e);
    Dispatcher.RunAsync(
        CoreDispatcherPriority.Normal,
        () => myControl.Focus(FocusState.Keyboard));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-30T04:43:13.777

Try this:

```
myControl.Focus(Windows.UI.Xaml.FocusState.Keyboard); 
```

and set this `control(mycontrol)` as the first control in your XAML code.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-31T10:57:38.590

在 Windows Phone 8.1 上，将 Loaded 事件添加到页面并在那里调用焦点而不是 OnNavigatedTo 事件

```
private void Page_Loaded(object sender, RoutedEventArgs e)
{
    SearchTextBox.Focus(FocusState.Keyboard);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-15T15:32:33.837

我通过在 TextBox 的 Loaded 事件中添加它来做到这一点：

xml:

```
<TextBox x:Name="SearchTextBox" 
     Loaded="SearchTextBox_Loaded"/> 
```

在 .cs 后面的代码中：

```
private void SearchTextBox_Loaded(object sender, Windows.UI.Xaml.RoutedEventArgs e)
{
    SearchTextBox.Focus(Windows.UI.Xaml.FocusState.Keyboard);
} 
```

# ios - 邀请用户加入 IOS 应用程序

> ID：14732646
> 
> 赞同：3
> 
> 时间：2013-02-06T15:28:39.697
> 
> 标签：ios, app-store

注册后，我们的应用程序会提示用户邀请她的朋友（也称为电话联系人）也使用该应用程序。这允许我们使用某种邀请密钥向用户的联系人发送电子邮件/短信。适用于网络版应用程序，只需将密钥嵌入您在邀请中提供的 url 中。

我无法弄清楚如何仅使用 IOS 使这项工作顺利进行。如果我可以向受邀者发送一个指向 appstore.apple.com/myapp?registrationKey=abcXYZ 的链接，并且一旦我的应用程序安装后就可以神奇地使用密钥，那将是非常棒的，但我想这很有希望吗？

解决这个问题的明显方法是让用户在首次启动时手动输入他们的注册密钥，但这似乎不太可靠并且（在我看来）增加了用户体验的摩擦。

有没有人想出一些聪明的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:34:55.590

以下是我脑海中关于如何解决这个解决方案的想法，请注意，我没有审查、伪编码、编码或应用这个理论。

由于您将知道向谁发送邀请，因此将该数据保存到您的数据库中，并与发送用户的关系以及被邀请用户的唯一 ID（电子邮件地址，如果它在联系人的卡片中）。当新用户注册时，扫描数据库中的邀请，如果发现邀请，则将其呈现给用户询问`We're you referred by <existing user>?`一旦新用户选择他们的响应，继续完成注册过程，相应地更新关系表并应用推荐所需的任何额外设置.

这将自动推荐跟踪与推荐代码相结合，提供一种基本的、直接的、几乎（但不完全）万无一失的方法，以确保推荐链接到正确的用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-18T02:02:49.020

据我所知，App Store 在邀请和已安装的应用程序之间提供了信息防火墙。

我见过的最接近的解决方法如下：

*   电子邮件链接将您带到您的网站
*   网站在 URL 和 IP 地址中记录参考信息
*   该网站会立即将您重定向到 App Store（如果检测到 iOS）
*   用户安装应用程序
*   用户加载应用
*   应用程序联系您的网站，IP 地址匹配... BINGO

显然不是一个安全的方法。失败案例很多：

*   业务网络通常共享 IP
*   家庭和移动网络发布和重用 IP

more 经常用于解决这样的情况：它足以知道用户“几乎可以肯定”通过电子邮件被推荐下载应用程序。例如，在应用程序中通过“你认识谁”问题提示用户并根据（IP+参考）数据限制选项可能是一种很好的机制。如果他们选择了原始海报，那可能就足够了，然后您可以附上邀请者提供的任何其他数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-03T20:35:22.730

（全面披露，目前在 Branch 工作）

对此的最佳解决方案是对用户进行指纹识别。这需要您执行以下步骤：

*   对于每个用户，使用您自己的域，为该用户生成一个链接。因此，当他们完成注册时，生成包含邀请密钥的唯一 URL。

*   对于单击此链接的任何人，他们将首先重定向到 Safari。当他们这样做时，从标头和用户代理中捕获他们的 IP 地址和 iOS 操作系统版本。

*   将此数据保存在您的服务器上，并设置`window.location`为您的 iTunes 网址。

*   如果用户下载并随后打开，请在内部`AppDelegate.m`向您的服务器发送一条消息，其中包含您在应用启动时收集的 IP 地址 + 主要/次要/最小版本。如果它与您在服务器上的内容匹配，您现在可以将该邀请密钥传回给新用户。

它并不完美，并且具有错误归因的能力。您也可以使用[branch.io](http://branch.io)，所有这些都在其中得到处理（链接生成、用户指纹识别、归因）。Branch 还删除了第一方 cookie 并将其与设备级别 ID 相关联，因此归因更加准确。

# algorithm - 查找任意两个函数的交点 - 求解联立方程

> ID：14732647
> 
> 赞同：0
> 
> 时间：2013-02-06T15:28:40.637
> 
> 标签：algorithm, math, intersection, conceptual

想象一下有任何两个功能。您需要找到该函数的交集。您绝对不想尝试所有 x 值来检查`f(x)==g(x)`. 通常在数学中，您创建从`f(x)==g(x)`. 但我看不出如何用任何编程语言实现方程。
所以再一次，我在寻找什么：

1.  求解方程的概念算法。
2.  联立方程和二次方程也是如此。

我相信应该有一些使用函数推导的解决方法，但是我最近在学校学习了推导概念，我不知道在这种情况下如何使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T15:35:02.710

这是一个比你想象的要困难得多的问题。学习这些东西的一个很好的起点是 [Newton-Raphson 方法](http://en.wikipedia.org/wiki/Newton%27s_method)，它给出了形式方程的数值近似`h(x) = 0`。（当您设置 时`h(x) = g(x) - f(x)`，这将为您所询问的问题提供解决方案。）

方程的精确代数求解（例如，在 Mathematica 中实现）更加困难，你基本上必须重新创建在一张纸上求解方程时你会在脑海中做的所有事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T18:17:23.850

显然这个问题在一般情况下是无法解决的，因为你可以构造一个任意复杂的“函数”。例如，如果你有一个包含 5 万亿项的“函数”，其中包括各种超越和复杂的变换，那么计算机可能需要数年时间才能计算出一个值，更不用说与另一个类似的函数相交了。

因此，首先您需要定义“功能”的含义。如果您的意思是次数小于 4 的多项式，那么问题就变得更加简单。在这种情况下，您结合多项式的项并找到方程的根，这将是交点。

如果多项式的项超过 5 个（五次或更多），则没有简单的符号解。在这种情况下，这些项被组合起来，您可以通过迭代逼近找到根。请参阅[求根算法](http://en.wikipedia.org/wiki/Root-finding_algorithm)。

如果函数涉及超越函数，例如 sin/cos/log/e^x 等，您可以通过将函数表示为级数或连分数来潜在地找到交集。然后从另一个系列中减去一个系列并将值设置为零。连续方程的解产生根的近似值。

# bash - vim 红色高亮 $( )

> ID：14732651
> 
> 赞同：13
> 
> 时间：2013-02-06T15:28:47.213
> 
> 标签：bash, vim, ubuntu, sh

当我决定将函数移动到一个 lib 文件时，我正在编写一个脚本，但是当我打开所有 lib 文件`$(`并且连续`)`的都是红色突出显示时，这里有一些脚本示例

```
TAB="$(printf '\t')"
percent=$(echo "scale=2; $number/$total*100" | bc | sed -e 's/\.[[:digit:]]*//g')
if [[ -z $(grep $site/post $max_lim) ]];then 
```

文件类型是 conf 但我在 .vimrc 中将其设置为 sh 语法

知道发生了什么吗？

谢谢

* * *

编辑：感谢您的快速回答，我发现这一行使 vim 匹配具有后面指定扩展名的文件，`*`语法为 sh

```
au BufReadPost * set syntax=sh 
```

我还认为不允许在库中使用 shebang，但这是一个不错的解决方案

无论如何`g:is_bash`在 .vimrc 中使用会返回找不到模式的错误

所以我想做的是因为我只用 bash 编写，vim 将任何没有扩展名的文件识别为 bash

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T15:55:44.150

的语法文件`sh`实际上处理了几种不同的 shell 语法：`bash`, `ksh`, 和plain old `sh`。由于您的 conf 文件未被识别为`bash`or `ksh`，因此它回退到`sh`. `$(...)`不是 中的有效构造`sh`，因此将其突出显示为错误。

要解决此问题，您可以确保为文件设置了“g:is_bash”，以便`sh`语法脚本知道您的文件应作为`bash`代码突出显示。请编辑您的问题以包括您添加的内容`.vimrc`以使文件使用`sh`语法突出显示。这将更容易建议设置“g:is_bash”的正确方法。

更新：正如 Alok 评论的那样，您应该能够将以下内容添加到文件中

```
#!/bin/bash 
```

让`vim`知道要使用的正确语法突出显示。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-04-23T08:30:52.780

就我而言，我想保留`#!/bin/sh`作为 shebang 线，因为并非每个系统都`/bin/bash`可用。

虽然最初的 Bourne shell 可能不支持该`$(...)`语法，但`sh`现在大多数 shell 都符合 POSIX 标准，并且[POSIX 规范支持这种语法](https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_06_03)。例如，

*   在 Ubuntu 上，`/bin/sh`是`/bin/dash`.
*   在 MacOS 上，`/bin/sh`是`/bin/bash`.
*   在阿尔卑斯山，`/bin/sh`是`/bin/ash`。

所有这些都满足 POSIX 规范。传统上，如果我们想编写可移植的 Shell，我们应该将 shebang 行保留为`#!/bin/sh`. `#!/bin/bash`如果我们不打算使用任何 Bashism，我们不应该将其更改为仅用于语法高亮。

好的，但是错误的红色突出显示呢？问题在于 Vim 将[1979 年的原始 Bourne shell](https://en.wikipedia.org/wiki/Bourne_shell)`#!/bin/sh`解释为不支持. 也许这证明了 Vim 的向后兼容性，或者可能没有足够的人关心。这是描述相同行为的[相关 GitHub 问题。](https://github.com/vim/vim/issues/1147)`$(...)`

无论如何，对我来说最好的解决方案是`let g:is_posix = 1`在我的配置中进行设置。有趣的是，如果你查看 Vim 的运行时文件，它相当于设置[`let g:is_kornshell = 1`](https://github.com/vim/vim/blob/1d9215b9aaa120b9d78fee49488556f73007ce78/runtime/syntax/sh.vim#L49-L51).

* * *

可以在[https://askubuntu.com/a/976504](https://askubuntu.com/a/976504)`bash`找到关于 Bourne shell 如何被 bourne、bourne 再次作为 Ubuntu 上的替代品`/bin/sh`并最终被替换为支持的简短有趣历史。 `dash`

# php - 执行 GET 请求时要放置什么 Content-Length？

> ID：14732653
> 
> 赞同：0
> 
> 时间：2013-02-06T15:28:49.907
> 
> 标签：php, http, curl, header, http-headers

我知道在执行 POST Curl 时，您使用设置内容长度`strlen($postdata)`

但是，在执行 GET 时如何确定内容长度？

这是我的代码：

```
 curl_setopt($CR, CURLOPT_URL, CLASS::SENDURL.$get);
   curl_setopt($CR, CURLOPT_FAILONERROR, true);
   curl_setopt($CR, CURLOPT_RETURNTRANSFER, 1);
   curl_setopt($CR, CURLOPT_SSL_VERIFYPEER, 0);
   curl_setopt($CR, CURLOPT_HTTPHEADER,    
     array('Content-Type: text/xml; charset=utf-8',
                                                //'Content-Length: '.strlen($get),
                                                    'Content-Length: 0 ',
                                            //  
                                                )); 
 curl_setopt($CR, CURLINFO_HEADER_OUT, true); 
```

任何人都知道我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:32:22.490

GET 请求中*通常*没有实体主体（随便称为内容）。您似乎没有发送任何内容，并且可能会省略设置任何相关内容的调用。

# sql - SQL完全外连接排除，选择不存在的行

> ID：14732655
> 
> 赞同：2
> 
> 时间：2013-02-06T15:28:54.570
> 
> 标签：sql, join, left-join, outer-join

我有 3 张桌子：

```
section
id
name

permission
id
section_id
name

exclusion_permission
permission_id 
```

查询如下：

```
SELECT
    p.id AS permission_id,
    p.name AS permission_name,
    s.id AS section_id,
    s.name AS section_name
FROM
    section s

LEFT OUTER JOIN
    permission p
ON
    p.section_id = s.id

LEFT OUTER JOIN
    exclusion_permission lep
ON
    lep.permission_id = p.id

WHERE
    lep.permission_id IS NULL 
```

表数据为：

```
section
id     name
1      admin
2      sales
3      moderator
4      intern

permission
id     section_id    name
1      1             root
2      2             sell
3      2             buy
4      3             edit_user
5      3             delete_user 
```

查询将返回

```
1, root, 1, admin
2, sell, 2, sales
3, buy, 2, sales
4, edit_user, 3, moderator
5, delete_user, 3, moderator
,, 4, intern 
```

现在，如果我将以下排除权限加入其中：

```
exclusion_permission
permission_id
1
5 
```

查询将返回：

```
2, sell, 2, sales
3, buy, 2, sales
4, edit_user, 3, moderator
,, 4, intern 
```

如您所见，主持人部分仍然存在，因为它还有一行与之关联。但是，管理部分已被删除，因为与其关联的唯一权限已被排除。我想要做的是让我的查询返回以下内容：

```
,, 1, admin
2, sell, 2, sales
3, buy, 2, sales
4, edit_user, 3, moderator
,, 4, intern 
```

因此，如果该部分没有权限，则显示该部分。此外，如果某个部分具有全部排除的权限，则仍然显示没有关联权限的部分。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:44:13.233

`permission`更改连接的顺序，只有在没有找到时才加入`exclusion_permission`：

```
SELECT
    p.id AS permission_id,
    p.name AS permission_name,
    s.id AS section_id,
    s.name AS section_name
FROM
    section s
LEFT OUTER JOIN
    exclusion_permission lep
ON
    lep.permission_id = s.id
LEFT OUTER JOIN
    permission p
ON
    p.section_id = s.id
    AND lep.permission_id IS NULL 
```

[SQL Fiddle 的工作示例。](http://sqlfiddle.com/#!6/51d2b/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:55:34.217

添加这些记录`UNION`：

```
...
UNION
SELECT NULL,
       NULL,
       id,
       name
FROM section
WHERE id NOT IN (SELECT section_id
                 FROM permission
                 WHERE id NOT IN (SELECT permission_id
                                  FROM exclusion_permission)) 
```

（[SQL 小提琴](http://sqlfiddle.com/#!2/88632/2)）

# asp.net - GridView 或 Repeater 或其他什么？

> ID：14732656
> 
> 赞同：1
> 
> 时间：2013-02-06T15:28:55.037
> 
> 标签：asp.net

我正在尝试找出最适合这项工作的工具。一个 GridView 或一个中继器，或者完全是别的东西？

我有一个要显示的表格，但是，根据用户浏览网站的语言（法语或英语），我希望显示/隐藏某些列。我还必须做一些分页。

所以，我的问题是哪种工具更适合我的需要？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:36:19.367

一个 GridView，因为它拥有你所需要的一切。

您可以像这样隐藏行：YourGridView.Columns[0].Visible = false

它内置了分页功能！

# sql-server - 使用 DATENAME 时的 SQL SET DATEFIRST

> ID：14732659
> 
> 赞同：2
> 
> 时间：2013-02-06T15:29:01.240
> 
> 标签：sql-server, tsql

> 当 date 参数具有日期数据类型参数时，返回值取决于使用 SET DATEFIRST 指定的设置。 [从 DateName MSDN 页面](http://msdn.microsoft.com/en-us/library/ms174395.aspx)

如果我正在尝试

`DateName(dw,getdate()) = 'sunday'`

我需要担心设置 DATEFIRST 吗？我不认为我必须这样做，因为我没有使用整数返回，我正在检查它是星期几的名称。这个对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:55:13.653

我认为未提出的问题是 - 找到星期天的可靠方法是什么。

我通常与正确类型的已知良好日期进行比较：

```
IF DATEPART(dw,getdate()) = DATEPART(dw,'20130203') 
```

# sql-server-2012 - SQL 链接服务器本地截断 - 截断链接数据

> ID：14732660
> 
> 赞同：0
> 
> 时间：2013-02-06T15:29:05.977
> 
> 标签：sql-server-2012

我对存储过程所做的最新更改得到了一些意想不到的结果。

此过程应该截断本地数据库表并从链接服务器重新填充。

我看到的问题是我的链接服务器数据以某种方式被截断。

我的sql如下

TRUNCATE TABLE Utility.dbo.tblSite

SET IDENTITY_INSERT Utility.dbo.tblSite ON

INSERT INTO Utility.dbo.tblSite（siteID、siteDataName、sqlServerName、isActive、baseLanguage、translationState、localInstance）

选择 siteID、siteDataName、sqlServerName、isActive、baseLanguage、translationState、localInstance

来自 USS.Utility.dbo.tblSite

SET IDENTITY_INSERT Utility.dbo.tblSite 关闭

更新 Utility.dbo.tblSite SET localInstance = Null

更新 Utility.dbo.tblSite SET localInstance = 1 WHERE sqlServerName = @@ServerName

有人知道为什么我的 USS 数据会消失吗？我是否需要在本地表名前面指定本地数据库，以便截断不会截断 USS 数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:38:47.660

执行`TRUNCATE TABLE Utility.dbo.tblSite`查询时，当前上下文是什么？由于数据库名称、模式名称和表名称相同，因此服务器部分会影响查询。

# xcode - 在 Xcode 中使控件水平对齐

> ID：14732662
> 
> 赞同：0
> 
> 时间：2013-02-06T15:29:14.327
> 
> 标签：xcode

我正在尝试水平对齐我的**UILable** for iPhone 屏幕，因为没有`x`或`left`在 mylable 属性中。如何在屏幕上居中对齐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:58:13.143

确定对象具有哪些类型的属性的最佳方法是使用类引用。当您第一次查看[UILabel 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UILabel_Class/Reference/UILabel.html)时，您会发现没有用于调整标签视图的属性。

但是，如果您查看最顶部，您可以看到 UILabel 从哪里继承。您可以看到它继承自 UIView，这对于查看您需要的内容很有意义，因为您询问如何调整屏幕（视图）上的标签位置。

单击 UIView，您将被直接带到[它的参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/cl/UIView)。向下滚动，直到您看到“任务”列表，其中有几个类别，每个类别都有许多属性。您对“边界和框架矩形”类别感兴趣，其中有一个名为“框架”的属性。

现在我们已经确定我们可以通过 myLabel.view.frame 设置 UILabels 框架

但是您可能想知道如何设置框架，因此您需要在您一直在查看的类参考中单击“框架”。

您将看到该框架的类型为 CGRect，因此您可以使用 CGRectMake 来设置框架。但现在你问我该怎么做，所以我们点击[CGRect 参考](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGGeometry/Reference/reference.html#//apple_ref/doc/c_ref/CGRect)。

您可以看到 CGRect 是一个由 CGPoint 和 CGSize 组成的结构，如有必要，请查看它们以了解它们是如何定义的。

我花时间解释了使用文档的流程，以便您将来可以自己做。您可以在他人的帮助下生存一段时间，但最终您需要深入研究文档并自己弄清楚。

简而言之，您可以使用以下方法设置标签的位置：

```
myLabel.frame = CGRectMake(self.view.frame.size.width/2-someWidth/2, self.view.frame.size.height/2-someHeight/2, someWidth, someHeight); 
```

其中 someWidth 和 someHeight 是浮点类型的自定义变量，而 self.view 是您希望将标签居中的一些超级视图。

我没有测试代码，但相信这应该可行。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:31:20.470

您要查找的属性是`frame`or`center`属性。在这种情况下，`center`可能是您最好的选择。您需要做的就是这样的：

```
CGPoint newCenter = myLabel.center;
newCenter.x = self.view.center.x;
myLabel.center = newCenter; 
```

或者

```
myLabel.center = CGPointMake ( self.view.center.x, myLabel.center.y ); 
```

有更高级的方法可以使用自动布局或自动调整掩码来保持中心对齐。如果您有兴趣了解它们（自动布局是最强大的并且在某些方面对用户友好），我建议您观看有关自动布局的[WWDC 2012 会议](https://developer.apple.com/videos/wwdc/2012/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:56:56.180

这有效：

```
mylabel.center = CGPointMake(CGRectGetMidX(self.view.bounds), mylabel.center.y); 
```

# html - 电子邮件图像的故障转移

> ID：14732667
> 
> 赞同：1
> 
> 时间：2013-02-06T15:29:28.030
> 
> 标签：html, css, email, outlook

我正在开发一个系统，该系统将电子邮件发送给可能从公共接入点或“封闭”接入点（看不到互联网）读取电子邮件的收件人。我以 HTML 格式发送的电子邮件可能嵌入了图像。这些图像是预定义的，并且存在于已知位置。自然，**从（公共）互联网读取的电子邮件无法加载托管在（私人）封闭网络中的图像；从封闭网络读取的电子邮件无法从互联网加载图像**。

目前，在电子邮件生成期间，我们正在根据收件人的电子邮件地址确定我们应该将 设置`img src`为公共路径还是私有路径。**我很想找到一种本机 HTML 技术，它可以告诉电子邮件客户端“尝试这个图像的公共路径，如果它不加载故障转移到这个私有路径”。**我的理解是，几乎总是希望电子邮件客户端去除 JavaScript，因此 ECMA 不会成为该解决方案的一部分。可悲的是。

## 尝试 1

我尝试将 设置`src`为图像的公共路径，并将`background-image`样式属性设置为图像的私有路径：

`<img src="path/to/`**`public`**`/my_image.jpg" style="background-image:url('path/to/`**`private`**`/my_image.jpg');" ..etc.. />`

这在浏览器中效果很好（特别是如果设置了高度/宽度属性），但 Outlook (2007) 不支持`background-image`. 所以，没有快乐。

## 尝试 2

`table`我尝试用图像创建一个`background`：

```
<table background="path/to/private/my_image.jpg">
   <tr>
      <td>
         <img src="path/to/public/my_image.jpg" />
      </td>
   </tr>
</table> 
```

Outlook 也没有这样做。

## 尝试 3

本着“工作起来可能很疯狂”的精神，我尝试为`src`图像提供两个属性：

`<img src="path/to/`**`public`**`/my_image.jpg" src="path/to/`**`private`**`/my_image.jpg" ..etc.. />`

那在任何地方都行不通。只有第一个`src`会习惯于尝试加载图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:44:09.333

如果您的逻辑是在服务器上进行的，我认为您最好链接到生成/提供正确图像的脚本，而不是直接使用图像？

**就像是：**

```
<img src="http://www.example.com/path/to/script/image.php?email=info@example.com&amp;name=example-image-1" /> 
```

`image.php`然后将基于给定参数的一些逻辑。这些可能是收件人的电子邮件（可以详细说明他们的访问权限），也可能是图像的名称（以便您知道在该位置提供哪个图像）。

然后，您需要充当`image.php`图像的正确 mime 类型，以便电子邮件客户端可以正确呈现它。

这比尝试在电子邮件本身中使用黑客更有优势。

希望这可以帮助？

米奇。

PS - 请记住在 HTML 电子邮件中提供绝对 URL。相对图像不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:50:51.990

为什么不将图像嵌入为附件？您可以将 img 标签的 src 属性指定为“cid:xyz”，如果图像附件的“Content-id”MIME 属性为“xyz”，则为“xyz”。

# ruby-on-rails - 使用 rspec 的回形针

> ID：14732681
> 
> 赞同：3
> 
> 时间：2013-02-06T15:30:16.000
> 
> 标签：ruby-on-rails, rspec, paperclip

我有一个 Rails 3.2 应用程序，我在其中使用回形针上传和存储文件附件。这本身很好用，但我想使用 rspec 对其进行测试。

现在，文档提供了一些非常漂亮的应该匹配器来做到这一点。但是，当我尝试运行它们时，它说我在规范助手中的配置是错误的：

```
uninitialized constant Paperclip::Shoulda (NameError) 
```

我的规范助手中有以下内容：

```
RSpec.configure do |config|
  config.include Paperclip::Shoulda::Matchers
end 
```

这是在我的 Gemfile 中：

```
group :development, :test do
  gem "rspec-rails", "~> 2.0"
  gem "shoulda-matchers"
end 
```

我不确定我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T12:52:27.407

我发现了问题所在。我`require 'paperclip/matchers'`在 shoulda 匹配器后面有，但我首先需要使用回形针匹配器，然后才包含 shoulda 匹配器。

# jsf - 在 JSF 2.0 中验证和显示十进制数

> ID：14732682
> 
> 赞同：0
> 
> 时间：2013-02-06T15:30:21.827
> 
> 标签：jsf

我想知道如何验证 inputText 文本字段并查看它是否匹配十进制格式。以及在渲染时如何使用特定格式格式化该文本字段

我已经这样做了：

```
 <rich:column id="soldes_comptables">
                <f:facet name="header">
                    <h:outputText value="Solde Comptable" />
                </f:facet>
                <h:inputText id="inputTextSC" value="#{file.soldes_comptables}"
                    label="Montant"
                    style="border-color:#F2F3F7;"
                    validatorMessage="The number must be decimal eg: 000.00"
                    >
                    <f:convertNumber pattern="#,###,##0.00"/>
                    <f:validateRegex pattern="^[0-9]+(\.[0-9]{1,2})?$"></f:validateRegex>
                    <rich:validator />
                </h:inputText>
                <rich:message for="inputTextSC"/>
            </rich:column> 
```

但它没有按我的意愿工作:(。请帮助我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T17:07:12.723

您正在混合验证和转换。`<f:validateRegex>`仅适用于`String`值，而不适用于`Number`值，但是，`<f:convertNumber>`已经预先将其从 转换为 ，因此 对您`String`来说毫无用处。您应该删除它并将消息指定为。`Number``<f:validateRegex>``converterMessage`

```
<h:inputText ... converterMessage="The number must be decimal eg: 000.00">
    <f:convertNumber pattern="#,###,##0.00"/>
</h:inputText> 
```

另一种方法是创建一个自定义转换器扩展并根据一些正则表达式模式匹配`NumberConverter`抛出一个不正确的输入格式。`ConverterException`

### 也可以看看：

*   [验证 JSF 中的小数输入](https://stackoverflow.com/questions/6498617/validating-decimals-inputs-in-jsf)
*   [如何在 JSF 页面中使用 validateRegex 验证数字字段？](https://stackoverflow.com/questions/9501845/how-validate-number-fields-with-validateregex-in-a-jsf-page)

# php - Message: Undefined property: EE::$template

> ID：14732683
> 
> 赞同：1
> 
> 时间：2013-02-06T15:30:24.213
> 
> 标签：php, codeigniter, expressionengine

I try to use `template` lib in my project. I do

```
$this->EE->load->library('template'); 
$this->EE->template->parse_globals($template_query->row('template_data')); 
```

but I get fatal error

```
Severity: Notice

Message: Undefined property: EE::$template

Filename: member_sync/mod.member_sync.php

Line Number: 158

Fatal error: Call to a member function parse_globals() on a non-object in /Library/Server/Web/Data/Domains/henigdiamondscouk/public-html/henig-cp/expressionengine/third_party/member_sync/mod.member_sync.php on line 158 
```

what I do wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:34:41.920

```
$this->EE->template->parse_globals($template_query->row('template_data')); 
```

should be:

```
$this->EE->TMPL->parse_globals($template_query->row('template_data')); 
```

# java - java中的单元测试套接字

> ID：14732684
> 
> 赞同：3
> 
> 时间：2013-02-06T15:30:32.250
> 
> 标签：java, sockets

我有一个类是套接字客户端，我正在尝试对其方法进行单元测试。测试要求我在每次测试之前启动一个套接字服务器，所以我使用：

```
@Before
public void setUp() {
    if (myServerSocket == null) {
    Thread myThread = new Thread() {
        public void run() {
            DataInputStream dis = null;
            DataOutputStream dos = null;
            try {
                ServerSocket myServer = new ServerSocket(port);
                myServerSocket = myServer.accept();
                dis = new DataInputStream(myServerSocket.getInputStream());
                dos = new DataOutputStream(myServerSocket.getOutputStream());
                byte[] bytes = new byte[10];
                dis.read(bytes);
                boolean breakLoop = false;
                do {
                    if (new String(bytes).length() != 0) {
                        dos.writeBytes(serverMessage + "\n");
                        dos.flush();
                        breakLoop = true;
                        dos.writeBytes("</BroadsoftDocument>" + "\n");
                        dos.flush();
                    }
                } while (!breakLoop);
            } 
            catch (IOException e) {
                e.printStackTrace();
            }
        }
    };
    myThread.start();
    }
} 
```

每次测试后，我都会尝试关闭服务器套接字，以便重新打开服务器套接字以进行下一次测试：

```
@After
public void tearDown() throws IOException, BroadsoftSocketException {
    System.out.println("@After");
    if (myServerSocket != null) {
        myServerSocket.close();
        myServerSocket = null;
            try {
                Thread.sleep(5000);
            } 
            catch (InterruptedException e) {
                // do nothing.
            }
    }
} 
```

但是，在从第二个测试开始的每个测试之前，我都会收到“java.net.BindException：地址已在使用：JVM_Bind”。我意识到我正在尝试为每个测试使用相同的端口，但不应该关闭套接字以释放端口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T15:39:32.167

`TIME_WAIT`当您尝试重新连接时，您的套接字很可能仍处于状态。我建议模拟这种外部依赖项，但如果您确实发现自己想要继续使用真正的套接字，那么请尝试设置重新绑定选项。在您的设置功能中，而不是`ServerSocket myServer = new ServerSocket(port);`do ：

```
final ServerSocket myServer = new ServerSocket();
myServer.setReuseAddress(true);
myServer.bind(new java.net.InetSocketAddress(port)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:35:36.540

1.  你已经在“setUp”中关闭了你的服务器套接字，你真的应该在一个`finally`块中完成它。
2.  端口可能不会立即释放。`ServerSocket`您可以通过将'reuseAdress设置为 来避免这种情况`true`。请参阅[setReuseAddress](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/ServerSocket.html#setReuseAddress%28boolean%29)。

我是第二个 SimonC：也许你最好一开始就避开插座。

# arrays - 返回数组中的所有值

> ID：14732685
> 
> 赞同：0
> 
> 时间：2013-02-06T15:30:33.543
> 
> 标签：arrays, matlab

对于以下函数`matlab`：

```
function s = support(x, y)
for i=1:length(x)
if(y(i)~=1)
s = x(i);
end
end
end 
```

我打算返回**所有**满足的值`if-statement`，但似乎该函数只返回满足 `if 语句的**最后一个元素。**如何返回所有值？我应该应用什么修改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:40:07.640

你的 s 值不是一个数组，所以你只返回最后一个值

```
function s = support(x, y)
j=1;
for i=1:length(x)
  if(y(i)~=1)
    s(j) = x(i);
    j=j+1;
  end
end 
```

另请注意，对于此类问题，Matlab 中有很多语法快捷方式，它们非常高效，这就是 Matlab 的强大之处。你可以写：

```
function s = support(x, y)
s=x(y~=1); 
```

（看逻辑索引就明白了）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T15:32:49.690

你可以简单地写

```
s = x(y~=1) 
```

`x`这将返回满足您的条件 ( `y~=1`)的所有元素。但是，如果`s`应该与 and 的大小相同`x`，`y`那么屏蔽条件为假的元素可能更有意义`s`，即

```
s = x;
s(y==1) = NaN 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:43:23.240

使用逻辑索引返回`x`满足条件的所有元素`y not 1`：

```
s = x( y ~= 1) 
```

# ios - 如何向 XCode 中的方法填充助手添加信息？

> ID：14732686
> 
> 赞同：2
> 
> 时间：2013-02-06T15:30:50.720
> 
> 标签：ios, objective-c, xcode, methods

我不知道怎么解释得很好，所以一张图片的价值超过一千字，希望我的截图能帮助到你。

谢谢你。

![在此处输入图像描述](../Images/9a83bc75570492dcd45dce9f47b44da0.png)

编辑：正如您在第一个中看到的那样`id init`，我指向一个包含有关`id init`构造函数/方法/选择器的一些信息的矩形，但我猜这些信息来自苹果`NSObject init`，我希望我的构造函数/方法/选择器提示额外信息，而在方法填充助手中选择，如您在第二个中看到的`id initWithGPSPointNum ...`没有信息，因为我不知道如何将我想要的信息放在那里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:56:09.413

帮助提示来自已安装的文档集。

您可以为您自己的自定义类生成和安装文档集，并将它们安装在 Xcode 中以获取这些额外信息以及自动完成功能。

一种方便的方法是[appledoc](http://gentlebytes.com/appledoc/)

这使用方便和熟悉的语法，并生成 Web 格式的输出以及文档集，甚至可以配置为自动生成和安装文档集。

# email - Google 快讯式服务的模式

> ID：14732687
> 
> 赞同：0
> 
> 时间：2013-02-06T15:30:52.547
> 
> 标签：email, parse-platform, alerts, google-alerts

我正在构建一个不断收集数据的应用程序。我想为用户提供一个可定制的警报系统，他们可以在其中为他们想要通知的信息类型指定参数。最重要的是，我希望用户能够指定警报的频率（当它们出现时，每日摘要，每周摘要）。

有没有关于这个主题的最佳实践或指南？

我的直觉告诉我排队和工人会参与其中，但我不确定如何。

我使用 Parse.com 作为我的数据库，并且还可能使用 Lucene 风格的搜索来索引所有内容。因此，这开启了用户指定查询字符串以指定他/她想要的警报的可能性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:56:53.233

如果您使用的是 Rails、Heroku 和 Parse，我们已经做了类似的事情。我们实际上创建了第二个 Heroku 应用程序，它没有 web dyno——它只有一个 worker dyno。那个人仍然可以访问同一个 Parse.com 帐户并在 rake 任务中运行其所有任务，就像他们在此处指定的那样：

[https://devcenter.heroku.com/articles/scheduler#defining-tasks](https://devcenter.heroku.com/articles/scheduler#defining-tasks)

我们有几个类可以处理繁重的工作：

```
class EmailWorker
  def self.send_daily_emails
    # queries Parse for what it needs, loops through, sends emails
  end
end 
```

我们在 lib/tasks 中也有 scheduler.rake：

```
require 'parse-ruby-client'
task :send_daily_emails => :environment do
  EmailWorker.send_daily_emails
end 
```

我们在 Heroku 中的调度器面板是这样的：

```
rake send_daily_emails 
```

我们将其设置为每晚运行。请注意，面向公众的 Heroku Web 应用程序不执行此工作，而是“调度程序”版本。您只需要确保每次更新代码时都推送到两者。这种方式是免费的，但如果你想组合它们，这很简单，因为它们是相同的代码库。

您也可以通过`heroku run rake send_daily_emails`在您的开发机器上运行来测试它。

# c++ - 提升链接错误

> ID：14732689
> 
> 赞同：1
> 
> 时间：2013-02-06T15:30:56.017
> 
> 标签：c++, boost, linker

我已经安装了 boost 库，并且我已经将 lib 和 include 目录链接到我的解决方案。以及设置为*Not Using Precompiled Headers*。但是当我测试提供的简单示例时，我在构建时收到了 Link 错误。

```
#include <boost/regex.hpp>
#include <iostream>
#include <string>

int main()
{
    std::string line;
    boost::regex pat( "^Subject: (Re: |Aw: )*(.*)" );

    while (std::cin)
    {
        std::getline(std::cin, line);
        boost::smatch matches;
        if (boost::regex_match(line, matches, pat))
            std::cout << matches[2] << std::endl;
    }
} 
```

> 错误 1 ​​错误 LNK1104：无法打开文件 'libboost_regex-vc110-mt-gd-1_51.lib'

我搜索了lib文件夹，这个lib文件不存在。我再次下载并安装，它不存在。看起来它已经在这个版本的 boost 中发出了。

顺便说一句，我已经安装了所有的正则表达式，我正在使用 VS12。

更新：如果其他人有同样的问题，尽量**不要**使用 boost 安装程序并自己构建它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:00:55.537

必须构建一些 Boost 库 -

> 唯一必须单独构建的 Boost 库是： ... Boost.Regex

（来自[仅标题库](http://www.boost.org/doc/libs/1_46_1/more/getting_started/windows.html#header-only-libraries)）

简单（但不推荐）的方法是从 Internet 下载所需的二进制文件。例如 - [boostlib - 修订版 9： /trunk/stage/lib](http://code.ingres.com/boostlib/trunk/stage/lib/)。然后将其添加到 *链接器 -> 常规 -> 附加库目录中*

# mysql - 在 MySQL 中根据时区更改 CURRENT_TIMESTAMP 值

> ID：14732692
> 
> 赞同：1
> 
> 时间：2013-02-06T15:31:00.780
> 
> 标签：mysql, mysqldump

我想将我们的 mysql 服务器从共享主机迁移到本地服务器。

当前服务器位于 MST 时区，databsse 中 CURRENT_TIMESTAMP 的值存储为 -7:00 GMT。

现在我想在印度的专用服务器上移动完整的应用程序。还希望将存储在 -7:00 GMT 中的日期值转换为 +5:30 GMT。

我可以通过编写脚本来更新时间来完成更新日期的任务，但是我想知道是否有任何方法可以从数据库本身执行此操作（在导入时或在导出时）

**mysql 版本 5.0.96-日志。我没有在 UTC 中获得选项导出时间戳。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:41:25.787

When using mysqldump, set the flag: --tz-utc to force all timestamps to be exported as UTC. ( [http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_tz-utc](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_tz-utc) ). Note here **--tz-utc is enabled by default**. So you should have to do nothing: but test first :)

If just working with timestamps on the server you don't have to do anything to convert them, from the documentation on TIMESTAMP post MySQL 4.1 ( [http://dev.mysql.com/doc/refman/4.1/en/timestamp.html](http://dev.mysql.com/doc/refman/4.1/en/timestamp.html) ):

> "values still are stored in UTC, but are **converted from the current time zone for storage, and converted back to the current time zone for retrieval**. As long as the time zone setting remains constant, you get back the same value you store. If you store a TIMESTAMP value, and then change the time zone and retrieve the value, the retrieved value is different from the value you stored."

This is easy to test:

1.  Save a timestamp to your table
2.  Change the server's timezone
3.  Retrieve it: the return value should reflect the new timezone.

So another option is you could just have both the servers set to the same timezone while doing the export / import, than set them back to the correct timezone(s) after it is complete, but note with MySQLDump this should not be necessary.

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-02-14T22:30:45.317

一般语法

```
SELECT DATE_ADD(<column_name>, INTERVAL HOUR); 
```

用于将 UTC 更改为 MST

```
SELECT DATE_ADD(NOW(), INTERVAL 7 HOUR); 
```

# symfony - phpexcel文件不存在

> ID：14732696
> 
> 赞同：0
> 
> 时间：2013-02-06T15:31:13.497
> 
> 标签：symfony, phpexcel

我正在尝试使用 PHPExcel 阅读 xlsx 文档。我的文档在我的本地，我的代码向我显示了这个错误。*

> 无法打开 MunicipioPreinscripcion.xlsx 进行阅读！文件不存在。

*

这是我的代码（我的 excel 文档是我的控制器的当前目录）

```
#namespace Backend\AlumnosBundle\Controller
define('PHPEXCEL_ROOT', dirname(__FILE__) . '/');

    $inputFileName = 'MunicipioPreinscripcion.xlsx';
    $inputFileNameWithPath = PHPEXCEL_ROOT.$inputFileName;

    if(file_exists($inputFileNameWithPath)) {
        echo 'exist'; //Allways show exist
        echo  $inputFileNameWithPath."<br>";
    } else {
        echo 'dont exist';
    }

    /**  Identify the type of $inputFileName  **/
    $inputFileType = PHPExcel_IOFactory::identify($inputFileName);
    /**  Create a new Reader of the type that has been identified  **/
    $objReader = PHPExcel_IOFactory::createReader($inputFileType);
    /**  Advise the Reader that we only want to load cell data  **/
    $objReader->setReadDataOnly(true);
     /**  Load $inputFileName to a PHPExcel Object  **/
    $objPHPExcel = $objReader->load($inputFileName); //This is where throw the error 
```

我做错了什么？如何显示 load() 方法正在查找文件的目录？我迷路了 提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T07:04:45.197

已解决：我认为它没有加载此目录（mybundle/controller）中的权限。我已将 xlsx 文件移动到 web/upload 目录，这可以正常工作。

```
$objPHPExcel = $this->get('xls.load_xls2007')->load($this->get('kernel')->getRootDir() .'/../web/upload/MunicipioPreinscripcion.xlsx'); 
```

# android - 存储绘图画布并稍后恢复

> ID：14732702
> 
> 赞同：1
> 
> 时间：2013-02-06T15:31:21.357
> 
> 标签：android, drawing, android-canvas

我在我的 Android 应用程序上制作了一个简单的白板，用户可以在其中绘制一些东西。我想添加一个撤消功能，以便他能够回到他之前的操作。

在我的`Touch Start`活动中，我添加了以下代码，它基本上将当前画布添加到一个`ArrayList`并创建一个新画布以避免相同的引用。

```
previousDrawing.add(this.canvas);
this.canvas = new Canvas(this.bitmap); 
```

然后，在我的`undo`方法中，我添加了以下代码：

```
if (previousDrawing.size() > 0)
{
     // Remove last
    this.canvas = previousDrawing.remove(previousDrawing.size() - 1);
    this.canvas.setBitmap(this.bitmap);
} 
```

它根本不起作用。我的意思是，我可以使用`this.canvas.drawPath(this.path, this.paint);`但不能保存和恢复以前的画布在我的画布上绘图。

你能帮我做吗？

提前致谢。

**编辑：** 我也尝试过使用`saveLayer method`. 但是当我保存时，我不再能够在画布上绘图。这是正常行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:59:16.557

尝试`drawBitmap`代替`setBitmap`

`this.canvas.drawBitmap(this.bitmap, 0, 0, null);`

**编辑**

```
if (previousDrawing.size() > 0)
{
     // Remove last
    this.bitmap = previousDrawing.get(previousDrawing.size() - 1);
    this.canvas.drawBitmap(this.bitmap, 0, 0, null);
    previousDrawing.remove(previousDrawing.size() - 1);
} 
```

参考[链接](http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap%28int%5B%5D,%20int,%20int,%20float,%20float,%20int,%20int,%20boolean,%20android.graphics.Paint%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:55:23.673

画布不保存像素。位图可以。所以保存和恢复画布是没有用的。您可以保存和恢复位图，但这是非常消耗内存的操作。

您最好记录用户绘图操作。要回到历史，您应该重新绘制除最后一个之外的所有动作。为了使其更快，您可以保留几个关键历史位图。因为从头开始重绘所有内容很慢......

# html - 两个 iframe。带有链接的菜单。另一个，网站出现的地方。我需要网站始终出现在 iframe 中

> ID：14732707
> 
> 赞同：1
> 
> 时间：2013-02-06T15:31:32.460
> 
> 标签：html, css

演示： http: [//mydemos.site90.net/](http://mydemos.site90.net/)

基本上它是我的不同网站的网络宣传。当用户单击其中一个链接时，站点会缩小以适合左侧的 iframe。并且当用户浏览该站点时，该站点将停留在 iframe 中，而不是在另一个窗口中打开。谷歌翻译器可以翻译 iframe 中的内容。谷歌翻译器在翻译后出于某种原因在顶部显示了它的搜索栏和菜单，并且一些网站没有缩小。我是编码新手，所以我的代码可能很麻烦。非常需要任何帮助。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"         "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<!-- saved from url=(0014)about:internet --><HTML><HEAD><TITLE>Demo</TITLE>
<META content="text/html; charset=ISO-8859-1" http-equiv=Content-Type>
<STYLE type=text/css>BODY {
BACKGROUND-COLOR: #000000
}
</STYLE>

<STYLE type=text/css>A:link {
COLOR: #bdbdbd
}
A:visited {
COLOR: #bdbdbd
}
A:hover {
COLOR: #ffffff; TEXT-DECORATION: none
}
A:active {
COLOR: #bdbdbd; TEXT-DECORATION: none
}
</STYLE>

<SCRIPT type=text/javascript"></SCRIPT>
<!--[if lt IE 7]> 
<style type="text/css">    
img { behavior: url("pngfix.htc"); } 
</style> 
<![endif]-->
<STYLE type=text/css media=screen>#YouTube2 {
VISIBILITY: hidden
}
</STYLE>

<META name=GENERATOR content="MSHTML 8.00.6001.19394"></HEAD>
<BODY>

<IFRAME 
style="Z-INDEX: 10; POSITION: fixed; BORDER-BOTTOM-STYLE: none; PADDING-BOTTOM: 0px;         BORDER-RIGHT-STYLE: none; MARGIN: 0px; PADDING-LEFT: 0px; WIDTH: 79%; PADDING-RIGHT: 0px;     BORDER-TOP-STYLE: none; HEIGHT: 100%; BORDER-LEFT-STYLE: none; TOP: 0px; PADDING-TOP: 0px;      LEFT: 0px" 
id=iframe1 border=0 src="http://www.crimemapping.com/map.aspx" frameBorder=0     name=iframe1 
cellspacing="0"></IFRAME></IFRAME>

<DIV 
style="Z-INDEX: 10; POSITION: absolute; TEXT-ALIGN: left; PADDING-BOTTOM: 0px; MARGIN:     0px; PADDING-LEFT: 0px; WIDTH: 134px; PADDING-RIGHT: 0px; HEIGHT: 20px; TOP: 9px; PADDING-      TOP: 0px; LEFT: 80%" 
id=bv_Text2><A style="TEXT-DECORATION: none" 
href="http://craigslist.com/"><SPAN 
style="FONT-FAMILY: Arial; COLOR: #ffffff; FONT-SIZE: 18px"><STRONG><I>DEMO<SPAN 
style="COLOR: red">D</SPAN>DEMO</I></STRONG></SPAN></A></DIV></A></B></SPAN>
<DIV> </DIV>

<DIV 
style="Z-INDEX: 10; POSITION: absolute; TEXT-ALIGN: left; PADDING-BOTTOM: 0px; MARGIN:     0px; PADDING-LEFT: 0px; WIDTH: 49px; PADDING-RIGHT: 0px; HEIGHT: 16px; TOP: 50px; PADDING-    TOP: 0px; LEFT: 80%" 
id=bv_Text15><SPAN style="FONT-FAMILY: Arial; COLOR: #ffffff; FONT-SIZE: 20px" 
face="Arial" color="#FFFFFF"><B><A style="TEXT-DECORATION: none"> <a><a     href="http://free-website-translation.com/" id="ftwtranslation_button" hreflang="en"     title="" style="border:0;"><img src="http://free-website-    translation.com/img/fwt_button_en.gif" id="ftwtranslation_image" alt="Free Website     Translator" style="border:0;"/></a> <script type="text/javascript" src="http://free-website-    translation.com/scripts/fwt.js" /></script></A></B></SPAN></DIV>

<DIV 
style="Z-INDEX: 10; POSITION: absolute; TEXT-ALIGN: left; PADDING-BOTTOM: 0px; MARGIN:     0px; PADDING-LEFT: 0px; WIDTH: 49px; PADDING-RIGHT: 0px; HEIGHT: 16px; TOP: 100px; PADDING-  TOP: 0px; LEFT: 80%" 
id=bv_Text15><SPAN style="FONT-FAMILY: Arial; COLOR: #ffffff; FONT-SIZE: 20px" 
face="Arial" color="#FFFFFF"><B><A style="TEXT-DECORATION: none" 
href="http://www.youtube.com" <a>Demo1</A></B></SPAN></DIV>

</body>

</DIV> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:10:49.500

您需要先`ID`为您的元素提供 s `iframe`，然后您可以通过在锚标签中提供ID 来将另一个中的链接设置`iframe`为指向第一个。假设你有一个简单的 2 s 网页布局：`iframe``target``A``target="iframe1"``iframe`

```
<html>
  <head>
    <title>link from one iframe to another iframe</title>
  <head>
  <body>
    <iframe id="iframe1" src="http://example.com"></iframe>
    <iframe id="iframe2" src="some_page_with_links.html"></iframe>
  </body>
</html> 
```

并且`some_page_with_links.html`来自的文档`iframe2`具有以下结构：

```
<html>
  <head>
    <title>this is iframe2 that contains links to iframe1</title>
  <head>
  <body>
    <a href="http://www.google.com" target="iframe1">open Google in iframe1</a>
  </body>
</html> 
```

然后， 中的链接`iframe2`将告诉浏览器在您的 中打开它，`iframe1`由`target`锚`A`标记的属性设置。

*但是请注意，如果您在 Web 服务器中设置`X-Frame-Options`了响应标头，这将不适用于外部域。`SAMEORIGIN`其他限制可能适用，具体取决于您的配置以及您是否计划链接到外部域。*

我还注意到您链接到的示例中有一些 HTML 标记关闭错误。例如：

```
<A style="TEXT-DECORATION: none" href="www.ebay.com" <a>Demo2</A> 
```

真的应该是：

```
<A style="TEXT-DECORATION: none" href="www.ebay.com" target="ID_of_iframe1">Demo2</A> 
```

干杯!

# solr - solr 带有变音符号的自动建议

> ID：14732713
> 
> 赞同：3
> 
> 时间：2013-02-06T15:31:41.737
> 
> 标签：solr, tokenize, diacritics, autosuggest

我将 solr4 与 Autosuggest 一起使用（如此[处](http://wiki.apache.org/solr/TermsComponent)`TermsComponent`所述）我们正在执行一个正则表达式“startsWith”-search，它忽略了大写/小写，整个 searchQuery 看起来像这样：

```
<solr>/terms
?terms.fl=name
&terms=true
&terms.limit=5
&terms.regex=<term>.*
&terms.regex.flag=case_insensitive
&qt=%2Fterms 
```

让我举几个例子，它会返回什么：

```
test -> Test Listing; test lowercase
Test -> Test Listing; test lowercase 
```

不幸的是，此解决方案无法处理变音符号、变音符号、重音符号 .. 所以以下方法不起作用：

```
têst -> Test Listing; test lowercase; Têst áccènt
Test -> Test Listing; test lowercase; Têst áccènt 
```

该字段是`string`- 我也尝试过标记化`test_en`，但没有成功

```
<field name="name" type="string" indexed="true" stored="true" required="true" /> 
```

对此自动建议启用双向重音搜索的最佳方法是什么？

* * *

编辑：AnalyzerSuggester 的更改：

```
 <searchComponent class="solr.SpellCheckComponent" name="autosuggest">
    <lst name="spellchecker">
      <str name="name">autosuggest</str>
      <str name="classname">org.apache.solr.spelling.suggest.Suggester</str>
      <str name="lookupImpl">org.apache.solr.spelling.suggest.fst.AnalyzingLookupFactory</str>
      <str name="storeDir">autosuggest</str>
      <str name="buildOnCommit">true</str>
      <str name="field">asug</str>
      <str name="suggestAnalyzerFieldType">text_asug</str>

      <!-- Suggester properties -->
      <bool name="exactMatchFirst">true</bool>
    </lst>
  </searchComponent>
  <requestHandler class="org.apache.solr.handler.component.SearchHandler" name="/autosuggest">
    <lst name="defaults">
      <str name="spellcheck">true</str>
      <str name="spellcheck.dictionary">autosuggest</str>
      <str name="spellcheck.onlyMorePopular">true</str>
      <str name="spellcheck.count">5</str>
      <str name="spellcheck.collate">true</str>
    </lst>
    <arr name="components">
      <str>autosuggest</str>
    </arr>
  </requestHandler> 
```

.

```
<fieldType name="text_asug" class="solr.TextField" positionIncrementGap="100">
        <analyzer type="index">
        <tokenizer class="solr.KeywordTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.ASCIIFoldingFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.KeywordTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.ASCIIFoldingFilterFactory"/>
      </analyzer>
    </fieldType> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T03:59:09.207

这里的问题是，术语组件适用于搜索和查询的索引标记。因此，如果您进行 unicode 折叠（这就是您所做的），您将存储折叠的文本版本。您将匹配它没有重音，但您也将得到它没有重音。

我可以想到两个选择：

1）将折叠和非折叠项存储在一个字段中。所以以某种方式让“Têst áccènt”映射到“测试口音|Têst áccènt”。您匹配前缀“Test..”，然后在客户端上提取第二个术语。但是，如何做到这一点可能很棘手。

2) 改用[Suggester](https://wiki.apache.org/solr/Suggester)。这建立在拼写检查器之上，并且 - 如果我正确阅读文档 - 允许指定替代 field_type，其分析器在建议者的索引/查询期间使用（使用 solrconfig.xml 中几乎没有记录的 queryAnalyzerFieldType 参数）。因此，您的原始文本以折叠形式复制到建议者中。但是，可以推测，一旦 Suggester 匹配了某些东西，它就会返回原始形式。但是，我不确定。主要是因为，它被宣传为刚刚诞生的 Lucene/Solr 4.1 AnalyzingSuggester 的一项[功能](http://blog.mikemccandless.com/2012/09/lucenes-new-analyzing-suggester.html)。事实上，这篇文章专门介绍了您的用例：

> 使用折叠或规范化大小写、重音等的分析器（例如，使用 ICUFoldingFilter），建议将匹配而不管大小写和重音。例如，查询“ame...”会建议 Amélie。

问题是此时您需要自己编写一个完整的示例。指导很少。但它（AnalyzingSuggester）可能是你最好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T17:21:46.517

您将需要创建一个自定义的 fieldType，可能类似于该`text_en`字段，但它也实现了[ASCIIFilterFoldingFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.ASCIIFoldingFilterFactory)来处理索引和查询时的变音符号转换。

# iphone - Does not sort the NSMutableDictionary?

> ID：14732721
> 
> 赞同：0
> 
> 时间：2013-02-06T15:31:56.743
> 
> 标签：iphone, ios, restkit

I got the data from the web service like the below order

```
<?xml version="1.0" encoding="UTF-8"?><Racine><Resultat_detaille><XML.03_-_Caisse_Snack><Espece>234,00</Espece><CA>234,00</CA><Offert>0,00</Offert></XML.03_-_Caisse_Snack> 
```

But...

If the xml change to NSMutableDictionary, its goes to the sorting order.

```
"Resultat_detaille" =         {
    "XML.03_-_Caisse_Snack" =             {
        CA = "234,00";
        Espece = "234,00";
        Offert = "0,00";
    }; 
```

I don't want sorting, but the dictionary is sorted order. I am using the RestKit for getting the data from the web. How can I get the original data to the dictionary? Please help me. Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:45:14.550

I don't know why you want to avoid this. But dictionary contains object in key-value pairs and it does not depend any sorting. But if you want the data in same manner as in XML, then you can parse it manually using NSXmlParse and also can store each dictionary object in array. like:

```
 arr[0] = CA -> "234,00";
    arr[1] = Espece -> "234,00";
    arr[2] = Offert -> "0,00"; 
```

I am not giving you actual code. I am telling only logic behind array objects here.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:34:41.577

`NSDictionary` is not sorted, it is not an array, order has no meaning to a structure like a dictionary

From the looks of your xml, it has been correctly parsed into a dictionary

# xaml - 找不到 DataTemplate.DataTriggers？

> ID：14732723
> 
> 赞同：0
> 
> 时间：2013-02-06T15:32:01.867
> 
> 标签：xaml, visual-studio-2012, winrt-xaml, app.xaml

尝试在我的 XAML for Windows 8 Metro 应用程序中使用 DataTemplate.DataTriggers 时发生了一件非常奇怪的事情。在我的 App.xaml 中，我正在为我的数据定义模板。我想使用 DataTriggers，但是当我在 VS2012 编辑器中键入它时，我收到错误消息

> 在“DataTemplate”类型中找不到可附加属性“DataTriggers”。

和

> 成员“DataTriggers”无法识别或无法访问。

当我尝试为 DataTemplate 设置 DataType 属性时，会发生类似的问题：

> 在类型“DataTemplate”中找不到属性“DataType”。

我在这里想念什么？没有这些东西，DataTemplate 可以正常工作，但在我的项目中使用它们仍然会容易得多。这是我的 XAML 的一个简短片段：

```
<DataTemplate x:Key="MyTemplate" >                
            <Grid HorizontalAlignment="Left" Width="450" Height="100">
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="10" />
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Rectangle Grid.Row="0" Grid.RowSpan="3" Stretch="UniformToFill" Width="10">
                    <Rectangle.Fill>
                        <SolidColorBrush Color="#FF425400" />
                    </Rectangle.Fill>
                </Rectangle>
                <TextBlock Text="{Binding Title}" Style="{StaticResource TitleTextStyle}" Grid.Column="1" Grid.Row="0" Grid.ColumnSpan="2"   />
                <TextBlock Text="{Binding Teaser}" Style="{StaticResource SubtitleTextStyle}"  Grid.Column="1" Grid.Row="1"  Grid.ColumnSpan="2"/>
                <TextBlock Text="{Binding Content}" Style="{StaticResource BasicTextStyle}" Grid.Column="1" Grid.Row="2"  />
                <TextBlock Text="{Binding TimeDesc}" Style="{StaticResource BasicTextStyle}" Grid.Column="2" Grid.Row="2"  />
            </Grid>       
            <DataTemplate.DataTriggers>

            </DataTemplate.DataTriggers>
        </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T15:39:19.607

触发器仅在 WPF 中可用，在任何其他 XAML 平台上均不可用。常见的替代方法是 VisualStates、转换器或对代码进行更改。

# java - Spring DeferredResult setResult 导致 404

> ID：14732724
> 
> 赞同：2
> 
> 时间：2013-02-06T15:32:04.833
> 
> 标签：java, spring, spring-mvc

我正在使用新的 spring 3.2 异步 servlet 请求。除了在这种情况下，一切都很好......

```
@RequestMapping("/test")
@ResponseBody
public DeferredResult<byte[]> test(InputStream is, HttpServletResponse response, WebRequest request) {
    if (someTest()) {
        deferredResult.setResult(DATA);
        return deferredResult;
    }

    deferredResult.onTimeout(new Runnable() {

        @Override
        public void run() {
            deferredResult.setResult(DATA);
        }
    });

    // Use deferredResult in another thread when needed

    return deferredResult;
} 
```

什么时候`someTest()`是真的 spring/tomcat 返回 404。我不知道我应该怎么做或者为什么会发生这种情况？我认为这可能是因为已经创建了 Servlet 异步上下文。这是一个错误还是我做错了什么？

任何信息将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:17:27.277

我认为您需要`return deferredResult`从 if 条件中删除该语句。

并且 setData 也应该在 return 语句之后完成。因此，您需要从某个服务器端事件的单独线程中执行此操作。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:37:13.667

我想通了，请看下面...

```
@RequestMapping("/test")
@ResponseBody
public DeferredResult<byte[]> test(InputStream is, HttpServletResponse response, WebRequest request) {
    if (someTest()) {
        response.getOutputStream().write(DATA);
        return null;
    }

    deferredResult.onTimeout(new Runnable() {

        @Override
        public void run() {
            deferredResult.setResult(DATA);
        }
    });

    // Use deferredResult in another thread when needed

    return deferredResult;
} 
```

诀窍是返回 null 并将响应手动写入 ServletResponse。

希望这对其他人有用:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-11T12:28:25.930

我最近遇到了一个奇怪的问题，它`404`使用了一个遗留项目，`DeferredResult`这是一个添加`@ResponseBody`. 一个简单的可运行示例：

```
@SpringBootApplication
public class TestApp {

    public static void main(String[] args) {
        SpringApplication.run(TestApp.class, args);
    }

    @Controller
    static class Rest {

        @Autowired
        private MyService myService;

        @GetMapping("/get")
        @ResponseStatus(HttpStatus.CREATED)
        @ResponseBody // <-- with and without
        public DeferredResult<String> get() {
            return myService.go();
        }
    }

    @Service
    static class MyService {
        public DeferredResult<String> go() {

            DeferredResult<String> result = new DeferredResult<>();

            Executors.newSingleThreadExecutor().submit(() -> {
                System.out.println("starting work");
                LockSupport.parkNanos(TimeUnit.SECONDS.toNanos(5));
                System.out.println("done with work");
                result.setResult("done");
            });

            return result;
        }
    }

} 
```

# windows-phone-7 - Phonegap 和 windows phone 原生框架过渡

> ID：14732727
> 
> 赞同：0
> 
> 时间：2013-02-06T15:32:17.657
> 
> 标签：windows-phone-7, cordova

我正在尝试查找一些文档来学习如何为 Windows 手机制作 phonegap 应用程序，使用 HTML 页面的本机框架转换，但我找不到这样的插件或代码或任何有用的文档。

我到底想做的是：

当我尝试使用 javascript 代码导航到 HTML 代码中的其他页面时：

```
window.location.href = "newpage.html"; 
```

我希望我的应用程序导航到不同的页面，就像原生应用程序正在做过渡效果一样，例如，当应用程序启动时，我们可以看到这个页面/框架过渡效果。

如何为 HTML 页面做那种过渡效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:42:50.057

您应该考虑使用 jQuery Mobile 为 Phonegap 应用程序构建 HTML 页面。

[http://jquerymobile.com](http://jquerymobile.com)

它很有用，因为它有一个内置的路由器，可以检测您何时尝试更改为另一个 HTML 页面。（以编程方式或通过用户单击链接）

然后它可以劫持该事件并使其异步加载下一页（在 Phonegap 应用程序的情况下，这非常快，因为页面已经存在于设备上）。然后它会在显示新页面时应用您所说的过渡（幻灯片、淡入淡出等）。

它是完全可定制的，大部分行为都是通过创建简单的 HTML 标记和添加数据属性来配置的。例如

```
<a href="next-page.html" data-role="button" data-transition="flow">next page</a> 
```

我也喜欢它，因为如果您决定走“单页应用程序”路线 - 您也可以这样做。我个人喜欢 Phonegap + jQuery Mobile + Backbone.js 的组合，其中 Backbone.js 动态生成我的 HTML jQuery Mobile 页面，Phonegap 将它们包装在一个应用程序中。

# iphone - 使用 iCloud 解决核心数据中的冲突

> ID：14732728
> 
> 赞同：1
> 
> 时间：2013-02-06T15:32:19.893
> 
> 标签：iphone, ios, core-data, sync, icloud

我正在编写一个使用 Core Data 并与 iCloud 同步的应用程序。为此，我设置了一个 UIManagedDocument，如下所示：

```
UIManagedDocument *document = [[UIManagedDocument alloc] initWithFileURL:[self iCloudStoreURL]];
        document.persistentStoreOptions = @{NSPersistentStoreUbiquitousContentNameKey: [document.fileURL lastPathComponent], NSPersistentStoreUbiquitousContentURLKey: [self iCloudCoreDataLogFilesURL], NSMigratePersistentStoresAutomaticallyOption: @YES, NSInferMappingModelAutomaticallyOption : @YES};
        self.mydoc = document;
        [document release];

        [document.managedObjectContext setMergePolicy:NSMergeByPropertyObjectTrumpMergePolicy];

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(documentContentsChanged:) name:NSPersistentStoreDidImportUbiquitousContentChangesNotification object:document.managedObjectContext.persistentStoreCoordinator];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(documentStateChanged:) name:UIDocumentStateChangedNotification object:document];

        if (![[NSFileManager defaultManager] fileExistsAtPath:[self.mydoc.fileURL path]]) {
            // does not exist on disk, so create it
            [self.mydoc saveToURL:self.mydoc.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
                [self populateTable];//synchronous call. few items are added
                [self iCloudIsReady];
            }];
        } else if (self.mydoc.documentState == UIDocumentStateClosed) {
            // exists on disk, but we need to open it
            [self.mydoc openWithCompletionHandler:^(BOOL success) {
                [self iCloudIsReady];
            }];
        } else if (self.mydoc.documentState == UIDocumentStateNormal) {
            // already open and ready to use
        }
    } 
```

我对这种方法的问题是，在两台设备上运行应用程序时，我不断收到“乐观锁定失败”。我在 Apple 的核心数据文档中读到，“避免”此类问题的一种方法是将合并策略设置为 NSMergeByPropertyObjectTrumpMergePolicy，我已经在这样做但由于某种原因无法正常工作。

我找不到的一件事是如何解决这个问题。例如，如果这是可能发生的事情，我的应用程序至少应该意识到并准备好处理这种行为。但我不知道如何处理这个问题。例如，如何获取冲突对象并解决它们？因为每次发生此故障时，我都会在尝试保存文档时开始收到 UIDocumentStateSavingError ，而停止收到此错误的唯一方法是终止应用程序并重新启动它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:06:03.847

我终于想通了（至少，我想我做到了）。显然，在 iOS6+ 上（我不知道 iOS5） UIManagedDocument 会为你处理所有的合并。因此，下面只负责调用“mergeChangesFromContextDidSaveNotification:”的观察者实际上是在合并刚刚合并的内容。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(documentContentsChanged:) name:NSPersistentStoreDidImportUbiquitousContentChangesNotification object:document.managedObjectContext.persistentStoreCoordinator];

...

- (void)documentContentsChanged:(NSNotification *)notification {
      [self.managedObjectContext mergeChangesFromContextDidSaveNotification:notification];
} 
```

调用“mergeChangesFromContextDidSaveNotification:”是负责触发“乐观锁定失败”的行。我删除了它，一切都开始按预期工作。不幸的是，这只持续了几个小时。现在我不断收到“iCloud Timed Out”错误，但我确信这是苹果的错。

无论如何，经过大量的错误和三种不同的 iCloud + Core Data 方法，我想我会坚持将 iCloud 集成到我的应用程序中。它太不稳定和错误。我真希望苹果能在 iOS6 中解决这个问题，iCloud + Core Data 是一个非常强大的工具，不幸的是，它还没有准备好。

感谢所有试图提供帮助的人。

# c# - 添加服务失败。服务元数据可能无法访问。确保您的服务正在运行并公开元数据

> ID：14732730
> 
> 赞同：0
> 
> 时间：2013-02-06T15:32:23.680
> 
> 标签：c#, wcf

嗨，我正在尝试创建 WCF，但出现此错误。

> 添加服务失败。服务元数据可能无法访问。确保您的服务正在运行并公开元数据。

错误详情

```
Error: Cannot obtain Metadata from http://localhost:3502/Service1.svc If this is a Windows (R) Communication Foundation service to which you have access, please check that you have enabled metadata publishing at the specified address.  For help enabling metadata publishing, please refer to the MSDN documentation at http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata Exchange Error    URI: http://localhost:3502/Service1.svc    Metadata inneh†ller en referens som inte kan l”sas. http://localhost:3502/Service1.svc.    Det gick inte att aktivera den beg„rda tj„nsten http://localhost:3502/Service1.svc. Du hittar mer information i serverdiagnostikloggarna.HTTP GET Error    URI: http://localhost:3502/Service1.svc    Ett fel uppstod n„r http://localhost:3502/Service1.svc h„mtades.    Beg„ran misslyckades med felmeddelandet:--<!DOCTYPE html><html>    <head>        <title>The type 'MinserviceWebb.Service1', provided as the Service attribute value in the ServiceHost directive, or provided in the configuration element system.serviceModel/serviceHostingEnvironment/serviceActivations could not be found.</title>        <meta name="viewport" content="width=device-width" />        <style>         body {font-family:"Verdana";font-weight:normal;font-size: .7em;color:black;}          p {font-family:"Verdana";font-weight:normal;color:black;margin-top: -5px}         b {font-family:"Verdana";font-weight:bold;color:black;margin-top: -5px}         H1 { font-family:"Verdana";font-weight:normal;font-size:18pt;color:red }         H2 { font-family:"Verdana";font-weight:normal;font-size:14pt;color:maroon }         pre {font-family:"Consolas","Lucida Console",Monospace;font-size:11pt;margin:0;padding:0.5em;line-height:14pt}         .marker {font-weight: bold; color: black;text-decoration: none;}         .version {color: gray;}         .error {margin-bottom: 10px;}         .expandable { text-decoration:underline; font-weight:bold; color:navy; cursor:hand; }         @media screen and (max-width: 639px) {          pre { width: 440px; overflow: auto; white-space: pre-wrap; word-wrap: break-word; }         }         @media screen and (max-width: 479px) {          pre { width: 280px; }         }        </style>    </head>    <body bgcolor="white">            <span><H1>Server Error in '/' Application.<hr width=100% size=1 color=silver></H1>            <h2> <i>The type 'MinserviceWebb.Service1', provided as the Service attribute value in the ServiceHost directive, or provided in the configuration element system.serviceModel/serviceHostingEnvironment/serviceActivations could not be found.</i> </h2></span>            <font face="Arial, Helvetica, Geneva, SunSans-Regular, sans-serif ">            <b> Description: </b>An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.            <br><br>            <b> Exception Details: </b>System.InvalidOperationException: The type 'MinserviceWebb.Service1', provided as the Service attribute value in the ServiceHost directive, or provided in the configuration element system.serviceModel/serviceHostingEnvironment/serviceActivations could not be found.<br><br>            <b>Source Error:</b> <br><br>            <table width=100% bgcolor="#ffffcc">               <tr>                  <td>                      <code>An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.</code>                  </td>               </tr>            </table>            <br>            <b>Stack Trace:</b> <br><br>            <table width=100% bgcolor="#ffffcc">               <tr>                  <td>                      <code><pre>[InvalidOperationException: The type 'MinserviceWebb.Service1', provided as the Service attribute value in the ServiceHost directive, or provided in the configuration element system.serviceModel/serviceHostingEnvironment/serviceActivations could not be found.]   System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses) +59638   System.ServiceModel.HostingManager.CreateService(String normalizedVirtualPath, EventTraceActivity eventTraceActivity) +1434   System.ServiceModel.HostingManager.ActivateService(ServiceActivationInfo serviceActivationInfo, EventTraceActivity eventTraceActivity) +52   System.ServiceModel.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath, EventTraceActivity eventTraceActivity) +598[ServiceActivationException: The service '/Service1.svc' cannot be activated due to an exception during compilation.  The exception message is: The type 'MinserviceWebb.Service1', provided as the Service attribute value in the ServiceHost directive, or provided in the configuration element system.serviceModel/serviceHostingEnvironment/serviceActivations could not be found..]   System.Runtime.AsyncResult.End(IAsyncResult result) +495736   System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result) +178   System.ServiceModel.Activation.ServiceHttpHandler.EndProcessRequest(IAsyncResult result) +6   System.Web.CallHandlerExecutionStep.OnAsyncHandlerCompletion(IAsyncResult ar) +129</pre></code>                  </td>               </tr>            </table>            <br>            <hr width=100% size=1 color=silver>            <b>Version Information:</b>ÿMicrosoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.17929            </font>    </body></html><!-- [InvalidOperationException]: The type 'MinserviceWebb.Service1', provided as the Service attribute value in the ServiceHost directive, or provided in the configuration element system.serviceModel/serviceHostingEnvironment/serviceActivations could not be found.   vid System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses)   vid System.ServiceModel.ServiceHostingEnvironment.HostingManager.CreateService(String normalizedVirtualPath, EventTraceActivity eventTraceActivity)   vid System.ServiceModel.ServiceHostingEnvironment.HostingManager.ActivateService(ServiceActivationInfo serviceActivationInfo, EventTraceActivity eventTraceActivity)   vid System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath, EventTraceActivity eventTraceActivity)[ServiceActivationException]: The service '/Service1.svc' cannot be activated due to an exception during compilation.  The exception message is: The type 'MinserviceWebb.Service1', provided as the Service attribute value in the ServiceHost directive, or provided in the configuration element system.serviceModel/serviceHostingEnvironment/serviceActivations could not be found..   vid System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult result)   vid System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result)   vid System.ServiceModel.Activation.ServiceHttpHandlerFactory.ServiceHttpHandler.EndProcessRequest(IAsyncResult result)   vid System.Web.HttpApplication.CallHandlerExecutionStep.OnAsyncHandlerCompletion(IAsyncResult ar)-->--. 
```

配置

```
 <?xml version="1.0"?>
<configuration>

  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>

    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5"/>
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <protocolMapping>
        <add binding="basicHttpsBinding" scheme="https" />
    </protocolMapping>    
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true"/>
  </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:03:06.730

它可能是您的协议绑定。

仅打开了 https 并且您正在尝试通过 http 获取元数据。

# objective-c - 可可的 Twitter SDK (OSX)

> ID：14732733
> 
> 赞同：-1
> 
> 时间：2013-02-06T15:32:30.747
> 
> 标签：objective-c, macos, cocoa, mgtwitterengine

我正在为可可（OSX 应用程序）寻找一个简单的 Twitter SDK。我听说过[MGTwitterEngine](https://github.com/mattgemmell/MGTwitterEngine)，但距离上次提交已经有 2 年了，所以我想知道你们是否还有另一个要推荐的 :-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:21:52.140

`MGTwitterEngine`没有更新，因为不再需要它。OS X 提供了两个框架，它们提供构建块来创建对社交服务的经过身份验证的请求。

*   [Accounts.framework](http://developer.apple.com/library/mac/#documentation/Accounts/Reference/AccountsFrameworkRef/_index.html#//apple_ref/doc/uid/TP40011024)让您可以访问用户在 Mountain Lion 中配置的帐户。请参阅`ACAccountStore`和`ACAccount`类。
*   [Social.framework](http://developer.apple.com/library/mac/#documentation/Social/Reference/Social_Framework/_index.html#//apple_ref/doc/uid/TP40012233)为您提供了一个`SLRequest`类来代表`ACAccount`.

# node.js - node-mongodb-native 或 Mongoose

> ID：14732739
> 
> 赞同：2
> 
> 时间：2013-02-06T15:32:52.883
> 
> 标签：node.js, mongoose, node-mongodb-native

我们将开发一个适用于 MongoDB 的应用程序。应用程序的用户将在 GUI 的帮助下创建自定义实体，因此我们在开发应用程序时没有任何预定义的实体。我们应该使用 mongodb-native 还是使用 Mongoose？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T23:11:20.453

如果您不打算使用预定义的实体或“模式”，请不要使用 Mongoose。我建议在本机驱动程序周围使用包装器，例如[https://github.com/kissjs/node-mongoskin](https://github.com/kissjs/node-mongoskin)，它可以完成本机驱动程序所做的一切，但要简单得多。

# soap - soapUI - 使用来自 Websphere Message Broker 的 WSDL

> ID：14732741
> 
> 赞同：0
> 
> 时间：2013-02-06T15:32:55.663
> 
> 标签：soap, wsdl, soapui, messagebroker

我正在使用 WebSphere Message Broker 做一个项目，这会产生 2 个 BAR 文件。一个是客户端，另一个是服务器。两者都部署在远程位置的代理中（楼上的服务器）。服务器流使用的 WSDL 位于消息集项目中。这是wsdl结构：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!-- Generated by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is JAX-WS RI 2.1.3.1-hudson-749-SNAPSHOT. -->
<definitions targetNamespace="http://ws.interact.bytesw.com/" name="TvPagaInteractWebService" xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://ws.interact.bytesw.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
  <types> 
    <xsd:schema>
      <xsd:import namespace="http://ws.interact.bytesw.com/" schemaLocation="TvPagaInteractWebServiceService.xsd"/>
    </xsd:schema>
  </types>
  <message name="ejecutarTransaccion">
    <part name="parameters" element="tns:ejecutarTransaccion"/>
  </message>
  <message name="ejecutarTransaccionResponse">
    <part name="parameters" element="tns:ejecutarTransaccionResponse"/>
  </message>
  <message name="consultarOperacion">
    <part name="parameters" element="tns:consultarOperacion"/>
  </message>
  <message name="consultarOperacionResponse">
    <part name="parameters" element="tns:consultarOperacionResponse"/>
  </message>
  <message name="consultarServicio">
    <part name="parameters" element="tns:consultarServicio"/>
  </message>
  <message name="consultarServicioResponse">
    <part name="parameters" element="tns:consultarServicioResponse"/>
  </message>
  <portType name="TvPagaInteractWebService">
    <operation name="ejecutarTransaccion">
      <input message="tns:ejecutarTransaccion"/>
      <output message="tns:ejecutarTransaccionResponse"/>
    </operation>
    <operation name="consultarOperacion">
      <input message="tns:consultarOperacion"/>
      <output message="tns:consultarOperacionResponse"/>
    </operation>
    <operation name="consultarServicio">
      <input message="tns:consultarServicio"/>
      <output message="tns:consultarServicioResponse"/>
    </operation>
  </portType>
  <binding name="TvPagaInteractWebServicePortBinding" type="tns:TvPagaInteractWebService">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
    <operation name="ejecutarTransaccion">
      <soap:operation soapAction=""/>
      <input>
        <soap:body use="literal"/>
      </input>
      <output>
        <soap:body use="literal"/>
      </output>
    </operation>
    <operation name="consultarOperacion">
      <soap:operation soapAction=""/>
      <input>
        <soap:body use="literal"/>
      </input>
      <output>
        <soap:body use="literal"/>
      </output>
    </operation>
    <operation name="consultarServicio">
      <soap:operation soapAction=""/>
      <input>
        <soap:body use="literal"/>
      </input>
      <output>
        <soap:body use="literal"/>
      </output>
    </operation>
  </binding>
  <service name="TvPagaInteractWebService">
    <port name="TvPagaInteractWebServicePort" binding="tns:TvPagaInteractWebServicePortBinding">
      <soap:address location="REPLACE_WITH_ACTUAL_URL"/>
    </port>
  </service>
</definitions> 
```

部署后，我想从soapUI 中使用它。但我不知道哪个端点配置它。我一直在尝试一些组合，包括代理连接的 IP 和端口。但是不起作用，请有人帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:39:15.397

在你的 WSDL 的底部，你有这个

```
<service name="TvPagaInteractWebService">
    <port name="TvPagaInteractWebServicePort" binding="tns:TvPagaInteractWebServicePortBinding">
      <soap:address location="REPLACE_WITH_ACTUAL_URL"/>
    </port>
</service> 
```

在 REPLACE_WITH_ACTUAL_URL 中，WMB 应该绑定此特定服务的地址，以便可以从外部访问它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:53:05.800

代理正在侦听的端口是侦听器的属性。SOAP 节点默认使用 EG 级别的嵌入式侦听器，因此您可以通过执行以下命令找到它：

mqsireportproperties -e -o HTTPConnector -r

此端口可在此信息中找到，但也会显示当前 URL 注册。

服务绑定的路径由 SOAP 节点本身的 URL 属性定义，您可以从工具包中找到该属性。

# heroku - 连接 Heroku Postgres 数据库需要很长时间

> ID：14732742
> 
> 赞同：2
> 
> 时间：2013-02-06T15:32:59.613
> 
> 标签：heroku

在启用 ssl 后使用 Dbeaver 客户端连接到 Heroku Postgres 数据库并使用 `org.postgresql.ssl.NonValidatingFactory`大约需要 4-5 分钟才能连接到数据库。

这种行为正常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-05T19:16:25.693

只需取消选中“显示非默认数据库”即可。

它崩溃/冻结，因为它试图在该主机中加载大量数据库

![dbeaver 取消选中](../Images/d95c70cc9382348a9f7e672cccb52e4c.png "dbeaver 取消选中")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T03:23:08.143

No, this is not normal at all. Connecting should be quite instantaneous. A few seconds is already way too long, and minutes is completely off, so something else is going on.

If you try connecting with some other tool (like `psql` directly), do you have the same problem? I'd check there to make sure your code or some dependency is not doing something odd.

# actionscript-3 - 用于读取和绘制 GIS 数据的 AS3 库（shp 文件）

> ID：14732743
> 
> 赞同：0
> 
> 时间：2013-02-06T15:33:01.367
> 
> 标签：actionscript-3, flash, map, gis

我正在开发一个应该显示 GIS 数据的应用程序。我以前在 Processing 中对这种数据集有过经验，我正在寻找一个好的 AS3 库来帮助我。

现在我正在测试 Edwin van Rijkom 的库（[此处](http://code.google.com/p/vanrijkom-flashlibs/)为 shp 和 dfp 库），遵循我在[这里](http://vis4.net/blog/posts/reading-shapefiles-in-as3/)找到的一些很好的教程。

不知道有没有什么好的选择？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:06:59.310

好吧，如果有人需要，我会自己回复。

我找到了 Andy Woodruff 的[这个](http://andywoodruff.com/blog/simple-shapefile-drawing-in-actionscript-3/)库，它基本上是 Edwin van Rijkom 的库的包装器，但它更容易处理数据

希望能帮助到你！

# android - 从对象Android创建键数组

> ID：14732748
> 
> 赞同：0
> 
> 时间：2013-02-06T15:33:14.880
> 
> 标签：android, arrays

我想在一个对象中创建一个包含所有键的数组有人知道如何在 Android 中执行此操作吗？在 iOS 我已经做到了

```
NSDictionary *variablesDictionary = [[NSDictionary alloc] init];
// ^^ full of variables and keys...

NSString *finalString = @"";
if(variablesDictionary != nil){
    NSArray *keysArray = [variablesDictionary allKeys];
    for(NSString *singleKey in keysArray) {
        finalString = [finalString stringByAppendingString:[NSString stringWithFormat:@"&%@=%@", singleKey, [variablesDictionary objectForKey:singleKey]]];
    }
}

//final string will = '&key=variable&key=variable&key=variable&key=variable' etc... 
```

这是我到目前为止所尝试的。这是我的全球行动

```
 public final static void startAPICallRequest(Context activityContext, String request, String apiLocation, Object postVarsObj, Object getVarsObj){

            long unixTimeStamp = System.currentTimeMillis() / 1000L;

            if(getVarsObj != null){

                Array keysArray = getVarsObj.keySet().toArray();

                StringBuilder sb = new StringBuilder();
                for (String key : getVarsObj.keySet()) {
                    sb.append("&");
                    sb.append(key);
                    sb.append("=");
                    sb.append(getVarsObj.get(key).toString());
                }

                final String will = sb.toString();
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:41:28.347

If using a map, you'll want to take a look at the keySet() functionality. [Here is an example](http://www.java2s.com/Code/Java/Collections-Data-Structure/Createanarraycontainingthekeysinamap.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:38:04.473

```
// for Map<String, Object>
StringBuilder sb = new StringBuilder();
for (String key : map.keySet()) {
    sb.append("&");
    sb.append(key);
    sb.append("=");
    sb.append(map.get(key).toString());
}

final String will = sb.toString(); 
```

# javascript - 为什么 document.all.item 在本地主机上不起作用？

> ID：14732750
> 
> 赞同：3
> 
> 时间：2013-02-06T15:33:20.673
> 
> 标签：javascript

我正在开发一个非常旧的 Web 应用程序，它使用 document.all.item 来遍历 dom，当我在 localhost 中部署应用程序时，它会导致运行时错误，而当我将它部署在我的机器外的服务器上时，错误就会消失。在 os 下面是引发未知运行时错误的代码。是什么原因或我该如何解决？

```
 with(document.all)

  item('fieldName').innerHTML = "Blah Blah";  // Error is on this line.?

} 
```

当我尝试在 IE 中调试时。我可以访问该项目，但由于某种原因无法访问 innerHTML。是因为IE还是其他原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:36:35.543

在 Google Chrome 上，`HTMLAllCollection`（来自 的结果`document.all`）没有`item`属性。我建议用循环遍历它们`for`：

```
var items = document.all;
var length = items.length;
for(var i = 0; i < length; i++){
    //Do something with: items[i];
} 
```

行为改变可能是因为s`item`上的属性实现不一致`HTMLAllCollection`，IE 显然实现了它，而您的服务器没有。

# java - Java jtable 从列表中填充

> ID：14732751
> 
> 赞同：0
> 
> 时间：2013-02-06T15:33:27.493
> 
> 标签：java, swing, jtable

我正在尝试使用来自 oracle 表的数据填充我拥有的 jtable。我可以成功地从表中获取信息并放入列表中，但是如何在 jtable 中显示这些信息。

这就是我所拥有的

```
public class MainMenu extends javax.swing.JFrame {

    private DatabaseConnector dbConnector = new DatabaseConnector();

    DefaultTableModel userTableModel = new DefaultTableModel();

    public void refreshCustomersList() throws SQLException, ClassNotFoundException {

        UserBeanList userList = dbConnector.getUserData();

        userListModel.clear();

        for (int i = 0; i < userList.size(); i++) {
            UserBean userBean = userList.getUserBeanAt(i);

            String[] data = new String[3];

            data[0] = userBean.getCustomerID();
            data[1] = userBean.getFirstName();
            data[2] = userBean.getLastName();

            userTableModel.addRow(data);
        }
        tableCustomers.setModel(userTableModel);
    } 
```

我是不是做错了什么，为什么桌子都是灰色的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:38:41.120

您忘记指定表模型的列数。我建议改用[这个构造函数](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#DefaultTableModel%28java.lang.Object%5B%5D,%20int%29)：

```
DefaultTableModel userTableModel = 
  new DefaultTableModel( new Object[]{ "Customer id", "First name", "Last name" }, 0 ); 
```

# ruby - ruby 和 erb 在 centos 中没有响应

> ID：14732752
> 
> 赞同：0
> 
> 时间：2013-02-06T15:33:28.990
> 
> 标签：ruby, centos, rvm, erb

我已经在 centos 6.3 VM 上安装了带有 rvm 的 ruby​​，当我尝试在没有参数的情况下运行 ruby​​（或 erb）时，我没有得到任何响应，它就在那里。运行 'ruby' 只是将光标放到下一行，就像它在等待更多输入或其他事情发生一样。在此期间键入任何 ruby​​ 命令对 AFAIK 没有任何作用。我没有收到任何错误，但我不确定在哪里看。我必须 control-c 才能摆脱它。

一些有趣的事情：（我对linux相当陌生，所以要温柔）

运行命令`ruby -v` 让我：

```
ruby 1.9.3p374 (2013-01-15 revision 38858) [x86_64-linux] 
```

所以看起来它已经安装了

跑步：

```
echo "puts 'hello'" |ruby 
```

得到我：

```
hello 
```

我创建了一个不同的用户，然后使用该用户登录，并且行为是相同的。

我已经安装了 rails，然后创建了一个 rails 应用程序，我可以`rails c`使用 rails 控制台

其他可能相关或不相关的注意事项：我最近安装了 KDE。在安装 KDE 之前我确实有 ruby​​ 工作，但我不能说是 KDE 的安装搞砸了。

我已经使用 rvm 卸载了 ruby​​ 并重新安装，同样的事情。卸载rvm并重新安装。

我不知道该去哪里或什么信息有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:39:22.797

运行`irb`以获得交互式会话。这是一个*REPL，*一个读取-评估-打印循环。

要查看 Ruby 响应运行解释器并以交互方式向其提供标准输入，请尝试以下操作：

```
$ ruby
p :hello
^D 
```

如果您只是键入`ruby`，我不确定在它读取整个输入文件之前会发生任何事情......即，看到一个 Control/D 指示*标准输入文件结束*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:41:05.563

I believe your looking for `irb` - the interactive Ruby interpreter.

`erb` is an interpreter that expects a file argument.

```
$ erb hello-world.rb 
```

# postgresql - PL/PGSQL 中多维数组的赋值失败

> ID：14732753
> 
> 赞同：2
> 
> 时间：2013-02-06T15:33:37.237
> 
> 标签：postgresql, multidimensional-array, plpgsql

我正在尝试将表的内容具体化为 PL/PGSQL 中的多维数组。

（仅适用于那些想知道“邻居”是什么的人：表 wnode 和楔形定义了一个带有节点`wnode`和边的图`wedge`。现在我想将节点 v 的邻居存储在包含在的数组中`neighbors[v]`）。

这是我到目前为止所做的：

```
DECLARE
    neighbors INTEGER[][];
    v INTEGER;
BEGIN
    FOR v IN SELECT n_id FROM wnode LOOP
        SELECT ARRAY ( SELECT n2_id FROM wedge WHERE n1_id=v) INTO neighbors[v];
    END LOOP;

    RETURN neighbors; 
```

由于语法错误，上述代码失败：

```
ROW 7: ...( SELECT n2_id FROM wedge WHERE n1_id=v) INTO neighbors[v];
                                                                 ^ 
```

我尝试的下一件事是引入一个支持变量`tmp`：

```
DECLARE
    neighbors INTEGER[][];
    v INTEGER;
    tmp INTEGER[];
BEGIN
    FOR v IN SELECT n_id FROM wnode LOOP
        SELECT ARRAY ( SELECT n2_id FROM wedge WHERE n1_id=v) INTO tmp;
        neighbors[v] := tmp;
    END LOOP;

    RETURN neighbors;
END 
```

我得到了这个运行时错误：

```
ERROR:  invalid input syntax for integer: »{140,153,290,360,393}« 
```

我也试过使用`SELECT array_append(neighbors, tmp) INTO neighbors;`没有任何成功。

我现在没有想法。我接下来要尝试的是遍历`tmp`并分配每个值`neighbors[v][i] := tmp[i];`……不是很优雅。

我想知道如何以更优雅的方式填充我的多维数组？（也许只使用单个 SQL 查询是可能的？）。

谢谢你的帮助。:-)

编辑：[架构](http://sqlfiddle.com/#!12/1afe8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:10:59.047

这可能可以很容易地解决这个相关问题下概述的聚合函数：
[Selecting data into a Postgres array](https://stackoverflow.com/questions/11762398/selecting-data-into-a-postgres-array-format)

```
CREATE AGGREGATE array_agg_mult (anyarray)  (
    SFUNC     = array_cat
   ,STYPE     = anyarray
   ,INITCOND  = '{}'
); 
```

猜测（因为缺少表定义）：

```
SELECT INTO neighbors 
       array_agg_mult(ARRAY[e_arr]) AS mult_arr
FROM  (
   SELECT array_agg(n2_id) AS e_arr
   FROM   wedge
   GROUP  BY n1_id
   ORDER  BY n1_id
   ) e; 
```

### 更新

您必须添加一个数组层以使其成为二维数组。
请注意，所有一维数组必须共享相同的长度，否则查询将出错。

[-> sqlfiddle](http://sqlfiddle.com/#!12/97550/3)来演示两者。

# javascript - WebForms Web 应用程序中的动态 JSON 属性名称可能吗？

> ID：14732754
> 
> 赞同：0
> 
> 时间：2013-02-06T15:33:42.427
> 
> 标签：javascript, json, webforms, asp.net-3.5

我将旧的 .NET 3.5 WebForms“网站”转换为“Web 应用程序”。现在我不知道这是否是原因，但之前工作的所有动态 JSON 属性名称现在在 aspx 页面 eq 中产生语法错误（“预期属性名称”）。

```
...
rules: {
    <%= txtDisabledFromDate.UniqueID %>: {
        required: function(element) {
            return jQuery("#<%= rbDisabledBetween.ClientID %>:checked").size() == 1; 
        },
        digits: true
    },
... 
```

如果我`<%= txtDisabledFromDate.UniqueID %>`用双引号括起来，错误就会消失，但是 javascript 会停止工作。

# c# - xml c# 用 Linq 添加元素到 XML

> ID：14732755
> 
> 赞同：1
> 
> 时间：2013-02-06T15:33:43.397
> 
> 标签：c#, xml, linq

我需要一些帮助来添加元素，现在我正在这样做：

```
XDocument xDoc = XDocument.Load(testFile);
xDoc.Descendants("SQUIBLIST")
    .FirstOrDefault()
    .Add(new XElement("Sensor", 
            new XAttribute("ID", id + 1), 
            new XAttribute("Name", "Squib" + (id + 1).ToString()), 
            new XAttribute("Used", "True")));
xDoc.Save(testFile); 
```

我得到（例如）：

```
 <Sensor ID="26" Name="Squib26" Used="True" /> 
```

我想要的是这个：

```
 <Sensor ID="26" Name="Squib26" Used="True"></Sensor> 
```

我找不到办法。皮斯给我一个线索。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T15:36:44.540

您可以包含一个空字符串以强制它添加一个空文本节点：

```
new XElement("Sensor", 
    new XAttribute("ID", id + 1), 
    new XAttribute("Name", "Squib" + (id + 1).ToString()),
    new XAttribute("Used", "True"),
    "") 
```

但是，你应该考虑为什么你真的需要这个。通常，读取 XML 的应用程序根本不应该关心差异。

另请注意，如果没有任何元素，通过调用`FirstOrDefault().Add(...)`您将失败。如果没有这样的元素，至少*使用**起来*会更清晰，而不是返回。`NullReferenceException``SQUIBLIST`*`First()`*`null`**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T15:38:11.857

尝试这个：

```
 xDoc.Descendants("SQUIBLIST")
      .FirstOrDefault()
      .Add(
             new XElement("Sensor", 
             new XAttribute("ID", id + 1), 
             new XAttribute("Name", "Squib" + (id + 1).ToString()), 
             new XAttribute("Used", "True")
             ,"" //<-- this will represent the value of <Sensor>
)); 
```**

# perl - 在使用 Sub::Exporter 子类化模块的模块中使用 Sub::Exporter 时无法专门化父类方法

> ID：14732761
> 
> 赞同：2
> 
> 时间：2013-02-06T15:33:54.130
> 
> 标签：perl

我正在尝试扩展一个`mA`正在使用的类（）`Sub::Exporter`。我想`Sub::Exporter`在子类（`mB`）中使用。我不知道如何通过对in`mA`的调用传递唯一的选项。下面是一些测试代码：`Sub::Exporter``mB`

```
#!/usr/bin/env perl

use 5.10.1;
use strict;
use warnings;

{
    package mA;

    use Sub::Exporter -setup => {
            exports => { gmorn => \&build_gmorn },
        };

    sub build_gmorn {
        my ( $class, $name, $arg ) = @_;
        return sub { say "$arg->{salutation}"; }
    }

    sub new { return bless {}, shift }
}

{
    package mB;

    use parent -norequire, 'mA';

    use Sub::Exporter -setup => {
        exports => { gnite => \&build_gnite },
    };

    sub build_gnite {
        my ( $class, $name, $arg ) = @_;
        return sub { say "$arg->{salutation}"; }
    }
}

{
    package mFr;

    use parent -norequire, 'mB';

    mB->import(
       gmorn => { salutation => 'Bon Jour' },
       gnite => { salutation => 'Bon Nuit' }
    );

}

my $obj = mFr->new;

$obj->gmorn();
$obj->gnite(); 
```

结果是：

```
% perl t
"gmorn" is not exported by the mB module at t line 66. 
```

有没有办法继承`Sub::Exporter`规范？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:32:05.427

Since you are writing object-oriented perl, it is a *very bad idea* to import symbols from one package into another. The inheritance the Perl's standard mechanism will work fine, and all you seem to be doing here is renaming the imported methods.

The problem is that `use parent` doesn't call the other package's `import` routine, so `build_gmorn` is never imported into `mB` as `gmorn`.

In addition, as your error message says, `gmorn` is not exported by the `mB` module, so it cannot be imported into `mFr`.

If you change `mB` to look like this then your code will mostly work. Note that because there is no `mA.pm` I have had to write `mA->import('gmorn')` as the correct `use mA 'gmorn'` would fail.

```
package mB;

mA->import('gmorn');
use parent -norequire, 'mA';

use Sub::Exporter -setup => {
    exports => {
        gmorn => undef,
        gnite => \&build_gnite 
    }
};

sub build_gnite {
    my ( $class, $name, $arg ) = @_;
    return sub { say "$arg->{salutation}"; }
} 
```

* * *

**Update**

There is no way to get the parameters to `use Sub::Exporter` to "pass through" multiple levels of `use`, because the `import` subroutine needs to call the generator function. So in your example `mB::import` needs to call `mA::build_gmorn` but it has no knowledge of that subroutine so it cannot be done.

The only convenient solution is to export *both* the generator and a generated subroutine, so that the calling code can either use the function or export a generated function itself.

This set of programs works fine.

**mA.pm**

```
use 5.010;
use warnings;

package mA;

use Sub::Exporter -setup => {
    exports => [
        'build_gmorn',
        gmorn => \&build_gmorn,
    ]
};

sub build_gmorn {
    my ( $class, $name, $arg ) = @_;
    return sub { say "$arg->{salutation}"; }
}

1; 
```

**mB.pm**

```
use 5.010;
use warnings;

package mB;

use mA qw/ gmorn build_gmorn /;
use parent 'mA';

use Sub::Exporter -setup => {
    exports => [
        'build_gmorn', 
        gmorn => \&build_gmorn,
        'build_gnite', 
        gnite => \&build_gnite
    ]
};

sub build_gnite {
    my ( $class, $name, $arg ) = @_;
    return sub { say "$arg->{salutation}"; }
}

1; 
```

**mFr.pl**

```
use 5.010;
use warnings;

package mFr;

use parent 'mB';

mB->import(
   gmorn => { salutation => 'Bon Jour' },
   gnite => { salutation => 'Bon Nuit' }
);

sub new { return bless {}, shift }

my $obj = mFr->new;

$obj->gmorn();
$obj->gnite(); 
```

**output**

```
Bon Jour
Bon Nuit 
```

# android - 如何将按钮添加到 Spinner 的页脚

> ID：14732763
> 
> 赞同：1
> 
> 时间：2013-02-06T15:34:02.273
> 
> 标签：android, android-layout, android-ui, android-spinner, android-button

我有一个微调器，我想在微调器的末尾添加一个“取消”按钮，这样当用户单击它时，微调器中的选定元素不会改变。

### xml

```
<Spinner
            android:id="@+id/s_signin_type"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="15dip"
            android:layout_marginTop="5dip"
            android:prompt="@string/s_type" /> 
```

### Java 活动

```
Spinner s_type;
s_type = (Spinner) findViewById(R.id.s_signin_type);
        ArrayAdapter<String> adapterType = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, Data.types);
        adapterType
                .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        s_type.setAdapter(adapterType); 
```

![在此处输入图像描述](../Images/8a5af8cb953f4312a626bc2d189adffb.png)

多谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-01T11:53:22.767

我设法通过覆盖 ArrayAdapter 中的 getDropDownView() 方法将按钮添加到微调器。它是这样的（我省略了视图重用，...）：

```
List<String> items = new ArrayList<String>();
//items I want to display
items.add("1");
items.add("2");
//add placeholder for button
items.add(null);
...

ArrayAdapter<String> itemsAdapter = new ArrayAdapter<String>(
                getActivity(), android.R.layout.simple_spinner_item, items) {

            @Override
            public View getDropDownView(int position, View convertView,
                    ViewGroup parent) {
                //create view for placeholder
                if (getItem(position) == null) {
                    Button b = new Button(getActivity());
                    b.setText("Test");                  
                    return b;
                }
                //create view for standard spinner item
                return LayoutInflater.from(this.getContext()).inflate(
                        android.R.layout.simple_spinner_dropdown_item, parent,
                        false);
            } 
```

# jquery - 为什么 Kendo Draggable 和 Kendo DropTarget 只在某些时候有效/

> ID：14732764
> 
> 赞同：0
> 
> 时间：2013-02-06T15:34:06.667
> 
> 标签：jquery, draggable, kendo-ui, droptarget

我已经能够让它工作，但只有部分时间 - 因为在一些拖动会注册，但其他人会滑回原来的位置并且无法工作。这是尽可能精简的，因为我可以让它不起作用：

```
<div>
    <div id="drop" style="border: solid 1px green; ">
        bla<br />bla<br />bla<br />bla<br />bla<br />
    </div>
    <ul>
        <li id="t5" style="border:solid 1px red;">T5</li>
    </ul>
</div>

<script type="text/javascript">
    $(function () {
        $('#t5').kendoDraggable({
            hint: function (e) {
                return e.clone();
            }
        });

        $('div#drop').kendoDropTarget({
            drop: function (e) { console.log(e); }
        });
    });
</script> 
```

这样，drop 将不会注册（没有记录任何内容），但如果我只是将 'div#drop' 更改为 'body' （这样它会捕获所有内容），drop 就会记录下来。我不明白什么？除了 jquery 1.8.2 参考和剑道之外，我在这个测试页面上没有其他任何东西。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:36:05.377

[我在演示](http://jsbin.com/erotow/1/edit)中尝试了您的代码，但它按预期工作。您正在测试哪些浏览器？

我有一个理论认为这可能会发生，因为您的可拖动对象是一个`li`只能插入到`ul`. 您可以尝试以下修改：

```
 $('#t5').kendoDraggable({
        hint: function (e) {
            var ul = $("<ul/>");
            ul.append(e.clone());
            return ul;
        }
    }); 
```

# r - 有没有办法将协方差矩阵（或类似的东西）输入到 R 中的 lme4 中？

> ID：14732767
> 
> 赞同：0
> 
> 时间：2013-02-06T15:34:09.830
> 
> 标签：r, models, covariance, mixed, lme4

我有一个从数据仓库中提取的非常大的数据集。将数据集下载到我要运行 lme4 的盒子需要很长时间。我想知道我是否可以将数据处理成协方差矩阵，下载该数据（要小得多），并将其用作 lme4 的数据输入。我已经为使用 SAS 的多个回归模型做了类似的事情，并希望我可以为 lme4 创建这种类型的输入。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:21:24.157

我不知道有什么方法可以使用观察到的协方差矩阵来拟合 lmer 模型。但如果目标是减少数据集大小以加快分析速度，则可能有更简单的方法。例如，如果您不需要随机效应的条件模式，并且样本量非常大，那么您可以尝试将模型拟合到逐渐变大的数据子集，直到估计固定效应和协方差随机效应矩阵“稳定”。这种方法在我的经验中效果很好，并且已经被其他人讨论过：

[http://andrewgelman.com/2012/04/hierarchicalmultilevel-modeling-with-big-data/](http://andrewgelman.com/2012/04/hierarchicalmultilevel-modeling-with-big-data/)

这是另一个引文：

“与‘多模型’方法相关的是加速计算的简单近似。计算机越来越快——但模型越来越复杂！所以这些通用技巧可能仍然很重要。一个简单而通用的技巧就是打破将数据分成子集，对每个子集进行单独分析。例如，将 85 个县的氡气数据随机分成 30、30 和 25 个县的三组，分别对每组进行分析。格尔曼和希尔 (2007)，第 547 页。

# android - Android，设置AlarmManager的自定义计时...请指教

> ID：14732776
> 
> 赞同：0
> 
> 时间：2013-02-06T15:34:43.003
> 
> 标签：android, alarmmanager

您好，我需要设置 AlarmManager 来提醒我服药。我需要按自定义天数和自定义天数重复它。

那么有没有一种有效的方法来设置AlarmManager或CommonsWare的AlarmManager实现来提醒我“从早上9点开始，接下来的5天每天两次”来提醒我吃药？对于示例代码和相关教程中的任何建设性帮助，请提前提供建议和 tnx。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:41:50.230

I haven't looked into Mark's AlarmManager implementation, but there is no way, in general, to get the bare AlarmManager to do what you are trying to do. You can schedule a single alarm, at a specific time, or a repeating alarm, that repeats at fixed intervals. If you want something that handles complex schedules like the one you describe, you'll have to write or find code that does it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T17:29:14.660

您想将 PendingIntent 与 AlarmManager 一起使用。这个想法是用alarmManager安排pendingIntent，让它触发一个intentService或广播，用alarmManager为下一个期望的事件设置另一个pendingIntent。您要记住，如果用户重新启动他们的设备，您将需要 BOOT_RECEIVED 权限。我在音频控制中有复杂的调度，这正是我所做的。

这是我的意思的一个相当不错的教程：

[http://android-er.blogspot.com/2010/10/simple-example-of-alarm-service-using.html](http://android-er.blogspot.com/2010/10/simple-example-of-alarm-service-using.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:10:45.653

您需要在下次要服药时安排闹钟 - 根据您的算法（例如，如果它每天两次，并且您今天第一次到达待处理的意图回调，那么将下一个闹钟安排到在 [6,7,8,9,10...] 小时后开始）。

您需要将警报启动的上次时间和用户设置保存在共享首选项/文件/数据库中。

您需要停止处理进程（android 将其杀死或设备已重新启动）。在设备重启的情况下，您应该使用启动接收器来启动您的服务，[但您需要记住，从 android 3.1 开始，用户必须至少使用一次 GUI 才能拦截启动完成的接收器](https://stackoverflow.com/questions/11744426/broadcastreceiver-issues-in-android-3-1)。启动完成的接收器应该查看上次启动警报的时间，并根据用户设置设置下次启动警报。

在 android 杀死你的服务的情况下，你需要进行研究，我在这里无能为力。

[看例子](https://stackoverflow.com/questions/4459058/alarm-manager-example)

# c++ - 将数字转换为文本时出错

> ID：14732783
> 
> 赞同：0
> 
> 时间：2013-02-06T15:34:54.903
> 
> 标签：c++

我正在编写一个将数字转换为文本的 c++ 程序。

我遇到了两个问题（编辑：现在只有一个）：

*   第一个问题是程序只写出正确的 1-19 数字，从 20-99 的所有数字，例如当我写 34 时，我得到的答案是 30，而不是应该的 34。三十之后它只是出现错误并且程序关闭。[问题已解决]

*   第二个问题是我希望我可以写 0-999 之间的数字而不仅仅是 99 但我不知道该怎么做

    ```
     #include <iostream>
     #include <string>
     using namespace std;

    int main()
      {
     int num, Ldight, Rdight;

        string ones[] = {"zero", "one", "two", "three", "four", 
                "five","six", "seven", "eight", "nine", "ten",
                "eleven", "twelve", "thirteen", "fourteen",  "fifteen",
                "sixteen", "seventeen", "eighteen", "nineteen"};

    string tens[] = {"twenty","thirty","fourty","fifty", "sixty","seventy","eighty", "ninety"};

        cout << "Pick a number between 1-99: ";
        cin >> num;

          if(num <= 0)
              {
            cout << "ERROR!" << endl;
              }

       else if (num >= 0 && num <= 19)
              {
    cout << "Your number is: " << ones[Rdight] ;
              }

       else if (num >=20 && num <=99)
        {
    Rdight = num % 10;
    Ldight = num / 10;

    cout << "Your number is: " << tens[Ldight - 2] << ones[Rdight];
         }

    return 0;
    } 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:38:50.687

你应该改变这个：

```
cout << "Your number is: " << tens[Ldight - 2] << ones[num]; 
```

至

```
cout << "Your number is: " << tens[Ldight - 2] << ones[Rdight]; 
```

您计算一个从未使用过的值。并且在上面的行中，`ones`num 访问索引越界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:41:10.277

For your first question, your problem is in this line:

```
cout << "Your number is: " << tens[Ldight - 2] << ones[num]; 
```

You are using the wrong variable, although correctly calculating the value in the lines just above. I'm not telling you how to fix it, as you are the one learning programming, and you need to learn how to spot this type of problem.

[I personally would add two dummy fields to "tens", so as you don't have to do `-2` as well - that's a small price to pay].

As for your second problem, you'll have to consider how you go about saying it, and you'll probably come up with something... It's not VERY different from solving single digits, let's say. If you need more than about half a dozen or so lines, you are solving it wrong.

And once you have solved hundreds, it will be very trivial to add numbers up to millions, and even much further, with just a few lines of extra code.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:03:55.120

使用以下行：

cout << "你的号码是：" << tens[Ldigit - 2] << one[ **Rdigit-1** ];

one[] 中不需要元素“零”，因为当 i/p <= 0 时输出为**错误**，因此删除元素**“零”**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-06T15:41:08.357

You could try by splitting user input to 2 pieces. If user input is : 55 you split it in 5 and 5 and then print

tens[5] + ones[5]

That would be much better solution. You will delete all those if-s that can cause problems

# iphone - 我将如何重新加载视图控制器的表格视图，另一个视图控制器上的页面卷曲已关闭。

> ID：14732785
> 
> 赞同：0
> 
> 时间：2013-02-06T15:35:01.117
> 
> 标签：iphone, ios, objective-c, page-curl

在另一个视图控制器上的页面卷曲关闭后，我将如何重新加载视图控制器的表格视图。

我在 viewController1 上有一个 tableview，它使用页面 curl 到 viewController2 进行转换。

viewController1 有一个 tableView 需要在 page curl 关闭后重新加载。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:02:24.950

好的，

在您的 viewControllers1 中，在 viewDidLoad 中注册一个通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleNotification:) name:@"MyNotification" object:nil]; 
```

并添加方法：

```
- (void)handleNotification:(NSNotification*)note {
   [tableView reloadData];
} 
```

在您的 viewController2 中发布通知，当您将转到 viewController1 或您想要重新加载表格时：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"MyNotification" object:self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:37:40.797

在viewController1 的`viewWillAppear`方法中，可以调用table view 的`reloadData`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:38:53.263

在 viewController1 的

```
- (void)viewDidDisappear:(BOOL)animated
{
   [tableView reloadData];
} 
```

tableView 必须是成员。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-22T09:34:20.617

```
 In first viewcontoller.h  put this in viewdidload

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handle_data) name:@"reload_data" object:nil];

-(void)handle_data
{
[yourtableview reloaddata];
}

In second viewcontroller.h
[[NSNotificationCenter defaultCenter] postNotificationName:@"reload_data" object:self]; 
```

# java - Java Date - 如何编写“如果日期 A 晚于日期 B”

> ID：14732789
> 
> 赞同：-3
> 
> 时间：2013-02-06T15:35:04.093
> 
> 标签：java

我被要求为在添加后恰好一年到期的政策编写到期方法。我已经编写了在添加的初始日期上增加一年的方法。

现在我正在尝试编写另一个返回布尔值的方法，以查看日期 A 是否超过日期 B。如果它已过去，则表示它已过期，因此它将返回 true。有人可以帮我解决语法，不知道该怎么做。谢谢

```
public ExpirablePolicy(float a, Date d){
    super(a);
    amount = a;
    expiryDate = new Date();
    GregorianCalendar aCalendar = new GregorianCalendar();
    aCalendar.add(Calendar.YEAR,1);
    expiryDate = aCalendar.getTime();
} 

public boolean isExpired(){
    //expiry method; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T15:36:12.503

这可以用[`Date.before()`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#before%28java.util.Date%29)or来完成[`Date.after()`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#after%28java.util.Date%29)：

```
if (d.after(expiryDate)) { ... } 
```

或者

```
if (!d.before(expiryDate)) { ... } 
```

第一个比较计算结果`true`是`d`严格大于`expiryDate`。第二个评估`true`是否`d`大于或等于`expiryDate`。

可以达到同样的效果[`Date.compareTo()`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#compareTo%28java.util.Date%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:38:29.433

尝试这个：

```
public boolean isExpired(Date a, Date b) {
    return a.before(b);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T15:38:46.163

检查 java.util.Date。它有一个名为 compareTo 的方法。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html#compareTo(java.util.Date)](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html#compareTo(java.util.Date))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T15:38:00.897

只需使用[**Date.compareTo(Date)**](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#compareTo%28java.util.Date%29)方法：

```
public boolean isExpired(Date d1, Date d2) {
    return d1.compareTo(d2) > 0;
} 
```

# php - Symfony2 匿名并在同一路由上进行身份验证

> ID：14732790
> 
> 赞同：1
> 
> 时间：2013-02-06T15:35:13.577
> 
> 标签：php, symfony, symfony-2.1

我本来希望在 Symfony2 "v2.1" 中有一个无需身份验证和经过身份验证即可访问的页面。

我使用了匿名，但这里是经过身份验证的用户匿名的令牌，而不是正确的令牌。

有没有人有办法解决吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:13:35.527

如[安全](http://symfony.com/doc/current/book/security.html)中所述：

> 匿名用户在技术上是经过身份验证的，这意味着匿名用户对象的 isAuthenticated() 方法将返回 true。

```
//if you want myPage to be accessible by everyone
security:
    firewalls:
        secured_area:
            pattern:    ^/
            anonymous: ~

    access_control:
        - { path: ^/myPage, roles: IS_AUTHENTICATED_ANONYMOUSLY } 
```

如果您删除匿名密钥，防火墙将始终使用户立即进行完全身份验证。

# java - HWPFDocument / XWPFDocument 新行

> ID：14732791
> 
> 赞同：0
> 
> 时间：2013-02-06T15:35:16.597
> 
> 标签：java, apache-poi

我正在尝试从 microsoft-word 中提取数据并将其转换为 sql 语句并将其插入 Oracle 数据库。

当 ms-word 中的数据包含由 [Shift-Enter] 创建的新行而不只是输入时，

文本包含一个图标，看起来像一个带问号的框。

![在此处输入图像描述](../Images/0115f1db1a9ea932d03a5d2a0dbaf18e.png)

其中 ET 只是使用回车键的标准新行，而 ST 是使用

Shift-Enter 组合。因此，在生成 SQL 并将其插入到 oracle 时，oracle 不会将其视为文本，而是视为十六进制。

我的问题是，如何将 [shift-enter] 创建的行删除为标准的 '\n'？

谢谢

*更新* 这就是我获取文本信息的方式

```
POIFSFileSystem fs = new POIFSFileSystem(new FileInputStream(file));
HWPFDocument doc = new HWPFDocument(fs);
WordExtractor we = new WordExtractor(doc);
text = we.getText(); 
```

更新答案：这是 poi-3.6 中的一个错误。在 poi-3.8 中它显示为 \r。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:58:33.393

您几乎可以肯定看到的是 word 文档中的“字段”，它们是特殊的文本块，例如链接、宏等

选项一是继续使用 WordExtractor，但在使用前对结果文本调用[stripFields(String) 。](http://poi.apache.org/apidocs/org/apache/poi/hwpf/extractor/WordExtractor.html#stripFields%28java.lang.String%29)这将为您从文本中删除任何这些字段。

另一种选择是使用不同的方式获取文本。[WordToTextConverter](http://poi.apache.org/apidocs/org/apache/poi/hwpf/converter/WordToTextConverter.html)是 Apache POI 的一部分，是更复杂的代码，可以处理更多格式，应该为您跳过这些（WordExtractor 非常简单且低级）。另一种是使用[Apache Tika](http://tika.apache.org/)，它提供了一种从多种文件格式中提取文本的常用方法。这确实具有处理字段的正确代码，并且作为额外的好处，当您的需求发生变化时，支持 .docx 或 .pdf 对您来说是微不足道的！

# iphone - iPhone：漫游 MCC

> ID：14732792
> 
> 赞同：3
> 
> 时间：2013-02-06T15:35:21.977
> 
> 标签：iphone, ios, objective-c, roaming, mcc

是否有可能检索 iPhone 的“实际”移动国家代码？

如果我在 CTCarrier 上使用传统方法，我只会收到 SIM 卡的 MCC，但我想要漫游提供商的移动国家代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:36:47.650

不，这在当前的 iOS SDK 中是不可能的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-06T21:11:39.327

我不相信使用私有 API 是可能的，但您可以使用我构建的第三方服务，例如[http://ipinfo.io 。](http://ipinfo.io)这是标准 API 响应，其中将在 org 字段中包含运营商详细信息：

```
$ curl ipinfo.io/24.32.148.1 
{
    "ip": "24.32.148.1",
    "hostname": "doc-24-32-148-1.pecos.tx.cebridge.net",
    "city": "Pecos",
    "region": "Texas",
    "country": "US",
    "loc": "31.3086,-103.5892",
    "org": "AS7018 AT&T Services, Inc.",
    "postal": "79772"
} 
```

自定义包也可用，其中还包括移动 IP 的完整 mnc/mcc 详细信息。有关详细信息，请参阅[http://ipinfo.io/developers](http://ipinfo.io/developers)。

# php - 如何覆盖 NyroModal 包装器？

> ID：14732794
> 
> 赞同：2
> 
> 时间：2013-02-06T15:35:26.210
> 
> 标签：php, javascript, jquery, html, nyromodal

如何覆盖 NyroModal Wrapper。

我不想覆盖 css 类，我们需要能够添加我们的 div 而不是原生的 WRAPPER div。

在[GitHub 上](https://github.com/nyroDev/nyroModal/blob/master/js/jquery.nyroModal.filters.gallery.js)，我找到了 2 个函数：`beforeShowCont`和`filledContent`，但我不知道如何使用这些函数覆盖包装器。

我还在[代码 google](http://code.google.com/p/nyromodal/issues/detail?id=509)上找到了这篇文章，这正是我想要开发的，但它没有说明如何开发。

```
<table class="ctools-modal-content">
  <tr>
    <td class="popups-tl popups-border"></td>
    <td class="popups-t popups-border"></td>
    <td class="popups-tr popups-border"></td>
  </tr>
  <tr>
    <td class="popups-cl popups-border"></td>
    <td class="popups-c">
      <div class="popups-container">
        <div class="popups-title">
          <span id="modal-title" class="modal-title"></span>
          <span class="popups-close"><a class="close" href="#">Close</a></span>
          <div class="clear-block"></div>
        </div>
        <div id="modal-content" class="modal-content">HERE WOULD .wrapper OR #nyroModalContent GO</div>
        <div class="popups-buttons"></div>
        <div class="popups-footer"></div>
      </div>
    </td>
    <td class="popups-cr popups-border"></td>
  </tr>
  <tr>
    <td class="popups-bl popups-border"></td>
    <td class="popups-b popups-border"></td>
    <td class="popups-br popups-border"></td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:51:57.527

[我从这里](http://code.google.com/p/nyromodal/issues/detail?id=168)引用了 nyroModal 代码

如果你想覆盖它的包装类，你可以通过以下方式来实现。

*   选择 nyroModal 的主容器。
*   为其包装器添加新样式。

    IE

    div#nyroModalFull div.wrapper{ /* 你自己的风格*/ }

*   在 nyroModal 样式之后加载您自己的样式表

我希望这对你有用

# azure - 将应用程序从一个 azure 帐户转移到另一个帐户

> ID：14732797
> 
> 赞同：4
> 
> 时间：2013-02-06T15:35:39.147
> 
> 标签：azure

我们目前正在开发一个托管在 Azure 上的应用程序，该应用程序使用开发人员的 MSDN 帐户在一个小型实例上进行。我们想设置一个付费帐户，以便更轻松地配置更多资源。有没有办法做到这一点？还是我们需要在新帐户下创建一个新应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:35:47.420

我不认为你可以自己移动，你是正确的，因为你必须在另一个帐户上重新创建和部署。

或者，可能值得联系支持人员，我认为他们能够为您移动它，或者至少他们曾经这样做过。

# unit-testing - 错误测试 Spock 单元测试中抛出的异常

> ID：14732798
> 
> 赞同：0
> 
> 时间：2013-02-06T15:35:42.143
> 
> 标签：unit-testing, grails, spock

当我尝试使用以下代码测试抛出的异常时：

```
@TestFor(EncryptionService)
class EncryptionServiceSpec extends Specification {
def "test decryption of unecnrypted file"(){
    setup: 
        def clearTextFile = new File("test/resources/clearText.txt")
        clearTextFile.write("THIS IS CLEAR TEXT")

    when:
        def (privateKey,publicCert) = service.generateKeyPair("123")
        service.decryptFile(new FileInputStream(clearTextFile), privateKey )

    then:
        clearTextFile.delete()
        thrown GeneralSecurityException
}
} 
```

运行 grails test-app -unit 时出现以下编译异常

> 编译规范“com.genospace.services.EncryptionServiceSpec”时出现意外错误。也许你使用了无效的 Spock 语法？[无论如何，请在http://issues.spockframework.org](http://issues.spockframework.org)提交错误报告。
> 
> java.lang.ClassCastException: org.codehaus.groovy.ast.expr.ArgumentListExpression 不能在 org.codehaus.groovy.ast.expr.DeclarationExpression.getVariableExpression 转换为 org.codehaus.groovy.ast.expr.VariableExpression(DeclarationExpression.java :103) 在 org.spockframework.compiler.SpecRewriter.moveVariableDeclarations(SpecRewriter.java:538)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:06:34.410

尝试不利用 Groovy 的多任务功能 ( `def (privateKey,publicCert) = ...`)。如果这解决了问题（我认为会），请在[http://issues.spockframework.org](http://issues.spockframework.org)提出问题。

# asp.net - 如何像在 MVC 中一样遍历 WebForms 中的数据

> ID：14732801
> 
> 赞同：52
> 
> 时间：2013-02-06T15:35:51.930
> 
> 标签：asp.net, asp.net-mvc, webforms

如何像在 ASP.NET MVC 中那样循环浏览 WebForms 中的数据？例如，在 MVC 中，这很简单：

```
<table>
    @foreach (var myItem in g)
    { 
        @<tr><td>@MyItem.title<td></tr>
    }
</table> 
```

后面的代码会是什么样子？

或者，我可以将 MVC 项目添加到 WebForms 应用程序，以便我可以使用 MVC 功能吗？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-02-06T15:41:56.300

`<% %>`您可以使用and`<%= %>`标记以类似的 MVC 类型方式循环遍历列表，而不是使用中继器。

```
<table>
  <% foreach (var myItem in g) { %>
    <tr><td><%= myItem.title %></td></tr>
  <% } %>
</table> 
```

只要您循环通过的属性可以从aspx/ascx 页面访问（例如声明为受保护或公共），您就可以循环通过它。后面的代码中没有其他代码是必须的。

`<% %>`将评估代码并`<%= %>`输出结果。

这是最基本的例子：

在您的代码后面的类级别声明此列表：

```
public List<string> Sites = new List<string> { "StackOverflow", "Super User", "Meta SO" }; 
```

这只是一个简单的字符串列表，然后在你的 aspx 文件中

```
<% foreach (var site in Sites) { %> <!-- loop through the list -->
  <div>
    <%= site %> <!-- write out the name of the site -->
  </div>
<% } %> <!--End the for loop --> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-06T15:40:33.913

在 WebForm 中，您可以使用 Repeater 控件：

```
<asp:Repeater id="cdcatalog" runat="server">
   <ItemTemplate>
       <td><%# Eval("title")%></td>
   </ItemTemplate>
</asp:Repeater> 
```

在后面的代码中：

```
cdcatalog.DataSource = yourData;
cdcatalog.DataBind(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T15:41:44.240

您可以将 a`Repeater`与任何类型的有效`DataSource`( `SqlDataSource`, `EntityDataSource`, `ObjectDataSource`) 对象一起使用：

1.  定义数据源
2.  引用 Reperator 中的数据源

……

```
 <asp:Repeater id="someRep" runat="server" DataSourceID="YourDataSource">
       <ItemTemplate>
          <tr>
                <td><%# Eval("PropertyName") %></td> 
          </tr>
    </ItemTemplate>
    </asp:Repeater> 
```

...

# java - c:import 总是指向 jsp 本身

> ID：14732802
> 
> 赞同：0
> 
> 时间：2013-02-06T15:35:57.123
> 
> 标签：java, jsp, jstl

我有一个jsp：

```
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
hello
<c:import url="/scripts/script.js"  var="under" context="/"/>
<c:out value="${under}"/>
bye 
```

“script.js”指的是外部文件。但是，当我添加该语句时，导入总是会抓取我正在处理的文件。我得到以下输出：

> "你好 <%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 你好，再见”

为什么是这样？我该怎么做才能指向正确的jsp？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:45:35.543

你的脚本（/scripts/script.js）是否包含“再见”？

*   我可以 c:out 工作正常，所以 JSTL 库在类路径中（排除）
*   我们可以在 var 下查看（在这种情况下再见）

这清楚地表明您的 javascript 文件应该包含“再见”。

# c++ - 与 MSVC++10 兼容的预处理器变量 FOR_EACH 宏

> ID：14732803
> 
> 赞同：4
> 
> 时间：2013-02-06T15:36:03.780
> 
> 标签：c++, visual-c++, foreach, variadic-macros

我已经看到一些要求对可变参数`FOR_EACH`宏进行变体的问题。然而不幸的是，提供的答案与 VC++10 不兼容，因为它在传递给另一个宏时将 __VA_ARGS __ 作为一个参数扩展。请有人提供仍然适用于 VC++10 的 C++11 兼容（因此向前兼容）版本。也许使用经常提到的“解决方法” `#define EXPAND(x) x`，但是我不知道将其放在哪里以便获得例如[该答案](https://stackoverflow.com/a/1872506/864340)的后者在 VC++10 中工作的概括部分。

澄清一下，预期的行为是用于`FOR_EACH(x, a, b, ...)`产生`x(a) x(b), ...`，其中 x 是另一个宏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T17:25:20.040

[现在已经准确掌握了 VC++10 编译器错误的工作原理，我能够根据这个答案](https://stackoverflow.com/a/1872506/864340)的后半部分自己想出这样一个宏。

```
#define EXPAND(x) x
#define FOR_EACH_1(what, x, ...) what(x)
#define FOR_EACH_2(what, x, ...)\
  what(x);\
  EXPAND(FOR_EACH_1(what,  __VA_ARGS__))
#define FOR_EACH_3(what, x, ...)\
  what(x);\
  EXPAND(FOR_EACH_2(what, __VA_ARGS__))
#define FOR_EACH_4(what, x, ...)\
  what(x);\
  EXPAND(FOR_EACH_3(what,  __VA_ARGS__))
#define FOR_EACH_5(what, x, ...)\
  what(x);\
  EXPAND(FOR_EACH_4(what,  __VA_ARGS__))
#define FOR_EACH_6(what, x, ...)\
  what(x);\
  EXPAND(FOR_EACH_5(what,  __VA_ARGS__))
#define FOR_EACH_7(what, x, ...)\
  what(x);\
  EXPAND(FOR_EACH_6(what,  __VA_ARGS__))
#define FOR_EACH_8(what, x, ...)\
  what(x);\
  EXPAND(FOR_EACH_7(what,  __VA_ARGS__))
#define FOR_EACH_NARG(...) FOR_EACH_NARG_(__VA_ARGS__, FOR_EACH_RSEQ_N())
#define FOR_EACH_NARG_(...) EXPAND(FOR_EACH_ARG_N(__VA_ARGS__))
#define FOR_EACH_ARG_N(_1, _2, _3, _4, _5, _6, _7, _8, N, ...) N
#define FOR_EACH_RSEQ_N() 8, 7, 6, 5, 4, 3, 2, 1, 0
#define CONCATENATE(x,y) x##y
#define FOR_EACH_(N, what, ...) EXPAND(CONCATENATE(FOR_EACH_, N)(what, __VA_ARGS__))
#define FOR_EACH(what, ...) FOR_EACH_(FOR_EACH_NARG(__VA_ARGS__), what, __VA_ARGS__) 
```

示例用法：

```
#define callMember(o, f) o.f();
#define callMember_o(f) callMember(o, f)
FOR_EACH(callMember_o, doSomething, doSomethingElse); 
```

是相同的

```
o.doSomething(); o.doSomethingElse(); 
```

此解决方案与链接答案中的解决方案类似，只是在`FOR_EACH(what, x, ...)`使用一个元素调用时，零长度可变参数列表会导致虚假逗号，使 FOR_EACH_NARG 计数 2 个参数而不是 1 个参数，并且使用了`EXPAND`宏解决方法。

VC++10 中的错误是，如果`__VA_ARGS__`在可变参数宏的定义中传递给宏，则在替换为宏后对其进行求值，导致多个逗号分隔的参数被视为一个。为了解决这个问题，您必须延迟参数评估直到 after`__VA_ARGS__`被替换，通过将宏调用包装在 中`EXPAND`，强制宏调用被评估为字符串，替换`__VA_ARGS__`为这样做。只有在替换之后`EXPAND`才会调用宏，此时可变参数已经被替换。

`FOR_EACH_N`PS如果有人能提出一种紧凑地为更大的值生成宏的方法，我将不胜感激`N`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-10T13:18:27.210

根据 Dylan 的回答，我编写了一个 python 代码来生成 N 次 for_each 宏。

下面是代码：

```
from builtins import *

# number of generated for_each cases.
iter_max = 19

# override this with your own!
prefix = "MY_"  # define your own macro prefix, which ends with under_score if not empty.
internal_prefix = "internal_"

# CODE ------------------------------------------------------------------------------------------------------
INTERNAL_ = f"{internal_prefix}{prefix}"

fmt_numstr = "{}"  # f"{{:0>{max_digit}}}"

EXPAND = f"{INTERNAL_}EXPAND"

FOR_EACH = f"{INTERNAL_}FOR_EACH_"
FOR_EACH_N = f"{FOR_EACH}{fmt_numstr}"

OUT = "#pragma once\n"

OUT += f"#define {EXPAND}(x) x\n"
OUT += f"#define {FOR_EACH_N.format(1)}(what, x, ...) what(x)\n"

for i in range(2, iter_max + 1):
    OUT += f"#define {FOR_EACH_N.format(i)}(what, x, ...) " \
           f"what(x);" \
           f"{EXPAND}({FOR_EACH_N.format(i - 1)}(what, __VA_ARGS__))\n"

FOR_EACH_NARG = f"{INTERNAL_}FOR_EACH_NARG"
FOR_EACH_RSEQ_N = f"{INTERNAL_}FOR_EACH_RSEQ_N"
FOR_EACH_ARG_N = f"{INTERNAL_}FOR_EACH_ARG_N"

OUT += f"#define {FOR_EACH_NARG}(...) {FOR_EACH_NARG}_(__VA_ARGS__, {FOR_EACH_RSEQ_N}())\n"
OUT += f"#define {FOR_EACH_NARG}_(...) {EXPAND}({FOR_EACH_ARG_N}(__VA_ARGS__))\n"

underscore_sequence = ""
inverse_sequence = ""
for i in range(1, iter_max + 1):
    underscore_sequence += f"_{i}{',' if i < iter_max else ''}"

for i in range(0, iter_max + 1):
    inverse_sequence += f"{fmt_numstr}{',' if i < iter_max else ''} ".format(iter_max - i)

OUT += f"#define {FOR_EACH_ARG_N}({underscore_sequence}, N, ...) N\n"
OUT += f"#define {FOR_EACH_RSEQ_N}() {inverse_sequence}\n"

CONCATENATE = f"{INTERNAL_}CONCATENATE"

OUT += f"#define {CONCATENATE}(x,y) x##y\n"

INTERNAL_FOR_EACH = f"{INTERNAL_}FOR_EACH_"

OUT += f"#define {INTERNAL_FOR_EACH}(N, what, ...) {EXPAND}({CONCATENATE}({FOR_EACH}, N)(what, __VA_ARGS__))\n"
OUT += f"#define {prefix}FOR_EACH(what, ...) {INTERNAL_FOR_EACH}({FOR_EACH_NARG}(__VA_ARGS__), what, __VA_ARGS__)\n"

print(OUT) 
```

执行结果为：

```
#pragma once
#define internal_MY_EXPAND(x) x
#define internal_MY_FOR_EACH_1(what, x, ...) what(x)
#define internal_MY_FOR_EACH_2(what, x, ...) what(x);internal_MY_EXPAND(internal_MY_FOR_EACH_1(what, __VA_ARGS__))
#define internal_MY_FOR_EACH_3(what, x, ...) what(x);internal_MY_EXPAND(internal_MY_FOR_EACH_2(what, __VA_ARGS__))
#define internal_MY_FOR_EACH_4(what, x, ...) what(x);internal_MY_EXPAND(internal_MY_FOR_EACH_3(what, __VA_ARGS__))
#define internal_MY_FOR_EACH_5(what, x, ...) what(x);internal_MY_EXPAND(internal_MY_FOR_EACH_4(what, __VA_ARGS__))
#define internal_MY_FOR_EACH_6(what, x, ...) what(x);internal_MY_EXPAND(internal_MY_FOR_EACH_5(what, __VA_ARGS__))
#define internal_MY_FOR_EACH_7(what, x, ...) what(x);internal_MY_EXPAND(internal_MY_FOR_EACH_6(what, __VA_ARGS__))
#define internal_MY_FOR_EACH_8(what, x, ...) what(x);internal_MY_EXPAND(internal_MY_FOR_EACH_7(what, __VA_ARGS__))
#define internal_MY_FOR_EACH_9(what, x, ...) what(x);internal_MY_EXPAND(internal_MY_FOR_EACH_8(what, __VA_ARGS__))
#define internal_MY_FOR_EACH_10(what, x, ...) what(x);internal_MY_EXPAND(internal_MY_FOR_EACH_9(what, __VA_ARGS__))
#define internal_MY_FOR_EACH_11(what, x, ...) what(x);internal_MY_EXPAND(internal_MY_FOR_EACH_10(what, __VA_ARGS__))
#define internal_MY_FOR_EACH_12(what, x, ...) what(x);internal_MY_EXPAND(internal_MY_FOR_EACH_11(what, __VA_ARGS__))
#define internal_MY_FOR_EACH_13(what, x, ...) what(x);internal_MY_EXPAND(internal_MY_FOR_EACH_12(what, __VA_ARGS__))
#define internal_MY_FOR_EACH_14(what, x, ...) what(x);internal_MY_EXPAND(internal_MY_FOR_EACH_13(what, __VA_ARGS__))
#define internal_MY_FOR_EACH_15(what, x, ...) what(x);internal_MY_EXPAND(internal_MY_FOR_EACH_14(what, __VA_ARGS__))
#define internal_MY_FOR_EACH_16(what, x, ...) what(x);internal_MY_EXPAND(internal_MY_FOR_EACH_15(what, __VA_ARGS__))
#define internal_MY_FOR_EACH_17(what, x, ...) what(x);internal_MY_EXPAND(internal_MY_FOR_EACH_16(what, __VA_ARGS__))
#define internal_MY_FOR_EACH_18(what, x, ...) what(x);internal_MY_EXPAND(internal_MY_FOR_EACH_17(what, __VA_ARGS__))
#define internal_MY_FOR_EACH_19(what, x, ...) what(x);internal_MY_EXPAND(internal_MY_FOR_EACH_18(what, __VA_ARGS__))
#define internal_MY_FOR_EACH_NARG(...) internal_MY_FOR_EACH_NARG_(__VA_ARGS__, internal_MY_FOR_EACH_RSEQ_N())
#define internal_MY_FOR_EACH_NARG_(...) internal_MY_EXPAND(internal_MY_FOR_EACH_ARG_N(__VA_ARGS__))
#define internal_MY_FOR_EACH_ARG_N(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15,_16,_17,_18,_19, N, ...) N
#define internal_MY_FOR_EACH_RSEQ_N() 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0 
#define internal_MY_CONCATENATE(x,y) x##y
#define internal_MY_FOR_EACH_(N, what, ...) internal_MY_EXPAND(internal_MY_CONCATENATE(internal_MY_FOR_EACH_, N)(what, __VA_ARGS__))
#define MY_FOR_EACH(what, ...) internal_MY_FOR_EACH_(internal_MY_FOR_EACH_NARG(__VA_ARGS__), what, __VA_ARGS__) 
```

您可以自定义宏前缀和内部前缀以供自己使用。

# c# - 将页面内容序列化为xml文件

> ID：14732804
> 
> 赞同：0
> 
> 时间：2013-02-06T15:36:04.223
> 
> 标签：c#, xml-serialization

我有一个非常奇怪的错误，继续......

我在这里有我的xml：

**这是对的！**

```
<?xml version="1.0" encoding="utf-8"?>
<Page xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Title>Title Text</Title>
  <Subtitles>
    <Subtitle index="0">
      <Text>Sub title</Text>
    </Subtitle>
    <Subtitle index="1">
      <Text>Sub title</Text>
    </Subtitle>
  </Subtitles>
  <Content>
    <Images>
      <ImageSource src="http://www.placehold.it/760x236" border-width="8px" border-color="#F4F2F3" />
    </Images>
    <Text>
      <![CDATA[here i need a place for a huge text's and stufff]]>
    </Text>
  </Content>
</Page> 
```

直到这里一切都很好，在我像这样序列化它之后......

```
try
{
    XmlSerializer serializer = new XmlSerializer(typeof(TOut));

    XmlWriterSettings settings = new XmlWriterSettings
    {
        Indent = true
    };

    // get xml source file
    var source = string.Format("{0}\\{1}", SettingResolver<Settings>.BaseFolder, Resolver.Settings.Pages.PageCollection[pageName].Source);
    using (FileStream fs = new FileStream(source, FileMode.OpenOrCreate, FileAccess.ReadWrite))
    {
        XmlWriter writer = XmlWriter.Create(fs, settings);
        serializer.Serialize(writer, o);
    }
}
catch (Exception e)
{
    ExceptionHandler(new ErrorArgs("Serializing faulted!", e));
} 
```

这是我有问题的元素......

```
public class Content
{
    [XmlElement("Images")]
    public Images Image { get; set; }

    [XmlIgnore]
    public String ContentText
    {
        get;
        set;
    }

    private static readonly XmlDocument DummyDoc = new XmlDocument();

    [XmlElement("Text")]
    public XmlCDataSection ContentTextCData
    {
        get { return DummyDoc.CreateCDataSection(ContentText); }
        set { ContentText = (value != null) ? value.Data : null; }
    }
} 
```

我得到了这个 XML 的结果：
**这个不行，后面那个**

```
<?xml version="1.0" encoding="utf-8"?>
<Page xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Title>Title Text</Title>
  <Subtitles>
    <Subtitle index="0">
        <Text>Sub title</Text>
    </Subtitle>
    <Subtitle index="1">
        <Text>Sub title</Text>
    </Subtitle>
  </Subtitles>
  <Content>
    <Images>
      <ImageSource src="http://www.placehold.it/760x236" border-width="8px" border-color="#F4F2F3" />
    </Images>
    <Text>  
    <![CDATA[here i need a place for a huge text's and stufff]]>         
    </Text>
  </Content>
</Page>------------------>
</Page>
here i need a place for a huge text's and stufff
here i need a place for a huge text's and stufff
here i need a place for a huge text's and stufff
 </Content>
</Page> 
```

或这个：

```
<?xml version="1.0" encoding="utf-8"?>
<Page xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Title>title</Title>
  <Subtitles>
    <Subtitle index="0">
      <Text>test</Text>
    </Subtitle>
    <Subtitle index="1">
      <Text>test</Text>
    </Subtitle>
  </Subtitles>
  <Content>
    <Images>
      <ImageSource src="http://www.placehold.it/760x236" border-width="8px" border-color="#F4F2F3" />
    </Images>
    <Text><![CDATA[just a text + +++++++++++++++++++++++++Hropj
+++++++++++++++++++++++++Hropj
]]></Text>
  </Content>
</Page></Text>
  </Content>
</Page> 
```

问题是为什么会发生这种错误？*** 我注意到一件奇怪的事情，如果我保存文件就可以了，但是如果我删除它附加到我的文本的文本，我删除的所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:49:43.287

很奇怪……这很可能是由于序列化过程中 ContentText 中的某些字符导致括号不匹配的结果。如果将 XmlWriterSettings 编码属性设置为 unicode，会发生什么情况？

# sql - SQL Server 邮件问题

> ID：14732805
> 
> 赞同：0
> 
> 时间：2013-02-06T15:36:07.113
> 
> 标签：sql, tsql, email, send

我想知道以前是否有人遇到过这个问题。我们让电子邮件发送者向我们的客户发送电子邮件，在这封电子邮件中，有一个指向他们相应下载的链接。但是，一旦到达某些客户端，链接似乎会丢失一些字符（使链接无用）。

我已经检查了 sysmail_mailitems，但我从那里提取的电子邮件正文具有正确的链接。只是由于某些客户的某些原因，这些字符丢失了。

有没有人遇到过这种奇怪的事情？此外，链接中缺少的字符位于完全相同的位置。

# rally - Rally Lookback API：了解快照跨越日期端点时的结果计数

> ID：14732811
> 
> 赞同：1
> 
> 时间：2013-02-06T15:36:22.000
> 
> 标签：rally, lookbackapi

我正在运行一个相当简单的查询，我正在寻找特定时间范围内的任务快照计数。假设日期为 d1、d2 和 d3，其中 d1 < d2 < d3，我希望 d1（含）和 d2（不包括）之间的快照计数加上 d2（含）和 d3（不包括）之间的快照计数应等于 d1（含）和d3 独占。但是，我一直得到不同的计数...... d1 和 d3 之间的计数大于单个查询的总和。

---- 案例 1：01/13 – 01/15 输入

```
{
find:{
      "_TypeHierarchy":"Task",
      "_ValidFrom":{"$gte" : "2013-01-13T00:00:00.000Z"},
      "_ValidTo":  {"$lt"  : "2013-01-15T00:00:00.000Z"}},
fields:["_id","ObjectID","_SnapshotNumber","_ValidFrom","_ValidTo"],
pagesize:1
} 
```

输出

```
"TotalResultCount": 559, 
```

---- 案例 2：01/13 – 01/14 输入

```
{
find:{
      "_TypeHierarchy":"Task",
      "_ValidFrom":{"$gte" : "2013-01-13T00:00:00.000Z"},
      "_ValidTo":  {"$lt"  : "2013-01-14T00:00:00.000Z"}},
fields:["_id","ObjectID","_SnapshotNumber","_ValidFrom","_ValidTo"],
pagesize:1
} 
```

输出

```
"TotalResultCount": 52, 
```

---- 案例 3：01/14 – 01/15 输入

```
{
find:{
      "_TypeHierarchy":"Task",
      "_ValidFrom":{"$gte" : "2013-01-14T00:00:00.000Z"},
      "_ValidTo":  {"$lt"  : "2013-01-15T00:00:00.000Z"}},
fields:["_id","ObjectID","_SnapshotNumber","_ValidFrom","_ValidTo"],
pagesize:1
} 
```

输出

```
"TotalResultCount": 498, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T04:37:39.530

在研究结果对象时，我现在看到了我的错误。如果要查找给定时间范围内的快照计数，则应在 _ValidFrom 子句中指定开始和结束时间以及不等式：

```
"_ValidFrom":{"$gte" : "2012-01-13T00:00:00.000Z", "$lt"  : "2012-01-14T00:00:00.000Z"}}, 
```

在原始问题中，案例 2 和案例 3 中的查询不包括 ValidFrom 在 d1 之后和 ValidTo 在 d2 之后但在 d3 之前的快照。但是第一种情况会。因此，案例 1 的总计数高于案例 2 和案例 3 的总和。

# nuget - 如何创建包含预发布的 nuspec 依赖项

> ID：14732815
> 
> 赞同：26
> 
> 时间：2013-02-06T15:36:30.780
> 
> 标签：nuget, semantic-versioning

一些上下文：

我有 4 个具有依赖项的 nuget 包。它们都处于预发布模式，并且按照自己的节奏从 alpha 发展到“稳定”。我希望能够在依赖定义中指定应该包含预发布，但是当“稳定”版本可用时，它应该更新到稳定版本。

在[NuGet Docs](http://docs.nuget.org/docs/reference/versioning)中，版本控制规则定义`[`并`]`包含您指定的版本号`(`和`)`排除您指定的版本号。

有关 nuspec 文件中版本影响的一些示例：

```
 <dependencies>
     <dependency id="MyComponent" version="1.2.0" />
 </dependencies> 
```

==> 这将安装 MyComponent 1.2.0 或更高版本。（不包括预发布 1.2.0-alpha）

```
 <dependencies>
     <dependency id="MyComponent" version="[1.2.0" />
 </dependencies> 
```

==> 这将安装 MyComponent 1.2.0 或更高版本。（不包括预发布 1.2.0-alpha）

```
 <dependencies>
     <dependency id="MyComponent" version="[1.2.0,2)" />
 </dependencies> 
```

==> 这将安装 MyComponent 1.2.0 直到但不包括版本 2.0.0。（不包括预发布 1.2.0-alpha 但包括预发布 2.0.0-alpha）

目前我设置：

```
 <dependencies>
     <dependency id="MyComponent" version="(1.1.32767" />
 </dependencies> 
```

但我觉得这是一种非常丑陋的方式，它并不能真正反映现实。（如果版本 1.1.32767.1 存在怎么办？）

我想知道如何指定您希望在最低版本中包含预发布版本？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T16:08:27.017

有一件重要的事情需要注意：

**依赖于预发布使生成的包本身也是预发布。**

默认情况下，在定义依赖项的版本范围时忽略预发布是有道理的，因为它会改变正在生成的包的版本（不知道要选择哪个版本）。

理想情况下，在安装过程中检查依赖的版本范围的算法会检查消费的包是否是预发布的，然后在允许的版本范围内包含或排除预发布的依赖。

我不确定目前是否是这种情况，但看看你的问题，我认为不是。您可能想在[http://nuget.codeplex.com上记录功能请求（或提交拉取请求？）](http://nuget.codeplex.com)

# jquery - Flexslider 在元素周围移动

> ID：14732816
> 
> 赞同：0
> 
> 时间：2013-02-06T15:36:31.160
> 
> 标签：jquery, css, flexslider

我对 Jquery 插件 Flexslider 有一个奇怪的问题。当从一张幻灯片更改为下一张时（仅在移动版本中，视口 <480）所有其他元素似乎都在晃动。当我使用 Modernizr 向页面添加移动响应菜单的脚本时，这个问题就开始了，但我不知道问题是什么。测试站点是[http://private2.portalesardegna.com](http://private2.portalesardegna.com)

这是移动菜单脚本的参考[http://coding.smashingmagazine.com/2013/01/15/off-canvas-navigation-for-responsive-website/](http://coding.smashingmagazine.com/2013/01/15/off-canvas-navigation-for-responsive-website/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:55:25.727

我认为这是因为有 2 个 div

```
<div id="outer-wrap">
<div id="inner-wrap"> 
```

包含所有页面元素，它们是移动菜单所必需的，但是所有移动图像的 jquery 脚本（主页中的 flexslider 和酒店详细信息页面中的图片库）都会抖动所有内容，我在 iphone 中测试了该网站和野生动物园...

应用于这些 div 的 CSS 是

```
#outer-wrap {
  position: relative;
  overflow: hidden;
  width: 100%;
}

#inner-wrap {
  position: relative;
  width: 100%;
} 
```

# linux - OpenCV，Linux ubuntu12.04 未定义符号：_ZN9QListData11detach_growEPii

> ID：14732819
> 
> 赞同：0
> 
> 时间：2013-02-06T15:36:40.107
> 
> 标签：linux, qt, opencv, import, undefined-symbol

现在我正在努力使用 OpenCV

我开始使用 NAO 并从其他人那里得到了一些程序。

第一次，问题是OpenCV

```
enter code here
gibeom@gibeom-SG31:~/NAO/nao_murata$ ./touching_object.py 
Traceback (most recent call last):
File "./touching_object.py", line 5, in <module>
from all_module import *
File "/home/gibeom/NAO/nao_murata/all_module.py", line 22, in <module>
import cv
ImportError: No module named cv 
```

我收到了这条消息，所以我安装了 OpenCV

如本主页所示

我成功安装了openCV

我又试了

但我收到了这条消息

```
enter code here
gibeom@gibeom-SG31:~/NAO/nao_murata$ ./trainer_nao_module.py
Traceback (most recent call last):
File "./trainer_nao_module.py", line 7, in <module>
from all_module import *
File "/home/gibeom/NAO/nao_murata/all_module.py", line 22, in <module>
import cv
File "/usr/local/lib/python2.7/dist-packages/cv.py", line 1, in <module>
from cv2.cv import *
ImportError: /usr/lib/i386-linux-gnu/libQtTest.so.4: undefined symbol: _ZN9QListData11detach_growEPii 
```

我没有安装 qt 但也许他的教程有 qt

反正在那之后，

我搜索了互联网，但我无法得到正确的答案。

有人说，“我在 /usr/lib 中安装了一个带有 libqtGui.so.4.6.2 的 3rd 方包。只需将其删除，一切都会好起来的”

我试图这样做，但在我的 /usr/lib 中，该文件不存在。

我想显示我的 usr/lib/i386-linux-gnu/ 文件夹，因为大小限制我不能

而且我的声望点低于 10 我无法上传图片。

不管怎样，trainier_nao_module.py

```
enter code here
1 #! /usr/bin/env python
2 # -*- coding:utf-8 -*-
3 
4 # this program is for trainer-nao
5 
6 #--- import all original modules ---#
**7 from all_module import ***
8 #-------------------------#
9 
10 #--- import user defined modules ---# 
```

, all_module.py

```
enter code here

1 #! /usr/bin/env python
2 # -*- coding:utf-8 -*-
3 
4 # this file imports original modules
5 
6 import config
7 import config_trainer
8 
9 import os
10 import sys
11 import time
12 import string
13 import pygame
14 
15 from naoqi import ALProxy
16 
17 from pygame.locals import *
18 
19 from multiprocessing import Process, Lock, Array, Value, Event
20 
21 from math import *
**22 import cv**
23 from vision_definitions import * 
```

python2.7/dist-packages/cv.py

```
enter code here

from cv2.cv import * 
```

如果您需要更多信息来解决此问题，

请回复。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T13:07:52.663

如果您收到这样的消息，请使用未定义的符号调用“c++filt”。它会告诉你符号的纯 C++ 名称。通常，这更容易理解：

> c++filt _ZN9QlistData11detach_growEPii

### 也许，如果你重新安装 QT 库可以解决这个问题。

[http://qt-project.org/downloads](http://qt-project.org/downloads)

# php - XSS PHP 输入/输出

> ID：14732820
> 
> 赞同：0
> 
> 时间：2013-02-06T15:36:42.757
> 
> 标签：php, xss

嗨，关于 XSS 和 PHP 的问题......

我正在构建一个 PHP 应用程序，所有输入都通过客户端然后服务器端验证进入数据库，使用 filtervar 进行清理.....存储在数据库中的加密密码，如果我输入 scripttag -- 不管 -- 它得到的脚本标记就这样存储在数据库中，它不会在那里造成任何伤害。

当输入被直接输出时，XSS 是否只是一种威胁，并且使用 htmlentities 的唯一时间是在输出用户输入的数据时。

我的应用程序不这样做，但是有没有办法让攻击者注入一些恶意代码并导致它被输出，即使我的编程逻辑不允许这样做。

我想覆盖所有基地......

期待您的回答............是的，我正在使用 PDO 准备语句、bindParam、执行以防止 SQL 注入，并将数据安全地存储在数据库中，我也在使用：

```
 if(filter_var($_POST['firstname'], FILTER_SANITIZE_STRING)){
            $clean['firstname'] = $_POST['firstname'];
            }; 
```

对于消毒可以改进............

我刚刚修复了代码，if 语句阻止了 filter var 清理脚本标签，如下所示：

```
$clean =  array();
        $clean['firstname'] = (filter_var($_POST['firstname'],     FILTER_SANITIZE_STRING));

            $clean['lastname'] = (filter_var($_POST['lastname'], FILTER_SANITIZE_STRING));

            $clean['username'] = (filter_var($_POST['username'], FILTER_SANITIZE_STRING)); 
```

现在脚本标签不再在数据库中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:39:54.270

## 输入

如果您使用 filtervar 正确地清理或验证了事物，那么您可能在数据库端没有任何问题。有时很难知道你是否已经覆盖了所有的基础。您的数据库查询可能仍应使用参数化查询来保护您。

## 输出

如果其他用户可以看到任何用户输入，则应正确转义目标内容类型的数据；即使是用户名之类的东西也可能是恶意的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:45:05.347

如果您展示了一些关于如何使用 filter_var() 的代码示例，那就太好了。但是，总的来说，这里有一些事情需要考虑：

*   filter_var() 可以是一个很好的工具。此外，您可以查看 HTMLPurifier 库。我在这方面取得了很大的成功。目标是在不良内容进入数据库之前将其删除。
*   使用准备好的语句将数据插入数据库。虽然这在仅用于单个查询时有一点额外的权重，但它是直接将数据插入数据库的最佳方法，并且 sql 注入的风险最小。
*   输出数据时使用 htmlentities()*和*正确的编码。例如，不允许在您的数据库中使用 UTF-8 数据但输出 ISO 8859-1 输出。我总是建议确保您的文档编码、数据库和所有过滤方法都使用相同的编码，最好是 UTF-8
*   不要忘记 $_SERVER 在 PHP 中是不干净的。很多人做了大量的过滤和 HTML 实体，但是在表单中使用了未经处理的 $_SERVER['REQUEST_URI'] 版本

如果您需要具体帮助，请发布代码示例。

# c# - Response.WriteFile 写入网页源代码而不是文本文件

> ID：14732824
> 
> 赞同：0
> 
> 时间：2013-02-06T15:36:54.317
> 
> 标签：c#, response.write

当我试图从共享位置获取文本文件时，当用户从 Web 浏览器打开它时，它不显示文本文件内容，而是显示页面源。如何避免这种情况？我究竟做错了什么？这是我的代码。但是当我在本地运行时，我可以看到文本文件数据并且我也正在获取页面源。我的英语很糟糕，如果有任何错误，请见谅。

```
 GridViewRow rw = (GridViewRow)(((LinkButton)e.CommandSource).NamingContainer);
 LinkButton lnkTxtFile = (LinkButton)rw.FindControl("lnkTxtFile");
 string strFilename = lnkTxtFile.Text.Replace("/","\\");
 System.IO.FileInfo targetFile = new System.IO.FileInfo(strFilename);
 Response.Clear();
 Response.AddHeader("Content-Disposition", "attachment; filename=" + targetFile.Name);
 Response.ContentType = "application/octet-stream";
 Response.WriteFile(targetFile.FullName);
 HttpContext.Current.ApplicationInstance.CompleteRequest(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:42:30.197

更改`HttpContext.Current.ApplicationInstance.CompleteRequest();`为`Response.End();`

我怀疑这`CompleteRequest()`是渲染页面的其余部分。`Response.End()`关闭响应流并立即将其返回给客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:44:24.237

尝试更换

```
HttpContext.Current.ApplicationInstance.CompleteRequest(); 
```

和

```
Response.End(); 
```

# python - Python用于文件中的行？

> ID：14732827
> 
> 赞同：1
> 
> 时间：2013-02-06T15:37:00.053
> 
> 标签：python, string, file, loops

有没有办法在 Python 中创建一个循环，逐行读取文件并使用该行执行操作？例如：

```
for eachLine in '~/file':
    print eachLine 
```

这将打印`~/file`到终端

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T15:38:13.003

你是如此接近，你所要做[`open()`](http://docs.python.org/3/library/functions.html#open)的就是文件：

```
with open(os.path.expanduser('~/file')) as inputfile:
    for eachLine in inputfile:
        print eachLine 
```

通过使用`with`上下文管理器块，当您完成循环时，文件会自动关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:40:31.760

只需要在循环中打开文件：

```
for eachLine in open(os.path.expanduser('~/file')):
    print eachLine 
```

在 Win7 和 OpenSUSE 12.1（我相信其他人）上，我看到 python 不喜欢路径的“~”部分，所以`os.path.expanduser`修复了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:40:57.970

解决方案在：[点击](http://docs.python.org/3/tutorial/inputoutput.html#methods-of-file-objects)

我没有在这里写一些代码，因为在链接上有很多不同的方法可以解决您的问题。玩得开心。

# dos - dos脚本查找一些文件，在同一目录中创建一个文件夹并将它们移入

> ID：14732832
> 
> 赞同：0
> 
> 时间：2013-02-06T15:37:29.087
> 
> 标签：dos

我想创建一个dos脚本（.bat）来搜索所有子文件夹，每当它找到文件名中包含单词MK11的文件时，它必须创建一个名为archive的文件夹并将文件移动到其中。

例子：

c:\folder1\folder2\folderX\fileMK11.txt -> c:\folder1\folder2\folderX\archive\fileMK11.txt c:\folder1\folder3\fMK11ile.txt -> c:\folder1\folder3\archive\fMK11ile 。文本文件

我试图从我看到的示例中制作以下脚本，但问题是它在脚本所在的目录而不是找到文件的目录中创建了文件夹“存档”。

```
 setlocal ENABLEDELAYEDEXPANSION
    set /a c=0
    FOR /R %%i in (*MK11*) do (
    set /a c=c+1
    md archive
    move "%%i" archive
    )
    endlocal 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:10:02.447

我认为这个脚本会让你走上这条路。我回应了 COPY 命令而不是 MOVE 命令，但一些困难的部分已经完成。

```
@echo off
SETLOCAL ENABLEEXTENSIONS ENABLEDELAYEDEXPANSION

SET TEMPFILE=%TEMP%\afinder_%RANDOM%_%RANDOM.tmp
DIR /S /B /A-D *MK11* >%TEMPFILE%
FOR /F "usebackq delims=" %%f IN (`type %TEMPFILE%`) DO (
    ECHO "%%f"
    FOR /F "delims=\ tokens=*" %%a IN ("%%f") DO (
        SET PNAME="%%~pa"
        ECHO PNAME is set to !PNAME!
    ECHO "!PNAME:~-9,7!"
        REM Check to see if this file is already in an Archive directory.
        IF "!PNAME:~-9,7!" == "Archive" (
            echo got one
        ) else (
            echo not one
            IF NOT EXIST "!PNAME!\Archive" (MKDIR "!PNAME!\Archive")
            echo COPY %%f "!PNAME!\Archive"
        )
    )
)
IF EXIST "%TEMPFILE%" (DEL "%TEMPFILE%")
EXIT /B 0 
```

# ruby-on-rails-3 - 从 3.0.7 升级到 3.2.11 时无法启动 rails 服务器

> ID：14732833
> 
> 赞同：1
> 
> 时间：2013-02-06T15:37:35.977
> 
> 标签：ruby-on-rails-3, ruby-on-rails-plugins

我正在使用 ruby​​ 1.8.7 并尝试将现有应用程序的 rails 版本从 3.0.7 升级到 3.2.11。我已经安装了所有相关的 gem，并且 bundle install 也完成了，但是当我使用 rails s 启动 rails 服务器时，它向我显示了错误。

```
rails s
=> Booting WEBrick
=> Rails 3.2.11 application starting in development on .....
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/var/lib/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require': no such file to load -- journey (LoadError)
    from /var/lib/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    from /var/lib/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /var/lib/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    from /var/lib/gems/1.8/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:1
    from /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/engine.rb:489:in `routes'
    from /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/engine.rb:551
    from /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `instance_exec'
    from /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `run'
    from /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb:55:in `run_initializers'
    from /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `each'
    from /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `run_initializers'
    from /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/application.rb:136:in `initialize!'
    from /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `send'
    from /var/lib/gems/1.8/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /home/anshul/herematch/config/environment.rb:5
    from /var/lib/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    from /var/lib/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    from /var/lib/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /var/lib/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    from /home/anshul/herematch/config.ru:3
    from /var/lib/gems/1.8/gems/rack-1.2.4/lib/rack/builder.rb:46:in `instance_eval'
    from /var/lib/gems/1.8/gems/rack-1.2.4/lib/rack/builder.rb:46:in `initialize'
    from /home/anshul/herematch/config.ru:1:in `new'
    from /home/anshul/herematch/config.ru:1 
```

请帮我！！！

# git - 来自“git clone”和“git fetch”命令的奇怪/乱码远程输出

> ID：14732836
> 
> 赞同：1
> 
> 时间：2013-02-06T15:37:45.540
> 
> 标签：git, git-clone, git-fetch

从远程 Git 存储库克隆和获取时，我遇到了一些奇怪的服务器输出（下面的块引用的第 5 行）。我想知道是否有人想过可能是什么原因造成的。

```
D:\dev>git clone https://<user>@<repo>
Cloning into '<repo>'...
remote: Counting objects: 345583, done.
remote: Compressing objects: 100% (26532/26532), done.
remote: Total 34R558ece3 iv(dinelg taob 3je19ct67s:3) 1, 00re% us(3ed45 358443/25345 55(d83el),ta 2 35418.6591 4)  B
Receiving objects: 100% (345583/345583), 255.40 MiB | 3.55 MiB/s, done.
Resolving deltas: 100% (319673/319673), done.
Checking out files: 100% (16038/16038), done. 
```

Git 的服务器版本是 1.8.0.msysgit.0，Git 的本地版本是 1.7.11.msysgit.1。我最好的猜测是这是版本差异的潜在产物，但我团队中的许多其他开发人员使用相同的版本并且没有报告这样的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T14:13:04.780

将我的本地版本的 Git 升级到 1.8.1.msysgit.1 解决了这个问题。不幸的是，我始终无法找到根本问题。

# python - 搜索导入位置

> ID：14732837
> 
> 赞同：0
> 
> 时间：2013-02-06T15:37:46.413
> 
> 标签：python

我正在尝试编写一个 Python 脚本/函数来帮助确定从哪里导入一些东西。我想要这个功能专门用于 PyQt4，但它可以扩展并用于 Python 标准库。

为此，我需要为给定的搜索词动态搜索模块、共享对象、类以及可能更多“类型”的事物。

我想传递一个模块/类/等。作为字符串，动态导入，然后搜索。

该函数的接口将是这样的：

```
search(object_to_search, search_term) 
```

**例子：**

```
search('datetime', 'today') -> 'datetime.datetime.today'

search('PyQt4', 'NonModal') -> 'PyQt4.QtCore.Qt.NonModal'

search('PyQt4', 'QIcon') -> 'PyQt4.QtGui.QIcon' 
```

我想这也可以支持像“*”这样的通配符来搜索所有内容， `sys.path`但这超出了我目前所关心的范围。

这种类型的脚本对 PyQt4 尤其有用。上面有很多“类似枚举”的东西`NonModal`，找到导入或引用它们的位置可能很麻烦。

我倾向于大量使用 C++ Qt 文档来获取 PyQt4 信息，因为将示例转换为 Python 通常很容易。C++ Qt 文档更全面。找到适合 Qt 的示例代码也容易得多。但是，如果不手动搜索文档或猜测，在 PyQt4 中很难找到其中一些“类枚举”属性的导入位置。目标是自动化这个过程，让脚本告诉我我正在寻找的东西的位置。

我尝试了几种不同的实现方式，包括使用 递归搜索对象`dir()`、使用`inspect`模块以及用于共享对象的 hacky 版本的导入/发现。下面是我的各种实现，其中没有一个真正工作得很好。

这种事情甚至可能吗？如果是这样，最好的方法是什么？另外，我试图通过省略内置的东西、函数等来减少我搜索的东西的数量，但我不相信这是必要的，甚至是正确的。

**尝试的解决方案：**

```
def search_obj_inspect(obj, search_term):
    """Search given object for 'search_term' with 'inspect' module"""

    import inspect

    def searchable_type(obj):
        is_class = inspect.isclass(obj)
        root_type_or_obj = is_class and obj not in [object, type]
        abstract_class = is_class and inspect.isabstract(obj)
        method_or_func = inspect.ismethod(obj) or inspect.isfunction(obj)
        try:
            hidden_attribute = obj.__name__.startswith('__')
        except AttributeError:
            hidden_attribute = False

        searchable = True

        # Avoid infinite recursion when looking through 'object' and 'type' b/c
        # they are members of each other
        if True in [abstract_class, root_type_or_obj, hidden_attribute,
                    method_or_func, inspect.isbuiltin(obj)]:
            searchable = False

        return searchable

    # FIXME: Search obj itself for search term? obj.__name__ == search_term?
    for n, v in inspect.getmembers(obj,
                                   predicate=lambda x: searchable_type(x)):
        if search_term in n:
            try:
                return v.__name__
            except AttributeError:
                return str(v)

    return None

def search_obj_dir(obj, search_term):
    """Search given object and all it's python submodules for attr"""

    import re
    import types
    SEARCHABLE_TYPES = (types.ModuleType, types.ClassType, types.InstanceType,
                        types.DictProxyType)

    for item in dir(obj):
        if item.startswith('__'):
            continue

        if re.search(search_term, item):
            return obj.__dict__[item].__module__
        else:
            try:
                submod = obj.__dict__[item]
            except (KeyError, AttributeError):
                # Nothing left to recursively search
                continue

            if not isinstance(submod, SEARCHABLE_TYPES):
                continue

            #mod = search_obj_dir(submod, search_term)
            #if mod:
                #return '.'.join([mod, submod.__name__])

    return None

def search_so(module, attr):
    """Search given modules shared objects for attr"""

    import os
    import re

    try:
        path = module.__path__[0]
    except (AttributeError, IndexError):
        return False

    for root, dirs, files in os.walk(path):
        for filename in files:
            if filename.endswith('.so'):
                py_module_name = filename.split('.')[0]
                so_module = __import__(module.__name__, globals(), locals(),
                                        [py_module_name])

                if re.search(attr, py_module_name):
                    return ''.join([module.__name__, '.', py_module_name])
                try:
                    found = search_obj_dir(
                                    so_module.__dict__[py_module_name], attr)
                except KeyError:
                    # This isn't a top-level so, might be a subpackage
                    # FIXME: Could recursively search SO as well, but imports
                    #        might get weird
                    continue

                if found:
                    return found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:25:34.663

感谢@JonClements 提示查看 pydoc 模块。[我找到了一种结合pkgutil](http://docs.python.org/2/library/pkgutil.html)和[inspect](http://docs.python.org/2/library/pkgutil.html)模块实现几乎我想要的方法。

“诀窍”是使用 遍历包（如 PyQt4）中的所有模块，`pkgutil.iter_modules`然后可以使用`inspect.getmembers`. 总体思路如下：

```
for pkg in given_pkg:
    for module_or_class in pkg:
        for attribute in module_or_class: 
```

您可以在[此处](https://gist.github.com/durden/4723305)查看完整的解决方案。

# python - 如何在 GTK3 中获取 XWindow ID？

> ID：14732838
> 
> 赞同：0
> 
> 时间：2013-02-06T15:37:51.067
> 
> 标签：python, x11, gtk3

在 GTK3 中，如何检索 XWindow ID？我在 GdkWindow 中没有看到任何与此相关的内容。

在文档中，据说有一个 GDK_WINDOW_XID() 宏。但是，我在 Python 绑定中找不到等价物。

# jquery - jqgrid在行中编辑删除按钮

> ID：14732844
> 
> 赞同：0
> 
> 时间：2013-02-06T15:38:07.500
> 
> 标签：jquery, jqgrid-php

我将 jqgrid 用于数据网格。

我想使用编辑按钮和删除按钮而不是单击行来编辑和删除每一行。这是jquery代码：

```
 $(function(){ 
var lastsel2
$("#list").jqGrid({                    
url:'example.php',
datatype: 'xml',
mtype: 'GET',
colNames:['id','name', 'status'],
colModel :[ 
{name:'id', index:'id', width:155}, 
{name:'name', index:'name', width:190, editable: true}, 
{name:'status', index:'status', width:180, align:'right', editable: true},                         
],    

onSelectRow: function(id){
//if(appid && appid!==lastsel2){
if (id && id !== lastsel2){
jQuery('#list').restoreRow(lastsel2);
jQuery('#list').editRow(id,true);
lastsel2=id;
}                       
},
editurl: "example.php",
pager: '#pager',
rowNum:10,
rowList:[10,20,30],
sortname: 'appid',
sortorder: 'desc',
viewrecords: true,
gridview: true,
caption: 'My first grid'
}); 
}); 
```

代码

```
<table id="list"><tr><td> </td></tr></table> 
<div id="pager"></div> 
```

![在此处输入图像描述](../Images/a1dc495b06bf4071029b99ac377209d9.png) 我附上一张图片，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:12:38.203

我做了什么：

*   每行将包含 Action
*   Action 可以包含任何操作，例如：编辑或删除。

这是我的代码

```
jQuery("#list4").
        jqGrid(
            { datatype: "local"
            , height: 250
            , colNames:['Action','Inv No','Date', 'Client', 'Amount','Tax','Total','Notes']
            , colModel:
                [ {name:'action', width:30 }
                , {name:'id',index:'id', width:60, sorttype:"int"}
                , {name:'invdate',index:'invdate', width:90, sorttype:"date",editable:true}
                , {name:'name',index:'name', width:100,editable:true}
                , {name:'amount',index:'amount', width:80, align:"right",sorttype:"float",editable:true}
                , {name:'tax',index:'tax', width:80, align:"right",sorttype:"float",editable:true}
                , {name:'total',index:'total', width:80,align:"right",sorttype:"float",editable:true}
                , {name:'note',index:'note', width:150, sortable:false,editable:true} 
                ] 
```

...

```
 And populate data, it should contain such as: 
action:"<a title='save' class='ui-pg-div ui-pg-button ui-corner-all' style='display:block; border:0px none' href='javascript:saveInLineRow(\"list4\")'><span class='ui-icon ui-icon-plus'></span></a>" 
```

# asp.net - wcf 网络服务与 asp 网络 api

> ID：14732848
> 
> 赞同：1
> 
> 时间：2013-02-06T15:38:15.233
> 
> 标签：asp.net, wcf, asp.net-web-api

我想从 asp.net 社区获得一些关于当前用于创建新 Web 服务的技术的反馈。

如果我想开始公开与 oracle 数据库对话并返回一些结果的 Web 服务，我应该倾向于 WCF Web 服务还是 ASP.net Web API？哪个是首选？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:45:51.437

[这个问题在这里](https://stackoverflow.com/questions/9462130/what-is-the-difference-between-asp-net-web-api-and-wcf-service)或多或少得到了回答。我也真心推荐你看看[这篇文章](http://www.codeproject.com/Articles/341414/WCF-or-ASP-NET-Web-APIs-My-two-cents-on-the-subjec)。

但话虽如此，为了简短起见，您可以将 WebAPI 视为 WCF 的更简单、更轻量级的替代方案。WebAPI 服务通过 HTTP 运行，最适合更简单的任务，而 WCF 在可以与之通信的协议方面更加通用，并且使用 SOAP 进行通信，它本身是 REST 的相当重量级的替代品，通常与 WebAPI 一起使用。

由于您只是提供本质上是数据访问点的东西，因此我建议您使用 WebAPI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:46:59.430

我假设您正在谈论 WCF 数据服务。

Web API 比 WCF DS 更年轻，因此还不够成熟。我上次检查的 Web API 不支持预发布之外的完全过滤查询（a la OData）。 [http://nuget.org/packages/Microsoft.AspNet.WebApi.OData/0.3.0-rc](http://nuget.org/packages/Microsoft.AspNet.WebApi.OData/0.3.0-rc)

然而值得注意的是，Web API 看起来确实更具可配置性。

# git - Git不会区分我的主要插件文件吗？

> ID：14732849
> 
> 赞同：6
> 
> 时间：2013-02-06T15:38:25.783
> 
> 标签：git, bitbucket

所以我遇到了一个非常奇怪的问题。无论我对某个文件进行什么更改，它总是说有 1 个删除和 1 个插入，这是每个文件的整个代码。其他文件不会发生这种情况。这只是最近才开始发生，我不确定是什么原因造成的。有任何想法吗？

如果您需要我，我会进一步解释。

**编辑：**我想我离弄清楚它越来越近了。如果我输入`git diff`，我会得到如下信息：

`<?php^M^M/*^MPlugin Name: SomeName^MPlugin URI: http://...`

所以是的，它肯定与行尾有关，但我怎样才能摆脱那些呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T02:19:29.887

Git 试图判断一个文件是文本文件还是二进制文件，但有时它会得到错误的答案。为什么？没有看到文件很难说。也许你有一个非ASCII字符，也许行尾很奇怪，也许它很混乱。无论哪种方式，当它出错时，是时候分解一个`.gitattributes`文件以避免混淆。

如果有问题的“主”文件被命名`myfile.c`，那么您将创建一个`.gitattributes`像这样的文件：

```
myfile.c text 
```

如果所有`*.c`文件都是文本，你可以说：

```
*.c text 
```

请参阅[http://git-scm.com/book/ch7-2.html](http://git-scm.com/book/ch7-2.html)以及[为什么 Git 将此文本文件视为二进制文件？](https://stackoverflow.com/questions/6855712/git-treats-text-file-as-a-binary)和[http://git-scm.com/docs/gitattributes](http://git-scm.com/docs/gitattributes)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T00:52:04.300

好吧，事实证明它与 git 中的任何设置无关，而是与文件有关。我[在 SE 上找到了这个答案，](https://stackoverflow.com/a/251383/566610)通过在 VIM 中打开文件并输入以下命令来修复它：

`:%s/^M/\r/g`（按`CTRL+V`然后`CTRL+M`获取`^M`）

# php - html标签之间的preg_match

> ID：14732862
> 
> 赞同：0
> 
> 时间：2013-02-06T15:39:02.943
> 
> 标签：php, preg-match

我需要获取 html 标签之间的名称。

```
<div class="from"><span class="profile fn">firstnamed familyname</span></div> 
```

到目前为止，我根据其他有相同问题的人的例子进行了尝试：

```
preg_match(";from"><span class="profile fn>(.?)</span></div>;", $text, $match) 
```

但它不起作用。

正确的方法是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:49:11.477

```
preg_match(";from"><span class="profile fn>(.?)</span></div>;", $text, $match) 
```

...应该触发这个：

> 解析错误：语法错误，意外的 '<'

除此之外：

*   您寻找一个不在原始文本中的未封闭属性：

    `class="profile fn`对比`class="profile fn"`

*   您寻找零个或一个字符：

    `.?`

固定的正则表达式将是：

```
$text = '<div class="from"><span class="profile fn">firstnamed familyname</span></div>';
preg_match(';from"><span class="profile fn">(.*)</span></div>;', $text, $match);
var_dump($match); 
```

当然，这可能会在大型 HTML 文档上中断（`</span></div>`稍后再出现）。正则表达式在用于解析 HTML 时是不可能正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:41:47.347

这：

```
preg_match(";from"><span class="profile fn>(.?)</span></div>;", $text, $match) 
```

在语法上不正确，您必须转义双引号：

```
preg_match(";from\"><span class=\"profile fn>(.?)</span></div>;", $text, $match) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:43:20.740

您需要转义特殊字符（例如引号）：

```
preg_match(";from\"><span class\=\"profile fn>(.?)</span></div>;", $text, $match) 
```

# sql - 循环浏览数据库和每个表以查找包含电话号码的任何列

> ID：14732871
> 
> 赞同：0
> 
> 时间：2013-02-06T15:39:29.673
> 
> 标签：sql, sql-server-2008

我需要遍历每个数据库表和每一列以查看它是否包含电话号码。任何以文本 + 或 00 或 0 开头的内容。

我找到了循环遍历列名的代码/游标，但它们不搜索实际数据。任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:47:11.543

您需要将这些游标与查询结合使用以查找所需内容。

这是一个搜索所有表的所有列的脚本。我将留给您在搜索中添加所有数据库

（这是假设您使用的是 SQL Server 2005 或更高版本。它可能适用于其他系统，但未经测试。

```
--fields types to search within
declare table_field_cursor cursor local fast_forward for select sys.tables.name, sys.columns.name from sys.columns inner join sys.tables on (sys.columns.object_id = sys.tables.object_id)inner join sys.types on (sys.columns.system_type_id = sys.types.system_type_id)
where sys.tables.type = 'U' and sys.types.name in ('varchar', 'nvarchar', 'char', 'nchar', 'text')

--Stop printing the Rows affected message.
set NOCOUNT ON

--loop through all tables & fields seaching for your string
open table_field_cursor

declare @table_name sysname
declare @field_name sysname

fetch next from table_field_cursor into @table_name, @field_name
while @@fetch_status <> -1
begin
    if @@FETCH_STATUS <> -2
        execute ('
        if EXISTS(select [' + @field_name + '] from [' + @table_name + '] with (nolock) where cast([' + @field_name + '] as nvarchar(3)) like ''+%'' or cast([' + @field_name + '] as nvarchar(3)) like ''0%'')
        begin
        print ''Found in table ' + @table_name + '.' + @field_name + '!''
        select * from [' + @table_name + ']  with (nolock) where cast([' + @field_name + '] as nvarchar(3)) like ''+%'' or cast([' + @field_name + '] as nvarchar(3)) like ''0%''
        end
        ')

    fetch next from table_field_cursor into @table_name, @field_name
end 

close table_field_cursor
deallocate table_field_cursor 
```

这将搜索所有具有`varchar`, `nvarchar`, `char`, `nchar`,`text`列的表，并查看它是否以`0`or开头`+`（我们不需要检查，`00`因为它包含在`0`检查中）。如果您能够摆脱检查`text`列的要求，您可以删除`nvarchar(3)`铸件并可能加快速度，因为`text`不支持`like`查询，所以铸件已完成。

要搜索多个数据库，请查看[sp_MSForeachdb](http://weblogs.sqlteam.com/joew/archive/2008/08/27/60700.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:44:56.323

如果您使用的是 Oracle 数据库，请在循环中使用 EXECUTE IMMEDIATE 创建一个 sql 语句，网络上有很多资源，其中之一是[http://www.dba-oracle.com/t_oracle_execute_immediate.htm](http://www.dba-oracle.com/t_oracle_execute_immediate.htm)）。使用 EXECUTE IMMEDIATE 您可以构建 sql 语句。希望能帮助到你。（抱歉，我刚刚看到您使用的是 sql server，但也有类似的东西：[http](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/4572e8eb-265c-4e6d-b501-22eef2111caf) ://social.msdn.microsoft.com/Forums/en/transactsql/thread/4572e8eb-265c-4e6d-b501-22eef2111caf ）

# php - 写入 webroot 目录之外的文本文件

> ID：14732881
> 
> 赞同：3
> 
> 时间：2013-02-06T15:40:05.927
> 
> 标签：php, file-io

我正在尝试使用 PHP 从文本文件中读取和写入。使用 html 页面上的按钮读取文件。该文件是使用 html 页面上的按钮编写的，该按钮从文本框中获取参数。当文本文件位于 webroot 目录中时，我成功地写入了文本文件。我希望能够从位于 webroot 目录之外的文本文件中读取/写入。

我在 Beaglebone 上使用 lighttpd 和 PHP。webroot 目录位于`/var/www`. 我要编辑的文本文件将位于`/var/textFiles`. 我到处寻找解决方案，但似乎没有一个有效。

以下是我发现的最有希望的解决方案，但它似乎不起作用。当我单击“读取”或“写入”按钮时，页面似乎陷入了无限循环。我想知道是否有人知道为什么这不起作用，或者他们是否可以提供更好的解决方案。

这是我到目前为止所拥有的：

索引.php

```
<?php 
echo '<script language="javascript" type="text/javascript" src="jquery-1.9.0.min.js"></script>';
echo "<form name='write' action='writeFunctionCaller.php' method='post'>Input text to 
write to text file: <input type='text' name='input'>
<input type='submit' value='Write' ></form>
<form name = 'read' action='readFunctionCaller.php' method='get'>
<input type='submit' value='Read'></form><br><div id='fileContent'></div>";

class readWriteModel {

   function readFile() {
        $file_handle = fopen("secure.php?file=phpRead.txt", "r");
        while (!feof($file_handle)) {
            $line = fgets($file_handle);
            echo $line;
            echo '<br>';
        }
        fclose($file_handle); 
    }

    function writeFile($text) {
        echo ("Write Success! ");
        $filename = "secure.php?file=phpRead.txt";
        file_put_contents($filename, $text, FILE_APPEND | LOCK_EX);
    }
}
?> 
```

安全的.php

```
<?php
//validate that the user should have access to the file here

//Make sure it exists
$folder = realpath('/var/textFiles');
if(!$file = realpath($folder.'/'.$_GET['file']))
    error(404);
if(!is_file($file))
    error(404);

//Check for cheaters
if(substr($file,0,strlen($folder)) !== $folder)
    error(401);

header(sprintf("Content-type: %s;",getMimeType($file)));
readfile($file);
exit;

function error ( $code = 401, $msg = null ) {
    $msgs = array(
      400 => 'Bad Request',
      401 => 'Unauthorized',
      402 => 'Payment Required',
      403 => 'Forbidden',
      404 => 'Not Found',
    );
    if(!$msg) $msg = $msgs[$code];
    header(sprintf('HTTP/1.0 %s %s',$code,$msg));
    printf('<html><head><title>%s %s</title></head><body><h1>%s</h1></body> 
    </html>',$code,$msg,$msg);
    exit;
}

function getMimeType ( $filename ) {
    //MIME MAP
    $mime_extension_map = array(
    'txt'           => 'text/plain',
    );
    //Get Extension
    $ext = strtolower(substr($filename,strrpos($filename,'.') + 1));
    if(empty($ext))
      return 'application/octet-stream';
    elseif(isset($mime_extension_map[$ext]))
      return $mime_extension_map[$ext];
    return 'x-extension/' . $ext;
}
?> 
```

writeFunctionCaller.php

```
<?php 
include_once('index.php');
$text = $_POST['input'];
$model = new readWriteModel();
$model->writeFile($text);
?> 
```

readFunctionCaller.php

```
<?php 
include_once('index.php');
$model = new readWriteModel();
$model->readFile();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:47:10.840

我能够从根目录之外的文本文件中读取和写入。只是为了看看它是否有效，我将 webroot 目录上方的目录`/var`权限设置为`777`，并使用绝对路径的`phpRead.txt`to`777`和引用文件`/var/textFiles/phpRead.txt`这绝对不是最安全的方法，所以如果你正在阅读并写入 webroot 目录之外的文件，请参阅以下 stackoverflow 答案：[https](https://stackoverflow.com/a/3012330/2047335) ://stackoverflow.com/a/3012330/2047335了解有关 PHP 安全性的更多信息。

以下是我用来读取/写入 webroot 目录上方文本文件的文件：

索引.php：

```
<?php 
echo '<script language="javascript" type="text/javascript" src="jquery-1.9.0.min.js"></script>';

echo "<form name='write' action='writeFunctionCaller.php' method='post'>";
echo    "Input text to write to text file: <input type='text' name='input'><input type='submit' value='Write' >";
echo "</form>";

echo "<form name = 'read' action='readFunctionCaller.php' method='get'>";
echo    "<input type='submit' value='Read'>";
echo "</form>";
echo "<br>";
echo "<div id='fileContent'></div>";

class readWriteModel{
  function readFile() {
  $file_handle = fopen("/var/textFiles/phpRead.txt", "r");
  while (!feof($file_handle)) {
   $line = fgets($file_handle);
   echo $line;
   echo '<br>';
   }
  fclose($file_handle); 
  }
  function writeFile($text) {
   echo ("Write Success! ");
   $filename = "/var/textFiles/phpRead.txt";
   file_put_contents($filename, $text, FILE_APPEND | LOCK_EX);
   }
}

?> 
```

readFunctionCaller.php：

```
<?php 
include_once('index.php');
$model = new readWriteModel();
$model->readFile();
?> 
```

writeFunctionCaller.php：

```
<?php
include_once('index.php');
$text = $_POST['input'];
$model = new readWriteModel();
$model->writeFile($text);
?> 
```

用户界面图片：

![PHP 用户界面读取/写入 webroot 之外的文本文件](../Images/e345b15c86c18fd5a00ac60ebac273d2.png)

感谢大家的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:43:31.143

写入web目录外的文件与写入web目录内没有什么不同，一个好的做法是在写入文件时使用绝对路径，这会帮你解决很多麻烦，当然要确保apache有正确的权限对文件执行所需的操作。

# ssis - 如何根据配置值有选择地执行子包？

> ID：14732884
> 
> 赞同：0
> 
> 时间：2013-02-06T15:40:14.677
> 
> 标签：ssis

我有一个执行多个子包的 SSIS 包

```
pkg1
 |
 |
 |
pkg2
 |
 |
 |
pkg3 
```

我想执行可配置的子包，以便我可以根据配置值更改要执行的子包。

SSIS 中的哪个选项允许我启用/禁用父包中的子包执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:35:12.207

您可以将执行包任务放在 Foreach 循环容器中，并控制要通过表运行的包。当您计划连续运行软件包时，这种模式对您很有效。

一些细节：

1.  创建一个新表

    CREATE TABLE [dbo].[ActivePackages]( [ID] [int] IDENTITY(1,1) NOT NULL, [PackageName] varchar NOT NULL, [Active] [bit] NOT NULL ) ON [PRIMARY]

2.  插入两行

    ID 包名活动

    1 c_mp_Child1.dtsx 0

    2 c_mp_Child2.dtsx 1

3.  创建一个父包（p_MainPackage.dtsx）和两个子包（c_mp_Child1.dtsx 和 c_mp_Child2.dtsx）

4.  p_MainPackage.dtsx 变量说明

    sActivePackageFullPath（字符串）

    表达式：@[User::sSolutionFolder] + "\" + @[User::sActivePackage]

    评估为表达式：真

    sSolutionFolder 字符串

    oActivePackages 对象 System.Object

    sActivePackage 字符串

5.  执行 SQL 任务——获取活动项目列表并存储在 oActivePackages 中

6.  Foreach 循环容器

    枚举器：Foreacj ADO 枚举器 ADO 对象源变量：User::oActiveProject 变量映射

: 用户::sActivePackageFullPath 6a。内部：子包的执行包任务连接字符串：@[User::sActivePackageFullPath]

# jquery - 我的 jquery 将检查我是否在表单中输入了输入，但是如何检测 javascript 所做的更改？

> ID：14732890
> 
> 赞同：0
> 
> 时间：2013-02-06T15:40:47.423
> 
> 标签：jquery

此代码将检测用户是否对表单上的其中一个输入进行了更改；

```
$(document).ready(function () {
    var isDirty = false;
    $(".formTable :input, select, textarea").change(function () {
        isDirty = true;
    }); 
```

但是在我的表单上我有一个弹出窗口，并且表单是使用 javascript 更新的。上面的代码没有选择这个，那么我该怎么做呢？

```
 $('.dialogLink').live('click', function () {
        var element = $(this);

        // Retrieve values from the HTML5 data attributes of the link        
        var dialogTitle = element.attr('data-dialog-title');
        var updateTargetId = '#' + element.attr('data-update-target-id');
        var updateTargetId2 = '#' + element.attr('data-update-target-id2'); 

        // Generate a unique id for the dialog div
        var dialogId = 'uniqueName-' + Math.floor(Math.random() * 1000);
        var dialogDiv = "<div id='" + dialogId + "'></div>";

        // Load the form into the dialog div
        $(dialogDiv).load(this.href, function () {
            $(this).dialog({
                bgiframe: true,
                modal: true,
                width: 500,
                title: dialogTitle,
                buttons: {
                    "Add": function () {
                        // Manually submit the form                        
                        var form = $('form', this);
                        $(form).submit();
                    },
                    "Cancel": function () { $(this).dialog('close'); }
                }
            });
            // Enable client side validation
            $.validator.unobtrusive.parse(this);

            // Setup the ajax submit logic
            wireUpForm(this, updateTargetId, updateTargetId2);
        });
        return false;
    });
});

function wireUpForm(dialog, updateTargetId, updateTargetId2) {
    $('form', dialog).submit(function () {

        // Do not submit if the form
        // does not pass client side validation
        if (!$(this).valid())
            return false;

        // Client side validation passed, submit the form
        // using the jQuery.ajax form
        $.ajax({
            url: this.action,
            type: this.method,
            data: $(this).serialize(),
            success: function (result) {
                // Check whether the post was successful
                if (result.success) {
                    // Close the dialog 
                    $(dialog).dialog('close');

                    // UPDATE IS DONE HERE
                    $(updateTargetId).val(result.newTradeName);
                    $(updateTargetId2).val(result.newTradeId);
                    $(updateTargetId).attr("readonly", "readonly");
                } else {
                    // Reload the dialog to show model errors                    
                    $(dialog).html(result);

                    // Enable client side validation
                    $.validator.unobtrusive.parse(dialog);

                    // Setup the ajax submit logic
                    wireUpForm(dialog, updateTargetId, updateTargetId2);
                }
            }
        });
        return false;
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:42:43.360

自己触发事件。

```
$(updateTargetId).val(result.newTradeName).trigger("change");
$(updateTargetId2).val(result.newTradeId).trigger("change"); 
```

# c# - 访问代码中的私钥需要密码？

> ID：14732892
> 
> 赞同：1
> 
> 时间：2013-02-06T15:40:49.153
> 
> 标签：c#, asp.net, certificate, x509certificate, x509certificate2

我的证书存储中安装了带有私钥的证书。它需要密码才能安装它，这是我提供的。我的问题是在代码中引用它时是否需要再次提供它。我需要使用私钥“签署”一个 SAML2 请求。我是否需要使用重载`X509Certificate2()`密码才能让代码允许我访问私钥进行签名？这对我来说是有问题的，因为我已经必须在安装证书时提供它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:28:39.930

我的消息来源告诉我没有。=)

在 Windows 密钥库中安装它后，私钥可用于以用户身份运行的所有应用程序。

您可以使用一个名为“启用强私钥保护”的选项。然后在每次使用时都会提示密码。

在您不使用密钥库的情况下，重载版本的 X509Certificate2() 构造函数用于读取原始 p12 文件。[http://msdn.microsoft.com/en-us/library/ms148417.aspx](http://msdn.microsoft.com/en-us/library/ms148417.aspx)

# php - Wordpress 循环问题

> ID：14732896
> 
> 赞同：1
> 
> 时间：2013-02-06T15:40:55.910
> 
> 标签：php, wordpress

我遇到了在 Wordpress 中创建自己的搜索循环的问题。我想要实现的是某些情况下仅显示某些信息：

```
<?php while ( have_posts() ) : the_post(); echo '<div>'; ?>

         <?php if ( in_category('property') ) { ?>
            <h3><?php the_title(); ?></h3>
            <?php the_field('main-image-description'); ?>
            <span class="launch">
                <a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( 'Permalink to %s', 'boilerplate' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark">
                    <span class="link">click to launch</span>
                    <span class="launch-icon"></span>
                </a>
            </span>
        <?php } ?>

        <?php if ( in_category('all-developments') ) { ?>
            <h3><?php the_title(); ?></h3>
            <?php the_field('property-description'); ?>
            <span class="launch-brochure">
                <a href="<?php the_field('pdf-download-all-developments'); ?>" target="_blank">
                    <span class="link">Download Brochure</span>
                    <span class="launch-icon"></span>
                </a>
            </span>
        <?php } ?>

        <?php if ( is_page() ) { ?>
            <h3><?php the_title(); ?></h3>
            <?php the_content(); ?>
            <span class="launch">
                <a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( 'Permalink to %s', 'boilerplate' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark">
                    <span class="link">click to launch</span>
                    <span class="launch-icon"></span>
                </a>
            </span>
        <?php } ?>

    <?php echo '</div>'; endwhile; ?> 
```

出现的问题是，它总是会在顶部呈现一两个空标签，这会破坏它的样式，因为每个 div 都有一个虚线边框。有没有办法告诉 Wordpress，如果不满足这些条件，那么不要显示`<div>`?

提前感谢您的帮助！

J.P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:51:10.380

重新排列代码，以便在输出内容之前计算条件，如下所示：

```
<?php 
    while ( have_posts() ) : the_post(); 

    $propertyCategory        = in_category('property');
    $allDevelopmentsCategory = in_category('all-developments');
    $isPage                  = is_page();

    $output = ($propertyCategory || $allDevelopmentsCategory || $isPage);

    if($output){
        echo '<div>'; 
    }

?>

    <?php if ( $propertyCategory ) { ?>
       <h3><?php the_title(); ?></h3>
       <?php the_field('main-image-description'); ?>
       <span class="launch">
           <a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( 'Permalink to %s', 'boilerplate' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark">
               <span class="link">click to launch</span>
               <span class="launch-icon"></span>
           </a>
       </span>
   <?php } ?>

   <?php if ( $allDevelopmentsCategory ) { ?>
       <h3><?php the_title(); ?></h3>
       <?php the_field('property-description'); ?>
       <span class="launch-brochure">
           <a href="<?php the_field('pdf-download-all-developments'); ?>" target="_blank">
               <span class="link">Download Brochure</span>
               <span class="launch-icon"></span>
           </a>
       </span>
   <?php } ?>

   <?php if ( $isPage ) { ?>
       <h3><?php the_title(); ?></h3>
       <?php the_content(); ?>
       <span class="launch">
           <a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( 'Permalink to %s', 'boilerplate' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark">
               <span class="link">click to launch</span>
               <span class="launch-icon"></span>
           </a>
       </span>
   <?php } ?>

   <?php 
    if($output){
        echo '</div>'; 
    }

    endwhile; 
?> 
```

这使您可以检测是否会输出任何内容，然后`div`在适当的地方使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:50:51.180

你可以移动`<div>`条件语句的内部吗？像这样：

```
<?php while ( have_posts() ) : the_post(); ?>

     <?php if ( in_category('property') ) { ?>
        <div> <!-- Open div here !-->
        <h3><?php the_title(); ?></h3>
        <?php the_field('main-image-description'); ?>
        <span class="launch">
            <a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( 'Permalink to %s', 'boilerplate' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark">
                <span class="link">click to launch</span>
                <span class="launch-icon"></span>
            </a>
        </span>
        </div> <!-- Close div here !-->
    <?php } ?>

    <?php if ( in_category('all-developments') ) { ?>
        <div> <!-- Open div here !-->
        <h3><?php the_title(); ?></h3>
        <?php the_field('property-description'); ?>
        <span class="launch-brochure">
            <a href="<?php the_field('pdf-download-all-developments'); ?>" target="_blank">
                <span class="link">Download Brochure</span>
                <span class="launch-icon"></span>
            </a>
        </span>
        </div> <!-- Close div here !-->
    <?php } ?>

    <?php if ( is_page() ) { ?>
        <div> <!-- Open div here !-->
        <h3><?php the_title(); ?></h3>
        <?php the_content(); ?>
        <span class="launch">
            <a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( 'Permalink to %s', 'boilerplate' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark">
                <span class="link">click to launch</span>
                <span class="launch-icon"></span>
            </a>
        </span>
        </div> <!-- Close div here !-->
    <?php } ?>

<?php endwhile; ?> 
```

# java - @Required 验证消息

> ID：14732903
> 
> 赞同：0
> 
> 时间：2013-02-06T15:41:09.560
> 
> 标签：java, playframework, playframework-1.x

我正在使用 Play 1.2.5。

以下验证工作正常，但我收到的消息不是自定义的。

```
public static void welcome(@Required(message="validation.required.em") String txtName,@Required(message="validation.required.em") Integer txtAge){
    ....
    ....
} 
```

以下是消息文件：

```
validation.required.em=%s is required 
```

我收到这条消息：

```
txtName is required
txtAge is required 
```

`txtName`我不想像这样使用自定义名称`txtAge`：

```
Customer Nameis required
Customer Age is required 
```

我看不到任何可以传递给它以自定义名称的参数。

请让我知道这件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:39:50.670

您可以通过将注释更改为：

`@Required(message="Customer Name is required")`注释 txtName 时

和

`@Required(message="Customer Age is required")`注释 txtAge 时

或者，

在您想要的消息文件中可以添加

```
txtName=Customer Name
txtAge=Customer Age 
```

并让您拥有的其他一切保持不变。

# c# - 从 C# 发送和接收基本肥皂消息的最简单方法是什么？

> ID：14732911
> 
> 赞同：0
> 
> 时间：2013-02-06T15:41:30.783
> 
> 标签：c#, asp.net, soap

我知道这个问题所需的信息很容易获得，但似乎有几个选项，我只需要发送一个非常简单的消息。我打算只构建一个包含整个 SOAP 消息的字符串并发送它。但我遇到的每个例子似乎都做得更多。我不需要设置服务，我只需要与一个服务进行通信。我只需要从返回的消息中检索一个元素。

我需要创建一个`.amx`文件吗？我是否需要做任何其他 Visual Studio 特定的事情，或者我可以只包含一些库并发送我的消息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:50:50.400

我建议使用 WCF，因为它可以为您完成所有工作。在 Visual Studio 中，向项目添加服务引用，它将为您生成客户端代理。

在 Visual Studio 之外，您可以使用它`svcutil.exe`来实现相同的目的。

# jquery - JQuery 输入限制器

> ID：14732912
> 
> 赞同：0
> 
> 时间：2013-02-06T15:41:30.733
> 
> 标签：jquery, textarea, keyup

好的，第一次来这里，我已经有问题了。我需要创建打字限制器。所以当达到 0 时，用户不能再打字了。

```
$('#text_area').keyup(function() {
    var max_length = 55;
    var area_length = $(this).val().length;
    var remaining_text = max_length - area_length;

    $('#area_feedback').html(remaining_text + ' characters left');
    if (remaining_text <= 0) {
        $(this).css('color','red');
        //what goes here ?

    } else {
        $(this).css('color','black');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:46:05.473

尝试使用`keypress`事件处理程序。

像这样：[**现场演示**](http://jsfiddle.net/j6b5h/)

```
$('#text_area').keypress(function(e){
    var max_length = 55;
    var area_length = $(this).val().length;
    var remaining_text = max_length - area_length;
    $('#area_feedback').html(remaining_text + ' characters left');

    if(remaining_text <= 0){
        $(this).css('color','red');

        e.preventDefault();
        return false;
    }
    else{
        $(this).css('color','black');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:45:55.300

也许这个 jquery 插件可以帮助你

[http://www.stjerneman.com/demo/maxlength-with-jquery](http://www.stjerneman.com/demo/maxlength-with-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:48:15.040

您应该尝试一下：使用 KeyPress 事件并设置文本区域的 maxLength，如下所述..

```
$('#text_area').keypress(function(){
   var max_length = 55;

   $('#text_area').attr('maxlength',max_length); //sets the max length of textbox to 55

   var area_length = $(this).val().length;
   var remaining_text = max_length - area_length;
   $('#area_feedback').html(remaining_text + ' characters left');
   if(remaining_text <= 0){
      $(this).css('color','red');          
   }
   else{
      $(this).css('color','black');
   }
}); 
```

# wso2 - WSO2 API manager behind nginx

> ID：14732917
> 
> 赞同：2
> 
> 时间：2013-02-06T15:41:49.173
> 
> 标签：wso2, wso2-am

I've got:
- a WSO2 API MAnager 1.3 on a host in a private LAN.
- an nginx host with two NIC one on the same private ALN of the API manager and another with a public IP.

I need to set up the environment so that it will be possible to access the API store and publisher (and even the management through the nginx host using a proxy pass).

How do I have to configure the files in the API manager (and possible the rules also for niginx).
Considering also that the API will have to be published with the public address and also the Authorization token need to be created so that it will be accepted by users calling the public address.
Lets suppose that the public address is www.public.eu (194.1.1.150) and the private LAN is apimanager.private.local (10.1.1.141). I will keep the same port for sake of easiness, but it could be nice to have indications on how to change ports.
I've tryed to modify ap-manager.xml, carbon.xml and axix2.xml with no success.
Thanks
Luca

# c++ - 擦除向量中的元素

> ID：14732918
> 
> 赞同：0
> 
> 时间：2013-02-06T15:41:48.787
> 
> 标签：c++, vector, erase, erase-remove-idiom

所以我有一个无符号整数向量（`vector<unsigned int>`称为`vector1`）。我有另一个我创建的结构向量（`vector<struct>`称为`vector2`）。`vector<int>`保存一个整数，它是 的索引`vector<struct>`。例如，假设`vector<int = {5, 17, 18, 19}`. 这意味着`vector2.at(5) == vector2.at(vector1.at(0))`。

在结构中，我有一个名为`var`. 在大多数情况下，`var`是错误的。我想删除所有`vector1`具有`var`= true的元素。

我所做的是：

```
for (unsigned int i = 0; i < vector1.size(); i++)
{
   if (vector2.at(vector1.at(i)).var)
    vector1.erase(vector.begin() + i);
} 
```

唯一的问题是它不会删除所有真正的元素。我已经多次运行 for 循环以删除所有值。这是正确的行为吗？如果不是，我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:45:24.653

您必须使用[erase-remove 习惯用法](http://en.wikibooks.org/wiki/More_C++_Idioms/Erase-Remove)从向量中删除元素。

```
v.erase(std::remove(v.begin(), v.end(), value), v.begin); 
```

`std::remove`将元素移动到向量的末尾，并将`erase`从向量中删除元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:48:19.920

您可以在循环中保留一个临时向量、副本`vector1`并对其进行迭代，`for`然后从`vector1`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T16:49:28.997

您正在擦除向量中的元素，同时对其进行迭代。因此，当擦除一个元素时，您总是会跳过下一个元素，因为您`i`在刚刚缩短向量的同时增加了`i`（如果您使用适当的迭代器循环而不是索引循环，情况会更糟）。做到这一点的最好方法是将两个操作分开，首先*“标记”*（或更确切地说是重新排序）要删除的元素，然后从向量中删除它们。

在实践中，最好使用[擦除删除惯用语](http://en.wikipedia.org/wiki/Erase-remove_idiom)( `vector.erarse(std::remove(...), vector.end())`) 来完成，它首先使用[`std::remove(_if)`](http://en.cppreference.com/w/cpp/algorithm/remove)在开头使用未删除元素重新组织数据并返回范围的新结尾，然后可以使用它来真正删除那些已删除的元素范围内的元素（实际上只是缩短了整个向量），使用[`std::vector::erase`](http://en.cppreference.com/w/cpp/container/vector/erase). 使用 C++11 lambda，删除条件可以很容易地表达：

```
vector1.erase(std::remove_if(                        //erase range starting here
                  vector1.begin(), vector1.end(),    //iterate over whole vector
                  [&vector2](unsigned int i)         //call this for each element
                      { return vector2.at(i).var; }),  //return true to remove
              vector1.end());                        //erase up to old end 
```

**编辑：**`std::vector::at`顺便说一句，如果你真的需要而不是仅仅`[]`记住两者的含义（特别是前者的开销和后者的*“可能不安全”* ），请务必确定。

# c# - C# how to invoke a field initializer using reflection?

> ID：14732926
> 
> 赞同：4
> 
> 时间：2013-02-06T15:42:10.917
> 
> 标签：c#, reflection, field, invoke, initializer

Say I have this C# class

```
public class MyClass {
    int a;
    int[] b = new int[6];
} 
```

Now say I discover this class using reflection and while looking at the fields I find that one of them is of type Array (ie: b)

```
foreach( FieldInfo fieldinfo in classType.GetFields() )
{
    if( fieldInfo.FieldType.IsArray )
    {
        int arraySize = ?;
        ...
    }
} 
```

I know it's not guaranteed that the array has a field initializer that creates the array but if it does I would like to know the size of the array created by the field initializer.

Is there a way to call the field initializer ?

If there was I would do something like this:

```
Array initValue = call field initializer() as Array;
int arraySize = initValue.Length; 
```

The only was I found is to create an instance of the whole class but I would rather not do it like this as it's overkill...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:57:19.727

好吧，你不能。

以下代码：

```
public class Test
{
    public int[] test = new int[5];

    public Test()
    {
        Console.Read();
    }
} 
```

将编译为：

```
public class Program
{
    public int[] test;

    public Program()
    {
        // Fields initializers are inserted at the beginning
        // of the class constructor
        this.test = new int[5];

        // Calling base constructor
        base.ctor();

        // Executing derived class constructor instructions
        Console.Read();
    }
} 
```

因此，在您创建该类型的实例之前，无法知道数组的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:46:56.440

我认为您别无选择，只能创建该类的一个实例，因为在您这样做之前它不存在。

# d3.js - d3 bar chart does not extend to full width of svg

> ID：14732929
> 
> 赞同：3
> 
> 时间：2013-02-06T15:42:33.053
> 
> 标签：d3.js

I have a bar chart ([http://tributary.io/inlet/4720197](http://tributary.io/inlet/4720197)) that plots a dataset with a large number of points that I can't get to fill the entire width of the svg. I had the same issue with a line chart and was able to resolve by using rangePoints.

I've been attempting something similar with this chart but can't quite get the right combination (it's using two scales for the grouping) and am unclear how to get the side-by-side bars that I previously accomplished with rangeBand() given that function does not exist with rangePoints. What am I missing?

![pic of bar chart](../Images/12d5cf0f1219eaafabfd6e967dbdfc97.png)

# qt - 带有 GLFW 和 Qt 的 OpenGL 游戏引擎？

> ID：14732930
> 
> 赞同：5
> 
> 时间：2013-02-06T15:42:34.703
> 
> 标签：qt, opengl, game-engine, glfw

几个月前我开始了一个类似的问题[Qt and OpenGL for game development](https://stackoverflow.com/questions/13892384/qt-and-opengl-for-game-development)

目前我不确定我应该做什么。我经常读到不建议将 Qt 用于游戏，而是 GLFW 更适合此任务。我不完全确定为什么，但我认为如果我选择 GLFW，我会比较安全。

但我想使用 Qt 作为编辑器。编辑器应该是所见即所得的，就像许多其他游戏引擎一样。这样您就可以在任何给定时间跳入游戏。

是否可以在同一个项目中使用 Qt 和 GLFW？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:16:01.353

> 是否可以在同一个项目中使用 Qt 和 GLFW？

不，但你为什么要这么做？您可以将 GLFW 用于独立引擎，将 Qt 用于编辑器。甚至可以用自定义的东西替换 QCoreApplication 事件循环。只需确保您的代码与某个框架的耦合不太紧密。

# php - Instagram API: how to make in popular feed see user

> ID：14732931
> 
> 赞同：-1
> 
> 时间：2013-02-06T15:42:34.220
> 
> 标签：php, javascript, api, instagram

I have this code and as you can see I can see how much likes every photo has, but i want to know username of person who uploaded every photo. What should I write ?

```
 var str = '<p>likes: '+ photo.likes.count +'</p><img id="' + photo.id + '" src="' + photo.images.standard_resolution.url + '" width="50">';
            $('<div></div>').addClass('photo').html(str).appendTo('#p' + photo.id);

            $('#' + photo.id).load(function() {
                $('#p' + $(this).attr('id')).fadeTo('slow', 1.0);
            });

        }
    }else{
        alert('empty');
    }

}else{
    alert(data.meta.error_message);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:47:34.740

数据json对象在网站上有描述：http: [//instagram.com/developer/endpoints/media/](http://instagram.com/developer/endpoints/media/) 这是你需要使用的

```
data.user.username 
```

# c# - Installing windows service Using C# gives error

> ID：14732934
> 
> 赞同：0
> 
> 时间：2013-02-06T15:42:39.780
> 
> 标签：c#, windows-services

Im working in windows service syncmysqldb.exe i need the service to run a process ie syncing of two mysql databases in n intervals of time given in setting.xml file

When i install this service service manager i see the service not in started state and when i try to run in manually by right clicking it gives following error

**When i install service it gives following error** The description for Event ID ( 11001 ) in Source ( MsiInstaller ) cannot be found. The local computer may not have the necessary registry information or message DLL files to display messages from a remote computer. You may be able to use the /AUXSOURCE= flag to retrieve this description; see Help and Support for details. The following information is part of the event: Product: SetupSynMysqldb -- Error 1001\. Error 1001\. An exception occurred during the Commit phase of the installation. This exception will be ignored and installation will continue. However, the application might not function correctly after installation is complete. --> The savedState dictionary contains inconsistent data and might have been corrupted., (NULL), (NULL), (NULL), (NULL), , .

**When i run service in service manager it gives following error** The SyncMysqlDb service failed to start due to the following error: The system cannot find the file specified.

**C# code**

```
 protected override void OnStart(string[] args)
            {
                try
                {
                    //add this line to text file during start of service

                    EventLog.WriteEntry("SyncMysqlDb in OnStart. at " + DateTime.Now);
                    //handle Elapsed event
                    tmrSync.Elapsed += new ElapsedEventHandler(OnElapsedTime);

                    tmrSync.Interval = GetIntervals();

                    //enabling the timer
                    tmrSync.Enabled = true;
                    //TraceService(" tmrSync.Interval =" + tmrSync.Interval + " at " + DateTime.Now);
                    ThreadPool.QueueUserWorkItem(new WaitCallback(ServiceWorkerThread));
                }
                catch (Exception ex)
                {

                    EventLog.WriteEntry("Service failed to start.", EventLogEntryType.Error, (int)Service1EventIds.Start_InitializationFailure, ex);
                }
            }
private void ServiceWorkerThread(object state)
        {
            // Periodically check if the service is stopping.
            while (!this.stopping)
            {
                // Perform main service function here...

                Thread.Sleep(2000);  // Simulate some lengthy operations.
            }

            // Signal the stopped event.
            this.stoppedEvent.Set();
        }
        protected override void OnStop()
        {
            tmrSync.Enabled = false;
            //TraceService("stopping service" + DateTime.Now);
            EventLog.WriteEntry("SyncMysqlDb in OnStop. at " + DateTime.Now);
            this.stopping = true;
            this.stoppedEvent.WaitOne();
        }
        private void OnElapsedTime(object source, ElapsedEventArgs e)
        {

            try
            {
                EventLog.WriteEntry(@"Executing C:\SyncMysqlDbRepository\task.bat at " + DateTime.Now);
                Process.Start(@"C:\SyncMysqlDbRepository\task.bat");
            }
            catch (Exception ex)
            {
                EventLog.WriteEntry("Service failed to start.at " + DateTime.Now, EventLogEntryType.Error, (int)Service1EventIds.Start_InitializationFailure, ex);

            }
           // TraceService("syncing db at " + DateTime.Now);
        }
        protected int GetIntervals()
        {
            var dt = new DataTable();
            try
            {

                dt.ReadXmlSchema(@"C:\SyncMysqlDbRepository\SettingsDs.xml");
                dt.ReadXml(@"C:\SyncMysqlDbRepository\Settings.xml");

            }
            catch (Exception ex)
            {

                 EventLog.WriteEntry("GetIntervals  failed at " + DateTime.Now, EventLogEntryType.Error, (int)Service1EventIds.Start_InitializationFailure, ex);
                return 0;
            }
            return Convert.ToInt16(dt.Rows[0].ItemArray[2]); //Intervals from settings.xml
        } 
```

# python - pyglet 无法在第二个显示器上绘制到窗口

> ID：14732935
> 
> 赞同：2
> 
> 时间：2013-02-06T15:42:40.903
> 
> 标签：python, x11, pyglet

我正在使用 pyglet 编写心理物理学实验。我使用的电脑有两个显示器。它们被配置为两个独立的 Xscreen，0 和 1，分别对应于我的工作站监视器和实验屏幕。我想让 pyglet 绘制到实验屏幕（Xscreen 1）。

为了测试设置，我编写了一个显示一些文本标签的简单程序。当我运行程序时`pyglet.window.Window(screen=workstation_screen)`，窗口出现在屏幕 0 上，并且文本按预期显示。

但是，当我运行程序时`pyglet.window.Window(screen=experiment_screen)`，屏幕 1 上出现了窗口，但没有出现任何文本。

我对这种行为感到非常困惑，我做错了什么吗？这是 pyglet 中的一个已知错误吗？这是X的问题吗？任何建议将不胜感激。

细节：

Ubuntu 10.04.4 上的 Python 2.7.3 和 pyglet 1.1.4。

代码：

```
import pyglet

display = pyglet.window.get_platform().get_default_display()
screens = display.get_screens()

# When I replace 'screens[0]' with 'screens[1]' the aforementioned problem occurs.
window = pyglet.window.Window(screen=screens[0])

label = pyglet.text.Label('draw test',x=window.width/2.0,y=window.width/2.0)

@window.event
def on_draw():
    window.clear()
    label.draw()

pyglet.app.run() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:11:10.270

我通过在 Xorg.conf 中启用 Xinerama 然后调用`window.set_fullscreen(fullscreen=True,screen=experiment_screen)`仅在第二个屏幕上移动和全屏显示窗口来找到解决方法。

但是，我仍然不确定为什么会出现窗口而不是没有启用 Xinerama 的文本。

# sql - 在单个表上旋转

> ID：14732938
> 
> 赞同：0
> 
> 时间：2013-02-06T15:42:43.790
> 
> 标签：sql, sql-server, pivot

假设我们有以下数据集：

```
Name    City           Date
Paul    Milan          04/01/2013
Charls  Rome           04/01/2013
Jim     Tokyo          04/01/2013
Justin  San Francisco  04/01/2013
Bill    London         04/01/2013
Paul    Berlin         05/01/2013
Charls  El Cairo       05/01/2013
Jim     Milan          05/01/2013
Justin  Paris          05/01/2013
Bill    Madrid         05/01/2013 
```

每个人在某一天`[Name]`访问过某个城镇的地方。`[City]``[Date]`

我们想要做的是有一个带有`[Name]`,的表`[City day 1]`，`[City day 2]`如下所示：

```
Name    City 04/01/2013 City 05/01/2013
Paul    Milan           Berlin
Charls  Rome            El Cairo
Jim     Tokyo           Milan
Justin  San Francisco   Paris
Bill    London          Madrid 
```

我们如何为此编写查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:44:26.057

这种类型的数据转换称为[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx). 从 SQL Server 2005 开始，有一个函数可以为您执行此数据轮换。但这可以通过许多不同的方式来完成。

您可以使用聚合函数和 a`CASE`来*透视*数据：

```
select
  name,
  max(case when date = '2013-04-01' then city end) [City 04/01/2013],
  max(case when date = '2013-05-01' then city end) [City 05/01/2013]
from yourtable
group by name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/ca296/1)

或者您可以使用以下`PIVOT`功能：

```
select name, [2013-04-01] as [City 04/01/2013], [2013-05-01] as [City 05/01/2013]
from
(
  select name, city, date
  from yourtable
) src
pivot
(
  max(city)
  for date in ([2013-04-01], [2013-05-01])
) piv 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/ca296/3)。

这甚至可以通过多次加入您的桌子来完成：

```
select d1.name,
  d1.city [City 04/01/2013], 
  d2.city [City 05/01/2013]
from yourtable d1
left join yourtable d2
  on d1.name = d2.name
  and d2.date = '2013-05-01'
where d1.date = '2013-04-01' 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/ca296/6)。

如果您知道要转换为列的日期，上述查询将非常有用。但是，如果您有未知数量的列，那么您将需要使用动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @colNames AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(convert(char(10), date, 120)) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colNames = STUFF((SELECT distinct ',' + QUOTENAME(convert(char(10), date, 120)) +' as '+ QUOTENAME('City '+convert(char(10), date, 120))
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT name, ' + @colNames + ' from 
             (
                select name, 
                  city, 
                  convert(char(10), date, 120) date
                from yourtable
            ) x
            pivot 
            (
                max(city)
                for date in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/ca296/12)

他们都给出了结果：

```
|   NAME | CITY 04/01/2013 | CITY 05/01/2013 |
----------------------------------------------
|   Paul |           Milan |          Berlin |
| Charls |            Rome |        El Cairo |
|    Jim |           Tokyo |           Milan |
| Justin |   San Francisco |           Paris |
|   Bill |          London |          Madrid | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:44:54.000

最简单的方法是使用`CASE`

```
SELECT  Name,
        MAX(CASE WHEN DATE = '04/01/2013' THEN City END) [City 04/01/2013],
        MAX(CASE WHEN DATE = '05/01/2013' THEN City END) [City 05/01/2013]
FROM    tableName
GROUP   BY Name 
```

# dependency-injection - 属性注入和/或将控制器添加到备用 MenuItem 视图

> ID：14732944
> 
> 赞同：1
> 
> 时间：2013-02-06T15:43:05.793
> 
> 标签：dependency-injection, orchardcms, autofac, property-injection

我正在尝试（但失败）让属性注入在 Orchard CMS 中工作。

这是必要的，因为下面的代码就像一个视图的代码隐藏（我知道很可怕）。原因是视图没有我可以使用构造函数注入的控制器，因为这是 a 的替代视图`MenuItem`，即`MenuItemLink-MyCustomMenuItem.cshtml`.

除了注释中的内容（请注意我试图在下面的代码中设置的属性的 NULL 注释）之外，没什么可说的了。

哦，我也尝试过改编 Orchard's 的属性注入代码`LoggingModule`，但同样对我也不起作用。

我如何 ：

一种。让下面的属性注入工作？（我很确定无论如何我都会需要它）

湾。（如果可能）以视图的方式获取我自己的控制器/驱动程序，以便我可以在控制器上使用构造函数注入来代替？

```
using System.Diagnostics;
using System.Xml.Linq;
using Autofac;
using Autofac.Core;
using Orchard;
using Module = Autofac.Module;

namespace MyCo.MyCustomMenuItem.Services 
{

    public class MyCustomMenuItemModule : Module 
    {

        protected override void AttachToComponentRegistration(
            IComponentRegistry componentRegistry, 
            IComponentRegistration registration)
        {
            if (implementationType.ToString() == 
                        "MyCo.MyCustomMenuItem.Services.MyCustomMenuItem") 
            {
                // this does get called, but doesn't have the desired effect
                registration.Activated += (s, e) => 
                         e.Context.InjectUnsetProperties(e);
            }
        }

    }

    public interface IFeedX : IDependency 
    {
        XDocument GetResource();
    }

    public class FeedX : IFeedX
    {
        public XDocument GetResource() 
        {
            return new XDocument();
        }
    }

    public interface IMyCustomMenuItem : IDependency 
    {
        XDocument GetResourceData();

        IFeedX FeedX { get; set; }
    }   

    public class MyCustomMenuItem : IMyCustomMenuItem
    {
        public IFeedX FeedX { get; set; }

        // called direct by razor view
        public XDocument GetResourceData()
        {
            Debug.WriteLine(FeedX); // NULL??

            return FeedX.GetResource(); 
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:42:00.443

您绝对不应该在视图中执行任何此类操作。我认为这篇文章描述了一个接近你想要实现的场景：[http ://www.davidhayden.me/blog/dynamically-injecting-menu-items-in-orchard-cms](http://www.davidhayden.me/blog/dynamically-injecting-menu-items-in-orchard-cms)

# c# - 实体框架延迟加载的私有支持字段

> ID：14732945
> 
> 赞同：4
> 
> 时间：2013-02-06T15:43:10.620
> 
> 标签：c#, lazy-loading, entity-framework-5

我正在使用启用了延迟加载的 Entity Framework 5。我有以下代码：

```
 private ICollection<Subscription> _subscriptions = new Collection<Subscription>();

    public virtual ICollection<Subscription> Subscriptions
    {
        get { return _subscriptions; }
        set { _subscriptions = value; }
    } 
```

但这有意义吗？我想确保公共财产`Subscriptions`永远不会为空。由于虚拟实体框架覆盖了 getter 和 setter 以提供延迟加载功能。

我需要这个字段还是可以只使用自动属性，如果没有订阅，我会得到一个空列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T15:45:20.693

如果对象是通过*new*关键字构造的，则您的代码将起作用。但是请注意，[许多序列化程序的功能使得对象构造函数和字段初始值设定项不起作用](https://stackoverflow.com/q/9419743/141172)。

出于这个原因，我选择了以下模式：

```
private ICollection<Subscription> _subscriptions;

public virtual ICollection<Subscription> Subscriptions
{
    get 
    {   
        if (_subscriptions == null) _subscriptions = 
            new Collection<Subscription>();

        return _subscriptions; 
    }
    set { _subscriptions = value; }
} 
```

此代码模式适用于 EF，并且无论对象是使用*new*实例化还是使用不运行对象初始化代码的序列化程序实例化都适用。

*get*也可以使用 null-coalescing 运算符更紧凑地编写：

```
 get 
    {   
        return _subscriptions ?? (_subscriptions = 
            new Collection<Subscription>()); 
    } 
```

# python - 搅拌机 python 脚本

> ID：14732950
> 
> 赞同：1
> 
> 时间：2013-02-06T15:43:24.950
> 
> 标签：python, camera, blender

我想用`blender`编程方式在场景中移动相机，同时保持专注于特定位置。什么是让相机无需指定`rx`、、`ry`和`rz`。我正在寻找要调用的 Python 函数，而不是通过`blender`GUI 进行调用。我正在使用`blender 2.65`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:57:37.807

让相机观察物体的最简单方法是`Edit Object` **Actuator**。在那里你可以替换`Add Object`到`Track To`，然后你只需要指定一个对象。

也许您可以在游戏中使用**python 脚本**更改它，使用`EditObjectActuator.track_object`

# gdb - 可以从命令行打印，但不能从程序中获取

> ID：14732951
> 
> 赞同：0
> 
> 时间：2013-02-06T15:43:30.363
> 
> 标签：gdb

我使用 gdb 来调试我的程序，当我解压一条消息并想打印它时，我遇到了问题。看来我可以从终端的命令行打印，但是当程序转到时`printf("%d has received msg: ", msg->connid);`，我遇到了问题，

```
Program received signal SIGSEGV, Segmentation fault.
    0xb7ff6301 in ?? () from /lib/ld-linux.so.2

(gdb)n
154     LSPMessage* msg = lspmessage__unpack(NULL, msg_len, buf);
(gdb) n
156     memcpy(pld, msg->payload.data, msg->payload.len);
(gdb) p msg->payload.data
$1 = (uint8_t *) 0x804c038 "Connectedrt,\031"
(gdb) p msg->connid
$2 = 1
(gdb) p msg->payload.len
$3 = 9
174     printf("%d has received msg: ", msg->connid);  // required field
(gdb) n
Program received signal SIGSEGV, Segmentation fault.
0xb7ff6301 in ?? () from /lib/ld-linux.so.2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:06:20.403

你在解释你实际问的是什么方面做得非常糟糕。

我*认为*您的问题是：“我的 printf 呼叫为什么会崩溃？”。

可能有几个原因

*   您之前已损坏`stdout`，或
*   `msg->connid`不是`int`（所以`printf`用`"%d"`, 或
*   您在运行时加载程序状态中损坏了其他内容，现在它在执行惰性 PLT 符号解析时崩溃

由于您崩溃是在运行时加载程序内，因此最后一个原因似乎很可能。您可以通过强制加载程序非懒惰地执行符号解析来确认这个假设：

```
(gdb) set env LD_BIND_NOW 1
(gdb) run 
```

还是崩溃了？如果没有，请在 Valgrind 下运行您的程序，并确保修复它报告的所有问题。

# coldfusion - 我可以获得被黑的 Coldfusion 模板的来源吗？

> ID：14732958
> 
> 赞同：7
> 
> 时间：2013-02-06T15:43:58.373
> 
> 标签：coldfusion, coldfusion-9

我们最近有一个黑客访问了我们的系统。他们丢弃了一些 Coldfusion 模板，并将它们包含在我们网站上的随机页面中。

他们转储的文件开头`Allaire Cold Fusion Template`然后包含看似“垃圾”的内容，但我相信这是某种预编译的 Coldfusion 代码。

我们已经清除了这些黑客，但我保存了这些文件，因为我希望有一些方法可以反编译它们，并可能对它们有所了解。虽然我认为黑客已经解决了，但我有点担心这段代码在做什么。（当我查看包含此代码的页面源时，它没有创建任何输出，因此必须在后台进行某些操作。）

如果没有办法，那很酷，我只是想我至少会调查看看这些文件在做什么的可能性。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T16:04:24.020

哇，你唤醒了我的一些“旧”脑细胞...... 早在你可以加密你的 ColdFusion 模板并且它们仍然可以在 ColdFusion 服务器上运行的时候。这种加密不是很安全，因为解密算法很容易获得。这是/是一种从不知情的人“隐藏”代码的简单方法（我猜）。

我在 Google 上进行了快速搜索，并在 Adob​​e 的网站上找到了对解密功能的旧参考，这可能有助于“破解”该代码。 [AB Positive Encrypt and Decrypt](http://www.adobe.com/cfusion/exchange/index.cfm?event=extensionDetail&extid=1007043) 我相信他们的代码必须以这种方式加密，否则 ColdFusion 服务器也无法读取文件。此下载包括`cfdecrypt.exe`和`cfencode.exe`程序。

如果该工具不起作用并且我没记错的话，CFMX 之前的 ColdFusion 加密是使用名为`CFCrypt.exe`. 我认为那是 ColdFusion 的旧版本，但您也可以尝试使用它。我找不到它，但我确定您是否可以通过 Google 找到它。

请与您的结果一起发回。我有兴趣看看他们在做什么。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-06T16:03:05.537

有一个程序 cfdecrypt 可以帮助您反编译它们。我已经很多年没有使用它了，但这是我找到的一个 github 项目的链接：

[https://github.com/disccomp/cfdecrypt](https://github.com/disccomp/cfdecrypt)

# ckeditor - CKEditor 4 textarea replace - 工具栏增加textarea宽度

> ID：14732959
> 
> 赞同：0
> 
> 时间：2013-02-06T15:43:58.430
> 
> 标签：ckeditor

我有一个文本区域，我使用“moono”皮肤替换为 CKEditor 4.1 实例。问题是，即使我将 CKEditor 实例配置为 100%，它的工具栏也会增加我的宽度，这取决于它的按钮数量。

根据我的研究，我了解到它的发生是因为在“moono”皮肤“editor.css”文件中有一个“white-space:nowrap;” 在所有元素上，此定义阻止“.cke_toolbar”对象进入新行，即使是浮动的。

笔记：

1.  只有当父对象是表格对象时才会出现问题，这就是它可以增加其宽度的原因。
2.  默认的 CKEditor 宽度是 100%，当它对编辑器说要获取父对象宽度时，所以在我的情况下，我不需要为编辑器设置宽度（或者我可以设置 100%）并且它需要获取父对象宽度。
3.  为了证明问题出在工具栏中，您可以取消 SJFiddle 项目中的 javascript 注释行，并查看编辑器是否获得了正确的宽度。
4.  在我的情况下，我不能在工具栏上使用新行，因为文本区域的宽度取决于用户。

有没有办法使用 CKEditor 配置来修复它，或者我必须编辑“editor.css”并删除“white-space:nowrap;” 从“.cke_toolbar”手动？我不喜欢手动操作，因为我不喜欢在升级 CKEditor 版本的任何时候修复它。

jsfiddle.net/royshoa/9c2Xp/2/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:14:49.860

CKEditor 不会从它替换的 textarea 继承宽度。你需要明确地告诉它它的宽度。

在您的 JSFiddle 中，添加以下内容就足够了：

```
<script>CKEDITOR.config.width = 250;</script> 
```

它将是 250px 宽。

阅读有关设置配置的更多信息：[http ://docs.ckeditor.com/#!/guide/dev_configuration](http://docs.ckeditor.com/#!/guide/dev_configuration)

**更新**：

您遇到过这个问题[CKEditor - Webkit Browsers 中的编辑器宽度溢出](https://stackoverflow.com/questions/14261708/ckeditor-editor-width-overflows-in-webkit-browsers/14262501#14262501)。

已经报道了[http://dev.ckeditor.com/ticket/9947](http://dev.ckeditor.com/ticket/9947)并且补丁应该在 4.0.2 中发布，所以大约需要 2 周。

# c++ - 在小数点后显示有限的位数

> ID：14732960
> 
> 赞同：-2
> 
> 时间：2013-02-06T15:44:03.473
> 
> 标签：c++

考虑下面的代码：

```
#include <iostream>
using namespace std;

int main ()
{
  int a;
  double b;
  cout << "Enter a number to be divided by three" << endl;
  cin >> a;
  b = a / 3.0;
  cout << "The result of this is:" << b << endl;
  return 0;
} 
```

如何设置要在小数点后存储多少个变量？这包括 20 位以上的数字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T15:46:37.110

您似乎认为将得到的答案`1/3`是`0.33333333333...[to infinity]`。

这是不正确的。浮点数的精度有限，结果值只能达到大约 20 位左右，**而不是**无限位数。

变量`b`将具有类型变量`double`可以处理的所有精度。没有简单的方法来限制它。

但是，如果您只想限制显示的数量，则可以通过以下方式限制输出`cout`：

```
cout << fixed << setprecision(4) << b << endl; 
```

*   `fixed`将导致输出使用定点表示法（另一个选项是`scientific`）。

*   `setprecision`将控制要显示的最大位数。

这种情况下的输出应该是：

```
0.333 
```

总共 4 位数字（小数点前 1 位，小数位后 3 位）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:46:04.583

`a/3 = b`应该是`b = (double)a/3`。而且它只分裂一次！正如 iamnotmaynard 所说：你必须打印 b 而不是 a: `cout << "The result of this is:"<< b << endl;`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T16:00:00.113

在数学中，1/3 具有无限的十进制表示。在计算机中，没有无限的表示。`1/3`除以整数，结果为整数；由于整数不包含小数部分，因此结果为 0。如果您使用双精度数，`1.0/3.0`则会发生同样的事情：结果是适合双精度数的数学结果的最佳近似值。所以不要害怕。试试看。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T15:46:57.473

`double`是固定大小的类型（在大多数系统上为 8 个字节）。所以它只存储一定精度的数字。无需担心“无限除法”（从某种意义上说 1/3.0 没有有限的十进制表示）。

**编辑**（基于下面的评论）

如果您实际上正在寻找任意精度的实数表示，则必须为此使用库，例如[​​ Boost.Multiprecision](http://www.boost.org/doc/libs/1_53_0/libs/multiprecision/doc/html/index.html)。

# matlab - 两条线的交点

> ID：14732963
> 
> 赞同：-3
> 
> 时间：2013-02-06T15:44:11.057
> 
> 标签：matlab, line, intersection

如果我有两行：

```
line1 = [1 2; ...
         5 4];
line2 = [1 7; ...
         4 2]; 
```

![在此处输入图像描述](../Images/9a99239bfa4c49aba9e8744d9d486b4c.png)

我怎样才能像前面的一样得到任何两条线的交点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:51:47.460

这更像是一个数学问题，而不是编程问题：

一条线的方程是`y = ax+b`

找到`a`，你做

```
a = (y2-y1)/(x2-x1)... 
```

或者在你的情况下：

```
a = (line1(1,2)-line1(2,2))/((line1(1,1)-line1(2,1));

a = 0.5 
```

然后你`b`在你的行中找到一个点，即：

```
y = 0.5x+b --> 2 = 0.5(1)+b --> b = 1.5;

y1 = 0.5x+1.5 
```

对另一条线做同样的事情。

然后做`y1 = y2`解决。

# objective-c - 如何调试从我的 iPhone 应用程序发送的 HTTP POST？

> ID：14732966
> 
> 赞同：1
> 
> 时间：2013-02-06T15:44:14.187
> 
> 标签：objective-c, http

我正在使用以下代码将图像上传到我的服务器：

```
// Dictionary that holds post parameters. You can set your post parameters that your server accepts or programmed to accept.
NSMutableDictionary* _params = [[NSMutableDictionary alloc] init];
DataManager *manager = [DataManager sharedManager];
[_params setObject:[manager token] forKey:@"token"];
[_params setObject:[NSString stringWithFormat:@"%d",[manager site_id]] forKey:@"site"];

NSString *BoundaryConstant = @"----------V2ymHFg03ehbqgZCaKO6jy";
NSString* FileParamConstant = @"image";
NSURL* requestURL = [NSURL URLWithString:@"https://mysite.com/api/upload/"];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
[request setHTTPShouldHandleCookies:NO];
[request setTimeoutInterval:30];
[request setHTTPMethod:@"POST"];

NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", BoundaryConstant];
[request setValue:contentType forHTTPHeaderField: @"Content-Type"];

NSMutableData *body = [NSMutableData data];

for (NSString *param in _params) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", BoundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", param] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"%@\r\n", [_params objectForKey:param]] dataUsingEncoding:NSUTF8StringEncoding]];
}

NSData *imageData = UIImageJPEGRepresentation(saveImage, 1.0);
if (imageData) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", BoundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"; filename=\"image.jpg\"\r\n", FileParamConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Type: image/jpeg\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:imageData];
    [body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
}

[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", BoundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];

[request setHTTPBody:body];
NSLog(@"%@",body);

NSString *postLength = [NSString stringWithFormat:@"%d", [body length]];
NSLog(@"Sending request with length: %@",postLength);
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];

[request setURL:requestURL];
 NSURLConnection *conn = [[NSURLConnection alloc]initWithRequest:request delegate:self]; 
```

在我尝试上传时查看我的服务器日志，我没有得到很多信息：

```
82.132.x.x - - [06/Feb/2013:15:37:45 +0000] "-" 400 0 "-" "-" 
```

将此与来自同一应用程序的另一个查询进行比较：

```
82.132.x.x - - [06/Feb/2013:15:36:13 +0000] "GET /api/sites/?token=blah HTTP/1.1" 200 269 "-" "My%20App/1.0 CFNetwork/609.1.4 Darwin/13.0.0" 
```

我怎样才能弄清楚出了什么问题？显然，请求在某种程度上是错误的，导致错误 400。有什么工具可以用来检查它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:50:41.897

试试[查尔斯](http://www.charlesproxy.com/)......它比使用wireshark更友好（不是免费的......但他们有试用版）[http://www.charlesproxy.com/](http://www.charlesproxy.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:47:10.170

Wireshark 应该允许您检查正在发送/接收的内容。[http://www.wireshark.org/download.html](http://www.wireshark.org/download.html)

# c# - gridview 中的标签更改但更改不回发

> ID：14732968
> 
> 赞同：4
> 
> 时间：2013-02-06T15:44:15.903
> 
> 标签：c#, javascript, asp.net

我有一个带有标签的 gridview，以及一些 JavaScript 和 jQuery 来使标签可编辑。

但是，当我在后面的代码中回发和调试时，我看不到更改。

我怎样才能做到这一点，以便我可以在服务器上获得更改？

```
<asp:GridView ID="gvGroups" runat="server" AutoGenerateColumns="False"
 CssClass="table table-hover table-striped" GridLines="None" >
    <Columns>
        <asp:TemplateField HeaderText="Name" SortExpression="GroupDescription">
            <ItemTemplate>
                <asp:Label ID="lblName" CssClass="edit" runat="server" Text='<%# Eval("GroupDescription") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>

function makeLabelsEditable() {

    $(".edit").focusout(function () {
        setLabel(this);
    });

    $(".edit").click(function () {
        editLabel(this);
    });
}

function editLabel(source) {
    source.innerHTML = '<input type="text" maxlength="40" value="' + source.innerHTML + '"/>';
    $(source).unbind('click');
    source.children[0].focus()
}
function setLabel(source) {    
    if (source.children[0].value != '') {
        $(source).click(function () {
            editLabel(this);
        });
        source.innerHTML = source.children[0].value;
    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:48:27.857

`Label`不会回发到服务器。它们旨在只读并呈现为跨度。如果您希望它回发，最简单的方法是创建一个`Hidden`具有相同值的控件，并且当您编写代码以允许编辑标签时，请确保将编辑后的值写入`Hidden`. 将`Hidden`被发送回服务器，然后您可以读取该值。

您正在交换“动态” `TextBox`，因此服务器对您所做的输入控件一无所知。您可以阅读原始发布的参数以获取该值，但是拥有一个可以写入的静态控件并知道它将具有您需要的值会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:48:31.587

您不能以这种方式在服务器上进行更改。您只需在客户端更改 html

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:21:41.220

不会为客户端的`ViewState`标签生成 ，因为它是只读的。因此，您在回发中获得与之前在服务器中设置的相同的值。

我能想到的最简单的解决方法是：

*   放置一个文本框而不是标签。
*   对它应用一个 css 类，使它看起来像一个标签。
*   单击文本框时，删除 css。

每当您想给标签外观时，您都可以应用 css。

# iphone - 关于drawRect

> ID：14732972
> 
> 赞同：-1
> 
> 时间：2013-02-06T15:44:33.110
> 
> 标签：iphone, ios, objective-c, ipad, drawrect

我想在上下文区域中绘制图片，但事情是无论我更改为我绘制的图片的值是什么都不能更大（这就像不能延伸到一个区域之外）。我使用 drawRect: 方法来执行此操作。我可以更改矩形大小吗？或者我怎样才能决定矩形的大小？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:08:34.770

你的意思是延伸到视野之外？如果是这样，请将您的视图更改为自由形式并增加其大小

# php - 如何取消设置包含自引用的对象？

> ID：14732975
> 
> 赞同：3
> 
> 时间：2013-02-06T15:44:43.920
> 
> 标签：php, destructor, self-reference

我找到了这个解决方案，但也许有更好的解决方案，你怎么看？

```
class A
{
        #A self-reference
        private $_a;
        #Construcotr makes a self-reference
        public function __construct()
        {
                $this->_a = $this;
        }
        #Some other functions
        public function hello()
        {
                echo 'Hello, world!' . PHP_EOL;
        }
        #Function to destruct just this object, not its parent
        public function myDestruct()
        {
                unset($this->_a);
                var_dump($this);
        }
}

class AProxy
{
        #The proxied object
        public $_a;
        #The constructor has to be rewritten
        public function __construct()
        {
                $this->_a = new A();
        }
        #The destructor
        public function __destruct()
        {
                $this->_a->myDestruct();
                unset($this->_a);
                var_dump($this);
        }
        #Some other functions
        public function __call($fct, $args)
        {
                call_user_func(array($this->_a, $fct), $args);
        }
}

echo 'START' . PHP_EOL;
#Use class AProxy instead of class A
$a = new AProxy();

$a->hello();

unset($a);

#Otherwize you need to trigger the garbage collector yourself
echo 'COLLECT' . PHP_EOL;
gc_collect_cycles();

echo 'END' . PHP_EOL; 
```

如果我按原样使用 A 类，则取消设置不起作用，因为 A 在其属性之一中具有自引用。

在这种情况下，我需要手动调用垃圾收集器。

我找到的解决方案是使用一个名为 AProxy 的代理类，它在 A 中调用一个名为 myDestructor 的特殊函数，该函数仅破坏 A 类而不破坏其父类。

然后 AProxy 的析构函数在 A 的实例上调用 myDestructor。

为了使 AProxy 类似于 A 类，我重新实现了 __call 函数（属性的 setter 和 getter 也可能被重载）。

你有比这更好的解决方案吗？

# ssh - 通过 SSH 的公共 socks 代理

> ID：14732978
> 
> 赞同：4
> 
> 时间：2013-02-06T15:44:54.920
> 
> 标签：ssh, proxy, socks, netcat

所以我可以创建一个本地袜子代理，`sudo ssh -D 8080 user@server` 我只能从我的机器上访问它：

```
nmap -p 8080 127.0.0.1
8080/tcp open  http-proxy 
```

但是，无法从我的本地网络访问此代理：

```
nmap -p 8080 192.168.1.10
8080/tcp closed  http-proxy 
```

我已经尝试过端口转发，但似乎并没有解决问题（除非我做错了）我在 Mac 上，顺便说一句。

解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-13T15:34:42.833

如果要从网络访问 SOCKS 代理，则需要 SSH 将其 SOCKS 代理绑定到可访问的外部地址，而不是 localhost，它是“本地”的，不允许任何其他外部连接。请改用此命令：

```
ssh -ND "*:8080" user@server 
```

请注意，我已从`sudo`您的命令中删除，并且已将`-N`标志添加到命令中。`sudo`当然不需要；仅当您打开低于 1024 的端口时才需要它（除非您有充分的理由，否则您不应该这样做）。该`-N`标志使 SSH 会话**N**具有交互性，因此您无需启动 shell 会话，而只是一个代理。将`-D ":8080"`SOCKS 代理绑定到系统上的所有地址，包括网络地址。

至于防火墙设置，如果您有最新版本的 Mac OS X (10.6+)，您可能还希望将防火墙打开到您的 8080 端口。您可以使用此命令执行此操作：

```
sudo ipfw add 9999 allow tcp from any to any dst-port 8080 
```

`9999`只是一个防火墙 ID 号，您可以使用它来识别防火墙规则。

如果您决定停止打开代理，此命令将关闭它：

```
sudo ipfw delete 9999 
```

完成所有这些配置后，如果您希望代理在 Internet 上可用，则需要按照说明设置端口转发。您可以使用[本指南](http://portforward.com/english/routers/port_forwarding/)在路由器上配置端口转发。

**但是**...在 Internet 上公开开放代理可能会引起麻烦。您的 ISP 可能会对此不屑一顾，尤其是当某个不太好的人通过 Internet 访问您的 SOCKS 代理时。更好的解决方案？安装 OpenSSH 服务器，保护它，然后从 Internet 登录并在本地设置 SOCKS 代理。[本指南](http://wiki.vpslink.com/Instant_SOCKS_Proxy_over_SSH)可以提供帮助。

快乐代理！

# java - 尝试从商店获取元素时出现 NullPointerException

> ID：14732979
> 
> 赞同：0
> 
> 时间：2013-02-06T15:44:54.777
> 
> 标签：java, arrays, swing, nullpointerexception, settext

我有一个带有以下类的摇摆应用程序：

ControllerGUI：加载我的主窗体
Date：用于将输入的数字转换为日期格式
Employee：扩展人员类并设置变量，如薪水、职位
MainForm：摇摆 gui
人员：设置其他详细信息的变量like name,gender,dob
Store：存放数组Employee[]列表；

我有一个 displayInformation JPanel，我想在商店的 JTextFields 中显示姓名、薪水、职位等，然后允许用户使用下一个和上一个按钮浏览条目。但是，当我试图让它首先工作时，我遇到了 NullPointerException。

在我的 MainForm 中，我添加了一个新的 Store

```
Store testStore = new Store(100); 
```

我希望将数组中的元素输出到不同的 JTextField，例如：

```
showName.setText(testStore.list[listIndex].name); 
```

（其中 listIndex 是我启动的一个 int），但是我得到一个 NullPointerException，如果我取消 .name 或 .salary 任何我想要的，错误就会消失，但显然代码中没有任何意义。

这里的任何帮助将不胜感激！

```
 public class Store implements Serializable {
    private static int MAXSIZE; // holds the size of the array
    private static int count; // keeps count of number of persons stored in
                                // array

    Employee[] list; // array for storing person objects

    public Store(int size) {
        list = new Employee[size];
        MAXSIZE = size;
        count = 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:48:09.470

发生这种情况是因为：

```
testStore.list[listIndex] 
```

一片空白。

您可以使用：

```
showName.setText(testStore.list[listIndex] == null ? null : testStore.list[listIndex].name); 
```

实际上，更好的方法是在 Person 类中使用 setter 和 getter，然后使用：

```
testStore.list[listIndex].getName() 
```

获取 Person 的名称。

# android - android颜色选择器“无法解析为类型”

> ID：14732980
> 
> 赞同：0
> 
> 时间：2013-02-06T15:44:55.537
> 
> 标签：android, color-picker

也许这是一个非常简单的问题......但我是一个相当新的初学者......请容忍我。

我现在正在开发一个绘图应用程序，并希望允许用户通过颜色选择器选择颜色。

我看到了 AmbilWarna 对话框，并将以下内容复制到我的应用程序中：

## 代码：

```
package com.pearappx.drawing;
import com.pearmak.drawing.ui.dialog.AmbilWarnaDialog.OnAmbilWarnaListener;

// other codes and declarations

   public OnClickListener setColorPickerDialogListener = new OnClickListener() 
   {
      @Override
      public void onClick(View v) 
      {   
          AmbilWarnaDialog dialog = new AmbilWarnaDialog(Doodlz.this, currtentColor, new OnAmbilWarnaListener()     
          {          
              @Override
               public void onCancel(AmbilWarnaDialog dialog) {     ;}
               @Override
               public void onOk(AmbilWarnaDialog dialog, int color) 
               {
                   colorRedBtn.setbackgroundcolor(color);
               }

          });
          dialog.show();
      };
   }; 
```

## 问题：

OnCLickListener 块中有许多红色下划线用于引用 "AmbilWarnaDialog cannot be resolve to a type" 。这可能是因为 AmbilWarnaDialog 没有正确导入？

这是因为在导入部分也显示了错误。我通过写为： `import com.pearmak.drawing.ui.dialog.AmbilWarnaDialog.OnAmbilWarnaListener`; 但它也将这句话强调为上述错误。

我已经关注了[http://developer.android.com/tools/projects/projects-eclipse.html](http://developer.android.com/tools/projects/projects-eclipse.html)并在关闭参考对话框之前单击了“应用”。

这怎么可能解决？非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:01:50.160

您需要的是库项目来放置您的对话框。完成该工作后，将`*.jar`文件从`\bin`目录中复制出来并将其导入到您的主应用程序中。请务必修改应用程序的构建路径，使其包含新`*.jar`文件。

有关库项目的精彩介绍，请查看：[http](http://www.vogella.com/articles/AndroidLibraryProjects/article.html) ://www.vogella.com/articles/AndroidLibraryProjects/article.html 。这是我开始的地方，它对我来说就像一个冠军。

祝你好运！

# c++ - 如何从匹配的字符串中提取无符号值？

> ID：14732982
> 
> 赞同：0
> 
> 时间：2013-02-06T15:45:02.830
> 
> 标签：c++, boost, boost-spirit

我需要编写能够解析 x(t-1)、u(t)、u(t-4)、a0、a1 等标记的词法分析器，并且该词位的属性应该是“无符号的”（如令牌 x(t-2) 的示例属性值应为 2)。我可以通过正则表达式定义所有这些标记，但我不知道如何从匹配的字符串中提取属性值。

PS 这个词法分析器将用于 boost 精神 qi 语法。

那么，有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:30:26.323

```
#define BOOST_SPIRIT_USE_PHOENIX_V3

#include <boost/phoenix.hpp>
#include <boost/algorithm/string.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/lex_lexertl.hpp>
#include <boost/fusion/include/adapt_struct.hpp>
...
namespace qi = ::boost::spirit::qi;
namespace mpl = ::boost::mpl;
namespace lex = ::boost::spirit::lex;
...
struct extract_func
{
    template <typename Iterator> struct result
    {
        typedef unsigned type;
    };

    template <typename Iterator> typename result<Iterator>::type operator()(Iterator& begin, Iterator& end) const
    {
        ::std::string n(begin, end);
        ::boost::trim_if(n, !::boost::is_digit());
        return n.empty()
                ? 0U
                : ::boost::lexical_cast<unsigned>(n);
    }
};

const ::boost::phoenix::function<extract_func> EXTRACT;

template <typename L>
struct DynamicExpressionLexer : lex::lexer<L>
{
    lex::token_def<unsigned> OBJECT_USAGE;
    ...

    lex::token_def<lex::omit> WS;

    DynamicExpressionLexer() :
        OBJECT_USAGE("x\\ *\\(\\ *t\\ *-\\ *[0-9]+\\ *\\)"),
        ...
        WS("[ \\t]+")
    {
        this->self
                = OBJECT_USAGE[lex::_val = EXTRACT(lex::_start, lex::_end)]
                | ...;

        this->self("WS") = WS;
    }
}; 
```

# lotus-notes - 在 Lotus Notes 中自动将已发送邮件移动到收件箱

> ID：14732983
> 
> 赞同：1
> 
> 时间：2013-02-06T15:45:02.757
> 
> 标签：lotus-notes, lotusscript

在 Lotus Notes 中，当您发送电子邮件时，它会自动将电子邮件放在您的“已发送”视图中。但是“已发送”视图的特殊之处在于您不能将消息从已发送视图“移出”到其他文件夹。您可以将邮件“复制”到另一个文件夹，然后从“已发送”视图中删除邮件。但这是一个非常繁琐的两步过程。所以通常我每天所做的是将所有“已发送”邮件复制到收件箱中，然后从“已发送”视图中删除所有邮件。

在我每天上下班的路上，我都会处理所有的消息，将它们归档在适当的文件夹中以供以后参考。因此，将所有内容都放在收件箱中可以节省大量时间，因为类似主题（已发送/已接收）的大多数消息在时间线中彼此并排显示。

有没有一种自动化的方法可以让 Lotus Notes 定期自动将邮件从“已发送”文件夹移动到“收件箱”。我听说我可以使用计划代理，但我看不到任何计划代理的方法（注意：我是用户而不是 Domino 管理员）。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T16:13:38.690

好的，首先要意识到文件夹和视图是两个不同的东西。

*   视图将根据预定义的搜索条件列出文档。
*   文件夹包含已标记为位于该文件夹中的文档。

因此，您不能将文档从视图“移动”到文件夹，因为它们彼此之间没有真正的联系。

您可以做的是通过使其不符合搜索条件来从视图中删除文档。在这种情况下，这里是发送视图的代码。

```
SELECT DeliveredDate = "" & PostedDate != "" & !(@IsMember("S"; ExcludeFromView)) 
```

这意味着以下。

> 如果“DeliveredDate”字段为空且 PostedDate 不为空，并且 ExcludeFromView 字段不包含“S”，则在视图中显示文档。

因此，删除它的最快方法是在 ExcludeFromView 字段中的现有值中添加一个“S”。

现在要将其添加到收件箱文件夹，您只需将文档移动到该文件夹​​即可。

**免责声明：**我没有测试过这个代理，使用风险自负。

您应该能够通过使用以下内容创建一个简单的代理来完成这两项工作（使用添加条件按钮来创建它们）。

![简单代理](../Images/8aaf516b24dfeeaac4f3da6e187e7a30.png)

然后单击“文档选择”，您可以指定仅在已发送视图中检查文档。

![文件选择](../Images/b39c7dcb9a7d261e503772784a7fcf8d.png)

最后右键单击白色区域并选择代理属性。您可以指定您希望它如何运行（计划或从菜单）。

*例子：*

![运行设置](../Images/3f051da49332a134c274e6ddffdf9d57.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T19:38:26.290

如果您的目标只是能够在一个地方查看您发送的消息和接收的消息，那么您根本不需要做任何事情！答案不是移动消息。答案是打开所有文档视图。

![所有文档视图的图片](../Images/328cc9f841f4589e410255bd4c0bae8e.png)

发送的消息旁边有一个小信封图标。

这是来自 Notes 8.5 客户端，但所有版本的 Notes 都具有此视图。

还有一个邮件线程视图，它将消息和响应组织到分层线程中（如果可能；有时不是）。我不记得这是在哪个版本的 Notes 中引入的，但它肯定存在于 Notes 8 中，并且可能是您真正最需要的。

# c# - HierarchicalDataTemplate.Triggers 是否支持对 ItemsSource 和 ItemTemplate 的条件绑定？

> ID：14732985
> 
> 赞同：3
> 
> 时间：2013-02-06T15:45:07.080
> 
> 标签：c#, wpf, xaml

以下 xaml 生成编译时错误：在类型“System.Windows.Controls.ContentPresenter”上找不到模板属性“ItemsSource”

```
 <HierarchicalDataTemplate x:Key="tvTemplate">
        <TextBlock Text="{Binding Path=Name}"/>
        <HierarchicalDataTemplate.Triggers>
            <DataTrigger Binding="{Binding HasSubCat1}" Value="True">
                <Setter Property="ItemsSource" Value="{Binding SubCategories1}" />
                <Setter Property="ItemTemplate" Value="{Binding subCat1Template}" />
            </DataTrigger>
            <DataTrigger Binding="{Binding HasSubCat1}" Value="False">
                <Setter Property="ItemsSource" Value="{Binding SubCategories2}" />
                <Setter Property="ItemTemplate" Value="{Binding subCat2Template}" />
            </DataTrigger>
        </HierarchicalDataTemplate.Triggers>
    </HierarchicalDataTemplate>
</UserControl.Resources> 
```

基本上，我的数据在显示时将是两级或三级深......数据对象的类型会有所不同，这取决于它注定是 2 级或 3 级分支的一部分。这就是为什么我需要有条件地设置模板和项目源。这可以做到吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T18:37:20.040

从您的描述中不太确定您的数据到底是什么样的，但我认为您想要的不同`HierarchicalDataTemplates`，`DataTemplateSelector`可以在每个项目中选择它们。选择器只需要根据数据项上的某些值在模板之间切换，例如您的 DataTriggers 尝试执行的操作：

```
public class CategoryTemplateSelector : DataTemplateSelector
{
    public DataTemplate Cat1Template { get; set; }
    public DataTemplate Cat2Template { get; set; }

    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        return ((CategoryBase)item).HasSubCat1 ? Cat1Template : Cat2Template;
    }
} 
```

然后，您需要 2 个简单的模板，每个模板都有不同的`ItemsSource`绑定：

```
<HierarchicalDataTemplate x:Key="tvTemplate1" ItemsSource="{Binding SubCategories1}">
    <TextBlock Text="{Binding Path=Name}"/>
</HierarchicalDataTemplate>
<HierarchicalDataTemplate x:Key="tvTemplate2" ItemsSource="{Binding SubCategories2}">
    <TextBlock Text="{Binding Path=Name}"/>
</HierarchicalDataTemplate> 
```

然后在你的`TreeView`，而不是设置`ItemTemplate`，使用选择器：

```
<TreeView.ItemTemplateSelector>
    <local:CategoryTemplateSelector Cat1Template="{StaticResource tvTemplate1}" Cat2Template="{StaticResource tvTemplate2}"/>
</TreeView.ItemTemplateSelector> 
```

# haskell - 如何在 Haskell 中运行 for 循环

> ID：14732994
> 
> 赞同：-6
> 
> 时间：2013-02-06T15:45:40.747
> 
> 标签：haskell

我正在尝试通过列表中的所有元素作为参数运行帮助功能

```
-- Help Function
helpFun :: Int -> Int -> Int
helpFun x y = x + y

-- Main Function
mainfun :: [Int] -> [Int]
mainfun x = helpfun 2 [j | j <- x] 
```

如果我们假设 x 是一个 int 列表，`[0, 1, 2, 3, 4, 5, 6]` 我应该更改什么以使其`helpFun`对列表中的所有元素运行？`helpFun 2 0`我想得到所有号码`helpFun 2 6`

所以就像

```
for a in list:
    tt = helpFun 2 a
    return tt 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T15:50:31.883

Haskell 中没有 for 循环这样的东西。

要将函数应用于列表中的每个元素，您可以使用列表推导式`map`或列表推导式。由于您已经有一个列表理解（目前没有做任何事情），让我们使用它：

```
mainfun xs = [helpfun 2 x | x <- xs] 
```

替代使用`map`将是：

```
mainfun xs = map (helpfun 2) xs 
```

# sql - SQL group by，不知道叫什么

> ID：14732995
> 
> 赞同：0
> 
> 时间：2013-02-06T15:45:40.870
> 
> 标签：sql, postgresql, group-by, greatest-n-per-group

首先，我确定这个问题的答案就在某个地方，但我只是不知道这个特定问题被称为什么来搜索它。

我有一个这样的日志表：

```
编号 | 关键 | 价值 | 时间戳
======================================
1 | 一个 | 苹果| 高分辨率照片| CLIPARTO 2013-02-05 01:01:01.0001
2 | 乙 | 蝙蝠 | 2013-02-05 01:01:01.0002
3 | 一个 | 苹果| 高分辨率照片| CLIPARTO 2013-02-05 01:01:01.0003
4 | 乙 | 蝙蝠 | 2013-02-05 01:01:01.0004
5 | 一个 | 苹果| 高分辨率照片| CLIPARTO 2013-02-05 01:01:01.0005
6 | 乙 | 蝙蝠 | 2013-02-05 01:01:01.0006

```

我想做一个像这样的查询：

从日志组中选择键、值、时间戳 按时间戳顺序排列

我希望查询返回以下内容：

```
编号 | 关键 | 价值 | 时间戳
======================================
5 | 一个 | 苹果| 高分辨率照片| CLIPARTO 2013-02-05 01:01:01.0005
6 | 乙 | 蝙蝠 | 2013-02-05 01:01:01.0006

```

但它告诉我，我应该将时间戳放在违背目的的组中。任何帮助将非常感激。

我正在使用 PostgreSQL 顺便说一句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:48:10.630

因为您没有`Aggregate`在至少某些字段上使用函数，请尝试

```
SELECT key, value, MAX(timestamp) AS max_timestamp
FROM   log 
GROUP  BY key, value
ORDER  BY max_timestamp DESC 
```

*   [PostgreSQL 文档](http://www.postgresql.org/docs/9.2/static/sql-select.html)
*   [聚合函数](http://www.postgresql.org/docs/9.2/static/tutorial-agg.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T15:48:58.390

也许您正在寻找最后一个时间戳？就像是：

```
select
    key, 
    value, 
    max(timestamp) t
from 
    log 
group by 
    key,
    value
order by 
    t desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:00:33.527

原始帖子要求查看 id 字段，其他答案似乎忽略了这一点，并假设键和值具有 1:1 映射（不是愚蠢的假设）。

要从日志中获取每个键的最新时间戳的行：

```
with latestLog as (
    select  key, max(timestamp) latestTimestamp
    from    logTable
    group by key)
select  l.*
from    log l join latestLog ll on l.key = ll.key and l.timestamp = ll.latestTimestamp 
```