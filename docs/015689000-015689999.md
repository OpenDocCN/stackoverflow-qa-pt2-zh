# StackOverflow 问答 15689000-15689999

# java - 如何在struts2上处理包含大量数据的大型表单

> ID：15689000
> 
> 赞同：0
> 
> 时间：2013-03-28T18:01:48.170
> 
> 标签：java, tomcat, struts2, permgen

当我在 struts2 中发送大表单时，服务器会抛出`PermGen`错误并且不保存所有表单数据。

该表单有 6 个字段和一个网格，该网格有 10 列，其中网格的每一行是一个`ArrayList`. 当我使用表单并且网格中有超过 1000 行时，就会出现问题。收到 pojo 后，服务器开始保存数据，但在第 833 行，或多或少地向我抛出了一个`PermGen`错误。

系统规格如下：

*   CPU：AMD 飞龙 X6 - 2.8 Ghz
*   总内存：8Gb
*   JVM内存：2Gb
*   Tomcat 内存池：2Gb
*   永久代：512Mb
*   JRE 6.37，雄猫 7.0.37

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:48:54.360

增加 PermGen 解决了我的问题。

# arraylist - 排序数组修复代码

> ID：15689004
> 
> 赞同：0
> 
> 时间：2013-03-28T18:02:01.487
> 
> 标签：arraylist

此方法需要排序和排列，我与以下代码很接近，但它所做的是将列表向前向后，即如果列表是“5、4、3”，这会将其更改为“3、4、5” . 这是因为在 if 语句完成后，它会返回到 for 并且一旦完成，for 会将最低设置回 1000。如何让它不每次都设置回 1000？

公共无效排序列表（）{

```
 for(int i=0; i<myList.size(); i++)
    {
        int lowest = 1000;
        if(myList.get(i)<lowest)
        {
            myList.add(0, myList.get(i));
            myList.remove(i+1);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:09:16.607

这个 ：

```
public void sortList() {

    int lowest = 1000;
    for(int i=0; i<myList.size(); i++)
    {

        if(myList.get(i)<lowest)
        {
            myList.add(0, myList.get(i));
            myList.remove(i+1);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:08:26.013

使用您给出的示例，我会将“最低”声明移出 for 循环，如下所示：

```
int lowest = 1000;
for(int i=0; i<myList.size(); i++)
{
    if(myList.get(i)<lowest)
    {
        myList.add(0, myList.get(i));
        myList.remove(i+1);
    }
} 
```

这样它就不会在每个 for 循环中重置为 1000。然后，您可以根据需要在循环内更新它，就像您更新任何其他数值变量一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T18:07:36.747

您只需在循环之外声明最低，并在循环中更新它。

# .htaccess - 将特定文件的请求重写到 codeigniter

> ID：15689005
> 
> 赞同：0
> 
> 时间：2013-03-28T18:02:02.423
> 
> 标签：.htaccess, codeigniter, mod-rewrite, rewrite

我有一个使用 CodeIgniter 构建的应用程序，当某些事件发生时，第三方服务（电子邮件服务提供商）正在发出包含 POST 数据的 http 请求。问题是，我无法完全修改此第 3 方服务发出请求的 url，具体来说，它向以`w_4.php`我指定的域和目录命名的文件发出请求。

我不想在 CodeIgnitier 堆栈之外拥有这个单独的文件，而是使用 .htaccess 将对该文件发出的所有请求重写到我的 codeigniter 应用程序中的控制器，即`api/my_controller/my_method`. 但我需要完整的请求中的 POST 数据，所以我认为无法使用重定向。

我在我的 .htaccess 中尝试过这样的事情：

```
RewriteCond $1 (w_4\.php)
RewriteRule ^(.*)$ index.php/api/my_controller/my_method 
```

虽然请求确实被路由到 codeigniter，但即使该控制器/路由确实存在，我也只会得到 404。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:12:12.880

答案是`P`在 RewriteRule 中使用代理标志。如此处详细说明[https://stackoverflow.com/a/359224/192694](https://stackoverflow.com/a/359224/192694)，该标志指示应将请求原封不动地传递给代理模块，包括其 POST 数据。

欲了解更多信息：[http ://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_p](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_p)

# windows - 在文本编辑器中支持 IAccesible 接口以进行插入符号移动的正确解决方案是什么？

> ID：15689006
> 
> 赞同：13
> 
> 时间：2013-03-28T18:02:06.050
> 
> 标签：windows, winapi, mfc, ui-automation, iaccessible

我想从头开始实现一个支持 IAccessible 接口的文本编辑器。我正在使用 MFC 和 Win32 API。

当记事本等标准文本编辑器中的插入符号位置发生变化时，插入符号移动的相应字母、单词或行由讲述人、JAWS 等客户端工具发音。我不知道如何实现此功能。我搜索互联网并阅读 MSDN 文档。

[我在http://msdn.microsoft.com/en-us/library/dd317978.aspx](http://msdn.microsoft.com/en-us/library/dd317978.aspx)和[http://msdn.microsoft.com/en-us/library/dd373892.aspx](http://msdn.microsoft.com/en-us/library/dd373892.aspx)中读到客户端通过 AccessibleObjectFromWindow 方法请求插入符号从操作系统，操作系统发送 WM_GETOBJECT 到应用程序。WM_GETOBJECT 消息在相应的窗口回调函数中收到，但对于插入符号移动事件的 hWnd 为 NULL。我检查了线程消息队列，但是线程消息队列中根本没有收到 WM_GETOBJECT。

一种有效但不是正确解决方案的方法是调用

```
NotifyWinEvent( EVENT_OBJECT_NAMECHANGE, hwnd, OBJID_CLIENT, CHILDID_SELF ) 
```

当插入符号被用户移动时。当客户要求更改名称时，我返回与插入符号移动相关的相应文本。

```
HRESULT  CMyEditor::get_accName(VARIANT varChild, BSTR *pszName)
{
   *pszName = SysAllocString( L"CORESPONDING TEXT TO THE CARET MOVEMENT" );
   return S_OK;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T12:34:52.320

客户端将使用*SetWinEventHook()*函数来跟踪插入符号的以下事件：

*   EVENT_OBJECT_CREATE
*   EVENT_OBJECT_DESTROY
*   EVENT_OBJECT_SHOW
*   EVENT_OBJECT_HIDE
*   EVENT_OBJECT_LOCATIONCHANGE
*   EVENT_OBJECT_FOCUS

如果您使用自定义控件，则需要使用*NotifyWinEvent()*自己触发这些事件，尤其是应该触发旁白的 EVENT_OBJECT_LOCATIONCHANGE。

当客户端处理这些事件时，它应该使用*AccessibleObjectFromEvent() 访问*他正在跟踪的对象的*IAccessible*接口。

 *正如您所说，Microsoft Active Accessibility 将处理此调用并将 WM_GETOBJECT 消息发送到相应的窗口，具体取决于提供给*AccessibleObjectFromEvent()*的处理程序（应该是事件中包含的处理程序）。

当您收到插入符号的 WM_GETOBJECT 时，您应该返回相应的*IAccessible*接口，该接口将报告正确的*accRole*和*accLocation*。

如果您没有收到正确的 WM_GETOBJECT 消息，可能是因为您没有触发正确的事件。

您可以使用*Accessible Event Watcher*检查是否发送了正确的事件：http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd317979%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317979%28v=vs.85%29.aspx)

请参阅 MSDN 上的 Active Accessibility Servers 开发人员指南：http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd318053%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318053%28v=vs.85%29.aspx)

**编辑**

此外，如果您使用 Riched20.dll 提供的标准插入符号（在 Rich Edit 中作为实例），文档规定与其他 UI 元素不同，它没有关联的窗口句柄。*

# javascript - JQuery - 推送方法 JSONArray

> ID：15689007
> 
> 赞同：0
> 
> 时间：2013-03-28T18:02:08.923
> 
> 标签：javascript, jquery, json

我在两个数组之间做 push 方法来创建一个更大的数组。我要修复的两个简单数组是：

```
[{"id":"11"},{"color":"blue","value":"14"}] 
[{"id":"11"},{"color":"green","value":"25"}] 
```

推送两个数组的代码是：

```
var totjunt = $('body').data('cesta_list').push(array_of_bought_colors_new); 
```

随着`$('body').data('cesta_list');`我保存第一个数组，然后我尝试推送第二个数组。

使用`console.log(JSON.stringify(totjunt));`I 通过控制台打印值，但问题是控制台仅打印数字 2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T18:03:39.850

您正在记录`push()`调用的结果，而不是结果数组。尝试这个：

```
$('body').data('cesta_list').push(array_of_bought_colors_new);
var totjunt = $('body').data('cesta_list'); 
```

更具体地说，`push()` [返回新数组的长度](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push#Returns)，而不是数组本身。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T18:03:57.730

[`.push`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)不返回新数组。它返回数组的新长度。数组就地更新。

# highcharts - highcharts marker: {radius: 10} 在单个数据点上使某些数据点消失？

> ID：15689020
> 
> 赞同：1
> 
> 时间：2013-03-28T18:02:42.437
> 
> 标签：highcharts

这工作得很好：

```
data: [{x:-90,y:-30,name:'1: blah blah'}] 
```

但是，我想根据项目收到的票数更改单个数据点的半径，所以我这样做：

```
data: [{x:-90,y:-30,name:'1: blah blah',marker:{radius: 5}}] 
```

数据点消失了？知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:29:04.467

所以这不一定能解决问题，但它是一种解决方法。

我将我的 y 值更改为全部为正数，所以不是从 -50 到 50，而是从 0 到 100，我最终会在图表上得到我想要的效果。

# crash-reports - 在 AppCode 中查看异常信息

> ID：15689031
> 
> 赞同：6
> 
> 时间：2013-03-28T18:03:08.367
> 
> 标签：crash-reports, appcode

我一直在测试 AppCode，但我似乎找不到任何关于为什么应用程序崩溃的信息。

我添加了一个异常断点，我可以看到导致崩溃的代码行，但没有关于原因的信息。

在 Xcode 中，异常原因被打印到控制台中，但在 AppCode 中我只得到“异常 = 异常断点”。

有人可以指出我从崩溃中获取有用信息的方向吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T19:40:39.030

AppCode，选择运行，查看断点设置，点击“将消息记录到控制台”默认是关闭的。

命令行使用，shift-fn-command-f8

![AppCode 运行，查看断点或 shift-fn-command-f8](../Images/b9da8cc7c366acee55158596453bf886.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T07:14:53.650

AppCode 还会在控制台中打印异常，前提是您以调试模式启动应用程序（实际上，调试器会这样做）。

# c++ - C ++将无符号字符附加到wstring

> ID：15689033
> 
> 赞同：4
> 
> 时间：2013-03-28T18:03:19.617
> 
> 标签：c++, append, wstring

出于调试原因，我想将一个无符号字符附加到 wstring 中。

但是，我没有找到将 unsigned char 转换为 wstring 的函数，所以我无法附加它。

编辑：到目前为止发布的解决方案并没有真正满足我的需要。我想将 0 转换为“0”。迄今为止的解决方案将 0 转换为 0 字符，但不转换为“0”字符串。

有人可以帮忙吗？

谢谢你。

```
unsigned char SomeValue;
wstring sDebug;

sDebug.append(SomeValue); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T18:09:58.953

将 char 附加到字符串（或者在这种情况下，将 wchar_t 附加到 wstring）的正确调用是

```
sDebug.push_back(SomeValue); 
```

[文档在这里](http://www.cplusplus.com/reference/string/basic_string/push_back/)。

要将您的 char 扩展为 wchar_t，您还可以使用[std::btowc](http://en.cppreference.com/w/cpp/string/multibyte/btowc)，它将根据您当前的语言环境进行扩展。

```
sDebug.push_back(std::btowc(SomeValue)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T18:10:22.073

只需将您的 unsigned char 转换为 char：

```
sDebug.append(1, static_cast<char>(SomeValue)); 
```

如果你想使用 operator+ 试试这个：

```
sDebug+= static_cast<char>(SomeValue); 
```

甚至这样：

```
 sDebug+=boost::numeric_cast<char>(SomeValue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T18:06:54.493

有一个重载`append`也需要附加给定字符的次数：

```
sDebug.append(1, SomeValue); 
```

但是，这将导致 和 之间的`unsigned char`转换`wchar_t`。也许你想`SomeValue`成为一个`wchar_t`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T18:08:13.790

wstring 有一个接受 char 的构造函数。这将从一个字符创建一个 wstring，然后您可以附加它。

# javascript - 检查字典上的所有值是否为真的更好方法？

> ID：15689035
> 
> 赞同：3
> 
> 时间：2013-03-28T18:03:24.147
> 
> 标签：javascript, for-loop, dictionary

好的，这就是我得到的：

```
var matchgrid = {
    "a1":[false, 0], "a2":[false, 0], "a3":[false, 0],
    "b1":[false, 0], "b2":[false, 0], "b3":[false, 0],
    "c1":[false, 0], "c2":[false, 0], "c3":[false, 0]};

var keys = Object.keys(matchgrid);

var ch = 0;

for (i=0;i<9;i++) {
        if (matchgrid[keys[i]][0] === false) {
            ch += 1;
        } else if (matchgrid[keys[i]][0] === true) {
            ch -= 1;
        }
    }

//then check it with:

if (ch === 9) {
    //do something
} else { 
    //do something else
} 
```

正如你所看到的，它是一个以数组作为值的字典，我想知道所有键的第一个值是`false`还是`true`混合的，这工作正常，但我确信有更好的方法来做到这一点，任何帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:09:27.130

您的本机 JavaScript 方法很好。您可以只存储一个布尔值，而不是存储总和，将其作为 true 开始，然后如果您看到 false，则将其设置为 false。然后，而不是检查`ch == 9`只是检查布尔值。

但是，如果您可以使用[underscore.js](http://underscorejs.org/#every)（它有很多有用的列表函数），则调用其中一个函数[`every`](http://underscorejs.org/#every)来检查每个项目是否通过了真值测试。然后它变得像这样简单

```
_.every(matchgrid, function(item) {
     return item[0];
}) 
```

更短，更漂亮一点：

```
_.every(matchgrid, _.first); // will return true if all elements are true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:07:22.200

```
var ch = 0;

var result;
for (i=0;i<9;i++) {
        result = matchgrid[keys[i]][0];
        if (result) {
            break;
        } 
    }

// result will be false if they are all false 
```

# jquery - jQuery 网络浏览器？

> ID：15689040
> 
> 赞同：0
> 
> 时间：2013-03-28T18:03:33.683
> 
> 标签：jquery, browser, joomla, touch, kiosk

目前，我正在 Joomla 中为触摸屏信息亭开发一个 Web 应用程序，该信息亭将被分成两个屏幕。左边是菜单，右边是内容。

必要条件之一是应用程序有其“自己的网络浏览器”（如果用户想要在线导航，他可以在应用程序内进行），该浏览器仅在右侧屏幕上打开。

你推荐什么样的解决方案？jQuery？其他软件？

请记住，它是一个触摸屏（键盘等，哈哈）。另外，操作系统是windows 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:30:52.753

All you need is an `<iframe>`. Just be careful, as iframes can be broken out of. The best thing to do is to write an actual native kiosk application that can add limitations on this sort of behavior. There is no way to add such restrictions with a standard browser and JavaScript only.

# windows - 查找“ - ”是否在目录名称中（批处理）

> ID：15689050
> 
> 赞同：1
> 
> 时间：2013-03-28T18:03:58.450
> 
> 标签：windows, for-loop, batch-file

在一批中，我有一个

```
for /d /r %%a in (*) do 
```

如果 %%a 包含“ - ”（即空格 + 连字符 + 空格），我想做一个动作，如果它不包含这个字符串，我想做另一个动作。

我不能让它工作！你有什么主意吗？谢谢。

[PS：我的问题与此类似：[批处理文件：查找子字符串是否在字符串中（不在文件中）](https://stackoverflow.com/questions/7005951/batch-file-find-if-substring-is-in-string-not-in-a-file) ，但我无法对其进行调整以使其工作！]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:11:54.847

请试试这个：

```
for /d /r %%a in ("* - *") do 
```

它应该工作。

编辑：`for /d /r`循环只找到**名称**`-`中带有“ ”的文件夹，因此不需要对**路径**进行额外测试。

 ***** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:30:11.833

```
@ECHO OFF
SETLOCAL
FOR /d /r %%a IN (*) DO (
 ECHO "%%~nxa"|FIND " - " >NUL
 IF ERRORLEVEL 1 (ECHO DO action ONE ON "%%a"
 ) ELSE (ECHO action TWO gets done ON "%%a")
) 
```

FIND 用于`-`在“leaf”目录中定位“”，因此只有最底层包含“ `-`”时才会执行动作二，否则执行动作1。

如果您希望它`-`在文件路径中的任何地方出现“”使操作二发生，然后更改`%%~nxa`为`%%a`****

# php - 将 php 字符串 dmy 转换为日期 ymd

> ID：15689054
> 
> 赞同：-1
> 
> 时间：2013-03-28T18:04:01.147
> 
> 标签：php, date

我已经搜索了很多次，只能像这样将日期从 Ymd 转换为 dmY 。

```
$date = new DateTime('2000-01-01');
echo $date->format('d-m-Y H:i:s'); 
```

但我在 dmY 中有一个字符串，想转换为 Ymd。

这只是相反，但我不知道该怎么做。

# ===

我自己的答案

人们说我的问题已经受到质疑。但是当我尝试他们所说的解决方案时，人们不明白我的日期变量是一个字符串并返回错误。我的日期变量是这种格式 DD/MM/YYYY 的字符串，我发现在谷歌的 pt-br 中搜索它的解决方案。这就是解决方案。

```
function data_user_para_mysql($y){
    $data_inverter = explode("/",$y);
    $x = $data_inverter[2].'-'. $data_inverter[1].'-'. $data_inverter[0];
    return $x;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T18:05:03.773

简单的：

```
$date->format('Y-m-d H:i:s'); 
```

该[文档](http://php.net/manual/en/function.date.php)应该可以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:06:47.010

没有 , 的其他选项`DateTime`是：

`echo`[`date`](http://php.net/manual/en/function.date.php)`('Y-m-d',`[`strtotime`](http://php.net/manual/en/function.strtotime.php)`('01-01-2000'));`

# javascript - 美丽的数字在关联数组中波动

> ID：15689056
> 
> 赞同：0
> 
> 时间：2013-03-28T18:04:06.200
> 
> 标签：javascript, algorithm

我实际上正在为游戏开发“地面指标引擎”。我基本上所做的是将真实的地图数据复制到另一个关联数组中，并使用一些指标属性（如生育率或湿度）对其进行映射，这是一个示例代码：

```
this.metricsMap = {};
this.generatedFertilities = {};

for (var i = 0; i < this.groundMap.data.length; i++) {
    this.generatedFertilities[i] = this.groundMap.data[i].map(function () {
        // TODO
    });
}

for (var i = 0; i < this.groundMap.data.length; i++) {
    this.metricsMap[i] = this.generatedFertilities[i].map(function (res) {
        return {
            ownedBy: "",
            fertility: res,
            humidity: 50
        }
    });
} 
```

地图数据是一个关联数组[32][32]。我想生成具有一致性和“数字波”的相应“生育力矩阵”，这是我想尝试在较小的关联数组上制作的大图：

```
[68, 69, 70, 71, 72, 73, 74, 75, 74, 73],
[69, 70, 71, 72, 73, 74, 75, 74, 73, 72],
[70, 71, 72, 73, 74, 75, 74, 73, 72, 71],
[71, 72, 73, 74, 75, 74, 73, 72, 71, 60],
[72, 73, 74, 75, 74, 73, 72, 71, 60, 59],
[73, 74, 75, 74, 73, 72, 71, 60, 59, 58],
[74, 75, 74, 73, 72, 71, 60, 59, 58; 57],
[75, 74, 73, 72, 71, 60, 59, 58; 57, 56],
[74, 73, 72, 71, 60, 59, 58; 57, 56, 55],
[73, 72, 71, 60, 59, 58; 57, 56, 55, 54] 
```

我们可以想象更多的“模式”，例如，矩阵中间有更多的浓度。

我尝试了很多这样的事情：

```
var baseRand = Math.floor(Math.random() * 100) + 1;
for (var i = 0; i < this.groundMap.data.length; i++) {
    var counter = 0;
    this.generatedFertilities[i] = this.groundMap.data[i].map(function () {
        counter++;

        // think of i like the y axis and counter like the x axis
        if(i % 8 == 0){
            if(counter < 8){
                return Math.abs(Math.floor(baseRand++));
            } else {
                return Math.abs(Math.floor(baseRand--));
            }
        } else {
            if(counter > 8){
                return Math.abs(Math.floor(baseRand--));
            } else {
                return Math.abs(Math.floor(baseRand++));
            }
        }
    });
} 
```

但这并没有把我带到某个地方，而且我在它背后的数学问题上遇到了麻烦。你们将如何设计这样的算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:09:59.350

我不确定我是否正确理解了您的问题。您是否与真实的地图数据相关联？

如果不是，也许[Perlin Noise](http://en.wikipedia.org/wiki/Perlin_noise)可以帮助您。这样的噪声函数可以很容易地用于游戏中的地形生成。您只需要将颜色值映射到高度值。

# silverstripe - 升级到 3.1 后路线不起作用

> ID：15689057
> 
> 赞同：2
> 
> 时间：2013-03-28T18:04:08.890
> 
> 标签：silverstripe

我今天从 SS 3.0 升级到 3.1，自从更新后，系统似乎没有在我的扩展的 _config 文件夹中检测到我的 routes.yml 文件。这是我的 myextension/_config/routes.yml 文件的示例：

```
---
Name: pusherroutes
After: 
  - '#rootroutes'
---
Director:
  rules:
    # handle old 2.4 style urls
    'pusher/$Action': 'PusherController' 
```

我还设置了我的 allowed_actions 静态以将我的控制器操作列入白名单：

```
class PusherController extends Controller {
    public static $allowed_actions = array (
    'ChatAuth',
    'SendMessage',
    'NotifyAuth'
    );
} 
```

当我导航到 mysite.com/pusher/SendMessage 时，系统不再将我引导至控制器上的操作方法。在我的网络选项卡中返回的响应是 Silverstripe 入门页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T12:18:43.083

这是因为`$Action`参数被匹配了两次。当初始`pusher/$Action`路由匹配时，URL 的前两部分作为匹配的一部分被使用。然后将控制权传递给您的`PusherController`对象。然后尝试再次将 URL 与操作匹配，但由于没有要解析的 URL，因此它确定不存在任何操作，因此它路由到该`index`操作，该操作反过来显示入门信息。

要解决此问题，只需使用：

```
Director:
  rules:
    'pusher': 'PusherController' 
```

并依赖于将控制权交给`PusherController`.

# google-sheets - 如果列中的值大于 0，则突出显示行 - Google 电子表格

> ID：15689058
> 
> 赞同：7
> 
> 时间：2013-03-28T18:04:11.120
> 
> 标签：google-sheets, gs-conditional-formatting

我正在尝试让 Google 电子表格自动突出显示电子表格中特定列中的值高于 0 的所有行。我已经寻找了一些解决方案，但没有得到它的工作。

我在列中有各种指标，所以假设我想突出显示所有行，其中“I”列的值大于零。

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-09T10:52:01.423

在条件格式页面上，从可用选项列表中选择“自定义公式是”，然后在文本字段类型中：

```
=$I:$I>0 
```

选择您的格式选项，然后在范围字段中键入范围。例如：

```
A2:Z100 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-06T00:23:24.617

因为只应用于单个列，所以有一个更简单的版本（我已经复杂了，所以文本没有突出显示）：

清除格式，选择 ColumnI 和格式，条件格式...，格式单元格如果...`Custom formula is`和：

```
=and(isnumber(I1),I1>0) 
```

用选择和填充`Done`。

如果不仅要格式化相关单元格，还要格式化整行，则更改 Apply to Range（例如 A1:Z1000）并添加锚点（`$`s），如下所示：

```
=and(isnumber($I1),$I1>0) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T17:01:53.907

我知道的唯一解决方案是编写脚本。

链接：[Google Apps 脚本](https://developers.google.com/apps-script/)

以下内容并不漂亮，但它有效：

```
function myFunction() {
  var I_INDEX = 1;
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Highlight rows");
  var dataRange = sheet.getDataRange();
  var dataValues = dataRange.getValues();
  for (var i=1; i<=dataRange.getNumRows(); i++) {
    var row = sheet.getRange(i, 1, 1, 2);
    if (dataValues[i-1][I_INDEX] > 0) {
      row.setBackground("red");
    }
  }
} 
```

请参阅[示例](https://docs.google.com/spreadsheet/ccc?key=0AmR0r1Y14zgydG03QS1Dd0dLRDA3SWgtLXp6TzV3d3c#gid=1)，使用“工具”->“脚本编辑器...”查看/运行脚本。

# android - Android：关于自定义 ListView

> ID：15689061
> 
> 赞同：2
> 
> 时间：2013-03-28T18:04:27.013
> 
> 标签：android, listview, contextmenu

我在 xml 中制作了自定义 ListView

如果我不使用 CheckBox，则可以为上下文菜单选择列表中的项目

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >
        <TextView
            ... />
        <TextView
            ... />
        <TextView
            ... />

</RelativeLayout> 
```

但是如果我添加 CheckBox，那么活动区域只有 CheckBox，我不能调用上下文菜单。

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout  xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            >
            <TextView
                ... />
            <TextView
                ... />
            <TextView
                ... />
            <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="CheckBox"
         />
    </RelativeLayout> 
```

我活动的一部分

```
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_spmmain);

  schedule_listview = (ListView) findViewById(R.id.MainActivity_schedule);

  registerForContextMenu(schedule_listview);
}

@Override
    public void onCreateContextMenu(ContextMenu menu, View v,
                                    ContextMenuInfo menuInfo) {
        super.onCreateContextMenu(menu, v, menuInfo);
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.spmmain_context, menu);
    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {

        if(item.getItemId() == R.id.MainActivity_contextmenu_edit){
            startAddActionActivity();
        }
        else if(item.getItemId() == R.id.MainActivity_contextmenu_delete){

        }

        return true;
    } 
```

如何激活 ListWidget 项以使用带有 CheckBox 的上下文菜单？

PS对不起英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:09:18.290

您`CheckBox`正在关注这将阻止其他点击事件。添加[focusable 属性](http://developer.android.com/reference/android/view/View.html#attr_android%3afocusable)并将其设置为 false。

`android:focusable="false"`

这允许该`ListView`项目也触发事件。

```
<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="CheckBox"
    android:focusable="false"
     /> 
```

# forms - 动态设置谷歌折线图的起始值并重绘图表

> ID：15689062
> 
> 赞同：0
> 
> 时间：2013-03-28T18:04:27.600
> 
> 标签：forms, dynamic, google-visualization, linechart

我正在使用下面的代码为预计的财务余额生成折线图。数据是从 MySQL 数据库中的信息生成的。我想做的是在页面上有一个带有输入字段的表单，允许用户在页面加载后动态设置起始余额，以便使用正确的起始余额重新绘制图表，但是我不知道该怎么做：

```
$rows = array();
$table = array();
$table['cols'] = array(
    array('label' => 'Date', 'type' => 'string'),
    array('label' => 'Amount', 'type' => 'number')
);

[code to generate data goes here - i.e. calculating a balance for each date in the chart]

    $balance = $balance - $monthly - $weekly + $session_total;
    $temp = array();

    $temp[] = array('v' => (string) $date_display); 
    $temp[] = array('v' => (string) $balance); 
    $rows[] = array('c' => $temp);
}

$table['rows'] = $rows;
$jsonTable = json_encode($table);
//echo $jsonTable;
?>

    <script type="text/javascript">

    // Load the Visualization API and the piechart package.
    google.load('visualization', '1', {'packages':['corechart']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawChart);

    function drawChart() {

      // Create our data table out of JSON data loaded from server.
      var data = new google.visualization.DataTable(<?=$jsonTable?>);
                                                    var formatter = new google.visualization.NumberFormat({fractionDigits:2,prefix:'\u00A3'});
      formatter.format(data, 1);
      var options = {
          pointSize: 5,
          legend: 'none',
          hAxis: { showTextEvery:31 },
          series: {0:{color:'2E838F',lineWidth:2}},
          chartArea: {left:50,width:"95%",height:"80%"},
          backgroundColor: '#F7FBFC',
          height: 400
        };
      // Instantiate and draw our chart, passing in some options.
      //do not forget to check ur div ID
      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    }
    </script>

      <div id="chart_div"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:20:05.473

希望有一种相当简单的方法可以在新数据可用时刷新图表。它需要对您的 PHP 进行一些小的更改和一些 JavaScript 调整。

使用谷歌图表的好处是你可以通过再次调用来重新绘制它们`drawChart()`，你只需要在你做之前能够修改数据。

我对 PHP 所做的更改是存储原始值，这样当您想根据用户的输入更改值时，您总是可以参考以下内容：

```
// display the date
$temp[] = array('v' => (string) $date_display);
// the data used by the chart
$temp[] = array('v' => (string) $balance);
// the original value
$temp[] = array('v' => (string) $balance); 
```

我还将使表格数据全局化，而不是将其直接绘制到函数中，这样您就可以很容易地更改它并刷新图表。

```
var table = <?php echo $jsonTable; ?>;

function drawChart() {
    var data = new google.visualization.DataTable(table);
    ......
} 
```

我使用如下所示的基本形式对此进行了测试：

```
<form method="post" action="#" onsubmit="return false;">
    <input type="text" id="balance1" />
    <input type="text" id="balance2" />
    <button onclick="return refreshChart()">Go</button>
</form> 
```

单击该按钮会取消默认操作并调用一个名为 的函数`refreshChart()`。此函数在重新绘制图表之前将值动态添加到原始值中：

```
function refreshChart() {
    var balance1 = document.getElementById('balance1').value;
    var balance2 = document.getElementById('balance2').value;
    if(!balance1) {
        balance1 = 0;
    }
    if(!balance2) {
        balance2 = 0;
    }
    for(var i = 0, length = table.rows.length; i < length; i++) {
        table.rows[i].c['1'].v = parseFloat(table.rows[i].c['2'].v) + parseFloat(balance1) + parseFloat(balance2);
    }
    drawChart();
    return false;
} 
```

它获取输入的余额并将其添加到存储的原始值`table.rows[i].c['2'].v`并覆盖`table.rows[i].c['1'].v`图表使用的值。然后它调用原始`drawChart()`函数，但使用新数据。

我使用了一些默认数据，这是我在[JSFiddle](http://jsfiddle.net/NPgp5/2/)上测试过的输出。

# php - Sqli 数组问题

> ID：15689065
> 
> 赞同：0
> 
> 时间：2013-03-28T18:04:37.023
> 
> 标签：php, mysql, mysqli

```
 $goal=array();
                //goal
                $sql="";
                //!mysqli_query($con,$sql))
                $result = mysqli_query($con,"SELECT * FROM metrics where ini_name = '$ini'");/*table name*/
                while($row = mysqli_fetch_array($result))
                {
                                array_push($goal,$row['metric_desc']);/*column name*/
                                array_push($goal_id,$row['metric_id']);
                }
                                $matrix=array();
                //goal
                $sql=""; 
```

我正在尝试将值从数据库推送到数组中，但我收到警告

```
Warning: array_push() expects parameter 1 to be array, null given in C:\xampp\htdocs\xampp\Testing\Int\sq2.php on line 195 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:13:39.923

你不需要 2 个数组。您可以（并且应该）将 id 存储为结果数组的键。

```
while($row = mysqli_fetch_array($result))
{
    $goal[$row['metric_id']] = $row['metric_desc']);
} 
```

或者，在[SafeMysql 库](https://github.com/colshrapnel/safemysql/blob/master/safemysql.class.php)的帮助下，**整个**代码可以更改为

```
$goal = $db->getIndCol('metric_id',"SELECT * FROM metrics where ini_name = ?i",$ini); 
```

# javascript - 如何完成加载条件，一个函数在 jquery 中执行另一个函数？

> ID：15689066
> 
> 赞同：2
> 
> 时间：2013-03-28T18:04:42.290
> 
> 标签：javascript, ajax, jquery

我有以下脚本来向我的会话变量的数组添加一个新值，并向我展示完全实时会话的变量

```
(function ($) { 

    Drupal.behaviors.MyfunctionTheme = {
        attach: function(context, settings) {

     $('.add-music').click(function () {
         var songNew = JSON.stringify({
             title: $(this).attr('data-title'),
             artist: $(this).attr('data-artist'),
             mp3: $(this).attr('href')
         });
         var songIE = {json:songNew};
         $.ajax({
             type: 'POST',
             data: songIE,
             datatype: 'json',
             async: true,
             cache: false
         });

         var session;
         $.ajaxSetup({cache: false})
         $.get('/getsession.php', function (data) {
             session = data;
             alert(session);
         });

     });

}}

})( jQuery ); 
```

问题是 POST 运输比调用 GET ALERT 花费的时间更长，然后显示会话变量未更新。

有没有办法设置一个 IF 条件仅在 POST 完成时才返回我 GET 的响应？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:11:16.207

实际上，您想要做的是使用回调 - 即，在您的 POST ajax 请求返回时立即调用的函数。

例子：

```
(function ($) { 

    Drupal.behaviors.MyfunctionTheme = {
        attach: function(context, settings) {

     $('.add-music').click(function () {
         var songNew = JSON.stringify({
             title: $(this).attr('data-title'),
             artist: $(this).attr('data-artist'),
             mp3: $(this).attr('href')
         });
         var songIE = {json:songNew};
         $.ajax({
             type: 'POST',
             data: songIE,
             datatype: 'json',
             async: true,
             cache: false                
         })
         .done(
              //this is the callback function, which will run when your POST request returns
            function(postData){
                //Make sure to test validity of the postData here before issuing the GET request
                var session;
                $.ajaxSetup({cache: false})
                $.get('/getsession.php', function (getData) {
                      session = getData;
                        alert(session);
                });

              }
         );

     });

}}

})( jQuery ); 
```

**根据 Ian 的好建议更新**我已经用新的 done() 语法替换了不推荐使用的 success() 函数

**更新 2 我采纳了 radi8 的另一个好**建议****

# c# - 将默认控制器 CRUD 方法移动到服务类。创建响应消息的问题

> ID：15689067
> 
> 赞同：1
> 
> 时间：2013-03-28T18:04:47.403
> 
> 标签：c#, .net, asp.net-mvc-4, dependency-injection, asp.net-web-api

我正在构建一个简单的 Web API 控制器来管理公司实体。我试图通过使用 Ninject 将所有逻辑移到服务类（依次调用 repo）来管理依赖关系，从而将所有逻辑从控制器中移开。一切都很好，直到我需要在 Delete 操作上返回一个 HttpResponseMessage 对象。我不断收到请求对象“无法解析符号‘请求’”的错误

如何在不是控制器的文件中使用（或获取上下文？）请求对象？

公司控制器.cs

```
public class CompanyController : ApiController
{
    private ICompanyService _companyService;

    public CompanyController(ICompanyService companyService)
    {
        _companyService = companyService;
    }

     // DELETE api/CompTest/5
    public HttpResponseMessage DeleteCompany(int id)
    {
        return _companyService.Delete(id);
    }
} 
```

公司服务.cs

```
 public class CompanyService : ICompanyService
  {
    public readonly IUnitOfWork _unitOfWork ;
    private readonly ICompanyRepository _companyRepository;

    public CompanyService(IUnitOfWork unitOfWork, ICompanyRepository companyRepository)
    {
        _unitOfWork = unitOfWork;
        _companyRepository = companyRepository;
    }

    public HttpResponseMessage Delete(int id)
    {
        var company = _companyRepository.GetCompanyById(id);

        if (company == null)
        {
          //ERROR HERE
          return Request.CreateResponse(HttpStatusCode.NotFound);
        }

        _companyRepository.Delete(company);

        try
        {
            _companyRepository.Save();
        }
        catch (DbUpdateConcurrencyException ex)
        {
            //ERROR HERE
            return Request.CreateErrorResponse(HttpStatusCode.NotFound, ex);
        }

        //ERROR HERE
        return Request.CreateResponse(HttpStatusCode.OK, company);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:18:20.243

如果您想访问`Request`控制器之外的对象（即在服务类中），您可以使用 HttpContextBase 类。

```
public class CompanyService: ICompanyService
{
   private readonly HttpContextBase _context;

   public CompanyService(HttpContextBase context)
   {
      _context = context;      
   }

   public HttpResponseMessage Delete(int id)
   {
       _context.Request ....
   }
} 
```

Ninject 使用 HttpContextWrapper 对象自动解析此 HttpContextBase 依赖项。使用 ninject 应该只添加 CompanyService 绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:21:52.447

Kronprinz，您的服务属于另一层 - 它不应该知道任何有关 HttpRequests/Responses 的信息。例如，它可以在 WinForm / WPF 或 Web 应用程序中重用。如果它不能执行操作，让它抛出一个异常并在你的控制器中处理它，这反过来会创建一个适当的 HttpResponseMessage。

# javascript - KO 找不到带有 ID 的模板

> ID：15689069
> 
> 赞同：6
> 
> 时间：2013-03-28T18:04:52.307
> 
> 标签：javascript, knockout.js, durandal

我以前使用过 Knockout 模板，所以我不确定为什么这对我不起作用。我尝试了两种不同风格的 ko 标记，都不起作用。

```
<!-- more nesting levels -->
<div class="cal-day-tps" data-bind="foreach: timePeriods">
    <div class="cal-day-tp-cont">

        <div data-bind="template: { name: 'tp-ed-templ', data: $data }"></div>

        //both of these methods fail
        <!-- ko template: { name: 'tp-ed-templ', data: $data } -->
        <!-- /ko -->

    </div>
</div>    
<!-- /more nesting levels -->

<script type="text/html" id="tp-ed-templ">
 <!-- bunch of markup -->
</script> 
```

我只是收到错误“找不到 ID 为 tp-ed-templ 的模板”。

可能只是一个错字，但我一直没能找到它。

*   我在 Durandal 的上下文中使用 KO，尽管这不应该有所作为。
*   尝试在使用前声明模板，没有帮助。
*   [其他人也遇到了同样的事情也没有解决办法](https://stackoverflow.com/questions/15557795/durandal-knockout-template-binding-not-inserting)

**这似乎是 Durandal 的问题，而不是 Knockout**。

我在 vanilla durandal 设置中尝试了一些非常简单的案例，它仍然做同样的事情。甚至尝试将脚本放在与绑定相同的嵌套位置，没有骰子。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T19:40:21.997

简短的回答：您目前不能**在**Durandal 中使用 Knockout 模板。但是，正如**[nemesv](https://stackoverflow.com/questions/15689069/ko-cannot-find-template-with-id/15690698#comment22278783_15690698)**指出的那样，如果您将命名模板放在 Durandal 之外，ko 能够找到它们。例如，`<div id="applicationHost"></div>`元素之外的任何地方。

其他解决方法是使用 Durandal 的撰写功能，或者只是将模板内联为匿名。

在不久的将来可能会支持淘汰模板。

我终于在 Durandal 谷歌小组中找到了这些答案，

*   [将淘汰赛模板与 durandal 组合混合](https://groups.google.com/forum/#!topic/durandaljs/MJo0YJnF3Aw)
*   [淘汰赛在视图中找不到模板](https://groups.google.com/forum/#!topic/durandaljs/9GqdFNmgo0k)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-22T23:49:08.743

问题是在绑定 Durandal 视图之前*DOM 中必须存在*KO 模板元素。这是因为视图在插入 DOM*之前已绑定，因此任何包含的模板都无法通过 ID 解析。*

使用返回*observable的**函数*可用于稍后重新触发模板绑定 .. 它可以工作，但很不稳定。（绑定可以用于类似的效果。）*`if`*

 *```
// bind to this in markup:
//   <div data-bind="template: {name: $root.templateName, .. }">
vm.templateName = function () {
   return vm.TemplateId();
};

// Changing this will trigger an observable in the KO template binding;
// don't ask me why we have to pass in a function to 'name' ..
vm.TemplateId = ko.observable("dummy-template-id-that-exists");

// After the view is attached the correct template element is in the DOM
// so we can trigger the template to (re-)bind and it will find it.
function viewAttached () {
   vm.TemplateId("the-real-template-id");
} 
```*

# powershell - Powershell：从 runas /netonly 启动时发现默认网络凭据

> ID：15689070
> 
> 赞同：2
> 
> 时间：2013-03-28T18:04:53.420
> 
> 标签：powershell, runas, networkcredentials, defaultnetworkcredentials

我正在寻找一种方法来将当前会话的网络凭据捕获到一个我可以稍后传递的变量中......

关键是在我有帐户访问/特权的外部域上执行命令，但源域和目标域之间没有信任。

首先，我们在使用 runas 命令 (runas /netonly /user:domian\account powershell) 生成的 powershell 中运行

从这里我可以做几乎所有我想做的事情，除了在任务调度程序中创建一个事件而不将用户名/密码硬编码到命令行中

调用命令 -computer $destination -scriptblock {schtasks -ru domain\account -rp 密码}

我想做的是像

$username = 获取当前会话网络用户名（$(whoami) 显示实际的本地 longon 帐户，而不是产生 powershell 窗口的 runas 帐户）

$password = 获取执行 RunAs 命令时输入的密码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T18:07:32.633

~~根据输入的凭据创建安全令牌并针对 Active Directory 进行验证后，密码将不再保留。它不能在其他地方检索和重用。只剩下令牌。这是设计使然。~~

**更新**：

我进一步挖掘以支持我的案例，它与上面的不太一样，但最终结果是一样的。使用的密码`runas.exe`似乎不可用。网络凭据**未**针对 AD 进行验证，回想起来这很有意义，因为您经常使用`/netonly`远程、不受信任的域来处理：根据定义，您无法验证来自本地系统的远程凭据。来自 MSDN：

这是 flag 的信息`LOGON_NETCREDENTIALS_ONLY`，与`CreateProcessWithLogonW`.

> 登录，但仅在网络上使用指定的凭据。新进程使用与调用者相同的令牌，但系统会在 LSA 中创建一个新的登录会话，并且该进程使用指定的凭据作为默认凭据。
> 
> 此值可用于创建在本地使用与远程使用不同的凭据集的进程。这在没有信任关系的域间场景中很有用。
> 
> 系统不验证指定的凭据。因此，该进程可以启动，但它可能无法访问网络资源。

好的，所以由于它无法验证凭据并获取令牌，因此它必须将密码存储在内存中的某个位置，因为它必须稍后通过线路将它们传递给 SSPI 等。所以，我们可以从启动的进程中获取它们吗？`runas.exe`? 让我们来看看：

```
PS> runas /netonly /user:foo\bar powershell.exe
Enter the password for foo\bar: ****** 
```

我从字面上用于`foo\bar`上面的域和用户。如前所述，它未经验证。我输入`12345`了密码。上面的行将启动一个新的 powershell 实例。所以，从那个新实例中，让我们看看默认的网络凭据：

```
PS> [System.Net.CredentialCache]::DefaultNetworkCredentials

UserName                                           Domain
--------                                           ------ 
```

哦，好吧，不走运：那里什么都没有。我的猜测是，凭证被保护在内核内存的某个加密部分中，可能是 LSA（本地安全机构）无法被窥探进程所触及。

# unit-testing - 如何模拟 IDataReader.GetValues()？

> ID：15689071
> 
> 赞同：0
> 
> 时间：2013-03-28T18:04:55.937
> 
> 标签：unit-testing, moq

我需要使用 Moq 模拟对 IDataReader.GetValues(array) 的调用。GetValues 方法应使用 DataReader 中当前行的值填充“数组”并返回数据读取器字段计数。

这是我的模拟设置：

```
var data = new object[] { };

var reader = new Mock<IDataReader>();
reader.Setup(r => r.GetValues(data)).Callback<object[]>(d => {
    Array.Resize(ref d, 2);
    d[0] = "value 1";
    d[1] = "value 2";
}).Returns(2); 
```

...这是正在测试的代码（“_reader”是 Mock 对象）：

```
public int GetValues(object[] values)
{
    int result = _reader.GetValues(values);
    for (int i = 0; i < values.Length; i++)
    {
        // this is not executed because values.Length == 0
    }
    ... 
```

在上面的代码中，result == 2（好的模拟设置正在工作）但“值”永远不会被填充！

如何设置 Mock 对象以填充“值”数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-11-25T19:06:02.477

可以这样做

```
Mock<IDataReader> dataReader = new Mock<IDataReader>();
object[] copyToData = { "value 1", "value 2"};
dataReader.Setup(m => m.FieldCount).Returns(copyToData.Length);
dataReader.Setup(m => m.GetName(0)).Returns("Column1");
dataReader.Setup(m => m.GetFieldType(0)).Returns(typeof(string));

dataReader.Setup(m => m.GetName(1)).Returns("Column2");
dataReader.Setup(m => m.GetFieldType(1)).Returns(typeof(string));

dataReader.Setup(m => m.GetValues(It.IsAny<object[]>()))
    .Callback(new Action<object[]>(d =>
    {
        Array.Copy(copyToData, 0, d, 0, d.Length);
    }))
    .Returns(() => copyToData.Length);

dataReader.SetupSequence(m => m.Read())
    .Returns(true)
    .Returns(false); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T18:10:22.940

因为`data`在上面的代码中是空的。当您`object[]`在第一个实例中创建时，您将需要填充它，否则当您模拟调用时它不会有任何内容`IDataReader.GetValues`

# regex - 如何从以下字符串中提取 IP

> ID：15689075
> 
> 赞同：0
> 
> 时间：2013-03-28T18:05:04.837
> 
> 标签：regex, perl

```
$string  > show box detail
2 boxes:
1) Box ID: 1
       IP:                  127.0.0.1*
Interface:           1/1
 Priority:            31 
```

如何从上面的字符串中提取 IP 并额外检查 * ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:09:42.393

由于你只有一个看起来像 ip 的东西，你可以使用这个正则表达式：

```
(?:([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]) 
```

这就是它在[Debuggex](http://www.debuggex.com/?re=%28%3F%3A%28%5B0-9%5D%7C%5B1-9%5D%5B0-9%5D%7C1%5B0-9%5D%7B2%7D%7C2%5B0-4%5D%5B0-9%5D%7C25%5B0-5%5D%29%5C.%29%7B3%7D%28%5B0-9%5D%7C%5B1-9%5D%5B0-9%5D%7C1%5B0-9%5D%7B2%7D%7C2%5B0-4%5D%5B0-9%5D%7C25%5B0-5%5D%29&str=127.0.0.1)上的样子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:13:10.483

由于这看起来像一个文件，我的第一个假设是你想要一个单行：

```
perl -anlwe 'if ($F[0] eq "IP:") { print $F[1] }' input.txt 
```

否则，我建议使用软正则表达式，例如：

```
if ($foo =~ /IP:\s*(\S+)/) { 
    $ip = $1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T18:41:54.453

使用[Regexp::Common](http://search.cpan.org/perldoc/Regexp%3a%3aCommon%3a%3anet)：

```
#!/usr/bin/env perl

use 5.012;
use strict;
use warnings;

use Regexp::Common qw( net );

while (my $line = <DATA>) {
    my @ips = ($line =~ /($RE{net}{IPv4})/g)
        or next;
    say @ips;
}

__DATA__
$string  > show box detail
2 boxes:
1) Box ID: 1
       IP:                  127.0.0.1*
Interface:           1/1
 Priority:            31
2) Box ID: 2
       IP:                  10.10.1.1
Interface:           1/1
 Priority:            31 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T18:10:42.453

您可以使用它来匹配（显示为可选 *）

```
((\d{1,3}\.){3}\d{1,3}\*?) 
```

# facebook - 是否可以在 facebook 上删除当前用户的照片/相册？

> ID：15689076
> 
> 赞同：0
> 
> 时间：2013-03-28T18:05:14.277
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-php-sdk

那么，有没有办法通过 facebook Graph API 删除用户照片或相册？我看过[Delete ALBUM Facebook Graph API？](https://stackoverflow.com/q/4831324/1786117)，但我不太确定这是否是最新的。有没有办法用facebook提供的任何sdk来做到这一点？
（但是我更喜欢与 php sdk 相关的东西，因为我更熟悉它）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:05:14.337

我不这么认为（对于专辑），几天前我遇到了同样的问题，显然，应用程序没有能力进行这种 API 调用。

# java - 尝试异步连接到 Twitter 时活动关闭

> ID：15689080
> 
> 赞同：0
> 
> 时间：2013-03-28T18:05:29.813
> 
> 标签：java, android, twitter4j

我一直在尝试为 Android 编写一个 twitter 客户端（使用 twitter4j）。到目前为止的想法是有一个简单的 GUI，如果 SD 卡中没有带有 OAuth 令牌的文件，则使用 AsyncTask 连接到 Twitter API，获取授权 URL 并打开默认浏览器。但是，浏览器永远不会运行。根据我尝试修复此问题所做的不同修改，Activity 正常启动但浏览器永远不会启动或 Activity 崩溃。我已经到了有点沮丧和困惑的地步。有人可以指出我的代码有什么问题吗？

```
public class StatusActivity extends Activity {

private static final String TAG = "StatusActivity";
EditText editText;
Button updateButton;
File oauthfile = null;
public Context context = getApplicationContext();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_status);

    Log.d(TAG, "started");
    // Find views
    editText = (EditText) findViewById(R.id.editText); //
    updateButton = (Button) findViewById(R.id.buttonUpdate);

    oauthfile = new File("sdcard/auth_file.txt");

    //Check if the file with the keys exist
    if (oauthfile.exists()==false){
        Log.d(TAG, "file not created");
        Context context = getApplicationContext();
        Toast toast = Toast.makeText(context, "file not created.",    Toast.LENGTH_SHORT);
        toast.show();
        new Authorization(context).execute();

    }

}

public void openBrowser (View v){
    Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com"));
    startActivity(browserIntent);
    Log.d(TAG, "onclick");
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.status, menu);
    return true;
    }
}

class Authorization extends AsyncTask <String, Integer, String>{
String url = null;
private Context context;

 Authorization(Context context) {
        this.context = context.getApplicationContext();
    }

public void onPreExecute() {
       super.onPreExecute();
       Toast.makeText(context, "Invoke onPreExecute()", Toast.LENGTH_SHORT).show();         
      }

@Override
public String doInBackground(String... params) {
    ConfigurationBuilder configBuilder = new ConfigurationBuilder();
    configBuilder.setDebugEnabled(true)
//I have eliminated the keys from the question :)
    .setOAuthConsumerKey("XXXXXXXXXXXXXX")
    .setOAuthConsumerSecret("XXXXXXXXXXXXXXX");
    Twitter OAuthTwitter = new TwitterFactory(configBuilder.build()).getInstance();
    RequestToken requestToken = null;
    AccessToken accessToken = null;     
    do{
        try {
            requestToken = OAuthTwitter.getOAuthRequestToken();
            url = requestToken.getAuthorizationURL();
        } 
        catch (TwitterException ex) {
            ex.printStackTrace();
        }       
    }
    while (accessToken==null);
    return url;
}

protected void onPostExecute(String result) {
    super.onPostExecute(result);

    Toast.makeText(context, "Opening browser.", Toast.LENGTH_SHORT).show();

    Intent browserIntent = new Intent(Intent.ACTION_ALL_APPS, Uri.parse(url));
    context.startActivity(browserIntent);
}
} 
```

我知道至少检查令牌文件是否存在，因为出现“未创建文件”的 toast，并且如果我按下按钮，活动能够运行浏览器。该应用程序有权写入 SD 卡并使用互联网。提前致谢。

Logcat 跟踪：

```
03-28 19:02:32.816: E/AndroidRuntime(278): FATAL EXCEPTION: main
03-28 19:02:32.816: E/AndroidRuntime(278): java.lang.RuntimeException: Unable to     instantiate activity     ComponentInfo{com.versec.pardinus/com.versec.pardinus.StatusActivity}: java.lang.NullPointerException
03-28 19:02:32.816: E/AndroidRuntime(278):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
03-28 19:02:32.816: E/AndroidRuntime(278):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-28 19:02:32.816: E/AndroidRuntime(278):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-28 19:02:32.816: E/AndroidRuntime(278):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-28 19:02:32.816: E/AndroidRuntime(278):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-28 19:02:32.816: E/AndroidRuntime(278):  at android.os.Looper.loop(Looper.java:123)
03-28 19:02:32.816: E/AndroidRuntime(278):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-28 19:02:32.816: E/AndroidRuntime(278):  at java.lang.reflect.Method.invokeNative(Native Method)
03-28 19:02:32.816: E/AndroidRuntime(278):  at java.lang.reflect.Method.invoke(Method.java:521)
03-28 19:02:32.816: E/AndroidRuntime(278):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-28 19:02:32.816: E/AndroidRuntime(278):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-28 19:02:32.816: E/AndroidRuntime(278):  at dalvik.system.NativeStart.main(Native Method)
03-28 19:02:32.816: E/AndroidRuntime(278): Caused by: java.lang.NullPointerException
03-28 19:02:32.816: E/AndroidRuntime(278):  at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:100)
03-28 19:02:32.816: E/AndroidRuntime(278):  at com.versec.pardinus.StatusActivity.<init>(StatusActivity.java:30)
03-28 19:02:32.816: E/AndroidRuntime(278):  at java.lang.Class.newInstanceImpl(Native Method)
03-28 19:02:32.816: E/AndroidRuntime(278):  at java.lang.Class.newInstance(Class.java:1429)
03-28 19:02:32.816: E/AndroidRuntime(278):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
03-28 19:02:32.816: E/AndroidRuntime(278):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
03-28 19:02:32.816: E/AndroidRuntime(278):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:13:12.110

这就是导致您崩溃的原因。

```
public Context context = getApplicationContext(); 
```

您甚至在需要时都不会使用它，因此您可以摆脱这条线。

顺便说一句，我在查看您的代码时注意到的另一件事是：

```
oauthfile = new File("sdcard/auth_file.txt"); 
```

不要认为“sdcard/”路径是理所当然的。改用这个：

```
 File dir = Environment.getExternalStorageDirectory();
    File oauthfile = new File(dir, "auth_file.txt"); 
```

# ruby-on-rails - RoR 设计用户创建失败

> ID：15689086
> 
> 赞同：2
> 
> 时间：2013-03-28T18:05:49.567
> 
> 标签：ruby-on-rails, devise

我目前正在设置一个新的 Rails 应用程序。我尝试使用 Devise 进行用户身份验证，但它还没有工作。

我正在使用 rails 3.2、ruby 1.9.3 并设计 1.1.rc1

如果我尝试使用 app/views/devise/registrations/new.html.erb 创建新用户，我会收到**ActionController::UnknownAction**错误

**回溯**

```
Started POST "/users.user" for 127.0.0.1 at 2013-03-28 15:12:58 +0100
Processing by Devise::RegistrationsController#create as 
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"4z6pC4ZivRA/YkEzUgPtOCrRGtMx0eGcrD5VU/kPJyg=", "user"=>{"username"=>"test", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up", "name_prefix"=>:user}
DEPRECATION WARNING: ActionController::UnknownAction is deprecated! Use ::AbstractController::ActionNotFound instead. (called from service at /home/basti/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/httpserver.rb:138)
DEPRECATION WARNING: ActionController::UnknownAction is deprecated! Use ::AbstractController::ActionNotFound instead. (called from service at /home/basti/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/httpserver.rb:138)
DEPRECATION WARNING: ActionController::UnknownAction is deprecated! Use ::AbstractController::ActionNotFound instead. (called from service at /home/basti/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/httpserver.rb:138)
Completed 404 Not Found in 1ms

AbstractController::ActionNotFound (AbstractController::ActionNotFound):
  devise (1.1.rc1) lib/devise/controllers/internal_helpers.rb:57:in `is_devise_resource?'
  activesupport (3.2.13) lib/active_support/callbacks.rb:407:in`*run*_4273489613095160002__process_action_*4587107435389602145*_callbacks'
  activesupport (3.2.13) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.13) lib/active_support/callbacks.rb:385:in`_run_process_action_callbacks'
  activesupport (3.2.13) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.13) lib/abstract_controller/callbacks.rb:17:in`process_action'
  actionpack (3.2.13) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:30:in`block in process_action'
  activesupport (3.2.13) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.13) lib/active_support/notifications/instrumenter.rb:20:in`instrument'
  activesupport (3.2.13) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.13) lib/action_controller/metal/instrumentation.rb:29:in`process_action'
  actionpack (3.2.13) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.13) lib/active_record/railties/controller_runtime.rb:18:in`process_action'
  actionpack (3.2.13) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.13) lib/abstract_controller/rendering.rb:45:in`process'
  actionpack (3.2.13) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.13) lib/action_controller/metal/rack_delegation.rb:14:in`dispatch'
  actionpack (3.2.13) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:73:in`call'
  actionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:36:in`call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in`each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.13) lib/action_dispatch/routing/route_set.rb:612:in`call'
  warden (0.10.7) lib/warden/manager.rb:35:in `block in call'
  warden (0.10.7) lib/warden/manager.rb:34:in`catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/best_standards_support.rb:17:in`call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in`call'
  actionpack (3.2.13) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/params_parser.rb:21:in`call'
  actionpack (3.2.13) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in`context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/cookies.rb:341:in`call'
  activerecord (3.2.13) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.13) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in`call'
  actionpack (3.2.13) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.13) lib/active_support/callbacks.rb:405:in`*run*_438428526525500157_*call*_3808880092983494302__callbacks'
  activesupport (3.2.13) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.13) lib/active_support/callbacks.rb:385:in`_run_call_callbacks'
  activesupport (3.2.13) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.13) lib/action_dispatch/middleware/callbacks.rb:27:in`call'
  actionpack (3.2.13) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/remote_ip.rb:31:in`call'
  actionpack (3.2.13) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/show_exceptions.rb:56:in`call'
  railties (3.2.13) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in`block in call'
  activesupport (3.2.13) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.13) lib/rails/rack/logger.rb:16:in`call'
  actionpack (3.2.13) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in`call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.13) lib/active_support/cache/strategy/local_cache.rb:72:in`call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/static.rb:63:in`call'
  railties (3.2.13) lib/rails/engine.rb:479:in `call'
  railties (3.2.13) lib/rails/application.rb:223:in`call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.13) lib/rails/rack/log_tailer.rb:17:in`call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /home/basti/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/httpserver.rb:138:in`service'
  /home/basti/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /home/basti/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/server.rb:191:in`block in start_thread'

Rendered /home/basti/.rvm/gems/ruby-1.9.3-p392/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/unknown_action.erb within rescues/layout (0.6ms) 我已经生成了我的设计：

```
rails generate devise_install
rails generate devise_views
rake db_migrate
rake routes 
```

我的用户模型如下所示：

**应用程序/模型/user.rb**

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable, :validatable
  attr_accessible :username, :email, :password, :password_confirmation
end
```

**配置/初始化程序/devise.rb**

```
 Devise.setup do |config|
  config.mailer_sender = "please-change-me@config-initializers-devise.com"
  config.authentication_keys = [ :username ]
  require 'devise/orm/active_record'
end 
```

**用户看起来像**

```
 => User(id: integer, email: string, encrypted_password: string, password_salt: string, reset_password_token: string, remember_token: string, remember_created_at: datetime, sign_in_count: integer, current_sign_in_at: datetime, last_sign_in_at: datetime, current_sign_in_ip: string, last_sign_in_ip: string, username: string, created_at: datetime, updated_at: datetime)
```

有任何想法吗？

```

# java - 多部分文件提交从未命中服务器方法

> ID：15689090
> 
> 赞同：4
> 
> 时间：2013-03-28T18:05:57.587
> 
> 标签：java, javascript, jquery, spring-mvc

我有一个 ajax 调用：发生的情况是我单击了一个图像，该图像单击了我不希望显示的“输入文件”。当输入 val() 更改时`uploadListener()`，调用方法，这基本上是一个将文件获取到服务器的 ajax 方法“将其上传到服务器”代码如下所示：html：

```
<img id="${assayAssessRequest.id}" src="[@spring.url '/images/buttons/upload.jpg'/]" onclick="uploadFile(this);" title="Upload File" />
<form id="uploadForm" action="[@spring.url '/assay/designability/uploadFile.htm'/]" method="POST" enctype="multipart/form-data">
        <div style="display: none;">
        [@spring.formInput path="multiPartBean.file" fieldType="file" attributes="title='path' class='upload' accept='.txt,.csv,.zip'" /]
        [@spring.formHiddenInput path="multiPartBean.fileName" attributes=" onchange='uploadListener();'class='uploadFileName'" /]
        [@spring.bind "multiPartBean"/]
        </div>
        <input type="submit" id="uploadButton" value="upload" />
    </form> 
```

脚本：

```
function uploadFile(){
    document.getElementById('inputFile').click();
}

function uploadListener(){
   $('#uploadForm').attr("action","[@spring.url    '/assay/designability/uploadFile.htm'/]");
   alert($('#uploadForm').attr('action'));
   this.document.getElementById("uploadForm").submit = true;
   alert("After Submit");
   return false;
} 
```

服务器控制器：

```
@Controller
@PreAuthorize("isAuthenticated()")
@RequestMapping("/assay/designability")
@SessionAttributes({"assayAssessmentsInitializersBean","assayAssessmentsRequestsDetailsBean"})
public class AssayDesignabilityController extends AssayBaseController {

    @RequestMapping(value = "/uploadFile",method= RequestMethod.GET)
    public String uploadFile(@RequestParam(value = "file")Object file){
        MultipartFile multipartFile=(MultipartFile)file;

        logger.info(multipartFile.getName());
        return multipartFile.getName();
    }
} 
```

现在当我做所有这些时，响应让我胡说八道，当我尝试调试时，我从来没有进入控制器方法。有什么帮助吗？？

**编辑：** 现在我尝试提交它我已经更新了代码并且我有相同的行为没有响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T19:05:26.980

感谢@Ian，我通过避免ajax 调用和重新实现我的代码解决了我的问题。

这是代码：

Html*加*Freemarker

```
<form id="uploadForm" action="#" method="POST" enctype="multipart/form-data">
    <div class="instruction popup_inst">
        <span class="popup_logo">[@spring.message "pandaLogo"/]</span>

        <div class="float_right">
            <input type="button" id="cancelBtn" class="btn" onclick="refreshParentTable();closePopup();" value="[@spring.message "cancelButton"/]" />
            <input class="btn" type="submit" id="submit" onclick="validateFileInput();" value="[@spring.message "uploadButton"/]" />
        </div>

    </div>
    <span class="popup_title">[@spring.message "uploadFile"/]</span>
    <div class="popup_container">
        [@spring.bind "assayAssessmentsRequestBean"/]
        [@spring.formInput path="assayAssessmentsRequestBean.designabilityFile.file" fieldType="file" attributes="title='path' class='upload' accept='.txt,.csv,.zip'" /]
        [@spring.formHiddenInput path="assayAssessmentsRequestBean.designabilityFile.fileName" attributes="class='uploadFileName'" /]
        [@spring.formHiddenInput path="assayAssessmentsRequestBean.dateOfAssessment" attributes="" /]
        [@spring.formHiddenInput path="assayAssessmentsRequestBean.id" attributes="" /]
    </div>
    <input id="uploadfile" type="hidden" value="${uploadfile}"/>
</form> 
```

控制器：

```
@RequestMapping(value = "/uploadFile",method= RequestMethod.POST)
    public ModelAndView uploadFile(@ModelAttribute(value = "assayAssessmentsRequestBean")AssayAssessmentsRequestBean assayAssessmentsRequestBean,HttpSession session) throws PanDaApplicationException {
//mycode
} 
```

根据这次经验，我建议 evreyone 避免通过 ajax 调用发送文件。我使用弹出窗口创建表单并提交上传操作。感谢大家试图帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T15:36:54.343

如果我没看错，提交动作指向“uploadfile.HTM”

`$('#uploadForm').attr("action","[@spring.url '/assay/designability/uploadFile.htm'/]");`

但是控制器中的方法仅映射到uploadFile（没有.htm）

```
@RequestMapping(value = "/uploadFile",method= RequestMethod.GET) 
```

也许您的 web.xml / servlet-spring.xml 上有另一个配置使这成为可能，但否则，这可能是问题所在。

希望这可以帮助

问候

# jquery - 即使我离开然后使用Jquery返回页面，如何将内容保留在页面上

> ID：15689095
> 
> 赞同：2
> 
> 时间：2013-03-28T18:06:29.867
> 
> 标签：jquery, jquery-mobile, local-storage

目前我有一个使用 Jquery Mobile 创建的页面，页面上的内容是基于 URL id 形成的，例如 this `http://domainname/page?id=2`。当页面事件`beforepageshow`被触发时，我获取内容的方式是一个 ajax 请求，使用这个 jquery 语句`$(document).on( "pagebeforeshow", "#player", function( e )`。这很好用，但是我想知道即使我离开页面时如何保留这些内容。

例如，如果我回去，我应该去一个列表，但是如果按下按钮，它应该带我回到播放器页面，并显示我从页面上的 ajax 请求和正确的 URL 获得的所有内容。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:02:24.137

有几种方法可以实现这一点。您将需要存储数据或在页面转换期间移动数据。以下是一些可能的解决方案：

## 页面转换之间的数据/参数存储

在页面转换期间，可以将参数从一个页面发送到另一个页面。它可以通过几种方式完成。

参考：[https ://stackoverflow.com/a/13932240/1848600](https://stackoverflow.com/a/13932240/1848600)

**解决方案1：**

您可以使用 changePage 传递值：

```
$.mobile.changePage('page2.html', { dataUrl : "page2.html?paremeter=123", data : { 'paremeter' : '123' }, reloadPage : true, changeHash : true }); 
```

并像这样阅读它们：

```
$("#index").live('pagebeforeshow', function () {
    var parameters = $(this).data("url").split("?")[1];;
    parameter = parameters.replace("parameter=","");  
    alert(parameter);
}); 
```

> 这仅适用于多 html 页面格式。

**解决方案2：**

或者，您可以创建一个持久的 javascript 对象用于存储目的。只要 ajax 用于页面加载（并且页面不会以任何方式重新加载），该对象将保持活动状态。

```
var storeObject = {
    firstname : '',
    lastname : ''
} 
```

示例：http: [//jsfiddle.net/Gajotres/9KKbx/](http://jsfiddle.net/Gajotres/9KKbx/)

**解决方案3：**

您还可以像这样访问上一页的数据：

```
$('#index').live('pagebeforeshow', function (e, data) {
    alert(data.prevPage.attr('id'));
}); 
```

**prevPage**对象保存完整的前一页。

**解决方案4：**

作为最后一个解决方案，我们有一个漂亮的 localStorage 的 HTML 实现。它仅适用于 HTML5 浏览器（包括 Android 和 iOS 浏览器），但所有存储的数据通过页面刷新保持不变。

```
if(typeof(Storage)!=="undefined") {
    localStorage.firstname="Dragan";
    localStorage.lastname="Gaic";            
} 
```

示例：http: [//jsfiddle.net/Gajotres/J9NTr/](http://jsfiddle.net/Gajotres/J9NTr/)

这里提到的所有内容以及更多内容都可以在我的其他**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**或**[这里](https://stackoverflow.com/a/14469041/1848600)**找到。只需搜索名为：**Data/Parameters storage between page transitions的章节**

# opengl - OpenGL重复纹理部分

> ID：15689096
> 
> 赞同：2
> 
> 时间：2013-03-28T18:06:42.993
> 
> 标签：opengl

通常我使用从 0 到 1 的纹理坐标。

```
glTexCoord2f(0, 0);
glTexCoord2f(1, 0);
glTexCoord2f(1, 1);
glTexCoord2f(0, 1); 
```

如果我需要纹理部分（剪辑），我使用 -

```
glTexCoord2f(Texture.Left / Texture.Width, Texture.Top / Texture.Height);
glTexCoord2f(Texture.Right / Texture.Width, Texture.Top / Texture.Height);
glTexCoord2f(Texture.Right / Texture.Width, Texture.Bottom / Texture.Height);
glTexCoord2f(Texture.Left / Texture.Width, Texture.Bottom / Texture.Height); 
```

如果我需要重复纹理 A x B 次，我使用 -

```
glTexCoord2f(0, 0);
glTexCoord2f(A, 0);
glTexCoord2f(A, B);
glTexCoord2f(0, B); 
```

虽然如果我只需要重复部分纹理（剪辑）这不起作用 -

```
glTexCoord2f(Texture.Left / Texture.Width * A, Texture.Top / Texture.Height * B);
glTexCoord2f(Texture.Right / Texture.Width * A, Texture.Top / Texture.Height * B);
glTexCoord2f(Texture.Right / Texture.Width * A, Texture.Bottom / Texture.Height * B);
glTexCoord2f(Texture.Left / Texture.Width * A, Texture.Bottom / Texture.Height * B); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:44:03.277

您必须编写自定义片段着色器才能在纹理图集内部的图块上重复纹理。

或者将该图块移动到您想要重复的边缘并像往常一样使用 >1 和/或 <0 texcoords。

# java - 你如何递归地计算数组中负数的数量（Java）？

> ID：15689097
> 
> 赞同：0
> 
> 时间：2013-03-28T18:06:43.033
> 
> 标签：java, arrays, recursion, negative-number

我需要使用这种方法：

```
public static int countNegative(double[] numbers, int count){ } 
```

计算双精度数组中负数的数量。如果我可以包含第三个参数 sum，我可以很容易地做到这一点，但我只能使用数组和一个 int。我完全被困住了。我已经尝试了几件事，但无法做到正确。我已经得到了从数组大小到 ArrayIndexOutOfBounds 的所有内容，但从来没有正确的答案。谁能帮我解决这个问题？

-编辑-

那么这里是确切的任务：

> > 编写一个程序，从标准输入读取一系列数字（不是必需的整数），直到读取到 0，并将它们存储在一个数组中，类似于您在赋值 2 中所做的。这部分是使用迭代完成的。您可以假设不会有超过 100 个数字。
> 
> 然后计算存储在数组中的最大数，负数的计数，并使用递归计算正数的总和。因此，您将在 Assignment9 类中创建递归方法 findMax、countNegative 和 computeSumPositive，它们将由 main 方法调用。
> 
> 具体来说，必须实现以下递归方法（这些方法不应包含任何循环）：
> 
> ```
> public static double findMax(double[] numbers, int count)  -> It finds the maximum number in the array, count is the number of elements 
> ```
> 
> 在数组中
> 
> public static int countNegative(double[] numbers, int count) -> 计算负整数
> 
> public static double computeSumPositive(double[] numbers, int count) -> 对正整数求和

findMax() 很简单：

```
public static double findMax(double[] numbers, int count){
        if(numbers.length - 1 == count)
            return numbers[count];
        else 
            return Math.max(numbers[count], findMax(numbers, count+1));
    } 
```

这是我最近对 ​​countNegative 的尝试。它只返回 99（我用 100 个元素初始化了数组）：

```
public static int countNegative(double[] numbers, int count){
        int i=0;
        if(numbers[count]<0)
            i=1;
        if(numbers.length-1==count)
            return count;
        else
            return i+countNegative(numbers,count+1);
     } 
```

如果我能算出这个负数，我应该能够算出 computeSumPositive。

计数可以是你需要的任何东西。我更多地将它用作 findMax 中的索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:19:29.990

有什么用`count`？如果它是有意义的`index`：

```
public static int countNegative(double[] numbers, int index)
{
    if(index == numbers.length) return 0;
    return (numbers[index] < 0 ? 1 : 0) + countNegative(numbers, index + 1);
} 
```

并这样称呼它：

```
int count = countNegative(array, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:09:51.130

使用`int`参数作为`numbers`数组的索引。确定当前索引的值是否为负（此处为 0 或 1）。然后返回该 0/1 计数和查看下一个索引位置的递归调用的总和。基本情况是当你跑过数组的末尾时，它返回 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T18:10:43.793

```
public static int countNegative(double[] numbers, int count){  
   if(count == numbers.length){  
        return 0;  
    }  
    int sum = countNegative(numbers, count + 1);  
    if(numbers[count] < 0){  
          sum++;  
    }  
    return sum;  
} 
```

您调用此方法：`countNegative(numbers, 0);`
`count`将用作递归的基本条件。您将结果返回堆栈

例子：

```
double a[]={-12.0,1.0,0.0,23.0,-23.0,-9.0};  
System.out.println(countNegative(a, 0)); 
```

我进入`3`控制台

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T18:09:54.627

首先为具有 0 个元素的数组实现它。用于 1 个元素的数组。对于更多的数组，使用以前的结果...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T18:38:14.850

这是它的工作方式

```
public static int countNegative(double[] numbers){
    int result = numbers[0] < 0 ? 1 : 0;

    if(numbers.length > 1) {
        result += countNegative(Arrays.copyOfRange(numbers, 1, numbers.length));
    }

    return result;
} 
```

由于递归的工作方式，您不需要 count 参数。当您使用数组调用该函数时，它首先确定第一个元素是否小于零，使其为负数。接下来，它检查数组是否有多个元素，如果有，它会使用数组的第一个元素以外的所有元素调用自身，并将其添加到结果中。

之后，它返回结果，这取决于它是否在递归调用中，要么将其添加到它上面的调用结果中，要么将其返回给调用它的人。

# ruby-on-rails - 模型内常量的 I18n

> ID：15689099
> 
> 赞同：1
> 
> 时间：2013-03-28T18:06:46.747
> 
> 标签：ruby-on-rails, rails-i18n

我有一个用户模型，它具有在模块中定义的角色。简而言之，

```
class User < ActiveRecord::Base
  (...)
  module Roles
    Admin           = 0
    SuperPrefeitura = 1
    Prefeitura      = 2
    Instituicao     = 3
  end

  def is_admin?
    role == Roles::Admin
  end
  (...)  
end 
```

好的。现在，我想使用 i18n 显示用户的角色。一个解决方案是

```
def role_name
  case role
  when Roles::Admin
    :admin
  end
  (...)
end 
```

并翻译：admin

但它看起来不像一个`good`解决方案。

这样做的`best`方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T19:23:45.433

两个月后安德！:D

有一个宝石可以完全解决我的问题。 [枚举](https://github.com/brainspec/enumerize)。

示例用法（来自 github）：

模型：

```
class User < ActiveRecord::Base
  extend Enumerize

  enumerize :sex, in: [:male, :female]

  enumerize :role, in: [:user, :admin], default: :user
end 
```

语言环境：

```
en:
  enumerize:
    user:
      sex:
        male: "Male"
        female: "Female" 
```

# linq - 如何使用 linq 在列表/IEnumerable 中查找子元素？

> ID：15689106
> 
> 赞同：0
> 
> 时间：2013-03-28T18:07:01.347
> 
> 标签：linq, linq-to-xml

我有一个 XML 结构，我解析并作为 IEnumerable 返回：

```
 <menuItem Id="1">
      <menuItem Id="2">
            <menuItem Id="5">
                  <menuItem Id="9">
                       <criterion></criterion>
                  </menuItem>
             </menuItem>
       </menuItem>
  </menuItem>
  <menuItem Id="10>
    /// huge xml document from here on... 
```

我使用这个类解析它：

```
 public static  class XmlConverter
{

    public static IEnumerable<MenuItem> Parser()
    {
        using (var fileStream = new FileStream(HttpContext.Current.Server.MapPath("~/DataSource/MenuNavigation.xml"), FileMode.Open))
        {
            return Read(fileStream);
        }
    }

    private static IEnumerable<MenuItem> Read(Stream stream)
    {
        return (IEnumerable<MenuItem>)XmlSerializer().Deserialize(stream); ;
    }

    private static XmlSerializer XmlSerializer()
    {
        return new XmlSerializer(typeof(List<MenuItem>), GetXmlRootAttribute());

    }

    private static XmlRootAttribute GetXmlRootAttribute()
    {
        return new XmlRootAttribute() { ElementName = "Navigation", IsNullable = true };
    }
} 
```

它被解析成这个对象：

```
 public class MenuItem
{
    [XmlAttribute("Id")]
    public int Id { get; set; }
    [XmlAttribute("Name")]
    public string Name { get; set; }
    [XmlAttribute("Description")]
    public string Description { get; set; }
    [XmlAttribute("Link")]
    public string Link { get; set; }
    [XmlAttribute("Role")]
    public string RoleId { get; set; }
    [XmlAttribute("Alert")]
    public string Alert { get; set; }
    [XmlElement("Criterion")]
    public List<Criterion> Criteria { get; set; }

    private List<MenuItem> _menuItems = new List<MenuItem>();

    [XmlElement("MenuItem")]
    public MenuItem[] MenuItems
    {
        get { return _menuItems.ToArray(); }
        set
        {
            _menuItems.Clear();
            if (value != null)
            {
                _menuItems.AddRange(value);
            }
        }
    }
} 
```

当我对返回的 IEnumerable 进行 Linq 查询时，我使用：

```
 var criteria = menuItems.Where(x => x.Id == menuItem.Id)
                         .Select(x => x.Criteria)
                         .FirstOrDefault(); 
```

问题是这里的 IEnumerable 只有 14 项。那些父项，所以如果我正在寻找 Id == 9 则找不到它，因为它是 Id 1 的子元素。

如何编辑上面的 linq 语句，以便它使用名为 menuItem 的元素检查每个级别，而不仅仅是相关 Id 的父级？

更新：

IEnumerable 看起来像这样：

```
 Count=14
 +MenuItem //nested menuItem
  Name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:31:55.350

您可以`flatten`先进行层次结构（linq 本身对此没有任何支持） - 然后做您正在做的事情。

例如[，如何使用 LINQ to Entity 选择递归嵌套实体](https://stackoverflow.com/questions/5422735/how-do-i-select-recursive-nested-entities-using-linq-to-entity/5423024#5423024)

...进而

```
var item = menuItems.Flatten(y => y.MenuItems).Where(x => x.Id == 5)
    .FirstOrDefault(); 
```

# c++ - 使用 pugiXml 读取 XML 文档

> ID：15689116
> 
> 赞同：1
> 
> 时间：2013-03-28T18:07:49.617
> 
> 标签：c++, qt, pugixml

我在使用 pugiXml 解析 xml 文档时遇到问题，在我看来一切都是正确的，但是这段代码不起作用:(

```
void MainWindow::open()
{
    QString fileName = QFileDialog::getOpenFileName(this,"Open");
    xml_document doc;
    doc.load_file(fileName.toStdString().c_str());

    for (pugi::xml_node node : doc.child("Person"))
    {
        qDebug(node.child_value("nom"));
        qDebug(node.child_value("Age"));
    }
} 
```

xml文件格式：

```
<?xml version="1.0"?>
<Persons>
<Person>
    <nom>Med</nom>
    <Age>12</Age>
</Person>
<Person>
    <nom>Nasr</nom>
    <Age>14</Age>
</Person>
<Person>
    <nom>Souad</nom>
    <Age>52</Age>
</Person>
</Persons> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T02:51:49.630

最可能的原因是您应该使用 doc.child("Persons")。

在您的情况下，文档对象有一个子 Persons，它有几个 Person 子代。doc.child("Person") 找不到节点并返回空句柄。

话虽如此，不要忘记检查 load_file 返回值。

# arrays - 在已知目标和已知数组大小的情况下，如何在 Actionscript 3 中搜索二维数组？

> ID：15689119
> 
> 赞同：0
> 
> 时间：2013-03-28T18:07:57.350
> 
> 标签：arrays, actionscript-3, flash

我正在构建一个棋盘游戏，目前正在处理玩家的运动。我想限制玩家，使他们只能在游戏板本身内移动。棋盘存储在嵌套数组中，Actionscript 3 等效于 2D 数组——如数组 [x][y]。我知道长度，也知道我要寻找的目标。我需要做的就是确定该目标是否存在于数组中，以确认玩家是否可以真正移动到该位置，并返回真或假。任何人都可以提供任何建议吗？这似乎不是一个非常容易的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:26:36.930

我没有发表评论，因为它太长了，虽然这不是一个详尽的答案，但你需要澄清几件事：

1.  它可能是也可能不是模拟二维数组的最佳选择。其他一些选择包括：单个一维数组，您可以在其中访问项目的模宽度。这样做的好处是查找速度更快，并且许多在数组上工作的内置函数可以开箱即用。缺点是行插入操作 - 您必须自己编写，而将行插入数组数组是微不足道的。另一种选择 - 使用康托尔的映射函数（这里的例子：[将两个整数映射到一个，以独特和确定的方式](https://stackoverflow.com/questions/919612/mapping-two-integers-to-one-in-a-unique-and-deterministic-way))，有不止一个这样的带有整数哈希表的函数。这样做的好处是占用的空间与实际值一样多（如果地图上只有很少的元素，则占用的内存更少）。在这样的数组中搜索项目比在普通数组中搜索要快得多（因为您不会查看“空”项目 - 甚至不存在。但是，您需要自己编写很多功能。

2.  寻找路径是许多算法的主题，这些算法都被称为[“路径寻找算法”](http://en.wikipedia.org/wiki/Pathfinding)。最好的选择会因您的情况而异。在你选择一个（或发明你自己的）之前，回答这样的问题很重要：

    *   所有运动的成本都相同吗？
    *   是否允许搬回去，甚至只是重新访问同一地点？
    *   您是否正在寻找能够保证您找到最佳方式或任何方式的解决方案？
    *   如果运动不是直截了当的，您是否有可能找到一个估计中间解决方案成本的启发式函数？
    *   最后，你在优化什么？速度？记忆？

但是，如果您只是想知道该点是否在矩形边界内，我只需要`Rectangle`地图的大小并使用[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash /geom/Rectangle.html#containsPoint%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Rectangle.html#containsPoint%28%29) - 这将使您无需编写类似于 Artiace 答案中的开关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:22:56.340

假设您的数组如下所示：

```
var board:Array = [
    [a,0,0],
    [0,b,0],
    [0,0,c]
] 
```

然后检查板中间是否存在

```
if (board[1][1] != 0) {
    trace(board[1][1]) // outputs "b"
} 
```

因此，如果您想向`b`任何方向移动一个街区，您通常可以尝试...

```
function move(row:int, col:int, direction:string):void {
    switch (direction) {
        case "up":
            if (row - 1 >= 0 && row - 1 < board.length) {
                board[row-1][col] = board[row][col];
                board[row][col] = 0;
            }
            break;
        case "down":
            if (row + 1 >= 0 && row + 1 < board.length) {
                board[row+1][col] = board[row][col];
                board[row][col] = 0;
            }
            break;
        case "left":
            if (col - 1 >= 0 && col - 1 < board[row].length) {
                board[row][col - 1] = board[row][col];
                board[row][col] = 0;
            }
            break;
        case "right":
            if (col + 1 >= 0 && col + 1 < board[row].length) {
                board[row][col + 1] = board[row][col];
                board[row][col] = 0;
            }
            break;
    }
} 
```

# ios - 实体计数上的神奇记录 KVO

> ID：15689120
> 
> 赞同：1
> 
> 时间：2013-03-28T18:08:01.623
> 
> 标签：ios, objective-c, core-data, magicalrecord

是否可以观察特定实体（特别是实体的计数）并在它发生变化时运行方法？

我正在使用`Magical Data`和`Core Data`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:30:02.027

Yes. MagicalRecord does not inhibit an existing core data functionality. KVO is built into core data and you should be able to observe property changes just fine

# primefaces - 向导不进入下一步

> ID：15689123
> 
> 赞同：0
> 
> 时间：2013-03-28T18:08:12.970
> 
> 标签：primefaces, wizard

我在对话框中有 p:wizard 。当我单击下一个按钮时，什么也没有发生。我什至放了 h:messages 来捕捉任何验证问题。但什么也没有出现。这是我的代码：

```
 <html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <cc:interface>
        <cc:attribute name="actionNewComplete" required="false"/>
        <cc:attribute name="update" required="false"/>
    </cc:interface>
    <cc:implementation>
        <h:form prependId="false" id="formCreateOffre">
            <h:messages showDetail="true"/>
            <p:wizard id="wizardOffre" widgetVar="widgetWizardOffre" showNavBar="false" flowListener="#{offreController.handleFlow}">
                <p:tab id="tabOffre" title="Offre">
                    <p:panelGrid styleClass="ui-net-table">
                        <p:row>
                            <p:column>
                                <p:outputLabel value="#{bundle.CreateOffreLabel_participant}" for="participant" />
                                <p:inputText styleClass="text" style="width: 50px;" id="participant" value="#{offreController.selected.participant}" title="#{bundle.CreateOffreTitle_participant}" />
                            </p:column>
                        </p:row>

                        <p:row>
                            <p:column>
                                <p:outputLabel value="#{bundle.CreateOffreLabel_rendezvous}" for="rendezvous" />
                                <p:calendar styleClass="text" id="rendezvous" value="#{offreController.selected.rendezvous}" disabled="#{offreController.selected.realisation eq null}" title="#{bundle.CreateOffreTitle_rendezvous}">
                                    <p:ajax event="dateSelect" update="delais"/>
                                </p:calendar>
                            </p:column>
                        </p:row>                                             

                    </p:panelGrid>
                </p:tab>
                <p:tab id="tabOffreClient" title="Client">
                    clients
                </p:tab>
                <p:tab id="tabOffreActivite" title="Activité">
                    activités
                </p:tab>
                <p:tab id="tabOffreService" title="Service">
                    services
                </p:tab>
            </p:wizard> 
            <p:commandButton value="Précédent" onclick="widgetWizardOffre.back();" icon="ui-icon-seek-prev"/>
            <p:commandButton value="Suivant" onclick="widgetWizardOffre.next();" icon="ui-icon-seek-next" iconPos="right"/>
        </h:form>
    </cc:implementation>
</html> 
```

这是bean的代码。

```
@ManagedBean(name = "offreController")
@SessionScoped
public class OffreController extends AbstractController<Offre> {

    @ManagedProperty(value = "#{navigationController}")
    private NavigationController navigation;
    @EJB
    private app.tfe.netescape.business.OffreFacade ejbFacade;

    public OffreController() {
    }

    public String handleFlow(FlowEvent event) {
        return event.getNewStep();
    } 
```

调用 flowListener 方法并返回下一步，但没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T04:33:35.940

确保您在代码中引用的每个 bean 属性都有一个 getter 和 setter。如果 PrimeFaces 无法同时找到 getter 和 setter，那么 PrimeFaces 将以这种方式在向导步骤中不正常地失败 - 即使对于您只是阅读的属性也是如此。

附录：此外，getter 和 setter 应该*只做*一个 get 和一组本地值。PrimeFaces 不能很好地处理其他 getter 和 setter（我无法解释为什么这不起作用，但我确实观察到了它）。如果您有任何其他逻辑，则应在您的侦听器中对其进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T07:58:41.990

你用的是什么版本的primefaces？

如果是 5.1 版更改事件 onclick：

onclick="widgetWizardOffre.next();"

由--->

onclick="PF('widgetWizardOffre').next();"

并使用相同的事件返回： onclick="PF('widgetWizardOffre').back();"

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-01T12:16:28.390

您已经隐藏了导航栏（下一步和后退按钮），那么导航栏如何工作？删除`showNavBar="false"`，默认为true。

# sql - 一列是否可以有两个外键

> ID：15689127
> 
> 赞同：1
> 
> 时间：2013-03-28T18:08:17.040
> 
> 标签：sql, sql-server, tsql, database-design

我很喜欢用 T-SQL 编码，但对 db 设计很陌生。我有

1.  带有 PK_Department 的部门表
2.  带有 PK_Loinc 的 loinc 代码/测试信息表
3.  带有 PK_nonLoinc 的非 loinc 代码/测试信息的（不同结构的）表。

我想在 (PK_Department) <--> (PK_Loinc OR PK_nonLoinc) 之间建立一对一的关系

有没有办法在 T-SQL 中使用两个 FK 来设置这种关系？

如果没有，我想我可以设置一个包含三列的表 LoincAndNonLoincCodes，`PK_union, PK_Loinc and FK_nonLoinc -- where (FK_Loinc is filled ExclusiveOR FK_nonLoinc is filled)`然后设置一个链接的表`FK_UNION`，`FK_Department`但理想情况下我可以在不创建另一个表的情况下执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:07:16.813

我认为您正在尝试将每个部门与给定的观察（即 LOINC 中的“O”）相关联。

问题不在于 Department 对象，而在于“Observation”对象。Observation 是一个类型层次结构。抽象观察可以是具体的非 LOINC 观察或具体的 LOINC 观察。关系模型不擅长建模类型层次结构。有 3 个选项可用于对观察进行建模：

1.  使用一张包含 LOINC 和非 LOINC 代码的观察表。在这种情况下，PK 将是类型和代码属性的组合键，并包含 LOINC 和非 LOINC 代码的所有属性。然后你可以对这个观察表有一个 1:1 的 FK。

2.  一张表用于非 LOINC 代码，一张表用于 LOINC 代码。在这种情况下，您遇到了问题中所述的问题。

3.  三张桌子。一种用于观察，一种用于非 LOINC 观察，一种用于 LOINC 观察。然后对观察表进行 1:1 FK。

这是对象/关系阻抗失配问题的经典说明。

# apache-flex - flex air 移动发送带有本机扩展 ANE 的 SMS

> ID：15689128
> 
> 赞同：0
> 
> 时间：2013-03-28T18:08:19.123
> 
> 标签：apache-flex, flex4.6, air-native-extension

我尝试运行： [http ://www.smallscreendesign.com/2011/09/29/air-native-extensions-rock/](http://www.smallscreendesign.com/2011/09/29/air-native-extensions-rock/)

我下载了代码并在 Flash Builder 4.6 中导入了项目文件夹 (AndroidExtensions_Demo)，将 air 版本更改为 3.1，将 flex 编译器更改为 4.6，因为这是我正在使用的并在设备上运行它。

但是，当我单击发送按钮时，出现以下错误。

*TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 com.ssd.ane::AndroidExtensions$/get context()[/Users/anto/git/Android-AIR-Extensions/AndroidExtensions/src/com/ssd/ane/AndroidExtensions.as:158] 在 com.ssd。 ane::AndroidExtensions$/shareText()[/Users/anto/git/Android-AIR-Extensions/AndroidExtensions/src/com/ssd/ane/AndroidExtensions.as:48]*

是否有另一种使用 Flex Mobile 发送 SMS 的方法？我想通过按“发送”或“确定”按钮来避免手动发送 SMS 过程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T00:01:36.723

上报的异常是指在 ANE 的上下文设置过程中失败。它应该主要以许多不同的方式与项目配置相关。

确保您在项目中设置了正确的 ANE 路径，并请考虑完全重建 ANE，包括本机 (Android) 代码，以避免进一步的问题。

**编辑：**
不幸的是，AIR 没有提供任何其他本地方式来发送 SMS 保存调用`navigateToUrl()`使用`sms:`uri 方案（例如：）`navigateToUrl("sms:5551234567");`。但是，这种方式将显示系统 SMS 编辑器，并且您也不能指定任何正文。

以完整的编程方式发送 SMS 的唯一方法是编写自己的 ANE 并利用 Android API 来完成任务。

# java - 在 jsp 中填充对象的向量

> ID：15689133
> 
> 赞同：-3
> 
> 时间：2013-03-28T18:08:29.080
> 
> 标签：java, jsp, servlets, vector, jstl

我在我的 servlet 中有一个对象向量，我枚举了它，以便我可以将它们一个一个地填充到一个 jsp 页面中，我想像这样：

```
Enumeration<codes> ls = codes_found.elements();
            while (ls.hasMoreElements()){
                codes code=(codes)ls.nextElement();
                out.println("Code ID: "+code.getCode_id()+" Code Description: "+code.getCode_descr()+"<br/ >");
            } 
```

有人可以告诉我如何像这样在 jsp 中填充它们吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:51:15.007

我想到了 ：）。我把我`Vector<codes>`的 servlet 放在一个会话中：

```
session.setAttribute("codes", codes_found); 
```

然后我使用 jstl 获得会话属性：

```
<c:forEach items="${codes}" var="item">
    <input name="id" value="${item.code_id}">
    <input name="id" value="${item.code_descr}"></c:forEach> 
```

我不知道使用 jstl`${codes}`你得到了实际的对象。现在我知道 ：）。

# mysql - mysql查询仅针对数字运行

> ID：15689135
> 
> 赞同：0
> 
> 时间：2013-03-28T18:08:33.307
> 
> 标签：mysql, mysql-num-rows

```
 $username = $_POST['username'];
    $password = $_POST['password'];
    $passworda = $_POST['passworda'];
    $email = $_POST['email'];

    if ($password == $passworda){
        echo 'this is the user name to be chacked:' .$username .'<br>';
        $query = "SELECT username FROM mishta where username=$username";
        $queryrun = mysql_query($query);
        echo $queryrun .'<br>';
        echo mysql_num_rows($queryrun) .'<br>';

        if (mysql_num_rows($queryrun)!=1){
            mysql_query("INSERT INTO mishta(id, username, password, email) VALUES ('', '$username','$password','$email')");
        }   
        else{
            echo 'user already exist';
        } 
```

你好呀，

我正在尝试制作一个简单的注册表单，我从 html 表单中获取用户名，并且我想确保它不存在于我的数据库中。问题是，每当我将用户名作为数字 (1,2,3...) 运行时，它都会顺利运行。

但是，当我尝试用字母写任何东西时，比如 Bob 或 Dora，我收到以下错误：

警告：mysql_num_rows() 期望参数 1 是资源，布尔值在...

然而，信息仍然存储在我的数据库中，这意味着它在最后一个 if 语句中为假，并且它将继续为假（如果我再试一次，它只会插入重复项）。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:10:11.110

您忘记了用户名周围的引号：

```
$query = "SELECT username FROM mishta where username='$username'" 
```

引号用作字符串分隔符。数字不是字符串，如果您使用数字，它就可以工作。

# java - Eclipse中的Java测试，编写方法

> ID：15689136
> 
> 赞同：0
> 
> 时间：2013-03-28T18:08:33.493
> 
> 标签：java, junit

我在 Eclipse 中编写测试方法时遇到问题，我创建了一个 JUnit Case 类，选择了我想测试的类和方法。现在我面临一个带有空方法的类。我实际上不确定方法中的内容。我读过你需要创建一个我想测试的类的新实例，调用它的方法。我在网上看过，但没有任何意义。这是我要测试的课程的一部分：

```
public class FilmSystem {

private String filmName;
private String lecture;
private String ageRating;
private String ticketCost;
private int noOfSeats;

public FilmSystem(String film, String lect, String age, String price, int seats){
    filmName = film;
    lecture = lect;
    ageRating = age;
    ticketCost = price;
    noOfSeats = seats;

}

public String getFilmName(){
    return filmName;
} 
```

我将如何测试 getFilmName 方法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:14:02.967

快速示例：

```
public class FilmSystem{

    private String filmName;
    private String lecture;
    private String ageRating;
    private String ticketCost;
    private int noOfSeats;

    public FilmSystem(String film, String lect, String age, 
                      String price, int seats){
        filmName = film;
        lecture = lect;
        ageRating = age;
        ticketCost = price;
        noOfSeats = seats;

    }

    public String getFilmName(){
        return filmName;
        }

}

public class FilmSystemTest{

    @Test
    public void shouldReturnCorrectName(){
        FilmSystem filmSystem = new FilmSystem("Ocean's Eleven", "", "", "", 0);

        Assert.assertEquals("Ocean's Eleven", filmSystem.getFilmName());
    }
} 
```

虽然不得不说。测试一个*吸气剂*似乎并不那么有趣

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:15:35.677

您的单元测试不应与该上下文中对象的规范使用不同。由于`FilmSystem`是不可变的（也就是说，这些字段都没有设置器），因此您必须断言您实例化对象的内容就是您的对象返回的内容。

```
@Test
public void testFilmName() {
    // arrange
    FilmSystem fs = new FilmSystem("Some movie", "", "", "", 10);
    // act
    // no actions
    // assert
    assertEquals("Some movie", fs.getFilmName());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T18:17:58.850

单元测试的理念是 AAA：安排、行动和断言

您可能不需要对这样的课程进行测试，但这是一般的想法。

```
public class TestFilmSystem {

    @Test
    public void test_get_film_name(){
        /*
         * Arrange
         */         
        String expectedFilmName = "Hobbit- An unexpected journey";
        FilmSystem fs = new FilmSystem(expectedFilmName, "xpto", "12", "12.99€", 100);      
        /*
         * Act
         */

        String resultFilmName = fs.getFilmName();           
        /*
         * Assert
         */         
        Assert.assertEquals(expectedFilmName,resultFilmName);           
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T18:13:43.560

您将需要填写其余部分（或让 Eclipse 完成）。我只是懒惰。

```
private static final String FILM = "Casa Blanca";
.. similar for all ...

@Test
public void testFilmName() {

  FilmSystem f = new FilmSystem(FILM, LECTURE, AGE_RATING, PRICE, SEAT_COUNT);
  assertEquals("File name is wrong", FILM, f.getFilmName());

} 
```

# c# - 在不同的线程中填充 ObservableCollection

> ID：15689137
> 
> 赞同：1
> 
> 时间：2013-03-28T18:08:33.713
> 
> 标签：c#, wpf

我正在使用一个继承 IEnumerable 的类来检索`DataType`.

```
class DataCollector : IEnumerable<DataType>
{
    public IEnumerator<DataType> GetEnumerator()
    {
        // this takes from 5 to 20 seconds,
        // so I want it to run in a background thread.
    } 
} 
```

现在 DataType 非常简单，只有一个*Name*和*Value*属性。

在我的视图模型中：

```
private AsyncObservableCollection<DataType> _Data = new AsyncObservableCollection<DataType>(); 
```

我`AsyncObservableCollection`从[这里](http://www.thomaslevesque.com/2009/04/17/wpf-binding-to-an-asynchronous-collection/)使用，所以我可以从 BackgroundWorker 填充它。

ViewModel 中的构造函数创建了一个 BackgroundWorker，这就是 DoWork：

```
void DoWork(object sender, DoWorkEventArgs e)
{
    var data = new DataCollector();
    foreach (var i in data)
    {
        _Data.Add(i);
    }
} 
```

我得到`Must create DependencySource on same Thread as the DependencyObject.`
这是否意味着我需要`DataType`在 UI 线程中创建从 DataCollector.GetEnumerator() 产生的内容？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:29:56.767

If you have the capability to upgrade to .NET 4.5, one of the improvements to WPF for that version is the ability to modify collections on background threads. See [here](http://msdn.microsoft.com/en-us/library/bb613588.aspx#xthread_access) for more information.

Otherwise, in previous you should probably attempt to only modify the collection on the UI thread, through the use of `Dispatcher.BeginInvoke` or `Dispatcher.Invoke` or another synchronization mechanism.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T20:22:07.047

您可以使用 BackGroundWorker ReportProgess 将对象 (ObservableCollection) 传回

[BackgroundWorker.ReportProgress 方法（Int32，对象）](http://msdn.microsoft.com/en-us/library/a3zbdb1t.aspx)

一次传回 100 或 1000 行。
或者只是传回前 1000 个，然后等待完成获得总数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T18:19:42.167

为什么不等待整个事情完成，然后将项目的插入编组到 UI 线程？

```
void BackgroundWorker_Completed(ect... Im not used to work with BW so I don't know the parameters)
{
    _Data.AddRange(yourdataItems);
} 
```

**编辑**：

如果你想逐步填充 observablecollection：

```
void DoWork(object sender, DoWorkEventArgs e)
{
    var data = new Datacollector();
    foreach (var i in data)
    {
        Application.Current.Dispatcher.BeginInvoke((Action)(_Data.Add(i)));
    }
} 
```

# mysql - Mysql DataTable 和 CommandBuilder

> ID：15689138
> 
> 赞同：1
> 
> 时间：2013-03-28T18:08:34.573
> 
> 标签：mysql, vb.net, ado.net

我制作了一个简单的控制台应用程序来清理我的数据库表中的数据（空格等）

应用程序用从 DATABASE 中选择的 TABLE 填充 DATATABLE 并对其进行处理，然后我只保存数据表更改（ dataTable.AcceptChanges() ）下面（来自 MSDN）：

```
 Dim DA As New MySqlDataAdapter(SQL, connessione)
    Dim CB As New MySqlCommandBuilder(DA)

    DA.Update(DT) 
```

我没有收到任何错误，但数据库没有更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:19:48.843

不要在数据表上调用[AcceptChanges](http://msdn.microsoft.com/en-us/library/system.data.datatable.acceptchanges.aspx)。
此方法会将每个 DataRow [RowState](http://msdn.microsoft.com/en-us/library/system.data.datarow.rowstate.aspx)属性从[Modified/Added/Deleted](http://msdn.microsoft.com/en-us/library/system.data.datarowstate.aspx)更改为`Unchanged`. 结果`DataAdapter.Update`将找不到任何要更新/删除/添加的行

DataTable 对象与已从中接收其行的基础数据库表断开连接。调用 AcceptChanges 会将更改提交到不在数据库上的内存中的对象。
MySqlDataAdapter 及其 Update 方法知道连接到数据库并应用在 DataTable 上找到的更改。调用 AcceptChanges 将阻止此功能

# java - Java 组件继承 LnF

> ID：15689141
> 
> 赞同：0
> 
> 时间：2013-03-28T18:08:48.367
> 
> 标签：java, swing, look-and-feel, jcomponent

我从头开始制作了一个 JComponent 子组件，并为它制作了基于基本和金属的外观和感觉。即使我为整个应用程序使用金属主题，我仍然必须在对象上调用 setUI 以使其成为金属。如果它可用并且默认为基本，有什么方法可以使用当前的 LnF？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:31:19.087

您可以覆盖并安装`updateUI()`您`JComponent`想要的任何自定义设置：

```
@Override
public void updateUI() {
    super.updateUI();
    // customize here
} 
```

# extjs - Sencha Ext Js - 添加一个 span/div 到表单字段模板，然后动态更改文本计数器的内容

> ID：15689142
> 
> 赞同：1
> 
> 时间：2013-03-28T18:08:50.053
> 
> 标签：extjs

我是 Ext Js 的新手，如果我对某些事情的术语不正确，请原谅我。我需要的是文本计数器。这是我到目前为止...

[http://jsfiddle.net/gfrobenius/WxNDf/1/](http://jsfiddle.net/gfrobenius/WxNDf/1/)

我需要做的是使此代码可重用，以便所有文本区域都获得此功能，但我仍然能够更改标签、名称、id、maxLength 等正常设置......这是否意味着将其变成一个类，插件、组件（抱歉还在学习术语）？我的 afterLabelTextTpl 可以做得更简单吗？我见过这样的例子：

```
var tpl = new Ext.Template('Name: {name}, Age: {age}');
tpl.apply({name: 'John', age: 25}); 
```

在文档中，但不确定如何将其合并到我的代码中。同样在我用于更新文本计数的三个函数中，您可以看到我有用于将组件硬编码为“gtext”的行和用于将“countDownSpan”硬编码的行。我该如何让他们只知道父项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:57:04.030

您可以制作自己的组件并从 textarea 扩展。此外，您在回调函数中做了 3 次相同的事情。并且您的 textarea 的 id 应该是唯一的。

这是您的组件的示例：

```
Ext.define('MyApp.ux.form.field.TextArea', {
    alias: 'widget.textareacounter',
    extend: 'Ext.form.field.TextArea',
    labelAlign: 'top',
    enableKeyEvents: true,
    enforceMaxLength: false,
    maxLength: 1000,

    constructor: function(config) {
        var me = this;
        Ext.apply(me, config);
        me.afterLabelTextTpl = ['<span style="margin-left:5px;">(' + me.maxLength + ' char. left)</span>'];
        me.callParent()
    },

    initComponent: function () {
        var me = this;
        me.on({
            keydown: me.calculateCharsLeft,
            keyup: me.calculateCharsLeft,
            afterrender: me.calculateCharsLeft,
            scope: me
        });
        me.callParent();
    },

    calculateCharsLeft: function (textfield, e) {
        var me = this;
        var span = Ext.dom.Query.select('span', me.getEl().dom)[0];
        var remaining = me.maxLength - me.getValue().length;
        span.innerHTML = '(' + remaining + ' char. left)';
    }
}); 
```

还有一个工作小提琴：http: [//jsfiddle.net/johanhaest/cpLvK/2/](http://jsfiddle.net/johanhaest/cpLvK/2/)

# python - Django 将“/”重定向到已安装应用程序的索引

> ID：15689151
> 
> 赞同：1
> 
> 时间：2013-03-28T18:09:25.700
> 
> 标签：python, django, url, redirect, indexing

我试图重定向我的域的 / 以指向我的“前端”应用程序中的索引。我尝试了很多方法，所有方法都有效。问题是每次重定向都会调用我的 index_view 两次。这是我的顶级 urls.py

```
urlpatterns = patterns('',
     url(r'^$', lambda x: HttpResponseRedirect('/frontend/')),
     url(r'^frontend/', include('frontend.urls', namespace="frontend")),
) 
```

这是我的前端/urls.py

```
urlpatterns = patterns('',
    url(r'^$', views.index, name='index'),
    url(r'^alert/create/$', views.create_alert, name="create_alert"),
    url(r'^alert/edit/(\w+)', views.edit_alert, name="edit_alert"),
) 
```

每次我去 / 调用我的 views.index 两次，我不明白为什么 =/ 我做错了重定向？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:13:46.297

您可以将根设置为使用您的 FE url 模式，如下所示：

```
urlpatterns = patterns('',
    url(r'^', include('frontend.urls', namespace="frontend")),
) 
```

如果你想强制重定向到 /frontend/ 那么你需要一个视图来处理重定向。

也许看看重定向通用视图：[https ://docs.djangoproject.com/en/1.1/ref/generic-views/#django-views-generic-simple-redirect-to](https://docs.djangoproject.com/en/1.1/ref/generic-views/#django-views-generic-simple-redirect-to)

# asp.net - 部署后 ASP.NET MVC 4 代码首先迁移

> ID：15689154
> 
> 赞同：0
> 
> 时间：2013-03-28T18:09:38.657
> 
> 标签：asp.net, asp.net-mvc-4, entity-framework-5, code-first

我有一个 asp.net mvc 4 网站。它的数据库是使用代码优先方法创建的。然而，我的这个网站是一个博客，我将它上传到我的服务器。现在我有几篇文章，我想做一些更改 - 例如添加关键字，但这需要更改文章的模型，如果它是本地的，我可以使用包管理器控制台（VS2012）轻松地将新模型迁移到数据库但是当它在我的托管公司的服务器上时，我该怎么做。我在谷歌上没有找到任何好的结果。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:13:56.760

我假设您只需将实体框架正在使用的连接字符串指向远程主机上的数据库，而不是本地计算机。您正在使用迁移，而我只使用了数据库初始化程序（在模型更改时更改数据库架构），但我看不出它有多大不同。

# sql - 输入的字符多于函数参数表 SQL

> ID：15689155
> 
> 赞同：0
> 
> 时间：2013-03-28T18:09:39.637
> 
> 标签：sql, sql-server, tsql, user-defined-functions

我有这个我正在玩的代码片段（原谅通用名称）：

```
create function GetList
(@d1 varchar(3), @d2 varchar(3), @d3 varchar(3))
returns table
as
return
with List
as
(
    select x.pattern
        from (values (@d1), (@d2), (@d3)) as x(pattern)
)
select * from list 
```

这最终将成为用户提供的列表，他们将使用它来查询其他内容，但玩弄这个让我很好奇。如果我要跑

`select * from GetList('1111111','222','333')`

我将得到相同的结果，就好像我只为每个输入 3 个字符一样。由于我将 varchar 参数限制为字符，其他参数是否完全忽略？如果我有一个像这样“溢出”的 varchar 参数，是否会发生任何潜在的麻烦（当然，字符串末尾的数据丢失除外）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:12:59.300

其他字符完全被忽略，因为您将参数的长度限制为 3。

您可能遇到的唯一问题是您是否真的想返回长度超过 3 的字符。

例如，您传入`1234567`并且您实际上想要整个值，您只会得到`123`.

如果您将输入参数限制为 3，则没有理由尝试传入更长的值。如果您有可能传入更长的值，那么您应该增加参数的长度。

# cassandra - Cassandra：“包含密钥”操作？

> ID：15689163
> 
> 赞同：0
> 
> 时间：2013-03-28T18:09:57.867
> 
> 标签：cassandra

有一些 Cassandra 操作来验证列族是否包含密钥？我们不需要任何行数据，只需要键是否存在。

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:33:40.050

如果您使用的是 Java，则为 rowKey 创建一个 SliceQuery 并将开始/结束值设置为等于您要查找的特定列键。如果有一列具有特定键，则以下表达式为真：

```
sliceQuery.execute().get().getColumns().size() > 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:10:46.080

一种快速的方法是询问该行的列数，如果它是肯定的，则该行存在。由于墓碑，“不存在”周围有一个灰色区域。您可以删除一行的所有列，但请求该行的数据可能会导致一组空的列而不是`null`（这在很大程度上取决于您使用的驱动程序）。您应该将没有列的行视为不存在，因此询问列数可能是确定行是否存在的最佳方法。

[在Cassandra 常见问题解答中的“范围幽灵”下](http://wiki.apache.org/cassandra/FAQ#range_ghosts)有更多关于此的信息。

# php - 运行脚本时的警告

> ID：15689166
> 
> 赞同：-1
> 
> 时间：2013-03-28T18:10:01.783
> 
> 标签：php, html

我在运行脚本时收到这些警告：

```
Notice: Undefined variable: varName in C:\wamp\www\dash\index.php on line 38
Notice: Undefined variable: varMsg in C:\wamp\www\dash\index.php on line 38
Notice: Undefined variable: varDate in C:\wamp\www\dash\index.php on line 38 
```

此外，我可以将详细信息插入数据库，但每次刷新页面时都会插入查询。

**脚本的重要部分：**

```
<?php
date_default_timezone_set('UTC');

if(isset($_POST['formSumbit']))
{
   $varName = $_POST['formName'];
   $varMsg = $_POST['formMsg'];
   $varDate = date(d/m/y);
   $errorMessage = "";
}
//line 38
 $order ="INSERT INTO dash (name,msg,msg_date) VALUES ('$varName','$varMsg','$varDate')";  
    $result = mysql_query($order); 

?>

<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="POST">
  name
  <input type="text" name="formName" maxlength="25"  />

  msg
  <input type="text" name="formMsg" maxlength="1500"  />

<input type="submit" name="formSumbit" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:11:50.540

您`if(isset($_POST['formSumbit'])) {}`还需要围绕查询：

```
if(isset($_POST['formSumbit']))
{
   $varName = $_POST['formName'];
   $varMsg = $_POST['formMsg'];
   $varDate = date('Y-m-d');
   $errorMessage = "";
   //line 38
   $order ="INSERT INTO dash (name,msg,msg_date) VALUES ('$varName','$varMsg','$varDate')";  
   $result = mysql_query($order); 
} 
```

每次刷新页面时，查询都会运行，但它们会插入空白值，因为这些值包含在`if`语句中。这就是您收到通知的原因。您没有这些值，因为尚未提交表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:12:12.877

`if(isset($_POST['formSubmit']))`在语句中添加第 38 和 39 行。当前，当页面加载时，每次都会执行它，但是您只想在提交表单时执行它：

```
if(isset($_POST['formSumbit']))
{
   $varName = $_POST['formName'];
   $varMsg = $_POST['formMsg'];
   $varDate = date(d/m/y);
   $errorMessage = "";
   $order ="INSERT INTO dash (name,msg,msg_date) VALUES ('$varName','$varMsg','$varDate')";  
   $result = mysql_query($order);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T18:16:06.413

将以下代码放入单独的文件中，例如“insert.php”并将您的操作设置为此，这将解决重复插入问题。

```
if(isset($_POST['formSumbit']))
{
   $varName = $_POST['formName'];
   $varMsg = $_POST['formMsg'];
   $varDate = date(d/m/y);
   $errorMessage = "";
   $order ="INSERT INTO dash (name,msg,msg_date) VALUES ('$varName','$varMsg','$varDate')";  
   $result = mysql_query($order);
   if($result){
       header("Location: back-to-form.php");
   } else {
      echo mysql_error();
   }
} 
```

# c# - 将 UIImage（包含 PNG 图像）转换为 NSData，alpha = 0 的像素将失去其 RGB 值

> ID：15689170
> 
> 赞同：1
> 
> 时间：2013-03-28T18:10:15.053
> 
> 标签：c#, xamarin.ios, uiimage, pixel, alpha

所以我有一个包含 PNG 图像的 UIImage 。如果我将该图像转换为 NSData，然后将其转换回 UIImage，图像很好，但是任何 alpha 为 0 的像素都会丢失它的 RGB 值。他们变成了零……这是为什么呢？无论如何我可以保留它们吗？

这是一个代码段：

```
// Declare a new NSData
NSData test = new NSData();
// Convert my Image (PNG) to NSData
test = MyImageView.Image.AsPNG();
// Convert the NSData back to UIImage
UIImage workAroundImage = UIImage.LoadFromData(test);
MyImageView.Image = workAroundImage; 
```

现在，如果我要检查像素，我会发现任何 Alpha 值为 0 的像素的 RGB 值都为 0,0,0，而不是原始值！为什么是这样？

这是一个显示此示例的 Dropbox 链接。运行这个项目，图像会得到一些像素的 alpha 清零。RGB 值将保持不变。您可以取消注释打印语句以查看此内容。然后，如果您点击屏幕（请参阅 TouchesBegan 函数），它将 UIImage 转换为 NSData，然后返回 UIImage。然后它再次将所有像素数据打印到屏幕上。在这里，您将看到 RGBA 数据的所有 0,0,0,0，这表明任何将 Alpha 归零的实例都不会保留 RGB 值。为什么是这样？

[https://www.dropbox.com/s/21d5k1yex475u2j/TestAlpha_WorkaroundIssue.zip](https://www.dropbox.com/s/21d5k1yex475u2j/TestAlpha_WorkaroundIssue.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:28:53.017

> 这是为什么？

这听起来像是在图像数据上完成了对预乘 alpha 的转换。这*杀死了*每个 RGB 值（通过将它们乘以 0）。

> 无论如何我可以保留它们吗？

可悲的是，无法进行反向操作。您需要保留原始图像/值。

# php - PHP 包含函数 - 嵌套列表

> ID：15689171
> 
> 赞同：0
> 
> 时间：2013-03-28T18:10:21.050
> 
> 标签：php, list, include, nested

我使用 include 函数来防止我在进行更改时必须更新每个页面上的顶部菜单。这是在我的网站上使用包含功能的片段：-

```
<div id ="header">
   <div id="logo"></div>
     <nav>
        <?php include 'menu.php' ?>
     </nav>
</header> 
```

这是 menu.php 文件的内容

```
 <div id="menu_container">
      <ul class="sf-menu" id="nav">
        <li><a href="badmintonIndex.php">Home</a></li>
        <li><a href="badmintonAbout.php">About Us</a></li>
        <li><a href="#">Leagues</a>
          <ul>
            <li><a href="#">Brighton</a>
              <ul>
                <li><a href="#">Singles</a>
                  <ul>
                    <li><a href="#">Results</a></li>
                    <li><a href="badmintonSinglestables.php">Tables</a></li>
                  </ul>
                </li>
                <li><a href="#">Doubles</a>
                  <ul>
                    <li><a href="#">Results</a></li>
                    <li><a href="#">Tables</a></li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="badmintonRules.php">Rules</a></li>
        <li><a href="#">Hall of Fame</a>
          <ul>
            <li><a href="#">Brighton</a>
              <ul>
                <li><a href="badmintonFame.php">Singles</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="badmintonContact.php">Contact Us</a></li>
      </ul>
    </div> 
```

但是我的问题是包含嵌套项的菜单项，当您将鼠标悬停在它们上时，它们会下拉并提供更多选项，但不能以这种方式工作。但是当我直接复制代码时，它们确实可以正常工作。

在直接复制代码并起作用的页面以及我使用包含但不起作用的页面上：-

工作[dtlsports.co.uk/badmintonSinglestables.php](http://dtlsports.co.uk/badmintonSinglestables.php)

不工作[dtlsports.co.uk/badmintonSinglestablesA.php](http://dtlsports.co.uk/badmintonSinglestablesA.php)

如您所见，第一页上的导航菜单有效，但在第二页上没有正确下拉

有什么人可以建议的吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:33:55.610

问题是在非工作页面上，您不包括工作页面上的所有 js 脚本。例如：

```
<script type="text/javascript">
$(document).ready(function() {
$('ul.sf-menu').sooperfish();
$('.top').click(function() {$('html, body').animate({scrollTop:0}, 'fast'); return false;});
});
</script> 
```

# javascript - 用 JQuery/Javascript 替换/更改数组的一个值

> ID：15689182
> 
> 赞同：0
> 
> 时间：2013-03-28T18:10:46.143
> 
> 标签：javascript, jquery, arrays

我有一个在另一个 Javascript 调用中创建的数组。数组如下：

```
 HM_Array1 = [[,11,147,,,,,,,1,1,0,0,0,1,"csiSetBorder(this)","null",,,true,["&nbsp;&nbsp;&nbsp;Accoun&nbsp;&nbsp;&nbsp;","",1,0,1],["&nbsp;&nbsp;&nbsp;Resources&nbsp;&nbsp;&nbsp;","",1,0,1],["&nbsp;&nbsp;&nbsp;Reworking&nbsp;&nbsp;&nbsp;","",1,0,1],["&nbsp;&nbsp;&nbsp;Account Services&nbsp;&nbsp;&nbsp;","",1,0,1],["&nbsp;&nbsp;&nbsp;Education&nbsp;&nbsp;&nbsp;","",1,0,1],["&nbsp;&nbsp;&nbsp; App&nbsp;&nbsp;&nbsp;","",1,0,1]]; 
```

如果 HTML 中存在另一个元素，我将尝试仅替换顶部的“147”值。到目前为止，我还没有运气。

这是我迄今为止一直在使用的代码。

```
$(document).ready(function (){

if ($('#impersonationWrapper').length > 0) {
    var arr = HM_Array1;
    var valChange = HM_Array1[0][2];
    if (valChange !== -1) {
        HM_array[valChange] = 202;
    }

    }
    else {

    }
}); 
```

147 对应于 CSS 'top' 值的值。不幸的是，我必须动态更改它，因为我不允许触摸旧的编码。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:15:17.473

我想你想要：

```
var valChange = HM_Array1[0][2];
if (valChange !== -1) {
    HM_Array1[0][2] = 202;
} 
```

你的代码

```
HM_array[valChange] = 202; 
```

是相同的：

```
HM_array[HM_Array1[0][2]] = 202; 
```

这是：

```
HM_array[147] = 202; 
```

将第 147 项的值设置`HM_array`为`202`. 这不是你想要的。`HM_array`只有 1 项。并且您想将该项目的第二个项目设置为`202`（替换`147`为`202`）。

# android - 如何打开 WiFi 扫描仪？

> ID：15689183
> 
> 赞同：2
> 
> 时间：2013-03-28T18:10:47.607
> 
> 标签：android, android-wifi

我尝试使用以下代码获取 WiFi 扫描仪的当前状态：

```
ConnectivityManager manager = (ConnectivityManager)getSystemService(MainActivity.CONNECTIVITY_SERVICE);

 State wifi = manager.getNetworkInfo(ConnectivityManager.TYPE_WIFI).getState(); 
```

不幸的是，第二行导致我的应用程序在运行时崩溃。注释该行允许应用程序毫无问题地执行。这部分对于这个应用程序非常重要。没有它我无法继续剩余的代码。它在模拟器（Android 版本：4.2.2 API 级别 17）和运行 ICS 4.0.4（API 级别 15）的 Xperia 上崩溃。所需的最低 API 级别设置为 8。代码没有错误。

编辑：有效的是：备用代码：

final WifiManager wifiManagerI = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);

布尔 wifiEnabledI = wifiManagerI.isWifiEnabled();

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T19:21:32.907

如果没有日志，我的猜测是您忘记添加权限。

```
<user-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

编辑：最终这段代码解决了这个问题。

```
final WifiManager wifiManager = (WifiManager) this.getSystemService(Context.WIFI_SERVICE); 
boolean wifiEnabled =   wifiManager.isWifiEnabled(); 
```

# jquery - jquery - 获取html返回的文本

> ID：15689184
> 
> 赞同：5
> 
> 时间：2013-03-28T18:10:47.793
> 
> 标签：jquery, ajax, dom

这可能很简单，但我似乎找不到我的答案......

我有一个返回 html 的 ajax 调用

```
 dataType: "html" 
```

它返回的“味精”看起来像：

```
<div id="x"><p>Hello</p></div> 
```

并且将 dom 添加到父 div 的顶部：

```
ajax call...
request.done(function(msg) {
   $('#parent').prepend(msg);
} 
```

问题是，如果它的文本没有改变，我不想做这个 dom 操作（因为我已经截断了其他发生的影响。（这是一个通知显示，用于检查间隔内的更新）

所以，我想做的是在 msg 中找到“Hello”，并将其与可能已经在页面上的当前 div x 的 p 进行比较。第二部分很容易解决，但第一部分，我需要做一些类似 msg.text() 的事情来获得“你好”，但我尝试的一些变种失败了。

指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:14:38.563

用于`filter()`查找文本..

试试这个

```
$(msg).filter('div#x p').text(); //this  will give you hello 
```

或者`find()`

```
 $(msg).find('div#x p').text(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:19:28.847

因此，您可以执行以下操作：

将先前查询中的文本保存在变量中

```
var previusData; 
```

然后在第一个请求将该数据添加到变量之后，您可以使用过滤器或像这样执行此操作：

```
previusData = $("#x p").html(); 
```

然后在将其添加到 DOM 之前通过添加新变量进行检查

```
request.done(function(msg) {
   var currData = $("#x p").html();
   if(currData != previusData){
     $('#parent').prepend(msg);
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T18:20:39.027

假设页面加载时不存在“通知”并且在页面加载后获取它，您可以使用全局变量（或命名空间）来保存响应的先前值，并且每次收到新响应时，匹配它针对已经存储的响应；如果没有改变则丢弃；或使用 if changed 并更新全局变量

```
var cached_response = '';
ajax call...
request.done(function(msg) {
   if(msg != cached_response){
      $('#parent').prepend(msg);
      cached_response = msg;
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T18:22:34.393

一种方法是，您可以使用正则表达式替换所有 html 标签，如下所示：

```
$(document).ready(function() {
    var text = '<div id="x"><p>Hello</p></div>';
    console.log(text.replace(/(<([^>]+)>)/ig,""));
}); 
```

只需将此行放入您的脚本中，然后与数据进行比较。

这是工作示例：http: [//jsfiddle.net/cGnG5/1/](http://jsfiddle.net/cGnG5/1/)

另一种方法是使用另一个答案中所述的[.filter()](http://api.jquery.com/filter/)函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T18:19:17.850

试试这个

```
$('#parent').prepend($(msg).text()); 
```

# ruby-on-rails - Ajax 在我的 Rails 应用程序中不起作用

> ID：15689185
> 
> 赞同：0
> 
> 时间：2013-03-28T18:10:51.673
> 
> 标签：ruby-on-rails, ruby, ajax

我有以下代码向我的控制器的方法发出 ajax 请求以获取给定 url 的内容类型：

```
 $("#wiki_form_url").change(function () {
        $.ajax({
            type: "GET",
            url: "/wiki_forms/content",
            data: {
                input_url: $("#wiki_form_url").val()
            },
            dataType: "text"
        }).done(function (data) {
                    // `data` contains the content-type
                    alert('Success');
                    console.log(data);
//                    alert(data);
                }).fail(function () {
                    alert("failed AJAX call");
                });
    }); 
```

在我的 wiki_forms 控制器中有一个名为 content 的方法，在里面我正在做：

```
 def content

    req = open(params[:input_url])
    render :text => req.content_type
    puts  "type is : #{req.content_type}"

  end 
```

在我的 route.rb 文件中，我有：

```
 match "/wiki_forms/content" => 'wiki_forms#content' 
```

但是，当我尝试发出 ajax 请求时，我得到了错误。我的控制台如下所示：

```
Started GET "/wiki_forms/content?input_url=http%3A%2F%2Fwww.ofdp.org%2Fbenchmark_indices%2F25" for 127.0.0.1 at 2013-03-28 14:08:42 -0400
Processing by WikiFormsController#show as TEXT
  Parameters: {"input_url"=>"http://www.ofdp.org/benchmark_indices/25", "id"=>"content"}
  WikiForm Load (0.3ms)  SELECT "wiki_forms".* FROM "wiki_forms" WHERE "wiki_forms"."id" = ? LIMIT 1  [["id", "content"]]
Completed 500 Internal Server Error in 3ms

ActiveRecord::RecordNotFound (Couldn't find WikiForm with id=content):
  app/controllers/wiki_forms_controller.rb:23:in `show' 
```

为什么在我的 ajax 调用中指定内容方法时，这里会调用 show 方法？如何使这项工作？请帮忙

**编辑_1：**

**耙路线**

```
 wiki_forms GET    /wiki_forms(.:format)          wiki_forms#index
                   POST   /wiki_forms(.:format)          wiki_forms#create
     new_wiki_form GET    /wiki_forms/new(.:format)      wiki_forms#new
    edit_wiki_form GET    /wiki_forms/:id/edit(.:format) wiki_forms#edit
         wiki_form GET    /wiki_forms/:id(.:format)      wiki_forms#show
                   PUT    /wiki_forms/:id(.:format)      wiki_forms#update
                   DELETE /wiki_forms/:id(.:format)      wiki_forms#destroy
              root        /                              wiki_forms#index
wiki_forms_content        /wiki_forms/content(.:format)  wiki_forms#content 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T18:51:01.417

文件的顺序`routes.rb`很重要。

`rake routes`节目

```
 wiki_forms GET    /wiki_forms(.:format)          wiki_forms#index
                   POST   /wiki_forms(.:format)          wiki_forms#create
     new_wiki_form GET    /wiki_forms/new(.:format)      wiki_forms#new
    edit_wiki_form GET    /wiki_forms/:id/edit(.:format) wiki_forms#edit
         wiki_form GET    /wiki_forms/:id(.:format)      wiki_forms#show
                   PUT    /wiki_forms/:id(.:format)      wiki_forms#update
                   DELETE /wiki_forms/:id(.:format)      wiki_forms#destroy
              root        /                              wiki_forms#index
wiki_forms_content        /wiki_forms/content(.:format)  wiki_forms#content 
```

所以

```
 wiki_form GET    /wiki_forms/:id(.:format)      wiki_forms#show 
```

首先匹配，`:id`具有值字符串“content”

移动你的

```
match "/wiki_forms/content" => 'wiki_forms#content' 
```

在更高的地方`routes.rb`。

# graphics - 处理中实时刷新

> ID：15689194
> 
> 赞同：1
> 
> 时间：2013-03-28T18:11:47.013
> 
> 标签：graphics, processing

我是处理新手，我通过搜索“用编码绘制”找到了它，我试过了，似乎每次修改代码时，我都必须停止并再次渲染以获得最终结果

有没有办法在不重新渲染的情况下获得更新的图形？这对于创建简单的图形会更方便。如果没有，是否有任何替代处理可以用编码绘制图形的方法？

我在 Latex 中使用过 Tikz，但这只是针对 Latex 的，我想要一些可以让我通过编码绘制图形的东西，尽管使用 coreldraw 之类的软件我已经受够了，它缺乏编码的基本优雅。

非常感谢！</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:20:17.707

请查看[FluidForms 库](http://fluidforms.eu/processing/fluid-forms-libs/)。

*   易于设置
*   文档和视频教程
*   只要您不遇到异常，就可以轻松地编写代码
*   如果您在公共变量前面加上前缀，`param`您还可以免费获得滑块:)

请查看视频教程，尤其是[这个](http://www.youtube.com/watch?feature=player_embedded&v=DzOZSMUwZjU)：

![FluidFormsLibs 实时编码](../Images/f1fe5398539ecaef09a6223e158bf959.png)

此外，如果使用 Python 不是问题，我建议您查看：

1.  [节点框](http://nodebox.net/)
2.  [场地](http://openendedgroup.com/field/OverviewBanners2)

Python 是一种出色的脚本语言 - 它使原型设计/“实时编码”变得容易（尽管它可以编译并且它也可以很好地与 c/c++ 配合使用）并且易于学习和使用。

![现场预览](../Images/754eb6f134c9f29fe04502756dff7ed7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T00:36:20.930

在处理中，您必须重新运行程序以查看更改（以图形方式），除非您编写代码来接收用户的输入以动态调整您正在绘制的内容。例如，用于创建用户界面的 controlP5 库 ( [http://www.sojamo.de/libraries/controlP5/](http://www.sojamo.de/libraries/controlP5/) )。

它不支持“实时编码”（至少我知道）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T04:45:46.577

您必须重新运行代码才能看到新结果。如果您正在寻找实时编码，请查看 Fluxus ( [http://www.pawfal.org/fluxus/](http://www.pawfal.org/fluxus/) ) 或 Impromptu ( [http://en.wikipedia.org/wiki/Impromptu_(programming_environment)](http://en.wikipedia.org/wiki/Impromptu_(programming_environment))

# php - 如何通过系统分析物品的路径

> ID：15689199
> 
> 赞同：1
> 
> 时间：2013-03-28T18:12:04.550
> 
> 标签：php, mysql

我正在为如何分析问题寻找一点方向。我在一家小型制造公司工作。我们每天画大约 150 件物品。然后这些项目进入质量控制。大约 70% 通过 QC。剩下的 30% 必须以某种方式修复。

我们有 5 种不同的维修类别：`Repaint, Reclear, Remake, Reglaze, Fix`

每次订单获得 QC 时，我的系统都会在“修复”mysql 表中输入一些数据。如果它通过 QC，它的类别为`Great`. 它的结构是这样的：

```
id | Repair | Date
 5 | repaint| 2013-01-01
 6 | reclear| 2013-01-01
 5 | great  | 2013-01-02  ...etc 
```

我需要能够对正在发生的操作进行分析。我想知道哪些“路径”项目正在下降。例如。有多少百分比的项目有这些类别`Reclear->Repaint->Great`。有多少百分比`Repaint->Repaint->Remake->Great`（每个项目最终都应该以“很棒”结尾）

我有点卡在从哪里开始弄清楚如何分析这个问题。

我应该跟踪表中的维修编号吗？如果我这样做了，那么也许我可以使用自我加入来选择`repairnum=1 AND repair=Repaint`加入的订单`repairnum=2 AND repair='Great'`这会告诉我哪些订单走上了这条路`Repaint->Great`我有点犹豫要不要走这条路，因为 1）我不想做一个查询并在我向表中插入新行之前获取repairnumber 2）似乎我必须有一些非常讨厌的查询来分析具有5或6（或更多）修复的项目。

也许有人可以指出我正确的方向？

我的应用程序在 php 和 mysql 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:03:47.600

您不需要单独的“维修编号”，因为您有每次维修的日期，因此可以按此订购（假设您还存储时间，如果一天内可以进行多次维修）。

一个项目的“路径”是它的维修列表，按日期顺序排列。如果你只是说`SELECT repair FROM repairs WHERE id=5 ORDER BY date ASC`你会得到他们作为行。

诀窍是使用[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)将这些转换为代表整个路径的单个值-`SELECT GROUP_CONCAT(repair ORDER BY date ASC SEPARATOR '->') FROM repairs WHERE id=5`

一旦你有了它，你可以使用 a 为数据库中的所有产品运行它`GROUP BY`，然后在其中查找模式`HAVING`：

```
SELECT 
    id,
    GROUP_CONCAT(repair ORDER BY date ASC SEPARATOR '->') as path
FROM
    repairs
GROUP BY
    id
HAVING
    path = 'Repaint->Repaint->Remake->Great' 
```

请注意，我没有 MySQL 的副本来尝试这个，所以我可能犯了一个错误，但是手册建议上面*应该可以*工作。

# html - 根据宽度设置为 auto 的其他 div 的 clientwidth 调整目标 div 的大小

> ID：15689200
> 
> 赞同：0
> 
> 时间：2013-03-28T18:12:09.210
> 
> 标签：html, resize, getelementbyid, dynamic-css

我正在尝试根据另一个（源）的 clientWidth 动态调整一个 DIV（目标）的宽度。

注意：源DIV的CSS Style是width:auto；

第一个问题：它不起作用......它一定是我的语法或什么......？

第二个问题：它需要随着用户更改浏览器窗口而动态调整大小（在窗口调整大小时调用脚本）。如何 ？？？

Javascript：

```
<script>

// START RESIZE WIDTH SCRIPT
function resizetarget(){

var resizesource = document.getElementById('section');
var sourcewidth = resizesource.style.clientWidth;
var resizetarget = document.getElementById('collpilewrapper');
var targetwidth = resizetarget.style.clientWidth;

targetwidth = sourcewidth;

}

</script> 
```

CSS：

```
.section{
    width:auto;
    max-height:75%;
    top:60px;
    bottom:60px;
    margin-bottom:60px;
    left:280px;
    right:0px;
    position:absolute;
    background-color:#FFF;
    white-space:nowrap;
    display:inline-block;
}
.section li{float:left; display: inline; }
.pane{
    overflow:auto;
    clear:left;
    position:relative;
    width:100%;
    height:100%;
    }

#collpilewrapper{
    min-width:900px;
    min-height:100%;
    float:left;
    background-color:#69C;
    display:table-column;
    } 
```

HTML：

```
<!--start content-->

<div class="section">

<div id="pane-target" class="pane">

<ul class="elements" style="width:16000px">

<!--box 0 -->
<li>
<!-- START landing group -->

    <div id="collpilewrapper">

          <div id="collpile1">
          <img src="images/coll-missy-714x737.jpg" /></div>

          <div id="collpile2">
          <img src="images/coll-girls-602x476.jpg" /></div>

          <div id="collpile3">
          <img src="images/coll-toddler-421x447.jpg" /></div>

    </div>

<!-- END landing group -->

</li>

<!--box 1 -->
<li>
<!-- START missy group -->
<div id="adbox">
<img class="largead" src="images/storypic-na.jpg" />
</div>
<div id="adbox">
<img class="largead" src="images/videostill1.jpg" />
</div>
<!-- END missy group -->

</li>
</ul>     
</div>
</div>

<!--end content--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:59:53.363

[jsfiddle](http://jsfiddle.net/5kyH4/2/)

我使用 jQuery，因为我发现它更容易使用。我注意到了几个问题。您按 ID 定位元素，但 section 是一个类，而不是一个 id。`style.clientWidth`我在谷歌上看到的内容没有得到官方支持。看起来它是 IE 曾经使用的东西（老实说，我对此一无所知）。

***jQuery***

```
function resizeWidth(source, target){
    var sourcewidth = $(source).width();

    $(target).css({
        "width": sourcewidth
    });
}

$(window).resize(function() {
    resizeWidth("#section", "#collpilewrapper");
}); 
```

调整窗口大小后，您在其中放置的任何代码都将运行。

```
$(window).resize(function() {

}); 
```

`resizeWidth()`是我自己做的一个功能。它接受 a`source`和 a `target`。

`width()`会给你一个元素的宽度。

`css()`允许我们直接更改 CSS。

最后，您会注意到蓝色大框看起来并没有重新调整大小。那是因为您设置的最小宽度为 900 像素。此外，该事件只会在您重新调整浏览器大小时触发。当您第一次加载页面时，它不会做任何事情。

# c# - 为什么程序开始延迟3分钟？C# 中的套接字编程

> ID：15689207
> 
> 赞同：1
> 
> 时间：2013-03-28T18:12:35.780
> 
> 标签：c#, sockets, timedelay

我将在下面的程序开始时延迟 3 分钟。但是在超级终端中，它每 2 秒显示每个数据。

她是我下面的代码。请让我知道我哪里出错了。我该如何纠正这个延迟。有什么建议吗？

```
private void StartReceiving()
{
    // coding part of receiving changed.
    try
    {
        string IPStr = textBox1_IPaddress.Text.Trim();
        string portStr = textBox2_Port.Text.Trim(); 
        int port = Convert.ToInt32(portStr);

        int bytesRead = 0;
        byte[] buffer = new byte[9];
        //------------------------------------------------------------------
        IPAddress ipAddress = System.Net.IPAddress.Parse(IPStr);
        //create server's tcp listener for incoming connection

        try
        {
            textBox3.Visible = true;
            client = new TcpClient();
            client.Connect(IPStr, port);
            ns = client.GetStream();
            while (true)
            {
                if (ns.DataAvailable)
                {

                    byte[] data = ReadNumberBytes(ns, 9);
                    ASCIIEncoding encoder = new ASCIIEncoding();
                    msg = encoder.GetString(data);
                    textBox3.AppendText(msg);
                    textBox3.AppendText("\n");
                    GetData(msg);

                }
                else
                {
                    Thread.Sleep(4000);
                    byte[] data = ReadNumberBytes(ns, 9);
                    ASCIIEncoding encoder = new ASCIIEncoding();
                    msg = encoder.GetString(data);
                    GetData(msg);

                }
            }

            client.Close();            
        }
        catch (SocketException se)
        {
             //message box;
        }
    }  
}    

public static byte[] ReadNumberBytes(NetworkStream stream, int n)
{
    byte[] buffer = new byte[n];
    int bytesRead = 0;

    int chunk;
    while (bytesRead < n)
    {
        chunk = stream.Read(buffer, (int)bytesRead, buffer.Length - int)bytesRead);                                         

        if (chunk == 0)
        {
            // error out.
            throw new Exception("Unexpected disconnect");
        }
        bytesRead += chunk;
    }
    return buffer;
} 
```

# mysql - 重新编号字段禁用自动递增

> ID：15689211
> 
> 赞同：1
> 
> 时间：2013-03-28T18:12:43.087
> 
> 标签：mysql

是否可以禁用自动递增，以便我可以在没有 AI 的情况下重新编号字段？

我正在尝试这个，但它似乎无法正常工作：

```
ALTER TABLE `x`.`billadr` 
CHANGE COLUMN `AutoInc` `AutoInc` 
INT(11) NOT NULL ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T18:15:27.460

这是你要找的吗？

```
ALTER TABLE `x`.`billadr` AUTO_INCREMENT = 1234; 
```

如果要*删除* `AUTO_INCREMENT`，则只需重新定义没有它的列：

```
ALTER TABLE `x`.`billadr` CHANGE `AutoInc` `AutoInc` INT(11) NOT NULL 
```

否则，创建一个**新**列，根据需要复制/重新编号。

# java - Android apk 无法使用 PHP 检索超过 3g 的数据，在 wifi 上工作正常

> ID：15689215
> 
> 赞同：0
> 
> 时间：2013-03-28T18:12:50.547
> 
> 标签：java, php, android, http-post

我的apk有问题。一切都已经完成了，但最后一次测试让我头疼。

开始了。应用程序使用下面的 PHP 处理程序将一些数据插入 mysql 数据库：

```
<?php

$dbh=mysql_connect("www.someDomain.com",$_REQUEST['uiBaze'],$_REQUEST['gBaze']);
mysql_set_charset("utf8", $dbh);

mysql_select_db($_REQUEST['dbName']);

$q=mysql_query($_REQUEST['sql']);
while($e=mysql_fetch_assoc($q)){
$output[]=$e;
}

$encoded = json_encode($output);

print($encoded);

mysql_close();
?> 
```

有了这个简单的 php，我可以使用插入、更新和选择，这足以满足我应用程序的需要。

然后我使用下面的 AsyncTask 类进行连接：

```
protected JSONArray doInBackground(String... params) {
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(linkPhp);
        UrlEncodedFormEntity uefe=new UrlEncodedFormEntity(postparams, HTTP.UTF_8);
        uefe.setContentEncoding(HTTP.UTF_8);
        httpPost.setEntity(uefe);
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();

        is = httpEntity.getContent();
    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection " + e.toString());
    }
    try {

        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "UTF-8"));

        StringBuilder sb = new StringBuilder();

        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    try {
        if (json!=null) {
            jAry = new JSONArray(json);
        } else {
            jAry=new JSONArray();
        }
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }
    return jAry;
} 
```

当我在 wifi 上时它工作正常，但后来我尝试了 3g (HSDPA) 和 2g(EDGE) 但它没有工作。好吧，不完全是因为我可以连接到服务器以检查用户名和密码并检索有关成功输入的更多信息（json 数组中大约 300 个字符）但是当我尝试检索更长的字符串（大约 8k 个字符）时它给了我这个字符串：“httprequest 被主机中断”而不是 JSONArray 的字符串。如果信号不够好，我还做了一个循环尝试更多次，但它也没有帮助。

我的代码是否缺少某些部分？我正在三星 Galaxy Tab 2 上进行测试。哦，当我用手机（不同提供商）中的 SIM 卡替换 SIM 卡时，它起作用了。有时我不得不在我的应用程序中按下刷新按钮，但它起作用了。我知道它与这个提供程序有关，但是其他应用程序可以使用它并且不会抛出那种错误，所以我需要解决这个问题。帮助？:)

我搜索了很多这个问题，但还没有为开发人员提供正确的答案。

如果您需要更多信息，请轻推我。

谢谢！

进展编辑：

发送到 PHP == OK 正在
执行 PHP 脚本 == OK
**正在检索这个输出 == 不行！**

新发现。当我调用方法从服务器检索数据并且此传输成功时，我按以下顺序获得 Toast：
1\. 创建 JSONArray OK
2\. 在 JSONArray 内部 doInBackground(String... params)
3\. HTTPPost OK
4\. InputStream 创建
5\. StringBuffer填充
6\. 保存到 json String OK
7\. (JSONArray) jAry created

如果不成功，则按以下顺序：
1\. 创建 JSONArray OK
2\. 抛出错误，JSONArray=null
3\. 在 JSONArray doInBackground(String... params) 内
4\. HTTPPost OK
5\. InputStream 创建
6\. StringBuffer 填充
7 . Save to json String OK
8\. (JSONArray) jAry error: HTTPRequest was interrupted by the host

我在想...我按以下顺序调用方法：

```
JSONArray jAryS = getJsonArray(nameValuePair); 
```

这一行执行任务：

```
public JSONArray getJsonArray(ArrayList<NameValuePair> params) {
    VrniJSONArray task = new VrniJSONArray(params, PodatkiPrograma.LOKACIJA_PHP);
    try {
        return task.execute().get();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return null;
    } catch (ExecutionException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return null;
    }
} 
```

并且执行来自 doInBackground() 的上述代码。

如果我将代码移入 getJsonArray(); 会有帮助吗？方法？我怀疑在移动网络有时间做出反应之前就抛出了错误，因为主线程没有“等待”这个任务完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:54:49.793

OK 问题三天后解决！:)

源没问题，PHP 没问题，服务器设置也没问题，除了 Galaxy 选项卡上的默认设置用于连接互联网外，一切都很好。ISP 设置代理（当然是为了嗅探我们普通人正在做的事情）阻止了 PHP 的响应，因此没有收到任何答复。删除代理后，一切正常。

感谢@forgivegod 和@chrkad，他们帮助了我，让我了解了更多关于众多Java 类和设置的知识。:)

干杯:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:19:54.103

您的 httpclient 超时。而是像这样创建它。

```
 int timeout = 20000;  // 20 seconds

    // Configure the params and ssl 
    HttpParams httpParams = new BasicHttpParams();
    SchemeRegistry schemeRegistry = new SchemeRegistry();
    schemeRegistry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
    schemeRegistry.register(new Scheme("https", SSLSocketFactory.getSocketFactory(), 443));

    ThreadSafeClientConnManager connManager = new ThreadSafeClientConnManager(httpParams, schemeRegistry);

    // HTC Thunderbolt and certain LG Devices  has an issue where the socket buffer size was set to 2 MB (!), which
    // would cause OutOfMemoryErrors.  As a workaround, manually set the buffer size back to the
    // usual default of 8 KB.  See:
    //   http://stackoverflow.com/questions/5358014/android-httpclient-oom-on-4g-lte-htc-thunderbolt
    HttpConnectionParams.setSocketBufferSize(httpParams, 8192);

    HttpConnectionParams.setConnectionTimeout(httpParams, timeout);
    HttpConnectionParams.setSoTimeout(httpParams, timeout);

    // Create the HttpClient instance
    DefaultHttpClient httpClient = new DefaultHttpClient(connManager, httpParams); 
```

# android - 空指针异常json解析器

> ID：15689218
> 
> 赞同：0
> 
> 时间：2013-03-28T18:12:59.163
> 
> 标签：android, json

这是我尝试过的，

```
JSONObject jsonObject;
    JSONParser jParser = new JSONParser();
    jsonObject = jParser.getJSONFromUrl("http://shoppersays.com/mypromocheck/api/v1/users?&username=avinash&password=avinash2");
    try {
        String Authen_status = jsonObject.getString("Authen_status");
        Toast.makeText(getApplicationContext(), Authen_status, Toast.LENGTH_SHORT).show();
    } catch (JSONException e) { 
        Toast.makeText(getApplicationContext(), "Unable to connect", Toast.LENGTH_LONG).show();
        e.printStackTrace();
    } 
```

但我得到一个`NullPointerException`. 我在 android 2.2 上运行它，它运行成功，然后在 4.0 上尝试，它给出了空指针异常`getstring()`，请帮忙！

编辑1：

日志

```
03-28 23:46:52.641: E/AndroidRuntime(1694): FATAL EXCEPTION: main
03-28 23:46:52.641: E/AndroidRuntime(1694): java.lang.RuntimeException: Unable to start              activity ComponentInfo{com.viralmo.readjson/com.viralmo.readjson.ReadJson}:    java.lang.NullPointerException
03-28 23:46:52.641: E/AndroidRuntime(1694):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
03-28 23:46:52.641: E/AndroidRuntime(1694):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
03-28 23:46:52.641: E/AndroidRuntime(1694):     at android.app.ActivityThread.access$600(ActivityThread.java:122)
03-28 23:46:52.641: E/AndroidRuntime(1694):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
03-28 23:46:52.641: E/AndroidRuntime(1694):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-28 23:46:52.641: E/AndroidRuntime(1694):     at android.os.Looper.loop(Looper.java:137)
03-28 23:46:52.641: E/AndroidRuntime(1694):     at android.app.ActivityThread.main(ActivityThread.java:4340)
03-28 23:46:52.641: E/AndroidRuntime(1694):     at java.lang.reflect.Method.invokeNative(Native Method)
03-28 23:46:52.641: E/AndroidRuntime(1694):     at java.lang.reflect.Method.invoke(Method.java:511)
03-28 23:46:52.641: E/AndroidRuntime(1694):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-28 23:46:52.641: E/AndroidRuntime(1694):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-28 23:46:52.641: E/AndroidRuntime(1694):     at dalvik.system.NativeStart.main(Native Method)
03-28 23:46:52.641: E/AndroidRuntime(1694): Caused by: java.lang.NullPointerException
03-28 23:46:52.641: E/AndroidRuntime(1694):     at com.viralmo.readjson.ReadJson.onCreate(ReadJson.java:23)
03-28 23:46:52.641: E/AndroidRuntime(1694):     at android.app.Activity.performCreate(Activity.java:4465)
03-28 23:46:52.641: E/AndroidRuntime(1694):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
03-28 23:46:52.641: E/AndroidRuntime(1694):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
03-28 23:46:52.641: E/AndroidRuntime(1694):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:17:23.343

把它扔到 AsyncTask() 中的 doInBackground() 中。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

和一个教程：[http ://www.vogella.com/articles/AndroidBackgroundProcessing/article.html#asynctask](http://www.vogella.com/articles/AndroidBackgroundProcessing/article.html#asynctask)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:17:38.693

是的，正如@RaghavSood 评论的那样..androdi 3.x 或更高版本，不允许在 UI 线程上进行网络操作，但较低版本将允许。

因此，当您尝试执行网络操作时，在 3.x 以上版本中，您将获得 NetworkOnMainThread 异常。

```
 jsonObject = jParser.getJSONFromUrl("http://shoppersays.com/mypromocheck/api/v1/users?&username=avinash&password=avinash2"); 
```

`jsonObject`当您未能从服务中获得响应时，您将在此处为空。所以对 null 的 jsonObject 的操作会抛出`NullPointerException`

> 如何克服它？

使用单独的线程或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)执行长时间运行的操作

# objective-c - 如何更改 iPad 的弹出视图位置 - obj C

> ID：15689221
> 
> 赞同：0
> 
> 时间：2013-03-28T18:13:01.707
> 
> 标签：objective-c, ipad, uipopovercontroller, uipopover

我在这里有一点问题。我已经在工具栏按钮单击时激活了一个弹出视图。但是视图不在我想要的位置。请参阅屏幕截图
第一个屏幕显示我拥有的和第二个我想要的。顺便说一句：popview 有问题。不涉及 xib 或故事板。
![在此处输入图像描述](../Images/f800cbadd5644f839719eeeb618a42e2.png)

一些代码

```
 -(IBAction)addbutton:(UIToolbar *)sender;
{
        //build our custom popover view
    UIViewController* popoverContent = [[UIViewController alloc]
                                        init];
    UIView* popoverView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 0, 0)];
    popoverView.backgroundColor = [UIColor blackColor];

    /*
     * Adding buttons programaticly to popout view
     * button code etc 
     */ 
    popoverContent.contentSizeForViewInPopover = CGSizeMake(400, 300);

    //create a popover controller
    self.popoverController = [[[UIPopoverController alloc]
                               initWithContentViewController:popoverContent] autorelease];

    [popoverController presentPopoverFromRect:popoverButton.frame
                                            inView:self.view
                          permittedArrowDirections:UIPopoverArrowDirectionLeft
                                          animated:YES];

    //release the popover content
    [popoverView release];
    [popoverContent release];
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:50:26.470

您`popoverButton`可能不是 的子视图`self.view`，因此使用它的`frame`相对值会导致矩形不正确。用于`popoverButton.bounds`矩形和`popoverButton`参数`fromView`。

请注意，该`fromView`参数并*不能*确定弹出框将在哪个视图中显示（它将始终位于所有内容之上），而是相对于应该解释矩形的*哪个视图的坐标系。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:23:19.633

```
[popoverController presentPopoverFromRect:popRect inView:self.view  permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

尝试改变框架`popRect`。

# unix - Unix 中的导出命令

> ID：15689225
> 
> 赞同：0
> 
> 时间：2013-03-28T18:13:14.230
> 
> 标签：unix, export

我是 Unix 新手，我知道该`export`命令可用于创建会话变量，但以下命令的目的是什么：

```
bash-3.2$ export $TEST
declare -x PWD="/home/username"
declare -x SHELL="/bin/bash"
declare -x SSH_TTY="/dev/pts/4"
declare -x USER="username" 
```

请帮助我理解这个命令。我没有任何名为 TEST 的变量，但是当我给出这个命令时，shell 打印了一些输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:29:46.767

shell 将不存在的变量扩展`$TEST`为一个空字符串，然后运行`export`不带参数的命令。当您这样做时，shell 会列出导出的环境变量。

如果您想导出一个空变量 TEST，您应该编写以下任何一种：

```
export TEST
export TEST=
export TEST=''
export TEST="" 
```

（在这种情况下，还有其他方法可以达到相同的效果，例如`export TEST=$TEST`or，或多或少地，`export TEST="$TEST"`，但通常缩写为`export TEST`。）

输出中的详细`declare -x`符号旨在允许您将输出写入文件，然后使用`.`（点）或`source`命令重新加载环境。不同的 shell 以不同的方式呈现输出，并且不一定可重用。

该`set`命令类似（但更复杂）。它可用于设置 shell 选项、设置位置参数（`$1`、`$2`等），但是当不带参数运行时，它会列出设置的变量。请注意，并非创建的每个变量都是导出的环境变量。

# database - 替换值后生成新变量

> ID：15689230
> 
> 赞同：0
> 
> 时间：2013-03-28T18:13:28.980
> 
> 标签：database, windows, r

嗨，我是 R 新手，我想做一些简单的事情。我缺少 R 作为 NA 的值，我用平均值替换了它们。替换这些值后，我想创建一个新变量。这是我试图获取新变量的内容：

`mydata$xyz[is.na(mydata$xyz)] <- mean(mydata$xyz, na.rm = TRUE) = mydata$xyz2`

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:20:37.763

尝试

```
mydata$xyz2 <- mydata$xyz
mydata$xyz2[is.na(mydata$xyz)] <- mean(mydata$xyz, na.rm = TRUE) 
```

# reporting-services - SQL Server 2008 R2 / SSRS 2008：服务水平报告创建

> ID：15689231
> 
> 赞同：0
> 
> 时间：2013-03-28T18:13:31.297
> 
> 标签：reporting-services, sql-server-2008-r2, ssrs-2008

我刚刚开始学习 SSRS，并且只是在 SQL Server 中级，我正在尝试在 SSRS 中创建一个报告，以计算以下场景下的总时间：

1.  通话开始 [时间]
2.  通话进度 [时间]
3.  通话进度 [时间]
4.  坚持[时间]
5.  通话进度 [时间]
6.  坚持[时间]
7.  通话进度 [时间]
8.  通话结束[时间]

我试图获得的数据：第 8 步 - 第 1 步 - （第 5 步 - 第 4 步） - （第 7 步减去第 6 步），这样我就可以得到一个服务级别报告调用所花费的原始时间。

要记住的事情：

*   可能是也可能不是持有，
*   可能会或可能不会多次持有，
*   可以背靠背放置两个保持。

如果我在 Visual Basic 中执行此操作，我将使用一个数组并循环遍历它来获取我的变量。不知道如何执行此操作，或者是否可以在 SSRS 或 SQL Server 2008 R2 中执行此操作。

帮助？（如果您需要更多信息，我很乐意提供）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:20:29.460

如果您尝试获取计算列，这听起来更像是 SQL 问题而不是 SSRS 问题。我的问题是来自您的结构，这些点是 SQL 还是行中的独立列？如果它们是列，那就容易多了。

看来您只是从结束时间中删除了开始时间，然后是持续时间的一些任意数字。为了执行 SQL 操作，我将给出一个在 SQL Management Studio 中自我提取的示例：

```
declare @Time1 time = '15:00', @Time2 time = '16:42', @DurationMinutes int = 34;

select 
    @Time1 as Time1
,   @Time2 as Time2

-- datediff gives you differences in an incremenet you specify between two values of date, time, or datetime
,   datediff(hour, @Time1, @Time2) as DifferenceInHours
,   datediff(second, @Time1, @Time2) as DifferenceInSeconds
,   datediff(minute, @Time1, @Time2) as DifferenceInMinutes

-- Dateadd can add or subtract an increment type and value from a point specified.  Be careful if you use ONLY TIME that you may go back a day and not notice it
,   dateadd(minute, - @DurationMinutes, @Time1) as Time

,   datediff(minute, @Time1, @Time2) - @DurationMinutes as TimeInMinutesLessDurationOfArbitraryTalkTime 
```

# d3.js - D3 条形图疑难解答

> ID：15689232
> 
> 赞同：1
> 
> 时间：2013-03-28T18:13:32.560
> 
> 标签：d3.js

我第一次深入研究 D3，并**试图创建一个小的条形图**，以可视化一些关于食品消费随时间推移的研究。使用一些在线示例，我设法让面积图正常工作。但是条形图会让我更好地理解数据。我觉得到目前为止我的代码已经接近工作，但我显然错过了一些东西。任何提示或帮助都会很棒。

例如，这是我的 .csv 文件的片段：

```
group,date,totals
acid,1641,8438
bird,1641,12
cheese,1641,22
cured meat,1641,506
dried fish,1644,158
fresh fish,1644,1196
meat,1644,140
brined/pickled fish,1645,2844
salt,1645,4382
... 
```

到目前为止的代码：

```
<script type="text/javascript">

var margin = {top: 20, right: 30, bottom: 30, left: 40},
    width = 500 - margin.right - margin.left,
    height = 150 - margin.top - margin.bottom,
    parse = d3.time.format("%Y").parse;

// scales
var x = d3.time.scale().range([0, width]),
    y = d3.scale.linear().range([height, 0]);

// for the area charts example, an area generator
var area = d3.svg.area()
    .interpolate("monotone")
    .x(function(d) { return x(d.date); })
    .y0(height)
    .y1(function(d) { return y(d.totals); });

// for the area charts example, a line generator
var line = d3.svg.line()
    .interpolate("monotone")
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.totals); });

// load data
d3.csv("revised.csv", function(error, data) {

  // nest values by group
  var groups = d3.nest()
      .key(function(d) { return d.group; })
      .entries(data);

  // parse dates and numbers, assume values are sorted by date
  // compute the maximum totals per group
  groups.forEach(function(s) {
    s.values.forEach(function(d) { d.date = parse(d.date); d.totals = +d.totals; });
    s.maxtotals = d3.max(s.values, function(d) { return d.totals; });
  });

  // compute the minimum and maximum date across groups
  x.domain([
    d3.min(groups, function(s) { return s.values[0].date; }),
    d3.max(groups, function(s) { return s.values[s.values.length - 1].date; })
  ]);
  y.domain([0, d3.max(data, function(d) { return d.totals; })]);

  // add an SVG element for each group
  var svg = d3.select("body").selectAll("g")
      .data(groups)
    .enter().append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
    .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  // print x axis
  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.svg.axis().scale(x).orient("bottom"));
  // print y axis
  svg.append("g")
      .attr("class", "y axis")
      .call(d3.svg.axis().scale(y).orient("left"));

    // Trying here to render my bar charts. 
    // -----------------------------------
    svg.selectAll(".bar")
       .data(groups)
     .enter().append("rect")
       .attr("x", x)
       .attr("y", function(d) { return d.maxtotals; })
       .attr("width", width / groups.length)
       .attr("height", function(d) { return d.maxtotals; });

// These are the area charts, that work. Commented out for now.
  //svg.append("path")
  //    .attr("class", "area")
  //    .attr("d", function(d) { y.domain([0, d.maxtotals]); return area(d.values); });

  //svg.append("path")
  //    .attr("class", "bar")
  //    .attr("d", function(d) { y.domain([0, d.maxtotals]); return line(d.values); });

  // Add a small label for the group name.
  svg.append("text")
      .attr("x", width - 6)
      .attr("y", height - 6)
      .attr("text-anchor", "end")
      .text(function(d) { return d.key; });
});

</script> 
```

面积图现在看起来像这样（上面的代码改变了它们的外观，但它给了你一个想法）：

![屏幕抓取](../Images/a935d124072ec17a02e91d2b181434d7.png)

任何指针？我在看什么？提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:41:55.047

我突然想到的第一件事是你没有在你的和属性中应用你的`y`比例，也没有适当地缩放属性。由于您确定这些属性值的方式，它应该像将比例应用于您已经返回的值一样简单。请注意，在未来，这可能无法正常工作。`d.maxtotals``"y"``"height"``"width"`

另一个问题是，您可能根本不打算让`"y"`属性与您的数据相关。那`"height"`是工作。将它们`"y"`属性设置为您提供给 x 轴的相同 y 坐标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T04:23:12.980

感谢[Elijah](https://stackoverflow.com/users/1350344/elijah)的一些惊人帮助，我们成功地完成了这项工作。这是修订版：

```
<script type="text/javascript">

var margin = {top: 20, right: 30, bottom: 30, left: 40},
    width = 400 - margin.right - margin.left,
    height = 150 - margin.top - margin.bottom,
    parse = d3.time.format("%Y").parse;

// scales
var x = d3.time.scale().range([0, width]),
    y = d3.scale.linear().range([0, height]);

// load data
d3.csv("revised.csv", function(error, data) {

  // nest values by group
  var groups = d3.nest()
      .key(function(d) { return d.group; })
      .entries(data);

  // parse dates and numbers, assume values are sorted by date
  // compute the maximum totals per group
  groups.forEach(function(s) {
    s.values.forEach(function(d) { d.date = parse(d.date); d.totals = +d.totals; });
    s.maxtotals = d3.max(s.values, function(d) { return d.totals; });
  });

  // compute the minimum and maximum date across groups
  x.domain([
    d3.min(groups, function(s) { return s.values[0].date; }),
    d3.max(groups, function(s) { return s.values[s.values.length - 1].date; })
  ]);
  y.domain([0, d3.max(data, function(d) { return d.totals; })]);

  // add an SVG element for each group
  var svg = d3.select("body").selectAll("g")
      .data(groups)
    .enter().append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .each(function(d) {
          var g = d3.select(this);
          g.append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  y.domain([0, d3.max(d.values, function(r) { return r.totals; })]);

  g.selectAll("rect.aevents")
    .data(d.values)
  .enter().append("rect")
    .attr("height", function(p) {return y(p.totals)})
    .attr("width", 5)
    .attr("x", function(p, q) {return x(p.date)})
    .attr("y", function(p) {return height - y(p.totals)})
    .on("click", function(p) {console.log(p.date.year())})
    // .attr("class", "bar")
    })

  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.svg.axis().scale(x).orient("bottom"));

  svg.append("g")
      .attr("class", "y axis")
      .call(d3.svg.axis().scale(y).orient("left"));

  // Add a small label for the group name.
  svg.append("text")
      .attr("x", width - 6)
      .attr("y", height - 6)
      .attr("text-anchor", "end")
      .text(function(d) { return d.key; });

});

</script> 
```

主要变化：`.each()`函数作为`g`元素添加到SVG中，`data.values`作为其数据调用。`y()`比例也被翻转（从到`0,h`）`h,0`。我的另一个疏忽是该`.each()`功能已包含该`d3.max()`功能，因此每个项目组的最大总数是针对单个组而不是所有组进行检查的。现在，我已经很好地呈现了条形图，而不是面积图，它显示了每个食物组的总量。

# python - 使用 numpy ufunc 与内置运算符

> ID：15689237
> 
> 赞同：6
> 
> 时间：2013-03-28T18:13:46.043
> 
> 标签：python, numpy

我很好奇使用 numpy [ufuncs](http://docs.scipy.org/doc/numpy/reference/ufuncs.html)与内置运算符与内置运算符的“函数”版本的好处和权衡。

我对所有 ufunc 都很好奇。也许有时有些比其他的更有用。但是，`<`为了简单起见，我将使用我的示例。

有几种方法可以通过单个数字“过滤”一个 numpy 数组以获得一个布尔数组。每种形式都给出相同的结果，但是是否有首选的时间/地点来使用其中的一种？这个例子我将一个数组与一个数字进行比较，所以所有 3 都可以工作。

考虑使用以下数组的所有示例：

```
>>> x = numpy.arange(0, 10000)
>>> x
array([   0,    1,    2, ..., 9997, 9998, 9999]) 
```

## '<' 运算符

```
>>> x < 5000
array([ True,  True,  True, ..., False, False, False], dtype=bool)
>>> %timeit x < 5000
100000 loops, best of 3: 15.3 us per loop 
```

## 运算符.lt

```
>>> import operator
>>> operator.lt(x, 5000)
array([ True,  True,  True, ..., False, False, False], dtype=bool)
>>> %timeit operator.lt(x, 5000)
100000 loops, best of 3: 15.3 us per loop 
```

## numpy.less

```
>>> numpy.less(x, 5000)
array([ True,  True,  True, ..., False, False, False], dtype=bool)
>>> %timeit numpy.less(x, 5000)
100000 loops, best of 3: 15 us per loop 
```

请注意，它们都实现了几乎相同的性能和完全相同的结果。我猜所有这些调用实际上最终都在同一个函数中，因为`<`它们`operator.lt`都映射到`__lt__`一个 numpy 数组，这可能是使用`numpy.less`或等效实现的？

那么，哪个更“惯用”和“首选”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:20:40.547

在这种情况下，首选形式是`x < 5000`因为它更简单，并且您已经在使用 numpy 数组。

`ufunc`s 旨在允许对任何类型的数据进行这些操作（不仅是 numpy 数组）

```
>>> numpy.less([1, 2, 3, 4, 6, 8], 5)
array([ True,  True,  True,  True, False, False], dtype=bool)

>>> [1, 2, 3, 4, 6, 8] < 5
False 
```

在 Python 3 上，最后一个比较会引发错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T18:54:00.600

一般来说，考虑到“可读性很重要”的口头禅，实际操作员应该始终是您的首选。使用`operator`版本有一个地方，当你可以`lambda a, b: a < b`用更紧凑的替换时`operator.lt`，但除此之外没有太多。而且您真的不应该使用对相应 ufunc 的显式调用，除非您想使用`out`参数将计算值直接存储在现有数组中。

也就是说，如果您担心的是性能，您应该进行公平比较，因为正如您所说，您所有的调用最终都由 numpy 的`less`ufunc 处理。

如果您的数据已经在一个 numpy 数组中，那么您已经证明它们的性能都相似，所以`<`为了清楚起见，请使用运算符。

如果您的数据在 python 对象中，比如列表，该怎么办？好吧，这里有一些时间供你思考：

```
In [13]: x = range(10**5)

In [19]: %timeit [j < 5000 for j in x]
100 loops, best of 3: 5.32 ms per loop

In [20]: %timeit np.less(x, 5000)
100 loops, best of 3: 11.3 ms per loop

In [21]: %timeit [operator.lt(j, 5000) for j in x]
100 loops, best of 3: 16.2 ms per loop 
```

不知道为什么`operator.lt`这么慢，但你显然想远离它。如果您想从 Python 对象输入中获取一个 numpy 数组作为输出，那么这可能是最快的：

```
In [22]: %timeit np.fromiter((j < 5000 for j in x), dtype=bool, count=10**5)
100 loops, best of 3: 7.91 ms per loop 
```

请注意，在 numpy 数组上运行的 ufunc 比上述任何一个都**快得多**：

```
In [24]: y = np.array(x)

In [25]: %timeit y < 5000
10000 loops, best of 3: 82.8 us per loop 
```

# c++ - XKB - 获取 Caps Lock 掩码

> ID：15689240
> 
> 赞同：2
> 
> 时间：2013-03-28T18:13:48.280
> 
> 标签：c++, xlib, capslock

我一直在尝试编写一个启用/禁用不同锁（num lock、caps lock、scroll lock）的程序，但我一直遇到大写锁定问题。出于某种原因，XKB 不知道“CapsLock”vmod，但它知道 ScrollLock 和 NumLock。

我如何获得大写锁定面具？

* * *

我的功能是这样的（几乎直接从 numlockx 复制）：

```
unsigned int KL_Modifier::get_mask(const char* name) {
    XkbDescPtr xkb;
    if ((xkb = XkbGetKeyboard(this->disp, XkbAllComponentsMask, XkbUseCoreKbd)) != NULL) {
            int i;
            unsigned int mask = 0;
            if (!xkb || !xkb->names) {
                    mask = 0;
                    goto end;
            }
            for (i = 0; i < XkbNumVirtualMods; i++) {
                    char* mod_str = XGetAtomName(this->disp, xkb->names->vmods[i]);
                    std::cout << mod_str << " " << name << std::endl;
                    if (mod_str != NULL && strcmp(name, mod_str) == 0) {
                            XkbVirtualModsToReal(xkb, 1 << i, &mask);
                            //break;
                    }
            }
end:
            XkbFreeKeyboard(xkb, 0, True);
            return mask;
    }
    return 0;
} 
```

我这样称呼它：

```
unsigned int mask = this->get_mask("CapsLock");
assert(mask != 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:18:18.367

我不知道我的问题是什么，但我找到了解决方案：`XkbKeysymToModifiers`改为使用，如下所示：

```
unsigned int mask = XkbKeysymToModifiers(display, XK_Caps_Lock); 
```

`display`一个在哪里`Display*`。有了这个解决方案，我可以切换`XK_Caps_Lock`到其他锁。`XK_Num_Lock``XK_Scroll_Lock`

# c++ - 使用 C++ (MVS) 的目标文件中的重复定义

> ID：15689242
> 
> 赞同：0
> 
> 时间：2013-03-28T18:13:54.767
> 
> 标签：c++, variables, dll, export, duplicates

我的 DLL 项目中有这样的文件结构：

```
// common_header.h //////////////////

   extern int  CommonVar = 0;
   extern bool CommonVar2 = false;

   EXPORT_API void ThisFunction();
   EXPORT_API bool ThisOtherFunction();

// library_part1.cpp ////////////////
   #include "common_header.h"

   EXPORT_API void ThisFunction() {
       if (CommonVar2) CommonVar++;
   }

// library_part2.cpp ////////////////
   #include "common_header.h"

   EXPORT_API bool ThisOtherFunction() {
       if (CommonVar>2) return true;
       return false;
   } 
```

正如我所说，我使用 Microsoft Visual Studio 将其构建到一个 DLL 中，当然，我得到了与这些变量在目标文件中出现两次的事实相关的链接错误。这是因为它为每个 .cpp 创建了一个 .obj，并且每个 .cpp 如何包含相同的标头，它还导出变量。你懂了。现在，我想知道是否有解决方案，这样我就可以为 .CPP 和 extern 保留这两个变量（我的意思是，至少能够从使用 DLL 的应用程序中读取它们）？当然，它们只能在 .obj 文件中声明一次。也许有一些预编译器命令（比如`#pragma once`标题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:34:37.740

我找到了。这是解决方案：

```
// common_header.h //////////////////

extern EXPORT_API int  CommonVar;
extern EXPORT_API bool CommonVar2;

EXPORT_API void ThisFunction();
EXPORT_API bool ThisOtherFunction();

// library_part1.cpp ////////////////
#include "common_header.h"

EXPORT_API int  CommonVar = 0;
EXPORT_API bool CommonVar2 = false;

EXPORT_API void ThisFunction() {
   if (CommonVar2) CommonVar++;
}

// library_part2.cpp ////////////////
#include "common_header.h"

EXPORT_API bool ThisOtherFunction() {
   if (CommonVar>2) return true;
   return false;
} 
```

# android - 我怎样才能使这条线水平？

> ID：15689246
> 
> 赞同：-2
> 
> 时间：2013-03-28T18:14:00.537
> 
> 标签：android

```
for (int x = 0; x < canvas.getHeight(); x += LINE_SPACING) {
canvas.drawLine(0, 0, 0, canvas.getWidth(), paint); 
```

此代码制作一条垂直线。我怎样才能使这个水平

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:17:00.253

您将 x 和 y 的概念颠倒过来：

```
canvas.drawLine(0, 0, canvas.getWidth(), 0, paint); 
```

此外，目前还不清楚为什么你有这个循环。如果你想画一堆水平线，它应该是这样的：

```
for (int y = 0; y < canvas.getHeight(); y += LINE_SPACING) {
    canvas.drawLine(0, y, canvas.getWidth(), y, paint);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:17:53.013

```
for (int y = 0; y < canvas.getWidth(); y += LINE_SPACING) {
canvas.drawLine(0, 0, canvas.getHeight(), 0, paint); 
```

# backbone.js - 骨干替代语法

> ID：15689247
> 
> 赞同：0
> 
> 时间：2013-03-28T18:14:01.190
> 
> 标签：backbone.js, syntax

我来自 php，如果 else 语句像

```
<?php if(): ?>
    // conditional html goes here
<?php endif;?> 
```

我的问题是，是否有办法在骨干视图上做同样的事情，比如

```
<% if(condition): %>
    html code goes here ;

<% endif; %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:47:49.123

如果您使用的是默认的[下划线模板](http://underscorejs.org/#template)，那么：

```
<% if(condition) { %>
    HTML goes here
<% } %> 
```

不要忘记`{`and`}`否则你会一团糟。

演示：http: [//jsfiddle.net/ambiguous/W33Tw/](http://jsfiddle.net/ambiguous/W33Tw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:17:21.447

这个问题真的应该用你在骨干上使用的任何模板解决方案来标记。如果您正在使用车把（这很棒[http://handlebarsjs.com/](http://handlebarsjs.com/)），您可以这样做：

```
{{#if contextPropertyThatEvaluatesSanelyAsABoolean}}
  your html!
{{else}}
  different html!
{{/if}} 
```

然后传入如下上下文：

```
$(@el).html(this.template({
  contextPropertyThatEvaluatesSanelyAsABoolean: true
})) 
```

或者如果您使用的是咖啡脚本：

```
$(@el).html @template
  contextPropertyThatEvaluatesSanelyAsABoolean: true 
```

其他模板语言也有类似的解决方案。

# c++ - 使用 gmock 进行外部依赖

> ID：15689249
> 
> 赞同：1
> 
> 时间：2013-03-28T18:14:04.093
> 
> 标签：c++, googletest, googlemock

如何使用 gmock 或 gtest 在此处模拟 CustomStream 外部依赖项？

```
#include <mylib/common/CustomStream.h>

namespace sender {
    void Send(int p1){
        mylib::common::CustomStream stream;
        stream << p1;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:34:17.070

使 CustomStream 从纯虚拟接口继承。然后将测试替身作为依赖项注入到函数中。例如：

```
namespace mylib {
    namespace common {

        class OutputStream {
            virtual void Output(int value) = 0;
            OutputStream& operator<<(int value) { this->Output(value); return *this; }
        };

        class CustomStream : public OutputStream {
            virtual void Output(int value) { /*...*/ };
        };

    }
}

namespace sender {
    void Send(OutputStream& stream, int p1) {
        stream << p1;
    }
}

namespace tests {

    class MockOutputStream : public mylib::common::OutputStream {
        MOCK_METHOD1(Output, void (int value));
    };

    TEST(testcase) {
        MockOutputStream stream;
        EXPECT_CALL(stream, Output(2));
        sender::Send(stream, 2);
    }

} 
```

但是，当然，将每个类放在一个单独的头文件中。并且拥有一个没有类的函数（“发送”）也不是一个好主意，但我猜这是一个遗产。（注意：我没有尝试编译它。它是 Google Mock+Test-ish 语法。）

# php - PHPKB 扩展会话

> ID：15689250
> 
> 赞同：1
> 
> 时间：2013-03-28T18:14:05.590
> 
> 标签：php, session, cookies

我继承了一个 php 知识库 cms，有人要求我延长会话，这样用户就不必在很长一段时间内重新登录，比如说五天。我在登录函数中发现我可以通过添加以下代码来扩展 cookie 最大/生命周期值。

```
setcookie(session_name(),$_COOKIE[session_name()],time()+3600*24*5); 
```

我在开发人员工具中检查了 cookie，它确实延长了生命周期，但用户在几分钟不活动后仍被重定向到登录。同样使用 Chromephp 扩展，当我在刷新登录页面时将会话对象写入控制台日志时，我发现会话变量为空。

我在 Ubuntu 灯服务器上运行，我检查了 php.ini 中的一些选项，但似乎找不到可以延长会话生命周期的选项。另外一个问题是，当多达 50 个用户可能正在使用此 kb 时，通过扩展会话会遇到服务器内存和性能方面的风险。一如既往地提前感谢任何建议是受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:21:15.960

为什么要设置与会话名称同名的 cookie？那根本没有用。典型的 cookie 名称是`PHPSESSID`.

话虽如此，只是延长 cookie 的过期时间并不会真正延长会话数据在服务器上的生存时间。

您需要在 PHP.ini 设置中实际设置会话生命周期和会话 cookie 生命周期。请参阅包含如何执行此操作的 StackOverflow 问题的链接。

[如何在 30 分钟后使 PHP 会话过期？](https://stackoverflow.com/questions/520237/how-do-i-expire-a-php-session-after-30-minutes)

# hibernate - Hibernate 4 和 Postgres 9：Criteria.list() 抛出异常

> ID：15689251
> 
> 赞同：1
> 
> 时间：2013-03-28T18:14:25.780
> 
> 标签：hibernate, postgresql-9.1

我遇到了涉及 postgres jdbc 驱动程序版本 9.1-901.jdbc3 的奇怪问题。这是我的道

```
 @Override
    public List<Products> getProductsListByIds(List<String> ids, Integer storeId) {
    Criteria criteria = getSession().createCriteria(Products.class)
    .add(Restrictions.eq("storeId", storeId))
    .add(Restrictions.in("productId", ids))
    .add(Restrictions.isNotEmpty("createdAt"))
    .add(Restrictions.isNotEmpty("updatedAt"))
    .add(Restrictions.isNotNull("id"))
    return criteria.list();
    } 
```

当我运行 SQL 语句时，它返回 96 个结果，我猜测 hibernate 的列表大小固定为 100（这是我传递限制的 id 数量）并在列表中返回 4 个空对象。结果 postgres jdbc 驱动程序在尝试将 null 映射到时间戳时失败，但出现以下异常：

```
org.hibernate.exception.DataException: Bad value for type timestamp : 
    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:134)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractResultSetProxyHandler.continueInvocation(AbstractResultSetProxyHandler.java:108)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at com.sun.proxy.$Proxy44.getTimestamp(Unknown Source)
    at org.hibernate.type.descriptor.sql.TimestampTypeDescriptor$2.doExtract(TimestampTypeDescriptor.java:67)
    at org.hibernate.type.descriptor.sql.BasicExtractor.extract(BasicExtractor.java:65)
    at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:261)
    at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:257)
    at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:247)
    at org.hibernate.type.AbstractStandardBasicType.hydrate(AbstractStandardBasicType.java:332)
    at org.hibernate.persister.entity.AbstractEntityPersister.hydrate(AbstractEntityPersister.java:2873)
    at org.hibernate.loader.Loader.loadFromResultSet(Loader.java:1668)
    at org.hibernate.loader.Loader.instanceNotYetLoaded(Loader.java:1600)
    at org.hibernate.loader.Loader.getRow(Loader.java:1500)
    at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:712)
    at org.hibernate.loader.Loader.processResultSet(Loader.java:940)
    at org.hibernate.loader.Loader.doQuery(Loader.java:910)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:341)
    at org.hibernate.loader.Loader.doList(Loader.java:2516)
    at org.hibernate.loader.Loader.doList(Loader.java:2502)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2332)
    at org.hibernate.loader.Loader.list(Loader.java:2327)
    at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:124)
    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1621)
    at org.hibernate.internal.CriteriaImpl.list(CriteriaImpl.java:374)
    at com.insparq.insparqsvc.dao.impl.StoresDAOImpl.getProductsListByIds(StoresDAOImpl.java:115)
    at com.insparq.insparqsvc.service.impl.StoreServiceImpl.getProductsListByIds(StoreServiceImpl.java:112)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
    at com.sun.proxy.$Proxy38.getProductsListByIds(Unknown Source)
    at com.insparq.jobserver.service.impl.ScheduledJobServiceImpl.normalizeProducts(ScheduledJobServiceImpl.java:446)
    at com.insparq.jobserver.service.impl.ScheduledJobServiceImpl.parseCSV(ScheduledJobServiceImpl.java:415)
    at com.insparq.jobserver.service.impl.ScheduledJobServiceImpl.generateProductsCSV(ScheduledJobServiceImpl.java:214)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:198)
    at com.sun.proxy.$Proxy39.generateProductsCSV(Unknown Source)
    at com.insparq.jobserver.test.ScheduledJobTest.processJob(ScheduledJobTest.java:173)
    at com.insparq.jobserver.test.ScheduledJobTest.test(ScheduledJobTest.java:111)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:88)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:172)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:104)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:70)
Caused by: org.postgresql.util.PSQLException: Bad value for type timestamp : 
    at org.postgresql.jdbc2.TimestampUtils.loadCalendar(TimestampUtils.java:246)
    at org.postgresql.jdbc2.TimestampUtils.toTimestamp(TimestampUtils.java:321)
    at org.postgresql.jdbc2.AbstractJdbc2ResultSet.getTimestamp(AbstractJdbc2ResultSet.java:437)
    at org.postgresql.jdbc2.AbstractJdbc2ResultSet.getTimestamp(AbstractJdbc2ResultSet.java:2446)
    at org.apache.commons.dbcp.DelegatingResultSet.getTimestamp(DelegatingResultSet.java:229)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractResultSetProxyHandler.continueInvocation(AbstractResultSetProxyHandler.java:104)
    ... 82 more
Caused by: java.lang.NumberFormatException: Timestamp has neither date nor time
    at org.postgresql.jdbc2.TimestampUtils.loadCalendar(TimestampUtils.java:243)
    ... 91 more 
```

有没有办法告诉休眠只加载它得到的结果而不用空值填充其余元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:52:36.753

Hibernate 没有固定的列表大小，它只是执行查询。它不能将行值转换为时间戳。可能是行有日期类型。在我在数据库中设置非空限制后，当行包含零值（00/00/00 ...）时，我在 mysql 中遇到了类似的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:18:24.557

我不认为[isNotEmpty](http://docs.jboss.org/hibernate/orm/3.3/api/org/hibernate/criterion/Restrictions.html#isNotEmpty%28java.lang.String%29)是对时间戳字段（如`createdAt`.

根据文档，它仅适用于集合属性。

> 将集合值属性限制为非空

你应该在这里使用[isNotNull](http://docs.jboss.org/hibernate/orm/3.3/api/org/hibernate/criterion/Restrictions.html#isNotNull%28java.lang.String%29)。

```
public List<Products> getProductsListByIds(List<String> ids, Integer storeId) {
    Criteria criteria = getSession().createCriteria(Products.class)  
        .add(Restrictions.eq("storeId", storeId))
        .add(Restrictions.in("productId", ids))
        .add(Restrictions.isNotNull("createdAt"))
        .add(Restrictions.isNotNull("updatedAt"))
        .add(Restrictions.isNotNull("id"))
    return criteria.list();
} 
```

*另附注：Postgres 驱动 9.1.901 似乎有些系列性能问题，我建议移至最新版本 9.1.902 或 9.1.903*

# sql - 插入表变量很慢

> ID：15689257
> 
> 赞同：0
> 
> 时间：2013-03-28T18:14:45.850
> 
> 标签：sql, sql-server, sql-server-2008

我在存储过程中有一个动态sql，比如

```
@sql = 'SELECT a, 
       b, 
       c d 
FROM   table t 
       LEFT JOIN table2 t2 
              ON t.id = t2.id ' 
```

然后插入到表变量中

```
Insert into @tblCustomer

EXECUTE sp_executesql @sql 
```

插入语句需要很长时间才能执行。有什么办法可以改进吗？

我正在使用 SQL Server 2008

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:31:03.990

尝试以下查询：

```
@sql = SELECT a, b, c, d 
FROM table t (NOLOCK) LEFT JOIN table2 t2 (NOLOCK) ON t.id = t2.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:21:07.483

虽然你不能做太多（简单的 sql 查询）。

尝试使用临时表

```
CREATE TABLE #TempTable(
 ID int,
 col2 <datatype>,
 col3 <datatype>) 
```

并插入其中

看看它是否工作得更快。[在此处](https://stackoverflow.com/questions/27894/whats-the-difference-between-a-temp-table-and-table-variable-in-sql-server)阅读更多信息

尝试索引您的数据库。它应该会给您带来明显的性能提升。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-28T18:23:21.670

似乎无法优化。查询是直截了当的。如果使用临时表，由于内存使用，可能会进一步减慢进程。

# ios - 当使用隐藏的导航栏或模态转场推动转场时，视图隐藏在状态栏后面

> ID：15689259
> 
> 赞同：1
> 
> 时间：2013-03-28T18:14:48.657
> 
> 标签：ios, segue, statusbar, viewcontroller

我正在尝试寻找不显示导航栏的视图。如果我对视图执行 push segue 并隐藏导航栏，则视图的一部分隐藏在状态栏后面，它应该显示在状态栏下方 20 点处，这样它就不会被遮挡，如果我这样做也会发生同样的事情模态序列。它只有在我执行 push segue 但不隐藏导航栏时才能正确显示。

我不确定为什么会发生这种情况，我可以通过将视图向下移动 20 点来解决它，但这似乎是一种解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:32:24.263

我被引导到另一个[帖子](https://stackoverflow.com/questions/10403251/iphone-top-of-gadgets-cut-off-first-time-it-is-drawn)，该帖子建议使用视图控制器的 WantsFullScreenLayout 属性，因此我将其添加到 viewWillAppear：

self.wantsFullScreenLayout = 否；

这似乎解决了这个问题，不知道为什么我需要它，因为我认为默认值为 NO，但它现在可以工作

# python - traitsui 文件对话框更改活动窗口

> ID：15689260
> 
> 赞同：0
> 
> 时间：2013-03-28T18:14:49.160
> 
> 标签：python, enthought, traitsui

我有一个有许多小窗口的大型应用程序。我想使用 traitsui 的文件对话框从这些窗口打开一些文件。但是，当我这样做时，文件对话框会正确生成并选择一个文件，但它也会在完成后始终将活动窗口切换到不需要的窗口。我真的很困惑为什么。

这是一个显示相同问题的简化测试：

```
from traitsui.api import *
from traits.api import *
from traitsui.file_dialog import *

class BigApplication(HasTraits):
  subwindow=Instance(HasTraits)
  open_subwindow=Button('clickme')

  traits_view=View(Item(name='open_subwindow'),height=500,width=500)

  def _subwindow_default(self):
    return Subwindow()

  def _open_subwindow_fired(self):
    self.subwindow.edit_traits()

class Subwindow(HasTraits):
  f=File
  some_option = Bool
  openf=Button('Browse for file')

  traits_view=View(Item(name='f',style='text'),
                Item(name='some_option'),
                Item(name='openf'),buttons=OKCancelButtons)

  def _openf_fired(self):
    self.f=open_file()

BigApplication().configure_traits() 
```

当 open_file 返回并选择所需的文件时，活动窗口将切换到 BigApplication 窗口而不是返回到 Subwindow 窗口（以便用户可以在单击 OK 之前选择一些附加选项）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T20:20:31.913

像往常一样，我找到了一个 hacky 解决方法。但是这种行为仍然是一个错误。

解决方法是`dispose()`使用旧窗口，然后调用`edit_traits()`它。这会编辑`File`特征，并且恰好使其成为活动窗口。手动处理窗口必须在处理程序内部完成，并且比预期的要复杂一些。

```
from traits.api import *
from traitsui.api import *
from traitsui.file_dialog import *

class BigApplication(Handler):
  subwindow=Instance(Handler)
  open_subwindow=Button('clickme')

  traits_view=View(Item(name='open_subwindow'),height=200,width=200)

  def _subwindow_default(self):
    return Subwindow()

  def _open_subwindow_fired(self):
    self.subwindow.edit_traits()

class Subwindow(Handler):
  f=File
  some_additional_option=Bool
  openf=Button('Browse')

  traits_view=View(Item(name='f',style='text'),
    Item(name='some_additional_option'),
    Item(name='openf'),
    buttons=OKCancelButtons)

  def _openf_fired(self):
    self.f=open_file()
    self.do_dispose(self.info)
    self.edit_traits()

  #handler methods
  def init_info(self,info):
    self.info=info
  def do_dispose(self,info):
    info.ui.dispose()

BigApplication().configure_traits() 
```

# ios - 模态segue，导航栏消失

> ID：15689261
> 
> 赞同：54
> 
> 时间：2013-03-28T18:14:49.410
> 
> 标签：ios, objective-c, xcode4.6

我正在使用 Xcode 4.6.1 在 Objective-C 上进行编码。我想知道当我在两个视图控制器之间创建模态转场时如何保持导航栏显示，因为我正在情节提要中进行转场，当我运行应用程序时，第二个视图控制器的导航栏消失了，并且我在那个栏上有一个完成按钮，但我看不到它。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-06-20T05:21:56.623

只需将另一个添加`Navigation Controller`到您的模态视图控制器。按照步骤

1.  选择`Modal View Controller`
2.  去`Editor menu`
3.  选择`Embed In`
4.  选择`Navigation Controller`

运行应用程序。现在它应该可以完美运行了。

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2013-03-28T18:28:10.787

Modal segues 占据了整个屏幕，因此呈现控制器中的任何导航栏、工具栏或选项卡栏都将被覆盖。如果您想在此模态控制器上添加一个导航栏，则需要专门为其添加一个导航栏，并将您想要的任何按钮添加到该新导航栏（或工具栏）。如果您不想这样做，请不要以模态方式呈现它，而是推动它。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-01-22T13:29:31.310

您可以简单地执行以下操作来显示导航栏：

**Objective-C**

```
UINavigationController alloc]initWithRootViewController:modalVC]; 
```

**斯威夫特 3**

```
let modelVC = self.storyboard?.instantiateViewController(withIdentifier: "modalVC") as! ModalVC
let navBarOnModal: UINavigationController = UINavigationController(rootViewController: modalVC)
self.present(navBarOnModal, animated: true, completion: nil) 
```

这将显示带有导航栏的模态视图控制器。对Objective-C的了解有限，所以介绍部分我没有写。你应该能够弄清楚这一点。;)

希望这可以帮助！

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-12-06T13:26:12.517

在 iOS 8 中有一个更好的方法。您可以使用自适应演示样式：

1.  使用“Present as popover”转场
2.  设置你的控制器采用 UIPopoverPresentationControllerDelegate 协议
3.  实现2个方法

目标-C：

```
- (UIModalPresentationStyle)adaptivePresentationStyleForPresentationController:(UIPresentationController *)controller {
    return UIModalPresentationFullScreen;
}

- (UIViewController *)presentationController:(UIPresentationController *)controller viewControllerForAdaptivePresentationStyle:(UIModalPresentationStyle)style {
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController: controller.presentedViewController];
    return navController;
} 
```

迅速：

```
UIPopoverPresentationControllerDelegate
    func adaptivePresentationStyleForPresentationController(controller: UIPresentationController) -> UIModalPresentationStyle {
        return UIModalPresentationStyle.FullScreen
    }

func presentationController(controller: UIPresentationController, viewControllerForAdaptivePresentationStyle style: UIModalPresentationStyle) -> UIViewController? {
    var navController = UINavigationController(rootViewController: controller.presentedViewController)
    return navController
} 
```

斯威夫特 4：

```
extension MyViewController: UIPopoverPresentationControllerDelegate {
    func adaptivePresentationStyleForPresentationController(controller: UIPresentationController) -> UIModalPresentationStyle {
        return UIModalPresentationStyle.fullScreen
    }

    func presentationController(_ controller: UIPresentationController, viewControllerForAdaptivePresentationStyle style: UIModalPresentationStyle) -> UIViewController? {
        return UINavigationController(rootViewController: controller.presentedViewController)
    }
} 
```

在准备 segue 方法时设置委托：

```
 override func prepareForSegue(segue: UIStoryboardSegue, sender: AnyObject!) {
        if let adpostVC = segue.destinationViewController as? XXXController {
            let popPC = adpostVC.popoverPresentationController
            popPC?.delegate = self 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-05-13T12:23:04.807

快速版本：

遵循以下步骤：

1.  在 NavigationController 中嵌入 VC
2.  覆盖 prepareForSegue()

    ```
    override func prepareForSegue(segue: UIStoryboardSegue, sender: AnyObject?) {
      if segue.identifier == "goToYourController" {
        let navigation: UINavigationController = segue.destinationViewController as! UINavigationController

        var vc = YourViewController.init()
        vc = navigation.viewControllers[0] as! YourViewController
        //if you need send something to destnation View Controller 
        //vc.delegate = self
      }
    } 
    ```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-07-16T03:06:34.950

有一种更简单的方法可以做到这一点。正如之前的评论所说（但没有解释所有步骤），您需要将所需的目标视图控制器嵌入到导航控制器中，然后将目标视图控制器设置为导航控制器，然后导航控制器调用目标视图控制器。

首先，将 VC 嵌入到 NavVC 中。然后，您必须编写代码将 segue 目的地设置为 Nav VC。

代码如下所示：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    UINavigationController *nav = segue.destinationViewController;
    AddTriviaVC *triv = [[AddTriviaVC alloc]init];
    triv = nav.viewControllers[0]; 
    triv.location = self.location; 
} 
```

我希望这是有道理的。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-03-28T18:28:19.240

那可能是因为您的模态中没有 a `UINavigationController`。您应该使用一个（或者只是在 Storyboard 中的 ViewController 中添加一个导航栏），并以模态方式呈现。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-11-17T04:53:07.567

为了在模态视图控制器上显示导航栏，一种方法是插入导航控制器。您将此导航控制器的 segue 设置为“以模态方式呈现”，并且可以根据需要将演示文稿设置为“全屏”。

这是它在 Interface Builder 中的样子，注意“标题”和“项目”按钮现在将显示我们已经插入了一个导航控制器作为我们的 segue 的目标。

[![在此处输入图像描述](../Images/c305955e1f8a14afc6638a1a6ec6e4a8.png)](https://i.stack.imgur.com/Y9hJn.jpg)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-28T18:33:23.570

您可以通过执行以下操作以编程方式添加工具栏`-(void)viewDidLoad`

```
NSInteger tbHeight = 50;
tb = [[UIToolbar alloc] initWithFrame:CGRectMake(0, (self.view.frame.size.height - tbHeight), self.view.frame.size.width, tbHeight)];
tb.translucent = YES;
emailButton = [[UIBarButtonItem alloc] initWithTitle:@"Email Results" style:UIBarButtonItemStyleBordered target:tvController action:@selector(actionSheet:)];
UIBarButtonItem *flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleBordered target:self action:@selector(doneButtonPressed:)];

NSArray *barButton  =   [[NSArray alloc] initWithObjects:emailButton,flexibleSpace,doneButton,nil];
[tb setItems:barButton];

[self.view addSubview:tb];

barButton = nil; 
```

然后，您必须创建一个 IBAction 来按下完成按钮，它的完成方式如下：

```
-(IBAction)doneButtonPressed:(id)sender {
    [self dismissModalViewControllerAnimated:YES];
} 
```

这应该给你你想要的模式视图控制器。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-02-15T22:30:03.997

这是我在 Swift 4.2 中的“Volodymyr Nazarkevych”的简短版本

```
 override func prepare(for segue: UIStoryboardSegue, sender: Any?) {
    super.prepare(for: segue, sender: sender)
    switch(segue.identifier ?? "") {

    case "segueIdentifier": // name of your segue
        let navigation: UINavigationController = segue.destination as! UINavigationController

        //here you create new name of your destination ViewController and assign his name to let constant above
        guard let myNewViewController = navigation.viewControllers[0] as? DestinationViewController
       //DestinationViewController is your 2-ViewController where you go to from first one.

       else {
            fatalError("Unexpected destination: \(segue.destination)")
        }
       // TO DO SOMETHING HERE

   default:
        fatalError("Unexpected Segue Identifier; \(String(describing: segue.identifier))")
    }
} 
```

“Volodymyr Nazarkevych”的代码完美运行，但仅当您的 segue 从 1-ViewController 到 2-ViewController 的 NavigationController，而不是直接到 2-ViewController 时。非常感谢！

同样在目标块代码之后的切换案例中，您可以做不同的事情，例如从第二个 ViewController 获取一些信息或文件。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-01-06T06:45:26.417

在 storyboard 中，你应该添加一个**Navigation Item**到你的新 viewController，然后为你的 done 按钮添加**Bar Button Item**

# android - 设置 Galaxy S2 AVD

> ID：15689262
> 
> 赞同：1
> 
> 时间：2013-03-28T18:14:49.970
> 
> 标签：android, android-emulator

我有一部 Galaxy S2 手机，但由于两个 USB 插槽当前都在使用中，因此无法将其连接到我的电脑。因此，我将使用 Android 虚拟设备并模拟 Galaxy S2。

问题是，大多数教程都过时了（？）。例如，当教程指出添加新虚拟设备时需要选择皮肤时；在我的版本中，没有这样的选项。

这就是我的选择：http: [//i.imgur.com/XRXKFqT.png](http://i.imgur.com/XRXKFqT.png)

这是设备下拉菜单下的内容：http: [//i.imgur.com/Syx0JOX.png](http://i.imgur.com/Syx0JOX.png)

所以，我的问题是，有谁知道我如何获得适用于 Android SDK（Eclipse IDE）的 Galaxy S2 虚拟设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T23:16:49.727

您可以构建必要的两个文件。请参阅此过程的其他答案：

[三星 Galaxy S II AVD（Android 虚拟设备）基本设置？](https://stackoverflow.com/questions/10641744/samsung-galaxy-s-ii-avd-android-virtual-device-basic-settings/14189650#14189650)

# google-maps - 用于标记的谷歌地图信息窗口

> ID：15689263
> 
> 赞同：0
> 
> 时间：2013-03-28T18:14:57.330
> 
> 标签：google-maps, google-maps-api-3

请我需要帮助...当我单击每个标记时，我想为每个标记显示一个信息窗口。请原谅我的英语不好。谢谢。

```
 markers=new Array();

        for(i=0;i<res['infos'].length;i++){

            var a=new Object();
            a.lat=res.infos[i]['lat'];
            a.lng=res.infos[i]['lng'];
                    var Titre="Véhicule: "+res.infos[i]['NomVehicule']+" Position du: "+res.infos[i]['Date']+" à "+res.infos[i]['Heure'];
            var NomIcone="IconeVehicule/"+res.infos[i]['Icone'];
            var point=new google.maps.LatLng(a.lat,a.lng);
            var marker = new google.maps.Marker({position: point,map: map, title: Titre, icon: NomIcone});
            markers.push(marker);       

  google.maps.event.addListener(marker, 'mouseover', (function(marker, i) {
    return function() {
      infowindow.setContent(res.infos[i]['NomVehicule']);
      infowindow.open(map, marker);
    }
  })(marker, i));

        }

   </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:08:21.173

这是尝试的代码。我认为您的问题出在事件处理程序中。

```
var infoWindow = new google.maps.InfoWindow({
    content: "loading..."
});
var markers=new Array();

for(i=0;i<res['infos'].length;i++){
    var a=new Object();
    a.lat=res.infos[i]['lat'];
    a.lng=res.infos[i]['lng'];

    var Titre="Véhicule: "+res.infos[i]['NomVehicule']+" Position du: "+res.infos[i]['Date']+" à "+res.infos[i]['Heure'];
    var NomIcone="IconeVehicule/"+res.infos[i]['Icone'];

    var point=new google.maps.LatLng(a.lat,a.lng);
    var marker = new google.maps.Marker({
        position: point,
        map: map,
        title: Titre,
        icon: NomIcone,
        infoWindowContent: res.infos[i]['NomVehicule']
    });
    markers.push(marker);       

    google.maps.event.addListener(marker, 'mouseover', function(){
        infowindow.setContent(marker.infoWindowContent);
        infowindow.open(map, marker);
    });
} 
```

# breeze - 使用没有数据库的 Breeze 扩展属性 (NoDb)

> ID：15689266
> 
> 赞同：0
> 
> 时间：2013-03-28T18:15:10.970
> 
> 标签：breeze

通过创建自定义元数据定义并将其添加到微风实体管理器中，我已经成功地将微风连接到服务器上的自定义类型。

但是，我无法请求已在 javascript 中自定义的对象 (Employee) 并完全检索其关系。

换句话说，我有一个名为 Employee 的对象，它有一个名为“LoginStats”的属性，它是服务器上的一个 List 类型。当使用 Breeze 请求这个对象时，集合中只返回一个元素，而应该有 6 个。

$promise 的结果如下所示：

```
data.results[0].loginStats()[0] //object
data.results[0].loginStats()[1] //undefined 
```

奇怪的是，如果我单独选择属性，例如 .select("LoginStats") 它会返回完整的数组中的 6 个项目。

我怎么可能在不使用微风调用拼出所有所需属性的情况下检索此对象？我尝试使用 .expand() 子句，但不幸的是，我们没有以某种方式连接到 EntityFramework 以使其工作。

提前致谢！

编辑：[这是](http://imgur.com/a/13158)我使用“选择”语句与仅请求对象时的示例。这些图像还演示了当我选择所有属性时会发生什么，即它们都正确填写，但它们不再是可观察的。哎呀！

控制器代码：

```
 [HttpGet]
        public IQueryable<Employee> Get(string id)
        {
            var criterion = new Criterion<Employee, bool>(e => e.CustomerId == id);
            var loginStatisticsExtendedProperty = new FillEmployeeLoginStatistics(_UserRoleProvider, _CustomerLoginStatsViewModelRepository);
            var availableCompaniesForEmployess = new AvailableCompaniesForEmployess(_CompanyAffiliatesRepository);
            return _EmployeeRepository.Find(criterion, loginStatisticsExtendedProperty, _EmployeeDetailsExtendedProperty, availableCompaniesForEmployess);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:07:23.427

如果没有看到您正在调用的服务器端控制器方法，就很难确定。但我有几个建议。

首先确保您的控制器方法返回一个 IQueryable 集合。仅当您想使用客户端查询来进一步限制资源时才需要这样做。您通常可以通过在返回集合之前简单地添加一个 .AsQueryable() 调用来使任何集合成为 IQueryable。

其次，“扩展”语法将仅针对 EF 支持的 IQueryables 运行。但是您仍然可以从客户端返回对象图，前提是它们与父对象一起“序列化”。对于“no db”类型的资源，这通常意味着您在服务器上强制解析您想要发送到客户端的任何导航属性。如果您添加一个 JsonResultsAdapter，您实际上可以通过在“visitNode”方法内部设置断点来“调试”正在序列化到客户端的内容。

如果这还不够，请发布您的控制器方法 def。

# html - 滚动条出现没有内容溢出

> ID：15689268
> 
> 赞同：1
> 
> 时间：2013-03-28T18:15:13.787
> 
> 标签：html, css

我有一个简单的 CSS 加载指示器，用于使用 Webkit 径向渐变和动画的基本 Web 应用程序。但是，在加载过程中，水平和垂直滚动条都会出现。

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="robots" content="nofollow">
<title>Resident Manager Portal</title>
<link rel="shortcut icon" href="resources/icons/favicon.ico">
<style type="text/css">
html, body {
width: 100%;
height: 100%;
background-image: -webkit-radial-gradient(center, ellipse contain, #00AED9 0%, #0075B0 100%)
}
#appLoadingIndicator {
position: absolute;
top: 50%;
margin-top: -15px;
width: 100%;
height: 30px;
text-align: center
}
#appLoadingIndicator > * {
display: inline-block;
width: 30px;
height: 30px;
background-color: #FFFFFF;
opacity: 0;
-webkit-border-radius: 10px;
margin: 0 5px;
-webkit-animation-name: appLoadingIndicator;
-webkit-animation-duration: 2s;
-webkit-animation-iteration-count: infinite;
-webkit-animation-direction: normal;
}
#appLoadingIndicator > :nth-child(1) {
-webkit-animation-delay: 0s;
}
#appLoadingIndicator > :nth-child(2) {
-webkit-animation-delay: 0.5s;
}
#appLoadingIndicator > :nth-child(3) {
-webkit-animation-delay: 1s;
}
@-webkit-keyframes appLoadingIndicator{
20% {
opacity: 0
}
50% {
opacity: 1
}
80% {
opacity: 0
}
}
</style>
</head>
<body>
<div id="appLoadingIndicator">
<div></div>
<div></div>
<div></div>
</div>
</body>
</html> 
```

我可以添加`overflow-x: hidden;`和`overflow-y: hidden;`隐藏栏，但我看不到内容溢出的任何地方。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:23:09.077

页面的宽度和高度是 100% + 标准边距，所以它溢出了。尝试使用以下方法删除边距：

```
html, body {
   margin:0;
} 
```

# php - 菜单表使用 CSS 占据网页的整个高度

> ID：15689272
> 
> 赞同：0
> 
> 时间：2013-03-28T18:15:29.273
> 
> 标签：php, html, css, html-table

我有这个包含链接的表。按下时，它会在同一页面上显示结果。我的问题是结果在菜单下方。我想使用 CSS 使表格的高度占据整个页面。

这是表格：

```
<div id="categories">
    <table>
        <tr>
            <th>Categories</th>
        </tr>
        <tr>
            <td >
                <ul>
                    <li><a href="categories.php?c=apts">Appetizers</a></br></li>
                    <li><a href="categories.php?c=brds">Breads</a></br></li>
                    <li><a href="categories.php?c=brek">Breakfast</a></br></li>
                    <li><a href="categories.php?c=cond">Condiments</a></br></li>
                    <li><a href="categories.php?c=dsrt">Desserts</a></br></li>
                    <li><a href="categories.php?c=drnk">Drinks</a></br></li>
                    <li><a href="categories.php?c=hmed">Homemade Ingredients</a></br></li>
                    <li><a href="categories.php?c=lnch">Lunch & Snacks</a></br></li>
                    <li><a href="categories.php?c=main">Main Dishes</a></br></li>
                    <li><a href="categories.php?c=psre">Pasta & Rice</a></br></li>
                    <li><a href="categories.php?c=slds">Salads</a></br></li>
                    <li><a href="categories.php?c=sauc">Sauces & Salsas</a></br></li>
                    <li><a href="categories.php?c=side">Side Dishes</a></br></li>
                    <li><a href="categories.php?c=stup">Soups & Stews</a></br></li>
                    <li><a href="categories.php?c=spcl">Special Diet</a></br></li>
                    <li><a href="categories.php?c=vegi">Vegitarian</a></br></li>
                    <li><a href="categories.php?c=diet">Weight Watchers</a></br></li>
                </ul>
            </td>
        </tr>
    </table>
</div> 
```

目前我的 CSS 有：

```
div#categories{
    float: left;
} 
```

我尝试给出`td`an`id`和 have`height: 100%;`但没有做任何事情以及只是将表格高度设置为 100% 或 px。有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:12:37.867

好的，因此您可以采取多种方法。在这里，它们按优先顺序排列：

1.  将所有主要内容放在一个 div 中并使其正确浮动。然后您的导航将向左浮动，内容向右浮动。这是进行布局的现代最佳实践方式。
2.  使用 iframe - 如果您可以使用 iframe，请将您的内容放在右侧的 iframe 中。您的导航不会在每次点击时重新加载，并且 iframe 中的内容可能会滚动等。这不是理想的解决方案，但可以工作。
3.  使用表格 - 您可以创建一个占据整个页面的大表格，您的导航位于左侧 td，内容位于右侧 td。这显然是一种较旧且不受欢迎的方法，但它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T20:32:49.773

我相信这就是您正在寻找的。

[http://jsfiddle.net/XhcDB/](http://jsfiddle.net/XhcdB/)

```
div#recipes{
    float: left; 
}

div#pageMiddle{
    display: inline-block;
} 
```

# php - 使用php数组保存到mysql和从mysql读取

> ID：15689274
> 
> 赞同：-1
> 
> 时间：2013-03-28T18:15:31.913
> 
> 标签：php, mysql, arrays

我正在尝试确定在数据库中存储、更新、读取以下信息的最佳方式。现在我有一个非常不灵活的解决方案，无法继续前进。这是场景：

我们的网站有越来越多的“谈话”列表。每个演讲都有一个标题、描述、未指定数量的项目符号、类别（多个，来自特定类别列表）、1 个或多个演讲者（有姓名、机构和图像文件）和一些其他不相关的字段。

我的麻烦在于变量信息：项目符号（我可以序列化的数组？），扬声器（数组数组，不知道在这里做什么）和类别。

我真的在寻找有关如何最好地格式化表格的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:23:24.923

最常见的解决方案是 - 每个对象都必须是一个表。然后这个表与每种类型的对象的一些 id 值相关。例：班上有很多学生。所以表类和表瞳孔。一个学生只能在一个班级，但一个班级有很多学生:)，因此可以通过带有 class_id 字段的 Pupil 表建立关系。

要从数据库读取和写入，最佳实践是使用 PDO 或 AdoDB 库。它们会对您有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:26:06.293

如果我理解正确，您不能创建其他表以使用@Anton 描述的通用解决方案，对吗？

如果需要存储为数组，可以使用[serialize](http://php.net/serialize)或[json_encode](http://www.php.net/manual/en/function.json-encode.php)将数组存储为字符串。

编辑：

[然后在读取字符串后，您使用unserialize](http://www.php.net/manual/en/function.unserialize.php)或[json_decode](http://www.php.net/manual/en/function.json-decode.php)将它们更改回原始形式（取决于您决定采用哪种方式）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T18:33:58.050

我建议您为此使用 JSON 编码的字符串。

[http://www.php.net/manual/en/function.json-encode.php](http://www.php.net/manual/en/function.json-encode.php)

# web-applications - 你能让桌面应用程序在浏览器中运行吗？

> ID：15689277
> 
> 赞同：8
> 
> 时间：2013-03-28T18:15:35.710
> 
> 标签：web-applications, desktop-application

有没有办法获取桌面应用程序并使其在浏览器中运行而无需重新编码所有内容？我是一名前端开发人员，负责编辑基本的 HTML CSS 和 Javascript，我的老板让我尝试让他找到的应用程序在我们的网站上运行。

我怀疑是否有一个简单的解决方案，但我只需要找出是否可能，如果没有，那么我需要哪些基本步骤来尝试在我们网站上的浏览器中获得应用程序的相同功能?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-29T12:37:42.317

这个答案可能有点超出您的预期，但为了完整起见，我觉得值得一提：

多亏了[emscripten](https://github.com/kripken/emscripten)，您可以将任何可以制成 LLVM 字节码（如 C 或 C++）的东西编译成 JavaScript。例如，虚幻引擎 4 被[编译成 JS](https://blog.mozilla.org/blog/2014/03/12/mozilla-and-epic-preview-unreal-engine-4-running-in-firefox/)并能够在 Firefox 中运行，无需插件，速度约为原生速度的一半。此外，还编译了[一系列](https://github.com/kripken/emscripten/wiki#demos)游戏、游戏引擎、模拟器、框架和编程语言，以在浏览器中作为 JS 运行。

因此，如果您有想要在浏览器中运行的应用程序的源代码并且您不介意进行一些修改，那么您可以使用 emscripten 让它运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-09T21:11:42.047

[Thinfinity VirtualUI](https://www.cybelesoft.com/thinfinity/virtualui/run-desktop-apps-in-the-cloud/)是一种产品，它使您能够将一段代码添加到您的源代码中，然后通过任何支持 HTML5 的浏览器运行应用程序。

有两个可用的开发级别： - 一个普通的应用程序发布（添加代码并进入 Web），以及 - 一个 jsRO 框架（Javascript 远程对象），它支持与其他 Web 资源的深度集成，以及 UI 定制。

我想这最后一个选项是更好地涵盖您的场景的选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T18:22:35.307

您可以提供简单的`HREF`链接来下载和运行本机应用程序。但是正如我在评论中所问的那样，您应该查看它运行的可执行平台，并向您的用户声明它仅在此类操作系统和此类 CPU 硬件上运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-17T17:26:20.330

是的你可以。在我们的办公室，我们使用这项服务，`www.0data.fr`而且效果很好

你可以运行一个完整的桌面或一个带有 Windows 应用程序的门户，最重要的是你可以在这样的一个链接中运行它

[https://web.0data.fr/software/html5.html?user=demo&pass=demo](https://web.0data.fr/software/html5.html?user=demo&pass=demo)

我希望这对你有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-01T14:55:17.847

您可以通过[SpawnApps](http://www.spawnapps.com)在浏览器中交付本机应用程序。客户端无需安装！但是需要Java VM。

它将“下载和安装”模型转换为“浏览器内”模型。您可以使用 HTML 嵌入代码在目标网页上传播您的应用程序，就像传播 YouTube 视频一样。

[在此处](http://notepad-plus-plus.org/demo.html)查看 Notepad++ 的在线演示。仅限 Windows 用户，因为该软件专为在 Windows 中使用而设计！Notepad++的源码没有做任何修改；仅使用二进制文件。

我希望这对你有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T20:56:24.070

> 有没有办法获取桌面应用程序并使其在浏览器中运行而无需重新编码所有内容？

如果它是一个 Java Swing 应用程序，那么是的，您肯定可以这样做。我不知道是否有任何其他类型的应用程序可以在浏览器中运行

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-29T12:40:43.013

我不确定您的期望是什么，但是[Microsoft 的 ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)技术可能就是您所寻找的。

这实际上会从网站启动应用程序。但是它不会呈现为网页 - 但可能是最轻松的解决方案（假设您使用的是 .NET）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-14T18:22:42.503

除了使用 Emscripten 将应用程序移植到 JavaScript 之外，还可以使用 x86 模拟器（例如[v86](https://github.com/copy/v86) ）在浏览器中运行桌面应用程序。v86 可以在客户端运行多个桌面操作系统，包括[ReactOS](https://copy.sh/v86/?profile=reactos)和[KolibriOS](https://copy.sh/v86/?profile=kolibrios)，因此它应该能够运行许多与这些操作系统兼容的桌面应用程序。

# mysql - Mysql查询重复

> ID：15689281
> 
> 赞同：-3
> 
> 时间：2013-03-28T18:15:44.300
> 
> 标签：mysql

我有这个查询：

```
SELECT r.id, r.RowID, r.RAMQ, r.Type, r.Description, r.Deleted
FROM reminders r, patientdetails
WHERE (patientdetails.RAMQ = r.RAMQ OR r.RAMQ='none' )
AND r.Deleted !=  '1' 
```

当此查询运行时，它会复制没有 RAMQ 的结果。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:27:56.923

我猜你只需要一张表中的数据。所以，不要使用连接（这是你在那里的隐藏连接），而是使用`EXISTS`子查询：

```
SELECT  r.id, r.RowID, r.RAMQ, r.Type, r.Description, r.Deleted
FROM    reminders AS r
WHERE   ( r.RAMQ = 'none'
       OR EXISTS
          ( SELECT  *
            FROM    patientdetails AS p
            WHERE   p.RAMQ = r.RAMQ
          )
        )
  AND   r.Deleted <>  '1' ; 
```

# r - 关于 plyr-ing 这个“for”循环的建议

> ID：15689285
> 
> 赞同：0
> 
> 时间：2013-03-28T18:16:14.650
> 
> 标签：r, parallel-processing, plyr, netcdf

尽我所能，我无法弄清楚如何让 plyr 工作。对于这个特定示例的任何帮助，以及任何解释您的示例为何有效的奖励积分，将不胜感激。

数据在[这里](http://www.geog.mcgill.ca/landuse/pub/Data/175crops2000/NetCDF/maize_5min.nc.zip)，以防有人想让这个例子“可行”

设置：

```
library(ncdf)
library(plyr)
longs = seq.int(from=1,to=4320,by=6)
lats = seq.int(from=1,to=2160,by=6)
blocksize = 6
maize.nc = open.ncdf('maize_5min.nc') 
```

此 for 循环有效，但速度慢且不并行：

```
latlongcoords = NULL
for (x in 1:length(longs))  {
for (y in 1:length(lats))   {   
    lat = mean(get.var.ncdf(maize.nc,varid="latitude",start = lats[x],count = blocksize))
    lon = mean(get.var.ncdf(maize.nc,varid="longitude",start = longs[y],count = blocksize))
    rw = c(lat,lon)
    latlongcoords = rbind(latlongcoords,rw)
    }
    #print(x)
    }
save(latlongcoords,file="latlongcoords") 
```

我想做这样的事情：

```
require(doMC)
registerDoMC(32)
x = seq(1:10)  #shorten it for testing purposes
y = seq(1:10)  #shorten it for testing purposes
makecoords = function(x,y){
    lat = mean(get.var.ncdf(maize.nc,varid="latitude",start = lats[x],count = blocksize))
    lon = mean(get.var.ncdf(maize.nc,varid="longitude",start = longs[y],count = blocksize))
    c(lat,lon)
    }
latlongcoords = NULL
latlongcoords = aaply(.data = cbind(x,y), .margins=2, .fun=makecoords(x,y),.parallel=TRUE) 
```

当我运行它时，我收到以下错误消息：

```
Error in get.var.ncdf(maize.nc, varid = "latitude", start = lats[x], count = blocksize) : 
  Error: variable has 1 dims, but start has 10 entries.  They must match! 
```

看起来 plyr 正在将整个向量传递给函数，而不是单个值！非常感谢您对如何进行这项工作的建议以及对修复工作原因的解释！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:02:04.143

尝试这个。我认为你必须通过`.margin=1`而不是在`2`这里。也就是说，如果您想**按 row**传递值，那么`.margin = 1`. `x[1]`并`y[1]`首先传递给 w。因此，我们将使用`w[1]`and访问它们`w[2]`并将其传递给您的`makecoords`函数。我希望这是你所期望的。如果没有，请随时在评论下写下出了什么问题。

```
latlongcoords <- aaply(cbind(x,y), 1, function(w) 
                 makecoords(w[1], w[2]), .parallel=TRUE) 
```

它适用`.parallel = FALSE`于我。现在不能测试`.parallel=TRUE`。

```
head(latlongcoords)
# X1              1            2
#   1    89.7500025 -179.7499949
#   2    86.7500025 -176.7499949
#   3    83.7500025 -173.7499949
#   4    80.7500025 -170.7499949
#   5    77.7500025 -167.7499949
#   6    74.7500025 -164.7499949 
```

# google-analytics - 第二个 _trackPageview 会导致 0% 的跳出率吗？

> ID：15689286
> 
> 赞同：0
> 
> 时间：2013-03-28T18:16:15.337
> 
> 标签：google-analytics

在 Google Analytics 中，在同一页面上再次推送相同`_trackPageview`内容会导致跳出率降至 0% 吗？

自从他们再次“访问”同一页面以来，这是否将第一次“访问”视为已参与到同一页面？

有任何官方文件可以解释这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:24:42.783

我猜：

由于它们在同一个“访问”（会话）中，并且“查看”多个页面（由于第二个 _trackPageview），这将导致 0% 的反弹。

“ 跳出率总结了对您网站的**单页**访问的百分比。访问总结了您网站上的会话数。”</p>

[来源：[https ://developers.google.com/analytics/resources/concepts/gaConceptsDataCalculation?hl=en#dimensionsAndMetrics](https://developers.google.com/analytics/resources/concepts/gaConceptsDataCalculation?hl=en#dimensionsAndMetrics)]

# android - android应用离线模式，本地sqlite数据库与远程数据库同步

> ID：15689287
> 
> 赞同：7
> 
> 时间：2013-03-28T18:16:18.413
> 
> 标签：android, sqlite, postgresql, synchronization, offline-mode

我有一个**postgreSql 数据库**，它由一个 android 应用程序通过 Web 服务进行操作。我想知道为我的应用程序制作**离线模式的最佳方法是什么。**

我的第一个想法是在设备无法访问网络时使用**sqlite 本地数据库**

我想知道是否有一个现有的工具，一旦设备可以访问网络，它就可以更容易地与现有的 postgres 数据库**同步**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-12T07:24:42.433

这里有一些非常基本的想法。

在理想情况下，您将同步一般工作元数据，并且您的离线模式将允许仅插入工作流基于该元数据添加新数据。这将使以后同步事情变得相当容易，只需按顺序发布到 Web 服务，然后在数据库中进行标记或完全删除行。

如果你使用类似的东西，你可能真的不想将 sqlite 当作 rdbms 来处理。您可能想要的是一个宽表结构，主要用于存储待处理的需求，或者存储您稍后将发送的 json 有效负载之类的东西。这意味着您的本地数据库将不是围绕您的数据模型而是围绕您的 Web 服务 API 设计的。

如果您必须进行更新（覆盖工作流程），那么您需要付出很多努力来解决冲突，但基本上同样适用。您可能想要添加更多信息，例如时间戳和其他与冲突解决相关的数据。

但是，从那里您应该能够重新使用您的应用程序 API 来进行同步，而不是寻找特定的工具来进行同步。

# java - 如何使用java备份oracle数据库？

> ID：15689289
> 
> 赞同：4
> 
> 时间：2013-03-28T18:16:21.057
> 
> 标签：java, oracle11g

我目前正在使用 Oracle 11g R2 速成版。如何使用 java 应用程序备份我的数据库？可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:20:04.320

这取决于您对“备份”的含义。如果要创建数据库的转储，可以使用`dbms_datapump`包来完成。

由于它是一个常规的 PL/SQL 包，因此可以很容易地通过 JDBC 调用它。最简单的事情可能是将匿名 PL/SQL 块作为单个语句发送。

像这样的东西：

```
String sql = 
  "DECLARE \n" +
  "  handle NUMBER; \n" +
  "BEGIN \n" +
  "  handle := DBMS_DATAPUMP.OPEN(operation => 'EXPORT', job_mode => 'SCHEMA', job_name => USER||'_DUMP', version => 'COMPATIBLE'); \n" +
  "  dbms_datapump.add_file(handle => handle, filename => 'db_backup', directory => 'EXPDP_DIR'); \n" +
  "  dbms_datapump.metadata_filter(handle, 'SCHEMA_LIST', '''SCOTT'''); \n" +
  "  dbms_datapump.start_job(handle); \n" +
  "  dbms_datapump.detach(handle); \n" +
  "END;";
Statement stmt = connection.createStatement();
stmt.execute(sql); 
```

请注意，我省略了任何错误处理。或者，您可以单独调用每个`dbms_datapump`过程（使用 a `CallableStatement`）

转储将被写入服务器，而不是客户端！

更多详情请参考手册：
[http ://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_datpmp.htm](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_datpmp.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:20:25.380

好吧，通常可以，因为您可以提取数据并存储 SQL 结构（表、约束、索引等）。您可能会发现这很有用[您](http://docs.oracle.com/cd/B25329_01/doc/admin.102/b25107/backrest.htm) 还可以使用 YAML 格式来存储数据。

# python - 对于 x = str(y) in range(0,5) .... 在 python 中？

> ID：15689290
> 
> 赞同：1
> 
> 时间：2013-03-28T18:16:22.073
> 
> 标签：python

真正简单的问题。我正在尝试在 python 中执行此操作：

```
for x = str(y) in range(0,5): 
```

这样 y 将保存一个整数，而 x 将保存所述整数的字符串表示形式。我意识到我可以很容易地把它排成两行——只是想要一个捷径。

另外，我很好奇我到底在问什么。我确信这个问题已经在整个论坛中得到了无数次的回答，但我不知道要搜索什么才能找到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T18:19:26.277

您正在寻找：

```
for x in (str(y) for y in range(0, 5)): 
```

这不会带来实例化`str`列表的开销（尽管有 5 个元素这几乎不是问题）。不过，每当我遇到这种情况时，我通常只`str(y)`在循环体内使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T18:19:55.497

一个简单的方法是使用该`map()`函数：

```
for y in map(str, range(0, 5)):
    # ... 
```

该`map()`函数接受一个可迭代对象并将每个元素传递给第一个可调用参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T18:18:28.987

您可以使用列表推导来实现此目的：

```
str_list = ['%s'%(x) for x in range(0, 5)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T18:20:17.540

您最有可能要搜索[列表理解。](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)

```
[(str(y),y) for y in range(0,5)] 
```

这将为您提供字符串和整数的元组作为列表，然后像其他任何列表一样遍历该列表

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T18:22:38.463

您的问题不清楚，因为它依赖于一段实际上并未编译的代码。

```
for x,y in ((str(z), z) for z in range(0, 5)):
  print x, y 
```

对于每个循环迭代，上述构造将分别绑定到 a`x`和a 。输出是：`y``str``int`

```
0 0
1 1
2 2
3 3
4 4 
```

# android - Android AES 加密错误垫块损坏

> ID：15689291
> 
> 赞同：1
> 
> 时间：2013-03-28T18:16:23.167
> 
> 标签：android, encryption, cryptography, aes

我有 3 节课：

1.  AESCrypt
2.  选择MasterPasswordActivity
3.  解锁PocketActivity

我成功地将数据添加到 SQLite 数据库，但我在解密数据库中的数据时遇到问题。

我收到此错误：

```
 W/System.err(1034): javax.crypto.BadPaddingException: pad block corrupted. 
```

在 ChooseMasterPasswordActivity 类中，我使用此代码将加密文本添加到 SQLite 数据库。

```
String masterKey, encryptedMPW;
        masterKey = tvPassword.getText().toString();

        AESCrypt aes = new AESCrypt();
        encryptedMPW =  aes.encrypt(masterKey);

        user = new User(null, encryptedMPW);
        userDao.insert(user); 
```

在类 UnlockPocketActivity 我有方法 createMasterPassword() 与此代码：

```
private void checkMasterPassword() throws Exception {

    String pw = tvUnlockMPW.getText().toString();
    String decryptedMPW;

    AESCrypt aes = new AESCrypt();

    decryptedMPW = aes.decrypt(map.get("MPW").toString());

    if (pw.equals(decryptedMPW)) {
        Intent i = new Intent(UnlockPocketActivity.this,
                MainListActivity.class);
        startActivity(i);
    } else {
        Toast.makeText(getApplicationContext(), "Pogresna sifra...",
                Toast.LENGTH_SHORT).show();
    }
} 
```

我将此代码用于 AESCrypt 类：

公共类 AESCrypt {

```
private final Cipher cipher;
private final SecretKeySpec key;
private AlgorithmParameterSpec spec;
private String encryptedText, decryptedText;
private String password = "PASSWORD";

public AESCrypt() throws Exception {

    // hash password with SHA-256 and crop the output to 128-bit for key
    MessageDigest digest = MessageDigest.getInstance("SHA-256");
    digest.update(password.getBytes("UTF-8"));
    byte[] keyBytes = new byte[16];
    System.arraycopy(digest.digest(), 0, keyBytes, 0, keyBytes.length);

    cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
    key = new SecretKeySpec(keyBytes, "AES");
    spec = getIV();
    }

public AlgorithmParameterSpec getIV() {
    AlgorithmParameterSpec ivspec;
    byte[] iv = new byte[cipher.getBlockSize()];
    new SecureRandom().nextBytes(iv);
    ivspec = new IvParameterSpec(iv);
    return ivspec;
    }

public String encrypt(String plainText) throws Exception {      
    cipher.init(Cipher.ENCRYPT_MODE, key, spec);
    byte[] encrypted = cipher.doFinal(plainText.getBytes());
    encryptedText = Base64.encodeToString(encrypted, Base64.DEFAULT);
    return encryptedText;
}

public String decrypt(String cryptedText) throws Exception {
    cipher.init(Cipher.DECRYPT_MODE, key, spec);
    byte[] bytes = Base64.decode(cryptedText, Base64.DEFAULT);
    byte[] decrypted = cipher.doFinal(bytes);
    decryptedText = new String(decrypted, "UTF-8");
    return decryptedText;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:26:50.167

您似乎初始化了初始化向量`SecureRandom()`，每次调用都会产生不同的数据。

```
byte[] iv = new byte[cipher.getBlockSize()];
new SecureRandom().nextBytes(iv);
ivspec = new IvParameterSpec(iv); 
```

初始化向量在加密和解密时需要相同。将初始化向量与加密数据一起保存，或者找到一种生成它的方法，以便在加密和解密时得到相同的结果。它不需要是秘密的，但它应该随着你加密的每一个新事物而不同。

# c# - Entity Framework 与 MVC 的关系

> ID：15689295
> 
> 赞同：8
> 
> 时间：2013-03-28T18:16:39.113
> 
> 标签：c#, asp.net-mvc, entity-framework

我试图了解整个 MVC/EF 关系。如果我创建一个仅与数据库交互的实体模型（因为您不应该将实体模型传递给视图），然后是模型的类，最后是视图模型，如下所示。我唯一的问题是拥有第二个类似乎是多余的，我所看到的示例中唯一的不同是它们将数据注释应用于该类，因为它与视图交互。为什么确保实体对象不暴露在视图层如此重要？

我还没有真正开始编写项目，但我假设您将使用实体模型与数据库进行交互，然后将其转换为 ProductModel 以传递给视图这是正确的逻辑吗？

实体模型：

```
public class Product 
{
    [Key()]
    public int ID { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public double Price { get; set; }
} 
```

模型：

```
public class ProductModel
{
    public int ID { get; set; }
    [StringLength(50)]
    [Required(ErrorMessage = "Product Name is required.")]
    [Display(Name = "Product Name")]
    public string Name { get; set; }
    public string Description { get; set; }
    public double Price { get; set; }
} 
```

视图模型：

```
public class ProductViewModel
{
    Product myProduct { get; set; }\
    //Plus any other properties I may need for the view.
} 
```

**更新：**

在我一直在阅读的示例中，他们还设置了如下 DBContext。那么 ProductModel 类就没有用了吗？

```
public class MyAppContext : DbContext
{
    public MyAppContext()
        : base("name=DBConnection")
    { 
    }

    public DbSet<Product> Products { get; set; }

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:17:31.507

有时，尤其是在简单模型上，可能不需要视图模型。但是，一个很大的“但是”，我发现这种情况的实例很少，即使那样，我后来通常还是需要返回并创建一个视图模型，无论如何。拥有一个专门的视图模型更安全、更简单、更容易。

您可能会将其视为额外的工作，但可以从关注点分离的角度来考虑它（这是 MVC 的全部要点）。例如，如果我想为输入显示一个 SelectList，我可以将它添加到 ViewBag 或我的模型中。如果我将它添加到 ViewBag，我会失去强类型，这绝不是理想的，但它也不属于我的数据库跟踪实体。拥有一个视图模型，让我把这些信息准确地放在它应该去的地方：一个强类型模型，它的存在是为了服务于视图并且只服务于视图。

或者，考虑验证：如果我想要一个数据库所需的字段（非空）怎么办，但我想让这个对用户来说是可选的，如果用户选择不指定，我自己在后台用一些业务逻辑填充它. 视图模型可以轻松处理该抽象，而将其添加到实体本身会增加巨大的复杂性。

当然，什么都不是必需的。您始终可以随心所欲地设置您的项目，但最佳实践之所以成为最佳实践是有原因的：就像您一样的开发人员一次又一次地遇到相同的问题并围绕一个可行的解决方案进行合并。您可能可以暂时避免使用视图模型，但最终，您会遇到相同的障碍并无论如何都要合并它们，所以从一开始就这样做，让您的生活更轻松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T23:54:02.007

ViewModel 将是实际传递给浏览器/从浏览器传递的内容，如果您正在构建可以就地更新/就地保存的东西，通常通过 JSON。所以：

*   ASP.Net MVC 在它可以通过 JSON 生成/使用的内容方面存在一些限制（并且其限制在每个方向上略有不同）；您可以使用 ViewModel 来解决这个问题

*   您从数据库中拉回的数据大小可能不是需要到达浏览器的 - 例如，您可能需要拉回一些额外的字段并在传递之前检查它们，但只想传递一个子集 - ViewModel 是子集。

*   JSON 中的一些自然结构在数据库中并不真正可用 - 例如，您可能在模型中存储了相当于 Dictionary 的内容，例如一个带有一些值的表，另一个带有 FK 指向它的表，一个 Id , 和一个字符串值 - 但要让浏览器利用它，您可能只需要该字符串值。因此，在 ViewModel 中，您使用一个简单的 Dictionary 来表示所有内容（最终在客户端上作为一个简单的 JS 对象）。

*   通常，诸如日期格式之类的东西在客户端上很弱，或者由于客户端具有准确的系统时钟等而变得脆弱。我经常在我的 ViewModel 中使用一个字符串，我的模型中有一个 DateTime，并将 UTC 转换为他们的时区和格式在它到达他们的浏览器之前很好地在服务器上。

*   有时您需要避免将模型的某些部分暴露给浏览器；例如，在某些系统中，如果您将行 ID 暴露给浏览器，您可能会产生安全风险。ViewModel 使隐藏模型的部分变得微不足道。

另请参阅：[如何设计 ViewModel](https://stackoverflow.com/questions/9881790/how-to-design-viewmodel/10020862)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T18:26:28.433

我创建一个与我的实体分开的模型类有两个主要原因。

1.  正如你提到的，属性。您可能希望在多个应用程序中重用您的实体，它们可能不会使用相同的属性。你不想用这些污染你的实体。

2.  根据它们的 ORM，您的实体可能需要一个基类。或者，您可能需要将属性或其他自定义应用于实体。这可能会导致在测试业务逻辑时出现困难。此外，如果您更改 ORM 或 ORM 更改中的某些内容，您将保持该更改与应用程序的其余部分隔离。

基本上，您是在隔离应用程序的不同层，并保护一层免受另一层的更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T18:28:21.567

你需要`Product class`，`ProductViewModel class`然后你的`DbContext`. 如果您是第一次这样做，请阅读[Pro ASP.NET MVC 3 Framework，第三版](http://www.amazon.ca/gp/product/1430234040/ref=s9_simh_gw_p14_d17_i2?pf_rd_m=A3DWYIK6Y9EEQB&pf_rd_s=center-2&pf_rd_r=1EDTZDK3DZCSEJ36PGW5&pf_rd_t=101&pf_rd_p=1375923922&pf_rd_i=915398)

或者

[临 Asp.Net Mvc 4](http://www.amazon.ca/gp/product/1430242361/ref=s9_simh_gw_p14_d17_i1?pf_rd_m=A3DWYIK6Y9EEQB&pf_rd_s=center-2&pf_rd_r=1EDTZDK3DZCSEJ36PGW5&pf_rd_t=101&pf_rd_p=1375923922&pf_rd_i=915398)

他们有关于 MVC 的详细信息，两本书都有一个`Real Application tutorial you can follow`从头到尾的内容，包括部署。

您还将了解单元测试和其他 MVC 工具，例如依赖注入 (Ninject) 和 Moq

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T18:39:04.597

除了上面的答案之外，还有一点没有提到，以防止将数据发送到不需要的视图/客户端。

例如，假设您的产品型号包含您向供应商支付的购买产品的价格。您不希望您的客户看到此数据，但如果它包含在发送到视图的模型中 - 即使您不显示该字段 - 他们也可以评估它。在这种情况下，您将使用不同的视图模型并将数据从 ef/数据库模型复制到视图模型，然后再将其发送到视图。

有时您可能会得到一个 DBcontext 类、一个 EF/数据库类/模型和几个视图模型，每个视图模型都包含来自数据库模型的不同数据子集。

您还可以发现自己的视图模型包含来自多个数据库模型的数据，您经常会看到视图使用列表或下拉列表作为在视图包中发送列表选项的替代方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T23:33:24.117

首先，有一些缺失和组合的技术，一种是从所有其他层完全抽象 DAL，这是一种技术。但是还有其他可以使用的技术；使用“实体”类作为域类。在一个简单的场景中，我们总是使用业务层上的域类来应用所有业务规则。这将有助于我们在不增加大量代码行/类数量的情况下通过层来组合可测试性并避免层之间的无用链接。

当您使用 MVC 时，这种在所有层中拥有此域对象（域类）的方法也会使您的事情变得更容易，因为这些类可以具有数据注释，供以下人员使用：

1.  验证视图
2.  完整性数据库

此外，要了解此类类的概念和使用，我们需要注意一些事情。如果我们使用 POCO 作为我们的实体和域类，那么这些类与 Entity Framework 在解释对 DB 的查询时将使用的类不同。相反，EF 将创建将域对象表示为实体的动态类（从 POCO 派生）并加载所有虚拟字段，通常是相关实体。

而且您将保存类代码和简单的重新映射。

希望这可以帮助

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-28T18:37:56.527

**为什么确保实体对象不暴露在视图层如此重要？**

它不是。对于一个简单的 CRUD 控制器，通常更容易只传入实体对象。对于更复杂的页面，您可能会同时与多个实体对象/类型进行交互。您将如何在不创建新模型类的情况下传递有关这两个对象的信息？

# solr - Solr 自定义请求处理程序：使用组子句创建查询？

> ID：15689296
> 
> 赞同：2
> 
> 时间：2013-03-28T18:16:42.110
> 
> 标签：solr, lucene

我正在编写自己的请求处理程序。从“q”获得用户输入后

```
String q = params.get(CommonParams.Q); 
```

我想使用组子句构建一个复杂的查询：

例子：

```
foo&group.truncate=true&group.ngroups=true&group.field=id&group.sort=date desc&version=2.2&start=0&rows=10&indent=on 
```

我在网上看到他们正在执行以下操作的示例：

查询 query1 = new TermQuery(new Term(q));

那么在这种情况下，q，将是我创建的查询字符串吗？

在我们创建查询之后，我们如何实际执行搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T04:53:49.203

我没有深入了解这些链接，但请检查它是否为您的 Q 提供了任何线索。

*   [Solr 搜索请求处理程序](http://www.typo3-media.com/blog/solr-search-request-handlers.html)
*   [Solr Custom RequestHandler - 注入查询参数](https://stackoverflow.com/questions/6182183/solr-custom-requesthandler-injecting-query-parameters)
*   [Solr：自定义搜索请求处理程序](http://sujitpal.blogspot.in/2011/02/solr-custom-search-requesthandler.html)
*   [自定义 SOLR 搜索组件 - 2 个开发技巧](http://sujitpal.blogspot.in/2011/04/custom-solr-search-components-2-dev.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:42:22.377

我没有写RequestHandler的经验，也不知道有多难。

如果您的要求是向现有查询添加更多过滤器，我认为编写 SearchComponent 很容易。

您可以编写一个 CustomComponent 扩展 SearchComponent。在该自定义组件中，您可以覆盖 prepare 方法，如下所示：

```
public void prepare(ResponseBuilder responseBuilder) throws IOException {
 BooleanFilter booleanFilter = new BooleanFilter();
 TermsFilter termFilter = new TermsFilter(new Term("name", value));
 booleanFilter.add(new FilterClause(termFilter, Occur.MUST));
 /*
   Create a filtered Query with the with the filter created and the actual query
  */
 FilteredQuery query = new FilteredQuery(responseBuilder.getQuery(),booleanFilter);
 // Set the new query into the response builder.
 responseBuilder.setQuery(query);
} 
```

准备好搜索组件后，您可以在 solrConfig.xml 中创建 searchComponent，如下所示：

```
 <searchComponent name="customComponent" class="com.CustomComponent">
<lst name="parameterName">
    <str name="key">value</str>
</lst>
  </searchComponent> 
```

然后您可以将其添加为现有请求处理程序中的最后一个组件

```
<arr name="last-components">
  <str>customComponent</str>
   <str>spellcheck</str>
 </arr> 
```

# windows-8 - Skydrive API 登录类型 Windows 8

> ID：15689299
> 
> 赞同：0
> 
> 时间：2013-03-28T18:17:11.403
> 
> 标签：windows-8, onedrive

我试图找到一种方法来区分用户如何在应用程序中登录 SkyDrive，至少有两种方法。一种是常规登录屏幕，用户在其中输入凭据然后登录。另一种是自动 Windows 8 登录，当用户使用他们的真实帐户登录到 Windows 8 时会发生这种情况；这会自动将他们登录到 Windows 应用商店应用程序中的 SkyDrive。

据我所知，没有办法区分 SkyDrive API，但如果有人知道方法，那将有很大帮助。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T20:48:35.587

好的，我找到了答案。有`LiveAuthClient`一个`CanLogout`属性，如果是 Windows 8 登录，则为 false，如果是常规凭据表单登录，则为 true。

# ios - iOS照片库

> ID：15689300
> 
> 赞同：0
> 
> 时间：2013-03-28T18:17:17.170
> 
> 标签：ios, photo

我正在构建一个应用程序，它是医疗设备的预安装清单。我想让现场代表能够使用摄像头，这样他们就可以为将要安装设备的房间拍照。我的摄像头工作正常，可以显示图像的缩略图采取。我想做的是允许用户选择缩略图，提供标题并存储所选图像。通过商店，我真正的意思是在照片库中保存对该图像的引用。所以会有一个带有标题的 plist 条目和对照片库中图像的引用。

但是我找不到任何可以做到这一点的样本。就在您可以调出现有照片库的地方。我是否处于“不适合你”的情况，或者可以这样做吗？任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T23:51:55.450

我认为这个问题已经死了，但是“Learning iPad Programming”（Turner/Harrington）这本书作为其教程的一部分，开发了一个名为“photoWheel”的应用程序，它涵盖了你正在寻找的很多内容。确保您获得了第 2 版，iOS 5（第 1 版）和 iOS 6 之间有很多变化。

注意：这不是一本很棒的书，但可能涵盖了您在与用户“开发”应用程序时尝试做的大部分事情。

# python - 为什么应用程序和小部件之间没有引用？

> ID：15689313
> 
> 赞同：3
> 
> 时间：2013-03-28T18:18:20.287
> 
> 标签：python, pyqt, pyqt4, ipython

这是对 [为什么应用程序会在 sys.exit 命令之后显示的后续内容？](https://stackoverflow.com/questions/15688889/why-will-the-application-show-after-sys-exit-command)

我正在关注本教程：

[http://zetcode.com/tutorials/pyqt4/firstprograms/](http://zetcode.com/tutorials/pyqt4/firstprograms/)

我稍微修改了代码来测试一下

```
import sys
from PyQt4 import QtGui

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    w = QtGui.QWidget()
    w.resize(250,150)
    w.move(300,300)
    w.setWindowTitle("Title")
    w.show()
    sys.exit(app.exec_()) 
```

我对为什么没有参考感到困惑，`app`我`w`希望有某种迹象表明它`w`是一个孩子或什么的`app`。

我在 Spyder 和一个 IPython 解释器中运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:20:28.460

对于任何使用 Qt 的 GUI 应用程序，只有一个 QApplication 对象，无论应用程序在任何给定时间是否有 0、1、2 或更多窗口。所有窗口都由应用程序自动管理。

您确实必须对其进行初始化并掌握`exec`它。

您必须在任何其他 GUI 对象之前创建应用程序（因为它们由它管理）。

[QApplication对象的详细描述](http://pyqt.sourceforge.net/Docs/PyQt4/qapplication.html#details)

# c - 使用 C 在 Windows 中更改线程权限

> ID：15689315
> 
> 赞同：1
> 
> 时间：2013-03-28T18:18:25.070
> 
> 标签：c, windows, multithreading, security, permissions

我有一个使用多客户端方法的服务器应用程序。当它检测到新请求时，首先为新客户端创建一个新套接字。然后为它创建一个新**线程**，新线程将做它应该做的任何事情。

当我为我的客户创建一个新线程时，**以管理员身份执行它是不安全的**（我的应用程序本身以管理员身份运行）。我想将其权限更改为**用户组**权限。我的意思**是 therad 应该作为受限用户执行，而不是管理员。**

我的平台是**Microsoft Windows**，我的编程语言是**C。**我怎样才能做到这一点？我搜索了互联网，但我一无所获。

你能在这里给我发一个示例程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:20:38.093

你不能那样做。一个进程中的所有线程都以具有相同提升级别的同一用户身份运行。

做你所要求的唯一方法是启动一个新进程而不是一个新线程。这篇文章可能会有所帮助：[以受限用户身份运行 - 简单方法](http://blogs.technet.com/b/markrussinovich/archive/2006/03/02/running-as-limited-user-the-easy-way.aspx)。

# google-app-engine - 为什么我的生产数据存储具有未包含在 index.yaml 中的索引？

> ID：15689318
> 
> 赞同：1
> 
> 时间：2013-03-28T18:18:38.120
> 
> 标签：google-app-engine, google-cloud-datastore

在本地针对 dev_appserver.py 运行我的应用程序时，列出的索引与我的文件`http://127.0.0.1:8080/_ah/admin/datastore_indexes`中列出的索引完全匹配。[但是，当我在https://appengine.google.com/datastore/indexes](https://appengine.google.com/datastore/indexes)`index.yaml`查看我的生产索引时，仪表板上显示了一些额外的索引，这些索引在.`index.yaml`

为什么是这样？生产应用程序引擎是否会像 dev_appserver.py 那样自动生成新索引？或者，如果我知道它们不再使用，我应该删除这些“剩余”索引吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T19:29:17.377

它们将是“剩余的”索引。生产服务器只会*添加*它在 index.yaml 中找到的新索引，它不会删除旧索引（您的应用程序的不同版本可能有不同的索引要求）。

您可以`appcfg.py vacuum_indexes .`从应用程序的目录运行，它会提示您删除服务器上存在但从 index.yaml 中丢失的任何内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:46:56.907

您可能想要删除未使用的索引。新索引是自动生成的，但我们将何时清理的决定权留给您（因为我们无法知道您何时会在应用程序版本之间切换）。

请参阅[https://developers.google.com/appengine/docs/java/tools/uploadinganapp#Updating_Indexes](https://developers.google.com/appengine/docs/java/tools/uploadinganapp#Updating_Indexes)和 [https://developers.google.com/appengine/docs/java/tools/uploadinganapp#Deleting_Unused_Indexes](https://developers.google.com/appengine/docs/java/tools/uploadinganapp#Deleting_Unused_Indexes)

# javascript - 使用 javascript replace 替换 p 标签中的所有字符

> ID：15689323
> 
> 赞同：0
> 
> 时间：2013-03-28T18:19:01.107
> 
> 标签：javascript, jquery, replace

我的网站上显示了来自 XML 提要的数据。不幸的是，在 XML 提要中，所有者使用了重音：` 而不是撇号：'

我正在使用以下 javascript 尝试用撇号替换重音符号，但它仅适用于内容中的第一个重音符号。如何调整代码以使其影响 p 标签内的所有重音。

```
<script type="text/javascript">
    $("p").each(function() {
    var text = $(this).text();
    text = text.replace("`", "'");
    $(this).text(text);
    });
   </script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T18:19:58.797

使用带有 "global" ( `g`) 标志的正则表达式：

```
text = text.replace(/`/g, "'"); 
```

当您将字符串用作第一个参数时，仅替换第一个匹配项（如您所见）。使用该`g`标志，所有匹配项都将被替换。（显然，如果您使用正则表达式中的任何特殊字符，请务必将它们转义。例如，如果您想替换所有`[`字符，则需要`\`在 the 之前将`[`其转义，否则它具有特殊正则表达式中的含义。）

另请参阅[Ricardo](https://stackoverflow.com/a/15689371/157247)关于使用将函数[`text`](http://api.jquery.com/text/#text-functionindex--text)直接传递给而不是using 的能力的说明`each`，例如：

```
<script type="text/javascript">
    $("p").text(function(index, text) {
        return text.replace(/`/g, "'");
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:21:12.240

你不需要`each`

```
$('p').text(function(i, text) {
    return text.replace(/\`/g, "'");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T18:21:21.283

您需要使用正则表达式 - 例如：

```
text = text.replace(/`/gi, "'"); 
```

常规替换仅替换第一个实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T18:22:41.353

你必须使用一个贪婪的正则表达式：

```
text = text.replace(/`/g, "'"); 
```

# regex - 记事本++替换，正则表达式

> ID：15689324
> 
> 赞同：0
> 
> 时间：2013-03-28T18:19:04.197
> 
> 标签：regex, macros, replace, notepad++

我正在尝试在 Notepad++ 中替换 RegEx 并遇到问题。

本质上，我正在编写一个脚本，并向一个在我的代码中出现数百次的函数添加了一个额外的变量。

所以它是：
`MouseClick(442,421)`

现在我为鼠标点击延迟添加了第三个变量，所以它将是

`MouseClick(442,421,4500)`

4.5 秒是默认延迟

目前它不能作为未声明的第三个变量起作用，所以我基本上想使用 RegEx 来查找我所有的鼠标点击并将默认值 4500 添加到末尾，这可能还是 RegEx 不是答案？

我试图找到：`MouseClick(*,*)`
并替换为：`MouseClick(*,*,4500)`

用通配符替换时值也会相同吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:26:48.943

你不能用通配符代替。您必须“捕获”以前存在的值。你可能想找到

```
MouseClick\((.*),(.*)\) 
```

并将其替换为

```
MouseClick(\1,\2,4500) 
```

如果您有任何问题，请发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:27:05.780

选择**正则表达式**搜索模式后，替换`MouseClick\((.*),(.*)\)`为`MouseClick(\1,\2,4500)`：

![在此处输入图像描述](../Images/8b85b5c693a6b9f84d8d91429d477702.png)

# asp.net - 针对数据表运行 SQL

> ID：15689326
> 
> 赞同：0
> 
> 时间：2013-03-28T18:19:07.400
> 
> 标签：asp.net, sql, ado.net, datatable

我已经在 ASP.NET 3.5 中务实地生成了一个`DataTable`，现在我想使用 group by 并在此上使用 SQL 进行一些计算`DataTable`。

我的问题是：是否可以为此编写一个新的 SQL 查询`DataTable`并生成一个新的更新`DataTable`？

例如：

```
select ID, sum(Rate) 
from **dataTable** 
group by ID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:35:34.237

您不能针对 重写 SQL `Datatable`，但可以使用`DataTable.DefaultView.RowFilter`,`DataTable.DefaultView.Sort`字符串属性进一步过滤当前数据集：

**来自MSDN**的示例：

```
using System;
using System.Data;
using System.Windows.Forms;

public class Form1 : Form {
   protected TextBox Text1;
   protected DataSet DataSet1;

   public static void Main() {
      DemostrateDataView();
   }

   private static void DemostrateDataView() {
      // Create a DataTable with one column
      DataTable dt = new DataTable("MyTable");
      DataColumn column = new DataColumn("Col", typeof(int));
      dt.Columns.Add(column); 

      // Add 5 rows on Added state 
      for (int i = 0; i < 5; i++) {
         DataRow row = dt.NewRow();
         row["Col"] = i;
         dt.Rows.Add(row);
      }

      // Add 5 rows on Unchanged state 
      for (int i = 5; i < 10; i++) {
         DataRow row = dt.NewRow();
         row["Col"] = i;
         dt.Rows.Add(row);
         // Calling AcceptChanges will make the DataRowVersion change from Added to Unchanged in this case
         row.AcceptChanges();
      }

      // Create a DataView
      DataView dv = new DataView(dt);

      Console.WriteLine("Print unsorted, unfiltered DataView");
      PrintDataView(dv);

      // Changing the Sort order to descending
      dv.Sort = "Col DESC";

      Console.WriteLine("Print sorted DataView. Sort = 'Col DESC'");
      PrintDataView(dv);

      // Filter by an expression. Filter all rows where column 'Col' have values greater or equal than 3
      dv.RowFilter = "Col < 3";

      Console.WriteLine("Print sorted and Filtered DataView by RowFilter. RowFilter = 'Col > 3'");
      PrintDataView(dv);

      // Removing Sort and RpwFilter to ilustrate RowStateFilter. DataView should contain all 10 rows back in the original order
      dv.Sort = String.Empty;
      dv.RowFilter = String.Empty;

      // Show only Unchanged rows or last 5 rows
      dv.RowStateFilter = DataViewRowState.Unchanged;

      Console.WriteLine("Print Filtered DataView by RowState. RowStateFilter =  DataViewRowState.Unchanged");
      PrintDataView(dv);
   }

   private static void PrintDataView(DataView dv) {
      // Printing first DataRowView to demo that the row in the first index of the DataView changes depending on sort and filters
      Console.WriteLine("First DataRowView value is '{0}'", dv[0]["Col"]);

      // Printing all DataRowViews 
      foreach (DataRowView drv in dv) {
         Console.WriteLine("\t {0}", drv["Col"]);
      }
   }
} 
```

**更多信息**：http: [//msdn.microsoft.com/en-us/library/system.data.dataview.rowfilter.aspx](http://msdn.microsoft.com/en-us/library/system.data.dataview.rowfilter.aspx)

**数据表分组**方式：[https](https://stackoverflow.com/a/8472044/752527) : //stackoverflow.com/a/8472044/752527

# javascript - 使用 JavaScript 和 Codigniter 将数组传递给下拉框

> ID：15689329
> 
> 赞同：0
> 
> 时间：2013-03-28T18:19:15.100
> 
> 标签：javascript, codeigniter, dom-events

使用`$location`Codeigniter 的会话定义变量，它可以是“Austin”、“Houston”...等。每个地点都提供不同的游览。由于`$location`已经定义了变量，我需要做的就是在下拉框中填充特定位置的可用游览。下拉列表是表单的一部分，它将在特定控制器上进行验证。谁能给我一些 Javascript 示例来填补我的代码中的空白？

```
 <?php
$location = $this->session->userdata('location');

// javascript goes here to decide which location and what tours to send in an array.
// $options_tour will be the returned array sent to the form_dropdown()

//form ...
$data_tour = 'class="span12"';
$tour = array('style' => 'font-weight:bold;');
echo form_label('Select Tour: ','tour', $tour);
echo form_dropdown('tour', $options_tour, '', $data_tour);
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:21:33.363

使用 JavaScript 以这种方式填充表单将需要一种迂回的方法。

要么创建一个隐藏字段供 javascript 读取以获取 $location 变量的值，要么创建一个检索它的 ajax 调用。

接下来，您将编写一个 JavaScript 函数，该函数根据位置返回适当的值。就像是：

```
function get_tours( location ){

    var tours = {};

    switch locations {

        case 'Austin':
         tours = { "City Center": { 
                                   "text": "City Center" 
                                   "value": "city_center"
                                  }
                 };
        break;

        //etc...
    }

    return tours;
} 
```

如果您选择使用 AJAX 方法，则需要在 AJAX 成功返回时调用此游览选项设置函数。

既然您的 JavaScript 变量中有游览，您将需要更新由 PHP 生成的页面中元素的元素。就像是：

```
function create_tour_options ( tours ){

    var select = document.getElementById('tour');

    for ( tour in tours ){
        tour_option = document.createElement('option');
        tour_option.value = tours['tour']['value'];
        tour_option.text = tours['tour']['text'];
        select.appendChild('tour_option');
    }

    // Probably more efficient to create a new select object 
    // and replace the existing one instead of adding and 
    // removing individual options. 
} 
```

此外，如果您不需要使用 JavaScript，您可以简单地编写一个 php 函数来执行上述操作并返回您的 $options_tour 变量。就像是：

```
function get_tours( $location='Austin' ){

    $tours = array();

    switch $location {

        case 'Austin':
            $tours = array( "text" => "City Center" 
                            "value" => "city_center"
                          );
        break;

        //etc...
    }

    return $tours;
} 
```

我相信如果可以的话最好使用 PHP，因为选项将在初始页面加载时生成，之后不必插入。

另外我不确定你是否使用 JQuery，所以我尝试使用 vanilla JavaScript 示例代码。

# c# - 获取唯一 ID 或校验和以检测父应用程序进程的篡改

> ID：15689334
> 
> 赞同：0
> 
> 时间：2013-03-28T18:19:30.493
> 
> 标签：c#, .net, security

您如何计算父应用程序 EXE 的校验和以进行篡改检测？

是否像将 EXE 加载到内存中并在其上运行 CRC32 一样简单？是否有更好的方法或内置机制可以为每个构建/版本的 EXE 生成唯一 ID，以便您可以检测它是否被篡改，或者模块是否未在为其编译的原始父进程中执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:43:32.180

您可以使用`CodeAccessPermission`和权限要求：

[http://msdn.microsoft.com/en-us/library/3e879fzy.aspx](http://msdn.microsoft.com/en-us/library/3e879fzy.aspx)

`Demand()`方法抛出`SecurityException`异常

> 在运行时，如果调用堆栈中的所有调用者都没有被授予当前实例指定的权限。

此外，您需要阅读代码签名：

*   [http://msdn.microsoft.com/en-us/magazine/cc163583.aspx](http://msdn.microsoft.com/en-us/magazine/cc163583.aspx)
*   [http://en.wikipedia.org/wiki/Code_signing](http://en.wikipedia.org/wiki/Code_signing)
*   [http://www.codeproject.com/Articles/325833/Basics-of-Signing-and-Verifying-code](http://www.codeproject.com/Articles/325833/Basics-of-Signing-and-Verifying-code)

以下是如何检查程序集签名的示例：

[http://blogs.msdn.com/b/shawnfa/archive/2004/06/07/150378.aspx](http://blogs.msdn.com/b/shawnfa/archive/2004/06/07/150378.aspx)

签署父程序集。给子程序集的父程序集的公钥。如果父程序集使用正确的公钥签名，那就很好。如果没有，失败。

# c# - C#表单需要调用父表单中定义的方法

> ID：15689337
> 
> 赞同：4
> 
> 时间：2013-03-28T18:19:36.400
> 
> 标签：c#, .net, oop

我有一个`EmployeeForm`继承自部分类表单 () 的表单 ( `MainForm`)。在里面`MainForm`我有一个`SaveSomething`我想调用的方法（）。

我该怎么做呢？

```
using SomeLib;

namespace FooEmployee
{
    public partial class EmployeeForm: MainForm
    {
        private void dgv_DoubleClick(object sender, EventArgs e)
        {
             SaveSomething();
        }
    }    
}

namespace SomeLib
{
    public partial class MainForm: Form
    {
        private bool SaveSomething()
        {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T18:21:18.170

`protected`用作方法上的访问修饰符，而不是`private`.

`private`仅表示该方法所在的类。`protected`另一方面，表示当前类和所有从它继承的类。

您的代码将如下所示：

```
public partial class MainForm: Form
{
    protected bool SaveSomething()
    {
        // ...
    }
} 
```

这称为[访问修饰符](http://msdn.microsoft.com/en-gb/library/ms173121.aspx)，该链接指向有关 C# 中所有可用访问修饰符（[`public`](http://msdn.microsoft.com/en-gb/library/yzh058ae.aspx)、、、、[`private`](http://msdn.microsoft.com/en-gb/library/st6sy9xe.aspx)和）的MSDN 文章。[`protected`](http://msdn.microsoft.com/en-gb/library/bcd5672a.aspx)[`internal`](http://msdn.microsoft.com/en-gb/library/7c5ka91b.aspx)`protected internal`

# android - Android：自定义警报对话框出现在默认对话框中

> ID：15689339
> 
> 赞同：0
> 
> 时间：2013-03-28T18:19:43.010
> 
> 标签：android, android-alertdialog, android-custom-view

我有一个自定义对话框，当用户单击按钮时会弹出，但它仍然出现在默认对话框中。我一直在环顾四周，下面的代码似乎应该帮助我摆脱边界等，但如果它们实际上是我正在寻找的，我不太确定在哪里实现它们。

```
<style name="test">
<item name="android:windowFrame">@null</item>
<item name="android:windowIsFloating">true</item>
<item name="android:windowContentOverlay">@null</item>
<item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
<item name="android:windowBackground">@color/Red</item>
<item name="android:colorBackgroundCacheHint">@null</item>
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:27:42.210

我不知道为什么您的自定义对话框会出现在默认对话框中，但是如果您愿意编写几行代码来显示自定义对话框，[那么这里有一篇博客文章说明了如何](http://androidresearch.wordpress.com/2012/04/16/creating-and-displaying-a-custom-dialog-in-android/).

# loading - 我已经填充了维度 - 如何填充事实表？

> ID：15689340
> 
> 赞同：2
> 
> 时间：2013-03-28T18:19:45.937
> 
> 标签：loading, data-warehouse, dimension, fact-table, datamart

我已经填充了 4 个维度表，它们是时间昏暗、站点昏暗、废弃昏暗和工作类型昏暗。

我已经在临时表中计算了最终事实表中所需的度量，但是如何将维度 ID 和度量转移到事实表中？

事实表应该以这些列结束

```
TimeID  -  SiteId  -  AbandonedID  -  WorkTypeID  -  HoldTime  -  ACWTime  -  RingTime    TalkTime 
```

数据还需要按 4 维 ID 进行分组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:09:46.393

一个简单的 JOIN 应该可以解决问题。从临时表执行 INSERT...SELECT 到目标表。暂存表上应该有每个维度的度量和自然键，在自然键上执行 4 个连接，每个暗键一个连接，以获得代理键，并插入到事实中。

# firefox-addon - 为什么 gContextMenu 为空？

> ID：15689342
> 
> 赞同：0
> 
> 时间：2013-03-28T18:19:48.847
> 
> 标签：firefox-addon, xul

这是我的代码的精简版。我试图在 Firefox 的右键单击上下文菜单中显示一个菜单项。

这里**gContextMenu**显示为空，它搞砸了 Firefox 的上下文菜单。经过两天的调试，我发现了这一点。

```
<?xml version="1.0"?>

<?xml-stylesheet href="chrome://global/skin/global.css" type="text/css"?>
<?xml-stylesheet href="chrome://foobar/skin/foobar.css" type="text/css"?>

<!DOCTYPE window SYSTEM "chrome://foobar/locale/foobar.dtd">

<overlay id="foobar-browser-overlay"
    xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

    <stringbundleset id="stringbundleset">
    <stringbundle id="foobar-string-bundle" src="chrome://foobar/locale/foobar.properties"/>
    </stringbundleset>

    <popup id="contentAreaContextMenu" onpopupshowing="alert(gContextMenu)">
        <menuseparator />
        <menuitem id="foobar-show-meaning" label="&foobar.showmeaning.label;"  />
    </popup>
</overlay> 
```

注意：
我指的是[http://kb.mozillazine.org/Adding_items_to_menus](http://kb.mozillazine.org/Adding_items_to_menus)将 menuItem 添加到 firefox 的上下文菜单中，仅在选择文本时显示。但是经过调试发现根本原因是gContextMenu为null。

1.  我的 Firefox 版本是**19.0.2**

2.  我不想使用新的 addon-sdk，因为它缺少我计划稍后添加的更精细的控件。（更精细的控件，例如 - 控制窗口大小、其 x、y 坐标）

3.  到目前为止，我是 XUL 开发的新手。

4.  我的参考资料：https [://developer.mozilla.org/en-US/docs/XUL/School_tutorial，https](https://developer.mozilla.org/en-US/docs/XUL/School_tutorial) :
    [//developer.mozilla.org/en-US/docs/XUL/PopupGuide/Extensions，https](https://developer.mozilla.org/en-US/docs/XUL/PopupGuide/Extensions)
    [://developer .mozilla.org/en-US/docs/XUL/PopupGuide/ContextMenus#Hiding_and_Showing_Menu_Items_based_on_Context](https://developer.mozilla.org/en-US/docs/XUL/PopupGuide/ContextMenus#Hiding_and_Showing_Menu_Items_based_on_Context)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:16:54.087

弹出元素很久以前就被弃用了，相应地改变你的覆盖

```
<menupopup id="contentAreaContextMenu"
...
</menupopup> 
```

也不要使用内联事件处理程序，它可能会覆盖原始事件处理程序。[以编程方式添加事件侦听器](http://kb.mozillazine.org/Adding_items_to_menus#Dynamically_showing_context_menu_items)。

# sql-server - 带有多个子查询的 SELECT 查询

> ID：15689350
> 
> 赞同：3
> 
> 时间：2013-03-28T18:20:09.203
> 
> 标签：sql-server, select, count, sql-server-2012

我刚刚为报告编写了此查询。但是我最初在每个子查询上都没有使用日期范围过滤器来编写它。但这没有用。所以我将它添加到每个子查询中。这很有效，但我真的不喜欢每次都重复它，是否有语法可以更简单地做同样的事情？

```
 SELECT Count(r.id)                       AS cnt_total,
   (SELECT Count(r1.entity_id)
    FROM   auto_reminders_members r1
    WHERE  r1.reminder_id = r.reminder_id
           AND r1.date_last_reminder BETWEEN CONVERT(DATETIME, '03/28/2013',
                                             101)
                                             AND
               CONVERT(DATETIME,
               '03/28/2013' + ' 23:59:59.997 ', 101)
           AND r1.action = 'notnow') AS cnt_notnow,
   (SELECT Count(r1.entity_id)
    FROM   auto_reminders_members r1
    WHERE  r1.reminder_id = r.reminder_id
           AND r1.date_last_reminder BETWEEN CONVERT(DATETIME, '03/28/2013',
                                             101)
                                             AND
               CONVERT(DATETIME,
               '03/28/2013' + ' 23:59:59.997 ', 101)
           AND r1.action = 'insert') AS cnt_insert,
   (SELECT Count(r1.entity_id)
    FROM   auto_reminders_members r1
    WHERE  r1.reminder_id = r.reminder_id
           AND r1.date_last_reminder BETWEEN CONVERT(DATETIME, '03/28/2013',
                                             101)
                                             AND
               CONVERT(DATETIME,
               '03/28/2013' + ' 23:59:59.997 ', 101)
           AND r1.action = 'update') AS cnt_update,
   (SELECT Count(r1.entity_id)
    FROM   auto_reminders_members r1
    WHERE  r1.reminder_id = r.reminder_id
           AND r1.date_last_reminder BETWEEN CONVERT(DATETIME, '03/28/2013',
                                             101)
                                             AND
               CONVERT(DATETIME,
               '03/28/2013' + ' 23:59:59.997 ', 101)
           AND r1.action = 'verify') AS cnt_verify
FROM   auto_reminders_members r
WHERE  r.reminder_id = 1
       AND r.date_last_reminder BETWEEN CONVERT(DATETIME, '03/28/2013', 101) AND
                                            CONVERT(DATETIME,
                                            '03/28/2013' + ' 23:59:59.997 ', 101
                                            )
GROUP  BY r.reminder_id 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T18:29:21.043

这是一种无需所有子查询的方法

```
SELECT  Count(r.id) AS cnt_total,
        sum(case when r.action = 'notnow' then 1 else 0 end) as 'cnt_notnow',
        sum(case when r.action = 'insert' then 1 else 0 end) as 'cnt_insert',
        sum(case when r.action = 'update' then 1 else 0 end) as 'cnt_update',
        sum(case when r.action = 'verify' then 1 else 0 end) as 'cnt_verify'        
FROM    auto_reminders_members r

WHERE  r.reminder_id = 1
       AND CONVERT(DATE, r.date_last_reminder) = '20130328' 
```

我还稍微清理了查询，删除了 group by，因为这将始终为 1，并更改日期比较以避免使用逻辑之间的混乱（感谢 Aaron 的评论）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T18:36:32.280

这是一种使用`GROUPING SETS`and的方法`PIVOT`，但这取决于您使用的版本，您忘记告诉我们了：

```
DECLARE @reminder_id INT, @date DATE;

SELECT @reminder_id = 1, @date = '20130328';

;WITH x AS 
(
  SELECT [action] = COALESCE([action],'Total'), c2 = COUNT(*)
    FROM dbo.auto_reminders_members
    WHERE reminder_id = @reminder_id
    AND CONVERT(DATE, date_last_reminder) = @date
    GROUP BY GROUPING SETS(([action]), ())
)
SELECT reminder_id = @reminder_id, * FROM x 
PIVOT 
(
  MAX([c2]) FOR [action] IN ([Total],[notnow],[insert],[update],[verify])
) AS p; 
```

如果是 2005，您可以`GROUPING SETS`使用旧式语法替换该行：

```
 GROUP BY [action] WITH ROLLUP 
```

我真的希望人们停止宽恕`BETWEEN`和这种神奇的“一天结束”的东西。如果您想要一整天，您的 WHERE 子句应该是：

```
WHERE CONVERT(DATE, r.date_last_reminder) = '20130328' 
```

或者，如果您在 2005 年：

```
WHERE r.date_last_reminder >= '20130328'
  AND r.date_last_reminder <  '20130329' 
```

这里有一些重要的点，主要是`23:59:59.997`可能会根据基础数据类型四舍五入或遗漏数据，没有理由将日期时间值转换为字符串来执行查询，并且像这样`m/d/y`的区域格式对各种原因（例如，如果您的查询是针对`03/08/2013`我不知道您是在 3 月 8 日之后还是 8 月 3 日之后）。

请阅读这些文章：

*   [BETWEEN 和魔鬼有什么共同点？](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)

*   [要改掉的坏习惯：错误处理日期/范围查询](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

您还应该小心使用保留字/关键字作为列名，例如`entity_id`和`action`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T18:29:33.250

你也许可以做这样的事情

```
SELECT Count(r.id) AS cnt_total,
  SUM(CASE WHEN r1.action = 'notnow') THEN 1 ELSE 0 END) AS cnt_notnow,
  SUM(CASE WHEN r1.action = 'insert') THEN 1 ELSE 0 END) AS cnt_insert,
  SUM(CASE WHEN r1.action = 'update') THEN 1 ELSE 0 END) AS cnt_update,
  SUM(CASE WHEN r1.action = 'verify') THEN 1 ELSE 0 END) AS cnt_verify,

FROM   auto_reminders_members r
WHERE  r.reminder_id = 1
       AND r.date_last_reminder BETWEEN CONVERT(DATETIME, '03/28/2013', 101) AND
                                            CONVERT(DATETIME,
                                            '03/28/2013' + ' 23:59:59.997 ', 101
                                            )
GROUP  BY r.reminder_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T18:30:37.930

试试这个：

```
select 
    reminder_id,
    count(1) as Total,
    sum(case when  r1.action = 'notnow' then 1 else 0 end) as cnt_notnow,
    sum(case when  r1.action = 'insert' then 1 else 0 end) as cnt_insert,
    sum(case when  r1.action = 'update' then 1 else 0 end) as cnt_update,
    sum(case when  r1.action = 'verify' then 1 else 0 end) as cnt_verify
from auto_reminders_members r
WHERE  r.reminder_id = 1
   AND r.date_last_reminder BETWEEN CONVERT(DATETIME, '03/28/2013', 101) AND
                                        CONVERT(DATETIME,
                                        '03/28/2013' + ' 23:59:59.997 ', 101
                                        )
GROUP  BY r.reminder_id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T18:31:24.187

找到了一种替代解决方案：

```
 SELECT Sum(1)   AS cnt_total,
   Sum(CASE
         WHEN r.action = 'notnow' THEN 1
         ELSE 0
       END) AS cnt_notnow,
   Sum(CASE
         WHEN r.action = 'insert' THEN 1
         ELSE 0
       END) AS cnt_insert,
   Sum(CASE
         WHEN r.action = 'update' THEN 1
         ELSE 0
       END) AS cnt_update,
   Sum(CASE
         WHEN r.action = 'verify' THEN 1
         ELSE 0
       END) AS cnt_verify 
```

FROM auto_reminders_members r WHERE r.reminder_id = 1 和 r.date_last_reminder 在 CONVERT(DATETIME, '03/28/2013', 101) AND CONVERT(DATETIME, '03/28/2013' + '23:59:59.997', 101 之间)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-14T08:27:10.627

```
select convert(nvarchar(10),warnt.created_dt,120) 'Date',loc.loc_name 'Location',--   
loctype.LocationTypeDesc,
 (select SUM(stk.sel_price) from tbl_mst_stock as stk 
inner join tbl_gen_warranty as wrn on stk.Stock_ID=wrn.Stock_Id
inner join tbl_mst_model as mdl on mdl.Model_ID=wrn.model_id
where wrn.mobile_type like 'SL')'Selleing Price',
(Select COUNT(stk.stk_code) from tbl_mst_stock as stk 
inner join tbl_gen_warranty as warn on stk.Stock_ID=warn.Stock_Id
inner join tbl_mst_model mdl on mdl.Model_ID=warn.model_id
    where warn.mobile_type like 'SL') 'Stock count'
From tbl_mst_location as loc 
inner join tbl_mst_location_types loctype on loc.LocationTypeID=loctype.LocationTypeID
inner join tbl_gen_warranty as warnt on loc.Location_ID=warnt.Location_id
Where  loctype.LocationTypeID=1 and loctype.group_id=1 
and (CONVERT(nvarchar(10),warnt.created_dt,120) 
Between CONVERT(nvarchar(10),'2013-01-01',120) and convert(nvarchar(10),'2013-07-09'))
Group by loc.loc_name,loctype.LocationTypeDesc,warnt.created_dt,loctype.LocationTypeID 
```

# regex - Eclipse：如何搜索字符串，但不在评论中

> ID：15689352
> 
> 赞同：4
> 
> 时间：2013-03-28T18:20:19.557
> 
> 标签：regex, eclipse

如何在源代码中搜索“*”（乘法运算符）？

不是星号字符（在评论等中）。只是运算符 *!

```
/** foo method */    // <- this should not be in search results 
public int foo(int i, int j)
{      
    /* compute the values */ // <- this should not be in search results 
    return i * j;            // <- this should be in search results 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:24:02.790

这个正则表达式成功了：

```
^(?!\s*(//|\*|/\*)).*\* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:49:44.310

这是不可能的。Eclipse 文件搜索不知道注释，因此您不能轻易地排除注释中的结果。（语义）Java 搜索不允许搜索运算符，仅搜索类型、方法等（搜索对话框的一个弱点是允许搜索非合法标识符的文本 - 它看起来像文本搜索，但实际上不是）。

因此，您只能使用正则表达式帮助自己进行文件搜索，这可能适用于您的大多数情况，但不会 100% 正确，并且取决于源中注释和字符串文字的样式可能会失败。

编写一个正则表达式，搜索除“//”、“/ *”或（“* ”在行首或仅在空格之后）之外的所有 *。特别是最后一种情况可能会出现问题，具体取决于您打破长数学术语的位置。如果您将运算符保留为上一行的最后一个符号，则没有问题，如果它是新行的第一个符号，则它是。在这种情况下，根据搜索的紧急程度，您可能会考虑重新格式化搜索来源。在 Eclipse 中重新格式化所有内容非常容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T20:30:07.710

您可以使用正则表达式搜索通过 Eclipse 进行搜索，我已经找到了要使用的正则表达式。[你可以在这里](http://rubular.com/r/wqBDFiku7d)看到一个例子。这个例子有一堆我用来测试正则表达式的不同类型的注释块。

`(?mx)(?<![\/\*+\n])\*+(?![\n\*+\/])`

它涉及 3 个部分的组合：

1.  否定看后面 on`/`后跟 1 或更多`*`，这表示注释的开始。
2.  我们正在寻找的实际匹配`\*+`，或“一个或多个”`*`
3.  Negative 以任意数字向前看注释块的结尾，`*`后跟一个`/`.

`mx`开头的 告诉正则表达式查看多行。因此，当它触发时，它正在寻找`\*+`没有任何开始注释的中间模式，并且没有以任何结束注释结束（不管`*`使用了多少 s）。

这可以更改为查找 Java 注释中不包含的任何模式，无论注释的“艺术”有多大或有多疯狂。通过使用`(?mx)(?<![\/\*+\n])PATTERN_GOES_HERE(?![\n\*+\/])`和替换`PATTERN_GOES_HERE`模式来搜索不包含在评论中。这将让你插入任何你需要的疯狂模式，其中不包含在评论中的重要部分由负面的观察来处理。

# .net - Visual Studio 2012 警告 MSB3026：无法复制 DLL 文件

> ID：15689353
> 
> 赞同：34
> 
> 时间：2013-03-28T18:20:19.650
> 
> 标签：.net, asp.net-mvc, visual-studio, visual-studio-2012, signalr

我不断得到：

> 警告 MSB3026：无法复制 dll 错误。

我在解决方案中有几个项目。

在构建时，我也收到错误：

> 错误 47 无法将“myapp\bin\Debug*.dll”复制到“bin*.dll”。重试次数超过 10。失败。

该应用程序只是在调试过程中停止响应，我每次都必须关闭 Visual Studio。这很烦人，但现在也变得令人沮丧。

我们是八名团队成员，我们所有人都遇到了同样的错误。我们无法重建解决方案，并且应用程序运行非常缓慢。

我们在项目中使用的一件事是[SignalR](http://en.wikipedia.org/wiki/SignalR)。

这些是我迄今为止尝试过的事情。他们没有帮助我，但他们可能会帮助读者：

1.  我已经尝试过*[Visual Studio 调试/加载速度非常慢](https://stackoverflow.com/questions/12567984/visual-studio-debugging-loading-very-slow)*中描述的解决方案，但没有奏效。

2.  我还尝试在每个项目属性中取消选中启用 Visual Studio 托管进程，但这也没有解决问题。

3.  [http://www.richard-banks.org/2008/04/how-to-fix-problems-with-locked-files.html](http://www.richard-banks.org/2008/04/how-to-fix-problems-with-locked-files.html) 和 [http://social.msdn.microsoft.com/Forums/](http://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/40ed753e-47af-4638-8a72-1d607102a05c/)中描述了解决方案[zh-CN/msbuild/thread/40ed753e-47af-4638-8a72-1d607102a05c/](http://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/40ed753e-47af-4638-8a72-1d607102a05c/)

4.  项目上的预构建脚本： `if exist "$(TargetPath).locked" del "$(TargetPath).locked" if exist "$(TargetPath)" if not exist "$(TargetPath).locked" move "$(TargetPath)" "$(TargetPath).locked"`

5.  bin 文件夹不受源代码管理。

6.  有时杀死 Microsoft.VisualStudio.Web.Host.exe 进程会释放对文件的锁定，但这并不总是有效。

7.  我在管理员模式下运行 Visual Studio。

8.  我对源代码文件夹具有完全访问权限（读/写权限）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T19:02:27.907

这通常是您的 bin 目录的权限问题。在 Windows 资源管理器中导航到它并确保只读已关闭。如果您在更改目录的读取状态时遇到错误，请确保您在管理员级别帐户上运行或相应提升。重新启用写入权限后，您的构建应该可以正常工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-17T14:25:19.420

清洁解决方案，然后重建解决方案为我解决了这个问题。
我第一次尝试执行清理时，出现访问冲突错误。
为了解决这个问题，我退出了 VS，手动删除了 bin 文件夹，然后重新打开它。然后我可以执行清洁。

这与权限或访问级别无关。
确保输出目录不是只读的并且以管理员身份运行 VS 并没有帮助。

请参阅[Visual Studio “无法复制” ... 在构建期间](https://stackoverflow.com/q/18102859/2596334)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-18T19:38:23.470

我也遇到了这个问题，似乎是 VS 中的一个已知错误，在 2010 年、2012 年和 2013 年时不时地随机吸引人们，我在这里尝试了许多建议，以及在其他网站上发现的一些建议，但都没有奏效。帮助我的是进入项目的调试属性并清除“启用 Visual Studio 托管进程”，重建所有并且不再出现错误。

希望这对您有用，但也就是说，由于它是 VS 本身中已知的报告错误，我们可能都在修复症状并幸运地做一些事情来清除文件锁定，真正的问题仍然存在于 VS 中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-27T09:07:50.750

几天前我遇到了这个问题并尝试了很多方法，但对我有用的解决方案是停止项目中一些类库使用的 Windows 服务。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-04T03:33:36.153

对我来说同样的问题。解决方案是我的调试器仍在后台运行程序。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-28T08:24:59.327

我遇到过同样的问题。似乎试图复制的 dlls 视觉工作室已损坏或类似的东西。我试图将特定的 dll 复制到我的桌面，但它失败并显示错误消息。所以我用新的dll替换了整个dll，这解决了我的问题。希望有帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-26T14:41:24.443

这对我有用：

1.  关闭 VS
2.  删除 bin 和 obj 文件夹。
3.  如果项目位于任何云服务同步文件夹（如 OneDrive）中，请将其移动到本地常规文件夹。
4.  删除解决方案文件夹中的 .suo 文件
5.  再次打开VS并重建。

一些类似的问题涉及 dll 被锁定，因此无法复制，在这种情况下，可以在[此处](https://forums.asp.net/t/1995299.aspx?How+to+solve+Error+Could+not+copy+Exceeded+retry+count+of+10+Failed+)和[此处](https://developercommunity.visualstudio.com/content/problem/793032/the-file-is-locked-by-net-core-host.html)找到帮助！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-15T08:37:31.703

我有同样的问题。清除浏览器历史记录并构建项目。这解决了我的问题。希望有帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-27T09:25:27.157

这个问题一直困扰着我的开发。无论禁用只读安全权限和修改影响 dll 的访问权限。

我通过确保解决方案的父文件夹上的安全权限允许计算机的管理员读取和写入访问权限，然后在管理员模式下运行 Visual Studio 解决了这个问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-12T23:47:51.697

我有两个项目

*   源/回购/项目1
*   源/回购/项目2

项目 1 已将项目 2 添加为现有项目（两个不相邻的文件夹）发生错误消息。

但是当我将 Project2（作为文件夹）移动到 Project 1 中时，错误消息就消失了。

新结构是：

*   源/回购/项目1
*   源/存储库/Project1/Project2

一旦我将 Project2 作为“现有项目”添加到项目 1 中，一切正常。

# c++ - Python Exception: index out of range while debuging code c++ with support for stl with gdb

> ID：15689365
> 
> 赞同：2
> 
> 时间：2013-03-28T18:20:58.900
> 
> 标签：c++, python, exception, gdb, g++

我有一个代码：

```
#include <list>

int f(std::list<int>& l)
{
    l.clear();
    int i = 0;
    return i;
}

int main(int argc, char* argv[])
{
    std::list<int> l;
    int i = f(l);
    i++;  
} 
```

我以 3 种方式构建它：

1.  g++ -g -o main1 ../main1.cpp
2.  g++ -g -o main1 -O1 ../main1.cpp
3.  g++ -g -o main1 -O2 ../main1.cpp

我用 gdb (GNU gdb (GDB) 7.5.1) 调试它，当我进入 int f(std::list& l) 时，我得到这样的输出：

```
Python Exception <type 'exceptions.IndexError'> list index out of range:
(gdb) Python Exception <type 'exceptions.IndexError'> list index out of range: 
```

这是我的 gdb 会话：

```
(gdb) bre main
Breakpoint 1 at 0x400603: file ../main1.cpp, line 11.
(gdb) r
Starting program: /home/mhd/Texts/Programming/Programms/Exercises/Linux/BruceMolayUnixLinux/Exercises/2/Head/Debug/main1 
warning: no loadable sections found in added symbol-file system-supplied DSO at 0x7ffff7ffa000
warning: Could not load shared library symbols for linux-vdso.so.1.
Do you need "set solib-search-path" or "set sysroot"?
(gdb) n
(gdb) n
(gdb) s
Python Exception <type 'exceptions.IndexError'> list index out of range: 
(gdb) Python Exception <type 'exceptions.IndexError'> list index out of range: 
q

Debugger finished 
```

如何防止此异常？为什么会抛出异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T17:17:20.750

您可以通过禁用有问题的漂亮打印机来防止此异常。请参阅“帮助禁用漂亮打印机”。

# c++ - C++模板检查值

> ID：15689366
> 
> 赞同：0
> 
> 时间：2013-03-28T18:21:00.477
> 
> 标签：c++, templates

我需要编写 2 个我不知道如何处理的函数模板。

第一个是一个函数，仅当函数参数为 100（我假设 int 等于 100）时才返回 true，但在编译期间应该知道结果（没有 RTTI）。

编辑：我不知道语法。我认为应该这样做：[http ://blog.emptycrate.com/node/271](http://blog.emptycrate.com/node/271)

第二个是函数，如果参数是 const 对象或临时对象，则返回 true。（与上述条件相同）。

我试过了

```
template<class T>
bool isConst(T a) {
    return false;
}

template<class T>
bool const& isConst(T const& a) {
    return true;
} 
```

但它不像预期的那样工作

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:29:45.793

> Can anyone help me with that?

Yes. Since this is obviously homework, I'll give you a clue instead of giving you the answer, because giving you the answer wouldn't teach you anything.

> First one is a function that returns true only if the function parameter is 100 (I assume int that is equal to 100) but the result should be known during compilation (without RTTI).

0 is false, and anything that is not 0 is true, is that right? Knowing this, you can return an *arithmetic expression* that will represent true or false.

# javascript - 单击按钮时显示/隐藏元素

> ID：15689367
> 
> 赞同：0
> 
> 时间：2013-03-28T18:21:06.923
> 
> 标签：javascript, jquery, css, html-table

我有这样的表：

```
<tr>
    <td class="title">Title</td>
    <td class="body">Body</td>
    <td class="any">Any text</td>
</tr>
<tr>
    <td class="title">Title</td>
    <td class="body">Body</td>
    <td class="any">Any text</td>
</tr>
<tr>
    <td class="title">Title</td>
    <td class="body">Body</td>
    <td class="any">Any text</td>
</tr> 
```

我正在使用这个脚本来隐藏/显示 td="body"

```
$('.title').append("<button class='moredrop'>&darr;</button>");
$(".moredrop").click(function(){
    $(".body").toggle(); 
```

它显示和隐藏表中的所有 td。我希望它像这里一样只隐藏/显示这个 td：

```
 $("tr").toggle(
    function(){$(".body",this).css("display","block");},
    function(){$(".body",this).css("display","none");}); 
```

但是点击按钮。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:33:11.083

搜索包含的 TR，然后转到特定的 .body

```
$('.moredrop').on('click', function () {
    $(this).closest('tr').find('.body').toggle();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:42:46.230

试试这个 ：

```
$(document).ready(function(){
    $('.title').append("<button class='moredrop'>&darr;</button>");
    $('tr').on('click','.moredrop',function(){
            $(this).parents('tr').children('.body').toggle();
    });
}); 
```

这是工作[演示](http://jsfiddle.net/jzutm/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T18:24:08.760

```
$('.moredrop').click(function(){
    $('td.body').toggle();
}); 
```

# r - 基于多个标准绘制整体百分比

> ID：15689368
> 
> 赞同：2
> 
> 时间：2013-03-28T18:21:07.220
> 
> 标签：r, plyr

更新：如果有人想知道，这两个答案都有效。它们都将实现汇总表，就像您在 Excel 中模拟 Sumifs 时创建的一样。这正是我一直在寻找的。再次感谢你们俩。

我有一个看起来像这样的数据框（df），但产品更多。 `df$Yr`基于截止日期 >= 2012 年 3 月

```
Product      Classif         Yr     Revenue
a            paid_yes      TRUE     25
a            paid_yes      TRUE     20
a            paid_yes      TRUE     35
a            paid_yes      FALSE    20
a            paid_yes      FALSE    30
a            paid_yes      FALSE    30
a            paid_partial  TRUE     15
a            paid_partial  TRUE     15
a            paid_partial  FALSE    18
a            leased        TRUE     12
a            leased        TRUE     12
a            leased        FALSE    14
a            Other         TRUE     27
a            Other         FALSE    30
a            Other         TRUE     25
a            Other         FALSE    22
a            Other         TRUE     32
a            Other         FALSE    30
a            Other         TRUE     24
a            Other         FALSE    27
b            paid_yes      TRUE     45
b            paid_yes      FALSE    32
b            paid_yes      TRUE     35
b            paid_yes      FALSE    39
b            paid_partial  FALSE    42
b            paid_partial  FALSE    45
b            paid_partial  TRUE     47
b            paid_partial  FALSE    33
b            paid_partial  FALSE    28
b            leased        TRUE     48
b            leased        FALSE    46
b            leased        FALSE    45
b            leased        TRUE     37
b            leased        FALSE    33
b            leased        TRUE     46
b            leased        FALSE    44
b            Other         TRUE     49
b            Other         FALSE    45
b            Other         TRUE     43
b            Other         FALSE    39 
```

我正在尝试按产品（a、b、c 等）绘制小平面散点图。我希望我的 y 轴是，并且 x 轴是每个中`df$Classif`的总百分比。或者换句话说，在给定年份的产品总收入中，每个分类占多少百分比？`Revenue``Product``Yr`

我希望我的摘要框架看起来像......

```
Product      Classif         Yr     perc.rev
a            paid_yes      TRUE     .332
a            paid_partial  TRUE     .123
a            leased        TRUE     .099
a            Other         TRUE     .446 
```

每个 perc.rev 加起来为 100%，给定一个`Product`, `Classif`, 和`Yr`

我尝试使用以下代码获取我的摘要数据集/列：

```
df.perc <- ddply(df, .(Product, Classif, Yr), summarise,
               perc.rev = sum(Revenue)/count(Classif)) 
```

结果数据框为我提供了、和的*平均*收入。我需要的是一个给定的收入的*百分比*，与所有相比-由`Product``Classif``Yr`*`Classif``Classif``Product``Year`*

 *我很确定我只需要一些关于我的 perc.rev 公式`.variables`或`ddply`. 我习惯了 Excel，通常会使用 2 个 sumifs 公式，但不确定如何在 R 函数中表达我需要在此处执行的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:42:47.007

我是新手`plyr`，所以可能有更优雅的解决方案。`(Product, Yr)`首先，存储每个组合的总数。然后运行`ddply`：

```
counts <- ddply(df, .(Product, Yr), summarise, count=sum(Revenue))
ddply(df, .(Product, Classif, Yr), summarise,
  perc.rev=sum(Revenue)/counts$count[counts$Product==Product[1] & counts$Yr==Yr[1]]) 
```

这使

```
 Product      Classif    Yr   perc.rev
1        a       leased FALSE 0.06334842
2        a       leased  TRUE 0.09917355
3        a        Other FALSE 0.49321267
4        a        Other  TRUE 0.44628099
5        a paid_partial FALSE 0.08144796
6        a paid_partial  TRUE 0.12396694
7        a     paid_yes FALSE 0.36199095
8        a     paid_yes  TRUE 0.33057851
9        b       leased FALSE 0.35668790
10       b       leased  TRUE 0.37428571
11       b        Other FALSE 0.17834395
12       b        Other  TRUE 0.26285714
13       b paid_partial FALSE 0.31422505
14       b paid_partial  TRUE 0.13428571
15       b     paid_yes FALSE 0.15074310
16       b     paid_yes  TRUE 0.22857143 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:43:30.627

为什么不做一个两遍过程，使用添加副产品“总计” `ave(...,...,sum)`，然后使用添加按分类百分比

```
<strike>apply( ..., ..., function(x) x["Classif"]/x['total"] )<\strike> 
```

* * *

编辑：（我还没有弄清楚这应该如何检查，但现在将尝试修复）第二部分太神秘了，可能完全是错误的。将 x["Classif"] 更改为 x["Revenue"] 可能是可以纠正的，但我认为`apply`完全是错误的功能。

请求是“在给定年份的产品总收入中，每个分类占多少百分比”......以及“在给定产品、分类和年份的情况下，每个 perc.rev 加起来为 100%”。现在，输出清楚地暗示至少第二部分应该是“在给定产品和年份的情况下，每个 perc.rev 加起来是 100%”。（省略分类）。

```
dfrm$total <- ave(dfrm$Revenue, dfrm$Product, dfrm$Yr, FUN=sum)
dfrm$prod.yr.prop <- dfrm$Revenue/dfrm$total
aggregate(dfrm$prod.yr.prop, list(class=dfrm$Classif, Yr=dfrm$Yr, Prod=dfrm$Product), FUN=sum)
          class    Yr Prod          x
1        leased FALSE    a 0.06334842
2         Other FALSE    a 0.49321267
3  paid_partial FALSE    a 0.08144796
4      paid_yes FALSE    a 0.36199095
5        leased  TRUE    a 0.09917355
6         Other  TRUE    a 0.44628099
7  paid_partial  TRUE    a 0.12396694
8      paid_yes  TRUE    a 0.33057851
9        leased FALSE    b 0.35668790
10        Other FALSE    b 0.17834395
11 paid_partial FALSE    b 0.31422505
12     paid_yes FALSE    b 0.15074310
13       leased  TRUE    b 0.37428571
14        Other  TRUE    b 0.26285714
15 paid_partial  TRUE    b 0.13428571
16     paid_yes  TRUE    b 0.22857143 
```

这会在产品年内进行总计，然后计算这些分组中的特定于类别的比例。*

# c++ - 访问二维数组中的元素

> ID：15689370
> 
> 赞同：0
> 
> 时间：2013-03-28T18:21:11.783
> 
> 标签：c++, multidimensional-array, tile

我正在用 C++ 编写一个平台游戏，并使用平铺地图来构建世界。

地图包含分配瓦片的值：

例如二维数组：

```
int map[4][4]={
    {1, 1, 1, 1},
    {1, 0, 0, 1},
    {1, 0, 0, 1},
    {1, 1, 1, 1}, }; 
```

我以类似的方式创建一个精灵：`int sprite[1][1]={ {2} };`

我的问题是，如何访问 2D 数组中的特定图块或元素**？**

我读了这篇[文章（第 3 篇文章）](http://www.cplusplus.com/forum/general/18315/)，想知道二维数组是否不是最好用的。

我的精灵总是以窗口为中心，在按键时我的世界在他身后移动。

我想与某些图块发生碰撞，因此需要在我的精灵 2D 数组图块和我的 Map 2D 数组之间进行一些交互...

就目前而言，我可以走出地图，因为我没有以其他方式对其进行编码。我该**怎么办？**理想情况下，我想阻止他离开地图，然后我可以将碰撞与之整合。

下面是一些东西的截图（但地图比上面显示的要大）： ![复活平台游戏](../Images/d4c1f3adc3426347daf208234f306232.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:06:51.960

如果我有：

```
int array[4][4]; 
```

我可以通过以下方式访问元素：

```
array[a_num][also_a_num] 
```

其中 i 和 j 是有效索引。

通常当我想要这样的东西时，我只使用一维数组和一些数学。

```
int height = a_num;
int width = also_a_num;
int amap[height * width];
int x_pos,y_pos;
int value = amap[y_pos*width + x_pos]; 
```

你可以很容易地检查 x_pos 和 y_pos 的界限。

至于碰撞，你可以尝试一个结构数组。

```
struct tile{
  bool walkable;
  int type;
};

tile amap[height*width]; 
```

# css - css 规则未在 safari 中应用，但在 Firefox 中可以

> ID：15689381
> 
> 赞同：0
> 
> 时间：2013-03-28T18:21:48.453
> 
> 标签：css, twitter-bootstrap, responsive-design

我试图弄清楚为什么这个规则没有在 Safari 或 IE 中应用

```
.navbar-inner {
    min-height: 40px;
    padding-right: 20px;
    padding-left: 20px;
    background-color: #333333 !important;
    background-image: linear-gradient(to bottom, rgb(74, 74, 74), rgb(54, 54, 54)) !important;
    background-repeat: repeat-x;
    border: 1px solid rgb(212, 212, 212);
    border-radius: 4px 4px 4px 4px;
    box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.067);
} 
```

基本上，我试图覆盖引导程序中导航栏的背景颜色。如您所见，我添加了 !important 关键字，只是为了测试 css 特异性问题。那仍然没有解决问题。您能给我一些解决此问题的建议吗？它在 Firefox 中运行良好......我只是在 Chrome 中进行测试。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:27:28.513

不同的浏览器使用不同的渐变属性。[这](http://www.colorzilla.com/gradient-editor/)是一个非常好的生成它们的工具。

为此，您可以使用：

```
.navbar-inner {
    background: rgb(74,74,74); /* Old browsers */
    background: -moz-linear-gradient(top, rgb(74,74,74) 1%, rgb(54,54,54) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(1%,rgb(74,74,74)), color-stop(100%,rgb(54,54,54))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, rgb(74,74,74) 1%,rgb(54,54,54) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, rgb(74,74,74) 1%,rgb(54,54,54) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, rgb(74,74,74) 1%,rgb(54,54,54) 100%); /* IE10+ */
    background: linear-gradient(to bottom, rgb(74,74,74) 1%,rgb(54,54,54) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4a4a4a', endColorstr='#363636',GradientType=0 ); /* IE6-9 */
} 
```

`!important`尝试覆盖 Bootstrap 默认样式时不需要。只需确保在自定义样式*之前*将您的 Bootstrap 样式添加到页面。

# file - 检查Java程序的SVN分支中是否存在文件

> ID：15689382
> 
> 赞同：0
> 
> 时间：2013-03-28T18:21:49.490
> 
> 标签：file, svn, branch

我想检查java程序的SVN分支中是否存在文件。有谁知道怎么做？我找了这个网站，但找不到。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T21:15:56.127

我可以使用以下行获取本地资源的远程资源：

```
import org.tigris.subversion.subclipse.core.ISVNLocalResource;
import org.tigris.subversion.subclipse.core.ISVNRemoteResource;
...

IResource resource= ....
ISVNLocalResource svnResource = SVNWorkspaceRoot.getSVNResourceFor(resource);
ISVNRemoteResource svnRemoteResource = svnResource.getLatestRemoteResource(); 
```

# javascript - 如何知道视频在IE中是否全屏

> ID：15689386
> 
> 赞同：4
> 
> 时间：2013-03-28T18:22:14.300
> 
> 标签：javascript, html, internet-explorer, html5-video, fullscreen

我测试了下面的 JavaScript 代码来检测 HTML5 视频是否全屏。该代码在 Chrome、Firefox 和 Opera 中运行良好，但在 IE 中却不行。如何在 Internet Explorer 中使用它？我尝试了“document.msFullscreenElement”，但没有奏效。

```
if( document.fullscreenElement || document.webkitFullscreenElement ||     document.mozFullScreenElement || document.msFullscreenElement || document.oFullscreenElement)
   mode = "FULLSCREENVIDEO";
 else
   mode = "REGULAR"; 
```

# java - SoundPool 对象保留了多少本机音轨？

> ID：15689389
> 
> 赞同：0
> 
> 时间：2013-03-28T18:22:19.397
> 
> 标签：java, android, soundpool, audiotrack

如果我创建一个具有 20 个并发流的 SoundPool 对象

```
new SoundPool(20, ...) 
```

此 SoundPool 对象将保留多少本机 AudioTrack 对象？

SoundPool 的本机实现是开源的吗？我在哪里可以查看它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:13:39.680

根据我的初步测试，SoundPool 每次播放声音时，都会在系统中保留一个原生音轨。因此，SoundPool 可以同时播放的声音数量受可用的免费系统音轨数量的限制。SoundPool 本身不执行音频混合。

# javascript - 在 Wordpress 模板中运行 jQuery 脚本

> ID：15689391
> 
> 赞同：0
> 
> 时间：2013-03-28T18:22:21.010
> 
> 标签：javascript, jquery, wordpress, templates, attr

我正在尝试在 Wordpress 网站的 header.php 文件中运行以下脚本：

```
<script>
    jQuery(function($) {
        jQuery('[href=#membership]').attr( 'data-menu-top', '500' );
    });
</script> 
```

当我运行时：

```
jQuery('[href=#membership]').attr( 'data-menu-top', '500' ); 
```

...在 Firebug 的控制台中，它可以正常工作，但放置在 header.php 文件内的脚本块中，它没有像应有的那样将属性添加到锚点。我已经没有想法了。

*我尝试将脚本块移动到许多地方，包括在结束正文标记之前的 footer.php，但似乎没有任何效果。

-**更新**- 我明白了。我认为这是我修复的另一个插件的 JQuery 语法错误和不正确定位的组合。

这是我的最终工作代码：

```
<script>
        jQuery(function($) {
            jQuery('#menu-item-14 a').attr( 'data-menu-top', '25' );
            jQuery('#menu-item-11 a').attr( 'data-menu-top', '1300' );
            jQuery('#menu-item-12 a').attr( 'data-menu-top', '500' );
            jQuery('#menu-item-28 a').attr( 'data-menu-top', '500' );
            jQuery('#menu-item-13 a').attr( 'data-menu-top', '500' );
        });
    </script> 
```

我仍在修补从样式的角度获取正确的属性，但它正确显示在源代码中。

顺便说一句，这是为了使用 Wordpress 中的[Skrollr](http://prinzhorn.github.com/skrollr/)库进行正确的哈希导航。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:26:43.530

总是`wp_head();`在关闭之前有`</head>`一个 Wordpress 的要求。

也适用于页脚，`wp_footer()`就在关闭之前`</body>`

这是在您使用`<script>`标签内的 jquery 脚本的情况下。更好地使用：[http ://codex.wordpress.org/Function_Reference/wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:27:17.763

只需尝试使用：

```
jQuery(function($) {
        $('[href=#membership]').attr( 'data-menu-top', '500' );
    }); 
```

# php - 来自同一地址的邮件未送达

> ID：15689402
> 
> 赞同：1
> 
> 时间：2013-03-28T18:22:41.613
> 
> 标签：php, outlook.com

我在自己的域上使用 Outlook.com。这是一家商店。每当客户下订单时，我都会发送两封电子邮件：

*   我向他/她发送订单确认（FROM orders@[mydomain] 到客户的电子邮件地址）
*   我向自己发送一份副本（FROM orders@[mydomain] TO orders@[mydomain]（相同的地址））

第二封邮件永远不会送达。

当我将 TO 地址替换为 [mydomain] 中的任何其他地址时，它也永远不会送达。当我将 TO 地址替换为其他任何东西时，它就可以工作。此外，当我不尝试发送第一封电子邮件而只发送第二封电子邮件时，它仍然永远不会送达。

我检查了垃圾文件夹和已删除的邮件文件夹 - 它们是空的。

你能帮我解决这个问题吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:41:42.517

您是否检查过您的服务器是否有一个内部邮件系统，这些邮件正在被传递而不是它们实际上离开服务器来传递给您？此外，这可能是因为您的域名不允许中继邮件（这意味着您的服务器未设置为实际从您的域名发送邮件，因此它是通过您的域名中继的）。服务器上的某处可能有一个显示错误的电子邮件日志文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:29:01.580

Have you tried to place your email in the BCC: on the original email?

```
*BCC:orders@[mydomain]* 
```

# ios5 - ios - 如何从 NSDictionary 中获取值？

> ID：15689403
> 
> 赞同：1
> 
> 时间：2013-03-28T18:22:41.917
> 
> 标签：ios5, ios6, nsdictionary

我对 NSDictionary 非常缺乏经验。我有这个数据结构：

```
{"aps":
  {"alert":null},
   "custom_control":
    {"type":"topic_comment",
     "object":
        {"topic_id":"1","topic_section":"2","plan_id":"3","user_id":"4"}
    }
} 
```

通过执行以下操作，我可以潜在地获得“aps”值：

```
 NSString *aps = [dictionary objectForKey:@"aps"]; 
```

但是由于 aps 包含一个项目数组，我应该使用什么数据结构来代替 NSString？以及如何获取 custom_control 的值和“对象”中的值

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:33:09.367

```
NSDictionary *dict_object = [[dictionary objectForKey:@"custom_control"]objectForKey:@"object"]; 
```

这是您的字典的确切层次结构

您的`NSDictionary(Keys:aps,custom_control)`

```
(i).aps

   (i.i)NSDictionary(key:alert)

(ii).custom_control

   (ii.i)NSDictionary(keys:type,object)

          (ii.i.i)NSString(key:topic_comment)

          (ii.i.ii)NSDictionary(keys:topic_id,topic_section,plan_id,user_id) 
```

看到这个[链接](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)

# android - onActivityResult 方法未被调用 Android

> ID：15689404
> 
> 赞同：21
> 
> 时间：2013-03-28T18:22:42.807
> 
> 标签：android, android-activity

我正在尝试将数据从子活动发送给父母。但不知何故， onActivityResult(..) 没有被调用。这是代码

家长活动

```
selectedText.setOnTouchListener(new OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {
                    if (event.getActionMasked() == MotionEvent.ACTION_DOWN) {
                        Intent intent = new Intent(Parents.this,Child.class);
                        startActivityForResult(intent, 1);
                    }
                    return true;
                }
            });

        @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            switch (requestCode) {
            case 1:
                if (resultCode == RESULT_OK) {
                    if (data.hasExtra("selText")) {
                        selectedText.setText(data.getExtras().getString(
                                "selText"));

                    }
                    break;
                }
            } 
```

子活动：我可以看到 setResult() 中设置的选定值。但是在子活动完成后，它不会回到父活动。

```
textListView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int myItemInt,
                    long arg3) {
                selectedFromList =(String) (textListView.getItemAtPosition(myItemInt));
                Intent data = new Intent();
                data.putExtra("selText", selectedFromList);
                setResult(RESULT_OK,data);
                finish();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-10-23T15:43:43.023

对于遇到相同问题的任何人，没有收到的症状`onActivityResult`，以下情况可能会导致此问题。

*   检查您是否`startActivityForResult()`正确使用，请勿使用`startActivity()`.
*   如果您在重写`onBackPressed`方法中执行某些操作，`super.onBackPressed();`则必须位于方法的最后，而不是第一行。（我的情况要花5个小时）
*   在清单或等效参数中删除`android:launchMode="singleInstance"`以创建意图。
*   在被调用者活动的清单中删除`noHistory="true"`。
*   检查`setResult()`错过了。
*   `finish()`被调用以关闭活动。用于`finishActivity()`关闭被调用者活动。
*   使用`requestCode`大于零。负值不起作用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-28T20:13:41.307

我发现了错误。我在 manifest.xml 中有以下行用于儿童活动。

```
 android:launchMode="singleInstance" 
```

删除此行后。它就像一个魅力！

谢谢大家的意见和建议。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-05T19:26:24.007

我的情况有点复杂，我意识到我错误地使用了指向子活动中按钮侦听器的第一个实例的静态引用。

在第一轮它正在工作，但是当用户从父活动返回时，`onActivityResult`没有被调用。

替换静态引用是修复

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T18:45:12.560

不确定这是否是您的情况，但是在启动子活动时请确保使用`startActivityForResult(intent)`, 而不是`startActivity();`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-29T19:53:30.467

将我的调用活动清单从更改为`android:launchMode="singleInstance"`解决`android:launchMode="singleTop"`了我的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-16T03:59:15.497

用于启动新 Avtivity 的意图不能用标志设置`Intent.FLAG_ACTIVITY_NEW_TASK`，因为根据[android 开发人员文档](https://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK)：

> 当调用者从正在启动的活动中请求结果时，不能使用此标志。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-18T15:01:08.850

使用*singleTop*而不是*singleInstace*作为*launchMode*，因为它在同一任务中维护活动。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-14T05:40:34.810

**onPause 正在影响 onActivityResult。**

极端情况之一可能是：
我的情况不同而且很愚蠢：问题出在 onPause 中，`finish`调用并结束活动。删除它并运行良好。

```
@Override
protected void onPause() {
    super.onPause();
    finish(); // this line causing the issue removed it. 
} 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2017-03-16T12:49:17.580

删除`OnActivityResult()`主类中的方法，它工作得很好...... **MainActivity->>>>Fragments**

# mysql - 在运行时修改视图

> ID：15689405
> 
> 赞同：0
> 
> 时间：2013-03-28T18:22:53.733
> 
> 标签：mysql, database, view, phpmyadmin

这是在运行时更改视图结构的好习惯吗？

我创建了一个视图

```
CREATE VIEW freligiouschk AS SELECT user_id, religion, caste FROM freligious WHERE religion IN ('Christian-Protestant','Christian-Orthodox','Hindu','Parsi','Christian-Others') OR caste IN ('Rajput','Kurmi/Kurmi Kshatriya','Veluthedathu Nair','Kuruhina Shetty','SKP') 
```

创建视图当用户单击按钮时，条件中的那些值会发生变化 像这样

```
CREATE VIEW freligiouschk AS SELECT user_id, religion, caste FROM freligious WHERE religion IN ('Jain-Digambar','Muslim-Others','Inter-Religion','Buddhist','NoReligiousBelief') OR caste IN ('Mahishya','SKP','Relli','Bhovi','Karmakar') 
```

这是改变运行时的好习惯吗？如果 2 个或更多用户尝试同时更改视图会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:27:57.143

不，这是一个糟糕的主意。视图在所有数据库用户（有权访问该对象）之间共享；在用户访问视图时更改视图的定义将导致当多个用户访问系统时出现意外行为 - 以难以测试的方式。

这也不是必需的 - 视图服务于一堆[不同的目的](https://stackoverflow.com/questions/1278521/why-do-you-create-a-view-in-a-database)，但您所做的似乎并不是其中之一。

# hsqldb - 是否可以获得 hsqldb 内存数据库的大小？

> ID：15689410
> 
> 赞同：0
> 
> 时间：2013-03-28T18:23:05.920
> 
> 标签：hsqldb, in-memory-database

我正在测试将对象存储在 hsqldb 数据库中的各种序列化策略。通常，我会使用基于文件的数据库，但在我的测试中，使用内存数据库对我来说很方便。

有没有办法获得这样一个数据库的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:16:46.767

您可以尝试在填充数据库之前和之后检查 JVM 内存分配。

```
Runtime.getRuntime().totalMemory();
Runtime.getRuntime().freeMemory(); 
```

总减去可用内存是当前内存使用量。

# asp.net - 将独立的 ASP.Net 应用程序添加到现有的 ASP.Net 网站

> ID：15689412
> 
> 赞同：2
> 
> 时间：2013-03-28T18:23:12.507
> 
> 标签：asp.net, iis, iis-7.5, ssl-certificate

我有一个奇怪的问题要问每个人。我目前正在为一家公司开发一个项目，该公司拥有一个现有的 ASP.Net 网站，但他们丢失了所有源代码。我需要为网站添加一些功能，但他们现在不愿意为网站重新设计付费。

我可以将我的 Web 应用程序部署到他们网站的子目录并使其正常运行吗？我必须这样做，因为我需要利用他们附加到现有网站的 SSL 证书（不幸的是它不是通配符证书）。

他们正在运行带有 IIS 7.5 的 Windows Server 2008 SR2。当前的 ASP.Net 网站使用表单身份验证。我的网络应用程序也使用表单身份验证。

这是可行的吗？我从来没有遇到过，也不知道答案。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:47:29.917

您可以在网站的根目录下创建一个子文件夹，然后进入 IIS 管理器，选择该文件夹，右键单击它，然后单击`Convert to application`。这将允许您为该文件夹创建一个单独的应用程序，以便 IIS 单独处理它。您可以在与根网站相同的应用程序池中创建一个新的应用程序别名，但您也可以在完全不同的/新的应用程序池中运行它，以防您希望它在不同的 .NET 版本下运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:45:04.000

虽然您可以部署您的新网站，但它几乎肯定不会工作，因为它很可能会使用与旧网站不同版本的框架。

您可以在 iis 中创建一个新站点并在那里部署您的站点并配置 iis 以使用较新的框架版本，但是您仍然有两个问题：
1\. ssl 证书，取决于证书和您的 iis 配置，它可能无法正常工作
2.人们如何从旧网站导航到新网站？如果您无法修改源，您将如何添加链接？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:20:38.220

你可以使用 RedGate 的 Reflector 来反编译它。这会给你所有的源代码。会安全很多。

# javascript - JavaScript 排队点击事件

> ID：15689415
> 
> 赞同：2
> 
> 时间：2013-03-28T18:23:20.213
> 
> 标签：javascript, jquery

我有一长串像这样的复选框：

```
 <input class='masterCheckbox' type='checkbox' onclick='clickAll()' />

 <input class='modifyDb' type='checkbox' onclick='ajaxCall(someId)' />
 <input class='modifyDb' type='checkbox' onclick='ajaxCall(someId)' checked />
 <input class='modifyDb' type='checkbox' onclick='ajaxCall(someId)' checked />
 ... lets say there's exactly 100 ...
 <input class='modifyDb' type='checkbox' onclick='ajaxCall(someId)' />
 <input class='modifyDb' type='checkbox' onclick='ajaxCall(someId)' />
 <input class='modifyDb' type='checkbox' onclick='ajaxCall(someId)' checked /> 
```

该`ajaxCall()`函数对 PHP 页面进行 ajax 调用（使用 jQuery）以在数据库中进行一些更改。

我希望`masterCheckbox`复选框在选中时通过所有未选中的复选框并单击它们，以便它们每个都进行单独的 ajax 调用。

使用 jQuery，我设法获取所有`modifyDb`复选框，然后在每个元素上使用`.each()`名为 a 的函数。`.click()`这在视觉上有效；复选框已切换，但未进行 ajax 调用。

这是因为 ajax 调用太快了吗？我可以以某种方式将函数调用排队吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T18:25:32.567

使用`trigger`.
以下代码重复`onclick`所有`.modifyDb`

```
function clickAll() {
    $('.modifyDb').trigger('click');
} 
```

参考

*   [http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T18:31:15.937

我会重新排序并摆脱所有内联事件处理程序。像这样的东西：

```
<input class='masterCheckbox' type='checkbox' />

<input class='modifyDb' type='checkbox' data-id='someId)' />
<!-- .... --> 
```

然后绑定它们：

```
$(".modifyDb").click(function() {
    var id = $(this).data("id");
    ajaxCall(id);
}); 
```

对于主复选框：

```
$(".masterCheckbox").click(function() {
    $(".modifyDb").each(function() {
        var id = $(this).data("id");
        ajaxCall(id);
        // or if you really must, you could use trigger() here
    })
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T18:30:08.997

这将触发尚未选中的框上的点击事件

```
function clickAllUnchecked(){
    $('.modyfDb').not(':checked').trigger('click')
} 
```

# php - 如何更新 mongodb PHP 中的所有文档

> ID：15689417
> 
> 赞同：3
> 
> 时间：2013-03-28T18:23:24.443
> 
> 标签：php, mongodb

我正在设置一个 cronjob 来更新`views_15`集合中所有文档的字段`query`。

这就是我所拥有的，应该可以工作：

```
 $update = array(
        '$set' => array (
            'views_15' => 0
            )
    );

    $db->queries->update(array(), $update, array('multi' => true)); 
```

它也适用于特定查询！

那么我应该`array()`从 <query> 参数中使用什么来代替 , 来选择所有文档呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T20:23:49.913

在更新命令的选项中替换`'multi'`为：`'multiple'`

```
$db->queries->update(array(), $update, array('multiple' => true)); 
```

有关所有有效更新选项，请参阅[http://php.net/manual/en/mongocollection.update.php](http://php.net/manual/en/mongocollection.update.php)。

# linux - 在 Bash 中检测 JAR 命令失败

> ID：15689421
> 
> 赞同：0
> 
> 时间：2013-03-28T18:23:32.937
> 
> 标签：linux, bash, jar, error-detection

我`jar`在 bash 中执行这个简单的命令：

```
jar cvfm control.jar Manifest <class list> 
```

如何自动检测执行此命令的失败？失败是指该命令只是由于以下原因未能执行：

*   中的错误`Manifest`，
*   `jar`命令本身的不当使用，
*   一些随机错误，例如`ClassNotFoundError`，等。

请注意，我**不想**知道是否归档了正确的课程集。所以我不会认为这是失败的。

我目前只是使用详细选项来检查一切是否顺利。但是，我觉得这很耗时。我只想知道该`jar`命令是否成功归档了一组类文件。有没有办法在 bash 中做到这一点？

* * *

我发现的关于这个问题的最接近的其他资源是：[如果 jar 文件的存档失败，如何检测错误？](https://stackoverflow.com/questions/15199947/how-to-detect-error-if-archive-of-jar-file-failed). 但是，我对批处理文件一无所知，我有兴趣在 bash shell 中执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:40:16.470

这是查看命令是否成功的最基本方法：

```
if jar cvfm control.jar Manifest <class list> ; then
    echo "Success"
else
    echo "Oops!"
fi 
```

如果您只想检测失败，则反转测试：

```
if ! jar cvfm control.jar Manifest <class list> ; then
    echo "Oops!"
fi 
```

或者明确地测试结果：

```
jar cvfm control.jar Manifest <class list>
if (( $? )) ; then
    echo "Oops!"
fi 
```

# ios - 如何画一条线来连接地图上的两个引脚？

> ID：15689422
> 
> 赞同：0
> 
> 时间：2013-03-28T18:23:37.087
> 
> 标签：ios, map, mkmapview, pins

我在地图上放置了两个图钉：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    CLLocationCoordinate2D cord1 = {.latitude = 44.508473, .longitude =  11.375828};
    CLLocationCoordinate2D cord2 = {.latitude = 44.508871, .longitude =  11.375854};

    [self.mapView setRegion:MKCoordinateRegionMake(cord1, MKCoordinateSpanMake(.005, .005)) animated:YES];
    [self.mapView setRegion:MKCoordinateRegionMake(cord2, MKCoordinateSpanMake(.005, .005)) animated:YES];

    AddressAnnotation * annotazione = [[AddressAnnotation alloc] init];
    AddressAnnotation * annotazione2 = [[AddressAnnotation alloc] init];

    [annotazione setCoordinate:cord1];
    [annotazione2 setCoordinate:cord2];

    [self.mapView addAnnotation:annotazione];
    [self.mapView addAnnotation:annotazione2];
} 
```

有没有办法用线连接引脚？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:02:13.143

`MKPolyline`有方法`polylineWithCoordinates:count:`，它需要一些坐标。您已经拥有创建折线所需的两个坐标 (`cord1`和)。`cord2`将叠加层添加到您的地图并实施`mapView:viewForOverlay:`以返回叠加层视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:54:50.393

在 iOS 4.x 中，Apple 增加了对地图叠加层的支持。阅读更多关于 MKPolyline 和 MKPolylineView 类以及在 MKMapViewDelegate 协议中定义的 mapView:viewForOverlay: 方法可能会有所帮助。Map Kit 框架参考中的所有内容。

# mysql - Laravel 4 Fluent Query Builder 加入 + 插入

> ID：15689423
> 
> 赞同：0
> 
> 时间：2013-03-28T18:23:38.243
> 
> 标签：mysql, join, insert, laravel

我正在尝试（没有成功）使用流利的查询生成器执行 join + insert 语句。这是有问题的代码：

```
DB::table('lnk_users_languages')
  ->join('lut_languages', 'lnk_users_languages.lang_id', '=', 'lut_languages.id')
  ->where('lut_languages', 'lut_languages.lang_code', '=', 'en')
  ->insert(array(
    'user_id' => Auth::user()->id,
    'lang_id' => DB::raw('lut_languages.id')
  )); 
```

这是我的数据库结构：

```
mysql> DESCRIBE lut_languages;
+-----------+------------------+------+-----+---------+----------------+
| Field     | Type             | Null | Key | Default | Extra          |
+-----------+------------------+------+-----+---------+----------------+
| id        | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| lang_code | varchar(2)       | NO   | UNI | NULL    |                |
| lang_name | varchar(30)      | NO   |     | NULL    |                |
| dominant  | tinyint(1)       | NO   |     | NULL    |                |
+-----------+------------------+------+-----+---------+----------------+

mysql> DESCRIBE lnk_users_languages;
+---------+------------------+------+-----+---------+----------------+
| Field   | Type             | Null | Key | Default | Extra          |
+---------+------------------+------+-----+---------+----------------+
| id      | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| user_id | int(10) unsigned | NO   | MUL | NULL    |                |
| lang_id | int(10) unsigned | NO   | MUL | NULL    |                |
+---------+------------------+------+-----+---------+----------------+ 
```

最后这是我收到的错误：

```
SQLSTATE[42S22]: Column not found: 1054 Unknown column 'lut_languages.id' in 'field list' (SQL: insert into `lnk_users_languages` (`user_id`, `lang_id`) values (?, lut_languages.id)) 
```

我假设流利的构建器不期望将 join 和 insert 语句一起使用，因为我找不到任何文档。我发现的每个示例都使用带有选择的连接。想法？

**编辑**

刚刚注意到我流利的陈述中有一个错误。

```
->where('lut_languages', 'lut_languages.lang_code', '=', 'en') 
```

应该：

```
->where('lut_languages.lang_code', '=', 'en') 
```

但是，错误仍然存​​在..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T02:27:54.707

是的，它确实去除了插入和删除语句的连接。我有一张票可以解决这个问题，但似乎并非所有 SQL 语法都支持它。不能确定它是 MSSQL 还是 Postgre。无论如何，它没有被接受。

我建议您先检索语言代码，然后进行不加入的插入。无论如何不会对性能或代码大小产生太大影响。

```
$language = DB::table('lut_languages')->where_lang_code($code)->first();
$user_language = DB::table('lnk_users_languages')->insert(array(
    'user_id' => Auth::user()->id,
    'lang_id' => $language->id
)); 
```

# expression - BizTalk 决定形状表达式以将记录插入 DB

> ID：15689427
> 
> 赞同：0
> 
> 时间：2013-03-28T18:23:59.167
> 
> 标签：expression, biztalk, biztalk-mapper

我必须将 SPCIFICchild 记录值插入表中，如果
`msg.SPECIFICchildrecord.rows.count > 1`，

为此，我想使用带有条件的决定形状，`msg.SPECIFICchildrecord.rows.count > 1`请任何人建议我，我必须在决定形状中给出什么表达方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T03:26:18.320

表达式是`msg.SPECIFICchildrecord.rows.count > 1`

# regex - Powershell 中的另一个文件重命名问题

> ID：15689431
> 
> 赞同：0
> 
> 时间：2013-03-28T18:24:26.830
> 
> 标签：regex, powershell

我有一个文件名中包含唯一子字符串的文件。因此我将它与正则表达式匹配。例如，假设文件名为`someFile.asdf1234.txt`.

```
$fileNameRegex = [regex] 'someFile\.(.*).txt'
$fileName = Get-ChildItem C:\test | Where-Object {$_.Name -Match $fileNameRegex}
#         $fileName = 'someFile.asdf1234.txt'
#         so far this works. 
```

我很难做的是使用此信息重命名文件

```
$arbitraryString = "random9753"
# the final file name needs to be "someFile.random9753.txt" 
```

如何重用相同的正则表达式来用 new 重命名文件名的子字符串部分`$arbitrartyString`？

*注意：我不介意更改正则表达式以满足需求（可能使用组），但我只需要一个正则表达式。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:51:15.960

这是一种方法：

```
$fileNameRegex = [regex] '(someFile\.).*(\.txt)'
$fileName = 'someFile.asdf1234.txt'
$arbitraryString = "random9753"

$fileName -match $fileNameRegex > $nul
"$($matches[1])$arbitraryString$($matches[2])"

someFile.random9753.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:03:30.517

一种解决方案是将文件名拆分为子字符串，然后将它们连接在一起。

```
$filename = "someFile.asdf1234.txt"
$arbitraryString = "random9753"

$newfilename = $filename.substring(0,$filename.IndexOf("."))
$newfilename += '.' + $arbitraryString + '.'
$newfilename += $filename.Substring($filename.Length -3)

Write-Host $newfilename 
```

# objective-c - 添加的按钮不显示在 UINavigationController

> ID：15689432
> 
> 赞同：3
> 
> 时间：2013-03-28T18:24:27.520
> 
> 标签：objective-c, cocoa-touch, uiviewcontroller

我正在尝试动态创建一个视图控制器并设置它的视图和标题栏。事情似乎工作得很好。但是当我尝试设置导航栏的左键或右键时，它们只是不显示。我究竟做错了什么？

```
 UIWebView *tempWebView = [[UIWebView alloc] initWithFrame:self.view.bounds];
    [tempWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"someurl"]]];

    UIViewController* tempViewController = [[UIViewController alloc]init];
    tempViewController.view = tempWebView;

    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:tempViewController];

    UIBarButtonItem* closeButton = [[UIBarButtonItem alloc] initWithTitle:@"Close" style:UIBarButtonItemStyleBordered target:self action:nil];
    navigationController.navigationItem.leftBarButtonItem = closeButton;

    [self presentViewController:navigationController animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T18:30:11.700

改变

```
navigationController.navigationItem.leftBarButtonItem = closeButton; 
```

到

```
tempViewController.navigationItem.leftBarButtonItem = closeButton; 
```

`navigationItem`外观由导航控制器呈现的视图处理，因此如果您将其设置在 上而`UINavigationController`不是 上`rootViewController`，当您第一次推送它时，它会被覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:28:22.537

您需要访问 tempViewController 的 navigationItem，而不是 navigationController。

# c4 - 为什么在这个示例代码中图像失去了颜色？

> ID：15689434
> 
> 赞同：2
> 
> 时间：2013-03-28T18:24:30.813
> 
> 标签：c4

当我运行未修改的[“图像属性”示例](https://gist.github.com/C4Examples/3234284)时，图像失去了颜色（与示例随附的[视频不同）。](http://vimeo.com/48915377)知道发生了什么吗？

更新：我意识到只有包含的 C4 图像有这个问题（C4Sky.png 和 C4Table.png）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T00:17:57.790

问题仍然存在。C4Image 的图像属性似乎存在错误。

![图像代码出现错误](../Images/4350f98c8aa444ad49ab549647f3e231.png)

解决方案是使用指向您希望查看的 C4Image 的指针，然后将指针指向的 C4Image 包含在画布上。请务必从画布中删除旧图像。使用对象比较消除了对额外布尔变量的需要。

```
 #import "C4Workspace.h"

    @implementation C4WorkSpace {
        //define 2 invisible images
        C4Image *i1, *i2;
        //define a pointer to a selected image
        C4Image *visibleImage;
    }

    -(void)setup {
        i1 = [C4Image imageNamed:@"C4Sky.png"];
        i2 = [C4Image imageNamed:@"C4Table.png"];

        visibleImage = i1;

        i1.center = i2.center = self.canvas.center;

        [self.canvas addImage:visibleImage];
    }

    -(void)touchesBegan {
        [self.canvas removeObject:visibleImage]; // remove old image

        // see what the pointer is pointing to and update accordingly
        if (visibleImage == i1)
            visibleImage = i2;
        else    
            visibleImage = i1;

        // add the newly referenced C4Image to canvas
        [self.canvas addImage:visibleImage]; 
    }

    @end 
```

这是我将保留此代码的要点的链接：[https ://gist.github.com/drart/5695449](https://gist.github.com/drart/5695449)

# makefile - 带有 glob 的 Makefile 安装目标

> ID：15689435
> 
> 赞同：1
> 
> 时间：2013-03-28T18:24:41.313
> 
> 标签：makefile

是否有使用该`install`实用程序安装 glob 模式文件而不单独执行多个步骤的标准做法？

我需要保持与 SCO OpenServer 5.0.7 的兼容性，该`install`实用程序没有对 glob 的内置支持。

我想做类似的事情：

```
INSTALL = /usr/bin/install
install:
    $(INSTALL) *.4ge $(PROGS) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:28:10.393

我见过一些项目，其中几个共享库被移动到安装位置，并且具有像上面这样的单一匹配模式。

此外，如果将所有文件（特定模式的）移动到同一位置，单独移动它们是没有意义的

# mobile - 在 Xpages 移动数据视图的一行中显示图像

> ID：15689440
> 
> 赞同：0
> 
> 时间：2013-03-28T18:25:00.460
> 
> 标签：mobile, xpages

使用 XPages UP1 移动控件时，是否可以在数据视图的一行中显示图标或图像？控件中有一个图标的构面，但它似乎没有在浏览器页面上呈现图像/图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:31:03.617

iconColumn 确实在使用 Domino 9.0 的移动控件上呈现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:43:17.680

图标可以在移动端的**DataView中显示。**

在**DataView**控件上有一个属性**iconColumn -> icons**。可以这样做：

```
<xe:this.iconColumn>
  <xe:viewIconColumn>
    <xe:this.icons>
      <xe:iconEntry alt="Discussion" styleClass="mblListItemIcon">
          <xp:this.url>..... 
```

完整示例请查看**dynamicMobileView.xsp自定义控件中****TeamRoom**模板中的代码。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:26:19.710

DataView 使用不同的渲染器在移动设备中自动渲染。如果我没记错的话，它使用 div 而不是表格。我不认为图标列包含在该渲染器中。Safari 允许您切换用户代理以查看移动渲染，我很确定 Firefox 也会为此添加。**

# asp.net-mvc - 如何从子元素初始化 AngularJS 指令模型？

> ID：15689444
> 
> 赞同：0
> 
> 时间：2013-03-28T18:25:17.083
> 
> 标签：asp.net-mvc, angularjs, angularjs-directive

我正在尝试使用子元素初始化 AngularJS 指令中的一些数据。在这种情况下，`<map>`元素被替换为`<div>`使用传单连接的 a。我试图弄清楚指令`compile`或函数中是否有某种方法可以从声明的子元素`link`填充集合，如下所示：`markers`

```
<div ng-app="dashboard">
<div ng-controller="DashboardCtrl">
    <map id="devicemap" tile-handle="test.map-fy18v14h" min-zoom="3" max-zoom="9" markers="markers">
        <marker lat="44" lng="-88.5" description="From the Server (Razor)" />
        <marker lat="44.1" lng="-88.6" description="From the Server 2 (Razor)" />
    </map>
</div> 
```

在指令中，我想遍历`<marker>`元素以填充集合。这应该在编译中发生吗？或者，我是否误以为我可以在插入实际模板之前访问我的“假 DOM”？

```
module.directive('map', function () {
return {
    restrict: "E",
    replace: true,
    scope: {
        markers: "=markers"
    },
    template: '<div class="map"></div>',
    link: function link(scope, elm, attributes) {
        var map = L.map(attributes.id, {
            dragging: true,
            zoomAnimation: true
        }).setView([45.505, -88.09], 6);
        L.tileLayer('http://{s}.tiles.mapbox.com/v3/' + attributes.tileHandle + '/{z}/{x}/{y}.png', {
            attribution: "<a href='http://mapbox.com/about/maps' target='_blank'>Terms & Feedback</a>",
        }).addTo(map);

        // This is where I am stuck... is there a way to get the "marker" elements?   
        // the following does not work...
        var markerElements = elm.children('marker');  

        // now would like to loop over markerElements, grab the attributes and add them 
        // to the map (and/or the markers collection).

    };
}); 
```

我可以使用 ajax 调用填充标记，但是，这种技术将允许我在第一次请求页面时预先填充服务器上的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:42:05.797

好的，在 Mark Rajcok 的提示下，我想出了一个解决方案。这允许我使用在服务器上生成的自定义 HTML 元素在地图上设置标记。我需要使用该`list`变量来存储函数中收集的数据`compile`。不确定是否有更简洁的方法可以使用 Angular 执行此操作。

**HTML/剃刀**

```
<div ng-app="dashboard">
    <div ng-controller="DashboardCtrl">
        <map id="devicemap" tile-handle="example.map-fy18v14h" min-zoom="3" max-zoom="9" markers="markers">
        @foreach (var location in Model.Locations)
        {
           <marker lat="@location.Lat" lng="@location.Lng" description="@location.Description" ></marker>                                   
        }
        </map>
     </div>
</div> 
```

**控制器**

```
var module = angular.module('dashboard', ['map-directive']);
module.controller("DashboardCtrl", function ($scope, $http) {
     $scope.markers = [];
}); 
```

**指示**

```
var mapDirective = angular.module("map-directive", []);

mapDirective.directive('map', function () {

    var list = [];

    function link (scope, elm, attributes) {
        var map = L.map(attributes.id, {
            dragging: true,
            zoomAnimation: true
        }).setView([45.505, -88.09], 6);

        scope.markers = list;

        L.tileLayer('http://{s}.tiles.mapbox.com/v3/' + attributes.tileHandle + '/{z}/{x}/{y}.png', {
            attribution: "<a href='http://mapbox.com/about/maps' target='_blank'>Terms & Feedback</a>",
        }).addTo(map);

        scope.$watch('markers', function (newValue, oldValue) {
            if (newValue)
                angular.forEach(scope.markers, function (marker) {
                    L.marker([marker.lat, marker.lng], { draggable: marker.draggable }).addTo(map).bindPopup(marker.description);
                });
        });
    }

    return {
        restrict: "E",
        scope: {
            markers: "=markers"
        },

        compile: function(tElement, tAttrs, transclude) {

            console.log(tElement);
            console.log(tElement.find("marker"));

            var markers = tElement.find("marker");

            angular.forEach(markers, function (marker) {
                list.push({ lat: marker.attributes.lat.value, lng: marker.attributes.lng.value, description: marker.attributes.description.value});
            });

            var htmlText = '<div class="map" id="' + tAttrs.id + '" ></div>';
            tElement.replaceWith(htmlText);
            return link;
        }
    };

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T03:43:29.977

实际上，您可以将 derective 与 templateUrl 一起使用。只需将 ng-transclude 放在那里的任何元素上，它就会拥有所有原始子元素。然后在链接功能中，您可以读取这些 DOM 元素，做任何您想做的事情并清理它们。

# ruby-on-rails - 如何使用繁文缛节宝石？- 寻找更清晰的使用示例/示例

> ID：15689451
> 
> 赞同：1
> 
> 时间：2013-03-28T18:25:55.463
> 
> 标签：ruby-on-rails, gem, nested-forms, model-associations

**问题：有没有人有一个简单的例子来说明如何使用 redtape gem？我希望有基本的 MVC 示例向我展示这一切是如何结合在一起的。**

**一个不同但相关的问题：可能需要做哪些其他事情才能启动和运行，但 Readme.md 描述中没有列出？宝石所有者可能会假设新手（如我）可能不知道做什么？**

**注意：**我在这里提到“错误”，但不要发布它们，因为我很确定它们不相关。我不认为我看到的特定错误是有意义的，因为我什至认为我没有正确地做基础知识以使其正常工作。

**我很确定繁文缛节的宝石是我需要的**

我正在寻找 Accepts_nested_attributes_for (ANAF) 的良好替代品，似乎[redtape gem](https://github.com/ClearFit/redtape)是这类事情的热门选择。（有关历史，请参阅我之前发布的这两个问题：[Rails 3.2 应用程序 - 我应该使用版本控制 gem（paper_trail 或 vestal_versions）还是手动处理它？](https://stackoverflow.com/questions/15235524/rails-3-2-app-should-i-use-a-versioning-gem-paper-trail-or-vestal-versions-o)和[Rails - 如何在不使用 Accepts_nested_attributes_for 的情况下管理嵌套属性？](https://stackoverflow.com/questions/15648396/rails-how-to-manage-nested-attributes-without-using-accepts-nested-attributes)。）

**但是我太笨了，无法使用它-我不知道我不知道什么**

我的问题是我太无知了，无法按照包含的文档实际使用 gem。[通常，我会通过Railscasts](http://railscasts.com)剧集偶然发现这种解决方案（例如[#196 嵌套模型表单（修订版）](http://railscasts.com/episodes/196-nested-model-form-revised)，在我意识到 ANAF 对我正在做的事情来说不够健壮之前，它最初将我指向 ANAF），所以我d 只是按照准备好的指南找到了这个选项。在这种情况下，没有 Railscast，所以我有点卡住了。

**这是我*所做的***

我已经安装了 gem，并且我已经尝试使用自述文件中提供的示例代码，但这就是我所得到的。每次我尝试实际使用它时，我都会遇到许多错误（“...redtape_path 不存在”，各种数据类型错误），当我使用控制器代码时，这些错误似乎会发生变化。但我认为更大的问题是我不知道我在做什么，我只是想一起破解一些东西。

例如（来自 Readme.md）：

```
//The form...

<%= form_for @form, :as => :whatever %>
...

# The controller
class SomethingController
  def new
    @form = Redtape::Form.new(self, params)
  end

  def create # should support update as well...
    @form = Redtape::Form.new(self, params)
    if @form.save
      # ...
    else
      # ...
    end
  end
end 
```

**我认为我需要什么**

有没有人真正使用过繁文缛节，你能分享一个显示所有移动部件（MVC）的例子吗？我觉得我错过了一些大事。我基本上模仿了这个例子，一点运气都没有（只是一个又一个错误）。还有什么我想念的吗？我需要一个作为 Form 对象的“Something”模型吗？那是什么样子的？

请注意，我也看过这篇文章 -[重构 Fat ActiveRecord 模型的 7 种模式](http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/)- 这似乎很有帮助（第 3 点。似乎它可能非常相关），但我仍然没有足够的知识来利用我发现的东西远的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:29:29.090

我写了繁文缛节。不过，正如自述文件所示，Form 对象根本不是我的主意。实际上，这也不是 Bryan Helmkamp 的 (sp?)，尽管他的博客文章启发了我模仿和自动化他的特殊技术。我记得第一次看到它是在 99 年的 Apache Struts 中，我想。

我**试图**让繁文缛节易于使用。也就是说，自从我为 ClearFit 编写它以来，有一次我在使用它时遇到了问题。我没有时间诊断它（因为这是一个非常匆忙的小项目），但它可能是与 simple_form 的意外交互。

无论如何，对于典型的 ANAF 情况，您应该能够将嵌套参数传递给`Redtape::Form.new`. 返回`Form`的对象让您可以调用`#save`并让 Redtape 为您处理持久性，或者您可以使用`#model`. IIRC，`Form`也暴露了验证错误。

希望这可以帮助。

# c++ - 编译器如何确定它正在寻址的多态类型

> ID：15689452
> 
> 赞同：2
> 
> 时间：2013-03-28T18:26:00.697
> 
> 标签：c++, pointers, polymorphism

我有一些代码可以访问派生和基础ptrs，当我打印出地址时，它们是相同的。如果是这种情况，编译器如何知道它所指的地址是 A 还是 B？

这是代码：

```
#include <iostream>

class A
{
public:
   A() : val_(0) {
       ptrA = this;
   }

   virtual void set(int val) { val_ = val; }

   virtual void printval() = 0;

   static A* ptrA;

   int val_;
};

class B : public A
{
public:
   B() : A() {
      ptrB = this;
   }

   virtual void printval() { std::cout << A::val_ << std::endl; }

   static B* ptrB;
};

A* A::ptrA = 0;
B* B::ptrB = 0;

int main() {

   A* p = new B();
   p->set(3);
   p->printval();

   std::cout << "A part address=" << A::ptrA << std::endl;
   std::cout << "B part address=" << B::ptrB << std::endl;

   return 0;
} 
```

这是打印输出：

```
A part address=00501F40
B part address=00501F40 
```

两个地址完全相同。编译器是否还存储了一些额外的信息？

编辑：是的，我的意思是说程序在运行时如何知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:28:45.367

通过实现依赖机制内置的额外信息。当你编译你的程序时，编译器会悄悄地添加它记录所需的所有代码。
对于几乎所有编译器，动态调度都是通过虚拟表和指针实现的。

**食物阅读：**

**[当我调用虚函数时，硬件会发生什么？有多少层间接？有多少开销？](http://www.parashift.com/c++-faq/dyn-binding2.html)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:32:33.787

实际上，假设像你这样的“普通”C实现，B类的大部分数据是一个结构，该结构的第一个成员是A类的对象。因为B和它包含的A都从同一个地方，他们有同一个地址。

因为在 B 的开头有一个 A 对象，所以可以将指向 B 对象的指针转换为指向 A 对象的指针，它的行为类似于 A 对象，因为它是：它是指向 A 数据的指针。

虚函数更复杂。在 A 数据中，您通常看不到，它是一个指向表的指针。如果该对象真的是一个普通的 A 对象，则该指针将指向一个包含 A 的虚函数地址的表。如果该对象是 B 对象，则该指针指向一个包含虚函数地址的表B 的函数。结果是，如果你有一个指针，其编译时类型似乎是指向 A 的指针，编译器会通过在表中查找它们的地址来调用它的函数。如果指向对象的实际类型是 B，则此表提供 B 的虚函数地址。

# php - 某些站点无法通过 curl php 抓取，而它与 curl 一起使用

> ID：15689453
> 
> 赞同：1
> 
> 时间：2013-03-28T18:26:01.710
> 
> 标签：php, curl

我尝试使用 curl php卷曲[http://marinas.com ：](http://marinas.com)

```
$url = 'http://marinas.com';

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_exec($ch);
curl_close($ch); 
```

那不会返回任何东西。虽然如果我尝试使用其他网站（例如 google.com）它会起作用。

[而且，将http://marinas.com](http://marinas.com)直接卷曲到 CLI 中可以...</p>

对我来说是个谜

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:29:19.613

发出请求时设置用户代理：

```
curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']); 
```

本网站不响应没有用户代理的请求。上述设置抓取浏览器的用户代理并将其发送到目标网站。

# php - 我有一个 php 变量，我必须将其长度显示为右对齐的 3 位数字

> ID：15689464
> 
> 赞同：-4
> 
> 时间：2013-03-28T18:26:25.637
> 
> 标签：php, string, variables, string-length

我猜这是一个非常菜鸟的问题，但我对 php 很陌生，甚至不知道如何开始这个问题，基本上我有一组 $vars，我必须将其长度显示为 3 位数字有理有据。

关于如何做到这一点的任何指示？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:28:39.550

您的答案在 PHP 文档中：http: [//php.net/manual/en/function.str-pad.php](http://php.net/manual/en/function.str-pad.php)

从他们的例子：

```
<?php
$input = "Alien";
echo str_pad($input, 10);                      // produces "Alien     "
echo str_pad($input, 10, "-=", STR_PAD_LEFT);  // produces "-=-=-Alien"
echo str_pad($input, 10, "_", STR_PAD_BOTH);   // produces "__Alien___"
echo str_pad($input, 6 , "___");               // produces "Alien_"
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:29:41.767

这应该照顾您刚刚在评论中描述的内容：

```
echo str_pad(strlen("hello"), 3 , "0", STR_PAD_LEFT); 
```

这将返回

```
005 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T18:31:08.317

printf 版本：

```
printf("%40d", 123); //                                      123 
```

40 个字符右对齐

# regex - 带有 2 个非连续空格的正则表达式

> ID：15689468
> 
> 赞同：0
> 
> 时间：2013-03-28T18:26:46.343
> 
> 标签：regex

我正在寻找一个允许字符串内部不超过 2 个非连续空格的正则表达式。

```
WORD is ok
WORD WORD is ok
WORD WORD WORD is ok
WORD WORD WORD WORD is not ok 
```

我现在不在乎连续的空格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:33:47.370

如果字符串包含两个以上的非连续空格，您可以使用负前瞻来防止匹配

```
^(?!\S*\s+\S+\s+\S+\s) 
```

或者，一个有效的字符串将匹配

```
^\S*\s*\S*\s*\S*$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:39:45.397

您可以为此使用反向引用：

```
/(\b.+\b)\1\1\1/ 
```

例如，

```
/(\b.+\b)\1\1\1/.test('HELLO HELLO HELLO HELLO'); // true 
```

然而，

```
/(\b.+\b)\1\1\1/.test('HELLO HELLO HELLO'); // false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T18:56:44.883

你有没有尝试过

```
^([^ ]+\s+){0,2}[^ ]*$ 
```

它假定您在行首没有空间。

# service - Web 服务和经典 Asp

> ID：15689469
> 
> 赞同：-1
> 
> 时间：2013-03-28T18:26:46.820
> 
> 标签：service, web, asp-classic

我有一个工作任务，使用 Web 服务，在基于 Classic Asp 的网站和基于 android 平台的应用程序之间进行通信，使用参数 Date 创建函数，该函数提供来自 bd 的数据，我不知道如何继续，你能给我一个例子或教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T03:30:21.310

您最简单的选择是像这样生成 json（可以很容易地被 android 端使用）：

ASP“服务”

```
<!-- 
this is one example of a library of json helpers that you can use. 
You can get it from this page
http://www.webdevbros.net/2007/04/26/generate-json-from-asp-datatypes/
http://www.webdevbros.net/wp-content/uploads/2008/07/json151.zip
save the downloaded json.asp file in the same folder as your .asp 
-->

<!--#include file="json.asp" -->

<%
    REM 1\. Create and populate ADO Recordset from database
    REM   Note: I am providing just an example and you might 
    REM   ant to look into using a more appropriate command type 
    REM   or cursor type when populating your recordset        

    Set conn = Server.CreateObject("ADODB.Connection")
    conn.Open "put your connection string here"
    Set cmd = Server.CreateObject("ADODB.Command")
    cmd.CommandType = adCmdText 'note must have this constant defined in scope'
    Set cmdTemp.ActiveConnection = conn

    cmd.CommandText = "put your SQL here; be careful to protect against SQL injections" 

    Set rs = Server.CreateObject("ADODB.Recordset")

    rs.Open cmd, ,adOpenForwardOnly,adLockReadOnly 'note make sure these constants are defined in scope'

    REM 2\. Prepare json
    Dim jsonObject

    Set jsonObject = New JSON   'JSON class is in the include file json.asp'
    jsonResult = jsonObject.toJSON(Empty, rs, False) 'You may have to play with the parameters here, if the way json is formatted does not suit you'
                                                   'check the documentation of json.asp library'

    REM 3\. stream json to client
    Response.ContentType = "application/json" 
    Response.Write jsonResult
%> 
```

您可以找到更多有助于将值或结构格式化为 JSON 的库：只需在 SO 或 google 上搜索“classic ASP”+ JSON。[这是一个](https://code.google.com/p/aspjson/)采用 vbscript/ASP 结构并以 JSON 格式输出它们的库。查看 SQL 示例。

检查这个[SO 线程](https://stackoverflow.com/questions/1019223/any-good-libraries-for-parsing-json-in-classic-asp)以获得更多“经典”的 ASP 和 JSON

# xcode - 是否可以在 Xcode 中按命令单击符号进入新选项卡？

> ID：15689471
> 
> 赞同：32
> 
> 时间：2013-03-28T18:26:48.827
> 
> 标签：xcode, keyboard-shortcuts, hotkeys

我正在寻找一个键盘快捷键，它允许我结合“Cmd-t”（打开新选项卡）和“Cmd-单击符号”（跳转到定义）。我希望能够在新选项卡中打开符号定义，就像使用 Web 浏览器时 Cmd 单击（在 Windows 上按 Ctrl 单击）在新选项卡中打开链接一样。

我尝试了一些不同的组合，但在 Cmd-option-Shift-click 崩溃 Xcode 后放弃了！

我目前正在使用 Xcode 4.6.1。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-01-20T14:55:40.100

1.  转到 XCode-> 首选项，
2.  选择导航选项卡，
3.  将“双击导航”更改为“使用单独的选项卡”

现在命令双击符号以在新选项卡中打开。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-14T10:33:17.190

我发现的最简单的方法是，

```
Cmd+T new tab.
Then Cmd+Click on the symbol. 
```

我认为 Xcode 应该有，`Cmd+Shift+Click`在新选项卡中打开函数/类。或`Alt+Cmd+O`或类似的东西:)

`UPDATE:`这是一个老把戏。现在您可以使用@Leigh 答案。`Cmd + double click + (set preferences to open double click navigation in new tab)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T18:51:34.960

您提到的有趣，`⌘⌥⇧-click`因为您可以使用它在新选项卡中打开定义。不幸的是，您还需要在`+`执行此操作后单击窗口导航器中显示的正确标志，因此这是一个两步操作。我认为没有其他方法可以做到这一点。Apple 将其称为“Jump to Definition In...”，因为您可以选择在何处打开它。另外，如果你是键盘侠`^⌘⌥⇧J`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-25T14:33:42.280

在编辑器中选择，一步方法是`⌥⌘ click`. 使用`⌥⌘`，光标将变为指向手指。单击会在新选项卡中打开该符号。

在项目导航器中选择，使用`⌘ double click`.

# iphone - iOS：导航控制器上的自定义按钮仅在 1 个视图控制器上可见，而在其他视图控制器上不可见

> ID：15689475
> 
> 赞同：0
> 
> 时间：2013-03-28T18:27:00.043
> 
> 标签：iphone, ios

我正在应用程序委托中创建一个 NavigationController 并使用以下代码以编程方式向它添加一个自定义按钮。

```
self.navCntrl = [[UINavigationController alloc]initWithRootViewController:self.viewController];
// -- Adding INFO button to Navigation bar --
UIBarButtonItem *infoButton =  [[UIBarButtonItem alloc]
                                initWithTitle:@"i"
                                style:UIBarButtonItemStyleBordered
                                target:self
                                action:@selector(showInfo)];
self.navCntrl.topViewController.navigationItem.rightBarButtonItems = [NSArray arrayWithObjects:infoButton, nil];
self.window.rootViewController = self.navCntrl; 
```

但问题是，当我将第二页推送到 navigationController 时，导航栏上未显示取消按钮。如果我回到第一页，取消按钮就在那里。因此，显然该按钮仅针对第一个视图添加。

对此的一种补救方法是在每个视图控制器中重复添加上述自定义按钮（复制和粘贴代码）。我相信在使用相同的导航控制器时必须有其他方式。如果有的话是什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:36:15.980

导航控制器导航栏中显示的按钮不属于导航控制器，它们是每个单独的视图控制器导航*项*的属性。通常，这些按钮执行的操作适用于当前显示的视图控制器，而不是整个导航控制器。

如果您确实需要导航层次结构中的所有视图控制器都具有相同的按钮，而无需在任何地方复制和粘贴代码，您可以将自己设置为导航控制器`delegate`并`navigationController:willShowViewController:animated:`像这样实现：

```
- (void)navigationController:(UINavigationController *)navigationController  willShowViewController:(UIViewController *)viewController  animated:(BOOL)animated
{
    //Assuming you have initialized self.infoButtonItem elsewhere...:
    viewController.navigationItem.rightBarButtonItem = self.infoButtonItem;
} 
```

# c++ - Stack 使用 Struct 或 Class 来实现其私有数据

> ID：15689484
> 
> 赞同：2
> 
> 时间：2013-03-28T18:27:18.010
> 
> 标签：c++, class, struct, stack

我想通过使用链表来实现一个堆栈类。这是我在头文件中定义的方式。对于堆栈中的每个元素，元素中有两个数据：

```
#ifndef MYSTACK_H_INCLUDED
#define MYSTACK_H_INCLUDED
#include <iostream>
using namespace std;

template<typename T>
class MyStack{
public:
    MyStack();
    ~MyStack();
    ...
    ...
private:
    struct node;
    node* head;
    int _top;
};

template<typename T>
struct MyStack<T>::node {
    node(node*, T, T);
    T position_x;
    T position_y;
    node* next;
}; 
```

但是，如果我将私有字段中的结构节点更改为这样的类怎么办：

```
#ifndef MYSTACK_H_INCLUDED
#define MYSTACK_H_INCLUDED
#include <cstddef> // for std:size_t
using namespace std;

template <class T>
class MyStack{
public:
    MyStack();
    ~MyStack();
    ...
    ...
private:
    class Node {
        friend class MyStack<T>;
    public:
        Node(T, Node*);
    private:
        const T value; 
        Node *next;   
    };
    Node *head;  

};
#endif // MYSTACK_H_INCLUDED 
```

是否有必要在 Stack 类中为 Node 创建另一个类，或者我只使用 Struct ？为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:54:26.080

每当我不想暴露内部数据时，我都会做你现在正在做的事情。我定义了我的链表

```
template <class T>
class List{

    class Node{
    public:

         friend class List;              

    private:

         private members
    };

    public:
}; 
```

我更喜欢这种风格，因为我用 Java 编程，它以这种对我来说很舒服的格式使用内部和静态内部类。

您将需要封装 Node 的私有字段以从 List 访问它们，但除此之外，您可以这样定义您的类，甚至使用结构，但回想一下，类和结构之间的唯一区别是结构成员默认情况下是公共的。

# cassandra - Cassandra 的包装器库/客户端，用于按列族获取空间使用情况

> ID：15689497
> 
> 赞同：1
> 
> 时间：2013-03-28T18:28:01.563
> 
> 标签：cassandra

想要编写一个键空间中每个列族使用的打印存储/速度的报告。

我探索了 pycassa，但找不到可以让我获取列族统计信息的库，例如 space used 。我知道 nodettol cfstats 有我正在寻找的信息，但找不到可以帮助我获取该信息的客户端库。

我应该使用 python 和 cql 吗？我应该为 nodetool 编写 shell 包装器吗？任何选择

帮助或建议表示赞赏。

# php - 解析错误：语法错误，出现意外的 T_ECHO

> ID：15689501
> 
> 赞同：6
> 
> 时间：2013-03-28T18:28:19.393
> 
> 标签：php

是什么导致了这个错误？

> 解析错误：语法错误，第 19 行 C:\wamp\www\game\rankings.php 中的意外 T_ECHO

这是代码

```
<?php
session_start();
include("header.php");
if(!isset($_SESSION['uid'])) {
  echo "You must be logged in to view this page";
}else{ 
  ?>
  <center><h2>Battle Players</h2></center>
  <br />
  <table cellpadding="2" cellspacing="2">
    <tr>
      <td width="50px"><b>Rank</b></td>
      <td width="150px"><b>Username</b></td>
      <td width="200px"><b>Gold</b></td>
    </tr>
    <?php
    $get_users = mysql_query("SELECT `id`,`overall` FROM `ranking` WHERE `overall`>'0' ORDER BY `overall` ASC") or die(mysql_error());
    while($row = mysql_fetch_assoc($get_users)) { var_dump($row)
    echo "<tr>";
    echo "<td>". $row['overall']. "</td>";
    $get_user = mysql_query("SELECT `username` FROM `user` WHERE `id`='".$row['id']."'") or die(mysql_error());
    $rank_name = mysql_fetch_assoc($get_user);
    echo "<td><a href=\"stats.php?id=" .$row['id']."\">" . $rank_name['username'] . "</a></td>";
    $get_gold = mysql_query("SELECT `gold` FROM `stats` WHERE `id`='".$row['id']."'") or die(mysql_error());
    $rank_gold = mysql_fetch_assoc($get_gold);
    echo "<td>" . number_format($rank_gold['gold']) . "</td>";
    echo "</tr>";
    }
    ?>
  </table>
  <?php
}
include("footer.php");
?> 
```

也在 [http://pastebin.com/3nw310en](http://pastebin.com/3nw310en)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-28T18:29:33.653

失踪`;`后`var_dump($row)`

# jquery - 将列表更改为下拉列表并在 jQuery 中单击选项

> ID：15689505
> 
> 赞同：3
> 
> 时间：2013-03-28T18:28:27.473
> 
> 标签：jquery, list, drop-down-menu, responsive-design

我有一个网站，我正在构建响应式。

在一页上有一个项目列表。当单击其中一个项目时，它会打开一个使用 jQuery 显示图像的面板。这是我的 HTML：

```
<h2>See the options</h2>
    <ul class="list">
        <li id="click_item1">List Item 1</li>
        <li id="click_item2">List Item 2</li>
    </ul> 
```

...以及使之起作用的jQuery代码：

```
 jQuery('#click_item1').click(function()
 {
    jQuery(".togglepanel:visible").hide();
    jQuery("#panel_item1").fadeIn();
});

jQuery('#click_item2').click(function()
 {
    jQuery(".togglepanel:visible").hide();
    jQuery("#panel_item2").fadeIn();
}); 
```

在此处查看工作示例和代码：http: [//jsfiddle.net/5B8s5/1/](http://jsfiddle.net/5B8s5/1/)

在较小的屏幕上查看该站点时，我想将列表更改为下拉列表。那部分很容易。问题是：如何让下拉列表中的项目表现得像一个链接列表，以便 jQuery 受益，以便当从下拉列表中选择一个项目时，它会触发正确的面板加载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:39:18.193

假设您的下拉列表如下所示：

```
<select id="items">
    <option id="option_item1">Item 1</option>
    <option id="option_item2">Item 2</option>
</select> 
```

您需要处理下拉列表的“更改”事件：

```
jQuery("#items").change(function() {
    var item = jQuery("#items option:selected");
    jQuery(".togglepanel:visible").hide();
    jQuery("#" + item.attr("id").replace("option", "panel")).fadeIn();
}); 
```

# parsing - OpenLayers: parse GPX file, read 'ele' tags and calculate height gained

> ID：15689509
> 
> 赞同：0
> 
> 时间：2013-03-28T18:28:48.393
> 
> 标签：parsing, height, openlayers, gpx

"The OpenLayers method is not especially well documented" someone said, which is why I can't fathom how to read the 'ele' data in a gpx file, sum it, and display the height gained.

I have a map with 2 gpx layers showing run traces, with a div showing the length of runs and controls to switch layers on and off. Here is one layer:

```
var lgpx = new OpenLayers.Layer.Vector("wed training fast", {
strategies: [new OpenLayers.Strategy.Fixed()],
protocol: new OpenLayers.Protocol.HTTP({
   url: "../gpx/27-Mar-13fast.gpx",
   format: new OpenLayers.Format.GPX({
   extractWaypoints: true, extractRoutes: true,
    extractAttributes: true})
}),
styleMap: gpxStyles,
projection: new OpenLayers.Projection("EPSG:4326")
});

map.addLayer(lgpx); //fast
bounds = new OpenLayers.Bounds();

// fit fast layer to bounds of window and add start, finish pins
lgpx.events.register("loadend", lgpx, function() {
//add extent of layer to bounds
    bounds = this.getDataExtent();
//add startpoint marker
    var startPoint = this.features[0].geometry.components[0];               
    layerMarkers.addMarker(new OpenLayers.Marker
        (new OpenLayers.LonLat(startPoint.x, startPoint.y),iconfast));
//add endpoint marker           
    var endPoint=this.features[0].geometry.components
        [this.features[0].geometry.components.length-1];
    layerMarkers.addMarker(new OpenLayers.Marker
        (new OpenLayers.LonLat(endPoint.x, endPoint.y),iconfast2));
//calculate length of trace
    var len = this.features[0].geometry.getGeodesicLength
        (new OpenLayers.Projection("EPSG:900913"))/1000 + " k";
    (Math.round(value*100)/100).toFixed(2);
    var kms = +(parseFloat(len).toFixed(2));
    var m = +(parseFloat(kms*0.621371).toFixed(2));
//write the result to the page      
    document.getElementById("fastbox").innerHTML=
   "Fast run &nbsp;&nbsp;&nbsp;<strong>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;
       </strong>&nbsp;&nbsp;" + m +" miles"  +"&nbsp;&nbsp;(" +kms + "k)";
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-15T14:06:25.777

我无法判断 OpenLayers 2。但对于 OpenLayers 3，您可以拥有 3 或 4 维坐标，其中包括时间测量。你可以用这个检查：

```
> feature.getGeometry().getLayout()
"XYZM" 
```

如果是这种情况，只需检查“M”。

```
> feature.getGeometry().getCoordinates()[3]
991452420 
```

这是自 1970 年以来的秒数。

```
> d=new Date(); d.setTime(991452420*1000); d
Date {Sat Jun 02 2001 05:27:00 GMT+0200 (CEST)} 
```

# file - 批处理：查找文件并重命名/查找文件并删除

> ID：15689510
> 
> 赞同：1
> 
> 时间：2013-03-28T18:28:49.303
> 
> 标签：file, batch-file, find, rename, delete-file

所以...是的，我是个新手。仍然试图解释得尽可能好。但是需要帮助，例如从 C: 驱动器（带有批处理）中找到确切的文件，然后重命名它。还想知道如何从 C: 中查找文件并将其删除。（1个线程中有2个问题......）

问题1\. 示例：我想批量从C:盘中查找名为“text1.txt”的文件，如果成功找到，将其重命名为“text2.txt”。

问题2\. 示例：我想批量从C:盘中找到名为“image1.jpg”的文件，如果找到成功，将其删除。

或者如何用批处理来完成？del image1 只检查它已经存在的同一个文件夹，与重命名相同。如何从整个 C: 磁盘批量查找这些文件？只是例子。通过批量搜索精确文件来解决、重命名和删除 2 件小事。如何使用批处理从子文件夹中删除文件？但对不起，我的低知识，必须从某个地方开始这些事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:43:02.070

试试这个。如果输出正常，请`echo`从该行中删除该命令。

```
for /f "delims=" %%i in ('dir /s /b /a-d \file1.txt \image1.jpg') do if "%%~nxi"=="file1.txt" (echo ren "%%~i" "text2.txt") else if "%%~nxi"=="image1.jpg" echo del "%%~i" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:50:52.823

哦，有一些可爱的程序员真是太好了！我认识的大多数程序员都**很丑**。

```
for /f "delims=" %%i in ('dir /s /b /a-d "text.txt"') do (ren "%%i" text2.txt) 
```

应该做重命名任务。您应该将驱动器和起始目录添加到文件名之前，否则它将重命名`text.txt`所有子目录中的所有文件。因此`...dir /s/b "c:\users\kaster\text.txt"...`将处理`"c:\users\kaster\"`下面的所有目录并将所有文件重命名`text.txt`为新名称。

它通过以基本模式（即仅文件名）执行`DIR`扫描来工作，包括忽略名为“text.txt”的文件的匹配目录名的子目录- 并且完整的文件名分配给. 该子句确保任何空格都不会被解释为分隔符。`/b``/s``/a-d``%%i``delims`

看

```
`FOR ?` 
```

从文档提示中。

如果您直接从提示符执行此操作，请将每个更改`%%`为`%`

第二个命令非常简单

```
del /s "image1.jpg" 
```

再次，在起始路径之前，并且**非常非常**小心。这将删除指定目录中和指定目录下与“image1.jpg”匹配的**所有文件名。**

在整个过程中，引用文件名可确保`spaces`正确处理文件或目录名。

# php - include and get_template_part

> ID：15689511
> 
> 赞同：5
> 
> 时间：2013-03-28T18:28:54.237
> 
> 标签：php, wordpress, content-management-system, include

What is the difference between a php include and the wordpress get_template_part other then you have a fallback option on the latter? Can I as well use a php include instead?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:41:00.713

我最近也想知道这个，我发现非常有用的文章是这样的：

[如何在 WordPress 中包含和需要文件和模板](http://wp.tutsplus.com/tutorials/creative-coding/how-to-include-and-require-files-and-templates-in-wordpress/)

本文的作者遵循以下准则：

> *   在主题开发中，我总是使用 get_template_part()。
> *   在插件开发中，我几乎总是使用 include_once() 并且我通常在一个函数中使用它一次。你可以在我的样板中看到这一点。
> *   如果我正在编写的插件要在一个非常大的站点上使用，那么我使用 require_once()。

**更新**

根据[另一篇文章](http://voodoopress.com/get_template_part-in-my-wordpress-theme/)，在尝试构建子主题时使用 get_template_part() 特别有用，但我想你已经知道了:)。

也许了解差异的最好方法是检查[get_template_part()的源代码](http://wpseek.com/get_template_part/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-29T13:31:33.623

get_template_part 还允许`child themes`覆盖该文件并包含其他更具体的文件。

例如，如果您使用`get_template_part( 'loop', 'single' )`并且您的主题只有一个名为 loop.php 的文件，则`child theme`可以包含一个名为 loop-single.php 的文件，该文件将覆盖您的 loop.php。

# android - R.main 无法解决 - 其他答案均无效

> ID：15689515
> 
> 赞同：0
> 
> 时间：2013-03-28T18:28:59.913
> 
> 标签：android, eclipse

所以和其他人一样，我有一点代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
} 
```

问题是`main cannot be resolved or is not a field`。`main`代码中的红色下划线。

由于其他答案，我已经尝试过：

1.  插入导入 com.project.appname.R;
2.  确保没有导入android.R；
3.  删除所有导入，然后按 shift+ctrl+o（然后检查 import android.R is not inserted）
4.  在文件夹 res-->layout --> activity_main.xml 文件中检查我的布局
5.  我还尝试将代码更改为包含 activity_main 而不仅仅是 main。

每次我厌倦了每个建议并且错误仍然没有消失时，我已经清理了项目并重建了它。

我正在使用 Eclipse、Juno 以及 Android 和 Google 插件。

有什么建议么？

编辑：好的。在文件夹 res>layout> activity_main.xml 是正确的名称。

我试着输入

`setContentView(R.layout.activitymain);`和 `setContentView(R.layout.activity_main);`

但错误仍然存​​在。

当我输入 `R.layout.` 然后等待建议时，列表中的第一件事是`activity_list_item : int - R.layout`（列表中没有其他建议包含单词 main 或 activity？）

无法附加列表，因为这里只是新的并且没有足够的声誉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:32:17.823

这

```
setContentView(R.layout.main); 
```

需要是

```
setContentView(R.layout.activitymain); 
```

因为那是你的 xml 文件的名称，它就是你在`setContentView()`. 它目前正在“res/layout”中查找一个文件，该文件的名称`main.xml`应在何时查找，`activitymain.xml`或者您要用于您的 xml 文件的名称。`layout`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:32:09.440

改变

```
setContentView(R.layout.main); 
```

到

```
setContentView(R.layout.activitymain); 
```

除非您的布局文件夹中有一个名为 main.xml 的布局

# asset-pipeline - Clearing out Sinatra Assetpack asset pipeline

> ID：15689522
> 
> 赞同：3
> 
> 时间：2013-03-28T18:29:08.907
> 
> 标签：asset-pipeline, sinatra-assetpack

I'm playing around [with](https://github.com/timwingfield/backbone-sinatra-boilerplate) this package of Sinatra and Coffeescript and can't seem to clear the asset pipeline. When I update backbone.js to the most recent version, the app (run with `shotgun watch`) continues to serve the version of backbone.js that I've just replaced!

I am sure there is a rake command or something to clear the asset pack, but I cannot find it in any of the documentation.

`rake assets:clean` is telling me that rake doesn't know that task.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T15:05:34.317

好像你没有正确地[缓存破坏](http://www.adopsinsider.com/ad-ops-basics/what-is-a-cache-buster-and-how-does-it-work/ "缓存清除")。您是否考虑过使用[Sinatra Asset Pack](http://ricostacruz.com/sinatra-assetpack/ "Sinatra 资产包")进行资产管理？它支持咖啡脚本，并会自动破坏您的缓存，以便立即识别新的更改。

另一种选择是通过硬重新加载、shift+f5 或在浏览器中手动清除缓存来清除缓存。

# java - 32 Bit Access and 32 Bit Java

> ID：15689523
> 
> 赞同：1
> 
> 时间：2013-03-28T18:29:12.563
> 
> 标签：java, netbeans, 32bit-64bit

I have 32 bit Java Installed with 32 Bit Netbeans (64 Bit Laptop) and have Office Access 2007 32 Bit.

I am getting a problem when I am trying to connect a database to my java project.

java.sql.SQLException: [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified java.lang.NullPointerException

```
 Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        String SourceURL = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb,*.accdb)};DBQ=" 
                + new File("Argos.accdb").getAbsolutePath() + ";";
        //MAY CHANGE THE ADMIN PART (Remove Admin)

        Argos = DriverManager.getConnection(SourceURL, "admin",""); 
```

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:32:55.440

来自[http://www.stoneedge.com/help/OM_DOC/tips_tricks/Creating_ODBC_Connection_in_Windows.html](http://www.stoneedge.com/help/OM_DOC/tips_tricks/Creating_ODBC_Connection_in_Windows.html)

*   单击开始菜单。
*   选择控制面板。
*   选择管理工具并双击数据源 (ODBC) 图标。
*   单击系统 DSN 选项卡。
*   单击添加按钮。
*   从驱动程序列表中选择 Microsoft Access Driver (*.mdb)，然后单击完成按钮。
*   将 mdb 文件...提供给数据库并提供名称“Importer”

# mysql - Importing data from one MYSQL table into another -- the first table doesn't have the same amount of rows as second table

> ID：15689526
> 
> 赞同：1
> 
> 时间：2013-03-28T18:29:26.887
> 
> 标签：mysql, sql

I've read and searched for the answer to this before asking. I am trying to import the data of 4 columns from one MYSQL table into another MYSQL table that has more than 4 columns. As I expected I got

> #1136 - Column count doesn't match value count at row 1'

Does anyone know a trick to get around this issue?

## Postscript

I've already tried using

```
INSERT INTO new_table(colname1,colname2,colname3,colname4)
SELECT 'colname1','colname2','colname3,'colname4' FROM old_table; 
```

that generates error

> 1054 unknown column 'colname1' in 'field list

I've also tried

```
INSERT INTO new_table 
SELECT 'colname1,'colname2,'colname3','colname4' 
FROM old_table; 
```

which generates error

> #1136 Column count doesn't match value count at row 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:31:19.287

If you are trying to `INSERT INTO` a table with a different number of columns, then you should specify what columns you want to insert into.

So if you have a table with 20 columns and you know you want to insert into column 1, column 10, column 15 and column 20, then you explicitly name those columns in your insert.

Similar to this:

```
INSERT INTO Table2 (col1, col10, col15, col20)
SELECT col1, col2, col3, col4
FROM Table1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:31:41.527

您需要指定要插入的列

```
insert into destination_table (col1, col2, col3, col4)
select * from source_table 
```

想一想：数据库引擎应该如何知道哪个源列必须填充哪个目标列？

[SQLFiddle 演示](http://sqlfiddle.com/#!2/99392/1)

## 更新

删除列名周围的引号

```
INSERT INTO new_table(colname1, colname2, colname3, colname4)
SELECT colname1, colname2, colname3, colname4 
FROM old_table; 
```

如果要转义列名，请改用反引号 ( ```)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-25T06:57:28.030

```
INSERT INTO new_table(colname1,colname2,colname3,colname4)
SELECT 'colname1','colname2','colname3,NULL FROM old_table; 
```

只要在没有可匹配的列的地方输入 NULL

# android - Centering and rotating bitmap via matrix.setTranslation() doesn't work on orientation change

> ID：15689532
> 
> 赞同：0
> 
> 时间：2013-03-28T18:29:43.050
> 
> 标签：android, matrix

I'm making a speedometer and I'm centering the needle via a setTranslation(). All works almost well in LANDSCAPE mode but when changing the orientation of the emulator to PORTRAIT, the needle has an **offset towards the left + top(+x, +y)**.

The sizes of my bitmap objects are:

speedo_meter(H x W): 89 x 20

needle(H x W): 344 x 313

But when using getWidth() and getHeight and displaying them with Log.d the values are different(see the end of the question for the LogCat).

**Can anyone explain the cause of the difference in values and the offset in PORTRAIT mode?**

**Here's an example of what I'm trying to do:**

![example](../Images/cf3a843d711bb2fc853cbdca3a4b8b2e.png)

**Here's the onDraw() method containing the Matrix:**

```
protected void onDraw(Canvas canvas) {

    canvas.drawBitmap(speedo_meter, (canvas.getWidth() / 2) - speedo_meter.getWidth() / 2,
                                    (canvas.getHeight() / 3) - speedo_meter.getHeight() / 2, null);

        // Main Meter Needle
        matrix_needle.setTranslate((canvas.getWidth() / 2) - needle.getWidth() / 2,
                                   (canvas.getHeight() / 3)- needle.getHeight());

        // Log.d("ANGLE OF DEVIATION : ","" + angle_of_deviation);
        Log.d("CANVAS HEIGHT : ","" + canvas.getHeight());
        Log.d("CANVAS WIDTH : ","" + canvas.getWidth());

        Log.d("METER HEIGHT : ","" + speedo_meter.getHeight());
        Log.d("METER WIDTH : ","" + speedo_meter.getWidth());

        Log.d("NEEDLE HEIGHT : ","" + needle.getHeight());
        Log.d("NEEDLE WIDTH : ","" + needle.getWidth());

        Log.d("MATRIX : ","" + matrix_needle.toString());

        matrix_needle.postRotate(angle_of_deviation, canvas.getWidth() / 2, 2 * needle.getHeight() - 10);

        canvas.drawBitmap(needle, matrix_needle, paint_needle);

        // Main Meter Wheel
        canvas.drawBitmap(center_wheel, (canvas.getWidth() / 2)- center_wheel.getWidth() / 2,
                                        (canvas.getHeight() / 3)- center_wheel.getHeight() / 2, null);
} 
```

**I'm creating a custom view like this:**

```
public SpeedometerView(Context context) {
    super(context);
    initializeView(context);    
}

public SpeedometerView(Context context, AttributeSet attrs) {
    super(context, attrs);
    initializeView(context);
}

public SpeedometerView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    initializeView(context);
}

//Create view
private void initializeView(Context context) {

    this.context = context;
    speedo_obj = this;

    this.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));

    releaseImageResources();

    speedo_meter = getImage(R.drawable.meter);

    center_wheel = getImage(R.drawable.center_wheel);

    needle = getImage(R.drawable.arrow);

    paint_needle = new Paint();
    paint_needle.setStyle(Paint.Style.FILL);
    paint_needle.setAntiAlias(true);    
} 
```

**And this is my layout XML with the custom view:**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.speedometer.view.SpeedometerView
        android:id="@+id/speedometer_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginTop="40dip" >
    </com.mobisoft.view.SpeedometerView>

    <Button
        android:id="@+id/change_needle_value_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="@string/move_needle" />

</RelativeLayout> 
```

**The relevant entries obtained via Log.d:**

LANSCAPE MODE:

```
03-28 16:50:19.033: D/CANVAS HEIGHT :(2859): 487
03-28 16:50:19.033: D/CANVAS WIDTH :(2859): 1024
03-28 16:50:19.033: D/METER HEIGHT :(2859): 229
03-28 16:50:19.033: D/METER WIDTH :(2859): 209
03-28 16:50:19.033: D/NEEDLE HEIGHT :(2859): 59
03-28 16:50:19.033: D/NEEDLE WIDTH :(2859): 13
03-28 16:50:19.033: D/MATRIX :(2859): Matrix{[1.0, 0.0, 506.0][0.0, 1.0, 103.0][0.0, 0.0, 1.0]} 
```

PORTRAIT MODE:

```
03-28 16:50:19.033: D/CANVAS HEIGHT :(2859): 911
03-28 16:50:19.033: D/CANVAS WIDTH :(2859): 600
03-28 16:50:19.033: D/METER HEIGHT :(2859): 229
03-28 16:50:19.033: D/METER WIDTH :(2859): 209
03-28 16:50:19.033: D/NEEDLE HEIGHT :(2859): 59
03-28 16:50:19.033: D/NEEDLE WIDTH :(2859): 13
03-28 16:50:19.033: D/MATRIX :(2859): Matrix{[1.0, 0.0, 294.0][0.0, 1.0, 244.0][0.0, 0.0, 1.0]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:35:23.790

由于通知栏高度，您可以在[http://developer.android.com/guide/practices/ui_guidelines/icon_design_status_bar.html找到高度](http://developer.android.com/guide/practices/ui_guidelines/icon_design_status_bar.html)

# php - 重复函数只是改变一个 var

> ID：15689537
> 
> 赞同：1
> 
> 时间：2013-03-28T18:29:56.173
> 
> 标签：php, jquery

这就是我所拥有的，它有效，但我想知道它是否更容易？

```
$('.item1').click(function(){
    $('.otheritem').animtate('left':'0');
});
$('.item2').click(function(){
    $('.otheritem').animtate('left':'100');
});
$('.item3').click(function(){
    $('.otheritem').animtate('left':'200');
});
// etc etc etc 
```

我有一个使用 php foreach 并生成几个项目的文件。

```
foreach($images as $image)
{
    $i++;
    echo "<a class='item$i item' href='#'>$i</a>";
} 
```

所以图像越多，项目就越多，所以如果你点击 php 生成的项目之一，它将确定 .otheritem 的位置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:33:06.840

如果所有项目都是固定宽度，您可以根据它在列表中的位置计算位置。

例如

```
$('.buttons').click( function() {
    $('.otheritem').animate('left', $(this).index() * 100);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T18:33:20.713

您可以将更改的值嵌入元素的数据属性中，并为所有元素提供相同的选择器 -

```
$animLeft = $i * 100;
echo "<a class='item' href='#' data-animleft='{$animLeft}' >$i</a>"; 
```

现在你的 jQuery 可以访问所有同名的元素并提取动画的值：

```
$('.item').on('click',function(){
  var animateValue = $(this).data('animleft');
  $('.otheritem').animtate('left':animateValue);
}); 
```

参考 -

*   [`$.data()`](http://api.jquery.com/jQuery.data/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T18:33:13.213

像这样的东西？

```
$('.item').each(function(i) {
    $(this).click(function() {
        $('.otheritem').animate('left', i * 100);
    });
}); 
```

# c - Win32 剪贴板和 Alpha 通道图像

> ID：15689541
> 
> 赞同：10
> 
> 时间：2013-03-28T18:30:09.450
> 
> 标签：c, windows, winapi, 2d

我的应用程序应该能够将 32 位图像（RGB + alpha 通道）复制到剪贴板并从剪贴板粘贴这些图像。为此，我计划使用该结构，`CF_DIBV5`因为该`BITMAPV5HEADER`结构有一个 field `bV5AlphaMask`。

问题是对于图像数据应该如何准确地存储在剪贴板中似乎没有达成共识。在进行一些测试时，我发现应用程序之间存在一些差异，因此几乎不可能提出通用解决方案。

以下是我的观察：

1.  当我将 Alpha 通道图像从 Word 2010 或 XnView 复制到剪贴板时，它会在没有预乘像素数据的情况下存储。

2.  但是，当我使用 Firefox 或 Chrome 复制图像时，像素数据似乎被 alpha 通道预乘。

3.  Firefox 设置`bV5AlphaMask`为 0xff000000，而大多数其他应用程序根本不设置它，而是将其保持为 0。这很奇怪，因为这些应用程序将 DIB 放在剪贴板上，实际上包含最高 8 位的 alpha 通道，但它们仍然设置`bV5AlphaMask`为 0。所以一个必须假设如果位深度为 32，即使`bV5AlphaMask`为 0，也存在 alpha 通道。

长话短说，我的基本问题是：关于 Alpha 通道数据应如何存储在剪贴板上，是否有一些官方信息？我特别想知道是否必须对数据进行预乘。正如您在上面看到的，Word 2010 和 XnView 不进行预乘，而 Firefox 和 Chrome 可以。但是知道是否应该预乘颜色通道是至关重要的。

非常感谢您对此有所了解！

**更新 2** 粘贴到 Paint.NET 现在工作正常。这是由我的代码中的一个错误引起的，如果 alpha 通道为 0，它没有将颜色通道设置为 0，即在这种情况下预乘没有正确完成，这似乎使 Paint.NET 感到困惑。

Internet Explorer 10 的问题仍未解决。将带有 alpha 通道的 PNG 复制到剪贴板时，IE 10 只是将 24 位 CF_DIBV5 放在剪贴板上，但 Paint.NET 可以粘贴带有 alpha 通道的位图，因此必须有另一种格式IE 10 暴露给剪贴板。也许它暴露了 PNG 使用 CFSTR_FILECONTENTS 和 CFSTR_FILEDESCRIPTOR。

**更新** 我现在已经按照下面 arx 描述的方式实现了它，并且效果很好。但是，仍然有两件事让我感到困惑：

1) 将 Alpha 通道图像从我的应用程序粘贴到 Paint.NET 不会保留 Alpha 通道。图像在 Paint.NET 中显得不透明。但是，从 Firefox 和 Chrome 粘贴到 Paint.NET 效果很好，alpha 通道被保留了！我已经放弃了完整的 DIBV5，它与我的应用程序相同，但它仍然适用于 FF 和 Chrome，但不适用于我的应用程序，所以它必须有其他东西！Firefox 和 Chrome 一定在做一些我的应用没有做的事情！？

2) Internet Explorer 10 也是如此。将 Alpha 通道图像从 IE 10 粘贴到我的应用程序根本不起作用...我得到一个位深度为 24 的 DIB，即没有 Alpha 通道全部。但是，当从 IE 10 粘贴到 Paint.NET 时，alpha 通道就在那里！所以这里一定还有更多的东西......

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-28T19:56:41.450

我确信有一种将 alpha 存储在 CF_DIBV5 中的正确方法，但这并不重要。应用程序已经不一致地处理它，所以如果您希望您的应用程序与其他应用程序很好地配合使用，您不能使用 CF_DIBV5。

不久前我研究了复制和粘贴透明位图。我的目标是成功地将透明位图粘贴到两个版本的 Office 和 GIMP 中。我查看了几种可能的格式：

**CF_BITMAP**

透明度总是被忽略。

**CF_DIB**

使用通常的 0xAARRGGBB 格式的 32bpp BI_RGB。GIMP 支持这一点，但没有其他支持。

**CF_DIBV5**

GIMP 不支持这个。

**“PNG”**

支持粘贴：GIMP、Word 2000、Excel 2000、Excel 2007 和 PowerPoint 2007。
不支持粘贴：Word 2007 和 OneNote 2007。

如果您复制位图，所有这些应用程序都会成功导出“PNG”。

但是，Word 和 OneNote 2007*将*粘贴从资源管理器复制的 PNG 文件。所以我想出了以下内容：

**复制解决方案**

将您的透明位图转换为 PNG 格式。

宣传以下剪贴板格式：

**“PNG”** - 原始 PNG 数据。
**CF_DIB** - 用于不处理透明度的应用程序（如油漆）。
**CFSTR_FILEDESCRIPTOR** - 使 PNG 看起来像一个文件。文件描述符应该有一个带有“.png”扩展名的发明文件名。
**CFSTR_FILECONTENTS** - 内容必须公开为`IStream`; 仅使用 an`HGLOBAL`似乎不起作用。该数据与“PNG”数据相同。

完成此操作后，我可以成功地将透明位图粘贴到 GIMP、Office 2000 和 Office 2007 中。您还可以将 PNG 直接粘贴到资源管理器文件夹中。

**更新**

我意识到我只回答了一半的问题。这对于复制非常有用，但如果您想从仅复制 CF_DIBV5（如 Firefox）的应用程序粘贴，则没有用。

如果可用，我建议您使用“PNG”，否则回退到 CF_DIBV5，将其视为预乘。这将正确处理 Word 2010（导出“PNG”）、Firefox 和 Chrome。XnView 只导出非乘法的 CF_DIBV5，所以这不能正常工作。我不确定你能不能做得更好。

**lscf - 探索剪贴板格式的工具**

这是用于显示可用剪贴板格式列表的工具的来源。它也可以将一个写入文件。我叫它`lscf`。在 Visual Studio 中创建一个 win32 控制台应用程序并将此源代码粘贴到 main 函数上。它有一个非常小的错误：如果您输入错误的格式名称，它永远不会显示“未知格式”错误。

```
#include <Windows.h>

#include <stdio.h>
#include <tchar.h>

#define ARRAY_SIZE(a) (sizeof(a) / sizeof(a[0]))

LPCTSTR cfNames[] = {
    _T("CF_TEXT"),
    _T("CF_BITMAP"),
    _T("CF_METAFILEPICT"),
    _T("CF_SYLK"),
    _T("CF_DIF"),
    _T("CF_TIFF"),
    _T("CF_OEMTEXT"),
    _T("CF_DIB"),
    _T("CF_PALETTE"),
    _T("CF_PENDATA"),
    _T("CF_RIFF"),
    _T("CF_WAVE"),
    _T("CF_UNICODETEXT"),
    _T("CF_ENHMETAFILE"),
    _T("CF_HDROP"),
    _T("CF_LOCALE"),
    _T("CF_DIBV5")
};

int LookupFormat(LPCTSTR name)
{
    for (int i = 0; i != ARRAY_SIZE(cfNames); ++i)
    {
        if (_tcscmp(cfNames[i], name) == 0)
            return i + 1;
    }

    return RegisterClipboardFormat(name);
}

void PrintFormatName(int format)
{
    if (!format)
        return;

    if ((format > 0) && (format <= ARRAY_SIZE(cfNames)))
    {
        _tprintf(_T("%s\n"), cfNames[format - 1]);
    }
    else
    {
        TCHAR buffer[100];

        if (GetClipboardFormatName(format, buffer, ARRAY_SIZE(buffer)))
            _tprintf(_T("%s\n"), buffer);
        else
            _tprintf(_T("#%i\n"), format);
    }
}

void WriteFormats()
{
    int count = 0;
    int format = 0;
    do
    {
        format = EnumClipboardFormats(format);
        if (format)
        {
            ++count;
            PrintFormatName(format);
        }
    }
    while (format != 0);

    if (!count)
        _tprintf(_T("Clipboard is empty!\n"));
}

void SaveFormat(int format, LPCTSTR filename)
{
    HGLOBAL hData = (HGLOBAL)GetClipboardData(format);

    LPVOID data = GlobalLock(hData);

    HANDLE hFile = CreateFile(filename, GENERIC_WRITE, 0, 0, CREATE_ALWAYS, 0, 0);
    if (hFile != INVALID_HANDLE_VALUE)
    {
        DWORD bytesWritten;
        WriteFile(hFile, data, GlobalSize(hData), &bytesWritten, 0);
        CloseHandle(hFile);
    }

    GlobalUnlock(hData);
}

int _tmain(int argc, _TCHAR* argv[])
{
    if (!OpenClipboard(0))
    {
        _tprintf(_T("Cannot open clipboard\n"));
        return 1;
    }

    if (argc == 1)
    {
        WriteFormats();
    }
    else if (argc == 3)
    {
        int format = LookupFormat(argv[1]);
        if (format == 0)
        {
            _tprintf(_T("Unknown format\n"));
            return 1;
        }

        SaveFormat(format, argv[2]);
    }
    else
    {
        _tprintf(_T("lscf\n"));
        _tprintf(_T("List available clipboard formats\n\n"));
        _tprintf(_T("lscf CF_NAME filename\n"));
        _tprintf(_T("Write format CF_NAME to file filename\n\n"));
    }

    CloseClipboard();

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-30T00:55:46.103

尽管有详细的主要答案，但我在这个问题上停留了一段时间。它似乎不会保留 alpha（即使通过剪贴板查看器）。

事实证明，解决方案就这么简单：

1.  **使用32 位预乘 alpha**导出`CF_DIB`（不需要 V5）
***   并导出`"PNG"`格式 有了它，它似乎可以粘贴到我测试过的所有应用程序（Paint.NET、GIMP、LibreOffice 等）中。**

 **从本质上讲，只要预乘了 alpha，`CF_DIB`我使用的几乎每个程序中都会保留 alpha。在罕见的一次性情况下，`"PNG"`需要。

需要明确`CF_DIBV5`的是：不需要。**

# matlab - Metropolis-Hastings algorithm, using a proposal distribution other than a Gaussian in Matlab

> ID：15689546
> 
> 赞同：2
> 
> 时间：2013-03-28T18:30:16.643
> 
> 标签：matlab, math, gaussian, mcmc

I am currently working on my final year project for my mathematics degree which is based on giving an overview of the Metropolis-Hastings algorithm and some numerical examples. So far I have got some great results by using my proposal distribution as a Gaussian, and sampling from a few other distributions, however I am trying to go one step further by using a different proposal distribution.

So far I have got this code (I am using Matlab), however with limited resources online about using different proposals it is hard to tell if I am close at all, as in reality I am not too sure how to attempt this, (especially as this gives no useful data output so far).

It would be fantastic if someone could lend a hand if they know or forward me to some easily accessible information (I understand that I am not just asking coding advice, but Mathematics as well).

So, I want to sample from a Gaussian using a proposal distribution of a Laplace, this my code so far:

```
n = 1000;       %%%%number of iterations

x(1) = -3;      %%%%Generate a starting point

%%%%Target distribution: Gaussian:

strg = '1/(sqrt(2*pi*(sig)))*exp(-0.5*((x - mu)/sqrt(sig)).^2)';
tnorm = inline(strg, 'x', 'mu', 'sig');

mu = 1;    %%%%Gaussian Parameters (I will be estimating these from my markov chain x)
sig = 3;

%%%%Proposal distribution: Laplace:

strg = '(1/(2*b))*exp((-1)*abs(x - mu)/b)';
laplace = inline(strg, 'x', 'b', 'mu');

b = 2;       %%%%Laplace parameter, I will be using my values for y and x(i-1) for mu

%%%%Generate markov chain by acceptance-rejection

for i = 2:n

    %%%%Generate a candidate from the proposal distribution
    y = laplace(randn(1), b, x(i-1));

    %%%%Generate a uniform for comparison
    u = rand(1);

    alpha = min([1, (tnorm(y, mu, sig)*laplace(x(i-1), b, y))/(tnorm(x(i-1), mu, sig)*laplace(y, b, x(i-1)))]);

    if u <= alpha
        x(i) = y;
    else
        x(i) = x(i-1);
    end 
end 
```

If anyone can tell me if the above is completely wrong/going about it in the wrong way, or there are just a few mistakes (I am very wary about my generation of 'y' in for the for loop being completely wrong) that would be fantastic.

Thanks, Tom

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:41:55.283

作为参考，@ripegraph 在另一个站点上解决了这个问题，我从拉普拉斯分布生成随机数的方法不正确，实际上应该使用：[http ://en.wikipedia.org/wiki/Laplace_distribution#Generating_random_variables_according_to_the_Laplace_distribution](http://en.wikipedia.org/wiki/Laplace_distribution#Generating_random_variables_according_to_the_Laplace_distribution)

他还注意到拉普拉斯分布是对称的，因此根本不需要包含在代码中。

在做了更多的研究之后，我发现如果你有 X~Gamma(v/2, 2) 它变成了 X~ChiSquare(v) 并且是使用非高斯提议的一个更好的例子。但是，要使用此示例，您需要使用独立采样器[http://www.math.mcmaster.ca/canty/teaching/stat744/Lectures5.pdf](http://www.math.mcmaster.ca/canty/teaching/stat744/Lectures5.pdf)（幻灯片 89）。

希望这可能对某人有用。

# html - HTML/CSS: a:hover {-webkit/-moz-transition:color}

> ID：15689549
> 
> 赞同：1
> 
> 时间：2013-03-28T18:30:22.810
> 
> 标签：html, css

When I mouse over a list element, the transition occurs correctly, however when I mouse over (hover over) a list element with a link the text will not transition until I specifically mouse over the text itself.

Here's a GIF of the problem(sorry for the lack of a cursor -- 'Home' is a link within a list and 'example1' is merely a list):

![enter image description here](../Images/f088ff912f870c9ba52536f5c377cde5.png)

It strikes me I may be a bit vague here. [Here it is uploaded in its current form](http://www.clutchhunter.appspot.com/experimental.html) - the CSS responsible for that navbar is within the /* dropdown */ boxes.

The source in its entirety is all there on that webpage if you inspect element. (I tried putting it here but the code tag is refusing to work.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:37:08.277

这是因为您的标签`li`和标签之间有空格`a`。您需要将子菜单中的所有样式应用于`a`标签，而不是`li`.

所以，而不是拥有

```
li {
    padding:5px
} 
```

有

```
li a {
   padding: 5px
} 
```

对悬停做类似的事情。将悬停类附加到`a`，而不是`li`.

编辑：

或者，指定`:hover { color :#fff; }`到`li`（它当前位于`a`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:40:55.560

让您的锚元素占据菜单项的完整空间通常是件好事。这有两个目的：

1.  它可以对区域内任何地方的事件做出反应。
2.  用户不必“寻找”来找到可点击/可触摸的区域。

具体来说，我建议将锚点的显示设置为`block`or `inline-block`，并填充它们（不是包含`<li>`元素）。

这是一个简单的例子：http: [//jsfiddle.net/zzjZY/3/](http://jsfiddle.net/zzjZY/3/)

**CSS**

```
LI {
    width: 200px;
    border: 1px solid red;
}
A {
    display: block;
    padding: 8px;
}
A:hover {
    -webkit-transition:color 300ms ease-in-out;
    -moz-transition:color 300ms ease-in-out;
    color:#fff;
    background-color:#060;
} 
```

**HTML**

```
<ul>
    <li><a href="http://stackoverflow.com">a little text</a></li>
    <li><a href="http://stackoverflow.com">a little text</a></li>
    <li><a href="http://stackoverflow.com">a little text</a></li>
</ul> 
```

您将看到`:hover`格式应用于包含元素内的任何位置，因为锚完全填充了它。该链接也可以在包含列表项内的任何位置单击。

# c++ - C++ 中“丰富类型”结构的开销

> ID：15689553
> 
> 赞同：3
> 
> 时间：2013-03-28T18:31:00.467
> 
> 标签：c++, optimization, struct, compile-time, overhead

我想在编译时跟踪一些当前采用相同类型参数的函数的本质上的“类型”信息。这是一个例子；假设我有两个函数`getThingIndex(uint64_t t)`和`getThingAtIndex(uint64_t tidx)`. 第一个函数将参数视为 的编码，对`thing`索引进行非平凡的计算，然后返回它。然后可以通过调用`getThingAtIndex`. `getThingAtIndex`，另一方面，假设您正在查询结构并且已经有一个索引。这两种方法中的后者更快，但更重要的是，我想避免因传递`thing`to`getThingAtIndex`或传递`index`to可能导致的头痛`getThingIndex`。

我正在考虑为`thing`和事物索引创建类型，如下所示：

```
struct Thing { uint64_t thing; }
struct ThingIndex { uint64_t idx; } 
```

然后将上述函数的签名更改为

```
getThingIndex(Thing t)
getThingAtIndex(ThingIndex idx) 
```

现在，尽管`Thing`和`ThingIndex`编码相同的底层类型，但它们在编译时仍然是不同的，并且通过将索引 `getThingIndex`或事物传递给`getThingAtIndex`.

但是，我担心这种方法的开销。这些函数被调用了很多次（10s-100s 数百万次），我很好奇编译器是否会优化这些结构的创建，这些结构基本上只对编译时类型信息进行编码。如果编译器不会执行这样的优化，有没有办法以零开销创建这些类型的“丰富类型”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T19:04:33.240

拆机看看。

```
unsigned long long * x = new unsigned long long;
0110784E  push        8  
01107850  call        operator new (01102E51h)  
01107855  add         esp,4  
01107858  mov         dword ptr [ebp-0D4h],eax  
0110785E  mov         eax,dword ptr [ebp-0D4h]  
01107864  mov         dword ptr [x],eax  
*x = 5;
01107867  mov         eax,dword ptr [x]  
0110786A  mov         dword ptr [eax],5  
01107870  mov         dword ptr [eax+4],0 
```

和结构。

```
struct Thing { unsigned long long a; };
Thing * thing = new Thing;
0133784E  push        8  
01337850  call        operator new (01332E51h)  
01337855  add         esp,4  
01337858  mov         dword ptr [ebp-0D4h],eax  
0133785E  mov         eax,dword ptr [ebp-0D4h]  
01337864  mov         dword ptr [thing],eax  
thing->a = 5;
01337867  mov         eax,dword ptr [thing]  
0133786A  mov         dword ptr [eax],5  
01337870  mov         dword ptr [eax+4],0 
```

两条指令没有区别。编译器并不关心它`this->a`是结构的成员，它访问它就像你刚刚声明了`unsigned long long a`.

# kivy - How to create simple Kivy app (form with field name)

> ID：15689555
> 
> 赞同：0
> 
> 时间：2013-03-28T18:31:04.497
> 
> 标签：kivy

How to create simple Kivy app?

> If user type text into field "Name" using keyboard like on android phone, this name is display

I need this to learn

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-06T18:09:26.773

这是我能想到的一个简单的例子。

这是 KVLANG 代码。

```
<LblTxt@BoxLayout>:
    orientation: 'horizontal'      
    lblTxtIn: 'default'
    theTxt: iAmTxt
    Label:
        text: root.lblTxtIn
    TextInput:
        id: iAmTxt  
        text: 'txt'        

<MyLayout@BoxLayout>:  
    orientation: 'vertical'

    LblTxt:   
        id: lt0
        lblTxtIn: 'LblTxtInput0'

    LblTxt:   
        id: lt1
        lblTxtIn: 'LblTxtInput1'

    LblTxt:   
        id: lt2
        lblTxtIn: 'LblTxtInput2'

    Button:
        text: 'print LblTxtInput [0, 1, 2]'
        on_release: print lt0.theTxt.text, lt1.theTxt.text, lt2.theTxt.text

MyLayout 
```

这是Python代码。

```
import kivy
kivy.require('1.8.0') # replace with your current kivy version !

from kivy.app import App
from kivy.lang import Builder
from kivy.config import Config
from kivy.core.window import Window

Window.size = (400,130)

from kivy.uix.boxlayout import BoxLayout

class LblTxt(BoxLayout):
    from kivy.properties import ObjectProperty
    theTxt = ObjectProperty(None)

class MyApp(App):

    def build(self):
        self.root = Builder.load_file('simpleForm.kv')
        return self.root

if __name__ == '__main__':
    MyApp().run() 
```

这是运行截图。当“print LblTxtInput [0, 1, 2]”按钮被释放时，它将打印 abc 到命令行。

![在此处输入图像描述](../Images/c775a75b498de99fb8d315954512e86a.png)

我希望这能够帮到你。

# jsf - JSF 2.1 + CDI 处理 ActionEvent 抛出 ViewExpiredException

> ID：15689560
> 
> 赞同：1
> 
> 时间：2013-03-28T18:31:22.063
> 
> 标签：jsf, cdi, viewexpiredexception

我正在尝试运行我的网络应用程序的简单示例。我正在使用 JSF + CDI bean。

我的小脸：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<h:html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

<h:head></h:head>
<h:body>
    <h:outputLabel value="#{testBEan.tekst}" />
    <h:form>
        <h:commandButton actionListener="#{testBEan.dodajCos}" value="guzik" />
    </h:form>
</h:body>
</h:html> 
```

我的 CDI 豆：

```
package pl.com.hrms.pages;

import javax.faces.bean.ApplicationScoped;
import javax.faces.event.ActionEvent;
import javax.inject.Named;

@Named
@ApplicationScoped
public class TestBEan
{
    String tekst = "1";

    public String getTekst()
    {
    tekst = tekst+"2";
        return tekst;
    }

    public void setTekst(String tekst)
    {
        this.tekst = tekst;
    }

    public void dodajCos(ActionEvent e)
    {
    tekst = tekst+"p";
    }
} 
```

当我运行它时，网络浏览器显示带有值“12”和按钮的标签。如果我按下按钮 threse 是抛出异常

```
19:05:05,903 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/H&RMSWeb].[Faces Servlet]] (http-0.0.0.0-0.0.0.0-8080-1) Servlet.service() for servlet Faces Servlet threw exception: javax.faces.application.ViewExpiredException: viewId:/pages/test.jsf - View /pages/test.jsf could not be restored.
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:205) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_03] 
```

如果我使用@ManagedBean 而不是@Named 它可以正常工作（我的意思是按下按钮会导致在标签上添加“p”）。

我在 WEB-INF 中有 beans.xml 文件。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:25:29.273

请不要混用`JSF Scope`和`CDI Scope`。

### JSF

```
import javax.faces.bean.ApplicationScoped;
import javax.faces.bean.ManagedBean;

@ApplicationScoped
@ManagedBean
public class MyBean {
} 
```

### CDI

```
import javax.enterprise.context.ApplicationScoped;
import javax.inject.Named;

@ApplicationScoped
@Named
public class MyBean {
} 
```

我希望这可能会有所帮助。

# jakarta-ee - 设计相同性质的相关实体（即：相关文章）的最佳方式是什么？

> ID：15689562
> 
> 赞同：1
> 
> 时间：2013-03-28T18:31:24.907
> 
> 标签：jakarta-ee, jpa, ejb-3.0

我正在寻找一种设计和编码以下业务需求的有效方法： 在知识库应用程序中，我需要编写“相关文章”功能，允许用户将文章与现有文章相关联。这将有助于最大限度地减少都柏林，并使搜索更智能、更快。

我的规格：

*   数据库：PostgreSQL 9.0.3
*   持久性框架：EJB 3
*   应用服务器：jBoss 4.2.3GA
*   Web 应用程序框架：Struts 1.3.5

这是我设计 SQL 表的方式：

*   表：文章（主键为intId）
*   表：RelatedArticle（主要是 intArticleId 和 intRelatedArticleId 的组合，两列都会引用 Article）。

这是一个好方法吗？

感谢你们

查尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:15:03.023

听起来您在这里需要的至少是`@Entity`您的`Article`表/域对象上的一个`@OneToMany`，以及您的`RelatedArticles`表/域对象。过去我们使用了鉴别器值来允许我们没有这样的连接表。在您的情况下，根据您是否要构建复杂的连接查询，您最好直接使用 JDBC 连接列。

但是，仅仅构建两个 Entity 域对象并正确注释它们以实现您的目标并不遥远，我不认为。

# r - 意外的矩阵导致 R

> ID：15689569
> 
> 赞同：3
> 
> 时间：2013-03-28T18:31:41.567
> 
> 标签：r, matrix

我是 R 新手，这是我的代码：

```
f2 = function(n){
E = matrix(c(0),nrow = (n+1), ncol = (n+1));
k = -1;
for(j in 1:n+1){
 k = k + 1;
 l = 0;
 for(i in 1:n+1){
  if(k == 0){E[i,j] = 1;}
  if(k == 1){E[i,j] = 1 - (2*l)/n;}

  l = l + 1;
 }
}
print(E);

} 
```

这在打印 n = 2 时会出现这种“意外”结果：

```
> f2(2)
     [,1] [,2] [,3]
[1,]    0    0    0
[2,]    0    1    1
[3,]    0    1    0 
```

但我想打印这个：

```
> f2(2)
     [,1] [,2] [,3]
[1,]    1    1   0
[2,]    1    0   0
[3,]    1   -1   0 
```

我认为我的逻辑是正确的，因为我也在 Java 中尝试过并且我得到了预期的结果，所以我不知道这里出了什么问题。不幸的是，这是我想要完成的一个更大程序的开始，所以这真的很烦人，如果你能告诉我一种在 R 中创建和操作矩阵的更好方法，那将非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T18:51:07.600

...但更一般地说，您最终会对这种风格的 R 代码感到非常不满。使用您对其他语言（Java？）的了解很好，但如果您像 Java 一样编写 R 代码，您会非常非常讨厌 R。

这以更 R 的方式做同样的事情：

```
> k <- matrix(0:2,3,3,byrow = TRUE)
> l <- matrix(0:2,3,3)
> ifelse(k == 0,1,ifelse(k == 1,1 - (2*l)/2,0))
     [,1] [,2] [,3]
[1,]    1    1    0
[2,]    1    0    0
[3,]    1   -1    0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:47:23.480

作为上述评论的视觉辅助：

```
> 1:5+1
[1] 2 3 4 5 6

> 1:(5+1)
[1] 1 2 3 4 5 6
> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T19:10:01.503

在@joran 之后，对任意的概括`n`：

```
f3 <- function(n)
{
    E <- matrix(0, nrow = (n+1), ncol = (n+1))
    E[,1] <- 1
    E[,2] <- seq(from=1, to=-1, length.out=n+1)
    E
} 
```

展示矢量化的力量：

```
> system.time(M <- f2(5000))
   user  system elapsed 
  41.37    0.20   41.78 
> system.time(N <- f3(5000))
   user  system elapsed 
   0.07    0.11    0.19 
```

（在用括号固定 f2 并删除之后`print`）

# r - 编辑：R模拟学习调用函数

> ID：15689570
> 
> 赞同：-1
> 
> 时间：2013-03-28T18:31:54.347
> 
> 标签：r, function, for-loop

我花了几个小时思考以下问题。我正在运行模拟研究，我想在模拟研究之外定义函数，以便能够在我的代码末尾调用这些函数。

一个非常简单的例子：

Mat 仅表示一个带有数字的矩阵，而 res 是我要填充的空矩阵。

```
mat <- matrix(data = c(1,2,3,4,5,6), ncol = 2, nrow = 3)
res <- matrix(NA, ncol = 2, nrow = 3) 
```

我使用函数“fun”来填充空矩阵 res。

```
fun <- function() {
  for (i in 1:2) {
    res[y,i] <- mat[y,i]
  }
  return(res)
} 
```

这就是我想放在代码末尾的内容（我只想调用该函数，并使用此函数填充矩阵“res”）。但是，如果我使用下面的代码，R 只会填充第三行而不是第一行和第二行。

```
for (y in 1:3) {
  test <- fun()
} 
```

我的问题是：为什么 R 不也填充第一行和第二行，我如何更改我的代码以使 R 为我提供所需的结果？

先感谢您！

编辑：

下面的例子也说明了我的问题。我使用“metafor”包进行荟萃分析。

我想使用我在最终模拟代码之外定义的以下函数：

```
mat <- matrix(NA, nrow = 8, ncol = 3, dimnames = list(c("0_le", "0_ri", ".13_le", ".13_ri", ".33_le", ".33_ri", ".5_le", ".5_ri"), c("1", "2", "3")))

funtr.stu <- function(i) {
  for (y in 1:8) {
    mat[y,i] <- tr[[y]]$k0
  }
  return(mat)
} 
```

“tr”是一个列表，由8次分析的结果组成。我想从该列表中检索对象“k0”并将其存储到矩阵“mat”中。

在代码的以下部分（我在其中运行模拟）中，我想调用该函数并用正确的数字填充矩阵“mat”。

```
for (i in 1:iterations) { 
   kip <- funtr.stu()
} 
```

此代码的结果是一个填充矩阵，但每列中的数字相同。因此，R 不是每次迭代都存储数字，而是仅存储最后一次迭代。

如何修改我的代码，使 R 可以根据需要存储输出？

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:43:24.087

`test`这是因为您在每次迭代中都覆盖了矩阵的所有值。我`print(test)`在循环中添加。查看代码。

```
mat <- matrix(data = c(1,2,3,4,5,6), ncol = 2, nrow = 3)
res <- matrix(NA, ncol = 2, nrow = 3)

mat
res

fun <- function() {
  for (i in 1:2) {
    res[y,i] <- mat[y,i]
  }
  return(res)
}

for (y in 1:3) {
  test <- fun()
  print(test)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:06:57.073

这应该适用于您的情况。基本上，在 for 循环的每次迭代中返回一行。当您返回整个“res”矩阵时。

```
mat <- matrix(data = c(1,2,3,4,5,6), ncol = 2, nrow = 3)
res <- matrix(NA, ncol = 2, nrow = 3)

fun <- function() {
  for (i in 1:2) {
    res[y,i] <- mat[y,i]
  }
  return(res[y,])
}

for (y in 1:3) {
  test[y,] <- fun()
} 
```

# javascript - Internet Explorer 从 JSON 响应中去除 HTML

> ID：15689575
> 
> 赞同：1
> 
> 时间：2013-03-28T18:32:12.557
> 
> 标签：javascript, internet-explorer, jquery, jquery-plugins

我正在使用[jQuery Form 插件](http://www.malsup.com/jquery/form/)通过 AJAX 提交表单并接收 JSON 响应：

```
$('#'+searchFormView.form.form.id).ajaxForm({
    dataType:'json',
    success:This.renderSearchResults,
    error:This.error
}); 
```

HTTP 响应正文：

```
{
"grid":{
    "headers":[
        "Image","Additional","data","button"
    ],
    "rows":[
        ["<img src=\"\Path_to_image\" alt=\"picture\">",
         "Additonal",
         "data",
         "<button>Button text<\/button>"
        ],
        [Some more of these arrays]
    ]
}
} 
```

Chrome 和 FF 对此完全没问题。它渲染得很好。IE 在到达成功方法时将 HTML 从数据值中剔除：

```
renderSearchResults:function(data){
    console.log(data.grid.rows[0][0]);
    // Render the grid.
} 
```

IE控制台登录结果：

```
Log: 
```

如果我在成功方法运行时观察局部变量：

```
"{
    \"grid\":{
        \"headers\":[
            \"Image\",
            \"Additional\",
            \"data\",
            \"Button\"
        ],
    \"rows\":[
        [\"\",\"Additional\",\"data\",\"Button text<\\/button>\"],
        ... 
```

如您所见，HTML 标记已经消失（奇怪的是，标记仍然存在）。

这应该是XSS保护吗？

我该如何解决？

# java - Android OpenGL ES 1 - 多边形边缘

> ID：15689576
> 
> 赞同：0
> 
> 时间：2013-03-28T18:32:17.193
> 
> 标签：java, android, opengl-es, polygon, edges

我在使用 opengl es 1.0 时画了一个箭头。我使用矩形作为轴和金字塔作为尖端来绘制箭头。当箭头从某些角度旋转时，可以通过箭头尖端的边缘看到轴。

正在发生的事情的图片：http: [//i.imgur.com/9K41OE8.png](http://i.imgur.com/9K41OE8.png)

我的画法

```
 public void draw(GL10 gl) {
    gl.glFrontFace(GL10.GL_CW);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_COLOR_ARRAY);
    gl.glEnable(GL10.GL_CULL_FACE);
    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
    gl.glColorPointer(4, GL10.GL_FLOAT, 0, colorBuffer);

    gl.glDrawElements(GL10.GL_TRIANGLES, indexBuffer.capacity(), GL10.GL_UNSIGNED_BYTE, indexBuffer);

    gl.glDisableClientState(GL10.GL_COLOR_ARRAY);
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);  

} 
```

我认为它可能与剔除有关，但为什么它只会出现在尖端的边缘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T22:29:37.917

必须启用深度测试才能使其看起来正确。用这个：

```
gl.glEnable(GL10.GL_DEPTH_TEST);
gl.glDepthMask(GL10.GL_TRUE); 
```

然后不要忘记在绘制框架之前清除这些位：

```
gl.glClear(GL10.GL_DEPTH_BUFFER_BIT | GL10.GL_COLOR_BUFFER_BIT); 
```

# python - 如何告诉 py.test 安装所需的模块？

> ID：15689577
> 
> 赞同：0
> 
> 时间：2013-03-28T18:32:17.553
> 
> 标签：python, pytest

我正在使用 py.test 运行测试，但它可能无法运行，因为由于缺少依赖模块而无法收集测试。

我不得不提到我的 setup.py 已经包含这些模块：

```
setup(
    ...
    tests_require=['soappy'],
    ... 
```

尽管如此，我似乎还是遗漏了一些东西，一些可以告诉`py.test`安装这些模块的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:15:09.890

pytest 本身不处理 setup.py，test_requires 是 setuptools 通过调用 setup.py 来关心的。文档显示了如何将 pytest 运行与 setup.py 集成的两种方法：http: [//pytest.org/latest/goodpractices.html#integrating-with-distutils-python-setup-py-test](http://pytest.org/latest/goodpractises.html#integrating-with-distutils-python-setup-py-test)

# android - 使用 Android 读取 NXP ICODE SLI-L 标签

> ID：15689582
> 
> 赞同：2
> 
> 时间：2013-03-28T18:32:24.363
> 
> 标签：android, nfc, iso-15693

我正在尝试在我的 Android 应用程序中读取 NXP 开发的 NFC 标签。可以使用 Android 读取标签：[NXP 的应用程序](https://play.google.com/store/apps/details?id=com.nxp.taginfolite)和[其他](https://play.google.com/store/apps/details?id=at.mroland.android.apps.nfctaginfo)应用程序正确读取它。

确切的标签类型是“ICODE SLI-L (SL2ICS50)”，射频技术是“Type V / ISO 15693”（数据取自这些工作应用程序）。内存由 2 个页面组成，每个页面有 4 个块，每个块有 4 个字节——我只想将整个数据存储在内存中。

`NfcV`该标签必须使用 Android 的类来处理，标签的数据表[可在此处获得](http://www.nxp.com/documents/data_sheet/SL136430.pdf)，但很难找到任何使用`NfcV`. 我尝试了一些我自己通过数据表得出的结论，并尝试了[我在 Google 中找到的这个 PDF](http://www.baracoda.com/baracoda/librairie-doc/RFID-HF-Raw-Read&Write-Examples-v1-02_2525.pdf)中的通信示例，但没有任何效果。

我的活动中的相应方法（我使用 NFC 前台调度）如下所示：

```
public void onNewIntent(Intent intent) {
    android.nfc.Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
    NfcV tech = NfcV.get(tag);
    try {
        tech.connect();
        byte[] arrByt = new byte[9];
        arrByt[0] = 0x02;
        arrByt[1] = (byte) 0xB0;
        arrByt[2] = 0x08;
        arrByt[3] = 0x00;
        arrByt[4] = 0x01;
        arrByt[5] = 0x04;
        arrByt[6] = 0x00;
        arrByt[7] = 0x02;
        arrByt[8] = 0x00;
        byte[] data = tech.transceive(arrByt);
        // Print data
        tech.close();
    } catch (IOException e) {
        // Exception handling
    }
} 
```

当我将手机放在标签上时，该方法被正确调用，但对象的`transceive()`方法`NfcV`总是抛出一个 IOException: `android.nfc.TagLostException: Tag was lost.`。这是我尝试过的所有字节数组的结果（上面的不太可能正确，但在过去的几天里，我尝试了一堆其他的都导致相同的行为。

根据我在 Internet 上阅读的内容，我得出的结论是，错误的发生是因为我向标签发送了错误的命令——但我就是想不出正确的命令。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T23:26:00.917

ISO 15693 定义了不同的读取命令，制造商也可以定义专有的读取命令。所有 ICODE 标签都支持 ISO 15693 单块读取命令。您可以按如下方式发送：

```
public static void processNfcIntent(Intent intent){
    Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
    if(tag != null){
      // set up read command buffer
      byte blockNo = 0; // block address
      byte[] readCmd = new byte[3 + id.length];
      readCmd[0] = 0x20; // set "address" flag (only send command to this tag)
      readCmd[1] = 0x20; // ISO 15693 Single Block Read command byte
      byte[] id = tag.getId();
      System.arraycopy(id, 0, readCmd, 2, id.length); // copy ID
      readCmd[2 + id.length] = blockNo; // 1 byte payload: block address

      NfcV tech = NfcV.get(tag);
      if (tech != null) {
        // send read command
        try {
          tech.connect();
          byte[] data = tech.transceive(readCmd); 
        } catch (IOException e) {
          e.printStackTrace();
        } finally {
          try {
            tech.close();
          } catch (IOException e) {
            e.printStackTrace();
          }
        }
      }
    }
} 
```

# python - 一个以两个矩阵作为输入的函数，并返回一个 A * B 的矩阵。在 Python 中

> ID：15689585
> 
> 赞同：1
> 
> 时间：2013-03-28T18:32:28.233
> 
> 标签：python, vector, matrix, multiplication

我想弄清楚如何创建一个点积矩阵。这是我到目前为止所做的代码：

```
C = [[4,1,9], [6,2,8], [7,3,5]]
D = [[2,9], [5,2], [1,0]]

def prettyPrint(A):
    for i in range(len(A)):
        line = "{0: >7}".format("|"+str(A[i][0]))
        for j in range(1, len(A[i])):
            line = line + "{0: >7}".format(str(A[i][j]))
        line = line + "|"
        print(line)
#for addition of vectors   
def matrixADD(A,B):
    Z = []
    for i in range(len(A)):
        row = []
        for j in range(len(A[0])):
            row.append(A[i][j]+B[i][j])
        Z.append(row)
    return Z
#for subtraction of vectors
def matrixSUB(A,B):
    Z = []
    for i in range(len(A)):
        row = []
        for j in range(len(A[0])):
            row.append(A[i][j]-B[i][j])
        Z.append(row)
    return Z
#for multiplication of vectors
def row(A,i):
    Z = []
    Z.extend(A[i])
    return Z

def col(B,j):
    Z = []
    for row in B:
        Z.append(row[j])
    return Z

def dotProduct(x,y):
    prod = 0
    prod = sum(p*q for p,q in zip(x,y))
    return prod

def matrixMUL(A,B):
    Z = []
    #Need to do.
    return Z

print("\nC * D:")
prettyPrint(matrixMUL(C,D)) 
```

这`matrixMUL(A,B)`是我遇到麻烦的部分。该程序应该通过这种计算：示例：

```
Z = C * D =
row(C,0) • col(D,0)   row(C,0) • col(D,1)
row(C,1) • col(D,0)   row(C,1) • col(D,1)
row(C,2) • col(D,0)   row(C,2) • col(D,1)
Z =
(4*2 + 1*5 + 9*1)   (4*9 + 1*2 + 9*0)
(6*2 + 2*5 + 8*1)   (6*9 + 2*2 + 8*0)
(7*2 + 3*5 + 5*1)   (7*9 + 3*2 + 5*0)
Z =
22    38
30    58
34    69 
```

然后只有这个打印语句：

```
C * D:
     |22     38|
     |30     58|
     |34     69| 
```

我需要使用其他树（或三个？不知道是否有错字）功能。在过去的三天里，我一直在尝试这个，并且查看了我能想到的所有内容。这是我尝试过的一些失败的代码（我只是注释掉出了问题的东西）：

```
def matrixMUL(A,B):
    Z = []
    Z.append(int(dotProduct(row(A,B),col(A,B))))
    #if len(col(B,j)) != len(row(A,i)):
        #print("Cannot multiply the two matrices. Incorrect dimensions.")
    #else:
        #for n in range(row(A,i)):
            #for m in range(col(B,j)):
                #Z.append(dotProduct(x,y))
    return Z
    #mult = sum(p*q for p,q in zip(x,y))
    #Z.append(mult)
    #Z = []
    #for i in range(len(A)):
        #row = []
        #for j in range(len(A[0])):
            #row.append(A[i][j]+B[i][j])
        #Z.append(row)
    #return Z 
```

我不知道我还能尝试什么。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:35:21.720

你可以这样做：

```
def matrixMUL(A,B):
    Z = [[0] * len(B[0]) for zz in range(len(A))]
    for i in range(0,len(A)):
        a = row(A,i)
        for j in range(0,len(B[0])):
            b = col(B,j)
            Z[i][j] = sum(p*q for p,q in zip(a,b))
    return Z 
```

我在编写这样的代码时遇到的一个困难是首先正确地初始化矩阵。

如果我们使用类似的代码`Z = [[0] * len(B[0])] * len(A)`，那么我们最终会创建一个列表`Z`，其中包含对*相同*长度零列表的`len(A)` *引用。*因此，类似代码看起来会“神奇地”改变并同时相等，因为所有这些都引用同一个列表中的同一个元素。*`len(B[0])``z[0][0] = 1``Z[1][0]``Z[2][0]``1`*

 *通过使用如上所示的列表推导式初始化矩阵`Z`，我们可以确定我们有一组在 中引用的唯一列表`Z`。

另一种避免需要初始化所有`Z`（从而完全避免列表引用问题）的方法是：

```
def matrixMUL2(A,B):
    Z = []
    for i in range(0,len(A)):
        a = row(A,i)
        r = []
        for j in range(0,len(B[0])):
            b = col(B,j)
            r.append(sum(p*q for p,q in zip(a,b)))
        Z.append(r)
    return Z 
```

这两个函数都没有进行应有的错误检查（例如，检查矩阵是否具有相应的维度大小，这是乘法所必需的），因此它们还没有达到良好的生产代码标准。此外，正如评论中所建议的那样，如果`numpy`可用，我强烈建议使用`numpy`而不是为此编写自己的代码。*

# c++ - 在 C++ 中使用堆栈和向量以相反的顺序打印字符串

> ID：15689587
> 
> 赞同：0
> 
> 时间：2013-03-28T18:32:31.293
> 
> 标签：c++, stack

快速提问：我正在尝试接受一个字符串参数，然后使用堆栈和向量向后打印它。但是，在屏幕上显示“Here you go!”后，屏幕上没有打印任何内容。我相信这与矢量设置有关，因为我以前从未使用过这个。这是有问题的代码。我将不胜感激任何帮助！

```
void main() {

stack<char> S;
string line;
vector<char> putThingsHere(line.begin(), line.end());
vector<char>::iterator it;

cout << "Insert a string that you want to see backwards!" << endl;
cin >> line;

for(it = putThingsHere.begin(); it != putThingsHere.end(); it++){
    S.push(*it);
}

cout << "Here you go! " << endl; 

while(!S.empty()) {
    cout << S.top();
    S.pop();
}

system("pause");

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:34:55.057

您的向量被初始化得太早，当时`line`仍然是空的。将构造移动到从标准输入中提取字符串的指令`putThingsHere` *下方：*

```
cin >> line;
vector<char> putThingsHere(line.begin(), line.end()); 
```

这是您的固定程序正确运行的[实时示例](http://liveworkspace.org/code/3ji7qM%2427)。

请注意使用 of`getline()`而不是`cin >> line`，以便字符之间的空格仍然可以作为单个字符串的一部分读取。

这就是说，值得一提的是，它`std::string`满足标准序列容器的要求，特别是具有成员函数`begin()`和`end()`返回一个`std::string::iterator`.

因此，您根本不需要 a `std::vector<>`，下面的代码片段就可以完成这项工作：

```
getline(cin, line);
for(std::string::iterator it = line.begin(); it != line.end(); it++) {
    S.push(*it);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T18:35:51.020

您的`line`变量最初为空。`vector`你从来没有真正在PutThingsHere 和`stack`S中放入任何东西。

放在

```
cout << "Insert a string that you want to see backwards!" << endl;
cin >> line; 
```

在`vector<char> PutThingsHere(...)`声明之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T18:35:31.460

先读入`line`，然后才读入`putThingsTHere`

```
stack<char> S;
string line;

cout << "Insert a string that you want to see backwards!" << endl;
cin >> line;
vector<char> putThingsHere(line.begin(), line.end());
vector<char>::iterator it; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T18:38:01.410

我已经在使用你`std::string`了，为什么不使用：

```
`std::string reversed(line.rend(), line.rbegin());` 
```

# ios - 尝试上传 iOS 应用程序，无法存档

> ID：15689590
> 
> 赞同：1
> 
> 时间：2013-03-28T18:32:41.103
> 
> 标签：ios, xcode, upload, archive

我制作了一个应用程序并尝试将其上传到 iTunes Connect。我已经安装了证书，开发证书和分发证书......见图......

![在此处输入图像描述](../Images/6246215151f2a5e72b1948d091808261.png)

![在此处输入图像描述](../Images/3b958954abfb0b8de7fb46b3d722b336.png)

![在此处输入图像描述](../Images/3868ef9f8b9335f4ff8b416346c32074.png) ...但是，不知何故，当我试图将 Xcode 中的应用程序归档为二进制文件时，它会报告一个错误：

![在此处输入图像描述](../Images/958ac6d60ba02c0287d3f9e95f5c112f.png) 我所有的证书都是有效的，但它仍然在抱怨分发证书，

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:22:14.797

您似乎没有分发配置文件（只有开发人员配置文件 - 在组织者中）。您似乎拥有分发证书，但没有配置文件。您必须为您的应用程序创建分发配置文件。您可以在门户中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T20:18:20.717

您是否在自己的 Mac 上生成了证书？证书必须与钥匙串中的私钥匹配。如果没有，请撤销现有证书并创建一个新证书。您将不得不再次从 Apple 执行签名。

# android - 查看可扩展列表中的图像列表

> ID：15689591
> 
> 赞同：0
> 
> 时间：2013-03-28T18:32:47.290
> 
> 标签：android, multithreading, image, android-asynctask, expandablelistview

我做了一个可扩展的列表，其中子项（子项）显示来自可绘制文件夹或文本的图像。

我想对来自网络的图像做同样的事情。因此，我还使用了 asynctask 来避免[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

此代码在我的 ExpandableListAdapter 中，我在其中初始化项目和子项目。Drawable 和 ImageView 是全局定义的，因此所有函数都可以在不发送参数的情况下访问它们。

```
Drawable drawable;
ImageView imgView;

@Override
public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) {

String child = childList[groupPosition][childPosition];

    if(child.equalsIgnoreCase("none")){
        ImageView i = new ImageView(context);
        i.setImageResource(R.drawable.blank_image_for_view_business);
        i.setPadding(0, 0, 0, 0);
        return i ;          
    }
      else if(child.startsWith("http")){
         imgView = new ImageView(context);
        new asyTask();
        return imgView;
    }else{
        TextView tv = new TextView(context);
        tv.setText(childList[groupPosition][childPosition]);
        tv.setPadding(30, 0, 0, 0);
        return tv;
    }
}

private Drawable LoadImageFromWeb(String url){
      try{
          InputStream is = (InputStream) new URL(url).getContent();
          Drawable d = Drawable.createFromStream(is, "src name");
          return d;
      }catch (Exception e) {
          System.out.println("Exc="+e);
          return null;
      }
} 
```

这是我的异步课程：

```
private class asyTask extends AsyncTask<String, Void, Integer> {
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        //show a progress bar
    }

    @Override
    protected void onPostExecute(Integer result) {
        super.onPostExecute(result);
        imgView.setImageDrawable(drawable);   
    }

    @Override
    protected Integer doInBackground(String... params) {
        drawable  =  LoadImageFromWeb("http://www.ettinger.co.uk/var/ezflow_site/storage/images/collections/ettinger/ettinger-walkie-pen/lifestyle-navy-walkie-pen/navy-walkie-pen-gallery/wlkp_pens_navy-2/20569-2-eng-GB/wlkp_pens_navy-2.jpg"); 
        return 0;
    } 
```

目前，在可扩展列表中，我只能看到来自可绘制文件夹和 textview 的图像，但没有来自互联网的图像。问题是什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:06:58.560

我已经修好了！

获取儿童视图（）：

```
 ....    
 else if (child.startsWith("http")) {       
     Drawable image = ImageOperations(context,child,"image.jpg");
     ImageView imgView = new ImageView(context);
     imgView.setImageDrawable(image);
     imgView.setPadding(0, 0, 0, 0);
     return imgView;
     }.... 
```

这将调用以下方法：

```
 private Drawable ImageOperations(Context ctx, String url, String saveFilename) {
    try {
        InputStream is = (InputStream) this.fetch(url);
        Drawable d = Drawable.createFromStream(is, "src");
        return d;
    } catch (MalformedURLException e) {
        e.printStackTrace();
        return null;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
}

public Object fetch(String address) throws MalformedURLException,IOException {
    URL url = new URL(address);
    Object content = url.getContent();
    return content;
} 
```

因此，无需创建其他私有类来在 ExpandableListAdapter 类中显示来自互联网的图像。有用。

# javascript - AJAX 和 Javascript：关于界面的建议

> ID：15689595
> 
> 赞同：1
> 
> 时间：2013-03-28T18:33:04.860
> 
> 标签：javascript, php, jquery, html

我正在寻找一种正确的方法来创建[与此非常相似的](http://concierge.apple.com/reservation/us/en/techsupport/)东西（只需单击该页面上的下一步）。我很想收到任何关于如何做到这一点的建议。

我相信这都是关于包装许多**ul的****DIV**。单击下一步时，可能 jQuery 代码在右侧显示了一个隐藏的 DIV，但不知道如何定位它。一切显然都必须从数据库中获取。

 **有人可以给我一个建议吗？我希望这不是一个不赞成的问题，因为我认为这个社区本来是分享这个的最佳场所。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:57:01.683

查看一些现有的 JavaScript MVC 框架，如[Backbone.js](http://backbonejs.org)、[AngularJS](http://angularjs.org)或[Knockout](http://knockoutjs.com)，以了解这些动态 UI 背后的一些设计模式和理念。

它们对于现代 Web 应用程序的工具来说非常强大，尤其是当你的 UI 中有很多移动部件时。它们将通过 AJAX 很好地与您的后端和数据存储配合使用，并且您可以获得诸如“路由”之类的不错的功能，它可以帮助您通过页面流做一些很酷的事情，同时保持您的 JavaScript 简洁明了。**

# layout - Spinner Layout Closed 与每行的布局不同

> ID：15689601
> 
> 赞同：0
> 
> 时间：2013-03-28T18:33:11.160
> 
> 标签：layout, drop-down-menu, row, spinner

我的微调器在关闭时的布局采用了为微调器的每一行配置的布局布局。

每行的布局是在 getCustomView 方法中定义的，因为我使用的是微调器的自定义适配器，这里定义：

```
public View getCustomView(int position, View convertView, ViewGroup parent) {

            LayoutInflater inflater=getLayoutInflater();
            View row=inflater.inflate(R.layout.row, parent, false);  //here is the layout for each row -> R.layout.row

            //there are more things here but doesnt matter for the question..

} 
```

在那个布局（row.xml）上，我有顶部和底部的边距，因为我想在选择之间留出一些空间。但是微调器的按钮本身，我的意思是，微调器的布局在关闭时也有边距..它看起来比我想要的要大。

可以定义不同的布局吗？我尝试使用较小的高度在 xml 中制作微调器布局，但随后我可以清楚地看到该选项..因为它有边距..

我说清楚了吗？提前非常感谢..如果有人不明白我可以解释得更好。谢谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:17:07.563

Finnaly 找到了解决这个问题的方法 :) 不知道 getDropDownView 用于下拉布局，而 getView 用于单个布局，在关闭的微调器中......

此处的解决方案：[“下拉状态”和“关闭状态”具有不同布局的 Android Spinner？](https://stackoverflow.com/questions/4647299/android-spinner-with-different-layouts-for-drop-down-state-and-closed-state)

# linux-kernel - 保持补丁内核模块超过更新

> ID：15689603
> 
> 赞同：1
> 
> 时间：2013-03-28T18:33:12.930
> 
> 标签：linux-kernel, kernel-module, patch

在对内核模块进行少量修改后（例如，将另一个 USB DeviceId 添加到设备驱动程序），是否可以阻止对该模块的更新（例如，通过`apt-get upgrade`），是否有任何可靠的方法来确定模块将持续多久保持兼容？

*   二进制模块适合内核映像的条件是什么？
*   只要补丁匹配，是否有可能有一个安装后挂钩，它跟踪更新的模块源、补丁并在任何内核映像更新上构建它？
*   只要可以应用，这样的补丁实际上构成工作模块的可能性有多大？

目标是尽可能长时间地让带有修改模块的机器跟随包更新，然后停留在兼容版本上，直到开发人员提供更新的补丁模块二进制文件或源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:53:14.900

您可以考虑使用 DKMS [http://en.wikipedia.org/wiki/Dynamic_Kernel_Module_Support](http://en.wikipedia.org/wiki/Dynamic_Kernel_Module_Support)。

# android - 旋转背景资源 Imageview

> ID：15689607
> 
> 赞同：0
> 
> 时间：2013-03-28T18:33:21.140
> 
> 标签：android

我正在创建 Imageview 并使用 Matrix 来旋转。但背景不能旋转配偶形象。

我是背景旋转图像。帮我

```
 Bitmap myBitmap = BitmapFactory.decodeResource(getResources(),
     R.drawable.a);
     Display d = getWindowManager().getDefaultDisplay();
     int x = d.getWidth();
     int y = d.getHeight();
     ImageView img1 = (ImageView) findViewById(R.id.img1);
     Bitmap scaledBitmap = Bitmap.createScaledBitmap(myBitmap, y, x,
     true);
     Matrix matrix = new Matrix();
     matrix.postRotate(-45); // anti-clockwise by 90 degrees
     Bitmap rotatedBitmap = Bitmap
     .createBitmap(scaledBitmap, 0, 0, scaledBitmap.getWidth(),
     scaledBitmap.getHeight(), matrix, true);
     img1.setImageBitmap(rotatedBitmap);
     img1.setBackgroundResource(color.white); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:17:31.150

这是我用于将图像旋转到 90 度的代码。

```
 if(oldAngle == 0){
              newAngle = oldAngle + 90;
            }
            else if(oldAngle == 90)
                newAngle = oldAngle - 90;
              LinearLayout.LayoutParams layoutParams = (LinearLayout.LayoutParams) view.getLayoutParams();
              int centerX = layoutParams.leftMargin + (view.getWidth()/2);
              int centerY = layoutParams.topMargin + (view.getHeight()/2);
              RotateAnimation animation = new RotateAnimation(oldAngle, newAngle, centerX, centerY);
              animation.setDuration(0);
              animation.setRepeatCount(2);
              animation.setFillAfter(true);
              view.startAnimation(animation);

              oldAngle = newAngle; 
```

希望它会帮助你...

# java - 具有图片初始化的 JLabel 的 ActionListener

> ID：15689614
> 
> 赞同：0
> 
> 时间：2013-03-28T18:33:34.907
> 
> 标签：java, swing, actionlistener, jlabel

如何为 JLabel 制作 actionListener ？我想如果我们双击这张图片（在 JLabel 上）它会调用一些函数..

我猜 Jlabel 的 actionListener 是不同的，因为它给出了错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:41:35.450

这是有关如何完成此任务的简短演示。

![在此处输入图像描述](../Images/c7a4b8c8105492fe9eac4c98a9be1ed0.png)

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
class MouseClickOnJLabel extends JFrame 
{
    public void createAndShowGUI()
    {
        JLabel label = new JLabel("Double Click on me!!");
        getContentPane().setLayout(new FlowLayout());
        getContentPane().add(label);
        label.addMouseListener(new MouseAdapter()
        {
            public void mouseClicked(MouseEvent evt)
            {
                int count = evt.getClickCount();
                if (count == 2)
                {
                    JOptionPane.showMessageDialog(MouseClickOnJLabel.this,"You double clicked on JLabel","Information",JOptionPane.INFORMATION_MESSAGE);
                }
            }
        });
        setSize(300,200);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }
    public static void main(String[] args) 
    {
        SwingUtilities.invokeLater( new Runnable()
        {
            public void run()
            {
                MouseClickOnJLabel moj = new MouseClickOnJLabel();
                moj.createAndShowGUI();
            }
        });
    }
} 
```

# c++ - 内存分配、单例以及何时使用/避免它们

> ID：15689615
> 
> 赞同：2
> 
> 时间：2013-03-28T18:33:40.253
> 
> 标签：c++, oop, language-agnostic, singleton

我遇到了[这个页面](http://www.object-oriented-security.org/lets-argue/singletons)，它对单身人士有一个非常好的、全面的概述。

代替常见的*“单例是一个具有私有构造函数且只有一个全局实例的类”，*它描述了单例如下：

> 准确定义我们所说的“单例”是很重要的。
> 
> 就本论点而言，*单例是任何可变状态，无需从堆栈开始即可到达*（即从静态或全局变量可到达）。
> 
> 通常，单例是作者期望只有一个实例的类。但是，就我们的目的而言，任何可全局访问的对象都很重要。
> 
> ### 例子：
> 
> *   一组操纵某些共享可变状态的函数（或静态方法）构成一个单例。
> *   如果单例 A 提供对可变对象 B 的引用，则 B 也是单例。
> *   这意味着单例集合的每个可变成员本身就是一个单例。
> *   即使全局可访问，传递不可变对象也不是单例。它是一个常数。
> *   假设代码是不可变的，不访问任何单例的独立函数本身不是单例。
> 
> ...
> 
> ### 那么 open() 或标准输出呢？
> 
> 这些是单身人士的一些最糟糕的例子！
> ...

从本质上讲，这意味着 , `malloc`,`new`或`shared_ptr`任何你的语言用来访问堆内存的东西——所有这些都使用单例！

然而，没有人说我们需要因此避免堆分配。*内存分配*似乎到处都被忽视了！即使在我引用的页面上，他们也提到了`open()`和`stdout`日志记录，但他们从未提到堆内存分配——这显然比记录器更“危险”，因为它不是单向街道。

所以我的问题是，**内存分配是规则的一个例外（为什么？），还是*单*例的一个坏例子？**

**我如何确定单身人士的新用途是否属于同一“例外”类别？**

[（出于显而易见的原因，标记为与语言无关，但也标记为 C++，因为我认为它与 C++ 特别相关，因为它允许用户修改行为`new`并引入更多全局状态。）]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:08:25.463

根据定义，您的程序只与一个外部世界交互。所以没有人会争辩说这不是单例的例子！

但是从软件设计的角度来看，我会说好的/不好的实际上只是一个“这会给我带来麻烦吗？”的问题。和“我能做些什么吗？”。

对于输出之类的东西，两者的答案都是“是”。在复杂的程序中，通过将输出封装在非单例对象中可以获得相当大的好处（测试、依赖注入等）。对于像系统内存这样的东西，不是那么多。

您可以寻求抽象出一些固有的耦合（实际上，操作系统、语言运行时以及自定义分配器之类的东西都在某种程度上在内存的情况下做到了这一点）。将所有内存分配封装在对象后面也可能会有所帮助，以允许测试复杂的应用程序对内存不足条件的响应。但是你仍然不能完全消除全局耦合。

# python - 生成带有约束的列表

> ID：15689616
> 
> 赞同：-2
> 
> 时间：2013-03-28T18:33:40.807
> 
> 标签：python, list

我需要生成一个长度为 n 的列表：

1.  具有来自域 [-1, 0, 1] 的元素
2.  正好有 k 个非零元素

我知道我的元素将是 [-1, 0, 1] 与自身的叉积的子集，但是简单地使用 iterables 包生成叉积然后删除“错误”的那些是不可能的及时换n大于10真的。

我想知道有没有可行的方法？

注意对于上下文，问题是使用搜索算法生成圆形加权矩阵。从概念上对问题的任何洞察力也值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:54:44.290

问题简化为查找具有`n-k`零和`k`非零的列表，然后将非零特化为 -1 和 1。

您可以使用索引组合轻松完成此操作：

```
def gen_lists(n, k):
    for nzinds in itertools.combinations(range(n), n-k):
        l = [0] * n
        for nz in itertools.product([-1,1], repeat=n-k):
            for i,v in zip(nzinds, nz):
                l[i] = v
            yield l 
```

样本输出：

```
>>> for l in gen_lists(3, 1):
...     print l
... 
[-1, -1, 0]
[-1, 1, 0]
[1, -1, 0]
[1, 1, 0]
[-1, 0, -1]
[-1, 0, 1]
[1, 0, -1]
[1, 0, 1]
[0, -1, -1]
[0, -1, 1]
[0, 1, -1]
[0, 1, 1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:48:11.467

与其试图列出一个大清单并删除一些东西，你可以尝试从底部开始构建它。制作 k 个非零元素。制作 nk 0 个元素。将它们放在一起，然后将混合物洗牌：

```
import random
k = 5
n = 10
non_zero = k * [1,-1]
random.shuffle(non_zero)
z = (n-k)*[0]
result = non_zero[0:k] + z
random.shuffle(result) # [0, 1, -1, 0, 1, 0, 1, -1, 0, 0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T18:51:48.243

怎么样：生成一个有序列表，其中包含您需要的 -1、0 和 1 的数量，并遍历该排序的所有排列。像这样：

```
import itertools

def generateLists(n, k):
    numberOfZeroes = n - k
    for numberOfOnes in range(0, k+1):
        numberOfNegativeOnes = k - numberOfOnes
        orderedList = [-1] * numberOfNegativeOnes + [0] * numberOfZeroes + [1] * numberOfOnes
        for possibleOrderings in itertools.permutations(orderedList):
            yield possibleOrderings

for i in generateLists(3, 2):
    print i 
```

输出：

```
(-1, -1, 0)
(-1, 0, -1)
(-1, -1, 0)
(-1, 0, -1)
(0, -1, -1)
(0, -1, -1)
(-1, 0, 1)
(-1, 1, 0)
(0, -1, 1)
(0, 1, -1)
(1, -1, 0)
(1, 0, -1)
(0, 1, 1)
(0, 1, 1)
(1, 0, 1)
(1, 1, 0)
(1, 0, 1)
(1, 1, 0) 
```

# c# - 邮件发送失败

> ID：15689623
> 
> 赞同：-2
> 
> 时间：2013-03-28T18:34:06.380
> 
> 标签：c#, asp.net

我正在尝试制作一个电子邮件页面部分，我在这个论坛中找到了一篇文章和一个答案，我在下面的代码中使用了它，但它仍然说发送邮件失败，我几乎不知道为什么？我需要帮助来寻找补救措施，为什么我的以下代码无法发送电子邮件。下面是我的代码供您参考。请告知...谢谢。

```
protected void Button1_Click(object sender, EventArgs e)
{

SmtpClient client = new SmtpClient();

        client.Host = "smtp.live.com"; //Im not sure about this,I just copy it from the article
        client.Port = 4548; //This is my ASP.Net Development Server Port,Im not sure also if this is correct.

        client.Credentials = new System.Net.NetworkCredential(
            @"email_account",
            @"email_password"); //Im not sure about this code if this correct, I just copy it

        client.EnableSsl = true;

        // create message
        MailMessage message = new MailMessage();
        message.From = new MailAddress(TextBox4.Text, "Mackmellow"); //Textbox4 is my email address
        message.To.Add(new MailAddress(TextBox1.Text, "Mackmellow")); // Textbox1 is the email add I want to send
        message.Subject = TextBox2.Text; //Textbox2 is my subject
        message.Body = TextBox3.Text; // Textbox3 is my message
        message.BodyEncoding = System.Text.Encoding.UTF8;
        message.IsBodyHtml = true;

        message.SubjectEncoding = System.Text.Encoding.UTF8;

        // send message
        try
        {
            client.Send(message);

        }
        catch (SmtpException ex)
        {

            Response.Write(ex.Message);
        }
        finally
        {
            // Clean up.
            message.Dispose();
        } 
```

可以请更正我的代码并告诉我我缺少什么吗？提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:37:21.933

对于发送邮件，您不能使用您的开发服务器端口。

您必须使用邮件服务器的 smtp 服务器端口。

对于 smtp.live.com，您应该使用端口 25 或 587

对于下面的此代码，请指定有效的登录详细信息（电子邮件/密码）

```
 client.Credentials = new System.Net.NetworkCredential(
            @"email_account",
            @"email_password"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:41:59.450

仅提供 G-mail 帐户 ID。然后检查它。我认为`SmtpClient`不接受任何其他域邮件地址。所以你可以只 `gmail`输入地址然后检查它。

编辑

请参阅此示例和其他答案。

[从 Asp.Net/C# 发送邮件时出错](https://stackoverflow.com/questions/11265376/error-sending-mail-from-asp-net-c)

[如何在 asp.net 中将电子邮件发送到任何目的地，例如 yahoo、gmail、hotmail 等 c# 代码](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/05220933-8305-4295-87d2-519865838e13/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-28T18:36:58.687

试试这个。

```
SmtpClient SmtpServer = new SmtpClient("smtp.live.com");
    var mail = new MailMessage();
    mail.From = new MailAddress("email@hotmail.com");
    mail.To.Add("ToGmail.com");
    mail.Subject = "Your Sub";
    mail.IsBodyHtml = true;
    string htmlBody;
    htmlBody = "HTML code";
    mail.Body = htmlBody;
    SmtpServer.Port = 587;
    SmtpServer.UseDefaultCredentials = false;
    SmtpServer.Credentials = new System.Net.NetworkCredential("email@hotmail.com", "YourPassword");
    SmtpServer.EnableSsl = true;
    SmtpServer.Send(mail); 
```

# mysql - 在表数据中使用通配符

> ID：15689624
> 
> 赞同：-1
> 
> 时间：2013-03-28T18:34:08.030
> 
> 标签：mysql, sql, wildcard

使用 MYSQL 我有一个表，其中数据有通配符。例子...

```
|ID  | Model  |
|1   | dv209% | 
```

我正在尝试编写一个 sql 查询，该查询将在`model='dv209AWW'`或时找到第 1 行`model='dv209asdfs'`。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:35:09.337

使用[喜欢](http://dev.mysql.com/doc/refman/5.1/en/string-comparison-functions.html)

```
select id, model
from your_table
where 'dv209AWW' like model
order by id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:48:15.173

试试这个：

```
SELECT Id, Model
FROM yourTable
where model LIKE 'dv209%' 
```

所以它会在值为`dv209AWW`或时找到该行`dv209asdfs`

# java - 根据 mouseClicked Point 在绘制线上的偏差位置

> ID：15689625
> 
> 赞同：0
> 
> 时间：2013-03-28T18:34:14.090
> 
> 标签：java, swing, jpanel, java-2d, mouselistener

在`JPanel`JFrame 上有一个，`JPanel`如下所示 -

```
public class MyPanel extends JPanel implements MouseListener,
        MouseMotionListener {
    ...
    @Override
    public void mouseClicked(MouseEvent arg) {
            ...
        Point p = arg.getPoint();
            // save this point  ... 
            ...
            repaint();

    }

    @Override
    protected void paintComponent(Graphics g) {
        ...
        // point1 & point2 are the last two clicked point ..
        super.paintComponent(g);
        int x1 = point1.x;
        int y1 = point1.y;

        int x2 = point2.x;
        int y2 = point2.y;
        g.drawLine(x1, y1, x2, y2);
    }

} 
```

我的问题是`drawline`绘制的线条与原始组件上的实际点击点位置略有偏差。

我附上了一些更清晰的截图 -

上面的线边缘是我点击它们的 2 个点，下面的线是从 接收到的线`drawline`，并且你可以看到这 2 条线不重叠。

点击 1 -

![在此处输入图像描述](../Images/c2e61620523617ae585eb7e3c4f54e1d.png)

点击 2 -

![在此处输入图像描述](../Images/e853203ff71d678774e4d637dfa4b120.png)

输出线——

![在此处输入图像描述](../Images/c8c1497718b5dc0f6224d97c5d34980e.png)

任何有用的解决方案？

# java - 从 WSDL、Intellij 生成 Amazon API SOAP 代码

> ID：15689629
> 
> 赞同：1
> 
> 时间：2013-03-28T18:34:38.130
> 
> 标签：java, amazon-web-services, intellij-idea, wsdl, wsdl2java

[我从 Intellij 中的 Amazon WSDL 生成了](http://webservices.amazon.com/AWSECommerceService/AWSECommerceService.wsdl)Java 代码。它似乎工作得很好。[但是，当我按照此页面](http://docs.aws.amazon.com/AWSECommerceService/2011-08-01/GSG/ImplementinganA2SRequest.html)上的教程进行操作时，我遇到了一个问题。Java 代码的最后一行是从 AWSECommerceServicePortType 类调用方法 itemSearch。为该方法生成的唯一方法描述是

```
@WebMethod(operationName = "ItemSearch", action = "http://soap.amazon.com/ItemSearch")
             @RequestWrapper(localName = "ItemSearch", targetNamespace = "http://webservices.amazon.com/AWSECommerceService/2011-08-01", className = "com.shopit.amazon.ItemSearch")
             @ResponseWrapper(localName = "ItemSearchResponse", targetNamespace = "http://webservices.amazon.com/AWSECommerceService/2011-08-01", className = "com.shopit.amazon.ItemSearchResponse")
             public void itemSearch(
    @WebParam(name = "MarketplaceDomain", targetNamespace = "http://webservices.amazon.com/AWSECommerceService/2011-08-01")
    String marketplaceDomain,
    @WebParam(name = "AWSAccessKeyId", targetNamespace = "http://webservices.amazon.com/AWSECommerceService/2011-08-01")
    String awsAccessKeyId,
    @WebParam(name = "AssociateTag", targetNamespace = "http://webservices.amazon.com/AWSECommerceService/2011-08-01")
    String associateTag,
    @WebParam(name = "XMLEscaping", targetNamespace = "http://webservices.amazon.com/AWSECommerceService/2011-08-01")
    String xmlEscaping,
    @WebParam(name = "Validate", targetNamespace = "http://webservices.amazon.com/AWSECommerceService/2011-08-01")
    String validate,
    @WebParam(name = "Shared", targetNamespace = "http://webservices.amazon.com/AWSECommerceService/2011-08-01")
    ItemSearchRequest shared,
    @WebParam(name = "Request", targetNamespace = "http://webservices.amazon.com/AWSECommerceService/2011-08-01")
    List<ItemSearchRequest> request,
    @WebParam(name = "OperationRequest", targetNamespace = "http://webservices.amazon.com/AWSECommerceService/2011-08-01", mode = WebParam.Mode.OUT)
    Holder<OperationRequest> operationRequest,
    @WebParam(name = "Items", targetNamespace = "http://webservices.amazon.com/AWSECommerceService/2011-08-01", mode = WebParam.Mode.OUT)
    Holder<List<Items>> items); 
```

它要求我传递比示例中更多的参数，并且在编译时会给出错误。我是否需要使用不同的设置来生成 java 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T22:17:29.453

您可以将 amazon-ecs.jar 用于亚马逊产品 api

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-29T06:27:36.363

我认为最好使用官方的 aws sdk for java：[http ://aws.amazon.com/sdkforjava/](http://aws.amazon.com/sdkforjava/)

# jquery - 如何找出 li 元素路径中的 ul 元素数量？

> ID：15689630
> 
> 赞同：1
> 
> 时间：2013-03-28T18:34:40.240
> 
> 标签：jquery

比如我有如下html内容，使用jquery，如何从a2的li文本中找出ul元素的个数？我确信最接近的方法可以做到这一点，但是如果你事先不知道有多少 ul 怎么办......

```
<ul id="ul_first">
     <li>a</li>
     <li>b</li>
     <li>c</li>
     <li>d</li>
     <li>c
              <ul id="ul_second">
                           <li>a2</li>   <------- From here, this li has two ul element
                           <li>b2</li>
                           <li>c2</li>
                           <li>d2</li>
              </ul>    
     </li>
 </ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:35:48.990

您可以使用[`parents`](http://api.jquery.com/parents)：

```
var numberOfULsContainingThisElement = $(this).parents('ul').length; 
```

假设`this`是`li`您指向的 DOM 元素（例如，如果您单击它，则`this`在单击处理程序中）。

您不会使用`closest`，因为它在第一场比赛中停止。`parents`收集与选择器匹配的所有祖先。

在您的*特定*情况下（例如，不在点击处理程序中），这将是：

```
var numberOfULsContainingThisElement = $("#ul_second li").first().parents('ul').length; 
```

[实例](http://jsbin.com/odogir/1)| [来源](http://jsbin.com/odogir/1/edit)

# xcode - iOS 示例（GLSprite）不显示任何内容

> ID：15689632
> 
> 赞同：0
> 
> 时间：2013-03-28T18:34:41.953
> 
> 标签：xcode, opengl-es-1.1

我实现了用于绘制图像的 iOS 示例（GLSprite），但它没有显示任何内容。NSLogs 告诉我，一切都已初始化，所以我不知道，为什么什么都没有显示。

我想加载一个 png 文件并旋转它。

*   上下文加载
*   帧缓冲区创建
*   setupView 完成
*   drawView 完成

没有错误。除了这个黑屏之外，一切似乎都很好:)

有人知道为什么吗？

h文件

```
#import <Foundation/Foundation.h>
#import <OpenGLES/ES1/gl.h>
#import <OpenGLES/ES1/glext.h>

@interface CJTEAGLView : UIView
{
GLint backingWidth;
GLint backingHeight;

EAGLContext *context;

GLuint viewRenderbuffer;
GLuint viewFramebuffer;
GLuint viewDepthRenderbuffer;

GLuint playerTexture;

BOOL animating;
BOOL displayLinkSupported;

NSInteger animationFrameInterval;

id displayLink;
}

@property (nonatomic) BOOL animating;
@property (nonatomic) NSInteger animationFrameInterval;

- (void)startAnimation;
- (void)stopAnimation;
- (void)drawView;

@end 
```

m文件

```
@interface CJTEAGLView()
- (void)createFramebuffer;
 - (void)destroyFramebuffer;
- (void)setupView;

@end

const GLfloat spriteVertices[] =
{
-0.5f, -0.5f,
0.5f, -0.5f,
-0.5f,  0.5f,
0.5f,  0.5f,
};

const GLshort spriteTexcoords[] =
{
0, 0,
1, 0,
0, 1,
1, 1,
};

@implementation CJTEAGLView

@synthesize animating;
@synthesize animationFrameInterval;

+ (Class) layerClass
{
return [CAEAGLLayer class];
}

- (id)initWithCoder:(NSCoder*)coder
{
if(self = [super initWithCoder:coder])
{
    CAEAGLLayer *eaglLayer = (CAEAGLLayer *)self.layer;

    eaglLayer.opaque = YES;
    eaglLayer.drawableProperties = [NSDictionary dictionaryWithObjectsAndKeys:
                                    [NSNumber numberWithBool:FALSE], kEAGLDrawablePropertyRetainedBacking, kEAGLColorFormatRGBA8, kEAGLDrawablePropertyColorFormat, nil];

    context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES1];

    if(!context || ![EAGLContext setCurrentContext:context])
    {
        NSLog(@"Context failed");

        [self release];

        return nil;
    }

    animating = FALSE;
    displayLinkSupported = TRUE;
    animationFrameInterval = 1;
    displayLink = nil;

    [self createFramebuffer];
    [self setupView];
    [self drawView];
}

return self;
}

- (void)layoutSubviews
{
[EAGLContext setCurrentContext:context];

[self destroyFramebuffer];
[self createFramebuffer];
[self drawView];
}

- (void)createFramebuffer
{
glGenFramebuffersOES(1, &viewFramebuffer);
glGenRenderbuffersOES(1, &viewRenderbuffer);

glBindFramebufferOES(GL_FRAMEBUFFER_OES, viewFramebuffer);
glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
[context renderbufferStorage:GL_RENDERBUFFER_OES fromDrawable:(id<EAGLDrawable>)self.layer];
glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_RENDERBUFFER_OES, viewRenderbuffer);

glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &backingWidth);
glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &backingHeight);
}

- (void)destroyFramebuffer
{
glDeleteFramebuffers(1, &viewFramebuffer);
glDeleteRenderbuffers(1, &viewRenderbuffer);
glDeleteRenderbuffers(1, &viewDepthRenderbuffer);
}

- (NSInteger) animationFrameInterval
{
return animationFrameInterval;
}

- (void) setAnimationFrameInterval:(NSInteger)frameInterval
{
if (frameInterval >= 1)
{
    animationFrameInterval = frameInterval;

    if (animating)
    {
        [self stopAnimation];
        [self startAnimation];
    }
}
}

- (void) startAnimation
{
if (!animating)
{
    if (displayLinkSupported)
    {
        displayLink = [NSClassFromString(@"CADisplayLink") displayLinkWithTarget:self selector:@selector(drawView)];
        [displayLink setFrameInterval:animationFrameInterval];
        [displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    }

    animating = TRUE;
}
}

- (void)stopAnimation
{
if (animating)
{
    if (displayLinkSupported)
    {
        [displayLink invalidate];
        displayLink = nil;
    }

    animating = FALSE;
}
}

- (void)setupView
{
CGImageRef playerImage;
CGContextRef playerContext;
GLubyte *playerData;
size_t playerWidth;
size_t playerHeight;

glViewport(0, 0, backingWidth, backingHeight);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrthof(-1.0f, 1.0f, -1.5f, 1.5f, -1.0f, 1.0f);
glMatrixMode(GL_MODELVIEW);
glClearColor(0, 0, 0, 1);

playerImage = [UIImage imageNamed:@"Cruiser.png"].CGImage;
playerWidth = CGImageGetWidth(playerImage);
playerHeight = CGImageGetHeight(playerImage);

if(playerImage)
{
    playerData = (GLubyte *) calloc(playerWidth * playerHeight * 4, sizeof(GLubyte));
    playerContext = CGBitmapContextCreate(playerData, playerWidth, playerHeight, 8, playerWidth * 4, CGImageGetColorSpace(playerImage), kCGImageAlphaPremultipliedLast);
    CGContextDrawImage(playerContext, CGRectMake(0, 0, (CGFloat)playerWidth, (CGFloat)playerHeight), playerImage);
    CGContextRelease(playerContext);

    glGenTextures(1, &playerTexture);
    glBindTexture(GL_TEXTURE_2D, playerTexture);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, playerWidth, playerHeight, 0, GL_RGBA, GL_UNSIGNED_BYTE, playerData);

    free(playerData);

    glEnable(GL_TEXTURE_2D);
    glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);
    glEnable(GL_BLEND);
}
}

- (void)drawView
{
[EAGLContext setCurrentContext:context];

glBindFramebufferOES(GL_FRAMEBUFFER_OES, viewFramebuffer);
glRotatef(3.0f, 0.0f, 0.0f, 1.0f);

glClear(GL_COLOR_BUFFER_BIT);
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
[context presentRenderbuffer:GL_RENDERBUFFER_OES];
}

@end 
```

# iphone - 在 Xcode 中有没有办法确定网站流量？

> ID：15689635
> 
> 赞同：-4
> 
> 时间：2013-03-28T18:34:52.990
> 
> 标签：iphone, ios, xcode, web-traffic

我想知道是否有一些 API 或某种工具可用于确定 Xcode 的网站流量。我需要跟踪其他网站的流量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:45:28.227

无法检索您无法控制的网站的确切交通信息，除非该网站将交通信息发布到公共位置。大多数网站不这样做。

一些在线服务可以估计网站流量，例如 Alexa。此数据不准确，仅作为付费服务提供。

# html - 放大 HTML5 中的图像而不会模糊

> ID：15689638
> 
> 赞同：7
> 
> 时间：2013-03-28T18:35:08.160
> 
> 标签：html, css, image

有没有办法让 HTML5 中的图像变大而不会变得模糊。

例如，此图像是 24x24： ![在此处输入图像描述](../Images/d6652d9e832583bcba015d6e9d1997ef.png)

如果您改为以 150 的宽度加载它，它会变得模糊。***我要像素化***！

[http://png-1.findicons.com/files/icons/734/phuzion/24/bug.png](http://png-1.findicons.com/files/icons/734/phuzion/24/bug.png)

相反，我想更改渲染引擎以显示您在 Photoshop 中看到的内容。像这样的东西：

![在此处输入图像描述](../Images/47e588f7a7e76b12403eaff139dc4465.png)

我只关心现代浏览器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T18:52:46.760

如果你只是把它留给浏览器，他们现在会尽量让它流畅（旧的 IE 版本没有）。所以你最好的选择是将它加载到画布中并自己进行（最近邻）升级。我并不是说这是一个理智的想法，只是把它放在那里。:)

那个，或者有多个版本的图像并以某种方式切换它们。您可以尝试一些技术，例如 CSS 滑动门。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T18:54:53.790

经过一些研究：不幸的是，您想要做的是受到浏览器特定限制的限制。Firefox 有一个有限的实验代码`(image-rendering)`，可以强制浏览器停止插入像素，从而导致模糊。

不幸的是，目前没有其他支持的方式来执行此操作。我的建议是让您像在编辑原始帖子时那样简单地缩放图像。

像这样：![在此处输入图像描述](../Images/66d3e96e869b8eb13ba158da9c5280ab.png)

Mozilla 的文档页面：[https ://developer.mozilla.org/en-US/docs/CSS/image-rendering](https://developer.mozilla.org/en-US/docs/CSS/image-rendering)

# c# - 防火墙阻止安卓

> ID：15689640
> 
> 赞同：0
> 
> 时间：2013-03-28T18:35:15.973
> 
> 标签：c#, java, android, http, firewall

我使用名为 nancyfx 的 c# 中的轻量级 http 服务器编写了一个应用程序。问题是我可以从浏览器（本地主机和 LAN pc）调用框架，但 android（也是 LAN）被阻止。

```
 String url = "http://192.168.178.35:8080/issue";
 HttpClient client = new DefaultHttpClient();

 HttpGet get = new HttpGet(url);
 HttpContext localContext = new BasicHttpContext();
 HttpResponse res = client.execute(get, localContext); 
```

它卡在执行方法中，看起来像是在等待超时。然后是http异常HttpHostConnectionException：连接被拒绝。

如果我关闭 Windows 防火墙，它可以工作。为了以防万一，我还为该程序添加了防火墙规则。

Android 设备是否有任何特殊规则？

# python - 80端口上的Django项目？

> ID：15689641
> 
> 赞同：4
> 
> 时间：2013-03-28T18:35:16.993
> 
> 标签：python, django, ubuntu-server

Ι 开发了一个Django项目并上传到云端VΜ。目前我可以通过 8080 端口访问它。

```
python manage.py runserver 0.0.0.0:8080 
```

如果我输入没有 8080 端口的 url，它会显示“它可以工作”页面。如何将我的 Django 项目设置为默认在 80 端口上运行？

我正在使用 Ubuntu 12.04 服务器

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T18:39:57.133

正如[文档所说](https://docs.djangoproject.com/en/dev/ref/django-admin/#runserver-port-or-address-port)，`runserver`并不意味着作为部署服务器。它还提到您可能无法在端口 80 上启动它，除非您以 root 身份运行它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T16:53:32.423

这是您需要放入 /etc/apache2/sites-enabled 的文件类型，您需要调整其中的路径。您还需要加载 mod_wsgi，您可以通过 apt-get 来完成。

```
<VirtualHost 192.168.1.14:80>
ServerAdmin youremail@whatever.com

ServerName www.whatever.com
ServerAlias whatever.com

Alias /robots.txt  /home/dimitris/Python/mysite/site_media/robots.txt
Alias /favicon.ico /home/dimitris/Python/mysite/site_media/favicon.png
Alias /static/     /home/dimitris/Python/mysite/site_media/static

WSGIDaemonProcess mysite user=dimitris processes=1 threads=5
WSGIProcessGroup mysite
WSGIScriptAlias / /home/dimitris/Python/mysite/deploy/mysqite_wsgi.py

# Possible values include: debug, info, notice, warn, error, crit, alert, emerg.
LogLevel debug

ErrorLog  ${APACHE_LOG_DIR}/mysite.error.log
CustomLog ${APACHE_LOG_DIR}/mysite.access.log combined

ServerSignature Off
</VirtualHost> 
```

其中大部分假设您在 virtualenv 中运行，这意味着您需要一个 wsgi 文件才能运行。上面的文件设置 apache 来运行你的“wsgi”文件，它看起来像这样：

```
import os
from os.path import abspath, dirname, join
import sys

with open("/tmp/mysite.sys.path", "w") as f:
  for i in sys.path:
    f.write(i+"\n")

#redirect sys.stdout to sys.stderr for libraries that use
#print statements for optional import exceptions.
sys.stdout = sys.stderr

sys.path.insert(0, abspath(join(dirname(__file__), "../../")))
sys.path.insert(0, abspath(join(dirname(__file__), "../../lib/python2.7/site-packages/")))

from django.conf import settings
os.environ['DJANGO_SETTINGS_MODULE'] = 'mysite.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

mod_wsgi，然后打开这个文件并执行它。application 是等待来自 webserver 的请求的部分，其余部分的行为就像 runserver 一样，除了它可以是多进程和多线程的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-01T17:42:10.957

在虚拟环境中的终端中，**运行：**

```
sudo ./manage.py runserver 80 
```

系统将要求您输入密码，它将在端口 80 上运行服务器。

# c++ - VS 2010 wstring 未显示在输出窗口中

> ID：15689644
> 
> 赞同：2
> 
> 时间：2013-03-28T18:35:28.603
> 
> 标签：c++, visual-studio-2010, wstring

我想将一个 wstring 输出到输出窗口（我希望这就是它的英文名称）。

![在此处输入图像描述](../Images/168e5834397ee8802d6863a1796d7adc.png)

但它不这样做。

有人看到我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:42:44.007

您可能想尝试使用[`OutputDebugString()`Win32 API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362%28v=vs.85%29.aspx)。

在 Unicode 构建中，自 VS2005 以来一直是默认的，`OutputDebugString()`扩展为`OutputDebugStringW()`（即 API 的*Unicode* UTF-16 版本，而 ANSI 版本是`OutputDebugStringA()`）。

由于`OutputDebugString[W]`需要一个*原始的 C 字符串指针*，您可以使用**`std::wstring::c_str()`**方法将内容传递`std::wstring`给上述 API：

```
// std::wstring sDebug
....
OutputDebugString( sDebug.c_str() ); // (is OutputDebugStringW() in Unicode builds) 
```

# postgresql - 如何将印度时区添加到 Postgresql？

> ID：15689650
> 
> 赞同：2
> 
> 时间：2013-03-28T18:35:47.000
> 
> 标签：postgresql, postgresql-9.1

我正在尝试找出将印度标准时间（来自 UTC 的 +0530）添加到 postgresql（9.1）的最简单方法。

我尝试了将其插入表中的愚蠢做法，但它不起作用。

> 插入 pg_timezone_abbrevs 值('INDIA','05:30:00');

几年前其他人发现的问题，[谷歌搜索](http://www.postgresql.org/message-id/4983.1075569542@sss.pgh.pa.us)旧邮件列表告诉我。但没有找到简单的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:53:22.020

**底线**：不要使用*IST*，那是以色列时区，而不是印度时区。使用“*亚洲/加尔各答*”。反而。

这方面的 Postgres 文档含糊不清，但请注意：

> SELECT 名称、缩写、utc_offset、is_dst FROM pg_timezone_names；

将为您提供不同的选项，而不是显示所有可用的时区。

> SELECT abbrev, utc_offset, is_dst FROM pg_timezone_abbrevs;

并且编辑此文件没有任何效果。不要打扰。也许您需要手动更改另一个配置以包含它。

> /usr/share/postgresql/9.1/timezonesets/Asia.txt

# sql - OLEDB 连接到 mdf 文件

> ID：15689653
> 
> 赞同：0
> 
> 时间：2013-03-28T18:35:50.173
> 
> 标签：sql, database, oledb, oledbconnection, mdf

我正在开发一个需要连接到 sql 数据库的开发项目。问题是，数据库将只存储在本地机器上。我也只能访问 SQL Server express，我不能使用 .sdf 数据库，因为它的限制是 4Gb。我在 Visual Studio 中以正确的格式和布局创建了 .mdf，并将文件放在开发机器上。现在，使用我们必须使用的软件连接到它（或任何数据库）的唯一方法是使用 OLEDB 连接。我尝试使用 SQL Express 连接到它，但它可能会出错，因为它不是 .sdf 文件。有没有人有任何想法？我一直在互联网上，我开始怀疑这是否可能。我可以连接到 Visual Studio C# 中的 mdf 文件。谢谢一堆。

# google-maps - 谷歌地图窗口只显示部分地图

> ID：15689656
> 
> 赞同：6
> 
> 时间：2013-03-28T18:35:59.710
> 
> 标签：google-maps

过去我曾在许多网站上使用过 Google 地图，但遇到了一个我从未遇到过的问题。地图窗口正在显示，但它只显示左上角的地图片段，以及之后的任何内容（即使我正在四处导航），没有任何内容加载到右侧。就好像被导航的窗口有一个内部偏移量，将它推离视口的一侧。有谁知道可能是什么原因造成的？

**编辑**

我刚刚发现，当调整窗口大小时，地图会刷新，并且布局是固定的。

该地图包含在通过 javascript 显示（并通过 隐藏`display:none`）的选项卡中。tab容器通过ajax加载，加载时调用loadMap函数。我尝试通过将 loadMap 函数包含在将地图的创建延迟 1 秒的 setTimeout 函数中来推迟它，但它仍然执行相同的操作（需要调整窗口大小以修复它）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T03:06:47.693

这是您在创建地图时地图容器隐藏或维度为零时会遇到的典型问题。

通常的解决方案是执行以下操作之一：

*   推迟创建地图，直到容器元素可见且大小合适，或者

*   `google.maps.event.trigger( map, 'resize' )`在地图可见或调整大小后调用。此事件告诉 Maps API 重新调整其对地图中可见内容的计算。

听起来您已经通过使用第一个选项解决了它，这绝对是两者中更好的选择。您的页面将加载得更快，因为您没有花时间创建不可见的地图。如果您确实遇到地图大小可能发生变化的情况（例如，可调整大小的窗口），那么您可以在发生这种情况时触发调整大小事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T02:08:04.830

Righto，我不确定为什么它不起作用，但是我已将代码更改为仅在第一次打开选项卡时执行地图创建功能。这使它正常工作

# java - 为什么我的程序无法识别我的方法？

> ID：15689658
> 
> 赞同：2
> 
> 时间：2013-03-28T18:36:14.853
> 
> 标签：java, methods, arraylist

我收到一条错误消息，指出“找不到方法 - getCenter”，但是每当我将“objects.get(i)”替换为像 a、b 或 d 这样的单个对象时，它都能找到该方法。我不明白为什么它无法从 ArrayList 中找到方法。

```
public class TestPoly
{
public static void main (String []args)
{
    ArrayList objects = new ArrayList();

    Circle2 a = new Circle2(33,10,4);
    Cylinder2 b = new Cylinder2(21,15,40,5);
    Oval2 c = new Oval2(3,7,34,10);
    OvalCylinder2 d = new OvalCylinder2(5,11,5,5,7);

    objects.add(a);
    objects.add(b);
    objects.add(c);
    objects.add(d);

    for (int i = 0; i < objects.size(); i++)
    {
        System.out.println("For " + objects.get(i).getClass().getName() + objects.get(i).getCenter());
    }
}
} 
```

Circle2就是这个。

```
public class Circle2
{
// instance variables 
private int x;
private int y;
private int radius;

/**
 * Constructor for objects of class circle
 */
public Circle2(int p_x, int p_y, int r)
{
    // initialise instance variables
    x = p_x;
    y = p_y;
    radius = r;
}

public int getRadius()
{

    return radius;
}

public String getCenter()
{
    return " the center is at (" + x + "," + y + ")";
}
} 
```

Cylinder2、Oval2 和 OvalCylinder2 都只是 Circle2 的子类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T18:37:40.657

您尚未为您的 声明类型参数或类型参数`ArrayList`，因此它默认为`Object`. `Object`没有`getCenter()`方法。

您可以将`ArrayList`声明更改为：

```
ArrayList<Circle2> objects = new ArrayList<Circle2>();
Circle2 a = new Circle2(33,10,4);
objects.add(a);
objects.get(0).getCenter(); 
```

但它现在只能接受`Circle2`对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T18:40:28.763

您正在创建一个`ArrayList`没有任何类型参数的对象，这意味着您将其创建为[Raw Type](http://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html)。当您这样做时，您需要在从列表中获取对象时将它们转换为适当的类型。

要在这种情况下正确运行您的代码，这是推荐的方式，请指定这样的类型参数 -

```
// if you are using jdk 7 or above
ArrayList<Circle2> objects = new ArrayList<>(); 
```

或者 -

```
ArrayList<Circle2> objects = new ArrayList<Circle2>(); 
```

[在此处](http://docs.oracle.com/javase/tutorial/java/generics/)查看有关泛型的更多信息。

但是，如果您仍然想让现有代码工作（不推荐），那么使用这个 -

```
ArrayList objects = new ArrayList();

Circle2 a = new Circle2(33,10,4);
Cylinder2 b = new Cylinder2(21,15,40,5);
Oval2 c = new Oval2(3,7,34,10);
OvalCylinder2 d = new OvalCylinder2(5,11,5,5,7);

objects.add(a);
objects.add(b);
objects.add(c);
objects.add(d);

for (int i = 0; i < objects.size(); i++)
{
    Circle2 circle = (Circle2 )objects.get(i);
    System.out.println("For " + circle.getClass().getName() + circle.getCenter());
} 
```

不要以这种方式使用原始类型。它们不打算在新代码中使用，支持它们只是为了向后兼容。从上面关于原始类型的链接 -

> 原始类型出现在遗留代码中是因为许多 API 类（例如 Collections 类）在 JDK 5.0 之前不是通用的。使用原始类型时，您基本上会获得预泛型行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T18:46:06.863

你现在拥有的当前数组列表......将“对象”作为它的元素......因此......它的元素将只支持在对象上定义的方法（toString、getHashcode 等）

您可以定义如下类型：

```
ArrayList<Circle2> objects = new ArrayList<Circle2>(); 
```

但是，它只能接受圆形类型的对象。以下几行将导致错误：

```
objects.add(b);
objects.add(c);
objects.add(d); 
```

一个更好的方法是使用继承......所以你将有一个名为 shape 的基类......它将有一个名为 getCenter 的方法，该方法将被子类覆盖（如果需要）

```
public abstract class Shape {
  public String getCenter();
} 
```

有四个类扩展了形状类：

```
public class Cylinder extends Shape
public class Circle extends Shape 
```

等等

所以现在你可以让你的数组列表为：

```
ArrayList<Shape> shapes = new ArrayList<Shape>(); 
```

并在其中添加多个不同的形状：

```
shapes.add(new Circle())
shapes.add(new Cylinder())
... 
```

以下代码是可能的

```
for(Shape shape : shapes)
   System.out.println(shape.getCenter()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T18:48:08.033

一个`ArrayList`（或任何其他集合）需要知道它要存储的对象的类别。如果未指定，则假定您将存储`Object`实例。

要指定您的集合将存储的类，您需要在创建集合时包含类名：

```
// ...
ArrayList<Circle2> objects = new ArrayList<Circle2>();
// ... 
```

现在您可以通过`ArrayList`两种方式阅读：

**“数组”样式：**您使用索引来遍历您的每个条目`ArrayList`：

```
for(i=0; i<objects.size(); i++) {
    // Use objects(i) to get the Circle2 instance
} 
```

**'iterator' 风格：**存储在集合中的对象可以通过迭代集合来读取：

```
for(Circle2 c : objects) {
    /*
     * The object 'c' stores every single Circle2 instance in your 'objects' list
     */
} 
```

我建议你检查`Collections`和`Generics`教程：

*   [http://docs.oracle.com/javase/tutorial/collections/index.html](http://docs.oracle.com/javase/tutorial/collections/index.html)
*   [http://docs.oracle.com/javase/tutorial/java/generics/index.html](http://docs.oracle.com/javase/tutorial/java/generics/index.html)

# c# - 驱动 MVVM 应用程序

> ID：15689660
> 
> 赞同：0
> 
> 时间：2013-03-28T18:36:24.943
> 
> 标签：c#, design-patterns, mvvm, architecture

给定任何具有超过 5 个视图和视图模型的中间 MVVM 应用程序，是否有任何推荐的设计模式来说明如何为此类应用程序搭建脚手架？

现在我通常有一个在 App.OnStartup 中创建的控制器：

*   设置主视图
*   注入子视图（通常我有一个带有状态栏和导航的 MainWindow，它有“内部窗口”）
*   处理视图和视图模型的结合。
*   处理导航（从视图 A 到视图 B）
*   支持面包屑导航（以及典型的 NavigationService.GoBack() 之类的东西）

我相信已经有很好的设计模式，但我没有听说过或读过它们。

所以问题是：是否有任何普遍接受的模式来处理视图模型和视图的耦合（设置数据上下文）以及视图之间的导航？

在我看来，视图优先（在 XAML 中设置 DataContext）和视图模型优先（让视图模型通过 DI/IOC 获得视图注入）都不是很好，因为它们在视图和视图模型之间建立了依赖关系。

Plain MVVM 对如何设置整个 MVVM 机器没有任何假设。我只是想知道这个很常见的问题没有“现成的”解决方案。我相信控制器被广泛使用。其他人如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:46:40.577

要考虑的一些设计模式是[控制反转 (IoC)](http://en.wikipedia.org/wiki/Inversion_of_control)和[事件聚合器](http://martinfowler.com/eaaDev/EventAggregator.html)。

对于 C# / MVVM，[Caliburn 微框架](http://caliburnmicro.codeplex.com/)（是其中之一）使 IoC 和事件聚合器更容易。

您正确地确定了 MVVM 的一个核心问题，即没有现成的解决方案可以真正将 ViewModel 与 View 解耦。ViewModel 是专门为与 Views 配对而构建的，这是一个核心概念。问题归结为如何管理 ViewModel / View 配对的实例。

View first 方法假设 View 知道并可以根据需要实例化 ViewModel——这对 SoC 来说是一个问题，因为任何 View 类现在都有多个职责；启动 ViewModel 并处理 UI。

首先查看模型很困难，因为它通常会导致破坏 MVVM 的主要租户之一——VM 应该可以在没有任何关联视图的情况下进行测试。

通常，这就是 IoC 的用武之地。IoC 通常驻留在 View 层中（这是为了允许它根据需要访问所有 View 和 ViewModel 类）它不需要是 View 本身。将您的 IoC 管理器视为控制器通常会更好——这会导致 MVCVM 的伪模式。这个“控制器”的唯一目的是为任何需要它的人提供 View 和 ViewModel 实例配对。

事件聚合器模式确实对此有所帮助，因为 ViewModel 和 View 中的类不再需要担心它们与谁配对，并且只能与它们自己级别的其他类交互。一个特定的视图模型不需要关心是谁发送了“更新加载进度”事件，它只需要负责通过设置它的进度属性来处理事件的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:12:19.483

关于 View 和 ViewModel 之间的“链接”，我发现[这篇文章](http://www.codeproject.com/Articles/444371/Creating-WPF-Data-Templates-in-Code-The-Right-Way)`DataTemplateManager`中的概念非常有趣。基本上，它允许您执行以下操作

```
DataTemplateManager.Register<TViewModel1,TView1>();
DataTemplateManager.Register<TViewModel2,TView2>();
DataTemplateManager.Register<TViewModel3,TView3>(); 
```

诚然，它可能不是最好的解决方案，但非常方便。我已经将它整合到我自己自制的 MVVM 框架中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T20:02:28.227

我有一个小型项目，其中包含一个名为的单例类`ViewFinder`，它有几个名为`MakeWindowFor(vm)`and的静态方法`MakeDialogFor(vm)`，它们都将视图模型作为参数。`ViewFinder`有一个我填写的字典，它将视图模型与我设置为对应于它们的窗口链接起来。可以添加更多信息，因为视图可能存在于另一个视图中，而不仅仅是一个窗口。

这可能不是完成任务的最佳方式，但可以满足我对这个项目的需求，并使视图模型不知道实际的视图实现。我所有的视图模型的祖先都包含显示消息框等事件，我所有的窗口都来自一个知道如何订阅和响应这些常见事件的基类。

```
public class ViewFinder {
    private static ViewFinder m_Instance;
    public static ViewFinder Instance {
        get {
            if (m_Instance == null)
                m_Instance = new ViewFinder();
            return (m_Instance);
        }
    }

    /// Maps viewmodels to windows/dialogs. The key is the type of the viewmodel, the value is the type of the window.
    private Dictionary<Type, Type> ViewDictionary = new Dictionary<Type, Type>();

    /// Private constructor because this is a singleton class.
    ///
    /// Registers the viewmodels/views.
    private ViewFinder() {
        Register(typeof(SomeViewModel), typeof(SomeWindowsForViewModel));
        Register(typeof(SomeViewModel2), typeof(SomeWindowsForViewModel2));
    }

    /// Registers a window with a viewmodel for later lookup.
    /// <param name="viewModelType">The Type of the viewmodel. Must descend from ViewModelBase.</param>
    /// <param name="windowType">The Type of the view. Must descend from WindowBase.</param>
    public void Register(Type viewModelType, Type windowType) {
        if (viewModelType == null)
            throw new ArgumentNullException("viewModelType");
        if (windowType == null)
            throw new ArgumentNullException("windowType");
        if (!viewModelType.IsSubclassOf(typeof(ViewModelBase)))
            throw new ArgumentException("viewModelType must derive from ViewModelBase.");
        if (!windowType.IsSubclassOf(typeof(WindowBase)))
            throw new ArgumentException("windowType must derive from WindowBase.");
        ViewDictionary.Add(viewModelType, windowType);
    }

    /// Finds the window registered for the viewmodel and shows it in a non-modal way.
    public void MakeWindowFor(ViewModelBase viewModel) {
        Window win = CreateWindow(viewModel);
        win.Show();
    }

    /// Finds a window for a viewmodel and shows it with ShowDialog().
    public bool? MakeDialogFor(ViewModelBase viewModel) {
        Window win = CreateWindow(viewModel);
        return (win.ShowDialog());
    }

    /// Helper function that searches through the ViewDictionary and finds a window. The window is not shown here,
    /// because it might be a regular non-modal window or a dialog.
    private Window CreateWindow(ViewModelBase viewModel) {
        Type viewType = ViewDictionary[viewModel.GetType()] as Type;
        if (viewType == null)
            throw new Exception(String.Format("ViewFinder can't find a view for type '{0}'.", viewModel.GetType().Name));
        Window win = Activator.CreateInstance(viewType) as Window;
        if (win == null)
            throw new Exception(String.Format("Activator returned null while trying to create instance of '{0}'.", viewType.Name));
        win.DataContext = viewModel;
        return win;
    }
} 
```

# perl - Perl 对象错误：无法通过包定位对象方法

> ID：15689661
> 
> 赞同：7
> 
> 时间：2013-03-28T18:36:25.530
> 
> 标签：perl, oop, object

我意识到以太坊中有几个这样的问题，但我无法解决我的问题。也许我应该提高我的横向思维。

我有一个正在测试的模块。这个模块看起来像：

```
package MyModule;
use strict;
use warnings;

... # a bunch of 'use/use lib' etc.

sub new {
    my $class = shift;
    my ($name,$options) = @_;

    my $self = {
        _name     => $name,
        _features => $options,
        _ids      => undef,
        _groups   => undef,
        _status   => undef,
    };
    bless $self,$class;
    return $self;
}

sub init {
    my ($self) = @_;
    my ($ids,$groups,$status) = ...; # these are from a working module
    $self->{_ids}    = $ids;
    $self->{_groups} = $groups;
    $self->{_status} = $status;
    return $self;
} 
```

这是我的测试文件：

```
#!/usr/bin/perl -w

use strict;
use MyModule;
use Test::More tests => 1;
use Data::Dumper;

print "Name: ";
my $name;
chomp($name = <STDIN>);
print "chosen name: $name\n";

my %options = (
    option1 => 'blah blah blah',
    option2 => 'blu blu blu',
);

my $name_object = MyModule->new($name,\%options);
print Dumper($name_object);
isa_ok($name_object,'MyModule'); 

$name_object->init;
print Dumper($name_object); 
```

现在它可以工作到`isa_ok`，但随后出现：

`Can't locate object method "init" via package "MyModule" at test_MyModule.t line 31, <STDIN> line 1.`

这只是在我尝试（并且似乎有些失败）使用对象时才发生的。因此，我认为我误解了 Perl 中对象的应用程序！任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T09:08:35.973

我认为您正在加载与您认为正在加载的文件不同的文件。

```
print($INC{"MyModule.pm"}, "\n"); 
```

会告诉你你实际加载了哪个文件。（如果模块名的格式确实是`Foo::Bar`，请使用`$INC{"Foo/Bar.pm"}`。）确保`package`和文件名的大小写匹配。

# java - 如何从简单的正则表达式生成字符串？

> ID：15689662
> 
> 赞同：1
> 
> 时间：2013-03-28T18:36:26.743
> 
> 标签：java, regex

因此，如果我有简单的正则表达式，例如：

```
"g{1,3}(a|e|i|o|u)" 
```

我希望我的程序生成字符串

```
ga
ge
gi
go
gu
gga
gge
ggi
ggo
ggu
ggga
ggge
gggi
gggo
gggu 
```

我不会将“g *（a | e | i | o | u）”用于正则表达式，因为可以有无限数量的'g'并且会有无限数量的字符串。

对简单有效的算法有什么建议吗？我想我将能够通过使用 for/while 循环以蛮力的方式制作这些字符串，但我想知道是否有任何方法可以让这个算法工作。

我用谷歌搜索了如何从正则表达式创建字符串，许多人似乎重定向到： [https](https://code.google.com/p/xeger/) ://code.google.com/p/xeger/ 以使用已构建的库，但我想知道是否可以获得一些建议我自己的这些简单的正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:47:16.797

Xeger 是开源的。您可以浏览他们的代码库以获取想法。

编辑：

他们的代码库看起来很小，所以不应该太难。它只生成将匹配的随机字符串，而不是所有字符串。不过，这仍然是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:53:58.733

我创建了[Debuggex](http://www.debuggex.com)，它生成随机字符串，让您了解正则表达式的作用。

如果您的正则表达式已经有了解析树，则可以使用以下逻辑生成随机匹配：

```
OrTree.random:
    Choose a child randomly, return its random()

ConcatTree.random:
    For every child, call random()
    Return the concatenation of all the results

RepeatTree.random:
    Choose a valid random number of repetitions within min and max
    Call random() on your child that many times
    Return the concatenation of all the results

Literal.random:
    Return the literal 
```

即使使用`*`运算符，也可以生成随机字符串。这是通过选择从 0 到无穷大的分布来生成数字来完成的，就像您对有限集使用均匀分布一样。例如：

```
InfiniteRepeatTree.random:
    Flip a coin until I get tails
    Call random on child() the number of times that the coin landed heads
    Return concatenation of the results 
```

希望有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T18:48:04.067

```
char[] vowels = new char[] {'a','e','i','o','u'};
for (int i = 1; i <= 3; i++) {
    for (int j = 0; j < vowels.length; j++) {
         for (int k = 0; k < i; k++) {
             System.out.print("g");
         }
         System.out.println(vowels[j]);
    }
} 
```

不是通用解决方案，但它适用于您的具体示例

# python - python 3和tkinter状态栏中的数字时钟

> ID：15689667
> 
> 赞同：0
> 
> 时间：2013-03-28T18:36:41.290
> 
> 标签：python, tkinter, statusbar, clock

我想把这个数字时钟：

```
import sys    
from tkinter import *
import time

root = Tk()
time1 = ''
clock = Label(root, font=('times', 20, 'bold'), bg='green')
clock.pack(fill=BOTH, expand=1)

def tick():
    global time1
    # get the current local time from the PC
    time2 = time.strftime('%H:%M:%S')
    # if time string has changed, update it
    if time2 != time1:
        time1 = time2
        clock.config(text=time2)
        # calls itself every 200 milliseconds
        # to update the time display as needed
        # could use >200 ms, but display gets jerky
    clock.after(200, tick)

tick()
root.mainloop(  ) 
```

在此状态栏中：

```
status = Label(mGui, text="v1.0", bd=1, relief=SUNKEN, anchor=W)
status.pack(side=BOTTOM, fill=X) 
```

有没有办法做到这一点？感谢所有想要帮助的人，我很感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-24T10:00:37.357

if 语句是怎么回事？这是不必要的，因为该`clock.after`语句`tick()`直接在`clock.after()`函数内调用，它会更新您的时间字符串。

```
import sys    
from Tkinter import *
import time

def tick():
    # get the current local time from the PC
    time_string = time.strftime('%H:%M:%S')
    # if time string has changed, update it
    clock.config(text=time_string)
    clock.after(200, tick)

root = Tk()
clock = Label(root, font=('times', 20, 'bold'), bg='green')
clock.grid(row=0, column=1) 
tick()
root.mainloop() 
```

另外，请记住在 Python 2.7 中使用`Tkinter`(Capital T)，`tkinter`在 Python 3.0 中使用 (小写 t)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:40:17.043

Tkinter noob here，但我认为您不能将时钟标签放在状态标签内。但是，您可以将它们并排放置：

```
import sys    
from tkinter import *
import time

def tick():
    global time1
    # get the current local time from the PC
    time2 = time.strftime('%H:%M:%S')
    # if time string has changed, update it
    if time2 != time1:
        time1 = time2
        clock.config(text=time2)
        # calls itself every 200 milliseconds
        # to update the time display as needed
        # could use >200 ms, but display gets jerky
    clock.after(200, tick)

root = Tk()
time1 = ''

status = Label(root, text="v1.0", bd=1, relief=SUNKEN, anchor=W)
status.grid(row=0, column=0)

clock = Label(root, font=('times', 20, 'bold'), bg='green')
clock.grid(row=0, column=1) 

tick()
root.mainloop() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T20:15:44.397

通常，我从一个框架中制作一个状态栏，然后打包我想在该框架中显示的任何内容。例如，您的时钟可以装在右侧，而您的状态标签可以装在左侧。然后，您可以将整个状态栏框架放在 GUI 的底部。

通常我更喜欢使用面向对象的样式给出示例，但这里有一个改编自您问题中的代码的示例：

```
import sys    
from tkinter import *
import time

root = Tk()

statusbar = Frame(root)
statusbar.pack(side="bottom", fill="x", expand=False)

time1 = ''
clock = Label(root, font=('times', 20, 'bold'), bg='green')

def tick():
    global time1
    # get the current local time from the PC
    time2 = time.strftime('%H:%M:%S')
    # if time string has changed, update it
    if time2 != time1:
        time1 = time2
        clock.config(text=time2)
        # calls itself every 200 milliseconds
        # to update the time display as needed
        # could use >200 ms, but display gets jerky
    clock.after(200, tick)

tick()

status = Label(root, text="v1.0", bd=1, relief=SUNKEN, anchor=W)
status.pack(in_=statusbar, side=LEFT, fill=BOTH, expand=True)
clock.pack(in_=statusbar, side=RIGHT, fill=Y, expand=False)

root.mainloop(  ) 
```

# django - 如何使用小部件向 Django 中的表单添加属性？

> ID：15689671
> 
> 赞同：1
> 
> 时间：2013-03-28T18:36:53.883
> 
> 标签：django, django-forms, django-widget

我试图让占位符出现在表单字段中，但我的表单字段有问题。有什么想法吗？我有以下课程：

```
class EditField(forms.CharField):
    def __init__(self, *args, **kwargs):
        super(EditField, self).__init__(*args, **kwargs)
        self.widget = forms.Textarea(attrs={'id':'editor'})
        self.label  = _('content')

class EditField_typeA(EditField):
    def __init__(self, *args, **kwargs):
        super(EditField_typeA, self).__init__(*args, **kwargs)
    def clean(self, value):
        if not (len(re.sub('[ ]{2,}', ' ', value)) < settings.FORM_MIN):
            raise forms.ValidationError(_('content must be %s') % settings.FORM_MIN)
        return value

class FinalForm(forms.Form):
    foo  = FooField()
    bar  = BarField()
    text   = EditField_typeA()

    def __init__(self, data=None, user=None, *args, **kwargs):
        super(FinalForm, self).__init__(data, *args, **kwargs)

        ## THIS IS THE PART THAT ISN'T WORKING    
        self.fields['text'].widget.attrs['placeholder'] = 'Fill this in' 

        if int(user.reputation) < settings.CAPTCHA_IF_REP_LESS_THAN and not (user.is_superuser or user.is_staff):
            spam_fields = call_all_handlers('create_anti_spam_field')
            if spam_fields:
                spam_fields = dict(spam_fields)
                for name, field in spam_fields.items():
                    self.fields[name] = field

                self._anti_spam_fields = spam_fields.keys()
            else:
                self._anti_spam_fields = [] 
```

我猜我用错了小部件，或者在错误的地方。找不到小部件文档的正确部分来解释我做错了什么。

# node.js - 对 socket.io 的优势 engine.io

> ID：15689675
> 
> 赞同：1
> 
> 时间：2013-03-28T18:37:02.417
> 
> 标签：node.js, socket.io

我是 node.js 的新手，并使用 socket.io 设置了一个简单的聊天应用程序。我意识到安装的模块和快递需要30MB。engine.io 更苗条吗？它对使用 engine.io 有好处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:40:26.167

Engine.io 更像是 Socket.io 的低级库。如果您想要较低级别的抽象使用引擎，如果您想要 websocket 抽象，请继续使用 socket.io。如果您在 socket.io 之上构建库/框架，Engine.io 对您更感兴趣。与之前的 socket.io 内核不同，它总是首先建立一个长轮询连接，然后尝试升级到更好的传输方式，这些传输方式在侧面经过“测试”。Engine 的主要目标是确保最可靠的实时通信。与之前的 socket.io 核心不同，它依赖于 HTML5 websockets 和 Flash socket 作为第一个通信机制。您也可以使用它来设置 socket.io 中的顺序

```
io.set('transports', [ 'websocket', 'xhr-polling' ]); 
```

IE、Android < 4.0 和不是每个 IOS 都不支持 WebSocket，因此最好将其回退到 XHR 轮询。

[http://caniuse.com/#search=websockets](http://caniuse.com/#search=websockets)

Android 有 Java 库，可以包含这些库以使 websockets 在 Android 2.3 上运行，但运行速度相当慢。

# opencv - opencv: Mat2.copyTo(Mat1(Rect)) 只为复制区域提供灰度

> ID：15689679
> 
> 赞同：1
> 
> 时间：2013-03-28T18:37:25.377
> 
> 标签：opencv, grayscale, yuv, mat

我正在尝试将图像覆盖在android（本机部分，.cpp）中的视频帧上。我以yuv420sp格式获取我的视频帧，我将这个char *（缓冲区）传递给opencv，然后我用它创建了一个MAT

```
 Mat frame(Size(width,height),8UC1,buff); 
```

同样，我将图像加载到 char *(buffer) 中，转换为 yuv420SP，并以类似的方式创建图像 Mat：

```
Mat imageMat((Size(width,height),8UC1,imgBuff)); 
```

在此之后，我将覆盖图像复制到我收到的视频帧上：

```
Rect roi(X,Y,U,V);
imageMat.copyTo(frame(roi)); 
```

我需要相同 yuv420sp 格式的合并帧，所以在这里我返回：

```
return frame.data;//i am returning char * from this api to my .cpp file 
```

图像叠加正确，但问题是只有叠加部分是灰度的，其余全帧颜色正确！我只是不明白出了什么问题！

注意：我尝试了一些已经喜欢的东西：1.我通过以下方式转换了东西（框架和图像）：

```
cvtColor(frame,frame,CV_COLOR_yuv420sp2BGR); 
```

但我只想以 yuv420sp 格式回复，并且没有这样的标志可以将其转回 yuv420sp。

2.用 8UC3 试过，真的没有任何区别。无论如何，我的视频帧是彩色的，那为什么图像是灰度的？

真的卡在这里了！任何建议都会非常有帮助！

# eclipse - Eclipse - 安装 JDT 插件后菜单中没有“java 项目”

> ID：15689686
> 
> 赞同：0
> 
> 时间：2013-03-28T18:37:57.910
> 
> 标签：eclipse, eclipse-jdt

我在 OpenSuse 上使用 Eclipse for C/C++ 并安装了 JDT 插件。Eclipse 显示一切正常，但在菜单“File->New->Project”中没有“Java Project”项。出了点问题还是我应该更改 Eclipse 中的某些选项？

# symfony - 带有参数 url 创建的 symfony2 树枝路径

> ID：15689688
> 
> 赞同：37
> 
> 时间：2013-03-28T18:38:01.513
> 
> 标签：symfony

我得到以下信息：

```
<a href="{{ path('_be_activatecategory', {'id': category.id, 'active': 1}) }}">Aktivieren</a> 
```

创建

> /后端/类别/激活/8/1

然后我得到了

```
<a href="{{ path('_category', {'id': category.id}) }}"> 
```

这创造了

> /category?id=1

看到不同？我想要的是在第二种情况下与第一种情况完全相同：

> /类别/1

我该如何管理？为什么 path() 助手没有为我创建带有参数的正确 url？

**编辑：**

我的路由如下所示：

```
/**
 * @Route("/category/{id}", name="_category")
 * @Template()
 */
public function categoryAction($id)
{ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T18:44:54.637

确保您的`routing.yml`文件已`'id'`在其中指定。换句话说，它应该看起来像：

```
_category:
    path: /category/{id} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T18:40:17.720

`active`设置路由中参数的默认值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-10-06T09:28:14.020

在树枝中：

```
{% for l in locations %}

<tr>
    <td>
        <input type="checkbox" class="filled-in" id="filled-in-box-{{ l.idLocation }}" />
        <label for="filled-in-box-{{ l.idLocation }}"></label>
    </td>
    <td>{{ l.loc }}</td>
    <td>{{ l.mun }}</td>
    <td>{{ l.pro }}</td>
    <td>{{ l.cou }}</td>
    {#<td>
        {% if l.active == 1  %}
            <span class="fa fa-check"></span>
        {% else %}
            <span class="fa fa-close"></span>
        {% endif %}
    </td>#}
    <td><a href="{{ url('admin_edit_location',{'id': l.idLocation}) }}" class="db-list-edit"><span class="fa fa-pencil-square-o"></span></a>
    </td>
</tr>{% endfor %} 
```

路线`admin_edit_location`：

```
admin_edit_location:
  path: /edit_location/{id}
  defaults: { _controller: "AppBundle:Admin:editLocation" }
  methods: GET 
```

和控制器

```
public function editLocationAction($id){
    // use $id 

    $em = $this->getDoctrine()->getManager();
    $location = $em->getRepository('BackendBundle:locations')->findOneBy(array(
    'id'    => $id
    ));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-12T17:30:02.553

```
/**
 * @Route("/category/{id}", name="_category")
 * @Route("/category/{id}/{active}", name="_be_activatecategory")
 * @Template()
 */
public function categoryAction($id, $active = null)
{ .. } 
```

五月有效。

# symfony - 是否可以在不创建新功能的情况下扩展现有的 Twig（在 Symfony 2 中）功能？

> ID：15689689
> 
> 赞同：2
> 
> 时间：2013-03-28T18:38:04.657
> 
> 标签：symfony, twig

是否可以在不创建新功能的情况下扩展 Twig (Symfony2) 功能？

因此，如果我想扩展 'url' 或 'path' Twig 函数，我可以这样做吗？

我看不出这是可能的，我认为唯一的选择是创建我自己的函数。

所以一个简单的，“不，你必须创建自己的函数”或“是的，这是可能的”就可以了（也许是一个链接，因为我在任何地方都看不到如何做到这一点）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:43:46.673

是的，我很确定您可以扩展现有功能。我没有对此进行测试，但我认为它应该可以工作。

例如 Twig 的 Symfony2 路由器扩展：

创建您自己的扩展和更改功能的类：

```
Symfony\Bridge\Twig\Extension\RoutingExtension 
```

将 twig.extension.routing.class 与创建的类命名空间一起放入您的 paramters.yml 以覆盖它

```
parameters:
    # [ ... ]
    twig.extension.routing.class: Company\Bundle\MyBundle\Twig\Extension\RoutingExtension 
```

# php - PHP：一个类作为另一个类中的成员

> ID：15689690
> 
> 赞同：0
> 
> 时间：2013-03-28T18:38:06.903
> 
> 标签：php, oop

在我的 PHP 项目中，我有 2 个名为`User`&的类`Category`，如下所示。

```
class User{
    public $Id;
    public $Name;
    public $Category;   
}

class Category{
    public $CategoryId;
    public $CategoryName;
} 
```

我的要求是在检索数据时同时包含`CategoryId`& 。`CategoryName``$Category``User`

因此，当我访问 a 时，`User - object`我可以获得用户的`CategoryId`& `CategoryName`。

谢谢。

**更新**

如何自动化这个过程？当我想`User`从数据库加载一个时，我希望它**自动**`User`加载它的`Category`详细信息。

 **当我加载`User`s 的集合（或数据库中的所有用户）时，我希望所有用户都加载他们自己的类别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:45:12.160

当然，您可以在的成员中存储一个`Category`对象：`User``$category`

```
$user = new User;
$cat = new Category;

$cat->categoryId = 42;
$cat->categoryName = "Meaning of Life";

$user->category = $cat;

//access
echo $user->category->categoryName; //Meaning of Life 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T06:58:19.077

这是我想要的解决方案。

```
// user.php
<?php
require_once 'category.php';

class User{
    public $Id;
    public $Name;
    public $Category;   

    public function __construct(){
        $this->Category=Category::getCategory($this->Id);       
    }
}
?>

// category.php
<?php
class Category{
    public $CategoryId;
    public $CategoryName;

    public static function getCategory($UserId){
        $Category = //PDO operations;
        return $Category;
    }
}
?> 
```

感谢所有回复的人。**

# regex - Cake模型验证中的正则表达式

> ID：15689692
> 
> 赞同：0
> 
> 时间：2013-03-28T18:38:15.030
> 
> 标签：regex, validation, cakephp, cakephp-2.1

我需要以 XXXXXX-XXXX 格式验证社会保险号（每个 X 代表一个数字；6 位后跟连字符后跟 4 位数字）

这是我用于验证的内容。

```
'rule' => array('custom', '/[0-9]{6}\-[0-9]{4}/') 
```

但是，这并没有按预期工作。它在连字符之前和之后都接受任何长度的数字，但它应该只验证下面提到的模式。

```
123456-7898
675443-8765 
```

不应该匹配，

```
12345677-876
1233-976655
123455-987
12345-08765 and so on ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:39:42.363

您需要在模式中包含字符串开头和结尾的锚点

```
/^[0-9]{6}-[0-9]{4}$/ 
```

# android - 如何在我的应用程序中使用法语字符实现键盘

> ID：15689694
> 
> 赞同：1
> 
> 时间：2013-03-28T18:38:18.970
> 
> 标签：android

我正在开发一个法语动词共轭应用程序，我需要实现一个特殊的键盘，它用常见的重音键替换通常的“向下拖动”操作，如果按住的话，字母的重音会更多。我不需要键盘上的**任何**其他字符，该应用程序只处理字母（不是偶数）。

但是我不知道如何去实现它......对于应用程序来说，用户可以访问特殊字符非常重要，没有它们我*真的*做不了很多。

有人对我如何设置内部使用的键盘有任何想法吗？

PS我环顾四周，没有找到任何回答我正在寻找的问题，如果我错过了，对不起！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:14:04.440

如果您不想做自己的输入法，而只想为您的应用程序提供键盘，这里有一个教程（不幸的是意大利语）[链接] [http://www.anddev.it/index.php/topic,3956.0 .html](http://www.anddev.it/index.php/topic,3956.0.html) 和 gitHub 上的项目在这里 [链接] [https://github.com/rciovati/Android-KeyboardView-Example](https://github.com/rciovati/Android-KeyboardView-Example) 我认为这正是你要找的:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:31:00.107

我以前没有这样做过，但是如果您想创建自定义输入法，例如键盘，Android 有一些文档here。

[http://developer.android.com/guide/topics/text/creating-input-method.html](http://developer.android.com/guide/topics/text/creating-input-method.html)

希望有帮助。

# java - 在 Java Jersey 资源中获取 POST JSON 时出错

> ID：15689697
> 
> 赞同：0
> 
> 时间：2013-03-28T18:38:29.033
> 
> 标签：java, rest, jersey, marshalling, unmarshalling

我无法让 Jersey RESTful 服务正常工作。

我收到以下错误

```
 The server encountered an internal error () that prevented it from fulfilling this request.

exception

java.lang.NullPointerException
    org.eclipse.persistence.internal.oxm.record.SAXUnmarshaller.unmarshal(SAXUnmarshaller.java:806)
    org.eclipse.persistence.oxm.XMLUnmarshaller.unmarshal(XMLUnmarshaller.java:602)
    org.eclipse.persistence.jaxb.JAXBUnmarshaller.unmarshal(JAXBUnmarshaller.java:399)
    com.sun.jersey.json.impl.BaseJSONUnmarshaller.unmarshalJAXBElementFromJSON(BaseJSONUnmarshaller.java:111)
    com.sun.jersey.json.impl.BaseJSONUnmarshaller.unmarshalFromJSON(BaseJSONUnmarshaller.java:100)
    com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider.readFrom(JSONRootElementProvider.java:129)
    com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.readFrom(AbstractRootElementProvider.java:111)
    com.sun.jersey.spi.container.ContainerRequest.getEntity(ContainerRequest.java:488)
    com.sun.jersey.server.impl.model.method.dispatch.EntityParamDispatchProvider$EntityInjectable.getValue(EntityParamDispatchProvider.java:123)
    com.sun.jersey.server.impl.inject.InjectableValuesProvider.getInjectableValues(InjectableValuesProvider.java:46)
    com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$EntityParamInInvoker.getParams(AbstractResourceMethodDispatchProvider.java:153)
    com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:183)
    com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)
    com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1511)
    com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1442)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1391)
    com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1381)
    com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
* Closing connection #0 
```

服务是：

```
@Path("/agents")
public class AgentService {

    @POST 
    @Consumes({MediaType.APPLICATION_JSON + ";charset=utf-8"})
    @Produces(MediaType.APPLICATION_JSON + ";charset=utf-8")
    public String createAgent(AgentTO input) {
        try{
//          Agent agent = input.createAgent()
//          PersistenceService.getInstance().save(agent);
            return input.getName();
        } catch (Exception se) {
            se.printStackTrace();
        }
        return null;
    } 
```

这是我想要收到的对象：

```
@XmlRootElement
public class AgentTO {

    private String name;
    private String phone;

    public AgentTO(){}

    public AgentTO(String phone, String name){
        this.phone = phone;
        this.name = name;               
    } 
```

我正在做这样的POST：

```
curl -H "Content-Type: application/json" -v -X POST -d '{"phone":"123","name":"asd2"}' http://127.0.0.1:8080/project/agents 
```

我之前制作的资源就像这个一样，但这似乎不想工作：P

你能帮我解决这个问题吗？

问候，马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-13T09:38:09.660

您可以使用 Gson 从正文请求中解组 JSON。请[在此处查看](https://stackoverflow.com/questions/39846250/post-json-in-body-request-with-jersey)。

# spring - Maven surefire 测试在 Spring 框架项目中失败

> ID：15689703
> 
> 赞同：1
> 
> 时间：2013-03-28T18:38:50.597
> 
> 标签：spring, maven, junit, surefire

Maven 无法成功运行我的 JUnit 测试，尽管它们在我的 Eclipse 上运行没有任何问题。我无法从调试消息中解决它。

这可能与 Spring 配置有关，因为我的其他不依赖 Spring 的 JUnit 测试工作正常。

[将](https://stackoverflow.com/a/9825309/640378)surefire 插件 forkMode 添加为 Always 也不起作用。

### Maven 输出

> > mvn install ... ... [INFO] --- maven-surefire-plugin:2.10:test (default-test) @ AppServer --- [INFO] Surefire 报告目录：C:..\surefire-reports
> 
> 运行 com.ws.impl.BrowserServiceImplTest 测试运行：2，失败：2，错误：0，跳过：0，经过时间：0.016 秒 <<< 失败！
> 
> 测试失败：com.ws.impl.BrowserServiceImplTest.testGetStatuses()
> com.ws.impl.BrowserServiceImplTest.testGetSellers()

### 测试班

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:test-context.xml")
public class BrowserServiceImplTest {

    @Autowired
    private BrowserServiceImpl browserServiceImpl;

    @Test
    public void testGetStatuses() {
        // test code
    }
        // more code
} 
```

### 万无一失的报告

```
<failure type="java.lang.NullPointerException">java.lang.NullPointerException
    at com.ws.impl.BrowserServiceImplTest.testGetStatuses(BrowserServiceImplTest.java:48)
</failure> 
```

## 编辑

第 48-49 行

```
List<String> statuses = browserServiceImpl.getStatuses();
assertEquals(12, statuses.size()); 
```

## 编辑 2

测试上下文.xml

```
<bean id="browserSvc" class="com.ws.impl.BrowserServiceImpl">
    <property name="filterOptionsService" ref="filterOptionsService" />
</bean> 
```

BrowserServiceImpl.java

```
@WebService(targetNamespace = "http://abc.def.com", portName = "BrowserPort", serviceName = "BrowserService")
public class BrowserServiceImpl implements BrowserService {

    private FilterOptionsService filterOptionsService;

        // more code
} 
```

# python - 在使用 pybrain 训练以逼近函数的网络中，输出始终相等

> ID：15689704
> 
> 赞同：3
> 
> 时间：2013-03-28T18:38:58.833
> 
> 标签：python, neural-network, pybrain

使用下面的代码：

```
tf = open('defl_07h.csv','r')

for line in tf.readlines():
    data = [float(x) for x in line.strip().split(';') if x != '']
    indata =  tuple(data[:1])
    outdata = tuple(data[1:])
    ds.addSample(indata,outdata)

net = buildNetwork(ds.indim,20,ds.outdim,recurrent=True)
t = BackpropTrainer(net,learningrate=0.01,momentum=0.5,verbose=True)
t.trainOnDataset(ds,10)
t.testOnData(verbose=True) 
```

得到相同的输出如下：

**出：[3.479]** 正确：[11.86] 错误：35.12389858 **出：[3.479]** 正确：[12.1] 错误：37.16423359 **出：[3.479]** 正确：[12.28] 错误：38.73228485

然后创建了网络结构：

```
Module: in
-connection to hidden0
- parameters [-1.9647867  -0.41898579 -0.24047698  0.6445537   0.06084947 -3.17343892
  0.25454776 -0.45578641  0.70865416 -0.40517853 -0.22026247 -0.13106284
 -0.71012557 -0.61140289 -0.00752148 -0.61770292 -0.50631486  0.95803659
 -1.07403163 -0.87359713]
Recurrent connections
Module: bias
-connection to out
- parameters [ 0.55130311]
-connection to hidden0
- parameters [-0.31297409 -0.2182261  -0.70730661 -1.65964456 -0.18366456  0.52280203
 -0.03388935  0.61288256  2.49908814  0.53909862 -0.56139066  0.06752532
 -0.71713239 -1.4951833   0.84217369  0.16025118  0.01176442 -0.59444178
  0.85652564  1.60607469]
Recurrent connections
Module: hidden0
-connection to out
- parameters [ 1.00559033 -0.02308752 -2.51970163  0.39714524  0.33257302 -0.6626978
 -0.53004298 -1.0141971  -0.95530079 -0.66953093 -0.00438377 -1.1945728
  0.99363152 -1.17032002  0.03620047 -0.21081934  0.2550164  -1.65894533
  0.20820361 -1.38895542]
Recurrent connections
Module: out
Recurrent connections 
```

错误可能在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-08T23:07:36.657

我发现您的代码示例存在一些问题，它们导致您的网络没有学到任何有意义的东西。以下是您的代码的一些问题：

1.  您的数据未标准化！神经网络对输入其中的数据范围很敏感。在您的情况下，当您的输入和目标应在 -1,1 或 0,1 范围之间进行归一化时（取决于您使用的是 Tanh 还是 Sigmoid），您提供了一个最小值为 ~2500 和最大值为 ~36000 的范围.
2.  您选择`BackpropTrainer`的通常需要训练超过 10 个 epoch。尝试 100 或 1000。（或尝试`RPromMinusTrainer`，我个人喜欢。）

这两个问题都导致您的网络只学会吐出一个值。

我稍微更改了您的代码以包含规范化和`RPropMinusTrainer`相当数量的迭代（RProp-需要更少的时期）：

```
from pybrain.supervised.trainers import *
from pybrain.tools.shortcuts import buildNetwork
from pybrain.datasets import SupervisedDataSet, SequentialDataSet
from pybrain.structure import RecurrentNetwork
from pybrain.structure import TanhLayer
import numpy as np

ds = SupervisedDataSet(1, 1)

tf = open('defl_07h.csv','r')

for line in tf.readlines():
    data = [float(x) for x in line.strip().split(';') if x != '']
    indata =  tuple(data[:1])
    outdata = tuple(data[1:])
    ds.addSample(indata,outdata)

i = np.array([d[0] for d in ds])
i /= np.max(np.abs(i),axis=0)
o = np.array([d[1] for d in ds])
o /= np.max(np.abs(o),axis=0)

nds = SupervisedDataSet(1, 1)
for ix in range(len(ds)):
    nds.addSample( i[ix], o[ix])

# train with normalized
net = buildNetwork(nds.indim,5,nds.outdim,recurrent=True)
t = RPropMinusTrainer(net,verbose=True)
t.trainOnDataset(nds,30)
t.testOnData(nds, verbose=True) 
```

我得到以下输出：

```
out:     [  0.234]
correct: [  0.168]
error:  0.00217289
out:     [  0.209]
correct: [  0.168]
error:  0.00083736
...
out:     [  0.986]
correct: [  0.914]
error:  0.00258013
out:     [  1.006]
correct: [  0.916]
error:  0.00405199
out:     [  0.985]
correct: [  0.924]
error:  0.00187248 
```

不完美，但预测随着实际标准化值的增加而增加，就像您的原始（预标准化）数据一样。

PS：我知道这是一个老问题，但我过去曾遇到过这个问题，并认为它可能会对某些人有所帮助。因此，如果您在 NN 战壕中无处可去，请记住问自己：我的神经网络是否期待标准化数据？我训练够了吗？

# java - 如何将由方法创建的 JPanel 添加到 cardLayout.add();

> ID：15689707
> 
> 赞同：0
> 
> 时间：2013-03-28T18:39:09.770
> 
> 标签：java, swing, jframe, jpanel, cardlayout

下面是我的 guiFrames 用户类。我想要一个用方法创建几个 JFrame 并将这些方法传递给 cardLayout 的类。这样做的原因是每个 JFrame 将根据用户选择的内容显示不同的按钮。

所以，我想我会为各个面板创建方法，并根据传递的参数显示不同的按钮。我需要将面板显示在 cardLayout 中。但我无法将传递方法传递给 cardLayout.add(); 因为它说方法类型无效。所以我试图让该方法返回一个组件，但它没有成功。请帮忙。

```
 import javax.swing.*;
import java.awt.*;

public class guiFrames extends JFrame{

  public guiFrames(){
  }

  public Component inputFrame(){
    JFrame inputFrame = new JFrame("Input");

    JPanel inputPnl = new JPanel();
    inputPnl.setLayout(new GridLayout(3,2));

    JLabel loginLbl = new JLabel("Login");
    inputPnl.add(loginLbl);
    JTextField loginTxt = new JTextField();
    inputPnl.add(loginTxt);
    JLabel pwLbl = new JLabel("Password");
    inputPnl.add(pwLbl);
    JTextField pwTxt = new JTextField();
    inputPnl.add(pwTxt);

    JPanel buttonPnl = new JPanel();
    buttonPnl.setLayout(new FlowLayout(FlowLayout.LEFT, 1,5));

    JButton submit = new JButton("Submit");
    buttonPnl.add(submit);
    JButton output = new JButton("Output");
    buttonPnl.add(output);

    JPanel container = new JPanel();
    container.setLayout(new BorderLayout());
    container.add(inputPnl, BorderLayout.CENTER);
    container.add(buttonPnl, BorderLayout.SOUTH);

    inputFrame.add(container);
    inputFrame.pack();
    inputFrame.setVisible(true);
    inputFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    return;
  }

  public void cardView(){
        JFrame cardFrame = new JFrame();
        JPanel cardGUI = new JPanel();
        CardLayout cards = new CardLayout();
        cardGUI.setLayout(cards);
        cardGUI.add(inputFrame(), "first");

        cardFrame.add(cardGUI, BorderLayout.CENTER);
        cardFrame.pack();
        cardFrame.setVisible(true);
        cardFrame.setDefaultCloseOperation(cardFrame.EXIT_ON_CLOSE);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:46:05.443

在 inputFrame() 结束时，您不会返回任何内容。您需要返回 inputFrame，如下所示：

```
return inputFrame; 
```

希望有帮助。

# java - 连接重置期间 DBConnectionPool 的行为方式

> ID：15689709
> 
> 赞同：1
> 
> 时间：2013-03-28T18:39:23.043
> 
> 标签：java, jdbc, database-connection, connection-pooling

在我们的项目中，我们正在维护自己的数据库连接池。
为了解决这个问题`'java.sql.SQLRecoverableException: Io exception`，大多数人建议使用标准连接池，如 apache dbcp。

*   我想知道那些标准池机制在连接重置期间将执行的逻辑是什么？
*   DBConnectionPool 如何知道数据库连接超时？因为我们知道 conn.isClosed() 在这里无济于事。
*   是否每个数据库连接都会有一个与数据库服务器的 tcp 客户端套接字？
*   最后是可取的吗？每当我将连接返回到池时；池应该关闭连接；如果连接存在超过约 10 分钟，则返回？[~10 分钟服务器端连接超时变量]

请回答我所有的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:43:32.433

我正在回答这个问题，假设您通过使用 、 和 类来使用 Apache DBCP`org.apache.commons.pool.impl.GenericObjectPool`进行`org.apache.commons.dbcp.DataSourceConnectionFactory`连接`org.apache.commons.dbcp.PoolableConnectionFactory`池`org.apache.commons.dbcp.PoolingDataSource`。

*   我想知道那些标准池机制在连接重置期间将执行的逻辑是什么？ **如果`GenericObjectPool.testOnBorrow`和设置为 true ，则将使用 in 中的集合`GenericObjectPool.testOnReturn`验证连接是否处于活动状态。如果验证失败，则删除 Connection 对象并创建新对象并将其添加到池中`validationQuery``PoolableConnectionFactory`**
*   DBConnectionPool 如何知道数据库连接超时？因为我们知道 conn.isClosed() 在这里无济于事。**与上述机制相同**
*   是否每个数据库连接都会有一个与数据库服务器的 tcp 客户端套接字？**是的**
*   最后是可取的吗？每当我将连接返回到池时；池应该关闭连接；如果连接存在超过约 10 分钟后创建？[~10 分钟服务器端连接超时变量]**如果您认为它不应该产生不必要的网络流量，并且如果您有特殊理由这样做。你能行的。通过设置`minEvictableIdleTimeMillis`以及是否要根据空闲时间`GenericObjectPool`删除`timeBetweenEvictionRunsMillis`**

# c++ - Setter/getter 和分层数据结构

> ID：15689712
> 
> 赞同：4
> 
> 时间：2013-03-28T18:39:40.010
> 
> 标签：c++

我知道在课堂上设置公共字段被认为是个坏主意。但是，当您的类包含大量分层数据结构和字段时，最好的方法是什么？例如：

```
class A {B d1; C d2; D d3;}
class B {E d4; F d5;}
class E {G d6; int d7;} 
```

在 C 语言中，访问这样的数据结构非常容易，例如 ptr_to_A->d1.d4.d7 等等……但是当我们使用 setter/getter 时，方法是什么？

在 C++ 中使用 setter 和 getter 时，像 A.get_d1().get_d4().get_d7() 这样的表达式似乎并不方便，它们会强制返回引用。由于某些结构非常大，按值返回似乎是一个糟糕的主意。

在这些情况下，您使用哪种方法或编码风格？也许摆脱 setter/getter 并将这些字段公开？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T18:52:44.103

> 我知道在课堂上设置公共字段被认为是个坏主意。

这是来自过去十年 Java 开发的全面声明。您应该在逐个成员的基础上考虑成员应该是公共的还是私有的。有时公共数据成员是正确的想法。考虑以下问题：

1.  我需要维护这个成员的不变量吗？
2.  这个成员可以有一个无效的值吗？
3.  我是否希望界面提供此成员的替代表示？

如果上述任何问题的答案都是肯定的，那么您可能想要使用 getter。

还要考虑单独设置成员是否真的有意义。也许您应该使用构造函数设置成员，并且您想提供一些其他接口来修改这些成员。

> 在 C++ 中使用 setter 和 getter 时，像 A.get_d1().get_d4().get_d7() 这样的表达式似乎不太方便

虽然具有相当深的数据结构嵌套并不少见，但通常不应该深入研究特定的一段代码。如果是这样，我想它可能做得比它应该做的更多，超出了它的单一职责。但是，如果`d7`从`A`对象获取是一项常见任务，也许`A`应该在其接口中公开它：

```
int A::get_d7 {
  return get_d1().get_d4().get_d7();
} 
```

> 由于某些结构非常大，按值返回似乎是一个糟糕的主意。

实际上，对于现代 C++，这根本不是问题。按值传递应被视为对象传递的默认模式。这是因为现在可以移动临时对象，这本质上是一种非常有效的复制形式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T18:51:22.327

在我的编码风格中，一个类不应该公开公共的“原始”数据成员，而应该只公开 getter 和 setter（即使它们是简单的单行方法）。

这是因为以后代码可以升级，单行方法可以扩展成更复杂的东西（或者可以添加一些debug-only build的特性来检查一些不变量等），所以最好保留与客户端一致的接口（如果您公开“原始”数据成员，这是不可能的）。

您可以避免使用`get_()`前缀，而只需将数据成员视为具有简单（不带`get_...`）名称的“属性”，例如

```
class Shape
{
public:
  ....

  COLORREF Color() const // Just Color() i.e. the property name, without get_...
  {
     return m_color;
  }

private:
  COLORREF m_color;
}; 
```

并编写如下客户端代码：

```
Shape s;
COLORREF someColor = s.Color(); 
```

这对我来说看起来不错。

对于 setter，您可以使用如下语法：

```
Shape& Color(COLORREF color)
{
    m_color = color;
    return *this;
} 
```

并编写如下客户端代码：

```
Shape s;
s.Color(...).Draw(); // set color and draw shape 
```

`COLORREF`如果属性的类型比 a （它是 32-bit ）更复杂`DWORD`，您可以使用如下模式：

```
std::wstring Name() const // getter
{
    return m_name;
}

Shape& Name(std::wstring name) // setter
{
    // Pass by value and move from the value (C++11 move semantics)
    m_name = std::move(name);

    return *this;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T18:51:14.053

如果您只是将类用作纯数据结构，并且没有与您要封装的数据相关的*行为*`struct`，那么请改用 a并直接访问字段。[Bjarne Stroustrup 推荐这种方法](http://www.artima.com/intv/goldilocksP.html)。这相当于使用 a`class`并将所有成员声明为`public`，但将其称为 a`struct`可以更清楚地表明它只不过是简单的数据集合。

如果您做的不仅仅是存储数据，那么请使用 getter 和 setter。

> 在 C++ 中使用 setter 和 getter 时，像 A.get_d1().get_d4().get_d7() 这样的表达式似乎并不方便，它们会强制返回引用。由于某些结构非常大，按值返回似乎是一个糟糕的主意。

不，您可以选择是按引用返回还是按值返回。

# java - 如果那些不在公共存储库中，如何向 Maven 项目提供工件？

> ID：15689715
> 
> 赞同：1
> 
> 时间：2013-03-28T18:39:50.290
> 
> 标签：java, maven, jar

我从 Github 克隆了一个开源库项目，我想将其用于我自己的 Java 项目。该库依赖于其他一些在任何公共存储库中都找不到的 jar。这会导致`mvn package`失败：

```
[ERROR] Failed to execute goal on project commons-gdx-core: 
Could not resolve dependencies for project 
com.gemserk.commons.gdx:commons-gdx-core:jar:0.0.11-SNAPSHOT: 
The following artifacts could not be resolved: 
com.badlogic.gdx:gdx:jar:0.9.8-SNAPSHOT, 
com.gemserk.animation4j:animation4j-core:jar:0.2.2-SNAPSHOT,
com.gemserk.vecmath:vecmath:jar:1.5.3-GEMSERK: 
Could not find artifact com.badlogic.gdx:gdx:jar:0.9.8-SNAPSHOT -> [Help 1] 
```

我想我可以从其他来源获得这些罐子，但我不知道如何告诉 maven 在哪里寻找它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:56:59.833

使用存储库和存储库标签指向您的 pom 文件中的私有存储库或以相同的方式更新您的 settings.xml。一旦你告诉它去哪里看，Maven 就会下载这些工件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T19:06:51.423

例如，我们有 Oracle JDBC 驱动程序。您必须将其安装到本地 Maven 存储库中。

1.  将您的库下载到本地文件夹（即：Path/to/private/library.jar）
2.  mvn install:install-file -Dfile= -DgroupId= -DartifactId= -Dversion= -Dpackaging=jar

或者，更高级的方法是，如果您有一个 Maven 存储库（如 Sonatype Nexus），您可以将它部署在存储库上并将其映射到您的项目中。但是，我认为您需要第一个选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T02:00:42.863

alast 和 Chris 的回答都是正确的。但是如果你改变你的计算机或清理你的本地存储库，你的项目仍然无法编译。我建议使用系统依赖项并在 git 版本控制下添加 jar。[这是](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#System_Dependencies)一个例子。

# sql - 带有“with”子句的 T_SQL 函数

> ID：15689717
> 
> 赞同：1
> 
> 时间：2013-03-28T18:39:54.163
> 
> 标签：sql, tsql, function, sql-server-2008-r2

我想知道为什么我不能创建以下 T-SQL 函数：

```
CREATE FUNCTION DaysIncarceratedInYear
--Requires a Patient ID and a year
-- will return the number of days the patient was incarcerated for the year

--incarcerated is stored in a flowsheet
-- the FlowdataID are:
--                Incarceration Start Date:  'ZZZZZ00071
--                Incarceration End Date  :  'ZZZZZ00072'

(
@PID varchar(10),
@YEAR int
)

RETURNS int

--DECLARE @PID varchar(10)
--DECLARE @YEAR int
--set @PID = 'ZZZZZ000L6'
--set @YEAR =2012

AS
BEGIN
declare @R int

SELECT @R = Numdays from (
                ;with startdates as
                (
                SELECT
                dbo.View_PatientFlowValue.FlowValue_Value as val,
                ROW_NUMBER() OVER(ORDER BY dbo.View_PatientFlowValue.FlowValue_Value) AS RowNumber
                FROM dbo.View_PatientFlowValue
                WHERE dbo.View_PatientFlowValue.FlowData_ID = 'ZZZZZ00071' 
                AND dbo.View_PatientFlowValue.FlowValue_RecordState<>1
                AND Patient_ID = @PID

                )
                ,enddates as
                (
                SELECT
                dbo.View_PatientFlowValue.FlowValue_Value val,
                ROW_NUMBER() OVER(ORDER BY dbo.View_PatientFlowValue.FlowValue_Value) AS RowNumber
                FROM dbo.View_PatientFlowValue
                WHERE dbo.View_PatientFlowValue.FlowData_ID = 'ZZZZZ00072' 
                AND dbo.View_PatientFlowValue.FlowValue_RecordState<>1
                AND Person_ID = @PID

                )

                Select sum(DATEDIFF(d,CalcStart, CalcEnd)) as NumDays

                from (
                        select 
                            case 
                                when DATEDIFF(d, cast(str(@YEAR*10000+1*100+1) as date), s.val) < 1 then '1/1/' + str(@YEAR)
                                else s.val
                            end As CalcStart,
                            ISNULL(e.Val, cast(str((@YEAR+1)*10000+1*100+1) as date)) as CalcEnd,
                        s.val as realstart, e.val as realend
                        FROM StartDates s
                        LEFT OUTER JOIN EndDates e ON s.RowNumber = e.RowNumber
                    ) accountforyear 

        ) 

return @R
END
GO 
```

它指出“;”附近的语法不正确 ，但如果我采用“;” 出来，它告诉我关键字“with”附近的语法不正确。这里的正确语法是什么？

此查询独立工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:43:37.650

我从未将 CTE 视为子查询。

尝试重写为

```
;
with startdates as
(
   ... copy everything

)
Select @R = sum(DATEDIFF(d,CalcStart, CalcEnd))
FROM ...

return @R 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T18:43:28.493

您需要将`with`语句放在`select`：

```
 with startdates as
        (
        SELECT
        dbo.View_PatientFlowValue.FlowValue_Value as val,
        ROW_NUMBER() OVER(ORDER BY dbo.View_PatientFlowValue.FlowValue_Value) AS RowNumber
        FROM dbo.View_PatientFlowValue
        WHERE dbo.View_PatientFlowValue.FlowData_ID = 'ZZZZZ00071' 
        AND dbo.View_PatientFlowValue.FlowValue_RecordState<>1
        AND Patient_ID = @PID

        )
        ,enddates as
        (
        SELECT
        dbo.View_PatientFlowValue.FlowValue_Value val,
        ROW_NUMBER() OVER(ORDER BY dbo.View_PatientFlowValue.FlowValue_Value) AS RowNumber
        FROM dbo.View_PatientFlowValue
        WHERE dbo.View_PatientFlowValue.FlowData_ID = 'ZZZZZ00072' 
        AND dbo.View_PatientFlowValue.FlowValue_RecordState<>1
        AND Person_ID = @PID

        )

        Select @R = sum(DATEDIFF(d,CalcStart, CalcEnd)) as NumDays

        from (
                select 
                    case 
                        when DATEDIFF(d, cast(str(@YEAR*10000+1*100+1) as date), s.val) < 1 then '1/1/' + str(@YEAR)
                        else s.val
                    end As CalcStart,
                    ISNULL(e.Val, cast(str((@YEAR+1)*10000+1*100+1) as date)) as CalcEnd,
                s.val as realstart, e.val as realend
                FROM StartDates s
                LEFT OUTER JOIN EndDates e ON s.RowNumber = e.RowNumber
            ) accountforyear; 
```

所以，`@R =`在`select` *之后*。`with`这里不需要子查询，所以我只是在其中添加了分配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T18:47:10.977

在查询之前定义您的 CTE：

```
;with CTE_A( ColA, ColB)
as
(
    select
        ColA
        , ColB
    from
        SomeTable
)
,CTE_B( ColA, ColC )
as
(
    select
        ColA
        , ColC
    from
        SomeTable2
)

select
    *
from
    CTE_A a
    inner join CTE_B b
     on a.ColA = b.ColB 
```

# mysql - 使用主键从表中意外删除的行

> ID：15689721
> 
> 赞同：1
> 
> 时间：2013-03-28T18:40:06.040
> 
> 标签：mysql

如果您“不小心”（温柔一点，这是一个艰难的早晨）从具有主键的表中删除一行，是否可以使用它的前一个键重新插入记录，即使表自动增加主键?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T18:35:35.300

TSQL 我有一个非常奇怪的环境——在某些方面非常受限，而在其他方面却很开放。不允许插入已使用的 PK 值，必须重新创建整个表...

```
/****
create protoTable w/ same structure as your mainTable that has the data you are trying to fix in this example the fieldname of the primary key is FldPK
assumption here is that your primary key is getting auto incremented
get a list of the fields in the mainTable that are NOT NULL.
in this example those fields are <not null fields>
get a list of all fields in the mainTable
in this example <all fields>, rather than spell out the fields. DO NOT INCLUDE the primary key field name
***/
declare @x int, @y int, @iLast int
select @iLast = (select MAX( FldPK ) from mainTable)
set @x = 1
while @x <= @iLast
begin
  select @y = (select COUNT(*) from mainTable where FldPK = @x)
  if @y = 1
    begin
      insert into protoTable(<all fields>)
        select <all fields> from mainTable where FldPK = @x
    end
  else
    begin
      insert into protoTable (<not null fields> )values('N','xyz'+convert(varchar,@x)) /*or whatever values are valid to fulfill not null*/
      /* this is where you keep one or more of the missing rows to update later with the lost data */
      if @x <> 126
        begin
          delete protoTable where FldPK = @x
        end
    end
  set @x=@x+1
end 
```

然后将mainTable重命名为backup，将protoTable重命名为mainTable

hth

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:19:10.943

如果or语句中未提供值，则该`AUTO_INCREMENT`功能将分配一个值。否则，如果您提供了一个值并且它与现有的键不冲突，它将被原样接受。`INSERT``REPLACE`

# objective-c - coredata kvo 计数

> ID：15689722
> 
> 赞同：3
> 
> 时间：2013-03-28T18:40:06.817
> 
> 标签：objective-c, core-data, key-value-observing

是否可以为 CoreData 中的多个实体的计数设置 KVO 触发器？

目前我正在观看“DidSaveNotification”，但它触发了很多。

还有另一种更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:58:03.810

你能在`-awakeFromInsert`and中进行跟踪`-prepareForDeletion`吗？

# ios - 扩展 UITableViewCell 不会扩展索引行 > 12

> ID：15689723
> 
> 赞同：1
> 
> 时间：2013-03-28T18:40:07.957
> 
> 标签：ios, xcode, uitableview

注意，我只是在学习 iOS 开发的技巧。我有一个 TableView，它使用一个自定义 Cell 来切换它的高度，以产生一个“抽屉”的影响，当你选择它时它会下降。我几乎让它完全正常工作，但我有一个非常奇怪的问题。选择索引行大于 12 的任何单元格都不会更改高度。**这是一个演示视频。**- [http://d.chend.me/4NMU](http://d.chend.me/4NMU)

我认为，我正在以一种非常标准的方式初始化我的自定义单元格。

```
static NSString *CellIdentifier = @"DrawerCell";

NSDictionary *clip = self.isFiltered ? [self.filteredClips objectAtIndex:indexPath.row] : [self.clips objectAtIndex:indexPath.row];

DrawerCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[NSBundle mainBundle] loadNibNamed:CellIdentifier owner:self options:nil] objectAtIndex:0];
} 
```

我的 heightForRowAtIndexPath 委托方法如下所示：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(self.selectedIndex == [NSNumber numberWithInt:indexPath.row])
    {
        return 126.0f;
    }
    else {
        return 60.0f;
    }
} 
```

然后对于 didSelectRowAtIndexPath

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self.tableView deselectRowAtIndexPath:indexPath animated:NO];

    if(self.selectedIndex == [NSNumber numberWithInt:indexPath.row])
    {
        self.selectedIndex = nil;
        [tableView beginUpdates];
        [tableView endUpdates];
        NSLog(@"Selected Index: %@\nIndex Path Row: %i\n\n", self.selectedIndex, indexPath.row);
        return;
    }

    //First we check if a cell is already expanded.
    //If it is we want to minimize make sure it is reloaded to minimize it back
    if(self.selectedIndex != nil)
    {
        self.selectedIndex = [NSNumber numberWithInt:indexPath.row];
        [tableView beginUpdates];
        [tableView endUpdates];
        NSLog(@"Selected Index: %@\nIndex Path Row: %i\n\n", self.selectedIndex, indexPath.row);        
        return;
    }

    //Finally set the selected index to the new selection and reload it to expand
    self.selectedIndex = [NSNumber numberWithInt:indexPath.row];
    [tableView beginUpdates];
    [tableView endUpdates];
    NSLog(@"Selected Index: %@\nIndex Path Row: %i\n\n", self.selectedIndex, indexPath.row);    

} 
```

有什么明显的原因为什么索引行大于 12 不能正常工作，而它们之前的所有内容都可以正常工作？顺便说一句，他们仍在接收触摸事件，并记录正确的索引路径行，他们只是不会显示抽屉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:54:22.413

您的问题可能（*可能*）是您通过 NSNumbers 进行的比较`==`。作为对象，这比较地址，而不是值。尝试`-isEqual:`改用。

# javascript - 删除嵌套的 json 元素并显示为单独的键值对

> ID：15689728
> 
> 赞同：1
> 
> 时间：2013-03-28T18:40:18.760
> 
> 标签：javascript, json

我想删除嵌套的 json 对象并将其单独显示为键值对。这是我的 json 对象

```
[
  {
    "fileId": 123,
    "fileName": "test file.zip",
    "createdOnDate": "2013-03-22T17:02:00",    
    "valueList": {
      "text_box": "Testing textbox",
      "text_area": "Lorem ipsum dolor sit"
    }
  }
] 
```

如何格式化它，使对象看起来像

```
[
  {
    "fileId": 123,
    "fileName": "test file.zip",
    "createdOnDate": "2013-03-22T17:02:00",    
    "text_box": "Testing textbox",
      "text_area": "Lorem ipsum dolor sit"

  }
] 
```

使用jQuery？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:43:43.773

试试这个：

```
theArray.forEach(function(item) {
    item.text_box = item.valueList.text_box;
    item.text_area = item.valueList.text_area;
    delete item.valueList;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:47:26.307

这是一个简单但并非包罗万象的解决方案。

```
function unseat(obj, prop) {
    for(var k in obj[prop])
        obj[k] = obj[prop][k];
    delete obj[prop];
    return obj;
}
var testObj =   {
    "fileId": 123,
    "fileName": "test file.zip",
    "createdOnDate": "2013-03-22T17:02:00",    
    "valueList": {
      "text_box": "Testing textbox",
      "text_area": "Lorem ipsum dolor sit"
    }
  };
testObj = unseat(testObj, "valueList");
for(var k in testObj) 
    console.log(k + " " + testObj[k]); 
```

# iphone - .mov 的扩展名更改为 .mp4

> ID：15689732
> 
> 赞同：0
> 
> 时间：2013-03-28T18:40:41.527
> 
> 标签：iphone, objective-c

我正在尝试将 UIImagePickerController 选择的 .mov 文件切换为 .mp4 文件。我已经知道只需切换扩展名就足够了，但是我不知道如何更改名称...... NSData 上没有属性，甚至在谷歌上都没有命中......

谁能给我一个正确方向的提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:43:26.510

你的意思是`Foo.mov`搬到`Foo.mp4`?

```
NSString *path = @"/path/to/foo.mov";
NSString *newPath = [[path stringByDeletingPathExtension] stringByAppendingString:@".mp4"];
[[NSFileManager defaultManager] moveItemAtPath:path toPath:newPath error:NULL]; 
```

# java - Eclipse如何将jar文件导入为maven项目

> ID：15689734
> 
> 赞同：2
> 
> 时间：2013-03-28T18:40:45.233
> 
> 标签：java, eclipse, import, eclipse-plugin, m2e

我已经从 Maven 仓库 orientdb-source.jar 下载了 OrientDB 的源 jar 文件。结构是：

```
orientdb-source.jar/com/orienttechnologies/orient/core/...
                   /META-INF/... 
```

我已经安装了 m2e 插件。但我不知道将此 jar 文件作为 maven 项目导入。我不想将此 jar 文件作为外部 jar 导入。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:54:20.587

听起来您想在 Maven 环境中使用/访问此工件。

如果您只想在类路径中使用 jar，则应将 jar 作为依赖项添加到项目的 pom 文件中。如果 jar 来自私有存储库，您可能还需要添加对 pom 的存储库引用。使用对 jar 的引用修改 pom 文件后，您可以选择项目并单击“Maven -> 更新项目依赖项”。Maven 将下载 jar 并修改您的类路径。

如果您想实际查看源代码，请在第 3 方的网站上查找对包含源代码的存储库的引用。使用适当的 Eclipse 插件（git、svn 等）指向并签出源代码的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:55:43.787

如果要在项目中导入 jar，请将其放在项目`<dependecies>`根目录的 pom.xml 中的标记上：

```
<dependency>
    <groupId>com.orientechnologies</groupId>
    <artifactId>orientdb</artifactId>
    <version>1.3.0</version>
</dependency> 
```

来自[Maven 存储库](http://mvnrepository.com/artifact/com.orientechnologies/orientdb/1.3.0)

这将在您的项目 lib 文件夹中导入 jar。

无论如何，如果你想从这个库中修改代码，你需要用这个 jar 的内容创建一个新的项目。在 maven 上打包为 jar 并作为依赖项放置。

# c# - 以编程方式将 Web 应用程序导入 IIS

> ID：15689735
> 
> 赞同：2
> 
> 时间：2013-03-28T18:40:53.093
> 
> 标签：c#, iis, web

我开发了一个 C# Web 应用程序并准备好进行 Web 部署 - 这意味着我已经准备好 WebApp.Web.zip 文件。我已验证在我的 IIS 7.0 管理器中手动导入此应用程序有效，并且我能够在浏览器中运行该应用程序。

打开 IIS 管理器 (cmd->inetmgr)，并浏览“站点 -> 默认网站”，然后单击“部署”下右侧菜单中的“导入应用程序”。浏览到 AAA.Web.zip 的路径并单击“打开”。完成包导入向导。单击“浏览 *:80”。

我现在想以编程方式在本地 IIS 服务器中导入此应用程序。你能帮我一些指点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:54:10.240

因此，如果您只想`WebApplication`在 IIS 中托管您的内容，并且您不想一直手动进行。

有一种巧妙的方法可以做到这一点，

创建一个 WebSetup 项目。即在现有解决方案中添加一个新项目，`WebApplication`即在visual studio中，添加新项目，转到

`Other Project Types`>> `Setup And Deployment`>> `Visual Studio Installer`>>`Web Setup Project`

只需将您的 WebApplication 添加`Primary Output`到`Content Files`安装项目中，您就完成了。您所要做的就是构建您的解决方案。

在您的安装项目的 bin 文件夹中，您将获得一个`.exe`在安装时在 IIS 中托管 WebApplication 的 .

查看有关[在 Visual Studio 中创建设置项目的更多信息](http://dataerror.blogspot.in/2010/06/creating-web-setup-project-for-aspnet.html)

至少它比 WebDeploy 命令行语法更干净

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:45:21.993

只需在 buildscript 或 Process 对象中使用 webdeploy 命令行

[http://technet.microsoft.com/en-us/library/dd569106(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/dd569106(v=ws.10).aspx)

Microsoft 基本上不会让您使用 API，有几种方法可以破解它，但老实说，您最好使用命令行

看到这个[旧答案](https://stackoverflow.com/questions/6979996/webdeploy-api-iis-7-public-api-resources)

# php - php 命名空间别名和目录的单词选择 - 我们可以将目录命名为全局吗？

> ID：15689740
> 
> 赞同：0
> 
> 时间：2013-03-28T18:41:02.987
> 
> 标签：php, namespaces, alias

[在我之前提出的这个问题](https://stackoverflow.com/questions/15688805/php-namespace-alias-why-do-we-have-keep-the-classes-in-folders-when-autoload-is)之后，在选择单词时，我在命名空间方面遇到了更多麻烦，

```
use \global\Conan as Cimmerian; 
```

错误信息，

> 解析错误：语法错误，意外的“全局”（T_GLOBAL），在 C:\wamp 中需要标识符（T_STRING）。

那么在这种情况下，您无法将目录命名为**全局目录吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:43:10.247

`global`是 PHP 中的保留关键字，因此不能用作标识符。

请参阅PHP 手册[中的关键字列表。](http://www.php.net/manual/en/reserved.keywords.php)

尽管该页面上没有特别提到命名空间，但它们会导致与类名相同的问题，因为解析器在遇到关键字时将不知道该怎么做 - 因此您会看到错误。

# function - VbScript：函数未完全执行

> ID：15689741
> 
> 赞同：0
> 
> 时间：2013-03-28T18:41:06.763
> 
> 标签：function, vbscript

我正在尝试调用一个函数。在函数内部，我正在读取一个 xml 文件并将值更改为其中一个节点。但它在行后退出功能`sXmlFile = OpenXMLFile("\\common_automation\common_bin\" & sXmlFileName & ".xml")`

单独测试时，函数内部的功能运行良好。但是我如何使控件进入整个功能而不退出。在为第一次调用完全执行函数中的语句之前，它对函数进行第二次调用。

```
x=replace_instrument_id(strIp,"newFund")
y=replace_instrument_id(strIp,"newBlock")
z=replace_instrument_id(strIp,"newSecRef")

Function replace_instrument_id(sCusip,sXmlFileName)
WScript.Echo"sCusip:" & sCusip
WScript.Echo"sXmlFileName:" & sXmlFileName
sXmlFile = OpenXMLFile("\\common_automation\common_bin\" & sXmlFileName & ".xml")
WScript.Echo "sXmlFile" & sXmlFile
strCusip = sCusip

Dim sNS    : sNS      = "xmlns:xs='http://www.w3.org/2001/XMLSchema'  xmlns:msdata='urn:schemas-microsoft-com:xml-msdata'"
Dim oXDoc  : Set oXDoc = CreateObject( "Msxml2.DOMDocument.6.0" )
Dim sXPath 

if(sXmlFileName="newSecRef") Then
   sXPath    = "/NewDataSet/ReturningDataSet/live_ins_id"
Else
   sXPath    = "/NewDataSet/ReturningDataSet/ins_id"
End If
  oXDoc.setProperty "SelectionLanguage", "XPath"
  oXDoc.setProperty "SelectionNamespaces", sNS
  oXDoc.async = False
  oXDoc.loadXml  sXmlFile

   If 0 = oXDoc.ParseError Then
     oXDoc.selectSingleNode(sXPath).text = strCusip
     oXDoc.save "\common_automation\common_bin\"& sXmlFileName &".xml"
     WScript.Echo oXDoc.selectSingleNode(sXPath).text
  Else
    WScript.Echo oXDoc.parseError.reason
  End If
End Function

Function OpenXMLFile (filename)
    Set objFSO = CreateObject("Scripting.FileSystemObject") 
    Set objFile = objFSO.OpenTextFile(filename, 1) 
    thisline = objFile.ReadAll
    objFile.Close
    OpenXMLFile = thisline
End Function 
```

我得到的输出是

```
sCusip:02R99BET7
sXmlFileName:newFund
sCusip:02R99BET7
sXmlFileName:newBlock
sCusip:02R99BET7
sXmlFileName:newSecRef 
```

# html - @Font-face 在某些浏览器中不显示大写“A”

> ID：15689742
> 
> 赞同：0
> 
> 时间：2013-03-28T18:41:07.713
> 
> 标签：html, css, fonts, font-face, frontend

这里奇怪的问题。我正在使用`@font-face`一个站点并且遇到了一些问题。我最初并没有在 Mac 上的 Chrome 中显示大写的“A”。在明确设置字体粗细之后，上面的任何内容`300`都很好。

但是，现在我看到它出现在 Firefox 和我的客户端机器上的各种浏览器中。

这是我的代码：

```
@font-face {
    font-family: 'Avenir';
    src: url('../fonts/tricky.eot');
    src: url('../fonts/tricky.eot?#iefix') format('embedded-opentype'),
         url('../fonts/tricky.woff') format('woff'),
         url('../fonts/tricky.ttf') format('truetype'),
         url('../fonts/tricky.svg#ModernPictogramsNormal') format('svg');
    font-weight: 300;
    font-style: normal;
} 
```

你可以在这里看到它：http: [//infirmaryhealth.mdidev.com/](http://infirmaryhealth.mdidev.com/)

感谢您的任何帮助-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T00:25:34.530

把问题弄清楚了。

我使用的是 Zurb 的 Foundation 框架。`h1`他们将此应用于`h6`：

```
text-rendering: optimizeLegibility; 
```

评论它，瞧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:39:42.123

尝试将字体粗细设置为正常（与将其设置为 400 相同）。这是 fontsquirrel @font-face 生成器在转换字体后所做的，它一直对我有用。

# ios - 可以在启动相机应用程序时控制白平衡模式吗？(IOS)

> ID：15689745
> 
> 赞同：3
> 
> 时间：2013-03-28T18:41:12.833
> 
> 标签：ios, avfoundation

只是我一直在尝试的一个问题。我知道在我拥有的大多数（如果不是全部）相机应用程序中，iphone 相机以连续 (2) 的白平衡开始，如 AVFoundation 框架中的 AVCaptureDevice.h 中所示：

```
enum {
AVCaptureWhiteBalanceModeLocked                     = 0,
AVCaptureWhiteBalanceModeAutoWhiteBalance           = 1,
AVCaptureWhiteBalanceModeContinuousAutoWhiteBalance = 2, 
```

};

但是无论如何我可以强制它以锁定白平衡模式开始吗？
我似乎找不到它决定这种情况的地方。

我已经尝试将它包含在我的捕获会话中：

```
// Create session (use default AVCaptureSessionPresetHigh)
AVCaptureSession *newCaptureSession = [[AVCaptureSession alloc] init];
[newCaptureSession beginConfiguration];

AVCaptureDevice *device = [self cameraWithPosition:AVCaptureDevicePositionBack];
if ([device isWhiteBalanceModeSupported: AVCaptureWhiteBalanceModeLocked]) {
    if ([device lockForConfiguration:nil]) {
        [device setWhiteBalanceMode:AVCaptureWhiteBalanceModeLocked];
        [device unlockForConfiguration];
    }
}
[newCaptureSession commitConfiguration]; 
```

……但无济于事。打开应用程序时它仍然是自动白平衡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:03:05.477

设置捕获会话时：

```
 AVCaptureDevice *device = [self cameraWithPosition:AVCaptureDevicePositionBack];
 if ([device isWhiteBalanceModeSupported: AVCaptureWhiteBalanceModeLocked]) {
        if ([device lockForConfiguration:nil]) {
             [device setWhiteBalanceMode:AVCaptureWhiteBalanceModeLocked];
             [device unlockForConfiguration];
        }
 } 
```

# matlab - 如何在matlab中进行线性变换

> ID：15689746
> 
> 赞同：1
> 
> 时间：2013-03-28T18:41:23.480
> 
> 标签：matlab

您好，我需要在双 RGB 图片上实现直方图裁剪。

所以我必须将参数低和高应该转换为0,1。所以基本上我想做的是这样的线性变换：

```
[low, high] = [0,1] 
```

之后，所有值`< 0`和`> 1`应分别设置为 0 和 1。

我的问题是我不知道如何在 matlab 中进行这样的线性变换，并且在谷歌上搜索它没有任何成功。我是 Matlab 的新手，但我确信应该有办法做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:34:00.513

首先将参数设置为高和低：

```
low  = 0.2;
high = 0.8; 
```

执行线性变换：

```
image_new = (image_old - low) / (high - low); 
```

应用阈值：

```
image_new(image_new > 1) = 1;
image_new(image_new < 0) = 0; 
```

# mvvm-light - 嵌套 mvvm-light Messenger 在使用 Dispatcher 时发送 + 多线程 = 死锁

> ID：15689747
> 
> 赞同：2
> 
> 时间：2013-03-28T18:41:25.363
> 
> 标签：mvvm-light

这基本上是正在发生的事情......

1.  A类（主线程）发送MVVM消息
    *   收到此消息，在处理过程中，B 类被构建并启动一个后台任务。
    *   此背景发送单独的 MVVM 消息。
    *   C 类已注册此消息并在调度程序上执行调用以尝试更新 UI。
    *   此时主线程仍在执行原始的发送命令，**线程处于死锁**状态（我可以暂停调试器，看看它们都在等待）。

其他注意事项

1.  如果我在后台线程中添加睡眠一秒钟（允许主线程的 Send 方法完成），它工作正常。
2.  仅当在另一个调用调度程序的线程上发送嵌套的 MVVM 消息时才会发生这种情况。
    *   注释掉调度员的电话……很好。
    *   不使用 MVVM 消息来调用调度程序...很好。

谁能解释发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:21:23.830

这个我要试一试...

您可以查看其 CodePlex 站点上的 MVVM-Light 源代码。我将在此处粘贴相关方法（为了这篇文章而略加注释）：

```
 private void SendToTargetOrType<TMessage>(TMessage message, Type messageTargetType, object token)
    {
        var messageType = typeof(TMessage);

        if (_recipientsOfSubclassesAction != null)
        {
            // Clone to protect from people registering in a "receive message" method
            // Correction Messaging BL0008.002
            var listClone =
                _recipientsOfSubclassesAction.Keys.Take(_recipientsOfSubclassesAction.Count()).ToList();

            foreach (var type in listClone)
            {
                List<WeakActionAndToken> list = null;

                if (messageType == type
                    || messageType.IsSubclassOf(type)
                    || type.IsAssignableFrom(messageType))
                {
                    lock (_recipientsOfSubclassesAction)
                    {
                        list = _recipientsOfSubclassesAction[type].Take(_recipientsOfSubclassesAction[type].Count()).ToList();
                    }
                }

                // Class A probably sends a message here from the UI thread
                SendToList(message, list, messageTargetType, token);
            }
        }

        if (_recipientsStrictAction != null)
        {
            // Class B grabs this lock on the background thread.
            // Class A continues processing on the UI thread and arrives here.
            // An attempt is made to grab the lock on the UI thread but it is
            // blocked by the background thread & Class B which in turn is waiting
            // on the UI thread. And here you have yourself a deadlock
            lock (_recipientsStrictAction)
            {
                if (_recipientsStrictAction.ContainsKey(messageType))
                {
                    var list = _recipientsStrictAction[messageType]
                        .Take(_recipientsStrictAction[messageType].Count())
                        .ToList();

                    // Class B sends its message here.
                    // Class C receives the message and does an Invoke on the UI thread
                    SendToList(message, list, messageTargetType, token);
                }
            }
        }

        RequestCleanup();
    } 
```

1.  A 类可能会在“子类接收者”接收的 UI 线程上发送一条消息。
2.  B 类是接收此消息并启动您的后台任务的收件人。
3.  然后，您的后台任务会发送一条消息，其中包含“严格操作收件人”。
4.  B 类在后台线程上获取“_recipientsStrictAction”锁。
5.  B 类将消息发送到 C 类，C 类在 UI 线程上执行调用。
6.  此调用阻塞，因为 UI 线程仍在执行第一条消息。
7.  UI 线程继续执行，然后尝试获取 UI 线程上的“_recipientsStrictAction”锁。不幸的是，您的后台线程（正在等待 UI 线程）已经获得了锁。你现在陷入僵局:(

可能要考虑在 C 类中执行 InvokeAsync 而不是 Invoke。我认为您可能可以通过这种方式避免这个问题。

让我想知道为什么 MVVM 灯会在锁的“内部”发送消息。似乎是一件不那么酷的事情。输入完所有这些后，我环顾了 CodePlex 网站，看起来这个问题已记录在案： http: [//mvvmlight.codeplex.com/workitem/7581](http://mvvmlight.codeplex.com/workitem/7581)

# java - 如何根据自定义 ComboboxModel 中的 Map 设置 FileFilter？

> ID：15689750
> 
> 赞同：1
> 
> 时间：2013-03-28T18:41:34.467
> 
> 标签：java, jcombobox, jfilechooser, filefilter, comboboxmodel

我将简要解释我正在做的事情，然后提供我的一些代码。

我有一个小的 GUI，我在其中选择 JComboBox 上的一个选项，然后单击一个按钮，该按钮将打开一个 JFileChooser，它应该根据 JComboBox 中的选择过滤掉文件。

例如，用户`Text File`从 JComboBox 中进行选择，当用户单击按钮时，它将打开仅显示目录和文本文件的 JFileChooser。

在我的主类中，我在构造函数中有这个：

```
public MyApp() {
    //init components and other logic

    comboBox.setModel(new FileExtensionModel());
} 
```

然后在那个类中，我有打开文件选择器的按钮的方法：

```
private void openFilAction(ActionEvent e) {
    JFileChooser fc = new JFileChooser();

    fc.setFileFilter(new FileFilter() {
        @Override
        public boolean accept(File f) {
            return f.getName().endsWith(myFileType) || f.isDirectory();
        }

        public String getDescription() {
            return "myFileType";
        }
    }

    int choose = fc.showOpenDialog(this);
    //do logic  
} 
```

最后是我对 DefaultComboBoxModel 的基本扩展：

```
public class FileExtensionModel extends DefaultComboBoxModel {
    Map<String, String> selection;

    public FileExtensionModel() {
        selection = new HashMap<String, String>();
        selection.put("Text File", ".txt");
        selection.put("Rar File", ".rar");
        selection.put("Zip File", ".rar");
        selection.put("Tar File", ".tar");
        selection.put("Ini File", ".ini");

        for(String key : select.keySet()) {
           this.addElement(key);
        }
    }
} 
```

所以我想知道如何用我`myFileType`内部地图中的值替换，`FileExtensionModel()`因为我无法从我的内部`FileFilter()`类访问它。

欢迎任何建议，我不介意移动代码。如果我能在我的 FileExtensionModel 类中处理其中的大部分内容，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:30:29.827

你不能创建你的`HashMap`外部`FileExtensionModel`，它是可见的`FileFilter`并将它传递给`FileExtensionModel的构造函数吗？

```
public class MyClass {

    Map<String, String> selection;
    FileExtensionModel fem;

    MyClass() {
        selection = new HashMap<String, String>();
        selection.put("Text File", ".txt");
        selection.put("Rar File", ".rar");
        selection.put("Zip File", ".rar");
        selection.put("Tar File", ".tar");
        selection.put("Ini File", ".ini");
        fem = new FileExtensionModel(selection);
    }
}

private void openFilAction(ActionEvent e) {
    JFileChooser fc = new JFileChooser();

    fc.setFileFilter(new FileFilter() {
        @Override
        public boolean accept(File f) {
            return f.getName().endsWith(myFileType) || f.isDirectory();
        }

        public String getDescription() {
            for (String key : selection.keySet()) {
               if (selection.get(key).equals(myFileType)) {
                   return key;
               }
            }
            return "";
        }
    }

    int choose = fc.showOpenDialog(this);
    //do logic  
} 
```

您的 FileExtensionModel 类：

```
public class FileExtensionModel extends DefaultComboBoxModel {

    public FileExtensionModel(HashMap select) {

        for(String key : select.keySet()) {
           this.addElement(key);
        }
    }
} 
```

**更新**

或者您可以创建一个`HashMap`FileFilters，扩展名是关键。

```
selection = new HashMap<String, String>();
            selection.put("Text File", ".txt");
            selection.put("Rar File", ".rar");
            selection.put("Zip File", ".rar");
            selection.put("Tar File", ".tar");
            selection.put("Ini File", ".ini");
            fem = new FileExtensionModel(selection);

HashMap<String, FileFilter> fileFilters = new HashMap<String, FileFilter>();

for (String key : selection.keySet()) {
    fileFilters.add(new MyFileFilter(key, selection.get(key)));
} 
```

然后为您的 FileFilter 创建一个类。

```
public class MyFileFilter extends FileFiter() {

    String extension;
    String description;

    public MyFileFilter(String extension, String description) {
        this.extension = extension;
        this.description = description;
   }

    ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T20:41:40.167

您只需将其添加为字段即可访问类中的`FileExtensionModel`实例。`MyApp`由于它是在构造函数中实例化的，所以这应该不是问题。但是，由于您在匿名内部类中使用它，因此该字段需要是`final`.

```
public class MyApp {
    private final FileExtensionModel fileExtensionModel;
    // ... your other fields

    public MyApp() {
        // ... you other init
        fileExtensionModel = new FileExtensionModel();
        comboBox.setModel(fileExtensionModel);
    }
} 
```

现在，在该`openFileAction`方法中，您应该可以访问 fileExtensionModel 字段，例如提取所选项目（或您应该需要的任何其他方法）。就像是：

```
myFileType = fileExtensionModel.getSelectedItem(); 
```

# mysql - MySQL：获取早于 xxx 的最新条目，性能

> ID：15689759
> 
> 赞同：0
> 
> 时间：2013-03-28T18:42:05.757
> 
> 标签：mysql, performance, select, explain

我有一张看起来像这样的表：

```
ID | objectID | time | ...
-------------------
 1 |        1 | ...
 2 |        1 | ...
 3 |        1 | ...
 4 |        2 | ...
 5 |        2 | ...
 6 |        3 | ...
 7 |        4 | ... 
```

ID 是主键，objectID 是非唯一的。我正在尝试提高查询的性能以获取所有 objectID 的最新条目，但这些条目不应比某个值新。我尝试遵循两个查询，它们都应该提供相同的（和正确的结果）：

```
SELECT *
FROM (
    SELECT *
    FROM table
    WHERE time <= XXX
    ORDER BY time DESC
)
GROUP BY objectID 
```

和

```
SELECT *
FROM table AS t     
INNER JOIN (
    SELECT ID, MAX(time)
    FROM table
    WHERE time <= 1353143351
    GROUP BY objectID
) s
USING (ID) 
```

第一个查询的解释告诉我

```
id | select_type | table      | type | possible_keys | key     | key_len | ref  | rows   | Extra
------------------------------------------------------------------------------------
1  | PRIMARY     | <derived2> | ALL  | NULL          | NULL    | NULL    | NULL | 145827 | Using temporary; Using filesort
2  | DERIVED     | tbl_test   | ALL  | NULL          | NULL    | NULL    | NULL | 238694 | Using filesort 
```

对于第二个查询，它说

```
id | select_type | table      | type   | possible_keys | key     | key_len | ref  | rows   | Extra
------------------------------------------------------------------------------------
1  | PRIMARY     | <derived2> | ALL    | NULL          | NULL    | NULL    | NULL | 325 
1  | PRIMARY     | t          | eq_ref | PRIMARY,ID    | PRIMARY | 4       | s.ID | 1   
2  | DERIVED     | tbl_test   | index  | NULL          | ID      | 12      | NULL | 238694 | Using where; Using index; Using temporary; Using filesort 
```

（tbl_test 是我的测试表）

第二个查询似乎（快得多），但仍然不是非常快，运行时间为 0.1 秒，大约 200k 数据库条目。有没有办法提高查询的性能？有没有缺失的索引？

提前致谢！！

**编辑：解释 eggys 查询（参见他的帖子中的查询）：**

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   PRIMARY <derived2>  ALL NULL    NULL    NULL    NULL    325 
1   PRIMARY lab_case_test   ALL NULL    NULL    NULL    NULL    238694  Using where; Using join buffer
2   DERIVED lab_case_test   index   NULL    ID  12  NULL    238694  Using where; Using index; Using temporary; Using f...

CREATE TABLE `lab_case_test` (
 `ID` int(11) NOT NULL AUTO_INCREMENT,
 `caseID` int(11) NOT NULL,
 `time` int(11) NOT NULL,
 // ....
 PRIMARY KEY (`ID`),
 KEY `ID` (`ID`,`caseID`,`time`),
 KEY `caseID` (`caseID`,`time`)
) ENGINE=MyISAM AUTO_INCREMENT=238695 DEFAULT CHARSET=utf8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:16:55.860

您想要一个复合索引`(objectID, time)`：

```
ALTER TABLE my_table ADD INDEX (objectID, time) 
```

这样做的原因是 MySQL 可以直接从索引树中检索`time`每个的最大值；`objectID`然后，它还可以使用相同的索引再次加入表中，以使用类似于第二个查询的方式查找[分组最大](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)`objectID`记录（但应该同时加入两者，并且`time`- 我喜欢`NATURAL JOIN`在这种情况下使用 a ）：

```
SELECT *
FROM   my_table NATURAL JOIN (
  SELECT   objectID, MAX(time) time
  FROM     my_table
  WHERE    time <= 1353143351
  GROUP BY objectID
) t 
```

# javascript - 如果变量存在，则有条件地调用函数或脚本

> ID：15689761
> 
> 赞同：0
> 
> 时间：2013-03-28T18:42:08.977
> 
> 标签：javascript, jquery, express

使用 ExpressJS 我渲染一个 EJS 视图，有时当我渲染视图时我传递一个变量（myVar）。我想调用一个函数；在发送变量（myVar）的条件下。

app.js 中的 Express 路由。

```
 app.get('/viewing/login', function(req, res){
           res.render('viewing/login', {
               title: 'my view',
               locals: myVar     <!------The variable being sent(myVar) ----
           });
    }); 
```

myScript.js 中的函数

```
 $(document).ready(function(){
            $('<div></div>')
                .attr('id','overlay')
                .css('opacity', '.60')
                .addClass('active')
                .html(myVar)
                .appendTo('body')
                .slideDown('slow',function(){
                    setTimeout(function(){$('#overlay').slideUp('slow')}, 5000);
             })
       }); 
```

还有一个名为 login.ejs 的 EJS 文件

1.  App.js 将 myVar 发送到 login.ejs
2.  如果 myVar 被发送到 login.ejs，保存在 myScript 中的函数应该运行
3.  login.ejs 中 myVar 的存在在哪里得到验证

如果 EJS 中存在变量，调用函数（或脚本）的方法是什么？

我的代码试图做的是当这个人没有正确输入他们的用户名和密码时，滑下带有给定错误的覆盖层？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:45:49.930

我相信一种方法是简单地进行`typeof`检查：

```
if (typeof(myVar) === 'undefined') {
    // variable is undefined send alert, etc;
} 
```

# android - 如何在保持构造函数为空的同时将应用程序上下文传递到广播接收器

> ID：15689762
> 
> 赞同：1
> 
> 时间：2013-03-28T18:42:12.927
> 
> 标签：android, constructor, broadcastreceiver, android-context

我目前正在制作一个动态壁纸，它需要跟踪未读短信的数量。收到短信后，我会像这样更新 SMSCount：

```
@Override
public void onReceive(Context context, Intent intent) {
    final Uri SMS_INBOX = Uri.parse("content://sms/inbox");

    Cursor c = context.getContentResolver().query(SMS_INBOX,
                                                  null,
                                                  "read = 0",
                                                  null,
                                                  null);
    mSMSCount = c.getCount();
    c.close();
} 
```

哪个工作正常。但是，只有在收到消息时才会更新该值，因此在此之前它会给出不正确的值（SMSCounts 初始化值）。因此，要将 SMSCount 初始化为正确的值，我必须使用上面的代码对其进行初始化。问题是它需要一个上下文。当我尝试将应用程序上下文传递给广播接收器的构造函数时，我得到一个“无空构造函数”异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:46:02.633

继续往你的类中添加一个空的构造函数，以及你当前传递上下文的构造函数，换句话说，添加一个不带参数的构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:54:50.853

好的，首先，BroadcastReceiver 旨在接收通知并提醒某人，而不是继续运行，所以如果你在 onReceive 之外有代码，你做错了。

从您的问题来看，您需要在 BroadcastReceiver 的构造函数上添加一个上下文。

我的建议是将所有这些代码从 onReceive 移动到 IntentService，该服务将启动，在数据库上进行查找并调用以更新计数，没有实例变量，因为该服务将在之后结束。

然后在启动程序时调用这个 IntentService 来显示未读计数，并且在 BroadcastReceiver 上你只调用 IntentService。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:08:37.350

您可以添加参数化构造函数以及默认构造函数。

# php - APC 和子 pid XXXXX 退出信号 Segmentation fault

> ID：15689765
> 
> 赞同：4
> 
> 时间：2013-03-28T18:42:38.530
> 
> 标签：php, linux, apache2, apc, xcache

首先，我在服务器上安装了 xCache，我在很多服务器上都安装了 xCache，但是在这几天之后，除了 apache 错误日志中出现此错误的空白页面外，您什么也没有：

```
 child pid XXXXX exit signal Segmentation fault 
```

据我所知，这意味着某种内存损坏。

所以我从 php.ini 中删除了 xCache 并安装了 APC。但现在情况更糟了。一小时或更少/更多服务器变得无响应后。我可以在我网站的服务器状态中清楚地看到 W 模式下有很多连接。而且他们没有任何共同点。其中一些来自 Joomla（首页），一些来自 vBulletin（论坛），还有一些来自其他自定义代码。如果我让它更长时间，我将在 Apache 错误日志中出现此错误：

```
 Server reached MaxClients setting, consider raising the MaxClients setting 
```

Apache 处于 mod_php 和 mod_ruid2 模式。

这是挂起时服务器状态的结果：

```
Server uptime: 52 minutes 57 seconds
Total accesses: 31025 - Total Traffic: 279.0 MB
CPU Usage: u418.14 s64.28 cu0 cs0 - 15.2% CPU load
9.77 requests/sec - 89.9 kB/second - 9.2 kB/request
398 requests currently being processed, 27 idle workers

WWWWWWWWWWWWWWWWWWWWWWWWW.......................................
WWWWWWWWWWWWWWWWWWWWWWWWW.......................................
WWWWWWWWWWWWWWWWWWWWWWWWW.......................................
WWWWWWWWWWWWWWWWWWWWWWWWW.......................................
WWWWWWWWWWWWWWWWWWWWWWWWW.......................................
WWWWWWWWWWWWWWWWWWWWWWWWW.......................................
WWWWWWWWWWWWWWWWWWWWWWWWW.......................................
WWWWWWWWWWWWWWWWWWWWWWWWW.......................................
WWWWWWWWWWWWWWWWWWWWWWWWW.......................................
WWWWWWWWWWWWWWWWWWWWWWWWW.......................................
WWWWWWWWWWWWWWWWWWWWWWWWW.......................................
WWWWWWWWWWWWWWWWWWWWWWWWW.......................................
WWWWWWWWWWWWWWWWWWWWWWWWW.......................................
WWWWWWWWWWWWWWWWWWWWWWWWW.......................................
WWWWWWWWWWWWWWWWWWWWWWWWW.......................................
WW___WW_WW_W_WWW__WWWW_W_.......................................
_W___W___WW_W_W_W_W______....................................... 
```

这是 xCache 的错误日志（很多这些行）：

```
[Thu Mar 28 09:50:38 2013] [notice] child pid 1607 exit signal Aborted (6)
httpd: /usr/src/xcache-2.0.0/utils.c:589: xc_sandbox_error_cb: Assertion `sandbox != ((void *)0)' failed.
[Thu Mar 28 09:51:57 2013] [notice] child pid 1643 exit signal Aborted (6)
httpd: /usr/src/xcache-2.0.0/utils.c:589: xc_sandbox_error_cb: Assertion `sandbox != ((void *)0)' failed.
[Thu Mar 28 09:52:32 2013] [notice] child pid 1724 exit signal Aborted (6)
httpd: /usr/src/xcache-2.0.0/utils.c:589: xc_sandbox_error_cb: Assertion `sandbox != ((void *)0)' failed.
[Thu Mar 28 09:55:21 2013] [notice] child pid 1672 exit signal Aborted (6)
httpd: /usr/src/xcache-2.0.0/utils.c:589: xc_sandbox_error_cb: Assertion `sandbox != ((void *)0)' failed.
[Thu Mar 28 09:55:56 2013] [notice] child pid 1471 exit signal Aborted (6)
httpd: /usr/src/xcache-2.0.0/utils.c:589: xc_sandbox_error_cb: Assertion `sandbox != ((void *)0)' failed.
[Thu Mar 28 09:56:49 2013] [notice] child pid 1753 exit signal Aborted (6)
[Thu Mar 28 09:58:29 2013] [notice] child pid 1810 exit signal Segmentation fault (11)
[Thu Mar 28 09:58:29 2013] [notice] child pid 1877 exit signal Segmentation fault (11)
httpd: /usr/src/xcache-2.0.0/utils.c:589: xc_sandbox_error_cb: Assertion `sandbox != ((void *)0)' failed.
[Thu Mar 28 10:01:34 2013] [notice] child pid 1844 exit signal Segmentation fault (11)
[Thu Mar 28 10:01:34 2013] [notice] child pid 1913 exit signal Aborted (6)
[Thu Mar 28 10:01:34 2013] [notice] child pid 1941 exit signal Segmentation fault (11)
[Thu Mar 28 10:01:36 2013] [notice] child pid 2007 exit signal Segmentation fault (11)
[Thu Mar 28 10:01:37 2013] [notice] child pid 2035 exit signal Segmentation fault (11)
[Thu Mar 28 10:01:37 2013] [notice] child pid 2036 exit signal Segmentation fault (11) 
```

APC 在达到最大客户端之前的错误日志（从一次重启到另一次重启）：

```
[Thu Mar 28 19:17:10 2013] [notice] Apache/2.2.24 (Unix) mod_ssl/2.2.24 OpenSSL/1.0.0-fips DAV/2 PHP/5.2.17 configured -- resuming normal operations
[Thu Mar 28 19:21:40 2013] [notice] child pid 1356 exit signal Segmentation fault (11)
[Thu Mar 28 19:22:41 2013] [notice] child pid 1520 exit signal Segmentation fault (11)
[Thu Mar 28 19:22:42 2013] [notice] child pid 1330 exit signal Segmentation fault (11)
[Thu Mar 28 19:22:42 2013] [notice] child pid 1518 exit signal Segmentation fault (11)
[Thu Mar 28 19:22:46 2013] [notice] child pid 1967 exit signal Segmentation fault (11)
[Thu Mar 28 19:22:46 2013] [notice] child pid 1968 exit signal Segmentation fault (11)
[Thu Mar 28 19:22:49 2013] [notice] child pid 1939 exit signal Segmentation fault (11)
[Thu Mar 28 19:22:50 2013] [notice] child pid 2034 exit signal Segmentation fault (11)
[Thu Mar 28 19:22:51 2013] [notice] child pid 2062 exit signal Segmentation fault (11)
[Thu Mar 28 19:22:57 2013] [notice] child pid 2091 exit signal Segmentation fault (11)
[Thu Mar 28 19:22:58 2013] [notice] child pid 2090 exit signal Segmentation fault (11)
[Thu Mar 28 19:25:34 2013] [notice] caught SIGTERM, shutting down
[Thu Mar 28 19:25:37 2013] [notice] SSL FIPS mode disabled
[Thu Mar 28 19:25:37 2013] [warn] RSA server certificate CommonName (CN) `localhost' does NOT match server name!?
[Thu Mar 28 19:25:37 2013] [warn] Init: Name-based SSL virtual hosts only work for clients with TLS server name indication support (RFC 4366)
[Thu Mar 28 19:25:37 2013] [notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec)
[Thu Mar 28 19:25:38 2013] [notice] SSL FIPS mode disabled
[Thu Mar 28 19:25:38 2013] [warn] RSA server certificate CommonName (CN) `localhost' does NOT match server name!?
[Thu Mar 28 19:25:38 2013] [warn] Init: Name-based SSL virtual hosts only work for clients with TLS server name indication support (RFC 4366)
[Thu Mar 28 19:25:38 2013] [notice] Apache/2.2.24 (Unix) mod_ssl/2.2.24 OpenSSL/1.0.0-fips DAV/2 PHP/5.2.17 configured -- resuming normal operations 
```

来自 PHP 信息的一点点：

```
System  Linux xxx.xxxxx.com 2.6.32-358.0.1.el6.x86_64 #1 SMP Wed Feb 27 06:06:45 UTC 2013 x86_64
Build Date  Mar 17 2013 12:55:14
Configure Command   './configure' '--with-apxs2' '--with-curl=/usr/local/lib' '--with-gd' '--with-ttf' '--with-gettext' '--with-jpeg-dir=/usr/local/lib' '--with-freetype-dir=/usr/local/lib' '--with-kerberos' '--with-openssl' '--with-mcrypt' '--with-mhash' '--with-mysql=/usr' '--with-mysqli=/usr/bin/mysql_config' '--with-pdo-mysql=/usr' '--with-pcre-regex=/usr/local' '--with-pear' '--with-png-dir=/usr/local/lib' '--with-xsl' '--with-zlib' '--with-zlib-dir=/usr/local/lib' '--with-iconv=/usr/local' '--enable-bcmath' '--enable-calendar' '--enable-exif' '--enable-ftp' '--enable-gd-native-ttf' '--enable-magic-quotes' '--enable-safe-mode' '--enable-soap' '--enable-sockets' '--enable-mbstring' '--enable-zip' '--enable-wddx'
Server API  Apache 2.0 Handler
Virtual Directory Support   enabled
Configuration File (php.ini) Path   /usr/local/lib
Loaded Configuration File   /usr/local/lib/php.ini
Scan this dir for additional .ini files     (none)
additional .ini files parsed    (none)
PHP API     20041225
PHP Extension   20060613
Zend Extension  220060519
Debug Build     no
Thread Safety   enabled
Zend Memory Manager     enabled
IPv6 Support    enabled
Registered PHP Streams  https, ftps, compress.zlib, php, file, data, http, ftp, zip
Registered Stream Socket Transports     tcp, udp, unix, udg, ssl, sslv3, sslv2, tls
Registered Stream Filters   zlib.*, convert.iconv.*, string.rot13, string.toupper, string.tolower, string.strip_tags, convert.*, consumed 
```

APC 设置：

```
enabled
Version     3.1.13
APC Debugging   Disabled
MMAP Support    Enabled
MMAP File Mask  no value
Locking type    pthread read/write Locks
Serialization Support   php
Revision    $Revision: 327136 $
Build Date  Mar 28 2013 12:40:18 
```

php -v:

```
PHP 5.2.17 (cli) (built: Mar 17 2013 12:55:24) 
Copyright (c) 1997-2010 The PHP Group
Zend Engine v2.2.0, Copyright (c) 1998-2010 Zend Technologies 
```

httpd -V:

```
Server version: Apache/2.2.24 (Unix)
Server built:   Mar 10 2013 09:18:00
Server's Module Magic Number: 20051115:31
Server loaded:  APR 1.4.6, APR-Util 1.4.1
Compiled using: APR 1.4.6, APR-Util 1.4.1
Architecture:   64-bit
Server MPM:     Worker
  threaded:     yes (fixed thread count)
    forked:     yes (variable process count)
Server compiled with....
 -D APACHE_MPM_DIR="server/mpm/worker"
 -D APR_HAS_SENDFILE
 -D APR_HAS_MMAP
 -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)
 -D APR_USE_SYSVSEM_SERIALIZE
 -D APR_USE_PTHREAD_SERIALIZE
 -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT
 -D APR_HAS_OTHER_CHILD
 -D AP_HAVE_RELIABLE_PIPED_LOGS
 -D DYNAMIC_MODULE_LIMIT=128
 -D HTTPD_ROOT="/etc/httpd"
 -D SUEXEC_BIN="/usr/sbin/suexec"
 -D DEFAULT_SCOREBOARD="logs/apache_runtime_status"
 -D DEFAULT_ERRORLOG="logs/error_log"
 -D AP_TYPES_CONFIG_FILE="conf/mime.types"
 -D SERVER_CONFIG_FILE="conf/httpd.conf" 
```

任何的想法？！我会奖励50 :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T23:01:44.483

从您的服务器状态页面的外观来看，您正在尝试使用线程化的 Apache MPM 作为 mod_php 运行 PHP。许多 PHP 扩展，可能包括 APC 和 Xcache，都不是线程安全的。因此，它们会在负载下频繁崩溃。

您需要将 Apache 切换到 prefork MPM，或者将 PHP 作为 CGI 或 FastCGI 运行。

# jquery - Onclick 更改类的可见性

> ID：15689766
> 
> 赞同：0
> 
> 时间：2013-03-28T18:42:39.723
> 
> 标签：jquery, css

我有一系列按钮和一个 UL，其中所有列表项都具有内联样式 display:none。

当用户单击一个按钮时，我想让任何具有某个类的 LI 可见。作为一个例子，我的代码（完整的非功能 jQuery！）看起来像：

```
<script>
$(document).ready(function() {
    $('.countrySelect').click(function() {
        $(.Canada)
        .css('display','block')
    });
});
</script>

<button type="button" class="countrySelect" name="United-Kingdom">UK</button>
<button type="button" class="countrySelect" name="European-Union">EU</button>
<button type="button" class="countrySelect" name="Canada">Canada</button>

<ul>
  <li><span class="United-States Hosted">Amazon Flexible Payment System</span></li>
  <li><span class="United-States Hosted">Amazon Simple Pay</span></li>
  <li><span class="United-States Canada Onsite">Authorize.net</span></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:45:20.467

```
 $('.countrySelect').click(function() {
        $(".Canada").css('display','block');
    }); 
```

[阅读更多](http://api.jquery.com/category/selectors/)关于 jQuery 选择器的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:47:10.423

尝试这个：

```
$(document).ready(function() {
    $('.countrySelect').click(function() {
        $(".Canada").show();
    });
}); 
```

您需要在选择器周围加上引号，并且您可能会发现 show() 稍微简单一些（特别是因为`<span>`标签默认为 display: inline，而不是 display: block）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T18:51:03.027

你在这里错过了报价`.Canada`。以这种方式尝试：

```
$(document).ready(function() {
    $('.countrySelect').click(function() {
        $('.Canada').css('color','red')
    });
}); 
```

这是工作示例：http: [//jsfiddle.net/SrpVG/](http://jsfiddle.net/SrpVG/)

# c# - 在点击事件、搜索页面时在 GridView 中显示数据

> ID：15689773
> 
> 赞同：0
> 
> 时间：2013-03-28T18:43:07.637
> 
> 标签：c#, asp.net, linq, search, gridview

我在我的页面上放置了一个 gridview 并将其链接到 LinqDataSourceFemale（数据库的女性表），并且我有一个类似下面的搜索事件代码

```
 protected void ButtonSearch_Click(object sender, EventArgs e)
    {
        using(BerouDataContext Data = new BerouDataContext())
        {
              if (DropDownListGender.SelectedItem.Text == "Male")
              {

                  int age = Convert.ToInt32(DropDownListAge.Text);
                  string education = DropDownListEducation.Text.ToString();
                  string maritalstatus = DropDownListMaritalStatus.Text.ToString();
                  //var religion = DropDownListReligion.Text.ToString();
                  string caste = DropDownListCaste.Text.ToString();
                  string city = DropDownListCity.ToString();

                  var SearchResultBoys = Data.Males.Where(tan =>
                      (tan.Age == age)
                      && (tan.Education == education)
                      && (tan.Group == maritalstatus)
                      && (tan.Caste == caste));

                  GridViewMale.DataSourceID = "";
                  GridViewMale.DataSource = SearchResultBoys;
                  GridViewMale.DataBind();
              }
              else if (DropDownListGender.SelectedItem.Text == "Female")
              {
                  int age = Convert.ToInt32(DropDownListAge.Text);
                  string education = DropDownListEducation.Text.ToString();
                  string maritalstatus = DropDownListMaritalStatus.Text.ToString();
                  //var religion = DropDownListReligion.Text.ToString();
                  string caste = DropDownListCaste.Text.ToString();
                  string city = DropDownListCity.ToString();

                  var SearchResultGirls = Data.Females.Where(tan =>
                      (tan.Age == age)
                      && (tan.Education == education)
                      && (tan.Group == maritalstatus)
                      && (tan.Caste == caste));

                  GridViewFemale.DataSourceID = "";
                  GridViewFemale.DataSource = SearchResultGirls;
                  GridViewFemale.DataBind();

              }
        }
    } 
```

单击按钮后不出现网格视图，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:40:32.577

You have to persist the data in some fashion. It appears that after the button is clicked, a postback occurs and you lose it. One thing you might check on where the databinding fires, ensure that it is caught on subsequent postbacks.

Another thing you could do is simply store the data in a session variable, and upon postback re-bind the gridview with the data.

When the data is first retrieved, you could assign it to a session variable:

```
Session.Add("searchResultBoys", SearchResultBoys);
Session.Add("searchResultGirls", SearchResultGirls); 
```

Then for example on subsuquent pageloads you could:

```
GridViewMale.DataSource = (DataTable)Session[searchResultBoys]; //be sure to cast whatever the datasource is, in my example I just used DataTable
GridViewFemale.DataSource = (DataTable)Session[searchResultGirls]; 
```

EDIT:

So in order to persist the data in a session variable, we have to save the var SearchResultBoys and SearchResultGirls into a type (in this case a datatable). Becuase saving the var in a session will just save the query expression and not the result set. Try converting your var SearchResultBoys and SearchResultGirls to this:

```
IEnumerable<DataRow> SearchResultsBoys = Data.Males.Where(tan =>
            (tan.Age == age)
            && (tan.Education == education)
            && (tan.Group == maritalstatus)
            && (tan.Caste == caste)); 
```

Then what we can do is assign that result to a datatable - where it can be stored in memory) and persisted.

```
DataTable dt = SearchResultsBoys.CopyToDataTable<DataRow>(); 
```

Now you can bind the data as before:

```
 GridViewMale.DataSourceID = "";
 GridViewMale.DataSource = SearchResultBoys;
 GridViewMale.DataBind(); 
```

Once that is working for you on the girls and boys data, then I can show you how to persist using a session or global variable.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:46:57.997

删除此`GridViewFemale.DataSourceID = "";`行

你是绑定`gridview`在页面加载里面的 `!IsPostBack`吗？

如果没有绑定，请 `gridview` 在里面绑定！`IsPostBack`在`pageload`事件中

编辑

编码为

```
protected void Page_Load(object sender, EventArgs e)
{
if(!IsPostBack)
{
// here is Bind gridview code .
}
} 
```

# shell - 来自 Grails 应用程序的 bash 命令

> ID：15689783
> 
> 赞同：0
> 
> 时间：2013-03-28T18:43:30.227
> 
> 标签：shell, grails, groovy

我正在使用 grails 应用程序，它需要像这样执行外部 bash 命令：

```
def cmd= "example".execute()
cmd.waitFor() 
```

问题是当我从开发环境运行这个命令时，它执行得很好，但是当我将它部署到 tomcat 时，这个命令不再执行。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:28:58.223

**UPDATE**

It looks like you're invoking an Ant Task from your TaskService.

Without your code, or you adding more debugging, it will be difficult to help.

"On ne sait pas ce que fait TaskService, ajoute du debug dans le code, ca va etre dur d'aider sans détails"

* * *

Try to debug it, by putting this line right after your execute call.

```
cmd.text.eachLine { log.info it } 
```

# excel - VBA删除单个范围的多个范围名称

> ID：15689786
> 
> 赞同：0
> 
> 时间：2013-03-28T18:43:34.933
> 
> 标签：excel, excel-2010, vba

我已经搜索了几个小时的答案，并且无法再搜索了。已经看到很多关于从工作簿或工作表中删除所有范围名称的讨论。但是，我需要从单个范围中删除多个范围名称，同时将其他范围名称留在同一张工作表上和/或同一工作簿中的其他范围。代码可能看起来像这样吗？：

```
Sub Delete_My_Named_Ranges()
   Dim nName As Name
   Dim wbk As Workbook
   Dim Sht As Worksheet
   Dim rgNm As Range, aCell As Range

   Set wbk = Workbooks("testRgNmDelete.xlsm")
   Set Sht = wbk.Worksheets("Sheet1")

   Set rgNm = Sht.Range("$A$1")

        For Each nName In ThisWorkbook.Names
            Set aCell = Range(nName)
            If Not Intersect(aCell, rgNm) Is Nothing Then
                nName.Delete
            End If
         Next
  End Sub 
```

好的，上面的代码适用于固定范围（“$A:$1”）。但我需要能够将 rgNm 设置为变量而不是固定范围。这是一个示例，现在错误出现在语句“Set aCell = Range(nName)”上。

```
Private Sub cboProductType_Change()

Dim wbSKUM As Workbook
Dim ws As Worksheet, wsLUL As Worksheet, wsLU As Worksheet
Dim rgPTL As Range, rgTable1 As Range, rgA1 As Range, rgA1LU As Range
Dim rgNm As Range, rgFormula As Range, aCell As Range
Dim sFormula As String
Dim nName As Name

Set wbSKUM = Workbooks("XBS_SKU_Master.xlsm")
Set ws = wbSKUM.Worksheets("SKUMaster")
Set wsLUL = wbSKUM.Worksheets("LookupLists")
Set wsLU = wbSKUM.Worksheets("Lookup")
Set rgPTL = wsLUL.Range("ProdTypeLookUp")
Set rgTable1 = ws.Range("Table1")
    sFormula = "=SUBSTITUTE(SUBSTITUTE(F2,"" "",""_""),""-"","""")"

 'clear Product Type Lookup List (Column D) to be sure no data remains
 wsLUL.Activate
 Range(Range("F2"), Range("F2").End(xlDown)).Select
 Selection.Cells.Value = vbNullString
    Set rgNm = Selection

    For Each nName In ThisWorkbook.Names
            Set aCell = Range(nName)
            If Not Intersect(aCell, rgNm) Is Nothing Then
                nName.Delete
            End If
    Next 
```

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:00:27.993

`rgName`您收到该错误是因为您在声明后尚未设置。

这是我对你的问题的理解。

假设有一个范围`A1:A10`，`Sheet1`单元格`A2`有一个名称`NM1`，单元格 A5 有一个名称`NM2`，单元格 D10 有一个名称`NM3`

你想要一段代码来删除 Range 中的 Names `A1:A10`ie `NM1`and `NM2`and not`NM3`

如果以上是你想要的，那么试试这个

```
Option Explicit

Sub Sample()
    Dim rgName As Range, aCell As Range
    Dim nName As Name

    Set rgName = Sheets("Sheet1").Range("A1:A10")

    For Each nName In ThisWorkbook.Names
        Set aCell = Range(nName)
        If Not Intersect(aCell, rgName) Is Nothing Then nName.Delete
    Next
End Sub 
```

如果我误解了你的问题，那么你可能想改写一下？

**跟进**

> 作为一个新的 VBA 用户，这对我来说是一个非常有用的站点，但是除了这些小注释之外，我完全不知道如何添加到这个站点。请尝试想象 Excel 2010 中的名称管理器 - 在名称管理器中有 10 个唯一名称，全部用于 =Sheet1!$A$1。我希望 VBA 代码删除所有与 Sheet1!$A$1 相关的名称。我不希望在任何地方删除其他名称。– LostInData 3 分钟前

根据您的上述评论，试试这个

```
Option Explicit

Sub Sample()
    Dim nName As Name

    For Each nName In ThisWorkbook.Names
        If nName.RefersTo = "=Sheet1!$A$1" Then nName.Delete
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-04T21:43:52.570

我认为上面给出的解决方案中缺少一些东西。

为了使用范围对象引用命名范围的范围，您必须使用命名范围的名称属性。因此，不是`Set aCell = Range(nName)`而是`Set aCell = Range(nName.Name)`。

像这样：

```
Option Explicit

Sub Sample()
    Dim rgName As Range, aCell As Range
    Dim nName As Name

    Set rgName = Sheets("Sheet1").Range("A1:A10")

    For Each nName In ThisWorkbook.Names
        Set aCell = Range(nName.Name)
        If Not Intersect(aCell, rgName) Is Nothing Then nName.Delete
    Next
End Sub 
```

# jsp - 试图在文本文件中写入数据

> ID：15689789
> 
> 赞同：0
> 
> 时间：2013-03-28T18:43:39.253
> 
> 标签：jsp

> 我创建了一个名为**User**的 bean 类；它工作正常，因为它适用于 setter 和 getter 属性以及如下所示的类**UserIO**

```
public class UserIO {
public static void add(User user, String filepath) throws IOException{
File file =new File(filepath);
out.println(user.getEmailAddress()+ " | " +user.getFirstName() + " | " +user.getLastName());
out.close();}} 
```

> 最后我从一个jsp文件中调用它，如下所示：

```
<% String firstName = request.getParameter("firstName"); 
   String lastName = request.getParameter("lasttName");
   String emailAddress = request.getParameter("emailAddress");

   ServletContext sc=this.getServletContext();
   String path =sc.getRealPath("/WEB-INF/EmailList.txt");

    User user = new User(firstName, lastName, emailAddress);
    UserIO.add(user, path);

   <%= user.getFirstName() %> 
```

> 该程序运行良好，没有任何异常。用户类也在工作，因为我可以设置和获取值。但是，数据没有写入 EmailList.txt 文件（在 web-inf 目录中，当我使用 RealPath 时，它的路径显示正确）。我正在使用 Netbeans IDE。谁能帮我解决它。此外，在 UserIO 类中，我还尝试了以下代码（它也不起作用：

```
 FileOutputStream fos= new FileOutputStream(filepath, true);
fos.write((user.getEmailAddress()+ " | " + user.getFirstName() + " | " + user.getLastName()).getBytes()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:18:21.263

我发现了我正在做的问题 - 在 NetBeans web-inf 目录中创建了一个名为 EmailList.txt 的文本文件。但是代码会在项目 'build\web\WEB-INF\' 目录中生成并创建一个 txt 文件。并写入数据。此外，这两个代码都有效.... :-)

# javascript - 在 javascript 中解析 json - 长数字被四舍五入

> ID：15689790
> 
> 赞同：15
> 
> 时间：2013-03-28T18:43:40.960
> 
> 标签：javascript, json

我需要解析一个包含长数字的 json（这是在 java servlet 中产生的）。问题是长数字被四舍五入。

执行此代码时：

```
var s = '{"x":6855337641038665531}';
var obj = JSON.parse(s);
alert (obj.x); 
```

输出是：

```
6855337641038666000 
```

在这里看一个例子：http: [//jsfiddle.net/huqUh/](http://jsfiddle.net/huqUh/)

为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T19:08:40.317

正如其他人所说，这是因为这个数字太大了。但是，您可以通过将数字作为字符串发送来解决此限制，如下所示：

```
var s = '{"x":"6855337641038665531"}'; 
```

然后，您可以使用诸如[javascript-bignum](https://github.com/jtobey/javascript-bignum)之类的库来处理数字，而不是使用 JSON.parse()。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-28T18:45:29.373

这个数字太大了。JavaScript 对数字使用双精度浮点数，它们有大约 15 位精度（以 10 为基数）。JavaScript 可以可靠保存的最大整数类似于 2 ^(51)。

解决方案是使用合理的数字。没有真正的方法来处理如此大的数字。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-28T18:46:11.627

JavaScript 可以在不损失精度的情况下处理的最大数字是`9007199254740992`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-12T16:35:28.020

我前段时间遇到过这个问题，我能够使用这个库来解决：[https ://github.com/josdejong/lossless-json](https://github.com/josdejong/lossless-json)

你可以检查这个例子：

```
let text = '{"normal":2.3,"long":123456789012345678901,"big":2.3e+500}';
// JSON.parse will lose some digits and a whole number:
console.log(JSON.stringify(JSON.parse(text)));
// '{"normal":2.3,"long":123456789012345680000,"big":null}'      WHOOPS!!!
// LosslessJSON.parse will preserve big numbers:
console.log(LosslessJSON.stringify(LosslessJSON.parse(text)));
// '{"normal":2.3,"long":123456789012345678901,"big":2.3e+500}' 
```

# c++ - 提升::变体；std::unique_ptr 和复制

> ID：15689793
> 
> 赞同：8
> 
> 时间：2013-03-28T18:43:42.397
> 
> 标签：c++, c++11, unique-ptr, boost-variant

**这个问题确定了不可复制类型不能与 Boost Variant 一起使用**

`Tree`班级

```
template <class T = int>

class Tree{

private:

         class TreeNode{

         public:
                 std::unique_ptr Nodes
                 Move constructors and move assignment + other public members

         private:

                 TreeNode(const TreeNode &other);      (= delete not supported on compiler)
                 TreeNode& operator=(const TreeNode &rhs);    (= delete not supported on compiler)

         };  // End Tree Node Class Definition

         Tree(const Tree &other);     (= delete not supported on compiler)
         Tree& operator=(const Tree &rhs);    (= delete not supported on compiler)

public:

         Move constructors and move assignment + other public members
}; 
```

`TreeVisitor`班级

```
class TreeVisitor : public boost::static_visitor<bool> {
public:
        TreeVisitor() {}

        bool operator() (BinarySearchTree<std::string>& tree) const {
            return searchTree.load(tree);
        }
private:

}; 
```

`TreeVariant`

```
typedef boost::variant<Tree<std::string>, Tree<int>> TreeVariant;     
TreeVariant tree;

Tree<std::string> stringTree;
Tree<int> intTree; 
```

申请`Visitors`如下

```
tree = intSearchTree;
boost::apply_visitor(TreeVisitor(), tree) 
```

还使用 boost::bind 获取所需参数

```
boost::bind(TreeVisitor(), tree, val, keyIndex); 
```

类型的编译器错误

```
error C2248: 'Tree<T>::Tree' : cannot access private member declared in class 'Tree<T>'  <----- related to private copy constructor in Tree (not TreeNode)
tree = stringTree;  <-------  error related to assignment 
```

`Tree`编译正确并经过测试。我该如何解决这些编译错误，这些错误似乎与尝试获取`Tree`类的副本有关，因为`std::unique_ptr`，这是不可能的？

SSCCE

```
<class T = int>

class Tree{

private:

class TreeNode{

public:

    TreeNode() {}
    ~TreeNode() {}  

    TreeNode(TreeNode &&other) : 
        key(other.key), index(other.index), left(std::move(other.left)), right(std::move(other.right)) 
    {
        key = index = left = right = nullptr; 
    }

    TreeNode &operator=(BTreeNode &&rhs)
    { 
        if(this != &rhs) 
        { 
            key = rhs.key; index = rhs.index; 
            left = std::move(rhs.left); right = std::move(rhs.right); 
            rhs.key = rhs.index = rhs.left = rhs.right = nullptr;
        } 
        return *this;
    }

    TreeNode(const T &new_key, const T &new_index) :
        key(new_key), index(new_index), left(nullptr), right(nullptr) {}

    friend class Tree;

private:

    TreeNode(const BinarySearchTreeNode &other);
    TreeNode& operator=(const BinarySearchTreeNode &rhs);

    std::unique_ptr<TreeNode> left;
    std::unique_ptr<TreeNode> right;

};  // End Tree Node Class Definition

std::unique_ptr<TreeNode> root;

BinarySearchTree(const BinarySearchTree &other);
BinarySearchTree& operator=(const BinarySearchTree &rhs);

public:

Tree() : root(nullptr), flag(false), run(true), leftCount(0), rightCount(0) {}

~Tree() {}

Tree(BinarySearchTree &&other) : root(std::move(other.root)) { other.root = nullptr; }

Tree &operator=(BinarySearchTree &&rhs) 
{ 
    if(this != &rhs)
    { 
        root = std::move(rhs.root); 
        rhs.root = nullptr;
    } 
    return *this;
}

}; 
```

示例使用：

```
bool delete_(){

    while(!instances.empty()){
                    // grab first instance
                    keyIndex = instances.at(0);
                    // compute end of the tuple to delete
                    endIndex = keyIndex + sizeToDelete;

                    // read the first attribute
                    try{
                        temp = boost::trim_copy(dataFile->readData(keyIndex, domainSize));
                    }
                    catch (std::exception &e){
                        printw("Error reading from the data file");
                    }

                    // delete tuple from data file
                    if(!dataFile->deleteTuple(keyIndex, endIndex)){
                        printw("Error attempting to remove tuple");
                        if (writer_ != nullptr)
                            writer_ << "Error attempting to remove tuple";
                        try{
                            printw("%s");
                            // close catalog and search file

                        }
                        catch (std::exception &e){
                            e.what();
                        }
                        // close data file
                        dataFile->closeFile();
                        return false;
                    }

                    try{
                        int val = boost::lexical_cast<int>(temp);

                        searchTree = intSearchTree;

                        boost::bind(BinarySearchTreeVisitor(), searchTree, val, keyIndex);

                        // delete key index from the index file
                        if (!boost::apply_visitor(BinarySearchTreeVisitor(), searchTree)){
                            printw("No index present in index file");
                            try{
                                printw(" ");

                            }
                            catch (std::exception &e){

                            }
                            // close data file
                            dataFile->closeFile();
                            return false;           
                        }
                    }
                    catch(boost::bad_lexical_cast &e){

                        /*
                         * Must be a std::string --- wow who knew
                         */

                        searchTree = stringSearchTree;

                        boost::bind(BinarySearchTreeVisitor(), searchTree, temp, keyIndex);

                        // delete key index from the index file
                        if (!boost::apply_visitor(BinarySearchTreeVisitor(), searchTree)){
                            printw("No index present in index file");
                            try{
                                printw(" ");
                                // close catalog and search file

                            }
                            catch (std::exception &e){
                                e.what();
                            }
                            // close data file
                            dataFile->closeFile();
                            return false;           
                        }

                    }                       

                    // clean up the index file
                    boost::bind(BinarySearchTreeVisitor(), searchTree, keyIndex, sizeToDelete);
                    boost::apply_visitor(BinarySearchTreeVisitor(), searchTree);

                    instances.erase(instances.begin());

                    for(int i= 0; i < instances.size(); i++){
                        instances.assign(i, instances.at(i) - 
                                                            sizeToDelete);
                    }

                }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T18:52:25.247

关于对 的调用`boost::bind()`，您应该[`boost::ref()`](http://www.boost.org/doc/libs/1_53_0/doc/html/ref.html)在通过引用传递对象时使用按值接受相应参数的函数模板，否则将尝试*复制*（在这种情况下会导致编译器错误，因为无法访问复制构造函数） ：

```
boost::bind(TreeVisitor(), boost::ref(tree), val, keyIndex);
//                         ^^^^^^^^^^^^^^^^ 
```

但是，这里有一个更大的问题：`boost::variant`只能保存可复制构造的类型。来自[Boost.Variant 在线文档](http://www.boost.org/doc/libs/1_53_0/doc/html/variant/reference.html#header.boost.variant_hpp)：

> 有界类型的要求如下：
> 
> *   **`CopyConstructible`**[20.1.3]。
>     
>     
> *   析构函数坚持不抛出异常的安全保证。
>     
>     
> *   在变体模板实例化点完成。（请参阅有关`boost::recursive_wrapper<T>`接受不完整类型以启用递归变体类型的类型包装器。）
>     
>     
> 
> **指定为模板参数的每种类型都`variant`必须至少满足上述要求**。[...]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-23T02:05:26.743

```
using Mixed = boost::variant< 
  std::unique_ptr<char>,
  std::unique_ptr<short>,
  std::unique_ptr<int>,
  std::unique_ptr<unsigned long>
>;

int main() {    
  auto md = std::unique_ptr<int>(new int(123));
  Mixed mixed = std::move(md);
  std::cout << *boost::get< std::unique_ptr<int> >(mixed) << std::endl;
  return 0;
} 
```

unique_ptr 是只能移动的，可以在变体中使用。上面的例子可以编译和工作（C++11）。

# jquery - 嵌套的 jQuery Accordion 错误计算高度

> ID：15689799
> 
> 赞同：1
> 
> 时间：2013-03-28T18:44:15.583
> 
> 标签：jquery, html, jquery-ui, dom, jquery-plugins

请指导我。

设置：我正在使用 Jquery UI 创建一个网站。布局如下： 顶部有 3 个 Jquery UI 选项卡，单击时会根据 iframe 交换页面上的内容。第三个选项卡显示一个页面，其中有一个 Jquery 手风琴。

问题：当我单击第三个选项卡时，会显示手风琴，但内容的高度只是一行 :(（所以我根本看不到或阅读手风琴中的任何内容）。内容的高度如果我打开survey.html，它会完美显示，但如果我通过index.html（嵌套调用）打开它只是一行。

我已经尝试过的内容：我在网上阅读并知道可能是我必须先初始化手风琴小部件，然后再初始化选项卡，因为显然当页面加载时手风琴的高度计算错误。我尝试了一些东西，但无法弄清楚任何事情，因为我是新手。请提出一些解决方案。

调用顺序：文件 index.html 有标签的代码。这个文件，当点击时有 tab3 会在 iframe 中打开另一个页面（survey.html），其中有手风琴。

编码：

```
Index.html CODE:
<head>
      <script>
    $(function() {
        $( "#accordion" ).accordion();
        $("#static-tabbed-panel-div").tabs();
    });
     </script> 
</head>

survey.html code:
<head>
<script>
        $(function() {
        $( "#accordion" ).accordion();

        });
</script> 
```

请指教。

我该怎么做才能先加载手风琴，或者在启动时调整手风琴内容的高度，以便我能正确看到它？

# java - 使用泛型

> ID：15689805
> 
> 赞同：1
> 
> 时间：2013-03-28T18:45:04.200
> 
> 标签：java

如果一段时间后未使用它们，我正在尝试使哈希图中的对象过期。

我有不同类型对象的映射，并希望使用泛型来处理它们以避免代码重复。

```
private Map<String,EvictableObject<ObjectA>> _objectsA = new HashMap<String,EvictableObject<ObjectA>> ();
private Map<String,EvictableObject<ObjectB>> _objectsB = new HashMap<String,EvictableObject<ObjectB>> ();
private Map<String,EvictableObject<ObjectC>> _objectsC = new HashMap<String,EvictableObject<ObjectC>> ();
private Map<String,EvictableObject<ObjectD>> _objectsD = new HashMap<String,EvictableObject<ObjectD>> ();

private void startEvictionTask() {

    Runnable evictionTask = new Runnable() {
        public void run () {
            runEviction(_objectsA);
            runEviction(_objectsB);
            runEviction(_objectsC);
            runEviction(_objectsD);
        }

        private void runEviction (Map<String, EvictableObject<?>> table) {

            final long expirationPeriod = 60 * 60 * 1000; // 60 minutes (in ms)

            synchronized (table) {
                for (Map.Entry<String,EvictableObject<? extends Object>> entry : table.entrySet()) {
                    if (entry.getValue().getAccessedSince() > expirationPeriod)
                        table.remove(entry.getKey());
                }
            }

        }
    };

    MyThreadPool.getScheduledExecutor().scheduleWithFixedDelay(evictionTask, 65*60, 5*60, TimeUnit.SECONDS);
} 
```

但是我尝试过的所有方法似乎都不能作为 runEviction 方法的声明。并且编译器一直说实际参数不能转换为声明的方法参数。

我试过了：

```
private void runEviction (Map<String, EvictableObject<?>> table) 
```

,

```
private void runEviction (Map<String, EvictableObject<B>> table) 
```

,

```
private void runEviction (Map<String, EvictableObject<B extends Object>> table) 
```

和

```
private void runEviction (Map<String, EvictableObject<? extends Object>> table) 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:53:15.793

尝试使`runEviction`方法通用。

```
private <T> void runEviction (Map<String, EvictableObject<T>> table) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T18:54:08.717

尝试将类型信息添加到 runEviction 方法：

```
private <T> void runEviction(Map<String, EvitcableObject<T>> table) {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T19:56:50.650

前面的答案很好。（两者都+1）

但我想补充几点建议。也许我们可以争论它们。

`ObjectBase`请注意，我添加了一个所有`ObjectX`类都必须扩展（或实现）的新类或接口。这里的好处是它使它更加深思熟虑，并使未来维护者的更改保持直截了当。它确实取决于您要选择的对象层次结构。这样可以避免制造任何旧物体`Evictable`。（也许您需要使`String`对象可驱逐。在这种情况下，这将不起作用。）

*这让我想知道是否更好的名称`ObjectBase`是`Evictable`它是一个接口。大概 ...*

但是你需要这个`EvictableObject`来使父类（或接口）的东西工作：

```
public class EvictableObject<T extends ObjectBase> 
```

当然，您已经注意到您必须将这一行更改为：

```
 for (Map.Entry<String,EvictableObject<T>> entry : table.entrySet()) 
```

因为`T`那里需要。

完整的新代码在这里。

```
 private Map<String,EvictableObject<ObjectA>> _objectsA = new HashMap<String,EvictableObject<ObjectA>> ();
    private Map<String,EvictableObject<ObjectB>> _objectsB = new HashMap<String,EvictableObject<ObjectB>> ();
    private Map<String,EvictableObject<ObjectC>> _objectsC = new HashMap<String,EvictableObject<ObjectC>> ();
    private Map<String,EvictableObject<ObjectD>> _objectsD = new HashMap<String,EvictableObject<ObjectD>> ();

    private void startEvictionTask() {

        Runnable evictionTask = new Runnable() {
            public void run () {
                runEviction(_objectsA);
                runEviction(_objectsB);
                runEviction(_objectsC);
                runEviction(_objectsD);
            }

            private <T extends ObjectBase> void runEviction (Map<String, EvictableObject<T>> table) {

                final long expirationPeriod = 60 * 60 * 1000; // 60 minutes (in ms)

                synchronized (table) {
                    for (Map.Entry<String,EvictableObject<T>> entry : table.entrySet()) {
                        if (entry.getValue().getAccessedSince() > expirationPeriod)
                            table.remove(entry.getKey());
                    }
                }

            }
        };

        new Thread(evictionTask).start();
    } 
```

# c++ - 使用 MFC 或 Win32 显示内存缓冲区中的所有位图类型

> ID：15689815
> 
> 赞同：2
> 
> 时间：2013-03-28T18:45:23.793
> 
> 标签：c++, winapi, graphics, mfc, bitmap

目标是显示存储在内存缓冲区中的位图。内存缓冲区的内容与磁盘存储的 .bmp 文件相同。出于性能原因，将这些缓冲区写入磁盘然后显示它们不是一种选择。GDI+ 也不是一个选项。目前，我可以根据需要从内存缓冲区显示每像素 24 位的位图。但是，当我尝试显示每像素 8 位的位图时，图像以错误的颜色显示（即图像中的数字是可识别的；缩放、方向等都是正确的，但一切都是错误的颜色）。

这是我初始化位图标题结构的方法：

```
bfh = *(tagBITMAPFILEHEADER*)buf1;
bih = *(tagBITMAPINFOHEADER*)(buf1+sizeof(tagBITMAPFILEHEADER));
rgb = *(RGBQUAD*)(buf1+sizeof(tagBITMAPFILEHEADER)+sizeof(tagBITMAPINFOHEADER));
bi.bmiColors[0] = rgb;
bi.bmiHeader = bih;
pPixels = (buf1+bfh.bfOffBits); 
```

然后，我尝试了几种不同的方法来创建 HBITMAP，这里有一些：

```
 g_hBmp = CreateDIBitmap(dcPaint, &bih, CBM_INIT, (VOID *) pPixels, &bi, DIB_RGB_COLORS); 
```

或者：

```
g_hBmp = CreateDIBSection(dcPaint, &bi, DIB_RGB_COLORS, (void**) &ppvBits, NULL, 0);
SetDIBits(dcPaint, g_hBmp, 0, bih.biHeight, pPixels, &bi, DIB_RGB_COLORS); 
```

我也尝试了不同的参数：

*   NULL 而不是 CPaintDC 对象
*   DIB_PAL_COLORS 而不是 DIB_RGB_COLORS

我已经转储了存储 .bmp 文件结构的内存缓冲区的内容，并验证了它们与使用 LoadBitmap() 加载时正确显示的磁盘存储的 .bmp 文件相同。

需要强调的是，上述方法适用于每像素 24 位的图像。但是，它不适用于每像素 8 位的图像。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:23:31.300

问题在于，`CreateDIBSection()`每个`DIB_RGB_COLORS`像素（即 24 位）都需要 RGB 值，而您的 8 位位图包含的像素是 RGB 调色板的 8 位索引，存储在`bi-bmiColors`.

因此，您可以选择在预处理步骤中将 8 位位图转换为 24 位 - 例如，为 RGB 值分配内存并查找原始调色板以填充这些值。这样您就可以使用相同的代码来显示结果。或者，您可以使用原始数据创建 HBITMAP，然后将其选择到内存 DC，然后`BitBlt()`将其添加到显示窗口。

除了 GDI 或 GDI+ 之外，其他选项可能是考虑 WIC（Windows 映像组件）和/或 Direct2D。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T00:46:11.723

汉斯说`bi.bmiColors`没有得到正确对待是正确的。而不是直接处理`bi.bmiColors`表格，只需指向`pBitmapInfo`适当的偏移量`BITMAPFILEHEADER`并进行转换。这会自动处理颜色表。是的，`pBitmapInfo`并且`pBitmapInfoHeader`确实指向同一个地方；在每种情况下，他们指向的内容都不同。这两个指针都是`CreateDIBitmap()`函数所需的。

```
pBitmapFileHeader = (LPBITMAPFILEHEADER)buf1;
pBitmapInfoHeader = (LPBITMAPINFOHEADER)(buf1+sizeof(BITMAPFILEHEADER));
pBitmapInfo = (LPBITMAPINFO)(buf1+sizeof(BITMAPFILEHEADER));
pPixels = (buf1+pBitmapFileHeader->bfOffBits); 
```

然后在 OnPaint() 做：

```
g_hBmp = CreateDIBitmap(dcPaint, pBitmapInfoHeader, CBM_INIT, (VOID *) pPixels, pBitmapInfo, DIB_RGB_COLORS); 
```

# c++ - C++ 异常：内存位置的 bad_alloc

> ID：15689817
> 
> 赞同：1
> 
> 时间：2013-03-28T18:45:28.143
> 
> 标签：c++, exception, memory, visual-studio-2012, bad-alloc

> **binary.exe 中 0x7650C41F 处的未处理异常：Microsoft C++ 异常：内存位置 0x003EEE00 处的 std::bad_alloc。**

```
First-chance exception at 0x77983AB3 (ntdll.dll) in binary.exe: 0xC0000005: Access violation reading location 0x6F726369.
First-chance exception at 0x7650C41F in binary.exe: Microsoft C++ exception: std::bad_alloc at memory location 0x003DF0DC.
First-chance exception at 0x7650C41F in binary.exe: Microsoft C++ exception: std::bad_alloc at memory location 0x003DF0DC.
First-chance exception at 0x77983AB3 (ntdll.dll) in binary.exe: 0xC0000005: Access violation reading location 0x6F726369.
First-chance exception at 0x7650C41F in binary.exe: Microsoft C++ exception: std::bad_alloc at memory location 0x003DEA40.
First-chance exception at 0x7650C41F in binary.exe: Microsoft C++ exception: std::bad_alloc at memory location 0x003DEA40.
First-chance exception at 0x7650C41F in binary.exe: Microsoft C++ exception: [rethrow] at memory location 0x00000000.
First-chance exception at 0x7650C41F in binary.exe: Microsoft C++ exception: [rethrow] at memory location 0x00000000.
Unhandled exception at at 0x7650C41F in binary.exe: Microsoft C++ exception: std::bad_alloc at memory location 0x003DEA40.
The program '[7632] binary.exe' has exited with code 0 (0x0). 
```

我不知道我是否犯了新手错误，但每次我尝试运行下面的代码时，我都会得到上面列出的错误 - 从我可以通过各种论坛帖子和错误消息收集的内容来看，有一个问题内存分配，但就我所知。

下面列出的代码是我项目的缩短版本，因为源文件很长，实际上不需要发布。

```
int _tmain(int argc, _TCHAR* argv[])
{
    check(true);
    system("pause");
    return 0;
}

int check(bool initialCheck)
{
    char* path = getDocumentRootA(); strcat(path, "Test//file.test");
    char* filePathA = getDocumentRootA(); strcat(filePathA, "Test2\\file.test");
    char* filePathB = getDocumentRootA(); strcat(filePathB, "Test3\\file.test");
    cout << "Checking if files exists...";
    if (doesFileExist(path) == true)
    {
        cout << "Yes\n";
    } else if (doesFileExist(path) == false) {
        cout << "No\n"; // todo
    }
    cout << "Checking if other files exist...";
    if (doesFileExist(filePathA) == true && doesFileExist(filePathB) == true)
    {
        cout << "Yes\n";
    }
    return 0;
}
char* getDocumentRootA()
{
    CHAR documentRootC[MAX_PATH]; CA2W uDocumentRoot(documentRootC);
    HRESULT result = SHGetFolderPath(NULL, CSIDL_PERSONAL, NULL, SHGFP_TYPE_CURRENT, uDocumentRoot); CW2A documentRoot_T(uDocumentRoot); strcat(documentRoot_T, "\\");
    string documentRootTemp = documentRoot_T; char* documentRoot = const_cast<char*>(documentRootTemp.c_str());
    cout<<documentRoot;
    return documentRoot;
} 
```

可能还值得注意的是，我试图更改代码的第一部分（参见下面的示例），以便`getDocumentRootA()`只调用一次函数，但这并没有解决问题。

```
char* testvar = getDocumentRootA();
char* path = testvar; strcat(path, "Microsoft\\file.test");
char* filePathA = testvar; strcat(filePathA, "Windows\\AppLoc\\file.test");
char* filePathB = testvar; strcat(filePathB, "Windows\\U\\file.test"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:51:45.417

在`getDocumentRootA()`您重新调整指向堆栈分配对象的成员变量的指针时，这很糟糕，因为一旦您离开该函数，它将被清除。更糟糕的是，您不应该修改内部成员，`string`因此存在两个问题：

```
 string documentRootTemp = documentRoot_T; 
  ^^^^^^
  Object on the stack

  char* documentRoot = const_cast<char*>(documentRootTemp.c_str());
                       ^^^^^^
                       Pointer to said object

   return documentRoot;
          ^^^^^
          Returning said pointer 
```

这是您使用该指针的地方：

```
 char* path = getDocumentRootA();
  strcat(path, "Test//file.test");
         ^^^^
         Modifying pointer to object that does not exist anymore 
```

你可能应该只返回一个`std::string`from`GetDocumentRootA()`然后在你需要的地方`check`使用。您可以使用运算符附加到 a ，请参阅此[参考](http://www.cplusplus.com/reference/string/string/operator+=/)。这是一个非常基本的示例，以使我的建议更加具体：`c_str``const char *``+=``char *``std::string`

```
#include <string>
#include <iostream>

std::string getDocumentRootA()
{
   std::string str( "Path//") ;

   return str ;
}

bool doesFileExist( const char *p )
{
   bool ret = false ;

   // Do checking here

   return ret  ;
}

int main()
{
   std::string str2( getDocumentRootA() ) ;

   str2 += "Test//file.test" ;

   std::cout << str2.c_str()  << std::endl ;

   if( doesFileExist( str2.c_str() ))
   {
      std::cout << "Yes" << std::endl ;
   }
   else
   {
      std::cout << "No" << std::endl ;
   }
} 
```

# xml - 代码点 \u0008 不是 Perl 脚本中 XML 中的有效字符

> ID：15689819
> 
> 赞同：1
> 
> 时间：2013-03-28T18:45:35.173
> 
> 标签：xml, perl

我正在尝试从控制台日志中提取错误并使用 Perl 形成 XML，对于某些文件，我收到错误，因为“代码点 \u0008 在 /codepath/getErrors.pl 第 498 行不是 XML 中的有效字符”。

浏览 \u0008 谈到退格字符，但我不确定如何从字符串/文本中删除它。

如果您能帮助我在阅读控制台日志时删除这种控制字符，那就太好了，这样 XML 格式就可以运行而不会出现任何错误。

非常感谢您对此的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T19:23:32.410

退格确实不是[XML 文件中的有效字符](http://www.w3.org/TR/REC-xml/#charsets)。这表明生成“XML”的工具在某种程度上被破坏了。如果可能，请在此处应用修复程序。

如果确实需要，您可以从文件中过滤掉退格键，例如

```
$ perl -pe's/\x08//g' <brokenfile.not-xml >fixedfile.still-not-xml 
```

如果您的文件包含其他控制字符，您可以将正则表达式扩展到整个范围：

```
#filtering forbidden control characters in the ASCII range
$ perl -pe's/[\x00-\x08\x0B-\x0C\x0E-\x1F]//g' <brokenfile.not-xml >fixedfile.still-not-xml 
```

合法的 XML 字符是：

```
Char ::= #x9 | #xA | #xD | [#x20-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF] 
```

但请注意，您的原始文件*不是*XML，并且您使用的任何库都通过抛出错误来做正确的事情。

根据文件（打算）表示的数据，过滤掉控制代码可能会改变该数据的含义。

# java - 如何使用 smack 将用户消息附加到单独的 JTextPane

> ID：15689821
> 
> 赞同：-2
> 
> 时间：2013-03-28T18:45:48.127
> 
> 标签：java, swing, chat, smack

我是 smack API 的新手，我用它创建了一个聊天程序，这似乎非常成功，我使用了一个 JTabbed 窗格，它添加了一个 JSplitPane，它还添加了一个 textArea 客户端在消息中键入的地方和一个插入接收到的消息的 JTextPane . 但问题是每次收到消息时，它都会附加到两个拥有 textPane 的 JTAbbedPane。我真正想要的是每个 JTabbedPane/JtextPAne 应该独立于自身......与用户的每次聊天都应该在特定的选项卡上看到，而不是所有选项卡......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:14:53.317

听起来您正在向每个选项卡添加*相同*的内容。相反，为每个选项卡创建一个*不同的聊天容器实例，如此*[处](https://stackoverflow.com/a/11949899/230513)所示。常用的方法有两种：

*   为任何需要的对象扩展`JPanel`和建立实例变量。

*   [创建一个工厂方法，如此处](https://stackoverflow.com/a/11949899/230513)所示。使用`getClientProperty()`and`putClientProperty()`来存储和检索任何需要的对象。

# python - 如何使用 Google Calendar API 下载日历的 .ics 文件？

> ID：15689826
> 
> 赞同：5
> 
> 时间：2013-03-28T18:46:02.220
> 
> 标签：python, google-api, google-calendar-api

我需要以编程方式从用户的 Google 日历下载所有 .ics 文件。我无法找到使用 Google Calendar v3 API 执行此操作的方法，但我可能错过了一些东西。有没有人对我如何做到这一点有任何提示（在 Python 中）？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-28T17:52:06.437

由于我从谷歌搜索中偶然发现了这一点，后来找到了答案，

使用此链接：

[https://calendar.google.com/calendar/ical/CALENDAR-EMAILADDRESS-HERE/public/basic.ics](https://calendar.google.com/calendar/ical/CALENDAR-EMAILADDRESS-HERE/public/basic.ics)

如果有人知道如何从私人获取（通过提供 api 密钥或其他方式），请发表评论:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:39:34.507

您可以对以下提要执行获取请求：https: [//www.google.com/calendar/ical/calendarID/public/basic.ics](https://www.google.com/calendar/ical/calendarID/public/basic.ics)

该线程有更多关于如何[https://groups.google.com/forum/?fromgroups=#!topic/google-calendar-help-dataapi/bUFJLpoz59g](https://groups.google.com/forum/?fromgroups=#!topic/google-calendar-help-dataapi/bUFJLpoz59g)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-16T17:15:07.867

对于私人日历，可以使用私人地址

例子：
`https://calendar.google.com/calendar/ical/{PRIVATE ADRESS}/basic.ics`

有关私人地址的更多信息，请参阅此链接：https: [//support.google.com/calendar/answer/37648?hl=fr#zippy=%2Cadresse -privée](https://support.google.com/calendar/answer/37648?hl=fr#zippy=%2Cadresse-priv%C3%A9e)

# javascript - 加载静态html时的回调？

> ID：15689837
> 
> 赞同：1
> 
> 时间：2013-03-28T18:46:55.067
> 
> 标签：javascript, jquery, html

我知道如何查看使用 javascript 或 jquery 创建的图像何时加载，例如

```
.loaded(callback(){

}) 
```

或 imagesLoaded 库，

但是我怎么知道在 html 文档中使用普通标签创建的图像何时加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:50:07.320

`$(window).load()`等待 DOM 和所有图像加载，[请参阅这个问题](https://stackoverflow.com/a/545005/1970746)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:58:17.110

你可以简单地这样做：

```
 <img src='my.jpg' id='myImage' />

    $("#myImage").on('load', function(){
      // image loaded .. do something
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:10:26.500

主要问题是图像可能已经加载，也可能尚未加载。我会像往常一样预加载它。如果它已经加载，加载事件仍然会触发。

```
$(function(){

    var src = $("#myimg")[0].src,
        img = new Image();

    $(img).load(function(){
        console.log('image loaded');
    })[0].src = src;

}); 
```

# javascript - 如何将图片上传到jCrop？

> ID：15689839
> 
> 赞同：0
> 
> 时间：2013-03-28T18:47:01.593
> 
> 标签：javascript, jquery, image, upload, jcrop

我使用了从这里找到的代码：[http](http://deepliquid.com/projects/Jcrop/demos.php?demo=thumbnail) ://deepliquid.com/projects/Jcrop/demos.php?demo=thumbnail ，但没有上传功能。我该如何添加？

就像我使用这个函数一样，我该如何实现 jCrop？

```
<form enctype="multipart/form-data" action="save.php" method="POST"> 
<input type="hidden" name="MAX_FILE_SIZE" value="100000" /> 
Choose a file to upload:  <input name="uploadedfile" type="file" /><br /> 
<input type="submit" value="Upload File" /> </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:30:21.533

您不会将图像上传到 jCrop，而是将 jCrop 应用于您的图像元素。

`$(function(){ $('#id_of_your_image_element').Jcrop(); });`

替换`id_of_your_image_element`为您的图像标签的 id，如果您在该标签上没有 id，请添加一个。

# css - CSS 卡片翻转动画在 Safari/Firefox 中位于另一张卡片的后面

> ID：15689840
> 
> 赞同：0
> 
> 时间：2013-03-28T18:47:02.380
> 
> 标签：css, transform, css-transitions

我的屏幕上有两张卡片，当其中一张翻转时，背面会在 Safari 中的另一张卡片后面结束。Chrome 的情况并非如此。而在 Firefox 中，它会暂时落后于另一张卡，但随后会向前弹出。任何帮助，将不胜感激！

拖动卡片，然后单击黑色条将其翻转。

这是html...

```
<div id="flipStage">
    <div class="card" id="bsg">
        <div class="front" id="bsgFront"></div>
        <div class="back" id="bsgBack" style="color: green;">f</div>
        <div class="flipButton"></div>
        <div class="handle"></div>
    </div>
    <div class="card" id="vger">
        <div class="front" id="vgerFront"></div>
        <div class="back" id="vgerBack" style="color: green;">f</div>
        <div class="flipButton"></div>
        <div class="handle"></div>
    </div>
</div> 
```

[这是一个在 Chrome 中工作的 CSS 和 JS 的小提琴，在 Firefox 中而不是在 Safari 中](http://jsfiddle.net/gJaCP/8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:53:41.117

**3D 空间中的 z 轴重叠**

这是一种 3D 动画。活动卡片看起来更大，就好像它在动画的 3D 空间中更近了。鉴于较大的卡片看起来更近，您不会期望较小的卡片（看起来更远）与 z 轴上的较大卡片重叠。

但较大卡的 z 位置实际上并没有改变。它只是通过增加宽度和高度属性来缩放，以模拟在 3D 空间中的 z 轴上移动它。两张卡在 z 轴上仍然占据相同的空间。这就是为什么在轮换过程中小卡片有时会出现在大卡片之上的原因。浏览器正在渲染占据相同空间的两个元素。

**使较大的卡片在 3D 空间中实际上更靠近**

我可以快速组合在一起的最简单的解决方案是在卡片很小的时候（当它们应该更远时）改变它们的 z 位置，以便在 3D 空间中它们实际上更远。

```
.card.inactive {
    -webkit-transform: translate3d(0, 0, -100px);
       -moz-transform: translate3d(0, 0, -100px);
            transform: translate3d(0, 0, -100px);
} 
```

在 HTML 中，所有卡片都以`.inactive`类开头，当卡片被带到前面时，卡片会被重置，以便除前面的卡片之外的所有卡片都有这个类。这是一种笨拙且有些倒退的方式，但它应该传达这个想法。

[更新的演示](http://jsfiddle.net/Matt_Coughlin/RmNcV/2/)

# sql-server - 什么是 SQL Server 通知服务的“服务名称”和“显示名称”

> ID：15689841
> 
> 赞同：0
> 
> 时间：2013-03-28T18:47:03.213
> 
> 标签：sql-server, sql-server-2005

SQL Server 通知服务的“服务名称”和“显示名称”是什么？我需要检查它，但宁愿不将它安装在服务器上只是为了获取名称。

谢谢！

# java - 如何将项目从不同的类添加到 JList

> ID：15689842
> 
> 赞同：0
> 
> 时间：2013-03-28T18:47:06.163
> 
> 标签：java, swing, jbutton, actionlistener, jlist

有两个等级：A 和 B。

A 类有一个空的 JList。B 类有一个 JButton。

所以我想在按下按钮时向列表中添加一个字符串。我得到了布局，但问题在于传递项目。

请问有人可以用简单的方式编码吗？

提前致谢。

# json - 将客户端 Json 下载为 CSV

> ID：15689843
> 
> 赞同：8
> 
> 时间：2013-03-28T18:47:06.343
> 
> 标签：json, node.js, csv, angularjs, download

我使用 angularJS 前端框架和 nodejs/express 作为后端服务器来发送和接收 JSON。后端向前端发送了一个大的 JSON 对象，我想知道是否可以从前端以 CSV 格式下载 JSON 对象。

数据以 json 格式存储在范围变量中：`$scope.data`在角度控制器中。然后我在变量中将数据转换为 CSV 格式的字符串`$scope.CSVdata`。如何从客户端浏览器下载 CSV 数据？

我知道 nodejs 可以设置为以 CSV 格式发送文件，但最好让后端保持干净的 JSON api。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T19:32:20.513

参考[这篇文章](https://stackoverflow.com/a/6740027/586621)，我已经快速演示了如何使用 AngularJS 完成此操作：

[JavaScript 演示（Plunker）](http://plnkr.co/edit/u4r2ufEfUueSC55sWj9f?p=preview)

我已将引用的 Base64 代码包装在服务中，并按以下方式使用它：

```
$scope.downloadCSV = function() {
  var data = Base64.encode($scope.CSVData);
  window.location.href = "data:text/csv;base64," + data;
}; 
```

但是，如评论中所述，此方法有[一些缺点。](http://en.wikipedia.org/wiki/Data_URI_scheme#Disadvantages)我已经从维基百科页面中提取了一些关于这个主题的要点。前往那里查看完整列表。

> *   数据 URI 不会与其包含的文档（例如 CSS 或 HTML 文件）分开缓存，因此每次重新下载包含的文档时都会下载编码数据。
> *   Internet Explorer 8 将数据 URI 的最大长度限制为 32 KB。（Internet Explorer 9 没有这个限制）
> *   在 IE 8 和 9 中，数据 URI 只能用于图像，而不能用于导航或 JavaScript 生成的文件下载。 [7]
> *   Base64 编码的数据 URI 的大小是其二进制等价物的 1/3 倍。（但是，如果 HTTP 服务器使用 gzip 压缩响应，则此开销会减少到 2–3%）
> *   数据 URI 不像普通链接文件那样携带文件名。保存时，通常使用指定 MIME 类型的默认文件名。
> *   [ . . . ]

# ios - CocaPods 导入 AFNetworking 但不导入 OHAttributedLabel

> ID：15689844
> 
> 赞同：4
> 
> 时间：2013-03-28T18:47:08.407
> 
> 标签：ios, cocoapods

我正在使用 CocaPods 将其添加`AFNetowrking`到`OHAttributedLabel`我的项目中。我安装了两个库。`AFNetworking`在我的项目中导入就好了。但`OHAttributedLabel`不是。我不知道为什么！

# 播客文件

```
platform :ios, '6.0'

pod 'AFNetworking'
pod 'OHAttributedLabel' 
```

安装两个库后，当我导入

```
#import "AFHTTPClient.h"
#import "AFJSONRequestOperation.h"
#import "UIImageView+AFNetworking.h" 
```

我没有收到任何错误，一切正常

但是当我尝试导入时

```
#import <OHAttributedLabel/OHAttributedLabel.h>
#import <OHAttributedLabel/NSAttributedString+Attributes.h>
#import <OHAttributedLabel/OHASBasicMarkupParser.h> 
```

我正进入（状态

`'OHAttributedLabel/OHAttributedLabel.h' file not found`

错误

# 吊舱安装输出

```
Resolving dependencies of `./Podfile'
Updating spec repositories

Cocoapods 0.17.0.rc7 is available.

Resolving dependencies for target `default' (iOS 6.0)
Downloading dependencies
Using AFNetworking (1.1.0)
Installing OHAttributedLabel (3.4.1)
Generating support files 
```

建议说

> 确保您的项目正在使用 Pods.xcconfig。要检查此项，请选择您的项目文件，然后再次在第二个窗格中选择它并在第三个窗格中打开“信息”部分。在配置下，您应该为需要安装 pod 的每个配置选择 Pods.xcconfig。

我不确定在哪里添加这个。这就是我的配置的样子

![在此处输入图像描述](../Images/ead4d04568d1c02c708b448893f6d93c.png)

# 编辑

复制 pods.xcconfig 后

![在此处输入图像描述](../Images/9169405ed481bdca4d0c68d663c44d51.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:14:14.340

这可能听起来很傻，但是您是否尝试在工作区而不是您自己的应用程序项目中构建和运行 Pods 项目？我已经犯了很多次，并且看到了类似的错误！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T20:22:46.987

看起来您缺少正确的配置集。

您的项目信息应如下所示

![在此处输入图像描述](../Images/52af7523c38f3b6ee2292f523a82e291.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-29T22:14:39.253

在具有自定义编译器/链接器标志（如 HEADER_SEARCH_PATHS 和/或 OTHER_LDFLAGS（通过“标头搜索路径”或“其他链接器标志”目标设置））的项目上安装 pod 时，您会遇到这些错误。这些设置将覆盖您的 pod 配置文件，因为配置文件的优先级低于目标设置。

要解决此问题，您需要将 $(inherited) 添加到 HEADER_SEARCH_PATHS 和目标构建设置中的其他更改标志。只需像这样将其附加到末尾： ![修改构建设置](../Images/0b5a3b2ca4cdd98181edc3ac1336da92.png)

还要注意的是，当您使用 pod install 安装 pod 时，如果您设置了会受到影响的自定义标志，它应该会用类似这样的消息警告您：

> [!] 从现在开始使用`myprojectname`。
> 
> [!] 目标`myprojectname [Debug]`覆盖$(inherited)` 标志`OTHER_LDFLAGS` 中定义的构建设置`Pods/Pods.xcconfig'. - Use the`，或者 - 从目标中删除构建设置。
> 
> [!] 目标`myprojectname [Debug]`覆盖 $(inherited)` 标志`HEADER_SEARCH_PATHS`中定义的构建设置`Pods/Pods.xcconfig'. - Use the`，或者 - 从目标中删除构建设置。
> 
> [!] 目标`myprojectname [Debug - Release]`覆盖 $(inherited)` 标志`OTHER_LDFLAGS`中定义的构建设置`Pods/Pods.xcconfig'. - Use the`，或者 - 从目标中删除构建设置。
> 
> [!] 目标`myprojectname [Debug - Release]`覆盖 $(inherited)` 标志`HEADER_SEARCH_PATHS`中定义的构建设置`Pods/Pods.xcconfig'. - Use the`，或者 - 从目标中删除构建设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-28T13:09:04.867

转到您的 taget 构建设置 -> 其他链接器标志 -> 双击。将 $(inherited) 添加到新行。

# javascript - RGB到十六进制转换

> ID：15689845
> 
> 赞同：-5
> 
> 时间：2013-03-28T18:47:08.437
> 
> 标签：javascript, hex, rgb

我想要的是：

1.  从元素中获取 RGB 值
2.  将其转换为十六进制
3.  将其放入文本字​​段

**第一个解决方案：**

（取自这个线程[RGB to Hex 和 Hex to RGB](https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb)）

```
function rgbToHex(r, g, b) {
    return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
} 
```

`#aN`问题是：无论我喂它什么，它都只会返回。功能有缺陷还是我做错了什么？

[在此处查看演示](http://codepen.io/hilja/pen/CwlIF)

**第二种解决方案：**

来自与上面提到的同一个帖子。

```
function componentToHex(c) {
    var hex = c.toString(16);
    return hex.length == 1 ? "0" + hex : hex;
}

function rgbToHex(r, g, b) {
    return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
} 
```

如果我将值作为数字传递，则此方法有效，`rgbToHex(255,255,255)`但如果我尝试将数字作为变量提供，则不执行任何操作`rgbToHex(rgbValue)`。（参见演示中的第 19 到 25 行）

[在此处查看演示](http://codepen.io/hilja/pen/stJhB)

所有帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:08:41.213

试试这个：

```
function componentToHex(c) {
  var hex = c.toString(16);
  return hex.length == 1 ? "0" + hex : hex;
}

function rgbToHex(r, g, b) {
  return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
}

//Slap the rel values into the fields
$('.color').click(function(e) {
  e.preventDefault();  

  var rgbVal = $(this).attr('rel');

  var rgbValSplit = rgbVal.split(",");

  for (var i = 0; i < 3; i++) {
    if (!rgbValSplit[i]) {
      rgbValSplit[i] = 0;
    }
  }

  var finalHex = rgbToHex(+rgbValSplit[0], +rgbValSplit[1], +rgbValSplit[2]);

  $('.color-picker-rgb').val(rgbVal);
  $('.color-picker-hex').val(finalHex);

  $('body').css('background', finalHex);
}); 
```

[http://codepen.io/anon/pen/eiqbz](http://codepen.io/anon/pen/eiqbz)

主要问题是您需要像预期的那样传递 3 个参数。另一个问题是它期待的是数字，而不是字符串。因此，当您传递“191”时，`c.toString(16)`将评估为`c`. 如果你给它传递一个数字，比如`191`，它将评估为正确的值。

# xml - XSLT 将每 n 个项目包装在一个新容器中

> ID：15689851
> 
> 赞同：1
> 
> 时间：2013-03-28T18:47:11.970
> 
> 标签：xml, xslt, xslt-1.0

所以我过去写过基本的 XSLT，但我遇到了一个新问题。

我们正在使用网格系统，因此，一个简单的系统是`for-each`不够的。相反，我需要`row`每 3 个项目在我的 HTML 输出中创建一个新项目。

**简而言之**，我需要帮助编写 XSLT（从头开始），以便发生这种情况：

理念：

```
<!-- The below div ("group") should repeat every group -->
<div class="group">
  <h2>Group #</h2>
  <!-- The below div ("row") should repeat every 3 items -->
  <div class="row">
    <!-- The below div ("four columns") should be repeated every item -->
    <div class="four columns">
      <div class="item">...</div>
    </div>
  </div>
</div> 
```

XML：

```
<group name="Group 1">
  <item name="Item 1" />
  <item name="Item 2" />
  <item name="Item 3" />
  <item name="Item 4" />
</group>

<group name="Group 2">
  ...
</group> 
```

它应该是什么输出：

```
<div class="group">
  <h2>Group 1</h2>
  <div class="row">
    <div class="four columns">
      <div class="item">Item 1</div>
    </div>
    <div class="four columns">
      <div class="item">Item 2</div>
    </div>
    <div class="four columns">
      <div class="item">Item 3</div>
    </div>
  </div>

  <div class="row">  
    <div class="four columns">
      <div class="item">Item 4</div>
    </div>
  </div>
</div>

<div class="group">
  <h2>Group 2</h2>
  ...
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T21:28:18.000

假设您有一个希望分组的行数的参数，您将从选择具有当前**组元素的****项目**元素开始，这些元素位于第 1、第 4、第 7 等位置。

 **```
<xsl:apply-templates select="item[position() mod $rows = 1]" mode="group"/> 
```

（注意模式的使用，因为您将有两个模板匹配**项目**元素）

然后，在与此匹配的模板中，您将像这样选择组内的所有项目

```
<xsl:apply-templates select="self::*|following-sibling::item[position() &lt; $rows]"/> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:param name="rows" select="3"/>

   <xsl:template match="group">
      <div class="group">
         <h2><xsl:value-of select="@name"/></h2>
         <xsl:apply-templates select="item[position() mod $rows = 1]" mode="group"/>
      </div>
   </xsl:template>

   <xsl:template match="item" mode="group">
      <div class="row">
         <xsl:apply-templates select="self::*|following-sibling::item[position() &lt; $rows]"/>
      </div>
   </xsl:template>

   <xsl:template match="item">
      <div class="four columns">
         <div class="item"><xsl:value-of select="@name"/></div>
      </div>
   </xsl:template>
</xsl:stylesheet> 
```

应用于以下 XML 时

```
<groups>
    <group name="Group 1">
        <item name="Item 1"/>
        <item name="Item 2"/>
        <item name="Item 3"/>
        <item name="Item 4"/>
    </group>
    <group name="Group 2">
        <item name="Item 1"/>
        <item name="Item 2"/>
        <item name="Item 3"/>
        <item name="Item 4"/>
    </group>
</groups> 
```

以下是输出

```
<a>
   <div class="group">
      <h2>Group 1</h2>
      <div class="row">
         <div class="four columns">
            <div class="item">Item 1</div>
         </div>
         <div class="four columns">
            <div class="item">Item 2</div>
         </div>
         <div class="four columns">
            <div class="item">Item 3</div>
         </div>
      </div>
      <div class="row">
         <div class="four columns">
            <div class="item">Item 4</div>
         </div>
      </div>
   </div>
   <div class="group">
      <h2>Group 2</h2>
      <div class="row">
         <div class="four columns">
            <div class="item">Item 1</div>
         </div>
         <div class="four columns">
            <div class="item">Item 2</div>
         </div>
         <div class="four columns">
            <div class="item">Item 3</div>
         </div>
      </div>
      <div class="row">
         <div class="four columns">
            <div class="item">Item 4</div>
         </div>
      </div>
   </div>
</a> 
```

编辑：在回答您的评论时，如果您想在没有确切数量的列的情况下更改最后一列的类名，您可以使用**xsl:choose**来检查它是否是最后一项，它是位置与所需数量不匹配。

```
<xsl:template match="item">
   <div>
      <xsl:attribute name="class">
         <xsl:choose>
            <xsl:when test="not(following-sibling::item) and position() mod $rows != 0">end</xsl:when>
            <xsl:otherwise>four columns</xsl:otherwise>
         </xsl:choose>
      </xsl:attribute>
      <div class="item">
         <xsl:value-of select="@name"/>
      </div>
   </div>
</xsl:template> 
```**

# rally - 非计划项目的累积流量数据？

> ID：15689853
> 
> 赞同：1
> 
> 时间：2013-03-28T18:47:21.847
> 
> 标签：rally

我了解如何使用 ReleaseCumulativeFlowData 对象获取有关发布的累积流量数据 - 但这需要 ReleaseObjectID。我正在寻找一种方法来为发布中未安排的所有项目获取相同的数据，但似乎我无法查询 ReleaseObjectID 为空的位置。

**有没有办法使用 CumulativeFlow 数据来获取给定日期的未安排故事的故事点数 - 或者我最好的选择是使用 1.x API 解析修订历史日志，还是使用 Lookback API？**

基本上，我想要的是能够表示项目的总范围是如何随时间变化的，包括已安排的项目，以及在积压工作中估计但尚未安排的项目。- 据我所知，没有一种开箱即用的方式来获取这些信息（没有修订日志或现在潜入学习 Lookback API），但我祈祷我错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:31:28.917

我建议学习 Lookback API，因为这正是它旨在回答的问题。

您可以在此处找到文档：[https ://rally1.rallydev.com/analytics/doc/](https://rally1.rallydev.com/analytics/doc/)

例如，如果你说：

```
find:{
    _ProjectHierarchy:279050021,
    _TypeHierarchy: "HierarchicalRequirement",
    Children: null,
    ScheduleState:{$lt:"In-Progress"},
    __At:"current"
},
fields:["ObjectID", "Name", "PlanEstimate"] 
```

您正在为 OID 279050021 的项目下的项目寻找快照，这些项目是故事（HierarchicalRequirements），没有孩子（叶子故事也是如此），处于“进行中”之前的计划状态，我们应该寻找今天有效的快照（“当前”），但您可以将任何[ISO 8601 日期](http://en.wikipedia.org/wiki/ISO_8601)作为字符串放入其中。然后 fields 参数指定要返回的快照的哪些字段。当您了解其中的内容时，使用 fields=true 并使用此 Chrome 插件来漂亮地打印 JSON 响应会很有帮助：[https ://chrome.google.com/webstore/detail/jsonview-and-jsonlint- for/mfjgkleajnieiaonjglfmanlmibchpam](https://chrome.google.com/webstore/detail/jsonview-and-jsonlint-for/mfjgkleajnieiaonjglfmanlmibchpam) 但是，您应该在投入生产时指定所需的确切字段列表，因为 fields=true 限制为 200 个结果。

作为一个完整的 URL，它看起来像：

```
https://rally1.rallydev.com/analytics/v2.0/service/rally/workspace/41529001/artifact/snapshot/query.js?find={_ProjectHierarchy:279050021, _TypeHierarchy: "HierarchicalRequirement", Children: null, ScheduleState:{$lt:"In-Progress"}, __At:"current"}&fields=["ObjectID", "Name", "PlanEstimate"] 
```

但请确保交换您自己的工作区 OID（对于 41529001）和项目 OID（对于 279050021），否则上述 URL 将不适合您。

# c# - 如何从 C# 托管代码调用 VBS 脚本

> ID：15689856
> 
> 赞同：0
> 
> 时间：2013-03-28T18:47:25.327
> 
> 标签：c#, .net, vbscript

你会认为这很简单......从命令行我可以执行

```
c:\windows\system32\cscript c:\windows\system32\iisext.vbs /ListFile 
```

但是当我从托管代码中尝试它时......

```
Process proc = new Process();
proc.StartInfo.FileName = @"c:\windows\system32\cscript";
proc.StartInfo.Arguments = @"c:\windows\system32\iisext.vbs /ListFile";
proc.StartInfo.RedirectStandardOutput = true;
proc.StartInfo.UseShellExecute = false;
proc.StartInfo.CreateNoWindow = true;
proc.Start();
proc.WaitForExit();
using (StreamReader sr = proc.StandardOutput) {
... 
```

我收到此错误：

> *输入错误：找不到脚本文件“c:\windows\system32\iisext.vbs”*

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:59:24.103

汉斯是正确的；问题几乎可以肯定是您在 32 位模式下运行，这意味着 C:\windows\system32 没有指向您认为的位置。（通过使用 Process Monitor 观察文件访问来验证）。

请改用 C:\windows\sysnative，或编译您的应用程序以针对 AnyCPU。

# c# - 从代码隐藏访问母版页上隐藏字段的值

> ID：15689859
> 
> 赞同：3
> 
> 时间：2013-03-28T18:47:30.077
> 
> 标签：c#, asp.net, master-pages, hidden-field

[在我之前的问题](https://stackoverflow.com/q/15682764/72324)的后续行动中，我想从子页面代码隐藏中获取隐藏输入字段的值。

我试过`HtmlInputHidden hdnID = (HtmlInputHidden)Page.Master.FindControl("ctl00_hdnField");`了，但我得到了一个“空”值。

![在此处输入图像描述](../Images/4fc55410a46170894b3991f2c68b2628.png)

母版页的一个片段是：

```
<head runat="server">
    <title>
        <asp:ContentPlaceHolder ID="TitleContent" runat="server"></asp:ContentPlaceHolder>
        <asp:Literal ID="Literal2" runat="server" Text=" : Logistics Management" />
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <link href="~/css/styles.css" rel="stylesheet" type="text/css" />

    <asp:ContentPlaceHolder ID="ScriptCssContent" runat="server">
    </asp:ContentPlaceHolder>

</head>
<body>

<form id="form1" runat="server">
    ......
    ......
    ......
        <div id="container">
        ....
        ....
        ....
                <div id="content" style="z-index:0;">
                <asp:HiddenField ID="hdnField" runat="server" Value=""/>
                ....
                ....
                ....
                        <asp:ContentPlaceHolder ID="MainContent" runat="server">

                        </asp:ContentPlaceHolder>
            </div>
        </div>
</form> 
```

在我的 Child aspx 页面上，我有这个 javascript 块：

```
window.onload = function() {
    var newDate = new Date();
    var hidField = document.getElementById("ctl00_hdnField");

    if (hidField != null)
        hidField.value = newDate.toLocaleString();
} 
```

当我“添加手表”到

> document.getElementById("ctl00_hdnField")

值是正确的。

**问题：**如何从代码隐藏中访问 hdnField 控件中的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T19:23:36.543

所以改变它从

`HtmlInputHidden hdnID = (HtmlInputHidden)Page.Master.FindControl("ctl00_hdnField");`

到

`HiddenField hdnID = (HiddenField)Page.Master.FindControl("hdnField");`

这只是一个铸造的事情 - 通知`HtmlInputHidden`更改为`HiddenField`. 您也不需要该`ct100_`部分 - 这只是 HTML 呈现的元素具有唯一 ID。

您页面上的控件是 asp.net 控件，而不是通用 HTML 控件。

如果你在你的 HTML 中`HtmlInputHidden`放置一个泛型，你会使用它。`<input type="hidden" />`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T18:57:21.450

您应该在 Masterpage 中创建一个包含 HiddenField 的属性。

```
public String HdnFieldValue
{
get
{
    return hidField.Value;
}
set
{
    hidField.Value = value;
}
} 
```

在后面的页面代码中，您可以像这样访问它：

```
((YourCustomMaster)Page.Master).HdnFieldValue 
```

如果有什么不清楚的请问我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T19:01:31.520

我认为您不需要在隐藏字段的 ID 前加上`ctl00_`，只需使用普通 ID：

```
(HtmlInputHidden)Page.Master.FindControl("hdnField"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T19:10:00.463

使用类似的东西：

```
if (Page.Master.FindControl("hdnField") != null)
{
    String myValue = (HtmlInputHidden)Page.Master.FindControl("hdnField").value;
} 
```

# proguard - 如何在proguard中保留扩展和实现的类

> ID：15689860
> 
> 赞同：0
> 
> 时间：2013-03-28T18:47:39.013
> 
> 标签：proguard

我如何保留一个扩展 FragmentActivity 并在 proguard 中实现侦听器的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:34:57.083

确实不支持同时指定“扩展”和“实现”。您可以使用注释或命名约定，或者创建一个公共基类。

# jquery - jquery mobile auto complete - 传递给操作的空值

> ID：15689862
> 
> 赞同：0
> 
> 时间：2013-03-28T18:47:40.483
> 
> 标签：jquery, jquery-mobile, jsonp

有没有人自动完成工作？jquery 的示例代码（适用于 URL）我的操作被调用，但是没有值（null）被传递给操作？？？请帮助（[http://jquerymobile.com/demos/1.3.0-rc.1/docs/demos/widgets/autocomplete/autocomplete-remote.html](http://jquerymobile.com/demos/1.3.0-rc.1/docs/demos/widgets/autocomplete/autocomplete-remote.html)）

```
<script>
        $( document ).on( "pageinit", "#myPage", function() {
            $( "#autocomplete" ).on( "listviewbeforefilter", function ( e, data ) {
                var $ul = $( this ),
                    $input = $( data.input ),
                    value = $input.val(),
                    html = "";
                $ul.html( "" );
                if ( value && value.length > 2 ) {
                    $ul.html( "<li><div class='ui-loader'><span class='ui-icon ui-icon-loading'></span></div></li>" );
                    $ul.listview( "refresh" );
                    $.ajax({
                        url:"@Url.Action("ClientSearch","Schedule")",,
                        dataType: "jsonp",
                        data: {
                            q: $input.val()
                        }
                    })
                    .then( function ( response ) {
                        $.each( response, function ( i, val ) {
                            html += "<li>" + val + "</li>";
                        });
                        $ul.html( html );
                        $ul.listview( "refresh" );
                        $ul.trigger( "updatelayout");
                    });
                }
            });
        });
    </script> 
```

html

```
<div data-role="page" class="jqm-demos" id="myPage">
<ul id="autocomplete" data-role="listview" data-inset="true" data-filter="true" data-filter-placeholder="Find a city..." data-filter-theme="d"></ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:00:24.913

好的，我找到了问题！它应该是：`data: { term: $input.val()}`

# wordpress - 在哪里放置 Wordpress 的 Google API PHP 库？

> ID：15689864
> 
> 赞同：1
> 
> 时间：2013-03-28T18:47:52.037
> 
> 标签：wordpress, google-api-php-client

我想在 Wordpress 网站上使用 Google API PHP 客户端库。

[https://code.google.com/p/google-api-php-client/](https://code.google.com/p/google-api-php-client/)

说明说要在“项目根目录”下安装库，但我不清楚这对 Wordpress 安装意味着什么。我当然想避免在 httpdocs 下使用它；似乎没有充分的理由让代码在网络上可见。什么是最好的课程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:40:36.500

您可以将`google-api`创建的目录（例如 library/includes）放入您的主题文件夹中，然后包含在`functions.php`

例如，在我的主题目录中，我有一个名为 lib 的文件夹，在里面我有一个`framework.php`存放我构建的框架的文件夹。我简单使用

`require_once locate_template( '/lib/framework.php' );`

在里面调用它`functions.php`。

这样您就可以使用 wordpress 功能及其功能......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:16:55.520

我最终做了什么：

我创建了一个新的“libphp”目录，与“httpdocs”同级，并将“google-api-php-client”放在该目录下。

然后，在需要使用该库的 php 文件中，我这样做了：

```
<?php
$path = "/absolute/path/to/libphp";
set_include_path(get_include_path() . PATH_SEPARATOR . $path);

require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_FusiontablesService.php'; 
```

这工作得很好，并且满足了我将 lib 代码排除在 httpdocs 树之外的目标。可能有一种方法可以将其添加到全局包含路径中，从而避免 set_include_path 调用，但现在可以这样做。

# deployment - 静态文件未通过 Eclipse 部署到 apppot

> ID：15689866
> 
> 赞同：2
> 
> 时间：2013-03-28T18:48:07.850
> 
> 标签：deployment, eclipse-plugin

我有一个包含一些静态图像文件的 gwt 应用程序。我将它们放在“war/img”下，并且在本地一切正常。我正在使用 Eclipse 并使用 deploy 命令将所有内容移至 apppot 服务器进行部署。

但是，在我将应用程序部署到 Eclipse 中的应用程序服务器后，我收到一个错误，即 img 目录不存在。它似乎没有被复制。如果可以的话，我会手动执行此操作，但除了 deploy 命令之外，我不知道如何访问 apppot。

奇怪的是，这在一个月前就奏效了——静态图像部署得很好。

# php - 从 cURL 调用 .Net Web API

> ID：15689869
> 
> 赞同：0
> 
> 时间：2013-03-28T18:48:12.387
> 
> 标签：php, asp.net, rest, curl, asp.net-web-api

我正在.Net 中编写一个身份验证提供程序作为 REST 服务，以便更轻松地从 PHP 和 iOS 调用。我使用了 MVC Web API 库，一切正常，我可以从浏览器等调用方法。

**但是当我尝试使用curl -d "something=something" hxxp://myendpoint/api**从 cURL 调用我的 POST 方法时，使用-d在消息正文中传递的数据不会被解释为匹配我的 Web API 类中的方法，我看不到如何访问此表单类型字段。

我无法更改 curl 调用，因为它来自 3rd-party 库并且似乎是正确的，但是尽管我了解 Web API 的设计仅将 uri 参数与操作匹配，但我不明白为什么我无法访问表单来自请求对象的数据（或者我可以？）

```
[HttpPost] public AccessToken Post() {} // Matches but can't access form data
[HttpPost] public AccessToken Post2(string something) {} // Doesn't match, no parameter in curl uri querystring
[HttpPost] public AccessToken Post3(ModelWithOnePropertyCalledSomething data) {} //Matches but can't access form data 
```

这真的是 Web API 无法实现的吗？我必须编写自定义动作选择器类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:39:23.930

This is what I use for manipulating cURL in PHP:

```
$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL, "http://url/"); 
curl_setopt($ch, CURLOPT_USERAGENT, "Useragent"); 
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml; charset=UTF-8')); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
curl_setopt($ch, CURLOPT_USERPWD, "username:password"); 
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_DIGEST); 
curl_setopt($ch, CURLOPT_POST, 1); 
curl_setopt($ch, CURLOPT_TIMEOUT, 10); 
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 3); 
curl_setopt($ch, CURLOPT_POSTFIELDS, "postdata"); 
$data = curl_exec($ch); 
$code = curl_getinfo($ch, CURLINFO_HTTP_CODE); 
```

I understand that you might not be able to modify the PHP code, but if you have access to a server with PHP, you could try this code to see if anything returns from your ASP.NET MVC 3 authentication service. Then make the appropriate edits in your .NET code to make it play nice in PHP.

Here's some example ASP.NET MVC 3 code:

```
[HttpGet]
public ActionResult SomeAction(string someParam)
{
   return View();
} 
```

You will need to edit your routing definitions in your Global.asax.cs code to accept querystring-less urls. For example you could setup a route like this:

```
routes.MapRoute(
            "API/SomeAction/SomeParam",
            "api/someaction/{someParam}",
            new { controller = "API", action = "SomeAction" }
            ); 
```

As far as processing post data from cURL, you'll need to see the content type that is being sent from cURL and handle the data appropriately.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:25:12.637

我找到了我需要的东西，它是这样的：

```
[HttpPost]
    public AccessToken Post2()
    {
        var data = Request.Content.ReadAsFormDataAsync();
        data.Wait();
        var form = data.Result;

        return new AccessToken() { Value = "" };
    } 
```

基本上，请求和显然所有的 web api 框架都是异步的，这很好，但它需要更多的代码行才能使其工作。我猜我需要等待数据，因为 ReadAsFormDataAsync 在我到达下一行代码时可能还没有完成。我还需要检查发布的类型等，以避免出现我不想要的异常。

# php - .htaccess modrewrite 到文件而不是目录

> ID：15689871
> 
> 赞同：0
> 
> 时间：2013-03-28T18:48:23.533
> 
> 标签：php, .htaccess, mod-rewrite

如何在 .htaccess 中使用 ModRewrite 将 /admin 重定向到 admin.php 而不是显示 /admin 目录。

这： RewriteRule ^admin$ admin.php 当前显示 /admin 目录，而不是转到脚本。

我做了一些谷歌搜索，但似乎无法获得正确的关键字。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T18:59:40.287

在您的 htaccess 中使用此代码

```
DirectoryIndex admin.php 
```

# ios - iOS6 Facebook Safari“无法打开页面错误”

> ID：15689873
> 
> 赞同：0
> 
> 时间：2013-03-28T18:48:47.573
> 
> 标签：ios, facebook, ios6

我正在将 Facebook 集成到我的 iOS 应用程序中，并且一直在关注 Facebook 网站上的教程。完成登录代码后，我构建并运行了该应用程序。我没有错误，但是当点击登录时，它会将我重定向到 Facebook Safari 进行身份验证。发生这种情况时，Facebook 只会说发生了错误，稍后再试。我做了一些研究，并查看了下面的问题，我检查了我的 plist 以及我检查以确保我的应用程序 ID 是正确的。我不知道下面出了什么问题，这也是我的 plist 的副本。谢谢你。

[使用单点登录对用户进行身份验证时，Facebook iOS Safari“无法打开页面错误”](https://stackoverflow.com/questions/5131178/facebook-ios-safari-cannot-open-page-error-when-authenticating-user-with-singl)

![在此处输入图像描述](../Images/52ef11db592dc45c4a8c2da260bb94b2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:44:47.940

我在使用 SDK 2.0 版的旧应用程序中遇到了 SSO 问题，这归结为选择它并在 Facebook 开发人员的应用程序中添加了正确的捆绑 ID

# java - 返回数组或 nil 并可选择提供错误消息的 java 方法

> ID：15689875
> 
> 赞同：1
> 
> 时间：2013-03-28T18:49:06.090
> 
> 标签：java

我有一个联系 Web 服务、解析并返回自定义对象数组的方法。该服务有时还会在响应中包含一些错误消息。

我希望我的方法在返回自定义对象数组时，应该能够在类似于输出参数的东西上更新错误消息。

看来 Java 不支持 out 参数。在 Objective-C 中，许多方法将像 &error 这样的指针作为最后一个参数来更新错误。

有没有办法在 Java 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:52:02.260

一种方法是将可变对象（例如列表）传递给您的方法，并让该方法更改其内容。

例如，在这种情况下，您可以传递一个空的错误消息列表。如果没有错误，列表将返回空；否则，该方法会将它发现的任何错误插入到列表中，并且调用者将能够检索它们：

```
public CustomObject[] retrieve(List<ErrorObject> errors) {
    ...
} 
```

呼叫者：

```
...
List<ErrorObject> errors = new ArrayList<ErrorObject>();
CustomObject[] results = wrapper.retrieve(errors);
if (results == null) {
    for (ErrorObject eo : errors) {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:55:51.240

您可以在类中定义一个全局变量。

```
private String errorMessage; 
```

在类中，您将定义您的 Java 方法。

```
public Object[] returnObjects {
    // code goes here
    errorMessage = "Some message";
} 
```

在 Java 中，返回一个空数组比返回 null 更好。遇到空数组时，您将检查 errorMessage 以获取消息。

# html5builder - 停止 HTML5Builder 在 div 标签中包装组件

> ID：15689877
> 
> 赞同：0
> 
> 时间：2013-03-28T18:49:08.850
> 
> 标签：html5builder

全部，

有没有办法阻止 HTML5Builder 将组件包装在 div 标签中？

每个获取输出的组件都有额外的 div 标签，如下所示：

```
<div id="label1_outer" style="display: inline;"><div id="label1"    >Label</div></div> 
```

当我取消选中组件上的“divwrap”时，该组件的输出变为：

```
<div id="label1_outer" style="display: inline;">Label</div> 
```

所以几乎是我要找的。

[请注意，这是使用 Smarty 模板输出标签组件值后的结果代码。]

我正在尝试找到一种方法来停止显示这些额外的 div 标签，因为它正在抛弃我的 CSS，并且重新编码我的 CSS 来处理这个问题会很痛苦。

在用户先前关于编辑 graphics.ini.php 文件的回复之后，我在此处发布了相同的问题：

[https://forums.embarcadero.com/thread.jspa?threadID=80038&tstart=0](https://forums.embarcadero.com/thread.jspa?threadID=80038&tstart=0)

然而，到目前为止，还没有得到回应。

任何有关如何阻止 HTML5Builder 强制输出这些标签的信息都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:17:12.497

万一其他人需要答案，我确实找到了答案。

在H5B安装目录的RPCL文件夹中，有一个名为'smartytemplate.inc.php'的文件。该文件在每个引用的组件周围添加了额外的 div 包装器。

要停止它，请在文件中搜索“_outer”，您将在其中创建额外 div 的 2 个部分进行罚款：

```
if ($v->inheritsFrom('Control'))
{
if ($v->DivWrap) $code="<div id=\"".$v->Name."_outer\" style=\"display:inline;$style\">".$code."</div>";
}
else $code="<div id=\"".$v->Name."_outer\" style=\"display:inline;$style\">".$code."</div>"; 
```

您只需注释掉这部分代码，烦人的包装器就会消失。

希望这会有所帮助！

# api - Brightcove，演绎版，API

> ID：15689880
> 
> 赞同：0
> 
> 时间：2013-03-28T18:49:21.897
> 
> 标签：api, video, brightcove

我一直在尝试使用 innerHTML = renditions. 如果我查看页面的控制台，它会发出调用并给我一个包含每个再现的数组。在我调用它的页面中，尽管它为每个再现返回 [object Object] 并且 FLVURL 也没有我能找到的任何东西都会以 http 形式或任何其他类型返回数组。有没有人有任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:43:52.433

在 php 中，它可能看起来像：

```
 foreach ($bc_video->renditions as $rendition){
      echo $rendition->url;
          ...
         } 
```

要在 jquery 中执行此操作，[这个问题](https://stackoverflow.com/questions/3943494/how-to-loop-through-array-in-jquery)可能会有所帮助。

# ruby-on-rails-3 - 在 Rails 中移动代码的困难

> ID：15689887
> 
> 赞同：0
> 
> 时间：2013-03-28T18:49:59.507
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我在控制器中有以下代码

```
def search 

if params[:name]
      response = client.get_games(params[:name])
      if response.is_a?(Net::HTTPSuccess)
        games = client.parser(response)
        unless games.empty?
          session[:games] = games
          redirect_to game_path(params[:name])
        end
      end
....
....
....
end
end
I have the following code written in my client

def get_games(name)
    find_games(CGI.escape(name))
 end 
```

我发现将一些逻辑移动到客户端中的 get_games 方法时遇到了困难。例如，这样做对我不起作用，我想要一些关于如何去做或者我做错了什么的建议

```
if params[:name]
  games = client.get_games(params[:name])
  unless games.empty?
    session[:games] = games
          redirect_to game_path(params[:name])
        end
      end
...
...
...
end
end

def get_games(name)
response = find_games(CGI.escape(name))
if response.is_a?(NET::HTTPSuccess)
return JSON.parse(response.body)
else 
return nil
end
end 
```

前一种情况有效，但后者不起作用。基本上我只需要帮助将代码移动`def search`到客户端并且只有`redirect_to game_path(params[:name])`在我的控制器中。非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:57:49.453

您正在使用

```
response = client.get_games(params[:name]) 
```

在第一种情况下。如果 get_games 是客户端模型的方法，那么您很可能应该更改

```
response = find_games(CGI.escape(name)) 
```

为了

```
response = get_games(params[:name]) 
```

没有更多代码很难更好地回答。

# c++ - 运行时检查失败 #2 - 变量“db”周围的堆栈已损坏。c++ (帮助)

> ID：15689888
> 
> 赞同：0
> 
> 时间：2013-03-28T18:50:03.833
> 
> 标签：c++, winapi, visual-studio-2012, sqlite

我在尝试启动我的应用程序时遇到此错误，我已将问题隔离到此代码功能，但我不明白为什么会发生这种情况......

```
void checkDB()
{
    sqlite3 *db;
    int rc=0;
    size_t i;
    char *zErrMsg = 0;

    HMODULE hModule = GetModuleHandleW(NULL);
    WCHAR path[MAX_PATH];
    char buffer[MAX_PATH*4];
    int len;
    GetModuleFileNameW(hModule, path, MAX_PATH);
    len =lstrlenW(path);
    path[len-13]='\0';
    buffer[0]='\0';

    wcscat_s(path,sizeof(path),L"test.db\0");
    GetFileAttributes(path);
    if(INVALID_FILE_ATTRIBUTES == GetFileAttributes(path) && GetLastError()==ERROR_FILE_NOT_FOUND)
    {
        wcstombs_s(&i,buffer,sizeof(buffer), path, wcslen(path) );
        rc= sqlite3_open(buffer,&db);

        rc=sqlite3_exec(db,"create table Recipe (Recipe_Num INTEGER PRIMARY KEY AUTOINCREMENT, Recipe_Image VARCHAR(30), Recipe_Name VARCHAR(200))",NULL,0,&zErrMsg);
        sqlite3_free(zErrMsg);
        rc=sqlite3_exec(db,"create table Recipe_Step (Recipe_Num INTEGER, Step_Num INTEGER, Description VARCHAR(2000))",NULL,0,&zErrMsg);
        if(rc!=SQLITE_OK)
        {
            sqlite3_close(db);
        }
        else
        {
        sqlite3_close(db);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:13:02.397

您是否有可能超出某些原始`char`/`WCHAR`缓冲区？

我建议您对代码进行现代化改造并使用**健壮的字符串类**，例如`std::wstring`或`CString[W]`使用它们的运算符重载，而不是原始数组和原始 C 字符串函数，例如`wcscat_s()`（您正在滥用：您应该传递`_countof(path)`而不是`sizeof(path)`，因为“大小”必须是以`WCHAR`s 表示，而不是字节）。

并且要将 Unicode UTF-16 转换为 ANSI/MBCS，您可以使用[ATL 助手，例如`CW2A`](http://msdn.microsoft.com/en-us/library/87zae4a3%28v=vs.80%29.aspx)而不是`wcstombs_s()`.

例如：

```
// Assume Unicode builds, so GetModuleFileName is actually GetModuleFileNameW,
// CString is CStringW, etc.

CString strPath;
WCHAR* pszPath = strPath.GetBuffer(MAX_PATH);
GetModuleFileName(hModule, pszPath, MAX_PATH);
// check GetModuleFileName()'s return value...
strPath.ReleaseBuffer();

// Operate on strPath using operator+= to concatenate strings, etc.
strPath += L"test.db";

....

if(INVALID_FILE_ATTRIBUTES == GetFileAttributes(strPath) && GetLastError()==ERROR_FILE_NOT_FOUND)
{
    // Convert from UTF-16 to ANSI
    CW2A buffer(strPath);
    rc = sqlite3_open(buffer, &db);
    ....

} 
```

* * *

此外，您正在泄漏字符串内存，因为您`sqlite3_free(zErrMsg)`在第二次调用`sqlite3_exec()`. 我建议使用 RAII 模式和 C++ 析构函数的强大功能来尝试编写*自动*释放资源的代码。您可以在这些字符串上编写一个简单的包装器，`sqlite3_free()`在析构函数中调用，例如：

```
class SqlLiteErrorMsg
{
public:   
    SqlLiteErrorMsg()
       : errorMsg(nullptr)
    {}

    ~SqlLiteErrorMsg()
    {
        sqlite3_free(errorMsg);
    }

    char** GetAddressOf()
    {
        return &errorMsg;
    }    

    char* Get()
    {
        return errorMsg;
    }

private:
    // Ban copy
    SqlLiteErrorMsg(const SqlLiteErrorMsg&);
    SqlLiteErrorMsg& operator=(const SqlLiteErrorMsg&);

    char* errorMsg;
}; 
```

可以围绕`sqlite3*`指针构建类似的包装器。

# css - CSS：有没有办法定义总文档高度？

> ID：15689889
> 
> 赞同：0
> 
> 时间：2013-03-28T18:50:04.307
> 
> 标签：css, height, document

我想知道是否有任何方法可以使用 CSS 获取文档高度（而不是浏览器的高度），以便您可以使用它来定义 div 元素的高度。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:01:34.413

我会使用 jQuery 来解决这个问题，因为只有在某些情况下你可以使用 height[这是一个小提琴](http://jsfiddle.net/faceonline/u6gwt/)

小提琴中的代码：

html:

```
<div id="wrapper">
    <div id="inner">

    </div>
</div> 
```

jQuery：

```
$(function() {
    var docHeight = $(document).height();
    $('#wrapper').height(docHeight);
}); 
```

CSS：

```
#wrapper {
    background: rgba(0,0,0,0.2);
}
#inner {
    background: rgba(255,255,255,0.8);
    height: 50%;
} 
```

# asp.net-mvc - Kendo UI MVC 服务器包装器；网格; 数据源; 模型定义 - 缺少方法？

> ID：15689892
> 
> 赞同：0
> 
> 时间：2013-03-28T18:50:12.447
> 
> 标签：asp.net-mvc, grid, kendo-ui, datasource

在为 Kendo MVC Grid DataSource 定义 DataSource 模型时，我只有两种方法来设置模型：

model.Field(p => p.ContractId)。**可编辑**（假）；

model.Field(p => p.ContractId)。**默认值**（0）；

所有其他方法在哪里？当我尝试在服务器端处理网格过滤器时，我需要定义成员类型（使用 Kendo.Mvc.FilterDescriptor）“成员类型”为空。希望这不是 Server-Wrappers 的另一个死胡同。客户端等效数据源允许我定义数据类型......（数字，日期，字符串......）

谢谢-萨布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:36:54.470

该类型是通过您的领域的反射提取的

```
model.Field(p => p.ContractId) 
```

我不认为这是你真正问题的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:29:27.993

在你的道具上使用一个属性

`[Editbale(false)]`

`string MyProp`

# url - selenium IDE - 更改所有测试的基本 URL？

> ID：15689894
> 
> 赞同：3
> 
> 时间：2013-03-28T18:50:31.953
> 
> 标签：url, selenium, selenium-ide

我有一套 15 个测试用例。

我现在想针对不同的基本 URL 运行它们。

有没有办法一次性改变所有15个？

到目前为止，我必须做的是一个一个地改变它们，这是缓慢而乏味的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T21:18:38.187

您可以在文本编辑器中打开所有测试用例 xml。您甚至可以在 selenium IDE 中编辑“源”（参见下面的屏幕截图）。只需删除`<link rel="selenium.base" href="http://dmstaff2.herokuapp.com/" />`每个测试用例中的 url，然后他们将使用您的 Firefox Web 浏览器此时具有的任何 URL。

**[编辑-请注意我的回答，以获取有关执行此操作的重要信息！迈克尔(OP)]**

![在此处输入图像描述](../Images/39b31188dfa8447687d5c3dd1955c2ab.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T13:03:14.097

试试这个方法，更改 URL 应该不是问题 - [http://greenlanternautomationframework.blogspot.com/p/selenium-ide.html](http://greenlanternautomationframework.blogspot.com/p/selenium-ide.html) 我们经常使用环境 QA1 或 QA2 或 localhost 以及所有爵士乐。因此，它有助于使所有测试用例独立于 URL，然后添加 URL。查看整个教程以获得清晰的图片或跳至部分 - 04_GoToURL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T12:41:14.943

您可以创建一个属性文件。

在此属性文件中，您声明了一个 URL 变量。
然后，您可以通过此属性文件获取此变量以设置 url 基数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-19T15:51:46.253

更多的经验出现了以下几点：

是的，您可以（并且应该）按照 amey 的指示删除 HEAD 引用。

**但是**，您会发现这种行为非常令人困惑，因为：

*   当您将基本 URL 更改为新内容时，您经常需要退出并重新输入 Selenium，以便始终将其应用于所有其他情况。

*   如果您更改不是第一个测试用例的用例的基本 URL，您可能会遇到问题。现在通过更改套件中第一个测试用例的基本 URL 来解决此问题，保存套件，退出 Selenium 并重新进入。

Selenium 中显然存在一些错误，这些错误会使更改基本 URL 变得令人困惑，但是一旦您知道要避免的陷阱，您就可以成功地进行更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-21T14:50:40.567

由于没有一个解决方案提到它，这是我的解决方案。

1.  下载 BK ReplaceEM

2.  对于每个 Selenium IDE 文件，替换以下内容：

```
从：

`link rel="selenium.base" href="<OLD URL BASE>" 

to:

link rel="selenium.base" href="<NEW URL BASE>"` 

            回答 #6

赞同：0

时间：2015-09-14T07:27:47.417

我们的 selenium 测试由 CI 工具自动执行，命令如下
`java -jar selenium-server-standalone-2.46.0.jar -htmlSuite "*firefox" "$SITE_URL" "$BUILD_PATH/$TEST_PATH" "$ARTIFACTS_PATH/selenium-results.html"`：

*   `$SITE_URL`- 正在测试的站点的 URL，实际上这个值是一个**基本 url**
*   `$BUILD_PATH/$TEST_PATH`- 测试套件的路径
*   `$ARTIFACTS_PATH/selenium-results.html`- 测试结果的路径，即 selenium 运行的结果。

同时，我们的测试都不包含`<link rel="selenium.base" href="http://www.example.com/" />`, 以实现相同的效果 - 从现有测试中删除它并从 selenium IDE 模板中删除它：

1.  打开 Selenium IDE
2.  转到选项-> 选项
3.  查找格式选项卡
4.  找到一个名为“Template for new test html file”的文本区域并`<link rel="selenium.base" ...`从那里删除该行。

```

# device-driver - 对未知硬件设备寄予期望是不好的做法吗？

> ID：15689896
> 
> 赞同：0
> 
> 时间：2013-03-28T18:50:48.450
> 
> 标签：device-driver

在调整 linux 设备驱动程序以包含某个供应商的另一个设备时，我遇到了大约 20 个与驱动程序匹配的 USB 设备 ID。事实证明，这些设备中的任何一个都使用相同的接口，只需添加新的设备 ID 即可立即连接到另一个工作设备。但是，还剩下大约 30 个不受支持的设备。在这个例子中，该设备是几个不同尺寸的触摸屏之一，假设都基于相同的控制器。

现在我遇到了一个问题，为什么不包括所有设备的设备 ID，甚至是一些通配符匹配，据说可以制作一个可以与任何这些设备一起使用的驱动程序。

当然，某些设备可能不兼容，并导致问题。但是标准化的设备（如 SATA 或 HID 设备）也容易出现不兼容问题。

是否有强烈的论据反对拥有这样一个“通配符”驱动程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:01:41.010

你在这里混合了两种不同的东西。特定设备通过 USB/SATA 等硬件接口（以及通过相应的较低级别硬件接口驱动程序）工作，但这并不意味着一个设备或另一个设备的具体细节 - 这是专有的。一个驱动程序可能支持多个设备，通常它是来自同一供应商的一系列类似设备，但不能从这个事实推断出对其他设备的支持。例如，考虑 USB 相机和 USB 记忆棒。两者都通过相同的 USB 接口工作，但它们的功能完全不同，即使它们来自同一供应商。

# matlab - 使用 Matlab 将椭圆绘制成矩阵图像

> ID：15689897
> 
> 赞同：0
> 
> 时间：2013-03-28T18:50:49.270
> 
> 标签：matlab

我将椭圆绘制成矩阵图像以构建 shepp logan 幻像，它是椭圆的集合，只是我想绘制一个椭圆并将其转换为矩阵图像

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T17:11:09.960

如果您有 PDE 工具箱，则可以使用[pdeellip](http://www.mathworks.com/help/pde/ug/pdeellip.html)。否则你可以写：

```
% input ellipse parameters
theta_grid = linspace(0,2*pi);
phi = 45*180/pi;
X0=10;
Y0=20;
a=40;
b=15;

% the ellipse in x and y coordinates 
ellipse_x_r  = X0 + a*cos( theta_grid );
ellipse_y_r  = Y0 + b*sin( theta_grid );

%Define a rotation matrix
R = [ cos(phi) sin(phi); -sin(phi) cos(phi) ];

%let's rotate the ellipse to some angle phii
r_ellipse = R * [ellipse_x_r;ellipse_y_r];

plot(r_ellipse(1,:),r_ellipse(2,:),'-x') 
```

![在此处输入图像描述](../Images/3f48a1c8cb8477de528e0016696cbf0f.png)

这是另一个选项，而不是 xy 坐标，而是将椭圆“标记”到数组中：

```
a=20;
b=9;
phi=45;
[x y] = meshgrid(-50:50,-50:50);
el=((x-X0)/a).^2+((y-Y0)/b).^2<=1;
imagesc(imrotate(el,phi)); colormap(bone) 
```

![在此处输入图像描述](../Images/f0b2f4aacd04c3a553cbfa72de543051.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T01:23:23.033

嘿，我认为给出的解决方案有问题。平移完成后将应用旋转，这会导致一些奇怪的结果（如果您看一下，绘制的椭圆的中心不是 (10, 20)），因为旋转的中心定义为 0。

我相信正确的答案是：

```
theta_grid = linspace(0,2*pi);
phi = 45*180/pi;
X0=10;
Y0=20;
a=40;
b=15;

% the ellipse in x and y coordinates centered at 0
ellipse_x_r = a*cos( theta_grid );
ellipse_y_r = b*sin( theta_grid );

% Define a rotation matrix
R = [ cos(phi) sin(phi); -sin(phi) cos(phi) ];
n = length(ellipse_x_r);

% let's rotate the ellipse to some angle phii and then translate it to (X0, Y0)
r_ellipse = R * [ellipse_x_r; ellipse_y_r] + repmat([X0; Y0], [1, n]);

plot(r_ellipse(1,:),r_ellipse(2,:),'-x') 
```

感谢您的解决方案，尽管我无法在任何地方找到如何执行此操作，这是我发现的最有用的帖子。

干杯!
巴勃罗

编辑：嘿，SO的代码格式化程序有一个错误。注释中的 ' 不是字符串 =)

# image - 使用 Awesomium 保存图像

> ID：15689902
> 
> 赞同：1
> 
> 时间：2013-03-28T18:50:57.867
> 
> 标签：image, render, awesomium

我正在使用 Awesomium .NET 1.7.0.5 并尝试从页面中检索图像元素并将其保存到内存/磁盘中。在早期版本中，这可以通过调用 webView.Render() 来实现。但是我注意到他们在最近的版本中删除了这个。有什么解决方法吗？

注意：我不想重新下载图像，因此检索图像 URL 然后再次下载不是一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:38:14.967

你可以使用类似的东西：

```
((BitmapSurface) view.Surface).SaveToPNG("c:\\temp\\Page.png"); 
```

最好的

# sql - Rails find_by_sql 查找模型的自引用子集

> ID：15689903
> 
> 赞同：0
> 
> 时间：2013-03-28T18:50:58.850
> 
> 标签：sql, ruby-on-rails, activerecord, model, self-join

我有一个简单的关系：

```
class Organization < ActiveRecord::Base
  belongs_to :parent_organization, class_name: 'Organization'
end 
```

因此，一个组织可以与充当其父级的另一个组织相关联。

我正在寻找一种方法来返回`Organization`当前作为父母的所有实例。

`Organization#parent_organization_id`基本上，以一种有效的方式找到其 id 在列中引用的所有组织，因此我可以设置如下范围：

`Organization.parent`，这将返回所有作为父母的组织。

谢谢，

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:52:38.583

你应该能够做这样的事情：

```
Organization.where("id in (?)", Organization.pluck(:parent_organization_id)) 
```

然后您可以将其用作范围以使使用更容易：

```
scope :parent, where("id in (?)", Organization.pluck(:parent_organization_id)) 
```

# twitter - 动态嵌入式 Twitter 小部件

> ID：15689905
> 
> 赞同：2
> 
> 时间：2013-03-28T18:51:02.707
> 
> 标签：twitter

是否有自动生成 twitter 小部件的方法？我有几百个单独的时间线，我想为其创建小部件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T01:25:45.220

我正在使用它，它非常简单。

[http://tomsbigbox.com/create-a-dynamic-twitter-search-feed/](http://tomsbigbox.com/create-a-dynamic-twitter-search-feed/)

# tabs - 一旦网站打开。不要将焦点移到选项卡/窗口之外

> ID：15689908
> 
> 赞同：0
> 
> 时间：2013-03-28T18:51:13.597
> 
> 标签：tabs, window, focus

1.  我正在尝试创建一个在线测验网站。
2.  如果用户进入了测验页面。他应该无法在其他选项卡或其他窗口上进行搜索。
3.  这给出了真正的答案，无需应对。
4.  如果有机会为此网站包含任何基于网络的代码，请使用正确的代码给我最佳答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:53:38.357

如果您可以控制/知道人们在浏览器的其他选项卡中正在做什么，那将是一个巨大的安全风险；因此，显然是不允许的。您不能阻止用户在其浏览器中使用其他选项卡；而且您完全无法控制他们在您的网站之外可以做什么。

# linux - 如何将当前路径复制到剪贴板？

> ID：15689912
> 
> 赞同：11
> 
> 时间：2013-03-28T18:51:24.923
> 
> 标签：linux, bash, pwd

如何仅使用一个命令复制 bash 终端中的当前路径？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T19:38:32.863

需要`xsel`安装：

```
pwd | xsel -i 
```

（如果您不想要尾随换行符，请使用`printf %s "$(pwd)" | xsel -i`（大部分正确）`pwd | head -c -1 | xsel -i`（完全正确））

* * *

2014 年 8 月更新：`xsel`程序已损坏：请参阅我的错误[报告](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=758599)。

或许你们也可以相处`xclip`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T18:57:36.873

```
pwd | tr -d '\n' | pbcopy 
```

试试这个......我能在手机上想出的最好的。

# javascript - 淘汰赛不更新视图中的值

> ID：15689913
> 
> 赞同：0
> 
> 时间：2013-03-28T18:51:31.187
> 
> 标签：javascript, html, mvvm, knockout.js

我有以下标记：

```
<ul data-bind="foreach: nameList">
    <li data-bind="text: $data"></li>
</ul>
<button data-bind="click: addname">add name</button>
Total names: <span data-bind="text: nameList().length"></span> 
```

我的视图模型如下所示：

```
var viewmodel = {
    nameList: ko.observableArray(["Brian"]),
    number: ko.observable(100),
    addname: function(){
        alert(this.nameList().length);
        this.nameList().push("name");
        alert(this.nameList().length);
    }
};

ko.applyBindings(viewmodel); 
```

每当执行 addname 方法时，alert 都会更新 nameList 数组，但标记不会反映这些更改。那么它有什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:56:16.783

知道了！你需要改变：

```
this.nameList().push("name"); 
```

对此：

```
this.nameList.push("name"); 
```

（因为`nameList`是数组，不是方法）

演示：http: [//jsfiddle.net/G464V/](http://jsfiddle.net/G464V/)

# coffeescript - 如何解决在 sublime text 2 上运行 Coffeescript 的错误？

> ID：15689914
> 
> 赞同：1
> 
> 时间：2013-03-28T18:51:32.713
> 
> 标签：coffeescript, sublimetext2

当我尝试运行咖啡脚本文件时，它无法运行。我可以编译该文件但可以运行它。

这是我的构建设置：

```
{
    "cmd": ["coffee.cmd","-c","$file"]
,   "selector": "source.coffee"
,   "working_dir": "$project_path"
,   "variants":
[
    {
        "name": "Run",
        "cmd": ["coffee", "$file"]
    }
] } 
```

我已经将二进制文件位置放到了环境变量中。每次我运行咖啡脚本时，都会出现以下错误。

```
[Error 2] The system cannot find the file specified
[cmd:  [u'coffee', u'D:\\coffeescript\\demo.coffee']]
[dir:  D:\coffeescript]
[path: C:\ColdFusion9\verity\k2\_nti40\bin;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\;C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\Samsung\AllShare Framework DMS\1.3.06\;C:\Program Files\Samsung\AllShare Framework DMS\1.3.06\64bit\;C:\Program Files (x86)\Calibre2\;D:\4.Application\#Tools\Console2\;C:\Program Files\Java\jdk1.7.0_11\bin\;D:\LINGO14\;C:\Program Files\nodejs\;C:\Ruby200-x64\bin;C:\Users\aungt_000\AppData\Roaming\npm;]
[Finished] 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:16:47.587

如果您按照[建议](http://coffeescript.org/)进行了全局安装，则应该可以在目录中找到`cake.cmd`和文件。您可以将该目录添加到您的.，我还建议将整个路径（例如）硬编码到您的文件中，这样它就不会丢失。`coffee.cmd``%APPDATA%\npm\``PATH``"c:\Documents and Settings\username\Application Data\npm\coffee.cmd"``.sublime-build`

# mediawiki - 用 MediaWiki 中的当前页面写入指向所有链接页面的链接

> ID：15689917
> 
> 赞同：0
> 
> 时间：2013-03-28T18:51:40.783
> 
> 标签：mediawiki

是否有一些 mediawiki 标签或扩展，允许在当前页面上写入指向所有页面的链接，其中包含指向当前页面的链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:12:54.810

`Special:WhatLinksHere/MyPageTitle`您可以通过转到Wiki 中的页面来获取链接到特定文章的所有页面。然后，只需编辑您的文章并添加相关链接。希望这可以帮助。

# jquery - 微小的滚动条从一开始就自动滚动？

> ID：15689927
> 
> 赞同：1
> 
> 时间：2013-03-28T18:52:30.657
> 
> 标签：jquery, html, scrollbar, tinyscrollbar

我使用这个脚本：[http](http://baijs.nl/tinyscrollbar/) ://baijs.nl/tinyscrollbar/ 任何人都知道当用户加载页面时我可以如何做到该脚本从自动启动运行？我没有在选项中看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:10:08.447

您可以使用`tinyscrollbar_update()`带有整数参数的函数。这会将滚动条移动到您传递的整数的位置。使用循环，您将能够“自动滚动”到您想要的位置。

样本：

```
function autoscroll(){
    var oScrollbar = $('#scrollbar1');
    oScrollbar.tinyscrollbar();

    for (var i = 0; i <= 20; i++){
        oScrollbar.tinyscrollbar_update(i);
    }
}

window.onload = autoscroll; 
```

# android - 寻找一个 9-patch 图形创建工具

> ID：15689931
> 
> 赞同：12
> 
> 时间：2013-03-28T18:52:49.743
> 
> 标签：android, nine-patch

draw9patch 似乎很不方便。如果图像很大，绘制所有必需的黑色实线大约需要 5 分钟。很难相信来自谷歌的高度专业的开发人员创造了这样的工具。

有没有更好的应用？还是我做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T18:54:30.853

自己没用过，听说还不错。

[修补工](http://digitalsquid.co.uk/patchworker/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-28T18:56:10.053

它不应该需要 5 分钟。您可以按住shift键并单击第一个像素和最后一个像素来绘制一条直线。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-19T04:04:54.747

我找到了更好的选择。您只需拖放即可完成任务。

[九补丁编辑器官网](http://weblookandfeel.com/nine-patch-editor/)或[直接下载](http://weblookandfeel.com/downloads/gpl/ninepatch-editor-1.15.jar)

![在此处输入图像描述](../Images/d0f5b7a682661aac8d40e5d81f44074d.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-04T03:23:29.693

我一直在为 Android 设备开发一个 9-Patch Editor 工具：

[9 补丁编辑器](https://play.google.com/store/apps/details?id=me.denley.android.ninepatch)

# php - 无法加载 PHP 会话信息

> ID：15689932
> 
> 赞同：0
> 
> 时间：2013-03-28T18:52:55.597
> 
> 标签：php, session, login

我正在尝试用 PHP 制作一个登录系统。我已经让所有数据库工作正常，但试图保存和加载会话，所以用户在浏览我的网站时登录是不工作的。我这样设置会话信息：

```
session_start();
...database code
if($count==1){
//log in info correct, save to session and redirect back.
$_SESSION['username'] =$username;
$_SESSION['loggedin'] = "true";

header("location:../index.php");
} 
```

然后，回到索引页面。

```
 <?php
  session_start();
  if(!isset($_SESSION['loggedin'])){
  echo "You must be logged in!";    
  }else{
  echo "You are logged in"; 
  }
?> 
```

这段代码都发生在页面顶部，在任何 html 之前。即使在登录后，它也会显示“您必须登录”任何帮助都会很棒:) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:16:18.007

如果您正在检查会话，请使用 empty() 而不是 isset()。如果创建了数组，则 isset() 返回 true，而不是如果键匹配。

```
if(!empty($_SESSION['loggedin'])){
  //do the checks to verify the person

} else {
  //they aren't logged in

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:58:36.807

我试过这个，似乎工作找到。只需在 if($count ... 之前声明变量并将 isset 更改为空。

```
 $_SESSION['loggedin'] = "";

        if($count == 1)
        {
            /*same thing */
        }

        if(!empty($_SESSION['loggedin']))
        {
            echo "You are logged in";  
        }else
        {
            echo "You must be logged in!";   
        } 
```

另外imo，我认为将标题放在回声所在的位置会更好。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-28T19:04:32.383

你的cookies被禁用了吗？如果是，请启用并检查。

你的代码看起来很好，如果*$count*真的等于 1，SESSION 应该会轻而易举地工作。

如果不是这种情况，请检查您的 phpinfo，它应该如下所示：

```
 session
Session Support                 enabled
Registered save handlers            files user mm sqlite
Registered serializer handlers  php php_binary wddx 
```

# java - 如何在保留原始窗口的同时退出另一个窗口

> ID：15689937
> 
> 赞同：0
> 
> 时间：2013-03-28T18:53:19.107
> 
> 标签：java, swt, windowbuilder

我正在弹出一个错误窗口。我尝试了各种方法，但没有奏效。我想要做的只是关闭弹出的错误窗口，同时仍然保持原始窗口。

在我的代码中：

```
final Display display = Display.getDefault();
final Shell shell = new Shell(display, SWT.CLOSE | SWT.TITLE | SWT.MIN|SWT.RESIZE);
shell.addFocusListener(new FocusAdapter() {
@Override
public void focusGained(FocusEvent e) {
}
});
shell.setSize(304, 195);
shell.setText("Error Occur") 
```

现在我正在尝试使用绑定在按钮中的代码关闭此窗口：

```
 Button OKbutton = new Button(shell, SWT.NONE);
    OKbutton.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseDown(MouseEvent e) {
            shell.isDisposed();
        }
    });
    OKbutton.setBounds(125, 123, 75, 25);
    OKbutton.setText("OK"); 
```

我也试过了，shell.close(); 但它没有用。但是当我尝试 display.close(); 它关闭了我的原始窗口和错误窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:19:03.103

由于您没有提供实际打开弹出对话框的代码部分，我只能猜测问题出在哪里：

两个窗口都关闭的事实表明您`Shell`对两者都使用相同的。因此，当您关闭一个时，另一个也会关闭。

一个简单的解决方案是为弹出窗口创建一个`new Shell()`，然后您可以关闭它而不会弄乱原来的`Shell`.

* * *

**但是**，SWT 和 JFace 都为弹出对话框提供了类。使用这些将使您的生活更轻松，并使您的应用程序看起来和行为更加原生。

[这里](http://www.vogella.com/articles/EclipseDialogs/article.html)有一个关于 SWT 和 JFace Dialogs 的很好的教程。本教程向您展示了如何使用一组预定义的对话框（例如错误消息、文件选择器...）以及如何创建自己的对话框。

# opengl - 通过 Make 和/或 Qmake 检查 OpenGL 实现？

> ID：15689940
> 
> 赞同：0
> 
> 时间：2013-03-28T18:53:43.233
> 
> 标签：opengl, makefile, implementation, qmake

我想知道是否可以获得 OpenGL 实现（例如 Mesa、Nvidia、AMD 等），以便我可以通过 QMake（理想情况下）或生成文件。请注意，我没有为此使用 Qt 库，只是使用它们的 IDE 和构建系统。

我的项目文件中的一个示例：

```
DEFINES += USE_GL_CORE 
```

这对我的桌面塔非常有用，因为我可以使用 GLSL 3.3 或几乎任何当前版本的 OpenGL，因为我有一个不错的 Nvidia 卡。然而，在我的笔记本电脑上，我运行的是 i5-2410M Sandy Bridge，它在 GPU 上仅支持最高 OpenGL 3.1。虽然我也可以在构建之前注释掉宏，并且任何时候我从 repo 拉到我的笔记本电脑，自动化这个过程会很好。

因此，我希望看看是否可以通过 *nix 查询这样的东西，如果可能的话，Windows 也是如此。

# java - 如何检查文本是否包含 IP 地址？

> ID：15689945
> 
> 赞同：1
> 
> 时间：2013-03-28T18:54:07.053
> 
> 标签：java, ip

我四处寻找，但没有找到任何有效的方法。如何检查文本是否包含 IP 地址？我已经尝试过了，但它不起作用：

```
 public boolean ip(String a_text) {
    String ip_filter = "\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}";
    if (a_text.toLowerCase().contains(ip_filter.toLowerCase())){
        return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T18:58:38.610

您正在尝试在该方法中使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)`contains`。并且该方法不接收正则表达式作为参数。它接收一个纯字符串。您应该尝试使用[Pattern](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)和[Matcher](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html)。

这是一个例子：

```
public static boolean ip(String text) {
    Pattern p = Pattern.compile("^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$");
    Matcher m = p.matcher(text);
    return m.find();
} 
```

**编辑**：我将模式更新为更合适的模式，在[此处](http://answers.oreilly.com/topic/318-how-to-match-ipv4-addresses-with-regular-expressions/)找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:01:33.897

是的，使用匹配，我过去使用的更好的正则表达式是：

```
((0|1[0-9]{0,2}|2[0-9]?|2[0-4][0-9]|25[0-5]|[3-9][0-9]?)\.){3}(0|1[0-9]{0,2}|2[0-9]?|2[0-4][0-9]|25[0-5]|[3-9][0-9]?) 
```

来自[RegExLib](http://regexlib.com/?AspxAutoDetectCookieSupport=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T19:30:10.493

你可以用正则表达式做很多事情。但是你为什么要！？您已经拥有良好且经过测试的库，例如[Guava](http://docs.guava-libraries.googlecode.com/git-history/v10.0.1/javadoc/com/google/common/net/InetAddresses.html)

```
boolean isValid = InetAddresses.isInetAddress("1.2.3.4"); 
```

[应用验证器](http://commons.apache.org/validator/apidocs/org/apache/commons/validator/routines/InetAddressValidator.html)

```
 isValidInet4Address(String) 
```

等等（见[这篇](https://stackoverflow.com/questions/4581877/validating-ipv4-string-in-java)文章）

# python - Python：整数之间的按位或

> ID：15689949
> 
> 赞同：-4
> 
> 时间：2013-03-28T18:54:14.193
> 
> 标签：python, bit-manipulation, bitwise-or

执行按位运算时，我在 python 中看到了一个奇怪的行为

```
>>> bin(4)
'0b100'
>>> bin(9)
'0b1001'
>>> bin(9^4)
'0b1101' 
```

上面我看到了 OR 的预期行为，数字在右侧对齐，每个位都经过 ORed 生成结果。但是，在我看来，当我 OR 两个相同的整数时，结果应该是数字时总是 0。

```
>>> bin(9^9)
'0b0' 
```

这是一个错误还是一个非常奇怪的功能？谁能解释一下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:56:49.330

您正在应用异或 ( `^`)。您正在尝试应用常规的按位或 ( `|`)。

来自[Python 维基](http://wiki.python.org/moin/BitwiseOperators)：

> # x | 是的
> 
> 执行“按位或”。
> 如果 x AND y 的对应位为 0，则输出的每一位为 0，否则为 1。
> 
> # x ^ y
> 
> 执行“按位异或”。
> 如果 y 中的该位为 0，则输出的每个位与 x 中的相应位相同，如果 y 中的该位为 1，则它是 x 中该位的补码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:58:32.900

^ 是[按位异或](http://docs.python.org/2/library/operator.html) （AKA. XOR）

不是**“或”**

* * *

这是异或的真值表

![异或](../Images/e02e456923f81ea50517bc777b8eb964.png)

[资源](https://i.stack.imgur.com/6HooM.gif)

因此，您得到 0，因为只要位相同/相同，XOR 就会输出 0。

在你的情况下

`9^9` 或者`9 XOR 9`会给你，`0`因为两者都是相同的整数。

# javascript - 绑定多个事件

> ID：15689950
> 
> 赞同：3
> 
> 时间：2013-03-28T18:54:14.563
> 
> 标签：javascript, jquery, events, tinymce

如何在 tinymce 上绑定多个事件，以使这些事件（例如 click、keyup 和 change）具有相同的处理函数？

我正在尝试这样，但事件没有触发。

```
tinymce.dom.Event.add(ed, 'click keyup change', function (ed, e) {
     // Handler here...                   
}); 
```

我也试过这个 ed 是我的文件

```
ed.bind('click keyup change', function (ed, e) {
     // Handler here...
}); 
```

但是没有为tinymce定义绑定。我怎样才能得到这个工作？

谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T19:00:53.647

```
function myFunction(ed, e) {
    // do what you want
}

tinymce.dom.Event.add(ed, 'click', myFunction);
tinymce.dom.Event.add(ed, 'keyup', myFunction);
tinymce.dom.Event.add(ed, 'change', myFunction); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T19:01:14.870

制作一个回调函数并将其传递给他们每个人

我**不**相信这`tinymce`能让你一次添加多个事件。

例如：

```
callbackFn = function (ed, e) {
     // Handler here...                   
};
tinymce.dom.Event.add(ed, 'click', callbackFn );
tinymce.dom.Event.add(ed, 'keyup', callbackFn );
... 
```

# javascript - IE 8 支持奇数/偶数斑马样式

> ID：15689954
> 
> 赞同：4
> 
> 时间：2013-03-28T18:54:22.470
> 
> 标签：javascript, jquery, html, css, dom

好的，所以。我知道`nth-child([:even|:odd])`IE 8 不支持。所以现在我被困在试图想出一种方法来应用等于奇数/偶数行的类。我会使用的方式`:nth-child`。我认为我的方法可能会起作用，但是我有一个无序列表，其中包含多个子无序列表，因此零索引似乎受到此问题的影响，并且不能正确应用

我有一个[jsFiddle 示例](http://jsfiddle.net/YLY3G/)来更好地显示问题。例如，如果您注意到，带有“Header 1”和“Header 2”的 LI 的示例处于同一级别，但它们都获得了“偶数”类。

目标是让每个 UL 将其斑马样式应用于其子级的深度一层，并且每个后续 UL 及其子级都这样做。有人能告诉我如何解决这个问题吗？目前，它似乎基于整体 DOM 索引，而不是每个 UL（如果这有意义的话）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:11:48.970

像这样的东西？

```
$('ul > li:nth-child(odd)').addClass('li_odds');
$('ul > li:nth-child(even)').addClass('li_evens'); 
```

[jsFiddle 示例](http://jsfiddle.net/opherv/EQqjx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:37:38.407

我认为值得注意的是，问题源于对 css 语法的一个小误解，`ul > li`意思是“找到所有`li`项目的直接后代`ul`。选定的项目列表将包括你所有的外部 li 以及它们的内部都是 a 的直接后代`ul`。因此，当 jquery 被要求按偶数或奇数（`.filter(':odd|:even')`）过滤时，被过滤的列表比您预期的要大，并且包含来自 DOM 层次结构的多个级别的项目，这导致您的条带化发生在多个层次结构的级别，而不是每个 ul 的基础。

通过`$('ul > li:nth-child(odd|even)')`将 css 选择限制为您打算斑马条纹的列表来纠正此问题。即使在 IE8 中也能正常工作的原因是因为 jquery 正在处理选择而不是原生 css，并且 jquery 已经解决了 IE8 的限制。

# java - 实体的 @Override Equals 方法中的对象 null

> ID：15689957
> 
> 赞同：2
> 
> 时间：2013-03-28T18:54:35.150
> 
> 标签：java, jsf, primefaces, nullpointerexception

我目前正在开发我公司的一个项目。我使用 JSF 和 PrimeFaces。根据项目要求，我使用 PrimeFaces SelectOneMenu 来显示员工列表，如下所示...

```
<p:selectOneMenu id="employee" value="#{employeeBean.employee}"
converter="employeeConverter">
    <f:selectItem itemLabel="" itemValue="" />
    <f:selectItems value="#{employeeBean.employeeList}" var="emp"
    itemLabel="#{emp.name}" itemValue="#{emp}" />
</p> 
```

这是我的 Employee 对象的 Equals 方法...

```
@Override
public boolean equals(Object obj) {
    if (!(obj instanceOf Employee)) {
        return false;
    }
    Employee employee = (Employee) obj;
    return this.id.equals(employee.getId());
} 
```

如果我`Employee employee = new Employee();`在 Employee Bean init Method 处创建员工对象`@PostConstruct public void init(){}`，则表示的员工对象`this`变为 null。如果我不创建员工对象，一切正常。为什么？我不知道。非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T19:21:24.183

这条线，

```
return this.id.equals(employee.getId()); 
```

不是空安全的。`id`它仍然会在is时抛出 NPE `null`，当您使用运算符手动创建实体实例`new`而不设置其任何属性而不是通过 JPA 方式从数据库获取实例时，可能会出现这种情况。相应地修复它：

```
return id != null ? id.equals(employee.id) : employee == this; 
```

请注意，我还通过添加`employee == this`. 另请参阅[合同`equals()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)的第一点。

# umbraco - 如何在 localhost 的 IIS 服务器的根文件夹中安装 umbraco？

> ID：15689961
> 
> 赞同：0
> 
> 时间：2013-03-28T18:54:50.867
> 
> 标签：umbraco

我尝试在 IIS 的根路径 (C:\inetpub\wwwroot) 中安装 Umbraco。我刚刚下载了 umbraco 并压缩到根文件夹中。并从 IIS 管理器添加网站。我从应用程序池中选择了 dot net framework 版本为 4.0，托管管道模式为 Classic。

当我浏览应用程序时，它似乎是一个错误。

## HTTP 错误 404.17 - 未找到

**请求的内容似乎是脚本，不会由静态文件处理程序提供。**

**模块 StaticFileModule
通知 ExecuteRequestHandler
处理程序 StaticFile
错误代码 0x80070032
物理路径 C:\inetpub\wwwroot\umbraco\default.aspx
登录方法匿名
登录用户匿名** 

如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:43:56.437

您的 IIS 中没有安装所有必要的角色

![在此处输入图像描述](../Images/fdc00b61d6ef89ae4d3c6f9b812c2b69.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:30:57.773

我不知道这是否会有所帮助，但我的理解是 Umbraco 需要在集成模式下运行。

你安装的是什么版本？

# jquery - jQuery .show() 将 style="display:inline-block" 添加到元素

> ID：15689966
> 
> 赞同：9
> 
> 时间：2013-03-28T18:55:08.100
> 
> 标签：jquery, css, jquery-ui, show-hide

我正在开发一个我在工作中继承的网站，该网站使用进度条/标签显示捐赠进度。大多数列表将有 9 年（例如 1990-1999），但最后一个列表有 13 年（2000-2012）。因此，我有一个`showHiddenBars()`显示/隐藏相应元素的 javascript 函数。

在第一次加载时，所有内容都正确显示（默认显示 2000-2012），但在隐藏它们然后显示它们之后，它会弄乱布局。从我可以通过谷歌浏览器的检查器得知的是，当使用该`.show()`功能时，它会添加`style="display: inline-block"`到包含标签的 span 元素中。我正在使用`clip`带有显示和隐藏功能的 jQuery UI 的缓动效果。

如何防止 .show 添加 style="display: inline-block;"

完整的 Javascript： http: [//pastebin.com/ZmbQqwWF](http://pastebin.com/ZmbQqwWF)

完整的 HTML： http: [//pastebin.com/mf6W1ahF](http://pastebin.com/mf6W1ahF)

示例站点： http: [//kirsches.us/3000Strong/decadeProgress.html](http://kirsches.us/3000Strong/decadeProgress.html)

的JavaScript：

```
function showHiddenBars() {
    "use strict";
    //show the bars we aren't using.
    $('#decade10').show("clip");
    $('#decade11').show("clip");
    $('#decade12').show("clip");
    $('#decade13').show("clip");
    $('#decade10label').show("clip");
    $('#decade11label').show("clip");
    $('#decade12label').show("clip");
    $('#decade13label').show("clip");
    $('#decade10AmountGiven').show("clip");
    $('#decade11AmountGiven').show("clip");
    $('#decade12AmountGiven').show("clip");
   $('#decade13AmountGiven').show("clip");
}
function hideHiddenBars() {
   "use strict";
    //hide the bars we aren't using.
    $('#decade10').hide("clip");
    $('#decade11').hide("clip");
    $('#decade12').hide("clip");
    $('#decade13').hide("clip");
    $('#decade10label').hide("clip");
    $('#decade11label').hide("clip");
    $('#decade12label').hide("clip");
    $('#decade13label').hide("clip");
    $('#decade10AmountGiven').hide("clip");
    $('#decade11AmountGiven').hide("clip");
    $('#decade12AmountGiven').hide("clip");
    $('#decade13AmountGiven').hide("clip");
} 
```

的HTML：

```
<div id="decadeProgressContainer">
    <span class="titleFontNoBorder" id="decade1label">2000</span>
    <div id="decade1" class="progressBarSpacingTop"></div>
    <span id="decade1AmountGiven">$130,000</span><br />

    <span class="titleFontNoBorder" id="decade2label">2001</span>
    <div id="decade2" class="progressBarSpacing"></div>
    <span id="decade2AmountGiven">$130,000</span><br />

    <span class="titleFontNoBorder" id="decade3label">2002</span>
    <div id="decade3" class="progressBarSpacing"></div>
    <span id="decade3AmountGiven">$130,000</span><br />

    <span class="titleFontNoBorder" id="decade4label">2003</span>
    <div id="decade4" class="progressBarSpacing"></div>
    <span id="decade4AmountGiven">$130,000</span><br />

    <span class="titleFontNoBorder" id="decade5label">2004</span>
    <div id="decade5" class="progressBarSpacing"></div>
    <span id="decade5AmountGiven">$130,000</span><br />

    <span class="titleFontNoBorder" id="decade6label">2005</span>
    <div id="decade6" class="progressBarSpacing"></div>
    <span id="decade6AmountGiven">$130,000</span><br />

    <span class="titleFontNoBorder" id="decade7label">2006</span>
    <div id="decade7" class="progressBarSpacing"></div>
    <span id="decade7AmountGiven">$130,000</span><br />

    <span class="titleFontNoBorder" id="decade8label">2007</span>
    <div id="decade8" class="progressBarSpacing"></div>
    <span id="decade8AmountGiven">$130,000</span><br />

    <span class="titleFontNoBorder" id="decade9label">2008</span>
    <div id="decade9" class="progressBarSpacing"></div>
    <span id="decade9AmountGiven">$130,000</span><br />

    <span class="titleFontNoBorder" id="decade10label">2009</span>
    <div id="decade10" class="progressBarSpacing"></div>
    <span id="decade10AmountGiven">$130,000</span><br />

    <span class="titleFontNoBorder" id="decade11label">2010</span>
    <div id="decade11" class="progressBarSpacing"></div>
    <span id="decade11AmountGiven">$130,000</span><br />

    <span class="titleFontNoBorder" id="decade12label">2011</span>
    <div id="decade12" class="progressBarSpacing"></div>
    <span id="decade12AmountGiven">$130,000</span><br />

    <span class="titleFontNoBorder" id="decade13label">2012</span>
    <div id="decade13" class="progressBarSpacing"></div>
    <span id="decade13AmountGiven">$130,000</span>
</div>
<!--end div #decadeProgressContainer--> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-28T19:03:18.493

以您想要的方式显式设置可见性的样式：不要依赖 hide() 和 show()：

```
element.css('display', 'none'); equivalent of hide()
element.css('display', 'inline-block'); equivalent of show()
element.css('display', 'block'); What you want 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T19:02:41.027

我认为如果元素的默认样式是内联的，那么它将添加内联块，至少对于选择下拉菜单，它也会添加内联块。如果您需要添加块，请使用 .css

```
$('#el').css('display','block'); 
```

您仍然可以使用 .hide() 隐藏，不需要更改

# php - php和javascript计算

> ID：15689970
> 
> 赞同：0
> 
> 时间：2013-03-28T18:55:27.270
> 
> 标签：php, javascript, sql

我只是在学习javascript，希望你们能帮助我。

这是我的代码

下面的代码用于显示我的数据库中的成分名称

```
<?php
$q = pg_query("Select * FROM tblingredients");
while($r = pg_fetch_assoc($q)) {
     echo '
     <li>
     <a href="#" onclick="showOrder(\''.$r_ing['ingredientid'].'\', '.$r_ing['ingprice'].'); return     false;">'.$r_ing['ingredientname'].'</a><br>             
    </li>';
    } 
?> 
```

然后我有这个单独的代码来显示上面所选成分名称的名称和价格。当用户点击下面代码上方的成分名称时，将显示名称以及所选成分的价格。

```
<?php 
$q_order = pg_query("Select * FROM tblingredients");
    while($r_order = pg_fetch_assoc($q_order)) {
    ?>
<div id="<?php echo $r_order['ingredientid'];?>" style="display: none;" class="cart_item">
<div class="item_amount">1x</div>
    <div class="item_name">
        <a href=""><?php echo $r_order['ingredientname']; ?></a> </div>
        <a title="Remove item" rel="tooltip" onclick="deleteItem(<?php echo $r_order['ingredientid'];?>)"    class="close" href="">×</a>
    <div class="item_cart_price"><?php echo $r_order['ingredientprice']; ?></div>
</div><!--cart_item-->
<?php $i++;} ?> 
```

然后下面是我要显示所选成分的总价格的地方。

```
<div id="total"></div> 
```

这是我的javascript代码，这是我的问题

```
<script type="text/javascript">
function showOrder(id, price) {
    document.getElementById(id).style.display = 'block';
    total = parseInt(price, 10);
    document.getElementById('total').innerHTML += total;
};
</script> 
```

上面的 javascript 所做的只是连接价格并且不会添加价格。假设用户点击价格为 5 的成分 A，价格为 10 的成分 B，价格为 20 的成分 C

总显示像这样 -> 51020

我只是在学习 javascript 并尝试将其应用到我的 php 代码中。预先感谢您的回答。

如果用户使用上面的代码单击 X，我也希望删除选定的成分

```
<a title="Remove item" rel="tooltip" onclick="deleteItem(<?php echo $r_order['ingredientid'];?>)" class="close" href="">×</a> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:14:53.447

尝试这样的事情......

```
function showOrder(id, price) {
    document.getElementById(id).style.display = 'block';
    price = parseInt(price, 10);
    oldTotal = parseInt(document.getElementById('total').innerHTML);
    if (isNaN(oldTotal)) {oldTotal = 0;}
    total = price + oldTotal;
    document.getElementById('total').innerHTML = total;
}; 
```

# sql-server - 将数据从 SharePoint 导出到 SQL 中的数据问题

> ID：15689971
> 
> 赞同：0
> 
> 时间：2013-03-28T18:55:29.373
> 
> 标签：sql-server, sql-server-2008, sharepoint-2010, ssis

我使用来自 CodePlex [SSIS 适配器](http://sqlsrvintegrationsrv.codeplex.com/wikipage?title=SharePoint%20List%20Adapters&referringTitle=Documentation)的 SharePoint 列表适配器将我的 SharePoint 列表项传输到 SQL Server 2008。个人/组选择器字段带有垃圾字符，例如

> 10；#马克，布朗 4；#萨曼莎，布朗 100；#蒂姆，柯林斯

如果该字段有多个人，则显示如下：7;#Sigmon, Russel;#18;#Colby, Fox;#23;#Rina, Meyer

我正在设想解决这个问题的两种方法。

1)**确定问题的根源并纠正根源：** 在此选项中，我知道那些 #s 不是随机的，但 SharePoint 为每个人分配了 ID，而 ;# 是分隔符。任何人都可以建议如何摆脱这些 # s 和 ;# 在使用上述 Codeplex 链接创建的包中？有没有其他方法可以从 SharePoint 列表本身解决这个问题？或在包（SSIS）中？

2）**在 SQL 中更正它：** 可能是创建一个存储的过程/函数来去除这些字符并且只使用逗号分隔的干净名称？谁能指点我怎么做？

请让我知道你的想法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:45:23.290

我有一个 SSIS 包，它也应用相同的 SharePoint 适配器从多个 SharePoint 列表位置发布的多个文档中获取信息。我有一个类似的问题，并通过应用 SQL 应用了您正在考虑的第二种方法。SharePoint 记录首先被拉入一个临时临时数据库表中，我在其中应用了一些 SQL UPDATE 语句来清理数据，包括删除随机 # 字符。之后，记录被规范化为最终目标表。在您的情况下，您可能需要应用 SQL 解析值（使用“#”）并可能应用游标以便将每个名称放入单独的记录中......如果这是最终意图。

希望这可以帮助。如果您有任何问题，请告诉我。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T19:54:00.020

这样做...

substring([创建者],charindex('#',[创建者])+1,len([创建者])-charindex('#',[创建者])) as [创建者]

# lync - 是否可以使用 UCMA 和 Lync Server SDK 来实现此方案？

> ID：15689973
> 
> 赞同：0
> 
> 时间：2013-03-28T18:55:42.420
> 
> 标签：lync, ucma

是否可以使用 UCMA 和/或 Lync Server SDK 编写可以执行以下操作的 Web 应用程序：

1.  报告网页中特定用户的任何正在进行的呼叫的状态（活动/暂停和持续时间）
2.  代表用户将活动呼叫置于保持状态/从保持状态中检索
3.  将活动呼叫转接给其他用户

在这种情况下，用户将在其本地计算机上运行 Lync 客户端和 Web 浏览器。我正在寻找一种不需要在他们的桌面上安装自定义软件的方法，并希望能够支持 Windows 和 Mac 操作系统。

谢谢，科里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:28:29.057

据我所知，这可以通过 UCMA 实现，但要控制调用，您需要进行 BackToBack (B2B) 调用。

将所有传入的 SIP 邀请重新路由到应用程序端点，从那里接受呼叫并将 B2B 呼叫设置到原始收件人。B2B 呼叫意味着两个呼叫方将直接相互连接，但 SIP 消息通过您的应用程序端点中继，从而允许端点查看呼叫状态并对其进行操作（重定向/转发/保持/终止/等）。

因为只有 SIP 数据通过您的端点进行路由，而实际的呼叫数据流直接在呼叫方之间，所以这种方法非常具有可扩展性。

通过这样的路由，您的应用程序端点可以跟踪谁在呼叫谁、呼叫了多长时间以及当前呼叫状态是什么（捕获等待事件等）。通过网站或网络服务公开这些信息是微不足道的。

由于所有这些都可以从应用程序端点（服务器）完成，并且您在网站上显示信息，因此操作系统或不同版本的 lync 客户端应该没有问题。

# ios - 将文件保存到具有未知树深度的给定 URL 的树

> ID：15689976
> 
> 赞同：0
> 
> 时间：2013-03-28T18:56:02.510
> 
> 标签：ios, nsfilemanager

假设我有一个指向我的 NSDocumentationDirectory 的 NSURL，但 NSURL 中有未知数量的子目录。写入 URL 时，我是否必须检查路径上的目录是否存在，如果它们不存在则创建它们，或者我可以只写入 NSURL 吗？如果是前者，我该怎么做？

这是我迄今为止尝试过的，但它不起作用。我认为这是因为路径上的子目录不存在。

```
NSData *imageData;
if (imageURL) {
   //imageURL points to an image on the internet.
   NSLog(@"Path components\n%@",[imageURL pathComponents]);
   NSFileManager *fileManager = [[NSFileManager alloc] init];
   NSArray *urls = [fileManager URLsForDirectory:NSDocumentationDirectory inDomains:NSUserDomainMask];
   //Sample of urls[0]: file://localhost/var/mobile/Applications/blahblah/Library/Documentation/
   NSURL *cachedURL = urls[0]; //iOS, so this will be the only entry.
   //Manually add a cache directory name.
   cachedURL = [cachedURL URLByAppendingPathComponent:@"cache"];
   NSArray *passedPathComponents = [imageURL pathComponents];
   for (NSString *pathComponent in passedPathComponents) {
      cachedURL = [cachedURL URLByAppendingPathComponent:pathComponent];
      NSLog(@"Added component %@ making URL:\n%@",pathComponent,cachedURL);
   }
   // Check if image data is cached.
   // If cached, load data from cache.
   imageData = [[NSData alloc] initWithContentsOfURL:cachedURL];
   if (imageData) {
      //Cached image data found
      NSLog(@"Found image data from URL %@",cachedURL);
   } else  {
      // Did not find the image in cache. Retrieve it and store it.
      // Else (not cached), load data from passed imageURL.
      //     Update cache with new data.
      imageData = [[NSData alloc] initWithContentsOfURL:imageURL];
      if (imageData) {
         // Write the imageData to cache
         [imageData writeToURL:cachedURL atomically:YES]; //This is the line I'm asking about
      }
   }
   NSLog(@"Value of urls is %@",urls[0]);
} 
```

我对可以利用的缓存 API 不感兴趣。这个问题的目的是了解如何正确使用 NSFileManager。

编辑：我在想也许我需要在不包括最后一个组件的路径上使用 createDirectoryAtURL:withIntermediateDirectories:attributes:error: 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:06:48.083

我使用 createDirectoryAtURL:... 让它工作，如下所示：

```
 for (NSString *pathComponent in passedPathComponents) {
     if ([pathComponent isEqualToString:lastComponent]) {
        //Now we're looking at the file name. Ensure the directory exists. What we have so far is the directory.
        if ([fileManager createDirectoryAtURL:cachedURL withIntermediateDirectories:YES attributes:nil error:NULL]) {
           //NSLog(@"Directory was created or already exists");
        } else {
           NSLog(@"Error creating directory %@",[cachedURL description]);
        };
     }
     cachedURL = [cachedURL URLByAppendingPathComponent:pathComponent];
  } 
```

# python - 如何在 Python 中将 OpenCV 转换为 RGBA 格式的 PIL？

> ID：15689977
> 
> 赞同：1
> 
> 时间：2013-03-28T18:56:09.517
> 
> 标签：python, opencv, python-imaging-library, webcam

我想将在 OpenCV 中拍摄的网络摄像头转换为 PIL，以便我可以逐像素读取图像像素并获取 RGB 格式。

在使用 PIL 时，我通常会得到 RGBA 格式，但现在我得到的是一个整数，而不是我期望的四个数字。

考虑这个代码片段：

```
cv.SetCaptureProperty(capture, cv.CV_CAP_PROP_FRAME_HEIGHT, my_height)
cv.SetCaptureProperty(capture, cv.CV_CAP_PROP_FRAME_WIDTH, my_width)
cv.SetCaptureProperty(capture, cv.CV_CAP_PROP_FORMAT, cv.IPL_DEPTH_32F)
  img = cv.QueryFrame(capture)
...
    index_value = index_value + 1
    picture_time = current_time + variance
    #Give the cv image to PIL
    im = Image.fromstring("L", cv.GetSize(img), img.tostring())
    #Get the color set out of the images
    width, height = im.size
    image_pixels = im.load()
    total_size = width * height
    colors = {}
    for h in range(height):
        for w in range(width):
            print width, height
            detail = image_pixels[w, h]
            #Filter our transparencies and dark colors
            print detail 
```

当我覆盖网络摄像头时，我得到一个值，比如 14，当我不覆盖时，我得到 140。

如何以 Pythonic 方式从网络摄像头正确抓取图像并获取每个像素的 RGB 值？

# objective-c - NSOutlineView 如何将上下文菜单连接到委托

> ID：15689979
> 
> 赞同：0
> 
> 时间：2013-03-28T18:56:10.750
> 
> 标签：objective-c, cocoa, nsoutlineview

要在右键单击 NSOutlineView 时显示上下文菜单，您必须对其进行子类化并覆盖：

```
- (NSMenu *)menuForEvent:(NSEvent *)theEvent {
    NSPoint pt = [self convertPoint:[theEvent locationInWindow] fromView:nil];
    id item = [self itemAtRow: [self rowAtPoint:pt]];

    // Only the delegate knows how to create a menu based on the item
    return [self createMenuFor: item]; 
} 
```

那么让代理在这里创建菜单并处理菜单操作的正确方法是什么？

编辑 - 所以子类不知道如何创建菜单，所以我就这样做了。可以吗？我只是没有看到任何关于如何与代表在线交流的示例代码。

```
 return [[self delegate] createMenuForItem:item]; 
```

并且显然在我的大纲视图委托中定义了一个方法来返回一个 NSMenu。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:33:14.577

首先，你应该为任何事件调用 super ，除了 when `([theEvent type] == NSRightMouseDown)`。我不确定这是您的问题，但这是一个很好的起点。

其次，这不是委托方法，因此它与连接任何委托无关。你可以放心地忽略它。

第三，您*确定*已在 Interface Builder 中将大纲视图的类名设置为您的子类（您在其中实现上述子类）的名称，或者（如果您在代码中创建它）在代码中指定了您的新子类？

# java - 简单的java程序无法运行

> ID：15689980
> 
> 赞同：0
> 
> 时间：2013-03-28T18:56:12.533
> 
> 标签：java

我正在尝试使用 java 1.6 版在 linux 机器上编译和运行 HelloWorld。我得到它编译但不能运行它。我知道该程序至少是正确的。

谁能告诉我如何让愚蠢的程序运行？

我知道这个问题已经被多次提及，但没有找到解决该问题的方法。我使用的编译命令：`javac ExampleProgram.java`. 我使用的运行命令：`java ExampleProgram`

```
//A Very Simple Example
class ExampleProgram {
  public static void main(String[] args){
    System.out.println("I'm a Simple Program");
  }
} 
```

错误：

```
java -classpath . ExampleProgram
Exception in thread "main" java.lang.UnsupportedClassVersionError: ExampleProgram : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: ExampleProgram.  Program will exit. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:04:03.347

您的程序是使用 JDK 1.7 编译的，但您实际上是使用早期版本的 Java 运行它的。

如果您在命令行中调用程序，请键入

```
java -version 
```

查看您实际使用的 Java 版本。

或者，如果您使用的是 Eclipse 之类的编辑器，请检查您的 Java 设置。

另一种解决方案是使用

```
javac -source 1.6 -target 1.6 SimpleProgram.java 
```

代替

```
javac SimpleProgram.java 
```

# visual-studio - MSVS(2012) 每用户每项目设置（属性表）

> ID：15689985
> 
> 赞同：1
> 
> 时间：2013-03-28T18:56:34.953
> 
> 标签：visual-studio, visual-studio-2012, project, projects-and-solutions

`Microsoft.LANGUAGE.PLATFORM.user.props`已经允许定义用户特定的项目属性。但是我需要为不同的项目设置不同的用户特定选项，最好不要弄乱环境变量或条件宏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:56:34.953

目前我只是`User.props`在每个项目的基础上添加而不将它添加到存储库中。因此，我的队友必须`User.props`手动创建并填写设置。

这种方法感觉有点笨拙和hacky，所以我希望找到更好的方法。

# java - 可以更改 Eclipse 建议的合成访问器警告的“快速修复”吗？

> ID：15689987
> 
> 赞同：0
> 
> 时间：2013-03-28T18:56:40.873
> 
> 标签：java, eclipse, warnings

从匿名类中访问私有成员变量的第一个建议修复方法是：

> 将“foo”的可见性更改为“默认”

我个人从不喜欢 Java 中默认权限的非显式性质。此外，我想要最严格的权限来消除警告。

理想的情况是 Java 具有“文件私有”级别的权限，但事实并非如此。

我的问题是这是否可能以及如何将 Eclipse 建议的修复更改为“受保护”而不是“默认”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:51:30.337

你的问题是矛盾的。`default`可见性修饰符比修饰符**[更具限制性](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)**`protected`。这就是为什么 eclipse 建议这样做的原因。您应该使用该建议值。

如果由于创建字段的子类而需要该字段的 protected 修饰符，那么 eclipse 会准确地建议。所以在较长的开发周期中，你可以先把同一个字段的修饰符改成default，然后再改成protected，但你不应该去默认protected。

如果您想创建高质量的源代码，您对语言功能的个人喜好应该比已建立的最佳实践和编码指南的优先级低得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:56:40.873

尽管可以添加自己的快速修复，但没有简单的方法来更改快速修复。

看到这个问题：[我如何配置 Eclipse 以默认创建受保护的 java 方法而不是私有的？](https://stackoverflow.com/questions/1610007/how-do-i-configure-eclipse-to-create-protected-java-methods-by-default-instead-o)

有[Poor Man's Quick Fix Eclipse 插件](http://www.jave.de/eclipse/poormansquickfix/)，但它是从2008 年开始的，我还没有尝试过。

# c# - 将 api 控制器与服务层连接

> ID：15689989
> 
> 赞同：0
> 
> 时间：2013-03-28T18:56:42.170
> 
> 标签：c#, asp.net-mvc, json, asp.net-web-api

我正在尝试使用 api 控制器 - 我将它连接到服务层以返回结果并且在设置时遇到了一些问题。这就是我所拥有的：

**服务**

```
public IEnumerable<RoleUser> GetUsers(int sectionID)
{
    var _role = DataConnection.GetRole<RoleUser>(sectionID, r => new RoleUser
    {
        Name = RoleColumnMap.Name(r),
        Email = RoleColumnMap.Email(r)
    }, resultsPerPage: 20, pageNumber: 1);
    return _role;
} 
```

**模型**

```
public partial class RoleView
{
    public RoleView()
    {
        this.Users = new HashSet<RoleUser>();
    }
    public ICollection<RoleUser> Users { get; set; }
}

public class RoleUser
{
    public string Name { get; set; }
    public string Email { get; set; }
} 
```

**Api Controller** 我应该连接 RoleUser 还是 RoleView 以及如何在此处设置我的数据以从服务中获取。

```
public class RoleApiController : ApiController
{
    public RoleUser GetRoleUser(int sectionID)
    {
        if (sectionID != null)
        {
            return new RoleUser
            {
               Name = ,
               Email = 
            };
        }
        throw new HttpResponseException(HttpStatusCode.NotFound);
    }
} 
```

**看法**

```
<div>
Name: <span id="name"></span>
</div>
<div>
    Email: <span id="email"></span>
</div>
<script type ="text/javascript" src="~/Scripts/jquery-1.9.1.min.js"></script>
<script type ="text/javascript">
    getRoleUser(9, function (roleUser) {
        $("#name").html(roleUser.Name);
        $("#email").html(roleUser.Email);
    });
    function getRoleUser(id, callback) {
        $.ajax({
            url: "/api/RoleUser",
            data: { id: id },
            type: "GET",
            contentType: "application/json;charset=utf-8",
            statusCod: {
                200: function (roleUser) { callback(roleUser); },
                404: function () { alter("Not Found!"); }
            }
        });
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:16:02.560

您需要做的就是在控制器中为您的服务类添加一个字段：

```
public class RoleApiController : ApiController
{
    private RoleService _roleService = new RoleService();

    public RoleUser GetRoleUser(int sectionID)
    {
        if (sectionID != null)
        {
            return _roleService.GetUsers(sectionID);
        }
        throw new HttpResponseException(HttpStatusCode.NotFound);
    }
} 
```

# actionscript-3 - 如何通过在矩形区域中提供 2 个点来知道 3 个交点

> ID：15689999
> 
> 赞同：1
> 
> 时间：2013-03-28T18:57:16.817
> 
> 标签：actionscript-3, geometry, trigonometry

![问题说明](../Images/fbdfc1276d863da753cff371746128e9.png)

我在游戏中遇到了这个问题。我知道 A、B、C、D、S、T 点。在actionscript 3中，我需要知道点P1、P2、P3，如果可能的话，这些点形成的3个角度。在我需要画线 T:P1, P1:P2, P2:P3

谁能帮助我一些 actionscript 3 代码片段？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:51:53.850

求射线 ST 与射线 DA 的交点，将该点沿线段 AB 反射，得到点 P1。重复获得点 P2 和 P3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:56:57.857

嗯，我不知道任何更高级的矢量数学，但作为一个几何问题，但我认为可以通过将基本三角分解为一个由正确组成的问题来解决角三角形？

由点 T 和 S 创建的角度可以通过制作一个三角形来找到，将线 TS 视为斜边。该三角形的第三个点将是 (Tx, Sy) 或 (Sx, Ty)。

然后可以计算 P1，因为您知道下一个三角形的角度和长度，即边 Ax 到 Tx 这给出了点 P 以及角度 beta。

P2 可以通过使用角度 beta 并知道 P1.y 到 Dy..之间的距离来计算，这形成了下一个三角形的另一条腿。这也给出了角度增量。

最后，可以计算 P3，因为您知道该三角形 1 边的角度和长度：角度 delta 和 P2.x 到 Cx 的线