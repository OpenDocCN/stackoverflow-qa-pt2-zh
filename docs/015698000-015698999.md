# StackOverflow 问答 15698000-15698999

# iphone - 是否可以更改捆绑标识符？

> ID：15698000
> 
> 赞同：2
> 
> 时间：2013-03-29T05:43:42.877
> 
> 标签：iphone, ios

假设如果用户升级应用程序，我可以将我的应用程序更改为新的捆绑标识符而不影响旧应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:34:21.687

通过更改捆绑标识符，它不会被视为对先前应用程序的更新。对于前。如果我们在具有 2 个不同包标识符的设备中运行相同的应用程序，那么它将创建 2 个应用程序图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:28:46.260

捆绑标识符是您的应用程序的 ID，系统将其用作域，它可以存储设置并唯一地引用您的应用程序。

因此，您无法更改捆绑 ID，但在必须使用捆绑 ID 的情况下，更好的想法是删除以前的应用程序并添加具有新捆绑 ID 的应用程序。

希望这可以帮助。

# python - 这个弹出窗口是如何加载的？

> ID：15698014
> 
> 赞同：-2
> 
> 时间：2013-03-29T05:45:31.760
> 
> 标签：python, xml, openerp

在 MRP 模块中我找到了这个功能。请告诉我这个功能在哪里以及这个按钮在哪里定义。？（我通过代码但无法找到触发的确切位置）

它的流程是 ADD --> 弹出窗口来选择产品 --> 如果选择了，那么这些产品在部分中加载

![带有选择选项的弹出窗口](../Images/72a567dfbc718aaab038840e98ad5b44.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T05:54:53.240

使用 chrome 或 firefox 检查代码元素。我不确定你是如何在 Opera 中做到这一点的。

试试铬：

右键->检查元素->点击左下角的放大镜->选择按钮，就可以看到它定义的HTML了。

火狐：

右键单击->检查元素->使用左下角的鼠标指针按钮单击该按钮，并获取代码。

这两者都非常棒，可以找出您正在寻找的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T07:11:30.893

它是一个 many2many 字段而不是函数

```
move_lines': fields.many2many('stock.move', 'mrp_production_move_ids', 'production_id', 'move_id', 'Products to Consume',
            domain=[('state','not in', ('done', 'cancel'))], readonly=True, states={'draft':[('readonly',False)]}), 
```

# ruby-on-rails - 修改用户更新功能以在允许更改用户密码之前要求并验证当前密码

> ID：15698024
> 
> 赞同：0
> 
> 时间：2013-03-29T05:46:33.607
> 
> 标签：ruby-on-rails, validation

我上面提到的标题是我的任务。当用户输入他当前的密码时，它显示错误，密码不匹配。如何检索当前密码进行比较？我的views/users/_form.html.erb 中的代码如下

```
 <fieldset>
      <legend>Enter User Details</legend>
      <div>
      <%= f.label :name %>:
        <%= f.text_field :name, :size => 40 %>
        </div>
          <% if params[:action ]== "edit" || params[:action]== "update" %>
    <div>
         <%= f.label :current_password, :class => "long_label" %><br />:
        <%= f.password_field :current_password, :size => 40 %>
         </div>
    <% end %>
   <div>
     <%= f.label :password, 'Password' %>:
   <%= f.password_field :password, :size => 40 %>
   </div>
    <div>
    <%= f.label :password_confirmation, 'Confirm' %>:
    <%= f.password_field :password_confirmation, :size => 40 %>
   </div>
    <div>
     <%= f.submit %>
       </div>
     </fieldset> 
```

我的更新控制器中的代码是

```
 def update
        @user = User.find(params[:id])
      if @user.authenticate(params[:user][:current_password])
       cp = params[:user].delete('current_password')
    @user.errors.add(:current_password, 'is not correct') unless @user.authenticate(cp)
respond_to do |format|
if @user.errors.empty? and @user.update_attributes(params[:user])

    format.html { redirect_to user_url, :notice => 'Successfully updated.' }
    format.json { head :no_content }
  else
    format.html { render :action => "edit" }
    format.json { render :json => @user.errors, :status => :unprocessable_entity }
  end
end
end 
```

我的用户模型中的代码如下

```
 class User < ActiveRecord::Base
            attr_accessible :name, :password_digest, :password, :password_confirmation,    :current_password
       # attr_accessor :password validates :name, :presence => true, :uniqueness => true

          #validates :current_password, :presence => true
          validates :password, :presence =>true
          validates_confirmation_of :password, :presence => true
           has_secure_password 
      after_destroy :ensure_an_admin_remains
      private
     def ensure_an_admin_remains
      if User.count.zero?
         raise "Can't delete last user"
     end
       end

    end 
```

这是正确的方法吗？如何编写条件以检查以前的密码？它正在询问模板是否有错误。据我所知，错误不需要模板..但这里是问你我不知道！任何帮助肯定会受到赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:40:46.237

```
<%= f.password_field :currnet_password, :size => 40 %> 
```

错字？尝试`:current_password`代替`:currnet_password`

# django - 如何使用 manage.py sql 输出在 shell 上创建表？

> ID：15698032
> 
> 赞同：0
> 
> 时间：2013-03-29T05:47:37.837
> 
> 标签：django, django-models

syncdb 不会从 ManyToMany 字段创建表，所以如果我执行“python manage.py sql”，那么输出会带来要创建的代码。

# java - 如何捕获 URL 中的特定文本？

> ID：15698033
> 
> 赞同：1
> 
> 时间：2013-03-29T05:47:40.737
> 
> 标签：java, url, webdriver

我已经捕获了页面上的当前 URL。使用 ：

```
String url = driver.getCurrentUrl(); 
```

现在我想要这个字符串中的特定文本。让我们说

```
String url = http://www.youtube.com/watch?v=R5-gtsdenpE 
```

而且我要

1.  捕获当前页面 URL 并将其存储在 String URL 中。（完毕）
2.  捕获 URL 中“v”之后的文本并将其存储在 String emb 中。（？？）

我正在使用 JAVA 在 Ubuntu 上编写脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T05:50:15.813

利用：

```
 String fullURL = http://www.youtube.com/watch?v=R5-gtsdenpE;
 String emb = fullURL.split("\\?v=")[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:02:06.877

我猜这就是你想要的-

```
 String string = "http://www.youtube.com/watch?v=R5-gtsdenpE";
    URL url = new URL(string);
    System.out.println(url.getQuery()); 
```

适当处理异常。

如果您不想使用 URL 类，只需搜索 ? 的第一个索引。然后使用 substring() 获取之后的字符串。

```
 System.out.println(string.substring(string.indexOf("?")+1)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T06:06:06.060

```
Url url = new Url(driver.getCurrentUrl());
Map<String, String[]> params = parameterMapFromString(url.getQuery());
String v = params.get("v")[0]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T06:09:52.020

如果您的要求是静态的，并且您确定必须在“v”之后获取值，那么您也可以尝试这样做

```
String emb  = url.substring(url.indexOf("v"), url.length()).trim(); 
```

# android - 如何在java android中使用方法更改密码？

> ID：15698034
> 
> 赞同：-1
> 
> 时间：2013-03-29T05:47:44.890
> 
> 标签：android, eclipse, sqlite

如何在java android中使用方法更改密码？我使用 Eclipse 作为编辑器

操作按钮在我的班级中保存更改密码`ChangePassword`：

```
private void ChangeMe(View v) {
    String currPass = CurrentPass.getText().toString();
    String newPassword = newPass.getText().toString();
    String newConfirmPassword = newConfiPass.getText().toString(); 
} 
```

那么类中的命令功能如何`DatabaseAdapter`？

在课堂`DatabaseAdapter`上，我有一个包含 3 列（id、用户名、密码）的表（用户）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:07:42.557

首先，您需要使用 userId(id) 与特定用户的数据库密码字段检查输入的密码是否正确。然后触发更新查询以使用新输入的密码更新旧密码

```
UPDATE TABLE TABLE_NAME set password = newPassword WHERE id = userId(pass userid) 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:24:44.523

首先检查 newPassword 和 newConfirmPassword 是否相同，然后检查当前密码和用户 ID 是否有效，然后如果有效，则使用上述更新语句

# c# - 在不停止 GUI 的情况下请求用户输入的最佳方式？

> ID：15698036
> 
> 赞同：0
> 
> 时间：2013-03-29T05:48:20.207
> 
> 标签：c#, winforms

我有一个简单的问答型程序，代码如下：

```
 private void AskQuestion(Question q)
        {
            questionbox.Text = q.GetQuestion();
            answering = true;

            while (answering == true)
            {

            }

                if (q.GetQuestion() == answerbox.Text)
                {
                    MessageBox.Show("well done");
                }

                else
                {
                    MessageBox.Show("nope");
                }

        } 
```

回答只是我拥有的一个开关，因此在用户输入答案并单击按钮之前，程序不会测试答案。

我有一个供用户单击的按钮，它将其切换为 false：

```
private void Answer_Click(object sender, EventArgs e)
        {
            answering = false; 
        } 
```

这个想法是当用户回答问题时，while循环暂停程序并退出，但它只是冻结整个事情。

我尝试通过线程睡眠来减慢它的速度，然后我找了一个计时器来观察变量，在一个新线程上尝试了它，但是线程不会相互通信，所以我处于这种愚蠢的情况，我被卡住了.

请帮助程序员，并在这里为我提出一个策略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:00:24.913

这是示例：

```
 private void button2_Click(object sender, EventArgs e)
        {
            hey = true;
            Thread thread = new Thread(new ThreadStart(AskQuestion));
            thread.Start();
        }

        bool hey;
        void AskQuestion()
        {
            while (hey)
            { 

            }
            MessageBox.Show("Done");
        }

        private void answer_Click(object sender, EventArgs e)
        {
            hey = false;
        } 
```

这会在按下 answer_Click() 时显示 MessageBox。它不会冻结。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:00:46.587

您可以将问题存储在一个字段中并将答案逻辑放入`Answer_Click`

```
private Question _currentQuestion;

private void AskQuestion(Question q)
{
    _currentQuestion = q.GetQuestion();
    questionbox.Text =_currentQuestion;
}

private void Answer_Click(object sender, EventArgs e)
{
   if (_currentQuestion != null)
   {
      if (_currentQuestion == answerbox.Text)
      {
          MessageBox.Show("well done");
      }

      else
      {
          MessageBox.Show("nope");
      }
   }
} 
```

# objective-c - 为什么我必须在 __bridge_transfer 之后调用 CFRelease？

> ID：15698037
> 
> 赞同：2
> 
> 时间：2013-03-29T05:48:20.307
> 
> 标签：objective-c, automatic-ref-counting, clang-static-analyzer

```
CFArrayRef refAllPeople = ABAddressBookCopyArrayOfAllPeople( addressBook );
NSArray * arPeople = (__bridge_transfer NSArray*)(refAllPeople); 
```

当我分析它说潜在的内存泄漏。

让我试着理解。refAllPeople 有 1 个参考计数。

然后我做*_bridge_transfer*。这将所有权转移给了我。更准确地说，它有 arPeople 指向它并将保留计数加 1。然后保留计数减 1，因为_bridge *_transfer*等价于 (__bridge) 后跟 CFRelease。

所以，

为什么内存泄漏投诉？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T05:53:30.063

你的理解是正确的。`__bridge_transfer`将`refAllPeople`带回`NSObject`where`ARC`操作的世界，您不必显式调用`CFRelease`.

我相信这是一个静态分析器错误。

来自文档（感谢 Carl）

> (__bridge_transfer T) op 将必须具有不可保留指针类型的操作数强制转换为目标类型，该目标类型必须是可保留对象指针类型。ARC 将在封闭的完整表达式的末尾释放该值，这取决于对局部值的通常优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T06:06:09.637

这让人很难堪。没有内存泄漏:)。不知何故，我误读了错误消息，并认为所有蓝色的东西都意味着内存泄漏。

很高兴我对bridge_transfer的理解是正确的，希望对大家有用。

为其他回答过此问题的人 +1 :)

# python - 如何在不保存的情况下在网络上显示 pyBarcode 生成的图像

> ID：15698038
> 
> 赞同：1
> 
> 时间：2013-03-29T05:48:24.013
> 
> 标签：python, image, pyramid

我想在网页上显示[pyBarcode](http://pythonhosted.org/pyBarcode/)生成的 png 或 svg 条形码。但我认为如果我不必将图像保存在服务器上会更好。无论如何我可以用[pyBarcode](http://pythonhosted.org/pyBarcode/)做到这一点吗？或者使用 python 的任何其他条形码图像生成方法？

我使用[金字塔](http://www.pylonsproject.org/)作为 web 框架，如果这改变了任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T12:46:48.990

将条形码直接写入[`response.body_file`](http://pyramid.readthedocs.org/en/latest/api/response.html#pyramid.response.Response.body_file)：

```
barcode.writer import ImageWriter
ean = barcode.get_barcode('ean', '123456789102', writer=ImageWriter())

response = request.response
response.content_type = 'image/png'
ean.write(response.body_file) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:32:19.807

我看不到您如何提供甚至没有创建的文件。如果长时间不需要它，请考虑将其保存在 /tmp 中，但您将创建并提供一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T08:28:25.120

您应该能够通过创建返回文件对象的 HTTP 响应来做到这一点。

这样对“ [http://mysite.com/someimage.png](http://mysite.com/someimage.png) ”的请求就会返回文件内容。

尝试写入[`pyramid.response.Response`](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/response.html#pyramid.response.Response)对象的`.body_file`.

# xml - 默认命名空间未正确转换

> ID：15698039
> 
> 赞同：2
> 
> 时间：2013-03-29T05:48:33.303
> 
> 标签：xml, xslt, namespaces, xslt-2.0

我想将默认名称空间（转换时）添加到元素。我使用 xslt 进行这种转换。请找到下面的代码片段。

```
<xsl:variable name="ns" select="'http://ABC.org/Standards/SChool/2'" />

<xsl:element name="School" namespace="{$ns}">
     <xsl:attribute name="Version">2.13.92</xsl:attribute>    
     <xsl:apply-templates select="ltc:UserAuthRequest" />
</xsl:element>

<xsl:template match="ltc:UserAuthRequest">
     <xsl:element name="{local-name()}">
</xsl:template> 
```

转换后，我得到了下面的 xml 输出。

```
<School xmlns="http://ABC.org/Standards/SChool/2" Version="2.13.92">
     <UserAuthRequest xmlns=""></UserAuthRequest>
</School> 
```

这里的问题是默认命名空间也是在子节点中创建的。

谁能解释我为什么在子元素中创建命名空间，即使我没有为此定义任何命名空间以及如何避免这个问题？

**输入 XML**

```
<?xml version="1.0" encoding="UTF-8"?>
<School>

    <UserAuth>
        <UserName>K.Senthuran</UserName>
        <Password>Javaworld</Password>
    </UserAuth>

</School> 
```

**转换逻辑**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="/School">

        <xsl:variable name="ns">www.school.com/myLife</xsl:variable>
        <xsl:element name="School" namespace="{$ns}">
            <xsl:apply-templates select="UserAuth" />
        </xsl:element>
    </xsl:template>

    <xsl:template match="UserAuth">
        <xsl:element name="UserAuth">
            <xsl:attribute name="id">sdmnsdnk</xsl:attribute>

            <xsl:apply-templates select="UserName" />
            <xsl:apply-templates select="Password" />
        </xsl:element>
    </xsl:template>

    <xsl:template match="UserName">
        <xsl:element name="{local-name()}">
            <xsl:attribute name="userIDREF">dmsdmsl</xsl:attribute>

            <xsl:value-of select="." />
        </xsl:element>
    </xsl:template>

    <xsl:template match="Password">

        <xsl:element name="{local-name()}">
            <xsl:attribute name="uniqueIDREF">asakjhs</xsl:attribute>

            <xsl:value-of select="." />
        </xsl:element>
    </xsl:template>

    <xsl:template match="@*">
        <xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>
    </xsl:template>

</xsl:stylesheet> 
```

**电流输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<School xmlns="www.school.com/myLife">
    <UserAuth xmlns="" id="sdmnsdnk">
        <UserName userIDREF="dmsdmsl">K.Senthuran</UserName>
        <Password uniqueIDREF="asakjhs">Javaworld</Password>
    </UserAuth>
</School> 
```

**预期产出**

```
<?xml version="1.0" encoding="UTF-8"?>
<School xmlns="www.school.com/myLife">
    <UserAuth id="sdmnsdnk">
        <UserName userIDREF="dmsdmsl">K.Senthuran</UserName>
        <Password uniqueIDREF="asakjhs">Javaworld</Password>
    </UserAuth>
</School> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:43:00.083

问题是，当您创建**UserAuthRequest**时，您没有给它一个命名空间

```
<xsl:element name="{local-name()}" /> 
```

因此 XSLT 将生成一个没有命名空间的元素，因此`xmlns=""`. 假设您的**ns变量在范围内是全局的，只需以与创建****School**元素相同的方式创建元素

```
<xsl:element name="{local-name()}" namespace="{$ns}" /> 
```

实际上，如果要匹配特定元素，则此处不需要**local-name 。**这也可以

```
<xsl:element name="UserAuthRequest" namespace="{$ns}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T14:24:28.083

**以下是如何做到这一点**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vNs" select="'some:NS'"/>

 <xsl:template match="*">
     <xsl:element name="{name()}" namespace="{$vNs}">
       <xsl:apply-templates select="node()|@*"/>
     </xsl:element>
 </xsl:template>

 <xsl:template match="@*">
  <xsl:attribute name="{name()}"><xsl:value-of select="."/></xsl:attribute>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<School Version="2.13.92">
     <UserAuthRequest></UserAuthRequest>
</School> 
```

**产生了想要的正确结果：**

```
<School xmlns="some:NS" Version="2.13.92">
   <UserAuthRequest/>
</School> 
```

* * *

**更新**：

OP澄清了他的问题。现在，一个额外的要求是为某些元素添加新属性：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vNs" select="'some:NS'"/>

 <xsl:template match="*">
     <xsl:element name="{name()}" namespace="{$vNs}">
       <xsl:apply-templates select="node()|@*"/>
     </xsl:element>
 </xsl:template>

 <xsl:template match="@*">
  <xsl:attribute name="{name()}"><xsl:value-of select="."/></xsl:attribute>
 </xsl:template>

 <xsl:template match="UserAuth">
  <xsl:element name="{name()}" namespace="{$vNs}">
   <xsl:attribute name="id">sdmnsdnk</xsl:attribute>
   <xsl:apply-templates/>
  </xsl:element>
 </xsl:template>

 <xsl:template match="UserName">
  <xsl:element name="{name()}" namespace="{$vNs}">
   <xsl:attribute name="userIDREF">dmsdmsl</xsl:attribute>
   <xsl:apply-templates/>
  </xsl:element>
 </xsl:template>
 <xsl:template match="Password">
  <xsl:element name="{name()}" namespace="{$vNs}">
   <xsl:attribute name="uniqueIDREF">asakjhs</xsl:attribute>
   <xsl:apply-templates/>
  </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<School>
    <UserAuth>
        <UserName>K.Senthuran</UserName>
        <Password>Javaworld</Password>
    </UserAuth>
</School> 
```

**产生了想要的正确结果：**

```
<School xmlns="some:NS">
   <UserAuth id="sdmnsdnk">
      <UserName userIDREF="dmsdmsl">K.Senthuran</UserName>
      <Password uniqueIDREF="asakjhs">Javaworld</Password>
   </UserAuth>
</School> 
```

# vb.net - VB.Net 应用程序中的内存泄漏，网格保持打开的对象？

> ID：15698046
> 
> 赞同：-1
> 
> 时间：2013-03-29T05:49:16.763
> 
> 标签：vb.net, memory, dottrace

我有一个用 VB.Net 编写的大型复杂 Windows 窗体应用程序。用户遇到了一些内存问题，并使用 JetBrains dotTrace Profiler 尝试清除其中的一些问题。

仍然有什么东西把我的一些物品打开了。我有一个“客户”对象，它有一个`Generic.List`. `InvoiceLineItem`该项目基本上是一个绑定到网格控件（ConponentOne FlexGrid）的对象，该控件具有用于显示数据的只读属性的负载，例如：

```
Public Class InvoiceLineItem
Private _customer as Customer
Private _charge as Charge

Sub New(Customer as Customer, Charge as Charge)
    _customer = Customer
    _charge = Charge
End Sub

Public ReadOnly Property Name as String
    Return _customer.Name
End Property

Public ReadOnly Property ItemName as String
    Return _charge.Name
End Property

Public ReadOnly Property Amount as Decimal
    Return _charge.Amount
End Property
End Class 
```

等等

这个对象看起来好像没有从 FlexGrid 中释放。

Flexgrid 在子窗体上，从主窗体显示。当子窗体关闭时，Memory Profiler 显示该窗体仍被引用。当我单击 dotTrace 中的“最短路径”时，显示以下路径。

![最短路径](../Images/c7a9d3798caa32158df0c968db1e4f3e.png)

这似乎是 Customer 中唯一具有根路径的对象。

我的对象或集合之间没有以这种形式进行的自定义事件处理，并且没有任何处理。

我应该怎么做才能进一步解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:26:59.383

我发现了这个问题。FormClosing 事件正在其他地方处理并测试未保存的数据，对表单的引用被保存在该函数中并且未释放！

# proxy - 如何在没有主机和代理的情况下设置 ping 隧道

> ID：15698047
> 
> 赞同：0
> 
> 时间：2013-03-29T05:49:23.777
> 
> 标签：proxy, ping, tunneling

当您只能发送 ICMP 数据包时，我一直在阅读有关设置 ping 隧道以访问互联网的信息。Ptunnel 似乎是一个流行的程序，使用它的说明可以在这里找到[http://www.cs.uit.no/~daniels/PingTunnel/](http://www.cs.uit.no/~daniels/PingTunnel/)。该程序的说明说您必须同时拥有客户端和代理计算机。

如果您必须有一台可以发送 TCP/IP 数据包的代理计算机，我不明白 ping 隧道的好处。如果我有一台可以做到这一点的计算机，我一开始就不需要设置隧道。有人可以向我解释一下，为什么需要代理，如果是 ping 隧道那么有用吗？

NS诺兰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-12T22:40:56.133

好吧，假设您在家中有一台服务器（例如运行 linux 的 PC），它可以完全访问互联网，现在您在工作/机场/酒店使用笔记本电脑，如果不付费就无法访问 tcp。通过设置icmp 或 dns 隧道，您可以“编码”您的数据包，使其看起来好像是 pings/nslookup，这些数据包的目标始终是您的服务器。当服务器从您那里收到这些 ping 信息时，它会“解码”它们并完全了解您要访问的内容（例如网站或下载文件）。然后您的服务器为您提供服务并获取您正在寻找的信息并将它们再次“编码”成 icmp/nslookup 之类的数据包。这些数据包可以毫无问题地到达您手中，一旦它们到达，您的笔记本电脑可以将它们解码回有用的信息（就像它会通过 tcp 接收的信息一样）。编码和解码是 Ptunnel 所做的。虽然我不专业，但我认为这就是重点。

# javascript - 使用 Jquery 的基本分页问题

> ID：15698050
> 
> 赞同：0
> 
> 时间：2013-03-29T05:49:42.013
> 
> 标签：javascript, jquery, pagination

我正在尝试使用 Jquery 在我的网站上进行基本分页。（代码如下）。一切工作正常，但我注意到它加载了查询中的所有结果，然后使用“切片”函数对其进行切片。这基本上只是在后台隐藏了额外的结果。我不想加载所有结果，我只想加载其中 4 个，当用户单击下一个或第二个数字时，我想加载接下来的 4 个结果，而不是同时加载它们，只是切片他们起来。

```
$(document).ready(function(){
            //Problem about this is that it loads all the images and just slice them up.

            //Declaring variables
            var page = 1;
            var per_page = 4;
            var items = $('.row').length;
            var page_last = Math.ceil(items/per_page);

            //Set Page
            function setPage(page){
                $('.row').slice(0, page * per_page).hide();
                $('.row').slice(page * per_page - per_page, page * per_page).show();
                $('.row').slice(page * per_page).hide();

            }

            //Next Button
            $('.next').click(function(){
                if(page < page_last){
                    $('.links.link_' + page).attr('href', '#').css('color', 'white');
                    page++;
                    $('.links.link_' + page).removeAttr('href').css('color', 'gray');
                    setPage(page);
                }
            });

            //Previous Button
            $('.prev').click(function(){
                if(page > 1){
                    $('.links.link_' + page).attr('href', '#').css('color', 'white');
                    page--;
                    $('.links.link_' + page).removeAttr('href').css('color', 'gray');
                    setPage(page);
                }
            });

            //Generate Page Links
            for( x = 1; x <= page_last; x++){
                if(x == 1){
                    $('.pages').append(' <a style="color:gray" class="links link_' + x + '">' + x + '</a>');

                }else{
                    $('.pages').append(' <a href="#" class="links link_' + x + '">' + x + '</a>');
                }
            }
            //Links Functions

            $('.links').click(function(){
                $('.links.link_' + page).attr('href', '#').css('color', 'white');
                page = $(this).html();
                $('.links.link_' + page).removeAttr('href').css('color', 'gray');
                setPage(page);
            });

            $('.next, .prev').click(function(event){
                event.preventDefault();
            });

            setPage(1);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T05:57:39.953

如果查询的结果很大怎么办？它将非常缓慢地加载数据。在用户单击下一个或第二个数字时使用 ajax 加载数据怎么样？

# javascript - 当用户想要更改手机的方向时，我的应用程序显示不正确的 UI。安卓

> ID：15698051
> 
> 赞同：0
> 
> 时间：2013-03-29T05:49:48.663
> 
> 标签：javascript, titanium, appcelerator

当用户想要更改手机的方向时，我的应用程序显示不正确的 UI。

手机操作系统：Android Titanium SDK：3.0.2.GA

我的视频错误： [http ://www.youtube.com/watch?v=S0Yi-6ZKDcw](http://www.youtube.com/watch?v=S0Yi-6ZKDcw)

代码在这里： http: [//pastebin.com/qRWmGHrk](http://pastebin.com/qRWmGHrk)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:11:11.360

这段代码告诉应用程序从顶部开始向下 150dp，因此在横向时它会比你想要的低。为方向变化设置一个监听器，并减少该数量或将其整体减少到在两个方向都有效的东西。

```
var viewLoginForm = Ti.UI.createView({
        backgroundColor:'#ecf0f1',
        width:'290dp',
        top:'150dp', // <===== location to start drawing the view
        height:'250dp',
        borderRadius:6
    }); 
```

# matlab - 从任意向量中获取平均值为零的向量

> ID：15698056
> 
> 赞同：1
> 
> 时间：2013-03-29T05:50:08.860
> 
> 标签：matlab, numerical-computing

我知道要从给定向量中得到零均值向量，我们应该从这个向量的每个成员中减去给定向量的平均值。例如让我们看看下面的例子

```
r=rand(1,6) 
```

我们得到

```
0.8687    0.0844    0.3998    0.2599    0.8001    0.4314 
```

让我们通过以下操作创建另一个向量

```
s=r-mean(r(:)); 
```

在此之后我们得到

```
 0.3947   -0.3896   -0.0743   -0.2142    0.3260   -0.0426 
```

如果我们通过以下公式计算 s 的平均值

```
 mean(s) 
```

我们得到
ans =

```
 -5.5511e-017 
```

实际上，正如我检查过的那样，这个数字非常小

```
 -5.5511*exp(-017)

ans =

 -2.2981e-007 
```

所以我们应该认为我们的向量的均值为零？所以这意味着与 0 的小偏差是由于舍入误差造成的？例如，当我们创建白噪声或此类随机不相关的数据序列时，实际上已经假设即使对于这样远离 0 的小数据，它的均值也为零，并且在这种情况下假设例如对于这种情况

```
 -5.5511e-017 =0 ? 
```

大约当然

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T05:57:21.823

e-017 表示 10 的 -17 (10^-17) 次方，但这个数字仍然非常小，假设它是 0。如果你输入

```
format long; 
```

您将看到 Matlab 使用的真实精度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:10:55.273

其实你可以参考 eps 命令。尽管 matlab 使用 double 可以将数字编码到精确到`2.2251e-308`确定数字的大小。

以格式使用它`eps(number)`- 它告诉您最低有效位的影响有多大。

在我的机器上，例如。`eps(0.3)`返回`5.5511e-17`- 正是您报告的数字。

# jquery - Jquery-检查类是否存在于 Div 中

> ID：15698057
> 
> 赞同：17
> 
> 时间：2013-03-29T05:50:10.253
> 
> 标签：jquery, html

我一直在尝试检查一个类是否存在于 div 中。但它总是导致长度为 0。这是我的代码：-

```
<div id="accordion2" class="accordion" >
  <div class="accordion-group">
    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
        <div class="align-nav arrow-active">OSTOMY PRODUCTS</div></a>
    </div>
    <div id="collapseOne" class="accordion-body in collapse">
        <div class="accordion-inner">
            <ul>
                <li><a href="#">Professional Resources</a></li>
                <li><a href="#">One-piece Pouching</a></li>
            </ul>
        </div>
    </div>
  </div>
  <div class="accordion-group">
    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
        <div class="align-nav arrow-inactive">LEARNING CENTER</div>
    </a> </div>
    <div id="collapseTwo" class="accordion-body collapse">
        <div class="accordion-inner">
            <ul>
                 <li><a href="#">Videos</a></li>
                 <li><a href="#">Before Your Surgery</a></li>
            </ul>
        </div>
    </div>
  </div>
  <div class="accordion-group">
    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree">
      <div class="align-nav">PROFESSIONAL RESOURCES </div>
    </a> </div>
  </div>
  <div class="accordion-group">
    <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree">
           <div class="align-nav">PROFESSIONAL RESOURCES </div>
    </a> </div>
  </div>
</div> 
```

对于前 2 个 div $(this).find('accordion-body').length 应该是 1。但它仍然显示 0。我的 Jquery 代码如下：-

```
$('.accordion-heading').click(function() {
            if($(this).find('accordion-body').exist()) {
                alert('hi');
                if($(this).find('.collapsed').length > 0) {
                    alert('hi');
                    //$(this).find('.accordion-toggle .align-nav').removeClass('arrow-active').addClass('arrow-inactive');  
                }
                else {
                    alert('hi');
                    //$(this).find('.accordion-toggle .align-nav').removeClass('arrow-inactive').addClass('arrow-active');
                }
            }
        }); 
```

我需要得到 $(this).find('accordion-body').length = 1; 请提供解决方案。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-29T05:53:34.173

你应该选择一个类选择器，`find`因为你正在搜索类..并且因为手风琴体是父母的后代使用`parent()`

试试这个

```
$(this).parent().find('.accordion-body').length == 1; 
```

或者你可以使用[`hasClass()`](https://api.jquery.com/hasClass/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T05:52:40.717

那将是`'.accordion-body'`（句号很重要——它是类选择器）。

`.exist()`也不是 jQuery 方法，但我假设您已经在某处定义了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T06:04:07.053

试试这个：

您应该为兄弟姐妹而不是孩子找到，因为`.accordion-body`不是孩子，`.accordion-heading`而是兄弟姐妹。

```
 $('.accordion-heading').click(function() {
        if($(this).siblings('.accordion-body').length > 0) {
            alert('hi');
            if($(this).siblings('.collapsed').length > 0) {
                alert('hi');
                //$(this).find('.accordion-toggle .align-nav').removeClass('arrow-active').addClass('arrow-inactive');  
            }
            else {
                alert('hi');
                //$(this).find('.accordion-toggle .align-nav').removeClass('arrow-inactive').addClass('arrow-active');
            }
        }
    }); 
```

您的代码中存在问题：

1.  `.exist()`不是检查任何元素的有效方法
2.  `$(this).find()`这发现孩子不是同一级别的兄弟姐妹

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T06:09:55.187

您在错误的上下文中遍历。也尝试使用最新的 jQuery 和 [`.on`](http://api.jquery.com/on/)方法

```
 $('#accordion2').on('click','.accordion-heading', function() {
        var accordionBodyLength = $(this).parent();
        var $accordBody = $('.accordion-body');
        alert(accordionBodyLength.find($accordBody).length);
  }); 
```

[`Working DEMO`](http://jsfiddle.net/KhpXy/2)

# javascript - 如何使用 jQuery 的 .data() 函数保存两个变量？

> ID：15698065
> 
> 赞同：1
> 
> 时间：2013-03-29T05:50:55.100
> 
> 标签：javascript, jquery

当我执行以下脚本时，警报中只显示一个值：

```
<script>
    window.onload = function () {
        var num = 15;
        for (var i = 0; i < 10; i++) {
            $('<tr style="background-color: aqua" id = ' + i + '></tr>').appendTo("table");
            for (var j = 0; j < 10; j++) {
                num++;
                $('<td id ='+num+'></td>').appendTo("#"+i);
                $('<button>S</button>').data("field", i, j).appendTo("#" + num);
            }
        }
        $('td').on('click', 'button', function () {
            var d = $(this);
            alert(d.data("field"));  // here alert shows one variable
        });
    }
</script> 
```

如何在元素的数据中存储两个值？也许我可以发送一个数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T05:54:36.380

您使用 jQuery[数据](http://api.jquery.com/jQuery.data/)方法存储的数据可以是一个对象。所以你可以这样存储值：

```
$('<button>S</button>').data("field", { i: i, j: j}); 
```

然后像这样再次读出它们：

```
var d = $(this),
    field = d.data("field");
alert(field.i);
alert(field.j); 
```

您还应该考虑使用 jQuery 的[ready](http://api.jquery.com/ready/)方法而不是`window.onload`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T06:06:05.127

您可以将它们设置为`object`或`array`。

```
 $('<button>S</button>').data("field", [i,j] ).appendTo("#" + num); 
```

并提醒他们使用

```
alert( d.data("field").join(',') );  // here alert shows one variable 
```

根据评论“*实际上不需要调用 join(",")，由数组实现的 toString() 覆盖已经执行了此操作。* ”。所以你们都可以简单地

```
alert( d.data("field") ); 
```

[在http://jsfiddle.net/xhPjh/](http://jsfiddle.net/xhPjh/)上检查这个

# php - 使用我的照片发布应用发布后，我无法将照片放大

> ID：15698067
> 
> 赞同：1
> 
> 时间：2013-03-29T05:51:19.380
> 
> 标签：php, facebook, facebook-graph-api, photo

我有一个为 FB 创建的应用程序，它应该在个人资料和页面中上传照片。这个概念是，如果有人点击照片，它将重定向到另一个网站。它是成功的。

但是，我想让照片更大，就像在普通照片上传中一样。上传照片后，它将显示为文章发布/分享，而不是更大尺寸的照片上传。怎样才能把照片放大。我怎样才能让它看起来像照片上传而不是文章上传？

有人告诉我这是不可能的。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:47:55.347

我不太喜欢在 Facebook 上发布更大的照片，但请在下面找到对您有帮助的链接，

1.  [如何在一次 API 调用中获取大照片 URL？](https://stackoverflow.com/questions/7599638/how-to-get-large-photo-url-in-one-api-call)
2.  [如何使用图形 api 从提要中获取大图？](https://stackoverflow.com/questions/9527530/how-to-get-the-large-picture-from-from-feed-with-graph-api)
3.  [Facebook Graph API：在一个请求中获取更大的图片](https://stackoverflow.com/questions/10650730/facebook-graph-api-get-larger-pictures-in-one-request)
4.  [与 facebook 应用程序共享大图片](https://stackoverflow.com/questions/13142740/sharing-large-pictures-with-a-facebook-application)
5.  [facebook graph api - 发布大图](https://stackoverflow.com/questions/11512409/facebook-graph-api-post-large-image)

告诉我，哪个链接对您最有帮助？

# symfony - Symfony 2，添加供应商库（PHPExcel 等）

> ID：15698071
> 
> 赞同：0
> 
> 时间：2013-03-29T05:51:35.447
> 
> 标签：symfony, phpexcel

在我的 symfony 2.2 应用程序中，我想使用 PHPExcel 库。所以我下载了它，并将 Classes 库的内容复制到 /vendor/phpexcel 目录：

```
vendor/
    phpexcel/
        PHPExcel/
        PHPExcel.php 
```

之后，我在 $loader = require ... 行下面的 app/autoload.php 中添加了以下内容：

```
$loader = require __DIR__.'/../vendor/autoload.php';

//The following was added
$loader->registerPrefixes(array(
    'PHPExcel' => __DIR__ . '/../vendor/phpexcel'
));

// intl
... 
```

现在，如果我浏览到我的 Web 应用程序，它会返回 HTTP 错误 500（内部服务器错误）。我阅读了以下帖子，但无法解决问题： [如何在 Symfony 2 中正确使用 PHPExcel](https://stackoverflow.com/questions/6402839/how-to-use-phpexcel-correctly-with-symfony-2) 有人可以帮我纠正这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T06:12:19.063

您永远不应手动下载某些内容并将其放入`vendor`目录中。Composer 管理供应商目录，因此应该保存以删除该目录并`composer install`再次运行。默认情况下，该`vendor`目录也从 Git 中排除。

要使用 composer 安装 PHPExcel，请将其添加到`composer.json`：

```
"require": {
    ...
    "phpexcel/phpexcel": "1.7.*"
} 
```

与 Composer 一起安装时，您也不必担心自动加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T10:47:13.353

我为 PHPExcel 安装了[https://github.com/liuggio/ExcelBundle](https://github.com/liuggio/ExcelBundle)。Bundle 包括 PHPExcel（添加了 composer 的相关链接）。您可以轻松地使用 PHPExcel，而不用想知道捆绑包的内容。打电话`new \PHPExcel();`然后你搬家。我希望这个捆绑包有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:46:20.883

Composer 似乎对 SELinux 有问题。看到[这个](https://github.com/composer/composer/issues/1714)。虽然不推荐，但将 SELinux 设置为 permissive 可能是一种解决方法。

# php - 在一个函数中返回 2 个值并在同一个类的另一个函数中获取 2 个值

> ID：15698075
> 
> 赞同：0
> 
> 时间：2013-03-29T05:51:44.087
> 
> 标签：php, mysql

我需要计算 2 个值的百分比以及箭头是向上还是向下。好的，所以我创建了两个函数来验证，箭头和百分比。

```
private function porcentagem($a,$b){
        $re = $b * 100 / $a;
        return print round($re,0)."%";
}

private function seta($a,$b){
    if($a < $b){
      return "up";  
    }else{
      return "down";    
    }
} 
```

我创建了一个将数据返回到数组的函数，以变得更有条理。

```
private static function retornar($a,$b){
return array($a,$b);    
} 
```

现在检查类别数据的函数：

```
private function new_user(){
        $q       = mysql_query("SELECT * FROM usu4r10s WHERE premium IS NULL AND " . $this->antes);
        $a = mysql_num_rows($q);

        $q       = mysql_query("SELECT * FROM usu4r10s WHERE premium IS NULL AND " . $this->depois);
        $b = mysql_num_rows($q);

        return self::retornar($this->porcentagem($a,$b),$this->seta($a,$b));
} 
```

记住“antes”和“depois”是一个变得更有条理的变量。

```
var $antes = "DATEDIFF(NOW(), `data`) < 30";
var $depois = "DATEDIFF(NOW(), `data`) < 0"; 
```

现在我遇到了问题的最终功能。

```
public function _build(){
      $output =   
           '             <span class="mws-report-content">'.
           '                <span class="mws-report-title">Novos Usuários</span>'.
           '                 <span class="mws-report-value '.$this->contas_premiuns(array(0)).'">'.$this->contas_premiuns(array(1)).'</span>'.
           '             </span>';

           try{ 
           return print $output;
           }catch (Exception $e){ 
           return print $e;
           }
} 
```

唯一的问题是我不知道如何在一个函数中返回 2 个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:00:17.690

首先你不应该使用`return print(...);`，因为它只会返回 print 语句的结果，几乎总是`true`. 其次，从同一个函数返回多个值并不是很好的设计，一个函数通常应该有一个目的。

不能有两个连续的 return 语句，因为 PHP 会在遇到第一个 return 语句时退出函数。如果您真的想从函数返回两个值，则必须使用您在发布的代码中使用的相同方法，`return array($firstValue, $secondValue);`甚至`return array('firstIdentifier' => $firstValue, 'secondIdentifier' => $secondValue);`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:08:41.297

您可以从函数调用中仅返回**一个**（或不返回）值，但您返回的值可以是数组或对象。所以

```
return array($value1, $value2); 
```

将返回一个具有两个值的数值数组。

```
return array('key1' => $value1, 'key2' => $value2); 
```

将返回一个具有两个值的关联数组。

```
$instance = new stdClass();
$instance->key1 = $value1;
$instance->key2 = $value2;
return $instance; 
```

将返回具有两个值的标准类对象。

**但...**

尽管这些示例可以让您获得所需的结果，但作为最佳实践，请考虑重构您的函数以仅返回一个实际值。

# java - 消失按钮本身

> ID：15698079
> 
> 赞同：0
> 
> 时间：2013-03-29T05:51:57.157
> 
> 标签：java, android, button

我执行此代码是为了使按钮本身消失。但它根本不起作用：

```
againbtn.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        againbtn.setVisibility(View.GONE);
    }
}); 
```

更新：我的againbtn在活动加载时是不可见的，在我的代码中，在另一个按钮点击中，我使用以下代码使其可见：

```
//answer button off animation
Animation anim2 = AnimationUtils.loadAnimation(MainActivity.this, R.anim.askbtnoffanim);
anim2.setFillAfter(true);
askbtn.startAnimation(anim2); 
```

如您所见，我没有使用`againbtn.setVisibility(View.VISIBLE);`或其他东西。动画本身出现按钮。你认为我的问题与此有关吗？我尝试做另一个动画来消失按钮本身，它可以工作但仍然`clicklistener`适用于他位置区域的这个按钮！

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:26:30.007

检查您导入的类，导入以下类：

导入 android.view.View.OnClickListener；

代替：

导入 android.content.DialogInterface.OnClickListener；

我在这里给出了完整的代码，你可以使用它：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {
    Button b;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        b = (Button) findViewById(R.id.button1);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                b.setVisibility(View.GONE);
            }
        });

    }
} 
```

这是activity_main.xml：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:text="Button" />

    </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:00:08.123

尝试这个

```
againbtn.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {
  runOnUiThread(new Runnable()
        {
            @Override
            public void run() 
            {
                againbtn.setVisibility(View.GONE);
            }
        });
} 
```

});

# objective-c - 存储到变量与直接传递（是否隐式创建临时变量？）

> ID：15698082
> 
> 赞同：0
> 
> 时间：2013-03-29T05:52:09.457
> 
> 标签：objective-c

**模型 1**

```
NSString *name = (NSString *)[response valueForKey:@"name"];
[someObject doSomethingWith:name]; 
```

**模型 2**

```
[someObject doSomethingWith:((NSString *)[response valueForKey:@"name"])]; 
```

如果我选择模型 2 将保存在堆栈上创建的变量还是在他的场景后面创建的隐式临时变量？

忽略可读性的损失，避免创建仅在地方使用的变量有什么好处。而是像模型 2 中那样直接传递它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T05:57:25.720

编译器生成的代码将是相同的，但是在第二种情况下没有变量。变量是一个高级编程概念，生成的汇编代码只知道寄存器和内存。在这两种情况下，最里面的方法调用的返回值都需要存储在某个地方，因此将使用寄存器或堆栈上的位置。

此外，`id`（`- [NSDictionary valueForKey:]`返回的内容）是通用的，并且与任何对象指针类型隐式兼容 - 请不要将其返回值转换为`NSString *`.

# c# - 在 C# Windows 窗体中，将窗体的 CancelButton 属性设置为按钮是否会在按钮单击事件时自动关闭窗体？

> ID：15698083
> 
> 赞同：-2
> 
> 时间：2013-03-29T05:52:10.653
> 
> 标签：c#, winforms, cancel-button

或者通过设置表单的 CancelButton 属性，我们只是确保在表单上按下 Esc 键时按钮被启用，但是点击事件需要通过编写单独的事件处理程序来处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:12:03.733

> 在 C# Windows 窗体中，将窗体的 CancelButton 属性设置为按钮是否会在按钮单击事件时自动关闭窗体？

是的，因为这样做[`DialogResult`](http://msdn.microsoft.com/en-us/library/system.windows.forms.button.dialogresult.aspx)会将该按钮的属性设置为`DialogResult.Cancel`. 正如该属性的文档所述：

> 如果此属性的 DialogResult 设置为 以外的任何值`None`，并且如果父窗体是通过 ShowDialog 方法显示的，则单击该按钮将关闭父窗体，而无需连接任何事件。然后，当单击按钮时，表单的 DialogResult 属性设置为按钮的 DialogResult。

请注意重要的警告：*“如果父表单是通过[ShowDialog 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.showdialog.aspx)显示的”*。表单自动关闭的唯一方法是使用`frm.ShowDialog()`. 如果您使用该[`Show`方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.show.aspx)，它不会自动关闭。您需要编写代码来自己管理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:11:23.377

仅当表单是对话框时。自己测试一下

# javascript - 是否有一个 jquery 插件来剪切长列标题？

> ID：15698086
> 
> 赞同：0
> 
> 时间：2013-03-29T05:52:25.097
> 
> 标签：javascript, jquery, html, css, jquery-plugins

我在页面上有一个动态构造的表格。它包含一组列。他们的数量从4到10。然后有4列就可以了。但是有 10 列 - 标题中的某些标题不适合列宽。

我想知道是否存在可以切断标题（并在最后设置“...”）的插件，或者如果没有足够的空间来显示它，则用缩写替换它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:55:56.700

我知道您正在要求一个 jQuery 插件，但我认为应该提到这也可以通过`CSS`

```
text-overflow: ellipsis; 
```

参见例如[here](http://davidwalsh.name/css-ellipsis)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T05:57:26.750

使用这个插件： http: [//plugins.learningjquery.com/expander/](http://plugins.learningjquery.com/expander/)

```
$('table td').expander({
    slicePoint:       80, 
    expandPrefix:     '... ', 
    expandText:       '[...]',
    collapseTimer:    5000, 
    userCollapseText: '[^]'
  }); 
```

将 slicePoint 配置为适合您的 td 的数字。

# html - 仅更改一个网页的背景

> ID：15698088
> 
> 赞同：1
> 
> 时间：2013-03-29T05:52:38.403
> 
> 标签：html, css

所以我有以下css代码将背景图片设置为我所有的网页

```
 html { 
   background: url(../index/images/white.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
   -o-background-size: cover;
   background-size: cover;
   } 
```

我的问题是我可以在一个页面上有一个背景图片让我说 index.html 和我的其余页面的另一个背景图片吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T05:55:47.290

您可以通过多种方式做到这一点，一种简单的方法是将类赋予根元素和适当的样式。仅供参考，我会用它`body`代替`html`背景。

**CSS**

```
body { 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}
body.home {
    background: url(../index/images/white.jpg) no-repeat center center fixed; 
}
body.product-list {
    background: url(../index/images/another-image.jpg) no-repeat center center fixed; 
} 
```

**索引.htm**

```
<body class="home">
    ...
</body> 
```

**产品列表.htm**

```
<body class="product-list">
    ...
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T05:54:55.897

您可以使用类而不是直接使用 html 选择器：

```
.blue
{
    background: blue;
} 
```

然后这样称呼它：

```
<html class="blue"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T05:54:02.103

添加`internal style`到索引页面，如下所示

```
<style>
 body { 
   background: url(../index/images/white.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
   -o-background-size: cover;
   background-size: cover;
   }
</style> 
```

CSS 文件的正文将适用于所有其他页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T05:54:16.707

仅将您的类添加到该站点的 index.html 文件中。

```
<html class="home-page">

html.home-page { 
   background: url(../index/images/white.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
   -o-background-size: cover;
   background-size: cover;
   } 
```

# regex - 要搜索得到 = 而不是 == 的正确 VIM 正则表达式是什么？

> ID：15698090
> 
> 赞同：2
> 
> 时间：2013-03-29T05:52:51.217
> 
> 标签：regex, vim

在以下代码中：

```
a = b = c == 1 
```

我只想匹配前两个 =，而不是最后的 ==。

我认为该模式`\<=\>`会起作用，因为`\<`匹配单词的开头并`\>`匹配结尾。但事实并非如此。这种模式有什么问题，正确的模式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T06:01:54.533

vim 支持lookarounds，所以你可以在= 周围使用负向lookbehind 和负向lookahead。这将仅匹配所需的 =，甚至在行的开头或结尾处匹配 =。

```
\(=\)\@<!=\(=\)\@! 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T06:45:24.487

您不能使用，`\<=\>`因为通常等号字符**不是***关键字字符*。您*可以*使用 来解决此问题`:set iskeyword+==`，但这可能会对导航和语法突出显示产生副作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T05:54:29.963

这个正则表达式应该工作：

```
[^=]=[^=] 
```

`=`如果您想在行首或行尾匹配单个，它将中断- 但我认为这对您的模式来说不是问题。

# haskell - 循环的大步语义，我不断得到一个无限循环

> ID：15698095
> 
> 赞同：2
> 
> 时间：2013-03-29T05:53:10.460
> 
> 标签：haskell, for-loop, semantics, infinite-loop

尽管这只是代码的一部分，但能否解释一下为什么我会出现无限循环？这就是大步语义应该看起来的样子

![在此处输入图像描述](../Images/0c1aff90d002f6d711f29edc8fdc00ef.png)

```
eval (For iexp c, s)
    |(bEval (Compare Leq iexp (IConst 0), s)) = s
    |otherwise = eval (For n' c, s')
    where
        s' = eval(c,s)
        n' = (IBin Minus iexp (IConst 1)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T07:56:56.017

无限循环很可能来自代码的不同部分。您提供的代码段看起来是正确的，并且 - 适当地模拟了必要的类型和函数 - 终止。

也许您没有正确评估减法？另一种可能性是`bEval`不能正常工作。

这是一个很好的用例`Data.Trace`，它提供了一个`trace`调试功能。这就像使用 print 语句以任何其他语言进行调试一样。（在内部，它使用`unsafePerformIO`.）

该`trace`函数接受一个字符串和一个表达式；它打印字符串并返回表达式。还有一个函数在打印之前`traceShow`使用它的参数。`show`

您可以使用它在循环执行时打印出中间值。我建议这样的事情：

```
eval (For iexp c, s)
  | condition `traceShow` condition = s
  | otherwise = n' `traceShow` eval (For n' c, s')
  where condition = bEval (Compare Leq iexp (IConst 0), s)
        s' = eval(c,s)
        n' = (IBin Minus iexp (IConst 1)) 
```

这将在每一步打印出计数器的条件和值。这应该可以帮助您找出循环的来源。如果没有，您可以移动跟踪语句，使用方式与我在这里相同。

# javascript - 使用 .on 方法的附加元素无法删除

> ID：15698096
> 
> 赞同：0
> 
> 时间：2013-03-29T05:53:14.797
> 
> 标签：javascript, jquery, html

jQuery 决定是愚蠢的，或者我只是错过了一些东西，但是使用以下代码删除附加元素对我不起作用：

```
$('#add-show').click(function() {
    if ( $('#fav-search').val() == '' ) {
        // do nothing
    }
    else {
        $('.fav-results').append('<code><a href="#"><span class="icon-remove"></span></a>' + $('#fav-search').val() + '</code>');
    }
});

$('.fav-results code').on('click', 'a', function() {
    $(this).parent().remove();
}); 
```

以及任何感兴趣的人的 HTML：

```
<div class="input-append">
    <input class="span2" id="fav-search" type="text">
    <button class="btn" type="button" id="add-show"><span class="icon-plus"></span></button>
</div>
<div class="pull-right fav-results">
    <?php foreach($shows as $show): ?>
        <code><a href="#"><span class="icon-remove"></span></a><?php echo $show['showname'] ?></code>
    <?php endforeach ?>
</div> 
```

从我的数据库表中提取的现有标题可以删除，但不能删除附加元素。

我最初使用的是 .click 处理程序，但我读到它仅适用于页面加载时存在于 DOM 中的元素。在阅读了相同性质的先前问题后，我改为使用 .on 但它仍然表现相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T05:57:27.940

要将您的`click`事件应用于动态创建的元素，您应该将其委托给祖先`<div>`而不是`<code>`元素：

```
$(".fav-results").on("click", "code a", function() {
    $(this).parent().remove();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:01:46.997

您正在使用`remove()`而不是在执行之前`detach()`删除所有元素上的事件处理程序。`code`

# javascript - x, y, left, right 与 CSS 的区别

> ID：15698100
> 
> 赞同：1
> 
> 时间：2013-03-29T05:53:24.703
> 
> 标签：javascript, jquery, html, css, coffeescript

我有一些看起来像这样的东西，它不应用 x 或 y 变换，但应用旋转。

```
$('<div/>').css(
   "-webkit-transform": "rotate(20deg)"
   x: 10
   y: 10
) 
```

这适用于`x`而`y`不是旋转：

```
$('<div/>').css(
  "-webkit-transform": "rotate(20deg)"
  x: 10
  y: 10
) 
```

如果我这样做`left`并且`right`它有效

```
$('<div/>').css(
   "-webkit-transform": "rotate(20deg)"
   left: 10
   right: 10
) 
```

PS：我正在使用咖啡脚本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T06:08:35.827

如果你问为什么`left`和`right`工作但不工作`x`，`y`那是因为你使用`.css()`的是最终设置 CSS 并且没有`x`或`y`CSS 属性。

您可能正在寻找`translate()`：

```
-webkit-transform: translate(50px,100px); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T05:57:36.073

您可以添加 css 对象，如下所示，

```
$('<div/>').css({
   "-webkit-transform": "rotate(20deg)"
   x: 10
   y: 10
}); 
```

有一个做 css 动画的 jQuery 插件。

**[`Plugin Link`](http://ricostacruz.com/jquery.transit/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T06:09:24.530

`x`,`y`不是有效的 CSS 属性。你应该使用`left`,`top`代替。

检查这个[jsFiddle](http://jsfiddle.net/ArieShout/WNtTc/)

# ios - 更改 UIPickerView 中显示的行数

> ID：15698111
> 
> 赞同：2
> 
> 时间：2013-03-29T05:54:28.520
> 
> 标签：ios, objective-c, ios5, ios6, uipickerview

有没有办法将显示的行数`UIPickerView`从 5 更改为 4？选择器的高度在 IB 中似乎不可调节，我找不到任何委托方法来控制它。

请注意，我询问的是显示的行数，而不是组件中的行数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T05:59:28.020

`UIPickerview`您可以使用以下`UIPickerViewDelegate`方法设置行的高度

```
- (CGFloat)pickerView:(UIPickerView *)pickerView rowHeightForComponent:(NSInteger)component
{
  return 60.0f;
} 
```

我不确定显示四行所需的确切高度。可能只需要摆弄它，直到你做对了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:02:18.157

如果要设置的高度，`UIPickerView`则可以使用：

```
picketView.transform = CGAffineTransformMakeScale(1, 0.70); 
```

上面的代码将缩放`UIPickerView`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T06:02:44.167

Apple 没有提供直接的方法，允许我们`UIPickerView`使用`setFrame`.

但是有两种方法可以实现相同的目标：

*   首先在 nib 文件代码（XML 格式）中，您可以根据需要更改标签值。这是参考：[如何降低 Uipickerview 的高度？](https://stackoverflow.com/questions/6105940/how-to-decrease-the-height-of-the-uipickerview)
*   另一种方法是使用核心动画属性（缩放和平移）更改高度-宽度。对于您的要求，我想这会对您有所帮助。这是参考：[UIPickerView 高度不可更改](https://stackoverflow.com/questions/12473566/uipickerview-height-not-changeable)

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T06:23:22.620

你不能把 uipickerview 的高度搞得一团糟，原因是一旦你改变了高度，你就必须重新调整每一行的大小和每一行的字体，以便它们清晰而分开地显示。UiPickerview 只有三个有效高度（162.0、180.0 和 216.0）。但是，您可以通过以下方式更改高度

```
CGAffineTransform t0 = CGAffineTransformMakeTranslation (0, mypickview.bounds.size.height/2);
CGAffineTransform s0 = CGAffineTransformMakeScale       (1.0, 0.5);
CGAffineTransform t1 = CGAffineTransformMakeTranslation (0, -mypickview.bounds.size.height/2);
mypickview.transform = CGAffineTransformConcat          (t0, CGAffineTransformConcat(s0, t1)); 
```

# c# - 如何在 C# 中将泛型列表用于多种用途？

> ID：15698118
> 
> 赞同：1
> 
> 时间：2013-03-29T05:54:48.757
> 
> 标签：c#, .net

我做过类似的事情；

```
var list; //-> i want to declare this list once time
if (gvd.ID.Equals("gvAccountSetup"))
{
    ClsAccountHead AccountHead = new ClsAccountHead();
    AccountHead.CampusId = cmbAccCampus.SelectedValue.ToInt32();
    // here i want to intialize the same list with other type
    list = new List<ClsAccountHead>();
    list = AccountHead.AccountHeadListByCampusId(PageIndex + 1, PageSize);
}
else if (gvd.ID.Equals("gv_AccSubHead"))
{
    ClsAccountSubHead AccountSubHead = new ClsAccountSubHead();
    AccountSubHead.HeadId = cmbSrchAccHead.SelectedValue.ToInt32();
  // here i want to intialize the same list with another type
    list = new List<ClsAccountSubHead>();
    list = AccountSubHead.SubHeadGetListByHeadIdWithPaging(PageIndex, PageSize);
} 
```

所以，我的问题是**我如何编写一个声明一次的列表（通用），然后我可以用它传递多重类型**；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T05:56:51.043

您可以简单地创建一个“标记”接口并让您的所有类都实现它，并且：

```
internal interface TagInterface { } // rename it as appreciated

public class MyList<T> : List<T> where T : TagInterface { }

var list = new MyList<ClsAccountHead>(); 
```

或者非常简单：

```
var list = new List<TagInterface>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T06:02:16.720

`List`只需使用项目的基类或接口作为`T`

```
var list = new List<BaseAccountHead>(); 
```

并确保您的类型扩展了这种类型：

```
class BaseAccountHead { }
class ClsAccountHead : BaseAccountHead { }
class ClsAccountSubHead : BaseAccountHead { } 
```

# c# - 如何使用 linq to sql 获取当前月份的日期明智记录？

> ID：15698125
> 
> 赞同：0
> 
> 时间：2013-03-29T05:55:18.627
> 
> 标签：c#, linq-to-sql

我想按日期获取本月每一天的行数，如下所示：

```
Date          count
1/03/2013     18
2/03/2013     41
28/03/2013    12
29/03/2013    14 
```

如何为此编写查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:19:52.940

因此，我*假设*您有一个带有日期时间字段的表，其中您有 18 次日期“1/03/2013”​​，这意味着该表中有 18 行具有该日期。

然后你应该通过这样的方式来计算一年中一个月的每一天：

```
var year = 2013;
var month = 3;
var q = from t in DBContext.TableName
        where t.DateField.Year == year && t.DateField.Month == month
        group t by t.DateField.Date
           into g
           select new
           {
               dateField = g.Key,
               countField = g.Count()
           }; 
```

另请参阅[LINQ to SQL 示例](http://msdn.microsoft.com/vstudio/bb688085.aspx)

# jquery - 隐藏 RadComboBox 下拉菜单

> ID：15698127
> 
> 赞同：0
> 
> 时间：2013-03-29T05:55:25.720
> 
> 标签：jquery, telerik, radcombobox

我在下拉列表的页脚部分有一个按钮。我希望当我单击按钮时唯一的下拉列表与按钮一起隐藏。我想隐藏唯一的 ItemTemplate 内容

这是示例代码

```
 <telerik:RadComboBox ID="RadCmbGeneralGroupCodes" runat="server"
                 <ItemTemplate>
                 <asp:CheckBox ID="chkProcedureGroupCodes" runat="server" Text='<%# Eval("ProcedureCode") + " "  + Eval("ProcedureName") %>'
               ToolTip='<%# Eval("ProcedureName") %>' ProcedureId='<%# Eval("ProcedureID") %>'
               ProcedureCode='<%# Eval("ProcedureCode") %>' 
               MaxQty='<%# Eval("MaxQty") %>'
               NoOfVisit='<%# Eval("NoOfVisit") %>'
               NoOfVisitForMainProc='<%# Eval("NoOfVisitForMainProc") %>'
               AddAdditionalPercentage='<%# Eval("AddAdditionalPercentage") %>'
               ParentProcedureID='<%# Eval("ParentProcedureID") %>'
               IsDenture='<%# Eval("IsDenture") %>'
               SurfaceCount='<%# Eval("SurfaceCount") %>'
               IsOptional='<%# Eval("IsOptional") %>'
               AlwaysOpt='<%# Eval("AlwaysOpt") %>'
               ToothEntry='<%# Eval("ToothEntry") %>'
               SurfaceType='<%# Eval("SurfaceType") %>'
               IsBillable='<%# Eval("IsBillable") %>
               AppliedToOffProv='<%# Eval("AppliedToOffProv") %>'
               DentalCost='<%# Eval("DentalCost") %>'
           OnClick="OnProcedureCodeItemChecked(this)"
                </ItemTemplate>
                 <FooterTemplate>
                <input id="cancel" type="button" value="Cancel" />
                </FooterTemplate>
            </telerik:RadComboBox> 
```

我试过这个但不工作

```
$('#cancel').click(function () {
    $(this).hide();
    $('ItemTemplate').hide();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T05:58:01.953

这很简单，只需使用该`.hide()`功能即可。

[jsFiddle](http://jsfiddle.net/thGGv/)

**JavaScript**

```
$('button').click(function () {
    $(this).hide();
    $('select').hide();
}); 
```

**HTML**

```
<select>
    <option>I wish I was hidden</option>
</select>
<button>Hide us!</button> 
```

如果页面上有多个按钮，则应`id`为`button`.

**JavaScript**

```
$('#hide-button').click(function () {
    $(this).hide();
    $('select').hide();
}); 
```

**HTML**

```
<button id="hide-button">Hide us!</button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T05:58:36.557

试试下面的代码。

```
<script>
$(document).ready(function(){
$("#mybutton").click(function(){

     //hide
     $(this).hide();
     $("select.myddlist").hide();

});
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T05:58:47.433

`hide`是你在这里需要的..

试试这个

```
$(function(){
    $("#yourButtonId").click(function(){
        $("#yourSelectid").hide();
        $(this).hide();
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-28T13:14:38.920

隐藏 RadComboBox的下拉菜单： [隐藏 RadComboxBox](http://www.telerik.com/community/forums/aspnet-ajax/combobox/hide-drop-down-on-client.aspx)

```
$('#cancel').click(function () {
    var RadComboBox=$find("<%=RadCmbGeneralGroupCodes.ClientID%>")//find RadComboBox
    RadComboBox.hideDropDown();//hide RadComboBox dropdown
} 
```

# irc - 有没有办法忽略来自 IRC 客户端的 MOTD？

> ID：15698129
> 
> 赞同：1
> 
> 时间：2013-03-29T05:55:29.987
> 
> 标签：irc

我正在为游戏制作一个 IRC 机器人，以将游戏内聊天连接到任意 IRC 网络/频道。

一些用户抱怨机器人加载时间太长，这是因为机器人必须获取 MOTD。

有没有办法忽略 MOTD？

该机器人使用 LuaIRC 库进行 IRC 协议处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T09:19:30.270

RFC 1459（[第 8.5 节](https://www.rfc-editor.org/rfc/rfc1459#section-8.5)）中描述的协议定义了`MOTD will be sent to every client`连接到 IRC 服务器的协议。

这是连接过程的一部分，如果你想忽略它，你必须在你的客户端上管理它。我想这不是关于阅读或忽略它，而是不会因为让机器人忽略这些消息所花费的时间而烦恼。

如果您碰巧是您要连接的某个网络的管理员，您可能希望以 IRC 操作员的身份连接您的机器人。有些`classes`用途是为特殊用户或服务器定义的，以使他们能够更快地读取数据。

但是对于其他网络，您必须找到一种更好地管理此 MOTD 的方法，因为无论如何您都会收到它。

# c# - 在整个 Windows 窗体应用程序生命周期中仅运行一次窗体

> ID：15698139
> 
> 赞同：1
> 
> 时间：2013-03-29T05:56:36.277
> 
> 标签：c#, winforms

在我的项目中，我想在用户首次安装我的软件时显示用户指南。所以，因为`only one time`我想（在开始时）显示一个窗口，其中给出了一些方向，以便用户可以在第一时间了解如何使用我的软件。用户一旦观看窗口（用户指南）后，该窗口将不再出现。我想使用像`userguid.cs`. 这将在我的应用程序生命周期中一次显示在主窗口的请求中。N：B：例如，如果用户重新启动计算机并再次运行该应用程序，它将不会再次显示用户指南窗口，因为它显示之前我该怎么做？谁能告诉我我该怎么做？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:16:20.357

只需维护一个标志，这将帮助您存储用户指南是否已显示。

该标志可以是一个文件，它存储在您的应用程序目录中，或者如果您有一个数据库，您可以将布尔值存储在一个 db 中。

然后调用该函数以显示用户指南、表单加载时或您需要的任何位置。

```
public void Form1_Load() {
   displayUserGuide();
} 
```

并且，在函数 displayUserGuide 中查看标志是否已设置。

```
public void displayUserGuide() {
  //Return, if the form has already been displayed.
  if(File.Exists("UGUID")) return;
  userGuide.Show();
  File.Create("UGUID");
} 
```

`displayUserGuide()`您可以在整个应用程序中的任何位置简单地调用该函数。该功能将确保表单仅显示一次。

这样您就可以一次显示 Windows 窗体应用程序。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:20:10.960

您可以在应用程序路径中创建一个虚拟文件，以确保是否显示用户指南。

例如，

在加载 UserGuide.cs 之前，请检查以下内容，

```
if(!File.Exists("UserGuideShown"))
{

  UserGuide.Show();
  File.Create("UserGuideShown");
} 
```

下次加载应用程序时，它会检查文件，它会像已经显示的那样存在。所以它会跳过显示..

# django - 如何在服务器和 Github 上维护 django 不同的设置

> ID：15698143
> 
> 赞同：2
> 
> 时间：2013-03-29T05:56:56.773
> 
> 标签：django, git, version-control, github, git-branch

在生产服务器上，我当然需要有不同的设置，并且与本地设置不同。

我们的开源项目托管在 github 上。因此主分支不是生产代码（至少到设置配置）。

现在，我们必须托管项目（django）.. 为此，我找到的最简单的解决方案是在本地创建一个新分支，设置生产设置，将服务器 git 添加为远程，将该分支推送到远程源。

因此，我们可以随时将最新的稳定版本合并到生产分支中......轻松

但是在github中管理文件存在一些问题..

假设“proj/settings.py”中提供了 django 设置。由于系统之间的本地设置不同，我们创建了“proj/local_settings.py”来覆盖系统特定的本地设置（例如，静态文件位置）.. Git 使用 .gitignore 忽略此文件

现在，如果我们在生产分支中使用这个文件来配置生产设置，并且由于它当前被忽略但 Git.. 我们不能使用它。

要将 local_settings.py 从本地生产分支推送到生产服务器，我们需要在该特定分支的 .gitignore 中删除该位置。

一切都很好，接受到这里..

实际问题来了。

当我们想将新的更改推送到生产服务器时，我们首先要将它们推送到生产本地分支，然后再推送到生产服务器......但是现在，

.gitignore 文件更改为版本中存在的内容（即再次添加 local_settings.py）

为此，每次我将某些内容合并到其中时，我都必须手动删除 production-local-branch 的 gitignore 中的 local_settings.py ...

*当然以上都是一团糟..我如何轻松处理它*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:02:14.187

我的建议是从您的*settings.py*中删除任何取决于其部署位置的设置。将这些设置放入环境变量中。例如：

```
STATIC_ROOT = os.environ.get('STATIC_ROOT') 
```

那么您需要在运行网络服务器之前设置这些环境变量。

在本地：

```
STATIC_ROOT=`pwd`/static python manage.py runserver 
```

在生产上取决于您的部署方式，请查阅文档。

配置到环境变量的这一原则在十二因素应用程序中公开：[http ://www.12factor.net/config](http://www.12factor.net/config)

# javascript - iPad 的默认 SelectAll 不适用于 HTML 文本区域

> ID：15698152
> 
> 赞同：1
> 
> 时间：2013-03-29T05:57:34.973
> 
> 标签：javascript, jquery, ios, ipad

我有 HTML 页面和一个 textarea 控件

```
<textarea></textarea> 
```

当我输入内容并选择 ipad 的默认 SelectAll 选项时；然后什么都没有被选中。

你能建议一个解决方案吗？

# email - 如何从标头跟踪 gmail 发件人？

> ID：15698158
> 
> 赞同：0
> 
> 时间：2013-03-29T05:58:04.400
> 
> 标签：email, header, gmail

每个人都知道在地址栏中更改邮件地址并假装从别人的帐户发送邮件很容易..所以我在谷歌上查找“找出电子邮件来自哪里”的一些链接建议-- 1.登录您的帐户并打开有问题的电子邮件。

1.  单击“回复”链接右侧的向下箭头。从列表中选择显示原件。

2.  现在这里是我之前告诉你的技术部分！您需要查找以“Received: from”开头的文本行。

我做了上述所有步骤，但发现gmail使用邮件客户端IP作为发件人IP，而不是那台特定PC的IP（出于安全目的，他们说......）它的发件人IP是先生。google.com 和一些私有网络 IP(10.43.103.195)

所以现在我的问题是——世界上有什么该死的方法可以追踪这封邮件到底是从哪里来的？？！！（至少发件人的IP）？

这是我遵循以上 3 个步骤时得到的标题，但没有用......

```
Delivered-To: xxxxxxxx@gmail.com
Received: by 10.204.40.79 with SMTP id j15csp110512bke;
        Fri, 22 Mar 2013 01:55:20 -0700 (PDT)
Return-Path: <xxxxxxxxxxx@gmail.com>
Received-SPF: pass (google.com: domain of xxxxxxxxxxx@gmail.com designates 10.43.103.195 as permitted sender) client-ip=10.43.103.195
Authentication-Results: mr.google.com;
       spf=pass (google.com: domain of xxxxxxxxxxxx@gmail.com designates 10.43.103.195 as permitted sender) smtp.mail=xxxxxxxxxxxx@gmail.com;
       dkim=pass header.i=@gmail.com
X-Received: from mr.google.com ([10.43.103.195])
        by 10.43.103.195 with SMTP id dj3mr548753icc.3.1363942518977 (num_hops = 1);
        Fri, 22 Mar 2013 01:55:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=Vi/MI39WKoec07maKoVjz5/ZzUxhO1k+BoeRUkBbWOc=;
        b=kZ/EniFvV15mZ9iBeKNiKsJsQvWHL5N8zqrazVxeKmAARQLotyAAIDU7Or9Xc1OBwY
         cwuPqSKmVX1RV7tX5wwcdYyzEA/gmskzgGteimv0BInTzVO7dwgi4gU5cZYdm6Qj/GMo
         rJfGs5ty6VjidYMFwyn0K5Z0frh2NX2e7RXP0R6da6U5WMU2bQ9epOD4ZhKF+bSdUvb9
         WGu3/HWJNTgwrFivspsA6q0M6JkQWYFM6J83h62kIgU897gsXkRlwPacn63tHySC6CNm
         DJZGzRJryQZEJTI4owOImP6XDrK+uxPDFAiTnIG5xFR8PBXsQp+FP+XcsqIHqXSjCtl1
         xXdQ==
X-Received: by 10.43.103.195 with SMTP id dj3mr548753icc.3.1363942518971; Fri,
 22 Mar 2013 01:55:18 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.64.134.164 with HTTP; Fri, 22 Mar 2013 01:54:58 -0700 (PDT)
From: xxxxxxxxxxxx@gmail.com
Date: Fri, 22 Mar 2013 14:24:58 +0530
Message-ID: <CACD4ahHmkbNCj9G5taUkXYC=K=n4qVvxY75SSSv3hUG00r6dkQ@mail.gmail.com>
Subject: 
To: xxxxxxxx@gmail.com
Content-Type: multipart/alternative; boundary=bcaec5171a235666e504d87f9dd8

--bcaec5171a235666e504d87f9dd8
Content-Type: text/plain; charset=ISO-8859-1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-27T16:34:25.043

如果发件人使用 gmail/yahoo/hotmail 等方式发送电子邮件（即如果他们不使用 Outlook 或 Thunderbird 等第三方软件），则无法找到“PC IP 地址”，因为它是出于“隐私原因”而隐藏。可能唯一合法的方式（通过合法手段除外）是要求发件人透露他们的 IP 地址（使用诸如[https://verifyyourip.com](https://verifyyourip.com)之类的工具）。

# localization - 除了 apktool 之外，是否有一个方便的工具可以仅本地化 APK（resources.arsc）？

> ID：15698160
> 
> 赞同：1
> 
> 时间：2013-03-29T05:58:10.517
> 
> 标签：localization, apk, aapt

我想将我的 Android 4.0.4 (3G) Pad 本地化为维吾尔语。

我反编译，`values-ug-rCN`在文件夹中添加了一个新的翻译`res`，编译回来得到`resources.arsc`文件。

除 Phone.apk 外，所有 APK 都运行良好。我可以反编译得到 xmls，但是在编译时，它给了我以下错误：（该错误是使用最新的 ApkTool1.5.2 重现的，无论是否安装 framework.apk）

```
 E:\apktool152\x>apktool.bat if framework-res.apk
    I: Framework installed to: C:\Documents and Settings\Administrator\apktool\frame
    work\1.apk

    E:\apktool152\x>apktool d Phone.apk
    I: Baksmaling...
    I: Loading resource table...
    W: Skipping "android" package group
    I: Loaded.
    I: Decoding AndroidManifest.xml with resources...
    I: Loading resource table from file: C:\Documents and Settings\Administrator\apk
    tool\framework\1.apk
    I: Loaded.
    I: Regular manifest package...
    I: Decoding file-resources...
    I: Decoding values */* XMLs...
    I: Done.
    I: Copying assets and libs...

    E:\apktool152\x>apktool b Phone
    I: Checking whether sources has changed...
    I: Smaling...
    I: Checking whether resources has changed...
    I: Building resources...
    E:\apktool152\x\Phone\res\values-de\strings.xml:194: error: Multiple substitutio
    ns specified in non-positional format; did you mean to add the formatted="false"
     attribute?
    E:\apktool152\x\Phone\res\values-de\strings.xml:195: error: Unexpected end tag s
    tring
    E:\apktool152\x\Phone\res\values-es\strings.xml:194: error: Multiple substitutio
    ns specified in non-positional format; did you mean to add the formatted="false"
     attribute?
    E:\apktool152\x\Phone\res\values-es\strings.xml:195: error: Unexpected end tag s
    tring
    E:\apktool152\x\Phone\res\values-es-rUS\strings.xml:197: error: Multiple substit
    utions specified in non-positional format; did you mean to add the formatted="fa
    lse" attribute?
    E:\apktool152\x\Phone\res\values-es-rUS\strings.xml:198: error: Unexpected end t
    ag string
    E:\apktool152\x\Phone\res\values-it\strings.xml:194: error: Multiple substitutio
    ns specified in non-positional format; did you mean to add the formatted="false"
     attribute?
    E:\apktool152\x\Phone\res\values-it\strings.xml:195: error: Unexpected end tag s
    tring
    aapt: warning: string 'modem_power' has no default translation in E:\apktool152\
    x\Phone\res; found: en_GB zh_CN
    aapt: warning: string 'modem_power_summary' has no default translation in E:\apk
    tool152\x\Phone\res; found: en_GB zh_CN
    Exception in thread "main" brut.androlib.AndrolibException: brut.androlib.Androl
    ibException: brut.common.BrutException: could not exec command: [aapt, p, --min-
    sdk-version, 15, --target-sdk-version, 15, -F, C:\DOCUME~1\ADMINI~1\LOCALS~1\Tem
    p\APKTOOL187345540728029844.tmp, -0, arsc, -I, C:\Documents and Settings\Adminis
    trator\apktool\framework\1.apk, -S, E:\apktool152\x\Phone\res, -M, E:\apktool152
    \x\Phone\AndroidManifest.xml]
            at brut.androlib.Androlib.buildResourcesFull(Androlib.java:358)
            at brut.androlib.Androlib.buildResources(Androlib.java:283)
            at brut.androlib.Androlib.build(Androlib.java:206)
            at brut.androlib.Androlib.build(Androlib.java:176)
            at brut.apktool.Main.cmdBuild(Main.java:228)
            at brut.apktool.Main.main(Main.java:79)
    Caused by: brut.androlib.AndrolibException: brut.common.BrutException: could not
     exec command: [aapt, p, --min-sdk-version, 15, --target-sdk-version, 15, -F, C:
    \DOCUME~1\ADMINI~1\LOCALS~1\Temp\APKTOOL187345540728029844.tmp, -0, arsc, -I, C:
    \Documents and Settings\Administrator\apktool\framework\1.apk, -S, E:\apktool152
    \x\Phone\res, -M, E:\apktool152\x\Phone\AndroidManifest.xml]
            at brut.androlib.res.AndrolibResources.aaptPackage(AndrolibResources.jav
    a:357)
            at brut.androlib.Androlib.buildResourcesFull(Androlib.java:336)
            ... 5 more
    Caused by: brut.common.BrutException: could not exec command: [aapt, p, --min-sd
    k-version, 15, --target-sdk-version, 15, -F, C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp\
    APKTOOL187345540728029844.tmp, -0, arsc, -I, C:\Documents and Settings\Administr
    ator\apktool\framework\1.apk, -S, E:\apktool152\x\Phone\res, -M, E:\apktool152\x
    \Phone\AndroidManifest.xml]
            at brut.util.OS.exec(OS.java:89)
            at brut.androlib.res.AndrolibResources.aaptPackage(AndrolibResources.jav
    a:355)
            ... 6 more

    E:\apktool152\x> 
```

我只是想翻译里面的xmls `values`，然后编译回来`resources.arsc`。

如果需要，我可以`values`通过删除翻译来克服与 xmls相关的错误。`de, es, it`但我不知道其他错误。

那么我该如何解决这个问题呢？或者是否有其他替代工具仅用于该任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:54:15.210

我切换到一个修改版的 ApkTool，类似于`ApkTool 1.5 b-sf`在一个中文网站上找到的东西，然后`installing framework-res.apk`，它正确地编译了！

希望这可以帮助一些人。

# android - 如何通过 webview 或 phonegap 在 android 中获取所有可能的设备信息

> ID：15698163
> 
> 赞同：0
> 
> 时间：2013-03-29T05:58:45.457
> 
> 标签：android, cordova

如何通过WebView或Phonegap获取Android中所有可能的Android设备信息

```
PackageInfo pinfo = getPackageManager().getPackageInfo(getPackageName(), 0);
int versionNumber = pinfo.versionCode;
String versionName = pinfo.versionName; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:17:18.027

通过 phonegap，我想您的意思是在 phonegap 应用程序中使用 Javascript。

您有存储一些设备信息的设备对象。

参考： [http ://docs.phonegap.com/en/2.5.0/cordova_device_device.md.html#Device](http://docs.phonegap.com/en/2.5.0/cordova_device_device.md.html#Device)

如果您需要额外的信息，创建 phonegap 插件并执行此操作非常容易。您只需要知道如何使用 Java（本机语言）执行此操作，并将信息发送到 phonegap 应用程序中运行的 javascript。

参考： [http ://docs.phonegap.com/en/2.5.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide](http://docs.phonegap.com/en/2.5.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)

# jqgrid - 防止按回车键保存

> ID：15698170
> 
> 赞同：0
> 
> 时间：2013-03-29T05:59:44.233
> 
> 标签：jqgrid

我在我的页面中使用 jqgrid，现在我想防止在从可编辑列中按下 enter 键时提交它。这是我的代码。

```
$( '#mygrid' ).jqGrid( {

                 url: '/Mycontroller/LoadMygrid',
                 postData: { 
                    bank_ID: function () { return $( '#bank_accountHead_ID' ).val() },

                },
                //type of data 
                datatype: 'json',
                //url access method type
                mtype: 'POST',
                editurl: 'clientArray',

                colNames: ['chkbox', 'Sl.#', 'amount'],
                //columns model
                colModel: [
                             { name: 'chkSelect', index: 'chkSelect', align: "center", editable: true, edittype: 'checkbox', width: '20px', editoptions: { value:                                                                          "True:False" },
                                 fixed: true, formatoptions: { disabled: false}
                             },
                             { name: 'Sl_No', index: 'Sl_No', align: 'left'},

                             { name: 'TotalAmt', index: 'TotalAmt', align: 'right', editable: true, edittype: 'text' }
                           ]
              ..................

                 }); 
```

我尝试在 colmodel 中设置 keys:false。不工作。还有什么方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:14:53.657

我想您使用的内联编辑接近[问题](https://stackoverflow.com/q/15684127/315935)中描述的形式。我提出[了错误报告](http://www.trirand.com/blog/?page_id=393/bugs/jgrid-inlineedit-be-changed-by-restorerow/#p28552)。[我的答案](https://stackoverflow.com/a/15684937/315935)的**更新**部分更详细地描述了这个问题。[如果您使用可以在此处](http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.4/js/jquery.jqGrid.src-restoreRow.js)下载的固定版本，我建议您验证您的问题是否会得到解决。`jquery.jqGrid.src.js`

# c - 如何解决编译以下代码时出现的堆栈粉碎错误？

> ID：15698175
> 
> 赞同：-1
> 
> 时间：2013-03-29T06:00:09.973
> 
> 标签：c, string

```
main()
{
    char a[20];
    int b;
    printf("\n enter your name");
    a[20]=getchar();
    printf("\n enter your password");
    scanf("%d",&b);
    if (a=="ilangeeran")
    {
        printf("\n login successful");
    }
} 
```

这是示例程序，在编译时出现此堆栈粉碎错误如何解决此错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T06:04:53.543

您的 a 声明指定了一个 20 个字符的数组：`a[0]`到`a[19]`. `a[20]`超出范围：`a[20]=getchar();`。

`getchar`返回`int`。这样做是为了将非字符`EOF`值与有效字符值区分开来。任何正返回值都是一个字符。任何负值都是错误...但是您需要*将返回值存储在 an 中`int`*并*检查该 int 是否有负值*以处理错误！

```
int c = getchar();
if (c < 0) {
    fputs("Read error while reading from stdin", stderr);
    return EXIT_FAILURE;
}
a[19] = c; /* Don't rely on this being a string, since a string is a sequence of
            * characters ending at the first '\0' and this doesn't have a '\0'.
            * Hence, it isn't a string. Don't pass it to any str* functions! */ 
```

同样，您可能应该处理来自 scanf 的错误：

```
switch (scanf("%d", &b)) {
    case 1: /* excellent! 1 means that one variable was successfully assigned a value. */
            break;
    case 0: fputs("Unexpected input while reading from stdin; "
                  "The \"%d\" format specifier corresponds to decimal digits.", stderr);
            return EXIT_FAILURE;
    default: fputs("Read error while reading from stdin", stderr);
             return EXIT_FAILURE;
} 
```

`if (a=="ilangeeran")`是胡说八道。你在看哪本书？

# php - ajax成功后页面内容如何重新加载

> ID：15698176
> 
> 赞同：1
> 
> 时间：2013-03-29T06:00:10.037
> 
> 标签：php, jquery, ajax

如何在给定的 php 和 javascript 代码的 jquery ajax 成功函数后仅重新加载页面内容，而不是整个页面。最初它显示

> 成功

并在ajax调用后显示为

> 失败的

重新加载整个页面..

php代码：

```
 <?php
require 'dbconnect.php';
$sql="select * from tbl_status where id='1'";
$res=mysql_query($sql);
$row=mysql_fetch_array($res);
if($row['status']=='1')
{
 ?>
Success <div class="status" style="visibility:hidden;">0</div>
 <?php
 }
 else
 {
 ?>
 Failed
<div class="status" style="visibility:hidden;">1</div>
 <?php
 }
 ?>
 <input type="submit" class="send"/> 
```

Javascript代码：

```
<script type="text/javascript">
$(function(){
$('.send').click(function(){
var status=$('.status').text();
  $.ajax({
     type: 'POST', 
       url: 'http://localhost/status/updatestatus.php',
           data: 'status='+status,
         success  : function (e)
         {
           var response=e;
           alert(response);

         },
         error: function()
         {
         alert('error');
         }
      });
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:26:59.187

Try.Sorry 如果有一些问题，因为它是用记事本写的。

索引.php

```
<?php
require 'dbconnect.php';
$sql="select * from tbl_status where id='1'";
$res=mysql_query($sql);
$row=mysql_fetch_array($res);
<div id="response">
if($row['status']=='1')
{
?>
   Success <div class="status" style="visibility:hidden;">0</div>
<?php
}
else
{
?>
Failed
<div class="status" style="visibility:hidden;">1</div>
<?php
}
?>
</div>
<input type="submit" class="send"/>

<script type="text/javascript">
$(document).ready(function(){
  $('.send').click(function(){
  var status=$('.status').text();
  $.ajax({
     type: 'POST', 
       url: 'http://localhost/status/updatestatus.php',
           data: 'status='+status,
         success  : function (data, status)
         {
           $("#response").html(data.status);
         },
         error: function()
         {
           alert('error');
         }
      });
});
});
</script> 
```

更新状态.php

```
<?php
require 'dbconnect.php';
$sql="update tbl_status set status=$_POST['status'] where id='1'";    
$res=mysql_query($sql);
$count = mysql_affected_rows();

if($count > 0){
    return json_encode(array('status'=>$count));
}else{
    return json_encode(array('status'=>0));
} 
```

?>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T06:47:01.770

我已使用此代码更改状态并在页面上显示更改后的值。这是一个 Javascript 函数，它使用对 PHP 的 Ajax 请求来更改数据库中的状态值。

```
function changeStatus(divID,id,action,frontOrAdmin)
{

        xmlhttp=getobject();
        var query="id="+id+"&action="+action+"&frontOrAdmin="+frontOrAdmin;
        $oldStatus = document.getElementById(divID).innerHTML;
        document.getElementById(divID).innerHTML='<img src="images/loading_icon.gif">';
        xmlhttp.onreadystatechange=function()
        {
                if (xmlhttp.readyState==4)
                {
                        var response = xmlhttp.responseText;
                        var responseArr = response.split(",");

                        if(($.trim(responseArr[1])=="0")||($.trim(responseArr[1])=="1")){
                           document.getElementById(divID).innerHTML=responseArr[0];
                        }
                        else{           
                            alert(responseArr[0]);
                            document.getElementById(divID).innerHTML=$oldStatus;
                        }
                }
        }
        xmlhttp.open("GET","pass.php?type=changestatus&"+query,true);
        xmlhttp.send(null); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T06:04:46.560

如果您在重新加载页面时遇到问题，那么您可以使用

`window.location.href=window.location.href;`

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T06:07:11.040

考虑到您的 ajax 工作正常......并且您得到的响应是 HTML

您不需要调用 location.reload().. 您只需要将响应附加到 DOMtree..

**更新**

**HTML**

```
....
?>  //close php tag
<div id="displayStatus">  //create new div with id displayStatus
<?php
if($row['status']=='1')
{
 ?>
    Success <div class="status" style="visibility:hidden;">0</div>
<?php
 }
 else{
 ?>
    Failed <div class="status" style="visibility:hidden;">1</div>
 <?php
  }
 ?>
 </div> //end the div 
```

**查询**

```
success  : function (e)
     {
       var response=e;
       alert(response);
       $('#displayStatus').html(response); //replace the content in that
     }, 
```

**更新状态.php**

```
 $status= $_POST['status'];
//make you query ..update your table 
 if($status == '0'){
     echo 'Failed <div class="status" style="visibility:hidden;">1</div>';
 }else{
    echo 'Success <div class="status" style="visibility:hidden;">0</div>';
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T06:10:31.567

使用 load 代替 reload 在你的成功

```
...
 success  : function (e)
     {
       $('your id or class name').load(php_file_name +'your_id_or_class_to_refresh');
       var response=e;
       alert(response);
       location.reload();
     },
....

// location.reload(); // <-- does not work so 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-29T06:37:43.180

问题是：您的 jQuery 部分和 PHP 部分不兼容。你并没有真正改变你的退货状态，只是发短信。要发出“失败”的信号，请在 PHP 端使用一些标头。例如：

在 PHP 中：

```
header('HTTP/1.0 403 Forbidden');
die('Failed'); 
```

然后你 ajax 将引发一个“错误”处理程序而不是“成功”。

**或者**您应该只使用“成功”处理程序并在以下位置测试返回的文本：

在 JavaScript 中：

```
success: function(data) {
   if (data == 'Failed') {
       alert('ERROR');
       location.reload();
   } else {
        alert('Success');
   } 
}, 
```

# gcc - 在 Mac 10.7.5 “requirements_port_libs_install”上安装 Ruby 2.0.0

> ID：15698178
> 
> 赞同：2
> 
> 时间：2013-03-29T06:00:17.130
> 
> 标签：gcc, osx-lion, rvm, ruby-2.0

我最初使用安装程序从这里安装了 ruby​​ 1.9.3：[http](http://railsinstaller.org/) ://railsinstaller.org/ 现在我想安装 Ruby 2.0 和 Rails 4

所以我使用了安装程序已经安装的 rvm 女巫

```
rvm install 2.0.0 
```

但这失败了：

```
Searching for binary rubies, this might take some time.
No binary rubies available for: osx/10.7/x86_64/ruby-2.0.0-p0.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Installing requirements for smf, might require sudo password.
-bash: requirements_port_lib_installed: command not found
-bash: requirements_port_lib_installed: command not found
-bash: requirements_port_lib_installed: command not found
-bash: requirements_port_lib_installed: command not found
-bash: requirements_port_lib_installed: command not found
-bash: requirements_port_lib_installed: command not found
-bash: requirements_port_lib_installed: command not found
-bash: requirements_port_lib_installed: command not found
-bash: requirements_port_lib_installed: command not found
-bash: requirements_port_lib_installed: command not found
-bash: requirements_port_lib_installed: command not found
Installing required packages: autoconf, automake, libtool, pkg-config, libyaml, readline, libxml2, libxslt, libksba, openssl, sqlite..
Error running 'requirements_port_libs_install autoconf automake libtool pkg-config libyaml readline libxml2 libxslt libksba openssl sqlite',
please read /usr/local/rvm/log/ruby-2.0.0-p0/package_install_autoconf_automake_libtool_pkg config_libyaml_readline_libxml2_libxslt_libksba_openssl_sqlite.log
There were package installation errors, make sure to read the log.
You can get help using IRC: http://webchat.freenode.net/?channels=rvm 
```

日志报告了这一点：

```
 [2013-03-29 01:34:58] requirements_port_libs_install 
```

/usr/local/rvm/scripts/functions/logging：第 141 行：requirements_port_libs_install：找不到命令

在我跑之后：

```
rvm requirements 
```

但是由于相同的消息和日志失败了，我读到这可能是我的编译器表单 xCode 的版本有问题，所以我从应用商店下载了新版本并从中安装了命令行实用程序，仍然是相同的消息。

我知道这不是一个真正有趣的问题，但我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:17:18.430

这是一个错误，已修复，因为它将在=> [https://github.com/wayneeseguin/rvm/issues/1736](https://github.com/wayneeseguin/rvm/issues/1736)`rvm get head`后尽快发布`1.19.1`

# jboss7.x - Seam 3 Security 不适用于 JBoss7 自定义身份验证器类未找到

> ID：15698184
> 
> 赞同：0
> 
> 时间：2013-03-29T06:00:30.500
> 
> 标签：jboss7.x, seam3

我一直在用 maven 原型（javaee6-jboss-ear）生成的 ear 项目在 Jboss7.1.3 中尝试 seam3 安全性，但我无法解决无法加载我的自定义类的错误。

```
Caused by: java.lang.ClassNotFoundException: com.czetsuya.javaee6.security.Authenticator from [Module "deployment.javaee6-demo.ear.javaee6-demo-ejb-0.0.1-SNAPSHOT.jar:main" from Service Module Loader] 
```

我的项目结构如下： myProject -ear -jar（bean.xml 和身份验证器在其中定义）-war

我的 Authenticator 类：包 com.czetsuya.javaee6.security；

导入 javax.enterprise.inject.Model；导入 javax.inject.Inject；

导入 org.jboss.seam.security.BaseAuthenticator；导入 org.jboss.seam.security.Credentials；导入 org.picketlink.idm.impl.api.PasswordCredential；导入 org.picketlink.idm.impl.api.model.SimpleUser；

```
@Model
public class Authenticator extends BaseAuthenticator {
    @Inject
    Credentials credentials;

    public Authenticator() { }

    @Override
    public void authenticate() {
        if ("demo".equals(credentials.getUsername())
                && credentials.getCredential() instanceof PasswordCredential
                && "demo".equals(((PasswordCredential) credentials.getCredential()).getValue())) {    
            setStatus(AuthenticationStatus.SUCCESS);
            setUser(new SimpleUser("demo"));    
        }    
    }    
} 
```

我的 beans.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="urn:java:ee" xmlns:security="urn:java:org.jboss.seam.security"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://jboss.org/schema/cdi/beans_1_0.xsd">

    <interceptors>
        <class>org.jboss.seam.security.SecurityInterceptor</class>
    </interceptors>

    <security:IdentityImpl>
        <s:modifies />
        <security:authenticatorClass>com.czetsuya.javaee6.security.Authenticator
        </security:authenticatorClass>
    </security:IdentityImpl>

</beans> 
```

在 myProject 中，我定义了 seam-bom：

```
<dependency>
    <groupId>org.jboss.seam</groupId>
    <artifactId>seam-bom</artifactId>
    <version>3.1.0.Final</version>
    <scope>import</scope>
    <type>pom</type>
</dependency> 
```

在 ejb/pom.xml 中，我定义了 seam-security：

```
<dependency>
    <groupId>org.jboss.seam.security</groupId>
    <artifactId>seam-security</artifactId>
    <scope>provided</scope>
</dependency> 
```

提供了范围，否则我会遇到编译问题：缺少类。

奇怪的是，当我部署战争项目时，同样的设置工作，知道吗？我只是把战争放在耳朵里:-)

我也对从 maven 原型生成的耳朵做同样的事情，只做很少的改动，我只是添加了 Authenticator 和 seam-security 依赖项。我遇到错误的项目的最大区别是我用 javaee-api 替换了大多数 jboss jar，因为它是标准的。而且我认为 JBoss 是标准的 :-)，似乎有一些魔法再次发生在它自己的罐子上。

*工作的纯 jboss 项目在这里上传： [https ://code.google.com/p/czetsuya/source/browse/#svn%2Ftrunk%2Fjboss7-seam3-security](https://code.google.com/p/czetsuya/source/browse/#svn%2Ftrunk%2Fjboss7-seam3-security)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:58:04.287

对我有用的是排除 war pom.xml 中的 seam-security jar，例如：

```
<dependency>
    <groupId>com.czetsuya</groupId>
    <artifactId>javaee7-ejb</artifactId>
    <type>ejb</type>
    <scope>provided</scope>
    <exclusions>
        <exclusion>
            <artifactId>seam-security</artifactId>
            <groupId>org.jboss.seam.security</groupId>
        </exclusion>
    </exclusions>
</dependency> 
```

# objective-c - Objective-C 中的变量名称，例如“_lastSushiSelected”

> ID：15698188
> 
> 赞同：0
> 
> 时间：2013-03-29T06:00:52.930
> 
> 标签：objective-c, variables, naming-conventions

谁能解释为什么在我的脑海中有时会在 Objective-C 中使用这个奇怪的变量名，比如

```
NSArray * _sushiTypes;
NSString * _lastSushiSelected; 
```

或者有时

```
NSArray * sushiTypes = _sushiTypes;
NSString * lastSushiSelected = _lastSushiSelected; 
```

这有什么必要吗？

# ios - 推送导航后不显示 UIImageView

> ID：15698189
> 
> 赞同：2
> 
> 时间：2013-03-29T06:00:56.900
> 
> 标签：ios, objective-c, uinavigationcontroller, uiimageview

我对iOS开发很陌生。我正在尝试创建一个需要显示图像的 iPad 应用程序（这里我使用了 a.png）。图像在第一个视图控制器上正确显示。然后，我使用导航到其他视图

```
[self.navigationController pushViewController:<#(UIViewController *)#> animated:<#(BOOL)#>] 
```

在我导航到的第二个视图控制器上，我使用界面构建器在 .xib 中的视图控制器上放置了一个 UIImageView。但是，在运行时，当我导航到第二个视图控制器时，不会显示第二个视图控制器中的图像视图。

也就是说，在任何普通的viewcontroller uiimageview 都可以正常工作，但是在导航之后（即self.navigationController pushViewController），uiimageview 不会显示在下一个viewcontroller 中。

我尝试调试。运行后流程转到第二个视图控制器的 viewDidLoad。我什至尝试在 viewDidLoad 中分配 UIImageView，在运行控件时转到 UIImageView 的分配，甚至分配正确（即不是 nil）。但是，我仍然不确定为什么图像不可见。早些时候我认为它可能没有加载并且看起来它是 nil，但在调试时我发现它不是 nil。

我难住了。无法弄清楚我可能会错过什么。

请提出建议。我需要帮助来弄清楚 UIImageView 图像未显示的所有可能原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:05:12.560

检查您`UIImageView`的连接是否正确`file's Owner`？

*   创建`UIImageView`in 的对象`.h file`

*   并设置@property 和@synthesize`UIImageView`

*   然后检查你的`Image`（*穿上的`UIImageView`*）有有效的名字。

**编辑：**

尝试以`UIImageView`编程方式添加

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIImageView *myImageView = [[UIImageView alloc] initWithFrame: CGRectMake(10, 10, 320, 375)] ; // set Frame as you need
    [myImageView setImage: [UIImage imageNamed:@"MYImage.png"]];
    [self.view addSubview: myImageView];
} 
```

# logging - 如何在 tortoisehg 中写入日志文件

> ID：15698190
> 
> 赞同：0
> 
> 时间：2013-03-29T06:01:00.527
> 
> 标签：logging, tortoisehg

我在win7上使用tortoisehg 2.3。所以我需要在外部 txt 文件中获取类似 hg log 命令的信息。tortoisehg 是否有任何控制台日志文件，或者我可以通过另一个控制台命令获得这个日志文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:35:20.353

看起来有人已经为 TortoiseHg 记录[了一个问题](https://bitbucket.org/tortoisehg/thg/issue/2264/allow-to-export-the-log-view-content-to)来做类似的事情。考虑为它投票。

# python - python中带有整数键的树字典

> ID：15698191
> 
> 赞同：0
> 
> 时间：2013-03-29T06:01:08.557
> 
> 标签：python, tree

我需要支持整数键的树字典

```
d = TreeDict()
d[6] = 5
d[4] = 3 
```

ETC

或者我需要解决方案，将整数键存储在这个不错的库中：http: [//www.stat.washington.edu/~hoytak/code/treedict/api.html](http://www.stat.washington.edu/~hoytak/code/treedict/api.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:56:00.247

好的，我忘记了“二进制”这个词，当谷歌它时

```
pip install binarytrees 
```

# php - 多个字段 Zend_Validate_Db_NoRecordExists

> ID：15698193
> 
> 赞同：0
> 
> 时间：2013-03-29T06:01:11.263
> 
> 标签：php, zend-framework

这是我的表模式，它具有复合键（用户名、电子邮件 ID、电话）

如何验证表中不存在类似记录。

例子

```
username         emailid       phone      
abc            test@one.com   123456789    
abc            test@one.com   123456789
abc            test2@one.com  123456789
abc            test@one.com   456789269
abc            test2@one.com  456789269
abc            test@one.com   123456789 
```

如何限制插入上表的最后一条记录。

验证应在三个字段记录下执行。

# c# - ObservableCollection.CollectionChanged 未触发

> ID：15698195
> 
> 赞同：4
> 
> 时间：2013-03-29T06:01:21.760
> 
> 标签：c#, wpf, datagrid, observablecollection

我有以下界面：

![数据网格](../Images/9b000a7ae097a8d360707eb9079762c4.png)

当一个项目添加到 中`DataGrid`时，`Total column`会根据（价格 * 数量）进行更新，并且总计`TextBox`也将具有添加的所有行的总计。

但是，当我更改一行的数量时，会`Total column`更新，但总数`TextBox`不会。

这是我的代码，在此先感谢。

```
 public partial class pgCheckout : Page {

    ObservableCollection<SaleItem> items = new ObservableCollection<SaleItem>();

    public pgCheckout() {
        InitializeComponent();
        dgItems.ItemsSource = items;
        dgItems.Loaded += SetMinWidths;
        items.CollectionChanged += setTotal;
    }

    public void setTotal(object source, EventArgs e) {
        decimal total = 0;
        foreach(SaleItem i in items) {
            total += i.Total;
        }

        txtTotal.Text = total.ToString();
    }

    public void SetMinWidths(object source, EventArgs e) {
        foreach (var column in dgItems.Columns) {
            if (column.DisplayIndex != 0) {
                column.MinWidth = column.ActualWidth;
                column.Width = new DataGridLength(1, DataGridLengthUnitType.Star);
            }
        }
    }

    private void btnRemove_Click(object sender, RoutedEventArgs e) {
        items.RemoveAt(dgItems.SelectedIndex);
    }

    private void btnAdd_Click(object sender, RoutedEventArgs e) {
        bool exist = false;
        foreach (SaleItem i in items) {
            if (i.ItemID.Equals(txtItemID.Text))
                exist = true;
        }

        if (exist) {
            lblErr.Content = "Item already exist";
            txtItemID.Text = "";
        }

        else {

            using (var db = new PoSEntities()) {
                var query = from i in db.Items
                            where i.ItemID.Equals(txtItemID.Text.Trim())
                            select i;
                var itm = query.FirstOrDefault();
                if (itm == null) {
                    lblErr.Content = "Invalid Item";
                    txtItemID.Text = "";
                }
                else {
                    txtItemID.Text = "";
                    lblErr.Content = "";
                    items.Add(new SaleItem() {
                        Num = items.Count + 1,
                        ItemID = itm.ItemID,
                        Name = itm.Name,
                        Price = decimal.Round(itm.Price, 2, MidpointRounding.AwayFromZero),
                        Quantity = 1,
                    });
                }
            }
        }
    }

    private void txtItemID_KeyUp(object sender, KeyEventArgs e) {
        if (e.Key == System.Windows.Input.Key.Enter) {
            btnAdd_Click(txtItemID, e);
        }
    }
}

class SaleItem : INotifyPropertyChanged {
    public int Num { get; set; }
    public string ItemID { get; set; }
    public string Name { get; set; }

    private decimal price;
    public decimal Price {
        get { return price; }
        set {
            this.price = value;
            OnPropertyChanged("Total");
        }
    }
    public int quantity;
    public int Quantity {
        get { return quantity; }
        set {
            this.quantity = value;
            OnPropertyChanged("Total");
        }
    }

    public decimal Total {
        get { return decimal.Round(Price * Quantity, 2, MidpointRounding.AwayFromZero); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string propertyName) {
        var handler = PropertyChanged;
        if (handler != null) {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T06:10:19.740

`ObservableCollection.CollectionChanged`当从集合中添加或删除某些内容而不是正在更新的单个成员时触发。

```
...
else 
{
    txtItemID.Text = "";
    lblErr.Content = "";
    SaleItem newItem = new SaleItem() {
                    Num = items.Count + 1,
                    ItemID = itm.ItemID,
                    Name = itm.Name,
                    Price = decimal.Round(itm.Price, 2, MidpointRounding.AwayFromZero),
                    Quantity = 1 };
     newItem.PropertyChanged += 
             new PropertyChangedEventHandler(newSaleItem_PropertyChanged);

    items.Add(newItem);
 }
 ... 
```

这是`newSaleItem_PropertyChanged`：

```
void newSaleItem_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
    setTotal(null, null);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T06:04:21.627

```
 ObservableCollection<SaleItem> items = new ObservableCollection<SaleItem>(); 
```

必须是属性

将其更改为

```
public ObservableCollection<SaleItem> items {get;set;} 
```

并在构造函数中做新的

或者如果一个对象不存在，则让 get 函数创建新对象

你必须有公共的 getter/setter 才能使用绑定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T06:23:55.490

您`SaleItem`必须实施`INotifyPropertyChanged`，然后您将拥有`PropertyChanged`事件并且您可以订阅它。使用 INotifyPropertyChanged 将有利于绑定。

# android - doInBackground 执行错误 - Distance-Matrix-API 和 Places API

> ID：15698196
> 
> 赞同：0
> 
> 时间：2013-03-29T06:01:35.857
> 
> 标签：android, json, distance

## MainActivity.java

```
AutoCompleteTextView location, destination;
public Places place1, place2;
Button calculate;
TextView result_a, result_b;
String result_main;
//default values for taxi fare
int basePrice = 10;
double priceMeter = 5.80;
double fare;
int parseFare;
int roundedValue;
String textvalue;
String actual_distance;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    location=(AutoCompleteTextView)findViewById(R.id.locale);
    location.setAdapter(new PlacesAutoCompleteAdapter(this, R.layout.list_item));
    location.setOnItemClickListener(new OnItemClickListener()
    {

    @Override
    public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {
            // TODO Auto-generated method stub
            place1 = (Places) adapterView.getItemAtPosition(position);
            location.setText(place1.description);
            //location.clearFocus();
            Log.d("AutoCompleteTask", location.getText().toString());
                }
    });

    destination = (AutoCompleteTextView)findViewById(R.id.destination);
    destination.setAdapter(new PlacesAutoCompleteAdapter(this, R.layout.list_item));
    destination.setOnItemClickListener(new OnItemClickListener() 
    {

    @Override
    public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {
                // TODO Auto-generated method stub
            place2 = (Places) adapterView.getItemAtPosition(position);
            destination.setText(place2.description);
            //destination.clearFocus();
            Log.d("AutoCompleteTask2", destination.getText().toString());
                }
    });

    calculate = (Button)findViewById(R.id.calculate);

    calculate.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
        new ReadDistanceJSONFeedTask().execute("http://maps.googleapis.com/maps/api/distancematrix/json?origins="+location.getText().toString()+"&destinations="+destination.getText().toString()+"&sensor=false&units=metric&mode=driving");
        //result_a.setText("ROUTE A "+result_main +"\n"+ "The estimated fare is Rs."+textvalue);
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

private class ReadDistanceJSONFeedTask extends AsyncTask<String, Void, String>
{       
        @Override
        protected String doInBackground(String... urls) {
            // TODO Auto-generated method stub
            return readJSONFeed(urls[0]);
        }

        @Override
        protected void onPostExecute(String result)
        {
            try
            {   //Accessing the JSON Results
                JSONObject jsonObject = new JSONObject(result);

                JSONArray rows = jsonObject.getJSONArray("rows");
                Log.i("json", rows.toString());

                JSONObject obj = rows.getJSONObject(0);

                JSONArray elements = obj.getJSONArray("elements");

                JSONObject ini_dis = elements.getJSONObject(0);

                JSONObject distance = ini_dis.getJSONObject("distance");
                Log.i("json", distance.toString());

                //Distance to send
                actual_distance = distance.getString("text");

                //Calculation part
                String solve = distance.getString("value");
                int parseFare = Integer.parseInt(solve);
                fare = basePrice + ((parseFare/200)*priceMeter);
                roundedValue = (int)Math.round(fare);

                //another activity
                Intent i = new Intent(MainActivity.this,ResultsDisplay.class);
                i.putExtra("Display",actual_distance);
                i.putExtra("Display_b",textvalue);
                startActivity(i);

            }
            catch(Exception e)
            {
                Log.d("ReadDistanceJSONFeedTask", e.getLocalizedMessage());
            }
        }

            public String readJSONFeed(String URL){
            //Initial steps to getting the JSON Result
            StringBuilder stringBuilder = new StringBuilder();
            HttpClient httpClient = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(URL);
            try
            {
                HttpResponse response = httpClient.execute(httpGet);
                StatusLine statusLine = response.getStatusLine();
                int statusCode = statusLine.getStatusCode();
                //statusCodes at 200 are OK_Statuses
                if(statusCode==200)
                {
                    HttpEntity entity = response.getEntity();
                    InputStream inputStream = entity.getContent();
                    BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));
                    String line;
                    while((line=reader.readLine())!=null)
                    {
                        stringBuilder.append(line);

                    }
                    inputStream.close();
                }
                else
                {
                    Log.d("readJSONFeed","Failed to download file");
                }
            }
            catch(Exception e)
            {
                Log.d("readJSONFeed", e.getLocalizedMessage());
            }
                return stringBuilder.toString();
        }

} 
```

我正在创建一个应用程序，它接受用户输入的*位置*和*目的地*，并返回**路径之间的距离**以及**估计的出租车费用**。在这个程序中还有一个利用`Google-Places`API 的自动完成文本视图功能。这个应用程序使用`Direction-Matrix-API`我目前遇到的问题`AsyncTask`...... logcat 在“doInBackGround（）”方法中执行时产生错误......请帮助。

**LogCat 错误**

> 03-27 09:29:03.785: I/Choreographer(3468): 跳过 123 帧！应用程序可能在其主线程上做了太多工作。03-27 09:29:05.485: W/dalvikvm(3468): threadid=12: 线程退出未捕获异常 (group=0x40a71930) 03-27 09:29:05.525: E/AndroidRuntime(3468): 致命异常: AsyncTask ＃2 03-27 09：29：05.525：E / AndroidRuntime（3468）：java.lang.RuntimeException：执行doInBackground（）03-27 09：29：05.525时发生错误：E / AndroidRuntime（3468）：在android .os.AsyncTask$3.done(AsyncTask.java:299) 03-27 09:29:05.525: E/AndroidRuntime(3468): at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352) 03-27 09:29:05.525: E/AndroidRuntime(3468): 在 java.util.concurrent.FutureTask.setException(FutureTask.java:219) 03-27 09:29:05.525: E/AndroidRuntime(3468): 在 java.util . [http://maps.googleapis.com/maps/api/distancematrix/json?origins=Lagankhel](http://maps.googleapis.com/maps/api/distancematrix/json?origins=Lagankhel) Rd, Patan, Central Region, Nepal&destinations=Thamel, Kathmandu, Central Region, Nepal&sensor=false&units=metric&mode=driving 03-27 09:29:05.525: E/AndroidRuntime(3468): at java.net.URI.create(URI. java:727) 03-27 09:29:05.525: E/AndroidRuntime(3468): at org.apache.http.client.methods.HttpGet.(HttpGet.java:75) 03-27 09:29:05.525: E /AndroidRuntime(3468): 在 com.example.calculator_taxi_fare.MainActivity$ReadDistanceJSONFeedTask.readJSONFeed(MainActivity.java:159) 03-27 09:29:05.525: E/AndroidRuntime(3468): 在 com.example.calculator_taxi_fare.MainActivity$ ReadDistanceJSONFeedTask.doInBackground(MainActivity.java:111) 03-27 09:29:05.525: E/AndroidRuntime(3468): at com.example.calculator_taxi_fare.MainActivity$ReadDistanceJSONFeedTask.doInBackground(MainActivity.java:1) 03-27 09: 29:05.525:E/AndroidRuntime(3468): 在 android.os.AsyncTask$2.call(AsyncTask.java:287) 03-27 09:29:05.525: E/AndroidRuntime(3468): 在 java.util.concurrent.FutureTask.run( FutureTask.java:234) 03-27 09:29:05.525: E/AndroidRuntime(3468): ... 4 更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:07:41.050

在这里

```
@Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
        new ReadDistanceJSONFeedTask().execute("your url");
        ....
        startActivity(i); //<<<<<

} 
```

您正在执行`ReadDistanceJSONFeedTask`AsyncTask 后开始下一个 Activity。因为 AsyncTask 在单独的线程中执行并且控制到达下一行而不等待 AsyncTask 结果。

移动 Activity 开始部分 `onPostExecute`，在执行完成后在 UI 线程上`doInBackground` 执行：

```
@Override
        protected void onPostExecute(String result)
        {
           ///....your code here..
           // start next Activity here..
           Intent i = new Intent(MainActivity.this,ResultsDisplay.class);
           i.putExtra("Display",actual_distance);
           i.putExtra("Display_b",textvalue);
           startActivity(i);
        } 
```

**编辑：** 您还需要`URLEncoder.encode`在为 HttpGet 发送参数之前使用

```
String strparams="origins="+location.getText().toString()+"&
                       destinations="+destination.getText().toString()+
                       "&sensor=false&units=metric&mode=driving";
String encodedurl = URLEncoder.encode(strparams,"UTF-8");
new ReadDistanceJSONFeedTask().execute("http://maps.googleapis.com/maps
                                        /api/distancematrix/json?"+encodedurl); 
```

# php - 固定宽度 li 设计的固定流体边距

> ID：15698199
> 
> 赞同：1
> 
> 时间：2013-03-29T06:01:52.733
> 
> 标签：php, javascript, jquery

我有这个小提琴要解释：http: [//jsfiddle.net/DmgeF/1/](http://jsfiddle.net/DmgeF/1/)

前 20`<li>`秒正确证明，当 with 下降到 960px 时，有 4 个横向和 5 个向下。

但是，在第二个中，`<div>`您可以看到是否删除了一些`<li>`s 最后一行看起来是错误的。我知道它正在做代码所说的（证明），但是有没有办法让最后一行左对齐？

我从 PHP 循环中获取列表：

```
$count = $wp_query->found_posts; // TOTAL POSTS
$wp_query = new WP_Query($args);

if($wp_query->have_posts()) {
    while($wp_query->have_posts()) :
        $wp_query->the_post();
        global $post, $product;
        echo '<li>'. $DUMMY_CONTENT . '<li>';
    endwhile;
} 
```

s的`<li>`数量会在 0 到 200 之间波动，所以我已经尝试向它们添加类并弄清楚哪些会落在“gappy”区域（不理想但会起作用）。

我假设一些数学向导会弄清楚如何使用`$count`和我的不合逻辑的类添加来找出模式。

我希望通过 PHP 来实现，但 jQuery 也很酷。

# 编辑

我只是想，如果你可以添加 dummy `<li>`s。

```
if($count == '4') { echo '<li></li>'; }
if($count == '6') { echo '<li></li><li></li><li></li><li></li>'; } 
```

只会更有效率。

# c# - 识别内存泄漏

> ID：15698203
> 
> 赞同：2
> 
> 时间：2013-03-29T06:02:11.437
> 
> 标签：c#, .net, memory-leaks, ants

我想我的一个 C# 可执行文件（它是一个控制台应用程序）存在严重的内存泄漏。内存大小不断增加，超时我需要重新启动应用程序以降低内存使用量。我正在使用 FileSystemWatcher，然后当文件可用时将其转换为 utf-8 并转发它。然后向控制台写入此时正在处理该文件。所以它每次处理它时都会写入控制台。

我正在使用 Ants 内存分析器，并且在开始使用它时非常新鲜。我无法弄清楚它。当我拍摄内存快照时，它会显示：

namespace:System, Classname: byte[] --- 每次处理文件并将其显示在控制台上时都会增加（增加 40,000 字节），并且永远不会返回。

它是否正确。

**更新：**

```
class Class1
{
    private static FileSystemWatcher watcher = new FileSystemWatcher();

    public static void Main()
    {
        WatchFile();
        Console.ReadLine();
    }

    private static void WatchFile()
    {
        watcher.Path = @"N:\";
        watcher.NotifyFilter = NotifyFilters.LastWrite;
        watcher.Filter = "*.xml";
        watcher.Changed += new FileSystemEventHandler(convert);
        watcher.Error += new ErrorEventHandler(WatcherError);
        watcher.EnableRaisingEvents = true;

        Console.WriteLine("Press \'q\' to quit.");

        while (Console.Read() != 'q');
    }

    public static string CrL = "\r\n";

    private static object lockObject = new object();

    private static void convert(object source, FileSystemEventArgs f)
    {
       string FileName;
       FileName = f.FullPath;

       string destinationFile = @"F:\test.xml";

       Thread.Sleep(2000);
       if (!Monitor.TryEnter(lockObject))
       {
           return;
       }
       try
       {
           watcher.EnableRaisingEvents = false;
           Thread.Sleep(2000);

           var doc = new XmlDocument();
           doc.Load(FileName);

           XmlWriterSettings settings = new XmlWriterSettings { Encoding = Encoding.UTF8, Indent = true };

           using (var writer = XmlWriter.Create(destinationFile, settings))
           {
               doc.Save(writer);
           }

           Console.WriteLine("File Copied" + "  " + DateTime.Now.ToString("HH:mm:ss tt")); 
           Console.WriteLine("Press \'q\' to quit."); 
           Console.Write(CrL);
       }
       catch (Exception e)
       {
           Console.WriteLine("The process failed: {0}", e.ToString());
       }
       finally
       {
           Monitor.Exit(lockObject);
           watcher.EnableRaisingEvents = true;
           GC.Collect();
           GC.WaitForPendingFinalizers();
           GC.Collect();
       }
    }

    private class Utf8StringWriter : StringWriter
    {
        public override Encoding Encoding { get { return Encoding.UTF8; } }
    }

    private static void WatcherError(object source, ErrorEventArgs e)
    {
        Exception watchException = e.GetException();
        watcher = new FileSystemWatcher();
        while (!watcher.EnableRaisingEvents)
        {
            try
            {
                WatchFile();
                Console.WriteLine("I'm Back!!");
            }
            catch
            {
                Thread.Sleep(2000);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T06:42:23.373

试试这样：

```
var doc = new XmlDocument();
doc.Load(FileName);

XmlWriterSettings settings = new XmlWriterSettings { Encoding = Encoding.UTF8, Indent = true };

using (var writer = XmlWriter.Create(destinationFile, settings))
{
    doc.Save(writer);
}
doc = null; 
```

如果您不将 doc 设置为 null，GC 可能仍将其视为活动引用并且不会释放内存。GC 有自己的垃圾回收逻辑，强制进行完整的垃圾回收并不是最佳实践（[Best Practice for Forcing Garbage Collection in C#](https://stackoverflow.com/questions/233596/best-practice-for-forcing-garbage-collection-in-c-sharp)）。

另外我不相信你有内存泄漏；似乎没有触发 GC 来释放内存。当您说内存不断增加时，您的意思是什么？当你觉得你需要把它降下来时，它会达到什么水平？

**编辑**

有关读取 XML 文件的选项，请参阅此链接：[Decising on when to use XmlDocument vs XmlReader](https://stackoverflow.com/questions/1505075/deciding-on-when-to-use-xmldocument-vs-xmlreader)

在处理非常大的 XML 文件时，可能会在大对象堆 (LOH) 上分配 XMLDocuments，这可能会导致 LOH 中的碎片并导致 OutOfMemory 异常。

`XMLReader`那么这里可能更适合你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T07:01:07.950

类似的问题 - [使用线程时的内存泄漏](https://stackoverflow.com/questions/483295/memory-leak-while-using-threads)

根据我对解决方案的了解，写入控制台并使用 Thread.Sleep 是问题所在。

此外，可能适用（或不适用） - [http://support.microsoft.com/kb/2628838](http://support.microsoft.com/kb/2628838)

从此处下载修补程序（Framework 4.0 的可靠性更新 2）文件 - [http://support.microsoft.com/kb/2600217](http://support.microsoft.com/kb/2600217)

# google-apps-script - 将 Google Apps Profiles API 与 Apps 脚本结合使用

> ID：15698210
> 
> 赞同：1
> 
> 时间：2013-03-29T06:02:47.567
> 
> 标签：google-apps-script

我正在尝试使用 Google Apps Profiles Data API 来检索我域中 Google Apps 用户的个人资料信息。这是我迄今为止尝试过的代码，但它给出了错误`Request failed for returned code 403\. Server response: Version 1.0 is not supported. (line 7, file "Profile")`

```
function getAllProfiles() {
  var scope = 'https://www.google.com/m8/feeds/profiles';
  var fetchArgs = googleOAuth_('Profile', scope);
  fetchArgs.method = 'GET';
  var domain = UserManager.getDomain();
  var url = scope+'/domain/'+domain+'/full';
  var rawData = UrlFetchApp.fetch(url, fetchArgs).getContentText();
  Logger.log(rawData);
}

//google oAuth
function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey("anonymous");
  oAuthConfig.setConsumerSecret("anonymous");
  return {oAuthServiceName:name, oAuthUseToken:"always"};
} 
```

笔记：

*   我的帐户在 Google Apps 中具有超级管理员权限
*   我正在使用 Google Apps Enterprise Edition 尝试此代码

参考： [Google Apps Profile Data API](https://developers.google.com/google-apps/profiles/#Retrieving)

如果有人能指出我正确的方向，那就太好了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T09:55:01.050

这是修改后的代码，它需要带有请求 URL 的版本参数。现在代码工作正常。

```
function getAllProfiles() {
  var scope = 'https://www.google.com/m8/feeds/profiles';
  var fetchArgs = googleOAuth_('Profile', scope);
  fetchArgs.method = 'GET';
  var domain = UserManager.getDomain();
  var url = scope+'/domain/'+domain+'/full?v=3';
  var rawData = UrlFetchApp.fetch(url, fetchArgs).getContentText();
  Logger.log(rawData);
}

//google oAuth
function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey("anonymous");
  oAuthConfig.setConsumerSecret("anonymous");
  return {oAuthServiceName:name, oAuthUseToken:"always"};
} 
```

# compiler-errors - Less 中的语法错误没有意义

> ID：15698222
> 
> 赞同：3
> 
> 时间：2013-03-29T06:04:40.257
> 
> 标签：compiler-errors, less, syntax-error

我正在尝试使用lessc（由npm安装）将一个less文件编译为CSS。

```
SyntaxError: Operation on an invalid type in /home/..../static/less/app.less:null:-1
1 
```

请注意，第一行没有被切断。第二行中的 1 显然是在换行符之后，那么我如何得到一个 null:-1 呢？看起来这是一个继续文件的行引用。这是来自包含吗？（我有两个）如果是这样，第二行的 1 是什么意思？

我在 Ubuntu 上使用通过 NPM 安装的 lessc v1.3.3。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T22:29:34.673

了解更多信息会有所帮助。您使用的是哪个版本的 Less.js？如果您使用的是 1.4.0-beta ，请尝试使用`--strict-maths-off`或`--strict-units-off`，或两者兼而有之。还有其他第 3 部分编译器也可以简化一些事情。

# ssh - tmux 流控制

> ID：15698223
> 
> 赞同：4
> 
> 时间：2013-03-29T06:04:44.287
> 
> 标签：ssh, tmux, flow-control

我正在运行 Ubuntu 12.04 并在 ADSL 链路上使用 tmux 1.6 的机器（8Mbps/1Mbps 向下/向上）。

当有很多快速终端输出时，链接会饱和并且完全没有响应，我无法切换 tmux 窗口或任何东西，并且必须终止 ssh。

是否有一些 tmux 设置来防止这种情况？我看过一些补丁，但不清楚它们的作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T05:33:49.077

*tmux* 1.7 及更高版本包括一种速率限制。如果您正在处理的输出是正常的“滚动”输出（很多正常行，而不是（例如）巨大的 base64 编码块），这可能会有所帮助。

两个选项控制此速率限制：`c0-change-trigger`和`c0-change-interval`。基本上，如果*tmux*在 1 毫秒内看到超过`c0-change-trigger`某些 C0 控制字符（例如退格、换行、回车），那么它将推迟对窗格的进一步更新`c0-change-interval`几毫秒。默认值为 250 个这样的 C0 字符在 1 毫秒内将停止窗格绘制 100 毫秒。

# c# - ASP.NET Web 基础应用程序的性能低下

> ID：15698225
> 
> 赞同：0
> 
> 时间：2013-03-29T06:04:48.150
> 
> 标签：c#, asp.net, user-controls, telerik, web-user-controls

我们的团队正在开发一种医疗产品。我们将 Telerik Rad 控件用于用户界面。实际上，我的任务是找出特定模块缺乏速度和性能的原因。

该模块实际上包含用户控件链。主父级（用户控件），其中有 rad 选项卡。并且每个选项卡都有不同的控件，并且这些控件也可能包含也可能不包含更多的子控件。实际上在我的情况下，2 或 3 个选项卡有更多的子控件。

每当我运行父控件时，它都会导致应用程序速度变慢。第一次加载几乎需要 9 到 10 秒，这很荒谬，之后需要 3 到 4 秒。

问题是我们的应用程序中有相同的此类模块，但它们的选项卡较少，但它们在一秒钟内加载和运行，这是完美的。我们与数据库交互，我认为数据获取时间没有这样的问题。数据库交互很完美，查询很好，没有使用这种导致时间增加的查询。

我认为这是 Asp.net 用户控件的问题。是什么原因导致速度慢？我需要检查什么？请帮我解决这个问题。

![用户控制](../Images/ed09a1af6574466f82da9e592c711937.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T06:07:32.540

如果您大量使用客户端代码，最好对 JavaScript 代码进行一些分析。JQuery 选择器等。如果没有优化，JavaScript 和选择器会随着 DOM 变大而变慢。

# android - 在我的应用程序设置内容视图之前，当应用程序启动默认布局第一次闪烁时

> ID：15698226
> 
> 赞同：2
> 
> 时间：2013-03-29T06:04:49.100
> 
> 标签：android, layout

我正在制作一个具有这样架构的应用程序

有两个活动

a) 基本活动

b) 主要活动

BaseActivity 扩展了 Activity

和

mainActivity 扩展 BaseActivity

现在

```
public class MainActivity extends BaseActivity {
   onCreate(Bundle SavedInstance) {
      super.OnCreate(SavedInstance) 
      setContentView(R.Layout.screen_main)
   }
} 
```

和

```
public class BaseActivity extends Activity {
  onCreate(Bundle SavedInstance) {
      super.OnCreate(SavedInstance)

      //not doing anything else in on create 
  }
} 
```

现在，当我启动应用程序时，MainActivity 被调用，在应用程序将内容视图设置`R.Layout.screen_main` 为令人沮丧的 2 秒之前，它首先会闪烁一个带有标题的白屏，然后它会执行`setContentView(R.Layout.screen_main);`

我有一种感觉，当应用程序在超级中处理时，它将内容视图设置为来自 android 的默认布局。`OnCreate` 在大多数应用程序的情况下，它会显示一个没有任何应用程序标题栏的黑屏，但是在我的应用程序中，它首先显示白屏和标题栏的默认 android 布局，然后加载我的布局，所以我的问题是

为什么会这样，我应该怎么做，应用程序做的第一件事就是设置我的布局，这样当我们启动应用程序时，它会显示我的视图，并且不会首先显示带有标题的白屏，甚至是空白的黑屏换掉这个屏幕就可以了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T06:22:47.707

这是因为`super.onCreate()`调用，每当你的**MainActivity**执行

因为`super.onCreate()`

BaseActivity 的 onCreate 将被执行，因此将显示您的 BaseActivity 内容。每当它到达线

```
setContentView(layout) 
```

它将为您当前的活动设置新内容`i.e MainActivity`

每当您想要在所有活动中使用通用菜单时，建议使用它，因为您正在设置内容，但是您在 BaseActivity 中设置内容，这使其内容在`super.onCreate()`调用时显示在当前活动上。所以不要用 BaseActivity 扩展而是扩展 Activity

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T01:20:45.257

这可能是因为你在`MainActivity`某个地方调用`BaseActivity`它，它又被递归地调用了一遍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T06:08:21.447

尝试

```
public class MainActivity extends Activity 
```

和

```
public class BaseActivity extends Activity 
```

# php - 在php中突出显示给定字符串中的文本颜色

> ID：15698232
> 
> 赞同：0
> 
> 时间：2013-03-29T06:05:06.410
> 
> 标签：php

我的查询结果集中有一个字符串`p12200`。用户在搜索文本中的任何位置搜索`p-122-0`或`p122-0`嵌入破折号，但我想`p1220`在我们的前端突出显示文本。我在数据库中使用 replace 关键字，它返回正确的结果集，但我用颜色突出显示结果集。

我的颜色突出显示功能是：

```
function strreplace($searchstring, $result) {

 if(stripos($searchstring,'-')===false) return str_ireplace($searchstring, "<span class='highlightcolor'>".$searchstring."</span>", $result);
 else {

 if(stripos($result,'-')===false) return str_ireplace(str_ireplace('-','',$searchstring), "<span class='highlightcolor'>".str_ireplace('-','',$searchstring)."</span>", $result);
 elseif(stripos($result,'-')!==false)  return str_ireplace(str_ireplace('-','',$searchstring), "<span class='highlightcolor'>".$searchstring."</span>", $result);

 }

} 
```

如果我的代码有任何错误，请提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:15:40.913

```
function highlight(str, className) {

      jQuery( "#resultcontainer td" ).each(function() {

  var val = jQuery(this).text();//get the string value
  var match='';

  if(val.toLowerCase().indexOf(str.toLowerCase())!==-1)
    {   
      match = val.substr(val.toLowerCase().indexOf(str.toLowerCase()),str.length);

    }
    else if(val.replace(/\-/g,'').toLowerCase().indexOf(str.replace(/\-/g,'').toLowerCase())!==-1)
    { 
        match = getMatch (val,str.replace(/\-/g,''),'');
    }
    if(match!=''){
    var regex = new RegExp("("+match+")", "gi");
    var n = val.replace(regex,"<span class='"+className+"'>"+match+"</span>");     //replace the match with highlight color
    jQuery(this).html(n);
    }

 }); 
```

}

```
function getMatch(string,searchString,match)
 {

var i = searchString.length;
var m = string.length;
var j = 0;
    var stringarray = string.split("");
var searcharray = searchString.split("");

 for(var k=0;k<i;k++){

    if(j>=m) break;

     for(;j<m;j++){

        if(k>=i) return match;

     if(searcharray[k] == stringarray[j]) {
        if(match=='-' || match=='') {var l = j;} // sotre the first match index value
        match = match+stringarray[j];
        k++;

      }
      else if(stringarray[j]=='-'){
      match = match+stringarray[j];
      }
      else {
       if(match!='' && match!=='-') 
           j = l;
       match = '';
       k = 0;
      }

     }

 }

  return match;

}

  jQuery(document).ready(function() {
        highlight("p-1-22-0", "highlightcolor");
   }); 
```

# android - XmlPullParser 从文件系统获取文件

> ID：15698237
> 
> 赞同：3
> 
> 时间：2013-03-29T06:05:30.483
> 
> 标签：android, xml-parsing, intellij-idea, xmlpullparser

我在 Android 文件系统中的应用程序创建者 xml 文件。我想用 XmlPullParser 解析这个文件，但是编译时出错：“变量解析器可能没有被初始化”。我的代码：

```
InputStream inputStream = openFileInput("settings.xml");
XmlPullParser parser;
parser.setInput(inputStream, null); 
```

不知道怎么修。我使用 Intellij IDEA12 和 Android 2.3 SDK。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T06:20:24.187

> 我使用 Eclipse，下面的代码对我有用：

您可能缺少以下第一行：

```
 XmlPullParserFactory xppf = XmlPullParserFactory.newInstance();
 xppf.setNamespaceAware(true); 
 XmlPullParser xpp = xppf.newPullParser();

 File myXML = new File("myXML.xml"); // give proper path            
 FileInputStream fis = new FileInputStream(myXML);

 xpp.setInput(fis, null); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T06:11:17.590

它在 eclipes 中的工作代码，但不了解 Intellij IDEA12

编写此代码以从资产中打开并获取 xml 或根据您的需要进行修改

```
try {           

    XmlPullParserFactory     xppf = XmlPullParserFactory.newInstance();
    XmlPullParser  = xppf.newPullParser();                  
    AssetManager manager = context.getResources().getAssets();
    InputStream input = manager.open("createDb.xml");
    xpp.setInput(input, null);
    int type = xpp.getEventType();
    while(type != XmlPullParser.END_DOCUMENT) {
        if(type == XmlPullParser.START_DOCUMENT) {

            Log.d(Tag, "In start document");
        }
        else if(type == XmlPullParser.START_TAG) {
            Log.d(Tag, "In start tag = "+xpp.getName());
        }
        else if(type == XmlPullParser.END_TAG) {
            Log.d(Tag, "In end tag = "+xpp.getName());

        }
        else if(type == XmlPullParser.TEXT) {
            Log.d(Tag, "Have text = "+xpp.getText());
            if(xpp.isWhitespace())
            {

            }
            else
            {
                String strquery = xpp.getText();
                db.execSQL(strquery);
            }

        }
        type = xpp.next();
    }
} 
catch (XmlPullParserException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T06:52:50.260

您没有实例化 XmlPullParser 的实例。尝试：

```
XmlPullParser parser = Xml.newPullParser(); 
```

此外，您需要致电：

```
parser.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES, false); 
```

从文档：

> 使用此调用来更改解析器的一般行为，例如命名空间处理 > 或 doctype 声明处理。**此方法必须在第一次调用 >next 或 nextToken 之前调用。否则，抛出异常。**
> 
> 示例：调用 setFeature(FEATURE_PROCESS_NAMESPACES, true) 以打开命名空间>处理。初始设置对应于从 XML Pull >Parser factory 请求的属性。如果未请求任何功能，则默认禁用所有功能。

# java - java - 无效的方法声明；需要返回类型

> ID：15698239
> 
> 赞同：6
> 
> 时间：2013-03-29T06:05:39.870
> 
> 标签：java, oop

在 Java OOP 项目中，我的构造函数出现三个错误：

> .\Voter.java:14：错误：方法声明无效；需要返回类型
> 
> .\Candidates.java:7：错误：方法声明无效；需要返回类型
> 
> .\Candidates.java:14：错误：方法声明无效；需要返回类型

构造函数代码：

```
public class Voter{
    private String name;
    private int votNum;
    private int precint;

    public Voter(String name, int votNum, int precint)
    {
        this.name = name;
        this.votNum = votNum;
        this.precint = precint;
    }

    public setDetails(String name, int votNum, int precint)
    {
        this.name = name;
        this.votNum = votNum;
        this.precint = precint;
    }...}

public class Candidates
{
    public String candName;
    private int position;
    private int totalVotes;

    public Candidate (String candName, int position, int totalVotes)
    {
        this.candName = candName;
        this.position = position;
        this.totalVotes = totalVotes;
    }

    public setDetails (String candName, int position, int totalVotes)
    {
        this.candName = candName;
        this.position = position;
        this.totalVotes = totalVotes;
    }...} 
```

我这样声明我的构造函数：

```
public class MainClass{
    public static void main(String[] args){
        System.out.println("Previous voter's info: ");
        Voter vot1 = new Voter("voter name", 131, 1);
        System.out.println("The Candidates: ");
        Candidates cand1 = new Candidates("candidate name", 1, 93);
    }
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T06:06:34.137

在您的方法`setDetails`中，您没有为返回类型指定任何内容，如果它没有返回任何内容，则指定`void`

上课`Voter`用

```
public void setDetails(String name, int votNum, int precint) 
```

`Candidates`上课_

```
public void setDetails (String candName, int position, int totalVotes) 
```

另一件事，*（感谢 [Frank Pavageau](https://stackoverflow.com/users/1350869/frank-pavageau)）*您的类名是`Candidates`并且您已经定义了构造函数`Candidate`without `s`，这就是为什么它被视为普通方法，因此应该具有返回类型。您将构造函数重命名为`Candidates`，或将您的类重命名为`Candidate`哪个更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:06:58.893

您的`Voter.setDetails`函数没有返回类型。如果您不希望它返回，请将返回类型指定为`void`

```
public void setDetails(String name, int votNum, int precint)
{
    this.name = name;
    this.votNum = votNum;
    this.precint = precint;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T06:07:44.283

为你的选民类中的所有方法添加一个返回类型。

目前在您的代码中，您只显示了一种`showDetails()`没有返回类型的方法。当然，还有其他方法您还没有声明返回类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T06:08:15.473

`invalid method declaration; return type required`

错误信息说得很清楚；您需要给出每种方法的返回类型。如果没有返回类型，就给 void。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T06:10:49.890

方法应该有返回类型，它说明返回值的类型（如果从方法返回任何内容）。

如果没有返回任何内容，请指定 void。

这正是您的**setDetails**方法中缺少的内容。

# jsp - 表达式语言通过键访问映射值

> ID：15698240
> 
> 赞同：0
> 
> 时间：2013-03-29T06:05:43.233
> 
> 标签：jsp, jstl, jsp-tags

我正在使用标记在 JSP 中迭代一个名为`listEvents`（类型）的列表。在 for 循环中，我需要显示来自 a 的值。hashmap 的键将是列表中的元素。请在下面的代码片段中找到。`List<String>``<c:forEach>``HashMap<String,String>`

```
<c:forEach items="${listEvents}" var="listEvent" varStatus="eventCount">
     <c:out value="${eventMap[listEvent]}</
</c:forEach> 
```

当我尝试使用上面的代码时，我得到了

> PropertyNotFoundException [在 java.lang.String 上找不到“Key”属性]。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:40:07.633

这是正确的方法：

```
 <c:forEach var="listEvent" items="${eventMap}" varStatus="eventCount">
                ${listEvent.value}
         </c:forEach> 
```

要访问密钥，请添加以下行：

```
 ${listEvent.key} 
```

# jquery - 用jquery交换图像src

> ID：15698241
> 
> 赞同：7
> 
> 时间：2013-03-29T06:05:50.843
> 
> 标签：jquery, image, swap, attr, src

我有一个大图像和一个小拇指，我正在尝试相互交换他们的 src。在这里，我在bottleWrapper img 中更改 thumb img，但我想交换他们的 src。请帮忙！

HTML

```
<div class="bottlesWrapper">
  <img src="bottle1.png" />
</div>

<div class="thumbs">
   <img src="bottle2.png" />
</div> 
```

脚本

```
<script>
$('.thumbs a').each(function() {
    $(this).click(function() {
       var aimg = $(this).find("img")

      $('.bottlesWrapper img').fadeOut('fast',function(){
         $(this).attr('src', $(aimg).attr('src')).fadeIn('fast');
      });

    });
});
</script> 
```

**编辑**

谢谢大家:)

我实际上忘记给出一个我有各种拇指的信息，这个答案最适合！感谢大家的宝贵意见！

```
$('.thumbs img').click(function() {
    var thmb = this;
    var src = this.src;
    $('.bottlesWrapper img').fadeOut(400,function(){
        thmb.src = this.src;
        $(this).fadeIn(400)[0].src = src;
    });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T06:10:52.373

要**交换**图像，请执行以下操作：

`**[LIVE DEMO](http://jsbin.com/asixuj/4/edit)**`

```
$('.thumbs img').click(function() {
    var thmb = this;
    var src = this.src;
    $('.bottlesWrapper img').fadeOut(400,function(){
        thmb.src = this.src;
        $(this).fadeIn(400)[0].src = src;
    });
}); 
```

如果您有多个“画廊”，请喜欢：http: [//jsbin.com/asixuj/5/edit](http://jsbin.com/asixuj/5/edit)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T06:10:56.653

你的问题中没有`<a>`标签..所以假设它`img`..点击拇指img ..`bottlesWrapper`将被交换..

试试这个

**更新**

```
 $('.thumbs img').click(function() {
   var img=$(this).attr('src');

  $('.bottlesWrapper img').fadeOut('fast',function(){
     $(this).attr('src', img).fadeIn('fast');
  });

  $(this).fadeOut('fast',function(){
     var bottlersImg=$('.bottlesWrapper img').attr('src');
     $(this).attr('src', bottlersImg).fadeIn('fast');
  });

}); 
```

**注意**：并且您不需要`each`循环... jquery 通过使用类选择器来解决这个问题..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T06:10:08.653

尝试：

```
$('.thumbs img').click(function() {
    var img_src = img.attr('src');

    $(this).fadeOut('fast',function(){
      $(this).attr('src', $('.bottlesWrapper img').attr('src')).fadeIn('fast');
    });

    $('.bottlesWrapper img').fadeOut('fast',function(){
       $(this).attr('src', img_src ).fadeIn('fast');
    });
}); 
```

您应该将点击事件附加到类`img`内的标签`thumbs`，然后更改图像源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T06:16:14.593

由于您的`<a>`代码中没有标签，因此根本无法使用`.thumb`，请尝试单击其`.thumb`本身：

```
$('.thumbs').click(function() {
    var thumbsimgSrc = $(this).find("img").attr('src');
    var bottleImgSrc = $('.bottlesWrapper img').attr('src');

    $(this).find("img").attr('src', bottleImgSrc);

    $('.bottlesWrapper img').fadeOut('fast').promise().done(function(){
       $(this).attr('src', thumbsimgSrc).fadeIn('fast');
    });
  });
}); 
```

is 本身就是一个集合，`.thumb`因此您不需要遍历`.each()`方法。

# jsp - jsp表中行的动态创建

> ID：15698243
> 
> 赞同：0
> 
> 时间：2013-03-29T06:06:05.720
> 
> 标签：jsp

我是 jsp 的新手。在 jsp 页面中，我正在显示包含 6 列的表，其中 2 列是选定的值。值将来自 Spring MVC 控制器。基于选择价格，折扣将通过 AJAX 调用来。我的要求是提供**购买更多**链接，如果他单击该链接，一行应该有 6 列，并执行相同的过程选择值和价格计算。**删除行**按钮应该删除选定的行。

请帮助我。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:12:38.347

您可以使用 Javascript/Jquery 执行相同的操作，示例代码如下 -

```
function addRow()
            {
                var n=$("#elementCount").val();
                var i=$('#rowid'+(n-1));
                i.clone(true).attr('id','rowid'+(n)).insertAfter(i);
                var p="#txtname"+(n-1);
                var no="txtname"+(n);
                $('#rowid'+(n)).find('.c').attr('id',no);
                $('#rowid'+(n)).find('.c').attr('name',no);
                $('#rowid'+(n)).find('.c').attr('value','');

                $('#rowid'+(n)).find('.b').attr('id',"txtprc"+(n));
                $('#rowid'+(n)).find('.b').attr('name',"txtprc"+(n));
                $('#rowid'+(n)).find('.b').attr('value','');

                n++;

                $("#elementCount").val(n);
            } 
```

其中 elementcount 是隐藏字段的 id，其中包含 value=行数。带有 i 的函数克隆该行并将其插入到当前行之后。每一行的 id 都会以递增的方式增加，即 rowid1、rowid2 等等....

# cookies - __utma cookie id 的范围

> ID：15698250
> 
> 赞同：1
> 
> 时间：2013-03-29T06:06:38.093
> 
> 标签：cookies, google-analytics, google-analytics-api

我正在使用 __utma cookie 信息进行一些处理。__utma cookie 中随机 id 的整数范围是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:06:36.053

`Google Analytics`使用代码生成随机 id

```
 Math.round(Math.random()*2147483647); 
```

所以`cid(clientId)`_utma cookie 中的 2147483647 小于 2147483647 。

# python - 多处理 GUI 模式以对抗“无响应”阻塞

> ID：15698251
> 
> 赞同：15
> 
> 时间：2013-03-29T06:06:38.390
> 
> 标签：python, multithreading, qt, user-interface, multiprocessing

创建多处理/ GUI 编码系统的最佳方法是什么？

我想为互联网社区创建一个地方来寻找有关如何`multiprocessing`在 python 中使用该模块的示例。

我`multiprocessing`在互联网上看到了几个在主模块中调用的简单全局函数的过程的小例子，但我发现这很少能轻易地转化为任何人实际对 GUI 所做的任何事情。我认为许多程序将具有他们想要在单独进程中使用的功能作为对象的方法（可能是其他对象的聚合等），并且可能单个 GUI 元素将具有需要调用它的关联对象过程等

例如，我有一个相对复杂的程序，我在为其获取响应式 GUI 时遇到问题，我认为这是由于我`multiprocessing`对`QThread`. 但是，我知道下面给出的示例至少会以我想要的方式在进程之间传递信息（由于能够执行`print`语句），但我的 GUI 仍然处于锁定状态。有谁知道可能是什么原因造成的，如果我对多线程/多处理架构缺乏了解，这仍然是一个问题？

这是我正在做的一个小的伪代码示例：

```
class Worker:
    ...
    def processing(self, queue):
        # put stuff into queue in a loop

# This thread gets data from Worker
class Worker_thread(QThread):
    def __init__(self):
        ...
        # make process with Worker inside
    def start_processing(self):
        # continuously get data from Worker
        # send data to Tab object with signals/slots

class Tab(QTabWidget):
    # spawn a thread separate from main GUI thread

    # update GUI using slot
    def update_GUI() 
```

这段代码是完全可编译的例子，它体现了我的程序的覆盖结构：

```
from PyQt4 import QtCore, QtGui
import multiprocessing as mp
import numpy as np
import sys
import time

# This object can hold several properties which will be used for the processing
# and will be run in the background, while it updates a thread with all of it's progress
class Worker:
    def __init__(self, some_var):
        self.some_var = some_var
        self.iteration = 0

    def some_complex_processing(self, queue):
        for i in range(0,5000):
            self.iteration += 1
            queue.put(self.iteration)
        queue.put('done with processing')

# This Woker_thread is a thread which will spawn a separate process (Worker).
# This separate is needed in order to separate the data retrieval
# from the main GUI thread, which should only quickly update when needed 
class Worker_thread(QtCore.QThread):
    # signals and slots are used to communicate back to the main GUI thread
    update_signal = QtCore.pyqtSignal(int)
    done_signal = QtCore.pyqtSignal()

    def __init__(self, parent, worker):
        QtCore.QThread.__init__(self, parent)
        self.queue = mp.Queue()
        self.worker = worker
        self.parent = parent
        self.process = mp.Process(target=self.worker.some_complex_processing, args=(self.queue,))

    # When the process button is pressed, this function will start getting data from Worker
    # this data is then retrieved by the queue and pushed through a signal
    # to Tab.update_GUI
    @QtCore.pyqtSlot()
    def start_computation(self):
        self.process.start()
        while(True):
            try:
                message = self.queue.get()
                self.update_signal.emit(message)
            except EOFError:
                pass
            if message == 'done with processing':
                self.done_signal.emit()
                break
            #self.parent.update_GUI(message)
        self.process.join()
        return

# Each tab will start it's own thread, which will spawn a process
class Tab(QtGui.QTabWidget):
    start_comp = QtCore.pyqtSignal()
    def __init__(self, parent, this_worker):
        self.parent = parent
        self.this_worker = this_worker
        QtGui.QTabWidget.__init__(self, parent)

        self.treeWidget = QtGui.QTreeWidget(self)
        self.properties = QtGui.QTreeWidgetItem(self.treeWidget, ["Properties"])
        self.step = QtGui.QTreeWidgetItem(self.properties, ["Iteration #"])

        self.thread = Worker_thread(parent=self, worker=self.this_worker)
        self.thread.update_signal.connect(self.update_GUI)
        self.thread.done_signal.connect(self.thread.quit)
        self.start_comp.connect(self.thread.start_computation)
        self.thread.start()

    ###############################
    # Here is what should update the GUI at every iteration of Worker.some_complex_processing()
    # The message appears to be getting sent, due to seeing the print statement in the console, but the GUI is not updated.
    @QtCore.pyqtSlot(int)
    def update_GUI(self, iteration):
        self.step.setText(0, str(iteration))
        #time.sleep(0.1)
        print iteration

    def start_signal_emit(self):
        self.start_comp.emit()

# GUI stuff
class MainWindow(QtGui.QMainWindow):
    def __init__(self, parent = None):
        QtGui.QMainWindow.__init__(self)
        self.tab_list = []
        self.setTabShape(QtGui.QTabWidget.Rounded)
        self.centralwidget = QtGui.QWidget(self)
        self.top_level_layout = QtGui.QGridLayout(self.centralwidget)

        self.tabWidget = QtGui.QTabWidget(self.centralwidget)
        self.top_level_layout.addWidget(self.tabWidget, 1, 0, 25, 25)

        process_button = QtGui.QPushButton("Process")
        self.top_level_layout.addWidget(process_button, 0, 1)
        QtCore.QObject.connect(process_button, QtCore.SIGNAL("clicked()"), self.process)

        self.setCentralWidget(self.centralwidget)
        self.centralwidget.setLayout(self.top_level_layout)

        # Make Tabs in loop from button
        for i in range(0,10):
            name = 'tab' + str(i)
            self.tab_list.append(Tab(self.tabWidget, Worker(name)))
            self.tabWidget.addTab(self.tab_list[-1], name)

    # Do the processing
    def process(self):
        for tab in self.tab_list:
            tab.start_signal_emit()
        return

if __name__ == "__main__":
    app = QtGui.QApplication([])
    win = MainWindow()
    win.show()
    sys.exit(app.exec_()) 
```

***更多信息：*** 我正在编写一个程序，我想从中产生几个进程，并让它们在整个处理过程中不断显示它们的进度。我希望程序是多处理的，以便尽可能地从程序中获得最佳速度。

目前，我正在尝试使用线程来生成进程并使用信号和插槽来更新 GUI，同时队列不断检索数据。使用语句时似乎`queues`、`signals`和工作，但无法更新 GUI。如果有人对我应该如何构建它以使程序更易于管理有任何其他建议，我想学习。`slots``print`

***编辑***：我已经做出了 Min Lin 提出的调整，另外还做`Worker`了一个`QObject`这样`moveToThread()`。
这是我目前拥有的新代码：

```
from PyQt4 import QtCore, QtGui
import multiprocessing as mp
import numpy as np
import sys
import time

class Worker(QtCore.QObject):
    update_signal = QtCore.pyqtSignal(int)
    done_signal = QtCore.pyqtSignal()

    def __init__(self, some_var):
        QtCore.QObject.__init__(self, parent=None)
        self.some_var = some_var
        self.iteration = 0
        self.queue = mp.Queue()
        self.process = mp.Process(target=self.some_complex_processing, args=(self.queue,))

    def some_complex_processing(self, queue):
        for i in range(0,5000):
            self.iteration += 1
            queue.put(self.iteration)
        queue.put('done with processing')

    @QtCore.pyqtSlot()
    def start_computation(self):
        self.process.start()
        while(True):
            try:
                message = self.queue.get()
                self.update_signal.emit(message)
            except EOFError:
                pass
            if message == 'done with processing':
                self.done_signal.emit()
                break
        self.process.join()
        return

class Tab(QtGui.QTabWidget):
    start_comp = QtCore.pyqtSignal()
    def __init__(self, parent, this_worker):
        self.parent = parent
        self.this_worker = this_worker
        QtGui.QTabWidget.__init__(self, parent)

        self.treeWidget = QtGui.QTreeWidget(self)
        self.properties = QtGui.QTreeWidgetItem(self.treeWidget, ["Properties"])
        self.step = QtGui.QTreeWidgetItem(self.properties, ["Iteration #"])

        # Use QThread is enough
        self.thread = QtCore.QThread();
        # Change the thread affinity of worker to self.thread.
        self.this_worker.moveToThread(self.thread);
        self.this_worker.update_signal.connect(self.update_GUI)
        self.this_worker.done_signal.connect(self.thread.quit)
        self.start_comp.connect(self.this_worker.start_computation)
        self.thread.start()

    ###############################
    # Here is what should update the GUI at every iteration of Worker.some_complex_processing()
    # The message appears to be getting sent, due to seeing the print statement in the console, but the GUI is not updated.
    @QtCore.pyqtSlot(int)
    def update_GUI(self, iteration):
        self.step.setText(0, str(iteration))
        #time.sleep(0.1)
        print iteration

    def start_signal_emit(self):
        self.start_comp.emit()

# GUI stuff
class MainWindow(QtGui.QMainWindow):
    def __init__(self, parent = None):
        QtGui.QMainWindow.__init__(self)
        self.tab_list = []
        self.setTabShape(QtGui.QTabWidget.Rounded)
        self.centralwidget = QtGui.QWidget(self)
        self.top_level_layout = QtGui.QGridLayout(self.centralwidget)

        self.tabWidget = QtGui.QTabWidget(self.centralwidget)
        self.top_level_layout.addWidget(self.tabWidget, 1, 0, 25, 25)

        process_button = QtGui.QPushButton("Process")
        self.top_level_layout.addWidget(process_button, 0, 1)
        QtCore.QObject.connect(process_button, QtCore.SIGNAL("clicked()"), self.process)

        self.setCentralWidget(self.centralwidget)
        self.centralwidget.setLayout(self.top_level_layout)

        # Make Tabs in loop from button
        for i in range(0,10):
            name = 'tab' + str(i)
            self.tab_list.append(Tab(self.tabWidget, Worker(name)))
            self.tabWidget.addTab(self.tab_list[-1], name)

    # Do the processing
    def process(self):
        for tab in self.tab_list:
            tab.start_signal_emit()
        return

if __name__ == "__main__":
    app = QtGui.QApplication([])
    win = MainWindow()
    win.show()
    sys.exit(app.exec_()) 
```

感谢您提供所有答案，我很欣赏每个人在描述他们认为是解决方案的想法时所采用的详细程度，但不幸的是，我还没有能够执行对他们所属的对象进行操作的这些类型的过程在 GUI 上显示对象的属性时。
但是，我从这篇文章中学到了很多东西，这让我意识到我目前拥有的线程版本正在挂起 GUI，因为 GUI 更新功能太大并且需要太多处理。

所以，我采用了`QTimer()`多线程版本的方法，它的性能要好得多！我会建议任何面临类似问题的人至少尝试类似的事情。

我不知道这种解决 GUI 更新问题的方法，现在它是对我所面临问题的伪或临时修复。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T09:03:34.890

GUI 应用程序非常适合测试东西，因为它很容易产生新任务并可视化正在发生的事情，所以我写了一个小示例应用程序（[屏幕截图](https://i.stack.imgur.com/TraFQ.png)，代码如下），因为我确实想自己学习它。

起初，我采取了与您类似的方法，尝试实现消费者/生产者模式，我在后台进程中苦苦挣扎，执行无限循环以等待新工作，并为自己负责来回通信。然后我发现了[池](http://docs.python.org/3.2/library/multiprocessing.html#module-multiprocessing.pool)接口，然后我可以用几行代码替换所有可怕的代码。您只需要一个池和一些回调：

```
#!/usr/bin/env python3
import multiprocessing, time, random, sys
from PySide.QtCore import * # equivalent: from PyQt4.QtCore import *
from PySide.QtGui import *   # equivalent: from PyQt4.QtGui import *

def compute(num):
    print("worker() started at %d" % num)
    random_number = random.randint(1, 6)
    if random_number in (2, 4, 6):
        raise Exception('Random Exception in _%d' % num)
    time.sleep(random_number)
    return num

class MainWindow(QMainWindow):
    def __init__(self):
        QMainWindow.__init__(self)
        self.toolBar = self.addToolBar("Toolbar")
        self.toolBar.addAction(QAction('Add Task', self, triggered=self.addTask))
        self.list = QListWidget()
        self.setCentralWidget(self.list)

        # Pool of Background Processes
        self.pool = multiprocessing.Pool(processes=4)

    def addTask(self):
        num_row = self.list.count()
        self.pool.apply_async(func=compute, args=(num_row,), callback=self.receiveResult,
                              error_callback=self.receiveException)
        item = QListWidgetItem("item %d" % num_row)
        item.setForeground(Qt.gray)
        self.list.addItem(item)

    def receiveResult(self, result):
        assert isinstance(result, int)
        print("end_work(), where result is %s" % result)
        self.list.item(result).setForeground(Qt.darkGreen)

    def receiveException(self, exception):
        error = str(exception)
        _pos = error.find('_') + 1
        num_row = int(error[_pos:])
        item = self.list.item(num_row)
        item.setForeground(Qt.darkRed)
        item.setText(item.text() + ' Retry...')
        self.pool.apply_async(func=compute, args=(num_row,), callback=self.receiveResult,
                              error_callback=self.receiveException)

if __name__ == '__main__':
    app = QApplication(sys.argv)
    main_window = MainWindow()
    main_window.show()
    sys.exit(app.exec_()) 
```

编辑：我使用 QTimer 而不是回调做了另一个示例，定期检查队列中的条目，更新 QProgressBar：

```
#!/usr/bin/env python3
import multiprocessing, multiprocessing.pool, time, random, sys
from PySide.QtCore import *
from PySide.QtGui import *

def compute(num_row):
    print("worker started at %d" % num_row)
    random_number = random.randint(1, 10)
    for second in range(random_number):
        progress = float(second) / float(random_number) * 100
        compute.queue.put((num_row, progress,))
        time.sleep(1)
    compute.queue.put((num_row, 100))

def pool_init(queue):
    # see http://stackoverflow.com/a/3843313/852994
    compute.queue = queue

class MainWindow(QMainWindow):
    def __init__(self):
        QMainWindow.__init__(self)
        self.toolBar = self.addToolBar("Toolbar")
        self.toolBar.addAction(QAction('Add Task', self, triggered=self.addTask))
        self.table = QTableWidget()
        self.table.verticalHeader().hide()
        self.table.setColumnCount(2)
        self.setCentralWidget(self.table)

        # Pool of Background Processes
        self.queue = multiprocessing.Queue()
        self.pool = multiprocessing.Pool(processes=4, initializer=pool_init, initargs=(self.queue,))

        # Check for progress periodically
        self.timer = QTimer()
        self.timer.timeout.connect(self.updateProgress)
        self.timer.start(2000)

    def addTask(self):
        num_row = self.table.rowCount()
        self.pool.apply_async(func=compute, args=(num_row,))
        label = QLabel("Queued")
        bar = QProgressBar()
        bar.setValue(0)
        self.table.setRowCount(num_row + 1)
        self.table.setCellWidget(num_row, 0, label)
        self.table.setCellWidget(num_row, 1, bar)

    def updateProgress(self):
        if self.queue.empty(): return
        num_row, progress = self.queue.get() # unpack
        print("received progress of %s at %s" % (progress, num_row))
        label = self.table.cellWidget(num_row, 0)
        bar = self.table.cellWidget(num_row, 1)
        bar.setValue(progress)
        if progress == 100:
            label.setText('Finished')
        elif label.text() == 'Queued':
            label.setText('Downloading')
        self.updateProgress() # recursion

if __name__ == '__main__':
    app = QApplication(sys.argv)
    main_window = MainWindow()
    main_window.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-10T12:44:50.200

非常感谢您发布这个问题，以及所有贡献者的意见。它为我试验 PyQt 和多处理提供了一个有用的脚手架。

我从问题中列出的第二个代码示例开始。我的更改和评论：

*   在 Windows 上，*所有*参数都`Process.__init__()`必须是可腌制的。您将看到 @valmynd 将他/她的`compute`函数设为顶级函数，正是出于这个原因。这部分是因为多处理将重新导入包含目标函数的模块。为了提醒自己这一点，我尝试将目标函数放入它自己的模块中（并确保任何信息都作为可腌制参数传递）。我已将复杂的处理功能移至其自己的名为`workermodule.py`.
*   如果在复杂的处理功能中没有足够的工作，则循环完成得太快，以至于无法在 GUI 中看到任何更改。因此，我在复杂的处理函数中添加了一些额外的（无用的）工作。如评论中所述，您可以`time.sleep`，但稍微点亮所有内核会更令人满意。
*   通过以下两个代码片段，我得到了一个平滑的 GUI，迭代值不断更新，子流程全速运行。
*   请注意，`self.process`可以使用*两个*队列作为参数创建，一个用于输入，一个用于输出。然后复杂的处理功能将不得不定期检查输入队列的数据。

工人模块.py：

```
import time

def some_complex_processing(queue):
    iteration = 0
    for i in range(0,5000):
        iteration += 1
        queue.put(iteration)
        #time.sleep(20e-3) # ms
        # You could time.sleep here to simulate a
        # long-running process, but just to prove
        # that we're not cheating, let's make this
        # process work hard, while the GUI process
        # should still have smooth drawing.
        for x in range(100000):
            y = x
    queue.put('done with processing') 
```

主文件.py：

```
from PyQt4 import QtCore, QtGui
import multiprocessing as mp
import sys
import workermodule

class Worker(QtCore.QObject):
    update_signal = QtCore.pyqtSignal(int)
    done_signal = QtCore.pyqtSignal()

    def __init__(self, some_var):
        QtCore.QObject.__init__(self, parent=None)
        self.some_var = some_var
        self.queue = mp.Queue()
        self.process = mp.Process(
            target=workermodule.some_complex_processing,
            args=(self.queue,)
            )

    @QtCore.pyqtSlot()
    def start_computation(self):
        self.process.start()
        while True:
            try:
                message = self.queue.get()
                self.update_signal.emit(message)
            except EOFError:
                pass
            if message == 'done with processing':
                self.done_signal.emit()
                break
        self.process.join()
        return

class Tab(QtGui.QTabWidget):
    start_comp = QtCore.pyqtSignal()
    def __init__(self, parent, this_worker):
        self.parent = parent
        self.this_worker = this_worker
        QtGui.QTabWidget.__init__(self, parent)

        self.treeWidget = QtGui.QTreeWidget(self)
        self.properties = QtGui.QTreeWidgetItem(self.treeWidget, ["Properties"])
        self.step = QtGui.QTreeWidgetItem(self.properties, ["Iteration #"])

        # Use QThread is enough
        self.thread = QtCore.QThread();
        # Change the thread affinity of worker to self.thread.
        self.this_worker.moveToThread(self.thread);
        self.this_worker.update_signal.connect(self.update_GUI)
        self.this_worker.done_signal.connect(self.thread.quit)
        self.start_comp.connect(self.this_worker.start_computation)
        self.thread.start()

    ###############################
    # Here is what should update the GUI at every iteration of Worker.some_complex_processing()
    # The message appears to be getting sent, due to seeing the print statement in the console, but the GUI is not updated.
    @QtCore.pyqtSlot(int)
    def update_GUI(self, iteration):
        self.step.setText(0, str(iteration))
        print iteration

    def start_signal_emit(self):
        self.start_comp.emit()

# GUI stuff
class MainWindow(QtGui.QMainWindow):
    def __init__(self, parent = None):
        QtGui.QMainWindow.__init__(self)
        self.tab_list = []
        self.setTabShape(QtGui.QTabWidget.Rounded)
        self.centralwidget = QtGui.QWidget(self)
        self.top_level_layout = QtGui.QGridLayout(self.centralwidget)

        self.tabWidget = QtGui.QTabWidget(self.centralwidget)
        self.top_level_layout.addWidget(self.tabWidget, 1, 0, 25, 25)

        process_button = QtGui.QPushButton("Process")
        self.top_level_layout.addWidget(process_button, 0, 1)
        QtCore.QObject.connect(process_button, QtCore.SIGNAL("clicked()"), self.process)

        self.setCentralWidget(self.centralwidget)
        self.centralwidget.setLayout(self.top_level_layout)

        # Make Tabs in loop from button
        for i in range(0,10):
            name = 'tab' + str(i)
            self.tab_list.append(Tab(self.tabWidget, Worker(name)))
            self.tabWidget.addTab(self.tab_list[-1], name)

    # Do the processing
    def process(self):
        for tab in self.tab_list:
            tab.start_signal_emit()
        return

if __name__ == "__main__":
    app = QtGui.QApplication([])
    win = MainWindow()
    win.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-06T02:56:38.903

你在 Worker_Thread 中所做的一切都应该已经移到了 Worker 中。Qt 根据创建对象的位置为每个对象分配线程亲和性。Worker_Thread 对象是在主线程中创建的，因此它具有主线程亲和性。如果来自主线程的信号连接到在主线程中创建的对象的插槽，则该插槽也将在主线程中执行。（无论是 QueuedConnection 还是 DirectConnection）。插槽挡住了 GUI。

做这个：

```
class Worker:
    update_signal = QtCore.pyqtSignal(int)
    done_signal = QtCore.pyqtSignal()

    def __init__(self, some_var):
        self.some_var = some_var
        self.iteration = 0
        self.queue = mp.Queue()
        self.process = mp.Process(target=self.some_complex_processing, args=(self.queue,))

    def some_complex_processing(self, queue):
        for i in range(0,5000):
            self.iteration += 1
            queue.put(self.iteration)
        queue.put('done with processing')

    @QtCore.pyqtSlot()
    def start_computation(self):
        self.process.start()
        while(True):
            try:
                message = self.queue.get()
                self.update_signal.emit(message)
            except EOFError:
                pass
            if message == 'done with processing':
                self.done_signal.emit()
                break
        self.process.join()
        return

class Tab(QtGui.QTabWidget):
    start_comp = QtCore.pyqtSignal()
    def __init__(self, parent, this_worker):
        self.parent = parent
        self.this_worker = this_worker
        QtGui.QTabWidget.__init__(self, parent)

        self.treeWidget = QtGui.QTreeWidget(self)
        self.properties = QtGui.QTreeWidgetItem(self.treeWidget, ["Properties"])
        self.step = QtGui.QTreeWidgetItem(self.properties, ["Iteration #"])

        # Use QThread is enough
        self.thread = QtCore.QThread();
        # Change the thread affinity of worker to self.thread.
        self.this_worker.moveToThread(self.thread);
        self.this_worker.update_signal.connect(self.update_GUI)
        self.this_worker.done_signal.connect(self.thread.quit)
        self.start_comp.connect(self.this_worker.start_computation)
        self.thread.start()

    ###############################
    # Here is what should update the GUI at every iteration of Worker.some_complex_processing()
    # The message appears to be getting sent, due to seeing the print statement in the console, but the GUI is not updated.
    @QtCore.pyqtSlot(int)
    def update_GUI(self, iteration):
        self.step.setText(0, str(iteration))
        #time.sleep(0.1)
        print iteration

    def start_signal_emit(self):
        self.start_comp.emit() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T18:07:09.760

好的，我对 Qt 本身并不熟悉，但我用 Tkinter 做过类似的工作。我很确定您在这里遇到了 Python 的 Global Interpreter Lock。具体来说，您在同一个线程中启动队列和 GUI 应用程序，因此当队列阻塞等待输入时，GUI 也会阻塞。尝试`app = QtGui.QApplication([])`在它自己的线程或进程中启动。用队列编写 GUI 总是有点复杂，而且我发现它通常需要比我开始预期的多至少 1 层线程。

# android - Eclipse 将我的 Win7 8gb RAM 与 adb.exe 一起挂起

> ID：15698252
> 
> 赞同：0
> 
> 时间：2013-03-29T06:06:41.983
> 
> 标签：android, eclipse, sdk, adb

Eclipse 连同我已经怀疑暂停了我的 Win7 8gb ram 的 adb.exe。为什么？+ 它不运行的事实；我的意思是，它不显示工作区。顺便说一句，我正在使用带有 GAE 和 android 的 eclipse，两者都使用有任何冲突，还是可以不用担心？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:08:25.750

尝试全新安装 Android SDK。当 adb.exe 或 SDK 中的任何其他文件损坏时，系统会挂起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:31:16.813

似乎 Eclipse 内存不足。打开`eclipse.ini`位于 eclipse 文件夹中的文件，并增加堆大小。

你会得到如下的东西

```
-startup
plugins/org.eclipse.equinox.launcher_1.0.100.v20080501.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.100.v20080428-1330
-showsplash
org.eclipse.platform
-vm
/usr/lib/jvm/java-1.5.0-sun/jre/bin/java
-vmargs
-Xms512m
-Xmx1024m
-XX:+UseParallelGC
-XX:PermSize=256M
-XX:MaxPermSize=512M 
```

现在将 增加到`Xmx`更高的值。可能类似于 1024

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T06:13:49.880

为您的 Eclipse 增加 Xmx 大小，您可以在 eclipse.ini（配置设置文件）中增加它。有用

# ember.js - 在 Ember.js 中使用 linkTo 传递不同于 xyz_id 的动态参数

> ID：15698253
> 
> 赞同：0
> 
> 时间：2013-03-29T06:06:45.033
> 
> 标签：ember.js, javascript-framework

我见过很多传递动态参数的例子，这些参数以 xyz_id 结尾，其中 xyz 是“模型”。但是，有没有办法传递不同于 xyz_id 的 id？

基本上，鉴于这个小提琴：http: [//jsfiddle.net/xcNSa/11/](http://jsfiddle.net/xcNSa/11/)

有人可以告诉我如何传递视频的代码并输入选项作为参数，而不仅仅是 id。因此，当前标题为“链接到我自己”的链接指向：

[http://fiddle.jshell.net/xcNSa/11/show/#/video/1](http://fiddle.jshell.net/xcNSa/11/show/#/video/1)

我想指出：

[http://fiddle.jshell.net/xcNSa/11/show/#/video/horror/event-horizo​​n](http://fiddle.jshell.net/xcNSa/11/show/#/video/horror/event-horizon)

这就是使用 linkTo 在循环中呈现链接的方式：

```
{{#linkTo "video" this}} Link to myself {{/linkTo}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T06:28:46.823

我想到了。必须在路由器上实现序列化方法：

```
serialize: function(model, params) {
    return {
        code: model.code,
        type: model.type,
        id: model.id
    };
} 
```

当然，更新相应的路径：

```
this.resource('video', {
    path: '/video/:type/:code'
}); 
```

[http://jsfiddle.net/xcNSa/12/](http://jsfiddle.net/xcNSa/12/)

# sql-server - Lightswitch 中的地理编码

> ID：15698254
> 
> 赞同：0
> 
> 时间：2013-03-29T06:06:50.123
> 
> 标签：sql-server, vb.net, openstreetmap, visual-studio-lightswitch

我正在为一家快递公司写申请。我有一个地址实体，我想对地址进行地理编码并将经纬度保存在 sql 服务器中以进行路由。我是一个新手，我不明白如何使用来完成这个。我想在我的 vb lightswitch 应用程序中使用openstreetmaps，我需要有人一步一步地向我解释我需要做些什么来完成这个。我今天整天都在研究地理编码，但我找不到开始所需的资源。那里有很多信息，我发现没有什么是逐步做到这一点的。我不知道如何使用 REST 或 SOAP 生成包含数据的 xml 文件。当我说一步一步时，我的意思是字面意思。我是一个菜鸟，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:39:54.037

Oh Boy, this is a very complex question. First of all, what are your needs?

1.  Geocode your address to Long/Lat
2.  Storing Long/Lat per address
3.  Getting routes between two addresses (?)
4.  Store Routes between two addresses (?)

## Geocode your address to Long/Lat

When working with OpenStreetmap data (what I haven't done for quite a while) I prefer the [Mapquest Geocode API](http://open.mapquestapi.com/geocoding/). But if you want to set up you own Server, or don't want to use Mapquest you should implement Nominatim ([MQ](http://open.mapquestapi.com/nominatim/), [OSM](http://wiki.openstreetmap.org/wiki/Nominatim)). If you can handle HTTP APIs and JSON you should be fine with the service pretty fast.

## Storing Long/Lat per address

This is tricky. As far as i know it's not possible to store geospacial information with LS. I would try to have two string fields in LS with the serialisation of Long/lat. I would also suggest to use SQL 2012, because it has a richer geospacial function set. Next I would try to set a trigger in the SQL server to store a serialised geo-point as [SQL geography point](http://technet.microsoft.com/en-us/library/bb933811.aspx). Depending on what you are doing you might want to set a trigger for serialising a SQL geography point, when it's changed. This way you are able to easily access all the cool [SQL Server geography stuff](http://technet.microsoft.com/en-us/library/bb933811.aspx).

## Getting/Storing routes between two addresses

I'm not sure if you need more information on that topic, so i'll not dig in very deep. With mapquest you can use the [Directions Service](http://open.mapquestapi.com/directions/). I don't know a good Directions service for OSM, but this information may be outdated. If you stay to the service results it shoudn't be a problem to store routes, given the information about Storing Long/Lat per address.

I hope this helps!

# python - 文本文件中“for循环”的替代品

> ID：15698259
> 
> 赞同：0
> 
> 时间：2013-03-29T06:07:21.740
> 
> 标签：python, for-loop, filewriter, file-read, unidecoder

```
from unidecode import *
reader = open("a.txt",'w')
def unite():
    for line in reader:
        line = unidecode(line)
        print (line)
unite() 
```

现在，我收到一条错误消息，说在写入模式下不允许循环。有没有其他方法，我可以像这样修改每一行，以便可以使用 unidecode 进行转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:01:24.920

你可以把这一切都记在心里。

```
from unidecode import *

reader = open("a.txt",'w')
lines = reader.readlines()
def unite(lines):
    for line in lines:
        line = unidecode(line)
        print (line)
unite() 
```

您也可以使用临时文件。

```
from unidecode import *
import os

reader = open('a.txt','r')
temp = open('~a.txt', 'w')
for line in reader():
    line = unidecode(line)
    temp.write(line)
reader.close()
temp.close()

os.remove('a.txt')
os.rename('~a.txt', 'a.txt') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:08:01.773

您可以在附加模式下打开它：

```
def unite():
    with open('somefile.txt','a+') as f:
        for line in f:
            f.write(unidecode(line))
            print line

unite() 
```

这会将内容写入文件末尾。要从文件开头写入内容，请使用 mode `r+`。

例如：

`sample.txt`：

```
hello world 
```

当你运行这个：

```
with open('sample.txt','a+') as f:
    line = f.readline()
    f.write('{} + again'.format(line.strip())) 
```

该文件将具有：

```
hello world
hello world again 
```

如果你运行：

```
with open('sample.txt','r+') as f:
    line = f.readline()
    f.write('{} + once more'.format(line.strip())) 
```

该文件将具有：

```
hello world
hello world once more
hello world again 
```

如果要*替换*文件的内容，则可以读取文件，保存行，将其关闭并以写入模式打开以将行写回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T08:00:32.363

这是一个有点肮脏的秘密，但很少有应用程序能够真正“就地”更改文件。大多数时候，看起来应用程序正在修改文件，但在后台，编辑后的文件被写入临时位置，然后移动到替换原来的位置。

如果您考虑一下，当您在文件中间插入几个字节时，无论如何您都必须从这一点重写整个文件。

由于 ascii 输出往往比 unicode 输入小，你可能可以完成这样的事情（我猜只有 unix）：

```
 #!/usr/bin/env python
    import os
    from unidecode import unidecode

    def unidecode_file(filename):
        # open for write without truncating
        fd = os.open(filename, os.O_WRONLY) 
        pos = 0 # keep track of file length
        # open for read
        with open(filename) as input:
            for line in input:
                ascii = unidecode(line.decode('utf-8'))
                pos += len(ascii)
                os.write(fd, ascii)
        os.ftruncate(fd, pos) # truncate output
        os.close(fd) # that is all, folks

    if __name__ == '__main__':
        unidecode_file('somefile.txt') 
```

这个特技是不安全的，也不是编辑文件的规范方法（如果输出大于输入，你肯定会遇到麻烦）。使用[Drew](https://stackoverflow.com/users/2210270/drew)建议的 tempfile 方法，但要确保文件名的唯一性（最安全的方法是为临时文件生成随机文件名）。

# cocoa-touch - PopOverController 中的 TableView

> ID：15698282
> 
> 赞同：1
> 
> 时间：2013-03-29T06:09:20.717
> 
> 标签：cocoa-touch, uitableview, uipopovercontroller

我正在创建一个应用程序，其中我有一个`UITableviewController`类，并且我有一个 IB 文件，其中包含一个`UITableView`。在我的`UIViewController`课程中，我正在创建一个`UIPopOverController`导航控制器并将其分配给该弹出框的内容视图。在导航控制器中，rootView 是`UITableView`控制器对象。我正在处理的问题是在单击其中显示 a 的 Bar Button 时显示 PopOver `UITableView`。问题是它只显示空白表视图，因为表视图的委托和数据源方法永远不会被调用。这是我在调试时检查过的。我在这里粘贴我的代码。请回答为什么我的委托和数据源方法没有被调用。

这是 ViewController.m:-

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil{

      self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
      if (self) {
      arr_settings = [[NSMutableArray alloc]           
      initWithObjects:@"shikhar",@"gulshan",@"bhargav", nil];

       //tbl_settings.delegate = self;
      // tbl_settings.dataSource = self;
      //self.title = @"Settings";
     //arr_settings = [[NSMutableArray alloc] 
     initWithObjects:@"shikhar",@"gulshan",@"bhargav", nil];

     // Custom initialization
   }
     return self;
 }

 -(IBAction)btn_settings:(id)sender{
  TableViewController * settingstable = [[TableViewController alloc] 
  initWithNibName:@"TableViewController" bundle:Nil];
  settingstable.tbl_settings.delegate = self;
  settingstable.tbl_settings.dataSource = self;
  //settingstable.tbl_settings.transform = CGAffineTransformMakeScale(1, 1);
  //settingstable.tbl_settings.tag = 1;
  //[self.view addSubview:settingstable.view];
  UINavigationController *nav = [[UINavigationController alloc]
  initWithRootViewController:settingstable];
  UIPopoverController * pickerPopover = [[UIPopoverController alloc] 
  initWithContentViewController:nav];

  pickerPopover.delegate = self;
  self.popovercontroller = pickerPopover;
  //CGRect popoverRect = [self.view convertRect:[_btn_settings frame] fromView: 
  [_btn_settings superview]];
  //popoverRect.size.width = MIN(popoverRect.size.width, 100);
  pickerPopover.popoverContentSize = settingstable.tbl_settings.frame.size;
  [settingstable.tbl_settings reloadData];
  [pickerPopover presentPopoverFromBarButtonItem:sender  
  permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
 }
  - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {
      return 1;
    }

  - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:
    (NSInteger)section
    {
       NSLog(@"%u",[arr_settings count]);
       return [arr_settings count];

    }

   // Customize the appearance of table view cells.
   - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath: 
     (NSIndexPath *)indexPath {
          static NSString *CellIdentifier = @"Cell";

          UITableViewCell *cell = [tableView  
          dequeueReusableCellWithIdentifier:CellIdentifier];
          if (cell == nil) {
             cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
             reuseIdentifier:CellIdentifier];
          if ([[UIDevice currentDevice] userInterfaceIdiom] ==  
          UIUserInterfaceIdiomPhone) {
          cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
         }
     }

          cell.textLabel.text = [arr_settings objectAtIndex:indexPath.row];
          NSLog(@"%@",cell.textLabel.text);
          return cell;

      } 
```

我还在 TableViewController 类中声明了 TableView 的 IBOutlet。在 ViewController.h 类中已经提到了 Datasource 和 delegate 协议。如果提问的方式不对，请帮助我并原谅我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:43:50.630

问题是由于在呈现表视图之前设置委托。现在只需像这样替换它

```
settingstable.tbl_settings.delegate = self;
settingstable.tbl_settings.dataSource = self;

[settingstable.tbl_settings reloadData]; 
```

像这样展示pickerview之后。

```
 TableViewController * settingstable = [[TableViewController alloc]
                                           initWithNibName:@"TableViewController" bundle:Nil];

    UINavigationController *nav = [[UINavigationController alloc]
                                   initWithRootViewController:settingstable];
    UIPopoverController * pickerPopover = [[UIPopoverController alloc]
                                           initWithContentViewController:nav];

    pickerPopover.delegate = self;
    self.popovercontroller = pickerPopover;

   [_btn_settings superview]];

    pickerPopover.popoverContentSize = settingstable.tbl_settings.frame.size;
    [pickerPopover presentPopoverFromRect:sender.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

    settingstable.tbl_settings.delegate = self;
    settingstable.tbl_settings.dataSource = self;

    [settingstable.tbl_settings reloadData]; 
```

这对我来说很好..

# ruby-on-rails-3 - Rails 3：覆盖输入错误电子邮件和密码的设计辅助方法

> ID：15698286
> 
> 赞同：0
> 
> 时间：2013-03-29T06:09:55.160
> 
> 标签：ruby-on-rails-3, devise

我目前的`/users/sign_in`路径匹配到`/home/all`. 所以每次用户寻找`/users/sign_in`他/她都会被带到`/home/all`. 现在发生的情况是，如果用户输入了错误的用户名或密码，他/她会在`/users/sign_in`. 我想知道如何显示消息`/home/all`？

这是我的路线

```
get "/users/sign_in" => redirect('/home/all') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:25:37.243

您可以将路线保持原样。并在 app 下创建一个文件夹为`classes`(app/classes)。然后有类似的东西

**/app/classes/custom_failure.rb**

```
class CustomFailure < Devise::FailureApp
  def redirect_url
    home_all_path
  end

  # override the response call
  def respond
    if http_auth?
      http_auth
    else
      redirect
    end
  end
end 
```

如果您愿意，您可以在 下自定义 Flash 消息`/config/locales/devise.en.yml`。

最后，确保将以下代码添加到

**/config/initializers/devise.rb**

```
 config.warden do |manager|
    manager.failure_app = CustomFailure
  end 
```

你现在应该准备好了。

# ios - 拒绝问题

> ID：15698288
> 
> 赞同：-5
> 
> 时间：2013-03-29T06:09:59.020
> 
> 标签：ios, itunes

对于我的应用程序，我从苹果那里得到了拒绝的详细信息，但我不知道该怎么做，因为我没有使用 icloud，苹果说你必须请描述我接下来应该做什么。苹果写在下面。

> 2.23 我们发现您的应用不遵循 iOS 数据存储指南，这是 App Store 审核指南所要求的。特别是，我们发现在启动和/或内容下载时，您的应用程序存储 32MB。要检查您的应用存储了多少数据：
> 
> *   安装并启动您的应用
> *   转到设置 > iCloud > 存储和备份 > 管理存储
> *   如有必要，点击“显示所有应用”
> *   检查您的应用程序的存储 iOS 数据存储指南指出，只有用户使用您的应用程序创建的内容，例如文档、新文件、编辑等，才应由 iCloud 备份。
> 
> 您的应用程序使用的临时文件应仅存储在 /tmp 目录中；请记住在用户退出应用程序时删除存储在此位置的文件。可以重新创建但必须保留以使您的应用程序正常运行的数据 - 或者因为客户希望它可以离线使用 - 应该使用“不备份”属性进行标记。对于 NSURL 对象，添加 NSURLIsExcludedFromBackupKey 属性以防止相应文件被备份。对于 CFURLRef 对象，使用相应的 kCFURLIsExcludedFromBackupKey 属性。有关更多信息，请参阅技术问答 1719：如何防止文件备份到 iCloud 和 iTunes？。
> 
> 有必要修改您的应用程序以满足 iOS 数据存储指南的要求。对于离散代码级别的问题，您可能希望咨询 Apple 开发人员技术支持。请务必：
> 
> *   包括您的拒绝问题的完整详细信息
> *   准备任何符号化的崩溃日志、屏幕截图和步骤，以便在 DTS 工程师跟进时重现问题。
> 
> 有关如何符号化和读取崩溃日志的信息，请参阅技术说明 TN2151 理解和分析 iPhone OS 应用程序崩溃报告。如果您在重现此问题时遇到困难，请尝试按照 使用 Xcode 的存档功能测试工作流程中所述[测试工作流程。](https://developer.apple.com/library/ios/qa/qa1764/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T06:22:47.727

您必须设置“不备份”属性以让 iphone 管理您在文档目录中下载的所有资源。

将以下代码放在 appdelegate 的 didFinishLaunchingWithOptions 方法中 -

```
NSArray *docPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDir = [docPath objectAtIndex:0];
    NSURL *pathurl=[NSURL fileURLWithPath:documentDir];

const char* filePath = [[URL path] fileSystemRepresentation];
    const char* attrName = "com.apple.MobileBackup";
    u_int8_t attrValue = 1;

    int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
    return result == 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:21:17.877

它清楚地指出，您的应用在启动或内容下载时会在 Documents Directory 中存储 32MB 的数据。Document 目录中的所有数据都会自动备份。

因此，如果您想以相同的方式使用该应用程序，您可以做以下两件事。

1）将您的数据存储在任何其他目录中，例如“Temp”

或者

2）将您的数据标记为“不备份”属性。为此，如果您从 URL 下载任何数据，对于 NSURL 对象，添加 NSURLIsExcludedFromBackupKey 属性以防止相应文件被备份

# java - java正则表达式，同时用括号分割字符串

> ID：15698289
> 
> 赞同：1
> 
> 时间：2013-03-29T06:10:00.763
> 
> 标签：java, split

我有一个`String`赞

```
Move Selected Patients (38) 
```

我想`38`使用 java split 在括号之间检索。

尝试使用此代码：

```
String a1 = "Move Selected Patients (38)";
String[] myStringArray = new String[2];
myStringArray = a1.split("(", 2);
System.out.println(myStringArray[0]); 
```

它失败了，但有以下例外：

```
java.util.regex.PatternSyntaxException: Unclosed group near index 1. 
```

谁能帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T06:12:36.543

您需要转义括号，因为 split 参数仍然是正则表达式：`\\(`. 请记住，这仍将`38)`作为第二个元素返回。`Matcher`使用捕获组中括号的内容会更有意义：`\\((.*?)\\)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T06:28:19.260

```
Pattern p = Pattern.compile(".*\\(([0-9]*)\\)");
Matcher m = p.matcher("Move Selected Patients (38)");
String s = m.group(1); 
```

如果您还需要字符串的另一部分，只需使用另一个组即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T07:04:00.153

您可以使用正则表达式轻松实现要求，如下所示：

```
String str = "Move Selected Patients (38)";
Pattern pattern = Pattern.compile("\\((\\d+)\\)");
Matcher match = pattern.matcher(str);
while(match.find()) {
    System.out.println(match.group(1));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T06:11:29.847

`(`是用于组的保留字符，您需要使用`\`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-29T06:11:37.850

`(`是正则表达式元字符，您必须使用`\\`. 尝试使用`\\(`.

# iphone - 如何以编程方式在 iOS 中获取 iPhone 蓝牙适配器名称

> ID：15698302
> 
> 赞同：4
> 
> 时间：2013-03-29T06:10:59.113
> 
> 标签：iphone, ios, bluetooth, bluetooth-lowenergy

我正在开发和应用程序，我需要在其中显示设备的蓝牙信息。我终于在蓝牙mac地址方面取得了一些成功，但无法获得设备名称。有没有办法通过一些公共api合法地获取设备名称？

```
NSString*btMacAddr = @"Bt ";
BOOL                        success;
struct ifaddrs *            addrs;
const struct ifaddrs *      cursor;
const struct sockaddr_dl *  dlAddr;
const uint8_t *             base;

success = getifaddrs(&addrs) == 0;
if (success) {
    cursor = addrs;
    while (cursor != NULL) {
        if ( (cursor->ifa_addr->sa_family == AF_LINK)
            && (((const struct sockaddr_dl *) cursor->ifa_addr)->sdl_type == IFT_ETHER)
            && (strcmp(cursor->ifa_name, "en0") == 0)) {
            dlAddr = (const struct sockaddr_dl *) cursor->ifa_addr;
            base = (const uint8_t *) &dlAddr->sdl_data[dlAddr->sdl_nlen];

            if (dlAddr->sdl_alen == 6) {
                //fprintf(stderr, ">>>             WIFI MAC ADDRESS: %02x:%02x:%02x:%02x:%02x:%02x\n", base[0], base[1], base[2], base[3], base[4], base[5]);
                //fprintf(stderr, ">>> IPHONE BLUETOOTH MAC ADDRESS: %02x:%02x:%02x:%02x:%02x:%02x\n", base[0], base[1], base[2], base[3], base[4], base[5]+1);
                btMacAddr = [NSString stringWithFormat:@"Mac Address  :  %02x : %02x : %02x : %02x : %02x : %02x", base[0], base[1], base[2], base[3], base[4], base[5]+1];

            } else {
                fprintf(stderr, "ERROR - len is not 6");
            }
        }
        cursor = cursor->ifa_next;
    }
    freeifaddrs(addrs);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:28:06.550

那么是不是类似于：[[UIDevice currentDevice] name];

这给出了 iOS 设备的名称，例如“Henriks iPhone”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:15:40.527

它在文档中没有明确说明，但在 CBCentralManagerDelegate 方法中，例如[centralManager:didDiscoverPeripheral:advertisementData:RSSI:](http://developer.apple.com/library/mac/documentation/CoreBluetooth/Reference/CBCentralManagerDelegate_Protocol/translated_content/CBCentralManagerDelegate.html#//apple_ref/occ/instm/CBCentralManagerDelegate/centralManager%3adidDiscoverPeripheral%3aadvertisementData%3aRSSI%3a)，传递给委托的参数之一是 CBPeripheral。

有趣的是，Apple 并没有列出任何 CBPeripheral 的官方文档，但是如果你查看 CBPeripheral.h 的头文件，它看起来像有一个“`_name` ”字段，您可以从中提取（对于我自己来说，当我做“”时编译器没有抱怨`peripheral.name`，好像它定义了一些属性）

但话又说回来，为了验证我的答案，我尝试下载[Apple 的 CoreBluetooth 温度传感器示例代码](https://developer.apple.com/library/ios/#samplecode/TemperatureSensor/Introduction/Intro.html#//apple_ref/doc/uid/DTS40012194)，并在我的 iPhone 4S 上使用“”命令运行它，但没有取得太大成功（即使设备中的蓝牙确实设置为*打开*`[centralManager scanForPeripheralsWithServices:nil options:nil];`，也会产生“ ”错误设置）。`CoreBluetooth[WARNING] <CBConcreteCentralManager: 0x2087fc00> is not powered on`

 *无论如何，我希望我的提示能真正帮助你。*

# algorithm - 将矩形盒子放入更大的矩形盒子中

> ID：15698304
> 
> 赞同：2
> 
> 时间：2013-03-29T06:11:22.567
> 
> 标签：algorithm, math, optimization

我有一些不同尺寸的矩形盒子和一个更大的矩形盒子。我需要在更大的盒子中放入尽可能多的不同类别的盒子。在任何情况下，每个类别都需要容纳一定的最小数量的盒子。基本上，我需要解决约束优化问题。我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:43:05.063

不幸的是，这个问题没有多项式时间算法，即它是 NP 难的。

所以尝试搜索。将框从大到小排序可能会有所帮助。（按区域或一侧，不能说哪个更好，取决于您的搜索方式）。

如果速度远远不能接受，尝试部分贪婪以获得相当好的解决方案。

# facebook - 如何在 cocos2dx-project 上使用 facebook sdk

> ID：15698305
> 
> 赞同：2
> 
> 时间：2013-03-29T06:11:23.193
> 
> 标签：facebook, cocos2d-x

我正在做游戏 cocos2d-x，当用户获得高分时，我希望他们触摸 fb 图标并在帐户 facebook 上分享高分。

但是，facebook.developer.com 上的教程用于objective-c 项目。

所以有人帮助我:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T13:31:20.400

您可以毫无问题地从 c++ 调用objective-c 代码。因此，我认为您只需将 fb 库添加到 iOS 项目并从您的游戏中调用 Objective-c 代码。

在此处查看如何从 cocos2d-x 调用 Objective-c 代码的示例：http: [//www.cocos2d-x.org/forums/6/topics/11655](http://www.cocos2d-x.org/forums/6/topics/11655)

我找到了另一个[在 Cocos2d-x 中创建 InAppPurchase 的例子](https://stackoverflow.com/questions/16815309/creating-inapppurchase-in-cocos2d-x)

# android - 分享图片后如何从sd卡中删除图片

> ID：15698313
> 
> 赞同：0
> 
> 时间：2013-03-29T06:12:31.527
> 
> 标签：android

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch (requestCode) 
        {
        case TAKE_IMAGE:
            try {
                if (resultCode == RESULT_OK) {
                    // we need to update the gallery by starting MediaSanner service.
                    mScanner = new MediaScannerConnection(ProfilePicFromCamera.this,new MediaScannerConnection.MediaScannerConnectionClient()
                    {
                       public void onMediaScannerConnected() {
                           mScanner.scanFile(imageUri.getPath(),null /*mimeType*/);
                    }           
                            public void onScanCompleted(String path, Uri uri) {
                            if (path.equals(imageUri.getPath())) {
                                mScanner.disconnect();
                                ProfilePicFromCamera.this.runOnUiThread(new Runnable() {
                                        public void run() {
                                            updateUI();
                                    }
                                });
                            }
                        }
                    });
                    mScanner.connect();

                }
            } catch (Exception e) {
                e.printStackTrace();
            }
            break;
        case UPLOAD_IMAGES:
             if(resultCode==RESULT_OK)
               {       
                        if(file.exists())
                        file.deleteOnExit();  
               }
             break;     }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T06:16:48.333

```
 public void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

           if (requestCode == CAMERA_REQUEST  && resultCode == getActivity().RESULT_OK)       {
                   File file = new File(mCapturedImagePath);
                   file.delet();
            }
    }

or  u can use only this(as your condition)
File file = new File(mCapturedImagePath);
file.delet(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:49:28.217

使用下面的代码它可以帮助你。

```
File fdelete = new File(file_dj_path);
    if (fdelete.exists()) {
        if (fdelete.delete()) {
            System.out.println("file Deleted :" + file_dj_path);
        } else {
            System.out.println("file not Deleted :" + file_dj_path);
        }
    } 
```

下面是删除图像后刷新图库的代码

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
 Uri.parse("file://" +  Environment.getExternalStorageDirectory()))); 
```

检查这个：[https ://stackoverflow.com/a/10716773/1381827](https://stackoverflow.com/a/10716773/1381827)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T06:17:22.600

```
File file = new File(Environment.getExternalStorageDirectory()+"image_name"); //if your image is directly inside sdcard
file.delete(); 
```

# c# - 无法使用 Microsoft.Jet.OLEDB.4.0 提供程序正确读取 csv 文件

> ID：15698319
> 
> 赞同：6
> 
> 时间：2013-03-29T06:13:07.357
> 
> 标签：c#, csv, ado.net, oledb

我正在尝试使用以下代码读取 csv 文件。该文件也有列标题。

以下是在数据集中加载文件后的输出。 ![加载数据集中数据后的输出](../Images/80b201986e86284a1298b871c6077529.png)

```
public DataSet LoadCVS(string filePath)
{
    DataSet ds = new DataSet();
    string fileName = System.IO.Path.GetFileName(filePath);
    try
    {
        string path = @System.IO.Path.GetDirectoryName(filePath);

        using (OleDbConnection conn =
            new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + path + @";Extended Properties=""Text;HDR=Yes;FMT=Delimited"""))
        {
            using (OleDbCommand cmd =
                new OleDbCommand("SELECT * FROM [" + fileName + "]", conn))
            {
                conn.Open();
                OleDbDataAdapter da = new OleDbDataAdapter(cmd);

                da.Fill(ds, "csv");
            }
        }
    }
    catch (Exception ex) //Error
    {
        MessageBox.Show(ex.Message);
    }
    return ds;
} 
```

csv文件样本数据：

```
Org,Item Number,Item Description,Lot Number,Lot Expiration Date,Marketing Division,Product Type
F01,Jan-00,LFIT MORSE TAPER HEAD,MHD7D8,3-May-14,5,5
F01,Jan-05,LFIT MORSE TAPER HEAD,MHATY9,1-Mar-14,5,5
F01,Jan-00,LFIT MORSE TAPER HEAD,MHDEN1,8-Mar-14,5,5
F01,Jan-05,LFIT MORSE TAPER HEAD,MHNY4L,18-Nov-14,5,5
F01,Jan-10,LFIT MORSE TAPER HEAD,MHHLYR,31-May-14,5,5
F01,Jan-00,LFIT MORSE TAPER HEAD,MJNKRK,10-Oct-15,5,5
F01,Jan-00,LFIT MORSE TAPER HEAD,MKNN38,14-Nov-16,5,5
F01,Jan-05,LFIT MORSE TAPER HEAD,MJDV6X,8-Apr-15,5,5
F01,Jan-05,LFIT MORSE TAPER HEAD,MKAK94,22-Feb-16,5,5 
```

问题：

*   第一列数据从 F01 转换为 1。
*   我也尝试过使用 Access 12.0 驱动程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T07:07:25.470

您所看到的是 OLEDB 驱动程序试图帮您一个忙并推断您的列的数据类型。在您的情况下，它会在第一列中看到所有 'F01' 并且您希望该列中的数字包含数字数据。

您可以通过在与 CSV 相同的文件夹中创建一个名为 schema.ini 的文本文件来指定 CSV 列的数据类型。在此文件中，您将为数据文件中的每一列指定列的名称和列的数据类型。这是您的数据的示例：

```
[NameOfYourCSVDataFile.csv]
Col1=Org Text
Col2="Item Number" Text
Col3="Item Description" Text
Col4="Lot Number"  Text
Col5="Lot Expiration Date" Text
Col6="Marketing Division" Text
Col7="Product Type" Text 
```

您可以在 schema.ini 文件中定义其他属性。有关更多详细信息，请参阅[此](http://msdn.microsoft.com/en-us/library/ms709353.aspx)。

如果您不能或不想手动创建 schema.ini，您可以在尝试读取 CSV 之前以编程方式创建文件。

如果可以避免的话，我强烈建议不要使用 OLEDB 来读取 CSV。那里有许多功能强大的 CSV 阅读器，如果您在问题中提供的示例数据与您的真实数据完全一样，那么我敢打赌，您会发现其中任何一个都比 OLEDB 更易于使用。你的问题勾起了一些痛苦的回忆。

# jquery - 忽略 Google Chrome 中的 z-index 的粘滞栏

> ID：15698321
> 
> 赞同：0
> 
> 时间：2013-03-29T06:13:23.800
> 
> 标签：jquery, html, css, google-chrome, z-index

我在我目前正在开发的网站上添加了一个导航栏（功能区样式），并使用 jQuery Sticky Plugin 使其在用户滚动时固定在视口的顶部。

它在 Firefox 中完美运行，但 Chrome 会忽略条带两侧的 z-index。在过去的 7 个小时里，我一直在谷歌上搜索这个问题的解决方案。我尝试了一系列不同的建议，包括取消嵌套栏和手动为所有元素设置位置和 z-index 值，但无济于事。事实上，我最终还是从头开始，因为我试图修复它只会让事情变得更糟。

谁能告诉我在 Chrome 中滚动时我应该改变什么来修复功能区的两侧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:38:19.437

为什么不调整 和 的边框宽度和底部位置`.DropMenu:before`来`.DropMenu:after`绕过 的不一致行为`z-index`？

```
.DropMenu:before {
    border-color: transparent;
    border-color: rgba(40,54,44,.99) rgba(40,54,44,.99) transparent transparent;
    left: -1px;
    bottom: -12px;
}

.DropMenu:before, .DropMenu:after {
    content: "";
    position: absolute;
    border-style: solid;
    border-width: 6px;
}

.DropMenu:after {
    border-color: transparent;
    border-color: rgba(40,54,44,.99) transparent transparent rgba(40,54,44,.99);
    right: 0;
    bottom: -12px;
} 
```

PS。`:before`较低版本的`:after`IE 不太可能支持伪类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:40:23.467

该页面上有一个错误，如下所示

```
 TypeError: Cannot read property 'msie' of undefined 
```

而且因为您使用的是 Jquery 1.9.1，所以这个错误很明显。`$.browser`已从[1.9](http://jquery.com/upgrade-guide/1.9/#jquery-browser-removed)中删除。您可以使用[jQuery Migrate](https://github.com/jquery/jquery-migrate/)来拥有`$.browser support`.

错误在这个[js 文件](http://tradingvega.com/analyses/wp-content/themes/skeleton/javascripts/jquery.formalize.min.js?ver=1.2.3)中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T06:41:36.387

我看到你在哪里犯了错误......请执行以下操作以使其在每个浏览器中都能完美运行：

1) 从身体上取下丝带 img。

2）创建一个新类：

.topbg{浮动：左；宽度：100%；高度：25px；z 指数：9999；背景： url(../images/border_top.png) 重复-x 顶部中心；位置：固定；}

3）把这个新类放在你的 HTML: 和你的内容中

希望这可以帮助.....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T07:15:35.817

```
$(document).ready(function(){
    $(function () {
        $(window).scroll(function () {
            if ($(this).scrollTop() > 50) {
                $('.nav').css({"position":"fixed", "top":"0"});
            } else {
                $('.nav').css({"position":"absolute","top":"50px"});
            }
        });

    });

}); 
```

# java - 封闭系统和开放系统签名有什么区别？

> ID：15698323
> 
> 赞同：0
> 
> 时间：2013-03-29T06:13:34.763
> 
> 标签：java, signature, electronic-signature

我需要为要求我实施签名解决方案的一位客户找到解决方案。我正在考虑建议一些解决方案，例如 DocuSign 或 EchoSign。

但最近我的客户说他想要一个封闭的系统签名。

我搜索了一些网站，发现了封闭系统和开放系统签名之间的区别。

[http://www.accessdata.fda.gov/scripts/cdrh/cfdocs/cfCFR/CFRSearch.cfm?CFRPart=11&showFR=1](http://www.accessdata.fda.gov/scripts/cdrh/cfdocs/cfCFR/CFRSearch.cfm?CFRPart=11&showFR=1)

封闭系统是指系统访问由负责系统上电子记录内容的人员控制的环境。

开放系统是指系统访问不受负责系统上电子记录内容的人员控制的环境。

我对此的理解是，我不能再建议 Docusign 或 EchoSign。我对么？还有一个问题，我是否需要为此创建自己的签名解决方案，或者是否有任何可用的库或框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T19:28:45.257

我认为该文件的重要部分是：

> 使用封闭系统创建、修改、维护或传输电子记录的人员应采用旨在确保电子记录的真实性、完整性以及在适当情况下的机密性的程序和控制，并确保签名者不能轻易否认签名记录不真实。此类程序和控制应包括以下内容：

我对此的解释是一个封闭系统，即采取了适当的安全措施。

从 DocuSign 来看，这将是合格的。我目前正在与 DocuSign 合作，以使我们的网站能够将文档发送给我们的客户进行签名。流程完成后，我们不仅需要保存已签名的文档，还需要保存一份描述文档签名过程的摘要文档。我不是律师，但在我看来，DocuSign 会满足要求。我猜其他电子签名公司也会做类似的事情......

# iphone - 如何在带有对齐中心的uiview中并排放置按钮

> ID：15698327
> 
> 赞同：1
> 
> 时间：2013-03-29T06:14:06.390
> 
> 标签：iphone, ios

我有一个 uiview，我必须在 uiview 的中心并排放置几个按钮，如图所示以编程方式

和这个图类似。按钮应该放在uiview的中心

```
 --------------------------------
| ----     ----      ----        |
||    |   |    |    |    |       |
|| 1B |   | 3B |    | 5B |       |
| ----     ----      ----        |
| ----     ----                  |
|| 2B |   |    |                 |
||    |   | 4B |                 |
| ----     ----                  |
 -------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:32:40.883

此方法将为每行创建 4 个按钮，与 IOS 中的 PhotoGallery 相同 进行所需的更改以实现您的输出

```
-(void)createButtons
{
    int x, y, width, height, gapBetweenTwoButtons;
    x = y = 4;
    gapBetweenTwoButtons = 4;
    int numberOfButtons = 10;

    // i have calculated width for 4 columns it may vary for your requirement
    width = height = 140;

    // loop to create buttons
    UIButton *btn;

    for (int i=0; i< numberOfButtons; i++)
    {
        btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [btn setFrame:CGRectMake(x, y, width/2, height/2)];

        // Add button to scrollview
        [scrlViewSubCategory addSubview:btn];

        // calculate x and y accordingly
        if((i+1) % 4 == 0)
        {
            x = gapBetweenTwoButtons;
            y += (width/2)+gapBetweenTwoButtons;
        }
        else
            x += (width/2)+gapBetweenTwoButtons;
    }

    // finally , adjust content size of scrollview

    [scrlViewSubCategory setContentSize:CGSizeMake(scrlViewSubCategory.frame.size.width, (numberOfButtons/4) * ((width/2)+4))];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T07:25:38.603

这是我已经解决的问题。[源代码](http://dl.dropbox.com/u/35012982/Demo%20Projects/TestViewMatrix.zip)

一个枚举类型，表示您想要垂直或水平排列的项目

```
typedef enum {
    ArrangementTypeHorz = 1,
    ArrangementTypeVert = 2
}ArrangementType; 
```

声明的数量或行列和排列类型

```
@interface ATTViewController ()

{
    ArrangementType _arrangementType;

    NSUInteger _rows;
    NSUInteger _columns;

}

@end 
```

方法计算项目索引wrt superView的框架

```
- (CGRect)frameForItemAtIndex:(NSUInteger)index inSuperView:(UIView *)superView
{
    CGFloat blockWidth  = floorf(superView.frame.size.width/_columns);
    CGFloat blockHeight = floorf(superView.frame.size.height/_rows);

    NSUInteger row    = 0;
    NSUInteger column = 0;

    if (_arrangementType == ArrangementTypeHorz) {
        row    = floorf((CGFloat)index/_columns);
        column = index - row*_columns;
    }else{
        column    = floorf((CGFloat)index/_rows);
        row = index - column*_rows;
    }

    CGFloat xOffset = 5.0f;
    CGFloat yOffset = 5.0f;

    return  CGRectMake(blockWidth*column+xOffset,
                       blockHeight*row+yOffset,
                       blockWidth-(2*xOffset),
                       blockHeight-(2*yOffset));
} 
```

将按钮添加到 containerView。添加时设置行、列和排列类型

```
- (void)addButtonsToContainerView
{
    NSUInteger numberOfItems = 5;

    _rows = 2;
    _columns = 3;

    _arrangementType = ArrangementTypeVert;

    NSUInteger itemCount = 0;

    while (itemCount<numberOfItems)
    {
        UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        CGRect frame = [self frameForItemAtIndex:itemCount inSuperView:self.containerView];
        [button setFrame:frame];
        NSString *title = [NSString stringWithFormat:@"Button %d",itemCount+1];
        [button setTitle:title forState:UIControlStateNormal];

        [self.containerView addSubview:button];

        itemCount ++;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T06:33:50.500

试试这个：

```
 -(void) fillGridViewAfterCall 
    {
            int count = [viewGrid.subviews count];
            for (int i = count-1; i >= 0; i--) 
            {
                    [[viewGrid.subviews objectAtIndex:i] removeFromSuperview];
            }
            int videoCount = 0;
            int posx = 10;
            int posy = 10;
            int mainLoopCount = ([arrUserVideos count]/3);

            if (([arrUserVideos count]%3) > 0) 
            {
                    mainLoopCount = mainLoopCount + 1;
            }

            for (int i=0; i<mainLoopCount; i++) 
            {
                    posx = 10;
                    for (int j=0; j<3; j++) 
                    {
                            VideoShare *shareObj = [arrUserVideos objectAtIndex:videoCount];

                            UIButton *btnVideo = [[[UIButton alloc] init];
                            btnVideo.frame = CGRectMake(posx, posy, 96, 96);
                            btnVideo.tag = shareObj.vdId;
                            btnVideo.layer.masksToBounds = YES;
                            btnVideo.layer.cornerRadius = 4.0;
                            [btnVideo setImage:[UIImage imageNamed:@"iconGridSelected.png"] forState:UIControlStateNormal];
                            [btnVideo addTarget:self action:@selector(btnGridVideoClick:) forControlEvents:UIControlEventTouchUpInside];
                            [viewGrid addSubview:btnVideo];
                            videoCount++;

                            if (videoCount == [arrUserVideos count]) 
                            {
                                    break;
                            }
                            posx = posx + 102;
                    }
                    posy = posy + 102;
            }

            if (arrUserVideos.count == 0) 
            {
                    viewGrid.hidden = YES;
            }
            else 
            {
                    viewGrid.frame = CGRectMake(0, posyDynamic, 320, (posy+5));
                    viewGrid.hidden = NO;
            }

            scrollObj.contentSize = CGSizeMake(320, (viewGrid.frame.size.height+100+scrollIncrement));
    } 
```

# ruby-on-rails - 预期的 Ruby 版本 >= 1.8.7，是 1.8.5

> ID：15698328
> 
> 赞同：0
> 
> 时间：2013-03-29T06:14:14.033
> 
> 标签：ruby-on-rails, ruby, memory-leaks, gem

我正在处理的 Rails 应用程序存在内存泄漏。我尝试安装 Bleak_house gem 来查明错误，但收到以下错误：

```
sudo gem install bleak_house

/usr/local/rvm/gems/ruby-1.8.7-p371@global/gems/rubygems-bundler-1.1.1/lib/rubygems-bundler/regenerate_binstubs_command.rb:48: warning: parenthesize argument(s) for future version
Expected Ruby Version >= 1.8.7, is 1.8.5 
```

使用的 Ruby 版本是 ，使用`1.8.7`的 Rubygems 版本是`1.8.25`. 我什至安装了 RVM 并`rvm --default use 1.8.7`成功执行，但并没有解决问题。可能是什么问题呢？

# javascript - 带有 Asp.net 按钮的 Jquery

> ID：15698331
> 
> 赞同：0
> 
> 时间：2013-03-29T06:14:20.813
> 
> 标签：javascript, jquery, asp.net

我试图在 asp.net 按钮中触发 jquery。它没有被触发。出了什么问题？

//代码

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<script type="text/javascript" src ="Scripts/jquery-1.4.1.js"></script>
<script type ="text/javascript">
  $(document.ready(function(){
       $("#<%=Button1.ClientID %>").click(function () {
                 showalert('HTML Button Clicked');
       });
  });

  function showalert(btnText) {
      alert(btnText)
  } 
</script>

</head>
<body>
   <form id="form1" runat="server">
     <div>
        <asp:Button ID="Button1" runat="server" Height="41px" 
           style="margin-left: 340px; margin-top: 197px" 
          Text="Button" Width="147px"/>
     </div>
  </form>
</body>
</html> 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:19:21.573

试试这个：

```
 <asp:Button ID="Button1" runat="server" Height="41px" OnClientClick="function_name();" 
             style="margin-left: 340px; margin-top: 197px" Text="Button" Width="147px"/> 
```

在脚本中定义函数 function_name()：

```
<script type ="text/javascript">

         function function_name() {
             //what ever you want.
            } 
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T06:29:12.133

您的文档就绪语法错误。试试这个代码

```
<script type ="text/javascript">

    $(document).ready(function () {
        $("#<%=Button1.ClientID %>").click(function () {

            showalert('HTML Button Clicked');
        });
    });
  function showalert(btnText) {
      alert(btnText)
  } 
</script>

</head>
<body>
   <form id="form1" runat="server">
     <div>
        <asp:Button ID="Button1" runat="server" Height="41px" 
           style="margin-left: 340px; margin-top: 197px" 
          Text="Button" Width="147px"/>
     </div>
  </form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T06:29:37.297

您`)`在 document.ready中丢失了

```
<script type ="text/javascript">
  $(document).ready(function(){
       $("#<%=Button1.ClientID %>").click(function (event) {
             showalert('HTML Button Clicked');
             event.preventDefault();//don't forgot this
       });
  });

 function showalert(btnText) {
    alert(btnText)

  } 
</script> 
```

# android - 在 ubuntu 上反编译和重新编译 apk 文件

> ID：15698336
> 
> 赞同：0
> 
> 时间：2013-03-29T06:14:45.067
> 
> 标签：android, decompiling, recompile

我正在尝试使用 apktool 修改 Android 应用程序。

我已经下载了 apktool，现在我有 3 个文件 apktool、aapt 和 apktool.jar

我正在尝试修改 Gallery_3D.apk 的背景

我正在使用这些命令反编译然后重新编译

```
./apktool if Gallery 3D.apk
./apktool d Gallery 3D.apk gallery 
```

它适用于上述 2 个步骤，但在使用命令重新编译时

```
./apktool b gallery Gallery 3D New.apk 
```

但是我在最后一步遇到了这个错误。

```
I: Checking whether sources has changed...
I: Smaling...
I: Checking whether resources has changed...
I: Building resources...
Exception in thread "main" brut.androlib.AndrolibException: brut.common.BrutException: could not exec command: [aapt, p, -F, /tmp/APKTOOL4811911322257021960.tmp, -I, /home/seat2/apktool/framework/1.apk, -S, /home/seat2/Desktop/apktool/gallery/res, -M, /home/seat2/Desktop/apktool/gallery/AndroidManifest.xml]
    at brut.androlib.res.AndrolibResources.aaptPackage(AndrolibResources.java:193)
    at brut.androlib.Androlib.buildResourcesFull(Androlib.java:301)
    at brut.androlib.Androlib.buildResources(Androlib.java:248)
    at brut.androlib.Androlib.build(Androlib.java:171)
    at brut.androlib.Androlib.build(Androlib.java:154)
    at brut.apktool.Main.cmdBuild(Main.java:182)
    at brut.apktool.Main.main(Main.java:67)
Caused by: brut.common.BrutException: could not exec command: [aapt, p, -F, /tmp/APKTOOL4811911322257021960.tmp, -I, /home/seat2/apktool/framework/1.apk, -S, /home/seat2/Desktop/apktool/gallery/res, -M, /home/seat2/Desktop/apktool/gallery/AndroidManifest.xml]
    at brut.util.OS.exec(OS.java:87)
    at brut.androlib.res.AndrolibResources.aaptPackage(AndrolibResources.java:191)
    ... 6 more
Caused by: java.io.IOException: Cannot run program "aapt": java.io.IOException: error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:475)
    at java.lang.Runtime.exec(Runtime.java:610)
    at java.lang.Runtime.exec(Runtime.java:483)
    at brut.util.OS.exec(OS.java:78)
    ... 7 more
Caused by: java.io.IOException: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:164)
    at java.lang.ProcessImpl.start(ProcessImpl.java:81)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:468)
    ... 10 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-28T19:02:42.230

我知道这是一个很老的答案，但我会发布解决方案，以防有人仍然需要帮助。

RC 指出了第一个问题：您需要将 aapt 添加到您的路径中。您可以使用以下命令执行此操作：

```
PATH=$PATH:/location/of/aapt 
```

要解决第二个问题（***INSTALL_PARSE_FAILED_NO_CERTIFICATES***），您需要签署您的 apk。您可以使用 testsign.jar 执行此操作：

```
java -jar testsign.jar unsigned.apk signed.apk 
```

# sql - OAuth、OAuthConfig 和 Google Apps 脚本（Fusion Table API - SQL 插入问题）

> ID：15698341
> 
> 赞同：0
> 
> 时间：2013-03-29T06:15:07.020
> 
> 标签：sql, oauth, google-apps-script, google-fusion-tables, sql-insert

我正在开发一个谷歌应用程序脚本函数，它将在融合表中插入一行。我的大多数融合表界面都可以正常工作，但这是我第一次尝试 sql 'POST' 查询。根据[此处](https://developers.google.com/fusiontables/docs/v1/using#insertRow)的文档，我应该能够将 sql 语句放在 POST 正文中。我已将自己简化为[OAuth Playground](https://developers.google.com/oauthplayground/)进行故障排除，但我不断收到以下错误。我一直在尝试使用 sql insert 语句`sql=INSERT INTO {fusionId} (HeadingName) VALUES (ValueOne)`，并且尝试了该语句的各种变体，但均无济于事。请帮助我确定执行此操作的正确语法或方法。

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "required",
    "message": "Required parameter: sql",
    "locationType": "parameter",
    "location": "sql"
   }
  ],
  "code": 400,
  "message": "Required parameter: sql"
 }
} 
```

一旦我弄清楚这一点，我就需要在我的代码中复制游乐场操作，（我认为）看起来像这样：

```
function fusionRequest(methodType, sql, oAuthFields) {
  OAL.googleAuth(oAuthFields);
  var options =
    {
      oAuthUseToken : "always",
      oAuthServiceName : 'fusiontables',
      method : "POST",
      payload : "sql=INSERT INTO {fusionId} (Heading) VALUES (ONE)",
      contentType : "application/json"
    };
Logger.log(options)
  var fetchResult = UrlFetchApp.fetch(oAuthFields.queryUrl, options);
  return JSON.parse(fetchResult.getContentText());  
} 
```

我一直认为这也可能是内容类型的问题，但我不知所措。请帮忙。

**更新 #1** 通过使用三亚的建议，我能够让请求在 OAuth Playground 中工作。但是，我仍在为代码中的请求而苦苦挣扎。运行代码时我收到重复的授权请求（或调试时出现一般 OAuth 错误）。根据我之前的经验[，](https://stackoverflow.com/questions/14970059/getting-google-apps-script-to-authorize-fusion-table-api/15460718)我相信这意味着我的有效载荷仍然存在问题。对此的任何建议将不胜感激。

```
var oAuthFields = {
  'clientId' : '523606257547.apps.googleusercontent.com',
  'scope' : 'https://www.googleapis.com/auth/fusiontables',
  'fetchUrl' : 'https://www.googleapis.com/fusiontables/v1/',
  'clientSecret' : 'L-f8DgwK4rs7Qmw9k5IFL7lZ',
  'fusionId' : '1b4kT_aYRfNBy8ZPtSZqhQUqVSVIYj_QWiBmjXXI',
  'service' : 'fusiontables',
  'queryUrl' : 'https://www.googleapis.com/fusiontables/v1/query/'
};
function fusionRequest(methodType, sql, oAuthFields) {
  OAL.googleAuth(oAuthFields);
  var options =
    {
      oAuthUseToken : "always",
      oAuthServiceName : 'fusiontables',
      method : "POST",
      payload : "sql=INSERT INTO {fusion id} (\'Heading\') VALUES (\'ONE\')",
      contentType : "application/x-www-form-urlencoded"
    };
  var fetchResult = UrlFetchApp.fetch(oAuthFields.queryUrl, options);
  return JSON.parse(fetchResult.getContentText());  
} 
```

对于上下文，googleAuth() 函数和该函数的整体布局与我用来在融合表中添加列的函数相同（有效）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:19:38.967

文档有问题，缺少一些细节。

**您可以在请求 url**中使用 sql=... 参数。ContentType 标头通常是 application/json 但 API 也可能接受其他 ContentType。在这种情况下，您的 URL 长度限制为 2048 个字符。

您还可以**在 POST body 中**使用 sql=... 。在这种情况下，您必须将**ContentType 设置为 application/x-www-form-urlencoded**。您在 1 个请求中限制为 500 个 INSERT 语句。

另一种选择是使用 importRows 方法。在这里，您将使用**CSV 作为 POST 正文**。在这种方法中，您会受到 100MB 上传数据的限制。**ContentType 必须是 "application/octet-stream"**。请注意：网址与上述网址不同： https: [//www.googleapis.com/upload/fusiontables/v1/tables/tableId/import](https://www.googleapis.com/upload/fusiontables/v1/tables/tableId/import)。此外，如果您在正文中提供非 UTF-8 字符，则必须提供*&encoding=...* url 参数此处的更多详细信息：[importRows 参考](https://developers.google.com/fusiontables/docs/v1/reference/table/importRows "导入行参考")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T20:28:59.680

成功！经过大量研究，我已经解决了这个问题。这不是有效负载或 contentType 问题（事实上，我发现 .fetch 自动默认为“application/x-www-form-urlencoded”编码）。问题在于授权。我使用 James Ferreira 的 Fusion Table Library 作为模型，并将其插入`Logger.log(UrlFetchApp.getRequest(url, fetchArgs))`到`UrlFetchApp.fetch(url, fetchArgs).getContentText()`我的代码和库中。

```
//log entry for library
{oAuthServiceName=fusion, useIntranet=false, followRedirects=true, oAuthUseToken=always, payload=sql=INSERT INTO 1b4kT_aYRfNBy8ZPtSZqhQUqVSVIYj_QWiBmjXXI ('Heading', 'Heading 2') VALUES ('NONE','TWO'), method=POST, validateHttpsCertificates=true, contentType=application/x-www-form-urlencoded, url=https://www.google.com/fusiontables/api/query}

//log entry for my code
{oAuthServiceName=fusiontables, useIntranet=false, followRedirects=true, oAuthUseToken=always, payload=sql=INSERT+INTO+1b4kT_aYRfNBy8ZPtSZqhQUqVSVIYj_QWiBmjXXI+('Heading',+'Heading+2')+VALUES+('NONE','TWO'), method=POST, validateHttpsCertificates=true, contentType=application/x-www-form-urlencoded, url=https://www.googleapis.com/fusiontables/v1/query} 
```

然后，我将工作库的日志与我自己的日志进行了比较，发现了三个不同之处。

1.  我认为是 sql 语句的编码差异（“INSERT INTO”与“INSERT+INTO”）。
2.  请求的“服务”参数不同（“fusion”与“fusiontables”）。
3.  qpi 查询网址不同。（“www.google.com/fusiontables/api/query”与“www.googleapis.com/fusiontables/v1/query”）。

经过一些实验，我确定...

1.  假定的编码与我的错误无关。
2.  服务参数也无关紧要。我在各种文档中都看到过，其中任何一个似乎都有效。
3.  令人沮丧的是，这就是问题所在。这很令人沮丧，因为[api 文档](https://developers.google.com/fusiontables/docs/v1/using#insertRow)说要使用那个不起作用的那个。显然，www.googleapis.com/fusiontables/v1/query 用于 OAuth2.0。OAuthConfig（我在 GAS 中使用的内置授权工具）尚未迁移到 2.0，因此存在文档失效。[我已在此处](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2580)提交了迁移 OAuthConfig 的功能请求。如果您也希望它得到解决，请给该线程一些爱。

# php - 如何在 Ubuntu 中设置 php 的代理？

> ID：15698348
> 
> 赞同：0
> 
> 时间：2013-03-29T06:15:40.790
> 
> 标签：php, proxy

我在我的大学网络上，它使用带有身份验证的代理服务器来浏览互联网。

我正在尝试使用从网站获取数据`html_get_contents`，但在终端上运行脚本会给我这个错误：

> `PHP Warning: file_get_contents(http://www.google.com/): failed to open stream:` `Network is unreachable in /var/www/api/get_contents.php on line 2`

我用来执行此操作的代码如下：

```
<?php
    $contents = file_get_contents("http://www.google.com/");
    echo $contents;
?> 
```

看来我需要设置代理`php`才能获取内容，我在哪里设置呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:00:59.503

使用[卷曲](http://php.net/curl)。

在[http://www.php.net/manual/en/function.curl-setopt.php](http://www.php.net/manual/en/function.curl-setopt.php)设置选项：“CURLOPT_PROXYAUTH”、“CURLOPT_PROXYPORT”、“CURLOPT_PROXYTYPE”

# php - 是否可以根据国家将多个域指向同一个站点

> ID：15698350
> 
> 赞同：0
> 
> 时间：2013-03-29T06:15:58.100
> 
> 标签：php, .htaccess, dns, web-hosting

例如。

**如果我在印度打开网站，那么 url 应该是 www.xyz.in
，如果我在美国打开网站，那么 url 应该是 www.xyz.us**

所以两个域必须显示相同的内容。是否可以？否则会有一些关于重复内容的问题。请指导我。谢谢你。

是否有可能通过 php、htaccess 或 jquery 脚本实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:19:37.637

您需要设置 A 记录以将这些域指向同一台机器。然后，在 apache（我假设 apache）中，你有你的 ServerName 指令，也设置了一个 ServerAlias。

```
ServerName www.xyz.in
ServerAlias www.xyz.us 
```

ServerAlias 也可能包含通配符：

```
ServerAlias www.xyz.* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:20:04.303

这可能不是您想要的，但是，如果您可以访问域的两个 A 记录，您可以将它们都指向同一个服务器 IP，这样两者之间的内容是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T06:24:16.413

您可以在手机上执行此操作：

[http://code.google.com/p/geo-location-javascript/](http://code.google.com/p/geo-location-javascript/)

此外，本文还讨论了如何使用 IP 地址和[Maxmind GeoIP 数据库](http://www.maxmind.com/en/home)：

> 要找出某个电话号码的来源，您可以使用电话簿。要找出 IP 的来源，您可以使用 Maxmind GeoIP 数据库。Maxmind 还提供了一个可以在网站上使用的 JavaScript 解决方案：

[http://coding.smashingmagazine.com/2010/03/08/entering-the-wonderful-world-of-geo-location/](http://coding.smashingmagazine.com/2010/03/08/entering-the-wonderful-world-of-geo-location/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T16:42:04.427

首先，您必须选择一个主域。如@joeframbach 所述，更新您的 A 记录。

使用 Maxmind 或其他一些 GeoIP 数据库跟踪用户国家代码。然后将用户重定向到他们的国家域。

```
if ( country == "us" ) {
    header('Location: http://www.xyz.us/');
} 
```

# sublimetext2 - 在点上触发自动完成

> ID：15698357
> 
> 赞同：2
> 
> 时间：2013-03-29T06:16:55.760
> 
> 标签：sublimetext2, sublimetext3

例如，对于 Python 范围，当我键入 .(dot) 时如何触发自动完成弹出窗口？

* * *

为了解决@skuroda 评论，我将扩展问题：

`"auto_complete": true`如果在首选项中设置（默认设置），则在按下任何字符时触发 ST 中的自动完成。我觉得这很烦人，因为我不希望它在单键按下时触发，所以我把它关掉了。

`html_completions.py`只检查哪个是当前字符的前一个字符，并提供完成列表，但不会更改自动完成行为或设置触发它的内容。

OTOH，有`auto_complete_triggers`偏好，但这并不能解决我的问题，因为它取决于`auto_complete`偏好：

*   如果`auto_complete`首选项设置为 false，则定义的触发器`auto_complete_triggers`不会触发完成
*   如果它设置为 true，那么我会再次在按下任何键时自动完成，而不仅仅是像大多数 Python 感知编辑器所做的那样

另一个可接受的解决方案是，如果我可以定义一些阈值，例如 4 个字符，以便自动完成不会显示在自动按下的单个键上，而是在 4 个字符之后显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T05:19:57.377

您可以编写一个简单的插件来获得该阈值效果。

```
import sublime
import sublime_plugin

class MyEventListener(sublime_plugin.EventListener):
    def on_query_completions(self, view, prefix, locations):
        if len(prefix) < 4:
            return ([], sublime.INHIBIT_WORD_COMPLETIONS | sublime.INHIBIT_EXPLICIT_COMPLETIONS)
        else:

            return [] 
```

此外，请尝试将以下内容添加到特定于语法的设置 ( `Preferences -> Settings - More -> Syntax Specific - User`)。我相信它应该给你你想要的点运算符的行为。

```
"auto_complete_selector": "- source, comment",
"auto_complete_triggers": [ {"selector": "source.python", "characters": "."} ] 
```

我只对这两种解决方案进行了最低限度的测试，所以如果我能澄清任何事情，请告诉我。

# jquery - 使用jquery隐藏类名中包含空格的div

> ID：15698360
> 
> 赞同：6
> 
> 时间：2013-03-29T06:17:36.457
> 
> 标签：jquery, html

```
<div class="rcbScroll rcbWidth rcbNoWrap" style="height: 200px; width: 100%; overflow: auto"> </div> 
```

这是我的div。我想使用类名隐藏 div。我不能像其中的空格那样做类名。它只是一类。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T06:20:45.140

类名中不能有空格。因此，您必须将其视为 2 个类名。

例如：`class="word1 word2"`

可以通过以下方式进行选择：

```
var myVar = $('.word1.word2'); 
```

在您的特定情况下，它变为：

```
$('.rcbScroll.rcbWidth.rcbNoWrap').hide(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T06:20:30.170

空格表示多个类名，您可以使用这些类中的任何一个来隐藏`div`.

例子：

```
$(".rcbScroll").hide() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T06:19:02.770

您可以使用点来连接多个选择器，并以字符`classes`分隔。`space`

**[现场演示](http://jsfiddle.net/TtWZn/1/)**

```
$(".rcbScroll.rcbWidth.rcbNoWrap").hide(); 
```

# php - SalesForce 查询结果问题 - PHP Toolkit

> ID：15698362
> 
> 赞同：2
> 
> 时间：2013-03-29T06:18:06.120
> 
> 标签：php, salesforce, soql

我正在尝试使用 PHP API 查询我的 SalesForce 数据库。我正在成功检索结果，但是它们在很大程度上是无用的。在对结果执行 print_r 时，我从以下查询中收到这些结果：

询问：

```
$query = "SELECT C.Id, C.FirstName, C.LastName, C.Email FROM Contact C WHERE C.Email = '*******@gmail.com'"; 
$response = $client->query($query); 
```

$response->records 的示例**print_r输出：**

```
标准类对象 (
    [类型] => 联系方式
    [Id] => 数组
        (
            [0] => ######
            [1] => ######
        )

    [任何] => NameTest*********@gmail.com
)

```

我希望在输出对象中看到一个 [fields] 元素，但是我只将我的字段视为一个字符串，在这个 [any] 元素中没有分隔符。我正在使用 partner.wsdl.xml 并且在将数据推送到 SF 时没有问题，只能检索。任何想法如何获取 [fields] 元素或至少 [any] 元素中的分隔符？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-17T17:04:27.150

我与同样的问题作斗争。我最终让它使用以下代码：

```
$query = "SELECT C.Id, C.FirstName, C.LastName, C.Email FROM Contact C WHERE C.Email = '*******@gmail.com'";

$response = $mySforceConnection->query($query);

foreach ($response as $record) {
    $sObject = new SObject($record);
    print_r($sObject);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-21T10:55:55.073

```
$query = "SELECT C.Id, C.FirstName, C.LastName, C.Email FROM Contact C WHERE C.Email = '*******@gmail.com'";

$response = $mySforceConnection->query($query);

    foreach ($response as $record) {
    $sObject = new SObject($record);

    echo $sObject->fields->FirstName;
    echo $sObject->fields->LastName;
    echo $sObject->fields->Email;
    echo $sObject->Id;  //(Id will show like this)

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T08:30:55.413

看来您要返回的是 a`stdClass`而不是`SObject`. 这应该为您自动发生，但请尝试将记录显式传递给`new SObject()`构造函数。像这样的东西（如果`records`实际上是一个数组，则需要将其更改为循环）：

```
new SObject($response->records); 
```

现在，您应该可以调用`->fields`结果了。

至于`[any]`不显示分隔符，这是因为它们是 XML 标记并且您正在浏览器中查看它，所以标记被呈现为 HTML 并消失。尝试查看页面的 HTML 源代码，您应该会看到它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T04:50:03.307

值得一提的是，我能够通过使用 API 的“retrieve”方法和“query”方法来检索字段。我使用查询方法来获取销售人员 ID，因为您可以在查询中指定搜索条件，然后使用查询方法中的特定 ID 的检索功能。似乎不是最有效的，但它可以完成工作。

请参阅“检索记录”部分。

[http://wiki.developerforce.com/page/Getting_Started_with_the_Force.com_Toolkit_for_PHP](http://wiki.developerforce.com/page/Getting_Started_with_the_Force.com_Toolkit_for_PHP)

# c# - 处理图片框

> ID：15698363
> 
> 赞同：0
> 
> 时间：2013-03-29T06:18:06.480
> 
> 标签：c#, .net, visual-studio-2010, c++-cli

我在 C++/CLI 中使用 Winform，我有`pictureBox1`并且我正在尝试编译以下代码，但它失败了：

```
pictureBox1->Image->Dispose(); 
```

编译器告诉`Dispose is not a member of System::Drawing::Image`我尝试在 C# 中使用它并且它可以工作：

```
pictureBox1.Image.Dispose(); 
```

我使用 MS Visual Studio 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:24:37.587

请尝试执行以下操作，

```
 delete pictureBox1->Image;   // Dispose the existing bitmap, if any 
```

# sql - 从表中删除多条记录

> ID：15698367
> 
> 赞同：-1
> 
> 时间：2013-03-29T06:18:45.113
> 
> 标签：sql, sql-server, stored-procedures

我正在使用食堂类型的数据库系统并尝试开发存储过程。

```
empcode  time            date                  item
------------------------------------------------------------- 
005153  08:45:03    05/10/2012 12:00:00 AM    BREAKFAST  ****
005153  08:45:04    05/10/2012 12:00:00 AM    BREAKFAST  ****
005153  13:48:47    05/10/2012 12:00:00 AM    LUNCH
005153  17:40:33    05/10/2012 12:00:00 AM    BREAKFAST 
```

标记的记录是关注的区域。我只想从中选择一条记录。这应该针对时隙来完成。有几个员工，每个人都有不同的早餐时间段。选定的员工有两个早餐时段。因此，它应该从一个时隙中挑选一个。

输出应该是这样的。

```
empcode  time            date                  item
------------------------------------------------------------- 
005153  08:45:03    05/10/2012 12:00:00 AM    BREAKFAST  
005153  13:48:47    05/10/2012 12:00:00 AM    LUNCH
005153  17:40:33    05/10/2012 12:00:00 AM    BREAKFAST 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:27:46.830

尝试这个 ：-

```
With cte as 
(
Select *,
row_number() over (partition by datepart(minute,[time]),[date] order by empcode ) rn
from Employee
)
Select * from cte where rn=1 order by [time] 
```

[SQL FIDDLE](http://sqlfiddle.com/#!3/8aa40/3)中的演示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:01:34.360

**[SQL FIDDLE DEMO](http://sqlfiddle.com/#!3/88729/2)**

基本上你需要找到可能的重复记录并选择其中之一。您可以使用**rank over**，在您的情况下，它应该**按**[date] 和 [item]**按**时间排序，如果您想选择 dup 的较早记录作为输出，则使用默认升序，否则，使用 DESC。

```
 WITH cte 
AS
(
   SELECT *,
          rank() over (partition BY Date,Item ORDER BY time ) rn
   FROM Employee
)
SELECT [empcode],[time],[date],[item]
FROM cte WHERE rn=1
ORDER BY [date],[time] 
```

# php - Zend 框架重写模式 css, javascript

> ID：15698370
> 
> 赞同：1
> 
> 时间：2013-03-29T06:19:08.037
> 
> 标签：php, .htaccess, zend-framework

我的帽子访问：

```
addDefaultCharset UTF-8
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /
RewriteCond $1 !^(index\.php|uploads|robots\.txt|favicon\.ico)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php [L]
</IfModule> 
```

我在根目录中的 index.php

```
define('RUNNING_FROM_ROOT', true);
include 'public/index.php'; 
```

所有请求都重定向到 index.php，然后这个 INDEX.PHP 需要 public/index.php - 所以应用程序可以工作，但有一个问题是 css、javascript 文件无法加载，因为它们是也重定向了，如何解决这个问题？

默认情况下，它们应该链接到 mysite.com/public/css/style.css，但它们链接到 mysite.com/css/style.css - 这不存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:33:43.887

尝试这样的事情：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

在这种情况下，如果文件大小大于 0 (RewriteCond %{REQUEST_FILENAME} -s)，您只需获取请求的文件 (RewriteRule ^.*$ - [NC,L])，符号链接 (RewriteCond %{REQUEST_FILENAME } -l) 或目录 (RewriteCond %{REQUEST_FILENAME} -d)。在所有其他情况下，您将重写 index.php (RewriteRule ^.*$ index.php [NC,L])

# 3d - 结合 three.js 和 KineticJS - 3D 立方体

> ID：15698371
> 
> 赞同：3
> 
> 时间：2013-03-29T06:19:15.853
> 
> 标签：3d, three.js, kineticjs

我正在尝试将 3D 立方体添加到 Kinetic JS 画布以显示 x、y、z 旋转。我发现这篇文章[http://www.toncodes.net/blog/combining-three-js-and-kineticjs](http://www.tonicodes.net/blog/combining-three-js-and-kineticjs)。我使用的是 3.8 版，当我尝试使用 Kinetic JS 的 4 版按照示例进行操作时，出现此错误，

```
 Unable to get property 'appendChild' 
```

任何建议，以解决它或在画布中包含 3D 立方体的更好方法。

完整的项目[http://jsfiddle.net/user373721/hXw6D/1/](http://jsfiddle.net/user373721/hXw6D/1/)

我找到了这个完美的例子[http://html5example.net/entry/html5-canvas/html5-canvas-pre3d-rotating-cube](http://html5example.net/entry/html5-canvas/html5-canvas-pre3d-rotating-cube)，不幸的是它是基于 pre3d.js 的，我不知道如何与 Kinetic JS 画布集成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T13:46:11.197

因此，我设法从链接的博客文章中修复了我的示例，请在此处查看结果：http: [//toncodes.net/sandbox/html5/kthree/index.htm](http://tonicodes.net/sandbox/html5/kthree/index.htm)。

与我上一篇文章相比，有几件事发生了变化：

**动力学初始化现在以不同的方式完成：**

```
stage = new Kinetic.Stage({
    container: "container",
    width: 700,
    height: 700
}); 
```

**此外，您应该`canvas`提供 HTML5 提供的元素，而不是 Kinetic 围绕它的元素：**

```
renderer = new THREE.CanvasRenderer({canvas: layer3D.getCanvas().getElement()}); 
```

我还修复了您的 jsFiddle：http: [//jsfiddle.net/hXw6D/3/](http://jsfiddle.net/hXw6D/3/)，请查看。您忘记添加另一个id 为*container*`div`的元素。

# perl - 如何使用perl在excel单元格中添加两行字符串？

> ID：15698376
> 
> 赞同：0
> 
> 时间：2013-03-29T06:19:50.973
> 
> 标签：perl, excel, formatting

我为从csv文件到excel表的witer数据编写了一个perl脚本，我得到了输出文件，但问题是我的标题比单元格下方的数据长一点，所以我需要**将冗长的字符串拆分为标题中的多行细胞本身**。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:07:26.423

您可以使用[`set_text_wrap`](http://search.cpan.org/~jmcnamara/Excel-Writer-XLSX/lib/Excel/Writer/XLSX.pm#set_text_wrap%28%29)Excel::Writer::XLSX 的方法进行自动换行。

# java - 如何使用过滤器执行输出编码以防止 XSS？

> ID：15698381
> 
> 赞同：3
> 
> 时间：2013-03-29T06:20:14.477
> 
> 标签：java, security, xss, servlet-filters

我在 servlet 中使用以下代码：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    PrintWriter out=response.getWriter();
    response.setContentType("text/html");

    out.println("<html>");
    out.println("<body>");
    out.println("<script>alert(1)</script>");
    out.println("</body>");
    out.println("</html>");
} 
```

过滤器的以下代码：

```
public class SampleFilter implements Filter {
  protected FilterConfig config;

  public void init(FilterConfig config) throws ServletException {
    this.config = config;
  }

  public void destroy() {
  }

  public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)
      throws ServletException, IOException {
      long startTime = System.currentTimeMillis();
    ServletResponse newResponse = response;

    if (request instanceof HttpServletRequest) {
        System.out.println("in filter if1");
      newResponse = new CharResponseWrapper((HttpServletResponse) response);
    }
    System.out.println("after filter if1");
    chain.doFilter(request, newResponse);
    long elapsed = System.currentTimeMillis() - startTime;
    if (newResponse instanceof CharResponseWrapper) {
        System.out.println("in filter if2");
      String text = newResponse.toString();
      if (text != null) {
        text = SampleFilter.HTMLEntityEncode(text);//.toUpperCase();
        response.getWriter().write(text);
      }
    }
    System.out.println("after filter if2");
    config.getServletContext().log(" took " + elapsed + " ms");
    System.out.println(elapsed);
  }

  private static String HTMLEntityEncode(String input) {

        StringBuffer sb = new StringBuffer();

        for (int i = 0; i < input.length(); i++) {

          char ch = input.charAt(i);

          if (Character.isLetterOrDigit(ch) || Character.isWhitespace(ch)) {

            sb.append(ch);

          } else {

            sb.append("&#" + (int)ch + ";");

          }

        }

        return sb.toString();

  } 
```

}

我想在浏览器中获取以下显示数据：

```
<script>alert(1)</script> 
```

而是我得到

```
<html>
<body>
<script>alert(1)</script>
</body>
</html> 
```

在浏览器中。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T10:12:19.293

在尝试防止 XSS 攻击时，您必须将有效代码与潜在危险部分与有效表达式分开。有不同的技术可以实现这一点：

**转义绑定数据：**在这种情况下，您必须使用某种模板技术。模板中定义的任何内容都被认为是安全的。在最简单的情况下，所有绑定数据都被认为是危险的，因此会被转义。一个使这个简单的解决方案是[Snippetory](http://www.jproggy.org/snippetory/)。（是的，我开发了它。您可以从[Sourceforge](http://sourceforge.net/projects/snippetory/files)或[maven repo](http://search.maven.org/#search%7Cgav%7C1%7Cg%3a%22org.jproggy%22%20AND%20a%3a%22snippetory%22/)获得它）模板可能如下所示：

```
 <html>
   <body>
     $attack
     $text
   </body>
 </html> 
```

然后绑定代码可能如下所示：

```
Template page = Syntaxes.FLUYT_X.readResource("template.html")
    .encoding(Encodings.html);
page.set("attack", "<script>alert(0)</script>");
page.set("text", "text <--> escaping");
page.render(response.getWriter()); 
```

然而，缺点是整个输出处理必须以正确的方式完成。但我认为对于严肃的项目，这是最重要的方式。

现在有些方法可以在处理后使用，但通常与绑定数据的转义结合使用，以在 Stackoverflow 上实现诸如编辑器字段之类的复杂事物：

**白名单：**本质上，您分析数据（可能使用 html 解析器）并转义不属于您放在白名单上的标签的所有内容。并删除您不允许的所有属性。这非常安全，但也非常严格。另外它非常复杂，所以我不能在这里提供一个例子。

**黑名单：**几乎一样，只是你让不在你的 vlack 名单上的东西。如果你忘记了一些危险的攻击仍然可能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T01:16:48.490

不要以艰难的方式去做。只需使用[JSP](https://stackoverflow.com/tags/jsp/info)生成 HTML 输出。JSP 标准标签库 ( [JSTL](https://stackoverflow.com/tags/jstl/info) ) 提供内置的方法来将用户控制的数据从`<c:out>`标签和`${fn:escapeXml()}`函数风格的 XSS 攻击漏洞中逃脱。

```
<p>Welcome, <c:out value="${user.name}" />!</p>
...
<input type="text" name="foo" value="${fn:escapeXml(param.foo)}" /> 
```

它们会像by这样转义[预定义的 XML 实体](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML)，使其变得完全无害。`<``&gt;`

[Servlet](https://stackoverflow.com/tags/servlets/info)不是为生成 HTML 输出而设计的。它们的设计目的是控制请求/响应。

### 也可以看看：

*   [JSP/Servlet Web 应用程序中的 XSS 预防](https://stackoverflow.com/questions/2658922/xss-prevention-in-java/2658941#2658941)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T10:24:41.253

在您的情况下，使用填充是不可能的，因为它无法将合法内容与任何已注入的内容分开。可以通过过滤输入而不是输出来应用针对 xss 的启发式黑盒防御。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-15T13:44:34.327

我已经为 Jersey REST API 实现了 XSS 过滤器。可以轻松提取代码并将其应用于标准 Java 过滤器。

大多数人建议对输出进行编码，但由于我们的数据可以通过 JavaScript API 访问，并且无法保证我们的客户会过滤掉 XSS 漏洞，我们选择过滤掉输入中的 XSS 漏洞。这种方法的另一个好处是过滤只进行一次，而不是每次输出数据。

请注意，过滤器需要与 JSR 303 的 @SafeHtml 注解结合使用，以确保正确过滤 POST 数据的内容。

我已经在我的博客上记录了这一点：http: [//codehustler.org/blog/jersey-cross-site-scripting-xss-filter-for-java-web-apps/](http://codehustler.org/blog/jersey-cross-site-scripting-xss-filter-for-java-web-apps/)

# android - 无法在android中打开keycharmap文件

> ID：15698384
> 
> 赞同：4
> 
> 时间：2013-03-29T06:20:29.803
> 
> 标签：android

4.0 版本完美运行，但如果我必须运行 2.2 则不会发生任何事情。我没有从网络服务获得任何数据。我在下面提到了日志猫消息：

```
03-29 11:22:34.671: W/KeyCharacterMap(18884): Can't open keycharmap file
03-29 11:22:34.671: W/KeyCharacterMap(18884): Error loading keycharmap file '/system/usr/keychars/sec_touchscreen_.kcm.bin'. hw.keyboards.65538.devname='sec_touchscreen '
03-29 11:22:34.671: W/KeyCharacterMap(18884): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
03-29 11:29:57.765: W/KeyCharacterMap(19340): Can't open keycharmap file
03-29 11:29:57.765: W/KeyCharacterMap(19340): Error loading keycharmap file '/system/usr/keychars/sec_touchscreen_.kcm.bin'. hw.keyboards.65538.devname='sec_touchscreen '
03-29 11:29:57.765: W/KeyCharacterMap(19340): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
03-29 11:33:34.218: W/ActivityThread(19627): Application com.doodleblue.dinein is waiting for the debugger on port 8100...
03-29 11:33:34.226: I/System.out(19627): Sending WAIT chunk
03-29 11:33:34.429: I/System.out(19627): Debugger has connected 
```

请给我任何解决方案？

# ios - 检查Uitextview中的负值？

> ID：15698387
> 
> 赞同：0
> 
> 时间：2013-03-29T06:20:44.687
> 
> 标签：ios, objective-c, uitextview

我创建了一个计算器。在那个计算器中，我使用 UITextview 来显示计算。现在，我必须检查总计算是否为负数，例如 (-234.00)。所以，我必须给出警报消息。我如何检查 UITextview 中是否存在负值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:22:23.880

试试这样

```
 if( [textview.text hasPrefix:@"-"])
{
//do whatever you want.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:26:50.803

您可以通过以下方式检查值是否在字符串中（直接从 UITextView 作为 NSSTring 获取）

```
if([textView.text hasPrefix:@"-"]){

    //you alert goes here

} 
```

此外，如果您从一些数字和 wnat 计算以检查该值是否为负，那么

```
if(calcuatedNumber < 0){ //this is not NSNumber for NSNumber use [... integerValue]

   //you alert goes here

} 
```

# c++ - 从向量中获取浮点值

> ID：15698395
> 
> 赞同：1
> 
> 时间：2013-03-29T06:21:35.213
> 
> 标签：c++, objective-c, ios5, vector, xcode4

我对 C++ 的经验很少或根本没有，所以问题可能听起来很奇怪，问题是我有一个包含浮点值的 std::vector，我想通过迭代它来从中提取浮点值。

向量的定义代码如下：

```
template <typename T, size_t feature_number>
  T vector_distance(const boost::array<T, feature_number>& v1,
                    const boost::array<T, feature_number>& v2);

  template <typename T = double, size_t feature_number=3>
  class CLASSNAME
  {
  public:
    typedef boost::array<T, feature_number> FeatureVector;
    typedef std::vector<FeatureVector> Features;
    ... 
```

我通过以下方式使用它：

```
FeatureTypeDTW::Features mfcc_features_a = METHODTHATRETURNSVECTOR();

    for (int s = 0; s < (int) mfcc_features_a.size(); s++)
    {
        float MYFLOAT = mfcc_features_a[s];
    } 
```

但我得到的编译错误是：

> 从 'boost::array (float, 7)' 到 'float' 没有可行的转换

有关如何转换的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:28:38.310

`mfcc_features_a`是 类型`Features`，是`vector`s的一个`FeatureVector`；后者又是`boost::array<T, feature_number>`.

简而言之，您正在尝试将 a 分配`boost::array<T, feature_number>`给 a `float`。现在，假设模板参数`T`是`FeatureTypeDTW`一个`float`（或可转换为浮点数的东西），这应该可以工作。

```
float MYFLOAT = mfcc_features_a[s][0];  // assigns first element of boost::array
                                        // to MYFLOAT 
```

# ios - iOS：检测 SIRI 设备

> ID：15698396
> 
> 赞同：0
> 
> 时间：2013-03-29T06:21:40.020
> 
> 标签：ios, ios5, ios6, siri

如何识别设备是否有 SIRI？

我试图使用 [[UIDevice currentDevice] systemVersion] 返回 iOS 6.0 版。

有些设备可以具有相同的 iOS 版本，但具有不同的 SIRI 功能。

哪个是识别 SIRI 设备的最佳解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:25:07.677

您可以检测设备，而不是 iOS 版本。

目前支持的设备有：

*   iPhone（4S 及更高版本）
*   iPod Touch（第 5 代）
*   iPad（第 3 代及更新机型）
*   iPad Mini（所有世代）

所以我只会写下不支持设备的黑名单并检测它们。

为此，您可以使用[此处描述的方法](https://stackoverflow.com/questions/448162/determine-device-iphone-ipod-touch-with-iphone-sdk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:28:30.473

在这种情况下，我无法使用快速的 Google 搜索找到任何官方 API，但与往常一样，**功能检测优于版本检测。**所以这就是我所做的，不确定App Store是否允许这样做：

```
 BOOL hasSiri = [[NSFileManager defaultManager] fileExistsAtPath:@"/System/Library/Assistant"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T07:19:31.463

试试这个以获取设备详细信息

[[UIDevice currentDevice] platformType] // 例如：UIDevice4GiPhone

[[UIDevice currentDevice] platformString] // 例如：@"iPhone 4G"

# android - 如何在 UI 中保持按钮静态

> ID：15698398
> 
> 赞同：1
> 
> 时间：2013-03-29T06:21:52.587
> 
> 标签：android, android-layout, android-ui

**1）** 我有这个用户界面，当出现软键盘时，屏幕底部的按钮必须是静态的。即现在它来了

**前**

![选择DR之前](../Images/1bf25f83134134e2f09dae304c69c790.png)

**后**

![选择DR后](../Images/267abc461ee1a85f47218c0580a6bcc6.png)

**2）** 当我在软键盘上按下输入时，下一个编辑文本字段必须成为焦点。（即）在 K1 和我按 enter 时，焦点必须转移到 K2 并且必须可见。

**编辑** 这就是我获得编辑文本字段的方式

```
dr_e=(EditText)findViewById(R.id.dr_editText);
            InputMethodManager imm = (InputMethodManager)getSystemService(
                      Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(dr_e.getWindowToken(), 0);
            k1_e=(EditText)findViewById(R.id.k1_editText);
            k2_e=(EditText)findViewById(R.id.k2_editText);
            al_e=(EditText)findViewById(R.id.al_editText);
            alconst_e=(EditText)findViewById(R.id.al_const_editText); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T06:35:56.527

要为 EditText 显示软键盘：

```
EditText editText = (EditText) findViewById(R.id.myEdit);
InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
// only will trigger it if no physical keyboard is open
mgr.showSoftInput(editText, InputMethodManager.SHOW_IMPLICIT); 
```

隐藏 EditText 的软键盘：

```
InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
mgr.hideSoftInputFromWindow(editText.getWindowToken(), 0); 
```

看更多

参考这个链接：[http](http://www.androidpeople.com/android-hide-virtual-keyboard-through-code/) ://www.androidpeople.com/android-hide-virtual-keyboard-through-code/ ，[关闭/隐藏Android软键盘](https://stackoverflow.com/questions/1109022/how-to-close-hide-the-android-soft-keyboard)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T07:01:03.877

为了定义哪个视图应该获得下一个焦点（比如下一个焦点到下面的视图）尝试下一个

[android:nextFocusDown](http://developer.android.com/reference/android/view/View.html#attr_android%3anextFocusDown)。有关完整指南，请搜索[“焦点处理](http://developer.android.com/reference/android/view/View.html)”部分

现在是下一部分，在最后一个编辑文本（即按钮之前的那个）处，您将希望软键盘上的“输入”按钮直接充当结果按钮。对于该设置[onEditorActionListener](http://developer.android.com/reference/android/widget/TextView.OnEditorActionListener.html)并覆盖 onEditorAction(TextView v, int actionId, KeyEvent event) 方法。检查 actionId 是否为 actionSend 并以编程方式单击您的“结果”按钮。

为此，您的最后一个 edittext 应该具有属性 android:imeOptions="actionSend" 并以编程方式单击按钮使用 Button.performCLick()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T06:40:35.363

你能在清单文件中检查一下吗

```
android:windowSoftInputMode="adjustUnspecified"; 
```

我会给你调整窗口大小和相关值。

更新：-

```
android:imeOptions="actionNext"; 
```

在你的xml中试试这个，你的第一个edittext在哪里。像这样

```
 <EditText
    android:id="@+id/et"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:singleLine="true"
    android:imeOptions="actionNext" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T08:17:51.117

下一个编辑文本字段聚焦，无法查看的主要原因是每次出现软键盘时都会弹出结果按钮。到那个用途

```
this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN); 
```

在类的 onCreate() 方法中。

# r - R中唯一值的累积计数

> ID：15698399
> 
> 赞同：19
> 
> 时间：2013-03-29T06:22:01.317
> 
> 标签：r, unique, cumulative-sum

我的数据集的简化版本如下所示：

```
depth value
   1     a
   1     b
   2     a
   2     b
   2     b
   3     c 
```

我想创建一个新的数据集，对于每个“深度”值，我将拥有从顶部开始的唯一值的累积数量。例如

```
depth cumsum
 1      2
 2      2
 3      3 
```

关于如何做到这一点的任何想法？我对 R 比较陌生。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-29T09:43:27.083

我发现这是一个仔细使用`factor`和设置的完美案例。`levels`我将`data.table`在这里使用这个想法。确保您的`value`列是`character`（不是绝对要求）。

*   第 1 步：通过仅获取行`data.frame`来转换为。`data.table``unique`

    ```
    require(data.table)
    dt <- as.data.table(unique(df))
    setkey(dt, "depth") # just to be sure before factoring "value" 
    ```

*   第 2 步：转换`value`为 a`factor`并强制转换为`numeric`. 确保*自己设置级别*（这很重要）。

    ```
    dt[, id := as.numeric(factor(value, levels = unique(value)))] 
    ```

*   第 3 步：将键列设置`depth`为子集，然后*选择最后一个值*

    ```
     setkey(dt, "depth", "id")
     dt.out <- dt[J(unique(depth)), mult="last"][, value := NULL]

    #    depth id
    # 1:     1  2
    # 2:     2  2
    # 3:     3  3 
    ```

*   第 4 步：由于深度增加的行中的所有值都应**至少**具有前一行的值，因此您应该使用它`cummax`来获得最终输出。

    ```
    dt.out[, id := cummax(id)] 
    ```

**编辑：**上面的代码用于说明目的。实际上，您根本不需要第三列。这就是我编写最终代码的方式。

```
require(data.table)
dt <- as.data.table(unique(df))
setkey(dt, "depth")
dt[, value := as.numeric(factor(value, levels = unique(value)))]
setkey(dt, "depth", "value")
dt.out <- dt[J(unique(depth)), mult="last"]
dt.out[, value := cummax(value)] 
```

这是一个更棘手的示例以及代码的输出：

```
df <- structure(list(depth = c(1, 1, 2, 2, 3, 3, 3, 4, 5, 5, 6), 
                value = structure(c(1L, 2L, 3L, 4L, 1L, 3L, 4L, 5L, 6L, 1L, 1L), 
                .Label = c("a", "b", "c", "d", "f", "g"), class = "factor")), 
                .Names = c("depth", "value"), row.names = c(NA, -11L), 
                class = "data.frame")
#    depth value
# 1:     1     2
# 2:     2     4
# 3:     3     4
# 4:     4     5
# 5:     5     6
# 6:     6     6 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-09-01T20:43:20.860

dplyr 尝试。

```
df %>%
  #group_by(group)%>% # if you have a third variable and you want to achieve the same results for each group
  mutate(cum_unique_entries = cumsum(!duplicated(value))) %>%
  group_by(depth) %>% # add group variable for more layers
  summarise(cum_unique_entries = last(cum_unique_entries)) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-29T10:19:54.313

这是另一个尝试：

```
numvals <- cummax(as.numeric(factor(mydf$value)))
aggregate(numvals, list(depth=mydf$depth), max) 
```

这使：

```
 depth x
1     1 2
2     2 2
3     3 3 
```

它似乎也适用于@Arun的示例：

```
 depth x
1     1 2
2     2 4
3     3 4
4     4 5
5     5 6
6     6 6 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-29T15:03:14.790

[这可以通过使用sqldf](http://sqldf.googlecode.com)包的单个 SQL 语句以相对简洁的方式编写。假设`DF`是原始数据框：

```
library(sqldf)

sqldf("select b.depth, count(distinct a.value) as cumsum
    from DF a join DF b 
    on a.depth <= b.depth
    group by b.depth"
) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-29T06:37:44.953

一个好的第一步是创建一个`TRUE`or列`FALSE`，它`TRUE`用于每个值的第一个以及`FALSE`该值的以后出现。这可以使用以下方法轻松完成`duplicated`：

```
mydata$first.appearance = !duplicated(mydata$value) 
```

重塑数据最好使用`aggregate`. 在这种情况下，它表示对 的`first.appearance`每个子集中的列求和`depth`：

```
newdata = aggregate(first.appearance ~ depth, data=mydata, FUN=sum) 
```

结果将如下所示：

```
 depth first.appearance
1     1  2
2     2  0
3     3  1 
```

不过，这仍然不是一个累积总和。为此，您可以使用该`cumsum`功能（然后摆脱旧列）：

```
newdata$cumsum = cumsum(newdata$first.appearance)
newdata$first.appearance = NULL 
```

回顾一下：

```
mydata$first.appearance = !duplicated(mydata$value)
newdata = aggregate(first.appearance ~ depth, data=mydata, FUN=sum)
newdata$cumsum = cumsum(newdata$first.appearance)
newdata$first.appearance = NULL 
```

输出：

```
 depth cumsum
1     1      2
2     2      2
3     3      3 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-29T06:45:31.463

这是另一个使用`lapply()`. 使用`unique(df$depth)`唯一值的向量，`depth`然后对于每个这样的值子集，只有那些`value`等于`depth`或小于特定`depth`值的值。然后计算唯一`value`值的长度。此长度值存储在 中`cumsum`，然后`depth=x`将给出特定深度级别的值。将`do.call(rbind,...)`其作为一个数据框。

```
do.call(rbind,lapply(unique(df$depth), 
               function(x)
             data.frame(depth=x,cumsum=length(unique(df$value[df$depth<=x])))))
  depth cumsum
1     1      2
2     2      2
3     3      3 
```

# php - 无法提交带有挪威字符的表单

> ID：15698401
> 
> 赞同：0
> 
> 时间：2013-03-29T06:22:12.583
> 
> 标签：php, mysql

当我尝试向 MySQL 提交带有挪威字符的文章和表格时，结果返回空白。我不能简单地使用Æ、Ø或Å。有什么想法可以解决这个问题吗？我将简单地处理几乎所有表格`$_POST[]`。ISO 以 HTML 格式设置。

我不知道这是否重要，但服务器是基于 Xampp 构建的。

如果您需要更具体的信息，请告诉我。

欣赏任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:22:19.183

检查 html、php 和 mysql（以及服务器配置）中的所有字符集。可能在某处或默认值中有 utf-8/utf8（或其他）。

或者更好地使用 utf-8/utf8。

# android - 在 Android 的 Sherlock 中的操作栏上添加 ListNavigationCallbacks？

> ID：15698405
> 
> 赞同：0
> 
> 时间：2013-03-29T06:22:57.727
> 
> 标签：android, navigation, actionbarsherlock

我正在使用 Sherlock Library 的 ActionBar 开发一个应用程序。我想在 ActionBar 的右上角添加一个项目列表，即 ActionBar 中的**ListNavigation**。

目前我正在使用以下代码：

```
public class MainActivity extends SherlockFragmentActivity {
    ActionBar mActionBar;
    ViewPager mPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        /** Getting a reference to action bar of this activity */
        mActionBar = getSupportActionBar();

        /** Set tab navigation mode */
        mActionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        SpinnerAdapter mSpinnerAdapter = ArrayAdapter.createFromResource(
                this, 
                R.array.locations, 
                android.R.layout.simple_spinner_dropdown_item);

        mActionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
        mActionBar.setListNavigationCallbacks(mSpinnerAdapter, this);

        /** Getting a reference to ViewPager from the layout */
        mPager = (ViewPager) findViewById(R.id.pager);

        /** Getting a reference to FragmentManager */
        FragmentManager fm = getSupportFragmentManager();      

        /** Defining a listener for pageChange */
        ViewPager.SimpleOnPageChangeListener pageChangeListener = new ViewPager.SimpleOnPageChangeListener(){
            @Override
            public void onPageSelected(int position) {              
                super.onPageSelected(position);
                mActionBar.setSelectedNavigationItem(position);             
            }

        };

        /** Setting the pageChange listner to the viewPager */
        mPager.setOnPageChangeListener(pageChangeListener);

        /** Creating an instance of FragmentPagerAdapter */
        MyFragmentPagerAdapter fragmentPagerAdapter = new MyFragmentPagerAdapter(fm);

        /** Setting the FragmentPagerAdapter object to the viewPager object */
        mPager.setAdapter(fragmentPagerAdapter);

        mActionBar.setDisplayShowTitleEnabled(true);

        /** Defining tab listener */
        ActionBar.TabListener tabListener = new ActionBar.TabListener() {

            @Override
            public void onTabUnselected(Tab tab, FragmentTransaction ft) {              
            }

            @Override
            public void onTabSelected(Tab tab, FragmentTransaction ft) {
                mPager.setCurrentItem(tab.getPosition());

            }

            @Override
            public void onTabReselected(Tab tab, FragmentTransaction ft) {
            }
        };

        /** Creating Android Tab */
        Tab tab = mActionBar.newTab()
                .setText("Android")
                .setIcon(R.drawable.android)
                .setTabListener(tabListener);

        mActionBar.addTab(tab);

        /** Creating Apple Tab */
        tab = mActionBar.newTab()
                .setText("Apple")
                .setIcon(R.drawable.apple)
                .setTabListener(tabListener); 
        mActionBar.addTab(tab);  
        tab = mActionBar.newTab()
                .setText("Apple-2")
                .setIcon(R.drawable.apple)
                .setTabListener(tabListener); 

        mActionBar.addTab(tab);  
        tab = mActionBar.newTab()
                .setText("Apple-3")
                .setIcon(R.drawable.apple)
                .setTabListener(tabListener); 
        mActionBar.addTab(tab);  

    }
} 
```

1）但我在`mActionBar.setListNavigationCallbacks(mSpinnerAdapter, this);` 上下文中遇到错误，这在这里不起作用。

2）我不知道如何在单击此按钮时弹出列表。

3）另外，当我为导航列表实现这三行代码时

```
SpinnerAdapter mSpinnerAdapter = ArrayAdapter.createFromResource(
                    this, 
                    R.array.locations, 
                    android.R.layout.simple_spinner_dropdown_item);

            mActionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
            mActionBar.setListNavigationCallbacks(mSpinnerAdapter, this); 
```

我的标签被隐藏了。请建议我帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:28:38.990

1) 您的活动是否实现了 OnNavigationListener？似乎不是，并且您将对 Activity 实例的引用传递给需要 OnNavigationListener 的 setListNavigationCallbacks()。

2）我不确定单击此按钮是什么意思。

3) 您的标签被隐藏了，因为您指定的是 NAVIGATION_MODE_LIST 而不是 NAVIGATION_MODE_TABS。您只能将一个或另一个作为 ActionBar 的一部分。

如果您想要两个选项卡和下拉菜单，您可以做的是在 ActionBar 中使用 NAVIGATION_MODE_LIST，然后让您的活动中的片段包含一组选项卡。看看 TabHost 类。

# java - 使用 jfilechooser 的问题

> ID：15698408
> 
> 赞同：2
> 
> 时间：2013-03-29T06:23:22.777
> 
> 标签：java, swing, web-applications, jfilechooser

我`JFileChooser`在我的网络项目中使用，以便客户端可以从服务器下载某些文件，但是在测试期间，每当我单击调用`jfilechooser`它的按钮时，它就会在服务器系统上而不是在客户端系统上弹出，为什么会发生这种情况？我该如何解决，下面是我使用的代码。

```
JFileChooser jfc = new JFileChooser();
jfc.setDialogTitle("Enter the path to save .pdf file");
jfc.setFileView(new FileView() {
jfc.setMultiSelectionEnabled(false);
jfc.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
int status = jfc.showDialog(null, "OK"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:31:09.907

I wanted to do the same in my web app, and also tried frist with JFileChooser, also got the problem as you. Then I solved this other way using "content - disposition". How it works: User click on button/link in my app, controller fetches something from database and write it to outputstream. User is asked if he wants to open this file or save it on computer. Here is how I done that in my app:

```
@Controller
public class ExportPhonebook extends HttpServlet {

private static final long serialVersionUID = 1L;

@Autowired
private PhoneBookService phoneBookSer;

private void setResponseHeaderTXT(HttpServletResponse response) {
    response.setContentType("text/plain; charset=UTF-8");
    response.setHeader("content-disposition", "attachment; filename=imenik.txt" );
} 

@RequestMapping(value = "/exportPhonebook.html", method = RequestMethod.POST)
public void exportPhonebook(Model model, HttpServletResponse response, HttpServletRequest request) {

    List<User> listOfAllUsers = phoneBookSer.fetchAllUsers();
    String imenik = "";

    for (User user : listOfAllUsers) {
        imenik = imenik + user.getPrezime() + " " + user.getIme() + ", Organizacijska jedinica: " + user.getOrganizacijskaJedinica() + 
        ", Telefon: " + user.getTelefon() + ", Faks: " + user.getTelefaks() + ", Email: " + user.getEmail() +
         ", Lokacija: " + user.getLokacija() + ", Kat: " + user.getKat() + ", Soba: " + user.getBrojSobe() + ";\r\n" ;
    }

        try {
            setResponseHeaderTXT(response);
            OutputStream outputStream = response.getOutputStream();
            outputStream.write(imenik.getBytes(Charset.forName("UTF-8")));
            outputStream.flush();
            outputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
} 
```

I have done similar thing with pdf files:

```
@Controller
public class ExportPhonebook extends HttpServlet {

private static final long serialVersionUID = 1L;

@Autowired
private PhoneBookService phoneBookSer;

private void setResponseHeaderPDF(HttpServletResponse response) {
    response.setContentType("application/pdf");
    response.setHeader("content-disposition", "attachment; filename=imenik.pdf" );
} 

@RequestMapping(value = "/exportPhonebook.html", method = RequestMethod.POST)
public void exportPhonebook(Model model, HttpServletResponse response, HttpServletRequest request) {

        try {
            setResponseHeaderPDF(response);
            Document document = new Document();
            ByteArrayOutputStream baosPDF = new ByteArrayOutputStream();
            PdfWriter pdfWriter = null;
            pdfWriter = PdfWriter.getInstance(document, baosPDF);
            PageNumbersEventHelper events = new PageNumbersEventHelper();
            pdfWriter.setPageEvent(events);

            document.open();
            addMetaData(document);
            addTitlePage(document);
            ServletContext servletContext = request.getSession().getServletContext();

            String relativeWebPath = "img/image.png";
            String absoluteDiskPath = servletContext.getRealPath(relativeWebPath);
            Image image = Image.getInstance(absoluteDiskPath);
            image.setAbsolutePosition(450, 700);
            document.add(image);
            addContent(document);
            document.close();
            pdfWriter.close();
            OutputStream os = response.getOutputStream();
            baosPDF.writeTo(os);
            os.flush();
            os.close();
        } catch (Exception e) {
              e.printStackTrace();
        }
    }
} 
```

I didn't copy several methods in which I create content for my pdf file, but I think that you don't need that.

# c++ - 如何让地图容器使用不同的构造函数创建一个新对象？

> ID：15698412
> 
> 赞同：0
> 
> 时间：2013-03-29T06:23:52.787
> 
> 标签：c++, stl

当我们尝试使用键访问映射容器中的对象而该对象不存在时，它会使用默认构造函数自动构造。

我想知道有没有办法使用另一个构造函数，例如，一个参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:58:19.777

我个人认为这种行为很奇怪，但如果你真的想这样做，我建议明确写下你想要的：

例如：

```
typedef std::map<int, std::string> MapType;

std::string FindSomething(int key, const std::string& extraParameter)
{
    MapType::iterator It = TheMap.find(key);

    if (It == TheMap.end())
    {
        TheMap.insert(std::make_pair(key, extraparameter));

        return extraParameter;
    }
    else
    {
        return It->second;
    }
} 
```

不要依赖自动插入。

# javascript - 根据用户选择禁用和启用 jquery 选项卡

> ID：15698413
> 
> 赞同：0
> 
> 时间：2013-03-29T06:23:53.670
> 
> 标签：javascript, jquery, select, tabs

我正在使用 jquery 选项卡来呈现一些数据，我想给用户一个选项来选择她/他是否希望它显示为选项卡或一个接一个。当用户从下拉列表中选择她/他想要查看的方式时，我删除/添加了 ui-tabs 类，但这种方法似乎不起作用。还有一种解决方法可以在每次调用时销毁和创建它，但我认为这不是一个好方法。任何人都可以建议我该怎么做...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:26:26.067

你有没有尝试过

```
$('#tabsDiv').tabs('disable', 1); //where 1 is the tab number 
```

或在特定选项卡上应用一个类

```
.ui-tabs-disabled {
    display: none; 
} 
```

请参阅[此](http://www.remotesynthesis.com/post.cfm/adding-and-removing-tabs-with-jquery-and-jquery-ui)链接以获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:32:05.567

你可以这样做

```
$( "#tabs" ).tabs( "destroy" ); 
```

# algorithm - 函数 f(x) = x^2+x+1 的下界？

> ID：15698414
> 
> 赞同：-4
> 
> 时间：2013-03-29T06:23:54.200
> 
> 标签：algorithm, math, recursion, time-complexity

> 函数是 f(x) = x^2+x+1
> 
> > ```
> >  **Upper Bound**
> >  when x>0,
> >               x^2 >= x^2    
> >   similarly,  x >= x^2   
> >    and,    
> >               1 >= x^2 
> > ```

```
 therefore,  f(x)=x^2+x+1  >= x^2+x^2+x^2   (all sufficient large value of x)
                              >= 3x^2     , where c=3 

                           f(x)= O(x^2) 
```

> ```
>  **Lower Bound**
> 
>         f(x)=x^2+x+1 >= x^2
>                   f(x) = Ω(x^2) 
> ```

**> 但是我们可以把它的下限写成 Ω(x) 和 Ω(1) 因为**

> ```
>  f(x)=x^2+x+1  >= x    (all sufficient large value of x)
>                       f(x)  = Ω(x)  ?? 
> ```
> 
> 和
> 
> ```
>  f(x)=x^2+x+1 >= 1   (all sufficient large value of x)
>                       f(x)  = Ω(1)   ????? 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:30:27.143

是的，我们绝对可以把它写成 w(n) 甚至 w(1)。然而，这根本没有意义，因为我们正在寻找**最高的 Ω**。（Ω 将用小欧米茄而不是这个大欧米茄来表示`c . g(n) < f(n)`。如果我们使用 Ω，那意味着`c . g(n) <= f(n)`）。

`c . g(n) < f(n)`意味着：不存在`c`将 g(n) 扩大为 的常数`g(n) = f(n) for all n >= 0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T06:38:44.653

**好吧，写Ω(1)**或 **Ω(x)**可能效率不高 ，即使它是正确的。Ω(x) 定义了一个**渐近紧密的下界**。所以最好使用定义**渐近不紧下界的****ω**符号。因此，在这个特定问题中，**ω(x)**或**ω(1)**比 Ω(x) 或 Ω(1) 更好地定义了运行时间复杂度。

# javascript - 在 IE 页面加载时提前调用 javascript 函数

> ID：15698420
> 
> 赞同：0
> 
> 时间：2013-03-29T06:24:32.523
> 
> 标签：javascript, html, internet-explorer, onload

我在我的 HTML 中使用了一些复选框。加载页面时，我想根据选中的框进行一些操作。问题是 IE 在设置框的值之前调用了我的 onLoad 函数。（当然在 FF 中工作正常）

代码：

```
<script language='JavaScript' type = "text/javascript">

    window.onload = new function() {
        alert("wat");
    }

</script> 
```

调试时，我看到收到警报时尚未检查这些框，但在解除警报后，它们会按应有的方式进行检查。

加载完成后如何让我的javascript代码执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T06:41:15.730

看起来这个`new`关键字混淆了 IE`window.onload`事件。在处理函数之前删除`new`关键字：

```
<script language='JavaScript' type = "text/javascript">

    window.onload = function() {
        alert("wat");
    }

</script> 
```

# java - 如何在 webview 中添加上下文菜单

> ID：15698422
> 
> 赞同：0
> 
> 时间：2013-03-29T06:24:39.373
> 
> 标签：java, webview, contextmenu, javafx-2, javafx

我想在 webview 或 fxpanel 上添加上下文菜单。在右键单击 web 视图而不是复制并重新加载时，应添加另一个上下文菜单。

```
 by default it shows reload or copy after text selection . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:50:31.990

Jira 目前有 2 个问题。您不能添加到默认菜单或替换它。可能在 Java 8 中修复。

# php - PHP函数is_int()有什么用？

> ID：15698423
> 
> 赞同：0
> 
> 时间：2013-03-29T06:24:42.907
> 
> 标签：php, function, logic

我只是想知道为什么 php 有一个像`is_int()`. 文档说

> 测试变量是数字还是数字字符串（例如表单输入，它始终是字符串）

我确信没有人需要检查静态分配的变量的类型。所以有人请告诉我会有什么情况，这个功能`is_int()`真的有用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:31:41.620

完整的理解解决方案....

这是代码

```
 <?php
  $values = array(23, "23", 23.5, "23.5", null, true, false);
  foreach ($values as $value) {
   echo "is_int(";
  var_export($value);
    echo ") = ";
       var_dump(is_int($value));
     }
       ?> 
```

这是输出

```
 is_int(23) = bool(true)
     is_int('23') = bool(false)
    is_int(23.5) = bool(false) 
   is_int('23.5') = bool(false) 
     is_int(NULL) = bool(false)
    is_int(true) = bool(false)
      is_int(false) = bool(false) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T06:38:11.780

考虑一个用户表单输入：

```
$_POST['integer'] = "3";
$integer = +$_POST['integer']; // convert to a number
var_dump(is_int($integer)); // bool(true)

$_POST['float'] = "3.5";
$float = +$_POST['float']; // convert to a number
var_dump(is_int($float)); // bool(false) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T06:31:45.350

此功能在以下情况下很有用，

```
$a = 5;

//some functionality
function passbyref(&$b)
{
    $b = "45";
}

passbyref($a);

if(is_int($a))
{
   print "Yes it is int";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T06:31:51.433

它查找给定变量的类型是否为`integer`。

这是我找到的示例：

```
$values = array(23, "23", 23.5, "23.5", null, true, false);
    foreach ($values as $value) {
        echo "is_int(";
        var_export($value);
        echo ") = ";
        var_dump(is_int($value));
    } 
```

上面的示例将输出：

```
is_int(23) = bool(true)
is_int('23') = bool(false)
is_int(23.5) = bool(false)
is_int('23.5') = bool(false)
is_int(NULL) = bool(false)
is_int(true) = bool(false)
is_int(false) = bool(false) 
```

了解更多：[点击这里](http://php.net/manual/en/function.is-int.php)

# python - 在python中的单元测试期间覆盖装饰器

> ID：15698425
> 
> 赞同：8
> 
> 时间：2013-03-29T06:25:27.670
> 
> 标签：python, django, django-unittest

我有一个我正在装饰的基于 django 类的视图。不幸的是，装饰器进行外部调用以进行状态检查，这超出了单元测试的范围，因此我想在单元测试期间覆盖装饰器以不做任何事情。这是我的装饰器：

装饰器.py

```
def status_check(func):
    @wraps(func)
    def wrapped(request, *args, **kwargs):

        uri = settings.SERVER_URI
        status_code = None
        bad_status = [404, 500]

        try:
            response = requests.head(uri)
        except requests.ConnectionError as err:
            LOGGER.error('Server is hosed! Oh Noes! Error: %s ' % (err))
            raise Http404
        except Exception as err:
            LOGGER.error('Some crazy stuff is happening. Its Bad. '
                         'Error: %s' % (err))
            raise Http404

        status_code = response.status_code
        if not status_code or status_code in bad_status:
            LOGGER.error('Awww Snap! Server is not happy: %s' % (status_code))
            raise Http404
        return func(request, *args, **kwargs)
    return wrapped 
```

视图.py

```
class HandleFoo(DetailView):
    @method_decorator(status_check)
    def post(self, request):
        # do stuff here 
```

测试.py

```
class RunTest(TestCase):
    def test_post(self):
        post_data = json.dumps({'stuff': 'vodka', 'things': 'tonic'})
        resp = self.client.post(self.foo_uri,
                                post_data,
                                content_type='application/json',
                               )
        self.assertEqual(resp.status_code, 200) 
```

那么有没有办法让我覆盖装饰器或者我可以完全绕过它？我对此感到很困惑。

**编辑** 尝试使用来自 krak3n 的以下内容模拟请求：

```
@patch('app.views.method_decorator.status_check', lambda func: func)
@patch('app.views.status_check', lambda func: func)
@patch('app.decorators.status_check', lambda func: func)
@patch('app.views.HandleFoo.post', lambda func: func) 
```

最后一种方法让我是迄今为止最接近的，但它最终抛出了一个堆栈跟踪：

```
Traceback (most recent call last):
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/mock.py", line 1201, in patched
    return func(*args, **keywargs)
  File "/Users/squiddly/projects/tests/app/tests.py", line 165, in test_post
    content_type='application/json',
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/test/client.py", line 463, in post
    response = super(Client, self).post(path, data=data, content_type=content_type, **extra)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/test/client.py", line 297, in post
    return self.request(**r)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/test/client.py", line 406, in request
    response = self.handler(environ)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/test/client.py", line 111, in __call__
    response = self.get_response(request)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/core/handlers/base.py", line 178, in get_response
    response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/core/handlers/base.py", line 224, in handle_uncaught_exception
    return callback(request, **param_dict)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/utils/decorators.py", line 91, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/views/defaults.py", line 41, in server_error
    return http.HttpResponseServerError(template.render(Context({})))
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/template/base.py", line 140, in render
    return self._render(context)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/test/utils.py", line 65, in instrumented_test_render
    return self.nodelist.render(context)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/template/base.py", line 830, in render
    bit = self.render_node(node, context)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/template/debug.py", line 74, in render_node
    return node.render(context)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/template/loader_tags.py", line 124, in render
    return compiled_parent._render(context)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/test/utils.py", line 65, in instrumented_test_render
    return self.nodelist.render(context)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/template/base.py", line 830, in render
    bit = self.render_node(node, context)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/template/debug.py", line 74, in render_node
    return node.render(context)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/template/loader_tags.py", line 156, in render
    return self.render_template(self.template, context)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/template/loader_tags.py", line 138, in render_template
    output = template.render(context)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/template/base.py", line 140, in render
    return self._render(context)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/test/utils.py", line 65, in instrumented_test_render
    return self.nodelist.render(context)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/template/base.py", line 830, in render
    bit = self.render_node(node, context)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/template/debug.py", line 74, in render_node
    return node.render(context)
  File "/Users/squiddly/envs/testenv/lib/python2.7/site-packages/django/template/base.py", line 1185, in render
    _dict = func(*resolved_args, **resolved_kwargs)
  File "/Users/squiddly/projects/tests/app/templatetags/app_extras.py", line 40, in get_data
    if request.session.has_key('start_time'):
AttributeError: 'str' object has no attribute 'session' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T10:13:56.420

我认为你将不得不进入黑暗`Mock`的地下世界，但一旦你了解它（如果你还没有），黑暗的地下世界就会变成一片明亮的蓝色天堂般的嘲弄天空。

您可以使用 to 的`patch`模块`Mock`来修补此装饰器，以便您使用它的视图可以变得更可测试：[http](http://www.voidspace.org.uk/python/mock/patch.html) ://www.voidspace.org.uk/python/mock/patch.html 。就我个人而言，我以前没有尝试过嘲笑装饰者，但它*应该可以*工作......

```
@patch('python.path.to.decorator', new_callable=PropertyMock)
def my_test(self, decorator_mock):
    # your test code 
```

试一试。

您可以在此处阅读有关该`patch`模块的`Mock`信息：[http ://www.voidspace.org.uk/python/mock/patch.html](http://www.voidspace.org.uk/python/mock/patch.html)

## 编辑

`new_callable=PropertyMock`修补装饰器可能不是正确的做法。

也许尝试：

```
@patch('python.path.to.decorator', lambda: func: func)
def my_test(self):
    # your test code 
```

这在理论上应该修补装饰器，所以它只是返回函数而不是你在`wrapped`.

# python - 将三个列表合并到一个字典中

> ID：15698427
> 
> 赞同：4
> 
> 时间：2013-03-29T06:25:32.943
> 
> 标签：python, list, dictionary, merge

我需要将三个列表合并到一个字典中。这些列表来自读取我格式化的 txt 文件，以下是该文件的片段：

```
maker =['Horsey', 'Ford', 'Overland', 'Scripps-Booth']

year = ['1899', '1909', '1911', '1913']

model = ['Horseless', 'Model T', 'OctoAuto', 'Bi-Autogo'] 
```

进入以下：

```
car_dict = {'Horsey':1899,'Horseless','Ford':1909,'Model T','Overland' : 1911, 'OctoAuto', 'Scripps-Booth' : 1913, 'Bi-Autogo'} 
```

这是我所做的：

```
def car_data_merge(car_maker,car_model,car_year):
    car_dict = {}
    car_merge = []

    car_dict = defaultdict(partial(defaultdict,list))

    for (car_maker,car_model,car_year) in zip(car_maker,car_model,car_year):
         car_dict[car_year][car_model].append(car_maker)
    print(car_dict) 
```

当我输入这个时，我得到：

```
{'Horsey': defaultdict(<class 'list'>, {'1899': ['Horseless']}) 
```

并非列表中的所有数据都显示出来，我不希望`defaultdict`显示。

当我尝试以下操作时：

```
def car_data_merge(car_maker,car_data):
    car_dict = {}
    car_merge = []
    car_merge = zip(car_maker,car_data)  
    car_dict = dict(car_merge)
    print(car_dict)

    ###   car_data holds both year and model   #### 
```

仅显示部分数据：

```
'Horsey':'Horseless',':1909,'Model T 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T06:48:00.970

您在正确的轨道上使用`zip`，但请注意：

> [返回的列表在长度上被截断为最短参数序列的长度。](http://docs.python.org/2/library/functions.html#zip)

如果您对此感到满意，您可以将数据压缩到元组列表中，压缩密钥，然后将所有内容交给`dict()`.

如果您想处理缺失值，请检查`itertools` [`izip_longest`(Python 2)](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)或[`zip_longest`(Python 3)](http://docs.python.org/3/library/itertools.html#itertools.zip_longest) where

> [如果可迭代的长度不均匀，则使用*fillvalue*填充缺失值。](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)

```
try:
    # Python 2
    from itertools import izip_longest
    zip_longest = izip_longest
except ImportError:
    # Python 3
    from itertools import zip_longest

from pprint import pprint

def main():
    maker =['Horsey', 'Ford', 'Overland', 'Scripps-Booth', 'FutureX', 'FutureY']
    year = ['1899', '1909', '1911', '1913', '20xx']
    model = ['Horseless', 'Model T', 'OctoAuto', 'Bi-Autogo']

    car_data = dict(zip(maker, zip(year, model)))
    car_data_longest = {mk: (yr, md) for mk, yr, md in zip_longest(maker, year, model)}

    pprint(car_data)
    pprint(car_data_longest) 
```

输出：

```
{'Ford': ('1909', 'Model T'),
 'Horsey': ('1899', 'Horseless'),
 'Overland': ('1911', 'OctoAuto'),
 'Scripps-Booth': ('1913', 'Bi-Autogo')}
{'Ford': ('1909', 'Model T'),
 'FutureX': ('20xx', None),
 'FutureY': (None, None),
 'Horsey': ('1899', 'Horseless'),
 'Overland': ('1911', 'OctoAuto'),
 'Scripps-Booth': ('1913', 'Bi-Autogo')} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T06:46:24.687

这个怎么样：

```
>>> maker =['Horsey', 'Ford', 'Overland', 'Scripps-Booth']
>>> year = ['1899', '1909', '1911', '1913']
>>> model = ['Horseless', 'Model T', 'OctoAuto', 'Bi-Autogo']
>>> d = dict(zip(maker,zip(year,model)))
{'Overland': ('1911', 'OctoAuto'), 'Horsey': ('1899', 'Horseless'), 'Scripps-Booth': ('1913', 'Bi-Autogo'), 'Ford': ('1909', 'Model T')} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-29T06:32:09.830

听起来你想要的是：

```
{maker: (year, model) for maker, model, year in zip(car_maker,car_model,car_year)} 
```

这会给你：

```
{'Horsey':(1899,'Horseless'),'Ford':(1909,'Model T'),'Overland':(1911,'OctoAuto')...} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-29T06:28:49.920

这是你要找的东西吗？

```
>>> car_dict = {maker[i]:[year[i], model[i]] for i in xrange(len(maker))}
>>> car_dict
{'Overland': ['1911', 'OctoAuto'], 'Horsey': ['1899', 'Horseless'], 'Scripps-Booth': ['1913', 'Bi-Autogo'], 'Ford': ['1909', 'Model T']} 
```

# javascript - 使用 window.open() 时保持在当前选项卡上

> ID：15698428
> 
> 赞同：1
> 
> 时间：2013-03-29T06:25:50.493
> 
> 标签：javascript, jquery

我在代码的另一个选项卡中打开一个窗口，但问题是焦点转移到打开的新选项卡，我希望焦点保持在当前窗口上

我已经搜索过了，但没有找到任何解决方案，我理解的 focus() 函数在打开弹出窗口时很有用。

我正在使用：window.open() 函数

```
window.open("myurl"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:31:33.010

[http://www.pageresource.com/jscript/jwinopen.htm](http://www.pageresource.com/jscript/jwinopen.htm)也[检查一下](http://richardneililagan.com/2011/08/jquery-open-external-links-in-new-tabs/)

您不能直接控制它，因为它可以由用户配置。您可以尝试可能适用于 Firefox 的“_newtab”，但实际上您不应该依赖打开的新标签。用户可以将他们的浏览器设置设置为在打开弹出窗口时打开新选项卡，或者它可能显示为弹出窗口。这完全取决于浏览器设置。

# c++ - 错误：未在此范围内声明变量

> ID：15698432
> 
> 赞同：3
> 
> 时间：2013-03-29T06:26:08.130
> 
> 标签：c++, c++builder

当我尝试编译下面的代码时，出现以下错误。

```
Error: main.cpp: In function "int main()":
       main.cpp:6: error: "display" was not declared in this scope 
```

**测试1.h**

```
#include<iostream.h>
class Test
{
  public:
    friend int display();
}; 
```

**测试1.cpp：**

```
#include<iostream.h>
int  display()
{
    cout<<"Hello:In test.cc"<< endl;
    return 0;
} 
```

**主文件**

```
#include<iostream.h>
#include<test1.h>
int main()
{
 display();
 return 0;
} 
```

奇怪的是我能够在 unix 中成功编译。我正在使用 gcc 和 g++ 编译器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T06:38:16.723

在将其声明为友元之前，您需要提供该函数的声明。
根据标准，作为朋友的声明不符合实际函数声明的条件。

**C++11 标准 §7.3.1.2 [namespace.memdef]：**
**第 3 段：**

> [...]如果`friend`非本地类中的声明首先声明了一个类或函数，则友元类或函数是最内层封闭命名空间的成员。**直到在该命名空间范围内**（在授予友谊的类定义之前或之后）提供匹配声明之前，通过非限定查找或限定查找都无法找到朋友的名称。[...]

```
#include<iostream.h>
class Test
{
  public:
    friend int display();  <------------- Only a friend declaration not actual declaration
}; 
```

你需要：

```
#include<iostream.h>
int display();            <------- Actual declaration
class Test
{
  public:
    friend int display();     <------- Friend declaration 
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T06:34:27.623

有趣的。看起来in的`friend`声明算作 g++ 中的实际函数声明。`display()``test1.h`

我认为该标准实际上并未强制执行此操作，因此您可能希望为`display()`in添加适当的声明`test1.h`：

```
#include <iostream>

int display();

class Test
{
public:
    friend int display();
}; 
```

# java - 如何在java中为mysql中的数据编写条形图

> ID：15698433
> 
> 赞同：0
> 
> 时间：2013-03-29T06:26:11.000
> 
> 标签：java, bar-chart

我已经使用 xml dom 解析成功地将数据插入到 mysql 中，现在我想在我的条形图上显示 mysql 数据，所以请帮助提供正确的代码。

我的数据库有4列，分别是“姓名”、“学院”、“年级”、“自然”

所以我插入了 4 个不同的名字，在 4 个名字中，有 2 个共享同一所大学。每个都有不同的等级，如好坏和中等。等级也是如此，比如一、二、三等。所以现在我需要为此编写条形图。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:54:49.540

这里我做了一个例子。

*   提取数据库值并存储在数组的`work[]`and`values[]`中。
*   根据您的需要使用容器
*   我用过`JApplet`

![在此处输入图像描述](../Images/d04ffe604ad9f7cbb57adccae8d643f2.png)

```
import java.awt.*;
import javax.swing.JApplet;

public class BarChart extends JApplet
{
    private final  int n=5;
    private String work[];
    private int value[];

    @Override
    public void init()
    {

        work = new String[n];
        value = new int[n];

        work[0] ="name";
        work[1] = "college";
        work[2] = "grade";
        work[3] = "nature";
        work[4] = "extra";

        value[0] = 20;
        value[1] = 10;
        value[2] = 4;
        value[3] = 15;
        value[4] = 5;

    }

    @Override
    public void paint(Graphics g)
    {
        Font font = new Font("Arial",Font.BOLD,15);
        g.setFont(font);
        for(int i  = 0; i < n; i ++)
        {
            g.setColor(Color.BLUE);
            g.drawString(work[i], 20, i * 50 + 30);
            g.setColor(Color.RED);
            g.fillRect(70, i * 50 + 10, value[i], 40);
            g.drawString(String.valueOf(value[i]) + "%", 180, i * 50 + 35);
        }

    }
} 
```

**编辑 ：**

对于您选择的 stmt。，我去谷歌并输入 -`select query msql java` 我得到了这个：

```
+----+------------+-----------+---------------------+----------+------------+
| id | first_name | last_name | date_created        | is_admin | num_points |
+----+------------+-----------+---------------------+----------+------------+
|  2 | Fred       | Flinstone | 2010-06-23 00:00:00 |        0 |       6000 | 
|  3 | Barney     | Rubble    | 2010-06-23 00:00:00 |        0 |       5000 | 
+----+------------+-----------+---------------------+----------+------------+

import java.sql.*;

/**
 * A Java MySQL SELECT statement example.
 * Demonstrates the use of a SQL SELECT statement against a
 * MySQL database, called from a Java program.
 * 
 * Created by Alvin Alexander, http://devdaily.com
 */
public class JavaMysqlSelectExample
{

  public static void main(String[] args)
  {
    try
    {
      // create our mysql database connection
      String myDriver = "org.gjt.mm.mysql.Driver";
      String myUrl = "jdbc:mysql://localhost/test";
      Class.forName(myDriver);
      Connection conn = DriverManager.getConnection(myUrl, "root", "");

      // our SQL SELECT query. 
      // if you only need a few columns, specify them by name instead of using "*"
      String query = "SELECT * FROM users";

      // create the java statement
      Statement st = conn.createStatement();

      // execute the query, and get a java resultset
      ResultSet rs = st.executeQuery(query);

      // iterate through the java resultset
      while (rs.next())
      {
        int id = rs.getInt("id");
        String firstName = rs.getString("first_name");
        String lastName = rs.getString("last_name");
        Date dateCreated = rs.getDate("date_created");
        boolean isAdmin = rs.getBoolean("is_admin");
        int numPoints = rs.getInt("num_points");

        // print the results
        System.out.format("%s, %s, %s, %s, %s, %s\n", id, firstName, lastName, dateCreated, isAdmin, numPoints);
      }
      st.close();
    }
    catch (Exception e)
    {
      System.err.println("Got an exception! ");
      System.err.println(e.getMessage());
    }
  }
} 
```

# grails - 如何覆盖 grails 命令默认脚本

> ID：15698436
> 
> 赞同：0
> 
> 时间：2013-03-29T06:26:22.780
> 
> 标签：grails, grails-2.0, gant

我的 grails 项目依赖于另一个 java 项目，在构建 grails 项目之前，我想构建 java 项目并发布到本地 ivy 存储库。

我想继续使用 grails 命令行模式，所以我想覆盖 grails refresh-dependencies 的默认行为，在解决其他依赖项之前，我想构建和发布 java 项目。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:10:06.820

您可以在这里很好地了解如何使用 GANT 脚本添加来自其他项目的依赖[项](http://grails.org/doc/latest/guide/commandLine.html#creatingGantScripts)

看看“*从其他脚本中引入目标*”

# iphone - 如何在 iPhone 中解析 xml，

> ID：15698439
> 
> 赞同：0
> 
> 时间：2013-03-29T06:26:28.217
> 
> 标签：iphone, ios, xml, xml-parsing

我有包含 xml 响应的字符串，（asmx Web 服务）我正在通过 APXML 库解析 xml。当我得到给我身体标签的根元素时，我不想要身体标签，我想获得根标签而不是子标签中的实际数据..请告诉我如何从中获取数据..谢谢..我的xml是

```
 <?xml version="1.0" encoding="UTF-8" ?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
 <loginFunctionResponse xmlns="http://tempuri.org/">
  <loginFunctionResult>
   <Root xmlns="">
    <child>
     <id>52</id>
     <name>mohsin</name>
   </child>
  </Root>
 </loginFunctionResult>
</loginFunctionResponse>
</soap:Body>
</soap:Envelope> 
```

我的代码是..

```
NSString *resultString=[[NSString alloc] initWithBytes:[resultData bytes] length:resultData.length encoding:NSUTF8StringEncoding];
NSLog(@"result string: %@",resultString);

APDocument *doc = [APDocument documentWithXMLString:resultString];

APElement *rootElement = [doc rootElement];
NSArray *childElement = [rootElement childElements];

for (APElement *chile in childElement) {

    NSLog(@"chid name %@",chile.name);
    NSLog(@"chile value %@",chile.value);
} 
```

这给了我这个结果..

```
 chid name soap:Body
 chile value (null) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T06:31:30.643

`childElements`不是递归的，它只会返回根元素的直接后代。

所以在这种情况下，唯一的子元素是 tag `<loginFunctionResponse xmlns="http://tempuri.org/">`，它的值为 null 因为它没有任何内容，只有一个子元素。

如果你想解析整棵树，你应该递归地调用`childElements`每个孩子，直到你到达叶子（没有孩子的元素）。

# c++ - Priority_queue 问题 内存访问

> ID：15698448
> 
> 赞同：0
> 
> 时间：2013-03-29T06:26:56.153
> 
> 标签：c++, function, memory, priority-queue

我的代码有一些问题。

似乎我只能在特定功能中访问优先级队列的顶部。

我收到此错误：

```
Unhandled exception at at 0x77644B32 in ConsoleApplication5.exe: Microsoft C++ exception: std::bad_alloc at memory location 0x00D7E6A8. 
```

让我举个例子更清楚一点：

如果我做一个

`cout << *nameofmyqueue->top() ;`在一个名为它的函数中`firstFunction`，它会完美地工作。但如果我在 中使用它`otherFunction`，我会得到一个访问内存错误。这是我的代码：（这里有评论它有效，而它没有）

没有问题

```
void Ordinateur::addmessageAEnvoyer(Message* message){ 
```

不适用于

```
void Ordinateur::envoiMessages(){ 
```

任何想法为什么它不起作用？

非常感谢 ！

```
#ifndef _ORDINATEUR_H_
#define _ORDINATEUR_H_

#include "PrioriteMessage.h"
#include "Reseau.h"
#include "Message.h"
#include <queue>
#include<iostream>

using namespace std;

class Ordinateur
{
public:
    Ordinateur();
    Ordinateur(string nom,int adresse,Reseau* adresseReseau);
    ~Ordinateur();

    int getAdresse() const; 
    string getNom()const;
    Reseau* getAdresseReseau() const;

    void addmessageAEnvoyer(Message* message);
    void envoiMessages();
    void recoiMessages(Message* messageRecu);
    void afficherMessagesRecus();
    void afficherOrdinateur(ostream& ostr);
    friend ostream& operator<< (ostream& ostr, Ordinateur& ordinateur );

private:
    int adresse_; 
    string nom_;
    Reseau* adresseReseau_;
    priority_queue<Message*,vector<Message*>,PrioriteMessages> listMessagesAEnvoyer_;
    vector<Message*> messagesRecus_;
};

#endif

`#include"Ordinateur.h"

#include <queue>

Ordinateur::Ordinateur(){
    nom_ = "default";
    adresse_ =  0;
}

Ordinateur::Ordinateur(string nom,int adresse,Reseau* adresseReseau){
    nom_ = nom;
    adresse_ =  adresse;
    adresseReseau_ = adresseReseau;
}

Ordinateur::~Ordinateur()
{
}

int Ordinateur::getAdresse()const{
    return adresse_;
}
string Ordinateur::getNom()const{
    return nom_;
}
Reseau* Ordinateur::getAdresseReseau() const{
    return adresseReseau_;
}

void Ordinateur::addmessageAEnvoyer(Message* message){
    listMessagesAEnvoyer_.push (message);
cout << *listMessagesAEnvoyer_.top(); // NO PRPOBLEM HERE
}

void Ordinateur::envoiMessages(){

    cout << *listMessagesAEnvoyer_.top(); // PROBLEM HERE
    while(!listMessagesAEnvoyer_.empty())
    {

        if (listMessagesAEnvoyer_.top()->getnomDestinataire ()!= "0"){
            adresseReseau_->envoiMessageNom(*listMessagesAEnvoyer_.top(),listMessagesAEnvoyer_.top()->getnomDestinataire ());
        }
        else if (listMessagesAEnvoyer_.top()->getnomDestinataire() == "0")
            adresseReseau_->envoiMessageTous(*listMessagesAEnvoyer_.top());

        listMessagesAEnvoyer_.pop();

    }
}

void Ordinateur::recoiMessages(Message* messageRecu){

    cout << nom_ << " #"<< adresse_<<" " <<" Reception d'un message.."<< endl;
    messagesRecus_.push_back (messageRecu);

}

void Ordinateur::afficherOrdinateur (ostream& ostr){
    ostr << nom_ << " #"<< adresse_<<" ";

}

void Ordinateur::afficherMessagesRecus(){
    cout << nom_ << " #"<< adresse_<<" Affichage des messages recus ("<<messagesRecus_.size ()<<"):"<<endl;
    for (unsigned int i = 0; i < messagesRecus_.size (); i++)
    {
        cout << messagesRecus_[i]<<endl;
    }

}

ostream& operator<<( ostream& ostr, Ordinateur& ordinateur ){

    ordinateur.afficherOrdinateur (ostr);
    return ostr;
}` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:56:09.710

不是真正的答案，而是更多的建议，有望解决您的问题。

鉴于您没有发布 main(...) 或您如何管理消息的生命周期，我建议将消息​​更改为 std::shared_ptr - 这有望使您的问题消失。它还将确定您何时可以删除消息成为非问题。

# python - 对存储在列表中的字符进行分组，以便可以使用正则表达式来解析列表的信息，存储由 Python 中的 GSM 调制解调器接收的数据

> ID：15698454
> 
> 赞同：0
> 
> 时间：2013-03-29T06:27:33.003
> 
> 标签：python, string, list, parsing, gsm

我正在编写代码以使用 python 通过串行端口从连接到我的笔记本电脑的 GSM 调制解调器发送和接收消息。

在我的程序中，我创建了一个名为 phone 的串行对象。

我使用手机读取和写入列表 x，其中存储了我在执行期间获得的 AT 命令、响应和状态报告。

例如，考虑以下检查我的 GSM 调制解调器中 SIM 卡的默认运营商

```
AT+COPS? #AT command

+COPS: 0,0,"VOD" #Response

OK #Status 
```

现在我需要解析我在 x 中收到的信息。

我试图使用正则表达式来解析存储在 x 中的字符串。然而问题在于它将每个字符存储为列表中的单独元素。所以基本上没有字符串。我如何将列表中存在的字符分组为字符串，以便我可以应用正则表达式来解析我的数据并了解发生了什么。

对于上面相同的命令，数据存储在 x 中，如下所示：

```
0 A
1 T
2 +
3 C
4 O
5 P
6 S
7 ?
8 
9 
10 

11 +
12 C
13 O
14 P
15 S
16 :
17  
18 0
19 ,
20 0
21 ,
22 "
23 V
24 O
25 D
26 "
27 
28 

29 
30 

31 O
32 K
33 
34 
```

还是我的方法完全错误？

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:46:31.563

您可以通过执行将列表转换为字符串

```
myRegexableString = "".join(x) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:50:21.633

如果您想从“x”中提取数据，这应该可以。不需要正则表达式。

```
def read_message(x):
    message_list = []
    lines = x.split('\n')
    for line in lines:
        index_past_number = 0
        for i, char in enumerate(line):
            if char.isdigit():
                index_past_number += 1
        line = line[index_past_number:] #add one to ignore the space
        line = line.strip() #strip the newline
        message_list.append(line)
    return ''.join(message_list) 
```

希望这有帮助。

# c++ - C ++中数据类型后的符号'^'是什么意思？

> ID：15698460
> 
> 赞同：0
> 
> 时间：2013-03-29T06:28:00.670
> 
> 标签：c++, class, types, parameters, symbols

当我偶然发现一些 MS 头文件时......我发现了这样的代码

`void App::OnSuspending(Object^ sender, SuspendingEventArgs^ args)`

是的，一个普通的函数头，但请注意参数声明“Object^”，“SuspendingEventArgs^”，我知道它们是某种类，但是在它们每个之后使用“^”有什么用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T06:29:11.963

它不是标准的 C++，它与 .net 兼容并表示 .net 引用类型

# ios - autorelease和runloop和线程的关系？

> ID：15698468
> 
> 赞同：2
> 
> 时间：2013-03-29T06:28:34.277
> 
> 标签：ios, nsthread, autorelease, nsautoreleasepool, runloop

我有一个关于自动释放的问题，现在我有以下代码：

```
int main(int argc, char *argv[]){
@autoreleasepool {
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
}} 
```

文档在 @autoreleasepool{} 的末尾说，标记为 autorelease 的对象将收到一条释放消息。但是 UIApplicationMain 永远不会返回，这意味着流程永远不会到达 @autoreleasepool 的末尾，那么标记为 autorelease 的对象将永远不会被释放，直到应用程序死亡。没有自动释放的意义......

我问过有人说iOS系统会生成一些线程，（你知道，一个线程，一个runloop）。他说runloop会创建自动释放池。所以自动释放对象将在thead或runloop结束时释放. 但是大多数情况我们使用主线程。所以他说的并不能说服我。

什么是使用自动释放的合适时间。它让我很困惑。

我得到另一点，当一个运行循环结束时自动释放对象将被释放（主运行循环将在应用程序的整个生命周期中存在？？）所以我不确定..

任何观点和相关文件将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T04:10:45.097

是的，从技术上讲，`UIApplicationMain`永远不会返回，所以它永远不会到达那个`@autoreleasepool`块的末尾，所以在这种情况下，如果你删除了那个`@autoreleasepool`块，它不会有任何区别（除了可能抱怨它们在没有自动释放池的情况下自动释放的事情）。但是，可以想象一个`main`函数以一种并不总是调用的方式编写`UIApplicationMain`（可能不是在 iOS 应用程序中，而是在一般情况下）；那么它会有所作为。

`@autoreleasepool`始终在每个线程的入口点主体周围放置一个块是一种很好的做法，并且`main`是主线程的入口点。所以为了保持一致性，总是把它放在那里是有意义的。

与您交谈的人所说的是，在内部`UIApplicationMain`，有一个运行循环（一个处理事件的无限循环），并且在每次迭代内部都有一个自动释放池（或者可能每隔几次迭代；这是一个实现细节）。不过，这与自动释放池无关`main`。

# mysql - 如何使用 go 连接到 mysql？

> ID：15698479
> 
> 赞同：5
> 
> 时间：2013-03-29T06:29:12.773
> 
> 标签：mysql, go

我一直在尝试用 go 连接 mysql，但我似乎可以成功。我只是想从表中获取一个值并将其设置为变量并打印它。我缺少的可能只是一些明显的东西

这是来自名为 bankdata 的数据库

```
mysql> select * from accounts ;
+----+----------+-----------------+----------+---------+
| id | username | email           | facebook | twitter |
+----+----------+-----------------+----------+---------+
|  1 | user1    | email1@mail.com | userfb1  | NULL    |
|  2 | user2    | email2@mail.com | NULL     | NULL    |
|  3 | user3    | email3@mail.com | NULL     | NULL    |
+----+----------+-----------------+----------+---------+ 
```

我使用了两个驱动程序，我似乎可以理解它们都有什么问题

使用[go-sql-driver](https://github.com/go-sql-driver/mysql)

```
package main

import (
    "database/sql"
    _ "github.com/Go-SQL-Driver/MySQL"
    "log"
)

const (
    DB_HOST = "tcp(127.0.0.1:3306)"
    DB_NAME = "bankdata"
    DB_USER = /*"root"*/ "bankadmin"
    DB_PASS = /*""*/ "1234"
)

func main() {
    dsn := DB_USER + ":" + DB_PASS + "@" + DB_HOST + "/" + DB_NAME + "?charset=utf8"
    db, err := sql.Open("mysql", dsn)
    if err != nil {
        log.Fatal(err)
    }
    defer db.Close()
    var str string
    q := "select username from bankadmin.accounts where id = 1"
    err = db.QueryRow(q).Scan(&str)
    if err != nil {
        log.Fatal(err)
    }
    log.Println(str)
} 
```

这返回

```
D:\_>go run dbtest.go
2013/03/29 13:14:11 Error 1045: Access denied for user 'bankadmin'@'localhost'
(using password: YES)
exit status 1 
```

密码实际上是正确的，对于用户 root 和 bankadmin，以及在端口 3306 中运行的 mysql。但是，如果我将 DB_HOST 更改为“tcp(127.0.0.1:3000)”或将 127.0.0.1 更改为localhost，它给了我同样的错误。

使用[mymysql 驱动程序](https://github.com/ziutek/mymysql)

```
package main

import (
    "database/sql"
    "fmt"
    _ "github.com/ziutek/mymysql/godrv"
    "log"
    "strconv"
)

const (
    DB_HOST = "tcp(127.0.0.1:3306)"
    DB_NAME = "bankdata"
    DB_USER = "bankadmin"
    DB_PASS = "1234"
)

type User struct {
    Id       int    
    Username string 
    Email    string 
    Facebook string
}

func OpenDB() *sql.DB {
    db, err := sql.Open("mymysql", fmt.Sprintf("%s/%s/%s", DB_NAME, DB_USER, DB_PASS))
    if err != nil {
        panic(err)
        log.Fatal(err)
    }
    return db
}

func UserById(id int) *User {
    db := OpenDB()
    defer db.Close()
    row := db.QueryRow("SELECT id, username, email FROM accounts WHERE id=?", id)
    user := new(User)
    row.Scan(&user.Id, &user.Username, &user.Email, &user.Facebook)
    return user
}

func main() {
    db := OpenDB()
    defer db.Close()
    row := db.QueryRow("SELECT id, username, email, facebook FROM accounts WHERE id=2")
    user := new(User)
    row.Scan(&user.Id, &user.Username, &user.Email, &user.Facebook)
    fmt.Println("id    : " + strconv.Itoa(user.Id) + "\nname  : " + user.Username + "\nemail : \n" + user.Email)

} 
```

这返回：

```
D:\_>go run dbtest.go
id    : 0
name  :
email : 
```

看起来 id 和字符串都是空的，就像它从未从 row.Scan 函数接收到任何值一样。而且我不知道如何确保它们已连接，即使它们没有给我与以前的驱动程序相同的错误

哦，我正在使用 WAMP 附带的 Windows 7、MySQL 5.5.8。

如果我在这篇文章中犯了任何错误，请原谅我。这是我的第一篇文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T20:11:40.400

问题不是你的代码问题是你的mysql配置。您可能拥有正确的用户名和密码，但您可能没有授权该用户使用 tcp 连接到数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-04T21:59:00.287

[![在此处输入图像描述](../Images/206b595cc36e0774c5cc7b383e188721.png)](https://i.stack.imgur.com/dhCqj.png)

正如@Jeremy wall 所提到的，问题出在连接字符串上。我使用的用户名是错误的。要配置设置， 1\. 转到“服务器”选项 2\. 选择管理服务器连接 3\. 选择连接部分 4\. 单击密码部分中的钥匙串按钮并输入新密码

你都准备好了。现在尝试测试连接按钮。当我尝试从 GO 程序访问数据库时，它对我有用。

# excel - excel工作簿中每个工作表的按列分组的总和

> ID：15698481
> 
> 赞同：0
> 
> 时间：2013-03-29T06:29:30.703
> 
> 标签：excel, vba

我有一个 excel 工作簿，其中有许多工作表。每张纸都有一张桌子。现在我想按任何类别从每个工作表组中求和。

表 1

```
prodcutid    quantity

100             2
101             3
102             3
104             4 
```

表2

```
prodcutid    quantity

100             2
101             3
104             4 
```

表 3

```
prodcutid    quantity

101             3
104             4 
```

结果应作为结果表

```
prodcutid    quantity

100             4
101             9
102             3
104             12 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:26:03.847

安装 RDB 合并插件。安装后，您将在“数据”选项卡中获得一个选项。

![在此处输入图像描述](../Images/1d0095038aec532534322f73b6a2fd97.png)

一旦你点击 RDB Merge 图标将出现在屏幕下方。

![在此处输入图像描述](../Images/9480d9b4dbf31ea5a07ac1db61214b29.png)

请按照以下步骤操作。 ![在此处输入图像描述](../Images/64c7fd0875a51babd2d2a5f07b09835d.png)

输出将如下图所示

![在此处输入图像描述](../Images/1b58cfc1d4a1cb514c37bb65bed56a33.png)

在顶部插入一行并添加标题。

枢

![在此处输入图像描述](../Images/d3d671096efb3909eab651ed2b843c30.png).

注意：我的数据是虚拟的。

# netty - Netty 管道没有执行者。发生什么了？

> ID：15698487
> 
> 赞同：0
> 
> 时间：2013-03-29T06:30:49.347
> 
> 标签：netty

例如，Floodlight openflow 堆栈使用 Netty 作为其 IO，它定义了以下 Pipeline 工厂类。

```
public class OpenflowPipelineFactory implements ChannelPipelineFactory {

    protected Controller controller;
    protected ThreadPoolExecutor pipelineExecutor;
    protected Timer timer;
    protected IdleStateHandler idleHandler;
    protected ReadTimeoutHandler readTimeoutHandler;

    public OpenflowPipelineFactory(Controller controller,
                                   ThreadPoolExecutor pipelineExecutor) {
        super();
        this.controller = controller;
        this.pipelineExecutor = pipelineExecutor;
        this.timer = new HashedWheelTimer();
        this.idleHandler = new IdleStateHandler(timer, 20, 25, 0);
        this.readTimeoutHandler = new ReadTimeoutHandler(timer, 30);
    }

    @Override
    public ChannelPipeline getPipeline() throws Exception {
        OFChannelState state = new OFChannelState();

        ChannelPipeline pipeline = Channels.pipeline();
        pipeline.addLast("ofmessagedecoder", new OFMessageDecoder());
        pipeline.addLast("ofmessageencoder", new OFMessageEncoder());
        pipeline.addLast("idle", idleHandler);
        pipeline.addLast("timeout", readTimeoutHandler);
        pipeline.addLast("handshaketimeout",
                         new HandshakeTimeoutHandler(state, timer, 15));
        if (pipelineExecutor != null)
            pipeline.addLast("pipelineExecutor",
                             new ExecutionHandler(pipelineExecutor));
        pipeline.addLast("handler", controller.getChannelHandler(state));
        return pipeline;
    }

} 
```

但事实上，由于 Floodlight 将 null 赋予构造函数的第二个参数，执行处理程序和执行程序对象永远不会分配给管道。

```
...
final ServerBootstrap bootstrap = createServerBootStrap();

bootstrap.setOption("reuseAddr", true);
bootstrap.setOption("child.keepAlive", true);
bootstrap.setOption("child.tcpNoDelay", true);
bootstrap.setOption("child.sendBufferSize", Controller.SEND_BUFFER_SIZE);

ChannelPipelineFactory pfact = new OpenflowPipelineFactory(this, null);
bootstrap.setPipelineFactory(pfact);
InetSocketAddress sa = new InetSocketAddress(openFlowPort);
final ChannelGroup cg = new DefaultChannelGroup();
cg.add(bootstrap.bind(sa));
... 
```

我的问题是，“如果没有为管道设置管道执行器会发生什么”？假设任何默认管道执行器？如果是，总是假定 OrderedMemoryAwareThreadPoolExecutor 执行器？

提前感谢您，等待 Netty 和 Floodlight 专家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:33:37.143

如果 ChannelPipeline 中没有 ExecutionHandler，则所有事件都将由 IO 线程处理。如果添加了 ExecutionHandler，则事件将被卸载到 ExecutionHandler 之后的处理程序的额外线程池。这允许阻塞操作。

# java - JDO - 列表属性排序

> ID：15698488
> 
> 赞同：0
> 
> 时间：2013-03-29T06:31:05.227
> 
> 标签：java, orm, jdo

我正在对遗留数据库模式进行 JDO 试验，并试图了解如何将各种场景映射到我的对象。

例如，假设我有一个名为“Country”的对象和另一个名为“City”的对象，Country 和 City 之间的关系为 1:N，我在 Country 对象上有这个：

```
@Persistent(defaultFetchGroup="true")    
@Element(column="countrycode")
@Order(extensions=@Extension(vendorName="datanucleus", key="list-ordering", value="name ASC"))    
private List<City> cities; 
```

但是，如果我想遍历所有国家/地区的列表，然后以另一种顺序显示他们的城市——比如按人口递减，该怎么办？

我最好*不要*在 Country 对象上拥有“城市”属性吗？然后我可以使用第二个查询“手动”获取城市，然后我可以按照我的意愿订购？还是我想念另一种方式？

# android - Android 中共享首选项的用途是什么？

> ID：15698490
> 
> 赞同：19
> 
> 时间：2013-03-29T06:31:17.567
> 
> 标签：android

我只是想知道，Android 中共享首选项的用途是什么。请有人清除我的疑问。

**编辑**

我可以将它们用于第一次显示设置屏幕并设置一些标志，以便设置屏幕/活动在完成后不会显示（在下次启动应用程序时）？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-29T06:35:07.223

想一想你想保存一个小值（可能是一个标志）的情况，你想稍后在用户启动应用程序时引用它。然后共享偏好开始起作用。

你可能会问，为什么我们也可以使用 sqlite 来做呢？但问题`sqlite`是它会希望你编写冗长的代码和支持类。Shared Preference 让您可以轻松地在几行中读取和写入键值对。但请始终记住，共享偏好并不是您保留复杂关系数据的解决方案。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-29T06:32:39.113

您可以使用 SharedPreferences 保存任何原始数据：布尔值、浮点数、整数、长整数和字符串。此数据将在用户会话中持续存在（即使您的应用程序被终止）。

[阅读更多](http://developer.android.com/guide/topics/data/data-storage.html#pref)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-29T06:35:01.393

[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)的主要目的是将**私有原始数据存储在键值对中**

你会从下面的链接中得到更多的想法

[具有共享首选项的 Android 中的数据存储](http://developer.android.com/guide/topics/data/data-storage.html#pref)

希望它会帮助你。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-29T06:33:20.497

SharedPreferences 是来自 Android SDK 的 API，用于存储和检索应用程序首选项。SharedPreferences 只是一组持久存储的数据值。这意味着即使您停止应用程序或关闭设备，您存储在 SharedPreferences 中的数据仍然存在。SharedPreferences 在 Activity 级别可用或在应用程序包中的所有 Activity 之间共享。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-29T06:34:19.883

首先你应该搜索它。在android中使用SharedPreferences来存储一些数据（即关闭应用程序后，它会持续存在）。如果你想存储少量数据，那么你可以去SharedPreferences而不是去Sqlite和所有.在这种情况下 SharedPreferences 很有用。

[链接](http://developer.android.com/guide/topics/data/data-storage.html)到开发者网站

[链接](https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values)到另一个堆栈溢出问题和答案

# java - 如何在 android 上将 SQLiteDatabase 查询结果显示为 html？

> ID：15698492
> 
> 赞同：1
> 
> 时间：2013-03-29T06:31:19.253
> 
> 标签：java, android, html, dictionary

我的可搜索字典（Google`SearchableDictionary`在 SDK/samples 上找到）获取查询结果，`SQLiteDatabase`从中获取来自`definitions.txt`文件的数据（其 .txt 文件不是`XML`文件）。

现在我想`Html`在 android 上显示查询结果输出。这意味着，我想在 SQLiteDatabase 上发布广告`\n` `<b>`和其他`Html code`内容，以提供查询输出。`definitions.txt`我找到了一个代码`.setText(Html.fromHtml`，但它应该只适用于 XML 字符串。

这是我的代码，它显示了我的项目的最终输出

```
TextView word = (TextView) findViewById(R.id.word);
TextView definition = (TextView) findViewById(R.id.definition); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:35:15.397

你需要：

*   获取您需要的文本

*   将 html 标签附加到您的文本

*   将字符串编码为 html 格式 - 请参阅下面的提示 1。

*   在 textview 中显示编码的 html（如果要呈现 HTML，则为 WebView） - 请参阅下面的提示 2。

**提示 1：**您可以使用 TextUtils 类中的 htmlEnode() 方法将字符串编码为 HTML。[请参阅此处的教程。](http://android-er.blogspot.in/2011/08/html-encode-string-using.html)

**提示 2：** [请参阅此线程](https://stackoverflow.com/questions/8987509/how-to-pass-html-string-to-webview-on-android)以了解如何将 HTML 编码数据加载到 webview 中。

# php - PHP中的多选表单

> ID：15698510
> 
> 赞同：0
> 
> 时间：2013-03-29T06:32:06.370
> 
> 标签：php, mysql

您好我正在尝试构建一个允许用户选择多个值的下拉菜单，我从数据库中查询 2 个值一个 id 和一个名称，我使用 id 作为值和名称作为选项的描述。但是，下拉菜单一次只允许我选择一个选项。如何允许选择多个值以及如何处理发布的多个值？

```
print"<select name='Category' id='nodes' size='4' multiple='multiple'>\n";
$db = adodbConnect();
$query = "Select * From nodes";
$result = $db -> Execute($query);
while($row=$result->FetchRow())
{
$cat = $row['id'];
$desc =$row['name'];
print "<option value='$cat'>$desc</option>\n";
}
print "</select>\n"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:39:50.157

您可以在 php 中处理多个值，例如-

```
<?php
header("Content-Type: text/plain");

foreach ($_GET['category'] as $selectedOption)
    echo $selectedOption."<br />";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:52:53.373

要以这种方式使用选择来选择多个值，您只需使用 Cmd (Mac) 或 Ctrl (Windows) 键并单击多个值。

要处理帖子：

```
<?php
  $categories = $_POST['category']; 

  foreach($categories as $category){
    //do stuff
  }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T07:01:48.067

***只需尝试以下内容：***

```
<?php
$db     = adodbConnect();
$query  = "Select * From nodes";
$result = $db -> Execute($query);
print "<select size=\"4\" multiple=\"multiple\" name=\"Category[]\">";
print "<option value='-' >Select from list</option>";
while ($row=$result->FetchRow()){
$cat  = $row['id'];
$desc = $row['name'];
print "<option value=$cat>$desc</option>";
}
print "</select>";
?> 
```

我认为这可以帮助您解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T06:35:48.763

```
$db = adodbConnect();
$query = "Select * From nodes";
$result = $db -> Execute($query);
$select='';
$select.="<select name='Category' id='nodes' size='4' multiple='multiple'>\n";
while($row=$result->FetchRow())
{
$cat = $row['id'];
$desc =$row['name'];
$select.="<option value='$cat'>$desc</option>\n";
}
$select.="</select>\n";
echo $select; 
```

在帖子中，您将收到数组形式的值，例如，如果您选择两个选项而不是喜欢的选项`array('1','2')`

# iphone - UINavigationController 在 UIPopOverController 中不起作用

> ID：15698511
> 
> 赞同：0
> 
> 时间：2013-03-29T06:32:06.857
> 
> 标签：iphone, ios, objective-c, ipad, uinavigationcontroller

在我的 Ipad App(ios6) 中，我正在开发`UIPopOverController`. 在`UIPopOverController`我正在展示相机。我的要求是当我按下相机捕捉按钮时，它会推送到另一个视图控制器。在那个视图控制器中，我想显示从相机拍摄的图像。

我正在使用这段代码：

```
ImageCropViewController *cropViewController = [[ImageCropViewController alloc]initWithNibName:@"ImageCropViewController" bundle:nil];
cropViewController.sourceImage = image;

UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:cropViewController];

[self.navigationController presentViewController:navController animated:YES completion:nil]; 
```

我已经尝试了很多并用谷歌搜索，但我没有找到任何解决方案。它正在消磨我的时间，所以如果有人对此进行了研究，请指导我并发布示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:26:47.563

我认为你`self.navigationController`是`nil`。您创建导航控制器，但将其用作裁剪器控制器的包装器。例如：

```
 //in AppDelegate
  SomeController *controller = [SomeController alloc] init];
  UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:controller];
 self.window.rootViewController = controller;
 [self.window makeKeyAndVisible];

 // later
 // asume that self is SomeController
 ImageCropViewController *cropViewController = [[ImageCropViewController alloc]initWithNibName:@"ImageCropViewController" bundle:nil];
  cropViewController.sourceImage = image;

  UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:cropViewController];

  [self.navigationController presentViewController:navController animated:YES completion:nil];  // now it will be work 
```

UPD：我第一次没有看到您使用`UIPopOverController`，所以它可能无法正常工作。但`UIPopOverController`没有 navigationController 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T14:16:57.960

最后我得到了解决方案：

```
ImageCropViewController *cropViewController = [[ImageCropViewController alloc]initWithNibName:@"ImageCropViewController" bundle:nil];
cropViewController.sourceImage = image;
[self.navigationController pushViewController:cropViewController animated:YES]; 
```

我已经在 `ImageCropViewController`'s中编写了以下代码`ViewWillAppear`

```
self.contentSizeForViewInPopover = CGSizeMake(450, 350); 
```

# java - Java方法在不特定于字母序列的字符串中查找字母集？

> ID：15698530
> 
> 赞同：0
> 
> 时间：2013-03-29T06:33:04.770
> 
> 标签：java, regex, string

在 Java 中，我正在开发用于玩文字的争夺游戏。

如果 player1 发送像**"B,A,C,N,R,E"**这样的字母，那么 player1 不应再发送相同的字母集（顺序无关紧要），例如**"A,B,C,N,R,E"， “B、A、N、C、E、R”**等。

**无论如何要在不特定于字母序列的字符串中找到给定的字母集？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T06:34:59.067

对应player1，可以对他发送的序列进行排序和存储。下次他选择一个序列时，对其进行排序并检查地图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T06:44:00.363

1）按照前面所说的对字母进行排序。复杂度 O(n log n)。

2) 用计数器实现某种数组，其中字母表中符号的序号将是掩码数组中的索引。并使用这个掩码数组来匹配单词。就像那个 Integer[] maskArray = [0(for A),0(for B),0(for C),etc.] 复杂度 O(n)。

# ember.js - 正在寻找 Ember PRE4 缩小版，谁能指点我可以找到的位置

> ID：15698531
> 
> 赞同：0
> 
> 时间：2013-03-29T06:33:09.723
> 
> 标签：ember.js

我正在寻找 ember-1.0.0-pre.4.js 缩小版，有人可以指出我的相同之处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:05:24.753

您可以在此处找到 Ember 的所有发布版本（最低版本和正常版本）：

[https://github.com/emberjs/ember.js/tree/release-builds](https://github.com/emberjs/ember.js/tree/release-builds)

# java - 在 Java 中使用内部类

> ID：15698532
> 
> 赞同：-4
> 
> 时间：2013-03-29T06:33:15.967
> 
> 标签：java

我现在正在研究推荐系统。我设计了一个类 Recommend 像：

```
class Recommend{
    Path path; //recommended path, self-defined class. This is the problem!
    //some parameters and Models        
    private Map<Integer, List<Integer>> Model1;
    //...other pram and models

    //methods
    public void getPath();
    public double score(int place);//
} 
```

这是我的问题：我构造了一个 Recommend 实例，加载模型。然后我通过调用该实例的 getPath 方法来搜索路径。我的路径是时间敏感的，其中包含位置列表以及正确的时间：

```
class Path{
    List<Integer> path;
    List<Integer> times;
    double socre;

    public void add(int place, double time);
} 
```

我想调用 add(int, double) 为路径添加一个地点和对应的时间，同时更新新路径的分数。所以**这里我要调用score(int)，这是一个Recommend的方法**

我应该如何设计 Path，它应该是 Recommend 的内部类吗？

**更新**

```
getPath(int place, double startTime);
//try greedy searching to find a time sensitive path that scored highest, 
//go through all possible places and scored them.

socre(int place, double time);
//In fact there are multiple score methods correspond to different models,
//**and notice here I modify the param to int place from Path path**
//This function evaluates the score of current place and time(used in greedy searching)

add(int place, double time);
//add a new place and time(which is proved by greedy searching to be the best)
//I want this update the score of place itself...okay maybe I should place this function in Recommend 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:39:42.600

您的“getPath()”方法是问题的一部分；它“什么都不做”。您的“推荐”课程似乎旨在为路径评分 - 并且该路径似乎并未实际暴露在 Recommend 之外。您可能会考虑在 Recommand 上公开一个新方法，即“add(int place, double time)”，并让该方法更新路径，然后调用 PRIVATE“scorePath()”方法。那么 path 应该是一个内部类，因为它的唯一功能是保存数据结构。

您可以通过在 JavaDoc 中写下每个类的用途来阐明您想要做什么。每个班级应该有一个明确的目的。例如，如果您完成此操作后发现“路径”不需要出现在“推荐”之外，那么您可以将其设为私有成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:40:32.700

使用**Inner Class**或**Composition**的天气（正如您所做的那样），您可以实现您的目标。我认为事情更复杂，因为你没有遵循`Separation of Concern`原则。

想想为什么在**Recommend**类中需要**getPath()**和**score()**方法。像**add()**方法一样，您的**getPath()**也应该是**Path**类的一部分。

# php - 打开浏览器时php中未定义的变量

> ID：15698535
> 
> 赞同：-2
> 
> 时间：2013-03-29T06:33:24.137
> 
> 标签：php, image, variables, undefined, validating

**在浏览器中打开 php 页面时发生未定义变量错误。这里的图像验证示例：验证和上传图像时没有错误。但我无法解决未定义变量错误。请帮助我。**

```
<?
if(isset($_POST['save'])){
$rand=rand().time();
$photo_name=$_FILES['photo']['name'];
$photo_tmp_name=$_FILES['photo']['tmp_name'];
$photo_name=explode(".",$photo_name);
list($width,$height) = getimagesize($photo_tmp_name);
if($photo_name[1]=="jpeg"||$photo_name[1]=="jpg"||$photo_name[1]=="gif")
{
    if($width<=365)
    {
        $photo_name=$photo_name[0].$rand.".".$photo_name[1];
        move_uploaded_file($photo_tmp_name,"Images/{$photo_name}");
    }
    else
    {   $sz_err="Not correct Perfect Size"; }
}
else
{   $tp_err="Not correct Type";         }   
} 
```

//这两个加粗变量是html的body标签中的“echo/print”。但仅在 HTML 行中发生错误。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-29T06:41:51.340

***只需尝试以下内容：***

***PHP部分：***

```
<?php
$sz_err="";
$tp_err="";
if(isset($_POST['save'])){
$rand=rand().time();
$photo_name=$_FILES['photo']['name'];
$photo_tmp_name=$_FILES['photo']['tmp_name'];
$photo_name=explode(".",$photo_name);
list($width,$height) = getimagesize($photo_tmp_name);
if($photo_name[1]=="jpeg"||$photo_name[1]=="jpg"||$photo_name[1]=="gif")
{
if($width<=365)
{
$photo_name=$photo_name[0].$rand.".".$photo_name[1];
move_uploaded_file($photo_tmp_name,"Images/{$photo_name}");
}
else
{ 
$sz_err="Not correct Perfect Size"; 
}
}
else
{ 
$tp_err="Not correct Type"; 
}
}
?> 
```

我认为这可以帮助您解决问题。

# angularjs - 如何确保 AngularJS 在我的 HTML 上运行并且模块已加载？

> ID：15698536
> 
> 赞同：1
> 
> 时间：2013-03-29T06:33:25.573
> 
> 标签：angularjs

我之前问过一个关于[如何填充选择下拉菜单的问题](https://stackoverflow.com/questions/15688313/how-can-i-populate-a-select-dropdown-list-from-a-json-feed-with-angularjs)

当我试图实现这一点时：

```
<html lang="en" class="light" data-ng-app="test">
<body data-ng-controller="TestCtrl">
...

    <script type="text/javascript">
        $(document).ready(function () {
            angular.module('test', []).controller('TestCtrl', function ($scope, $http) {
                $scope.selectedTestAccount = null;
                $scope.testAccounts = [];

                $http({
                    method: 'GET',
                    url: '/Admin/GetTestAccounts',
                    data: { applicationId: 3 }
                }).success(function (result) {
                    $scope.testAccounts = result;
                });
            });
        });
    </script> 
```

但它在 Chrome 开发者工具中给了我一个错误说：

```
Uncaught Error: No module: test 
```

我注意到回复我帖子的人提到我需要确保 Angular 在我的 HTML 上运行并且模块已加载。好吧，我确实在脚本区域中包含了 Angular，但我仍然收到上述消息。谁能告诉我我可能做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T06:42:56.220

显然，当您将声明置于声明`ngApp`之上时`module`，angular 会尝试在声明`module` *之前*启动。

你有两个选择：

1.  将模块声明放在，因此当指令尝试初始化`head`时它就准备好了。`ngApp`

2.  使用 . 手动初始化您的应用程序`angular.bootstrap`。

## 手动初始化：

```
angular.bootstrap(angular.element("body")[0], ["test"]); 
```

文档：
[http ://docs.angularjs.org/api/angular.bootstrap](http://docs.angularjs.org/api/angular.bootstrap)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T08:50:08.363

使用指令。不要以这种方式使用 jQuery。这是我从强大的 jQuery 背景开始使用 angular 时的第一个（也是主要）错误。

如果你需要操作一个dom元素，在大多数情况下，正确的方式是指令

[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

# objective-c - 之间有多大的空间。和属性名称有效吗？

> ID：15698539
> 
> 赞同：0
> 
> 时间：2013-03-29T06:33:50.603
> 
> 标签：objective-c

我犯了一个意外错误，发现它仍然有效。我只是在此处的视图上重新创建了它以进行演示。忽略我使用的属性和我分配的值。

```
self.view. frame = CGRectZero;
self.view. tag = 23;

NSLog(@"%@",NSStringFromCGRect(self.view.frame));
NSLog(@"%i",self.view.tag); 
```

编译器如何看待这个并且可以接受？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T06:37:11.653

因为在 C 和 Objective-C 中，标记之间的空格无关紧要。解析源文本时，编译器反复调用[词法分析器（并](http://en.wikipedia.org/wiki/Lexical_analysis)[构建抽象数据结构](http://en.wikipedia.org/wiki/Abstract_syntax_tree)来表示源代码）。词法分析器函数只对非空白标记感兴趣（有一些偏差，但这种观察通常是正确的），无论您如何组织代码，

```
object.member 
```

和

```
object .member 
```

和

```
object. member 
```

和

```
object . member 
```

都将被识别为完全相同的标记序列：`<ident> <memberof> <ident>`.

# c# - 如何从 Excel 表上传考勤表到考勤表？

> ID：15698540
> 
> 赞同：2
> 
> 时间：2013-03-29T06:33:55.160
> 
> 标签：c#, asp.net, sql-server

我正在处理工资单，我想从 Excel 表上传员工考勤表。

Excel表格是这样的

```
EmpId   Date   Intime   Out Time
--------------------------

1     2/2/2012  09:00   18:00  
1     6/2/2012  09:00   18:00  
1     8/2/2012  09:00   18:00  
1     9/2/2012  09:00   18:00 
```

所有这些记录的输入都很简单。但是请你们帮我如何填写本月缺失的日期（请记住，如果是周日或政府假期，则将其标记为存在）

我们如何实现这一点？

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T10:02:59.993

第 1 步：从 Excel 工作表中读取数据并填写数据集

第 2 步：循环检查缺失天数

第 3 步：检查缺少的日子是星期日还是政府假期（要检查星期日，在 .net

dayisweek 可用）

第4步：据此，修改数据集

步骤 5：将数据集保存到数据库

# jmap - jmap -histo 错误消息“内存不足”

> ID：15698541
> 
> 赞同：1
> 
> 时间：2013-03-29T06:33:57.890
> 
> 标签：jmap

在服务器中尝试命令`jmap -histo` 时，收到错误消息“没有足够的内存来处理此命令”。我知道采取`-histo`会产生一个小文件。但它只是给出错误信息。

谁能建议我参加`-histo`（所有工作的内存利用率）。

# javascript - 如何在 Javascript 中切换（隐藏/显示）标签的onClick 表

> ID：15698542
> 
> 赞同：15
> 
> 时间：2013-03-29T06:34:11.390
> 
> 标签：javascript, html, asp.net, toggle

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-29T06:38:05.337

您正在尝试更改`onclick`同一函数调用内部的行为。试试这样：

## 锚标记

```
<a id="loginLink" onclick="toggleTable();" href="#">Login</a> 
```

## JavaScript

```
function toggleTable() {
    var lTable = document.getElementById("loginTable");
    lTable.style.display = (lTable.style.display == "table") ? "none" : "table";
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-29T06:41:03.273

使用jquery简单

```
<script>
$(document).ready(function() {
    $('#loginLink').click(function() {
    $('#loginTable').toggle('slow');
    });
})
</script> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-29T06:37:55.123

您需要将您的功能修改为：

```
function toggleTable()
{
   if (document.getElementById("loginTable").style.display == "table" ) {
       document.getElementById("loginTable").style.display="none";

   } else {
      document.getElementById("loginTable").style.display="table";

} 
```

目前它正在根据`boolean`参数进行检查，您不必将参数与您的函数一起传递。

您需要将锚标记修改为：

```
<a id="loginLink" onclick="toggleTable();" href="#">Login</a> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-29T06:44:04.863

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-29T10:22:40.650

您的锚标记应为：

```
 <a id="loginLink" onclick="showHideTable();" href="#">Login</a> 
```

你的javascript函数：

```
function showHideTable()
{
   if (document.getElementById("loginTable").style.display == "none" ) {
       document.getElementById("loginTable").style.display="";

   } else {
      document.getElementById("loginTable").style.display="none";

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-29T06:38:02.977

您始终将 true 传递给 toggleMethod，因此它将始终“显示”表格。我将创建一个全局变量，您可以改为在切换方法中翻转它。

或者，您可以检查表的可见性状态而不是显式变量

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-29T06:42:51.657

尝试

```
<script>
  function toggleTable()
    {

    var status = document.getElementById("loginTable").style.display;

    if (status == 'block') {
      document.getElementById("loginTable").style.display="none";
    } else {
      document.getElementById("loginTable").style.display="block";
    }
  }
</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-19T05:14:13.947

`visibility`属性使元素可见或不可见。

```
function showTable(){
    document.getElementById('table').style.visibility = "visible";
}
function hideTable(){
    document.getElementById('table').style.visibility = "hidden";
} 
```

# tomcat - 安装即服务是什么意思？

> ID：15698547
> 
> 赞同：3
> 
> 时间：2013-03-29T06:34:23.023
> 
> 标签：tomcat, installation, ubuntu-12.04

当我在 ubuntu 12.04 上安装 Tomcat 时，我遇到了“作为服务安装”这个短语。将某些东西安装为服务究竟意味着什么？还有哪些其他类型的安装？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T08:08:10.080

Tomcat 既可以作为普通的可执行文件启动，也可以作为守护进程启动。

通过调用 bin/startup.sh 脚本（以用户身份或以 root 身份使用 sudo 命令）将 tomcat 作为普通可执行文件运行。

要将其作为服务启动，您必须按照[本页中的说明在](http://www.spaceprogram.com/knowledge/tomcat_init_d.html)初始化脚本中提供配置。这样做，tomcat 可以在引导序列期间运行，使其可供所有用户使用。可以使用`service start|stop|status|restart tomcat`命令来控制。

# c# - 当我从注册表项中获取值时，我得到 System.Byte[]

> ID：15698548
> 
> 赞同：1
> 
> 时间：2013-03-29T06:34:26.980
> 
> 标签：c#, registry, output

在 C# 中，我试图获取注册表项的值。它是一个二进制密钥。我正在使用的代码

```
RegistryKey regKey = Registry.LocalMachine;
            regKey = regKey.OpenSubKey(@"Software\Wow6432Node\Bohemia Interactive Studio\ArmA 2 OA\");

            if (regKey != null)
            {
                string value = regKey.GetValue("KEY").ToString();
                Console.WriteLine(value);
            }
            else
            {
                return;
            } 
```

当它写入控制台时，它输出的只是`System.Byte[]`. 如何输出密钥的确切值？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T06:41:58.207

您只需转换为`byte[]`即可获取值，因为您的值是二进制的：

```
byte[] value = (byte[])regKey.GetValue("KEY"); 
```

要显示二进制，您可以显示为两个十六进制数字：

```
 for (int i = 0; i < value.Length; i++)
     Console.Write(" {0:X2}", value[i]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:38:06.610

您从中获得的值`regKey.GetValue("KEY")`可能是一个字节数组。

[请考虑像本文](https://stackoverflow.com/questions/311165/how-do-you-convert-byte-array-to-hexadecimal-string-and-vice-versa)一样将其转换为 HEX

# c - 结构中的 sizeof

> ID：15698549
> 
> 赞同：1
> 
> 时间：2013-03-29T06:34:27.500
> 
> 标签：c, struct, int, sizeof

```
 #include <stdio.h>
 #include <string.h>
 #include <malloc.h>

struct Student {
       char name[100];
       int id;
       char major[50];
       char address[200];
};

int main()
{

     struct Student st;

     strcpy(st.name, "Chuck");
     st.id = 20001;
     strcpy(st.major, "Computer Science");
     strcpy(st.address, "1st Street");

     printf("%d %d %d %d %d\n", sizeof(st), sizeof(st.name),sizeof(st.id), sizeof(st.major), sizeof(st.address));

     return 0;
} 
```

输出是 356 100 4 50 200。为什么 sizeof(st) 是 356，而不是 354？我在没有 int 的情况下尝试了这个，输出是 350 100 50 200，所以我认为问题出在整数上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T06:36:52.783

这是由于`struct`成员之间的填充。填充对于确保每个数据成员[在内存中正确对齐](http://en.wikipedia.org/wiki/Data_structure_alignment)是必要的。确切的对齐要求取决于您的架构。

因此，您不能假设 a 的大小`struct`等于其成员大小的总和。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T06:37:33.737

结构中的每个非第一个字段之前都可以有一个间隙（或填充）。编译器正在添加空白以满足您的处理器和 ABI 约定的需要。

您应该信任编译器，它是按照实现的要求进行布局`struct`的。

一些编译器提供扩展来改变或改进结构的布局，例如GCC的[类型属性](http://gcc.gnu.org/onlinedocs/gcc/Type-Attributes.html)`aligned`or `packed`。

不要将 a 内部的填充和间隙`struct`视为问题，而是将其视为资产：编译器非常努力地满足处理器、ABI 约定等......

大多数编译器不会对结构中的字段重新排序（GCC 曾经有一个很少有用的优化可以做到这一点，但该优化已被删除，因为有时它会受到伤害 - 例如使用 LTO）。

如果您关心`struct`大小并且不关心字段的顺序，您可以巧妙地重新排序它们。但最密集的顺序可能取决于架构。

顺便说一句，C 标准甚至不保证 an`int`是 32 位或更大的大小和对齐方式`char`（即使这很常见）。它提供`<stdint.h>`并`int32_t`为此目的。`int`我怀疑如果为-s 为 16 位的 16 位机器（例如 1980 年代带有 Intel 8086 处理器的原始 PC AT，或一些便宜的 16 位微控制器）编译，您不会观察到任何填充或间隙。

# java - Android 字符映射不保存

> ID：15698552
> 
> 赞同：0
> 
> 时间：2013-03-29T06:34:39.503
> 
> 标签：java, android, eclipse

我正在 android 中编写此语句，`tv.settext("√"+value +" = "+result);`例如 `tv.settext("√3=17321");`最终结果看起来像**√3=17321**但是当我保存或运行我的程序时，它会显示这个错误。我不知道如何发布图片，但我用逗号写了错误""

```
"Save coult not be completed. Try File>Save As...if the problem persists.
    Reason :
    Some characters cannot be mapped using "Cp 1252" character encoding. 
    Either change the encoding or remove the character which are not 
    supported by the "Cp1252" character encoding".

Button(1)Text=OK    Button(2)Text=Save as UTF-8   Button(3)Text=Select First Character 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:42:06.357

编辑

答案是只需单击 Save as UTF-8 按钮，它不会在您的程序中产生问题。

# unix - unix中的逐列比较

> ID：15698554
> 
> 赞同：0
> 
> 时间：2013-03-29T06:34:50.347
> 
> 标签：unix, awk

我有两个文件

文件 1

```
Row   Col1  Col2  Col3  Col4  
1      A     B    C     D  
2      E     F    G     H 
```

文件2

```
Row   Col1  Col2  Col3  Col4  
1      A     Z    C     D  
2      E     F    Y     H  
3      M     N    O     P 
```

要求是逐行，然后逐列比较。需要创建这两个输出文件。首先将有来自 file2 的第 3 行，其中指出这些行是 file2 中的新行。第二个文件将具有以下输出：

```
FileName  Row  ColName  ColValue  
File1     1     Col2    B (--this is old value)  
File2     1     Col2    Z (--this is new value) 

File1     2     Col3    G  
File2     2     Col3    Y 
```

现在要获取 file1 中缺少但存在于 file2 中的行，可以通过

```
awk 'NR==FNR{a[$1]++;next;}!($0 in a)' file2 file1 
```

但不确定如何生成第二个输出文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:44:44.877

完成规范：

*   行号是否实际存在于文件中？*是的*
*   什么列组合告诉您 File1 中的条目与 File2 中的条目匹配？*行号*
*   标题行是否实际存在于文件中？*不（但我们稍后会改变主意）*
*   文件中的数据是否已排序？*假设没有*
*   File1 中存在但 File2 中不存在的记录如何处理？*未指定，但可能需要第三个输出文件。*

答案将忽略“已删除记录”问题。

问题观察到这个逻辑找到插入在 File2 中的记录：

```
awk 'NR==FNR{a[$1]++;next;}!($0 in a)' file2 file1 
```

它接近正确；它应该是`!($1 in a)`。需要显式打印才能将输出发送到文件。对于其余的逻辑，我们可以很容易地发现字段的变化：

```
awk 'NR == FNR  { a[$1] = $0; next }
     !($1 in a) { print $0 > "ofile.1"; next }
                { split(a[$1], old);
                  for (i = 2; i <= NF; i++)
                  {
                      if ($i != old[i])
                      {
                          format = "%-8s  %4d  %d  %s\n"
                          printf format, "File1", $1, i, $i     > "ofile.2";
                          printf format, "File2", $1, i, old[i] > "ofile.2";
                      }
                  }
                }' 
```

这会在给定的假设下产生合理的输出（没有标题行）。如果实际上存在标题行，那么您必须捕获并使用它们（以及文件名）：

```
awk 'FNR == 1   { file[++num] = FILENAME; for (i = 1; i <= NF; i++) head[i] = $i; next }
     NR == FNR  { a[$1] = $0; next }
     !($1 in a) { print $0 > "ofile.1"; next }
                { split(a[$1], old);
                  for (i = 2; i <= NF; i++)
                  {
                      if ($i != old[i])
                      {
                          format = "%-8s  %4d  %-4s  %s\n"
                          printf format, file[1], $1, head[i], $i     > "ofile.2";
                          printf format, file[2], $1, head[i], old[i] > "ofile.2";
                      }
                  }
                }' 
```

为了在第二个输出文件上获得正确的标题，您需要进行一些更小的调整：

```
awk 'NR == 1    { printf "%-8s  %4s  %-7s  %s\n", "Filename", "Row", "Colname", "Colvalue" > "ofile.2" }
     FNR == 1   { file[++num] = FILENAME; for (i = 1; i <= NF; i++) head[i] = $i; next }
     NR == FNR  { a[$1] = $0; next }
     !($1 in a) { print $0 > "ofile.1"; next }
                { split(a[$1], old);
                  for (i = 2; i <= NF; i++)
                  {
                      if ($i != old[i])
                      {
                          format = "%-8s  %4d  %-7s  %s\n"
                          printf format, file[1], $1, head[i], $i     > "ofile.2";
                          printf format, file[2], $1, head[i], old[i] > "ofile.2";
                      }
                  }
                }' File1 File2 
```

此示例输出为：

*文件.1*

```
3      M     N    O     P 
```

*外地.2*

```
Filename   Row  Colname  Colvalue
File1        1  Col2     Z
File2        1  Col2     B
File1        2  Col3     Y
File2        2  Col3     G 
```

如果你想在每条记录后有空行，那是一个微不足道的修改——OP 练习。

# ruby-on-rails - 使用 Rails (waz-storage gem) 将文件存储在 Windows Azure 存储中

> ID：15698564
> 
> 赞同：2
> 
> 时间：2013-03-29T06:35:33.240
> 
> 标签：ruby-on-rails, azure, azure-storage, azure-blob-storage

我计划使用 Windows Azure 存储从我的 Rails 应用程序中保存 blob 数据。我在网上搜索以找到合适的解决方案，并找到了一个名为`waz-storage`.

`conn = WAZ::Storage::Base.establish_connection(:account_name => account_name, :access_key => access_key)`

我尝试使用上面的块进行连接，这部分执行成功。但是当我使用如下命令时

`WAZ::Blobs::Container.find('test-container')`

它失败并显示`403 Forbidden`，我实际上正在使用从我的 Windows Azure 存储帐户获得的帐户名和访问密钥。

我在这做错了什么？或者如果有任何更好的解决方案可以在 azure 中存储 blob，请提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:49:22.237

我在 waz-storage gem [issues list](https://github.com/johnnyhalife/waz-storage/issues/32)中找到了解决方案。

首先，“找到”您要使用的容器（或者如果您愿意，也可以创建一个）：

```
container = WAZ::Blobs::Container.find('name_of_container') 
```

然后，试试这个：

```
open('/absolute_path_to_the_file_you_are_uploading', 'rb') do |f|
  container.store('name_of_blob', f.read, 'file_type/extension')
end 
```

这对我来说非常有效。祝你好运！

# sql - 如何在sql语句中使用`OR`条件？

> ID：15698573
> 
> 赞同：0
> 
> 时间：2013-03-29T06:36:06.363
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我想在下面的 sql 语句中使用“或”条件，请帮我这样做。

```
 SELECT DATE, SecurityId
    FROM StateStreet
    INNER JOIN Securities ON StateStreet.SecurityID = Securities.securityid
    AND (     (SecurityName LIKE '% R V %'
               AND Quantity < 0
               AND PortfolioId =@portfolioID)
           OR (SecurityName NOT LIKE '% R V %'
               AND Quantity > 0
               AND PortfolioId=@PortfolioID)
           OR (Value = Quantity
               AND Securities.PortfolioId =@PortfolioID) 
         )
   WHERE CONVERT(DATETIME,PeriodEndDate) = @PositionDate 
```

请帮我在上面的语句中使用 OR 条件，我需要检查 OR 条件中的 3 个语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T06:39:49.220

看起来您忘记了`WHERE`子句：

```
SELECT 
    DATE,
    SecurityId              
FROM
    StateStreet 
INNER JOIN
    Securities ON StateStreet.SecurityID =  Securities.securityid 
WHERE
    (SecurityName LIKE '% R V %' AND Quantity < 0  AND PortfolioId = @portfolioID)
OR
    (SecurityName NOT LIKE '% R V %' AND Quantity > 0  AND PortfolioId = @PortfolioID)
OR
    (Value = Quantity AND Securities.PortfolioId = @PortfolioID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:57:22.997

这是您第二次发布相同的问题。

您正在使用 OR 条件。

要么你不了解优先级、搜索条件，要么数据不是你假设的。

顺序是：
按位（你没有这些）
()
Not
And
Or

分解查询。

```
SELECT DATE, SecurityId, SecurityName, Quantity, Value, PortfolioId
FROM StateStreet
INNER JOIN Securities 
   ON StateStreet.SecurityID = Securities.securityid
WHERE CONVERT(DATETIME,PeriodEndDate) = @PositionDate 
```

然后
您可以将 AND PortfolioId =@portfolioID 拉起来，因为它在每个或作为一个和

```
SELECT DATE, SecurityId, SecurityName, Quantity, Value, PortfolioId
FROM StateStreet
INNER JOIN Securities 
   ON StateStreet.SecurityID = Securities.securityid 
  AND PortfolioId = @portfolioID
WHERE CONVERT(DATETIME,PeriodEndDate) = @PositionDate 

SELECT DATE, SecurityId, SecurityName, Quantity, Value, PortfolioId
FROM StateStreet
INNER JOIN Securities 
   ON StateStreet.SecurityID = Securities.securityid 
  AND PortfolioId = @portfolioID
  AND (      Value = Quantity
        OR ( SecurityName LIKE '% R V %' )
      )
WHERE CONVERT(DATETIME,PeriodEndDate) = @PositionDate 
```

# angularjs - AngularJS 视图/区域

> ID：15698575
> 
> 赞同：3
> 
> 时间：2013-03-29T06:36:15.040
> 
> 标签：angularjs

我正在尝试学习 AngularJS，我认为我有一个架构问题。

如果我想**开始**开发一个应用程序，比如 youtube，我如何在“区域”中组织页面（比如 Marionette）？我的意思是：顶部导航栏、搜索框、侧边菜单、主视频、评论等。

这些区域是否应该包含在指令中？

`<div top-navbar></div>`
`<div main-video="link_to_video"></div>`
ETC...

还是控制器？
`<div ng-controller="top-navbar"></div>`
ETC...

或者什么都没有？例如，只需将它们全部扔到下面`app-controller`。

我也见过`ng-include`，但我不确定它应该在这里使用。无论如何，只是关于组织的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T08:51:29.520

您绝对不需要为此使用指令，但是，根据每个部分的复杂性，您稍后可能会了解到，您可能会受益于将每个块包含在它自己的指令中。

由于您是 AngularJS 的新手，我建议您从让每个块与其自己的控制器相关联开始。当需要在块之间进行通信时，您可以使用继承、共享服务或事件广播。在此过程中，您将逐渐发现哪些块可能需要指令逻辑。

使用 ng-include 为每个块加载视图是完全可以的。否则（除非您使用指令），您的主视图很快就会变得非常沉重且难以使用。

您可能还想查看一些现有的*种子*项目，以更好地了解这些视图/区域的布局方式。

1.  [角应用](https://github.com/angular-app/angular-app)
2.  [ng-样板](http://joshdmiller.github.com/ng-boilerplate/#/home)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:47:04.207

如果它们是“几乎独立的 GUI 区域”，我认为使用不同的模块会更好（这将有助于您进行测试和调试）。

如果它们彼此相关，我认为使用不同的控制器将是最好的解决方案

# sparql - jena.query.ResultSet 和 jena.query.QuerySolution：SPARQL 请求后的空迭代器

> ID：15698578
> 
> 赞同：1
> 
> 时间：2013-03-29T06:36:26.287
> 
> 标签：sparql, jena

A 在接收 SPARQL 响应时遇到问题。一个问题是方法 `((ResultSet) response).hasNext()`返回`false`，尽管响应不应该为空。

请求是：

```
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
PREFIX owl: <http://www.w3.org/2002/07/owl#> 
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> 
PREFIX ontology: <http://www.semanticweb.org/kseniia/ontologies/2013/1/untitled-ontology-12#> SELECT ?x 
WHERE {?x rdfs:subClassOf ontology:Visual} 
```

这在 Protege 中正常工作并返回 3 个对象：

```
Location
Relation
Descriptive 
```

查询是在耶拿这样执行的：

```
Query query = QueryFactory.create(queryString);
QueryExecution qexec = QueryExecutionFactory.create(query, model);
Object response = qexec.execSelect();
qexec.close();
for ( ; ((ResultSet) response).hasNext(); ) {   // always false
   QuerySolution soln = ((ResultSet) response).nextSolution();
   // etc
} 
```

也许我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T10:43:09.063

您正在使用 关闭执行`qexec.close`，然后迭代结果。除非结果由 关闭`qexec.close`且不再可用。

将`qexec.close`to 移到循环之后。

改进：

`Object response` ==> `ResultSet response`

# c - 使用信号量的消费者和生产者

> ID：15698579
> 
> 赞同：2
> 
> 时间：2013-03-29T06:36:29.510
> 
> 标签：c, semaphore, producer-consumer

我目前正在经历死锁和核心转储。

在主要之外，我有以下内容

```
char buffer[SLOTCOUNT][SLOTSIZE];
int isEmpty[SLOTCOUNT]; 

FILE *myInFile;
FILE *myOutFile;

sem_t buf_lock, slot_avail, item_avail; 
```

在我的主要里面

```
int main(int argc, const char * argv[]){
    //Create the basics of threads and intilize the sem
    pthread_t consumer_t, producer_t;

    sem_init(&buf_lock, 0, 1);
    sem_init(&slot_avail, 0, 4); 
    sem_init(&item_avail, 0, 0);

    /*Clear and clean the buffer*/
    for(int i=0; i <= SLOTCOUNT; ++i){
        isEmpty[i] = 0;
        for(int j=0; j <= SLOTSIZE; ++j){
            buffer[i][j] = NULL;
        }
    }

    /*Check to make sure that the correct number of inputs have been provided*/
    checkStart(argc);

    /*Get the locations to the files and save it into a local variable. */
    char inFile[sizeof(argv[1])];
    char outFile[sizeof(argv[2])];
    strcpy(inFile, argv[1]);
    strcpy(outFile, argv[2]);

    /*Load the file to read from and create the file to write to*/
    fileReady(inFile, outFile);

    /*Get the threads ready to return*/
    pthread_create(&producer_t, NULL, producer, NULL);
    pthread_create(&consumer_t, NULL, consumer, NULL);
    pthread_join(producer_t, NULL);
    pthread_join(consumer_t, NULL);

    return 0;
} 
```

最后，我的生产者功能

```
void* producer(){

/*Critical Section*/
    sem_wait(&slot_avail);
    printf("gets here\n");
    sem_wait(&buf_lock);
    printf("Never gets here\n");
    for (int i = 0; i <= SLOTCOUNT; ++i){
        if(buffer[i][0] == NULL) fread(buffer[i], sizeof(char), READSIZE, myInFile);
    }
    sem_post(&buf_lock);
    sem_post(&item_avail);

/*Critical Section*/

} 
```

目前， printf("Never get here") 从不打印。

我想解决这个问题。

但是，如果我注释掉`sem_wait(&buf_lock)`，它将打印它，但随后它会转储核心。

任何想法我做错了什么或如何调试核心转储

编辑：我知道这不是解决问题的最佳方法，但是，这只是为了表明对信号量的理解。

编辑：其余代码已经过独立测试并且可以正常工作。IE char 的大小...等。

我也试过

```
int errno = sem_wait(&buf_lock);
printf("%s", strerror(errno)); 
```

看看发生了什么，但它仍然锁定并且正如预期的那样打印不打印。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:22:07.340

切勿在未测试其返回值的情况下使用此类库例程。特别是`sem_wait`当有中断时可能会返回（例如对于 IO）。阅读相应的手册页，了解所有函数的可能返回值以及它们如何返回错误。

一般来说，POSIX 信号量不是使用线程进行应用程序编程的正确工具。首先，它们只是一个扩展，并非所有 POSIX 系统都支持，然后真正被预见为线程间控制的基本工具的工具是`pthread_mutex_t`和`ptread_cond_t`.

此外，您对生产者函数的规范是错误的，并且您的编译器不应该在没有对您咆哮的情况下接受它。系统将使用参数调用此函数，因此您在这里有未定义的行为。不要那样做，即使你不需要`void*`线程函数接收的参数，你也需要声明那个参数。

另一个次要的 nitpick：以 POSIX 结尾的名称`_t`被保留用于将来的扩展。它们通常指类型。不要将它们用于变量。

# c# - 无法在 javascript 中获取 html 文本框的值

> ID：15698582
> 
> 赞同：3
> 
> 时间：2013-03-29T06:36:50.413
> 
> 标签：c#, javascript, asp.net, html

伙计们，我的代码中有一个问题，我想在 javascript 中获取 html 输入类型文本框的值并将值分配给隐藏字段。之后我想在 c# 文件后面的代码中使用隐藏字段值，但隐藏字段总是包含空string 即使 inputtype 文本框包含值。我的 Java 脚本：

```
 <script type ="text/javascript" >
        function myFunction() {
            var str1 = document.getElementById("amt3").value;
            var str2 = document.getElementById("amt4").value;
            document.getElementById("hf1").value = str1;
            document.getElementById("hf2").value = str2;
        }
    </script> 
```

我的 HTML：

```
<div class="form-row row-fluid">
    <div class="span12">
        <div class="row-fluid">
            <label class="form-label span4" for="slider">
                Range slider</label>
            <div class="span8">
                <asp:UpdatePanel ID="UpdatePanel2" runat="server">
                <ContentTemplate >
                      <asp:HiddenField ID="hf1" runat="server" />
                      <asp:HiddenField ID="hf2" runat="server" />
                <div id="slider-range"    class="slider" >
                </div>
                <input type="text" id="amount1" style="border: 0; color: #ED7A53; font-weight: bold;
                    box-shadow: none;" />
                <input type="text" id="amt3" value="10" runat="server"     style="border: 0; color: #ED7A53; font-weight: bold;
                    box-shadow: none;" />
                <input type="text" id="amt4"  value="20" runat="server"    name="amt4" style="border: 0; color: #ED7A53;
                    font-weight: bold; box-shadow: none;" />
                    <asp:LinkButton ID="lnk" runat="server" onclick="lnk_Click" OnClientClick ="myFunction()">LinkButton</asp:LinkButton>
                    </ContentTemplate>
                </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T06:38:29.390

您必须在 javascript 中使用 ClientID，因为如果 ClientIDMode 未设置为静态，则在生成的 html 中更改服务器控件（具有属性 runat="server"）的 id。

```
var str1 = document.getElementById("<%= amt3.ClientID %>").value;
var str2 = document.getElementById("<%= amt4.ClientID %>").value;
document.getElementById("<%= hf1.ClientID %>").value = str1;
document.getElementById("<%= hf2.ClientID %>").value = str2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T06:42:18.537

由于***隐藏字段***和***文本框***都是服务器端控件，因此应该使用 ClientID 访问它们

```
 var str1 = document.getElementById("<%= amt3.ClientID %>").value;
        var str2 = document.getElementById("<%= amt4.ClientID %>").value;

        document.getElementById("<%= hf1.ClientID %>").value = str1;
        document.getElementById("<%= hf2.ClientID %>").value = str2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T06:43:02.890

一个工作示例：

我对其进行了一些修改，使其无需asp控件即可工作。

[http://jsbin.com/aqayan/1/](http://jsbin.com/aqayan/1/)

您的问题是服务器端与客户端 id，您必须确保浏览器中的所有 id 都正确。打开 Chrome 网络工具，并手动检查元素是否具有您认为它们在控制台中的 ID。

# java - android应用程序中的自定义单选按钮在禁用时不会变灰

> ID：15698586
> 
> 赞同：1
> 
> 时间：2013-03-29T06:37:07.657
> 
> 标签：java, android, radio-button, custom-controls

我在android中有一个自定义单选按钮。它工作正常。我的问题是，当我禁用这些按钮时，它不会变灰。我该怎么做？这是我的自定义单选按钮示例代码。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
 <item android:state_checked="true" android:drawable="@drawable/radio_select" />
 <item android:state_checked="false" android:drawable="@drawable/radio_holo" />
</selector> 
```

这是我在布局中使用的代码

```
<RadioButton
    android:id="@+id/radioButton2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:button="@drawable/custom_radio_button"
    android:onClick="OnClick"
    android:text="button 1"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="@color/black" /> 
```

另一件事是我需要文本外观小而正常的文本颜色为黑色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:59:32.567

尝试将此添加到您的 custom_radio_button.xml：

```
<item android:state_enabled="false" android:drawable="@drawable/your_grayed_out_btn" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T08:37:11.487

如果您需要根据 的状态更改文本颜色，请`RadioButton`尝试编写一个选择器，如[本](https://stackoverflow.com/a/3565624/1328337)答案所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-24T06:54:24.417

请注意选择器项中的属性，因为它是逻辑 AND。

表示如果您将**android:state_checked="false"**和**android:state_enabled="true"**放在一个项目中。只有当两者都为真时它才会起作用。下面的代码适用于**selected**、**unselected**和**disabled**状态。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
   <item android:drawable="@drawable/ic_radio_btn_inactive" android:state_checked="false" android:state_enabled="true"/>
   <item android:drawable="@drawable/ic_radio_btn_active" android:state_checked="true" android:state_enabled="true"/>
   <item android:drawable="@drawable/ic_radio_btn_diabled"    android:state_enabled="false"/>
</selector> 
```

# iphone - 球在一个圈子里弹跳

> ID：15698588
> 
> 赞同：2
> 
> 时间：2013-03-29T06:37:13.263
> 
> 标签：iphone, objective-c, xcode, ipad, uikit

我成功地在**UIView**中弹跳球。

我在里面创建了球类我正在使用以下代码来移动球。

```
 self.center=CGPointMake(self.center.x + mXSpeed, self.center.y + mYSpeed);
if (!CGRectContainsRect(self.superview.bounds, self.frame))
{

    if (self.frame.origin.x<self.superview.bounds.origin.x)
        mXSpeed=abs(mXSpeed);
    if (self.frame.origin.x>self.superview.bounds.size.width-self.frame.size.width)         
        mXSpeed=-abs(mXSpeed);  
    if (self.frame.origin.y<0)//self.superview.frame.origin.y)          
        mYSpeed=abs(mYSpeed);
    if (self.frame.origin.y>self.superview.bounds.size.height-self.frame.size.height)           
        mYSpeed=-abs(mYSpeed);

    //mYSpeed=-mYSpeed;
} 
```

现在我想在圆圈区域内反弹球，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T06:43:56.787

好的，假设您的帧为 200 x 200 像素。所以你的圆心在 100,100

您可以像这样计算距该点的距离：

```
dist = sqrt((x-100)^2+(y-100)^2) 
```

当这个数字是 100 或更大时，你需要改变你的方向。

一旦你有了这个，你将不得不引入一个方向向量并弄清楚如何偏转圆形物体，但我会让你先试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:43:49.200

只需将中心的 x 和 y 绑定到与圆周的最大`radius`距离（`radius`球的半径在哪里）。它应该是非常简单的几何图形。

# linux - 如何捕获任何用户在 Unix/Linux 中键入的所有命令？

> ID：15698590
> 
> 赞同：7
> 
> 时间：2013-03-29T06:37:22.083
> 
> 标签：linux, shell, unix

我想捕获任何用户在 Unix/Linux 中键入的所有命令。使用脚本命令或 acct 实用程序等选项很少。但是他们的问题是他们把从终端到文件的所有东西都弄糊涂了，或者只是提供了命令的摘要。我正在寻找一个实用程序，它将为我提供任何用户键入的所有命令以及命令的参数。是否可以？有没有其他选择，比如在系统调用中挂上钩子来获得这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-25T23:19:19.693

我知道这是旧的，但我认为脚本命令可能是他正在寻找的？

```
> script my_output_file
Script started, file is my_output_file 
```

[http://www-users.cs.umn.edu/~gini/1901-07s/files/script.html](http://www-users.cs.umn.edu/~gini/1901-07s/files/script.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T10:04:13.020

[在http://administratosphere.wordpress.com/2011/05/20/logging-every-shell-command/](http://administratosphere.wordpress.com/2011/05/20/logging-every-shell-command/)上似乎有一篇很好的关于 shell 审计的文章 。

这考虑了诸如用户历史文件的可靠性之类的事情（并提供了有关改进的信息），而且还讨论了内置于 shell 中的显式审计功能。可能是您使用的任何环境都没有启用审计功能编译的 shell，但如果您有可用的构建的源代码和配置（至少对于任何 Linux 发行版都会这样做），它应该在保持其余配置与默认分发版相同的同时启用审计功能并不难。

这种方法仍然开放的是通过其他一些命令执行的命令 - 或从某个程序中调用的操作系统功能。所以，f.ex。如果您有 perl 或机器上可用的任何其他编程语言解释器，虽然您可能可以审计 perl 的执行，但您无法知道用户告诉 perl 解释器做什么。另一方面，即使使用 shell 审计，我也不确定如果执行 f.ex，是否会看到 perl 执行。从某个编辑器（如 vi）中作为过滤器来处理在编辑器中编写的任何内容。

因此，虽然 shell 审计将为您提供一层审计，但除非您的环境确实严格限制了除 shell 之外的其他执行路径，否则收益不会那么大。

您应该考虑要审核的用户是否真的需要 shell 访问权限 - 如果不需要，请为他们提供更有限的审核功能。也许是一个基于文本的小型菜单系统？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-23T18:39:16.823

您可以使用[史努比记录器](https://github.com/a2o/snoopy "史努比记录器")

**它是什么：** 一个简单的库，它通过 LD 预加载将自身插入到进程和 execv/e() 系统调用之间。它将所有执行的命令记录到 syslog。

**它不是什么：** 安全/审计解决方案——它很容易被规避。它不记录内置的 shell 命令（因为它们是内部的，并且在调用时，shell 不会创建新进程 - 例如 echo vs /bin/echo）。

披露：这里是当前的史努比维护者。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-12T00:10:03.400

获取 bash 源。在 exec 调用周围添加一个记录器。编译它。登录后将其作为您的第一个命令运行。

其他一切都真正需要根权力。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-03T11:11:57.037

有启用审计、tty 记录、黑客和免费工具来做你想做的事，但是，根据你试图控制的环境的规模，你可能会更好地同时使用审计和专注于应对挑战的产品你想解决。一些非常流行的，在一些金融服务客户上使用的是 [ [Observe-IT](http://www.observeit.com)，[Centrify](http://www.centrify.com/enterprise-edition/overview.asp)和[PowerBroker](http://www.beyondtrust.com/Products/PowerBrokerUnixLinux/)

希望这可以帮助

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-01T19:57:46.887

对于零星的录音，我通常会运行

ssh 本地主机 | tee -a 记录的 session.log

这工作得很好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-29T09:33:24.347

抢`/home/victim/.bash_history`或`/home/victim/.config/fish/fish_history`

这些将让您查看用户输入的所有带有 args 的 bash 和 fish shell 命令。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-08T17:44:27.577

解决此问题的最简单方法是，如果您是 root 并且可以通过以这种方式重定向控制台本身来更改系统文件：

如果您使用例如`/bin/sh`作为默认控制台，请将其移动到`/bin/hs`并在下面创建一个类似这样的文件`/bin/sh`：

```
#!/bin/hs

ORIGSHELL=/bin/hs
LOGFILE=/var/log/whatyoulike

OPTIONS="$@"

USER=`whoami`
WEBUSER=web
WILD=NO
WARN=NO

if [ "$USER" = "$WEBUSER" ]
then

  #Ok then - are we doing something wild?
  for ARG in $@
  do
    case "$ARG" in
    *\/lynx)
      WILD=YES
      ;;
    *\/wget)
      WILD=YES
      WARN=YES
      ;;
    *\/curl)
      WILD=YES
      WARN=YES
      ;;
    *\/links)
      WILD=YES
      WARN=YES
      ;;
    *\/fetch)
      WILD=YES
      WARN=YES
      ;;
    esac
  done

  #Are we wild?
  if [ "$WILD" = "YES" ]
  then
    HOST=`hostname`
    IPADDR=`resolveip -s $HOST`
    NETSTAT=`/usr/bin/nighthawk -ape --numeric-hosts --numeric-ports --tcp | grep 'ESTABLISHED web'`

    # Log it.
    echo "`date` [$USER] $IPADDR "$@"" >> $LOGFILE
    echo "$NETSTAT" >> $LOGFILE
  fi
  #Are we REALLY wild?
  if [ "$WARN" = "YES" ]
  then
    # Mail it!
    mail -s 'HACKATTACK' youremail@domain.com < $LOGFILE &
  fi
fi

# Now, do it.
exec $OPERATION "$@"

#we never come here...
exit 0 
```

这只是一个示例，它如何用于跟踪透明的所有内容。你可以做你想做的检查输入。上面的脚本甚至用于查找当前 shell 的发起者，因此您可以对其做出反应。当然，上面的案例检查并不是我们真正使用的；）——而是一个很好的样本。

希望它有帮助，吉米

# jsrender - JSRender 没有显示 JSON 对象的值

> ID：15698593
> 
> 赞同：0
> 
> 时间：2013-03-29T06:37:33.870
> 
> 标签：jsrender

我在将 AJAX 响应呈现到 JSRender 模板时遇到问题。

我正在进行 $.getJSON 调用，成功后我调用 render(data) 函数，我正在使用 console.log 来确保从 $.getJSON 调用接收到的数据是正确的。

```
function createNewsPage(event){
                console.log("inside createNewsPage. Event Target: "+ $(event.target).text());
                $.getJSON("http://query.yahooapis.com/v1/public/yql?q=xyzhere"L,
                          {
                          cache: "true",
                          dataType: "json"
                          },
                          function(data) {insertContent(data);}
                          );
                event.stopPropagation();
                event.preventDefault();
                $("#listviewNews").collapsibleset('refresh');
                return false;
            }

            function insertContent(resp){
                console.log("---data received:\n" + JSON.stringify(resp));
                $("#insertedContent").html(
                                           $("#newsTemplate").render(resp)
                                           ).trigger('create');

            } 
```

我没有收到任何错误，但是在呈现模板时，它会显示单词 [object] 而不是 JSON 有效负载的实际文本内容。

关于为什么会发生这种情况或如何显示 json 对象的文本（字符串）而不是仅仅说 [object] 的任何想法？

这是字符串化响应（正常的 RSS 提要）：

```
{
 "query": {
  "count": 3,
  "created": "2013-03-29T16:12:49Z"
   },
  "results": {
   "item": [
    {
     "title": "BracketRacket: A quiz, a thought and Peeps"
    },
    {
     "title": "Correction: Mandatory Gun Ownership story"
    },
    {
     "title": "Clashes erupt in 2 cities in northern Egypt"
    }
   ]
  }
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:32:30.357

尝试对数据执行 console.dir() 以查看您得到的结果。

你可能需要改变

```
function(data) {insertContent(data);} 
```

到

```
function(data) {insertContent(data.d);} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:03:47.410

我不确定您的模板是什么样子，但这里是我将如何创建一个示例：

```
<script id="tmpl" type="text/html">
    <tr>
      <td>{{>title}}</td>
    </tr>  
</script> 
```

而且我不会传递整个数据对象，而是传递项目：

```
$("#insertedContent").html($("#newsTemplate").render(data.results.item)) 
```

这是工作示例：http: [//jsfiddle.net/Gecew/3/](http://jsfiddle.net/Gecew/3/)

如果您需要其他字段，例如计数，请查看此示例：http: [//jsfiddle.net/Gecew/4/](http://jsfiddle.net/Gecew/4/)

模板需要看起来像这样：

```
<script id="tmpl" type="text/html">
    <span>Number of items: <strong>{{>query.count}}</strong></span>
    <ul>
      {{for results.item}}
      <li>{{>title}}</li>
      {{/for}}
    </ul>  
</script> 
```

在这种情况下，将整个数据对象传递给 render 方法：

```
$("#insertedContent").html($("#newsTemplate").render(data)) 
```

# android - 在 Android 中拥有多个共享首选项文件

> ID：15698605
> 
> 赞同：6
> 
> 时间：2013-03-29T06:38:10.257
> 
> 标签：android, sharedpreferences

是否可以在 Android 中拥有多个 SharedPreference 文件，如果可以，我将如何进行设置？

我计划让第一个 SharedPreference 存储大约 7 个值，这些值不会是基于用户的值。第二个 SharedPreference 将包含基于用户的值。

在这种情况下，如果用户从我的应用程序中退出，则只会清除包含基于用户的值的 SharedPreference。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T06:53:46.130

是的，你可以做到。

例如，您可以执行以下操作来创建 SP

```
SharedPreferences prefs = getSharedPreferences("countPref", Context.MODE_PRIVATE); 
```

如果您仔细观察`countPref`，则用于唯一标识 sharedPref。因此，您可以调用另一个共享偏好，如下所示并使用它。

```
SharedPreferences prefs = getSharedPreferences("countPrefTwo", Context.MODE_PRIVATE);
SharedPreferences prefs = getSharedPreferences("countPrefThree", Context.MODE_PRIVATE); 
```

专业提示：不要对诸如“countPref”之类的键值进行硬编码。相反，将它们作为常量存储在单独的类中，并在整个应用程序中重用它们。

祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T06:40:13.023

是的，您可以为应用程序维护尽可能多的共享首选项文件。只需为它们中的每一个定义单独的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T06:43:42.440

您可以维护多个`SharedPreference`文件。我没有遇到任何禁止或说其他的事情。

您可以在此处遵循解决方案：[Android Shared Preferences](https://stackoverflow.com/q/5734721/450534)来帮助您创建一个帮助程序类，该类将帮助您简化`SharedPreference`文件中数据的存储和检索。

编辑：事实上，如果您有多个文件，文件：（ [http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)）有一个[getSharedPreferences 。](http://developer.android.com/reference/android/content/Context.html#getSharedPreferences)

所以，底线是，是的。您可以拥有多个`SharedPreference`文件。所以这种方法没有错。

# xcode - iPad 集成

> ID：15698610
> 
> 赞同：0
> 
> 时间：2013-03-29T06:38:18.017
> 
> 标签：xcode, ipad, user-interface

我已经开始了一个只使用 iPhone 作为其默认设备的项目，但现在我也想在 iPad 版本中使用这个项目。

我采用了 iPad .xib UIView 和 didFinishLaunching: 方法中使用的所有编码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    } else {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewControlleriPad" bundle:nil];
    }
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

但是当我运行项目时，会出现显示此消息的错误

2013-03-29 11:59:06.339 动画[800:11303] *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：'-[UIViewController _loadViewFromNibNamed:bundle:] 加载了“ViewControlleriPad”笔尖，但视图出口没有放。' *** First throw call stack: (0x159b012 0x12a8e7e 0x159adeb 0x2cd8c8 0x2cddc8 0x2cdff8 0x2ce232 0x21d3d5 0x21d76f 0x21d905 0x226917 0x21eb 0x1ea157 0x1ea747 0x1eb94b 0x1fccb5 0x1fdbeb 0x1ef698 0x25fddf9 0x25fdad0 0x1510bf5 0x1510962 0x1541bb6 0x1540f44 0x1540e1b 0x1eb17a 0x1ecffc 0x1e2d 0x1d55) libc++abi.dylib: terminate called throwing an exception

有谁知道这是什么错误？？？我该如何解决这个问题？提前致谢 ：-）

编辑：

这是我的问题[https://www.dropbox.com/s/v8xzoj7v7wx04iv/pb.mov](https://www.dropbox.com/s/v8xzoj7v7wx04iv/pb.mov)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:01:47.090

对于此错误`'-[UIViewController _loadViewFromNibNamed:bundle:] loaded the "ViewControlleriPad" nib but the view outlet was not set.'` ，请转到您的 xib(nib) 右键单击​​您的视图并连接到文件所有者，如图所示。这解决了您的问题。 ![在此处输入图像描述](../Images/a22094c7888115420960f3a76cdefafb.png)

![在此处输入图像描述](../Images/ab4510561ce9df0a0fc668b077f15b14.png)

# asp.net-mvc - ViewModel 中的实体框架 Lambda 表达式和多对多关系

> ID：15698613
> 
> 赞同：1
> 
> 时间：2013-03-29T06:38:31.127
> 
> 标签：asp.net-mvc, linq, entity-framework

我是使用 Linq to Entities 的 Lambda 表达式的新手，希望在这里得到一些帮助。

我在主页上使用 ViewModel 来显示 2 列位置和公司下的文章列表。

article 类的简化视图如下所示：

```
public class Article
{
    [Key]
    public int ArticleID { get; set; }

    public string Title { get; set; }

    public virtual ICollection<Location> Locations { get; set; }
    public virtual ICollection<Company> Companies { get; set; }

} 
```

位置如下所示：

```
public class Location
{
    [Key]
    public int LocationID { get; set; }

    public string LocationName { get; set; }

    public virtual ICollection<Article> Articles { get; set; }
} 
```

最后，一家公司看起来像这样：

```
public class Company
{
    [Key]
    public int CompanyID { get; set; }

    public string CompanyName { get; set; }

    public virtual ICollection<Article> Articles { get; set; }
} 
```

所以我在文章和公司以及文章和地点之间有多对多的关系。我想在我的页面上显示与位置列表匹配的文章，以及与公司列表匹配的单独文章。

我有一个视图模型：

```
public class HomePageViewModel
{
    public IEnumerable<Article> CompanyArticles { get; set; }
    public IEnumerable<Article> LocationArticles { get; set; }

} 
```

我正在努力使用 Lambda 表达式来根据我将提供的公司和位置列表返回文章。IE：

```
 public ActionResult Index()
    {

        var Companies = new List<Company>
        {
            new Company {CompanyName ="foo"},
            new Company {CompanyName ="bar"}
        };

        var Locations= new List<Location>
        {
            new Location {LocationName ="UK"},
            new Location {LocationName ="US"}
        };
        var viewModel = new HomePageViewModel();

        viewModel.CompanyArticles = // what do I put here?
        viewModel.LocationArticles = // what do I put here?

        return View(viewModel);
    } 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:38:42.230

这应该是你所追求的：

```
 viewModel.CompanyArticles = from a in db.Articles
                                    where
                                    (
                                    from c in a.Companies
                                    where InterestingCompanies.Contains(c.Name)
                                    select c
                                    ).Any()
                                    select a;

        viewModel.LocationArticles = from a in db.Articles
                                    where
                                    (
                                    from l in a.Locations
                                    where InterestingLocations.Contains(l.Name)
                                    select l
                                    ).Any()
                                    select a; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:37:27.080

我真的认为你不需要你的 ViewModel。因为你没有多对多关系之间的额外信息。

```
var articles = new List<Article>
{
    new Article {Title = "any1", Locations = new List<Location>(), 
                 Companies = new List<Company>()},
    new Article {Title = "any2", Locations = new List<Location>(), 
                 Companies = new List<Company>()}

};

articles[0].Companies.Add(Companies[0]);
articles[0].Locations.Add(Locations[0]); 
```

# php - 如何截取 HtML div 内容的屏幕截图并在 javascript 中另存为 PdF 文件

> ID：15698616
> 
> 赞同：0
> 
> 时间：2013-03-29T06:38:44.970
> 
> 标签：php, javascript, html

我正在用 PHP 和 javascript 制作一个 Web 应用程序。我有一个表格，用户填写他们的详细信息并可以邮寄，用户详细信息应该是 PDF 文件中的邮件。为此，我想在我的表单中截取特定 div 的屏幕截图，内容 7 将其保存到 PDF 文件中。

或使用 javascript 将 HTML div 和过去的内容复制回已经存在的 PDF 文件。请帮助我，如果你有任何替代方法，请向我推荐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:45:59.563

为了打印页面的任何部分，您可以使用`print`功能。它将 DOM 作为参数，解析它并打印它。（通过打印，您可以将其转换为 PDF）。

例如，如果您在 Stackoverflow 的范围内运行以下代码，则可以打印指定的 div：

```
print($(".post-text")); 
```

![在此处输入图像描述](../Images/b48b9dd45ec6a1ba2a8d2784885cd06f.png)

我担心 Javascript 中没有很好的功能可以将 DOM 转换为 PDF。你可以试试[飞碟](http://code.google.com/p/flying-saucer//)。您可能还想将 DOM 的内容发送到 PHP 页面，将其转换为 PDF，然后返回数据。

为了截取屏幕截图，您可以使用[html2canvas](http://html2canvas.hertzen.com/)。

# kernighan-and-ritchie - K&R 练习 2-6 真正需要什么功能？

> ID：15698619
> 
> 赞同：4
> 
> 时间：2013-03-29T06:39:03.287
> 
> 标签：kernighan-and-ritchie

> 练习 2-6。编写一个函数 setbits(x,p,n,y) 返回 x，其中从位置 p 开始的 n 位设置为 y 的最右边 n 位，其他位保持不变。

我一直试图在纸上处理这个功能一两个小时，但我没有得到任何结果。

我解释该函数的方式是，任意长度的位字段 x 是从最右边的`n`位开始查看它的位。`p`将这些`n`位更改为位于`n`任意长度位字段 y 中最右侧位中的相同位。

示例：`p = 7` `n = 9`以 x 作为顶场，y 是中间，结果是底场。

![在此处输入图像描述](../Images/74bd2f275080b37b57447bf304acdc02.png)

* * *

我无法确定如何使用任意大小的位字段来做到这一点。我应该使用`sizeof(x) * 8`还是没有必要？

我将不胜感激您可以提供有关如何实现此类功能的任何提示。

我还想知道这个练习的任何其他解释，可能是一个更容易的版本，尽管我确信这个可以完成。考虑到我花了多长时间，我希望能就此事发表第二意见，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T07:03:06.750

由于`x`和`y`是整数，因此您知道位字段的大小不能大于整数中的位数。

由于这是C，假设最右边的位是#0，所以`p = 0, n = 1`意味着替换最右边的位`x`。

你想做的是：

1.  创建一个位掩码——一个数字，最右边的`n`位设置为 1，其余的位设置为 0；

2.  用位`and`掩码按位`y`提取最右边的`n`位`y`并将其向左移动`p`；

3.  将位掩码`p`位向左移动以创建一个位掩码，该位掩码将对`n`从位置开始的位进行操作`p`；

4.  按位`and`反向移位位掩码，`x`以屏蔽要替换的位；

5.  按位`or`计算 2 和 4 的结果来得到你的答案。

翻转以在代码中查看它：

> ```
> int 位掩码 = ~((~0) << n);
> 返回 ((位掩码 & y) << p) | (~(位掩码 << p) & x);
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-22T03:07:19.263

这是我对这个练习的解决方案，我为自己添加了很多评论——希望有人会觉得它有用。

```
#include <stdio.h>

/* k&r exercise 2-6 */

int setbits(unsigned x, int p, int n, unsigned y);

int main(void) {
  setbits(218, 3, 3, 170);
}

/*
 * returns x with the n bits that begin at position p
 * set to rightmost n bits of y, leaving other bits
 * unchanged.
 *
 * all comments for setbits(218, 3, 3, 170)
 */
int setbits(unsigned x, int p, int n, unsigned y) {

  // get the mask for y - it is a n long mask.
  unsigned mask = ~0;           // 1111 1111
  mask = mask << n;     // shift n to get 1111 1000
  mask = ~mask;         // flip to get    0000 0111

  // AND y and the mask to 'delete' the bits that are not 1's
  // therefore extracting the desired n bits 
  y = y & mask;  // result 0000 0010 (decimal 2)

  // shift y p bits to the left to place the desired bit pattern where we need it
  // it will not be used until the last step though.
  y = y << p;

  // now we need to reuse the mask we've created earlier. reminder, currently
  // it is 0000 0111\. we need to move the 1's to the left to 'aim' at the
  // spot we want to mask in x.
  mask = mask << p;

  // in order to keep the bits we want in x, we need to AND x with the inverted mask
  // inverting the mask:
  mask = ~mask;

  // &'ing x and mask:
  x = x & mask;

  // now finally, to insert the bit pattern we extracted from y, we need to OR
  // x and y.

  x = x | y;
  printf("%d\n", x); // expected: 210;

} 
```

# android - 如何缩放视图并将其保存到 SDCard

> ID：15698621
> 
> 赞同：2
> 
> 时间：2013-03-29T06:39:25.827
> 
> 标签：android, view, scale

我现在有一个`View`，我正在尝试将其保存为固定大小，例如保存`500*666`到 sdcard 中。图像保存成功，但图像保存如下。图像另存为整个图像的角落请参阅附图。

代码 ：

```
 private void onSave(final View v) {
 v.setMinimumWidth(500);
        v.setMinimumHeight(666);
Bitmap viewBitmap_save = null;

                            savingdialog();
                            DisplayMetrics dm = new DisplayMetrics();
                            getWindowManager().getDefaultDisplay().getMetrics(
                                    dm);
                            Display display = getWindowManager()
                                    .getDefaultDisplay();

                            viewBitmap_save = Bitmap.createBitmap(500, 666,
                                    Bitmap.Config.ARGB_8888);// i
                            Canvas canvas = new Canvas(viewBitmap_save);
                            v.draw(canvas);
                            try {
                                Random randomGenerator = new Random();
                                long RANDOMFILENUMBER = randomGenerator
                                        .nextLong();
                                File wallpaperDirectory = new File(
                                        "/sdcard/Image Telling/");
                                // have the object build the directory
                                // structure, if needed.
                                wallpaperDirectory.mkdirs();
                                // create a File object for the output file

                                // FileOutputStream outStream = new
                                // FileOutputStream(file);
                                File outputFile = new File(wallpaperDirectory,
                                        RANDOMFILENUMBER + ".png");
                                FileOutputStream outStream = new FileOutputStream(
                                        outputFile);
                                viewBitmap_save.compress(CompressFormat.PNG,
                                        100, outStream);

                                sendBroadcast(new Intent(
                                        Intent.ACTION_MEDIA_MOUNTED,
                                        Uri.parse("file://"
                                                + Environment
                                                        .getExternalStorageDirectory())));

                            } catch (Exception e) {
                                // TODO: handle exception
                            }
} 
```

我将宽度和高度作为修复，因为我需要图像作为固定大小。如何缩放视图？请帮我。

![在此处输入图像描述](../Images/afa4a35e39cc4b03d6784c66ed4f54ec.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:55:22.217

我认为您必须参考这些链接可能会根据需要获得输出。

*   [Android：高质量的图像大小调整/缩放](https://stackoverflow.com/questions/4207562/android-high-quality-image-resizing-scaling)

*   [Android 图像缩放](https://stackoverflow.com/questions/5126654/android-image-scaling)

*   [http://android-er.blogspot.in/2010/07/scale-bitmap-image-using-matrix.html](http://android-er.blogspot.in/2010/07/scale-bitmap-image-using-matrix.html)

试一次

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T07:12:54.883

只是一个建议。

不要给出任何高度，宽度来查看，然后*获取原始视图*的位图。

一旦你从视图中创建了位图，然后应用缩放..你可以使用`Bitmap.createScaledBitmap()`

然后保存该缩放位图。

# jquery - 选择输入时更改按钮

> ID：15698624
> 
> 赞同：1
> 
> 时间：2013-03-29T06:39:30.110
> 
> 标签：jquery, button, input

我正在尝试使是/否输入更改按钮的功能。如果输入是，那么我希望按钮是一个超链接，但如果它不是，我希望它带你到下一个 div（一旦单击按钮）

我不知道该怎么做。

这是我所拥有的

我在想象我需要一个 jquery 的东西来这样开始：

```
$('input:radio[name="yes"]').change(
function(){
    if ($(this).val() == 'Yes') {
        $('.1').css('display', 'block');
    }
    else {
        $('.2').css('display', 'block');
    }
}); 
```

我尝试给按钮一个不同的类，然后尝试显示，但这不起作用。

```
<form>
    <input type="radio" name="yes" value="Yes"/>Yes
<input type="radio" name="yes" value="No"/>No
</form>

<a href="#"><button>Yes</button></a>
<button class="no">No</button> 
```

这就是按钮的样子

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T06:47:33.517

你应该试试这个：

`[FIDDLE](http://jsfiddle.net/eFC2j/)`

### HTML：

```
 <input type="radio" name="button" value="Yes" />Yes
 <input type="radio" name="button" value="No" />No

 <button class='yes'>Yes</button>
 <button class="no">No</button> 
```

### jQuery：

```
 $('input:radio').change(function () {
   if ($(this).val() == 'Yes') {
      $('[class="yes"]').show().siblings('button').hide();
   } else {
      $('[class="no"]').show().siblings('button').hide();
   }
}); 
```

尝试使用相同的名称对它们进行分组并尝试在此单选按钮上更改事件，然后显示相应的按钮。

甚至更好的：

```
$('input:radio').change(function () {
  var rad = this.value.toLowerCase();
  $('[class="' + rad + '"]').show().siblings('button').hide();
}); 
```

`[fiddle](http://jsfiddle.net/eFC2j/1/)`

# telerik - 当我将 radgrid 详细信息表转换为默认编辑模式时，分页和过滤不起作用

> ID：15698629
> 
> 赞同：1
> 
> 时间：2013-03-29T06:39:52.410
> 
> 标签：telerik, radgridview

嗨，请任何人帮助我.. 我有一个telerik radgrid，每个记录都有一个详细表，显示子记录。当我展开每条记录时，我的要求是只获取默认编辑模式的详细信息。通过在网格预渲染方法中编写编辑逻辑，我能够成功完成此任务。问题是在更改为编辑模式后，详细表上的任何回发事件都无法正常工作，例如分页和过滤功能等。

我需要添加的额外功能是什么。我正在为我的 radgrid 使用 linq to sql 数据源。

# javascript - 如何解决在 Closure Compiler 中重命名对象属性的问题？

> ID：15698631
> 
> 赞同：2
> 
> 时间：2013-03-29T06:39:59.600
> 
> 标签：javascript, obfuscation, google-closure-compiler

我有一个使用类似于以下方法的 JS 库：

```
this.on('doAction', function (args) {
   console.log(args.name);
   console.log(args.arg1 + ' ' 9 args.arg2);
});
this.trigger('doAction', {name: 'write', arg1: 1, arg2: 2}); 
```

但是在高级优化对象属性之后，`name`将是 , , ，所以我无法在处理程序中获取它们。我知道我可以对属性名称使用引号来防止它发生变化，但是有没有更好的方法，比如特殊的 util 函数，比如：`arg1``arg2``a``b``c``doAction`

```
this.trigger('doAction', MYAPP.util.intoObject{name: 'write', arg1: 1, arg2: 2}); 
```

这允许我保存对象属性名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T01:55:00.923

所有属性都应该一致地重命名。例如，您的示例编译为：

```
this.c("doAction", function(a) {
  console.log(a.name);
  console.log(a.a + " " + a.b)
});
this.d("doAction", {name:"write", a:1, b:2}); 
```

您可以看到属性以非破坏方式重命名。除非启用了实验性的基于类型的优化，否则这种行为总是如此，但即使这样，也应该正确处理这种特定情况。

如果您需要绝对不重命名属性，您可以在 extern 文件中定义一个接口并将您的方法类型转换为该类型。

```
/** @externs */
/** @interface */
function myInterface() {}
/** @type {number} */
myInterface.prototype.arg1 = 0; 
```

在你的例子中：

```
this.on('doAction', /** @param {myInterface} args */  function (args) {
   console.log(args.name);
   console.log(args.arg1 + ' ' + args.arg2);
});
this.trigger('doAction',
  /** @type {myInterface} */ ({name: 'write', arg1: 1, arg2: 2})); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T20:56:36.837

我在使用需要基于对象的属性的 jquery 方法时遇到了这个问题。我通过将所有键名放在引号中来解决它，然后闭包编译器不会弄乱它们。

所以上面的代码会变成：

```
this.trigger('doAction', {'name': 'write', 'arg1': 1, 'arg2': 2}); 
```

# php - php,autoresize 图像正在工作。但它存储在本地，我想保存在单独的文件夹中

> ID：15698632
> 
> 赞同：0
> 
> 时间：2013-03-29T06:40:03.940
> 
> 标签：php, html, mysql

这是我调整大小后的代码，图像直接存储在本地文件夹中。我已更改为指定文件夹。

```
 function imagecrop($img_name,$newname,$type,$modwidth,$modheight)
    {

list($width, $height) = getimagesize($img_name) ; //get width & height in array         list

    $tn = imagecreatetruecolor($modwidth, $modheight); 
if(!strcmp("image/png",$type))
{
imagealphablending($tn, false); //For transparent BackGround
imagesavealpha($tn, true);  
}

   if(!strcmp("image/jpg",$type) || !strcmp("image/jpeg",$type) || !strcmp("image/pjpeg",$type))
    $src_img=imagecreatefromjpeg($img_name);

    if(!strcmp("image/png",$type))
    $src_img=imagecreatefrompng($img_name);

    if(!strcmp("image/gif",$type))
        $src_img=imagecreatefromgif($img_name);

      imagecopyresampled($tn, $src_img, 0, 0, 0, 0, $modwidth, $modheight, $width, $height) ; 

       if(!strcmp("image/png",$type))  
       {
   imagesavealpha($src_img, true);
   $ok=imagepng($tn,$newname);
       }
   else if(!strcmp("image/gif",$type))  
       {
   $ok=imagegif($tn,$newname);
   }
       else 
   {
       $ok=imagejpeg($tn,$newname);
   }

    if($ok==1)
  {
    return "<img src=".$_FILES['userfile']['name']." border='0'>";
  }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:24:43.790

保存时需要提供新图像的路径。试试下面的代码

```
function imagecrop($img_name,$newname,$type,$modwidth,$modheight)
{

    $newname = "/home/public_html/images/$newname"; //just an example

    list($width, $height) = getimagesize($img_name) ; //get width & height in array         list

    $tn = imagecreatetruecolor($modwidth, $modheight); 
    if(!strcmp("image/png",$type))
    {
       imagealphablending($tn, false); //For transparent BackGround
       imagesavealpha($tn, true);  
    }

   if(!strcmp("image/jpg",$type) || !strcmp("image/jpeg",$type) || !strcmp("image/pjpeg",$type))
    $src_img=imagecreatefromjpeg($img_name);

    if(!strcmp("image/png",$type))
    $src_img=imagecreatefrompng($img_name);

    if(!strcmp("image/gif",$type))
        $src_img=imagecreatefromgif($img_name);

      imagecopyresampled($tn, $src_img, 0, 0, 0, 0, $modwidth, $modheight, $width, $height) ; 

       if(!strcmp("image/png",$type))  
       {
   imagesavealpha($src_img, true);
   $ok=imagepng($tn,$newname);
       }
   else if(!strcmp("image/gif",$type))  
       {
   $ok=imagegif($tn,$newname);
   }
       else 
   {
       $ok=imagejpeg($tn,$newname);
   }

    if($ok==1)
  {
    return "<img src=".$_FILES['userfile']['name']." border='0'>";
  }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:27:15.193

在输出图像函数（imagepng、imagegif、imagejpeg）的第二个参数中添加目标路径。来自 PHP 手册：

> **文件名**- 保存文件的路径。如果不设置或为NULL，将直接输出原始图像流。

# hadoop - HDInsight - 群集没有响应

> ID：15698639
> 
> 赞同：1
> 
> 时间：2013-03-29T06:40:33.087
> 
> 标签：hadoop, azure-hdinsight

我刚开始研究 HDInsight 但它无法正常工作..

当我安装新的 HDInsight 时，它运行良好，但如果我重新启动或重新启动系统，服务器无法识别群集。

消息显示为“您的集群“本地 (hdfs)”没有响应。请单击此处导航到集群。什么也不工作。

我怎么解决这个问题？

我知道 applicationpoolidentity 中的一些问题，所以我厌倦了使用 powershell 更改它，但仍然无法正常工作..

我正在使用 IIS 7.5 在 Win7 Ultimate 上运行它

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:15:36.463

首先，我会要求您在重新启动后检查集群中正在运行的所有 HDInsight 特定服务，如下所示：

![在此处输入图像描述](../Images/b95cec9afe8558cb1188decccfd37441.png) 如果任何服务未启动，请启动它。接下来你可以做的是使用命令格式化namenode名称，它会

```
hadoop namenode -format 
```

格式化后，您将看到在 @ C:\hadoop\hdfs\nn 创建的新名称节点文件夹，其中包含一些文件。如果您仍然看到问题，请在[此处](http://social.msdn.microsoft.com/Forums/en-US/hdinsight)联系 HDInsight 支持论坛。

# racket - Racket 中的列表操作

> ID：15698654
> 
> 赞同：0
> 
> 时间：2013-03-29T06:41:39.173
> 
> 标签：racket

是否有列表操作之类的

'(xy) '(1 2)

（替换'（xy）'（1 2）（+'x'y））

-> （每个符号由数字列表相对匹配，并替换）

-> (x = 1, y = 2)

-> (+ 1 2)

-> 3

我无法从参考中找到任何想法。

[http://docs.racket-lang.org/reference/pairs.html](http://docs.racket-lang.org/reference/pairs.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:01:49.020

您可以使用`let`：

```
(let ((x 1)
      (y 2))
  (+ x y)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T23:28:33.043

如果您试图表示名称和值之间的映射（“字典”），有几种方法可以做到这一点。Racket 提供了一种*哈希*类型，可以将名称与值相关联。[您可以在指南](http://docs.racket-lang.org/guide/hash-tables.html)中了解它们。有一种更通用的方法可以在 Racket 中使用类似字典的值（在[球拍/字典](http://docs.racket-lang.org/reference/dicts.html)库中描述），它适用于不同的数据类型，而不仅仅是散列。

# php - CDN 图像参考

> ID：15698656
> 
> 赞同：0
> 
> 时间：2013-03-29T06:41:44.870
> 
> 标签：php, image

我有一个网站，允许用户上传他们自己的图片...图片将上传到我的服务器... www.mydomain.com/images/

我目前将图像称为：

但如果我想使用 CDN，

1.  在复制到 CDN 之前，图像是否仍会上传到我的服务器？

2.  我将如何引用图像以便它显示 CDN 图像？.. 请记住，我假设 CDN 有多个服务器和多个子域......所以如何知道要引用哪个子域/服务器。

# iphone - 识别当前到达的请求对象响应 restkit v0.20

> ID：15698661
> 
> 赞同：0
> 
> 时间：2013-03-29T06:41:57.187
> 
> 标签：iphone, ios, xcode, restkit

我正在对同一服务进行两次发布调用，以如何识别随其各自请求到达的响应。

```
req1 = post {"status" = "1"} 
req2 = post {"status" = "0"}

response {"data" = "xxx"}
response {"data" = "yyy"} 
```

如何确定哪个响应是针对 req1 和 req2。我正在使用restkit v0.20。

```
-(void)fetchCoursesWithToken:(NSString *)token  courseType:(NSInteger)courseType{
AppSettings *settings = [AppSettings sharedAppSettings];
NSString *userCourseServiceURL = settings.getCoursesURL;

RKObjectManager *manager = [RKObjectManager sharedManager];

[settings showActivityIndicatorWithMessage:@""];

CourseRequest *reqObj = [CourseRequest new];
reqObj.loginToken = token;
reqObj.courseType = [NSString stringWithFormat:@"%d",courseType];

RKManagedObjectRequestOperation *operation = [manager appropriateObjectRequestOperationWithObject:reqObj method:RKRequestMethodPOST path:userCourseServiceURL parameters: nil];

[operation setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
    [settings removeActivityIndicator];

    NSHTTPURLResponse *response = [[operation HTTPRequestOperation] response]; //operation is an RKObjectRequestOperation

    NSDictionary *headerDictionary = [response allHeaderFields];

    NSString *status = [headerDictionary objectForKey:@"X-NTST-Request-Status"];

    if ([status isEqualToString:@"ERR"]) {
        NSString *errorMessage = [headerDictionary objectForKey:@"X-NTST-Request-Note"];
        NSLog(@"Error Occured :%@",errorMessage);
    }
    else if ([status isEqualToString:@"WARN"]) {
        NSString *errorMessage = [headerDictionary objectForKey:@"X-NTST-Request-Note"];
        NSLog(@"Error Occured :%@",errorMessage);
    }
    if ([status isEqualToString:@"OK"]) {
        NSLog(@"Succes status:%@",status);
        arr = [[NSMutableArray alloc] initWithArray:[mappingResult array]];
        [self.delegate responseArrived:arr];
    }

} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    NSLog(@"It Failed: %@", error);
    [settings removeActivityIndicator];
}];
[RKObjectManager.sharedManager enqueueObjectRequestOperation:operation];
 } 
```

我正在从视图控制器调用相同的函数

```
 [self.service fetchCoursesWithToken:@"ds"    courseType:0 ];

[self.service fetchCoursesWithToken:@"ds"    courseType:1 ]; 
```

当响应到达时，我有回调委托来查看控制器。因为我使用相同的函数响应回调到相同的块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:47:59.827

Restkit 是基于块的，因此当您发出请求时，您可以传递一个块（实际上是两个，一个代表成功，一个代表失败）在响应到来时执行。

由于块与单个请求相关联，因此无需区分。

# iphone - JMImagecache 内存泄漏

> ID：15698668
> 
> 赞同：0
> 
> 时间：2013-03-29T06:42:37.030
> 
> 标签：iphone, objective-c, xcode, automatic-ref-counting

我正在开发将图像下载并显示为网格样式的应用程序。

我使用以下代码将图像加载到我的自定义视图中。

```
MyView *myview = (MyView *)[self.imageListingScrollView viewWithTag:100+counter1];
        myview.imgPhoto.image = [[JMImageCache sharedCache] imageForURL:myview.imageURL delegate:self];
        myview.imageURL = nil; 
```

它工作正常。但它会产生内存问题。为了找到内存问题，我使用了“仪器”。它给了我内存泄漏

```
UIImage *i = [self imageFromDiskForURL:url]; 
```

将 JMImageCache.m 文件放入以下方法

```
- (UIImage *) imageForURL:(NSString *)url delegate:(id<JMImageCacheDelegate>)d {
if(!url) {
    return nil;
}

id returner = [super objectForKey:url];

if(returner) {
    return returner;
} else {
    UIImage *i = [self imageFromDiskForURL:url];
    if(i) {
        [d imageComeFromDisk:url image:i];
        [self setImage:i forURL:url];
        return i;
    }

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSError *error =nil;
        NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:url] options:NSDataWritingAtomic error:&error];
        if(error){
            NSLog(@"error: %@",[error description]);
        }
        UIImage *i = [[[UIImage alloc] initWithData:data] autorelease];

        NSString* cachePath = cachePathForURL(url);
        NSInvocation* writeInvocation = [NSInvocation invocationWithMethodSignature:[self methodSignatureForSelector:@selector(writeData:toPath:)]];
        [writeInvocation setTarget:self];
        [writeInvocation setSelector:@selector(writeData:toPath:)];
        [writeInvocation setArgument:&data atIndex:2];
        [writeInvocation setArgument:&cachePath atIndex:3];
        NSLog(@"%@",cachePath);
        data = nil;
        [self performDiskWriteOperation:writeInvocation];
        [self setImage:i forURL:url];

        dispatch_async(dispatch_get_main_queue(), ^{
            if(d) {
                if([d respondsToSelector:@selector(cache:didDownloadImage:forURL:)]) {
                    if(i==nil){
                        NSLog(@"image not get.");
                    }
                    [d cache:self didDownloadImage:i forURL:url];
                }
            }
        });
    });

    return nil;
} 
```

}

它创建高达 150 MB 的内存。请给我建议以减少此内存问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T06:50:45.533

像这样创建 UIImage 实例时使用@autoreleasepool，即使您的应用程序启用了 ARC 以避免内存泄漏。

```
@autoreleasepool{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSError *error =nil;
        NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:url] options:NSDataWritingAtomic error:&error];
        if(error){
            NSLog(@"error: %@",[error description]);
        }
        UIImage *i = [[[UIImage alloc] initWithData:data] autorelease];

        NSString* cachePath = cachePathForURL(url);
        NSInvocation* writeInvocation = [NSInvocation invocationWithMethodSignature:[self methodSignatureForSelector:@selector(writeData:toPath:)]];
        [writeInvocation setTarget:self];
        [writeInvocation setSelector:@selector(writeData:toPath:)];
        [writeInvocation setArgument:&data atIndex:2];
        [writeInvocation setArgument:&cachePath atIndex:3];
        NSLog(@"%@",cachePath);
        data = nil;
        [self performDiskWriteOperation:writeInvocation];
        [self setImage:i forURL:url];

        dispatch_async(dispatch_get_main_queue(), ^{
            if(d) {
                if([d respondsToSelector:@selector(cache:didDownloadImage:forURL:)]) {
                    if(i==nil){
                        NSLog(@"image not get.");
                    }
                    [d cache:self didDownloadImage:i forURL:url];
                }
            }
        });
    });

    return nil;

} 
```

# java - Java 中的继承：当我已经扩展了一个类时扩展另一个类

> ID：15698676
> 
> 赞同：1
> 
> 时间：2013-03-29T06:43:22.393
> 
> 标签：java, swing, inheritance, jframe, extend

我必须将 A 类的变量扩展到 B 类。为此我必须写：

```
public class B extends class A 
```

但就我而言，这个地方已经被“扩展 javax.swing.JFrame”占据了。看起来像：

```
public class B extends javax.swing.JFrame 
```

请建议任何将变量从 A 类继承到 B 类的方法。我对这个领域很陌生。所以请解释一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T06:45:51.077

要么使用组合，要么在类 B 中创建一个扩展类 A 的内部类。

```
 class B extends JFrame {
     A a = ... // this is one option

     class C extends A {
         // this is another option 
     }  

 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T06:46:51.847

Java 不支持多重继承，因此不能同时扩展`A`和`JFrame`。

你可以`A`变成一个接口，或者嵌入一个`A`into的实例`B`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T06:46:17.247

你可以这样做：

```
public class A extends javax.swing.JFrame{

...

} 
```

进而

```
public class B extends A{

...

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T06:48:34.243

使用组合或聚合。了解有关`Has-A`关系的更多信息。

阅读*[这个](https://stackoverflow.com/questions/734891/aggregation-versus-composition)*和*[这个](http://javapapers.com/oops/association-aggregation-composition-abstraction-generalization-realization-dependency/)*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-29T06:48:53.317

Java 不支持多重继承。但是Java仍然提供了其他方式来实现多重继承。

1.  检查是否可以使用接口解决它，因为您可以实现多个接口。
2.  使用组合或聚合。从根本上说，我们使用继承来实现代码的可重用性。同样可以使用组合/聚合来实现。
3.  使用内部类（您可以使用内部类扩展多个类）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-29T07:31:22.510

使 A 类成为接口，B 像这样实现它：

```
public interface A{
public ....[Variables] 
}

public class B extends javax.swing.JFrame implements A{
   ...
} 
```

# python-2.7 - 在python中搜索文本文件

> ID：15698677
> 
> 赞同：-1
> 
> 时间：2013-03-29T06:43:23.580
> 
> 标签：python-2.7

我有一个带有一些 url 和“-”符号的文本文件。我想查找是否有与用户提供的域名不匹配的网址？如果是这样，我必须打印一条消息，否则如果它只是给定的域名和“-”符号另一条消息？我该怎么做？谢谢

```
#!/usr/bin/python

import re
import string

print 'Enter Your Domain Name'
domain = input()

foo = open('new.txt','r')
seen = set()
lines = foo.readlines()

for line in lines:
    match = re.search(domain,line)
    for line in lines:
    match = re.search(domain,line)
    if match: seen.add("Message1")
    else: seen.add('Message2')

foo.close() 
```

示例文本文件：

```
http://www.mysite.com
-
http://www.mysite.com
http://www.yoursite.com
-
http://www.mysite.com
http://www.yoursite.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:40:51.387

这是我的代码版本！;) 尝试 raw_input() 而不是 input()

如果该行与域匹配，则很好。否则用“-”匹配。

```
#!/usr/bin/python
import re

domain = raw_input('Enter Your Domain Name: ')

foo = open('new.txt','r')
lines = foo.readlines()
foo.close()

ok_count = 0
not_ok_count = 0

for line in lines:
    match = re.search(domain,line)
    if match:
        ok_count += 1
    else:
        match = re.search("-",line)
        if match:
            ok_count += 1
        else:
            not_ok_count += 1

if not_ok_count == 0:
    print "File contains valid domains"
else:
    print "File contains invalid domains" 
```

希望这可以帮助！

维韦克

# javascript - 如何在没有 Session 的情况下从 Meteor 中的事件处理程序修改模板实例？

> ID：15698678
> 
> 赞同：9
> 
> 时间：2013-03-29T06:43:36.347
> 
> 标签：javascript, meteor

我正在尝试实现可扩展的帖子评论的层次结构，例如 Quora，以便用户可以单击评论并查看任何回复。

为此，我想跟踪每个“评论”模板实例是否“扩展”，切换事件处理程序中的状态。

我可以使用整个堆栈会话变量（即每个评论一个）来做到这一点，但这似乎很笨拙，因为在任何给定页面上都有任意数量的评论。

下面是我目前正在尝试的一个片段。

JS：

```
Template.comment_item.events = {
    'click #comment-content': function( e, instance ) {
        this.expanded = true;  // also tried instance.data.expanded = true
    }
};

Template.comment_item.helpers({
    showChildComments: function(){
      this.expanded;
    }
}); 
```

HTML：

```
<template name="comment_item">
  <li class="comment comment-displayed" id="{{_id}}">
   <div class="comment-body">
      <div id="comment-content">
        <!-- some comment data here -->
      </div>
      {{#if showChildComments}}
      <ul class="comment-children comment-list">
          {{#each child_comments}}
            {{> comment_item}}
          {{/each}}
      </ul>
      {{/if}}
    </div>
  </li>
</template> 
```

不幸的是，当我单步执行时，似乎在 showChildComments 助手中，模板实例看不到扩展变量。我确实在文档中注意到它说 instance.data 在事件映射中是只读的。

有没有办法直接修改事件映射中的模板实例？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T19:14:17.957

*您可以在其创建*的事件处理程序中为模板实例创建属性。您可以访问模板实例作为事件映射函数的第二个参数。

```
Template.comment_item.created = function() {
  this.showChildren = false;
};

Template.comment_item.events({
  'click .comment-content': function(event, template) {
    template.showChildren = true;
  }
}); 
```

然而：

1.  您无法从模板助手中访问您的模板实例及其属性。
2.  无论如何，您的模板助手需要被赋予一个“反应性”数据源，以便它在现场进行更改。
3.  即使您遇到了创建自己的响应式数据源的麻烦，您使用此功能的方法*仍然*会为页面上的 X 数量的评论创建 X 数量的变量。这似乎是为了实现一个功能而在内存中拥有大量变量。

我建议您改为将模板简化为：

```
<template name="comment_item">
  <li class="comment comment-displayed" id="{{_id}}">
   <div class="comment-body">
      <div class="comment-content">  <!-- changed this to a class -->
        <!-- some comment data here -->
      </div>
    </div>
  </li>
</template> 
```

然后以编程方式将子评论添加到事件处理程序的评论正文中。请记住 Meteor 文档中的以下内容：

> 您声明为的模板`<template name="foo"> ... </template>` 可以作为函数 Template.foo 访问，该函数在调用时返回一个 HTML 字符串。

哦，你将上下文作为 JSON 对象传递给模板函数。例如：

```
var context = {_id: comment_id, text: "Comment text!"};
Template.comment_item(context); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-21T01:13:26.260

## 更新：

Meteor 现在允许您**从帮助程序中访问模板实例**，使用`Template.instance()`. 事实上，这是增加模板可重用性的好方法。

下面的示例来源来自[这篇文章](http://meteorcapture.com/a-look-at-local-template-state/)，作者是 Percolate Studio 的 David Burles。

```
Template.hello.created = function () {
  // counter starts at 0
  this.state = new ReactiveDict();
  this.state.set('counter', 0);
}; 

Template.hello.helpers({
  counter: function () {
    return Template.instance().state.get('counter');
  }
});

Template.hello.events({
  'click button': function (event, template) {
    // increment the counter when button is clicked
    template.state.set('counter', template.state.get('counter') + 1);
  }
}); 
```

[这篇文章](http://meteorcapture.com/a-look-at-local-template-state/)很好地说明了为什么你会想要这种方法。

在模板实例中存储信息的优点是您可以使模板越来越模块化，并减少对它们使用位置的依赖。

# iphone - 设置 Wi-Fi 连接

> ID：15698680
> 
> 赞同：1
> 
> 时间：2013-03-29T06:43:47.770
> 
> 标签：iphone, ios, wifi, preferences, reachability

我是 iPhone 开发的新手。我正在开发一个应用程序，我在其中使用 Settings.bundle，它允许用户打开\关闭 Wi-fi 连接。当用户从应用程序设置更改设置时，有什么方法可以打开\关闭设备 wi-fi ？？？我想根据设置包的更改打开\关闭 wi-fi。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T06:55:19.107

连接到无线不是您的应用程序的工作！您无法从应用程序内部更改 iPhone 的 wifi 设置。

据我所知，也许越狱手机可以做得更多。

您只需检查您的手机是否与 Wifi 或其他网络连接，因此 [http://developer.apple.com/iphone/library/samplecode/Reachability/](http://developer.apple.com/iphone/library/samplecode/Reachability/)将是最好的起点。查看 Apple 提供的示例。

# android - 如何在 AchartEngine Bar Graph Android 中使用 Repaint

> ID：15698687
> 
> 赞同：1
> 
> 时间：2013-03-29T06:44:22.253
> 
> 标签：android, bar-chart, achartengine, repaint

我有一个列表，其中的值将每 15 秒更新一次，我想重新绘制条形图但不知道在哪里调用它，这是我的代码，请帮助我这样做。

```
public GraphicalView createIntentAll() {
    String[] titles = new String[] { "Amount"};
    double[] d= new double[a2.size()] ;
    for(int i=0;i<a2.size();i++){
    d[i] = a2.get(i);
    }

    List<double[]> values = new ArrayList<double[]>();
    values.add(d);  
        System.out.println("=========="+values.get(0));
        int[] colors = new int[] { Color.parseColor("#77c4d3")};
        XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);
        renderer.setOrientation(Orientation.HORIZONTAL);
        setChartSettings(renderer, "Monthly Details", "Months", "Earnings", 0.5,
                12.5, 0, yaxis, Color.BLACK, Color.BLACK);
        renderer.setXLabels(1);
        renderer.setYLabels(10);

        for(int i =0;i<y2.size();i++){
            renderer.addXTextLabel(i+1, y2.get(i));
            System.out.println("==y2==="+y2.get(i));
        }
        int length = renderer.getSeriesRendererCount();
        for (int i = 0; i < length; i++) {
            SimpleSeriesRenderer seriesRenderer = renderer.getSeriesRendererAt(i);
            seriesRenderer.setDisplayChartValues(true);
        }
gv = ChartFactory.getBarChartView(getActivity(), buildBarDataset(titles, values), renderer,Type.DEFAULT);
 LinearLayout chartContainer = (LinearLayout)view.findViewById(
        R.id.chart_container);

 chartContainer.addView(gv);
 gv.repaint();
        return null;
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:19:47.750

每当您修改数据集的内容时，您必须调用`gv.repaint()`以更新图表。

# c# - 用户输入到二维数组

> ID：15698688
> 
> 赞同：2
> 
> 时间：2013-03-29T06:44:44.493
> 
> 标签：c#

我对 C# 完全陌生，我想要简单的代码来从用户输入创建矩阵

例如

```
int [,] matrix1 = new int [2,2]
// now using input i'd like to add integers into the array
matrix1[0,1] = Int32.Parse(Console.ReadLine()); // this is for user input 
```

等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-06T00:37:07.937

```
int[,] A = new int[5, 4];

//read
for (int i = 0; i < 5; i++)
{
    for (int j = 0; j < 4; j++)
    {
        A[i, j] = int.Parse(Console.ReadLine());  
    }
}

//Write
for (int i = 0; i < 5; i++)
{
    Console.WriteLine();

    for (int j = 0; j < 4; j++)
    {
        Console.Write(A[i, j]);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-24T20:52:23.570

```
var numbers = new int[size, size];

for (var i = 0; i < size; i++)
{
    var numList = new string[size];
    numList = readLine.Split();
    for (var j = 0; j < size; j++)
    {
        numbers[i, j] = Convert.ToInt32(numList[j]);     
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T06:55:27.240

```
static void Main(string[] args)
{
   int[,] matrix1 = new int[2, 2];

   for (int i = 0; i < 2; i++)
   {
         for (int j = 0; j < 2; j++)
         {
            matrix1[i, j] = Int32.Parse(Console.ReadLine());  
         }
   }

   for (int i = 0; i < 2; i++)
   {
          for (int j = 0; j < 2; j++)
          {
             Console.WriteLine("Element({0},{1})={2}", i, j, matrix1[i, j]);
          }
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-25T14:33:34.963

我试图在 C# 中找到该问题的一个很好的答案，我搜索了很多，直到一个朋友帮助我了解如何使用用户输入来完成它，所以我将把答案留在这里也许它可以帮助任何人

```
int n = int.Parse(Console.ReadLine()); //the size of the array
int m = n;
int[,] arr = new int[n, m];
string[]lines = new string[n]; // so we could read the input from the user
for (int i = 0; i < n; i++) // here we need to read more than one line
{
    lines[i] = Console.ReadLine();
}

for (int i = 0; i < n; i++)
{
    string[]num = lines[i].Split(' ');
    for (int j = 0; j < m; j++)
    {
        int z = Convert.ToInt32(num[j]);
        arr[i, j] = z;
    }
}

for (int i = 0; i < n; i++)
{
    Console.WriteLine();
    for (int j = 0; j < m; j++)
    {
        Console.Write(arr[i, j] + " ");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T06:53:38.433

```
Console.WriteLine("Enter the height: ");
int h = Convert.ToInt32(Console.ReadLine());
Console.WriteLine("Enter the width: ");
string w = Convert.ToInt32(Console.ReadLine());

int[,] arr = new int[w, h];

for (int i = 0; i < w; ++i)
  for (int j = 0; j <h; ++j)
    arr[i, j] = Convert.ToInt32(Console.ReadLine()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-24T20:47:39.753

var numbers = new int[size, size];

```
 for (var i = 0; i < size; i++)
            {
                var numList = new string[size];
                numList = readLine.Split();
                for (var j = 0; j < size; j++)
                {
                    numbers[i, j] =convert.ToInt32(numList[j]);                        
                } 
```

}

# c++ - CreateFile() 函数创建的文本文件不显示

> ID：15698690
> 
> 赞同：2
> 
> 时间：2013-03-29T06:44:50.233
> 
> 标签：c++, windows, winapi, text-files, createfile

我正在尝试打开一个文本文件。如果文件不存在，则必须先创建并打开它。为此，我编写了以下代码。该代码工作正常，它还在 BIN 文件夹中创建文件，但是当我执行此代码时，我仍然看不到任何文件被打开。请告诉我的代码有什么问题。

**代码片段：**

```
#include "stdafx.h"
#include <windows.h>
#include <iostream>
#include <string>
using namespace std;

int WINAPI WinMain( HINSTANCE hInst, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd )
{
  HANDLE  hFile;
  DWORD dwBytesRead, dwBytesWritten, dwPos;
  TCHAR szMsg[1000];

    hFile = CreateFile (("File.txt"),      // Open File.txt.
                        GENERIC_WRITE,          // Open for writing
                        0,                      // Do not share
                        NULL,                   // No security
                        OPEN_ALWAYS,            // Open or create
                        FILE_ATTRIBUTE_NORMAL,  // Normal file
                        NULL);                  // No template file

  if (hFile == INVALID_HANDLE_VALUE)
  {
    wsprintf (szMsg, TEXT("Could not open File.txt"));
    CloseHandle (hFile);            // Close the file.
    return 0;
  }

return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T07:26:38.173

> 我以为 CREATE_FILE() 的参数“OPEN_ALWAYS”会打开我面前的文本文件

不，它实际上不会打开您面前的文件，就像您在资源管理器中双击它一样。

相反，`OPEN_ALWAYS`参数的意思是*打开文件的句柄*，例如，您可以通过*编程*方式读取或写入文件。如果您指定`OPEN_ALWAYS`，该`CreateFile`函数将成功创建文件并打开它的句柄，即使该文件已经存在。

如果您*不*希望这种行为，您可以指定`OPEN_EXISTING`，它仅在文件（或设备）已经存在时打开文件（或设备）的句柄。如果不存在，该`CreateFile`函数将返回错误。

请记住，正如其他人指出的那样，您需要在每次成功调用 to 之后`CreateFile`调用 to `CloseHandle`。这可以确保您打开文件（或设备）的句柄被正确释放，并防止您的应用程序泄漏资源。但只有在调用成功时才需要这样做`CreateFile`。如果失败，返回`INVALID_HANDLE_VALUE`，你不应该调用`CloseHandle`那个句柄。

```
int WINAPI WinMain(HINSTANCE hInst, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd)
{
    HANDLE hFile;
    DWORD  dwBytesRead, dwBytesWritten, dwPos;
    TCHAR  szMsg[1000];

    // If the file already exists, open a handle to it for writing.
    // If the file does not exist, create it and then open a handle to it.
    hFile = CreateFile(TEXT("File.txt"),       // Open File.txt.
                       GENERIC_WRITE,          // Open for writing
                       0,                      // Do not share
                       NULL,                   // No security
                       OPEN_ALWAYS,            // Open or create
                       FILE_ATTRIBUTE_NORMAL,  // Normal file
                       NULL);                  // No template file

    // Test for and handle failure...
    if (hFile == INVALID_HANDLE_VALUE)
    {
        wsprintf(szMsg, TEXT("Could not open File.txt"));
        MessageBox(NULL, szMsg, NULL, MB_OK | MB_ICONERROR);
        // don't close the file here because it wasn't opened!
        return 0;
    }

    // Read from, write to, or otherwise modify the file here,
    // using the hFile handle.
    // 
    // For example, you might call the WriteFile function.
    // ...

    // Once we're finished, close the handle to the file and exit.
    CloseHandle (hFile);            // Close the file.
    return 0;
} 
```

MSDN 上有一个完整的示例：[Open a File for Reading or Writing](http://msdn.microsoft.com/en-us/library/windows/desktop/bb540534.aspx)

如果要像在资源管理器中双击一样打开文本文件，则需要[`ShellExecute`使用](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153.aspx). 它不需要文件句柄，只需要路径。自然，`open`动词是您要指定的动词。请注意，当您*尝试*使用`ShellExecute`. 如果您已经使用 . 打开/创建了文件`CreateFile`，请确保在调用`CloseHandle` *之前先*调用`ShellExecute`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T07:02:45.233

首先，如果`hFile`是 an`INVALID_HANDLE_VALUE`则无需调用`CloseHandle`。删除该声明。此外，如果您`CloseHandle`在返回之前更好，因为释放您使用的任何资源总是很好的。如果您将此代码复制到一个函数中，并且某个巨大的应用程序调用了该函数，那么您就会发生资源泄漏。

# ant - 使用 ANT 检查多个文件是否存在

> ID：15698694
> 
> 赞同：2
> 
> 时间：2013-03-29T06:45:29.763
> 
> 标签：ant, ant-contrib

我正在使用 ANT 检查两个 jar 中的一组文件的计数。我无法检查是否存在相同模式的文件。

例如，我有 2 个文件，例如 /host/user/dir1/ABC1.txt 和 /host/user/dir1/ABC2.txt。

现在我想检查模式“/host/user/dir1/ABC*”的文件是否存在？？

我可以使用可用标签检查单个文件 /host/user/dir1/ABC1.txt，但无法检查文件的特定模式。

提前致谢。

对于单个文件，以下工作正常：

```
<if>
    <available file="${client.classes.src.dir}/${class_to_be_search}.class"/>
    <then>
         <echo> File ${client.classes.src.dir}/${class_to_be_search}.class FOUND in src dir 

         </echo>
         <echo> Update property client.jar.packages.listOfInnerClass</echo>
    </then>
    <else>
         <echo> File ${client.classes.src.dir}/${class_to_be_search}.class NOT FOUND      in src dir.  
         </echo>
    </else>
</if> 
```

但我想搜索多个文件：类似于：${dir.structure}/${class_to_be_search}$*.class

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:10:22.440

[if 任务](http://ant-contrib.sourceforge.net/tasks/tasks/if.html)不是核心 ANT 的一部分。

以下示例显示了如何使用 ANT[条件任务](http://ant.apache.org/manual/Tasks/condition.html)来完成。您可以在文件集中使用您想要的任何模式。目标执行随后取决于“file.found”属性的设置方式：

```
<project name="demo" default="run">

    <fileset id="classfiles" dir="build" includes="**/*.class"/>

    <condition property="file.found">
        <resourcecount refid="classfiles" when="greater" count="0"/>
    </condition>

    <target name="run" depends="found,notfound"/>

    <target name="found" if="file.found">
        <echo message="file found"/>
    </target>

    <target name="notfound" unless="file.found">
        <echo message="file not found"/>
    </target>

</project> 
```

# zend-db - 如何在 Zend 框架中获取没有与之关联的表名的列？

> ID：15698697
> 
> 赞同：0
> 
> 时间：2013-03-29T06:45:31.917
> 
> 标签：zend-db

我无法将表格与以下查询中的字段分开。每个查询都变成 table_name.field_name 但我只想要 field_name 因为我想从 sql 输出虚拟字符串但我无法实现这一点

```
$select1 = $dbAdapter->select()
     ->from("list",array("list_id","xyz")); 
```

以上查询结果生成如下sql

```
SELECT `list`.`list_id`, `list`.`xyz` FROM `list`; 
```

但我希望我的查询为

```
 SELECT `list`.`list_id`, `xyz` FROM `list`; 
```

我怎样才能达到这个结果...？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:29:19.180

您应该为此使用[表达式列](http://framework.zend.com/manual/1.12/en/zend.db.select.html#zend.db.select.building.columns-expr)。例如

```
$select = $dbAdapter->select()
    ->from(
        "list",
        array(
            "list_id",
            new Zend_Db_Expr("xyz")
        )
    ); 
```

> SQL 查询中的列有时是表达式，而不仅仅是表中的列名。表达式不应应用相关名称或引用。

# c - 打印出两个输入是否是彼此的字谜

> ID：15698698
> 
> 赞同：1
> 
> 时间：2013-03-29T06:45:31.777
> 
> 标签：c, arrays, string, compare, anagram

我的程序从用户那里获取两个输入并找出它们是否是彼此的字谜到目前为止我得到了输入并按字母顺序对它们进行排序但不知道如何比较它们以打印出它们是否相同代码显然 string==strings 不正确

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void sort_string(char*);

int main()
{
    char string[100];
    char strings[100];

printf("\nThis program will ask you for 2 words and compare them to see if they are anagrams of each other\n\n");

printf("Enter first word\n");
gets(string);

sort_string(string);

/*commented out for testing of function*/
/*printf("%s\n", string);*/

printf("Enter  second word for comparison\n");
gets(strings);
sort_string(strings);
/*commented out for testing of function*/
/*printf("%s\n", strings);*/

if (sizeof string==sizeof strings)
    printf("\nThe two words ARE  anagrams of each other.\n");
else
    printf("\nThe two words are NOT anagrams of each other.\n");

printf("\nThank You %d  %d\n\n",sizeof string, sizeoof strings);

   return 0;
}

/*function to sort in alphabetical order to be used for comparison*/ 
void sort_string(char *s)
{
   int c, d = 0, length;
   char *pointer, *result, ch;

   length = strlen(s);

   result = (char*)malloc(length+1);

   pointer = s;

   for ( ch = 'a' ; ch <= 'z' ; ch++ )
   {
      for ( c = 0 ; c < length ; c++ )
      {
         if ( *pointer == ch )
         {
            *(result+d) = *pointer;
            d++;
         }
         pointer++;
      }
      pointer = s;
   }
   *(result+d) = '\0';

   strcpy(s, result);
   free(result);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T06:49:07.857

你需要使用[`strcmp()`](http://www.cplusplus.com/reference/cstring/strcmp/).

[`qsort()`](http://www.cplusplus.com/reference/cstdlib/qsort/)此外，您可能需要[考虑](http://en.wikipedia.org/wiki/Counting_sort)对`sort_string()`.

# java - 将梵文 Unicode 转换为其字符

> ID：15698699
> 
> 赞同：2
> 
> 时间：2013-03-29T06:45:37.463
> 
> 标签：java, unicode

我正在尝试将 Devanagari Unicode 转换为其在 Java 中的字符并尝试在 CMD 上显示，但它给了我一个`?`字符。

这是我的代码：

```
public class ConvertUnicode
{
    public static void main(String args[])
    {
        int a = 0x0909;
        char c = (char)a;
        System.out.println("  "+c);
    }
} 
```

上面代码的输出是一个`?`字符。

# android - 如何在横向和纵向视图中为平板设备制作通用 CSS？

> ID：15698701
> 
> 赞同：0
> 
> 时间：2013-03-29T06:45:52.747
> 
> 标签：android, ipad, windows-mobile, tablet

如何在横向和纵向视图中为平板电脑设备制作全局样式？我有一个网站，我想让它兼容所有移动设备。主要目标是它应该在纵向和横向视图中兼容我想在以下设备中制作通用 CSS

1.  三星平板电脑（安卓），

2.  iPad（最新版本 1.0/2.0），和

3.  Windows8平板电脑..

所以我很困惑制作一个全局或通用的 CSS 样式以使其与上述所有三个表格相似。

# javascript - 如何在 iPad 上使用自定义 url 方案进行 FB 分享？

> ID：15698704
> 
> 赞同：5
> 
> 时间：2013-03-29T06:46:20.840
> 
> 标签：javascript, facebook, ipad, facebook-graph-api, facebook-sharer

从我在 iPad 上的混合应用程序中，每当用户点击相应按钮时，我想通过 FB 和 Twitter 共享某些 URL。这是我为 twitter 所做的（有效）：

```
shareStyleOnTwitter : function(styleId, title) {
    var httpUrl = 'twitter://post?message=';
    var url = 'www.mywebsite.com/'+styleId;
    var params = 'Check out '+title+' on #mywebsite '+url;
    window.location = httpUrl+encodeURIComponent(params);
} 
```

这将打开一个 Twitter 应用程序，其中包含一个帖子对话窗口，其中包含一条消息。用户只需点击“tweet”按钮即可发布。

这是我用于 FB 的功能（不起作用）：

```
shareStyleOnFB : function(styleId, title, imageUrl){
    var httpUrl = 'fb://publish/profile/#me?text=';
    var params = 'www.mywebsite.com/'+styleId;
    console.log(httpUrl+encodeURIComponent(params));
    window.location = httpUrl+encodeURIComponent(params);
}, 
```

这将打开一个带有我的提要的 FB 应用程序，但没有带有消息的共享/发布/状态窗口。

我从这些线程中获得了这些想法：

[Facebook iPhone 应用程序支持的所有自定义 URL 方案有哪些？](https://stackoverflow.com/questions/5707722/what-are-all-the-custom-url-schemes-supported-by-the-facebook-iphone-app/5707825#5707825)

[如何使用 iOS 上的原生 Twitter 应用打开 Twitter 推文？](https://stackoverflow.com/questions/10424275/how-can-i-open-a-twitter-tweet-using-the-native-twitter-app-on-ios)

有人能告诉我我在使用 FB URL 方案时做错了什么吗？

# java - android动画使我已经通过代码使其不可见的项目可见

> ID：15698706
> 
> 赞同：0
> 
> 时间：2013-03-29T06:46:25.563
> 
> 标签：java, android, animation

我有一个按钮设置为在此代码开始的活动中消失：

```
againbtn.setVisibility(View.INVISIBLE); 
```

在另一个按钮内，我为我的隐形按钮运行此动画：

```
Animation anim3 = AnimationUtils.loadAnimation(MainActivity.this, R.anim.againbtnonanim);
anim3.setFillAfter(true);
againbtn.startAnimation(anim3); 
```

当这个动画运行时，我的隐形按钮出现了！！！为什么会这样？我不想要这个！我想要的是首先让它可见，然后它运行我的动画，如下所示：

```
againbtn.setVisibility(View.VISIBLE);    
Animation anim3 = AnimationUtils.loadAnimation(MainActivity.this, R.anim.againbtnonanim);
anim3.setFillAfter(true);
againbtn.startAnimation(anim3); 
```

但它不起作用。我的按钮再次出现btn.setVisibility(View.VISIBLE); 代码和我的动画使用此代码使其不可见：againbtn.setVisibility(View.INVISIBLE);，但这也不起作用。

在这种情况下，当动画不可见按钮时，它的点击监听器仍然在该区域工作！有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:54:12.120

`android:visibility="gone"`完成按钮单击后使用。它将被完全删除。该按钮使用的空间可以重复使用。当您只是说`invisible`您不删除按钮时，您只是使其不可见。它仍然在那里消耗那个空间。

同样使用您当前的代码，您可以只使用 android`your_button_name.setEnabled(false)`以便 onclick 不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:11:13.137

你可以试试这个

```
 againbtn.setVisibility(View.GONE); 
```

# deployment - 有没有办法并行运行 RPM 安装？

> ID：15698707
> 
> 赞同：5
> 
> 时间：2013-03-29T06:46:30.583
> 
> 标签：deployment, rpm

我正在执行部署过程中的性能改进任务。在整个过程中，我看到 rpm 安装是按顺序进行的，并且依赖包安装需要更多时间。我是 RPM 的新手，正在寻找一种并行运行这些安装以减少部署时间的方法。

如果您能为我提供并行运行这些 rpm 的建议/解决方案，那就太好了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T06:02:15.633

因此，当您安装 RPM 时，它会创建所谓的 rpm 数据库锁，并且此锁文件会阻止您运行另一个 rpm 实例（并通过关联 yum）。我想这是为了确保在尝试安装多个软件包时不会搞砸交易。想象一下，有一个软件包需要您已经安装的 lib 的更新版本，如果两个进程试图一个接一个地修改这些文件，这将如何发生冲突，库链接将如何工作，可能存在什么样的参考问题， ETC。？

这意味着即使您尝试从两个不同的终端安装两个 RPM，第二次尝试也会失败，因为第一个进程已经拥有 rpm 数据库锁，并且您必须等到该锁被释放才能从另一个终端安装，或者基本上是另一个过程。

所以这就引出了另一个问题，如果我们必须按顺序安装软件包，我们怎样才能提高 RPM 的安装速度？我建议查看以下选项：

查看 RPM 是从哪里拉下来的，如果它来自某个外部 EPEL 机器或网络外部的另一台服务器，请考虑设置一个本地镜像，这将允许在您的镜像上更新包，然后在您执行部署时您正在从拥有更多带宽的本地位置拉取数据，以确保它尽快到达机器。

考虑在部署期间检查 RAM 利用率，如果盒子被敲打，yum 安装会慢得多。如果可能的话，在部署期间停止某些服务以增加安装可能是值得的。

确认您需要正在安装的所有内容。这些软件包中的一些是否有可能通过 kickstart 或配置管理工具进入初始服务器构建？我们正在安装的 RPM（如果是自定义的）是否具有在您的组织中是默认的依赖项，并且并不是真正需要的（有时人们只是有一个默认规范，一切都是建立的）？

这些是我现在能想到的所有建议，希望对您有所帮助。

# django - 返回 2 个值 django 模型方法

> ID：15698711
> 
> 赞同：0
> 
> 时间：2013-03-29T06:46:51.487
> 
> 标签：django, django-admin

这是一个简单的例子来说明我的观点

```
class A(models.Model):
  boolean_field=models.BooleanField(default=False)
  name = models.CharField(max_length=50, blank=True)
  some_other_field = models.CharField(max_length=10)

  def true_value(self):
    if self.boolean_field:
      return self.name
    else:
      return ''

  def false_value(self):
    if not self.boolean_field:
      return self.name
    else:
      return '' 
```

在`admin.py`

```
class Aadmin(admin.ModelAdmin):
  list_display = ('true_value', 'some_other_field', 'false_value') 
```

在上面的示例中，我认为数据库被命中两次。有什么方法可以一次性获取值并在 list_display 中使用它。有没有办法优化这个要求。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:37:16.343

我在评论中提出的观点值得进一步解释，因为很明显你对 Django 模型层的工作方式有很大的误解。

一旦 Django 从数据库中获取了一个对象，随后对该对象中不同属性的调用不会触发对 db 的额外调用。除非您特别要求，否则模型的所有属性都会同时获取并存储在模型实例中。（唯一会发生额外调用的情况是属性是外键，但即使在那里你也可以避免使用`select_related`.）

事实上，每个对象都不会调用一次，因为 Django 只需一次调用即可获取页面上的所有行。

# jquery - Django在渲染另一个时获取小部件的html id

> ID：15698717
> 
> 赞同：0
> 
> 时间：2013-03-29T06:47:40.740
> 
> 标签：jquery, python, django, django-forms

我一直在从事一些项目，这些项目需要我在渲染另一个小部件时知道 Django 小部件的 html id，但到目前为止，我还没有找到理智的方法。以下是许多用例：

假设我们有相同的 django 形式的字段 A 和字段 B。现在说字段 A 采用用户名，字段 B 是一个自动完成文本字段，它采用字段 A 的值并使用所述值进行 ajax 调用。自动完成的逻辑将在字段 B 的小部件的 render 方法中，但我无法从字段 B 的小部件访问字段 A 的小部件，我需要访问权限才能获取字段 A 的小部件 html id 并使用 jquery 将其作为目标`$("#field_a_id").val()`。到目前为止，我发现这样做的唯一方法是以下

```
class DjangoForm(forms.ModelForm):

    field_a = forms.CharField()
    field_b = forms.CharField()

    class Meta:
        model = SomeModel   

    def __init__(self, *args, **kwargs):
        super(DjangoForm, self).__init__(*args, **kwargs)
        # HACK !!!
        field_a_id = self['field_a'].id_for_label
        self.fields['field_b'].widget.attrs.update({'field_a_id': field_a_id}) 
```

通过这样做，我可以使用 jQuery 轻松获取 id，但感觉有点 hackish。所以我的问题是，有没有更好的方法来做到这一点？

任何反馈表示赞赏。谢谢。

# git - git fork 到一个独立的存储库？

> ID：15698721
> 
> 赞同：13
> 
> 时间：2013-03-29T06:48:10.030
> 
> 标签：git, github

很久以前，我从其他一些用户存储库创建了一个分支。然后我对我的 fork 进行了很多更改并重新编写了很多代码。

现在我想把这个 fork 变成我帐户上的存储库，因为这两个真的不同，我想删除两者之间的关系。这样我就可以单独对这个分叉进行问题跟踪等。

我怎样才能做到这一点 ？我试过环顾四周，但没有找到一个很好的例子。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-29T06:56:49.710

只需将遥控器添加到您的新主机并开始推送。

```
git remote add newremote git@whatever.com/newrepo
git push -u newremote master //the -u will set this as the default 
```

显然，来自原始仓库的整个提交历史仍然存在。

然后，如果您愿意，还可以删除对原始遥控器的引用（这没有任何区别，但肯定更干净）

```
git remote rm origin //or whatever the original remote is named 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:54:35.693

也许这是一个粗略的想法，但我只是 rm -rf .git 和 git init 和 git remote add and push。

如果您想保留您的提交，请使用以下命令重新分配您的远程 URL：

```
git remote set-url --delete origin your-github-url
git remote set-url --add origin your-github-url 
```

# ruby-on-rails-3.2 - 获取具有双深关联记录的记录

> ID：15698726
> 
> 赞同：1
> 
> 时间：2013-03-29T06:48:29.507
> 
> 标签：ruby-on-rails-3.2, rails-activerecord, model-associations

我有 3 个简单的模型，我们称它们为部门、部门、办公室。部门有很多部门，部门有很多办公室。

现在我想让所有部门至少有一个部门，至少有一个办公室。

我尝试了几种不同的方法，它们“或多或少”起作用。我的意思是如果我调用 Sector.with_offices 我会得到我想要的，但是如果我链接一些非常常见的方法，例如 .size （向原始查询添加计数），我会得到意想不到的结果。这是我尝试过的：

```
scope :with_offices, joins(:departments => :offices).group('sectors.id')
scope :with_offices, joins(:departments => :offices).select("DISTINCT sectors.*") 
```

我也尝试过使用`uniq`：

```
scope :with_offices, joins(:departments => :offices).uniq 
```

但是，它有同样的问题。

```
Sector.with_offices.size # => 5 (WRONG VALUE)
s = Sector.with_offices # => [#<Sector ... >]
s.size # => 3 (RIGHT VALUE) 
```

如果我链大小，我得到错误的数字。

什么是让部门有办公室并保持规模按预期工作的干净方法？

更新 1 - SQL QUERIES 在我的查询中，我忘了提到两个关联都有一个限制状态的条件子句（如下所示）。

```
irb(main):010:0> Sector.with_offices.size
   (0.6ms)  SELECT DISTINCT COUNT(*) FROM "sectors" INNER JOIN "departments" ON "departments"."sector_id" = "sectors"."id" AND departments.state IN ('active', 'deactivated') INNER JOIN "offices" ON "offices"."department_id" = "departments"."id" AND offices.state IN ('active', 'deactivated') WHERE "sectors"."state" IN ('active', 'deactivated')
=> 5

irb(main):011:0> s = Sector.with_offices
  Sector Load (0.6ms)  SELECT DISTINCT "sectors".* FROM "sectors" INNER JOIN "departments" ON "departments"."sector_id" = "sectors"."id" AND departments.state IN ('active', 'deactivated') INNER JOIN "offices" ON "offices"."department_id" = "departments"."id" AND offices.state IN ('active', 'deactivated') WHERE "sectors"."state" IN ('active', 'deactivated') 
```

更新 2 - 协会

```
Class Sector < ActiveRecord::Base
 has_many :departments , conditions: ["departments.state IN ('active', 'deactivated')"]
end

Class Department < ActiveRecord::Base
 has_many :offices , conditions: ["offices.state IN ('active', 'deactivated')"]
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:18:09.227

我试过了，它是 3.2.12 中的一个错误，显然已在 3.2.13 中修复。如果升级到 3.2.13，将生成正确的 SQL。

# iphone - 如何从我自己的应用程序中打开 iPhone 设置？

> ID：15698727
> 
> 赞同：-6
> 
> 时间：2013-03-29T06:48:30.583
> 
> 标签：iphone, objective-c, cocoa-touch, xcode4

如果用户已经登录，我想在 getinfo() 函数中从我的应用程序打开 iphone 官方设置，如果没有用户登录，则无需打开 iphone 的官方设置应用程序当前打开 iphone 的官方设置我无法打开 iphone 设置。

```
 - (IBAction)twitterLogin:(id)sender {

        [self getInfo];

    }

        - (void) getInfo
        {
            // Request access to the Twitter accounts

            ACAccountStore *accountStore = [[ACAccountStore alloc] init];
            ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

            [accountStore requestAccessToAccountsWithType:accountType options:nil completion:^(BOOL granted, NSError *error){
                if (granted) {
                    GET_DEFAULTS
                    [defaults setInteger:1 forKey:kHasUserRemembered];
                    [defaults synchronize];
                     NSArray *accounts = [accountStore accountsWithAccountType:accountType];

                    ACAccount *twitterAccount = [accounts objectAtIndex:0];
                    GET_DBHANDLER
                    NSDictionary *tempDict = [[NSMutableDictionary alloc] initWithDictionary:
                                              [twitterAccount dictionaryWithValuesForKeys:[NSArray arrayWithObject:@"properties"]]];
                    NSString *tempUserID = [[tempDict objectForKey:@"properties"] objectForKey:@"user_id"];

                    NSLog(@"userid: %@", tempUserID);
                    userDC *user =  [dbHandler authenticate_User:twitterAccount.username andPassword: @"" andIsFB:0 AndIsTwitter:1];
                    [defaults setObject:tempUserID forKey:kHastwitterID];
                    [defaults synchronize];
                    [self gotoMainView];

                                   }
               else {

                 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=General"]];

                    NSLog(@"No access granted");
                }
            }];

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:16:04.253

正如对同一主题的几个 SO 问题的回答中所述：

*   [从另一个应用程序打开设置应用程序](https://stackoverflow.com/questions/5655674/opening-the-settings-app-from-another-app?lq=1)
*   [以编程方式打开设置应用程序 (iPhone)](https://stackoverflow.com/questions/736047/programmatically-opening-the-settings-app-iphone)
*   [是否可以使用 openURL 打开设置应用程序？](https://stackoverflow.com/questions/1090373/is-it-possible-to-open-settings-app-using-openurl)
*   [用户按下按钮时如何打开设置应用程序？](https://stackoverflow.com/questions/4092162/how-can-i-open-the-settings-app-when-the-user-presses-a-button)
*   [从应用程序启动设置？](https://stackoverflow.com/questions/6767625/launch-settings-from-app?lq=1)
*   [打开“设置”应用？](https://stackoverflow.com/questions/4942974/open-the-settings-app)

此功能在 iOS 5.0.x 中短暂可用：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs://"]]; 
```

但此后已被删除，不再可能。

# c# - 在文本框中点击 MaxLength 时退格键和箭头键冻结

> ID：15698731
> 
> 赞同：1
> 
> 时间：2013-03-29T06:48:50.213
> 
> 标签：c#, asp.net, maxlength

为什么在多行文本框中输入的字符数等于 MaxLength 集时，导航（箭头）键和退格键会冻结？它的解决方案是什么？

# database - Postgresql 中的错误：用于创建语言 plpythonu

> ID：15698734
> 
> 赞同：0
> 
> 时间：2013-03-29T06:48:59.543
> 
> 标签：database, postgresql, postgresql-8.4

`Postgresql`在创建语言时抛出错误`plpythonu`

```
ERROR:  could not load library "C:/Program Files/PostgreSQL/8.4/lib/plpython.dll": The specified module could not be found. 
```

我已确认安装`python 2.6.`该文件`plpython.dll`存在`lib folder`于`postgresql`. 我也复制`plpython.dll`到`postgresql bin`. 但仍然遇到同样的错误

需要帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T07:29:58.130

To troubleshoot this:

1: Make sure that the user in question can read the library

2: Make sure Python works properly for all users (try creating a new limited user and try to run Python). Maybe it is failing to load because another library it is dependent on is failing?

# java - 每当我更改其值/文本初始化时，创建一个不断更改其文本的图像（表实体）

> ID：15698741
> 
> 赞同：-2
> 
> 时间：2013-03-29T06:49:30.760
> 
> 标签：java, image, swing

![图像示例](../Images/dad9921a81baeeb232b0f1a22db7df1f.png)

我想创建一个数据库设计器，所以我可能还需要一种方法来让 UI 用于在两个表之间建立关系。工具：JAVA摇摆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:39:04.983

你的问题的简短回答是，不。没有现成的组件。你将不得不卷起自己，弄脏你的手。

分解你的问题。

您需要实体是可浮动的。您仅有的两个（体面）选择是`JLayeredPane`和`JDesktopPane`。您选择哪个取决于您要实现的功能。我可能会从`JLayeredPane`. 这将允许您将组件放置在您想要的位置，并提供更轻松地控制 Z 水平的能力。

这样做的问题是，您不仅要负责定位组件，还要负责调整它们的大小。

接下来，您需要一个实体组件。

在我看来，这将是一系列复合组件。您需要一个“标题”或“标题”组件，它会提供表格的名称、展开控件以及可以拖动它的方法。

我会从一个简单的`JPanel`. 我将在其上添加 a `JLabel`、 a`JTextField`和 a `JButton`or`JLabel`以充当扩展控件，具体取决于我所追求的外观。

将`JLabel`作为标题的标题。`JTextField`就像编辑一样。首先隐藏文本字段。稍微巧妙地使用布局管理器，您可以在空间位置放置两个组件。当文本字段可见时，它将能够覆盖标签。

您将需要为此组件添加鼠标侦听器和鼠标运动侦听器。单击时，应显示编辑器。使用`ActionListener`and`FocusListener`确定用户何时完成编辑并更新标签并隐藏编辑器。您可能还希望将 a 绑定`Esc`到该字段以允许用户取消编辑，键绑定最适合此操作。

您还需要跟踪鼠标拖动事件，以便重新定位“实体”

然后将此标头组件添加到实体组件中。

您将需要 a`JList`或`JTable`来保存字段信息。在我看来，a`JTable`将提供最多的功能，让您更轻松地编辑字段信息。

您还需要执行一些自定义绘画以提供从一个表到另一个表的链接。这是一个非常重要的问题，需要您进行一些非常好的设计。

您需要开始的每一件事都可以在[使用 JFC/Swing 创建 GUI](http://docs.oracle.com/javase/tutorial/uiswing/)中找到，但您还需要通读并理解[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)和[2D 图形](http://docs.oracle.com/javase/tutorial/2d/)

# inno-setup - Inno Setup：如何在 [Files] 部分中捕获退出代码

> ID：15698742
> 
> 赞同：0
> 
> 时间：2013-03-29T06:49:56.770
> 
> 标签：inno-setup

1）我已经安装了1.0版本的产品。

2）当我尝试将产品升级到2.0版本时，我面临以下问题：

a）当文件正在使用时，innosetup 会抛出一个错误，指出它无法替换文件并显示中止重试忽略消息框。

所以我的要求是，当 innosetup 无法在静默/交互式安装中替换文件时，我需要知道它的退出状态，以便我可以尝试重命名文件（正在使用）并重试复制文件。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:32:12.773

没有任何方法可以做到这一点。

如果在安装期间正在使用该文件，您可以使用该`restartreplace`标志来安排在重新启动时替换该文件。

但更好的解决方案是首先防止它被使用，例如。通过使用`AppMutex`来检测您的应用程序正在运行，或通过关闭后台应用程序/服务，或通过在后台应用程序中使用最新版本的 Inno 和 Restart Manager 支持。

# javascript - 使用 javascript 移动 Openlayer 地图的中心

> ID：15698743
> 
> 赞同：1
> 
> 时间：2013-03-29T06:50:20.553
> 
> 标签：javascript, openlayers

我需要知道如何使用 javascript 重新定位和缩放 Openlayer 地图？例如，我有一个包含城市的下拉菜单，当我选择其中一个城市时，中心和缩放将更改为当前城市，依此类推。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T07:11:54.947

是的，你可以这么做。你只需要传递那个城市的`lat`and`lon`并传递给这个函数，它就会把它放在`center`.

```
function setCenter(lat,lon) {
    var lonlat = new OpenLayers.LonLat(lon, lat);
    map.panTo(lonlat);
} 
```

对象在哪里`map`：

`map = new OpenLayers.Map('map', {numZoomLevels: 2});`

的所有示例都`openlayermap`存在于此处：

[http://openlayers.org/dev/examples/](http://openlayers.org/dev/examples/)

# android - 速度差

> ID：15698747
> 
> 赞同：0
> 
> 时间：2013-03-29T06:50:31.267
> 
> 标签：android, memory, samsung-mobile

内置内存和 SD 卡的访问时间有区别吗？如果是的话，这对两者来说是什么？在计算机环境中，内存访问时间以纳秒为单位，而硬盘以毫秒为单位，因此准备应用程序从内存而不是硬盘加载会产生很大的不同。我想知道智能手机的情况，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:59:04.413

是的，内置内存和 SD 卡的访问时间有所不同。

这与您在计算机环境中的原因相同。因为，默认情况下，内置存储的访问时间比外部存储快。原因是，内部存储与 IO 操作的进程紧密相关，而外部存储则不然。这就是为什么您将有更少的内部存储访问时间。

# r - 根据值的第一次出现选择组中的一行

> ID：15698749
> 
> 赞同：-2
> 
> 时间：2013-03-29T06:50:54.023
> 
> 标签：r, select

这个问题扩展了我昨天问[的一个类似问题。](https://stackoverflow.com/q/15677073/2359271)

我想在第一次出现定义数字的组内找到行。如果该数字未出现在组中，则将使用下一个最高数字。

例如：

```
group <- c("a", "a", "a", "a", "b", "b", "b", "b", "c", "c", "c", "c")
value <- c(1, 3, 2, 1, 1, 1, 2, 1, 2, 3, 3, 2)
GOAL <- c("FALSE", "TRUE", "FALSE", "FALSE", "FALSE", "FALSE", "TRUE", "FALSE", "FALSE", "TRUE", "FALSE", "FALSE")
data <- data.frame(group, value, GOAL)
data 
```

首先，我想在组中搜索值 3。如果存在，组中第一个数字 3 的行被标记为“TRUE”，如果不是，则查找第一个值 2，依此类推。最后每组只有一个“真”。所以“目标”列是预期的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:55:37.810

`which(v==2)[1]`您可以通过将我对您最后一个问题的答案替换为 来获得您描述的结果`which.max(v)`。

```
f <- function(v) replace(logical(length(v)), which.max(v), TRUE)
transform(data, GOAL=as.logical(ave(value, group, FUN=f)))
#    group value  GOAL
# 1      a     1 FALSE
# 2      a     3  TRUE
# 3      a     2 FALSE
# 4      a     1 FALSE
# 5      b     1 FALSE
# 6      b     1 FALSE
# 7      b     2  TRUE
# 8      b     1 FALSE
# 9      c     2 FALSE
# 10     c     3  TRUE
# 11     c     3 FALSE
# 12     c     2 FALSE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T08:07:18.313

或在基本包中，类似于@MatthewPlourde 解决方案，但只有一个衬里：

```
transform(data, GOAL= ave(value,group,
        FUN=function(x)seq(x)==which.max(x))> 0) 
```

**编辑**获得最后一个最大值。

`which.max`确定第**一个最大值**的位置。它相当于`head(which(x == max(x)),1)`。要获得 The last maximum ，您可以执行以下操作：

```
transform(data, GOAL= ave(value,group,
                          FUN=function(x)seq(x)==tail(which(x==max(x)),1))> 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T08:07:05.967

试试这个代码片段：

```
 groups<-c("a", "a", "a", "a", "b", "b", "b", "b", "c", "c", "c", "c");
 values<-c(1, 3, 2, 1, 1, 1, 2, 1, 2, 3, 3, 2);
 dFrame<-data.frame(groups,values);

 max_values<-as.vector(unlist(tapply(dFrame$values,dFrame$groups,max)));
 length_values<-as.vector(unlist(tapply(dFrame$values,dFrame$groups,length)));

 dFrame$GOAL<-as.vector(unlist(sapply(1:length(max_values),FUN=function(i,x,y,z){
   v<-rep(FALSE,z[i]);
   ind<-match(y[i],as.vector(unlist(x[i])));
   v[ind]<-TRUE;
   return (v);
   },x=tapply(dFrame$values,dFrame$groups,identity),
   y=max_values,z=length_values))); 
```

# facebook - 将图片从 wordpress 网站上传到 facebook

> ID：15698750
> 
> 赞同：0
> 
> 时间：2013-03-29T06:50:54.507
> 
> 标签：facebook, image, wordpress, upload, visitors

我正在使用最新版本的 Wordpress 和 NextGen Gallery。我想允许访问者从我的网站上传图片到他们的 Facebook 帐户。我正在管理一个照片博客。我想在每张图片下方提供一个**上传到 Facebook的链接。**我试图学习`facebook_upload_photo`api，但没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:38:56.657

1.  您需要获得发布到用户 Facebook 帐户的权限。特别是“publish_stream”权限
2.  按照此处的说明进行操作：[https ://developers.facebook.com/blog/post/498/](https://developers.facebook.com/blog/post/498/)

# windows - 如何在 Windows 中删除/替换目录名称中的空格

> ID：15698751
> 
> 赞同：0
> 
> 时间：2013-03-29T06:50:56.267
> 
> 标签：windows, path

我正在尝试访问一个目录名称，例如

```
C:\Documents and Settings\rasmikanta.g\Desktop\last 
```

由于路径名中有一个空格（即`C:\Documents and Settings`），所以我在通过 hudson 服务器访问此路径时遇到错误。它不允许任何空间。

有没有办法用任何特殊字符或任何东西替换这个空间，以便我可以访问那个位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:46:22.390

没有“特殊字符”来替换路径中的空格。我什至不知道那会是什么。如果您将某个任意字符替换为空格，您将如何使用包含该字符的路径？

对此的标准解决方案是使用双引号引用路径字符串。这确保了它被视为一个单元并防止空格充当分隔符。例如：

```
"C:\Documents and Settings\rasmikanta.g\Desktop\last" 
```

如果你的程序在 2013 年真的很糟糕以至于它不支持长文件名，那么是时候毫不客气地把它扔掉并使用其他东西了。

# r - 在 R 中缩放数据给出虚假错误“'中心'的长度必须等于'x'的列数”

> ID：15698756
> 
> 赞同：6
> 
> 时间：2013-03-29T06:51:18.210
> 
> 标签：r, scale

我正在尝试使用以下代码在 0 和 1 范围内缩放 data.frame：

```
for(i in 1:nrow(data))
{
  x <- data[i, ]
  data[i, ] <- scale(x, min(x), max(x)-min(x))
}

Data:
 x1   x2  x3  x4  x5  x6  x7  x8  x9  x10  x11  x12  x13  x14  x15  x16  x17 
 15   6   6   0   9   3   1   4   5    1    1   13    0    0   20    5   28
 2  24  14   7   0  15   7   0  11   3    3    4   15    7    0   30    0  344
 3  10   5   2   0   6   2   0   5   0    0    2    7    1    0   11    0  399
 4   9   4   2   0   5   2   0   4   0    0    2    6    1    0   10    0   28
 5   6   2   1   0   3   1   0   2   0    0    1    3    1    0    6    0   82
 6   9   4   2   0   5   2   0   4   0    0    2    6    1    0   10    0   42 
```

但我收到以下错误消息：

```
Error in scale.default(x, min(x), max(x) - min(x)) (from #4) : 
  length of 'center' must equal the number of columns of 'x' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T07:06:09.913

使用此数据，您的示例对我有用：

```
data <- matrix(sample(1:1000,17*6), ncol=17,nrow=6)
for(i in 1:nrow(data)){
  x <- data[i, ]
  data[i, ] <- scale(x, min(x), max(x)-min(x))
} 
```

这里使用 scale 的另一个选项，没有循环。您只需要为 a`scale`和 a`center`提供与您的矩阵相同的列。

```
maxs <- apply(data, 2, max)    
mins <- apply(data, 2, min)
scale(data, center = mins, scale = maxs - mins) 
```

**编辑**如何访问结果。

比例返回具有 2 个属性的矩阵。要获取 data.frame，您只需将比例结果强制转换为 data.frame。

```
dat.scale <- scale(data, center = mins, scale = maxs - mins)
dat.sacle <- as.data.frame(dat.scale) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T07:15:11.420

`center`和`scale`参数的长度`scale`必须等于 中的列数`x`。它看起来像`data`a `data.frame`，因此您`x`的列数与您的列数一样多`data.frame`，因此存在冲突。你可以通过三种方式克服这个障碍：

*   在传递给之前将行放入原子向量`scale`（将其视为单列）：`scale(as.numeric(x), ...)`
*   转换`data`为 a `matrix`，它会自动将行提取放入原子向量。
*   使用@agstudy 的`apply`建议，无论它是 a`data.frame`还是 a`matrix`都可以，并且可以说是在 R 中执行此操作的“正确”方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-29T12:57:41.597

还有另一种通过创建函数来缩放数据的方法

```
 data_norm<- function(x) {((x-min(x))/(max(x)-min(x)))}
 variables_norm<- as.data.frame(lapply(data[1:17], data_norm)) 
 summary(variables_norm) 
```

# android - BaseAdapter 的数据已更改...还有其他方式吗？

> ID：15698762
> 
> 赞同：0
> 
> 时间：2013-03-29T06:51:39.093
> 
> 标签：android, android-arrayadapter, baseadapter

我正在使用自定义适配器在 android listview 中扩展 BaseAdapter，如下所示：

```
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = getLayoutInflater();
    View row;
    row = inflater.inflate(R.layout.listview, parent, false);
    TextView textview = (TextView) row.findViewById(R.id.tv_main);
    ImageView imageview = (ImageView) row.findViewById(R.id.iv_main);
    textview.setText(data_text[position]);
    imageview.setImageResource(data_image[position]);
    imageview.setScaleType(ScaleType.FIT_XY);
    return (row);
} 
```

这显示了我的清单；然后我附加一个 longClickListener 来引发一个上下文菜单，它提供了一个删除选项。问题是，在删除列表中的索引位置之后，对该位置的任何引用随后都会引发异常。我尝试了很多不同形式的 notifyDataSetChanged，但都没有成功。我试过 ArrayAdapter，但遇到了同样的问题。一定有办法解决这个问题，但我正在罢工。任何建议或链接将不胜感激！

# php - 关于 PHP+Apache 重写

> ID：15698765
> 
> 赞同：1
> 
> 时间：2013-03-29T06:51:53.867
> 
> 标签：php, apache, rewrite

当前站点是动态的php as a.php。

我希望用户访问我的网站可以使用 a.html，而不是通过原始 a.php。在apache2.x中，在里面设置apache的httpd.conf：

```
LoadModule rewrite_module modules/mod_rewrite.so
   <Directory "c:/www/xxx">
     rewriteengine on
     rewritebase /
     RewriteRule ^a.html$ a.php
   </ Directory> 
```

上面是最简单的例子。html直接解析成php。现在，问题是：a.php和a.html都可以访问。但是用户访问的默认页面总是a.php。

我想知道上面的设置有错吗？或者除了我在apache中的配置还必须把前台原文件中对应的动态URLs转成静态？如果我们想改变？为了达到“隐藏a.php”的目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:42:49.810

您应该改为在 htaccess 文件中编写重定向规则，并将其放在根目录中。

这是一个可以做的例子（把它放在 .htaccess 文件中并放在根目录下）：

```
RewriteEngine On

#/ rewrite html to php
RewriteRule ^(.*)\.html$ $1.php?redirectLoopStopper=1 [QSA,L]

#/ redirect .php to .html
RewriteCond %{QUERY_STRING} !(redirectLoopStopper=1)
RewriteRule ^(.*)\.php$ PATH/TO/PROJECT/$1.html [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:21:59.963

这是您需要在 .htaccess 中处理此问题的内容：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# To externally redirect /dir/foo.php to /dir/foo.html
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1.html [R=301,L]

# internal forward from abc.html to abc.php
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteRule ^(.*)\.html$ /$1.php [NC,L] 
```

# iphone - “添加到主屏幕”后页面未打开

> ID：15698769
> 
> 赞同：0
> 
> 时间：2013-03-29T06:52:40.143
> 
> 标签：iphone, ipad

我的笔记本电脑上运行了一个 web 应用程序，我可以使用笔记本电脑的 IP 在 iPad 上打开和浏览它，但是当我使用“添加到主屏幕”在主屏幕上创建快捷方式然后点击图标时，它会继续加载页面并且永远不会完成。我不知道是花费了这么多时间还是有错误。如何找出问题所在？当它以全屏模式运行时，我无法打开调试控制台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:53:05.503

我建议您更改 appcapable 的 metatag 并将其设置为 false，以便您可以访问调试控制台并找出问题并解决它。之后，您可以恢复正确的元标记并以全屏模式重新启动 webapp！

```
<meta name="apple-mobile-web-app-capable" content="no"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:17:45.087

今天没有改变任何东西，它就开始工作了:)，看起来像是一些不一致的实现。顺便说一句，当我离开 iPad 无人看管时，这一次加载需要几分钟，并且从早些时候开始，如果页面不可见，我会在 10 到 20 秒后重新加载它，这意味着如果你制作主页图标，可能需要更多时间来加载。

# amazon-web-services - AWS 免费套餐使用即将到期

> ID：15698770
> 
> 赞同：4
> 
> 时间：2013-03-29T06:52:49.607
> 
> 标签：amazon-web-services, amazon-s3, amazon-ec2

我正在使用一个

> aws 中的 t1 微实例。和 s3 服务

.目前我处于免费套餐期间，但现在我收到一封邮件说您的免费套餐即将到期。然后从谷歌我得知在那之后也不会发生任何事情，只会按标准费率收费。我可以保留这个实例吗一年后的免费层模式也是如此。例如，通过启动另一个实例并更改为具有相同 ip 的实例。就像那样。任何人都可以帮我解决这个问题。我的疑问来自同一个帐户，我可以试验我上面指出的场景.任何机构都可以帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-29T08:23:41.000

根据[AWS 免费使用套餐优惠条款](http://aws.amazon.com/free/terms/)：

> 这些免费套餐仅适用于新的 AWS 客户，并且在您注册 AWS 后的 12 个月内可用。如果您或您的组织创建了多个帐户来接收优惠下的额外福利，或者如果新帐户包含在合并账单中，则您将没有资格获得优惠。

如果您计划继续在 EC2 上运行 t1.micro，则可以通过购买[预留实例](http://aws.amazon.com/ec2/reserved-instances/)来显着降低定价。包括预付费用，您的 t1.micro（包括 8GB EBS 卷）的每月成本可能约为每月 7-9 美元，但请注意其他事项，例如 IO、网络和快照成本。

# performance - 在 DB2 中声明全局临时表与创建全局临时表

> ID：15698771
> 
> 赞同：11
> 
> 时间：2013-03-29T06:52:49.820
> 
> 标签：performance, stored-procedures, db2, temp-tables

我正在 DB2 中创建一个`GLOBAL TEMPORARY TABLE`。当我上网时，我有两种方法来创建 1\. 声明 2\. 创建。

```
1\. DECLARE GLOBAL TEMPORARY TABLE SESSION.TEMP_EMP
      (EMPNO  CHAR(6) NOT NULL,
       SALARY DECIMAL(9, 2),
       BONUS  DECIMAL(9, 2),
       COMM   DECIMAL(9, 2)) WITH REPLACE ON COMMIT PRESERVE ROWS ;

2\. CREATE GLOBAL TEMPORARY TABLE TMPDEPT
      (TMPDEPTNO   CHAR(3)      NOT NULL,
       TMPDEPTNAME VARCHAR(36)  NOT NULL,
       TMPMGRNO    CHAR(6),
       TMPLOCATION CHAR(16) ) ON COMMIT PRESERVE ROWS ; 
```

并且从 IBM 站点我得到了一个信息，认为 create 是最好的，因为它是持久的，允许所有用户会话访问相同的表定义，而无需在启动时声明它以及更多优势。

链接：[http ://www.ibm.com/developerworks/data/library/techarticle/dm-0912globaltemptable/](http://www.ibm.com/developerworks/data/library/techarticle/dm-0912globaltemptable/)

我在使用 create over declare 时遇到了一些疑问：

1.  使用时找不到`Replace`关键字`CREATE GLOBAL TEMPORARY TABLE`。

2.  考虑一种情况，打开连接并执行存储过程，
    在该存储过程中创建全局临时表，并在该存储过程中调用另一个存储过程，该过程再次具有`same`创建临时表语句..在这种情况下会发生什么。 . 由于两个表 naes 相同并且在单个连接中，它是否会引发任何错误？

3.  声明有会话并创建没有？这与持久性有关吗？

4.  在性能方面哪个更好？声明温度还是创建温度？

5.  建议一些场景以最好地使用声明/创建！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T13:57:16.300

[Craig S. Mullins](https://www.craigsmullins.com/dbu_0802.htm)有一篇很好的文章，涵盖了两者之间的主要区别。对于大多数目的，它们的工作方式相同。

Created Temp Tables 在 中创建`DSNDB07`，它是工作文件数据库（在需要工作存储的 SQL 语句期间使用的相同存储区域）。声明的临时表存储在您必须创建的临时表空间中。

CTT 有一些缺点：

> *   因为它们不是持久的，一些典型的数据库操作，包括锁定、日志记录和恢复，不适用于创建的临时表。
>     
>     
> *   无法在已创建的临时表上创建索引，因此所有访问都是通过完整的表扫描进行的。
>     
>     
> *   不能在创建的临时表上创建约束。
>     
>     
> *   null 是创建的临时表的列唯一允许的默认值。
>     
>     
> *   DB2 实用程序无法引用创建的临时表。
>     
>     
> *   不能将创建的临时表指定为 UPDATE 语句的对象。
>     
>     
> *   从创建的临时表中删除时，必须删除所有行。
>     
>     
> *   虽然可以在创建的临时表上创建视图，但不能指定 WITH CHECK OPTION。

DTT 通常更灵活：

> *   声明的临时表可以定义索引和 CHECK 约束。
>     
>     
> *   您可以针对已声明的临时表发出 UPDATE 语句和定位的 DELETE 语句。
>     
>     
> *   您可以隐式定义已声明临时表的列并使用 SELECT 中的结果表。

现在为您编号的问题：

1\. & 2\. 没有。我相信（我不能 100% 确定这是否准确，我们的商店几乎在所有情况下都使用 DTT）CTT 被声明一次（由 DBA），然后应用程序程序员可以在任何会话中使用它。每个连接都有自己的副本，一旦应用程序断开连接，该会话中存储在该 CTT 中的数据就会消失。

3.`SESSION`只是 DTT 的模式标识符。它表明它是一个不持久的临时表。

4\. 我认为两者的性能大致相同。它们将比普通表更快，因为锁定、日志记录、恢复等将不适用。

5\. 一般来说，我会说 DTT 是可行的方法，但 CTT 很有用（正如 Craig 在他的文章中所说）：

> (CTTs) 应该主要在不需要更新临时数据并且访问临时数据是纯顺序的时考虑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-19T11:18:36.697

Craig S. Mullins 的文章适用于 DB2 for OS/390 平台。在 DB2 9.7 中，您实际上可以为 DGTT 和 CGTT 创建索引。您还可以在 CGTT 中启用日志记录。对于 9.7，请在此处阅读：[https ://www.ibm.com/support/knowledgecenter/en/SSEPGG_9.7.0/com.ibm.db2.luw.admin.dbobj.doc/doc/r0054491.html](https://www.ibm.com/support/knowledgecenter/en/SSEPGG_9.7.0/com.ibm.db2.luw.admin.dbobj.doc/doc/r0054491.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-13T20:37:50.690

4.  我们发现 Created Temp Tables - 在我们的例子中 - 表现得比 DTT 好得多。这可能是一个例外（视情况而定），但改变的动力是看到使用 DTT 执行的增量绑定的数量。每个事务需要 23 个临时表。我们进行了并行测试，发现 CTT 导致 cpu 和 In_DB2 时间大幅下降。我们还看到 lock/latch 等待的下降，并发现使用 CTTs 我们的 ZIIP cpu 开始超过我们的 GP cpu，这让每个人都很高兴。

我们不需要 DTT 索引或更新访问，也不需要任何 RI。

# c# - 我在 Unity3D 中遇到此错误 - NullReferenceException: Object reference not set to an instance of an object

> ID：15698773
> 
> 赞同：0
> 
> 时间：2013-03-29T06:52:52.227
> 
> 标签：c#, unity3d, frame-rate

在 Unity 3D 中开发 FPS 游戏时出现错误

> *NullReferenceException：对象引用未设置为对象 Node.OnDrawGizmos () 的实例（在 Assets/Node.cs:14）*

它之前工作正常，但是当我向节点添加层时，我得到了这个错误。

查看完整代码

```
using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class Node : MonoBehaviour {

public List<GameObject> neighours = new List<GameObject>();

public float nodeRadius = 50.0f;
public LayerMask nodeLayerMask;
public LayerMask collisionLayerMask;

public GameObject goal;

void OnDrawGizmos() {

    Gizmos.DrawWireCube(transform.position, Vector3.one);

    foreach(GameObject neighbor in neighbors) {

        Gizmos.DrawLine(transform.position, neighbor.transform.position);
        Gizmos.DrawWireSphere(neighbor.transform.position, 0.25f);
    }

    if(goal) {

        GameObject current = gameObject;
        Stack<GameObject> path = DijkstraAlgorithm.Dijkstra(GameObject.FindGameObjectsWithTag("Node"), gameObject, goal);

        foreach(GameObject obj in path) {

            Gizmos.DrawSphere(obj.transform.position, 1.0f);
            Gizmos.color = Color.green;
            Gizmos.DrawLine(current.transform.position, obj.transform.position);
            current = obj;
        }
    }
}

[ContextMenu ("Connect Node to Neighours")]
void findNeighours() {

    neighours.Clear();
    Collider[] cols = Physics.OverlapSphere(transform.position, nodeRadius, nodeLayerMask);

    foreach(Collider node in cols) {

        if(node.gameObject != gameObject) {

        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:26:22.350

我看到`findNeighours`不喂`neighours`，所以我想你想要这样的东西：

```
foreach (Collider node in cols) {
    if (node.gameObject != gameObject)
        neighours.Add (node.gameObject);
} 
```

关于`OnDrawGizmos`, 潜在地`path`并且`neighours`可能持有`null`物品。你应该检查是否是这种情况，看看为什么它充满了它`null`。请注意，可能删除场景中的游戏对象（而不是使用 刷新`findNeighours`）可能会使其保持`null`引用。

检查您是否定义了`goal`.

注意：邻居是指邻居吗？

# javascript - 在 highchart 中调整 X Scale 以显示适当的比例

> ID：15698779
> 
> 赞同：0
> 
> 时间：2013-03-29T06:53:14.930
> 
> 标签：javascript, highcharts, scale

![在此处输入图像描述](../Images/6ab657619304468be622293690139736.png)

基于图像，每个 X 值有 20 个点不同，线应显示为直线。

但是由于我添加了 2 个值，即 1025.96 和 1026.50（如右表中的彩色背景所示）并且它仍然对每个数字使用相同的比例，因此折线图不直。

如何调整图表中的这 2 点显示并使其绘制适当的比例？（显示直线）。

```
 $(document).ready(function() {

    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container2950',
            type: 'line',
            marginRight: 130,
            marginBottom: 45
        },
        title: {
            text: 'Strategy 2, Long C950',
            x: -20 //center
        },
        subtitle: {
            text: '',
            x: -20
        },
        credits: {
enabled: false
  },
        xAxis: {
  title: {
                text: 'SET50 Index ณ วันหมดอายุ'
            },
   categories:     [925,945,965,985,1005,1025,1025.96,1026.5,1045,1065,1085,1105,1125]

        },
        yAxis: {
            title: {
                text: 'Profit / Loss (Bath)'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            formatter: function() {
                    return '<b>'+ this.series.name +'</b><br/>'+
                    this.x +': '+ this.y +' บาท';
            }
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -10,
            y: 100,
            borderWidth: 0
        },
        series: [
        {name: 'Long C950', data:     [-15300,-15300,-12300,-8300,-4300,-300,-107.99999999999,0,3700,7700,11700,15700,19700]}
        ]

    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:08:45.590

没有任何代码可看，我无法确定，但我怀疑您正在指定 xAxis 类别。这将始终等间距 x 轴参数，而不是按比例绘制它们。

相反，您应该像这样指定您的系列数据：

```
data:[ [925,-15300],[945,-15300] ] 
```

这指定 x,y 值对。你也可以这样做：

```
data:[ {x:925,y:-15300},{x:945,y:-15300} ] 
```

第二个选项允许您设置其他点属性，例如颜色等。

# java - 当我运行此代码时，出现 stackOverflow 错误

> ID：15698780
> 
> 赞同：-1
> 
> 时间：2013-03-29T06:53:26.713
> 
> 标签：java, image-processing, stack-overflow

我必须获取值，并且必须匹配图像中的像素值。但是当我运行这段代码时，我得到了`StackOverflowError`.

如何在java中增加堆栈内存来克服这个问题。

```
public class ImageToText {
    private final int ALPHA = 24;
    private final int RED = 16;
    private final int GREEN = 8;
    private final int BLUE = 0;

    public static void main(String args[]) throws IOException {
        File file = new File("C:\\image.jpg");
        BufferedImage image = ImageIO.read(file);
        int color21=image.getHeight();
        int color31=image.getWidth();
        getRGBA(image,color31,color21);

        for (int i = 0; i < image.getHeight(); i++) 
        {
            for (int j = 0; j < image.getWidth(); j++)
            {
                int color = image.getRGB(j, i);
                int color2=image.getHeight();
                int color3=image.getWidth();
                System.out.println(color2);
            }
        }
    }

    public static int[] getRGBA(BufferedImage img, int x, int y)
    {
        int[] color = new int[4];
        int[] originalPixel =  getRGBA(img,x,y);

        for (int i=0;i<img.getWidth();i++)
        {
            for (int j=0;j<img.getHeight();j++)
            {
                int[] color1 =  getRGBA(img,i,j);

                if (originalPixel[0] == color1[0] && originalPixel[1] == color1[1] && originalPixel[2] == color1[2] && originalPixel[3] == color1[3])
                {
                    img.setRGB(i, j,Color.red.getRGB());
                }
                else
                {
                    img.setRGB(i, j,Color.yellow.getRGB());
                }
            }
        }
        return color;
    }
} 
```

如何克服这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T06:56:30.203

getRGBA 无限调用自身：

```
public static int[] getRGBA(BufferedImage img, int x, int y)

  {

int[] color = new int[4];

 int[] originalPixel =  getRGBA(img,x,y); 
```

这种事情会导致 StackOverflowError。

**考虑添加 recursion 的基本情况**，这样您的代码就不会总是调用自己并且有“出路”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:57:44.050

函数 getRGBA 中的这一行：

```
int[] originalPixel =  getRGBA(img,x,y); 
```

这应该会导致无限递归。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-12T16:44:53.647

从`main`您调用以下方法的`getRGBA`方法。在`getRGBA`方法内部，您再次调用该方法。这使得循环/递归执行没有退出标准。

```
public static int[] getRGBA(BufferedImage img, int x, int y) {
    int[] color = new int[4];
    int[] originalPixel =  getRGBA(img,x,y);
} 
```

您必须在方法调用周围添加一些条件，以便递归执行停止。您的功能不够清楚，无法建议您可以设置什么条件。

```
public static int[] getRGBA(BufferedImage img, int x, int y) {
    int[] color = new int[4];
    if (some condition which becomes true) {
        int[] originalPixel =  getRGBA(img,x,y);
    }
} 
```

# sql - 创建为同一服务器中的不同数据库运行的 SQL 作业

> ID：15698785
> 
> 赞同：1
> 
> 时间：2013-03-29T06:54:05.863
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我正在使用`SQL Server 2008 R2`. 我有不同`five databases on the same server.`的 The`tables and stored procedure schema of all of them are the same`但是`data are different`我已经将它们指向不同的站点。现在，我想创建一个`sql job`每天晚上 9:30 运行的。并从数据库表中获取数据并将其存储到临时表中。还有一项将临时表的数据写入 LOG 文件的 sql 作业。

我`two different stored procedures`为此创建了一个-一个获取数据，另一个写入它，并且每个数据库都可以正常工作。

但问题是，在 sql server 代理中，我不想为每个获取存储过程名称并执行它的数据库创建 2 个 SQL 作业（总共 10 个 sql 作业）。取而代之的是，我想创建`ONLY TWO SQL JOBS`. 一个将执行存储过程以将数据提取到临时表中，另一个将在第一次完成后执行，并将数据写入服务器中每个数据库的单独目录的日志文件中。

如题，我在所有五个数据库中的存储过程名称和表名称都相同，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:33:38.017

我的建议是创建一两个作业并使用动态 sql 循环运行 sp。您可以通过 exec [Database1].[dbo].usp_procedurename @parametr1 运行另一个数据库中可用的 sp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-14T21:08:44.863

我相信`sp_MSforeachdb`会解决你的目的。将其与 If 子句配对以选择/忽略某些数据库。

```
DECLARE @command varchar(1000)

SELECT @command = 'IF ''?'' IN(''myDB1'', ''myDB2'', ''myDB3'') BEGIN USE ? Select db_Name() END'

--Print @command

EXEC sp_MSforeachdb @command 
```

# c++ - 使用双链表实现的堆栈错误

> ID：15698788
> 
> 赞同：0
> 
> 时间：2013-03-29T06:54:16.633
> 
> 标签：c++, linked-list, stack

```
class node{
  int data;

  public:
  node *next;
  node *prev;
  node(int a){data=a; next=NULL; prev=NULL;}
  int retrieve(){return data;}
};

class stack{
  node *top;
  public:
  stack(){top=NULL;}
  void push(node);
  bool empty();
  void printall();
};

void stack::push(node a){
  if(top==NULL)
    top=&a;
  else{
    top->next=&a;
    top->next->prev=top;
    top=&a;
  }
} 
```

 ````
int main(){
  stack st;
  cout<<st.empty()<<endl;
  node k(3);
  node j(4);
  node h(5);
  st.push(k);
  st.push(j);
  st.push(h);
  st.printall();  
} 
```

该错误发生在推送功能上。

当我使用 gdb 跟踪 push 函数内部的顶部值时，顶部的值立即更改为节点 a。

我在主函数中只有一个堆栈实例，因此只有一个顶部，它应该保持相同的值，直到我为其分配新值。对？

谁能给我一些提示？

（顺便说一句，有没有办法在代码前添加 4 个空格而不是全部输入？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:06:08.470

`stack::push(node a)`

```
node x; 
/* other things*/
You wil call this as push(x); 
```

您正在按值传递。也许这会导致一些问题。

`top=&a;`将存储形参的地址。它在 push 的范围内，当您退出 push 函数时，该变量将被销毁。`

# java - 用于在 Android 应用程序中检查互联网连接的广播接收器

> ID：15698790
> 
> 赞同：265
> 
> 时间：2013-03-29T06:54:35.107
> 
> 标签：java, android, broadcastreceiver, android-wifi, android-networking

我正在开发一个用于检查互联网连接的 android 广播接收器。

问题是我的广播接收器被调用了两次。我希望它仅在网络可用时才被调用。如果它不可用，我不想通知。

这是广播接收器

```
public class NetworkChangeReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(final Context context, final Intent intent) {
        final ConnectivityManager connMgr = (ConnectivityManager) context
                .getSystemService(Context.CONNECTIVITY_SERVICE);

        final android.net.NetworkInfo wifi = connMgr
                .getNetworkInfo(ConnectivityManager.TYPE_WIFI);

        final android.net.NetworkInfo mobile = connMgr
                .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

        if (wifi.isAvailable() || mobile.isAvailable()) {
            // Do something

            Log.d("Network Available ", "Flag No 1");
        }
    }
} 
```

这是 manifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.broadcastreceiverforinternetconnection"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <receiver android:name=".NetworkChangeReceiver" >
            <intent-filter>
                <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
                <action android:name="android.net.wifi.WIFI_STATE_CHANGED" />
            </intent-filter>
        </receiver>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：254
> 
> 时间：2013-03-29T09:39:35.907

**回答您的第一个问题**：您的广播接收器被调用了两次，因为

您添加了两个`<intent-filter>`

1.  网络连接变化：
    `<action android:name="android.net.conn.CONNECTIVITY_CHANGE" />`

2.  WiFi状态变化：
    `<action android:name="android.net.wifi.WIFI_STATE_CHANGED" />`

只需使用一个：
`<action android:name="android.net.conn.CONNECTIVITY_CHANGE" />`.

它只会响应一个动作而不是两个动作。请参阅[此处](https://stackoverflow.com/a/15546897/1168654)了解更多信息。

**回答您的第二个问题**（如果互联网连接可用，您希望接收者只呼叫一次）：

你的代码很完美；您仅在互联网可用时通知。

**更新**

如果您只想检查手机是否与互联网连接，则可以使用此方法检查您的连接。

```
public boolean isOnline(Context context) {

    ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    //should check null because in airplane mode it will be null
    return (netInfo != null && netInfo.isConnected());
} 
```

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2014-09-30T06:36:56.500

```
public class NetworkChangeReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(final Context context, final Intent intent) {
        if (checkInternet(context)) {
            Toast.makeText(context, "Network Available Do operations", Toast.LENGTH_LONG).show();
        }
    }

    boolean checkInternet(Context context) {
        ServiceManager serviceManager = new ServiceManager(context);
        return serviceManager.isNetworkAvailable()
    }
} 
```

服务管理器.java

```
public class ServiceManager {

    Context context;

    public ServiceManager(Context base) {
        context = base;
    }

    public boolean isNetworkAvailable() {
        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = cm.getActiveNetworkInfo();
        return networkInfo != null && networkInfo.isConnected();
    }
} 
```

权限：

```
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
 <uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2017-07-03T09:02:00.320

每次使用广播接收器检查互联网状态：

[![互联网状态实现](../Images/0e339c43883a8469628d53a7b0303769.png)](https://i.stack.imgur.com/DoOg3.png)

[Google Drive 上提供了完整的源代码](https://drive.google.com/open?id=0BzBKpZ4nzNzUYjhZamFIZTh6VTQ)。

**AndroidManifest.xml**

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<receiver android:name=".receivers.NetworkChangeReceiver">
            <intent-filter>
                <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
            </intent-filter>
</receiver> 
```

**广播接收器**

```
package com.keshav.networkchangereceiverexample.receivers;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.util.Log;

import static com.keshav.networkchangereceiverexample.MainActivity.dialog;

public class NetworkChangeReceiver extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent)
    {
        try
        {
            if (isOnline(context)) {
                dialog(true);
                Log.e("keshav", "Online Connect Intenet ");
            } else {
                dialog(false);
                Log.e("keshav", "Conectivity Failure !!! ");
            }
        } catch (NullPointerException e) {
            e.printStackTrace();
        }
    }

    private boolean isOnline(Context context) {
        try {
            ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo netInfo = cm.getActiveNetworkInfo();
            //should check null because in airplane mode it will be null
            return (netInfo != null && netInfo.isConnected());
        } catch (NullPointerException e) {
            e.printStackTrace();
            return false;
        }
    }
} 
```

**MainActivity.java**

```
package com.keshav.networkchangereceiverexample;

import android.content.BroadcastReceiver;
import android.content.Intent;
import android.content.IntentFilter;
import android.graphics.Color;
import android.net.ConnectivityManager;
import android.os.Build;
import android.os.Handler;
import android.os.Looper;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.TextView;

import com.keshav.networkchangereceiverexample.receivers.NetworkChangeReceiver;

public class MainActivity extends AppCompatActivity {

    private BroadcastReceiver mNetworkReceiver;
    static TextView tv_check_connection;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        tv_check_connection=(TextView) findViewById(R.id.tv_check_connection);
        mNetworkReceiver = new NetworkChangeReceiver();
        registerNetworkBroadcastForNougat();

    }

    public static void dialog(boolean value){

        if(value){
            tv_check_connection.setText("We are back !!!");
            tv_check_connection.setBackgroundColor(Color.GREEN);
            tv_check_connection.setTextColor(Color.WHITE);

            Handler handler = new Handler();
            Runnable delayrunnable = new Runnable() {
                @Override
                public void run() {
                    tv_check_connection.setVisibility(View.GONE);
                }
            };
            handler.postDelayed(delayrunnable, 3000);
        }else {
            tv_check_connection.setVisibility(View.VISIBLE);
            tv_check_connection.setText("Could not Connect to internet");
            tv_check_connection.setBackgroundColor(Color.RED);
            tv_check_connection.setTextColor(Color.WHITE);
        }
    }

    private void registerNetworkBroadcastForNougat() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
            registerReceiver(mNetworkReceiver, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));
        }
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
            registerReceiver(mNetworkReceiver, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));
        }
    }

    protected void unregisterNetworkChanges() {
        try {
            unregisterReceiver(mNetworkReceiver);
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        unregisterNetworkChanges();
    }
} 
```

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context="com.keshav.networkchangereceiverexample.MainActivity">

    <TextView
        android:id="@+id/tv_check_connection"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Connection establised !"
        android:padding="25dp"
        app:layout_constraintBottom_toBottomOf="parent"
        android:gravity="center"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2015-09-04T05:32:55.047

使用此方法检查网络状态：

```
private void checkInternetConnection() {

    if (br == null) {

        br = new BroadcastReceiver() {

            @Override
            public void onReceive(Context context, Intent intent) {

                Bundle extras = intent.getExtras();

                NetworkInfo info = (NetworkInfo) extras
                        .getParcelable("networkInfo");

                State state = info.getState();
                Log.d("TEST Internet", info.toString() + " "
                        + state.toString());

                if (state == State.CONNECTED) {
                      Toast.makeText(getApplicationContext(), "Internet connection is on", Toast.LENGTH_LONG).show();

                } else {
                       Toast.makeText(getApplicationContext(), "Internet connection is Off", Toast.LENGTH_LONG).show();
                }

            }
        };

        final IntentFilter intentFilter = new IntentFilter();
        intentFilter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);
        registerReceiver((BroadcastReceiver) br, intentFilter);
    }
} 
```

记得在 onDestroy 中取消注册服务。

干杯！！

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2020-04-07T14:29:23.027

警告：`Declaring a broadcastreceiver for android.net.conn.CONNECTIVITY_CHANGE is deprecated for apps targeting N and higher. In general, apps should not rely on this broadcast and instead use JobScheduler or GCMNetworkManager.`

正如`CONNECTIVITY_CHANGE`已弃用的那样，我们应该使用另一种方式来做同样的事情

以下`NetworkConnectionLiveData`将处理到目前为止的所有操作系统版本，并且如果目标 SDK 小于`Build.VERSION_CODES.LOLLIPOP`那么只有我们可以使用`broadcastReceiver`

最好的部分是此类使用`LiveData`，因此无需注册任何接收器使用`LiveData`，它将处理所有事情

```
class NetworkConnectionLiveData(val context: Context) : LiveData<Boolean>() {

    private var connectivityManager: ConnectivityManager = context.getSystemService(CONNECTIVITY_SERVICE) as ConnectivityManager

    private lateinit var connectivityManagerCallback: ConnectivityManager.NetworkCallback

    override fun onActive() {
        super.onActive()
        updateConnection()
        when {
            Build.VERSION.SDK_INT >= Build.VERSION_CODES.N -> connectivityManager.registerDefaultNetworkCallback(getConnectivityManagerCallback())
            Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP -> lollipopNetworkAvailableRequest()
            else -> {
                if (Build.VERSION.SDK_INT < Build.VERSION_CODES.LOLLIPOP) {
                    context.registerReceiver(networkReceiver, IntentFilter("android.net.conn.CONNECTIVITY_CHANGE"))
                }
            }
        }
    }

    override fun onInactive() {
        super.onInactive()
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
            connectivityManager.unregisterNetworkCallback(connectivityManagerCallback)
        } else {
            context.unregisterReceiver(networkReceiver)
        }
    }

    @TargetApi(Build.VERSION_CODES.LOLLIPOP)
    private fun lollipopNetworkAvailableRequest() {
        val builder = NetworkRequest.Builder()
                .addTransportType(android.net.NetworkCapabilities.TRANSPORT_CELLULAR)
                .addTransportType(android.net.NetworkCapabilities.TRANSPORT_WIFI)
        connectivityManager.registerNetworkCallback(builder.build(), getConnectivityManagerCallback())
    }

    private fun getConnectivityManagerCallback(): ConnectivityManager.NetworkCallback {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {

            connectivityManagerCallback = object : ConnectivityManager.NetworkCallback() {
                override fun onAvailable(network: Network?) {
                    postValue(true)
                }

                override fun onLost(network: Network?) {
                    postValue(false)
                }
            }
            return connectivityManagerCallback
        } else {
            throw IllegalAccessError("Should not happened")
        }
    }

    private val networkReceiver = object : BroadcastReceiver() {
        override fun onReceive(context: Context, intent: Intent) {
            updateConnection()
        }
    }

    private fun updateConnection() {
        val activeNetwork: NetworkInfo? = connectivityManager.activeNetworkInfo
        postValue(activeNetwork?.isConnected == true)
    }
} 
```

在任何类中使用 LiveData：

```
NetworkConnectionLiveData(context ?: return)
    .observe(viewLifecycleOwner, Observer { isConnected ->
        if (!isConnected) {
            // Internet Not Available
            return@Observer
        }
        // Internet Available
}) 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2017-03-31T05:34:29.730

仅适用于想要动态注册广播的其他人：

```
BroadcastReceiver mWifiReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        if (checkWifiConnect()) {
            Log.d(TAG, "wifi has connected");
            // TODO
        }
    }
};

private void registerWifiReceiver() {
    IntentFilter filter = new IntentFilter();
    filter.addAction(WifiManager.NETWORK_STATE_CHANGED_ACTION);
    filter.addAction(WifiManager.WIFI_STATE_CHANGED_ACTION);
    filter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);
    mContext.registerReceiver(mWifiReceiver, filter);
}

private void unregisterWifiReceiver() {
    mContext.unregisterReceiver(mWifiReceiver);
}

private boolean checkWifiConnect() {
    ConnectivityManager manager = (ConnectivityManager) mContext.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = manager.getActiveNetworkInfo();
    if (networkInfo != null
            && networkInfo.getType() == ConnectivityManager.TYPE_WIFI
            && networkInfo.isConnected()) {
        return true;
    }
    return false;
} 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-11-27T07:29:17.463

```
public static boolean isNetworkAvailable(Context context) {
        boolean isMobile = false, isWifi = false;

        NetworkInfo[] infoAvailableNetworks = getConnectivityManagerInstance(
                context).getAllNetworkInfo();

        if (infoAvailableNetworks != null) {
            for (NetworkInfo network : infoAvailableNetworks) {

                if (network.getType() == ConnectivityManager.TYPE_WIFI) {
                    if (network.isConnected() && network.isAvailable())
                        isWifi = true;
                }
                if (network.getType() == ConnectivityManager.TYPE_MOBILE) {
                    if (network.isConnected() && network.isAvailable())
                        isMobile = true;
                }
            }
        }

        return isMobile || isWifi;
    }

/* You can write such method somewhere in utility class and call it NetworkChangeReceiver like below */
public class NetworkChangedReceiver extends BroadcastReceiver 
{
@Override
    public void onReceive(Context context, Intent intent) {

        if (isNetworkAvailable(context)) 
                {
             Toast.makeText(context, "Network Available Do operations",Toast.LENGTH_LONG).show(); 

    }
    }
} 
```

仅当网络状态更改为已连接而不是断开连接时，才会调用上述广播接收器。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2017-07-05T03:32:38.573

[CONNECTIVITY_ACTION 文档](https://developer.android.google.cn/reference/android/net/ConnectivityManager.html?hl=zh-cn#CONNECTIVITY_ACTION)：

> 面向 Android 7.0（API 级别 24）及更高版本的应用如果在其清单中声明广播接收器，则不会收到此广播。如果应用程序使用 Context.registerReceiver() 注册其 BroadcastReceiver 并且该上下文仍然有效，它们仍将接收广播。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2018-04-11T12:07:36.610

对于活动、片段或上下文，这是一种舒适的方式。如果您对活动/片段（在 onDestroy 中）执行此操作，它也会自动取消注册，如果您愿意：

```
abstract class ConnectionBroadcastReceiver : BroadcastReceiver() {
    companion object {
        @JvmStatic
        fun registerWithoutAutoUnregister(context: Context, connectionBroadcastReceiver: ConnectionBroadcastReceiver) {
            context.registerReceiver(connectionBroadcastReceiver, IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION))
        }

        @JvmStatic
        fun registerToFragmentAndAutoUnregister(context: Context, fragment: Fragment, connectionBroadcastReceiver: ConnectionBroadcastReceiver) {
            val applicationContext = context.applicationContext
            registerWithoutAutoUnregister(applicationContext, connectionBroadcastReceiver)
            fragment.lifecycle.addObserver(object : LifecycleObserver {
                @OnLifecycleEvent(Lifecycle.Event.ON_DESTROY)
                fun onDestroy() {
                    applicationContext.unregisterReceiver(connectionBroadcastReceiver)
                }
            })
        }

        @JvmStatic
        fun registerToActivityAndAutoUnregister(activity: AppCompatActivity, connectionBroadcastReceiver: ConnectionBroadcastReceiver) {
            registerWithoutAutoUnregister(activity, connectionBroadcastReceiver)
            activity.lifecycle.addObserver(object : LifecycleObserver {
                @OnLifecycleEvent(Lifecycle.Event.ON_DESTROY)
                fun onDestroy() {
                    activity.unregisterReceiver(connectionBroadcastReceiver)
                }
            })
        }

        @JvmStatic
        fun hasInternetConnection(context: Context): Boolean {
            val info = (context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager).activeNetworkInfo
            return !(info == null || !info.isConnectedOrConnecting)
        }
    }

    override fun onReceive(context: Context, intent: Intent) {
        val hasConnection = !intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false)
//        Log.d("AppLog", "conenctivity changed. hasConnection? $hasConnection")
        onConnectionChanged(hasConnection)
    }

    abstract fun onConnectionChanged(hasConnection: Boolean)
} 
```

片段中的用法：

```
 ConnectionBroadcastReceiver.registerToFragmentAndAutoUnregister(activity!!, this, object : ConnectionBroadcastReceiver() {
        override fun onConnectionChanged(hasConnection: Boolean) {
            // Log.d("AppLog", "onConnectionChanged:" + hasConnection)
        }
    }) 
```

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2014-09-25T10:46:14.157

试试这个

```
public class ConnectionBroadcastReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {

    if (<Check internet connection available >) { 
        Toast.makeText(context, "connect to the internet", Toast.LENGTH_LONG).show();

        /*upload background upload service*/
        Intent serviceIntent = new Intent(context,<your service class>);
        context.startService(serviceIntent);

    }else{
        Toast.makeText(context, "Connection failed", Toast.LENGTH_LONG).show();

    }
    }
} 
```

一旦互联网连接触发，就会加载这个（BroadcastReciever）

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2016-06-06T09:34:25.897

我知道这个帖子很旧并且得到了充分的回答，但我觉得以下内容可能会对某些人有所帮助。

问题正文中的代码包含一个此处没有人解决的错误。@Nikhil 正在检查 wifi/手机是否可用，而不是是否已连接。

修复在这里：

```
@Override
public void onReceive(final Context context, final Intent intent) {
    final ConnectivityManager connMgr = (ConnectivityManager) context
            .getSystemService(Context.CONNECTIVITY_SERVICE);

    final android.net.NetworkInfo wifi = connMgr
            .getNetworkInfo(ConnectivityManager.TYPE_WIFI);

    final android.net.NetworkInfo mobile = connMgr
            .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

    if (wifi.isConnected() || mobile.isConnected()) {
      // do stuff
    }
} 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2016-08-11T23:31:43.837

显现：

```
<receiver android:name=".your.namepackage.here.ConnectivityReceiver">
    <intent-filter>
        <action android:name="android.net.conn.CONNECTIVITY_CHANGE"/>
    </intent-filter>
</receiver> 
```

接收器类：

```
public class ConnectivityReceiver extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {
        final String action = intent.getAction();
        switch (action) {
            case ConnectivityManager.CONNECTIVITY_ACTION:
                DebugUtils.logDebug("BROADCAST", "network change");
                if(NetworkUtils.isConnect()){
                    //do action here
                }
            break;
        }
    }
} 
```

和类实用程序，例如：

```
public class NetworkUtils {

    public static boolean isConnect() {
        ConnectivityManager connectivityManager = (ConnectivityManager) Application.getInstance().getSystemService(Context.CONNECTIVITY_SERVICE);
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
            Network[] netArray = connectivityManager.getAllNetworks();
            NetworkInfo netInfo;
            for (Network net : netArray) {
                netInfo = connectivityManager.getNetworkInfo(net);
                if ((netInfo.getTypeName().equalsIgnoreCase("WIFI") || netInfo.getTypeName().equalsIgnoreCase("MOBILE")) && netInfo.isConnected() && netInfo.isAvailable()) {
                    //if (netInfo.getState().equals(NetworkInfo.State.CONNECTED)) {
                    Log.d("Network", "NETWORKNAME: " + netInfo.getTypeName());
                    return true;
                }
            }
        } else {
            if (connectivityManager != null) {
                @SuppressWarnings("deprecation")
                NetworkInfo[] netInfoArray = connectivityManager.getAllNetworkInfo();
                if (netInfoArray != null) {
                    for (NetworkInfo netInfo : netInfoArray) {
                        if ((netInfo.getTypeName().equalsIgnoreCase("WIFI") || netInfo.getTypeName().equalsIgnoreCase("MOBILE")) && netInfo.isConnected() && netInfo.isAvailable()) {
                            //if (netInfo.getState() == NetworkInfo.State.CONNECTED) {
                            Log.d("Network", "NETWORKNAME: " + netInfo.getTypeName());
                            return true;
                        }
                    }
                }
            }
        }
        return false;
    }
} 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2015-12-24T09:51:42.013

```
public class AsyncCheckInternet extends AsyncTask<String, Void, Boolean> {

public static final int TIME_OUT = 10 * 1000;

private OnCallBack listener;

public interface OnCallBack {

    public void onBack(Boolean value);
}

public AsyncCheckInternet(OnCallBack listener) {
    this.listener = listener;
}

@Override
protected void onPreExecute() {
}

@Override
protected Boolean doInBackground(String... params) {

    ConnectivityManager connectivityManager = (ConnectivityManager) General.context
            .getSystemService(Context.CONNECTIVITY_SERVICE);

    NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();

    if ((networkInfo != null && networkInfo.isConnected())
            && ((networkInfo.getType() == ConnectivityManager.TYPE_WIFI) || (networkInfo
                    .getType() == ConnectivityManager.TYPE_MOBILE))) {
        HttpURLConnection urlc;
        try {
            urlc = (HttpURLConnection) (new URL("http://www.google.com")
                    .openConnection());
            urlc.setConnectTimeout(TIME_OUT);
            urlc.connect();
            if (urlc.getResponseCode() == HttpURLConnection.HTTP_OK) {
                return true;
            } else {
                return false;
            }
        } catch (MalformedURLException e) {
            e.printStackTrace();
            return false;

        } catch (IOException e) {
            e.printStackTrace();
            return false;

        }
    } else {
        return false;
    }
}

@Override
protected void onPostExecute(Boolean result) {
    if (listener != null) {
        listener.onBack(result);
    }
} 
```

}

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2016-10-28T14:49:54.893

添加一个可以监听网络连接变化的广播接收器。然后检查设备是否连接到互联网或没有使用 ConnectivityManager。有关详细了解，请参阅此[帖子](http://www.singhajit.com/notify-android-device-network-status-changes/)或[视频](https://www.youtube.com/watch?v=ubvWRlFnr74)。下面是代码：

```
public class NetworkStateChangeReceiver extends BroadcastReceiver {
  public static final String NETWORK_AVAILABLE_ACTION = "com.ajit.singh.NetworkAvailable";
  public static final String IS_NETWORK_AVAILABLE = "isNetworkAvailable";

  @Override
  public void onReceive(Context context, Intent intent) {
    Intent networkStateIntent = new Intent(NETWORK_AVAILABLE_ACTION);
    networkStateIntent.putExtra(IS_NETWORK_AVAILABLE,  isConnectedToInternet(context));
    LocalBroadcastManager.getInstance(context).sendBroadcast(networkStateIntent);
  }

  private boolean isConnectedToInternet(Context context) {
    try {
      if (context != null) {
        ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();
        return networkInfo != null && networkInfo.isConnected();
      }
      return false;
    } catch (Exception e) {
      Log.e(NetworkStateChangeReceiver.class.getName(), e.getMessage());
      return false;
    }
  }
} 
```

我写这个接收器是为了在屏幕上显示一个通知，这就是为什么你会看到一个带有网络状态的本地广播。这是显示通知的代码。

```
public class MainActivity extends AppCompatActivity {

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    IntentFilter intentFilter = new IntentFilter(NetworkStateChangeReceiver.NETWORK_AVAILABLE_ACTION);
    LocalBroadcastManager.getInstance(this).registerReceiver(new BroadcastReceiver() {
      @Override
      public void onReceive(Context context, Intent intent) {
        boolean isNetworkAvailable = intent.getBooleanExtra(IS_NETWORK_AVAILABLE, false);
        String networkStatus = isNetworkAvailable ? "connected" : "disconnected";

        Snackbar.make(findViewById(R.id.activity_main), "Network Status: " + networkStatus, Snackbar.LENGTH_LONG).show();
      }
    }, intentFilter);
  }
} 
```

Activity 监听网络接收器广播的意图，并在屏幕上显示通知。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-12-10T11:31:34.530

完整答案在这里

清单文件

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />

<receiver android:name=".NetworkStateReceiver">
    <intent-filter>
      <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
    </intent-filter>
  </receiver> 
```

BroadecardReceiver 类

```
public class NetworkStateReceiver extends BroadcastReceiver {
    public void onReceive(Context context, Intent intent) {
     Log.d("app","Network connectivity change");
     if(intent.getExtras()!=null) {
        NetworkInfo ni=(NetworkInfo) intent.getExtras().get(ConnectivityManager.EXTRA_NETWORK_INFO);
        if(ni!=null && ni.getState()==NetworkInfo.State.CONNECTED) {
            Log.i("app","Network "+ni.getTypeName()+" connected");
        } else if(intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY,Boolean.FALSE)) {
            Log.d("app","There's no network connectivity");
        }
   }
} 
```

注册接收器`MainActivity`

```
@Override
protected void onResume() {
    super.onResume();
    IntentFilter intentFilter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);
    registerReceiver(networkReceiver, intentFilter);
}

@Override
protected void onPause() {
    super.onPause();
    if (networkReceiver != null)
        unregisterReceiver(networkReceiver);
} 
```

享受！

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-09-15T06:49:32.570

广播接收器代码以检查互联网连接变化：

```
public class BroadCastDetecter extends BroadcastReceiver {
    public static boolean internet_status = false;
    public static void checkInternetConenction(Context context) {
        internet_status = false;
        ConnectivityManager check = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        if (check != null) {
            NetworkInfo[] info = check.getAllNetworkInfo();
            if (info != null)
                for (int i = 0; i < info.length; i++)
                {
                    if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                        internet_status = true;
                    }
                }
            if(internet_status)
            {
               //do what you want to if internet connection is available
            }
        }
    }

    @Override
    public void onReceive(Context context, Intent intent)
    {
        try {
            checkInternetConenction(context);
        }catch(Exception e){

        }
    }
} 
```

在清单文件中添加：

```
 <receiver android:name=".BroadCastDetecter">
            <intent-filter>
                <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
            </intent-filter>
        </receiver> 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-05-18T21:30:05.663

这仅检查网络接口是否可用，并不能保证特定的网络服务可用，例如，可能存在低信号或服务器停机时间

```
 private boolean isNetworkInterfaceAvailable(Context context) {
        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
        return activeNetwork != null && activeNetwork.isConnectedOrConnecting();
    } 
```

如果您想建立真正的连接以确保您的连接可以从服务器或任何 url 收集数据：

```
 private boolean isAbleToConnect(String url, int timeout) {
        try {
            URL myUrl = new URL(url);
            URLConnection connection = myUrl.openConnection();
            connection.setConnectTimeout(timeout);
            connection.connect();
            return true;
        } catch (Exception e) {
            Log.i("exception", "" + e.getMessage());
            return false;
        }
    } 
```

此函数需要包装在后台线程中：

```
final String action = intent.getAction();
        if (intent.getAction().equals(ConnectivityManager.CONNECTIVITY_ACTION)) {
            checkConnectivity(context);
        }
    }

    private void checkConnectivity(final Context context) {
        if (!isNetworkInterfaceAvailable(context)) {
            Toast.makeText(context, "You are OFFLINE!", Toast.LENGTH_SHORT).show();
            return;
        }

        final Handler handler = new Handler();
        new Thread(new Runnable() {
            @Override
            public void run() {
                final boolean isConnected = isAbleToConnect("http://www.google.com", 1000);
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        if (isConnected)
                            Toast.makeText(context, "You are ONLINE!", Toast.LENGTH_SHORT).show();
                        else
                            Toast.makeText(context, "You are OFFLINE!", Toast.LENGTH_SHORT).show();
                    }
                });

            }
        }).start();

    } 
```

添加所需权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
        <uses-permission android:name="android.permission.INTERNET"/> 
```

在清单文件中的应用程序下添加此行：

```
android:usesCleartextTraffic="true" 
```

将接收器添加到清单文件：

```
<receiver android:name=".ConnectivityChangeReceiver" >
            <intent-filter>

                <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
            </intent-filter>
        </receiver> 
```

在您的活动中注册/取消注册 BR：

```
@Override
    protected void onStart() {
        super.onStart();
        IntentFilter filter = new IntentFilter("android.net.conn.CONNECTIVITY_CHANGE");
        registerReceiver(connectivityChangeReceiver, filter);
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        unregisterReceiver(connectivityChangeReceiver);
    } 
```

这是整个广播类：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Handler;
import android.util.Log;
import android.widget.Toast;

import java.net.URL;
import java.net.URLConnection;

public class ConnectivityChangeReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(final Context context, final Intent intent) {

        final String action = intent.getAction();
        if (intent.getAction().equals(ConnectivityManager.CONNECTIVITY_ACTION)) {
            checkConnectivity(context);
        }
    }

    private void checkConnectivity(final Context context) {
        if (!isNetworkInterfaceAvailable(context)) {
            Toast.makeText(context, "You are OFFLINE!", Toast.LENGTH_SHORT).show();
            return;
        }

        final Handler handler = new Handler();
        new Thread(new Runnable() {
            @Override
            public void run() {
                final boolean isConnected = isAbleToConnect("http://www.google.com", 1000);
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        if (isConnected)
                            Toast.makeText(context, "You are ONLINE!", Toast.LENGTH_SHORT).show();
                        else
                            Toast.makeText(context, "You are OFFLINE!", Toast.LENGTH_SHORT).show();
                    }
                });

            }
        }).start();

    }

    //This only checks if the network interface is available, doesn't guarantee a particular network service is available, for example, there could be low signal or server downtime
    private boolean isNetworkInterfaceAvailable(Context context) {
        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
        return activeNetwork != null && activeNetwork.isConnectedOrConnecting();
    }

    //This makes a real connection to an url and checks if you can connect to this url, this needs to be wrapped in a background thread
    private boolean isAbleToConnect(String url, int timeout) {
        try {
            URL myUrl = new URL(url);
            URLConnection connection = myUrl.openConnection();
            connection.setConnectTimeout(timeout);
            connection.connect();
            return true;
        } catch (Exception e) {
            Log.i("exception", "" + e.getMessage());
            return false;
        }
    }
} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-02-21T11:37:45.433

1）在清单中： - 像下面的代码一样调用接收器

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    package="com.safal.checkinternet">

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/AppTheme"
        tools:ignore="AllowBackup,GoogleAppIndexingWarning">
        <receiver android:name=".NetworkChangeReceiver" >
            <intent-filter>
                <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
            </intent-filter>
        </receiver>
        <activity android:name=".MainActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

2）制作一个广播接收器类： - 在这个类中添加网络检查代码

```
package com.safal.checkinternet;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.util.Log;
import android.widget.Toast;

public class NetworkChangeReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(final Context context, final Intent intent) {
        if (isOnline(context)){
            Toast.makeText(context, "Available", Toast.LENGTH_SHORT).show();
        }else {
            Toast.makeText(context, "Not Available", Toast.LENGTH_SHORT).show();
        }
    }
    public boolean isOnline(Context context) {

        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        assert cm != null;
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        return (netInfo != null && netInfo.isConnected());
    }    
} 
```

3）在您对广播接收器的活动调用中：-

```
package com.safal.checkinternet;

import androidx.appcompat.app.AppCompatActivity;

import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
//Call Broad cast Receiver 
        IntentFilter filter = new IntentFilter();
        filter.addAction("android.net.conn.CONNECTIVITY_CHANGE");
        registerReceiver(new NetworkChangeReceiver(), filter);
    }
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-02-22T21:10:36.390

更容易使用[https://github.com/JobGetabu/DroidNet](https://github.com/JobGetabu/DroidNet)

```
 @Override
    public void onInternetConnectivityChanged(boolean isConnected) {

        if (isConnected) {
            //do Stuff with internet
            netIsOn();
        } else {
            //no internet
            netIsOff();
        }
    }

    private void netIsOn(){...}

    private void netIsOff(){...} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-02-11T10:06:35.627

添加权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
 <uses-permission android:name="android.permission.INTERNET" /> 
```

创建接收器以检查连接

```
public class NetworkChangeReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(final Context context, final Intent intent) {

        if(checkInternet(context))
        {
            Toast.makeText(context, "Network Available Do operations",Toast.LENGTH_LONG).show(); 
        }

    }

    boolean checkInternet(Context context) {
        ServiceManager serviceManager = new ServiceManager(context);
        if (serviceManager.isNetworkAvailable()) {
            return true;
        } else {
            return false;
        }
    }

} 
```

服务管理器.java

```
public class ServiceManager {

    Context context;

    public ServiceManager(Context base) {
        context = base;
    }

    public boolean isNetworkAvailable() {
        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = cm.getActiveNetworkInfo();
        return networkInfo != null && networkInfo.isConnected();
    }
} 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2018-08-11T09:39:03.913

首先，我们将创建一个类来检查网络状态的连通性。所以让我们创建一个类：

```
public class AppStatus {
    private static AppStatus instance = new AppStatus();
    static Context context;
    ConnectivityManager connectivityManager;
    NetworkInfo wifiInfo, mobileInfo;
    boolean connected = false;

    public static AppStatus getInstance(Context ctx) {
        context = ctx.getApplicationContext();
        return instance;
    }

    public boolean isOnline() {
        try {
            connectivityManager = (ConnectivityManager) context
                    .getSystemService(Context.CONNECTIVITY_SERVICE);

            NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();
            connected = networkInfo != null && networkInfo.isAvailable() &&
                    networkInfo.isConnected();
            return connected;

        } catch (Exception e) {
            System.out.println("CheckConnectivity Exception: " + e.getMessage());
            Log.v("connectivity", e.toString());
        }
        return connected;
    }
} 
```

现在制作一个新的广播接收器类：

```
public class ConnectivityReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        if (AppStatus.getInstance(context).isOnline()) {

            Intent intent1=new Intent(context,DisplayAct.class);
            intent1.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(intent1);

        } else {

            Toast.makeText(context, "Please !! Make your network ON", Toast.LENGTH_SHORT).show();

        }
    }
} 
```

现在在清单上注册您的广播接收器：

```
<receiver android:name=".ConnectivityReceiver">
            <intent-filter>
                <action android:name="android.net.conn.CONNECTIVITY_CHANGE"/>
            </intent-filter>
        </receiver> 
```

# iphone - 将网址转换为字符串

> ID：15698793
> 
> 赞同：-4
> 
> 时间：2013-03-29T06:54:44.993
> 
> 标签：iphone, ios, objective-c

我正在获取本地保存的图像 url，现在我正在尝试将其转换为字符串。我知道`absoluteString`将 url 转换为字符串的方法，但在这种情况下不起作用。

我的网址是这样的（文件：//本地主机/用户.......）

```
 NSString * imagestring = [entryObject.imageurl absoluteString]; 
```

但它的抛出错误 `unrecognized selector sent to instance 0xc36c410`。我不知道为什么会这样

这是我的对象类

```
@interface EntryObject : NSObject
@property (nonatomic, strong) NSString *descString;
@property (nonatomic, strong) UIImage *photoImage;
@property (nonatomic, strong) NSURL * imageurl;
@property (nonatomic, strong) NSString *dairyId;
@property (nonatomic, strong) NSString *eventId;
@property (nonatomic, strong) NSString *dateString;

@property (nonatomic, strong) NSString *monthwiseSeparate_String;
@property (nonatomic,strong)  NSString *sortedString;
@property (nonatomic,strong) NSData * entryimagedata; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:26:43.047

```
 entryObject.imageurl = [NSURL fileURLWithPath:yourPath]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T07:19:25.187

如果您收到`unrecognized selector sent to instance`错误，则表示您已向一个对象发送了一条消息，该对象不知道如何解释此消息。即，比如说，你有一个`NSString`对象并且你正在向`absoluteString`它发送一条消息，你会得到这个错误。

所以这样做的原因肯定是即使`imageurl`被声明为`NSURL`你可能（并且可能不小心做了）为它分配了一些其他类的对象。看起来*你那里只有一个 NSString*，从数据库中获得，为了解决你的问题，你不需要转换到`NSString`它已经是`NSString`. 将您的代码发布在您设置`imageURL`属性和发送`absoluteString`消息的位置。`absoluteString`还要在发送到 a的行之前放置一个断点`imageURL`并检查`imageURL`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T07:53:30.917

尝试这个：

```
NSString * imagestring = (NSString *)[entryObject.imageurl absoluteString]; 
```

或者

```
NSString * imagestring = (NSString *)[entryObject imageurl]; 
```

# java - 在 Spring 中使用 Annotations Vs XML 配置的情况？

> ID：15698795
> 
> 赞同：0
> 
> 时间：2013-03-29T06:54:51.703
> 
> 标签：java, xml, spring, spring-mvc, annotations

很抱歉问这个问题，这个问题可能已经在 Stack Overflow 中针对不同的情况提出过。

我在 Stack overflow 和 google 中搜索了很多。但是找不到可靠且非常合适的答案。这就是为什么我提出了一个新问题。

`Annotation`经过一番搜索，我发现`XML configuration`在`Spring project`. 所以现在我有一些问题要问

1.  我找到正确的了吗？

2.  还有谁能告诉我`when to use annotations and when to use XML based configuration in Spring`？

3.  一些`pros and cons`用于`annotaion 和 XML 配置的示例情况？

好的答案绝对值得赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:02:27.593

我遵循以下内容：

我在自己的项目中为类使用注释，当我需要在 3rd 方库中注入 bean 时，我使用 XML，因为 XML 是我能做到这一点的唯一方法。

我建议使用注释，因为与 XML 定义相比，它们**更**容易维护。

另外，spring 提供了一种超级简单的方法，使用使用注释的组件扫描自动注册 bean。

此外，它更容易进行测试，因为您不需要继续编辑 XML 来为您的单元测试注入依赖项。

Plus 注释充当代码行为的文档。

请记住，XML 定义将覆盖注释。

# java - java中的Http响应头

> ID：15698798
> 
> 赞同：1
> 
> 时间：2013-03-29T06:55:03.340
> 
> 标签：java, servlets, httpresponse

您好我正在使用 HttpClient 发送 Http 请求。我可以调用 Servlet 但返回`405 status code.doPost method not allowed`。尝试获得相同的状态码。

而且我也无法得到标题作为回应。我是否需要将请求转发或包含回请求。

//发送Http请求的代码

```
public void perform(Date now, long remainingRepetitions)
    {
        log.info("Starting the Job " + now);

        System.out.println("Before try 2");
        try {

            HttpResponse response;
            while(true){
                HttpClient client = new DefaultHttpClient();
                System.out.println("Http Client instantiated");
                HttpPost request = new HttpPost("http://localhost:8080/Servlet");
                System.out.println("Post Request created");
                response = client.execute(request);
                System.out.println("Http Status Code  = " + response.getStatusLine().getStatusCode() );
                Header headers[] = response.getAllHeaders();
                for(Header h:headers){
                    System.out.println("New" +h.getName() + ": " + h.getValue());
                }

                if(response.getStatusLine().getStatusCode()==200 || response.getStatusLine().getStatusCode()== 405){
                    if(response.getLastHeader("JobStatus").equals("Success"))
                    {
                        break;
                    }
                }
                client.getConnectionManager().shutdown();

                Thread.sleep(10000);
            }

        } catch (ClientProtocolException e) {
            log.info(e);
        } catch (IOException e) {
            log.info(e);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            log.info("Exception Occured");
            e.printStackTrace();
        }finally{
            System.out.println("finally");
        } 
```

// 小服务程序

```
private void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException {
        System.out.println("Inside ProcessReqest");
        try{
             //some method call
             resp.addHeader("JobStatus", "Success");

        }catch(Exception e){
             resp.addHeader("JobStatus", "Failure");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:59:15.507

我认为 Servlet 仅`doGet().`在调用`POST`方法时才实现，`doPost()`或者`service()`方法应该由 servlet 实现。

默认情况下，当调用 servlet 的服务方法时，它会调用相应的`doXXX()`方法。如果 HttpServlet 的子类没有实现该`doXXX()`方法，则 HttpServlet 中的方法返回`405 Method Not Supported status code`.

HttpServlet 中的 doPost() 方法片段如下：

```
 protected void doPost(HttpServletRequest req, HttpServletResponse resp)
         throws ServletException, IOException {

         String protocol = req.getProtocol();
         String msg = lStrings.getString("http.method_put_not_supported");
         if (protocol.endsWith("1.1")) {
             resp.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, msg);
         } else {
             resp.sendError(HttpServletResponse.SC_BAD_REQUEST, msg);
         } 
```

我认为在您的情况下，您已将`doPost()`方法声明为私有。它的访问是隐藏的。将其修改为受保护并尝试。

在子类中具有较弱的访问权限是不正确的。通常，当您编译该 servlet 时，编译器应该会给出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:00:16.880

听起来您的服务器不支持 POST 方法。尝试改用 HttpGet 请求。

POST 用于向服务器发送数据，而 GET 用于请求信息。您的代码没有尝试发送任何数据，所以我认为 HttpGet 是您想要的。

[http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/methods/HttpGet.html](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/methods/HttpGet.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T07:01:43.150

如果这是来自您的客户端和 servlet 的代码，则该`doPost`方法是私有的，因此您的 servlet 将不会响应`POST`请求。公开你的`doPost`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T07:01:57.723

我认为您应该将`post`方法中的访问修饰符从`private`. 这就是它不可见的原因。将修饰符更改为`protected`或`public`

```
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException {
    System.out.println("Inside ProcessReqest");
    try{
         //some method call
         resp.addHeader("JobStatus", "Success");

    }catch(Exception e){
         resp.addHeader("JobStatus", "Failure");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-18T09:50:08.840

问题是添加的标题

```
HttpServletResponse.setHeader(...) 
```

或者

```
HttpServletResponse.addtHeader(...) 
```

是“servlet 响应头”，而不是“HTTP 头”。

因此，在其中您还可以找到 http 标头，但是您设置的内容不会与它们一起被客户端接收。

我建议您使用 URL 参数而不是标题。

# java - CentOS 上的 Apache Ant 1.8

> ID：15698809
> 
> 赞同：3
> 
> 时间：2013-03-29T06:55:26.727
> 
> 标签：java, ant, build, centos, env

我试图让 apache ant 1.8 在 CentOS 下工作。首先，我有这个错误。

```
Error: Could not find or load main class org.apache.tools.ant.launch.Launcher 
```

然后我根据这个链接设置以下变量：

[Ant：线程“主”java.lang.NoClassDefFoundError 中的异常：org/apache/tools/ant/launch/Launcher](https://stackoverflow.com/questions/4214979/ant-exception-in-thread-main-java-lang-noclassdeffounderror-org-apache-tools)

它不是 CentOS，但我确实验证了除了 JAVA_HOME 之外的路径存在，所以我根据这个站点设置它：

[https://serverfault.com/questions/50883/what-is-the-value-of-java-home-for-centos](https://serverfault.com/questions/50883/what-is-the-value-of-java-home-for-centos)

现在我遇到了与第一次相同的错误。我使用哪个蚂蚁规则都没有关系，我仍然会遇到同样的错误。

```
[alpha:~]
[bullshark]% export JAVA_HOME=/usr/lib/jvm/jre-1.7.0-openjdk.x86_64/
[alpha:~]
[bullshark]% export ANT_HOME=/usr/share/ant/
[alpha:~]
[bullshark]% export PATH=$PATH:$ANT_HOME/bin
[alpha:~]
[bullshark]% cd JRobo 
[alpha:JRobo] on master
[bullshark]% ant clean-and-fat-jar 
Picked up _JAVA_OPTIONS: -Xmx64m
Error: Could not find or load main class org.apache.tools.ant.launch.Launcher
[alpha:JRobo] on master
[bullshark]% cat /etc/redhat-release 
CentOS release 6.3 (Final)
[alpha:JRobo] on master
[bullshark]% 
```

如果你想尝试，你可以在 CentOS 上克隆他：

[https://github.com/BullShark/JRobo](https://github.com/BullShark/JRobo)

对于 CentOS 上的 Apache Ant 1.8：

[http://www.jpackage.org/browser/rpm.php?jppversion=6.0&id=11867](http://www.jpackage.org/browser/rpm.php?jppversion=6.0&id=11867)

对于包或手动：

[https://ant.apache.org/bindownload.cgi?Preferred=ftp://apache.mirrors.pair.com/](https://ant.apache.org/bindownload.cgi?Preferred=ftp://apache.mirrors.pair.com/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-02T18:53:17.770

以下是在 CentOS 上安装 ant 1.8 所需的步骤：

1.  下载[http://archive.apache.org/dist/ant/binaries/apache-ant-1.8.4-bin.tar.gz](http://archive.apache.org/dist/ant/binaries/apache-ant-1.8.4-bin.tar.gz)
2.  将 tarball 复制到您的 CentOS 主文件夹（如果它还没有的话）
3.  `tar xvzf apache-ant-1.8.4-bin.tar.gz`
4.  `sudo mv apache-ant-1.8.4 /opt/ant`
5.  设置 ANT_HOME=/opt/ant
6.  将“<code>export ANT_HOME=/opt/ant”添加到`/etc/profile`

要验证它是否有效，请运行：

```
ant -version 
```

# ember.js - rake-pipeline Assetfile：如何从 gem 中获取供应商 javascript？

> ID：15698813
> 
> 赞同：1
> 
> 时间：2013-03-29T06:56:07.107
> 
> 标签：ember.js, handlebars.js, rake-pipeline

是否可以从 gem 中获取供应商 javascript 用于 rake-pipeline？`handlebars-source`像,`ember-source`或的宝石`jquery-rails`。我猜这与 Rails 所做的类似。

`gem`让供应商 javascripts 保持最新是个好主意吗？

# drupal - 错误：尝试获取用户索引时出现问题！集成 Drupal 7 和 Moodle 2.4

> ID：15698815
> 
> 赞同：0
> 
> 时间：2013-03-29T06:56:18.230
> 
> 标签：drupal, cygwin, moodle

大家好我是以下错误**错误：尝试获取用户索引时出现问题！**，当我尝试运行脚本以在 cygwin 中同步 Drupal 和 Moodle 之间的用户时，它运行没有问题，并显示我在 Drupal 数据库上拥有的用户总数，在我的浏览器中运行相同的脚本，它向我显示了已经引用的错误，确实任何人都能够克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:21:49.727

该脚本仅用于从命令行运行。我不相信它意味着工作/将工作从浏览器运行。实际上，我现在在尝试从命令行运行时遇到了同样的错误，我正在努力找出原因。

# javascript - 在 UIWebView 中捕获 console.log

> ID：15698817
> 
> 赞同：5
> 
> 时间：2013-03-29T06:56:19.863
> 
> 标签：javascript, ios, uiwebview, xamarin.ios

我正在用 MonoTouch 编写一个 iOS 应用程序，它与 UIWebView 进行一些 javascript 交互。出于调试目的，如果能够“捕获”`console.log`在 UIWebView 中运行的 javascript 以及应用程序的其余输出，那就太好了。这可能吗？使用常规 Objective-C 代码的示例也可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T20:16:22.867

经过一番谷歌搜索，我得到了这个答案：[Javascript console.log() in an iOS UIWebView](https://stackoverflow.com/questions/6508313/javascript-console-log-in-an-ios-uiwebview)

将其转换为 MonoTouch 会产生以下解决方案：

```
using System;
using System.Web;
using System.Json;
using MonoTouch.UIKit;

namespace View
{
    public class JsBridgeWebView : UIWebView
    {

        public object BridgeDelegate {get;set;}

        private const string BRIDGE_JS = @"
            function invokeNative(functionName, args) {
                var iframe = document.createElement('IFRAME');
                iframe.setAttribute('src', 'jsbridge://' + functionName + '#' + JSON.stringify(args));
                document.documentElement.appendChild(iframe);
                iframe.parentNode.removeChild(iframe);
                iframe = null;  
            }

            var console = {
                log: function(msg) {
                    invokeNative('Log', [msg]);
                }
            };  
        ";

        public JsBridgeWebView ()
        {
            ShouldStartLoad += LoadHandler;
            LoadFinished += (sender, e) => {
                EvaluateJavascript(BRIDGE_JS);
            };
        }

        public bool LoadHandler (UIWebView webView, MonoTouch.Foundation.NSUrlRequest request, UIWebViewNavigationType navigationType)
        {
            var url = request.Url;
            if(url.Scheme.Equals("jsbridge")) {
                var func = url.Host;
                if(func.Equals("Log")) {
                    // console.log
                    var args = JsonObject.Parse(HttpUtility.UrlDecode(url.Fragment));
                    var msg = (string)args[0];
                    Console.WriteLine(msg);
                    return false;
                }
                return true;
            }
        }   
    }
} 
```

现在`console.log`a 中 javascript 中的所有语句`UIWebView`都将发送到`Console.WriteLine`. 这当然可以扩展到人们想要的任何类型的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:13:40.050

您能否添加执行类似操作的 javascript 代码来覆盖该方法：

```
console.log = function(var text) {
    consoleforios += text;
} 
```

然后从 web 视图中调用：

```
string console = webView.EvaluatingJavaScript("return consoleforios;"); 
```

这可能不是我要永久保留的东西，但它应该可以工作。

# gesture - Android - 如何在垂直滚动视图中添加水平滑动手势，如脉冲应用程序有屏幕视图

> ID：15698820
> 
> 赞同：5
> 
> 时间：2013-03-29T06:56:34.740
> 
> 标签：gesture

我是android新手，请帮助我，他们是否有可能在活动屏幕的垂直滚动视图中添加滑动动作。我正在努力，但没有得到......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T08:23:40.117

我刚刚将垂直滚动视图转换为 Listview，它的工作原理就像一个魅力......感谢[omid nazifi 和 wwyt](https://stackoverflow.com/a/5174757/1396042)，更多你可以[在 listview android 中看到这个链接 Gesture](https://stackoverflow.com/questions/3921138/gesture-in-listview-android)

```
public class MainActivity extends ListActivity {

    private OnTouchListener gestureListener;
    private GestureDetector gestureDetector;

    private int REL_SWIPE_MIN_DISTANCE; 
    private int REL_SWIPE_MAX_OFF_PATH;
    private int REL_SWIPE_THRESHOLD_VELOCITY;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // As paiego pointed out, it's better to use density-aware measurements. 
        DisplayMetrics dm = getResources().getDisplayMetrics();
        REL_SWIPE_MIN_DISTANCE = (int)(1.0f * dm.densityDpi / 160.0f + 0.5); 
        REL_SWIPE_MAX_OFF_PATH = (int)(250.0f * dm.densityDpi / 160.0f + 0.5);
        REL_SWIPE_THRESHOLD_VELOCITY = (int)(200.0f * dm.densityDpi / 160.0f + 0.5);

        ListView lv = getListView();
        lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, 
            m_Starbucks));

        final GestureDetector gestureDetector = new GestureDetector(new MyGestureDetector());
        View.OnTouchListener gestureListener = new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                return gestureDetector.onTouchEvent(event); 
            }};
        lv.setOnTouchListener(gestureListener);

        // Long-click still works in the usual way.
        lv.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {
            public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
                String str = MessageFormat.format("Item long clicked = {0,number}", position);
                Toast.makeText(MainActivity.this, str, Toast.LENGTH_SHORT).show();
                return true;
            }
        });

        /*lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {
                String str = MessageFormat.format("Item @extra clicked = {0,number}", position);
                Toast.makeText(MainActivity.this, str, Toast.LENGTH_SHORT).show();
            }
        });*/
    }

    // Do not use LitView.setOnItemClickListener(). Instead, I override 
    // SimpleOnGestureListener.onSingleTapUp() method, and it will call to this method when
    // it detects a tap-up event.
    private void myOnItemClick(int position, View v) {
        String str = MessageFormat.format("Item clicked = {0,number}", position);
        Toast.makeText(this, str, Toast.LENGTH_SHORT).show();
    }

    private void onLTRFling() {
        Toast.makeText(this, "Left-to-right fling", Toast.LENGTH_SHORT).show();
    }

    private void onRTLFling() {
        Toast.makeText(this, "Right-to-left fling", Toast.LENGTH_SHORT).show();
    }

    class MyGestureDetector extends SimpleOnGestureListener{ 

        // Detect a single-click and call my own handler.
        @Override 
        public boolean onSingleTapUp(MotionEvent e) {
            View lv = (View)getListView();
            int pos = ((AbsListView) lv).pointToPosition((int)e.getX(), (int)e.getY());
            myOnItemClick(pos,lv);
            return false;
        }

        @Override  
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) { 
            if (Math.abs(e1.getY() - e2.getY()) > REL_SWIPE_MAX_OFF_PATH) 
                return false; 
            if(e1.getX() - e2.getX() > REL_SWIPE_MIN_DISTANCE && 
                Math.abs(velocityX) > REL_SWIPE_THRESHOLD_VELOCITY) { 
                onRTLFling(); 
            }  else if (e2.getX() - e1.getX() > REL_SWIPE_MIN_DISTANCE && 
                Math.abs(velocityX) > REL_SWIPE_THRESHOLD_VELOCITY) { 
                onLTRFling(); 
            } 
            return false; 
        } 

    } 

    private static final String[] m_Starbucks = {
        "Latte", "Cappuccino", "Caramel Macchiato", "Americano", "Mocha", "White Mocha", 
        "Mocha Valencia", "Cinnamon Spice Mocha", "Toffee Nut Latte", "Espresso",
        "Espresso Macchiato", "Espresso Con Panna"
    };

} 
```

# java - LineBreakMeasurer 产生的结果与 MS Word / LibreOffice 不同

> ID：15698821
> 
> 赞同：2
> 
> 时间：2013-03-29T06:56:38.513
> 
> 标签：java, swing, line-breaks, word-wrap, libreoffice

在一个 Swing 应用程序中，我需要预见一个字符串的文本换行，就像将它放入 MS Word 或 LibreOffice 等文字处理器程序时一样。提供相同的可显示区域宽度、相同的字体（字体和大小）和相同的字符串，如下所示：

*   可显示区域宽度：179 毫米（在 .doc 文件中，设置 A4 纵向页面 - 宽度 = 210 毫米，左边距 = 20 毫米，右边 = 11 毫米；段落格式为零边距）
*   字体 Times New Roman，14 号
*   测试字符串： Tadf fdas fdas daebjnbvx dasf opqwe dsa: dfa fdsa ewqnbcmv caqw vstrt vsip d asfd eacc

结果：

*   在 MS Word 和 LibreOffice 上，该测试字符串都显示在单行上，不会发生文本换行。
*   我的波纹管程序报告发生文本换行，2行

    第 1 行： Tadf fdas fdas daebjnbvx dasf opqwe dsa: dfa fdsa ewqnbcmv caqw vstrt vsip d asfd

    第 2 行：ecc

是否有可能实现和 MS Word in swing 一样的文字环绕效果？代码中可能有什么问题？

贝娄我的程序

```
public static List<String> wrapText(String text, float maxWidth,
        Graphics2D g, Font displayFont) {
    // Normalize the graphics context so that 1 point is exactly
    // 1/72 inch and thus fonts will display at the correct sizes:
    GraphicsConfiguration gc = g.getDeviceConfiguration();
    g.transform(gc.getNormalizingTransform());

    AttributedCharacterIterator paragraph = new AttributedString(text).getIterator();
    Font backupFont = g.getFont();
    g.setFont(displayFont);
    LineBreakMeasurer lineMeasurer = new LineBreakMeasurer(
            paragraph, BreakIterator.getWordInstance(), g.getFontRenderContext());
    // Set position to the index of the first character in the paragraph.
    lineMeasurer.setPosition(paragraph.getBeginIndex());

    List<String> lines = new ArrayList<String>();
    int beginIndex = 0;
    // Get lines until the entire paragraph has been displayed.
    while (lineMeasurer.getPosition() < paragraph.getEndIndex()) {
        lineMeasurer.nextLayout(maxWidth);
        lines.add(text.substring(beginIndex, lineMeasurer.getPosition()));
        beginIndex = lineMeasurer.getPosition();
    }

    g.setFont(backupFont);
    return lines;
}

public static void main(String[] args) throws Exception {
    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JTextPane txtp = new JTextPane();
    frame.add(txtp);
    frame.setSize(200,200);
    frame.setVisible(true);
    Font displayFont = new Font("Times New Roman", Font.PLAIN, 14);

    float textWith = (179 * 0.0393701f) // from Millimeter to Inch
                        * 72f;           // From Inch to Pixel (User space)
    List<String> lines = wrapText(
            "Tadf fdas fdas daebjnbvx dasf opqwe dsa: dfa fdsa ewqnbcmv caqw vstrt vsip d asfd eacc",
            textWith,
            (Graphics2D) txtp.getGraphics(),
            displayFont);
    for (int i = 0; i < lines.size(); i++) {
        System.out.print("Line " + (i + 1) + ": ");
        System.out.println(lines.get(i));
    }
    frame.dispose();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:33:08.283

+1 的问题

根据我使用文本编辑器的经验，不可能实现完全相同的测量。

您可以尝试使用 DPI，Windows 上默认 DPI=72 和 96。

您也可以尝试使用图形的所有渲染提示 - 文本抗锯齿等。

# c# - 在 Sitemanager->Administrations->Users 中添加自定义选项卡

> ID：15698832
> 
> 赞同：3
> 
> 时间：2013-03-29T06:57:31.143
> 
> 标签：c#, asp.net, content-management-system, kentico

我有一个要求，我需要在 SiteManager->Administration->Users 中添加一个额外的选项卡

此选项卡将仅具有用户功能，但具有更高级的过滤器，这是因为 Kentico 的 HotFix/版本升级可以更新 Kentico 的默认和代码功能，因此我们不想更新其基本功能

因此，如果我们更改核心高级搜索功能是有风险的，因此我们需要有一个符合我们所需要求的新页面/webpart。

![在此处输入图像描述](../Images/ab897629de119e434de68f13a422cef1.png)

感谢您提供任何帮助，我们一直在寻找它，但没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T08:57:52.463

在版本 7 中，我会这样做：

1.  通过复制现有的搜索页面及其底层控件来创建新的搜索页面（以确保升级不会破坏您的更改）
2.  进行自定义
3.  导航到 CMS 站点管理器 -> 开发 -> 模块 -> 用户 -> 编辑用户 -> 用户界面
4.  添加 UI 元素，例如“高级搜索”
    *   将目标 URL 设置为您的页面
    *   set Element 自定义为 true

# html - CSS 属性浮动的问题

> ID：15698833
> 
> 赞同：0
> 
> 时间：2013-03-29T06:57:38.580
> 
> 标签：html, css, css-float

这些是我正在使用的代码：http: [//jsfiddle.net/VaKSG/](http://jsfiddle.net/VaKSG/)

```
.brs_top_bar{
    width: 900px;
    height: 40px;
    background: rgb(27, 124, 124);
    border-bottom: 1px solid rgb(20, 92, 92);
    color: white;
}
.brs_top_search{
    width: 201px;
    height: 40px;
    background: rgb(22, 105, 105);
    display: inline-block;
}
.brs_top_show_hide{
    height: 40px;
    width: 10px;
    background: rgb(78, 218, 218);
    display: inline-block;
}
.brs_top_pages_info{
    color: white;
    font-weight: bold;
    display: inline-block;
    line-height: 30px;
    vertical-align: top;
}
.brs_top_pages_but{
    text-decoration: none;
    color: white;
    font-weight: bold;
    line-height: 28px;
    text-align: center;
    height: 28px;
    width: 28px;
    background: rgb(35, 156, 156);
    border: 1px solid rgb(31, 139, 139);
    display: inline-block;
 }
 .brs_top_pages{
    margin: 5px;
    height: 30px;
    display: inline-block;
    vertical-align: top;
 }
.floating{
    float: right;
    position: relative;
 } 
```

* * *

```
<div class="brs_top_bar">
    <div class="brs_top_search"></div>
    <div class="brs_top_show_hide"></div>
    <div class="brs_top_pages floating">
        <div class="brs_top_pages_info">1 - 10 of 300</div>
        <a href="" title="" class="brs_top_pages_but"><</a><a href="" class="brs_top_pages_but" title="">></a>
    </div>
</div> 
```

它在链接中运行正常，但在我的本地环境中，浮动元素位于同一容器中的其他元素下方，如图所示：

![](../Images/01f2b8a29f1d37499262daa949980451.png)

我几乎尝试了一切来让它正确，但没有奏效。我正在使用 Chrome。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:13:19.043

试试下面的css代码。只需添加`float:left`两个类。

```
.brs_top_search{
    width: 201px;
    height: 40px;
    background: rgb(22, 105, 105);
    display: inline-block;
    float: left;
}
.brs_top_show_hide{
    height: 40px;
    width: 10px;
    background: rgb(78, 218, 218);
    display: inline-block;
    float: left;
} 
```

# javascript - 为什么我的代码中的 event.target 不能在 firefox 中运行？

> ID：15698834
> 
> 赞同：1
> 
> 时间：2013-03-29T06:57:39.153
> 
> 标签：javascript

为什么我的代码中的 event.target 不能在 firefox 中运行？

```
 <script> 
    document.onmousedown = function(){
     var e = window.event;
     var target = e.srcElement || e.target || e.currentTarget;
     if(target.className == 'box'){
     alert("Yeah");
     }
     }
    </script>

<body>
  <div class="box" style="border:1px dotted #CC3366; width:300px; height:100px;">Click Me!!</div>
  <a href="#" class="box">Link</a>
 </body> 
```

它可以在 IE 或 Chrome 中运行，但不能在 Firefox 中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:00:50.477

Firefox 要求将事件显式定义为处理程序的参数。

您可以编写如下内容：

```
document.onmousedown = function(e) {
    e = e || window.event;
    var target = e.srcElement || e.target || e.currentTarget;
    if (target.className == "box") {
        alert("Yeah");
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:00:11.930

Firefox 不支持`window.event`，因为它不是任何标准的一部分，Microsoft 在事件标准化之前将其作为其专有事件模型的一部分创建。

忘记这些差异，[即使是标准的 DOM 也是一团糟](http://ejohn.org/blog/the-dom-is-a-mess/)。这就是为什么开始创建 JS DOM 库的原因，它们使处理 DOM 的大多数任务变得更加容易，并且可以平滑事件模型和其他事物的实现差异。

For instance that code could be rewritten with [jQuery](http://jquery.com/) as

```
$('.box').mousedown(function(){
  alert("Yeah");
}); 
```

Generally speaking, attaching events to the document or body is a bad idea. This jQuery code looks for any elements that have the `.box` class and attaches the `mousedown` handler directly to them.

# javascript - 错误：域、协议和端口必须匹配 错误：“对象 [对象全局] 没有方法 'getElementsByTagName'”

> ID：15698836
> 
> 赞同：1
> 
> 时间：2013-03-29T06:57:44.777
> 
> 标签：javascript, html, node.js, web

我正在使用创建 HTTP 服务器的 NODE JS 模块。服务器的响应是一个包含 JavaScript 的页面，该页面嵌入了一个网页，`<iframe>`我`<iframe>`正在访问它的元素数据`getElementsByTagName`。
这是响应代码：

```
<html>
<head>
<script type='text/javascript'>
    function test() {
        document.body.innerHTML='<iframe id="ifool" src="file:///C:/Users/Naman/Desktop/rew.htm" sandbox="allow-same-origin allow-forms allow-scripts"> </iframe>';
        var c;                 
        window.setInterval(function(){
        c=document.getElementById("ifool").contentWindow.location.href; 
        window.history.pushstate(0,0,c);  
        },100);
        window.setInterval(function () {
        var x = document.getElementById("ifool");
        var y = (x.contentWindow || x.contentDocument);
        if (y.document) y = y.document;
        try {
            var a = y.getElementsByTagName("input")[0].value;
            var b = y.getElementsByTagName("input")[1].value;
        } catch (err) {
            txt = "There was an error on this page.\n\n";
            txt += "Error description: " + err.message + "\n\n";
            txt += "Click OK to continue.\n\n";
            alert(txt);
        }
        }, 2000);
</script>
</head>
<body onload= 'test()'>
</body>
</html> 
```

我在这里收到错误，因为“对象 [object global] 没有方法 'getElementsByTagName'”。我正在使用 Chrome，但我也尝试过 Firefox。

在检查元素控制台中，我也收到以下错误-

```
localhost: Unsafe JavaScript attempt to access frame with URL "URL1" from frame with URL http://localhost:8080/. Domains, protocols and ports must match. 
```

# c# - 在并行文件下载器中引发进度事件同时最小化锁定的最佳方法

> ID：15698837
> 
> 赞同：0
> 
> 时间：2013-03-29T06:57:45.890
> 
> 标签：c#, oop, parallel-processing

我正在开发一个小文件下载器。它通过分段下载文件，然后并行下载每个分段。我希望我的应用程序支持一个事件系统，理想情况下它会显示已经完成的总进度。

我目前的幼稚方法是简单地锁定数据结构，每次每个线程下载 10k 时，所有线程都在其中存储有关其当前进度的信息。然后我进行计算，然后引发事件。这有一个问题，即线程通常会同时引发一个事件，而且每次我想引发一个事件时，我都会锁定整个结构。另一方面，如果连接变慢，则可能需要一段时间才能引发事件。我更希望有一个每 100 毫秒或某事会引发一个事件的系统。

虽然该解决方案有效，但我对此并不满意。对于所描述的情况，正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T08:46:00.940

您可以使用[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)作为所有线程写入其进度信息的队列。然后有另一个线程存在只是为了从 BlockingCollection 中取出项目

你的出队头可能看起来像

```
foreach (var progressMessage in progressMessageQueue.GetConsumingEnumerable())
{
    // Handle progressMessage by raising an event.
} 
```

假设你有一个`ProgressMessage`封装了进度信息的类，你可以像这样声明队列：

```
BlockingCollection<ProgressMessage> progressMessageQueue = new BlockingCollection<ProgressMessage>(); 
```

您将项目添加到队列中，这样：

```
progressMessageQueue.Add(progressMessage); 
```

当您知道所有线程都已完成工作时，请调用：

```
progressMessageQueue.CompleteAdding(); 
```

就每隔几毫秒排队进度消息而言；这要困难得多。如果文件块的下载速度不够快，则必须进行某种超时处理。我不知道你会怎么做，因为我不知道你是如何下载文件的。

# html - 容器溢出的表格浮动：隐藏

> ID：15698843
> 
> 赞同：0
> 
> 时间：2013-03-29T06:59:02.360
> 
> 标签：html, css

我想在同一行显示两个表。然后我正在使用`float: left;` [这样的。](http://jsfiddle.net/bULcB/2/)

如果这些表格的宽度超过我`overflow: hidden;`用来隐藏多余部分的容器。

溢出隐藏工作完美，但桌子不在同一条线上。

[http://jsfiddle.net/bULcB/3/](http://jsfiddle.net/bULcB/3/)

我该如何解决。我希望桌子保持在同一条线上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:07:26.580

添加一个容器`div`来包装这两个表。然后让它`width`足够大，可以将两张桌子排成一行。容器的溢出部分不会显示为父级`div`指定的`overflow: hidden;`。

请参阅[jsFiddle上的更新示例](http://jsfiddle.net/ArieShout/YAaL4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T07:12:17.380

给`position: relative`你的父元素并给`position: absolute; top: 0; left: 100px;`你的**第二**个子元素（从第二个子元素中删除`float`属性）。

**[工作小提琴](http://jsfiddle.net/bULcB/5/)**

**要不然**

给`White-space: nowrap`你的父元素并给`display: inline-block`你的子元素而不是`float: left`.

仅适用于最新版本的浏览器。

**[工作小提琴](http://jsfiddle.net/bULcB/4/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T07:23:07.033

```
div style="width: 300px; overflow: hidden; ">
<table cellspacing="0" cellpadding="0" style="float: left;  background-color:red;">
    <tr>
        <td>First Table</td>
    </tr>
</table>
<table cellspacing="0" cellpadding="0" style="float: left; background-color:yellow;">
    <tr>
        <td>Second Table</td>
    </tr>
</table> 
```

# .net - Visual Basic 从文件中读取 - 一行并将其分开

> ID：15698845
> 
> 赞同：0
> 
> 时间：2013-03-29T06:59:06.590
> 
> 标签：.net, vb.net, winforms, file-io, textbox

所以我正在申请，你必须登录。所以我得到了用户名和密码的登录屏幕和文本框。我有一个文件，其中保存了有关登录的所有信息，其格式如下：

```
Username|Password
AdminUsername|AdminPassword 
```

用户名 = 用户名 密码 = 密码 信息存储在 .lst 文件中。所以我想阅读文件并滚动浏览所有行并比较是否让我们说：

```
If TextBoxUsername.Text = usernameString And TextBoxPassword.Text = passwordString Then
    'code here
End If 
```

但是我不知道如何阅读和分隔文本，我只知道如何阅读整行而不是将行分成两部分：第一部分为“usernameString”，第二部分为“passwordString”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:31:08.740

要在分隔符上拆分文本字符串，请使用该[`String.Split`](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)方法并将分隔符指定为参数。例如：

```
Dim items As String() = line.Split("|"c) 
```

数组中的第一项 ( `items(0)`) 将是用户名，因为它位于原始字符串中分隔符的左侧`|`，数组中的第二项 ( `items(1)`) 将是密码，因为它位于右侧 -手边。

当然，这种方法仍然存在很多问题……一方面，将密码存储在纯文本文件中是一个可怕的想法。我希望这仅用于学习目的，即便如此，开始学习安全性永远不会太早！

# jquery - 如何在 DOM 加载后使用 jQuery 绑定鼠标悬停？

> ID：15698846
> 
> 赞同：0
> 
> 时间：2013-03-29T06:59:08.317
> 
> 标签：jquery, css

注意：我只是在学习jQuery，所以如果这可以更有效地完成，请分享。

我正在编写关注/取消关注功能。用户关注另一个用户的部分工作（见下面的第一个片段），但现在我想在用户悬停/鼠标悬停“关注”时将“关注”更改为“取消关注”。

“关注”的代码在这里（有效）：

```
$(document).on('click','a.follow-user',function () {
    event.preventDefault();
    var action = $(this).attr("action");
    var userid = $(this).attr("userid");
    var follower_userid = $(this).attr("follower_userid");

    $.ajax({
            type: "POST",
            url: "/follow-user.php",
            data: "action=" + action + "&userid=" + userid + "&follower_userid=" + follower_userid,
            success: function(data) {
                if (data == "FOLLOWED") {
                    $(".follow-user").html("Following");
                    $(".follow-user").attr({"action" : "0"});
                    $(".follow-user").removeClass("follow-user").addClass("following-user");
                } else {
                    $(".follow-user").removeClass(".follow-user").addClass("icon-warning-sign");
                }
            }
    });
}); 
```

并且当鼠标悬停在“以下”文本上时的代码在这里（它不起作用 - 没有错误）：

```
$(".following-user").on("mouseover", function () {
    $(this).html("Unfollow")
    $(this).attr({"action" : "1"});

    }).mouseout(function() {

    $(this).html("Following")
    $(this).attr({"action" : "0"});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:01:59.133

你需要这个：

```
$(document).on( 'mouseover', '.following-user', function() { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:02:27.270

尝试`following-user`将文档或最近的静态父级委托

```
$(document).on("mouseover", ".following-user",function () { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T07:08:23.027

使用事件委托绑定您的事件处理程序。

```
$(document).on({
  mouseover: function () {
    $(this).html("Unfollow").attr({
      "action": "1"
    });
  },
  mouseout: function () {
    $(this).html("Following").attr({
      "action": "0"
    });
  }
}, ".following-user"); 
```

特别是因为您正在更改它们的 HTML。

# dynamics-crm-2011 - 自定义 Microsoft Dynamic CRM 2011

> ID：15698855
> 
> 赞同：1
> 
> 时间：2013-03-29T06:59:46.220
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-4, dynamics-crm-online

我需要**自定义 Ms Dynamics CRM 中的信息区域**。 ![在此处输入图像描述](../Images/8257516d7f33fbc16ce08f21e280a47b.png)

这意味着我需要**在常规、管理之后再添加一个链接，然后我需要**在**活动新表单**中添加新链接。如果单击该链接，我需要打开新表单。如何在 microsoft Dynamics CRM 2011 中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T07:52:01.373

该区域保留用于列出表单选项卡，无法自定义。但是您可以在*Common*下添加一个链接，使用表单编辑器并编辑导航部分，您可以添加指向 Web 资源或外部链接的链接

# javascript - CamanJS：将图像动态加载到画布上

> ID：15698857
> 
> 赞同：0
> 
> 时间：2013-03-29T06:59:54.097
> 
> 标签：javascript, html, camanjs

使用 CamanJS，如何将图像动态加载到画布上？

我所拥有的只是 PNG 的 base64 编码。

我发现 CamanJS 的 API 文档并不完整。它甚至没有记录 this.save() 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T08:59:29.270

您必须先加载所需的图像。之后将图像对象传递给 camanjs 函数，如下所示。

```
var myimage = new Image();
    myimage.onload = function() {
          $('#myImageDiv').html('<img id="my-image" src='+myimage.src+' />');
          Caman('#my-image', function () {
                 this.brightness(10);
                 this.contrast(30);
                 this.sepia(60);
                 this.saturation(-30);
                 this.render();
          });
    }
    myimage.src = 'images/myimage.jpg'; 
```

# drupal - 使用 theme_preprocess_field() 更改字段

> ID：15698860
> 
> 赞同：0
> 
> 时间：2013-03-29T07:00:03.913
> 
> 标签：drupal, drupal-7

gunwinner 是我的主题名称，我想更改特定内容类型的字段。我试过这段代码，

```
function gunwinner_preprocess_field(&$variables) {
  $element = $variables['element'];
  if($element['#field_name'] == 'field_deal_url') {
     $values = $element['#items'][0]['value'];
     $deal_link = l(t("Go to Store"), "$values", array('attributes' => array('class' => 'store-link')));
     $element['#items'][0]['value'] = "Store";
  return;
  }
} 
```

它返回给我链接标题为“Go to Store”的数组，但它不会反映在特定字段的页面上。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T12:42:22.603

您正在制作副本`$variables['element']`并对其进行操作，因此更改不会保留到原始变量中。

只需将函数的第一行更改为

```
$element = &$variables['element']; 
```

# javascript - 为什么 Chrome 的 JavaScript 控制台一开始会覆盖现有的 html，但之后会追加？

> ID：15698862
> 
> 赞同：2
> 
> 时间：2013-03-29T07:00:08.177
> 
> 标签：javascript

如果我使用以下代码加载页面：

```
<html>
    <head></head>
    <body>
        foo
    </body>
</html> 
```

并启动 Chrome 的 JavaScript 控制台，然后键入：

```
document.writeln("bar"); 
```

它用“bar”覆盖现有页面。但如果我再输入：

```
document.writeln("baz"); 
```

它将文本*附加*到现有页面。

这是正确的行为，为什么？有没有办法首先获得附加行为？

# c++ - 移除和删除向量中的所有对象

> ID：15698863
> 
> 赞同：3
> 
> 时间：2013-03-29T07:00:08.230
> 
> 标签：c++, std

假设我有一个 ivar `vector<type> myVector;`。

我将项目添加到此向量中。

稍后，我想将向量“重置”为空，并再次将项目添加到新鲜的。

任何人都可以确认以下内容是否属实：

`myVector.clear(); //removes objects but does not remove memory occupied by prior full size of the vector, even though the vector is now empty with a size of 0`

请注意，这两个站点完全相互矛盾：[这个](http://en.cppreference.com/w/cpp/container/vector/clear)站点说*过去的迭代器不会失效*，`clear`而[这个](http://www.cplusplus.com/reference/vector/vector/clear/)站点则表明*与该容器相关的所有迭代器、指针和引用都已失效*。无论哪种方式，由于`capacity`没有改变，那么这并没有真正“重置” `vector`.

```
void someFunction(){
   vector<type> emptyVector;
   myVector.swap(emptyVector);
} // function terminates, thus the prior contents of myVector are deleted when emptyVector goes out of scope 
```

这似乎是最好的方法，我认为它可以达到以下效果：

```
myVector.swap(vector<type>()); 
```

**现在这比简单地这样做有什么更好或更坏：**

```
myVector=vector<type>(); 
```

这将简单地将整个 shebang 设置为一个新的空向量，因此内存中的旧点将自动被擦除干净，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:05:26.540

```
myVector=vector<type>(); 
```

大多数实现`std::vector`都将上述内容作为[*copy-and-swap 进行*](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom)，这意味着它在内部执行此操作，

```
vector<type>().swap(*this); //inside the operator= 
```

这相当于：

```
vector<type>().swap(myVector); 
```

So`swap()`是首选，因为它会执行您清空向量所需的必要操作。没有额外的工作。这是惯用的，您经常会在最好的 C++ 代码中看到这一点。

`operator=`另一方面，除了 call 之外，还有其他一些小事情`swap()`。所以直接调用`swap()`会为你节省几个 CPU 周期。

如您所知，`clear()`如果您想让*容量* **为零**（即释放内存），这还不够好。

* * *

请注意，以下内容不会编译：

```
myVector.swap(vector<type>()); //compilation error 
```

这是因为`std::vector::swap`通过非常量引用接受参数，这意味着临时对象无法绑定到它。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T07:19:03.043

C++11 引入了 vector::shrink_to_fit() ，它试图将向量物理收缩到它的大小。但是，不能保证这样做。[请参阅此处](http://www.cplusplus.com/reference/vector/vector/shrink_to_fit/)了解更多信息。

所以，物理调整大小。你可以：

```
myvector.clear();
myvector.shrink_to_fit(); 
```

# android - Android中的单行EditText

> ID：15698864
> 
> 赞同：19
> 
> 时间：2013-03-29T07:00:14.367
> 
> 标签：android, android-edittext

我正在尝试使 edittext 单行。编辑文本确实以单行形式出现，但在按下回车键时光标会出现在第二行，我需要停止它。singleLine 属性已被弃用，所以我不想使用它。

```
<EditText
    android:id="@+id/txtSearch"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="5dp"
    android:drawablePadding="5dp"
    android:lines="1"
    android:maxLines="1"
    android:inputType="none"
    android:scrollHorizontally="true"
    android:paddingLeft="5dp"
    android:textSize="12sp" /> 
```

有人可以让我知道我在这里有什么问题吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-07T16:22:46.237

设置`android:inputType`为不同于“none”的内容，使用“text”、“number”或应在`EditText`. 这样你就可以制作`EditText`单线了。（当然你不应该使用“textMultiLine”；））

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-29T07:02:01.630

用这个

```
android:singleLine="true" 
```

代替，

```
android:lines="1"
android:maxLines="1" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-27T09:01:45.360

改变，

机器人：输入类型=“无”

至

android:inputType="text" 或 android:inputType="number"

根据您的要求。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-23T10:56:44.703

使用此代码：

```
<EditText
  android:id="@+id/Et_loginEmail"
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:background="@drawable/layout_bg"
  android:hint="Email Address"
  android:singleLine="true"
  android:ellipsize="end"
/> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-02T06:22:02.967

仅此一项就足以在 EditText 中制作单行。

```
<EditText
    android:id="@+id/fullname"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="Full Name"
    android:inputType="text"/> 
```

`android:inputType="text"`单独解决`EditText`.

您需要`inputType`根据您的要求选择您想要的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-17T10:11:46.150

改变`android:inputType="none"`

```
<EditText
    android:id="@+id/txtSearch"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="5dp"
    android:drawablePadding="5dp"
    android:maxLines="1"
    android:inputType="none"
    android:scrollHorizontally="true"
    android:paddingLeft="5dp"
    android:textSize="12sp" /> 
```

至

```
<EditText
        android:id="@+id/txtSearch"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:drawablePadding="5dp"
        android:maxLines="1"
        android:inputType="text"
        android:scrollHorizontally="true"
        android:paddingLeft="5dp"
        android:textSize="12sp" /> 
```

# django - 使用 Count 进行注释无法按我的预期工作

> ID：15698866
> 
> 赞同：5
> 
> 时间：2013-03-29T07:00:24.430
> 
> 标签：django

我正在通过构建一个简单的 RPG 来试验 Django。它有装甲升级。有不同类别的盔甲（例如头部和身体）。每个类别都有许多盔甲。例如，“Head”类别可能有“Dragon Helm”、“Duck Helm”、“Needle Helm”等。

为了让用户看到a 类别中可用的*任何*盔甲，他们必须首先被授予访问该类别中至少一件盔甲的权限。那时，他们可以*查看*该类别中的所有盔甲——包括他们还不能购买的盔甲。

## 问题

我正在尝试*有效地*查询数据库中所有类别的盔甲，同时记下用户已被授予访问权限的盔甲。我有它的工作，但不完全。

## 相关代码

**模型.py**

```
from django.contrib.auth.models import User
from django.db import models

class Armor(models.Model):
    armor_category = models.ForeignKey('ArmorCategory')
    name = models.CharField(max_length=100)
    profile = models.ManyToManyField('Profile', through='ProfileArmor')

    def __unicode__(self):
        return self.name

class ArmorCategory(models.Model):
    name = models.CharField(max_length=100)
    slug = models.SlugField(blank=True)

    class Meta:
        verbose_name_plural = 'Armor categories'

    def __unicode__(self):
        return self.name

class Profile(models.Model):
    user = models.OneToOneField(User)
    dob = models.DateField('Date of Birth')

    def __unicode__(self):
        return self.user.get_full_name()

class ProfileArmor(models.Model):
    profile = models.ForeignKey(Profile)
    armor = models.ForeignKey(Armor)
    date_created = models.DateTimeField(auto_now_add=True)

    class Meta:
        ordering = ('-date_created',)

    def __unicode__(self):
        return '%s: %s' % (self.profile.user.get_full_name(), self.armor.name) 
```

**网址.py**

```
from django.conf.urls import patterns, url
from core import views

urlpatterns = patterns('',
    url(r'^upgrades/(?P<armor_category_slug>[-\w]+)/$', views.Upgrades.as_view(), name='upgrades'),
) 
```

**views.py**（这个文件是问题所在）

```
from django.db.models import Count, Q
from django.http import HttpResponseRedirect
from django.shortcuts import get_object_or_404
from django.views.generic.base import TemplateView
from .models import ArmorCategory

class Upgrades(TemplateView):
    template_name = 'core/upgrades.html'

    def get(self, request, *args, **kwargs):
        # Make sure the slug is valid.

        self.armor_category = get_object_or_404(ArmorCategory, slug=kwargs['armor_category_slug'])

        # Make sure the user has been granted access to at least one item in
        # this category, otherwise there is no point for the user to even be
        # here.

        if self.armor_category.armor_set.filter(
            profilearmor__profile=self.request.user.profile
        ).count() == 0:
            return HttpResponseRedirect('/')

        return super(Upgrades, self).get(request, *args, **kwargs)

    def get_context_data(self, **kwargs):
        # THIS IS WHERE THE PROBLEM IS.

        # Get all of the armor in this category, but also take note of which
        # armor this user has been granted access to.

        armor = self.armor_category.armor_set.filter(
            Q(profilearmor__profile=self.request.user.profile) |
            Q(profilearmor__profile=None)
        ).annotate(profile_armor_count=Count('profilearmor__id'))

        print armor.query

        for armor_item in armor:
            print '%s: %s' % (armor_item.name, armor_item.profile_armor_count)

        return {
            'armor_category': self.armor_category,
            'armor': armor,
        } 
```

## 问题的更多细节

我创建了“头部”类别，并给了它在这个问题的第一段中指出的三件盔甲。我按照上面列出的顺序创建了盔甲。然后我创建了两个用户配置文件。

我让第一个用户配置文件访问“Duck Helm”盔甲。然后我使用第一个用户配置文件访问 /upgrades/head/ 并从`for`循环中获得以下输出：

```
Dragon Helm: 0
Duck Helm: 1
Needle Helm: 0 
```

这是预期的输出。接下来，我让第二个用户配置文件访问“龙盔”盔甲。当我使用第二个用户配置文件访问相同的 URL 时，我得到了以下输出：

```
Dragon Helm: 1
Needle Helm: 0 
```

为什么没有列出“鸭盔”盔甲？我决定再次使用第一个用户配置文件返回相同的 URL，以确保它仍然有效。当我这样做时，我得到了这个输出：

```
Duck Helm: 1
Needle Helm: 0 
```

现在“龙盔”盔甲不见了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-31T13:45:56.337

### 1.快速解释

`None`当您在 Django查询集中测试多对多关系时，如下所示：

```
Q(profilearmor__profile=None) 
```

匹配多对多关系中*没有对应行的行。*所以你的查询

```
self.armor_category.armor_set.filter(
    Q(profilearmor__profile=self.request.user.profile) |
    Q(profilearmor__profile=None)) 
```

`self.request.user`匹配可以使用或*没有人*可以使用的盔甲物品。这就是为什么您对第二个用户的查询未能为 Duck Helm 返回一行：因为*有人*（即第一个用户）有权访问它。

### 2\. 该怎么做

您要运行的查询在 SQL 中如下所示：

```
SELECT `myapp_armor`.`id`, `myapp_armor`.`armor_category_id`, `myapp_armor`.`name`,
       COUNT(`myapp_profilearmor`.`id`) AS `profile_armor_count`
FROM `myapp_armor`
LEFT OUTER JOIN `myapp_profilearmor`
             ON `myapp_armor`.`id` = `myapp_profilearmor`.`armor_id`
                AND `myapp_profilearmor`.`profile_id` = %s
WHERE `myapp_armor`.`armor_category_id` = %s
GROUP BY `myapp_armor`.`id`, `myapp_armor`.`armor_category_id`, `myapp_armor`.`name` 
```

不幸的是，Django 的对象-关系映射系统似乎没有提供表达这种查询的方法。但是您总是可以绕过 ORM 并发出[原始 SQL 查询](https://docs.djangoproject.com/en/dev/topics/db/sql/)。像这样：

```
sql = '''
    SELECT `myapp_armor`.`id`, `myapp_armor`.`armor_category_id`, `myapp_armor`.`name`,
           COUNT(`myapp_profilearmor`.`id`) AS `profile_armor_count`
    FROM `myapp_armor`
    LEFT OUTER JOIN `myapp_profilearmor`
                 ON `myapp_armor`.`id` = `myapp_profilearmor`.`armor_id`
                    AND `myapp_profilearmor`.`profile_id` = %s
    WHERE `myapp_armor`.`armor_category_id` = %s
    GROUP BY `myapp_armor`.`id`, `myapp_armor`.`armor_category_id`, `myapp_armor`.`name`
'''
armor = Armor.objects.raw(sql, [self.request.user.profile.id, self.armor_category.id])
for armor_item in armor:
    print('{:14}{}'.format(armor_item.name, armor_item.profile_armor_count)) 
```

例如：

```
>>> helmets = ArmorCategory.objects.get(id=1)
>>> profile = Profile.objects.get(id=1)
>>> armor = Armor.objects.raw(sql, [profile.id, helmets.id])
>>> for armor_item in armor:
...     print('{:14}{}'.format(armor_item.name, armor_item.profile_armor_count))
... 
Dragon Helm   0
Duck Helm     1
Needle Helm   0 
```

### 3\. 你怎么能自己解决这个问题

这是有问题的 Django 查询：

```
armor = self.armor_category.armor_set.filter(
    Q(profilearmor__profile=self.request.user.profile) |
    Q(profilearmor__profile=None)
).annotate(profile_armor_count=Count('profilearmor__id')) 
```

当您不明白为什么查询会产生错误的结果时，总是值得查看实际的 SQL，您可以通过获取查询集的`query`属性并将其转换为字符串来做到这一点：

```
>>> from django.db.models import Q
>>> helmets = ArmorCategory.objects.get(name='Helmets')
>>> profile = Profile.objects.get(id=1)
>>> print(helmets.armor_set.filter(Q(profilearmor__profile=profile) |
...                                Q(profilearmor__profile=None)
... ).annotate(profile_armor_count=Count('profilearmor__id')).query)
SELECT `myapp_armor`.`id`, `myapp_armor`.`armor_category_id`, `myapp_armor`.`name`,
       COUNT(`myapp_profilearmor`.`id`) AS `profile_armor_count`
FROM `myapp_armor`
LEFT OUTER JOIN `myapp_profilearmor`
             ON (`myapp_armor`.`id` = `myapp_profilearmor`.`armor_id`) 
LEFT OUTER JOIN `myapp_profile`
             ON (`myapp_profilearmor`.`profile_id` = `myapp_profile`.`id`) 
WHERE (`myapp_armor`.`armor_category_id` = 1
       AND (`myapp_profilearmor`.`profile_id` = 1
            OR `myapp_profile`.`id` IS NULL))
GROUP BY `myapp_armor`.`id`, `myapp_armor`.`armor_category_id`, `myapp_armor`.`name`
ORDER BY NULL 
```

这是什么意思？如果您了解 SQL 连接的所有知识，您可以跳到第 5 节。否则，请继续阅读。

### 4\. SQL连接简介

我相信您知道，[SQL 中的表](http://en.wikipedia.org/wiki/Join_%28SQL%29)[*连接*](http://en.wikipedia.org/wiki/Join_%28SQL%29)由这些表中的行组合组成（取决于您在查询中指定的某些条件）。例如，如果您有两类盔甲和六件盔甲：

```
mysql> SELECT * FROM myapp_armorcategory;
+----+---------+---------+
| id | name    | slug    |
+----+---------+---------+
|  1 | Helmets | helmets |
|  2 | Suits   | suits   |
+----+---------+---------+
2 rows in set (0.00 sec)

mysql> SELECT * FROM myapp_armor;
+----+-------------------+-------------+
| id | armor_category_id | name        |
+----+-------------------+-------------+
|  1 |                 1 | Dragon Helm |
|  2 |                 1 | Duck Helm   |
|  3 |                 1 | Needle Helm |
|  4 |                 2 | Spiky Suit  |
|  5 |                 2 | Flower Suit |
|  6 |                 2 | Battle Suit |
+----+-------------------+-------------+
6 rows in set (0.00 sec) 
```

那么`JOIN`这两个表中的一个将包含第一个表的 2 行和第二个表的 6 行的所有 12 种组合：

```
mysql> SELECT * FROM myapp_armorcategory JOIN myapp_armor;
+----+---------+---------+----+-------------------+-------------+
| id | name    | slug    | id | armor_category_id | name        |
+----+---------+---------+----+-------------------+-------------+
|  1 | Helmets | helmets |  1 |                 1 | Dragon Helm |
|  2 | Suits   | suits   |  1 |                 1 | Dragon Helm |
|  1 | Helmets | helmets |  2 |                 1 | Duck Helm   |
|  2 | Suits   | suits   |  2 |                 1 | Duck Helm   |
|  1 | Helmets | helmets |  3 |                 1 | Needle Helm |
|  2 | Suits   | suits   |  3 |                 1 | Needle Helm |
|  1 | Helmets | helmets |  4 |                 2 | Spiky Suit  |
|  2 | Suits   | suits   |  4 |                 2 | Spiky Suit  |
|  1 | Helmets | helmets |  5 |                 2 | Flower Suit |
|  2 | Suits   | suits   |  5 |                 2 | Flower Suit |
|  1 | Helmets | helmets |  6 |                 2 | Battle Suit |
|  2 | Suits   | suits   |  6 |                 2 | Battle Suit |
+----+---------+---------+----+-------------------+-------------+
12 rows in set (0.00 sec) 
```

通常会向连接添加条件以限制返回的行，以便它们有意义。例如，将盔甲类别表与盔甲表连接时，我们只对盔甲属于盔甲类别的组合感兴趣：

```
mysql> SELECT * FROM myapp_armorcategory JOIN myapp_armor
           ON myapp_armorcategory.id = myapp_armor.armor_category_id;
+----+---------+---------+----+-------------------+-------------+
| id | name    | slug    | id | armor_category_id | name        |
+----+---------+---------+----+-------------------+-------------+
|  1 | Helmets | helmets |  1 |                 1 | Dragon Helm |
|  1 | Helmets | helmets |  2 |                 1 | Duck Helm   |
|  1 | Helmets | helmets |  3 |                 1 | Needle Helm |
|  2 | Suits   | suits   |  4 |                 2 | Spiky Suit  |
|  2 | Suits   | suits   |  5 |                 2 | Flower Suit |
|  2 | Suits   | suits   |  6 |                 2 | Battle Suit |
+----+---------+---------+----+-------------------+-------------+
6 rows in set (0.08 sec) 
```

这一切都很简单。但是如果一个表中的记录在另一个表中没有匹配项，就会出现问题。让我们添加一个没有相应盔甲物品的新盔甲类别：

```
mysql> INSERT INTO myapp_armorcategory (name, slug) VALUES ('Arm Guards', 'armguards');
Query OK, 1 row affected (0.00 sec) 
```

如果我们重新运行上面的`SELECT * FROM myapp_armorcategory JOIN myapp_armor ON myapp_armorcategory.id = myapp_armor.armor_category_id;`查询`JOIN`（如果我们想看到结果中出现的所有盔甲类别，无论它们在另一个表中是否有匹配的行，我们都必须运行所谓的[*外*连接](http://en.wikipedia.org/wiki/Join_%28SQL%29#Outer_join)：特别是 a `LEFT OUTER JOIN`：

```
mysql> SELECT * FROM myapp_armorcategory LEFT OUTER JOIN myapp_armor
           ON myapp_armorcategory.id = myapp_armor.armor_category_id;

+----+------------+-----------+------+-------------------+-------------+
| id | name       | slug      | id   | armor_category_id | name        |
+----+------------+-----------+------+-------------------+-------------+
|  1 | Helmets    | helmets   |    1 |                 1 | Dragon Helm |
|  1 | Helmets    | helmets   |    2 |                 1 | Duck Helm   |
|  1 | Helmets    | helmets   |    3 |                 1 | Needle Helm |
|  2 | Suits      | suits     |    4 |                 2 | Spiky Suit  |
|  2 | Suits      | suits     |    5 |                 2 | Flower Suit |
|  2 | Suits      | suits     |    6 |                 2 | Battle Suit |
|  3 | Arm Guards | armguards | NULL |              NULL | NULL        |
+----+------------+-----------+------+-------------------+-------------+
7 rows in set (0.00 sec) 
```

对于左侧表中没有在右侧表中匹配的行的每一行，左外连接包含一个`NULL`对应于右侧每一列的行。

### 5\. 解释查询出错的原因

让我们创建一个可以访问 Duck Helm 的个人资料：

```
mysql> INSERT INTO myapp_profile (name) VALUES ('user1');
Query OK, 1 row affected (0.00 sec)

mysql> INSERT INTO myapp_profilearmor (profile_id, armor_id) VALUES (1, 2);
Query OK, 1 row affected (0.00 sec) 
```

然后让我们运行一个简化版本的查询来尝试了解它在做什么：

```
mysql> SELECT `myapp_armor`.*, `myapp_profilearmor`.*, T5.*
        FROM `myapp_armor`
        LEFT OUTER JOIN `myapp_profilearmor`
                    ON (`myapp_armor`.`id` = `myapp_profilearmor`.`armor_id`)
        LEFT OUTER JOIN `myapp_profile` T5
                    ON (`myapp_profilearmor`.`profile_id` = T5.`id`)
        WHERE `myapp_armor`.`armor_category_id` = 1;

+----+-------------------+-------------+------+------------+----------+------+-------+
| id | armor_category_id | name        | id   | profile_id | armor_id | id   | name  |
+----+-------------------+-------------+------+------------+----------+------+-------+
|  1 |                 1 | Dragon Helm | NULL |       NULL |     NULL | NULL | NULL  |
|  2 |                 1 | Duck Helm   |    1 |          1 |        1 |    1 | user1 |
|  3 |                 1 | Needle Helm | NULL |       NULL |     NULL | NULL | NULL  |
+----+-------------------+-------------+------+------------+----------+------+-------+
3 rows in set (0.04 sec) 
```

因此，当您添加条件时，`(myapp_profilearmor.profile_id = 1 OR T5.id IS NULL)`您将从该联接中获取所有行。

现在让我们创建第二个可以访问 Dragon Helm 的配置文件：

```
mysql> INSERT INTO myapp_profile (name) VALUES ('user2');
Query OK, 1 row affected (0.00 sec)

mysql> INSERT INTO myapp_profilearmor (profile_id, armor_id) VALUES (2, 1);
Query OK, 1 row affected, 1 warning (0.09 sec) 
```

并重新运行连接：

```
mysql> SELECT `myapp_armor`.*, `myapp_profilearmor`.*, T5.*
        FROM `myapp_armor`
        LEFT OUTER JOIN `myapp_profilearmor`
                    ON (`myapp_armor`.`id` = `myapp_profilearmor`.`armor_id`)
        LEFT OUTER JOIN `myapp_profile` T5
                    ON (`myapp_profilearmor`.`profile_id` = T5.`id`)
        WHERE `myapp_armor`.`armor_category_id` = 1;

+----+-------------------+-------------+------+------------+----------+------+-------+
| id | armor_category_id | name        | id   | profile_id | armor_id | id   | name  |
+----+-------------------+-------------+------+------------+----------+------+-------+
|  1 |                 1 | Dragon Helm |    2 |          2 |        1 |    2 | user2 |
|  2 |                 1 | Duck Helm   |    1 |          1 |        2 |    1 | user1 |
|  3 |                 1 | Needle Helm | NULL |       NULL |     NULL | NULL | NULL  |
+----+-------------------+-------------+------+------------+----------+------+-------+
3 rows in set (0.00 sec) 
```

现在您可以看到，当您对第二个用户配置文件运行查询时，连接上的额外条件将是`(myapp_profilearmor.profile_id = 2 OR T5.id IS NULL)`并且这将仅选择第 1 行和第 3 行。第 2 行将丢失。

因此，您可以看到您的原始过滤器`Q(profilearmor__profile=None)`成为子条款`T5.id IS NULL`，这仅选择关系中*没有*条目（对于任何配置文件）的行`ProfileArmor`。

### 6\. 对您的代码的其他注释

1.  您可以使用查询集上的方法测试配置文件是否可以访问某个类别中的任何类型的盔甲[`count()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#count)：

    ```
    if self.armor_category.armor_set.filter(
        profilearmor__profile=self.request.user.profile
    ).count() == 0: 
    ```

    但是由于您实际上并不关心配置文件可以访问的类别中的盔甲类型*数量，只是是否有**任何*，您应该改用该[`exists()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#exists)方法。

2.  `ManyToManyField`费尽心思在模型上设置了一个`Armor`，为什么不使用它呢？也就是说，而不是`Armor`像这样查询模型：

    ```
    Q(profilearmor__profile = ...) 
    ```

    您可以像这样运行相同的查询并节省一些输入：

    ```
    Q(profile = ...) 
    ```

### 7\. 后记

这是一个很好的问题。很多时候，Django 问题并没有提供足够的模型细节，让任何人都能够自信地回答。

# android - onLocationChanged 永远不会被调用，即使在请求更新之后

> ID：15698868
> 
> 赞同：0
> 
> 时间：2013-03-29T07:00:40.493
> 
> 标签：android

**启动服务：**

```
AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
Intent i = new Intent(this, LocationService.class);
pi = PendingIntent.getService(this, 0, i,
        PendingIntent.FLAG_UPDATE_CURRENT);
am.cancel(pi);
am.setInexactRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
        SystemClock.elapsedRealtime(), 30*1000, pi); 
```

**服务：**

```
public class LocationService extends Service implements LocationListener {

    public static double curLat = 0.0;
    public static double curLng = 0.0;
    private LocationManager mgr;
    private String best;
    private Location location;

    @Override
    public IBinder onBind(Intent arg0) {

        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        mgr = (LocationManager) getSystemService(LOCATION_SERVICE);
        best = LocationManager.NETWORK_PROVIDER;
        location = mgr.getLastKnownLocation(best);
        if (location != null) {

            dumpLocation(location);
            mgr.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,
                    5 * 1000, 0, this);
        }
        return START_NOT_STICKY;
        }
    }

    private void dumpLocation(Location l) {

        SimpleDateFormat s = new SimpleDateFormat("dd/MM/yyyy:hh:mm:ss",
                Locale.ENGLISH);
        String format = s.format(l.getTime());
        //The above time is always 21/03/2013:09:53:41 which is more than a week old
        curLat = l.getLatitude();
        curLng = l.getLongitude();
    }

    @Override
    public void onLocationChanged(Location location) {

        //This never seems to be called
        dumpLocation(location);
    }

    @Override
    public void onProviderDisabled(String provider) {

    }

    @Override
    public void onProviderEnabled(String provider) {

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {

    }
} 
```

每 30 秒调用一次服务，但`requestLocationUpdates`似乎从不调用`onLocationChanged`。当我检查`lastKnownLocation`它一周前的时间时。

Foursquare、本地、地图等应用程序在禁用 GPS 的情况下提供当前位置。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:12:18.150

我认为您需要使用设备从某个地方移动，因为仅在位置更改时才调用 onLocationChange。并且网络位置大约在 1000-2000 米附近，因此需要检查位置发生变化的街道并获取新位置。如果您使用 gps，那么它会为您提供准确的信息，但在修复所有问题后，它也会在 20-30 米附近。

# reporting-services - 如何将 2008 报表定义升级到 2010

> ID：15698869
> 
> 赞同：1
> 
> 时间：2013-03-29T07:00:44.193
> 
> 标签：reporting-services, visual-studio-2012, ssrs-2008

我在一个报告项目中有两个报告已以某种方式更新为使用 2010 报告定义；

```
<Report xmlns="http://schemas.microsoft.com/sqlserver/reporting/2010/01/reportdefinition" ...> 
```

但是，项目中的所有其他报告，包括添加到项目中的新报告，都使用 2008 年的定义；

```
<Report xmlns="http://schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition" ...> 
```

如何在项目中的其他报告中强制执行此更新？

***=编辑=***

特定于 SQL Server Report Project的 Visual Studio 2012[兼容性图表说；](http://msdn.microsoft.com/en-us/library/vstudio/hh266747.aspx)

> 如果添加特定于 Visual Studio 2012 的功能，报表架构会自动升级，并且您无法再在 Visual Studio 2010 SP1 中打开该项目。

现在我只需要弄清楚 2012 年的功能是什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:49:25.813

一种选择是将*地图*（2012 年特征）添加到报告中，保存，然后删除地图，然后再次保存。请注意，在保存之前添加和删除地图不会强制升级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-05T10:23:31.370

在报表属性中找到 InitialPageName 并为其赋值。InitialPageName 是 2010 的一项功能，以及可以在各种报表元素（例如 Tablix 和 Graph）上设置的 PageName 属性。

# gcc - CMake 如何检查工作编译器？

> ID：15698881
> 
> 赞同：13
> 
> 时间：2013-03-29T07:01:45.007
> 
> 标签：gcc, compiler-construction, cmake

使用 CMake 时，我注意到输出消息：

> -- C 编译器标识是 GNU
> 
> -- CXX 编译器标识为 GNU
> 
> -- 检查工作的 C 编译器：/usr/bin/gcc
> 
> -- 检查工作的 C 编译器：/usr/bin/gcc -- 工作
> 
> -- 检测 C 编译器 ABI 信息
> 
> -- 检测 C 编译器 ABI 信息 - 完成
> 
> -- 检查工作的 CXX 编译器：/usr/bin/c++
> 
> -- 检查工作的 CXX 编译器：/usr/bin/c++ -- 工作
> 
> -- 检测 CXX 编译器 ABI 信息
> 
> -- 检测 CXX 编译器 ABI 信息 - 完成

我只是好奇 CMake 如何检查编译器是否工作以及 ABI 信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T07:58:16.820

你可以很容易地看到自己。该代码位于 CMake 模块`CMakeDetermineCCompiler.cmake`等中`CMakeDetermineCompilerABI.cmake`。

您可以在`your_cmake_install/share/cmake-2.8/Modules`.

# javascript - element.innerHTML 未提供完整数据

> ID：15698888
> 
> 赞同：0
> 
> 时间：2013-03-29T07:02:09.157
> 
> 标签：javascript, jquery, html, yui

我正在尝试获取 YUI 表格元素的 innerHTML。每当我尝试这样做时，innerHTML 或 .html() (jQuery) 都不会给我完整的 html，而只是其中的一部分。我很困惑为什么会这样。我认为我们可以检索的 html() 的大小没有某种上限。这是我的代码..

```
 alert(document.getElementById("table").innerHTML);
        console.log($("#table").html());
        $.post("MainPageHTML",
              {
                "data" : $("#table").html()
              },function(result){
                    TCProJSM.newsClicked = false;
                    location.href = result;
              },
              "text"
        ); 
```

请帮助并感谢您。

基本上，当我从它迁移到另一个页面时，我想保存当前页面的状态（意味着它上面的所有选择、地图等），所以当我回到这个页面时，我只需要用我的重新绘制页面保存的东西。为此，我正在为所需的元素执行 .html() 并将数据发布到服务器以进行保存。但正如我上面所说，对于我想要为其保存状态的每个元素，我都得到了不完整的数据（从一开始只有几行）。除了 HTML 之外，我还可以尝试其他什么方法来获取可以在我再次访问该页面时重新绘制的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:19:40.360

尝试在 jQuery 中使用 .html() 。它将给出整个 html。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T07:15:32.023

innerHTML 不能应用于多个 DOM 元素，例如 table、tr 或 select，而应该使用 childNodes 或类似的东西。

在您的情况下，最好根据#table 数据创建一些 json 文件并准确发布它。

# php - PHP PDO 在使用 while 循环获取所有数据时选择指定列

> ID：15698893
> 
> 赞同：-2
> 
> 时间：2013-03-29T07:02:29.847
> 
> 标签：php, mysql, pdo

让我解释一下我正在做的项目，这样会更清楚；我有一个恢复系统，用户在其中输入他的电子邮件+消息，然后他只需单击恢复。

系统会生成一个随机字符串，并使用他的电子邮件、该 ID 和他的消息为他创建一个帐户。在 mySQL 中，我有一个名为 user_ID 的 auto_Inc 行，它是我的主键。

现在，我有一个管理面板，可以在其中看到所有恢复请求，如下所示：

```
<email address>, <ID>, <User_Id>

rtemkller@gmail.com CF3E75381E  5
artemk1ller@gmail.com CE783351FE 4
ferrarihc@aol.com CE58E37F13 3
ferrarihc@aol.com E375318CEF 2
multi@multi.com 8EC5F7133E 1 
```

这是我使用的代码：

```
 $fetch = $connect->prepare("SELECT * FROM users");
    $fetch->execute();

    while($row = $fetch->fetch( PDO::FETCH_ASSOC )) {
        echo $row['email'].'  '.$row['id'].' <br />';
    } 
```

现在，我想添加一个新链接，以查看如下消息：

```
ferrarihc@aol.com E375318CEF 2 View Message 
```

当您单击“查看消息”时，它将转到电子邮件的行，`Farrarihc@aol.com`然后我可以获取它的消息，并且我想要的任何内容都存储在该列中。

*问题是，我从来没有这样做过，也没有想过如何做到这一点。*

**问题**

如何使该链接转到指定的电子邮件？

我的问题：我不知道电子邮件是什么，`cause I'm using a loop to get all results`. 如果我不知道电子邮件是什么，我将如何找到它的列？

```
I am new to PHP, PDO, pretty much hehe. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:08:54.240

您可以使用可以将位置传递为的锚标记`href="<?php echo "yoururl/email?$email?>"`。现在，当用户点击该网址时，他将被重定向到该页面。在该页面上，您可以获得`$_get['email']`. 通过使用此电子邮件，您可以从数据库中获取详细信息。简单的！

# gcc - 在 windows 7 x64 中安装和使用 GCC

> ID：15698894
> 
> 赞同：2
> 
> 时间：2013-03-29T07:02:30.470
> 
> 标签：gcc, gcc4.8

我是 GCC 的新手，对此了解不多。我想将它安装在我的 Windows 7 64 位 PC 上，并将其用于 C、C++ 和 Java。最新版本是 GCC-4.8.0。在他们的镜像链接中，我可以选择下载***gcc 4.8.0.tar.bz2***和***gcc 4.8.0.tar.gz***和***md5.sum***。请指导我，我应该如何继续使用 GCC

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T07:06:44.783

在 Windows 上，最简单的获取方法`gcc`是安装[`MinGW`](http://www.mingw.org/).

最近的 MinGW 版本[也支持 gcc 4.8](http://sourceforge.net/projects/mingwbuilds/files/host-windows/releases/4.8.0/64-bit/threads-win32/seh) - 但目前可能不是很稳定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T07:06:06.037

这些文件是最新发布的 GCC 编译器的*源存档文件*。

作为新手，您可能想要一个二进制发行版，例如Windows 上的[mingw](http://www.mingw.org/)或[cygwin](http://sourceware.org/cygwin/)。（那么你可能会得到一个早期版本的 GCC。4.8 刚刚发布）

或者，考虑切换到 Linux 并将其安装在您的计算机上。它会教给你很多东西（几乎所有的 Linux 都是免费软件，所以你可以获取它的源代码并进行研究）。

使用 Linux 和 GCC 还为您提供了一个显着的优势：您可以使用*GCC 插件*，例如开发您自己的[MELT](http://gcc-melt.org/)扩展（MELT 是一种扩展 GCC 的领域特定语言，实现为 [meta-] 插件）。Mingw 和 Cygwin 都不支持 GCC 插件。

PS。从源代码编译 GCC 对于新手来说并不容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T19:31:08.580

这是一个较老的问题，但比它应该更难搜索，所以我会在这里发布，[http](http://gcc.gnu.org/wiki/WindowsBuilding) ://gcc.gnu.org/wiki/WindowsBuilding 是让 gcc4.8 在 Windows 上运行的快速指南。我即将开始在我的旧 windows-xp 盒子上构建它。祝我好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-13T09:01:34.573

我使用代码块。您可以按照此 Youtube 视频获取说明：）。希望能帮助到你！

[http://www.youtube.com/watch?v=nNeySMSW8qU](http://www.youtube.com/watch?v=nNeySMSW8qU)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-30T10:39:36.823

你真的应该看看 Code::Blocks ( [http://codeblocks.org/](http://codeblocks.org/) )。这是一个很好的 IDE，可以轻松设置以帮助您入门。

要支持 Windows 64 位，您不应该使用它附带的 MinGW 编译器。而是获得具有 64 位支持的 MinGW-w64 的单独二进制文件。您可以从[http://winlibs.com](http://winlibs.com)获得它，您还可以在其中找到有关如何配置 Windows 32 位和 64 位编译器的提示。

# delphi - DelphiXE2 使用 Assembly x64 从内存中读取任何位置

> ID：15698899
> 
> 赞同：0
> 
> 时间：2013-03-29T07:03:16.977
> 
> 标签：delphi, assembly, delphi-xe2, readprocessmemory

如何访问 in`DelphiXE2`中的任何内存地址`Windows7 64bit`？我尝试使用该`ReadProcessMemory`功能，但它不起作用。但是，我想避免使用内核驱动程序来执行此操作。

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:03:00.587

`ReadProcessMemory`是一个已知可以正常工作的函数。它允许一个进程从另一个进程读取内存。但它使用的地址仍然是虚拟内存地址。它们是相对于目标进程的虚拟地址空间的。

我怀疑您实际上要做的是读取物理内存。在这种情况下，内核模式别无选择。只有在内核模式下才能寻址物理内存。

# php - 如何在wordpress中提取不包括标题和徽标图像的帖子和页面的图像？

> ID：15698903
> 
> 赞同：0
> 
> 时间：2013-03-29T07:03:48.533
> 
> 标签：php, plugins, wordpress

我已经尝试使用此代码从媒体库中获取所有图像，并且我已成功获取所有图像的源 URL，但现在我想排除所有不需要的图像，例如徽标、标题图像等...

简而言之，我想提取附加到帖子和页面的所有图像..

```
if(is_single() || is_page() || is_home() ){  
          global $post;  

$query_images_args = array(
     'post_type' => 'attachment', 'post_mime_type' =>'image', 'post_status' => 'inherit', 'posts_per_page' => -1,'numberposts' => 1
 );

 $query_images = new WP_Query( $query_images_args );
 $images = array();
         foreach ( $query_images->posts as $image) {
         $images[]= wp_get_attachment_url( $image->ID );

         }
            echo "<pre>";
             print_r($images);
             echo "</pre>"; 
```

我的输出这里的第一张图片是我不需要的标题图片..如何排除它..我尝试使用附件大小，但它不能一直是唯一的..看看它

```
Array
(
    [0] => http://localhost/wordpress/wp-content/uploads/2013/03/AboutUsSlider.jpg
    [1] => http://localhost/wordpress/wp-content/uploads/2013/03/7325996116_9995f40082_n.jpg
    [2] => http://localhost/wordpress/wp-content/uploads/2013/03/6310273151_31b2d7bebe.jpg
    [3] => http://localhost/wordpress/wp-content/uploads/2013/03/4764924205_ce7470f15a.jpg
    [4] => http://localhost/wordpress/wp-content/uploads/2013/03/2166105529_70dd50ef4b_n.jpg
    [5] => http://localhost/wordpress/wp-content/uploads/2013/03/1494822863_aca097ada7.jpg
    [6] => http://localhost/wordpress/wp-content/uploads/2013/03/1385429771_453bc19702.jpg
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T10:32:32.867

查询数据库并获取帖子，然后应用任何过滤器并从每个帖子和/或图像中提取这些帖子中的所有图像。例如：

```
 $my_images = array();
    $query_images_args = array(
     'post_type' => 'attachment', 'post_mime_type' =>'image', 'post_status' => 'inherit', 'posts_per_page' => -1,'numberposts' => 1
 );

 $query_images = new WP_Query( $query_images_args );
    while ( $query_images->have_posts() ) : $query_images->the_post();

        $dcontent = apply_filters('the_content', get_the_content()); 
        $dcontent = preg_replace("/\< *[img][^\>]*[.]*\>/i","",$dcontent,1);
        if ( preg_match_all('/<img (.+?)>/', $dcontent, $matches) ) {
                    foreach ($matches[1] as $match) {
                        foreach ( wp_kses_hair($match, array('http')) as $attr)
                            $img[$attr['name']] = $attr['value'];
                            $my_images[] = $img['src'];
                    }
                } 
    endwhile; 
```

不是 100% 有效，但它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:49:23.190

从这一点开始，您可能想要指定要过滤的内容。

```
 $images[]= wp_get_attachment_url( $image->ID );
}
$linkstoremove[] = $linksyouwanttoremove;
//remove unwanted images
$filtered_images = array_filter($images, $linkstoremove);
//set data sequence
$filtered_images = array_values($filtered_images);
print_r($filtered_images); 
```

# c# - 如何在 C# 中打开 .chm 帮助文件

> ID：15698906
> 
> 赞同：-1
> 
> 时间：2013-03-29T07:04:32.337
> 
> 标签：c#, chm

我已经在 c# 中打开了 .chm 文件，但它显示了这个程序无法显示网页错误。

我已经编辑了寄存器并且我的路径不包含任何特殊字符，任何人都可以帮助我解决这个问题。

* * *

## 错误详情 ：

> 该程序无法显示网页 最可能的原因：您没有连接到 Internet。网站遇到问题。地址可能有输入错误。您可以尝试什么：检查您的 Internet 连接。尝试访问其他网站以确保您已连接。
> 
> ```
>  Retype the address.  
> 
>  Go back to the previous page. 
>  More information  More information** 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:07:33.097

问题可能是因为 .chm 位于网络共享而不是本地，因为 Windows 只能在它们是本地文件时打开它们。显然，它已[作为安全问题进行了修补](http://www.helpscribble.com/chmnetwork.html)。

解决此问题的常用方法是在您的应用程序中安装 .chm 的副本。

# maven - maven可以从war文件创建项目吗？

> ID：15698907
> 
> 赞同：0
> 
> 时间：2013-03-29T07:04:45.647
> 
> 标签：maven, blazeds

我想创建一个 adobe flex blazeds 项目。如何使用 blazeds.war 作为项目模板创建项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:20:24.280

```
war -> maven 
```

you can't do that, there's no way maven can guess how the war was produced only by analyzing the result

```
generating a project stub for blazeds 
```

that you can do. You can used a defined archetype like this one: [http://code.google.com/p/maven-blazeds-spring-archetype/](http://code.google.com/p/maven-blazeds-spring-archetype/)

it will force you to stick to the technology (spring) chosen by the archetype developer, however.

# javascript - Javascript变量问题

> ID：15698911
> 
> 赞同：0
> 
> 时间：2013-03-29T07:05:14.243
> 
> 标签：javascript, variables

您好，我正在尝试让该程序添加在整个循环中累积的所有总成本。但是该程序会继续打印最近的成本，而不是所有已“购买”的产品。这是我的代码：`

```
 var Customer_Name, Discount, Product="", Price, Quantity="", Cost ;
        var blanket_price = 25;
        var lotion_price = 60;
        var surfboard_price = 60;
        var sunscreen_price = 60;
        var Customer_Name = prompt("Welcome to Jersey Shore Inc.! What is your name?","Type Name Here");
        alert("Hello "+Customer_Name+", Please look through all available products and services before placing your order.");

    do
    {

    Product= prompt("What product would you like?","Type Product Name Here");
    Quantity= prompt("How much of the "+Product+" would you like?","Type Quantity Here");
    var Total_Cost;
    var SumOrderTotal=0;

         if (Product == "blanket")
            {
                alert("You received a 50% discount! Click okay to see your receipt below.");
                Total_Cost= 0.5*(Quantity*blanket_price);
                Cost=(Quantity*blanket_price);
                Discount = .50*blanket_price;
            }
            else if (Product == "lotion")
            {
                alert("You received a 50% discount! Click okay to see your receipt below.");
                Total_Cost= 0.5*(Quantity*lotion_price);
                Cost=(Quantity*lotion_price);
                Discount = .50*lotion_price;
            }
            else if (Product == "surfboard")
            {
                alert("You received a 50% discount!Click okay to see your receipt below.");
                Total_Cost= 0.5*(Quantity*surfboard_price);
                Cost=(Quantity*surfboard_price);
                Discount = .50*surfboard_price;

            }
            else if (Product == "sunscreen")
            {
                alert("You received a 50% discount! Click okay to see your receipt below.");
                Total_Cost= 0.5*(Quantity*sunscreen_price);
                Cost=(Quantity*sunscreen_price);
                Discount = .50*sunscreen_price;

            }

             if((Product=="blanket" || Product=="sunscreen" || Product=="lotion" || Product=="surfboard"))
            {

                document.write("The cost of buying " + Quantity+ " of " + Product + " is $ "+ Cost +". </br>");
                document.write("The discount for this purchase is $ "+Total_Cost+". <br/>");

            }
            else 
            {
                alert("Sorry "+Customer_Name+" you entered an invalid product.(Refer to table for our products) Please Refresh the page to reload and place a new order.");

            }
     var SumOrderTotal = Total_Cost + SumOrderTotal;
     var user_answer=confirm("Would you like to continue purchasing products?");  

    }
    while(user_answer==true);

                document.write("Thank you for placing an order with us, " +Customer_Name+". <br/>");
                document.write("Your total order cost is $"+ SumOrderTotal+ ". <br/>"); 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:07:21.647

移出do ... **while**`SumOrderTotal`。

 **像这样：

```
 var SumOrderTotal=0;
  do {      
    Product = prompt("...");
    Quantity = prompt("...");
    var Total_Cost;
  } while (...) {
  ...
  } 
```

因为每次启动循环时都会初始化为 0（do..while）。**

# asp.net - 在网格视图中每一列的第一行添加控件

> ID：15698914
> 
> 赞同：0
> 
> 时间：2013-03-29T07:05:21.763
> 
> 标签：asp.net, gridview

我想`gridview's`在所有列的第一行添加一个简单的链接按钮。我写了关于`rowdatabound`事件的代码

我的代码如下

```
protected void grdCompareProducts_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {

            PlaceHolder col1 = e.Row.FindControl("col1") as PlaceHolder;
            PlaceHolder col2 = e.Row.FindControl("col2") as PlaceHolder;
            PlaceHolder col3 = e.Row.FindControl("col3") as PlaceHolder;
            PlaceHolder col4 = e.Row.FindControl("col4") as PlaceHolder;

            LinkButton lnkProductName = new LinkButton();
            lnkProductName.Text = "Product Name";

            if (e.Row.RowIndex == 0)
            {
                if (col1 != null)
                {

                    col1.Controls.Add(lnkProductName);
                    col2.Controls.Add(lnkProductName);
                    col3.Controls.Add(lnkProductName);
                    col4.Controls.Add(lnkProductName);
                }
            }

        }
    } 
```

但它只在最后一列显示链接按钮。网格视图的 HTML 如下..

```
<asp:GridView ID="grdCompareProducts" runat="server" AutoGenerateColumns="false"
            ShowHeader="false" CssClass="compare-info" Width="100%" CellPadding="6" CellSpacing="0"
            OnRowCommand="grdCompareProducts_RowCommand" OnRowDataBound="grdCompareProducts_RowDataBound">
            <Columns>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:Label ID="lblHeader" runat="server" Text='<%#Eval("header") %>' CssClass="header_strong"></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:PlaceHolder ID="col1" runat="server"></asp:PlaceHolder>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:PlaceHolder ID="col2" runat="server"></asp:PlaceHolder>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:PlaceHolder ID="col3" runat="server"></asp:PlaceHolder>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:PlaceHolder ID="col4" runat="server"></asp:PlaceHolder>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:21:06.943

不确定问题，认为您可以尝试为每列创建一个新实例。即如果条件为

```
 LinkButton lnkProductName;
    if (col1 != null)
                {
            lnkProductName= new LinkButton();
            lnkProductName.Text = "Product Name";
                    col1.Controls.Add(lnkProductName);
            lnkProductName= new LinkButton();
            lnkProductName.Text = "Product Name2";
                    col2.Controls.Add(lnkProductName);
                } 
```

其他列类似

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:45:15.327

用这个：

```
if (e.Row.RowIndex == 0)
        {
            if (col1 != null)
            {
                LinkButton lnkProductNameCol1 = new LinkButton();
                lnkProductNameCol1.Text = "Product Name";                   
                col1.Controls.Add(lnkProductNameCol1);

                LinkButton lnkProductNameCol2 = new LinkButton();
                lnkProductNameCol2.Text = "Product Name";                   
                col2.Controls.Add(lnkProductNameCol2);

                LinkButton lnkProductNameCol3 = new LinkButton();
                lnkProductNameCol3.Text = "Product Name";                   
                col3.Controls.Add(lnkProductNameCol3);

                LinkButton lnkProductNameCol4 = new LinkButton();
                lnkProductNameCol4.Text = "Product Name";                  
                col4.Controls.Add(lnkProductNameCol4 );
            }
        } 
```

希望这有帮助。

# android - 试图使我动态创建的按钮、TextView 和 Image View 居中

> ID：15698919
> 
> 赞同：0
> 
> 时间：2013-03-29T07:05:34.887
> 
> 标签：android

我有一个程序可以在水平容器中生成一行 4 个按钮，该容器被添加到垂直容器中。

我不知道如何让按钮居中，现在它们与右侧对齐。代码：

```
for(int i=0; i<cGlobals.mNames.length; i+=2) {
    iSoundIdList[i]=soundPool.load(this, cGlobals.mSounds[i], 1);
    iSoundIdList[i+1]=soundPool.load(this, cGlobals.mSounds[i+1], 1);   

    // would like these views to all be centered    
    LinearLayout layout = new  LinearLayout(this);
    layout.setOrientation(LinearLayout.HORIZONTAL);
    LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    layout.setLayoutParams(llp);

    favBut[i]=new ImageView(this);
    favBut[i].setImageResource(R.drawable.heartunselected);
    favBut[i].setId(defStartFavId+i);
    favBut[i].setOnClickListener(this);
    layout.addView(favBut[i]);

    Button but1=new Button(this);
    but1.setText( cGlobals.mNames[i]);
    but1.setWidth(120);
    layout.addView(but1);
    but1.setOnClickListener(this);
    but1.setId(defStartButId+i);

    TextView t=new TextView(this);
    t.setText("    ");
    layout.addView(t);

    favBut[i+1]=new ImageView(this);
    favBut[i+1].setImageResource(R.drawable.heartunselected);
    favBut[i+1].setId(defStartFavId+i+1);
    favBut[i+1].setOnClickListener(this);
    layout.addView(favBut[i+1]);

    t=new TextView(this);
    t.setText(" ");
    layout.addView(t);

    Button but2=new Button(this);
    but2.setText( cGlobals.mNames[i+1]);
    but2.setWidth(120);
    but2.setId(defStartButId+i+1);
    but2.setOnClickListener(this);
    layout.addView(but2);
    Container.addView(layout);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:14:03.677

下面的片段将有所帮助

```
RelativeLayout relativeLayout = new RelativeLayout(this);
relativeLayout.setLayoutParams(new RelativeLayout.LayoutParams(
    RelativeLayout.LayoutParams.FILL_PARENT,
    RelativeLayout.LayoutParams.FILL_PARENT));

ImageView imageView = new ImageView(this);
imageView.setImageResource(getResources().getIdentifier(
    "sample_image", "drawable", getPackageName()));

RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
    RelativeLayout.LayoutParams.WRAP_CONTENT,
    RelativeLayout.LayoutParams.WRAP_CONTENT);
lp.addRule(RelativeLayout.CENTER_IN_PARENT);
imageView.setLayoutParams(lp);

relativeLayout.addView(imageView); 
```

# string - 在 cmd 提示符下操作字符串

> ID：15698920
> 
> 赞同：0
> 
> 时间：2013-03-29T07:05:36.823
> 
> 标签：string, batch-file, cmd

假设我有一个环境变量，例如带有 value 的 version `Version-1-0-12-1`。如何将其转换为`1.0.12.1`命令提示符中的字符串格式？等效的 shell 是使用`IFS`. 如何在 Windows 命令提示符下执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:11:27.593

试试这个 ：

```
set "var=Version-1-0-12-1"
set "var=%var:*-=%"
set "var=%var:-=.%"
echo %var% 
```

# java - JMS QUEUE：如何将消息存储在队列中，直到标志设置为 true

> ID：15698923
> 
> 赞同：0
> 
> 时间：2013-03-29T07:06:00.693
> 
> 标签：java, jms, spring-jms

我正在尝试 JMS 队列的示例应用程序。我希望队列中的消息保持在那里，直到我的标志设置为 true。我正在使用 Spring 框架和具有以下配置的 MDP 侦听器：

服务器上下文.xml：

```
<bean id="MDPListener" class="controller.MDPListener"></bean>

<bean id="connectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
        <property name="brokerURL">
        <value>tcp://localhost:61616</value>
        </property>
</bean>

<bean id="dataQueue" class="org.apache.activemq.command.ActiveMQQueue">
    <constructor-arg value="dataQueue15"></constructor-arg>

</bean>

<bean id="container" class="org.springframework.jms.listener.DefaultMessageListenerContainer">
        <property name="connectionFactory" ref="connectionFactory"/>
        <property name="messageListener" ref="MDPListener"/>
        <property name="destination" ref="dataQueue"/>
        <property name="sessionTransacted" value="true"/>

</bean> 
```

我的 onMessage 有以下代码：

```
public void onMessage(Message message,Session session) {        

        System.out.println("The session: "+session.toString());
        System.out.println("New Message arrived part2 .. Passing to Controller");

        Boolean g=false;

        if(g==true)
        {
            System.out.println("Data true..session committed!!");
        }
        else
        {

            System.out.println("in the queue");
            throw new RuntimeException("Saved");
        }
} 
```

现在，当抛出异常时，消息会保留在队列中，并且控件会返回到同一个侦听器，该侦听器会重新侦听相同的消息并在一段时间后停止。这会导致死队列。我无法存储该消息。我希望我的听众收听队列，但不是上一条消息，而是下一条消息。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:27:48.433

JMS 不能以这种方式工作 - 您必须将消息移动到代码中的另一个队列。

或者，使用 ActiveMQ，您可以配置重新传递策略以更快地将消息发送到 DLQ（我相信默认为 6 次重试）。

# javascript - 是否可以从 Firefox 打开 Internet Explorer 窗口？

> ID：15698928
> 
> 赞同：0
> 
> 时间：2013-03-29T07:06:28.247
> 
> 标签：javascript, internet-explorer, firefox

我需要一个页面上的链接，通过在 Mozilla Firefox 中单击它，一个新的 URL 将在新的 Internet Explorer 窗口中打开。

我没有尝试过任何事情，因为我不知道如何实现它。

# python - 如果执行在 Celery 任务上下文中，如何记录每个任务的文件

> ID：15698929
> 
> 赞同：1
> 
> 时间：2013-03-29T07:06:43.390
> 
> 标签：python, logging, celery

我想修改我当前的日志记录设置，而不必将记录器对象作为参数传递给函数。目前在每个模块的顶部，我定义了一个 LOG 对象

```
LOG = logging.getLogger(__name__) 
```

我想更改日志记录，以便：

*   日志记录到文件中，但前提是执行上下文在 Celery 任务中
*   每个任务都有一个文件
*   无需修改每个任务的代码

因此，如果您有两个任务：

```
@task
def taskOne():
  LOG.log("in task one")
  foo.foo()

@task
def taskTwo():
  LOG.log("in task two")
  foo.foo 
```

在模块 foo 中：

```
def foo():
  LOG.log("in foo") 
```

然后：

*   执行`taskOne`应将“in task one\nin foo”发送到名为“taskOne.log”的文件中
*   执行`taskTwo`应该将“in task two\nin foo”发送到名为“taskTwo.log”的文件中
*   在 celery 任务之外执行`foo`不应将日志发送到文件

我正在考虑提出一个处理程序来检查调用堆栈以查看它当前是否正在芹菜任务的上下文中执行，如果是，则记录到文件中。但是我不确定该解决方案是否有效，或者它是否实施了不良做法。

# c# - 如何通过它的属性名称选择一个节点并在C#中获取它的子节点？

> ID：15698932
> 
> 赞同：0
> 
> 时间：2013-03-29T07:06:47.580
> 
> 标签：c#, xml, visual-studio-2010

这是我的 XML 代码（module.xml）

```
<module code="ECSE502">
  <code>ECSE502</code>
  <name>Algorithms and Data structures</name>
  <semester>1</semester>
  <prerequisites>none</prerequisites>
  <lslot>0</lslot>
  <tslot>1</tslot>
  <description>all about algorythms and data structers</description>
</module>
<module code="EIGA501">
  <code>EIGA501</code>
  <name>3D Grapgics I</name>
  <semester>1</semester>
  <prerequisites>none</prerequisites>
  <lslot>2</lslot>
  <tslot>3</tslot>
  <description>xxxxxxxxxxxxxxxxxxxxxx</description>
</module> 
```

根据上面的 xml 代码，我需要通过只给 ECSE502 作为输入来获取集合。选择所需节点后，我还需要获取其子节点的值（名称、学期等）。在 XML 文件中有 20 个节点。这只是第一个 2 个节点。

到目前为止我试过这个

```
 XmlTextReader reader = new XmlTextReader("modules.xml");
            XmlDocument doc = new XmlDocument();
            XmlNode node = doc.ReadNode(reader);

        foreach (XmlNode chldNode in node.ChildNodes)
            Console.WriteLine(reader.Value); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:15:35.860

您可以使用[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)，假设这里的代码返回匿名对象列表，但如果需要，您可以显式定义自己的类：

```
var xDoc = XDocument.Load("yourpathfile");
var result = xDoc.Descendants("module")
            .Where(x => (string) x.Element("code") == "ECSE502")
            .Select(x => new
                             {
                                 Name = (string)x.Element("name"),
                                 //.....
                             }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T07:11:14.473

试试这个：

将您的 xml 包装在一个唯一的根节点中，即

```
<modules>
   <module code...
       ..
   </module>
   <module code...
</modules> 
```

进而

```
string text="ECSE502";

XmlDocument xml = new XmlDocument();
xml.Load("physical path to module.xml"); 

XmlNodeList xnList = xml.SelectNodes("modules/module[@code='"+text+"']");
foreach (XmlNode xn in xnList)
{
    string code = xn.SelectSingleNode("code").innerText;
    string name=  xn.SelectSingleNode("name").innerText;
    //and similarly find other inner nodes
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T07:29:35.747

使用以下代码在 xml 中创建根节点后尝试

```
XDocument xdoc = XDocument.Load(@"D:\data\rvyas\Projects\Client\module.xml");

string code = "ECSE502";
    var result = xdoc.Descendants("module")
                .Where(x => (string)x.Element("code") == code)
                .Select(x => new
                {
                    Name = (string)x.Element("name"),
                    Code = (string)x.Element("code"),
                    semester = (string)x.Element("semester"),
                    prerequisites = (string)x.Element("prerequisites"),
                    lslot = (string)x.Element("lslot"),
                    tslot = (string)x.Element("tslot")

                }).ToList(); 
```

你的 XML 应该是这样的：

```
<root>
<module code="ECSE502">
  <code>ECSE502</code>
  <name>Algorithms and Data structures</name>
  <semester>1</semester>
  <prerequisites>none</prerequisites>
  <lslot>0</lslot>
  <tslot>1</tslot>
  <description>all about algorythms and data structers</description>
</module>
<module code="EIGA501">
  <code>EIGA501</code>
  <name>3D Grapgics I</name>
  <semester>1</semester>
  <prerequisites>none</prerequisites>
  <lslot>2</lslot>
  <tslot>3</tslot>
  <description>xxxxxxxxxxxxxxxxxxxxxx</description>
</module>
</root> 
```

# image-processing - 在图像中找到蚊子的头

> ID：15698934
> 
> 赞同：4
> 
> 时间：2013-03-29T07:07:20.820
> 
> 标签：image-processing, machine-learning, computer-vision

我有与这些类似的蚊子图像，我想自动绕着图像中每只蚊子的头部转圈。它们显然处于不同的方向，并且在不同的图像中它们的数量是随机的。有些错误很好。算法的任何想法来做到这一点？

![在此处输入图像描述](../Images/e38e29783315096c724ba17363ceaa0b.png)

![在此处输入图像描述](../Images/be98a7f5690ba1585c014a450afb2a84.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:48:27.097

这个问题类似于人脸检测问题，因此您可以先尝试一种简单的方法，并在必要时对其进行改进。

首先，您需要重新创建训练集。为此，您想提取带有什么是蚊头或什么不是蚊头的示例的小图像。

![训练集示例](../Images/ed56be3dd9d24c20a4890f2da7d1017c.png)

然后你可以使用这些图像来训练分类算法，注意要有一个平衡的训练集，因为如果你的数据偏向一个类，它会影响算法的性能。由于图像是二维的，算法通常只将一维数组作为输入，因此您还需要将图像排列为该格式（例如：[http](http://en.wikipedia.org/wiki/Row-major_order) ://en.wikipedia.org/wiki/Row-major_order ）。

我通常使用支持向量机，但其他算法（例如逻辑回归）也可以解决问题。如果您决定使用支持向量机，我强烈建议您检查 libsvm ( [http://www.csie.ntu.edu.tw/~cjlin/libsvm/](http://www.csie.ntu.edu.tw/~cjlin/libsvm/) )，因为它是一个非常成熟的库，绑定了多种编程语言。他们还有一个非常容易遵循的针对初学者的指南（[http://www.csie.ntu.edu.tw/~cjlin/papers/guide/guide.pdf](http://www.csie.ntu.edu.tw/~cjlin/papers/guide/guide.pdf)）。

如果你有足够的数据，你应该能够避免对方向的容忍。如果您没有足够的数据，那么您可以创建更多的训练行，并旋转一些样本，这样您将拥有一个更具代表性的训练集。

至于预测，给定一张图像，您可以使用网格切割它，其中每个单元格的尺寸与您在训练集上使用的尺寸相同。然后，您将每个图像传递给分类器并标记分类器为您提供正输出的那些方块。如果你真的需要圆圈，那么取给定正方形的中心，半径将是正方形边尺寸的一半（很抱歉说得很明显）。

![在此处输入图像描述](../Images/cd98dd6e53e5595d26991a978be37bc0.png)

所以在你这样做之后，你可能会遇到尺寸问题（一些蚊子可能看起来比其他蚊子更靠近相机），因为我们没有训练算法来容忍缩放。此外，即使所有蚊子的规模都相同，我们仍然可能会因为它们不完全适合我们的网格而错过其中的一些。为了解决这个问题，我们需要重复这个过程（网格切割和预测），将给定的图像重新缩放到不同的大小。有多少个尺寸？那么在这里你必须通过实验来确定。

这种方法对您正在使用的“窗口”的大小很敏感，这也是我建议您尝试的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:33:05.887

有一些研究可能有用：

*   [图像数据库中形状相似性搜索的多步方法](http://math.nist.gov/mcsd/Seminars/2009/2009-04-21-Dogan.html)
*   [图像中形状的表示和检测](http://cs.brown.edu/~pff/talks/shapes.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T19:42:31.103

从您提供的图片来看，这似乎是一个非常困难的图像识别问题，我怀疑您将获得接近可接受的识别率。

我会推荐一种更简单的方法：

首先，如果您对图像有任何控制权，请在拍照前将蚊子分开，并使用白色无标记的地下，甚至可能是从下方照亮的东西。这将使分离蚊子更容易。

然后对图像进行阈值处理。例如在这里我做了一个快速的尝试，取红色通道，然后减去蓝色通道*5，然后应用 80 的阈值：

![在此处输入图像描述](../Images/720e37fa734f6dbfa2659e95568a9802.png)

使用形态扩张和侵蚀来摆脱小腿结构。

通过连接组件标签识别大小合适的斑点为蚊子。如果一个斑点大到足以容纳两只蚊子，请将其切掉，并对其进行更多的扩张/侵蚀。

一旦你有一个像这样的 blob

![在此处输入图像描述](../Images/b2cda0fff8cd1df1dafeff320944da6b.png)

您可以使用主成分分析找到身体的方向。头部应该是身体横截面最厚的部分。

![在此处输入图像描述](../Images/4e5478bab0d865aa291589cf2a7fc206.png)

# java - 最短路径——让根节点指向自己

> ID：15698938
> 
> 赞同：0
> 
> 时间：2013-03-29T07:07:30.397
> 
> 标签：java, shortest-path, breadth-first-search

我正在使用链表实现最短路径算法。一旦算法找到它的目标，我想通过列表向后追踪。有什么理由我不应该让根节点指向自身作为测试其“根性”的一种方式，即，`tracebackwards until this.node = parent.node`？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:18:58.017

我个人赞成根节点没有父节点的想法（因为它是根节点并且没有逻辑父节点）。因此，在这种情况下，使用 null 作为根节点的 parent.node 的值是有意义的。

追溯将归结为循环，直到 parent.node == null

# ios - 在应用程序中将“lite app”转换为“pro app”

> ID：15698943
> 
> 赞同：4
> 
> 时间：2013-03-29T07:07:44.983
> 
> 标签：ios

我在 App Store 中有两个应用程序。一个是免费版，一个是付费版。

我需要在应用程序本身中有一个名为“升级”的按钮。
**每当用户单击该按钮时，我们能否为会员提供使用应用内购买在应用内从 lite 升级到 pro 的能力？**

我们有任何直接在 iOS-6 中的方法吗？我们可以这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T07:14:17.970

是的。您可以在精简版中隐藏您想要在专业版中显示的所有功能。然后当用户点击升级按钮然后在那个按钮上你写你的应用内购买机制。一旦用户成功购买了您的升级包，然后在精简版中取消隐藏这些专业功能。然后您的应用程序将成为专业版。现在***它完全取决于您的逻辑和代码技能如何隐藏和取消隐藏功能***。查看相关链接：-

[通过应用内购买将现有的 iOS 付费应用转换为免费增值模式](https://stackoverflow.com/questions/3735635/convert-existing-ios-paid-app-to-freemium-model-with-in-app-purchase)

[如何管理构建 iPhone 应用程序的 Lite vs Paid 版本？](https://stackoverflow.com/questions/549462/how-do-i-manage-building-a-lite-vs-paid-version-of-an-iphone-app)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T07:23:14.187

首先查看如果您想要 Lite 和 Pro 版本的应用程序，如果您使用 InApp 购买，则无需为 lite 和 Pro 上传 2 个单独的应用程序，请执行以下操作：

1.  保留所有 Pro 功能的应用程序
2.  根据需要保留 1 个按钮，标题为 升级为 Pro 版本，inApp 购买在行动
3.  禁用所有 Pro 功能并检查用户购买 Pro 版本时的条件，然后将启用 Pro 功能。

发生这种情况的情况是，如果用户不会通过按升级按钮购买 Pro，他们可以使用精简版。

希望这可以帮助。

# php - 浏览器关闭时有更新数据库的解决方案吗？

> ID：15698947
> 
> 赞同：0
> 
> 时间：2013-03-29T07:08:30.437
> 
> 标签：php, mysql

我在数据库中有一个用户状态字段（在线/离线）。当用户当时在数据库中点击注销按钮时，将在线更改为离线。但是如果用户直接关闭浏览器而不注销，那么如何更新数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:25:45.747

除非您有一个定期 ping 您的服务器的进程，否则您不能。

您的注销按钮很可能会将请求发送回您的服务器。收到该请求后，服务器运行/委托逻辑来更新数据库。如果用户在没有单击注销按钮的情况下关闭浏览器，则服务器永远不会收到此请求。

@Antony 给出了一个可能的解决方案。

另一种可能的解决方案是在给定的时间间隔向您的服务器发送消息。服务器应该期待这个调用。如果服务器没有收到消息，则将用户标记为已注销。它的缺点是注销时间戳被间隔关闭。注销时间将不准确。[有关使用计时器的 Ajax 调用](https://stackoverflow.com/questions/4542863/jquery-ajax-call-with-timer)的更多详细信息，请参阅此线程

编辑#1 在我上面提到的链接中，它提到了如何间隔运行 javascript 代码。

```
setInterval(function() {
    //call $.ajax here
}, 5000); //5 seconds 
```

在您的情况下，使用此函数来调用您的 API。

您的 API 应记录上次从您的 javascript 收到调用的时间戳。有一个 cron 作业或其他逻辑来检查该特定用户的录制何时停止。最后一个时间戳将是用户注销的*大致时间。*

这是一个非常复杂的过程，用于简单地跟踪用户的注销行为。您可能需要考虑是否值得麻烦。

# kendo-grid - 编辑时仅在剑道网格中显示选定的列

> ID：15698955
> 
> 赞同：1
> 
> 时间：2013-03-29T07:09:01.727
> 
> 标签：kendo-grid, kendo-asp.net-mvc

嗨，有什么方法可以在 Kendo Grid 中编辑时只显示几列？

我正在尝试在弹出模式下更新网格值。当我单击编辑按钮时，它会在弹出窗口中显示所有列。但我只想在弹出窗口中显示选定的列，如名称和部门。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:19:30.250

为此，您需要定义自定义模板进行编辑。进行如下更改：

在剑道网格中：

```
editable: {
                    mode: "popup",
                    template: kendo.template($("#editTemplate").html())
          } 
```

在此处定义您的editTemplate，例如：

```
<script type="text/x-kendo-template" id="editTemplate">

    <div class="k-edit-form-container">
    <table style="margin:0 auto;">
      <tr>
              <td>
                  <input type="text"  class="k-input k-textbox" **data-bind="value:your_column_to_bind"**/>
              </td>
      </tr>
     </table>
    </div>
 </script> 
```

# html - 如何动态调整 HTML5 中的视频大小？

> ID：15698961
> 
> 赞同：6
> 
> 时间：2013-03-29T07:09:35.513
> 
> 标签：html, html5-video

我们在项目中要求在一个 html 页面中有 3 个视频，如下图所示。

![在此处输入图像描述](../Images/16471cba19ff7ebdf7a7ad700b7fcbc8.png)

现在，通过单击每个视频的右下角，用户可以调整视频的大小，相应地其他视频的大小也会发生变化。我在这里面临的问题是如何通过按住并拖动鼠标单击每个视频的右下角来调整视频的大小，我尝试使用标签的`resize`属性，`video`但它调整了控制器的宽度和高度视频。我必须使用任何第三方 API 或 JavaScript 还是我犯了任何愚蠢的错误？

通过在这方面做一些 RND，我知道了`canvas`。但不知道如何将它与视频一起使用。

谁能在这里指导我？任何形式的帮助将不胜感激。

**代码 ：**

```
<!DOCTYPE html>
<html>
<head>
 <style>
   video{
     resize:both;
   }
 </style>
</head>
<body>
<video width="320" height="240" controls>
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">      
</video>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T08:39:00.993

老实说，你有这么多调整大小的句柄有点令人困惑。它也使事情变得相当复杂。

这是我到目前为止提出的，这应该让您对完整的实现有一个很好的了解：

```
var $cont = $('#container'),
    contWidth = $cont.width(),
    contHeight = $cont.height(),
    $one = $('#one'),
    $two = $('#two'),
    $ltop = $one.find('.ltop'),
    $lbot = $one.find('.lbot');

$ltop.resizable({
    handles: 'se',
    minWidth: '100',
    maxWidth: '400',
    resize: function() {
        var width = $(this).width(),
            height = $(this).height(),
            remSpaceH = contWidth - width,
            remSpaceV = contHeight - height;

        $one.width(width);
        $two.width(remSpaceH - ($two.outerWidth() - $two.width()));

        $lbot.height(remSpaceV - ($lbot.outerHeight() - $lbot.height()));
    }
}); 
```

演示：http: [//jsfiddle.net/dfsq/KuAsz/](http://jsfiddle.net/dfsq/KuAsz/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T07:24:30.817

这更好：http: [//jsfiddle.net/ScDmp/9/](http://jsfiddle.net/ScDmp/9/)

```
<div id="myContainer">
    <video width="320" height="240" controls id="myVideo">
        <source src="movie.mp4" type="video/mp4">
            <source src="movie.ogg" type="video/ogg">
    </video>
    <div>
        <input type="range" min="100" max="500" step="50" id="mySlider" value="0" onchange="document.getElementById('myVideo').width = this.value;"/> 
```

然后，您可以使用计时器更改输入滑块，该计时器将每秒检查画布的宽度并相应地调整视频的大小。

您可以尝试使用 jquery ui resizable 进行类似操作：

```
function ready(){
    $("#myContainer").resizable();
    var interval = setInterval(checkWidth, 1000);

    function checkWidth()
    {
         $("#myVideo").width($("#myContainer").width());
    }
    setTimeout($("#myContainer").width("100px"),1000);

    setTimeout($("#myContainer").width("200px"),5000);

    setTimeout($("#myContainer").width("300px"),10000);
} 
```

# c# - 遍历 .net 中的 xsd 文件中的“根元素是 ComplexType”的所有元素

> ID：15698962
> 
> 赞同：1
> 
> 时间：2013-03-29T07:09:36.373
> 
> 标签：c#, .net, xsd

我需要帮助来遍历 xsd 文件中的所有元素。我是这个主题的新手。我正在粘贴下面的示例代码，我到目前为止所做的工作。

首先，我只是将 xsd 文件（如代码片段所示）加载到 xml 架构中，然后我需要遍历根元素中的元素。

```
XmlSchema xsd = XmlSchema.Read(new StreamReader(AppKeysManager.ConfigurationMasterFolder + @"\Parameters.xsd"), null);
var xss = new XmlSchemaSet();
xss.Add(xsd);
xss.Compile();

foreach (DictionaryEntry item in xsd.Elements)
{
    rootElement = item.Value as XmlSchemaElement; break;
} 
```

我的 xsd 外观的片段

```
<xs:complexType name="Parameters">
    <xs:all>
      <xs:element name="A">
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="mstns:Restricted8CharString">
              <xs:attribute name="Caption" use="required" fixed="Caption for A">
                <xs:simpleType>
                  <xs:restriction base="xs:string"></xs:restriction>
                </xs:simpleType>
              </xs:attribute>
              <xs:attribute name="ActionWhenMaxReached" use="required">
                <xs:simpleType>
                  <xs:restriction base="xs:short">
                    <xs:pattern value="[1-3]"></xs:pattern>
                  </xs:restriction>
                </xs:simpleType>
              </xs:attribute>
              <xs:attribute name="Expression" type="xs:string" default="0" />
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="B">
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="xs:short">
              <xs:attribute name="Caption" use="prohibited">
                <xs:simpleType>
                  <xs:restriction base="xs:string"></xs:restriction>
                </xs:simpleType>
              </xs:attribute>
              <xs:attribute name="ActionWhenMaxReached" use="required">
                <xs:simpleType>
                  <xs:restriction base="xs:short">
                    <xs:pattern value="[1-3]"></xs:pattern>
                  </xs:restriction>
                </xs:simpleType>
              </xs:attribute>
              <xs:attribute name="Expression" type="xs:string" default="0" />
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
      </xs:all>
      </xs:complexType name="Parameters"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T07:40:12.223

下面的代码将为您提供内部元素及其属性

```
XmlSchema xsd = XmlSchema.Read(new StreamReader(pathToxsdFile), null);

var xss = new XmlSchemaSet();
    xss.Add(xsd);
    xss.Compile();

    XmlSchemaElement rootElement = null;
    foreach (DictionaryEntry item in xsd.Elements)
    {
        rootElement = item.Value as XmlSchemaElement; break;
    }

    XmlSchemaComplexType innerContent = rootElement.ElementSchemaType as XmlSchemaComplexType;
    var innerContentsOfRoot = innerContent.Particle as XmlSchemaAll;

    foreach (XmlSchemaElement item in innerContentsOfRoot.Items)
    {
        XmlSchemaComplexType moreInnerContent = item.ElementSchemaType as XmlSchemaComplexType;

        foreach (DictionaryEntry item2 in moreInnerContent.AttributeUses)
        {
            if (string.Compare(((XmlSchemaAttribute)(item2.Value)).Name, attributeName, true) == 0)
            {
                string captionName = ((XmlSchemaAttribute)(item2.Value)).FixedValue;

            }
        }
    } 
```

# mysql - SQL Query 在表的列中选择具有唯一记录的行？

> ID：15698964
> 
> 赞同：0
> 
> 时间：2013-03-29T07:09:50.890
> 
> 标签：mysql, sql

通过选择一列中具有唯一 ID 的行，我的查询出现问题。

这是我的数据库的样子：

```
Table 1

user_id  | user_name | user_email
1          john         ex0@email
2          nathel       ex1@email
3          bob          ex2@email

Table 2

subs_id | user_id | prod_id
1         1           1
2         1           2
3         2           1
4         3           1
5         3           3

Table 3

prod_id | prod_name 
1         Platinum
2         Gold
3         Steel 
```

我需要做的是从表 1 中选择用户行加入表 2 和表 3，根据他们的订阅在表 2 user_id 列中具有唯一记录。

例子。我想选择只订阅白金的用户，所以输出必须是这样的：

```
user_id | user_name | user_email  | subs_id | user_id | prod_id | prod_id |  prod_name 
2          nathel      ex1@email     3         2           1       1         Platinum 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:27:25.333

```
SELECT *  from users u inner join subscription s on u.user_id = s.user_id
inner join products p on p.prod_id = s.prod_id 
 WHERE s.user_id IN (SELECT user_id from subscription GROUP by user_id HAVING count(user_id) = 1) AND s.prod_id = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T07:31:11.127

最后一块拼图已被省略，作为读者的练习......

```
 DROP TABLE IF EXISTS users;

 CREATE TABLE users
 (user_id INT NOT NULL AUTO_INCREMENT PRIMARY KEY
 ,user_name VARCHAR(20) NOT NULL UNIQUE
 ,user_email VARCHAR(12) NOT NULL
 );

 INSERT INTO users VALUES
 (1 ,'john','ex0@email'),
 (2 ,'nathel','ex1@email'),
 (3 ,'bob','ex2@email');

 DROP TABLE IF EXISTS product_user;
 CREATE TABLE product_user 
 (product_id INT NOT NULL
 ,user_id INT NOT NULL
 ,PRIMARY KEY (product_id,user_id)
 );

 INSERT INTO product_user VALUES
 (1,  1),(2  ,1),(1  ,2),(1,3),(3,3);

 DROP TABLE IF EXISTS products;

 CREATE TABLE products
 (product_id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,product_name VARCHAR(12) NOT NULL UNIQUE);

 INSERT INTO products VALUES (1 ,'Platinum'),(2,'Gold'),(3,'Steel');

 SELECT * 
   FROM product_user x 
   LEFT 
   JOIN product_user y 
     ON y.user_id = x.user_id 
    AND y.product_id <> x.product_id 
  WHERE x.product_id =1;
 +------------+---------+------------+---------+
 | product_id | user_id | product_id | user_id |
 +------------+---------+------------+---------+
 |          1 |       1 |          2 |       1 |
 |          1 |       2 |       NULL |    NULL |
 |          1 |       3 |          3 |       3 |
 +------------+---------+------------+---------+

 SELECT * 
   FROM product_user x 
   LEFT 
   JOIN product_user y 
     ON y.user_id = x.user_id 
    AND y.product_id <> x.product_id 
   JOIN users u 
     ON u.user_id = x.user_id 
   JOIN products p 
     ON p.product_id = x.product_id 
  WHERE p.product_name = 'Platinum';
 +------------+---------+------------+---------+---------+-----------+------------+------------+--------------+
 | product_id | user_id | product_id | user_id | user_id | user_name | user_email | product_id | product_name |
 +------------+---------+------------+---------+---------+-----------+------------+------------+--------------+
 |          1 |       1 |          2 |       1 |       1 | john      | ex0@email  |          1 | Platinum     |
 |          1 |       2 |       NULL |    NULL |       2 | nathel    | ex1@email  |          1 | Platinum     |
 |          1 |       3 |          3 |       3 |       3 | bob       | ex2@email  |          1 | Platinum     |
 +------------+---------+------------+---------+---------+-----------+------------+------------+--------------+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T07:12:27.193

我认为您可以使用 DISTINCT 从查询中的数据库中获取唯一的重新编码

```
SELECT DISTINCT 
    t1.`user_id` ,t1.`user_name`,t1.`user_email`,t2.`subs_id`,t2.`user_id`,t2.`prod_id`,t3.`prod_id` ,t3.`prod_name`
FROM Table1 t1 
     INNER JOIN Table2 t2 
        ON t1.`user_id`=t2.`user_id` 
     INNER JOIN Table3 t3 
        ON t2.`prod_id`=t3.`prod_id` 
WHERE 
     t1.`user_id`='2' 
```

希望这对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T07:19:13.527

希望你正在寻找这个：

```
SELECT * FROM table1 as t1 
    inner join table2 as t2 on t1.user_id = t2.user_id 
    inner join table3 as t3 on t2.prod_id = t3.prod_id 
    where t3.prod_name = 'Platinum'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T07:25:08.900

请！试试下面的代码片段

```
select t1.user_id ,t1.user_name,t1.user_email,
t2.subs_id,t2.user_id , t2.prod_id , 
t3.prod_id , t3.prod_name
from table2 t2 inner join table1 t1 on t2.user_id=t1.user_id
inner join table3 t3 on t3.prod_id=t2.prod_id and t2.prod_id =1 
```

# bash - 通过在unix环境中查找关键字来获取变量值

> ID：15698965
> 
> 赞同：-1
> 
> 时间：2013-03-29T07:10:01.793
> 
> 标签：bash, shell, unix

在 UNIX 环境中，我有一个包含以下详细信息的 file.txt：

```
Data recording started:
0001100 Matched at 412090
0001101 Mismatched at 414798
0001102 Matched at 420007
0001103 Mismatched at 420015
Job completed 
```

如何通过搜索“匹配”（第 2 行）单词以及第一个“不匹配”（第 3 行）来获取第一个匹配值不匹配，所以它无法通过指定行号找到数据，即找到第3行最后一个整数减去第2行最后一个整数，因为不匹配可能首先出现如下：

```
Data recording started:
0001100 Mismatched at 412090
0001101 Matched at 414798
0001102 Mismatched at 420007
0001103 Matched at 420015
Job completed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:18:18.223

单程：

```
echo $(( 
      $(grep Matched input | head -1 | sed 's/.*at //') 
    - $(grep Mismatched input | head -1 | sed 's/.*at //') 
)) 
```

或仅使用 sed：

```
echo $(( 
      $(sed -n 's/.*Matched.*at //p' input | head -1) 
    - $(sed -n 's/.*Mismatched.*at //p' input | head -1) 
)) 
```

**输出**

```
-2708 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:58:23.590

我们可以使用 grep -m 1 踢开头部。

```
dif=$(( 
      $(grep -m 1 'Matched' a.txt | sed 's/.*at \([0-9]*\).*/\1/')
    - $(grep -m 1 'Mismatched' a.txt | sed 's/.*at \([0-9]*\).*/\1/')
))
echo $dif 
```

# java - 函数返回中的两种不同数据类型

> ID：15698966
> 
> 赞同：0
> 
> 时间：2013-03-29T07:10:04.203
> 
> 标签：java, types, return

在这个函数中，我需要两种不同的数据类型来返回，一个浮点数`y`不为零，一个布尔值为零。

```
public XXXXX division(int x, int y){
    if(y!=0){
        return x/y;
    }
    else{
        return false;
    }
} 
```

我知道我可以使用两个函数来实现这一点 1-检查除法的校正 2-在一个函数中计算我想要的正确除法，这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T07:14:17.377

不应允许将 0 作为除数传递。在这种情况下，您应该抛出异常而不是返回 false：

```
public float division(int x, int y) {
    if (y != 0) {
        return ((float) x) / y;
    }
    else {
        throw new IllegalArgumentException("division by 0 makes no sense");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T07:12:34.940

不太确定为类似的事情使用单一方法是否是一种好习惯。但是您可以创建自己的类，并将结果和错误作为属性，然后从您的方法中返回该类的对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T07:24:13.753

您可以在调用函数本身之前检查 的值`Y`是否为零。不允许将零传递给该函数。

无论如何，如果你将零传递给函数，除以零的情况就会抛出`ArithmaticException`. 因此，您的函数可以将该异常抛出给调用者。

```
public float division(int x, int y) throws Exception {   ///ArithmaticException
    return ((float) x) / y;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T07:12:10.350

也许使用 Double 作为返回类型并正常返回值。如果为 false，则返回 null。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-29T07:12:52.820

最简单的方法——

```
public Object division(int x, int y) {
    if (y != 0) {
        return x / y;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-29T07:14:20.253

您可以返回`Float`，使用`null`表示“无结果”：

```
public Float division(int x, int y) {
    if(y != 0) {
        return x / (float)y;
    } else {
        return null;
    }
} 
```

也就是说，在这种特殊情况下，返回 IEEE 无穷大或 NaN 可能实际上是有意义的。

请注意，我已经修复了整数除法，因为听起来这不是您想要的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-29T07:16:39.660

也许您应该事先检查一下：

伪代码

`if(y!=0){`

得到`division(x/y)`

`}else{`

说`Cannot divide by 0`

}

# android - 使用 Drive SDK 从 Google Drive 下载文件时出现“302 临时移动”

> ID：15698967
> 
> 赞同：3
> 
> 时间：2013-03-29T07:10:17.287
> 
> 标签：android, google-drive-api

我试图在 Android 上的 Google Drive 中下载文件，并且我正在关注[https://developers.google.com/drive/manage-downloads#examples中的示例](https://developers.google.com/drive/manage-downloads#examples)

```
if (entry.getDownloadUrl() != null && entry.getDownloadUrl().length() > 0) 
{
    try
    {
        LogUtils.xi(this, "start opening url:", entry.getDownloadUrl());
        /* HttpRequestFactory: Thread-safe light-weight HTTP request factory layer on top of the HTTP */
        HttpResponse resp = manager.getDrive().getRequestFactory()
                        .buildGetRequest(new GenericUrl(entry.getDownloadUrl()))
                        .execute();
        return resp.getContent();
    } 
    catch (IOException e) 
    {
        LogUtils.xe(this, e.toString());
        e.printStackTrace();
        throw ExceptionUtils.getIOException("Can't open inputstream.", e);
    }
}
else 
{
    LogUtils.xw(this, "The file doesn't have any content stored on Drive.");
    return null;
} 
```

但是收到错误 302：有人知道这里发生了什么吗？

```
03-29 14:56:07.316 E/XXGoogleDrive(25539): [25566][DriveDLFutureTask] [getInputStream]com.google.api.client.http.HttpResponseException: **302 Moved Temporarily**
03-29 14:56:07.326 W/System.err(25539): com.google.api.client.http.HttpResponseException: 302 Moved Temporarily
03-29 14:56:07.326 W/System.err(25539):     at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1062) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-18T11:19:42.253

出现“临时移动”的原因是该页面正在尝试重定向到用户身份验证页面或在文件大小超过 25 MB 的情况下进行病毒扫描

我通过使用带有'alt = media'查询参数的文件获取请求来使其工作，工作代码如下

```
private static byte[] getBytes(Drive drive, String accessToken, String fileId, long position, long byteCount) {
        byte[] receivedByteArray = null;
        String downloadUrl = "https://www.googleapis.com/drive/v3/files/" + fileId + "?alt=media&access_token="
                + accessToken;
        if (downloadUrl != null && downloadUrl.length() > 0) {
            try {
                com.google.api.client.http.HttpRequest httpRequestGet = drive.getRequestFactory().buildGetRequest(new GenericUrl(downloadUrl));
                httpRequestGet.getHeaders().setRange("bytes=" + position + "-" + (position + byteCount - 1));
                com.google.api.client.http.HttpResponse response = httpRequestGet.execute();
                InputStream is = response.getContent();
                receivedByteArray = IOUtils.toByteArray(is);
                response.disconnect();
                System.out.println("google-http-client-1.18.0-rc response: [" + position + ", " + (position + receivedByteArray.length - 1) + "]");
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return receivedByteArray;
    } 
```

# bash - 如何在 BASH 中将 [10-15] 替换为 10 11 12..15

> ID：15698969
> 
> 赞同：1
> 
> 时间：2013-03-29T07:10:21.047
> 
> 标签：bash

我有一个包含以下内容的文件/字符串：

```
[1-9]
[11-12]
[10-15] 
```

然后我想将其扩展为：

```
1 2 3 4 5 6 7 8 9
11 12
10 11 12 13 14 15 
```

我知道如何以很长的方式做到这一点（首先捕获两个数字，然后使用 for 循环扩展它们）。

我想知道是否有更快/更智能的方法来实现同样的目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T08:19:44.443

一种方法：（纯 bash 解决方案）

```
while IFS=- read l1 l2
do
   eval echo ${l1/[/{}".."${l2/]/}}
done < file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T07:24:22.127

有几种解决方案。

解决方案1：

```
sed 's/^/echo /; s/[[]/{/; s/]/}/; s/-/../' | bash 
```

例子：

```
$ cat 1.txt | sed 's/^/echo /; s/[[]/{/; s/]/}/; s/-/../' | bash
1 2 3 4 5 6 7 8 9
11 12
10 11 12 13 14 15 
```

解决方案2：

```
tr '[]-' ' ' | sed "s/^/seq -s' '/" | bash 
```

例子：

```
$ cat 1.txt | tr '[]-' ' ' | sed "s/^/seq -s' '/" | bash
1 2 3 4 5 6 7 8 9
11 12
10 11 12 13 14 15 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T07:14:16.617

如果您确信您的输入都与该模式匹配：

```
while read a; do
  seq -s' ' $(echo "$a" | tr '[]-' ' ')
done 
```

根据需要添加错误检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T07:22:04.903

这是一个单行：

```
cat lines | sed -E -e 's/\[|]//g' -e 's/-/ /g' | xargs -n 2 seq -s ' ' -t '\n' 
```

如：

```
$ cat <<EOF | sed -E -e 's/\[|]//g' -e 's/-/ /g' | xargs -n 2 seq -s ' ' -t '\n'
> [1-9]
> [11-12]
> [10-15]
> EOF
1 2 3 4 5 6 7 8 9
11 12
10 11 12 13 14 15 
```

# joomla - 使用 router.php 使我的网站 url 用户友好

> ID：15698971
> 
> 赞同：0
> 
> 时间：2013-03-29T07:10:35.157
> 
> 标签：joomla, router, joomla3.0, joomla-sef-urls

我正在研究 SEF - router.php 以使我的网站 url 用户友好。这是我的网址，我想从此网址中删除名称“组件”和“com_test”。

`http://localhost/projects/component/com_test/project/1-unique.html`

我已经检查过，`unset($query['view'])`但它没有在网站上进行任何更改。

注意：请不要为别名创建菜单项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T19:45:49.360

你需要菜单项。否则你会得到这些网址。没有办法避免这`/component/com_test/`部分，因为 Joomla 无法猜测您想要做什么。( `/project/1-unqiue`) 后面的部分取决于组件的 router.php。

如果您不想在您的站点上显示菜单项，您还可以仅为 SEF 目的创建隐藏的菜单项。您创建一个包含这些菜单项的新菜单，但不要将其分配给模块，或者只是不在任何页面上显示分配的模块。

# javascript - 如何通过单击带有 Javascript 的按钮来移动图像？

> ID：15698973
> 
> 赞同：2
> 
> 时间：2013-03-29T07:10:57.023
> 
> 标签：javascript, html, function, timer, move

我需要在具有以下行为的 HTML 文档中编写 javascript 代码：单击按钮时，图像开始移动（如果尚未移动），每秒向左移动一个像素。单击第二个按钮时，图像停止移动并立即重新定位到其原始坐标。

除了显示“开始”的“按钮”之外，我让一切正常工作。现在，如果我单击图像，图像每秒向左移动 1 个像素。但是，我需要将该功能转移到名为 START 的按钮上。

有谁知道如何做到这一点？谢谢！！

我的代码如下：

```
<html><head>

<script>

var timerid = null;

function move()
{
document.getElementById('cat').style.right = 
    parseInt(document.getElementById('cat').style.right) + 1 + 'px';    
}

window.onload=function()
{   

document.getElementById('cat').onclick=function(){

    if(timerid == null){
        timerid = setInterval("move()", 10);
    }else{
        clearInterval(timerid);
        timerid = null;
    }
}   

var button2 = document.getElementById('button2');
button2.onclick= reloadPage;

    function reloadPage(){
        window.location.reload();
    }

}

</script>
</head>
<body>

<img id="cat" src="cat.jpg" style="position:absolute;right:5px"/>

<div>
<button id="button1" type="button" style="position:absolute;left:10px;top:190px"/>START</button>
<button id="button2" type="button" style="position:absolute;left:10px;top:220px"/>STOP & RESET</button>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:12:53.383

更改`cat`为`button1`

```
document.getElementById('button1').onclick=function(){
                     //--^^^^^^^^----here
  if(timerid == null){
    timerid = setInterval("move()", 10);
  }else{
    clearInterval(timerid);
    timerid = null;
  }
} 
```

# asp.net - 文档查看器控件

> ID：15698978
> 
> 赞同：2
> 
> 时间：2013-03-29T07:11:14.700
> 
> 标签：asp.net, document, viewer

是否有任何第三方 ASP.net 文档查看器控件？

1.  它支持以下格式
    `.jpg/.jpeg/.bmp/.xls/.xlsx/.doc/.docx/.pdf/.tif/.tiff/.txt`等。

2.  也允许 Telerik 控件

3.  没有闪光灯和银光

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:01:33.943

查看[http://www.vuzit.com/](http://www.vuzit.com/)等工具及其竞争对手。我不确定您是否需要遵守任何法规或任何规定，但我知道 vuzit 满足其中的很多要求，例如 HIPAA 和安全方面的类似事情。

它不是原生的 ASP.NET。它是一个第三方工具，但它可以很容易地集成。它远非唯一的公司（尽管完全披露：我与这些人有关系——我认识创始人）。但是检查他们和他们的竞争对手，看看他们是否满足您的需求。

# javascript - 代码折叠问题eclipse

> ID：15698980
> 
> 赞同：4
> 
> 时间：2013-03-29T07:11:21.487
> 
> 标签：javascript, eclipse, collapse, folding

我在 Eclipse 折叠 javascript 代码时遇到问题，我不知道问题是什么。我正在构建游戏引擎，所以我有一个特定的对象构造函数，后跟一个计算帧速率的函数：

```
function Constructor() {
    //A whole bunch of code for this constructor

    this.method = function() {
        //A bunch of method code
        this.context.font = "blahblah";
    };
}

function calculateFrameRate(times) {
    //All the code for calculating framerate
} 
```

无论出于何种原因，它都让我可以选择从 context.font 语句开始折叠，并在帧率计算函数中一直折叠。这显然不是要折叠的有效代码块。关于问题可能是什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-16T17:35:14.333

尝试将函数命名`this.method = function() {`为`this.method = function method() {`

# mysql - mysql-具有多级子部门深度的主要部门的3个随机记录

> ID：15698985
> 
> 赞同：0
> 
> 时间：2013-03-29T07:11:32.943
> 
> 标签：mysql

我正在尝试在 MySQL 中进行复杂查询，我有以下两个表

```
departments                                 employees

Id    parent    title               id  name    department   status
---------------------------       ------------------------------------
1     0         Health              1   abc     3              1
2     0         Sports              2   def     3              1
3     0         Education           3   ghi     5              1
4     1         Physical            4   jkl     10             1
5     1         Mental              5   kkk     6              1
6     2         Football            6   lll     6              1
7     2         Baseball            7   sss     8              1
8     2         Beachball           8   xxx     6              1
9     2         Hockey              9   yyy     6              1
10    4         ENT                 10  zzz     7              1
11    0         Finance             11  mnb     11             1 
```

部门表有四个主要部门（即：parent = 0），子部门有多个层次深度。

目前我已经通过一个PHP函数通过多次运行查询来实现这一点，但我仍然想知道这是否可以通过查询来获取它。最好的方法是什么，或者如何为每个状态为 1 的主要部门随机选择最多 3 名员工。

预期的结果应该是这样的

```
id  name    department   maindep
1   abc     3            3
2   def     3            3
3   ghi     5            1
4   jkl     10           1
5   kkk     6            2
7   sss     8            2
10  zzz     7            2
11  mnb    11            11 
```

# .htaccess - 重写锂/apache商店的规则

> ID：15698986
> 
> 赞同：1
> 
> 时间：2013-03-29T07:11:42.713
> 
> 标签：.htaccess, lithium

我有一个锂安装，所有的 .htaccess 工作正常。

我需要在 app/webroot/shop 中安装 OpenCart 作为购物车

我复制了所有文件，并将锂安装根文件夹中的 .htaccess 文件更改为

```
<IfModule mod_rewrite.c>
 RewriteEngine on
 RewriteBase /
 RewriteRule    shop/(.*) /app/webroot/shop/$1 [L]
 RewriteRule    ^$ app/webroot/    [L]
 RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

仍然当我浏览[http://domain.com/shop](http://domain.com/shop)时，它会将我带到[http://domain.com/app/webroot/shop/](http://domain.com/app/webroot/shop/)

页面出现错误：

```
Exception
lithium\action\DispatchException (code 404)
Action `webroot` not found. 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:24:06.037

你可以试试这个：

```
<IfModule mod_rewrite.c>
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_URI} !/app/webroot/shop/? [NC]
RewriteRule  ^shop/(.*) /app/webroot/shop/$1    [L,NC]

RewriteCond %{REQUEST_URI} !/app/webroot/? [NC]
RewriteRule  ^$   /app/webroot/  [L,NC]

RewriteCond %{REQUEST_URI} !/app/webroot/? [NC]
RewriteRule  ^(.*) /app/webroot/$1     [L,NC]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T20:48:39.103

问题是您最后的“全部捕获”规则还将商店的所有请求重定向到您不想要的锂。

试试这个

```
Options +FollowSymlinks -MultiViews
RewriteEngine On

# Rewrite all URLs that start with /shop to /app/webroot/shop
RewriteRule  ^shop/.? /app/webroot/shop%{REQUEST_URI}    [L]

# Rewrite all URLs that don't start with /app/webroot/shop to /app/webroot
RewriteCond %{REQUEST_URI} !^/app/webroot/shop
RewriteRule .? /app/webroot%{REQUEST_URI}     [L] 
```

# android - 使用警报服务实现电池小部件？

> ID：15698999
> 
> 赞同：0
> 
> 时间：2013-03-29T07:12:38.417
> 
> 标签：android, service

这个问题让我想到了我编写电池小部件的方式。

[ACTION_BATTERY_CHANGED 疯狂开火](https://stackoverflow.com/questions/7624882/action-battery-changed-firing-like-crazy)

我担心用电量。我看到了 ACTION_BATTERY_CHANGED 被解雇的频率。即使您在执行更新操作之前检查电池电量是否确实发生了变化，它仍然看起来有点贵。

那么，在服务中收听 ACTION_BATTERY_CHANGED 或每隔 5 分钟到 10 分钟设置一次警报服务以更新小部件听起来更有效？

该小部件只是根据电池电量切换 ImageView 源并更新 TextView。虽然可能会考虑使用位图将文本绘制到图像中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:17:23.677

您不应该关心 ACTION_BATTERY_CHANGED 事件，只需`Alarm`每 5-10 分钟检查一次电池状态，这对于您的目的来说已经足够了。

另一方面，你真的认为有人在 2013 年需要另一个电池小部件吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:21:06.413

这完全取决于电池事件是否比警报更频繁地引发。如果您正在制作应用小部件，请确保在不可见时不进行更新。

我根据电池电量制作了动态壁纸，并没有看到使用电池更换事件的不利影响