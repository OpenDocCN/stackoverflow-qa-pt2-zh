# StackOverflow 问答 12997000-12997999

# java - Tomcat线程等待并锁定相同的资源

> ID：12997006
> 
> 赞同：5
> 
> 时间：2012-10-21T10:26:17.053
> 
> 标签：java, multithreading, tomcat, concurrency, locks

考虑以下 Java\Tomcat 线程转储：

```
"http-0.0.0.0-4080-4" daemon prio=10 tid=0x0000000019a2b000 nid=0x360e in Object.wait() [0x0000000040b71000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00002ab5565fe358> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.await(JIoEndpoint.java:458)
    - locked <0x00002ab5565fe358> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:484)
    at java.lang.Thread.run(Thread.java:662) 
```

这是一个僵局吗？似乎同一个资源 ( `0x00002ab5565fe358`) 都是`locked`和`waited on`- 这是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T14:40:19.630

它更像是一个无限的等待（）。它会说像 id1 在 id2 拥有的监视器上被 BLOCKED

# google-drive-api - 为服务器应用程序获取谷歌驱动器的凭据

> ID：12997007
> 
> 赞同：2
> 
> 时间：2012-10-21T10:26:26.570
> 
> 标签：google-drive-api

我正在寻找一个体面的示例或说明如何获取 google 驱动器凭据而无需通过浏览器进行身份验证。

我想要完成的是让服务器在从中提取信息后将照片上传到谷歌驱动器。目前，我了解如何与 api 交互以完成此操作，但我无法理解 google 访问驱动器所需的 OAuth2 过程。

我希望服务器在启动时无需用户输入即可进行身份验证。

目前来自此页面 [https://code.google.com/p/google-api-java-client/wiki/OAuth2](https://code.google.com/p/google-api-java-client/wiki/OAuth2)

看来我需要使用已安装的应用程序示例来获取凭据。有两个问题我难以克服

1) 尽管下载了驱动库和 OAuth2 库，但我找不到正确的库来实现所需的功能。

2) 安装的应用程序代码需要用户通过浏览器进行身份验证。我不希望用户必须进行身份验证，我希望服务器自动执行此操作。

任何有关实现此功能的信息或代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T10:35:08.127

你需要做两件事：

1.  设置您的帐户进行[两步验证](http://support.google.com/accounts/bin/answer.py?hl=en&answer=180744&topic=1099588&ctx=topic)。
2.  设置[应用程序专用密码](http://support.google.com/accounts/bin/answer.py?hl=en&answer=185833)。

# ruby-on-rails - Rails，在视图中显示模型的名称而不是 id

> ID：12997010
> 
> 赞同：0
> 
> 时间：2012-10-21T10:26:49.210
> 
> 标签：ruby-on-rails, view, associations

我真的很感激这方面的一些帮助。

我有以下关系：

```
class User < ActiveRecord::Base
  has_many :ideas, :class_name => 'Challenge', :foreign_key => 'creator_id'
  has_many :contributions, :class_name => 'Challenge', :foreign_key => 'contributor_id'

class Challenge < ActiveRecord::Base
  belongs_to :creator, :class_name => 'User'
  belongs_to :contributor, :class_name => 'User' 
```

我的问题是能够在挑战模型的视图中显示用户的名称而不是用户的 ID。

在控制台中，我可以将挑战分配给@challenge，然后输入

```
@challenge.creator.name 
```

它返回创建者的名字，完美。但是当我尝试将它放在我的视图中时，它会返回未定义的方法“名称”。

我认为我所做的最接近正确的事情是让我的挑战索引视图的相关部分说创建者，而不是 creator_id：

```
<tr><% @challenges.each do |challenge| %><tr>
<td><%= challenge.creator %></td> 
```

但不是在视图中返回我想要的创建者名称，而是返回以下输出：

```
#<User:0x007fe1b81c20b8> 
```

任何人都可以解释为什么这样显示一个字段以及如何在我的视图中输出用户名。

我的挑战控制器索引操作只是：

```
@challenges = Challenge.all 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T10:40:18.507

我想它一定是在显示对象本身。challenge.creator 是对象而不是创建者的名字。

代替

```
<td><%= challenge.creator %></td> 
```

和

```
<td><%= challenge.creator.try :name %></td> 
```

# ruby - 按方法的结果对哈希进行排序，将 nil 结果排序到底部

> ID：12997016
> 
> 赞同：2
> 
> 时间：2012-10-21T10:28:06.227
> 
> 标签：ruby, sorting, integer, null

```
def valueize(val)
  # randomly returns nil or random integer ([-100 to +100] + val)
  ((rand(100) % 3) == 0) ? nil : (rand(200)-100+val)
end

hash = {
  x: 11,
  y: 22,
  z: 33
 }

sort_by_abs = hash.sort_by{ |k, v|  (valueize(v)).abs }
sort_by_min = hash.sort_by{ |k, v|  (valueize(v))     }
sort_by_max = hash.sort_by{ |k, v| -(valueize(v))     } 
```

对于三种排序中的每一种，确保 nil 结果始终排在底部的最红宝石方法是什么？

条件：

*   潜在哈希值的范围**未知**（哈希值始终为整数）
*   **无法**修改valueize 方法
*   排序块**可以**修改

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T10:45:13.027

一个简单的方法（使用 ick's`maybe`只是为了保持紧凑，如果你觉得更舒服，可以做一个赋值+条件）：

```
inf = Float::INFINITY
sort_by_abs = hash.sort_by { |k, v| valueize(v).maybe.abs || inf }
sort_by_min = hash.sort_by { |k, v| valueize(v) || inf }
sort_by_max = hash.sort_by { |k, v| valueize(v).maybe.send(:-@) || inf } 
```

# asp.net - ASP.net Facebook 服务器端实际上并没有重定向

> ID：12997018
> 
> 赞同：0
> 
> 时间：2012-10-21T10:28:35.150
> 
> 标签：asp.net, facebook, facebook-graph-api

想法：我正在尝试使用 ASP.net 模拟 PHP 调用 Javascript

```
$Dialog='https://www.facebook.com/dialog/oauth?client_id='.$Key.'&redirect_uri='.urlencode($Done);
echo'<script>top.location.href = "'.$Dialog.'";</script>'; 
```

服务器端流程：

```
using System;
using System . Collections . Generic;
using System . Linq;
using System . Web;
using System . Web . UI;
using System . Web . UI . WebControls;
using System . Text;
using System . Security . Cryptography;
using System . Collections . Specialized;

namespace Facebook
{
    public partial class Default : System . Web . UI . Page
    {
        string Key = "397010480372609";
        string Value = "***************";
        string Permissions = "email,publish_actions,user_games_activity,friends_games_activity,publish_stream";

        string Done = "https://localhost:10010/Done.html";

        string Facebook = "https://www.facebook.com/";
        string Dialog = "dialog/oauth";

        protected void Page_Load ( object sender , EventArgs e )
        {
            Response . Redirect ( Facebook + Dialog + Query ( new NameValueCollection ( ) {
                { "client_id" , Key },
                { "redirect_uri" , Done }
                //{ "scope" , Permissions },
                //{ "state" , "" },
                //{ "response_type" , "code" }
                //{ "display" , "" }
            } ) );
        }

        private string Query ( NameValueCollection Collection )
        {
            return "?" + string . Join ( "&" , Array . ConvertAll ( Collection . AllKeys , Key => string . Format ( "{0}={1}" , HttpUtility . UrlEncode ( Key ) , HttpUtility . UrlEncode ( Collection [ Key ] ) ) ) );
        }
    }
} 
```

完成.html：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Done</title>
</head>
<body>
    <h1>Hello World!
    </h1>
</body>
</html> 
```

**日志 ：**

```
[12:26:04.454] POST https://apps.facebook.com/ajax/apps/usage_update.php?__s=1 [HTTP/1.1 200 OK 257ms]
[12:26:04.769] GET https://apps.facebook.com/_silverlight/ [HTTP/1.1 200 OK 1029ms]
[12:26:05.314] POST https://localhost:10010/ [HTTP/1.1 302 Found 3ms]
---> [12:26:05.383] GET https://www.facebook.com/dialog/oauth?client_id=397010480372609&redirect_uri=https%3a%2f%2flocalhost%3a10010%2fDone.html [HTTP/1.1 200 OK 501ms]
[12:26:05.677] GET https://apps.facebook.com/ai.php?ego=AT76ukhNGbYVnWIi7k_pBVSIqDPGVWMXGApNCp_ZP6E8Gr5I2sqK0UfQI7fZnW0YKD70p1B5odpyaBePTI4rmSnhnyR3mI2WdPsZPQ43jeegdD77MOL7ROQBJWIftJ3Em9vA3peI1CW4eJ8r7WA7KSxNEjEy2Z-AGK4Y31Ac0Qg8ERh_WLoBDkRcFo3uyE8E44HG42oNPMa2BQqxO8yn9yJOsBZylTbERMxw9nasN2DV99XiUmOFY7pVmTO2uJSkWneY-40hE_utKSGh7c-w-Rv4w9ILvvJuvqzJDUapIb19Yg67gI0v4uOyS8vNarQiP_2BvSIduuIduI6orjne8ERRRpBkqMtY1kd-YTm-EF2RzLy_iZsZgYKEn92BBrPTmfu1R2KoJYmrlD0qpdLMf34D1N0IY2oIBNG1kYXB-S5TY09mY_Rs9qCQNYDX3vLKjCtJ3vm7sNGejhSv [HTTP/1.1 200 OK 267ms]
[12:26:06.371] GET https://www.facebook.com/sound_iframe.php [HTTP/1.1 200 OK 313ms] 
```

**问题：** ASP.net 重定向实际上不起作用！

# c# - httpcontext.current.handler.master 在一段时间后返回 null

> ID：12997019
> 
> 赞同：1
> 
> 时间：2012-10-21T10:28:47.727
> 
> 标签：c#, asp.net, .net, master-pages, httpcontext

我在 ASP.NET 中遇到问题。我在母版页中有一个下拉列表，我正在使用以下代码在 UI 项目之外的库中访问它：

```
 Page page = HttpContext.Current.Handler as Page;

 if (page != null)
 {
     return page.Master.FindControl("MyDdl") as DropDownList;
 } 
```

此代码正常工作。但有时如果我在 15 到 20 分钟内保持不活动状态，然后导致回发（例如单击按钮、更改菜单等）。页面的主属性变为空。即`page.Master`开始返回null。然后我按 F5 刷新页面，它又开始工作了。我也搜索了谷歌，但没有找到任何相关的答案。谁能指导我这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:38:49.680

您遇到会话超时，您的会话已结束。有两个地方可以配置会话。

首先在您的 Web 应用程序 web.config 中，如下所示：

```
<configuration> 
  <system.web> 
     <sessionState timeout="30"></sessionState> 
  </system.web> 
</configuration> 
```

或第二次使用 IIS 管理器：

转到包含应用程序主要属性的选项卡，双击“会话状态”，在选项卡底部有“超时（以分钟为单位）”。还有其他选项可以更改会话状态存储。

还可以选择使用代码检查会话状态。请看这篇文章： http: [//www.codeproject.com/Articles/227382/Alert-Session-Time-out-in-ASP-Net](http://www.codeproject.com/Articles/227382/Alert-Session-Time-out-in-ASP-Net)

快乐编码！

# oracle - 使用 10g 客户端连接到 Oracle DB 11g - 语法错误

> ID：12997027
> 
> 赞同：0
> 
> 时间：2012-10-21T10:29:58.790
> 
> 标签：oracle, instantclient

在 Ubunut 机器上，我使用以下命令通过 11g 即时客户端连接到 Oracle 11g 数据库：

```
sqlplus username/password@(DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = the.address.com)(PORT = theport)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = service.address.com))) 
```

效果很好……在 Mac OS X Mountain Lion 上，我只能运行即时客户端 10g（32 位版本），当我尝试使用同一行进行连接时，这给了我这个错误：

```
-bash: syntax error near unexpected token `(' 
```

语法是否从 10g 更改为 11g？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T10:36:13.423

您需要在连接字符串周围加上引号，否则您的 shell 可以解释括号。

就像是：

```
sqlplus user/pass@"(DESCRIPTION...)" 
```

# c# - 表单中的动态文本框创建

> ID：12997032
> 
> 赞同：1
> 
> 时间：2012-10-21T10:30:54.173
> 
> 标签：c#, winforms, textbox

当我单击一个按钮时，我想`TextBox`在表单中动态创建一个并检索其数据并将其粘贴到另一个相同表单中的 TextBox 中。

我使用以下代码动态创建 texbox：

```
public int c=0;
private void button1_Click(object sender, EventArgs e)
{

    string n = c.ToString();
    txtRun.Name = "textname" + n;

    txtRun.Location = new System.Drawing.Point(10, 20 + (10 * c));
    txtRun.Size = new System.Drawing.Size(200, 25);
    this.Controls.Add(txtRun);
} 
```

我需要从这个 TextBox 中检索数据的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:42:58.347

您没有`Textbox`在例程中创建实例：

```
 TextBox txtRun = new TextBox();
    //...
    string n = c.ToString();
    txtRun.Name = "textname" + n;

    txtRun.Location = new System.Drawing.Point(10, 20 + (10 * c));
    txtRun.Size = new System.Drawing.Size(200, 25);
    this.Controls.Add(txtRun); 
```

当您需要内容时：

```
string n = c.ToString();

Control[] c = this.Controls.Find("textname" + n, true);
if (c.Length > 0) {
    string str = ((TextBox)(c(0))).Text;
} 
```

或者，如果您需要经常查找实例，请将其缓存在*私有阵列中。*

该例程假定它`Textbox`在索引 0 中得到一个。您当然应该检查`null`and `typeof`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T10:46:35.340

根据您的问题，您可以使用以下内容：

```
string val = string.Empty;
foreach (Control cnt in this.Controls)
{
       if(cnt is TextBox && cnt.Name.Contains("textname"))
            val = ((TextBox)cnt).Text;
} 
```

`TextBox`虽然当您将它们添加到表单时，我看不到您在哪里创建新实例。

# c++ - 使用 valgrind 修复内存泄漏

> ID：12997033
> 
> 赞同：1
> 
> 时间：2012-10-21T10:31:06.593
> 
> 标签：c++, memory-leaks, valgrind

我正在使用 c++ 并一直在使用 valgrind 来修复内存泄漏。我正在尝试优化以下被 valgrind 描述为泄漏的代码：

```
void VOMC::sub_train(vector<Letter> tempLettersA, vector<Letter> tempLettersB) {
    int stateA_id = state_exists(tempLettersA);
    State *tempStateA;

    if (stateA_id != -1) {
        tempStateA = get_state_by_id(stateA_id);
    } else {
        tempStateA = new State(tempLettersA);// MEMORY LEAK - 1
        vomc.push_back(tempStateA);
    }
    int stateB_id = state_exists(tempLettersB);
    if (stateB_id != -1) {
        tempStateA->inc_state(stateB_id);
    } else {
        State* tempStateB;
        tempStateB = new State(tempLettersB);//MEMORY LEAK -2
        vomc.push_back(tempStateB);
        stateB_id = tempStateB->GetId();
        tempStateA->inc_state(stateB_id);
    }
} 
```

对于内存泄漏-1，我收到以下消息

```
==11289== 4,055 (64 direct, 3,991 indirect) bytes in 1 blocks are definitely lost in   loss record 228 of 228
==11289==    at 0x402B87E: operator new(unsigned int) (vg_replace_malloc.c:292)
==11289==    by 0x807FA75: VOMC::sub_train(std::vector<Letter, std::allocator<Letter> >,    std::vector<Letter, std::allocator<Letter> >) (VOMC.cpp:952) 
```

对于内存泄漏-2

```
==11289==    at 0x402B87E: operator new(unsigned int) (vg_replace_malloc.c:292)
==11289==    by 0x807FB16: VOMC::sub_train(std::vector<Letter, std::allocator<Letter> >,     std::vector<Letter, std::allocator<Letter> >) (VOMC.cpp:968) 
```

我可以删除这些指针吗？这将消除我的泄漏，但是您可以看到指针被推入堆栈，目标是将它们保留在堆栈中但消除泄漏。

编辑 -1：添加字母和状态定义：

```
class Letter {

public:
    Letter();
    Letter(Helper *helper);
    ~Letter();

    void add_note(RawNote r);
    void evaluate_letter(double eigthNoteDuration);
    void setNotePositionAccordingToLetter();
    void empty_notes();
    LetterPattern getPattern() const;
    void setPattern(LetterPattern pattern);
    bool isEmpty();
    vector<RawNote> getRawNotes() const;
    void setRawNotes(vector<RawNote> rawNotes);

    bool has_note_no_velocity(RawNote* r1);
    bool has_note_with_velocity(RawNote* r1);

private:
    vector<LetterPattern> *allPossibleNotes;
    vector<RawNote> rawNotes;
    LetterPattern pattern; 
```

};

```
class State {
public:
State(); //should not be used, it is only for testing
State(vector<Letter> letters);
virtual ~State();
int GetId() const;
void SetId(int id);
vector<Letter> GetLetters() const;
void SetLetters(vector<Letter> letters);
void AddLetters(vector<Letter> letters);
void inc_state(int state_id);
void print_state_letters();
bool has_state(int state_id);
void print_connected_states();
void print_sorted_states();
vector<string> get_rhythm_as_string();
map<int, double> GetConnected_states() const;
map<int, double> connected_states;
vector< pair <int, double > > vector_sorted_connected_states;
void bubblesort_vector_descending(vector< pair <int, double > > *v_sort);
int get_connected_state_stochastically();
static int id_generator;
CustomNumberDist *normal_dist;
int id_from_file; //only used on load of a file
private:
int id;
vector<Letter> letters;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:48:32.110

valgrind 能告诉你的只是泄漏的来源。它无法告诉您丢失的调用在哪里`delete`——它丢失了。

一种解决方案是在将指针从堆栈中弹出后删除指针，并`VOMC::~VOMC()`删除堆栈上保留的所有元素。这种方法只有在类`VOMC`“拥有”堆栈上的每个对象时才有效。`State`如果堆栈还包含指向以某种方式由其他对象拥有的对象的指针，则此方法无法工作。

使用原始指针容器处理混合所有权有点困难。处理混合了所有权的原始指针容器的一种方法是添加`owned_by`指向类`State`（或包含的任何内容）的指针。现在你的类`VOMC`只删除那些拥有的对象`this`。这里有一个架构问题：它散发着代码气味。这种方法的类似物存在于 SWIG 中，您有时需要将 `thisown`属性设置为 false。当我看到这样的东西时，我的代码气味传感器会偏离正常范围。

第三种方法是摆脱那些原始指针。代替原始指针的集合，使您的`vomc`数据成员成为对象（不是指针）的集合，这些对象是某种智能指针的实例。这是处理原始指针的现代方法，而不是使用原始指针。

# c# - int 不能保存 int.MaxValue 的值

> ID：12997040
> 
> 赞同：2
> 
> 时间：2012-10-21T10:31:53.217
> 
> 标签：c#

我有以下两种方法：

```
public int Average (params int[] array)
{
    if (array.Length > 0)
    { 
        double avg = Sum(ints) / arr.Length;        
        return (int)avg;             
    }        
    return 0;
} 

public int Sum(params int[] array2)
{
    int total = 0;
    for (int n = 0; n < array2.Length; n++)
    {
        total += arr[n];
    }
    return total;
} 
```

但出于测试目的，我尝试在数组中添加`int.MaxValue / 2`and 。`int.MaxValue / 2 + 4.`但是为什么单元测试会失败，尽管这两个值的总和会小于`int.MaxValue`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T10:36:03.870

> 数组 [] 中的两个值：- int.MaxValue / 2 & int.MaxValue / 2 + 4 .. 但是当我运行单元测试时它失败了，尽管这两个值的总和将小于 int.maxvalues？

不，先生，总和将超过`int.MaxValue`：

```
(int.MaxValue / 2) + (int.MaxValue / 2 + 4) == int.MaxValue + 4 //... 
```

您超出了 int 最大值。

简单数学： (x/2)+ (x/2 +4) == x+4

# sql - 对 AfterEvent 函数的 SQL 查询

> ID：12997043
> 
> 赞同：0
> 
> 时间：2012-10-21T10:32:04.200
> 
> 标签：sql, ms-access, combobox

希望你一切都好。

您可能已经看过我之前的一篇相关文章，在该文章中，我正在就组合框中的多个列寻求帮助。我们将通过连接 Salutation、FirstName 和 LastName 字段来解决这个问题，以提供一个完整的字段来运行，这为我节省了大量时间。然而，我正在努力让看起来像一个直截了当的 SQL 语句工作。

我的SQL语句如下；

```
SELECT LocalAuthority.LocalAuthorityName, Contacts.ContactFullName
FROM LocalAuthority, Contacts
WHERE (((LocalAuthority.RequestType)=[Forms]![Requests]![cboRequestType])) 
       OR    (((Contacts.RequestType)=[Forms]![Requests]![cboRequestType]))
ORDER BY LocalAuthority.LocalAuthorityName, Contacts.ContactFullName; 
```

这不起作用，但是当我只使用本地权限作为查询中的字段源时，这确实起作用。我确实将联系人表中的请求类型字段作为链接到查询的组合框，但这不应该有太大的影响，不是吗？

非常感谢所有帮助！

最好的，

将要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:46:11.330

我怀疑你需要一个联合查询：

```
SELECT ContactName FROM (
   SELECT RequestType, LocalAuthorityName As ContactName 
   FROM LocalAuthority
   UNION ALL 
   SELECT RequestType, ContactFullName As ContactName 
   FROM Contacts) d
WHERE d.RequestType = [Forms]![Requests]![cboRequestType]
ORDER BY d.ContactName 
```

如果您需要知道哪个表，您可以说：

```
SELECT ContactName FROM (
   SELECT "Auth" As TFrom, RequestType, LocalAuthorityName As ContactName 
   FROM LocalAuthority
   UNION ALL 
   SELECT "Contact" As TFrom, RequestType, ContactFullName As ContactName 
   FROM Contacts) d
WHERE d.RequestType = [Forms]![Requests]![cboRequestType]
ORDER BY d.ContactName 
```

UNION ALL 更快，但会包含重复项，UNION 很慢，但只包含唯一行。

# haskell - 在 Haskell 中实现费马分解

> ID：12997044
> 
> 赞同：2
> 
> 时间：2012-10-21T10:32:13.627
> 
> 标签：haskell, factorization

我已经为家庭作业设置了这个问题：

> 费马在 1643 年使用了另一种因式分解方法。它更适合寻找大因数而不是小因数。假设 n 是一个奇数，并且 n = u × v。由此得出 n = x^2 − y^2 ，其中 x = (u + v)/2 和 y = (v − u)/2 都是整数数字（为什么？）。费马方法包括系统地搜索 x 的最小值，其中存在 x ^2 - y^2 = n 且 0 ≤ y < x 的 y。
> 
> 练习 11\. x 的最小可能值是多少，也就是说，我们应该从这个值开始搜索？假设在某个阶段，搜索范围缩小到 x ≥ p 和 y ≥ q。设 r = p^2 - q^2 - n。如果 r = 0，那么我们就完成了。如果 r < 0，我们应该如何改变 p 或 q？我们如何改变 r 以保持 r = p^2 - q^2 - n？如果 r > 0 怎么办？为什么这种方法保证对所有奇数 n 终止？设计一个函数 search 以便 search pqr 执行搜索。因此设计一个函数 fermat 用于返回给定奇数的两个因子。

这是我到目前为止所拥有的：

```
type Factors = (Integer, Integer)
search :: Integer -> Integer -> Integer -> Integer -> Factors
search n p q r
   | r == 0    = (p-q,p+q)
   | r < 0     = search n a b c
   | otherwise = search n d b e
      where a = p+1 ; b = isqrt (q*q+2*(p-1)+1) ; c = (a*a-b*b-n) ;
             d = p-1 ; e = (d*d-b*b-n)

isqrt :: Integer -> Integer
isqrt = truncate . sqrt . fromInteger

fermat :: Integer -> Factors
fermat n
  | n == 0    = (0,0)
  | otherwise = search n p q r 
    where p = isqrt(n) ; q = 1 ; r = (p*p-q*q-n) 
```

这适用于某些数字，例如 33（我得到 (3,11) 的预期），但不适用于其他数字，例如 99（我得到 (1,99) 而不是 (9,11)）。我想我需要对 q 的初始值使用不同的东西。一些提示将不胜感激。

我尝试将 q 的初始值更改为`isqrt( abs(p*p-n))`，但这仍然使 99 为 (3, 33) ，这是不正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T18:02:10.207

正如 Daniel Fischer 在他的提示中所暗示的那样，搜索从平方根开始并增加。这是算法，我将把它留给你翻译成 Haskell：

```
function fermat(n)
    s = floor(sqrt(n))
    u, v, r = 2*s+1, 1, s*s-n
    repeat
        if r > 0 then v, r = v+2, r-v
        else if r < 0 then u, r = u+2, r+u
        else return (u+v-2)/2, (u-v)/2 
```

请注意，此算法返回的两个因子可能是质数，也可能不是质数；如果返回值为*n*和 1，则输入*n*是素数。[我在我的博客上](http://programmingpraxis.com/2009/05/19/fermats-method/)讨论了这个算法。请注意，费马算法是查找数字因数的最糟糕的方法之一；即使是试除法通常也更快，除了*n*是具有两个相似大小的因子的半素数的情况。

# ipad - 在 iPad Portrait Orientation 中的 iOS6 上，在 RootViewController 中单击 btn 更改 DetailViewController 失败

> ID：12997051
> 
> 赞同：0
> 
> 时间：2012-10-21T10:34:19.880
> 
> 标签：ipad, ios6, uisplitviewcontroller, xcode4.5, detailview

我正在将我的应用程序从 iOS3.2 移植到 iOS6。在 iPad 上，我使用 SplitViewController。

在 RootViewController 中，我有一个表格视图。如果用户单击表格视图中的一行，我会更改 DetailViewController。

这样做的代码是：

```
 - (void)setDetailViewAuthorPage { 

UISplitViewController *splitViewController = 
(UISplitViewController *)self.parentViewController.parentViewController;

UIViewController *detail = 
[splitViewController.viewControllers objectAtIndex:1];

DetailViewControllerAuthorPageiPad <SubstitutableDetailViewController> 
*detailViewController = 
[[DetailViewControllerAuthorPageiPad alloc] 
 initWithNibName:@"DetailViewControllerAuthorPageiPad" 
 bundle:nil];

NSArray *viewControllers = 
[[NSArray alloc] 
 initWithObjects:self.navigationController, 
 detailViewController, 
 nil];

splitViewController.viewControllers = viewControllers;

[detailViewController viewWillAppear:YES];

[viewControllers release];

// Dismiss the popover if it's present.
if (popoverController != nil) {
    [popoverController dismissPopoverAnimated:YES];
}

[detailViewController 
 showRootPopoverButtonItem:self.rootPopoverButtonItem
 root:self]; 
```

在横向，此代码工作正常。

在纵向时，DetailViewController 不会更改。该行被选中并且上面的代码正在运行，但看不到 DetailViewController 更改。（我使用的是 Xcode 4.5）

非常感谢您的帮助！

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:30:54.437

我看到你可能想看看的几件事：1）你为什么不使用 didSelectRowAtIndexPath 而不是这个自定义方法？2) 看来您正在调用视图控制器上的发布... ARC 消除了发布的需要。3）在第一行你有“self.parentViewController.parentViewController”？？？4）您正在使用带有笔尖的初始化......为什么不使用情节提要和segues？我提出其中一些是因为我正在完成同类型的项目......将最初为 iOS3 编写的应用程序移动到 iOS6。我实际上不得不重写整个应用程序，因为已经发生了很大变化。

# css - 无序列（项目符号）列表中的 CSS

> ID：12997058
> 
> 赞同：0
> 
> 时间：2012-10-21T10:35:41.583
> 
> 标签：css

我想在所有选项卡中使用背景图像（/images/background.jpg），除了带有**class="selected"**的选项卡。“选定”选项卡应仅使用背景颜色#B74A12，不使用任何背景图像。下面是我的css代码。不幸的是，它将背景图像添加到所有选项卡，包括“选定”。“悬停”不断显示图像而不是不同的背景颜色:(

```
<ul id="main" class="shadetabs">
<li><a href="/>One</a></li>
<li class="selected"><a href="/">Two</a></li>
<li><a href="/">Three</a></li>
</ul>

.shadetabs{padding:0;color:#fff;font-family:Tahoma, Verdana, Arial, Helvetica, sans-serif;white-space:nowrap;list-style-type:none;font-weight:700;}
.shadetabs li,.shadetabs li.selected{display:inline;}
.shadetabs li a,.shadetabs li.selected a{margin-right:1px;font-family:Tahoma, Verdana, Arial, Helvetica, sans-serif;text-decoration:none;float:left;}

.shadetabs li a{padding: 5px 7px 7px 7px;background-color:#f1f1f1;background:#fff url(/images/background.jpg) top left repeat-x;color:#444;border-top:1px solid #d1d1d1;border-left:1px solid #d1d1d1;border-right:1px solid #d1d1d1;}
.shadetabs li.selected a{padding:5px 7px 7px 7px;background-color:#B74A12;color:#fff;border-top:1px solid #B74A12;border-left:1px solid #B74A12;border-right:1px solid #B74A12;}
.shadetabs li a:hover{background-color:#A32A36;color:#ffffff;}
.shadetabs li.selected a:hover{background-color:#BFD024;color:#fff;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T10:38:35.717

一个元素可以同时具有 a`background-image`和 a `background-color`。您可以将 CSS 从`background-color`更改`background`为`.shadetabs li.selected a`.

例如：`background: #B74A12 url('you-background-here.jpg');`

# ruby - 将多维数组缩减为更小的多维数组

> ID：12997063
> 
> 赞同：2
> 
> 时间：2012-10-21T10:36:15.200
> 
> 标签：ruby, loops

我想将一个多维数组缩减为一个更小的多维数组。让我张贴我的意思。这是我的输入/起始数组：

```
[
  [
    [ ["Armando", "P"], ["Dave", "S"] ],
    [ ["Richard", "R"],  ["Michael", "S"] ],
  ],
  [
    [ ["Allen", "S"], ["Omer", "P"] ],
    [ ["David E.", "R"], ["Richard X.", "P"] ]
  ]
] 
```

我认为这是我想简化为的四维数组：

```
["Armando", "P"], ["Dave", "S"], ["Richard", "R"],  ["Michael", "S"], ["Allen", "S"],["Omer", "P"] , ["David E.", "R"], ["Richard X.", "P"] 
```

我怎样才能在 Ruby 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T10:38:51.517

使用[Array#flatten(levels)](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-flatten)：

```
xs.flatten(2) 
```

# mysql - 如何加快查询速度？

> ID：12997065
> 
> 赞同：0
> 
> 时间：2012-10-21T10:36:33.990
> 
> 标签：mysql, optimization

我有一个表，对服务器的每个请求都存储在它上面。
对于每个请求，我都会检查它是否被禁止。
例如它是一个查询：

```
select * from requests where request_sessID = '4bc0331d983000902b4718c80f12e9b3' AND request_time > (UNIX_TIMESTAMP() - 3600) AND request_isEnable = 1 
```

我还将引擎从 InnoDB 设置为 MyISAM，将 row_format 设置为 Dynamic，但没有任何改变。
我的硬件非常强大，但执行大约需要一分钟！
我是 mysql 的程序员和新手
如何加速这个查询？
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:57:07.427

你的表中有多少条目？数十亿？

我不认为你可以加快你的请求，但你需要在你的表中创建一个[覆盖索引。](http://ronaldbradford.com/blog/tag/covering-index/)

它可能如下所示，但是您需要先看一下理论，然后按正确的顺序编写字段（首先是可能性最大的字段，...）（上面的链接）

```
ALTER TABLE requests
  ADD INDEX (request_sessID, request_time, request_isEnable); 
```

# windows-phone-7 - 在屏幕转换 XNA WP7 期间避免多次按下按钮

> ID：12997069
> 
> 赞同：0
> 
> 时间：2012-10-21T10:36:53.187
> 
> 标签：windows-phone-7

我有两节课。屏幕和按钮。

我游戏的所有不同屏幕都继承了 Screen 类。

然后将按钮添加到屏幕类并在屏幕的更新函数中更新（按钮的更新函数）。

这是我的 Button 更新的代码。

```
foreach (TouchLocation touch in TouchPanel.GetState())
        {
            if (touch.State == TouchLocationState.Pressed)
            {
                Point point = new Point((int)touch.Position.X, (int)touch.Position.Y);
                if (rectangle.Contains(point))
                {
                    pressed = true;
                    color = Color.Red;
                }
                else
                {
                    pressed = false;
                    color = Color.White;
                }
                break;
            }
        } 
```

现在问题来了。

1.  如果我保留这条线 if (touch.State == TouchLocationState.Pressed) 则只能单击第一个按钮。我还尝试使用 TryGetPreviousLocation() 导致无法单击任何按钮。

2.  如果我删除上面提到的 if 语句，那么代码适用于所有按钮，但在屏幕转换期间会发生多次按钮按下。

我想说的是这个。假设我有两个屏幕 A 和 B。屏幕 A 和 B 在完全相同的位置分别有两个按钮 P 和 Q。在第二种情况下，如果按下 P 按钮，则屏幕转换到 B，并且在没有抬起手指的情况下也按下按钮 Q。

这发生得非常快，因此无法控制。我想知道即使在屏幕转换期间我能做些什么来只允许按一次。如果不抬起手指并再次触摸屏幕，玩家应该无法按下下一个屏幕上的按钮。

如前所述。我正在调用当前屏幕更新方法中所有按钮的更新方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T13:58:41.753

替换`TouchLocationState.pressed`为`TouchLocationState.Moved`。这个对我有用。

```
foreach (TouchLocation touch in touches)
    {
        if (touch.State == TouchLocationState.Moved)
        {

            if (leftRectangle.Contains((int)touch.Position.X, (int)touch.Position.Y))
            {
                spriteMove.X -= 5;
            }

            if (upRectangle.Contains((int)touch.Position.X, (int)touch.Position.Y))
            {
                spriteMove.Y -= 5;
            }

            if (rightRectangle.Contains((int)touch.Position.X, (int)touch.Position.Y))
            {
                spriteMove.X += 5;
            }

            if (downRectangle.Contains((int)touch.Position.X, (int)touch.Position.Y))
            {
                spriteMove.Y += 5;
            }
        }
    } 
```

# c# - 如何使用 Word Automation 在段落中添加下标字符？

> ID：12997071
> 
> 赞同：7
> 
> 时间：2012-10-21T10:37:47.607
> 
> 标签：c#, ms-word, automation, paragraph, subscript

我正在使用 C# 编写一个程序，该程序使用 Microsoft Word 14.0 对象库来创建一个 .doc 文件，向其中添加段落并保存它。有一个带有按钮的小表单，可以执行所描述的操作（参见下面的代码）。这部分没有问题。

问题：

创建的 word 文件中的当前文本如下：

一些文字 beff = 3.0

我需要完成的是创建一个段落，其中包含下标字符。（在上面的段落中，字母“eff”应该下标）：

![在此处输入图像描述](../Images/b161338b5ee5e3c2f32e07184f7955ef.png)

最终的文档将包含大约 100 行与上面类似的行，并带有不同的下标字符。

我找到了一种用线为整个段落下标的方法，

```
paragraph1.Range.Font.Subscript = 1; 
```

但找不到在单独的字符上实现它的方法。

我也知道我可以使用 Unicode 中的下标字母和数字，但不幸的是，Unicode 没有下标格式的完整字母表，所以这也不是一个选项。

问题：有没有办法让我完成目标并在新创建的 Word 文档的段落内的下标中插入“eff”之类的内容？

示例代码：

```
private void btnReport_Click(object sender, EventArgs e)
    {

        Word._Application oWord;
        Word._Document oDoc;
        oWord = new Word.Application();
        oDoc = oWord.Documents.Add();

        var paragraph1 = oDoc.Content.Paragraphs.Add();
        paragraph1.Range.Text = "Some text   beff = 3.0";

        SaveFileDialog saveFileDialog1 = new SaveFileDialog();
        saveFileDialog1.Filter = "Word document|*.doc";
        saveFileDialog1.Title = "Save the Word Document";
        if (DialogResult.OK == saveFileDialog1.ShowDialog())
        {
            string docName = saveFileDialog1.FileName;
            if (docName.Length > 0)
            {
                object oDocName = (object)docName;
                oDoc.SaveAs(ref oDocName);
            }
        }
        oWord.Quit();
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T08:40:07.557

创建一个 Word 文档并添加带有下标/上标的文本并解压缩 .docx 以检查它的 XML 内容，您会注意到包含下标/上标的文本放置在单独的*运行*元素中。

实现此目的的一种方法是[OpenXML SDK](http://www.microsoft.com/en-us/download/details.aspx?id=5124)。下载并安装 SDK 后，您可以使用以下代码：

```
using System;
using DocumentFormat.OpenXml;
using DocumentFormat.OpenXml.Packaging;
using DocumentFormat.OpenXml.Wordprocessing;

namespace OpenXML
{
    class Program
    {
        static void Main(string[] args)
        {
            using (var doc = WordprocessingDocument.Create("C:\\Subscript.docx", WordprocessingDocumentType.Document))
            {
                MainDocumentPart mainPart = doc.AddMainDocumentPart();

                mainPart.Document = new Document();
                Body body = mainPart.Document.AppendChild(new Body());
                Paragraph p = body.AppendChild(new Paragraph());

                p.AppendChild(AddRun(false, "Some text   b "));
                p.AppendChild(AddRun(true, "eff"));
                p.AppendChild(AddRun(false, "= 3.0"));
            }

            Console.WriteLine("Done...");
            Console.ReadLine();
        }

        public static Run AddRun(bool isSubscript, string text)
        {
            Run run = new Run();
            if (isSubscript)
            {
                var props = new RunProperties();
                var fontSize = new FontSizeComplexScript() { Val = "20" };
                var vAlignment = new VerticalTextAlignment() { Val = VerticalPositionValues.Subscript };

                props.Append(fontSize);
                props.Append(vAlignment);
                run.Append(props);
            }
            run.Append(new Text(text));
            return run;
        }
    }
} 
```

**编辑：**

这是一个互操作解决方案：

```
 using WordNS = Microsoft.Office.Interop.Word;

    WordNS.Document doc = _application.ActiveDocument;
    WordNS.Paragraph p = doc.Paragraphs.Add();
    p.Range.Text = "Some text   beff = 3.0";

    int start = p.Range.Text.IndexOf("eff");
    int end = p.Range.Text.IndexOf("=");

    WordNS.Range range = doc.Range(start, end);
    range.Select();

    WordNS.Selection currentSelection = _application.Selection;
    currentSelection.Font.Subscript = 1;

    doc.SaveAs2("C:\\SubscriptInterop.docx"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T22:47:35.160

您可以使用范围的起点和终点来完成这项工作，甚至可以找到偏移量。

```
Range range = paragraph1.Range;
range.Text = "Some text   beff = 3.0";
if (range.Text.Contains("eff ="))
{
   range.Start = range.Start + range.Text.IndexOf("eff =");
   range.End = range.Start + 3;
   range.Font.Subscript = 1;
} 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T13:14:17.597

在 Word 中创建一个模拟您想要的过程的 Word 宏。完成后查看它创建的 VBA 代码。该代码将为您提供需要调用的互操作的工作内容/方式。

# mysql - 跨多个表的唯一键

> ID：12997073
> 
> 赞同：0
> 
> 时间：2012-10-21T10:37:55.790
> 
> 标签：mysql, sql, database-design, unique

**改写问题：**

我有三个表，对象，所有者和 objectOwnerRelation

对象有三列：id、name、type

所有者有两列：id，所有者

objectOwnerRelation 有三列：id、objectId、ownerId

objectId = 对象中的 id

ownerId = 所有者中的 ID

两个对象可以具有相同的名称和类型，但前提是所有者不同。这意味着两个具有相同名称和类型的对象不能出现在具有相同ownerId的objectOwnerRelation中

一个对象可以有多个所有者，一个所有者可以有多个对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T12:04:41.540

没有办法强制执行约束：

> 两个对象可以具有相同的名称和类型，但前提是所有者不同。

仅使用声明性引用完整性 (DRI)。仅使用 DRI，您可以创建一个表，其中包含构建唯一键所需的所有列。你可以非规范化`object.name`和`object.type`你的`objectOwnerRelation`表。这将确保在交集表本身中没有`objectOwnerRelation`具有相同名称*、*类型*和所有者的记录。*

归根结底，**DRI 不允许子表对父表施加约束。**

您正在寻找的约束需要使用触发器或其他代码以程序方式施加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:53:45.657

您必须更改 objectOwnerRelation 的结构

ownerid、objectid 和 PK

您可以保持结构不变，并在 ownerid 和 objectid 上添加一个 UNIQUE INDEX，但可以通过 ownerid 和 objectid 识别每一行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T16:16:31.770

> 这意味着两个具有相同名称和类型的对象不能出现在具有相同 ownerId 的 objectOwnerRelation 中。

* * *

> 一个对象可以有多个所有者，一个所有者可以有多个对象。

* * *

这两个句子实际上很简单，主要问题是这句话以某种方式暗示对象可以根据所有者更改名称 - 因此乔尔的回答。

所以这是简单的解决方案

![在此处输入图像描述](../Images/de31235669ea431ab72bf4255c06f26c.png)

* * *

现在麻烦的句子

> 两个对象可以具有相同的名称和类型，但前提是所有者不同。

这是否意味着可以重命名对象？他们的类型可以由所有者重命名/更改吗？

所以——如你所见——这里的主要问题是你的问题可能会以多种方式被（错误）解释。

`<rant>`

从技术上讲，这个设计在概念层面遇到了问题，远在它到达实体（逻辑层面）和表格（物理层面）之前。Evan 在设计概念层面上的微小变化可能会在逻辑和物理层面上产生巨大的差异——从提交的答案和对您的帖子的评论中可以明显看出这一点。

`</rant>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T13:05:37.933

在您的问题中，表名和类型的组合似乎需要每个 objectownerid 都是唯一的。

我的建议是将 ownerID 添加到对象并在 ([name],[type],[ownerid]) 上创建唯一索引，这样您就可以强制执行约束。

另一个允许保持当前结构的解决方案是在应该强制执行约束的表上创建触发器，在违反约束的情况下进行检查和回滚。

# opencl - 打开 Cl。我只需要将代码转换为在 for 循环中使用两个工作项。目前它使用一个

> ID：12997076
> 
> 赞同：0
> 
> 时间：2012-10-21T10:38:31.280
> 
> 标签：opencl

```
spmv_csr_scalar_kernel(const int num_rows,
                       const int * ptr,
                       const int * indices,
                       const float * data,
                       const float * x,
                       float * y )
{
    int row = get_global_id(0);
    if(row < num_rows)
    {
        float dot = 0;
        int row_start = ptr[row];
        int row_end = ptr[row+1];
        for (int jj = row_start; jj < row_end; jj++)
        {  
            dot += data[jj] * x[indices[jj]];
        }
        y[row] += dot;
    }
} 
```

以上是用于将 CSR 格式的稀疏矩阵与列向量相乘的 Open Cl 代码。每个 for 循环使用一个全局工作项。任何人都可以帮助我在每个 for 循环中使用两个工作项。我是 open cl 和如果我修改即使是最小的东西也会遇到很多问题。请帮助我。这是我项目的一部分。我让它平行但我想让它更平行。如果可以的话请帮助我。plzzzz

单个工作项执行从 row_start 到 row_end 的 for 循环。我希望将此行或 for 循环进一步分为两部分，每个部分由单个工作项执行。我该如何继续完成呢？

这是我能想到的，但它返回了错误的输出。

```
__kernel void mykernel(__global int* colvector,
                       __global int* val,
                       __global int* result,
                       __global int* index,
                       __global int* rowptr,
                       __global int* sync )
{
    __global int vals[8]={0,0,0,0,0,0,0,0};
    for(int i=0;i<4;i++)
    {
        result[i]=0;
    }
    barrier(CLK_GLOBAL_MEM_FENCE);

    int thread_id=get_global_id(0);
    int warp_id=thread_id/2;
    int lane=(thread_id)&1;
    int row=warp_id;

    if(row<4)
    {
        int row_start = rowptr[row];
        int row_end = rowptr[row+1];
        vals[thread_id]=0;

        for (int i = row_start+lane; i<row_end; i+=2)
        {
            vals[thread_id]+=val[i]*colvector[index[i]];
        }

        vals[thread_id]+=vals[thread_id+1];

        if(lane==0)
        {
            result[row] += vals[thread_id];
        }
    }               
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:29:12.263

您需要使用工作组的数量和组 id 来实现这一点。

```
spmv_csr_scalar_kernel(const int num_rows, const int * ptr, const int * indices, const float * data, const float * x, float * y) {

    __local float[64] dot; //local memory for dot product. assumes you want to use up to 64-item workgroups.
    int localId = get_local_id(0); //offest value for jj loop
    int localSize = get_local_size(0); //this is the number of work items computing the jj loop
    int nGroups = get_num_groups(0); //number of workgroups executing this kernel

    for (int row = get_group_id(0); row < num_rows; row += nGroups) {
        dot[localId] = 0;
        int row_start = ptr[row] + localId;
        int row_end = ptr[row + 1];
        for (int jj = row_start; jj < row_end; jj++) {
            dot[localId] += data[jj] * x[indices[jj]];
        }
        barrier(CLK_LOCAL_MEM_FENCE);

        //here's where work item #0 in the group sums the values stored in local memory
        if (localId == 0) {
            for (int i = 1; i < localSize; i++) {
                dot[0] += dot[i];
            }
            y[row] += dot[0]; //only a single write to the global memory location
            barrier(CLK_LOCAL_MEM_FENCE);
        }
    } 
```

该内核将使用尽可能多的工作组来完成所有工作。（即组可以在多行上工作）这是通过将 'if(row < num_rows)' 转换为 'for(int row...' 循环来完成的。您可能会发现具有正确工作数量的单个工作组项目可能会胜过许多小型工作组。

我使用 64 作为本地内存大小的硬编码值。上面的内核可以在工作组大小高达 64 的情况下正常工作。64 在今天的许多设备上恰好是最佳的。您可以尝试其他硬编码值，或通过传入 __local 参数来分配本地内存。

# ruby-on-rails - 通过注入哈希进行代码重构

> ID：12997080
> 
> 赞同：0
> 
> 时间：2012-10-21T10:38:38.593
> 
> 标签：ruby-on-rails, ruby, hash, iterator, code-injection

我正在使用 Ruby 1.9.2 和 Ruby on Rails v3.2.2 gem。我想将*以下代码重构为一行*：

```
args ||= {}

@i_vars = {}
args.each { |key, opts| @i_vars[key] = IVar.new(key, opts, args.keys) } 
```

我想使用类似这样的[注入方法：](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)

```
args ||= {}

@ivars = args.inject({}) { |result, (key, opts)| result.merge( @i_vars[key] = IVar.new(key, opts, args.keys) ) } 
```

但是，后一个代码在设置`@i_vars`变量时会返回不同的结果。我也尝试了该方法的其他实现，`inject`但没有成功。

有没有办法重构代码？或者，也许，我应该使用其他方法或某些 RoR 功能（我不知道）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:43:46.710

看看[each_with_object](http://api.rubyonrails.org/classes/Enumerable.html#method-i-each_with_object)

```
@i_vars = args.each_with_object({}) do |key,opts,result|
  result[key] = IVar.new(key, opts, args.keys)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T10:54:16.960

你应该在`inject`块中写什么：

```
result.update(key => IVar.new(key, opts, args.keys) 
```

但无需使用`inject`或`each_with_object`构建哈希，我们有`Hash[pairs]`：

```
@i_vars = Hash[(args || {}).map { |k, opts| [k, IVar.new(k, opts, (args || {}).keys)] } 
```

但是，我不会沉迷于单行代码，我会编写一个等效但更清晰的代码：

```
hargs = args || {}
@i_vars = Hash[hargs.map do |key, opts| 
  [key, IVar.new(key, opts, hargs.keys)]
end] 
```

# mysql - 用mysql fetch数组显示信息？

> ID：12997088
> 
> 赞同：0
> 
> 时间：2012-10-21T10:39:51.203
> 
> 标签：mysql, fetch

我正在尝试从 mysql 'ptb_stats' 中的表中提取信息。这是通过特定的“user_id”提取的，以便站点的每个成员只能看到他们的统计信息。

到目前为止，发生的所有事情都是我在页面上得到了图像的回显”，而被拉出的信息只是说数组？

请问我哪里出错了有什么建议吗？

谢谢

这是功能：

```
function get_stats() {
            global $connection;
            global $_SESSION;
            $query = "SELECT  s.location, s.nationality, s.hobbies, s.role, s.friends, s.height, s.weight
                        FROM ptb_stats s
                        WHERE user_id = \'$profile_id\'";

                        $stats_set = mysql_query($query, $connection);
            confirm_query($query, $connection);
            return $stats_set;
        } 
```

这是获取数组：

```
 <?php
        $stats_set = get_stats();

        while ($stats = mysql_fetch_array($stats_set)) {

            ?>
    <table width="100%" border="0">
  <tr>
    <td width="13%"><?php echo "<img width=40px heigh=34px src=\"assets/img/icons/stats.png\"/>" ?></td>
      <td width="25%"><?php echo " $stats"?> </td>
      <td width="13%"><?php echo "<img width=40px heigh=34px src=\"assets/img/icons/stats.png\"/>" ?></td>
      <td width="25%"><?php echo " $stats"?> </td>
      <td width="13%"><?php echo "<img width=40px heigh=34px src=\"assets/img/icons/stats.png\"/>" ?></td>
      <td width="20%"><?php echo " $stats"?> </td>
      </tr>
      <tr>
      <td height="36"><?php echo "<img width=40px heigh=34px src=\"assets/img/icons/stats.png\"/>" ?></td>
      <td><?php echo " $stats"?> </td>
      <td><?php echo "<img width=40px heigh=34px src=\"assets/img/icons/stats.png\"/>" ?></td>
      <td><?php echo " $stats"?> </td>
      <td><?php echo "<img width=40px heigh=34px src=\"assets/img/icons/stats.png\"/>" ?></td>
      <td><?php echo " $stats"?> </td>
      </tr>
      </table>
<?php
        }

        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:45:22.510

$stats 是一个包含所有结果的数组。您需要定义要显示的值：

```
<?php echo $stats['location']; ?> 
```

此外，您应该这样编写代码：

```
<?php
    $stats_set = get_stats();
    while ($stats = mysql_fetch_assoc($stats_set)) : 
?>

<table width="100%" border="0">
<tr>
    <td width="13%"><?php echo $stats['location']; ?></td>
</tr>
</table>

<?php endwhile; ?> 
```

**编辑**

您需要使用`mysql_fetch_assoc`而不是`mysql_fetch_array`（或指定`MYSQL_ASSOC`） [http://php.net/manual/fr/function.mysql-fetch-assoc.php](http://php.net/manual/fr/function.mysql-fetch-assoc.php)

# c# - 简单的 MouseMove 处理

> ID：12997089
> 
> 赞同：0
> 
> 时间：2012-10-21T10:40:08.300
> 
> 标签：c#, winforms, gdi+, gdi

我尝试编写一个简单的图形编辑器。我有下一个问题，当我使用 绘制一些曲线时`SolidBrush()`，我得到了中断的曲线（看图片）。我需要获得不间断的曲线。我尝试为此使用鼠标捕获，但它不起作用（结果相同）。我该如何解决？查看以下 MouseMove 事件处理程序的代码：

```
void pictureBox1_MouseMove(object sender, MouseEventArgs e)
        {
            if (isMouseDown)
            {
                pictureBox1.Capture = true; // I try to capture mouse here
                Graphics g = Graphics.FromHwnd(this.pictureBox1.Handle);
                g.FillRectangle(new SolidBrush(Color.Black), e.X, e.Y, 1, 1);
            }
        } 
```

![在此处输入图像描述](../Images/b21d82bdb71a6d75aea6dd8c98e39698.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T10:51:43.307

不要画点，而是记住你最后的鼠标位置，并从它画线到当前的鼠标位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T10:55:27.383

这取决于鼠标移动的速度，有时 MouseMove 事件会更频繁地触发，有时则不会。我认为这还取决于您的机器在该特定时刻加载了多少。如果你在两点之间画线，它们不会是弯曲的，而是直线的。相反，您应该查看[Beziers](http://en.wikipedia.org/wiki/B%C3%A9zier_curve.)和[Splines](http://en.wikipedia.org/wiki/Spline_%28mathematics%29)。这样，您将获得基于几个点的曲线。

但是你可以用你的代码做点什么。每当您最后一次 mousedown 和当前 mousedown 事件之间的距离大于阈值时（您可以凭经验获得），您可以向曲线添加新点。下面是添加一个点的示例代码：

```
 public bool isMouseDown { get; set; }
        Point lastPoint = Point.Empty;
        public double treshold { get; set; }
        private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
        {
            if (isMouseDown)
            {
                pictureBox1.Capture = true; // I try to capture mouse here
                Graphics g = Graphics.FromHwnd(this.pictureBox1.Handle);
                if (Math.Sqrt(Math.Pow(e.X - lastPoint.X, 2) + Math.Pow(e.Y - lastPoint.Y, 2)) > treshold)
                {
                    g.FillRectangle(new SolidBrush(Color.Black), (e.X + lastPoint.X)/2, (e.Y + lastPoint.Y)/2, 1, 1);

                }

                g.FillRectangle(new SolidBrush(Color.Black), e.X, e.Y, 1, 1);
                lastPoint = new Point(e.X, e.Y);
            }
        }

        private void pictureBox1_MouseDown(object sender, MouseEventArgs e)
        {
            isMouseDown = true;
            lastPoint = new Point(e.X, e.Y);
        }

        private void pictureBox1_MouseUp(object sender, MouseEventArgs e)
        {
            isMouseDown = false;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:31:28.443

除了鼠标移动的问题，这里还有另一个更严重的问题。

`Graphics g = Graphics.FromHwnd(this.pictureBox1.Handle)`由于像素会消失，因此直接在图形表面上使用和绘图将是暂时的。

Bob Powell 对此也有很好的回答。

请参阅他的 #1 最常见的 GDI+ 问题：[https ://web.archive.org/web/20131226033137/http://bobpowell.net/picturebox.aspx](https://web.archive.org/web/20131226033137/http://bobpowell.net/picturebox.aspx)

# objective-c - 强和留有什么区别？

> ID：12997093
> 
> 赞同：2
> 
> 时间：2012-10-21T10:40:43.243
> 
> 标签：objective-c, ios

> **可能重复：**
> [强（在 LLVM 中）和保留（在 GCC 中）有什么区别？](https://stackoverflow.com/questions/10299200/what-is-the-difference-between-strong-in-llvm-and-retain-in-gcc)

我可以在任何地方看到我们可以在最新的对象 c 编程中使用强属性而不是保留。但是，我想知道strong和retain之间有多大区别，strong比retain有什么额外的优势，所以Apple发布了strong。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T10:49:44.917

它完全符合 ARC 和非 ARC 项目的工作方式的语义（afaik）。苹果希望每个人都使用 ARC，并且正在朝着这个方向努力。

在非 ARC 项目中，“强”将充当“保留”。在 ARC 项目中，如果 clang 没有标记错误（我不使用 ARC），“保留”可能会起作用，但描述中有一个微妙之处。

Retain 说 - 我坚持这个对象，直到我准备好释放它，strong 说（嘿 ARC 将其视为保留对象，并在我的 dealloc 方法中插入一些生成的代码，以便在自动释放池耗尽时释放）。

据我所知，这是唯一的区别，它是概念上的，如果你在快乐的 ARC 土地上，你不应该真正关心，除非它坏了:(

# php - 使用 PHP 进行单引号、双引号和 Mysql 查询

> ID：12997094
> 
> 赞同：1
> 
> 时间：2012-10-21T10:40:52.107
> 
> 标签：php, mysql, sql

我正在使用类似的语法

```
$query  = "SELECT * FROM contacts WHERE contact_id = $id"; 
```

它通常有效，但通常无效。那么如果我使用

```
$query  = 'SELECT * FROM contacts WHERE contact_id = "'.$id.'"; 
```

然后它工作。哪一个是正确的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T11:06:31.953

In fact, **neither** of these syntaxes is best, when it comes to writing a SQL query.

If you're writing a SQL query, you are *far* better off writing it using parameterised queries, like so:

```
$query = 'SELECT * FROM contacts WHERE contact_id = ?';
$prep = $mysqli->prepare($query);  //prepares the query for action
$prep->bind_param("i", $id);       //inserts the $id variable into the '?' as an integer value. 
```

...or similar methods using the PDO library.

Doing queries this way will make your queries more secure.

Please note that if you're using the old style `mysql_xx()` functions (which do not support this style of code), these are considered obsolete and insecure, and will be removed from a future version of PHP. You should stop using them as soon as possible. (see the PHP manual for more info on this)

It wasn't clear from the question whether you were asking about string syntax or query writing style. The above helps with query writing, and also avoid the issue with string syntax, but in case you still want to know about the string syntax issues, I will continue with some thoughts on that topic too....

Both syntaxes are perfectly valid. The short answer is that it's fine either way, so do it whichever way works best for you in any given bit of code.

You mentioned that your first syntax "often does not work". It would be helpful if you could elaborate on that, because it is perfectly valid PHP syntax.

Reasons it may fail are if you have other words joining onto variable names so PHP, or if you are trying to use an array element as the variable. In this case, you should wrap your variable names in braces like so:

```
$string = "this is a string with a {$variable} in it"; 
```

In fact, this works in all cases (and also helps make it clearer when you're using a variable in a string), so is best to do it all the time.

Some people will say that using single quotes is better for performance. It is.... but the difference is very marginal, and in fact, when you're concatenating a lot of variables it becomes even less. To be honest, if they're that worried about performance that this kind of thing is an issue for them then they shouldn't be using an interpreted language like PHP.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T10:41:43.200

```
$query  = "SELECT * FROM contacts WHERE contact_id = '". $id . "'"; 
```

但查询很容易受到`SQL Injection`. 这是一篇如何保护您的代码的文章`SQL Injection`

[**在 PHP 中防止 SQL 注入的最佳方法是什么？**](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

如果您要过滤的列不是数字，则下面的查询将不起作用。

```
$query  = "SELECT * FROM tableName WHERE username = $name"; 
```

# ssrs-2008 - SSRS 报告不解析多个 xml 元素

> ID：12997096
> 
> 赞同：2
> 
> 时间：2012-10-21T10:40:59.973
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix

我希望在从 xml 创建的单个数据集中的两个 tablixes 上显示数据。以下是一个示例 xml。我在 SchemeCategoryType 上创建了两个带有过滤器的 tablix（即利益相关者或非利益相关者）。因此，一个 tablix 将显示来自特定 SchemeCategoryType 的信息。然后，我创建了行组以获取特定 MemberContributionType 的数据（在此示例中为非承包）。然后我试图在这个 RowGroup 下显示 ContributionType“个人”的贡献金额。我在这里面临的问题是 tablix 只解析第一个节点，所以在这种情况下我得到一个空白显示。关于我在这里做错了什么有什么建议吗？

要添加我正在使用一个数据集，即“SchemeMembers”。

```
<SchemeMembers SchemeCategoryType="Stakeholder" SchemeSponsorType="Non-Employer" MemberContributionType="Non-Contracted Out" NumberOfMembers="41">
  <SchemeContributions ContributionType="" ContributionAmount="85000.00">
  </SchemeContributions>
  <SchemeContributions ContributionType="Individual" ContributionAmount="123824.56">
  </SchemeContributions>
  <SchemeContributions ContributionType="Employer" ContributionAmount="9118.93">
  </SchemeContributions>
</SchemeMembers> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-19T00:46:40.860

您的 DataSet 可以从 xml 中查询所有值，然后添加一个过滤器：

查询示例：

```
<Query>
<ElementPath>*</ElementPath>
</Query> 
```

数据集过滤器：

![在此处输入图像描述](../Images/acdd8dbede76d5ef5019c5a9dfb99179.png)

# excel - Excel VB 此活动工作表

> ID：12997100
> 
> 赞同：6
> 
> 时间：2012-10-21T10:41:29.063
> 
> 标签：excel, worksheet, vba

我敢肯定这真的很容易，但我找不到任何信息。

我有一个 Excel 宏，其中包含以下内容：

```
 ActiveWorkbook.Worksheets("Data 21 Oct 12 11-05").Sort.SortFields.Clear
ActiveWorkbook.Worksheets("Data21 Oct 12 11-05").Sort.SortFields.Add Key _
    :=Range("W1:W23"), SortOn:=xlSortOnValues, Order:=xlDescending, _
    DataOption:=xlSortNormal
With ActiveWorkbook.Worksheets("Data 21 Oct 12 11-05").Sort
    .SetRange Range("A1:BZ23")
    .Header = xlGuess
    .MatchCase = False
    .Orientation = xlTopToBottom
    .SortMethod = xlPinYin
    .Apply
End With 
```

我想要做的是使它成为一个全局宏，但文件名在宏中是硬编码的。如何更改代码以使其引用“this”当前打开的文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T11:05:04.520

好的，我发现您需要将其更改为：

```
ActiveWorkbook.Worksheets("Data 21 Oct 12 11-05").Sort. 
```

到：

```
ActiveWorkbook.ActiveSheet.Sort 
```

[在 Excel 中创建按钮时归功于此 SO](https://stackoverflow.com/questions/1745017/excel-2007-need-help-creating-a-button-which-takes-the-contents-of-active-work?rq=1)项目

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T11:04:44.900

`ActiveWorkbook`确实引用了当前打开和活动的文件。

如果通过*文件名*您指的是工作表名称是硬编码的事实，则可以通过替换为来使宏与活动工作**表**`ActiveWorkbook.Worksheets("Data 21 Oct 12 11-05")`一起使用`ActiveSheet`。

# android - 如何改变android微调器的外观

> ID：12997101
> 
> 赞同：1
> 
> 时间：2012-10-21T10:41:37.133
> 
> 标签：android, spinner, android-spinner

我在 android 项目中使用微调器。一切都很好。唯一的问题是微调器没有显示我想要的方式。

这是它看起来像的图像：

![难看的微调器](../Images/cea2f7b54d5191380e282a414841e436.png)

但我希望它看起来像这样：

![好看的陀螺](../Images/6ad76907c0da0ace66e9bbf42adb016f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T12:26:43.707

您可以参考下面的代码。此代码将生成带有下拉箭头的微调器外观。它是通过以下方式实现的

> android.R.layout.simple_spinner_item

由 ArrayAdapter 指定。要更改其样式，您可以使用不同的布局，您可以在[此处找到](http://developer.android.com/reference/android/R.layout.html)

```
import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.AdapterView.OnItemSelectedListener;

public class MainActivity extends Activity {

    Spinner spin;
    String spin_val;
    String[] gender = { "Male", "Female" };//array of strings used to populate the spinner
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);//setting layout
        spin = (Spinner) findViewById(R.id.spinner_id);//fetching view's id
        //Register a callback to be invoked when an item in this AdapterView has been selected
        spin.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int position, long id) { 
                // TODO Auto-generated method stub
                spin_val = gender[position];//saving the value selected

            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }

        });
      //setting array adaptors to spinners 
      //ArrayAdapter is a BaseAdapter that is backed by an array of arbitrary objects
        ArrayAdapter<String> spin_adapter = new ArrayAdapter<String>(MainActivity.this, android.R.layout.simple_spinner_item, gender);

        // setting adapteers to spinners
        spin.setAdapter(spin_adapter);
    }

} 
```

屏幕.xml

```
<Spinner
        android:id="@+id/spinner_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" /> 
```

你在这里有这个演示项目供你[参考](http://blog.creatiosoft.com/?p=1194)。

希望这可以帮助。

# delphi - 始终在 TValueListEditor 中显示选项下拉菜单

> ID：12997108
> 
> 赞同：6
> 
> 时间：2012-10-21T10:42:34.370
> 
> 标签：delphi, user-interface, delphi-7

我正在尝试通过减少执行某些操作所需的点击量来改进 GUI。但是，困扰我的一个 VCL 组件是 TValueListEditor，它包含一个键和值列表，所有这些都由下拉列表控制。选择一个选项总是需要点击三下，而只需要两下：

![坏的](../Images/ce702b50869069f3e653bab3b4afb4fe.png)

此时，最上面一行有焦点，可以使用下拉菜单更改值（单击两次）。但是，当用户想要编辑不同的键时，他首先必须将焦点更改为该键，然后才能使用下拉菜单（单击三下）。

有没有办法在所有行上显示下拉箭头以防止额外的点击？

这是我想要实现的模型示例：

![好的](../Images/86050e6629d97499df2d4b16f189d0a8.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T23:50:51.507

```
uses
  Vcl.Themes;

type
  TValueListEditor = class(Vcl.ValEdit.TValueListEditor)
  private
    procedure DrawDropDownButton(ACol, ARow: Integer; ARect: TRect;
      AState: TGridDrawState);
    function MouseOverButton(X: Integer): Boolean;
  protected
    procedure DrawCell(ACol, ARow: Integer; ARect: TRect;
      AState: TGridDrawState); override;
    procedure DrawCellHighlight(const ARect: TRect; AState: TGridDrawState;
      ACol, ARow: Integer); override;
    procedure MouseDown(Button: TMouseButton; Shift: TShiftState; X,
      Y: Integer); override;
  end;

{ TValueListEditor }

type
  TInplaceEditListAccess = class(Vcl.Grids.TInplaceEditList);

procedure TValueListEditor.DrawCell(ACol, ARow: Integer; ARect: TRect;
  AState: TGridDrawState);
begin
  inherited DrawCell(ACol, ARow, ARect, AState);
  DrawDropDownButton(ACol, ARow, ARect, AState);
end;

procedure TValueListEditor.DrawCellHighlight(const ARect: TRect;
  AState: TGridDrawState; ACol, ARow: Integer);
var
  R: TRect;
begin
  R := ARect;
  if ItemProps[ARow - FixedRows].HasPickList then
    Dec(R.Right, EditList.ButtonWidth);
  inherited DrawCellHighLight(R, AState, ACol, ARow);
  DrawDropDownButton(ACol, ARow, ARect, AState);
end;

procedure TValueListEditor.DrawDropDownButton(ACol, ARow: Integer;
  ARect: TRect; AState: TGridDrawState);
var
  Details: TThemedElementDetails;
begin
  if (ACol = 1) and (ARow >= FixedRows) and not (gdFocused in AState) and
    ItemProps[ARow - FixedRows].HasPickList then
  begin
    ARect.Left := ARect.Right - EditList.ButtonWidth;
    Details := StyleServices.GetElementDetails(tgDropDownButtonNormal);
    StyleServices.DrawElement(Canvas.Handle, Details, ARect);
  end;
end;

procedure TValueListEditor.MouseDown(Button: TMouseButton; Shift: TShiftState;
  X, Y: Integer);
var
  ACol: Integer;
  ARow: Integer;
begin
  inherited MouseDown(Button, Shift, X, Y);
  MouseToCell(X, Y, ACol, ARow);
  if (Button = mbLeft) and (ARow > FixedRows) and
    ItemProps[ARow - FixedRows].HasPickList and
    not EditList.ListVisible and MouseOverButton(X) then
  begin
    EditorMode := True;
    TInplaceEditListAccess(EditList).DropDown;
  end;
end;

function TValueListEditor.MouseOverButton(X: Integer): Boolean;
begin
  Result := (UseRightToLeftAlignment and (X < EditList.ButtonWidth)) or
    (not UseRightToLeftAlignment and (X > ClientWidth - EditList.ButtonWidth));
end; 
```

![在此处输入图像描述](../Images/b26555e43c2abdb5607c26cf44fcc5ac.png)

# android - Android模拟器（sdk 4.1）不滚动壁纸

> ID：12997113
> 
> 赞同：4
> 
> 时间：2012-10-21T10:43:17.910
> 
> 标签：android, android-emulator

我的 sdk 4.1 模拟器中的壁纸不滚动（平移）。使用 sdk 2.2 可以按预期进行滚动。有没有让壁纸滚动的选项？

# php - Windows下的PHP APC，缓存保存在哪里？

> ID：12997120
> 
> 赞同：0
> 
> 时间：2012-10-21T10:43:59.410
> 
> 标签：php, caching, apc

我正在使用 Windows 7 进行 PHP 开发，并且我刚刚安装了 PHP APC 缓存。现在我注意到的第一件事是，当在我的本地 Windows 机器上启用 APC 时，请求比禁用 APC 时要慢。一开始我很奇怪，但后来我读到在 Windows 下使用 APC 缓存时，APC 需要临时目录来保存缓存。因此，APC 似乎较慢，因为它不会将缓存保存在 RAM 内存中，而是保存在磁盘上的某个位置。这一切都很好，因为我只学习 APC 缓存。

我的问题是，这个缓存保存在磁盘上的什么位置？以及我如何告诉 PHP 将缓存保存在我想要的文件夹中，比如说`c:\wamp\apache\temp\`，那是我的会话存储的地方，那是我希望我的 APC 缓存去的地方，因为不去 RAM。

我在哪里可以设置这个？php.ini 文件中的某处？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:50:35.687

APC 使用 RAM 来存储缓存，无论使用何种操作系统，并且没有基于缓存的磁盘设置或选项：[http ://www.php.net/manual/en/apc.configuration.php](http://www.php.net/manual/en/apc.configuration.php)

虽然我确实找到了这个...

[http://php.net/manual/en/apc.installation.php](http://php.net/manual/en/apc.installation.php)

> 注意：在 Windows 上，APC 需要一个临时路径才能存在，并且可由 Web 服务器写入。它按顺序检查 TMP、TEMP 和 USERPROFILE 环境变量，如果没有设置这些变量，则最后尝试 WINDOWS 目录。

我不知道这是在说什么。也许对于一些中间过程。或者这可能已经过时了。

但是您可以通过运行查看是否已设置 TMP 或 TEMP（它将是）以及它是什么路径`phpinfo();`

无论哪种方式，我都不会对 APC 和崩溃、性能问题、空白屏幕等感到太惊讶。我一直在使用它（使用 WampDeveloper），而且 APC 非常喜怒无常。

# wordpress - 需要在函数中放置代码

> ID：12997121
> 
> 赞同：-2
> 
> 时间：2012-10-21T10:44:10.797
> 
> 标签：wordpress, function

我需要将此代码放在functions.php中的一个函数中

我该怎么做呢？

编辑：这是关于我收到的关于标题问题的答案。

“不在函数内。所以文件一加载就被调用。这意味着所有输出都会立即发送到屏幕上。这东西应该在一个函数内，然后在正确的时间调用（就像其他位一样） 。”

问题是，我不知道如何将此代码放入函数中。

```
 add_shortcode("snap", "wpr_snap");
$user_ej = wp_get_current_user();
if ($user_ej->roles[0] == 'contributor')
{ ?>
  <style type="text/css">
    #menu-dashboard, #toplevel_page_wpcf7, #menu-tools 
    {
        display:none;
    }
</style>
<?php }
add_filter(  'gettext',  'change_post_to_portfolio'  );
add_filter(  'ngettext',  'change_post_to_portfolio'  ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:06:49.000

根据您的代码内容，您可能应该像这样重写它：

```
 add_shortcode("snap", "wpr_snap");
function add_extra_css() {
$user_ej = wp_get_current_user();
if ($user_ej->roles[0] == 'contributor')
{ ?>
  <style type="text/css">
    #menu-dashboard, #toplevel_page_wpcf7, #menu-tools 
    {
        display:none;
    }
</style>
<?php }
}
}
add_action( 'wp_head', 'add_extra_css' );
add_filter(  'gettext',  'change_post_to_portfolio'  );
add_filter(  'ngettext',  'change_post_to_portfolio'  ); 
```

# javascript - 打印网页的特定部分

> ID：12997123
> 
> 赞同：81
> 
> 时间：2012-10-21T10:44:28.253
> 
> 标签：javascript, html, printing

我正在尝试打印我的应用程序的特定部分。

该应用程序有一个用户列表，显示他们的名字和姓氏。当我单击用户时，我会弹出一个包含有关他们的更详细信息的弹出窗口。

我将如何为我点击的用户打印弹出窗口？弹出窗口如下所示：

```
 <div id="user<?=$user->id;?>" class="popup">
      <div class="details">
           User details...
      </div>
      <a href="#print">Print</a>
 </div> 
```

打印按钮还没有工作。

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-10-21T10:58:16.113

您可以使用简单的 JavaScript 从页面打印特定的 div。

```
var prtContent = document.getElementById("your div id");
var WinPrint = window.open('', '', 'left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0');
WinPrint.document.write(prtContent.innerHTML);
WinPrint.document.close();
WinPrint.focus();
WinPrint.print();
WinPrint.close(); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-21T10:56:47.813

您必须打开一个新窗口（或导航到新页面），其中仅包含您希望用户能够打印的信息

Javascript：

```
function printInfo(ele) {
    var openWindow = window.open("", "title", "attributes");
    openWindow.document.write(ele.previousSibling.innerHTML);
    openWindow.document.close();
    openWindow.focus();
    openWindow.print();
    openWindow.close();
} 
```

HTML：

```
<div id="....">
    <div>
        content to print
    </div><a href="#" onclick="printInfo(this)">Print</a>
</div> 
```

这里有一些注意事项：锚点和包含要打印的内容的 div 之间不能有空格

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-10-13T14:03:56.533

我制作了这个 jQuery 扩展来打印所选元素的 HTML：`$('#div2').print();`

```
$.fn.extend({
    print: function() {
        var frameName = 'printIframe';
        var doc = window.frames[frameName];
        if (!doc) {
            $('<iframe>').hide().attr('name', frameName).appendTo(document.body);
            doc = window.frames[frameName];
        }
        doc.document.body.innerHTML = this.html();
        doc.window.print();
        return this;
    }
}); 
```

[在这里](https://jsfiddle.net/lettieriale/Lfh8rm5m/1/)查看它的实际应用。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-03-30T06:48:10.853

无需使用所有复杂的 JavaScript，您实际上可以通过简单的方式实现`CSS`：只需使用两个 CSS 文件，一个用于正常屏幕显示，另一个用于**仅**显示您希望打印的内容。在后一个文件中，隐藏您不想打印的所有内容，仅显示弹出窗口。

记得定义`media`两个 CSS 文件的属性：

```
<link rel="stylesheet" href="screen-css.css" media="all" />
<link rel="stylesheet" href="print-css.css" media="print" /> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-01-11T21:09:15.203

只需使用 CSS 隐藏您不想打印的内容。当用户选择打印时 - 页面将查看“ **media="print"** CSS 以获取有关页面布局的说明。

**media="print"** CSS 具有隐藏我们不想打印的内容的指令。

```
<!-- CSS for the things we want to print (print view) -->
<style type="text/css" media="print">

#SCREEN_VIEW_CONTAINER{
        display: none;
    }
.other_print_layout{
        background-color:#FFF;
    }
</style>

<!-- CSS for the things we DO NOT want to print (web view) -->
<style type="text/css" media="screen">

   #PRINT_VIEW{
      display: none;
   }
.other_web_layout{
        background-color:#E0E0E0;
    }
</style> 
```

* * *

```
<div id="SCREEN_VIEW_CONTAINER">
     the stuff I DO NOT want printed is here and will be hidden - 
     and not printed when the user selects print.
</div>

<div id="PRINT_VIEW">
     the stuff I DO want printed is here.
</div> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-07-04T03:29:03.443

这是我的增强版本，当我们要加载 css 文件或要打印的部分中有图像参考时。

在这些情况下，我们必须等到 css 文件或图像完全加载后才能调用 print() 函数。因此，我们最好将 print() 和 close() 函数调用移动到 html 中。以下是代码示例：

```
var prtContent = document.getElementById("order-to-print");
var WinPrint = window.open('', '', 'left=0,top=0,width=384,height=900,toolbar=0,scrollbars=0,status=0');
WinPrint.document.write('<html><head>');
WinPrint.document.write('<link rel="stylesheet" href="assets/css/print/normalize.css">');
WinPrint.document.write('<link rel="stylesheet" href="assets/css/print/receipt.css">');
WinPrint.document.write('</head><body onload="print();close();">');
WinPrint.document.write(prtContent.innerHTML);
WinPrint.document.write('</body></html>');
WinPrint.document.close();
WinPrint.focus(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-12-10T10:21:05.377

风格

```
 @media print {

       .no-print{
               display : none !important;
                }
              } 
```

jQuery

```
 function printInvoice()
 {
     printDiv = "#printDiv"; // id of the div you want to print
     $("*").addClass("no-print");
     $(printDiv+" *").removeClass("no-print");
     $(printDiv).removeClass("no-print");

     parent =  $(printDiv).parent();
     while($(parent).length)
     {
         $(parent).removeClass("no-print");
         parent =  $(parent).parent();
     }
     window.print();

 } 
```

打印按钮 Html

```
<input type="button" onclick="printInvoice();" value="Print"> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-08-21T14:11:50.650

试试这个：

1.  将容器的 innerHTML 转储到 iFrame（加上任何特定于打印的 CSS
2.  打印 iFrame 内容。

在[JSFiddle](https://jsfiddle.net/zo14p0ut/)中试用（iframe 在 StackOverflow 的预览中似乎不起作用）

您可以在此处查看代码，但由于 StackOverflow 渲染器中可能存在的安全限制，它无法工作。

```
const printButton = document.getElementById('print-button');

printButton.addEventListener('click', event => {
  // build the new HTML page
  const content = document.getElementById('name-card').innerHTML;
  const printHtml = `<html>
      <head>
          <meta charset="utf-8">
          <title>Name Card</title>
      </head>
      <body>${content}</body>
  </html>`;

  // get the iframe
  let iFrame = document.getElementById('print-iframe');

  // set the iFrame contents and print
  iFrame.contentDocument.body.innerHTML = printHtml;
  iFrame.focus();
    iFrame.contentWindow.print();

});
```

```
<h1>Print your name badge</h1>
<div id="name-card" class="card">
  <p>Hello my name is</p>
  <h2>Max Powers</h2>
</div>
<p>You will be required to wear your name badge at all times</p>
<a id="print-button" class="btn btn-primary">Print</a>

<iframe id="print-iframe" width="0" height="0"></iframe>
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-06-09T16:44:25.843

我有更好的选择，

首先通过类名或id分隔可打印和不可打印部分

```
window.onafterprint = onAfterPrint;

function print(){
  //hide the nonPrintable div  
}

function onAfterPrint(){
  // Visible the nonPrintable div
}
```

```
<input type="button" onclick="print()" value="Print"/>
```

就这样

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-09-05T07:44:28.133

试试这个。

```
export function printSectionOfWebpage(sectionSelector) {
    const $body = jquery('body');
    const $sectionToPrint = jquery(sectionSelector);
    const $sectionToPrintParent = $sectionToPrint.parent();
    const $printContainer = jquery('<div style="position:relative;">');

    $printContainer.height($sectionToPrint.height()).append($sectionToPrint).prependTo($body);

    const $content = $body.children().not($printContainer).not('script').detach();

    /**
     * Needed for those who use Bootstrap 3.x, because some of
     * its `@media print` styles ain't play nicely when printing.
     */
    const $patchedStyle = jquery('<style media="print">')
        .text(
            `
          img { max-width: none !important; }
          a[href]:after { content: ""; }
        `
        )
        .appendTo('head');

    window.print();

    $body.prepend($content);
    $sectionToPrintParent.prepend($sectionToPrint);

    $printContainer.remove();
    $patchedStyle.remove();
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-09-19T13:40:37.010

你可以使用这个[JQuery 插件](https://www.jqueryscript.net/other/jQuery-Plugin-To-Print-Any-Part-Of-Your-Page-Print.html)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-02-04T22:32:01.257

如此处回答：[https](https://stackoverflow.com/a/1072151/421243) ://stackoverflow.com/a/1072151/421243 ，您可以使用 Javascript 将特定部分添加到隐藏框架中，将其聚焦并打印。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-03-11T09:17:43.653

[我编写了一个名为PrintElements](https://github.com/szepeshazi/print-elements)的小型 JavaScript 模块，用于动态打印网页的各个部分。

它通过迭代选定的节点元素来工作，对于每个节点，它会向上遍历 DOM 树直到 BODY 元素。在每个级别，包括初始级别（即要打印的节点的级别），它都将标记类 ( `pe-preserve-print`) 附加到当前节点。然后将另一个标记类 ( `pe-no-print`) 附加到当前节点的所有兄弟节点，但前提是`pe-preserve-print`它们上没有类。作为第三幕，它还将另一个类附加到保留的祖先元素`pe-preserve-ancestor`。

一个非常简单的补充仅打印 css 将隐藏和显示相应的元素。这种方法的一些好处是保留了所有样式，它不会打开新窗口，不需要移动大量 DOM 元素，并且通常不会侵入您的原始文档。

请参阅[演示](https://szepeshazi.github.io/print-elements/example/)，或阅读相关文章[了解更多详细信息](https://medium.com/@aszepeshazi/printing-selected-elements-on-a-web-page-from-javascript-a878ac873828)。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-05-01T18:41:09.590

这对我有用

使用 jQuery 和[https://developer.mozilla.org/en-US/docs/Web/API/Window/open](https://developer.mozilla.org/en-US/docs/Web/API/Window/open)

```
 var $linkToOpenPrintDialog = $('#tvcPrintThisLinkId');
  var windowObjectReference = null;
  var windowFeatures = 'left=0,top=0,width=800,height=900,menubar=no,toolbar=no,location=yes,resizable=no,scrollbars=no,status=no';
  var windowFeaturesStyles = '<link rel="stylesheet" media="print" href="/wp-content/themes/salient-child/dist/css/app-print.css">';

  $linkToOpenPrintDialog.on('click', function(event) {
    openPrintDialog(this.href, this.target, 'tvcInnerCalculatorDivId', event);    
    return false;
  });

  function openPrintDialog(url, windowName, elementToOpen, event) {

    var elementContent = document.getElementById(elementToOpen);

    if(windowObjectReference == null || windowObjectReference.closed) {

      windowObjectReference = window.open( url, windowName, windowFeatures);
      windowObjectReference.document.write(windowFeaturesStyles);
      windowObjectReference.document.write(elementContent.innerHTML);
      windowObjectReference.document.close();
      windowObjectReference.focus();
      windowObjectReference.print();
      windowObjectReference.close();

    } else {
      windowObjectReference.focus();
    };

    event.preventDefault();
  } 
```

应用程序-print.css

```
@media print { 

  body { 
    margin: 0; 
    color: black; 
    background-color: white;
  } 

} 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2016-05-05T07:51:38.627

在`printPageArea()`函数中，传递您要打印的特定 div ID。我从 codexworld.com 找到了这个 JavaScript 代码。

```
function printPageArea(areaID){
    var printContent = document.getElementById(areaID);
    var WinPrint = window.open('', '', 'width=900,height=650');
    WinPrint.document.write(printContent.innerHTML);
    WinPrint.document.close();
    WinPrint.focus();
    WinPrint.print();
    WinPrint.close();
} 
```

完整的代码和教程可以从这里找到 -[如何使用 JavaScript 打印页面区域](http://www.codexworld.com/print-page-area-javascript/)。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2019-10-18T11:03:49.493

试试这个很棒[的 ink-html](https://www.npmjs.com/package/ink-html)库

```
import print from 'ink-html'
// const print = require('ink-html').default

// js
print(window.querySelector('#printable'))
// Vue.js
print(this.$refs.printable.$el) 
```

# jquery-autocomplete - 同时使用类别和重音折叠的 jQuery UI 自动完成

> ID：12997125
> 
> 赞同：4
> 
> 时间：2012-10-21T10:44:50.810
> 
> 标签：jquery-autocomplete, categories, diacritics

我正在使用 jQuery UI 自动完成小部件。我希望能够同时使用两种不同的功能——类别和重音折叠。

我可以使用来自 jQuery UI 网站 (http://jqueryui.com/autocomplete/) 的源代码独立工作。

对于类别：

```
<!doctype html>

<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Autocomplete - Categories</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<style>
.ui-autocomplete-category {
    font-weight: bold;
    padding: .2em .4em;
    margin: .8em 0 .2em;
    line-height: 1.5;
}
</style>
<script>
$.widget( "custom.catcomplete", $.ui.autocomplete, {
    _renderMenu: function( ul, items ) {
        var that = this,
            currentCategory = "";
        $.each( items, function( index, item ) {
            if ( item.category != currentCategory ) {
                ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
                currentCategory = item.category;
            }
            that._renderItemData( ul, item );
        });
    }
});
</script>
<script>
$(function() {
    var data = [
        { label: "anders", category: "" },
        { label: "andreas", category: "" },
        { label: "antal", category: "" },
        { label: "annhhx10", category: "Products" },
        { label: "annk K12", category: "Products" },
        { label: "annttop C13", category: "Products" },
        { label: "anders andersson", category: "People" },
        { label: "andreas andersson", category: "People" },
        { label: "andreas johnson", category: "People" }
    ];

    $( "#search" ).catcomplete({
        delay: 0,
        source: data
    });
});
</script>
</head>
<body>

<label for="search">Search: </label>
<input id="search" />

</body>
</html> 
```

对于重音折叠：

```
<!doctype html>

<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Autocomplete - Accent folding</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
$(function() {
    var names = [ "Jörn Zaefferer", "Scott González", "John Resig" ];

    var accentMap = {
        "á": "a",
        "ö": "o"
    };
    var normalize = function( term ) {
        var ret = "";
        for ( var i = 0; i < term.length; i++ ) {
            ret += accentMap[ term.charAt(i) ] || term.charAt(i);
        }
        return ret;
    };

    $( "#developer" ).autocomplete({
        source: function( request, response ) {
            var matcher = new RegExp( $.ui.autocomplete.escapeRegex( request.term ), "i" );
            response( $.grep( names, function( value ) {
                value = value.label || value.value || value;
                return matcher.test( value ) || matcher.test( normalize( value ) );
            }) );
        }
    });
});
</script>
</head>
<body>

<div class="ui-widget">
<form>
<label for="developer">Developer: </label>
<input id="developer" />
</form>
</div>

</body>
</html> 
```

我想我可以用重音折叠示例中的“源”替换类别示例中的“源”（源：数据）（源：函数（请求，响应）...... ) 但这似乎不起作用。

那么，如何将类别的功能和重音折叠功能结合到一个自动完成功能中呢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:02:01.157

我更喜欢将重音折叠逻辑集成到过滤器中，而不是像在 jquery 示例中那样操作源项目。这样您就可以使用所有功能，包括分组类别、搜索词突出显示....

第 1 步：使用不区分重音 (*AI) 正则表达式转义和过滤扩展 $.ui.autocomplete

```
$.extend($.ui.autocomplete, {
    escapeRegexAI: function (value) {
        return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
            .replace("a", "[a|ä|à|â]")
            .replace("c", "[c|ç]")
            .replace("e", "[e|é|è|ê|ë]")
            .replace("i", "[i|î|ï]")
            .replace("o", "[o|ö|ô]")
            .replace("u", "[u|ü|ù|û]")
            .replace("y", "[y|ÿ]");
    },
    filterAI: function (array, term) {
        var matcher = new RegExp($.ui.autocomplete.escapeRegexAI(term), "i");
        return $.grep(array, function (value) {
            return matcher.test(value.label || value.value || value);
        });
    }
}); 
```

第 2 步：使用不区分口音的过滤器调用自动完成功能

```
$( "#developer" ).autocomplete({
    source: function( request, response ) {
        response($.ui.autocomplete.filterAI(data, request.term));
    }
}); 
```

# sql - SQLite 如果列存在解决方案？

> ID：12997127
> 
> 赞同：0
> 
> 时间：2012-10-21T10:44:55.900
> 
> 标签：sql, sqlite

我想创建一个处理表中某些列的触发器。

如果这样的列不存在，触发器必须处理可能发生的错误。

可能吗？我在网上搜索了没有这样的解决方案，因为 SQLite 中不存在“如果存在”命令。

**编辑：** 触发器示例（在评论中要求）：

```
 CREATE TRIGGER trigger_name 
    AFTER UPDATE ON table_1
    BEGIN
       IF exist (select col_1 from table_1) 
          BEGIN 
            update table_1 set col_1='1' where id = '2'
          END
    END 
```

如果 col_1 不存在，它将出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:25:37.993

在 SQLite 中，[触发器只能执行普通的 SELECT/INSERT/UPDATE/DELETE 命令](http://www.sqlite.org/lang_createtrigger.html)；没有任何编程结构，例如`IF`.

如果您确实想执行动态代码，则必须注册自己的用户定义函数（如何完成取决于您使用的语言/驱动程序），并从触发器中调用它：

```
CREATE TRIGGER name
AFTER UPDATE ON table_1
BEGIN
    SELECT my_custom_function();
END 
```

在您的函数中，您可以使用查询检查表结构[`PRAGMA table_info`](http://www.sqlite.org/pragma.html#pragma_table_info)并执行`UPDATE`查询。

# android - 如何在 Android 项目中添加/使用 Action Script 3 框架

> ID：12997128
> 
> 赞同：0
> 
> 时间：2012-10-21T10:45:04.293
> 
> 标签：android, actionscript-3

我正在开发某些 android 项目。我找到了一些我需要的框架，但它是 as3 框架。我如何在我的项目中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:39:42.090

除非您使用 Flash 或 Flex 编写应用程序，否则您应该在别处寻找类似的功能。虽然您可以从 Flash 中调用本机 Java 代码，但反过来是不切实际的。

# c++ - std::fstream 缓冲与手动缓冲（为什么手动缓冲有 10 倍增益）？

> ID：12997131
> 
> 赞同：73
> 
> 时间：2012-10-21T10:45:24.780
> 
> 标签：c++, file, c++11, buffer, fstream

我测试了两种书写配置：

1.  Fstream 缓冲：

    ```
    // Initialization
    const unsigned int length = 8192;
    char buffer[length];
    std::ofstream stream;
    stream.rdbuf()->pubsetbuf(buffer, length);
    stream.open("test.dat", std::ios::binary | std::ios::trunc)

    // To write I use :
    stream.write(reinterpret_cast<char*>(&x), sizeof(x)); 
    ```

2.  手动缓冲：

    ```
    // Initialization
    const unsigned int length = 8192;
    char buffer[length];
    std::ofstream stream("test.dat", std::ios::binary | std::ios::trunc);

    // Then I put manually the data in the buffer

    // To write I use :
    stream.write(buffer, length); 
    ```

我期待同样的结果......

但是我的手动缓冲将性能提高了 10 倍以写入 100MB 的文件，并且与正常情况相比，fstream 缓冲没有任何改变（没有重新定义缓冲区）。

有人对这种情况有解释吗？

编辑：这是新闻：刚刚在超级计算机上完成的基准测试（Linux 64 位架构，持续英特尔至强 8 核，Lustre 文件系统和......希望配置良好 ![基准](../Images/ca4191e4a04fdebebf4bc73ef477417b.png) 的编译器）（我不解释原因1kB 手动缓冲区的“共振”...）

编辑 2：以及 1024 B 处的共振（如果有人对此有想法，我很感兴趣）： ![在此处输入图像描述](../Images/df7db1da6f73d62e18c95a96b595fbe2.png)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-21T17:53:16.613

这基本上是由于函数调用开销和间接性造成的。ofstream::write() 方法继承自 ostream。该函数未内联在 libstdc++ 中，这是开销的第一个来源。然后 ostream::write() 必须调用 rdbuf()->sputn() 来进行实际的写入，这是一个虚函数调用。

最重要的是，libstdc++ 将 sputn() 重定向到另一个虚函数 xsputn()，它添加了另一个虚函数调用。

如果您自己将字符放入缓冲区，则可以避免这种开销。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-02-02T15:24:05.630

我想解释一下[第二张图表](https://i.stack.imgur.com/pknmv.png)中峰值的原因是什么。

事实上，使用的虚函数`std::ofstream`会导致性能下降，类似于我们在第一张图片上看到的情况，但它没有给出*为什么当手动缓冲区大小小于 1024 字节时性能最高*的原因。

这个问题涉及到系统调用和内部类的内部`writev()`实现的高成本。`write()``std::filebuf``std::ofstream`

为了展示如何`write()`影响性能，我在我的 Linux 机器上使用该工具进行了一个简单的测试，`dd`以复制具有不同缓冲区大小（`bs`选项）的 10MB 文件：

```
test@test$ time dd if=/dev/zero of=zero bs=256 count=40000
40000+0 records in
40000+0 records out
10240000 bytes (10 MB) copied, 2.36589 s, 4.3 MB/s

real    0m2.370s
user    0m0.000s
sys     0m0.952s
test$test: time dd if=/dev/zero of=zero bs=512 count=20000
20000+0 records in
20000+0 records out
10240000 bytes (10 MB) copied, 1.31708 s, 7.8 MB/s

real    0m1.324s
user    0m0.000s
sys     0m0.476s

test@test: time dd if=/dev/zero of=zero bs=1024 count=10000
10000+0 records in
10000+0 records out
10240000 bytes (10 MB) copied, 0.792634 s, 12.9 MB/s

real    0m0.798s
user    0m0.008s
sys     0m0.236s

test@test: time dd if=/dev/zero of=zero bs=4096 count=2500
2500+0 records in
2500+0 records out
10240000 bytes (10 MB) copied, 0.274074 s, 37.4 MB/s

real    0m0.293s
user    0m0.000s
sys     0m0.064s 
```

如您所见：*缓冲区越小，写入速度越低，因此`dd`在系统空间中花费*的时间越多。因此，当缓冲区大小减小时，读/写速度会降低。

但是*为什么在主题创建者手动缓冲测试中手动缓冲大小小于 1024 字节时速度会达到峰值*？*为什么它几乎是恒定的*？

解释与`std::ofstream`实现有关，尤其是与`std::basic_filebuf`.

默认情况下，它使用 1024 字节缓冲区（BUFSIZ 变量）。因此，当您使用小于 1024 的片段写入数据时，`writev()`（不是`write()`）系统调用至少会为两个`ofstream::write()`操作调用一次（片段的大小为 1023 < 1024 - 第一个写入缓冲区，第二个强制写入第一个和第二）。基于此，我们可以得出结论，`ofstream::write()`速度不依赖于峰值之前的手动缓冲区大小（`write()`很少调用至少两次）。

`ofstream::write()`当您尝试使用call一次写入大于或等于 1024 字节的缓冲区时，`writev()`系统调用会为每个`ofstream::write`. 因此，您会看到当手动缓冲区大于 1024（峰值之后）时速度会增加。

此外，如果您想设置`std::ofstream`缓冲区大于 1024 缓冲区（例如，8192 字节缓冲区）使用`streambuf::pubsetbuf()`并调用`ostream::write()`以使用 1024 大小的块写入数据，您会惊讶于写入速度将与使用相同1024 缓冲区。这是因为- 内部类 - 的**实现`std::basic_filebuf`**`std::ofstream`是硬编码的，以在传递的缓冲区**大于或等于 1024 字节时****强制**`writev()`为每个调用调用系统调用（参见[basic_filebuf::xsputn()](https://gcc.gnu.org/onlinedocs/gcc-4.6.3/libstdc++/api/a00253.html)源代码）。[在2014-11-05](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=63746)报告的 GCC bugzilla 中还有一个未解决的问题。`ofstream::write()`

 **因此，可以使用两种可能的情况来解决这个问题：

*   替换`std::filebuf`为您自己的班级并重新定义`std::ofstream`
*   将必须传递给 的缓冲区`ofstream::write()`划分为小于 1024 的块，并`ofstream::write()`逐个传递给
*   不要将小块数据传递给`ofstream::write()`以避免降低虚拟功能的性能`std::ofstream`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-19T16:56:48.880

我想添加到现有响应中，如果写入大块数据，这种性能行为（来自虚拟方法调用/间接的所有开销）通常不是问题。问题和这些先前的答案似乎被忽略了（尽管可能隐含地理解）是原始代码每次都写入少量字节。只是为了向其他人澄清：如果您正在编写大块数据（〜kB +），则没有理由期望手动缓冲与使用`std::fstream`'s 缓冲有显着的性能差异。**

# jquery - 获取jquery masonry中任意元素的偏移量，如anchor或img

> ID：12997132
> 
> 赞同：0
> 
> 时间：2012-10-21T10:45:57.197
> 
> 标签：jquery, jquery-masonry

我用 jquery masonry 制作页面中的图像列表，并根据砌体效果加载结果正确，但是`when i user the`

```
 function scrollToAnchor(aid) {
        var aTag = $("a[id='" + aid + "']");
        $('html,body').animate({ scrollTop: aTag.offset().top }, 'slow');
    } 
```

我用位置更改“atag.offset”但无法获得正确的位置或元素的偏移量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:30:11.417

如果您可以将 Masonry 用作同位素模式，则可以访问[此处描述](http://isotope.metafizzy.co/docs/options.html)的 itemPositionDataEnabled 方法来公开每个元素的位置，以便滚动到它。常规滚动到方法不起作用，因为每个元素都绝对定位在相对定位的容器 div 中。

# jquery - 如何逐个循环播放第 n 个孩子？

> ID：12997133
> 
> 赞同：1
> 
> 时间：2012-10-21T10:45:59.173
> 
> 标签：jquery

我想让一个框（#timeUnit）动画到 100px，然后回到 0px，然后是另一个 div（.fiveOne），我想让 nth-child(1) 消失。然后，框转到 100px 并返回，nth-child(2) 消失。连续5次。

在我下面的代码中，盒子动画到 100，回到 0，然后 nth-child(5) 消失，然后盒子动画到 100，回到 0，不再有 nth-child 盒子消失！就像 i 在运行之前评估为 5 一样。

```
$(function() {
 for (var i=0; i<5; i++) {
   $("#timeUnit").animate({width:100px},1000).animate({width:0},0,function(){
    $('.fiveOne .five:nth-child(' + i + ')').css({opacity:0});
   });
 }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T12:04:49.280

你得到的效果是因为当内部函数运行时， for 循环已经完成并且`i == 5`.

解决方法是将 i 的每个值捕获在闭包中，如下所示：

```
$(function() {
    var $fiveKids = $('.fiveOne .five').children();
    function makeClosure(i) {
        return function() {
            $fiveKids.eq(i).css({opacity:0});
        }
    }
    for (var i=0; i<$fiveKids.length; i++) {
        $("#timeUnit").animate({'width':'100px'},1000).animate({width:0},0, makeClosure(i));
    }
}); 
```

笔记：

*   `makeClosure()`是一个返回函数的函数，这有点令人兴奋，但在函数是可以传递的第一类对象的语言中很正常。
*   `$("#timeUnit").animate({'width':'100px'},1000)`该过程效率低下，因为在循环中重复引入了延迟。就个人而言，我会完全使用不同的方法，但为了清楚起见，这个版本在这方面与原始版本保持接近。

表达式`makeClosure(i)`在循环中执行，依次捕获闭包中的每个值，并在第二个 chained 完成时最终执行时使返回的函数可以使用`i`正确的值。`i``.animate()`

我认为这会产生你想要的效果。

编辑：上面的代码已更正以适应@DavidThomas 的观点并使其更有效。

# windows-phone - 更新应用信息时出错

> ID：12997134
> 
> 赞同：3
> 
> 时间：2012-10-21T10:45:59.660
> 
> 标签：windows-phone, marketplace

当我尝试更新 xap 和 App Info 时出现此错误（不是在上传时）：

*无法上传应用程序
我们目前无法保存您的信息。稍后再试。*

在“提交错误和警告”中，我收到错误消息：
*市场价格：包括至少一个分销市场*

当我尝试更改应用程序信息时出现问题，它与市场选择有关：

当我手动尝试选择一个市场时，我再次收到第一个错误。
当我选择“分发到除内容规则更严格的市场之外的所有市场”时，我收到第二个错误。
当我选择“以基本价格层分发到所有可用市场”时，我收到第一个错误

xap 的上传很顺利。我在 24 小时前发现了这个问题。

**编辑：**
删除并重新提交似乎是一个解决方案，但你不能触摸应用信息！例如，选择“分发到除内容规则更严格的市场之外的所有市场”会重现上述行为....

# shell - Solaris 上参数 10 及以上的错误替换错误

> ID：12997136
> 
> 赞同：0
> 
> 时间：2012-10-21T10:46:10.793
> 
> 标签：shell, solaris, sh

我需要在脚本中处理 10 多个参数。我在下面的第 9 个参数之后声明和分配。

```
param10=${10}
param11=${11}
param12=${12} 
```

它在linux中运行良好，但在solaris中却不行。我正进入（状态`bad substitution`

任何人都可以帮助我阅读超过 10 个的参数，这应该适用于 solaris 和 linux。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T10:57:54.117

也许过时了，但根据[这个链接](ftp://service.boulder.ibm.com/ps/products/cmvc/doc/tr/tr292332.txt)：

> Bourne shell 仅支持位置参数 $0 到 $9。为了访问参数 10 或更大，您必须使用“shift”命令。Shift 会将 $2 移动到 $1，将 $3 移动到 $2，等等（$0 是被调用的命令的名称，并且从不移动）。此外，您一次可以移动多个位置。例如，您可以使用 $1 到 $9，然后发出命令“shift 9”并再次使用变量 $1 到 $9 处理变量 10 到 19。

# c# - 通过 ajax 发送文本的潜在问题

> ID：12997137
> 
> 赞同：1
> 
> 时间：2012-10-21T10:46:17.927
> 
> 标签：c#, asp.net, ajax

我正在用 asp c# 构建一个 web 应用程序。当我在表单中保存数据时，我不想回帖来保存它，我想通过 Ajax 保存它。我只是想知道系统会遇到通过 ajax 发送文本的任何潜在问题。

发送的最大文本长度约为 500 个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:30:24.057

您可能遇到的问题是文本是否包含可能破坏帖子行的字符。因此，您需要使用`encodeURIComponent(TextToBeSend)`

更多关于编码：http: [//xkr.us/articles/javascript/encode-compare/](http://xkr.us/articles/javascript/encode-compare/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:32:23.057

显然，对服务器的异步 Javascript 调用对于数据传输来说足够可靠。您可以在更复杂的场景中使用 AJAX。

# expression - 评估复数表达式

> ID：12997142
> 
> 赞同：0
> 
> 时间：2012-10-21T10:47:09.390
> 
> 标签：expression, evaluation, complex-numbers

对于评估算术表达式，我使用 Donal Knuth 算法，它将表达式转换为后缀并使用后缀堆栈来解析表达式。我想知道，复数表达式有类似的东西吗？

可以做的事情例如： ((2+8i)*(12+3i)^(1/2))/34+21i

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:53:24.833

相同的技术。您只需定义可以执行的操作，并将操作数类型信息与堆栈中的值一起存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:27:31.487

将'i'定义为一元运算符，将堆栈中的最后一个操作数乘以'i'；您可以将堆栈中的每个值与类型相关联，但这也可以通过始终压入两个数字来处理：实部和显式零。

然后 (2+8i) 被处理为

```
push 2 [and 0]
push 8 [and 0]
push i
-> pop 8 and 0
-> push 0 and 8
push +
-> pop 0 and 8
-> pop 2 and 0
push 2 and 8 
```

我认为这可以将表达式处理为 (2+(2+2)i)，但也可以处理为 (2+2i)i，

# matlab - 网络摄像头视频捕获上的颜色图

> ID：12997143
> 
> 赞同：2
> 
> 时间：2012-10-21T10:47:23.030
> 
> 标签：matlab, video, webcam, color-mapping

我目前正在为一个满足我的网络摄像头项目的 matlab 工作。这是我的代码：

```
vid = videoinput('winvideo');
vidRes = get(vid, 'VideoResolution');
nBands = get(vid, 'NumberOfBands');
hImage = image( zeros(vidRes(2), vidRes(1), nBands));
preview(vid, hImage);
colormap cool; 
```

视频在网络摄像头中显示。但是`colormap cool;`在视频中似乎没有效果。我尝试用虚拟图像替换视频并`colormap cool;`生效。

有什么方法可以让我控制视频的颜色图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:25:54.850

彩色图像（包括视频帧）使用 3 通道 RGB 定义。当您只有 1 个信息通道并将单个值映射到 3 通道 RGB 值时，使用颜色图。

例如：

```
img1 = rand(20,20,3);
imagesc(img); 
colormap hot; % This does nothing because the image has 3 channels

img2 = rand(20,20);
imagesc(img);
colormap hot; % This works because a colormap is being used to map the 1 channel to a color 
```

如果您想为视频使用颜色图，则必须选择 R、G 或 B 通道，或者将单个通道创建为多个通道的组合。

# java - 如果有 100 个同时对 servlet 的 doGet() 请求，它会阻塞其他 99 个请求，直到被调用的 doGet() 返回？

> ID：12997146
> 
> 赞同：5
> 
> 时间：2012-10-21T10:48:31.967
> 
> 标签：java, jakarta-ee, web-applications, servlets

我读到 web 服务器实例化 servlet 一次，然后为对该 servlet 的每个请求调用其`doGet()`和`doPost()`方法。现在，如果有 100 个同时对该 servlet 的请求并且 web 服务器调用`doGet()`了一个这样的请求，它将阻止其他 99 个请求，直到被调用的`doGet()`方法返回？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T10:52:54.473

不，它不会，它只会在 100 个不同线程中的同一个 servlet 实例上调用 doGet()。如果没有空闲线程来处理请求，传入的请求将被阻塞。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T10:53:41.727

不，在正常情况下，会为每个请求创建新线程。

您可以在 servlet 容器中设置每个线程的数量。

您还可以将线程设置为阻塞。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T10:51:57.707

所有请求都将在其自身的单独线程中处理，因此不会阻塞。每当新请求到来时，容器将产生一个新线程来处理它。

这就是 Java Servlet 规范 3.0 关于处理请求的说法

*基本`Servlet`接口定义了处理客户端请求的服务方法。对于 servlet 容器路由到 servlet 实例的每个请求，都会调用此方法。处理对 Web 应用程序的并发请求通常需要 Web 开发人员设计 servlet，这些 servlet 可以处理在特定时间在服务方法中执行的多个线程。通常，Web 容器`servlet`通过在不同线程上并发执行服务方法来处理对相同的并发请求。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-21T10:52:35.887

Web 服务器产生一个线程来服务每个客户端。因此，即使您有一个 servlet，每个方法也将由每个客户端的*不同线程调用。*
因此，您可以理解，不，它不会阻塞。
这就是为什么**您**的开发人员有责任确保您的 servlet 是线程安全的

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-21T10:52:43.843

一般来说，它依赖于 servlet 容器。然而，大多数都是多线程的。它们将在多个线程中调用`doGet()`100 次，因此多个线程可以同时使用同一个 servlet 对象。因此，您必须使您的 servlet 线程安全，否则您的 servlet 似乎在低负载下工作，但当您开始收到更多请求时，它就会神秘地崩溃。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-08T16:31:30.860

> **不。**

因为 doGet 和 doPost 不同步。

方法签名是

```
protected void doGet(HttpServletRequest req, HttpServletResponse resp)
throws ServletException, IOException 
```

因此，您有责任处理其他人在这里提到的多线程场景。

> **是的**

比如说，在代码执行路径中，例如，假设您在 doGet() 方法中调用如下方法

```
doGet(..){

   ObjectApple.doRipe() --> ObjectWater.needMoreWater() 

} 
```

> *   --> 表示第一个方法调用/调用另一个

并且在 ObjectWater 的实现中，你有一个共享资源（为了线程安全，应该同步），比如一个成员变量，那么你所有的其他 99 个线程当然都会被阻塞 - 如果它是一个阻塞的资源/数据结构。

# eclipse - 在 Windows 7 64 位上安装 Eclipse 时出错

> ID：12997148
> 
> 赞同：1
> 
> 时间：2012-10-21T10:49:03.120
> 
> 标签：eclipse, installation

我正在尝试在我的 Windows 7 笔记本电脑上安装 Eclipse。

尝试运行 eclipse.exe 时出现以下错误：

> 必须有 Java 运行时环境 (JRE) 或 Java 开发工具包 (JDK) 才能运行 Eclipse。搜索以下位置后未找到 Java 虚拟机：C:\ProgramFiles (x86)\Eclipse\eclipse\jre\bin\javaw.exe javaw.exe in your current PATH

我知道我的计算机上有一个 JRE，所以我修改了 eclipse.ini 文件以将其指向正确的位置：

```
-vm
C:\Program Files (x86)\Java\jre6\bin 
```

现在，当我运行 eclipse exe 文件时，它开始运行，但随后出现以下错误：

> 无法加载 JNI 共享库“C:\Program Files (x86)\Java\jre6\bin\client\jvm.dll”

我尝试将 javaw.exe 文件添加到 eclipse.ini 中的路径：

```
-vm
C:\Program Files (x86)\Java\jre6\bin\javaw.exe 
```

但随后我收到一条很长的详细错误消息：

```
---------------------------
Eclipse
---------------------------
Java was started but returned exit code=13
C:\Program Files (x86)\Java\jre6\bin\javaw.exe
-Xms40m
-Xmx512m
-XX:MaxPermSize=256m
-jar C:\Program Files (x86)\Eclipse\eclipse\\plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
-os win32
-ws win32
-arch x86_64
-showsplash C:\Program Files (x86)\Eclipse\eclipse\\plugins\org.eclipse.platform_4.2.1.v201209141800\splash.bmp
-launcher C:\Program Files (x86)\Eclipse\eclipse\eclipse.exe
-name Eclipse
--launcher.library C:\Program Files (x86)\Eclipse\eclipse\\plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v20120522-1813\eclipse_1503.dll
-startup C:\Program Files (x86)\Eclipse\eclipse\\plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.overrideVmargs
-exitdata 1e38_58
-vm C:\Program Files (x86)\Java\jre6\bin\javaw.exe
-vmargs
-Xms40m
-Xmx512m
-XX:MaxPermSize=256m
-jar C:\Program Files (x86)\Eclipse\eclipse\\plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar 
---------------------------
OK   
--------------------------- 
```

关于如何让 Eclipse 运行的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T11:22:41.067

确保您的 Eclipse 版本和 JDK 匹配，无论是 64 位还是 32 位，然后在 .ini 文件中设置 JRE 的路径。

我认为你的问题是你有一个 64 位版本的 eclipse 并且你试图用 32 位 JVM 运行它......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T12:36:41.537

确保您已安装 64 位版本的 Java 并且您的 eclipse.ini 指向此 Java 版本。

见[http://blog.janjonas.net/2013-02-09/eclipse-windows-64bit-java-runtime-environment-java-development-kit-must-be-available-java-returned-exit-code-13](http://blog.janjonas.net/2013-02-09/eclipse-windows-64bit-java-runtime-environment-java-development-kit-must-be-available-java-returned-exit-code-13)更多细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T11:28:22.740

**这是一个常见问题**，请检查*i)*您拥有哪个版本的 Java ( `java -version`)，以及*ii)*还要检查您是否使用 x64 JRE 并安装了 x64 Eclipse（或两者的 x86）。

此外，指定`-vm`格式很重要：您应该指定`javaw.exe`文件的完整路径。有关详细信息，请参阅[eclipse.ini 文件的文档](http://wiki.eclipse.org/Eclipse.ini#-vm_value%3a_Windows_Example)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-15T10:15:05.453

对于这个问题，您必须安装第一个最新版本的 java 并安装 eclipse 工作台：[https ://www.eclipse.org/downloads/download.php?file=/oomph/epp/oxygen/R2/eclipse-inst-win64.exe&mirror_id =105](https://www.eclipse.org/downloads/download.php?file=/oomph/epp/oxygen/R2/eclipse-inst-win64.exe&mirror_id=105)。选择eclipse ide并开始安装

# emacs - 在 Emacs 中阻止键盘输入

> ID：12997151
> 
> 赞同：2
> 
> 时间：2012-10-21T10:49:30.780
> 
> 标签：emacs, elisp, kiosk

如何在 Emacs 中阻止键盘输入？

我想要在 Emacs 中实现无法输入的功能。我会将它绑定到某个特定的组合键，并且只恢复输入功能，只需再次按下该组合键即可。我认为这个功能在某些应用程序中被称为“kiosk”。

如果已经没有包，我对实现它的想法或 elisp 代码感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T15:03:52.017

`(setq overriding-terminal-local-map (make-sparse-keymap))`将使您的键盘完全不起作用。和

```
(setq overriding-terminal-local-map
  (let ((map (make-sparse-keymap)))
    (define-key map [?\C-c ?\C-c]
      (lambda () (interactive) (setq overriding-terminal-local-map nil)))
    map)) 
```

可能是一个很好的起点。

# c++ - libc++ 中可能存在的错误？

> ID：12997156
> 
> 赞同：9
> 
> 时间：2012-10-21T10:50:42.497
> 
> 标签：c++, c++11, std, libc++

下面的代码没有用clang 3.1编译，使用libc++（不知道版本，目前Xcode自带的）。它适用于其他标准库。我的代码中是否有错误，或者这是 libc++ 中的错误？

```
#include <map>
#include <string>
using namespace std;

struct A {
  A(const map<int, A>& m) {}
};

struct B {
  map<string, A> m;
}; 
```

我看到的错误是`<utility>`：

```
/usr/lib/c++/v1/utility:241:64: No member named 'value' in 'std::__1::is_nothrow_copy_constructible<A>' 
```

我试图进一步隔离它，但这是我发现的最小示例。有趣的是，当我在第二张地图中替换为时（当我在第一张地图中替换`string`为int时）：`int``int``string`

```
map<string, A> m; // Does not work
map<int, A> m; // Works 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T11:22:29.860

这并不完全是一个错误，我会向您解释原因：

1997 年，在 C++ 标准完成前不久，标准化委员会收到了一个疑问：是否可以创建类型不完整的标准容器？委员会花了一段时间才理解这个问题。这样的事情甚至意味着什么，你到底为什么想要这样做？委员会最终解决了这个问题并提出了这个问题的答案。（这样您就不必跳到最后，答案是“否”。）但是这个问题比答案更有趣：它指向了一种有用的、没有充分讨论的编程技术。标准库不直接支持该技术，但可以使两者共存。

当您声明`const std::map<int, A>&`,`A`仍然不完整并且标准不强制实施者提供对不完整类型的支持时，因此如果您确实需要它并且您可以选择使用`boost`，您可以更改容器并在不支持`boost::container`的编译器中使用标准容器代替不支持这个。

# java - 安装签名的 Eclipse 插件时出错

> ID：12997157
> 
> 赞同：0
> 
> 时间：2012-10-21T10:50:47.537
> 
> 标签：java, eclipse, eclipse-plugin, installation

如此处所述签署 Eclipse 插件后

[http://www.ibm.com/developerworks/opensource/library/os-eclipse-plugin-sigs/index.html](http://www.ibm.com/developerworks/opensource/library/os-eclipse-plugin-sigs/index.html)

安装插件时出现此错误。

> 收集要安装的项目时发生错误会话上下文是：（profile=SGXXProfile，phase=org.eclipse.equinox.internal.p2.engine.phases.Collect，operand=，action=）。下载工件时出现问题：org.eclipse.update.feature,myPlugin.feature,1.0.1.201210210823。MD5 哈希值不如预期。预期：3161fbf11454ed135d19980926143bc3 并找到 0c213a15f4ae34c1b2e65ab43932e308。

什么应该导致这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:25:05.300

一些更新站点有时可能有点不可靠，请在几个小时后尝试安装所需的插件。如果问题仍然存在，请尝试通过邮件列表与开发人员联系以解决问题。

在这种情况下，我认为更新站点中存在问题（缺少定义），ping 开发人员，也许这是一个已知问题。或者下载的文件可能已损坏，您是否使用 Wi-Fi 连接进行安装？

# css - CSS 单一属性类

> ID：12997159
> 
> 赞同：0
> 
> 时间：2012-10-21T10:51:32.330
> 
> 标签：css

随着更多展示性的 html 属性被弃用，我的自然反应是制作单一属性的 CSS 类，例如 .text-align-left{text-align:left}。我的问题是，这是首选还是内联样式？

Stackoverflow 实际上使用了相当多的内联样式。

PS：我知道这不是一个真正的编码问题，它可能会引发争论，但 stackoverflow 是最大的代码堆栈交换，这个问题确实对未来的个人有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T10:59:39.547

无论在 stackoverflow.com 上使用或不使用内联样式的原因是什么，这通常都是一种不好的做法，因为它使维护变得很痛苦。

但是，像您提到的那样的单一属性实用程序类非常冗长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T10:57:11.887

将视觉 (CSS) 和内容 (HTML) 分开是很好的编码，因此绝对单一属性是更好的选择。

# html - 让多个 div 对齐到中心并在同一行上？

> ID：12997161
> 
> 赞同：1
> 
> 时间：2012-10-21T10:51:45.913
> 
> 标签：html, css

所以我为我的网站制作了一组导航按钮，`Photoshop`我想集中按钮，但使用各种`CSS`边距语句或浮动语句只是集中按钮，但它们位于 1 x 4 列而不是同一行（有4 个按钮）。

我网站上的横幅是集中的，我希望按钮集中在它们下方。这是我的代码：

**HTML**

```
<div id="home" class="home">
<img title="Home" src="images/images/home.jpg">
</div>

<div id="iwb" class="iwb" align="center;">
<img title="IWB" src="images/images/iwb.jpg">
</div>

<div id="presentations" class="presentations">
<img title="Presentations" src="images/images/presentations.jpg">
</div>

<div id="internet" class="internet">
<img title="internet" src="images/images/net.jpg">
</div> 
```

**CSS**

```
.home {
display: block;
width: 188px;
height: 50px;
background: url(images/images/home.jpg) bottom;
text-indent: -99999px;
  }

.home:hover {
background-position: 0 0;
}

.iwb {
display: block;
width: 188px;
height: 50px;
background: url(images/images/iwb.jpg) bottom;
text-indent: -99999px;
}

.iwb:hover {
background-position: 0 0;
}

.presentations {
display: block;
width: 188px;
height: 50px;
background: url(images/images/presentations.jpg) bottom;
text-indent: -99999px;
}
.presentations:hover {
background-position: 0 0;
}

.internet {
display: block;
width: 188px;
height: 50px;
background: url(images/images/net.jpg) bottom;
text-indent: -99999px;

}
.internet:hover {
background-position: 0 0;

} 
```

我怎样才能让它们集中在我的标题下方的一行中？如果可能，我希望标题和导航栏按钮之间没有垂直空白。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:20:59.453

如果您希望它们出现在同一行，您应该使用`display: inline-block`or`float: left`而不是`display : block`。

您可以在此处查看内联块的示例。

[http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/](http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/)

**编辑：**

当你使用时`display:inline-block`，你需要`font-size:0`像下面这样使用。

[http://jsfiddle.net/xXVCg/1/](http://jsfiddle.net/xXVCg/1/)

如果你不想`font-size:0`，你应该`float:left`像下面这样使用。

[http://jsfiddle.net/xXVCg/](http://jsfiddle.net/xXVCg/)

# c# - CheckBoxList 在页面加载期间动态填充一次

> ID：12997164
> 
> 赞同：0
> 
> 时间：2012-10-21T10:52:07.227
> 
> 标签：c#, visual-studio-2010

我正在使用 Visual Studio 2010 对我的 Web 部件进行编码。

我有一个`CheckBoxList`从我的 SharePoint 中检索内容。

```
SPWeb objCurrentWeb;
SPList objStaffList;
objCurrentWeb = SPContext.Current.Web;

//Using SharePoint object model to retrieve both lists
objStaffList = objCurrentWeb.Lists["Staff List"];

foreach (SPListItem objStaffListItem in objStaffList.Items)
{
    staffList.Items.Add(Convert.ToString(objStaffListItem["Name"]));
    break;
} 
```

我`Button`在这个 webpart 上有另一个来检索`DateTimeControl`. 每当我按下 时`Button`，上面的列表都会在我的`CheckBoxList`.

我如何使它不会添加项目`staffList`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:06:11.583

在该`protected void Page_Load(object sender, EventArgs e)`方法中，使用`if (!IsPostBack){}` 并在括号内编写填充代码的复选框列表。

# ruby-on-rails - ruby on rails link_to 删除方法不起作用

> ID：12997167
> 
> 赞同：16
> 
> 时间：2012-10-21T10:52:46.657
> 
> 标签：ruby-on-rails, forms, link-to

我正在尝试使用以下代码删除帖子：

```
<%= link_to 'Destroy', post, :method => :delete, :onclick => "return confirm('Are you sure you want to delete this post?')" %> 
```

这不起作用......它只是将我重定向回帖子`(posts/:id}`

但是，如果我使用以下代码，它可以工作

```
<%= button_to 'Destroy', post, method: :delete, :onclick => "return confirm('Are you sure you want to delete this post?')" %> 
```

在这种情况下是否有可能`link_to`表现得`button_to`如此？

**编辑：销毁控制器功能**

```
 def destroy
    @post = Post.find(params[:id])
    @post.destroy

    respond_to do |format|
      format.html { redirect_to posts_url }
      format.json { head :no_content }
    end
  end 
```

当我单击销毁按钮时记录：

```
Started GET "/posts/14" for 127.0.0.1 at 2012-10-21 15:38:28 +0300
Processing by PostsController#show as HTML
  Parameters: {"id"=>"14"}
  Post Load (0.4ms)  SELECT `posts`.* FROM `posts` WHERE `posts`.`id` = 14 LIMIT 1
  Rendered posts/show.html.erb within layouts/application (0.6ms)
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 0.8ms)
[2012-10-21 15:38:28] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

路线：

```
 devise_for :users

  resources :users

  resources :posts

  match '/about' => 'about#index'

  # You can have the root of your site routed with "root"
  # just remember to delete public/index.html.
  root :to => 'index#index'

  # See how all your routes lay out with "rake routes"

  # This is a legacy wild controller route that's not recommended for RESTful applications.
  # Note: This route will make all actions in every controller accessible via GET requests.
  # match ':controller(/:action(/:id))(.:format)'
  match '*a', :to => 'error#routing' 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-05-31T11:47:24.877

您必须添加

```
//= require jquery
//= require jquery_ujs 
```

在 javascripts/application.js 文件中

第二，签入布局文件，

```
javascript_include_tag "application" 
```

是否包含？

希望这有帮助。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-21T14:36:25.740

解决方案：

当我创建项目时，我已经从 application.js 中注释掉了这个

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

所以重新添加它解决了问题

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-21T11:03:19.820

您是否在布局文件中包含了这一行？

```
<%= javascript_include_tag "application" %> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-12-06T19:32:26.837

首先尝试检查日志中生成的 HTTP post 方法。如果它是“Get”，它不会在控制器中触发删除操作，无论路由等如何。它必须是一个 HTTP Delete 方法。

在最新版本的 Rails 中，包括 rails 6+，其中包括 jquery UJS 等不是一个选项/简单，您应该使用**button_to 助手而不是 link_to**。它创建一个删除 HTTP 帖子。

[https://apidock.com/rails/ActionView/Helpers/UrlHelper/button_to](https://apidock.com/rails/ActionView/Helpers/UrlHelper/button_to)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-05-26T18:45:24.063

## 没有 jQuery 也可以有一个工作的 link_to

我找到了在没有 jQuery 的情况下为 ruby​​ on rails 创建有效删除链接的最佳过程！我们需要处理三件事：

1.  **在articles_controller.rb**中添加destroy 方法
***   **routes.rb**设置*   **LINK_TO**标记**

 **开始吧...

### 在articles_controller.rb 中添加destroy 方法

首先，我们将添加`def destroy ... end`，`articles_controller.rb`让我们打开：

```
# app/controllers/articles_controller.rb

  def destroy
    @article = Article.find(params[:id])
    @article.destroy
    params[:id] = nil
    flash[:notice] = "Art has been deleted"
    redirect_to :action => :index
  end 
```

这里

1.  在第一行中，我们调用了一个变量“@article”，它将从我们的数据库中找到并选择**rails 控制台上文章的****ID**参数。然后，
***   在第 2 行中，@article 变量将在控制台中执行销毁命令。然后，*   在第 3 行：id 参数将被删除和*   在第 4 行，应用程序页面中会闪烁一条通知“艺术已被删除”，并且还会在控制台中显示，在数据库中没有找到任何内容。*   在第 5 行，销毁过程完成后，我们将被重定向到文章索引页面。**

 **这是发出破坏命令的主要因素。并使 link_to 工作。

### 设置路由.rb

**但是等待** 我们需要 2 个用于销毁页面的路由，它们是：

1.  GET 协议设置
2.  DELETE 协议设置

在路线中只需添加：

```
 resources :articles, except: [:destroy] # this will add all get request links automatically except destroy link

  post '/articles/new' => 'articles#create'
  post '/articles/:id' => 'articles#update'
  post '/articles/:id/edit' => 'articles#update' # this 3 lines are needed for other forms purpose

  # we need this 2 lines for our delete link_to setup
  delete 'articles/:id/delete' => 'articles#destroy', as: 'articles_delete'
  get '/articles/:id/delete' => 'articles#destroy' 
```

这里

1.  最后第二行是声明**DELETE**方法，

    *   **'articles/:id/delete'**将是每个帖子的帖子链接标记（称为：HTML 中的锚标记）中的链接结构，
    *   **'=>'**将链接结构指向**控制器标签**，即**'articles#destroy'**，
    *   然后我们通过将**设置为：'articles_delete'**来定义路径文本，我们将在link_to标签中将其用作：'articles_delete_path'或'articles_delete_url'。

然后

2.  在最后一行，我们定义了删除链接的获取请求，这将为我们提供一个像“https://2haas.com/articles/1/delete”这样的工作链接，除了“/articles/1/destroy”，这意味着我们可以自定义我们从这 2 种方法设置中删除链接以及更多附加信息..

*最后最甜蜜的删除输出*

### 所需的 link_to 标记

我们可以使用它来获得正确的删除*link_to*标记，这将起作用。

```
<%= link_to 'Delete Article', articles_delete_path, method: :delete %>
<%= link_to 'Delete Article', articles_delete_url, method: :delete %>

<% obj.each do |post| %>
<%= link_to 'Delete Article', articles_delete_path(post), method: :delete %>
<% end %> 
```

**并且除了jQuery之外已经完成了**

感谢您正确阅读此答案。！

**快乐的节目**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-21T11:42:09.867

这是 Rails 的方式：

`<%= link_to 'Destroy', post, confirm: 'Are you sure?', method: :delete %>`

如果帖子没有被删除，那么问题出在您的控制器上。您确定您已正确实施该`#destroy`操作吗？您在服务器日志中得到的输出是什么？

**更新：**将您的操作更改为：

```
def destroy
  @post = Post.find(params[:id])

  respond_to do |format|
    if @post.destroy
      format.html { redirect_to posts_url }
      format.json { head :no_content }
    else
      format.html # do something here
      format.json { head :no_content }
    end
  end
end 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-08T18:30:48.463

如果使用`link_to`with`:delete`方法，您必须确保 javascript 处于活动状态：

> 请注意，如果用户禁用了 JavaScript，则请求将回退到使用 GET。

[如文档](https://apidock.com/rails/v6.0.0/ActionView/Helpers/UrlHelper/link_to)中所见

如果您不想依赖于 javascript，您可以使用[button_to](https://apidock.com/rails/v6.0.0/ActionView/Helpers/UrlHelper/button_to)而不是`link_to`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-23T16:39:43.137

确保参数后面没有空格

```
def destroy
        @post = Post.find(params[:id])
        @post.destroy
        redirect_to posts_path, :notice => "Your post has been deleted successfully."
end 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-03T12:33:05.517

# 检查空格。

我检查了这里的所有评论。所有包含的设置都正确。但是我注意到删除文章不起作用，而删除评论会起作用。在重写了一些代码并到处检查之后，我发现两个文件在编辑器中看起来完全相同，但是一个版本可以工作，一个版本不能工作！

*咖喱博客/app/views/articles/index.html.erb：*

```
<h1>Listing Articles</h1>
<%= link_to 'New article', new_article_path %>
<table>
  <tr>
    <th>Title</th>
    <th>Text</th>
    <th colspan="3"></th>
  </tr>

  <% @articles.each do |article| %>
    <tr>
      <td><%= article.title %></td>
      <td><%= article.text %></td>
      <td><%= link_to 'Show', article_path(article) %></td>
      <td><%= link_to 'Edit', edit_article_path(article) %></td>
      <td><%= link_to 'Delete', article_path(article),
              method: :delete,
              data: { confirm: 'Are you sure?' } %></td>        
    </tr>
  <% end %>
</table> 
```

但是，在查看文件时，`xxdiff`我发现在一个版本中只使用了选项卡，而另一个版本也使用了空白。可能是从教程中复制粘贴代码。因此，用标签替换空白确实解决了问题。****

# visual-studio-2010 - VC 2010 命令行 x64 拾取错误的 libcmt.lib

> ID：12997168
> 
> 赞同：0
> 
> 时间：2012-10-21T10:52:50.317
> 
> 标签：visual-studio-2010, platform-sdk

这里一定有我想念的东西。我已经在环境正常的情况下设置了 vcvars64.bat，编译和链接几乎所有我的库都工作得很好，除了 libcmt.lib。（MSVCRT.lib 的 /MT 版本。）这包含在 32 位 VC 2010 中，但我使用的是与 Platform SDK 7.1 一起安装的 amd64 文件夹中的 cl.exe 和 link.exe，所以我有不知道为什么要捡这个。

这是我的命令行：

```
link.exe /DLL /nologo /INCREMENTAL:NO /LIBPATH:C:\dev\Python31\libs /LIBPATH:C:\dev\Python31\PCbuild\amd64 ws2_32.lib advapi32.lib kernel32.lib /EXPORT:PyInit_winrandom build\temp.win-amd64-3.3\Release\src/winrand.obj /OUT:build\lib.win-amd64-3.3\Crypto\Random\OSRNG\winrandom.pyd /IMPLIB:build\temp.win-amd64-3.3\Release\src\winrandom.lib /MANIFESTFILE:build\temp.win-amd64-3.3\Release\src\winrandom.pyd.manifest /VERBOSE 
```

我试过`/nodefaultlib:libcmt`的：导致链接器甚至不看那个库。`libcmt.lib /nodefaultlib:libcmt`以任何一种顺序都只是重新激活相同的行为，它仍然只在旧的错误路径中查找，如详细输出中所示：

```
Searching [SDK]\lib\x64\ws2_32.lib:
Searching [SDK]\lib\x64\advapi32.lib:
Searching [SDK]\lib\x64\kernel32.lib:
Searching [VS]\VC\LIB\libcmt.lib: 
```

我的路径上没有任何 lib 文件夹，并且 %lib% 是“[SDK]\lib\x64;[VS]\VC\LIB”（省略了完整路径）。

我不知道为什么首先在错误的路径上搜索这个库，有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:43:59.090

你的LIB环境变量值不对，应该是`[VC]\lib\amd64`获取到x64版本的CRT libs的目录。

目前还不清楚你是怎么弄错的。您应该使用 vcvarsall.bat，传递“x64”来选择正确的构建环境。如果您传递了“x64”，它会依次调用正确的 .bat 文件 vc\bin\amd64\vcvars64.bat。不要直接使用 vcvars64.bat。

喜欢安装 VS 时创建的预编译快捷方式。您会在开始 + 程序中找到它，请务必选择显示“Visual Studio x64 Win64 命令提示符”的那个。它调用 vsvarsall.bat

# post - 更新存储在另一个表中的特定日期的表行

> ID：12997176
> 
> 赞同：0
> 
> 时间：2012-10-21T10:53:33.120
> 
> 标签：post

我面临的问题是，我有一个表格，其中有支票金额和支票日期字段。所以，有时我可能会过**帐**支票，可能是在 3-4 天之后。所以在这种情况下，在特定日期支票金额应该添加到相关的银行金额中。在这里我需要一些帮助。

# vb.net - 错误=索引超出范围。必须是非负数且小于集合的大小。参数名称：索引"

> ID：12997178
> 
> 赞同：0
> 
> 时间：2012-10-21T10:53:49.140
> 
> 标签：vb.net

我有一个gridview，当我上传我的数据并尝试将其提交到mysql数据库时，我得到了他的错误

“错误=索引超出范围。必须为非负数且小于集合的大小。参数名称：索引”

这是我正在使用的代码，问题出现在地址行上。

```
 For i = 0 To GridView1.Rows.Count - 1
            Using sqlCommand As New MySqlCommand()

                student_id = GridView1.Rows(0).Cells(i).Text.ToString
                age = GridView1.Rows(1).Cells(i).Text.ToString
               adress = GridView1.Rows(2).Cells(i).Text.ToString 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:01:39.100

这里似乎有些不对劲。
您循环遍历 gridview 的行，然后获取行的索引来访问单元格。
可能你想要这个

```
For i = 0 To GridView1.Rows.Count - 1 
    Using sqlCommand As New MySqlCommand() 
       .... 
       student_id = GridView1.Rows(i).Cells(0).Text.ToString 
       age = GridView1.Rows(i).Cells(1).Text.ToString 
       adress = GridView1.Rows(i).Cells(2).Text.ToString 
       ....
    End Using
Next 
```

# java - 将 AWT 画布转换为 Swing

> ID：12997181
> 
> 赞同：1
> 
> 时间：2012-10-21T10:54:15.870
> 
> 标签：java, swing, awt

如何将 AWT Canvas 应用程序移植到轻量级 Swing 组件？

我猜它很简单，可能是扩展组件而不是画布，然后覆盖正确的绘制方法（也许是paintComponent）。

但是，我似乎无法让它工作。它还使用更新方法，我不确定它是做什么的。

我使用的代码在[这里](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CB0QFjAA&url=http%3A%2F%2Fkuoi.com%2F~kamikaze%2FJava%2Fcode%2FTerminal.java&ei=x9KDUNCsJsTNhAeAyYDYDg&usg=AFQjCNEle1aodskU2seSPOXFhk-6uuw9Iw&sig2=u1HHqcQO6znBddbfYXR_ZQ&cad=rja)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T10:57:05.693

Swing 组件具有与 AWT 几乎相同的组件，因为 Swing 构建在 AWT 之上，没有原生对等窗口。

看到这个链接

[http://www.tiki-lounge.com/~raf/jfcmanual/jfc.2.html](http://www.tiki-lounge.com/~raf/jfcmanual/jfc.2.html)

多年来关于该主题的众多博客之一。

# c++ - 使用 RAW 指针对 boost::shared_ptr 变量进行条件初始化

> ID：12997183
> 
> 赞同：1
> 
> 时间：2012-10-21T10:54:26.333
> 
> 标签：c++, pointers, boost, c++11, shared-ptr

我需要根据条件初始化 boost::shared_ptr 。下面的示例代码描述了我正在寻找的场景。

```
class A{};
class B:public A{};
class C:public A();

void some_func(int opt)
{
   boost::shared_ptr<A> abstract_ptr;
   if(opt==RELEVENT_TO_B)
   {
      abstract_ptr(new B);
   }
   else
   {
      abstract_ptr(new C);
   }
} 
```

我知道，上面的代码示例是错误的。`boost::shared_ptr<A> Abstract_ptr`在第二行中，`some_func()`将创建一个 shared_ptr 对象，其带有不带参数的 shared_ptr constrcutor，并且由于没有定义赋值运算符并且在初始化后没有 shared_ptr 采用原始指针，因此 if-else 中的代码是错误的。

我的问题是，如何使用 boost::shared_ptr 适度地实现这一点（如 some_func 中所示的条件初始化）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T11:01:53.340

您可以[使用`.reset()`](http://www.boost.org/doc/libs/1_51_0/libs/smart_ptr/shared_ptr.htm#reset)将原始指针放入共享指针。

```
 boost::shared_ptr<A> abstract_ptr;
   if (opt == RELEVENT_TO_B)
      abstract_ptr.reset(new B);
   else
      abstract_ptr.reset(new C); 
```

您也可以直接为其分配一个共享 ptr：

```
 boost::shared_ptr<A> abstract_ptr;
   if (opt == RELEVENT_TO_B)
      abstract_ptr = boost::make_shared<B>();
   else
      abstract_ptr = boost::make_shared<C>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T11:04:20.903

首先，做你已经做的事情不是问题，即重新分配共享指针：

```
boost::shared_ptr<A> abstract_ptr;
if(opt==RELEVENT_TO_B)
   abstract_ptr = boost::make_shared<B>();
else
   abstract_ptr = boost::make_shared<C>(); 
```

上面第一行的效果是在共享指针中包裹了一个空指针，重新赋值的效果是当前包裹的对象的引用计数递减，新分配的对象的引用计数递增. 那里没有问题。

或者，如果你想把它全部放在一行上，你可以使用条件运算符：

```
boost::shared_ptr<A> abstract_ptr = (opt==RELEVANT_TO_B ? boost::make_shared<B>() : boost::make_shared<C>()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T11:05:38.060

这不行吗？

```
void some_func(int opt)
{
   boost::shared_ptr<A> abstract_ptr((opt == RELEVENT_TO_B) ? (A*) new B ? (A*) new C));
} 
```

# eclipse - 如何在 Eclipse 上运行多个主电源，而不是一个一个地单独启动每个主电源

> ID：12997185
> 
> 赞同：1
> 
> 时间：2012-10-21T10:54:46.167
> 
> 标签：eclipse

我正在开发一个至少有 6 个服务器和 3 个客户端的分布式系统（如果我用得少，我就无法正确测试它）。

您可能会猜到单独启动 9 个进程很痛苦（我需要将每个进程放在不同的控制台中）

有没有办法在 eclipse 中创建一个快捷方式来启动所有这些执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:30:16.497

安装[CDT 启动组功能](https://stackoverflow.com/a/11369639/44089)（仅此，而不是整个 CDT）。这使您能够创建一个包含其他启动配置的批处理，例如启动组。

# javascript - 使用原型时，我需要在 DOM 负载上包装所有内容吗？

> ID：12997192
> 
> 赞同：1
> 
> 时间：2012-10-21T10:56:38.097
> 
> 标签：javascript, dom, prototype

我只是想知道这是否有必要：

```
;(function ( $, window, document, undefined ) {

    Cluster.prototype.initiate_test_touch_event_support = function(callback) {
        return (Modernizr.touch) ? callback.call(this) : true;
    };

})( jQuery, window, document ); 
```

或者我可以只使用原型而不在 DOM 负载上包装所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:21:19.157

只要您不尝试操作 DOM（访问元素、向元素添加事件等），您就无需等待文档加载。

这方面的主要例子是 jQuery 和prototype.js。两者都允许脚本使用库自己的文档 onready/load 事件。如果这些库在初始化之前等待文档完成加载，这将是不可能的。

# grails - 通过grails spring security facebook插件登录后重定向？

> ID：12997193
> 
> 赞同：3
> 
> 时间：2012-10-21T10:56:41.360
> 
> 标签：grails, web, grails-plugin

用户通过 spring security facebook 插件登录到应用程序后如何重定向。facebook 插件是否有任何成功处理程序配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:10:05.150

您可以在视图中使用以下 JS：

```
<facebookAuth:init>
    FB.Event.subscribe('auth.login', function() {
         window.location.href = 'url where to redirect'
    });
</facebookAuth:init> 
```

有关完整示例，请参见[https://github.com/splix/s2-facebook-example](https://github.com/splix/s2-facebook-example)

# php - $_POST vs. $HTTP_RAW_POST_DATA vs file_get_contents(php://input)？

> ID：12997204
> 
> 赞同：15
> 
> 时间：2012-10-21T10:57:57.567
> 
> 标签：php

> **可能重复：**
> [PHP 中的 POST 和原始 POST 有什么区别？](https://stackoverflow.com/questions/3173547/whats-the-difference-between-post-and-raw-post-in-php-at-all)

**为了更好地理解，如果您能解释一下$_POST**、**$HTTP_RAW_POST_DATA**和**file_get_contents(php://input)**之间的根本区别，我将不胜感激。

什么时候使用哪个，为什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-21T11:40:15.817

1.  **$_POST**包含 URL 编码*（应用程序/www-url-encoded）*变量，这些变量发布到您的脚本，PHP 会为您解码它们。在处理**HTML FORM**数据时使用这个。
2.  **file_get_contents("php://input")** - 获取原始 POST 数据，当您编写 API 并需要无法被 PHP 解码为 $_POST 的**XML/JSON/... 输入**时，您需要使用它。
3.  **$HTTP_RAW_POST_DATA** - 理论上它与上面的相同，但取决于**php.ini**。

当我需要非**应用程序/www-url-encoded**输入时，我总是使用方法 #2 而不是 #3。

# javascript - 将图像从本地上传到 TinyMCE？

> ID：12997206
> 
> 赞同：8
> 
> 时间：2012-10-21T10:58:11.253
> 
> 标签：javascript, jsp, file-upload, tinymce, wysiwyg

我正在使用 TinyMCE。它工作得很好。但我想要 TinyMCE 中的功能，用户可以从本地盒子/或公共网站上传图像。

我正在使用 Tomcat、JSP 和核心 Java。我发现了几个免费的第三方库，如 ibrowser、imanager、jbimages 等，但它们都使用 PHP，看起来不适合我现有的项目（我不知道 PHP，但我试图将其中一个集成到我现有的项目中它们不起作用并给出一些奇怪的错误）。真的我不确定如何在 TinyMCE 中使用此功能（如果其他编辑器支持 JSP，我可以尝试）？

我在互联网上寻找了类似的问题，但是每个第三方都在使用 PHP，而我使用的是 JSP 而不是 PHP。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T22:26:01.183

我正在维护[tinymce-rails-imageupload](https://github.com/PerfectlyNormal/tinymce-rails-imageupload)，它提供了一个插件，让 TinyMCE 从用户机器上传图像。

现在，这意味着要与 Rails 一起使用，但它不应该需要太多修改才能与其他东西一起使用。或者至少，您可以使用 JavaScript/HTML 作为您自己的插件的基础，该插件可以很好地与 Java 后端集成。

我的插件也不处理图像的存储，并将其留给后端。在 Rails 中，这将通过[CarrierWave](https://github.com/jnicklas/carrierwave)或[Paperclip](https://github.com/thoughtbot/paperclip)完成，我确信 Java 世界中存在一些类似的项目。

我知道这本身并不是一个真正的解决方案，但它可以作为一个起点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-27T01:41:14.550

实际上，您应该一起避免这个问题。如果您查看其他一些使用 TinyMCE 的流行网站，例如 Tumblr，它们实际上避免了这个问题。将上传脚本与 TinyMCE 集成是一项大量工作。另一方面，创建一个上传表单，甚至是一个 AJAX 上传表单，并不太难。

我建议您为 TinyMCE 设置 UI 样式，允许您在 TinyMCE 上方放置其他控件，在本例中为上传图片控件。这只会打开一些标准对话框并允许用户上传图像。完成此操作后，您可以将图像直接注入正文。此外，您可以在您网站的其他地方使用此上传表单，而无需将其与 TinyMCE 紧密耦合。

完成所有这些后，只需让来自 tiny 的图像上传图标执行上传 JavaScript 对话框就不会那么难了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-26T12:44:47.883

我在我的私人 cms 中遇到了类似的问题，今天它是一个常见的基于 java 的 cms。

1.  无论如何，您都需要一个保存图像的服务器。
2.  您必须在网站上显示图像。

您现在可以将图像拖放到 TinyMCE 组件中。TinyMCE 将成为 Drop 上图像的 URL，并将在编辑器中显示一个新的 html-img-tag。

# php - 推动生成的对等点和查询文件名

> ID：12997208
> 
> 赞同：1
> 
> 时间：2012-10-21T10:58:45.287
> 
> 标签：php, codeigniter, propel, peer

我在我的 codeigniter 项目 Codeigniter 2.1.3 Propel 1.6.7 中添加了推进库，但显然推进用户知道它会生成驼峰名称

前任。用户查询.php UsersPeer.php

但是codeigniter在执行时不会接受驼峰名称

```
$this->load->model('UsersQuery'); 
```

有谁知道如何将生成的推进模型类更改为小写文件名？因为如果我只是重命名每个文件，我会在每次生成类时都这样做，而且效率不高。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:38:26.533

我想我明白了，但没有 100% 测试

我已经搜索了项目中包含“Peer”和“Query”的所有文本，并将第一个字母替换为 small。

使用区分大小写的方法完成搜索以完全匹配字符串。

如果我记得每个单词至少有不到 7 个匹配项。（没有把握）

但是有一个字符串看起来像这样 'Peer:: （包括引号），我还将它的第一个字母更改为小字母（我只是更改了需要，但我不知道它是否会影响程序，希望有人可以澄清这一点。）

但是当我测试运行生成的脚本时：propel-gen om propel-gen sql propel-gen insert-sql propel-gen

并尝试加载模型并使用它，

幸运的是没有错误..：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T16:37:49.910

[将这些行添加](http://propelorm.org/documentation/02-buildtime.html#setting-up-propel)到您的`index.php`，非常适合我。

```
<?php
// Include the main Propel script
require_once '/path/to/propel/runtime/lib/Propel.php';

// Initialize Propel with the runtime configuration
Propel::init("/path/to/bookstore/build/conf/bookstore-conf.php");

// Add the generated 'classes' directory to the include path
set_include_path("/path/to/bookstore/build/classes" . PATH_SEPARATOR . get_include_path()); 
```

然后像平常在 PHP 中那样调用 UsersQuery 和 UsersPeer，不需要包含：D。

并确保您的所有控制器/模型都没有与您的 Propel 类命名相同。

# php - htaccess 重写，删除字符串

> ID：12997209
> 
> 赞同：-1
> 
> 时间：2012-10-21T10:58:57.767
> 
> 标签：php, .htaccess, colors, hex

我想制作一个用于检查 colorhex 代码的 php 网站，现在我在检查代码时遇到了一个问题，我的脚本是

```
<?php
echo'
<html><head><style>
body{
background-color:#'.$_GET['c'].';
}
</style></head><body></body></html>';
?> 
```

我输入 url`http://example.com/?c=FF0000` 会将背景颜色显示为红色，但我想隐藏 ?c= 并修改 htaccess 文件，我已经用谷歌搜索并尝试过但没有人工作，有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:07:19.087

Something like this in the server configuration or a .htaccess file:

```
RewriteEngine on
RewriteRule ^([a-zA-Z0-9]{6})$ index.php?c=$1 [L] 
```

If you run into problems with rewriting it always is a very good idea to use the loggin facility apaches rewriting module brings along. Read the manual about the two configuration options `RewriteLog` and `RewriteLogLevel`, they give you a wealth of additional information that helps to understand what is actually going on during the rewrite.

# python - 使用来自 cron 的日志文件重定向 stderr

> ID：12997211
> 
> 赞同：1
> 
> 时间：2012-10-21T10:59:38.053
> 
> 标签：python, shell, logging, crontab

我指的是[Redirect stderr with date to log file from Cron](https://stackoverflow.com/questions/7145544/redirect-stderr-with-date-to-log-file-from-cron)。

基本上，我有以下文件。

```
root@ubuntu:/home/osaka# ls -l cronlog.sh python_1.py shellscript_2.sh
-rwxr-xr-x 1 root root 153 Oct 19 16:49 cronlog.sh
-rwxr-xr-x 1 root root 694 Oct 19 18:28 python_1.py
-rwxr-xr-x 1 root root  96 Oct 19 18:27 shellscript_2.sh 
```

从它的脚本中`python_1.py`调用：`shellscript_2.sh`

```
#python_1.py
#!/usr/bin/python

import os, sys, subprocess

def command():
    return os.system('/home/osaka/shellscript_2.sh')

print "This is " + sys.argv[0]
command() 
```

这`cronlog.sh`正是来自接收者#7145544 的内容：

```
#cronlog.sh
#!/bin/sh

echo "[`date +\%F-\%T`] Start executing $1"
"$@" 2>&1 | sed -e "s/\(.*\)/[`date +\%F-\%T`] \1/"
echo "[`date +\%F-\%T`] End executing $1" 
```

而且我有 cronjob 来运行它并重定向到日志文件，但无论我尝试了什么，都`shellscript_2.sh`先将内容写入日志而不是`python_1.py`.

这是示例日志输出：

```
[2012-10-19-18:45:31] Start executing /home/achinnac/osaka/python_1.py
[2012-10-19-18:45:31] This is /home/achinnac/osaka/shellscript_2.sh
[2012-10-19-18:45:31] This is /home/achinnac/osaka/python_1.py
[2012-10-19-18:45:31] End executing /home/achinnac/osaka/python_1.py 
```

请注意，这条线的右边。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T11:05:24.917

Python 缓冲写入`stdout`和`stderr`，并在退出时刷新缓冲区。您需要强制刷新才能更早地查看来自 python 的消息：

```
import sys
print "This is " + sys.argv[0]
sys.stdout.flush() 
```

# c - # 符号在 C 中是否有任何定义？

> ID：12997221
> 
> 赞同：0
> 
> 时间：2012-10-21T11:02:20.233
> 
> 标签：c, macros, keyword

> **可能重复：**
> [# 和 ## 运算符在 C 中做什么？](https://stackoverflow.com/questions/10843777/what-do-and-operators-do-in-c)

对于这个问题，我似乎无法说出正确的谷歌查询，所以我决定问你们这些好人。

我已经看到 # 被用在宏定义中，但这到底是什么意思？

参考：[http ://www.flipcode.com/archives/Faking_Templates_In_C.shtml](http://www.flipcode.com/archives/Faking_Templates_In_C.shtml)

这就引出了第二个问题，C++ 中的模板是否使用宏实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T11:05:35.323

阅读有关[`cpp`预处理器](http://gcc.gnu.org/onlinedocs/cpp/)的 GCC 文档。`#`符号用于宏参数的[字符串化](http://gcc.gnu.org/onlinedocs/cpp/Stringification.html)`##`，double用于[连接](http://gcc.gnu.org/onlinedocs/cpp/Concatenation.html)

C++ 模板不是作为预处理器文本宏实现的。您可能会觉得它们是产生[抽象语法树](http://en.wikipedia.org/wiki/Abstract_syntax_tree)的宏（C++ 的一些核心子集）。

仅供参考，[Common Lisp](http://en.wikipedia.org/wiki/Common_lisp)有一个更强大的宏系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:05:04.590

`##`将两个标记连接在一起，在 的情况下`type##_InitVector`，内容`type`与`_InitVector`.

# google-drive-api - 新的缩略图功能 - 如何在 Java 中使用

> ID：12997222
> 
> 赞同：1
> 
> 时间：2012-10-21T11:02:49.567
> 
> 标签：google-drive-api

我想使用最新的 Java SDK 来利用 Google Drive 的新缩略图功能。但我得到的只是一个糟糕的请求响应。有人可以发布此功能的工作示例吗？我一直在简单地设置 mimetype 和 Base64 编码的图像数据，但这不起作用——至少对于 file.insert 和 file.patch。

更新：这是我的（简化的）代码片段。如果没有新的缩略图内容，它可以正常工作 - 编码的图像数据看起来也不错：

```
...
Drive drive = getDrive(account);
File file = new File();
file.setTitle(name);
...
HTTPResponse response = urlFetch.fetch(new URL(imageUrl));
String encodedImage = new String(Base64.encodeBase64(response.getContent()));
Thumbnail thumbnail = new Thumbnail();
thumbnail.setImage(encodedImage);
thumbnail.setMimeType("image/png");
file.setThumbnail(thumbnail);
file = drive.files().insert(file).execute(); 
```

这是回应：

```
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 OK
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Bad Request",
    "reason" : "badRequest"
  } ],
  "message" : "Bad Request"
}
    at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:143)
    at com.google.api.client.googleapis.json.GoogleJsonResponseException.execute(GoogleJsonResponseException.java:187)
    at com.google.api.client.googleapis.services.GoogleClient.executeUnparsed(GoogleClient.java:279)
    at com.google.api.client.http.json.JsonHttpRequest.executeUnparsed(JsonHttpRequest.java:207) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:22:12.323

缩略图图像需要编码为 Base64 UrlSafe 字符串。使用

```
String encodedImage = Base64.encodeBase64URLSafeString(response.getContent()); 
```

对图像进行编码解决了这个问题。

# python - 奇怪的 Python 运行时间长后性能下降并消耗大量内存占用

> ID：12997225
> 
> 赞同：0
> 
> 时间：2012-10-21T11:03:46.347
> 
> 标签：python, macos

我编写了一个程序来处理大约 220 万条记录的一些数据。对于每条记录，它将经过一系列 20 次计算，总共需要大约 0.01 秒。为了让它运行得更快，我使用 Python 多进程，通常将我的数据分成 6 个块，并与主进程并行运行，将有效负载分配给进程并协调执行。顺便说一句，作为计算的结果，程序将向数据库写入大约 2200 万条记录。

我在 MacBookPro i7 2.2GHz 上运行它，8GB RAM 在 Python 3.2.2 上运行。数据位于本地 MySQL 服务器上。

该程序启动良好 - 以可预测的方式运行，CPU 平均利用率为 60-70%，我的 Macbook Pro 就像烤箱一样发热。然后它在运行大约 5 小时后变慢，每个核心的 CPU 利用率下降到平均 20%。我当时所做的一些观察是： - 每个 Python 进程消耗大约 480 MB 的实际 RAM 和大约 850 MB 的虚拟 RAM。这些繁重的进程总共有 6 个 - OSX 消耗的总虚拟内存（如 Activity Monitor 所示）约为 300GB

我怀疑性能下降是由于巨大的内存消耗和潜在的高页面交换。

我怎样才能更好地诊断这些症状？长时间运行大型内存对象的 Python 有什么问题吗？真的，我不认为运行 6 小时对于今天的技术来说是沉重的，但是我只有大约半年的 Python 经验，所以......我知道什么？！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:51:31.133

我猜性能下降是因为它正在交换内存和内存。我认为问题不在于程序运行了多长时间 - Python 使用垃圾收集器，因此它没有内存泄漏。

嗯，这并不*完全*正确。垃圾收集器将确保它删除任何无法访问的内容。（换句话说，它不会删除您可以想象访问的内容。）但是，它还不够聪明，无法检测到数据结构何时不会用于程序的其余部分。您可能需要通过将所有对它的引用设置`None`为它才能正常工作来澄清。

1.  你能发布相关的代码吗？

2.  这是一个你需要不止一次给定记录的程序吗？加载记录的顺序对您的程序重要吗？

3.  如果 python 进程只分配了几 GB 的内存，那么为什么你有 300 GB 的已用内存？

# jquery - 如何删除切换事件？

> ID：12997227
> 
> 赞同：0
> 
> 时间：2012-10-21T11:04:00.570
> 
> 标签：jquery

嘿，我在一个元素上设置了一个切换事件，我希望在代码中的某处将其删除。

我怎样才能删除这个？

这是我的切换：

```
$('#album_cell'+currentCell).toggle(function() {                                    

                    $('#album_cell'+currentCell).flip({
                    direction:'lr',
                    dontChangeColor: true,
                    content: captionPane
                    });
                        }, function() {
                    $('#album_cell'+currentCell).revertFlip();
                    }); 
```

翻转是我正在使用的插件，与问题无关。

我似乎无法使用类似的东西：

```
$('#album_cell'+currentCell).off('toggle'); 
```

那么我该如何禁用它呢？我可以将两个切换事件都设置为一些变量然后禁用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T11:07:32.807

因为“切换”是动作而不是事件。尝试删除“点击”事件。请参阅[在 jQuery 中删除事件处理程序的最佳方法？](https://stackoverflow.com/a/210345/926620)

```
$('#album_cell'+currentCell).off('click'); 
```

另请参阅示例[JQuery.off](http://api.jquery.com/off/)以禁用特定操作。

# jquery - Jquery next prev 带文本

> ID：12997228
> 
> 赞同：0
> 
> 时间：2012-10-21T11:04:08.413
> 
> 标签：jquery

大家好，我正在尝试这样做，我有两个按钮，分别称为“下一个”和“上一个”，它们提供隐藏和显示文本。当我单击 prev 按钮时，我的第一个文本必须显示为“1”，它会出现 2 并再次按下，直到我称之为“4”的第四个文本这是 html 部分：

```
<button id="slider1next" >Next</button>
<br>
  <p class="text" id="first_one">1</p>
    <p class="text" id="second_one" style="display:none">2</p>
    <p class="text" id="third_one" style="display:none">3</p>
<p class="text" id="fourth_one" style="display:none">4</p>
<br>
<button id="slider2next" >Prev</button>​ 
```

我想再次按下下一个按钮，我想显示第一个名为“1”的文本，并且我点击上一个按钮它必须显示上一个文本

这是我的脚本

```
$("#slider1next").click(function() {
    var $next = $(".text:visible").hide().next();
    $next.length ? $next.show() : $(".text:first").show();
});

$("#slider2next").click(function() {
    var $next = $(".text:visible").hide().prev();
    $next.length ? $next.show() : $(".text:last").show();
});​ 
```

你也可以看到[http://jsfiddle.net/ganymedes/scXQR/](http://jsfiddle.net/ganymedes/scXQR/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T11:30:46.177

尝试在 Next Method 中使用选择器：

```
$("#slider1next").click(function() {
    var $next = $(".text:visible").hide().next('p');
    $next.length ? $next.show() : $(".text:first").show();
}); 
```

这是对您的代码的编辑[http://jsfiddle.net/scXQR/5/](http://jsfiddle.net/scXQR/5/)

希望这可以帮助。

# c# - HttpClient.GetAsync(url) 将 504 返回到在浏览器中工作的 URL

> ID：12997229
> 
> 赞同：5
> 
> 时间：2012-10-21T11:04:14.207
> 
> 标签：c#, httpclient

我可以手动访问 URL，但使用 .Net 时会超时。

我创建了一个按钮来更轻松地复制场景。有时我会收到一个异常，说任务被取消，否则会出现以下代码片段的 504 错误：

```
 private async void Button_Click_1(object sender, RoutedEventArgs e)
    {
        var url = "http://api.dailyfive.tv/index.php?task=REQUEST_REGIONS&session=TestWin8&app=4&model=TestWin8&ver=1.0.0.7&os=8&region=";
        var output = await ReadHttpResponse(url);
    }
    private async Task<string> ReadHttpResponse(string url)
    {
        try
        {
            using (HttpClient client = new HttpClient())
            {
                HttpResponseMessage response = await client.GetAsync(url);
                return await response.Content.ReadAsStringAsync();
            }
        }
        catch (Exception ex)
        {
        }
        return null;
    } 
```

结果如下：

```
<html>
<head><title>504 Gateway Time-out</title></head>
<body bgcolor="white">
<center><h1>504 Gateway Time-out</h1></center>
<hr><center>nginx/1.2.0</center>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T13:53:47.727

看起来服务器对客户端的用户代理很敏感。当我将这些行添加到您的示例代码中时，代码就变得生动起来：

```
client.DefaultRequestHeaders.UserAgent.Clear();
client.DefaultRequestHeaders.UserAgent.ParseAdd("Chrome/22.0.1229.94"); 
```

（可能有更好的方法 - 我以前没有使用`HttpClient`过。）

顺便说一句，我希望你不会*真的*吞下这样的例外......

# javascript - Calling a parent's function from an iframe

> ID：12997238
> 
> 赞同：0
> 
> 时间：2012-10-21T11:05:33.127
> 
> 标签：javascript, jquery

> **Possible Duplicate:**
> [How to call a function in an iframe from the parent page?](https://stackoverflow.com/questions/4132411/how-to-call-a-function-in-an-iframe-from-the-parent-page)

How Call javascript function inside iframe from parent?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:12:13.063

如果 iframe 不是来自与父页面相同的域（包括使用相同的协议和子域），那么这是不可能的，但如果来自使用相同协议的相同域：

要从 iframe 调用父级具有的函数： `parent.functName()`

要从父级调用 iframe 中的函数： `window.frames.iframeID.functName();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:14:39.903

```
$('#iframeid').get(0).contentWindow.yourfunction() 
```

就是`jQuery`这样

如果你想从 ifreme 调用 parent 中的函数，只需使用

`window.top.yourfunction()`

# javascript - phantom parameter in function

> ID：12997244
> 
> 赞同：0
> 
> 时间：2012-10-21T11:06:22.687
> 
> 标签：javascript

Going through some examples on building a video control panel for an HTML5 element and a a pattern I don't understand popped up here?

[http://dev.opera.com/articles/view/introduction-html5-video/#scripting](http://dev.opera.com/articles/view/introduction-html5-video/#scripting)

in particular:

```
var v = document.getElementById('videoPlayer');
v.addEventListener('timeupdate',updateTimeDisplay,true);

function updateTimeDisplay(e) {
  document.getElementById('timeDisplay').innerHTML = e.target.currentTime;
} 
```

Where did that 'e' come from in the function? What does it reference? Where can I learn more about what it is doing?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:11:19.083

e 是始终传递给由事件触发的函数的事件。在其中，您可以根据事件找到所有信息，例如 X 和 Y 鼠标位置、触发它的元素等等。

在您的示例中， e.target 指的是触发事件的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:09:24.880

That e is the parameter sent into the callback function updateTimeDisplay, by the videoplayer element. The callback is called when the event 'timeupdate' is triggered in the element referenced by the id videoPlayer.

# android - ActionBarSherlock in > Honeycomb application

> ID：12997247
> 
> 赞同：2
> 
> 时间：2012-10-21T11:07:29.940
> 
> 标签：android, actionbarsherlock

Is there any benefit of using ActionBarSherlock instead of native android api, if the application is only targeting HoneyComb and above?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:16:23.117

`ActionBarSherlock`正如@CommonsWare 所说，在 API 14+（冰淇淋三明治）上使用本机 ActionBar。这个图书馆是

> 旨在通过单个 API ( [actionbarsherlock.com](http://actionbarsherlock.com/) )促进在所有版本的 Android 中使用操作栏设计模式

该库将在适当时自动使用本机操作栏。

所以没有多少 Honeycomb 设备（大多数都在升级），如果 Honeycomb 和 ICS 之间的差异对您的应用程序来说不是问题，您不需要使用 ABS。

# visual-studio-2010 - 为什么 git 考虑更改了整个文件，而只是更改了其中的一部分

> ID：12997249
> 
> 赞同：2
> 
> 时间：2012-10-21T11:07:41.677
> 
> 标签：visual-studio-2010, git

我正面临着一个奇怪的情况`git`。我刚刚在一个长文件中编辑了几行，但是当我提交更改时，我看到 git 只是用红色突出显示了整个文件内容。怎么了 ？

我正在使用 git 的 windows GUI

编辑： 我现在记得的一件事是我在最后一次提交中将 .csproj 添加到了 gitignore 列表中。这对此有什么影响吗？

更新：朋友建议的问题来自行尾。我用这个[问题](https://stackoverflow.com/questions/1510798/trying-to-fix-line-endings-with-git-filter-branch-but-having-no-luck/1511273)的[答案解决了它](https://stackoverflow.com/questions/1510798/trying-to-fix-line-endings-with-git-filter-branch-but-having-no-luck/1511273#1511273)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T13:45:36.467

问题是因为**line ending**。

`git config core.autocrlf`设置为**true**。我使用了这 2 篇文章中提到的解决方案

[处理行尾](https://help.github.com/articles/dealing-with-line-endings)

[尝试使用 git filter-branch 修复行尾，但没有运气](https://stackoverflow.com/questions/1510798/trying-to-fix-line-endings-with-git-filter-branch-but-having-no-luck/1511273#1511273)

并将其设置为**false**。它解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-26T22:39:05.090

我们在 Windows 上的 Visual Studio 2015 (vs2015) 中遇到了同样的问题，我们编辑过但未完成所有编辑的文件。

我唯一要添加到另一个答案以及我们最终做的是尝试通过注释掉来编辑解决方案根目录的**.gitattributes**

```
* text=auto 
```

成为

```
#* text=auto 
```

根据[这篇](https://help.github.com/articles/dealing-with-line-endings/#per-repository-settings)文章，此条目会覆盖 git config，因此即使您删除 git config 中的其他条目，问题仍然可能发生。

评论 .gitattributes 删除了虚假编辑，取消评论它为我们添加了虚假编辑。

这个答案最初来自哪里：[文件在 git clone 之后直接显示为已修改](https://stackoverflow.com/questions/5009096/files-showing-as-modified-directly-after-git-clone)

# objective-c - Create method for NSString

> ID：12997250
> 
> 赞同：0
> 
> 时间：2012-10-21T11:08:05.760
> 
> 标签：objective-c

I want to create a method in Obj C taking a NSString and checking if the string is capitalized. Where do I declare it, another .m file?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:13:38.470

您可以在将使用该方法的文件中为它创建一个类别，如果有很多类将使用它，则可以在另一个新文件中创建一个类别。

```
@interface NSString (Capitalized)
-(BOOL)isCapitalized;
@end 
```

# java - 每当我向远程数据库添加内容时如何通知应用程序用户？

> ID：12997251
> 
> 赞同：1
> 
> 时间：2012-10-21T11:08:14.203
> 
> 标签：java, android

我开发了我的第一个安卓应用程序。该应用程序的作用：我使用网站上的新结果更新 mysql 数据库，而 android 应用程序从 mysql 获取相同的数据。我正在使用 JSON。

我希望它做什么：我希望它通知用户结果已更新。它可以是及时通知或正常通知。不要紧。我只想让用户在我更新数据库后立即知道它。

供您参考的代码： 1) 在应用程序内显示结果的 Java 代码。

```
 package in.thespl.spl.notifications;

  import java.util.ArrayList;
  import java.util.HashMap;
  import java.util.List;

  import org.apache.http.NameValuePair;
  import org.json.JSONArray;
  import org.json.JSONException;
  import org.json.JSONObject;

  import android.app.ListActivity;
  import android.app.ProgressDialog;
  import android.content.Intent;
  import android.os.AsyncTask;
  import android.os.Bundle;
  import android.util.Log;
  import android.view.View;
  import android.widget.AdapterView;
  import android.widget.AdapterView.OnItemClickListener;
  import android.widget.ListAdapter;
  import android.widget.ListView;
  import android.widget.SimpleAdapter;
  import android.widget.TextView;

  public class AllResultsActivity extends ListActivity {

// Progress Dialog
private ProgressDialog pDialog;

// Creating JSON Parser object
JSONParser jParser = new JSONParser();

ArrayList<HashMap<String, String>> productsList;

// url to get all products list
private static String url_all_products = "http://mydomain.in/fetchresult.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_PRODUCTS = "result";
private static final String TAG_PID = "rid";
private static final String TAG_NAME = "rname";
private static final String TAG_INFO = "rinfo";

// products JSONArray
JSONArray products = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.all_products);

    // Hashmap for ListView
    productsList = new ArrayList<HashMap<String, String>>();

    // Loading products in Background Thread
    new LoadAllProducts().execute();

    // Get listview
    ListView lv = getListView();

    // on seleting single product
    // launching Edit Product Screen
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String pid = ((TextView) view.findViewById(R.id.rid)).getText()
                    .toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),
                    AllResultsActivity.class);
            // sending pid to next activity
            in.putExtra(TAG_PID, pid);

            // starting new activity and expecting some response back
            startActivityForResult(in, 100);
        }
    });

}

// Response from Edit Product Activity
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    // if result code 100
    if (resultCode == 100) {
        // if result code 100 is received
        // means user edited/deleted product
        // reload this screen again
        Intent intent = getIntent();
        finish();
        startActivity(intent);
    }

}

/**
 * Background Async Task to Load all product by making HTTP Request
 * */
class LoadAllProducts extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(AllResultsActivity.this);
        pDialog.setMessage("Loading results. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting All products from url
     * */
    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

        // Check your log cat for JSON reponse
        Log.d("All Products: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // products found
                // Getting Array of Products
                products = json.getJSONArray(TAG_PRODUCTS);

                // looping through All Products
                for (int i = 0; i < products.length(); i++) {
                    JSONObject c = products.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_PID);
                    String name = c.getString(TAG_NAME);
                    String info = c.getString(TAG_INFO);
                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_PID, id);
                    map.put(TAG_NAME, name);
                    map.put(TAG_INFO, info);

                    // adding HashList to ArrayList
                    productsList.add(map);
                }
            } else {
                // no products found
                // Launch Add New product Activity
               // Intent i = new Intent(getApplicationContext(),
                //       AllResultsActivity.class);
                // Closing all previous activities
                //i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
               // startActivity(i);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(
                        AllResultsActivity.this, productsList,
                        R.layout.list_item, new String[] { TAG_PID,
                                TAG_NAME, TAG_INFO },
                        new int[] { R.id.rid, R.id.rname, R.id.rinfo});
                // updating listview
                setListAdapter(adapter);
            }
         });

       }

   }
  } 
```

知道如何在其中添加通知功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:18:35.017

你有多种方法可以做到这一点。

第一种方法是轮询服务器以请求更新。该解决方案效率不高，必须选择许多参数：更新时间-> 将影响电池和反应性。

第二种方法是使用 Google Cloud Messaging。它提供了一种将数据从服务器推送到用户的解决方案。实现起来真的很简单。（花了我几个小时）。安卓文档。 [http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html) 这第二种方式优化了电池，即使您的应用程序关闭，您也可以收到推送。

选择更适合您需求的方式。

希望它可以帮助你。

# javascript - 鼠标悬停在图像上时的快速预览功能

> ID：12997253
> 
> 赞同：2
> 
> 时间：2012-10-21T11:08:48.317
> 
> 标签：javascript, asp.net, web-services, c#-4.0, jquery

我是 ASP.net 的初学者，在这里是新手所以我希望我遵循这里的帖子指南

假设我搜索了一个产品目录，结果它显示了一个带有 Icon 的多个产品，当我将鼠标悬停在它上面时，我希望它执行一个代码，从数据库中获取多个文本并将其显示为弹出窗口或类似工具提示的黄色小框.

出于优化目的，我希望代码在将鼠标悬停在链接上时执行，因此它只能在我将鼠标悬停在图标上时获取信息

我知道它需要 JQuery（我几乎一无所知）并将其绑定在悬停事件上，这将触发 ajax 查询并返回数据，但除此之外我是无能的，因为我不知道如何执行实际过程

你应该怎么做？请告诉我使您知道如何做类似事情的资源（书籍/教程）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:14:56.827

这是一个关于如何将[ajax 与 asp.net webservice](http://dotnetguts.blogspot.co.il/2012/01/jquery-ajax-examples-by-calling-aspnet.html)一起使用的小教程。

[jQuery 文档](http://docs.jquery.com/Main_Page)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:33:22.487

您应该寻找 Ajax 或 jQuery 相关教程 对于您的情况，您也可以使用本教程

[AjaxControl 工具包](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)

[在 asp.net 中编辑 gridview 行值的 Ajax ModalPopUpExtender 示例](http://www.aspdotnet-suresh.com/2011/03/how-to-show-modalpopup-to-edit-gridview.html)

[AJAX ModalPopupExtender](http://technico.qnownow.com/ajax-modalpopupextender/)

[在 ASP.NET 和 Ajax 中使用 ModalPopupExtender - 第 9 课 | .net 课程](http://mrbool.com/working-with-modalpopupextender-in-asp-net-and-ajax-lesson-09/24609)

给你几个例子..

# html - 使用在分区内水平对齐文本的问题

> ID：12997255
> 
> 赞同：0
> 
> 时间：2012-10-21T11:09:06.880
> 
> 标签：html, css

 我不知道为什么我有这个麻烦。请看一下截图：

![截屏](../Images/20d1b0d4124831ffced453abd1f092a0.png)

我的CSS看起来像这样：

```
#tabbase {
   display : inline-block;
   width : 230px;
   height : 173px;
   border : 1px solid #3e3e3e;
   background-color : #1b1b1b;
   box-shadow : 0px 0px 4px 2px rgba(0, 0, 0, 0.4) inset;
   margin-top : 6px;
}

#tabbase a {
   display : block;
   height : 43px;
   text-decoration : none;
   font-family : 'Nexa Bold';
   font-size : 24px;
}

#tabbase a p {
   text-align : center;
} 
```

继承人的html：

```
<div id = "tabbase">
   <a id = "blog" href = "#"> <p> Blog </p> </a>
   <a class = "batl" href = "#"> <p> Home </p> </a>
   <a class = "batl" href = "#"> <p> Contact </p> </a>
   <a class = "batl" href = "#"> <p> Samples </p> </a>
</div> 
```

我不知道为什么这在 css 中如此困难，其他一切都很容易。我试过边距、填充、边框、垂直对齐，现在是文本对齐。

为什么它不起作用？

ps：如果有帮助，`<a id = "blog">`标签的背景图片是这个css：

```
#tabbase #blog {
   color : #000000;
   background-image : url('Tab.png');
} 
```

当我使用跨度时，我得到了这个：

![截图 2](../Images/1d7dc3374b6a58c3bded05805640dac8.png)

当我添加`text-align:center;`到锚标签时，我得到了这个： 

[https://dl.dropbox.com/u/107533178/Screen%20shot%202012-10-21%20at%202.18.38%20PM.png](https://dl.dropbox.com/u/107533178/Screen%20shot%202012-10-21%20at%202.18.38%20PM.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:30:42.340

你可以试试这种风格：

```
#tabbase *
{
  text-align:center;
  vertical-align:middle;
} 
```

它将 DIV#tabbase 的所有子项设置为水平和垂直居中。

# php - 重写 PHP 所有 GET 参数 .htaccess

> ID：12997257
> 
> 赞同：-1
> 
> 时间：2012-10-21T11:09:13.327
> 
> 标签：php, .htaccess, mod-rewrite, get

> **可能重复：**
> [mod_rewrite、php 和 .htaccess 文件](https://stackoverflow.com/questions/265898/mod-rewrite-php-and-the-htaccess-file)

希望这发生在 .htaccess 文件中。重写

```
index.php?pagetype=name 
```

到

```
/pagetype/name/ 
```

对所有页面类型执行此操作

```
?user=name
?post=number
?life=sucks ... etc 
```

但想排除

```
/css/
/images/
/js/
/php/
/template/ 
```

所以变量链接仍然有效。

我猜这应该可以工作，但我希望它是最简单的形式，所以我不必每次添加页面类型时都更改 .htaccess 文件。

我对此进行了搜索，但没有发现任何有用的信息。

该站点将只有一个物理访问的文件：index.php，然后通过 $_GET 命令处理其余文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:18:00.283

仅对于您指定的示例，最简单的方法是：

```
 RewriteCond  %{REQUEST_URI}   !^/(css|images|js|php|template)/
 RewriteRule  ^(\w+)/(\w+)/?$  index.php?$1=$2  [QSA,L] 
```

（当然，RewriteCond 可以在规则中写为负前瞻。）

另请参阅[mod-rewrite 标签 wiki](https://stackoverflow.com/tags/mod-rewrite/info)了解更多操作方法。

# razor - 将剃刀视图与车把模板混合

> ID：12997260
> 
> 赞同：1
> 
> 时间：2012-10-21T11:09:40.250
> 
> 标签：razor, handlebars.js

我正在使用带有 Razor 视图引擎的 ASP MVC 来构建 Web 应用程序。

我还在客户端丰富的应用程序框架的某些视图上使用 EmberJS。EmberJS 使用车把模板。

问题是 Visual Studio 失去了对把手脚本选项卡内的 HTML 元素进行颜色编码的能力，如下所示：

```
<script type="text/x-handlebars">
<div>
    <div>@ShowRes.NumberOfNodesInNetwork: {{App.nodesController.arrangedContent.length}}</div>
    <div>@ShowRes.NumberOfLinksInNetwork: {{App.linksController.arrangedContent.length}}</div>
</div>
</scrtip> 
```

script 标签内的 div 元素没有进行颜色编码。

知道如何使 VS2012 忽略脚本标记并简单地将 HTML 元素视为不存在脚本元素吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:55:25.877

看起来如果没有 Visual Studio 的自定义插件，就不可能在车把模板中获得语法高亮。

# java - 在游戏更新循环中调用具有 3 秒时间延迟的函数

> ID：12997265
> 
> 赞同：1
> 
> 时间：2012-10-21T11:10:15.607
> 
> 标签：java, time, delay, slick2d

我最近开始学习如何使用 Slick 编写 Java 游戏。我看过一些教程（来自 Youtube 的 Bucky 的）并在 Slick 的论坛上阅读了很多内容。我目前正在努力解决一个让我完全陷入困境的问题。我试图每 3 秒左右在游戏循环中创建一个新对象。一些人试图在 Slick 论坛上帮助我，但我仍然无法让它工作。我也想过在stackoverflow上问...

一点背景知识：也许你还记得那个古老的 DOS 游戏，你让伞兵从天上掉下来，当他们到达地面时，他们会朝着一门大炮移动。当10进入它时，它会爆炸。作为佳能拥有者，您想在地面前射击所有伞兵。所以，我只在java中这样做:)

对于那些从未使用过 Slick 的人来说，有一个 init() 函数来初始化东西，一个 render() 函数负责将所有内容渲染到屏幕上，一个 update() 函数基本上就是游戏循环本身。所有更新都在那里发生，然后渲染函数相应地渲染。

例如，我正试图每 3 秒从随机 X 中放下伞兵。

有一个包含 queuedObjects 的 ArrayList。每次更新，对象使用一个函数来决定是否部署它的时间，基于从 update() 函数派生的增量。如果是，则该对象将被传输到另一个在渲染函数中调用的 ArrayList。因此，每次将对象传输到 renderList 时，它都会被渲染。问题是，更新方法运行得非常快。所以我最终得到的是所有对象都立即渲染到屏幕上，而不是例如每 3 秒一次 1 个。

我尝试实现 Thread.sleep() 技术。但它不适用于 Slick。我也尝试过使用 TimerTaks 和 schedualer，但我不知道如何使用它......有人可以指点我正确的方向吗？谢谢你！！

伞兵对象：

```
package elements;

import java.awt.Rectangle;
import java.util.Random;

import org.newdawn.slick.Image;
import org.newdawn.slick.SlickException;

public class Paratrooper1 {

//private int strength = 100;
private float yd;
private float x;
private float y;
private int width;
private int height;
private boolean visible;
private Image paratrooperImage;

private int time;

private Random random;

public Paratrooper1() throws SlickException {
    random = new Random();
    paratrooperImage = new Image("/res/paratrooper1.png");
    width = paratrooperImage.getWidth();
    height = paratrooperImage.getHeight();
    this.x = generateX();
    this.y = 0;
    visible = true;
    time = 0;
}

public Image getParaImage(){
    return paratrooperImage.getScaledCopy(0.2f);
}

public void Move(int delta){
    yd += 0.1f * delta;
    if(this.y+yd > 500){
        this.x = generateX();
        this.y = 0;
    }else{
        this.y += yd;
        yd = 0;
    }
}

public int getX(){
    return (int) x;
}

public int getY(){
    return (int) y;
}

public boolean isVisisble(){
    return visible;
}

public void setVisible(boolean tof){
    visible = tof;
}

public Rectangle getBound(){
    return new Rectangle((int)x,(int)y,width,height);
}

private int generateX(){
    return random.nextInt(940)+30;
}

public boolean isReadyToDeploy(int delta) {
    float pastTime = 0;
    pastTime += delta;

    long test = System.currentTimeMillis();
    if(test >= (pastTime + 3 * 1000)) { //multiply by 1000 to get milliseconds
      return true;
    }else{
        return false;
    }
} 
```

}

和游戏代码：

```
package javagame;

import java.util.ArrayList;

import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.Image;
import org.newdawn.slick.Input;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.state.BasicGameState;
import org.newdawn.slick.state.StateBasedGame;

import elements.Paratrooper1;

public class Play extends BasicGameState{

Paratrooper1 para1;

private Image cursor;
private int mousePosX = 0;
private int mousePosY = 0;
private String mouseLocationString = "";
private int score;
private ArrayList<Paratrooper1> renderParatroopers;
private ArrayList<Paratrooper1> queuedParatroopers;

private int time;

public Play(int state){
}

public void init(GameContainer gc, StateBasedGame sbg) throws SlickException{
    score = 0;
    time = 0;

    renderParatroopers = new ArrayList<Paratrooper1>();

    //populate arraylist with paratroopers
    queuedParatroopers = new ArrayList<Paratrooper1>();
    for (int i=0; i<5; i++){
        queuedParatroopers.add(new Paratrooper1());
    }

    cursor = new Image("res/cursor.png");
    cursor.setCenterOfRotation(cursor.getWidth()/2, cursor.getHeight()/2);
    gc.setMouseCursor(cursor.getScaledCopy(0.1f), 0, 0);

    para1 = new Paratrooper1();
}

public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException{
    g.drawString(mouseLocationString, 50, 30);
    g.drawString("Paratrooper location: X:" +para1.getY()+ " Y:" +para1.getY(), 50, 45);
    g.drawString("Current score: " +score, 800, 30);

    //go through arraylist and render each paratrooper object to screen
    if (renderParatroopers != null){
        for (int i = 0; i < renderParatroopers.size(); i++) {
            Paratrooper1 para1 = (Paratrooper1)renderParatroopers.get(i);
            if(para1.isVisisble()){
                g.drawImage(para1.getParaImage(),para1.getX(),para1.getY());
            }
        }       
    }
}

public void update(GameContainer gc, StateBasedGame sbg, int delta) throws SlickException{
    Input input = gc.getInput();
    mousePosX = input.getMouseX();
    mousePosY = input.getMouseY();
    mouseLocationString = "Pointer location --- X:" +mousePosX+ " Y:" +mousePosY;

    for (int i=0; i<queuedParatroopers.size(); i++){
        if (queuedParatroopers.get(i).isReadyToDeploy(delta)){
            renderParatroopers.add(queuedParatroopers.get(i));
        }
    }

    //update the x and y of each paratrooper object.
    //Move() method accepts the delta and is calculated in to 
    //create a new x and y. Render method will update accordingly.
    if(renderParatroopers != null){
        for (Paratrooper1 para : renderParatroopers){
            para.Move(delta);
        }
    }
}   

/*private boolean isItTimeToDeploy(int deltaVar) {
    float pastTime = 0;
    pastTime += deltaVar;

    long test = System.currentTimeMillis();
    if(test >= (pastTime + 3*1000)) { //multiply by 1000 to get milliseconds
      return true;
    }else{
        return false;
    }
}*/

public int getID(){
    return 1;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:04:09.450

*pastTime*是一个局部变量，它应该是一个实例变量。试试这个版本：

```
long pastTime = 0;
public boolean isReadyToDeploy(long delta) {
    if(pastTime < 3 * 1000) { //multiply by 1000 to get milliseconds
        pastTime += delta;
        return false;
    }else{
        pastTime = 0;
        return true;
    }
} 
```

* * *

```
long previousTime = 0;

public void update(GameContainer gc, StateBasedGame sbg, int delta) throws SlickException{
    long tmp = System.currentTimeMillis();
    long customDelta = tmp - previousTime;
    previousTime = tmp;

    Input input = gc.getInput();
    mousePosX = input.getMouseX();
    mousePosY = input.getMouseY();
    mouseLocationString = "Pointer location --- X:" +mousePosX+ " Y:" +mousePosY;

    for (int i=0; i<queuedParatroopers.size(); i++){
        if (queuedParatroopers.get(i).isReadyToDeploy(customDelta)){
            renderParatroopers.add(queuedParatroopers.get(i));
        }
    }

    //update the x and y of each paratrooper object.
    //Move() method accepts the delta and is calculated in to 
    //create a new x and y. Render method will update accordingly.
    if(renderParatroopers != null){
        for (Paratrooper1 para : renderParatroopers){
            para.Move(delta);
        }
    }
} 
```

# ember.js - Ember.js - 第一个简单的教程不起作用

> ID：12997267
> 
> 赞同：0
> 
> 时间：2012-10-21T11:10:21.347
> 
> 标签：ember.js

我编写了第一个 Ember.js 应用程序，但它不能正常工作。

**我的 index.html**

```
 <script type="text/x-handlebars">
      {{#if Songs.totalReviews}}
          Read all my {{Songs.totalReviews}} reviews!
      {{else}}
          There are no reviews right now.
      {{/if}}

      {{#each Songs.songsController}}
          <h3>{{title}}</h3>
          <p>{{artist}} - {{genre}}</p>
      {{/each}}
  </script>

  </body>
  </html> 
```

我的 app.js

```
 Songs = Ember.Application.create({
        mixmaster: 'Andy',
        totalReviews: 1,
        ready: function(){
            alert('Ember sings helloooooooooo!');
        }
      });

      Songs.Song = Ember.Object.extend({
        title: null,
        artist: null,
        genre: null,
        listens: 0
      });

      mySong = Song.create({
        title: 'Son of the Morning',
        artist: 'Oh, Sleeper',
        genre: 'Screamo'
     });

      Songs.songsController = Ember.ArrayController.create({
      content: [],
      init: function(){
          // create an instance of the Song model
          var song = Songs.Song.create({
              title: 'Son of the Morning',
              artist: 'Oh, Sleeper',
              genre: 'Screamo'
          });
          this.pushObject(song);
        }
      }); 
```

但是如果我打开这个页面，我就会得到

```
 Read all my 1 reviews! 
```

歌曲的排列怎么样？我是否以错误的方式构建它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T11:32:45.753

问题在于以下代码段：

```
 mySong = Song.create({
    title: 'Son of the Morning',
    artist: 'Oh, Sleeper',
    genre: 'Screamo'
 }); 
```

这里`Song`没有定义你已经使用`Songs.Song.create`了......修改代码&一切正常，这是[小提琴](http://jsfiddle.net/EsF4R/99/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T04:54:01.913

看来问题是`{{#each Songs.songsController}}`

应该使用`{{#each Songs.songsController.content}}`

问题已经解决了。

# git - 更新 git mv 索引

> ID：12997268
> 
> 赞同：3
> 
> 时间：2012-10-21T11:10:30.270
> 
> 标签：git, merge

**Git 不跟踪重命名**

我有一个文件`dir1/some.class`。我将其复制为`dir2/some.class`并提交+推送。几周后，我删除了该`dir1`版本。

我可以教 git 像移动而不是新文件一样行事吗？因此，我将从其他分支合并的
所有更改实际上都会合并到? `dir1/some.class``dir2/some.class`

我试过了

```
git checkout mybranch
git config merge.renameLimit 100
git merge --no-ff -X rename-threshold=80 master
git config --unset merge.renameLimit 
```

一些文件被合并了。但有些没有。特别是我缺少的是 git log 功能，可以查看`dir2/class`源自过去的更改`dir1/class`，但这并没有发生。

![在此处输入图像描述](../Images/030ce69e96e57fd61feaafa7a208f5a8.png)

**实际上帮助我的是**

重命名阈值低（考虑重命名文件的相似度为 10%）
大 merge.renameLimit（合并期间消耗大量内存）

```
 git checkout mybranch
 git config merge.renameLimit 999999
 git merge --no-ff -X rename-threshold=10 -Xignore-space-change master
 git config --unset merge.renameLimit 
```

另请查看下面标记的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:57:34.347

我会试试这个：在您要合并的分支中，重命名`dir1`为`dir2`（如果需要，您可以在新的临时分支上执行此操作）。然后将其合并到您的主分支中。

# ios - 如何检查 userLocation 的权限

> ID：12997270
> 
> 赞同：0
> 
> 时间：2012-10-21T11:10:37.790
> 
> 标签：ios, ios6, user-permissions, userlocation

有没有办法检查用户是否允许我的应用程序使用他/她的位置坐标？我想在他/她按下按钮提交一些信息之前检查这个，如果用户允许，我只会激活这个按钮。

我的应用程序使用 iOS 6。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T11:16:12.833

在您的`CLLocationManager`实例委托中，实现

```
- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error 
```

方法。如果调用此方法并将其`error`参数设置为`kCLErrorDenied`，则用户尚未启用使用位置服务。您还可以实施

```
- (void)locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status 
```

方法 - 当`status`此回调方法的参数不是`kCLAuthorizationStatusDenied`时，则用户已启用您的应用程序使用他的位置。

[文档在这里。](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-02T14:55:59.507

我在 iOS 上创建了一个易于使用权限的组件。

在我的 Github 中可用：

*   [https://github.com/douglasddf/iOS-Check-Permission](https://github.com/douglasddf/iOS-Check-Permission)

[![在此处输入图像描述](../Images/e3b7dc5b1de09eee8138bbe0dcc4e714.png)](https://i.stack.imgur.com/DnKHs.jpg)

使用块的示例：

```
/*
   User can be choose two enum type for request the location authorization:
     - AuthorizeRequestTypeAlwaysAuthorization
     - AuthorizeRequestTypeWhenInUseAuthorization
     */

    [[IOSCheckPermissions globalInstance] checkPermissionAccessForLocation:self.locationManager
                                                      authorizeRequestType:AuthorizeRequestTypeWhenInUseAuthorization
      successBlock:^{

          // SUCCESS ...

    } failureBlock:^{
        // PERMISSION DENIED ...
    }]; 
```

# android - 带有 EditText 的 AlertDialog，以 EditText 为焦点自动打开软键盘不起作用

> ID：12997273
> 
> 赞同：40
> 
> 时间：2012-10-21T11:11:31.760
> 
> 标签：android, focus, android-edittext, android-softkeyboard, android-alertdialog

我正在尝试进行一段代码工作，它应该在显示后立即将 EditText 集中在 AlertDialog 中，然后自动打开软键盘。相反，它只会让屏幕变暗。

```
Builder builder = new Builder(this);
final EditText input = new EditText(this);
AlertDialog dialog = builder.create();
builder
    .setTitle(R.string.dialog_title_addsubject)
    .setMessage(R.string.dialog_addsubject)
    .setView(input)
    .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            String value = input.getText().toString();
            if (input.getText().toString().trim().length() == 0) {
                Toast.makeText(Main.this, R.string.input_empty, Toast.LENGTH_SHORT).show();
            } else {
                db.insertSubject(value);
                getData();
            }
         }
    })
    .setNegativeButton(android.R.string.cancel, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        }
    });
    input.requestFocus();
    dialog.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE);
    dialog.show(); 
```

我尝试了很多方法来做到这一点，但没有一个奏效。我希望你们能在这里帮助我。提前致谢！

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-10-21T14:51:57.647

好的，我设法让它工作：

```
Builder builder = new Builder(this);
            final EditText input = new EditText(this);
            builder
                .setTitle(R.string.dialog_title_addsubject)
                .setMessage(R.string.dialog_addsubject)
                .setView(input)
                .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        String value = input.getText().toString();
                        if (input.getText().toString().trim().length() == 0) {
                            Toast.makeText(Main.this, R.string.input_empty, Toast.LENGTH_SHORT).show();
                        } else {
                            db.insertSubject(value);
                            getData();
                        }
                        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                        imm.hideSoftInputFromWindow(input.getWindowToken(), 0);
                    }
                })
                .setNegativeButton(android.R.string.cancel, new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                        imm.hideSoftInputFromWindow(input.getWindowToken(), 0);
                    }

                });

                builder.show();
                input.requestFocus();
                InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0); 
```

此方法不需要对话框，因此我可以使用 builder.show() 显示对话框，Sabre 提供的代码打开软键盘。每个按钮中的另一个代码片段会自动关闭软键盘。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-21T12:35:05.620

您可以使用它来代替 `dialog.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE);`：

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0); 
```

之后调用这个`dialog.show();`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-03T10:05:37.023

```
 public void selectContact(Context context) {
        AlertDialog.Builder builder = new AlertDialog.Builder(context);
        builder.setIcon(R.mipmap.icon);
        builder.setTitle(R.string.title);
        builder.setPositiveButton(android.R.string.ok, context);
        builder.setNegativeButton(android.R.string.cancel,context);
        builder.setView(View.inflate(context,
                R.layout.dialog, null));
        AlertDialog alertDialog = builder.create();

        alertDialog.setOnShowListener(this); //Add listener
        alertDialog.show();
    } 
```

在 onShow 中打开键盘：-

```
 @Override
    public void onShow(DialogInterface dialog) {
        EditText editText = (EditText) ((AlertDialog) dialog).findViewById(R.id.number);
        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.showSoftInput(editText, InputMethodManager.SHOW_IMPLICIT);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-18T07:40:51.540

尝试在一秒钟后显示它 -

```
new Handler(Looper.getMainLooper()).postDelayed(new Runnable() {
    input.requestFocus();

    dialog.getWindow().
  setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE); 

    dialog.show();  
}, 1000) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-05T03:39:16.773

这对我有用。请求关注编辑文本，然后在其上发布延迟任务以显示键盘。

```
editTextView.requestFocus()
editTextView.postDelayed(200) {
    ContextCompat.getSystemService(requireContext(), InputMethodManager::class.java)
        ?.showSoftInput(
            editTextView,
            InputMethodManager.SHOW_IMPLICIT,
        )
} 
```

使用`SHOW_FORCED`将保留键盘直到用户手动关闭它，即使他们已经关闭了对话框，所以使用`SHOW_IMPLICIT`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-19T17:01:39.703

在尝试了不同的建议后，最终清除标志并在窗口上设置软输入模式有效。确保**在 dialog.show() 之后**调用它：

```
dialog.window?.apply {
    clearFlags(WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE)
    clearFlags(WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM)
    setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE)
} 
```

# factorial - 有没有一种快速查找 if (n-1) 的方法！能被n整除吗？

> ID：12997274
> 
> 赞同：9
> 
> 时间：2012-10-21T11:12:01.800
> 
> 标签：factorial, iteration

我知道迭代查找 n-1 阶乘然后检查的常用方法。但这具有 O(n) 的复杂性，并且对于大的 n 需要太多时间。有替代方案吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-21T11:14:42.943

是的：如果`n`是素数，显然`(n-1)!`不能被 整除`n`。

If`n`不是素数并且可以写成`n = a * b`with `a != b`then`(n-1)!`可以被整除，`n`因为它包含`a`和`b`。

如果`n = 4`,`(n-1)!`不能被 整除`n`，但如果`n = a * a`是`a`素数 > 2，`(n-1)!`则可以被 整除，`n`因为我们发现`a`和`2a`in `(n-1)!`（感谢 Juhana 在评论中）。

# node.js - 如何在 node.js 的映射迭代器中正确执行异步 I/O？

> ID：12997276
> 
> 赞同：0
> 
> 时间：2012-10-21T11:12:19.067
> 
> 标签：node.js, asynchronous, map

> **可能重复：**
> [不能在异步模块中使用“map”函数](https://stackoverflow.com/questions/9518414/cannot-use-map-function-within-async-module)

我有这样的问题：

```
 var paths = ['path1', 'path2', 'path3', ...]; //Some arbitrary array of paths

    var results; //I need to collect an array of results collected from these paths

results = paths.map(function(path){
  var tempResult;

  GetData(path, function(data){ //Third-party async I/O function which reads data from path
    tempResult = data;
  });

  return tempResult;
});

console.log(results); //returns something like [nothing, nothing, nothing, ...] 
```

我可以想象它为什么会发生（`return tempResult`在异步函数返回任何数据之前触发 - 毕竟它很慢），但不太明白如何使它正确。

我的猜测是[async.map](https://github.com/caolan/async#map)可能会有所帮助，但我无法立即看到。

也许在异步编程方面更有经验的人可能会解释这种方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:46:09.287

您可以尝试以下方法：

```
async.map(paths,function(path,callback){
    GetData(path,function(data){ callback(null,data); });
},function(error,results){
    if(error){ console.log('Error!'); return; }
    console.log(results);
    // do stuff with results
}); 
```

如您所见，您需要将处理结果的代码转移到要传递给`async.map`.

# php - 定位水印php GD

> ID：12997277
> 
> 赞同：-1
> 
> 时间：2012-10-21T11:12:27.663
> 
> 标签：php, gd

我希望水印在图像下方，因此图像的整体高度应该扩大。

这是我的代码：

```
$img_width=imagesx($img);
$img_height=imagesy($img);
$watermark=imagecreatefrompng($watermark);  
$watermark_width=imagesx($watermark);  
$watermark_height=imagesy($watermark);  
$image=imagecreatetruecolor($watermark_width, $watermark_height);  
imagealphablending($image, false);
$dest_x=$img_width-$watermark_width-5;
$dest_y=$img_height-$watermark_height+1;
imagecopy($img, $watermark, $dest_x, $dest_y, 0, 0, $watermark_width, $watermark_height);
imagesavealpha($img, true); 
```

我试过玩 watermark_width 和 height 没有运气。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:00:09.407

1.  您需要创建具有以下尺寸的图像：

    `imagecreatetruecolor(max($img_width,$watermark_width), $img_height + $watermark_height + $margin);`

2.  然后，将图像复制到`(0,0)`

3.  最后，将水印复制到`(0,$img_height + $margin)`

（`$margin`是以像素为单位的图像和水印之间的空间）

**编辑**：

```
$margin    = 5;
$img       = imagecreatefrompng($img_path);
$watermark = imagecreatefrompng($watermark_path);

$img_width  = imagesx($img);
$img_height = imagesy($img);

$watermark_width  = imagesx($watermark);
$watermark_height = imagesy($watermark);

$output_width  = max($img_width, $watermark_width);
$output_height = $img_height + $watermark_height + $margin;

$output = imagecreatetruecolor($output_width, $output_height);
imagesavealpha($output, true);
imagealphablending($output, false);
imagerectangle($output, 0, 0, $output_width, $output_height, imagecolorallocatealpha($output, 0, 0, 0, 127));

imagecopy($output, $img, 0, 0, 0, 0, $img_width, $img_height);
imagecopy($output, $watermark, 0, $img_height + $margin, 0, 0, $watermark_width, $watermark_height);

imagepng($output, $path_to_save); // use null to output
imagedestroy($img);
imagedestroy($output);
imagedestroy($watermark); 
```

# android - Openstreetmap Overlay Osmdroid 示例

> ID：12997283
> 
> 赞同：1
> 
> 时间：2012-10-21T11:14:04.013
> 
> 标签：android, openstreetmap, osmdroid

我正在查看 osmdroid 包中的 SampleWithTilesOverlayAndCustomTileSource 示例，我想知道叠加层来自哪里/叠加层 openfietskaart-rcn 是什么格式 - 它是 Openlayers/WMS 服务吗？如何让我自己的自定义叠加层为此工作例子？它可以与 GeoServer 一起使用吗？我无法找到有关此示例的教程，希望有人可以提示我如何创建自己的图层，例如基于 .kml 文件。谢谢！

```
 this.mCustomTileSource = new XYTileSource("FietsRegionaal", null, 3, 18, 256, ".png",
        "http://overlay.openstreetmap.nl/openfietskaart-rcn/"); 
```

此处示例： [http ://code.google.com/p/osmdroid/source/browse/trunk/OpenStreetMapViewer/src/org/osmdroid/samples/SampleWithTilesOverlayAndCustomTileSource.java?r=829](http://code.google.com/p/osmdroid/source/browse/trunk/OpenStreetMapViewer/src/org/osmdroid/samples/SampleWithTilesOverlayAndCustomTileSource.java?r=829)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T01:41:03.150

自定义平铺源没有指定自定义 URL 方案，因此您可以假设它使用默认实现 - 从上面的基本 URL 开始的 PNG 文件的文件夹结构，然后是 zoom/X/Y.png。编号匹配谷歌地图系统。每个 PNG 是 256 像素的正方形。您可以使用 Mobile Atlas Creator (MOBAC) 创建一组自定义切片，或者我使用名为“mapnik”的库将 KML 转换为切片。瓷砖也可能来自您的 SD 卡。

这是一个很好的网站来展示瓷砖是如何编号的：http: [//www.maptiler.org/google-maps-coordinates-tile-bounds-projection/](http://www.maptiler.org/google-maps-coordinates-tile-bounds-projection/)

MOBAC： http: [//mobac.sourceforge.net/](http://mobac.sourceforge.net/)

地图尼克：http : [//mapnik.org/](http://mapnik.org/)

# javascript - bug .innerHTML IE8 的一种解决方案

> ID：12997287
> 
> 赞同：3
> 
> 时间：2012-10-21T11:14:44.587
> 
> 标签：javascript, innerhtml

我尝试修复 IE8 中的一个错误，该错误会在我使用 innerHTML 时擦除元素中的空白

html 中的一个示例：

**足协**是一个

```
<b>
   <span >Association football</span>
</b>
<span>
    is a 
</span> 
```

当我在 javascript 中执行此操作时：

```
spans=document.getElementsByTagName('span');

for (var i=0;i<spans.length; i++){
  spans[i].outerHTML = spans[i].innerHTML;
} 
```

结果是

**足协**是一个

我需要它不删除空格

> **球**是

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:12:24.873

有一个错误，您可以看到[http://support.microsoft.com/kb/276228](http://support.microsoft.com/kb/276228)

# css - 具有相同属性但值不同的不同 css 类

> ID：12997288
> 
> 赞同：0
> 
> 时间：2012-10-21T11:14:52.077
> 
> 标签：css

我有 2 个包含 background-color 属性的 css 类。一类用于一般元素，另一类用于选定元素。我根据模型中的数据将 selected_element 类放在元素上。这是CSS：

```
.selected_obj {
    background-color: #00EE76
}

.general_obj{
    /* Othe CSS Properties */
    background-color: #d9d9d9;
} 
```

这是我的 JSP：

```
<c:forEach items="${myModel.myCollection}" var="obj">
        <c:choose>
            <c:when test="${obj.id == myModel.selectedObj.id}">
                <div class="selected_obj general_obj">
                    <span>${obj.name}</span>
                </div>
            </c:when>
            <c:otherwise>
                <div class="general_obj">
                    <span>${obj.name}</span>
                </div>
            </c:otherwise>
        </c:choose>
    </c:forEach> 
```

当我查看生成的 HTML 时，我可以在正确的元素上看到 selected_obj 类，但该值被 general_obj 类的背景颜色属性值覆盖。浏览器如何选择正确的值，我该如何克服？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T11:19:15.060

当要应用两个具有相同特异性的冲突规则时，后一个获胜。) 在您的情况下`.general_obj`background-color 规则获胜（= 实际应用），因为它`.specific_obj`遵循 CSS 文件中的规则。

这 - `class="general_obj selected_obj"`HTML 中的更改不会解决问题，因为这两个类仍然具有相同的特异性。

解决此问题的一种明显方法是使用`!important`：

```
.selected_obj {
    background-color: #00EE76 !important;
} 
```

... 作为指定`!important`的样式将覆盖原本应该应用的样式（通过遵循一般的 CSS 级联规则）。

这作为一个快速修复很不错，但我实际上强烈建议不要这样做（原因在[这篇文章](http://coding.smashingmagazine.com/2010/11/02/the-important-css-declaration-how-and-when-to-use-it/)中描述得很好；CSS-Tricks 在这个主题上也有[一个强有力的词](http://css-tricks.com/when-using-important-is-the-right-choice/)）。

相反，您可以...

*   为这种情况制定特定的多类规则，如下所示：

    `.selected_obj, .selected_obj.generic_obj { background-color: #00EE76; }`

*   （强烈建议）修复 CSS 文件，以便首先描述通用类的规则，然后再描述特定类的规则。

实际上，这是一个很好的经验法则：首先处理所有通用的事情，然后处理专业的事情。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:20:24.180

你可以试试：

```
.selected_obj {
    background-color: #00EE76 !important;
} 
```

? 还要注意末尾的分号 (;)。缺少分号会产生错误。

# vb.net - 在 Visual Basic.NET 中禁用字母和特殊字符

> ID：12997290
> 
> 赞同：4
> 
> 时间：2012-10-21T11:15:22.027
> 
> 标签：vb.net

我是 Visual Basic 的新手，我不确定如何禁用字母和特殊字符。

我只希望用户能够输入数字。

我正在使用此代码，我知道有一种更简单的方法可以做到这一点，感谢所有帮助

当我输入字母字符和输入数字时，我得到消息框。当我输入数字时，我不想得到消息框。

```
Private Sub txtCustom_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles txtCustom.KeyDown

    If (e.KeyCode = Keys.Enter) Then

        e.SuppressKeyPress = True

        If (e.KeyCode = Keys.A Or Keys.B Or Keys.C Or Keys.D Or Keys.E Or Keys.F Or Keys.G Or Keys.H Or Keys.I Or Keys.J Or Keys.K Or Keys.L Or Keys.M Or Keys.N Or Keys.O Or Keys.P Or Keys.Q Or Keys.R Or Keys.S Or Keys.T Or Keys.U Or Keys.V Or Keys.W Or Keys.X Or Keys.Y Or Keys.Z) Then

            Beep()
            MsgBox("Please Input A Numerical Value")
            txtCustom.Text = ""

        Else

            RandNumAllow = txtCustom.Text

        End If

    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T13:35:54.577

尝试改用 KeyPress 事件：

```
Private Sub TextBox1_KeyPress(sender As Object, _
                              e As KeyPressEventArgs) Handles TextBox1.KeyPress
  e.Handled = Not Char.IsNumber(e.KeyChar)
End Sub 
```

但这不会阻止某人使用剪贴板。改用 MaskedTextBox 控件可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-22T17:17:03.217

很抱歉，此代码将解决所有问题，从剪贴板复制和特殊字符的 shift + 数字，因为它使用 TextChanged 事件尝试一下。

```
 Dim charactersAllowed As String = "1234567890"
      Private Sub TextBox1_TextChanged(sender As Object, e As EventArgs) Handles TextBox1.TextChanged
    Dim theText As String = TextBox1.Text
    Dim Letter As String
    Dim SelectionIndex As Integer = TextBox1.SelectionStart
    Dim Change As Integer
    For x As Integer = 0 To TextBox1.Text.Length - 1
        Letter = TextBox1.Text.Substring(x, 1)
        If charactersAllowed.Contains(Letter) = False Then
            SystemSounds.Beep.Play()
            theText = theText.Replace(Letter, String.Empty)
            Change = 1
        End If
    Next
    TextBox1.Text = theText
    TextBox1.Select(SelectionIndex - Change, 0)
End Sub 
```

您可以将 charractersAllowed 的值替换为您希望允许的任何字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-07T14:26:40.967

您正在寻找的代码我认为看起来像这样。

对于您尝试控制输入的任何文本或输入框上的按键事件

```
If (e.KeyChar < "0" OrElse e.KeyChar > "9") AndAlso 'restricts anything but number keys
    e.KeyChar <> ControlChars.Back Then 'allows use of backspace
    e.Handled = True
End If 
```

# grails - Grails 在启动时（运行时）抛出 SVNAuthenticationException，注意我没有安装 svn 插件

> ID：12997292
> 
> 赞同：11
> 
> 时间：2012-10-21T11:15:41.720
> 
> 标签：grails

这是启动时的日志

```
| Compiling 342 source files.
| Error Compilation error: startup failed:
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 19: unable to resolve class org.tmatesoft.svn.core.wc.SVNStatus
 @ line 19, column 1.
   import org.tmatesoft.svn.core.wc.SVNStatus
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 7: unable to resolve class org.tmatesoft.svn.core.SVNProperties
 @ line 7, column 1.
   import org.tmatesoft.svn.core.SVNProperties
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 10: unable to resolve class org.tmatesoft.svn.core.internal.io.dav.DAVRepositoryFactory
 @ line 10, column 1.
   import org.tmatesoft.svn.core.internal.io.dav.DAVRepositoryFactory
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 16: unable to resolve class org.tmatesoft.svn.core.wc.SVNCopyClient
 @ line 16, column 1.
   import org.tmatesoft.svn.core.wc.SVNCopyClient
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 17: unable to resolve class org.tmatesoft.svn.core.wc.SVNCopySource
 @ line 17, column 1.
   import org.tmatesoft.svn.core.wc.SVNCopySource
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 4: unable to resolve class org.tmatesoft.svn.core.SVNDepth
 @ line 4, column 1.
   import org.tmatesoft.svn.core.SVNDepth
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 5: unable to resolve class org.tmatesoft.svn.core.SVNException
 @ line 5, column 1.
   import org.tmatesoft.svn.core.SVNException
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 20: unable to resolve class org.tmatesoft.svn.core.wc.SVNStatusClient
 @ line 20, column 1.
   import org.tmatesoft.svn.core.wc.SVNStatusClient
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 12: unable to resolve class org.tmatesoft.svn.core.internal.io.svn.SVNRepositoryFactoryImpl
 @ line 12, column 1.
   import org.tmatesoft.svn.core.internal.io.svn.SVNRepositoryFactoryImpl
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 3: unable to resolve class org.tmatesoft.svn.core.SVNAuthenticationException
 @ line 3, column 1.
   import org.tmatesoft.svn.core.SVNAuthenticationException
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 24: unable to resolve class org.tmatesoft.svn.core.wc.SVNWCUtil
 @ line 24, column 1.
   import org.tmatesoft.svn.core.wc.SVNWCUtil
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 6: unable to resolve class org.tmatesoft.svn.core.SVNNodeKind
 @ line 6, column 1.
   import org.tmatesoft.svn.core.SVNNodeKind
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 21: unable to resolve class org.tmatesoft.svn.core.wc.SVNStatusType
 @ line 21, column 1.
   import org.tmatesoft.svn.core.wc.SVNStatusType
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 13: unable to resolve class org.tmatesoft.svn.core.io.SVNRepositoryFactory
 @ line 13, column 1.
   import org.tmatesoft.svn.core.io.SVNRepositoryFactory
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 11: unable to resolve class org.tmatesoft.svn.core.internal.io.fs.FSRepositoryFactory
 @ line 11, column 1.
   import org.tmatesoft.svn.core.internal.io.fs.FSRepositoryFactory
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 15: unable to resolve class org.tmatesoft.svn.core.wc.SVNCommitClient
 @ line 15, column 1.
   import org.tmatesoft.svn.core.wc.SVNCommitClient
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 18: unable to resolve class org.tmatesoft.svn.core.wc.SVNRevision
 @ line 18, column 1.
   import org.tmatesoft.svn.core.wc.SVNRevision
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 22: unable to resolve class org.tmatesoft.svn.core.wc.SVNUpdateClient
 @ line 22, column 1.
   import org.tmatesoft.svn.core.wc.SVNUpdateClient
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 23: unable to resolve class org.tmatesoft.svn.core.wc.SVNWCClient
 @ line 23, column 1.
   import org.tmatesoft.svn.core.wc.SVNWCClient
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 8: unable to resolve class org.tmatesoft.svn.core.SVNPropertyValue
 @ line 8, column 1.
   import org.tmatesoft.svn.core.SVNPropertyValue
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 14: unable to resolve class org.tmatesoft.svn.core.wc.ISVNStatusHandler
 @ line 14, column 1.
   import org.tmatesoft.svn.core.wc.ISVNStatusHandler
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnClient.groovy: 9: unable to resolve class org.tmatesoft.svn.core.SVNURL
 @ line 9, column 1.
   import org.tmatesoft.svn.core.SVNURL
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnScmProvider.groovy: 4: unable to resolve class org.tmatesoft.svn.core.wc.SVNWCUtil
 @ line 4, column 1.
   import org.tmatesoft.svn.core.wc.SVNWCUtil
   ^
C:\Users\shravan64\.grails\2.1.0\projects\gurujiAatma\plugins\svn-1.0.2\src\groovy\grails\plugin\svn\SvnScmProvider.groovy: 3: unable to resolve class org.tmatesoft.svn.core.SVNAuthenticationException
 @ line 3, column 1.
   import org.tmatesoft.svn.core.SVNAuthenticationException 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T17:00:49.960

`application.properties`虽然我和我的同事还没有发现发生这种情况的原因（尽管没有在任何内部插件或应用程序本身的或中引用，但 Release 1.0.1 和 SVN 1.0.2 插件被拉入此应用程序`BuildConfig.groovy`），我们发现了一个临时解决方案。

在失败的应用程序中`BuildConfig.groovy`，如果您指定

```
build ":release:2.2.1" 
```

作为依赖，你运行

```
grails uninstall-plugin svn 
```

在您的命令行上，您应该能够继续使用 Grails 2.1.0 并避免出现此编译错误。

如果我能够找出为什么旧版本插件作为依赖项被拉入，我将在此处更新我的答案（我已经炸毁了我的`~/.grails`文件夹以及我的文件夹`~/.ivy2`，所以我真的不知道为什么它被拉入）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T10:29:50.410

我在第一次构建包含对我公司 Grails SVN 存储库中插件的引用的 WAR 文件时遇到了这种情况。我通过将以下内容添加到 BuildConfig.groovy 中的依赖项部分来修复它，该部分取自 svn 插件的依赖项：

```
build("org.tmatesoft.svnkit:svnkit:1.3.5") {
    excludes "jna", "trilead-ssh2", "sqljet"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T04:49:52.057

svn 1.0.2 插件似乎不适用于 grails 2.1.0。降级到 grails 2.0.4 似乎已经解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-28T07:31:04.003

我已经用 svn 1.7 检查了这个项目并且遇到了完全相同的问题。

有朋友提到svnkit对svn版本很敏感。我删除了该项目并使用 svn 1.6 再次检查它，然后编译没有问题。

不用说，我会尽快把这个项目转移到 git 上。:)

# c# - 在 MVC4 中管理图像和媒体文件

> ID：12997294
> 
> 赞同：0
> 
> 时间：2012-10-21T11:16:15.103
> 
> 标签：c#, asp.net-mvc-4

我`bundling`在 MVC4 中用于管理`css`和`js`文件，但我没有找到在 MVC4 中管理/缓存图像和媒体文件的好解决方案。

我应该为此运行另一个静态文件服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:14:51.953

您可以通过 web.config 和[`staticContent/clientCache`](http://msdn.microsoft.com/en-us/library/ms689443.aspx)元素为静态内容配置 IIS 缓存标头。

就像是

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
    <staticContent>
      <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="01:00:00" />
    </staticContent>
  </system.webServer>
</configuration> 
```

对于一小时缓存策略。

# javascript - Javascript 多数组 push() 的区别

> ID：12997296
> 
> 赞同：0
> 
> 时间：2012-10-21T11:16:32.163
> 
> 标签：javascript, dygraphs

我在推送数据时遇到问题。我想为绘图（Dygraphs）准备数据（时间、温度、湿度）。但是当我用这个代码填充可变数据时（见下文）我没有得到图表。

```
for (var i = 0; i < time.length; i++){
  var t = new Date (time[i]);
  data.push(t);
  for(var n = 0; n < 2; n++){
    data.push([data_graph[n][i]]);
  }
} 
```

但是当我离开一个循环并手动编写数组数量（见下文）时，它可以工作并且我得到图表。

```
for (var i = 0; i < time.length; i++){
  var t = new Date (time[i]);
  data.push([t,data_graph[0][i],data_graph[1][i]]);
} 
```

我想到了使用临时变量，但也没有成功。

```
 for (var i = 0; i < time.length; i++){
   var data_temporary = [];
   var t = new Date (time[i]);
   for(var n = 0; n < 2; n++){
     data_temporary.push([data_graph[n][i]]);
   }
   data.push([t,data_temporary]);
 } 
```

所以我的问题是......哪里可能有问题？提前感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:30:00.000

是的，您的三个代码片段会生成三种不同的`data`结构：

1.  `[t, [datagraph…], [datagraph…], t, [datagraph…], [datagraph…], …]`
2.  `[[t, datagraph…, datagraph…], [t, datagraph…, datagraph…], …]`
3.  `[[t, [[datagraph…], [datagraph…]]], [t, [[datagraph…], [datagraph…]]], …]`

顺便说一句，您经常推送单元素数组。

因此，如果您希望 struc#2 由循环生成，请使用

```
for (var i=0; i<time.length; i++) {
    var t = new Date (time[i]);
    var temp = [t]; // or temp=[]; temp.push(t);
    for (var j=0; j<data_graph.length; j++) // or j<2 if that's certain
        temp.push(data_graph[j][i]);
    data.push(temp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:28:31.167

第二个（工作）版本创建一个二维数组，`time.length`其中第一个维度中的元素`[t, x, y]`根据需要包含三个元素。

在第一个版本中，您正在创建一个一维数组`[t0, [x0], [y0], t1, [x1], [y1], ...]`。

您的第三个版本不起作用，因为虽然您`time.length`在第一维中正确创建元素，但元素本身是`[t, [[x], [y]]]`，而不是`[t, x, y]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T11:32:15.480

每次调用 push() 都会在`data`数组中创建一个新元素。因此，在您的第一个示例中，您在外`for`循环的每次迭代中传递 3 个对象，在第三个示例中，您传递一个由时间和两个值组成的数组的对象。但是 dygraph 脚本显然需要由三个元素组成的对象，因此您的第二个示例有效。

# haskell - 无法将预期类型“Double”与实际类型“[c0]”匹配

> ID：12997297
> 
> 赞同：0
> 
> 时间：2012-10-21T11:16:48.243
> 
> 标签：haskell

我有这个解释错误，我不知道出了什么问题

```
module Series where

series :: Double -> Double
series i1 = zipWith (/) (map (i1^)[1..]) (map(\x -> product[1..x]) [1..]) 
```

我的错误是

```
Couldn't match expected type `Double' with actual type `[c0]'
    In the return type of a call of `zipWith'
    In the expression:
      zipWith
        (/) (map (i1 ^) [1 .. ]) (map (\ x -> product [1 .. x]) [1 .. ])
    In an equation for `series':
        series i1
          = zipWith
              (/) (map (i1 ^) [1 .. ]) (map (\ x -> product [1 .. x]) [1 .. ])
Failed, modules loaded: none. 
```

任何人都可以帮忙吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T11:24:12.357

自己用ghci很容易找到答案：

```
> let series i1 = zipWith (/) (map (i1^)[1..]) (map(\x -> product[1..x]) [1..])

> :t series 
series :: (Enum c, Fractional c) => c -> [c] 
```

> 我不知道出了什么问题

您的签名错误，编译器无法将实际函数类型与您的签名匹配。

# python - Python：从数组维度获取随机值

> ID：12997300
> 
> 赞同：1
> 
> 时间：2012-10-21T11:17:08.513
> 
> 标签：python, arrays, random, numpy

我正在尝试从 Python 中数组的一维中获取随机元素。因此，在下面的情况下，我想检索 5 个浮点数中的任何一个。

```
ar = rand(1, 5)

ar = array([[ 0.29889882,  0.84955019,  0.52989055,  0.57220576,  0.16841406]]) 
```

如果有 5 个元素且只有一个维度，我已经能够检索浮点数 `(ar = rand(5, 1)),`

使用：

```
ar[randrange(0, p.size)] 
```

但是如何从单个维度的数组中获取值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:35:32.303

让我们这样说：

```
ar = rand(1, 5)

ar = array([[ 0.29889882, 0.84955019, 0.52989055, 0.57220576, 0.16841406]])

#create a generator object that returns random values from your array

def getGen(array):
    def gen(arr):
        yield arr[:,ramdom.randint(0,(array.size - 1))] #yielding random values
    return gen(array) # returning generator object

genFromArray = getGen(ar) #getting generator
genFromArray() #would return a random value from your array 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:22:05.520

假设您指的是`numpy.array`，您可以使用以下内容：

```
>>> import numpy as np
>>> np.array([[ 0.29889882, 0.84955019, 0.52989055, 0.57220576, 0.16841406]])
array([[ 0.29889882,  0.84955019,  0.52989055,  0.57220576,  0.16841406]])
>>> 
>>> 
>>> ar = np.array([[ 0.29889882, 0.84955019, 0.52989055, 0.57220576, 0.16841406]])
>>> ar[:, random.randint(0,4)]
array([ 0.29889882])
>>> ar[:, random.randint(0,4)]
array([ 0.52989055]) 
```

# c# - XNA 4.0 碰撞检测导致精灵反弹

> ID：12997301
> 
> 赞同：0
> 
> 时间：2012-10-21T11:17:18.603
> 
> 标签：c#, collision-detection, xna-4.0

我的碰撞检测似乎正在工作，尽管它检测到的一些碰撞很奇怪，因为它会说碰撞发生在平台的底部，而实际上它不是。然而，这不是主要问题。

当玩家与平台发生碰撞时，他并没有移动到平台的表面，而是移动到平台的上方，并且在我的重力到位的情况下，他看起来像是在不断地弹跳。我不知道为什么。

如果你们能提供帮助，将不胜感激。因为我是 XNA 和 C# 的新手，所以我可能会错过一些非常简单的东西。

我将在下面列出我的 Game1、Player 和 Platoform 类。（我的碰撞检测在播放器类中）

谢谢

游戏1类

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;

    Texture2D background;
    Movement character;
    Platform[] platforms;
    //private Vector2 SnapePosition = Vector2.Zero;

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
        graphics.PreferredBackBufferHeight = 440;
        graphics.PreferredBackBufferWidth = 782;

    }

    /// <summary>
    /// Allows the game to perform any initialization it needs to before starting to run.
    /// This is where it can query for any required services and load any non-graphic
    /// related content.  Calling base.Initialize will enumerate through any components
    /// and initialize them as well.
    /// </summary>
    protected override void Initialize()
    {
        // TODO: Add your initialization logic here
        platforms = new Platform[15];

        base.Initialize();
    }

    /// <summary>
    /// LoadContent will be called once per game and is the place to load
    /// all of your content.
    /// </summary>
    protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.
        spriteBatch = new SpriteBatch(GraphicsDevice);

        for (int i = 0; i < platforms.Length; i++)
        {
            platforms[i] = new Platform(
                Content.Load<Texture2D>("Platforms/lvl2_platform"), new Rectangle(i*100, 410, 100, 30));
        }
        character = new Movement(Content.Load<Texture2D>("snape"), new Rectangle(0, 360, 50, 50), platforms);

        // TODO: use this.Content to load your game content here
        background = Content.Load<Texture2D>("Backgrounds/lvl2_background");
    }

    /// <summary>
    /// UnloadContent will be called once per game and is the place to unload
    /// all content.
    /// </summary>
    protected override void UnloadContent()
    {
        // TODO: Unload any non ContentManager content here
    }

    /// <summary>
    /// Allows the game to run logic such as updating the world,
    /// checking for collisions, gathering input, and playing audio.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        //Allows the player to move
        character.Update();

        // TODO: Add your update logic here

        base.Update(gameTime);
    }

    /// <summary>
    /// This is called when the game should draw itself.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        // TODO: Add your drawing code here

        spriteBatch.Begin();
        spriteBatch.Draw(background, Vector2.Zero, Color.White);
        character.Draw(spriteBatch);

        foreach (Platform platform in platforms)
        {
            platform.Draw(spriteBatch);
        }
        spriteBatch.End();

        base.Draw(gameTime);
    }
} 
```

玩家等级

```
class Player
{
    public Texture2D Snape;
    public Rectangle SnapePosition;

    public enum CollisionPosition { None, Top, Bottom, Left, Right };
    public CollisionPosition collisionType;
    public bool inCollision;
    public int collisionDepth;
    public Platform[] plat;
    public int num;

    public virtual void Update()
    {

    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(Snape, SnapePosition, Color.White);
    }
}

class Movement : Player
{
        public Movement(Texture2D newSnape, Rectangle newSnapePosition, Platform[] a)
    {
        Snape = newSnape;
        SnapePosition = newSnapePosition;
        plat = a; 
    }

        public override void Update()
        {
            // Check for collision
            Collisions();

            // Determine collision type
            //DetermineCollisionType();

            // Separate snape
            //SeparateSnape();

            KeyboardState keyBoard = Keyboard.GetState();

            if (keyBoard.IsKeyDown(Keys.A))
            {
                SnapePosition.X -= 5;
            }
            if (keyBoard.IsKeyDown(Keys.D))
            {
                SnapePosition.X += 5;
            }
            if (keyBoard.IsKeyDown(Keys.W))
            {
                SnapePosition.Y -= 5;
            }
            //if (keyBoard.IsKeyDown(Keys.S))
            //{
                SnapePosition.Y += 5;
           // }

          //  if (SnapePosition.X < 0)
          //      SnapePosition.X = 0;
          //  if (SnapePosition.Y < 0)
          //      SnapePosition.Y = 0;
          //  if (SnapePosition.X > GraphicsDevice.Viewport.Width - Snape.Width)
          //      SnapePosition.X = GraphicsDevice.Viewport.Width - Snape.Width;
          //  if (SnapePosition.Y > GraphicsDevice.Viewport.Height - Snape.Height)
          //      SnapePosition.Y = GraphicsDevice.Viewport.Height - Snape.Height;

        }

        public void Collisions()
        {
            for (int i = 0; i < plat.Length; i++)
            {
                if (plat[i].rectangle.Intersects(SnapePosition))
                {
                    inCollision = true;
                    num = i;
                    DetermineCollisionType();
                }

            }

        }

        public void DetermineCollisionType()
        {
            if (inCollision == false)
            {
                collisionType = CollisionPosition.None;
                collisionDepth = 0;
            }
            else
            {
                // Determine the side of *least intersection* for snape
                int minColDepth = int.MaxValue;

                // Check the top side                    
                int tColDepth = (plat[num].rectangle.Y + plat[num].texture.Height / 2) - (SnapePosition.Y - Snape.Height / 2);

                if (tColDepth > 0 && tColDepth < minColDepth)
                {
                    collisionType = CollisionPosition.Top;
                    minColDepth = tColDepth;
                }

                // Check the bottom side            
                int bColDepth = (SnapePosition.Y + Snape.Height / 2) - (plat[num].rectangle.Y - plat[num].texture.Height / 2);

                if (bColDepth > 0 && bColDepth < minColDepth)
                {
                    collisionType = CollisionPosition.Bottom;
                    minColDepth = bColDepth;
                }

                // Check the right overlap
                int rColDepth = (SnapePosition.X + Snape.Width / 2) - (plat[num].rectangle.X - plat[num].texture.Width / 2);

                if (rColDepth > 0 && rColDepth < minColDepth)
                {
                    collisionType = CollisionPosition.Right;
                    minColDepth = rColDepth;
                }

                // Check the left overlap
                int lColDepth = (plat[num].rectangle.X + plat[num].texture.Width / 2) - (SnapePosition.X - Snape.Width / 2);

                if (lColDepth > 0 && lColDepth < minColDepth)
                {
                    collisionType = CollisionPosition.Left;
                    minColDepth = lColDepth;
                }

                // Update the collision depth
                collisionDepth = minColDepth;
                SeparateSnape();
            }
        }

        public void SeparateSnape()
        {
            switch (collisionType)
            {
                case CollisionPosition.None:
                    break;

                case CollisionPosition.Top:
                    SnapePosition.Y += (collisionDepth);
                    break;

                case CollisionPosition.Bottom:
                    SnapePosition.Y -= collisionDepth;
                    break;

                case CollisionPosition.Right:
                    SnapePosition.X -= collisionDepth;
                    break;

                case CollisionPosition.Left:
                    SnapePosition.X += collisionDepth;
                    break;
            }
        }
} 
```

平台类

```
class Platform
{
    public Texture2D texture;
    public Rectangle rectangle;

    public Platform(Texture2D newTexture, Rectangle newRectangle)
    {
        texture = newTexture;
        rectangle = newRectangle;
    }

    public void Update()
    {

    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(texture, rectangle, Color.White);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T12:37:07.327

我修好了你的碰撞。

你所有的深度计算都不正确。你是根据实体（玩家/平台）的中心来做的，并使用它们的纹理大小而不是它们的矩形大小。

您可能一直认为一切都是从中间绘制的，但默认情况下它从 XNA 的左上角绘制。

这是位于“DetermineCollisionType()”函数下的“Movement”类中的新深度计算。

顶部深度需要在平台顶部 (Y) 和 snape 底部 (Y + 高度) 工作。

```
int tColDepth = 
    (SnapePosition.Y + SnapePosition.Height) - (plat[num].rectangle.Y); 
```

底部深度需要在playform的底部（Y + Height）和Snape的顶部（Y）起作用。

```
int bColDepth = 
    (plat[num].rectangle.Y + plat[num].rectangle.Height) - (SnapePosition.Y); 
```

正确的深度需要在平台的左侧 (X) 和 snape 的右侧 (X + Width) 起作用。

```
int rColDepth = 
    (SnapePosition.X + SnapePosition.Width) - (plat[num].rectangle.X); 
```

左侧深度需要在平台右侧（X + Width）和 Snape 左侧（X）起作用。

```
int lColDepth = 
    (plat[num].rectangle.X + plat[num].rectangle.Width) - (SnapePosition.X); 
```

这将从现在开始起作用。但是您可能希望为您的平台使用列表。当/如果您使用关卡编辑器时，列表会更容易，因为您不必说“我想要 15 个平台”。

# facebook - Facebook 应用程序未显示

> ID：12997302
> 
> 赞同：1
> 
> 时间：2012-10-21T11:17:21.400
> 
> 标签：facebook

我已经在我的 facebook 上设置了一个应用程序并成功添加了标签。这一直很好，直到几天前我点击应用程序时，我进入了 facebook 上的正确页面，但我的网站页面没有显示，这发生在我在我的帐户上照顾的 3 个页面上。以下是我的应用程序的链接：

[https://www.facebook.com/horserugsonline/app_157184554400399](https://www.facebook.com/horserugsonline/app_157184554400399)

有人可以帮忙吗？

# google-visualization - Google Chart API QR 码不起作用

> ID：12997303
> 
> 赞同：-1
> 
> 时间：2012-10-21T11:17:28.253
> 
> 标签：google-visualization, qr-code

我尝试使用 Chart API 生成 QR 码。这可行，但是当我尝试读取 QR 码时，它无法识别文本。当我尝试阅读其他二维码时，它工作正常。这是测试网址：[https ://chart.googleapis.com/chart?cht=qr&chs=150x150&ch1=Test](https://chart.googleapis.com/chart?cht=qr&chs=150x150&ch1=Test)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T11:26:10.120

最终的参数名称是 chl 而不是 ch1。

# css - 网页 3d 动画的 chrome 扩展

> ID：12997304
> 
> 赞同：0
> 
> 时间：2012-10-21T11:17:32.417
> 
> 标签：css, google-chrome, web

我正在尝试构建一个 chrome 扩展，它将网页内容显示为

[https://developer.apple.com/safaridemos/showcase/gallery/](https://developer.apple.com/safaridemos/showcase/gallery/)

我想要做的是在这些框架中获取网页的内容，并在链接中显示带有 3d 动画的框架。铬可以吗？

那么如何获得这样的框架呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:26:23.867

我不确定您链接到的内容是否真的可以称为扩展程序或插件。它实际上只是使用带有 CSS3 的 3D 功能的 jQuery 或 JavaScript 轮播，这是 CSS3 规范的一部分。严格来说，如果您要在较新版本的 Chrome 中运行此代码，它的工作原理是一样的。

# python - 空列表布尔值

> ID：12997305
> 
> 赞同：16
> 
> 时间：2012-10-21T11:17:53.523
> 
> 标签：python, list, boolean

这可能只是愚蠢的，但对我来说有点令人困惑：

```
In [697]: l=[]

In [698]: bool(l)
Out[698]: False

In [699]: l == True
Out[699]: False

In [700]: l == False
Out[700]: False 

In [701]: False == False
Out[701]: True 
```

为什么`l==False`返回`False`时`False == False`返回`True`？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-21T11:21:57.733

您正在对照 boolean 的文字值检查它`False`。一样`'A' == False`不会是真的。

如果你投它，你会看到不同：

```
>>> l = []
>>> l is True
False
>>> l is False
False
>>> l == True
False
>>> l == False
False
>>> bool(l) == False
True 
```

原因`False == False`是正确的，因为您正在比较相同的对象。它与`2 == 2`或相同`'A' == 'A'`。

当你看到类似的东西`if l:`并且这个检查永远不会通过时，困难就来了。那是因为您正在检查项目的*真值*。按照惯例，所有这些项目都将无法通过布尔检查 - 也就是说，它们的布尔值将是`False`：

*   `None`
*   `False`（明显地）
*   任何空序列：`''`, `[]`,`()`
*   任何“零”值：`0`,`0.0`等。
*   任何空集合：（`{}`一个空字典）
*   任何`len()`返回 a`0`

这些被称为“虚假”值。***其他一切都是“真实的”***。这可能会导致一些奇怪的事情，例如：

```
>>> def foo():
...   pass
...
>>> bool(foo)
True 
```

还需要注意的是*，不返回显式值的方法总是将`None`其作为返回类型*，这会导致：

```
>>> def bar():
...   x = 1+1
...
>>> bool(bar)
True
>>> bool(bar())
False 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-21T11:22:51.867

空列表与 不同`False`，但`False`等于`False`，因为它是同一个对象。`bool(l)`返回`False`，因为空列表是“假的”。

简而言之，`==`不是`bool() == bool()`。

例如`[1, 2] == [1, 2, 3]`is `False`，即使两者都是“真的”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-21T11:23:06.620

这是因为空列表不是，它在转换为 a或由 an或条件评估`False`时只是“虚假” （两者都评估其条件的转换）。有关更多详细信息，请参阅[有关真值测试的文档。](http://docs.python.org/library/stdtypes.html#truth-value-testing)`bool``if``while``bool`

# php - Avoid getting duplicate data from a table

> ID：12997308
> 
> 赞同：-2
> 
> 时间：2012-10-21T11:18:19.400
> 
> 标签：php, mysql

I have table :

```
===================
|id| word | source|
===================
| 1| I    |   S1  |
| 2| me   |   S1  |
| 3| you  |   S1  |
| 4| me   |   S2  |
=================== 
```

If the are same datas in `word` that have different `source`, I just wanna take data `word` from `source` = `S1`

How to get them? I tried using below code, but still wrong :

```
$query = mysql_query(" SELECT word from tb where source ='S1' group by word1 "); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:19:58.350

Your group by column name is incorrect.

It should be `word` instead of `word1`.

Like so:

```
$query = mysql_query("SELECT word FROM tb WHERE source ='S1' GROUP BY word"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T11:20:22.123

Then, *I think*, you need to get the minimum source using `MIN()`.

```
SELECT WORD, MIN(source)
FROM tableName
GROUP BY word 
```

[**SQL Fiddle demo**](http://sqlfiddle.com/#!2/13082/2)

# javascript - Windows 8 javascript/visual studio 2012 中的 console.log()

> ID：12997314
> 
> 赞同：6
> 
> 时间：2012-10-21T11:18:43.993
> 
> 标签：javascript, visual-studio, windows-8, microsoft-metro

当我在 Visual Studio 2012 中的 javascript 中使用 console.log("Some text output") 进行 Windows 8 Metro 编程时，文本被发送到哪里？在哪里可以查看？我已经打开了“输出”面板，但没有看到日志文本。

我没有使用正确的功能吗？我必须使用另一个功能来打印到输出吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-21T11:26:23.163

要实际查看 JavaScript 控制台，请`DEBUG > Windows > JavaScript Console`在 Visual Studio 菜单中选择。然后你可以使用good old[`console.log()`](http://msdn.microsoft.com/en-us/library/windows/apps/hh696634.aspx)来写，但是你也可以使用相关的`WinJS`函数：

使用以下[`WinJS.log()`](http://msdn.microsoft.com/en-us/library/windows/apps/jj150612.aspx)命令创建函数后需要记录一些内容[`WinJS.Utilities.startLog()`](http://msdn.microsoft.com/en-us/library/windows/apps/hh701617.aspx)：

```
WinJS.Utilities.startLog({type: "info", tags: "custom" });
WinJS.log("my message", "info", "custom"); 
```

* * *

`WinJS`以下是有关日志记录功能的一些附加信息：

> `startLog(options)`：配置一个记录器，将包含指定标签的消息写入 JavaScript 控制台。

`options`对象**必须**包含 a ，它`type`应该是`error`、`warn`或之一。除非您想捕获所有日志条目，否则还要添加到包含您要记录的以空格分隔的标签列表的对象。`info``perf``tags`

`WinJS.log(message, tags, type)`: 该功能默认**不存在**。但是，它是由您的`startLog()`调用创建的。您也可以手动创建它，但是因为您想使用登录到控制台`startLog()`是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T15:53:02.250

如果您需要在实时环境中调试应用程序，您可以使用简单的屏幕上的 console.log 替换，您可以使用 ~ 键激活它。

源代码在这里： [https ://gist.github.com/4012355](https://gist.github.com/4012355)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T01:57:35.263

我可能正在回复一篇旧帖子，或者您可能已经找到了实现您的目的的方法，但是我尝试了 console.log() 和 WinJS.log() 并且 javascript 控制台似乎都返回了“未定义”。另外，我确保使用“调试器；” 该代码正在执行的语句。现在我在这里假设您需要记录以进行调试，那么我现在更愿意“打印”到我的屏幕上的是：

```
<body>
  <label id="lblMessage">test</label>
</body> 
```

然后在 JS 中：

```
function f(message) {
  document.getElementById('lblMessage').innerText = message;
} 
```

（然后，在需要的地方调用这个函数——在我的例子中是 app.onactivated 函数）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-06T23:39:02.090

您还可以通过 EventViewer 查看日志。以下是启用此功能的步骤：

打开事件查看器
导航到应用程序和服务日志
展开 Microsoft/Windows/AppHost
左键单击以选择管理员
右键单击​​管理员，然后选择查看 => 显示分析和调试日志

# jquery-ui - Jquery AJAX from remote host

> ID：12997315
> 
> 赞同：0
> 
> 时间：2012-10-21T11:18:47.490
> 
> 标签：jquery-ui, jquery, jquery-plugins

Hi I am trying to get json from a remote host using this piece of code [Example at fiddle](http://jsfiddle.net/KNfVz/1/),

Here i want to add that i am using jquery cross domain ajax plugin

```
$("button").click(function() {
jQuery.ajax({
    url: "http://50.116.19.49/rest/user.json",
    type: 'GET',
    success: function(result) {
    $("div").html(result.responseText);
    }
  });
});​ 
```

I am using jquery AJAX GET method. The problem is when i try to use POST instead of GET it stops working, Need help.!

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:28:11.810

可以通过服务器端的方法限制请求。

所以这并不意味着如果它适用`GET`于，那么它也必须适用于`POST`. 正如我所见，您的网络服务不允许`POST`方法的源访问。

这是一个示例如何允许不同类型的请求`PHP`

```
<?php
  if ($_SERVER["REQUEST_METHOD"] == "GET")
     header("Access-Control-Allow-Origin: *");
     echo "lan";
  else {
     echo "disabled";
  } 
?> 
```

# axis2 - adding authentification header to client stub axis2

> ID：12997316
> 
> 赞同：1
> 
> 时间：2012-10-21T11:19:11.000
> 
> 标签：axis2, soap-client, stub, soapheader

I built the wsdl-client-stub based on xmlbeans. Now I got stuck adding a custom header for authentification using xmlbeans since xmlbeans stubs are lacking the necessary Classes(?)

Actually, the header should look like:

```
<SOAP-ENV:Header> 
        <ns2:verifyingToken> 
            <UserID>9</UserID>
            <Token>29438094lkjslfkjlsdkjf</Token>
        </ns2:verifyingToken>
     </SOAP-ENV:Header> 
```

So I tried as fallback going in between stub and ServiceClient:

```
ServiceClient sc = stub._getServiceClient();

OMFactory  omFactory     = OMAbstractFactory.getOMFactory();
        OMElement  omElement     = omFactory.createOMElement(new QName("SOAP-ENV", "Header", "ver"), null);
        OMElement  omElementVeri = omFactory.createOMElement(new QName("", "verifyingToken", ""), omElement);
        OMElement  omElementUser = omFactory.createOMElement(new QName("", "UserID", ""), omElementVeri);
                   omElementUser.setText(""+userid);

        OMElement  omElementPass   =   omFactory.createOMElement(new QName("", "Token", ""), omElementVeri);
                   omElementPass.setText(""+token);
        sc.addHeader(omElement); 
```

eclipse is raising errors saying: The method createOMElement(String, OMNamespace) in the type OMFactory is not applicable for the arguments (QName, null) - The constructor QName(String, String, String) is undefined

Does anyone has a hint, what I should fix, to get this to work. I really appreciate your help,

Alex

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T04:09:30.413

```
ServiceClient client = stub._getServiceClient();
SOAP11Factory factory = new SOAP11Factory();
OMNamespace SecurityElementNamespace = factory.createOMNamespace("http://schemas.xmlsoap.org/ws/2002/12/secext", "wss");
OMElement usernameTokenEl = factory.createOMElement("UsernameToken", SecurityElementNamespace);

OMElement usernameEl = factory.createOMElement("Username", SecurityElementNamespace);
usernameEl.setText("123");
usernameTokenEl.addChild(usernameEl);

OMElement passwordEl = factory.createOMElement("Password", SecurityElementNamespace);
passwordEl.setText("123");
usernameTokenEl.addChild(passwordEl);

SOAPHeaderBlockImpl block = new SOAP11HeaderBlockImpl("Security", SecurityElementNamespace, factory);
block.addChild(usernameTokenEl);

client.addHeader(block); 
```

# c++ - Arduino: interrupt expensive function and resume another

> ID：12997317
> 
> 赞同：2
> 
> 时间：2012-10-21T11:19:11.710
> 
> 标签：c++, c, arduino, interrupt

As a first project I plan on making a [teensyduino](http://www.pjrc.com/store/teensy_pins.html) ambient light with different light modes, which are checked in a big switch statement - now I want to switch from one mode to another by pressing a button.

googling lead me to using interrupts, but there is one point that is not clear - if I press the button during an expensive function, which takes long time and has many variables in use, what happens if i call the main loop from the interrupt, does the remaining state of remain in the ram and leads to a stackoverflow if I do switch too many times or is it cleared.

Here some code:

```
const int speed = 30 //milliseconds
const int modes = 11; //maximum number of modes
const int red   = 15;
const int green = 14;
const int blue  = 12;

volatile int mode  = 0;

void setup() {
    pinMode(red   , OUTPUT);
    pinMode(green , OUTPUT);
    pinMode(blue  , OUTPUT);
    randomSeed(analogRead(0));
    Serial.begin(9600);
    attachInterrupt(0,incMode,CHANGE); // 0 -> digital pin 2
}
void loop()  {
    switch(mode){
        case 0:{
            Serial.println("powerdown");
            setAll(0);
            delay(1000);
            break;
        }
        \\...
        case modes:{
            \\ expensive long function
        }
    }
}
void blinkAll(int times){
    for(int i=1;i <= times;i++){
        setAll(255);
        delay(speed*17);
        setAll(0);
        delay(speed*17);
    }
}

void setAll(int bright){
        analogWrite(red   , bright);
        analogWrite(green , bright);
        analogWrite(blue  , bright);
}
void incMode(){
    delay(speed);
    blinkAll(2); //to indicate mode has changed
    mode = (mode+1) % (modes+1); //switch starts with 0 so use "% modes+1"!
    Serial.println("mode increased");
    //--> loop();
    //--> would resume the main loop but lead to a stackoverflow i presume
} 
```

How would I break out of the running function without delay and stack pollution. I know I could just set the mode and wait until the function has ended, but if I have a mode that takes minutes to end I want to be able to switch from it immediately.

PS.: Though I am using a teensyduino, I will use the arduino tag, and as I don't know what language the arduinio uses the tags c/c++. Please change this if it is not appropriate.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:26:58.193

如果您从中断处理程序递归地多次重新进入 main，您最终会溢出堆栈。此外，由于就硬件而言，您仍将处于中断处理程序中，因此您将遇到各种奇怪的情况-特别是，当您已经处于中断状态时，中断被阻止，这意味着`delay()`将无法工作并且`millis()`不会计数，除非您找到某种手动重新启用中断的方法，否则其他各种事情也会被破坏。

解决这个问题的一个更好的方法是让你的“昂贵的长函数”变成一个状态机，由一个廉价的、经常调用的短函数驱动。然后，您的中断处理程序可以简单地设置一个标志，该标志在进入此函数时进行检查，此时当前模式（即当前状态机）被更改。

这种方法还可以更轻松地定义新的照明模式。例如，您可以定义如下内容：

```
struct phase {
  unsigned char r, g, b, delay;
};

unsigned long t_nextPhase;
volatile struct phase *forceMode = NULL;
struct phase *mode = blinkAll;
int nextPhase = 0;

struct phase blinkAll[] = {
  { 255, 255, 255, 17 },
  { 0, 0, 0, 17 },
  { 0, 0, 0, 255 } // loop sentinel
};

void lighting_kernel() {
    noInterrupts(); // ensure we don't race with interrupts
    if (forceMode) {
        mode = forceMode;
        forceMode = NULL;
        t_nextPhase = millis();
        nextPhase = 0;
    }
    interrupts();

    if (t_nextPhase > millis()) {
        return;
    }

    struct phase *cur_phase;
    do {
        cur_phase = mode[nextPhase++];
        if (cur_phase->delay == 255) {
            nextPhase = 0;
        }
    } while (cur_phase->delay == 255);

    analogWrite(red   , cur_phase->r);
    analogWrite(green , cur_phase->g);
    analogWrite(blue  , cur_phase->b);

    t_nextPhase = millis() + cur_phase->delay;    
} 
```

现在要定义新的照明模式，您只需要一个新的颜色和时间数组，而不是编写新代码。添加诸如颜色渐变和其他此类效果之类的内容作为练习留给读者。

# android - Different layout file for differenct activites

> ID：12997319
> 
> 赞同：1
> 
> 时间：2012-10-21T11:19:42.290
> 
> 标签：android

Should I put xml landscape layout files for ALL the activities in the same layout-land folder? If there are 3 activities and 3 landscape layout, then how should I name them in layout land folder to be recognized?

I have 2 activities - A and B, they each have 2 lanscape layout in layout-land folder but only activity A can find the layout for landscape, whereas activity B finds the landscape layout for activity A and use it. Why? How to map the landscape layout to its activities?

```
//ACTIVITY- A
    @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Intent bmr= new Intent(TdeeActivity.this,BMRActivity.class);
startActivityForResult(bmr,CALLED_ACTIVITY);    

}

@Override
protected void onResume() {
            super.onResume();
            setContentView(R.layout.activity_tdee);
            Button ok=(Button)findViewById(R.id.btnOk);
            rdActLevel=(RadioGroup) findViewById(R.id.rd);
            ok.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View arg0) {
                    showResult();
                }

            });             
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:27:08.153

这不是一个规则，但最好预测用户体验。如果您没有包含一种横向布局，Android 会在手机旋转时自动调整其大小。这可能会导致糟糕的用户体验（如图像拉伸、错误的小部件尺寸或重叠）。如果您在两个方向的多种屏幕尺寸上测试您的应用程序并且对结果感到满意，那么您不需要为每个布局添加一个。

对于 Activity 关系，Activity 的数量和布局的数量之间没有联系（您可能有许多带有一个布局的活动，通过代码完成的更改最少）。这实际上取决于每个布局代表什么。

`layout-land`对于最后一个问题，您需要在`layout`文件夹中使用与 Android 文件夹中完全相同的名称命名 xml 文件，以便正确映射它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:24:30.887

您给它们与纵向模式中的名称相同，只要将它们放在正确的文件夹（布局域）中，它们就会自动加载。是的，如果有意义的话，您确实需要为横向中的每个活动提供不同的布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T11:25:22.650

Android Activity 自动识别布局土地。如果您将同名布局置于 android layout-land 和 Portrait 模式并将此布局加载到您的活动类中，那么 android 会自动识别它。

谢谢。

# javascript - 有没有办法使用 ko.observableArray 作为地图？

> ID：12997333
> 
> 赞同：5
> 
> 时间：2012-10-21T11:21:51.250
> 
> 标签：javascript, knockout.js

有没有办法像地图/字典一样使用[ko.observableArray ？](http://knockoutjs.com/documentation/observableArrays.html)

例如：

```
var arr = ko.observableArray();
arr.push('key', { '.. Some object as value ..' }); 
```

然后使用键检索值：

```
var value = arr['key']; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:18:08.123

找到了两种可能的实现：

1.  James Foster / [knockout.observableDictionary](https://github.com/jamesfoster/knockout.observableDictionary) - 它拥有字典所需的一切。（感谢汤姆霍尔的伟大发现）
2.  [更天真](http://www.wiredprairie.us/blog/index.php/archives/1563)的植入 - 适合基本需求。

我最终使用了 observableDictionary，它既快速又简单。

# c# - 从 BufferedStream 获取磁盘访问次数

> ID：12997338
> 
> 赞同：2
> 
> 时间：2012-10-21T11:22:10.607
> 
> 标签：c#, bufferedstream, disk-access

我正在使用`BinaryReader`. 我想在缓冲输入时计算磁盘访问次数`BufferedStream`。不幸的是，这个类是密封的，所以我不能重写方法来手动计算它。

有没有办法使用标准库来做到这一点？还是我必须编写自己的缓冲 BinaryReader 来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:30:15.413

您可以根据在 BufferedStream(Stream, int) 构造函数中指定的缓冲区大小来计算它。默认值为 4096 字节。假设您不使用 Seek()，则文件访问次数为`(filesize + bufsize - 1) / bufsize`.

一个完全矫枉过正的方法是记住你可以链接流。创建您自己的 Stream 派生类，并计算需要从底层流提供数据的 Read() 方法的调用次数。将该类的实例传递给 BufferedStream 构造函数。

这两种方法都无法让您了解操作系统访问磁盘驱动程序并从磁盘物理传输数据的频率。文件系统缓存介于两者之间，实际数量很大程度上取决于文件数据在磁盘柱面和扇区之间的映射方式。您会从性能计数器获得有关此信息。实际使用它没有什么意义，你得到的数字在另一台机器上重现效果很差。

# jquery - 区域标签上的背景图像

> ID：12997339
> 
> 赞同：0
> 
> 时间：2012-10-21T11:22:24.693
> 
> 标签：jquery, css

有没有人知道如何将背景图像添加到区域标签？我不能使用绝对位置的 div，因为它们会在不同的分辨率下不合适，并且 jquery css('backgroundImage', '') 函数似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:44:53.713

如[W3 文档](http://www.w3.org/wiki/HTML/Elements/area)中所述，该`area`元素不接受任何`style`属性。

但是，您可能对[MapHilight](http://davidlynch.org/projects/maphilight/docs/) jQuery 插件感兴趣。

**编辑：**

在进一步研究之后，感谢[graphicsdivine](https://stackoverflow.com/users/231995/graphicdivine)，它出现了`style`一个[Global Attribute](http://www.w3.org/wiki/HTML/Attributes/_Global)，也就是说，它*应该*被所有 HTML 元素支持。

但是，大多数供应商的`area`element 实现不支持 style 属性，因为可以测试并在[`area`Mozilla Developer Network 的文档中](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/area)确认：

> [*对于`area`元素*] id、class 和**style**属性与 HTML 4 规范中定义的核心属性含义相同，**但只有 Netscape 和 Microsoft 定义了它们**。

# .htaccess - 根据端口号重定向？

> ID：12997342
> 
> 赞同：0
> 
> 时间：2012-10-21T11:22:35.900
> 
> 标签：.htaccess, redirect

`domain.com:88 to domain.com:8080`是否可以使用 htaccess 和 mod_rewrite进行重定向？请举例？

如果 htaccess 做不到，还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:25:51.340

如果您在不同的端口上收到请求，则需要让服务器监听这些端口。在这些服务器中，您当然可以配置重写规则，您甚至不必检查端口，因为它在服务器逻辑中隐含地给出。

请注意，您可以在 apache http 服务器中配置多个虚拟服务器。

您还可以将单个服务器配置为侦听多个端口。检查有关`Listen`http 服务器配置中的配置选项的文档。那么确实你必须测试端口。您可以在重写模块中通过将`RewriteCond`命令与`SERVER_PORT`变量一起使用来执行此操作。所以像：

```
RewriteEngine on
RewriteCond ${SERVER_PORT} 88
RewriteRule ^(.*)$ http://some.server.addr:8080/$1 [QSA,L] 
```

# java - 按下按钮时循环播放声音

> ID：12997344
> 
> 赞同：3
> 
> 时间：2012-10-21T11:22:50.653
> 
> 标签：java, android, ontouchlistener, onclicklistener, soundpool

我正在尝试在按下按钮时循环播放声音。

当我按下按钮使事件“MotionEvent.ACTION_DOWN”不会停止运行声音时，我怎么能这样做？我这样做的方式只运行一次。我已经尝试将 return 语句更改为 false，但它不起作用。

setLoop MediaPlayer 选项对我没有帮助，因为我想继续播放新声音，尽管当前声音没有完成播放。

这是我的代码：

```
public boolean onClick(View v, MotionEvent event) {
    if(event.getAction() == MotionEvent.ACTION_DOWN){
        //here should not stop running the soundPool
        soundPool.play(R.raw.sound1, 1, 1, 1, 0, 1);
    }
    if(event.getAction() == MotionEvent.ACTION_UP){
        // stop running the soundpool
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:04:58.100

将第五个参数替换为 -1 ：

```
soundPool.play(R.raw.sound1, 1, 1, 1, -1, 1); 
```

从[play() 文档](http://developer.android.com/reference/android/media/SoundPool.html#play%28int,%20float,%20float,%20int,%20int,%20float%29)开始，*第五个*参数`loop`采用 0（= 无循环）或 -1（= 永远循环）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:34:38.380

替换`return false;`为`return true;`。获取的唯一方法`ACTION_UP`是返回`true`通知 Android 系统您将处理整个`onClick`事件。

# java - 基本身份验证代码 401 问题

> ID：12997352
> 
> 赞同：1
> 
> 时间：2012-10-21T11:24:23.400
> 
> 标签：java, authentication, authorization, basic-authentication

我对基本身份验证有一些问题。

服务器返回代码 401，我不明白我的代码有什么问题。

我有：

```
URL url = new URL("https://www.external_site.it/Login.do");

HttpsURLConnection connection = (HttpsURLConnection) url.openConnection();

    connection.setRequestProperty("Authorization","Basic "+Base64.encodeBase64String((username+":"+password).getBytes()));
    connection.setRequestMethod("GET");
    connection.connect();

System.out.println("\nRESPONSE CODE:\t\t" + connection.getResponseCode());
System.out.println("RESPONSE MESSAGE:\t" + connection.getResponseMessage()); 
```

我将base64字符串与我在标题中的字符串进行了比较，它是相等的。

# scala - Scala + Play Framework：需要动作组合解释

> ID：12997354
> 
> 赞同：0
> 
> 时间：2012-10-21T11:24:42.010
> 
> 标签：scala, playframework-2.0

这是从 Play Framework 附带的示例中提取的动作组合

```
def IsAuthenticated(f: => String => Request[AnyContent] => Result) = Security.Authenticated(username, onUnauthorized) { user =>
    Action(request => f(user)(request))
  } 
```

所以，`Security.Authenticated`取一个`username: RequestHeader => Option[String]`和`onAuthorized: RequestHeader=>SimpleResult`第二组括号取`String => Action[A]`

然后在控制器中我有：

```
def index = isAuthenticated { ...code }} 
```

上面的代码是这样的，所以我假设这是`f`函数`=> String => Request[AnyContent] => Result`。现在，我不明白这里到底发生了什么。我不是在谈论`User.findByEmail....`，我是在谈论`username => _ => ...`。如果我直接调用这个函数的签名会是什么样子？

```
username => _ =>
    User.findByEmail(username).map { user =>
      Ok(
        html.dashboard(
          Project.findInvolving(username), 
          Task.findTodoInvolving(username), 
          user
        )
      )
    }.getOrElse(Forbidden) 
```

如果有`def isAuthenticated(f: => Request[AnyContent] => Result)`我会知道如何使用它，我会理解它。但是额外的“数据”让我感到困惑。

更新：

我想我发现了一些东西：

```
def f2: String => Int => List[Char] = x => _ => x.toList 
```

这将被称为：

```
f2("Andrew")(2) //there can be anything replacing 2 because I don't have access to it anyway 
```

因此，我主要询问的上述功能将是：

```
def f: => String => Request[AnyContent] => Result = username => _ => User.find..... 
```

我对吗？
我收到“此处不允许使用名称参数错误”。

如果他们不使用第二个参数，他们为什么要使用`String => Request => Result`而不是简单地使用`String => Result`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T17:31:28.493

该函数定义实际上是一个柯里化函数定义。

`String => Request => Result`实际上的意思是：`f(s:String):(r:Request)=>Result`即一个接受一个字符串并返回一个接受一个请求并返回一个结果的**函数的函数。**

查看“增加你的功能”部分：[http ://danielwestheide.com/blog/2013/01/30/the-neophytes-guide-to-scala-part-11-currying-and-partially-applied-functions .html](http://danielwestheide.com/blog/2013/01/30/the-neophytes-guide-to-scala-part-11-currying-and-partially-applied-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T09:41:05.230

[对我来说， https://github.com/mariussoutier/PlayBasics/tree/master/play-2.2-migration](https://github.com/mariussoutier/PlayBasics/tree/master/play-2.2-migration)上的示例非常有启发性。

# android - 从 ArrayList<> 更改为 SimpleCursorAdapter 后使用 onItemClickListener

> ID：12997357
> 
> 赞同：2
> 
> 时间：2012-10-21T11:25:19.393
> 
> 标签：android, nullpointerexception, simplecursoradapter, onitemclick

我仍然在关注 ContentProviders、Loaders 和 SimpleCursorAdapters（我发现使用旧的 startManagingCursor 方法更容易）。本质上，我有一个 ListView 活动，当单击列表项时，将打开一个新活动，其中所有字段都填充了数据库中的数据。然后用户可以删除记录，或更改字段并保存更改。我会提前为这篇文章的长度道歉，但我不确定哪些可能/可能不相关。

**我将首先为您提供旧代码（正在运行）：**

```
public class FuncLogbook extends DashMenuActivity implements OnItemClickListener {

private ListView list_LogbookResults;
private ListAdapter list_LogbookAdap;
private ArrayList<DBDetails> LogbookArrayList;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView (R.layout.dash_logbook);

    list_LogbookResults = (ListView) findViewById(R.id.list_logbook);
    list_LogbookResults.setOnItemClickListener(this);

    LogbookArrayList = new ArrayList<DBDetails>();
    list_LogbookAdap = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());
    list_LogbookResults.setAdapter(list_LogbookAdap);
}

@SuppressWarnings("deprecation")
public List<String> populateList() {
    List<String> BGLResultsList = new ArrayList<String>();

    DBProvider mDBLogbook = new DBProvider();
    AddDBHelper logbook = new AddDBHelper(this);
    logbook.open();
    Cursor cur = logbook.getEntries();
    Cursor cur = mDBLogbook.query(DBProvider.CONTENT_URI, null, null, null, null);
    startManagingCursor(cur);

    while (cur.moveToNext()) {
        String RowID = cur.getString(0);
        String Time = cur.getString(1);
        String Date = cur.getString(2);
        String BGL = cur.getString(5);

        DBDetails detailsClass = new DBDetails();
        detailsClass.setuRow(RowID);
        detailsClass.setuTime(Time);
        detailsClass.setuDate(Date);
        detailsClass.setuBGL(BGL);          

        LogbookArrayList.add(detailsClass);
        BGLResultsList.add("BGL: " + BGL + "\nRow ID: " + RowID
                +"\nDate: " + Date +"\nTime: " + Time);
    }
    return BGLResultsList;
}

@Override
protected void onResume() {
    super.onResume();
    LogbookArrayList = new ArrayList<DBDetails>();
    list_LogbookAdap = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());
    list_LogbookResults.setAdapter(list_LogbookAdap);
}

@Override
protected void onStart() {
    super.onStart();
    LogbookArrayList = new ArrayList<DBDetails>();
    list_LogbookAdap = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());
    list_LogbookResults.setAdapter(list_LogbookAdap);
}

public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {      
    Intent UpdateDBDetails = new Intent(this, UpdateDBDetails.class);

    DBDetails clickedObject = LogbookArrayList.get(arg2);
    Bundle dataBundle =  new Bundle();
    dataBundle.putString("clickeduRowId", clickedObject.getuRow());
    dataBundle.putString("clickeduTime", clickedObject.getuTime());
    dataBundle.putString("clickeduDate", clickedObject.getuDate());
    dataBundle.putString("clickeduBGL", clickedObject.getuBGL());

    UpdateDBDetails.putExtras(dataBundle);
    startActivity(UpdateDBDetails);
} 
```

**新代码：**

```
public class FuncLogbook extends ListActivity implements
LoaderManager.LoaderCallbacks<Cursor>, OnItemClickListener {

private SimpleCursorAdapter adapter;
private ArrayList<DBDetails> LogbookArrayList;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView (R.layout.dash_logbook);     
    this.getListView().setDividerHeight(2);
    fillData(); 

    ListView list = getListView();
    list.setOnItemClickListener(this); }

protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);
}

private void fillData() {
    String[] from = new String[] { AddDBHelper.KEY_BGL, AddDBHelper.KEY_ROWID,
            AddDBHelper.KEY_CATEG, AddDBHelper.KEY_TIME };
    int[] to = new int[] {R.id.logBGL, R.id.logRowID, R.id.logCateg, R.id.logTime };

    getLoaderManager().initLoader(0, null, this);
    adapter = new SimpleCursorAdapter(this, R.layout.logbook_item, null, from, to, 0);

    setListAdapter(adapter);        
}

public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    String[] projection = { AddDBHelper.KEY_ROWID, AddDBHelper.KEY_BGL,
            AddDBHelper.KEY_CATEG, AddDBHelper.KEY_TIME };
    CursorLoader cl = new CursorLoader(this, DBProvider.CONTENT_URI,
            projection, null, null, null);
    return cl;
}

public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    adapter.swapCursor(data);
}

public void onLoaderReset(Loader<Cursor> loader) {
    adapter.swapCursor(null);
}

public void onItemClick(AdapterView<?> parent, View view, int pos, long id) {       
    Intent UpdateDBDetails = new Intent(this, UpdateDBDetails.class);   

    /*DBDetails clickedObject = LogbookArrayList.get(pos);
    Bundle dataBundle =  new Bundle();
    dataBundle.putString("clickeduRowId", clickedObject.getuRow());
    dataBundle.putString("clickeduTime", clickedObject.getuTime());
    dataBundle.putString("clickeduDate", clickedObject.getuDate());
    dataBundle.putString("clickeduBGL", clickedObject.getuBGL());

    UpdateDBDetails.putExtras(dataBundle);*/
    startActivity(UpdateDBDetails);
} 
```

运行它时，我在行上得到一个 NullPointerException，上面写着`DBDetails clickedObject = LogbookArrayList.get(pos);` 我知道 ArrayList 是错误的，但是我能找到的唯一教程要么显示如何将 ArrayList 与 onItemClick 一起使用，要么显示如何在Toast 消息，但我似乎无法将信息放入 Bundle 以传递给 Activity。任何帮助表示赞赏。

**更新**

根据 Luksprog 的回答，我修改为

```
public void onItemClick(AdapterView<?> parent, View view, int pos, long id) {       
    Intent UpdateDBDetails = new Intent(this, UpdateDBDetails.class);

    Cursor c = (Cursor) adapter.getItem(pos);
    Toast.makeText(getApplicationContext(), "Clicked Record Number " + id + " at " + pos,
            Toast.LENGTH_SHORT).show(); 

    Bundle dataBundle =  new Bundle();
    dataBundle.putString("clickeduRowId", c.getString(c.getColumnIndex(AddDBHelper.KEY_ROWID)));
    dataBundle.putString("clickeduTime", c.getString(c.getColumnIndex(AddDBHelper.KEY_TIME)));
    dataBundle.putString("clickeduDate", c.getString(c.getColumnIndex(AddDBHelper.KEY_DATE)));
    dataBundle.putString("clickeduBGL", c.getString(c.getColumnIndex(AddDBHelper.KEY_BGL)));

    UpdateDBDetails.putExtras(dataBundle);
    startActivity(UpdateDBDetails);
} 
```

如果我没有向光标添加强制转换，则会引发错误，因此`Cursor c = (Cursor) adapter.getItem(pos);`

这仍然行不通。Logcat 显示：

```
10-21 23:24:02.167: E/CursorWindow(2663): Failed to read row 2, column -1 from a CursorWindow which has 8 rows, 4 columns.
10-21 23:24:02.178: E/AndroidRuntime(2663): FATAL EXCEPTION: main
10-21 23:24:02.178: E/AndroidRuntime(2663): java.lang.IllegalStateException: Couldn't read row 2, col -1 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it.
10-21 23:24:02.178: E/AndroidRuntime(2663):     at android.database.CursorWindow.nativeGetString(Native Method)
10-21 23:24:02.178: E/AndroidRuntime(2663):     at android.database.CursorWindow.getString(CursorWindow.java:434)
10-21 23:24:02.178: E/AndroidRuntime(2663):     at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:51)
10-21 23:24:02.178: E/AndroidRuntime(2663):     at android.database.CursorWrapper.getString(CursorWrapper.java:114)
10-21 23:24:02.178: E/AndroidRuntime(2663):     at com.rone.glucometer.FuncLogbook.onItemClick(FuncLogbook.java:227)
10-21 23:24:02.178: E/AndroidRuntime(2663):     at android.widget.AdapterView.performItemClick(AdapterView.java:298)
10-21 23:24:02.178: E/AndroidRuntime(2663):     at android.widget.AbsListView.performItemClick(AbsListView.java:1086)
10-21 23:24:02.178: E/AndroidRuntime(2663):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2855)
10-21 23:24:02.178: E/AndroidRuntime(2663):     at android.widget.AbsListView$1.run(AbsListView.java:3529)
10-21 23:24:02.178: E/AndroidRuntime(2663):     at android.os.Handler.handleCallback(Handler.java:615)
10-21 23:24:02.178: E/AndroidRuntime(2663):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-21 23:24:02.178: E/AndroidRuntime(2663):     at android.os.Looper.loop(Looper.java:137)
10-21 23:24:02.178: E/AndroidRuntime(2663):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-21 23:24:02.178: E/AndroidRuntime(2663):     at java.lang.reflect.Method.invokeNative(Native Method)
10-21 23:24:02.178: E/AndroidRuntime(2663):     at java.lang.reflect.Method.invoke(Method.java:511)
10-21 23:24:02.178: E/AndroidRuntime(2663):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-21 23:24:02.178: E/AndroidRuntime(2663):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-21 23:24:02.178: E/AndroidRuntime(2663):     at dalvik.system.NativeStart.main(Native Method) 
```

**更新** 我意识到上面的 logcat 错误是由于我没有列出 onCreateLoader 中的所有列；为简单起见并减小大小，我在此示例中仅列出了 4 列，但我有接近 15 列。谢谢，您的代码运行良好 Luksprog

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:09:29.233

您的第二次尝试不起作用，因为您使用的`ArrayList`是现在未初始化的相同，因为您使用的是`Cursor`基于适配器。相反，您应该`Cursor`从适配器获取 （使用`getItem(position)`您将`Cursor`在正确行获得位置的方法）并从中获取数据：

```
public void onItemClick(AdapterView<?> parent, View view, int pos, long id) {       
    Intent UpdateDBDetails = new Intent(this, UpdateDBDetails.class);   
    Cursor c = adapter.getItem(position);
    Bundle dataBundle =  new Bundle();
    dataBundle.putString("clickeduRowId", c.getString(c.getColumnIndex(the_index_for_this_column_data))); // One of the fields from AddDBHelper.KEY_BGL, AddDBHelper.KEY_ROWID, AddDBHelper.KEY_CATEG, AddDBHelper.KEY_TIME
    // the same for the other fields. 

    UpdateDBDetails.putExtras(dataBundle);
    startActivity(UpdateDBDetails);
} 
```

此外，为了安全起见，请`LoaderManager`在实例化适配器后调用。

# c++ - wxWidgets：不能从 wxListCtrl 继承

> ID：12997366
> 
> 赞同：0
> 
> 时间：2012-10-21T11:26:16.053
> 
> 标签：c++, wxwidgets

我对以下代码有一个冻结问题：（EBCFrame 是一个继承类（wxFrame）。寻找“else”部分，谢谢）

```
void EBCFrame::OnOpen(wxCommandEvent& event)
{
    int error = 0;
    _window = new wxScrolledWindow(this, wxID_ANY, wxPoint(0, 0), wxSize(600, 400), wxVSCROLL|wxHSCROLL);

    wxFileDialog* fileDialog = new wxFileDialog(this, wxT("Select a file"), wxEmptyString, wxEmptyString, wxT("Event Bus configuration file (*.ebf)|*.ebf|Txt|*.txt|All|*"));
    if(fileDialog->ShowModal() == wxID_OK)
    {
        //taking the file's name we want to process
        wxString tempfilename;
        tempfilename += fileDialog->GetPath();
        //need to convert to const char*
        char* filename = new char[tempfilename.length()];
        strncpy(filename, (const char*)tempfilename.mb_str(wxConvUTF8), tempfilename.length() - 1);
        //done

        _handler->Read(filename);
        //processing it
        error = _handler->GetError();
        if(error != 0)  //an error has occoured
        {
            wxMessageDialog dialog( NULL,  wxT("An error has occoured: " + wxString::FromAscii(strerror(error))), wxT("Error"), wxOK|wxICON_ERROR);
            dialog.ShowModal();
        }
        else
        {
            // Create a list in report mode
            EBCList* list = new EBCList();
            // it works instead
            //wxListCtrl* list = new wxListCtrl(this, wxID_ANY, wxDefaultPosition, wxSize(400, 400),wxLC_REPORT|wxLC_SINGLE_SEL);
            // even if I delete the following code, and I leave only the first code line in the else section, it still freezes
            // Insert two columns
            wxListItem itemCol;
            itemCol.SetText(wxT("Param"));
            itemCol.SetImage(-1);
            itemCol.SetAlign(wxLIST_FORMAT_CENTRE);
            list->InsertColumn(0, itemCol);
            list->SetColumnWidth(0, wxLIST_AUTOSIZE );
            itemCol.SetText(wxT("Value"));
            itemCol.SetAlign(wxLIST_FORMAT_CENTRE);
            list->InsertColumn(1, itemCol);
            list->SetColumnWidth(1, wxLIST_AUTOSIZE );
            // Insert ten items
            for ( int i = 0; i < 5; i++ )
            {
                wxString buf;
                // Insert an item, with a string for column 0,
                buf.Printf(wxString::FromAscii(_handler->GetAttributeName(i + 1).c_str()), i);
                list->InsertItem(i, buf);
                // The item may change position due to e.g. sorting,
                // so store the original index in the item’s data
                list->SetItemData(i, i);
                // Set a string for column 1
                buf.Printf(wxString::FromAscii(_handler->GetAttribute(i + 1).c_str()), i);
                list->SetItem(i, 1, buf);
            }
        }
        _window->Show(true);
    }
} 
```

这是 EBCList 类的头文件和 cpp 文件。标题：

```
#ifndef EBCLIST_H
#define EBCLIST_H
#include <wx/listctrl.h>
#include <wx/menu.h>

enum LIST_ENUM
{
    wxLIST_CTRL = 1000,
    wxLIST_CTRL_EDIT
};

class EBCList : public wxListCtrl
{
    public:
        EBCList();
        ~EBCList();

        void OnActivated(wxListEvent& event);
        void OnRightClick(wxMouseEvent& event);

    private:
    // This class handles events
    DECLARE_EVENT_TABLE()
};

#endif // EBCLIST_H 
```

价格：

```
#include "EBCList.h"

EBCList::EBCList() : wxListCtrl(this, wxID_ANY, wxDefaultPosition, wxSize(400, 400),wxLC_REPORT|wxLC_SINGLE_SEL)
{
}

EBCList::~EBCList()
{
}

void EBCList::OnActivated(wxListEvent& event)
{

}

void EBCList::OnRightClick(wxMouseEvent& event)
{
    int flags;
    long subitem;           /* used by HitTest */
    long key = HitTest(event.GetPosition(), flags, &subitem);

    wxMenu menu;
    wxPoint pos;
    pos = event.GetPosition();
    menu.Append(wxLIST_CTRL_EDIT, _T("&Edit"));
    PopupMenu(&menu, pos.x, pos.y);
}

BEGIN_EVENT_TABLE(EBCList, wxListCtrl)
    EVT_LIST_ITEM_ACTIVATED(wxLIST_CTRL, EBCList::OnActivated)
    EVT_RIGHT_DOWN(EBCList::OnRightClick)
END_EVENT_TABLE() 
```

我不明白为什么程序会冻结，因为我声明 EBCList 构造函数的方式基本上就像 wxListCtrl 构造函数的“短调用”。任何帮助表示赞赏。谢谢您的支持

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T13:49:06.503

您正在为 wxListCtrl 提供一个指向自身的指针作为构造函数中的父窗口：

```
EBCList::EBCList() : wxListCtrl(this, ...
//                              ^^^^ 
```

尝试：

```
EBCList::EBCList(wxWindow* parent) : wxListCtrl(parent, ... 
```

并将其创建为：

```
EBCList* list = new EBCList(this); // EBCFrame as parent 
```

# grails - Grails浮动编辑和精度

> ID：12997373
> 
> 赞同：0
> 
> 时间：2012-10-21T11:27:47.330
> 
> 标签：grails, grails-orm

我在 Grails 应用程序中编辑 Floats 时遇到问题。我将纬度信息存储在我的域类中，并定义了比例：

```
class Location {
   Float latitude
   ...

   static constraints = {
      latitude(scale:15)
   } 
```

因此，我的脚手架视图显示 15 位精度。但是，我只能编辑小数点后的 6 位数字（如果我更改第 7 位数字位置，则没有任何反应）。示例：1.原始：12.123456789，编辑：12.123450789 - 工作正常 2.原始：12.123456789，编辑：12.123456089 - 不起作用，存储以前的值

我使用 H2 DB 进行测试。我认为这是 Grails 或 Gorm 的问题，因为值存储在 DB 中，但 Grails 无法识别“小”数字变化。任何解决方法？:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:30:04.830

`Float`只有大约 7 个十进制数字的精度，除此之外的一切都是内部[二进制分数表示](http://floating-point-gui.de/formats/binary/)的伪影。您可能想`BigDecimal`改用。

# php - 在文件夹中显示图像和文件

> ID：12997374
> 
> 赞同：0
> 
> 时间：2012-10-21T11:27:52.150
> 
> 标签：php, image, directory

我想显示一个文件夹的内容，旁边有一张图片和文件名。我试图通过 获取文件名`scandir`，但它不会改变行，只是在 1 长行中。

我真正想要的是这样的：
`[Image here] [name here]`

代码：

```
$directory = '../../Images'; 
$files = scandir($directory);
print_r($files); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:36:15.227

假设目录中的每个文件都是一个图像：

```
<?php

$directory = './images';

foreach (new DirectoryIterator($directory) as $fn)
{
    if (!$fn->isDir() && !$fn->isDot())
    {
        printf("<p><img src=\"./images/%1\$s\" /> %1\$s</p>\n", $fn->getFilename());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:34:09.093

表会工作。`<html> <body>`但是如果你想让它正确渲染，你必须用等等来包围它。

```
$root = 'http://example.com/images/';
$files = scandir( $directory );
echo '<table>';
foreach( $files as $file )
{
    if(is_file($file))
    {
        echo '<tr><td><img src="' . $root . $file . '" /></td><td>' . $file . '</td></tr>';
    }
}
echo '</table> 
```

# r - 如何重命名由R中的循环索引的元素列表

> ID：12997377
> 
> 赞同：20
> 
> 时间：2012-10-21T11:28:20.310
> 
> 标签：r

我是 R 语言的新手，我还有很多东西要学。我有一个`W`J 元素列表，我想用循环重命名它的元素，即`W[[i]]`with等等。我能怎么做？`Wi``W[[1]]``W1`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-21T11:33:42.737

```
names(W) <- paste0("W", seq_along(W)) 
```

应该做的伎俩。

请注意，这`paste0`是在 R 2.15 中作为`paste(..., sep = "", collapse)`. 如果您使用的是早期版本的 R，您可以使用以下方法实现相同的目的`paste`：

```
names(W) <- paste("W", seq_along(W), sep = "") 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-21T11:56:30.460

或者，您可以使用`sprintf()`：

```
 w<-list(a="give",b="me an",c="example")
 names(w)<-sprintf("W%i",1:length(w)) 
```

如您所见，您不需要循环。

它应该做的工作。在此示例中，名称为 W1、W2 和 W3

```
print(w)
$W1
[1] "give"

$W2
[1] "me an"

$W3
[1] "example" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-10T14:57:00.993

`purrr`使用@Quentin 的数据的解决方案：

```
library(purrr)
w <- list(a = "give", b = "me an", c = "example") %>% 
  set_names(~paste0("W", 1:length(w)))
w
# $W1
# [1] "give"

# $W2
# [1] "me an"

# $W3
# [1] "example" 
```

# php - 从 .phar 档案中提取文件

> ID：12997385
> 
> 赞同：53
> 
> 时间：2012-10-21T11:29:12.990
> 
> 标签：php, phar

对于 phar 文件，我完全错过了一些东西。我正在安装一个需要 phpunit、pdepend 和其他依赖项的项目。我将它们作为 .phar 文件获取。但是，我无法使用命令行工具（php 命令）从中提取文件。我用谷歌搜索了这个问题，但没有找到真正回答这个问题的东西。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2014-01-20T08:34:27.047

扩展@pozs 的答案，您实际上可以在一个简单的单行中使用[PharData->extractTo ：](https://php.net/phar.extractto)

```
php -r '$phar = new Phar("phar-file.phar"); $phar->extractTo("./directory");' 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2014-03-25T03:51:07.800

不确定它是否是新的，但在 PHP 5.4.16 下可以使用：

```
phar extract -f %some phar file% 
```

phar 是相对于您当前的工作目录提取的。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-10-21T11:30:33.870

是的，这个库可以做到：[https ://github.com/koto/phar-util](https://github.com/koto/phar-util)

> phar 提取 library.phar 输出目录

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-07-25T15:34:12.273

PhpStorm IDE 可用于查看 phar 档案的内容。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-06-03T06:08:53.807

[该站点](http://unphar.com)可以轻松地将 .phar 文件转换为 .zip 文件。

试试看。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-10-21T11:32:39.313

如果您只想使用它，则应包含 as `phar:///path/to/myphar.phar/file.php`。

但如果你真的想解压它，请参阅[PharData](http://php.net/manual/en/class.phardata.php)类 - 在命令行中没有已知的（内部）提取，但你可以为此编写一个脚本。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-06-17T12:37:30.370

PHP 还具有提取 phar 档案的功能，但文件保持当前压缩。要正确提取档案，必须先将其转换为未压缩的形式，然后再提取：

```
<?php
$phar = new Phar('Someclass.phar');
$phar2 = $phar->convertToExecutable (Phar::TAR,Phar::NONE); // Convert to an uncompressed tar archive
$phar2->extractTo('/some/path/'); // Extract all files 
```

这将为您提供所有未压缩的文件！

# sql - “不存在”和“不在”，哪个性能更好？

> ID：12997386
> 
> 赞同：3
> 
> 时间：2012-10-21T11:29:19.093
> 
> 标签：sql, oracle

```
select objectid
      ,name
      ,address
 from library_t l 
 where not exists (select *
                     from d107 d 
                    where l.objectid = d.objectid
                   )

select objectid
      ,name
      ,address
  from library_t l 
  where l.objectid not in (select objectid 
                             from d107
                          ) 
```

如果两个 objectid 列都有索引，在 oracle 中哪个更好？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-21T11:31:14.113

使用`NOT EXISTS`.

目前执行计划可能是相同的，但是如果将来更改任一列以**允许 NULL**，则 NOT IN 版本将需要做更多的工作。

关于 NOT EXISTS 和 NOT IN，需要注意的最重要的一点是，与 EXISTS 和 IN 不同，它们并非在所有情况下都等价。具体来说，当涉及 NULL 时，它们将返回不同的结果。具体来说，当子查询返回一个空值时，NOT IN 将不匹配任何行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T21:05:48.570

`[NOT] IN`和`[NOT] EXISTS`运算符的处理方式不同。`[NOT] IN`处理起来更像是一个连接，而`[NOT] EXISTS`处理起来更像是一个带`IF`条件的循环。当然，选择一个而不是另一个取决于一种情况：驱动和驱动查询返回的数据量。在`[NOT] IN`运算符内部查询的情况下（`..where id in (select id from table ))`是驱动查询，而在`[NOT] EXISTS`外部查询的情况下是驱动查询。因此，如果子查询（内部查询）由于子查询中的表包含而返回少量数据`[NOT] IN`如果子查询返回的数据量大或者主要过滤发生在外查询`[NOT] EXISTS`算 子上，行数少或者有密集过滤可能会提供更好的性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T11:44:23.613

他们都做一个子查询。更快的是：

```
select lib.objectid, lib.name, lib.address
from library_t lib
     left outer join d107 dd on lib.objectid = dd.objectid
where dd is null 
```

# javascript - 垂直排序 DIV

> ID：12997399
> 
> 赞同：2
> 
> 时间：2012-10-21T11:30:57.580
> 
> 标签：javascript, jquery, css

我目前正在研究一种需要多个*<DIV>*元素**垂直**排序但同时保持其响应能力的设计。

* * *

例子：

### 更广泛的布局

![更广泛的布局](../Images/927804be8cc2cfffcdf87739cc3d69b2.png)

### 更高的布局

![更高的布局](../Images/77c03fe82e64afcef5b4e0d22e988add.png)

* * *

我使用了浮点数、内联块显示，甚至粗暴地将其与 jQuery 放在一起，但所有元素都是水平排序的。

环顾四周，我似乎找不到任何其他有相同问题或解决方案的人，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T12:58:44.177

如果您不太关心跨浏览器支持（只想让它在兼容/最新的浏览器中更漂亮），或者很乐意使用某种 JavaScript shim 来启用其他支持浏览器，您可以使用`column-width`定义列的宽度，然后允许浏览器重排这些列以容纳内容：

```
.gridbox {
    display: block;
    -webkit-column-width: 4em;
    -moz-column-width: 4em;
    -o-column-width: 4em;
    -ms-column-width: 4em;
    column-width: 4em;
    /* aesthetics, adjust to taste,
       only the above is important */
    margin: 1em auto;
    padding: 1em;
    border: 1px solid #f90;
    border-radius: 1em;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/vvRm7/)。

很明显，我在演示中使用了`li`和元素，但如果您愿意，这可以直接转移到元素上。只需以与上述元素相同的方式设置父/容器的样式，并根据需要设置子元素的样式。`ul``div``ul`

参考：

*   [CSS 多列布局](http://www.w3.org/TR/css3-multicol/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:43:14.520

您必须稍微修改您的 html 结构。为此，您必须在主容器中添加子容器，以便“分组”您的内容。像这样的东西：

```
// first example
<div id="main">
  <div class="group2">
    <span>1</span>
    <span>2</span>
  </div>
  ...
</div>

// second example
<div id="main">
  <div class="group3">
    <span>1</span>
    <span>2</span>
    <span>3</span>
  </div>
  ...
</div> 
```

使用 css 限制组容器的宽度，您可能会得到想要的效果。

# javascript - 使用 knockout.js 的表列总和

> ID：12997402
> 
> 赞同：-2
> 
> 时间：2012-10-21T11:31:13.090
> 
> 标签：javascript, knockout.js, knockout-2.0

![在此处输入图像描述](../Images/f8348484e880c28ed207f2de5dd240c4.png)

如何使用 knockout.js 实现上表列计算。我可以使用 jquery 实现相同的功能，但是由于我是 knockout.js 的初学者，所以我不知道使用 knockout.js 的实现。

我不想使用 Json 生成上述表格，而是直接在 HTML 表格本身中生成该表格。这是HTML代码

```
 <table>
         <thead>
             <tr>
                <th>Price</th>
                <th>Quantity</th>
                <th>Amount</th>
             </tr>
         </thead>
         <tbody>
             <tr>
                 <td><input type="text"></td>
                 <td>2</td>
                 <td></td> 
             </tr>
             <tr>
                 <td><input type="text"></td>
                 <td>1</td>
                 <td></td> 
             </tr>
              <tr>
                 <td><input type="text"></td>
                 <td>2</td>
                 <td></td> 
             </tr>
              <tr>
                 <td><input type="text"></td>
                 <td>100</td>
                 <td></td> 
             </tr>    
         </tbody> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:39:35.403

错误的工作工具。Knockout 是关于将您的数据绑定到 HTML，而不是在 HTML 中处理文本。我建议在 jquery 中使用选择器并对这些值求和。

# python - 让 LiveServerTestCase 在每次测试前不调用 setUp()

> ID：12997406
> 
> 赞同：1
> 
> 时间：2012-10-21T11:31:59.917
> 
> 标签：python, django, django-testing, django-1.4, factory-boy

我在使用 LiveServerTestCase 测试 django 应用程序时遇到了一个问题。LiveServerTestCase 在执行每个测试之前执行 setUp() 函数。但我正在使用工厂男孩的工厂来创建用于测试的对象（用户、项目等......）。并且在执行每个测试之前创建相同的对象。如何一次创建此对象并进行所有测试以在数据库中查看此对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:13:12.270

`setUp()`每次测试前都会被调用。

如果您想为整个测试用例创建一次对象，您可以使用`setUpClass()`。

例如

```
class SomeTest(LiveServerTestCase):
        @classmethod
        def setUpClass(cls):
            # create objects here
            LiveServerTestCase.setUpClass() 
```

不要忘记打电话`LiveServerTestCase.setUpClass()`，否则实时服务器将无法正常运行。

# c++ - 商业游戏如何处理动态字体加载？

> ID：12997411
> 
> 赞同：2
> 
> 时间：2012-10-21T11:33:28.763
> 
> 标签：c++, fonts, directx, freetype, direct3d11

这就是我在伪代码（简化）中处理字体渲染的方式：

```
FontFace* CreateFontFace(fontName, fontSize)
{
    FontFace* fontFace = LoadFromDiskCache(fontName, fontSize);
    if ( fontFace == 0 )
    {
        for(each glyph)
        {
            Load glyph using FreeType;
            Load its size and metric;
        }
        Pack all glyph bitmaps to a single UV-atlas
        {
            Calculate rectangles (RectangleBinPack); // Very slow!
            Blit glyphs to UV-atlas; // Slow!
            Insert rectangles to std::vector; // UV-dictionary;
            Insert metrics to std::vector;
        }
        Wrap it all to a struct FontFace;
        AddToDiskCache(fontName, fontSize); 
        // so on next startup it will be cached on HDD 
    }
    return fontFace;
}

bool OnInit(fontName, fontSize)
{
    for (each fontName)
    {
        for (each fontSize)
        {
            FontFace* fontFace = CreateFontFace(fontName, fontSize));
            Insert fontFace to container based on std::map;
        }
    }
}

void OnSomtimes(FontFace, pDevice)
{
    On demand create texture from FontFace.uvatlas on pDevice;
}

void OnRender(wstring, FontFace)
{
    if(needUpdate)
    {
        // Generate std::vector<Sprite> using given FontFace
        sprites = CreateSprites(wstring, FontFace);
    }

    Draw all vector<Sprite> at once with my SpriteBatch object; 
    // Big dynamic VertexBuffer, Instancing or GeometryShader 
    // depending on hardware caps
} 
```

所以我可以缓存一些最常用的字体，甚至所有曾经在游戏中使用过的字体。但在某些应用程序中，用户可以即时选择应用程序从未见过的另一种字体/大小/样式，并立即应用。或者例如，在某些游戏中，用户可以替换游戏文件夹中的“font.tff”文件，游戏将在启动时以多种尺寸/样式和数千个 Unicode 字符中的每一个使用它，而无需额外耗时的预加载。奇迹！

我需要这样的东西 - 即时字体加载。

当然，我可以根据需要单独加载字形，并逐个地渲染字形，但这意味着没有批处理，每帧有数千个 Draw 调用和巨大的 GPU 带宽。不确定它是否适用于 OpenGL，但它不适用于 D3D11。

他们如何在游戏工作室中做到这一点？也许您知道另一种方法？我听说过将字体渲染为几何图形、GPU 处理和复杂曲线算法，但在 google 中找不到有用的信息。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T00:38:05.717

游戏中的字体渲染通常是从包含编译/离线时生成的所有字形的位图完成的。您可以使用像[AngelCode BMFont](http://www.angelcode.com/products/bmfont/)这样的位图字体生成器，它非常易于使用并且非常适合游戏，因为它支持对 GPU 带宽更友好的 DXTx 压缩位图。

对于高分辨率字体，[Alpha 文本放大](https://steamcdn-a.akamaihd.net/apps/valve/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf)技术是目前游戏中的首选技术，主要是在渲染贴花时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:42:42.023

与其逐个字形地进行，为什么不在软件中一次将整个字符串渲染为单个位图，然后将其渲染为单个纹理？由于文本在最初显示后通常不会频繁更改，因此您可以在首次显示时按需渲染有问题的字符串，然后将字符串的纹理保留在 GPU 中，直到它离开屏幕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T12:52:16.097

明显的改进是不预先渲染所有 50.000+ Unicode 字符。你真的需要中文吗？取而代之的是，使`FontFace`能够根据需要动态地对字符进行 blitting，并且最初只 blit `U+0020 - U+007E`(ASCII)。

一个更聪明的解决方案可能是在您需要第一个时从脚​​本中渲染所有字符。毕竟，如果您需要一个泰语字符，您可能需要更多。但这显然需要一些额外的表来对 Unicode 字符进行分组。

# jquery - 如何调整 jquery 按钮的大小（通过 CSS）

> ID：12997412
> 
> 赞同：0
> 
> 时间：2012-10-21T11:33:34.400
> 
> 标签：jquery, jquery-ui

大家好，我是 JQuery 的新手

我想重新调整 JQuery 按钮的大小，我的代码是

```
<input type="submit" id="Btn1" value="Login"/> 
```

在脚本中

```
 $(document).ready(function(){
           $("#Btn1").button();
   }); 
```

但我得到大字体和大按钮，我希望通过 CSS 小尺寸。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:35:49.500

CSS代码：

```
#Btn1 {
  font-size: small;
} 
```

或者：

```
#Btn2 {
  font-size: 50%;
} 
```

[演示](http://jsfiddle.net/vKmkJ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:38:04.087

要重新调整按钮的大小，请执行以下操作：

```
.button_class_name {
 display: block;
 width: 60%; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T11:40:05.673

Jquery UI 使用相对 EM 来调整所有元素的大小。如果没有一些粗略的 CSS 来在 Jquery UI 项目中全局设置字体大小，您最终将在大多数 UI 小部件中使用大量按钮和大文本。

要在所有 Jquery UI 元素中解决此问题，请将字体大小绝对设置在正文上。

```
body {
    font-size:10pt; // or 12px
} 
```

这将与您网站上的所有其他字体大小混为一谈，因此在将此类内容重新编码到您的 CSS 时要谨慎使用。

或者，您可以隔离最高级别的父级并声明由按钮继承的绝对字体大小，然后由 Jquery UI 相对调整大小。

```
.button_container {
    font-size:10pt; // or 12px
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T12:03:20.430

Jquery ui 有自己的样式表来呈现为 Button，它在幕后使用不同的类来实现功能。你可以查看演示[`Jquery Button`](http://api.jqueryui.com/button/)

jquery 使用`ui-button`类来装饰按钮，你可以像这样覆盖设置

```
input.ui-button
{
    font-size:14px;
    padding:.3em 1em;
} 
```

和一个[`Working Demo`](http://jsfiddle.net/xRfwJ/)

​</p>

# wordpress - WordPress 中的 HTML5 样板集成

> ID：12997417
> 
> 赞同：1
> 
> 时间：2012-10-21T11:34:08.430
> 
> 标签：wordpress, html5boilerplate

是否可以将 HTML5 Boilerplate 集成到 WordPress 主题结构中？如果有人对如何做到这一点有任何想法，你能分享一下你对此的看法或看法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T14:16:26.437

有一些基于 html5 样板的基本主题可用。[请参阅http://wordpress.org/extend/themes/search.php?q=html5+boilerplate](http://wordpress.org/extend/themes/search.php?q=html5+boilerplate)上的主题，它们会让您了解在使用 Wordpress 主题结构方面您需要对自己的主题做什么，即header.php、index.php等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:38:07.467

是的，很有可能。如何使其成为 WordPress 主题？将它们切片为页眉、页脚和侧边栏。剩下的就是内容，post、page、custom post、archive等的内容。我建议你从默认的WordPress主题学习WordPress主题开发，比如二十一、二十一，或者最近的一、二十二。它们是学习在 WordPress 主题开发中实施的最佳实践和基本知识的绝佳资源。:-)

哦，我忘了添加一些有用的链接来开发 WordPress 主题。你可以到处搜索创建WordPress主题的教程，例如wp.smashingmagazine.com、wp.tutsplus.com等。但我建议你首先参考WordPress网站官方的主题开发这个页面。[http://codex.wordpress.org/Theme_Development](http://codex.wordpress.org/Theme_Development)。

希望能帮助到你。干杯!

# c++ - 使用 GDI+ 库打开不同的图形图像文件并将它们绘制在主应用程序窗口的背景上

> ID：12997419
> 
> 赞同：0
> 
> 时间：2012-10-21T11:34:17.863
> 
> 标签：c++, winapi, gdi+

我在程序中使用 GDI+ 绘制不同图像时遇到了一些问题。

我的程序代表一个带有按钮和背景的窗口。

我的程序的逻辑旨在以下列方式工作：

*   当用户点击按钮时，必须打开一个打开文件对话框并要求用户选择一个图像文件。
*   当用户完成此操作后，程序必须在主（和单个）程序窗口的背景上绘制该文件。

我的问题是所有 Gdiplus 对象都没有默认构造函数。

所以即使我选择 FromFile 方法，我的位图对象仍然有相同的图片，在构造函数中分配，所以我什至没有意识到如何动态更改它们。

你能建议一些解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:16:57.947

Image::FromFile() 方法是**静态**的，它返回一个新构造的包含图像的 Image 对象。将其视为工厂方法。如果没有看到代码，我不得不猜测您忘记使用该方法的返回值。

# android - Android小部件滚动

> ID：12997421
> 
> 赞同：2
> 
> 时间：2012-10-21T11:34:34.700
> 
> 标签：android, widget, scroll

我正在寻找一种在 Android 主屏幕小部件中实现滚动的解决方案。我已经用 List 控件实现了它，但它仅适用于 Android 3.0+ 版本，否则（例如 2.3.7）它表示应用小部件不允许使用列表控件。

但是我已经看到了一个滚动小部件，它在 2.3.7 设备上运行。任何想法如何做到这一点？

谢谢和最好的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:41:08.620

把它放在你的清单中

```
<receiver android:name=".WidgetName"
              android:label="@string/WidgetLabel">

        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE"/>
        </intent-filter>

        <meta-data android:name="android.appwidget.provider"
                   android:resource="@xml/widgetresource"/>

        <!--this is the part that you will need to add-->
        <meta-data android:name="LauncherMetadata.Requirements.Scrollable"
                   android:value="true" />
</receiver> 
```

有些启动器支持在 2.3 及更低版本上滚动，有些则不支持。这将允许支持它的启动器使用您的小部件。不支持滚动的启动不会将小部件显示为选项。

# php - Webform 未传递正确的值来搜索 MYSQL 记录

> ID：12997423
> 
> 赞同：2
> 
> 时间：2012-10-21T11:34:39.327
> 
> 标签：php, webforms

我遇到了一个使用 PHP 的网络表单的问题。我敢肯定这很明显，但找不到问题。

我想要做的基本上是在表单上的字段中输入一个数值，然后将值发送到 mysql 数据库，请求链接到该值的记录，

我遇到的问题是，当我点击“提交”按钮时，该值没有被正确获取，但会获取提交前一个查询的前一个值。

例如，我想检索“id”为 1 的记录。我在字段中输入“1”（该字段的 id 为“identry”），但出现错误。该错误基本上表示由于某种原因我没有在“id”字段中输入值。然后我再次访问搜索字段，输入值“2”，然后点击“提交”。然后我得到一个结果，它刚刚访问了 'id' 为 '1' 的记录（上一个查询！！！！）

有任何想法吗？？

这是我的表单代码.....

```
<form id="form1" name="form1" method="post" >
          <table width="400" border="0">
            <tr>
              <td width = "150" ><div align="right">HPOV reference </div></td>   
              <td width = "150"><label>
              <input name= "identry" type="text" id="identry" />
              </label></td>
              <td width = "100"><label>
                <div align="left">
                <input name="Submit" type="submit" onclick="MM_openBrWindow('HPOVwindow.php?id=<?php echo $_POST['identry']; ?>','','toolbar=yes,width=1000,height=1000')" />
                </div>
                </label></td>
            </tr>
          </table>
        </div>
      </form> 
```

我认为这是我如何在第一个实例中提交变量但无法找到如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T11:36:32.710

当您提交表单时，您正在发布上一个条目。

PHP 无法在客户端处理数据，直到它被发送到服务器。

这一行：`<?php echo $_POST['identry']; ?>`告诉 PHP 填充发布给它的值，这将是前一个条目。你的意思是：`document.getElementById("identry").value`

编辑：所以输入值的行看起来像这样：

```
<input name="Submit" type="submit" onclick="MM_openBrWindow('HPOVwindow.php?id=" + document.getElementById("identry").value + "','','toolbar=yes,width=1000,height=1000')" /> 
```

并尝试以下操作：

```
<form id="form1" name="form1" method="post" >
          <table width="400" border="0">
            <tr>
              <td width = "150" ><div align="right">HPOV reference </div></td>   
              <td width = "150"><label>
              <input name= "identry" type="text" id="identry" />
              </label></td>
              <td width = "100"><label>
                <div align="left">
                <input name="Submit" type="submit" onclick="submitForm();" /> 
                </div>
                </label></td>
            </tr>
          </table>
        </div>
        <script>
          function submitForm() {
                     window.open('HPOVwindow.php?id=' + document.getElementById("identry").value,'','toolbar=yes,width=1000,height=1000');
                                 return false;

          }
        </script>
      </form> 
```

# php - 我应该考虑 Zend Framework 2 还是使用 ZF1 来进行即将到来的项目

> ID：12997425
> 
> 赞同：0
> 
> 时间：2012-10-21T11:34:53.787
> 
> 标签：php, zend-framework, zend-framework2

我将开始一个新的 Saas 项目。我已经使用 Zend Framework 几年了，想知道是否继续使用 ZF2，即 ZF2 似乎不向后兼容 ZF1，我想知道学习曲线有多少学习曲线Zend Framework 2 考虑具有 ZF1 的背景。我对 ZF2 中可重用模块的概念感兴趣，而不是它们在 ZF1 中的实现方式。ZF2 的稳定版本是最近才发布的，我想听听有机会使用它的人的意见。

简而言之，鉴于我必须尽快开始一个项目，因此考虑 ZF2 是一个更好的主意，因为我假设一些可用于 ZF2 的模块可以帮助加快我的工作速度 - 或者我最好使用 ZF1 和不同的图书馆？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T17:48:06.930

老实说，您最了解项目要求和时间表；因此，您应该花一些时间来估计学习 ZF2 与 Shoehorn ZF1 需要多少时间才能完成您需要的工作。

但是，如果可重复使用的模块对您来说是一个加分项，那么 ZF2 绝对是一个更好的选择。此外，考虑到 ZF1 的使用寿命有限 - 我们正在考虑在 16-22 个月内停止对它的支持。

# php - 突出显示搜索字符串的不同变体

> ID：12997430
> 
> 赞同：1
> 
> 时间：2012-10-21T11:35:51.883
> 
> 标签：php, mysql, highlight

我使用的代码也可以找到类似的单词，例如，如果用户搜索“hello”这个词，它也会找到“hello”这个词

但是当我尝试在结果中突出显示搜索字符串时，它只突出显示“hello”，即使它找到了“hello”

代码：

```
$StrSQL = "SELECT `text` FROM `articles` WHERE $strCondition ORDER BY $strOrderBy";

    foreach ($dbh->query($StrSQL) as $row) {
        $text = $row['text'];
        $searchvalue2 = $row['text'];

//to highlight entire unicode word
$searchvalue2 = preg_replace("/\p{L}*?".preg_quote($query)."\p{L}*/ui", "<b>$0</b>", $searchvalue2);
echo "<br>".$searchvalue2."<br>"; 
```

$strCondition 的回声是这样的：

```
( REPLACE(text, 'ـ', '') REGEXP 'hell(ö|o|ô)') 
```

我怎样才能让它突出你好你好和你好，而不仅仅是确切的$查询..有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:59:59.290

有 2 个 php 函数可能会有所帮助。

[**Soundex**](http://www.php.net/manual/en/function.soundex.php)是一种语音算法，用于按声音索引名称，如英语发音。以及 改进 Soundex 英语的[**Metaphone 。**](http://php.net/manual/en/function.metaphone.php)

您将需要创建一个单独的字段来保存它。

# php - 我如何知道网站上的访问者数量？

> ID：12997436
> 
> 赞同：0
> 
> 时间：2012-10-21T11:36:38.317
> 
> 标签：php, mysql, sql

大家好，你们好吗我只想知道如何计算所有页面的访问者数量而不是一个页面，例如，我将此代码放在一个页面中，这会计算我放置的页面的访问者数量，而不是所有访问者在所有页面上。

```
<?php 

$time=time();
$ip=$_SERVER['REMOTE_ADDR'];
$timeout=$time-300;
$query1=mysql_query("delete from online where ip='$ip'")or die (mysql_error());
$query2=mysql_query("delete from online where time<$timeout")or die (mysql_error());
$query3=mysql_query("insert into online values('','$ip','$time')")or die (mysql_error());
$query4=mysql_query("select * from online ")or die (mysql_error());
echo $num=mysql_num_rows($query4);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:42:07.093

更改`echo $num=mysql_num_rows($query4);`为

```
$num=mysql_num_rows($query4);
echo $num; 
```

请切换到 mysqli 并使用[准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)

# rake - 在 openshift 中启用 rake 任务跟踪模式

> ID：12997440
> 
> 赞同：1
> 
> 时间：2012-10-21T11:37:18.407
> 
> 标签：rake, openshift

我正在尝试在 Openshift 中部署一个 Ruby 应用程序我有这个用于 openshift 的部署挂钩

rake 在 Openshift 中失败，即 rake db:migrate 我正在考虑

```
set -x
pushd ${OPENSHIFT_REPO_DIR} > /dev/null
export TRACE='--trace'
RAILS_ENV="production" bundle exec rake db:migrate --trace
bundle exec echo $RUBY_VERSION
popd > /dev/null 
```

现在尝试将 rake 运行为

```
RAILS_ENV="production" bundle exec rake db:migrate --trace 
```

返回我的输出

```
Unknown switches '--trace' 
```

并且因为它，我无法弄清楚你的原因，耙子没有任何建议

请不要回答我使用heroku can all，因为应用程序大小超过100 MB

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T00:32:16.047

您看到的错误消息来自捆绑包：

```
$ 耙子--trdfsdff
无效选项：--trdfsdff

$捆绑--跟踪
未知开关“--trace”

```

尝试调用 bundle 如下：

`RAILS_ENV="production" bundle exec "rake db:migrate --trace"`

# opencv - 一个回调的多个滑块

> ID：12997441
> 
> 赞同：7
> 
> 时间：2012-10-21T11:37:29.950
> 
> 标签：opencv, callback, slider, trackbar

是否可以创建一些滑块并为所有滑块进行一次回调？

我正在创建一个窗口，我想在其中设置大约 10 个参数。最好为所有这些函数设置 1 个回调函数，而不是 10 个函数。

目前我创建这样的轨迹栏：

```
cvCreateTrackbar("Var1","Window",&global_var1, 250, changing_var1);
cvCreateTrackbar("Var2","Window",&global_var2, 250, changing_var2); 
```

接着

```
void changing_var1(int pos) {
    global_var1 = pos;
}    

void changing_var2(int pos) {
    global_var2 = pos;
} 
```

是否可以创建一个可以根据我要更改的参数更改所有参数的回调？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T04:55:07.263

是的，您应该能够做到这一点（至少使用 C++ 接口）。您将需要使用可选`userData`字段。下面是一个小例子，说明如何做到这一点：

```
#include <opencv2/highgui/highgui.hpp>
#include <iostream>

using namespace std;
using namespace cv;

struct ColorThresholdData
{
    int redHigh;
    int redLow;
};

enum ColorThresholdType
{
    RED_HIGH,
    RED_LOW
};

void fooCallback(int value, void* colorThreshold);

struct ColorThresholdData data;
int main(int argc, char** argv)
{
    ...
    createTrackbar("red high", windowName, NULL, 255, fooCallback, new ColorThresholdType(RED_HIGH));
    createTrackbar("red low", windowName, NULL, 255, fooCallback, new ColorThresholdType(RED_LOW));
    ...
}

void fooCallback(int value, void* colorThreshold)
{
    ColorThresholdType* ct = reinterpret_cast<ColorThresholdType*>(colorThreshold);
    switch(*ct)
    {
    case RED_HIGH:
        cout << "Got RED_HIGH value" << endl;
        data.redHigh = value;
        break;
    case RED_LOW:
        cout << "Got RED_LOW value" << endl;
        data.redLow = value;
        break;
    }
} 
```

希望这就是你要找的:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-21T23:56:54.050

我正在测试对三个轨迹栏使用一个回调，而不使用`userData`字段。它似乎工作。

看我的代码（跟trackbars相关的部分，不过复制粘贴编译够了，其他人可以轻松测试）：

```
#include <opencv2/imgproc.hpp>
#include <opencv2/highgui.hpp>
using namespace cv;

// global variables for trackbars: initial and max positions
const int alpha_sl_max = 1000;
int alpha_sl = 500;
const int beta_sl_max = 500;
int beta_sl = 250;
const int gamma_sl_max = 1000;
int gamma_sl = 500;
double alpha, beta, gamma; // I will convert slider value to something useful

// Control window (to show trackbars and text) and text options
Mat img_ctrl; // blank image where I will print the text
int ctrl_w = 640, ctrl_h = 150;
int font = FONT_HERSHEY_SIMPLEX;
int txt_size = 1;
Scalar txt_color = (0, 0, 255);
int txt_thick = 2;
int linetype = LINE_AA;
#define TXT_CONFIG font, txt_size, txt_color, txt_thick, linetype

// same callback from three trackbars
static void on_trackbar(int, void*) {
    alpha = (double)alpha_sl / 500.0;
    beta = (double)beta_sl - 250;
    gamma = pow(((double)gamma_sl / 500.0), 4);
    img_ctrl = Mat::zeros(ctrl_h, ctrl_w, CV_8U);

    putText(img_ctrl, std::to_string(alpha), Point(10, 30), TXT_CONFIG);
    putText(img_ctrl, std::to_string(beta), Point(10, 60), TXT_CONFIG);
    putText(img_ctrl, std::to_string(gamma), Point(10, 90), TXT_CONFIG);
    imshow("Controls", img_ctrl);
}

int main() {
    // Create trackbars and window
    namedWindow("Controls"); // Create Window
    resizeWindow("Controls", ctrl_w, ctrl_h);
    createTrackbar("Alpha", "Controls", &alpha_sl, alpha_sl_max, on_trackbar);
    createTrackbar("Beta", "Controls", &beta_sl, beta_sl_max, on_trackbar);
    createTrackbar("Gamma", "Controls", &gamma_sl, gamma_sl_max, on_trackbar);

    // call first time, to show image (view callback function)
    on_trackbar(alpha_sl, 0);

    waitKey();
    return 0;
} 
```

# ruby - 挣扎于子数组

> ID：12997444
> 
> 赞同：-2
> 
> 时间：2012-10-21T11:38:10.390
> 
> 标签：ruby

我有一个数组（更准确地说是嵌套数组），如下所示：

```
[["Armando", "P"], ["Dave", "S"], ["Richard", "R"], ["Michael", "S"], 
["Allen", "S"], ["Omer", "P"], ["David E.", "R"], ["Richard X.", "P"]] 
```

我想一次将两个元组作为参数传递给另一个函数，例如：

```
rps_result(["Armando", "P"], ["Dave", "S"])
rps_result(["Richard", "R"], ["Michael", "S"]) 
```

当我遍历我的数组时，我正在尝试这样做：

```
arr.each_slice(2) do |first, second|  
  rps_game_winner([first, second])
end 
```

但是，当我打印参数的值时，这并没有给出想要的答案。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:43:38.450

只需删除参数上的方括号：

```
arr.each_slice(2) { |first, second| fun(first, second) } 
```

# objective-c - AVFoundation 的 AVAssetWriterInput 期望MediaDataInRealTime 属性究竟是做什么的？

> ID：12997445
> 
> 赞同：9
> 
> 时间：2012-10-21T11:38:09.793
> 
> 标签：objective-c, macos, cocoa, video, avfoundation

我正在开发一个应用程序，它从磁盘读取媒体数据，将其转换为适当的像素格式，然后将其传递给 AVAssetWriter 进行压缩并写入磁盘。我正在自己阅读交错而不使用 AVAssetReader。我的读者确保以串行方式呈现恰好一帧的视频数据和一帧的音频数据。我遇到的问题是，如果我没有将 expectsMediaDataInRealTime 属性设置为**YES**，视频资产编写器将始终返回**NO**对于 isReadyForMoreMediaData 恰好在 30 帧之后。如果我在 30 帧之前停止写入，它工作正常并且输出文件有效。但是，如果我将 expectsMediaDataInRealTime 设置为 YES，它会在整个持续时间（可能是几千帧）内完美运行。在将 expectsMediaDataInRealTime 设置为 YES 开始转码操作后，我观察了应用程序在压缩很长视频的过程中的内存使用情况，没有任何不合理的内存使用或任何内存泄漏。生成的 MOV 文件看起来确实写得很正常，例如，正如人们所期望的那样，音频数据与视频数据交织在一起。

那么，如果将 expectsMediaDataInRealTime 设置为 YES 没有明显的缺点，我为什么还要将其设置为 NO 呢？这仅在使用 Apple API 读取数据（使用 AVAssetReader）时适用吗？文档说此属性控制写入“以理想的交错模式写入媒体数据，以提高存储和播放效率”，但是当 expectsMediaDataInRealTime 设置为 YES 时，isReadyForMoreMediaData 永远不会返回 NO，并且文件似乎被完美写入。那么，如果 AVAssetWriter 在此属性设置为 YES 时可以执行此操作，为什么设置为 NO 时不能执行此操作？来源完全一样。

除了“确保正确计算 readyForMoreMediaData 的值”（这对我来说绝对没有任何意义）之外，这个属性究竟做了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-15T13:09:59.403

据我了解，将 expectsMediaDataInRealTime 设置为 YES 意味着编码器期待实时数据流馈送，例如摄像头等。在这种情况下，您将不断向编码器馈送数据，isReadyForMoreMediaData 会告诉您是否可以馈送数据到编码器。如果 isReadyForMoreMediaData 为 NO，您将不得不删除当前样本，并等待下一个样本到达并再次检查 isReadyForMoreMediaData 是否为 YES。

另一方面，如果 expectsMediaDataInRealTime 为 NO，则表示编码器不是实时源，而是离线数据流，例如 AVAssetReader。在这种情况下，因为你可以自己控制流的速度，所以，当 isReadyForMoreMediaData 为 NO 时，你可以保持输入和编码器，等待 isReadyForMoreMediaData 变为 YES（例如，使用无限循环休眠并等待 isReadyForMoreMediaData变化等）。

我假设这样做的目的是为了内部机制尝试尽可能对齐交错音频和视频时间戳，因此，播放器和解码器不会预先获取大量数据以进行播放。这是数据源端数据完整性和播放端体验之间的折衷。虽然，我想你可以一直使用 expectsMediaDataInRealTime 为 YES，但最好丢弃早期输入的样本，以防 isReadyForMoreMediaData==NO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-29T11:17:54.367

据我了解，这不是完美的命名，而且有点令人困惑。

`expectsMediaDataInRealTime`意味着帧被推送到`AVAssetWriter`- 无论它们是从相机还是从文件推送 30FPS 都没有关系......它只是意味着`AVAssetWriter`当它到来时处理帧。

如果它设置为`false`，那么你应该拉框架，从源头索取它们。所以它与 无关`realTime`，它是定义`AVAssetWriter`是在准备好时拉框架，还是在框架可用时强制准备好并处理它。

此标志定义谁控制帧到达的时间`AVAssetWriter`。

# php - 从 php 重定向错误打开 jquery 对话框

> ID：12997446
> 
> 赞同：0
> 
> 时间：2012-10-21T11:38:10.523
> 
> 标签：php, jquery, dialog

数据库更新后，我无法从重定向打开 jquery 窗口。当页面重定向时，我进行了编码，以便我可以获取值并根据该值打开窗口。下面的例子。

```
header("Location: http://localhost/sample/users/cp.php?dialog=1");
exit(); 
```

在 cp.php 我有以下不触发窗口的代码。但是，如果我更改 autoOpen:true，则窗口会在页面加载时加载。如果有人能指出我的错误，我将不胜感激。谢谢

cp.php

```
<?php
$dialog = $_GET['dialog'];
if ($dialog ==1)
        {
           echo '<script type="text/javascript"> dialog(); </script>';
        }

?>
<script src="js/jquery-1.3.2.min.js"></script>
<script src="js/ui.dialog.js" type="text/javascript"></script>
<link href="css/redmond/jquery-ui-1.7.3.custom.css" rel="stylesheet" type="text/css" media="all" />

<script type="text/javascript">
  function dialog() {
    $(function() {
        $( "#response1" ).dialog({
            modal: true,
            autoOpen: false,
            buttons: {
                Ok: function() {
                    $( this ).dialog( "close" );
                }
            }
        });

    });
  }
    </script>

 <div style="display:none" id="response1" title="Successfully updated destroy date">
    <p>
        <span class="ui-icon ui-icon-circle-check" style="float: left; margin: 0 7px 50px 0;"></span>
        You have successfully updated your destroy date. You may now close this window. Thank you.
    </p>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:46:22.903

首先，您应该升级 JQuery 和 JQueryUI 版本。

这是一个建议：

```
<script type="text/javascript">
$(function() {
    if(<?php echo ($dialog == 1) ? 'true' : 'false' ; ?>)
    {
        $( "#response1" ).dialog({
            modal: true,
            autoOpen: true,
            buttons: {
                Ok: function() {
                    $( this ).dialog( "close" );
                }
            }
        });
    }
});
</script> 
```

这个小提琴解释了如何使用你的代码：http: [//jsfiddle.net/2bxYW/](http://jsfiddle.net/2bxYW/)

# javascript - 如何回答服务器端的ajax请求？

> ID：12997447
> 
> 赞同：3
> 
> 时间：2012-10-21T11:38:35.220
> 
> 标签：javascript, ajax, http, netcat

我有以下功能：

```
$.ajax({url:"http://127.0.0.1:8080", data: "123",
    success:
    function(response, textStatus, jqXHR) 
    {
        alert(response);
    },
    error:
    function(jqXHR, textStatus, errorThrown)
    {
        alert("The following error occured: " + textStatus + " " + errorThrown);
    }
}); 
```

它发送请求，我用“nc -l 8080”拦截一个。看起来像

```
GET /?123 HTTP/1.1
Host: 127.0.0.1:8080
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:15.0) Gecko/20100101         Firefox/15.0.1
Accept: */*
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Origin: null 
```

然后我回答

```
HTTP/1.1 200 OK
Content-Length: 3

abc 
```

问题是我总是出错（“发生以下错误：错误”）你认为它可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:43:39.807

正如 Tomasz 指出的那样，因为同源政策。

为了证明/测试这一点：

假设您的 html 页面是“index.html”，请执行以下操作。

*   从与 index.html 相同的目录运行命令“python -m SimpleHTTPServer 8080”
*   访问浏览器并输入“http://127.0.0.1:8080/index.html”。Python 应该为 html 提供服务，并且浏览器应该可以很好地呈现它。
*   现在终止 python 命令并运行“nc -l 8080”。NC 已准备好在与原始网页相同的域/端口上处理 ajax 请求。
*   现在只需从网页调用 ajax 调用，并用 nc 回复。

ajax 现在应该可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T20:56:07.707

readyState=0 表示请求还没有发送，常量“UNSENT”的名称：http: [//www.w3.org/TR/XMLHttpRequest/](http://www.w3.org/TR/XMLHttpRequest/)

至于在发出请求之前导致错误的实际原因，是的，same-origin-policy 是最有可能的罪魁祸首。

您必须使用相对链接 url:"/" 我猜，来捕获请求。

# c - 关于 C' stdlib.h 中 free() 可能的连锁反应

> ID：12997449
> 
> 赞同：0
> 
> 时间：2012-10-21T11:38:48.150
> 
> 标签：c

```
#include <stdlib.h>

struct strt;
typedef struct {
    int i;
    struct strt *next;
} strt;

strt *s1 = malloc(sizeof(strt));
strt *s2=s1->next = malloc(sizeof(strt));

free(s1); 
```

现在，是`free(s1)`只释放 s1 指向的块还是释放 s1**和**s1->next/s2 指向的块？

我知道这一定是一个被问了一千次的问题，但我无法在搜索引擎中描述这个问题，我也无法在`free()`函数文档中直接提到相同的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T11:40:22.177

你会有内存泄漏。只有 指向的内存`s1`被释放，而不是`s2`and指向的内存`s1->next`。所以你需要

```
free(s1);
free(s2); 
```

一个好的经验法则是`free`为每个`malloc`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T11:41:51.977

你应该有一个`free`per `malloc`。所以你必须自由`s1`和`s2`分开。任何一个：

```
free(s1);
free(s2); 
```

或者：

```
free(s1->next);
free(s1); 
```

在第二种情况下，语句的顺序很重要，因为您无法访问 if 引用的对象`s1`被`s1`释放。

> **C11 (n1570), § 7.22.3.3`free`函数**
> 该`free`函数使指向的空间`ptr`被释放，也就是说，可用于进一步分配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T11:40:52.960

该`free`函数不知道被释放的内存块背后的结构。调用`free`只释放作为参数传递的指针指向的块。在您的情况下，您需要先发布`s1->next`，然后再发布`s1`本身：

```
free(s1->next);
free(s1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T11:43:10.973

您有内存泄漏，即您丢失了指向以前分配的某些内存的指针，`malloc`并且不再有该指针传递给`free`.

您应该`free`以相反的顺序调用`mallocs`这种性质的 from 结构。

# build - 中间人构建 - 包括咖啡和更少

> ID：12997452
> 
> 赞同：1
> 
> 时间：2012-10-21T11:38:57.650
> 
> 标签：build, preprocessor, middleman

是否可以`build`使用[中间人](http://middlemanapp.com/)，同时包括咖啡和更少的文件？我希望它们位于 build/ 目录以及已编译的目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-06T19:01:21.683

我认为`middleman build`只编译 .coffee 和 .less，但您可以使用[Middleman 的`after_build`回调](http://middlemanapp.com/advanced/custom/#toc_9)自己复制它们。

将 .coffee 和 .less 文件符号链接到 build 文件夹甚至也可以。

# c# - 在pictureBox中绘制旋转线

> ID：12997454
> 
> 赞同：1
> 
> 时间：2012-10-21T11:39:23.867
> 
> 标签：c#, picturebox, flicker

我想在`PictureBox`. 我用`pictureBox1.CreateGraphics()`画线，但听说这种方法不适合`PictureBox`。另外，我在`PictureBox`窗户上遇到严重的闪烁，有什么建议吗？这是一个代码段：

```
 private void OnTimedEvent(object source, PaintEventArgs e)
    {
        try
        {
            if (comport.BytesToRead > 0)
            {
                X = comport.ReadByte();
                Y = comport.ReadByte();
                Z = comport.ReadByte();
            }

            Graphics g = pictureBox1.CreateGraphics();
            Pen red = new Pen(Color.Red, 2);
            g.TranslateTransform(100, 80 - X);
            g.RotateTransform(120);
            g.DrawLine(red, new Point(100, 0 + X), new Point(100, 80 - X));
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        try
        {
            timer1.Interval = 1;
            pictureBox1.Invalidate();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:46:52.247

尝试在pictureBox1.Paint 事件处理程序中移动您的绘图代码，并在需要重绘pictureBox1 时调用pictureBox1.Invalidate。这才是真正的绘画方式。目前您正在闪烁，因为您每秒重画您的图片框1，但此时您没有要绘制的图元。

```
 byte X;
        byte Y;
        byte Z;
        private void OnTimedEvent(object source, PaintEventArgs e)
        {
            try
            {
                if (comport.BytesToRead > 0)
                {
                    X = comport.ReadByte();
                    Y = comport.ReadByte();
                    Z = comport.ReadByte();
                }
                pictureBox1.Invalidate();

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            try
            {
                timer1.Interval = 1;
                pictureBox1.Invalidate();
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }

        private void pictureBox1_Paint(object sender, PaintEventArgs e)
        {
            Graphics g = e.Graphics;
            Pen red = new Pen(Color.Red, 2);
            g.TranslateTransform(100, 80 - X);
            g.RotateTransform(120);
            g.DrawLine(red, new Point(100, 0 + X), new Point(100, 80 - X));
        } 
```

# php - 这个正则表达式有什么问题？

> ID：12997455
> 
> 赞同：-4
> 
> 时间：2012-10-21T11:39:31.867
> 
> 标签：php, regex

我正在使用此代码验证全名。我希望用户输入名称，例如 Abc def 或 Abc Def 或 Abc DEF 等...但是这样我无法得到正确的答案。

```
if(!preg_match("/^[A-Za-z] ?[A-Za-z]$/", $value) && !empty($value))
echo "NOT MATCHING";
else if(!empty($value))
echo "MATCHING"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T11:43:14.120

以这种方式尝试：

```
"/^[A-Za-z]+(\s[A-Za-z]+)?$/" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T11:42:46.027

添加`+`以匹配名称长度超过一个字符；）

```
"/^[A-Za-z]+ ?[A-Za-z]+$/" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T11:42:57.993

角色不再重复。它只允许空格前后的字符。

```
^[A-Za-z]+(\s)+?[A-Za-z]+$ 
```

记住模式`^[A-Za-z] ?[A-Za-z]$`可以匹配

```
JohnWoo 
```

因为空格是可选的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T11:43:13.253

您的括号语句后缺少一个乘数。

这样的事情会更好：`"/^[A-Za-z]+ ?[A-Za-z]+$/"` 否则这意味着您正在为每个括号语句寻找一个 1 字符长的字符串。这里有`+`标志，它是*“一个或更长”*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T12:51:00.550

由于名称可能还有一个中间名，首字母后跟句号，或者可能有更多名称，您应该使用正则表达式模式

```
/^[A-Za-z]+\.?(\s+[A-Za-z]+\.?)*$/ 
```

如果您想将名称之间的空格限制为一个空格键字符，请替换`\s+`为`[ ]`

此外，如果您想允许前导和/或尾随空格，`\s*`请在模式的开头和/或结尾添加。

* * *

匹配示例：*John W. Doe Jr.*

# java - 在Java中的排序字符串数组中查找以指定字符串开头的第一个元素

> ID：12997459
> 
> 赞同：3
> 
> 时间：2012-10-21T11:40:14.923
> 
> 标签：java, algorithm, search, binary-search

我在 Java 中有一个排序的字符串数组。我试图在该数组中找到以用户指定的字符串开头的第一个元素。我一开始以为是二分查找，但它找到的是相等的字符串，而不是以用户指定的字符串开头的字符串。我应该如何修改二进制搜索，以便我可以实现我想做的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T11:43:39.840

如果元素不存在，二分搜索可以找到“小于所需元素的最后一个元素”（有时称为“应该插入它的索引”）。

通过使用此功能进行二进制搜索，您可以找到一个元素并检查：

1.  如果它是确切的元素 - 那么它是数组中具有此前缀的第一个元素，因为它是具有此前缀的“最小”元素，你就完成了。
2.  如果它不是同一个元素 - 通过增加一个 - 你会得到“比所需元素更大的最小元素”。此元素是数组中带有此前缀的第一个元素（如果数组有前缀）。

这个功能很常见——例如它存在于 java 的[`Arrays.binarySearch()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#binarySearch%28byte%5B%5D,%20byte%29). 从javadocs：

> 返回： 搜索键的索引，如果它包含在数组中；否则，（-（插入点）- 1）。插入点定义为键将插入数组的点：第一个元素的索引大于键

从刚刚找到的索引中，很容易找到想要的元素。

**代码快照：**

```
String[] arr = { "aa" , "bb","c", "cc" , "ccc", "cccc", "ddD" };
int idx = Arrays.binarySearch(arr, "c");
if (idx < 0) 
    System.out.println(arr[-1 * idx - 1]);
else System.out.println(arr[idx]); 
```

# html - 在 HTML 5 中使用自定义字体

> ID：12997461
> 
> 赞同：0
> 
> 时间：2012-10-21T11:40:21.053
> 
> 标签：html, css, 960.gs

我在我的项目中使用 HTML 5 我只想尝试使用自定义字体，但似乎在线可用的教程似乎不起作用，我完全迷失了。

我为此使用 960 网格系统。自定义 CSS 是我放置**CUSTOM FONTS CSS**的地方。

这是我在 HTML 5 中的代码

```
<!doctype html>
<html lang="en">

<head>

<meta charset="utf-8">  

<title>LOGIN PAGE</title>
    <meta name="description" content="Administrator">  
    <link rel="stylesheet" type="text/css" media="screen" href="style/reset.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="style/960_12_col.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="style/custom.css" />

</head>
<body>
  <div id="main-container" class="container_12">

    <h1>HEAD</h1>
    <form>
      <ul id="main-login" class="push_2">
        <li><p >USERNAME</p> <input type="text" name="cai_uname"  /></li>
        <li><p>PASSWORD</p> <input type="password" name="cai_pass"  /></li>
        <li><input type="submit" name="cai_login" value="LOGIN" /></li>
      </ul>

    </form>
</body> 
```

这是CSS

```
@font-face{
  font-family: AzoftSans;
  src: url('font/azoft-sans.eot');
  src: url('font/azoft-sans.eot?#iefix') format('embedded-opentype'),
       url('font/azoft-sans.ttf') format('truetype');
}

body{
  background:#666666 url("../images/bg_login_half.jpg") repeat-x;

}
h1{
  font:bold 24pt/2  AzoftSans, Tahoma, Arial, Verdana, sans-serif;
  text-align: center;
} 
```

我不会粘贴 960 gridsystem reset 和 960_12_col.css，它可以在线获得。我不知道它是否会影响我的 CSS。

谢谢回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:47:39.627

当我遇到这样的错误时，我使用 chrome(F12) 检查指向我的文件的所有链接是否正确。我注意到你的背景

```
'../images/*.jpg' 
```

尝试：

```
'../font/*.*' 
```

这是您的正确格式，请尝试将 .ttf 放在首位。

```
@font-face
{
font-family: myFirstFont;
src: url('Sansation_Light.ttf'),
     url('Sansation_Light.eot'); /* IE9 */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:12:23.143

[当Azoft Sans](http://www.fontspace.com/4th-february/azoft-sans)字体已下载、使用[FontSquirrel](http://www.fontsquirrel.com/fontface/generator)`fonts`处理并安装在HTML 文档文件夹下的适当文件夹 ( ) 中时，该代码在支持的浏览器上有效。因此，该过程中的某些步骤失败了。显然，您没有使用普通的 FontSquirrel 生成的字体文件和 CSS 代码，因为您`@font-face`仅引用 EOF 和 TTF 文件，但 FontSquirrel 也会生成 WOFF 和 SVG。

因此，请检查您是否正确执行了该过程。还要检查例如生成的 TTF 文件：你能打开它吗？如果你把它安装为系统中的普通字体会发生什么？仔细检查文件和文件夹名称。如果问题仍然存在，请在 Web 上设置一个测试页面并显示 URL。

# android - 将意图从服务发送到活动

> ID：12997463
> 
> 赞同：20
> 
> 时间：2012-10-21T11:40:30.413
> 
> 标签：android, service, android-intent, intentservice

我正在尝试将结果从 an 返回`IntentSerivce`到`mainactivity`使用意图，但我无法让它工作。接收来自活动的`IntentService`意图没有问题，做它的事情并获得一个`JSONstring`. 现在剩下的唯一问题是将此字符串发送回活动。

这是mainactivity中的方法：

```
public String RTConn(String query){
    System.out.println("Querying Rotten Tomatoes.");
    Intent rtIntent = new Intent(MainActivity.this, RTConnection.class);
    rtIntent.putExtra("query", query);
    bindService(rtIntent, RTConnection, Context.BIND_AUTO_CREATE);
    startService(rtIntent);
    String json = getIntent().getStringExtra("json");
    return json; 
```

这是 IntentService：

```
public void onStart(Intent intent, int startId){
    System.out.println("intent Received");
    String jsonString = rottenTomatoesSearch(intent.getStringExtra("query"));
    Intent RTRetur = new Intent(RTConnection.this, MainActivity.class);
    RTRetur.putExtra("json", jsonString);
    startActivity(RTRetur);
} 
```

显然 startActivity 不工作，但还有什么用呢？（我宁愿不使用广播接收器）。问候彼得 L。

更新

这是 MainActivity 的外观：

```
public static final String RECEIVE_JSON = "student.kau.RECEIVE_JSON";
private BroadcastReceiver RTReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        System.out.println("broadcast Received: "+intent.getAction());
        if(intent.getAction().equals(RECEIVE_JSON)){
            System.out.println("JSON Received.");
            String serviceJsonString = intent.getStringExtra("json");
        }
    }
}; 
```

此代码是 onCreate：

```
LocalBroadcastManager bManager = LocalBroadcastManager.getInstance(this);
    IntentFilter intentFilter = new IntentFilter();
    intentFilter.addAction(RECEIVE_JSON);
    bManager.registerReceiver(RTReceiver, intentFilter); 
```

这是方法：

```
public void onStart(Intent intent, int startId){
    System.out.println("intent Received");
    String query = intent.getStringExtra("query");
    String jsonString = rottenTomatoesSearch(query);
    System.out.println("Fetching done");
    Intent RTRetur = new Intent(MainActivity.RECEIVE_JSON);
    System.out.println("action: "+RTRetur.getAction());
    RTRetur.putExtra("json", jsonString);
    sendBroadcast(RTRetur);

} 
```

logcat 中的最后一个跟踪是`System.out.println("action: "+RTRetur.getAction()");`

```
-action: 

    student.kau.RECEIVE_JSON 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-21T11:48:00.273

为此，您可以[`BroadcastReceiver`](http://developer.android.com/reference/android/content/BroadcastReceiver.html)在`Activity`.

[这是一个很好的例子，我用来](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)在`Service`<>之间`Activity`使用`BroadcastReceivers`.

[这是 Service <> Activity 之间通信的另一个很好的例子](https://stackoverflow.com/questions/4300291/example-communication-between-activity-and-service-using-messaging)。它使用`Messenger`和`IncomingHandler`。

## 广播接收器

我将为您的情况做一个简单的例子。

这是您的活动的广播接收器。它将收到您的字符串：

```
//Your activity will respond to this action String
public static final String RECEIVE_JSON = "com.your.package.RECEIVE_JSON";

private BroadcastReceiver bReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        if(intent.getAction().equals(RECEIVE_JSON)) {
            String serviceJsonString = intent.getStringExtra("json");
            //Do something with the string
        }
    }
};
LocalBroadcastManager bManager; 
```

在你`onCreate()`的活动中

```
bManager = LocalBroadcastManager.getInstance(this);
IntentFilter intentFilter = new IntentFilter();
intentFilter.addAction(RECEIVE_JSON);
bManager.registerReceiver(bReceiver, intentFilter); 
```

在您`onDestroy()`的活动中，请确保您取消注册广播接收器。

```
bManager.unregisterReceiver(bReceiver); 
```

最后，在您的 中`Service onStart()`，执行以下操作：

```
System.out.println("intent Received");
String jsonString = rottenTomatoesSearch(intent.getStringExtra("query"));
Intent RTReturn = new Intent(YourActivity.RECEIVE_JSON);
RTReturn.putExtra("json", jsonString);
LocalBroadcastManager.getInstance(this).sendBroadcast(RTReturn); 
```

并且您的 Activity 将额外收到带有该 json 的意图

# c++ - 比较 C++ 中的字符串

> ID：12997470
> 
> 赞同：1
> 
> 时间：2012-10-21T11:41:12.570
> 
> 标签：c++, arrays, char, compare

我想简化一个 txt 文档，并尝试了以下代码：

```
#include <iostream>
#include <conio.h>

using namespace std;

int main()
{
    // 1\. Step: Open files
    FILE *infile;
    FILE *outfile;
    char line[256];
    infile = fopen("vcard.txt", "r");
    outfile = fopen("records.txt", "w+");
    if(infile == NULL || outfile == NULL){
         cerr << "Unable to open files" << endl;
         exit(EXIT_FAILURE);
    }

    // 2.Step: Read from the infile and write to the outfile if the line is necessary
    /* Description:
    if the line is "BEGIN:VCARD" or "VERSION:2.1" or "END:VCARD" don't write it in the outfile
    */

    char word1[256] = "BEGIN:VCARD";
    char word2[256] = "VERSION:2.1";
    char word3[256] = "END:VCARD";

    while(!feof(infile)){
        fgets(line, 256, infile);
        if(strcmp(line,word1)!=0 && strcmp(line,word2)!=0 && strcmp(line,word3)!=0){ // If the line is not equal to these three words
          fprintf(outfile, "%s", line); // write that line to the file
        }
    }

    // 3.Step: Close Files
    fclose(infile);
    fclose(outfile);

    getch();
    return 0;
} 
```

不幸的是，尽管 infile 包含 word1、word2 和 word3 一百次，但我仍然得到 1 或 -1 作为 strcmp 的返回值。

我应该尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:49:35.470

`fgets`将换行符作为字符串的一部分返回。由于您要比较的字符串不包含换行符，因此它们将被比较为不同的。

由于您使用 C++ 编写，因此您可能希望使用`std::ifstream`和`std::getline`读取该文件。返回的字符串`getline`中不会包含换行符，并且作为额外的好处，您不必指定行大小的限制。

另一个（不相关的）问题：使用`while (!foef(file))`错误，可能导致最后一行被读取两次。相反，您应该循环直到`fgets`返回一个空指针。

# php - 从 url 获取子域？

> ID：12997473
> 
> 赞同：2
> 
> 时间：2012-10-21T11:41:35.890
> 
> 标签：php

我需要从 url 中获取一些价值。
如果 url 是`http://www.random.mysite.com/`

然后我以某种方式想要得到`random`.

但是，如果它使用`www`,`http://`或`https://`在 url 前面，这也应该有效。

那么如何做到这一点呢？

我试过这个： `array_shift(explode(".",$_SERVER['HTTP_HOST']));`

如果 url 是`http://random.mysite.com/`，它可以工作，但是如果我放在`www`前面，那么我会被`www`退回吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T14:16:04.483

你可以试试

```
$url = 'http://random.mysite.com/';
$url = parse_url($url,PHP_URL_HOST);
$url = strstr(str_replace("www.","",$url), ".",true);
var_dump($url); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T11:59:08.713

前面没有 http[s]:// 的 URL 不是 URL。它们是字符串。

```
$hostname = preg_replace('~^https?://(www\\.)?~i', null, $url); // shift scheme and www
$hostname = preg_replace('~#.*$~', null, $hostname); // pop target
$hostname = preg_replace('~\\?.*$~', null, $hostname); // pop query string
$hostname = preg_replace('~/.*$~', null, $hostname); // pop uri
// no guarantee it's a valid hostname, there's more checks you can do here 
```

**试试这个。**为什么要三步？明确地说，以便您了解它的作用并在没有 / 和 a 时满足复杂的情况？直接地。顺序也很重要。它可以一次合并，但您需要进行一些测试才能正确执行...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T12:06:52.713

根据您的需要，一个更简洁的解决方案可能是确保您首先提供一致的 URL。[要将所有http://yoursite.com](http://yoursite.com)重定向到[http://www.yoursite.com](http://www.yoursite.com)，请将其放入您的 .htaccess 文件中（假设您使用的是 apache，则在根目录中）。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^your-site.com [NC]
RewriteRule ^(.*)$ http://www.your-site.com/$1 [L,R=301] 
```

此代码的更多变体在[这里](https://stackoverflow.com/questions/234723/generic-htaccess-redirect-www-to-non-www)。这对 SEO 也有一点帮助，通常是很好的做法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-21T11:46:04.030

您可以使用在and first[`parse_url`](http://php.net/manual/en/function.parse-url.php)之后获取所有内容。`http://``https://`

然后，用于[`explode`](http://php.net/manual/en/function.explode.php)将域拆分为不同的元素。对于可以以 开头的特殊情况`www`，请检查分解数组中第一项的值。如果第一个是`www`，那么第二个必须是子域。

```
$url = 'http://www.sub.yourwebsite.com';
$parsed = parse_url($url);
$domain = explode('.', $parsed['host']);
$subdomain = '';

if ($domain[0] == 'www')
    $subdomain = $domain[1];
else
    $subdomain = $domain[0]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-21T12:05:05.797

除了选择域的第一部分并检查它是否是 www，您还可以从后面开始。域名爆炸后，最后一部分是“com”，之前的部分是“yoursite”。之前的部分是“随机”或“www”。“www”本身就是一个子域，您甚至可以说“www.random”是与“random”不同的子域。

缺点是 TLD 可以是“.com”，但也可以是“.co.uk”，在这种情况下，“yoursite”将被视为子域，而实际上并非如此。

您经常看到的设置，尤其是在可用于多个站点的框架或库中，是允许您指定主主机名 (yoursite.com) 的设置。这样，您可以轻松断定`protocol://`主机名和该主机名之间的所有内容都是您的子域。

# liferay - 如何在liferay portlet 中将隐藏字段值或html 列值传递给另一个jsp 页面？

> ID：12997479
> 
> 赞同：1
> 
> 时间：2012-10-21T11:42:12.067
> 
> 标签：liferay, portlet, liferay-6

我的liferay 自定义portlet 中有一个html 表。我想在单击该特定列时提供编辑功能我知道 liferay-ui:search-container 提供了这样的功能，但是我为此使用了我的 html 表和一些 jquery ..所以在该特定列的悬停时我有一个编辑图标，我希望单击该编辑图标时，我将重定向到编辑页面。但我想要的是如何获取该行的编辑图标的主键被选中..？

我有以下 jquery 用于图标显示并重定向到编辑页面

```
 <script>
                    $(document).ready(function() {     
                        $(".editable").hover(function(){
                            $(this).append("<i class='splashy-pencil_right'></i>")
                        }, function(){
                            $(this).children("i").remove();
                        });                        
                        $(".editable").click(function(){
                            $.colorbox({
                                initialHeight: '0',
                                initialWidth: '0',
                                href: "#confirm_dialog",
                                inline: true,
                                opacity: '0.3',
                                onComplete: function(){
                                    $('.confirm_yes').click(function(e){
                                        e.preventDefault();
                                        window.location.href = "<%=editURL.toString() %> ";
                                        $.colorbox.close();
                                    });
                                    $('.confirm_no').click(function(e){
                                        e.preventDefault();
                                        $.colorbox.close(); 
                                    });
                                }
                            });
                        });
                        //* show all elements & remove preloader                        
                        setTimeout('$("html").removeClass("js")',1000);
                    });
                </script> 
```

以下是我要重定向的 portletaction url

```
<portlet:actionURL name="editRestaurant" var="editURL">
       <portlet:param name="key" value="<%=restId%>" />
       </portlet:actionURL> 
```

以下代码是我的视野类，其中将主键值（restID）作为隐藏字段。

```
 <form action="<%=editURL.toString() %>" method="post">                       
                            <table class="table table-bordered table-striped" id="dt_gal_res">
                                <thead>
                                    <tr>
                                        <th class="table_checkbox"><input type="checkbox" name="select_rows" class="select_rows" data-tableid="dt_gal_rest" /></th>                                        
                                        <th>Name</th>
                                        <th>Contact Person</th>
                                        <th>Website</th>
                                        <th>Emenu</th>                                        
                                        <th>Status</th>
                                    </tr>
                                </thead>

        <% 
     List<restaurant> rest_listOBJ= restaurantLocalServiceUtil.getAllAvailableRestaurant();

for(int i=0;i<(rest_listOBJ.size());i++)
{

restaurant temprest=rest_listOBJ.get(i);

%>
     <tbody>
                                        <tr>
                                            <td><input type="checkbox" name="row_sel" class="row_sel" /></td>                                        
                                            <td style="visibility: hidden;"><input type="text" name="primerykey" value="<%= temprest.getPrimaryKey()%>"></td>
                                            <td class="editable"><%=temprest.getName() %></td>
                                            <td><%=temprest.getContactno() %></td>
                                            <td><%=temprest.getWebsite() %></td>
                                            <td><%=temprest.getNoofemenuagent() %></td>
                                            <td><a href="#" class="pop_over" data-content="Ad Displayed on </br> <b>Restaurant</b> : ABC" data-original-title="( Ad name )" data-placement="left">Pending</a></td>                                        
                                        </tr>                                    
                                   </tbody> 
```

那么如何将此单击的行或列值传输到 edit_restaurant.jsp 页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:09:11.663

创建一个链接并添加 id 作为参数

```
<% PortletURL link = RenderResponse.createRenderURL();
link.setParameter("paramName", "paramValue");  
link.setParameter("jspPage", "/page.jsp"); %> 
```

使用链接：
`<a href="<%= link.toString() %>">LinkText</a>`

在 jsp 上，您可以使用 mvc 方式使用此参数：

`ParamUtil.getString(ActionRequest, "paramName");`

# geolocation - wifi上的foursquare位置

> ID：12997480
> 
> 赞同：0
> 
> 时间：2012-10-21T11:42:18.680
> 
> 标签：geolocation, foursquare, location-based-service

我们计划在某些事件中使用带有实时用户签到的屏幕。为了方便用户打卡（GPRS或3g等移动互联网有纯连接）我们想在它周围添加移动wifi热点..但我担心检测位置可能会有些麻烦，因为foursquare可以记住来自 wifi 热点的 GPS 坐标，并使用它们覆盖 GPS 或移动网络（如果存在位置数据）。

我们如何解决这个问题，以获得机会将热点移动到城市，但每次都正确定位用户 - 总是更改 MAC 或 SSID，以其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:39:59.130

不幸的是，大多数“从 wifi 热点记住 GPS 坐标”是由操作系统完成的，而不是由 Foursquare 完成的。我相信当前版本的 iOS、Android 和 BB 都会在某种程度上自动执行此操作，而 Foursquare 只是获取操作系统提供的 GPS 坐标。

但是，我知道操作系统使用 SSID 和路由器的 MAC 地址的组合来确定他们正在查看的路由器。如果您同时更改路由器的 SSID 和 Mac 地址，那么操作系统将无法“记住”它。即使您不进行这些更改，我通常也会发现操作系统可以很快意识到它的错误，如果它可以看到天空并且可以从卫星获得良好的 aGPS 修复。

# objective-c - 如何从 int 创建 NSIndexPath？

> ID：12997481
> 
> 赞同：20
> 
> 时间：2012-10-21T11:42:22.180
> 
> 标签：objective-c, ios

错误信息：

> ARC 不允许将“int”转换为“NSIndexPath *”

代码：

```
NSInteger CurrentIndex;

[self tableView:(UITableView *)horizontalTableView1 didSelectRowAtIndexPath:(NSIndexPath *)int_CurrentIndex]; 
```

如何修复此错误？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-10-21T11:46:55.637

您不能将`int`变量`NSIndexPath`直接转换为。但是你可以`NSIndexPath`从一个`int`变量中创建一个。

您需要一个`section`索引和`row`索引来制作`NSIndexPath`. 如果你`UITableView`只有一个`section`，那么：

**Objective-C**

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:rowIndex inSection:0]; 
```

**迅速**

```
let indexPath: NSIndexPath = NSIndexPath(forRow: rowIndex, inSection: 0) 
```

**斯威夫特 4**

```
let indexPath = IndexPath(row: rowIndex, section: 0) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-29T06:54:20.913

`Swift 3.0`

```
let indexPath : IndexPath = IndexPath(item: currentIndex, section: 0) 
```

# macos - 如何获取文件的路径？

> ID：12997482
> 
> 赞同：0
> 
> 时间：2012-10-21T11:42:33.037
> 
> 标签：macos, cocoa

我想打开一个database.sqlite3。首先，我需要找到一条路径。但我不知道如何获得这条路。

我需要一个相对路径。

![在此处输入图像描述](../Images/38cf722c9d66905cc61f72b5f83073c8.png)

***编辑：***我不想使用 NSBundle。它有一条很长的路。

我想使用 /Users/Voloda2/Projects/facebook/database.sqlite3 是否可以获得相对路径？

***EDIT2：***我经常更改我的数据库。我使用 Navicat 进行此操作。如果我使用 NSBundle 我有一个问题。git 没有索引我的数据库，因为它不在项目文件夹中。因此我需要将我的数据库放置到项目文件夹中。

直接路径是 /Users/Voloda2/Projects/facebook/database.sqlite3

像这样的相对路径 ../database.sqlite3

相对路径是相对于项目文件夹的路径。是否有可能获得相对路径？可能是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T11:47:50.843

假设您正在制作一个常规的 OS X/Cocoa 应用程序，Xcode 会将数据库文件复制到应用程序包中。因此，您可以使用`NSBundle`该类轻松获取其路径：

```
NSString *databasePath = [[NSBundle mainBundle] pathForResource:@"database" ofType:@"sqlite3"]; 
```

# java - java第二个sql语句不起作用

> ID：12997483
> 
> 赞同：0
> 
> 时间：2012-10-21T11:42:39.553
> 
> 标签：java, postgresql

我正在使用 postgresql，并且在将数据插入两个不同的表时遇到了一个问题。

这个想法是插入一些数据 no`tableamizades`并且他们在`tablenotify`. 基本上提出了一个朋友请求，并且有一个与该请求相关联的通知。

我有这个代码：

```
01    @Override
02    public void AddFriends(int userMakesRequest, int userReceivesRequest, boolean TrueOrFalse, boolean TrueOrFalse2) {
03        String notificacao, userMakesRequestName;
04        Connection connection = null;
05        Statement stmt = null;
06        ResultSet rs = null;
07
08        try {
09            Class.forName("org.postgresql.Driver");
10
11            connection = DriverManager.getConnection("jdbc:postgresql:"
12                    + "//localhost:5432/projecto", "postgres", "admin");
13
14            stmt = connection.createStatement();
15            try {
16
17                stmt.executeQuery("INSERT INTO tableamizades (iduser1,iduser2,amigoaceite1,amigoaceite2) VALUES ( "
18                        + userMakesRequest + " , '" + userReceivesRequest + "' , '" + TrueOrFalse + "' , '"
19                        + TrueOrFalse2 + "');");
20                try {
21
22
23                    rs = stmt.executeQuery("SELECT username FROM utilizadores WHERE iduser = '" + userMakesRequest + "';");
24                    rs.next();
25                    userMakesRequestName = rs.getString("username");
26
27                    notificacao = " O utilizador " + userMakesRequestName + " fez-lhe um pedido de amizade";
28
29                    stmt.executeQuery("INSERT INTO tablenotify (iduser,notificacao) VALUES ( " + userReceivesRequest + " , '" + notificacao + "');");
30                    rs.close();
31
32                } catch (SQLException e) {
33                }
34
35            } catch (SQLException e) {
36            }
37            stmt.close();
38
39            connection.close();
40
41        } catch (Exception e) {
42            e.printStackTrace(System.out);
43        } finally {
44            try {
45                connection.close();
46            } catch (Exception e) {
47                e.printStackTrace(System.out);
48            }
49        } 
```

如果我这样做，数据将插入`tableamizades`但不是 on `tablenotify`。我可以看到插入数据的代码是可以的，`tablenotify`因为如果我注释掉第 15 到 19 行和第 35 和 36 行，`tablenotify`则正确插入了数据。

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T11:47:12.823

你有几个问题：

*   插入数据必须使用 executeUpdate()，而不是 executeQuery()
*   如果您的参数包含必须转义的引号等字符，您应该了解[准备好的语句，这将避免 SQL 注入攻击和不正确的查询。](http://download.oracle.com/javase/tutorial/jdbc/basics/prepared.html)
*   你不应该忽略 SQLExceptions，因为它们包含有助于识别问题的错误消息。不要捕捉那些异常。如果你捕捉到它们，抛出一个包装它们的运行时异常。

# sml - 如何在不返回值的情况下退出函数

> ID：12997503
> 
> 赞同：0
> 
> 时间：2012-10-21T11:44:28.220
> 
> 标签：sml, smlnj

假设我有一个函数，它在满足给定条件时返回某个值，而在不满足条件时不返回任何值。

例如

fun foo(n)= if n< 100000 then n else （类似于退出函数。我们在其他编程语言中有它。我们这里有类似的东西吗？）

我最初想写 () 但它在 if 或某事的两个条件下表示不匹配。

变得更加明确，我想编写一个函数，它接受一个数字，任何数字，如果它是有效的整数则组合到一个列表中，如果它不是整数则忽略它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T11:52:50.640

在 SML 中，函数总是必须返回一个值¹。表示可能有也可能没有有用结果的函数的一种方法是使用`OPTION`类型。如果它有一些有用的东西要返回，或者没有，使用`OPTION`你的函数会返回。`SOME value``NONE`

对于您的特定用例，另一种选择是将列表作为第二个参数，然后返回附加到列表的结果或未更改的列表。

¹ 事实上，我不知道有任何语言允许非 void 函数不返回值（不调用未定义的行为）。在某些语言中，您可以返回`null`代替正确的返回值，但在大多数语言中，对于具有返回类型的函数是不允许的`int`。无论哪种方式，SML 都没有空值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:20:32.393

```
fun foo n = if n < 1000000 then SOME n else NONE 
```

请注意，您不能直接将 foo n 用作整数，但您必须使用 isSome 和 valOf 或模式匹配才能知道您是哪种情况。

将您的列表作为参数传递并将值附加到它可能会更好。

```
fun foo (n: int, xs: int list) =
   if n < 1000000 then n :: xs else xs 
```

# java - 在 Android 应用程序的不同包中的两个不同类之间发送

> ID：12997504
> 
> 赞同：0
> 
> 时间：2012-10-21T11:44:39.887
> 
> 标签：java, android, android-intent, android-activity

我正在开发一个应用程序来接收短信并将其发送`Geo-location`到传入的电话号码。`SMSReceiver`是一类，另一类是`MainActivity`..

`SMSReceiver extends BroadcastReceiver`

和

`MainActivity extends Activity`...

现在我想将`Phone_number`（ String ）从`SMSReceiver`Class 发送到`MainActivity..`

有任何想法吗？我是 Android 开发的初学者！！如果您需要代码，我会提供。提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T12:02:52.030

你正在开始一个新的 MainActivity 吗？

如果是这样，

```
String phone = "";
Intent theIntent = new Intent(this, MainActivity.class); 
theIntent.putExtra("phoneNumber", phone);
startActivity(theIntent); 
```

我不建议让广播接收器触发已经运行的 MainActivity 的更改。但是，如果您真的想这样做，有两种方法可以管理它。

1.  将清单中的活动设置为`singleInstance`，覆盖该`onNewIntent()`函数并在广播接收器中运行与以前相同的代码。

2.  创建一个内容提供者/模型，让主要活动监听提供者/模型，在广播接收器被触发时更新模型。（这要复杂得多）

# php - 在插入数据库之前附加到下拉值的特殊字符

> ID：12997506
> 
> 赞同：0
> 
> 时间：2012-10-21T11:45:13.410
> 
> 标签：php, html, mysql, forms, drop-down-menu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:52:05.640

# backbone.js - Backbone.js：获取和获取属性

> ID：12997511
> 
> 赞同：1
> 
> 时间：2012-10-21T11:45:35.470
> 
> 标签：backbone.js, underscore.js, backbone-views

我是backbone.js 的新手，我被一个简单的任务困住了。
我想从数据库中获取记录并将其放入模型中。获取似乎有效，但我无法获取模型属性。这是我的代码：

我的模型：

```
window.Model = Backbone.Model.extend({

url: "mobile-rest/get-anzeige",

initialize:function () {

  },
}); 
```

我的观点：

```
window.Page = Backbone.View.extend({

initialize:function () {
    this.template = _.template(tpl.get('page'));
},

render:function (eventName) {
    var self = this;
    this.getRecord(function(resp){
        $(self.el).append(self.template({model: self.model}));
        console.log(self.model);       //works and I see the right values in the console
        console.log(self.model.title);  //is undefined
        console.log(self.model.get('title');  //also undefined 
    });

    return this;
},

getRecord: function(callback){
    this.model= new Model({id: this.id});
    this.model.fetch({data: $.param({id: this.id}), success: callback()});
}

}); 
```

所以获取似乎工作，但我怎样才能访问属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:30:43.497

我现在可以通过将“callback()”更改为“callback”来使其工作

# c - 二维数组中 8 位二进制的组合

> ID：12997512
> 
> 赞同：0
> 
> 时间：2012-10-21T11:45:37.247
> 
> 标签：c, arrays, binary, bits

我想知道如何在 C 编程中将 8 位二进制数的所有组合放入二维数组中。256x8 大小的数组以及 0 和 1 的所有组合都应填充到数组中。

从 00000000 到 11111111

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:08:20.380

因为您想枚举所有可能性，您可以简单地使用索引的二进制值。这是一个带有展开循环的版本：

```
for (i = 0; i < 256; ++i) {
    t[i][0] = (i >> 7) & 1;
    t[i][1] = (i >> 6) & 1;
    t[i][2] = (i >> 5) & 1;
    t[i][3] = (i >> 4) & 1;
    t[i][4] = (i >> 3) & 1;
    t[i][5] = (i >> 2) & 1;
    t[i][6] = (i >> 1) & 1;
    t[i][7] = (i >> 0) & 1;
} 
```

`t`您的结果数组和`i`循环索引在哪里。

该语句`t[i][5] = (i >> 2) & 1;`（例如）的工作方式如下：

*   `i >> 2`将 3 ^e位置`i`于 1 ^e位置；
*   `(i >> 2) & 1`让我们知道 3 ^e位`i`是否为`0`或`1`。

**示例[1]**：

*   输入：`00001111`;
*   `i >> 2`: `00000011`;
*   `(i >> 2) & 1`：`00000001`

**示例[2]**：

*   输入：`00001011`;
*   `i >> 2`: `00000010`;
*   `(i >> 2) & 1`：`00000000`

请注意，我们还可以使用宏来提高可读性：

```
/* Get the value of the bit at position `n` of `x`. */
#define GET_BIT(x, n) (((x) >> (n)) & 1)

for (i = 0; i < 256; ++i) {
    t[i][0] = GET_BIT(i, 7);
    t[i][1] = GET_BIT(i, 6);
    t[i][2] = GET_BIT(i, 5);
    t[i][3] = GET_BIT(i, 4);
    t[i][4] = GET_BIT(i, 3);
    t[i][5] = GET_BIT(i, 2);
    t[i][6] = GET_BIT(i, 1);
    t[i][7] = GET_BIT(i, 0);
} 
```

例子：

```
#include <stdio.h>

/* Get the value of the bit at position `n` of `x`. */
#define GET_BIT(x, n) (((x) >> (n)) & 1)

int main(void)
{
    int t[256][8], i, j;

    for (i = 0; i < 256; ++i) {
        t[i][0] = GET_BIT(i, 7);
        t[i][1] = GET_BIT(i, 6);
        t[i][2] = GET_BIT(i, 5);
        t[i][3] = GET_BIT(i, 4);
        t[i][4] = GET_BIT(i, 3);
        t[i][5] = GET_BIT(i, 2);
        t[i][6] = GET_BIT(i, 1);
        t[i][7] = GET_BIT(i, 0);
    }

    for (i = 0; i < 256; ++i, puts(""))
        for (j = 0; j < 8; ++j)
            printf("%d", t[i][j]);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:58:30.730

这是为了让你开始：

```
for(int i=0;i<256;++i) {
    a[0]=i&(1<<0);
    a[1]=i&(1<<1);
    a[2]=i&(1<<2);
    ...
    a[7]=i&(1<<7);
} 
```

这将导致所有组合的原因是，`i=0...255`那时它将通过所有组合 00000000...11111111 只是位，而不是字节：所以您所要做的就是将位提取到字节中。

# windows - 更改远程 Windows 机器上的环境变量

> ID：12997513
> 
> 赞同：0
> 
> 时间：2012-10-21T11:45:40.320
> 
> 标签：windows, environment-variables, psexec, setx

我正在尝试在远程机器上设置环境变量。

```
setx /s machine var value 
```

不起作用 - 它不产生任何输出并且不做任何事情。

```
psexec \\machine setx var value 
```

表示它成功更改了值。但是，当我去机器并打开 cmd 时，它并没有显示出来。它确实出现在计算机->属性->高级->环境变量中。另外，当我跑步时

```
psexec \\machine cmd /c set 
```

它写得正确。

我编写了一个名为 RefreshEnvironment.exe 的程序，它基本上执行以下操作：

```
 SendMessageTimeout(HWND_BROADCAST, WM_SETTINGCHANGE, 0,
    (LPARAM) L"Environment", SMTO_ABORTIFHUNG,
    5000, &dwReturnValue); 
```

如果我在本地机器上调用它，它可以解决问题 - 我在它之后打开 cmd 并获得正确的环境。但是，它不能远程工作。打电话

```
psexec \\machine RefreshEnvironment.exe 
```

返回“访问被拒绝”。我只能通过显式写入用户和密码来运行它：

```
psexec \\machine -user domain\username -p password RefreshEnvironment.exe 
```

很奇怪，因为它在两台机器上是相同的域、用户名和密码；它不起作用 - 什么也没说，但我仍然看不到本地机器上的环境。

任何想法都会受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-18T19:30:26.740

使用 /s 参数时，请确保目标计算机上正在运行“远程注册表”服务。这可能是您的问题的原因吗？在 Windows 7 上，如果该服务未在远程计算机上运行，​​我会收到“错误：无法完成指定的操作”。

# selection - 这应该是选择还是投影

> ID：12997515
> 
> 赞同：0
> 
> 时间：2012-10-21T11:45:55.423
> 
> 标签：selection, projection

我正在学习关系代数。我有一张桌子，

```
Staff(name,salary,position) 
```

现在有一个问题指出，

```
List all the managers with salary >25,000 
```

现在正确的答案是，

```
selection position = manager ^ salary >25000(staff) 
```

但我当时想的是，

```
projection position = manager ^ salary >25000(staff) 
```

因为我们在表中选择特定属性而不是选择所有属性。请指导。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:50:16.553

您要“列出所有经理”，这意味着“选择多行”。

您不是在“选择特定属性”，而是在过滤特定属性（以选择一行）。

投影将是“列出所有经理的姓名和薪水”。

在 SQL 方面：

*   选择是 WHERE 子句

*   投影是 SELECT 子句中的列列表

# java - 在 SpringMVC 应用程序中缓存 HTTP 响应

> ID：12997517
> 
> 赞同：4
> 
> 时间：2012-10-21T11:45:58.140
> 
> 标签：java, spring, caching, spring-mvc

我希望我的 Spring Controller 缓存返回的内容。我发现了很多关于如何禁用缓存的问题。我想知道如何启用缓存。我的控制器看起来像这样：

```
@Controller
public class SimpleController {

    @RequestMapping("/webpage.htm")
    public ModelAndView webpage(HttpServletRequest request, 
                                HttpServletResponse response) {
        ModelAndView mav = new ModelAndView("webpage");
        httpServletResponse.setHeader(“Cache-Control”, “public”);
        //some code
        return mav;
    }
} 
```

如您所见，我添加了以下行：`httpServletResponse.setHeader(“Cache-Control”, “public”);`设置缓存，但是在我的浏览器中，当我刷新此页面时，我仍然得到相同的状态结果：`200 OK`。我怎样才能达到结果`304 not modified`？我可以`@ResponseStatus(value = HttpStatus.NOT_MODIFIED)`在此方法上设置注释，但它只是状态还是实际缓存？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T11:55:50.743

引用[*14.9.1 什么是可缓存的*](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9)：

> `public`- 表示响应可以被任何缓存缓存，即使它通常是不可缓存的或只能在非共享缓存中缓存。

基本上这`Cache-Control: public`还不够，它只要求浏览器缓存通常未缓存的资源，例如通过 HTTPS。

HTTP 中的缓存实际上非常复杂，它涉及其他几个标头：

*   `Cache-Control`- 上面讨论过

*   `Expires`- 当给定的资源应该被认为是陈旧的

*   `Last-Modified`- 资源上次修改时间

*   `ETag`- 资源的唯一标签，在每个版本中更改

*   `Vary`- 基于不同标头的单独缓存

*   `If-Modified-Since`, `If-None-Match`, ...

我发现[缓存教程](http://www.mnot.net/cache_docs/)非常全面。并非所有标题都可以一起使用，您必须真正确定自己在做什么。[因此，我建议使用EhCache 网络缓存](http://ehcache.org/documentation/user-guide/web-caching)等内置解决方案。

此外，用如此低级的细节污染控制器也不是一个好主意。

# c# - 打印前调整 MSChart 大小以适合页面大小

> ID：12997520
> 
> 赞同：0
> 
> 时间：2012-10-21T11:46:17.800
> 
> 标签：c#, winforms, printing, charts

我正在努力弄清楚如何在打印时让 MSChart 填满整个页面。有人可以告诉我为什么下面的代码不起作用和/或建议另一种方法。我为我的无知道歉，但到目前为止我所做的所有打印都是通过 Crystal 和其他报告框架完成的，所以我通常不必直接使用 PrintDialog 和 PrintPreviewDialog。提前致谢。

```
// Printing Code
Size pageSize = new Size(this.Chart.Printing.PrintDocument.DefaultPageSettings.PaperSize.Width, this.Chart.Printing.PrintDocument.DefaultPageSettings.PaperSize.Height);
this.Chart.Size = pageSize;

// This properly previews my chart but, it does not fill up the page                    
this.Chart.Printing.PrintPreview(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T14:17:10.867

好的，所以我终于想出了如何完成我想做的事情。归结为我不了解如何将 PrintDocument 与 Graphics 对象一起使用。我用来完成任务的代码如下。我真的希望这对某人有所帮助。此外，我强烈推荐 MSFT 图表示例代码。在我创建这些图表时，事实证明它对我来说是无价的。链接是： http: [//archive.msdn.microsoft.com/mschart/Release/ProjectReleases.aspx?ReleaseId =4418](http://archive.msdn.microsoft.com/mschart/Release/ProjectReleases.aspx?ReleaseId=4418)

```
 public void PrintPreviewIncompleteJobsByStatus()
    {
        // Set new print document with custom page printing event handler
        chart.Printing.PrintDocument = new PrintDocument();
        chart.Printing.PrintDocument.PrintPage += new PrintPageEventHandler(ChartGenericFormat_PrintPage);

        chart.Printing.PrintDocument.DefaultPageSettings.Landscape = true;

        // Print preview chart
        chart.Printing.PrintPreview();
    }

    private void ChartGenericFormat_PrintPage(object sender, PrintPageEventArgs ev)
    {
        // Calculate first chart position rectangle
        Rectangle chartPosition = new Rectangle(ev.MarginBounds.X, ev.MarginBounds.Y, ev.MarginBounds.Width, ev.MarginBounds.Height);

        // Draw chart on the printer graphics
        chart.Printing.PrintPaint(ev.Graphics, chartPosition);

    } 
```

# c# - 在 C# 中使用分组和总计进行 LINQ 查询或查询到表

> ID：12997525
> 
> 赞同：-1
> 
> 时间：2012-10-21T11:46:55.760
> 
> 标签：c#, linq

> **可能重复：**
> [LINQ Lambda Group By with Sum](https://stackoverflow.com/questions/6970070/linq-lambda-group-by-with-sum)

需要 LINQ 查询或查询到 C# 中的表。

我有一个动态创建的数据表：

```
 COLUMN:  City    Deposittype  DepositAmount                  
            ROWS :  city1     new          100
                    city1     new          200
                    city2     old          200
                    city2     old          100
                    city2     new          200
                     city3    new          100 
```

想按城市分组，计算指定存款类型的存款金额总和。

例如，对于条件 depositType= new

我想要一行

```
 city1 city2 city3
            300   200   100 
```

我想要具有特定存款类型的按城市分组的存款金额总和。即结果行应该将city1 city2 city3 作为列名，在该列名下，指定贷款类型的“Depositamounts”总和说Deposittype = new。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:27:55.573

```
var result = table.Where(x=>x.Deposit=="new")
                  .GroupBy(x=> x.City)
                  .Select(x=>new { City=x.Key,Sum=x.Sum(y=>y.Amount) } )
                  .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T12:03:31.773

```
 public class Table
    {
        public string City { get; set; }

        public string Deposit { get; set; }

        public decimal Amount { get; set; }
    }

             var list = new List<Table>
                           {
                               new Table { City = "city1", Deposit = "new", Amount = 100 },
                               new Table { City = "city1", Deposit = "new", Amount = 200 },
                               new Table { City = "city2", Deposit = "old", Amount = 200 },
                               new Table { City = "city2", Deposit = "old", Amount = 100 },
                               new Table { City = "city2", Deposit = "new", Amount = 200 },
                               new Table { City = "city3", Deposit = "new", Amount = 100 }
                           };
            //You can get all items by grouping with city and deposit in here.
            var result = (from c in list
                          group c by new {c.City,c.Deposit} into d
                          select new
                          {
                              City = d.Key.City,
                              Deposit = d.Key.Deposit,
                              SumAmount = d.Sum(x => x.Amount)
                          });

            //If you want only new,
            var resultNew = result.Where(x => x.Deposit == "new");
            //If you want only old,
            var resultOld = result.Where(x => x.Deposit == "old"); 
```

# java - jdk6 有问题的框架：# J java.util.LinkedHashMap.addEntry(ILjava/lang/Object;Ljava/lang/Object;I)V

> ID：12997526
> 
> 赞同：4
> 
> 时间：2012-10-21T11:46:59.037
> 
> 标签：java, jvm-crash

有没有办法解决这种错误报告：

```
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007fc955e66998, pid=25851, tid=140467030525696
#
# JRE version: 6.0_37-b06
# Java VM: Java HotSpot(TM) 64-Bit Server VM (20.12-b01 mixed mode linux-amd64 compressed     oops)
# Problematic frame:
# J  java.util.LinkedHashMap.addEntry(ILjava/lang/Object;Ljava/lang/Object;I)V 
```

?

崩溃发生得相当频繁（在 Web 服务器生产中每天 1-2 次），几乎总是有不同的问题框架报告。

以下是一些错误报告的示例：

```
# J  java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.addConditionWaiter()Ljava/util/concurrent/locks/AbstractQueuedSynchronizer$Node;
# J  java.util.LinkedHashMap.addEntry(ILjava/lang/Object;Ljava/lang/Object;I)V
# C  [libc.so.6+0x6bb34]
# C  [libgobject-2.0.so.0+0x2346f]  g_type_check_instance_is_a+0x43
# C  [libgobject-2.0.so.0+0x2346f]  g_type_check_instance_is_a+0x43
# V  [libjvm.so+0x4d3360]
# V  [libjvm.so+0x32d166]  CardTableRS::write_ref_field_gc_par(void*, oopDesc*)+0x26
# V  [libjvm.so+0x7a33e2]  ContiguousSpace::prepare_for_compaction(CompactPoint*)+0x242
# V  [libjvm.so+0x4d3360]
# V  [libjvm.so+0x76943b]  ReferenceProcessor::balance_queues(DiscoveredList*)+0x32b
# V  [libjvm.so+0x4d3360]
# V  [libjvm.so+0x32d166]  CardTableRS::write_ref_field_gc_par(void*, oopDesc*)+0x26
# V  [libjvm.so+0x4d3360]
# V  [libjvm.so+0x4d3360]
# V  [libjvm.so+0x76943b]  ReferenceProcessor::balance_queues(DiscoveredList*)+0x32b 
```

似乎触发崩溃的唯一事情是大约 30gb 的高内存使用量，尽管情况并非总是如此（在 gc 日志显示内存使用量低的瞬间有一些崩溃）。在模式下运行时不会发生崩溃`-Xint`，但该模式太慢以至于无法选择。

似乎很难制作任何简单的“可重现代码”来重现复杂应用程序的生产环境中发生的错误。

该怎么办？不过，我确实在 Oracle 崩溃现场报告了其中的一堆……

我不怀疑硬件内存问题，因为除了 java 之外没有其他任何东西会崩溃。并且应用程序中没有自定义的原生 jni 代码。

我们的 vm 参数是`-server -Xss4096k -Xms32255M -Xmx32255M -Xnoclassgc -XX:+UseNUMA -XX:MaxPermSize=512m -XX:+UseGCOverheadLimit -verbose:gc -Xmaxf1 -XX:+UseCompressedOops -XX:+DisableExplicitGC -XX:+AggressiveOpts -XX:+ScavengeBeforeFullGC -XX:CMSFullGCsBeforeCompaction=10 -XX:CMSInitiatingOccupancyFraction=70 -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+CMSIncrementalMode -XX:+CMSIncrementalPacing -XX:+CMSParallelRemarkEnabled -XX:+ParallelRefProcEnabled -XX:GCTimeRatio=19 -XX:+UseAdaptiveSizePolicy -XX:MaxGCPauseMillis=500 -Xloggc:gc.log`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T12:05:19.417

虽然崩溃可能是由 JVM 错误引起的，但更有可能是由您编写的某些 JNI / JNA 本机代码引起的，或者是您正在使用的某些 3rd-party 库的一部分。

> 该怎么办？

这是一篇关于如何开始调试故障转储的博客：[http ://www.javacodegeeks.com/2012/01/debugging-jvm.html](http://www.javacodegeeks.com/2012/01/debugging-jvm.html)

在您的情况下，报告都不同的事实将使问题更难追踪。*听起来*您可能对“随机”破坏堆对象有问题。

> 不过，我确实在 Oracle 崩溃现场报告了其中的一堆……

除非您有支持合同，否则 Oracle 不太可能回复您并提供解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T12:23:12.733

如果崩溃频繁出现显然是随机原因，那么我会考虑可能的硬件问题（例如不可靠的 RAM）。我倾向于在服务器上运行完整的硬件诊断程序，看看是否会引发任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T04:08:32.543

我在网上找到了这篇文章 ` 如果将 Java™ 虚拟机 (JVM) AggressiveOpts 选项与包含 Enterprise JavaBeans (EJB) 文件的 Java Platform Enterprise Edition (Java EE) 应用程序一起使用，JVM 可能会崩溃。要解决此问题，请使用以下参数禁用 DoEscapeAnalysis 优化：

-XX:+AggressiveOpts -XX:-DoEscapeAnalysis`:

[http://www-01.ibm.com/support/docview.wss?uid=swg21422605](http://www-01.ibm.com/support/docview.wss?uid=swg21422605)

奇怪的是，这`-XX:-CMSIncrementalMode`使得系统非常不稳定，我不得不启用这个选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T13:12:03.323

升级到 jdk7 Java(TM) SE 运行时环境（内部版本 1.7.0_09-b05），此后没有任何问题；以下 vmargs：

```
-server -Xss4096k -XX:MaxPermSize=512m -Xms32255M -Xmx32255M -Xnoclassgc -XX:+UseNUMA -XX:+UseBiasedLocking -XX:+UseFastAccessorMethods -XX:ReservedCodeCacheSize=48m -XX:+UseStringCache -XX:+HeapDumpOnOutOfMemoryError -XX:+UseGCOverheadLimit -Duser.timezone=EET -Xmaxf1 -XX:+UseCompressedOops -XX:+DisableExplicitGC -XX:+AggressiveOpts -XX:CMSInitiatingOccupancyFraction=70 -XX:+ParallelRefProcEnabled -XX:+UseAdaptiveSizePolicy -XX:MaxGCPauseMillis=100 -XX:+UseG1GC -XX:GCPauseIntervalMillis=3000 -XX:+PrintGCDetails -XX:+PrintHeapAtGC -Xloggc:gc.log 
```

# cocoa - 在 NStableview 中启用多行选择

> ID：12997527
> 
> 赞同：0
> 
> 时间：2012-10-21T11:47:06.923
> 
> 标签：cocoa, nstableview, nsarraycontroller

我创建了一个基于[此示例](https://developer.apple.com/cocoa/coredatatutorial/index.html)应用程序结构的小型应用程序。但是现在我需要你在tableview中选择多行，我试图找到解决方案但没有成功。你能告诉我我该怎么做吗？请记住，我不是专家。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:29:35.507

您可以在 Interface Builder 中执行此操作。选择您的表格视图，进入选择下的属性检查器并检查多项选择。

# javascript - yui3 用一个类添加淡入淡出效果

> ID：12997530
> 
> 赞同：0
> 
> 时间：2012-10-21T11:47:22.680
> 
> 标签：javascript, yui, fadein, fadeout

我正在使用 yui3 进行淡入/淡出效果。问题是我似乎无法通过使用一个类找到一种方法（fadein - 添加一个 css 类，fadeout - 删除该类）。

我只找到定义背景颜色和背景颜色的示例。

yui3不可能吗？用jquery就是这么简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:48:20.550

是的。每个 YUI 节点对象都有一个 hide() 和一个 show() 方法。

默认情况下， hide() 和 show() 只是立即隐藏节点。但是，如果您还加载了 'node' 模块旁边的 'transition' 模块，则可以选择通过调用 hide(true) 将隐藏变为淡入淡出。（你可以做非常花哨的自定义转换，但这就是如何做一个基本的淡入淡出）。

请参阅[http://yuilibrary.com/yui/docs/transition/transition-view.html](http://yuilibrary.com/yui/docs/transition/transition-view.html)以获取还展示节点委托的详细示例。有关更精简的示例，请参阅[https://github.com/yahoo/yui3-cookbook/blob/master/examples/effects/fading.html 。](https://github.com/yahoo/yui3-cookbook/blob/master/examples/effects/fading.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T15:01:59.240

更一般地说，您可以使用[http://yuilibrary.com/gallery/show/anim-class](http://yuilibrary.com/gallery/show/anim-class)动画添加或删除类。

# javascript - 更改显示/隐藏功能中的链接文本

> ID：12997538
> 
> 赞同：2
> 
> 时间：2012-10-21T11:48:02.423
> 
> 标签：javascript

好的，所以我一直在努力解决这个问题，现在想我需要一点帮助。

我有两个段落，id 的 show1 和 show2。

我有一个简短的文本，每个文本都应该在单击它们上方的链接时展开。

我的函数可以展开和折叠，但感觉它没有获得链接的值，更准确地说，是链接文本，因为我得到“链接为空”。

它一直有效到 var status 和 innerHTML，如果我注释掉它有效的这两行，那么它不会将我的链接文本从显示更改为隐藏...所以如果有任何善良的灵魂可以帮助我，那就太好了赞赏。

```
/* Function created by "Simon Willson" to be able to 
call several functions with a single event */

//Create the function
function addLoadEvent(func) {
//Create a variable for window.onload event
var oldonload = window.onload;
//If window.onload is NOT a function, then assign 'func' to window.onload
if (typeof window.onload != 'function') {
    window.onload = func;
//If window.onload already is a function then make a new function
} else {
    window.onload = function() {
    //To do what the old onload function did
    if (oldonload) {
    oldonload();
    }
    //then do whatever the new function does 
    func();
    }
}
}

function newLink() {
    //Make a few safety check to see if the browser can handle the elements
    if (!document.getElementById) {
        if (!document.createElememt) {
            if (!document.createTextNode) {
                return false;
            }
        }
    }
    //Create the link
    newLinkElement = document.createElement('a');
    //Give the link a Id
    newLinkElement.id = 'show1_link';
    //Set the href
    newLinkElement.href = "javascript:showHide(this.id,'show1')";
    //Create a variable for the link text
    var linkText = document.createTextNode('Visa mera information');
    //Append the text to the link
    newLinkElement.appendChild(linkText);
    //Create a variable for the paragraph
    var elem = document.getElementById('show1')
    //Insert the text before the paragraph with the Id show1
    elem.parentNode.insertBefore(newLinkElement,show1);
}
addLoadEvent(newLink);

function showHide(link_id,elemId) {
    var link = document.getElementById(link_id);
    var text = document.getElementById(elemId);
    text.style.display = (text.style.display == 'block') ? 'none' : 'block';
    var status = (text.style.display == 'block') ? 'none' : 'block';
    text.style.display = status;
    link.innerHTML = (status == 'block') ? 'Dölj information' : 'Visa mera information';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:38:30.463

在您的函数 showHide 中：

```
function showHide(link_id,elemId) {
    var link = document.getElementById(link_id);
    var text = document.getElementById(elemId);
  //  text.style.display = (text.style.display == 'block') ? 'none' : 'block';
    var status = (text.style.display == 'block') ? 'none' : 'block';
    text.style.display = status;
    link.innerHTML = (status == 'block') ? 'Dölj information' : 'Visa mera information';
} 
```

您正在设置 text.style.display 两次。删除我在上面注释的行。

我可能会这样写：

```
function showHide (linkEl, textEl) {
  var status;
  typeof linkEl === 'string' && (linkEl = document.getElementById (linkEl));
  typeof textEl === 'string' && (textEl = document.getElementById (textEl));

  if (textEl) {
    textEl.style.display = (status = (textEl.style.display === 'block')) ? 
                             'none' : 'block';
    linkEl && (linkEl.innerHTML = status ? 
                             'Dölj information' : 'Visa mera information');
  }
} 
```

这允许您使用元素的 id 或元素本身来调用 showHide。它还检查元素是否存在，如果找不到，则不执行任何操作。

有关完整的示例，请参见[http://jsfiddle.net/CgnXL/](http://jsfiddle.net/CgnXL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:12:10.823

我玩弄了你的两个代码示例，但最终做了

```
//Create the function
function addLoadEvent(func) {
//Create a variable for window.onload event
var oldonload = window.onload;
//If window.onload is NOT a function, then assign 'func' to window.onload
if (typeof window.onload != 'function') {
    window.onload = func;
//If window.onload already is a function then make a new function
} else {
    window.onload = function() {
    //To do what the old onload function did
    if (oldonload) {
    oldonload();
    }
    //then do whatever the new function does 
    func();
    }
}
}
//Add as many functions you like with addLoadEvent(functionName);

/* Create the object hideParagraph, showOrHide using singleton
method, this way the instance only occur once and not globaly, 
then called using (function()ObjName.functionName('classNameHere'));*/

//Create the global variable
var hideParagraph = {
//Create the private function for the hidden function
hideText: function() {
    //Make a few safety checks to see if the browser can understand the code
    if (!document.getElementsByTagName) {
        if (!document.getAttribute) {
        return false;
        }
    }
    //Make a variable to get tag names with a wildcard
    var elements = document.getElementsByTagName('*');
    //Make the loop
    for (var i = 0; i < elements.length; i++) {
        //If it belongs to the class show
        if (elements[i].getAttribute('class') == 'show') {
        //Then hide it
        elements[i].style.display = 'none';
        }
    }
}
}
addLoadEvent(hideParagraph.hideText);

//Create the global variable
var showOrHide = {
//Create the private function for the link
createLinks: function(nodeClass) {
    //Make a few safety checks to see if the browser can understand the code
    if (!document.getElementsByClassName) {
        if (!target.parentNode) {
            if (!document.createElement) {
            return false;
            }
        }
    }
    //Get all the nodes of a class
    var nodes = document.getElementsByClassName(nodeClass);
    //Make the loop
    for (var i = 0; i < nodes.length; i++) (function(i) {
        //Make a variable for the nodes
        var target = nodes[i];
        //Create the link element
        var a = document.createElement('a');
        //Prevent the page from ever refeshing on click
        a.href = 'javascript:void(0)';
        //Set the link text
        a.innerHTML = 'Visa mera information';
        //Set the click function for the link
        a.onclick = function() {
            /* Call the global variable showOrHide with the function     showHide 
                using this link and it's target, the variable we made for nodes[i] */
            showOrHide.showHide(this, target);
        }
        //Get the parent node, in this case the parent is 'post'
        var parent = target.parentNode;
        /* Insert the link (a) before it's target (nodes[i]) element, the target
            node, the node is set when you call the function */
        parent.insertBefore(a, target);
    //Close the loop and then close up and end with the function name (i)
    })(i);
/* Close the createLinks function and after put a punctuation mark , 
    that mark separates one function from another in a singleton method */
},
//Another private function
showHide: function(trigger, target) {
    //Set the toggle option
    var status = (target.style.display == 'block') ? 'none' : 'block';
    //Depending on what the status is
    target.style.display = status;
    //Change the link text accordingly
    trigger.innerHTML = (status == 'block') ? 'Dölj information' : 'Visa mera information';
}
}
addLoadEvent(function() { showOrHide.createLinks('show')}); 
```

以为我分享了我完整且有效的代码示例，用于在一个类中隐藏尽可能多的段落，然后循环遍历并与您定义的类建立尽可能多的链接，然后将它们放置在该元素上方。除了第一个 addLoadEvent 脚本之外，一切都使用单例方法，也许它会帮助其他人:)

# java - 视频文件转换/转码 Google App Engine

> ID：12997539
> 
> 赞同：11
> 
> 时间：2012-10-21T11:48:05.790
> 
> 标签：java, google-app-engine, ffmpeg, video-processing, blobstore

我想以简单的任务开始一个云计算项目：

1.  接收上传的视频文件
2.  做一些转码/转换为他们
3.  允许用户下载/流式传输生成的文件

我在想`ffmpeg`作为一个集成在`Java/Google App engine Application`. 由于很难确定框架的局限性，有人可以告诉我这是否可行吗？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:24:16.943

您必须将 ffmpeg 卸载到外部服务器，例如[Amazon EC2](http://aws.amazon.com/ec2/)或[Google Compute Engine](https://cloud.google.com/products/compute-engine)。

在今年的 Google I/O 上，Google 在题为“*[通过 Google App Engine 管理 Google Compute Engine 虚拟机](https://developers.google.com/events/io/sessions/gooio2012/308/)*”的演示文稿中实际上展示了您想要制作的完全相同的项目，尽管使用的是 Python。

一些代码已经在幻灯片中，但正如演示文稿中提到的，谷歌希望提供该项目的源文件。我不知道他们是否已经这样做了。您可能可以通过电子邮件向作者发送电子邮件并询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-22T12:44:27.687

这不会简单地起作用。Google App Engine 和 Google Cloud Functions 中都有超时限制。实现此目的的唯一实用方法是使用具有无限超时值的 Google App Engine Flex。

# c# - 需要有关如何控制光传感器的帮助

> ID：12997540
> 
> 赞同：-2
> 
> 时间：2012-10-21T11:48:08.240
> 
> 标签：c#, asp.net

## 我不是在询问整个解决方案，我只是询问有关在哪里购买这些可编程硬件品牌、型号等的信息。

我搜索了许多有关光传感器的网站，其中许多都提供了有关一些没有可编程功能的廉价齿轮的信息。

我需要控制一个光传感器，这样当光照强度达到一定水平时，它会自动打开天窗。

但是我不知道从哪里开始这个项目以及在哪里问这个问题，除了这里。

因此，如果有人能提供这两种硬件的详细信息（在哪里购买、类型、品牌），我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T22:34:50.013

## 你想从头开始吗？

然后，您可以购买一个采用 PDIP 封装的微控制器，例如[Atmel AVR](http://www.atmel.com/devices/atmega8.aspx)，获取一个[对其进行编程的工具](http://www.atmel.com/tools/AVRISPMKII.aspx)，然后构建您需要的电路板。

这并不像听起来那么难。您可以获得有关如何设置电路板电源的简单示意图，其余的只是通过 uC（微控制器）引脚控制输入和输出。

您可以使用 C++ 进行编程，Atmel 提供了一个用于对他们的 uC 进行编程的[IDE 。](http://www.atmel.com/microsite/atmel_studio6/default.aspx)

* * *

## 你想要预制的基本板吗？

然后，我推荐的解决方案是[Arduino](http://www.arduino.cc/)。

> Arduino 是一个基于灵活、易于使用的硬件和软件的开源电子原型设计平台。它适用于艺术家、设计师、爱好者以及任何对创建交互式对象或环境感兴趣的人。

有很多关于如何在 Arduino 板上设置各种传感器和执行器的简单教程。

* * *

## 用 C# 做

我从来没有在 uC 上做过任何 .NET 编程，但是我听说过[.NET Micro Framework](http://www.microsoft.com/net/multiple-platform-support)，据说就是这样。但是您必须记住，.NET 是为桌面开发而设计的，而微控制器（或嵌入式设备）则完全不同，因为您真正要做的是控制输入和输出。

不要害怕使用 C++，你可能不需要任何高级知识来做你需要做的事情。

## 编辑：

实际上，从头开始，显然[Netduino](http://netduino.com/)就像 .NET 的 Arduino。可能正是您需要的！

# javascript - 将控件添加到视频中

> ID：12997541
> 
> 赞同：0
> 
> 时间：2012-10-21T11:48:18.267
> 
> 标签：javascript

我正在编写一个 HTML5 控制器并遇到了闭包问题（我认为）。我不确定如何在所有视频标签上使用通用循环，而不是在示例为“简单”执行 getElementByID 时提供的内容。

具体来说，我如何概括所有这些，以便每个视频都具有仅适用于它们的控件。

PS 这是关于学习的，所以解决这个问题的库并不是我真正想要的。

```
'use strict';
var videos = document.getElementsByTagName('video'), i, vid, controlsBox, play, mute, posterpic;

function playPause(video) {
    if (!(video.paused || video.ended || video.seeking || video.readyState < video.HAVE_FUTURE_DATA)) {
        video.pause();
        play.innerHTML = "Play";
    } else {
        video.play();
        play.innerHTML = "Pause";
    }
}

function myAppend(appendTo, toAppend) {
    if (appendTo.nextSibling) {
        appendTo.parentNode.insertBefore(toAppend, appendTo.nextSibling);
    } else {
        appendTo.parentNode.appendChild(toAppend);
    }
}

for (i = 0; i < videos.length; i += 1) {
    vid = videos[i];
    vid.controls = false;

    vid.addEventListener('click', function () {
        playPause(this);
    }, false);

    // Controls box to display while video is playing
    controlsBox = document.createElement('div');
    controlsBox.setAttribute("class", 'videoControls');

    play = document.createElement('button');
    play.type = "Button";
    play.setAttribute("class", 'playButton');
    play.innerHTML = "Play";

    play.addEventListener('click', function () {
        playPause(vid);
    }(), false);

    controlsBox.appendChild(play);

    mute = document.createElement('button');
    mute.type = "Button";
    mute.setAttribute("class", 'muteButton');
    mute.innerHTML = "Mute";

    mute.addEventListener('click', function () {
        vid.volume = 0;
    }(), false);

    controlsBox.appendChild(mute);

    myAppend(vid, controlsBox);
    //Finished with controls box
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:41:58.390

您可以*将*控件的引用放在每个视频元素上。在循环中
调用之前添加以下语句。`myAppend`

```
vid.controlsBox = controlsBox;
vid.muteControl = mute;
vid.playControl = play; 
```

那么`playPause`函数应该是这样的：

```
function playPause(video) {
    if (!(video.paused || video.ended || video.seeking || video.readyState < video.HAVE_FUTURE_DATA)) {
        video.pause();
        video.playControl.innerHTML = "Play";
    } else {
        video.play();
        video.playControl.innerHTML = "Pause";
    }
} 
```

对于需要访问相关控件的其他视频功能，请使用上面的`controlBox`、`muteControl`和类似功能。`playControl`

`controlsBox`如果您需要访问关联的对象，您还可以将视频元素和控件的引用放入元素中。只需在循环中添加以下语句。

```
controlsBox.video = vid;
controlsBox.muteControl = mute;
controlsBox.playControl = play; 
```

# html - :target 指向一个 .class 而不是 #id

> ID：12997544
> 
> 赞同：1
> 
> 时间：2012-10-21T11:48:44.653
> 
> 标签：html, css, css-selectors, pseudo-class

它是一种使`:target`to 指向 a`.class`而不是 an 的方法，`#id`因此它可以指向多个元素的用例：

```
<style>
section:target{height: 60px}
section p:target{color:red}
</style>

    <div class="menu">
    <nav><a href="#foo">Collapse me</a></nav>
    <nav><a href="#bar" >Change my color</a></nav>
        <section id="foo">
            <p id="bar">hop</p>
        </section>
</div>

<div class="menu">
    <nav><a href="#baz">Collapse me</a></nav>
    <nav><a href="#boo">Change my color</a></nav>
        <section id="baz">
        <p id="boo">la</p>
        </section>
    </div> 
```

想象一下它会起作用，然后你可以在菜单中制作著名的“*我在这里*”，同时**折叠页面**并**显示用户所在的位置****，**想象一下，例如，你制作一张图片，然后你把`opacity:0`then使用目标时，您让值是`opacity:1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T11:51:14.337

这是不可能的，而且这不是`:target`伪类的使用方式。

URL 中的锚片段一次只能指向一个标识符，因此即使`:target`查看了类，您也不能一次将样式应用于给定类的多个元素。这就是为什么锚片段对应于 ID，而不是类。

如果您需要定位多个元素，您应该使用其他 CSS 选择器甚至 JavaScript。

# python - 如何在运行时更改 Kivy 中小部件的颜色？

> ID：12997545
> 
> 赞同：21
> 
> 时间：2012-10-21T11:49:16.617
> 
> 标签：python, kivy

我无法在 Kivy 中更改简单小部件的颜色。我可以在创建小部件时设置颜色，但之后无法更改。

这是简单的布局定义文件`circletest.kv`。它定义了一个圆圈，其中颜色（实际上只是 r，来自 rgba）、位置和大小都链接到小部件类中的变量。

```
#:kivy 1.4.1

<CircleWidget>:
    canvas:
        Color:
            rgba: self.r,1,1,1
        Ellipse:
            pos: self.pos
            size: self.size 
```

这是应用程序`circletest.py`。它创建并显示简单的小部件。创建对象时成功设置颜色和位置。单击小部件时，小部件可以更改它自己的位置，但是当我尝试更改颜色时，什么也没有发生。

```
import kivy
kivy.require('1.4.1')
from kivy.app import App
from kivy.lang import Builder
from kivy.uix.widget import Widget

Builder.load_file('circletest.kv')

class CircleWidget(Widget):

    def __init__(s, **kwargs):
        s.size= [50,50]
        s.pos = [100,50]
        s.r = 0
        super(CircleWidget, s).__init__(**kwargs)

    def on_touch_down(s, touch):
        if s.collide_point(touch.x,touch.y):    
            s.pos = [s.pos[1],s.pos[0]]           # This works
            s.r = 1.0                       # <---- This does nothing!

class TestApp(App):

    def build(s):
        parent = Widget()
        w = CircleWidget()
        parent.add_widget(w)
        return parent

if __name__ == '__main__':
    TestApp().run() 
```

任何人都可以看到问题吗？

**更新**

仍然不确定这个问题的答案是什么，但我确实有一个解决方法：

在 .kv 文件中，我将颜色指向对象中的一个变量。用于提取初始颜色：

```
Color:
    rgba: self.col 
```

当我想从 .py 文件中更改颜色时，我会遍历画布中的所有指令并修改第一个“颜色”类型的指令。显然这是一种 hack，并且不适用于具有多个`Color:`属性的小部件：

```
for i in s.canvas.get_group(None):
    if type(i) is Color:
        i.r, i.g, i.b, i.a = v
        break 
```

我将所有内容都包装在一个属性中，因此使用起来很整洁：

```
class CircleWidget(Widget):

    def get_col(s):
        return s._col

    def set_col(s,v):
        for i in s.canvas.get_group(None):
            if type(i) is Color:
                i.r, i.g, i.b, i.a = v
                break
        s._col = v

    col = property(get_col, set_col)

    def __init__(s, **kwargs):
        s.size= [50,50]
        s.pos = [100,50]
        s._col = (1,1,0,1)
        super(CircleWidget, s).__init__(**kwargs)

    def on_touch_down(s, touch):
        if s.collide_point(touch.x,touch.y):    
            s.col = (s.col[::-1]) # Set to some other color 
```

似乎现在可以工作。如果您知道更好的方法，请告诉我。我相信一定有一个更简单的方法，而且我错过了一些明显的东西！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-22T10:58:48.067

tshirtman 的答案是正确的，这是对发生的事情的解释。

设置时在您的 kv 文件中

```
<CircleWidget>:
    canvas:
        Color:
            rgba: self.r, 1, 1, 1
        Ellipse:
            pos: self.pos
            size: self.size 
```

每当 的值发生变化时， 该行就会`rgba: self.r, 1, 1, 1`尝试更新 的值。这是通过绑定在 kv 语言中隐式完成的，这可以在[kivy 属性](http://kivy.org/docs/api-kivy.properties.html)上完成，因为它实现了[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。`rgba``r`

您的代码中的变量`r`已更新，但它只是一个变量，不提供任何表明其值已更改且无法绑定的指示。如果您注意到您的更改`pos`工作，因为[`pos`](http://kivy.org/docs/api-kivy.uix.widget.html#kivy.uix.widget.Widget.pos)是 ReferenceListProperty。

在 Kivy 中编程的一般规则，如果您想根据 Widget/Object 的属性更改代码，请使用[Kivy 属性](http://kivy.org/docs/gettingstarted/index.html#doc-properties)。它为您提供了[观察属性更改](http://kivy.org/docs/api-kivy.properties.html#observe-properties-changes)并相应地通过[绑定显式调整代码的选项](http://kivy.org/docs/api-kivy.event.html#kivy.event.EventDispatcher.bind) / [on_property_name](http://kivy.org/docs/api-kivy.properties.html#observe-using-on-propname)事件或通过上面提到的 kv 语言隐式调整您的代码。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-22T09:19:59.843

在您的初始版本中，您只是缺少属性声明

```
from kivy.properties import NumericProperty 
```

在标题和

```
r = NumericProperty(0) 
```

就在下面`class CircleWidget(Widget):`

另外，您声明您的 kv 文件名为 circletest.kv，但您的应用程序名为 TestApp，因此您应该更改其中一个以使其连贯，否则将找不到您的 kv 文件，但由于您不报告任何问题，我想这只是问题中的一个错字。编辑：刚刚看到`Builder.load_file`好的，

干杯。

# ruby - 如何将字符串拆分为列表并获取第三个元素？

> ID：12997549
> 
> 赞同：-4
> 
> 时间：2012-10-21T11:50:19.660
> 
> 标签：ruby

我使用厨师，但我是一名 Python 开发人员。我需要拆分一个看起来像这样的字符串：

```
ms = "a-b-c-d" 
```

然后我需要得到第三个元素'c'

在python中我会这样做：

```
ms.split('-')[2] 
```

红宝石的做法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T11:59:43.023

一样的：

```
ms.split('-')[2] 
```

# facebook - Facebook 画布 URL 空白

> ID：12997550
> 
> 赞同：0
> 
> 时间：2012-10-21T11:50:25.517
> 
> 标签：facebook, google-app-engine

我在为托管在 google 应用程序引擎上的我的 facebook 应用程序显示画布 url 时遇到一些问题，我正在使用 python。

在谷歌应用引擎（www.my-app.appspot.com）上一切正常，但是当我尝试在 facebook 上查看我的应用时，画布完全是空白的。

URL 画布： http: [//my-app.appspot.com/](http://my-app.appspot.com/) 安全 URL 画布：[https ://my-app.appspot.com/](https://my-app.appspot.com/)

我的配置有问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:36:41.343

Your configurations are correct.

If you are using the [https://github.com/pythonforfacebook/facebook-sdk](https://github.com/pythonforfacebook/facebook-sdk)

You will need to make some changes to the example code.

The **example.py** file defines "get" and "post" methods under the HomeHandler class.

The "get" will not work when the page is running as a Canvas App inside Facebook.com, though it will work when the page is directly called by a browser.

Facebook loads the Canvas App into its iframe using a POST request containing the **signed_request** argument as detailed here: [https://developers.facebook.com/docs/howtos/login/signed-request/](https://developers.facebook.com/docs/howtos/login/signed-request/)

The first step you can take to fix the example.py file is as follows.

This will at least get code showing up inside Facebook:

1.  Comment out the original "post" method:

    ```
    #def post(self):
    #url = self.request.get('url')
    #file = urllib2.urlopen(url)
    #graph = facebook.GraphAPI(self.current_user['access_token'])
    #response = graph.put_photo(file, "Test Image")
    #photo_url = ("http://www.facebook.com/"
                  #"photo.php?fbid={0}".format(response['id']))
    #self.redirect(str(photo_url)) 
    ```

2.  Duplicate the "get" method as the "post" method, now both get and post are:

    ```
    def post(self):
    template = jinja_environment.get_template('example.html')
    self.response.out.write(template.render(dict(
        facebook_app_id=FACEBOOK_APP_ID,
        current_user=self.current_user
    ))) 
    ```

Once that is done, you can test within Facebook. "example.html" should display in the iframe, however, by default, "example.html" asks for an image URL to upload. That will no longer work since the original "post" method is commented out.

To fix the functionality, you'll need to create if/then statements in the **def post(self):** method to handle requests. For instance, you may want to re-integrate the original "post" method by checking for the 'url' argument - using *self.request.get('url')* - if it is there, then you know you are receiving an image URL and should branch to the original "post" code

# php - subgrid jqgrid 示例 php mysql

> ID：12997551
> 
> 赞同：0
> 
> 时间：2012-10-21T11:50:48.533
> 
> 标签：php, jquery, mysql, jqgrid, subgrid

当我想创建子网格时我卡住了，总是**显示未捕获的异常：jqGrid - 没有这样的方法：addSubGridCell**我已经尝试了示例，但是我遇到了错误，，，这是 JS 我很困惑我必须做什么......

```
$(document).ready(function(){
            var grid = $("#list2");
            grid.jqGrid({
                url: 'json.php', //URL Tujuan Yg Mengenerate data Json nya
                datatype: "json", //Datatype yg di gunakan
                height: "auto", //Mengset Tinggi table jadi Auto menyesuaikan dengan isi table
                mtype: "GET",
                colNames: ['action','id','Agen','Suplier','Hotel','Check In', 'Check Out', 'ROOMs', 'Status', 'Group Hotel', 'Notes'],
                colModel: [{name: 'myac', width:45, fixed:true, sortable:false, search:false, align:'center', resizable: false, resize:false, formatter:'actions',
                        formatoptions:{
                            keys:true,editbutton: true, delbutton: true, //Key True disini adalah untuk Shorcut Tombol Enter dan Esc, Enter untuk Save, dan Escape Untuk Batal, anda juga Membuatnya jadi False jika anda tidak ingin seperti itu
                            onSuccess:function(jqXHR) {
                                alert(jqXHR.responseText);
                                return true;
                            }
                        }
                    },
                    {name:'id', key:true, index:'id', hidden:true,editable:false,editrules:{required:true}},
                    {name:'agen',index:'agen',editable:true,editrules:{required:true}},
                    {name:'suplier',index:'suplier',editable:true,editrules:{required:true}},
                    {name:'hotel',index:'hotel',align:'center',editable:true,editrules:{required:true}},
                    {name:'checkin',index:'checkin',align:'center',editable:true,editrules:{required:true}},
                    {name:'checkout',index:'checkout',align:'center',editable:true,editrules:{required:true}},
                    {name:'rooms',index:'rooms',align:'center',editable:true,editrules:{required:true}},
                    {name:'status',index:'status',align:'center',editable:true,editrules:{required:true}},
                    {name:'groupHotel',index:'groupHotel',align:'center',editable:true,editrules:{required:true}},
                    {name:'notes',index:'notes',align:'center',editable:true,editrules:{required:true}}
                ],
                rownumbers:true,
                rowNum: 10,
                rowList: [10,20,30],
                pager: '#pager2',
                sortname: 'id',
                viewrecords: true,
                sortorder: "desc",
                editurl: "crud.php",
                multiselect: false,
                caption: "Record Test",
                // subGrid: true,
    //          subGridUrl : "subrgrid1.php",
    //          subGridModel : [ 
             //      {
             //      name  : ['ID', 'Id Reservation', 'Room Type', 'Total Room', ],
             //      width : [55, 200, 80, 80, 80],
             //      align : ['left','left','right','right','right'],
             //      params: ['rooms'] 
             //      }
             //    ]                    
            });
            grid.jqGrid('navGrid','#pager2',{view:true,edit:true,add:true,del:true});               
        }); 
```

让我解释一下，子网格的子网格 URL 的评论，没有这个主网格是好的。

这是 subgrid1.php

```
<?php
$db = mysql_connect("localhost","root","");
$con = mysql_select_db("ota",$db);
if(!$con){
    echo "Something Problem";
}

$page  = $_GET['page'];
$limit = $_GET['rows'];
$sidx  = $_GET['sidx'];
$sord  = $_GET['sord'];

if(!$sidx) $sidx=1;

function ToSql ($field, $oper, $val) {
    // we need here more advanced checking using the type of the field - i.e. integer, string, float
    switch ($field) {
        case 'nik':
            //return intval($val);
            //break;
        case 'agen':
        case 'suplier':
        case 'hotel':
        case 'checkin':
        case 'checkout':
        case 'checkin':
        case 'rooms':
        case 'status':
        case 'groupHotel':
        case 'notes':

            //return floatval($val);
            //break;
        default :
            //mysql_real_escape_string is better
            if($oper=='bw' || $oper=='bn') return "'" . addslashes($val) . "%'";
            else if ($oper=='ew' || $oper=='en') return "'%" . addcslashes($val) . "'";
            else if ($oper=='cn' || $oper=='nc') return "'%" . addslashes($val) . "%'";
            else return "'" . addslashes($val) . "'";
    }
}

###For Single Searching###

//array to translate the search type
$ops = array(
        'eq'=>'=', //equal
        'ne'=>'<>',//not equal
        'lt'=>'<', //less than
        'le'=>'<=',//less than or equal
        'gt'=>'>', //greater than
        'ge'=>'>=',//greater than or equal
        'bw'=>'LIKE', //begins with
        'bn'=>'NOT LIKE', //doesn't begin with
        'in'=>'LIKE', //is in
        'ni'=>'NOT LIKE', //is not in
        'ew'=>'LIKE', //ends with
        'en'=>'NOT LIKE', //doesn't end with
        'cn'=>'LIKE', // contains
        'nc'=>'NOT LIKE'  //doesn't contain
);
function getWhereClause($col, $oper, $val){
        global $ops;
        if($oper == 'bw' || $oper == 'bn') $val .= '%';
        if($oper == 'ew' || $oper == 'en' ) $val = '%'.$val;
        if($oper == 'cn' || $oper == 'nc' || $oper == 'in' || $oper == 'ni') $val = '%'.$val.'%';
        return " WHERE $col {$ops[$oper]} '$val' ";
}
$where = ""; //if there is no search request sent by jqgrid, $where should be empty
$searchField = isset($_GET['searchField']) ? $_GET['searchField'] : false;
$searchOper = isset($_GET['searchOper']) ? $_GET['searchOper']: false;
$searchString = isset($_GET['searchString']) ? $_GET['searchString'] : false;
if ($_GET['_search'] == 'true') {
    $where = getWhereClause($searchField,$searchOper,$searchString);
}

            $data = mysql_query("SELECT COUNT(*) as count FROM reservation".$where);
            $row  = mysql_fetch_array($data);
            $count = $row["count"];
            //die($count);
            $count > 0 ? $total_pages = ceil($count/$limit) :
            $total_pages = 0;

            if ($page > $total_pages) $page=$total_pages;
            $start = $limit*$page - $limit;

            if($start <0) $start = 0;
            $data1 = mysql_query("SELECT * FROM reservation ".$where." ORDER BY $sidx $sord LIMIT $start, $limit");
            $responce = new stdclass();
            $responce->page = $page;
            $responce->total = $total_pages;
            $responce->records = $count;
            $i=0;
            while($line = mysql_fetch_array($data1)){
                $responce->rows[$i]['id']   = $line["id"];
    $responce->rows[$i]['cell'] = array('',$line["id"],$line["agen"],$line["suplier"],$line["hotel"],$line["checkin"],$line["checkout"],$line["rooms"],$line["status"],$line["groupHotel"],$line["notes"]);
    $i++;
}
echo json_encode($responce); 
```

这是 subgrid1.php

```
<?php
$examp = $_GET["q"];

$id = $_GET["idReservation"];

$db = mysql_connect($dbhost, $dbuser, $dbpassword) or die ("Connection ERROR : " .mysql_error());

mysql_select_db($database) or die ("Connection ERROR : " .mysql_error());

$sql = "SELECT id, idReservation, idRoomType, totalroom FROM roomtotal WHERE id=".$id" ORDER BY id";
$result = mysql_query($sql) or die (.mysql_error());
$i=0;
while ($row = mysql_fetch_array($result, mysql_assoc)) {
    $responce->rows[$i]['$id']=$row["id"];
    $responce->rows[$i]['cell']=array($row["id"], $row["idReservation"],$row["idRoomType"],$row["totalroom"]));
    $i++;
}
echo $json->encode($responce); 
```

我知道错误的 sql，但首先我想显示 subgrid :) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:47:45.467

查看此文档： [http](http://www.trirand.net/documentation/php/index.htm) ://www.trirand.net/documentation/php/index.htm （参见“jqSite php 文档/jqGrid PHP/Tutorials/Hierarchy/Subgrid 2 levels”，直接链接[http://www.trirand。网络/文档/php/_2v90kv1k9.htm](http://www.trirand.net/documentation/php/_2v90kv1k9.htm)）。当grid和subgrid都在php文件中时有写，但我想你会弄清楚如何用js编写一个grid，用php编写subgrid。

# api - 是否有允许通过 API 创建自定义链接的 url 缩短服务？

> ID：12997554
> 
> 赞同：2
> 
> 时间：2012-10-21T11:51:23.770
> 
> 标签：api, url-shortener, custom-url

例如，bit.ly 允许手动指定 URL，例如[http://bit.ly/urlwiki](http://bit.ly/urlwiki)，但此功能已从其[API](http://dev.bitly.com/api.html)中删除。是否有另一种流行的 url 缩短服务支持此功能？Goo.gl 没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:43:23.283

您可以使用他们声称支持参数的[is.gd。](http://is.gd/apishorteningreference.php)`shorturl`

# php - 如何在标头php中转义引号

> ID：12997555
> 
> 赞同：0
> 
> 时间：2012-10-21T11:51:23.883
> 
> 标签：php

我在网上搜索了半天已经在下面看到我的代码

```
<?php 
  header("Refresh: 2;url=test.php?ID=".$_GET['ID']"&UID=".$_GET['uid']);
  echo "<img src='images/loading.gif'/>";
?> 
```

我知道问题在于标头代码中的引号。任何人都可以为我纠正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:12:04.663

您应该转义从查询字符串中收到的参数！

用于`http_build_query()`构造查询字符串：

```
header("Refresh: 2;url=test.php?" . http_build_query(array(
    'ID' => $_GET['ID'],
    'UID' => $_GET['uid'],
))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:55:07.877

使用`urlencode($_GET['...'])`where 标头可以包含部分 url。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T11:55:27.910

你想念 `.`

```
<?php 

header("Refresh: 2;url=test.php?ID=".$_GET['ID']."&UID=".$_GET['uid']);

// or header("Refresh: 2;url=test.php?ID=$_GET['ID']&UID=$_GET['uid']");

echo "<img src='images/loading.gif'/>";

?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-21T11:53:27.067

如果您不熟悉字符串语法，请使用更简单的语法：

```
header("Refresh: 2;url=test.php?ID=$_GET[ID]&UID=$_GET[uid]"); 
```

（仅在双引号字符串上下文中允许省略数组键引号！）

# php - 表单以字符串形式提交文件字段

> ID：12997558
> 
> 赞同：2
> 
> 时间：2012-10-21T11:51:44.927
> 
> 标签：php, html, forms

什么可能导致这种形式的问题？

```
<form enctype="multipart/form-data" action="" method="post">
    <p>
        <label>Please select a picure to upload:</label><br />
        <input type="file" name="file" />
    </p>
    <p>
        <input type="submit" name="button" id="button" value="Upload Picture" />
    </p>
</form> 
```

文件作为字符串而不是文件提交...

var_dump($_POST):

```
array (size=2)
    'file' => string 'Visit Card.png' (length=14)
    'button' => string 'Upload Picture' (length=14) 
```

var_dump($_FILES):

```
array (size=0)
    empty 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:56:45.767

可能的修复：

1.  `php.ini`正在阻止文件上传，请检查 post_max_size 和 upload_max_file_size。
2.  `tmp/`已满，或 tmp 权限阻止写入
3.  打开error_reporting，看看你是否得到了什么。

因为文件不是在 中通过`$_POST`，而是在`$_FILES`.

```
echo "Upload: " . $_FILES["file"]["name"];
echo "Type: " . $_FILES["file"]["type"];
echo "Size: " . ($_FILES["file"]["size"] / 1024);
echo "Stored in: " . $_FILES["file"]["tmp_name"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T12:02:17.887

除了我的评论，请检查您的 php.ini 以查看是否启用了文件上传和/或先尝试此操作：

# java - 从 Java 客户端 (Eclipse Paho) 到 mosquitto 代理的 SSL 连接：“unknown_ca”

> ID：12997559
> 
> 赞同：6
> 
> 时间：2012-10-21T11:51:48.887
> 
> 标签：java, ssl, mqtt

我们正在研究适用于 Android 的推送通知平台（Google 的 C2DM 的故障转移）我正在使用 Eclipse Paho Java 客户端连接到 mosquitto 代理（1.0.3）。代理安装在 Ubuntu 12.04（AWS EC2 实例）上，我使用非加密 TCP 连接成功地将客户端连接到服务器。顺便说一句，在调整内核参数后，我能够在中型 EC2 机器上为一个代理实例打开 10 万个并发客户端。干得好，蚊子！

现在我正在尝试使用 SSL 建立安全连接。我想使用客户端证书对客户端进行身份验证。我按照[蚊子tls页面](http://mosquitto.org/man/mosquitto-tls-7.html)中的说明为服务器和客户端生成了密钥和自签名证书。将服务器配置为使用 SSL。

对于客户端部分，我查看了 mosquitto_tls_set 的签名并注意到它需要 CA 证书、客户端密钥和证书文件。我认为CA证书用于客户端对服务器进行身份验证，而客户端密钥和证书用于服务器对客户端进行身份验证。我对吗？

所以我在这里是我在 Java 方面所做的：

1.  使用 bouncy castle 加载上述三个文件。
2.  将 CA 证书放入密钥库并使用它来创建 TrustManagerFactory。
3.  将客户端密钥和证书放在另一个密钥库中，并使用它来创建 KeyManagerFactory。
4.  创建了一个 SSLContext 并使用两个工厂对其进行了初始化。
5.  从 SSLContext 创建一个 SSLSocketFactory 并将其传递给 Paho 的 MqttConnectOptions

当我进行连接时，我从 mosquitto 收到以下错误

```
OpenSSL Error: error:140890B2:SSL routines:SSL3_GET_CLIENT_CERTIFICATE:no certificate returned
Socket read error on client (null), disconnecting. 
```

编辑：现在我在客户端看到以下异常

```
javax.net.ssl.SSLHandshakeException: Received fatal alert: unknown_ca 
```

这是完整的代码

```
static SSLSocketFactory getSocketFactory (final String caCrtFile, final String crtFile, final String keyFile, final String password) throws Exception
{ 
    Security.addProvider(new BouncyCastleProvider());

    PEMReader reader = new PEMReader(new InputStreamReader(new ByteArrayInputStream(Files.readAllBytes(Paths.get(caCrtFile)))));
    X509Certificate caCert = (X509Certificate)reader.readObject();
    reader.close();

    reader = new PEMReader(new InputStreamReader(new ByteArrayInputStream(Files.readAllBytes(Paths.get(crtFile)))));
    X509Certificate cert = (X509Certificate)reader.readObject();
    reader.close();

    reader = new PEMReader(
            new InputStreamReader(new ByteArrayInputStream(Files.readAllBytes(Paths.get(keyFile)))),
            new PasswordFinder() {
                public char[] getPassword() {
                    return password.toCharArray();
                }
            }
    );
    KeyPair key = (KeyPair)reader.readObject();
    reader.close();

    KeyStore caKs = KeyStore.getInstance("JKS");
    caKs.load(null, null);
    caKs.setCertificateEntry("ca-certificate", caCert);
    TrustManagerFactory tmf = TrustManagerFactory.getInstance("PKIX");
    tmf.init(caKs);

    KeyStore ks = KeyStore.getInstance("JKS");
    ks.load(null, null);
    ks.setCertificateEntry("certificate", cert);
    ks.setKeyEntry("private-key", key.getPrivate(), password.toCharArray(), new java.security.cert.Certificate[]{cert});
    //ks.setKeyEntry("public-key", key.getPublic(), password.toCharArray(), new java.security.cert.Certificate[]{cert});
    KeyManagerFactory kmf = KeyManagerFactory.getInstance("SunX509");
    kmf.init(ks, password.toCharArray());

    SSLContext context = SSLContext.getInstance("SSLv3");
    context.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);

    return context.getSocketFactory();
} 
```

蚊子.conf 看起来像这样

```
# general options
pid_file /home/ubuntu/mosquitto.pid

# persistence
queue_qos0_messages false
persistence false

# logging
log_dest stdout
connection_messages true
log_timestamp false

# default listener
# disable default listener (open only SSL listener)
#port 1883
#max_connections -1

# SSL listener
listener 1883
cafile /home/ubuntu/etc/ca.crt
certfile /home/ubuntu/etc/server.crt
keyfile /home/ubuntu/etc/server.key
require_certificate true
use_identity_as_username true
max_connections -1 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T16:37:53.660

好的，在 mosquitto 开发人员（谢谢，Roger Light）的一些支持下，我们找到了问题所在。您在生成证书时提供的详细信息（公司、组织单位、公用名）在 CA、客户端和服务器证书中必须不同。否则代码可以进行一些小的更改。为了清楚起见，我在这里重新发布了正确的代码和一些注释：

```
import java.io.*;
import java.nio.file.*;
import java.security.*;
import java.security.cert.*;
import java.security.interfaces.*;
import javax.net.ssl.*;

import org.bouncycastle.jce.provider.*;
import org.bouncycastle.openssl.*;

static SSLSocketFactory getSocketFactory (final String caCrtFile, final String crtFile, final String keyFile, final String password) throws Exception
{ 
    Security.addProvider(new BouncyCastleProvider());

    // load CA certificate
    PEMReader reader = new PEMReader(new InputStreamReader(new ByteArrayInputStream(Files.readAllBytes(Paths.get(caCrtFile)))));
    X509Certificate caCert = (X509Certificate)reader.readObject();
    reader.close();

    // load client certificate
    reader = new PEMReader(new InputStreamReader(new ByteArrayInputStream(Files.readAllBytes(Paths.get(crtFile)))));
    X509Certificate cert = (X509Certificate)reader.readObject();
    reader.close();

    // load client private key
    reader = new PEMReader(
            new InputStreamReader(new ByteArrayInputStream(Files.readAllBytes(Paths.get(keyFile)))),
            new PasswordFinder() {
                public char[] getPassword() {
                    return password.toCharArray();
                }
            }
    );
    KeyPair key = (KeyPair)reader.readObject();
    reader.close();

    // CA certificate is used to authenticate server
    KeyStore caKs = KeyStore.getInstance("JKS");
    caKs.load(null, null);
    caKs.setCertificateEntry("ca-certificate", caCert);
    TrustManagerFactory tmf = TrustManagerFactory.getInstance("PKIX");
    tmf.init(caKs);

    // client key and certificates are sent to server so it can authenticate us
    KeyStore ks = KeyStore.getInstance("JKS");
    ks.load(null, null);
    ks.setCertificateEntry("certificate", cert);
    ks.setKeyEntry("private-key", key.getPrivate(), password.toCharArray(), new java.security.cert.Certificate[]{cert});
    KeyManagerFactory kmf = KeyManagerFactory.getInstance("PKIX");
    kmf.init(ks, password.toCharArray());

    // finally, create SSL socket factory
    SSLContext context = SSLContext.getInstance("TLSv1");
    context.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);

    return context.getSocketFactory();
} 
```

# python - python tcp socket - 为什么 sendall 消息仅在 close() 之后发送

> ID：12997562
> 
> 赞同：2
> 
> 时间：2012-10-21T11:52:48.393
> 
> 标签：python, networking, tcp, blocking, recv

我正在尝试编写 perl TCP 服务器/python TCP 客户端，现在我有这样的代码：

```
import socket

sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server_address = ("127.0.0.1", 9000)
sock.connect(server_address)

try:
    message = unicode('Test')
    sock.sendall(message)
    data = sock.recv(1024)
    print data
finally:
    sock.close() 
```

而且我注意到，我的 TCP 服务器（用 perl 编写）不是在之后`sendall(message)`，而是在之后`close()`。服务器就像一个回显服务器一样工作，并在收到消息后向客户端发送数据。这会导致死锁，服务器永远不会收到消息，客户端永远不会收到响应。可能是什么问题？期间会发生什么`close()`，该消息到达服务器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:05:14.487

我会冒险猜测这是由于服务器的实现造成的。编写回显服务器的方法有很多种：

*   在循环（或异步回调）中接收字节，直到EOF **；**当字节被接收（每次循环迭代）时，在没有任何处理或缓冲的情况下回显它们；当找到 EOF（入站流已关闭）时，关闭出站流
*   一次读取*行*（假设它是一个文本协议），即寻找 CR / LF / EOF；找到一行时，返回该行 - 找到 EOF 时（关闭入站流），关闭出站流
*   读取*到 EOF*；然后返回所有内容并关闭出站流

如果回显服务器使用第一种方法，它已经按预期工作了——所以我们可以打折扣。

对于第二种方法，您发送的是文本但没有 CR / LF，并且您还没有关闭从客户端到服务器的流 (EOF)，因此服务器将永远不会回复此请求。所以是的，它会死锁。

如果是第三种方法，那么再次 - 除非您关闭出站流，*否则它将死锁*。

从您的回答来看，它看起来像是添加了`\n`“修复”它。由此，我得出结论，您的 echo-server 是基于行的。所以有两种解决方案，第三种适用于**任何**情况：

1.  使 echo-server 响应原始数据，而不是行
2.  添加行尾标记
3.  在客户端关闭出站流，即客户端到服务器的流（许多网络 API 允许您分别关闭出站和入站流）

另外：确保禁用 Nagle（通常称为 NO_DELAY） - 这将防止字节在客户端停留一段时间，等待组合成大小合适的数据包（这适用于 1 和 2，但不适用于 3；启用 Nagle 会添加*延迟*，但通常不会导致*死锁*）。

# tcl - 如何使用 tk/tcl 创建可调整大小的小部件

> ID：12997566
> 
> 赞同：4
> 
> 时间：2012-10-21T11:53:16.427
> 
> 标签：tcl, tk

我想让用户通过改变小部件之间边框的位置来改变布局的比例。几乎在每个现代 GUI 中：

![在此处输入图像描述](../Images/c3c6ef2b84f76aa7796dffde137ece41.png) （来自 Matlab 的示例）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T13:53:49.687

您可能想要的是一个窗格小部件

[http://www.tcl.tk/man/tcl8.5/TkCmd/ttk_panedwindow.htm](http://www.tcl.tk/man/tcl8.5/TkCmd/ttk_panedwindow.htm)

# c++ - 用于将二进制文件嵌入到 obj 文件中的命令行工具

> ID：12997569
> 
> 赞同：0
> 
> 时间：2012-10-21T11:53:46.263
> 
> 标签：c++, c, linker

> **可能重复：**
> [如何将二进制数据嵌入/链接到 C++ DLL](https://stackoverflow.com/questions/2740164/how-to-embed-link-binary-data-into-a-c-dll)

我需要一个命令行工具，它可以将我的二进制文件嵌入到一些（C 方式可链接的）.obj 文件中——这个二进制数据应该在一些给定的符号下，以便从 c 代码中访问它

有这样的工具吗？（我对 windows 平台、coff 和 omf 格式特别感兴趣）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:37:41.850

如果你使用 gcc。您可以使用链接器来执行此操作，例如：

```
ld -r -b binary -o foo.o foo.txt 
```

看看[这里](http://www.burtonini.com/blog/2007/07/13/embedding-binary-blobs-with-gcc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:42:16.967

如果仅 Windows 的解决方案就足够了，即不需要可移植性，您还可以使用二进制资源和“标准”资源编译器、工具和格式。

资源不必只是图标、光标、对话框等，也可以是任意数据。这是一个[例子](http://blog.kowalczyk.info/article/Embedding-binary-resources-on-Windows.html)。或者这个 stackoverflow[答案](https://stackoverflow.com/a/2740236/21567)。

我不知道你究竟想在这里实现什么，但如果你在 stackoverflow 或谷歌搜索“将二进制文件作为资源嵌入”，你会发现几个例子。

# python - Python：如何在 for 循环中调整 Image.resize？

> ID：12997572
> 
> 赞同：-1
> 
> 时间：2012-10-21T11:54:22.897
> 
> 标签：python, image, resize, pygtk

我正在尝试制作一个 for 循环，该循环通过具有 4 个值的列表运行： `16, 32, 64, 128`.

这些是脚本需要将图像调整为的四种尺寸。

这是我的完整代码：

```
def on_btn_resize_clicked(self, widget):
    if len(self.imgOriginal) > 0 and len(self.appRoot) > 0: #check if original-image and app-root is select
        _imgFilename = os.path.splitext(basename(self.imgOriginal))[0] #get filename
        _imgFileExtension = os.path.splitext(basename(self.imgOriginal))[1] # get filextension

        quickly_sizes = [16, 32, 64, 128] #define all sizes, resize to 16x16, 32x32, 64x64, 128x128
        for size in quickly_sizes:
            print size
            im=Image.open(self.imgOriginal)
            im = im.convert("RGB")
            im = im.resize((int(size), int(size)), Image.ANTIALIAS)
            im.save(self.appRoot+"/data/media/"+_imgFilename+str(size)+_imgFileExtension)

        widget.set_label("All four images is save!")
        from subprocess import call
        call(["nautilus", self.appRoot+"/data/media/"]) #open/show folder where all files is save 
```

循环正在运行，但它不会将图像保存在文件夹中。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:57:46.740

上面的代码有效:)

但是您需要先关闭 Nautilus/gnome-open，然后再打开它.. 然后显示所有图像。或者只是一个'ls'

```
from subprocess import call
call(["nautilus", self.appRoot+"/data/media/"]) 
```

# azure - 在 Azure WorkerRole 中创建存储帐户

> ID：12997573
> 
> 赞同：1
> 
> 时间：2012-10-21T11:54:39.323
> 
> 标签：azure, azure-storage, azure-worker-roles

是否可以为工作角色中的 azure 帐户创建新的存储帐户？也许使用 cmdlet？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:06:15.467

是的，当然可以这样做。您可以安装 Windows Azure PowerShell Cmdlet 并调用 New-AzureStorageAccount Cmdlet ( [http://msdn.microsoft.com/en-us/library/jj152813.aspx](http://msdn.microsoft.com/en-us/library/jj152813.aspx) ) 或围绕创建存储帐户服务管理 API ( [http: //msdn.microsoft.com/en-us/library/windowsazure/hh264518.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh264518.aspx)）。

# java - 如何在事务中使用 Spring、Hibernate、MySQL ISAM？

> ID：12997580
> 
> 赞同：0
> 
> 时间：2012-10-21T11:56:05.473
> 
> 标签：java, mysql, hibernate, spring-mvc, transactions

我在一个小型个人项目中使用 Hibernate 和 Spring。好吧，还是这个领域的新手，所以想提出一些关于交易的基本问题。

*   看来我必须声明事务管理器并将 DAO 类注释为 @Transactional(propagation = Propagation.REQUIRED, readOnly = false)。否则我会得到一些奇怪的异常，或者实体没有保存在数据库中。实际上是否必须使用事务？我不能在不使用它们的情况下将数据保存在数据库中（我认为 MySQL ISAM 表不支持事务），那么您将如何使用它们呢？

*   放置@Transactional 属性的最佳位置是什么？目前它在我的通用 HibernateDAO 超类中声明，可能是它可以达到的最深层次。我想那不是最好的地方。但是如果将它向上移动，我最终会将它放在 Spring MVC 控制器中，这可以说也是不合适的地方。到目前为止，还没有其他服务层，因为除了保存和提供数据库中的单词和定义之外，我什么都不做。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:03:04.990

是的，您总是需要使用事务来使用 Hibernate 访问数据库（甚至实际上没有）。我只是不会使用 MyISAM，因为正如您所说，它不是事务数据库引擎。

放置`@Transactional`注释的最佳位置是在服务层中的功能服务上。要么你引入一个真正的服务层，要么你认为 DAO 层实际上就是你的服务层。但是请注意，如果您的控制器必须使用 FooDAO 保存一个 foo，并使用 BarDAO 保存一个 bar，并且如果这两个插入应该以事务方式完成，那么您就有大问题了。这就是服务层如此重要的原因：它可以在单个事务中访问多个 DAO

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:03:39.387

> 实际上是否必须使用事务？

是的。关系数据库的基本特征之一是事务。然而`@Transactional`，使用默认参数简单就足够了。但是，您可以使用 AOP 在 XML 中声明事务，围绕整个类集，例如，所有类都具有`*DAO`名称。

> 放置@Transactional 属性的最佳位置是什么？

服务层，请参阅：[DAO 中使用 Spring MVC 和 Hibernate 的正确方法是什么，服务层架构](https://stackoverflow.com/questions/8993318)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T12:04:35.220

spring hibernate 事务管理器还负责为您管理休眠会话。如果您将 sessionFactory.getCurrentSession() api 与 spring hiberanteTransactionManager 一起使用，spring 将负责在事务开始时打开会话并在事务结束后关闭它。

这使您的代码更干净。您不必在代码中乱扔 openSession 和 closeSession。使用每个请求的会话方法而不是为每个休眠操作打开和关闭会话也是一个好主意。

正如您提到的那样，放置它的正确位置是在服务层 - 通过调用许多 DAO 方法来实现用例逻辑的类。如果您没有一个，则您正在从控制器执行多个 DAO 调用，或者您的 DAO 在需要时执行多个 db 操作。

如果你从一个控制器方法调用多个 DAO 方法，你应该把 @Transactional 放在控制器方法上。

如果您的 DAO 正在执行多个数据库操作，您应该将其放在 DAO 级别。

如果应用程序涉及非平凡的逻辑（超出基本 CRUD），最好在此级别创建服务层和管理器事务。

# dependency-injection - Zend Framework 2 中的应用程序范围变量？

> ID：12997583
> 
> 赞同：3
> 
> 时间：2012-10-21T11:57:05.973
> 
> 标签：dependency-injection, global-variables, zend-framework2, zend-locale

我想为所有应用程序（应用程序空间）存储一个可见的变量。我想要它，因为我需要从所有视图访问 $locale 变量来翻译我的多语言网络。

我知道在 ZF1 中有一个 ZEND_REGISTRY 类，但它已被删除。

我如何在 ZF2 中执行相同的功能？它是否为完成此功能提供 DI 类（依赖注入器）？

我还听过有关为具有依赖关系的类创建服务工厂以及使用 ServiceManager 管理所有依赖关系的任何内容。

我需要一个示例，因为我从未使用过 DI、工厂或 ServiceManager。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:54:53.857

对整个应用程序可见的变量并不比全局变量好，在这种情况下，您不需要使用它们。

ZF2 将[I18n](http://framework.zend.com/manual/2.0/en/modules/zend.i18n.translating.html)类作为核心类之一。

如果您下载并设置[框架应用程序](https://github.com/zendframework/ZendSkeletonApplication)，您会发现 ZF2 中的翻译示例已经启动并运行。

[这里](http://samminds.com/2012/09/zend-framework-2-translate-i18n-locale/)有一个很好的解释。

# javascript - 如何从另一个函数调用一个函数？

> ID：12997584
> 
> 赞同：0
> 
> 时间：2012-10-21T11:57:34.227
> 
> 标签：javascript

我有一个复杂的代码。这是它的示例。我不能改变结构。我怎么`e()`打电话`f()`？

```
a=function b()
    {
        var c,d;
        c=function()
        {
              function e()
              {
              ...
              }
              ...
        }
        d=function()
        {
              function f()
              {
              //i need e() here
              }
              ....
        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:01:05.703

您不能，因为它们是不同范围内的本地功能，并且彼此无法访问。如果您需要`e()`从 inside`f()`的范围内调用，则`e()`不应定义在`c()`' 范围内，而应定义在 ' 范围内`b()`，它将在`f()`' 范围内可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:00:50.477

你不能。这就是范围界定的全部意义所在。

但是，您可以`e`通过在函数外部声明该变量来使该变量对父作用域可用`c`。

```
a = function b() {
  var c, d, e;
  c = function () {
    e = function () {
      ...
    };
    ...
  };
  d = function () {
    function f() {
      e();
    }
    ...
  };
}; 
```

# requirejs - 使用带有杏仁的 grunt requirejs 会导致“未定义”

> ID：12997585
> 
> 赞同：8
> 
> 时间：2012-10-21T11:57:35.417
> 
> 标签：requirejs, amd, js-amd, r.js, almond

在我的`grunt.js`文件中，我有

```
requirejs: {
    dist: {
        options: {
            almond: true,
            wrap: true,
            modules: [{name: 'main'}],
            mainConfigFile: "src/js/main.js",
            baseUrl: "src/js",
            dir: "tmp/js",
            inlineText: true,
            preserveLicenseComments: false
        }
    }
} 
```

运行会用一些缩小`grunt requirejs:dist`的文件填充`tmp/js`目录 - 其中包括一个很大的 main.js 文件（一切似乎都按预期捆绑在这个文件中） - 但是当我想像这样包含这个文件时

```
<script type="text/javascript" src="tmp/main.js"></script> 
```

它导致一个`"Uncaught ReferenceError: define is not defined"`

使用杏仁背后的意图是我不需要加载`require.js`文件来加载我的优化文件 - 知道如何让它工作吗？

*脚注*：我已经设法这样做了，除了以前`main-built.js`编译过一个文件，但是这似乎不再是这种情况了（更新...... -.-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-16T00:04:50.380

所以我尝试使用以下文件和文件夹设置一个空目录

```
/grunt.js
/src/js/main.js
/tmp/js 
```

这是我的 grunt.js：

```
module.exports = function(grunt) {

    grunt.loadNpmTasks("grunt-requirejs");
    grunt.initConfig({
        requirejs: {
            dist: {
                options: {
                    almond: true,
                    wrap: true,
                    modules: [{name: 'main'}],
                    mainConfigFile: "src/js/main.js",
                    baseUrl: "src/js",
                    dir: "tmp/js",
                    inlineText: true,
                    preserveLicenseComments: false
                }
            }
        }
    });

    grunt.registerTask("default", "requirejs");
}; 
```

这是我的 main.js：

```
define(function() {
    console.log('hi');
}); 
```

我在控制台中运行了这些命令：

```
npm install grunt
npm install requirejs
npm install grunt-requirejs
grunt --gruntfile grunt.js 
```

咕噜输出：

```
Running "requirejs:dist" (requirejs) task
>> RequireJS optimizer finished
Uncompressed size: 14234 bytes.
Compressed size: 1265 bytes gzipped. (2633 bytes minified) 
```

/tmp/js/main.js 中的结果文件确实引用了 almond。它没有提到定义函数，因为 js 已经被最小化了。我的电话`define(`被重写为`n(`.

我怀疑您可能在调用定义的最小化文件之外有代码。

此外，在我的另一个项目中，我的 mainConfigFile 仅作为配置文件引用，而不是作为模块加载。

# sql - sql删除查询结果

> ID：12997586
> 
> 赞同：0
> 
> 时间：2012-10-21T11:57:43.473
> 
> 标签：sql, sql-server, sql-delete

我有两张表，相同的结构

*   `clients`包含第 1+2 行
*   `clients3`只有第 2 行

我想删除`clients`表中的第 2 行

```
 SELECT * 
 FROM clients 
 WHERE EXISTS (SELECT * FROM clients3 WHERE clients3.id = clients.id)) 
```

给了我第 2 行。但我不知道如何删除。

```
DELETE * 
FROM clients 
WHERE (SELECT * 
       FROM clients 
       WHERE EXISTS (SELECT * FROM clients3 WHERE clients3.id = clients.id)) 
```

不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:13:26.860

无需`clients`在查询中引用表两次并`*`从`DELETE`子句中删除 -

```
DELETE c1
FROM clients c1
INNER JOIN clients3 c3 ON c3.id = c1.id --INNER JOIN will work as EXISTS for 1-1 Relation 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T12:00:29.717

您需要为子查询创建临时表，

```
DELETE 
FROM clients 
WHERE ID IN 
(
    SELECT ID
    FROM
    (
        SELECT ID FROM clients WHERE EXISTS (SELECT * FROM clients3 WHERE clients3.id = clients.id)
    ) x
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-22T20:42:16.800

尝试这个

```
 Delete from clients where id  in(select clients3.id from clients3) 
```

# mysql - 我可以查询 MySQL 以以与发送到批量选择查询相同的方式返回结果吗？

> ID：12997588
> 
> 赞同：2
> 
> 时间：2012-10-21T11:59:00.300
> 
> 标签：mysql, sql-order-by

我有一个查询：

```
SELECT * FROM tbl WHERE var IN (v1, v2, v3, v4) LIMIT 1 
```

我希望按照我发送它们的顺序取回他找到的第一个匹配项。例如，如果表有一行 var=v2 和另一行 var=v4，他将返回 var=v2 的行。我知道我当然可以将查询分成许多子查询，但如果有不同的解决方案对此我很感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T12:02:35.707

尝试，

```
SELECT * 
FROM tbl 
WHERE var IN (v1, v2, v3, v4) 
Order By Field(var, v1, v2, v3, v4) 
LIMIT 1 
```

# android - Android计时器保存加载时间

> ID：12997594
> 
> 赞同：1
> 
> 时间：2012-10-21T11:59:55.393
> 
> 标签：android, chronometer

我的应用程序中有 Chronometer，它计算游戏经过的时间。我在退出时有保存功能。我需要从计时器中节省时间，并在加载游戏后显示相同的时间。

在保存功能中，我保存 chronometer.getBase() 值。在加载函数中，我在计时器上得到该值和 setBase()。但这不是正确的时间，似乎计时器在应用程序关闭时一直在滴答作响。

这该怎么做？看来 getBase 不适合我的目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:27:22.127

我找到了解决方案。

在保存函数中，我通过此方法存储值：

```
private long calculateElapsedTime(Chronometer mChronometer) {

        long stoppedMilliseconds = 0;

        String chronoText = mChronometer.getText().toString();
        String array[] = chronoText.split(":");
        if (array.length == 2) {
            stoppedMilliseconds = Integer.parseInt(array[0]) * 60 * 1000
                    + Integer.parseInt(array[1]) * 1000;
        } else if (array.length == 3) {
            stoppedMilliseconds = Integer.parseInt(array[0]) * 60 * 60 * 1000
                    + Integer.parseInt(array[1]) * 60 * 1000
                    + Integer.parseInt(array[2]) * 1000;
        }

        return stoppedMilliseconds;

    } 
```

在加载功能中，我像这样刷新计时器：

```
 ((GameActivity) activity).getcGameTime().setBase(
                SystemClock.elapsedRealtime() - gameElapsedTime(getcGameTime())); 
```

希望有一天这会对某人有所帮助。干杯!

# android - 谷歌反向图片搜索 API

> ID：12997597
> 
> 赞同：15
> 
> 时间：2012-10-21T11:59:59.840
> 
> 标签：android

是否有用于反向搜索的 API？如果不是，我如何从 android 应用程序发出反向图像搜索请求？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-03-22T15:08:54.987

我已经实现了“通过 HTTP 使用 Google 图片搜索反向搜索 JSON REST API”。

使用甚至在服务器上运行 javascript 的“httpunit”框架实际上非常简单。这是执行 Google 图片搜索请求所必需的

[https://images.google.com/searchbyimage?image_url=](https://images.google.com/searchbyimage?image_url=)

它工作得很好。我们已将其集成到一个应用程序中

*   只是简单地拍了一张照片，
*   缩小它，
*   上传到公共服务器，
*   使用这个网址
*   调用 REST API + 获取 JSON 响应（见下文）
*   显示文本和类似图像

服务器

*   使用 Internet-accessible-URL 访问 Google 图片服务器（通过 HTTP）
*   运行[https://images.google.com/searchbyimage?image_url=image](https://images.google.com/searchbyimage?image_url=image)编码的 url
*   获得响应，在服务器上运行来自 Google 的 javascript
*   搜索特定的 html 标记、类或 ID
*   创建 JSON 响应

您从 Google 获得

*   “标签/标题”，
*   包含所有元数据的相似图像（文本片段、html 片段、原始 URL、缩略图 URL、大小、尺寸……）

使用这些信息，您可以轻松地显示检测到的标签、类似的在线图像及其文本。

**但是：**不幸的是谷歌的机器检测非常好，找到了我的REST-API并关闭了它。

所以现在 - 谷歌没有为此宣布一个 API，即使它包含在现有的谷歌应用程序中 - 非常非常难过

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-25T02:23:09.530

您可能会发现以下项目很有用。它本质上是一个刮板服务器，您将图像的 url 发送到（例如使用 curl），它返回一个包含各种有用花絮的 json 数组。

[http://mrisa.mage.me.uk/](http://mrisa.mage.me.uk/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-21T12:14:12.620

反向图像搜索 api 已弃用： [https ://developers.google.com/image-search/?hl=it](https://developers.google.com/image-search/?hl=it)

新的搜索 api 可以进行图像搜索查询

[https://developers.google.com/custom-search/v1/overview?hl=it](https://developers.google.com/custom-search/v1/overview?hl=it)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-18T00:35:24.030

你可以试试这个名为[Camfind 的反向图像搜索 API](https://www.mashape.com/imagesearcher/camfind#!documentation)

下面是来自 Camfind API 的图像请求输入和图像响应输出的示例

### 图片请求

![替代文字](../Images/d15f7cd3d198f1fc2d000bfc59842522.png "图片请求")

### 图像响应

```
{
   "name": "crystal geyser bottle",
   "status": "completed"
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-20T15:35:50.097

Google 有一个很棒的 AP​​I，称为[Google Vision API - 网络检测](https://cloud.google.com/vision/docs/internet-detection)。它比自定义搜索更好。使用批处理请求反向搜索图像的示例 Kotlin 代码

```
val feat = Feature.newBuilder().setType(Type.WEB_DETECTION).build()!!
val settings = ImageAnnotatorSettings.newBuilder().setCredentialsProvider(provider.get()).build()
val req = images.stream()
            .map { Image.newBuilder().setSource(ImageSource.newBuilder().setImageUri(it)).build() }
            .map { AnnotateImageRequest.newBuilder().addFeatures(feat).setImage(it).build() }
            .toList()
val res = ImageAnnotatorClient.create(settings)
            .use { c -> req.chunked(GOOGLE_BATCH_LIMIT).map { c.batchAnnotateImages(it).responsesList }.flatten() }
            .map { it.webDetection.fullMatchingImagesCount } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-15T22:49:58.417

不幸的是，谷歌不提供反向图像搜索 API。我发现提供的唯一服务是 TinEye（请参阅[https://api.tineye.com](https://api.tineye.com)）。我听说他们的数据库中没有那么多图像，但它似乎适用于大多数用途。但它不是免费的，而且实际上它对于 API 来说很昂贵。目前，他们对每次搜索收取 0.04 美元。

# php - 从 AJAX 获取 JSON 以在 jqplot 中使用

> ID：12997599
> 
> 赞同：1
> 
> 时间：2012-10-21T12:00:11.433
> 
> 标签：php, jquery, ajax, charts, jqplot

我一直在尝试填充要在 jquery jqplot 插件/扩展中使用的数组。

据我所知，我的两个不同的 JSON 对象/数组在结构上是相同的，但只有“静态”对象/数组按预期工作。我在 stackoverflow 上看到过类似的问题，但没有一个对我有用。

我检查了 get_chart_votes 的源中是否返回了任何空格，但我找不到任何东西。使用最新的 CodeIgniter 框架、jQuery 和 jqplot。

使用静态 $arr 时，我可以提醒结果以获取 [Object object] 但是当尝试对 $charArray 执行相同操作时，我什么也得不到。

返回静态 $arr 时，它会打印此 json

```
{"test":1,"test2":2,"test3":3} 
```

使用 mysql 结果返回 $chartArray，它会打印这个 json

```
{"Yes":1,"No":2,"Maybe":6} 
```

我的 PHP 代码（注释掉了 $chartArray 回显）

```
function get_chart_votes()
{

    $arr = array('test' => 1, 'test2' => 2, 'test3' => 3);
    die(json_encode($arr));

    $chartArray = array();
    $post = $this->input->post();
    $id = $post['id'];

    $answers  = $this->get_answers($id)->result_array();
    $votes = $this->get_votes($id)->result_array();

    $count = 0;
    $answer = 1;
    foreach($answers[0] as $ans)
    {
        if($count > 1 && $ans != "")
        {
            $vote = $votes[$answer-1]['COUNT(vote)'];
            $chartArray[$ans] = intval($vote);
            $answer++;
        }
        $count++;
    }
    //echo(json_encode($chartArray));
} 
```

在客户端，我有这个。

```
var s1 = [];
var ticks = [];
$.getJSON(
"../votr/get_chart_votes",
{ id: "57"},
function(jsonData) 
{
    for (var key in jsonData) 
    {
      if (jsonData.hasOwnProperty(key)) 
      {
        s1.push(jsonData[key]);
        ticks.push(key);
      }
    }

    $.jqplot.config.enablePlugins = true;

    plot1 = $.jqplot('chart1', [s1], {
        // Only animate if we're not using excanvas (not in IE 7 or IE 8)..
        animate: !$.jqplot.use_excanvas,
        seriesDefaults:{
            renderer:$.jqplot.BarRenderer,
            pointLabels: { show: true }
        },
        axes: {
            xaxis: {
                renderer: $.jqplot.CategoryAxisRenderer,
                ticks: ticks
            }
        },
        highlighter: { show: true }
    });

    $('#chart1').bind('jqplotDataHighlight',
        function (ev, seriesIndex, pointIndex, data) {
            $('#info1').html(ticks[pointIndex] + " got " + s1[pointIndex]);
        }
    );

}
); 
```

# c++ - 在编译时在 size_t 和 container::size_type 之间进行选择

> ID：12997600
> 
> 赞同：2
> 
> 时间：2012-10-21T12:00:18.343
> 
> 标签：c++, c++11, visual-studio-2012, typetraits, size-type

我想在代码块中选择数据类型时更加迂腐，我需要在一般类型或容器类型之间进行选择。我的问题是，如果我有以下代码块，我不知道该怎么做。有人可以帮忙吗？~~`size_type`~~ `size_t``container::size_type`

```
template<typename some_container>
int func(some_container& input)
{
    //Some code...
    //...
    decltype(input.size()) variable_x; //Choose this if defined,
    size_t                 variable_x; //otherwise choose this
    //... Some more code...
} 
```

在这种情况下，`some_container`可能是*自定义容器*并且不提供`size()`功能。[导致我产生这种想法的原因是阅读size_t 与 container::size_type](https://stackoverflow.com/questions/918567/size-t-vs-containersize-type)`size_t`之间`container::size_type`的区别。我还阅读[了在编译时确定一个类型是否是 STL 容器](https://stackoverflow.com/questions/9407367/determine-if-a-type-is-an-stl-container-at-compile-time)，但这种方法对我的情况来说有点笨拙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T13:00:20.797

您使用的方法是正确`decltype`的，诀窍是使用 SFINAE，这很容易使用模板类或函数重载来完成。我将展示函数方式，因为它在 C++11 中非常简单：

```
// One helper per size_type source
template <typename T>
auto size_type_alt(T const& t) -> decltype(t.size());

auto size_type_alt(...) -> std::size_t;

// The switch between helpers
template <typename T>
auto size_type_switch() -> decltype(size_type_alt(std::declval<T>{}));

// And syntactic sugar
template <typename T>
using size_type = decltype(size_type_switch<T>()); 
```

用法：

```
template <typename T>
void some_algorithm(T const& t) {
    size_type<T> const size = 0;
    // ...
} 
```

*注意：开关和糖衣层可以混合在一起，但是我想你可能会喜欢单独看到这些步骤。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T12:31:47.830

以下是确定 a 是否`class`包含类型（例如`size_type`）的一种方法：

```
template <typename T> 
struct Has_size_type
{
  typedef char (&yes)[2];

  template <typename C> static yes test(typename C::size_type*);
  template <typename> static char test(...);

  static const bool value = sizeof(test<T>(0)) == sizeof(yes);
}; 
```

以下是在两种类型之间进行选择的方法：

```
template<bool> struct Bool;
template<typename T, typename = Bool<true> >
struct Set { typedef size_type type; };
template<typename T>
struct Set<T,Bool<Has_size_type<T>::value> > { typedef typename T::size_type type; }; 
```

**编辑开始**：这是另一种更简单的方法：

```
template<typename T>
struct void_ { typedef void type; };

template<typename T, typename = void>
struct Set 
{ typedef size_type type; };

template<typename T>
struct Set<T,typename void_<typename T::size_type>::type>
{ typedef typename T::size_type type; }; 
```

**编辑结束**。

所以最后，使用如下：

```
template<typename some_container>
int func(some_container& input)
{
  typedef typename Set<some_container>::type type;
} 
```

所以现在`type`是`size_type`or `some_container::size_type`，如果有的话。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T12:15:23.050

如果它没有 a`size_type`那么它不是一个容器。时期。

该标准要求所有容器都应定义一个名为`size_type`. 来自 N3337，23.2.1 通用容器要求 [container.requirements.general]：

> **表达式：** `X::size_type`
> **返回类型：**无符号整数类型
> **断言：** `size_type`可以表示任何非负值 `difference_type`
> **复杂度：**编译时间

所以你的代码可以简单地看起来像：

```
typename some_container::size_type variable_x; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T12:03:07.190

你可以而且你应该使用`typename some_container::size_type`它，即使是大多数 STL 编译器 typedef `size_type`，`size_t`但正如你所说，使用这种技术你可以支持自定义容器

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-29T14:11:56.773

以[@Matthieu M.](https://stackoverflow.com/users/147192/)的回答为起点，我使用 SFINAE 来确定 T::size_type 是否存在，而不是检查`size()`. 非常相似，只是避免了`auto`：

```
/** Fails if T::size_type isn't defined. */ 
template <class T>
typename T::size_type SizeType(const T &&t);

/** Fallback to a known size. */
template <class T>
std::size_t SizeType(const T &t);

...

using size_type = decltype(SizeType<T>(std::declval<T>())); 
```

就像 Matthieu 所做的一样，在这种情况下，方法的参数必须不同，以避免歧义。

# javascript - 实现 setTimeout 本机方法

> ID：12997602
> 
> 赞同：4
> 
> 时间：2012-10-21T12:00:41.240
> 
> 标签：javascript, internet-explorer, settimeout, setinterval, browser-extension

我正在 facebook 中开发浏览器扩展，现在我的问题是 facebook 覆盖了 setTimeout 和 setInterval 本机函数，它们的实现在 Internet Explorer 上不起作用。

有没有办法实现这些功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T12:34:16.307

您可以创建一个 iframe，然后访问它的`window`对象，获取新`setTimeout`定义并覆盖全局命名空间中的定义：

```
var f = document.createElement('iframe');
document.body.appendChild(f);
window.setTimeout = f.contentWindow.setTimeout;
document.body.removeChild(f); 
```

虽然这可行，但让 2 个脚本开始覆盖彼此的变量可能不是一个好主意。我建议您让 FB*控制该`setTimeout`函数*并使用它的新副本，但不要再次覆盖它（您可以将其存储在本地 var 或具有其他名称的全局变量中）。

# javascript - 关于发送ajax的另一种方式

> ID：12997606
> 
> 赞同：-1
> 
> 时间：2012-10-21T12:01:15.123
> 
> 标签：javascript, ajax

这是我的代码。

```
 function ajax() {
   var ajaxRequest;
   try {
     ajaxRequest = new XMLHttpRequest();
   }
   catch (e) {
     try {
       ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
     }
     catch (e) {
       try {
         ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
       }
       catch (e) {
         alert("Your browser broke!");
         return false;
       }
     }
   }

   return ajaxRequest;
 }

 var ajax = ajax();
 ajax.Message = function (method, l) {
   ajax.open(method, url, false);
   ajax.send();
   ajax.onreadystatechange = function () {
     if (ajax.readyState == 4 && ajax.status == 200) {}
   }
 } 
```

每次我想发送请求时，我都需要使用这个功能，但是当我在 Youtube 或 Twitter 中查看代码时，我发现它们不是这样工作的。

有没有发送 AJAX 的捷径？我的意思是只使用 JavaScript，而不使用 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:25:20.070

其他网站或多或少地使用您发布的内容或 jQuery，这或多或少是您在封面下发布的内容。

你想要上面的更短吗？

[http://anthologyoi.com/dev/short-ajax-script.html](http://anthologyoi.com/dev/short-ajax-script.html)

```
function a(l,d,u){try{r = new XMLHttpRequest();}catch(e){try {r = new ActiveXObject('Msxml2.XMLHTTP');}catch(e){r = new ActiveXObject('Microsoft.XMLHTTP');}} if(r){r.onreadystatechange = function() {if (r.readyState == 4 && r.status == 200){document.getElementById(u).innerHTML = r.responseText;}} r.open('GET', l+'?'+d, true);r.send(d);}} 
```

# javascript - 将带有json的img数组放入div

> ID：12997607
> 
> 赞同：1
> 
> 时间：2012-10-21T12:01:18.197
> 
> 标签：javascript, html

我有一个[链接](http://server06.amobee.com/aspx/nadav/test/json.html)，它返回类似于以下图像的数组。

```
{ "imageUrl":"http://server06.amobee.com/aspx/nadav/test/banner320x50.png",               
"expandedImageUrl":"http://server06.amobee.com/aspx/nadav/test/banner320x320.jpg" } 
```

我的目标是在 a 中显示第一张图片`<div>`，当它被点击时，它会变成第二张图片。

如何仅使用 HTML 和 JavaScript 来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T12:04:01.947

在纯 javascript 中，假设您已经有一个 div 声明为`<div id=divId></div>`：

```
var images = {
    "imageUrl":"http://server06.amobee.com/aspx/nadav/test/banner320x50.png",               
    "expandedImageUrl":"http://server06.amobee.com/aspx/nadav/test/banner320x320.jpg"
};
var div = document.getElementById('divId');
var img = document.createElement('img');
img.setAttribute('src', images.imageUrl);
div.appendChild(img);
img.onclick=function(){
   this.src=images.expandedImageUrl;
}; 
```

[示范](http://jsfiddle.net/NFyFC/)

* * *

如果你有一个与对象相似的`images`对象数组，你可以循环创建它们。由于“关闭效应”，它不像看起来那么简单，这就是我包含代码的原因：

```
var images = [
    { "imageUrl":"http://dystroy.org/re7210/img/crevettes-ail-courgettes-2-750.jpg",               
    "expandedImageUrl":"http://dystroy.org/re7210/img/crevettes-ail-courgettes-750.jpg"},
    { "imageUrl":"http://dystroy.org/re7210/img/cote-beuf-champis-02-850.jpg",               
    "expandedImageUrl":"http://dystroy.org/re7210/img/cote-beuf-champis-05-850.jpg"},
    { "imageUrl":"http://dystroy.org/re7210/img/onglet-truffes-850-02.jpg",               
    "expandedImageUrl":"http://dystroy.org/re7210/img/onglet-truffes-850-05.jpg"}
];
var div = document.getElementById('divId');
for (var i=0; i<images.length; i++) {
    var image =images[i];
    var img = document.createElement('img');
    img.setAttribute('src', image.imageUrl);
    div.appendChild(img);
    (function(expandedImageUrl){ // we embed the expanded URL in a closure to avoid having the value at end of loop used 
        img.onclick=function(){
           this.src=expandedImageUrl;
        };
    })(image.expandedImageUrl);
} 
```

​</p>

[示范](http://jsfiddle.net/qkaTz/)

* * *

**在评论中编辑以下问题：**

这是一个允许单击在两个图像之间切换的版本：

```
var images = [
    { "imageUrl":"http://dystroy.org/re7210/img/crevettes-ail-courgettes-2-750.jpg",               
    "expandedImageUrl":"http://dystroy.org/re7210/img/crevettes-ail-courgettes-750.jpg"},
    { "imageUrl":"http://dystroy.org/re7210/img/cote-beuf-champis-02-850.jpg",               
    "expandedImageUrl":"http://dystroy.org/re7210/img/cote-beuf-champis-05-850.jpg"},
    { "imageUrl":"http://dystroy.org/re7210/img/onglet-truffes-850-02.jpg",               
    "expandedImageUrl":"http://dystroy.org/re7210/img/onglet-truffes-850-05.jpg"}
];
var div = document.getElementById('divId');
for (var i=0; i<images.length; i++) {
    var image =images[i];
    var img = document.createElement('img');
    img.setAttribute('src', image.imageUrl);
    img.setAttribute('othersrc', image.expandedImageUrl);
    img.setAttribute('width', '600px');
    div.appendChild(img);
    img.onclick=function(){
       var src = this.getAttribute('src');
       this.src = this.getAttribute('othersrc');
       this.setAttribute('othersrc', src);
    };
} 
```

[示范](http://jsfiddle.net/ktZKn/)

# java - 更新 ADF 面中的 UI 组件

> ID：12997609
> 
> 赞同：0
> 
> 时间：2012-10-21T12:01:33.550
> 
> 标签：java, jakarta-ee, richfaces, oracle-adf

我有一个 ADF 表组件，它绑定到我们正在获得彻底 POJO 数据控制的列表。该表还绑定到 viewscope 中的托管 bean。我的要求是每当向数据库中添加新行时，我需要我的表自动更新。场景就像说我们有两个用户打开了两个浏览器。他们都看到同一张表。如果其中一个用户更新/添加一行，它应该立即在另一个浏览器中反映。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:52:21.050

这并不容易。正常的方法是使用 ADS 或活动数据服务，但这仅适用于 Oracle 数据库和 ADF 业务组件。没有可用于此的通用更新触发器。

您可以做的是自己轮询数据。在页面中，您使用 af:poll 组件，它是一个定期更新 pojo 数据的侦听器。然而，这不是一蹴而就的。

# java - 用于在 oracle 中调用过程的 Jdbc 实用程序

> ID：12997610
> 
> 赞同：2
> 
> 时间：2012-10-21T12:01:40.337
> 
> 标签：java, oracle, stored-procedures, jdbc, utilities

我在 oracle 包中有复杂的程序，具有复杂的输入/输出参数。我将在下面展示我的程序之一：

```
 PROCEDURE Authorize(PO_ErrorCode         OUT NUMBER,
                     PO_ErrorText         OUT VARCHAR2,
                     PI_Count             IN NUMBER,
                     PI_Setting           IN Setting,
                     PI_InputData         IN InputData,
                     PO_PreData           OUT InputData); 
```

并将显示两个结构`Setting`和`InputData`以下内容：

```
CREATE OR REPLACE TYPE Setting as object( ProviderType  NUMBER
                                          SwitchCode    NUMBER)

CREATE OR REPLACE TYPE Input_Data Is Table Of MainInputData;

CREATE OR REPLACE TYPE MainInputData as object( itemId            NUMBER,
                                                itemValue         NVARCHAR2(150),
                                                itemEncyptd       NUMBER,
                                                itemEncryptKey    RAW(16)); 
```

通过上面的描述，我有几个结构包含：`Type`，`Array`和。`Array of Type``Array of Primitive`

`jdbc`我通过oracle 驱动程序和相关类（例如`STRUCT`&）调用此函数，`ARRAY`但为此目标生成了许多复杂的代码。

我的问题是：是否有实用程序或框架可以通过简单的代码来完成这项任务？我知道`spring`有一个 jdbc 实用程序，但我没有使用它的经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:14:28.603

您可以使用弹簧实用程序。

有一个类，您可以在其中使用and`StoredProcedure`在构造函数中声明所有输入和输出参数及其类型。`sqlOutParameter``sqlInParameter`

在您的情况下，有 3 个输入参数，要传递它，您可以`execute` 使用 3 个参数覆盖方法并调用

`super.execute(a,b,c)`

这个[链接](https://stackoverflow.com/questions/3626061/how-to-call-oracle-stored-procedure-which-include-user-defined-type-in-java)会很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T15:56:41.853

我们有内部实用程序可以完全满足您的需求。它生成：

*   基于s 并使用特定注释`Oracle Object Type`扩展的JPA 实体。`eclipselink`
*   反映 PL/SQL 包的 Java 接口。

在运行时，eclipselink 将实体实例转换为`java.sql.Struct`实例，并且对生成的 java 接口的调用被我们的运行时拦截，它动态调用 PL/SQL 过程和函数。它还支持 IN/OUT 参数并允许将 PL/SQL 包公开为 Web 服务。它简化了我们拥有大量分层 Oracle 对象类型的开发。我希望它是公开的。如果您对该工具感兴趣，请与我联系。

为此，您还可以使用 Oracle 的[jpublisher](http://docs.oracle.com/cd/B13789_01/java.101/b10983/intro.htm)：

# c - 向我的程序添加双变量验证

> ID：12997611
> 
> 赞同：1
> 
> 时间：2012-10-21T12:01:56.203
> 
> 标签：c

我想在我的程序中添加双值验证。

例如：当用户输入字符串时，它会给出错误“请输入整数而不是字符串。”

我也想要“请输入一个整数而不是双精度值”。

我该如何应用这个？

```
/*
 * HW3-3.c
 *
 *  Created on: Oct 21, 2012
 *      Author: mert
 */

 #include <string.h>
 #include <stdio.h>

  void checkTriangle(char *s1,char *s2,char *s3)
  {
    int i;
    int found_letter = 0;
    int len = strlen(s1);
    int len2 = strlen(s2);
    int len3 = strlen(s3);

    for( i = 0; i < len; i++)
    {
        if(s1[i] < '0' || s1[i] > '9')
        {
            found_letter = 1; // this variable works as a boolean
            break;
        }
    }

    for( i = 0; i < len2; i++)
    {
        if(s2[i] < '0' || s2[i] > '9')
        {
            found_letter = 1; // this variable works as a boolean
            break;
        }
    }

    for( i = 0; i < len3; i++)
    {
        if(s3[i] < '0' || s3[i] > '9')
        {
            found_letter = 1; // this variable works as a boolean
            break;
        }
    }

    if(found_letter) // value 0 means false, any other value means true
        printf("Please enter an integer instead of string.");
    else
    {
            int side1 = atoi(s1);
            int side2 = atoi(s2);
            int side3 = atoi(s3);

            if ((side1 + side2 > side3 && side1 +  side3 > side2 && side2 + side3 > side1) && (side1 > 0 && side2 > 0 && side3 > 0))
                 {
                // Deciding type of triangle according to given input.
                  if (side1 == side2 && side2 == side3)
                      printf("EQUILATERAL TRIANGLE");
                  else if (side1 == side2 || side2 == side3 || side1 == side3)
                      printf("ISOSCELES TRIANGLE\n");
                  else
                      printf("SCALENE TRIANGLE \n");
                }
                 else
                     printf("\nTriangle could not be formed.");
    }
  }

  int main(void)
  {

      char s[32], s2[32], s3[32];

      printf("Please enter sides of triangle");
      printf("\nPlease enter side 1:");
      gets(s);
      printf("Please enter side 2:");
      gets(s2);
      printf("Please enter side 3:");
      gets(s3);

      checkTriangle(s,s2,s3);
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:38:18.600

您可以尝试解析输入并检查结果。另请注意，使用通用函数而不重复验证三次很方便：

```
/*
    Returns a positive integer if a positive integer was read from input.
    It will return -1 if the input is not a number,
    -2 if it was not an integer,
    -3 if it was not strictly positive.

    Bugs: "-0" is recognized as "not a number" instead of "not positive"
          "0185" is recognized as 185 instead of "not a (proper) number"
*/

int askValue(char *message)
{
    int val;
    char s[32];
    printf("%s: ", message);

    // Read string
    fgets(s, sizeof(s), stdin);

    // Trim string. fgets will return the \n.
    if (0 == strlen(s))
        return -1;
    s[strlen(s)-1] = 0x0;

    // Parse as an integer. 0 means it was either "0", or garbage
    if (0 == atoi(s))
    {
        if ('0' == s[0])
            val = 0; // It was a "0" (or maybe "0.17" or "0x18")
        else
            return -1; // Error: it was not a number
    }
    // Then parse as a float. "0.17" will give 0.17 which is not 0.00
    if ((double)val != atof(s))
    {
        // Error: the string checks as a floating point value
        return -2;
    }
    if (val <= 0)
        return -3;
    return val;
}

void complain(int val)
{
    switch(val)
    {
        case -3: printf("Value must be greater than 0\n"); break;
        case -2: printf("Value must be integer\n"); break;
        case -1: printf("Value must be a number\n"); break;
    }
}

int main()
{
    int side1, side2, side3; // We could use a vector: side[3]

    while ((side1 = askValue("Please enter side 1")) < 0)
        complain(side1);
    while ((side2 = askValue("Please enter side 2")) < 0)
        complain(side2);
    while ((side3 = askValue("Please enter side 3")) < 0)
        complain(side3);

    ...
} 
```

这是一个不同的实现，更严格。如果它是正整数，则返回整数值，如果是负整数则返回 -2，在所有其他情况下（垃圾和浮点数）返回 -1。

它仍然对“-0”有误报，解析为“0”。

```
int askValue(char *message)
{
    int val;
    char s[32], c[32];
    printf("%s: ", message);

    // Read string
    fgets(s, sizeof(s), stdin);

    // Parse as an integer. 0 means it was either "0", or garbage
    val = atoi(s);

    // Now produce the expected input for val, included final \n
    snprintf(c, sizeof(c), "%d\n", val);

    if (strcmp(c, s))
        return -1;
    if (val < 0)
        return -3;
    return val;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T12:20:09.707

在遍历每个字符时，您可以简单地检查是否有任何数字是`.`. 如果你找到一个，那么输入是双精度的。

```
 void checkTriangle(char *s1,char *s2,char *s3)
  {
    int i;
    int found_double = 0;
    int found_letter = 0;
    int len = strlen(s1);
    int len2 = strlen(s2);
    int len3 = strlen(s3);

    for( i = 0; i < len; i++)
    {
        if(s1[i] < '0' || s1[i] > '9')
        {
            found_letter = 1; // this variable works as a boolean
            break;
        } else if (s1[i] == '.') {
            found_double = 1;
            break;
        }
    }

    for( i = 0; i < len2; i++)
    {
        if(s2[i] < '0' || s2[i] > '9')
        {
            found_letter = 1; // this variable works as a boolean
            break;
        } else if (s2[i] == '.') {
            found_double = 1;
            break;
        }
    }

    for( i = 0; i < len3; i++)
    {
        if(s3[i] < '0' || s3[i] > '9')
        {
            found_letter = 1; // this variable works as a boolean
            break;
        } else if (s3[i] == '.') {
            found_double = 1;
            break;
        }
    }

    if(found_letter) // value 0 means false, any other value means true
        printf("Please enter an integer instead of string.");
    else if (found_double)
        printf("Enter an integer, not a double");
    else {
        // code stays the same
    } 
```

# sql - SQL 将两个表中多行的数据合并为一行

> ID：12997612
> 
> 赞同：3
> 
> 时间：2012-10-21T12:01:57.950
> 
> 标签：sql, sql-server

我有来自成员系统中两个表的数据，如下所示：

```
Table: listuser
userid  listid
===========
1       5
1       8
1       3
2       5
2       3
3       4
4       4
5       3
6       4

Table: list
id  name
==============
3   Members
4   Non Members
5   Subscribers
8   Test 
```

我想要达到的结果如下：

```
userid  lists
===================
1       Members, Subscribers, Test,
2       Members, Subscribers
3       Non Members,
4       Non Members,
5       Members,
6       Non Members, 
```

用户可以属于 0 到 n 个列表。我尝试了多种方法，但总是以多行用户标识结束，这是我试图消除的。我会很高兴得到一些帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:58:05.790

尝试这个。它会帮助你

```
SELECT DISTINCT lu2.userid,(
SELECT ISNULL(l1.name, '') + ', '
FROM dbo.listuser lu1 JOIN dbo.list l1 ON lu1.listid = l1.id
WHERE lu1.userid = lu2.userid 
FOR XML PATH('')) AS name
FROM dbo.listuser lu2
ORDER BY lu2.userid 
```

[SQL Fiddle](http://sqlfiddle.com/#!3/97a33/3)示例

# c# - 现有的非移动 MVC3 项目会从升级到 MVC4 中受益吗？

> ID：12997613
> 
> 赞同：1
> 
> 时间：2012-10-21T12:02:13.567
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我有两个项目都是*Asp.net MVC **3***，都不针对移动用户。
一个已经发布，另一个处于开发阶段。

我想将这两个项目升级到*Asp.net MVC **4***，所以我阅读了*Asp.net MVC 4*发行说明中的​​ ASP.NET [MVC 4 中的新功能](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253807)部分，似乎没有现有 Asp 的功能.net-MVC3 项目 cab 受益。

 *所有功能都与移动用户和增强模板相关。速度呢？缓存？bug修复？

那么我应该升级我的项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:43:27.163

这真的很简单。如果要使用 MVC4 中的功能，则需要升级到 MVC4。

如果你不这样做，那就不要。

有错误修复吗？是的。但是，如果您没有遭受 MVC3 中的错误之一，那么它不会影响您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T19:46:48.127

不要更新已发布的应用程序。

我们从 MVC1 到 MVC4 进行了更大的升级。我们预料到会出现一些问题，但这比我们预期的要困难得多。

您不是在询问从 MVC1 到 MVC4 的升级，但仍然是：我们遇到的问题只能在生产中检测到。Modelbinding 的默认值发生了变化，并且我们遇到了路由助手的性能问题。如果它是任务关键型应用程序，如果不需要，请不要升级。

对于正在开发的应用程序，我总是使用最新发布的 ASP.NET MVC 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T13:55:00.127

ASP.Net MVC 4 添加了以下（非移动相关）功能：

1.  ASP.NET Web API
2.  默认模板增强功能
3.  捆绑和缩小
4.  开源库（Json.net 和 DotNetOpenAuth）
5.  将配置逻辑分离到（AuthConfig.cs、BundleConfig.cs）等等。
6.  在项目的任何地方添加控制器。

这些信息来自我强烈推荐的[这](https://rads.stackoverflow.com/amzn/click/com/111834846X)本书。因此，总而言之，您可以从升级到 MVC4 中受益。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T16:28:29.167

“完成”是什么意思？如果您的意思是在这个项目中什么都*不会*改变，那就别管它了。然而，很可能某些事情最终会改变。IMO 升级（在这种情况下）的两个主要好处是

1.  剃刀 2
2.  捆绑和缩小（@ikaso 指出）

捆绑/缩小确实在发送到浏览器的有效负载中提供了性能增强，并有助于使过时的缓存 css/js 文件失效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-24T18:46:01.167

对于企业 Web 应用程序，我只看到升级到 MVC 4 的两个好处。

1.  捆绑和缩小带有内置支持以及集成自定义转换的能力，例如使用 less for css。

2.  改进了对 async/await 模型的支持，这使得编写控制器代码变得更加容易，这些代码更具可扩展性和更少的混乱（您也可以在 MVC 3 中进行异步控制器操作，但它们不那么直观或容易)

所以好处

1.  -> 删除管理 CSS 和 JS 所需的负载或手动步骤/集成构建命令
2.  -> 使构建可扩展的应用程序变得更加容易。

Ps 移动功能之一包括能够编写同一视图的不同版本，每个版本都针对特定的浏览器，例如“windows phone os”，但理论上这也可以用于针对不同的桌面浏览器，而且使构建移动友好型网站变得更加容易。*

# android - 将 android holo 主题中的默认蓝色更改为橙 色（或其他任何颜色）

> ID：12997619
> 
> 赞同：6
> 
> 时间：2012-10-21T12:02:56.807
> 
> 标签：android, styles, themes

我在我的应用程序中使用全息主题：

```
<style name="AppTheme" parent="android:Theme.Holo.Light.DarkActionBar" /> 
```

我想将默认的蓝色更改为橙​​色。我以为这很简单。但是，在谷歌搜索了一整天之后，我仍然没有适合我的解决方案。

（注意：这也应该适用于对话框。默认情况下，对话框标题和行是蓝色的。）

说如果默认是这样的：

![从蓝色](../Images/d3f71343add749197d8dc8400c68a7ac.png)

我想变成这样：

![到橙色](../Images/e13a39e63638d21a576301c966d14c2e.png)

请帮忙。提前致谢！

**编辑**

我忘了提到我在[http://jgilfelt.github.com/android-actionbarstylegenerator/](http://jgilfelt.github.com/android-actionbarstylegenerator/)上了解样式生成器， 这就是我从那里得到这些图像的地方。但我不想要所有这些，它有很多图像和其他东西，这会使应用程序变得更大。让我知道是否有办法调整默认主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:21:24.363

这不适用于更改属性，因为它与某些可绘制对象（某些 9patch png）有关。有一个非常好的网站可以根据您**想要的颜色**构建可绘制的小部件。

使用，简单直接，它会为您选择的小部件生成 PNG，以保持项目的大小。

这是： [http ://android-holo-colors.com/](http://android-holo-colors.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T06:26:12.730

根据您的要求使用以下库，我认为它对您有用

[寻呼机滑动标签条](http://github.com/astuetz/PagerSlidingTabStrip)

# c - 在单核处理器上创建线程

> ID：12997628
> 
> 赞同：0
> 
> 时间：2012-10-21T12:04:12.760
> 
> 标签：c, windows, multithreading, pthreads, multicore

我正在用 C 语言制作一个依赖于异步方法调用的应用程序。到目前为止，我尽最大努力使其跨平台，我目前正在实现如下所示的代码：

```
#ifdef TARGET_WINDOWS
//Windows threading API
#else
//pthreads API
#endif 
```

我很欣赏可能有更好的方法来做到这一点，但这不是我问题的重点。我的问题是，单核处理器上的程序会发生什么？线程是否仍会异步执行（可能是交错指令），还是我只在单核 CPU 上坚持单线程执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:16:21.977

归根结底，单个内核一次只能运行一个线程。线程调度程序将中断正在运行的线程并让另一个线程有机会运行指定的量程。

现在究竟发生什么取决于操作系统。但是如果你的所有工作都受 CPU 限制，也许是一些密集的计算，那么由于上下文切换的成本，整体性能实际上可能会随着线程的增加而降低。但是，例如，如果您正在等待 I/O，则操作系统可以在此期间安排另一个线程运行以利用 CPU。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:14:29.650

线程将同时执行，即使在单个内核上也是如此。这是因为抢占式调度，这意味着操作系统将暂停线程以让其他线程运行。

这适用于所有常见的桌面操作系统。但是，嵌入式/“实时”-操作系统可能会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T12:16:18.540

单核 CPU 上的每个线程依次从操作系统获得微小的时间片，这取决于一些因素，例如静态和动态优先级、它们正在运行的进程类型等。关键是，它们将并行运行（ ish）时尚（实际上同时）通过在单个 CPU 上交错执行。

# html - Textualizer效果html不起作用

> ID：12997629
> 
> 赞同：0
> 
> 时间：2012-10-21T12:04:28.307
> 
> 标签：html

无法使此 textualiser 效果发挥作用 - 出现空白屏幕。我已经从这个站点复制了它：http: [//vimeo.com/39150670](http://vimeo.com/39150670)。并尝试插入视觉工作室和记事本，但仍然没有运气！

```
<html>
<head>
<title></title>
<script src="http://code.jquery.com/jquery.min.js"></script>
<script src="http://kiro.me/textualizer/javascript/textualizer.min.js"></script>
<style type="text/css">
#txtlzr { font-size: 150px; width: 960px; height:250px; }
    </style>

</head>

<body>
    <div id="txtlzr"> </div> </body>
<script>
    $(function() { 
        var list = [ 'Text 1','Hello World','Screencasts'];
        var options = {
        duration: 1000,          // Time (ms) each blurb will remain on screen
        rearrangeDuration: 1000, // Time (ms) a character takes to reach its position
        effect: 'random',        // Animation effect the characters use to appear
        //centered: true           // Centers the text relative to its container
    }
       var txt = $('#txtlzr');
       txt.textualizer(list, options); // textualize it!
        txt.textualizer('start'); // start
       });

</script>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T12:26:34.840

加载插件的链接不起作用，因此请使用更新的链接，替换您的以下行：

```
<script src="http://kiro.me/textualizer/javascript/textualizer.min.js"></script> 
```

对于这个：

```
<script src="http://raw.github.com/krisk/textualizer/master/textualizer.min.js"></script> 
```

查看工作[**演示**](http://jsfiddle.net/kkFnf/)

# c# - 对象作为参数传递给另一个类，通过值还是引用？

> ID：12997635
> 
> 赞同：21
> 
> 时间：2012-10-21T12:04:49.293
> 
> 标签：c#, pass-by-reference

在 C# 中，我知道默认情况下，传递给函数的任何参数都是通过副本传递的，也就是说，在函数内部，存在参数的本地副本。但是，当一个对象作为参数传递给另一个类时呢？

像下面这样的场景是通过引用还是通过值传递：

```
class MyClass {
   private Object localObj;

   public void SetObject(Object obj) {
      localObj = obj;
   }
}

void Main() {
   Object someTestObj = new Object();
   someTestObj.name = "My Name";
   MyClass cls = New MyClass();
   cls.SetObject(someTesetObj);
} 
```

在这种情况下，类变量是否具有与驱动程序类中创建`localObj`的相同的副本？或者这两个变量是否指向不同的对象实例？`someTestObj``Main`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-21T20:08:01.673

“对象”永远不会在 C# 中传递——“对象”不是语言中的值。语言中唯一的类型是原始类型、结构类型等和*引用类型*。没有“对象类型”。

types `Object`,`MyClass`等是引用类型。它们的值是“引用”——指向对象的指针。对象只能通过引用进行操作——当你`new`对它们进行操作时，你会得到一个引用，`.`操作符对引用进行操作；等等。因为没有对象类型，所以无法获取其值“是”对象的变量。

所有类型，包括引用类型，都可以通过值或引用传递。如果参数具有类似`ref`or的关键字，则通过引用传递参数`out`。`SetObject`方法的参数`obj`（属于引用类型）没有这样的关键字，所以它是**按值传递的**——引用是按值传递的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-21T12:19:49.447

对象将通过引用传递，而与同一类或另一个类的方法无关。这是相同示例代码的修改版本，以帮助您理解。该值将更改为“xyz”。

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    public class Employee
    {
        public string Name { get; set; }
    }

    public class MyClass
    {
        public Employee EmpObj;

        public void SetObject(Employee obj)
        {
            EmpObj = obj;
        }
    }

    public class Program
    {
       static void Main(string[] args)
        {
            Employee someTestObj = new Employee();
            someTestObj.Name = "ABC";

            MyClass cls = new MyClass();
            cls.SetObject(someTestObj);

            Console.WriteLine("Changing Emp Name To xyz");
            someTestObj.Name = "xyz";

            Console.WriteLine("Accessing Assigned Emp Name");
            Console.WriteLine(cls.EmpObj.Name); 

           Console.ReadLine();
       }       
    }
 } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-16T20:22:37.873

我发现其他示例不清楚，因此我进行了自己的测试，确认类实例是通过引用传递的，因此对类执行的此类操作将影响源实例。

换句话说，我的 Increment 方法在每次调用时都会修改它的参数 myClass。

```
class Program
{
    static void Main(string[] args)
    {
        MyClass myClass = new MyClass();
        Console.WriteLine(myClass.Value);  // Displays 1
        Increment(myClass);
        Console.WriteLine(myClass.Value);  // Displays 2
        Increment(myClass);
        Console.WriteLine(myClass.Value);  // Displays 3           
        Increment(myClass);
        Console.WriteLine(myClass.Value);  // Displays 4
        Console.WriteLine("Hit Enter to exit.");
        Console.ReadLine();
    }

    public static void Increment(MyClass myClassRef)
    {
        myClassRef.Value++;
    }
}

public class MyClass
{
    public int Value {get;set;}
    public MyClass()
    {
        Value = 1;
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-21T12:09:30.757

假设`someTestObj`是 a`class`而不是 a `struct`，则对象是通过引用传递的，这意味着两者`obj`和都`someTestObj`引用同一个对象。例如，改变`name`一个会改变另一个。但是，与使用[`ref`关键字](http://msdn.microsoft.com/en-us/library/14akc2c7%28v=vs.110%29.aspx)传递它不同，设置`obj = somethingElse`不会改变`someTestObj`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-22T10:41:28.280

如果将 Object 作为值类型传递，则在方法内部对对象成员所做的更改也会在方法外部受到影响。但是如果对象本身被设置为另一个对象或重新初始化，那么它将不会反映在方法之外。所以我会说对象作为一个整体仅作为 Valuetype 传递，但对象成员仍然是引用类型。

```
private void button1_Click(object sender, EventArgs e)
{
    Class1 objc ;
    objc = new Class1();
    objc.empName = "name1";
    checkobj(objc);
    MessageBox.Show(objc.empName);  //propert value changed; but object itself did not change
}

private void checkobj (Class1 objc)
{
    objc.empName = "name 2";
    Class1 objD = new Class1();
    objD.empName ="name 3";
    objc = objD ;
    MessageBox.Show(objc.empName);  //name 3
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T13:00:14.493

如果需要复制对象请参考对象克隆，因为对象是通过引用传递的，顺便提一下对性能有好处，对象创建成本高。

这是参考的文章：[深度克隆对象](https://stackoverflow.com/questions/78536/cloning-objects-in-c-sharp)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-11T14:39:51.573

通常，“对象”是类的实例，它是在内存中创建的类的“图像”/“指纹”（通过 New 关键字）。
对象类型的变量指的是这个内存位置，也就是它本质上包含了内存中的地址。
因此，对象类型的参数将引用/“链接”传递给对象，而不是整个对象的副本。

# c++ - 我的第三方通话出现 C2758 错误

> ID：12997638
> 
> 赞同：0
> 
> 时间：2012-10-21T12:04:58.573
> 
> 标签：c++, class, constructor, default-constructor

我在“first.h”中声明了我的班级如下：

```
class MyClass
{
public:
    MyClass ( cv::Mat& _model ) : tmpM ( _model )
    {
    };
private:
cv::Mat& tmpM;
} 
```

然后在“first.cpp”中，我这样使用它：

```
MyClass::tmpM ( cv::Mat& _model )
{
    ...
} 
```

然后我将这个“first.h”包含在我的“second.h”中，并将这个“second.h”包含在我的“third.h”中，然后在我的“third.cpp”中我尝试这样做：

```
cv::Mat testMat ( height, width, CV_8UC3 );
tmpM myM ( testMat ); 
```

然后我收到错误消息：

> > 'MyClass::tmpM'：不是函数
> > 
> > 错误 C2512：“MyClass”：没有合适的默认构造函数可用
> > 
> > IntelliSense：声明与“cv::Mat& MyClass::tmpM”不兼容
> > 
> > IntelliSense：缺少显式类型（假定为“int”）

在你问之前，我不得不说我确实搜索并询问过这个问题，但仍然无法解决。我是一个学习者，所以有人可以帮助我解决这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:09:04.840

你得到的错误非常明确。

```
'MyClass::tmpM': not a function 
```

意味着这`tmpM`不是一个函数，它来自声明

```
MyClass::tmpM ( cv::Mat& _model ) {
    ...
} 
```

我认为您很困惑并想声明构造函数，在这种情况下您应该在头文件中编写（我添加了默认构造函数）

```
class MyClass {
public:
    MyClass ( cv::Mat& _model );
private:
    MyClass(); // Private default constructor
    cv::Mat& tmpM;
} 
```

然后在你的 cpp 文件中

```
MyClass::MyClass( cv::Mat& _model ) {
    // Do things
} 
```

这将解决您的第二条错误消息：

```
error C2512: 'MyClass': no appropriate default constructor available 
```

您的第三个文件也有问题，因为在行

```
tmpM myM ( testMat ); 
```

`tmpM`不是类型。我想你的意思是

```
MyClass myM( testMat ); 
```

这就是最后两个错误告诉你的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:08:39.693

您声明了这一点：

```
cv::Mat& tmpM; 
```

并因此重新声明：

```
MyClass::tmpM ( cv::Mat& _model ) 
```

首先，您声明对象。在第二个中，您声明了一个函数。

修复一个或另一个，以便它们匹配。

# php - CakePHP 无需操作即可创建表单

> ID：12997639
> 
> 赞同：1
> 
> 时间：2012-10-21T12:04:59.573
> 
> 标签：php, javascript, jquery, cakephp

我想创建一个没有任何动作的 CakePHP 表单。我想用 JavaScript 处理所有事情。如何在没有操作的情况下创建 CakePHP 表单？在 HTML 中，我会这样做：
`<form action="#">`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:20:19.363

`default = false`我通过添加到表单创建参数解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T12:11:04.767

您不能使用 e.preventDefault 阻止该操作或在您的 javascript/jquery 中返回 false 吗？

jQuery：

```
$('#yoursubmitbutton').submit(function(e){ e.preventDefault;}); 
```

我猜会做的伎俩..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T12:15:41.470

编辑：抱歉没有仔细阅读，preventDefault 应该可以解决问题:)

如果您想使用 JavaScript 或 jQuery 处理它，您可以直接跳过添加 html 表单标签。只需为表单的每个输入使用唯一的 ID，并使用 JS 或 jQuery 选择器从中获取值。例子：

```
<input type="text" id="textfield">
<input type="submit" id="submit">
<script type="text/javascript">

$('#submit').click(function() {
var textfieldInput = $('#textfield').val();

var postData = {
     'textfieldInput' : textfieldInput
}

$.ajax({
    type: "POST",
    url: "yourBackend.php",
    data: postData
 }).done(function( data ) {
   alert(data);
});
});
</script> 
```

# sml - 是否有内置函数来检查 SML 中的数字是否为整数

> ID：12997644
> 
> 赞同：0
> 
> 时间：2012-10-21T12:05:21.277
> 
> 标签：sml, smlnj

sml中是否有内置的整数函数？

我的意思是：

我必须从文件中读取一个数字，如果它是整数，则将其显示为输出，如果该数字不是整数，则引发异常。例如，我必须检查 (Int.fromString()) 的输出是否为整数，如果是则显示它...（重复上面）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:15:59.570

类型系统将确保给定函数的值的类型与函数的类型签名相匹配。

也就是说，如果您有一个将整数作为输入的函数，例如

```
fun double n = 2 * n
(* this function has type: int -> int *) 
```

那么`n`将永远是一个整数。除了整数之外，无法调用该函数；它会给出一个类型错误。

如果你有一个多态函数，比如

```
fun pair n = (n, n)
(* this function has type: 'a -> 'a * 'a *) 
```

然后您无法知道运行时输入的类型。所有类型的输入都将被同等对待。

但是，您始终可以通过在定义函数时明确类型来将多态函数限制为仅适用于给定类型：

```
fun pairInt (n : int) = (n, n)
(* this function has type: int -> int * int *) 
```

通过比较调用to和to得到的结果，您可以看到`pair`和之间的区别。`pairInt``pair 5``pairInt 5``pair "foo"``pairInt "foo"`

* * *

如果您有`int option`，就像您尝试将 an 转换`string`为`int`using一样`Int.fromString`，您可以通过多种方式提取`int`。对于如何做到这一点，我建议您参考问题“[在 smlnj 中，您如何将“字符串选项”转换为“字符串”？](https://stackoverflow.com/q/6268700/79061) ”。

# vba - VBA中的<>是什么运算符

> ID：12997645
> 
> 赞同：24
> 
> 时间：2012-10-21T12:05:22.537
> 
> 标签：vba, vba, operators

我正在研究一些[vba](/questions/tagged/vba "显示标记为“vba”的问题")代码并遇到了这个：

```
If DblBalance <> 0 Then 
```

我无法弄清楚这是什么运营商，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-21T12:06:20.837

它是“不等于”运算符，即`!=`几乎所有其他语言中的等价物。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-21T12:07:36.483

***不等于***

* * *

在 C 出现并普及之前`!=`，语言倾向于使用`<>`not *equal to*。

至少，Basic 的各种方言都做到了，而且它们早于 C。

一个更老、更不寻常的例子是 Fortran，它使用`.NE.`，如`X .NE. Y`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-21T12:43:35.237

正如其他人所说，这意味着不等于..

我只是想说我把它读作“大于或小于”。

例如

```
let x = 12

if x <> 0 then
    //code 
```

在这种情况下，“x”大于（即“>”符号）0。

希望这可以帮助。:D

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-21T12:09:03.313

它是一个“不等式”运算符。[获取 VBA 中的比较运算符列表](https://docs.microsoft.com/en-us/dotnet/visual-basic/language-reference/operators/comparison-operators)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-21T12:06:39.213

在 sql 中......我们将它用于“不等于”......我猜，它在 VB 中也是如此。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-19T06:24:29.063

在 VBA 中，这是`<> (Not equal to)`运算符。

如果结果为真`expression1 <> expression2`

如果结果为假`expression1 = expression2`

[附加阅读1](https://msdn.microsoft.com/en-us/library/215yacb6.aspx)

[补充阅读 2](https://msdn.microsoft.com/en-us/library/cey92b0t.aspx)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-07-07T19:48:23.970

这是一个不等式运算符。

此外，这可能对未来有所帮助：[按功能列出的运算符](https://msdn.microsoft.com/en-us/library/0ec5kw18.aspx)

# c# - 我怎样才能为 php 做 c# 字典但是。循环类

> ID：12997649
> 
> 赞同：2
> 
> 时间：2012-10-21T12:05:59.713
> 
> 标签：c#, php, class, dictionary, for-loop

我想将此 C# 代码转换为 PHP 代码。

```
class Members
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string Surname { get; set; }
}

class Process
{

    Dictionary<string, Members> MemberList = new Dictionary<string, Members>();
    public Process()
    {

        //GetMembersMethod();
        //Fill MemberList
        //example
        //MemberList.Add(userid,new Members{id=@id,name=@name,surname=@surname});
    }

    void WriteMembers() {
        foreach (string item in MemberList.Keys)
        {
            Console.WriteLine(MemberList[item].ID);
            Console.WriteLine(MemberList[item].Name);
            Console.WriteLine(MemberList[item].Surname);
        }
    }
} 
```

## 我如何在 PHP 中编写这个 c# 示例？如何使用带有 PHP 的数组类将循环编码为字典？

## 编辑..

我在 2 天前编写了这段代码；我想喜欢这个。。

```
<?php
class CKN
    {
        public $Name= 'ozan';
        public $Surname= 'ckn';
        public $ID = '12';
    }
    $class = new CKN();
    for($i=0; $i<10; $i++){
        $class_temp= new CKN();
        $class_temp->Name="ozan".$i;
        $class_temp->Surname="CKN".$i;  
        $class_temp->ID="CKN".$i;
        $arr[$i]=(object)$class_temp;
    }
    foreach($arr as $key => $value) {
        $temp=new (CKN)$value;
        foreach($temp as $k=>$v){
            print "$k=> $v <br>";
        }
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:18:26.587

您可以尝试使用[http://jsc.sourceforge.net/](http://jsc.sourceforge.net/)，它有助于将 .net 转换为 javascript、actionscript 或 php。

如果你想自己做：

1.  类的声明方式几乎相同
2.  字典可以松散地简化为 hashmaps，可以用 php "arrays" 代替
3.  用您想要的输出流替换控制台。
4.  删除类型化声明。所有变量都以 $ 开头。

我可能错过了一些东西，但这应该让你开始。祝你好运。

编辑：这是我认为可以满足您需要的代码。你可以[在这里](http://www.phpfiddle.org/main/code/ykx-uv1)测试它：

```
<?php
class CKN
{
    public $Name= 'ozan';
    public $Surname= 'ckn';
    public $ID = '12';
}
for($i=0; $i<10; $i++){
    $class_temp= new CKN();
    $class_temp->Name="ozan".$i;
    $class_temp->Surname="CKN".$i;  
    $class_temp->ID="CKN".$i;
    $arr[$i]=$class_temp;
}
foreach($arr as $key => $value) {
    foreach($value as $k=>$v){
        print "$k=> $v <br>";
    }
}
?> 
```

# mysql - 如何使用 MySQL 创建 MVC Database First 应用程序？

> ID：12997652
> 
> 赞同：2
> 
> 时间：2012-10-21T12:06:17.077
> 
> 标签：mysql, asp.net-mvc, asp.net-mvc-4, datasource, ef-database-first

我可以在 MVC 应用程序中使用 MS SQL，但现在我想用 MySQL（MVC 4、VS 2012、MySQL 5.5）创建 MVC Database First 应用程序。我可以在服务器资源管理器窗口中连接到 MySQL。当我创建新的**ADO.NET Entity Data Model**时，数据源列表中没有 MySQL。

![在此处输入图像描述](../Images/1c725c9f1cd6a53ceb8584702c887121.png)

如何使用 MySQL 创建我的第一个应用程序？

# ajax - 重定向到另一个页面 ajax 和 codeigniter

> ID：12997656
> 
> 赞同：2
> 
> 时间：2012-10-21T12:06:27.000
> 
> 标签：ajax, codeigniter

一旦用户注册表单成功后，谁能帮我提供简单的解决方案来重定向页面。

我的控制器代码：

```
public function signup()
{
$this->load->library('form_validation');
$this->form_validation->set_rules('user_name','Name','trim|required|min_length[4]xss_clean');
$this->form_validation->set_rules('signupemail','Email','trim|required|valid_email');
$this->form_validation->set_rules('password','Password','trim|required|min_length[8]xss_clean');
$this->form_validation->set_rules('confmpassword','Password Confirmation','trim|required|matches[password]');
$this->form_validation->set_rules('contactno','Contact No','trim|required');

if ($this->form_validation->run()) {

       // $this->welcome_model->InsertStudents();
        echo json_encode("Thank You, Successfully Completed");
        //$this->welcome();
    } else {

        $val = array(
            'name' => form_error('name'),
            'email' => form_error('email'),
            'password' => form_error('password'),
            'confirmpassword' => form_error('confmpassword'),
            'contactno' => form_error('contactno')
        );

echo json_encode(validation_errors());
    }
} 
```

阿贾克斯代码：

```
$(document).ready(function(){
    $('#message').hide();
            $('form').submit(function(){
                //alert('ok');     

                $.ajax({
                    url:this.action,
                    type:this.method,
                    data:$(this).serialize(),
                    success:function(data){
                         var obj = $.parseJSON(data);

                        $('#message').show();
                        if(obj['name']!=null)
                        {   

                            $('#message').text("");
                            $('#message').append(obj1);
                            $('#message').html(obj['name']);
                            $('#message').append(obj['email']);
                            $('#message').append(obj['password']);
                            $('#message').append(obj['confirmpassword']);
                            $('#message').append(obj['contactno']);
                        }
                        else
                        {   

                            $('#message').text("");
                            $('#message').html(obj);

                        }

                    },
                    erro:function(){
                        alert("Please Try Again");
                    }                        
                });
                return false;
            });                        
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T14:27:21.210

在你的某个地方添加这个`success: function()`：

```
window.location.href = '/page_to_redirect_to'; 
```

尝试这个：

```
<script type="text/javascript">
  $(document).ready(function()
  {
    $('#message').hide();
    $('form').submit(function()
    {
      $.ajax(
      {
        url:"<?php echo base_url();?>index.php/c_user/signup",
        type:"POST",
        data:$(this).serialize(),
        success:function(data)
        {
          var obj = $.parseJSON(data);

          $('#message').show();

          if(obj['name']!=null)
          {
            $('#message').text("");
            $('#message').append(obj1);
            $('#message').html(obj['name']);
            $('#message').append(obj['email']);
            $('#message').append(obj['password']);
            $('#message').append(obj['confirmpassword']);
            $('#message').append(obj['contactno']);
          }
          else
          {
            window.location.href = '/page_to_redirect_to';
          }
        },
        error:function()
        {
          alert("Please Try Again");
        }
      });
      return false;
    });
  });
</script> 
```

# c# - c#如何在课堂上制作周期性事件？

> ID：12997658
> 
> 赞同：4
> 
> 时间：2012-10-21T12:06:36.423
> 
> 标签：c#, multithreading, events

我想让一个类每秒更改它的一个属性。更改应该发生在类级别而不是主线程中，我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T12:12:24.943

您应该使用 System.Threading.Timer：

```
private System.Threading.Timer timer;

public YourClass()
{
    timer = new System.Threading.Timer(UpdateProperty, null, 1000, 1000);
}

private void UpdateProperty(object state)
{
    lock(this)
    {
        // Update property here.
    }
} 
```

请记住在读取属性时锁定实例，因为 UpdateProperty 在不同的线程（线程池线程）中调用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:13:30.833

如果您想在不同的线程上进行操作，请使用`BackgroundWorker`更改属性的逻辑并将其放入`DoWork`.

如果你想重复做某事，你应该只`loop`在 backgroundworker`DoWork()`方法中使用 a 而不是使用`Timer`class ，因为使用 with 似乎毫无意义`BackgroundWorker`。这是一些粗略的代码：

```
public Form1()
{
    InitializeComponent();

    BackgroundWorker worker = new BackgroundWorker();
    worker.WorkerSupportsCancellation = true;
    worker.DoWork += new DoWorkEventHandler(DoWork);
}

private void DoWork(object sender, DoWorkEventArgs e)
{
    BackgroundWorker worker = sender as BackgroundWorker;
    int delay = 1000; // 1 second
    while (!worker.CancellationPending)
    {
        do something
        Thread.Sleep(delay);
    }
    e.Cancel = true;
} 
```

每当您想停止属性更新时，都会`CancelAsync`像这样调用 on worker 实例 -

```
worker.CancelAsync(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-04T18:57:30.877

现在在.net 6 中非常简单。

```
using System;
using System. Threading;
using PeriodicTimer timer = new (TimeSpan.FromSeconds (1));|
 while (await timer.WaitForNextTickAsync ())
{
    //implement your code here
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-21T12:09:44.720

在表单中，最简单的方法是创建一个计时器。

```
public Form1()
{
    InitializeComponent();

    Timer timer = new Timer();
    timer.Interval = 1000;
    timer.Tick += new EventHandler(Tick);
}

private void Tick(object sender, EventArgs e)
{ ... } 
```

我的猜测是您甚至可以在表单之外使用 Timer，因为它是组件而不是控件。

# ios - UITableView 显示代码中的错误

> ID：12997660
> 
> 赞同：0
> 
> 时间：2012-10-21T12:06:38.577
> 
> 标签：ios

我正在从 URL 解析一些数据，并且能够正确检索数据。现在我想在自定义表格视图中显示该数据，但我无法将数据显示到表格中。这是我的代码

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
// Return the number of sections.
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
return [url count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

UILabel *LBtitle = [[UILabel alloc]initWithFrame:CGRectMake(60, 5, 250, 40)];
LBtitle.font = [UIFont boldSystemFontOfSize:13.0];
LBtitle.numberOfLines=2;
[LBtitle sizeToFit];

UILabel *LBurl = [[UILabel alloc]initWithFrame:CGRectMake(60, 45, 250, 20)];
LBurl.font = [UIFont systemFontOfSize:13.0];
LBurl.textColor = [UIColor blueColor];
LBurl.numberOfLines=1;
[LBurl sizeToFit];

UILabel *LBcontent = [[UILabel alloc]initWithFrame:CGRectMake(60, 65, 250, 60)];
LBcontent.font = [UIFont systemFontOfSize:13.0];
LBcontent.textColor = [UIColor grayColor];
LBcontent.numberOfLines=3;
[LBcontent sizeToFit];

LBtitle.text = [titleNoFormatting objectAtIndex:indexPath.row];
LBurl.text = [url objectAtIndex:indexPath.row];
LBcontent.text = [content objectAtIndex:indexPath.row];

[cell.contentView addSubview:LBtitle];
[cell.contentView addSubview:LBurl];
[cell.contentView addSubview:LBcontent];

cell.selectionStyle = UITableViewCellSelectionStyleNone;

//cell.textLabel.text = [titleNoFormatting objectAtIndex:indexPath.row];
//cell.detailTextLabel.text = [url objectAtIndex:indexPath.row];
// Configure the cell...

if (indexPath.row % 2 == 0) {
    cell.backgroundColor = [UIColor whiteColor];
}
else{
    cell.backgroundColor = [UIColor colorWithRed:231/255.0 green:227/255.0 blue:227/255.0 alpha:1.0];
}

return cell;
} 
```

如果我写`cell.textlabel.text = [titleNoFormatting objectAtIndex:indexPath.row];`比数据显示在表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T12:53:00.227

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        **//create label should put in this block**

        UILabel *LBtitle = [[UILabel alloc]initWithFrame:CGRectMake(60, 5, 250, 40)];
        LBtitle.font = [UIFont boldSystemFontOfSize:13.0];
        LBtitle.numberOfLines=2;
        LBtitle.tag = 1;

        UILabel *LBurl = [[UILabel alloc]initWithFrame:CGRectMake(60, 45, 250, 20)];
        LBurl.font = [UIFont systemFontOfSize:13.0];
        LBurl.textColor = [UIColor blueColor];
        LBurl.numberOfLines=1;
        LBurl.tag = 2;

        UILabel *LBcontent = [[UILabel alloc]initWithFrame:CGRectMake(60, 65, 250, 60)];
        LBcontent.font = [UIFont systemFontOfSize:13.0];
        LBcontent.textColor = [UIColor grayColor];
        LBcontent.numberOfLines=3;
        LBcontent.tag = 3;

        [cell.contentView addSubview:LBtitle];
        [cell.contentView addSubview:LBurl];
        [cell.contentView addSubview:LBcontent];

    }

    UILabel *LBtitle = (UILabel*)[cell.contentView viewWithTag:1];
    UILabel *LBurl = (UILabel*)[cell.contentView viewWithTag:2];
    UILabel *LBcontent = (UILabel*)[cell.contentView viewWithTag:3];

    LBtitle.text = @"test";
    LBurl.text = @"test";
    LBcontent.text = @"agassi";

    **sizeToFit should put here**
    [LBtitle sizeToFit];
    [LBurl sizeToFit];
    [LBcontent sizeToFit];

    cell.selectionStyle = UITableViewCellSelectionStyleBlue;

    //cell.textLabel.text = [titleNoFormatting objectAtIndex:indexPath.row];
    //cell.detailTextLabel.text = [url objectAtIndex:indexPath.row];
    // Configure the cell...

    if (indexPath.row % 2 == 0) {
        cell.backgroundColor = [UIColor whiteColor];
    }
    else{
        cell.backgroundColor = [UIColor colorWithRed:231/255.0 green:227/255.0 blue:227/255.0 alpha:1.0];
    }

    return cell;
} 
```

# java - 警告：[未选中] 作为原始类型 java.util.List 的成员对 add(E) 的未选中调用

> ID：12997666
> 
> 赞同：1
> 
> 时间：2012-10-21T12:07:46.890
> 
> 标签：java, jsf, ant, javac

我收到警告

```
warning: [unchecked] unchecked call to add(E) as a member of the 
raw type java.util.List
    [javac]      listbox.getChildren().add(listaMenu); 
```

where`listaMenu`被声明为

```
UISelectItems listaMenu = new UISelectItems(); 
```

并被`listbox`声明为

```
HtmlSelectOneListbox listbox = new HtmlSelectOneListbox(); 
```

使用 ant 构建任务进行编译时，如何消除此警告消息？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:10:33.430

要么获取您正在使用的 Faces API 实现的新版本（支持泛型的），要么就放在`@SuppressWarnings("unchecked")`函数开始之前（就在 where`public`或`private`would go 之前）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:16:44.783

如果 JSF API 强制使用未经检查的强制转换，请添加注释以抑制警告：

```
@SuppressWarnings(value = "unchecked") 
```

类似于此处给出的答案：[Java [unchecked] unchecked case warning](https://stackoverflow.com/questions/5631537/java-unchecked-unchecked-case-warning)

# visual-studio-lightswitch - LightSwitch 扩展错误 - 已分配 ID

> ID：12997668
> 
> 赞同：0
> 
> 时间：2012-10-21T12:08:13.207
> 
> 标签：visual-studio-lightswitch

我正在尝试为 Bing Map 创建一个 LightSwitch 扩展

遵循与 Light Switch Training Kit 中相同的步骤，但在 C# 中。安装了扩展。但是当我尝试将扩展添加到任何 LS 项目/应用程序时，我得到以下错误。

“由于以下原因，无法添加对此扩展的引用：无法加载扩展 'BingMapControl'。无法加载扩展 'BingMapControl'。Id 'BingMapControl：BingMap 已分配给另一个可编辑模型项。”

我怀疑 BingMapFactory 有问题： IControlFactory 或者它是一个完全不同的问题。

```
private const string ControlTemplate =
        "<DataTemplate" +
        " xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"" +
        " xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"" +
        " xmlns:ctl=\"clr-namespace:BingMapControl.Presentation.Controls;assembly=BingMapControl.Client\">" +
        "<ctl:BingMap Address=\"{Binding Details.Value}\" ApplicationKey=\"{Binding Properties[BingMapControl:BingMap/ApplicationKey]}\"/>" +
        "</DataTemplate>"; 
```

我重新启动了几次VS。

任何指针都会有所帮助。

谢谢，

# php - IE9 不允许使用 PHP 和内容类型 text/css 的动态样式

> ID：12997674
> 
> 赞同：3
> 
> 时间：2012-10-21T12:08:35.953
> 
> 标签：php, wordpress, header, internet-explorer-9, content-type

我的插件将动态 CSS 添加到首页：

```
function form_css() {
    header( 'Content-Type: text/css' );
    header( 'Expires: Thu, 31 Dec 2050 23:59:59 GMT' );
    header( 'Pragma: cache' );

    if ( false === ( $css = get_transient( 'mymail_form_css' ) ) ) {
        // generate CSS here
        set_transient( 'mymail_form_css', $css );
    }

    echo $css;
    die();
} 
```

添加两个动作钩子：

```
add_action('wp_ajax_my_css', 'form_css');
add_action('wp_ajax_nopriv_my_css', 'form_css'); 
```

并将样式排入队列：

```
wp_register_style('my-css', admin_url('admin-ajax.php?action=my_css'));
wp_enqueue_style('my-css'); 
```

这在除 IE9 之外的所有浏览器（包括 IE7+8）上都能完美运行。

我已经搜索了这个问题并找到了`X-Content-Type-Options: nosniff`标题，但添加`header( 'X-Content-Type-Options: nosniff' )`并不能解决问题。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T12:52:38.380

我猜你的css是一个php文件？style.css.php 之类的东西？

[http://blog.s9y.org/archives/227-IE9-has-trouble-with-CSS-Content-Types.html](http://blog.s9y.org/archives/227-IE9-has-trouble-with-CSS-Content-Types.html) - 也许这可以帮助你.....

mod_negotiate 基本上会正确执行 PHP 文件并返回有效的 CSS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:04:06.620

一个更简单的答案是强制 IE9 进入“兼容性视图”。

更多关于为什么在[http://blogs.msdn.com/b/ieinternals/archive/2011/03/27/http-406-not-acceptable-php-ie9-standards-mode-accepts-only-text_2f00_css-for -stylesheets.aspx](http://blogs.msdn.com/b/ieinternals/archive/2011/03/27/http-406-not-acceptable-php-ie9-standards-mode-accepts-only-text_2f00_css-for-stylesheets.aspx) - 但 tldr 是微软在他们接受的样式表方面更严格，以帮助提高安全性。

> Internet Explorer 9 用户可以通过将站点置于兼容性视图中来解决该站点的错误。在兼容性视图中，IE 恢复到其声称接受任何 MIME 类型的子下载请求的旧行为，并且服务器返回响应而不抱怨。

您可以使用更改模式

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9" > 
```

或者如果仍然失败，请转到 IE8

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" > 
```

或者

```
<meta http-equiv="X-UA-Compatible" content="IE=IE8" > 
```

把它放在 HTML 标题中 - 只会影响 IE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T08:40:23.043

我不知道这是否对某人有帮助。至少对我来说是这样：

WordPress 将 p 标签包裹在我的简码周围，因为我在表单（和简码）中使用块元素，所以我在块元素中使用了块元素 - 这是不允许的。

删除包围的 p 解决了这个问题。

编辑：使用[简码空段落修复](http://wordpress.org/extend/plugins/shortcode-empty-paragraph-fix/)删除 p

# objective-c - 在基于文档的应用程序中打开无标题文件

> ID：12997679
> 
> 赞同：1
> 
> 时间：2012-10-21T12:09:08.730
> 
> 标签：objective-c, cocoa, appkit, document-based

我希望我的应用程序每次启动时都打开新的无标题文档。它在 10.6 中工作，但现在我升级到 10.8，当我用`Command`+关闭窗口`W`然后重新启动应用程序时，它不会打开任何窗口。

无论以前如何退出，如何在每次应用程序启动时打开一个新窗口？

我试图`YES`在没有运气的情况`applicationShouldOpenUntitledFile:`下返回`applicationOpenUntitledFile:`应用程序委托。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T20:17:33.427

我不确定自 10.6 以来到底发生了什么变化，但问题是返回值`applicationOpenUntitledFile:`应该基于您手动打开新窗口是否成功。

在您的实施中，`applicationOpenUntitledFile:`您应该自己打开一个带有无标题文档的新窗口。这方面的文档在[`NSApplicationDelegate`](http://developer.apple.com/library/mac/#documentation/cocoa/reference/NSApplicationDelegate_Protocol/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-10-26T15:14:59.793

基于文档的应用程序无法打开新的无标题窗口的原因：

Appdelegate 方法返回 false

```
 func applicationShouldOpenUntitledFile(_ sender: NSApplication) -> Bool {
        return false 
  } 
```

其他原因可能是：未找到恢复窗口 + 其他窗口出现了一些代码 -> 不会创建新文档窗口。在这种情况下调用`NSDocumentController.shared.newDocument(self)`

# powershell - 从 WinRT 应用程序调用 PowerShell

> ID：12997685
> 
> 赞同：3
> 
> 时间：2012-10-21T12:10:16.067
> 
> 标签：powershell, windows-runtime

我想知道是否有办法从 WinRT 应用程序执行 PowerShell 脚本。具体来说，我想调用 Hyper-V cmdlet，例如 Get-VM，并在~~Metro~~新 Windows UI 中显示结果。

或者还有其他想法如何做到这一点？我在 Windows Store 上看到过 Hyper-V Manager 应用程序，有没有人碰巧知道这些人是怎么做到的？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:51:50.183

我很确定在代码中没有直接的方法可以做到这一点，即你不能托管 PowerShell 引擎。但是，如果您很勤奋，则可以使用 WinRT 套接字支持来连接到 PowerShell Web 访问端口或 PowerShell 远程处理端点。尽管后者可能需要一些繁重的工作才能弄清楚 WSMan 协议。

# python - 如何获取python调用者对象信息？

> ID：12997687
> 
> 赞同：4
> 
> 时间：2012-10-21T12:10:30.617
> 
> 标签：python, introspection

如何从函数中获取调用者对象，并检查有关该调用者的信息？

```
class A(object):
    def class_A_fun(self):
            print 'caller from class'  # → B
            print 'caller from method'  # → class_B_fun
            print 'caller module'  # → foomodule
            print 'caller instance'  # → obj
            print 'caller object file name or path'  # → 'foomodule.py'

class B(object):
    def class_B_fun(self):    
        obj = A()
        obj.class_A_fun()        

if __name__ == "__main__":
    obj = B()
    obj.class_B_fun() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-01T08:05:20.233

并非所有这些都是可能的，但大多数都可以通过检查调用堆栈来获得：

```
import sys
import inspect

__metaclass__ = type

class Lorem:
    def ipsum(self):
        caller_frame = sys._getframe(1)
        caller_frameinfo = inspect.getframeinfo(caller_frame)
        print("Caller is in module {module!r}".format(
                module=inspect.getmodule(caller_frame)))
        print("Caller is defined in {path!r}, line {lineno}".format(
                path=inspect.getsourcefile(caller_frame),
                lineno=caller_frameinfo.lineno))

class Dolor:
    def sit_amet(self):
        lorem = Lorem()
        lorem.ipsum() 
```

有关详细信息，请参阅[模块的](https://docs.python.org/3/library/inspect.html)[文档`inspect`](https://docs.python.org/3/library/inspect.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-16T08:44:13.747

```
from inspect import currentframe, getframeinfo, getmodulename

class A(object):
    def class_A_fun(self):
        cuurent_frame = currentframe()
        caller_frame = cuurent_frame.f_back
        filename, lineno, function, code_context, index = getframeinfo(caller_frame)

        # f_locals is the local namespace seen by the frame
        caller_instance = caller_frame.f_locals['self']
        print(f'caller instance: {caller_instance}')  # → obj
        print(f'caller from class: {type(caller_instance).__name__}')  # → B

        print(f'caller from method: {function}')  # → class_B_fun
        # alternatively:
        code = caller_frame.f_code
        assert function == code.co_name

        print(f'caller object file name or path: {filename}')  # → 'foomodule.py'
        # alternatively:
        assert filename == code.co_filename

        module_name = getmodulename(filename)
        print(f'caller module: {module_name}')  # → foomodule

class B(object):
    def class_B_fun(self):    
        obj = A()
        obj.class_A_fun()        

if __name__ == "__main__":
    obj = B()
    obj.class_B_fun() 
```

# active-directory - 任何 LDAP 库都可以从 Active Directory 同步密码吗？

> ID：12997689
> 
> 赞同：1
> 
> 时间：2012-10-21T12:11:01.173
> 
> 标签：active-directory, ldap

我想知道是否有人使用 LDAP 库从活动目录服务器获取用户和组，包括用户密码并将它们同步到数据库或另一个 LDAP 服务器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:21:31.927

不可以。Active Directory 需要在每个域控制器上安装密码过滤器才能检索条目的密码。

一些 IDM 同步产品提供了密码过滤器。-吉姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-19T13:11:39.913

微软活动目录的密码组件只能更改或验证密码。

但是有很多人有你的问题，他们是怎么做到的？

这通常通过使用“直通身份验证”来解决。例如，一个特定的脚本会在 openLdap 服务器和活动目录服务器之间同步组/用户，并且您使用 pass-trough 身份验证来使用活动目录身份验证对用户进行身份验证。

*   在 Openldap 中激活 SASL
*   并在 openldap 服务器中使用以下字符串作为用户密码`{SASL}username@Activedirectoryserver` openldap 服务器将知道它必须在活动目录服务器上验证密码...

在此处以完美的步骤进行解释： [https ://blogs.msdn.microsoft.com/alextch/2012/04/25/configuring-openldap-pass-through-authentication-to-active-directory/](https://blogs.msdn.microsoft.com/alextch/2012/04/25/configuring-openldap-pass-through-authentication-to-active-directory/)

解决了？

# xml - 从 XML 中选择节点，在其属性之一中包含特定字符串

> ID：12997691
> 
> 赞同：2
> 
> 时间：2012-10-21T12:11:06.763
> 
> 标签：xml, xpath

我试图选择在其属性之一中包含给定字符串的节点，但似乎我只能在某个属性上执行此操作。

```
var tempUsers = xmlDocument.selectNodes("//Users/*[contains(@Id,'TEXT')]"); 
```

我猜我可以写其他东西而不是@Id来检查节点的所有属性，而不仅仅是Id。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T12:46:20.880

您可以`@*`在 xpath 中使用来选择所有属性，但天真

```
//Users/*[contains(@*,'TEXT')] 
```

不会*做*你所期望的。该`contains`函数期望它的参数是字符串，所以如果你给它一个节点集，它会首先将节点集转换为字符串（通过获取集合中第*一个*节点的字符串值），然后在函数中使用该值. 相反，你需要说

```
//Users/*[@*[contains(.,'TEXT')]] 
```

它将查找`Users`文档中的所有元素，然后选择其所有具有其值包含 substring 的任何属性的子元素`TEXT`。

# wordpress - 发布后删除图像

> ID：12997698
> 
> 赞同：1
> 
> 时间：2012-10-21T12:12:00.850
> 
> 标签：wordpress

我的客户正在使用 WordPress 进行房地产列表。目前，她没有清理她的列表并且磁盘空间不足。什么 WordPress 配置可以让 WordPress 删除与已删除的页面/帖子关联的图片。就目前而言，我必须记下图片，然后进入媒体库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:35:48.313

你也可以把它放在一个独立的文件中，以便在已经删除的帖子之后“清理”

```
<?php 
/* Short and sweet */
define('WP_USE_THEMES', false);
require('./wp-blog-header.php');

$unattachedmediaargs = array(
'post_type' => 'attachment',
'numberposts' => -1,
'post_status' => null,
'post_parent' => 0
); 
$unattachedmedia = get_posts($unattachedmediaargs);
if ($unattachedmedia) {
foreach ($unattachedmedia as $unattached) {
    wp_delete_attachment( $unattached->ID, true );
            }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:46:34.407

这应该可以解决问题...

```
 function o99_delete_post_children($post_id) {
        global $wpdb;

        $child_atts = $wpdb->get_col("SELECT ID FROM {$wpdb->posts} WHERE post_parent = $post_id AND post_type = 'attachment'");

        foreach ( $child_atts as $id )
            wp_delete_attachment($id);
    }
    add_action('before_delete_post', ' o99_delete_post_children');
    add_action('trash_post', 'o99_delete_post_children') 
```

**免责声明**：从未尝试过，因此请先在非生产环境中测试 - 或**使用风险自负**...

**编辑我：**感谢@Dale Sattler 的评论

**编辑二：**添加`add_action('trash_post', 'o99_delete_post_children');`以支持管理员列表帖子中的“移至垃圾箱”操作（而不是一一删除）

# c# - directoryInfo.Name 同时显示不同的值

> ID：12997703
> 
> 赞同：0
> 
> 时间：2012-10-21T12:12:37.823
> 
> 标签：c#, io, directory

这是我的程序中的一个方法

```
public partial class Form1 : Form
{
    DirectoryInfo tempdirectory = new DirectoryInfo(@"\temp");
    const string DEFAULT_ADDRESS_TEXT = "<click load button to load a file>";

    private void Form1_Load(object sender, EventArgs e)
    {
        lblAddress.Text = DEFAULT_ADDRESS_TEXT;            
        if (Directory.Exists(tempdirectory.Name))
        {
            lblAddress.Text = tempdirectory.FullName;
            foreach (DirectoryInfo dir in tempdirectory.GetDirectories())
            {
                dir.Delete(true);
            }
            foreach (FileInfo file in tempdirectory.GetFiles())
            {
                file.Delete();
            }
        }
        Directory.CreateDirectory(tempdirectory.Name);
        lblAddress.Text = tempdirectory.Name;
    }
} 
```

程序运行位置( **PRL** )--> G:\Users\\Documents\Visual Studio 2010\Projects\Comics Project\ZipEntryDemo2\ZipEntryDemo2\bin\Debug

在程序的第一次运行中，在程序位置 (PRL\temp) 会创建一个名为 temp 的文件夹。关闭应用程序并再次运行后，第一步创建的临时目录不为空；而是 lblAddress 显示值 G:\temp ；实际上甚至不存在。

然后我明确地创建了一个文件夹 G:\temp 并在其中放置了一些额外的文件和文件夹，出于测试目的，程序现在从 G:\temp 中删除所有文件和文件夹，并且 PRL\temp 仍然与所有内容保持原样。

实际上，我的程序将临时文件夹的位置，即 PRL\temp 传递给一个方法，该方法在该文件夹中提取它的内容。在每次运行中，内容总是在 PRL\temp 中提取；但 G:\temp 的内容会丢失，前提是该文件夹存在。

还有一个特殊的事情是，当我在第一次运行时调试时，因为临时目录在 PRL 中不存在，如果条件语句不执行并且程序在正确的位置创建一个文件夹，即 PRL\temp。只是检查了文件和文件夹是否有错误的文件夹 G:\temp

到目前为止，我没有收到任何异常，例如文件夹已经存在或任何类型。

我还注意到，如果我将“\temp”更改为“temp”，现在所有事情都发生在正确的位置，即 PRL\temp；并且中间没有 G:\temp 。我的程序运行良好。但我觉得这很奇怪，如果有人能解释一下，我将不胜感激。谢谢，对不起，如果这是一个非常愚蠢的问题，这是我第一次接触 IO 的经历。

调用解压缩方法的方​​法是

```
 private void btnLoad_Click(object sender, EventArgs e)
    {
        OpenFileDialog f = new OpenFileDialog();
        f.Filter = "Zip Files(*.zip)|*.zip";
        f.Multiselect = false;
        if (f.ShowDialog() == DialogResult.OK)
        {
            unzip(f.FileName, tempdirectory.Name, 4096); 
        }
    } 
```

这里 tempDirectory.Name 被传递给 unzip 函数，它不会在该方法中被操纵。4096 是缓冲区大小，无关紧要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T12:18:38.823

`\temp`将使用当前目录的根目录（在本例中为 G：）。

您应该使用`Application.StartupPath()`来获取应用程序的路径。然后`Path.Combine(startupPath, tempPath)`您可以使用它来创建和加载`DirectoryInfo`.

还可以考虑使用计算机环境的实际临时文件夹：

~~字符串 tmpFolder = Environment.GetFolderPath(Environment.SpecialFolder.UserProfile);~~

对不起，应该是：

```
tmpFolder = System.IO.Path.GetTempPath; 
```

此外，要删除文件夹中的所有文件，您可以使用以下方法：

```
IO.Directory.Delete(tmpFolder, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:54:06.197

当您不指定完整路径名时，这些都是出错的事情。当您开始指定 plain 时`temp`，您得到了第一个“temp”目录，当您将其更改为`\temp`. 这仍然不是完整的路径名，因为它没有指定驱动器。

此代码也不太可能在您的开发机器以外的机器上存活，您不能在驱动器的根目录中任意创建目录。UAC 防止创建这样的目录和文件。你需要一个安装程序来创建这样的目录，只有它有足够的权限。

相反，Windows 程序应该使用 appdata 文件夹，您可以使用 Environment.GetFolderPath() 获取 appdata 目录的路径。如果这些文件夹和文件在本质上是真正的临时文件，换句话说，您只需要在整个过程中使用它们，或者在您再次启动时可以不使用它们，那么您应该使用 System.IO.Path.GetTempPath() 来获取用户临时目录的完整路径名。

# c - 中断从 fifo 通道读取的 while 循环

> ID：12997704
> 
> 赞同：1
> 
> 时间：2012-10-21T12:12:41.817
> 
> 标签：c, unix, while-loop, fifo

我必须在 UNIX 中模拟 C 程序中的 shell 行为，记住一件重要的事情：父进程接收所有命令并将它们发送给子进程。然后孩子执行收到的命令，然后将输出发送给父亲。这个想法是我从父母和我的主要孩子 fork() 收到命令，以便他自己的孩子可以执行命令并将输出发送到 fifo 管道。问题是我无法打破 while 循环（打印正确的输出）：

```
mkfifo("output",S_IFIFO|0644);
while(read(fifod2,&c,1))
      printf("%c",c); 
```

我意识到fifo的大小是可变的，但是第二个孩子在终止时必须发送一个EOF，所以当读取到达它时，返回0。但这似乎没有发生。如果需要，请向我索取更多代码部分。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T12:15:30.963

因为父进程用 来打开它的 fifo 末尾`O_RDWR`，所以始终有一个进程对 fifo 具有可写文件描述符。EOF 仅在 fifo 没有可写 fd 时发生，因此由于父进程保持这样的可写 fd 打开，它永远不会得到 EOF。

尝试`O_RDONLY`在父级中打开。

# drupal-7 - 我使用自定义 node_add() 表单收到图像字段上传错误

> ID：12997711
> 
> 赞同：0
> 
> 时间：2012-10-21T12:14:03.093
> 
> 标签：drupal-7, drupal-modules

我使用模块作为[链接在此处输入链接描述](https://github.com/Itangalo/Node-creation-block--Drupal-7-)

它工作正常，但如果节点表单有文件上传，这会影响错误：

警告：call_user_func_array() 期望参数 1 是有效的回调，函数 'node_form' 未找到或 drupal_retrieve_form() 中的函数名称无效（C:\xampp\htdocs\semt1\includes\form.inc 的第 800 行）。注意：未定义索引：comment_form_node_form_alter() 中的#node（C:\xampp\htdocs\semt1\modules\comment\comment.module 的第 1194 行）。注意：试图在 comment_form_node_form_alter() 中获取非对象的属性（C:\xampp\htdocs\semt1\modules\comment\comment.module 的第 1211 行）。注意：未定义的索引：location_node_form_node_form_alter() 中的#node（C:\xampp\htdocs\semt1\sites\all\modules\location\location_node.module 的第 14 行）。注意：试图在 location_node_form_node_form_alter() 中获取非对象的属性（C:\xampp\htdocs\semt1\sites\all\modules\location\location_node.module 的第 15 行）。注意：未定义的索引：menu_form_node_form_alter() 中的#node（C:\xampp\htdocs\semt1\modules\menu\menu.module 的第 629 行）。注意：试图在 menu_form_node_form_alter() 中获取非对象的属性（C:\xampp\htdocs\semt1\modules\menu\menu.module 的第 629 行）。注意：未定义索引：menu_form_node_form_alter() 中的#node（C:\xampp\htdocs\semt1\modules\menu\menu.module 的第 630 行）。注意：试图在 menu_form_node_form_alter() 中获取非对象的属性（C:\xampp\htdocs\semt1\modules\menu\menu.module 的第 630 行）。注意：未定义索引：translation_form_node_form_alter() 中的#node（C:\xampp\htdocs\semt1\modules\translation\translation.module 的第 135 行）。注意：试图在 translation_form_node_form_alter() 中获取非对象的属性（C:\xampp\htdocs\semt1\modules\translation\translation.module 的第 135 行）。注意：未定义的索引：file_ajax_upload() 中的 field_im（C:\xampp\htdocs\semt1\modules\file\file.module 的第 271 行）。注意：未定义的索引：file_ajax_upload() 中的#suffix（C:\xampp\htdocs\semt1\modules\file\file.module 的第 280 行）。

我如何解决它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T08:04:55.943

我通过使用解决它

```
function yourmodule_menu_alter(&$items) {$items['system/ajax']['file path'] =drupal_get_path('module', 'node');$items['system/ajax']['file'] = 'node.pages.inc';} 
```

# javascript - HTML5 websocket与nodejs的通信延迟

> ID：12997717
> 
> 赞同：1
> 
> 时间：2012-10-21T12:14:55.887
> 
> 标签：javascript, html, node.js, websocket

大家好，感谢您阅读本文。我在服务器端使用带有 WS 模块的 NodeJS，在客户端在 Firefox 中使用 HTML5 WebSocket API。操作系统是windows 7 64位。每当我建立从客户端到服务器的连接时，连接都会立即形成，但是当我发送一些数据时会有很大的延迟。有时消息似乎会立即到达服务器，有时它们会在几秒钟甚至几分钟后到达，而大多数时候它们根本无法到达服务器。我正在从客户端和服务器端附加代码。如果有人可以帮助我，我将非常感激。

客户端代码

```
<!doctype html>
<html>
    <head>
        <script>
            var ws = new WebSocket("ws://localhost:5225");
            ws.onopen = function (){
                alert("Sending");
                ws.send("SOME DATA !");
            }
        </script>
    </head>
    <body>
    </body>
</html> 
```

服务器端代码

```
var WebSocketServer = require('./ws').Server;
var wss = new WebSocketServer({port:5225});
var ws;

wss.on('connection',function (wsock){
    console.log("Connection Recieved");

    ws = wsock;

    ws.on('message',onnMessage);

    ws.on('close',onnClose);
});

function onnMessage(data){
        console.log("Data Recieved : "+data);
}

function onnClose(){
        console.log("Connection closed");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:52:26.610

[例子](https://gist.github.com/3782229)

我做了一个例子。它只处理文本，文本的大小限制为 64k。

基本上，ws 不是一个简单的套接字。您需要按照 ws 协议来解析服务器端的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:27:21.660

要访问处理程序中的`ws`对象，请`onopen`使用`this`引用，如下所示：

```
 ws.onopen = function (){
            alert("Sending");
            this.send("SOME DATA !");
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T12:38:49.370

我目前无法测试，但我认为问题是您的 websocket 变量（`ws`）超出了事件的范围，`.onopen()`或者在事件触发之前垃圾收集器正在释放该变量。要解决此问题，请将套接字创建为全局（或全局范围内的对象）：

```
<script>
    window.ws = new WebSocket("ws://localhost:5225");
    ws.onopen = function (){
        alert("Sending");
        ws.send("SOME DATA !");
    }
</script> 
```

# java - 将 Alfresco 与我的自定义前端集成

> ID：12997718
> 
> 赞同：0
> 
> 时间：2012-10-21T12:15:06.877
> 
> 标签：java, jquery, amazon-web-services, tomcat6, alfresco

我有一个使用 Amazon Web Services (AWS) 基础设施的网站。我自己用java编写了整个后端代码，并且也有一个前端。有人建议我使用 Alfresco 作为公共云后端，以减少开发工作并快速进入市场。Web 应用程序是 Java 语言，并使用带有 jQ​​uery 和 javascript 的 struts 作为前端组件。我有以下问题：

1.  Alfresco 本身有一个战争文件。我对这些东西有点新手，但我如何运行两次战争并将前端连接到 Tomcat 服务器中的 Alfresco？实际上，这两个应用程序之间有可能吗？

2.  如果我可以将前端与现有应用程序的后端完全分离，我如何将它与 Alfresco 集成？每个 struts Actions 的参数执行方法是否足以访问 Alfresco，还是我必须做其他事情？我知道 CMIS 和 REST api 调用，但不知道该选择哪个。它是否在有两个战争文件（Alfresco 和我的前端）作为 Tomcat 中的两个应用程序运行的环境中工作？

3.  我使用该网站来存储文件。我是否必须为文档保留现有的元数据表，或者 Alfresco 是否提供了一种这样的选项，没有带宽和 AWS 中的调用开销？

4.  社区版或企业版的 Alfresco SDK 是否与 Cloud API 相同？

我需要将我自己的前端集成到 Alfresco，因为它具有在 Alfresco 中没有的独特功能。在 Alfresco 中使用脚本功能对我来说不是一个选项。我更喜欢在 Stack Overflow 上问这些问题，因为我认为我可以得到比在 Alfresco 论坛上更好的答案。我很欣赏你的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:12:30.583

你能澄清你的意思吗

> 有人建议我使用 Alfresco 作为公共云后端

我不确定您的意思是要[在云端使用 Alfresco，](http://www.alfresco.com/products/cloud "云中的露天")还是要将 Alfresco 部署为您自己提供的基于云的服务的一部分。

云中的 Alfresco 提供了一个[开发人员 API](https://developer.alfresco.com/)，您应该会发现它对构建内容驱动的应用程序很有用。

或者，如果您想部署自己的 Alfresco 存储库实例，您会发现一组丰富的服务和 API 也可用于构建您自己的应用程序。有很多关于这个主题的书籍和教程以及活跃的论坛。

如果您想管理内容 + 元数据，那么 Alfresco 是一个不错的选择 - 它是专门为管理内容和元数据而编写的。您可以自己重现其中的一些功能，但 Alfresco 有一个复杂的类型系统，可以处理大文件，并且花费了大量时间来整理您在开发这些应用程序时会遇到的问题。

专门解决您编号的问题...

1.  alfresco.war 是存储库应用程序。如果您从单独的 war 文件运行自己的前端应用程序，那么它仍然可以通过 REST API 和 CMIS 与 Alfresco 存储库通信。

2.  请澄清您有关 Struts 操作的问题。关于 CMIS 和 REST，请参见 (1) 的答案。

3.  建议您将元数据存储在 Alfresco 或您自己的存储机制中 - 如果您不使用自己的元数据机制，我认为运行 Alfresco 没有多大意义。

4.  Alfresco SDK 用于针对您自己部署的 Alfresco 实例进行构建，而 Cloud API 用于在云“软件即服务”模型中针对 Alfresco 构建应用程序。

# uilabel - 自定义 UILabel 及其描边

> ID：12997721
> 
> 赞同：2
> 
> 时间：2012-10-21T12:15:25.817
> 
> 标签：uilabel, stroke

我正在使用带有此 drawRect 方法的自定义 UILabel 类：

```
- (void)drawTextInRect:(CGRect)rect
{
CGContextRef c = UIGraphicsGetCurrentContext();
CGContextSetLineWidth(c, self.outlineSize);

CGContextSetTextDrawingMode(c, kCGTextStroke);
self.textColor = strokeColor;
[super drawTextInRect:rect];

CGContextSetTextDrawingMode(c, kCGTextFill);
self.textColor = fillColor;
self.shadowOffset = CGSizeMake(0, 0);
[super drawTextInRect:rect];
} 
```

但是我有一个问题，当我通过pickerview更改strokeColor（myText.strokeColor = [self colorWithHex：0xe55f00]）时，它可以正常工作，因为它会改变标签笔划的颜色。
相反，当我编辑 fillColor 时，它会同时改变填充和描边的颜色！(myText.fillColor = [self colorWithHex:0x000000])

我究竟做错了什么？？

# c++ - 如何声明自引用模板类型

> ID：12997730
> 
> 赞同：5
> 
> 时间：2012-10-21T12:16:47.483
> 
> 标签：c++, templates

我的情况就像这个人为的例子：

```
template<class TFeature> struct Controller {};

template<class TController,typename T> struct Feature {
  typedef Feature<TController,T> FeatureType;
};

typedef Controller<Feature::FeatureType,int> DefaultController; 
```

控制器被模板化以接受功能，我的问题是某些功能需要控制器的类型作为模板参数。这使得示例最后一行的 typedef 无法编译。

这是可能的还是我需要重新考虑设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:53:38.480

为了做到这一点，你应该做一些元编程魔法（相信我这不是一件容易的事）。但是，如果您真的很喜欢它并且使用`boost`是您可以选择的选项，那么`boost::mpl`您可以查看以下内容：

```
template< class ControlerT >
struct FeatureEx {
    typedef ControlerT controler_type;
};
template< class FeatureT >
struct ControlerEx {
    typedef ControlerEx<FeatureT> this_type;
    typedef typename boost::mpl::apply<
        FeatureT, boost::mpl::identity<this_type>
    >::type feature_type;

    feature_type const& get_feature() const {return f_;}

private:
    feature_type f_;
};

typedef ControlerEx<FeatureEx<boost::mpl::placeholders::_1> > DefaultControler; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:25:20.297

您将两个模板参数传递给`Controller`类，但您已声明它只接受一个。你需要类似下面的东西吗？

```
typedef Controller<Feature<Controller<int>,int>::FeatureType> DefaultController; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T12:20:57.390

一种选择是使用虚拟子类而不是 typedef：

```
struct DefaultController : public Controller<Feature<DefaultController,int>::FeatureType> {}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T12:27:24.290

似乎您正在尝试将 2 个参数传递给控制器​​模板，而它只能接受一个。

# monogame - 手机开发和 XNA/OpenGL：减少电池消耗

> ID：12997733
> 
> 赞同：1
> 
> 时间：2012-10-21T12:17:01.877
> 
> 标签：monogame

我正在开发一个 wp7 xna 应用程序。由于该应用程序不是真正的游戏（但需要使用 XNA**），因此屏幕不会经常变化（菜单、按钮等），主要是仅在触摸某些东西时才发生变化。因此，仅在某些情况下不需要以 30fps 或更高的速度不断重绘。

这篇文章展示了如何 在 XNA 游戏中[控制 Draw() 频率。](https://stackoverflow.com/questions/4054936/manual-control-over-when-to-redraw-the-screen/4057180#4057180)

将帧速率降低一半时，电池消耗会受到多大影响？（**我还将使用 Monogame+ MonoDroid/MonoTouch 将应用程序转换为 Android/iOS（所以我认为届时将使用 OpenGL）。

有什么想法/经验吗？

# java - 从进程名称中获取进程 ID

> ID：12997734
> 
> 赞同：0
> 
> 时间：2012-10-21T12:18:17.030
> 
> 标签：java, windows, scala, jna, pid

我正在使用 Scala，但找不到可以从 Processname 中获得 PrcoessID 的东西。在 Java、Scala 或 Winapi 中都没有。

目前我正在使用`FindWindowA`and `GetWindowThreadProcessId`，但我更喜欢能给我一个数组的东西

```
val process: Array[Int] = GetProcessIdFromExeName("Notepad") 
```

因此，如果我有 10 个记事本实例，我可以使用`process(0-9)`

我知道 .NET 中存在类似的东西，但在 WINAPI 或 Java/Scala 中是否有类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:50:51.643

最简单的方法是运行 `tasklist`并解析输出。请参阅此资源以供参考：

[https://stackoverflow.com/questions/53489/how-do-you-list-all-processes-on-the-command-line-in-windows](https://stackoverflow.com/questions/53489/how-do-you-list-all-processes-on-the-command-line-in-windows)

您也可以使用 WMI。编写执行 WMI 查询并打印输出的 JScript 或 VBScript 非常简单，因此您可以从 java 或 Scala 进程运行它并解析输出。WMI 提供了比`tasklist`.

如果您选择 WMI，您也可以使用现有的 java-to-com 库之一来调用它，例如 JaWin、Jintegra、JInterop。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-26T04:27:34.210

老问题；但是，我不久前写了这个类来做到这一点：

```
 public class TaskList {
    public static final String PROCESS_NAME = "tasklist";
    private static final String LINE_FORMAT = "%-25s %14s %-16s %14s %15s\n";

    public static Process getTaskListProcess() throws IOException {
        return Runtime.getRuntime().exec(PROCESS_NAME);
    }

    List<TaskListEntry> taskListEntries;
    boolean hasRun;

    public TaskList() {
        taskListEntries = new ArrayList<>();
    }

    public void run() {
        if (hasRun) {
            // intentions of running this twice is not clear so throw exception
            String err = "TaskList can only be run once";
            throw new IllegalStateException(err);
        }

        try {
            Process proc = getProcess();
            List<String> lines = Processes.getAllLines(proc);

            String[] seperators = lines.get(2).split(" ");
            if (seperators.length < 5) {
                throw new IllegalStateException("Incorrect number of seperators parsed");
            }

            // Remove header and separators
            lines = lines.subList(4, lines.size() - 1);

            for (String line : lines) {
                taskListEntries.add(new TaskListEntry(seperators, line));
            }
        } catch (IOException e) {
            String err = "Error resolving process";
            throw new IllegalStateException(err, e);
        }
    }

    Process getProcess() throws IOException {
        return getTaskListProcess();
    }

    public List<TaskListEntry> getTaskListEntries() {
        return Collections.unmodifiableList(taskListEntries);
    }

    @Override
    public String toString() {
        String sep = "============================";
        String headers = String.format(LINE_FORMAT, "Image Name", "PID", "Session Name", "Session#", "Mem Usage");
        StringBuilder builder = new StringBuilder(headers);
        builder.append(sep).append(" ")
            .append(sep.substring(17)).append(" ")
            .append(sep.substring(9)).append(" ")
            .append(sep.substring(17)).append(" ")
            .append(sep.substring(13)).append('\n');

        for(TaskListEntry entry : getTaskListEntries()) {
            builder.append(entry.toString());
        }
        return builder.toString();
    }

    public class TaskListEntry {
        private TaskListEntry(String[] seperators, String line) {
            try {
                int start = 0;
                int end = start + seperators[0].length() + 1;
                this.image = line.substring(start, end).trim();

                start = end;
                end = start + seperators[1].length() + 1;
                this.pid = Integer.parseInt(line.substring(start, end).trim());

                start = end;
                end = start + seperators[2].length() + 1;
                this.sessionName = line.substring(start, end).trim();

                start = end;
                end = start + seperators[3].length() + 1;
                this.sessionNum = Integer.parseInt(line.substring(start, end).trim());

                start = end;
                end = start + seperators[4].length();
                this.memUsage = line.substring(start, end).trim();
            } catch (NullPointerException e) {
                throw e;
            } catch (RuntimeException e) {
                String format = "Unable to parse line {%s} with seperator {%s}";
                String msg = String.format(format, line, Arrays.toString(seperators));
                throw new IllegalArgumentException(msg, e);
            }

        }

        String image;
        int pid;
        String sessionName;
        int sessionNum;
        String memUsage;

        @Override
        public String toString() {
            return String.format(LINE_FORMAT, image, pid, sessionName, sessionNum, memUsage);
        }

        public String getImage() {
            return image;
        }

        public void setImage(String image) {
            this.image = image;
        }

        public int getPid() {
            return pid;
        }

        public void setPid(int pid) {
            this.pid = pid;
        }

        public String getSessionName() {
            return sessionName;
        }

        public void setSessionName(String sessionName) {
            this.sessionName = sessionName;
        }

        public int getSessionNum() {
            return sessionNum;
        }

        public void setSessionNum(int sessionNum) {
            this.sessionNum = sessionNum;
        }

        public String getMemUsage() {
            return memUsage;
        }

        public void setMemUsage(String memUsage) {
            this.memUsage = memUsage;
        }
    }

 public static void main(String [] args){
        TaskList tasks = new TaskList();
        tasks.run();
        tasks.getTaskListEntries();
        Optional<TaskListEntry> entry  = tasks.getTaskListEntries()
                .stream()
                .filter(p -> p.getImage().equals("notepad++.exe"))
                .findFirst();

        if(entry.isPresent()) {
            logger.info(entry.get());
        }
    }
} 
```

这是引用的 Processes 类

```
public class Processes {

    public static BufferedReader getProcessReader(Process p) {
        InputStream in = p.getInputStream();
        InputStreamReader reader = new InputStreamReader(in);
        return new BufferedReader(reader);
    }

    public static List<String> getAllLines(Process p) {
        try (BufferedReader reader = getProcessReader(p)) {
            List<String> lines = new ArrayList<>();
            String line;
            while ((line = reader.readLine()) != null) {
                lines.add(line);
            }
            return lines;
        } catch (IOException e) {
            String msg = "Reader is not in a readable state";
            throw new IllegalStateException(msg, e);
        }
    }

    private Processes() {
        // This is a utility method
    }
} 
```

# ubuntu - 在 Ubuntu 10.04 上安装 Gearman。缺少提升库

> ID：12997735
> 
> 赞同：3
> 
> 时间：2012-10-21T12:18:17.703
> 
> 标签：ubuntu, ubuntu-10.04, gearman

`make`我正在尝试在 Ubuntu 上安装 Gearman，但在通过命令时遇到了一些困难。我正在尝试安装该`1.1.2`版本。

这是 make 命令的输出

```
CXX    bin/error.o
CXXLD  bin/gearadmin
bin/bin_gearadmin-gearadmin.o: In function `main':
/home/john/gearmand/gearmand-1.1.2/bin/gearadmin.cc:129: undefined reference to `boost::program_options::options_description::options_description(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned int, unsigned int)'
collect2: ld returned 1 exit status
  CXX    libtest/libtest_unittest-unittest.o
make[1]: *** [bin/gearadmin] Error 1
make[1]: *** Waiting for unfinished jobs....
make[1]: Leaving directory `/home/john/gearmand/gearmand-1.1.2'
make: *** [all] Error 2 
```

我已按照此博客文章中的步骤进行安装 - [http://rdstash.blogspot.com/2012/02/installing-gearman-101-on-ubuntu-1104.html](http://rdstash.blogspot.com/2012/02/installing-gearman-101-on-ubuntu-1104.html)

我已经运行了以下命令来安装 boost，但它似乎不起作用。

```
sudo apt-get install libboost-program-options1.40-dev libboost-thread1.40-dev -y 
```

关于如何让它在我的系统上运行的任何建议？如果我需要发布任何进一步的信息，请告诉我。

**更新**

我运行`apt-get remove`并尝试使用此处列出的步骤安装旧版本 - [http://moffe42.blogspot.com/2011/12/installing-gearman-on-ubuntu-1004.html](http://moffe42.blogspot.com/2011/12/installing-gearman-on-ubuntu-1004.html)

运行以下命令给了我这个

```
sudo apt-get install gearman gearman-job-server gearman-tools libgearman4 libgearman-dev

Reading package lists... Done
Building dependency tree
Reading state information... Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
  libgearman4: Conflicts: libgearman-server0
  libgearman6: Conflicts: libgearman-server0
E: Broken packages 
```

我尝试安装 libgearman-server0 但随后收到以下消息

```
The following packages have unmet dependencies:
  gearman-tools: Depends: libgearman6 (= 0.32-0~598-1~lucid1) but it is not going to be installed
  libgearman-dev: Depends: libgearman6 (= 0.32-0~598-1~lucid1) but it is not going to be installed
E: Broken packages 
```

当我安装这个包时，它只是给我上一条消息（它只是不断交替）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-15T13:29:48.607

我真的没有找到答案。当我回到这个问题时，我决定将我的操作系统更新到 12.04，然后运行安装。这次工作完美无缺。

这些是我在 12.04 上安装 gearmand 的步骤

```
sudo apt-get update
sudo apt-get upgrade
sudo apt-get install gcc autoconf bison flex libtool make libboost-all-dev libcurl4-openssl-dev curl libevent-dev memcached uuid-dev libsqlite3-dev libmysqlclient-dev
sudo apt-get install gperf
sudo apt-get install libcloog-ppl0
cd /tmp/
wget https://launchpad.net/gearmand/1.2/1.1.9/+download/gearmand-1.1.9.tar.gz
tar xvzf gearmand-1.1.9.tar.gz
cd gearmand-1.1.9/
./configure
sudo make
sudo make install

sudo ldconfig
sudo pecl install gearman  #you will need to install pecl if you don't have it

#Edit INI files and add extension=gearman.so to it 
#/etc/php5/cli/php.ini
#/etc/php5/apache2/php.ini 

sudo ldconfig 
```

# java - jfreechart itext：将多个图表放在一个pdf中

> ID：12997739
> 
> 赞同：3
> 
> 时间：2012-10-21T12:18:41.927
> 
> 标签：java, itext, jfreechart

如何将多个 JfreeCharts 放入一个 pdf 文件中？有很多示例如何将 1 个 JfreeChart 放入 pdf，但我找不到任何有关如何将多个 JfreeChart 放入 1 个 pdf 的示例。

一些 JfreeCharts 应该彼此相邻，而其他 JfreeCharts 应该彼此下方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:16:49.467

我的书中有一个例子：http: [//itextpdf.com/examples/iia.php ?id=262](http://itextpdf.com/examples/iia.php?id=262)

如您所见，我有两个不同的图表，饼图和条形图。我将这些图表绘制到一个`PdfTemplate`对象上。然后，我使用 X、Y 坐标将模板添加到画布（这允许您将它们彼此相邻或彼此下方添加）。

另一种选择是将对象包装在`PdfTemplate`对象中`Image`，并使用`PdfPTable`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-10T03:12:22.523

基于Lowagie的回答。最好使用`PdfPCellEvent`界面。

```
public class JFreeChartEvent implements PdfPCellEvent {
    private JFreeChart chart;

    public JFreeChartEvent(final JFreeChart chart){
        this.chart = chart;
    }

    @Override
    public void cellLayout(PdfPCell arg0, Rectangle arg1, PdfContentByte[] arg2) {
        PdfContentByte cb = arg2[PdfPTable.TEXTCANVAS]; //optional, can be other canvas
        PdfTemplate pie = cb.createTemplate(arg1.getWidth(), arg1.getHeight());
        Graphics2D g2d1 = new PdfGraphics2D(pie, arg1.getWidth(), arg1.getHeight());
        Rectangle2D r2d1 = new Rectangle2D.Double(0, 0, arg1.getWidth(), arg1.getHeight());
        chart.draw(g2d1, r2d1);
        g2d1.dispose();
        cb.addTemplate(pie, arg1.getLeft(), arg1.getBottom());
    }
} 
```

使用`PdfPCell`时，

```
PdfPCell cell = new PdfPCell();    
cell.setCellEvent(new JFreeChartEvent(getChart());
cell.setFixedHeight(300.f);   //height must be set if its row's height is not defined yet 
```

# php - 使用 wp_query 列出帖子标题

> ID：12997740
> 
> 赞同：0
> 
> 时间：2012-10-21T12:18:53.580
> 
> 标签：php, ajax, wordpress

我正在尝试使用常规 wp_query 列出帖子标题，只是为了将永久链接添加到项目的 a href，这是我正在使用的代码：

```
 <?php $the_query = new WP_Query( 'post_type=artworks_post' );
        // The Loop
        while ( $the_query->have_posts() ) : $the_query->the_post();
            echo '<a rel="' .the_permalink(). '" href="' .the_permalink. ' ">';
            the_title();
            echo '</a>';
        endwhile;

        // Reset Post Data
        wp_reset_postdata();
    ?> 
```

问题是代码不起作用，它只返回带有“永久链接”一词的a href，但没有链接本身。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T12:28:11.057

尝试使用 get_permalink 而不是 the_permalink。函数 the_permalink 正在打印永久链接本身 (http://codex.wordpress.org/Function_Reference/the_permalink)，但函数 get_permalink 返回永久链接字符串 (http://codex.wordpress.org/Function_Reference/get_permalink)。

无论如何只是一个建议，使用 printf 而不是 echo。如，

```
<?php $the_query = new WP_Query( 'post_type=artworks_post' );
    // The Loop
    while ( $the_query->have_posts() ) : $the_query->the_post();
        echo '<a rel="' .the_permalink(). '" href="' .the_permalink. ' ">';
        the_title();
        echo '</a>';
    endwhile;

    // Reset Post Data
    wp_reset_postdata();
?> 
```

根据要求，我使用 echo 而不是 printf 添加示例

```
<?php
    $the_query = new WP_Query( 'post_type=artworks_post' );
    // The Loop
    while ( $the_query->have_posts() ) : $the_query->the_post();
        echo '<a rel="' .get_permalink(). '" href="' .get_permalink(). ' ">';
        the_title();
        echo '</a>';
    endwhile;

    // Reset Post Data
    wp_reset_postdata();
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:25:21.793

你错过了括号；

```
 echo '<a rel="' .the_permalink(). '" href="' .the_permalink(). ' ">';
        the_title();
        echo '</a>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T12:25:37.150

您使用`the_permalink`而不是`the_permalink()`after `href`。

但是，您应该使用的是[`get_permalink()`](http://codex.wordpress.org/Function_Reference/get_permalink)，它返回值以供您使用，`echo`而不是`echo`立即使用它。

# java - Java Swing：实现输入值的有效性检查

> ID：12997742
> 
> 赞同：9
> 
> 时间：2012-10-21T12:19:34.000
> 
> 标签：java, swing, input

在我的 Swing 应用程序中，用户必须在切换到下一个窗口之前插入数字和值。现在作为一个干净的程序应该，我检查每个输入是否有效，如果不是，则会显示一条错误消息并且下一个窗口不会打开。

该检查的结构如下（示例）：

```
Button buttonToOpenNextWindow = new JButton("next");
button.addActionListener(new ActionListener(){

    public void actionPerformed(ActionEvent e){
        if(checkValidty){
            // (...)
            new WindowA();
            frame.dispose(); // (*)
        }
    }
}); 
```

**(*) 注意：**我知道多 JFrame 的原理是丑陋的，我正在改变它，但对于这个问题，它是无关紧要的。

现在这个问题的重点是 this `checkValidity()`，我的结构是这样的：

```
private boolean checkValidity(){

    // check input 1
    try{
        Integer.parseInt(textField1.getText());
    }catch (NumberFormatException e){
        new ErrorDialog("input 1 is invalid!"); // own implemented dialog
        return false;
    }

    // check input 2
    try{
        Integer.parseInt(textField2.getText());
    }catch (NumberFormatException e){
        new ErrorDialog("input 2 is invalid!"); // own implemented dialog
        return false;
    }

    // (...)

    // check input n
    try{
        Integer.parseInt(textField_n.getText());
    }catch (NumberFormatException e){
        new ErrorDialog("input n is invalid!"); // own implemented dialog
        return false;
    }
    return true;
} 
```

这完全符合我的要求，但代码本身非常难看，因为有多个输入选项，该方法的长度为 200、300 或更多行（因为我不仅检查它是否是数字，而且检查数字是否有意义在程序逻辑的上下文中等等）。是否有 Swing 自己的方法来检查这些事情？或者有没有人更好地了解如何使用拆分方法来准确实现此功能？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-21T12:34:19.507

一种解决方案是使用 Swing`InputVerifier`验证每次`JTextField`使用的输入。由于每个字段的验证功能相同，因此可以对所有组件使用单个实例：

```
public class MyNumericVerifier extends InputVerifier {
    @Override
    public boolean verify(JComponent input) {
       String text = ((JTextField) input).getText();
       try {
          Integer.parseInt(text);
       } catch (NumberFormatException e) {
          return false;
       }

       return true;
    }
}

InputVerifier verifier = new MyNumericVerifier()
textField1.setInputVerifier(verifier); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-21T15:35:12.970

我更喜欢使用改进版本的`JFormattedTextField`. 通过改进，我的意思是更好的插入符号行为，对每个更改进行验证以提供即时用户反馈（例如，当输入无效时更改背景颜色），...。这与一个按钮相结合，该按钮在输入有效之前被禁用。

“单击按钮并查看出现错误消息”的主要好处：

*   为用户提供即时反馈。如果 web 应用程序可以避免往返服务器并使用 javascript 进行即时反馈，那么在桌面应用程序中没有理由不这样做。按下按钮进行验证是 90 年代。
*   视觉反馈很重要，而且更好的`InputVerifier`是避免改变焦点
*   高度可重用的组件。只需确保您的“实用程序代码包”包含一堆`Format`s（用于日期、双精度、整数、范围等），您几乎可以处理任何情况
*   由于使用`Format`s，可轻松针对不同`Locale`的 s进行调整
*   您永远不需要在`JFormattedTextField`. 所有解析代码都包含在格式中，您可以简单地使用`JFormattedTextField#getValue`
*   所有验证都由`JFormattedTextField`. 您知道您检索使用的值`getValue`是有效的

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-21T12:33:07.983

你可以做很多事情。一个简单的方法是使用一种方法来检查字符串列表是否可解析为 int。对于其他检查，您将有更多方法来检查一些典型事物，例如数字范围。因此，将每种检查拆分为自己的方法并根据需要组合它们。

否则，有完整的验证框架可以处理这类事情。我会说，它们很容易用谷歌搜索。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-21T19:57:51.260

您可以通过使用获得实时验证[`DocumentFilter`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html)

您可以查看[这个](https://stackoverflow.com/questions/12812844/limit-the-characters-in-the-text-field-using-document-listner/12812935#12812935)和[这个](https://stackoverflow.com/questions/12793030/jtextfield-limiting-character-amount-input-and-accepting-numeric-only/12793126#12793126)以获取一些示例。

但是，我确实认为，`JFormattedTextField`在这种情况下，您可能会找到更合适的解决方案。

# c# - AdControl 滞后于我的应用程序，我可以优化它吗？

> ID：12997744
> 
> 赞同：2
> 
> 时间：2012-10-21T12:19:47.190
> 
> 标签：c#, visual-studio-2010, xna

在 Visual Studio 中，我创建了一个“Windows Phone Silverlight 和 XNA 应用程序”并将 Microsoft AdControl 添加到游戏的 XNA 部分。

但是我遇到了巨大的延迟峰值，导致我的游戏挂起。当您使用电话网络而不是连接到互联网的 WLAN 时，情况也会变得更糟。

我不能有这些尖峰，因为它们会破坏游戏玩法，它们可能会持续几秒钟（1-2 秒）

我使用的代码来自微软： http: [//msdn.microsoft.com/en-us/library/hh873087 (v=msads.20).aspx](http://msdn.microsoft.com/en-us/library/hh873087(v=msads.20).aspx)

我可能会为该`AdComponent.Current.Update(e.ElapsedTime);`部分做一个工作线程，并且每 2 秒左右只做一次，但我猜更新会进行网络调用并且是线程化的，并且不会对线程化这个函数说什么：/

# c - 全局变量和局部变量混淆

> ID：12997746
> 
> 赞同：1
> 
> 时间：2012-10-21T12:20:03.063
> 
> 标签：c, global-variables

```
#include <stdio.h>
int g;
void afunc(int x)
{
     g = x; /* this sets the global to whatever x is */
}

int main(void)
{
     g = 10;    /* global g is now 10 */
    afunc(20); /* but this function will set it to 20 */
     printf("%d\n", g); /* so this will print "20" */

     return 0;
} 
```

printf 的输出是 20。但是局部变量 g = 10，那么为什么它打印 20 而不是 10，局部变量的范围比全局变量大吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T12:22:19.853

> printf 的输出是 20。但是局部变量 g = 10，所以为什么要打印 20 而不是 10

您没有更改局部变量。你的线路在`main`

```
g = 10; 
```

正在更改全局变量。类似地，函数调用会`afunc`更改全局变量。你的整个程序只有一个变量`g`，那就是全局变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T12:22:32.467

`g`您的示例中没有调用局部变量。只有一个全球性的。所以输出是预期的。

如果你想要一个名为 的局部变量`g`，试试这个：

```
int main(void)
{
     int g = 10;    /* local g, initialized with 10 */
     ... 
```

有了上面的内容，您现在有两个不同的变量，称为`g`，其中一个仅在 中可见`main`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T12:29:11.073

因为看起来您实际上并没有声明一个新变量。你刚才提到 g = 10;

您实际上并没有定义一个新变量，只是引用了一个全局变量。希望这可以帮助。

# html - 创建带有标签或帮助文本的 html 下拉菜单以显示部分

> ID：12997752
> 
> 赞同：1
> 
> 时间：2012-10-21T12:20:49.383
> 
> 标签：html, drop-down-menu, xhtml, categories

我希望有一个像这样创建的 html 下拉列表：

```
Category1
   Value1
   Value2
Category2
   Value3
   Value4
Category3
   Value5
   Value6 
```

等等..

其中 Category1.. Category3 只是下拉列表中的标签，并不是用户可以选择的实际值。它只是在类别之间引入这种细分。用户可以选择的实际值为 Value1、Value2、...

我不知道如何在下拉列表中指定这些类别。我怎样才能在下拉列表中给出这样的帮助文本？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T12:23:37.613

这里有一篇关于这个的文章： [http ://www.lost-in-code.com/programming/xhtml/html-option-groupssections/](http://www.lost-in-code.com/programming/xhtml/html-option-groupssections/)

您必须将这些部分包装在带有所需标签的 optgroup 中。

# iphone - 我可以检测 UIPickerView 滚动事件吗？

> ID：12997755
> 
> 赞同：1
> 
> 时间：2012-10-21T12:20:58.537
> 
> 标签：iphone, objective-c, ios

我想捕捉 UIPickerView 的滚动事件，我的应用程序应该查看用户是否滚动选择器以在用户开始滚动时取消另一个事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:01:23.360

pickerview 不允许这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:02:05.493

`UIScrollView`您可以尝试通过以下例程查找底层实例：

```
-(UIScrollView*)findUnderlyingScrollFor:(UIView*)view{
    if([view isKindOfClass:[UIScrollView class]]){
        return (UIScrollView*)view;
    }
    for(UIView* subview in view.subviews){
        if([subview isKindOfClass:[UIView class]]){
            UIScrollView* result = [self findUnderlyingScrollFor:subview];
            if(result){
                return result;
            }
        }
    }
    return nil; 
} 
```

通过以下调用：

```
UIScrollView* scroll = [self findUnderlyingScrollFor:_pickerView]; 
```

然后成为它的代表来接听您需要的所有电话。

```
if(scroll){
    scroll.delegate = self;
} 
```

# jquery - 每次点击 cfc、ajax、jquery 加载 10 条记录

> ID：12997756
> 
> 赞同：0
> 
> 时间：2012-10-21T12:21:31.210
> 
> 标签：jquery, ajax, cfc

我有一个测试代码，至少部分可以使用单击时使用 ajax 调用从 cfc 返回数据

这是代码：

```
<script type="text/javascript"> 
    $(document).ready(function(){
            $('#showteams').click(function() {
                $.ajax({
        url: "test.cfc?method=getAllTeams&returnformat=JSON",
        dataType: 'json',
        data: { startrow: "10", endrow: "10" },

        success:function(data) {
            $.each(data, function(i,team){

            $('#teamList').append('<li><a href="#">' + team[0] + '</a> this is the username ' + team[1] + ' ----- name --- ' + team[2] + '');
                    });

                }});
            });
            $('#teams').show();
            $('#teamList').fadeIn(1200);
            $(this).attr('disabled', 'disabled');
        });
</script> 
```

和一个简单的 cfc（最后一个会更复杂，但也足够灵活，可以在需要时进行更改）

```
<cfcomponent output="false">
     <cffunction name="getAllTeams" access="remote" output="false" returntype="any">
     <cfargument name="startrow" required="yes" type="any">
     <cfargument name="endrow" required="yes" type="any">
     <cfargument name="cat" required="no" type="any" hint="add later with the rest of the code">

        <cfquery name="qGetAllTeams" datasource="datasource">
            SELECT ID,NAME,LASTNAME
            FROM table
        </cfquery>

        <cfset one=arraynew(1)> 
        <cfset two=arraynew(1)> 
        <cfloop query="qGetAllTeams" startrow="#arguments.startrow#" endrow="#arguments.endrow#"> 
            <cfset one[1]=ID> 
            <cfset one[2]=NAME> 
            <cfset one[3]=LASTNAME> 
            <cfset ArrayAppend(two,#one#)>
        </cfloop> 

        <cfreturn two />

     </cffunction>
</cfcomponent> 
```

上面的代码有效，但只显示前 10 条记录，因为值是在 javascript 中手动设置的 - data: { startrow: "10", endrow: "10" }

虽然我可以仅使用服务器端代码轻松构建此页面或任何类型的分页，但整个 javascript 在这里让我感到困惑并且不知道如何对其进行排序。我在 cfc 中尝试过什么，以数学方式计算要在 cfloop 中使用的 startrow 和 endrow（目前我只是把 startrow="#arguments.startrow#" endrow="#argumentsendrow#" 虽然这应该明显改变:)）它返回只有前 10 条记录，因为 startrow 在 javascript 中设置为 10。我在这里肯定缺少一些基本逻辑，非常感谢您对此提供的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:59:19.130

如果您希望在客户端处理分页，则需要在 javascript 中跟踪行开始。

```
$(document).ready(function() {
    var startRow=1;
    $('#showteams').click(function() {
       var endRow= startRow+9;

        $.ajax({
            url: "test.cfc",
            dataType: 'json',
            data: { 
                method : 'getAllTeams',
                returnformat : 'JSON',
                startrow: startRow,
                endrow: endRow
            },

            success: function(data) {
                /* increment startRow*/
                startRow +=10;
                $.each(data, function(i, team) {

                    $('#teamList').append('<li><a href="#">' + team[0] + '</a> this is the username ' + team[1] + ' ----- name --- ' + team[2] + '');
                });

            }
        });
    });
    $('#teams').show();
    $('#teamList').fadeIn(1200);
    $(this).attr('disabled', 'disabled');
});​​ 
```

请注意我如何更改 url 以将搜索键/值移动到`data`AJAX 调用的对象。jQuery 会将对象解析为相同的 urlencoded 格式

您收到这些值的方式与收到任何`startrow`相当于`name`表单域的表单元素一样。此外，您的查询语句正在查找所有条目

# arrays - Perl：将数组元素与哈希图值组合

> ID：12997758
> 
> 赞同：1
> 
> 时间：2012-10-21T12:22:14.903
> 
> 标签：arrays, perl, hashmap

我正在尝试将两个值粘贴到一个字符串中。一个值是数组元素，另一个是 hashmapvalue。但我一直有这个错误：

```
Use of uninitialized value in concatenation (.) or string
  at makeNewCSV.pl line 104, <$fh> line 2020. 
```

这是我的代码：

```
use feature qq(say);

my @nodeIdArray;
my @sequenceArray;
my @completeLineArray;

my %fastaHash = ();

[...]

sub readCsv{#Reads the CSV and puts all the Node ID's in an array

my ($file) = @_;
my $nodeID = qr{\d+\,(\d+)};

open(my $fh, '<', $file) or die "Error while reading CSV: $!";

    while(my $line = <$fh>){

        if($line =~ $nodeID){

            push(@nodeIdArray, $1);
        }
    }

close($fh);

searchFasta();
}

sub searchFasta{#Reads and searches the fasta file for contigs with a matching node ID

my ($file) = $ARGV[1];
my $fastaNodeID = qr{>NODE_(\d+)_LENGTH_\d+_COV_[\d.]+\n([ACTGN\n]+)};
my @matches;

open(my $fh, '<', $file) or die "Error while reading fasta: $!";

    my @allLines = <$fh>;

    my $makeString = join('', @allLines);
    my $lineAsString = uc($makeString);

    while($lineAsString =~ m/$fastaNodeID/g){

        my $node_ID = $1;
        my $sequence = $2;

        $sequence =~ s/\n//;

        $fastaHash{$node_ID} = $sequence;
    }

close($fh);

pasteLines();
}

sub pasteLines{

my $fullLine = "";
my $file = $ARGV[0];
my @hashKeys = keys(%fastaHash);
my $index = 0;
my $numberOfRepeat = 0;

open(my $fh, '<', $file) or die "Error while reading CSV (2): $!";

    my @allLines = <$fh>;
    my $arrayLength = @allLines;

    foreach my $line(@allLines){

        chomp($line);
    }

    while($numberOfRepeat <= $arrayLength){     

        foreach my $key(@hashKeys){

            if($key = $nodeIdArray[$index]){

                no warnings qw(uninitialized);  #DEBUG:
                say qq(DEBUG: \$fastaHash{$key} = "$fastaHash{$key}");
                say qq(DEBUG: \$fullLine = $allLines[$index] . "," . $fastaHash{$key};);
                use warnings qw(uninitialized);  #DEBUG:

                $fullLine = $allLines[$index] . "," . $fastaHash{$key}; #This line here gives the problems
                push(@completeLineArray, $fullLine);

                $index++;
            }

            else{

                $index++;
            }
        }
    }

close($fh);

} 
```

$index 用于循环遍历数组，@allLines 包含读取文件中的所有行。（`<$fh>`是我的文件句柄）。

**编辑 22-10-2012：**我添加了整个代码以显示变量的生成位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:27:55.993

通常，Perl 非常擅长在未定义的问题中选择准确的行号。

显然，在某个地方，你认为有价值的东西没有。解决此问题的最简单方法是在执行任何其他操作之前简单地打印出值。尝试这个：

```
use feature qq(say);

[...]

no warnings qw(uninitialized);  #DEBUG:
say qq(DEBUG: \$fastaHash{$key} = "$fastaHash{$key}");
say qq(DEBUG: \$fullLine = $allLines[$index] . "," . $fastaHash{$key};);
use warnings qw(uninitialized);  #DEBUG:
$fullLine = $allLines[$index] . "," . $fastaHash{$key};
push(@completeLineArray, $fullLine); 
```

这将打印出您尝试连接在一起的值`$fullline`，我认为这是错误的来源。`push`即使`@completeLineArray`是空的，它也会起作用，如果是`$fullLine`问题，那么无论如何这将是上面一行的问题。

这很简单。只需复制上面的行并用 和 包围`say qq(DEBUG:)`它`);`。对于额外的奖励积分，您可以在 just 前面加上反斜杠，`$`以确保您对此没有任何问题。

该`say`命令从 5.10 开始可用，并且很好，因为我不必一直将`\n`这些东西放在最后，因为我剪切和粘贴而发生了很多事情。您必须使用[功能](http://perldoc.perl.org/feature.html)编译指示才能获得它。

我怀疑这`$key`不是您`%fastahash`哈希中的有效密钥。说`$fastahash{$key}`什么时候`$key`在你的哈希中不存在将返回一个未定义的值。由于您没有发布太多其他内容，因此我不能说为什么`$key`会指向不存在的值。但是，我敢打赌，一旦您开始打印这些密钥，您就会很快找到问题所在。

将`no warnings qw(uninitialized)`停止打印未初始化的警告。我知道某些值将在`DEBUG:`语句中未初始化。这就是我打印它们的原因。但是，在您的声明之前重新启用未初始化的警告，这样您仍然会收到该警告。您在输出中看到了这一点，您可以查找`DEBUG:`上面的语句以查看问题可能是什么。

找出问题后，您可以`DEBUG:`通过搜索和删除轻松删除行。

现在，一旦发现此错误，有两种处理方法：

### 忽略它

只需用`no warnings qw(uninitialized);`and`use warnings qw(initialized);`语句包围代码即可。它既快速又简单，而且程序可能只是在做你想做的事。此外，我们都知道如果你忽略一个问题，它就会消失。

### 处理错误

如果我怀疑它`$key`没有指向数组中的有效键，那么您可以捕获该错误并进行处理。它可能只是没有将该值推送到您的`@completeLineArray`数组中，或者它可能是其他一些错误处理技术。下面，我检查两种可能性：`$key`它不指向 中的有效条目`%fastaHash`，或者`$key`确实指向您的有效条目`%fastaHash`，但该值未定义：

```
if ( defined $fastaHash{$key} ) {
    $fullLine = $allLines[$index] . "," . $fastaHash{$key};
    push(@completeLineArray, $fullLine);
}
elsif ( not exists $fashaHash{$key} ){  #Key could exist, but value be `undef`
   ...;   #What you want to do if value key points to is undefined.
}
else (
   ...;   #What you want to do if $key doesn't point to a key in your hash
} 
```

# python - 使用python读取xml文件并打印

> ID：12997762
> 
> 赞同：0
> 
> 时间：2012-10-21T12:22:43.170
> 
> 标签：python

第一：我是一个新的乞求。使用 python ..所以请帮帮我。我正在尝试使用 Python 读取 XML 文件。我的 xml 文件名是 rgpost.xml

```
<volume name="sp" type="span" operation="create">
    <driver>HDD1</driver>
</volume> 
```

我的代码：

```
import xml.etree.ElementTree as ET
doc = ET.parse("rgpost.xml")
s = doc.find("volume")
print s.attrib["name"] 
```

运行此程序时出现错误：

```
sp:~# python volume_check.py volume  
Traceback (most recent call last):  
  File "volume_check.py", line 13, in <module>  
    print s.attrib["name"]  
AttributeError: 'NoneType' object has no attribute 'attrib' 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T12:39:49.207

如果你得到了根，生活会容易得多：

```
>>> import xml.etree.ElementTree as ET
>>> doc = ET.parse("rgpost.xml")
>>> root = doc.getroot() # <--- this is the new line
>>> root
<Element 'volume' at 0x1004d8f10>
>>> root.keys()
['operation', 'type', 'name']
>>> root.attrib["name"]
'sp'
>>> root.get("name")
'sp' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:29:29.777

`volume`被认为是 XML 树的根，所以你想要的是有效的`doc.attrib['name']`.

```
xml="""<volume name="sp" type="span" operation="create">
    <driver>HDD1</driver>
</volume>"""

import xml.etree.ElementTree as ET
doc = ET.fromstring(xml)
print doc
# <Element 'volume' at 0x26f1d50>
print doc.attrib['name'] 
```

# entity-framework - monodevelop 实体框架集成

> ID：12997772
> 
> 赞同：4
> 
> 时间：2012-10-21T12:23:57.850
> 
> 标签：entity-framework, mono, monodevelop

我有支持实体框架的 mono & monodevelop 的最后一个 git。我可以在我的项目中添加参考，但似乎 monodevelop 不会从数据库生成 edmx 文件。

您是否知道此功能是否存在或者是否有从数据库生成 ORM 映射的解决方案。

我尝试了菜单项 [Tool->Database->Generate Linq class]

我选择连接数据库并成功测试。但是当我验证我得到一个异常：MonoDevelop.Database.Sql.SqlMetalExecException：sqlmetal：无法加载databaseConnectionType类型'ByteFX.Data.MySqlClient.MySqlConnection，ByteFX.Data'。尝试使用 --with-dbconnection=TYPE 选项。

我不明白这个建议的例外......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-21T10:24:04.977

当我决定从 Windows（**VS ）迁移到 Linux（Linux****上的 Mono** ）时，我已经经历过这个。经过充分的研究，我终于知道 Monodevelop 不支持实体框架。因此，我使用非常古老的传统方法来访问数据库对象，方法是创建对象的手动类，然后在访问每个对象时通过打开和关闭连接来调用它们。

# ruby-on-rails - 用户单击提交后从表单字段中删除 html 标签（Rails）

> ID：12997775
> 
> 赞同：0
> 
> 时间：2012-10-21T12:24:01.083
> 
> 标签：ruby-on-rails, forms

我以模型的形式使用[wysihtml5](http://xing.github.com/wysihtml5/)`Post`：

**帖子/_form.html.erb：**

```
<%= f.text_area :content, id: "wysihtml5-textarea",
                          placeHolder: "Content" %> 
```

并将结果显示为`raw`+ `sanitize`：

**显示.html.erb：**

```
<%= sanitize raw(@post.content), :tags => %w(b i u p br) %> 
```

（我只允许`b, i, u, p, and br`标签）。

这样做的问题是，除了上面提到的那些（b、i、u、p 和 br）之外的 html 标记仍然保存在文本区域中（如果用户单击编辑，它们仍然对用户可见）。我想在用户点击提交后立即删除（就像 WordPress 的文本编辑器是如何做到的）。

有什么建议么？

**编辑：**

我正在尝试的东西：

**post.rb:**

```
 before_save :remove_html_tags

  def remove_html_tags
    self.content.sanitized_allowed_tags.delete 'div'
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:34:07.250

查看 API 文档：[http ://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html)

向下滚动一下，也许这就是你要找的：

```
class Application < Rails::Application
  config.after_initialize do
    ActionView::Base.sanitized_allowed_tags.delete 'div'
  end
end 
```

**更新：**如果您想在保存资源之前删除标签，您可以在模型级别通过`before_save`回调执行此操作。或者在您的控制器中，在`#create`保存资源之前的操作中。如果您想去除某些标签，那么您可以使用`#strip_tags`，例如：

```
before_save do |post|
  post.content = strip_tags(post.content)
end 
```

但由于这是来自 ActiveSupport 的方法，因此您必须在模型中包含该模块：

```
`ActionView::Helpers::SanitizeHelper` 
```

# scala - 如何将作为 JavaScript 中的数组的变量传递给接受 List[String] 作为参数的控制器？

> ID：12997782
> 
> 赞同：1
> 
> 时间：2012-10-21T12:25:29.833
> 
> 标签：scala, routing, playframework-2.0

## 设置：

使用播放！框架 v 2.0.4

控制器：

```
 def javascriptRoutes = Action { implicit request =>
    Ok(
      Routes.javascriptRouter("jsRoutes")(
        routes.javascript.Admin.approve  
      )
    ).as("text/javascript")
  }

def approve(user: List[String]) = SecureAction('admin) { implicit ctx =>
    Logger.debug("Admin.approve: " + user.foldLeft("")(_ + "::" + _))
    user map { u =>
      User.approve(u)
    }
    Ok(Json.toJson(user))
  } 
```

风景：

```
 function get_selected() {
      return  $.makeArray($(".user-selector").map(function (ind, user){
          if(user.checked) return user.name;
      }));
  }

 $("#button-approve").click(function(){
      jsRoutes.controllers.Admin.approve(get_selected()).ajax({
          success: function(data, status) {
              console.log("Users activated: " + data)
              for(i = 0; i < data.length; i++) {
                  id = "#" + data[i];
                  $(id + " > td > i.approved").removeClass("icon-flag").addClass("icon-check");
              }
              $(":checked").attr("checked", false);
          }
      });
  }); 
```

路线：

```
PUT     /admin/users                controllers.Admin.approve(user: List[String])
GET     /admin/jsRoutes             controllers.Admin.javascriptRoutes 
```

我还使用了[这个问题](https://stackoverflow.com/questions/10464268/querystringbinder-for-liststring)中提到的代码来允许绑定`List[String]`作为参数。

## 问题

参数在请求中传递，报告如下：

```
PUT /admin/users?user=506b5d70e4b00eb6adcb26a7%2C506b6271e4b00eb6adcb26a8 
```

编码`%2C`字符为逗号。控制器将其解释为单个字符串，因为上面代码中的调试行如下所示：

```
[debug] application - Admin.approve: ::506b5d70e4b00eb6adcb26a7,506b6271e4b00eb6adcb26a8 
```

（使用默认值`List.toString`会产生误导，这就是我使用该`foldLeft`技巧的原因）。

# 所以

如何将复选框选择的用户列表传递给控制器​​，以便将其解释为字符串列表，而不是单个字符串列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T16:32:38.370

行。`QueryBinders`问题在于缺少 JavaScript 部分的旧实现。正确的版本是：

```
package models

import play.api.mvc.{JavascriptLitteral, QueryStringBindable}

//TODO: remove when updating to 2.1                                                                                                                                                                                

object QueryBinders {

  /**                                                                                                                                                                                                              
   * QueryString binder for List                                                                                                                                                                                   
   */
  implicit def bindableList[T: QueryStringBindable] = new QueryStringBindable[List[T]] {
    def bind(key: String, params: Map[String, Seq[String]]) = Some(Right(bindList[T](key, params)))
    def unbind(key: String, values: List[T]) = unbindList(key, values)

    /////////////// The missing part here...:
    override def javascriptUnbind = javascriptUnbindList(implicitly[QueryStringBindable[T]].javascriptUnbind)
  }

  private def bindList[T: QueryStringBindable](key: String, params: Map[String, Seq[String]]): List[T] = {
    for {
      values <- params.get(key).toList
      rawValue <- values
      bound <- implicitly[QueryStringBindable[T]].bind(key, Map(key -> Seq(rawValue)))
      value <- bound.right.toOption
    } yield value
  }

  private def unbindList[T: QueryStringBindable](key: String, values: Iterable[T]): String = {
    (for (value <- values) yield {
      implicitly[QueryStringBindable[T]].unbind(key, value)
    }).mkString("&")
  }

  /////////// ...and here
  private def javascriptUnbindList(jsUnbindT: String) = "function(k,vs){var l=vs&&vs.length,r=[],i=0;for(;i<l;i++){r[i]=(" + jsUnbindT + ")(k,vs[i])}return r.join('&')}"

  /**                                                                                                                                                                                                              
   * Convert a Scala List[T] to Javascript array                                                                                                                                                                   
   */
  implicit def litteralOption[T](implicit jsl: JavascriptLitteral[T]) = new JavascriptLitteral[List[T]] {
    def to(value: List[T]) = "[" + value.map { v => jsl.to(v)+"," } +"]"
  }

} 
```

现在查询看起来像这样：

```
PUT /admin/users?user=506b5d70e4b00eb6adcb26a7&user=506b6271e4b00eb6adcb26a8 
```

最后一切正常。

## 最后说明：

在剧中！框架 2.1+ 它应该可以在不添加项目源代码的情况下工作。实际上代码是从原样借来的`Play20/framework/src/play/src/main/scala/play/api/mvc/Binders.scala`

# css - 将“％”添加到变量

> ID：12997785
> 
> 赞同：3
> 
> 时间：2012-10-21T12:25:37.947
> 
> 标签：css, sass

我想写这个mixin：

```
@mixin top_a($sep-a: 2.5) {
padding-top: $sep-a + %;} 
```

但不幸的是，这会引发错误。如何正确地将百分比添加到值中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T12:42:25.383

为什么不简单地乘以`1%`？

```
padding-top: $sep-a * 1%; 
```

# c# - 在不创建工厂的情况下注入第三方类

> ID：12997786
> 
> 赞同：1
> 
> 时间：2012-10-21T12:25:41.050
> 
> 标签：c#, dependency-injection, ninject

假设我在 C# 中有以下代码：

```
public class AppleTree
{
   public AppleTree()
   {
   }

   public string GetApple
   {
      return new Fruit("Apple").ToString();
   }
} 
```

其中 Fruit 是没有接口的第三方类。

我想为 AppleTree 类创建一个单元测试，但我不想运行 Fruit 类。相反，我想注入 Fruit 类，以便我可以在测试中模拟它。

我该怎么做呢？我可以创建一个创建苹果的工厂，然后向该工厂添加一个接口，例如：

```
public class FruitFactory : IFruitFactory
{
   Fruit CreateApple()
   {
      return new Fruit("Apple");
   }
} 
```

现在我可以将 IFruitFactory 注入 AppleTree 并使用 CreateApple 而不是 new Fruit 作为：

```
public class AppleTree
{
   private readonly IFruitFactory _fruitFactory;

   public AppleTree(IFruitFactory fruitFactory)
   {
      _fruitFactory = fruitFactory
   }

   public string GetApple
   {
      return  _fruitFactory.CreateApple().ToString();
   }
} 
```

现在我的问题是：有没有一种无需创建工厂就可以做到这一点的好方法？例如，我可以以某种方式使用像 Ninject 这样的依赖注入器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:51:57.943

也许，最简单的是，用虚拟方法/属性实现你自己的抽象**FruitBase类。**然后制作包装真正**Fruit**类的实现 - **FruitWrapper**。**与System.Web**中的**HttpContextBase**、**HttpContextWrapper**和**HttpContext**逻辑相同。

 **然后，您可以轻松地模拟所有内容，而无需任何特定于供应商的黑暗魔法测试框架。

```
public class AppleTree
{
    private readonly Func<FruitBase> _constructor;
    public AppleTree(Func<FruitBase> constructor)
    {
        _constructor = constructor;
    }

    public string GetApple()
    {
        return new _constructor().ToString();
    }
} 
```

您可以在构造函数中交换函数：`() => new FruitMock()`和`() => new Fruit("Apple")`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:47:47.997

您可以模拟已实现的类型。我所知道的能很好地做到这一点的产品是[Typemock](http://www.typemock.com/)。微软有一款名为[Moles](http://research.microsoft.com/en-us/projects/moles/)的产品，但我还没有遇到任何真正使用它的人。我对它的用处没有太多意见。

您还可以向运行时注册 COM 接口以拦截对象创建以注入您自己的。这就是这些产品的工作原理。这些是获得所需位置的最少代码更改量。

从长远来看，我倾向于用工厂或类似的东西来抽象水果。但是像 Typemock 或 Moles 这样的工具会在短期内让你更快地到达那里。如果一切都在接口后面，那么前进的摩擦就会减少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T17:28:52.343

如果你不能编程到 IFruit 接口，那么我认为抽象工厂是要走的路。

至于单元测试，如果你使用的是 Visual Studio 2012，你可以试试[Microsoft Fakes](http://msdn.microsoft.com/en-us/library/hh549175%28v=vs.110%29.aspx)。以下代码只是为了好玩（它当然有效）。也许这对你的情况来说太过分了。

```
using Microsoft.QualityTools.Testing.Fakes;
using MyLib;

namespace UnitTestProject1
{
    [TestClass]
    public class UnitTest1
    {
        [TestMethod]
        public void TestMethod1()
        {
            using (ShimsContext.Create())
            {
                MyLib.Fakes.ShimFruit.ConstructorString = delegate(Fruit f, string s)
                {
                    var shimFruit = new MyLib.Fakes.ShimFruit(f);
                    shimFruit.ToString = () =>
                    {
                        return "Orange";
                    };
                };
                AppleTree tree = new AppleTree();
                string expected = "Orange";
                Assert.AreEqual(expected, tree.GetApple());
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T20:28:47.057

See `Ninject.Extensions.Factory` - with it, you have `Func<T>` ctor arguments and the Abstract Factory is generated behind the scenes (a la @Nenad's +1'd answer)

(You can also define an [Abstract Factory](http://blog.ploeh.dk/2012/03/15/ImplementingAnAbstractFactory.aspx) interface and have [Ninject.Extensions.Factory](https://github.com/ninject/ninject.extensions.factory/wiki) implement it.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T12:57:59.977

而不是工厂，您通常会`Fruit`实现一个`IFruit`接口并注入它：

```
public class AppleTree
{
    private readonly IFruit _apple;

    public AppleTree(IFruit apple)
    {
        _apple = apple;
    }

    public string GetApple()
    {
        return _apple.ToString();
    }
} 
```

通过这种实现，您可以实例化：

1.  `new AppleTree(new Fruit("Apple"))`或者您可以使用 NInject 或 StructureMap 之类的 IoC 容器为您完成
2.  `new AppleTree(mockApple)``mockApple`您为单元测试创​​建的模拟 IFruit 对象在哪里**

# c++ - 从 C++ 中的二维集合中删除一个元素

> ID：12997789
> 
> 赞同：0
> 
> 时间：2012-10-21T12:26:00.850
> 
> 标签：c++, stl, set

我有一个 2 x 3 的`set<set<int> >`名称`ss`，如下所示：

```
5 6 7
6 7 8 
```

我想删除所有`6`的 's 并最终像这样：

```
5 7
7 8 
```

我正在尝试做：

```
for (set<set<int> >::iterator it = ss.begin(); it != ss.end(); it++) {
    it->erase(6);
} 
```

这给了我一个错误：

```
error: passing ‘const std::set<int>’ as ‘this’ argument of ‘std::set<_Key, _Compare, _Alloc>::size_type std::set<_Key, _Compare, _Alloc>::erase(const key_type&) [with _Key = int, _Compare = std::less<int>, _Alloc = std::allocator<int>, std::set<_Key, _Compare, _Alloc>::size_type = long unsigned int, std::set<_Key, _Compare, _Alloc>::key_type = int]’ discards qualifiers [-fpermissive] 
```

我可以通过传递编译它`-fpermissive`，它似乎工作正常，但我想知道这个错误是怎么回事。

**在我尝试了海德的建议后**编辑：****

 **```
for (set<set<int> >::iterator it = ss.begin(); it != ss.end(); it++) {
    set<int> temp(*it);
    temp.erase(6);
    ss.erase(*it);
    ss.insert(temp);
} 
```

这似乎有效，所以我猜集合不允许像他说的那样改变元素..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:53:17.043

根据上面的评论，解决方案：不要更改集合中的项目，更改集合中的项目在概念上与删除元素并插入新元素相同。所以解决方案是

*   迭代外集
    *   检查内部集是否有不需要的项目
        *   删除那个内部集
        *   从移除的内部集合中移除不需要的项目
        *   将修改后的内部集添加回外部集

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:34:03.627

您正在尝试更改不允许的密钥**

# php - 如何在 Javascript 中迭代 JSON

> ID：12997790
> 
> 赞同：-3
> 
> 时间：2012-10-21T12:26:02.620
> 
> 标签：php, javascript, jquery

我在 PHP 中创建 JSON 字符串，并使用 AJAX 来获取它。

```
<?php 
// for loop {
    $contacts[] = array(
        'firstname' => $contact->getFname(),
        'lastname' => $contact->getLname(),
        'address' => $contact->getAddress(),
        'city' => $contact->getCity(),
        'postcode' => $contact->getPostcode()
    ); 
// } end for loop

$arr = array('success' => 'yes', 'con' => $contacts);
echo json_encode($arr);
exit;
?> 
```

我无法在 Javascript 中迭代 JSON 字符串。我已经尝试使用`for loop`，但我无法得到结果

```
for(var i = 0; i < data.con.length; i++) {
    alert(d[i]);
} 
```

我想遍历 Ajax 成功函数中的每个 con 数组。我的代码不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T12:41:16.843

这不应该：

```
function(data) {
        // This for loop is not working
        for (var i = 0; i < data.con.length; i++) {
            alert(d[i]);
        } 
```

是这样的：

```
function(data) {
        // This for loop is not working
        for (var i = 0; i < data.con.length; i++) {
            alert(data.con[i]);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T12:28:40.740

使用 jQuery`.each`

```
success:  function(data) {  
 $.each(data, function(key, val){
   alert(key+" - "+val);
 });   
} 
```

# ios - 苹果应用商店同款应用在不同国家销售不同名称？

> ID：12997791
> 
> 赞同：0
> 
> 时间：2012-10-21T12:26:04.040
> 
> 标签：ios, app-store

在应用商店中，我看到某些应用商店中的某些应用名称不同。这些应用程序都是相同的，但它们的名称会根据国家/地区商店而变化。怎么做到呢？我是否需要为每个名称不同的商店发送我的应用程序，还是有一个选项？

我可以通过补丁将此功能添加到我的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:27:27.083

请参阅[iTunes Connect 开发人员指南 - 本地化元数据、关键字和屏幕截图](http://developer.apple.com/library/mac/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/8_AddingNewApps/AddingNewApps.html#//apple_ref/doc/uid/TP40011225-CH13-SW15)

[http://developer.apple.com/library/mac/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/8_AddingNewApps/AddingNewApps.html#//apple_ref/doc/uid/TP40011225-CH13-SW15](http://developer.apple.com/library/mac/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/8_AddingNewApps/AddingNewApps.html#//apple_ref/doc/uid/TP40011225-CH13-SW15)

# gwt - 无法在端口 9997 上绑定套接字——另一个会话是否处于活动状态？

> ID：12997795
> 
> 赞同：0
> 
> 时间：2012-10-21T12:26:40.663
> 
> 标签：gwt

在过去的几天里，我多次遇到这个问题。我在运行 Mountain Lion 的 MacBook Pro 上使用 FireFix 16.0.1，使用 eclipse juno 和最新的 google 插件和 SDK。

我正在测试我的代码，做一些小改动并在 FF 中重新加载页面。出于某种原因，FF 光标开始旋转并锁定，显然是在循环中。我强制 FF 退出并停止开发服务器，但在我重新启动服务器时收到此消息。上次发生这种情况时，我不得不关闭操作系统以清除端口。关闭项目并重新启动 eclipse 并没有完成这项工作。

我知道我可以通过选择一个新端口或随机选择一个端口来解决问题。我想知道的是当 FF 进入这种状态时如何停止它。我可以转储并将其发送到某个地方，或者自己调试问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T14:31:36.757

当您的光标开始旋转时，表示操作系统正忙：您不必退出 FF，只需稍等即可。您可以通过为 Java 分配更多内存和/或为 MacBook 添加更多 RAM 来解决此问题。

无论如何，重新启动 Firefox 后，Eclipse 中的服务器仍在运行。因此，当您尝试再次启动服务器时，您会收到端口繁忙的错误消息。有一个非常简单的解决方案：在再次启动服务器之前（“Debug as...”或“Run as...”），您应该单击 Eclipse 中的控制台或开发模式选项卡中的红色方块以终止之前的发射。还可以单击红色方块旁边的两个黑色 X 以删除终止的启动。

# xml - XML 序列化到对象集合

> ID：12997797
> 
> 赞同：2
> 
> 时间：2012-10-21T12:26:57.503
> 
> 标签：xml, serialization, xmlserializer

我想将 xml 字符串序列化为对象集合，但我只能获取第一个对象。如果我在 xml 中添加更多对象，则会出错。不知道我错过了什么。我尝试将类型声明为 Emp[]

这是我的两个“Emp”xml 字符串

```
string empsworking = "<?xml version='1.0' encoding='utf-8'?><Emp><EmpInfo><Code>vv</Code><FirstName>van</FirstName><LastName>sa</LastName><Destination>sc</Destination></EmpInfo><EmpInfo><Code>rr</Code><FirstName>ro</FirstName><LastName>sa</LastName><Destination>ph</Destination></EmpInfo></Emp>";

         string empsNotworking = "<?xml version='1.0' encoding='utf-8'?><Emp><EmpInfo><Code>vv</Code><FirstName>van</FirstName><LastName>sa</LastName><Destination>sc</Destination></EmpInfo></Emp>"; 
```

我的课看起来像

```
[System.Xml.Serialization.XmlRootAttribute(Namespace = "", IsNullable = false)]
public class Emp
{
    /// <remarks/>
   public EmpInfo EmpInfo { get; set; }
    public IEnumerator GetEnumerator()
    {
        throw new NotImplementedException();
    }

}

/// <remarks/>
[XmlRoot(ElementName = "EmpInfo")] 
public class EmpInfo
{

    /// <remarks/>
    public string Code;

    /// <remarks/>
    public string FirstName;

    /// <remarks/>
    public string LastName;

    /// <remarks/>
    public string Destination;
} 
```

我的序列化代码是

```
 StringReader stream = null;
       XmlTextReader reader = null;
        Emp empprofile;
       try
       {
           // serialise to object
           XmlSerializer serializer = new XmlSerializer(typeof(Emp));
           stream = new StringReader(emps); // read xml data
           reader = new XmlTextReader(stream);  // create reader
           // covert reader to object
           empprofile = (Emp)serializer.Deserialize(reader);
       }
       catch
       {
           return null;
       }
       finally
       {
           if (stream != null) stream.Close();
           if (reader != null) reader.Close();
       } 
```

我只能通过 empworking 读取/获取对象。如何将其作为“EmpInfo”的集合？请指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:45:38.870

试试这样：

```
[TestFixture]
public class SerializeTest
{
    [Test]
    public void SerializeEmpTest()
    {
        EmpCollection empCollection = new EmpCollection()
            {
                new EmpInfo() {Code = "1", FirstName = "Anita"}, 
                new EmpInfo() {Code = "1", FirstName = "Johan"}
            };
        string xmlString = empCollection.GetXmlString();
    }
}

[XmlType, XmlRoot]
public class EmpCollection : List<EmpInfo>
{

}

[XmlType]
public class EmpInfo
{
    public string Code;

    public string FirstName;

}

public static class Extenstion
{
    public static string GetXmlString<T>(this T objectToSerialize)
    {
        XmlSerializer xmlSerializer = new XmlSerializer(objectToSerialize.GetType());
        StringBuilder stringBuilder = new StringBuilder();
        string xml;
        using (var xmlTextWriter = new XmlTextWriter(new StringWriter(stringBuilder)))
        {
            xmlSerializer.Serialize(xmlTextWriter, objectToSerialize);
            xml = stringBuilder.ToString();
        }
        return xml;
    }
} 
```

# drupal-7 - CKFinder上传的文件有411权限。如何将其设置为 777

> ID：12997798
> 
> 赞同：4
> 
> 时间：2012-10-21T12:27:09.803
> 
> 标签：drupal-7, ckfinder

CKFinder 工作正常，但通过 CKFinder 上传的文件具有 411 权限。我希望它是 777。我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T05:00:47.530

我也有完全一样的问题。Drupal 7，Dreamhost VPS 服务器托管，WYSIWYG 安装，在库目录树中使用 ckeditor 和 finder。

ckfinder 工作正常，在 ckfinder-bridge ( [https://drupal.org/project/WYSIWYG-CKFinder](https://drupal.org/project/WYSIWYG-CKFinder) )中设置了权限

除了上传的所有文件都有 411 权限，因此上传后 apache 服务器无法访问。

如果我手动（通过 ssh）修复权限，则可以使用上传的文件，所以这纯粹是上传期间设置的权限问题，并且 ckfinder 配置中的权限被忽略。

# android - 取消从多任务面板中删除应用程序的通知

> ID：12997800
> 
> 赞同：49
> 
> 时间：2012-10-21T12:27:24.420
> 
> 标签：android, android-notifications

我管理来自我的应用程序（而不是来自服务）的**持续通知。**

当我使用“结束”按钮从任务管理器中终止应用程序时，**通知消失**。

当我从多任务面板中删除应用程序时，应用程序被杀死但**通知仍然存在**。

我的问题是：

*   如何捕获此事件以清除通知？
*   从多任务面板中删除应用程序时会发生什么？应用程序被销毁但进程仍然存在？正常吗？

* * *

作为更新：

我的所有活动都使用以下方法扩展了 MyActivity 类（扩展了 Activity）：

```
@Override protected void onCreate(Bundle state) {
    super.onCreate(state);
    ((MyApplication) getApplication()).onActivityCreate(this, state);
}

@Override protected void onDestroy() {
    super.onDestroy();
    ((MyApplication) getApplication()).onActivityDestroy(this);
} 
```

我的应用程序使用方法扩展了 MyApplication 类（扩展了应用程序）：

```
private List<Activity> activities = new ArrayList<Activity>();

protected final void onActivityCreate(Activity activity, Bundle state) {
    if(activities.isEmpty() && state == null) {
        onStart();
    }
    activities.add(activity);
}

protected final void onActivityDestroy(Activity activity) {
    activities.remove(activity);
    if(activities.isEmpty() && activity.isFinishing()) {
        onExit();
    }
}

protected void onStart() {
    // some code
}

protected void onExit() {
    // some code
    notificationManager.cancel(NOTIFICATION_ID);
} 
```

`activities`是所有正在运行的活动的列表

这不是最简单的机制，但我需要它

我应该改用服务吗？

* * *

作为新的更新：

在我的 onExit() 方法中，如果我记录调试消息以了解会发生这样的情况：

```
public void onExit() {
    for(int i = 0; i < 100; i++) {
        Log.d(TAG, "onExit");
    }
} 
```

少量日志在两个上出现一次，而不是全部（例如：13/100）

所以，我知道从多任务面板中删除应用程序强制杀死应用程序而不等待关闭方法结束以正确完成......但为什么不处理？！

如何强制正确终止？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-17T08:20:40.927

**当主应用程序被杀死时杀死通知。**

由于您的通知和您的应用程序在不同的线程中处理，因此通过 MultitaskManager 终止您的应用程序不会终止您的通知。由于您已经正确调查过杀死您的应用程序，因此甚至不一定会导致 onExit() 回调。

**那么解决方案是什么？**

您可以从您的活动中启动服务。特殊服务有：如果应用进程由于某种原因被杀死，它们会自动重启。因此，您可以通过在重启时终止通知来重用自动重启。

**第 1 步创建一个杀死** Simple 的服务。它只是杀死了创建通知并拥有他的特殊活页夹。

```
public class KillNotificationsService extends Service {

    public class KillBinder extends Binder {
        public final Service service;

        public KillBinder(Service service) {
            this.service = service;
        }

    }

    public static int NOTIFICATION_ID = 666;
    private NotificationManager mNM;
    private final IBinder mBinder = new KillBinder(this);

    @Override
    public IBinder onBind(Intent intent) {
            return mBinder;
    }
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
            return Service.START_STICKY;
    }
    @Override
    public void onCreate() {
            mNM = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
            mNM.cancel(NOTIFICATION_ID);
    }
} 
```

**第 2 步：将其添加到您的清单中：** 将其添加到您的 <application> 标记之间的某个位置。

```
<service android:name="KillNotificationsService"></service> 
```

**第三步：总是在触发通知之前创建服务，并使用静态通知ID。**

```
ServiceConnection mConnection = new ServiceConnection() {
    public void onServiceConnected(ComponentName className,
            IBinder binder) {
        ((KillBinder) binder).service.startService(new Intent(
                MainActivity.this, KillNotificationsService.class));
        Notification notification = new Notification(
                R.drawable.ic_launcher, "Text",
                System.currentTimeMillis());
        Intent notificationIntent = new Intent(MainActivity.this,
                Place.class);
        PendingIntent contentIntent = PendingIntent.getActivity(
                MainActivity.this, 0, notificationIntent, 0);
        notification.setLatestEventInfo(getApplicationContext(),
                "Text", "Text", contentIntent);
        NotificationManager mNM = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        mNM.notify(KillNotificationsService.NOTIFICATION_ID,
                notification);
    }

    public void onServiceDisconnected(ComponentName className) {
    }

};
bindService(new Intent(MainActivity.this,
        KillNotificationsService.class), mConnection,
        Context.BIND_AUTO_CREATE); 
```

重新启动服务可能需要一点时间（1-5 秒），但它最终会启动并终止通知。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-02-18T13:06:48.383

Ice Cream Sandwich (API-14) 中引入了将应用程序从最近的应用程序列表中滑出的功能。

使用相同的Android版本，我们在“android.app.Service”中收到了一个特殊的方法“onTaskRemoved()”。当应用程序从最近的应用程序列表中删除时，它会被调用。

因此，如果您正在运行任何服务，只需覆盖“onTaskRemoved()”方法即可满足您的要求。

例如：

```
@Override
public void onTaskRemoved(Intent rootIntent) {
    NotificationManager mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    mNotificationManager.cancel(NOTIFICATION_ID);
} 
```

或者简单地编写并启动特殊服务来管理它。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-25T09:12:29.307

您应该创建类扩展应用程序并注册活动回调，当您从多任务面板关闭应用程序时调用该回调。

```
 public class MyApplication extends Application {

@Override
    public void onCreate() {
        super.onCreate();
        registerActivityLifecycleCallbacks(new ActivityLifecycleCallbacks() {
            @Override
            public void onActivityCreated(Activity activity, Bundle bundle) {
            }

        @Override
        public void onActivityStarted(Activity activity) {
        }

        @Override
        public void onActivityResumed(Activity activity) {
        }

        @Override
        public void onActivityPaused(Activity activity) {
        }

        @Override
        public void onActivityStopped(Activity activity) {
        }

        @Override
        public void onActivitySaveInstanceState(Activity activity, Bundle bundle) {
        }

        @Override
        public void onActivityDestroyed(Activity activity) {
            if (/*check is all your activities onStop state*/) {
                NotificationManager mNM = (NotificationManager)              getSystemService(NOTIFICATION_SERVICE);
                mNM.cancel(R.id.key_notification_id);
            }
        }
    });
} 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-07T11:44:45.477

我建议您使用 Deepti 解决方案（[https://stackoverflow.com/a/28584405/619673](https://stackoverflow.com/a/28584405/619673)），它是

```
@Override
public void onTaskRemoved(Intent rootIntent) {
    NotificationManager mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    mNotificationManager.cancel(NOTIFICATION_ID);
} 
```

不过，他忘了提一件事。如果您与服务的连接是通过 call 进行的`bindService()`，`onTaskRemoved()`则不会被触发。要处理此问题，您必须通过调用与服务连接，`startService()`如下例所示：

```
startService(new Intent(context, CustomerService.class)); 
```

一旦你调用它，你将能够 catch `onTaskRemoved()`。

没有什么能阻止调用这两种方法`startService()`和更远的地方`bindService()`。

* * *

我是基于解决方案[Service: onTaskRemoved not called if started with bindService](https://stackoverflow.com/questions/24127923/service-ontaskremoved-not-called-if-started-with-bindservice/24132045)

```
startService(new Intent(context, CustomerService.class)); // this will allow catch onTaskRemoved
// ...
bindService(new Intent(context, CustomerService.class),
                        mConnection, Context.BIND_AUTO_CREATE); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-26T00:32:08.840

我自己也有同样的问题，但是我设法解决了

这就是我所做的

```
 public class Sample extends Activity {

 private static final String APP_NOTIFICATION_TAG = "sample";
 private static final int NOTIFICATION_ID = 24;
 private NotificationManager notificationManager;
 private Notification appNotification;

 private AppFinishedExecutingListener appFinishedExecutingListener;

 @Override
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // set the layout and other stuff goes here
    appFinishedExecutingListener.execute(this);
    new Thread() {
        @Override
        public void run() {
            try {
                appFinishedExecutingListener.get();
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        destroyActivityComponent();
                    }
                });
            } catch (InterruptedException e) {
                e.printStackTrace();
            } catch (ExecutionException e) {
                e.printStackTrace();
            }
        }
    }.start();

    setupNotification();
 }

 /*
 * Setup this app 
 */
private void setupNotification() {

    Intent intent = new Intent(getApplicationContext(), MainActivity.class);
    // make sure when the user click the notification, this will make sure it will resume the app
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);

    // define the action should be performed if the user click the notification i.e. resume our app activity
    PendingIntent pIntent = PendingIntent.getActivity(getApplicationContext(), (int)System.currentTimeMillis(), intent, 0);

    // setup the look for this app on  a notification panel
    appNotification  = new NotificationCompat.Builder(this)
            .setContentTitle(getString(R.string.app_name))
            .setContentText("Currently listening to kiribati radio")
            .setSmallIcon(R.drawable.ic_notification_logo)
            .setContentIntent(pIntent)
            .setAutoCancel(true)
            .setOngoing(true).build()
            ;

    notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

}

/*
 * Will add app notification when this activity is paused so the user can   
 * quickly access it or resume this activity easily
 */
private void addAppToNotificationP() {
    notificationManager.notify(APP_NOTIFICATION_TAG, NOTIFICATION_ID,   appNotification);
}

/*
 * This will remove the notification if this activity is resumed
 */
private void removeAppFromNotificationP() {
    notificationManager.cancel(APP_NOTIFICATION_TAG,NOTIFICATION_ID);
}

@Override
protected void onPause() {
    super.onPause();
    addAppToNotificationP();
}

@Override
protected void onResume() {
    super.onResume();
    removeAppFromNotificationP();

}

private void destroyActivityCompletely() {
    onResume();
    finish();
}

}

public class AppFinishedExecutingListener extends AsyncTask<MainActivity, Void, Boolean> {

    private MainActivity main_activity;

    @Override
    protected Boolean doInBackground(MainActivity... params) {
        main_activity = params[0];

        while(!main_activity.isFinishing()) {
            try {
                Thread.sleep(100);
                //Log.i(main_activity.TAG,"listening");
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

        //main_activity.finish();

        return true;
    }

} 
```

如果您按住主页按钮 2-3 秒，那么当我们的活动当前处于暂停状态时，多窗格将进入前台。因此我们需要先把它带到前台，然后移除应用通知，最后退出应用

destroyActivityCompletely 函数将删除应用程序通知，然后终止活动。如果活动从多窗格等激发，这将起作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-31T06:15:22.677

我想关闭我所有的应用通知，删除注销时的徽章图标，从最近的应用列表中删除。因此对于

> Xamarin.Android

在启动器活动中启动服务（我正在从这里创建通知）为

```
Intent intent = new Intent(this, typeof(PushNotificationService));
this.StartService(intent); 
```

`PushNotificationService`我的安卓`service`在哪里

```
[Service]
    public class PushNotificationService : Service
        {
            public override IBinder OnBind(Intent intent)
            {
                return null;
            }

        public override void OnCreate()
        {
            base.OnCreate();
        }
        public override void OnTaskRemoved(Intent rootIntent)
        {
            try
            {
                var notificationManager = (NotificationManager)GetSystemService(NotificationService);
                notificationManager.Cancel(0);
                ME.Leolin.Shortcutbadger.ShortcutBadger.RemoveCount(Application.Context);
            }
            catch (System.Exception ex)
            {
            }
        }
    } 
```

这条线 `OnTaskRemoved(Intent rootIntent)`成功了

```
 var notificationManager = (NotificationManager)GetSystemService(NotificationService);
                notificationManager.Cancel(0); 
```

其中 0 in`notificationManager.Cancel(0);`是我们在构建通知时放置的本地通知 ID。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-10T22:44:38.400

这个问题很老，但它可能对其他人有帮助。

正如其他人所指出的，您可以使用 onTaskRemoved() 但它不会在小米，Oppo 和其他中国制造商的许多设备上调用，除非该应用程序被添加到白名单。

为了也支持这些设备，可以在前台启动服务。这样，通知就会附加到服务上。因此，当服务被终止时（通过在多任务面板中滑动），通知将被清除。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-11T15:56:35.997

我发现 AndacAydin 接受的 13 年 1 月答案对我来说效果很好。但是，在 21 年 1 月（API 30）已经发生了足够的变化，需要进行一些修订。

“第 3 步：在触发之前始终创建服务……”需要修改，主要是因为 Notification 中的“setLatestEventInfo”方法不仅已被弃用，而且实际上已被删除！

这是我对他的第 3 步的更新，现在在 R 中对我来说工作正常：

```
ServiceConnection mConnection = new ServiceConnection() {
    public void onServiceConnected(ComponentName className,
        IBinder binder) {
        ((KillBinder) binder).service.startService(new Intent(
                MainActivity.this, KillNotificationsService.class));
        Intent notificationIntent = new Intent(getApplicationContext(),
                MainActivity.class);
        PendingIntent contentIntent = PendingIntent.getActivity(
                MainActivity.this, 0, notificationIntent, 0);
        Notification notification = new NotificationCompat.Builder(
                getApplicationContext(), "someChannel")
                    .setSmallIcon(R.drawable.ic_launcher)
                    .setContentIntent(contentIntent)
                    .build();
        NotificationManager mNM =
                (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        mNM.notify(KillNotificationsService.NOTIFICATION_ID, notification);
    }

    public void onServiceDisconnected(ComponentName className) {
    }
};

bindService(new Intent(MainActivity.this,
        KillNotificationsService.class), mConnection,
        Context.BIND_AUTO_CREATE); 
```

# cassandra - 如何从 cassandra 客户端输出到文件？

> ID：12997801
> 
> 赞同：8
> 
> 时间：2012-10-21T12:27:24.630
> 
> 标签：cassandra

我想将 list 命令的结果保存到文件中。我怎样才能从 cassandra-cli 做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T14:24:14.530

将您键入的命令保存到文件中以用作脚本，然后调用 cli：

```
cassandra-cli <commands.txt >listing.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-26T10:12:19.707

对我来说，使用管道输入是行不通的。我使用了cassandra-cli 的*--file*参数。例如：

```
cassandra-cli --file commands.txt > listing.txt 
```

# android - Phonegap Android - admob 放大

> ID：12997806
> 
> 赞同：1
> 
> 时间：2012-10-21T12:28:13.927
> 
> 标签：android, cordova, cordova-2.0.0

我已经搜索了两天没有成功，所以我不得不问，这是我的代码。

```
package com.bbmbabes;

import android.os.Bundle;
import android.widget.LinearLayout;
import com.google.ads.*;
import android.webkit.WebSettings;
import org.apache.cordova.*;

public class BBMBabes extends DroidGap {
private static final String AdMob_Ad_Unit = "a15072ff10d80ef";
private AdView adView; 
@Override

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    adView = new AdView(this, AdSize.BANNER, AdMob_Ad_Unit); 
    LinearLayout layout = super.root;
    layout.addView(adView); 
    AdRequest request = new AdRequest();
    adView.loadAd(request); 
    super.loadUrl("http://bbmbabes.com/mobile.html");
    WebSettings ws = super.appView.getSettings();
    ws.setDefaultZoom(WebSettings.ZoomDensity.FAR);

}

} 
```

我将应用程序设置为远放大密度并且它可以工作，但它也会使 Admob 广告缩小。当广告更改为新广告时，它会使所有内容都放大。有没有办法将缩放设置为仅影响网站而不影响广告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T05:38:48.187

您可以使用 iScroll，它只有 div 的缩放功能。虽然我还没有使用它。

你也可以试试 Hammer.js，它有缩放功能

这是该人使用锤子实现缩放的链接 [http://www.appliness.com/multitouch-with-hammer-js/](http://www.appliness.com/multitouch-with-hammer-js/)

# python - 需要将字符串列表转换为普通数字列表，字符串以 10 为底

> ID：12997807
> 
> 赞同：2
> 
> 时间：2012-10-21T12:28:15.983
> 
> 标签：python, string, list

我有一个看起来像这样的整数列表：

```
["1e-04", "1e-06", "1e-08", "1e-10", "1e-12"] 
```

我需要将此字符串列表转换为普通数字列表，但以 10 为底让我卡住了。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T12:29:48.647

```
>>> import ast
>>> L = ["1e-04", "1e-06", "1e-08", "1e-10", "1e-12"]
>>> [ast.literal_eval(x) for x in L]
[0.0001, 1e-06, 1e-08, 1e-10, 1e-12] 
```

或者干脆..

```
>>> [float(x) for x in L]
[0.0001, 1e-06, 1e-08, 1e-10, 1e-12] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T14:03:48.757

我会使用`map`和`float`：

```
>>> values_as_strings = ["1e-04", "1e-06", "1e-08", "1e-10", "1e-12"
>>> values_as_floats = map(float, values_as_strings)
>>> print values_as_floats
[0.0001, 1e-06, 1e-08, 1e-10, 1e-12] 
```

见[地图](http://docs.python.org/library/functions.html#map)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T05:32:39.810

a=[eval(i) for i in a] # 这里 a 是列表

这个列表理解将解决它

# c# - 如何根据 Razor 中的某些条件向 div 元素添加一些类？

> ID：12997812
> 
> 赞同：-1
> 
> 时间：2012-10-21T12:28:41.263
> 
> 标签：c#, asp.net-mvc-3, razor

我对 Razor 语法很困惑）））例如我有一个元素：

```
<div class="category-block">

</div> 
```

我有一个参数

`string viewMode = Html.ViewContext.HttpContext.Request.QueryString["view"];`

我需要使用类将`list-block`类添加到我的 div 元素`category-block`并获取

```
<div class="category-block list-block">

</div> 
```

**如果**

`viewMode != null && viewMode.Equals("list", StringComparison.OrdinalIgnoreCase)`.

我尝试做类似的事情：

```
<div class="category-block @(viewMode != null && viewMode.Equals("list", StringComparison.OrdinalIgnoreCase)) ? list-block : string.Empty "> 
```

但是每次我遇到很多语法错误时......我不知道是否可以在打开的属性括号内写一些东西；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T12:31:57.907

你有你的决赛）在错误的地方。此外，您需要在`list-block`.

```
<div class="category-block @(viewMode != null && viewMode.Equals("list", StringComparison.OrdinalIgnoreCase) ? "list-block" : string.Empty)"> 
```

此外，如果您要在这样的视图中进行大量字符串比较，我建议您创建一个辅助方法，这样您就不必`string.Equals(str, StringComparison.OrdinalIgnoreCase)`每次都使用详细信息。

# java - 读取大txt文件时模拟器上的OutOfMemoryError

> ID：12997813
> 
> 赞同：2
> 
> 时间：2012-10-21T12:28:47.080
> 
> 标签：java, android

我有一个包含超过 200k 行的大 txt 文件。每行1个字。我需要从这个文件中加载所有单词，它在我的 Nexus 7 上工作正常，但是当我尝试在模拟器上启动我的应用程序时，我得到了 OutOfMemoryError。问题可能出在哪里？我想确保手机用户不会出现这样的错误。

```
 public static ArrayList<String> getWords(Context context) throws IOException {

    ArrayList<String> words = new ArrayList<String>(300000);

    InputStream is = context.getAssets().open("words.txt");
    BufferedReader br = new BufferedReader(new InputStreamReader(is));

    String word;
    while ((word = br.readLine()) != null) {
        words.add(word.toUpperCase());
    }

    is.close();
    br.close();

    return words;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T12:43:48.277

不建议在内存中加载这么大的文件，因为您无法确定 android 设备上可用的硬件资源。

我建议您改用 sqlite 数据库。它不仅可以让您加载数据，还可以方便地进行搜索和修改操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T13:25:01.600

如果您真的希望它在模拟器中工作，您可以增加 RAM 大小。

您可以在创建 AVD 映像时执行此操作（“硬件”选项中有“最大 VM 应用程序堆大小”选项）。此值的默认值为 24，您需要设置 256 或更高。

这是针对您特定问题的解决方案，但您考虑使用数据库，正如其他答案所建议的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T13:02:50.837

200K对于android设备来说比较大，所以你必须使用db。

但我认为你的问题是另一回事。您是否增加了模拟器内存​​（设备内存大小）？

# php - 如何用php输出ucs2_unicode数据

> ID：12997814
> 
> 赞同：0
> 
> 时间：2012-10-21T12:28:53.040
> 
> 标签：php, codeigniter, utf-16

我被困在一个需要外语字符的项目上。我需要输入这些并将它们存储在数据库中，并将它们从数据库输出到屏幕。

例如，我有这个字符串`Kupon obuhvaća:`，`Kupon obuhvaÄ‡a:`当我输出它时显示。

你有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:33:41.090

抱歉，原来是因为我的框架（codeigniter）设置为 utf-8 。当我在发布问题后找到正确的答案时讨厌它（*尴尬*）

# android - android在手机睡眠时显示活动

> ID：12997820
> 
> 赞同：0
> 
> 时间：2012-10-21T12:30:08.077
> 
> 标签：android, android-activity

我有一个广播接收器，他的工作是打开一个活动。（特别是当我收到某条短信时）。当我的手机开机并使用它时，它工作得很好。
但是当我的手机处于睡眠模式时，什么也没有发生。
我是否需要在我的广播接收器中添加一个代码来唤醒手机并释放屏幕锁定（如果有）然后打开活动？
还是有更好的解决方案？

这是广播接收器 onReceive 函数中的相关代码：

```
 //Create a new PendingIntent and add it to the AlarmManager
Intent intent = new Intent(context, Alarm.class);
intent.putExtra("coordinates", coordinates);
PendingIntent pendingIntent = PendingIntent.getActivity(context,
    0, intent, PendingIntent.FLAG_ONE_SHOT);
AlarmManager am = (AlarmManager)context.getSystemService(Activity.ALARM_SERVICE);
am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + 100, pendingIntent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:12:09.573

您将需要使用 WakeLock 来完成此操作。

这个特定的教程帮助了我：http: [//it-ride.blogspot.com/2010/10/android-implementing-notification.html](http://it-ride.blogspot.com/2010/10/android-implementing-notification.html)

以及另一个更好的关于唤醒锁的教程：[https ://github.com/commonsguy/cwac-wakeful](https://github.com/commonsguy/cwac-wakeful)

# image - 从不同浏览器上传到富文本字段时图像损坏

> ID：12997823
> 
> 赞同：0
> 
> 时间：2012-10-21T12:30:24.100
> 
> 标签：image, upload, lotus-notes, xpages, rich-text-editor

我对上传到富文本字段的图像有疑问。看起来我会得到不同的结果，具体取决于我是使用 pc 还是 mac 上传文件，如果我使用 firefox、IE 或 Chrome 会得到不同的结果。

我在 xpages 中使用标准 rt 编辑器，所有浏览器的最新版本和 Domino 的最新版本

![在此处输入图像描述](../Images/ec86c5be1cb28a5ab3ecb809a559d9f6.png)

我使用富文本字段中的按钮将图像发送到服务器

下面的图片网址在不同的浏览器中给了我不同的结果。

[http://www.intrapages.com/intratest.nsf/xsp/.ibmmodres/persistence/DominoDoc-64295-Body/Image4_1350761259985.gif](http://www.intrapages.com/intratest.nsf/xsp/.ibmmodres/persistence/DominoDoc-64295-Body/Image4_1350761259985.gif)

使用 chrome 上传的图片

*   铬：它工作正常
*   Firefox：出现错误（见图）
*   IE：不显示图像

使用 Firefox 上传的图片

*   火狐：它工作正常
*   Chrome：不显示图像
*   IE：不显示图像

![火狐](../Images/b96ddab340b59407431bf386aa2a5cc5.png)

发生了什么事，我该如何解决这个问题，以便我上传的图像在所有浏览器中都能正常工作。[如果您使用博客部分并在此 URL http://demo.intrapages.com](http://demo.intrapages.com)上使用 Firefox 和 chrome 将图像添加到新博客条目，您可以自己尝试这个问题（使用演示登录）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:26:40.627

有趣的问题——如果你只是指向它生成的图像 URL，图像本身在其他浏览器中不可用——它是否具有由当前用户的会话 ID 定义的某种安全性？因为一旦我清除缓存，图像就会从所有浏览器中完全消失。

这是我在网上找到的：

[http://www-10.lotus.com/ldd/nd85forum.nsf/0/adcf7c4dbe1b754c8525789000631691?OpenDocument](http://www-10.lotus.com/ldd/nd85forum.nsf/0/adcf7c4dbe1b754c8525789000631691?OpenDocument)

更新：

在后端表单 rtf 字段中将商店内容设置为 HTML 和 mime 对我有用，如下所述：http: [//devxpages.blogspot.co.uk/2011/03/display-picture-from-rich-text-field.html](http://devxpages.blogspot.co.uk/2011/03/display-picture-from-rich-text-field.html) . 祝你好运，请让我们知道它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:53:19.493

我使用了两个基于渲染/加载属性显示的 ritchtext 控件。我删除了其中一个并将第二个添加到另一个页面，现在它工作正常。

# facebook - Facebook JSDK 在用户的朋友墙上发布

> ID：12997826
> 
> 赞同：0
> 
> 时间：2012-10-21T12:30:36.190
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我正在尝试通过 javascript SDK 在用户的朋友墙上发帖。基本功能是用户创建团队并邀请他/她的朋友加入。

假设我获得了具有所有所需权限的适当访问令牌。

现在，在用户选择了一个朋友之后（为了简单起见，现在这是一个 id 为 12345678 的用户），我称之为：

```
FB.api('/12345678/feed', 'post', {
        name: 'Test post',
        caption: 'Test caption',
        link: 'https://my.example.com/invite/',
        description: 'Join my awesome team',
        message: 'Join my awesome team'
    },function(response) {console.log(response);}); 
```

我的问题是，即使我成功取回了帖子 ID，所选用户的墙上也没有显示任何内容。如果我通过 Graph API 资源管理器手动使用 SAME 访问令牌发布到用户的提要，它就可以工作。

我做错了什么？为什么我不能通过我的应用程序发送这个，但我可以使用 Graph API 发送消息？两者都是我尝试向其发送消息的“朋友”未经批准的应用程序？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:38:03.760

尝试在您的个人资料上发布然后检查。

默认情况下，您发布的帖子可能只显示给我。

去`facebook.com/developers/`

选择您的应用程序。

单击左侧的权限。

然后检查默认活动隐私公开。

并在基本设置中检查沙箱是启用还是禁用。应该禁用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:58:57.200

1）在测试 Facebook 个人资料上发帖并通过该个人资料登录以检查帖子，问题可能与隐私有关 2）`https://www.facebook.com/{profile_id}/posts/{post_id}`替换此 url 中的 profile_id 和 post_id 并访问此 url 以查看它显示的内容。3）如果一切正常，请再次检查您的配置（切换沙盒模式并检查是否有任何区别）

顺便说一句，Facebook 计划删除通过 Graph API 向朋友墙发帖的功能，请查看开发者路线图 --> [https://developers.facebook.com/roadmap/](https://developers.facebook.com/roadmap/)。几个月后，此功能将无法使用。

# facebook - 社交按钮导致缓慢

> ID：12997835
> 
> 赞同：0
> 
> 时间：2012-10-21T12:32:22.163
> 
> 标签：facebook, twitter, facebook-like, facebook-javascript-sdk, pinterest

我在一个 WordPress 博客上实现了 Facebook 的点赞按钮、Twitter 按钮和 Pinterests 按钮，每页有 20 个帖子。问题是使用按钮时页面加载速度非常慢，5-10 秒内我无法滚动。如果我看一下 Chrome 的控制台，我会看到抛出了很多 JavaScript 错误，而且所有这些错误看起来都像这样

```
Unsafe JavaScript attempt to access frame with URL https://www.mysite.com/blog/?cat=1 from frame with URL https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=11#channel=f5468fe14&origin=https%3A%2F%2Fwww.mysite.com&channel_path=%2Fblog%2F%3Fcat%3D1%26fb_xd_fragment%23xd_sig%3Df17b68bb04%26\. Domains, protocols and ports must match. 
```

现在我假设如果我摆脱所有这些错误，无响应的页面（加载时无法滚动）将得到解决。问题是我不知道是什么原因造成的。

上面的示例仅适用于 Facebook，但 Pinterest 和 Twitter 按钮也会引发很多错误。

由于该页面也有 Facebook 登录，我尝试注释掉所有代码，但结果相同。

我正在使用在此 URL 上找到的 Facebooks API

```
https://connect.facebook.net/sv_SE/all.js 
```

# logic - 逻辑等价 - 或门和蕴涵

> ID：12997836
> 
> 赞同：1
> 
> 时间：2012-10-21T12:32:28.280
> 
> 标签：logic, equivalence, implication

我目前正在回答一个逻辑等价问题，并希望确认我曾经使用过的规则，因为它不在法律列表中，大概是因为它是“你应该知道的事情”。

我的部分工作将`(NOT(p) OR NOT(q)) OR r == (NOT(p) OR r) OR (NOT(q) OR r)`
在以后简化为`(p implies r) OR (q implies r)`

构造真值表也通过LogicWorks构造我认为两者在逻辑上是等价的，但是我在第一部分使用的法则是什么？联想？

**编辑：**
我意识到`LHS`and`RHS`可能在逻辑上是等价的，但我可能错过了一步吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:49:59.007

```
p => r = (¬p) ∨ r 
q => r = (¬q) ∨ r
(p => r) ∨ (q => r) = ((¬p) ∨ r) ∨ ((¬q) ∨ r)
(p => r) ∨ (q => r) = (¬p) ∨ (¬q) ∨ r ∨ (¬q) ∨ r ∨ (¬p) ∨ r∨r -- distribution
(p => r) ∨ (q => r) = (¬p) ∨ (¬q) ∨ r -- elimination of duplicates 
```

# php - Internet Explorer 中不显示自动完成功能

> ID：12997845
> 
> 赞同：0
> 
> 时间：2012-10-21T12:33:55.733
> 
> 标签：php, jquery, mysql, css

我观看了一个视频，该视频描述了如何在输入中实现自动完成。最后，我在 Firefox 和 chrome 中进行了测试，它运行良好，除了在 Internet Explorer 中：这是下面的代码：

jQuery：

```
function getSuggestions(value){
        if(value!=''){  
                $.get('suggest.php', {requestKword:value}, function (data){
                            $('#suggestions').show();
                            $('#suggestions').html(data);
                            doCSS();
                    });
        }
        else{
            removeSuggestions();
        }
}
function removeSuggestions(){
    $("#suggestions").html("");
    undoCSS();
}   
function fill(thisValue) {
    $('#ii').val(thisValue);
    setTimeout("$('#suggestions').hide();", 200);
}
function doCSS(){
$("#suggestions").css({
    'border' : 'solid',
    'border-width':'1px',
    'position': 'relative'
    });
}
function undoCSS(){
$("#suggestions").css({
    'border' : '',
    'border-width':''
    });
}
function addText(value){
        $("#ii").val(value);
} 
```

CSS：

```
#suggestions{
text-align:left;
padding-left:5px;
font-size:14px;
}
#link:hover{ background-color:#f0f0f0; cursor:default;} 
```

html：

```
<form action="/" method="get" id="set" name="set">
<input id="ii" type="text" name="q" size="96px"  value=""  onblur="fill();"  onkeyup="getSuggestions(this.value)"  /><br />
<div id="suggestions"></div>
</form> 
```

mysql：建议.php

```
mysql_connect('localhost', 'root', '');
mysql_select_db('keywords') or die (mysql_error());
$keyword=mysql_real_escape_string($_GET['requestKword']);
$result = mysql_query("SELECT * FROM `table`.`keys` where `column` like '$keyword%' LIMIT 0 , 10") or die (mysql_error());
while($row = mysql_fetch_assoc($result)){
    echo '<div id="link" onclick="addText(\''.$row['keyword'].'\')" ">'.$row['keyword'].'</div>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:12:35.023

请看看这是否适合你...

将这些行添加到您的 jQuery 代码中：

```
$("#ii").keyup(function() {
  getSuggestions(this.value);
});

$("#ii").blur(function(){
  fill();
}); 
```

替换以下 HTML 行：

```
<input id="ii" type="text" name="q" size="96px"  value=""  onblur="fill();"  onkeyup="getSuggestions(this.value)"  /><br /> 
```

和：

```
<input id="ii" type="text" name="q" size="96px"  value="" /><br /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:22:40.580

您可能需要在此处考虑 jQuery 自动完成插件：http: [//jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)。它有很好的工作演示；尖端 ....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:03:18.980

最后我找到了解决方案，它非常简单：

我在 php 代码中添加了一些 sode：

前 ：

```
mysql_connect('localhost', 'root', '');
mysql_select_db('keywords') or die (mysql_error());
$keyword=mysql_real_escape_string($_GET['requestKword']);
$result = mysql_query("SELECT * FROM `table`.`keys` where `column` like '$keyword%' LIMIT 0 , 10") or die (mysql_error());
while($row = mysql_fetch_assoc($result)){
echo '<div id="link" onclick="addText(\''.$row['keyword'].'\')" ">'.$row['keyword'].'</div>';
} 
```

后 ：

```
mysql_connect('localhost', 'root', '');
mysql_select_db('keywords') or die (mysql_error());
$keyword=mysql_real_escape_string($_GET['requestKword']);
$result = mysql_query("SELECT * FROM `table`.`keys` where `column` like '$keyword%' LIMIT 0 , 10") or die (mysql_error());

if($result) 
{
   while($row = mysql_fetch_assoc($result)){
   echo '<div id="link" onclick="addText(\''.$row['keyword'].'\')" ">'.$row['keyword'].'</div>';
   }
} 
```

# java - CharSequence ArrayList 到 charSequence 转换

> ID：12997852
> 
> 赞同：2
> 
> 时间：2012-10-21T12:34:29.100
> 
> 标签：java, android

存在类转换问题。请告诉我如何铸造这个。我想`ArrayList<CharSequence>`在我`CharSequence[]`命名的`Contacts`.

`java.lang.ClassCastException`（在安卓中）：

```
CharSequence[] Contacts;
List<CharSequence> contacts = new ArrayList<CharSequence>();

Contacts = (CharSequence[]) contacts.toArray();

for(CharSequence p : contacts) {
    Log.i("log_tag", "AAAAAAAAAAAAAAAAAAA" + p);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T12:37:20.963

试试这个：

```
Contacts = contacts.toArray(new CharSequence[contacts.size()]); 
```

虽然，我建议您重命名`Contacts`为其他名称，也许`contactsArray`. 这有两个原因：**1)** Java 变量名通常以小写字母开头。**2)**你有另一个名为 的变量`contacts`，定义第二个是`Contacts`将使代码更难阅读和理解，因为这两个名称*仅*在第一个字母的大小写上有所不同。

* * *

相关文件：

*   [`toArray`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#toArray%28T%5B%5D%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T12:37:30.187

`toArray()`返回一个类型的数组`Object[]`。和是不同的类型`Object[]`。`CharSequence[]`如果你想要一个数组`CharSequence`，你必须使用下面的代码：

```
contactArray = contacts.toArray(new CharSequence[contacts.size()]); 
```

有关更多详细信息，请参阅[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#toArray%28T%5B%5D%29)。

请注意，这`Contacts`违反了 Java 命名约定，并且有两个变量，一个是 named `contacts`，另一个是 named `Contacts`，这确实是个坏主意（除非您希望代码尽可能不可读）。

# javascript - 到达一个 JS DOM 对象？

> ID：12997858
> 
> 赞同：1
> 
> 时间：2012-10-21T12:36:23.970
> 
> 标签：javascript, dom, tinymce

我一直在尝试访问 DOM 对象中的子节点，但无法访问。

我在`console.log(tinymce.editors);`Chrome 开发工具控制台中得到以下信息：

![在此处输入图像描述](../Images/62cbac025c71bc9f03df9c7900dbe05d.png)

我希望能够访问 dom -> doc -> anchors 对象。但是，如果我尝试这样做，`console.log(tinymce.editors.dom.doc.anchors);`我只会得到

> 未捕获的类型错误：无法读取未定义的属性“doc”

实际上比 更进一步`console.log(tinymce.editors);`，例如做`console.log(tinymce.editors.dom);`结果

> 不明确的

我究竟做错了什么？我如何到达 JS 对象的未来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:39:21.743

`editors`是一个数组，如`[`控制台输出的第一行所示。您可以使用访问第一个元素的属性

```
console.log(tinymce.editors[0].dom); 
```

和

```
console.log(tinymce.editors[0].dom.doc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:53:33.060

您还可以使用以下方式访问编辑器对象

```
editor = tinymce.get(0); // or
editor = tinymce.get('your_editor_id');

console.log(tinymce.get(0).dom); 
```

通常应该努力获取 dom 对象。使用我的 Chrome 浏览器 javascript 控制台可以正常工作。

# .net - WCF 服务将 50K 对象传输到客户端

> ID：12997864
> 
> 赞同：0
> 
> 时间：2012-10-21T12:37:44.530
> 
> 标签：.net, wcf

即使在阅读了很多关于 WCF 的内容之后，我仍然不清楚对于如下所示的非常常见的场景来说，最好的方法是什么

客户端是一个 Windows 桌面应用程序，它调用 WCF 服务。（使用 .NET TCP 绑定，每个会话）。该服务需要返回超过 50K 的对象。*例如。List* - Trade 类有大约 20 个简单的属性。

我正在考虑使用“TransferMode = Streamed”，但在这种情况下我将失去“PerSession”实例。

我正在为这些常见场景寻找一些设计解决方案和一些最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:46:15.980

这里最好的方法是始终确保您不必返回如此大量的数据。该技术称为延迟加载 - 这意味着您只加载用户必须与之交互的那么多数据。

一个好的架构师应该考虑互联网和与服务连接的不同设备的限制，并考虑到它们，你应该采用最小可用的方法。

# c++ - C/C++ 和 GNU/PGI：对 `__pgio_ini' 的未定义引用

> ID：12997865
> 
> 赞同：0
> 
> 时间：2012-10-21T12:37:52.677
> 
> 标签：c++, c, gnu, openacc, pgi

有没有办法将 PGI 编译器二进制文件链接到现有的 GNU 二进制文件？当我尝试链接时，出现以下错误：

```
oacc.c.o:(.init+0x8): undefined reference to `__pgio_ini'
collect2: ld returned 1 exit status 
```

**细节：**

我用 gcc 和 g++ 编译了一些文件。C`main`函数包含在这些文件中。现在我应该在项目中添加一个 OpenACC 函数，该函数必须由 PGI C Compiler ( `pgcc`) 编译。编译后，出现上述链接错误（两者`pgCC`或`g++`链接器的错误相同）。

*也许我需要将 OpenACC 函数集成到一个虚拟库中并将其包含/链接到项目中。但我不知道该怎么做。*

不幸的是，无法使用 PGI 编译器编译整个项目，因为某些功能依赖于 GNU 编译器。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:52:41.713

较新版本的基于 GCC 的 GNU 工具链要求以符号相互依赖的顺序指定要链接的文件（目标文件以及静态和动态库）。因此，您必须将外部库的链接器标志作为最后一个参数：

```
gcc -o prog prog.o -lfoo 
```

是正确的，而

```
gcc -o prog -lfoo prog.o 
```

将导致链接器错误。

# http - HTTP 处理程序的 URI 部分中的第一个字符是否始终是正斜杠？

> ID：12997867
> 
> 赞同：1
> 
> 时间：2012-10-21T12:37:54.650
> 
> 标签：http, url, sinatra, uri, nancy

我们正在我们的项目中实现一个 HTTP 请求处理程序子系统。HTTP RFC 说绝对路径不能为空；如果原始 URI 中不存在任何内容，则必须将其指定为“/”（服务器根目录）。

### 问题：

这是否意味着这两个浏览器请求保证会产生相同的http请求动词、uri和host？

浏览器请求 1：

```
http://www.foo.com/ 
```

浏览器请求 2：

```
http://www.foo.com 
```

Http请求（未测试，但我假设是这种情况）：

```
GET / HTTP/1.1
Host: www.foo.com 
```

### 跟进问题：

如果上述假设是正确的，是否保证正斜杠始终是正确 HTTP 请求中路径的第一个字符？

最后一个问题：在像 Ruby Sinatra 这样的框架中，是否可以安全地假设用户应该始终以正斜杠开头他或她的处理程序？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-01T06:42:42.537

*跟进问题：*

据我所知：

[http://www.foo.com/path](http://www.foo.com/path)

[http://www.foo.com/path/](http://www.foo.com/path/)

是两个不同的 URL

一条 Sinatra 路线：

/小路

不会映射到对带有尾随 / 的 URL 的请求

然而，在 Nancy 中，是否存在尾部正斜杠并不重要。

* * *

*问题：*

如果您为

小路

它将以相同的方式从基本 URL 映射

/小路

会映射。

基本上两者是相同的。

然而，我个人的偏好是始终使用前导正斜杠，因为这就像说“根 URL 后跟我定义的路由”。

# sdl - HW_SURFACE 上的 SDL 双缓冲

> ID：12997870
> 
> 赞同：1
> 
> 时间：2012-10-21T12:38:03.453
> 
> 标签：sdl, flags, doublebuffered

我不明白为什么我的 SDL 应用程序不会按照我的要求设置 DOUBLE_BUF；

这是一个简短的代码，它在不带参数的情况下执行，以 32 BPP 模式打开一个全屏窗口 1024*768。

```
#include <stdio.h>
#include <stdlib.h>
#include <SDL/SDL.h>

#include "main.h"

SDL_Surface *screen;
Main mainstruct;

void testModesInFormat(SDL_PixelFormat * format)
{

    SDL_Rect **modes;
    int i;

    printf("Available hardware accelerated, fullscreen modes in %d bpp:\n",
           format->BitsPerPixel);

    modes = SDL_ListModes(format, SDL_FULLSCREEN | SDL_HWSURFACE | SDL_DOUBLEBUF);

    // Check is there are any modes available
    if(modes == (SDL_Rect **) 0)
    {
        printf("\tNo modes available!\n");
        return;
    }

    // Check if our resolution is restricted
    if(modes == (SDL_Rect **) - 1)
    {
        printf("\tAll resolutions available.\n");
    }
    else
    {
        // Print valid modes
        for(i = 0; modes[i]; ++i)
            printf("\t%d x %d\n", modes[i]->w, modes[i]->h);
    }

    free(modes);

}

void testModes()
{
    SDL_PixelFormat format;
    format.BitsPerPixel = 16;
    testModesInFormat(&format);
    format.BitsPerPixel = 24;
    testModesInFormat(&format);
    format.BitsPerPixel = 32;
    testModesInFormat(&format);
}

int main(int argc, char *argv[])
{

    printf("Hello world!\n");
    Uint32 flags = SDL_DOUBLEBUF;
    int w, h, bpp;
    int i;
    int hw_mem = 1;
    w = 1024;
    h = 768;
    bpp = 32;

    mainstruct.full_screen = 1;

    if(SDL_Init(SDL_INIT_AUDIO | SDL_INIT_VIDEO) < 0)
    {
        fprintf(stderr, "Unable to init SDL: %s\n", SDL_GetError());
        exit(1);
    }
    atexit(SDL_Quit);

    for(i = 0; i < argc; i++)
    {
        if(!strcmp(argv[i], "--window"))
        {
            mainstruct.full_screen = 0;
        }
        else if(!strcmp(argv[i], "--no-hardwarememory") || !strcmp(argv[i], "-nohw"))
        {
            hw_mem = 0;
        }
        else if(!strcmp(argv[i], "--test") || !strcmp(argv[i], "-t"))
        {
            testModes();
            exit(0);
        }
    }

    if(hw_mem)
    {
        flags |= SDL_HWSURFACE;
    }
    else
    {
        flags |= SDL_SWSURFACE;
    }
    if(mainstruct.full_screen)
    {
        flags |= SDL_FULLSCREEN;
    }
    fprintf(stderr, "Attempting to set %dx%dx%d video mode.\n", w, h, bpp);
    fflush(stderr);
    screen = SDL_SetVideoMode(w, h, bpp, flags);
    if(screen == NULL)
    {
        fprintf(stderr, "Unable to set %dx%dx%d video: %s\n", w, h, bpp,
                SDL_GetError());
        exit(1);
    }
    fprintf(stderr, "Success:\n");
    fprintf(stderr, "\tSDL_HWSURFACE =%s\n",
            (screen->flags & SDL_HWSURFACE ? "true" : "false"));
    fprintf(stderr, "\tSDL_FULLSCREEN=%s\n",
            (screen->flags & SDL_FULLSCREEN ? "true" : "false"));
    fprintf(stderr, "\tSDL_DOUBLEBUF =%s\n",
            (screen->flags & SDL_DOUBLEBUF ? "true" : "false"));
    fprintf(stderr, "\tw=%d h=%d bpp=%d pitch=%d\n", screen->w, screen->h,
            screen->format->BitsPerPixel, screen->pitch);
    fflush(stderr);
    return 0;
} 
```

如您所见， args 是；--window 禁用全屏 --no-hardwarememory 设置 SDL_SWSURFACE 代替 SDL_HWSURFACE --test 调用 testModes() 函数

所以这是我的输出；

没有参数（标志是 "SDL_DOUBLEBUF | SDL_HWSURFACE | SDL_FULLSCREEN" ）我明白了；

```
Attempting to set 1024x768x32 video mode.
Success:
    SDL_HWSURFACE =false
    SDL_FULLSCREEN=true
    SDL_DOUBLEBUF =false
    w=1024 h=768 bpp=32 pitch=4096 
```

使用 --test 参数，我得到了这个：

```
Available hardware accelerated, fullscreen modes in 16 bpp:
    1920 x 1080
    1768 x 992
    1680 x 1050
    [...]
    640 x 480
Available hardware accelerated, fullscreen modes in 24 bpp:
    No modes available!
Available hardware accelerated, fullscreen modes in 32 bpp:
    1920 x 1080
    1768 x 992
    1680 x 1050
    [...]
    640 x 480 
```

对于那些想要编译它的人，这里是 main.h

```
#ifndef MAIN_H
#define MAIN_H
#include "SDL.h"
#include "SDL_thread.h"

typedef struct _main {
  int full_screen;
} Main;
extern Main mainstruct;

#endif 
```

所以我想了解为什么 DOUBLE_BUF 在 32bpp 全屏模式下不起作用.. 一些想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T17:32:55.507

如果您使用的是 Windows，则问题可能出在：

```
SDL 1.2.10 Release Notes
...
Windows Notes 
  The "windib" video driver is the default now, to prevent problems with 
  certain laptops, 64-bit Windows, and Windows Vista. The DirectX driver is 
  still available, and can be selected by setting the environment variable
  SDL_VIDEODRIVER to "directx".
... 
```

[http://www.libsdl.org/release/changes.html](http://www.libsdl.org/release/changes.html)

添加`SDL_putenv("SDL_VIDEODRIVER=directx");`到您的代码后，程序会打印出：

```
Attempting to set 1024x768x32 video mode.
Success:
    SDL_HWSURFACE =true
    SDL_FULLSCREEN=true
    SDL_DOUBLEBUF =true
    w=1024 h=768 bpp=32 pitch=4096 
```

# download - 使用 HtmlUnit 下载文件

> ID：12997871
> 
> 赞同：12
> 
> 时间：2012-10-21T12:38:02.550
> 
> 标签：download, htmlunit

我正在尝试为网站下载 xls 文件。当我单击链接下载文件时，我得到一个 javascript 确认框。我像下面一样处理它

```
 ConfirmHandler okHandler = new ConfirmHandler(){
            public boolean handleConfirm(Page page, String message) {
                return true;
            }
        };
    webClient.setConfirmHandler(okHandler); 
```

有下载文件的链接。

```
<a href="./my_file.php?mode=xls&amp;w=d2hlcmUgc2VsbElkPSd3b3JsZGNvbScgYW5kIHN0YXR1cz0nV0FJVERFTEknIGFuZCBkYXRlIDw9IC0xMzQ4MTUzMjAwICBhbmQgZGF0ZSA%2BPSAtMTM1MDgzMTU5OSA%3D" target="actionFrame" onclick="return confirm('Do you want do download XLS file?')"><u>Download</u></a> 
```

我点击链接使用

```
HTMLPage x = webClient.getPage("http://working.com/download");
HtmlAnchor anchor = (HtmlAnchor) x.getFirstByXPath("//a[@target='actionFrame']");
anchor.click(); 
```

handeConfirm() 方法被执行。但我不知道如何从服务器保存文件流。我试图用下面的代码查看流。

```
anchor.click().getWebResponse().getContentAsString(); 
```

但是，结果与第 x 页相同。任何人都知道如何从服务器捕获流？谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T23:56:06.730

我找到了一种使用 WebWindowListener 获取 InputStream 的方法。在 webWindowContentChanged（WebWindowEvent 事件）内部，我将代码放在下面。

```
InputStream xls = event.getWebWindow().getEnclosedPage().getWebResponse().getContentAsStream(); 
```

在我得到 xls 后，我可以将文件保存到我的硬盘中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-08-18T18:07:35.810

我是根据您的帖子制作的。注意：您可以更改内容类型条件以仅下载特定类型的文件。例如（应用程序/八进制流、应用程序/pdf 等）。

```
package net.s4bdigital.export.main;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.List;

import org.junit.Before;
import org.junit.Test;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.htmlunit.HtmlUnitDriver;

import com.gargoylesoftware.htmlunit.ConfirmHandler;
import com.gargoylesoftware.htmlunit.Page;
import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.WebResponse;
import com.gargoylesoftware.htmlunit.WebWindowEvent;
import com.gargoylesoftware.htmlunit.WebWindowListener;
import com.gargoylesoftware.htmlunit.util.NameValuePair;

public class HtmlUnitDownloadFile {

    protected String baseUrl;
    protected static WebDriver driver;

    @Before
    public void openBrowser() {
        baseUrl = "http://localhost/teste.html";
        driver = new CustomHtmlUnitDriver();
        ((HtmlUnitDriver) driver).setJavascriptEnabled(true);

    }

    @Test
    public void downloadAFile() throws Exception {

        driver.get(baseUrl);
        driver.findElement(By.linkText("click to Downloadfile")).click();

    }

    public class CustomHtmlUnitDriver extends HtmlUnitDriver { 

          // This is the magic. Keep a reference to the client instance 
           protected WebClient modifyWebClient(WebClient client) { 

             ConfirmHandler okHandler = new ConfirmHandler(){
                    public boolean handleConfirm(Page page, String message) {
                        return true;
                    }
             };
             client.setConfirmHandler(okHandler);

             client.addWebWindowListener(new WebWindowListener() {

                public void webWindowOpened(WebWindowEvent event) {
                    // TODO Auto-generated method stub

                }

                public void webWindowContentChanged(WebWindowEvent event) {

                    WebResponse response = event.getWebWindow().getEnclosedPage().getWebResponse();
                    System.out.println(response.getLoadTime());
                    System.out.println(response.getStatusCode());
                    System.out.println(response.getContentType());

                    List<NameValuePair> headers = response.getResponseHeaders();
                    for(NameValuePair header: headers){
                        System.out.println(header.getName() + " : " + header.getValue());
                    }

                    // Change or add conditions for content-types that you would to like 
                    // receive like a file.
                    if(response.getContentType().equals("text/plain")){
                        getFileResponse(response, "target/testDownload.war");
                    }

                }

                public void webWindowClosed(WebWindowEvent event) {

                }
            });          

             return client; 
           } 

    } 

    public static void getFileResponse(WebResponse response, String fileName){

        InputStream inputStream = null;

        // write the inputStream to a FileOutputStream
        OutputStream outputStream = null; 

        try {       

            inputStream = response.getContentAsStream();

            // write the inputStream to a FileOutputStream
            outputStream = new FileOutputStream(new File(fileName));

            int read = 0;
            byte[] bytes = new byte[1024];

            while ((read = inputStream.read(bytes)) != -1) {
                outputStream.write(bytes, 0, read);
            }

            System.out.println("Done!");

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (inputStream != null) {
                try {
                    inputStream.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            if (outputStream != null) {
                try {
                    // outputStream.flush();
                    outputStream.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }

            }
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-30T21:37:42.673

如果您不打算用 Selenium 包装 HtmlUnit，还有一种更简单的方法。只需为 HtmlUnit 的 WebClient 提供扩展的 WebWindowListener。

您还可以使用 Apache commons.io 轻松进行流复制。

```
WebClient webClient = new WebClient();
webClient.addWebWindowListener(new WebWindowListener() {
    public void webWindowOpened(WebWindowEvent event) { }

    public void webWindowContentChanged(WebWindowEvent event) {
        // Change or add conditions for content-types that you would
        // to like receive like a file.
        if (response.getContentType().equals("text/plain")) {
            try {
                IOUtils.copy(response.getContentAsStream(), new FileOutputStream("downloaded_file"));
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

    }

    public void webWindowClosed(WebWindowEvent event) {}
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-22T14:14:39.763

```
 final WebClient webClient = new WebClient(BrowserVersion.CHROME);
        webClient.getOptions().setTimeout(2000);
        webClient.getOptions().setThrowExceptionOnScriptError(false);
        webClient.getOptions().setThrowExceptionOnFailingStatusCode(false);
        webClient.waitForBackgroundJavaScript(2000);

        //get General page
        final HtmlPage page = webClient.getPage("http://your");

        //get Frame
        final HtmlPage frame = ((HtmlPage) 
        page.getFrameByName("Frame").getEnclosedPage());

        webClient.setConfirmHandler(new ConfirmHandler() {
            public boolean handleConfirm(Page page, String message) {
                return true;
            }
        });

        //get element file
        final DomElement file = mainFrame.getElementByName("File");

        final InputStream xls =  file.click().getWebResponse().getContentAsStream();

        assertNotNull(xls);
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-25T02:54:58.117

扩展罗伊的答案，这是我对这个问题的解决方案：

```
public static void prepareForDownloadingFile(WebClient webClient, File output) {
    webClient.addWebWindowListener(new WebWindowListener() {

        public void webWindowOpened(WebWindowEvent event) {
        }

        public void webWindowContentChanged(WebWindowEvent event) {
            Page page = event.getNewPage();
            FileOutputStream fos = null;
            InputStream is = null;
            if (page != null && page instanceof UnexpectedPage) {
                try {
                    fos = new FileOutputStream(output);
                    UnexpectedPage uPage = (UnexpectedPage) page;
                    is = uPage.getInputStream();
                    IOUtils.copy(is, fos);
                    webClient.removeWebWindowListener(this);
                } catch (Exception e) {
                    e.printStackTrace();
                } finally {
                    try {
                        if (fos != null)
                            fos.close();
                        if (is != null)
                            is.close();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
            }

        }

        public void webWindowClosed(WebWindowEvent event) {
        }
    });
} 
```

我觉得有足够的差异使它成为一个新的答案：
-没有魔术变量（`response`）
-关闭`InputStream`并`FileOutputStream`
-寻找`UnexpectedPage`以确定我们不在 HTML 页面上
-请求后下载文件一次然后将其删除
- 不需要知道`ContentType`

之前调用一次，例如，单击启动下载的按钮，将下载该文件。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-11-07T01:11:13.353

> 找出下载 URL，并在 List 中抓取它。从下载 url，我们可以使用此代码获取整个文件。

```
 try{
        String path = "your destination path";
        List<HtmlElement> downloadfiles = (List<HtmlElement>) page.getByXPath("the tag you want to scrape");
        if (downloadfiles.isEmpty()) {
            System.out.println("No items found !");
        } else {
            for (HtmlElement htmlItem : downloadfiles) {
                String DownloadURL = htmlItem.getHrefAttribute();

                Page invoicePdf = client.getPage(DownloadURL);
                if (invoicePdf.getWebResponse().getContentType().equals("application/pdf")) {
                    System.out.println("creatign PDF:");
                    IOUtils.copy(invoicePdf.getWebResponse().getContentAsStream(),
                            new FileOutputStream(path + "file name"));
                }
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

# objective-c - 在我的应用程序中进行本地化的正确方法

> ID：12997876
> 
> 赞同：3
> 
> 时间：2012-10-21T12:39:08.833
> 
> 标签：objective-c, ios, localization

我读过一些教程，但每个教程都说不同，我真的很困惑。本地化我的应用程序的正确方法是什么？

有人这样说：

```
NSLocalizedString(@"Welcome to app", @"Welcome title label"); 
```

和其他说：

```
NSLocalizedString(@"AppWelcomeMessage", nil); 
```

在 Localizable.strings 中，我需要这样设置：

```
"AppWelcomeMessage" = "Welcome to my application!"; 
```

NSLocalizedString(key,comment) 中的注释是否只是对键的描述？或者它很重要并且对翻译本身有影响？什么是正确的顺序？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T12:41:22.040

> NSLocalizedString(key,comment) 中的注释是否只是对键的描述？

是的。如果您不需要它，请随意忽略它（传入`nil`）。

事实上，当在代码中编写大量可本地化的字符串时，`NSLocalizedString(@"Some Key", @"Some Comment")`每次都拼写出来会很烦人。我通常做的是

```
#define L(k) NSLocalizedString(k, nil) 
```

本地化我的应用程序突然变得很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:43:58.610

中的注释`NSLocalizedString`供使用`genstrings`。`nil`如果您自己进行所有本地化，则可以离开它。否则，您应该努力添加一条有意义的信息，以帮助为您进行本地化的人员。提高他们对翻译环境的理解会直接影响您将要获得的翻译质量。

# java - 构建 GCM 演示服务器应用程序时遇到问题

> ID：12997880
> 
> 赞同：8
> 
> 时间：2012-10-21T12:40:19.290
> 
> 标签：java, android, ant, google-cloud-messaging

每当我尝试[从文档](http://developer.android.com/google/gcm/server.html)中使用构建 GCM 演示服务器时`ant`，都会出现 17 个编译错误。似乎缺少一些 GCM 库。我该如何解决这些问题？

```
 Errors:

  Buildfile: build.xml

init:

compile:
    [javac] Compiling 7 source files to /root/gcm/samples/gcm-demo-server/build/classes
    [javac] /root/gcm/samples/gcm-demo-server/src/com/google/android/gcm/demo/server/SendAllMessagesServlet.java:18: package com.google.android.gcm.server does not exist
    [javac] import com.google.android.gcm.server.Constants;
    [javac]                                     ^
    [javac] /root/gcm/samples/gcm-demo-server/src/com/google/android/gcm/demo/server/SendAllMessagesServlet.java:19: package com.google.android.gcm.server does not exist
    [javac] import com.google.android.gcm.server.Message;
    [javac]                                     ^
    [javac] /root/gcm/samples/gcm-demo-server/src/com/google/android/gcm/demo/server/SendAllMessagesServlet.java:20: package com.google.android.gcm.server does not exist
    [javac] import com.google.android.gcm.server.MulticastResult;
    [javac]                                     ^
    [javac] /root/gcm/samples/gcm-demo-server/src/com/google/android/gcm/demo/server/SendAllMessagesServlet.java:21: package com.google.android.gcm.server does not exist
    [javac] import com.google.android.gcm.server.Result;
    [javac]                                     ^
    [javac] /root/gcm/samples/gcm-demo-server/src/com/google/android/gcm/demo/server/SendAllMessagesServlet.java:22: package com.google.android.gcm.server does not exist
    [javac] import com.google.android.gcm.server.Sender;
    [javac]                                     ^
    [javac] /root/gcm/samples/gcm-demo-server/src/com/google/android/gcm/demo/server/SendAllMessagesServlet.java:46: cannot find symbol
    [javac] symbol  : class Sender
    [javac] location: class com.google.android.gcm.demo.server.SendAllMessagesServlet
    [javac]   private Sender sender;
    [javac]           ^
    [javac] /root/gcm/samples/gcm-demo-server/src/com/google/android/gcm/demo/server/SendAllMessagesServlet.java:59: cannot find symbol
    [javac] symbol  : class Sender
    [javac] location: class com.google.android.gcm.demo.server.SendAllMessagesServlet
    [javac]   protected Sender newSender(ServletConfig config) {
    [javac]             ^
    [javac] /root/gcm/samples/gcm-demo-server/src/com/google/android/gcm/demo/server/SendAllMessagesServlet.java:62: cannot find symbol
    [javac] symbol  : class Sender
    [javac] location: class com.google.android.gcm.demo.server.SendAllMessagesServlet
    [javac]     return new Sender(key);
    [javac]                ^
    [javac] /root/gcm/samples/gcm-demo-server/src/com/google/android/gcm/demo/server/SendAllMessagesServlet.java:81: cannot find symbol
    [javac] symbol  : class Message
    [javac] location: class com.google.android.gcm.demo.server.SendAllMessagesServlet
    [javac]         Message message = new Message.Builder().build();
    [javac]         ^
    [javac] /root/gcm/samples/gcm-demo-server/src/com/google/android/gcm/demo/server/SendAllMessagesServlet.java:81: package Message does not exist
    [javac]         Message message = new Message.Builder().build();
    [javac]                                      ^
    [javac] /root/gcm/samples/gcm-demo-server/src/com/google/android/gcm/demo/server/SendAllMessagesServlet.java:82: cannot find symbol
    [javac] symbol  : class Result
    [javac] location: class com.google.android.gcm.demo.server.SendAllMessagesServlet
    [javac]         Result result = sender.send(message, registrationId, 5);
    [javac]         ^
    [javac] /root/gcm/samples/gcm-demo-server/src/com/google/android/gcm/demo/server/SendAllMessagesServlet.java:115: cannot find symbol
    [javac] symbol: class Message
    [javac]         Message message = new Message.Builder().build();
    [javac]         ^
    [javac] /root/gcm/samples/gcm-demo-server/src/com/google/android/gcm/demo/server/SendAllMessagesServlet.java:115: package Message does not exist
    [javac]         Message message = new Message.Builder().build();
    [javac]                                      ^
    [javac] /root/gcm/samples/gcm-demo-server/src/com/google/android/gcm/demo/server/SendAllMessagesServlet.java:116: cannot find symbol
    [javac] symbol: class MulticastResult
    [javac]         MulticastResult multicastResult;
    [javac]         ^
    [javac] /root/gcm/samples/gcm-demo-server/src/com/google/android/gcm/demo/server/SendAllMessagesServlet.java:123: cannot find symbol
    [javac] symbol: class Result
    [javac]         List<Result> results = multicastResult.getResults();
    [javac]              ^
    [javac] /root/gcm/samples/gcm-demo-server/src/com/google/android/gcm/demo/server/SendAllMessagesServlet.java:127: cannot find symbol
    [javac] symbol: class Result
    [javac]           Result result = results.get(i);
    [javac]           ^
    [javac] /root/gcm/samples/gcm-demo-server/src/com/google/android/gcm/demo/server/SendAllMessagesServlet.java:140: cannot find symbol
    [javac] symbol: variable Constants
    [javac]             if (error.equals(Constants.ERROR_NOT_REGISTERED)) {
    [javac]                              ^
    [javac] 17 errors

BUILD FAILED 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T12:45:55.313

我自己从未运行过这个项目，但它看起来缺少 extras\google\gcm\gcm-server\dist\gcm-server.jar 及其依赖项中的库。将这些添加到该项目下的 libs 文件夹中，然后重试。

# sql-server - SQL Server：按字符串连接分组

> ID：12997884
> 
> 赞同：3
> 
> 时间：2012-10-21T12:40:47.057
> 
> 标签：sql-server, group-by, concatenation, for-xml-path

我有个问题。我知道以前有人问过。我查看了相关问题，但无法让我的 SQL 脚本正常工作。

这是我的查询：

```
SELECT T1.PART_ID, T2.ID, T2.DESCRIPTION
FROM #TEMP T1 
INNER JOIN #TEMP2 T2 ON T1.PART_ID = T2.PART_ID
ORDER BY T2.ID 
```

桌子：

```
PART_ID |  ID        |    DESCRIPTION
----------------------------------
10002   |  1182505   |   Tagfahrlichtschaltung
80029   | 1182505    |   Bluetooth
20004   | 1212866    |    Kindersitzbefestigung
10045   |  1212866   |    Lederlenkradrriegelung
11908   |  1257946   |    Airbag
22346   | 1257946    |    Automatic 
```

我想要这样的结果：

```
ID       | LISTOFPARTS
-----------------------------
1182505  |  "10002 : Tagfahrlichtschaltung ; 80029 : Bluetooth  "
1212866  |  "20004 : Kindersitzbefestigung ; 10045 : Lederlenkradrriegelung"
1257946  |  "11908 : AIRBAG ; 22346 : AUTOMATIC" 
```

我想它必须是 XML PATH 的东西，但我无法让它工作。任何人都可以重写查询，以便它返回分组并以字符串连接的结果吗？

有或没有 XML PATH 的解决方案将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:21:42.483

[http://sqlfiddle.com/#!3/d41d8/5441](http://sqlfiddle.com/#!3/d41d8/5441)

```
create table #Temp (PART_ID bigint, ID bigint, DESCRIPTION nvarchar(max))

insert into #Temp
select 10002, 1182505, 'Tagfahrlichtschaltung' union all
select 80029, 1182505, 'Bluetooth' union all
select 20004, 1212866, 'Kindersitzbefestigung' union all
select 10045, 1212866, 'Lederlenkradrriegelung' union all
select 11908, 1257946, 'Airbag' union all
select 22346, 1257946, 'Automatic'

select 
    T1.ID,
    stuff(
        (
            select ' ; ' + cast(T2.PART_ID as nvarchar(max)) + ' : ' + T2.DESCRIPTION
            from #TEmp as T2
            where T2.ID = T1.ID 
            for xml path(''), type
        ).value('data(.)', 'nvarchar(max)')
    , 1, 3, '') as LISTOFPARTS
from #TEMP as T1 
group by T1.ID
order by T1.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:30:57.307

这将起作用 -

```
DECLARE @TABLE TABLE (PART_ID INT,ID INT, DESCRIPTION VARCHAR(100))

INSERT INTO @TABLE 
VALUES
(10002   ,1182505   ,   'Tagfahrlichtschaltung')
,(80029   , 1182505    ,   'Bluetooth')
,(20004   , 1212866    ,    'Kindersitzbefestigung')
,(10045   ,  1212866   ,    'Lederlenkradrriegelung')
,(11908   ,  1257946   ,    'Airbag')
,(22346   , 1257946    ,    'Automatic')

;WITH SUBQUERY
AS
(
    SELECT ID,(CAST(PART_ID AS VARCHAR(12)) + ' : ' + DESCRIPTION) 'CONCATED'
    FROM @TABLE 
)

SELECT ID, LEFT(pre_trimmed.CONCATED , LEN(pre_trimmed.CONCATED )-1) AS LISTOFPARTS
FROM SUBQUERY AS extern
CROSS APPLY
(
    SELECT CONCATED + ','
    FROM SUBQUERY AS intern
    WHERE extern.ID = intern.ID
    FOR XML PATH('')
) pre_trimmed (CONCATED)
GROUP BY ID, pre_trimmed.CONCATED 
```

# c++ - c++ 从控制台运行函数

> ID：12997887
> 
> 赞同：1
> 
> 时间：2012-10-21T12:41:15.353
> 
> 标签：c++, console

我需要为我的 c++ 程序添加以下功能：

当我运行它时，我输入我在程序中描述的某个函数的名称，然后这个函数运行。如何让它自动化？不像我现在的代码：

```
func1(){...}
func2(){...}
....
func50(){...}
int main(){
    string function; 
    cin>>function;
    if (function == "func1") funk1();
    if (function == "func2") func2();
    if (function == "func3") funk3();
    ....
    return 0;
} 
```

因为我有很多功能。我可以使用哪些乐器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T12:47:24.310

你不能让它完全自动化，因为 C++ 没有反射。

您可以制作的任何其他自动化基本上与您已经拥有的非常相似。

其他一些选择是：

*   具有`std::map`键 a`std::string`和值是函数指针。
*   多个类，其中包含函数和一个抽象工厂，它为您提供基于`std::string`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:04:30.710

在我看来，最简单的方法是使用`std::map<std::string, std::function<...> >`然后从您的函数创建一个全局地图并在地图上查找：

```
typedef std::function<void()> my_function;
typedef std::map<std::string, my_function> functions_map;

void test1() {...}
void test2() {...}
void test3() {...}

#ifndef _countof
#    define _countof(array)    ( sizeof(array) / sizeof(array[0]) )

std::pair<std::string, my_function> pFunctions[] = {
    std::make_pair( "test1", my_function(&test1) ),
    std::make_pair( "test2", my_function(&test2) ),
    std::make_pair( "test3", my_function(&test3) )
};
functions_map mapFunctions( pFunctions, pFunctions + _countof(pFunctions) );

void main() {
    std::string fn;
    while( std::cin >> fn ) {
        auto i = mapFunctions.find( fn );
        if( i != mapFunctions.end() )
            i->second();
        else
            std::cout << "Invalid function name" << std::endl;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T13:04:52.000

正如在其他解决方案中提到的，可以使用从函数名到函数指针的映射来获取函数指针。通过使用宏可以非常接近您的意图（无需手动填充地图）。最后，您的代码将类似于以下内容：

```
DECLARE_FUNC(f1)
{
    std::cout << "calling f1" << std::endl;
}

DECLARE_FUNC(f2)
{
    std::cout << "calling f2" << std::endl;
}

// ... more functions

int main()
{
    std::string function; 
    std::cin >> function;
    TFunc f = s_funcs[function]; // get function pointer for name
    if (f)
        f();
    // ... 
```

为了能够做到这一点，您需要以下定义：

```
#include <map>
#include <string>
#include <iostream>

// the common type of all functions
typedef void (*TFunc)(void);

// a static map of name -> function
static std::map<std::string, TFunc> s_funcs;

// this class we need to statically add functions to the map
class FuncAdder
{
public:
    FuncAdder(std::string name, TFunc f)
    {
        s_funcs[name] = f;
    }
};

// finally the macro for declaring + adding + defining your function
#define DECLARE_FUNC(f) void f(); FuncAdder f##Adder(#f,f); void f() 
```

# java - 在 Java 中使用扫描仪读取用户输入

> ID：12997890
> 
> 赞同：1
> 
> 时间：2012-10-21T12:41:42.943
> 
> 标签：java, user-input, java.util.scanner

我正在制作一个二叉搜索树 (BST) 和一个随机 BST。我对这两项工作的所有方法，我都坚持我觉得更简单的方法。失败的代码非常简单。顺便说一句，我使用标准重定向来读取值，所以我一次输入了很多值，而不是一次输入一个。

```
while ( console.hasNextInt() ) {
   key = console.nextInt();
   System.out.println(key);
   head.remove( key );
} 
```

其中 console 是我的扫描仪的名称，而 key 是一个全局变量，用于读取树的键。调试表明它正确地通过循环，直到读取最终整数之后。之后，即使没有更多整数要读取，它似乎也重新进入了 while 循环。我显然在某个地方犯了一个错误，但这对我来说并不明显，我花了几个小时试图改写它无济于事。任何帮助将不胜感激。

编辑 - 我输入的一个例子是：

820426496 648711744 834882112 261937632 475255968 311993216 834882112

它读入每个数字，直到 834882112 然后重新进入 while 循环，我不知道为什么。

就代码而言，这正是搞砸的代码。其他一切都只是设置扫描仪等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:52:58.797

正如我在评论中所说，`hasNextInt()`如果流中的下一个标记是 int，则返回 true，如果不是 int，则返回 false。一旦循环读取了最后一个 int，`hasNextInt()`只需等待输入下一个令牌来确定它是否是有效整数。如果你想停止循环，你需要输入一些不是整数的东西。

# facebook - 通过其他人不可见的应用程序作为页面发布到页面墙

> ID：12997892
> 
> 赞同：8
> 
> 时间：2012-10-21T12:42:12.577
> 
> 标签：facebook, visibility, facebook-apps, facebook-wall

我的一个应用程序是在页面上发布信息（作为页面）。但看起来只有我（我是该页面的管理员）才能看到该消息。我使用 Graph API explorer 检查了该消息的隐私设置，它看起来没问题：

```
 "privacy": {
    "description": "Public",
    "value": "EVERYONE"
  }, 
```

我可以看到的一个区别是看到帖子的人数是用英语写的（对于其他帖子，它是法语）。

我可能错过了什么？

提前谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-21T12:44:27.587

大声笑在发布此消息后，我认为“这可能是应用程序的设置”......确实沙箱仍然被激活......问题解决了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-26T21:05:28.263

大声笑，这给我带来的痛苦。上面的答案对我有用，我发现的说明在这里：

[如何在新的 Facebook 应用程序开发人员中禁用沙盒模式？](https://stackoverflow.com/questions/21946125/how-to-disable-sandbox-mode-in-new-facebook-app-developer)

# mysql - 分片和 ID 生成为 instagram

> ID：12997895
> 
> 赞同：1
> 
> 时间：2012-10-21T12:42:25.943
> 
> 标签：mysql, sql, sharding

我的问题是关于分片环境的 ID 生成。我遵循与[instagram](http://instagram-engineering.tumblr.com/post/10853187575/sharding-ids-at-instagram)相同的步骤来生成唯一 ID。我对在 MySQL 中实现这个 id 生成有几个问题。

这就是生成 ID 的方式（这是一个 PGQL 存储过程。）

```
CREATE OR REPLACE FUNCTION insta5.next_id(OUT result bigint) AS $$
DECLARE
    our_epoch bigint := 1314220021721;
    seq_id bigint;
    now_millis bigint;
    shard_id int := 5;
BEGIN
    SELECT nextval('insta5.table_id_seq') %% 1024 INTO seq_id;

    SELECT FLOOR(EXTRACT(EPOCH FROM clock_timestamp()) * 1000) INTO now_millis;
    result := (now_millis - our_epoch) << 23;
    result := result | (shard_id << 10);
    result := result | (seq_id);
END;
$$ LANGUAGE PLPGSQL;

CREATE TABLE insta5.our_table (
    "id" bigint NOT NULL DEFAULT insta5.next_id(),
    ...rest of table schema...
) 
```

**我的问题是**如何在 MySQL 中做到这一点（等效代码）。应该从查询中调用此存储过程以获取下一个 id。

**我的另一个问题**是关于查询分片。据我了解，他们使用映射到实际服务器的逻辑分片。如果他们决定将一个逻辑分片映射到一个新的服务器，这意味着他们必须同时查询两个服务器来聚合结果，因为在他们为同一个逻辑分片分配一个新服务器之前，一些数据被添加到较旧的服务器。我只是想知道是否有更好的方法来使用逻辑分片，并且可以选择查询数据所在的单个服务器，而不是查询属于该逻辑分片的所有服务器？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:14:14.680

从代码看起来你只需要复制序列，你可以通过在 MySQL 中使用 AUTO_INCREMENT 创建表并使用它来生成标识号来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-11T09:18:38.533

这是 postgres 等价的

指定`TABLE_SCHEMA`及`MASKTABLE`以下

我正在创建`MASKTABLE`一个虚拟的第一个条目

```
DELIMITER $$
CREATE OR REPLACE FUNCTION generate_next_id() RETURNS bigint NOT DETERMINISTIC
MAIN: BEGIN
DECLARE our_epoch bigint;
DECLARE seq_id bigint;
DECLARE now_millis bigint;
DECLARE shard_id int;
DECLARE param bigint ;
SET @our_epoch = 1568873367231;
SET @shard_id = 1;
SELECT AUTO_INCREMENT FROM information_schema.TABLES WHERE TABLE_SCHEMA = "SCHEMANAME" AND TABLE_NAME = "MASKTABLE" into @seq_id;
SELECT FLOOR(UNIX_TIMESTAMP()) * 1000 into @now_millis;
SELECT (@now_millis - @our_epoch) << 23 into @param;
SELECT @param | (@shard_id <<10) into @param; 
select @param | (@seq_id) into @param; 
RETURN @param;
END MAIN;$$ 
DELIMITER ; 
```

用法

```
select generate_next_id() 
```

您可以在触发器中使用它

```
CREATE TRIGGER trigger_name
BEFORE INSERT ON TableName 
FOR EACH ROW
SET new.id = generate_next_id(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-15T21:17:36.287

用 MySQL 存储过程实现完全相同的 id 生成逻辑是不可能的。但是，这可以使用[MySQL UDF](http://dev.mysql.com/doc/refman/5.5/en/adding-functions.html)来完成。

[这是一个 UDF](https://github.com/nmcquay/shard_id_udf)，它通过一些更改重新创建 instagrams id 生成器。将其修改为与 instagram id 生成器完全相同的工作将涉及更新 MAX_* 常量和 next_shard_id 和 shard_id_to_ms 中的位移逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T15:54:29.273

在[ScaleBase](http://www.scalebase.com/)，我们找到了一种很好的方式来支持自动增量，通过变量： `SET @@auto_increment_increment=4;`.

只要确保每个分片都有一个起始偏移量，你就可以自由离开了。它直接，简单，与现有的 MySQL 和其他东西兼容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-05T01:56:51.900

我对我编写的转换例程有疑问，但它似乎确实有效！

[AUTO_INCREMENT 可以在 MySQL 的 BEFORE TRIGGER 中安全使用吗](https://stackoverflow.com/questions/25677554/can-auto-increment-be-safely-used-in-a-before-trigger-in-mysql)

一旦我得到答案，我也会更新这个答案。

MySQL版本：

```
CREATE TRIGGER shard_insert BEFORE INSERT ON tablename
FOR EACH ROW BEGIN

DECLARE seq_id BIGINT;
DECLARE now_millis BIGINT;
DECLARE our_epoch BIGINT DEFAULT 1314220021721;
DECLARE shard_id INT DEFAULT 1;

SET now_millis = (SELECT UNIX_TIMESTAMP());
SET seq_id = (SELECT AUTO_INCREMENT FROM information_schema.TABLES WHERE TABLE_SCHEMA = "dbname" AND TABLE_NAME =     "tablename");
SET NEW.id = (SELECT ((now_millis - our_epoch) << 23) | (shard_id << 10) | (SELECT MOD(seq_id, 1024)));
END 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-09T09:47:21.090

关于**另一个问题**，一个逻辑分片的所有数据一次只存在于生产中的一台服务器上（不考虑复制）。当他们的现有服务器容量不足时，他们会将每个服务器中的数据复制到跟随者，并且当新服务器准备好时（此时原始服务器和新服务器都包含特定逻辑分片的所有数据)，他们开始从新服务器读取一半分片的所有数据，而另一半则留在原始服务器中。有关说明，请参见例如[http://www.craigkerstiens.com/2012/11/30/sharding-your-database/](http://www.craigkerstiens.com/2012/11/30/sharding-your-database/)。

# c - 字符串字谜 C 程序

> ID：12997897
> 
> 赞同：0
> 
> 时间：2012-10-21T12:42:37.697
> 
> 标签：c, string

> **可能重复：**
> [有什么简单的方法可以判断单词列表是否是彼此的字谜？](https://stackoverflow.com/questions/522112/what-is-an-easy-way-to-tell-if-a-list-of-words-are-anagrams-of-each-other)
> [查找两个单词是否是彼此的字谜](https://stackoverflow.com/questions/4236906/finding-if-two-words-are-anagrams-of-each-other)

我编写了以下 C 代码来检查两个给定的字符串是否是彼此的字谜。我知道这在复杂性/效率方面是最糟糕的，并且有很多更好的方法可以做到这一点。

```
#include "stdio.h"

main()
{
char s1[]="mist";
char s2[]="mitt";
int i,j,isanag=0;

if(strlen(s1)!=strlen(s2))
    printf("Not anagrams\n");

for(i=0;i<strlen(s1);i++)
{
    isanag=0;
    for(j=0;j<strlen(s2);j++)
    {
        if(s1[i]==s2[j])
        {
            isanag = 1;
            break;
        }
    }
    if(isanag == 0)
    {
        printf("Not anagrams\n");
        getch();
        exit(0);
    }

}

printf("Yes Anagrams\n");
getch();
} 
```

这工作正常并打印正确的 Not Anagrams 如果我如下交换两个字符串的名称，它会给出错误的答案

```
char s1[]="mitt";
char s2[]="mist"; 
```

我知道 2 for 循环的编码方式，这很明显。

我能做些什么来改进这段代码并解决这个怪癖？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T12:51:40.097

仅考虑小写字母，您可以制作 2 个长度为 26 的向量。

将它们中的所有位置都设置为 0，在第一个字符串 (s1) 中进行循环并增加向量中的位置：

```
 int v1[26], v2[26], i;
   for( i = 0; i < 26; i++)
        v1[i] = v2[i] = 0;
   for(i = 0; i < strlen(s1); i++)
        v1[s1[i] - 'a']++; // 'a' would be on position 0, 'b' on position 1 and so on
   for(i = 0; i < strlen(s2); i++)
        v2[s2[i] - 'a']++; 
```

之后，您只需循环输入向量并查看字母数量是否不同

```
 for(i = 0; i < 26; i++)
        if(v1[i] != v2[i])
        {
            printf("Not anagrams");
            exit(0);
        }
    printf("Anagrams"); 
```

但是如果你使用大写字母，你可以制作 4 个向量，新的向量减去 'A' 或者制作一个更大的向量，然后在你的代码中添加一些 if ......我会让你试试那个；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T12:54:20.203

基于 vmp 的解决方案，您可以使用一个 char 数组 [26] 来执行此操作。

1.  遍历第一个字符串，将字母的数组元素加一。
2.  遍历第二个字符串，将数组减一。
3.  遍历字母数组并断言所有元素为零。

编辑：添加了一些代码（手头没有编译器，但概念应该没问题）

```
//lower case only
int isAnagram( char* left, char* right)
{
   char theAlphabet[26];

   memset( theAlphabet, 0, sizeof theAlphabet );

   int length = strlen( left );

   for( int i=0; ++i; i < length )
   {
      if ( 0 == right[i] )
      { //mismatching length
        return 0; 
      }

     ++theAlphabet[ left[i] - 'a' ];
     --theAlphabet[ right[ i ] - 'a' ];

   }

   if ( left[length] != 0
       || right[length] != 0 )
   {
     return 0;
   }

   for( int j=0; ++j; j < 26 )
   {
      if ( 0 != theAlphabet[j] )
      {
        return 0;
      }
   }

   return 1; //yes it is an anagram
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-21T13:21:36.237

@Goldenmean，这是另一个对两个字符串进行排序然后比较它们的解决方案。其他人讨论的字符计数会更有效，但这更有趣:-)

`qsort`是一个标准库排序函数，它将函数`comp`作为参数，并在重新排序列表时使用它来比较列表（在本例中为字符串）的元素。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

static int comp(const void *a, const void *b)
{
    const char *pa = a;
    const char *pb = b;

    return
        (*pa > *pb) ?  1 :
        (*pa < *pb) ? -1 :
        0;
}

int main(int argc, char ** argv)
{
    char s1[]="mits";
    char s2[]="mist";

    qsort(s1, strlen(s1), 1, comp);
    qsort(s2, strlen(s2), 1, comp);

    printf("%s : %s  - %s\n", s1, s2, strcmp(s1, s2) ? "No" : "Yes");
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-21T12:51:02.973

您还没有编码重复字母的可能性。

取这两个字符串：

```
char s1[]="mitt";
char s2[]="mist"; 
```

对于第一个字符串中的每个字母，您的代码会检查第二个字符串中的每个字母，以查看在任何地方是否有相同的字母。因此，让我们检查第一个字符串并检查第二个字符串中的**第一个相同字母**（这就是您的代码所做的）：

```
s1[0] ('m'): yes, at s2[0]
s1[1] ('i'): yes, at s2[1]
s1[2] ('t'): yes, at s2[3]
s1[3] ('t'): yes, at s2[3] 
```

如您所见，代码认为这两个字符串是字谜，因为它将第一个字符串中的两个字母匹配到第二个字符串中的**一个字母**！

解决方案是在进入下一个字母之前“删除”您已经匹配的字母；我会把它留给你编码！祝你好运。

编辑：当然，我忘记了：如果代码成功地一直通过字符串 1，从字符串 2 中删除字母，并且字符串 2 中还有字母，这意味着它们不是字谜！（在上面的示例中，'s' 将留在字符串 2 中。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-21T12:54:29.203

很抱歉，您的实施存在缺陷。这段代码：

```
for(j=0;j<strlen(s2);j++)
{
    if(s1[i]==s2[j])
    {
        isanag = 1;
        break;
    } 
```

只要求第二个字符串中的*任何*字符都存在于第一个字符串中。

因此，由于“mitt”的字母都在“mits”之内，并且长度相同，因此报告它们是字谜。反过来是不正确的。

即使您在另一个方向重复检查，这仍然行不通。

所以例如

```
mitttsson

missstton 
```

看起来是字谜，因为*它们*的长度相同，并且都是由集合 {m,i,t,s,o,n} 生成的。

您不仅要检查字符是否相等，还要检查它们在字符串中出现的次数。

这是一个（效率低下，因为它计算重复重复的字母）变体：

```
for (i = 0; i < strlen(s1); i++)
{
    int c = 0;
    // How many times does character s1[i] occur in s1?
    for (j = 0; j < strlen(s1); j++)
    {
        if (s1[i] = s1[j])
        {
            // Improvement: if j < i, it means we already checked this letter.
            // so we might break here...
            c++;
        }
    }
    // improvement: if c is 0 here, it means we can 'continue' for this letter
    // has been already checked before.

    // Subtract how many times it occurs in s2.
    for (j = 0; j < strlen(s2); j++)
    {
        if (s1[i] = s2[j])
            c--;
    }
    // If occurrences are the same we expect difference to be 0.
    if (c)
    {
        printf("Not anagrams\n");
        break;
    }
} 
```

**更新**：最好的解决方案是完全改变算法，根据 vmp 或（甚至更好）Mario the Spoon 的。

# javascript - 淘汰赛取决于改变的价值

> ID：12997901
> 
> 赞同：0
> 
> 时间：2012-10-21T12:42:55.187
> 
> 标签：javascript, knockout.js

我正在尝试在以下场景中使用 Knockout：我有 jquery UI 选项卡和 Next / Prev 按钮。我希望按钮根据所选选项卡消失 - Next 将隐藏在最后一个选项卡中，Prev 将隐藏在第一个选项卡中。这是我所做的：

```
//HTML
<div id="buttonsDiv">
    <button id="prevButton" data-bind="visible: prevVisible">Prev</button>
    <button id="nextButton" data-bind="visible: nextVisible">Next</button>
</div>

//JavaScript
function TabsButtons = function (tabsSize) {
    //Computed
    this.selectedTab = ko.computed(0);

    this.nextVisible = ko.computed(function () {
        return this.selectedTab() < tabsSize - 1;
    }, this);

    this.prevVisible = ko.computed(function () {
        return this.selectedTab() > 0;
    }, this);
};

        var $tabs = this.tabs({
            select: function (event, ui) {
                tabsButtonsModel.selectedTab(ui.index);
            }
        });

var tabsButtonsModel = new TabsButtons($tabs.find('.ui-tabs-panel').size());
ko.applyBindings(tabsButtonsModel, $('#buttonsDiv').get(0)); 
```

我想删除选项卡插件的“选​​择”事件，并以一种使 selectedTab 属性自动更新的方式使用 Knockout。
那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:59:45.500

我已经整理了一个小提琴，我认为它可以满足您的需求。您需要在每个标签上添加点击绑定。这允许您跳过任何事件代码。点击处理程序代码是

```
self.tabClick = function(data, ui) {
    var currentidx = $("#tabs").tabs('option', 'selected');
    self.selectedTab(currentidx);
} 
```

这将替换您的事件代码。

它位于[http://jsfiddle.net/photo_tom/p6dW6/6/](http://jsfiddle.net/photo_tom/p6dW6/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T17:25:32.987

我所做的与您的答案相似，但代码较少。我没有在每个选项卡上添加点击事件，而是将事件移动到模型中。我创建了一个获取 tabs 元素并为其创建模型的通用模型： function TabsPrevNextButtonsModel (tabs) { this.selectedTab = ko.observable(tabs.tabs('option', 'selected'));

```
 var tabsSize = tabs.find('.ui-tabs-panel').size();
    tabs.bind('tabsselect', $.proxy(function (event, ui) {
        this.selectedTab(ui.index);
    }, this));

    this.next = function (data, event) {
        tabs.tabs('option', 'selected', (this.selectedTab() + 1) % tabsSize);
    }
    this.prev = function (data, event) {
        tabs.tabs('option', 'selected', (this.selectedTab() - 1) % tabsSize);
    }

    //Computed
    this.nextVisible = ko.computed(function () {
        return this.selectedTab() < tabsSize - 1;
    }, this);

    this.prevVisible = ko.computed(function () {
        return this.selectedTab() > 0;
    }, this);
}; 
```

# ruby - 从更大的数组创建子数组

> ID：12997903
> 
> 赞同：1
> 
> 时间：2012-10-21T12:43:32.527
> 
> 标签：ruby

我正在尝试编写一个循环，该循环接受一个嵌套数组并一次创建一个包含两个连续元组的子数组。输入数组可能是这样的

```
arr = [['A','B'],['C','D'],['E','F'],['G','H'],['I','J'],['K','L'],
      ['M','N'],['O','P']]

Output: ['A','B'],['C','D']
        ['E','F'],['G','H']
        ['I','J'],['K','L']
        ['M','N'],['O','P'] 
```

我尝试了各种循环，比如

```
arr.each_slice(2) do |k,m|
   new_arr=[k,m]
   puts new_arr
end 
```

和

```
 arr.each_slice(2) { |k,m| puts(k,m) } 
```

这有什么问题？在这两种情况下，输出都是

```
A
B
C
D ..... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T12:46:18.650

这就是`puts`在 ruby​​ 1.9 中处理数组的方式，[它将每个元素打印在一个新的 line 上](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-puts)。结果就是您想要的，打印时看起来会有所不同:)`.inspect`例如，尝试使用 打印。

```
arr = [['A','B'],['C','D'],['E','F'],['G','H'],['I','J'],['K','L'],
      ['M','N'],['O','P']]

arr.each_slice(2) do |k,m|
   new_arr = [k,m]
   puts new_arr.inspect
end
# >> [["A", "B"], ["C", "D"]]
# >> [["E", "F"], ["G", "H"]]
# >> [["I", "J"], ["K", "L"]]
# >> [["M", "N"], ["O", "P"]] 
```

* * *

[http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-puts](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-puts)

> ## puts(obj, ...) → 无
> 
> 与 IO#print 一样将给定对象写入 ios。在尚未以换行序列结尾的任何内容之后写入记录分隔符（通常是换行符）。如果使用数组参数调用，则将每个元素写入新行。如果不带参数调用，则输出单个记录分隔符。

```
$stdout.puts("this", "is", "a", "test") 
```

产生：

```
this
is
a
test 
```

# vb.net - 这个 VB.NET 代码有什么逻辑错误

> ID：12997908
> 
> 赞同：1
> 
> 时间：2012-10-21T12:44:15.247
> 
> 标签：vb.net, linq, datatable

我有这个简单的 VB.NET 函数：

```
Dim endval = Convert.ToInt16(googleXMLdocument...<s:currentItemCount>.Value) - 1
For counter = 0 To endval
  Dim seller = googleXMLdocument...<s:name>(counter).Value
  Dim containsValue = ToBeIgnored.AsEnumerable().Any(Function(r) r.Field(Of String)("Ignore") = seller) 
  If containsValue Then
    Continue For
  End If
  row = GoogleResults.NewRow()
  GoogleResults.Rows.Add(row)
  GoogleResults.Rows(counter)("Seller") = seller 'sometimes this line throws an exception there is no row at position x
Next 
```

在最后一行中，我有时会遇到异常`there is no row at position x`。什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T13:11:57.387

您的计数器变量看起来与您的 GoogleResults 表的行数不同。

我猜你正在寻找这样的东西：

```
GoogleResults.Rows(GoogleResults.Rows.Count - 1)("Seller") = seller 
```

或更直接地：

```
row("Seller") = seller 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T13:18:30.063

循环的最后两行`For`应该这样重写：

```
row("Seller") = seller;
GoogleResults.Rows.Add(row) 
```

添加后更改行可能会导致触发不必要的事件。

# arrays - Haskell 列表到数组

> ID：12997909
> 
> 赞同：3
> 
> 时间：2012-10-21T12:44:16.290
> 
> 标签：arrays, list, haskell

在 Haskell 中处理像移动计算器这样的国际象棋时，我遇到了一个小问题，我不得不使用 Data.Array 将我的棋子保存在一个由 Char 和 Int 定义的位置中。现在我有一个片段列表作为 writeToArray 的输入，我已经尝试了很多，但我不断收到错误，有人知道我做错了什么吗？

这是它的代码：

```
data Squares = Squares {array :: Array Pos Piece}
data Pos = Pos Char Int deriving (Eq, Ord, Ix)
data Piece = Piece { piecetype :: PieceType, color :: PieceColor } | Empty

writeToArray :: [Piece] ->(Array Pos Piece)
writeToArray (x:xs) = (((Pos 'a' 1), (Pos 'h' 8)) [((Pos char int), x) | char <- ['a'..'h'], int <- [1..8]])` : writeToArray (xs) 
```

它给出的错误是：

```
Couldn't match expected type `Array Pos Piece' with actual type '[a0]' 
```

非常感谢所有帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T13:43:50.467

解决它！

将 writeToArray 函数更改为：

```
writeToArray :: [Piece] ->(Array Pos Piece)
writeToArray  list = Data.Array.array (Pos 'a' 1, Pos 'h' 8) (zip  [(Pos char int)| char <- ['a'..'h'], int <- [1..8]] list) 
```

它可以帮助其他人解决这个问题吗^_^

# javascript - 与描述分享 facebook

> ID：12997915
> 
> 赞同：0
> 
> 时间：2012-10-21T12:45:07.353
> 
> 标签：javascript, facebook-sharer

我已经在 J​​avaScript 中实现了 facebook 分享功能。到目前为止，当我单击时，会弹出一个带有文档标题、网址和图像的弹出窗口。我需要添加一个像这样的小描述：

![在此处输入图像描述](../Images/a791d2c1a3c47b716565644aedf5a65f.png)

到目前为止，我的代码是这样的：

```
window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent('http://xxxxx.com/myblog')+'&t='+encodeURIComponent(''),'sharer','toolbar=0,status=0,width=626,height=436'); 
```

是否要添加任何内容以使描述出现在共享器弹出窗口中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:19:58.673

在您要分享的页面 (http://xxxxx.com/myblog) 您需要添加 FB Open Graph 标签

```
<meta property="og:url" content=""/>
<meta property="og:type" content="article"/>
<meta property="og:title" content=""/>
<meta property="og:image" content=""/>
<meta property="fb:app_id" content=""/> 
```

此标签添加描述

```
<meta property="og:description" content="xyz"> 
```

阅读更多@ [http://developers.facebook.com/docs/opengraphprotocol/](http://developers.facebook.com/docs/opengraphprotocol/)

# javascript - 不影响滚动的自动刷新

> ID：12997918
> 
> 赞同：0
> 
> 时间：2012-10-21T12:45:42.630
> 
> 标签：javascript, jquery

我有一个自动聊天部分，我必须将聊天的滚动条放到底部。像这样：

```
function chatuser(user1) {
    $("#currentuser").load('chatcontent.php', {
        current: user1
    }, function afterchatuser() {
        $("#currentcontent").attr({
            scrollTop: $("#currentcontent").attr("scrollHeight")
        });
    });
}

<div id="currentuser"></div> 
```

对于自动更新，我会自动刷新该功能。像这样：

```
var auto_refresh = setInterval(function chatauto() {
    chatuser(user1);
}, 2000);​ 
```

但是每次它刷新滚动条所在的位置时，它都会到达底部。就像用户滚动到顶部一样，刷新后它会自动将滚动条移到底部。我想停止这种情况，但它也应该及时刷新。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:00:41.547

您基本上需要的是通过新内容高度差的值更改（增加）消息容器的滚动顶部。看看这个[演示](http://jsfiddle.net/ZRVNr/)它应该会给你一些想法。

```
$('div').scrollTop(function() {
    return scroll + $(text).appendTo($(this)).height();        
}); 
```

此处`scroll`是添加新内容之前的旧 scrollTop 值。

# .net - Threading.Thread.Sleep 是否接受滴答声？

> ID：12997920
> 
> 赞同：0
> 
> 时间：2012-10-21T12:46:06.043
> 
> 标签：.net, thread-sleep

在 .NET 中使用 Threading.Thread.Sleep 时，可以选择使用 Threading.Thread.Sleep(timeout As TimeSpan)。现在，在 System.TimeSpan 中，可以选择以 100 纳秒为单位表示周期：System.TimeSpan(ticks as long)。Threading.Thread.Sleep 可以使用纳秒还是将它们转换为毫秒（整数）？如果它将它们转换为毫秒，我认为没有办法将线程挂起少于 1 毫秒。那正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:53:50.980

您的假设是正确的，并记录在 MSDN 中：

> 这种睡眠过载使用超时的整毫秒总数。小数毫秒被丢弃。

我的理解是，由于多任务处理的性质，即使是毫秒值也不一定会产生非常精确的睡眠时间到毫秒。当我需要睡一段非常特定的时间时，我使用了这样的代码：

```
 long freq;
  long frame;
  freq = System.Diagnostics.Stopwatch.Frequency;
  frame = System.Diagnostics.Stopwatch.GetTimestamp();
  while ((frame - fpsStartTime) * fps < freq * fpsFrameCount)
  {
     int sleepTime = (int)((fpsStartTime * fps + freq * fpsFrameCount - frame * fps) * 1000 / (freq * fps));
     if (sleepTime > 0) System.Threading.Thread.Sleep(sleepTime);
     frame = System.Diagnostics.Stopwatch.GetTimestamp();
  }
  if (++fpsFrameCount > fps)
  {
     fpsFrameCount = 0;
     fpsStartTime = frame;
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T15:11:26.473

That falls in the "it depends" category. You could, say, be using it in a Silverlight app that runs on a Mac. But a standard Windows desktop app uses the operating system's [Sleep()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298%28v=vs.85%29.aspx) call which accepts a sleep time expressed only in milliseconds.

That's not where it ends, by default Windows can only sleep a thread with an accuracy that depends on the operating system clock interrupt. Which is, by default, 1/64 of a second, 0.015625 seconds on most machines. So if you Thread.Sleep(1) then you'll actually sleep for about 16 milliseconds. Or more.

You can jack up the interrupt rate by pinvoking [timeBeginPeriod(1)](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757624%28v=vs.85%29.aspx). Sleeps are now accurate to a millisecond, plus or minus a bunch due to scheduling inaccuracies. Something you should *never* do on a battery-powered machine. And don't forget to pinvoke timeEndPeriod().

# web - 在 Google 阅读器中显示 atom 提要的图标

> ID：12997928
> 
> 赞同：4
> 
> 时间：2012-10-21T12:47:07.587
> 
> 标签：web, favicon, atom-feed, rss-reader, google-reader

Google 阅读器不显示我的 Atom 提要[http://feeds.feedburner.com/CartesianClosedComic](http://feeds.feedburner.com/CartesianClosedComic)的图标。

根据互联网上的各种建议，这是我尝试过的：

*   添加了一个`<icon>`指向 png 图标的元素。（我也在那里尝试了一个`.ico`图标。）IMO，这本身就足够了，但由于某种原因它不是。
*   添加了一个`<link rel="shortcut icon" type="image/x-icon" />`指向`.ico`图标的元素，类似于普通页面。
*   添加了`<link rel="alternate" type="text/html" />`指向具有网站图标的网页的元素。

以上都没有帮助。

我还发现了一个假设，即在域的根路径下应该有一个网站图标（类似于`http://mydomain.com/favicon.ico`），但这对我来说不是一个选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T20:58:15.923

Google Reader 使用表单的 URL`http://s2.googleusercontent.com/s2/favicon?domain_url=http://domainname/foo/bar/baz.html`来缓存站点图标。我已经验证他们的缓存服务只发出*一个请求*来获取`http://domainname/favicon.ico`，仅此而已；您是否为特定页面提供 URL 并不重要——该页面永远不会被请求，因此其中指定的任何网站图标都*不会*被考虑在内。

坏消息是，影响该网站图标缓存服务的唯一方法是实际为`/favicon.ico`URL 提供一个网站图标。好消息是您不必在该 URL 上提供实际的 Windows 图标文件。位于该 URL 的 PNG 图像可以正常工作。

如果您无法`/favicon.ico`在服务器上托管实际文件，则可以设置某种重定向或 URL 重写，以提供托管在其他地方的网站图标。我已经对其进行了测试，可以确认 Google*会*跟踪重定向，甚至是到站外 URL，因此您甚至不必在同一个域上托管网站图标。不过，更坏的消息是：Google 不会费心发送`User-Agent`带有该请求的标头，因此您不能仅为他们的网站图标缓存设置条件重定向。我的测试中的所有请求都来自`74.125.18.0/24`网络，因此您可以基于此实现条件重定向。

我看到您将您的提要内容托管`/ccc`在您网站的子目录中，并且您可能不愿意将您的漫画网站图标放置为您的网站范围的网站图标。我还看到您的托管服务提供商提供了至少 10 个子域（我不知道您使用的是哪个软件包，但这是他们提供的最低产品），因此您可以在您的网站上创建一个子域（例如，`ccc.ro-che.info`）并将其用作您的 Feed 的网址。Google 将尝试获取`http://ccc.ro-che.info/favicon.ico`提要，您只能在该子域上设置特定的网站图标资源。您还可以设置从`http://ccc.ro-che.info/*`到的重定向`http://ro-che.info/ccc/*`，以便您的漫画保持在其当前位置，并且来自提要链接的每个人也将被重定向到资源的当前位置。

# postgresql - Blob 从 Informix 到 Postgres 的迁移数据

> ID：12997939
> 
> 赞同：1
> 
> 时间：2012-10-21T12:48:13.177
> 
> 标签：postgresql, export, informix, database-migration

我正在将 Informix (11.7) DB 迁移到 PostgreSQL(9.2)。只有一个问题：如何将 blob(image) 从 Informix 移动到 PostgreSQL(9.2)？提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:40:21.507

我使用 Jython 和 JDBC 在各种数据库之间进行了一些此类转换。

您需要的只是 Informix 和 PostgreSQL JDBC 驱动程序`CLASSPATH`。

我有带列的 Informix 表和带`BYTE`列的 PostgreSQL 表`BYTEA`：

```
-- Informix
CREATE TABLE _blob_test (
  id integer PRIMARY KEY,
  image BYTE
)

-- PostgreSQL
CREATE TABLE _blob_test (
  id integer PRIMARY KEY,
  image BYTEA
) 
```

然后可以使用 JDBC`getObject()/setObject()`方法来复制数据：

```
#!/usr/bin/env jython
# -*- coding: utf8 -*-

from java.sql import DriverManager
from java.lang import Class

Class.forName("com.informix.jdbc.IfxDriver")
Class.forName('org.postgresql.Driver')

def copy_table(db_from, db_to):
    col_count = 2
    insert_stmt = db_to.prepareStatement('INSERT INTO _blob_test (id, image) VALUES (?, ?)')
    pstm2 = db_from.createStatement()
    pstm2.setFetchSize(10000)
    rs_in = pstm2.executeQuery('SELECT * FROM _blob_test')
    try:
        batch_buffer = 0
        batch_size = 100
        while (rs_in.next()):
            for i in range(1, col_count + 1):
                insert_stmt.setObject(i, rs_in.getObject(i))
            insert_stmt.addBatch()
            batch_buffer += 1
            if (batch_buffer % batch_size == 0):
                insert_stmt.executeBatch()
                batch_buffer = 0
        if (batch_buffer > 0):
            insert_stmt.executeBatch()
    finally:
        rs_in.close()
        pstm2.close()

db_from = DriverManager.getConnection('jdbc:informix-sqli://informix-test:9088/infdb:informixserver=ol_testifx;DB_LOCALE=pl_PL.CP1250;CLIENT_LOCALE=pl_PL.CP1250;charSet=CP1250', 'informix', '12345')
db_to   = DriverManager.getConnection('jdbc:postgresql://pg-test:5490/pg_test?stringtype=unspecified', 'postgres', '12345')

copy_table(db_from, db_to) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-24T14:13:03.400

我知道答案很晚，但这可以帮助其他人寻找解决方案。
我们公司也做过类似的迁移。
为了迁移二进制文件，我们使用了一个名为 SQL-workbench 的工具，我们使用了数据泵（菜单工具）。数据泵允许将数据从源数据库复制到目标数据库。DBMS 可能不同（在本例中为 Informix 和 Postgres）。
您必须在“文件 > 管理驱动程序”中注册两个驱动程序并创建 2 个配置文件：一个针对您的 Informix DB 的源配置文件和一个针对您的 Postgres DB 的目标配置文件。然后将从 Data pumper 中选择配置文件。 [![数据泵窗口](../Images/96369affcb85f798b0e3d6c07fb4d120.png)](https://i.stack.imgur.com/jvfNQ.jpg) 如果您有多个表要一次复制，请阅读有关使用函数 Wbcopy 的文档（非常有用）

# javascript - javascript模块模式：从私有函数向模块添加私有属性

> ID：12997940
> 
> 赞同：0
> 
> 时间：2012-10-21T12:48:15.437
> 
> 标签：javascript, revealing-module-pattern

如何修复`createBar()`以便`bar`在与财产相同的级别创建私有财产`foo`？

```
var x = (function() {
  var foo = "a";

  function createBar() {
    this.bar = "b";
  }

  return {
    getFoo: function() {
        return foo;
    },
    getBar: function() {
        return bar;
    }
  }; // end: returned object
}()); 
```

这就是模块的工作方式：

```
x.getFoo(); // returns a
x.getBar(); // returns b
window.bar; // is undefined (but in my example, it is b) 
```

**更新：**

这就是我现在正在做的事情：

```
var x = (function() {
  var data = {};  //private object holding state variables
  data.foo = "a"; // one state variable

  function createBar() {
    data.bar = "b"; // another dynamically created state variable
  }

  return {
    getFoo: function() {
        return foo;
    },
    getBar: function() {
        return bar;
    }
  }; // end: returned object
}()); 
```

但不知何故我不喜欢它。你会怎么做，在私有函数之间共享状态信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:19:44.530

`window.bar; // is undefined (but in my example, it is b)`

调用您的私有方法 createBar 将最终生成一个具有属性 bar = 'b' 的新对象

它是私有的，因为它不能从外部读取它的属性，你可以存储一个对象引用来访问它，但我不认为它是你要找的......

通过定义另一个 var 它在两个函数的范围内：

```
var x = (function() {
    var foo = "a";
    var bar;

    function createBar() {
        bar = "b";
    }

    return {
        getFoo: function() {
            return foo;
        },
        getBar: function() {
            return bar;
        }
    }; // end: returned object
}()); 
```

不要忘记调用 createBar() 否则 bar 将是未定义的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:31:22.123

在外部函数中删除`this`和声明`bar`将是最轻量级的解决方案：但是您使用内部`data`对象的解决方案更加灵活（尽管您应该更新您的 getter 以执行类似的操作`return data.foo;`）。

使用该`data`对象的主要优点是，如果您正在构建一个 JavaScript 代码库，您将能够在您正在创建的对象的构造函数/私有范围内调用外部函数/mixin，同时仍然以定义的接口。作为一个人为的例子，如果您正在执行诸如创建对象的 Adapter 样式之类的事情，您将能够调用类似的东西`linkWithWebService(data)`，它可以在构造时填充并向您的私有范围成员添加行为（并且这些调用将具有类似于嵌套的直接访问其他语言中的类），但所有未来的行为仍将受到您定义的 API 的限制。

或者根据个人经验，我创建了一个 API，其中访问器遵循 getter:`attributeName()`和 setter:的模式`attributeName(newValue)`，我通过创建一个高阶函数来创建 getter 和一个内部`data`对象来实现它。然后在构造函数返回中我做了类似的事情，`attributeName = makeAccessor(attributeName, data)`所以创建的函数成为属性的唯一暴露。

# javascript - 如何更改 javascript 警报按钮的样式？

> ID：12997944
> 
> 赞同：1
> 
> 时间：2012-10-21T12:48:41.957
> 
> 标签：javascript, styles, alert

我想更改 javascript 警报框的样式。正如您在
facebook 等许多网站中看到的那样，这里是警报框。我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:51:28.647

你不能改变它；它由浏览器实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T12:56:49.093

您不能设置警报框的样式，您可以做的是创建一个模式弹出窗口

例如。

[http://jqueryui.com/dialog/](http://jqueryui.com/dialog/)

[http://defunkt.io/facebox/](http://defunkt.io/facebox/)

[如何编写 JavaScript 模式弹出窗口（替换 Ajax）？](https://stackoverflow.com/questions/288867/how-to-code-a-javascript-modal-popup-to-replace-ajax)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T12:50:55.700

**您无法设置警报框的样式。**

您可以创建一个 div 将消息放入其中，使用 css 对其进行样式设置，然后使用 javascript 将其弹出。

可以在 jQuery UI 对话框小部件[**DEMO中找到一个示例**](http://jqueryui.com/dialog/)

# c# - 来自对象的 GetType 正在返回 RuntimeType

> ID：12997946
> 
> 赞同：8
> 
> 时间：2012-10-21T12:48:43.420
> 
> 标签：c#

我有一个简单的功能：

```
public string getType(object obj) {
    Type type = obj.getType();
    return type.FullName;
} 
```

如果在运行时创建的字符串对象上使用此函数，该函数将返回“System.RuntimeType”...

但它应该返回“System.String”......

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-21T12:58:08.840

如果你这样称呼它——

```
string a = "";
string type = getType(a); 
```

它会回来`System.String`

但如果你这样打电话——

```
string a = "";
string type = getType(a.GetType()); 
```

然后它会返回`System.RuntimeType`

另外，`typo`你的方法有一点点 -

`Type type = obj.getType();`应该`Type type = obj.GetType();`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T12:53:31.423

我猜你是这样称呼它的：`getType(typeof(string))`. `typeof(abc)`是类型的值`Type`（或者`RuntimeType`是实现细节）。

像这样称呼它：

`getType("")`

# asp.net - 改为禁用 JQM ajax 请求和无样式 UI

> ID：12997948
> 
> 赞同：0
> 
> 时间：2012-10-21T12:49:07.180
> 
> 标签：asp.net, jquery-mobile, asp.net-ajax

根据这篇文章[jquery mobile ajax 发送 GET 和 POST 请求](https://stackoverflow.com/questions/8657460/jquery-mobile-ajax-sends-both-get-and-post-requests)，我通过`$.mobile.ajaxEnabled = false`脚本禁用了我的 jquery 帖子，但现在出现了新问题，它与我的页面 UI 有关，因为我禁用了 jquery 请求，从第一个请求返回的服务器响应不是用户友好，因为 jquery 处理我页面的 UI。现在的问题是如何在我的页面中管理 UI 和 ajax 请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:38:23.370

这个问题将通过在您的代码中添加以下行来解决。每次发送请求后，它将刷新页面。#confirm 是您的容器，其中包含更新面板的内容。

```
var classAssign = function(){

   jQuery('#confirm').trigger('pagecreate');
}

 Sys.WebForms.PageRequestManager.getInstance().add_endRequest(classAssign); 
```

有关更多信息，请查看链接[https://forum.jquery.com/topic/disabling-jqm-ajax-request-and-receive-ugly-ui-instead](https://forum.jquery.com/topic/disabling-jqm-ajax-request-and-receive-ugly-ui-instead)

# django - 将 DJango 模板变量作为输入参数传递

> ID：12997951
> 
> 赞同：1
> 
> 时间：2012-10-21T12:49:27.920
> 
> 标签：django, django-templates, forms, http-post

我在 Ubuntu 12.04 上使用 Django 1.4 和 Python 2.7。

我有一个模板，它使用 Django 的模板语法来生成对象列表。我想在每个项目上创建一个“表单帖子”，以提供从列表中删除该项目的选项。很简单：

```
MySQL <remove> 
Linux <remove>  
Java   <remove>
Python   <remove>
C++   <remove>
PostgreSQL   <remove>
Django <remove> 
```

`<remove>`“提交”在哪里。

这是模板的样子：

```
{% if not dev.user.is_superuser %}
    {% if dev.user.is_authenticated and dev.user.is_staff %}
       <ul>
       {% for skill in dev.skill_set.all %}
           <form action="/removeSkill/" method="post">{% csrf_token %}
           <li>
               {{ skill.skill }}
               <input type="hidden" name="skill" value={{ skill.skill }}>
               <label class="formlabel">&nbsp;</label>
               <input type="submit" value="Remove  &#9658;"></li>
           </form>
       {% endfor %}
       </ul>
    {% endif %} 
```

我需要知道如何将`{{ skill.skill }}`值作为隐藏输入传递`value`。

有什么建议么？

更新 1：

好的，看起来我在模板中所做的工作非常出色。我似乎无法真正从视图中的数据库中删除条目。

```
def remove_skill(request):
    """
    ..  function:: remove_skill()

        Remove a skill for a developer

        :param request: Django Request object
    """
    ## Create a logging object
    path = os.path.join(os.path.dirname(__file__), 'logs/')
    filename = '{0}debug.log'.format(path)
    logfile = open(filename, 'w')
    now = datetime.datetime.now()
    logfile.write('\n --------------------- {0}\n'.format(now))
    if (request.user.is_authenticated() and request.user.is_staff):
        userProfile = UserProfile.objects.get(user_id = request.user.id)
        devSkills = DevSkills(dev = userProfile, skill = request.POST.get('skill'))
        logfile.write('user =  {0}\n'.format(devSkills.dev_id))
        logfile.write('skill to remove =  {0}\n'.format(devSkills.skill))
        devSkills.delete()
        logfile.close()

    return dev_profile(request) 
```

该`debug.log`文件显示了正确条目的信息，但是当我尝试删除一项技能时，我继续收到以下错误：

```
DevSkills object can't be deleted because its id attribute is set to None. 
```

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:43:07.097

似乎是`devSkills = DevSkills(...)`字符串中的错字。您实际上是在实例化新对象，而不是从数据库中获取记录。您需要使用`devSkills = DevSkills.objects.filter(...)`获取查询集，然后获取`delete`它。

PS：我还建议使用[django-debug-toolbar](https://github.com/django-debug-toolbar/django-debug-toolbar)和 Python 本机[日志记录模块](http://docs.python.org/library/logging.html)进行调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T12:58:40.037

以下是您要查找的内容（基于视图中的“名称”参数解析）？

```
 <li> {{ skill.skill }} 
        <input type="hidden" name="skill_{{ skill.pk }}" value={{ skill.skill }}> 
        <label class="formlabel">&nbsp;</label>
        <input type="submit" value="Remove  &#9658;"></li> 
```

在`for`循环中，`request.POST`您可以使用`.split("_")[-1]`.

这一点也不优雅。使用`formsets`（[https://docs.djangoproject.com/en/dev/topics/forms/formsets/](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)）实际上可能是您正在寻找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T13:38:19.350

事实证明，早上还为时过早。

注意视图中的愚蠢错误：

```
devSkills = DevSkills(dev = userProfile, skill = request.POST.get('skill') 
```

显然，这需要：

```
devSkills = DevSkills.objects.get(dev = userProfile, skill = request.POST.get('skill')) 
```

我需要删除一个对象——而不是创建一个！

问题解决了。

# android - Android 从小部件更改屏幕亮度

> ID：12997957
> 
> 赞同：0
> 
> 时间：2012-10-21T12:50:22.963
> 
> 标签：android, android-widget, appwidgetprovider

我正在尝试从小部件更改屏幕亮度。基本上，我遵循了下一页的建议。 [更改屏幕亮度 系统设置 Android](https://stackoverflow.com/questions/6708692/changing-the-screen-brightness-system-setting-android)

到目前为止，这是我能够做到的。1.我有一个带按钮的主Activity，当我点击按钮时，我可以改变屏幕的亮度。

2.  我有一个带按钮的小部件。我已经确认从小部件按钮调用 RefreshScreen 类。我从 AppWidgetProvider 调用这个类。问题 屏幕亮度没有变化。当我使用调试模式运行问题时，我收到以下警告。

    10-21 12:20:21.579: W/BackupManagerService(137): dataChanged 但没有参与者 pkg='com.android.providers.settings' uid=10086

    10-21 12:20:21.579: W/InputManagerService(137): 窗口已经聚焦，忽略焦点增益：com.android.internal.view.IInputMethodClient$Stub$Proxy@40f56aa8

我有以下权限集。

我有以下代码来改变亮度。我很抱歉混淆了代码，但我有两个按钮。当亮度按钮改变时，屏幕应该是最亮的。更改音量按钮时，屏幕应该在最暗和最亮之间。

非常感谢任何输入。谢谢你。

```
public class RefreshScreen extends Activity {
    public static String BRIGHTNESS_VALUE = "BRIGHTNESS_VALUE";
    public static String BRIGHTNESS_CHANGE = "BRIGHTNESS_ACTION";
    public static String VOLUME_CHANGE = "VOLUME_ACTION";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        Intent intent = getIntent();
        String value = intent.getStringExtra(BRIGHTNESS_VALUE);

        WindowManager.LayoutParams layoutParams = getWindow().getAttributes();

        if (value.equals(BRIGHTNESS_CHANGE)) {
            Toast.makeText(this, "BRIGHTNESS CHANGE Clicked", Toast.LENGTH_LONG).show();
            android.provider.Settings.System.putInt(getContentResolver(),
                    android.provider.Settings.System.SCREEN_BRIGHTNESS, 255);

            layoutParams.screenBrightness = 1F;
            getWindow().setAttributes(layoutParams);
        }
        if (value.equals(VOLUME_CHANGE)) {
            Toast.makeText(this, "VOLUME CHANGE Clicked", Toast.LENGTH_LONG).show();
            android.provider.Settings.System.putInt(getContentResolver(),
                    android.provider.Settings.System.SCREEN_BRIGHTNESS, 125);

            layoutParams.screenBrightness = 0.5F;
            getWindow().setAttributes(layoutParams);
        }
        finish();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T19:33:41.440

似乎您的活动是将从窗口更新配置的人......（我的意思是，您的活动是另一个问题的虚拟活动）。如果您在显示之前杀死您的活动，您将无法刷新系统亮度......尝试将finish（）放入活动onResume（）......这可能会正常工作。

# javascript - JavaScript 字符串对象到字符串

> ID：12997965
> 
> 赞同：1
> 
> 时间：2012-10-21T12:51:50.660
> 
> 标签：javascript, stringify

在 node.js 中的下一个代码

```
var Reverse = (function() {

    return {
        reverse1: function(s) {
            var out = new String();
            for (var i = s.length - 1, j = 0; i >= 0; i--, j++) {
                out[j] = s[i];
            }
            return out;
        }
    }
})();

console.log(Reverse.reverse1("this is text")); 
```

印刷

```
{ '0': 't',
  '1': 'x',
  '2': 'e',
  '3': 't',
  '4': ' ',
  '5': 's',
  '6': 'i',
  '7': ' ',
  '8': 's',
  '9': 'i',
  '10': 'h',
  '11': 't' 
} 
```

但我想打印一个字符串。我试过`return out.toString()`但什么也没返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T12:56:33.247

除非您有真正的理由需要通过数组索引完成此操作，否则为什么不直接连接它呢？

```
out += s[i]; 
```

将打印：

```
// "txet si siht" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:54:04.977

使用数组的连接方法。

```
 return out.join(''); 
```

并更改`var out = new String();`为`var out = [];`

***并注意：***

您可以执行以下操作来反转字符串：

```
var ret = "this is text".split('').reverse().join(''); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T12:57:59.407

```
var Reverse = (function() {
    return {
        reverse1: function(s) {
            var out = "";
            for (var i = s.length - 1, j = 0; i >= 0; i--, j++) out += s[i];
            return out;
        }
    };
})();
console.log(Reverse.reverse1("this is text")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T14:01:06.937

```
var Reverse = (function() {

    return {
        reverse1: function(s) {
            out = '';
            for (var i = s.length - 1; i >= 0; i--) {
                out += s[i];
            }
            return out;
        }
    }
})();

console.log(Reverse.reverse1("this is text")); 
```

# javascript - 遍历一个数组并返回一组连接在一个变量中的数组索引值

> ID：12997966
> 
> 赞同：0
> 
> 时间：2012-10-21T12:52:02.190
> 
> 标签：javascript, arrays, boolean-operations

它不是那么相关的问题，但我想要实现的是下一个：

```
var some_array = [Modernizr.json, Modernizr.csstransforms];

var tests = function() {
    for (var i = some_array .length - 1; i >= 0; i--) {
       ...
    };

    return  Modernizr.json && Modernizr.csstransforms;
}; 
```

我一直在思考我试图向您展示的逻辑，但我无法弄清楚。基本上我需要循环测试数组并在测试之间返回一个布尔运算，更具体地说，我想要获取数组`[Modernizr.json, Modernizr.csstransforms]`并且我想要返回`Modernizr.json && Modernizr.csstransforms`等等（如果数组中有更多值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:24:43.140

如果要检查数组中的所有值是否为真，可以这样做：

```
var some_array = [Modernizr.json, Modernizr.csstransforms];

var tests = function() {
    var result = true;
    for (var i = some_array .length - 1; i >= 0; i--) {
        result = result && some_array[i];
    };
    return result;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T13:35:21.283

使用[`reduce`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)：

```
return some_array.reduce(function(a, b){ return a && b; }); 
```

或者[`reduceRight`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/ReduceRight)如果你想向后迭代。

如果你想在遇到虚假值时打破循环，你也可以使用[`every`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Every).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T14:03:53.923

根据@Bergi 的回答，我找到了一个很好的解决方案：

```
some_array.reduce(function(previousValue, currentValue, index, array){
    return previousValue && currentValue;
}); 
```

# c++ - C++：为什么不能将静态函数声明为 const 或 volatile 或 const volatile

> ID：12997967
> 
> 赞同：9
> 
> 时间：2012-10-21T12:52:06.417
> 
> 标签：c++

> **可能重复：**
> [C++ - 为什么不能使用“const”限定符创建静态成员函数](https://stackoverflow.com/questions/7035356/c-why-static-member-function-cant-be-created-with-const-qualifier)

很想知道静态成员函数不能声明为 const 或 volatile 或 const volatile 的原因吗？

```
#include<iostream>

class Test 
{     
   static void fun() const 
   { // compiler error
       return;
   }
}; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-21T12:54:17.227

成员函数的 cv 修饰符对应于隐藏`this`参数的限定。

`static`函数没有`this`参数。因此，它们不需要 cv 限定符。所以决定（恕我直言，正确，否则，它没有任何意义）在`static`函数中禁止它们。

BTW`static`成员函数也不能是`virtual`,pure( `=0`),deleted,defaulted`&&`等。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-21T12:56:11.460

因为这就是标准所说的：

### 9.4.1 静态成员函数 [class.static.mfct]

> 2) [ 注意：静态成员函数没有 this 指针 (9.3.2)。—尾注]`static`成员函数不应该是`virtual`。不应存在​​具有相同名称和相同参数类型（13.1）`static`的非成员函数。**静态成员函数不得声明为****、** **或**。（强调我的）`static`**`const``volatile``const volatile`**

这样做的原因是`const`（或`volatile`或`virtual`）`static`方法没有意义（在传统意义上，见下文）。例如，`const`意味着您不能修改对象的成员，但在静态的情况下，没有可谈的对象。

你可以争辩说 a`const` `static`可以适用于其他`static`成员，但这个选项被认为是没有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T13:11:01.923

执行静态函数时没有“当前对象”，因此讨论静态函数的存在`const`与否毫无意义。

请注意，您可以`static`使用实例调用函数，但这只是一个奇怪的 C++“特性”（有时很方便，因为在 C++03 中很难获取值的类型）。

```
struct Foo {
    static void f();
};

void bar()
{
    Foo foo_instance;
    foo_instance.f();  // Exactly the same as Foo::f()
} 
```

我可以理解您希望能够描述不改变任何静态数据成员并且也只能调用其他 const 静态函数的“const 静态函数”。

但这种区别在 C++ 中不存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T13:02:25.313

静态成员函数是不依赖于对象（即类实例）的全局、自由函数。非静态成员函数上的 CV 限定符是指调用它们的*对象*的类型，而这个概念根本不适用于静态成员函数。

例子：

```
struct Foo
{
    void f();        // Overload #1
    void f() const;  // Overload #2
    static void g();
};

int main()
{
    Foo x;

    x.f();                            // calls overload #1
    static_cast<Foo const &>(x).f();  // calls overload #2

    Foo::g();                         // does not know about any instance!

    x.g();                            // same as Foo::g(); "x" is a red herring
} 
```

# php - 验证手机号码

> ID：12997969
> 
> 赞同：-3
> 
> 时间：2012-10-21T12:52:17.290
> 
> 标签：php, javascript, mobile

任何人都可以帮助如何使用加纳号码格式验证此脚本中的手机号码。该脚本仅使用印度手机号码进行验证。我想使用加纳手机号码来验证代码。

加纳手机号码以 02 或 05 开头。谢谢。

```
 pic1 = new Image(16, 16); 
pic1.src = "images/loader.gif";

/*function mobile_validation(mobile_number)
{
    var first_digit = mobile_number.charAt(0);
    var number_length = mobile_number.length;
    if(!isValid(mobile_number, 'numeric'))
        return "Please enter valid mobile number.";
    if(mobile_number.indexOf("+91") != -1 || mobile_number.indexOf("0") == 0 || number_length != 10) //ghana country code is +233
        return "Please enter valid mobile number.";
    if(first_digit != 9 && first_digit != 8 && first_digit != 7) //want to change to 02 or 05
        return "Please enter a valid mobile number.";
    if(mobile_number == "9867045061")
        return "Please enter a valid mobile number.";
    return "valid";
}*/

$(document).ready(function(){

$("#mobile").change(function() { 

var usr = $("#mobile").val();
var first_digit = usr.charAt(0);
var number_length = usr.length;

if(usr.length == 10 && !isNaN(usr) && first_digit == 9 || first_digit == 8 || first_digit == 7) // want to change to 02 or 05
{
$("#statusmb").html('<img src="images/loader.gif" align="absmiddle">&nbsp;Sending Verification Code...');

    $.ajax({  
    type: "POST",  
    url: "verify_mobile.php",  
    data: "mobile="+ usr,  
    success: function(msg){  

   $("#statusmb").ajaxComplete(function(event, request, settings){ 

    if(msg == 'OK')
    { 
        $("#mobile").removeClass('object_error'); // if necessary
        $("#mobile").addClass("object_ok");
        $(this).html('&nbsp;<img src="images/ok.png" align="absmiddle">&nbsp;Verification Code Sent to Mobile');
        document.getElementById('btnSubmit').disabled =false;
    }  
    else  
    {  
        $("#mobile").removeClass('object_ok'); // if necessary
        $("#mobile").addClass("object_error");
        $(this).html(msg);
        document.getElementById('btnSubmit').disabled =true;
    }  

   });

 } 

  }); 

}
else
    {
    $("#statusmb").html('&nbsp;<img src="images/alert.png" align="absmiddle">&nbsp;<font color="red">Please Enter <strong>Valid</strong> Mobile No.</font>');
    $("#mobile").removeClass('object_ok'); // if necessary
    $("#mobile").addClass("object_error");
    }

});

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-30T06:56:53.847

您可以使用正则表达式作为

```
var regexMobile = /^[0-9]+$/;
if (mobileLength < 10 || !mobile.match(regexMobile)) {
    document.getElementById("mobile_error").innerHTML = "Enter valid 10 digit Mobile Number";
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:05:53.020

使用正则表达式可以更好地处理手头的问题。该脚本在匹配印度数字模式方面做得很糟糕。

此外，就目前而言，脚本似乎正在对长度和起始数字进行基本验证，然后将其发送到服务器以进行进一步（可能更深入）验证，如该行所示

```
url: "verify_mobile.php", 
```

如果这也是你正在做的，那么你可以简单地改变线

```
if(usr.length == 10 && !isNaN(usr) && first_digit == 9 || first_digit == 8 || first_digit == 7) // want to change to 02 or 05 
```

至

```
if(usr.length == 10 && !isNaN(usr) && first_digit == 0) 
```

假设加纳数字的长度也是 10。

如果您不想坚持使用脚本，请使用其他答案中提供的正则表达式（我推荐）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T13:00:19.417

假设格式为 02 或 05，后跟未定义的数字。那么这个正则表达式应该做：

```
function mobile_validation(mobile_number){
 return mobile_number.match(/^0[2,5]{1}[0-9]+$/) == null? "Please enter a valid mobile number.": "Valid"
} 
```

# objective-c - 在 Mac OS X 上访问功耗详细信息

> ID：12997971
> 
> 赞同：3
> 
> 时间：2012-10-21T12:52:20.260
> 
> 标签：objective-c, power-management

目前，我正在寻找一种方法来访问有关运行 Mac OS X 的设备的功耗数据。我最感兴趣的是瓦特的功耗。提供`IOPowerSources.h`了`IOKit`大量信息，但它仅适用于由电池或 UPS 设备供电的设备。有没有办法访问未由电池供电的 Mac 的电源使用情况？

谢谢！

# google-app-engine - 匿名和机密的应用程序设计

> ID：12997980
> 
> 赞同：1
> 
> 时间：2012-10-21T12:53:23.980
> 
> 标签：google-app-engine, email, confidential

我目前有两个双应用程序，[TellMeStraight](http://tellmestraight.appspot.com/)和[SuggestionDrop](http://suggestiondrop.appspot.com/)，它们可以工作，但有一个小缺陷，这个问题是针对的。这两个应用程序是相同的，只是 TellMeStraight 的某些措辞面向与个人的沟通，而 SuggestionDrop 的措辞针对与公司/组织的沟通。这两个应用程序的目的是允许 (A) 个人或公司/组织与其 (B) 学生/客户/客户/成员/等进行保密/匿名对话。

这是问题所在。虽然从 A 到 B**和**从 B 到 A 的通信是通过一个完全匿名的 Web 链接进行的，但从 B 到 A 的（电子邮件）通信 **似乎**来自 **我**，而不是来自 A，并且在使用该系统时 A 似乎会迷失方向. 问题是 gae 只允许从应用程序所有者发送电子邮件，而不是应用程序用户。您可以从下面代码中的注释行中看出问题所在；当我尝试使用注释掉的行时出现系统错误。（顺便说一句，为了安全起见，我在下面更改了自己的电子邮件地址。）

```
class SendMessage(webapp.RequestHandler):
    def post(self):
        ID_id = self.request.get('ID')
        handle = self.request.get('handle')
        handle = ''.join(handle.split())
        comment = self.request.get('comment')
        key = db.Key.from_path("Person", ID_id)
        person = Person.get(key)
        user_address = person.address
        #sender_address = person.address
        sender_address = 'example@mail.com'
        subject = person.title 
```

所以我的问题是，你对如何重新设计这个应用程序以继续使用 gae 并消除这个问题有什么建议吗？（例如，是否可以使用谷歌“文档”，或者是否可以以某种方式省略我的返回电子邮件地址？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:22:08.417

另一种选择是从[应用程序自己的电子邮件地址](https://developers.google.com/appengine/docs/java/mail/overview#Receiving_Mail)发送电子邮件。任何地址`anything@appid.appspotmail.com`（`appid`您的应用程序的应用程序 ID 在哪里）都是您的应用程序的有效电子邮件地址，您可以在该地址上发送和接收邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T04:34:33.037

[发送邮件文档](https://developers.google.com/appengine/docs/java/mail/overview#Sending_Mail)状态：

`The sender can also be the Google Account email address of the current user who is signed in, if the user's account is a Gmail account or is on a domain managed by Google Apps.`

因此，如果用户通过 Google 帐户系统登录，您可以在用户的​​电子邮件地址下发送电子邮件。Afaik，如果您使用联合登录 (OpenID)，这将不起作用。

# jsf - 下载选定的文件？

> ID：12997990
> 
> 赞同：-5
> 
> 时间：2012-10-21T12:54:24.060
> 
> 标签：jsf, primefaces

```
 public FileDownloadController() {          
    InputStream stream = ((ServletContext)FacesContext.getCurrentInstance().getExternalContext().getContext()).getResourceAsStream("/images/optimusprime.jpg");  
    file = new DefaultStreamedContent(stream, "image/jpg", "downloaded_optimus.jpg");  
} 
```

在上面的代码中，我们只能下载 jpg 文件。我想下载在 UI 中选择的任何格式的文件有什么选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:06:10.033

您需要将 MIME 类型传递`"image/jpg"`给`DefaultStreamedContent`构造函数之外的其他类型。具体来说，传递您尝试下载的任何 MIME 类型，或者[根本不传递 MIME 类型](http://dzeek.homelinux.com/javadoc/primefacesdocs/org/primefaces/model/DefaultStreamedContent.html#DefaultStreamedContent%28java.io.InputStream%29)。

# javascript - 将复杂的文本布局Javascript unicode字符串拆分为单个字符

> ID：12997994
> 
> 赞同：1
> 
> 时间：2012-10-21T12:55:10.830
> 
> 标签：javascript, unicode, character-encoding, google-chrome-extension, tamil

> **可能重复：**
> [Javascript：Unicode 字符串按字符分割](https://stackoverflow.com/questions/10758913/javascript-unicode-string-split-by-chars)

我有一个包含一些泰米尔语字符的 javascript 字符串。我需要将它们拆分为单独的 unicode 字符。split 方法不理解[http://en.wikipedia.org/wiki/Complex_text_layout](http://en.wikipedia.org/wiki/Complex_text_layout)复杂的文本布局。

例如：

在 "கதிரவன்" 上调用 split("") 返回：

,க,த,ி,ர,வ,ன,்</p>

当我预期：

க,தி,ர,வ,ன்

应该怎么做才能正确地从字符串中拆分 unicode 字符？

编辑：我可以在浏览器（chrome）中很好地浏览这些字母。我正在尝试在 chrome 扩展中使用这个 js。因此，如果也有特定于 chrome 的解决方案，我很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:36:27.360

这是完全可行的。

首先，您创建一个集合/字典，其中包含所有类似变音符号的字符作为键，我们可以将其命名为`diacritics`，并仅使用对象字面量实现它：

```
var diacritics = {'\u0bbf':true,'\u0bcd':true,...}; 
```

然后这样做：

```
var tempList = "கதிரவன்".split('');
var targetList = [];
for(var idx in tempList){
  if(diacritics[tempList[idx]])
    targetList[targetList.length - 1] +=  tempList[idx];
  else
    targetList.push(tempList[idx]);
} 
```

我们甚至不需要 a `tempList`，只需按 char 循环遍历 str char 就可以了：

```
for(var i = 0; i != str.length; ++i){
  var ch = str[i];
  diacritics[ch] ? (targetList[targetList.length - 1] += ch) : targetList.push(ch);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:18:01.677

您是否尝试过像[https://github.com/reyesr/javascript-unicode](https://github.com/reyesr/javascript-unicode)这样的 unicode 库，它提供与 unicode 类型相关的方法，例如测试标点符号或分隔符并根据它进行拆分（您将无法使用String.split() 方法虽然我猜）。或者，使用 unicode 表中的所有分隔符创建一个大的正则表达式，并使用它来拆分您的文本。我认为您并不缺乏选择，尽管您对缺乏本机支持是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T12:59:21.577

我担心您最好的解决方案是构建和使用 Web 服务来完成这项工作。将必要的数据和算法移植到 javascript 中将是一项艰巨的工程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T13:04:42.837

从 javascript 手动执行这将是安静的笨重，因为 javascript 本身虽然是 unicode，但将字符串解释为 ascii。有关为什么这不是一个选项以及可能的解决方法的信息，请参阅[这篇文章](https://stackoverflow.com/questions/10758913/javascript-unicode-string-split-by-chars)。

# c - 蓝牙SDP结构

> ID：12997996
> 
> 赞同：0
> 
> 时间：2012-10-21T12:55:56.537
> 
> 标签：c, winapi, bluetooth, sdp

SDP流的结构是什么？我正在尝试在 Windows 7 中添加新的 SDP 蓝牙记录，但我无法理解“原始流”内容是什么。我知道我需要放在那里，我只是不知道格式/协议，而这次谷歌并没有帮到我很多。

它与[IOCTL_BTH_SDP_SUBMIT_RECORD_WITH_INFO一起使用](http://msdn.microsoft.com/en-us/library/windows/hardware/ff536694%28v=vs.85%29.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:18:29.290

查看[核心版本 2.1 + EDR](https://www.bluetooth.org/docman/handlers/downloaddoc.ashx?doc_id=241363)，卷。3 B 部分 - SDP。我正在查看 SADP 蓝牙配置文件，因此很难找到它。