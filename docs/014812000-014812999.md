# StackOverflow 问答 14812000-14812999

# python - 为什么 Python 从不正确的路径给我一个错误？

> ID：14812003
> 
> 赞同：0
> 
> 时间：2013-02-11T12:34:07.827
> 
> 标签：python, windows-xp, python-2.5

好的，这真的很奇怪……我在 Windows XP 上运行 Python 2.5，并使用 easy_install 来获取库 java2python。我试图运行 j2py.py，但每当我这样做时，它都会给我这个错误：

```
 C:\Python25\Lib\site-packages>j2py.py
Traceback (most recent call last):
  File "C:\Python25\Lib\site-packages\j2py.py", line 16, in 
    from java2python.compiler import Module, buildAST, transformAST
  File "C:\Python25\Lib\site-packages\__init__.py", line 9, in 

  File "c:\python25\lib\site-packages\java2python-0.5.1-py2.5.egg\java2python\co
mpiler\block.py", line 16, in 
  File "c:\python25\lib\site-packages\java2python-0.5.1-py2.5.egg\java2python\co
mpiler\visitor.py", line 15, in 
ImportError: cannot import name reduce 
```

于是我进入了java2python-0.5.1-py2.5.egg文件夹，删除了reduce的导入。这仍然会导致错误，但我当时并不知道。我再次运行它，即使该行已被删除，它也有完全相同的错误。我将 java2python-0.5.1-py2.5.egg 目录的 java2python 文件夹移出到 site-packages 目录中，它给了我同样的错误。我从easy_install.pth中删除了java2python-0.5.1-py2.5.egg，同样的错误。我什至在同一个命令提示符下执行了这个命令：

```
 C:\Python25\Lib\site-packages>cd c:\python25\lib\site-packages\java2python-0.5.1
-py2.5.egg\java2python\compiler
The system cannot find the path specified. 
```

我只是不明白。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:35:56.583

导入的 reduce 表明 java2python 是在比 2.5 更新的 python 版本上制作和测试的。删除后错误仍然存​​在可能是因为 visitor.py[c] 仍在您的路径中并且由于某种原因未更新。尤其是在您完全删除后它仍然存在`.egg`

我会尝试导入访问者，然后用于`vistory.__file__`查看正在加载的文件的实际文件位置。

# iphone - 如何在 iPhone 中向 NSDate 对象添加 1 分钟的时间间隔

> ID：14812004
> 
> 赞同：3
> 
> 时间：2013-02-11T12:34:07.887
> 
> 标签：iphone, ios, nsdate

我能够获取本地时间的任何位置。我的要求是，一旦我获取本地时间，我需要在 NSDate 之后每分钟添加 1 分钟。例如：我得到这样的时间：11:22 并且我能够显示下一分钟应该是 11:23。

请帮我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T12:44:14.543

```
NSDate *currentDate = [NSDate date];
NSDate *datePlusOneMinute = [currentDate dateByAddingTimeInterval:60]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-12T12:47:01.113

Omarj 的答案看起来很适合简单的测试，但我喜欢使用这段代码：

```
NSDateComponents *changeComponent = [[NSDateComponents alloc] init];
changeComponent.second = 20;

NSCalendar *theCalendar = [NSCalendar currentCalendar];
NSDate *newDate = [theCalendar dateByAddingComponents:changeComponent toDate:[NSDate date] options:0]; 
```

正如您可能看到的，您可以将 changeComponent 更改为分钟、小时、天，或者在我的例子中，秒！这对于测试我目前正在处理的本地通知非常有用。

此解决方案的最大好处是它考虑了日历，因此例如在夏令时更改时添加小时数应该没有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-13T11:07:49.873

请检查此代码。

```
 NSString* dateString = @"9:33AM";
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"hh:mma"];
[formatter setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];
NSDate *date = [formatter dateFromString:dateString];
NSLog(@"Before Adding time %@",date);
NSDate *newDate = [date dateByAddingTimeInterval:14*60];
NSLog(@"After adding time %@",[formatter stringFromDate:newDate]); 
```

# java - 旋转平面，使其法线与另一个平面的法线方向相同

> ID：14812005
> 
> 赞同：0
> 
> 时间：2013-02-11T12:34:11.203
> 
> 标签：java, math, opengl, 3d

我的问题是我在世界空间中有一个曲面（三个 3D 点），我想旋转它，以便这三个点的法线与另一个平面的法线相同，同时保持原始曲面的“三角形”。

如果“目标”平面的法线为 (0, 0, 1)，并且该平面上的点为 (0, 0, 0)，“源”点为 [-0.5, -0.5, -0.5] [ -0.5, -0.5, 0.5] [-0.5, 0.5, 0.5]，我必须进行什么计算才能旋转这些点以使表面法线变为 (0, 0, 1)？

我尝试使用以下方法“projectPointToPlane”简单地将“源”点“投影”到“目标”平面：

```
public static Vector3f projectPointToPlane(Vector3f point, Vector3f planePoint, Vector3f planeNormal)
{
    float dot = EEngineUtils.getDotProduct(EEngineUtils.getProjectionVector(point, planePoint), planeNormal);
    return new Vector3f(point.getX()+planeNormal.getX()*-dot, point.getY()+planeNormal.getY()*-dot, point.getZ()+planeNormal.getZ()*-dot);
}

public static Vector3f getProjectionVector(Vector3f to, Vector3f from)
{
    return new Vector3f(to.getX()-from.getX(), to.getY()-from.getY(), to.getZ()-from.getZ());
}

public static float getDotProduct(Vector3f v1, Vector3f v2)
{
    return (v1.getX()*v2.getX())+(v1.getY()*v2.getY())+(v1.getZ()*v2.getZ());
} 
```

但是，我没有得到我希望的结果。例如，以下是源点：

Vector3f[-0.5, -0.5, -0.5] | Vector3f[-0.5, -0.5, 0.5] | Vector3f[-0.5, 0.5, 0.5]

这是投影的结果点：

Vector3f[-0.5, -0.5, 0.0] | Vector3f[-0.5, -0.5, 0.0] | Vector3f[-0.5, 0.5, 0.0]

前两个结果点是相同的，这不是我想要的。我希望生成的“三角形”的形状相同（在本例中为直角三角形）。我的假设是“投影”不是我需要的，而我真正需要的是某种“旋转”，但是我不确定如何实现这一点。

我想过找到两个表面法线之间的角度并将点旋转该角度，但我不知道要使用什么“轴”向量进行旋转。任何帮助，将不胜感激。如果我太含糊，请告诉我。

注意我在 Java 中使用 LWJGL API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:18:58.750

使用交叉产品。三角形的当前法线是建立在其顶点上的向量的叉积（归一化后）。旋转轴是平面法线 (0,0,1) 和三角形法线的叉积。旋转角的正弦是最后一个叉积的长度（假设法线被归一化，即法线是单位向量）。

在您的情况下：三角形 A:[-.5,-.5,-.5] B:[-.5,-.5,.5] C:[-.5,.5,.5]

形成这个三角形的向量

AB：[-.5,-.5,.5]-[-.5,-.5,-.5]=[0,0,1]

交流电：[-.5,.5,.5]-[-.5,-.5,-.5]=[0,1,1]

叉积：AB x AC =[-1,0,0]，这已经归一化，这是 ABC 三角形的法线

旋转轴：[-1,0,0] x [0,0,1]=[0,1,0]

正弦旋转角度为1，即角度为90度。

旋转角的余弦是法向量 [-1,0,0] 的标量积。[0,0,1]=0，这也给出了 90 度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:06:45.920

这本质上是一种查看操作，尽管增加了复杂性，即两个法线都不一定指向您的轴之一。

因此，您可以形成两个矩阵，将两个平面沿公共轴定向，然后将一个乘以另一个的倒数（在这种形式下，倒数只是转置，所以它是微不足道的）。

查看矩阵很容易计算，只使用几个叉积和一些归一化。

（如果你的“目标”平面*实际上是*定向的，它的法线是一个轴，只需直接构建观察矩阵）。

# php - 将十六进制字符串发送到串行端口

> ID：14812006
> 
> 赞同：0
> 
> 时间：2013-02-11T12:34:13.973
> 
> 标签：php, serial-port

我可以通过使用以字符串形式将数据发送到串行端口

```
fwrite($this->_dHandle, $this->_buffer,1024); 
```

它在纸上打印字符串，但我的要求是在热敏打印机中打印图像我有正确的十六进制字符串
在 c# 中打印图像有一个选项，例如

```
comport.Write(data, 0, data.Length); 
```

当我将十六进制字符串转换为字节数组并将其发送到它刚刚打印的串口时，数据是字节数组的形式。是否有任何重载函数可以提前将字节数组发送到 Thnx中`Array`的串口`PHP5.3`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:40:22.220

不，php的fwrite没有这样的机制。但是，函数本身可以与二进制字符串一起使用，因此您只需创建一个二进制字符串，并且可能最简单的方法是使用函数[pack](http://php.net/pack)。

注意：如果您的操作系统区分文本文件和二进制文件（Windows 可以），则文件应按原样打开（modeflag b，请参阅[文档](http://www.php.net/manual/en/function.fopen.php)）。

# iphone - UILocalNotification 触发日期问题

> ID：14812007
> 
> 赞同：0
> 
> 时间：2013-02-11T12:34:14.657
> 
> 标签：iphone, ios, objective-c, uilocalnotification

我正在使用 UILocalNotification 为我的应用程序中的日历事件安排警报

我在我的应用程序中安排了下午 3:30 的活动，并将警报设置为 1 小时前。

在 2:30，警报出现（预期），但它表示事件是现在。另一方面，本机警报显示事件发生在 1 小时后。

**编辑：**这是我如何安排通知：

```
 UILocalNotification *localNotification = [[[UILocalNotification alloc] init]autorelease];

        localNotification.fireDate = fireDate;

        localNotification.timeZone = [NSTimeZone defaultTimeZone];
        localNotification.alertBody = [NSString stringWithFormat: @"%@ \n%@ at: %@",title,todayString,[formatter stringFromDate:Startdate]];
        localNotification.alertAction = NSLocalizedString(@"Luanch", nil);

        NSMutableDictionary *dict = [[[NSMutableDictionary alloc] init] autorelease];

        [dict setObject:ID forKey:@"id"];
        [dict setObject:Startdate forKey:@"start"];
        [dict setObject:endDate forKey:@"end"];
        [dict setObject:[NSNumber numberWithInt:relativeOffset] forKey:@"offset"];
        localNotification.userInfo = dict;
        localNotification.soundName = UILocalNotificationDefaultSoundName;

        [[UIApplication sharedApplication] scheduleLocalNotification:localNotification]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T14:53:21.717

只是本机警报在特定时间后显示事件，其他应用程序显示带有 NOW 标签的警报，因此无法从通知中心隐藏 NOW 标签。

# c# - appsetting节点中的子appsettings c#

> ID：14812008
> 
> 赞同：37
> 
> 时间：2013-02-11T12:34:19.373
> 
> 标签：c#, app-config

我正在使用通过控制台应用程序创建的 app.config 文件，我可以使用`ConfigurationSettings.AppSettings["key1"].ToString()`

```
<configuration>  
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0" />
    </startup>  
    <appSettings>
        <add key="key1" value="val1" />
        <add key="key2" value="val2" />  
    </appSettings> 
</configuration> 
```

但是我有太多的键和值要对它们进行分类。

我发现了一些难以在我的应用程序中使用的东西，因为我想以与上述类似的方式访问密钥

[显示所有节点并且在没有获取所有节点的情况下无法读取节点](http://www.codeproject.com/Articles/12267/Custom-AppSettings)

例如我想做什么：

```
<appSettings>
    <Section1>
        <add key="key1" value="val1" />
    </Section1>
    <Section2>
        <add key="key1" value="val1" />
    <Section2>
</appSettings> 
```

如果有办法使用 `ConfigurationSettings.AppSettings["Section1"].["key1"].ToString()`

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-02-11T13:19:32.697

您可以在 app.config 中添加自定义部分，而无需编写其他代码。您所要做的就是`configSections`像这样在节点中“声明”新部分

```
<configSections>
      <section name="genericAppSettings" type="System.Configuration.AppSettingsSection, System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  </configSections> 
```

然后你可以定义这个部分，用键和值填充它：

```
 <genericAppSettings>
      <add key="testkey" value="generic" />
      <add key="another" value="testvalue" />
  </genericAppSettings> 
```

要从此部分获取键的值，您必须添加`System.Configuration`dll 作为对项目的引用，添加`using`和使用`GetSection`方法。例子：

```
using System.Collections.Specialized;
using System.Configuration;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            NameValueCollection test = (NameValueCollection)ConfigurationManager.GetSection("genericAppSettings");

            string a = test["another"];
        }
    }
} 
```

好消息是，如果需要，您可以轻松地制作部分组：

```
<configSections>
    <sectionGroup name="customAppSettingsGroup">
      <section name="genericAppSettings" type="System.Configuration.AppSettingsSection, System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
 // another sections
    </sectionGroup>
</configSections>

  <customAppSettingsGroup>
    <genericAppSettings>
      <add key="testkey" value="generic" />
      <add key="another" value="testvalue" />
    </genericAppSettings>
    // another sections
  </customAppSettingsGroup> 
```

`{group name}/{section name}`如果您使用组，要访问部分，您必须使用以下格式访问它们：

```
NameValueCollection test = (NameValueCollection)ConfigurationManager.GetSection("customAppSettingsGroup/genericAppSettings"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:46:48.167

AFAIK 您可以在 appsettings 之外实现自定义部分。例如，Autofac 和 SpecFlow 等框架使用这些类型的会话来支持它们自己的配置模式。您可以查看[此](http://msdn.microsoft.com/en-us/library/2tw134k3%28v=vs.100%29.aspx)MSDN 文章以了解如何执行此操作。希望有帮助。

# nhibernate - 如何获得 NHibernate ICriteria 的限制

> ID：14812018
> 
> 赞同：-1
> 
> 时间：2013-02-11T12:34:57.040
> 
> 标签：nhibernate

在我的系统中，我将创建标准和执行标准的地方分开。我想从 ICriteria 的特定实例中获取限制列表，以执行更改、重用或构建新的标准实例。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:06:11.960

标准 API 不是为此而设计的。您可以查看底层的 CriteriaImpl 类，但就像我说的那样，它不是为此而设计的。如果您避免强制您滥用 NHibernate API 的设计，您可能会拥有一个更加健壮的系统。例如，通过将参数传递给您将在创建时直接影响标准的标准创建代码。

# ms-access - 将代码应用于多个控制字段

> ID：14812024
> 
> 赞同：1
> 
> 时间：2013-02-11T12:35:20.297
> 
> 标签：ms-access

我正在使用下面的代码来更改组合框和标签的属性。我还有另外 40 个组合框和标签（组合 2、组合 3、组合 4 ......）。有没有办法我可以重用代码而不是复制代码并且必须手动更改每个组合框和标签的名称。

```
If (Combo1 = 1) Then
    DoCmd.SetProperty "Combo1", acPropertyBackColor, "255"
    DoCmd.SetProperty "Label1", acPropertyCaption, "POOR"
ElseIf (Combo1 = 2) Then
    DoCmd.SetProperty "Combo1", acPropertyBackColor, "2895086"
    DoCmd.SetProperty "Label1", acPropertyCaption, "FAIR"
ElseIf (Combo1 = 3) Then
    DoCmd.SetProperty "Combo1", acPropertyBackColor, "35584"
    DoCmd.SetProperty "Label1", acPropertyCaption, "GOOD"
ElseIf (Combo1 = 4) Then
    DoCmd.SetProperty "Combo1", acPropertyBackColor, "52480"
    DoCmd.SetProperty "Label1", acPropertyCaption, "VERY GOOD"
ElseIf (Combo1 = 5) Then
    DoCmd.SetProperty "Combo1", acPropertyBackColor, "64636"
    DoCmd.SetProperty "Label1", acPropertyCaption, "EXCELLENT"
Else
    DoCmd.SetProperty "Combo1", acPropertyBackColor, "16579836"
    DoCmd.SetProperty "Label1", acPropertyCaption, ","
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T14:06:02.140

您可以创建一个接收combo1 整数值以及ComboBox 和Listbox 控件作为参数的子过程。该过程如下所示：

```
Public Sub SetupProperties(combo1 As Integer, ChangeComboBox As Access.ComboBox, ChangeLabel As Access.Label)

Dim longBackColour As Long
Dim stringCaption As String
' set up  background colour and caption
If (combo1 = 1) Then
    longBackColour = 255
    stringCaption = "POOR"
ElseIf (combo1 = 2) Then
    longBackColour = 2895086
    stringCaption = "FAIR"
ElseIf (combo1 = 3) Then ' and so on...

End If
' Change properties of the controls
ChangeComboBox.BackColor = longBackColour
ChangeLabel.Caption = stringCaption 
```

结束子

然后从循环中调用该过程，如下所示：

```
Dim combo1 As Integer
combo1 = 1
Dim integerCounter As Integer
For integerCounter = 1 To 40
    SetupProperties combo1, Me.Controls("Combo" & Trim(CStr(integerCounter))), Me.Controls("Label" & Trim(CStr(integerCounter)))
Next 
```

# python - 在 URLconf 中设计 URL

> ID：14812029
> 
> 赞同：-1
> 
> 时间：2013-02-11T12:35:32.940
> 
> 标签：python, django

使用 Django 开发 Web 应用程序时，为什么需要 URLconf？我正在尝试为 Web 应用程序创建一个，但我不明白它是如何编写的。:(

我从 djangoproject.com 获得了这个 URLconf 示例。有人能帮我解释一下这里的模式是如何写的吗？什么是 (\d{4})、(\d{2}) 和 (\d+)/ ？

```
from django.conf.urls import patterns, url, include

urlpatterns = patterns('',
    (r'^articles/(\d{4})/$', 'news.views.year_archive'),
    (r'^articles/(\d{4})/(\d{2})/$', 'news.views.month_archive'),
    (r'^articles/(\d{4})/(\d{2})/(\d+)/$', 'news.views.article_detail'),
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:39:26.640

Django URL 模式实际上是 python 正则表达式。`\d{4}`表示 4 位数字。`\d+`表示至少一个（或多个）数字。[这是对该主题的快速介绍](http://www.regular-expressions.info/quickstart.html)。

# jquery - 在一个页面中使用多个版本的 jQuery

> ID：14812031
> 
> 赞同：0
> 
> 时间：2013-02-11T12:35:42.097
> 
> 标签：jquery, asp.net-mvc

我已经生成了脚本，但无法在“head”中删除它们，现在我遇到了问题，因为我的脚本之一使用 JQuery 1.7，但网站只能看到 JQuery 1.8

**头：**

```
<script src="/Modules/Orchard.jQuery/scripts/jquery-1.7.1.js" type="text/javascript"></script>
<script src="/Themes/MS/scripts/jquery-1.8.1.min.js" type="text/javascript"></script> 
```

你知道我必须做什么吗？告诉网站：“这个脚本使用 JQuery 1.7”

```
<script  type="text/javascript">
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:52:53.753

试试这个：希望这会有所帮助

使用`.noconflict()` [http://forum.jquery.com/topic/multiple-versions-of-jquery-on-the-same-page](http://forum.jquery.com/topic/multiple-versions-of-jquery-on-the-same-page)

# iphone - 在后台线程中使用“setNeedsDisplay”方法时访问不正确

> ID：14812036
> 
> 赞同：0
> 
> 时间：2013-02-11T12:35:56.667
> 
> 标签：iphone, ios, objective-c

我的应用程序中有一个对象拖动和视频录制。我`ScreenCapture`在我的应用程序中使用视图。我正在拍摄主屏幕的屏幕截图并制作视频。

当我在视图`drawRect()`方法中使用以下代码时`ScreenCapture`，iOS 6 的拖动速度变慢，而 iOS 5 则可以正常工作：

```
[self performSelector:@selector(setNeedsDisplay) withObject:nil
      afterDelay:delayRemaining > 0.0 ? delayRemaining : 0.01]; 
```

当我用以下代码替换那行代码时，拖动工作正常，但访问不正确：

```
[self performSelectorInBackground:@selector(setNeedsDisplay) withObject:nil]; 
```

这是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:08:24.143

因为那个drawRect方法只在mainThread上工作。苹果文件说 UIKit 只工作主线程。所以你需要在主线程中设置需要布局

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:42:19.993

你应该只在主线程中调用 UI 方法，所以你不能这样做。

如果您的视图很慢，那么您需要安排在后台线程中做一些昂贵的事情，这将使主线程中的绘图更快。

您调用的实际方法无论如何都没有做任何事情。它只是标记要重绘的视图。工作还需要发生在`drawRect`方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:54:15.530

**不应该在****主线程**上调用正在更新的 UIKit 控件。因为 UIKit 类不是线程安全的。

我使用过 ScreenCaptureView 类。在这种情况下，您可以在后台调用另一个方法并在该方法中使用 drawRect 代码，如下所示，

```
[self performSelectorInBackground:@selector(callCodeInsideDrawRect) withObject:nil];

-(void)callCodeInsideDrawRect
{
 //any code which is required to be called in background (drawRectCode)
 //in ur case draw rect block

} 
```

# c# - MoonAPNS（以前是：从 ASP.Net/C# 中运行 PHP 脚本？）

> ID：14812041
> 
> 赞同：0
> 
> 时间：2013-02-11T12:36:08.867
> 
> 标签：c#, php, ios, web-services, apple-push-notifications

我有一个 PHP 脚本（取自[此处](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)）将 APNS 通知发送到 iOS 应用程序，但该应用程序的 Web 服务是用 C#/ASP.Net 编写的。

我已经设法在服务器上安装 PHP 并从命令行测试了脚本，但不知道如何从 Web 服务中执行此操作（或者即使这是可能的）。

有没有办法从 ASP.Net 中运行 PHP 文件，或者我最好尝试用 C# 重写 PHP 脚本？

-编辑- 更多搜索出现了[这个](http://thinknook.com/execute-php-file-within-c-sharp-2011-12-10/)，这促使我尝试以下代码，但没有成功：

```
public void PushNotificationAlert()
{
    string call = @"""php.exe""";
    string param1 = @"-f";
    string param2 = @"""~\APNS\myPush.php""";

    Process myProcess = new Process();
    ProcessStartInfo myProcessStartInfo = new ProcessStartInfo(call);
    myProcessStartInfo.UseShellExecute = false;
    myProcessStartInfo.RedirectStandardOutput = true;
    myProcessStartInfo.Arguments = string.Format("{0} {1}", param1, param2);
    myProcess.StartInfo = myProcessStartInfo;

    myProcess.Start();
    StreamReader myStreamReader = myProcess.StandardOutput;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:45:01.330

如果有人仍然感兴趣，这是我与 Moon 一起使用的代码，最终有效：

```
// use MoonAPNS to send push notification
NotificationPayload payload = new NotificationPayload(deviceToken, message, badge, "default");
var notificationList = new List<NotificationPayload>() { payload };   
PushNotification push = new PushNotification(true, p12file, p12pass);
var result = push.SendToApple(notificationList); 
```

# c# - 语言相关部分子串的国际化 (i18n)

> ID：14812043
> 
> 赞同：2
> 
> 时间：2013-02-11T12:36:18.967
> 
> 标签：c#, .net, internationalization, gettext

用这样的一句话：

```
"I visited this place {0} {1} ago." 
```

While`{0}`代表整数，`{1}`分别是单词“year”或“years”。现在，在俄语中，“年”这个词不仅仅是单数或复数，而是取决于确切的数字（год-года-лет）。因此，任何仅区分“年”或“年”的规则对于俄语来说都是不够的。

现在，我需要的信息是：有没有办法在资源包或源代码中添加规则，保留整个字符串，或者我必须将字符串拆分为

```
"I visited this place {0} " + "{1} " + "ago." 
```

...扩展源代码中的规则？你如何处理这样的问题？有没有最佳实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:40:21.723

## i18n 的黄金法则

**不要通过连接本地化字符串来产生本地化输出。曾经。出于任何原因。**

* * *

在这里，您在一段较大的文本中插入本地化形式的“年/年”违反了此规则。对于您的具体示例，这很容易解决 - 只需将“N year(s)”作为一个整体本地化并插入那个代替 - 但这并不能真正解决问题。有些语言的结构甚至更依赖于上下文，这种方法在某些时候会致命地崩溃。

为了获得最佳结果，您应该将字符串作为一个整体进行本地化。对于俄语语言环境，字符串应该有 3 种不同的形式，具体取决于“years”参数的值（我不懂俄语，所以不知道哪种形式用于什么值）。

我不确定您使用的是什么 i18n 技术，但 gettext （问题被标记）支持这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:05:48.797

在某种程度上，您已经回答了您的问题。您不应该连接字符串。基本上，占位符可用于数字、日期和动态文本。
我认为度量单位（在这种情况下为时间）***不是***动态文本。

你如何解决这个问题？

我会给你一些关于两个想法的基本蓝图。两者都需要使用完整的句子。

1.  您可以重新排列句子，这样您就不会遇到复数的问题，即“该地点已被访问过这个年数|月|天|小时|分钟前：{0}”。
    这有明显的缺点，听起来不自然。虽然我不能给你一个这个概念不起作用的语言例子，但这种语言存在的可能性非零（斯拉夫语言不在其中，这是肯定的。）

2.  使用一些基于规则的选择方法从资源文件中选择有效的复数形式。为此，您只需要了解一些[Language Plural Rules](http://unicode.org/repos/cldr-tmp/trunk/diff/supplemental/language_plural_rules.html)。基本上，您可以自己使用这些[CLDR 规则](http://unicode.org/repos/cldr-tmp/trunk/diff/supplemental/language_plural_rules.html)，也可以决定其他内容，例如包装[ICU4C 的](http://site.icu-project.org/) [PluralRules](http://icu-project.org/apiref/icu4c/classicu_1_1PluralRules.html)类并使用其[select 方法](http://icu-project.org/apiref/icu4c/classicu_1_1PluralRules.html#ac852e899965b402897b758d38a405559)来很好地选择有效的复数形式。[ICU 项目站点](http://site.icu-project.org/related)甚至列出了可以在 C# 应用程序中使用的现有包装器，即
    GenICUWrapper[和](http://source.icu-project.org/repos/icu/icuapps/trunk/CSharp/genicuwrapper/)ICU [-Dotnet](https://github.com/sillsdev/icu-dotnet)。

就个人而言，我推荐后一种方法（使用 ICU 包装器）。您可能希望看到[我](https://stackoverflow.com/a/14327683/247221)对 Java 解决方案类似问题的回答。我相信 .Net 将基于相同的想法，只有你会使用`string.Format()`而不是`MessageFormat`你会以 .Net 的方式阅读资源（无论你实际喜欢什么风格）。

# c# - 在 32 位操作系统中使用 64 位 dll

> ID：14812050
> 
> 赞同：0
> 
> 时间：2013-02-11T12:36:46.110
> 
> 标签：c#

目前我有一个用 C# 编写的应用程序。在内部，我正在使用另一个 3rd 方 dll，它也是用 C# 编写并在 32 位 Windows 中编译的。第 3 方 dll 将在 64 位窗口中发布，最终我必须使用这个新的 dll。但我现在不想迁移到 64 位操作系统。

我的问题：这个新的 dll 会影响我现有的代码吗？如果是，那么我需要如何以及进行哪些更改以适应此功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:42:14.887

我很确定您不能在 32 位 Windows 中使用 64 位 DLL。

您可以使用诸如 thunking 之*类*的技巧或 WoW64 之类的 32 位子系统之类的技巧，但您在 32 位版本中没有对 64 位代码的所有支持。

希望您的第三方将继续提供其 DLL 的 32 位版本，这样您就不必担心了。如果没有，并且您想升级，您也需要使用 64 位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T12:54:13.527

如果第三方库是 C# 库，*则应*编译为 AnyCPU。（请与作者确认。）

如果它*被*编译为 AnyCPU，那么如果你从 32 位程序中使用它，它将作为 32 位运行，如果你从 64 位程序中使用它，它将作为 64 位运行。

否则，您将需要更改自己的程序以匹配 DLL。但是，如果他们没有将其设置为 AnyCPU，我会向他们抱怨......或者找出他们的动机是什么（可能是使用非托管 DLL）。

# php - 如何在php中显示选定的多个下拉选项

> ID：14812056
> 
> 赞同：1
> 
> 时间：2013-02-11T12:36:59.067
> 
> 标签：php, select, drop-down-menu, options

首先看我的代码。

```
 <select multiple name='assign_to[]'>
                    <?
                $result_10 = mysql_query("select * from login_users") or die(mysql_error());
                while($row_10 = mysql_fetch_object($result_10))
                {
                    echo "<option  value=".$row_10->user_id.">".$row_10->username."</option>";
                }
                ?>
    </select> 
```

我可以在提交页面时获得价值，这没有问题，但我的问题是：

提交页面后，我将重定向到同一页面，然后我希望在提交表单之前选择的选项将在提交页面后被选中。

PHP 代码要写在那里。我为**单个选定**的下拉列表做了什么：

```
<?
while($row_10 = mysql_fetch_object($result_10))
                    {
?>
       <option <?=$row_10->user_id==$_POST['assign_to']?'selected':''?> value="<?=$row_10->user_id?>"><?=$row_10->username?></option>
<?
                    }

?> 
```

希望你得到我的问题？

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:41:28.093

```
if(in_array($row_10->user_id,$_POST['assign_to'])){echo "selected"}else{echo ""} 
```

由于您的 $_POST['assign_to'] 是一个数组，我想这会起作用。

或者您可以使用条件运算符：

```
<option <?= in_array($row_10->user_id,$_POST['assign_to']) ? 'selected' : ''?> value="<?=$row_10->user_id?>"><?=$row_10->username?></option> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:41:02.650

使用[in_array](http://php.net/manual/en/function.in-array.php)

```
 <option <?=$row_10->user_id=$_POST['assign_to']?'selected':''?> value="<?=$row_10->user_id?>"><?=$row_10->username?></option> 
```

用。。。来代替

```
<option <?= (in_array($row_10->user_id,$_POST['assign_to'])) ? 'selected' : ''?> value="<?=$row_10->user_id?>"><?=$row_10->username?></option> 
```

您将以数组的形式获取所选值，因此请检查该值是否存在于数组中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T12:43:13.677

当您使用多个选择框时，您将收到 POST 变量中的值数组，因此您需要检查该值是否存在于该数组中，而不是等同于它

您可以尝试如下所示的 in_array 函数：

```
<?
while($row_10 = mysql_fetch_object($result_10))
         {
         ?>
         <option <?=in_array($row_10->user_id,$_POST['assign_to'])?'selected':''?> value="<?=$row_10->user_id?>"><?=$row_10->username?></option>
         <?
         }
?> 
```

# tridion - 在 SDL Tridion 中设置项目的发布状态

> ID：14812061
> 
> 赞同：4
> 
> 时间：2013-02-11T12:37:21.317
> 
> 标签：tridion, tridion-2011

使用 SDL Tridion 2011 SP1。

TOM .NET 中是否有一种方法可以将 SDL Tridion 中项目的已发布状态设置为已发布/未发布，而无需实际发布/取消发布该项目？

我记得在 TOM API 中有这样的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:14:51.663

请指定您的 SDL Tridion 版本，包括 Service Pack 和任何修补程序汇总。

某些 TOM.NET 版本是只读的。除非您在模板或事件系统中执行此操作，否则您可能需要使用核心服务执行此操作，因为其他代码不支持使用 TOM.NET。虽然我不相信目前使用核心服务也可以做到这一点。

另请查看使用旧 Interops 的这篇文章：[如何在 Tridion 组件上设置 IsPublishedTo 状态？](https://stackoverflow.com/questions/11327484/how-to-set-ispublishedto-status-on-a-tridion-component)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T13:55:01.120

项目的发布状态是只读属性，只有发布者进程才能更改。因此，不，您不能通过 TOM.NET 或 CoreService 更改其状态。

现在您仍然可以像以前一样使用 TOM/TDSE 来更改它。我相信有一个增强请求允许 CoreService 这样做，我会检查状态。

# windows - cmd.exe 中区分大小写的目录

> ID：14812068
> 
> 赞同：2
> 
> 时间：2013-02-11T12:37:30.110
> 
> 标签：windows, cmd, dir, glob

我刚刚经历了`dir *T.java`在 cmd.exe 中的搜索`SortedArrayList.java`以及`ReaderT.java`（我的测试类文件名结构）。我无法从帮助输出中推断出区分大小写的开关`dir /?`。不过还有办法吗？

*附录：我从答案中假设“Windows 文件系统”指的是 NTFS 或 FAT[32]。*

出于我的目的，我从使用的答案中得到启发，`dir /b /s *T.class | grep T\.` 这创造了一个新[问题](https://stackoverflow.com/questions/14814733/cmd-exe-s-dir-bare-format-no-heading-no-summary)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T12:44:01.137

只是一个快速的 google-fu：

> 1.1 Windows文件系统介绍
> 
> 在 Windows 中，文件组织在目录（也称为文件夹）中。目录以分层树结构组织，从根目录开始。目录可能包含子目录和文件。根目录表示为“\”（反斜杠）。Windows 的文件系统进一步组织在驱动器中，由驱动器号后跟冒号标识（例如，C:、D:、E:）。每个驱动器都有自己的根目录，如C:\、D:。Windows 的文件系统不区分大小写，玫瑰就是玫瑰，玫瑰就是玫瑰。

所以不，使用 DIR 时没有“区分大小写”选项。另一方面，您可以尝试在将执行文件搜索的程序一侧检查是否区分大小写。在这种情况下，我认为是 Java。只需获取所有匹配的文件，然后在 Java 中过滤掉不区分大小写的匹配项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T12:46:58.667

据我所知不是。Windows 文件系统不区分大小写，直到最近你不能依靠你的大写来保留（好吧，所以我现在回想几个版本的 Windows）。因此，因此，Microsoft 的`dir`命令完全忽略了您可能需要区分大小写的事实。

相反，您应该尝试通过`grep`Windows 管道输出，这是 GnuWin32 项目的一部分：http: [//gnuwin32.sourceforge.net/packages/grep.htm](http://gnuwin32.sourceforge.net/packages/grep.htm)

完整的软件包列表位于： http: [//gnuwin32.sourceforge.net/packages.html](http://gnuwin32.sourceforge.net/packages.html)

如果你有 Linux 背景并且被迫在 Windows 命令 shell 中做任何远程有用的事情，那么这些东西是非常有用的。

所以，长话短说，你想做这样的事情：

```
dir /b | grep T\.java 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-05T17:07:03.317

如果您不想安装其他工具，可以使用 find 而不是 grep。

```
dir /b /s | find "T.class" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-25T13:12:32.023

如果您不介意使用 PowerShell，那么您也可以尝试

```
dir | Where-Object {$_.Name -clike "*T.java"} 
```

（[来源](https://stackoverflow.com/a/26432185/4999991)）

请考虑：

*   `dir`在 PowerShell中是命令`ls`的别名。`Get-ChildItem`
*   `where`并且`?`也是`Where-Object`命令的别名。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-11T12:41:28.930

用于`dir /L`以小写形式输出。

# tcp - 在 windows 2008 32/64 位中连接到端口 0 的不同行为

> ID：14812069
> 
> 赞同：-1
> 
> 时间：2013-02-11T12:37:34.473
> 
> 标签：tcp, windows-server-2008, windows-server-2003, winsock

当我在 windows 2008 32 位服务器中运行以下代码时，调用 connect() 时程序流转到 sckTest_Error()。

但是，当我在 windows 2008 64 位服务器中运行相同的代码时，会发生 RTE 并且程序流程会出错：

```
Private Sub Form_Load()
On Error GoTo error1
     If (Not (Me.sckTest.State = sckConnected)) Then
        '
        'Log event for outbound client mode connectoin

        If Me.sckTest.State <> sckClosed Then
            Me.sckTest.Close
        End If
        '
        MsgBox "Going to connect"
        Me.sckTest.Connect "127.0.0.1", 0
        MsgBox "Connecting"
       If Me.sckTest.State = sckConnected Then
        MsgBox "Connected"
       End If
        '
    End If
    Exit Sub
error1:
    MsgBox "RTE " & Err.Number
End Sub

Private Sub sckTest_Error(ByVal Number As Integer, 
                          Description As String, 
                          ByVal Scode As Long, 
                          ByVal Source As String, 
                          ByVal HelpFile As String, 
                          ByVal HelpContext As Long, 
                          CancelDisplay As Boolean)
    MsgBox "Error in connecting" & Number
End Sub 
```

但我在两台服务器上都收到错误 10049。任何人都可以建议它与我的代码或服务器行为有关的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:30:10.867

端口 0 是一个特殊的通配符，它​​允许套接字绑定到随机可用的临时端口。绑定成功后，可以查询socket，发现绑定到哪个实际端口。因此，您不能将客户端套接字连接到端口 0，因为服务器套接字首先不可能侦听端口 0。

# database - 内存中的 H2 DB 清理 RAM

> ID：14812070
> 
> 赞同：6
> 
> 时间：2013-02-11T12:37:36.573
> 
> 标签：database, h2, ram, in-memory

我在内存模式下使用 H2 DB 来处理一些数据。我的 java 应用程序需要在每次运行中删除和重新创建或截断或删除 H2 DB 中的所有对象时保持 JVM 开启。因此，我需要在 DB URL 中使用选项“DB_CLOSE_DELAY=-1”。

为了在迭代后清理内存，我尝试使用“DROP ALL OBJECTS”、“DROP ALL OBJECTS DELETE FILES”并逐个截断每个表。所有这些都实现了我想要的，并没有删除它当前占用的内存。我的数据库大小从大约 300MB 到 2GB 不等。因此，在一次迭代之后，我的 RAM 大约占用了 1GB，并且没有找到任何解决方案来解决这个问题的原因或解决方案。

有点类似于这个[Clear the in memory database after each testcase](https://stackoverflow.com/questions/6936845/clear-the-in-memory-database-after-every-testcase)。但是没有 dbUnit 并且也需要清除 RAM。

是否可以在不停止 JVM 的情况下执行此操作。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T06:17:23.613

你可以执行语句`shutdown`。这将关闭连接和数据库。

# c# - 如何从用于运行后台任务的 Windows 运行时组件连接到 sqlite 数据库

> ID：14812076
> 
> 赞同：5
> 
> 时间：2013-02-11T12:38:08.127
> 
> 标签：c#, xaml, windows-8, background-process

我无法从用于运行后台任务的 Windows 运行时组件连接到 sqlite 数据库。我包括了所有需要的 dll，与我为主项目添加的方式相同。但它不起作用。显示大约 200 个错误..我关注了这篇文章：[https](https://github.com/praeclarum/sqlite-net/issues/104)
://github.com/praeclarum/sqlite-net/issues/104 但我仍然收到错误.. 2个这样的错误是：

错误 2 Windows 运行时类“SQLite.SQLiteException”具有无效的基类型“System.Exception”。不允许导出自定义异常类型。D:\MCM-22-Jan-2013\CCM\TileBackground\SQLite.cs 46 15 TileBackground

错误 92 类型“SQLite.TableMapping.Column”是嵌套类型。嵌套类型无法导出到 Windows 运行时。D:\MCM-22-Jan-2013\CCM\TileBackground\SQLite.cs 1390 16 TileBackground

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T08:24:42.813

我今天遇到了这个问题，在[https://github.com/praeclarum/sqlite-net/issues/104](https://github.com/praeclarum/sqlite-net/issues/104)的帮助下，我能够解决它。基本上，在设置了 nuget 的 sqlite-net 之后，您有两件事要做。

1.  对于 SQLite.cs 和 SQLiteAsync.cs，您需要将所有`public`类定义（第 5 列）更改为 ,`internal`
2.  您需要将命名空间更改`SQLite`为 C# 项目正在使用的任何命名空间。

这样，此包装器将成为您的 C# 组件/Windows 运行时组件的一部分，并且不会被导出。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T14:15:31.807

我在后台任务中成功使用了 Sqlite。我在常规 Windows Store dll 中有 sqlite-net 源文件。我的主应用程序和后台任务项目都需要访问同一个 sqlite db，因此它们都引用了这个 dll。

似乎通过以这种方式构建源代码，我（无意中）避免了您所看到的问题。请注意，我不必调整 Sqlite-net 源文件来解决这个问题。

# javascript - 动态创建对象时操作对象的属性

> ID：14812079
> 
> 赞同：0
> 
> 时间：2013-02-11T12:38:14.593
> 
> 标签：javascript, jquery, html

我想在动态创建对象时对其属性进行操作。

在下面给出的代码中，我想通过调用对象的相应函数来增加**like**属性。然而，元素是动态创建的，并且在***onclick*****函数中传递this**只会引用锚标记。

 *这个想法类似于这个论坛，其中每个问题都有可以被批准或不被批准的各种想法。如何独立操作每个对象的属性？

```
function idea(idea) {
    this.ideatext = idea;
    this.like = 0;
    this.str = "\
    <div class = 'entered'> \
        <div class = 'text'> " + this.ideatext + "</div> \
        <div class = 'anchors'> \
            <a href = '' onclick = 'increase()'> Approve </a> \
            <a href = '' onclick = 'decrease()'> Disapprove </a> \
        </div> \
    </div>";

    this.increase = function() {
        this.like++;
    }
    this.decrease = function() {
        this.like--;
    }
}

var ideaobj1 = new idea(someidea1);
var ideaobj2 = new idea(someidea2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:22:41.240

如果您动态创建 javascript 代码并希望它引用其他 javascript 代码，则必须知道变量名称。没办法。

```
<script type="text/javascript">

  function idea(varName, text)
  {
      this.varName = varName;
      this.ideatext = text;
      this.like = 0;
      this.str = "\
      <div class = 'entered'> \
          <div class = 'text'> " + this.ideatext + "</div> \
          <div class = 'anchors'> \
              <a href = '' onclick = '" + this.varName + ".increase()'> Approve </a> \
              <a href = '' onclick = '" + this.varName + ".decrease()'> Disapprove </a> \
          </div> \
      </div>";

      this.increase = function ()
      {
          this.like++;
          return false;
      }
      this.decrease = function ()
      {
          this.like--;
          return false;
      }
  }

  var wing = new idea("wing", "a wing is ...");
  var wheel = new idea("wheel", "a wheel is  ...");

</script> 
```

并为创建的对象使用某种集中存储。也许是这样的：

```
 var brain = new Object();
  brain["wing"] = new idea("brain.wing", "a wing is ...");
  brain["wheel"] = new idea("brain.wheel", "a wheel is ..."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:45:36.320

不要添加 onclick 属性，而是给标签一个类（在这个例子中我使用类增加和减少）。然后添加以下jquery代码

```
$(document)
.on('click', '.increase', function() {
    alert('increase function');
});
.on('click', '.decrease', function() {
    alert('decrease function');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:47:14.333

您可以使用以下方法创建元素`document.createElement`：

```
var newDiv = document.createElement("div"); 
```

`newDiv`然后在将元素添加到文档之前进行修改。

`document.createElement`有关此处的更多信息： [https ://developer.mozilla.org/es/docs/DOM/document.createElement](https://developer.mozilla.org/es/docs/DOM/document.createElement)*

# android - 在Android的Getview方法中放置listview

> ID：14812082
> 
> 赞同：0
> 
> 时间：2013-02-11T12:38:16.630
> 
> 标签：android, listview, custom-lists

我有一个使用 getView 方法创建的自定义列表，我想在该自定义列表的每一行中放置另一个自定义列表视图。应该是这样的：

*   第 1 行
*   列表
*   文本 1 文本 2
*   文本 1 文本 2
*   文本 1 文本 2

* * *

*   第 2 行
*   列表
*   文本 1 文本 2
*   文本 1 文本 2
*   文本 1 文本 2

* * *

*   第 3 行
*   列表
*   文本 1 文本 2
*   文本 1 文本 2
*   文本 1 文本 2

但似乎我无法在主 getView 中添加另一个 getview 方法。有人有什么建议吗？谢谢

**编辑：**

```
public static class ChildAdapter extends BaseAdapter {
     private LayoutInflater mInflater;       
     public IrrigationAdapter(Context context) {
               mInflater = LayoutInflater.from(context);
                }
    public int getCount() {
                return array.size();
                }
     public Object getItem(int position) {
                    return position;
                }
     public long getItemId(int position) {
                    return position;
                }       
     public View getView(final int position, View convertView, ViewGroup parent) {
            final ViewHolder holder;
                if (convertView == null) {
                    convertView = mInflater.inflate(R.layout.table_row1, null);
                    holder = new ViewHolder();
                    holder.Text1 = (TextView) convertView.findViewById(R.id.TextView01);
                            holder.Text2 = (TextView) convertView.findViewById(R.id.TextView02);
                    convertView.setTag(holder);                         
                } else {
                    holder = (ViewHolder) convertView.getTag();
                }   
               holder.Text1.setText(sulamaDonemArr.get(position));
                   holder.Text2.setText(bitkiDesenArr.get(position));

       return convertView;
       }    

         static class ViewHolder {      
              TextView Text1;
              TextView Text2;                
            }               
        }

private static class MainAdapter extends BaseAdapter {
     private LayoutInflater mInflater;
     public SulamaDetayAdapter(Context context) {
               mInflater = LayoutInflater.from(context);                   
                }
     public int getCount() {
                return arraysize;
                }
     public Object getItem(int position) {
                    return position;
                }
     public long getItemId(int position) {
                    return position;
                }       
     public View getView(final int position, View convertView, ViewGroup parent) {
            final ViewHolder holder;                
                if (convertView == null) {
                    convertView = mInflater.inflate(R.layout.table_row_sulamabaslama_detay, null);
                    holder = new ViewHolder();
                    holder.text1= (TextView)convertView.findViewById(R.id.txt);
                    holder.childAdapterList.setAdapter(????);

                    convertView.setTag(holder);                                         
                } else {
                    holder = (ViewHolder) convertView.getTag();
                }                       

       return convertView;
       }

         static class ViewHolder {      
              TextView text1,text2;               
              ListView childAdapterList;
            } 
```

}

现在是这样的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:41:04.693

您可以在每一行上使用可展开的列表视图。这样您就可以像您想要的那样执行类似的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:41:54.677

如果我正确理解了这个问题，您正在寻找 [ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)

# selenium - 如何使用 Selenium WebDriver 在页面中获取框架名称

> ID：14812087
> 
> 赞同：6
> 
> 时间：2013-02-11T12:38:53.493
> 
> 标签：selenium, selenium-webdriver

Selenium WebDriver 中是否有任何方法可以让我们获取页面中的所有框架？就像我们有获取所有窗口句柄的方法一样。

```
driver.getWindowHandles() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T14:32:51.267

这也许就是你想要的：

```
public void getIframe(final WebDriver driver, final String id) {
    final List<WebElement> iframes = driver.findElements(By.tagName("iframe"));
    for (WebElement iframe : iframes) {
        if (iframe.getAttribute("id").equals(id)) {
        // TODO your stuff.
        }
    }
} 
```

然而，重要的是要提醒，如果您的页面有太多这些对象，代码可能会变得有点慢，但我在使用此解决方案时在我的测试中谈论超过 100 多个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T13:22:28.327

**试试这个代码：**

```
 //Assume driver is initialized properly. 
    List<WebElement> ele = driver.findElements(By.tagName("frame"));
    System.out.println("Number of frames in a page :" + ele.size());
    for(WebElement el : ele){
      //Returns the Id of a frame.
        System.out.println("Frame Id :" + el.getAttribute("id"));
      //Returns the Name of a frame.
        System.out.println("Frame name :" + el.getAttribute("name"));
    } 
```

# sql - sql查询多对一关系

> ID：14812091
> 
> 赞同：3
> 
> 时间：2013-02-11T12:39:19.083
> 
> 标签：sql, sql-server

我有一个有 3 列的表

桌子：`StaffDepartmentAssgnment`

```
StaffId         DepartmentId          AssignedFromDate

S1              Dept1                 2013-02-08
S2              Dept1                 2013-02-08
S3              Dept2                 2013-02-01 
S1              Dept2                 2013-02-01 
```

我想找出当前在 Dept2 中的所有 StaffId。我如何为它编写查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:40:38.047

这是一个独立于数据库引擎的解决方案

```
select * from 
( 
   select StaffId, max(AssignedFromDate) as adate
   from StaffDepartmentAssgnment 
   group by staffid
) x
inner join StaffDepartmentAssgnment y
      on y.staffid = x.staffid and adate = y.AssignedFromDate
where DepartmentId = 'dept2' 
```

## [SQLFiddle 演示](http://sqlfiddle.com/#!3/f0ddf/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T12:41:32.837

也许：

```
SELECT DISTINCT sd.StaffId         
FROM StaffDepartmentAssgnment sd
WHERE sd.DepartmentId = 'Dept2' 
```

**更新**

> S1 现在不在 Dept2，他已经转移到 Dept1..我需要拿起最上面的 AssignedFromDate

由于您使用的是 SQL-Server，因此您可以将 a`CTE`与[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)函数一起使用：

```
WITH CTE AS (
    SELECT sd.staffid, sd.DepartmentId,
           rn = Row_number() OVER ( 
                    Partition BY sd.staffid 
                    ORDER BY assignedfromdate DESC) 
    FROM   staffdepartmentassgnment sd) 
SELECT staffid 
FROM   cte 
WHERE  rn = 1 
AND    DepartmentId = 'Dept2' 
```

[**演示**](http://sqlfiddle.com/#!3/f0ddf/11/0)

# silverlight - silverlight 工具包（microsoft.phone.controls.toolkit）问题

> ID：14812092
> 
> 赞同：0
> 
> 时间：2013-02-11T12:39:21.613
> 
> 标签：silverlight, windows-phone-8

自过去 2 个月以来，我一直在开发 Windows 8 应用程序。它一直工作正常，但今天我在尝试添加 microsoft.phone.controls.toolkit（2011 年 8 月 windows phone silverlight工具包）到我的项目。我之前在我的项目中添加了相同的工具包，但由于某些原因我不得不删除工具包。相同的工具包以前工作正常，但现在我面临这个问题。请提出一些解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:07:19.013

尝试通过[NuGet安装](https://nuget.org/packages/WPtoolkit)

> 安装包 WPtoolkit

这将保证您拥有与您的平台一致的最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:05:33.367

请在上一篇文章中查看此问题的[答案](https://stackoverflow.com/a/13698737/81687)。这不是“更高版本”的问题，只是 VS2012 有一个不相关的错误消息。

# java - 需要一些关于我用 java 实现图形的建议

> ID：14812093
> 
> 赞同：1
> 
> 时间：2013-02-11T12:39:22.937
> 
> 标签：java, algorithm, graph-algorithm

我想实现一些图形算法，这就是我创建一种图形框架的原因。到目前为止，我使用以下类非常容易地实现了有*向图；*

```
class Vertex {
    String id;
    String name;
}

class Edge {
    String id;
    Vertex source;
    Vertex destination;
    int weight;
}

class Graph {
     List<Vertex> vertexes;
     List<Edge> edges; } 
```

在测试它时，我创建：

```
Edge edge = new Edge(id, source_node, destination_node, weight) 
```

*这在有向图*中非常好。但是在*无向图*中；我必须这样写；假设我们有 2 个节点，它们是 A，B，它们之间的权重是 10。所以由于无向图的结构，我必须放置两条边；

```
Edge e1 = new Edge(id1, A, B, 10)
Edge e2 = new Edge(id2, B, A, 10) 
```

这种类型的边缘创建既低效又详尽。

因此，我如何修改我的代码，以便我不必在两个节点之间放置两条边以用于无向图。将无向图类型也集成到我的代码中的最佳方法是什么？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T00:36:15.950

我最近遇到了一个有趣的 Java API，称为[Tinkerpop的](http://www.tinkerpop.com/)[Blueprints](https://github.com/tinkerpop/blueprints/wiki)，您可以使用它，或者查看一些关于如何实现自己的图形框架的想法。

我正在开发一个使用 JSON 的图形框架。这是由于图形的可变性。图论中的算法倾向于将数据添加到其他算法使用的图中。因此，试图具体描述图形本身就存在缺陷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:21:29.233

我将不同意现有的答案...

通常，在代码中表示图形时，出于效率原因，您不希望将边存储为一个大列表，甚​​至根本不希望存储为对象。您通常需要使用[邻接矩阵](http://en.wikipedia.org/wiki/Adjacency_matrix)（用于相对密集的图）或[邻接列表](http://en.wikipedia.org/wiki/Adjacency_list)（用于相对稀疏的图）。这使您可以轻松查找顶点的邻居，这主要是您在图形算法中使用的。因此，在实现中，您通常只需要一个索引数组或`Vertex`对象集或列表。

在无向图中，您将添加边`(i,j)`以及`(j,i)`数据结构。在有向图中，您只需添加其中一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T17:25:46.813

自然的解决方案是使边缘的方向成为一个属性。创建一个枚举：

```
public enum EdgeType {
     Undirected,
     From1to2,
     From2to1,
     Cyclic
} 
```

然后为您的 Edge 类添加一个属性：

```
public EdgeType enumEdgeType; 
```

在进行遍历和其他操作时，您可以使用 switch 语句来处理 4 种不同的情况。我的经验是这种方法是最简单和最有效的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T12:53:23.333

I will have to disagree with the answer concerning blueprint. There is a lot hype around this library and except the nice feature of graph implementation abstraction, there is absolutely nothing implemented in the graph algorithm (furnace) package, rendering the complicated stack totally useless.

When I mean nothing is implemented, that is really nothing (take a look [here](https://github.com/tinkerpop/furnace)), and the repo hasn't been updated since a while, so you can consider it dead. If you want to use a

My 2 cents, use a seasoned graph framework : [Jgrapht](https://github.com/jgrapht/jgrapht). I use it for several research projects, there are 20 standards (and some non trivials) [graph algorithms implemented](http://jgrapht.org/javadoc/org/jgrapht/alg/package-frame.html). So you don't need to reinvent the wheel. It also supports a heavy load of [graph types](http://jgrapht.org/javadoc/org/jgrapht/graph/package-frame.html).

Avoid hype, go for working solutions.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T12:43:51.230

根据您要实现的图形算法，您将需要不同的图形表示，因此您必须能够使用其中的几种。大多数算法使用邻域列表，而在您的代码中使用边缘列表。

你真的不应该担心边缘的创建。大多数情况下，与实际算法相比，它可以忽略不计。现在，根据您尝试执行的操作，您可能只需要其中一个边缘，但大多数时候，拥有两个边缘是非常好的和理智的。

# javascript - 替换Javascript字符串中的尖括号？

> ID：14812094
> 
> 赞同：4
> 
> 时间：2013-02-11T12:39:23.493
> 
> 标签：javascript, string

嗨，我有一个如下字符串：

```
 >123456< 
```

如何轻松更换尖括号并用空白替换它们？

我尝试了以下方法：

```
 mystring.replace(/>/g, "");
                        mystring.replace(/</g, ""); 
```

但是，如果我对此进行操作`alert(mystring);`，它仍然显示尖括号？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T12:40:49.450

在这种情况下，您需要分配`mystring`操作的结果。

```
var s = '>123456789<';
s = s.replace(/[<>]/g, '');
alert(s); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T12:41:05.490

您没有将其设置回字符串：

```
mystring = mystring.replace(/>/g, "");
mystring = mystring.replace(/</g, ""); 
```

* * *

正如在 Zanathel 的回答中一样，使用单个正则表达式`[<>]`比 2 个语句更干净。

```
mystring = mystring.replace(/[<>]/g, ""); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T12:42:03.950

```
mystring = mystring.replace(/>|</g, '') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T12:47:23.653

```
var xx =">123456<";
alert(xx.replace(">","").replace("<","")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T12:47:33.963

在 Javascript 中，字符串是不可变的。因此，每次对字符串进行更改时，都会创建一个新的字符串对象。

这将正常工作：

```
mystring = mystring.replace(/>/g, "");
mystring = mystring.replace(/</g, ""); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T12:47:55.230

试试这个..它对我有用：

```
var str = ">123456<";
var ne = str.replace(">", "");
ne = ne.replace("<", "");

alert(ne); 
```

# ember.js - 如何在 ember 助手（linkTo 或部分）中使用字符串变量？

> ID：14812113
> 
> 赞同：7
> 
> 时间：2013-02-11T12:40:31.557
> 
> 标签：ember.js

我需要在路由器中设置菜单链接数组，然后使用#each 在模板中呈现它们。但似乎#linkTo 助手无法识别变量。我该如何解决这个问题？

路由器：

```
Lite.DashboardRoute = Em.Route.extend({
  setupController: function(controller, model) {
    this.controllerFor('application').set('mainControls', [ {path: 'widgets.new', name: 'Add', classes: 'btn btn-success icon-ok-sign'} ])
  }
}) 
```

应用程序模板中的链接呈现：

```
{{#each link in mainControls}}
  {{#linkTo link.route class=link.classes}} {{link.name}} {{/linkTo}}
{{/each}} 
```

错误信息：

```
ember.debug.js:51 Error: assertion failed: The route link.route was not found 
```

灰烬版本：

```
// Version: v1.0.0-pre.4
// Last commit: 855db1a (2013-01-17 23:06:53 -0800) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T11:44:06.453

如果您仍在为 ken 的选择而苦苦挣扎，您可能想尝试以下方法：

```
{{#each link in mainControls}}
    <a {{action "goToLink" link}} {{bindAttr class="link.classes"}}>
        {{link.name}}
    </a>
{{/each}} 
```

然后您将需要一个 goToLink 函数来处理该操作。你可以把它放在你的 Collection 上，但如果你不这样做，它应该会冒泡到你的路由处理程序中，从理论上讲，这应该让事情变得非常简单：

```
App.MyRoute = Ember.Route.extend({
    // ... stuff ...

    actions: {
            goToLink: function(item) {
                this.transitionTo(item.route);
            }
    }
}); 
```

您可以在此处阅读有关操作的更多信息：http: [//emberjs.com/guides/templates/actions/](http://emberjs.com/guides/templates/actions/)

# 更新

我用最新最好的 Ember 为你准备了一个小提琴。

由于我发现了一些技术限制，我对上面的建议做了些许改动。

具体来说，Route 似乎只能处理由 Route 内部创建的控制器的操作。这是我们导航菜单的问题，因为您正在更改路线，而它仍在屏幕上。

如果我切换到使用 Handlebars“渲染”助手来渲染菜单，似乎没有路由器愿意处理该操作。 *但是*，当前的路由器似乎总是连接在气泡链中，以便在控制器上“发送”。所以，我只是让控制器在链上向路由器发送一个事件，我们就得到了我们的路由幸福。

你可以在这里找到小提琴：http: [//jsfiddle.net/Malkyne/fh3qK/](http://jsfiddle.net/Malkyne/fh3qK/)

# 更新 2

这是同一小提琴的另一个版本，仅使用（奇怪的未记录的）**ApplicationRoute**来直接处理操作，而控制器无需进行任何中继：http: [//jsfiddle.net/Malkyne/ydTWZ/](http://jsfiddle.net/Malkyne/ydTWZ/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T17:50:19.763

您不能在 linkTo 助手中使用变量，您需要在锚标记上使用 bindAttr

```
<a {{bindAttr href="link.route" class="link.classes"}}>link</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-06T20:25:11.397

从 Ember.js RC6 开始，可以将 Ember 配置为将路由作为属性查找，而不是将它们解释为硬编码值。从 RC6.1 开始，这需要定义一个环境变量：

```
ENV.HELPER_PARAM_LOOKUPS = true 
```

在加载 Ember.js 之前。有关更多详细信息，请参阅以下拉取请求：[linkTo 中的无引号路由参数执行查找](https://github.com/emberjs/ember.js/pull/2905)

这是作为 jsFiddle 的完整工作示例：

[示例：在 Ember 的 #linkTo 助手中使用变量](http://jsfiddle.net/FrGcR/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-06T19:22:32.487

这个线程不是最近的，我不知道最新版本的 Ember 是否为这个问题提供了不同的解决方案，但在 Ember 版本 1.11 上它工作正常。

解决**方案**是`link-to`.

它就像助手一样工作（是的，它会`active`根据您当前的路线为您切换类）并允许您传递动态参数。模拟作者的情况，我们会有类似的东西：

**组件.js**

```
mainControls: [
  { path: 'widgets.new' },
  { name: 'Add' },
  { classes: 'btn btn-success icon-ok-sign' }
] 
```

**组件.hbs**

```
{{#each link in mainControls}}
  {{link-to link.name link.route class=link.classes}}
{{/each}} 
```

可以在[此处](https://guides.emberjs.com/v1.10.0/templates/links/#toc_adding-additional-attributes-on-a-link)找到有关此方法的更多详细信息。

# android - 颜色问题（Android）

> ID：14812114
> 
> 赞同：0
> 
> 时间：2013-02-11T12:40:34.087
> 
> 标签：android, xml, themes

我正在升级我的应用程序以包含操作栏，我对格式有点困惑。

所以第一个活动看起来不错，这里是代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent" 
android:layout_height="match_parent">

<TextView  
    android:id="@+id/main_title"
    android:layout_width="match_parent" 
    android:layout_height="wrap_content" 
    android:text="@string/main_title"
    android:textSize="24sp" 
    android:textColor="@color/orange"
    android:textStyle="bold"
    android:gravity="center_vertical|center_horizontal" 
    android:padding="20dp"/>
    <Button 
    android:id="@+id/new_inspection" 
    android:layout_width="match_parent" 
    android:layout_height="wrap_content" 
    android:layout_below="@id/main_title"
    android:text="@string/create_new_inspection"/>
    <TextView  
    android:id="@+id/saved_inspections"
    android:layout_width="match_parent" 
    android:layout_height="wrap_content" 
    android:layout_below="@id/new_inspection"
    android:text="@string/saved_inspections" 
    android:padding="5dp"/>
    <ListView 
    android:id="@id/android:list" 
    android:layout_width="match_parent" 
    android:layout_height="wrap_content" 
    android:layout_below="@id/saved_inspections"/>
    <TextView  
    android:id="@id/android:empty"
    android:layout_width="match_parent" 
    android:layout_height="wrap_content" 
    android:text="@string/no_saved_inspections"
    android:gravity="center" 
    android:padding="20dp"
    android:layout_below="@id/saved_inspections"/>
</RelativeLayout> 
```

OnCreate 方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_inspection);
    setUpViews();
    setLongClick();
    rmDbHelper = new RMDbAdapter(this);
    rmDbHelper.open();
    Cursor listCursor = rmDbHelper.fetchAllInspections();
    startManagingCursor(listCursor);           
    setListAdapter(new MyListAdapter(this, listCursor));  
} 
```

看起来像这样：

![正确的布局](../Images/951a3babd827b950a9f820ab5cd27930.png)

但是其他一些活动看起来不像这样，我不知道为什么 - 例如，这是下一个活动的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical">

<RelativeLayout
android:id="@+id/heading_layout"
android:layout_width="fill_parent"
android:layout_height="wrap_content">
    <TextView  
    android:id="@+id/main_title"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="@string/main_title" 
    android:textSize="18sp"
    android:textStyle="bold" 
    android:textColor="@color/orange"
    android:gravity="center_vertical|center_horizontal" 
    android:padding="5dp"/>
    <TextView  
    android:id="@+id/secondary_title"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:layout_below="@id/main_title"
    android:text="@string/secondary_title"
    android:textStyle="bold" 
    android:gravity="center_vertical|center_horizontal" 
    android:padding="5dp"/>
    <Button 
    android:id="@+id/new_run" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:layout_below="@id/secondary_title"
    android:text="@string/create_new_run"/>
    <TextView  
    android:id="@+id/saved_runs"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:layout_below="@id/new_run"
    android:text="@string/saved_runs" 
    android:padding="5dp"/>
</RelativeLayout>

<LinearLayout
android:id="@+id/complete_button_layout" 
android:layout_width="fill_parent" 
android:layout_height="wrap_content"
android:layout_alignParentBottom="true">
    <Button
    android:id="@+id/complete_button"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="@string/run_area_complete"
    android:padding="5dp"/>
</LinearLayout>

<ListView 
android:id="@id/android:list" 
android:layout_width="fill_parent" 
android:layout_height="0dp"
android:layout_below="@id/heading_layout"
android:layout_above="@id/complete_button_layout"/>
<TextView  
android:id="@id/android:empty"
android:layout_width="wrap_content" 
android:layout_height="wrap_content" 
android:text="@string/no_saved_runs"
android:layout_centerHorizontal="true"
android:padding="20dp"
android:layout_below="@id/heading_layout"
android:layout_above="@id/complete_button_layout"/> 

</RelativeLayout> 
```

OnCreate 为此：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_run);
    rmDbHelper = new RMDbAdapter(this);
    rmDbHelper.open();
    Intent i = getIntent();
    inspectionId = i.getLongExtra("Intent_InspectionID", -1);
    areaId = i.getLongExtra("Intent_AreaID", -1);
    setUpViews();
    setLongClick();
    Cursor listCursor = rmDbHelper.fetchAllRunsForArea(areaId);
    startManagingCursor(listCursor);           
    setListAdapter(new MyListAdapter(this, listCursor));
} 
```

看起来像这样：

![布局不正确](../Images/82350651ae18c456b2ebc87c7b3d5803.png)

商店里到处都是颜色，我看不出 xml 文件有什么不同。

这是信息清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.scamparelli.rm"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="16" />

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

<application
    android:icon="@drawable/logo"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Holo" >
    <activity
        android:name=".InspectionActivity"
        android:screenOrientation="portrait"
        android:windowSoftInputMode="adjustResize"
        android:label="@string/title_activity_inspection" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".InspectionEdit"
        android:screenOrientation="portrait"
        android:windowSoftInputMode="adjustResize"/>
    <activity android:name=".AreaActivity"
        android:screenOrientation="portrait"/>
    <activity android:name=".AreaEdit"
        android:screenOrientation="portrait"/>
    <activity android:name=".RunActivity"
        android:screenOrientation="portrait"/>
    <activity android:name=".RunEdit"
        android:screenOrientation="portrait"/>
    <activity android:name=".LocationActivity"
        android:screenOrientation="portrait"/>
    <activity android:name=".ComponentEdit"
        android:screenOrientation="portrait"/>
    <activity android:name=".IssueActivity"
        android:screenOrientation="portrait"/>
    <activity android:name=".IssueEdit"
        android:screenOrientation="portrait"/>
    <activity android:name=".SpecificationEdit"
        android:screenOrientation="portrait"/>
    <activity android:name=".ExportActivity"
        android:screenOrientation="portrait"/>

</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-11T12:49:26.517

只需将父布局的背景颜色设置为黑色：

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="@android:color/black"> 
```

或将您的应用主题设置为：

```
Theme.Black.NoTitleBar 
```

比希望它看起来不错。

# java - Java 线程安全地将集合对象从一个线程传递到另一个线程

> ID：14812118
> 
> 赞同：11
> 
> 时间：2013-02-11T12:40:40.673
> 
> 标签：java, thread-safety

我有一个 Java 应用程序，它有工作线程来处理作业。一个工人产生一个结果对象，比如：

```
class WorkerResult{
    private final Set<ResultItems> items;
    public Worker(Set<ResultItems> pItems){
         items = pItems;
    }
} 
```

当工作人员完成时，它会执行以下操作：

```
 ...
 final Set<ResultItems> items = new SomeNonThreadSafeSetImplSet<ResultItems>();
 for(Item producedItem : ...){
      items.add(item);
 }
 passToGatherThread(items); 
```

该`items`集合在这里是一种“工作单元”。该`passToGatherThread`方法将`items`集合传递给一个收集线程，其中只有一个在运行时存在。

这里不需要同步，因为只有一个线程（Gather-thread）读取`items`集合，所以不会发生竞争条件。AFAICS，Gather-thread 可能看不到所有项目，因为该集合不是线程安全的，对吧？

假设我无法进行`passToGatherThread`同步，比如说因为它是第 3 方库。我基本上担心的是，由于缓存、VM 优化等原因，收集线程看不到所有项目。所以问题来了：如何以线程安全的方式传递项目集，以便收集线程“看到”正确的项目集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:08:47.143

这里似乎没有同步问题。您为每个 passToGatherThread 创建一个新的 Set 对象，并在修改集合后执行此操作。不会丢失任何对象。

如果不对集合进行任何修改，许多线程可以同时访问 Set（和大多数 Java 集合）。这`Collections.unmodifiableCollection`就是为了。

由于上述`passToGatherThread`方法作为与其他线程的通信，它必须使用某种同步——并且每次同步确保线程之间的内存一致性。

另外 - 请注意，对传递集合中对象的所有写入都是在传递给另一个线程*之前进行的。*即使内存被复制到线程的本地缓存中，它也具有与其他线程相同的未修改值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:09:38.100

您可以简单地使用`Set`Java 为您的`WorkerResult`. 参见例如：

*   [CopyOnWriteArraySet](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArraySet.html)
*   [并发跳过列表集](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentSkipListSet.html)

另一种选择是使用`Collections.synchronizedSet()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T15:57:38.470

我已经思考（并讨论）了很多这个问题，并且我想出了另一个答案，我希望这将是最好的解决方案。

传递一个同步的集合在效率方面并不好，因为对该集合的每个后续操作都会被同步 - 如果有很多操作，它可能会被证明是一个障碍。

直截了当：让我们做一些假设（我不同意）：

*   提到的`passToGatherThread`方法确实不安全，但看起来不太可能
*   编译器可以重新排序代码中的事件，以便在`passToGatherThread`填充集合之前调用

确保传递给gatherer方法的集合已准备好且完整的最简单、最干净且可能最有效的方法是将集合推送放在一个同步块中，如下所示：

```
synchronized(items) {
  passToGatherThread(items);
} 
```

这样，我们在传递集合之前确保内存同步和有效的发生前序列，从而确保所有对象都正确传递。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T01:16:45.120

worker 实现 callable 并返回 WorkerResult：

```
class Worker implements Callable<WorkerResult> {
    private WorkerInput in;

    public Worker(WorkerInput in) {
        this.in = in;
    }

    public WorkerResult call() {
        // do work here
    }
} 
```

然后我们使用 ExecutorService 来管理线程池，并通过使用 Future 收集结果。

```
public class PooledWorkerController {

    private static final int MAX_THREAD_POOL = 3;
    private final ExecutorService pool = 
       Executors.newFixedThreadPool(MAX_THREAD_POOL);

    public Set<ResultItems> process(List<WorkerInput> inputs) 
           throws InterruptedException, ExecutionException{         
        List<Future<WorkerResult>> submitted = new ArrayList<>();
        for (WorkerInput in : inputs) {
            Future<WorkerResult> future = pool.submit(new Worker(in));
            submitted.add(future);
        }
        Set<ResultItems> results = new HashSet<>();
        for (Future<WorkerResult> future : submitted) {
            results.addAll(future.get().getItems());
        }
        return results;
    }
} 
```

# php - 对一个教义2代理对象的反思

> ID：14812123
> 
> 赞同：3
> 
> 时间：2013-02-11T12:40:50.130
> 
> 标签：php, reflection, symfony, doctrine-orm

据我所知，像这样的反射方法`property_exists()`不适用于学说 2 代理对象。

在这种情况下，代理是通过关系检索的`$user->getCity()`

在这种情况下，如何检查属性是否存在/是否设置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-11-08T15:46:57.553

解决办法是`ReflectionClass::getParentClass()`。

所以这样的代码应该可以工作：

```
$reflect = new \ReflectionClass($proxyObject);

if ($proxyObject instanceof \Doctrine\Common\Persistence\Proxy)
    // This gets the real object, the one that the Proxy extends
    $reflect = $reflect->getParentClass();

$privateProperty = $reflect->getProperty('privateProperty');
$privateProperty->setAccessible(true);
$privateProperty->setValue($proxyObject, $yourNewValue); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T01:35:09.173

您可能需要检查代理是否首先初始化：

```
if (
    $entity instanceof \Doctrine\Common\Persistence\Proxy
    && ! $entity->__isInitialized()
) {
    $proxy->__load();
} 
```

这基本上强制加载代理：之后，一切都会像您拥有原始实体的实例一样工作。

顺便说一下，ORM 目前不支持公共属性，尽管该功能将在 Doctrine ORM 2.4 中实现。这样，您将能够访问公共属性，而不必担心对象是否是代理。

# iphone - Objective-C 中的类中类

> ID：14812124
> 
> 赞同：0
> 
> 时间：2013-02-11T12:40:52.337
> 
> 标签：iphone, objective-c, ipad

我想要类似的功能，比如 Objective-C 中的类中的类。

一种方法是创建单独的`NSObject`类，但我必须为此创建 20 个类。

类功能中的类在 Objective-C 中是否有任何替代方法。

就像在java中一样：

```
public class SessionDBConstants {

    public static String DATABASE_NAME = "session.db";

    public static class Grade {

        public static final String Table = "grades";
        public static final String RowId = "id";
        public static final String ScheduleID = "schedule_id";
        public static final String Level = "level";
        public static final String Label = "label";
        public static final String Thershold = "thershold";

        public static final String CreateStmt = "create table grades"
                + "(id integer primary key autoincrement, schedule_id int, level int, label varchar, thershold int )";

        public static final String DropStmt = "drop table if exists grades;";

    }
} 
```

如何在 Objective-C 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:51:27.610

**抱歉**，我对我认为这个问题的意思有点不理解。在你的课堂上，你可以开始另一个@implementation

```
.h
@interface classOne : NSObject
@end
@interface classTwo : NSObject
@end

.m
@implementation classOne
@end

@implementation classTwo
@end 
```

希望能帮助到你。BooRanger

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:40:59.417

一种有用的模式可能是此处描述的类集群：http: [//developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/ClassCluster.html](http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/ClassCluster.html)

这里有一个非常清晰的概念示例： [https ://stackoverflow.com/a/2459385/346098](https://stackoverflow.com/a/2459385/346098)

# java - 获取 odt 文档的第一个表

> ID：14812127
> 
> 赞同：0
> 
> 时间：2013-02-11T12:40:57.253
> 
> 标签：java, openoffice.org, openoffice-writer, odt

在我的 Java 应用程序中，我必须从 .odt 文档中读取数据。有人可以告诉我如何获得对此类文档中第一个表的引用吗？我想使用 Apache odf 工具包，但在那里我只找到了一种按名称获取表的方法：

```
 TextDocument doc = TextDocument.loadDocument("/Users/me/Desktop/someFile.odt");
 Table t = doc.getTableByName("0"); 
```

我的文档包含一个我需要解析的大表，但我不知道它的名称。有没有办法找到它？或者其他方式来获得桌子？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:48:36.973

您可以使用`doc.getTableList()`获取文档中所有表格的列表。

# c# - 按下like按钮后如何获取用户信息

> ID：14812132
> 
> 赞同：1
> 
> 时间：2013-02-11T12:41:11.667
> 
> 标签：c#, javascript, ajax, facebook-graph-api

我有社交媒体工具栏。我有 facebook like 按钮，我的愿望是当有人点击 facebook like 按钮而不是找到用户并将相关信息存储到我的数据库以进行促销时。

我做了这样的

```
 window.fbAsyncInit = function() {

        FB.Event.subscribe('edge.create',
        function(response) {
            var FBGraphURL = "http://graph.facebook.com/user/callback=?";

            FB.getLoginStatus(function(res) { alert(res); });

            FB.api('/me', function(resp) {
                alert('Good to see you, ' + resp.username + '.');
            });
        });
    }; 
```

但仍然 resp.username 显示为**undefined**。我该如何解决这个问题？

**更新**

工作代码：

```
window.fbAsyncInit = function() {
    FB.Event.subscribe('edge.create', function(response) {
        login();
    });
};

function login() {
    FB.login(function(response) {
        if (response.authResponse) {
            GetUser();
        } else {
            // cancelled
        }
    }, {scope: 'email'});
}

function GetUser() {
    FB.api('/me', function(resp) {
        alert('Good to see you, ' + resp.email + '.');
    });
} 
```

此外，每个域都有不同的 App Id（**重要**）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:15:28.647

点赞插件只会返回关于点赞内容的 URL。要获取用户信息，您必须使用 fb 连接，当用户接受您的应用程序时，您可以使用他的访问令牌检索他的信息！

在此处查看更多详细信息：[https ://developers.facebook.com/docs/howtos/login/getting-started/](https://developers.facebook.com/docs/howtos/login/getting-started/)

# php - PHP 使用 POST 变量重定向到另一个站点

> ID：14812142
> 
> 赞同：0
> 
> 时间：2013-02-11T12:41:30.393
> 
> 标签：php, redirect, post, curl

我目前有一个直接发送到 2Checkout 的自定义购物车，并且需要对不同的付款方式使用相同的表单。

为此，我需要先将表单提交到我自己的服务器，然后将服务器重定向到所选的支付网关或我网站上详细说明其他支付选项的页面。

**我将如何使用变量作为 PHP（不是 javascript）中的 post 方法重定向用户？**

我当前的代码不起作用，因为用户没有离开页面，他们需要......

```
//$url = 'https://www.2checkout.com/checkout/spurchase';
$url = 'getpost.php';

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string, '&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION  ,1);
curl_setopt($ch, CURLOPT_HEADER      ,0);  // DO NOT RETURN HTTP HEADERS
curl_setopt($ch, CURLOPT_RETURNTRANSFER , 1);  // RETURN THE CONTENTS OF THE CALL
//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:09:44.220

通常，当您必须 POST 给自己，然后再次从 PHP POST 到新位置时，这是一个很好的指针，您需要返回并查看应用程序的结构。

一个更顺畅的解决方案可能是将支付流程分解为多个步骤。

**第 1 步 - 信息**
拥有您当前拥有的表格，并按照您现在的方式发布。

**第 2 步 - 选择网关**
将所有 $_POST 变量存储在页面上的隐藏字段中，并有一个用户可以选择的网关列表。当您单击其中之一时，您**可以**将用户发送到确认页面。

**第 3 步 - 确认页面**
此页面的主要目的是让用户查看他输入的数据，并确认他想购买该商品。

此页面的第二个目的是获取您拥有的所有数据，并将它们放入隐藏输入（再次），但这次您知道将数据发送到哪里，从而知道字段应该具有哪种格式/命名。

* * *

话虽这么说，没有什么能阻止您实际发布 php 表单的数据，但正如我所说，这是一个很好的指针，您的应用程序结构不再有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:45:33.423

```
curl_setopt($ch,CURLOPT_POST, count($fields)); 
```

它接受布尔值，像这样使用它

```
curl_setopt($ch,CURLOPT_POST, TRUE); 
```

这是 curl 的一个完美功能，可以处理每件事，获取 http https 登录和每件事。

像`curl_grab_page($url,$data)`put url url 和 data 一样使用它

```
function curl_grab_page($url,$data,$secure="false",$ref_url="",$login = "false",$proxy = "null",$proxystatus = "false")

            {
                if($login == 'true') {
                    $fp = fopen("cookie.txt", "w");
                    fclose($fp);
                }
                $ch = curl_init();
                curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt");
                curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");

                curl_setopt($ch, CURLOPT_TIMEOUT, 60);
                curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
                if ($proxystatus == 'true') {
                    curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, TRUE);
                    curl_setopt($ch, CURLOPT_PROXY, $proxy);
                }
                curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);

                if($secure=='true')
                {
                    curl_setopt($ch, CURLOPT_SSLVERSION,3);
                }

                curl_setopt( $ch, CURLOPT_HTTPHEADER, array( 'Expect:' ) );

                curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);

                curl_setopt($ch, CURLOPT_URL, $url);
                curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
                curl_setopt($ch, CURLOPT_REFERER, $ref_url);
                curl_setopt($ch, CURLOPT_HEADER, TRUE);
                curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
                curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
                curl_setopt($ch, CURLOPT_POST, TRUE);
                curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
                ob_start();

                return curl_exec ($ch); // execute the curl command

                curl_getinfo($ch);
                ob_end_clean();
                curl_close ($ch);
                unset($ch);
            } 
```

# sql - 初级sql连接查询

> ID：14812146
> 
> 赞同：2
> 
> 时间：2013-02-11T12:41:46.470
> 
> 标签：sql

我对 sql 很陌生，我正在努力创建一个查询。我有一张桌子 Dept_Employee

```
 DeptId    EmployeeId    Salary        JoinDate (DD-MM-YYYY)
    ------------------------------------------------------------
    1            77         8787           11-09-2010
    1            87         9877           12-08-2011
    1            76         9544           08-11-2010
    2            33         9999           12-05-2010 
```

我想用 DeptId 和一个新的 boolean 列创建一个新表，如果同一部门中的所有员工在 01-12-2010（12 月 1 日）之前都有 joindate 并且他们的薪水应该大于 8000，则返回 true。所以在这种情况下，结果应该是

```
 DeptId     NewEmployees
    ------------------------
    1            False
    2            True 
```

最好的方法是什么？我应该自己加入吗？或者有没有其他方法可以做到这一点？请任何人都可以建议一些东西...

吉娜。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T12:44:51.843

SQL`CASE`是你的朋友。

您可以通过以下方式进行操作：

```
 SELECT DeptId, CASE WHEN MIN(Salary) > 8000 AND MAX(JoinDate) <= DATE'2010-12-01' THEN True
                ELSE FALSE
                END AS NewEmployees
   FROM Dept_Employee
  GROUP BY DeptId 
```

请注意，在您的问题中，我假设 12 是月份，01 是日期。

# c++ - 调用 activex 方法

> ID：14812154
> 
> 赞同：0
> 
> 时间：2013-02-11T12:42:11.307
> 
> 标签：c++, activex

我有一个 ocx 文件，我想在 win32 应用程序中使用它，所以我`change USE of MFC`要这样做`USE MFC in a Static Library`：

```
#import "C:\\Program Files\\GeoSDK\\LiveX_8300.ocx"
int CALLBACK WinMain(
   HINSTANCE hInstance,
   HINSTANCE hPrevInstance,
   LPSTR lpCmdLine,
   int nCmdShow)
{

   // Register our Window class
   WNDCLASS wndclass;
   wndclass.style = CS_VREDRAW | CS_HREDRAW;
   wndclass.lpfnWndProc = &WindowProc;
   wndclass.cbClsExtra = 0;
   wndclass.cbWndExtra = 0;
   wndclass.hInstance = hInstance;
   wndclass.hIcon = NULL;
   wndclass.hCursor = NULL;
   wndclass.hbrBackground = reinterpret_cast <HBRUSH> (COLOR_BTNFACE + 1);
   wndclass.lpszMenuName = NULL;
   wndclass.lpszClassName =windowClassName;
   ::RegisterClass(&wndclass);

   // Create our main, raw win32 API window
   // We create the window invisible (meaning that we do not provide WS_VISIBLE as the window style parameter), because making it visible and then
   // adding a HwndSource will make it flicker.
   HWND mainWindow = ::CreateWindow(
      windowClassName,
      windowTitle,
      0,
      CW_USEDEFAULT,
      CW_USEDEFAULT,
      windowWidth,
      windowHeight,
      NULL,
      NULL,
      hInstance,
      0);
   ::ShowWindow (mainWindow, nCmdShow);
   ::UpdateWindow( mainWindow );

//ocx
   //_DLiveX p;

    typedef HRESULT (WINAPI *PFonc)(IUnknown*, HWND,IUnknown**);   
    HINSTANCE hDLL2 = ::LoadLibrary(TEXT("atl.dll"));   
    if (!hDLL2) 
      return 1;   

    PFonc AtlAxAttachControl = (PFonc) ::GetProcAddress(hDLL2,"AtlAxAttachControl");
    CLSID clsid = GetClsid();
    IID DIID__DLiveX = GetDIID__DLiveX();
    RECT rect;
    ::GetClientRect(mainWindow,&rect);

    container = ::CreateWindowEx(WS_EX_CLIENTEDGE, "EDIT","",WS_CHILD | WS_VISIBLE,100,100,rect.right,rect.bottom,mainWindow,0,hInstance,0);
AtlAxWinInit();

    HRESULT hr = ::CoInitialize(NULL);

    LIVEXLib::_DLiveX *p;
    hr = CoCreateInstance(clsid,
                    0,
                    CLSCTX_ALL,
                    DIID__DLiveX,
                    reinterpret_cast<void**>(&p)) ;

    if(FAILED(AtlAxAttachControl((IUnknown*)p, container, 0))){
                    p->Release();
                    return -1;
        MessageBox(HWND_DESKTOP, "FAILED(AtlAxAttachControl(pitd, container, NULL))", "Error", MB_ICONERROR | MB_OK);
                }

    while(hr == S_OK)
        p->CreateX(); 
```

当我执行我的 prog 时，我将 activex 附加到我的风中，但是当我调用任何方法时，我得到了这个错误`Unhandled exception at 0x752a812f in test1.exe: Microsoft C++ exception: _com_error at memory location 0x0012fdbc..` ，我知道我应该调用 SetProperty 方法或类似的方法，但我不知道如何

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:27:02.627

由于您使用的是 MFC，因此请使用`COleControl`. MFC 的全部意义在于提供类，这样您就不必自己做所有事情。

# windows - 列出某个交换数据库的所有（组）邮箱和主 SMTP 表示的所有权限的 Powershell 脚本

> ID：14812155
> 
> 赞同：1
> 
> 时间：2013-02-11T12:42:13.717
> 
> 标签：windows, powershell, exchange-server-2010

我正在使用 Exchange 2010，而我的域只有 Windows 2003 DC

我需要一个 Powershell 脚本，在 csv 文件中列出某个交换数据库的所有（组）邮箱，并为每个邮箱提供以下信息：

*   显示名称
*   邮箱中的主 SMTP 地址
*   邮箱中所有现有的同盟
*   邮箱所有者的主 smtp 地址
*   对邮箱有读访问权限的所有成员的主 smtp 地址
*   对邮箱有send-as权限的所有成员的主smtp地址
*   对邮箱具有完全访问权限的所有成员的主 smtp 地址

我已经写了一个小程序，这是一个好的开始，但我无法让我的成员用户在他们的主 SMTP 地址上表达：

这是示例：

```
$OutFile = "<Certain path>\<filename>_" + $(Get-Date -Format 'dd_MM_yyyy HH_mm tt') + ".csv"

"DisplayName" + "," + "EmailAddresses" + "," + "Full Access" + "," + "Send As" + "," + "ReadPermission" | Out-File $OutFile -Force

$Mailboxes = Get-Mailbox -Database "<Certain Database>" -ResultSize "Unlimited" | Select DistinguishedName, Identity, DisplayName, EmailAddresses
ForEach ($Mailbox in $Mailboxes) {
    $SendAs = Get-ADPermission $Mailbox.DistinguishedName | ? {$_.ExtendedRights -like "Send-As" -and $_.User -notlike "NT AUTHORITY\Self" -and !$_.IsInherited} | % {$_.User}      
    $FullAccess = Get-MailboxPermission $Mailbox.Identity | ? {$_.AccessRights -eq "FullAccess" -and !$_.IsInherited} | % {$_.User}         
    $ReadPermission = Get-MailboxPermission $Mailbox.Identity | ? {$_.AccessRights -eq "ReadPermission" -and !$_.IsInherited} | % {$_.User}         

    $Mailbox.DisplayName + "," + $Mailbox.EmailAddresses + "," + $FullAccess + "," + $SendAs + "," + $ReadPermission | Out-File $OutFile -Append
} 
```

有人可以帮我找到请求的结果，还是有人有另一个脚本可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:12:28.393

首先重写创建 PS 自定义对象所需的内容，然后使用 export-csv 从这些对象创建输出文件。

# r - R：ggplot2：使用 facet_wrap 创建边距

> ID：14812158
> 
> 赞同：1
> 
> 时间：2013-02-11T12:42:18.960
> 
> 标签：r, ggplot2

`p`假设我通过单个变量划分散点图，例如

```
p = p + facet_wrap(~ DayOfWeek, ncol = 3) 
```

有没有办法在图表的末尾包含一个边距，即一个不将数据分区的散点图`DayOfWeek`？

为任何帮助干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T13:49:03.083

我能想到的最简单的方法是将数据集的副本附加到自身，`DayofWeek`设置为“all”，如下所示：

组成数据和基础图：

```
w <- c("Sun","Mon","Tues","Weds","Thurs","Fri","Sat")
f <- data.frame(x=runif(200),y=runif(200),
                DayofWeek=factor(sample(w,size=200,replace=TRUE),levels=w))
library(ggplot2)
p  <- ggplot(f,aes(x,y))+geom_point() 
```

追加边缘化数据集：

```
fx <- rbind(f,transform(f,DayofWeek="all")) 
```

替换组合数据和方面：

```
p %+% fx + facet_wrap(~DayofWeek,ncol=3) 
```

# assembly - 近和远 JMP

> ID：14812160
> 
> 赞同：10
> 
> 时间：2013-02-11T12:42:24.980
> 
> 标签：assembly, x86, nasm

我正在做 Linux 汇编，我知道它有一个平面内存模型。我对 NEAR 和 FAR JMP 感到困惑。

NEAR 在同一个段，而 FAR 是另一个段。据我了解，linux虚拟内存中没有段？另外，我们如何知道我的程序代码是否按多个段布局？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T12:49:48.753

现在已经很久没有分段了。保护模式 x86 中的正确术语是*选择器。*

话虽如此，近跳转和远跳转之间的区别在于前者保持相同的代码选择器`cs`，而后者（通常）会更改它。

在平面内存模型中，前一种情况几乎总是如此。

您*可能*有一个操作系统，其中平面内存模型由多个选择器提供服务，但我看不到它的有用用例，而且这不是 Linux 的工作方式，至少在 x86 上是这样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T12:51:31.810

> NEAR 在同一个段，而 FAR 是另一个段。

近跳转跳转到当前代码段中的一个位置（由 指向`cs`）。远跳转通常用于跳转到不同代码段中的位置，但如果远地​​址中的段选择器与 中的值一致，它也可以跳转到当前段中的位置`cs`。

> 据我了解，linux虚拟内存中没有段？

如果发现使用某种分段内存的 CPU 的 Linux 端口，我不会感到惊讶。所以，我会说这取决于。不过，您不太可能在 x86 平台上看到 Linux 使用段。但同样，您或其他人可以制作一个在实模式下运行并使用段的小型 Linux。

> 另外，我们如何知道我的程序代码是否按多个段布局？

检查 CPU 和操作系统。当然，如果您编写可移植的 C 代码，那么您应该不会担心这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T12:49:26.323

> 据我了解，linux虚拟内存中没有段？

它足够准确。有特定于线程的*数据*`%fs`，其位置由段*base*指向，但没有适合远跳转的段。

> 另外，我们如何知道我的程序代码是否按多个段布局？

如果您的目标平台是 Linux，那么您已经知道它不是。*（如果任何*`jump far`现代操作系统仍然以有意义的方式使用段，我会感到惊讶）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-17T23:57:54.873

现代主流操作系统（如 Linux）中使用的平面内存模型使分段大多过时了，而且（幸运的是）你不需要担心。

在页表支持 NX 位将页面标记为不可执行之前，有一些工作是使用段限制来避免执行可写内存（尤其是堆栈），这使得缓冲区溢出漏洞比仅仅返回到 shellcode 缓冲区更难。例如2003 年的[Exec Shield（lwn 文章）](https://lwn.net/Articles/31032/)。

我忘记了这实际上是如何工作的，我认为这主要是在排除堆栈的 CS 上设置段限制，而不是为每个代码块（主可执行文件 + 每个动态库）使用带有新段描述符的 far jmp。

但幸运的是，现代 x86 可以使用具有 NX 位（PAE 或 x86-64）的现代页表，这意味着用户空间可以像读取和写入权限一样设置正常的每页执行权限（使用`mmap`、`mprotect`和 ELF 元数据对于程序的初始部分，如堆栈、r/w 数据和文本 + 只读数据）。或者对于非 Linux，当然是它们等效的系统调用和元数据。

> 但是如果操作系统是 Linux 并且已经在保护模式 + 平面内存模式下运行，那么我们还需要 Far JMP 吗？

**不，在 Linux 上您永远不需要`far jmp`处于用户空间或内核模式，**并且制作一个是个坏主意。

您可能很想使用 far[`jmp ptr16:32`](https://www.felixcloutier.com/x86/jmp)编码直接跳转到绝对地址（新的 CS 值被硬编码为 Linux 已知用于 32 位用户空间的相同 CS 值）。但这比普通的 near 慢很多`jmp rel32`，它可以从任何其他 32 位地址到达任何 32 位地址。（直接近跳转仅适用于相对位移，而不是绝对目标。如果您不知道*自己的*地址来计算相对位移，则需要间接跳转才能近跳转到绝对地址。）

这甚至不是 64 位模式的选项，其中没有`jmp far 80-bit immediate`ptr16:64 编码，只有内存间接。因此，如果跳转目​​标距离编码太远，您会像普通人一样使用`mov rax, imm64`/ 。`jmp rax``rel32`

* * *

Linux 上的所有用户空间进程都使用相同的 32 位或 64 位 CS 段选择器（当前特权级别 CPL = 3 = ring 3 用户模式），内核使用不同的（CPL=0 = ring 0 内核模式）。

**现代 x86 操作系统上 CS 的唯一目的是选择 32 位和 64 位模式（`.L`GDT 条目中的位）和特权级别。**

您只能通过中断/异常和指令在用户和内核 CS 之间切换`int`，`sysenter`或`syscall`进入内核模式，从内核堆栈`iret`恢复`cs:eip`或从（32 位内核）或从系统调用优化返回用户空间。在首先进入保护模式（带有）后，内核不会更改 CS。`cs:rip``sysexit``sysret``jmp far``jmp far`

* * *

**除非您想在以 64 位启动的进程中更改为 32 位模式等不稳定的愚蠢计算机技巧，否则`jmp far`在 Linux 下**是零理由。

这*是*可能的，但我不知道它是否真的稳定。例如，内核可能会记住您的进程应该是 64 位的，并以 64 位模式从中断返回。（即异步将 CS 设置为硬编码`USER32_CS`常量，而不是恢复旧值。） IIRC，它在`syscall`使用的返回路径中执行此操作`sysret`，请参阅[如果您在 64 位中使用 32 位 int 0x80 Linux ABI 会发生什么代码？](https://stackoverflow.com/questions/46087730/what-happens-if-you-use-the-32-bit-int-0x80-linux-abi-in-64-bit-code)

你想这样做吗？你不可以。除了具有`BITS 32`vs.`BITS 64`指令的汇编程序之外，任何工具链都对这样做的支持为零，基本上是零收益，并且崩溃的风险很大（您的进程，而不是机器）。在 32 位模式下您可以在手写 asm 中执行的任何操作，您可以在 64 位模式下使用分配的 32 位指针`mmap(MAP_32BIT)`或使用 x32 ABI 执行同样的操作。

我猜也许在原始 Core 2 上（其中 cmp/jcc 宏融合仅在 32 位模式下工作），在 32 位模式下运行循环并且仅使用 64 位模式来接触很多可能会有性能优势内存，但切换基本上会花费管道刷新，因此通常只展开一点会更便宜，而不是切换到 32 位模式并返回 64 以进行特定的长时间运行循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-18T11:28:15.917

FAR 和 NEAR 控制转移指令基本上是一种控制转移协议 通常，我们看到程序按顺序从上到下逐行执行，有时需要将控制从一个位置转移到另一个 NEAR - 如果您想将控制转移到当前代码段内的内存位置，则称为 NEAR（段内）如果将控制转移到当前代码段之外，则在 FAR 中称为 FAR 跳转，因为控制在当前代码段之外传递 CS（代码段) 和 IP(指令指针) 必须更新为新值

# javascript - 在ckeditor中查找和替换html（不仅是文本）？

> ID：14812161
> 
> 赞同：2
> 
> 时间：2013-02-11T12:42:26.133
> 
> 标签：javascript, jquery, asp.net, ckeditor

我在我的应用程序中使用 CKEDITOR 4。

在这里，我有某种类型的标签，比如说“TagX”。

我只需要为那些没有 id 的 TagX 标签添加一个“id”属性。

我已经使用：

```
content = EditorInstance.getData();
var pattRegex = /<(tagx)(?![^<>]*\bid=).*?<\/\1>/gi;
var arrTagsX = content.match(pattRegex);
for (i = 0; i < arrTagsX.length; i++) {
    content = content.replace("<tagx", <tagx id=\"id_" + i + "\"");
}
EditorInstance.setData(content); 
```

它工作正常，但内容大小非常大，所以我想避免`setData();`.

我想要一些东西来找到 html（不仅仅是文本）并用 html+id 替换 html。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:10:49.477

为什么不使用`$('tagx')`然后`$(this)`在显示的时候使用你的员工呢？

因此，让我们将工作交给 jquery，如下所示

```
var i=0;
$('tagx').each(function(){
   i++;
   $(this).attr('id','id_'+i);
}); 
```

**编辑关于您的其他评论**

让我们测试一下`:not([id])`

```
var i=0;
$('tagx:not([id])').each(function(){
       i++;
       $(this).attr('id','id_'+i);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T06:02:59.660

最后我按照下面的方式更新了我的代码并满足了我的要求......

```
rootElement = EditorInstance.document.getElementsByTag("rootEle").getItem(0);
var tagxEle = rootElement.$.getElementsByTagName('tagx');
var i=0;
 $(tagxEle).not('[id]').each(function(){
    i++;                                        
    $(this).attr('id','tagx_'+i);
 }); 
```

thnx Valky 为您解答...

# r - 将两列中的数据连接到R中的一列

> ID：14812162
> 
> 赞同：3
> 
> 时间：2013-02-11T12:42:32.107
> 
> 标签：r, join, merge

合并两个单独的数据集后，我在数据集中有两列。我想将这些列合并为一列，BNR.x。

对于下面列出的情况，我的首选结果是：
1\. 没有。BNR.x 有数据，没关系。
2\. 什么都没有。两列中的数据相同，这很好。
3\. BNR.y 中的数据被复制到 BNR.x
4\. 没有。同 2。
5\. 列中的数据不同。最好我会在这一行中得到一个带有 FALSE 1 的额外列作为警告。
6\. 没有数据。最好我也会在这里收到警告，通知我我没有此项目的任何数据。

```
+----+-------+-------+
| ID | BNR.x | BNR.y |
+----+-------+-------+
|  1 | 123   | NA    |
|  2 | 234   | 234   |
|  3 | NA    | 345   |
|  4 | 456   | 456   |
|  5 | 678   | 677   |
|  6 | NA    | NA    |
+----+-------+-------+ 
```

有没有可以为我做这件事的方法或包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:58:35.950

这是一个建议。`dat`是数据框的名称：

```
idx <- is.na(dat$BNR.x) # create logical index for NAs in BNR.x

dat$BNR.x[idx] <- dat$BNR.y[idx] # replace NAs with values from BNR.y

# Add a logical column:
dat <- transform(dat, warn = is.na(BNR.x) | (BNR.x != BNR.y & !is.na(BNR.y))) 
```

结果：

```
 ID BNR.x BNR.y  warn
1  1   123    NA FALSE
2  2   234   234 FALSE
3  3   345   345 FALSE
4  4   456   456 FALSE
5  5   678   677  TRUE
6  6    NA    NA  TRUE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:50:58.410

如果您的数据位于名为的数据框中`d`，您可以执行以下操作：

```
## Copy BNR.y if BNR.x is missing
d$BNR.x[is.na(d$BNR.x)] <- d$BNR.y[is.na(d$BNR.x)]
## List the indices of BNR.x that are still missing
which(is.na(d$BNR.x))
## List the indices where BNR.x is different from BNR.y
which(d$BNR.x != d$BNR.y) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:25:58.847

从：

```
df
V1  V2  V3
1  1 123  NA
...

df[which(is.na(df$V2)),]$V2 <- df[which(is.na(df$V2)),]$V3
df$warn <- 0
df[which(is.na(df$V2)),]$warn <- 1
df[which(df$V2 != df$V3 & !is.na(df$V3)),]$warn <- 1 
```

好的，过度使用 which 和 transform 更好，但我必须从某个地方开始 :)

附言。我错了还是

```
d$BNR.x[is.na(d$BNR.x)] <- d$BNR.y 
```

不起作用，因为它会将“错误对齐”的 BNR$y 值与 BNR$x NA 相对应？

# javascript - 如何在javascript中获取托管bean属性值

> ID：14812163
> 
> 赞同：2
> 
> 时间：2013-02-11T12:42:31.517
> 
> 标签：javascript, jquery, jsf, primefaces

谁能告诉我如何在 javascript 方法中获取托管 bean 属性值

就像是

```
function fonction1() {
  var variable = "#{myBean.property}";
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T12:49:30.220

你可以这样：

```
<h:inputText id="propertyId" value="#{myBean.property}" style="display:none"/> 
```

并像这样访问它（请注意，如果它在表单内，您可能需要添加表单前缀）

```
alert($('#propertyId').val()); // or alert($('#myFormId\\:propertyId').val()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:44:34.137

我猜你希望它更新为 bean 中的当前值。你不能！您只能在加载期间将其添加到 javascript。如果要更新它，则必须进行 ajax 调用以获取当前值。

# c++ - 成员函数模板参数默认值

> ID：14812171
> 
> 赞同：1
> 
> 时间：2013-02-11T12:42:54.653
> 
> 标签：c++, templates, function-templates, default-arguments

以下代码在 GCC 4.5.3 中编译，但在 VS 2008 和 2010 中无法编译。这是由于 VS 编译器错误还是标准禁止提供默认函数模板参数值？

```
#include <cstdlib>

struct Bar
{
    enum Group{ A , B , C };
};

struct Foo
{
    template<typename T>
    static void getSome( typename T::Group = T::A );
};

template<typename T>
void Foo::getSome( typename T::Group )
{
};

int main()
{
    Foo::getSome<Bar>();            // Does not compile in VS 2008 & 2010 (compiles in gcc 4.5.3)
    Foo::getSome<Bar>( Bar::C );    // Compiles in VS 2008 and gcc 4.5.3
    return EXIT_SUCCESS;
} 
```

错误信息

```
prog.cpp(11) : error C2589: '::' : illegal token on right side of '::'
prog.cpp(11) : error C2059: syntax error : '::' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T12:46:27.423

这是一个 MSVC 错误。

正如您可能猜到的那样，该错误在于使用默认参数处理模板函数。

他们的解决方法是提供所有函数参数。 *（恶心）*

[在这里](https://connect.microsoft.com/VisualStudio/feedback/details/583081/)承认。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T12:46:45.633

我认为`g++`在编译您的代码段时遵守标准。

以下摘录应引用标准的右侧部分（第 14.1.9 节）：

> 默认模板参数是在模板参数中 = 之后指定的模板参数 (14.3)。可以为不是模板参数包 (14.5.3) 的任何类型的模板参数（类型、非类型、模板）指定默认模板参数。可以在模板声明中指定默认模板参数。不应在出现在成员类之外的类模板成员的定义的模板参数列表中指定默认模板参数。不应在友元类模板声明中指定默认模板参数。如果友元函数模板声明指定了默认模板参数，则该声明应为定义，并且应是翻译单元中函数模板的唯一声明。

# php - 插入 SQL 查询未成功执行

> ID：14812175
> 
> 赞同：0
> 
> 时间：2013-02-11T12:43:10.690
> 
> 标签：php, mysql

我正在使用以下代码插入一些数据，但没有插入。我已经通过回显`$_REQUEST`数据检查了所有内容，输出中一切正常，但没有插入数据

有了这个代码。我正在从表单中获取数据

```
$bname         =$_REQUEST['bname'];
$btype         =$_REQUEST['btype'];
$bemail        =$_REQUEST['bemail'];
$bwebsite      =$_REQUEST['bwebsite'];
$bphone        =$_REQUEST['bphone'];
$bpostal       =$_REQUEST['bpostal'];
$bcountry      =$_REQUEST['bcountry'];
$bannertype    =$_REQUEST['bannertype'];
$bgcolor       =$_REQUEST['bgcolor'];
$bheadcolor    =$_REQUEST['bheadcolor'];
$bsubheadcolor =$_REQUEST['bsubheadcolor'];
$btextcolor    =$_REQUEST['btextcolor']; 
```

它很容易得到回声

```
echo "$bname, $btype, $bemail, $bwebsite, $bphone, $bpostal, $bcountry, $bannertype,  
$bgcolor, $bheadcolor,$bsubheadcolor,$btextcolor"; 
```

但是当涉及到插入不起作用时会出错

```
include 'dbconnect.php';

$sql="insert into company (business_id, business_name, business_type, bunsiness_email,

business_website, work_phone,  postal_code, business_country,banner_type, 

select_bgcolor, select_heading1, select_heading2, select_text) values 

('NULL','".$bname."','".$btype."','".$bemail."','".$bwebsite."', '".$bphone."', 

'".$bpostal."', '".$bcountry."','".$bannertype."', '".$bgcolor."', '".$bheadcolor."', 

'".$bsubheadcolor."', '".$btextcolor."')";

mysql_query($sql) or die("An Error Occured while updating");
include 'dbclose.php';*/ 
```

这是我的表描述

```
+----------------------------+---------------+------+-----+---------+-----------
-----+
| Field                      | Type          | Null | Key | Default | Extra
 |
+----------------------------+---------------+------+-----+---------+-----------
-----+
| business_id                | int(10)       | NO   | PRI | NULL    | auto_increment |
| business_name              | varchar(50)   | NO   |     | NULL    ||
| business_type              | varchar(50)   | NO   |     | NULL    |      |
| business_email             | varchar(50)   | NO   |     | NULL    |
| business_website           | varchar(50)   | NO   |     | NULL    |
| work_phone                 | varchar(20)   | NO   |     | NULL    |
| postal_code                | varchar(20)   | NO   |     | NULL    |
| business_country           | varchar(20)   | NO   |     | NULL    |
| banner_type                | varchar(50)   | NO   |     | NULL    |
| select_bgcolor             | varchar(50)   | NO   |     | NULL    |
| select_heading1            | varchar(50)   | NO   |     | NULL    |
| select_heading2            | varchar(50)   | NO   |     | NULL    |
| select_text                | varchar(50)   | NO   |     | NULL    | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:49:02.617

您正在尝试将`NULL`值插入 `business_id`列。您不能这样做，因为该列不能为空（因为它是主键）

请尝试使用：（我已删除插入到business_id 列）

```
$sql="insert into company (business_name, business_type, bunsiness_email,

business_website, work_phone,  postal_code, business_country,banner_type, 

select_bgcolor, select_heading1, select_heading2, select_text) values 

('".$bname."','".$btype."','".$bemail."','".$bwebsite."', '".$bphone."', 

'".$bpostal."', '".$bcountry."','".$bannertype."', '".$bgcolor."', '".$bheadcolor."', 

'".$bsubheadcolor."', '".$btextcolor."')"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:51:35.820

`bunsiness_email`应该`business_email`在您的插入中，这将彻底破坏它，因为该列`bunsiness_email`不存在。Nthing 学习准备好的语句，因为在这里你有一个场景，你将照顾许多打开和关闭的单引号和双引号，而准备好的语句使处理更容易 + 更安全地防止 SQL 注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:47:12.917

business_id 永远不会为 NULL。它是自动递增的字段。

```
$sql="insert into company (business_name, business_type, bunsiness_email,

business_website, work_phone,  postal_code, business_country,banner_type, 

select_bgcolor, select_heading1, select_heading2, select_text) values 

('".$bname."','".$btype."','".$bemail."','".$bwebsite."', '".$bphone."', 

'".$bpostal."', '".$bcountry."','".$bannertype."', '".$bgcolor."', '".$bheadcolor."', 

'".$bsubheadcolor."', '".$btextcolor."')"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T12:47:40.460

由于`business_id`是一个 INT AUTO INCREMENT 列，因此在 INSERT 查询中不需要它。

```
 $sql = "insert into company (
    business_name, 
    business_type, 
    business_email,
    business_website, 
    work_phone,
    postal_code,
    business_country,
    banner_type, 
    select_bgcolor, 
    select_heading1, 
    select_heading2, 
    select_text
    ) values (
        '" . $bname . "',
        '" . $btype . "',
        '" . $bemail . "',
        '" . $bwebsite . "',
        '" . $bphone . "',
        '" . $bpostal . "', 
        '" . $bcountry . "',
        '" . $bannertype . "', 
        '" . $bgcolor . "', 
        '" . $bheadcolor . "', 
        '" . $bsubheadcolor . "', 
            '" . $btextcolor . "'
    )"; 
```

如果您想在查询中传递 NULL，请不要使用引号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T12:48:54.683

您的 business_id 是自动增量主键，因此当您在查询中将其作为 null 发送时，它会给出错误 remove business_id from your query

```
$sql="insert into company ( business_name, business_type, bunsiness_email,

business_website, work_phone,  postal_code, business_country,banner_type, 

select_bgcolor, select_heading1, select_heading2, select_text) values 

('".$bname."','".$btype."','".$bemail."','".$bwebsite."', '".$bphone."', 

'".$bpostal."', '".$bcountry."','".$bannertype."', '".$bgcolor."', '".$bheadcolor."', 

'".$bsubheadcolor."', '".$btextcolor."')";

mysql_query($sql) or die("An Error Occured while updating"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T13:48:08.940

您的业​​务 id 是主键。它是自动递增值。所以在插入 business_id 时不能插入为 NULL。所以查询将是：

```
$sql="insert into company (business_name, business_type, bunsiness_email,

business_website, work_phone,  postal_code, business_country,banner_type, 

select_bgcolor, select_heading1, select_heading2, select_text) values 

('".$bname."','".$btype."','".$bemail."','".$bwebsite."', '".$bphone."', 

'".$bpostal."', '".$bcountry."','".$bannertype."', '".$bgcolor."', '".$bheadcolor."', 

'".$bsubheadcolor."', '".$btextcolor."')"; 
```

# xcode - 使用不推荐使用的方法时在 Xcode 中显示自定义警告

> ID：14812177
> 
> 赞同：2
> 
> 时间：2013-02-11T12:43:25.070
> 
> 标签：xcode, llvm

重构旧代码，我想更改以下方法：

```
- (id)initWithFrame:(CGRect)frame
{
     // original logic
} 
```

到：

```
- (id)initWithFrame:(CGRect)frame andDelegate:(id<myDelegateProtocol>)delegate
{
     // original logic

    if(delegate)
    { 
        _delegate = delegate; 
    }
} 
```

为了确保没有依赖代码中断，我更新了原始方法以引用旧方法，如下所示：

```
- (id)initWithFrame:(CGRect)frame
{
     return [self initWithFrame:frame andDelegate:nil];
} 
```

但是，如果有人仍在使用该原始方法，我希望 Xcode 发出警告（类似于 iOS 中的方法被弃用时）。理想情况下，类似：

```
- (id)initWithFrame:(CGRect)frame __warning__(@"This method has been replaced to ensure that you set the delegate. Please update your code.");
{
     return [self initWithFrame:frame andDelegate:nil];
} 
```

请注意，这些弃用可能会在新版本 iOS 发布之前发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:00:35.420

在接口文件中，执行以下操作：

```
- (id)initWithFrame:(CGRect)frame__attribute__((deprecated("Use initWithFrame: andDelegate"))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T20:36:59.533

为了完整起见，我还要补充一点，如果您想阻止某人使用特定方法，您可以使用“不可用”标志，例如

```
- (id)initWithFrame:(CGRect)frame__attribute__((unavailable("Use initWithFrame: andDelegate"))); 
```

这会引发错误，而不是警告。

[您可以在clang.llvm.org](http://clang.llvm.org/docs/LanguageExtensions.html#messages-on-deprecated-and-unavailable-attributes)找到更多信息

# iphone - 使用 RaptureXML 时出现 ARC 错误

> ID：14812178
> 
> 赞同：0
> 
> 时间：2013-02-11T12:43:27.550
> 
> 标签：iphone, ios, ios6

我尝试在我的应用程序中使用[RaptureXML](https://github.com/ZaBlanc/RaptureXML)，因为我知道它很容易实现解析。我正在尝试解析远程 XML 文件并从中获取图像并将其视为 UIImageView。当我尝试调用我的远程 XML 文件时，我收到一个警告和两个错误，如下所示，

*   'elementFromURL:' 已弃用
*   “_OBJC_CLASS_$_RXMLElement”，引用自：MyViewController.o ld 中的 objc-class-ref：未找到架构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）
*   clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我使用的 ViewController 如下所示，

```
- (void)viewDidLoad
  {
   [super viewDidLoad];
    RXMLElement *rootXML = [RXMLElement elementFromURL:[NSURL URLWithString:@"http://myxml.com/Sample.xml"]];
    RXMLElement *rxmlProducts = [rootXML child:@"Products"]; 
    NSArray *myarray = [rxmlPlayers children:@"Main"];
    UIImage *currentImage = [myarray objectAtIndex:0];
    customimage.image = currentImage;
  } 
```

我的远程 XML 文件如下所示，

```
<Products>
  <Main id="1">
    <name>Main</name>
    <mainimage id="1">http://myimage.com/images/first.png</mainimage>
    <mainimage id="2">http://myimage.com/images/second.png</mainimage>
  </Main>
  <Category id="1">
    <name>category1</name>
    <categoryimage id="2">http://myimage.com/images/img1.png</categoryimage>
  </Category>
  <Category id="2">
    <name>category2</name>
    <categoryimage id="2">http://myimage.com/images/img2.png</categoryimage>
    <subcategoryimage id="1">http://myimage.com/images/img5.png</subcategoryimage>
    <subcategoryimage id="2">http://myimage.com/images/img4.png</subcategoryimage>
  </Category>
</Products> 
```

谁能告诉我如何解决这个错误以及如何使用[RaptureXML 解析上述远程 XML 文件。](https://github.com/ZaBlanc/RaptureXML)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:18:20.903

[最后，正如RaptureXML GitHub](https://github.com/ZaBlanc/RaptureXML/issues/29)所建议的那样，我通过以下方式解决了 ARC 错误的问题。

**对于 ARC 问题**

因为这是一个链接器错误

*   转到项目设置，选择您当前的构建目标，然后点击“构建阶段”选项卡。在“编译源。
*   检查是否`RXMLElement.m`在该列表中，如果没有将文件添加到列表中。现在 ARC 错误将由链接器解决。

**对于 'elementFromURL:' 已弃用 问题**

*   他们不再推荐使用 elementURL:。您可以摆脱它，但它使您无法根据某些人的需要自定义网络呼叫（超时等）。他们建议使用您最喜欢的网络库来获取 XML 数据，然后将其通过管道传输到 RaptureXML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:48:31.867

好的，有2个问题：

1) RaptureXML 的作者已弃用此[提交](https://github.com/ZaBlanc/RaptureXML/commit/558ed59c74714a04904765f82c84bbb167e94ac5)`elementFromURL`中的方法，并附有以下评论：

> 建议您自己处理网络操作，让 RaptureXML 处理 XML

2) 看起来您没有使用已编译并支持 iPhone 模拟器（架构 i386）的（静态？）库。要解决这个问题，您需要重新编译自己，包括支持或在网上找到一个已经具有此支持的网站。

# devise - 使用omniauth进行facebook登录，只有访问令牌

> ID：14812179
> 
> 赞同：8
> 
> 时间：2013-02-11T12:43:34.353
> 
> 标签：devise, access-token, facebook-login

我正在为移动应用程序在 Rails 中创建一个 api。现在用户将使用 facebook 登录，我将在 facebook 身份验证后收到访问令牌。我必须获取此访问令牌并检查应用程序数据库中是否存在访问令牌。如果允许则允许用户访问，如果不允许则检查电子邮件并更新访问令牌并允许用户访问。

我如何使用omniauth-facebook 和devise 来实现这一点，据我所知omniauth-facebook 从头开始​​做所有事情，找不到只提供对omniauth-facebook 的访问令牌的方法。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-06-02T18:03:54.367

你不需要omniauth-facebook。此 gem 的目的只是获取访问令牌（并查询用户信息）。以下是标准设置中发生的事情（使用 Devise 和omniauth-facebook）：

*   Omniauth 获得访问令牌
*   Omniauth 通过 Facebook 的 API 获取用户信息并将其存储在请求的环境中
*   Omniauth 在您需要编写的应用程序中调用自定义回调方法
*   这个回调方法在数据库中检索或创建用户，然后使用 Devise 提供的一些帮助器来登录用户。

（有关更多详细信息，请参阅[Devise 关于 Omniauth 的文档](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)）

现在，鉴于您已经拥有访问令牌，并且从 Facebook 的 API 获取用户信息非常简单，您实际上并不需要omniauth-facebook。

您需要做的就是编写一个动作来：

*   接收访问令牌（作为参数）
*   [获取用户信息（对/me](https://developers.facebook.com/docs/graph-api/reference/v2.0/user/)的 Graph API 请求）
*   在数据库中查找或创建用户（使用用户的 Facebook id）
*   使用 Devise 的助手让用户登录

此代码基于[Devise 文档](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)中给出的示例。

```
class Users::FacebookCallbacksController
  def facebook
    # You should test if params[:access_token] is present
    # and if this request fails
    facebook_data = HTTParty.get("https://graph.facebook.com/me", query: {
      access_token: params[:access_token]
    }).parsed_response

    # You need to implement the method below in your model (e.g. app/models/user.rb)
    @user = User.find_for_facebook_oauth(facebook_data)

    if @user.persisted?
      sign_in_and_redirect @user, :event => :authentication #this will throw if @user is not activated
      set_flash_message(:notice, :success, :kind => "Facebook") if is_navigational_format?
    else
      session["devise.facebook_data"] = facebook_data
      redirect_to new_user_registration_url
    end
  end
end 
```

**笔记：**

*   我在这里使用[HTTParty gem](http://rubygems.org/gems/httparty)来调用 Facebook API，但还有其他可能性，包括[Koala](https://rubygems.org/gems/koala)
*   `sign_in_and_redirect`,`set_flash_message`并且`is_navigational_format?`是 Devise 提供的助手
*   请参阅[设计的文档](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)以实现`User.find_for_facebook_oauth`
*   一个名为[devise_facebook_open_graph](https://github.com/thhermansen/devise_facebook_open_graph)的 gem以稍微不同的方式做同样的事情。它并没有真正使用或维护，但您可能对实现感兴趣。

# html - 具有灵活高度的表格单元格内的绝对定位

> ID：14812182
> 
> 赞同：1
> 
> 时间：2013-02-11T12:44:00.043
> 
> 标签：html, css, css-position, html-table

我在表格单元格中有 2 个 div，希望一个与单元格顶部对齐，另一个与单元格底部对齐。

我创建了这个 jsFiddle [http://jsfiddle.net/davew9999/3Mwz5/11/](http://jsfiddle.net/davew9999/3Mwz5/11/)，它显示了我拥有的 HTML 结构。这是代码：

**HTML**

```
<table>
<tbody>
    <tr>
        <td>
            <div class="cell">
                <div class="top">This text is dynamic so can't set fixed height on this div. For example
                    this text could be very long while the others are quite short.</div>
                <div class="bottom">This should always be at the bottom of the table cell and also is dynamic
                    and can't be a fixed height.</div>
            </div>
        </td>
        <td>
            <div class="cell">
                <div class="top">Not much text.</div>
                <div class="bottom">This should always be at the bottom of the table cell and also is dynamic
                    and can't be a fixed height</div>
            </div>
        </td>
    </tr>
</tbody>
</table> 
```

**CSS**

```
tr {
    vertical-align: baseline;
}
td {
    padding:10px
}
.cell {
    position: relative;
}
.bottom {
    position: absolute;
    bottom: 0;
} 
```

我发现的所有解决方案都涉及在包装器 div 上设置高度（在我的示例中为“cell”类的 div）。但是，这对我不起作用，因为内容是动态的。

我尝试了一个解决方案，我计算了加载时 td 元素的高度，并将具有“cell”类的 div 设置为相同的高度。这一直有效，直到我调整浏览器窗口的大小，从而导致表格单元格的高度发生变化。我尝试处理浏览器窗口调整大小事件，但是在单击和拖动调整大小期间会触发很多。它必须在 IE8 及其缓慢的 JavaScript 引擎中工作，并且有超过 200 个 td 元素来检查这不是一个合理的解决方案。

一个为我提供所需输出的解决方案是将具有“top”类的 div 的内容和具有“bottom”类的 div 拆分为 2 个表格行，但是我想知道是否有纯 CSS 解决方案或更好的 CSS 和 JavaScript我尝试过的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:54:59.493

无法测试这一点，因为我被困在 iPad 上的讲座中，但是

相对底部 -1

应该将元素固定到绝对底部，反之亦然

以及将高度设置为父级应该可以强制 e 单元格获得与 td 相同的高度（100% 剂量这个？）

再次无法测试 ATM，直到 jfiddle 修复 ipad chrome/safari 问题

编辑： twitter bootstrap 不会为你提供脚手架类吗？

编辑 2：脚手架和响应[式 http://twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

# php - 将xml转换为json时出错

> ID：14812186
> 
> 赞同：0
> 
> 时间：2013-02-11T12:44:13.850
> 
> 标签：php, xml, json, parsing

使用函数时出现**未定义函数**错误`json_encode()`。我需要将 xml 数据转换为 json 数据。我正在使用的代码是：

```
$xml = simplexml_load_string($retValue);
echo json_encode($xml); 
```

我也试过这个：

```
$xml = simplexml_load_string($retValue);
$array = objectsIntoArray($xml);
$array = json_encode($array);
print_r($array);
die;

function objectsIntoArray($arrObjData, $arrSkipIndices = array())
{

    $arrData = array();
    if (is_object($arrObjData)) {
        $arrObjData = get_object_vars($arrObjData);
    }
    if (is_array($arrObjData)) {
        foreach ($arrObjData as $index => $value) {
            if (is_object($value) || is_array($value)) {
                $value = objectsIntoArray($value, $arrSkipIndices);
            }
            if (in_array($index, $arrSkipIndices)) {
                continue;
            }
            $arrData[$index] = $value;
        }
    }
    return $arrData;
} 
```

但是在这个`objectsIntoArray()`和`json_encode()`两者都抛出函数未定义的错误。 `$retValue`包含 xml 数据。我无法弄清楚为什么我会收到此错误。我是不是错过了什么。我对php完全陌生，并不太了解它。请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:00:15.183

看起来 PHP 没有启用 JSON 扩展。从 PHP 5.2.0 开始，默认情况下捆绑并启用 JSON 扩展。但是，您仍然可以使用 JSON 构建 PHP。

`phpinfo.php`您应该通过使用以下代码创建一个名为 的脚本来检查是否是这种情况：

```
<?php
    phpinfo(); 
```

在浏览器中打开脚本。并检查您是否可以找到名为**json**的部分。还要检查您的 PHP 版本。

```
json support    enabled
json version    1.2.1 
```

如果您使用[的是 PHP 5.1.x，请使用 pecl 安装扩展](http://www.php.net/manual/en/json.installation.php)。否则，请说明您使用的是哪个操作系统（和发行版）以及您是如何安装 PHP 的。

如果您没有自己安装 PHP，请联系您的系统管理员/托管服务提供商。

或者，您可以使用这个[纯 PHP json 库](https://gist.github.com/itspriddle/845016)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:04:18.093

看来你有旧版本的 php 4.3.1。或您`simplexml_load_string`的已禁用。检查 echo phpinfo();

# javascript - JavaScript If 语句在 IE 中不起作用

> ID：14812188
> 
> 赞同：0
> 
> 时间：2013-02-11T12:44:16.003
> 
> 标签：javascript, jquery

我有以下代码，在 Firefox 和 chrome 中运行良好，但在 Internet Explorer 中无法运行...

```
$("#nav-tabs").on("click", "a", function(e) {
    e.preventDefault();
    $(this).tab('show');
    $('li#test').each(function() {
        if($(this).attr('class') == "active")
        {
            //Active class is applied
            $(this).children().children().attr("src", "assets/img/button_home_selected3.png");
        }
        else
        {
            $(this).children().children().attr("src", "assets/img/button_home_plain.png");
        }
    });
}); 
```

IE的条件语句有问题吗？？？

这是HTML

```
<ul id="nav-tabs" data-tabs="tabs">
   <li id="test" style="list-style: none;" class="active">
        <a href="#home" data-toggle="tabs" ><img src="assets/img/button_home_selected3.png" id="test2"  width="83" /><span>Home</span></a>
   </li>
</ul> 
```

此外，li 标签是动态添加的......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T12:45:58.417

取决于实际的 html，但`hasClass`在检测元素是否具有给定类时应始终使用

所以将 if 更改为

```
if($(this).hasClass("active") 
```

如果元素具有类`active`并且不仅当`class`属性的值恰好是值“活动”时，这将是正确的

例如，如果你有

```
<img class=" active image" /> 
```

那么`hasClass("active")`将是正确的，但您的测试将是错误的，甚至

```
<img class=" active " /> 
```

由于 active 周围的空格，在不同的浏览器中可能会受到不同的对待

**根据评论编辑**

你几乎不应该只依赖元素的位置。您应该依赖位置的唯一情况是位置本身是关键。例如，当斑马为桌子着色时

我建议您将代码更改为以下

```
$("#nav-tabs").on("click", "a", function(e) {
    e.preventDefault();
    $(this).tab('show');
    $('li#test').each(function() {
        var self = $(this), 
        source = self.hasClass("active") ? 
                      "assets/img/button_home_selected3.png") :
                      "assets/img/button_home_plain.png";
        self.children().
            .find(img:first).attr("src", source);
    });
}); 
```

有几点需要注意。

*   当您多次使用 $(this) 时。将其存储在局部变量中，而不是多次选择它
*   使用更具体的选择器，而不是仅依赖于找到元素的顺序
*   缩小选择范围以仅在更改 HTML 时选择所需的元素。在您的情况下，将另一个图像作为孙子添加到 li#test 将导致代码同时更改`src`两个图像
*   如果您使用不同的参数执行两次相同的操作，请使用 if 来选择输入并且只实现一次功能，因为这使得代码更易于阅读和维护。如果您的情况是根据活动类是否存在来选择图像的来源，然后`src`相应地设置

# javascript - 使用 For-In 循环计算数组值

> ID：14812192
> 
> 赞同：1
> 
> 时间：2013-02-11T12:44:42.237
> 
> 标签：javascript

我有以下 Javascript。我正在尝试使用“for in”来计算 myCosts 数组值的总和；循环然后将它们显示在页面上。我想我快到了。

```
function enterFood() 
{ 
    var myFoods = new Array() 
    var myCosts = new Array() 

    for (i = 1; i <= 5; i++) 
    { 
        myFoods[i] = prompt("Enter name of Food",""); 
        myCosts[i] = parseFloat(prompt("Enter cost of food","")); 
        document.getElementById("cost").innerHTML += i + ". " + myFoods[i] + ". Cost: £" + myCosts[i] + "<br />"; 
    } 

    for (var i in myCosts) 
    { 
        document.getElementById("total_cost").innerHTML =+ i; 
    } 
} 
```

任何人都可以提供任何帮助以便我完成这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:47:23.893

您应该正确地迭代数组：

```
var totalElement = document.getElementById("total_cost"),
    total_cost = parseFloat(totalElement.innerHTML);

for (var i = 0, len < myCosts.length; i < len; i++) {
    total_cost += myCosts[i];
}

totalElement.innerHTML = total_cost; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T12:47:57.277

您在 for 循环`var`之前缺少一个关键字。`i`没有它将`i`成为一个全局变量。此外，使用数组文字符号 ( `[]`) 比 write 更短/更快/更清晰，`new Array()`如下所示：`myArray = []`只是一个一般提示......还要注意，`for (var ... in ...)`它用于遍历对象的成员，通常不循环遍历数组。

如果您稍后在脚本中不使用`myBooks`and`myPrices`数组中的值，那么您在这里不需要任何数组 - 您可以组合两个循环并将提示返回的值保存在循环内的临时变量中。见下文：

```
function enterFood()
{
    var total_cost = 0;
    for (var i = 1; i <= 5; i++)
    { 
        var name = prompt("Enter name of Food","");
        var cost = parseFloat(prompt("Enter cost of food","")); 
        document.getElementById("cost").innerHTML += i + ". " + name + ". Cost: £" + cost + "<br />";
        total_cost += cost;
    }
    document.getElementById("total_cost").innerHTML = total_cost;
} 
```

此外，仅查看您的代码有一些评论：

**1)** for 循环内部之前缺少`var`关键字。`i`没有它，我将成为一个全球变量。

**2）**在 Javascript 中，数组是一个对象，它具有各种作为函数的属性。使用数组文字表示法（即`[]`）比编写`new Array`..例如更干净/更短和更快`myArray = []`

**3)** The For-In loop is used to iterate through the members of an object and generally NOT to loop through an array. For-In loops are slower than normal loops. You want to use a regular loop for iterating over an array.

**4)** If you are not using the values in the `myBooks` and `myPrices` arrays later on in your script then you do not need any arrays here, you could just combine your 2 loops and save the values returned from the prompts inside temporary variables inside the loop.

EDIT: As corrected by [@Teemu](https://stackoverflow.com/users/1169519/teemu), `i` is hoisted from `for..in` loop so will not become global.

# wordpress - htaccess - 带有 WordPress 的 laravel

> ID：14812196
> 
> 赞同：2
> 
> 时间：2013-02-11T12:44:55.040
> 
> 标签：wordpress, .htaccess, laravel

我试图让 wordpress 和 laravel 并排运行并遇到一个小问题。

这是我的代码

```
# BEGIN Laravel
<IfModule mod_rewrite.c>
    Options -MultiViews
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^/?admin/?.*$ index.php [L]
</IfModule>
# END Laravel

# BEGIN WordPress
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /wp-index.php [L]
</IfModule>
# END WordPress 
```

除了主页和管理页面（laravel）之外，除了最后没有“/”之外，wordpress 页面都可以工作。

有任何想法吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T10:07:17.067

“重写”的意思是“将 URL 视为与此文件名匹配”。文件运行仍然可以告诉原始 URL 是什么，因此它知道要显示什么。

编码

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

表示如果指定名称的文件不存在，或者浏览器中的目录不存在，则继续执行下面的重写规则。

您拥有的第一条规则是“将其中包含 /admin/ 的任何内容发送到 index.php”——大概是 Laravel。

您拥有的第二条规则是“向 wp-index.php 发送任何内容”——大概是 WordPress。

服务器通常设置为直接 / 到 index.php，并且行

```
RewriteRule ^index\.php$ - [L] 
```

意思是“不要重写 index.php，然后停止”，所以这就是为什么“主页”会转到 Laravel。

注释掉该行（在开头添加一个 #），看看这是否会使您的主页转到 WordPress。

此外，/admin 不会直接指向 Laravel，因为它不匹配规则（基于 /admin/）。如果您希望 /admin 工作，请从第一条规则中取出 /。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:57:50.907

路由有问题。这个问题可能会解决您的问题： [PHP Laravel Routing Issue](https://stackoverflow.com/questions/12045881/php-laravel-routing-issue/12078824#12078824)

尝试所有建议，尤其是有关 apache 配置的建议。

# reload - Trigger.io Toolkit 'getaddrinfo failed' with Reload - 微调器卡住了

> ID：14812200
> 
> 赞同：1
> 
> 时间：2013-02-11T12:45:26.100
> 
> 标签：reload, trigger.io

我正在尝试使用 Trigger.io Reload 重新加载我的移动应用程序。

在推送到流或在重新加载选项卡上恢复配置后，工具包卡在使用微调器的“加载”上，有时我会看到此错误。继续的唯一方法是重新打开工具包。

```
Error in remote call to api.get: [Errno 11002] getaddrinfo failed Details Close
Traceback (most recent call last):
  File "C:\Users\Meirion\AppData\Local\Trigger Toolkit\build-tools\forge\async.py", line 96, in run
    result = self._target(*self._args, **self._kwargs)
  File "C:\Users\Meirion\AppData\Local\Trigger Toolkit\trigger\api\api.py", line 6, in get
    return forge_tool.singleton.remote._api_get(method, cookies=cookies)
  File "C:\Users\Meirion\AppData\Local\Trigger Toolkit\build-tools\forge\remote.py", line 265, in _api_get
    resp = self.__get_or_post(absolute_url, *args, **kw)
  File "C:\Users\Meirion\AppData\Local\Trigger Toolkit\build-tools\forge\remote.py", line 221, in __get_or_post
    resp = getattr(self.session, method.lower())(url, *args, **kw)
  File "C:\Users\Meirion\AppData\Local\Trigger Toolkit\build-tools\forge-dependencies\requests\sessions.py", line 254, in get
    return self.request('get', url, **kwargs)
  File "C:\Users\Meirion\AppData\Local\Trigger Toolkit\build-tools\forge-dependencies\requests\sessions.py", line 241, in request
    r.send(prefetch=prefetch)
  File "C:\Users\Meirion\AppData\Local\Trigger Toolkit\build-tools\forge-dependencies\requests\models.py", line 634, in send
    raise ConnectionError(sockerr)
ConnectionError: [Errno 11002] getaddrinfo failed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:03:05.730

我们无法在此处解析 DNS - 您是否遇到与其他程序的连接问题/您是否在不同位置看到类似的行为？

将来我们会做得更好，使这样的致命错误更加优雅！

# git - 克隆 git 或 hg 存储库时如何节省磁盘使用量？

> ID：14812202
> 
> 赞同：2
> 
> 时间：2013-02-11T12:45:30.120
> 
> 标签：git, mercurial, diskspace

我已经将几棵树克隆到我的本地磁盘中，它从我有限的笔记本电脑磁盘中占用了太多空间。与 SVN 和 CVS 等非分布式版本控制不同，当您签出 git 或 Mercurial 存储库时，您会得到整个树，包括整个历史记录，并且由于我很少将任何代码提交到这些存储库中，但希望保持它们的状态——到目前为止，我发现这些分布式版本控制系统浪费了太多的本地磁盘。

到目前为止，我对消除这种浪费的想法很少：

*   在本地磁盘上创建一个 zfs 或 btrfs 分区（可能是一个循环文件​​系统，因为我不想让它太持久），这应该可以更好地利用重复的文件块。这可能会占用过多的 CPU 周期，从而使其效率低下。

*   放弃使用版本控制并创建一个脚本来每天下载包含整个存储库的 .zip 文件。这将占用太多带宽，我不想这样做。

我的最终解决方案是以某种方式使用 git/hg，就像我们使用 SVN 和 CVS 一样——在服务器上保留历史记录并在本地仅保留最新的修订版，或者在本地保留有限的历史记录，两者都不会破坏其他所有内容，因此我可以看到日志或将文件恢复到以前的版本，如果本地不可用，版本控制系统将从远程获取所需的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T17:17:52.283

从 hg clone 帮助信息：

```
To pull only a subset of changesets, specify one or more revisions
identifiers with -r/--rev or branches with -b/--branch. The resulting
clone will contain only the specified changesets and their ancestors. 
```

您应该能够使用 HG 的修订语法来限制您获得的修订数量，假设您想要的不仅仅是最新的。使用 -r tip 来获取提示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T14:43:07.240

使用 svn，您实际上有 2 个完整的、未压缩的已检出修订副本（在 中存在每个文件的完整副本`.svn`）。使用 mercurial，您有 1 个完整的、未压缩的已签出修订副本和一个高度压缩的二进制增量表示（向下`.hg/store`）。在很多情况下（可区分的文本文件），包含所有内容的 hg 克隆实际上会比单个修订的 svn checkout 更小。

我认为您的块级重复数据删除根本没有帮助。Mercurial 和 Git 都使用非常高效的二进制增量，然后将其压缩，在它们的存储中几乎没有多余的信息，并且不会有块对齐的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T13:01:52.220

使用 git，您可以使用`--depth`选项仅创建浅拷贝。

另一方面，这样不会节省太多空间：http: [//blogs.gnome.org/simos/2009/04/18/git-clones-vs-shallow-git-clones/](http://blogs.gnome.org/simos/2009/04/18/git-clones-vs-shallow-git-clones/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T14:47:23.517

使用 mercurial，您可以要求一个空的工作副本（仅克隆 .hg 文件夹）：

```
hg clone -U <source> 
```

有关更多选项，请参见**hg help clone**。

我希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-04T22:12:28.177

使用“汞份额”。这将允许您只保留一个共享历史记录和多个检出作为工作副本的修订。

# quickblox - 是否可以在 Quickblox 框架上向多个用户授予写入权限？

> ID：14812203
> 
> 赞同：1
> 
> 时间：2013-02-11T12:45:32.370
> 
> 标签：quickblox

我正在考虑将 Quickblox 后端集成到我的移动应用程序中。但是我确实需要允许多个用户对相同的对象（在自定义模块和内容模块中）具有写访问权限。

是否可以？

谢谢，麦孔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T16:00:09.197

QuickBlox 发布了带有权限 API 的 iOS SDK 1.7 - [http://quickblox.com/developers/SimpleSample-customObjects-ios#Permissions](http://quickblox.com/developers/SimpleSample-customObjects-ios#Permissions)

REST API 文档[http://quickblox.com/developers/Custom_Objects#Permissions](http://quickblox.com/developers/Custom_Objects#Permissions)

现在你可以像小菜一碟一样做到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T10:03:03.923

这是不可能的，但有一种解决方法：创建一个超级用户，每个用户在编辑对象时都将使用其凭据

# php - mysql 语句在 php 代码中无法正常工作

> ID：14812207
> 
> 赞同：2
> 
> 时间：2013-02-11T12:45:43.713
> 
> 标签：php, mysql

以下是我脚本中的代码。$sql 语句在 phpmyadmin 中执行时正常工作。但它在以下代码中不起作用。只显示一行数据。

```
$conn = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD );
$sql="SELECT DISTINCT productId FROM bid WHERE userId =:id";
$st = $conn->prepare( $sql );
$st->bindParam( ":id", $_SESSION['id'], PDO::PARAM_INT );
$st->execute();
$data=$st->fetch(PDO::FETCH_ASSOC);
$conn=null;
print_r($data); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:48:38.610

在这两种方法中，替换

```
$data = $st->fetch(PDO::FETCH_ASSOC); 
```

给出的代码。

1.  其中一种方法是：

    ```
    $data = $st->fetchAll(PDO::FETCH_ASSOC); 
    ```

2.  环形

    ```
    while( $data = $st->fetch(PDO::FETCH_ASSOC) )
        print_r($data);
    $conn=null; 
    ```

# fonts - 更改降级字体的属性

> ID：14812209
> 
> 赞同：1
> 
> 时间：2013-02-11T12:45:48.247
> 
> 标签：fonts, webfonts, css

想知道这是否可能。如果您的初始选择不存在于用户浏览器中，不同的 Webfonts 具有不同的行高，这可能会改变网页的动态。有没有办法改变备份字体的属性？

即如果字体降级，则更改 arial 的行高

```
 font-family: futura, arial; 
```

我可以更改 css 中 arial 字体的值吗？或者可能是线高本身的值？

IE

```
 line-height: 14px, 19px; 
```

*谢谢*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:40:26.330

不，这在 CSS 中是不可能的。这是 CSS 中的一个基本限制：它将属性视为单独的，并且不允许您根据解析另一个属性的值的最终结果来设置一个属性的值。

这意味着`font-family`应该选择列表中的字体或“字体堆栈”，以便它们在合适的行高方面是公平的，例如。

通过根本不设置`line-height`，您将使浏览器应用它们自己的默认值，这些默认值应该取决于字体。但默认值可能不合适，具体取决于内容和其他方面。

# ios - 如何在 uitableview 中搜索和显示 youtube 视频？

> ID：14812210
> 
> 赞同：0
> 
> 时间：2013-02-11T12:45:51.373
> 
> 标签：ios, json, uitableview, search, youtube-api

我正在寻找一个简单的例子来展示如何搜索视频，并在 uitableview 中显示结果。

我一直在尝试这样做，但没有任何运气。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:59:13.117

看看 Youtube API。

这是您需要做的：

1.  从 Youtube API 获取 JSON。
2.  使用 JSONSerialization，然后获取视频的名称、标题、缩略图和 ID。
3.  用数据填充 UITableView。

# symfony - PHPUnit TestListener 在 PhpStorm 中不起作用

> ID：14812213
> 
> 赞同：1
> 
> 时间：2013-02-11T12:46:25.577
> 
> 标签：symfony, phpunit, phpstorm

我正在使用 Symfony 2、PHPUnit 3.7.10 和 PhpStorm 5.0.4。

我**在**. _ **_** _`namespace Acme\DemoBundle\Tests`

当我使用监听器工作从 CLI 调用 phpunit 时`vendor/bin/phpunit.bat -c app/` ，测试成功。

我发现了这个：[PHPUnit、PHPUnit_Framework_TestListener、Netbeans 和 PHPUnit xml 配置](https://stackoverflow.com/questions/6067180/phpunit-phpunit-framework-testlistener-netbeans-and-the-phpunit-xml-config)，但这似乎是另一个问题。

但是当我在 PhpStorm 中开始测试时，监听器没有加载，一些对象应该被注入到一个抽象的测试类中，在这种情况下是 null。我还注意到，当我在 MyTestListener 类中使用断点进行调试时，调试器不会在此类中停止，其他断点可以正常工作。

phpunit.xml 条目：

```
 <listeners>
       <listener class="Acme\DemoBundle\Tests\MyTestListener" file="../src/Acme/DemoBundle/Tests/MyTestListener.php">
       </listener>
    </listeners> 
```

我也尝试添加一个空元素，它没有帮助。

在我的 PhpStorm 运行/调试配置中，我指定**了 phpunit.xml**和**引导**文件。我还为命令行/解释器添加了这个选项：`-d auto_prepend_file=vendor/autoload.php`

phpunit.xml 中的监听器配置似乎被解析了，但不起作用。当我将类名更改为无效的文件/类时，我收到一个错误，即文件无法打开流。我也尝试使用绝对文件路径或将斜杠更改为反斜杠，没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:46:27.070

真可惜……我发现了自己的错误

我从 CLI 进行所有测试，但在 PhpStorm 中只有一个测试类，所以套件名称不同，在我的侦听器类中，我仅在套件名称匹配时才执行此操作：

```
if ($suite->getName() == "db-tests") {...} 
```

所以解决方案是将表达式扩展到

```
$name = $suite->getName();
if ($name == "db-tests" || 
   strpos($name, 'Acme\DemoBundle\Tests\Database') !== false) {...} 
```

# c++ - C ++中最小的符合标准的对象大小？

> ID：14812214
> 
> 赞同：2
> 
> 时间：2013-02-11T12:46:25.390
> 
> 标签：c++, sizeof

我知道空类的大小由标准定义为非零。在大多数实现中，它*通常是*1 个字节。
但是，C++ 标准是否指定了对象的最小可能大小？假设按照标准，空类对象的大小**至少**为1 个字节是否合乎逻辑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T12:47:50.843

对象的最小尺寸为零（§1.8/5）。但是，完整的对象必须始终具有非零大小，并且该大小必须至少为 1。

> 除非它是位域 (9.6)，否则最派生对象应具有非零大小并应占用一个或多个字节的存储空间。基类子对象的大小可能为零。普通可复制或标准布局类型（3.9）的对象应占用连续的存储字节。

由于所谓的 EBCO（*空基类优化*），空类型的基类子对象的大小可以为零。

# c# - splitting a label that contains text and numbers

> ID：14812221
> 
> 赞同：0
> 
> 时间：2013-02-11T12:46:38.287
> 
> 标签：c#, labels

I have a label containing the following text: "hat $15".

I want to split the text to 2 labels so that the word "hat" will go into label1 and the word "$15" will go into label2.

Please advise.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:48:37.040

```
string[] data = label1.Text.Split(' ');
label2.Text = data[0];
label3.Text = data[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:48:26.473

Please have a look at [Split](http://msdn.microsoft.com/en-us/library/ms228388%28v=vs.80%29.aspx) for this particular function.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:48:55.573

How about this:

```
string[] strings = label1.Text.Split(' ', 2);
label2.Text = strings[0];
label3.Text = (strings.Length > 1) ? strings[1] : String.Empty; 
```

The second label is only filled if there's at least one space character in the original label's text.

The original label's text is split into exactly two parts even if there's more than one space character in the text. For example "Hello World: Test" will be split into "Hello" and "World: Test".

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T12:49:52.073

use String.Split():

```
string s = "hat $15";
string[] items = s.Split(' '); 
```

# vb.net - TableAdapter 更新后的 SCOPE_IDENTITY()，使用 BindingSource

> ID：14812224
> 
> 赞同：0
> 
> 时间：2013-02-11T12:46:47.893
> 
> 标签：vb.net, vb.net-2010, bindingsource, tableadapter, scope-identity

尝试在 TableAdapter.Update 之后获取行的自动增量 ID。数据是 Binded 的，因此在[这种情况下](https://stackoverflow.com/questions/13719567/scope-identity-after-tableadapter-update)不会将任何行添加到数据表中。

关于如何解决这个问题的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T17:11:19.203

为什么不使用这个之后`TableAdapter.Update`：

```
CType(xBindingSource.Current, DataRowView).Item("ID") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:57:44.243

您需要通过在插入查询中包含 select 语句来检索新创建的 id；您还需要将执行模式更改为标量。 [这篇博文](http://blogs.msdn.com/b/smartclientdata/archive/2005/10/31/returnidentityvaluequery.aspx)有更多细节

# c# - 关于 EFCodeFirst 中关系的新手

> ID：14812231
> 
> 赞同：0
> 
> 时间：2013-02-11T12:47:01.667
> 
> 标签：c#, .net, ef-code-first, entity-framework-5

下面的代码有什么区别？

```
 public class Album
{
    public int Id { get; set; }
    public string Title { get; set; }
    public List<Gener> Gener { get; set; }
}

public class Gener
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public class Albumcontext:DbContext
{
    public DbSet<Album> Albums { get; set; }
    public DbSet<Gener> Geners { get; set; }
} 
```

![在此处输入图像描述](../Images/11106338dfb3ac1e1d09d2b06cf68955.png)

```
 public class Album
{
    public int Id { get; set; }
    public string Title { get; set; }
    public Gener Gener { get; set; }
}

public class Gener
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public class Albumcontext:DbContext
{
    public DbSet<Album> Albums { get; set; }
    public DbSet<Gener> Geners { get; set; }
} 
```

![在此处输入图像描述](../Images/e229a2bd568d2f62bb4c506407d28dc4.png)

我知道关系 2 实体必须使用代码 2，但如何使用 List<> 或 Collection<>？
对不起，我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:50:37.243

第一个创建关系“一个`Album`可以有很多`Genres`”，第二个创建“一个`Album`可以只有一个`Genre`，但一个`Genre`可以与多个链接`Albums`”。

查看您的示例，您可能希望具有多对多关系，`Album`可能有一个或多个`Genres`，并且`Genre`可能与一个或多个链接`Albums`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:52:52.313

在第一个块中，您在`Album`课堂上创建一个属性`Gener`，即`Gener`对象列表 - 这意味着您希望一个`Album`有很多`Geners`：

```
public List<Gener> Gener { get; set; } 
```

在同一类的第二个块中，您有一个`Gener`类型的属性`Gener`，因此它仅指向一个类对象`Gener`。这意味着你想`Album`拥有一个`Gener`.

```
public Gener Gener { get; set; } 
```

顺便说一句，你的类名有错别字——我想你想要的是 Genre，而不是 Gener。

**编辑：**

要了解有关在实体框架中定义关系的更多信息，请查看[这篇文章](http://msdn.microsoft.com/en-us/data/hh134698.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:51:31.500

`Album`在第一个示例中，和之间存在多对一关系`Gener`。由于每个`Gener`都只链接一个`Album`， `Gener`所以获取外键`Album`。

在第二种情况下，它只是一对一的关系，并且您`Gener`在模型中引用了一个对象`Album`，因此`Album`获取`Gener`.

# c - 在 Windows、Linux、Solaris、HP-UX、IBM AIX、Vxworks、Wind River Linux 上休眠几毫秒？

> ID：14812233
> 
> 赞同：11
> 
> 时间：2013-02-11T12:47:08.350
> 
> 标签：c, sleep, system-calls, milliseconds

我必须编写一个必须休眠几毫秒的 C 程序，它必须在 Windows、Linux、Solaris、HP-UX、IBM AIX、Vxworks 和 Windriver Linux 等各种平台上运行

*   在[Windows](https://stackoverflow.com/questions/3379139/sleep-function-in-windows-using-c/3379248#3379248)上，`Sleep`系统调用仅在毫秒内起作用。
*   在[Linux](http://forums.devshed.com/c-programming-42/linux-version-of-sleep-need-it-in-milliseconds-126723.html)上，`sleep`将在几秒钟内工作；`usleep`将在微秒内执行，它也可以在 Solaris 上使用。
*   在[Vxworks](http://www.dauniv.ac.in/downloads/EmbsysRevEd_PPTs/Chap_9Lesson10EmsysNewVxWorksSysTaskWDTISR.pdf)中，我希望我可以使用`taskDelay`and来实现`sysClkRateSet`。

如何在 HP-UX、IBM AIX 和 Wind River Linux 上实现毫秒级睡眠？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-11T18:49:34.260

使用特定于平台的 s 的包装器`#define`可能会：

```
#if defined(WIN32)
  #include <windows.h>
#elif defined(__UNIX__)
  #include <unistd.h>
#else
#endif

...

int millisleep(unsigned ms)
{
#if defined(WIN32)
  SetLastError(0);
  Sleep(ms);
  return GetLastError() ?-1 :0;
#elif defined(LINUX)
  return usleep(1000 * ms);
#else
#error ("no milli sleep available for platform")
  return -1;
#endif
} 
```

* * *

**更新**

参考[下面 Jonathan 的评论](https://stackoverflow.com/users/15168/jonathan-leffler)，请在此处找到更现代、更便携（以及更正：}）的版本：

```
#if defined(WIN32)
  #include <windows.h>
#elif defined(__unix__)
  #include <time.h>
  #include <unistd.h>
#else
#endif

...

int millisleep(unsigned ms)
{
#if defined(WIN32)

  SetLastError(0);
  Sleep(ms);
  return GetLastError() ?-1 :0;

#elif _POSIX_C_SOURCE >= 199309L

  /* prefer to use nanosleep() */

  const struct timespec ts = {
    ms / 1000, /* seconds */
    (ms % 1000) * 1000 * 1000 /* nano seconds */
  };

  return nanosleep(&ts, NULL);

#elif _BSD_SOURCE || \
  (_XOPEN_SOURCE >= 500 || \
     _XOPEN_SOURCE && _XOPEN_SOURCE_EXTENDED) && \
  !(_POSIX_C_SOURCE >= 200809L || _XOPEN_SOURCE >= 700)

  /* else fallback to obsolte usleep() */

  return usleep(1000 * ms);

#else

# error ("No millisecond sleep available for this platform!")
  return -1;

#endif
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:54:08.130

考虑`select`使用空的 FD 集和所需的超时。来自[`man select`](http://linux.die.net/man/2/select)：

> 一些代码调用 select() 时所有三个集合都为空，nfds 为零，并且非 NULL 超时作为一种相当可移植的亚秒精度睡眠方式。

实际上，它可能是任何非 Windows 系统的最佳解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-28T03:48:33.293

我注意到 usleep 已经过时了，但它比 nanosleep 简单得多。因此，当我需要增强睡眠时，我会使用它，以便在调试脚本时轻松调整到毫秒或零以进行生产。

这个贪睡功能结合了 sleep 和 usleep 的优点，因此您可以输入 int 或 float 以获得所需的延迟，并且 0.1 将休眠 10 秒，而 3 将休眠 3 秒。3.5 秒被视为 3 秒。

在 Linux Mint 18.3 (Ubuntu 16.04.9) 上测试为 C 和 C++，使用 gcc 5.4.0。

```
#include <unistd.h>

void snooze(double t) {(t > 1.0) ? sleep(t) : usleep(t*1000000);}

snooze(0.01);  // call function to sleep for 10ms 
```

* * *

为了完整起见，这是一个 nanosleep 版本。它可能比 usleep 版本更准确，并且不会受到过时的威胁。

```
#include <time.h>
#include <math.h>

void snooze(double t) {
    struct timespec req = {t, fmod(t, 1.0) * 1E9};
    nanosleep(&req, NULL);
}

// struct timespec req = {t, fmod(t, 1.0) * 1E9};
//  is equivalent to:
// struct timespec req = {0};
// req.tv_sec = t;
// req.tv_nsec = fmod(t, 1.0) * 1000000000L;

// NULL as value for *rem so no resumption after signal interrupts

snooze(1.99);  // call for delay of 1.99 seconds 
```

* * *

正如[@alk](https://stackoverflow.com/users/694576/alk)所建议的，以下版本在发生 1 时返回被调用的 sleep 函数的错误，如果成功则返回 0。定义结构 rem(aining) 还允许在信号中断后恢复。

```
int snooze(double t) {
    return (t > 1.0) ? sleep(t) : usleep(t*1000000);
}

int snooze(double t) {
    struct timespec req = {t, fmod(t, 1.0) * 1E9};
    struct timespec rem = {0, 0.0};
    return nanosleep(&req, &rem);
} 
```

# c - 将空字符复制到字符串中时，空仍然会被打印为垃圾

> ID：14812237
> 
> 赞同：-1
> 
> 时间：2013-02-11T12:47:14.463
> 
> 标签：c, string, pointers, null

我正在编写这个函数，它将 n 个字符从 s2 复制到 s1 中。如果 s2 的长度小于 n，则其余 n 个字符将由空字符组成。

```
main()
{
    char sourceStr[10];
    char destStr[80];
    int myInt;

    printf("Enter a string: ");
    gets(sourceStr);

    printf("Enter the number of characters: ");
    scanf("%d", &myInt);

    printf("Returned string: %s ", copyastring(destStr, sourceStr, myInt));
    return 0;

}

char *copyastring(char * s1, char * s2, int n)
{

    int a = n;
    for( n ; n > 0 ; n--)
    {
            // if end of s2 is reached, the rest of s1 becomes null
        if(*s2 == '\0')
        {
            while(n > 0)
            {
                *s1 = '\0';
                s1++;
                n--;
            }
            break;
        }
            //if-not, copy current s2 value into s1
            //increment both pointers
        else
        {
            *s1 = *s2;
            s2++;
            s1++;
        }
    }
    // Just incase s2 is longer than n, append a null character
    s1++;
*s1 = '\0';
s1--;

    //Reset s1's pointer back to front of s1
    s1 = s1 - a;
    return s1;
} 
```

运行此代码并打印出函数返回的字符串后，我意识到所有空字符都被打印为垃圾字符（不可读）。为什么呢？空字符不会终止字符串吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:55:29.457

如果`s2`比`n`字符长，则不要将终止符添加到字符串`s1`，因此将返回的指针打印为字符串会产生垃圾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:51:49.347

调用`copyastring`where`myInt < strlen(sourceStr)`将无法添加空终止符 tp `destStr`。然后，您将打印出现在其余部分中的任何数据`destStr`以及其后的堆栈，仅在您的程序崩溃或遇到零字节时终止。

一个简单的解决方法是始终在末尾添加一个空终止符`copyastring`

```
s1 = s1 - a;
s1[n-1] = '\0';
return s1; 
```

# jsf - JSF View Scoped Bean 多次重构

> ID：14812238
> 
> 赞同：2
> 
> 时间：2013-02-11T12:47:20.127
> 
> 标签：jsf, jakarta-ee, ejb, view-scope

我认为`@ViewScoped`应该防止 bean 在用户位于同一页面时被重建......那么为什么我的`@ViewScoped`JSf 控制器 bean 甚至在动作处理程序导致浏览器导航离开该视图之前被多次创建？

谁能在这里指出我正确的方向？

这是我的代码：

## 视图（域/edit.xhtml）

```
<h:form prependId="false">
    <h:inputText id="descriptionField" value="#{domainEdit.domain.description}" />
    <h:commandButton id="saveButton" value="save" action="#{domainEdit.save}" />
</h:form> 
```

## ViewScoped 控制器 (DomainEdit.java)

```
@Named("domainEdit")
@ViewScoped
public class DomainEdit implements Serializable {

    private static final long serialVersionUID = 1L;

    protected DomainEdit() {
    }

    @PostConstruct
    protected void init() {
        System.out.println("post construct called.");
    }

    @PreDestroy
    public void destroy() {
        System.out.println("pre destroy called.");
    }

    public DomainEntity getDomain() {
        System.out.println("displaying domain...");

        // some code to return the domain
        return domain;
    }

    public String save() {
        System.out.println("saving...");

        // some saving code

        return "view";
    }
} 
```

## 输出

当我部署它并执行以下操作时，我得到以下输出：

1.  导航到编辑视图 (edit.xhtml)

    > ```
    >  post construct called.
    >    displaying domain...
    >    pre destroy called. 
    > ```

2.  更改 domainDescriptionField 输入文本的内容

    *没有记录*

3.  点击“保存”

> ```
>  post construct called.
>   displaying domain...
>   pre destroy called.
> 
>   post construct called.
>   displaying domain...
>   pre destroy called.
> 
>   post construct called.
>   displaying domain...
>   pre destroy called.
> 
>   post construct called.
>   displaying domain...
>   pre destroy called.
> 
>   post construct called.
>   displaying domain...
>   saving domain...
>   pre destroy called. 
> ```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T13:34:11.767

除非您使用的是 JSF 2.2（目前还没有推出）或 MyFaces CODI（我希望您会明确提及），否则它们`@ViewScoped`在 CDI 中不起作用。这也非常符合您的问题症状。

通过 JSF 而不是 CDI 管理 bean。替换`@Named("domainEdit")`为`@ManagedBean`从`javax.faces.bean`包中。或者，安装 MyFaces CODI 以将 JSF 桥`@ViewScoped`接到 CDI。

# r - 计算数据子集的统计数据

> ID：14812246
> 
> 赞同：8
> 
> 时间：2013-02-11T12:47:35.037
> 
> 标签：r, dataframe

这是我的数据的一个可重复的小示例：

```
> mydata <- structure(list(subject = c(1, 1, 1, 2, 2, 2), time = c(0, 1, 2, 0, 1, 2), measure = c(10, 12, 8, 7, 0, 0)), .Names = c("subject", "time", "measure"), row.names = c(NA, -6L), class = "data.frame")

> mydata

subject  time  measure
1          0      10
1          1      12
1          2       8
2          0       7
2          1       0
2          2       0 
```

我想生成一个新变量，其中包含该`measure`特定主题的平均值，因此：

```
subject  time  measure  mn_measure
1          0      10      10
1          1      12      10
1          2       8      10
2          0       7      2.333
2          1       0      2.333
2          2       0      2.333 
```

有没有一种简单的方法可以做到这一点，除了以编程方式循环遍历所有记录或首先重塑为宽格式？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-11T12:52:21.310

使用基本 R 函数`ave()`，尽管它的名称令人困惑，但它可以计算各种统计数据，包括`mean`：

```
within(mydata, mean<-ave(measure, subject, FUN=mean))

  subject time measure      mean
1       1    0      10 10.000000
2       1    1      12 10.000000
3       1    2       8 10.000000
4       2    0       7  2.333333
5       2    1       0  2.333333
6       2    2       0  2.333333 
```

* * *

请注意，我`within`只是为了缩短代码而使用。这是没有的等价物`within()`：

```
mydata$mean <- ave(mydata$measure, mydata$subject, FUN=mean)
mydata
  subject time measure      mean
1       1    0      10 10.000000
2       1    1      12 10.000000
3       1    2       8 10.000000
4       2    0       7  2.333333
5       2    1       0  2.333333
6       2    2       0  2.333333 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-11T12:52:41.880

或者与`data.table`包：

```
require(data.table)
dt <- data.table(mydata, key = "subject")
dt[, mn_measure := mean(measure), by = subject]

#   subject time measure mn_measure
# 1:       1    0      10  10.000000
# 2:       1    1      12  10.000000
# 3:       1    2       8  10.000000
# 4:       2    0       7   2.333333
# 5:       2    1       0   2.333333
# 6:       2    2       0   2.333333 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-11T12:50:13.043

您可以`ddply`从`plyr`包中使用：

```
library(plyr)
res = ddply(mydata, .(subject), mutate, mn_measure = mean(measure))
res
  subject time measure mn_measure
1       1    0      10  10.000000
2       1    1      12  10.000000
3       1    2       8  10.000000
4       2    0       7   2.333333
5       2    1       0   2.333333
6       2    2       0   2.333333 
```

# android - 是否可以比较两个游标？

> ID：14812250
> 
> 赞同：6
> 
> 时间：2013-02-11T12:47:48.943
> 
> 标签：android, sqlite

我需要检查两个游标是否指向具有相同值的相同行。是否可以？

更多细节：

1.  我正在从我自己加载数据`ContentProvider`
2.  我正在向服务器发送请求，然后`ContentProvider`用新值更新我的数据。
3.  如果值更改 - 我需要通知用户他可以更新数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T13:51:56.287

根据 CommonsWare 删除的答案：

> 遍历 Cursor 中的相关列，检索值并比较每个值。

虽然您可能事先不知道每列的类型，但您可以使用`Cursor.getType()`. 您还可以使用`Cursor.getColumnNames()`来获取每列的名称和列数。

此信息将允许您使用正确的访问器方法来获取每个值并进行比较。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T14:01:29.880

在 SQLite 中，行没有与其列值分开的标识（但`ROWID`是这些值之一）。

你想要的要求你的数据有一些唯一的列作为游标的一部分，或者是`ROWID`，或者其他一些保证没有重复的键值。

否则，您永远无法知道您所看到的是否只是在这些列中恰好具有相同值的两条记录。

# ruby - 如何为 Sinatra 应用程序设置范围重定向

> ID：14812253
> 
> 赞同：2
> 
> 时间：2013-02-11T12:47:52.573
> 
> 标签：ruby, sinatra, rack

我有一系列 sinatra 应用程序，它们的设置使得每个应用程序负责一件事。

假设我有两个这样的应用程序：

```
class Foo < Sinatra::Base
    get '/' do
      'FOO!'
    end
end

class Zoo < Sinatra::Base
    get '/' do
      'ZOO!'
    end

    get '/zoom' do
      # do things
      redirect '/'
    end
end 
```

现在假设我有我的 config.ru：require './application'

```
run Rack::URLMap.new('/' => Foo.new, '/zoo' => Zoo.new) 
```

我遇到的问题是，当我尝试在操作中执行重定向时，`zoom`我被发送到索引操作`Foo`而不是`Zoo`. 有没有一种干净的方法来做到这一点，这样我的应用程序就不需要知道如何为应用程序设置路由？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:55:37.373

您可以使用可配置的重定向。请参阅[http://www.sinatrarb.com/2011/03/03/sinatra-1.2.0.html#configurable_redirects](http://www.sinatrarb.com/2011/03/03/sinatra-1.2.0.html#configurable_redirects)。

例如

```
class Zoo < Sinatra::Base
    get '/' do
      'ZOO!'
    end

    get '/zoom' do
      # do things
      redirect to('/')
    end
end 
```

或者，如上面链接中所述，通过在 Zoo 应用程序中启用前缀重定向来跳过 to() 调用：

```
class Zoo < Sinatra::Base
    enable :prefixed_redirects
    ... 
```

# c++ - 在 C++ 中，使用 Code::Blocks 无法打开文件，尽管它存在并且路径应该是正确的

> ID：14812259
> 
> 赞同：0
> 
> 时间：2013-02-11T12:48:06.210
> 
> 标签：c++, file, sdl, codeblocks

我正在使用 Code::Blocks 和 SDL 库来创建一个简单的电脑游戏。我一直在关注一些教程，并创建了一个功能性的井字游戏。虽然该项目没有任何具体说明，但我创建了一个可以与其他游戏一起使用的模板。使用该模板，我创建了一个新项目，其中有一张 Yoshi 正在运行的图像。但是，在这个新项目中，当我使用需要打开文件的功能时，它永远不会起作用。例如：

```
if ( (Surf_Anim = CSurface::OnLoad("yoshi.bmp")) == NULL)
    return false; 
```

即使 yoshi.bmp 存在，也总是返回 false，并且 OnLoad 函数与井字游戏项目中的完全相同。

我已将 yoshi.bmp 映像的副本放在可执行文件旁边，但它仍然无法正常工作。（在功能性井字游戏项目中，图像与项目位于同一目录中）

我究竟做错了什么？

编辑：确认文本文件的操作正常后，我编辑了 CSurface::OnLoad 函数，如下所示：

```
SDL_Surface* CSurface::OnLoad(char* File)
{
  SDL_Surface* Surf_Temp = NULL;
  SDL_Surface* Surf_Return = NULL;

  if((Surf_Temp = SDL_LoadBMP(File)) == NULL)
    {
      return NULL;
    }

  printf ("Loafing worked\n");

  Surf_Return = SDL_DisplayFormat (Surf_Temp);
  SDL_FreeSurface(Surf_Temp);

  if (Surf_Return == NULL)
    printf ("SDL_DisplayFormat didn't\n");

  return Surf_Return;
} 
```

两个 printf 函数都已执行。我想这个问题与我使用 SDL 函数的方式有关。无论如何，在一个完美运行的项目中，一切都是以同样的方式完成的。yoshi.bmp 图像，就像上述工作项目中的图像一样，是一个 24 位颜色的位图......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:41:06.127

DisplayFormat 函数无法工作，因为之前没有使用函数 SDL_SetVideoMode 设置视频帧缓冲区的像素格式和颜色。

在尝试加载图像之前调用此函数，解决了问题。

# java - 在新线程中启动后台服务会冻结主应用程序

> ID：14812260
> 
> 赞同：0
> 
> 时间：2013-02-11T12:48:14.837
> 
> 标签：java, multithreading

我正在使用一个按钮在我的应用程序中启动后台服务。这是我正在使用的代码：

```
@Override
public void actionPerformed(ActionEvent action) {
    if (action.getActionCommand().equals("Start")) {
        while (true) {
            new Thread(new Runnable() {
                public void run() {
                    System.out.println("Started");
                }
            }).start();

            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

这确实每秒更新一次服务，这正是我想要的。问题是它冻结了应用程序的其余部分。我如何实现它以防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:50:18.070

以下情况可能会导致您的应用程序暂停：

```
 while (true) {
        ...
    } 
```

尝试删除这些行。

编辑：根据评论，要使新启动的线程每秒触发一次，请在 run() 方法中移动 sleep 和 while 循环：

```
if (action.getActionCommand().equals("Start")) {
    new Thread(new Runnable() {
        public void run() {
            while (true) {
                System.out.println("Started");        }
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
       }
   }).start();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:51:26.027

您在更新 GUI 的线程中调用此方法，并且您正在暂停 GUI 刷新。产生一个新线程并在那里执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:54:39.717

无限循环？？ `while (true) {.....}`

你应该如何离开这里 - 在循环中添加一个打印语句，你会知道你在按钮点击后被困在这里

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T15:02:44.320

好，我知道了。这是我应该做的：

```
@Override
public void actionPerformed(ActionEvent action) {
    if (action.getActionCommand().equals("Start")) {
        new Thread(new Runnable() {
            public void run() {
                while (true) {
                    System.out.println("Started");
                    try {
                        Thread.sleep(1000);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            }
        }).start();
    }
} 
```

# sql-server - SQL 合并复制忽略过滤器

> ID：14812261
> 
> 赞同：1
> 
> 时间：2013-02-11T12:48:17.293
> 
> 标签：sql-server, merge-replication

我有一个带有过滤器的合并复制（SQL 2005）。

过滤器位于 delLog 表上，显示 WHERE 0 = 1，因此所有数据仅上传，未下载。

当我想下载我的数据时，它来到这个表，它说正在下载表 delLog 并在那里挂了一个小时......

我没有得到任何错误它只是挂在那里......

任何想法如何解决这个问题？

# ruby-on-rails - 如何将模型的多个属性与 1 where 语句中的一组搜索关键字匹配？

> ID：14812264
> 
> 赞同：0
> 
> 时间：2013-02-11T12:48:23.900
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已经实现了一些基本搜索，我正在尝试将多个属性与一组关键字匹配。

我有这个：

```
listings = Listing.order(:headline)
listings = listings.where("headline like ?", "%#{keywords}%") if keywords.present? 
```

我有多个属性`listings`，我想检查它是否`keywords`出现在 - 例如说`listing.neighborhood.name`或`listing.type.name`。

我如何在 1 条语句中写下所有这些内容？我试过：

```
listings = listings.where("headline like ? or neighborhood.name like ?", "%#{keywords}%") 
```

但这返回了这个错误：

```
ActiveRecord::PreparedStatementInvalid: wrong number of bind variables (1 for 2) in: headline like ? or neighborhood.name like ? 
```

一个明显的解决方案是`"%#{keywords}%"`再次添加......但这似乎并不干燥。

如何在该 1 查询中添加检查和其他`neighborhood.name`？`type.name`或者我应该以另一种方式接近这个？

谢谢。

**编辑1：**

当我尝试简单地添加另一个参数的非 DRY 方式时`{keywords}`，这是我得到的错误：

```
ActiveRecord::StatementInvalid: SQLite3::SQLException: no such column: neighborhood.name: SELECT "listings".* FROM "listings"  WHERE (headline like '%sterling place%') AND (headline like '%sterling place%' or neighborhood.name like '%sterling place%') ORDER BY headline. 
```

我认为这是因为`neighborhood`是我模型上的 foreign_key `listings`，而不是其本身的属性。`listings`&`neighborhood`模型之间有一个简单的关联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:51:17.067

试试这个（仍然是一种非干燥的方式）：

```
key = "%#{keywords}%"
listings = Listing.includes(:neighborhood).where("headline like ? or neighborhoods.name like ?", key, key) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T13:10:41.237

我认为您没有很多选择可以使其干燥...但是您可以执行以下操作：

```
listings = listings.where("headline like :keywords or neighborhood.name like :keywords", :keywords => "%#{keywords}%") 
```

**编辑**：我没有意识到这种关联...... [siekfried](https://stackoverflow.com/users/1517876/siekfried)是对的......如果你开始添加更多列，那就再干一点：

```
listings = Listing.includes(:neighborhood).where("listings.headline like :keywords or neighborhoods.name like :keywords", :keywords => "%#{keywords}%") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T12:56:59.250

尝试：

```
listings = listings.where("headline like ? or neighborhood.name like ?", "%#{keywords}%", "%#{keywords}%") 
```

# jquery - 在输入字段中输入 3 个字符时使用 jquery 触发事件

> ID：14812267
> 
> 赞同：6
> 
> 时间：2013-02-11T12:48:27.953
> 
> 标签：jquery, autocomplete, triggers, character

我有一个 HTML 输入字段，可以说

```
<input type="text" maxlength="50" size="50" name="subject" id="subject"> 
```

我需要在输入的每 3 个字符上触发一个函数。

例如：

如果用户输入“aaa” - 触发事件，他继续输入“aaa bbb” - 再次触发事件，等等。

但不应计算空格。

我需要这个将字段的值发布到外部 API - 进行搜索。

以前有人做过吗？

请帮忙。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-11T12:54:29.417

尝试这样的事情。将事件处理程序绑定到`input`页面加载

```
$(function(){

    $("#subject").change(function(){

         var val = $(this).val().trim();
         val = val.replace(/\s+/g, '');

         if(val.length % 3 == 0) { //for checking 3 characters
               //your logic here
         }

    });      
}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-11T13:10:57.743

如果您想在用户键入时实时执行此操作，并且不要求他们从输入中移除焦点，您可以使用`keyup`事件和稍微修改的逻辑来过滤空格键按下。

```
$('#subject').on('keyup', function(e) {
    if (e.which !== 32) {
        var value = $(this).val();
        var noWhitespaceValue = value.replace(/\s+/g, '');
        var noWhitespaceCount = noWhitespaceValue.length;
        if (noWhitespaceCount % 3 === 0) {
            // Call API
        }
    }
}); 
```

[jsfiddle](http://jsfiddle.net/d8L9G/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-27T19:42:08.447

您还需要添加`vals.length > 0`该子句才能在以下情况下工作`length = 0`：

```
//for checking 3 characters
if( vals.length > 0 && val.length % 3 == 0 ) 
```

# php - div => false 在 CakepPHP input() FormHelper 中不起作用

> ID：14812268
> 
> 赞同：0
> 
> 时间：2013-02-11T12:48:28.053
> 
> 标签：php, cakephp, cakephp-2.0

我正在使用 cakephp 的最后一个版本，下面的代码我必须创建一个复选框列表。

```
echo $this->Form->input('regions', array(
    'type'        => 'select',
    'hiddenField' => false,
    'options'     => $regions,
    'multiple'    => 'checkbox',
    'div'         => false
)); 
```

代码工作 90%，我的意思是......列表已经创建但我仍然看到`<div>`

这是结果：

```
<div class="checkbox"><input type="checkbox" name="data[regions][]" value="1" id="Regions1" /><label for="Regions1">AAAA</label></div>
<div class="checkbox"><input type="checkbox" name="data[regions][]" value="2" id="Regions2" /><label for="Regions2">BBBB</label></div>
<div class="checkbox"><input type="checkbox" name="data[regions][]" value="3" id="Regions3" /><label for="Regions3">CCCC</label></div> 
```

我需要的结果是：

```
<li>
<input type="checkbox" name="data[regions][]" value="1" id="Regions1" /><label for="Regions1">AAAA</label>
</li>
... 
```

我该怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:54:16.383

应该有一个更简单的方法，但你总是可以用传统的方式来做:)

```
while (list($key, $value) = each($regions)){
    echo '<li>'.
        $this->Form->input($value, 
             array(
                'type' => 'checkbox', 
                'name' => 'data[regions][]', 
                'div' => false,
                'value' => $key,
                'label' => false, 
                'after' => $this->Form->label($value, $value)
             ))
    .'</li>';
} 
```

不是那么漂亮，但工作:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:13:16.703

通过设置`'div' => false`，您可以防止在整个输入部分（即复选框集）周围创建 <div>。但显然你想禁用该选项周围的 div。不幸的是，我还没有找到用 Cake 禁用它的方法。

但是，您可以使用一些 CSS 技巧来模拟 <li> 项。使用特殊类将输入封装在 div 中（与您现在所做的相反），然后使用 CSS 强制使用 <li> 样式：

在您的 CSS 中：

```
.box2li div
{
  display: list-item;
} 
```

在您的蛋糕视图中：

```
echo $this->Form->input('regions', array(
    'type'        => 'select',
    'hiddenField' => false,
    'options'     => $regions,
    'multiple'    => 'checkbox',
    'div'         => array ('class' => 'box2li')
)); 
```

现在每个复选框前面都有一个...

*   ...子弹

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-10T06:43:37.120

使用 Form->Checkbox 而不是 Form->input

```
$this->Form->checkbox('', array(
  'label' => false, 
  'div' => false,
  'class' => ''
)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-07T10:31:31.457

```
$this->Form->checkbox('', array(
  'label' => false, 
  'div' => false,
  'class' => ''
)); 
```

```
$this->Form->checkbox('', array(
  'label' => false, 
  'div' => false,
  'class' => ''
)); 
```

# android - 如何在不运行相机应用程序的情况下在安卓手机上打开闪光灯

> ID：14812269
> 
> 赞同：1
> 
> 时间：2013-02-11T12:48:34.637
> 
> 标签：android

我正在尝试制作一个小型 android 应用程序，如果我想在我的 LG P970 上打开闪光灯而不实际打开相机应用程序。这可能吗，因为从我到目前为止收集的信息中，您需要运行相机应用程序来打开灯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:56:49.533

有几个适用于 Android[的开源手电筒应用程序。](https://android.stackexchange.com/questions/17685/open-source-flashlight-app)如果您查看他们的[来源](https://code.google.com/p/search-light/source/browse/src/com/scottmain/android/searchlight/PreviewSurface.java)，您可以看到他们如何使用它

```
Camera mCamera;
/* [...] */
public void initCamera() {
    /* see their source for more */
}

public void lightOff() {
    if (hasSurface && hasCamera) {
            mParameters.setFlashMode(Parameters.FLASH_MODE_OFF);
            mCamera.setParameters(mParameters);
    }
}

public void lightOn() {
    if (this.isShown() && hasCamera) {
            if (mParameters == null) {
                    setParameters();
            }
            mParameters.setFlashMode(Parameters.FLASH_MODE_TORCH);
            mCamera.setParameters(mParameters);
    } else {
            initCamera();
    }
} 
```

# c# - 如何通过使用 Select 命令在 gridview 中选择任意位置来获取当前行索引

> ID：14812274
> 
> 赞同：0
> 
> 时间：2013-02-11T12:48:38.873
> 
> 标签：c#, asp.net, gridview

我需要通过选择without上的任意位置来找到`RowIndex`当前行的a 。基本上我需要它，因为我正在创建一个方法，该方法将根据. 而且我在各处都调用它，我不想再次编写相同的代码。`Gridview``SelectCommand``Object``DataKey``SelectedRow``Page`

这就是我所拥有的。

# 在 RowDataBound 上

```
protected void gvOrders_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
      var dataKey = gvOrders.DataKeys[e.Row.RowIndex];

      if (dataKey == null)
            return;

      int orderId = AlwaysConvert.ToInt(dataKey["OrderId"]);

      Order cncOrder = OrderDataSource.Load(orderId);

       // do some work   

    }
} 
```

现在我`CheckBox`在gridview中有一个3列，所以每当我检查`CheckBox`状态时，我正在执行以下操作并`Object`再次加载并做一些数据库工作。

# 在复选框更改事件上

```
protected void cbIsReceived_CheckedChanged(object sender, EventArgs e)
{
    GridViewRow row = ((GridViewRow)((CheckBox)sender).NamingContainer);
    var dataKey = gvOrders.DataKeys[row.RowIndex];

    if (dataKey == null)
          return null;

    int orderId = AlwaysConvert.ToInt(dataKey["OrderId"]);
    Order cncOrder = OrderDataSource.Load(orderId);

    // find the controls using the current row index
    CheckBox cbIsReceived = (CheckBox)gvOrders.Rows[row.RowIndex].FindControl("cbIsReceived");
    Label receivedDateText = (Label)gvOrders.Rows[row.RowIndex].FindControl("receivedDateText");

    // do some work
} 
```

正如您在这两个事件中看到的那样，大部分代码都是查找`current RowIndex`并加载`Object`，然后做一些数据库工作。

如果您注意到，在这两种情况下提供的参数是不同的，即**OnRowBound**它的 (GridViewRowEventArgs e) 和**OnCheckBox_CheckedChanged**它的 (EventArgs e)。

因此，对于每一`CheckBox`列，我都必须一次又一次地编写相同的代码。

我想创建一个方法，我可以在其中传递`Sender`并获取电流`RowIndex` 。我不知道该怎么做。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:15:16.150

您可以通过以下任一方式将所有 3 个事件路由`CheckBoxes`到相同的方法：

1.  只需提供`cbIsReceived_CheckedChanged`所有三个复选框的事件处理程序或：
2.  如果您已经生成了处理所有其他事件的方法`CheckBoxes`，那么对所有自动生成的方法执行此操作：

    ```
    cbAnotherCheckBox_CheckedChanged(Object sender, EventArgs e)
    {

      // call the first method you've already written:
       cbIsReceived_CheckedChanged(sender, e);
    } 
    ```

    *编辑：* 如果每个 有不同的操作`CheckBoxes`，则遍历行以获取`CheckBox`检查的特定内容，然后运行特定于它的操作。

# c++ - 放弃 auto_ptr 包含对象的所有权

> ID：14812281
> 
> 赞同：1
> 
> 时间：2013-02-11T12:48:59.607
> 
> 标签：c++, stl, auto-ptr

我有一个类，它构造`auto_ptr<T>`并获取`T`由实用函数填充的对象数据。但是，我希望`T`对象管理器存储的对象将持续应用程序的整个生命周期。

问题是 - 一旦我提取了包含的对象，当它超出范围时`auto_ptr`如何阻止它破坏包含的对象？`auto_ptr`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:51:21.197

为我的疏忽道歉。从`auto_ptr`文档中；

[http://www.cplusplus.com/reference/memory/auto_ptr/release/](http://www.cplusplus.com/reference/memory/auto_ptr/release/)

```
std::auto_ptr::release 
```

## 释放指针

将`auto_ptr`内部指针设置为空指针（表示它不指向任何对象），而不破坏`auto_ptr`.

# jquery - div 中的主页，不适用于 IE

> ID：14812285
> 
> 赞同：0
> 
> 时间：2013-02-11T12:49:02.397
> 
> 标签：jquery, css, html

你好

我想在 div 标签中显示主页。这是一个小代码，可在浏览器 Firefox、Chrome、Opera 中运行，但在 Internet Explorer 中不起作用。有人提示吗？

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript" src="http://localhost/myproj/jquery-1.9.0.min.js"></script>
        <style>
            body {
                background-color: lightsalmon;
            }
            .inner_homepage_div {
                position: fixed;
                top : 100px;
                left : 0px;
                width: 100%;
                z-index:10;
            }
        </style>
        <title></title>
    </head>
    <body>
    <script type="text/javascript">
        (function($) {
            $(document).ready(function() {
                function fHeight() {
                    $('#inner_page').height($(window).height()-125);
                    $('#hpage').css({
                        'width': '100%',
                        'height': '100%'
                    });
                }
                $('#inner_page').html('<object id="hpage" data="http://www.ee" />');
                fHeight();
                fHeight();
                $(window).resize(fHeight);
            });//
        })(jQuery);
    </script>
    <div id="inner_page" class="inner_homepage_div"></div>
    </body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:19:23.233

所以我们知道，什么是[http://www.ee](http://www.ee)？它不见了.. 位 你真的得到了什么吗？如果是这样呢？（会作为评论发布，但堆栈喜欢让你有 50 个代表）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:10:30.797

[为了实现与 IE 的最佳兼容性，您可以使用来自http://modernizr.com/](http://modernizr.com/)或 /的脚本，对于 HTML5 元素，可以使用 HTML5-trunk：

```
<!--[if IE]>
     <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

但是如果我只是看到你的代码，问题可能是由于同时 100% 宽度和 100% 高度，老浏览器不支持这个。此外，为什么要像 jQuery-Plugin 一样插入 jQuery 片段？只需使用：

```
 $(function() {
        function fHeight() {
            $('#inner_page').height($(window).height()-125);
            $('#hpage').css({
                'width': '100%',
                'height': '100%'
            });
        }
        $('#inner_page').html('<object id="hpage" data="http://www.ee" />');
        fHeight();
        // fHeight(); -> why the second time???
        $(window).resize(fHeight);
    }); 
```

# android - 在 AsynTask doInBackground 中调用旧方法调用

> ID：14812291
> 
> 赞同：-1
> 
> 时间：2013-02-11T12:49:25.987
> 
> 标签：android

我对 android 编程非常陌生，我在 Android 2.2 中编写了我的应用程序。但是当我尝试在 Android 3 或更高版本中运行我的应用程序时，我收到如下错误：

```
 android.os.NetworkOnMainThreadException 
```

在我的 android 2.2 中，我有一个这样的方法：

```
public JSONObject makeServiceCall(String url, Map<String, String> params) 
```

它正在执行网络调用操作。查看谷歌我发现我需要将此代码移动`AsyncTask`到`doInBackground`.

但是我在更改参数时遇到了麻烦，`doInBackground`因为它需要`Object...`可变参数，我的方法需要两个参数`String,Map<String,String>`。

我可以在里面做任何工作`doInBackground`来调用我的原始`makeServiceCall`.

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:57:22.197

您可以使用自定义`AsyncTask`的构造函数发送多个变量，然后您不需要在`execute()`方法中发送变量。像这样的东西：

```
private class MyAsyncTask extends AsyncTask<Void, Void, Boolean>{

    private String mString = null;
    Map<String, String> mMap;
    public MyAsyncTask(String s, Map<String, String> map) {
        //assign values to class fields
        this.mMap= map;
        this.mString = s;

    }
    @Override
    protected Boolean doInBackground(Void... params) {
        //access class fields here.
        }
} 
```

在您的任何其他活动或其他类中使用它如下：

```
new MyAsyncTask(yourString, yourMap).execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:57:29.737

尝试使用`Constructor`.

```
 new Download(str1,str2).execute();

 public class Download extends AsyncTask<Void, Void, String> {      
   ProgressDialog mProgressDialog;

    public Download(String st1,String str2) {

        String STR1 = str1;
                    String STR2 = str2;
    }

    protected void onPreExecute() {
        mProgressDialog = ProgressDialog
                .show(context, "", "Please wait...");
    }

    protected String doInBackground(Void... params) {
        //Call ur method use str1,str2
        return 0;

    }

    protected void onPostExecute(String result) {

    }

} 
```

# .net-4.5 - 我怎样才能解决这个问题？System.NullReferenceException：对象引用未设置为对象的实例

> ID：14812296
> 
> 赞同：1
> 
> 时间：2013-02-11T12:49:39.387
> 
> 标签：.net-4.5

只是对新的 IIS 和 ASP.Net4 有一些问题，我在旧服务器中使用旧版本的上传系统。现在我的要求是将上传系统放入新服务器并使其运行。一开始很容易，但现在我遇到了一些问题。我可以登录和下载文件，效果很好，但如果我只是尝试上传文件，则会收到如下错误：

> **“/DownloadManager”应用程序中的服务器错误。**
> *System.NullReferenceException：对象引用未设置为对象的实例。*
> 在 DimpleSoftwares.KFileUploadPlus.KRequestStream.Read(Byte[] 缓冲区，Int32 偏移
> 量，Int32 计数)
> 在 DimpleSoftwares.KFileUploadPlus.KUploadRequest..ctor( KRequestStream s, String strFileName, UploadModule UpLoadModule, Encoding 编码)
> 
> **说明：**执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> **异常详细信息：**
> *System.Exception：System.NullReferenceException：对象引用未设置为对象的实例。*
> 在 DimpleSoftwares.KFileUploadPlus.KRequestStream.Read(Byte[] 缓冲区，Int32 偏移
> 量，Int32 计数)
> 在 DimpleSoftwares.KFileUploadPlus.KUploadRequest..ctor( KRequestStream s, String strFileName, UploadModule UpLoadModule, Encoding 编码)
> 
> **源错误：**
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> **堆栈跟踪：**
> 
> [异常：System.NullReferenceException：对象引用未设置为对象的实例。
> 在 DimpleSoftwares.KFileUploadPlus.KRequestStream.ReadPreloaded(Byte[] 缓冲区，Int32 偏移量，Int32 计数)
> 在 DimpleSoftwares.KFileUploadPlus.KRequestStream.Read(Byte[] 缓冲区，Int32 偏移量，Int32 计数)
> 在 DimpleSoftwares.KFileUploadPlus.KUploadRequest..ctor( KRequestStream s, String strFileName, UploadModule UpLoadModule, Encoding encoding)]
> DimpleSoftwares.KFileUploadPlus.KUploadRequest..ctor(KRequestStream s, String strFileName, UploadModule UpLoadModule, Encoding encoding) +2225 DimpleSoftwares.KFileUploadPlus.UploadModule.context_BeginRequest(Object sender, EventArgs e) +1766
> System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +80 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +165

我只是想知道我该如何解决这个问题？我必须在 IIS 中手动添加模块吗？因为例如我找不到***System.Web.SyncEventExecutionStep***或***System.Web.HttpApplication.ExecuteStep***

我真的错过了一些东西，我没有看到它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T01:20:12.820

我之前遇到过类似的问题“对象引用未设置为对象的实例”，这主要是由于 .NET v4.5。

如果可能（除非您真的需要 v4.5），您是否可以尝试将 .NET Framework 从 v4.5 降级到仅 v4.0 并再次运行代码。4.5 版实际上并未显示在 IIS ApplicationPool 中，因此当您看到您的 Web 应用程序向您显示它正在使用 v4.0 时可能会产生混淆。请注意，当您卸载 4.5 时，您必须重新安装 v4.0，因为卸载 v4.5 会删除 v4.0，这与以前的 .NET 版本不同（例如 v3.0、v3.5，其中删除 3.5 不一定会删除 3.0 ）。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T12:59:56.947

我知道为时已晚，但它会帮助别人。只需转到应用程序属性-> 构建-> 将平台目标更改为 x64 或“任何 CPU”。使用此设置，它应该可以工作。

# playframework - 播放 1.2.5 - 使用自定义 ID 加载初始数据

> ID：14812299
> 
> 赞同：0
> 
> 时间：2013-02-11T12:49:47.423
> 
> 标签：playframework, yaml

所以，我有一个带有自定义 ID 的模型，如下所示：

```
@Entity
public class SomeModel extends Model {

    @Id
    @Unique
    @Required
    public String myOwnId;

    @Required
    public String someOtherField;

    public SomeModel(final String myOwnId, final String someOtherField) {
        this.myOwnId = myOwnId;
        this.someOtherField = someOtherField;
    }

} 
```

我有一个如下所示的 initial-data.yml 文件：

```
SomeModel(myModel):
  myOwnId: "someID"
  someOtherField: "some value here" 
```

但是，这不起作用：`RuntimeException occured : Cannot load fixture initial-data.yml: org.hibernate.PropertyAccessException: could not set a field value by reflection setter of models.SomeModel.id`. 有什么好的和简单的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:48:46.280

好吧，我的错，它确实有效，但是，你必须扩展`GenericModel`，而不是`Model`你的模型类。

# sql - Radgrid VS Gridview - SQL 查询比较

> ID：14812300
> 
> 赞同：3
> 
> 时间：2013-02-11T12:49:47.550
> 
> 标签：sql, gridview, datasource, radgrid, sql-server-profiler

> 我为 RadGrid 和 Gridview 运行了相同的代码，两者的结果相同。但是，当我查看 SQL 分析器时，我看到 RadGrid 调用了 3 次查询。另一方面，Gridview 只调用一次。我想知道原因是什么。我查看了许多来源，但还没有找到任何东西。如果你们知道为什么会这样，请告诉我 - 请参阅附件中的代码和 SQL Profiler 的屏幕截图。

[http://tinypic.com/r/116ul39/6](http://tinypic.com/r/116ul39/6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:58:39.713

我想我找到了导致多个课程的原因。当我使用 RadGrid 时，它的作用是

*   它调用所有数据来显示字段
*   然后它再次调用它以找出分页计数
*   它再次调用它进行过滤等

另一方面，当我使用 GridView 并传递数据源时，我可以调用 DB 以获得相同的结果。

干杯，

# visual-studio-2010 - 如何验证 .NET 安装程序类中的自定义对话框输入？

> ID：14812304
> 
> 赞同：1
> 
> 时间：2013-02-11T12:50:02.600
> 
> 标签：visual-studio-2010, installation, setup-project

我有一个 VS 2010 安装项目。在安装项目中，我有一个自定义对话框和一个自定义操作。两者都有效，我什至可以调试我的自定义操作，它会正确接收用户在自定义对话框中提供的输入。

我想验证用户输入，并且仅在输入有效时才允许用户进入下一步。我可以使用 MessageBox.Show 显示一个消息框，但是在用户更正输入之前如何防止进入下一步？

```
public override void Install(IDictionary stateSaver)
{
    base.Install(stateSaver);
    string myInput = Context.Parameters["MY_INPUT"]; // Value from custom dialog
    if (myInput ..... )
    {
        // Not a valid input, we do not want to proceed to the next step 
        MessageBox.Show("Not a valid input, please correct it");

        // What to do here? 
        // How can I tell the Installer do not accept this input?
    }
    else
    {
        // Valid input...
    }
 } 
```

谢谢回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:07:48.157

实现这一点的最简单方法是从您的自定义操作中设置一个属性，并使用该属性来调节用户按下“下一步”按钮时调用的 NewDialog 事件，因此如果条件不成立，则不会执行该事件。

.NET Installer 类自定义操作无法直接从其代码设置属性，但您可以使用 C# 代码编写另一种类型的自定义操作，该操作可以获取/设置属性，如下例所示：[http://www.advancedinstaller。 com/user-guide/qa-c-sharp-ca.html](http://www.advancedinstaller.com/user-guide/qa-c-sharp-ca.html)

**编辑：**您可以通过使用 Orca 编辑从 VS 生成的 MSI 来做到这一点，但是，我会说这非常痛苦，因为您需要手动编辑多个表，例如 Binary、CustomActions、ControlEvent。下面是一些可以帮助您开始的方法：http: [//support.microsoft.com/kb/255905](http://support.microsoft.com/kb/255905)
另一种方法是使用更高级的安装程序创作工具切换创建安装程序包。如果您想使用一个免费且功能强大的软件，我推荐 WiX ( [http://wix.sourceforge.net/](http://wix.sourceforge.net/) )，您需要一些时间才能开始使用它，但它比在 Orca 中编辑要快得多。Advanced Installer ( [http://www.advancedinstaller.com](http://www.advancedinstaller.com))，但您需要企业许可证才能完成所需的工作。

# java - 在java中按时间和速度计算距离

> ID：14812305
> 
> 赞同：0
> 
> 时间：2013-02-11T12:50:02.760
> 
> 标签：java

我有多个速度（公里/小时）和时间（日期）的记录，我想知道总行驶距离是多少。时间和速度在变化。有没有这方面的java算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:02:48.553

只需计算每对结果的值：

```
distance = previousVelocity * timeDifference + (currentVelocity - previousVelocity) * timeDifference / 2 
```

哪里`timeDifference = currentTime - previousTime`。

然后总结一下就可以了。这是假设恒定的加速和减速。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:13:37.557

如果你有速度和时间的数据点，你需要计算出点之间的平均速度（这可能不准确，但它是你可以用数据做的最好的）并乘以时间。请注意，我使用秒作为时间度量。你说你有日期，所以你应该能够轻松转换，如果你的时间很接近，最好使用毫秒。

假设您有以下数据点；

```
Time speed
0    12
4    15
7    13
11   18
17   21 
```

点 1 和 2 之间的平均速度为；

```
12 + 15 / 2 = 13.5 
```

时间差为4秒。您可以做出的最佳计算是这些数据点之间的行进距离是

```
4 * 13.5 * (1000 / 3600) = 15 metres 
```

(1000 / 3600) 位正在将 km/h 转换为 m/s。

您的算法需要对每对数据点执行相同的计算，并将总行驶距离相加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:51:33.113

对此没有预定义的“Java 算法”。您必须通过将 all 相加来计算整个距离`ds = v * dt`。`ds`是增量距离，`v`是速度和`dt`增量时间。一个循环就可以了。除此之外，您可以确定平均速度并进行一次乘法运算。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T13:00:51.047

本质上，您需要绘制点之间的曲线（x 轴 = 时间，y 轴 = 速度）并计算该图下的面积。显然，这将取决于您选择的插值（直线、贝塞尔曲线、三次样条等）

[这](http://www.ee.ucl.ac.uk/~mflanaga/java/Interpolation.html)看起来像是一个有趣的插值库列表。

似乎还有一个[javax.media.jai.Interpolation](http://docs.oracle.com/cd/E17802_01/products/products/java-media/jai/forDevelopers/jai-apidocs/javax/media/jai/Interpolation.html)组件可用。

# c# - 向 HttpWebRequest 动态添加属性

> ID：14812307
> 
> 赞同：1
> 
> 时间：2013-02-11T12:50:13.460
> 
> 标签：c#, dynamic, properties, webrequest

我有一个 C# Windows 窗体应用程序，用于连接到服务器以发出 Web 请求。我需要做的是允许用户通过首选项设置某些属性并将这些属性动态添加到 WebRequest。

就像我有一个带有条目的配置文件一样 -->

```
<Properties>
        <Property name="User-Agent" value="Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)" />
        <Property name="KeepAlive" value="true" />
</Properties> 
```

现在我想将值绑定到 WebRequest 属性。

```
Uri serverURL = new Uri("http://MyServer:8080/MyPage.jsp");
        HttpWebRequest wreq = WebRequest.Create(serverURL) as HttpWebRequest;
        XmlDocument xmldoc = new XmlDocument();
        xmldoc.Load(<Path of Config>);
        XDocument xDoc = XDocument.Parse(xmldoc.InnerXml);
        Dictionary<string, string> propdict = new Dictionary<string, string>();
        foreach (var section in xDoc.Root.Elements("Property"))
        {
            propdict.Add(section.Attribute("name").Value, section.Attribute("value").Value);
        }            

        string key = string.Empty, value = string.Empty;
        foreach (var item in propdict)
        { 
             //... add the properties to wreq
        } 
```

有人可以让我知道如何实现吗？

谢谢

苏尼尔·詹贝卡

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:00:38.967

听起来您想添加 http 请求标头，在这种情况下：

```
wreq.Headers.Add(headerName, headerValue); 
```

然而！IIRC，许多标头都是特殊情况，例如它可能拒绝接受用户代理作为标头，而是坚持您设置：

```
wreq.UserAgent = userAgentString;
wreq.KeepAlive = setKeepAlive; 
```

所以你可能需要：

```
foreach(var item in propdict) {
    switch(item.Name) {
        case "User-Agent":
            wreq.UserAgent = item.Value;
            break;
        case "KeepAlive":
            wreq.KeepAlive = bool.Parse(item.Value);
            break;
        // ... etc

        default:
            wreq.Headers.Add(item.Name, item.Value);
            break;
    }
} 
```

（您可能也想考虑区分大小写）

# html - 如何创建三个圆圈的水平线

> ID：14812310
> 
> 赞同：1
> 
> 时间：2013-02-11T12:50:35.387
> 
> 标签：html, css

**我正在尝试创建的内容**

仅使用 HTML5 和 CSS3，三个圆圈的水平行，每个圆圈位于不同图像的顶部，包含另一个图像和一个文本单词。

**我试过的**

我试图通过在 div 中添加 div 并指定高度和宽度来创建它，但这没有奏效。我觉得我把一些非常简单的事情过度复杂化了，或者忘记了一些非常明显的事情。最简单的方法是什么？

**对我放轻松** ！我一直在尝试自学仅 2 个月。

**的HTML**

```
<div class="circlewrapper">
   <div class="sector" id="read">
      <img src="images/test1.jpg" class="image1" height="165" width="165" />
      <div class="round" id="reading">
         <img src="images/book.jpg" class="image2" height="20" width="20" />
         <p id="readread">Read</p>
      </div>
  </div>
  <div class="sector" id="listen">
     <img src="images/test2.jpg" class="image1" height="165" width="165" />
     <div class="round" id="listening">
         <img src="images/book.jpg" class="image2" height="20" width="20" />
         <p id="listlist">Listen</p>
     </div>
  </div>
  <div class="sector" id="watch">
     <img src="images/test3.jpg" class="image1" height="165" width="165" />
     <div class="round" id="watching">
         <img src="images/book.jpg" class="image2" height="20" width="20" />
         <p id="watchwatch">Watch</p>
     </div>
  </div>
</div> 
```

**CSS**

```
.circlewrapper {
  width: 800px;
  height: 270px;
  padding: 0px;
  margin: 0px auto 0px auto;}
.sector {
  width: 250px;
  height: 250px;
  padding: 0px;
  margin: 8px;
  display: inline;}
.round {
  height: 165px;
  width: 165px;
  padding: 0px;
  margin: 0px auto 0px auto;
  background-color: blue;
  border-radius: 165px;
  -moz-border-radius: 165px;
  -webkit-border-radius: 165px;
  z-index: 10;}
p {
  text-align: center;
  color: white;}
.image1 {
  margin: 0px auto 0px auto;
  padding: 0px;
  z-index: 5;}
.image2 {
  margin: 0px auto 0px auto;
  padding: 0px;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:55:26.457

添加到`.sector` `float: left;`. 它对我有用。

# google-visualization - Google Geochart（所有国家/地区）

> ID：14812314
> 
> 赞同：4
> 
> 时间：2013-02-11T12:50:51.843
> 
> 标签：google-visualization

我想将每个国家/地区的值都放在地图上，但图表对 6 到 7 个国家/地区有一些限制。如何创建自定义图表？

[https://developers.google.com/chart/interactive/docs/gallery/geochart](https://developers.google.com/chart/interactive/docs/gallery/geochart)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-12-08T11:44:19.647

您可能会发现以下示例很有用，它有一长串国家/地区可以映射到地理图表值...

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('upcoming', {'packages':['geochart']});
      google.charts.setOnLoadCallback(drawRegionsMap);

      function drawRegionsMap() {
        var data = google.visualization.arrayToDataTable([
          ['Country',   'Value'],
["Bhutan",1],                           
["Democratic Republic of the Congo",1], 
["Liechtenstein",1],                    
["Maldives",1],                         
["Sudan",1],                            
["Zimbabwe",1],                         
["Mauritania",1],                       
["Mozambique",1],                       
["Nigeria",1],                          
["Swaziland",1],                        
["Tanzania",1],                         
["Iraq",1],                             
["Guyana",1],                           
["Namibia",1],                          
["Senegal",1],                          
["Turkmenistan",1],                     
["Afghanistan",1],                      
["Andorra",1],                          
["Fiji",1],                             
["Gabon",1],                            
["Uzbekistan",1],                       
["Cameroon",1],                         
["Cuba",1],                             
["Faroe Islands",1],                    
["El Salvador",1],                      
["Caribbean",1],                        
["Ethiopia",1],                         
["Mongolia",1],                         
["Puerto Rico",1],                      
["Samoa",1],                            
["Myanmar",1],                          
["Nicaragua",1],                        
["Seychelles",1],                       
["Tajikistan",1],                       
["Dominican Republic",1],               
["Guinea",1],                           
["Barbados",1],                         
["CI",1],                               
["Laos",1],                             
["Libya",1],                            
["Panama",1],                           
["Bahrain",1],                          
["Benin",1],                            
["Ghana",1],                            
["Haiti",1],                            
["Montenegro",1],                       
["Somalia",1],                          
["Syria",1],                            
["Ecuador",1],                          
["Honduras",1],                         
["Madagascar",1],                       
["Papua New Guinea",1],                 
["Tunisia",1],                          
["Angola",1],                           
["Botswana",1],                         
["Cyprus",1],                           
["Algeria",1],                          
["Bahamas",1],                          
["New Caledonia",1],                    
["Uganda",1],                           
["Yemen",1],                            
["Zambia",2],                           
["Antarctica",2],                       
["Paraguay",2],                         
["Jamaica",2],                          
["Palestine",2],                        
["Bolivia",2],                          
["Bosnia and Herzegovina",2],           
["Vietnam",2],                          
["Kenya",2],                            
["Luxembourg",2],                       
["Niger",2],                            
["Kuwait",2],                           
["Hawaii",2],                           
["Scotland",2],                         
["Cambodia",2],                         
["Uruguay",2],                          
["Kyrgyzstan",2],                       
["Saudi Arabia",2],                     
["Indonesia",2],                        
["Azerbaijan",2],                       
["United Arab Emirates",2],             
["Mauritius",2],                        
["Morocco",2],                          
["Albania",3],                          
["South Korea",3],                      
["Kazakhstan",3],                       
["Macedonia",3],                        
["Venezuela",3],                        
["Taiwan",3],                           
["Qatar",3],                            
["Jordan",3],                           
["Iceland",3],                          
["Guatemala",3],                        
["Costa Rica",3],                       
["Hong Kong",3],                        
["San Marino",3],                       
["Colombia",4],                         
["Moldova",4],                          
["Armenia",4],                          
["Malta",4],                            
["Nepal",5],                            
["Lebanon",5],                          
["Malaysia",5],                         
["Serbia",5],                           
["Peru",5],                             
["Trinidad and Tobago",5],              
["Lithuania",5],                        
["Estonia",6],                          
["Georgia",6],                          
["Iran",7],                             
["Chile",7],                            
["Latvia",7],                           
["Thailand",7],                         
["Egypt",7],                            
["Slovenia",8],                         
["Mexico",8],                           
["Belarus",8],                          
["Slovakia",9],                         
["Sri Lanka",9],                        
["Croatia",9],                          
["Philippines",9],                      
["Bangladesh",10],                      
["Turkey",10],                          
["Romania",13],                         
["Italy",14],                           
["South Africa",15],                    
["Hungary",15],                         
["Pakistan",16],                        
["Portugal",16],                        
["Ukraine",19],                         
["Greece",19],                          
["Oman",19],                            
["Argentina",19],                       
["Singapore",20],                       
["Bulgaria",20],                        
["Japan",25],                           
["Czech Republic ",26],                 
["Ireland",26],                         
["China",27],                           
["Finland",32],                         
["Brazil",33],                          
["Norway",34],                          
["Austria",35],                         
["Denmark",40],                         
["Belgium",41],                         
["New Zealand",42],                     
["Spain",43],                           
["Switzerland",57],                     
["Russia",62],                          
["Poland",65],                          
["Israel",73],                          
["Sweden",91],                          
["Netherlands",118],                    
["France",119],                         
["Australia",158],                      
["Canada",206],                         
["India",234],                          
["Germany",308],                        
["United Kingdom",614],                 
["United States",983],                  
["Unknown",1050],   
    ]);

    var options = {
      colorAxis: {values: [1, 10, 100, 1000], colors: ['green', '#D1E231', 'orange' ,'red'],},
      backgroundColor: '#81d4fa',
      datalessRegionColor: '#999',
      defaultColor: '#f5f5f5',

    };
        var chart = new google.visualization.GeoChart(document.getElementById('geochart-colors'));
        chart.draw(data, options);
      };
    </script>
    <body>
    <div id="geochart-colors" style="width: 600px; height: 225px;"></div>
  </body>
```

希望这可以节省您一些时间。

# javascript - VideoJS - 无法销毁和初始化

> ID：14812319
> 
> 赞同：11
> 
> 时间：2013-02-11T12:51:05.403
> 
> 标签：javascript, jquery, html, video, video.js

在[VideoJS 网站上](http://videojs.com/)，您声明支持已移至 StackOverflow，所以让我们在这里尝试一下。我有以下代码：

```
var player = _V_('the_id', {}, function(){
    jQuery('.remove').on('click.destroyvideojs', function(){
        player.destroy();
        jQuery(this).unbind('click.destroyvideojs');
    });
}); 
```

它首先初始化视频，然后将其销毁。

但是当我想使用相同的代码再次初始化它时，它不起作用。它不会在相同的元素 ID 上初始化脚本（当它从 DOM 中删除并在添加后使用正确的初始化调用再次添加时）。我想知道为什么会发生这种情况？

今天再试一次：

```
var the_id = 'my_id';
var player = _V_(the_id, {}, function(){        
    player.destroy();
    _V_(the_id, {}, function(){
        alert('reinit');
    });
}); 
```

因此，VideoJS 的重新初始化根本不起作用。此外，它现在从视频中删除了控件。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-06-09T23:27:18.400

万一这对任何人都有帮助，它看起来像是`dispose`在第 4 版中：

```
var player = videojs('my-video');
player.dispose(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-09-30T20:18:05.430

查看了 Video.js 5.0.0 的源代码。@l:17236 您可以执行以下操作：

```
if(videojs.getPlayers()[id]) {
    delete videojs.getPlayers()[id];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T21:29:53.620

回调执行时似乎`player`尚未定义。看看这个 js fiddle [http://jsfiddle.net/gaboesquivel/BA8Pm/](http://jsfiddle.net/gaboesquivel/BA8Pm/)

`destroy();` 为我工作。这是函数的样子

```
destroy: function () {
            this.stopTrackingProgress();
            this.stopTrackingCurrentTime();
            _V_.players[this.id] = null;
            delete _V_.players[this.id];
            this.tech.destroy();
            this.el.parentNode.removeChild(this.el)
        } 
```

也检查这个解决方案 [http://help.videojs.com/discussions/problems/861-how-to-destroy-a-video-js-object#comment_13544514](http://help.videojs.com/discussions/problems/861-how-to-destroy-a-video-js-object#comment_13544514)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T12:05:04.713

我从我的脑海中抽出了一些我的兔子，很难找到对这些问题的回应......所以这是我的解决方案，使用 JQuery......这个解决方案诞生于如何销毁未初始化的玩家对象的问题，你们拯救我的最后一天，因为我们只能销毁已显示的播放器，即使我清理 HTML 并动态重新初始化 playerJs，flash 后退也不适用于未显示的未销毁的媒体播放器。所以这是解决方案：

```
$.each(_V_.players, function (key, player) { 
    if (player.isReady) { player.destroy(); } 
    else { delete _V_.players[player.id]; } 
}); 
```

有点乱，但会很好。干杯！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-11T13:38:02.373

您正在寻找的 api 参考是 .dispose(); 但是它不会从 dom 中删除设置。如果您有第三方插件，其他项目可能会在 dispose 运行后乱扔您的 DOM。要运行 dispose 并清理您的 dom，请使用这样的代码

```
dispose = function() {
    if (settings.debug) {
        console.info('place.videojs_element.dispose()');
    } /*Target the Player Element*/
    var player = videojs(settings.element.id + '_player'); /*Pause Video*/
    player.pause(); /*Wait for third party scripts to stop listening!!! <-- Important*/
    setTimeout(function() { /*Dispose of the player*/
        player.dispose();
        /*I have a new video element waiting to be placed ( this code is proprietary )*/
        var epi = new EPI();
        epi.place.videojs_element(settings, data); /*Wait time 600ms*/
    }, 600); /*Destroy the old video element <--- Important */
    $('#' + settings.element.id).empty();
} 
```

查看一个实际的工作示例：http: [//codepen.io/JaminQuimby/pen/yNaOwz/](http://codepen.io/JaminQuimby/pen/yNaOwz/)

以上将为您提供一个干净的 DOM 并完全删除视频播放器。

# mysql - MySQL，返回 X 过去几个小时内的所有测量值和结果

> ID：14812322
> 
> 赞同：0
> 
> 时间：2013-02-11T12:51:15.977
> 
> 标签：mysql, performance, join

这个问题与我之前的问题非常相关：[MySQL, return all results within X last hours](https://stackoverflow.com/questions/14798599/mysql-return-all-results-within-x-last-hours) although with additional significant constraint:

现在我有两张表，一张用于测量，一张用于部分测量的分类结果。

测量结果不断到达，结果在新测量分类后不断添加。

**结果的存储顺序不一定与测量的到达顺序和存储顺序相同！**

我只想展示**最后**的结果。*最后*，我的意思是将最后一个可用结果的最大时间（时间是测量结构的一部分）*称为 Y*和 X 秒的范围，并将测量结果与 Y 和 YX 范围内的**可用**结果一起呈现.

以下是2个表的结构：

事件表：

```
CREATE TABLE `event_data` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `Feature` char(256) NOT NULL,
  `UnixTimeStamp` int(10) unsigned NOT NULL,
  `Value` double NOT NULL,

  KEY `ix_filter` (`Feature`),
  KEY `ix_time` (`UnixTimeStamp`),
  KEY `id_index` (`id`)
) ENGINE=MyISAM 
```

分类结果表：

```
CREATE TABLE `event_results` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `level` enum('NORMAL','SUSPICIOUS') DEFAULT NULL,
  `score` double DEFAULT NULL,
  `eventId` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `eventId_index` (`eventId`)
) ENGINE=MyISAM 
```

我无法首先查询上次测量时间戳，因为我想呈现当前有结果的测量，并且由于测量不断到达，结果可能仍然不可用。

因此，我想到了使用
`event_results.eventId=event_data.id`and 加入两个表，而不是选择最大时间`event_data.UnixTimeStamp as maxTime`，在我拥有 maxTime 之后，我需要再次执行相同的操作（加入 2 个表）并在 where 子句中添加一个条件

`WHERE event_data.UnixTimeStamp >= maxTime + INTERVAL -X SECOND`

执行 2 个连接似乎效率不高，只是为了实现我的要求，你有更多的 ef

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:10:58.393

我不完全确定你想要返回什么结果集，所以我将做一些假设。请随时纠正我所做的任何假设。

听起来（对我来说）您希望其中的所有行都`event_data`在绝对“最新”时间戳的一小时（或多少秒）内，并且与这些行一起，您还希望从 中返回任何相关行`event_results`（如果有任何匹配）行可用。

如果是这样的话，那么使用内联视图来检索时间戳的最大值就是要走的路。（该操作将非常有效，因为查询将返回单行，并且可以从现有索引中有效地检索。）

由于您想要指定时间段内的所有行（从“最新时间”返回到“最新时间减去 X 秒”），我们可以继续计算同一查询中该时间段的起始时间戳。在这里，我们假设您要“返回”一小时（=60*60 秒）：

```
SELECT MAX(UnixTimeStamp) - 3600 FROM event_data 
```

注意：上面 SELECT 列表中的表达式基于`UnixTimeStamp`定义为整数类型的列，而不是 DATETIME 或 TIMESTAMP 数据类型。如果该列被定义为 DATETIME 或 TIMESTAMP 数据类型，我们可能会用这样的东西来表达它：

```
SELECT MAX(mydatetime) + INTERVAL -3600 SECONDS 
```

（我们可以以分钟、小时等指定间隔单位）

我们可以在另一个查询中使用该查询的结果。要在相同的查询文本中执行此操作，我们只需将该查询包装在括号中，并将其作为行源引用，就好像该查询是一个实际的表一样。这允许我们从中获取`event_data`指定时间段内的所有行，如下所示：

```
SELECT d.id
     , d.Feature
     , d.UnixTimeStamp
     , d.Value
  JOIN ( SELECT MAX(l.UnixTimeStamp) - 3600 AS from_unixtimestamp
           FROM event_data l
       ) m
  JOIN event_data d
    ON d.UnixTimetamp >= m.from_unixtimestamp 
```

在这种特殊情况下，外部查询中的 UnixTimeStamp 列不需要上限谓词。这是因为我们已经知道没有大于 MAX(UnixTimeStamp) 的 UnixTimeStamp 值，这是我们感兴趣的周期的上限。

（我们可以在内联视图的 SELECT 列表中添加一个表达式来返回`MAX(l.UnixTimeStamp) AS to_unixtimestamp`，然后`AND d.UnixTimeStamp <= m.to_unixtimestamp`在外部查询中包含一个谓词，但这将是不必要的冗余。）

`event_results`您还指定了从表中返回信息的要求。

我相信您说过您想要任何“可用”的相关行。这表明（对我来说）如果没有匹配的行是“可用的” ，您仍然希望从表`event_results`中返回该行。`event_data`

我们可以使用 LEFT JOIN 操作来实现这一点：

```
SELECT d.id
     , d.Feature
     , d.UnixTimeStamp
     , d.Value
     , r.id
     , r.level
     , r.score
     , r.eventId
  JOIN ( SELECT MAX(l.UnixTimeStamp) - 3600 AS from_unixtimestamp
           FROM event_data l
       ) m
  JOIN event_data d
    ON d.UnixTimetamp >= m.from_unixtimestamp
  LEFT
  JOIN event_results r
    ON r.eventId = d.id 
```

`eventID`由于表中的列没有唯一约束`event_results`，因此可能会从 event_results 中找到多个“匹配”行。每当发生这种情况时，`event_data`table 中的行将被重复，对于来自 的每个匹配行一次`event_results`。

如果 from 没有匹配`event_results`的行，则`event_data`仍将返回 from 的行，但表中的列`event_results`设置为 NULL。

为了提高性能，请从 SELECT 列表中删除您不需要返回的所有列，并在 ORDER BY 子句中明智地选择表达式。（添加覆盖索引可能会提高性能。）

对于上面写的语句，MySQL很可能会用到表`ix_time`上的索引，表上的索引。`event_data``eventId_index``event_results`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:29:12.697

据我了解，您使用的是聚合函数，`MAX`. 结果，这将产生一个大小为 1 的记录集，这是您将执行的最长时间。因此，需要将其分解为子查询（如您所说，嵌套选择）。您必须在某个时候进行 2 次查询。（您对最后一个问题的回答有 2 个查询，通过子查询/嵌套选择）。

子查询导致问题的主要时间是当您在查询的选择部分执行子查询时，因为它每有一行就执行子查询，这将使查询的运行速度随着结果集的增长呈指数级增长。让我们把你最后一个问题的答案用一种可怕的、低效的方式写出来：

```
SELECT timeStart, 
       (SELECT max(timeStart) FROM events) AS maxTime
FROM events
WHERE   timeStart > (maxTime + INTERVAL -1 SECOND) 
```

这将在每次有 eventTime 记录时执行选择查询，以获取最大事件时间。它应该产生相同的结果，但这很慢。这就是对子查询的恐惧的来源。

它还`MAX`对每一行执行聚合函数，每次都会返回相同的答案。因此，您执行该子查询一次，而不是在每一行上执行。

但是，在您最后一个问题的答案的情况下，`MAX`子查询部分运行一次，并用于过滤该选择运行一次的位置。因此，总共运行了 2 个查询。

2 个超快速查询比 1 个超慢查询更快运行。

# concurrency - Web 服务客户端可以控制并行连接的数量吗？

> ID：14812325
> 
> 赞同：1
> 
> 时间：2013-02-11T12:51:23.460
> 
> 标签：concurrency

客户端机器或应用程序设置是否有任何方法限制它可以打开到 Web 服务的连接数？所以我有一个 .net 应用程序，它产生多个线程，每个线程为 Web 服务 XXX 创建代理的新实例。在每个线程上，我使用实例化代理调用 SomeXXX 方法。因此，如果该服务允许 100 个连接并且我正在创建 100 个线程，是否有任何理由在我执行 netstat 时不应该看到 100 个已建立的连接？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:41:53.617

好的，所以机器配置中的设置默认将互联网连接（机器外部的 http/https）限制为 2。修改机器配置的 System.Net 部分，效果很好

```
<connectionManagement>
<add address="*" maxconnection="12"/>
</connectionManagement> 
```

问候

# android - Android 蓝牙：获取已发现设备的 UUID

> ID：14812326
> 
> 赞同：25
> 
> 时间：2013-02-11T12:51:25.160
> 
> 标签：android, bluetooth

由于我目前正在为 Android 开发一个小型蓝牙库，因此我正在尝试获取我在周围发现的设备的所有服务 uuid。

当我的广播接收器获得`BluetoothDevice.ACTION_FOUND`意图时，我正在提取设备并调用：

```
device.fetchUuidsWithSdp(); 
```

这将为`BluetoothDevice.ACTION_UUID`找到的每个设备产生意图，并且我正在使用相同的接收器处理它们：

```
BluetoothDevice d = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
Parcelable[] uuidExtra = intent.getParcelableArrayExtra(BluetoothDevice.EXTRA_UUID);

if(uuidExtra ==  null) {
    Log.e(TAG, "UUID = null");
}

if(d != null && uuidExtra != null)
    Log.d(TAG, d.getName() + ": " + uuidExtra.toString()); 
```

问题是，那`uuidExtra`总是`null`。

如何获取周围设备的所有 UUID？

编辑：

我正在使用 Nexus 7。我尝试了在互联网上找到的代码，这也给了我一个 NullPointerException：[http ://digitalhacksblog.blogspot.de/2012/05/android-example-bluetooth-discover-and.html](http://digitalhacksblog.blogspot.de/2012/05/android-example-bluetooth-discover-and.html)

谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-12T22:11:58.470

关于此的[文档](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#ACTION_UUID)说明...

> 始终包含额外字段`BluetoothDevice.EXTRA_UUID`

然而，就像你一样，我发现这不是真的。

如果您`fetchUuidsWithSdp()`在设备发现仍在进行时调用`BluetoothDevice.EXTRA_UUID`可以为空。

您应该等到收到`BluetoothAdapter.ACTION_DISCOVERY_FINISHED`电话后再拨打`fetchUuidsWithSdp()`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-05-06T10:54:37.283

> **注意：**此解决方案适用于`CLASSIC`蓝牙而不是`BLE`. `BLE`检查如何在外围端的广告商中发送制造商特定数据

获取 Uuids 的问题是你只有一个蓝牙适配器，我们不能有并行的 api 调用使用适配器来实现它的目的。

正如 Eddie 指出的那样，等待`BluetoothAdapter.ACTION_DISCOVERY_FINISHED`然后调用`fetchUuidsWithSdp()`。

这仍然不能保证为所有设备获取 uuid。除此之外，必须等待每个后续调用`fetchuuidsWithSdp()` 完成，然后为另一台设备调用此方法。

请看下面的代码——

```
ArrayList<BluetoothDevice> mDeviceList = new ArrayList<BluetoothDevice>();

private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();

        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            BluetoothDevice device = (BluetoothDevice) intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            mDeviceList.add(device);
        } else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
            // discovery has finished, give a call to fetchUuidsWithSdp on first device in list.
            if (!mDeviceList.isEmpty()) {
                BluetoothDevice device = mDeviceList.remove(0);
                boolean result = device.fetchUuidsWithSdp();
            }
        } else if (BluetoothDevice.ACTION_UUID.equals(action)) {
            // This is when we can be assured that fetchUuidsWithSdp has completed.
            // So get the uuids and call fetchUuidsWithSdp on another device in list

            BluetoothDevice deviceExtra = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            Parcelable[] uuidExtra = intent.getParcelableArrayExtra(BluetoothDevice.EXTRA_UUID);
            System.out.println("DeviceExtra address - " + deviceExtra.getAddress());
            if (uuidExtra != null) {
                for (Parcelable p : uuidExtra) {
                    System.out.println("uuidExtra - " + p);
                }
            } else {
                System.out.println("uuidExtra is still null");
            }
            if (!mDeviceList.isEmpty()) {
                BluetoothDevice device = mDeviceList.remove(0);
                boolean result = device.fetchUuidsWithSdp();
            }
        }
    }
} 
```

> **更新：**最新的 android 版本（mm 及以上）将导致触发与每个设备的配对过程

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-09T20:20:27.187

这是一个很好的示例，说明了如何从我为获取心率设备所做的服务中获取服务特征的 UUID：

```
private class HeartRateBluetoothGattCallback extends BluetoothGattCallback {

    @Override
    public void onConnectionStateChange(BluetoothGatt gatt, int status, int newState) {         
        if (newState == BluetoothProfile.STATE_CONNECTED) {
            logMessage("CONNECTED TO " + gatt.getDevice().getName(), false, false);
            gatt.discoverServices();    
        } else if(newState == BluetoothProfile.STATE_DISCONNECTED) {
            logMessage("DISCONNECTED FROM " + gatt.getDevice().getName(), false, false);
            if(mIsTrackingHeartRate)
                handleHeartRateDeviceDisconnection(gatt);
        } 
    }

    @Override
    public void onServicesDiscovered(BluetoothGatt gatt, int status) {
        if (status == BluetoothGatt.GATT_SUCCESS) {
            logMessage("DISCOVERING SERVICES FOR " + gatt.getDevice().getName(), false, false);

            if(mDesiredHeartRateDevice != null && 
                    gatt.getDevice().getAddress().equals(mDesiredHeartRateDevice.getBLEDeviceAddress())) {

                if(subscribeToHeartRateGattServices(gatt)) {

                    mIsTrackingHeartRate = true;
                    setDeviceScanned(getDiscoveredBLEDevice(gatt.getDevice().getAddress()), DiscoveredBLEDevice.CONNECTED);
                    broadcastHeartRateDeviceConnected(gatt.getDevice());

                } else
                    broadcastHeartRateDeviceFailedConnection(gatt.getDevice());

            } else {
                parseGattServices(gatt);
                disconnectGatt(getDiscoveredBLEDevice(gatt.getDevice().getAddress()));
            }
        }   
    }

    @Override
    public void onCharacteristicChanged(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic) {
        if(characteristic.getUuid().equals(UUID.fromString(HEART_RATE_VALUE_CHAR_READ_ID))) {
            int flag = characteristic.getProperties();
            int format = -1;

            if ((flag & 0x01) != 0) 
                format = BluetoothGattCharacteristic.FORMAT_UINT16;
            else 
                format = BluetoothGattCharacteristic.FORMAT_UINT8;

            Integer heartRateValue = characteristic.getIntValue(format, 1);
            if(heartRateValue != null)
                broadcastHeartRateValue(heartRateValue);
            else
                Log.w(SERVICE_NAME, "UNABLE TO FORMAT HEART RATE DATA");
        }
    };

};

private void parseGattServices(BluetoothGatt gatt) {
    boolean isHeartRate = false;
    for(BluetoothGattService blueToothGattService : gatt.getServices()) {
        logMessage("GATT SERVICE: " + blueToothGattService.getUuid().toString(), false, false);
        if(blueToothGattService.getUuid().toString().contains(HEART_RATE_DEVICE_SERVICE_CHARACTERISTIC_PREFIX))
            isHeartRate = true;
    }   

    if(isHeartRate) {
        setDeviceScanned(getDiscoveredBLEDevice(gatt.getDevice().getAddress()), DiscoveredBLEDevice.IS_HEART_RATE);
        broadcastHeartRateDeviceFound(getDiscoveredBLEDevice(gatt.getDevice().getAddress()));
    } else 
        setDeviceScanned(getDiscoveredBLEDevice(gatt.getDevice().getAddress()), DiscoveredBLEDevice.NOT_HEART_RATE);
}

private void handleHeartRateDeviceDisconnection(BluetoothGatt gatt) {
    broadcastHeartRateDeviceDisconnected(gatt.getDevice());
    gatt.close();

    clearoutHeartRateData();
    scanForHeartRateDevices();
}

private void disconnectGatt(DiscoveredBLEDevice device) {
    logMessage("CLOSING GATT FOR " + device.getBLEDeviceName(), false, false);
    device.getBlueToothGatt().close();
    device.setBlueToothGatt(null);
    mInDiscoveryMode = false;
}

private boolean subscribeToHeartRateGattServices(BluetoothGatt gatt) {
    for(BluetoothGattService blueToothGattService : gatt.getServices()) {
        if(blueToothGattService.getUuid().toString().contains(HEART_RATE_DEVICE_SERVICE_CHARACTERISTIC_PREFIX)) {
            mHeartRateGattService = blueToothGattService;

            for(BluetoothGattCharacteristic characteristic : mHeartRateGattService.getCharacteristics()) {
                logMessage("CHARACTERISTIC UUID = " + characteristic.getUuid().toString(), false, false);

                for(BluetoothGattDescriptor descriptor :characteristic.getDescriptors()) {
                    logMessage("DESCRIPTOR UUID = " + descriptor.getUuid().toString(), false, false);
                }

                if(characteristic.getUuid().equals(UUID.fromString(HEART_RATE_VALUE_CHAR_READ_ID))) {
                    gatt.setCharacteristicNotification(characteristic, true);
                    BluetoothGattDescriptor descriptor = characteristic.getDescriptor(UUID.fromString(HEART_RATE_VALUE_CHAR_DESC_ID));
                    descriptor.setValue(BluetoothGattDescriptor.ENABLE_NOTIFICATION_VALUE);
                    return gatt.writeDescriptor(descriptor);
                }
            }

            break; //break out of master for-loop
        }
    }

    return false;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-18T14:47:21.193

我想您需要与设备配对才能接收 uuid。至少，这就是发生在我身上的事情。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-15T13:04:12.177

**device.getUuids()**使用它以 ParcelUuid 的形式获取该配对设备的所有 uuid；下面的示例代码： -

```
private void get_uuid_from_paired_devices(){
        Set<BluetoothDevice> pairedDevices = bluetoothAdapter.getBondedDevices();
        for (BluetoothDevice device: pairedDevices){

            for (ParcelUuid uuid: device.getUuids()){
                String uuid_string = uuid.toString();
                Log.d(TAG, "uuid : "+uuid_string);
            }
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-14T01:06:32.667

下面为我​​从远程设备获取记录

```
-0-
registerReceiver(..,
                new IntentFilter(BluetoothDevice.ACTION_UUID)); 
```

-1- device.fetchUuidsWithSdp();

-2-从广播接收器内

```
 if (BluetoothDevice.ACTION_UUID.equals(action)) {
                        BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                        Parcelable[] uuids = intent.getParcelableArrayExtra(BluetoothDevice.EXTRA_UUID);
                        for (Parcelable ep : uuids) {
                            Utilities.print("UUID records : "+ ep.toString());
                        }
                    } 
```

您还可以使用以下方式获取离线缓存的 UUID 记录

```
 BluetoothDevice.getUuids(); 
```

# ruby-on-rails-3 - Heroku rails 排队 mongoid

> ID：14812329
> 
> 赞同：2
> 
> 时间：2013-02-11T12:51:29.830
> 
> 标签：ruby-on-rails-3, heroku, mongoid

我需要处理一个`csv`包含 10,000 条记录的文件。每 100 条记录大约需要 4 秒，我对此很满意。
我希望能够将 10,000 条记录拆分为 100 个作业，这些作业将在服务器不忙时执行（无需订单）。

我正在使用heroku，如果可以的话，我很乐意将处理分配给几个节点。

这里的最佳做法是什么？如何处理mongo连接？如何拆分作业，并创建将来运行的任务？

不需要完整的解决方案，请提供一些指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:42:46.223

我和塞尔吉奥有同样的建议。试试[**Sidekiq**](https://github.com/mperham/sidekiq)后台工作者 gem。有[kiqstand](https://github.com/mongoid/kiqstand)中间件使它可以与 Mongoid 一起工作。

粗略的草图：

```
# Gemfile
gem 'kiqstand'
gem 'sidekiq'

# Procfile
web: ...
worker: bundle exec sidekiq -e $RACK_ENV -C config/sidekiq.yml

# config/sidekiq.yml
#
# Configuration file for Sidekiq.
# Options here can still be overridden by cmd line args.
---
:verbose: false
:namespace: sidekiq
:concurrency: 25
:queues:
  - [often, 7]
  - [default, 5]
  - [seldom, 3]

# config/initializers/sidekiq.rb
Sidekiq.configure_server do |config|
  # Require kiqstand middleware
  config.server_middleware do |chain|
    chain.add Kiqstand::Middleware
  end
end

# app/workers/import_worker.rb
# The actual Sidekiq worker that performs the input
class ImportWorker
  include Sidekiq::Worker

  def perform(my_var)
    # processing the csv
  end
end 
```

Sidekiq 和 Kiqstand 应该处理 Mongoid Mongodb 连接。为了拆分任务，您可以创建第二个工作人员来为第一个工作人员提供服务。由于发送到的参数`ImportWorker.perform_async(my_var)`将被序列化并存储在 Redis 中，因此它们应该很小，在您的情况下只是一个行引用左右。

希望能给一些指点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T19:38:52.803

还可以查看 smarter_csv gem - 它旨在批量读取 CSV 文件，因此您可以将它们交给 resque 或 sidekiq 工作人员。

[https://github.com/tilo/smarter_csv](https://github.com/tilo/smarter_csv)

# r - qplot 动态绘图

> ID：14812340
> 
> 赞同：0
> 
> 时间：2013-02-11T12:52:18.217
> 
> 标签：r, dynamic, ggplot2

我想在给定的日期上创建动态绘图，即我希望在代码运行时通过特定日期一个接一个地出现绘图。此代码似乎适用于`plot`function 但不适用于`qplot`.

有任何想法吗？

提前致谢，

`x`带标题`t`, `date`, `AUM`,`profit`

```
windows(5,5)
dev.set()
for (i in 1:10){
  z <- x[x$t == i,]
  a <- unique(z$date)
  qplot(z$AUM,z$profit,main=a,xlim=range(0:2.5e+08),ylim=range(0:6e+06))
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:03:12.583

您需要添加一个`print()`呼叫，即`print(qplot(...))`.

原因是 ggplot2 使用需要打印调用的网格图形。

```
print(qplot(z$AUM,z$profit,main=a,xlim=range(0:2.5e+08),ylim=range(0:6e+06))) 
```

* * *

这是[R 常见问题解答 7.16](http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-is-the-output-not-printed-when-I-source_0028_0029-a-file_003f)。

# python - matplotlib 没有属性“pyplot”

> ID：14812342
> 
> 赞同：57
> 
> 时间：2013-02-11T12:52:22.170
> 
> 标签：python, matplotlib

我可以导入 matplotlib，但是当我尝试运行以下命令时：

```
matplotlib.pyplot(x) 
```

我得到：

```
Traceback (most recent call last):
   File "<pyshell#31>", line 1, in <module>
       matplotlib.pyplot(x)
AttributeError: 'module' object has no attribute 'pyplot' 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-11T12:55:13.277

[`pyplot`](http://matplotlib.org/api/pyplot_api.html#module-matplotlib.pyplot)是一个子模块，`matplotlib`它不会通过简单的`import matplotlib`.

```
>>> import matplotlib
>>> print matplotlib.pyplot
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'pyplot'
>>> import matplotlib.pyplot
>>> 
```

似乎习惯这样做： `import matplotlib.pyplot as plt`此时您可以使用它包含的各种函数和类：

```
p = plt.plot(...) 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-02-11T12:56:38.303

你导入了吗？进口`matplotlib`是不够的。

```
>>> import matplotlib
>>> matplotlib.pyplot
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'pyplot' 
```

但

```
>>> import matplotlib.pyplot
>>> matplotlib.pyplot 
```

作品。

pyplot 是 matplotlib 的子模块，在导入 matplotlib 时不会立即导入。

导入 pyplot 最常见的形式是

```
import matplotlib.pyplot as plt 
```

因此，您的陈述不会太长，例如

```
plt.plot([1,2,3,4,5]) 
```

代替

```
matplotlib.pyplot.plot([1,2,3,4,5]) 
```

并且：`pyplot`不是一个函数，它是一个模块！所以不要调用它，而是使用这个模块**中定义的函数。**见我上面的例子

# c# - 通过引用传递而不返回值

> ID：14812345
> 
> 赞同：-5
> 
> 时间：2013-02-11T12:52:28.980
> 
> 标签：c#

假设我有一个方法用一些参数调用另一个方法，如下所示：

```
 public void SomeMethod()
   {
      List<SomeObject> TheList = SomeQueryThatReturnsTheList();

      TheList = DoSomeWorkWithList(TheList);
   }

   public List<SomeObject> WorkForList(List<SomeObject> TheListAsParameter)
   {
      foreach (SomeObject x in TheListAsParameter)
      {
          ....
      }

      return TheListAsParameter;
   } 
```

如您所见，该方法`WorkForList`返回它收到的列表。我的问题是：如果我不返回列表并`public void WorkForList(List<SomeObject> TheListAsParameter)`按照 c# 中的引用传递的方式重写签名，是否意味着 TheList in`SomeMethod`将使用`WorkForList`方法中完成的工作进行更新？如果是这样，以下代码是否会相同：

```
 public void SomeMethod()
   {
      List<SomeObject> TheList = SomeQueryThatReturnsTheList();

      DoSomeWorkWithList(TheList);
   }

   public void WorkForList(List<SomeObject> TheListAsParameter)
   {
        ....
   } 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T12:55:01.170

好吧，如果你不使用`ref`关键字，**它的地址将通过值传递，**这意味着你可以改变它的元素，但你不能初始化它或者不能将它赋值为 null。例如。如果在你的方法中你这样做：

```
public void WorkForList(List<SomeObject> TheListAsParameter)
{
  TheListAsParameter = null;
} 
```

您将看不到调用者的差异。

您应该看到这篇文章：[Jon Skeet 的 C# 中的参数传递](http://www.yoda.arachsys.com/csharp/parameters.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T12:57:21.130

在这种情况下，代码将执行您想要执行的操作，**但**请记住两件事：

*   C# 是“按值传递”语言。它传递对象的地址，因此仅在您使用此实例时才有效，而不是更改实例本身。为此，您应该使用`ref`关键字，但这通常会导致代码更难阅读。
*   返回对象极大地提高了可读性 - 你所做的被认为是副作用，你的方法的用户（可能是另一个团队成员）可能不知道你正在修改列表内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T12:53:58.423

是的，你可以这么做。但是返回对象可能是有用的，为了清楚起见，并允许方法链接。

例如，使用您的第`WorkForList`一种方法：

```
yourObject.WorkForList(list).DoSomethingWithTheReturnedList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T12:54:33.283

是的 - 这应该和你描述的完全一样......你当然可以测试你已经编写的代码吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T12:56:14.467

是的，只要您的`WorkForList()`方法没有这样的行：

```
TheListAsParameter = something; 
```

那么您所做的任何更改都`TheListAsParameter`将反映在调用方法中而不返回它。

在这里准确地说，在这种情况下，您不是通过引用传递变量。您正在按值传递引用类型。通过引用传递涉及到`ref`C# 中关键字的使用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-11T13:01:01.260

只要您不使用 foreach 来修改列表的值：

```
 foreach (SomeObject x in TheListAsParameter)
  {
      ....
  } 
```

由于不允许您使用 foreach 修改您正在浏览的 Collection 的内容。

# java - Java 生成 Html 页面

> ID：14812346
> 
> 赞同：-2
> 
> 时间：2013-02-11T12:52:29.640
> 
> 标签：java, javascript, html, webpage

我正在开发一个用户可以生成表单的项目。

我正在使用 /javascript/java < STS /tomcat 表示用户进入网站并选择字段/字符串/下拉菜单/单选按钮等。

当他点击底部的保存时，不同的字段被保存在数据库（mysql）中，这可以多次创建多个表单。

**这**是我希望从这个表单能够生成一个页面，不同的用户可以输入并填写这个生成的表单的问题。（寻找要阅读的代码或参考资料或任何帮助）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:56:02.113

我们最近在我们的项目中这样做了。基本上表格是由数据库驱动的。因此，例如：表单由字段组成。我们使用 JSF 在表单支持 Bean 属性的基础上生成标签。

希望这可以帮助

# android - android中ccsprite的点击事件

> ID：14812348
> 
> 赞同：0
> 
> 时间：2013-02-11T12:52:33.660
> 
> 标签：android, cocos2d-android

我是 cocos2d 的新手。

我正在开发一款游戏。

而且我想对图层的点击事件进行一些记录。

我不知道当我们单击图层的某些精灵时会调用哪个方法。

我得到了控制，`ccTouchesBegan(MotionEvent event)`但我无法找到点击了哪个精灵。

这是代码：

```
CCSprite bridge = RetrivingImagesFromSDcard.getImage(Constants.scrooll_Sprites[tileDetailsList
                                                                                                           .get(tileID).tileSpriteID3]);
                            addChild(
                                    bridge,
                                    tileDetailsList.get(tileID).tileSpriteID3Zorder,tileDetailsList.get(tileID).tileSpriteID3Tag);
                            bridge.setPosition(tilesBG.getPosition().x,tilesBG.getPosition().y);
                            bridge.setRotation(tileDetailsList.get(tileID).tileAngle);
                            bridge_Sprite_ArrayList.add(bridge); 
```

这是触摸事件

```
@Override
    public boolean ccTouchesBegan(MotionEvent event) {
        if (flagTap == false)
        {
            tapCount = tapCount+1;
            tapCountStr = Integer.toString(tapCount);
            Log.e("TapCount", "@@@@@@@@@@@@@@@@@"+tapCountStr);

            map.put(GameLayer.timVal,tapCountStr);
            System.out.println(map);
            //CHANGES DONE 8 FEB

            try
            { 

                GameLog gameLogObj = new GameLog();
                SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd-HH-mm-ss");
                String currentDateandTime = sdf.format(new Date());
                GameLayer.logLevelArgument = "INFO";
                GameLayer.logMsgArgument = "TAPBEFORELAUNCH";
                GameLayer.roundStr = Integer.toString(Constants.level);
                TrainMapLayer.flagLogType = true;  
                String MAPSIZE = ""+Constants.numberOfColumns+"x"+Constants.numberOfRows;

                gameLogObj.OpenAndAppendData(currentDateandTime, "UserId value", "sessionID Value",
                        " gameID Value", GameLayer.roundStr, "RoundDiscriptor", GameLayer.logMsgArgument,GameLayer.logLevelArgument,TrainMapLayer.flagLogType,MAPSIZE,"");

            }

            catch (Exception e) {
                Log.e("Exception in TAPBEFORELAUNCH",">>>>>>>>>>>>"+e);
                GameLog gameLogObj = new GameLog();
                SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd-HH-mm-ss");
                String currentDateandTime = sdf.format(new Date());
                GameLayer.logLevelArgument = "ERROR";
                GameLayer.logMsgArgument = e.toString();
                GameLayer.roundStr = Integer.toString(Constants.level);
                TrainMapLayer.flagLogType = false; 
                String MAPSIZE = ""+Constants.numberOfColumns+"x"+Constants.numberOfRows;

                gameLogObj.OpenAndAppendData(currentDateandTime, "UserId value", "sessionID Value",
                        " gameID Value", GameLayer.roundStr, "RoundDiscriptor", GameLayer.logMsgArgument,GameLayer.logLevelArgument,TrainMapLayer.flagLogType,MAPSIZE,"" );

            }  

            //CHANGES DONE 7 FEB

        }
        else
        {
            Log.v("In else condition ccTouchesBegan", "))))))))))))))))");

        }
        return true;
    } 
```

请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:04:37.333

您可以使用 CCMenuItemImage 进行触摸。像 ：

```
CCMenuItemImage xyz= CCMenuItemImage.item("start.png", "start.png",this, "to_Where_You_Want_To_Replace_Your_Scene"); 
```

# java - 使用visualvm的java内存泄漏

> ID：14812349
> 
> 赞同：0
> 
> 时间：2013-02-11T12:52:36.377
> 
> 标签：java, memory-leaks, visualvm

我已经开始使用 visualVM 调试我的软件。我才开始熟悉这个软件。

我有内存泄漏。我发现了可疑的东西，但不知道该怎么做。

你下一步怎么做？

![在此处输入图像描述](../Images/7caa9dee86851c74f74a5782955163b8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:56:28.453

这就是我使用 Java visualVM 快速跟踪内存泄漏的方式。

首先在您要检查的地方设置断点或暂停代码。

执行程序的堆转储，使用“在实例视图中显示”来详细查看您怀疑泄漏的类的实例（即内存中的实例显然太多）。

然后确定应该收集的该类的一个实例。在“引用”面板中，您可以看到所有引用您的类的对象，右键单击“this”并选择“最近的 GC 根”，这将显示哪些引用阻止了该类被 GC 收集。

通过这种方式，您可以快速识别错误引用的位置并相应地修改您的程序以避免泄漏。

祝你好运，这实际上是一项非常有趣的任务，如果你是初学者，你会学到很多关于 JVM 工作原理的知识

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:00:28.903

我对您的应用程序一无所知，但我怀疑内存泄漏可以追溯到 HashMap。值通常在地图中累积（用于缓存......）。也看看这些类似的帖子：

*   [VisualVM 内存泄漏检测](https://stackoverflow.com/questions/1718942/visualvm-memory-leak-detection)
*   [如何使用 visualvm 查找内存泄漏](https://stackoverflow.com/questions/9154785/how-to-find-memory-leaks-using-visualvm)

# php - 如何在 PHP 中重写 HTML 文件？

> ID：14812351
> 
> 赞同：-6
> 
> 时间：2013-02-11T12:52:38.530
> 
> 标签：php, html

我有一个 HTML 文件，我想重写一些“a href”标签并写入其他 HTML 文件。

我怎样才能在 PHP 中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:56:48.183

1.  从第一页阅读内容
2.  替换/添加/删除您想要的标签
3.  将内容写入新页面。

# java - 是否可以将 SWT Composite 嵌入到 JavaFX 场景中？

> ID：14812360
> 
> 赞同：1
> 
> 时间：2013-02-11T12:52:59.343
> 
> 标签：java, user-interface, swt, javafx

我知道 JavaFX 2.2 提供了[FXCanvas](http://docs.oracle.com/javafx/2/api/javafx/embed/swt/FXCanvas.html)用于将新的 JavaFX 组件嵌入到现有的 SWT Composites 中。是否可以反过来做？

我尝试这样做的动机是，JavaFX 中目前缺少一些组件。例如一个树表。我想在 JavaFX 中实现我的应用程序，使用 SWT 作为缺少组件的后备，并在它们准备好后立即将它们迁移到 JavaFX。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T13:40:16.350

不 - 您不能将重量级 (=SWT) 嵌入轻量级容器 (=FX) - JavaFX 将在 FX8 中获得 TreeTable

# django - 处理程序在 django-achievements 文档中的含义是什么？

> ID：14812361
> 
> 赞同：0
> 
> 时间：2013-02-11T12:53:00.517
> 
> 标签：django

[文档](https://django-achievements.readthedocs.org/en/latest/tutorial.html#register-it-to-the-engine)中的`accounts.handlers`and是什么意思？`backend.handlers`

* * *

要将其注册到引擎中，只需在您的设置中使用“ACHIEVEMENT_CLASSES”属性，如下所示：

```
#==========================================================================
# Achievements conf
#==========================================================================
    ACHIEVEMENT_CLASSES = ['accounts.handlers', 'backend.handlers'] 
```

定义类的文件并不重要，但尽量避免使用名称 results.py 来避免命名*冲突*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:28:20.970

处理程序是您编写成就类的文件，就像在上一步中所说的那样，[创建您的第一个成就](https://django-achievements.readthedocs.org/en/latest/tutorial.html#create-your-first-achievement)。

# javascript - 如何让 Chrome 在新标签页中打开页面

> ID：14812363
> 
> 赞同：2
> 
> 时间：2013-02-11T12:53:04.697
> 
> 标签：javascript, google-chrome

我只想在新标签页中打开所有页面......是关于 chrome 还是我的代码？在格式化计算机之前，我可以使用此代码执行此操作，但现在第一个链接在新选项卡中打开，其他链接在新窗口中打开。我认为我的一些 chrome 选项坏了或什么...

```
for (var i = 0; i < 2; i++) {
    window.open(document.getElementById("threads").getElementsByClassName("title")[i].getAttribute("href"));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:11:45.793

如果您正在编写 Chrome 扩展程序，那么您可以使用`chrome.tabs`API：

```
chrome.tabs.create({ url: "http://www.google.com/" }); 
```

请参阅以下文档：http: [//developer.chrome.com/extensions/tabs.html](http://developer.chrome.com/extensions/tabs.html)

## 对于投票结束此问题的人：

所有链接的“可能重复”问题都与浏览器无关，所有答案都说这样做是不可能的。另一方面，这个问题是特定于 Chrome 的，并且有一个特定于 Chrome 的 API 可用于为 Chrome 扩展程序执行此操作。所以我不会说这个问题是重复的，或者链接问题的答案特别相关。

# silverlight - 在 IIS7 上部署 Silverlight 应用程序

> ID：14812366
> 
> 赞同：0
> 
> 时间：2013-02-11T12:53:13.300
> 
> 标签：silverlight, iis-7

我们有一个用 Visual Studio (VS) 2010 编写的 silverlight 应用程序，我们希望将它部署在 Windows Server 2008 R2 机器 (IIS7) 上。要在 VS 中部署它，我右键单击 MyProject.Web 项目，选择“发布...”，从“发布方法”中选择“文件系统”。我将文件夹复制到服务器上的“C:\inetpub\wwwroot”。在 IIS 管理器中，我右键单击该文件夹，选择“转换为应用程序”，弹出一个窗口，您可以在其中选择应用程序池。我选择了默认（.NET 4），我点击“测试设置...”它失败了（这是一个不好的迹象），点击确定。当我尝试从浏览器访问该网站时，会弹出一个消息框，提示您要打开还是保存“MySilverlightApp”？基本上，它想下载 xap 文件，就像下载文本文件或 doc 文件一样，它不会“运行”它。我检查了论坛，大多数情况下的问题是没有设置 MIME 文件类型，但我检查了一切看起来都不错，而且应该也是如此，因为在 IIS7 上它都是默认设置的，所以我很困惑位在这里。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:41:59.870

我刚刚意识到你尝试了一些关于 mime 类型的东西，所以我需要编辑我的答案。我想分享一个链接，为您提供指导。看看你是否错过了一点可能会有所帮助。

[http://www.iis.net/learn/web-hosting/web-server-for-shared-hosting/configuring-iis-for-silverlight-applications](http://www.iis.net/learn/web-hosting/web-server-for-shared-hosting/configuring-iis-for-silverlight-applications)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:37:28.347

问题的路由原因是 XAP 文件（在 ClientBin 文件夹内）是默认文档。当我将 aspx 文件（在应用程序根文件夹中）设置为默认文档时，它开始正常工作。

# c# - 是否有主键和辅助键之类的东西？

> ID：14812368
> 
> 赞同：1
> 
> 时间：2013-02-11T12:53:32.677
> 
> 标签：c#, sql-server, entity-framework, ef-code-first, primary-key

我有这样的事情：

```
public class something {
   [Key]
   public int Id {get;set;}
   public string Name {get;set;}
}

public class secondsomething {
   [Key]
   public int Id {get;set;}
   [ForeignKey("Sth") {get;set;}
   public int sthId{get;set;}
   public something Sth{get;set;}
} 
```

我想要这个：

```
public class something {
   [Key]
   public int Id {get;set;} //keep this as primary key
   public string Name {get;set;} //maybe somehow mark this as a secondary key
}

public class secondsomething {
   [Key]
   public int Id {get;set;}
   [ForeignKey("Sth") {get;set;}
   public string sthName{get;set;} //don't want the id here, but it's name
   public something Sth{get;set;}
} 
```

有没有办法实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:39:02.703

要定义多个键，请将 [Key] 和 [Column(x)] 属性放在每个键上。

至于想要名称而不是 id 我认为不应该出现在这些模型中。在我看来，这将是一个数据投影，并且将是您针对这些对象编写的查询的一部分。

```
SecondSomething.Where(x=>x.IsActive).Select(x=>new MyProjection { Name = x.Sth.Name, //others}).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:20:15.900

```
HasRequired(x => x.sthName)
     .WithMany() //I assume
     .Map(x => x.MapKey("Sth")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:51:27.993

您可能会发现 Code first 迁移工具很有用，可用于指定花哨的索引要求。见[http://msdn.microsoft.com/en-us/data/jj591621.aspx](http://msdn.microsoft.com/en-us/data/jj591621.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T05:43:10.723

就像 Gert Arnold 所说的，没有直接支持在 Code First 上定义索引，但是如果您使用迁移，您可以直接调用 Sql() 方法并在那里定义它。这是一个例子：

```
public partial class AddingUsernameIndexes : DbMigration
{
    public override void Up()
    {
        Sql("CREATE NONCLUSTERED INDEX IX_Applications_Username ON RequestApplications (Username)");
    }

    public override void Down()
    {
        Sql("DROP INDEX IX_Applications_Username");
    }
} 
```

# node.js - 为什么建议不要使用双引号，除非我们以 Node.js 样式编写 JSON？

> ID：14812376
> 
> 赞同：3
> 
> 时间：2013-02-11T12:54:11.460
> 
> 标签：node.js, coding-style, standards

我遇到了一篇有趣的[文章](http://nodeguide.com/style.html#quotes)。除非我们定义 JSON，否则我们应该只使用单引号。

```
var foo = 'bar'; //Right way   

var foo = "bar"; //Wrong way 
```

任何人都可以阐明这一点，为什么会这样？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:00:49.067

首先，这只是一个风格指南。

您可以`ECMAScript`按照自己喜欢的方式定义字符串。对字符串使用单引号或双引号在语法上是正确的。

但是根据[`JSON Specifications`](http://www.json.org)，一个`JSON`值可以是**双引号中的字符串，**也可以是数字，也可以是 true 或 false 或 null，也可以是对象或数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:58:51.503

最可能的原因是程序员偏好/API 一致性。

严格来说，意思上没有区别；所以选择归结为方便。

以下是可能影响您选择的几个因素：

*   房屋风格：一些开发人员团体已经使用了一种约定或其他约定。
*   客户端要求：您会在字符串中使用引号吗？（见阿迪的回答）。
*   服务器端语言：VB.Net的人可能会选择java-script用单引号，这样脚本就可以在服务器端构建（VB.Net用双引号表示字符串，所以java-script字符串很容易区分）如果他们使用单引号）。
*   库代码：如果您正在使用使用特定样式的库，您可能会考虑自己使用相同的样式。
*   使用单引号时，任何撇号都需要转义。( `'Joe\'s got a cool bike.'`) 当使用双引号时，它们不会。( `"Joe's got a cool bike."`) 撇号在英文字符串中比双引号更常见。
*   个人偏好：您可能认为一种或另一种风格看起来更好。

请查看以下可能对您有帮助的帖子[何时在 JavaScript 中使用双引号或单引号](https://stackoverflow.com/questions/242813/when-to-use-double-or-single-quotes-in-javascript)

# sha1 - 非法选项：以及生成签名证书时

> ID：14812380
> 
> 赞同：0
> 
> 时间：2013-02-11T12:54:28.540
> 
> 标签：sha1

有人可以帮我解释为什么我得到这个非法选项吗？我也用过 C:/Users/myAccount

![在此处输入图像描述](../Images/166ed6cd9926d294f784543ad56edaa9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:56:23.790

您需要在文件规范周围加上引号：

```
blah blah -keystore "c:\documents and settings\...keystore" blah blah 
```

否则，它首先被视为多个参数`c:\documents`，然后`and`（这就是导致你悲伤的原因）等等。

换句话说，通过*不*引用路径，您的`keytool`程序看到的参数（程序名称本身除外）是：

```
 -exportcert
   -alias
   androiddebugkey
   -keystore
 / C:\Documents
|  and
 \ Settings\Administrator\.android\debug.keystore
   -list
   -v 
```

其中三个指示的行应该真正构成一个*参数*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:56:44.960

您的`-keystore`路径被解释为多个参数。用双引号 ( `"`) 括起来应该有帮助。

# iphone - UILocalNotification 多次触发

> ID：14812387
> 
> 赞同：1
> 
> 时间：2013-02-11T12:54:39.343
> 
> 标签：iphone, ios, objective-c, ipad, uilocalnotification

我`UILocalNotification`在特定日期安排了一个，并且通知被正确触发，但问题是我在随机日期收到多个警报以获得相同的通知，即使通知没有重复（repeatInterval = 0）。

另请注意，当我第一次收到通知时，它在通知中心正确显示，但后来当我收到多个警报时，通知中心没有任何更新。

请注意，此事件每天重复，但通知不会重复。

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:59:16.403

我希望你永远不会打电话：

```
[[UIApplication sharedApplication] cancelAllLocalNotifications] 
```

这些通知似乎是“旧”通知，尚未取消且仍处于触发状态。你有过重复间隔吗？其中一些通知可能会从非常旧的通知中重复出现

# python - 如何使用 python 程序获取包的 Yum 依赖项列表。这里的包本身是 CentOS 5.5 上可用的一个包更新

> ID：14812389
> 
> 赞同：2
> 
> 时间：2013-02-11T12:54:51.550
> 
> 标签：python, dependencies, yum

我正在尝试编写一个 python 程序来获取可用于使用 python Yum API 的包的依赖项列表。

以下是我获取类似于“yum deplist chkconfig-1.3.49.3-2.el6”的依赖项列表的代码。无论系统上已安装的列表如何，这都会产生所有需要的软件包的列表。

但我正在尝试编写一个与此命令“yum update chkconfig-1.3.49.3-2.el6”等效的包装器。此命令会产生未安装在系统上但需要的依赖项。

以下是我迄今为止尝试过的代码。还有没有其他方法可以访问 python Yum API 来满足我们的需求。这是实际的函数“customMethod”。其他的“比较”和“列表比较”用于比较列表中的 rpm 并获取其中最新的。

```
 import sys, re
    import yum, rpm
    from yum import _
    sys.path.insert(0, '/usr/share/yum-cli')
    import output

    class YumFrame(yum.YumBase, output.YumOutput):
        def __init__(self):
            try:
                yum.YumBase.__init__(self)
                output.YumOutput.__init__(self)
            except Exception, e:
                raise e
            self.pattern1 = re.compile(r'^([a-zA-Z0-9_\-\+]*)-([a-zA-Z0-9_\.]*)-([a-zA-Z0-9_\.]*)')

        def compare(self, pkg1, pkg2):
            Info1 = self.pattern1.search(pkg1).groups()
            Info2 = self.pattern1.search(pkg2).groups()
            n1, v1, r1 = Info1
            n2, v2, r2 = Info2
            if n1 == n2:
                return rpm.labelCompare(('1', v1, r1), ('1', v2, r2))
            else:
                return 2

        def listCompare(self, input):
            latest = input[0]
            refinedList = []
            for index, item in enumerate(input):
                result = self.compare(item, latest)
                if result == 1:
                    latest = item
                elif result == 2:
                    refinedList.append(item)

            refinedList.append(latest)
            return refinedList

        def customMethod(self, package):
            pkgs = []
            completeList = []
            ematch, match, unmatch = self.pkgSack.matchPackageNames([package])
            for po in ematch + match:
                pkgs.append(po)
            print "Matched Object: " + str(pkgs)
            results = self.findDeps(pkgs)
            for value in results.itervalues():
                for packageObject in value.itervalues():
                    actualList = []
                    for item in packageObject:
                        completeList.append(item.name + "-" + item.ver + "-" + item.rel)
            completeList = self.listCompare(completeList)
            completeList = list(set(completeList))
            return completeList

    if __name__ == "__main__":
        yumObj = YumFrame()
        print yumObj.customMethod("chkconfig-1.3.49.3-2.el6") 
```

提前致谢，

公羊

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-04-02T06:01:15.647

我不是 python 专家，但在 Yum CLI 界面中有一个简单的方法：

```
yum erase [package name] 
```

它会在实际删除之前向您显示依赖项列表。

希望能帮助到你

# c++ - 使用 opencv 和 LUT 减少颜色深度

> ID：14812397
> 
> 赞同：6
> 
> 时间：2013-02-11T12:55:13.477
> 
> 标签：c++, opencv, colors, depth

我想通过颜色深度缩放来减少颜色。

像这个例子： ![在此处输入图像描述](../Images/f002827f125199d50eb7c5a2e90ab06e.png)

第一张是CGA分辨率，第二张是EGA，第三张是HAM。我想用 cv::LUT 来做，因为我认为这是更好的方法。我可以用这段代码处理灰度：

```
Mat img = imread("test1.jpg", 0);
uchar* p;
Mat lookUpTable(1, 256, CV_8U);
p = lookUpTable.data;
for( int i = 0; i < 256; ++i)
    p[i] = 16 * (i/16)
LUT(img, lookUpTable, reduced); 
```

原来的：![在此处输入图像描述](../Images/9b5eea1d97ba7c6aba862b26d98c48ec.png)

颜色减少：![在此处输入图像描述](../Images/1ffb08ad0aac5884f661e91074126dd3.png)

但如果我尝试用颜色来做，我会得到奇怪的结果..

![在此处输入图像描述](../Images/bf973e9830e6a17382c9db545a07d702.png)

使用此代码：

```
imgColor = imread("test1.jpg");
Mat reducedColor;
int n = 16;
for (int i=0; i<256; i++) {
    uchar value = floor(i/n) * n;
    cout << (int)value << endl;
    lut.at<Vec3b>(i)[2]= (value >> 16) & 0xff;
    lut.at<Vec3b>(i)[1]= (value >> 8) & 0xff;
    lut.at<Vec3b>(i)[0]= value & 0xff;
} 
LUT(imgColor, lut, reducedColor); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-25T00:12:17.310

您现在可能已经继续前进了，但问题的根源在于您正在执行 16 位转换`uchar value`，它只有 8 位长。在这种情况下，即使是 8 位移位也太多了，因为您将擦除`uchar`. 然后是[`cv::LUT`文档](http://docs.opencv.org/2.4.5/modules/core/doc/operations_on_arrays.html#lut)明确指出`src`必须是“8 位元素的输入数组”，这在您的代码中显然不是这种情况。最终结果是只有彩色图像的第一个通道（蓝色通道）被转换`cv::LUT`。

解决这些限制的最佳方法是跨通道分割彩色图像，分别变换每个通道，然后将变换后的通道合并为新的彩色图像。请看下面的代码：

```
/*
Calculates a table of 256 assignments with the given number of distinct values.

Values are taken at equal intervals from the ranges [0, 128) and [128, 256),
such that both 0 and 255 are always included in the range.
*/
cv::Mat lookupTable(int levels) {
    int factor = 256 / levels;
    cv::Mat table(1, 256, CV_8U);
    uchar *p = table.data;

    for(int i = 0; i < 128; ++i) {
        p[i] = factor * (i / factor);
    }

    for(int i = 128; i < 256; ++i) {
        p[i] = factor * (1 + (i / factor)) - 1;
    }

    return table;
}

/*
Truncates channel levels in the given image to the given number of
equally-spaced values.

Arguments:

image
    Input multi-channel image. The specific color space is not
    important, as long as all channels are encoded from 0 to 255.

levels
    The number of distinct values for the channels of the output
    image. Output values are drawn from the range [0, 255] from
    the extremes inwards, resulting in a nearly equally-spaced scale
    where the smallest and largest values are always 0 and 255.

Returns:

Multi-channel images with values truncated to the specified number of
distinct levels.
*/
cv::Mat colorReduce(const cv::Mat &image, int levels) {
    cv::Mat table = lookupTable(levels);

    std::vector<cv::Mat> c;
    cv::split(image, c);
    for (std::vector<cv::Mat>::iterator i = c.begin(), n = c.end(); i != n; ++i) {
        cv::Mat &channel = *i;
        cv::LUT(channel.clone(), table, channel);
    }

    cv::Mat reduced;
    cv::merge(c, reduced);
    return reduced;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:05:17.910

`i`和都是`n`整数，因此`i/n`是整数。`(double)i/n`也许您希望在发言并乘以之前将其转换为 double ( ) `n`？

# jquery - 我想根据视口按比例调整图像大小

> ID：14812398
> 
> 赞同：0
> 
> 时间：2013-02-11T12:55:15.313
> 
> 标签：jquery, image, twitter-bootstrap

我正在使用 Twitter Bootsrap 构建一个 Wordpress 主题，并且我正在使用 Jumbotron 作为主页上的图像滑块。

我希望它根据视口调整图像大小并实现这一点，我使用以下代码：

```
jQuery(function(){
    jQuery('.carousel .item').css({
        'min-height':(jQuery(window).height())/100*85+'px'
    });
    jQuery(window).resize(function() {
        $('.carousel .item').css({
            'min-height':(jQuery(window).height())/100*85+'px'
        });
    });
});

jQuery(function() {
    jQuery('.carousel img').css({
        'min-height':(jQuery(window).height())/100*85+'px'
    });
    jQuery(window).resize(function(){
        $('.carousel img').css({
            'min-height':(jQuery(window).height())/100*85+'px'
        });
    });
}); 
```

这非常适合调整图像的高度，但也可能导致它失去比例。

有什么想法可以解决这个问题吗？

# python - 为什么 easy install 要访问我的 rootfs 以进行“开发”安装？

> ID：14812400
> 
> 赞同：2
> 
> 时间：2013-02-11T12:55:22.913
> 
> 标签：python, easy-install

我正在查看一个 python 应用程序服务器，我想玩弄代码。我被引导相信将“开发”传递给 setup.py 应该在不安装任何东西的情况下保留所有内容。但是，在运行时，它会尝试在我的 rootfs 中创建目录。

```
./setup.py develop 
```

给出：

```
running develop
Checking .pth file support in /usr/local/lib/python2.7/dist-packages/
error: can't create or remove files in install directory 
```

我认为这可能与包检查有关，但尝试将内容写入 rootfs 肯定是错误的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:02:40.923

该`develop`命令要`.pth`为您的项目添加一个条目，以便可以将其作为鸡蛋导入。请参阅[开发模式文档](http://pythonhosted.org/setuptools/setuptools.html#development-mode)以及[`develop`命令文档](http://pythonhosted.org/setuptools/setuptools.html#develop)。

默认设置是将该条目放在站点包中。`--install-dir`使用开关设置不同的库路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:06:54.687

您可以使用`--user`选项（[备用安装：用户方案](http://docs.python.org/2/install/index.html#alternate-installation-the-user-scheme)）。

# sql - 跨存储过程的 Oracle 表使用情况

> ID：14812401
> 
> 赞同：7
> 
> 时间：2013-02-11T12:55:22.277
> 
> 标签：sql, oracle, stored-procedures, oracle11g

我有一个11G的数据库。我需要检查一些存储过程，看看它们是否使用特定的表。（前端和后端sps）我拥有对数据库的完全访问权限，并且我还拥有存储在TFS 上的项目的所有单个sps 的副本。

我想要一种方法来生成与这个特定表交互的所有 sps 的列表。我不熟悉如何去搜索这些。任何人都可以建议获取这些数据的最合乎逻辑的方式吗？

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-11T13:01:45.050

如果我理解正确，您正在尝试`table`在所有存储的过程中搜索 a 的出现。在这种情况下，您可以使用以下查询：

`SP`在您的架构中搜索出现时

```
SELECT * FROM user_source WHERE text LIKE '%tab_name%'; 
```

`SP`在所有模式中搜索出现时

```
SELECT * FROM all_source WHERE text LIKE '%tab_name%'; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T13:05:32.593

有两件事，在 PL/SQL 中有一些更改需要重新编译 pl/sql 对象，其他则不需要。要看到第一个，您有`ALL_DEPENDENCIES`视图。或 DBA_，如果您愿意。

如果只是想查看表名在所有 pl/sql 代码中出现的位置，对表的更改是否需要重新编译，可以使用`ALL_SOURCE`大写字母和 %，但可能需要一些时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T12:59:49.683

我使用 PLSQL Developer，您可以在其中浏览到表（或其他对象），并查看“引用者”，以查看引用该表的所有对象。这很容易。我可以想象其他工具也有类似的功能。

~~我不知道这个预先解析的信息是否在 Oracle 中很容易获得，但我可以想象，因为这些工具似乎工作得很快。~~

此信息在`All_DEPENDENCIES`这些工具可能使用的视图中可用。

存储过程的来源可以在`USER_SOURCE`（或`ALL_SOURCE`）视图中找到，其中存储了整个数据库的结构。然而，从那里获取和解析代码会非常麻烦。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-19T11:34:30.053

这是我为给定的@schema（仅大写）和@table（仅大写）执行影响分析（仅合并、插入和更新）而编写的片段。它将返回所有过程名称、过程代码、从行号到行号以及其他详细信息。它也可以很容易地用于包含函数对象而不是包。正在开发一个可以跨所有模式或选定模式运行的实用程序（也将包括 SELECT 行）。尽管这足以让您开始工作。

我知道您可以使用 Oracle 中可用的依赖项和引用来执行类似的操作。但是对于包装级别的影响，这是一个很好的补充。我们还可以使用正则表达式进行更复杂的搜索。但是喜欢操作员对我的需求来说既简单又高效。

请注意，这不适用于可能在您的环境中运行的任何动态代码。这只是快速了解包中静态 PL/SQL 代码影响的适当起点。

```
WITH TableDep as
-- This table returns references where the table is used within the code for UPDATE OR INSERT
(
SELECT 
owner as schemaname,
name as packagename, 
type as typename,
TEXT as refcodeline,
CASE WHEN upper(text) LIKE '%INSERT%' THEN 'INSERT'
     WHEN upper(text) LIKE '%UPDATE%' THEN 'UPDATE'
   WHEN upper(text) LIKE '%MERGE%' THEN 'MERGE'
END AS opr,
:Tablename AS Tablename,
line refline
FROM dba_source WHERE upper(owner) = upper(:OWNER)  
      AND type = 'PACKAGE BODY' 
      AND (
            upper(text) LIKE ('%INSERT INTO '||:Tablename||'%')
            OR 
            upper(text) LIKE ('%UPDATE%'||:Tablename||' %')
            OR
            upper(text) LIKE ('%MERGE%'||:Tablename||' %')
           )
  ),
ProcedureDetails as
-- This code build all procedures within the package for references that is found in above query
(
SELECT 
  owner as schemaname,
  name as packagename, 
  type as typename,
  TEXT,
  trim(REGEXP_SUBSTR(TEXT, '(PROCEDURE [[:print:]]+)\(',1,1,null,1))   as procedure_name,
  line startline,
  LEAD(line, 1) OVER (partition by name order by line)-1 as endline
FROM dba_source
WHERE owner = upper(:OWNER) 
      AND type = 'PACKAGE BODY' 
      AND upper(text) LIKE '%PROCEDURE%(%'
      and exists (SELECt 1 FROM TableDep WHERE TableDep.packagename=name)
)
,ProcCode as
-- This code builds procedures into one cell per program for a given package. Later to find the  effected procedures
(
SELECT 
       ProcTag.packagename ,
       ProcTag.schemaname,
       ProcTag.typename,
       ProcTag.PROCEDURE_NAME,
       ProcTag.startline,
       ProcTag.endline,
       TO_CLOB(rtrim(xmlagg(xmlelement(e,codeline.text).extract('//text()') order by line).GetClobVal(),',')) as Procedure_Code
FROM
    ProcedureDetails ProcTag
    INNER JOIN dba_source codeline ON ProcTag.packagename=codeline.name
                                      AND ProcTag.schemaname=codeline.owner
                                      and ProcTag.typename=codeline.type
                                      and codeline.line between ProcTag.startline and ProcTag.endline
--WHERE PROCEDURE_NAME='PROCEDURE TRANS_KAT_INSO'
    group by 
       ProcTag.packagename ,
       ProcTag.schemaname,
       ProcTag.typename,
       ProcTag.PROCEDURE_NAME,
       ProcTag.startline,
       ProcTag.endline
      )
-- extract all the reference code for the given table selected with it complete procedure code.
SELECT
ProcHeader.Packagename, ProcHeader.schemaname, ProcHeader.typename, ProcHeader.procedure_name, ProcHeader.Procedure_Code ,ProcHeader.startline,ProcHeader.endline,ProcReference.Tablename, ProcReference.opr
FROM 
  ProcCode ProcHeader
  INNER JOIN 
        (
          SELECT DISTINCT ProcCode.Packagename, ProcCode.schemaname, ProcCode.typename, ProcCode.procedure_name , TableDep.Tablename, TableDep.opr
          FROM               ProcCode 
                  INNER JOIN TableDep ON ProcCode.packagename=TableDep.packagename
                                            AND ProcCode.schemaname=TableDep.schemaname
                                            and ProcCode.typename=TableDep.typename
                                            and TableDep.refline between ProcCode.startline and ProcCode.endline
        ) ProcReference
    ON    ProcHeader.Packagename=ProcReference.Packagename
          AND ProcHeader.schemaname=ProcReference.schemaname
          AND ProcHeader.typename=ProcReference.typename
          AND ProcHeader.procedure_name=ProcReference.procedure_name
; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-17T11:56:32.250

这个问题已经有一个接受的答案，但无论如何在`query`接受的答案中使用的将选择所有`user sources`使用特定表的。

因为问题是特定的，所以`Procedures`您可以进行以下查询以获取结果

```
SELECT * FROM user_source WHERE text LIKE '%YourTableName%' and TYPE='PROCEDURE'; 
```

# magento - Paypal Express 结帐发货回拨

> ID：14812406
> 
> 赞同：1
> 
> 时间：2013-02-11T12:55:31.550
> 
> 标签：magento, paypal

我们已将以下问题发送给 PayPal 的技术支持，但 2 周后仍然没有消息。我希望这里有人可以帮助我们:)

我们目前正在尝试使 PayPal Express Checkout 与 Magento 一起使用。

我们的运输回调脚本正在被调用。

如果脚本发回以下响应（仅限 UPS 选项），那么 PayPal 中的一切都会按预期工作：

```
L_SHIPPINGOPTIONISDEFAULT0=true&L_SHIPPINGOPTIONAMOUNT0=19.03&L_SHIPPINGOPTIONLABEL0=ups_11&L_SHIPPINGOPTIONNAME0=United+Parcel+Service+-+UPS+Standard&L_TAXAMT0=5.98&L_SHIPPINGOPTIONISDEFAULT1=false&L_SHIPPINGOPTIONAMOUNT1=23.42&L_SHIPPINGOPTIONLABEL1=ups_13&L_SHIPPINGOPTIONNAME1=United+Parcel+Service+-+UPS+Next+Day+Air+Saver&L_TAXAMT1=5.98&L_SHIPPINGOPTIONISDEFAULT2=false&L_SHIPPINGOPTIONAMOUNT2=28.07&L_SHIPPINGOPTIONLABEL2=ups_01&L_SHIPPINGOPTIONNAME2=United+Parcel+Service+-+UPS+Express&L_TAXAMT2=5.98&METHOD=CallbackResponse 
```

但是，如果我们发送此响应（加拿大邮政的 UPS 和 rpc）选项，PayPal 会简单地忽略我们的响应并且不显示任何运输选项：

```
L_SHIPPINGOPTIONISDEFAULT0=true&L_SHIPPINGOPTIONAMOUNT0=6.08&L_SHIPPINGOPTIONLABEL0=rcp_1020&L_SHIPPINGOPTIONNAME0=Canada+Post+-+Expedited&L_TAXAMT0=5.19&L_SHIPPINGOPTIONISDEFAULT1=false&L_SHIPPINGOPTIONAMOUNT1=14.74&L_SHIPPINGOPTIONLABEL1=rcp_1040&L_SHIPPINGOPTIONNAME1=Canada+Post+-+Priority&L_TAXAMT1=5.19&L_SHIPPINGOPTIONISDEFAULT2=false&L_SHIPPINGOPTIONAMOUNT2=19.33&L_SHIPPINGOPTIONLABEL2=ups_11&L_SHIPPINGOPTIONNAME2=United+Parcel+Service+-+UPS+Standard&L_TAXAMT2=5.19&L_SHIPPINGOPTIONISDEFAULT3=false&L_SHIPPINGOPTIONAMOUNT3=25.10&L_SHIPPINGOPTIONLABEL3=ups_13&L_SHIPPINGOPTIONNAME3=United+Parcel+Service+-+UPS+Next+Day+Air+Saver&L_TAXAMT3=5.19&L_SHIPPINGOPTIONISDEFAULT4=false&L_SHIPPINGOPTIONAMOUNT4=28.21&L_SHIPPINGOPTIONLABEL4=ups_01&L_SHIPPINGOPTIONNAME4=United+Parcel+Service+-+UPS+Express&L_TAXAMT4=5.19&METHOD=CallbackResponse 
```

这是正在发送的 SetExpressCheckout 选项：

```
[PAYMENTACTION] => Sale
            [AMT] => 39.95
            [CURRENCYCODE] => USD
            [RETURNURL] => {domain url}/paypal/express/return/
            [CANCELURL] => {domain url}/paypal/express/cancel/
            [INVNUM] => 100000009
            [SOLUTIONTYPE] => Sole
            [GIROPAYCANCELURL] => {domain url}/paypal/express/cancel/
            [GIROPAYSUCCESSURL] => {domain url}/checkout/onepage/success/
            [BANKTXNPENDINGURL] => {domain url}/checkout/onepage/success/
            [LOCALECODE] => en_US
            [ITEMAMT] => 39.95
            [TAXAMT] => 0.00
            [SHIPPINGAMT] => 0.00
            [L_NUMBER0] => ABCDEF
            [L_NAME0] => ABCDEF Name
            [L_QTY0] => 1
            [L_AMT0] => 39.95
            [CALLBACK] => {domain url}/paypal/express/shippingOptionsCallback/quote_id/309/
            [CALLBACKTIMEOUT] => 6
            [MAXAMT] => 1038.95
            [L_SHIPPINGOPTIONISDEFAULT0] => true
            [L_SHIPPINGOPTIONAMOUNT0] => 0.00
            [L_SHIPPINGOPTIONLABEL0] => no_rate
            [L_SHIPPINGOPTIONNAME0] => N/A
            [L_TAXAMT0] =>
            [METHOD] => SetExpressCheckout
            [VERSION] => 72.0
            [USER] => ****
            [PWD] => ****
            [SIGNATURE] => ****
            [BUTTONSOURCE] => Varien_Cart_EC_CA 
```

我们无法弄清楚为什么 PayPal 拒绝我们的运输选项？

提前致谢，

# symfony - Symfony2：如何检查域对象上不同用户/角色的权限？

> ID：14812407
> 
> 赞同：1
> 
> 时间：2013-02-11T12:55:35.327
> 
> 标签：symfony, permissions, acl

我想显示一个带有权限标志的表格。这意味着谁被允许做某事。

在我的应用程序中，我使用 UserSecurityIdentity/RoleSecurityIdentity 和有效掩码在 ACE 中设置所有权限。mydatabase 中的所有值都符合预期，我可以检查它是否为登录用户。

```
$securityContext->isGranted('EDIT', $model); 
```

但是如何检查不同的用户或角色是否对该对象具有 EDIT 权限？

# azure - 针对 Azure 连接被拒绝或服务不可用的大规模测试

> ID：14812417
> 
> 赞同：1
> 
> 时间：2013-02-11T12:56:30.637
> 
> 标签：azure, azure-storage, azure-table-storage

我们有一个云服务，它从用户那里获取请求，将数据（两个参数）传递给表实体并将它们放入云表中（使用`BatchTableOperations`到`InsertOrReplace`行）。该方法很简单，尽量保持轻便和快速（分区键和分区键/行键对问题得到控制）。

我们需要云服务来处理大约 10k 到 15k 的“并发”请求。我们首先使用队列来获取用户数据，并使用 Worker Role 来处理队列消息并将它们放入 SQL 中。虽然没有出现错误，也没有数据丢失，但处理速度太慢，无法满足我们的需求。现在我们正在尝试云表，看看我们是否可以更快地处理数据。请求数量越少，处理速度越快，但是当我们收到更多请求时，就会发生错误并丢失数据。

我在云服务所在的同一虚拟网络中设置了一些虚拟机进行测试，以防止防火墙停止请求。具有 1000 个线程和 5 个循环的 jMeter 测试，得到 0% 的错误。来自 2 个虚拟机的相同测试也可以。添加第三台机器会导致第一个错误（0.14% 的请求得到服务不可用 503 错误）。来自 10 台机器、1000 个线程和 2 个循环的大规模测试会出现大量 503 和/或连接被拒绝错误。我们已经尝试将云服务扩展到 10 个实例，但这对结果几乎没有影响。

我对这个问题有点坚持，不知道我是否用正确的工具来解决问题。任何建议都将受到高度欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:26:07.253

该问题可能与存储级别的限制有关。请在此处查看 Windows Azure 存储团队指定的可扩展性目标：http: [//blogs.msdn.com/b/windowsazurestorage/archive/2012/11/04/windows-azure-s-flat-network-storage-and- 2012-可扩展性-targets.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/11/04/windows-azure-s-flat-network-storage-and-2012-scalability-targets.aspx)。您可能想尝试在考虑这些可伸缩性目标的情况下进行负载测试。

# javascript - 无法在 javascript 方法中使用 submit() 提交表单

> ID：14812418
> 
> 赞同：0
> 
> 时间：2013-02-11T12:56:35.143
> 
> 标签：javascript, html

无法使用 javascript 方法中的提交方法和
按钮元素上的 onclick 事件来提交表单，甚至尝试在表单标记中使用 onsubmit 事件。需要不提交详细信息的原因。您可以复制代码并运行它以获得更清晰的信息。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <script type="text/javascript">`enter code here`
      function validateForm(form) {
          if (validateNames(form['hallticket'], form['hallticket_help']) && validateNames(form['firstname'], form['firstname_help'])) {
              form.submit();// Form is not getting submit
          }
          else {
              alert("Please Enter the Required Fields");

          }
      }

      function validateNonEmpty(inputField, helpText) {
          return validateRegex(/.+/, inputField.value, helpText, "please Enter a value");
      }

      function validateRegex(regex, input, helpText, helpMessage) {
          if (!regex.test(input)) {
              //Data is mismatched
              if (helpText != null) {
                  helpText.innerHTML = helpMessage;
                  return false;
              }
          }
          else {
              if (helpText != null)
              //data is matched
                  helpText.innerHTML = "";
              return true;
          }
      }

      function validateHallticket(inputField, helpText) {
          if (!validateNonEmpty(inputField, helpText)) {
              return false;
          }
          else 
              return validateRegex(/^\d{2}K91A\d{4}$/, inputField.value, helpText, "Enter valid Hallticket");
      }

      function validateNames(inputField, helpText) {
          // see that input data is non empty
          if (!validateNonEmpty(inputField, helpText)) {
              return false;
          }
          else 
              return validateRegex(/.+/, inputField.value, helpText, "Please Enter only Alphabets");
      }
    </script>
    <link rel="StyleSheet" href="test1.css" type="text/css"></link>
  </head>
  <body>
    <center>
      <font face="Arabic Transparent" size="6" color="Teal">4cUBeS College</font>
    </center>

    <br></br>

    <br></br>

    <form method="post" action="servlet.do" name="myform">
      <table border="1">
        <tr>
          <td>
            HallTicket: 
            <input type="text" name="hallticket" id="hallticket"
                   onblur="validateHallticket(this,document.getElementById('hallticket_help'))"></input>

            <span id="hallticket_help" class="helpcss"> </span>
          </td>
        </tr>

        <tr>
          <td>
            FirstName: 
            <input type="text" name="firstname" id="firstname"
                   onblur="validateNames(this,document.getElementById('firstname_help'))"></input>

            <span id="firstname_help" class="helpcss"> </span>
          </td>
          <td>
            LastName: 
            <input type="text" name="lastname" id="lastname"
                   onblur="validateNames(this,document.getElementById('lastname_help'))"></input>

            <span id="lastname_help" class="helpcss"> </span>
          </td>
        </tr>
      </table>
      <center>
        <input type="button" value="SUBMIT" onclick="validatForm(this.form)"></input>
      </center>
    </form>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:52:47.800

除了您的代码中已经发现的问题之外，还有一个问题。您的按钮提交输入标签是： `<input type="button" value="SUBMIT" onclick="validatForm(this.form)"></input>`

并且必须是： `<input type="submit" value="SUBMIT" onclick="validateForm(this.form)"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:09:33.787

这解决了很多问题

[演示](http://jsfiddle.net/mplungjan/Hx6Hc/)

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <script type="text/javascript">
function validateNonEmpty(inputField, helpTextId) {
  var helpText = document.getElementById(helpTextId);
  return validateRegex(/.+/, inputField.value, helpText, "please Enter a value");
}

function validateRegex(regex, input, helpText, helpMessage) {
  if (regex.test(input)) {
      if (helpText != null) {
        helpText.innerHTML = "";
      }    
      return true;
  }
  //Data is mismatched
  if (helpText != null) {
    helpText.innerHTML = helpMessage;
  }    
  return false;
}

function validateHallticket(inputField, helpText) {
  if (!validateNonEmpty(inputField, helpText)) {
    return false;
  }
  return validateRegex(/^\d{2}K91A\d{4}$/, inputField.value, helpText, "Enter valid Hallticket");
}

function validateNames(inputField, helpText) {
  // see that input data is non empty
  if (!validateNonEmpty(inputField, helpText)) {
    return false;
  }
  return validateRegex(/.+/, inputField.value, helpText, "Please Enter only Alphabets");
}

window.onload=function() {
  document.getElementById("myform").onsubmit=function() {

    if (validateNames(this['hallticket'], 'hallticket_help') &&
        validateNames(this['firstname'], 'firstname_help')  &&
        validateNames(this['lastname'], 'lastname_help')) {
      return true;
    }

    alert("Please Enter the Required Fields");
    return false; // cancel submit
  }
}
    </script>
    <link rel="StyleSheet" href="test1.css" type="text/css"></link>
  </head>
  <body>
    <center>
      <font face="Arabic Transparent" size="6" color="Teal">4cUBeS College</font>
    </center>

    <br></br>

    <br></br>

    <form method="post" action="servlet.do" name="myform" id="myform">
      <table border="1">
        <tr>
          <td>
            HallTicket: 
            <input type="text" name="hallticket" id="hallticket"
                   onblur="validateHallticket(this,'hallticket_help')" />

            <span id="hallticket_help" class="helpcss"> </span>
          </td>
        </tr>

        <tr>
          <td>
            FirstName: 
            <input type="text" name="firstname" id="firstname"
                   onblur="validateNames(this,'firstname_help')" />

            <span id="firstname_help" class="helpcss"> </span>
          </td>
          <td>
            LastName: 
            <input type="text" name="lastname" id="lastname"
                   onblur="validateNames(this,'lastname_help')" />

            <span id="lastname_help" class="helpcss"> </span>
          </td>
        </tr>
      </table>
      <center>
        <input type="submit" value="SUBMIT" />
      </center>
    </form>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:03:22.380

请检查您在 onclick 中调用的函数的拼写，其拼写错误为“validatForm”而不是“validateForm”

# objective-c - Objective-C - 仪器显示阵列泄漏，即使使用 ARC

> ID：14812430
> 
> 赞同：0
> 
> 时间：2013-02-11T12:57:24.620
> 
> 标签：objective-c, xcode, memory-leaks

下面的函数显示了 Instrument (Leak) - Xcode 中的一个泄漏，即使代码注释掉了，如下所示。

```
void function () {
    NSArray *devices = [AVCaptureDevice devices];

    // I have used devices here..but I commented to check leak.
    devices = nil;
} 
```

负责的图书馆是 AVFoundation。我正在使用ARC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:04:26.923

Instruments 不显示对象在哪里被泄露——它显示正在被泄露的对象是在哪里被**创建**的。

您可以做的是查看您如何管理内存`devices`并确保正确释放它。

奇怪的是它在 ARC 下显示出泄漏 - 因此查看一些相关代码以了解正在执行的操作会很有用。

# xcode - XCode 视图控制器未在 Do 循环中更新

> ID：14812441
> 
> 赞同：0
> 
> 时间：2013-02-11T12:58:04.977
> 
> 标签：xcode, loops

我有一个 do 循环，我想在 SWITCH 打开时每 1 秒执行一次命令。

当我没有 DO LOOP 时，代码一次可以正常工作。

但是，一旦我添加了 LOOP，视图控制器中的任何标签都不会更新，情节提要的后退按钮不起作用，并且 SWITCH 不会关闭。从本质上讲，DO LOOP 一直在循环，但屏幕上的任何内容都不起作用，我也无法退出。

我知道我做错了。但是，我现在不知道。任何想法将不胜感激。

我附上了让我陷入困境的代码。

谢谢，

```
 - (IBAction)roaming:(id)sender {
UISwitch *roamingswitch = (UISwitch *)sender;

BOOL isOn = roamingswitch.isOn;

if (isOn) {

    last=[NSDate date];

    while (isOn)
    {

        current = [NSDate date];

        interval = [current timeIntervalSinceDate:last];

    if (interval>10) {

    TheCommand.text=@"ON";

    [self Combo:sendcommand];

        last=current;

    }

    }

}

else
{
    TheCommand.text=@"OFF";

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:33:24.593

iOS 和 OSX 是*基于事件的系统*，你不能在主（UI）线程中使用这样的循环来做你想做的事情，否则你不允许*运行循环*运行并且事件停止被处理。

请参阅：[Mac 应用程序编程指南](http://developer.apple.com/library/mac/#documentation/General/Conceptual/MOSXAppProgrammingGuide/CoreAppDesign/CoreAppDesign.html)部分“应用程序的主事件循环驱动交互”。

您需要做的是设置[`NSTimer`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)一个每秒触发一次的计时器 ( )：

.h 文件：

```
@interface MyClass : NSView     // Or whatever the base class is
{
    NSTimer *_timer;
}

@end 
```

.m 文件：

```
@implementation MyClass

- (id)initWithFrame:(NSRect)frame   // Or whatever the designated initializier is for your class
{
    self = [super initInitWithFrame:frame];
    if (self != nil)
    {
        _timer = [NSTimer timerWithTimeInterval:1.0
                                         target:self
                                       selector:@selector(timerFired:)
                                       userInfo:nil
                                        repeats:YES];
    }
    return self;
}

- (void)dealloc
{
    [_timer invalidate];

    // If using MRR ONLY!
    [super dealloc];
}

- (void)timerFired:(NSTimer*)timer
{
    if (roamingswitch.isOn)
    {
        TheCommand.text=@"ON";
        [self Combo:sendcommand];
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-01T21:37:24.773

给你的处理器足够的时间来更新你的视图控制器并且不被其他进程打断。我在视图控制器更新信号之前和之后给它 0.5 秒。

```
 [[NSRunLoop mainRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:0.5]];

        self.CrashingTime.text = [NSString stringWithFormat: @"Crash Time =  %f ms", outputOfCrashTime];

        [[NSRunLoop mainRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:0.5]]; 
```

# .htaccess - 为链接中的任何数字创建通配符以在 htaccess 中阻止

> ID：14812443
> 
> 赞同：0
> 
> 时间：2013-02-11T12:58:09.750
> 
> 标签：.htaccess, wildcard

有人在我的网站上尝试一些不好的东西，我厌倦了阻止他正在使用的 IP。所以我想阻止他一起执行代码并将任何此类尝试重定向到本地服务器。为此，我在我的`.htaccess:`

`RewriteCond %{QUERY_STRING} ^id=http://213.246.61.125:2082/index.html$ [NC] RewriteRule page.php http://127.0.0.1/index.php? [NS,S,L]`

现在，事情是从许多不同的 IP 上尝试这个 index.html 也是托管的。所以我想制作一个通配符，这样无论 index.html 之前的 IP 是什么，尝试它的 IP 总是被重定向到他的本地服务器。我不知道该怎么做。我不能像在其他地方那样使用 IP 通配符，`(34.5.*.*)`因为这是一个链接。所以我假设我必须使用类似的东西：

`RewriteCond %{QUERY_STRING} ^id=http://([0-9]).([0-9]).([0-9]).([0-9]):2082/index.html$ [NC] RewriteRule page.php http://127.0.0.1/index.php? [NS,S,L]`

但是，以上是不正确的，但我不知道如何针对任何数字组合进行调整。也许有人可以帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:35:07.053

您应该在字符范围后加上一个加号，`[0-9]`因为您想匹配一个或多个字符。另请注意

*   正则表达式中的点应该用反斜杠引用。否则它们匹配任何字符。
*   你的括号`RewriteCond`是不必要的。
*   你的`NS`和`S`标志`RewriteRule`可能是不必要的。

我会尝试以下方法：

```
RewriteCond %{QUERY_STRING} ^id=http://[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+:2082/index\.html$ [NC]
RewriteRule page\.php http://127.0.0.1/index.php [L] 
```

# jquery - 根据 Jquery DataTable 中的值更改文本

> ID：14812445
> 
> 赞同：0
> 
> 时间：2013-02-11T12:58:22.973
> 
> 标签：jquery, datatables

在我的 Jquery Datatable 中，我正在渲染我的数据 -

```
<script language="javascript">

$(document).ready(function() {
$('#displayData').dataTable( {
    "sAjaxSource": '../controller/securityManager.cfc?method=listAllAdmins',
    "aoColumns": [
            { "mData": "ADMINNAME"},
            { "mData": "EMAIL" },
            { "mData": "LOGIN" },
            { "mData": "ACTIVE" },
            { "mData": "DATELASTLOGIN" ,

            "fnRender": function (oObj) {
                //alert(JSON.stringify(oObj));
                return "<a href='editState?id=" + oObj.aData[0] + "'>Edit</a>";
 }}

        ]
        });

} ); 
```

我的 HTML 是这样的——

```
<table cellpadding="0" cellspacing="0" border="0" class="display" id="displayData">
    <thead>
        <tr>
            <th align="left" style="font-size:12px">Name</th>
            <th align="left" style="font-size:12px">Email</th>
            <th align="left" style="font-size:12px">Login Name</th>
            <th align="left" style="font-size:12px">State</th>
            <th align="left" style="font-size:12px">Last Access Date</th>
        </tr>
    </thead>
    <tbody>
        <tr>

        </tr>
    </tbody>
</table> 
```

在第 4 列中，我想根据 Active 字段的值显示两个不同的“Active”或“Inactive”值。目前我只能显示 0 或 1。有没有办法使用数据表的配置来改变它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:07:43.500

我通过这样做得到了解决方案 -

```
$(document).ready(function() {
$('#displayData').dataTable( {
    "sAjaxSource": '../controller/securityManager.cfc?method=listAllAdmins',
    "aoColumns": [
            { "mData": "ADMINNAME"},
            { "mData": "EMAIL" },
            { "mData": "LOGIN" },
            { "mData": "ACTIVE" ,
                 "fnRender": function (oObj) {
                if(oObj.aData.ACTIVE == 0)
                    return "<a href='editState?id=" + oObj.aData.ADMINID + "'>Active</a>";
                else
                    return "<a href='editState?id=" + oObj.aData.ADMINID + "'>In-Active</a>";       
                }

            },
            { "mData": "DATELASTLOGIN" ,

                "fnRender": function (oObj) {
                    //alert(JSON.stringify(oObj.aData));
                    //alert(oObj.aData.ADMINID)
                    return "<a href='editState?id=" + oObj.aData.ADMINID + "'>Edit</a>";
                 }
            }

        ]
        });

} ); 
```

我只需要在数据表的 fnRender 中处理这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-12T17:27:25.467

哟可以用下一句：

```
$('#example').dataTable( {
   "columnDefs": [ {
   "targets": 0,
   "data": "download_link",
     "render": function ( data, type, row, meta ) {
        return '<a href="'+data+'">Download</a>';
     }
    } ]
 } ); 
```

# c++ - 一种使用 PTX 在 C++/CUDA 程序中计算浮点运算的方法

> ID：14812446
> 
> 赞同：0
> 
> 时间：2013-02-11T12:58:23.690
> 
> 标签：c++, cuda, ptx

我有一个有点大的 CUDA 应用程序，我需要计算获得的 GFLOP。我正在寻找一种简单且通用的方法来计算浮点运算的数量。

是否可以使用汇编语言中预定义的 fpo 列表从生成的 PTX 代码（如下所示）中计算浮点运算？根据代码，计数可以通用吗？例如，是否`add.s32 %r58, %r8, -2;`算作一次浮点运算？

例子：

```
BB3_2:
.loc 2 108 1
mov.u32         %r8, %r79;
setp.ge.s32     %p1, %r78, %r16;
setp.lt.s32     %p2, %r78, 0;
or.pred         %p3, %p2, %p1;
@%p3 bra        BB3_5;

add.s32         %r58, %r8, -2;
setp.lt.s32     %p4, %r58, 0;
setp.ge.s32     %p5, %r58, %r15;
or.pred         %p6, %p4, %p5;
@%p6 bra        BB3_5;

.loc 2 112 1
ld.global.u8    %rc1, [%rd17];
cvt.rn.f32.u8   %f11, %rc1;
mul.wide.u32    %rd12, %r80, 4;
add.s64         %rd13, %rd7, %rd12;
ld.local.f32    %f12, [%rd13];
fma.rn.f32      %f14, %f11, %f12, %f14;
.loc 2 113 1
add.f32         %f15, %f15, %f12; 
```

还是有更简单的计算 FPO 的方法，这是浪费时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T15:50:11.180

计算 FLOPS 的最简单方法是让 CUDA 分析器为您计算。通过选择`Achieved FLOPS`实验，可以得到如下图表：

![翻牌实验](../Images/f00cf5dde912f70cc6757eb149dd0b83.png)

该`Floating Point Operations`图表显示内核执行的每种类型的浮点运算的计数。

# sql - 如何使用最少的手动代码从 Dreamweaver 中的记录集输出 JSON？

> ID：14812450
> 
> 赞同：1
> 
> 时间：2013-02-11T12:58:42.597
> 
> 标签：sql, json, dreamweaver

我有一个相当困难的任务。我自己对许多“网络”语言都有经验，比如 JavaScript、PHP、Node.js、一点 Python/Django 等。

现在，问题是我要教一些学生如何将 Adob​​e Edge Animate 与数据库集成。所以我将使用 JSON 作为与服务器通信的方式。

问题是，他们对 SQL、HTML 或 PHP 一无所知，直到现在他们一直使用 Dreamweaver 制作网站。

所以最大的问题是，如何以尽可能少的手动编码将所谓的记录集的结果输出为 JSON？

# cakephp - 简单的一对多关系 cakePHP

> ID：14812451
> 
> 赞同：1
> 
> 时间：2013-02-11T12:58:47.710
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

所以有些类具有一对多的关系。事件类型：

```
var $hasMany = array(
    'Event' => array(
        'className' => 'Event',
        'foreignKey' => 'event_type_initials',
        'dependent' => false,
    )
); 
```

事件：

```
var $belongsTo = array(
    'EventType' => array(
        'className' => 'EventType',
        'foreignKey' => 'event_type_initials'
    )
); 
```

以前的关系是由 event_type_id，但现在它已更改为 initals。尝试访问数据时，查询中会出现问题。在以下查询结束时，您可以看到左连接是`Event`. `event_type_initials`= `EventType`。`id`，这没有意义。

```
SELECT `Event`.`id`, `Event`.`event_type_initials`, `Event`.`user_id`, `Event`.`details`, `Event`.`start`, `Event`.`hours`, `Event`.`minutes`, `Event`.`all_day`, `Event`.`active`, `Event`.`created`, `Event`.`modified`, `EventType`.`id`, `EventType`.`initials`, `EventType`.`name`, `EventType`.`address`, `EventType`.`email`, `EventType`.`phone`, `EventType`.`person`, `EventType`.`color` FROM `sunshine3`.`events` AS `Event` LEFT JOIN `sunshine3`.`event_types` AS `EventType` ON (**`Event`.`event_type_initials` = `EventType`.`id`**) WHERE `Event`.`id` = 30 
```

任何帮助都非常受欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:29:33.190

如果您指定一个 foreignKey，它将始终与相关表的 id 匹配。但是，您需要在此处使用条件：

```
// this is important for the correct left joins
var $belongsTo = array(
    'EventType' => array(
        'className' => 'EventType',
        'foreignKey' => false,
        'conditions' => array('Event.event_type_initials = EventType.initials')
    )
);

// for has many this is usually not necessary/possible (1:n), you can try though
var $hasMany = array(
    'Event' => array(
        'className' => 'Event',
        'foreignKey' => false,
        'conditions' => 'Event.event_type_initials = EventType.initials'
    )
); 
```

# javascript - MVC中javascript上的数据库操作

> ID：14812454
> 
> 赞同：0
> 
> 时间：2013-02-11T12:58:57.323
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4

我正在做一个 mvc 项目。我的视图中有一个按钮，它调用 Javascript 函数来打印数据。代码如下：

```
 <input type="button" class="btn_image" style="padding-top: 22px;" onclick="PrintDiv();"
        value="Print token" />

<head>
<script type="text/javascript">

    function PrintDiv() {
        var divToPrint = document.getElementById('printableArea');
        var popupWin = window.open('', '_blank', 'width=300,height=300');
        popupWin.document.open();
        popupWin.document.write('<html><body onload="window.print()">' + printableArea.innerHTML + '</html>');
        popupWin.document.close();
    }

</script>
</head> 
```

现在我想更新数据库中的记录，该记录已被打印。我怎样才能做到这一点？我可以在 Javascript 中执行存储过程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:04:15.950

一般来说，您永远不想让您的视图访问数据库。应该在基础设施级别授予这种访问权限。我通常不推荐这样做，但至少在控制器上进行数据库调用，然后将 IEnumerable 传递给表的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:08:06.950

**您可以使用 Jquery ajax 从客户端调用控制器中的 ActionResult。**

```
function PrintDiv() {
        var divToPrint = document.getElementById('printableArea');
        var popupWin = window.open('', '_blank', 'width=300,height=300');
        popupWin.document.open();
        popupWin.document.write('<html><body onload="window.print()">' + printableArea.innerHTML + '</html>');
        popupWin.document.close();
        UpdateDb();
    }

function UpdateDb();
{    
    $.ajax({
               type: 'POST',
                url: "@Url.Content("/Contrller/ActionResult/")",    
                data : {                          
                                 parameter1:value1,
                                 parameter1: value2
                          },           
                dataType: datatype,
                success:function(result)
                {
                   //Any thing needed to be done on success                  
                }
       });
} 
```

`Actionresult`现在编写逻辑以更新 in中的 Db `Controller`。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:09:03.367

```
$.post("/Home/GetState/", { data : $("#printablearea").val() }, function (response) {

                         your code..
                }); 
```

并在控制器动作中

```
public actionresult GetState(string data)
{
    datatable item = entity.datatable.contains(data);
    entity.entry(item)..State = EntityState.Modified;
    entity.savechanges():
} 
```

# rest - 国际化 REST 调用的 Grails 集成测试

> ID：14812458
> 
> 赞同：0
> 
> 时间：2013-02-11T12:59:06.410
> 
> 标签：rest, grails, internationalization, integration-testing

我正在尝试从 grails 控制器的集成测试中测试国际化。控制器已启用 REST 并返回 JSON 响应。

为了测试国际化，可以简单地在 URL 中给出 ?lang=es 并且相应的消息包在 grails 内部使用。

我在一个支持项目中，国际化已经按预期进行。当我发出 curl 请求时，我会收到正确语言的响应。

集成测试只是为了验证不同语言的特定响应。

我不确定如何从集成测试中请求任何语言。

我试过 ：

1.  response.locale = new Locale("es", "es") //不起作用
2.  controller.params.lang = "es" // 没用

我没有从[http://grails.org/doc/latest/guide/i18n.html#changeLocales](http://grails.org/doc/latest/guide/i18n.html#changingLocales)找到太多帮助。也不是来自其他问题，而是相关文章可能是[如何在 Grails 2.0 服务中为 i18n 注入消息源的单元或集成测试使用](https://stackoverflow.com/questions/9134520/how-to-unit-or-integration-test-use-of-injected-messagesource-for-i18n-in-grails)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:52:36.540

集成测试使用具有更改当前测试请求的语言环境的`GrailsMockHttpServletRequest`方法的类。`addPreferredLocale(Locale)`

通常我们通过以下方式获取请求`RequestContextHolder`：

```
def request = RequestContextHolder.currentRequestAttributes().request
request.addPreferredLocale(new Locale("pt","BR")) 
```

# memory-management - 测量 GWAN 中每个请求的脚本内存使用情况

> ID：14812466
> 
> 赞同：0
> 
> 时间：2013-02-11T12:59:27.993
> 
> 标签：memory-management, monitoring, g-wan

如何测量 gwan 应用程序的内存使用情况（每个请求）？用于 /csp 脚本和 /handlers 脚本消耗的内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:14:24.520

您可以使用 server_report 函数。

以[http://gwan.ch/source/report.c](http://gwan.ch/source/report.c)为例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:01:55.593

要测量 G-WAN 脚本（处理程序或 servlet）消耗的内存，您必须考虑两件事：

1.  代码大小（请参阅`gwan.log`将其与 MD5 校验和一起转储的文件）
2.  数据大小（取决于您的代码，因此只能在运行时报告）

正如 Paulo 建议的那样，您可以检查每个 malloc() / calloc() / strdup() 等在您的代码中所做的事情，但您会错过 G-WAN、系统或第三方库调用使用的任何内存。

工作线程堆栈也在需要时动态增长......所以，除非您知道自己在做什么，否则没有明显的方法可以精确检查任何给定脚本使用的内存量。

# javascript - ExternalInterface 在带有 Flash 11 的 AS3 中不起作用

> ID：14812467
> 
> 赞同：0
> 
> 时间：2013-02-11T12:59:35.250
> 
> 标签：javascript, actionscript-3, flash, externalinterface

我正在尝试创建一个按钮，该按钮将使用 javascript 和 actionscript 关闭 Flash 覆盖。我在许多网站上发现使用 ExternalInterface，但我似乎无法让它工作。有任何想法吗？

闪存作为：

```
import flash.external.ExternalInterface;

close_btn.addEventListener(MouseEvent.CLICK, clickHandlerButton);

function clickHandlerButton(e:MouseEvent):void{
        if(ExternalInterface.available) ExternalInterface.call("hideBanner","");
} 
```

Javascript函数：

```
<script>
    function hideBanner(){
        document.getElementById("banner").style.display = "none";
    }
</script> 
```

如果我向 MouseEvent 添加跟踪，则可以确认 ExternalInterface.available 返回 true。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:02:30.077

一旦我将它上传到我的服务器，它就可以工作，但不是通过将我的计算机上的 html 文件打开到 Google Chrome 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:06:30.800

对于对 ExternalInterface 的本地访问，您必须将 swf 路径添加到 Flash 可信路径，[这里](http://jstarrdewar.com/blog/2011/11/08/setting-up-a-trust-file-for-flash-player)是它的指南。

# email - Hudson 电子邮件扩展因“服务器和客户端均不支持身份验证机制”而失败

> ID：14812468
> 
> 赞同：1
> 
> 时间：2013-02-11T12:59:44.653
> 
> 标签：email, hudson

在将 Hudson 从 2 升级到 3 并在 Tomcat 中运行它之后，它的电子邮件扩展程序不再发送电子邮件并因错误而失败（即使“mechansims”一词中有错字:)）

```
ERROR: No authentication mechansims supported by both server and client
javax.mail.AuthenticationFailedException: No authentication mechansims supported by both server and client
    at com.sun.mail.smtp.SMTPTransport.authenticate(SMTPTransport.java:756)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:669)
    at javax.mail.Service.connect(Service.java:317)
    at hudson.tasks.Mailer$DescriptorImpl.send(Mailer.java:505)
    at hudson.tasks.Mailer$DescriptorImpl.send(Mailer.java:476)
    at hudson.tasks.MailSender.execute(MailSender.java:91)
    at hudson.tasks.Mailer.perform(Mailer.java:112)
    at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:34)
    at hudson.model.AbstractBuild$AbstractRunner.perform(AbstractBuild.java:646)
    at hudson.model.AbstractBuild$AbstractRunner.performAllBuildSteps(AbstractBuild.java:624)
    at hudson.model.AbstractBuild$AbstractRunner.performAllBuildSteps(AbstractBuild.java:600)
    at hudson.model.Build$RunnerImpl.post2(Build.java:163)
    at hudson.model.AbstractBuild$AbstractRunner.post(AbstractBuild.java:566)
    at hudson.model.Run.run(Run.java:1414)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:40)
    at hudson.model.ResourceController.execute(ResourceController.java:81)
    at hudson.model.Executor.run(Executor.java:137) 
```

它是插件的错误，还是有人知道问题可能出在哪里？我尝试在 Hudson 主配置页面中添加 SMTP 身份验证凭据来删除它 - 它没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:33:44.320

我相信这可能是 Hudson 3 核心中的一个错误。它可能与[http://www.eclipse.org/forums/index.php/t/356988/](http://www.eclipse.org/forums/index.php/t/356988/)有关。您能否将 hudson.war 中的 javax.mail jar 从 1.4.4 降级到 1.4，看看是否能解决问题？

谢谢，史蒂夫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T00:21:22.973

看看是不是跟TLS加密没关系，修改启动Hudson的java参数包括：-Dmail.smtp.starttls.enable=true

# jquery - jQuery ajax 在 ie8 上不起作用

> ID：14812469
> 
> 赞同：3
> 
> 时间：2013-02-11T12:59:45.950
> 
> 标签：jquery, internet-explorer-8

我有这个电话：

```
$.ajax({dataType: "json",
        url: '<url_here>',
        cache: false,
        success: function(data, textStatus, jqXHR ) {
            success(data, textStatus, jqXHR);
        }
}); 
```

这适用于那里的每个浏览器......除了IE :(（我正在测试版本8）从未调用成功函数，因此看起来函数（.ajax）没有正确执行（或根本没有）。任何人都知道 ie 8 上的 jquery ajax 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T16:59:18.920

好的，这些总是好的，一个回答自己的地方:)

问题是，看起来 IE 没有解析来自 ajax 站点的标题。因此，由于这是一个跨域请求，它允许它通过。因此，我必须在 IE 安全设​​置上激活“跨域访问数据源”。在其他浏览器上，只需添加标题 Access-Control-Allow-Origin: * 将允许跨站点脚本，而不是在 IE 上。

我必须添加到脚本中的另一件事是：jQuery.support.cors = true;

或者我会得到“没有交通工具”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:03:01.897

这是因为，我的默认 IE8 不支持 JSON。您需要在项目中包含[json2](https://github.com/douglascrockford/JSON-js)库。

# c# - 当 Windows 资源管理器打开给定文件夹时调用方法

> ID：14812472
> 
> 赞同：1
> 
> 时间：2013-02-11T12:59:50.513
> 
> 标签：c#, events, directory, windows-explorer

当用户在 Windows 资源管理器中打开文件夹时，我想执行一些 C# 方法。

怎么做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T03:26:33.757

我对此不确定，但这是我会做/尝试的，

有一个在登录时启动的 C# 程序 在登录时[打开 C# 应用程序，](http://www.codeproject.com/Tips/474092/Run-Csharp-application-on-Windows-startup-Windows)或者只是让您的程序以某种方式运行并使用[FileSystemWatcher 类](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher%28v=vs.90%29.aspx)，您可以使用 LastAccess 通知过滤器并执行您的 C# 代码。

```
 // Create a new FileSystemWatcher and set its properties.
    FileSystemWatcher watcher = new FileSystemWatcher();
    watcher.Path = "folder path";

     /* Watch for changes in LastAccess and LastWrite times, and
       the renaming of files or directories. */
    watcher.NotifyFilter = NotifyFilters.LastAccess;

    // add event handler 
```

希望这可以帮助。

# php - 如何使用 PHP 从外部服务器复制文件？

> ID：14812473
> 
> 赞同：1
> 
> 时间：2013-02-11T12:59:52.547
> 
> 标签：php, copy

我必须将 JPG 从外部服务器（例如 Facebook）复制到我的服务器。

最好的方法是什么？我虽然可能与`fread`/`fopen`等，但我不知道这是否是最好的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:05:43.530

您可以将 URL 与大多数文件系统功能（如`copy`）一起使用。

```
$url = "http://cdn.sstatic.net/stackoverflow/img/sprites.png";
$target = "/tmp/stackoverflow.png";
copy($url, $target); 
```

请注意，您需要[`allow_url_fopen`](http://php.net/manual/en/filesystem.configuration.php)启用 php.ini 设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:01:04.247

```
 $url = 'http://facebook.com/image.jpg';

 $img = '/my/folder/image.jpg';

 file_put_contents($img, file_get_contents($url)); 
```

# ios - RestKit 0.20.0-rc1 - POST 后重复对象

> ID：14812476
> 
> 赞同：1
> 
> 时间：2013-02-11T13:00:16.247
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, restkit

我在尝试在我的 iOS 应用程序和我的服务器之间为给定用户同步最喜欢的团队列表时遇到问题。事件流程如下：

1.  用户收藏了一个团队

2.  新的 favouriteTeam 对象被创建并保存到 Core Data：

    NSError *错误；[[self.currentUser managedObjectContext] save:&error]; [[RKManagedObjectStore defaultStore].persistentStoreManagedObjectContext save:&error];

3.  修改后的 favouriteTeams 数组被 POST 到服务器，并在服务器上加上时间戳，并与任何其他修改或最近添加的（由另一个设备）对象一起返回。

4.  我遇到的问题是发布的项目，因为它总是被返回，而不是被覆盖（基于标识属性）。返回的其他对象（无论是由另一个设备修改还是新创建的）都不会被复制......只是用户设备中新创建的设备。

这是我的请求/响应映射代码：

```
RKObjectManager *objectManager = [RKObjectManager sharedManager];
[objectManager setRequestSerializationMIMEType:RKMIMETypeJSON];
// POST Request Mapping
RKObjectMapping *favouriteTeamMapping = [RKObjectMapping requestMapping];
[favouriteTeamMapping addAttributeMappingsFromArray:@[@"uuid", @"teamName", @"displayOrder"]];
RKRequestDescriptor *favouriteTeamRequestDescriptor = [RKRequestDescriptor requestDescriptorWithMapping:favouriteTeamMapping objectClass:[FavouriteTeam class] rootKeyPath:@"favouriteTeams"];
[objectManager addRequestDescriptor:favouriteTeamRequestDescriptor];
// Response Mapping
RKEntityMapping *favouriteTeamResponseMapping = [RKEntityMapping mappingForEntityForName:@"FavouriteTeam" inManagedObjectStore:objectManager.managedObjectStore];
favouriteTeamResponseMapping.identificationAttributes = @[@"uuid"];
[favouriteTeamResponseMapping addAttributeMappingsFromArray:@[@"uuid", @"teamName", @"displayOrder", @"lastModified"]];
RKResponseDescriptor *favouriteTeamResponseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:favouriteTeamResponseMapping pathPattern:@"/api/favouriteteam/" keyPath:@"data.favouriteTeams" statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
[objectManager addResponseDescriptorsFromArray:@[favouriteTeamResponseDescriptor]];
// POST
[objectManager postObject:favTeamsArray path:@"/api/favouriteteam/" parameters:nil success:nil failure:nil]; 
```

我似乎无法弄清楚为什么在设置 IdentificationAttributes （favouriteDrug“uuid”属性）时会发生这种重复。Core Data 中的对象是相同的（甚至是相同的 uuid）。是什么导致了这种行为？

**注意：**这个问题也发布在 RestKit Google Groups [here 上。](https://groups.google.com/forum/?fromgroups=#!starred/restkit/cmNUdWrJOao)

谢谢！

**更新：**似乎这种重复不会在第一次被收藏时发生。以下任何对团队的收藏尝试都会导致此重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T17:58:38.433

我有一个类似的问题，虽然我无法真正确认这是否解决了您的问题，但无论如何都会在这里发布我的答案。

我的问题是第一个对象会被很好地创建，但此后 restkit 会将重复的对象保存在 coredata 中，所以这听起来像你看到的问题。

我通过以下方式创建对象的 post 调用： * 在 coredata 中创建一个空白对象并用我需要的任何属性填充它 * 使用 restkit API 对服务器进行 post 调用并传入新创建的对象

restkit 在后台所做的是获取响应，将其填充到我创建的新对象中，然后将其保存到 coredata 中，而无需事先检查是否有另一个具有相同唯一 ID 的对象。这就是为什么第一个对象创建很好，但随后的对象是重复的。

我解决它的方法实际上是将原始值作为参数传递给restkit post API调用，并将nil作为对象。在回复中，restkit 将首先查看 coredata 以查看该 ID 的对象是否存在并将更改与该对象合并，或创建一个新对象。

# django - contenttype.model_class() 是 NoneType

> ID：14812479
> 
> 赞同：0
> 
> 时间：2013-02-11T13:00:24.000
> 
> 标签：django, django-models, django-admin

我在 models.py 中有一个购物车应用程序：

```
def get_all_models():
    tup = []
    for ct in ContentType.objects.filter(app_label__in=['shoppingcart','products','productoptions']):
        if ct is not None:
            mclass = ct.model_class()
            if mclass is not None:
                tup.append((mclass.__module__+'.'+mclass.__name__,mclass.__name__))
    return tuple(tup)

class ConditionSet(models.Model):
    model_name      = models.CharField(max_length=50, choices = get_all_models()) 
    model_attribute = models.CharField(max_length=50)
    operator        = models.CharField(max_length=50, choices=OPERATORS)
    val             = models.CharField(max_length=50,null=True,blank=True)
    evaluation      = models.NullBooleanField(null=True, blank=True)
    def get_all_models():
        tup = []
        for ct in ContentType.objects.filter(app_label__in=['shoppingcart','products','productoptions']):
            if ct is not None:
                mclass = ct.model_class()
                if mclass is not None:
                    tup.append((mclass.__module__+'.'+mclass.__name__,mclass.__name__))
        return tuple(tup)
    def evaluate(self):
        app_label = str(self.model_name.split('.')[0])
        model_name = str(self.model_name.split('.')[2])
        model = get_model(app_label= app_label, model_name = model_name)
    def __str__(self):
        return self.model_attribute 
```

在 admin.py 我只注册了模型

我发现我的 def get_all_models() 产生两组不同的输出，当从 shell 运行时我有这个

> > > get_all_models() (('shoppingcart.models.Cart', 'Cart'), ('shoppingcart.models.CartItem', 'CartItem'), ('shoppingcart.models.CartRule', 'CartRule'), ('products. models.CasesAccessory', 'CasesAccessory'), ('productoptions.models.Coating', 'Coating'), ('shoppingcart.models.ConditionSet', 'ConditionSet'), ('products.models.Eyeglass', 'Eyeglass' ), ('products.models.GiftVoucher', 'GiftVoucher'), ('productoptions.models.Lens', 'Lens'), ('productoptions.models.Prescription', 'Prescription'), ('products.models. Readingglass', 'Readingglass'), ('products.models.Sunglass', 'Sunglass'), ('productoptions.models.Tint', 'Tint'), ('productoptions.模型.愿景'，'愿景'））

当它调用填充选择时，我失去了第一个选择，即第一个选项，即 conetenttype cart 将 model_class() 提供为 None，而在 shell 上工作时它找到了 model_class()？需要一些解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:59:33.620

当 Django 验证它的模型时，你的代码就会被执行。因此，`Cart`可能尚未经过验证，它的模型类是`None`.

我建议不要在模型定义中设置选项，我之前遇到过一些麻烦。相反，我建议稍后动态填充它们，例如当您实例化表单时。

# android - Android 操作系统无法识别方向变化

> ID：14812484
> 
> 赞同：0
> 
> 时间：2013-02-11T13:00:25.913
> 
> 标签：android, android-layout, android-orientation

我在 /res 目录中有以下文件夹，以支持不同的屏幕密度和方向。

```
/layout
/layout-land
/layout-small
/layout-small-land
/layout-large
/layout-large-land 
```

在上述 XML 中，不同之处在于组件之间的对齐方式。例如，纵向：

```
 <LinearLayout
        android:id="@+id/linearLayout5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/linearLayout3"
        android:layout_marginLeft="20dp"
        android:layout_toRightOf="@+id/linearLayout3" /> 
```

而在风景中，

```
 <LinearLayout
        android:id="@+id/linearLayout5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/linearLayout3"
        android:layout_marginLeft="60dp"        //widens the margin space
        android:layout_toRightOf="@+id/linearLayout3" /> 
```

但是，当方向改变时，将使用与肖像对应的 XML。

这是 AndroidManifest 代码片段。

```
 <activity
        android:name=".MyActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenSize" /> 
```

我在模拟器中使用 Android 2.2 和 3.7" 屏幕测试了该应用程序。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:03:13.650

> 但是，当方向改变时，将使用与肖像对应的 XML。

那是因为这就是你告诉 Android 要做的事情，通过：

`android:configChanges="keyboard|keyboardHidden|orientation|screenSize`

删除该属性，Android 将销毁并重新创建您的活动，应用您的新布局资源。

有了这个属性，*你的*工作就是以某种方式加载那些新的布局资源，在`onConfigurationChanged()`.

# sql - 输入两个日期和记录显示每天计数明智

> ID：14812490
> 
> 赞同：0
> 
> 时间：2013-02-11T13:00:33.153
> 
> 标签：sql, sql-server, sql-server-2008, pivot

请解决我的表测试

```
标识整数
Emp_ID 整数
准时日期时间

```

从测试中选择 *

```
Id Emp_ID 准时
1 1 2013-02-11 2:14:25.387  
2 2 2013-02-11 14:14:25.387
1 1 2013-02-11 20:14:25.387
3 3 2013-02-13 10:14:25.387
4 2 2013-02-13 10:14:25.387
5 1 2013-02-13 10:14:25.387
6 1 2013-02-14 11:14:25.387

```

我的要求这个

用户输入两个日期并记录显示每天计数明智

只记录

日期 1=11/2/2013 日期 2=13/2/2013

```
Emp_ID 2013 年 11 月 2 日 2013 年 12 月 2 日 2013 年 13 月 2 日
1 2 0 1
2 1 0 1
3 0 0 1

```

谢谢

* * *

谢谢

但是这个 tbl_emp

Emp_ID int Emp_name varchar

```
| EMP_ID | 2013-02-11 | 2013-02-12 | 2013-02-13 |
-------------------------------------------------
| 1 | 2 | 0 | 1 |
| 2 | 1 | 0 | 1 |
| 3 | 0 | 0 | 1 |
| 4 | 0 | 0 | 0 |

```

Emp_ID 4 未插入测试表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:04:55.440

这种类型的数据转换称为`PIVOT`. 从 SQL Server 2005 开始，有一个函数可以为您执行此操作。

如果您提前知道这些值，则可以对查询进行硬编码，如下所示：

```
select *
from
(
  select id,
    [Emp_ID], 
    cast([ontime] as date) ontime
  from test
) src
pivot
(
  count(id)
  for ontime in ([2013-02-11], [2013-02-12], [2013-02-13])
) piv 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/ba823/7)。

如果要转换的列数未知，则需要使用动态 SQL。这可以通过使用`WHERE`子句进一步过滤以仅查找某些日期：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(cast([ontime] as date)) 
                    from test
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT emp_id,' + @cols + ' from 
             (
                select Emp_ID pivId,
                  [Emp_ID], 
                  cast([ontime] as date) ontime
                from test
            ) x
            pivot 
            (
                count(pivId)
                for ontime in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/ba823/15)。

如果你想保证你会返回你想要的日期，那么你可以先生成一个日期列表。因此，您的整个动态 SQL 脚本将是：

```
declare @startdate datetime
declare @enddate datetime

set @startdate = '2013-02-11'
set @enddate = '2013-02-13'

;with cte (startdate) as
(
  select @startdate
  union all
  select DATEADD(dd, 1, startdate)
  from cte
  where DATEADD(dd, 1, startdate) <= @enddate
)
select *
into #tempDates
from cte;    

DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(cast(startdate as date)) 
                    from #tempDates
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT emp_id,' + @cols + ' from 
             (
                select Emp_ID pivId,
                  [Emp_ID], 
                  cast([ontime] as date) ontime
                from test
            ) x
            pivot 
            (
                count(pivId)
                for ontime in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/84ad0/4)。这将返回结果：

```
| EMP_ID | 2013-02-11 | 2013-02-12 | 2013-02-13 |
-------------------------------------------------
|      1 |          2 |          0 |          1 |
|      2 |          1 |          0 |          1 |
|      3 |          0 |          0 |          1 | 
```

编辑#1，如果您想包括所有员工，那么您将需要在另一个表上使用 JOIN 并且您的代码将与此类似：

```
declare @startdate datetime
declare @enddate datetime

set @startdate = '2013-02-11'
set @enddate = '2013-02-13'

;with cte (startdate) as
(
  select @startdate
  union all
  select DATEADD(dd, 1, startdate)
  from cte
  where DATEADD(dd, 1, startdate) <= @enddate
)
select *
into #tempDates
from cte;    

DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(cast(startdate as date)) 
                    from #tempDates
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT emp_id, Emp_name,' + @cols + ' from 
             (
                select e.Emp_ID pivId,
                  e.[Emp_ID], 
                  e.Emp_name,
                  cast([ontime] as date) ontime
                from Emp_Table e
                left join test t
                  on e.emp_id = t.emp_id
            ) x
            pivot 
            (
                count(pivId)
                for ontime in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/7e561/5)

# java - 为什么 java.util.Calendar.DATE 代表“月中的一天”？

> ID：14812494
> 
> 赞同：0
> 
> 时间：2013-02-11T13:00:47.147
> 
> 标签：java, calendar

好吧，我知道它代表一个月中的一天，但我的问题是为什么？为什么不用`Calendar.DAY`来表示呢？是因为变量命名不当还是有根本原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:02:57.970

还有其他变量：

*   `DAY_OF_MONTH`
*   `DAY_OF_WEEK`
*   `DAY_OF_WEEK_IN_MONTH`
*   `DAY_OF_YEAR`

Javadocs 用于`DATE`：

> get 和 set 的字段编号，指示月份中的哪一天。**这是 DAY_OF_MONTH 的同义词。**该月的第一天的值为 1。

我对为什么`DATE`是同义词的猜测是这`DAY_OF_MONTH`是最常用的字段，因此使用`DATE`.

此外，“日期”的定义是“由数字指定的月份或年份的日期”。（根据谷歌）

# regex - grep 查找日志文件中不包含某个单词的行

> ID：14812497
> 
> 赞同：1
> 
> 时间：2013-02-11T13:00:51.110
> 
> 标签：regex, logging, grep

我正在尝试分析日志文件。我正在寻找可能满足以下要求的正则表达式：

```
LOG: https://localhost/a
LOG: https://remotehost/x
LOG: https://localhost/b
LOG: https://localhost/c
LOG: https://remotehost/a 
```

上面是一个日志文件的例子。**问题：**我怎样才能通过日志文件 grep，这样我只得到不包含的行：

```
https://localhost 
```

结果应该是：

```
LOG: https://remotehost/x
LOG: https://remotehost/a 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T13:01:56.977

采用`grep -v <word> <filename>`

从`grep`手册（FreeBSD）：

```
-v, --invert-match
    Invert the sense of matching, to select non-matching lines. 
```

# html5-video - HTML5 视频标签，从 url 播放视频但不在本地播放

> ID：14812499
> 
> 赞同：1
> 
> 时间：2013-02-11T13:00:52.140
> 
> 标签：html5-video

好的，我阅读了这篇[博](http://www.broken-links.com/2010/07/08/making-html5-video-work-on-android-phones/#comment-80315)文并尝试在我的 Iphone safari 浏览器上播放视频。当视频的视频 src 指向视频在线 url 时，它可以工作：

[http://broken-links.com/tests/media/BigBuck.m4v](http://broken-links.com/tests/media/BigBuck.m4v)

但是，一旦我尝试从本地目录播放它，它就不起作用了！！

```
<video id="video" autobuffer height="240" width="360">
    <source src="http://broken-links.com/tests/media/BigBuck.m4v" />
</video>

<video id="video" autobuffer height="240" width="360">
    <source src="media/video/BigBuck.m4v" />
</video> 
```

我的意思是相同的视频，我下载了它！它适用于我的计算机浏览器的两种情况。

为什么会发生这种情况？

![在此处输入图像描述](../Images/2ed7c18aa42194d720f6c50e8c3c57f9.png)

# android - java.lang.OutOfMemoryError 即使在 try-catch 块中？

> ID：14812508
> 
> 赞同：5
> 
> 时间：2013-02-11T13:01:23.903
> 
> 标签：android, bitmap, out-of-memory

**我的应用程序崩溃，在 logcat 中显示：**

```
java.lang.OutOfMemoryError: (Heap Size=39047KB, Allocated=19932KB)
        at android.graphics.BitmapFactory.nativeDecodeFile(Native Method)
        at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:373)
        at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:443)
        at com.mApp.mobileapp.mActivity.onActivityResult(mActivity.java:196)
        at android.support.v4.app.FragmentActivity.onActivityResult(FragmentActivity.java:153)
        at android.app.Activity.dispatchActivityResult(Activity.java:4752)
        at android.app.ActivityThread.deliverResults(ActivityThread.java:3449)
        at android.app.ActivityThread.handleSendResult(ActivityThread.java:3503)
        at android.app.ActivityThread.access$1100(ActivityThread.java:144)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1320)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:156)
        at android.app.ActivityThread.main(ActivityThread.java:5109)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:991)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:758)
        at dalvik.system.NativeStart.main(Native Method) 
```

**运行此代码时：**

```
String selectedImagePath = data.getStringExtra("imageByteCode");
try {
    File imageFile = new File(selectedImagePath);
    Bitmap bitmap = BitmapFactory.decodeFile(imageFile
        .getAbsolutePath());//line 196
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
    base64code = selectedImagePath;
    mImage.setImageBitmap(bitmap);
    } catch (Exception e) {
    } 
```

自从我抓住它以来，我从没想过它会使应用程序崩溃。`selectedImagePath`是所选图像在 SD 卡上的路径，不会超过**3m.b**但**Heap Size=39047KB, Allocated=19932KB** ??

谢谢你

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T13:17:54.330

放在**应用程序**标签`android:largeHeap="true"`下的清单文件中。

 **largeHeap告诉**虚拟**机给你更多的内存，这样你就可以管理大的位图和字符串。 **LargeHeap**在 api 12+ 中工作。

如果你想用 try/catch 块捕获错误，你需要使用

```
try
        {

        }catch (OutOfMemoryError e) {
            // TODO: handle exception
        } 
```

如果您在 Android Studio 中构建项目时遇到此问题

```
Error:Uncaught translation error: java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: GC overhead limit exceeded 
```

添加你的**build.gradle**文件

```
dexOptions {
    javaMaxHeapSize "4g"
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-11T13:08:11.023

你没有抓住它。`OutOfMemoryError`源自`Error`，而不是源自`Exception`。这是`Error`因为通常应用程序不应该捕获它，您的应用程序几乎无法恢复。**

# python - Python - 在不中断循环/函数的情况下打印一个值

> ID：14812510
> 
> 赞同：0
> 
> 时间：2013-02-11T13:01:40.200
> 
> 标签：python, search, recursion, python-2.7, interrupt-handling

在 Windows 7 上使用 Python 2.7。

我有一个递归函数，可以在路径中查找文件，也可以在子文件夹中查找。

**我的问题：**
在长时间搜索期间，我希望看到`retval`on的值`KeyboardInterrupt`。
但是代码在 上引发错误`KeyboardInterrupt`，因为它中断了“更深”的函数调用/运行。

**我的问题：**
有没有办法不中断循环，但仍然打印值，
或者
另一种方法来做同样的事情（不是使用`KeyboardInterrupt`而是其他的东西）

**我的代码：**

```
import os

def search(path,filename):
    try:
        global found
        folders = []
        retval = []

        try:    
            for item in os.listdir(path):
                if not os.path.isfile(os.path.join(path, item)):
                    folders.append(os.path.join(path, item))
                else:
                    if item == filename:
                        found += 1
                        retval.append(os.path.join(path, item))
        except WindowsError,e:
            print str(e)[10:]

        for folder in folders:
            retval += search(folder,filename)
        return retval
    except KeyboardInterrupt:
        print retval

found = 0
path = 'C:\\'
filename = 'test.txt'
print search(path,filename) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:07:16.887

您可以`KeyboardInterrupt`在层次结构中添加处理程序：

```
for folder in folders:
        try:
             retval += search(folder,filename)
        except KeyboardInterrupt:
               print retval
return retval 
```

你可以测试一下，虽然我不太确定它是如何在你所拥有的循环中处理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:08:55.597

你需要保留一个更全局的 retval 副本，我会使用函数的一个属性，并在你有一个适合你的 retval 时分配给它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T13:18:26.577

我不确定这如何或是否可以在 Windows 上工作，但在 unix 下，您可以执行以下操作：

```
import signal
import sys

count = 0

def handler(signum,frame):
    global count
    print "Value of 'i' is",i
    count += 1
    if count >= 2:
        sys.exit(0)

signal.signal(signal.SIGINT,handler)
i = 0
while True:
    i += 1 
```

在这里，我在 ctrl-C 被捕获（两次）后退出程序，因为我没有任何其他退出程序的好方法。

此处使用全局数据仅用于演示目的——在野外，我会使用一个类并将实例方法传递给信号处理程序，以维护调用之间的状态。-- 例如，类似：

```
import signal

class Reporter(object):
    def __init__(self):
        self.retval = []

    def handler(self,signum,frame):
        print self.retval

r = Reporter()
signal.signal(signal.SIGINT,r.handler) 
```

`self.retval`然后您可以在进入/退出函数时重新绑定：

```
import os

def search(path,filename):
    global found
    folders = []
    retval = []
    r.retval = retval #<--- Line added

    try:    
        for item in os.listdir(path):
            if not os.path.isfile(os.path.join(path, item)):
                folders.append(os.path.join(path, item))
            else:
                if item == filename:
                    found += 1
                    retval.append(os.path.join(path, item))
    except WindowsError,e:
        print str(e)[10:]

    for folder in folders:
        retval += search(folder,filename)
        r.retval = retval   #<---- Line added
    return retval

found = 0
path = 'C:\\'
filename = 'test.txt'
print search(path,filename) 
```

我想我更喜欢使用非递归解决方案`os.walk`：

```
import os

def search(path,filename):
    retval = []
    r.retval = retval

    for (dirpath, dirnames, filenames) in os.walk(path):
         retval.extend(os.path.join(path,dirpath,item) for item in filenames if item == filename)
    return retval

path = 'C:\\'
filename = 'test.txt'
print search(path,filename) 
```

# actionscript-3 - Flash 1071 错误，需要定义关键字

> ID：14812511
> 
> 赞同：0
> 
> 时间：2013-02-11T13:01:40.853
> 
> 标签：actionscript-3, air, compilation, flash-cs6, gsap

尝试使用 GreenSock 在 Flash AS3、AIR 3.2 for iOS 中使其工作。我尝试将其定义为变量、函数等，但无济于事。网上一搜一无所获。

代码行出现以下错误`TweenMax tween = TweenMax.to(textOne, 14, {x:xScreenPosEnd, ease:SlowMo.ease.config(1, 0), repeat:-1});`：

1071：语法错误：在属性 TweenMax 之后需要一个定义关键字（例如函数），而不是 tween。
1084：语法错误：在左大括号之前需要右大括号。
1084: 语法错误：在 rightparen 之前需要标识符。

```
var middle:Boolean = false;

public function run():void {
    TweenMax tween = TweenMax.to(textOne, 14, {x:xScreenPosEnd, ease:SlowMo.ease.config(1, 0), repeat:-1});
    tween.addEventListener(TweenEvent.UPDATE, updateListener);
    tween.addEventListener(TweenEvent.REPEAT, repeatListener);
}

function updateListener(e:TweenEvent):void {
    if(tween.currentProgress > 0.5 && middle == false)
    {
        TweenMax.to(textOne, 7, {ease:SlowMo.ease.config(1, 0), repeat:-1, autoAlpha:0});
        middle = true;
    }
}

function repeatListener(e:TweenEvent):void {
    textOne.alpha = 1.0;
    middle = false;
} 
```

编辑：错误行已替换为出现的`var tween:TweenMax = TweenMax.to(textOne, 14, {x:xScreenPosEnd, ease:SlowMo.ease.config(1, 0), repeat:-1});`
进一步错误是：
1120：访问未定义的属性 TweenMax。
1046：未找到类型或不是编译时常量：TweenMax。
1120：访问未定义的属性补间。
1120：未定义属性中间的访问。

我的 GreenSock 进口如下：

```
import com.greensock.easing.*;
import com.greensock.plugins.*;
import com.greensock.events.TweenEvent; 
```

甚至尝试过`import com.greensock.*;`

编辑：添加该行`import com.greensock.TweenMax;`已删除错误：
1120：未定义属性 TweenMax 的访问。
1046：未找到类型或不是编译时常量：TweenMax。

其他两个错误仍然存​​在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:21:58.193

@Vesper 是绝对正确的。

```
var tween:TweenMax = TweenMax.to(...) 
```

As3 使用 name:Type 表示法。至于您的进一步错误，它们可能来自不正确地引用greensock代码，但它们是朝着正确方向迈出的一步。请在编辑中发布它们。

好吧，让我们来看看 ：

```
private var _middle:Boolean = false;
private var _tween:TweenMax;

public function run():void {
    _tween = TweenMax.to(textOne, 14, {x:xScreenPosEnd, ease:SlowMo.ease.config(1, 0), repeat:-1});
    _tween.addEventListener(TweenEvent.UPDATE, updateListener);
    _tween.addEventListener(TweenEvent.REPEAT, repeatListener);
}

private function updateListener(e:TweenEvent):void {
    if(_tween.totalProgress() > 0.5 && _middle == false) {
        TweenMax.to(textOne, 7, {ease:SlowMo.ease.config(1, 0), repeat:-1, autoAlpha:0});
        _middle = true;
    }
}

private function repeatListener(e:TweenEvent):void {
    textOne.alpha = 1.0;
    _middle = false;
} 
```

我不确定功能性，但如果`textOne`实际存在，这段代码不应该抛出错误。

# android - 有返回值的函数使用 AlertDialog

> ID：14812512
> 
> 赞同：0
> 
> 时间：2013-02-11T13:01:43.890
> 
> 标签：android, asynchronous

我正在从一个接口（我无法修改）覆盖一个函数，比方说

```
public abstract int getResult(); 
```

在这个函数中，我想使用 AlertDialog 询问用户结果应该是什么。所以我的实现应该是这样的：

```
public int getResult() {
    int result;

    DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            switch (which){
            case DialogInterface.BUTTON_POSITIVE:
                result = 1;
                break;

            case DialogInterface.BUTTON_NEGATIVE:
                result = 2;
                break;
            }
        }
    };

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("What is the result?").setPositiveButton("1", dialogClickListener)
        .setNegativeButton("2", dialogClickListener).show();

    return result;
} 
```

显然，由于 AlertDialog 的异步特性，这将不起作用。处理这种情况的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:22:44.577

您必须仅在 UI 线程上运行此代码，例如：

```
runOnUiThread(new Runnable() {
        public void run() {
            getResult();
        }
    }); 
```

或者

```
 public int getResult(){
       runOnUiThread(new Runnable() {
        public void run() {
            // your code
        }
    });
 } 
```

# java - 尝试使用 Spring 登录

> ID：14812514
> 
> 赞同：0
> 
> 时间：2013-02-11T13:01:47.037
> 
> 标签：java, html, spring, authentication, login

所以我们正在为我们的项目进行登录。我们遇到的问题是我们只在参数中得到 null 而不是我们输入的实际值。有人知道为什么吗？

控制器代码：

```
@RequestMapping(value = "/user/login",method = RequestMethod.POST)
public String logIn(@ModelAttribute("user") User user) {

 //Random code here

 return "redirect:/general/index.html";

} 
```

看法：

```
<form:form id="header_login_form" method="POST"  ModelAttribute="user" action="/ProjectTeamF-1.0/user/login.html">
    <input path="username"class="input" placeholder="Email" />
    <input path="password" class="input" placeholder="Password" />
    <label class="checkbox">
    <input type="checkbox"> Aangemeld blijven</label>
    <button type="submit" class="btn">Aanmelden</button>
</form:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:57:28.247

您需要使用标签`<form:input>`而不是`<input>`为了让 Spring 绑定`user`ModelAttribute。并替换`ModelAttribute`为`commandName`：

```
<form:form id="header_login_form" method="POST"  commandName="user" action="/ProjectTeamF-1.0/user/login.html">
    <form:input path="username"class="input" placeholder="Email" />
    <form:input path="password" class="input" placeholder="Password" />
    <label class="checkbox">
    <input type="checkbox"> Aangemeld blijven</label>
    <button type="submit" class="btn">Aanmelden</button>
</form:form> 
```

# python - 使用 Python 帮助抛出 SEGFAULT

> ID：14812520
> 
> 赞同：2
> 
> 时间：2013-02-11T13:02:02.407
> 
> 标签：python, segmentation-fault

在使用 Python 帮助时，我输入了模块并收到以下错误：

```
help>   modules

Please wait a moment while I gather a list of all available modules...

/usr/lib/python2.7/dist-packages/gobject/constants.py:24: Warning: g_boxed_type_register_static: assertion `g_type_from_name (name) == 0' failed
  import gobject._gobject
/usr/lib/python2.7/dist-packages/gtk-2.0/gtk/__init__.py:40: Warning: g_boxed_type_register_static: assertion `g_type_from_name (name) == 0' failed
  from gtk import _gtk

** (python:12351): CRITICAL **: pyg_register_boxed: assertion `boxed_type != 0' failed
/usr/lib/python2.7/dist-packages/gtk-2.0/gtk/__init__.py:40: Warning: cannot register existing type `GdkDevice'
  from gtk import _gtk
/usr/lib/python2.7/dist-packages/gtk-2.0/gtk/__init__.py:40: Warning: g_type_get_qdata: assertion `node != NULL' failed
  from gtk import _gtk
Segmentation fault (core dumped) 
```

另见：[https ://bugs.launchpad.net/ubuntu/+source/python2.7/+bug/896836](https://bugs.launchpad.net/ubuntu/+source/python2.7/+bug/896836)

如何解决或解决此问题并获得我想要的帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:28:06.690

这种“模块列表”（`pydoc -k`也）需要将所有可用的东西导入一个进程，这可能会导致各种问题。不要那样做。

另见[http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=697402](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=697402)

# .net - SQL Server十进制到varbinary的算法模拟

> ID：14812528
> 
> 赞同：2
> 
> 时间：2013-02-11T13:02:31.743
> 
> 标签：.net, sql-server, casting, decimal, varbinary

我们的 Sql Server DB 有一些 TSQL 逻辑，可以将**大量**数据打包成`decimal(19,6)`一个大`varbinary(max)`数据 - 它有助于减少 DB 的大小，而不是数千行，我们只有一行。在 TSQL 中，每个`decimal(19,6)`都`varbinary(12)`通过简单的`cast as varbinary(12)`. 现在，TSQL 使用游标（可能效率低下......）来完成这样的工作，而且速度很慢。我们的 DBA 建议使用 .NET CLR 函数会快得多。

我有使用纯十进制值获取 XML 的 C# 方法。我现在陷入了如何模拟 SQL Server 十进制值的内部表示的问题。

到目前为止，我所拥有的是：

```
DECLARE @x decimal(19,6) 
SELECT @x = 0
SELECT CAST(@x AS VARBINARY(12))
-- 0x13 06 00 01 00000000

SELECT @x = 1
SELECT CAST(@x AS VARBINARY(12))
--0x13 06 00 01 40420F00

SELECT @x = -1
SELECT CAST(@x AS VARBINARY(12))
--0x13 06 00 00 40420F00

SELECT @x = 1.1
SELECT CAST(@x AS VARBINARY(12))
--0x13 06 00 01 E0C81000

SELECT @x = 2
SELECT CAST(@x AS VARBINARY(12))
--0x13 06 00 01 80841E00 
```

好的，13 - 是 19

06 - 是 6 即 19,6

00 - ??

00 或 01 显然是符号

AND 80841E00 是 40420F00 的两倍。

十进制是如何存储的，内部表示版本是特定的（因为我没能成功地用谷歌搜索它）？

PS 就个人而言，我认为在 C# 中做这样的事情是个坏主意

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:48:55.097

没能弄清楚。我决定稍微改变一下战术。我把`decimal`它`bigint`乘以百万。然后除以百万解压。`bigint`以清晰易懂的方式存储 - 就像在 .NET 中一样。

# maven-2 - 在 Maven 中创建一个版本控制的 jar

> ID：14812538
> 
> 赞同：1
> 
> 时间：2013-02-11T13:02:50.037
> 
> 标签：maven-2, maven-scm

我想创建一个 maven 目标，它将创建版本化的 jar，就像我第一次创建 jar 时它将创建一个版本为 1.0 的 jar，然后第二次创建一个版本为 1.1 然后 1.2 的 jar，依此类推......意味着如果最新的 jar 版本是 1.2 那么下次我构建它时，它将创建一个版本为 1.3 的 jar。是否可以？

或者我需要在每次构建 jar 时为 jar 提供要创建的版本。或者我需要创建一个 Maven 目标来完成这一切，这可能吗？如果对此有一些解决方案，请指导我。

**更新：**

根据以下答案，我使用了带有时间戳的 buildnumber-maven-plugin 来创建带有时间戳的构建，它按预期工作，但是当我尝试将修订号与构建一起使用时，它会抛出异常：

```
can not get revision from SCM repositoty ,No provider git 
```

我的 pom.xml 包括：

```
 <scm>

    <connection>scm:git:git://github.com/user/app.git</connection>
    <developerConnection>scm:git:git@github.com:user/app.git</developerConnection>
    <url>https://github.com/user/app.git</url>
</scm> 
```

是否需要任何插件，因为我刚刚包含了详细信息和内部版本号插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:15:54.020

[maven-release-plugin](http://maven.apache.org/maven-release/maven-release-plugin/)可以帮助您构建工件的新版本（并自动递增`<version>`.

但是，我不确定这是你需要的，因为在每个版本上创建一个新版本是很不寻常的。

因此，我建议您使用[maven-buildnumber-plugin](http://mojo.codehaus.org/buildnumber-maven-plugin/usage.html)，它允许您附加诸如内部版本号（或工件名称的时间戳）之类的内容。

# asp.net - 编辑对象时如何在 MVC 4 中为对象 ID 提供安全性？

> ID：14812543
> 
> 赞同：1
> 
> 时间：2013-02-11T13:03:05.533
> 
> 标签：asp.net, asp.net-mvc, validation, post

在站点中，当用户编辑自己的信息时，我会做`hidden`他的 ID。但是，我在这个链接中看到它是有风险的：[恶意黑客可以更改隐藏的](https://stackoverflow.com/questions/8313390/could-a-malicious-hacker-alter-a-hidden-post-variable). 第二种方式，我认为将当前登录用户的 ID 保存在 cookie 中。任何人都可以更改 cookie 中的 ID 值并编辑其他用户的信息吗？

如果是的话，你能告诉我什么方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:13:55.057

您每次都必须使用您的身份验证机制。如果您已正确实现它并且始终从那里检索用户 ID 而不是发布的表单值，您不必担心它。

大多数网站都使用[表单身份验证](https://stackoverflow.com/q/549/205859)，并且一些 ASP.NET MVC 项目模板带有现成的实现。如果您不需要自定义实现，那么使用它们会更安全。

# mysql - 在查询中将日期添加到 dateTime

> ID：14812549
> 
> 赞同：1
> 
> 时间：2013-02-11T13:03:37.683
> 
> 标签：mysql

我有一个包含 n 条记录的表，每条记录都有两个字段`startDate`，`day`我想选择如果我将日期添加到 startDate 的记录，结果是 >= DateTime.Now

我可以用查询来做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:06:13.753

```
 SELECT * FROM my_table WHERE startdate + INTERVAL day DAY >= NOW(); 
```

参见 juergen d 的小提琴：sqlfiddle.com/#!2/eeb77/1

# jquery - jquery 库（Galleria）中每个特定图像的社交媒体共享按钮

> ID：14812550
> 
> 赞同：1
> 
> 时间：2013-02-11T13:03:40.820
> 
> 标签：jquery, image, share, galleria, caption

我正在使用[Galleria](http://galleria.io)创建一个摄影网站。我想将[Sharethis](http://sharethis.com)中的社交媒体分享按钮添加到每张图片，以便观众可以分享特定图片而不是画廊链接。

我正在使用 Galleria History 插件为每张图片提供一个唯一的 URL，该 URL 可用于手动发布链接，但是当我在主画廊页面上添加共享按钮时，共享链接到最后一个页面的 URL神清气爽。前。如果我在 page.html#/3 刷新/进入图库，然后导航到 page.html#/6 并尝试共享该图像，则共享的 URL 仍然是 page.html#/3

我已经尝试将共享按钮添加到图像标题中，希望由于标题链接到单个图像，共享按钮也将链接到它们关联的图像。尽管标题文本会显示，但大多数按钮不会显示。两次，共享按钮确实显示了，但是当我刷新页面以检查它们是否仍然出现时，它们消失了并且不会再次显示，尽管我没有对代码进行任何更改。

是否应该以这种方式将共享按钮添加到标题中，如果是这样，我可能会出错？代码工作了两次但之后没有工作是否有原因？

我在头上有这个 ShareThis 代码：

```
<script type="text/javascript">var switchTo5x=true;</script>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "myID", doNotHash: false, doNotCopy: false, hashAddressBar: true});</script> 
```

这是我用来尝试在图片标题中添加 Google+ 按钮的代码（这工作了两次，此后一直没有这样做）：

```
<a href="photos/03.jpg">
<img src="thumbs/03.jpg",data-description=
"<a href=<span class='st_googleplus'><displayText='Google +'></span></a>"> 
```

如果有更好的解决方案来共享单个图像，那也将受到欢迎。这些按钮不需要出现在标题中，这只是我希望可行的解决方案。

我是一名摄影师而不是程序员，虽然我为自己做了几个网站，但我的知识存在巨大差距。非常感谢以相对简单的语言提供的任何帮助。谢谢。

# winapi - CS_DROPSHADOW 窗口样式不起作用

> ID：14812551
> 
> 赞同：1
> 
> 时间：2013-02-11T13:03:52.450
> 
> 标签：winapi, window-style

我用 CS_DROPSHADOW 样式创建了一个子窗口，但不显示阴影。
我试图打电话`SystemParametersInfo(SPI_SETDROPSHADOW, 0, (PVOID) TRUE, 0);`，但它也没有帮助。
有人可以向我解释有什么问题吗？

```
 WNDCLASSEX wcex;

    HBRUSH bgBrush = CreateSolidBrush(RGB(171,181,201));

    wcex.cbSize = sizeof(WNDCLASSEX);
    wcex.style          = CS_DBLCLKS;
    wcex.lpfnWndProc    = KolmusProc;
    wcex.cbClsExtra     = 0;
    wcex.cbWndExtra     = 0;
    wcex.hInstance      = hInstance;
    wcex.hIcon          = LoadIconW(hInstance, MAKEINTRESOURCE(IDI_APPLICATION));
    wcex.hCursor        = LoadCursor(NULL, IDC_ARROW);
    wcex.hbrBackground  = bgBrush;
    wcex.lpszMenuName   = NULL;
    wcex.lpszClassName  = L"Kolmus";
    wcex.hIconSm        = LoadIconW(hInstance, MAKEINTRESOURCE(IDI_APPLICATION));

    RegisterClassEx(&wcex);

    wcex.style          = CS_DROPSHADOW;
    wcex.lpfnWndProc    = PageProc;
    wcex.hbrBackground  = (HBRUSH)(COLOR_WINDOW+1);
    wcex.lpszClassName  = L"Page";

    RegisterClassEx(&wcex);

    HWND hWnd = CreateWindow(L"Kolmus", L"Kolmus", WS_OVERLAPPEDWINDOW | WS_VISIBLE,
        CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, NULL, NULL, hInstance, NULL); 

    HWND PageWnd = CreateWindow(L"Page", L"", WS_CHILD | WS_VISIBLE, 30, 30, 200, 200, hWnd, NULL, hInstance, NULL);

    MSG msg;
    while (GetMessage(&msg, NULL, 0, 0))
    {
        TranslateMessage(&msg); 
        DispatchMessage(&msg);
    }

    return (int)msg.wParam; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:11:09.613

现在我看到了：`I creating a child window ...`

MSDN： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms632600 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632600(v=vs.85).aspx)

WS_CHILD 阻止 CS_DROPSHADOW 如果您希望在您的窗口中创建一个临时弹出控件并希望使用 CS_DROPSHADOW 来增强弹出的短暂性，您不能将它与 WS_CHILD 一起使用——它只是忽略 CS_DROPSHADOW。您需要将控件设置为 WS_POPUP，然后在打开时将其放置在您想要的位置。

Nevertheless: Use rather HWND PageWnd = CreateWindowEx instead of HWND CreateWindow because of WNDCLASSEX wcex;

Its simple: WNDCLASS goes with CreateWindow, WNDCLASSEX goes with CreateWindowEx.

From MSDN: “The CreateWindowEx function creates an overlapped, pop-up, or child window with an extended window style; otherwise, this function is identical to the CreateWindow function.”</p>

# c# - 正则表达式：查找以“@”开头但不以“@@”开头的字符串

> ID：14812553
> 
> 赞同：0
> 
> 时间：2013-02-11T13:03:55.127
> 
> 标签：c#, .net, regex

我需要一个正则表达式来查找以单个“@”开头的字符串。

*   匹配：@你好
*   不匹配：@@Hello

我试过**"\B@\w+"**，但它也找到了 "@@Hello"。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T13:05:30.383

使用[负前瞻](http://msdn.microsoft.com/en-us/library/bs2twtah.aspx#zerowidth_negative_lookahead_assertion)结构`(?!pattern)`：

```
^@(?!@) 
```

# android - 以编程方式在片段之间切换

> ID：14812554
> 
> 赞同：3
> 
> 时间：2013-02-11T13:03:58.423
> 
> 标签：android, android-fragments

我想在位于 1 个活动中的 2 个片段之间切换，因此另一个片段应始终替换当前片段。虽然我找不到我的错误:(

我的主要活动：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_layout);

    Fragment fragment = new FirstFragment();
    FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
    transaction.add(R.id.container, fragment, "first");
    transaction.addToBackStack(null);
    transaction.commit();
} 
```

我的活动布局：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/container"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity"
tools:ignore="MergeRootFrame" /> 
```

现在，在 FirstFragment 逻辑中的某个点（工作正常），正在调用以下方法

```
 private void startSecondFragment(){

    Fragment fragment = new SecondFragment();
    FragmentTransaction transaction = getChildFragmentManager().beginTransaction();
    transaction.add(R.id.container, fragment, "second");
    transaction.addToBackStack(null);
    transaction.commit();

} 
```

此函数确实完成而没有错误，但是随后会引发以下异常：

```
02-11 13:40:30.533: E/AndroidRuntime(907): java.lang.IllegalArgumentException: No view found for id 0x7f070000 (com.myexample.app:id/container) for fragment SecondFragment{412c9388 #0 id=0x7f070000 second} 
```

现在，它似乎无法在这一点上找到 id "container"（第一个 Fragment 已经替换了这个容器）。我怎样才能真正*替换*第一个片段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:09:55.427

它应该是这样的：

```
private void startSecondFragment(){

    Fragment fragment = new SecondFragment();
    FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
    transaction.add(R.id.container, fragment, "second");
    transaction.addToBackStack(null);
    transaction.commit();

} 
```

您不想获取孩子的 FragmentManager，因为您的 Fragment 在您的 Activity 中，所以您需要相同的 fragmentManager。

# c# - 如何首先在实体框架代码中映射不同数据类型的列和实体属性

> ID：14812557
> 
> 赞同：10
> 
> 时间：2013-02-11T13:04:18.650
> 
> 标签：c#, entity-framework, entity-framework-5

我正在使用实体框架 5 - 代码优先。

我有一个要连接的数据库，现在已经存在了一段时间（我没有创建它）。有一个表叫`T_Customers`. 它包含所有客户的列表。它具有以下结构（仅部分显示）：

```
Customer_id | numeric (5, 0) | auto increment | not null (not set as primary key)
FName | varchar(50) | not null
LName | varchar(50) | not null 
```

我的`Customer`班级：

```
public class Customer : IEntity
{
     public int Id { get; set; }

     public string FirstName { get; set; }

     public string LastName { get; set; }
} 
```

我的`IEntity`界面：

```
public interface IEntity
{
     int Id { get; set; }
} 
```

我的数据库上下文类中有以下内容：

```
public class DatabaseContext : DbContext
{
     public DatabaseContext(string connectionString)
          : base(connectionString)
     {
     }

     public DbSet<Customer> Customers { get; set; }

     protected override void OnModelCreating(DbModelBuilder modelBuilder)
     {
          modelBuilder.Configurations.Add(new CustomerConfiguration());
     }

     public new DbSet<TEntity> Set<TEntity>()
          where TEntity : class, IEntity
     {
          return base.Set<TEntity>();
     }
} 
```

我的客户配置类：

```
class CustomerConfiguration : EntityTypeConfiguration<Customer>
{
     internal CustomerConfiguration()
     {
          this.ToTable("T_Customers");
          this.Property(x => x.Id).HasColumnName("Customer_id");
          this.Property(x => x.FirstName).HasColumnName("FName");
          this.Property(x => x.LastName).HasColumnName("LName");
     }
} 
```

我试图在我的实体声明中保持一致，我需要所有的 ID 都是整数。这个客户 ID 在数据库中是数字类型，现在我在尝试返回所有客户的列表时遇到了问题。如何从数据库数字类型映射到 C# 整数类型？我不会将班级的 ID 更改为可为空或十进制，我的 ID 始终是不可为空的整数。我也无法更改数据库。

我得到的错误是：

```
The 'Id' property on 'Customer' could not be set to a 'Decimal' value. 
You must set this property to a non-null value of type 'Int32'. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T13:32:23.870

指定列的数字类型

```
Property(x => x.Id).HasColumnName("Customer_id").HasColumnType("numeric"); 
```

生成数据库时，它将创建具有精度的数字列`18,0`。但是当您映射到现有数据库时，它可以与`5,0`数字列一起正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T13:09:44.117

最简单的解决方案是使用另一个将映射到数据库字段的字段，并且 ID 属性将读取/写入该字段。像这样的东西：

```
public class Customer : IEntity
{
   public decimal CustomerID {get; set;}

   [NotMapped]
   public int Id 
   { 
      get { return (int)CustomerID; }
      set { CustomerID = (int)value; } 
   }

   public string FirstName { get; set; }

   public string LastName { get; set; }
} 
```

将此新字段映射到数据库字段，使用

```
this.Property(x => x.CustomerID).HasColumnName("Customer_id"); 
```

并且 EF 将使用客户 id 字段，您的代码可以愉快地使用整数 id 字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-13T09:58:59.590

在 .Net Core 中，您还可以使用 System.ComponentModel.DataAnnotations.Schema.ColumnAttribute 用底层列类型注释属性，例如，

```
 [Column(TypeName = "numeric(5, 0), not null")]
    public int Id { get; set; } 
```

或者如果该列可以为空：

```
 [Column(TypeName = "numeric(5, 0), null")]
    public int? Id { get; set; } 
```

我更喜欢@Sergey Berezovskiy 接受的答案，因为您实际上是在模型上而不是在其他地方（在 DbContext 中）进行注释。

ColumnAttribute 还可用于将属性映射到具有不同名称的列，例如，

```
 [Column("Identifier", TypeName = "numeric(5, 0), not null")]
    public int Id { get; set; } 
```

ColumnAttribute 也可以在 .Net 框架中工作——我还没有测试过。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-11T13:48:17.747

确定代码首先应该是什么的另一个选择是 MS EF Powertools [http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)

您可以添加一个空项目，右键单击，EF 逆向工程代码首先从 DB。

您经常（并非总是）获得解决方案的良好开端。您是否尝试使用十进制？

```
public class Customer : IEntity
{
 public decimal Id { get; set; }

 public string FirstName { get; set; }

 public string LastName { get; set; }
} 
```

如果您担心精度，您应该向 POCO 添加验证。

还有一些你可能喜欢的有趣的注释技巧。 [http://geekswithblogs.net/danemorgridge/archive/2010/12/20/ef4-code-first-control-unicode-and-decimal-precision-scale-with.aspx](http://geekswithblogs.net/danemorgridge/archive/2010/12/20/ef4-code-first-control-unicode-and-decimal-precision-scale-with.aspx) 祝你好运

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-11T13:07:35.763

您可以使用以下方法将其转换为 int：

```
 int myInt = Convert.Int32(numberFromDatabase); 
```

# android - 如何在android中解析Json响应？

> ID：14812560
> 
> 赞同：12
> 
> 时间：2013-02-11T13:04:32.480
> 
> 标签：android, json, parsing

我在对服务器的 GET 请求的结果中得到这个响应

```
{"LL": { "control": "dev/sys/getkey", "value": "4545453030304138303046392035343733373432363020323031332D30322D31312031383A30313A3135", "Code": "200"}} 
```

我只想`"value"`从上面的 json 响应中提取值。

我正在使用此代码来获取此响应

```
findViewById(R.id.button1).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            HttpResponse response = null;
            try {
                HttpClient client = new DefaultHttpClient();
                HttpGet request = new HttpGet();
                request.setURI(new URI(
                        "http://192.168.14.247/jdev/sys/getkey"));
                response = client.execute(request);
            } catch (URISyntaxException e) {
                e.printStackTrace();
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            String responseText = null;
            try {
                responseText = EntityUtils.toString(response.getEntity());
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                Log.i("Parse Exception", e + "");

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                Log.i("IO Exception 2", e + "");

            }

            Log.i("responseText", responseText);

            Toast.makeText(MainActivity.this, responseText + "",
                    Toast.LENGTH_SHORT).show();

        }

    }); 
```

我的问题是我如何解析这个并获取唯一`"value"`标签的值。谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-11T13:08:06.203

您可以解析当前的 json 字符串以从中获取`value`：

```
// Convert String to json object
JSONObject json = new JSONObject(responseText);

// get LL json object
JSONObject json_LL = json.getJSONObject("LL");

// get value from LL Json Object
String str_value=json_LL.getString("value"); //<< get value here 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T13:10:39.053

尝试这个

```
JSONObject json = (JSONObject) JSONSerializer.toJSON(responseText);   
String value = json.getJSONObject("LL").getString("value"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T13:09:46.110

尝试这个：

```
JSONObject json= json1.getJSONObject("LL");    

String value= json.getString("value"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T13:09:18.773

尝试这个，

```
JSONObject ResponseObject = new JSONObject(Response);
String str = ResponseObject.getJSONObject("LL").getString(value); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-10T06:06:08.603

您可以解析您的响应并获得价值试试这个：

```
try {
  JSONObject jsonObject = new JSONObject(response);// Convert response string in to json object.

  JSONObject jsonLL = jsonObject.getJSONObject("LL");// Get LL json object from jsonObject.

  String strValue = jsonLL.getString("value");// Get value from jsonLL Object.

   } catch (Exception e) {
    e.printStackTrace();
   } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-07-01T08:16:03.290

**简单高效**的解决方案：使用 Googlle 的**Gson 库**

*   把它放在**build.gradle**文件中： `implementation 'com.google.code.gson:gson:2.6.2'`
*   现在将 JSON 字符串转换为像 HashMap 这样的方便数据结构，分**两行**这样。

* * *

```
Type type = new TypeToken<Map<String, String>>(){}.getType();
Map<String, String> myMap = gson.fromJson(JsonString , type); 
```

* * *

## 或者你可以使用下面的类：

要将您的**JSON 字符串转换为 hashmap，**请使用以下命令：

```
HashMap<String, Object> hashMap = new HashMap<>(Utility.jsonToMap(response)) ; 
```

**使用这个类:** )（处理偶数列表、嵌套列表和 json）

```
public class Utility {

    public static Map<String, Object> jsonToMap(Object json) throws JSONException {

        if(json instanceof JSONObject)
            return _jsonToMap_((JSONObject)json) ;

        else if (json instanceof String)
        {
            JSONObject jsonObject = new JSONObject((String)json) ;
            return _jsonToMap_(jsonObject) ;
        }
        return null ;
    }

   private static Map<String, Object> _jsonToMap_(JSONObject json) throws JSONException {
        Map<String, Object> retMap = new HashMap<String, Object>();

        if(json != JSONObject.NULL) {
            retMap = toMap(json);
        }
        return retMap;
    }

    private static Map<String, Object> toMap(JSONObject object) throws JSONException {
        Map<String, Object> map = new HashMap<String, Object>();

        Iterator<String> keysItr = object.keys();
        while(keysItr.hasNext()) {
            String key = keysItr.next();
            Object value = object.get(key);

            if(value instanceof JSONArray) {
                value = toList((JSONArray) value);
            }

            else if(value instanceof JSONObject) {
                value = toMap((JSONObject) value);
            }
            map.put(key, value);
        }
        return map;
    }

    public static List<Object> toList(JSONArray array) throws JSONException {
        List<Object> list = new ArrayList<Object>();
        for(int i = 0; i < array.length(); i++) {
            Object value = array.get(i);
            if(value instanceof JSONArray) {
                value = toList((JSONArray) value);
            }

            else if(value instanceof JSONObject) {
                value = toMap((JSONObject) value);
            }
            list.add(value);
        }
        return list;
    }
} 
```

* * *

晚点再谢我 ：）

# java - 如何在jsp表单中插入验证码？

> ID：14812561
> 
> 赞同：10
> 
> 时间：2013-02-11T13:04:33.860
> 
> 标签：java, jsp, captcha

我正在使用 netbeans 和 mysql 在 java 中开发一个 Web 应用程序。申请中有一个登记表。当用户提交表单时，将执行客户端和服务器端验证。

现在我想在表单中插入一个验证码。如何插入它，以及如何检查用户是否输入了正确的验证码值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T13:12:54.167

您的验证码在 servlet 的 doGet(...) 方法中无需任何更改即可工作。

```
package test.captcha;

import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.io.OutputStream;
import java.util.Random;
import javax.imageio.ImageIO;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

public class CaptchaServlet extends HttpServlet {

 protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    response.setContentType("image/jpg");
    /*
     * Define number characters contains the captcha image, declare global
     */
    int iTotalChars = 6;

    /*
     * Size image iHeight and iWidth, declare globl
     */
    int iHeight = 40;
    int iWidth = 150;

    /*
     * font style
     */
    Font fntStyle1 = new Font("Arial", Font.BOLD, 30);
    Font fntStyle2 = new Font("Verdana", Font.BOLD, 20);

    /*
     * Possible random characters in the image
     */
    Random randChars = new Random();
    String sImageCode = (Long.toString(Math.abs(randChars.nextLong()), 36)).substring(0, iTotalChars);

    /*
     * BufferedImage is used to create a create new image
     */
    /*
     * TYPE_INT_RGB - does not support transpatency, TYPE_INT_ARGB - support transpatency
     */
    BufferedImage biImage = new BufferedImage(iWidth, iHeight, BufferedImage.TYPE_INT_RGB);
    Graphics2D g2dImage = (Graphics2D) biImage.getGraphics();

    // Draw background rectangle and noisey filled round rectangles
    int iCircle = 15;
    //g2dImage.fillRect(0, 0, iWidth, iHeight);
    for (int i = 0; i < iCircle; i++) {
        g2dImage.setColor(new Color(randChars.nextInt(255), randChars.nextInt(255), randChars.nextInt(255)));
        int iRadius = (int) (Math.random() * iHeight / 2.0);
        int iX = (int) (Math.random() * iWidth - iRadius);
        int iY = (int) (Math.random() * iHeight - iRadius);
        //g2dImage.fillRoundRect(iX, iY, iRadius * 2, iRadius * 2,100,100);
    }
    g2dImage.setFont(fntStyle1);
    for (int i = 0; i < iTotalChars; i++) {
        g2dImage.setColor(new Color(randChars.nextInt(255), randChars.nextInt(255), randChars.nextInt(255)));
        if (i % 2 == 0) {
            g2dImage.drawString(sImageCode.substring(i, i + 1), 25 * i, 24);
        } else {
            g2dImage.drawString(sImageCode.substring(i, i + 1), 25 * i, 35);
        }
    }

    /*
     * create jpeg image and display on the screen
     */
    OutputStream osImage = response.getOutputStream();
    ImageIO.write(biImage, "jpeg", osImage);
    //osImage.close();

    /*
     * Dispose function is used destory an image object
     */
    g2dImage.dispose();

    HttpSession session = request.getSession();
    session.setAttribute("dns_security_code", sImageCode);
    //System.out.println("Captcha Page :"+session.getAttribute("dns_security_code"));

}

protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

} 
```

如果不存在则创建一个 Web 应用程序描述符：/WEB-INF/web.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

<servlet>
        <servlet-name>CaptchaServlet</servlet-name>
        <servlet-class>test.captcha.CaptchaServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>CaptchaServlet</servlet-name>
    <url-pattern>/captcha-image.jpg</url-pattern>
</servlet-mapping>
</web-app> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T13:20:06.740

只需谷歌它，你会发现很多例子。这是第一个，很容易上手 [http://www.devmanuals.com/tutorials/java/jsp/captcha.html](http://www.devmanuals.com/tutorials/java/jsp/captcha.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:27:36.187

试试 reCAPTCHA [https://developers.google.com/recaptcha/](https://developers.google.com/recaptcha/) - 它是一种广泛使用的库，带有多种编程语言（包括 Java/JSP）的经过验证的插件 - 请参阅插件部分。顺便说一句，您也可以在没有服务器端处理的情况下使用这个库 - 请参阅不带插件的显示和不带插件的验证部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T13:10:00.570

在这里，您可以使用示例代码。希望能帮助到你。

[http://captchas.net/sample/jsp/](http://captchas.net/sample/jsp/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-07T11:03:14.887

此代码有效：

//放入你的jsp页面

```
<div class="form-cont">
                        <img src="CaptchaImg.jpg" alt="image">
                    </div>
                    <div class="form-cont">
                     <input autocomplete="off"  type="text" class="captcha input-elm" tabindex="3"  
                        placeholder="Captcha Code" name="j_captcha_response" id="j_captcha_response" 
                         maxlength="4">
                    </div>

//PUT in YOUR class

 String parm = httpServletRequest.getParameter("j_captcha_response");
        String captchaKey = (String)session.getAttribute(CaptchaServlet.CAPTCHA_KEY) ;

        if(parm.equalsIgnoreCase(captchaKey)){
true
//CODE HERE
}
else{
faLSE
ERROR HERE 
} 
```

# c# - 为什么保存记录时Guid会发生变化？

> ID：14812566
> 
> 赞同：2
> 
> 时间：2013-02-11T13:05:00.037
> 
> 标签：c#, asp.net-mvc, nhibernate, oracle10g

我有一个名为“投标”的实体，以下是与此问题相关的代码：

班级：

```
public class Bid
{
    public virtual Guid Id { get; set; }
} 
```

映射文件：

```
<id name="Id" column="Id" type="Guid">
  <generator class="guid.comb" />
</id> 
```

Oracle 中的数据类型：

```
Raw(16) 
```

当我保存“Bid”类型的新对象（Repository.Save(bid)）时，C# 生成的 Id 是

```
db27b33c75314b41b171a1620130061a 
```

保存在 oracle 表中的是

```
3CB327DB3175414BB171A1620130061A 
```

如果你仔细看，id 的后半部分是一样的，但前半部分不是。

有人可以告诉我如何更改我的代码，以便 C# 生成的 Id 按原样保存？

我已经尝试过生成器类“assigned”和“guid.native”，并尝试在 oracle 中将数据类型更改为 varchar2(32)，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:17:07.507

第一部分也相同，但字节顺序不同。颠倒下面前三组中每一组的字节顺序，您将看到：

db27b33c 7531 4b41 b171a1620130061a

3CB327DB 3175 414B B171A1620130061A

这里有一些讨论：[https ://nhibernate.jira.com/browse/NH-1429](https://nhibernate.jira.com/browse/NH-1429)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-03T01:56:51.123

对于来自谷歌的其他人，他们也是 nhibernate 和 mysql 的新手，在我更改的 .hbm.xml 文件中

```
<id name="Id" type="Guid">
  <generator class="guid" />
</id> 
```

至

```
<id name="Id" type="Guid"/> 
```

我的向导不再改变。

# python - 测量削波量

> ID：14812572
> 
> 赞同：-2
> 
> 时间：2013-02-11T13:05:17.080
> 
> 标签：python, audio, audio-analysis

谁能指点我一个命令行工具或 Python 模块来测量音频文件中的剪辑量？例如类似于[http://www.ber-sd.com/dl_clipping.html](http://www.ber-sd.com/dl_clipping.html)的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:54:03.570

我最终使用：

```
sox testt.wav -n stats 
```

其中值*Pk count*返回裁剪量。

# java - 使用 MySql 在其他机器上运行的 Java 程序

> ID：14812577
> 
> 赞同：1
> 
> 时间：2013-02-11T13:05:33.373
> 
> 标签：java, mysql

我是编程世界的新手，现在我正在用 Java 编写程序，它连接到我的内部（？！）mysql 服务器，其中有一个名为 testDB 的数据库和名为 testTable 的表。所以我想知道，如果我想在另一台机器上运行该程序，我需要做什么，哪里没有安装/运行 mysql 服务器？我敢打赌，这并不容易，但我真的很想知道怎么做——好奇心正在扼杀我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:10:27.980

您需要将 jdbc URL 从 localhost 更改为 DBs 主机名

例如

```
jdbc:mysql://dbhost:3306/dbname?user=admin&password=secret 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:14:07.670

除了您应该从（可能）更改 JDBC 连接字符串这一事实之外

```
jdbc:mysql://localhost:3306/testDB 
```

或者

```
jdbc:mysql://127.0.0.1:3306/testDB 
```

至

```
jdbc:mysql://IP_OF_MACHINE:3306/testDB 
```

或者

```
jdbc:mysql://NAME_OF_MACHINE:3306/testDB 
```

您必须确保运行 mysql 服务器的机器允许端口 3306（mysql DB 的默认端口）上的 TCP 连接。除此之外，您必须确保 mysql 引擎也允许来自其他机器的连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T13:13:16.373

为此，您必须在连接字符串中写入“该机器的 IP 地址”，而不是在其中写入 localhost。

比如：jdbc:mysql://[IP-Address]:3306/dbname

# android - 线路立体声/2 通道录音

> ID：14812579
> 
> 赞同：3
> 
> 时间：2013-02-11T13:05:36.233
> 
> 标签：android, hardware, audio-recording

是否有任何 Android 设备支持通过线路输入进行多通道（立体声）录音？

使用我测试的设备（Nexus 4、HTC Buzz、摩托罗拉 Xoom ..），可以设置 AudioFormat.CHANNEL_IN_STEREO，但我只收到一个活动通道。

这是由于许可问题导致的 Android 的一般限制，还是取决于制造商/硬件，即只有一个 A/D 转换器用于输入或类似的？

关于这个主题的任何经验、想法或想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:58:06.380

> 是否有任何 Android 设备支持通过线路输入进行多通道（立体声）录音？

对于大多数出厂配备 Android 的智能手机和平板电脑，有一个令人不快的答案：不。

为什么不？因为这些设备（顺便说一句，所有 iPhone）都使用 4 针 TRRS-3.5 毫米插头将耳机和/或麦克风连接到设备。这四个引脚用于 T) 左扬声器，R1) 右扬声器，R2) 扬声器和麦克风接地，最后是 S) 单声道麦克风。

**更新：**当我在 2013 年 12 月补充说“TRRRS（我建议称其为“T3RS”）插头的发明将解决问题时，我不知道索尼已经在研究这个问题并提出了“STM- 2014 年 2 月，带有 T3RS 插头的 10 英寸立体声麦克风。

![T3RS 插头](../Images/cddbf3477561b0a87d2f9864ec854fad.png)

> 这是一般限制吗

是的，但仅仅是由于硬件音频插头，而不是由于许可。

2014 年，很少有 Android 智能手机配备带有外部立体声输入的 T3RS 插头：Xperia Z2、Z2 平板电脑、Z3

作为旁注，输入放大器的增益被调整为麦克风输出电平而不是线路电平（例如CD播放器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-22T11:51:09.413

Olimex OLinuXino A10S [https://www.olimex.com/Products/OLinuXino/A10S/](https://www.olimex.com/Products/OLinuXino/A10S/)有一个 LINE_IN 连接器。我还没有找到如何访问它，但它就在那里！

# c++ - 在 c++ gtk::drawarea 中：如何刷新图像

> ID：14812580
> 
> 赞同：1
> 
> 时间：2013-02-11T13:05:39.113
> 
> 标签：c++, gtkmm

我在 C++ 中使用 gtkmm 作为 GUI。我有`Gtk::DrawingArea`一个图像（文件名）：

```
class MyArea : public Gtk::DrawingArea
{
public:
    MyArea(string filename)
    {
        m_image = Gdk::Pixbuf::create_from_file(filename.c_str());
    }

    virtual bool on_draw(const Cairo::RefPtr<Cairo::Context>& cr)
    {
        if (!m_image)
            return false;

        Gtk::Allocation allocation = get_allocation();
        const int width  = allocation.get_width();
        const int height = allocation.get_height();

        // Draw the image in the middle of the drawing area, or (if the image is
        // larger than the drawing area) draw the middle part of the image.
        Gdk::Cairo::set_source_pixbuf(cr, m_image, (width - m_image->get_width())/2, (height - m_image->get_height())/2);
        cr->paint();

        return true;
    }
    Glib::RefPtr<Gdk::Pixbuf> m_image;
} 
```

我想要一个更改图像的功能（使用文件名2）。但我找不到如何：-/

有人可以帮我解决这个问题。谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:09:00.957

作为你班的一员：

```
void change_image(string filename2)
{
    m_image = Gdk::Pixbuf::create_from_file(filename2.c_str());
    queue_draw();
} 
```

# java - java gwt单元格树

> ID：14812581
> 
> 赞同：0
> 
> 时间：2013-02-11T13:05:39.793
> 
> 标签：java, gwt, tree

我在 java gwt 中实现了一个 CellTree 结构，当单击单元格包含的小箭头时，它会打开它的子​​节点。仅单击单元格本身而不是明确地单击箭头时，是否也可以打开子树？

```
public class SomeCellTree extends Composite {

    private SelectionModel selectionModel;
    private CellTree cellTree;

    private class SomeTreeViewModel implements TreeViewModel {
         @Override
         public <T> NodeInfo<?> getNodeInfo(T value) {
             ...
         }

         @Override
         public boolean isLeaf(Object value) {
             ...
         }  
    }

    public SomeCellTree(...) {

       this.selectionModel = new SingleSelectionModel();
       this.selectionModel.addSelectionChangeHandler(new SelectionChangeEvent.Handler() {
           @Override
           public void onSelectionChange(SelectionChangeEvent event) {
                         ...
           }
       });

       cellTree = new CellTree(new SomeTreeViewModel(),null,RESOURCES);
       initWidget(cellTree);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:09:09.763

您必须使用递归来查找所选 DTO 的节点，然后您必须调用`setChildOpen`以打开子树。像这样的东西：

```
this.selectionModel.addSelectionChangeHandler(new SelectionChangeEvent.Handler() {
    @Override
    public void onSelectionChange(SelectionChangeEvent event) {
         T selectedObj = selectionModel.getSelectedObject();
         TreeNode rootNode = cellTree.getRootTreeNode();
         openTree(rootNode,T);
    }
});

private void openTree(rootNode node,T object) {
    for (int i = 0; i < node.getChildCount(); i++) {
        if (!node.isChildLeaf(i)) {
            find(node.setChildOpen(i, true));
            if (node.getValue().equals(T)) 
                return;
        }
    }
} 
```

# xpages - XSP.showDialog 在 onStart 事件中不起作用？

> ID：14812584
> 
> 赞同：2
> 
> 时间：2013-02-11T13:05:47.523
> 
> 标签：xpages

我有以下测试 XPage。

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
    xmlns:xe="http://www.ibm.com/xsp/coreex">
    <xp:panel id="pagePanel">
        <xp:text escape="true" id="didThePageCompile">
            <xp:this.value><![CDATA[#{javascript:var d = new Date();
return d.toLocaleString();}]]></xp:this.value>
        </xp:text>
        <xp:br></xp:br>
        <xp:button value="Label" id="button1">
            <xp:eventHandler event="onclick" submit="true"
                refreshMode="partial" refreshId="dialog1"
                onStart="XSP.openDialog('#{id:dialog1}')" 
                onComplete="XSP.closeDialog('#{id:dialog1}')">
            <xp:this.action><![CDATA[#{javascript:var agent = database.getAgent("runLongTime");
var response = agent.run();

// var d = getComponent("dialog1"); 
// d.show();
}]]></xp:this.action>
</xp:eventHandler>
</xp:button>
<xe:dialog id="dialog1" title="Test Dialog">This is a test dialog</xe:dialog></xp:panel>
</xp:view> 
```

代理“runLongTime”只休眠 10 秒。这工作正常。当我单击按钮时，对话框没有出现。我检查了源代码，它生成了正确的代码，当我手动将其放入控制台时，该代码就可以工作。

我没有收到任何错误，并且代理执行良好。我也尝试将 refreshId 更改为“pagePanel”，但仍然相同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T14:50:14.437

`XSP.openDialog()`并且`XSP.closeDialog()`每个都会触发部分刷新。XPages 客户端 API 包含用于防止并行执行多个部分刷新操作的逻辑，这可能会阻止您的对话框显示，因为当它尝试运行刷新以显示对话框时，它已经在运行您的按钮事件。

将 JSON-RPC（在控制面板中称为“远程服务”）添加到页面。将按钮的服务器事件代码移动到 RPC 的方法中。然后，您可以将按钮事件更改为纯客户端： call `XSP.openDialog()`，然后调用 RPC 方法并关闭该方法的 onComplete 中的对话框。这应该可以防止您当前遇到的竞争状况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:00:05.667

据我在这里看到，您正在尝试打开/关闭同一个对话框。几天前，我遇到了同样的问题，想知道为什么这不起作用。

最后，我检查了事件并以 onStart 和 onComplete 几乎并行启动的惊人结果结束。

也许您可以尝试在调用 XSP.closeDialog 事件之前插入超时 (window.timeout)。

# ios - iOS6.1 Facebook 验证访问令牌时出错：会话已在 unix 时间过期

> ID：14812586
> 
> 赞同：0
> 
> 时间：2013-02-11T13:05:53.270
> 
> 标签：ios, xcode, facebook-ios-sdk, ios6.1

我刚刚更新到 iOS6.1 并收到此错误。

```
error : Error Domain=com.facebook.sdk Code=5 "The operation couldn’t be completed. (com.facebook.sdk error 5.)" UserInfo=0x1ed55780 {com.facebook.sdk:ParsedJSONResponseKey={
body =     {
    error =         {
        code = 190;
        "error_subcode" = 463;
        message = "Error validating access token: Session has expired at unix time 1360246752\. The current unix time is 1360587404.";
        type = OAuthException;
    };
};
code = 400;
}, com.facebook.sdk:HTTPStatusCode=400} 
```

我之前没有遇到过任何过期的会话错误。我有 Facebook SDK 3.1.1 并且正在构建 iOS 6.1 。我发现了这个错误，但不确定是否有更新会话的步骤。Facebook iOS SDK 3.1.1 没有解决这个问题吗？为了以防万一，我确实升级了 Facebook 应用程序。

我正在处理一个关闭会话的会话：

```
- (void)applicationWillTerminate:(UIApplication *)application
{
// Saves changes in the application's managed object context before the application terminates.
// close notification in order to do cleanup
[FBSession.activeSession close]; 
```

任何想法stackoverflow Lords？提前致谢。

注意：我试图强制会话关闭并清除要使用的会话数据：

```
[FBSession.activeSession closeAndClearTokenInformation]; 
```

对过期会话没有任何更改。它只是没有进行新的会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:06:20.907

我通过在 iOS 设置 > Facebook 中关闭对该应用程序使用 Facebook 的权限来破解/解决了这个问题。

然后我在 xcode 中构建了应用程序，以强制出现与设置权限相关的错误。打开权限，然后再次构建它，它运行得很好。

但是这样做似乎是一种黑客行为，我担心一旦应用程序发布就可能会发生这种情况。

# php - 在杂货店上传视频

> ID：14812587
> 
> 赞同：1
> 
> 时间：2013-02-11T13:05:54.543
> 
> 标签：php, mysql, codeigniter, file-upload, grocery-crud

我在上传视频文件时遇到杂货杂货问题。在上传过程中，完成后显示过程图像，显示为空白，视频文件不上传。我已经为我的上传文件夹设置了 777 权限，我尝试上传 mp4、flv、3gp 文件格式。

这是我的PHP代码

```
function test_video(){
    $crud=new grocery_CRUD();
    $crud->set_table('test');
    $crud->set_subject('Test Video');
    $crud->set_field_upload('url', 'assets/uploads');

    $output=$crud->render();        
    $this->_crud_output($output);
} 
```

我的数据库结构是

标题 varchar(50)，网址文本

而且我已经给了 777 上传文件夹的权限。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-27T05:19:46.550

我遇到了同样的问题，我所做的是增加 .htaccess 中的 php 上传限制。

```
php_value upload_max_filesize 500M

php_value post_max_size 400M 
```

但我并没有停在这里，现在上传“杂货清单”后显示视频作为文件链接，所以我添加了一个列回调，并集成了一个播放按钮。

```
$crud -> callback_column('video_file_name', array($this, '_video_player'));

function _video_player($value, $row) {

    return "<a href='#' id='".$row -> video_id."' class='btn btn-sucess video_play'>Play</a>";
} 
```

希望你明白我在说什么。

# vim - 在正则表达式中访问 vim 设置值

> ID：14812588
> 
> 赞同：2
> 
> 时间：2013-02-11T13:06:00.067
> 
> 标签：vim

嗨，我正在使用 vim 设置来突出显示第 80 列之后的列。这个硬编码设置对于我喜欢将其保留在 79 列中的编程来说已经足够了。然而，对于 LaTeX、plain txt、RST，我使用不同的`tw`值，由于明显的原因，它不起作用。是否可以以某种方式使用`textwidth`此正则表达式中的设置值？或者如果没有，我该如何解决这个问题？

```
hi OverLength ctermbg=darkred ctermfg=white guibg=#592929
match OverLength /\%81v.\+/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T18:42:52.147

除了设置限制之外，为什么不使用一个带有绑定的函数来突出显示`n`列中的字符呢？

```
nnoremap <leader>h :call ToggleOverLengthHighlight()<CR>
let g:overlength_enabled = 0
highlight OverLength ctermbg=black guibg=#212121

function! ToggleOverLengthHighlight()
    if g:overlength_enabled == 0
        match OverLength /\%79v.*/
        let g:overlength_enabled = 1
        echo 'OverLength highlighting turned on'
    else
        match
        let g:overlength_enabled = 0
        echo 'OverLength highlighting turned off'
    endif
endfunction 
```

![在此处输入图像描述](../Images/9d95de9e7b5784a181ea5769c28292ed.png)

# ruby-on-rails - 带有时间戳字段的 ActiveResource MassAssignmentSecurity 错误

> ID：14812598
> 
> 赞同：2
> 
> 时间：2013-02-11T13:06:48.300
> 
> 标签：ruby-on-rails, ruby, oop

我正在尝试在 Rails 模型上使用 ActiveResource 实现基本的 CRUD 操作。文档说要创建一个子类，`ActiveResource::Base`然后设置`self.site`。

这很好用，直到我尝试更新已获取的现有记录。我看到的错误是一个' '，当我在我的 ActiveResource 对象上`MassAssignmentSecurity::Error`调用方法时出现，因为and字段不可访问。`'save()'``created_at``updated_at`

我发现如果在我的模型类上标记这些字段`attr_accessible`就可以了，但这似乎是一个非常不安全且非常糟糕的解决方案。
下面显示了该问题的示例：

```
rails new TestApp
cd TestApp
rails generate scaffold User first:string last:string
rake db:create
rake db:migrate
rails server 
```

在我使用的另一个终端选项卡上：

```
irb
require 'active_resource'
class User < ActiveResource::Base
self.site = 'http://localhost:3000'
end
u = User.new()
u.first = 'John'
u.last = 'Shine'
u.save()
#This saves ok
nu = User.find(1)
nu.first = 'Geoff'
nu.save() 
#This never works 
```

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:09:54.967

假设您想丢弃 Timestamp 字段并让 Rails 自动创建它们（正常），我将从应用程序内的新 json/xml 模板获取数据，该模板不包含 Timestamp 字段。

还假设您可以访问提供数据的应用程序，您可以将如下内容添加到您的 Rails 模型中进行测试，它会覆盖（可以称之为“使用”）json 模板的 as_json 方法。

```
def as_json(options = {})
  super(:except => [:created_at, :updated_at])
end 
```

这将更新 Rails 服务器本身的时间戳文件。

或者，您应该看看 RABL 和 jbuilder，因为它们都是不错的选择。

# php - 调用未定义函数 openssl_pkcs7_sign()

> ID：14812601
> 
> 赞同：0
> 
> 时间：2013-02-11T13:06:54.803
> 
> 标签：php, ssl, digital-signature, tcpdf, digital-certificate

我正在使用 TCPDF 签署儿子 PFD 文件。我正在通过网络测试示例：[http](http://www.tcpdf.org/examples.php) ://www.tcpdf.org/examples.php ，它们运行良好，但是当我下载 lib 并在@localhost 进行测试时，我在“示例 52”中收到此错误：

> 致命错误：在第 9043 行的 C:\xampp\htdocs\pruebas\pdf_firma\tcpdf\tcpdf.php 中调用未定义函数 openssl_pkcs7_sign()

我的 PHP 版本是 5.3.8。

有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:09:39.040

必须安装openssl

[在 XAMPP 中启用 OpenSSL](https://stackoverflow.com/questions/9466086/enabling-the-openssl-in-xampp)

[http://www.php.net/manual/en/openssl.setup.php](http://www.php.net/manual/en/openssl.setup.php)

# android - Android PreferenceActivity 和对话框片段

> ID：14812602
> 
> 赞同：6
> 
> 时间：2013-02-11T13:06:59.900
> 
> 标签：android, actionbarsherlock, preferenceactivity

我正在开发的应用程序有一个可扩展的活动`SherlockFragmentActivity`。我想使用首选项 api 以便轻松地将首选项添加到活动中。由于我想支持 api level 8 及以上，我必须从 class 扩展活动`SherlockPreferenceActivity`。

问题是活动需要显示一个对话框。对话框扩展`SherlockDialogFragment`。`show()`对话框的方法需要两个参数：一个`FragmentManager`对象和一个`String`标签。
为了获取`FragmentManager`对象，我曾经调用过`getSupportFragmentManager()`活动的方法。中缺少此方法`SherlockPreferenceActivity`。我尝试使用`getFragmentManager()`，但 Eclipse 说

> DialogFragment 类型中的方法 show(FragmentManager, String) 不适用于参数 (FragmentManager, String)

如何显示对话框片段`SherlockPreferenceActivity`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T02:16:41.850

Try using `SherlockDialogFragment.getSherlockActivity().getSupportFragmentManager()`.

Example: `mySherlockDialogFragment.show(mySherlockDialogFragment.getSherlockActivity().getSupportFragmentManager(), "my_tag");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-29T08:32:35.897

您应该使用[`Shared Preferences`](http://developer.android.com/reference/android/content/SharedPreferences.html)而不是使用`PreferenceActivity`. 在单独的帮助程序类中声明这些引用，而不是将其扩展到 Activity。这使您可以灵活地创建自定义布局。

**例子：**

```
public class SharePrefManager {
    // Shared Preferences
    SharedPreferences pref;

    // Editor for Shared preferences
    Editor editor;

    // Context
    Context _context;

    // Shared pref mode
    int PRIVATE_MODE = 0;

    // Sharedpref file name
    private static final String PREF_NAME = "selfhelppref";

    //Your configurable fields
    public static final String KEY_PREF1 = "pref1";
    public static final String KEY_PREF2 = "pref2";
    public static final String KEY_PREF3 = "pref3";

    public SharePrefManager(Context context){
        this._context = context;
        pref = _context.getSharedPreferences(PREF_NAME, PRIVATE_MODE);
        editor = pref.edit();
    }

    //Setter function for configurable field
    public void setPref(String key, String value){
       editor.putString(key, value);
    }

   //Getter function for configurable field
   public String getPref(String key){
           return editor.getString(key);
   }
} 
```

**参考您的活动**

```
SharePrefManager SM = new SharePrefManager(this);
SM.setPref(SM.KEY_PREF1, "name");
String value = SM.getPref(SM.KEY_PREF1); 
```

# django - 如何在不同区域之间传递时间数据？

> ID：14812603
> 
> 赞同：0
> 
> 时间：2013-02-11T13:07:01.977
> 
> 标签：django, datetime

在我的 Django 应用程序中，我有一个`Task`带有一些日期和时间字段的模型：

```
class Task(models.Model):

    date = models.DateField()
    start_time = models.TimeField(help_text='hh:mm')
    end_time = models.TimeField(help_text='hh:mm')
    # more stuff 
```

我将向`Task`一些 Android 客户端发送一些实例，这些客户端将位于与我的服务器时区 (TZ2) 不同的时区 (TZ1)。

和字段必须设置为目标时区（TZ1），即如果我在管理员字段中输入“13:00” `start_time`，则在TZ1 中应为“13:00”。`end_time``start_time``Task`

如何将`start_time`和`end_time`值设置为 TZ1 次？如果我保留在默认管理员中输入的值，我猜时间将设置为服务器时区 (TZ2)，对吧？

那么将这些值（通过 JSON）发送到 Android 客户端以获得正确的 TZ2 时间的最佳格式是什么？

现在我正在使用 Python Datetime's `isoformat()`，它给出了类似的东西

```
2013-02-11T13:17:23.811680 
```

但它没有时区数据...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:11:00.180

这不是处理时区的最佳方式。

最好的方法是尽早将时间转换为 UTC，并尽可能晚地转换回来。

换句话说，如果我在这里输入当前时间作为`Feb 11, 21:03`，它*永远不*应该这样存储。相反，它应该在发生其他*任何*事情之前更改为 UTC。

就是这样，不管发生什么，都是对的。如果我将它发送到内蒙古，它应该一直保持为 UTC，直到有人想要查看它。然后并且只有在那时才应该转换它（并且仅用于显示）。

遵循该规则将为您在必须跨多个时区工作的任何软件中节省很多麻烦。相信我，在他们实施了一些通过网络发送时区的可怕系统之后，我们修复了一家大型电信公司，这意味着每个点都必须能够与*每个*时区相互转换。

尽快让他们进入 UTC，并且只在需要时让他们回来，节省了大量的时间和金钱。

# jsp - 如何根据条件if和else从liferay的jsp页面重定向到特定的url？

> ID：14812604
> 
> 赞同：0
> 
> 时间：2013-02-11T13:07:13.627
> 
> 标签：jsp, redirect, liferay, portlet, liferay-6

我已经覆盖了 liferay 的 login.jsp 文件

```
<%--
/**
 * Copyright (c) 2000-2012 Liferay, Inc. All rights reserved.
 *
 * This library is free software; you can redistribute it and/or modify it under
 * the terms of the GNU Lesser General Public License as published by the Free
 * Software Foundation; either version 2.1 of the License, or (at your option)
 * any later version.
 *
 * This library is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
 * details.
 */
--%>

<%@ include file="/html/portlet/login/init.jsp" %>
<link rel="stylesheet" href="/html/portlet/login/css/bootstrap.min.css" />
<link rel="stylesheet" href="/html/portlet/login/css/bootstrap-responsive.min.css" />
<link rel="stylesheet" href="/html/portlet/login/css/blue.css" />
<link rel="stylesheet" href="/html/portlet/login/css/custom.css" />
<link rel="stylesheet" href="/html/portlet/login/css/jquery.qtip.min.css" />
<link href='http://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'>

<c:choose>
    <c:when test="<%= themeDisplay.isSignedIn() %>">

        <%
        String signedInAs = HtmlUtil.escape(user.getFullName());

        if (themeDisplay.isShowMyAccountIcon()) {
            signedInAs = "<a href=\"" + HtmlUtil.escape(themeDisplay.getURLMyAccount().toString()) + "\">" + signedInAs + "</a>";
        }
        %>
        <%= LanguageUtil.format(pageContext, "you-are-signed-in-as-x", signedInAs, false) %>
    </c:when>
    <c:otherwise>
        <%
        String redirect = ParamUtil.getString(request, "redirect");

        String login = LoginUtil.getLogin(request, "login", company);
        String password = StringPool.BLANK;
        boolean rememberMe = ParamUtil.getBoolean(request, "rememberMe");

        if (Validator.isNull(authType)) {
            authType = company.getAuthType();
        }
        %>

        <portlet:actionURL secure="<%= PropsValues.COMPANY_SECURITY_AUTH_REQUIRES_HTTPS || request.isSecure() %>" var="loginURL">
            <portlet:param name="saveLastPath" value="0" />
            <portlet:param name="struts_action" value="/login/login" />
            <portlet:param name="doActionAfterLogin" value="<%= portletName.equals(PortletKeys.FAST_LOGIN) ? Boolean.TRUE.toString() : Boolean.FALSE.toString() %>" />
        </portlet:actionURL>

        <aui:form action="<%= loginURL %>" autocomplete='<%= PropsValues.COMPANY_SECURITY_LOGIN_FORM_AUTOCOMPLETE ? "on" : "off" %>' method="post" name="fm">
            <aui:input name="redirect" type="hidden" value="<%= redirect %>" />

            <c:choose>
                <c:when test='<%= SessionMessages.contains(request, "user_added") %>'>

                    <%
                    String userEmailAddress = (String)SessionMessages.get(request, "user_added");
                    String userPassword = (String)SessionMessages.get(request, "user_added_password");
                    %>
                    <div class="portlet-msg-success">
                        <c:choose>
                            <c:when test="<%= company.isStrangersVerify() || Validator.isNull(userPassword) %>">
                                <%= LanguageUtil.get(pageContext, "thank-you-for-creating-an-account") %>

                                <c:if test="<%= company.isStrangersVerify() %>">
                                    <%= LanguageUtil.format(pageContext, "your-email-verification-code-has-been-sent-to-x", userEmailAddress) %>
                                </c:if>
                            </c:when>
                            <c:otherwise>
                                <%= LanguageUtil.format(pageContext, "thank-you-for-creating-an-account.-your-password-is-x", userPassword, false) %>
                            </c:otherwise>
                        </c:choose>

                        <c:if test="<%= PrefsPropsUtil.getBoolean(company.getCompanyId(), PropsKeys.ADMIN_EMAIL_USER_ADDED_ENABLED) %>">
                            <%= LanguageUtil.format(pageContext, "your-password-has-been-sent-to-x", userEmailAddress) %>
                        </c:if>
                    </div>
                </c:when>
                <c:when test='<%= SessionMessages.contains(request, "user_pending") %>'>

                    <%
                    String userEmailAddress = (String)SessionMessages.get(request, "user_pending");
                    %>

                    <div class="portlet-msg-success">
                        <%= LanguageUtil.format(pageContext, "thank-you-for-creating-an-account.-you-will-be-notified-via-email-at-x-when-your-account-has-been-approved", userEmailAddress) %>
                    </div>
                </c:when>
            </c:choose>

            <liferay-ui:error exception="<%= AuthException.class %>" message="authentication-failed" />
            <liferay-ui:error exception="<%= CompanyMaxUsersException.class %>" message="unable-to-login-because-the-maximum-number-of-users-has-been-reached" />
            <liferay-ui:error exception="<%= CookieNotSupportedException.class %>" message="authentication-failed-please-enable-browser-cookies" />
            <liferay-ui:error exception="<%= NoSuchUserException.class %>" message="authentication-failed" />
            <liferay-ui:error exception="<%= PasswordExpiredException.class %>" message="your-password-has-expired" />
            <liferay-ui:error exception="<%= UserEmailAddressException.class %>" message="authentication-failed" />
            <liferay-ui:error exception="<%= UserLockoutException.class %>" message="this-account-has-been-locked" />
            <liferay-ui:error exception="<%= UserPasswordException.class %>" message="authentication-failed" />
            <liferay-ui:error exception="<%= UserScreenNameException.class %>" message="authentication-failed" />

            <aui:fieldset>

                <%
                String loginLabel = null;
                if (authType.equals(CompanyConstants.AUTH_TYPE_EA)) {
                    loginLabel = "";
                }
                else if (authType.equals(CompanyConstants.AUTH_TYPE_SN)) {
                    loginLabel = "screen-name";
                }
                else if (authType.equals(CompanyConstants.AUTH_TYPE_ID)) {
                    loginLabel = "id";
                }
                %>                      
                <span id="<portlet:namespace />passwordCapsLockSpan" style="display: none;"><liferay-ui:message key="caps-lock-is-on" /></span>

                <div class="login_page">
                    <div class="login_box">     
                        <form id="login_form">
                            <div class="top_b">Sign in</div>    
                            <div class="alert alert-info alert-login">
                                Login with your Username and Password
                            </div>
                            <div class="cnt_b">
                                <div class="formRow">
                                    <div class="input-prepend">
                                        <span style="float:left;" class="add-on"><i class="icon-user"></i></span>
                                        <aui:input label="" style="width:210px;" name="login" showRequiredLabel="<%= false %>" type="text" value="">                                
                                        </aui:input>
                                    </div>
                                </div>
                                <div class="formRow">
                                    <div class="input-prepend">
                                        <span style="float:left;" class="add-on"><i class="icon-lock"></i></span>
                                        <aui:input label="" style="width:210px;" name="password" showRequiredLabel="<%= false %>" type="password" value="<%= password %>">                              
                                        </aui:input>
                                    </div>
                                </div>
                                <div class="formRow clearfix" style='margin-top:0;'>
                                    <c:if test="<%= company.isAutoLogin() && !PropsValues.SESSION_DISABLED %>">
                                        <label class="checkbox"><input type="checkbox" checked="<%= rememberMe %>" name="rememberMe"/> Remember me</label>
                                    </c:if>                     
                                </div>
                            </div>
                            <div class="btm_b clearfix">                                    
                                <aui:button-row>

                                    <aui:button style="float:right;" class="btn btn-inverse pull-right" type="submit" value="sign-in" />                                    
                                </aui:button-row>                                                   
                            </div>  
                        </form>                 
                    </div>      
                </div>          
            </aui:fieldset>         
        </aui:form>                         
        <c:if test="<%= windowState.equals(WindowState.MAXIMIZED) %>">
            <aui:script>
                Liferay.Util.focusFormField(document.<portlet:namespace />fm.<portlet:namespace />login);
            </aui:script>
        </c:if>

        <aui:script use="aui-base">
            var password = A.one('#<portlet:namespace />password');
            if (password) {
                password.on(
                    'keypress',
                    function(event) {
                        Liferay.Util.showCapsLock(event, '<portlet:namespace />passwordCapsLockSpan');
                    }
                );
            }
        </aui:script>
    </c:otherwise>
</c:choose> 
```

以上是我的 login.jsp 现在面临的问题是，当我曾经删除历史记录，然后当我刷新页面时，它只给了我一个标签，即“您的登录身份”：用户名

但是我怎么能防止这种情况，当用户清除历史记录时，它应该被重定向到登录页面而不是这个页面，因为我现在正在获取......我想知道如何从 jsp 页面重定向到 c/portal/login url本身？

# ios - EXC_??? 在执行 executeFetchRequest 时

> ID：14812611
> 
> 赞同：1
> 
> 时间：2013-02-11T13:07:22.350
> 
> 标签：ios, core-data

我正在尝试将外部数据添加到 SQLite / 使用 Core Data 更新现有数据。

基本上，我从外部 Web 服务获得了一个 JSON，我正在使用以下代码来确定是否应该在 DB 中添加新对象或更新现有对象。

```
NSFetchRequest *fetch = [[NSFetchRequest alloc] init];
[fetch setEntity:[NSEntityDescription entityForName:@"name" inManagedObjectContext:context]];
[fetch setPredicate:[NSPredicate predicateWithFormat:@"id = %@", [data valueForKey:@"key"]]];
NSArray *results = [context executeFetchRequest:fetch error:nil];

if (results.count == 1)
{
    // update existing
}
else
{
    // add new
} 
```

问题是：有时这段代码会导致异常：

```
Thread 1: EXC_??? (11) (code=0, subcode=0x0) 
```

异常在`NSManagedObjectContext executeFetchRequest:error:`

如果我继续执行我的应用程序，一切似乎都很好。

我应该担心这个例外吗？

我的意思是拥有它有点烦人，但更重要的是要知道这个异常的原因和后果是什么？

一些额外的细节（以防万一）：

*   上面的代码在一个循环中被执行多次（大约 25 万次）。
*   代码在主线程上运行（是的，我知道，但它是一种原型）。
*   上下文是在主线程上创建的。
*   外部数据在后台线程中创建

**[编辑]**更多细节：

*   `executeFetchRequest:error`即使引发异常，也返回初始化数组。
*   `error`当我提供参数时没有设置错误`executeFetchRequest:error`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:38:51.710

那不安全。

您应该检查方法的返回以确保您收到了一个数组

```
NSArray *results = [context executeFetchRequest:fetch error:nil];
if (!results) {
    // An error occurred you should probably use the out error
} 
```

此外，CoreData 似乎在内部抛出异常但会处理它们，所以如果你设置了异常断点，它很可能会在 CoreData 堆栈中的随机点被捕获——我是根据过去的经验说的，不确定它是否记录在任何地方，但它是本视频中提到的[调试技巧 - Mike Hay](http://cocoaheads.tv/debugging-tips-by-mike-hay/)

# mysql - Mysql同步关系数据库

> ID：14812612
> 
> 赞同：1
> 
> 时间：2013-02-11T13:07:23.230
> 
> 标签：mysql, database, synchronization, relational-database

**我的问题 ：**

如何同步 2 个 mysql 数据库（离线本地数据库与主在线数据库）？

问题是数据库是关系型的，并且 id 一如既往地自动递增，所以如果我只是使用插入同步它会弄乱我的推荐人。

> 这是我制作的诊所管理应用程序，问题目前在服务器上，但有时我的用户诊所的互联网连接出现故障/速度变慢，所以我需要让他在离线模式下工作（将所有内容存储到本地数据库）并手动同步（双向）在一天结束时使用远程数据库。所以基本上每个诊所都应该有自己的本地数据库，并让它们都同步到中央数据库

表的例子。

db.Cental.users

```
|id|user|clinic  |
|01|demo|day care|
|02|nurs|er      |
|03|demX|day care| 
```

db.day care.users

```
|id|user|clinic  |
|01|demo|day care|
|02|demX|day care| 
```

（注意 id 不一定在中央数据库和本地数据库之间匹配，但两者上的数据库结构是相同的）

例子： ![我的主数据库比这个更复杂，但这应该作为一个例子](../Images/6514f5b915098b10738716792f0ea55f.png)

数据库信息：

1.  每个用户都有很多访问，插件。

2.  每次访问都包含 1 个用户作为患者 ID，1 个用户作为医生 ID

3.  每个插件都有一个用户，许多输入

4.  plugin_inputs 有一个插件

我在服务器上有 2 个数据库 1 和其他在本地托管 - 用于离线模式 -

我想要的是能够将本地数据库与在线数据库同步，但是由于我有超过 1 个用户，不止一个本地数据库，所以每个人都将具有几乎相同的 id，而在线数据库应该包含所有这些数据库。

那么我怎样才能将它们同步在一起呢？

我用户 php/mysql(在线)/sqlite(本地)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:29:55.053

您可以做几件事。

首先，您可以考虑用户表的复合主键 - 例如，您可以在主键中包含“Clinic”。这样，您就知道即使自动增量值重叠，您也始终可以唯一地标识用户。

然后，“访问”表需要在外键中包含 patient_clinic 和 doctor_clinic。

或者 - 更脏 - 您可以简单地将每个诊所的自动增量字段设置为从不同的数字开始：`ALTER TABLE user AUTO_INCREMENT = 10000;`将用户表的第一个 auto_increment 设置为 10000；如果下一个诊所将其设置为 20000（或其他任何值），您可以避免重叠（直到您超过该幻数，这就是它脏的原因）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-10T22:10:42.710

我很想重新设计应用程序架构，在“远程”端有一个 API，在“本地”端有一个在每天结束时运行的作业，以将所有“本地”数据发布到“远程” API。

这样，您可以让“本地”作业创建类似于以下内容的 JSON 消息：

```
{ user_visit: 
    { 
      user_id: 1, 
      doctor_id: 1, 
      plugins: [
          {
          plugin_name: name,  
          data: {
              data_field1: "VALUE",
              data_field2: "VALUE2",
              data_fieldxx: "VALUExx"
          }

      ]
    }
} 
```

并将每条消息发送到 API。在 API 中，您将遍历 JSON 消息，重建关系并将它们相应地插入“远程”数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-11T15:27:09.603

在本地数据库中创建“id”和“id_offline”列。使用“id_offline”建立表之间的所有关系并使用自动增量。“id”将匹配 MySQL “id”，并以空值开头。向服务器发送数据时，会检查“id”是否等于null，如果是则“insert”如果不是“update”，然后使用MySQL的“RETURNING”函数返回自动生成的id 并将此信息返回给发出请求的设备。当设备收到新的 id 后，更新本地数据库的“id”列与 MySQL 相同。

# git - Git 子模块是脏的？

> ID：14812615
> 
> 赞同：5
> 
> 时间：2013-02-11T13:07:41.413
> 
> 标签：git, git-submodules

我刚刚将一个存储库作为子模块克隆到我的一个项目中。艾尔很好，工作正常，但突然间我收到了这条信息`git status`；

```
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#   (commit or discard the untracked or modified content in submodules)
#
#       modified:   wp-content/plugins/advanced-custom-fields (untracked content
)
# 
```

如果我这样做，`git diff`我会得到以下信息：

```
-Subproject commit 486e51db9b6ce49114c897ed1893a208d2289a29
+Subproject commit 486e51db9b6ce49114c897ed1893a208d2289a29-dirty 
```

令人担忧的是 -dirty 的变化。这是什么意思？我如何解决它？我没有对存储库进行任何更改。但 Dreamweaver 可能向其中添加了愚蠢的 _notes 文件夹。我试图删除它们，但仍然有同样的问题。这是导致它变脏的原因吗？

如果我尝试去做，`git add -A`它仍然会说我有未跟踪的内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T13:11:51.070

-dirty 后缀表示子模块已更改。做这个：

```
cd wp-content/plugins/advanced-custom-fields 
```

然后

```
git status 
```

您会看到哪些更改导致您的子模块变脏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:14:01.720

问题在于我怀疑 Dreamweaver 创建了它的 *_notes* 文件夹。我发现了如何通过[http://forums.adobe.com/docs/DOC-1671禁用它](http://forums.adobe.com/docs/DOC-1671)

正如**@Woodrow Douglass**提到的那样，我需要检查我的子模块文件夹以查看发生了什么变化。更改是创建的 *_notes* 文件夹的负载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:09:39.647

尝试`git add wp-content/plugins/advanced-custom-fields`

# c# - 为什么 RestSharp 不支持 Windows Phone 上的同步请求？

> ID：14812616
> 
> 赞同：2
> 
> 时间：2013-02-11T13:07:42.643
> 
> 标签：c#, rest, restsharp

为什么 RestSharp 不支持 Windows Phone 上的同步请求？我很好奇，这是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:09:35.130

所有与网络相关的 Windows Phone（和 Windows Store 应用程序）IO 都是异步的。这个想法是你应该拥抱异步，以保持你的 UI 响应。

看看周围的“核心”API`WebRequest`等等——Windows Phone 版本中故意缺少所有同步部分。

RestSharp 在这里逆势而上是很奇怪的。

# r - 按最多每日记录的子集数据框

> ID：14812618
> 
> 赞同：3
> 
> 时间：2013-02-11T13:07:46.263
> 
> 标签：r, dataframe, subset

我正在处理一个大型数据集，下面可以显示一个示例。对于我必须处理的大多数单个文件，应该有超过一天的数据。

```
Date <- c("05/12/2012 05:00:00", "05/12/2012 06:00:00", "05/12/2012 07:00:00",
          "05/12/2012 08:00:00", "06/12/2012 07:00:00", "06/12/2012 08:00:00", 
          "07/12/2012 05:00:00", "07/12/2012 06:00:00", "07/12/2012 07:00:00",
          "07/12/2012 08:00:00")
Date <- strptime(Date, "%d/%m/%Y %H:%M")
c <- c("0","1","5","4","6","8","0","3","10","6")
c <- as.numeric(c)
df1 <- data.frame(Date,c,stringsAsFactors = FALSE) 
```

我希望只留下一天的数据。这一天将通过当天的数据点最多来选择。如果由于任何原因两天被捆绑（具有最大数据点数），我希望选择记录的个人价值最高的一天。

在上面给出的示例数据框中，我将留下 12 月 7 日。它有 4 个数据点（与 12 月 5 日一样），但它具有这两天中记录的最高值（即 10）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T13:17:49.233

一个`data.table`解决方案：

```
dt <- data.table(df1)
# get just the date
dt[, day := as.Date(Date)]
setkey(dt, "day")
# get total entries (N) and max(c) for each day-group
dt <- dt[, `:=`(N = .N, mc = max(c)), by=day]
setkey(dt, "N")
# filter by maximum of N
dt <- dt[J(max(N))]
setkey(dt, "mc")
# settle ties with maximum of c
dt <- dt[J(max(mc))]
dt[, c("N", "mc", "day") := NULL]
print(dt)

#                   Date  c
# 1: 2012-12-07 05:00:00  0
# 2: 2012-12-07 06:00:00  3
# 3: 2012-12-07 07:00:00 10
# 4: 2012-12-07 08:00:00  6 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T13:26:02.970

这是一个解决方案`tapply`。

```
# count rows per day and find maximum c value
res <- with(df1, tapply(c, as.Date(Date), function(x) c(length(x), max(x))))

# order these two values in decreasing order and find the associated day
# (at top position):
maxDate <- names(res)[order(sapply(res, "[", 1), 
                            sapply(res, "[", 2), decreasing = TRUE)[1]]

# subset data frame:
subset(df1, as.character(as.Date(Date)) %in% maxDate)

                  Date  c
7  2012-12-07 05:00:00  0
8  2012-12-07 06:00:00  3
9  2012-12-07 07:00:00 10
10 2012-12-07 08:00:00  6 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T13:33:27.663

为了完整起见，这里有一个`plyr`：

```
library(plyr)
df1$day <- strftime(df1$Date, "%d/%m/%Y")
tmp <- ddply(df1[,c("day","c")], .(day), summarize, nb=length(c), max=max(c))
tmp <- tmp[order(tmp$nb, tmp$max, decreasing=TRUE),]
df1[df1$day==tmp$day[1],] 
```

这使 ：

```
 Date  c        day
7  2012-12-07 05:00:00  0 07/12/2012
8  2012-12-07 06:00:00  3 07/12/2012
9  2012-12-07 07:00:00 10 07/12/2012
10 2012-12-07 08:00:00  6 07/12/2012 
```

# javascript - JQGrid 一次更新多行然后保存

> ID：14812620
> 
> 赞同：2
> 
> 时间：2013-02-11T13:07:49.723
> 
> 标签：javascript, jquery, jqgrid

我需要能够一次更新`'n'`行数。

我通过`SELECT`在 1 个特定列的列标题中添加一个来实现这一点。这将为用户提供选择是/否选项并使网格视图中所述特定列中的所有后续行的选项，是或否的选择取决于用户的选择。

我已经成功地做到了这一点。我的问题现在是将“新”更新的行数据发送到服务器。

我已经尝试`saveRow()`使用视图中每一行的行 ID。这没有任何作用。没有`AJAX`呼叫。

有人可以指出我正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T14:48:55.263

我写答案只是因为您要求指出正确的方向。将数据从本地网格发送到服务器并不复杂（例如，请参见[此处）。](https://stackoverflow.com/a/6800440/315935)主要问题是case是并发。

在我看来，任何 Web 应用程序都不应仅作为一个用户应用程序工作。我写了多个答案（例如，请参见[此处](https://stackoverflow.com/a/5943297/315935)或[此处](https://stackoverflow.com/a/6640515/315935)），其中我描述了我的观点，即由于可能的并发错误，最好在修改后直接更新已修改的行。更新发生得越晚，相同行已经被另一台计算机上的另一个用户修改的可能性就越高。因此，我建议您使用标准`saveRow`行为并在修改后直接发送修改后的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:41:13.827

I have solved this by simply making an AJAX call myself to the file that is declared in JQGrid. Passing all relevant data everything worked how I needed it to

# sql-server-2008 - 如何启动 SQL Server 浏览器？

> ID：14812621
> 
> 赞同：0
> 
> 时间：2013-02-11T13:07:49.933
> 
> 标签：sql-server-2008, sql-server-2008-express

我已经安装了名为 SQLEXPRESS 的 2008 Express，我需要启动并运行 SQL Server Browser，但我该怎么做呢？

我尝试将启动模式设置为“自动”，但是当我单击保存时，统计服务无法启动，因为它已被停用或因为它没有连接任何设备（粗略翻译）。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T21:34:11.027

我也遇到过这个问题。

为了使这项工作进入 Sql Sever 配置管理器。

1.  停止 SQL Server 服务（这很重要）
2.  右键单击 SQL Server 浏览器 --> 属性
3.  在服务选项卡的启动模式下的下拉列表中选择自动
4.  申请
5.  启动两个服务

您的错误可能是您没有停止与浏览器关联的 SQL Server。

干杯，D.

# php - 为什么我们在某些地方使用 fetch_array() 而在其他地方使用 result()？

> ID：14812622
> 
> 赞同：0
> 
> 时间：2013-02-11T13:07:52.853
> 
> 标签：php, mysql, codeigniter, object

我正在关注 Codeigniter 框架。我只是不学习如何连接到数据库和检索值。我的模型功能是：-

```
public function getAll()
    {

        $query = $this->db->query("SELECT * FROM company_basic_details");

        return $query->result();

    } 
```

为什么我们不在这里使用`fetch_array()`or `fetch_assoc()`or `mysqli*`。在我使用的第一个 OO php-mysql 程序中：-

```
$query = "SELECT company_id FROM company_basic_details WHERE company_name = 'ABC'";
$result = $db->query($query);

while($row = $result->fetch_array())
{
    echo $row['company_id'];
} 
```

为什么我们在某些地方使用 fetch_array() 而在其他地方使用 result()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:11:08.133

仔细看。没有不同？

```
$query->result()
$result->fetch_array() 
```

`$query->result()`是关联数组的数组，即结果集。 `$result->fetch_array()`在这里，您从结果集中获取一行，即关联数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T13:15:43.250

你不是，也不应该是。

result() 或 result_array() 是 Codeigniter 包装函数。您应该始终在 CI 应用程序中使用它们。

这两个都是返回的整个结果集。要访问单行（例如，在 foreach 中），您可以使用 row() 和 row_array()

fetch_array() 不应该直接在 CI 中使用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T13:13:09.580

在 CodeIgniter 中，`$query->result()`将返回一个对象数组，而`$query->result_array()`将返回一个纯数组。

请参阅[http://ellislab.com/codeigniter/user-guide/database/results.html](http://ellislab.com/codeigniter/user-guide/database/results.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-11T13:14:17.570

如果您使用的是 Codeigniter，它带有他自己的一组功能是很正常的。此函数将查询结果作为对象数组返回，或者在失败时返回空数组。

```
foreach ($query->result() as $row)
{
   echo $row->title;
   echo $row->name;
   echo $row->body;
} 
```

它具有与您的 fetch 数组相同的行为。不同之处在于它将结果放在 $row 类中。

# android - Android 列表项焦点不会停留在ItemLongclickListener

> ID：14812625
> 
> 赞同：1
> 
> 时间：2013-02-11T13:08:04.680
> 
> 标签：android

我对 listview 项目有严重问题。我的要求是当我**长按列表项或拖动列表项** 时，焦点应该保持不变。目前我正在为列表项使用以下选择器。但这并没有给我预期的结果，而且焦点正在迷失

```
<item android:state_pressed="true"
        android:drawable="@drawable/detail_btn_frame_select" /> 
<item android:state_selected="true" 
        android:drawable="@drawable/detail_btn_frame_select" />
<item android:state_focused="true"
    android:drawable="@drawable/detail_btn_frame_select" />
 //Default
 <item
        android:drawable="@drawable/detail_btn_frame_norm" /> 
```

请在这方面提供帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:15:35.047

尝试这个，

```
android:state_focused="true" 
```

在你的选择器 xml

# wpf - WPF Longtouch 干扰 TouchEnter

> ID：14812631
> 
> 赞同：0
> 
> 时间：2013-02-11T13:08:18.260
> 
> 标签：wpf, xaml, touch

我有一个矩形，它应该在 TouchEnter 上触发一个事件。但是当我触摸矩形时，直到 longtouch 结束，什么都没有发生。看起来它正在等待确保在 TouchEnter 启动之前没有长触。

如果我触摸矩形并稍微移动（因此不再有 LongTouch），它会触发事件。

我怎样才能摆脱这个：“我最好等待 longTouch 完成，直到我触发 touchEnter”？

TouchDown 事件也会发生同样的情况......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:35:59.947

它只发生在我的触摸显示器上。使用平板电脑效果很好。

所以我认为这取决于硬件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T21:19:23.277

在可视化树中将附加属性[Stylus.IsPressAndHoldEnabled](http://msdn.microsoft.com/en-us/library/system.windows.input.stylus.ispressandholdenabled.aspx)和[Stylus.IsFlicksEnabled](http://msdn.microsoft.com/en-us/library/system.windows.input.stylus.isflicksenabled.aspx)在 xaml 或代码中设置为 false。

由于触摸需要延迟来确定用户想要做什么，因此这些将禁用在进行触摸输入和向下时遇到的大部分延迟。

# xamarin.ios - 使用 profiller 工具在 monotouch 和 mvvmcross 中寻找内存泄漏

> ID：14812636
> 
> 赞同：5
> 
> 时间：2013-02-11T13:08:29.407
> 
> 标签：xamarin.ios, garbage-collection, mvvmcross

我一直在努力消除我们单声道触摸中的内存泄漏，并在过去几天学到了很多东西，例如，在垃圾收集成功之前几乎总是需要取消挂钩的一些事件:)

但是现在我一直在使用分析工具，我可以看到大部分内存都被字符串使用（或者看起来），请看下面的屏幕转储： ![在此处输入图像描述](../Images/ae747bd58412114142e6eece1b4c18fb.png)

![在此处输入图像描述](../Images/8e37fc61eafc9beb07da8d943706c9a3.png)

但正如您所见，mono 也使用了一些内存。我一直在处理我们的视图模型和视图，其中大部分都是正确收集的垃圾。如果我查看有时引用它们的字符串，我不知道如何处理这些信息。如果我可以减少字符串使用的内存量，你们有什么建议吗 :) 我试图找到任何可能启发这些数字含义的教程或类似内容，但没有运气。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:48:51.867

我个人经验的一些答案：

*   对于教程，我只知道[http://docs.xamarin.com/ios/Guides/Deployment%252c_Testing%252c_and_Metrics/Monotouch_Profiler](http://docs.xamarin.com/ios/Guides/Deployment%252c_Testing%252c_and_Metrics/Monotouch_Profiler)

*   我发现“反向引用”选项是最有用的功能之一——重要的不是你有很多字符串，而是拥有这些字符串的是什么。

*   我发现寻找这些错误的最佳方法是在一个简单的测试工具和/或测试序列中重现它们——随着应用程序变得越来越大，我使用越来越多的组件——MvvmCross、JSON.Net、SQLite-net 等——更多和更多的异步方式，然后我发现我需要减少这些组件的数量来识别泄漏。

*   一旦你有了一个简单的测试工具，HeapShot 中的过滤器选项就会有所帮助——因为它可以让你专注于已知命名空间中的类。

*   一旦你有了一个简单的测试工具，那么比较两个 HeapShot 也会有所帮助 - 你的测试 UI 中的哪些操作会导致 HeapShot 之间的增加？

    **差异很重要**——一些库故意在内存中缓存东西——例如，你的 HeapShot 图像中的一些 PropertyInfo 可能会被其中一个库故意缓存以提高反序列化速度。

* * *

为了更容易交叉引用，添加链接到链接问题的链接：

*   [Mono touch 和 mvvmcross 中自定义视图绑定的垃圾收集问题](https://stackoverflow.com/questions/14771064/garbage-collecting-issue-with-custom-viewbinding-in-mono-touch-and-mvvmcross?rq=1)
*   [何时在 mono touch / mvvmcross 中释放对象](https://stackoverflow.com/questions/14688044/when-to-release-objects-in-mono-touch-mvvmcross?rq=1)
*   [MVVMCross - SqlBits 内存泄漏](https://stackoverflow.com/questions/11735764/mvvmcross-sqlbits-memory-leak?rq=1)
*   [使用 mvvmCross 帮助 mono droid 中的 GC](https://stackoverflow.com/questions/12494804/helping-the-gc-in-mono-droid-using-mvvmcross?rq=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T14:23:35.743

除了 Stuart 的出色回答，我想强调您应该在设备上进行分析。设备上的执行针对运行时性能进行了调整，而模拟器针对*构建*性能进行了调整（以便编辑-调试周期尽可能快）。除此之外，这意味着在模拟器中运行时使用的内存比在设备上使用的内存更多。

# android - 如何在类之间传递视图

> ID：14812638
> 
> 赞同：2
> 
> 时间：2013-02-11T13:08:32.340
> 
> 标签：android

在空闲时间，我已经在 android 上工作了几个月，所以我可能会问一些愚蠢的问题。

在一个类中，我创建了一个对象，例如一个按钮，并且我想从其他类中“访问”它。

当然我可以这样做：

```
public class CreateButton{

      public void createButton(){

         Button myButton = new Button(context);         

        //I can "pass" my object to another class this way
        ManageButton manageButton = new ManageButton(myButton);

        // or this way
        manageButton.writeButtonTextMethod(myButton); 

     }
} 
```

或者这样

```
public class CreateButton{

      public Button createButton(){

        Button myButton = new Button(context);
        return myButton;

      }

}

public class ManageButton{

      public void writeButtonTextMethod(){

        CreateButton createButton = new CreateButton()     
        Button myButton = createButton.createButton();
        myButton.setText("W"); 

      }   
} 
```

我想知道是否有办法直接从**ManageButton.class**（和其他类）在**createButton.class中创建“到达”myButton。**

 **使用上面的代码，我必须 从 **ManageButton.class中“调用”** **createButton.class** ，反之亦然，才能管理 myButton。

 **我可以将 myButton 设为**静态**，但将视图设为静态是不正确的。

例如，我可以轻松访问在扩展**Application**的类中创建的变量。视图有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:13:28.867

> 许多人/指南/文章声称可以通过使用应用程序在活动之间正确共享对象（和字段），这种方式：

这样的人是白痴，`myButton`除非非常小心，否则会引入内存泄漏。

> 所以，我仍然不确定我应该如何在不同的活动之间共享对象（TextView、Button、ImgaeView 等）。

您不会在活动之间共享小部件。最多，您在活动之间共享模型数据（或者更好的是，指向集中存储的模型数据的指针）。

在 Web 应用程序中，您不会在 Web 页面之间共享 DOM 节点，因为这是不可能的。您最多可以在网页之间共享作为 GET 参数等传递的数据，或者将数据存储在本地中央存储（cookie、本地存储、IndexedDB 等）中。Android 活动就像网页——它们是松散耦合的。

如果您的 UI 片段耦合*得如此*紧密，以至于它们绝对*需要*共享小部件，那么它们不应该是单独的活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:15:23.763

视图并不意味着在活动之间共享。即使您确实无视并共享它们，您也很可能会遇到 a `WindowManager$BadTokenException`，这本质上意味着您无法在其父 Activity 之外更改 Views。

但是，要以更一般的方式回答您关于共享非视图对象的问题，Application 类是正确的方法。但是，将对象设为静态并不是正确的做法。相反，使它们成为实例变量，并在您的各种活动中使用以下方法访问它们：

```
Application application:

//Below line is in onCreate()
application = this.getApplication(); 
```

之后，使用简单的访问它

```
application.myObject; //Or you could use getters and setters. Your choice. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:17:13.557

不太清楚为什么要在两个活动之间共享一个按钮？！它是 ActivityA 还是 ActivityB 中的按钮？没有必要，或者用来做它..你不应该这样做。

**编辑：**这是更多的**Java基础主题**然后是Android ..据我了解，你称“类”是恕我直言的方法（因为你不能调用类，因为你描述了什么）。

***我可以在这里给你最好的建议：***

1.  *学习 Java 基础知识（方法、类、对象、构造函数、继承..）*，
2.  *学习 Android 基础知识（有 1 个活动的简单示例，直到你很好地理解它）*，
3.  *制作将扩展标准按钮的 MyButton 类*，
4.  *创建按钮并更改其属性*

***这几项任务会让你忙一段时间。放轻松，因为稍后使用复杂的应用程序会更容易。***希望我对你有所帮助。干杯

**EDIT2：**在你写的最后一个例子中（在这个答案的评论中），没有任何意义，因为我们之前写了你，你没有在两个活动之间共享按钮。暂停！*再读一遍：* **你不应该在两个 Activies 之间共享按钮**。你问的问题不清楚，因为对于 A 和 Z，你不能只说他们之间的课程和“分享”按钮。哪一堂课？没有写任何代码，所以很难弄清楚你想要什么..：s

**最后最后一次编辑：**伙计.. 请理解您缺少 Java 基础知识。这里没有恶意，只是试着指导你并告诉你你应该学习什么。为什么？因为当类使用一个名称完全相同的方法时，你很困惑地解释你的意思并不令我感到惊讶。它们只是“做某事”的对象，你想通过在构造函数中添加变量来“管理”它们不存在等。学习，下次立即编写代码以节省我们所有人的时间。干杯，享受学习****

# google-visualization - 是否可以使用 Google ColumnChart 在条之间留出空间

> ID：14812641
> 
> 赞同：4
> 
> 时间：2013-02-11T13:08:40.770
> 
> 标签：google-visualization

我正在使用以下显示我的记录的柱形图，我想在生成的条之间留出空格，请帮忙。

```
<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Date', '11-02-2013', '11-02-2013','11-02-2013','11-02-2013'],

          ['Weeks',  10,20,30,5],

        ]);

            var options = {
              title: 'Weekly Average Weight Loss Performance Chart For All Users',
              is3D: true,
              //isStacked: true,
               isHtml: false,
              // colors: ['d2ac2c', 'ff0000', '029748'],
               bar: { groupWidth: '10%' },
               legend:{position: 'bottom'},
               //chbh:'0,10,0',
              //hAxis: {title: 'Year', titleTextStyle: {color: 'red'}}
            };

        var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

![在此处输入图像描述](../Images/52ca9f039398e0642a66ab94485f84f1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-16T13:28:45.500

var options = { bar: { groupWidth: '100%' },

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T03:01:39.037

柱形图的通常格式是每个系列都有自己的列，按行分组。由于您在同一行中拥有所有 4 个数据点，因此您最终会将它们全部聚集在同一组中。如果您更改数据，您将得到分离，因为每个数据都将在一个单独的组中：

```
var data = google.visualization.arrayToDataTable([
  ['Date', 'Data'],
  ['11-02-2013', 10],
  ['11-02-2013', 20],
  ['11-02-2013', 30],
  ['11-02-2013', 5]
]); 
```

如果你想显示多个人，按周分组，那么你会做这样的事情：

```
var data = google.visualization.arrayToDataTable([
  ['Date', 'Alan', 'Beatrice', 'Charlie', 'Diana'],
  ['11-02-2013', 10, 5, 15, 20],
  ['11-02-2013', 20, 1, 2, 3],
  ['11-02-2013', 30, 25, 20, 15],
  ['11-02-2013', 5, 7, 9, 11]
]); 
```

这将按周对您的数据进行分组（因此所有 4 个人将在同一周显示为一个组），而周之间存在间隔（每个“组”数据之间）。

# iphone - 找到 UIVIew 的真实框架

> ID：14812649
> 
> 赞同：1
> 
> 时间：2013-02-11T13:09:02.160
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uiview

`UIView`我在课堂上创建了一个习惯。然后我将它添加到我的屏幕上，我想知道它是`CGRect`. 但从表面上看，我似乎无法得到这个特定的大小`UIView`。这是我的代码：

```
CGRect labelFrame;
        if (!tickerImage) {
            labelFrame = CGRectMake(upperTextField.frame.origin.x + 8, upperTextField.frame.origin.y, 0, 0);
        } else {
            labelFrame = CGRectMake(upperTextField.frame.origin.x + 16, upperTextField.frame.origin.y, 0, 0);
        }

        SGNewLabel = [[SGAdressLabel alloc] initWithFrame:labelFrame];
        [labelsArray addObject:SGNewLabel];
        [self.view addSubview:SGNewLabel];

        [SGNewLabel addNewLabelWithText:labelText andTickerImage:tickerImage];

        UIView *lastLabel = [labelsArray lastObject];
        CGRect newTextFieldFrame = CGRectMake(lastLabel.frame.origin.x + lastLabel.frame.size.width, labelFrame.origin.y, 320, 30);
        upperTextField.frame = newTextFieldFrame; 
```

如您所见，我`upperTextField`根据自定义的框架设置框架，`SGNewLabel`这似乎是错误的，即使放入`NSArray`. 我`0, 0`在声明的末尾设置，`labelFrame`因为我不知道未来对象的大小，这就是我的问题的根源。

我怎样才能纠正它并获得我的 UIView 的正确大小？

**编辑**：我认为的 NSLog 给了我这个：

```
NSLog(@"The rect of object is: %@", NSStringFromCGRect(self.frame));
2013-02-11 17:16:02.333 MyApp[2383:c07] The rect of object is: {{24, 55}, {0, 0}} 
```

本身是正常绘制的`UIView`，我可以看到它的全尺寸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:20:48.550

我应该在自己的类中使用标签的框架集，然后我的代码将如下所示：

```
SGNewLabel = [[SGAdressLabel alloc] init];
CGRect labelFrame;
        if (!tickerImage) {
            labelFrame = CGRectMake(upperTextField.frame.origin.x + 8, upperTextField.frame.origin.y, SGNewLabel.frame.size.width, SGNewLabel.frame.size.height);
        } else {
            labelFrame = CGRectMake(upperTextField.frame.origin.x + 16, upperTextField.frame.origin.y, SGNewLabel.frame.size.width, SGNewLabel.frame.size.height);
        }
SGNewLabel.frame = labelFrame; 
```

# c# - 如何在 C# 中格式化字符串以包含空格

> ID：14812656
> 
> 赞同：2
> 
> 时间：2013-02-11T13:09:28.400
> 
> 标签：c#

我的字符串是“2345000012999922”

我想将其转换为：2345 0000 12 9999 22。模式总是相同的 AAAA BBBB CC DDDD EE**但 EE 是可选的，可能不会被填充。**

我试过：

```
string.format("{0:#### #### ## #### ##}); 
```

没有成功。我使用了一个`long`变量而不是字符串，但仍然没有成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T13:13:23.497

试试这个：

```
void Main()
{
    var d = decimal.Parse("2345000012999922");

    Console.Out.WriteLine("{0:#### #### ## #### ##}", d);
} 
```

先转换成十进制，然后使用自己的策略。

数字的格式从右到左工作，这意味着如果您有 2 个数字，如下所示：

*   2345000012999922
*   23450000129999

我们做了类似的事情：

```
void Main()
{
    var d1 = decimal.Parse("23450000129999");
    var d2 = decimal.Parse("234500001299");

    Console.Out.WriteLine("{0:#### #### ## #### ##}", d1);
    Console.Out.WriteLine("{0:#### #### ## #### ##}", d2);
    Console.Out.WriteLine("{0:0000 0000 00 0000 00}", d1);
    Console.Out.WriteLine("{0:0000 0000 00 0000 00}", d2);
} 
```

我们会得到：

```
23 4500 00 1299 99
 2345 00 0012 99
0023 4500 00 1299 99
0000 2345 00 0012 99 
```

（注意 0 填充）。

在格式字符串中，“0”表示如果存在则将对应的数字放在这里，否则用0填充。“#”表示如果存在则将对应的数字放在这里，否则忽略它。

考虑到这一点，我认为您最好的策略是：

```
void Main()
{
    var s1 = "23450000129999";
    var s2 = "234500001299";
    var n1 = s1.Length;
    var n2 = s2.Length;
    var c = 12;
    var f1 = "{0:#### #### ## #### ##}";
    var f2 = "{0:#### #### ## ####}";
    var d1 = decimal.Parse(s1);
    var d2 = decimal.Parse(s2);

    Console.Out.WriteLine(n1 > c ? f1 : f2, d1);
    Console.Out.WriteLine(n2 > c ? f1 : f2, d2);
} 
```

这将给出：

```
23 4500 00 1299 99
23 4500 00 1299 
```

这个想法是您首先检查输入字符串的字符串长度。如果它是 12，那么您缺少最后一个可选位，因此您使用截断的格式字符串。如果大于 12（或等于 14），则使用完整的格式字符串。

正则表达式和字符串操作等其他方法也是很好的方法，尽管我怀疑它们的性能较差。不过，您应该测试所有方法，特别是如果这段代码将运行很多次（例如，如果您在表格中显示数据）。

您可以通过定义类似的东西来使用扩展方法进一步提高代码的可读性

```
public static class FormattingHelper
{
    public static string GetFormatString(this string s)
    {
        if (s.Length == 12)
            return "{0:#### #### ## ####}";
        else
            return "{0:#### #### ## #### ##}";
    }
}

void Main()
{
    var s1 = "23450000129999";
    var s2 = "234500001299";
    var d1 = decimal.Parse(s1);
    var d2 = decimal.Parse(s2);

    Console.Out.WriteLine(s1.GetFormatString(), d1);
    Console.Out.WriteLine(s2.GetFormatString(), d2);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T13:13:46.293

```
string s = "2345000012999922";
s = s.Insert(14, " ").Insert(10, " ").Insert(8, " ").Insert(4, " ");
Console.WriteLine(s); 
```

注意：从末尾插入空格（即索引向下），以便您可以使用原始字符串中的索引。如果您以另一种方式尝试，则必须向每个索引连续添加 1 以说明在当前添加空间的位置之前添加的新空间。不重要，但我认为索引是否与在原始字符串中添加空格的位置匹配更容易理解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T13:55:22.150

就像另一种方式一样（对于所有有点愚蠢的人）：

```
string input = "2345000012999922";
string Formatted = new Regex(@"(\d{4})(\d{4})(\d{2})(\d{4})(\d{2})").
    replace(input, "$1 $2 $3 $4 $5");

//Formatted = 2345 0000 12 9999 22 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T13:12:16.603

使用时对我有用`long`（PowerShell 测试，对于 C# 应该是相同的）：

```
PS> '{0:#### #### ## #### ##}' -f 2345000012999922
2345 0000 12 9999 22 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T13:20:36.937

```
string.Format("{0:#### #### ## #### ##}", 2345000012999922) 
```

**输出**

```
2345 0000 12 9999 22 
```

**已编辑**

这也对你有用

```
string str = "2345000012999922";

string str2 = string.Format("{0:#### #### ## #### ##}", Convert.ToDouble(str)); 
```

# wordpress - 帖子包含数字符号时的Wordpress 501错误

> ID：14812657
> 
> 赞同：2
> 
> 时间：2013-02-11T13:09:30.337
> 
> 标签：wordpress, apache

我的 Wordpress 博客有问题。

显然，我的帖子包含一些标签`<span style="color:#ff0000">`，比如给一些东西上色。但是，如果我在该样式属性中使用数字符号 (#)，当我单击“更新帖子”时，服务器会返回

`HTTP 501 Method Not Implemented POST to /wp-admin/post.php not supported.`

然后我试着写下颜色的名称，就像`<span style="color:red">`没有错误一样。

服务器是 Apache & PHP 5.2.6 并且`mod_security`处于非活动状态。此外，我尝试在 html 标记中添加一个数字符号，在文本中，再次没有问题。

你能帮助我吗？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:30:30.533

不是真正的答案，但请尝试检查您的 apache 错误日志。希望它能为您提供有价值的信息，让您走上正确的道路。

# java - 返回 HashMap 添加到 List I have a problem in JAVA when i'm trying to return a HashMap that I have added to a list of type: List. I know I can use other type of lists, but I need to use List<object&g 0="" 3751="" 问问题="" 2013-02-11t13:09:50.347="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" i="" have="" a="" problem="" in="" java="" when="" i'm="" trying="" to="" return="" hashmap="" that="" added="" list="" of="" type:="" list<object="">. I know I can use other type of lists, but I need to use List List listOfObjects = new ArrayList(); HashMap <string, string="">hashmap = new HashMap<string,string>(); hashmap.put("x", "foo"); hashmap.put("y", "bar"); listOfObjects.add(hashmap); for (int i = 0; i < listOfObjects.size(); i++) { System.out.println(listOfObjects.get(i)); } I have added my hashmap to my listOfObject, but how do I get the HashMap from the listOfObject such that I can use the HashMap-commands. fx: hashmap.get("x) and it will return "foo". Normally i thought i could just write: listOfObjects.get(0).get("x") and it would return "foo" but that does not work. If anyone know another work around that's find but I just need to use a List. Normally i thought i could just write: listOfObjects.get(0).get("x") and it would return "foo" but that does not work. No, it wouldn't - because the type of listOfObjects.get(0) is just Object. How do you expect the compiler to know that it's meant to be a map? You can use: HashMap <string, string="">map = (HashMap<string, string="">) listOfObjects.get(0); // Use map... ... but be aware that due to the nature of generics in Java, that cast isn't really ensuring that all the key/value pairs in the map are "string to string". The cast would work even if you'd originally used: Map <integer, integer="">badMap = new HashMap<integer, integer="">(); badMap.put(0, 10); listOfObjects.add(badMap); You'll get a warning for this, but it's important to understand what it means. It's not clear what your use case is, but if you can make it more strongly typed (perhaps create a new class which contains a Map<string, string="">?) that would be good. Is every element of your list going to be a map? If so, why are you using List rather than a more strongly-typed list? If some elements aren't going to be maps, how can you tell which ones will be? (These are the sort of things you should be thinking about carefully.) javalistobjecthashmap 4 2 回答 2 This answer is useful 3 通常我认为我可以写：listOfObjects.get(0).get("x") 它会返回“foo”，但这不起作用。 不，它不会 - 因为类型listOfObjects.get(0)只是Object. 您如何期望编译器知道它是一个地图？ 您可以使用： HashMap <string, string="">map = (HashMap<string, string="">) listOfObjects.get(0); // Use map... ...但请注意，由于 Java 中泛型的性质，这种转换并不能真正确保映射中的所有键/值对都是“字符串到字符串”。即使您最初使用过，演员表也会起作用： Map <integer, integer="">badMap = new HashMap<integer, integer="">(); badMap.put(0, 10); listOfObjects.add(badMap); 你会收到一个警告，但理解它的含义很重要。目前尚不清楚您的用例是什么，但是如果您可以使其类型更强大（也许创建一个包含 ? 的新类），Map<string, string="">那就太好了。您列表中的每个元素都会成为地图吗？如果是这样，你为什么使用List而不是更强类型的列表？如果某些元素不会成为地图，您如何判断哪些元素会成为地图？（这些是你应该仔细考虑的事情。） 于 2013-02-11T13:12:14.970 回答 This answer is useful 1 I hope this will help u.. List listOfObjects = new ArrayList(); HashMap <string, string="">hashmap = new HashMap<string,string>(); hashmap.put("x", "foo"); hashmap.put("y", "bar"); listOfObjects.add(hashmap); for (int i = 0; i < listOfObjects.size(); i++) { System.out.println(((HashMap<string, string="">)listOfObjects.get(i)).get("x")); } Normally as your list is of type of object . so first cast it to HashMap type and then get the value from map please notice the following code System.out.println(((HashMap<string, string="">)listOfObjects.get(i)).get("x")); 于 2013-02-11T13:17:59.327 回答 Related 3 c++ - 检查线是否穿过 2D 地图上的墙壁 3 jquery - Jquery Ajax 调用路径 1 sql - SQL 实数与浮点数 2 jquery - 不能在 jQuery 中使用淡入淡出和循环 1 gwt - GWT 日历或日期选择器显示一年中的季节 2 android - 如何从数据库中获取随机字符串？ 1 jsf-2 - 单击命令按钮操作后，PanelGroup 未呈现 5 javascript - Shadowbox（图片库插件）仅显示黑色窗口 1 jquery - 删除特定的调整大小处理程序 jQuery 1 statistics - 用于分析项目中使用的编程语言的工具 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14812668
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java, list, object, hashmap

I have a problem in JAVA when i'm trying to return a HashMap that I have added to a list of type: `List<Object>`. I know I can use other type of lists, but I need to use `List<Object>`

```
List<Object> listOfObjects = new ArrayList<Object>();

    HashMap<String, String> hashmap = new HashMap<String,String>();
    hashmap.put("x", "foo");
    hashmap.put("y", "bar");

    listOfObjects.add(hashmap);

    for (int i = 0; i < listOfObjects.size(); i++) {
        System.out.println(listOfObjects.get(i));
    } 
```

I have added my hashmap to my listOfObject, but how do I get the HashMap from the listOfObject such that I can use the HashMap-commands. fx: hashmap.get("x) and it will return "foo".

Normally i thought i could just write: listOfObjects.get(0).get("x") and it would return "foo" but that does not work.

If anyone know another work around that's find but I just need to use a List.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:12:14.970

> 通常我认为我可以写：listOfObjects.get(0).get("x") 它会返回“foo”，但这不起作用。

不，它不会 - 因为类型`listOfObjects.get(0)`只是`Object`. 您如何期望编译器知道它是一个地图？

您可以使用：

```
HashMap<String, String> map = (HashMap<String, String>) listOfObjects.get(0);
// Use map... 
```

...但请注意，由于 Java 中泛型的性质，这种转换并不能*真正*确保映射中的所有键/值对都是“字符串到字符串”。即使您最初使用过，演员表也会起作用：

```
Map<Integer, Integer> badMap = new HashMap<Integer, Integer>();
badMap.put(0, 10);
listOfObjects.add(badMap); 
```

你会收到一个警告，但理解它的含义很重要。目前尚不清楚您的用例是什么，但是如果您可以使其类型更强大（也许创建一个包含 ? 的新类）*，*`Map<String, String>`那就太好了。*您列表中的每个*元素都会成为地图吗？如果是这样，你为什么使用`List<Object>`而不是更强类型的列表？如果某些元素不会成为地图，您如何判断哪些元素会成为地图？（这些是你应该仔细考虑的事情。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:17:59.327

I hope this will help u..

```
List<Object> listOfObjects = new ArrayList<Object>();

        HashMap<String, String> hashmap = new HashMap<String,String>();
        hashmap.put("x", "foo");
        hashmap.put("y", "bar");

        listOfObjects.add(hashmap);

        for (int i = 0; i < listOfObjects.size(); i++) {
            System.out.println(((HashMap<String, String>)listOfObjects.get(i)).get("x"));
        } 
```

Normally as your list is of type of object . so first cast it to HashMap type and then get the value from map

please notice the following code

```
 System.out.println(((HashMap<String, String>)listOfObjects.get(i)).get("x")); 
```</string,></string,></string,string></string,></string,></integer,></integer,></string,></string,></string,></integer,></integer,></string,></string,></string,string></string,></object&g>

# windows-phone-7 - 在 Windows Phone 的后台工作人员中使用计时器

> ID：14812669
> 
> 赞同：0
> 
> 时间：2013-02-11T13:09:53.813
> 
> 标签：windows-phone-7, windows-phone-8

我正在开发一个应用程序，它加载一些 url，解析它们，将它们保存到 sqlite db 中，UI 将读取保存的数据并在控件中显示它们。这一进展应该在几乎无限循环中完成。为了获得快速响应，我计划在主线程中从数据库中读取数据，并让另一个线程（后台工作人员）加载数据并将其插入数据库。在调度程序定时器中运行读写过程是否合乎逻辑并且可能，一个定时器在主线程中，另一个在后台工作者中？如何？或者有人有更好的主意吗？

```
main thread:
    DispatcherTimer _Timer1 = new DispatcherTimer();
                _Timer1.Interval = _Interval;
                _Timer1.Tick += _Timer1_Tick;
    void _Timer1_Tick(object sender, EventArgs e)
            {
               // read data from db and show in controls
             }

secondary thread:
    private void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker worker = sender as BackgroundWorker;
        DispatcherTimer _Timer2 = new DispatcherTimer();
                _Timer2.Interval = _Interval;
                _Timer2.Tick += _Timer2_Tick;

    }
    void _Timer2_Tick(object sender, EventArgs e)
            {
               // write data into db
             }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:12:29.110

你打算做的不会奏效。

您的`_Timer1_Tick`和`_Timer2_Tick`将在 UI 线程中运行。如果您在那里执行一些长时间运行的操作，它将挂起 UI。

我不明白，你为什么需要计时器？除了测量时间间隔之外，将计时器用于其他任何事情都不是一个好的策略。例如，您可以在后台无限循环中运行更新过程，只要它将新数据放入您调用的数据库`Dispatcher.BeginInvoke`（传递您想要的任何数据）以通知您的 UI 线程它应该使用新可用的数据更新自身。

顺便说一句，对于像“发送 HTTP 请求、等待响应、解析、存储、重复”这样的任务，新的 async/await 特性是一个自然的选择。对于 WP7，该功能可用作 Visual Studio 2010 的“异步 CTP”可再发行包，对于 WP8，它已集成到框架中。不过，两者之间存在一些兼容性问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T01:15:50.743

> 加载一些 url，解析它们，将它们保存到 sqlite db 中，UI 将读取保存的数据并在控件中显示它们

请不要那样做。不要创建自己的线程管理系统，只是不要。我并不是说它不会起作用，但它很可能会以最可怕和莫名其妙的方式适得其反。例如，使用 DisptacherTImer 会在您的脸上完全爆炸，因为它在 UI 线程上运行。如果您真的想使用线程，请考虑使用[ThreadPool.QueueUserWorkItem()](http://msdn.microsoft.com/en-us/library/kbf0f1ct.aspx)或[Task.Run()](http://msdn.microsoft.com/en-us/library/hh195051.aspx)来启动即发即弃的操作。

您的工作流程也很奇怪，我不明白为什么您需要将已经拥有的数据写入数据库，然后将其读回然后才使用它。使用反序列化的数据顺序写入数据库并呈现给 UI 不是更有意义吗？考虑到您已经拥有数据，而不是进行涉及磁盘 I/O 的不必要循环？

您是否考虑过在您的应用程序中使用消息传递？这是一个众所周知的 MVVM 模式，在 MVVM Light 中作为[Messenger](http://dotnet.dzone.com/articles/mvvm-light-whats-messenger)类和在 PRISM 中作为[EventAggregator 实现](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)。在我看来，您的系统有一条“可从服务获得新数据”的消息，并且该消息有两个订阅者：写入数据库和更新 UI。

# java - 查找用户给定日期之间的星期三

> ID：14812675
> 
> 赞同：-4
> 
> 时间：2013-02-11T13:10:12.333
> 
> 标签：java

我需要找到用户给出的两个日期的星期三。示例：输入是：从日期：07-Feb-2013 到日期：13-feb-2013 从日期和到日期之间的间隔始终为 7 天。预期产出：2013 年 2 月 12 日

```
public String getAutoDayExpiryDateAndToDate(String instrmentId,String deliveryAutoFromDate)
    throws SystemException, FunctionalException,ParseException
    {

        Calendar calendar = Calendar.getInstance();
        calendar.setTime(new Date(deliveryAutoFromDate));
        Date fromDate=calendar.getTime();
        SimpleDateFormat sf1 = new SimpleDateFormat("dd-MMM-yyyy");
        String formatedDate = sf1.format(fromDate);
        calendar.add(Calendar.WEEK_OF_MONTH, 1);
        calendar.add(Calendar.DAY_OF_WEEK,-1);
        Date time = calendar.getTime();
        SimpleDateFormat sf = new SimpleDateFormat("dd-MMM-yyyy");
        String formatedDate1 = sf.format(time);
    } 
```

在这些之后，我需要找到在 formatedDate 和 formatedDate1 之间存在的周三。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T13:14:32.777

使用[`Calendar`](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)类。将其设置为第一个日期，然后通过调用 来检查一周中的当前日期是否为星期三`calendar.get(Calendar.DAY_OF_WEEK)`。在循环中执行此检查，在每次迭代期间为当前日期添加一天。这永远不会超过七个步骤，所以你不需要做任何比这更花哨的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:18:36.190

这应该找到给定日期之后（或相等）的第一个星期三

```
 GregorianCalendar c = new GregorianCalendar(2013, 1, 7);
    if (c.get(Calendar.DAY_OF_WEEK) <= Calendar.WEDNESDAY) {
        c.add(Calendar.DAY_OF_YEAR, Calendar.WEDNESDAY - c.get(Calendar.DAY_OF_WEEK));
    } else {
        c.add(Calendar.DAY_OF_YEAR, 11 - c.get(Calendar.DAY_OF_WEEK));          
    }
    System.out.println(c.getTime()); 
```

印刷

```
Wed Feb 13 00:00:00 EET 2013 
```

你可以测试它，看看它是否能给你你想要的

# c++ - 修改用于构建 boost 的默认编译器路径

> ID：14812676
> 
> 赞同：2
> 
> 时间：2013-02-11T13:10:19.413
> 
> 标签：c++, linux, boost

我有一个旧版本的 boost 1.33.1。我想使用自定义 gcc 二进制文件构建它，该二进制文件位于默认路径以外的路径中。我在网上找不到该页面，所以我粘贴了`gcc-tools.jam`表单的第一部分`tools/build/v1/gcc-tools.jam`。

# 版权所有 (c) 2001 大卫亚伯拉罕斯。

```
 # Copyright (c) 2002-2005 Rene Rivera.
  # Distributed under the Boost Software License, Version 1.0.
  # (See accompanying file LICENSE_1_0.txt or http://www.boost.org/LICENSE_1_0.txt)

  # The following #// line will be used by the regression test table generation
  # program as the column heading for HTML tables. Must not include version number.
  #//<a href="http://gcc.gnu.org/">GNU<br>GCC</a>

  # compute directories for invoking GCC
  #
  # The gcc toolset can be user-configured using the following
  # variables:
  #
  # GCC_ROOT_DIRECTORY
  #       The directory in which GCC was installed. Defaults to
  #       unset. Usually, there is no need to set this variable at
  #       all. However, if G++ is not in the path it is usually
  #       sufficient to configure this one variable. More fine-grained
  #       configuration is available by setting the following:
  #
  # GCC_BIN_DIRECTORY
  #       the directory prefix used to find the gcc executables. Defaults to
  #       $(GCC_ROOT_DIRECTORY)/bin/, or "" if GCC_ROOT_DIRECTORY is
  #       not set.
  #
  # GCC_INCLUDE_DIRECTORY
  #       the directory in which to find system includes. Defaults to
  #       empty.
  #
  # GCC_STDLIB_DIRECTORY
  #       the directory in which to find the standard library
  #       objects associated with this build of gcc. Defaults to
  #       $(GCC_ROOT_DIRECTORY)/lib.
  #
  # GXX
  #       The name by which g++ is invoked. You can also use this in
  #       lieu of setting the <cxxflags> property to force options such
  #       as "-V3.0.4" into the g++ command line: "-sGXX=g++ -V3.0.4".
  #
  # GCC
  #       Similar to GXX, the name by which gcc is invoked for "C"
  #       language targets.

  # singleton variables...
  set-as-singleton GCC_ROOT_DIRECTORY GCC_BIN_DIRECTORY GCC_INCLUDE_DIRECTORY GCC_STDLIB_DIRECTORY ;

  flags gcc GCC_BIN_DIRECTORY : $(GCC_BIN_DIRECTORY) ;
  flags gcc GCC_INCLUDE_DIRECTORY : $(GCC_INCLUDE_DIRECTORY) ;
  flags gcc GCC_STDLIB_DIRECTORY : $(GCC_STDLIB_DIRECTORY) ;

  GCC_BIN_DIRECTORY ?= $(GCC_ROOT_DIRECTORY)$(SLASH)bin ;
  GCC_BIN_DIRECTORY ?= "" ; # Don't clobber tool names if GCC_ROOT_DIRECTORY not set
  GCC_STDLIB_DIRECTORY ?= $(GCC_ROOT_DIRECTORY)$(SLASH)lib ;

  # Make sure this gets set "on" the target
  flags gcc GCC_BIN_DIR : $(GCC_BIN_DIRECTORY) ;

  flags gcc LINKFLAGS <runtime-link>static : -static ;
  flags gcc CFLAGS <debug-symbols>on : -g ;
  flags gcc LINKFLAGS <debug-symbols>on : -g ;
  flags gcc CFLAGS <optimization>off : -O0 ;
  flags gcc CFLAGS <optimization>speed : -O3 ; 
```

在这一部分中，我可以使用注释部分中定义的变量将默认的 gcc/g++ 修改为我自己的。但是我不知道该怎么做。例如，我写

```
 GCC_BIN_DIRECTORY=/opt/gcc-4.1.2/installed 
```

但这给了我这个错误：

```
 rule GCC_ROOT_DIRECTORY=/opt/gcc-4.1.2/installed unknown in module 
```

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:20:48.403

有脚本`bjam`，或者`b2`，看看这里： http: [//www.boost.org/boost-build2/doc/html/bbv2/reference/tools.html#bbv2.reference.tools.compiler.gcc](http://www.boost.org/boost-build2/doc/html/bbv2/reference/tools.html#bbv2.reference.tools.compiler.gcc)

并尝试：

```
./b2 root /usr/local/mygcc 
```

应该使用提供的编译器

# primefaces - 通过拖出从 p:dashboard 中删除小部件

> ID：14812677
> 
> 赞同：0
> 
> 时间：2013-02-11T13:10:25.903
> 
> 标签：primefaces, drag-and-drop, dashboard

我想`p:dashboard`通过将面板拖出仪表板来添加对删除小部件的支持，例如在 WordPress 管理面板中。

我已经找到了在 2 个仪表板之间拖动小部件的示例，但在我的情况下，当元素被拖出仪表板时，无论在哪里，我都需要进行回调。该小部件将被删除。但是，我找不到这种行为的任何例子。

使用哪些组件/工具来实现此类功能？我正在使用**PrimeFaces 3.4**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:32:36.713

使用带有dashboard关键字的可拖动组件；

```
 <p:draggable for="widget" dashboard=":dbForm:dashboard"/> 
```

并在 primefaces 论坛页面上查看此解决方案：[仪表板拖放](http://forum.primefaces.org/viewtopic.php?f=3&t=17608)

希望它会帮助你。祝你好运！

# vba - 偏移直到找到一个空单元格

> ID：14812678
> 
> 赞同：0
> 
> 时间：2013-02-11T13:10:26.457
> 
> 标签：vba

我有一个由各种名称组成的 A 列。我试图弄清楚如何将所选项目复制到 F 列的第一个空单元格中。这是我到目前为止所做的：

```
Sub CopyFill()
If Range("F3") = Empty Then
    ActiveCell.Copy Range("F3")
ElseIf Range("F3") <> Empty Then
    ActiveCell.Copy Range("F3").Offset(1, 0)
End If
End Sub 
```

但问题是我无法理解如何在这里应用 DoUntil 函数以保持偏移，直到我找到一个空单元格，然后 Excel 将用我当前的选择填充该单元格。

非常感谢您的时间和关注。

PS 我使用 F3 是因为这是我在这个文件中的专栏开始的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:22:00.977

实现您想要的最有效的方法是以下代码行：

```
ActiveCell.Copy Range("F:F").Find(What:="", After:=Range("F3"), LookIn:=xlFormulas, LookAt _
        :=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:= _
        假，搜索格式：=假）

```

将`.Find`完全满足您的需求。

如果您想手动执行循环（这会慢得多），您可以使用以下代码：

```
子 CopyFill()
    调暗为范围

    设置 rng = Range("F3")
    而 rng.Value ""
        设置 rng = rng.Offset(1)
    文德

    ActiveCell.Copy rng

结束子

```

`While Condition ... Wend`您也可以使用`Do While condition ... Loop`or代替`Do Until Not condition ... Loop`。

# gwt - Vimeo 嵌入 gwt

> ID：14812679
> 
> 赞同：1
> 
> 时间：2013-02-11T13:10:28.237
> 
> 标签：gwt, vimeo

我尝试使用 gwt 嵌入视频，但我意识到 gwt 不允许 iframe。 [Vimeo 建议](http://developer.vimeo.com/player/embedding)使用这种代码进行嵌入。有没有其他方法可以做到这一点？

**补充**

得到答案后，我意识到我想向`<frame>`一个元素添加代码，`HTML`但这不起作用，但`Frame`如下所述。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:57:05.253

GWT Frame 类包装了一个 IFrame，您可以在下面的 javadoc 链接中找到使用示例。

GWT 是 2.5 版本而不是 1.5。最新 Frame 文档的链接是 - [http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Frame.html](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Frame.html)

```
public class FrameExample implements EntryPoint {
    public void onModuleLoad() {
        // Make a new frame, and point it at Google.
        Frame frame = new Frame("http://player.vimeo.com/video/"+VIDEO_ID);

        // Add it to the root panel.
        RootPanel.get().add(frame);
   }
} 
```

如果您需要使用第三方库，那么您可以使用 BST Player。使用 BST Player 中的 Vimeo GWT 包装器 - [http://code.google.com/p/bst-player/source/browse/#svn%2Ftrunk%2Fvimeo-player-provider](http://code.google.com/p/bst-player/source/browse/#svn%2Ftrunk%2Fvimeo-player-provider)

我宁愿建议你只坚持 GWT Frame api，不要使用任何第三方，除非你需要 BST 播放器提供的一些其他功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:44:39.673

GWT 支持 IFRAME

查看：

[http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/dom/client/IFrameElement.html](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/dom/client/IFrameElement.html)

在这里您可以找到嵌入视频的代码

下载 gwt youtube api 并使用如下

[http://code.google.com/p/gwt-youtube-api/source/browse/trunk/src/main/resources/com/google/youtube/showcase/Chromeless.gwt.xml?r=105](http://code.google.com/p/gwt-youtube-api/source/browse/trunk/src/main/resources/com/google/youtube/showcase/Chromeless.gwt.xml?r=105)

然后您可以找到要嵌入到您的页面中的代码。

[在 GWT 中嵌入 youtube 播放器（BST Player API）](https://stackoverflow.com/questions/7185038/embedding-youtube-player-in-gwt-bst-player-api)

并确保视频的路径:)

# powershell - 计算机和空间问题上的文件位置不同

> ID：14812685
> 
> 赞同：0
> 
> 时间：2013-02-11T13:10:56.807
> 
> 标签：powershell, powershell-2.0

我有以下代码，目前正在检查计算机的版本信息和服务状态。

我遇到的问题是服务器在不同的地方有定位的 .exe：

1.  C:\程序文件\snare\snarecore.exe
2.  C:\程序文件 (x86)\snare\snarecore.exe
3.  D:\apps\snare\snarecore.exe

如何让下面的脚本运行正确的版本？我想我可以使用服务正在检查的路径吗？我正在远程完成这一切，并且拥有服务器的权限并且工作正常 - 但我不得不根据可执行文件所在的所有三个位置制作三个（或更多！）脚本！

另外，对于名称中有空格的那些（../程序文件..），我应该在哪里加上引号，以便powershell可以读取整行并且不会因为名称中的空格而出错？

代码：

```
clear
$ErrorActionPreference = "silentlycontinue"

$Logfile = "C:\temp\output_cdrive.log"

Function LogWrite
{
    param([string]$logstring)

    Add-Content $Logfile -Value $logstring
}

$computer = Get-Content -Path c:\temp\servers2.txt

foreach ($computer1 in $computer){

$Service = Get-WmiObject Win32_Service -Filter "Name = 'Snare'" -ComputerName $computer1

    if (test-connection $computer1 -quiet) 
    {
        $version = (Get-Command ""\\$computer1\c$\Program Files (x86)\Snare\SnareCore.exe"").FileVersionInfo.FileVersion

            if($Service.state -eq 'Running')
            {
                LogWrite "$computer1 STARTED $version"
            }
            else
            {
                LogWrite "$computer1 STOPPED $version"
            }
    }
    else 
    {
        LogWrite "$computer1 is down" -foregroundcolor RED
    }
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:15:46.287

显而易见的解决方案是使用路径变量，依次为三个不同路径中的每一个分配该变量，然后使用该变量将实际检查编写为函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:21:18.313

您可以检查服务的路径名属性以获取 exe 位置：

```
PS>(Get-WmiObject Win32_Service -Filter "name='spooler'").pathname
C:\Windows\System32\spoolsv.exe 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T15:00:10.187

您可以使用反引号转义双引号：

```
 "`"\\$computer1\c$\Program Files (x86)\Snare\SnareCore.exe`"" 
```

# iphone - 拼图游戏中瓷砖的数量增加，瓷砖的大小增加

> ID：14812694
> 
> 赞同：0
> 
> 时间：2013-02-11T13:11:10.807
> 
> 标签：iphone, ios, cocos2d-iphone, uiimage

我一直在为 iPhone 开发游戏。在开始游戏之前，我阅读了大量指向相同问题（游戏）的文章。我发现文章 [构建幻灯片图像游戏](http://www.iphonegametutorials.com/2011/03/17/cocos2d-game-tutorial-%E2%80%93-building-a-slide-image-game-part-2-with-solution/)确实是一个很棒的开始。我将图像和其他相关代码合并到我的游戏中。

我的目标是从一个基本的图像拼贴开始，它将有 7 个拼贴的图像，一旦用户及时完成它，复杂性会随着其他图像拼贴的增长而增加，但是当我尝试将拼贴减少到最小号码，它会使应用程序崩溃。我无法理解这里的影响。

下面是我更改代码的地方：

```
for (int i = 0; i < 7; i++) {
for (int j = 6; j >= 0; j--) {
CCSpriteFrame *imgFrame = [CCSpriteFrame frameWithTexture:texture rect:CGRectMake(i*40, j*40, 40, 40) offset:CGPointZero];
[imgFrames addObject:imgFrame];
}
} 
```

我对游戏开发和 cocos2D 还很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:58:18.513

我找到了本教程，它帮助我解决了我的问题......真的很棒。

[http://www.iossdktutorials.com/slider-puzzle-ios-game-tutorial-1/](http://www.iossdktutorials.com/slider-puzzle-ios-game-tutorial-1/)

# android - Android上传Gallery Image到Facebook-----Bitmap Image out of memory

> ID：14812695
> 
> 赞同：3
> 
> 时间：2013-02-11T13:11:25.840
> 
> 标签：android, android-imageview, android-facebook

嗨朋友任何人都可以帮助我..

我必须将我的图库图片上传到 Facebook 并使用此代码。我没有记忆异常。请给出完整的成功代码而不是这个。

这是我的代码：

```
 UploadImage.setOnClickListener(new OnClickListener() {

            public void onClick(View v)
                      {
                        byte[] data = null;
                        Bitmap bi = BitmapFactory.decodeFile(path);
                        //Bitmap bi = BitmapFactory.decodeResource(getResources(), R.drawable.icon);             
                        ByteArrayOutputStream baos = new ByteArrayOutputStream();              
                        bi.compress(CompressFormat.JPEG, 100, baos);
                        data = baos.toByteArray();
                        Bundle params = new Bundle(); 

                       params.putString(Facebook.TOKEN, Login.mFacebook.getAccessToken());              
                        params.putString("method", "photos.upload");              
                        params.putByteArray("picture", data);

                        AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(Login.mFacebook);              
                        mAsyncRunner.request("me/photos", params, "POST", new SampleUploadListener()); 
                        Toast.makeText( getApplicationContext(), "Image Posted on Facebook.", Toast.LENGTH_SHORT).show();
                        } 

              });
           } 

        }

        class SampleUploadListener extends BaseKeyListener implements RequestListener {

        public void onComplete(final String response, final Object state) {
            try {
                // process the response here: (executed in background thread)
                Log.d("Facebook-Example", "Response: " + response.toString());
                JSONObject json = Util.parseJson(response);
                final String src = json.getString("src");

                // then post the processed result back to the UI thread
                // if we do not do this, an runtime exception will be generated
                // e.g. "CalledFromWrongThreadException: Only the original
                // thread that created a view hierarchy can touch its views."

            } catch (JSONException e) {
                Log.w("Facebook-Example", "JSON Error in response");
            } catch (FacebookError e) {
                Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
            }
        }

        public int getInputType() {
            // TODO Auto-generated method stub
            return 0;
        }

        public void onComplete(String response) {
            // TODO Auto-generated method stub

        }

        public void onIOException(IOException e) {
            // TODO Auto-generated method stub

        }

        public void onFileNotFoundException(FileNotFoundException e) {
            // TODO Auto-generated method stub

        }

        public void onMalformedURLException(MalformedURLException e) {
            // TODO Auto-generated method stub

        }

        public void onFacebookError(FacebookError e) {
            // TODO Auto-generated method stub

        }
} 
```

> ```
>  02-12 10:29:16.514: E/AndroidRuntime(9732): FATAL EXCEPTION: main
>        02-12 10:29:16.514: E/AndroidRuntime(9732): java.lang.OutOfMemoryError
>         02-12 10:29:16.514: E/AndroidRuntime(9732):   at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
>     02-12 10:29:16.514: E/AndroidRuntime(9732):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:587)
>     02-12 10:29:16.514: E/AndroidRuntime(9732):   at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:389)
>     02-12 10:29:16.514: E/AndroidRuntime(9732):   at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:418)
>     02-12 10:29:16.514: E/AndroidRuntime(9732):   at com.kmiller.facebookintegration.GalleryImage$1.onClick(GalleryImage.java:83)
>     02-12 10:29:16.514: E/AndroidRuntime(9732):   at android.view.View.performClick(View.java:3627)
>     02-12 10:29:16.514: E/AndroidRuntime(9732):   at android.view.View$PerformClick.run(View.java:14329)
>     02-12 10:29:16.514: E/AndroidRuntime(9732):   at android.os.Handler.handleCallback(Handler.java:605)
>     02-12 10:29:16.514: E/AndroidRuntime(9732):   at android.os.Handler.dispatchMessage(Handler.java:92)
>     02-12 10:29:16.514: E/AndroidRuntime(9732):   at android.os.Looper.loop(Looper.java:137)
>     02-12 10:29:16.514: E/AndroidRuntime(9732):   at android.app.ActivityThread.main(ActivityThread.java:4511)
>     02-12 10:29:16.514: E/AndroidRuntime(9732):   at java.lang.reflect.Method.invokeNative(Native Method)
>     02-12 10:29:16.514: E/AndroidRuntime(9732):   at java.lang.reflect.Method.invoke(Method.java:511)
>     02-12 10:29:16.514: E/AndroidRuntime(9732):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:986)
>     02-12 10:29:16.514: E/AndroidRuntime(9732):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:753)
>     02-12 10:29:16.514: E/AndroidRuntime(9732):   at dalvik.system.NativeStart.main(Native Method) 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T12:05:41.513

您需要将代码修改为： UploadImage.setOnClickListener(new OnClickListener() {

```
 public void onClick(View v)
                  {
                    byte[] data = null;
                    Bitmap bi = BitmapFactory.decodeFile(path);
                    //Bitmap bi = BitmapFactory.decodeResource(getResources(), R.drawable.icon);             
                    ByteArrayOutputStream baos = new ByteArrayOutputStream();              
                    bi.compress(CompressFormat.JPEG, 100, baos);
                    bi.recycle();
                    data = baos.toByteArray();
                    Bundle params = new Bundle(); 

                   params.putString(Facebook.TOKEN, Login.mFacebook.getAccessToken());              
                    params.putString("method", "photos.upload");              
                    params.putByteArray("picture", data);

                    AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(Login.mFacebook);              
                    mAsyncRunner.request("me/photos", params, "POST", new SampleUploadListener()); 
                    Toast.makeText( getApplicationContext(), "Image Posted on Facebook.", Toast.LENGTH_SHORT).show();
                    } 

          });
       } 
```

# wordpress - WP - 如何创建菜单

> ID：14812696
> 
> 赞同：0
> 
> 时间：2013-02-11T13:11:25.977
> 
> 标签：wordpress

您能否解释一下如何正确创建 wordpress 菜单？我只想要我网站上的两个菜单 - 带有页面，另一个带有类别（默认情况下）。

1.  我应该将这些菜单的 html 代码放在两个单独的文件中吗？或者更确切地说，将所有 id 放在 wp_nav_menu() 的数组参数中？尝试了第一个，但单独的文件 nav-something.php 似乎没有加载（'theme_location' => 'nav-something'）。

2.  如果我想在菜单中显示类别，我应该简单地使用 wp_list_categories() 吗？用户将来可以从管理界面更改此设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:50:25.547

首先，您必须在外观 > 菜单下创建两个菜单

在页面上要显示的位置添加以下代码。但是您需要在管理部分选择一个菜单作为主菜单。您可以在外观 > 菜单 > 主要导航中执行此操作

```
<?php wp_nav_menu( array( 'theme_location' => 'primary' ) ); ?> 
```

对于您的类别菜单，在外观 > 菜单下的管理部分添加新菜单，并命名为“类别菜单”，然后将以下代码粘贴到您要显示此菜单的位置。之后，您需要在菜单部分添加类别。您可以在 wordpress 屏幕选项中启用类别列表（管理面板的右上角。）

```
<?php wp_nav_menu( array( 'theme_location' => 'primary', 'menu_class' => 'nav-menu', 'menu' => 'Category Menu' ) ); ?> 
```

请注意，我在上面的代码和管理部分“类别菜单”中给出了相同的名称。您可以通过添加上述代码来添加更多菜单，但您只需要在代码和 WordPress 管理部分中提供相同的名称。

如果您不想在管理部分创建类别菜单，则可以在文件中添加此代码。

```
<?php wp_list_categories(); ?> 
```

您现在拥有两种选择，您可以选择使用哪一种。

# php - PHP以简单的方式创建slugify（干净的URL）链接？iconv 故障？

> ID：14812701
> 
> 赞同：0
> 
> 时间：2013-02-11T13:11:41.173
> 
> 标签：php, url, seo, iconv, clean-urls

我认为这是 slugify url 的最简单方法。你有什么禁忌症？

```
function url_clean($str)
{
   $str = iconv('utf-8', 'us-ascii//TRANSLIT', $str);
   $clean_str = preg_replace(array(
      '/\'|\"/',
      '/ /'
   ) , array(
      '',
      '-'
   ) , $str);
   return $clean_str;
} 
```

**更新**

上面的代码在本地工作得很好，但在服务器上返回字符串`?`而不是音译字符：`árvíztűrő`->`?rv?zt?r?`

`phpinfo()`在本地主机上

> 启用 iconv 支持
> 
> iconv 实现“libiconv”
> 
> iconv 库版本 1.14

`phpinfo()`在服务器上

> 启用 iconv 支持
> 
> iconv 实现 glibc
> 
> iconv 库版本 2.12

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-30T16:11:07.937

您以前的功能比响应中的功能要好得多（更多案例）。问题在于语言环境。尝试在函数定义**之前添加下一行：**

```
setlocale(LC_ALL, 'es_ES.UTF8'); 
```

（*es_ES*是我的语言环境，但你的可能不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:29:17.470

谢谢你！最后，这是我没有那个[错误 iconv()](http://www.php.net/manual/en/function.iconv.php)的解决方案：

```
function url_clean($str) {
    $accent = array(' ','ű','á','é','ú','ő','ó','ü','ö','í','Ű','Á','É','Ú','Ő','Ó','Ü','Ö','Í');
    $clean = array('-','u','a','e','u','o','o','u','o','i','U','A','E','U','O','O','U','O','I');
    $str = str_replace($accent, $clean, $str);
    return preg_replace('/[^A-Za-z0-9-.]/', '', $str);
} 
```

# jquery - 如何使用 jQuery 将 div 大小调整为其兄弟？

> ID：14812702
> 
> 赞同：0
> 
> 时间：2013-02-11T13:11:40.817
> 
> 标签：jquery, html

```
<div class="left_and_right">
    <div class="left"> .. something .. </div>
    <div class="right"> .. something .. </div>
    <div class="left"> .. something .. </div>
    <div class="right"> .. something .. </div>
    <div class="left"> .. something .. </div>
    <div class="right"> .. something .. </div>
</div> 
```

假设我有一个主 div，其中三个左右 div 交替出现。我想做的是：

加载页面时，将每个“左”的宽度设置为“右”。

所以，我试过： `$("div[class=left]").attr('height', $(this).next().attr('height'))`

这是行不通的。

找到元素的兄弟并使用其属性的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:14:55.543

```
$("div.left").each(function(){
    $(this).height($(this).next().height());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:14:23.693

试试这个

```
$('div[class="left"]').each(function(){
   $(this).css('height',$(this).next().height());
}); 
```

# printing - 使用 PhantomJS 时有没有办法“缩小以适应”？

> ID：14812707
> 
> 赞同：5
> 
> 时间：2013-02-11T13:11:54.893
> 
> 标签：printing, pdf-generation, phantomjs

我看过这个：[Cropping PhantomJS screen capture size to content](https://stackoverflow.com/questions/14639960/cropping-phantomjs-screen-capture-sized-to-content)，但这并不是我想要的。

我在屏幕上有一个 600x348 像素的元素，想在 5cmx9cm PDF 上捕捉它，但似乎我需要做一些缩放才能得到我想要的。即使这样，它也不是很准确。有没有办法在打印机上实现收缩贴合效果？

# ios - 从数组中获取选定的图像以显示在另一个视图中

> ID：14812709
> 
> 赞同：1
> 
> 时间：2013-02-11T13:12:03.250
> 
> 标签：ios, objective-c, uiimage

我正在尝试从图像数组中获取所选图像。所选图像应显示在新视图中。

```
- (void)viewDidLoad{
[super viewDidLoad];

selectedTag = 0;

imagesName = [[NSArray alloc]initWithObjects:@"nature1.jpg",@"nature2.jpg",@"nature3.jpg",@"nature4.jpg",@"nature5.png",@"nature6.jpg",nil];
images = [[NSMutableArray alloc]init];

imageScroll.delegate = self;
imageScroll.scrollEnabled = YES;
int scrollWidth = 768;
imageScroll.contentSize = CGSizeMake(scrollWidth,605);

int xOffset = 0;

for(index=0; index < [imagesName count]; index++)
{

    UIButton *img = [UIButton buttonWithType:UIButtonTypeCustom];
    img.tag = index;
    selectedTag = img.tag;

    img.bounds = CGRectMake(10, 10, 50, 50);
    img.frame = CGRectMake(50+xOffset, 120, 270, 350);

    NSLog(@"image: %@",[imagesName objectAtIndex:index]);
    [img setImage:[UIImage imageNamed:[imagesName objectAtIndex:index]] forState:UIControlStateNormal];

    [images insertObject:img atIndex:index];
    imageScroll.contentSize = CGSizeMake(scrollWidth+xOffset,510);
    [imageScroll addSubview:[images objectAtIndex:index]];
    xOffset += 370;

    [img addTarget:self action:@selector(newView:) forControlEvents:UIControlEventTouchUpInside];
    selectedTag = img.tag;    
}
}
-(void)newView:(id)sender{

NSLog(@"%@",sender);
int f;
f = [sender tag];

CGRect rec = CGRectMake(0, 0, 250, 250);
[self setView:[[[UIView alloc] initWithFrame:rec] autorelease]];
[[self view] setBackgroundColor:[UIColor grayColor]];
UIImageView *im = [[UIImageView alloc] initWithImage:[imagesName objectAtIndex:f]];

im.bounds = CGRectMake(10, 10, 50, 50);
im.frame = CGRectMake(250, 120, 270, 350);

[[self view] addSubview:im];

} 
```

任何人都可以帮我将选定的图像提取到另一个视图吗？提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:21:09.363

您正在设置字符串而不是图像。使用这段代码

```
UIImage *img = [UIImage imageNamed:[imagesName objectAtIndex:f]];
UIImageView *im = [[UIImageView alloc] initWithImage:img]; 
```

# .net - 使用较新版本的 System.Data.SQLite/sqlite3.dll 在 SQLite 数据库上使用子查询进行查询大约慢 10 倍

> ID：14812712
> 
> 赞同：0
> 
> 时间：2013-02-11T13:12:09.103
> 
> 标签：.net, performance, sqlite, subquery, linqpad

**（见下面的更新）**

从 C#.Net 应用程序（约 5 秒）中查询大约 500,000 行的非常简单的 Sqlite 数据表时，我遇到了查询性能缓慢的问题。

我使用 LinqPad 以及 2 个数据库浏览器（均基于 QtSql）在完全相同的数据库上尝试了完全相同的查询，它的运行速度提高了 10 倍（约 0.5 秒）。相同的查询，相同的数据库，不同的应用程序，只有我的运行速度不快。

无论我是返回值还是只是一个 Count(*)，它的区别可以忽略不计。

我试过了：

*   为每个 .Net 3.5/4/4.5 构建
*   为每个 AnyCPU/x86/x64 构建
*   使用 System.Data.Sqlite、sqlite-net 以及通过 COM 直接访问 sqlite3 dll
*   为每个 WPF/WinForms 构建
*   查询的不同变体

这些都不会对查询时间产生任何明显的影响。

我知道使用 JOIN 重写查询可能会有所帮助，但我无法弄清楚为什么相同的查询在 LinqPad/Sql 浏览器中运行良好，但在我尝试创建的任何应用程序中却没有。我一定错过了一些非常基本的东西。

示例表：

```
"CREATE TABLE items(id INTEGER PRIMARY KEY, id1 INTEGER, id2 INTEGER, value INTEGER)" 
```

示例查询字符串（尽管基本上任何使用子查询的查询都需要很长时间）：

```
SELECT count(*) 
FROM items WHERE 
id2 IN 
(
    SELECT DISTINCT id2 FROM items WHERE id1 IN 
    (
        SELECT DISTINCT id1 FROM items WHERE id2 = 100000 AND value = 10
    )
    AND value = 10
) 
AND value = 10 
GROUP BY id2 
```

我知道这可能会使用 JOINS 和索引来重新编写以加快速度，但事实仍然是，此查询在其他应用程序中的运行速度要快得多。我在这里缺少什么，为什么无论我尝试什么，相同的查询都会运行得这么慢？

**更新：**似乎 sqlite 的版本与该问题有关。使用旧的 System.Data.Sqlite v1.0.66.0 查询就像其他应用程序一样运行，但是使用更新的版本很慢。我还没有确定具体在哪个版本发生了变化，但我很确定这与底层的 sqlite3 版本有关，而不是专门针对 System.Data.Sqlite。如果有人知道在这种情况下可能发生的变化会导致子查询速度变慢，或者如果有设置或某些东西可以使新版本的 sqlite 中的子查询运行得更快，请告诉我！

同样，该查询是一个示例，并不理想且部分冗余……问题更多是关于为什么它在一个而不是另一个中起作用。

提前感谢您提供任何额外的输入！

**更新：**已解决

请看下面我的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:03:38.093

一些建议：

您说您不想重新处理查询或添加索引。这是显而易见的事情。如果没有任何索引，sqlite 必须至少扫描一次（或更可能多次）您的 500,000 行表。

根据您上面的查询，我将向列`id1`和`id2`.

~~另一件事是您上面的查询似乎有点多余。也许你有你的理由，但我不明白为什么查询应该如此复杂。简化查询：~~

 ~~```
select count(*)
from items
where id2 = 100000 and value = 10 
```~~  ~~* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:11:48.160

尝试

```
SELECT ID1.id2, count(*) 
FROM items ID2
JOIN items ID1
  on ID2.id2 = ID1.id1
 and ID1.id2 = 100000 
 and ID1.value = 10 
 and ID2.valu3 = 10
group by ID1.id2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T08:34:02.307

好吧，事实证明这与 SQLite 1.7.0 引入的自动索引有关。在我的情况下，在这种没有索引的表上使用子查询意味着 SQLite 创建自动索引所花费的时间导致了查询所经历的额外开销。

解决方案是使用：

```
PRAGMA automatic_index=OFF; 
```

在使用“IN”子句的任何查询的开头。

在列上创建索引也可以解决这个问题（未经测试），但是在这种特殊情况下，创建索引所需的额外大小/磁盘使用是不值得的。

这也表明我使用的 LinqPad SQLite 插件和数据库查看器基于旧的 sqlite 版本。

更多信息可以在以下位置找到：

[http://www.sqlite.org/src/info/8011086c85c6c4040](http://www.sqlite.org/src/info/8011086c85c6c4040)

[http://www.sqlite.org/optoverview.html#autoindex](http://www.sqlite.org/optoverview.html#autoindex)

感谢所有回复的人。~~

# php - 如何将签证整合到网站？

> ID：14812718
> 
> 赞同：1
> 
> 时间：2013-02-11T13:12:31.850
> 
> 标签：php, integrate

我想将“签证”集成到我的网站（用 PHP 开发），以便其他人可以向我的网站存款。

我不知道该怎么做，是否有任何示例或文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:14:47.857

在 Paypal 上创建一个帐户，让他们完成工作。这些天来，很少有人会相信他们的信用卡号码“只是任何人”。这不仅会获得您的“信任”，而且管理这些事情的所有开销都会为您处理，而您的开销最小。他们会给你代码嵌入到你的页面“现在捐赠”——他们处理剩下的事情。

我提到信任了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:16:41.480

*   这取决于您的银行，您应该联系他们，他们会为您提供他们的 API，-如果您为您的网站使用 CMS，例如在 joomla 上有现成的扩展，-您还可以选择在您的网站上集成 paypal API

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:17:35.353

如果你在美国，你也可以使用[stripe](http://www.stripe.com)。该api非常易于使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-22T17:36:21.677

刚刚更新，VISA 为开发人员提供资源，并为独立开发人员提供特别优惠。去他们的[热点](https://developer.visa.com)

# android - 通过蓝牙将数据从 android 传输到 PC

> ID：14812720
> 
> 赞同：0
> 
> 时间：2013-02-11T13:12:35.643
> 
> 标签：android, bluetooth, client-server, data-transfer

任何人都可以举一个蓝牙服务器客户端（从安卓到计算机）的工作示例，它可以将文件或消息从一端传输到另一端？我使用 TCP 实现，但过去 2 天我无法成功使用蓝牙。
我从谷歌找到了一些文章，但我无法成功。从[本](http://digitalhacksblog.blogspot.com/2012/05/android-example-bluetooth-simple-spp.html)教程中我自己尝试，但在**onResume()**中出现连接失败的异常。
我想将数据从我的**android 手机传输到**运行 Windows 7 的 PC。现在我使用下面的代码效果很好，因为从 logcat 我看到连接设置成功并完美读取数据，但它仍然不传输数据到我的电脑（可能无法写入这些数据）。
所以我的问题是，我是否缺少某些东西或需要这样的服务器端代码？或者任何人都可以建议一些应该成功地**将消息或文件从客户端 android 传输到服务器 PC**的代码？
**我的代码：**

```
Button btnSend = null;
TextView txtPath = null;
Socket s = null;
BluetoothAdapter objBluetoothAdapter = null;
BluetoothDevice device = null;
BluetoothSocket socket = null;
String strPath = "/sdcard/bluetooth/IMG0245A.jpg";
byte [] buffer = null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btnSend = (Button)findViewById(R.id.send_button);
    btnSend.setOnClickListener(this);
}
@Override
public void onClick(View arg0) {
        // TODO Auto-generated method stub

        String address="MY_COMPUTER_BLUETOOTH_ADDRESS";

        objBluetoothAdapter =  BluetoothAdapter.getDefaultAdapter();
        if(objBluetoothAdapter==null){
                Toast.makeText(this, "BT not supported", Toast.LENGTH_LONG);
                return;
        }

        //objBluetoothAdapter.enable();

        if(!objBluetoothAdapter.isEnabled()){
                Intent enableBT = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                startActivity(enableBT);
        }
        try{
                device = objBluetoothAdapter.getRemoteDevice(address);

                final UUID uuid= UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");

                try{
                        File f = new File(strPath);
                        buffer = new byte[(int)f.length()];
                        FileInputStream fis = new FileInputStream(f);
                        BufferedInputStream bis = new BufferedInputStream(fis);
                        bis.read(buffer,0,(int)f.length());

                        socket = device.createRfcommSocketToServiceRecord(uuid);
                        Log.d("BT","RF Connection Created"+socket);
                        //objBluetoothAdapter.startDiscovery();
                        for(int i=0;i<3;i++){
                                try{

                                        objBluetoothAdapter.cancelDiscovery();
                                        socket.connect();
                                        Log.d("BT","Socket Connected = "+socket);

                                        break;
                                }catch (Exception e) {
                                        // TODO: handle exception
                                        Log.d("BT","Socket Connection exception = "+e);
                                }
                        }
                }catch (Exception e) {
                        // TODO: handle exception
                        e.printStackTrace();
                        Log.d("BT","Connection NOT OK");
                }

                OutputStream os = socket.getOutputStream();
                os.write(buffer);//,0,buffer.length);
                os.flush();
                os.close();
                socket.close();

        } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                Toast.makeText(this,"exception "+e, Toast.LENGTH_LONG);
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:57:26.627

您是否看过 SDK 中提供的示例？如果没有，您会找到一个名为“蓝牙聊天”的软件。它为您需要的一切提供了基础。我前段时间用它来做你想做的事情。去掉你不需要的东西并添加你做的东西，然后你就可以参加比赛了。

我会提供示例代码，除非我不再拥有它，抱歉。无论如何，你会发现蓝牙聊天是一个非常完整的例子。

# ios6 - 如何在我的应用 iOS6 中获取行车路线

> ID：14812725
> 
> 赞同：4
> 
> 时间：2013-02-11T13:12:48.680
> 
> 标签：ios6, maps, mkmapview, mapkit, apple-maps

我在我的应用程序中使用Apple Map，在我的视图中我想显示从用户位置到我在视图中的当前位置的行车方向，现在我只想在我的应用程序中显示所有这些，即我可以显示驾驶方向在地图视图上，我曾尝试使用苹果地图应用程序，但在我从我的应用程序调用它后，它会将我带到苹果的地图应用程序，在那里我得到行车方向，但我无法返回我的应用程序，所以我在想我可以在我的应用程序本身中做一些事情，以便我可以在当前视图本身上获得行车路线..

```
NSString* addr = [NSString stringWithFormat:@"http://maps.apple.com/maps?daddr=%1.6f,%1.6f&saddr=%1.6f,%1.6f",coordinate.latitude,coordinate.longitude,mapView.userLocation.coordinate.latitude,mapView.userLocation.coordinate.longitude];
        NSURL* url = [[NSURL alloc] initWithString:[addr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
        [[UIApplication sharedApplication] openURL:url]; 
```

此代码将我从本机应用程序带到苹果的地图应用程序，但我无法直接返回到我的应用程序。是否有可能的解决方案，以便我可以在获得行车路线后返回我的应用程序？（webview 对我不起作用。我可以在苹果的应用程序上添加一个后退按钮还是什么）。请帮助....非常感谢！

或者请任何人建议我一个更好的实现代码，以便我可以在我的应用程序中完成所有这些？

**我想要一个描绘导航路线和行车路线的应用内地图......**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:53:07.693

这不是实现方向的方法，

我为您制作了一个示例，其中涵盖了所有 iOS 版本、New Google Maps 和 iOS 6 tom tom maps。

这里是：

```
if([[[UIDevice currentDevice] systemVersion] compare:@"6.0" options:NSNumericSearch] == NSOrderedDescending){
        //6.0 or above
        NSString *Destinationlatlong =[NSString stringWithFormat:@"%@,%@",your.latitude,your.longitude];

        NSString* addr = [NSString stringWithFormat:@"comgooglemaps://?saddr=%f,%f&daddr=%@",[AppDelegate zDelegate].location.coordinate.latitude,[AppDelegate zDelegate].location.coordinate.longitude, Destinationlatlong];
        addr=[addr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

        NSURL* url = [[[NSURL alloc] initWithString:addr]autorelease];
        //    NSLog(@"url %@",url);
        if ([[UIApplication sharedApplication]canOpenURL:url]) {
            [[UIApplication sharedApplication] openURL:url];
        }else{
            CLLocationCoordinate2D coords =
            CLLocationCoordinate2DMake([your.latitude doubleValue],[your.longitude doubleValue]);
            MKPlacemark *placeMark = [[MKPlacemark alloc]
                                      initWithCoordinate:coords addressDictionary:nil];

            MKMapItem *destination = [[MKMapItem alloc]initWithPlacemark:placeMark];

            [destination openInMapsWithLaunchOptions:nil];
        }
    }else{
        NSString *Destinationlatlong =[NSString stringWithFormat:@"%@,%@",your.latitude,your.longitude];
        NSString* addr = [NSString stringWithFormat:@"http://maps.google.com/maps?saddr=Current+Location&daddr=%@",Destinationlatlong];
        addr=[addr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

        NSURL* url = [[[NSURL alloc] initWithString:addr]autorelease];
        //    NSLog(@"url %@",url);
        if ([[UIApplication sharedApplication]canOpenURL:url]) {
            [[UIApplication sharedApplication] openURL:url];
        }else{
            UIAlertView *alert=[[[UIAlertView alloc] initWithTitle:@"Warning!" message:@"Device does not support this functionality" delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles: nil]autorelease] ;
            [alert show];
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:25:11.253

这应该让你开始。简而言之，从 json 中的 google api 获取驾驶指令，对其进行解析，并使用`MKPolyline` [http://iosguy.com/2012/05/22/tracing-routes-with-mapkit/将其显示在您自己的地图上](http://iosguy.com/2012/05/22/tracing-routes-with-mapkit/)

# javascript - 有没有办法在动态添加行的同时处理特定的列？

> ID：14812728
> 
> 赞同：0
> 
> 时间：2013-02-11T13:13:02.830
> 
> 标签：javascript, jquery, jsp

我在点击一个按钮时生成一个动态表，如下所示 -

```
 $('.addRowButton').click(function () {

            ++counter;
            var index=counter-1;
            var newRowHtml =
                '<tr>' +
                '<td>' + counter +
                '</td>' +
                '<td><input name="b2bProductList[' + index+ '].productId" class="variant b2bTableInput" /></td>' +
                '<td align="center"><span id="pvDetails" class="pvDetails"></span></td>' +
                '<td><div class="img48" style="vertical-align: top;"><img src=""></td>'+
                '<td><input name="b2bProductList[' + index + '].quantity" class="qty b2bTableInput"/></td>' +
                '<td align="center"><span id="mrp" class="mrp"/></td>' +
                '<td align="center"><input id="totalPrice" readonly="readonly" class="totalPrice b2bTableInput" type="text"></td>' +
                '</tr>';
            $('#poTable').append(newRowHtml); 
```

但我想处理我自己的特定列 - 一种覆盖它。我必须显示一个图像，并且必须在此列中使用一些我无法在上面的代码中放入的属性。我应该如何覆盖它。如果我要在主表中声明任何`tr`或`td`在我的表中，`<table></table>`它们将静态占用额外的行。在动态添加行时是否有任何特定的方法来处理特定的列？

编辑 - 我必须设置图像的源，我通过对我的`Id`文本框的焦点输出的异步调用来获取它的源字符串。现在无法在行生成时间设置源，所以我必须在`src`获取后一次处理每一列。我的代码中提到了该列

```
'<td><div class="img48" style="vertical-align: top;"><img src=""></td>'+ 
```

现在我必须设置`src`. 我希望这能清楚地说明我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:25:37.973

你可以使用

```
$('#myTable tr td::nth-child('+columnIndex+')') 
```

如果您知道该列的索引，或者您可以为该特定 td 指定一个唯一类

```
newRowHtml ='<tr>' + '<td class="someClass"></td> ... etc 
```

并选择该类：

```
$('.someClass').each(function(){
    // Some other code
}); 
```

或者，您可以像这样添加行：

```
var $row = $('<tr></tr>');
var $id = $('<td></td>').html(id);
var $someOtherfield = $('<td></td>').html(someOtherData);

$('#myTable').append($row.append($id).append($someOtherfield)); 
```

然后使用变量 $someOtherfield 访问它并对其进行处理。

```
$someOtherfield.find('img').attr('src' , yourSource); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:21:40.727

```
var tds= $('#poTable').find("td:first"); 
```

会给你第一列。

并遍历元素

```
tds.each(function(index){
//do your stuff here..
}); 
```

希望这可以帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:15:55.173

如果您没有花哨的 colspan，选择特定列的单元格的最简单方法是使用[:nth-child()](http://api.jquery.com/nth-child-selector/)：

```
$('#mytable td:nth-child('+columnIndex+')') 
```

# wordpress - 重写 Wordpress 媒体库中的所有“文件”（标题）字段以匹配帖子标题

> ID：14812732
> 
> 赞同：0
> 
> 时间：2013-02-11T13:13:18.540
> 
> 标签：wordpress, wordpress-3.5

我最近迁移并升级了我的 Wordpress 网站。

新安装拾取了所有图像，但在媒体库中，图像的“文件”字段都是空白的，即显示“（无标题）”。

当我想搜索图像时，这会给我带来问题。我有大约 400 个帖子，每个帖子一张图片，所以我想将每个图片名称与其相关的帖子名称匹配。

我希望运行一个脚本来实现这一点，或者可能在我的函数文件中使用一些代码。

注意 1：我尝试了几个名为“重命名媒体”和“重命名媒体文件”等的插件，但它们没有用。他们的重点是重命名实际的图像文件。

注意 2：此后我使用了一个插件来为每张图像自动生成缩略图——我认为这不会对我想要实现的目标造成任何问题。

更新：虽然我还没有找到填充标题字段的解决方案，但我找到了解决搜索问题的方法。我安装了一个名为“媒体搜索”的插件，其中包括默认媒体库搜索中的附加页面或帖子： [http ://wordpress.org/extend/plugins/media-library-search/](http://wordpress.org/extend/plugins/media-library-search/)

但是，插件版本 1.2 不适用于 Wordpress 3.5，但通过插件支持页面，我发现另一个人创建了一个工作修改，增加了额外的功能（搜索图像 alt、标题和描述）： [http://pastebin。 com/f6V5HvfT](http://pastebin.com/f6V5HvfT)

# sql - 在包含超过 2 亿行的表中搜索记录

> ID：14812738
> 
> 赞同：0
> 
> 时间：2013-02-11T13:13:49.290
> 
> 标签：sql

应该在表上使用哪种类型的索引？它最初被插入（每月一个）到一个空表中。然后我在其中两列上放置一个非聚集复合索引。想知道将这两个字段合并为一个字段是否会提高搜索时的性能。还是没关系？我应该使用具有主键聚集索引的标识列吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:15:21.643

当人们查询表时，您应该索引最有可能在 where 子句中使用的字段。不要担心主键 - 它已经有一个索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:35:36.340

如果你可以定义一个唯一的主键，在查询表时可以使用，这将用作聚集索引，并且将是最快的选择。

如果您的选择查询必须使用您提到的两个字段，请将它们分开。性能不会受到影响，架构也不会被破坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:39:28.440

*“聚集索引在经常搜索值范围的列上特别有效。在使用聚集索引找到具有第一个值的行后，具有后续索引值的行保证在物理上相邻。”*

考虑到这一点，除非它对您的应用程序具有业务意义，否则您可能不会从主键 (ID) 上的聚集索引中看到太多好处。如果您有一个经常查询的日期值，那么向该值添加聚集索引可能更有意义

```
select * from table where created > '2013-01-01' and created < '2013-02-01' 
```

我见过数据仓库使用连接键的方法。这是否适合您取决于您​​的查询。显然查询单个字段值会比查询多个字段更快，尤其是在 B-tree 索引中查找的次数较少时。

或者，如果您在一个表中有 2 亿行，您可以考虑将数据拆分为多个表（如果这样做有意义的话）。

你是说你每个月都会加载所有这些数据，所以我必须假设所有数据都是相关的。如果您的表中存在被认为“旧”且与搜索无关的数据，那么您可以将数据移出存档表（使用相同的架构），以便您的查询仅针对“当前”数据运行。

否则，您可以查看 NoSQL 使用的*分片*方法，例如 MongoDB。如果 MongoDB 不是一个选项，您可以在应用程序中实现与逻辑相同的分片键。我怀疑您的数据库 SQL 驱动程序是否会原生支持分片。

# c# - 在最小值和最大值中查找错误

> ID：14812749
> 
> 赞同：-1
> 
> 时间：2013-02-11T13:14:21.727
> 
> 标签：c#

```
 String sql = "select  title, song_id from up_song where Song_type='Mp3 Tracks' ";
    SqlDataAdapter adpt = new SqlDataAdapter(sql, cn);
    DataSet ds = new DataSet();
    adpt.Fill(ds, "title");
    var m = ds.Tables["title"].AsEnumerable().Max(x => x.Field<int>("song_id"));
    var k = ds.Tables["title"].AsEnumerable().Min(x => x.Field<int>("song_id"));
 for (i = m; i >= k; --i)
        {
            try
            {
                hp[i] = new HyperLink();
                hp[i].ID = "hp" + i;
                hp[i].Text = ds.Tables["title"].Rows[i].ItemArray[0].ToString();
                hp[i].NavigateUrl = "Downloadpage.aspx";
                hp[i].ForeColor = System.Drawing.Color.White;
                Panel1.Controls.Add(hp[i]);
                Panel1.Controls.Add(new LiteralControl("<br>"));
                HttpCookie coo = new HttpCookie("song");
                coo["sogtit"] = ds.Tables["title"].Rows[i].ItemArray[0].ToString();
                Response.Cookies.Add(coo);
            }
            catch (Exception ex)
            {
                Response.Write(ex.Message);
            }
        }
    } 
```

在这里我遇到了一个错误，错误是：

位置 9 没有行。位置 8 没有行。位置 7 没有行。

那么代码有什么问题？？？

我无法从数据库访问值 另一种解决方案是什么谢谢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:19:16.373

如果您的数据库中有 SongId 3,4,5,6,7,8,9 那么

```
m is 9

k is 3 
```

但是您的 DataTable 只有七行 (0-6)。然后你不能使用 id 作为行索引来访问它们。

# quartz.net - 如果我更改系统时区，Quartz 调度程序会失败

> ID：14812757
> 
> 赞同：1
> 
> 时间：2013-02-11T13:14:37.617
> 
> 标签：quartz.net, misfire-instruction

我们有一个调度程序，每天上午 12 点触发。在我不更改时区以使其跳过下一个后续调用之前，它可以完美运行。

例如，当前时间和日期是 2 月 10 日下午 4 点，我更改时区，以便新时间是 2 月 11 日上午 12:30。

结果：

之后没有触发发生。

预期的：

在 2 月 11 日凌晨 12:00 跳过触发器是可以接受的，但它应该在每天凌晨 12 点执行所有后续计划。

我没有包括任何失火指令。请帮我。

# c++ - 获取辅助硬盘空间 - c++

> ID：14812760
> 
> 赞同：0
> 
> 时间：2013-02-11T13:14:44.360
> 
> 标签：c++, winapi, visual-c++, hard-drive

通过以下链接，我可以获得硬盘空间。

[获取硬盘空间](http://forums.codeguru.com/showthread.php?424302-disk-space)

但是，如果我连接辅助硬盘，它不会显示它的详细信息。

如何循环硬盘数量并检索它们的空间？

我想把它放在一个循环领域。获取硬盘数量并循环访问 harddisk1 中的驱动器，然后循环访问 harddisk2 中的驱动器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:24:34.373

使用 Windows API 的[`GetLogicalDriveStrings`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364975%28v=vs.85%29.aspx)功能。

```
std::vector< std::basic_string<TCHAR> > drives;

TCHAR szBuffer[1024];
::GetLogicalDriveStrings(1024, szBuffer);
TCHAR *pCurrentDrive = szBuffer;
while (*pCurrentDrive)
{
   drives.push_back( pCurrentDrive );
   pCurrentDrive = &pCurrentDrive[_tcslen(pCurrentDrive) + 1];
} 
```

然后调用向量`GetDiskFreeSpaceEx`中的每个元素。`drives`

您也可以改用该`GetLogicalDrives`函数，它将驱动器作为位掩码返回。但是，我认为`GetLogicalDriveStrings`在这种情况下更简单，因为它将驱动器作为可以`GetDiskFreeSpaceEx`直接传递的字符串返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:21:01.787

怎么样：

```
for (char drive = 'a'; drive <= 'z'; drive++)
{
    // Get for amount for `drive`
} 
```

* * *

对于那些想知道的人......是的，这是非常幼稚的并且可能很耗时。

# java - 创建 Apklib 以使用 maven 构建

> ID：14812762
> 
> 赞同：4
> 
> 时间：2013-02-11T13:14:48.600
> 
> 标签：java, android, maven, maven-plugin

我有`project A`引用 Android 库的 Android `project B`，在 Eclipse 上构建项目 A 工作正常。但是我的应用程序使用了一些系统 API，所以我想使用 maven 构建。我不知道如何在 Maven 上的项目 A 中包含项目 B。

（基本上项目B既有源又有资源）

基本上我生成了 B.jar 并编辑了 pom 文件

```
<dependency>
    <groupId>com.me.example</groupId>
    <artifactId>myId</artifactId>
    <version>2.4.1</version>
    <type>lib</type>
</dependency> 
```

然后我可以构建`A.apk`，但是当我启动`A.apk`应用程序时，它的`crashing`. 因为`project B`有一些`resources`，当我生成 B.jar 它只有类文件并且没有资源。而且我还尝试生成`B.apk`并包含在 maven 中，但我无法构建 A.apk。

我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:02:44.953

首先我构建`B.apklib`然后我将它作为依赖项包含在 A 项目中，现在我可以构建`A.apk`

B.pom 包含

```
 <groupId>com.mer</groupId>
    <artifactId>me</artifactId>
    <version>1.4.3</version>
    <packaging>apklib</packaging>
    <name>I_am</name>
    <dependencies>
.......
        </dependencies> 
```

# c# - 在 MS Access 中搜索包含特殊字符的字符串

> ID：14812764
> 
> 赞同：0
> 
> 时间：2013-02-11T13:14:53.500
> 
> 标签：c#, ms-access, ms-access-2007, ms-access-2010

在 MS Access 中搜索包含特殊字符的长字符串时遇到问题。这是我的示例数据。

```
staff_Id | hashValue
   1     | 4ENOA2838F09dbfTKXeAdEIKRM91MdsDg0W4pRNChdkGa7iwoVifWH9avZdjrPp1QqLJ0ecNe/X716HlwqfSYA== 
```

这是我的 SQL 命令。

```
SELECT *
FROM table
WHERE hashValue='4ENOA2838F09dbfTKXeAdEIKRM91MdsDg0W4pRNChdkGa7iwoVifWH9avZdjrPp1QqLJ0ecNe/X716HlwqfSYA=='; 
```

我曾尝试在谷歌上搜索转义字符，但我无法正常工作。希望你能帮助我。谢谢你。

PS 我正在开发一个与 MS-access 交互的 C# 程序

**更新**

这是我的 C# 程序中执行搜索查询的 SQL 查询。

```
string sqlStatement = "SELECT * FROM table WHERE hashValue = @hashedValue";
using (OleDbConnection connection = new OleDbConnection(connString))
{
    using (OleDbCommand command = new OleDbCommand())
    {
        command.Connection = connection;
        command.CommandText = sqlStatement;
        command.Parameters.AddWithValue("@hashedValue", hashedValue);

        ds = new DataSet(); //have been declared
        dbAdapter = new OleDbDataAdapter(); //have been declared
        dbAdapter.SelectCommand = command;
        dbAdapter.Fill(ds, "table"); //empty dataset here
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:36:11.040

在 C# 中尝试编写如下命令：

```
string hashValue = @"4ENOA2838F09dbfTKXeAdEIKRM91MdsDg0W4pRNChdkGa7iwoVifWH9avZdjrPp1QqLJ0ecNe/X716HlwqfSYA==";

string sql = string.Format("SELECT * FROM table WHERE hashValue = '{0}'", hashValue); 
```

注意字符串前的@ 标记。这使您可以拥有如下所示的字符串：

```
string test = @" \ ";
Console.WriteLine(test); //output: \ 
```

在您的情况下，您可以这样做：

```
command.Parameters.AddWithValue("@hashedValue", @hashedValue); 
```

但是如果在声明字符串时设置了@-trick，则效果最好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:24:01.427

为什么不使用通配符编写查询？

```
SELECT *
FROM table
WHERE hashValue Like "*4ENOA2838F09dbfTKXeAdEIKRM91MdsDg0W4pRNChdkGa7iwoVifWH9avZdjrPp1QqLJ0ecNe/X716HlwqfSYA==*"; 
```

# java - REST API 或 Java API 之间的选择

> ID：14812765
> 
> 赞同：2
> 
> 时间：2013-02-11T13:14:54.273
> 
> 标签：java, api, rest, scalability, neo4j

最近几天我一直在阅读有关 Neo4j 的信息。我对是否需要使用 REST API 或者是否可以使用 Java API 感到非常困惑。

1.  我的需要是创建数百万个节点，它们之间会有一些联系。我想在几个节点属性上添加索引以进行搜索。最初我从带有 Java API 的嵌入式 GraphDB 模式开始，但很快就`OutOfMemory`在几个节点上建立了索引，所以我认为如果我的 neo4j 作为服务运行并通过 REST API 连接到它会更好，然后它会自行完成所有内存管理通过将数据换入/换出基础文件。我的假设对吗？

2.  此外，我计划将我的解决方案扩展到数十亿个节点，我相信单台机器的 neo4j 安装是不可能的。我也相信 Neo4j 有能力在分布式模式下运行。出于这个原因，我也认为继续 REST API 实现是最好的主意。虽然我找不到任何关于如何在分布式环境中运行 Neo4j 的好文档。

3.  我是否也可以使用 REST API 来执行批量插入等操作，我可以使用 Java API 以及在嵌入式模式下运行的 Graph DB 来执行这些操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:21:19.333

1.  你知道为什么你会得到你的`OutOfMemory`例外吗？这听起来就像您在同一个事务中创建所有这些节点，这导致它存在于内存中。尝试一次提交小块，以便`Neo4j`可以将其写入磁盘。除了缓存之类的东西，您不必管理 Neo4j 的内存。

2.  分布式模式采用主/从架构，因此您仍将在每个系统上拥有整个数据库的副本。Neo4j 对于磁盘存储非常有效，一个节点占用 9 个字节，关系占用 33 个字节，属性是可变的。

3.  有一个批处理 REST API，它将许多调用组合到同一个 HTTP 调用中，但是如果嵌入，进行 REST 调用仍然较慢。

使用您没有提到的 REST API 有一些缺点，这就是事务之类的东西。如果您要执行原子操作，您需要创建多个节点、关系、更改属性，并且如果任何步骤失败不提交任何步骤，则无法在 REST API 中执行此操作。

# c++ - 如何将 const char* 转换为静态 const char XY[]？

> ID：14812766
> 
> 赞同：0
> 
> 时间：2013-02-11T13:14:54.687
> 
> 标签：c++, arrays, char, constants

我正在做一些 C# 代码，它使用 DLLImport 在我的 C++ DLL 中调用一个函数：

```
[DllImport("my.dll", EntryPoint = "#16", CallingConvention = CallingConvention.StdCall)]
    private static extern void sendstring(string s); 
```

我在 C# 中这样称呼它：

```
sendstring("Test1\\0test2\\0"); 
```

* * *

我的 C++ DLL 需要创建一个静态 const char XY[] = "Test1\0test2\0"; 从这里开始，因为我需要它来从我的 c++ DLL 中调用另一个 DLLs 函数，如下所示：

```
functiontootherdll(sizeof(s),(void*)s); 
```

所以我在 C++ 中的代码：

```
extern "C" {
void MyClass::sendstring( const char *s) {  
    functiontootherdll(sizeof(s),(void*)s);
 } 
```

* * *

问题：它正在工作，如果我在我的 C++ DLL 中手动定义这个东西，如下所示：

```
static const char Teststring[] = "Test1\0test2\0";
functiontootherdll(sizeof(Teststring),(void*)Teststring); 
```

但是从我的 C# 文件中调用它时它没有使用 const char *s（它会报告来自被调用的其他 dll 的不同错误）。我需要知道如何将 const char *s 转换为 static const char s[] 之类的东西。

正如你所意识到的，我对这一切一无所知，所以非常欢迎任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:11:55.360

好吧，我发现了一种我认为的方法：

我将我的 C++ 修改为：

```
extern "C" {
void MyClass::sendstring( const char *s) {
int le = strlen(s);
char p[256];
strcpy(p,s);
char XY[sizeof(p) / sizeof(*p) + 1];
int o=0;
for (int i = 0; i<le;i++) {     
    if (p[i] == ';') {
        XY[i] = '\0';
    } else {
    XY[i] = p[i];
    }
    o++;
}
XY[o] = '\0';
functiontootherdll(sizeof(XY),(void*)XY);
} 
```

之后调用函数

```
functiontootherdll(sizeof(XY),(void*)XY); 
```

工作正常。

请注意，我现在从我的 C# 代码中发送了一个类似“Test1;test2;test3;...”的字符串，尝试使用 \\0 作为分隔符没有成功。我对 C# 的调用是：

```
sendstring("Test1;test2;test3"); 
```

我不知道这是否是一个聪明的解决方案，但至少它是一个:)

# android - 不在 ListPreference 上显示标准对话框

> ID：14812768
> 
> 赞同：0
> 
> 时间：2013-02-11T13:14:59.427
> 
> 标签：android, android-preferences, android-alertdialog, listpreference

当用户单击它时，我使用自定义 ListPreference 来显示我的自定义对话框。它看起来像这样：

```
 public class DeadLinePicker extends ListPreference{
     static final int DATE_DIALOG_ID = 1;
     static final int TIME_DIALOG_ID = 0;
     Dialog dialog;
     DeadLinePicker instance;
     Context context ; 
     private int mDay;
     private int mHour;
     private int mMinute;
     private int mYear;
     private int mMonth;

     public DeadLinePicker(Context context) {
            super(context);
            this.context = context;

        }
    public DeadLinePicker(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.context = context;
        final Calendar c = Calendar.getInstance();
        mYear = c.get(Calendar.YEAR);
        mMonth = c.get(Calendar.MONTH);
        mDay = c.get(Calendar.DAY_OF_MONTH);
        mHour = c.get(Calendar.HOUR);
        mMinute = c.get(Calendar.MINUTE);

    }

     private TimePickerDialog.OnTimeSetListener mTimeSetListener = new TimePickerDialog.OnTimeSetListener() {
        public void onTimeSet(TimePicker view, int hourOfDay, int minuteOfHour) {
          mHour = hourOfDay;
          mMinute = minuteOfHour;
          updateDisplay();

        }
      };

         DatePickerDialog.OnDateSetListener mDateSetListener =
                 new DatePickerDialog.OnDateSetListener() {
                 public void onDateSet(DatePicker view, int year, int monthOfYear,
                                 int dayOfMonth) {
                         mYear = year;
                         mMonth = monthOfYear;
                         mDay = dayOfMonth;
                         updateDisplay();
                 }

         };
        private CustomListPreferenceAdapter customListPreferenceAdapter;
        protected Dialog onCreateDialog(int id) {
                switch (id) {
                case DATE_DIALOG_ID:
                        return new DatePickerDialog(context,
                                mDateSetListener,
                                mYear, mMonth, mDay);

                case TIME_DIALOG_ID:
                    return new TimePickerDialog(context, mTimeSetListener, mHour, mMinute,
                        false);

                }
                return null;
        }
        protected void onPrepareDialog(int id, Dialog dialog) {
                switch (id) {
                case DATE_DIALOG_ID:
                        ((DatePickerDialog) dialog).updateDate(mYear, mMonth, mDay);

                        break;}
                }
        public void updateDisplay() {
            Activity activity = (Activity)context;
            instance = new DeadLinePicker(context);
            String minutes = null;
            if (mMinute>9)
                minutes = Integer.toString(mMinute);
            else 
                minutes = "0"+Integer.toString(mMinute);
            instance.setSummary(
                    new StringBuilder()
                    // Month is 0 based so add 1
                    .append(mYear).append("-")
                    .append(mMonth + 1).append("-")
                    .append(mDay)
                    .append(" ").append(mHour).append(":").append(minutes)
                    );
            activity.showDialog(DATE_DIALOG_ID);

    }
    @Override
        protected void onPrepareDialogBuilder(Builder builder) {

            super.onPrepareDialogBuilder(builder);
            builder.setNegativeButton(null, null);
            builder.setTitle(null);
            builder.setView(null);
            builder.setAdapter(null, null);
            Dialog alert  = builder.create();
            alert.dismiss();
        }
} 
```

当我调用时，我的自定义对话框显示`updateDisplay()`成功`onPreferenceClick`。但之后也会显示标准对话框。我想让它不显示。我设置了空值，`onPrepareDialogBuilder`但它仍然显示。我怎样才能不显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:33:00.200

我这样解决了：添加了带有自定义布局的footerView，看起来像ListPreference：

```
public class CustomEditPreference extends RelativeLayout{
      private CustomTextView title;
    private CustomTextView summary;
    Context ctx;
    private ImageView icon;
       private int alpha = 255;
    public CustomEditPreference(Context context) {
            super(context);

           init(context, null);
           setWillNotDraw(false);
        }
     public CustomEditPreference(Context context, AttributeSet attrs) {
            super(context, attrs);

            init(context, attrs);
            setWillNotDraw(false);

        }
     private void init(Context context, AttributeSet attrs)
     {

             LayoutInflater inflater = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
             inflater.inflate(R.layout.icon_pref, this);

             title = (CustomTextView) this.findViewById(android.R.id.title);

             summary = (CustomTextView) this.findViewById(android.R.id.summary);
             icon  = (ImageView) this.findViewById(R.id.icon);
             TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.CustomEditPreference);
                int i= a.getInt(R.styleable.CustomEditPreference_iconDisable,0);
                String v= a.getString(R.styleable.CustomEditPreference_android_title);
                int alpha= a.getInt(R.styleable.CustomEditPreference_alpha, 0);
                if (i!=0)
                {
                    icon.setVisibility(View.GONE);
                }
                if (v!=null)
                    title.setText(v);
                if (alpha !=0)
                    this.setAlpha(alpha);
                a.recycle();
     }

        public void setTitle(String text)
        {
            title.setText(text);
        }
        public void setSummary(String text)
        {
            summary.setText(text);
        }
        public String getSummary()
        {
            return this.summary.getText().toString();
        }
        public void setIcon(int rez)
        {
            Resources res = getResources();
            Drawable icon2 = res.getDrawable(rez);
            icon.setImageDrawable(icon2);
        }
        public void iconDisable()
        {
            icon.setVisibility(View.GONE);
        }
        public int getAlpha(){
            return alpha;
        }

        public void setAlpha(int opacity){
            if (this.alpha != opacity) {
                 alpha = opacity;
                 AlphaAnimation alpha = new AlphaAnimation(0.5F, 0.5F);
                 alpha.setDuration(0); // Make animation instant
                 alpha.setFillAfter(true); // Tell it to persist after the animation ends
                 // And then on your layout
                 this.startAnimation(alpha);
                invalidate();
            }

        }

} 
```

布局文件：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:foo="http://schemas.android.com/apk/res/com.assignmentexpert"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:minHeight="?android:attr/listPreferredItemHeight"
     android:paddingRight="?android:attr/scrollbarSize">
     <RelativeLayout
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_marginLeft="2dip"
         android:layout_marginRight="6dip"
         android:layout_marginTop="6dip"
         android:layout_marginBottom="6dip"
         android:layout_weight="1">
         <com.customitems.CustomTextView android:id="@+android:id/title"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:singleLine="true"
             foo:customFont="Roboto-Medium.ttf"
             android:layout_marginLeft="25dp"
             android:textAppearance="?android:attr/textAppearanceLarge"
             android:ellipsize="marquee"
             android:fadingEdge="horizontal" />
         <com.customitems.CustomTextView
              android:id="@+android:id/summary"
              foo:customFont="Roboto-Medium.ttf"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_marginLeft="25dp"
             android:textColor="#42aeff"
             android:layout_below="@android:id/title"
             android:textAppearance="?android:attr/textAppearanceSmall"
             android:maxLines="2" />
     </RelativeLayout>
     <ImageView
         android:id="@+id/icon"
         android:layout_width="wrap_content"
         android:src="@drawable/list_pointer"
         android:layout_alignParentRight="true"
         android:layout_height="wrap_content"
         android:layout_marginRight="10dp"
         android:layout_centerVertical="true"/>
    </RelativeLayout> 
```

以及与我在上面发布的相同的对话框创建和显示机制。

# css - 浮动条 100% 的 CSS 高度问题

> ID：14812770
> 
> 赞同：0
> 
> 时间：2013-02-11T13:15:20.750
> 
> 标签：css, height, divider

所以，快速输入这个，如果它有点模糊/令人困惑，很抱歉。

所以，我在屏幕底部有一个我正在使用 css 的栏，我在它上面有一个分隔线。我尝试在分隔线上使用 100% 的高度来让高度一直到底部，但它在条形下方，我希望它不在条形下方。你们会如何建议我这样做？我更喜欢css方法，但javascript也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:22:35.560

如果您对该分界线有任何填充，它将被添加到 100%。那可能是你的问题。可能是这样的：

```
<style>
    .one {
        height:100%;
        display:block;
    }

    .two {
        padding: 20px;
    }
</style>

<div class="one">
    <div class="two">

    </div>
</div> 
```

# solr - Solr/ElasticSearch - 按 ID 查找文档 -> 查询或 filterQuery？

> ID：14812774
> 
> 赞同：0
> 
> 时间：2013-02-11T13:15:26.793
> 
> 标签：solr, elasticsearch

我只是想知道我应该使用什么来通过 ID 进行查找。

这个线程[Solr Query on Unique Integer Field](https://stackoverflow.com/questions/1075761/solr-query-on-unique-integer-field)似乎使用了一个查询。

但这不是这里所说的：[Search document by id very slow](https://stackoverflow.com/questions/8472948/search-document-by-id-very-slow)

在这里： http: [//lucene.472066.n3.nabble.com/Solr-Unique-Key-Field-Should-Apply-on-q-search-or-fq-search-td4003066.html](http://lucene.472066.n3.nabble.com/Solr-Unique-Key-Field-Should-Apply-on-q-search-or-fq-search-td4003066.html) 但我没有重用相同的查询，因为查找可以在任何 ID 上

* * *

ElasticSearch 原生提供按 id 查找，有人知道 ElasticSearch 查找引擎下发生了什么，以便我最终可以使用与 Solr 相同的策略吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:22:08.133

`q`您仍然应该使用过滤器查询，因为您可能会在一段时间后搜索相同的 id，这与查询相比在性能上要快得多

`fq`- 提供可选的过滤查询。
查询的结果仅限于搜索过滤查询返回的那些结果。[过滤后的查询由 Solr 缓存](http://wiki.apache.org/solr/SolrCaching#filterCache)。它们对于提高复杂查询的速度非常有用。

# php - 为假时继续执行代码

> ID：14812783
> 
> 赞同：0
> 
> 时间：2013-02-11T13:15:51.937
> 
> 标签：php, mysql, sql, loops, for-loop

你能帮我解决这个问题吗？我有这个代码：

```
foreach ($mat_desc as $mat_key => $materials) {
    $mat = explode(' | ', $materials);
    $mat_d = $mat[0];
    $mat_u = $mat[1];
    $m = mat_id_from_mat_desc($mat_d, $mat_u);

    $cur = mysql_result(mysql_query('SELECT `req_id` FROM `requestdetails` JOIN `request` USING(`req_id`) WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.$m.'" AND `req_qty` <> `current_rec_qty` ORDER BY `req_id` DESC'), 0);
    echo $cur;
    if(mysql_num_rows($cur) == 0){
        exit;
    }

    mysql_query ("INSERT INTO `receive` (`proj_id`,`rec_code`) VALUES ('$proj_id','$rec_code')");       

    $rec_id = mysql_insert_id(); 
```

我想要实现的是，当`$cur`没有任何行时，它将退出循环而不继续执行其余代码。但如果它确实有任何行，它将继续并执行插入查询。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:17:49.573

我假设您的意思是您不想在语句中执行该`INSERT` *项目。*`foreach`如果是这种情况，更改`exit;`为`continue;`which 将指示 PHP 停止执行循环中当前项的代码，在循环中前进一个元素并再次从顶部开始。

您还应该更改：

```
$cur = mysql_result(mysql_query('SELECT `req_id` FROM `requestdetails` JOIN `request` USING(`req_id`) WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.$m.'" AND `req_qty` <> `current_rec_qty` ORDER BY `req_id` DESC'), 0); 
```

到：

```
 $cur = mysql_query('SELECT `req_id` FROM `requestdetails` JOIN `request` USING(`req_id`) WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.$m.'" AND `req_qty` <> `current_rec_qty` ORDER BY `req_id` DESC'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:22:08.527

如果您使用它`continue;`代替`exit;`它将跳到循环中的下一个项目。如果您想一劳永逸地结束循环，您可以`break;`使用`exit;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:17:46.643

尝试：

```
$cur = mysql_query('SELECT `req_id` FROM `requestdetails` JOIN `request` USING(`req_id`) WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.$m.'" AND `req_qty` <> `current_rec_qty` ORDER BY `req_id` DESC');

echo $cur;
if(mysql_num_rows($cur) == 0){
   exit;
} 
```

此外，您不应该使用`mysql_`扩展程序。尝试使用[PDO](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T13:22:56.240

如果要`foreach`完全中止循环，请使用`break`：

```
if(mysql_num_rows($cur) == 0){
    break;
} 
```

如果要前进到`foreach`循环的下一次迭代，丢弃当前`foreach`迭代代码的其余部分，请使用`continue`：

```
if(mysql_num_rows($cur) == 0){
    continue;
} 
```

`exit`用于结束完整的 php 脚本，是`die`.

# c++ - 使用宏增加 C++ 代码的详细程度

> ID：14812788
> 
> 赞同：15
> 
> 时间：2013-02-11T13:15:57.563
> 
> 标签：c++, debugging, macros

我希望有可能为我的程序的调试目的增加详细程度。当然，我可以在运行时使用开关/标志来做到这一点。但这可能非常低效，因为我应该将所有“if”语句添加到我的代码中。

所以，我想添加一个在编译期间使用的标志，以便在我的代码中包含可选的、通常很慢的调试操作，而不会在不需要时影响我的程序的性能/大小。这是一个例子：

```
/* code */
#ifdef _DEBUG_
/* do debug operations here 
#endif 
```

因此，使用 -D_DEBUG_ 编译应该可以解决问题。没有它，该部分将不会包含在我的程序中。

另一种选择（至少对于 i/o 操作）是定义至少一个 i/o 函数，例如

```
#ifdef _DEBUG_
#define LOG(x) std::clog << x << std::endl;
#else
#define LOG(x) 
#endif 
```

但是，我强烈怀疑这可能不是最干净的方法。那么，你会怎么做呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-11T13:22:26.637

我更喜欢`#ifdef`与真正的函数一起使用，以便如果`_DEBUG_`未定义该函数有一个空主体：

```
void log(std::string x)
{
#ifdef _DEBUG_
  std::cout << x << std::endl;
#endif
} 
```

这种偏好有三个重要原因：

1.  当`_DEBUG_`未定义时，函数定义为空，任何现代编译器都会完全优化对该函数的任何调用（当然，该定义应该在该翻译单元内可见）。
2.  守卫只需要应用于一小块本地化的`#ifdef`代码区域，而不是每次调用`log`.
3.  您不需要使用大量的宏，避免了代码的污染。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T13:20:06.460

您可以使用宏来更改函数的实现（就像在 sftrabbit 的解决方案中一样）。这样，您的代码中就不会留下任何空的地方，并且编译器将优化“空”调用。

您还可以使用两个不同的文件进行调试和发布实现，并让您的 IDE/构建脚本选择合适的文件；这根本不涉及`#defines`。只需记住 DRY 规则并使干净的代码在调试场景中可重用。

我会说他实际上非常依赖于您面临的实际问题。一些问题将更多地受益于第二种解决方案，而简单的代码可能会更好地使用简单的定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T13:22:54.003

您描述的两个片段都是使用条件编译通过编译时开关启用或禁用调试的正确方法。但是，您断言在运行时检查调试标志“可能非常低效，因为我应该将所有 'if' 语句添加到我的代码中”大部分是不正确的：在大多数实际情况下，运行时检查不会影响您的速度以可检测的方式编写程序，因此如果保留运行时标志为您提供潜在的优势（例如，打开调试以诊断生产中的问题而无需重新编译），您应该改为使用运行时标志。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T13:25:57.277

对于其他检查，我将依赖断言（请参阅[assert.h](http://www.cplusplus.com/reference/cassert/)），它完全符合您的需要：在调试中编译时检查，在为发布编译时不检查。

对于冗长，您建议的更多 C++ 版本将使用带有布尔值作为模板参数的简单 Logger 类。但是，如果将宏保存在 Logger 类中，也可以。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T13:34:29.710

对于商业软件，在运行时在客户站点上提供一些调试输出通常是一件很有价值的事情。我并不是说所有东西都必须编译成最终的二进制文件，但是客户对你的代码做你不期望的事情并不罕见[或者导致代码以你不期望的方式运行]。能够告诉客户“好吧，如果你跑步`myprog -v 2 -l logfile.txt`并做你平常的事情，然后给我发电子邮件`logfile.txt`”是一件非常非常有用的事情。

只要“决定我们是否登录的 if 语句”不在秘鲁最深、最黑暗的丛林中，嗯，我的意思是在您的紧密的、性能关键的循环的最深嵌套级别中，那么很少有问题把它留在里面。

因此，我个人倾向于采用“始终存在，而不是始终启用”的方法。这并不是说我发现自己有时不会在我的紧密循环的中间添加一些额外的日志记录 - 只是在稍后修复错误时将其删除。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T13:22:18.987

在进行条件编译时，您可以避免使用类似函数的宏。只需定义一个常规或模板函数来进行日志记录并在以下位置调用它：

```
#ifdef _DEBUG_
/* ... */
#endif 
```

部分代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-11T13:26:43.300

至少在 *Nix 世界中，这种事情的默认定义是`NDEBUG`（阅读*no-debug*）。如果已定义，您的代码应跳过调试代码。即你会做这样的事情：

```
#ifdef NDEBUG
inline void log(...) {}
#else
inline void log(...) { .... }
#endif 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-11T13:24:26.037

我在项目中使用的示例代码。这样，您可以使用变量参数列表，如果未设置*DEBUG*标志，则清除相关代码：

```
#ifdef DEBUG
#define PR_DEBUG(fmt, ...) \
    PR_DEBUG(fmt, ...) printf("[DBG] %s: " fmt, __func__, ## __VA_ARGS__)
#else
#define PR_DEBUG(fmt, ...)
#endif 
```

用法：

```
#define DEBUG
<..>
ret = do_smth();
PR_DEBUG("some kind of code returned %d", ret); 
```

输出：

```
[DBG] some_func: some kind of code returned 0 
```

当然，`printf()`可以用您使用的任何输出函数代替。此外，它可以轻松修改，因此会自动附加附加信息，例如时间戳。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-11T13:56:09.763

它就像任何其他功能一样。

我的假设：

*   没有全局变量
*   系统设计接口

对于您想要详细输出的任何内容，请创建两个实现，一个安静，一个详细。在应用程序初始化时，选择您想要的实现。

例如，它可以是记录器、小部件或内存管理器。

显然你不想重复代码，所以提取你想要的最小变化。如果您知道策略模式或装饰器模式是什么，那么这些就是正确的方向。遵循开闭原则。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-11T13:38:17.283

对我来说，这取决于应用程序。

我有一些我想始终记录的应用程序（例如，我们有一个应用程序，如果出现错误，客户端会获取应用程序的所有日志并将它们发送给我们进行诊断）。在这种情况下，日志 API 可能应该基于函数（即不是宏）并始终定义。

如果日志记录并非总是必要的，或者您出于性能/其他原因需要能够完全禁用它，您可以定义日志记录宏。

在这种情况下，我更喜欢这样的单行宏：

```
#ifdef NDEBUG
#define LOGSTREAM /##/
#else
#define LOGSTREAM std::clog
// or
// #define LOGSTREAM std::ofstream("output.log", std::ios::out|std::ios::app)
#endif 
```

客户端代码：

```
LOG << "Initializing chipmunk feeding module ...\n";
//...
LOG << "Shutting down chipmunk feeding module ...\n"; 
```

# excel - 每次警告信息后如何退出？

> ID：14812793
> 
> 赞同：0
> 
> 时间：2013-02-11T13:16:34.077
> 
> 标签：excel, vba

```
ActiveSheet.Unprotect
Cells.CheckSpelling SpellLang:=2057
If Range("F4").Value = 1 Then                                                  
    MsgBox "MARKED UP BUDGET does not equal TOTAL! Please amend as required"
    Application.Run "LATESTMEDIAPLANVERSION.xlsm!final" 
```

我目前有两段代码会产生警告框。但是目前这些弹出但不会将您从宏中弹出.. IE 我只想确保该行：

```
Application.Run...... 
```

只有在不提示警告框时才到达。什么是正确的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:19:01.657

将您的代码更改为：

```
ActiveSheet.Unprotect

Cells.CheckSpelling SpellLang:=2057

If Range("F4").Value = 1 Then                                                  

     MsgBox "MARKED UP BUDGET does not equal TOTAL! Please amend as required"
     Exit Sub

else

    Application.Run "LATESTMEDIAPLANVERSION.xlsm!final"

end if 
```

# asp.net - Request.Cookies 和 Response.Cookies 默认同步

> ID：14812802
> 
> 赞同：1
> 
> 时间：2013-02-11T13:17:25.223
> 
> 标签：asp.net, cookies, request, response, duplication

当尝试操作 Response.Cookies 和/或 Request.Cookies 中的 cookie 集合时，任何人都可以澄清我在 .NET 4.0 Web 应用程序中遇到的行为。尽管我努力寻找文档或论坛帖子以明确确认 Request.Cookies 和 Response.Cookies 的预期默认行为，但我始终无法找到明确的答案，现在我遇到了需要的情况！

我的确切问题是： * Request.Cookies 和 Response.Cookies 肯定应该被认为是完全独立的集合，还是它们实际上代表同一个集合的两个不同“视图”？

*   Request.Cookies 和 Response.Cookies 之间的“关系”中内置了多大程度的同步。除了添加到 Response.Cookies 的 cookie 在 Request.Cookies 中立即可见（我知道因为它已记录在案）之外，我是否应该默认期望两个集合中的所有其他 cookie 始终相同额外的自动同步？

*   如果有一些同步，它是瞬时的，还是全部在生命周期的某个特定阶段处理？

*   如果有一些同步，是否有可能，甚至是可取的，以避免它发生？

*   处理来自以前陈旧浏览器请求的重复 cookie 的最佳方法是什么？目前，我这样做的努力没有成功，因为我对 Response.Cookies 所做的任何更改都会立即包含在 Request.Cookies 中（再次出现预期的行为），但是......一些隐含的“幻影”过程发生了具有再次同步集合的结果 - 换句话说，我能找到的唯一可能结果是我的 Response.Cookies 集合没有重复 cookie 的副本，或者返回到两个重复 cookie 的原始状态。

显然从最后一个问题来看，我显然误解了这两个集合的默认行为。这就是为什么任何应该发生的事情的澄清都会非常感激地收到！

提前致谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T19:27:42.807

Request 和 Response 对象的 Cookies 属性是[HttpCookieCollection](http://msdn.microsoft.com/en-us/library/system.web.httpcookiecollection.httpcookiecollection.aspx)的两个不同实例。但是，在初始化 Response 对象时，会使用 Response 对象的引用创建 HttpCookieCollection 的实例。
对 Response.Cookies.Add 的调用不仅会添加一个 cookie，还会通过 Response.OnCookieAdd(cookie) 向 Request.Cookies 添加一个 cookie。
总体而言，您需要遵循从 Request.Cookies 中获取 cookie 并超时（删除浏览器上的 cookie）或修改它然后将其设置回 Response 的做法。如果您只想添加 cookie，则使用 Add 方法，否则使用 Set 确保只返回一个同名的 cookie。请参阅另[一篇文章](https://stackoverflow.com/questions/5517273/httpcookiecollection-add-vs-httpcookiecollection-set-does-the-request-cookies)。

# ruby-on-rails - 安装 RVM 时运行“make -j2”时出错

> ID：14812804
> 
> 赞同：5
> 
> 时间：2013-02-11T13:17:38.623
> 
> 标签：ruby-on-rails, macos, rvm

我正在关注有关在 Mac 上设置 Rails 的教程：

```
http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/ 
```

当我进入**第 6 步：使用 Ruby 1.9.3 安装 RVM**并运行`curl -L https://get.rvm.io | bash -s stable --ruby`安装 RVM 时，我收到以下错误：

```
Error running 'make -j2', please read ~/.rvm/log/ruby-1.9.3-p385/make.log
There has been an error while running make. Halting the installation. 
```

在 make.log 中，它生成的内容如下：

```
regparse.c:582:15: error: implicit conversion loses integer precision: 'st_index_t' (aka 'unsigned long') to 'int' [-Werror,-Wshorten-64-to-32]
    return t->num_entries;
    ~~~~~~ ~~~^~~~~~~~~~~
1 error generated.
make: *** [regparse.o] Error 1
make: *** Waiting for unfinished jobs.... 
```

我发现这个策略是因为我之前在类似的设置中遵循了本指南并且没有遇到任何问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-11T21:24:26.723

`clang`当您使用=> [https://bugs.ruby-lang.org/issues/7830](https://bugs.ruby-lang.org/issues/7830)编译 Ruby 时会发生此错误

除非您对测试 Ruby/`clang`兼容性感兴趣，否则最好使用编译 ruby `gcc-4.2`​​（有关详细信息，请参阅[https://bugs.ruby-lang.org/issues/5883](https://bugs.ruby-lang.org/issues/5883)）

跳过`--ruby`安装程序的标志：

```
\curl -L https://get.rvm.io | bash -s stable 
```

RVM 有一个命令可以使用 homebrew 安装所有必需的软件包：

```
rvm requirements run force 
```

如果自制软件不可用，它将显示所需软件包的列表。

**或者**有一个补丁可以使它与clang一起工作，使用以下方法安装ruby：

```
rvm install 1.9.3-p385 --patch https://bugs.ruby-lang.org/attachments/download/3496/disable-werror.patch -C --disable-werror 
```

# accessibility - JAWS 无法正确阅读文本

> ID：14812805
> 
> 赞同：1
> 
> 时间：2013-02-11T13:17:38.880
> 
> 标签：accessibility, jaws-screen-reader

我正在尝试使用 JAWS 和 FF 开发一个可访问的网站，但我找不到让屏幕阅读器不阅读代码的方法。

我尝试过使用`<span></span>`，但它仍然可以读取代码。

例如，我这样做了： `<header><span role="heading">Hi</span></header>`JAWS 不是阅读“嗨”，而是说“页面只有一个标题，没有链接。JAWS 标题级别 2 嗨。” 然后当我在浏览器选项卡之间移动并返回我正在处理的选项卡时，它会显示“框架。你好标题级别 2”

所以我想知道，有没有办法让 JAWS 只读取屏幕上的内容？我必须使用 AJAX 还是什么？

注意：这是我第一次处理可访问性，所以我不知道我哪里出错了，我该怎么办。

# php - Drupal中的PHP块不起作用

> ID：14812815
> 
> 赞同：0
> 
> 时间：2013-02-11T13:18:03.870
> 
> 标签：php, drupal

我在文本格式为 PHP 代码的块中有以下内容。由于某种原因，当我查看页面时，php 只是被删除了。

```
<a href="<?php print base_path(); ?>node/add/f2?edit[field_f2][und]=<?php print arg(2); ?>">New</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-02T10:12:48.153

除了启用“PHP Filter”模块并设置正确的权限外，您还需要在此处编辑格式类型：

```
/admin/config/content/formats/php_code 
```

勾选您想要访问的“角色”，然后勾选“PHP 评估者”过滤器选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:24:41.850

您的标签不匹配：

```
<a href="<?php print base_path(); ?>/node/add/f2?edit[field_f2][und]=<?php print arg(2); ?>"New</a> 
```

应该：

```
<a href="<?php print base_path(); ?>/node/add/f2?edit[field_f2][und]=<?php print arg(2); ?>">New</a> 
```

`>`注意“新”之前的额外内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:20:38.470

后面有一个`;`缺失`print base_path()`。
它应该是`print base_path();`

# git - 如何制作 git 填充标签？关键词？

> ID：14812817
> 
> 赞同：1
> 
> 时间：2013-02-11T13:18:12.433
> 
> 标签：git, version-control

在我的源代码中，我会放置如下标签，SVN 会填写 lastchangedate、作者、修订等。这可以用 git 完成吗？有人可以告诉我如何..谢谢

```
/**
* Last changed: $LastChangedDate$
* @author $Author$
* @version $Revision$
*
*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:33:48.803

“干净”和“涂抹”过滤器 - [“关键字扩展”](http://git-scm.com/book/ch7-2.html#Keyword-Expansion)部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:23:20.027

我不相信 git 有这个。但是您将能够编写一个挂钩来运行并执行您正在考虑的操作。

[http://git-scm.com/book/en/Customizing-Git-Git-Hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)

# javascript - 在交点上显示垂直线

> ID：14812821
> 
> 赞同：0
> 
> 时间：2013-02-11T13:18:32.650
> 
> 标签：javascript, charts, highcharts

我正在尝试用 Highcharts 表示**帕累托**图，如您[在此处看到的](http://jsfiddle.net/NelsonReis/yr779/)。
水平线显示**80% 的值**，但现在我想显示一条垂直线，其中 80% 水平线与“累积”图表系列相交。

这是我想要实现的一个例子： ![在此处输入图像描述](../Images/b23611c912fa7613229544d7634f7db5.png)

有没有办法做到这一点？

另一种选择是获取“累积”样条曲线的“x”值，其中“y”值为“80”，这样我就可以手动绘制线。
这甚至可以通过[Highcharts API](http://api.highcharts.com/highcharts)实现吗？

我知道可以获得系列中一个点的值，但在这种情况下还不够：

```
var point = chart.get('accumulated').data[2]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-31T04:27:54.733

我已经找到它用于 80:20 的计算。

首先，我从样条数据中找到了大于或等于 80 的系列中的第一个值。

```
i.e. >= 80 
```

假设它是`DataX` 然后找出数组中的那个索引加上一个 for `DataX`。

`i.e. DataX location is DataIndex = index+1`

（因为数组从第 0 个计算开始需要加一）

公式是
`DataX : DataIndex :: 80: ?`

```
let the question mark is xIndexOf80 
```

然后 xIndexOf80 = (DataIndex *80)/(DataX )。

```
xIndexOf80 is nothing but position of 80 on X axis. 
```

它会在 X 轴上为您提供准确的标记

```
function findInetrSectionPoint(arrSplineData) {

    var intLen = arrSplineData.length;

    for (var index = 0; index < intLen; index++) {

      if (arrSplineData[index] >= 80) {

        interSectPoint = ((index + 1) * 80) / arrSplineData[index] - 1;
        break;
      }

    }

    return interSectPoint;
  } 
```

这是[Plunker](http://plnkr.co/edit/IGvgzYHiLCRJExUdgTco?p=preview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:49:01.333

您可以计算 80% 点的位置，然后使用[http://api.highcharts.com/highstock#Renderer](http://api.highcharts.com/highstock#Renderer) rect。除此之外，您还可以检查此选项[http://api.highcharts.com/highstock#Axis.addPlotLine()](http://api.highcharts.com/highstock#Axis.addPlotLine()) / [http://api.highcharts.com/highstock#yAxis.plotLines](http://api.highcharts.com/highstock#yAxis.plotLines)

# excel - 使用 DAO 和 WHERE 子句将数据从 Excel 导入 Access

> ID：14812822
> 
> 赞同：1
> 
> 时间：2013-02-11T13:18:34.450
> 
> 标签：excel, vba, ms-access, import, import-from-excel

我需要将某些信息从 Excel 文件导入 Access DB，为此，我使用的是 DAO。

用户从系统中获取 excel 源文件，他不需要直接与之交互。这个源文件有 10 列，我只需要从中检索某些记录。

我正在使用它来检索所有记录：

```
Set destinationFile = CurrentDb
Set dbtmp = OpenDatabase(sourceFile, False, True, "Excel 8.0;")
DoEvents
Set rs = dbtmp.OpenRecordset("SELECT * FROM [EEX_Avail_Cap_ALL_DEU_D1_S_Y1$A1:J65536]") 
```

当我只想使用 WHERE 子句检索某些记录时，我的问题就出现了。我要应用该子句的字段的名称是“日期 (UCT)”（请记住，用户从另一个系统获取此源文件），我无法让 WHERE 子句对其进行处理。如果我将 WHERE 子句应用于另一个名称没有 ( ) 或空格的字段，那么它可以工作。例子：

```
Set rs = dbtmp.OpenRecordset("SELECT * FROM [EEX_Avail_Cap_ALL_DEU_D1_S_Y1$A1:J65536] WHERE Other = 12925") 
```

上一条指令将仅检索字段 Other 的值为 12925 的记录数。

谁能告诉我如何使用包含空格和括号的字段名称（即“日期（UCT）”）获得相同的结果？

非常感谢。

奥克塔维奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:48:44.023

尝试将字段名称括在方括号中：

`SELECT * FROM [EEX_Avail_Cap_ALL_DEU_D1_S_Y1$A1:J65536] WHERE [Date (UCT)] = 12925`

或者如果这是我们正在寻找的日期：

`SELECT * FROM [EEX_Avail_Cap_ALL_DEU_D1_S_Y1$A1:J65536] WHERE [Date (UCT)] = #02/14/13#;`

要使用日期文字，您必须将其括在 # 个字符中，并以 MM/DD/YY 格式写入日期，无论您机器上的任何区域设置如何

# java - 使用“查找”查找部分文本

> ID：14812826
> 
> 赞同：0
> 
> 时间：2013-02-11T13:18:51.563
> 
> 标签：java, regex

我有一个关于 Java regex (Pattern, Matcher) 和`find()`. 我可以解析以下文本吗

```
Mo, We, Su 10:00 - 22:00 
```

以便第一次调用`find()`返回以下组

```
group(1) = Mo
group(2) = 10:00
group(3) = 22:00 
```

的第二次调用`find()`应该返回

```
group(1) = We
group(2) = 10:00
group(3) = 22:00 
```

第三次调用`find()`应该返回

```
group(1) = Su
group(2) = 10:00
group(3) = 22:00 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:25:08.800

**假设**

*   星期几写为`Mo`, `Tu`, `We`, `Th`, `Fr`, `Sa`, 和`Su`。
*   时间有效。我将匹配我的正则表达式中的任何数字序列。

**解决方案**

您可以使用此正则表达式（我允许间距灵活）：

```
(Mo|Tu|We|Th|Fr|Sa|Su)(?=(?: *+, *+(?:Mo|Tu|We|Th|Fr|Sa|Su))* *+(\d+:\d+) *+- *+(\d+:\d+)) 
```

上面的正则表达式非常严格——如果逗号分隔的列表包含当前星期几到时间范围之间的其他内容（例如`Su, Somethingelse 02:12 - 3:45`），它将不会产生匹配。

如果您**完全确定**字符串的格式是正确的，并且您只想提取数据，那么这个松散的正则表达式就足够了：

```
([a-zA-Z]+)(?=\D+(\d+:\d+)\D+(\d+:\d+)) 
```

将它们放入字符串文字中：

```
"(Mo|Tu|We|Th|Fr|Sa|Su)(?=(?: *+, *+(?:Mo|Tu|We|Th|Fr|Sa|Su))* *+(\\d+:\\d+) *+- *+(\\d+:\\d+))"
"([a-zA-Z]+)(?=\\D+(\\d+:\\d+)\\D+(\\d+:\\d+))" 
```

* * *

**解释**

```
(Mo|Tu|We|Th|Fr|Sa|Su)(?=(?: *+, *+(?:Mo|Tu|We|Th|Fr|Sa|Su))* *+(\d+:\d+) *+- *+(\d+:\d+)) 
```

*   `(Mo|Tu|We|Th|Fr|Sa|Su)`：匹配一周中的某一天。

*   `(?=(?: *+, *+(?:Mo|Tu|We|Th|Fr|Sa|Su))* *+(\d+:\d+) *+- *+(\d+:\d+))`：一个*零宽度*（文本不会被消耗）正向前瞻（如果里面的模式匹配，那么它可以继续；否则，匹配失败并回溯）。它由 指定`(?=pattern)`。

    里面的图案是`(?: *+, *+(?:Mo|Tu|We|Th|Fr|Sa|Su))* *+(\d+:\d+) *+- *+(\d+:\d+)`。在这里，我们试图匹配当前星期几之后的文本部分，并捕获时间。

    *   `(?: *+, *+(?:Mo|Tu|We|Th|Fr|Sa|Su))* *+`: 在星期几之后，我们可以用逗号分隔其他星期几。

    *   `(\d+:\d+) *+- *+(\d+:\d+)`: 然后是时间范围。

    *   您可以看到一些` *+`（空格、星号、加号）序列。` *`表示匹配 0 个或多个`*`空格字符，*贪婪地*，但是允许回溯。` *+`是*所有格*，这意味着它不允许回溯。您可以将其视为一种优化，以防止完成不必要的工作。

* * *

```
([a-zA-Z]+)(?=\D+(\d+:\d+)\D+(\d+:\d+)) 
```

对于这个，我假设星期几是输入字符串中唯一的字母字符序列。我还假设时间戳是唯一可以有数字的地方。

# ruby - Bundler 的 rake 发布与 geminabox？

> ID：14812828
> 
> 赞同：4
> 
> 时间：2013-02-11T13:18:53.410
> 
> 标签：ruby, rake, bundler

有没有办法配置捆绑器，这样当我这样做时，`rake release`它会将 gem 提交到我自己的 gem 服务器（[盒子](https://github.com/cwninja/geminabox)实例中的 gem）而不是 ruby​​gems？

理想情况下，我可以从我的 git 存储库中省略此配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-29T21:40:18.820

Rubygems 实际上是硬编码到 bundler 中的，我只找到了一种解决方法。

以下monkeypatch应该可以满足您的需求：

```
module Bundler
  class GemHelper
    protected
    def rubygem_push(path)
      if Pathname.new("~/.gem/nexus").expand_path.exist?
        sh("gem nexus '#{path}'")
        Bundler.ui.confirm "Pushed #{name} #{version} to https://<your-url-here>/."
      else
        raise "Your Nexus credentials aren't set. Run `gem nexus #{path}` to push your gem and set credentials."
      end
    end
  end
end 
```

以上是针对 Nexus 而不是 Geminabox，但这个概念应该适用于任何一个。

至于从 git 中省略它，恐怕我们不走运。但是，您可以在项目之间适当地共享它，因此只需将其签入一个位置而不是多个位置。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-14T17:43:39.573

我为此制作了一个无依赖的 gem，它模仿 geminabox http post 请求并用 rake release:inabox 覆盖捆绑器 rake 发布

[https://github.com/dfherr/geminabox-release](https://github.com/dfherr/geminabox-release)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-26T13:35:41.110

添加`'bundler_geminabox'`到您的 Gemfile：

```
group :development do
  gem 'bundler_geminabox'
end 
```

然后，在您的 rakefile 中，而不是要求`'bundler/gem_tasks'`：

```
require 'bundler_geminabox/gem_tasks' 
```

您不需要向 rakefile 添加任何任务；你会自动得到`rake build`, `rake install`, 和`rake release`, 最后一个上传到列出的服务器`~/.gem/geminabox`。否则，行为与 提供的等效任务相同`bundler/gem_tasks`。

Github 上的宝石：[https ://github.com/joshkrueger/bundler_geminabox](https://github.com/joshkrueger/bundler_geminabox)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-13T19:49:25.740

我设法更改了将 gem 上传到 ruby​​gems 的任务，这比 JohnIV 提供的解决方案更具侵入性，尽管概念是相同的。

```
Rake::Task['release:rubygem_push'].clear
namespace :release do
    task :rubygem_push do
      version = ModuleName::VERSION
      name = 'module_name'
      cmd = "gem nexus pkg/#{name}-#{version}.gem"
      puts `#{cmd} 2>&1`
    end
end 
```

# jquery - 更改当前按钮的显示图像并将其他更改为默认值

> ID：14812837
> 
> 赞同：0
> 
> 时间：2013-02-11T13:19:34.447
> 
> 标签：jquery, html

我有几个按钮：

```
<button class="image1-button"><img src="images/button_unselected.png"></button>
<button class="image1-button"><img src="images/button_unselected.png"></button>
<button class="image1-button"><img src="images/button_unselected.png"></button>
<button class="image1-button"><img src="images/button_unselected.png"></button> 
```

当我按下其中之一时，会发生以下情况：

```
$(".image1-button").click(function(){
$(this).find("img").attr("src", "images/button_selected.png");
}); 
```

我怎么能说另一个，意味着不是（这个）获取始终只有当前按下的按钮具有“button_selected”的src“images/button_unselected”

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:21:07.670

像这样：

```
$(".image1-button").click(function(){
    //Reset all
    $(".image1-button").find("img").attr("src", "images/button_unselected.png");
    //mark current
    $(this).find("img").attr("src", "images/button_selected.png");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:24:37.803

```
`$(".image1-button").click(function(){
  $(this).find("img").attr("src", "images/button_selected.png")
  $(this).siblings().find("img").attr("src", "images/button_unselected.png")
});`
```

# asp.net-mvc - 具有自定义页面扩展的自定义 ViewEngine

> ID：14812843
> 
> 赞同：0
> 
> 时间：2013-02-11T13:20:26.180
> 
> 标签：asp.net-mvc

我创建了一个自定义视图引擎来处理移动请求。这些视图必须具有“.mobile”扩展名，并且必须放在 /ViewsMobile 根文件夹下：

```
public class MobileViewEngine : RazorViewEngine
    {
        public MobileViewEngine()
        {
            MasterLocationFormats = new string[] { "~/ViewsMobile/Shared/{0}.mobile" };
            ViewLocationFormats = new string[] { "~/ViewsMobile/{1}/{0}.mobile", "~/ViewsMobile/Shared/{0}.mobile" };
            PartialViewLocationFormats = new string[] { "~/ViewsMobile/Widgets/{1}/{0}.mobile" };
            FileExtensions = new string[] { "mobile" };
        }
        public override ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName, bool useCache)
        {
            ViewEngineResult result = null;
            var request = controllerContext.HttpContext.Request;

            if (request.Browser.IsMobileDevice)
            {
               result = base.FindView(controllerContext, viewName, masterName, false);
            }
            return null;
        }
    } 
```

我将此 ViewEngine 插入到 ViewEngines.Engines 中的位置 0（作为顶级引擎）`Application_Start`事件中。

```
ViewEngines.Engines.Insert(0, new MobileViewEngine()); 
```

在我将此行添加到 web.config 以识别 .mobile 扩展名之后：

```
 <buildProviders>
        <add extension=".mobile" type="System.Web.WebPages.Razor.RazorBuildProvider, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
 </buildProviders> 
```

现在，如果我从移动平台访问主页（控制器 = 页面，操作 = 主），我会收到以下异常：

> 无法确定“~/ViewsMobile/Pages/Main.mobile”的代码语言。上线崩溃`base.FindView(controllerContext, viewName, masterName, false);`

这是堆栈跟踪：

> [InvalidOperationException：无法确定“~/ViewsMobile/Pages/Main.mobile] System.Web.WebPages.Razor.WebPageRazorHost.GetCodeLanguage()+24401 的代码语言
> 
> System.Web.WebPages.Razor.WebPageRazorHost..ctor（字符串虚拟路径，字符串物理路径）+136
> 
> System.Web.Mvc.MvcWebRazorHostFactory.CreateHost(String virtualPath, String physicalPath) +43 ....

你知道我如何为我的视图使用自定义扩展，如“.mobile”，并在每个视图中使用 Razor？

提前致谢。

亲切的问候。

何塞。

# iphone - 仅在一个视图上更改导航栏

> ID：14812847
> 
> 赞同：1
> 
> 时间：2013-02-11T13:20:39.880
> 
> 标签：iphone, ios, objective-c, uinavigationcontroller

我在我的 appdelegate 中设置了一个自定义导航栏。你可以在这里看到代码。

```
UIImage *image = [UIImage imageNamed:@"navbar.png"];
[[UINavigationBar appearance] setBackgroundImage:image forBarMetrics:UIBarMetricsDefault]; 
```

但现在我正在使用 eventkit 框架。我想要的是当我去事件详细信息时，我得到标准的导航栏布局。所以没有图像。

```
EKEventViewController *vc = [[EKEventViewController alloc] init];
[vc.navigationController.navigationBar setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault];
vc.event = [dataSource eventAtIndexPath:indexPath];
vc.allowsEditing = YES;
[calendar.navigationController pushViewController:vc animated:YES]; 
```

我尝试了以下方法，但它不起作用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:25:06.767

你可以做一件事，用默认导航栏截取一个视​​图控制器，只裁剪导航栏区域，即制作 320 x 44 大小的图像。

当您再次需要默认导航栏时，使用此裁剪图像作为导航栏的背景，添加以下代码

```
UIImage *image = [UIImage imageNamed:@"defaultNavbar.png"];
[[UINavigationBar appearance] setBackgroundImage:image forBarMetrics:UIBarMetricsDefault]; 
```

当您导航到另一个具有自定义 Navimage 的视图控制器时，再次借助您的自定义图像代码绘制导航图像，即

```
UIImage *image = [UIImage imageNamed:@"navbar.png"];
[[UINavigationBar appearance] setBackgroundImage:image forBarMetrics:UIBarMetricsDefault]; 
```

# xpath - 从字段中获取 Solr 中的逗号分隔值

> ID：14812848
> 
> 赞同：0
> 
> 时间：2013-02-11T13:20:39.953
> 
> 标签：xpath, solr, concatenation

我有这样的xml。

```
<Root>
    <a1>
     <a>test</a>
     <b>
       <c>1</c>
       <c>2</c>
     </b>
    </a1>

    <a1>
     <a>test2</a>
     <b>
       <c>3</c>
       <c>4</c>
     </b>
    </a1>
</Root> 
```

我将把这个 xml 中的数据导入到 solr 中。

我正在使用 XPathEntityProcessor 并且我想连接节点的值`<c>`。这将导致“1,2”和“3,4”。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:00:34.203

在 solr 中使用 XPath是**不可能的。**

此查询将适用于任何与 XPath 2.0 兼容的查询处理器，但 solr 似乎不是：

```
//b/string-join(c/text(), ",") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:48:10.767

为什么需要连接它们？Solr 支持开箱即用的多值字段，您只需要以这种方式声明它们。

但是，如果您确实想要这样做，请使用 DIH 将它们放入 multiValued 字段，然后使用自定义/脚本转换器或 (Solr 4+) update.chain 和[Update Request Processor](http://wiki.apache.org/solr/UpdateRequestProcessor)将它们连接起来。有[一个可以连接](http://lucene.apache.org/solr/4_1_0/solr-core/org/apache/solr/update/processor/ConcatFieldUpdateProcessorFactory.html)。

# facebook-like - 群组多语言 Facebook 赞

> ID：14812850
> 
> 赞同：1
> 
> 时间：2013-02-11T13:20:44.347
> 
> 标签：facebook-like

我有一个支持多种语言的网上商店。在我的产品详细信息页面上，用户可以喜欢产品。但是，该页面的英文版本与该页面的荷兰版本具有不同的 url。例如： en: www.domain.com/en/product nl: www.domain.com/nl/product 当用户点赞英文页面的产品时，荷兰文页面没有点赞。facebook的like按钮中是否有可能对这个likes进行分组，所以页面的每个版本都有相同数量的likes？

提前致谢！

# php - 对多个页面使用 mod-rewrite

> ID：14812852
> 
> 赞同：0
> 
> 时间：2013-02-11T13:20:46.080
> 
> 标签：php, mod-rewrite, subdomain, wildcard

**简化问题**

`domain.com/folder/client.php?id=1`我改用`1.domain.com`这个 .htaccess 代码

```
Options +FollowSymLinks
RewriteEngine on

RewriteCond %{HTTP_HOST} !^www.domain.com$ [NC]
RewriteCond %{HTTP_HOST} ^(www.)?([^.]+).domain.com$ [NC]
RewriteRule ^$ /client.php?id=%2 [QSA,NC] 
```

现在我想更改`domain.com/folder/about.php?id=1`为`1.domain.com/about`.

是否可以 ？还是有其他方法可以做到这一点？

谢谢 :D

* * *

**老问题**

在我的目录中，我有 2 页（`client.php`, `about.php`）。我已经为页面目录设置了一个通配符子域并更改`domain.com/folder/client.php?id=1`为`1.domain.com`. 这是我的 .htaccess 代码：

```
Options +FollowSymLinks
RewriteEngine on

RewriteCond %{HTTP_HOST} !^www.domain.com$ [NC]
RewriteCond %{HTTP_HOST} ^(www.)?([^.]+).domain.com$ [NC]
RewriteRule ^$ /client.php?id=%2 [QSA,NC] 
```

现在，我需要添加另一个页面。因此，在 client.php 页面中，有一个按钮可以转到同一目录中的 about.php 页面。我尝试了 1.domain.com/about.php 但它不起作用。

我是否必须创建另一行 RewriteCond ？还是有其他方法可以做到这一点？

非常感谢 :D

* * *

没有工作 ID 的更新代码

```
Options +FollowSymLinks
RewriteEngine on

RewriteCond %{HTTP_HOST} !^www.domain.com$             [NC]
RewriteCond %{HTTP_HOST} ^(www.)?([^.]+).domain.com$   [NC]
RewriteCond %{REQUEST_URI} !^/about                    [NC]
RewriteRule ^$ /client.php?id=%2                   [QSA,NC]

RewriteBase /
RewriteCond %{HTTP_HOST} !^www.domain.com$                [NC]
RewriteCond %{HTTP_HOST} ^(?:www\.)?([^.]+)\.domain\.com$ [NC]
RewriteCond %{REQUEST_URI} ^/about                        [NC]
RewriteCond %{REQUEST_URI} !about\.php                    [NC]
RewriteRule . /about.php?id=%1                            [L,QSA] 
```

**代码解析了 url 框中的文本。比方说`id=1`。现在它显示 1.domain.com/about。

```
the php code : `$_GET["id"]` is not specified.** 
```

感谢**faa**的编辑：D

* * *

**完整的解决方案**

参考[Using mod-Rewrite with 5 pages (wildcard sub-domain)](https://stackoverflow.com/questions/14871176/using-mod-rewrite-with-5-pages-wildcard-sub-domain)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:42:56.203

你可以试试这个：

```
Options +FollowSymLinks
RewriteEngine on

## This is the actual rule-set that works as it is according to the OP
RewriteCond %{HTTP_HOST} !^www.domain.com$             [NC]
RewriteCond %{HTTP_HOST} ^(www.)?([^.]+).domain.com$   [NC]
# Added to exclude folder `/about`
RewriteCond %{REQUEST_URI} !^/about                    [NC]
RewriteRule ^$ /client.php?id=%2                       [L,QSA,NC]

## This is the additional rule set
RewriteBase /
RewriteCond %{HTTP_HOST} !^www.domain.com$             [NC]
RewriteCond %{HTTP_HOST} ^(?:www\.)?([^.]+)\.domain\.com$ [NC]
RewriteCond %{REQUEST_URI} ^/about                     [NC]
RewriteCond %{REQUEST_URI} !about\.php                 [NC]
RewriteRule . http://domain.com/folder/about.php?id=%1 [L,QSA] 
```

静默地图

`http://N.domain.com/about`带或不带斜杠

到：

`http://domain.com/folder/about.php?id=N`

对于永久和可见的重定向，替换`[L,QSA]`为`[L,R=301,QSA]`

# java - Java 高效地组合多个集合

> ID：14812854
> 
> 赞同：0
> 
> 时间：2013-02-11T13:20:50.693
> 
> 标签：java, collections, merge

我有以下几行，是更大功能的一部分：

```
Collection<String> idSet; //idset != successors.keys()
Map<String, ArrayList> successors; // parameter to larger function
ArrayList<String> result = new ArrayList<String>();
    for (String id: idSet) {
        ArrayList<String> idsuccessors = this.successors.get(id);
        result.addAll(idSuccessors);
      } 
```

我想将映射后继者中的所有值组合到一个集合中。尽管上面的代码有效，但我认为必须有一种更简洁的方法（例如，在 Python 中，我用一条短线实现了它）。

```
result = set.union(*[set(successors(id)) for id in ids]) 
```

请注意，如果有帮助，将 Mapping 的类型从 ArrayList 转换为例如 HashSet 不是问题。

非常感谢任何建议。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-15T19:32:36.190

这是使用新的 Java 8 流的 2-liner：

```
ArrayList<String> result = new ArrayList<>();
successors.values().forEach(result::addAll); 
```

我确定某处潜伏着一条单线，但我还没有找到

# android - 在 Android 中解码 AMR 音频文件

> ID：14812855
> 
> 赞同：0
> 
> 时间：2013-02-11T13:20:51.663
> 
> 标签：android, decode, amr

有没有办法在 Android 中解码 AMR 音频文件并访问原始音频数据？MediaCodec 仅适用于 API 16 及更高版本。我需要可以在 Android 2.2 及更高版本上运行的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:34:12.393

我认为 2.X 平台中没有用于执行此操作的本机 API。您可以`ffmpeg`在应用程序中使用二进制文件。

通过快速搜索，我找到了[for](http://code.google.com/p/javacv/downloads/detail?name=ffmpeg-1.0-android-arm.zip&can=2&q=) [2.2](http://code.google.com/p/javacv/downloads/detail?name=ffmpeg-1.0-android-arm.zip&can=2&q=)[的预编译版本`ffmpeg``Android`](http://code.google.com/p/javacv/downloads/detail?name=ffmpeg-1.0-android-arm.zip&can=2&q=)。

您可以将可执行文件放在应用程序`raw`资源文件夹中并用于`Runtime.getRuntime().exec()`执行它。

要将`AMR`文件转换为`WAV`with`ffmpeg`您可以执行以下操作：

```
ffmpeg -i file.amr file.wav 
```

并将 wav 转换为原始 PCM，您可以执行以下操作：（取自[此处](https://stackoverflow.com/q/11986279/303270)）

```
ffmpeg -i file.wav -f s16le -acodec pcm_s16le file.pcm 
```

# c# - 为什么套接字的另一侧没有关闭套接字？（关闭等待）？

> ID：14812858
> 
> 赞同：0
> 
> 时间：2013-02-11T13:20:58.717
> 
> 标签：c#, c++, c, sockets

我对套接字有疑问。我正在我的电脑和手机之间创建一个套接字来发送消息。当我关闭服务器或客户端时，它会发送一个 FIN 数据包并保持 FIN_WAIT2 状态一分钟。但是，对方卡在了CLOSE_WAIT状态，显然无法关闭socket。我认为套接字应该立即关闭，所以也许我应该以某种方式在客户端中实现一个代码，当服务器想要关闭它时关闭它，反之亦然。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:26:28.030

您需要关闭套接字通道的两端。

如果服务器关闭与客户端的连接，客户端需要关闭客户端上的连接，以便`FIN`传输最后一个数据包（从客户端到服务器）。这将触发[TCP 状态机](http://en.wikipedia.org/wiki/File%3aTcp_state_diagram_fixed.svg)中的最后一个状态转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:13:07.233

CLOSE_WAIT 表示对端已发送 FIN 并且 TCP 正在等待本地应用程序关闭套接字。请参阅 RFC 793。它不会自动发生。

# c# - FtpWebRequest - MSDN 示例的问题

> ID：14812863
> 
> 赞同：0
> 
> 时间：2013-02-11T13:21:15.430
> 
> 标签：c#, .net, ftp

我正在尝试了解 FtpWebRequest 的 MSDN 文档，更具体地说，[如何使用 FTP 和 C# 上传](http://msdn.microsoft.com/en-gb/library/ms229715.aspx)

```
using System;
using System.IO;
using System.Net;
using System.Text;

namespace Examples.System.Net
{
    public class WebRequestGetExample
    {
        public static void Main ()
        {
            // Get the object used to communicate with the server.
            FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://www.contoso.com/test.htm");
            request.Method = WebRequestMethods.Ftp.UploadFile;

            // This example assumes the FTP site uses anonymous logon.
            request.Credentials = new NetworkCredential ("anonymous","janeDoe@contoso.com");

            // Copy the contents of the file to the request stream.
            StreamReader sourceStream = new StreamReader("testfile.txt");
            byte [] fileContents = Encoding.UTF8.GetBytes(sourceStream.ReadToEnd());
            sourceStream.Close();
            request.ContentLength = fileContents.Length;

            Stream requestStream = request.GetRequestStream();
            requestStream.Write(fileContents, 0, fileContents.Length);
            requestStream.Close();

            FtpWebResponse response = (FtpWebResponse)request.GetResponse();

            Console.WriteLine("Upload File Complete, status {0}", response.StatusDescription);

            response.Close();
            }
        }
    }
} 
```

在上面的代码中，它们引用了 2 种文件类型。我是否正确假设 testfile.txt 是“源”文件（在本地计算机上）而 test.htm 是什么 testfile.txt 也将被重命名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T13:23:44.593

是的 - 您正在上传*到，* *从*`test.htm`加载数据。你可以说因为是 URL 的一部分（所以是远程的），而只是通过创建一个文件来加载。 *`testfile.txt``test.htm``testfile.txt``StreamReader`*

 *（值得注意的是，这段代码在各个方面都非常糟糕，顺便说一下 - 特别是在资源处理方面。不要将其视为体现最佳实践......）*

# iphone - 在 URL 中传递用户名和密码以进行身份 验证

> ID：14812865
> 
> 赞同：0
> 
> 时间：2013-02-11T13:21:21.540
> 
> 标签：iphone, ios, url, nsurl

我想在 URL（Web 服务）中传递用户名和密码以进行用户身份验证，这将返回 true 和 false。我这样做如下：

```
NSString *userName = [NSString stringWithFormat:@"parameterUser=%@",txtUserName];
NSString *passWord = [NSString stringWithFormat:@"parameterPass=%@",txtPassword];
NSData *getUserData = [userName dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *getUserLength = [NSString stringWithFormat:@"%d",[getUserData length]];
NSData *getPassData = [passWord dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *getPassLength = [NSString stringWithFormat:@"%d",[getPassData length]];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc]init];
[request setURL:[NSURL URLWithString:@"http://URL/service1.asmx"]];
[request setHTTPMethod:@"GET"]; 
```

现在，我想知道如何在这个 URL 中传递我的用户名和密码来发出请求。有人可以建议或提供一些示例代码吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:26:19.397

尝试这个 ：-

```
NSString *userName = [NSString stringWithFormat:@"parameterUser=%@",txtUserName.text];
    NSString *passWord = [NSString stringWithFormat:@"parameterPass=%@",txtPassword.text];
    NSData *getUserData = [userName dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    NSString *getUserLength = [NSString stringWithFormat:@"%d",[getUserData length]];
    NSData *getPassData = [passWord dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    NSString *getPassLength = [NSString stringWithFormat:@"%d",[getPassData length]];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc]init];
    [request setURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://URL/service1.asmx?%@&%@",userName,passWord]]];
    [request setHTTPMethod:@"GET"]; 
```

希望对你有帮助。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:28:00.693

```
NSString *urlStr = [NSString stringWithFormat:@"http://URL/service1.asmx?%@&%@",userName,passWord];
[request setURL:[NSURL URLWithString:urlStr]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:53:17.127

首先，我不会在 url 中传递用户名和密码。您应该使用 post 来执行此操作。

```
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://URL/service1.asmx?"]];

NSString *userName = [NSString stringWithFormat:@"parameterUser=%@",txtUserName];
NSString *passWord = [NSString stringWithFormat:@"parameterPass=%@",txtPassword];
NSString *postString = [NSString stringWithFormat:@"username=%@&password=%@",userName, passWord];
NSData *postData = [NSData dataWithBytes: [postString UTF8String] length: [postString length]];

//URL Requst Object
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:TIMEOUT];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody: postData]; 
```

这比在 url 中传递敏感数据更安全。

**编辑**

要获得回复，您可以查看此内容。[NSURLConnection](https://stackoverflow.com/questions/9270447/how-to-use-sendasynchronousrequestqueuecompletionhandler)和[AppleDoc NSURLConnection](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)

您可以使用几种不同的方法来处理来自服务器的响应。您可以使用[`NSURLConnectionDelegate`](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLConnectionDelegate)

```
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
[self.connection start]; 
```

连同委托回调：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

    NSLog(@"didReceiveData");
    if (!self.receivedData){
        self.receivedData = [NSMutableData data];
    }
    [self.receivedData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

    NSLog(@"connectionDidFinishLoading");
    NSString *receivedString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"receivedString:%@",receivedString);

} 
```

或者你也可以使用[`NSURLConnection sendAsynchronousRequest`](https://stackoverflow.com/a/9270711/1144161)块

```
NSOperationQueue *queue = [[NSOperationQueue alloc] init];

[NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
{
    NSString *receivedString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
        NSLog(@"receivedString:%@",receivedString);

}]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T14:32:02.840

为了提高安全性，您可以使用 Http [Basic Authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)。[这里](https://stackoverflow.com/a/14799788/2053030)有答案。

# javascript - 在 Phonegap 中读取本地文件

> ID：14812866
> 
> 赞同：5
> 
> 时间：2013-02-11T13:21:32.427
> 
> 标签：javascript, android, cordova, file-io, ripple

我正在尝试读取 Phonegap 中的本地文件以加载应用程序的语言字符串，但我无法使其工作:(

代码非常简单：

```
var pathToLocalFile = "/home/user/android/assets/www/js/";
var langCache = new FileReader();
langCache.onload = function(data){
  col = JSON.parse(data);
  refreshAllStrings();
};
langCache.onerror = function(err){
  debug.error(err);
};
langCache.readAsText(pathToLocalFile+currentLang+'.json'); 
```

此代码在 Ripple 模拟器上不起作用，我将其替换为

```
var pathToLocalFile = "file:///android_asset/www/js/"; 
```

在android的情况下，结果相同：

```
Uncaught TypeError: Object #<Console> has no method 'warning' cordova-2.4.0.js:2616
initRead cordova-2.4.0.js:2616
FileReader.readAsText cordova-2.4.0.js:2660    
loadLanguage 
```

在 Ripple 模拟器中，我启动了 Chrome，`google-chrome -–allow-file-access-from-files`Android 配置和清单具有插件集的所有权限。

当然我错过了一些东西，但知道这可能是什么吗？

问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T17:51:37.653

如果文件位于应用程序的 www 文件夹下，则无需添加“/home/..”或“file:///”。即使它捆绑在应用程序中，您也应该能够使用“AJAX”获取加载内容。

```
$.get('js/filename.ext'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:16:35.663

您看到的错误实际上是 cordova-2.4.0.js 调用不存在的“警告”方法的结果。它应该是 console.warn。它试图警告您，现在不推荐使用字符串作为 readAsText 方法，您应该改用 File 引用。

应该发生的是“不推荐使用带有 FileReader.readAs 函数的字符串参数”的 console.warn。

# java - Android - 动画 VideoView 或 MediaController

> ID：14812868
> 
> 赞同：3
> 
> 时间：2013-02-11T13:21:51.647
> 
> 标签：java, android, android-animation, android-view, android-video-player

我想为 a 的显示和隐藏设置动画`VideoView`。

我`View`的包裹在一个`MediaController`.

我的代码：

```
VideoView videoView = (VideoView) findViewById(R.id.myvideoview);
mediaController = new MediaController(this);
mediaController.setAnchorView(videoView);
videoView.setMediaController(mediaController);
videoView.setOnCompletionListener(myVideoViewCompletionListener); 
```

我试图用这个动画：

```
Animation anim = AnimationUtils.loadAnimation(context, R.anim.my_anim);
videoview.startAnimation(anim); 
```

我还尝试制作动画，`MediaController`但到目前为止没有运气。

我在网上发现只是没有或没有完全回答的帖子。

有人知道我可能做错了什么吗？

谢谢。

罗恩

# java - 如何更改 JSlider 的默认值/起始值

> ID：14812871
> 
> 赞同：1
> 
> 时间：2013-02-11T13:21:59.720
> 
> 标签：java, swing, jslider

我想知道如何更改我正在使用的 JSlider 的起始值。

我的代码如下所示：

```
public ScaleController() {
// SLIDER 1:
// --------------------------------------------------------------------
    setOrientation(SwingConstants.VERTICAL);
    addChangeListener(this);
    setMajorTickSpacing(10);
    setPaintTicks(true);
    setMaximum(50);
    setMinimum(-50);

    Hashtable<Integer, JLabel> labelTable = new Hashtable<Integer, JLabel>();

    labelTable.put(new Integer(50), new JLabel("Zoom +5"));
    labelTable.put(new Integer(0), new JLabel("Zoom 0"));
    labelTable.put(new Integer(-50), new JLabel("Zoom -5"));
    setLabelTable(labelTable);

    setPaintLabels(true);

@Override
public void stateChanged(ChangeEvent e) {
  Controller.setZoom(getValue());
} 
```

我希望默认值为 0，所以它从我的滑块中间开始，但我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T13:29:59.153

`setValue(0)`可以在你的情况下检查[API 这里](http://docs.oracle.com/javase/7/docs/api/javax/swing/JSlider.html#setValue%28int%29)

# apache-flex - 填充 dataprovider Spark List 组件 Flex 4.6

> ID：14812872
> 
> 赞同：0
> 
> 时间：2013-02-11T13:22:00.290
> 
> 标签：apache-flex, flex4, flexbuilder

我有一个与将数据填充到列表中有关的问题。事实是，一旦列表被填充，当我想用​​新条目更新内容并且我正在滚动列表时，更新完成后突然列表滚动到顶部。

我不知道如何避免这种行为，只需在没有 List 的情况下更新 dataProvider 即可将我带到顶部。

谢谢。

# android - 在我的应用程序中自定义“立即发言”对话框

> ID：14812882
> 
> 赞同：1
> 
> 时间：2013-02-11T13:22:37.087
> 
> 标签：android, customization, android-theme

我已经构建了一个与语音到文本和文本到语音转换有关的消息传递应用程序。所以默认情况下它使用android的现在说话对话框。有什么方法可以自定义“现在说话”对话框或更改其主题？

# cocos2d-iphone - 如何在box2d中将身体固定在y角为零

> ID：14812888
> 
> 赞同：1
> 
> 时间：2013-02-11T13:22:58.980
> 
> 标签：cocos2d-iphone, box2d

我正在做一场比赛。在那个动人的男孩精灵中创建了身体。男孩的身体在移动正面或背面时会掉下来。

如何固定身体y轴0？

```
 CCSprite *boySprite=[CCSprite spriteWithFile:@"object_boy.png"];
    boySprite.position=ccp(100,50);

    b2BodyDef boyBodyDef;
    boyBodyDef.type = b2_dynamicBody;
    boyBodyDef.linearDamping = 1;
    boyBodyDef.angularDamping = 1;
    boyBodyDef.position.Set(25.0f/PTM_RATIO,(150)/PTM_RATIO);
    boyBodyDef.angle=0;
    boyBodyDef.userData = _boy;
    boyBody = world->CreateBody(&boyBodyDef);

    b2PolygonShape boyBox;
    b2FixtureDef boyBoxDef;
    boyBoxDef.shape = &boyBox;
    boyBoxDef.density = 0.5F;
    boyBox.SetAsBox(11.0f/PTM_RATIO, 30.0f/PTM_RATIO);
    boyFixture = boyBody->CreateFixture(&boyBoxDef);

    [self addChild:boySprite z:1]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:38:29.957

将 b2BodyDef 中的 fixedRotation 设置为 true。

```
 boyBodyDef.fixedRotation = true; 
```

# asp.net-mvc - MVC 3重定向不起作用

> ID：14812889
> 
> 赞同：0
> 
> 时间：2013-02-11T13:23:06.463
> 
> 标签：asp.net-mvc, asp.net-mvc-3, redirecttoaction

我有一个与动作重定向有关的小问题。我想阻止用户使用 BaseController 类中的 OnActionExecuting 的覆盖来访问有关站点中特定区域的信息，该类是我所有控制器的基类。方法体：

```
protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (Request.IsAuthenticated && (User as Eagle.Security.EaglePrincipal != null) && Session != null && Session["LastKnownGoodArea"] != null && filterContext.ActionDescriptor.ActionName != "InvalidPermission")
        {
            var currentArea = Principal.CurrentCenter.CODEFORM_CSE;
            if (currentArea != Session["LastKnownGoodArea"].ToString())
                RedirectToActionPermanent("InvalidPermission", "Account", new { target = 0, redirectURL = null as string });
            else
                base.OnActionExecuting(filterContext);
        }

    } 
```

但是，这不会重定向到指定的操作。我究竟做错了什么？如果有的话，你们会建议什么其他方法？

谢谢，西尔维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:58:04.173

**戴夫的评论是对的！此外，这应该是您正在寻找的语法：-**

```
 protected override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            if (Request.IsAuthenticated && (User as Eagle.Security.EaglePrincipal != null) && Session != null && Session["LastKnownGoodArea"] != null && filterContext.ActionDescriptor.ActionName != "InvalidPermission")
            {
                var currentArea = Principal.CurrentCenter.CODEFORM_CSE;
                if (currentArea != Session["LastKnownGoodArea"].ToString())
                {
                filterContext.Result = new RedirectToRouteResult(new
                    RouteValueDictionary(new
                    {
                        controller = "InvalidPermission",
                        action = "Account",
                        target = 0,                                         
                    }));
                filterContext.Result.ExecuteResult(filterContext);
                }       
                else
                {
                    base.OnActionExecuting(filterContext);
                }
            }

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:21:37.090

> 我想阻止用户使用 BaseController 类中的 OnActionExecuting 的覆盖来访问有关站点中特定区域的信息，该类是我所有控制器的基类。

您为什么选择为此使用 OnActionExecuting？您正在对每个请求执行此 if 语句，我建议将该`Authorize`属性用于特定操作：

```
public class CustomAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var user = User as Eagle.Security.EaglePrincipal;

        if(httpContext.User.Identity.IsAuthenticated && user != null)
        {
            var currentArea = Principal.CurrentCenter.CODEFORM_CSE;
            var lastKnownArea = Session["LastKnownGoodArea"];

            if (lastKnowArea == null)
               return false;

            return currentArea.Equals(lastKnownArea.ToString());
        }

        return base.AuthorizeCore(httpContext);            
    }
} 
```

在您的`web.config`中，您可以配置重定向，例如：

```
 <customErrors mode="RemoteOnly">
  <error statusCode="403" redirect="/InvalidPermission/Account" />
 </customErrors> 
```

如果您想控制 UnAuthorized 请求，您始终可以选择覆盖该`HandleUnauthorizedRequest`方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T14:22:45.363

这是最终的解决方案：

```
var currentArea = Principal.CurrentCenter.CODEFORM_CSE;
            if (currentArea != Session["LastKnownGoodArea"].ToString())
            {
                filterContext.Result = new RedirectToRouteResult(new
                    RouteValueDictionary(new
                    {
                        controller = "Account",
                        action = "InvalidPermission",
                        area = "",
                        target = 0,
                        redirectURL = ""
                    }));
            }
            else
            {
                base.OnActionExecuting(filterContext);
            } 
```

谢谢两位的意见，帮了大忙！干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T13:34:52.743

您无法从过滤器重定向到操作，因为它尚未创建操作结果。您只能创建一条新路线。我不完全确定您需要的语法。我把这个放在一起作为一个例子。

```
protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (Request.IsAuthenticated && (User as Eagle.Security.EaglePrincipal != null) && Session != null && Session["LastKnownGoodArea"] != null && filterContext.ActionDescriptor.ActionName != "InvalidPermission")
        {
            var currentArea = Principal.CurrentCenter.CODEFORM_CSE;
            if (currentArea != Session["LastKnownGoodArea"].ToString())
            filterContext.Result = new RedirectToRouteResult(
    new System.Web.Routing.RouteValueDictionary {
        {"controller", "InvalidPermission"}, {"action", "Account"}, {target =0}, {redirectURL = null as string }

            else
                base.OnActionExecuting(filterContext);
        }

    } 
```

# iphone - 无法将 nsurl 转换为 base 64

> ID：14812890
> 
> 赞同：0
> 
> 时间：2013-02-11T13:23:09.323
> 
> 标签：iphone, base64

我正在这样做。但我不知道哪里错了。

```
NSString *strUrl = [NSString stringWithFormat:@"https://play.google.com/stor/apps/details?id=com.ShiftSharerfree_new&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5TaGlmdFNoYXJlcmZyZWVfbmV3Il"];

NSString *originalString = [NSString stringWithFormat:@"%@", strUrl];
NSData *data = [NSData dataFromBase64String:originalString];
NSString *data = [base64 originalString];
NSLog(@"data:%@", data);//[data base64EncodedString]); 
```

请在上面指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:08:48.380

我注意到的第一件事是 NSData 和 NSString 具有相同的名称。这可能是错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:48:20.677

也许您需要一个 base64 转换库，如此处所述：

[在 UIImage 和 Base64 字符串之间转换](https://stackoverflow.com/questions/11251340/convert-image-to-base64-string-in-ios)

我在使用 [base64 encode...] 调用将图像转换为 base64 的代码中遇到了类似的错误。

# php - 如何深度链接到 Facebook 应用程序（不是页面选项卡）

> ID：14812891
> 
> 赞同：1
> 
> 时间：2013-02-11T13:23:12.700
> 
> 标签：php, jquery, facebook

我需要链接到我的 Facebook 应用程序中的特定页面。**该应用程序不在页面选项卡中，并且由于项目限制而不能合二为一。**

这是网址格式： [https ://apps.facebook.com/myappname](https://apps.facebook.com/myappname)

我需要在最后传递一个参数（如 /next.html 或 ?page=next），以便我可以直接从应用程序外部（通过电子邮件）链接到特定页面。

我该如何设置？我的项目使用 PHP 和 jQuery。如果可能的话，我希望能够在 Javascript 中严格执行此操作。

我发现了大量关于如何深度链接页面选项卡或移动应用程序的信息，但没有找到常规应用程序。我发现消息说这是可能的，但没有关于如何在网上或 Facebook 上的任何地方实际做到这一点。

谢谢你的帮助。

**编辑：**

好的，我让它在 PHP 中工作。对于其他有此问题的人，这就是我所做的。

添加一个“？” 在您的 FB 应用程序中“站点 URL”的最后，然后创建一个与此类似的重定向文件作为您的应用程序登录页面（只需使用绝对路径而不是像我在下面所做的相对路径）：

```
<?php
$query = $_SERVER['QUERY_STRING'];
$params = explode("/", $query);

if (in_array("gallery", $params)) {
    header("Location: /gallery.html");
    exit;
}
else {
    header("Location: /index.html");
    exit;
}
?> 
```

这个答案帮助我解决了这个问题： [$_GET on facebook iframe app](https://stackoverflow.com/questions/7414853/get-on-facebook-iframe-app/7734877#7734877)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:24:02.290

我可能在这里遗漏了一些东西，但你为什么不直接链接到`http://apps.facebook.com/yourapp/something.php`- 这应该会自动加载你的画布 URL，`something.php`并附加到路径

显然，如果您的画布 URL 指向特定文件而不是目录，这将不起作用，但是很多应用程序都成功地做到了这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:27:57.733

你会得到一个特殊的参数`app_data`，你可以随意使用它。我过去曾用它来编码我的内部应用程序的完整查询字符串。例如，`&app_data=My/Custom/Page`

在这个 SO 问题中可以找到更多信息：[Retrieve Parameter From Page Tab URL](https://stackoverflow.com/questions/13919541/retrieve-parameter-from-page-tab-url/13920132#13920132)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T17:46:19.293

当您使用 ? 您所做的只是发出一个 $_GET 请求，因此您需要的所有信息都将存在于 $_GET 数组中。

不是查询 $_SERVER 数组，而是查询 $_GET 数组。

所以如果你有：

[http://myurl.com?info=foobar](http://myurl.com?info=foobar)

您可以使用以下方法简单地访问该信息：

```
$info = $_GET['info']; 
```

不过，最好先检查是否存在：

```
if (isset($_GET['info']))
{
$info =$_GET['info'];
}
else
{
$info="default";
} 
```

顺便说一句，如果您使用 & 字符，您可以有多个参数：

```
http://myurl.com?info=foo&moreinfo=bar 
```

# javascript - 在 python 中使用 json.loads() 的问题

> ID：14812892
> 
> 赞同：1
> 
> 时间：2013-02-11T13:23:14.647
> 
> 标签：javascript, python, json, python-2.7, beautifulsoup

我正在尝试从嵌套的 java 脚本结构中获取数据。我想为此使用 json.loads() 。但是，我收到一条错误消息`"No JSON object could be decoded"`

以下是我尝试过的代码和 java 脚本结构： **代码**

```
page_us = urllib2.urlopen('http://www.verizonwireless.com/smartphones-2.shtml')

soup_us = BeautifulSoup(page_us)
scripts_us = soup_us.findAll('script')

script=[]
for s in scripts_us:
    if s.string and "$j('#module_1_Tile" in s.string:
        script.append(s.text.split('data')[1].replace("\n","").replace("(","").replace(")","").replace(";","").replace("\t","")) 
```

**数据结构**

```
script[1] = u'{"phones":{"id5986":{"id":"5986","rating":"stars_4","colorName":"White","colorCode":"#FFFFFF","capacity":"16 GB","price":"$149.99","fullPrice":"$599.99","addToCartQty":"0","image":"http://s7.vzw.com/is/image/VerizonWireless/Motorola%5Fdroid%5Frazr%5Fhd%5Fwhite?$device%2Dmed$","ATCST":"submitThisPhone","MAST":"false","CIL":"0","IRURL":"https://preorder.verizonwireless.com/iconic/","BAGX":"false","priceRange":"150","rating":"4","OOS":"","freeShipping":"freeOvernightShippingHTML","bagxGetPhone":"","badges":{"lteBadge","vzwExclusiveBadge","globalReadyBadge"},"vPrice":"$221.96","vFullPrice":"$671.96","vBundleName":"DROID RAZR HD by Motorola in White Bluetooth&reg Pack","vBundleImage":"http://s7.vzw.com/is/image/VerizonWireless/moto%5Fdroid%5Frazr%5Fhd%5Fwht%5Fbluetooth%5Fvirt%5Fbndl?$device%2Dmed$","vBundleDescription":"<ul><li>Bluetooth&reg Headset</li><li>Clear Hard Cover</li><li>Vehicle Charger</li></ul>"},"id5985":{"id":"5985","rating":"stars_4_5","colorName":"Black","colorCode":"#000000","capacity":"16 GB","price":"$149.99","fullPrice":"$599.99","addToCartQty":"0","image":"http://s7.vzw.com/is/image/VerizonWireless/Motorola%5Fdroid%5Frazr%5Fhd%5Fblack?$device%2Dmed$","ATCST":"submitThisPhone","MAST":"false","CIL":"0","IRURL":"https://preorder.verizonwireless.com/iconic/","BAGX":"false","priceRange":"150","rating":"4_5","OOS":"","freeShipping":"freeOvernightShippingHTML","bagxGetPhone":"","badges":{"lteBadge","vzwExclusiveBadge","globalReadyBadge"},"vPrice":"$221.96","vFullPrice":"$671.96","vBundleName":"DROID RAZR HD by Motorola Bluetooth&reg Pack","vBundleImage":"http://s7.vzw.com/is/image/VerizonWireless/moto%5Fdroid%5Frazr%5Fhd%5Fblk%5Fbluetooth%5Fvirt%5Fbndl?$device%2Dmed$","vBundleDescription":"<ul><li>Bluetooth&reg Headset</li><li>Silicone Cover</li><li>Vehicle Charger</li></ul>"}},"options":{"colorName":"Black","colorCode":"#000000","capacity":"16 GB"},"info":{"brand":"486","os":"10351","features":{502,569,501,568,247,318,85,503,497,431,458,11,49,150,44,17,141,145,165,20,58,15,24,172,186,184,159,187,185,199,156,249,157,189,142,168,211,13,188,239,14,167,321,41,25,357,443,441,442,444,459,418,416,12,413,5,61,7,446,504,362,573,202,522,"hasVB"},"priceRange":"150","phoneId":"id5985","ATCST":"submitThisPhone","MAST":"false","CIL":"0","IRURL":"https://preorder.verizonwireless.com/iconic/","bagxGetPhone":"","BAGX":"false"}}' 
```

json.loads 适用于`script[0]`，但在`script[1]`. 请让我知道我在这里错过了什么。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T13:34:44.110

本节有花括号而不是方括号 -

```
{"lteBadge","vzwExclusiveBadge","globalReadyBadge"} 
```

应该 -

```
["lteBadge","vzwExclusiveBadge","globalReadyBadge"] 
```

您可以使用 Python 来帮助您识别这些错误 -

```
>>> from ast import literal_eval
>>> # Break it into lines to check location of error
>>> s = data_structure.replace(',', ',\n')
>>> literal_eval(s) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T13:41:23.707

试试这个：

```
script[1] = eval(u'{"phones":{"id5986":{"id":"5986","rating":"stars_4","colorName":"White","colorCode":"#FFFFFF","capacity":"16 GB","price":"$149.99","fullPrice":"$599.99","addToCartQty":"0","image":"http://s7.vzw.com/is/image/VerizonWireless/Motorola%5Fdroid%5Frazr%5Fhd%5Fwhite?$device%2Dmed$","ATCST":"submitThisPhone","MAST":"false","CIL":"0","IRURL":"https://preorder.verizonwireless.com/iconic/","BAGX":"false","priceRange":"150","rating":"4","OOS":"","freeShipping":"freeOvernightShippingHTML","bagxGetPhone":"","badges":{"lteBadge","vzwExclusiveBadge","globalReadyBadge"},"vPrice":"$221.96","vFullPrice":"$671.96","vBundleName":"DROID RAZR HD by Motorola in White Bluetooth&reg Pack","vBundleImage":"http://s7.vzw.com/is/image/VerizonWireless/moto%5Fdroid%5Frazr%5Fhd%5Fwht%5Fbluetooth%5Fvirt%5Fbndl?$device%2Dmed$","vBundleDescription":"<ul><li>Bluetooth&reg Headset</li><li>Clear Hard Cover</li><li>Vehicle Charger</li></ul>"},"id5985":{"id":"5985","rating":"stars_4_5","colorName":"Black","colorCode":"#000000","capacity":"16 GB","price":"$149.99","fullPrice":"$599.99","addToCartQty":"0","image":"http://s7.vzw.com/is/image/VerizonWireless/Motorola%5Fdroid%5Frazr%5Fhd%5Fblack?$device%2Dmed$","ATCST":"submitThisPhone","MAST":"false","CIL":"0","IRURL":"https://preorder.verizonwireless.com/iconic/","BAGX":"false","priceRange":"150","rating":"4_5","OOS":"","freeShipping":"freeOvernightShippingHTML","bagxGetPhone":"","badges":{"lteBadge","vzwExclusiveBadge","globalReadyBadge"},"vPrice":"$221.96","vFullPrice":"$671.96","vBundleName":"DROID RAZR HD by Motorola Bluetooth&reg Pack","vBundleImage":"http://s7.vzw.com/is/image/VerizonWireless/moto%5Fdroid%5Frazr%5Fhd%5Fblk%5Fbluetooth%5Fvirt%5Fbndl?$device%2Dmed$","vBundleDescription":"<ul><li>Bluetooth&reg Headset</li><li>Silicone Cover</li><li>Vehicle Charger</li></ul>"}},"options":{"colorName":"Black","colorCode":"#000000","capacity":"16 GB"},"info":{"brand":"486","os":"10351","features":{502,569,501,568,247,318,85,503,497,431,458,11,49,150,44,17,141,145,165,20,58,15,24,172,186,184,159,187,185,199,156,249,157,189,142,168,211,13,188,239,14,167,321,41,25,357,443,441,442,444,459,418,416,12,413,5,61,7,446,504,362,573,202,522,"hasVB"},"priceRange":"150","phoneId":"id5985","ATCST":"submitThisPhone","MAST":"false","CIL":"0","IRURL":"https://preorder.verizonwireless.com/iconic/","bagxGetPhone":"","BAGX":"false"}}')
#this will eval it to dict
# so you can use it, as script[1].get() 
```

# node.js - 在 Node.js 中声明变量的最佳方式

> ID：14812895
> 
> 赞同：1
> 
> 时间：2013-02-11T13:23:23.663
> 
> 标签：node.js, coding-style, standards

每个`var`语句声明一个变量是否很好，它使代码更容易根据修改需要重新排序程序中的行。

有人可以弄清楚，在代码执行方面，Node.js 中的以下声明风格有什么区别吗？

```
//Style 1
var keys = ['foo', 'bar']; var values = [23, 42];

//Style 2
var keys = ['foo', 'bar'], values = [23, 42]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T13:32:24.190

JavaScript 中可以有多个`var`语句；这称为*吊装*；但是，因为您可能会遇到范围问题，所以最好在任何函数中使用**单个**声明。

这种风格很常见

```
var keys   = ['foo', 'bar'],
    values = [23, 42]; 
```

事实上，JavaScript 允许您将声明链接在一起的原因是因为它们应该一起发生。

为了说明范围界定问题：

```
f = "check?";

var hello = function () {
  console.log(f);          // undefined
  var f = "nope!";
  console.log(f);          // nope!
};

var hello2 = function () {
  console.log(f);          // check?
  var f2 = "nope!";        // not reusing `f` this time
  console.log(f2);         // nope!
};

hello();
hello2(); 
```

乍一看，你会认为第一个输出是`check?`，但因为你在`var f`函数体内部使用，JavaScript 正在为它创建一个本地范围。

为了避免遇到这样的问题，我只使用一个`var`声明:)

# php - 如何在一次插入执行中在mysql中插入数组或多值

> ID：14812897
> 
> 赞同：-1
> 
> 时间：2013-02-11T13:23:24.920
> 
> 标签：php

`$a`是一个数组。

```
if(!$mysqli->query("INSERT INTO test_mysql (id) VALUES (".implode("),(",$a).")"))
{
    echo "Table creation failed: (" . $mysqli->errno . ") " . $mysqli->error;
}
else
{
    echo 'thank you';
} 
```

你能给我任何击球手的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:32:27.463

打印 $a 内容的示例怎么样？“$a 是一个数组”是不够的。打印它并查看您的查询的样子。例如：

```
$query = "INSERT INTO test_mysql (id) VALUES (".implode("),(",$a).")";
print $query; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-11T13:30:38.493

尝试这个

```
$mysqli->query('INSERT INTO test_mysql (id) VALUES '.implode(',', $a)); 
```

# php - 单独打印 JSON 数据

> ID：14812898
> 
> 赞同：0
> 
> 时间：2013-02-11T13:23:24.837
> 
> 标签：php, ajax, json, echo

我有一个 AJAX 请求，它本质上是查询数据库，然后将数据发布回 JS，但是我无法打印单个数据位。

我的代码如下：

```
$.ajax({
            type: 'POST',
            url: '_process/offerrespres.php',
            dataType: 'json',
            data: {
                msgid: msgid,
                usrid: usrid
            },
            success: function(){
                console.log(JSON.parse(data.pro_name));
                console.log(data.accept_decline);
            }
        }); 
```

PHP：

```
<?php
include_once 'connect.php';
if ($_POST) {
$msgid = mysql_escape_string($_POST['msgid']);
$usrid = mysql_escape_string($_POST['usrid']);  
$getmsgq = mysql_query("SELECT * FROM booking_requests WHERE receiver_id = '$usrid' AND msg_id = '$msgid'");
$getmsg_info = mysql_fetch_array($getmsgq); 
$data['success'] = true;
$data['date_sent'] = $getmsg_info['date_sent'];
$data['pro_name'] = $getmsg_info['pro_name'];
$data['accept_decline'] = $getmsg_info['accept_decline'];
}
header("Content-Type: application/json", true);
echo json_encode($data);
mysql_close();
?> 
```

如您所见，我已经尝试过：

```
console.log(JSON.parse(data.pro_name));
console.log(data.accept_decline); 
```

控制台中的错误显示“未定义数据”。PHP文件的输出是正确的，应该是正确的，我只是无法打印一条数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:25:45.690

您的回调函数不接受返回数据作为参数

读取的行`success: function(){`应该是`success: function(data){`

此外，`true`调用`header("Content-Type: application/json", true);`. 此函数的默认操作是替换标题，因此`true`已经隐含。仅当您不想替换以前的`Content-Type`. 对您的代码没有影响，只是一个提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:29:57.890

您没有在成功函数中指定数据变量。它应该是：

```
success: function(data){
   console.log(JSON.parse(data.pro_name));
   console.log(data.accept_decline);
} 
```

# wordpress - Wordpress API 仅适用于 VPN？

> ID：14812900
> 
> 赞同：0
> 
> 时间：2013-02-11T13:23:37.670
> 
> 标签：wordpress, api

我现在正在我的本地主机上做一个项目，最近我试图让它在线。我的项目在我的本地主机上完美运行，我可以毫无问题地将新文章发布到 wordpress 博客。

问题是，在将我的项目上传到在线网络服务器（Hostgators Baby Plan）后，我尝试向我的一个 wordpress 博客添加新帖子，但出现以下错误：

```
faultCode 500 faultString You are not allowed to do that. 
```

问题是，过去几天我到处搜索以解决这个问题，但没有运气。

你们认为这个问题是因为我使用的是网络服务器而不是 VPS 造成的吗？如果您有任何其他解决方案，我会很高兴听到他们的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:31:18.323

它可能与文件权限或类似的东西有关。无需使用 VPS。我在共享服务器上管理我的网站，并且我也在免费托管服务上测试了 WordPress。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:39:10.983

这可能是由于文件结构或 mySQL DB 用户或类似的权限不正确。看看[这篇关于文件权限的 WP codex 的文章](http://codex.wordpress.org/Changing_File_Permissions)。

像 Hostgater 这样的大型服务通常为 Wordpress 等常用软件提供“自动安装”功能（通过 Softaculous 或类似的东西）。我不知道您是如何将您的网站从本地版本迁移到服务器的，但可能值得通过 Hostgator 安装一个新的 Wordpress 实例，然后简单地加载 wp-content 文件夹和您的开发数据库。

# angularjs - 使用 ng-repeat 创建多级列表

> ID：14812909
> 
> 赞同：6
> 
> 时间：2013-02-11T13:24:23.843
> 
> 标签：angularjs, ng-repeat

我正在尝试从包含嵌套数据的对象中创建一个多级列表：

```
function linksRarrange($scope) {
    $scope.links = [
        {
            text: 'Menu Item 1',
            url: '#',
        },{
            text: 'Menu Item 2',
            url: '#',
            submenu: [
                {
                    text: 'Sub-menu Item 3',
                    url: '#',
                },{
                    text: 'Sub-menu Item 4',
                    url: '#',
                    submenu: [
                        {
                            text: 'Sub-sub-menu Item 5',
                            url: '#',
                        },{
                            text: 'Sub-sub-menu Item 6',
                            url: '#',
                        }
                    ]
                }
            ]
        },{
            text: 'Menu Item 3',
            url: '#',
        }
    ];
} 
```

为什么这仅输出前 2 级菜单而忽略第三级？

```
<ul>
    <li ng-repeat="link in links"><a href="{{link.url}}">{{link.text}}</a>
        <ul>
            <li ng-repeat='sublink in link.submenu'><a href="{{sublink.url}}">{{sublink.text}}</a></li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T14:34:19.307

您只看到两个级别，因为您只有两个级别的循环：ng-repeat 只是重复给出的内容，而不是递归地调用自己。

您的第一个循环仅在第一级上重复，而您的第二个循环仅在第二级上重复。您的代码中没有任何内容在寻找第 3 级或更深的级别。

您可以递归调用相同的 ng-include，这似乎有效。我已经在 plunker 中演示了这个：http://plnkr.co/edit/NBDgqKOy2qVMQeykQqTY?p= [preview](http://plnkr.co/edit/NBDgqKOy2qVMQeykQqTY?p=preview)

但是使用 ng-init 复制值的代码非常糟糕。它可以工作，但最好将其写为指令。

# android - Android - WebView findall 在 4.0.3 上无法正常工作

> ID：14812917
> 
> 赞同：2
> 
> 时间：2013-02-11T13:24:53.360
> 
> 标签：android

我有一个网络视图。现在，当我使用`WebView.findAll()`方法在 webview 中搜索文本时，它不会突出显示匹配的单词。

它在 Android 2.2、3.2 中运行良好，但在 4.0.3 中无法运行。

你有什么想法我可以实现这个吗？我真的很感谢你的帮助。

```
webView.findAll(findString);  
try
{  
    Method m = WebView.class.getMethod("setFindIsUp", Boolean.TYPE);  
    m.setAccessible(true);
    m.invoke(webView, true);  
}
catch(Exception ignored){} 
```

# spring - 几乎相同的 Web 应用在提供静态内容时表现不同

> ID：14812919
> 
> 赞同：0
> 
> 时间：2013-02-11T13:24:59.013
> 
> 标签：spring, jakarta-ee, tomcat, static-content

我在使用 Spring-Hibernate 设置从我的 web 应用程序提供静态内容时遇到了一个“奇怪”的问题。

我有一个（小）webapp，它使用 DispatcherServlet 来提供任何这样的 url： /coverpage/* 。默认 servlet 映射设置为 /static/*

例子：

```
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/static/*</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>2</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/coverpage/*</url-pattern>
</servlet-mapping> 
```

在我的 jsp 中，静态内容（images/js/css）是这样写的：

```
<spring:url value="/static/styles/js/jquery-1.4.2.min.js" /> 
```

我在 webapp 中有 4 个页面：index.jsp、new.jsp、error.jsp 和 includes.jsp（这不是实际页面，duh）和 /process 的映射，它在输入时返回 PDF 内容或验证错误不正确的数据。

此设置似乎在我的 web 应用程序中运行良好。

现在是奇怪的部分：我已经在另一个 Tomcat 实例上部署了相同的 web 应用程序并更改了端口，以便它们可以同时运行，现在对静态内容的引用只工作了一半时间。只有 /new（又名 new.jsp）的映射才能找到静态内容。其余的无法加载它。

两个实例之间的差异

*   Tomcat 版本（原始运行在 6.0.29，第二个实例运行在 6.0.33）

*   Tomcat 端口

*   数据库连接（原始转到 PROD db，第二个实例转到 TEST db - 两个数据库相同）

这是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4" 
xmlns="http://java.sun.com/xml/ns/j2ee" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

<display-name>Coverpage creator</display-name>

<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list>

<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/static/*</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>2</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/coverpage/*</url-pattern>
</servlet-mapping>

<filter>
    <filter-name>SetUTF8EncodingFilter</filter-name>
    <filter-class>be.coverpagecreator.filter.SetUTF8EncodingFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>SetUTF8EncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<security-constraint>
    <web-resource-collection>
        <web-resource-name>Coverpage creator</web-resource-name>
        <url-pattern>/coverpage/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>cpcreator</role-name>
    </auth-constraint>
</security-constraint>

<login-config>
    <auth-method>BASIC</auth-method>
    <realm-name>Coverpage creator</realm-name>
</login-config>

<security-role>
    <description>The role that is required to create coverpages</description>
    <role-name>cpcreator</role-name>
</security-role>

</web-app> 
```

和 dispatcher-servlet 配置

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:mvc="http://www.springframework.org/schema/mvc" 
xmlns:context="http://www.springframework.org/schema/context"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<import resource="application-context.xml"/>

<mvc:annotation-driven />

<mvc:interceptors>
    <bean name="openSessionInViewInterceptor" class="org.springframework.orm.hibernate3.support.OpenSessionInViewInterceptor">
        <property name="sessionFactory" ref="sessionFactory" />
        <property name="singleSession" value="false" />
    </bean>
</mvc:interceptors>

<context:component-scan base-package="be.coverpagecreator" />

<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
  <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
  <property name="prefix" value="/WEB-INF/jsp/"/>
  <property name="suffix" value=".jsp"/>
</bean>

<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="defaultEncoding" value="UTF-8" />
    <property name="useCodeAsDefaultMessage" value="false" />   
    <property name="basenames">
        <list>
            <value>/WEB-INF/messages/global</value>
            <value>/WEB-INF/messages/messages</value>
        </list>
    </property>
</bean>

<bean id="localeResolver" class="org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver" />
</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:42:02.657

问题出在Tomcat版本上。我尝试在新下载的 6.0.29 Tomcat 而不是 6.0.33 上运行第二个实例，它似乎工作正常。我将通过 Tomcat 更改日志尝试找出导致此问题的原因......如果我找到任何东西，我会在这里报告。

# pdf - PhantomJS 中的字体提示行为？

> ID：14812920
> 
> 赞同：2
> 
> 时间：2013-02-11T13:25:07.570
> 
> 标签：pdf, browser, fonts, phantomjs

我需要将`divs`HTML 文档中包含的文本呈现为 PDF。我正在考虑使用 PhantomJS，但有一件事非常重要。不同的浏览器和平台以不同的方式呈现文本。因此，如果我有以下代码：

```
<div style='width:150px; height:80px; position:absolute; top:130px; left:78px'>
<p> Some text, yayy! :) </p>
</div> 
```

它可以像这样在一个浏览器上呈现：

```
 Some text, yayy!:) 
```

但在另一个这样的：

```
 Some text, 
                              yayy!:) 
```

发生的事情是（我猜是因为字体提示），第一个示例中的文本最终具有适合包含的特定宽度`div`，但是由于第二个浏览器上的字体呈现，文本最终只占用了容器中放不下的更多空间，不得不绕到下一行。我无法承受这种输出结果的不可靠性。如果 HTML 在一行上，我也需要 PDF 在同一行上。

我实际上在这里问了一个相关问题：[Make fonts on Windows render like Mac/Linux: disabling font-hinting and/or deal with anti-alias on client side](https://stackoverflow.com/questions/14670724/make-fonts-on-windows-render-like-mac-linux-disabling-font-hinting-and-or-deal) with no luck,但它基本上是在尝试解决同样的问题.

PhantomJS 可以对此做些什么吗？或者 PhantomJS 至少可以以某种方式计算文本的*真实宽度*，而不需要字体提示和任何其他涉及的东西？或者，如果包含提示，可以计算它可能呈现的内容？或者任何东西，只要它们在 HTML 上看起来像在 PDF 上出现。（鉴于我正在处理的应用程序，我没有自由更改包含的 CSS 样式`DIV`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-01T13:02:26.520

字体提示几乎肯定不是改变文本宽度的原因。字体提示包括对轮廓字体的边缘进行小的调整以对齐屏幕像素；调整是在每个字符内进行的，不应改变该字符的整体宽度。

由于许可问题，跨平台的字体*版本略有不同。*出于法律原因，macOS 和 GNU/Linux 通常不能完全复制 Microsoft 的字体，因此最接近的是一种看起来基本相同（并且名称相似）但实际上并不相同的字体字体。因此，跨平台的一些宽度变化是可以预料的，除非您可以提供自己的字体文件以及页面（网络字体）。

PhantomJS 像任何其他浏览器一样使用系统的字体。因此，使用 PhantomJS 不会自动为您提供一些与系统字体不同的“跨平台”字体集。

如果您需要 100% 的可重复性，那么我建议创建一个安装了标准字体集的虚拟机（或 Docker 映像），并在任何地方使用它。只是不要忘记在需要时对其应用安全补丁。

# c++ - DirectXMath 向量运算精度

> ID：14812925
> 
> 赞同：1
> 
> 时间：2013-02-11T13:25:18.060
> 
> 标签：c++, xna, directx, direct3d, directx-11

我有 XMVector3AngleBetweenVectors 函数的奇怪结果。考虑这段代码：

```
float angle = XMConvertToDegrees(XMVectorGetX(
        XMVector3AngleBetweenVectors(GMathFV(XMFLOAT3(0.0f, 100.0f, 0.0f)), 
        GMathFV(XMFLOAT3(0.0f, 200.0f, 0.0f))))); 
```

它正在寻找两个 3D 矢量之间的角度，由 XMFLOAT3 结构描述。GMathFV 是用户定义的函数，它将 XMFLOAT3 转换为 XMVECTOR，如下所示：

```
inline XMVECTOR GMathFV(XMFLOAT3& val)
{
    return XMLoadFloat3(&val);    
} 
```

其他一切都是 directxmath.h 库。这里一切都很好，结果角度是 0.00000，正如预期的那样。

但对于其他 y 轴值为负的向量，例如：

```
float angle = XMConvertToDegrees(XMVectorGetX(
        XMVector3AngleBetweenVectors(GMathFV(XMFLOAT3(0.0f, -100.0f, 0.0f)), 
        GMathFV(XMFLOAT3(0.0f, -99.0f, 0.0f))))); 
```

结果是 0.0197823402，我几乎不能称之为零角度。

请有人帮我找出问题所在。是负数精度，太近的矢量坐标还是其他什么？

UPD：太棒了，但它为 0.0197823402 提供`a(0.0f, 100.0f, 0.0f) x b(0.0f, 99.0f, 0.0f)`0.000000 为`a(0.0f, 101.0f, 0.0f) x b(0.0f, 100.0f, 0.0f)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-13T16:32:56.513

DirectXMath 专为 32 位浮点数学而设计。您看到[浮点错误](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)升级。这是 XMVector3AngleBetweenVectors 的定义。

```
inline XMVECTOR XM_CALLCONV XMVector3AngleBetweenVectors(FXMVECTOR V1, FXMVECTOR V2)
{
    XMVECTOR L1 = XMVector3ReciprocalLength(V1);
    XMVECTOR L2 = XMVector3ReciprocalLength(V2);

    XMVECTOR Dot = XMVector3Dot(V1, V2);

    L1 = XMVectorMultiply(L1, L2);

    XMVECTOR CosAngle = XMVectorMultiply(Dot, L1);
    CosAngle = XMVectorClamp(CosAngle, g_XMNegativeOne.v, g_XMOne.v);

    return XMVectorACos(CosAngle);
} 
```

在您的第一个示例中，CosAngle 等于 1.000000000

在您的第二个示例中，CosAngle 等于 0.999999940

XMVectorACos(0.999999940) = 0.000345266977

这个大误差来自 ACos 的多项式逼近。一般来说，您应该尽可能避免使用三角逆。他们又慢又吵。这是定义，因此您可以了解它的大小。

```
inline XMVECTOR XM_CALLCONV XMVectorACos (FXMVECTOR V)
{
    __m128 nonnegative = _mm_cmpge_ps(V, g_XMZero);
    __m128 mvalue = _mm_sub_ps(g_XMZero, V);
    __m128 x = _mm_max_ps(V, mvalue);  // |V|

    // Compute (1-|V|), clamp to zero to avoid sqrt of negative number.
    __m128 oneMValue = _mm_sub_ps(g_XMOne, x);
    __m128 clampOneMValue = _mm_max_ps(g_XMZero, oneMValue);
    __m128 root = _mm_sqrt_ps(clampOneMValue);  // sqrt(1-|V|)

    // Compute polynomial approximation
    const XMVECTOR AC1 = g_XMArcCoefficients1;
    XMVECTOR vConstants = XM_PERMUTE_PS( AC1, _MM_SHUFFLE(3, 3, 3, 3) );
    __m128 t0 = _mm_mul_ps(vConstants, x);

    vConstants = XM_PERMUTE_PS( AC1, _MM_SHUFFLE(2, 2, 2, 2) );
    t0 = _mm_add_ps(t0, vConstants);
    t0 = _mm_mul_ps(t0, x);

    vConstants = XM_PERMUTE_PS( AC1, _MM_SHUFFLE(1, 1, 1, 1) );
    t0 = _mm_add_ps(t0, vConstants);
    t0 = _mm_mul_ps(t0, x);

    vConstants = XM_PERMUTE_PS( AC1, _MM_SHUFFLE(0, 0, 0, 0) );
    t0 = _mm_add_ps(t0, vConstants);
    t0 = _mm_mul_ps(t0, x);

    const XMVECTOR AC0 = g_XMArcCoefficients0;
    vConstants = XM_PERMUTE_PS( AC0, _MM_SHUFFLE(3, 3, 3, 3) );
    t0 = _mm_add_ps(t0, vConstants);
    t0 = _mm_mul_ps(t0, x);

    vConstants = XM_PERMUTE_PS( AC0, _MM_SHUFFLE(2, 2, 2, 2) );
    t0 = _mm_add_ps(t0, vConstants);
    t0 = _mm_mul_ps(t0, x);

    vConstants = XM_PERMUTE_PS( AC0, _MM_SHUFFLE(1, 1, 1, 1) );
    t0 = _mm_add_ps(t0, vConstants);
    t0 = _mm_mul_ps(t0, x);

    vConstants = XM_PERMUTE_PS( AC0, _MM_SHUFFLE(0, 0, 0, 0) );
    t0 = _mm_add_ps(t0, vConstants);
    t0 = _mm_mul_ps(t0, root);

    __m128 t1 = _mm_sub_ps(g_XMPi, t0);
    t0 = _mm_and_ps(nonnegative, t0);
    t1 = _mm_andnot_ps(nonnegative, t1);
    t0 = _mm_or_ps(t0, t1);
    return t0;
} 
```

# php - 用下划线替换空格，这样我就可以下载文件了。

> ID：14812926
> 
> 赞同：-1
> 
> 时间：2013-02-11T13:25:25.620
> 
> 标签：php, mysql

我有一个允许用户上传文件的网站。在另一个页面上上传文件时，用户可以下载该文件。问题是如果文件名中有空格，它只会选择第一个作品而不是整个文件名。我想知道有没有办法下载包含空格的文件，或者一个简单的选择可能是在文件名中添加下划线以便可以下载。

```
 //This is the directory where images will be saved 
 $target = "../images/avatars/"; 
 $target = $target . basename($_FILES['photoLocation']['name']);

// Check to see all fields have been completed
$photoLocation =($_FILES['photoLocation']['name']);

if (!empty($photoLocation))
{

    // Create an SQL query to add the comment
    $sql = "INSERT INTO tblPhotoUpload (photoLocation) VALUES ('$photoLocation')";

    // Connect to the database
    connect();

    // Run the query and store the result in a variable
    $result = mysql_query($sql) or die("Could not run query");

    //Writes the photo to the server 
    if(move_uploaded_file($_FILES['photoLocation']['tmp_name'], $target))

    // Close connection to the database
    mysql_close() 
```

我正在显示这样的文件。

```
while($record = mysql_fetch_array( $result )) 
 { 
 ?> 

 <tr class="row">
    <td class="cell"><a href= http://xxxxxxxxxxxxxxxxxxxxxx.com/images/avatars/<?php         echo $record["photoLocation"];?>>Download</a> </td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:27:58.303

当您使用 URL 时，您正在处理转义方案中的转义方案。特别是，您必须转义 URL 以成为 URL，然后您必须转义 URL 以将其嵌入 HTML：

```
$url = "http://somesite.tld/some/path/" . urlencode($filename);

echo '<a href="' . htmlspecialchars($url) . '">link</a>'; 
```

很难想象一个实际上需要 htmlspecialchars 的（现实的）情况，但是哇哦偏执狂！

哦，另外，直接引用所有属性值通常是个好主意。

当您这样做时：`<tag attr=value with spaces>`浏览器将`with`和解释`spaces`为附加属性，而不是值的一部分`attr`

* * *

但是，如果您确实采用了替换路线，那么您只是在寻找一个简单的 str_replace 调用：

```
$val = str_replace(' ', '_', $replaceMe); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:30:25.970

尚未测试，但这个逻辑似乎是正确的。

```
$name = str_replace(' ', '_', $photoLocation); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:37:03.417

我建议不要以原始名称显示图像，因为与此相关的安全问题很多。

您可以做到的一种方法是对文件名进行编码并将其保存在数据库的额外字段中。

例子

```
$sql = "INSERT INTO tblPhotoUpload (photoLocation,photourl) VALUES ('$photoLocation','".md5($photoLocation)."')"; 
```

并在显示时在 url 中使用 phtolocation 并将显示路由到照片位置。

祝你好运，如果你需要完整的例子，请告诉我

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-11T13:27:49.480

[str_replace()](http://php.net/manual/en/function.str-replace.php)

$file= str_replace(' ','_',$file);

或者在你的情况下：

```
$target = $target . basename(str_replace(' ','_',$_FILES['photoLocation']['name']));

$photoLocation =(str_replace(' ','_',$_FILES['photoLocation']['name'])); 
```

# java - 如何在java中创建具有同名类的实例

> ID：14812927
> 
> 赞同：0
> 
> 时间：2013-02-11T13:25:26.590
> 
> 标签：java

我想创建一个`B`不属于`A`内部类的类的实例。

我怎样才能做到这一点？我希望两个`B`班级的班级名称保持不变。

```
public class Sample {
    public static void main(String[] args) {
        A a = new A();
        a.show();
    }
}

class A {
    class B {
        public void show() {
            System.out.println("hello");
        }
    }

    public void show() {
        B b = new B();
        b.show();
    }
}

class B {
    public void show() {
        System.out.println("hellohello");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T13:27:21.707

使用 B 类的全限定名，即`com.mypackage.mysubpackage.B`外部B`B`和`com.mypackage.mysubpackage.A.B`内部 B。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T13:27:28.983

您可以使用 的完全限定名称`B`来始终引用它：`packageName.B`.

如果该类位于未命名（默认）包中（即，如果其文件顶部没有声明），这*将不起作用。*这是根本不使用未命名包的另一个原因（即您的所有类都应该在一个命名包中）。`package``.java`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T13:27:49.073

使用要创建实例的类的完整标识符（无`import`语句）。

```
yourPackage.B variable = new yourPackage.B(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T13:32:32.753

用下面的代码替换你的 main 方法：

```
public static void main(String[] args) {

    A a = new A();
    a.show();
    //For Outer Class
    B bOuter =new B();
    bOuter.show();

    //For Inner Class
    A.B bInner=new A().new B();
    bInner.show();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T14:08:16.413

使用完整的限定名避免相同类名之间的冲突。例如`packageName.A.B`和`packageName.B`

# excel - Excel 中的 SSAS 过滤器测量

> ID：14812930
> 
> 赞同：2
> 
> 时间：2013-02-11T13:25:40.170
> 
> 标签：excel, ssas, olap, cube

我有一个从 Excel 2010 连接到的 SSAS 2008 多维数据集。

多维数据集效果很好，但是有些用户有业务需要按度量进行过滤。在 Excel 中，当您将度量拖到数据透视表字段列表中的“报表筛选器”时，会出现错误。

例如，假设您有一个衡量标准，即制作某事的总时间。一些用户可能只对查看该度量大于或小于某个分钟数的数据感兴趣。

有没有办法在 Excel 中完成此操作而无需修改 SSAS 中的多维数据集？

感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:46:05.970

试试这个：

1.  将度量拖到值。
2.  将维度属性拖动到行或列。
3.  假设您将维度拖动到行，您会在单元格上看到一个下拉菜单，其中显示“行标签”。
4.  单击下拉菜单并选择值过滤器，然后选择所需的过滤器。
5.  最后输入过滤条件并单击确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:53:13.120

您可以使用“值过滤器”选项而不是“值标签过滤器”来使用度量进行过滤。标签过滤器适用于维度，值过滤器适用于度量。

# c# - 在 C# 中使用显式接口

> ID：14812932
> 
> 赞同：1
> 
> 时间：2013-02-11T13:25:46.680
> 
> 标签：c#, oop, interface

我可以使用显式接口在实现类中隐藏一个方法，如下所示：

```
interface IInterface
{
    void f1();

}
public class C1 : IInterface
{
    void IInterface.f1()
    {
        Console.WriteLine(" Method Called ....");
    }

} 
```

然后可以访问该方法：

```
C1 C = new C1();
IInterface i = C;
i.f1(); 
```

该方法`f1`将对实现类隐藏`C1`。这种功能的目的是什么？任何人都可以为我提供一个我们需要相同的真实生活场景吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:29:12.150

这是[MSDN](http://msdn.microsoft.com/en-us/library/aa288461%28v=vs.71%29.aspx)的一个很好的例子，它帮助我理解了为什么它们会有所帮助：

此示例以公制和英制单位显示盒子的尺寸。Box 类继承了两个接口 IEnglishDimensions 和 IMetricDimensions，分别代表不同的测量系统。两个接口具有相同的成员名称，长度和宽度。

```
// explicit2.cs
// Declare the English units interface:
interface IEnglishDimensions 
{
   float Length();
   float Width();
}
// Declare the metric units interface:
interface IMetricDimensions 
{
   float Length();
   float Width();
}
// Declare the "Box" class that implements the two interfaces:
// IEnglishDimensions and IMetricDimensions:
class Box : IEnglishDimensions, IMetricDimensions 
{
   float lengthInches;
   float widthInches;
   public Box(float length, float width) 
   {
      lengthInches = length;
      widthInches = width;
   }
// Explicitly implement the members of IEnglishDimensions:
   float IEnglishDimensions.Length() 
   {
      return lengthInches;
   }
   float IEnglishDimensions.Width() 
   {
      return widthInches;      
   }
// Explicitly implement the members of IMetricDimensions:
   float IMetricDimensions.Length() 
   {
      return lengthInches * 2.54f;
   }
   float IMetricDimensions.Width() 
   {
      return widthInches * 2.54f;
   }
   public static void Main() 
   {
      // Declare a class instance "myBox":
      Box myBox = new Box(30.0f, 20.0f);
      // Declare an instance of the English units interface:
      IEnglishDimensions eDimensions = (IEnglishDimensions) myBox;
      // Declare an instance of the metric units interface:
      IMetricDimensions mDimensions = (IMetricDimensions) myBox;
      // Print dimensions in English units:
      System.Console.WriteLine("Length(in): {0}", eDimensions.Length());
      System.Console.WriteLine("Width (in): {0}", eDimensions.Width());
      // Print dimensions in metric units:
      System.Console.WriteLine("Length(cm): {0}", mDimensions.Length());
      System.Console.WriteLine("Width (cm): {0}", mDimensions.Width());
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:31:49.560

在某些情况下，您不想以直接形式在公共 API 上公开某些内容。也许它*永远不会*起作用；也许公共 API 可以公开相同功能的更合适的签名。例如：

```
public int Add(Foo foo) {...} // takes a known type and returns the new index
void ICollection.Add(object obj) {...} // takes object and returns void 
```

一个更常见的例子是当*不可能*不这样做时——例如，`IEnumerable`每个`IEnumerable<T>`人都有一个`GetEnumerator()`方法——相同的输入，但不同的返回值。C#不允许通过返回值重载，所以你至少需要两个方法：

```
IEnumerator IEnumerable.GetEnumerator() { return GetEnumerator(); }

public IEnumerator<T> GetEnumerator() { ...} 
```

尽管它们也可以都是显式的。或者实际上，在`IEnumerator<T>`：

```
public T Current { get { ... } }
object IEnumerator.Current { get { return Current; } } 
```

此外，有时您*只想重命名事物*。例如，由于某种原因 a`Frobber`有一个方法，它自然是`Frob()`。但它也实现了一个`IDoSomething`有方法的接口`DoIt()`；您现在可以使 API 反映最合适的术语来表达意图：

```
class Frobber : IDoSomething {
  public void Frob() {..}
  void IDoSomething.DoIt() { Frob(); }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:30:09.853

您可以在这里查看隐式接口和显式接口之间的区别：

[C# 接口。隐式实现与显式实现](https://stackoverflow.com/questions/143405/c-interfaces-implicit-and-explicit-implementation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T13:33:16.973

真实场景之一是方法名称冲突。想象：

```
interface IWarehouseItem
{
    string Name {get;} // the NAME of the PRODUCT
    int Count {get;}
    int PricePerUnit {get;}
}

interface IWarehouseSupplierInformation
{
    string Name {get;} // the NAME of the SUPPLIER
    int ID {get;}
    int IDAddress {get;}
}

class PurchaseableItem : Entity, IWarehouseItem, IWarehouseSupplierInformation
{
    ....
    // how to implement those different names?
     ....
    string IWarehouseItem.Name { get { this.Product.Name; } }
    ...
    string IWarehouseSupplierInformation.Name { get { this.Supplier.Name; } }
} 
```

有人可能会争辩说，这个例子只是接口和数据结构的糟糕设计，但并非总是能够使它们正确，或者完全有能力改变它们。

其他时候，你可能被迫在一个类上实现一些接口，但你真的不希望这些方法对类的用户可见。**所有显式实现都被认为是私有**的，因此，除非您将对象显式地转换回那个有问题的接口，否则没有人会看到或能够使用这些方法。

# android - 使用 IT 电话类在 android 中阻止呼叫

> ID：14812939
> 
> 赞同：1
> 
> 时间：2013-02-11T13:26:17.300
> 
> 标签：android

我使用此代码来阻止 android 应用程序中的传入呼叫..

```
AudioManager audioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE); 

audioManager.setStreamMute(AudioManager.STREAM_RING, true);

TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
Class clazz = Class.forName(telephonyManager.getClass().getName());

Method method = clazz.getDeclaredMethod("getITelephony");

method.setAccessible(true);

com.android.internal.telephony.ITelephony telephonyService = (ITelephony) method.invoke(telephonyManager);

telephonyService.silenceRinger();

telephonyService.endCall(); 
```

此代码无法正常工作.. 至少有一次电话响铃并在通话结束后.. 请.. 有人给我更好的解决方案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:16:09.330

谢谢你。问题是至少有一次响铃设备并且在切断呼叫之后所以不是切断呼叫而是未接来电..

# c# - 启动过程仅适用于控制台应用程序

> ID：14812944
> 
> 赞同：0
> 
> 时间：2013-02-11T13:26:38.490
> 
> 标签：c#, process, permissions

我正在尝试从 Web 应用程序（在 Visual Studio 开发服务器上运行）启动外部 exe。当我从控制台应用程序运行下面的代码时，它工作正常，但是当我从网页运行它时，应用程序崩溃了。我认为这一定是权限问题，但是尝试了一些方法并无法使其正常工作。

```
 private void RunExe(string pythonOutputFileNameAndLocation)
      {

            var process = new Process { StartInfo = GetProcessStartInfo(pythonOutputFileNameAndLocation) };            

            // This is where the application crashes   
            process.Start();

            // ...do some more things here
       }

       private ProcessStartInfo GetProcessStartInfo(string pythonOutputFileNameAndLocation)
            {
                var startInfo = new ProcessStartInfo
                {
                    CreateNoWindow = true, 
                    UseShellExecute = false,
                    RedirectStandardOutput = true,
                    RedirectStandardInput = true,
                    FileName = _exeFileLocation,
                    WindowStyle = ProcessWindowStyle.Hidden,
                    Arguments = String.Format("--hideUI --runScript {0}", pythonOutputFileNameAndLocation)                
                };

                return startInfo;
            } 
```

我要问的是为什么这段代码可以在控制台应用程序中运行，而不是在 Visual Studio Web 服务器中运行？

我正在使用 Windows 7 和 Visual Studio 2010。

编辑：

根据此处的要求，Windows 捕获的问题详细信息：

```
  问题事件名称：BEX
  应用名称：
  应用程序版本：2.2.2.2909
  申请时间戳：507bf285
  故障模块名称：MSVCR100.dll
  故障模块版本：10.0.40219.325
  故障模块时间戳：4df2be1e
  异常偏移量：0008af3e
  异常代码：c0000417
  异常数据：00000000
  操作系统版本：6.1.7601.2.1.0.256.48
  区域设置 ID：2057
  附加信息 1：c5a0
  附加信息 2：c5a0d9e876212c0d3929ba8445f002dc
  附加信息 3：5e93
  附加信息 4：5e93e44f8aa24f99d37e055f533d1658

```

我无法调试外部应用程序，因为我没有其中的代码。我也没有堆栈跟踪，因为我没有遇到异常。外部进程正在崩溃。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:46:45.283

异常代码`c0000417`具有符号名称`STATUS_INVALID_CRUNTIME_PARAMETER`。谷歌搜索“python”和“STATUS_INVALID_CRUNTIME_PARAMETER”会导致围绕目录权限的各种 python 问题。您可以使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)来发现在尝试运行您的应用程序时是否存在任何权限问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:38:40.250

Ronnie，您可能遇到了 UAC 和安全访问问题。尝试禁用 UAC 并重试。此外，考虑在真正的 Web 服务器上，此过程将以 ASP.NET 或 Web 用户权限启动。出于安全原因，这些帐户受到限制。这意味着您尝试启动的应用程序可能会失败，因为它无法访问所需的文件。因此，不建议从 Web 服务器启动外部 exe。但是，您可以查看有关使用管理员凭据运行应用程序的这个 stackoverflow 问题。[如何使用管理员凭据运行 c# 应用程序？](https://stackoverflow.com/questions/916714/how-to-run-c-sharp-application-with-admin-creds)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:40:03.293

可能是权限的安全问题，但最好是您可以向我们提供有关异常的更多详细信息。

您是否尝试过在 IIS 上运行它并检查它是如何工作的？

# ruby-on-rails - 在多个步骤中创建对象

> ID：14812945
> 
> 赞同：-1
> 
> 时间：2013-02-11T13:26:43.320
> 
> 标签：ruby-on-rails

我们需要在多个步骤中对对象（ActiveRecord 及其 has_many 关联）的创建进行建模。有时，对象的创建分两个不同的步骤完成。

是否有任何宝石可以抽象并为在多个屏幕中发生的对象创建/修改提供支持。感谢任何输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:08:32.570

看看这些 railscasts：

[带有 Wicked的](http://railscasts.com/episodes/346-wizard-forms-with-wicked)[多步表单](http://railscasts.com/episodes/217-multistep-forms)和向导表单。

# ios - (Evasi0n JB) iOS 6 启动了语法变化？

> ID：14812948
> 
> 赞同：0
> 
> 时间：2013-02-11T13:27:10.123
> 
> 标签：ios, launchd

从 iOS 5.x 到 iOS 6.1，launchd (LaunchDaemons) 文件的语法是否有任何变化？

我试图从我的 iOS 5.1 iPhone4s 安装一些东西到 iPhone5（使用 Evasi0n 运行 iOS 6.1 JB），它给了我这个错误（在 /var/log/syslog 中）：

```
com.apple.launchd[1] (com.mydom.myScrpt[2601]): (com.mydom.myScrpt) Exited with code: 1 
```

这不是“myScrpt”问题，因为我将 myScrpt 更改为：

```
#!/bin/sh
echo "----Test---" 
```

但 /var/log/syslog 中唯一的事情是错误，没有别的（在我的 iPhone4s 中做同样的事情，打印该`"----Test---"`行）。

我的 launchd 文件（以 root 身份在 14:00 运行 myScrpt）的语法是

```
{
    Label = "com.mydom.myScrpt";
    LowPriorityIO = 1;
    Nice = 9;
    ProgramArguments =     (
        "/private/var/root/bin/myScrpt"
    );
    StartCalendarInterval =     {
        Hour = 14;
        Minute = 00;
    };
    UserName = root;
} 
```

我究竟做错了什么？我应该如何编写我的启动文件以在 14:00 运行我的命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:29:14.000

在您的launchd文件中添加：

```
<key>StandardOutPath</key>
<string>/var/log/syslog.mine</string> 
```

获取脚本的输出。

这大概就是从 iOS5 到 iOS6 的“变化”。现在您必须指定输出，默认情况下不使用“syslog”。

# android - GCM 推送通知字符串发布数据从 3rd 方服务器（.Net 服务器）发送到 GCM 服务器

> ID：14812949
> 
> 赞同：0
> 
> 时间：2013-02-11T13:27:14.257
> 
> 标签：android, push-notification, google-cloud-messaging

```
String postdata= "collapse_key=score_update&time_to_live=2419200&delay_while_idle=1&data.message=‌​"
                + message + "&data.time=" + System.DateTime.Now.ToString()
                + "&registration_id=" + deviceToken + ""; 
```

与 collapse_key 和 delay_while_idle 标志混淆。我的通知是新闻。所以现在当设备处于活动状态时，我会以适当的方式收到通知。但是在空闲时面临问题（离线，锁定或关闭）。如果在设备处于空闲状态时发送了两个通知，则只要它处于活动状态，它就应该收到两个通知。我应该将增量值附加到 collapse_key 吗？？？？在开发者网站中，delay_while_idle 标志应该为真。所以我将它设置为 1，但有人建议我设置 delay_while_idle=0。请检查上面的屏幕，如果有任何更正，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:37:21.327

如果您希望它仅在设备再次激活时接收两个通知，请保留 delay_while_idle = true 并增加/更改 collapse_key。

如果您希望即使在手机锁定/休眠时也能显示消息，请将 delay_while_idle 设置为 false。

# javascript - 有没有办法在点击事件而不是悬停时激活转换？

> ID：14812953
> 
> 赞同：-2
> 
> 时间：2013-02-11T13:27:21.490
> 
> 标签：javascript, html, css

我正在努力为我的问题找到一个非 JS 解决方案。有没有办法在点击而不是 :hover 或其他时激活 CSS 过渡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:31:34.850

一种可能性：您可以添加一个在单击时保存转换的类。这是一个使用 jQuery 的示例 - 您也可以仅使用“原始”JavaScript 以编程方式实现此目的：

**应该动画的 HTML 容器**

```
<div id="transtion"></div> 
```

**JavaScript**

```
// bind click event to the element itself - but it can also be any other element that triggers this …
$('#transition').click(function() {
    // add the classname thats defined with the transition in your CSS
    $(this).addClass('translate_left');
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T13:28:58.193

点击也有[伪类](http://www.dynamicdrive.com/style/csslibrary/item/css-pseudo-classes/)。但它的名字有些奇怪，通常只知道与 HTML 链接样式有关。

```
DIV.button:active {
   border-style: inset;
} 
```

[这是一个很好的例子。](http://u8.8u.cz//crap/moz-transition.html)

# ruby-on-rails - Rails：放置配置变量的位置

> ID：14812954
> 
> 赞同：0
> 
> 时间：2013-02-11T13:27:25.190
> 
> 标签：ruby-on-rails

我的团队正在维护一个 Rails 应用程序。以前的开发人员决定将一些配置变量（如 facebook 应用程序 ID、Twitter 应用程序 ID）作为环境变量。但这不是很通用。如果我们有两个应用程序（测试和生产），我们将被迫只使用一个硬编码配置（或手动更改它）。将这些变量放在版本控制中也是一种很好的做法。

这是正确的方法吗？如果没有，正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:36:31.067

我们在 2 个应用程序中使用以下解决方案。

1.  [将配置变量存储在https://github.com/railsjedi/rails_config](https://github.com/railsjedi/rails_config) gem的 yml 文件中。

2.  应用程序被配置为通过初始化程序在生产和开发模式下使用不同的 yml 文件。

3.  在生产服务器上，带有 yml 文件的目录与 2 个应用程序进行符号链接。

capistrano 的任务看起来是这样的：

```
namespace :settings do
  task :symlink, roles: :app do
    run "ln -s /path_to_settings/#{rail_env} #{current_path}/config/settings"
  end
end

after "deploy:create_symlink", "settings:symlink" 
```

# c# - 如何为每个页面添加图像背景到pdf？

> ID：14812955
> 
> 赞同：0
> 
> 时间：2013-02-11T13:27:27.207
> 
> 标签：c#, itextsharp

我正在尝试将背景设置为 pdf 并设法用图像设置它我的 pdf 有一个大表格，因此页面是自动添加的，而不是使用该`Document.NewPage()`方法，因此图像背景仅在第一页上设置。这是添加背景的代码：

```
 Image backImg = Image.GetInstance(@"D:\websites\DIS\bugs\130208\A4.png");
    backImg.SetAbsolutePosition(0, 0);
    backImg.Alignment = Image.UNDERLYING;

    var doc = new Document(pageSize);
    PdfWriter pdfWriter = PdfWriter.GetInstance(doc, new FileStream(filePath, FileMode.Create));
    doc.Open();

    doc.Add(backImg);
    ...
    creating a big table 
```

并且不使用该`doc.NewPage()`方法。在关闭文档之前，我是否必须循环抛出每个页面并在末尾添加背景图像，但是如何将它放在背景中而不是其他元素之上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T14:02:02.120

每当你想对每个页面应用一些东西时，你应该使用页面事件，更具体地说[`PdfPageEvent.onEndPage(),`](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfPageEvent.html#onEndPage%28com.itextpdf.text.pdf.PdfWriter,%20com.itextpdf.text.Document%29)是这样做。[您可以通过关键字Page events > onEndPage](http://itextpdf.com/themes/keyword.php?id=220)找到其用法示例——这些示例取自[iText in Action 2nd Edition](http://itextpdf.com/book/)。示例主要添加页脚和页眉，而您要添加背景图形。

请注意，您不应该在`Document`此处将内容添加到实例中，而是直接添加到`PdfWriter,`并且因为您希望图像位于页面内容下方，而不是上方，您需要`PdfWriter.getDirectContentUnder()`在示例中使用 like[`Stationery`](http://itextpdf.com/examples/iia.php?id=114)而不是`PdfWriter.getDirectContent()`在其他示例中使用样品。

**PS：** .Net 的类似示例可以在[这里找到。](http://kuujinbo.info/iTextInAction2Ed/index.aspx)

**PPS：**示例[ImageDirect.java](http://itextpdf.com/examples/iia.php?id=70) / [ImageDirect.cs](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter03&ex=ImageDirect)展示了如何将图像添加到某些可能是此处缺少的信息的直接内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:44:29.223

去做

> PdfPageEvent.onStartPage()

. 在这种情况下，编写代码以插入图像（正如您所做的那样）。它将做的是，一旦创建了新页面，它就会将图像添加到其中，然后在其上添加内容；赋予水印效果。

# android - 应用程序在模拟器上运行但不在设备上

> ID：14812957
> 
> 赞同：0
> 
> 时间：2013-02-11T13:27:30.360
> 
> 标签：android

嗨，我是 android 新手，所以请帮我解决这个问题。我制作了一个通过 DeafultHttpClient 方法连接到服务器的应用程序，它在 android 姜饼模拟器上运行良好，但在安装在 android 姜饼手机上时崩溃。试过USB调试，logcat显示无法连接服务器url。已经坚持了很长一段时间了。非常感谢您的帮助。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:35:14.240

**模拟器**使用您的计算机连接来访问网络，因此**可以访问**您计算机的所有内容。

**手机可能不会**，这取决于您是否使用 Wifi，以及您的网络管理员是否允许通过 wifi 连接到您的服务器。

检查您的服务器是否可以从外部访问（如果您的应用不会在外部使用，则可以通过您的 wifi 访问）

# sql - 从远程服务器导出 SQL 数据库（所有表）

> ID：14812958
> 
> 赞同：0
> 
> 时间：2013-02-11T13:27:35.030
> 
> 标签：sql, database-backups, sql-server-2005-express

我目前正在使用使用 SQL Server 数据库的第 3 方产品。我被要求为我们自己的备份/安全目的获取数据库的副本，但我遇到了麻烦。

为了访问数据库，我目前使用远程桌面登录到我公司的一台服务器，其中安装了 SQL Server 2005 Express。然后，我使用该 SQL Server 实例连接到第 3 方的 SQL Server。

当我执行任务-> 备份...时，它似乎可以工作，但文件本地存储在远程 SQL 数据库服务器上，我的 IT 团队告诉我这是预期的。

我尝试使用任务-> 生成脚本...但是“脚本数据”选项不可用，因为它是 SQL Server 2005 Express，或者因为数据库是远程的（不确定是哪个，但可能是其中之一）。

我已经尝试了其他我现在不记得的事情，而且我没有想法。

谁能建议一些可以让我获得远程数据库表结构和数据的“本地”副本的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:31:03.313

生成脚本向导不可用，因为您使用的是非常旧的 Management Studio Express 版本。2012 版在 2005 版实例上运行良好，但无论如何不再有 Express 版，因为所有 SSMS 功能现在无需任何许可即可使用。

在此处下载最新版本：

[https://docs.microsoft.com/en-us/sql/ssms/download-sql-server-management-studio-ssms](https://docs.microsoft.com/en-us/sql/ssms/download-sql-server-management-studio-ssms)

我在这篇文章的底部列出了旧版本的下载：

[https://blogs.sentryone.com/team-posts/latest-builds-management-studio/](https://blogs.sentryone.com/team-posts/latest-builds-management-studio/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:32:25.983

备份确实在本地生成。正如您的团队已经告诉您的那样，这是可以预料的。您可以在本地生成它，然后使用 FTP 客户端等工具下载它。我强烈推荐 Redgate 工具。请参阅[http://www.red-gate.com/products/dba/sql-backup/](http://www.red-gate.com/products/dba/sql-backup/)这是一个很棒的工具，并且内置了一些网络备份选项，可以将您的备份发送到其他地方。如果它是一次性的，Redgate 也有相应的工具，例如 SQL 比较和 SQL 数据比较。

您选择的解决方案实际上取决于您必须在本地运行和下载备份的频率以及数据库的大小。

# vba - 具有来自 RowSource 的值的 excel 用户表单组合框：如何在更新 .Text 后更新 .Value？

> ID：14812960
> 
> 赞同：0
> 
> 时间：2013-02-11T13:27:36.443
> 
> 标签：vba, excel, automation

我必须使用的 Excel 用户窗体有一个组合框。它的 RowSource 是一个 2 列范围（第 2 列的属性`Text`coles，第 1 列的属性`Value`coles）。

当我`text`通过单击组合框（在表单上）更改时，`value`会更新，但是当我`.Text`在 VBA 代码中设置属性时，“.Value”值不会更新。如何强制 vba 代码复制手动行为？谢谢。

```
Public Sub generalSettingsForm_MyCombo(ByVal newValue As String)
    generalSettingsForm.MyCombo.Text = newValue
    Call generalSettingsForm.someUnrelatedButton_Click ' some code
    Call generalSettingsForm.MyCombo_Change ' some code
    Dim str As String
    srt = generalSettingsForm.RatingModelCombo.Value
End Sub 
```

触发一些更新事件将是最好的选择，但 VBA 上下文菜单没有任何与此类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:53:20.047

以下对我有用（此代码位于常规模块中）：

```
Sub demoUpdate()
    With UserForm1
        .ComboBox1.Text = "this"
        MsgBox "text is now " & .ComboBox1.Text
        MsgBox "value is now " & .ComboBox1.Value
        .Show
        MsgBox "value is now " & .ComboBox1.Value & "; text is " & .ComboBox1.Text
        .ComboBox1.Text = "that"
        MsgBox "text is now " & .ComboBox1.Text
        MsgBox "value is now " & .ComboBox1.Value
        .Show
        MsgBox "value is now " & .ComboBox1.Value & "; text is " & .ComboBox1.Text
    End With
End Sub 
```

在`rowSource`我的情况下是单列宽......我确实将 a 指定`controlSource`为组合框的属性之一。我看不到您在双列中看到的内容 - 对我来说，组合框仅在`rowSource`范围为两列宽时响应第一列...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:34:10.240

您需要在表单中添加一些代码。当您双击文本框时，您将看到创建了一个新的（空）事件 - 您可以在此处添加代码以在更改 .text 时更改组合框的值。

# javascript - 检查二维数组中是否存在值

> ID：14812974
> 
> 赞同：6
> 
> 时间：2013-02-11T13:28:10.677
> 
> 标签：javascript, jquery

我有一个二维数组的格式

```
emi_309 | present | weak   | 6
emi_310 | present | strong | 9
emi_319 | present | medium | 8
emi_315 | present | weak   | 5 
```

我想使用一个简单的函数检查第一列中是否存在值

例如，检查 emi_77 是否存在于第一列

我遇到了，`$.inArray(value, array)`但这个函数只适用于一维数组。

二维数组是否有类似的东西

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T13:29:57.920

是的，如果您结合使用`$.inArray`and [`$.map`](http://api.jquery.com/jQuery.map/)：

```
if ($.inArray(value, $.map(arr, function(v) { return v[0]; })) > -1) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:34:06.557

可用于`$.grep`创建新数组并检查其长度

```
var val='emi_77';
if( $.grep( twoDarray, function(item){ return item[0]===val; }).length){
  /* item exists*/
} 
```

`$.grep`不会影响原始数组

API 参考：[http ://api.jquery.com/jQuery.grep/](http://api.jquery.com/jQuery.grep/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-23T10:04:46.053

这是我在没有 Jquery 的情况下简单地做到这一点的方法。

```
for (var i = 0; i <array.length; i++) {
        if(array[i][0] == 'emi_77'){
            alert("exists");
        }
} 
```

如果您想更进一步，可以使用以下功能；

```
function IsIn2D(str,order,array){
  for (var i = 0; i <array.length; i++) {
        return array[i][order] == str;
  }
} 
```

在哪里;
*array*是您要搜索的数组
*str*是您要检查它是否存在的字符串
*order*是内部数组中字符串的顺序，

例如，通过将其应用于问题的示例 2D 数组：
emi_309 | 礼物 | 弱 | 6
emi_310 | 礼物 | 强 | 9
emi_319 | 礼物 | 中 | 8
emi_315 | 礼物 | 弱 | 5

```
IsIn2D('emi_77',0,array); /*returns false*/
IsIn2D('emi_315',0,array); /*returns true*/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-26T08:26:55.360

检查此方法以从二维数组中搜索。只需检查转换为字符串并进行比较。

```
function isArrayItemExists(array , item) {
    for ( var i = 0; i < array.length; i++ ) {
        if(JSON.stringify(array[i]) == JSON.stringify(item)){
            return true;
        }
            }
            return false;
} 
```

# android - Android：记录屏幕活动

> ID：14812975
> 
> 赞同：4
> 
> 时间：2013-02-11T13:28:10.370
> 
> 标签：android, video-capture

我打算为我创建的三个 Android 应用程序的演示记录用户的屏幕活动。

我想我已经对 Google 和 Play Store 进行了很好的研究，到目前为止，我看到的解决方案要么需要一个不是免费的应用程序，使用 Google USB 驱动程序（与 OSX 不兼容），要么需要一个应用程序所需的根。

我需要一个应用程序（安装在 Android 设备或 Mac OSX 中），它可以记录免费的 Android 设备的屏幕活动，不需要 root，并且不需要任何中间硬件即可工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-11T21:25:57.983

从 Android 4.4 开始，可以通过 adb 访问屏幕录制功能。

[http://developer.android.com/tools/help/adb.html#screenrecord](http://developer.android.com/tools/help/adb.html#screenrecord)

> screenrecord 命令是一个 shell 实用程序，用于记录运行 Android 4.4（API 级别 19）及更高版本的设备的显示。该实用程序将屏幕活动记录到一个 MPEG-4 文件中，然后您可以下载该文件并将其用作视频演示的一部分。此实用程序对于想要在不使用单独的录制设备的情况下创建宣传或培训视频的开发人员很有用。

# ios - 如何使 pushViewController: 在以下情况下工作？

> ID：14812976
> 
> 赞同：0
> 
> 时间：2013-02-11T13:28:12.953
> 
> 标签：ios, uinavigationcontroller, pushviewcontroller

我有一个嵌入在 RootViewController 中的导航控制器。RootViewController 中存在的元素是分段控件和 UIView。As the different segments are selected, the UIView displays a corresponding ViewController.

现在在 UIView 中显示的每个 ViewController 都是一个 UITableViewController。

我需要根据段选择显示表值。而且，如果选择了表格的任何行，它必须移动到具有详细视图的更新的 ViewController。

我能够根据段更改显示 UITableViewControllers。但是，当我单击表格的行时，出现的较新的 ViewController 是空白的（黑屏），即使我已经在 Storyboard 中创建了特定的 ViewController 并设置了一个标识符。

**ViewController.m 中分段控制更改的代码**

```
- (void)segmentedControlChangedValue:(UISegmentedControl*)segmentedControl {

int selIndex = segmentedControl.selectedIndex;

if (selIndex == 0)
{
    aTable = [[aTableViewController alloc] init];

    aTable.view.frame = self.myView.bounds;
    [self.myView addSubview:aTable.view];
    [self addChildViewController:aTable];
}

if (selIndex == 1)
{
    bTable = [[bTableViewController alloc] init];

    bTable.view.frame = self.myView.bounds;
    [self.myView addSubview:bTable.view];
    [self addChildViewController:bTable];

}

if (selIndex == 2)
{
    //NSLog (@"Well you selected a 3rd option");
}} 
```

**didSelectRowAtIndexPath 的代码：**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
[super tableView:tableView didSelectRowAtIndexPath:indexPath];

newDetailController* newController = [self.storyboard instantiateViewControllerWithIdentifier:@"Detail"];

newController = [[newDetailController alloc] init];

[[self navigationController] pushViewController:newController animated:YES];} 
```

即使我已经指定了要在 Storyboard 设计中使用的 ViewController 并且还使用了标识符，pushViewController 也会为我推送一个空视图。

请帮助我理解我必须做些什么来纠正这个错误。

**更新 - 上述问题已解决。**

我现在面临的问题是无法访问 newViewController 中的数据。

我将数据传递给 newViewController，如下所示：

1.  Create a class named newClass which contains all the elements I want to pass across.

2.  Create a NSMutableArray "newObjects" in the firstViewController.

3.  Create each newClass object at this method.

     ``*   (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath object:(PFObject *)object {

    static NSString *CellIdentifier = @"Cell";

    customBigTableCell *cell = (customBigTableCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) { cell = [[customBigTableCell alloc] init]; }

    cell.name.text = [object objectForKey:@"objName"];

    newClass* newObj = [[newClass alloc] init];

    newObj.objName = cell.name.text;

    [newObjects addObject:newObj];` 

    `return cell; }` Pls pardon me .. for the indenting with the code block is messed up... Also the PFObject is cos i use Parse for database.` 
`*   Add the created object to the newObjects array.

    *   In the `- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath` method, this is the code

    *   (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath { [super tableView:tableView didSelectRowAtIndexPath:indexPath];

        UIStoryboard* storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle mainBundle]];

        newDetailController* newController = [storyboard instantiateViewControllerWithIdentifier:@"UpcomingDetail"];

        obj = [[newClass alloc] init];

        NSIndexPath* path = [self.tableView indexPathForSelectedRow];

        obj = [newObjects objectAtIndex:path.row];

        NSLog(@"Row selected is %ld", (long)path.row); //this returns the correct row selected

        NSLog(@"Movie selected is %@", [[newObjects objectAtIndex:path.row] objName]);//however this is not the right one as per the cellForRowAtIndexPath method.

        [newController setNewObj:obj];

        [[self navigationController] pushViewController:newController animated:YES]; }` 

 `When I run this code, the row is selected correctly. However I dont get the corresponding row in the database. The array gets stored with redundant data.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:29:53.353

You need to get rid of that middle line:

```
newController = [[newDetailController alloc] init]; 
```

That just redefines newController (as an empty controller with no view set up), which you defined in the first line.`

# java - 有没有办法在其他一些应用程序也在访问同一个数据库时打开 h2 控制台？

> ID：14812977
> 
> 赞同：0
> 
> 时间：2013-02-11T13:28:19.663
> 
> 标签：java, h2

我在 java 应用程序中使用 h2 db。我正在使用 H2 控制台查看数据库的内容，但它仅在没有其他应用程序访问数据库时才有效。有没有办法在其他一些应用程序也在访问同一个数据库时打开 h2 控制台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:40:44.263

为了能够从多个应用程序连接，您可以将数据库配置为接受 tcp 连接。基本上，您可以通过`jdbc:h2:tcp`在您的数据库 url 中使用来做到这一点。

[在此处](http://www.h2database.com/html/tutorial.html#using_server)阅读有关此内容的更多信息。

# header - 以太网标头是什么样的？

> ID：14812979
> 
> 赞同：3
> 
> 时间：2013-02-11T13:28:22.647
> 
> 标签：header, frame, ethernet

以太网标头是什么样的？

是吗：

```
1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|
..................................destination mac..................................
...................................|...................source mac..................
...................................................................................|
...............type................| 
```

或者：

```
1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|
..................................destination mac..................................
...................................|...................source mac..................
...................................................................................|
...............type................|.......................data....................
......................................up to 1500...................................|
crc/fcs| 
```

或者是：

```
1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|
...Preamble..|................................destination mac......................
...........................................................|source mac.............
...................................................................................
.............|.type........................................|data....................
......................................up to 1500...................................|
crc/fcs| 
```

我在网上发现了很多不同的观点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T13:37:13.270

他们都不是。按照规格，框架看起来像：

*   序言：8字节
*   目标mac：6字节
*   源mac：6字节
*   类型/长度：2字节
*   数据：46-1500字节
*   帧校验：4字节

规格在这里：[http ://standards.ieee.org/about/get/802/802.3.html](http://standards.ieee.org/about/get/802/802.3.html)

这里有一个更有用且更容易理解的解释：[http ://wiki.wireshark.org/Ethernet](http://wiki.wireshark.org/Ethernet)

标头是数据之前的帧。MAC 报头是点 2-4（14 个字节）。MAC 尾部是 4 个字节（最后一点）。因此，以太网帧由前导码（8 个字节）、MAC 头（14 个字节）、数据和尾部（4 个字节）组成。

# symfony - Doctrine2 和 Symfony2 - 为什么这个 getter 把所有的事情都搞砸了？

> ID：14812982
> 
> 赞同：1
> 
> 时间：2013-02-11T13:28:30.777
> 
> 标签：symfony, doctrine-orm

这段代码快把我逼疯了。

假设我已经完成所有这些操作的实体具有我用 getter 回忆的所有成员（在类文件中的 db 上；此外，在 db 上，所有值都已插入）。

```
$this->logger->debug('INV ROOM RATES CAPACITY - $ROOM ID: '.$camera->getId());
$this->logger->debug('INV ROOM RATES CAPACITY - $ROOMCAPACITY: .$camera->getCapienza());
$this->logger->debug('INV ROOM RATES CAPACITY - CAMERA DB ID: '.$camera->getId()); 
```

这将输出以下内容

```
[2013-02-11 14:17:32] app.DEBUG: INV ROOM RATES CAPACITY - $ROOM ID: 14 [] []
[2013-02-11 14:17:32] app.DEBUG: INV ROOM RATES CAPACITY - $ROOMCAPACITY:  [] []
[2013-02-11 14:17:32] app.DEBUG: INV ROOM RATES CAPACITY - CAMERA DB ID:  [] [] 
```

似乎该`->getCapienza()`方法将所有事情都搞砸了（*同一对象上的第二个 getter，不返回先前的值*）。显然，不会引发错误或异常。

这里发生了什么？有任何想法吗？我从几个小时就被困住了....

# 编辑

```
public function getCapienza()
{
    return $this->capienza;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:10:37.073

由于您刚刚告诉我您有时会清除 EntityManager，因此我对其进行了更深入的研究。

这是一个已知问题，将在合并[https://github.com/doctrine/doctrine2/pull/406时在 Doctrine ORM 2.4 中修复。](https://github.com/doctrine/doctrine2/pull/406)

问题的发生是因为以下代码：[https ://github.com/doctrine/doctrine2/blob/2.3.2/lib/Doctrine/ORM/UnitOfWork.php#L1724-L1780](https://github.com/doctrine/doctrine2/blob/2.3.2/lib/Doctrine/ORM/UnitOfWork.php#L1724-L1780)

基本上，不可能合并或通常使用与 EntityManager 分离的代理（您之前应该延迟加载它们）。

您遇到的问题与[http://www.doctrine-project.org/jira/browse/DDC-1734有关](http://www.doctrine-project.org/jira/browse/DDC-1734)

一个临时解决方案是重新获取要使用的数据，而不是回收分离的实例。

# magento - Magento 1.7.0.2 自定义付款方式未显示在前端检查输入页面上

> ID：14812984
> 
> 赞同：2
> 
> 时间：2013-02-11T13:28:49.810
> 
> 标签：magento, module, payment-gateway

Magento 1.7.0.2 自定义付款方式未显示在前端结帐页面上

我正在尝试创建一种自定义支付方式来连接到外部支付提供商。但无论我正在构建或使用什么模块，我的新付款方式都不会显示在前端的结帐页面中。我在以下位置尝试了创建支付模块教程：

[http://www.magentocommerce.com/wiki/5__-_modules_and_development/payment/create-payment-method-module](http://www.magentocommerce.com/wiki/5_-_modules_and_development/payment/create-payment-method-module)
和非常棒的教程：

[http://www.junaidbhura.com/how-to-make-a-custom-magento-payment-extension-for-an-external-gateway/](http://www.junaidbhura.com/how-to-make-a-custom-magento-payment-extension-for-an-external-gateway/)

模块已构建，我可以在管理面板上查看和配置它们。但是新的付款选项不会显示在前端。

按照我在我尝试过的主题上找到的一些提示：

*   确保在模块和商店中正确设置货币。
*   确保模块中允许允许的国家
*   我正在禁用缓存，只是为了确保每次更改某些内容时都会刷新它（通过系统或直接在 var/cache 文件夹中）。
*   我已经禁用了之前安装的另外两个模块：CurrencyManager 和 Skipstep1。

我将非常感谢任何帮助，因为这是我唯一可以让我的商店上线的事情:)，而且我几天都找不到解决方案。谢谢

# ios - 处理按钮动作

> ID：14812988
> 
> 赞同：0
> 
> 时间：2013-02-11T13:29:09.030
> 
> 标签：ios, objective-c, uibutton

我有 3 个按钮，分别命名为： bw1 、 bw2 和 bw3

简单地说，我希望在使用隐藏单击这些按钮之一时应用特定操作。

每个按钮只应在单击时隐藏。

我的问题是单击 bw3 时， bw3 和 bw2 都被隐藏了。但是当我点击 bw2 时，没有发生任何错误，这意味着问题出在 bw3 方法中。

我不知道问题是什么。我多次跟踪代码，但找不到解决方案。

```
- (IBAction)bw1:(id)sender {

    _lw1.hidden = NO;
    _bw1.hidden = YES;
}
- (IBAction)bw2:(id)sender {

    _lw2.hidden = NO;
    _bw2.hidden = YES;

}
- (IBAction)bw3:(id)sender {

    _lw3.hidden = NO;
    _bw3.hidden = YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:35:20.513

根据我上面的评论

检查您的`xib`，对于`_bw3`，有 2 个 IBAction 集，bw2 和 bw3。

即`- (IBAction)bw2:(id)sender`和`- (IBAction)bw3:(id)sender`

希望对你有帮助。。

# c++ - 完美的转发不接机方式

> ID：14812989
> 
> 赞同：1
> 
> 时间：2013-02-11T13:29:11.887
> 
> 标签：c++, templates, c++11, rvalue-reference, perfect-forwarding

我收到以下代码的 SFINAE 错误，因为它不会使用模板。结果，我正在尝试完善 args 。任何想法任何人。

```
#include <iostream>

#include "constants.h"

namespace perfectforwarding
{
    template<class T, class U>
    constexpr auto maximum(T&& a, U&& b) -> decltype( (a > b) ? std::forward(a) : std::forward(b))
    {
        return (a > b) ? std::forward(a) : std::forward(b);
    }
}

int main(int argc, const char * argv[])
{

    std::cout << "Created count is: " << created_count << std::endl;

    auto const result = perfectforwarding::maximum(5,6.0);

    std::cout << "The maximum of 5 and 6: " << result << std::endl;
    return 0;
} 
```

布莱尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T13:31:58.593

`std::forward`是一个模板，如果你想让它正常工作，你需要显式地提供类型参数。这就是你的`maximum`函数模板应该如何重写：

```
template<class T, class U>
constexpr auto maximum(T&& a, U&& b) -> 
    decltype( (a > b) ? std::forward<T>(a) : std::forward<U>(b))
{
    return (a > b) ? std::forward<T>(a) : std::forward<U>(b);
} 
```

这是该`std::forward`实用程序的定义方式：

```
template<class T> 
T&& forward(typename remove_reference<T>::type& a) noexcept
{
    return static_cast<S&&>(a);
} 
```

该表达式`typename remove_reference<T>::type`使其成为非推导上下文，这解释了如果您未显式提供类型参数，则类型推导失败的原因`T`。

# sharepoint - Alfresco：在自定义客户端中编辑文档

> ID：14812992
> 
> 赞同：0
> 
> 时间：2013-02-11T13:29:12.790
> 
> 标签：sharepoint, web-applications, ms-office, alfresco

我打算创建一个自定义的基于 ajax 的小型网络客户端来浏览一些露天文档（Word 和 Excel 文件）。

有没有办法在自定义 Web 客户端中在线编辑 MS Office 文件？也许通过 SharePoint、WebDAV 或 CIFS 协议？我可以将 SharePoint 协议用于我的自定义客户端，还是仅用于露天共享？

环境：Alfresco 3.2、Windows 7、MS Office 2010、IE9、最新火狐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:36:57.517

如果你可以执行 C#/VB 那么是的。你必须使用： [http ://www.microsoft.com/en-us/download/details.aspx?id=5124](http://www.microsoft.com/en-us/download/details.aspx?id=5124)

和 Sharepoint 客户端对象模型

# python - 从详细信息选项卡中获取文件描述

> ID：14812993
> 
> 赞同：2
> 
> 时间：2013-02-11T13:29:14.023
> 
> 标签：python, batch-file, cmd

我希望能够从 .dll 或 .sys 文件的详细信息选项卡中获取文件描述字符串。我尝试了多种方法来做到这一点，但无法让它们点击。无论如何可以通过命令行执行此操作以使其产生屏幕输出。我对使用 VB 提供的 FileVersion.description 不满意。

任何方向或帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:05:46.643

作为起点，看起来可以使用[win32api](http://sourceforge.net/projects/pywin32/)检索其中的一些内容。[你可以在这里](http://timgolden.me.uk/pywin32-docs/contents.html)找到文档，当然也可以使用 python 的内置 help()。

我编辑添加了一些代码来显示如何检索一些信息。我用过 win32api 和[os.stat](http://docs.python.org/2/library/os.html#os.stat)希望这足以让你开始。用我到目前为止所提供的内容，应该不会太难找到它的其余部分。

```
import os
import time
import stat
from win32api import GetFullPathName

def get_details(file_name):
    time_format = "%m/%d/%Y %I:%M:%S %p"
    file_stats = os.stat(file_name)

    return {
        'folder_path': GetFullPathName(file_name),
        'size': file_stats[stat.ST_SIZE],
        'date_modified':time.strftime(time_format,time.localtime(file_stats[stat.ST_MTIME])),
        'access_time': time.strftime(time_format,time.localtime(file_stats[stat.ST_ATIME])),
    }

print get_details("myfilename") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:22:26.937

```
langs = win32api.GetFileVersionInfo(ExecutablePath, r'\VarFileInfo\Translation')
key = r'StringFileInfo\%04x%04x\FileDescription' %(langs[0][0], langs[0][1])        
print (win32api.GetFileVersionInfo(ExecutablePath, key)) 
```

# php - Halogy codeigniter cms不显示图像和url不起作用

> ID：14812995
> 
> 赞同：0
> 
> 时间：2013-02-11T13:29:15.410
> 
> 标签：php, codeigniter, halogy

今天我从他们的网站下载了 halogy cms .. 我成功安装到我的根文件夹上的 localserver .. 例如 localhost/halogy .. 我设置了数据库并成功更改了 database.php 文件，但问题是图像是没有显示，网址也不起作用..不知道我应该怎么做，因为我是代码点火器的新手...我也看到这个问题也 [halogy cms 没有显示图像..](https://stackoverflow.com/questions/14627662/halogy-cms-not-showing-images-or-urls-not-working)但它也没有帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T13:49:15.320

我对这个问题做了一点修正。这是你如何做到的。

在`halogy/config/site_config.php`添加这一行

```
$config['appFolder']            =   '/halogy'; 
```

`halogy`me应用程序所在文件夹的名称在哪里。接下来添加一个函数`helpers/halogy_helper.php`

```
function addFolder($string){
    $CI =& get_instance();
    $folder =   $CI->config->item('appFolder');
    return $folder  .   $string;
} 
```

接下来搜索函数`display_image`并添加这一行

```
$path   =   addFolder($path); 
```

前

```
$imageHTML = '<img src="'.$path.'" alt="'.$alt.'" '; 
```

接下来转到`views/includes/header.php`并将此代码添加到 head 部分

```
<script type="text/javascript">
function base_url(){
    return '<?php echo base_url();?>';
}
</script> 
```

下一个`static/js/jquery.flot.init.js`并替换这个

```
base_url()+'admin/stats/'+days 
```

有了这个

```
'admin/stats/'+days 
```

最后转到第206行并替换此行

```
$imagePath = $imageData['src']; 
```

有了这个

```
$imagePath = addFolder($imageData['src']); 
```

现在图像问题已经解决，仪表板也可以正常工作。

# iphone - 无尽的垂直滚动背景

> ID：14812997
> 
> 赞同：0
> 
> 时间：2013-02-11T13:29:26.230
> 
> 标签：iphone, background, cocos2d-iphone, scroll

我想制作一个无尽的垂直滚动层，给人以主角向上移动的印象。我一直在思考如何实现这一目标。我的问题是我希望对象看起来好像它们同时来自屏幕上方和下方。其次，我希望能够移动主角以创建和销毁它与屏幕上出现的一些对象之间的 box2d 关节。在消耗过多内存的情况下实现这一目标的最佳方法是什么？我将不胜感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:09:34.883

我还需要无休止的滚动背景层。[这](https://github.com/aramkocharyan/cocos2d)可以做到这一点，而且设置和使用非常简单。只需将这四个文件复制到项目中的 cocos2d 文件夹中，然后按照 github 上的快速教程进行操作即可。确保您使用的图像是无缝的（当您将它们垂直排列时，您无法分辨出一个结束的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:32:35.257

把你的玩家想象成在一个固定的边界框内移动。背景可以使用前面提到的池化方法滚动（当背景图块滚动离开屏幕时，它会被放入池中，并且在实例化新图块之前，会检查池中是否有可用的可重用图块）。第三，您的敌方物体只会从屏幕底部或顶部接近。

想象一下你的想法没有滚动背景（飞行效果），你应该会发现问题相对简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:30:10.833

Apple 在 WWDC 2011 视频会议中做了一个很棒的教程。它是“ [UITableView Changes, Tips & Tricks](https://developer.apple.com/videos/wwdc/2011/?id=125) ”，视频时长约为 35 分 40 秒。

由于使用`UITableView`a 实际上只是`UIScrollView`为了背景的目的，您可以只使用 a`UIScrollView`并且您可以根据需要让它在计时器或事件上移动。

# matlab - 检查matlab句柄是否为图形句柄

> ID：14812999
> 
> 赞同：7
> 
> 时间：2013-02-11T13:29:30.090
> 
> 标签：matlab, handle

如何检查matlab句柄是否是图形句柄？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T14:04:00.647

要在不冒错误风险的情况下测试图形句柄，请执行以下操作：

```
isFigureHandle = ishandle(h) && strcmp(get(h,'type'),'figure') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-30T19:51:12.000

我知道这篇文章很旧，但我想我会做出贡献。

```
isgraphics(h,'figure') 
```

这区分了子图和图

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T13:38:10.593

很明显 - 寻找`Type: 'figure'`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T14:09:34.820

查看[ishghandle](http://www.mathworks.com/help/matlab/ref/ishghandle.html) (h) 函数