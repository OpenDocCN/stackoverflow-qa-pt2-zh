# StackOverflow 问答 16221000-16221999

# javascript - 在 JavaScript 中确定照片的方向？

> ID：16221005
> 
> 赞同：11
> 
> 时间：2013-04-25T17:24:20.190
> 
> 标签：javascript, iphone, ios, canvas, html5-canvas

我们`FileReader`用来从 iPhone 上拍摄的照片中获取图像到浏览器中。然后我们使用`drawImage()`将该图像绘制到一个`canvas`. 问题是在 iPhone 上拍摄的照片会在页面上旋转。我们无法在任何 Android 设备上重现此内容。

我们可以`canvas`很容易地旋转图像，但是我们如何确定所需的旋转呢？[我们尝试了一些用于 JavaScript ( exif.js](https://github.com/jseidelin/exif-js) )的 EXIF 读取库，但无法成功读取方向。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T18:04:54.363

好的，看起来您实际上*可以*使用 exif.js 读取 exif 数据。

```
$("input").change(function() {
    var file = this.files[0];
    fr   = new FileReader;

    fr.onloadend = function() {
        var exif = EXIF.readFromBinaryFile(new BinaryFile(this.result));
        alert(exif.Orientation);
    };

    fr.readAsBinaryString(file);
}); 
```

此代码使用[exif.js](https://github.com/jseidelin/exif-js)和[binaryajax.js](https://github.com/jseidelin/binaryajax)。

这有效，但*前提*是您使用在 ios 上拍摄的照片进行尝试。我认为android只是旋转实际的图像，方向总是1，所以他们甚至没有写出exif的方向。因此，我们被愚弄以为它不起作用。

对于确实有方向的图像，该值是可读的，可以解释如下（这些是 F 的顺便说一句）：

```
 1        2       3      4         5            6           7          8

888888  888888      88  88      8888888888  88                  88  8888888888
88          88      88  88      88  88      88  88          88  88      88  88
8888      8888    8888  8888    88          8888888888  8888888888          88
88          88      88  88
88          88  888888  888888 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-07T07:59:04.333

即使没有 binaryajax.js 也能很好地工作

只需使用

```
EXIF.getData(changeEvent.target.files[0], function () {
    alert(EXIF.pretty(this));                            
}); 
```

同样[在这里](https://github.com/jseidelin/exif-js/blob/master/example/index.html)你可以看到另一个例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-04T01:07:21.107

或者，如果您只想要方向标签：

```
EXIF.getData(file, function () {
    alert(this.exifdata.Orientation);
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-07-17T19:07:54.097

我的两分钱是 exif-js 框架对我不起作用并且不是必需的。

相反，您可以做的是“加载”您的图像 src，创建一个画布，然后将您的画布绘制在您的图像之上，这样做的目的是摆脱任何与 iphone 相关的图像“exif”旋转，因为画布 drawImage 会擦除exif 数据。

绘制完成后，您将看到您的图像“旋转”回它在 PC 浏览器上的外观

# c++ - C ++插入对向量进行排序

> ID：16221007
> 
> 赞同：0
> 
> 时间：2013-04-25T17:24:24.387
> 
> 标签：c++, vector

我正在尝试对我昨天在上一篇文章的帮助下创建的棒球投手向量进行插入排序。我想按 ERA1 升序对投手进行排序。我已经让插入排序在过去适用于一组整数。我认为我的插入排序代码中有语法错误。在尝试添加插入排序之前，该程序运行良好。我收到一个错误 - 在 [ token. 提前感谢您的帮助。

```
#ifndef Pitcher_H
#define Pitcher_H
#include <string>
#include <vector>

using namespace std;

class Pitcher
{
private:
    string _name;
    double _ERA1;
    double _ERA2;

public:
    Pitcher();
    Pitcher(string, double, double);
    vector<Pitcher> Pitchers;
    string GetName();
    double GetERA1();
    double GetERA2();
    void InsertionSort(vector<Pitcher>&);
    ~Pitcher();

};

#endif

#include "Pitcher.h"
#include <iostream>
#include <string>
#include <vector>
#include <iomanip>

using namespace std;

Pitcher::Pitcher()
{
}

Pitcher::~Pitcher()
{
}

string Pitcher::GetName()
{
    return _name;
}

Pitcher::Pitcher(string name, double ERA1, double ERA2)
{
    _name = name;
    _ERA1 = ERA1;
    _ERA2 = ERA2;
}

double Pitcher::GetERA1()
{
    return _ERA1;
}

double Pitcher::GetERA2()
{
    return _ERA2;
}

#include "Pitcher.h"
#include <iostream>
#include <string>
#include <vector>
#include <iomanip>

void InsertionSort(vector<Pitcher> Pitchers&);

using namespace std;

int main()
{

    vector<Pitcher> Pitchers;

    cout  << "Pitcher" << setw(19) << "Item ERA1" << setw(13) << 
        "Item ERA2\n" << endl;

    Pitcher h2("Bob Jones", 1.32, 3.49); 
    Pitchers.push_back(h2); 
    Pitcher h3("F Mason", 7.34, 2.07); 
    Pitchers.push_back(h3); 
    Pitcher h1("RA Dice", 0.98, 6.44); 
    Pitchers.push_back(h1); 

    for(unsigned i = 0; i < Pitchers.size(); ++i)
    {
        cout << setw(19);
        cout << left << Pitchers[i].GetName() << "$" << 
            setw(10) << Pitchers[i].GetERA1() << 
            right << "$" << Pitchers[i].GetERA2() << "\n";
    }

    cout << endl;

//------------------------------------------------------

    InsertionSort(Pitchers);

//Now print the numbers
    cout<<"The numbers in the vector after the sort are:"<<endl;
    for(int i = 0; i < Pitchers.size(); i++)
    {
        cout<<Pitchers[i].GetERA1()<<" ";
    }
    cout<<endl<<endl;

    system("PAUSE");
    return 0;
}

void InsertionSort(vector<Pitcher> &Pitchers)
{
    int firstOutOfOrder = 0;
    int location = 0;
    int temp;
    int totalComparisons = 0; //debug purposes

    for(firstOutOfOrder = 1; firstOutOfOrder < Pitchers.size() ; firstOutOfOrder++)
    {
        if(Pitcher.GetERA1([firstOutOfOrder]) < Pitcher.GetERA1[firstOutOfOrder - 1])
        {
            temp = Pitcher[firstOutOfOrder];
            location = firstOutOfOrder;
            do
            {
                totalComparisons++;

                Pitcher.GetERA1[location] = Pitcher.GetERA1[location - 1];
                location--;
            }while(location > 0 && Pitcher.GetERA1[location - 1] > temp);
            Pitcher.GetERA1[location] = temp;
        }
    }
    cout<<endl<<endl<<"Comparisons: "<<totalComparisons<<endl<<endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:34:50.253

这里：

```
 for(firstOutOfOrder = 1; firstOutOfOrder < Pitchers.size() ; firstOutOfOrder++)
{
    if(Pitchers[firstOutOfOrder].GetERA1() < Pitchers[firstOutOfOrder-1].GetERA1())
    {    //^^^your way was not right, should first access the object then 
         //access member function
        temp = Pitcher[firstOutOfOrder];
                 //^^^should be Pitchers, similar errors below           
        location = firstOutOfOrder;
        do
        {
            totalComparisons++;

            Pitcher.GetERA1[location] = Pitcher.GetERA1[location - 1];
           //^^^similar error as inside if condition
            location--;
        }while(location > 0 && Pitcher.GetERA1[location - 1] > temp);
                             //^^^similar error as inside if condition
        Pitcher.GetERA1[location] = temp;
        //^^similar error as in if condition and name error
    }
} 
```

同时，您将`InsertionSort`声明作为`Pitcher`类的成员

```
 public:
       .
       .
      void InsertionSort(vector<Pitcher>&); 
```

你也在里面声明了相同的函数`main`，

```
 void InsertionSort(vector<Pitcher> Pitchers&);
                        //should be vector<Pitcher>& Pitchers
  using namespace std;
  int main() 
```

在您的情况下，可能应该删除成员函数。`InsertionSort`不是`responsibility`你的`Pitcher`班级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:45:58.503

除非这是家庭作业，否则最好使用内置排序

```
<algorithm> 
```

# java - 工厂模式是否应该包含验证逻辑

> ID：16221010
> 
> 赞同：8
> 
> 时间：2013-04-25T17:24:36.513
> 
> 标签：java, design-patterns, factory

在使用工厂模式时，工厂本身是否应该包含验证逻辑，还是应该留给调用类在传递上下文数据之前处理验证？

我有一个简单的工厂方法，但它依赖于传递给它的配置树来决定要实例化的对象。

可能存在配置 xml 格式正确的情况，但不是工厂期望的正确格式，我不知道应该在哪里验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-02T13:49:20.677

> 在使用工厂模式时，工厂本身是否应该包含验证逻辑，还是应该留给调用类在传递上下文数据之前处理验证？

组织验证有两种不同的选择：

1.  **验证作为一个单独的过程**

有一个单独的验证方法`Validate(Config)`。该方法在构造方法之前调用，返回信息是否`Config`有效。如果`Validate`方法返回`Config`有效，则调用构造方法。构建过程中的任何错误都被视为异常。

2.  **验证作为施工过程的一部分**

没有单独的验证方法。而是在需要时在构造方法内部进行验证。*允许*构造方法失败并返回构造对象或指示错误的结果。

第二个变体可以使用 monad 很好地实现，代码和性能开销几乎为零。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-02T19:07:27.367

你说的验证是什么意思？是什么让您认为作为工厂设计模式实例的一部分的代码与任何其他代码不同？

如果验证是指检查从用户或输入文件读取的输入值，答案是*否定*的：解析输入的代码负责验证，而不是随后使用读取值的工厂。

如果通过验证您的意思是让 Factory 的工厂方法检查其调用者提供的值是否符合这些方法的先决条件，那么答案与对其参数施加先决条件的任何其他方法相同：Java 的共识风格用于检查其先决条件并在`RuntimeException`不满足先决条件时抛出合适的方法。

现在，在实践中，这意味着某些输入值将被检查两次。首先是输入验证码，然后是工厂的前置条件检查。部分原因是将代码分解为模块（这里是单独的输入模块和服务层）的成本。

但它也允许检查以不同的方式报告，这更适合他们的目的。

*   失败的前置条件检查（在本例中为工厂）表明程序中存在错误。我们希望在程序状态改变之前快速而准确地报告前置条件失败，以获得最有用的调试信息（在许多情况下，错误的位置将是调用堆栈中的一个方法）。
*   对于输入验证失败，我们通常希望程序在输入的一次解析中报告尽可能多的错误，以便用户可以修复所有错误。想想你使用的编译器：如果它在你的源代码中发现第一个语法错误后停止，你会感到沮丧。抛出异常来实现这一点是不合适的。如果可能，代码应该记录错误并继续解析，而不是在程序中弹出到更高级别的部分（这是引发异常的原因）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T18:03:14.193

为什么不两者都提供？有了这个，你将责任传递给调用者，即他是否希望他的输入得到验证。

以 Apache Commons 为例 - [`InstantiateFactory`](http://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections/functors/InstantiateFactory.html)：

它的默认构造函数不提供验证：

> **InstantiateFactory(java.lang.Class classToInstantiate)**
> 
> **不执行验证**的构造函数。

但提供验证`getInstance`：

> 静态工厂**getInstance** (java.lang.Class classToInstantiate, java.lang.Class[] paramTypes, java.lang.Object[] args)
> 
> **执行验证**的工厂方法。

# visual-studio-2008 - 从外部成员类访问 MFC 对话框元素

> ID：16221015
> 
> 赞同：0
> 
> 时间：2013-04-25T17:24:46.630
> 
> 标签：visual-studio-2008, visual-c++, mfc, static, dialog

我试图从对话框类外部调用我的 MFC 对话框类的非静态函数（它获取编辑框的值并将其作为字符串返回）。

即，我有`Dlg.cpp`并且`calc.cpp`我想`getEditBoxContents()`从`calc.cpp`. 我知道要调用一个非静态函数，我应该有一个`Dlg`in的元素`calc.cpp`才能执行`aDlg.getEditBoxContents()`，但是，执行`Dlg aDlg = Dlg()`然后执行`aDlg.getEditBoxContents()`会给我带来神秘的错误（我确信这不是我应该这样做的方式）。

有人可以指点我正确的方向或给我另一种从对话框类外部获取编辑框内容的方法吗？

* * *

感谢 Nik，对我有用的解决方案是：

在非成员类中：

```
CEx3Dlg *pMainDlg = (CEx3Dlg *)AfxGetMainWnd();
pMainDlg->exp_ListBox.AddString("asd"); //Interact with GUI elements here. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:48:55.917

有问题的代码是一行，所以我们不能真正逐行分析它......让我们尝试一些更“细化”的东西：

```
Dlg aDlg = Dlg() 
```

所以，在这里我们声明了一个`Dlg`名为`aDlg`. 它是使用默认构造函数初始化的。然后我们构建一个*新*对话框（`Dlg()`右侧的部分`=`）并将其分配给我们的`aDlg`变量。

此时，我们只有一个 Dlg 对象的实例。尚未创建相应的 Windows 对话框（因为`DoModal`或`Create`尚未调用）。那么我们尝试调用`aDlg.getEditBoxContents()`. 大概这个成员函数试图获取某个编辑框的内容。但是没有我们可以获取其内容的编辑框。

在不知道您要执行的操作的详细信息的情况下，通常，您可能希望拥有如下代码：

```
Dlg aDlg;
aDlg.DoModal(); /* create and display the dialog */
aDlg.getEditBoxContents(); 
```

请注意，这`DoModal`会创建一个*模态*对话框，该对话框将阻止对程序中其他窗口的访问（这是一个过度概括，但请耐心等待；在这种情况下，细节不太可能对您产生影响）。因此，在`aDlg.getEditBoxContents()`您单击对话框上的关闭按钮、确定按钮或取消按钮之前，不会调用该函数。

不知道更多，很难提供帮助，但我希望这能给你一个起点。

# sql-server - 评估哪些行不为空并返回 INT 的函数

> ID：16221019
> 
> 赞同：0
> 
> 时间：2013-04-25T17:24:56.813
> 
> 标签：sql-server, binary, int

我正在尝试计算 SQL Server 中是否检查行的数值。我之前在客户端使用 .NET 代码完成了此操作。我正在尝试在 SQL Server 脚本中执行此操作，因为基于用户的用户为我提供了一个类似于输入表的 excel 电子表格。

星期几示例

```
Sun = 1
Mon = 2
Tue = 4
Wed = 8
Thr = 16
Fri = 32
Sat = 64 
```

输入表

```
SYSID SUN MON TUE WED THR FRI SAT
----- --- --- --- --- --- --- ---
  1    0   0   1   0   1   0   0
  2    1   1   1   1   1   1   1
  3    0   0   0   1   0   0   1 
```

期望的结果

```
SYSID DayOfWeek
----- ---------
  1      20
  2      127
  3      68 
```

无需编写 128 条案例语句或将值写入另一个表并执行 SUM 函数......我正在考虑一个函数，我传入 7 个字段的值并将它们加在一起并返回值。

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:32:38.580

如果我了解您要执行的操作，则可能会这样：

```
SELECT (CASE WHEN SUN=1 THEN 1  ELSE 0 END)
    +  (CASE WHEN MON=1 THEN 2  ELSE 0 END)
    +  (CASE WHEN TUE=1 THEN 4  ELSE 0 END)
    +  (CASE WHEN WED=1 THEN 8  ELSE 0 END)
    +  (CASE WHEN THU=1 THEN 16 ELSE 0 END)
    +  (CASE WHEN FRI=1 THEN 32 ELSE 0 END)
    +  (CASE WHEN SAT=1 THEN 64 ELSE 0 END)
    AS DayOfWeek
FROM InputTable 
```

# wpf - MVVM - 使用 ViewModel DataTemplate 在 XAML 中创建视图时出现绑定表达式错误

> ID：16221021
> 
> 赞同：1
> 
> 时间：2013-04-25T17:25:01.593
> 
> 标签：wpf, xaml, mvvm, binding, viewmodel

这是一个 WPF 应用程序。

背景：

我基本上有一个向导应用程序。通过提供 ViewModel 列表来初始化向导。这些 ViewModel 将基于我的 XAML 中的一些 DataTemplate 创建适当的视图。

在向导中单击下一个或上一个时，将设置适当的 ViewModel，并根据 DataTemplate 加载视图。

这工作正常。

问题：

当我处于暂时状态时......意味着正在加载新的 viewModel，看起来有一小段时间仍然在引用前一个 VIEW。因此，我收到一堆 BindingExpression 错误，它说它找不到一堆实际存在于 PREVIOUS viewModel 上的绑定。

摘要：我正在加载一个基于 DataTemplate 的新视图。最初加载该视图时，它似乎与实际的 viewModel 不同步。因此，我得到了一堆绑定表达式错误。

两个问题：

1.  关于如何解决这个问题的任何想法？
2.  出现这些 BindingExpression 错误有什么危险吗？

    ```
    <wiz:WizardContent.Resources>
        <!--DataTemplates for defining views for this Wizard-->
        <DataTemplate DataType="{x:Type viewModel:Step1ViewModel}">
            <view:Step1 DataContext="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}, Path=DataContext.CurrentPageVM}"/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type viewModel:Step2ViewModel}">
            <view:Step2 DataContext="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}, Path=DataContext.CurrentPageVM}"/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type viewModel:Step3ViewModel}">
            <view:Step3 DataContext="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}, Path=DataContext.CurrentPageVM}"/>
        </DataTemplate>
    </wiz:WizardContent.Resources>
    <ContentControl Content="{Binding Path=CurrentPageVM}"/> 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:44:35.400

BindingExpression 错误并不危险，据我所知，它只会稍微减慢您的应用程序。

关于您的代码，我不确定您是否需要在每个视图中定义 DataContext，因为它会自动采用 DataType 检测到的 DataContext。

# drupal-6 - 为什么我会收到验证错误？

> ID：16221025
> 
> 赞同：0
> 
> 时间：2013-04-25T17:25:54.683
> 
> 标签：drupal-6

在节点编辑页面的文件附件下，单击附加时出现以下错误： **验证错误，请重试。如果此错误仍然存​​在，请联系网站管理员**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-23T21:16:35.630

更多的权宜之计可能是：我禁用 javascript 足够长的时间来执行我的文件上传，然后重新打开它。

对于我遇到此错误的安装，模块路径上的递归 grep 在以下路径中显示此错误消息：

```
modules/upload/upload.module
includes/form.inc
sites/all/modules/ctools/includes/form.inc
sites/all/modules/views/includes/form.inc 
```

我在文件上传过程中遇到了错误，快速查看`upload.module`显示错误来自一个名为: 的函数`upload_js()`。所以我在浏览器中禁用了 javascript 并上传了我的文件，然后重新启用了 javascript。

在此之前，我确保我的用户有权限和足够的配额来上传这个 < 400kb 的文件，修改`max_file_uploads`设置并重新启动`php5-fpm/apache`。

抱怨的代码如下所示：

```
 // Load the form from the Form API cache.
  if (!($cached_form = form_get_cache($_POST['form_build_id'], $cached_form_state)) || !isset($cached_form['#node']) || !isset($cached_form['attachments'])) {
    form_set_error('form_token', t('Validation error, please try again. If this error persists, please contact the site administrator.'));
    $output = theme('status_messages');
    print drupal_to_js(array('status' => TRUE, 'data' => $output));
    exit();
  } 
```

# c - 在C中返回数组和指针？

> ID：16221030
> 
> 赞同：1
> 
> 时间：2013-04-25T17:26:25.483
> 
> 标签：c, arrays, function, pointers, return-type

我相对是 C 编程的初学者，并且对数组和指针感到非常困惑。

基本上我想要做的是将包含二进制的字符串扩展到指定的长度`len;`（即 len=8 表示`num[]=101`会产生`"00000101"`）。

有人可以帮我理解这有什么问题吗？

```
const char * extendBinary(char num[], int len) {
        char *number = &num;
        int length = len;
        int difference;
        if(strlen(*num)<len) {
            difference = len-strlen(num);
            while(difference>0)
            {
                &number = strcat("0", &number);
                difference--;
            }
        }
        return number;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:11:00.170

您的问题始于您的规范。如果我理解正确，您希望有一个函数可以传递字符数组和长度。输入字符数组的大小将介于 1 和`len`? 但是，您的函数无法知道数组的大小`num`。如果你想让它工作，你需要将你的函数定义为

```
const char * extendBinary(char *num, size_t num_len, int len); 
```

这样您的函数就不会超出 . 指向的缓冲区`num`。请注意，我替换为`char num[]`，`char *num`因为这是传递指针的常用机制。您不能将指针传递给数组，然后取消引用该指针并取回原始类型（包括其大小）——这只是 C 不允许您做的一件事，所以只需使用普通指针和单独的大小变量。

最后，除非您想要内存泄漏，否则您将不得不处理内存分配。因此，您可以简单地说，调用extendBinary 的人应该在使用完它时释放它的返回值。

```
const char * extendBinary(char *num, size_t num_len, int len) {
    char *ret = malloc(len + 1);
    int i;

    memset(ret, '0', len);
    ret[len] = 0;
    strncpy(&ret[len - num_len], num, num_len);

    return ret;
}

int main(void) {
    char arr[] = {'1', '0', '1'};
    const char *formatted = extendBinary(arr, sizeof(arr), 8);

    printf("%s\n", formatted);
    free(formatted);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:58:59.033

这是错误的。

```
strcat("0", &number); 
```

修复代码的一种奇怪方法是：

```
char temp[32] = {};

...
    ...
        while(difference>0)
        {
            strncat(temp, "0", 31 - strlen(temp));
            difference--;
        }
        strncat(temp, num, 31 - strlen(temp));
        strncpy(num, temp, len); 
```

请注意，我编写此代码只是为了帮助您了解 strcat() 的工作原理，有更好的方法来做您想做的事情。

您不能将某些内容连接到 const 字符串，您必须完全控制代码中发生的事情以及代码的编写位置。您知道源代码中指向“0”的指针在哪里吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:00:16.767

你如何设置num？如果它真的是一个字符数组而不是字符串，则不需要它以空值结尾，除非它是全局/静态的。如果你在一个函数中这样设置它：

```
char str[10];
str[0] = '1';
str[1] = '0';
str[2] = '1'; 
```

比你的 strlen 会得到什么，取决于 num 中发生的任何垃圾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T21:18:31.510

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

//case 1: for num[9]="101";
char *extendBinary1(char num[], int len) {
    int num_len = strlen(num);
    memmove(num + (len - num_len), num, num_len);
    memset(num, '0', (len - num_len));

    return num;
}

//case 2: for "101";//pointer to const char 
char *extendBinary2(const char num[], int len) {
    int num_len = strlen(num);
    char *number = calloc(len + 1, sizeof(char));
    memset(number, '0', (len - num_len));

    return strcat(number, num);
}

int main(void){
    char num[9] = "101";
    char *number = extendBinary2("101", 8);//dynamic allocate

    printf("%s\n", extendBinary1(num, 8));
    printf("%s\n", number);//free(number);

    return 0;
} 
```

# python - 将 Fabric 与 South 同步

> ID：16221038
> 
> 赞同：1
> 
> 时间：2013-04-25T17:26:58.053
> 
> 标签：python, django, migration, fabric, django-south

当我尝试使用以下代码执行`schemamigration`with south 时：

```
# coding=utf-8
from fabric.api import env, hosts, local, run, cd

def updatebd():
    local('cd /Users/gian88/Sites/www/py/WEB/web/web/ && python manage.py schemamigration principal –-auto') 
```

执行结构时出现以下错误：

> 迁移名称应仅包含字母数字字符和下划线。

使用语句`with cd`时，命令 local 无法识别语句中的 url`with cd`并显示以下错误：

```
can't open file 'manage.py': [Errno 2] No such file or directory 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T03:56:00.610

问题的解决方法是使用命令lcd，语句是这样的：

```
def updatebd():
    with lcd('/Users/gian88/Sites/www/py/WEB/web/web/'):
        local('python manage.py schemamigration principal --auto') 
```

# php - CodeIgniter DataMapper 错误：您必须使用“set”方法来更新条目

> ID：16221039
> 
> 赞同：3
> 
> 时间：2013-04-25T17:27:04.957
> 
> 标签：php, codeigniter, codeigniter-datamapper

我正在使用 codeigniter/datamapper 开发一个 inviocing 应用程序，但我遇到了一个我不明白的错误。如果我执行以下操作：

```
$i = new Invoice();    
$i->save(); 
```

然后我收到以下错误：发生数据库错误

```
You must use the "set" method to update an entry.

Filename: /Users/jim/Sites/example.com/libraries/Datamapper.php

Line Number: 1635 
```

但是我可以整天运行它而没有任何问题：

```
$i = new Invoice();    
$i->notes ='x';
$i->save(); 
```

只是想知道为什么它会这样？非常感谢任何帮助/评论。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T10:42:00.773

对于数据映射器，您必须将值分配给对象。如果对象为空，则不会保存。所以首先设置datamapper对象的值。

# sql - 在数据库中插入北欧字符

> ID：16221049
> 
> 赞同：0
> 
> 时间：2013-04-25T14:01:27.113
> 
> 标签：sql, sql-server-2012

我想在我的数据库（MS SQL 2012）中插入一些“特殊”（北欧）字符。

脚本本身是用 PHP 编写的，并建立在 CodeIgniter 之上。

这些值在进入数据库之前看起来很好，其中像**TestSæt**这样的起始值最终是**TestSÃ¦t**

如何解决这个问题？CodeIgniter 配置为使用 UTF-8，数据库排序规则为**Danish_Norwegian_CI_AS**

# events - 编译错误：过程声明与同名事件或过程的描述不匹配

> ID：16221051
> 
> 赞同：0
> 
> 时间：2013-04-25T17:27:39.010
> 
> 标签：events, vb6, picturebox

我已将整个 vb6 代码从一台机器复制到另一台机器，现在当我在另一台机器上运行我的代码时，它显示如下错误：编译错误：过程声明与具有相同名称的事件或过程的描述不匹配，这是代码 ：

```
Private Sub MKDataGrid1_KeyPress()
    If MKDataGrid1.Col = 0 Or MKDataGrid1.Col = 1 Or MKDataGrid1.Col = 2 Or MKDataGrid1.Col = 3 Then
        MKDataGrid1.AllowUpdate = False
        MsgBox "This field is not to edit. Thnks"
        MKDataGrid1.AllowUpdate = False
        cmdAdd.visible = True
        cmdAdd.SetFocus
        cmdAdd.visible = False
    Else
        MKDataGrid1.AllowUpdate = True
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T12:11:54.040

为此，我必须在我的计算机上注册 vb6datagrid.ocx，我已经在我的机器上注册了这个 .ocx，实际上我再次从旧机器上复制了我机器中的新代码，在运行它之前我打开了项目 >> 组件>> 设计师并从那里选择了需要的组件并删除了不需要的组件，然后我运行了项目，所以我再次收到错误，但是当我再次去那里查看对象时，我发现对象丢失了，所以我放置了数据网格和然后它运行良好:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T19:25:36.303

看起来你的活动声明搞砸了。一般来说，KeyPress 事件采用参数`KeyAscii As Integer`。我建议暂时重新标记您的例程，然后从代码窗口的下拉列表中手动选择 KeyPress 事件。然后将之前的内容复制回 VB 插入的 KeyPress 中。

# java - 扫描输入而不将值存储在变量中

> ID：16221053
> 
> 赞同：0
> 
> 时间：2013-04-25T17:27:40.343
> 
> 标签：java, arrays, multidimensional-array

我正在声明一个包含 100 行和列的二维数组。我试图让用户指定进入数组的数字。我应该存储值而不将它们存储在变量中。这是我到目前为止所拥有的，但我认为这是不正确的

```
 public static void main(String[] args) 
{

    Scanner scan = new Scanner(System.in);
    int [][] nums = new int[100][100];
    int digits;

    for (int i = 0; i < nums.length; ++i)
    {

        int[scan.nextInt()][scan.nextInt()];

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:30:20.737

嗯，首先，你正在处理一个二维数组，所以你需要两个循环，一个用于行，另一个用于列。

```
for(int i=0; i<100; i++)
 {
     for(int j=0;j<100;j++)
        {
               nums[i][j] = scan.nextInt();
        }
} 
```

这种语法 -`int[scan.nextInt()][scan.nextInt()];`甚至是不合法的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:29:59.003

您需要对二维`for`数组使用嵌套循环（一个用于行，一个用于列）：

```
for (int i = 0; i < nums.length; ++i)
     for (int j = 0; j < nums[i].length; ++j)
{

    nums[i][j] = scan.nextInt();

} 
```

# c++ - 100% 的数组在函数中正确，75% 的数组在 CALLING 函数中正确 - C

> ID：16221062
> 
> 赞同：1
> 
> 时间：2013-04-25T17:28:05.630
> 
> 标签：c++, c, arrays, struct, output

注意：我使用的是 c++ 编译器，因此我可以使用按引用传递

我有一个奇怪的问题，我真的不知道发生了什么。

基本上，我有一个文本文件：[http://pastebin.com/mCp6K3HB](http://pastebin.com/mCp6K3HB) ，我正在将文本文件的内容读入原子数组：

```
typedef struct{
    char * name;
    char * symbol;
    int atomic_number;
    double atomic_weight;
    int electrons;
    int neutrons;
    int protons;
} atom; 
```

这是我对原子的类型定义。

```
void set_up_temp(atom (&element_record)[DIM1])
{
    char temp_array[826][20];
    char temp2[128][20];
    int i=0;
    int j=0;
    int ctr=0;

    FILE *f=fopen("atoms.txt","r");

    for (i = 0; f && !feof(f) && i < 827; i++ ) 
    {
        fgets(temp_array[i],sizeof(temp_array[0]),f);
    }

    for (j = 0; j < 128; j++)
    {
        element_record[j].name = temp_array[ctr];
        element_record[j].symbol = temp_array[ctr+1];
        element_record[j].atomic_number = atol(temp_array[ctr+2]);
        element_record[j].atomic_weight = atol(temp_array[ctr+3]);
        element_record[j].electrons = atol(temp_array[ctr+4]);
        element_record[j].neutrons = atol(temp_array[ctr+5]);
        element_record[j].protons = atol(temp_array[ctr+6]);
        ctr = ctr + 7;
    }

    //Close the file to free up memory and prevent leaks
    fclose(f);
} //AT THIS POINT THE DATA IS FINE 
```

这是我用来读取数据的函数。当我调试这个函数并让它运行到最后时，我使用调试器检查它的内容，并且数组有 100% 正确的数据，也就是说，所有元素都是它们应该与文本文件相关的内容。 [http://i.imgur.com/SEq9w7Q.png](http://i.imgur.com/SEq9w7Q.png)这张图片显示了我在说什么。在左边，所有元素，从 0 到 127，都是完美的。然后，我进入调用它的函数。

```
atom myAtoms[118];
set_up_temp(myAtoms); //AT THIS POINT DATA IS FINE
region current_button_pressed; // NOW IT'S BROKEN
load_font_named("arial", "cour.ttf", 20); 
panel p1 = load_panel("atomicpanel.txt");   
panel p2 = load_panel("NumberPanel.txt"); 
```

只要 ANYTHING 被调用，在我调用之后`set_up_temp`，我的数组的元素 103 到 127 就会变成乱码。随着越来越多的事情被调用，更多的数组变成了乱码。这很奇怪，我不知道发生了什么......有人知道吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T17:35:59.900

```
for (j = 0; j < 128; j++)
{
    element_record[j].name = temp_array[ctr]; 
```

您正在存储然后返回指向`temp_array`堆栈上的指针。从函数返回的那一刻，*所有*的都`temp_array`变得无效——在该点之后取消引用任何这些指针是未定义的行为。正如您所说，“未定义的行为”包括您仍然可以毫无问题地读取元素 0 到 102，但 103 到 127 变成乱码的可能性。您需要为这些与`atom`对象一样长的字符串分配空间。由于您说您使用的是 C++，因此最简单的解决方法是将两个`char *`成员都更改为`std::string`. （如果您不想使用`std::string`，第二个最简单的解决方法是使用`strdup`，但是您必须`free`明确地使用该内存。）

这可能不是此代码中唯一的错误，但它可能是导致您的直接问题的错误。

如果您好奇，数据的高端被破坏的原因*是*在大多数（但不是所有）计算机上，包括您正在使用的计算机，堆栈向下增长，即从高地址到低地址。然而，数组总是从低地址索引到高地址。所以过去内存区域的高端是`temp_array`调用者中最接近堆栈指针的部分，因此最有可能被后续函数调用覆盖。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T17:33:49.680

随意检查会产生这样的结果：

```
char temp_array[826][20];

...

for (i = 0; f && !feof(f) && i < 827; i++ ) 
```

您的代码可能允许`i`成为`826`. 这意味着您正在访问`temp_array`. 这是一个过去的结束。哎呀。

此外，您正在分配一个包含 118 个原子 ( ) 的数组，`atom myAtoms[118];`但您`set_up_temp`在`for (j = 0; j < 128; j++)`循环中设置了其中的 128 个。

这个故事的寓意：注意你的索引，因为你使用 C++，所以要利用`std::vector`和`std::string`避免直接使用数组。

**更新** 正如 Zack 所指出的，您正在返回指向堆栈分配变量的指针，这些变量将在`set_up_temp`函数返回时消失。此外，`fgets`您使用的代码并没有按照您的想法执行，而且一开始就是*可怕*的代码。请阅读文档[`fgets`](http://www.cplusplus.com/reference/cstdio/fgets/)并问问自己你的代码是做什么的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T17:34:59.383

您正在为一个包含 118 个元素的空间分配一个数组，但代码设置了 128 个元素，因此覆盖了数组之后发生的任何内容。

此外，正如其他人指出的那样，您在数组中存储了指向函数临时数据的指针（禁止）。

我的建议是在编程之前先阅读[一本关于 C++ 的好书](https://stackoverflow.com/q/388242/320726)，否则你会无缘无故地让你的生活变得更艰难。C++ 不是一种您可以希望通过实验取得重大进展的语言。

# asp-classic - VBScript 运行时错误服务器映射路径未找到

> ID：16221072
> 
> 赞同：0
> 
> 时间：2013-04-25T17:28:38.833
> 
> 标签：asp-classic, vbscript, runtime-error, mapserver

当我尝试从我的 ASP 应用程序中的表单发布请求时，我收到以下错误。

Microsoft VBScript 运行时错误“800a004c”

找不到路径

/build-your-own-report/stjreport/includes/includes.inc，第 16 行

这是我的 include.inc 文件

**包括.inc**

```
<%
    thisPage = Request.ServerVariables("SCRIPT_NAME")
    thisPage = Right(thisPageName,Len(thisPage) - InStrRev(thisPage,"/"))

    session.timeout = 5
    webDir = "/stjreport"
    pdf_path = server.MapPath("/") & webDir & "/pdfs"
    tmp_path = server.MapPath("/") & webDir & "/temp"

    Function RoundUp(n)
        roundUp = Int(n) - CBool(CDbl(n) <> CLng(n))
    End Function

    Sub cleanItUp(tt) 
        set incFS = server.createobject("scripting.FileSystemObject")
    /*line 16*/    set incFO = incFS.GetFolder(tmp_path)
        for each incF in incFO.files
            'if instr(1,incF.name,".pdf",1) > 0 then
                set tmpF = incFS.GetFile(incF)
                if DateDiff("s",tmpF.DateCreated,now) > tt then incFS.deleteFile(tmpF)
            'end if
        next
        set incFO = nothing
        set incFS = nothing
    End Sub

    Function makeRandomString(incLength)
        makeRandomString = ""
        seedStr = "1,N,O,P,Q,3,W,X,Y,Z,$,4,0,A,B,C,D,E,F,8,G,H,I,J,5,6,7,9,K,L,M,R,2,S,U,V,T,"
        rndAry = Split(seedStr,",")
        rndName = ""    
        For inc = 1 to incLength
            Randomize
            iRandom = Int( UBound( rndAry ) * Rnd )
            rndName = rndName & rndAry( iRandom )
        next
        makeRandomString = rndName
    End Function    

    Sub displayMessage  (incMsg,incReturnUrl)
        if Len(incMsg) > 0 then
            Response.write("<br /><br /><p style='text-align:center; font-family:arial; font_size:larger;'>" & incMsg & "</p>")
%>
<script language="javascript">
            alert("<%=Replace(Replace(incMsg,"<br />","\n"),"<br>","\n")%>");
<%
            if Len(incReturnUrl) > 0 then
%>                      
                top.location.href = "<%=incReturnUrl%>";
<%
            else
%>
                top.history.go(-1);
<%
            end if
%>                                                  
</script>
<%
            Response.end()
        end if                      
    End Sub             

    Function isPermittedFile(incFileType,incFile)   
        incFile = replace(incFile, "\", "/")
        if inStr(incFile,"/") > 0 then
            incAry = split(incFile,"/")
            incFile = incAry(uBound(incFile)-1)
        end if
        if inStr(incFile,".") = 0 then call (displayMessage("Image file: " & incFile & " sounds not to be a recognized image format",""))
        incFileAry = split(incFile,".")
        incExt = incFileAry(1)

        Select Case LCase(incFileType)
            Case "image"
                incAllowedStr = ",gif,png,jpg,jpeg,bmp,tiff,"
            Case "document"
                'incAllowedStr = ",pdf,doc,docx,txt,rtf,doc,docx,xls,xlsx,"
                incAllowedStr = ",pdf,"
        End Select
        isPermittedFile = False
        if inStr(1,incAllowedStr,","& LCase(incExt) &",",1) > 0 then isPermittedFile = True
    End Function

%> 
```

# wpf - TextBlock TextWrapping 不换行 #2

> ID：16221073
> 
> 赞同：5
> 
> 时间：2013-04-25T17:28:42.480
> 
> 标签：wpf, xaml, textblock, word-wrap

好的......所以[这个](https://stackoverflow.com/questions/6625177/textblock-textwrapping-not-wrapping)解决方案没有帮助

XAML 在这里

```
 <ListBox  ItemsSource="{Binding Path=ContentItems}" Background="White" >
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid Margin="2" Height="Auto" Width="Auto">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid Grid.Column="0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <StackPanel Grid.Row="0" Orientation="Horizontal">
                                    <Label VerticalAlignment="Center"  Margin="0,0,0,5">Start</Label><svl:TimeEditor Value="{Binding Path=FormatedStart}" Width="87"  HorizontalAlignment="Left"  Margin="2,8"  Name="dtpStart" FontSize="12"  Height="25"  VerticalAlignment="Center"     />
                                    <Label VerticalAlignment="Center"  Margin="0,0,0,5">End</Label><svl:TimeEditor Value="{Binding Path=FormatedEnd}" Width="87"  HorizontalAlignment="Left"  Margin="2,8"  Name="dtpEnd" FontSize="12"  Height="25"  VerticalAlignment="Center"     />
                                </StackPanel>                               
                                <TextBlock Grid.Row="1"  TextWrapping="Wrap"  Name="tbText" Text="{Binding Path=Data}"></TextBlock>
                            </Grid>
                            <Grid Grid.Column="1" Visibility="Collapsed">
                            </Grid>
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-11-06T05:56:50.123

```
The following will helps for text wrapping:

<ListBox ScrollViewer.HorizontalScrollBarVisibility="Disabled"> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-25T17:56:50.683

好吧，您`TextBlock`不需要换行，因为您指定了它，即使以溢出`Width`为代价，它也可以获取适合内容所需的所有内容。您需要将列的宽度设置为“*”以允许在请求的宽度超过允许时启动，或者使用类似的绑定手动强制它`Auto``ColumnDefinition``Width``TextWrapping``MaxWidth`

```
<TextBlock Name="tbText" Grid.Row="1" MaxWidth="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListBox}}, Path=ActualWidth}" Text="{Binding Path=Data}" TextWrapping="Wrap" /> 
```

# pyephem - pyEphem - 从角度到日期

> ID：16221075
> 
> 赞同：1
> 
> 时间：2013-04-25T17:28:51.843
> 
> 标签：pyephem

我们有以下功能存在

> > > j = ehem.Jupiter('1612/12/28')
> > > 
> > > n = ephem.Neptune('1612/12/28')
> > > 
> > > 打印 j.ra、j.dec、j.mag

11:48:20.52 2:41:13.6 -1.96

我的要求有点不同我想通过提供角度来知道日期是否可能？

请回复。

谢谢哈沙德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T06:37:31.020

没有内置函数可以在给定角度的情况下找到日期。通常，当您遇到此类问题，从您需要满足的情况“倒退”到确定发生的日期时，您将需要一次又一次地尝试一次又一次，直到您摆脱困境您正在寻找的角度。

有几种众所周知的技术可用于查找函数返回给定角度的时间，此处将讨论这些技术：

[使用 pyephem 计算卫星何时穿过经度](https://stackoverflow.com/questions/15338324/using-pyephem-to-calculate-when-a-satellite-crosses-a-longitude/16121175)

您是否能够想象如何将答案中的想法应用于您自己的情况，因为您也在寻找一个特定的角度（即使它来自 PyEphem 的不同部分）？

# jquery - Jquery用一个按钮动画高度变化

> ID：16221077
> 
> 赞同：1
> 
> 时间：2013-04-25T17:29:01.220
> 
> 标签：jquery, if-statement, jquery-animate

基本上我正在做的是制作“查看更多”类型的东西。我有一小段文字描述了我从事的工作，并在段落末尾有一个按钮。我（它真的是一个链接，带有按钮样式）。当按下按钮时，div 扩展为 400px，并使用 .html() 添加额外的文本；但是当我点击“少看”按钮折叠回较小的段落和 200px div 时，什么也没有发生。

**jQuery**

```
$(document).ready(function(){
var $mottheight = $('#row-mott').height();

if ( $mottheight == 300 ) {
    $('#mott-btn-collapse').click(function(){
    $('#row-mott').animate({
        height:200
    }, 300);
    $('#mott').html('I\'ve worked on the Warren Mott High School website since September of 2011\. I am one of four student webmasters that keep the website in the best condition possible. We cannot take credit for all the coding, though. This website is run by around 40 Web Design students. As Webmaster, my job is to fix, improve, and help those students learn as they go. <a href="#" id="mott-btn" class="btn btn-mini">Less info &raquo</a>');

});
}
else if ( $mottheight < 300 ){
    $('#mott-btn').click(function(){
    $('#row-mott').animate({
        height:300
    }, 400);
    $('#mott').html('I\'ve worked on the Warren Mott High School website since September of 2011\. I am one of four student webmasters that keep the website in the best condition possible. We cannot take credit for all the coding, though. This website is run by around 40 Web Design students. As Webmaster, my job is to fix, improve, and help those students learn as they go. I\'ve worked on the Warren Mott High School website since September of 2011\. I am one of four student webmasters that keep the website in the best condition possible. We cannot take credit for all the coding, though. This website is run by around 40 Web Design students. As Webmaster, my job is to fix, improve, and help those students learn as they go. I\'ve worked on the Warren Mott High School website since September of 2011\. I am one of four student webmasters that keep the website in the best condition possible. We cannot take credit for all the coding, though. This website is run by around 40 Web Design students. As Webmaster, my job is to fix, improve, and help those students learn as they go. <a href="#" id="mott-btn-collapse" class="btn btn-mini">Less info &raquo</a>');
    });
}
else {
    return 0;
}
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T17:33:44.707

您的函数编码非常笨拙。您需要在函数内捕获高度，而不仅仅是在页面加载时，您可以组合所有点击项。

```
var $row_mott = $('#row-mott'),
    $mott = $('#mott');

$('#mott-btn-collapse').click(function(){
    var $mottheight = $row_mott.height();

    if ($mottheight == 300) {
        $row_mott.stop().animate({height:200}, 300);
        $mott.html('I\'ve worked on the Warren Mott High School website since September of 2011\. I am one of four student webmasters that keep the website in the best condition possible. We cannot take credit for all the coding, though. This website is run by around 40 Web Design students. As Webmaster, my job is to fix, improve, and help those students learn as they go. <a href="#" id="mott-btn" class="btn btn-mini">Less info &raquo</a>');
    } else if ($mottheight < 300){
        $row_mott.stop().animate({height:300}, 400);
        $mott.html('I\'ve worked on the Warren Mott High School website since September of 2011\. I am one of four student webmasters that keep the website in the best condition possible. We cannot take credit for all the coding, though. This website is run by around 40 Web Design students. As Webmaster, my job is to fix, improve, and help those students learn as they go. I\'ve worked on the Warren Mott High School website since September of 2011\. I am one of four student webmasters that keep the website in the best condition possible. We cannot take credit for all the coding, though. This website is run by around 40 Web Design students. As Webmaster, my job is to fix, improve, and help those students learn as they go. I\'ve worked on the Warren Mott High School website since September of 2011\. I am one of four student webmasters that keep the website in the best condition possible. We cannot take credit for all the coding, though. This website is run by around 40 Web Design students. As Webmaster, my job is to fix, improve, and help those students learn as they go. <a href="#" id="mott-btn-collapse" class="btn btn-mini">Less info &raquo</a>');
    }
}); 
```

**笔记：**

*   我将您的选择器转换为缓存的变量；多次使用选择器时的好习惯
*   我`.stop()`在你的动画之前添加了，以防止过度排队
*   我将动作合并到一个按钮中；这更符合个人喜好，但为了获得更一致的用户体验，使用单个“展开/折叠”按钮是非常标准化的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:35:46.230

您只运行一次点击处理程序。因此，在加载文档时，它会找到 #row-mott 高度，设置它并评估您拥有的内容。默认情况下，它是 < 300。您需要检查点击事件内部的高度，而不是之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:38:46.923

试试这个..

```
$(document).ready(function(){
    var $mottheight = $('#row-mott').height();
    $('#mott-btn-collapse').click(function(){
       if ( $mottheight == 300 ) {
     $('#row-mott').animate({
            height:200
        }, 300);
        $('#mott').html('I\'ve worked on the W...</a>');

    });
    }else if($mottheight < 300 ){
        $('#mott-btn').click(function(){
        $('#row-mott').animate({
            height:300
        }, 400);
        $('#mott').html('I\'ve worked on the Warren Mott....they go. <a href="#" id="mott-btn-collapse" class="btn btn-mini">Less info &raquo</a>');
        });
    }
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-27T22:27:10.353

我想到了。这非常简单，老实说，我不知道为什么我以前没有想到这一点。

```
 $(document).ready(function(){

   $('#mott-appended').hide();
   $('#patrick-appended').hide();

   /* Start Warren Mott High School text show/hide */

   $('#mott-btn').click(function(){
    $('#mott-appended').show('slow');
    $(this).hide('slow');
   });

   $('#mott-btn-collapse').click(function(){
    $('#mott-appended').hide('slow');
    $('#mott-btn').show('slow');
   });

   /* End Warren Mott High School text show/hide */
   /* Start Patrick Studios text show/hide */

    $('#patrick-btn').click(function(){
       $('#patrick-appended').show('slow');
       $(this).hide('slow');
    });

    $('#patrick-btn-collapse').click(function(){
       $('#patrick-appended').hide('slow');
       $('#patrick-btn').show('slow');
   });

   /* End Patrick Studios text show/hide */

}); 
```

# xslt - 在 XSLT 中调试可能的转义文本问题？

> ID：16221078
> 
> 赞同：0
> 
> 时间：2013-04-25T17:29:01.977
> 
> 标签：xslt

我有一个 XSL 模板，在两种不同的上下文中使用时会给出不同的结果。

显示缺陷的模板是：

```
<xsl:template match="*" mode="blah">
    <!-- snip irrelevant stuff -->
    <xsl:if test="see">
       <xsl:message>Contains a cross-ref. <xsl:value-of select="."/></xsl:message>
    </xsl:if>
    <xsl:apply-templates select="."/>
</xsl:template> 
```

鉴于：

```
<el>This is a '<see cref="foo"/>' cross-referenced element.</el> 
```

在一种情况下，我得到了想要的结果：

```
Contains a cross-ref. This is a ' ' cross-referenced element. 
```

（`<see/>`作为 XML 元素处理，最终与另一个模板匹配。）

但在另一种情况下，`xsl:if`不会触发，如果我用 输出内容`<xsl:message><xsl:value-of select="."/>`，我会得到：

```
This is a '<see cref="foo"/>' cross-referenced element. 
```

在我看来，在后一种行为不当的情况下，它的行为就像是被输出转义了。那有意义吗？我在吠叫错误的树吗？这是典型的复杂 XSL 情况，尝试跟踪调用堆栈很困难；我应该寻找一个特定的 XSLT 处理命令吗？

# vb.net - itextsharp 合并调整大小并取消旋转 pdf

> ID：16221079
> 
> 赞同：0
> 
> 时间：2013-04-25T17:29:04.537
> 
> 标签：vb.net, merge, resize, itextsharp, crop

我正在尝试使用 itextsharp 合并 pdf 文件。
问题是我在合并之前对单个文件应用的任何裁剪或旋转都被忽略了。所有原始文件都被裁剪和旋转为 TIFF，然后转换为 pdf，现在我终于尝试合并它们。
我希望页面大小与添加的内容相匹配，并且我申请的任何旋转都可以通过。

感谢您的帮助，
Corbin de Bruin

```
Public Function MergePDFFiles(FileList As Dictionary(Of String, String), DeleteOldFile As Boolean) As Byte()
    ' Public Function MergePDFFiles(FileList As Dictionary(Of String, String), DeleteOldFile As Boolean) As MemoryStream()
    Dim document As New Document()
    Dim output As New MemoryStream()
    Try
        Dim writer As PdfWriter = PdfWriter.GetInstance(document, output)
        writer.PageEvent = New PdfPageEvents()
        document.Open()
        Dim content As PdfContentByte = writer.DirectContent
        ' foreach
        For Each FilePath As KeyValuePair(Of String, String) In FileList
            If File.Exists(FilePath.Value) Then
                Dim reader As New PdfReader(FilePath.Value)
                Dim numberOfPages As Integer = reader.NumberOfPages
                For currentPageIndex As Integer = 1 To numberOfPages
                    document.SetPageSize(reader.GetPageSizeWithRotation(currentPageIndex))
                    document.NewPage()

                    ' you can see iTextSharp.tutorial.01 - 0403sample
                    If currentPageIndex.Equals(1) Then
                        Dim par As New Paragraph(FilePath.Key)
                        Debug.Print("FilePath.Key = " & FilePath.Key)
                        Dim bookmark As New Chapter(par, 0) With {.NumberDepth = 0}
                        document.Add(bookmark)
                    End If

                    Dim importedPage As PdfImportedPage = writer.GetImportedPage(reader, currentPageIndex)

                    Dim pageOrientation As Integer = reader.GetPageRotation(currentPageIndex)
                    If (pageOrientation = 90) OrElse (pageOrientation = 270) Then
                        content.AddTemplate(importedPage, 0, 1.0F, 1.0F, 0, 0, reader.GetPageSizeWithRotation(currentPageIndex).Height)
                    Else
                        content.AddTemplate(importedPage, 1.0F, 0, 0, 1.0F, 0, 0)
                    End If

                Next
            End If
        Next
    Catch exception As Exception
        Debug.Print("Failure")
    Finally
        document.Close()
    End Try

    If DeleteOldFile Then
        'Delete(FileList)
    End If

    Return output.GetBuffer()

End Function

    End Try

    If DeleteOldFile Then
        'Delete(FileList)
    End If

    Return output.GetBuffer() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:36:16.363

这个问题已经在 StackOverflow 上得到了一遍又一遍的回答。令人惊讶的是，没有人投票将其作为重复项关闭。

无论如何：正如我之前多次回答的那样，使用`PdfWriter`/`PdfImportedPage`合并文档是不好的做法。请阅读我写的关于 iText 的书的[第 6 章](http://www.manning.com/lowagie2/samplechapter6.pdf)，你会发现无论是谁提供你复制的代码示例都是错误的。您应该使用`PdfCopy`来合并文件，而不是`PdfWriter`!

例如，阅读以下 StackOverflow 答案：

[如何在itextSharp（dll）中保留原始旋转页面](https://stackoverflow.com/questions/15290361/how-to-keep-original-rotate-page-in-itextsharp-dll/15310558#15310558)

[如何合并多个pdf文件（在运行时生成）？](https://stackoverflow.com/questions/15925616/how-to-merge-multiple-pdf-files-generated-in-run-time/15945467#15945467)

[Itext pdf合并：pdf（文本被截断）页面外的文档溢出并且不显示](https://stackoverflow.com/questions/14770942/itext-pdf-merge-document-overflow-outside-pdf-text-truncated-page-and-not-di/14771651#14771651)

等等...

如果您接受这个答案的速度足够快，那么您可能会很幸运，在发布已经回答的问题之前不会因为没有搜索档案而被否决。

# c++ - C++ 制作控制台：绑定函数

> ID：16221081
> 
> 赞同：1
> 
> 时间：2013-04-25T17:29:13.563
> 
> 标签：c++, function, console

我目前正在用 C++ 创建一个控制台。我创建了一个类来帮助将代码中的变量和函数链接到控制台中的变量和函数。

我目前已经将它设置在哪里，如果我在代码中有一个变量，我可以在新类下重新定义它，它将对控制台可见。代码中的变量的行为仍然与以前相同。

例子：

`float var = 1.0;`

可以重新定义为

`ConsoleVar var("myVariable")<float> = 1.0;`

var 是代码中的变量名，myVariable 是您在终端中用来访问它的名称

我的问题是：

如何绑定函数，或者更具体地说，检测参数的数量和类型。我知道我可以将`ConsoleVar`类模板`void *`化为存储函数的类型，但是有没有办法让我自动检测返回类型、参数数量和参数类型？我打算把它放在图书馆里，所以我要方便使用。如果这是可能的，我真的很想知道（如果需要，我什至会进行组装）否则我对如何实现它有一些想法。

编辑：所以我认为我有一个解决方案，但我有一个问题......是否可以将可变数量的参数传递给函数。不像可变参数。

例如：我从命令行收到 3 个参数，现在我执行函数

`func(arg[1], arg[2], arg[3])`

是否可以发送可变数量的参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:37:08.153

这种模式将完成这项工作。

```
#include <typeinfo>    

// Function with 0 parameters
template< typename Ret >
void examine_function( Ret (*func)() )
{
    std::cout << typeinfo(Ret).name() << std::endl;
}

// Function with 1 parameters
template< typename Ret, typename Param1 >
void examine_function( Ret (*func)(Param1) )
{
    std::cout << typeinfo(Ret).name() << std::endl;
    std::cout << typeinfo(Param1).name() << std::endl;
}

// Function with 2 parameters
template< typename Ret, typename Param1, typename Param2 >
void examine_function( Ret (*func)(Param1, Param2) )
{
    std::cout << typeinfo(Ret).name() << std::endl;
    std::cout << typeinfo(Param1).name() << std::endl;
    std::cout << typeinfo(Param2).name() << std::endl;
} 
```

# python - 如何通过python将“±”保存在xml中？

> ID：16221083
> 
> 赞同：0
> 
> 时间：2013-04-25T17:29:15.293
> 
> 标签：python, xml, unicode, xml-parsing

我有以下 XML：

`newX.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<data>
    <country name="Liechtenstein">
    <neighbor name="Austriaą" direction="E"/>
    <neighbor name="a" direction="W"/>
</country>
</data> 
```

Python脚本：

```
# -*- coding: cp1250 -*-
import xml.etree.ElementTree as ET
xml = 'c://newX.xml'

tree = ET.parse(xml)
root = tree.getroot()
for rank in root.iter('neighbor'):
   rank.set('name', 'ą')
ET.dump(root) 
```

我正在尝试将字符“±”设置为“名称”，但出现错误：

UnicodeDecodeError：“ascii”编解码器无法解码位置 0 的字节 0xb9：序数不在范围内（128）

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T17:30:12.017

您需要使用 unicode 值。使用 unicode 文字，`u''`例如：

```
rank.set('name', u'ą') 
```

这导致：

```
<data>
    <country name="Liechtenstein">
    <neighbor direction="E" name="&#216;" />
    <neighbor direction="W" name="&#216;" />
</country>
</data> 
```

相反，您传递的是 cp1250 编码的字节，这些字节必须被解码为 Unicode，并且使用默认编解码器 ASCII 会自动发生这种情况。这不起作用，因为您的字节串包含具有十六进制值的字节`B9`（`ą`在 cp1250 编码中），这不是有效的 ASCII 值。

你可能想阅读 Python 和 Unicode：

*   [每个软件开发人员绝对、绝对必须了解 Unicode 和字符集（没有借口！）的绝对最低要求 作者](http://joelonsoftware.com/articles/Unicode.html)：Joel Spolsky

*   Python [Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)

*   Ned Batchelder 的[实用 Unicode](http://nedbatchelder.com/text/unipain.html)

# javascript - 扩展 datejs 以解析字符串 25 Apr 2013 1200

> ID：16221088
> 
> 赞同：1
> 
> 时间：2013-04-25T17:29:31.413
> 
> 标签：javascript, datejs

如何扩展[datejs](http://www.datejs.com/)以解析“2013 年 4 月 25 日 1200”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:33:04.403

我想你需要使用[`Date.parseExact`](https://code.google.com/p/datejs/wiki/APIDocumentation#parseExact)：

> `Date.parseExact ( String dateString, String formatStringOrArray ) : Date`
> 
> 使用指定的格式（字符串）或格式（数组）将指定的字符串值转换为其等效的 JavaScript 日期。字符串值的格式必须与提供的格式之一完全匹配。

**例子：**

```
Date.parseExact("25 Apr 2013 1200", "d MMM yyyy Hm"); 
```

**参考：** [https ://code.google.com/p/datejs/wiki/APIDocumentation#parseExact](https://code.google.com/p/datejs/wiki/APIDocumentation#parseExact)

# java - JTabbedPane 中的 AWT TextArea 视觉错误

> ID：16221089
> 
> 赞同：0
> 
> 时间：2013-04-25T17:29:39.867
> 
> 标签：java, swing, textarea, awt, jtabbedpane

```
JTabbedPane main_tabbedPane = new JTabbedPane( JTabbedPane.TOP );
main_tabbedPane.setBorder( new EmptyBorder( 0, 0, 0, 0 ) );
main_tabbedPane.setBounds( 10, 76, 665, 473 );
main_tabbedPane.setVisible(false);

main_content.add( main_tabbedPane ); // main_content is a jpanel 
```

然后我调用一个扩展 JPanel 的类构造函数

```
alphaStarter_tab = new AlphaStarterPnl(); 
```

其中有一个 TextArea（来自 Java AWT 而不是 JTextArea）

```
public class AlphaStarterPnl extends JPanel {

 private TextArea outputTxtA;

 public AlphaStarterPnl(){

  outputTxtA = new TextArea("",4,50,TextArea.SCROLLBARS_VERTICAL_ONLY);
  outputTxtA.setFont(new Font("Tahoma", Font.PLAIN, 13));
  outputTxtA.setEditable(false);
  outputTxtA.setBackground(new Color(179,190,201));
  outputTxtA.setForeground(new Color(34,64,132));
  outputTxtA.setBounds(15, 133, 630, 300);
  add(outputTxtA);

 }
} 
```

然后我将这个面板（它比粘贴的代码有很多，但这并不重要）添加到选项卡式窗格中

```
main_tabbedPane.addTab( "Copy Files", null, alphaStarter_tab, null ); 
```

当我这样做时，尽管 main_tabbedPane 已设置为 setvisible false，但 TextArea 会弹出，不仅如此，它还出现在三个地方。（可能在 0,0 坐标处出现一次，然后在设置的 x,0 坐标处出现，然后在设置的 x,y 坐标处出现。当我在程序中继续时，当第二个选项卡出现时，这种“丑陋内容的闪光”消失了添加。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T04:25:22.063

这里的问题可能是您混合了轻量级组件（例如，JTabbedPane 等 Swing 组件，带有“J”前缀的组件）和重量​​级组件（例如 TextArea 等 AWT 组件）。一起使用这两种类型的组件可能会导致渲染问题。

# opengl-es - OpenGL ES 2.0：glUseProgram 与 glUniform 性能

> ID：16221092
> 
> 赞同：2
> 
> 时间：2013-04-25T17:30:10.510
> 
> 标签：opengl-es, shader

哪个更快，一次调用`glUseProgram`，或通过（批量或单独）发送例如 6 个左右的浮点数`glUniform`，大约多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T02:34:59.017

您能否更详细地描述您认为这会影响渲染管道性能的场景？它们提供了完全不同的功能，我不明白为什么你会关心 glUseProgram 与 glUniform 的性能。

现在让我们分析一下当你使用这个函数来了解它们的成本时会发生什么。

当您调用 glUseProgram 时，它会更改几个 OpenGL 渲染状态，因为我们将使用附加到程序对象的新着色器。规范说，当您调用此函数时，顶点和片段程序会安装在处理器中。仅此一项似乎就足以掩盖 glUniform 的成本。此外，当您安装新的顶点和片段程序时，渲染管道的其他状态会更改以适应程序使用的纹理单元数量和数据布局。

glUniform 将数据从内存的一个位置复制到另一个位置以指定统一变量的值。最坏的情况是复制看起来没有 glUseProgram 复杂的矩阵。

但最终，这一切都取决于您使用 glUniform 传输的数据量和 glUseProgram 的底层实现（它可以由驱动程序进行超级优化并且成本非常低），以及您的引擎是否足够智能以将几何图形使用相同的程序并在不改变状态的情况下绘制它。

# asp.net - HTTPS：当用户登录或注册时，我如何加密_only_密码_only_？

> ID：16221096
> 
> 赞同：0
> 
> 时间：2013-04-25T17:30:16.170
> 
> 标签：asp.net, security, encryption, ssl, https

假设我有一个如下所示的登录 Web 表单：

**用户 ID**：测试用户

**密码**：ThisIsStrongPwd

[登录]（按钮）

现在，我要做的就是在用户单击 [LOGIN] 按钮时加密密码（使用行业公认的安全措施）。

我知道 SSL 会加密整个 POST，对吧？这些步骤将类似于：

1.  用户输入 ID 和密码。
2.  用户单击 [LOGIN] 按钮 信息被安全地发布到 Web 服务器。 - - 如何？
3.  服务器端检查用户发布的密码与数据库中的（散列）密码。
4.  服务器将其 default.aspx 页面或 index.htm 页面或未加密（非 SSL）URL 上的任何内容返回给用户。

没有必要对会话的其余部分进行加密——而且可能很慢。例如，您将如何使用 ASP.NET 来做到这一点？还是 ASP.NET MVC？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:25:12.237

> ..我想做的就是加密密码（使用行业认可的安全措施）..

对于您的用例，SSL 是唯一被行业接受的安全措施。有一些方法可以在不需要 ssl 的情况下从浏览器加密和发送表单数据，例如[jCryption](http://www.jcryption.org/)。但它们不能替代 SSL。阅读这个[被认为是有害的 Javascript 密码学](http://www.matasano.com/articles/javascript-cryptography/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:58:02.947

这在您将接受您（服务器）不知道的用户的应用程序中是不可能的。您面临的基本问题是需要共享一个秘密，该秘密将使您能够加密和解密其他人无法读取的信息。

如果没有协商该秘密的过程，*您就无法安全地进行通信*。协商该秘密是 SSL/TLS 的关键特性之一。

阅读 TLS 的历史和实现可能会很有用，以了解为什么有必要拥有一个完全安全的通道。您可能也有兴趣了解会话劫持，这是一种第三方可以“窃取”在 SSL 会话之外公开的登录令牌的机制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T17:37:41.020

SSL 用于加密传输层，它不是加密特定值的工具。页面的所有请求和响应都是加密的，这是确保页面安全的关键。

您只能从安全的页面安全地发送数据。如果您仅以一种方式加密数据，那么您将从不安全的页面发送数据。有人可能截获了该页面并在其中添加了在加密之前窃取密码的代码。

# c++ - 两个 time_point 实例之间的差异不是持续时间吗？

> ID：16221104
> 
> 赞同：24
> 
> 时间：2013-04-25T17:31:25.640
> 
> 标签：c++, g++, chrono

我不明白为什么这段代码会被 g++ 4.7.2 阻塞：

```
#include <chrono>

main ()
{
    std::chrono::system_clock::time_point t1, t2 ;
    std::chrono::seconds delay ;

    t1 = std::chrono::system_clock::time_point::max () ;
    t2 = std::chrono::system_clock::now () ;
    delay = t1 - t2 ;
    // t1 = t2 + delay ;
    // t1 = t2 - delay ;
} 
```

出现错误：

```
test.cc: In function ‘int main()’:
test.cc:10:18: error: no match for ‘operator=’ in ‘delay = std::chrono::operator,<std::chrono::system_clock, std::chrono::duration<long int, std::ratio<1l, 1000000l> >, std::chrono::duration<long int, std::ratio<1l, 1000000l> > >((*(const std::chrono::time_point<std::chrono::system_clock, std::chrono::duration<long int, std::ratio<1l, 1000000l> > >*)(& t1)), (*(const std::chrono::time_point<std::chrono::system_clock, std::chrono::duration<long int, std::ratio<1l, 1000000l> > >*)(& t2)))’ 
```

在我看来，“time_point - time_point”给出了一个“持续时间”。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-25T17:47:35.747

它确实会产生一个持续时间，但有不同类型的持续时间。[`std::chrono::duration`](http://en.cppreference.com/w/cpp/chrono/duration)在表示类型和单位比率上进行模板化。`std::chrono::seconds`例如，单位比率为 1，而`std::chono::nanoseconds`单位比率为`std::nano`，或 1/1000000000。时间点具有相同的模板参数。

的具体单位比例由`std::chrono::system_clock::time_point`实现定义，但几乎可以肯定小于`std::chrono::seconds`。因此，减去这两个时间点产生的持续时间比用 表示的精度要高得多`std::chrono::seconds`。默认行为是不允许使用具有整数表示的持续时间失去精度的分配。因此，您可以使用具有足够精度的持续时间 ( `std::chrono::system_clock::duration`) 或将结果转换为您想要的持续时间 ( `std::chrono::duration_cast<std::chrono::seconds>(...)`)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T17:43:16.290

`time_point - time_point`确实返回 a `duration`，而不是代码中的那个。您可以替换`std::chrono::seconds`为`std::chrono::system_clock::duration`，或者您可以使用 a`duration_cast`转换为您需要的类型。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-25T17:49:05.583

两个时间点之间的差异确实是一个持续时间；但是您不能将一种持续时间类型隐式转换为另一种，因为这可能会默默地失去精度。

如果您想从 to 降低精度`system_clock::duration`，`seconds`则需要使用 a 进行显式转换`duration_cast`：

```
delay = duration_cast<std::chrono::seconds>(t1 - t2); 
```

或者，您可能希望保留系统时钟的精度：

```
auto delay = t1 - t2; // Probably microseconds, or nanoseconds, or something 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-23T15:15:21.337

如果转换的结果可能是实数，编译器不允许您转换为整数持续时间。您正在使用`std::chrono::seconds`定义为的类型`duration<*at least 35 bits integer*, ratio<1> >`。尝试使用带浮点的持续时间：

```
duration<double, 1> delay; // or duration<double> delay;
delay = t1 - t2; 
```

或其他人提到的一些 duration_cast 。

# asp.net-mvc - 如何在另一个表单值提交中获取表单值

> ID：16221107
> 
> 赞同：0
> 
> 时间：2013-04-25T17:31:32.283
> 
> 标签：asp.net-mvc, asp.net-mvc-3, forms, razor

我有第一种形式的用户名和密码，并以另一种形式检索密码，我希望在提交第二种形式时以第一种形式输入用户名。

```
 @model Network.Models.LoginDetail

    <script type="text/javascript">

    </script>
    @{
        ViewBag.Title = "Index";
        Layout = "~/Views/Shared/_Layout.cshtml";
    }
    <p>
        Please enter your user name and password. @Html.ActionLink("Register", "Register") if you don't have an account.
    </p>

    @using (Html.BeginForm("Index","Student",FormMethod.Post)) {
     <div>
            <fieldset>
                <legend>Account Information</legend>

                <div class="editor-label">
                @Html.LabelFor(model => model.Username)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Username)
                @Html.ValidationMessageFor(model => model.Username)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.Password)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Password)
                @Html.ValidationMessageFor(model => model.Password)
            </div>
            <p>
            <input type="submit" value="Log in" style="width: 200px"/>
            </p>
            @ViewBag.Message
            </fieldset>
             </div>
            }
            @using (Html.BeginForm("RetrievePassword","Student",FormMethod.Post)) {
            <p>
            Forgot password? <input type="submit" onclick="updateUsername();"value="Click Here" style="width: 150px"/> Entering your username to retrieve your password.
            </p>
            @Html.HiddenFor(model => model.Username)
        } 
```

我们如何才能做到这一点，我尝试在隐藏字段中捕获用户名的 javascript 但不起作用。或者可以使用形式中的形式来实现这一点。请提供解决方案。

谢谢，

迈克尔德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:53:28.383

在“Student”控制器中的“Index”操作的 post 方法中，您将能够以 formcollection 或 LoginDetail 对象形式获取值。

**例子：**

```
public ActionRestult Index(FormCollection FC)
{
   string UserName = FC["Username"];
   string Password = FC["Password"];
} 
```

**或者**

```
public ActionRestult Index(LoginDetail obj)
{
   string UserName = obj.Username;
   string Password = obj.Password;
} 
```

这将解决您的担忧。

# php - 下拉中的javascript负数

> ID：16221108
> 
> 赞同：0
> 
> 时间：2013-04-25T17:31:32.443
> 
> 标签：php, javascript

当我点击特定用户的“编辑”链接时，它应该告诉我他/她还剩下多少假期......编辑链接是这样的：

```
print "<a href=\"javascript:editUser('$data[uid]','$data[vacationdays]')\">Edit</a>\n"; 
```

因此，当我在 ADMIN 帐户上单击 EDIT 时： javascript:editUser('Admin','-3.0') 是实际值

的JavaScript：

```
<script language="javascript">
    function editUser(uid, vacationdays) {
    document.userForm.uid.value = uid;
    document.userForm.vacationdays.value = vacationdays;
    document.location.href = "#AddEdit";
    }
</script> 
```

网站 PHP/HTML：

```
Vacation days: <select name="vacationdays" id="vacationdays" />
               <?php 
               for ($i=-30.5;$i<30.5;$i+=0.5)
               echo "<option value=\"$i\">$i</option>\n";
               ?>
               </select> 
```

问题仅在于表单下拉菜单中未显示负数（-1 或 -2...等）。正数显示没有问题。

正数示例： ![在此处输入图像描述](https://i.stack.imgur.com/inzr6.png)

负数示例：![在此处输入图像描述](https://i.stack.imgur.com/jMnAN.png)

****我不希望能够从下拉列表中选择负值..但如果该值为负我只想显示一次并且当您单击下拉列表时您只能选择正数** **

如果我将下拉菜单更改为 TEXTFIELD，它在负数的情况下工作得很好……奇怪吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:35:25.843

只需将负数添加到您的列表中：

```
function vacationdays_list() {
    for ($i=-30.5; $i<30.5; $i+=0.5)
        echo "<option value=\"$i\">$i</option>\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:33:16.283

为 -30.5 到 0 之间的负数生成列表

```
 for ($i=-30.5;$i<0;$i+=0.5)
    echo "<option value=\"$i\">$i</option>\n"; 
```

为 -30.5 到 +30.5 之间的数字生成列表

```
 for ($i=-30.5;$i<30.5;$i+=0.5)
    echo "<option value=\"$i\">$i</option>\n"; 
```

如果您希望始终选择为正数，您可以在 php 或JavaScript中使用 Absolute `abs()` [http://php.net/manual/en/function.abs.php](http://php.net/manual/en/function.abs.php)`Math.abs`

为 -30.5 到 +30.5 之间的数字生成列表，该负数被禁用

```
for ($i=0;$i<30.5;$i+=0.5)
    echo "<option value=\"$i\" >$i</option>\n";  
for ($i=-30.5;$i<0;$i+=0.5)
    echo "<option value=\"$i\" disabled>$i</option>\n"; 
```

编辑：

```
 Vacation days: <select name="vacationdays" id="vacationdays" />
           <?php 
           for ($i=30.5;$i>0;$i-=0.5)
              echo "<option value=\"$i\" >$i</option>\n";  
           for ($i=0;$i>-30.5;$i-=0.5)
              echo "<option value=\"$i\" disabled>$i</option>\n";  
           ?>
           </select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:18:40.710

你不需要`echo`你的功能，所以它应该是

```
Vacation days: <select name="vacationdays" id="vacationdays" />
               <?php vacationdays_list(); ?>
               </select> 
```

对于负数

```
function vacationdays_list() {
    for ($i=-30.5; $i<30.5; $i+=0.5)
        echo "<option value=\"$i\">$i</option>\n";
} 
```

# opencart - Opencart 的管理员中未显示订单（authorize.net 和 v1.5.5.1）

> ID：16221113
> 
> 赞同：0
> 
> 时间：2013-04-25T17:31:47.960
> 
> 标签：opencart, e-commerce, authorize.net

我和我的团队正在尝试完成电子商务构建，但我们在 Opencart v1.5.5.1 上的订单处理遇到了障碍。

我们目前使用 authoize.net 作为我们的支付网关。订单正在处理中（反映在测试信用卡和 authorize.net 交易网关上）

但是，当订单下达时，它会自动发送到订单下的“缺失订单”变量，而不是您正常的“待处理”状态。

我们可以进去手动更改订单，但这不会与客户一起飞行。目标是让这些自动显示为“待处理”。显然，这是 opencart 和 authorize.net 的常见问题（请参阅[http://forum.opencart.com/viewtopic.php?f=20&t=79388&p=347416#p347416](http://forum.opencart.com/viewtopic.php?f=20&t=79388&p=347416#p347416)），但他们建议的解决方案并没有奏效。

有没有其他人遇到过 Opencart 1.5.5.1 的这个问题，你是如何解决的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:01:40.040

I guess the problem is within the configuration of the `authorize.net` payment gateway. Did You set the order status within administration of the authorize.net payment gateway correctly?

![authorize.net administration](https://i.stack.imgur.com/fCE6Q.png)

Default status is *Canceled* (which is weird) so set it to *Pending*. After the payment was successfully processed this order status is used (see `catalog/controller/payment/authorize_aim.php` at lines 136-166).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T20:12:42.437

我已经有一段时间了同样的错误。我重新上传了以下文件，它对我有用。

听起来您的文件需要更新

代码：选择所有目录/控制器/帐户/login.php 我也会上传一个新的

代码：选择所有目录/模型/帐户/customer.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T16:49:19.277

这实际上是一个非常容易解决的问题。您需要做的就是转到 OpenCart Authorize.net mod 的设置并输入 MD5 哈希。将其复制到 authorize.net 帐户，点击获取 API 交易密钥旁边的设置，那里有更新 MD5 哈希的链接。点击那个；粘贴您从 opencart 复制的 MD5 哈希并保存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-11T15:32:12.853

您可以在系统/本地化/订单状态中手动添加状态。

# xhtml - 什么是 XHTML 的“可扩展”？

> ID：16221115
> 
> 赞同：0
> 
> 时间：2013-04-25T17:31:54.510
> 
> 标签：xhtml

为什么 XHTML 被称为“eXtensible”（`X`in `XHTML`）？作为个人 Web 开发人员，我们真的可以扩展它吗？

它与普通 HTML 有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:43:01.743

嗯，首先，事情发生了一些变化，XHTML 不再是真正的东西了。HTML5 不被解析为 XML，当然 XHTML 2.0 也被取消了。

尽管如此，如果您使用`application/xhtml+xml`mimetype，也可以使用 XHTML，但请注意它的各种缺点（任何错误 = 黄屏死机，较旧的 IE 根本不呈现任何内容）。

对于一个新项目，使用 HTML5 文档类型并作为`text/html`. XHTML 可以被认为是失败的原因有很多。

无论如何，使用 XHTML 你可以做这样的事情：

```
<!DOCTYPE html SYSTEM "http://example.com/my-xhtml-custom.dtd">
<html xmlns='http://www.w3.org/1999/xhtml' xmlns:custom="http://example.com/" xml:lang='en-US'> 
```

然后复制[http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd](http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd)并按照您喜欢的方式对其进行编辑，并将其放在我们之前引用的位置。

w3c 对此有很多话要说，特别是：

> 不要这样做！文档需要具有含义以及正确的语法。SGML 和 XML 只定义语法。HTML 和 XHTML 定义了含义。如果您添加了标准未定义的元素，那么只有您自己知道它们的含义。再过 20 年或 50 年，可能连你自己都不知道了……</p>
> 
> 当然，您可以进行试验，例如研究未来的 Web 格式，但除此之外，您不应使用专有元素。

如今，幸运的是，我们有了 HTML5，它丢弃了所有这些 XML 内容（没有人使用它，它增加了很多复杂性）。它不能以相同的方式扩展，但这可能是一件好事！

# r - labeller = label_parsed 和粗体

> ID：16221116
> 
> 赞同：1
> 
> 时间：2013-04-25T17:31:57.370
> 
> 标签：r, ggplot2

我正在使用 ggplot2 进行绘图，其中我想要带有数学符号的条带名称。为此，我使用

```
facet_grid( factor1~ factor2, labeller = label_parsed) 
```

但我也想要粗体的名字。问题是，一旦我使用了 label_parsed 选项，我就无法使用

```
theme( strip.text.x = element_text(face="bold")) 
```

它不起作用。

例子：

```
var_a <- 1:20

var_b <- 2:21

factor_a <- factor ( rep (c("a1","a2"), each = 10))
factor_b <- factor ( rep (c("b"), each = 20))

data <- data.frame (factor_a,factor_b,var_a,var_b)

## Change the name of the levels of factor_a 

data$factor_a <- factor(data$factor_a, labels = c("a"~"4"^"3","a2"))

## plot 1

ggplot (data, aes (var_a, var_b)) +

  geom_point () + 

  facet_grid (factor_a ~ factor_b, labeller = label_parsed) + 

  ggtitle(expression("Plot"^"exponent")) +

  theme (

    plot.title = element_text(face="bold"),
    strip.text.x = element_text(face="bold"),
    strip.text.y = element_text(face="bold")

    )

## plot 2

ggplot (data, aes (var_a, var_b)) +

  geom_point () + 

  facet_grid (factor_a ~ factor_b, labeller = label_parsed) + 

  ggtitle(expression(bold("Plot"^"exponent"))) +

  theme (

    plot.title = element_text(face="bold"),
    strip.text.x = element_text(face="bold"),
    strip.text.y = element_text(face="bold")

  ) 
```

在情节 1 中，我既不能使带状文字也不能使标题加粗。但在情节 2 中，我可以将标题设为粗体。

¿ 如何使用数学符号使剥离文本变为粗体？

# shell - 从文件中读取浮点数并将它们添加到 unix shell 脚本中

> ID：16221117
> 
> 赞同：0
> 
> 时间：2013-04-25T17:31:57.917
> 
> 标签：shell, unix

我有一个文件 temp.txt。浮点值存在于其中。

```
cat temp.txt

43.51
26.52
63.31
21.36
1.01
13.91
19.64
30.98 
```

我想添加这些值。

请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:54:24.587

试试这个简短的变体

```
paste -sd+ temp.txt|bc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:36:52.710

```
awk '{s+=$0}END{print s}' tmp.txt

kent$  echo "43.51
26.52
63.31
21.36
1.01
13.91
19.64
30.98"|awk '{s+=$0}END{print s}'
220.24 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:42:38.137

这是一个基于“bc”的版本：

```
#!/usr/bin/env bash
tally=0
while read value
do
    tally=`echo "scale=3;${value} + ${tally}" | bc`         
done < tmp.txt 
```

其中 tmp.txt 包含：

```
43.51
26.52
63.31
21.36
1.01
13.91
19.64
30.98 
```

运行输出为：

```
 ./script-math 
220.24 
```

可以修改为：

```
#!/usr/bin/env bash
tally=0
while read value
do
    tally=`echo "scale=3;${value} + ${tally}" | bc`         
done 
```

这样您就可以：

```
cat tmp.txt | ./script-math 
```

# linux - 制作文件问题：每一行都有错误

> ID：16221119
> 
> 赞同：5
> 
> 时间：2013-04-25T17:32:00.257
> 
> 标签：linux, gcc, makefile

我尝试建立一些项目的库。当我从终端将其作为 ./MakeFile 运行时，每一行都会出现一堆错误。下面是makefile和错误。它有什么问题？对于其他项目 Makefie 工作正常，所以并​​不是系统不知道如何解释这个文件。谢谢！

```
LIBDIR = ../../lib

IFLAGS = -I../../include -I/usr/local/include

CFLAGS = $(IFLAGS) -O3 -Wunused -m32 #-fPIC

CC = gcc

AR = ar

SRC =   allocfailed.c cleanup.c ECDFwd.c ECDLeadField.c ECDSolve.c ECDSolve2.c \
    GetBasis.c  GetCoeffs.c GetHull.c NLeadField.c NSolveFwd.c NSolveWts.c \
    rnynm.c xbd.c xlubksb.c xludcmp.c

OBJ =   $(SRC:.c=.o)

all:    liblfu.a

liblfu.a: $(OBJ)
    $(AR) cr liblfu.a $(OBJ)
    @mkdir -p $(LIBDIR)
    mv liblfu.a $(LIBDIR)

clean:
    /bin/rm -rf *.o *.il *.a core

./Makefile: line 1: LIBDIR: command not found
./Makefile: line 3: IFLAGS: command not found
./Makefile: line 5: IFLAGS: command not found
./Makefile: line 5: CFLAGS: command not found
./Makefile: line 7: CC: command not found
./Makefile: line 9: AR: command not found
./Makefile: line 11: SRC: command not found
./Makefile: line 15: SRC:.c=.o: command not found
./Makefile: line 15: OBJ: command not found
./Makefile: line 17: all:: command not found
./Makefile: line 19: OBJ: command not found
./Makefile: line 19: liblfu.a:: command not found
./Makefile: line 20: AR: command not found
./Makefile: line 20: OBJ: command not found
./Makefile: line 20: cr: command not found
./Makefile: line 21: LIBDIR: command not found
./Makefile: line 21: @mkdir: command not found
./Makefile: line 22: LIBDIR: command not found 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T17:34:22.947

您正在将 make 文件作为脚本运行，只需键入`make`

make 命令将 Makefile（或 makefile）作为默认输入。它不可运行。

您可以通过添加使其可运行（假设 make 在 /usr/bin 中）

```
#!/usr/bin/make -f 
```

作为文件的第一行

# jquery - JScrollPane 导致 HTML5 音频自动暂停

> ID：16221120
> 
> 赞同：0
> 
> 时间：2013-04-25T17:32:00.587
> 
> 标签：jquery, html, jscrollpane, html5-audio, jquery-jscrollpane

使用 JScrollPane ( [http://jscrollpane.kelvinluck.com/index.html#support](http://jscrollpane.kelvinluck.com/index.html#support) ) 和 HTML5 Audio 标签时遇到一个奇怪的问题。简而言之：

我有一个使用 Jscrollpane 的 div。div 包含 html5 音频。我播放 html5 音频。然后我在 Jscrollpane 上调用 destroy。调用 destroy 后，html5 音频停止播放。同样，如果我正在播放 html5 音频并在父 div 上初始化 Jscrollpane，则 html5 音频将停止播放。

什么可以解释这种行为？我知道它与 html5 音频特别有关，因为当我使用 flash 而不是 html5 播放音频时，不会发生此问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:58:17.440

我猜这是因为音频节点是 jScrollPane 正在修改的父 DOM 节点的子节点。所以正在播放的音频节点被销毁，一个全新的节点被插入到 DOM 中。

# javascript - 在 Internet Explorer 中运行大型（使用大量内存的）Mocha 测试套件有什么技巧吗？

> ID：16221123
> 
> 赞同：2
> 
> 时间：2013-04-25T17:32:20.413
> 
> 标签：javascript, internet-explorer, mocha.js

我的公司已经为我们的应用程序建立了一个很棒的大型（472 和不断增长的）Mocha 测试套件，它非常有用……在 Chrome 和 Firefox 中。

然而，在 IE 中，测试在 30 次左右的测试后出现故障，并出现“错误：堆栈空间不足”。所以，我的问题是......好吧，我真的有两个问题，主要的和备用的：

1）有没有办法让IE运行整个套件，也许通过在某处调整一些配置选项来给它更多内存？我知道 IE 通常不擅长这种事情，但如果 Firefox 和 Chrome 可以做到，我必须希望有一些方法可以让 IE 也能做到......

2）如果失败了，摩卡有没有一个好办法说“运行测试 1-25，现在运行测试 26-50，等等”，或者我只需要使用 grep 选项来尝试限制测试的数量跑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:54:35.320

我想我应该在来这里之前多花点时间在谷歌上搜索一下。我最终找到了这张票：

[https://github.com/visionmedia/mocha/issues/502](https://github.com/visionmedia/mocha/issues/502)

这解释了：

1.  这基本上是 Mocha 中的错误：他们正在使用某种机制来清除堆栈，但该机制在 IE 中不起作用，因此他们需要切换到其他机制（截至 4 月 25 日还没有/2013）。

2.  一个（非常脏/hacky，但功能强大）的解决方法是`beforeEach`在测试套件的根级别添加以下内容（以便它适用于所有测试）：

    beforeEach(function(done){ window.setTimeout(done, 0); });

# sas - 通过 EG Report Builder 格式化 SAS 报告

> ID：16221124
> 
> 赞同：1
> 
> 时间：2013-04-25T17:32:27.167
> 
> 标签：sas, enterprise-guide

我是 SAS 新手，我从 EG 开始。我正在尝试在报告中的几个项目周围添加边框，以便将它们分组。例如，在我的[模型](http://i.imgur.com/4j9h43D.png)中， 三个列表报告组合成左侧的一个部分，两个饼图组合成右侧的另一个部分。

我知道您可以通过 EG 中的修改报告按钮来排列表格和图像，但我真的希望能够在相关表格或数字组周围设置边框。

# php - 在php中插入带有特殊字符的查询

> ID：16221125
> 
> 赞同：1
> 
> 时间：2013-04-25T17:32:26.557
> 
> 标签：php

这是我的代码

```
<?php

$con    =   mysql_connect('localhost','test','test');
mysql_select_db('test',$con);

require_once("xml2json.php");

$testXmlFile = 'mytest.xml';

$xmlStringContents = file_get_contents($testXmlFile); 
$jsonContents = "";
$jsonContents = xml2json::transformXmlStringToJson($xmlStringContents);
$obj =json_decode($jsonContents);
$rows = array();
foreach($obj->rss->channel->item as $item) {

     echo $item->title."\n";
     echo $item->description."\n";
     $rows[] = "('".mysql_real_escape_string($item->title)."','".mysql_real_escape_string($item->description)."')";
} 
        $del_horoscope = "delete from jos_horoscope";
        mysql_query($del_horoscope);

        $query = mysql_real_escape_string("INSERT INTO `jos_horoscope` (`title`,`description`) VALUES ".implode(', ',$rows));
        mysql_query($query);

  if (!mysql_query($query)) echo 'Oh no! Something went wrong with the query: '.mysql_error();

?> 
```

我无法在数据库中插入标题和描述。它总是说

```
Oh no! Something went wrong with the query: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '\'What\'s special today for you\',\'Your birth on the 25th day of the month (7 e' at line 1 
```

我试图插入的一些数据是

```
What's special today for you
Your birth on the 25th day of the month (7 energy) modifies 
your life path by giving you some special interest in technical,
 scientific, or other complex and often hard to understand subjects.
 You may become something of a perfectionist and a stickler for
 details. Your thinking is logical and intuitive, rational and responsible.
 Your feelings may run deep, but you are not very likely to let them
 show. This birthday makes you a more private person, more 
introspective and perhaps more inflexible.
Aries Horoscope for Thursday, April 25, 2013
Although most of us when we make a decision we don`t have to worry what it will impact for the world we live in, but when you make a decision we have to remember that it does impact our society in so many ways. Our choice has to be an ethical one, regardless of the outcome. Your emotions are brought into more conscious focus these few days. You may find that you can more easily communicate your feelings at this time. 
```

第一行是标题，其余的是描述，直到白羊座星座。之后另一个标题开始。请帮我 。我尝试了很多选择，但它不适合我

这是我的表结构

![](https://i.stack.imgur.com/xwRhm.png)

请帮我 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:51:06.253

您多次转义查询，这是正确的方法：

```
foreach($obj->rss->channel->item as $item) {
     $rows[] = "('".mysql_real_escape_string($item->title)."','".mysql_real_escape_string($item->description)."')";
} 
```

现在你不需要再次逃避它：

```
$query = "INSERT INTO `jos_horoscope` (`title`,`description`) VALUES ".implode(', ',$rows);
mysql_query($query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:55:16.887

首先，您不想转义实际的 INSERT 字符串。只是您要插入的值。

```
$query = mysql_real_escape_string("INSERT INTO `jos_horoscope` (`title`,`description`) VALUES ".implode(', ',$rows)); 
```

是你目前正在做的事情。只需转义您要插入的每个值。这将我们引向下一个问题。如果多次运行，您`$rows[]`在循环内构建的数组的`foreach`格式不正确。`foreach`您的插入应该在 foreach 内。并且只是报废阵列。

```
foreach($obj->rss->channel->item as $item) {
 echo $item->title."\n";
 echo $item->description."\n";
 $title = mysql_real_escape_string($item->title);
 $description = mysql_real_escape_string($item->description);

$query = "INSERT INTO `jos_horoscope` (`title`,`description`) VALUES ('$title', '$description')";
mysql_query($query);
} 
```

然后我不确定删除查询的用途。

# vb.net - 如何根据数据行子字符串对 VB.NET DataView 进行排序？

> ID：16221128
> 
> 赞同：1
> 
> 时间：2013-04-25T17:32:42.217
> 
> 标签：vb.net, substring, dataview

我有这个：

```
Dim strS As String = ""
Dim strRowFilter As String = "SID=" & strSID
Dim dv As DataView = objDataSet.Tables(1).DefaultView
dv.RowFilter = (strRowFilter)
dv.Sort = ("RIGHT(SName, CHARINDEX(' ', REVERSE(' ' + RTRIM(SName))) - 1)")
For Each objDataRow As DataRow In dv
            'build strS
        Next

Return strS 
```

`SName`是一个格式字符串`Firstname Midname Lastname`（中间名可选），我需要按`Lastname`. 我知道有像“Mike St. Cloud”这样的特殊情况，但我可以按最后一个词排序。上面的代码给了我`System.IndexOutOfRangeException occurred: Cannot find column RIGHT(SName.`

我从[this](https://stackoverflow.com/a/13610627/1810544)中得到了排序术语，它`ORDER BY`在 SQL Server 中工作。我对此一无所知，因此将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:59:34.360

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.data.dataview.sort.aspx)，该`Sort`属性是：

> 包含列名的字符串，后跟“ASC”（升序）或“DESC”（降序）。默认情况下，列按升序排序。多列可以用逗号分隔。

由于`System.Data`命名空间中的某些类允许对某些事物（例如`DataTable.Select`方法）使用类似 SQL 的语法，因此人们常常会误以为支持所有 SQL 语法。事实并非如此。在这种情况下，该`Sort`属性支持非常狭窄的功能。它只能设置为一个或多个列名（以及`ASC`or`DESC`顺序说明符）。它不支持 和 之类`RIGHT`的功能`LEFT`。

如果你真的想使用 排序`DataView`，你可以在数据中添加一个额外的列，其中包含你想要对视图进行排序的字符串。当您将数据选择到 中时`DataSet`，您可以使用所有这些 SQL 字符串操作方法来构建排序字符串以选择到该排序列中。

但是，除非您真的需要这样做，否则我建议您只创建一个`Array`或`List`数据然后对其进行排序。当您这样做时，您可以访问 .NET 的所有字符串操作方法，这些方法更强大且更易于阅读。例如：

```
Dim names As New List(Of String)()
For Each row As DataRow In objDataSet.Tables(1).Rows
    names.Add(CStr(row("SName")))
Next
names.Sort(Function(x, y) x.Split().Last.CompareTo(y.Split().Last)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T02:59:51.157

试试这个：

```
Dim strS As String = ""
Dim dt As DataTable = objDataSet.Tables(1)

' create a lambda expression to split the name by " "
Dim splitName = Function(name As String) name.Split(" "c).Where(Function(s) s <> "")

' select rows that meet the SID filter and SName <> null and SName <> "",
' and get the SID, construct the FirstName and LastName,
' and of course, sort the return collection by LastName
Dim sortedrows = From row As DataRow In dt.Rows
                 Where (Not IsDBNull(row!SName) AndAlso Not String.IsNullOrWhiteSpace(CStr(row!SName)))
                 And CStr(row!SID) = strSID 
                 Select PersonID = row!PersonID,
                 FirstName = splitName(CStr(row!SName)).FirstOrDefault,
                 LastName = splitName(CStr(row!SName)).LastOrDefault
                 Order By LastName

' finally, construct the <a> tags as required from above
For Each row In sortedrows
    strS &= String.Format("<a href=""javascript: ViewPersonId({0}); return false;"">{1} {2}</a><br />", row.PersonID, row.FirstName, row.LastName)
Next 
```

如果 DataTable 包含以下行：

```
dt.Rows.Add(1, "John Travolta")
dt.Rows.Add(2, "Jack The Ripper")
dt.Rows.Add(3, "Beyonce")
dt.Rows.Add(4, " ")
dt.Rows.Add(5, "")
dt.Rows.Add(6, DBNull.Value) 
```

假设他们都满足 SID 过滤器，它将返回：

```
<a href="javascript: ViewPersonId(3); return false;">Beyonce Beyonce</a><br />
<a href="javascript: ViewPersonId(2); return false;">Jack Ripper</a><br />
<a href="javascript: ViewPersonId(1); return false;">John Travolta</a><br /> 
```

如您所见，`"Beyonce"`显示为`"Beyonce Beyonce"`。如果您不希望这种行为，可以通过在`For Each`循环中检查 FirstName = LastName 并执行替代代码来构造`<a>`标签来更改它。

# visual-studio-2012 - 在 VS 2012 中包含文件

> ID：16221129
> 
> 赞同：1
> 
> 时间：2013-04-25T17:32:42.377
> 
> 标签：visual-studio-2012

我想包含一个库 - 我已经下载了它并在其中找到了四个文件：
.h
.lib
.dll
.def

我已将头文件放入我的项目中。那是我做的唯一一件事 - 视觉会抛出一个错误，它无法打开 .lib 文件。

所以我立即想在stackoverflow上寻求帮助，但我决定先做一点研究。我发现 .dll 文件应该放在 windows/SYSWOW64 位置（对于我的 64 位 windows 7），我把它放在那里但 VS 仍然显示相同的错误。

我应该如何处理？在“安装”过程中我是否错过了一些步骤？如果有，有哪些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:36:29.253

您必须在项目设置中指定库 (*.lib) 的路径。

（您也可以将其放入带有源的目录中）

在构建期间不需要存在 DLL 文件。

# php - 如何从表中获取 3 个最高值并将其打印出来？

> ID：16221131
> 
> 赞同：0
> 
> 时间：2013-04-25T17:32:55.777
> 
> 标签：php, mysql, row

我有一个名为 pvpstats 的表。它有 4 列；id，名字，杀戮和死亡。我必须从“kills”中获得 3 个最高值，并将它们从最高到最低排序，并包括名称。喜欢 3-top 统计数据！而且因为我是 MySQL 新手，所以我需要一步一步的 quide...

这就是我的 .php 目前的样子：

```
<?php

$server = "localhost";
$dbuser = "usernm";
$dbpass = "passwd";
$dbname = "pvpstats";

mysql_connect($server, $dbuser, $dbpass);
mysql_select_db($dbname);

$result = mysql_query("SELECT kills FROM pvpstats ORDER BY kills DESC LIMIT 3");
$row = mysql_fetch_assoc($result);
echo print_r($row,true);

?> 
```

连接正常，显示最高值但没有名称。并且只有最高的时候它应该显示 3 最高

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:16:07.767

`$row = mysql_fetch_assoc($result);`只会回显 1 行

用户 while 循环回显所有数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:36:00.017

好吧，你应该使用：

```
print_r($row); 
```

不是：

```
echo print_r($row,true); 
```

如果省略**true**变量，*print_r* 将自动输出它，因为将响应传递给*echo*只是多余的。

此外，由于您的查询将返回三行，因此您必须遍历它：

```
while ($row = mysql_fetch_assoc($result)) {
    print_r($row);
    // or if you just want to output the number, use:
    // echo $row["kills"];
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-25T18:02:45.787

it seems,your query syntax does not have any problem. use below codes to find problems.

```
mysql_connect($server, $dbuser, $dbpass) or die(mysql_error()); 
```

...

```
$row = mysql_fetch_assoc($result) or die(mysql_error()); 
```

# replace - 替换 PHP 中的宽度值（有条件）

> ID：16221135
> 
> 赞同：1
> 
> 时间：2013-04-25T17:33:20.450
> 
> 标签：replace, width, preg-replace

我知道以前有关于用 PHP 替换宽度值的问题，而这并不是我的问题所在。

```
$contentWidth = 'width="600"';

$screenContent = get_the_content();
$screenContent = preg_replace("/width=\"(.*?)\"/is", $contentWidth, $screenContent);
echo $screenContent; 
```

这就是我到目前为止所拥有的，并且工作正常。但我想添加一个条件，仅在宽度超过 600 时进行更改；只是为了确保我不会扭曲图像质量。

有没有办法将宽度分配给变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:41:24.880

您可以使用[preg_match](http://php.net/manual/en/function.preg-match.php)来获取您感兴趣的 $screenContent 部分：

```
$screenContent = get_the_content();
if(preg_match("/width=\"(.*?)\"/is", $contentWidth, $match)) {
    // width is stored in $match[1] (the matching portion is in $match[0])
    if(is_numeric($match[1]) && $match[1] > 600)
        $screenContent = preg_replace("/width=\"(.*?)\"/is", $contentWidth, $screenContent);
}

echo $screenContent; 
```

确保检查有效宽度（上面的 is_numeric），因为您的贪婪匹配器 (.*?) 允许字符和数字。

# c# - 如何通过 Web 服务使接口可用？

> ID：16221142
> 
> 赞同：0
> 
> 时间：2013-04-25T17:33:31.893
> 
> 标签：c#, service, web, interface, contract

我正在研究.NET，我想为我的客户（多客户端）编写一个关于 Web 服务的接口，以便他们可以从我的接口继承来制作他们自己的 Web 服务，并且我可以动态调用他们的 Web 服务。

有什么办法可以做到吗？谢谢。

编辑：因为我是网络服务的新手。我会说得更清楚。我希望我所有客户的网络服务都具有相同的方法。我有几个cuatomers。我想从我的网站上获得一些对象或接口，以便他们可以继承它。我可以将他们的 Web 服务的 URL 存储到数据库中，并且我可以动态地调用他们的服务。那么，该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:33:22.233

很简单，你真的不需要在继承方面做任何事情，这是Web服务的基本前提。只需创建您自己的虚拟 Web 服务（您也可以使用它进行测试以返回测试值）并将 URL 提供给您的客户。他们都可以获得规范（基本上他们只需要在测试 Web 服务的末尾添加“？WSDL”）并获得他们应该在自己的 Web 服务中实现的 WSDL。如果该测试 Web 服务在您的网络内部，您可以简单地自己获取 WSDL 并将其通过电子邮件发送给他们。

一旦他们都实现了这个网络服务，你就可以连接到他们的服务，它的行为将完全一样。

# php - cURL 后存储的数据没有空格

> ID：16221143
> 
> 赞同：0
> 
> 时间：2013-04-25T17:33:35.663
> 
> 标签：php, mysql, sql-server, curl, joomla

设置很简单。创建 Joomla 帐户后，将数据（cURL 发布）发送到另一个数据库支持的应用程序（带有 MS SQL 的 ASP）的 Joomla 电子商务站点（MySQL 后端）。

问题是有时这些数据存储在接收数据库中，没有任何空格。例如：在 Joomla 网站上收集的地址在数据库中存储为*“123* exampleroad” ，但在接收数据库中，它被存储为*“123exampleroad”*。这不会一直发生 - 所以我对可能的原因感到困惑。

有没有人遇到过这样的问题？任何帮助表示赞赏。

这是 cURL 代码的样子：

```
//create array of data to be posted

foreach( $registrationfields as $field ) {

if( $field->name == 'email') $field->name = 'user_email';

if( $field->name == 'delimiter_sendregistration') continue;

if( $field->type == 'captcha') continue;

if( $field->type == 'delimiter') continue;

switch($field->name) {

    case 'country':

        require_once(CLASSPATH.'ps_country.php');

        $country = new ps_country();

        $dbc = $country->get_country_by_code($dbbt->f($field->name));

        if( $dbc !== false ) $val = $dbc->f('country_name');

        break;

    default: 

        $val = $dbbt->f($field->name);

        break;

}

$post_data[$field->name] = $val;

} 

$post_data['order_id'] = $order_id;

$post_data['order_date'] = $order_date;

$post_data['order_status'] = $order_status;

$post_data['username'] = $username;

//traverse array and prepare data for posting (key1=value1)

foreach ( $post_data as $key => $value) {

    $post_items[] = $key . '=' . $value;

}

//create the final string to be posted using implode()

$post_string = implode ('&', $post_items);

//create cURL connection

$curl_connection = 

  curl_init('http://--url-here');

//set options

curl_setopt($curl_connection, CURLOPT_CONNECTTIMEOUT, 30);

curl_setopt($curl_connection, CURLOPT_USERAGENT, 

  "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");

curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, true);

curl_setopt($curl_connection, CURLOPT_SSL_VERIFYPEER, false);

curl_setopt($curl_connection, CURLOPT_FOLLOWLOCATION, 1);

//set data to be posted

curl_setopt($curl_connection, CURLOPT_POSTFIELDS, $post_string);

//perform our request

$result = curl_exec($curl_connection);

//show information regarding the request

print_r(curl_getinfo($curl_connection));

echo curl_errno($curl_connection) . '-' . 

                curl_error($curl_connection);

//close the connection

curl_close($curl_connection); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:44:50.907

尝试使用 . 发送编码为一个参数的数据`base64`。不要使用本机`php`函数，因为它们可能会输出特殊字符，如斜杠。使用[此帖子](https://stackoverflow.com/questions/11449577/why-is-base64-encode-adding-a-slash-in-the-result)的第一个答案中列出的功能。

我认为问题在于如何`curl`编码空格（％20）以及您的目标脚本如何读取它们。

示例（使用链接中的函数）：

```
...
$post_string = implode ('&', $post_items);

$post_string = myBase64_encode($post_string);
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T20:27:05.193

在我重构代码后，这个问题得到了解决。而不是使用循环修改数组，然后使用“内爆”来形成字符串 - 如下所示：

```
//traverse array and prepare data for posting (key1=value1)
foreach ( $post_data as $key => $value) {
  $post_items[] = $key . '=' . $value;
}

//create the final string to be posted using implode()
$post_string = implode ('&', $post_items); 
```

我改用了“ [http_build_query](http://php.net/manual/en/function.http-build-query.php) ”函数，它完成了同样的事情而不会导致错误。

```
$post_string = http_build_query($post_data) . "\n"; 
```

# javascript - javascript原型构造函数混淆

> ID：16221146
> 
> 赞同：1
> 
> 时间：2013-04-25T17:33:41.547
> 
> 标签：javascript

```
function Test()
{
    this.name = 'test name';
}

console.log(Test.prototype.constructor.prototype.constructor); 
```

我不明白为什么这是一个无限链`constructor`- `prototype`？

我的意思是这个链的目的是什么，为什么没有尽头，原型有构造函数，构造函数有原型，它是一个循环链，构造函数每次都是一样的，无法想象......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:38:38.550

好吧，默认情况下，每个*Function Object*`.prototype`都有一个属性，该属性引用此函数的原型对象（仅在用作*构造*函数时才重要）。

每个`prototype object`默认情况下都有一个对该`constructor`函数的引用，当然，它指向构造函数（在你的情况下`Test()`）。

所以，我们走吧

```
Test.prototype.constructor.prototype.constructor.prototype.constructor.prototype.constructor.prototype.constructor.prototype.constructor.prototype.constructor.prototype.constructor.prototype.constructor.prototype.constructor.prototype.constructor.prototype.constructor.prototype.constructor.prototype.constructor.prototype.constructor.prototype.constructor.prototype.constructor 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:41:16.453

这是期望的行为。原型的`constructor`属性是指拥有原型的对象（因此它指回自身）。

# git - 如何删除 git 中一个文件的历史记录，只保留最新版本？

> ID：16221152
> 
> 赞同：7
> 
> 时间：2013-04-25T17:33:59.377
> 
> 标签：git, git-rewrite-history

我在 git 存储库中有一个大型二进制文件，在几次提交中已更改。这些提交还包括对其他文件的更改。我希望存储库中只有最新版本的二进制文件，但希望保留在这些提交中更改的其他文件的历史记录。

所有有问题的提交都已经被推送到 github，并被团队的其他成员从他们那里拉出来。

我怎样才能做到这一点？

**编辑**：我不相信这是另一个引用问题的重复。如下面评论中所述，我已经查看了该问题，但想删除文件**的每个版本，除了最新**版本。这个标准在另一个问题的答案中没有提到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T18:52:05.593

最简单的方法是使用[BFG Repo-Cleaner](http://rtyley.github.io/bfg-repo-cleaner/)，这是一种更快、更简单的替代方案，`git-filter-branch`专为从 Git 存储库中删除**大文件而设计。**

您应该仔细按照[使用](http://rtyley.github.io/bfg-repo-cleaner/#usage)说明进行操作，但主要步骤就是这样 - 下载[Java jar](http://rtyley.github.io/bfg-repo-cleaner/#download)（需要 Java 7 或更高版本）并运行以下命令：

```
$ java -jar bfg.jar  --strip-blobs-bigger-than 100MB  my-repo.git 
```

任何大小超过 100MB 的 blob 都将从您的存储库历史记录中*完全删除-****除非*它是您最新提交的文件树中存在的版本**，因此您的最新版本将根据您的需要保持不变。

[BFG](https://docs.google.com/spreadsheet/ccc?key=0AsR1d5Zpes8HdER3VGU1a3dOcmVHMmtzT2dsS2xNenc)也比`git-filter-branch`.

*全面披露：我是 BFG Repo-Cleaner 的作者。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T17:54:50.457

与其尝试过滤除最新版本之外的所有版本，不如从您的回购历史记录中删除文件并重新添加最新版本：

*   备份文件的最新版本。
*   告诉所有人删除他们本地克隆的副本
*   使用[如何从 Git 存储库的提交历史中删除/删除大文件？](https://stackoverflow.com/questions/2100907/how-do-i-purge-a-huge-file-from-commits-in-git-history)将其从项目的整个历史中过滤掉
*   重新添加最新版本
*   要求每个人重新克隆 repo。

考虑*不*跟踪此文件。Git 不适用于大型二进制 blob。

# sql - 如何强制重复键插入mssql

> ID：16221153
> 
> 赞同：0
> 
> 时间：2013-04-25T17:34:05.860
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我知道这听起来很疯狂（如果我设计数据库我会做不同的）但我实际上想在插入时强制使用重复键。我正在使用一个数据库，该数据库旨在将列作为“非空”pk 的列，每行的值都相同。我正在使用的记录保存软件能够以某种方式将其每条记录的副本插入到这些列中。我需要将另一个表中的列中的数据复制到该表中的一列中。通常我只是尝试只插入该列，但是 pk 设置为“非空”，所以我必须在其中放入一些东西，并且表格的设置方式对于每条记录都必须是相同的东西. 这应该是不可能的，但是制作记录保存软件的公司让它以某种方式工作。

PS我知道这通常不是一个好主意。因此，请仅提供有关如何完成此操作的建议，无论它有多疯狂。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T23:05:21.250

SQL Server 主键必须是***唯一的***并且***不是 NULL***。因此，您在其中看到重复数据的列不能是它自己的主键。正如 urlreader 所建议的，它必须是具有一个或多个其他列的复合主键的一部分。

如何判断哪些列构成表的主键：在企业管理器中，展开表，然后展开列。主键列旁边将有一个“键”符号。您还会在之后的列描述中看到“PK”，如下所示：

```
MyFirstIDColumn (PK, int, not null)
MySecondIDColumn (PK, int, not null) 
```

一旦您知道哪些列构成主键，只需确保您将唯一数据的组合插入到列中。因此，对于我上面的示例表，这将是：

```
INSERT INTO MyTable (MyFirstIDColumn, MySecondIDColumn) VALUES (1,1) --SUCCEED
INSERT INTO MyTable (MyFirstIDColumn, MySecondIDColumn) VALUES (1,2) --SUCCEED
INSERT INTO MyTable (MyFirstIDColumn, MySecondIDColumn) VALUES (1,1) --FAIL because of duplicate (1,1)
INSERT INTO MyTable (MyFirstIDColumn, MySecondIDColumn) VALUES (1,3) --SUCCEED 
```

更多关于主键：

[http://msdn.microsoft.com/en-us/library/ms191236%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms191236%28v=sql.105%29.aspx)

# javascript - 使用 javascript 重新填充表单字段

> ID：16221154
> 
> 赞同：0
> 
> 时间：2013-04-25T17:34:11.583
> 
> 标签：javascript, forms, populate

嗨，对不起，我是 Javascript 的新手，但我需要知道当我有这种表单时如何重新填充表单字段：

我尝试使用此代码（部分）但它不起作用，文件名是'testjavascript.html'

```
<head>
<script language="javascript" type="text/javascript">   
 function updateUsername(){        
     var first = document.getElementById("first").value;              
     document.getElementById("first").value = first;    
  } </script>

</head>
<body>
      <form action="action.php" method="post">
            <input type="text" name="usename" value="" id="first" >
            <a href="testjavascript.html?auto=1" onclick="updateUsername();" id ="link">Link</a>
            <input type="submit" name="submit">
      </form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:42:23.427

此行为需要在服务器端。当您更改页面时，浏览器将重新加载您的 javascript 代码，您将丢失所有引用。

# css - 无法让菜单栏缩放到屏幕大小

> ID：16221155
> 
> 赞同：0
> 
> 时间：2013-04-25T17:34:18.113
> 
> 标签：css, navigation, alignment

我正在尝试根据屏幕尺寸缩放菜单栏。我已经尝试过`float`，`@media`等等，但它没有正常工作。我的 13' 上的全屏看起来很棒。但是，一旦我缩小它，菜单栏就会向右移动，但页面元素很好。菜单在底部`#navsite`。

CSS

```
* {
    margin:0;
    padding:0;
}

html{
    min-width:770px;
}

body{
    background:white url(candy/background.png) 0 0 repeat;
text-align:center;
}

/*=====[ Set up container divs and add background tiles ]=====*/

#pageheadContainer,
#contentContainer,
#footContainer{
width:100%;
}

#pageheadContainer{
    background:transparent url(candy/pageheadBackground.png) 0 100% repeat-x;
}

#contentContainer{
    background:#F7F7F7 url(candy/contentBackground2.png) 50% 100% repeat-y;
    float:left;
}

#footContainer{
    background:transparent url(candy/footBackground.png) 0 0 repeat-x;
    clear:both;
}

#pagehead,
#content,
#foot{
    width:770px;
    margin:0 auto;
    position:relative;
text-align:left;
}

#pagehead{
    height:130px;
}

#foot{
    height:150px;
}

#pagehead{
    background:transparent url(candy/pageheadBackground2.png) 0 100% no-repeat;
}

#content{
    background:transparent url(candy/contentBackground.png) 0 0 no-repeat;
    min-height:300px;
    _height:300px;
}

#foot{
    background:transparent url(candy/footBackground2.png) 100% 0 repeat-x;
}

#article{
    width:450px;
    float:left;
    padding:40px 0 20px 0;
    margin-left:25px;
}

#subContent{
    display:inline;
    width:180px;
    float:left;
    padding:25px 0 20px 0;
    margin-left:30px;
    color:#8B725A;
    font-size:.9em;
}

#foot ul{
    position:absolute;
    top:45px;
}

#foot li{
list-style-type:none;
}

#foot #foot1{
    width:200px;
    position:absolute;
    left:300px;
}

#foot #foot2{
    width:200px;
    position:absolute;
    left:570px;
}

#foot #pageTop{
    position:absolute;
    left:482px;
    top:-40px;
}

#foot #pageTop a{
    display:block;
    width:26px;
    height:26px;
    text-indent:-9999px;
    text-decoration:none;
    background:transparent url(candy/pageTop.png) 0 0 no-repeat;
    float:left;
}

body{
    font:normal 62.5%/1.8em Arial, Helvetica, sans-serif;
}

#content ul{
    margin:0.8em 0 0.6em 1em;
    padding-left:1em;
    list-style-type:square;
}

ol{
    margin:0.8em 0 0.6em 2em;
    padding-left:1em;
    list-style-type:lower-roman;
}

blockquote{
    margin:0.8em 0 0.6em 1em;
    padding-left:1em;
    font-style:italic;
    border-left:4px solid #E2D7CF;
} 

img{
    padding:2px;
    border:1px solid #F2F2F2;
} 

#content{
    font-size:1.25em;
}

p{
    margin:0.3em 0 0.6em 0;
}

a{
    color:#9D6141;
    font-weight:bold;
    text-decoration:none;
} 

a:hover{
    background:#9D6141;
    color:#FFE;
}

#article{
    line-height:1.7em;
    color:#635141;
}

h1,
h2,
h3,
h4{
 font-family:Georgia, Times New Roman, Times, serif;
}

h2{
    color:#98533B;
    margin-bottom:.5em;
    line-height:1.7em;
    font-size:1.7em;
}

h3{
    margin:0.8em 0 0.6em 0;
    font-size:1.3em;
} 

h4{
    margin:0.8em 0 0.6em 0;
    font-size:1.1em;
} 

#subContent h2{
    font-size:1.3em;
}

#subContent h3{
    font-size:1.1em;
}

/*  menu navigation */
.navsite {width: 845px; height: 35px;  z-index: 100; 
margin-bottom: 3px; margin-left: 155px;}    

/* menu bar */

#headermenu {width: 800px; height: 35px;  z-index: 100;  position: absolute}

#headermenu ul {          
    text-align: center;
    list-style: none;
    line-height: 20px;
    font-size: small;

}

#headermenu a {
    display: block;
    width: 8em;
    color: white;
    text-decoration: none;
    padding: 0.3em;
    white-space: nowrap;

}

#headermenu li {         
    float: left;
    padding: 0;
    width: 8em;                    
    background-color: #B67357;          /* medium brown */  
}
#headermenu li ul {               /* second level lists */
position: absolute;
    z-index:500;
    left: -999em;
    height: auto;
    width: 8em;
    border-width: 0.25em;
    margin: 0;     
}

#headermenu li:hover ul, #nav li.shfhover ul {   
    left: auto;
    z-index:100;
}

#content {
    clear: left;
    color: #ccc;
}

@media screen and (max-width: 770px)
{
  #headermenu {
    width:770px;
    margin:0 auto;
    position:relative;
    text-align:left;}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:55:48.673

所以你的问题是你绝对定位浏览器左侧的菜单。因此，当您调整它的大小时，它会移动。

如果您希望整个站点居中但流畅，您可以使用以下内容

```
width:100%; max-width:400px; margin:auto; 
```

这是一个[小提琴](http://jsfiddle.net/GG95g/)

# amazon-s3 - S3，从深度链接到子域（桶）

> ID：16221158
> 
> 赞同：0
> 
> 时间：2013-04-25T17:34:29.733
> 
> 标签：amazon-s3

我想将链接作为 www.example.com/test 重定向到 S3 上名为 test.example.com 的存储桶。据我所知，Apache 有一个名为 .htaccess 的文件可以解决问题。我能够从 test.example.com 重定向到 S3 上的存储桶，但我不知道如何使用深层链接来做到这一点。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T20:45:24.167

似乎没有办法做到这一点。我看到很多帖子将 amazon s3 描述为“非常简单的容器”。我通过在主存储桶 (www.example.com) 上创建一个名为 test 的文件夹来解决我的问题，其中的 html 页面重定向到实际的存储桶 test.example.com。最好的解决方案是迁移到 apache 容器服务，但目前我想保持简单。

# wpf - wpf/xaml 中的仅角边框

> ID：16221162
> 
> 赞同：3
> 
> 时间：2013-04-25T17:34:44.193
> 
> 标签：wpf, xaml, border, brush

在某些 xaml 中，我希望有一个从每个角仅向外几个像素的边框。因此，沿着顶部，边界将是，例如，左边缘的 5 个黑色像素，然后在顶部的其余部分是透明的，直到右边缘的 5 个像素，然后是边界的最后 5 个像素。右边缘将是黑色的。目的是为偶尔透明的事物的选择提供一些指导；但是，在此应用程序中，完整边框的存在会干扰内容（在感知视觉意义上）。角不是圆的。

看起来像这样的东西：

```
--          --
|            |

|            |
--          -- 
```

我应该使用什么类型的刷子来达到这种效果？

我尝试过线性渐变，如下所示：

```
<LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
    <GradientStop Color="Black" Offset="0" />
    <GradientStop Color="Black" Offset="0.01" />
    <GradientStop Color="Transparent" Offset="0.0101" />
    <GradientStop Color="Transparent" Offset="0.9899" />
    <GradientStop Color="Black" Offset="0.99" />
    <GradientStop Color="Black" Offset="1" />
</LinearGradientBrush> 
```

当然，这只适用于左上角和右下角。这对于预期的应用来说可能是合理的，但是只有当边界区域是正方形时，每个角上的线的大小才相同（例如，如果边界区域是一个长矩形，那么边界部分沿着一个更远一侧比另一侧）。

我确实注意到渐变画笔上“Absolute”的 MappingMode 值。这适用于左上角，但不适用于其他角落。

我还尝试了 RadialGradientBrush，认为我可以让一个环击中角落，但未能成功将其正确居中或使其沿两侧击中相等的长度。

这是 ListBox 中 ItemContainerStyle 的一部分，并且使用 IsSelected 的触发器更改边框。出于这个原因，我也不能在边界内（边界内等）做边界。

**编辑#2：**我还尝试了 VisualBrush。我知道我可以在网格中获得我想要的行为（至少是拉伸行为）。

```
<VisualBrush Stretch="Fill">
    <VisualBrush.Visual>
        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="10" MaxWidth="10" MinWidth="10" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="10" MaxWidth="10" MinWidth="10" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="10" MaxHeight="10" MinHeight="10" />
                <RowDefinition Height="*" />
                <RowDefinition Height="10" MaxHeight="10" MinHeight="10" />
            </Grid.RowDefinitions>
            <Rectangle Grid.Column="0" Grid.Row="0" Fill="Black" />
            <Rectangle Grid.Column="1" Grid.Row="0" Fill="Transparent" />
            <Rectangle Grid.Column="2" Grid.Row="0" Fill="Black" />
            <Rectangle Grid.Column="0" Grid.Row="1" Fill="Transparent" />
            <Rectangle Grid.Column="1" Grid.Row="1" Fill="Transparent" />
            <Rectangle Grid.Column="2" Grid.Row="1" Fill="Transparent" />
            <Rectangle Grid.Column="0" Grid.Row="2" Fill="Black" />
            <Rectangle Grid.Column="1" Grid.Row="2" Fill="Transparent" />
            <Rectangle Grid.Column="2" Grid.Row="2" Fill="Black" />
        </Grid>
    </VisualBrush.Visual>
</VisualBrush> 
```

但是，这也行不通。似乎在画笔内进行大小调整的方式不同。在这种情况下，VisualBrush 中 Grid 的大小最终为 20x20，中间透明部分不占空间。将 Horizo​​ntalAlignment 和 VerticalAlignment 设置为 Stretch 也无济于事。VisualBrush 上的 Stretch="Fill" 也没有做任何事情。

**编辑#1**：更广泛的背景：

```
<ListBox.ItemContainerStyle>
    <Style TargetType="{x:Type ListBoxItem}">
        <Style.Resources>
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent"/>
        </Style.Resources>
        <Setter Property="Margin" Value="3" />
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="BorderThickness" Value="5" />
                <Setter Property="Padding" Value="0" />
                <Setter Property="BorderBrush" Value="Fuchsia" />
            </Trigger>
            <Trigger Property="IsSelected" Value="False">
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Padding" Value="4" />
                <Setter Property="BorderBrush">
                    <Setter.Value>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="Black" Offset="0" />
                            <GradientStop Color="Black" Offset="0.01" />
                            <GradientStop Color="Transparent" Offset="0.0101" />
                            <GradientStop Color="Transparent" Offset="0.9899" />
                            <GradientStop Color="Black" Offset="0.99" />
                            <GradientStop Color="Black" Offset="1" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
            </Trigger>
        </Style.Triggers>
    </Style>
</ListBox.ItemContainerStyle> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T21:27:07.423

您可以使用`Path`... 这将绘制类似于您正在寻找的东西：

```
<Path Stroke="Black" Stretch="Fill" 
      Data="M0,0 l10,0 m80,0 l10,0 m0,0 l0,10 m0,80 l0,10 m0,0 l-10,0 m-80,0 l-10,0 m0,0 l0,-10 m0,-80 l0,-10"
      Height="100" Width="100" Margin="10" /> 
```

完整代码示例：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Path Stroke="Black" Stretch="Fill" 
              Data="M0,0 l10,0 m80,0 l10,0 m0,0 l0,10 m0,80 l0,10 m0,0 l-10,0 m-80,0 l-10,0 m0,0 l0,-10 m0,-80 l0,-10"
              Height="100" Width="100" Margin="10" />
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T18:29:01.530

径向渐变画笔可能会实现您正在寻找的东西。将径向画笔的中心设置为框的中心。从透明的中心颜色开始，从中心淡化到所需的“边框颜色”（黑色），然后将半径设置得足够大，使黑色只出现在角落。

并确保将“渐变”设置为非常短 - 不要逐渐淡化它，而是让它变得清晰。

如果你调整它的大小，你会得到类似于下图（很差）的效果。红框代表你的内容。该框外的所有内容都说明了您的角落会是什么样子。使“透明”部分的半径更大，以使您的黑角更小。

最后; 这几乎只会在细边框下看起来不错。如果你有一个粗边框，它会在角刷的“尖端”看起来“有趣”。

![在此处输入图像描述](https://i.stack.imgur.com/bRJmf.png)

**更新：**

这是一个带有一些代码的实际示例：

```
<Border BorderThickness="1" Height="100" Width="100">
    <Border.BorderBrush>
        <RadialGradientBrush RadiusX="0.6" RadiusY="0.6">
            <GradientStop Color="Black" Offset="1"/>
            <GradientStop Color="#00000000" Offset="0.99"/>
        </RadialGradientBrush>
    </Border.BorderBrush>
    <Rectangle Fill="Red" />
</Border> 
```

这就是它的样子：

![在此处输入图像描述](https://i.stack.imgur.com/ntEny.png)

对于矩形（即不是完美的正方形），为了保持角的大小相同，您必须相应地缩放 RadiusX 和 RadiusY 值。它们应该随着宽度/高度比缩放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-03T18:50:55.180

这是一个有趣的问题，所以这里还有另一种可能性。我希望您同意这可以作为与我之前的答案完全分开的答案...

您可以使用包含在网格中的一组简单形状的组合来实现您想要的效果。将您的“内容”框放在 4 个黑色矩形的顶部，每个黑色矩形都位于网格的适当角落。

这是我蹩脚的油漆插图。再次，红色框表示您的内容。该红色框之外的任何内容都是用户将看到的边框。

![在此处输入图像描述](https://i.stack.imgur.com/DfChz.png)

以及带有代码的真实示例：

```
<Grid HorizontalAlignment="Center" VerticalAlignment="Center" Width="300" Height="200">
    <!-- These rectangles will be the four corner "borders" -->
    <Rectangle Fill="Black" Width="50" Height="50" HorizontalAlignment="Left" VerticalAlignment="Top" />
    <Rectangle Fill="Black" Width="50" Height="50" HorizontalAlignment="Left" VerticalAlignment="Bottom" />
    <Rectangle Fill="Black" Width="50" Height="50" HorizontalAlignment="Right" VerticalAlignment="Top" />
    <Rectangle Fill="Black" Width="50" Height="50" HorizontalAlignment="Right" VerticalAlignment="Bottom" />

    <!-- Here is the content.  The "margin" property will effectively be the thickness of your corner borders. -->
    <Rectangle Fill="Red" Margin="2" />        
</Grid> 
```

它看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/UbFqP.png)

这具有很好的扩展性的额外好处；无论您的内容大小如何，角边框的大小都将始终相同。此外，边框可以是您喜欢的任何厚度，而不会像以前的径向刷答案那样看起来“奇怪”。

# json - 关于简单订单服务的 REST 设计建议

> ID：16221168
> 
> 赞同：0
> 
> 时间：2013-04-25T17:35:01.943
> 
> 标签：json, rest

我正在为我的 REST JSON 服务寻找建议。我有 1 个简单的订单，基本上是做简单的 CRUD。所以基本上除了获取订单的详细信息、创建订单和删除订单外，我还想在单个订单上做更多的活动，比如：

*   批准订单
*   将订单发送给特定用户
*   取消订单
*   暂停订单
*   拒绝订单
*   喜欢订单

任何人都可以分享我如何扩展服务的想法。目前我在下面有一个URI，比如

[http://myapi.com/order/](http://myapi.com/order/)

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:21:44.147

所以[http://myapi.com/orders/](http://myapi.com/orders/) {id} 将是一个订单的获取，我见过的大多数设计师都使用复数，fyi。

在这种情况下，我会提供两个选项（最不喜欢的例子是第一个）

A. 枚举可能发生的操作并为该操作执行查询参数，例如 [http://myapi.com/orders/123?action=APPROVE](http://myapi.com/orders/123?action=APPROVE)使用您需要提供的任何数据响应 POST 方法。

**注意我不喜欢上面的，因为它感觉更像 RPC 而不是 REST，但它绝对可以满足您的需求。

B. 除了你的 CRUD 之外，还提供一个行为模式。因此您可以通过@POST、@GET 等执行粗略的/orders 表单，然后提供/orderActions/approve/{id} 或类似于POST 的内容以进行批准操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:45:32.210

你没有提到你在这个项目中使用的是什么语言。我会推荐带有[state_machine](https://github.com/pluginaweek/state_machine/) gem 的 Ruby on Rails，这将允许您执行 CRUD 以及您希望通过的其他“状态”。

我说 RoR 主要是因为它会为您开箱即用地完成 CRUD，而`state_machine`gem 会完成剩下的工作。

# sql - SSIS 执行错误：以用户身份执行：cam\Package.Runner。该步骤没有产生任何输出。

> ID：16221172
> 
> 赞同：0
> 
> 时间：2013-04-25T17:35:27.250
> 
> 标签：sql, ssis

我`SSIS job`每天执行一个，我有时间表`sql server agent`。

该程序包每天都会成功执行，但我收到以下步骤失败消息：

请详细说明为什么会这样

```
Date        4/19/2013 9:43:01 AM
Log     Job History (Reporting)

Step ID     13
Server      PROD
Job Name        Reporting
Step Name       R1: Load_Data
Duration        00:00:05
Sql Severity        0
Sql Message ID      0
Operator Emailed        
Operator Net sent       
Operator Paged      
Retries Attempted       0

Message
Executed as user: cam\Package.Runner. The step did not generate any output.  Process Exit Code 1\.  The step failed. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:38:52.703

根据异常消息，我可以看到您的数据已更改，此步骤查询或不返回任何内容。你应该检查你的数据。

# caching - Varnish：如何将命中/未命中统计信息发送到后端

> ID：16221174
> 
> 赞同：0
> 
> 时间：2013-04-25T17:35:35.037
> 
> 标签：caching, varnish, varnish-vcl

我希望你能帮忙

我有一个动态生成图像的图像服务器。我正在使用清漆来缓存生成的图像。

我需要记录清漆收到多少请求（每张图像）以及它是命中还是未命中（通过被标记为未命中）。目前，我正在将带有命中/未命中的访问日志写入文件，然后使用 crontab 处理此访问日志文件并将数据写入我的数据库...

我想做的是：

让 Varnish 向我的后端发出请求，通知它缓存命中（如果可能，还有响应大小（字节））。然后我的后端可以保存这些数据......

这完全有可能吗？如果可以，怎么办？

* * *

万一有人感兴趣：

*   2 个清漆实例，每个实例有 1 个（java+tomcat）后端。
*   服务根据请求中的要求操作并生成每个图像......

*以下是每天：*

*   超过 3500 万的页面浏览量，其中每个页面至少包含 3 张图片。
*   Varnish 收到大约 3+ 百万个图像请求（图像也被浏览器缓存）。
*   Varnish 有 87% 的命中率
*   命中的响应时间为几微秒
*   未命中的响应时间为 50 毫秒到 1000 毫秒，具体取决于图像的大小（源和输出）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T17:29:09.020

最好的方法是有一个辅助进程来跟踪`varnishlog`输出并在需要时执行 HTTP 调用。

您可以通过使用`std.log()`in记录必要的数据来做到这一点`vcl_deliver`，因此帮助进程获取它需要的所有数据。用于`obj.hits > 0`检查这是否是缓存命中。

如果你真的需要内联（并且严重减慢所有缓存命中），你可以使用`libvmod-curl`：

```
https://github.com/varnish/libvmod-curl 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-28T15:10:52.373

如果您要从 vcl 中向统计服务器发送请求，我会尝试合并某种类型的聚合请求，您每 100 个（或其他）请求发送一次，而不是每个传入请求。

与其他答案一样，我建议将 varnishncsa（或 varnishlog）与跟踪日志文件的进程一起使用。该方法可能会有一些延迟，但如果这是可以接受的，那么我会考虑在 logrotated 运行时对清漆日志进行后处理。这样，您就有了一整天的数据，您可以翻阅它，生成您需要的任何报告。

# android - AOS 4.x 动画崩溃问题

> ID：16221175
> 
> 赞同：2
> 
> 时间：2013-04-25T17:35:35.840
> 
> 标签：android, animation

我有一个窗口弹出类，它在 aos 2.x（如 2.2.2、2.3.5 等）中运行良好，但在 aos 4.x 中崩溃。导致崩溃的代码如下：

```
public void dismissPopup(){
    if (!isVisible)
        return;
    isVisible = false;

    final Animation animation = AnimationUtils.loadAnimation(activity, R.anim.popup_hide);
    animation.setAnimationListener(new AnimationListener() {
        public void onAnimationEnd(final Animation animation) {
            // The animation has ended
            popupWindow.dismiss();
        }
        public void onAnimationRepeat(final Animation animation) {}
        public void onAnimationStart(final Animation animation) {}
    });
    popupView.startAnimation(animation);
} 
```

所以要让它在 aos 4.x 中工作，我必须注释所有的动画线，就像它有 2b 一样：

```
public void dismissPopup(){
    if (!isVisible)
        return;
    isVisible = false;

    popupWindow.dismiss();
} 
```

这在 aos 4.1.x 中运行良好，但不提供动画。这里可能是什么问题？android 不应该提供任何 BACKWARD 兼容性吗？
崩溃日志

```
04-25 21:05:50.387: E/AndroidRuntime(8997): FATAL EXCEPTION: main
04-25 21:05:50.387: E/AndroidRuntime(8997): java.lang.NullPointerException
04-25 21:05:50.387: E/AndroidRuntime(8997):     at android.view.ViewRootImpl.drawAccessibilityFocusedDrawableIfNeeded(ViewRootImpl.java:2301)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at android.view.ViewRootImpl.onHardwarePostDraw(ViewRootImpl.java:1931)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at android.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:1182)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at android.view.ViewRootImpl.draw(ViewRootImpl.java:2147)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2019)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1830)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:736)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at android.view.Choreographer.doCallbacks(Choreographer.java:566)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at android.view.Choreographer.doFrame(Choreographer.java:536)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:722)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at android.os.Handler.handleCallback(Handler.java:615)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at android.os.Looper.loop(Looper.java:137)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at android.app.ActivityThread.main(ActivityThread.java:4745)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at java.lang.reflect.Method.invokeNative(Native Method)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at java.lang.reflect.Method.invoke(Method.java:511)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-25 21:05:50.387: E/AndroidRuntime(8997):     at dalvik.system.NativeStart.main(Native Method) 
```

**UPD：**动画在 aos 4.0.3 中有效，但在 4.1.1 中崩溃

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:18:15.583

我发现它的愚蠢但解决方法是：

```
animation.setAnimationListener(new AnimationListener() {
    public void onAnimationEnd(final Animation animation) {
        // The animation has ended
        new Handler().post(new Runnable() {
            @Override
            public void run() {
                popupWindow.dismiss();
            }
        });
    }
    public void onAnimationRepeat(final Animation animation) {}
    public void onAnimationStart(final Animation animation) {}
}); 
```

我什至无法想象为什么这会有所帮助以及为什么在 4.1.1 中没有它就无法工作......

# php - 网站上的 Facebook 图片库 (PHP/JSON)

> ID：16221188
> 
> 赞同：2
> 
> 时间：2013-04-25T17:36:12.070
> 
> 标签：php, jquery, json, facebook-graph-api, image-gallery

我正在尝试获取一个 facebook 画廊（[https://www.facebook.com/media/set/?set=a.188384271935.125248.188249156935&type=3](https://www.facebook.com/media/set/?set=a.188384271935.125248.188249156935&type=3)）特别是在网站上显示。

我尝试过的所有 JSON 示例似乎都与 facebook 的当前 API 过时了。

[https://graphs.facebook.com/10151038651796936?fields=images](https://graphs.facebook.com/10151038651796936?fields=images)提取我需要的 JSON 数据。但是当我将它插入到我找到的示例中，甚至是来自 Facebook API 的示例中时，它不会加载。（使用本地托管的 Jquery 1.9）

这是我尝试使用的代码，但我认为根据 facebooks 当前的 API 它已经过时了。

```
 <script type="text/javascript">
          (function (gallery_id) {
            var title = $('h2'),
                viewer = $('#viewer'),
                thumbs = $('#thumbs');

            // album info
            $.getJSON('//graph.facebook.com/' + gallery_id + '?callback=?', function(json, status, xhr) {
              title.html('<a href="' + json.link + '">' + json.name + '</a> from ' + json.from.name);
            });

            // images
            $.getJSON('//graph.facebook.com/' + gallery_id + '/photos?callback=?', function(json, status, xhr) {
              var imgs = json.data;

              viewer.attr('src', imgs[0].images[0].source)

              for (var i = 0, l = imgs.length - 1; i < l; i++) {
                $('<img src="' + imgs[i].images[3].source + '" data-fullsize="' + imgs[i].images[0].source + '">').appendTo(thumbs);
              }

              $('img', thumbs).bind('click', function(e) {
                e.preventDefault();
                viewer.attr('src', $(this).attr('data-fullsize'));
              });
            });
          })('188384271935'); //  put the gallery ID here 
```

我希望代码能够选择显示的图片数量（最近的），并且可以轻松更改画廊 ID。

我对 JSON 很不熟悉，如果你能展示一个工作代码片段的例子，我会非常感激它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:30:58.883

你的代码对我来说很好。您应该仔细检查您的 jQuery 库是否确实在加载，并且您的页面上是否有具有ID`viewer`和`thumbs`ID 的元素。 `viewer`应该是一个`img`标签，并且`thumbs`应该是某种块级元素，比如`div`.

由于您不习惯`jQuery(document).ready`调用它，（至少不是从提供的代码中），您还应该确保在`viewer`and的标记之后包含此脚本标记`thumbs`。

顺便说一句，如果您使用`imgs[i].images[6].source`缩略图，它们会小一点。

# windows-phone-8 - Windows Phone 8 开发

> ID：16221192
> 
> 赞同：1
> 
> 时间：2013-04-25T17:36:28.093
> 
> 标签：windows-phone-8

您能否确认 Windows Phone 8 ISO 或 SDK 是否可以与我在 Windows 7 Home Basic 上安装的 VS2012 Ultimate 一起安装。

由于无法安装 Phone 8 环境，因为需要获取有关 Windows 8 的消息，但在 VMWARE 工作站中运行 Windows 8 Preview。

请提出一些解决方法，以便可以在现有设置的情况下使用 Windows Phone 8 进行开发。

谢谢。马尼什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T19:08:35.693

[Windows Phone 8 SDK 需要此处](http://www.microsoft.com/en-us/download/details.aspx?id=35471)指定的 Windows 8 。Windows Phone 7.8 SDK 支持 Windows 7，但不允许您仅开发 Windows Phone 8 应用程序 7.5 和 7.8 应用程序。

Windows Phone 8 SDK 使用 Hyper-V 来运行模拟器，这就是您需要 Windows 8 的原因。[本文](http://www.veeam.com/blog/nesting-hyper-v-with-vmware-workstation-8-and-esxi-5.html)声称定义了如何在 VMware Workstation 8 VM 中使用 Hyper-V。按照这些步骤，应该可以在 VM 中安装 VS2012 和 Windows Phone 8 SDK 并让一切运行起来。

# android - 确定当前在 ViewPager 中可见的片段

> ID：16221195
> 
> 赞同：8
> 
> 时间：2013-04-25T17:36:54.523
> 
> 标签：android, android-fragments, android-viewpager

我`ViewPager`用它来显示几个片段，`TextView`我的`FragmentActivity`. 我需要`TextView`根据当前在`ViewPager`. 我面临的问题：`ViewPager`有一些缓存机制，它在片段对用户真正可见之前实例化片段，例如当我`ViewPager`在第三页上的片段中选择第二页时也创建了。更重要的是我无法确定片段内部是这个片段现在可见还是它只是由创建的`ViewPager`，但对用户不可见。我已经尝试过使用`OnPageChangeListener`它，但是对它所做的更改对我来说是不可接受的缓慢（页面滚动然后我`TextView`已经更改）

**我真正需要的：**`ViewPager`，无论来自`FragmentActivity`还是来自`Fragment`自身。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T17:58:27.350

`ViewPager.OnPageChangeListener`是这里明显的方法。正如您所注意到的，`onPageSelected(int position)`在页面居中之前不会被调用（如果您通过触摸并按住缓慢滚动页面）。

> 我真正需要的是：我需要确定 ViewPager 中当前可见的片段，无论是来自 FragmentActivity 还是来自 Fragment 本身。我怎样才能做到这一点？

首先，您还没有定义“当前可见”。在 a`ViewPager`中，两个页面在它们之间滑动时都可以看到，那么哪一个是“当前可见”的中间滑动？我的假设是，您会认为“更明显”的页面是“当前可见的”。

话虽如此，我会考虑使用[`onPageScrolled (int position, float positionOffset, int positionOffsetPixels)`](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html#onPageScrolled%28int,%20float,%20int%29). 看来，`positionOffset`也许能够为您提供所需的信息。我会用一些日志语句对其进行测试，以查看返回的数据。

# javascript - 按预定义的顺序对 javascript 数组进行排序

> ID：16221197
> 
> 赞同：10
> 
> 时间：2013-04-25T17:37:00.623
> 
> 标签：javascript, arrays, sorting

我有一个`javascript` `array`我需要按预定义的顺序排序。这似乎是随机的，但它们确实需要按特定顺序排列。

这是我开始的地方，但不知道如何完成：

```
// Items
var items = ["Apples", "Oranges", "Grapes", "Peaches", "Bananas", "Watermelon"];
var itemsOrdered = {};

// Order how I want them
for (i in items) {
    var item = items[i];
    if (item == 'Apples') {
        itemsOrdered['4'] = item;
    } else if (item == 'Oranges') {
        itemsOrdered['2'] = item;
    } else if (item == 'Grapes') {
        itemsOrdered['1'] = item;
    } else if (item == 'Peaches') {
        itemsOrdered['3'] = item;
    } else if (item == 'Bananas') {
        itemsOrdered['6'] = item;
    } else if (item == 'Watermelon') {
        itemsOrdered['5'] = item;
    }
} 
```

**顺序应该是：**

*   苹果：4
*   橙子：2
*   葡萄：1
*   桃子：3
*   香蕉：6
*   西瓜：5

**所有这些项目可能并不总是在数组中。可能只有 Apples 和 Bananas，但它们仍然需要相同的排序位置。**

**我必须在创建数组后设置此手动排序顺序，因为我们的系统以这种随机顺序将它们打印出来，然后我们需要正确排序。**

最后，我需要将正确排序的水果放回数组中。

想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T17:46:01.930

尝试：

```
var items = ["Apples", "Bananas", "Watermelons"];
var itemsOrdered = [];
var theOrder = ["Grapes", "Oranges", "Peaches", "Apples", "Watermelons", "Bananas"];

for (var i = 0; i < theOrder.length; i++) {
    if (items.indexOf(theOrder[i]) > -1) {
        itemsOrdered.push(theOrder[i]);
    }
}

console.log(itemsOrdered); 
```

**演示：http:** [//jsfiddle.net/JPNGS/](http://jsfiddle.net/JPNGS/)

顺序在 中定义`theOrder`。`items`包含可用的项目。`itemsOrdered`包含可用项目，已订购。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-25T17:44:25.327

将您的订单放入一个对象中，如下所示：

```
var ordering = {};
ordering["Apples"] = 4;
ordering["Oranges"] = 2;
... // etc. 
```

然后使用 对`items`数组进行排序`Array.sort(compareFunction(a, b))`，传递给它一个排序函数来检查你的对象`ordering`（留作练习）。查看[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)了解如何`compareFunction()`使用。

编辑：这是一个实现：

```
var ordering = {"Apples":4, "Oranges":2, "Grapes":1, 
                "Peaches":3, "Bananas":6, "Watermelons":5};
var items = ["Apples", "Oranges", "Grapes", 
             "Peaches", "Bananas", "Watermelons"];
items.sort(function(a,b) { return ordering[a] - ordering[b]; })
> ["Grapes", "Oranges", "Peaches", "Apples", "Watermelons", "Bananas"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:55:48.737

首先将您的对象转换为数组：

```
var sortOrder = [];

for (i in itemsOrdered)
    sortOrder[i-1] = itemsOrdered[i]; 
```

然后`.filter()`像这样使用：

```
var result = sortOrder.filter(item) {
    return items.indexOf(item) !== -1;
}); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-25T17:42:20.357

您的代码简化为：

```
var itemsOrdered = {1:"Peaches",2:"Oranges",3:"Grapes",4:"Apples",5:"Watermelon",6:"Bananas"}; 
```

换句话说，这完全没有意义。只需按照您想要的顺序定义它们。

# facebook - 在 Facebook 应用程序中清除提要对话框的缓存

> ID：16221204
> 
> 赞同：0
> 
> 时间：2013-04-25T17:37:33.030
> 
> 标签：facebook, api, facebook-graph-api, caching, cookies

我有一个使用提要对话框的 facebook 应用程序：

```
FB.ui({ 
method: 'feed', 
message: '', 
link: 'http://mywebaddress/pathToContent', 
picture: 'http://mywebaddress/pathToPhoto/photo.jpg', 
display: 'popup'
}); 
```

当我使用该应用分享内容时，我忘记上传图片，所以出现了分享对话框，图片已损坏。现在我上传了图片，但我无法让它显示出来。

1) 尝试使用调试器，它在 og:image 中显示正确，但当然提要对话框与 og 标签不同，因此在这种情况下没有用。

2) 它适用于其他帐户。只有我的坏了，因为我试图在不上传图像的情况下分享。

3）尝试在不同的浏览器中，并尝试清除cookies、缓存等...

4）如果我重命名文件，它会起作用

您是否知道一种强制清除 facebook 缓存的方法，或者它应该按时间进行或什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T17:51:08.723

我一直在处理 Facebook 缓存的类似问题。您可以尝试使用

```
curl -v https://developers.facebook.com/tools/lint/?url=YOUR_URL_HERE&format=json
```

在控制台窗口中。这在我的情况下不起作用，但我在网页而不是应用程序上尝试它，所以你可能会有更好的运气。希望能帮助到你。

# java - JTable 中的可点击 html 链接

> ID：16221207
> 
> 赞同：1
> 
> 时间：2013-04-25T17:37:43.157
> 
> 标签：java, swing, jtable, tablecellrenderer

我到处寻找，但没有找到答案。对不起，如果这已经发布过。

当单元格本身只包含一个 URL 时，我知道如何做一个可点击的 URL，它基本上只是将一个鼠标侦听器附加到一个表并获取单击了哪一行并获取值。所以这很容易。

我的问题是我在一个单元格中有多个链接，因此当用户单击这些链接时，我需要发生不同的事情。例如：

```
class MyTableModel extends AbstractTableModel {

@Override
        public Object getValueAt(int rowIndex, int columnIndex) {

             switch (columnIndex) {
             case 0:
                  return "<html><a href='www.test.com'>test1</a> <a href='www.test2.com'>test2</a></html>";

             default:
                    throw new IndexOutOfBoundsException();
             }    
        }
} 
```

所以我有两个不同的链接需要彼此相邻。我如何找出其中的哪一个被点击了？

找出点击了哪一行并不难，但是如何找出点击了行内的哪个元素呢？

编辑：不能使用 JEditorPane 因为它弄乱了单元格内的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:06:12.623

为此，您必须将单元格设置为 JEditorpane。正如您提到的，您使用的单元格（可能是它的 Jtable）使 jtable 自定义和可编辑单元格。

查看此链接：

[文本窗格](http://www.daniweb.com/software-development/java/threads/331500/how-can-i-add-a-clickable-url-in-a-jtextpane)

[教程](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JEditorPane.html)

# sql-server - Crystal Reports 中的日期时间参数

> ID：16221209
> 
> 赞同：0
> 
> 时间：2013-04-25T17:37:49.707
> 
> 标签：sql-server, date, datetime, stored-procedures, crystal-reports

我在 SQLServer 中编写了一个存储过程，它接受 2 个参数，都是 dateTime 格式。存储过程的想法。是为了让用户能够搜索 2 个不同日期之间的特定案例。用户以 mm/dd/yyyy 格式输入日期，这将正确返回数据。

现在我需要把它变成一个水晶报表。我将报告设置为使用我编写的存储过程。当 Crystal 询问 2 个参数的值时，它不会接受它们为 mm/dd/yyyy 格式。它试图让我将它们放入 yyyy-mm-dd hr:mn:scds 格式。

有没有办法可以设置报告以接受 mm/dd/yyyy 格式的参数？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T18:20:15.083

据我所知，您无法控制日期参数的输入格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-19T06:00:02.967

在水晶报表中，您可以右键单击日期变量并转到格式，然后选择您希望日期出现的方式。

如果从数据库中正确获取日期，您可以通过更改格式来显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-22T04:42:54.583

Crystal Reports 使用存储过程中的数据类型。如果您的 SProc Crystal 中有日期，则会将该值视为字符串，并且不会在参数弹出窗口中显示日历图标。解决方案是将 sProc 中的 Date 更改为 DateTime，如果您的用户单击日历图标，Crystal 将自动显示日历图标和格式为 yyyy-mm-dd。我知道您可能想要 DATE 而不是 DATETIME 但使用 DATETIME 我不相信还有其他答案。

# vim - 为什么这个 Vim 映射的行为会根据进入可视模式的方式而有所不同？

> ID：16221213
> 
> 赞同：3
> 
> 时间：2013-04-25T17:38:08.403
> 
> 标签：vim, insert, keymapping

这个问题引发了我之前的一个问题： [Vim's '(insert) VISUAL' mode?](https://stackoverflow.com/questions/16203524/vims-insert-visual-mode)

在那个问题中，我询问了“ `VISUAL`”模式与“ `(insert) VISUAL`”模式，这是您直接从插入模式进入视觉模式的地方。我发现了一个根据视觉模式的“子类型”表现不同的映射，我不明白为什么：

```
vnoremap x <Esc>jjj
vnoremap <A-[> <C-G>ugv 
```

第一个映射说明了 Vim 如何不遗余力地使映射行为一致：`x`从 " `VISUAL`" 模式按下和`x`从 " " 模式按下`(insert) VISUAL`都会将光标向下移动 3 行。后者不退出插入模式并进入三个`j`'s。因此`<Esc>`，即使在映射之外它的行为与这两种模式不同，它的行为也不会因模式而异。

第二个映射说明了一些映射如何表现不一致。如果您突出显示一个单词并按`ALT`+ ，则如果从“ ”模式完成，`[`则该单词将被替换，但如果从“”模式完成，则不会发生任何事情。这大概是因为 Vim 正在执行'undo' 和 'reselect-visual' 的正常模式命令。 `ugv``VISUAL``(insert) VISUAL``ugv`

这是一个奇怪的不一致。这是我在调试映射时遇到的一个最小示例，并且想知道它为什么会这样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T07:10:36.927

我可以重现你的例子，我认为你的分析是正确的。

当我从*（插入）可视模式***键入** 时，我得到了预期的结果：切换到*（插入）选择*模式，用这些字符替换选择。映射应该以相同的方式运行。`<C-G>ugv`*`<C-G>`*`ugv`**

 **我想这是一个错误；整个*（插入）*子模式非常特殊，不经常使用，因此容易出现错误。您可以自己深入研究源代码，或者在[vim_dev 邮件列表中](http://www.vim.org/community.php)提出这个问题。不过，由于问题的模糊性，可能很难引起开发人员的极大兴趣。**

# php - 标题（“位置：”）使用安全吗？

> ID：16221214
> 
> 赞同：1
> 
> 时间：2013-04-25T17:38:11.473
> 
> 标签：php

我想知道我正在使用的东西是否安全：

```
 Header(“Location:”); 
```

我想这样使用它： $user 将是用户的会话，1 表示管理员。（只是一个例子。）

```
 if($user != 1){ 
     header("location: index.php"); } 
```

那么这是否会阻止用户使用该页面，包括下载文件、查看该页面的来源？因为我的管理面板将下载并插入主页..

如果它不安全使用，或者我使用它的方式。我应该改用什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:39:30.650

`die()`设置 Location 标头后不要忘记。这就是真正阻止人们使用他们不应该使用的页面的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T17:42:25.677

`header()`使用是安全的，但这意味着您必须在您不希望非管理员查看的*每个页面中包含该调用。*

更好的方法是拥有一个经过身份验证的用户类来处理这个问题。好处是，它会干燥你的代码。

```
<?php
class User
{
    public function __construct()
    {
        // create your user however, i.e. fetch a record from your database
    }    

    public function isAdmin()
    {
        return ($this->user->role == 'admin');
    }

    public function redirect()
    {
        header('Location: index.php');
        exit;
    }
} 
```

然后在您的代码中使用它：

```
<?php

$user = new User();

if (!$user->isAdmin()) {
    $user->redirect();
}

// continue with your page as normal; user here is an admin 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T17:40:07.243

你需要放在`exit;`标题之后

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T17:41:19.633

我觉得更好的方法是退出页面并阻止任何其他代码执行。我不确定，但如果用户愿意，他们可能能够忽略标头重定向请求。

我总是只添加一个小片段，例如“对不起，这仅对管理员可用”，然后返回；或退出；

编辑：伟大的googly moogly你们很快就可以平局了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T17:44:05.033

所以这里发生的情况是，通过设置`Location`标签，您实际上是在返回一个 HTTP 30x 请求，将用户浏览器指向新页面。但它在浏览器的手中尊重它。如果浏览器/用户是恶意的，他可能会忽略它。

因此，您需要在发送 Location 标头后立即停止输出`die()`。比它更安全 - 浏览器没有得到任何它不应该得到的数据

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T17:59:52.967

使用`die(header("Location:..."));`杀死页面

# python - python 正则表达式，删除除 \d \s \w 之外的所有内容

> ID：16221215
> 
> 赞同：0
> 
> 时间：2013-04-25T17:38:14.257
> 
> 标签：python, regex

如何制作一个python RegEx，它从文本中删除所有字符，除了：`\d \w \s`

我试过这样的事情：

```
import re
re.sub(r'\W*\D*\S*', '', 'this is my<\n test <+-,1345.;>') 
```

但这给了我一个空字符串。我想得到：`this is my test ,1234.`。我也想保留`,`和`.`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T17:40:29.857

使用倒置字符类：

```
re.sub(r'[^., \t\w]*', '', 'this is my<\n test <+-,1345.;>') 
```

演示：

```
>>> re.sub(r'[^., \t\w]*', '', 'this is my<\n test <+-,1345.;>')
'this is my test ,1345.' 
```

,`\W`和`\S`类*太宽*`\D`了。例如，匹配大部分匹配项，删除任何包含的内容会删除太多。任何不是数字的东西都将被删除，但你想保留字母和标点符号。*`\D``\w``\D`*

 *我`\s`用文字空格和制表符替换，因为你想删除换行符（也是空格），我添加了`.`，`,`所以这些也被保留了。`\d`也不需要，`\w`是 的超集`\d`。*

# sql - 使用多个 Where 条件进行选择

> ID：16221216
> 
> 赞同：0
> 
> 时间：2013-04-25T17:38:14.200
> 
> 标签：sql, sql-server-2008, tsql

我正在尝试为一系列不同的标准进行选择。我基本上要取今天的日期，并将其用于我们的发票表，以了解与过去几年相比，我们今年的情况如何。

最后，我基本上想要有年份、年初至今销售额、季度至今销售额和月至今销售额的列。我已经开始为此创建一个循环，但我遇到的问题是它正在执行几个选择，而不是返回一个数据集，而是返回 3 个。

解决这个问题的最佳方法是构建一个虚拟表，用我的结果填充它，然后从中选择它们吗？

这是我到目前为止所拥有的：

```
DECLARE @startDate date, @endDate date;
DECLARE @counter int = 0;

WHILE @counter < 3 BEGIN
    --set start and end dates
    SELECT @startDate = CONVERT(date, (CONVERT(nvarchar, YEAR(DATEADD(YEAR,-1 * @counter, CONVERT(date, GETDATE())))) + '-02-01'));
    SELECT @endDate = DATEADD(YEAR,-1 * @counter, CONVERT (date, GETDATE()));

    --select results
    SELECT YEAR(ib.DateDelivered) [Year], SUM(ib.TotalAmountLessFreight) [YTD Sale]
    FROM InvoiceBase ib
    WHERE ib.DateDelivered < @endDate
        AND ib.DateDelivered > @startDate
    GROUP BY YEAR(ib.DateDelivered);

    --increment
    SET @counter = @counter + 1;
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:17:11.943

最好的方法是在单个查询中。尝试：

```
;with cte as
(select i.*, 
        dateadd(year, datediff(year,DateDelivered,getdate()), getdate()) [YearEnd]
 FROM InvoiceBase i)
select YEAR(DateDelivered) [Year],
       SUM(case when DateDelivered <= YearEnd 
                then TotalAmountLessFreight end) [YTD Sales],
       SUM(case when DateDelivered <= YearEnd and 
                     month(DateDelivered) >= floor((month(YearEnd)+2)/3)*3-2
                then TotalAmountLessFreight end) [QTD Sales],
       SUM(case when DateDelivered <= YearEnd and 
                     datediff(month, DateDelivered, YearEnd) = 0
                then TotalAmountLessFreight end) [MTD Sales]
FROM cte
GROUP BY YEAR(DateDelivered) 
```

# c++ - 为什么我们用汇编语言编写os的一部分，而用c这样的高级语言编写一部分？

> ID：16221217
> 
> 赞同：2
> 
> 时间：2013-04-25T17:38:17.780
> 
> 标签：c++, c, assembly, operating-system

在实现操作系统时，除了很小的一部分是用汇编编写的，而大部分是用高级语言（如 C/c++）编写的高级语言

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:40:59.417

首先，我不确定 C 是否有资格成为*高级*语言（恕我直言，它是一种低级语言；Haskell、Ocaml ......比 C 更高级别）。

然后，并非操作系统内核中的所有内容都可以在便携式 C 中实现。硬件相关的东西（中断处理、调度、分页、访问硬件 I/O 端口……）通常需要一些汇编代码。

（您也许可以`asm`在 C 中嵌入带有关键字的代码，但这不算作可移植 C）。

# sql - SQL，从表 A 中选择并使用结果 ID 循环通过表 B？

> ID：16221220
> 
> 赞同：0
> 
> 时间：2013-04-25T17:38:25.177
> 
> 标签：sql, while-loop

我有一个运行 MS-SQL 2008 的 Windows 服务器。

我有一个客户表，我需要选择所有活跃、暂停或暂停的客户的 ID。

获取 Y= 当前活跃客户 H= 暂停 S= 暂停的所有客户

```
select id from customer where active = 'Y'; 
```

上述语句适用于选择受影响客户的 ID。

我需要使用这些结果来循环执行以下命令，以找出所有受影响客户的费率。

获取客户的所有费率

```
select rgid from custrate where custid = [loop though changing this id with results from first statement]; 
```

customer 表中的 id 与 custrate 表中的 custid 一致。

所以最后我需要一份所有受影响的客户 ID 的列表以及他们拥有的 rgid（费率组）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:43:53.610

SQL 通常与循环无关，相反，您应该考虑连接。

```
select customer.id, custrate.rgid, customer.active
from customer
inner join custrate
  on customer.id = custrate.custid
where active in ('Y', 'H', 'S")
order by customer.active, customer.id 
```

将是一个思考的起点。然而，这只是一个疯狂的猜测，因为没有指定模式，也没有指定表之间的关系。

# java - 对象数组添加只添加最后一条记录

> ID：16221224
> 
> 赞同：0
> 
> 时间：2013-04-25T17:38:44.060
> 
> 标签：java, object, arraylist

我正在尝试将对象添加到数组列表。

对象定义为：

```
ExercisesGroup group = new ExercisesGroup(); 
```

数组列表定义为：

```
ArrayList<ExercisesGroup> groups = new ArrayList<ExercisesGroup>(); 
```

然后我在循环中填充对象（rs 是来自数据库的结果集）：

```
while (rs.next()){
    group.setExerciseGroupId(rs.getInt("idbodyarea"));
    group.setExerciseGroupDescription(rs.getString("bodyareadescription"));
    groups.add(group);
} 
```

当我返回arraylist 'groups' 时，添加了正确数量的结果，但是数据都是相同的，即为每个插槽添加最后一条记录。

```
<exerciseGroupsReturn>
        <exerciseGroupDescription>Description2</exerciseGroupDescription>
        <exerciseGroupId>2</exerciseGroupId>
 </exerciseGroupsReturn>
 <exerciseGroupsReturn>
        <exerciseGroupDescription>Description2</exerciseGroupDescription>
        <exerciseGroupId>2</exerciseGroupId>
 </exerciseGroupsReturn> 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:39:20.700

您需要在每次迭代时创建对象的新实例：

```
while (rs.next()){
   group = new ExercisesGroup();
   //...
} 
```

此外，如果将`groups`变量的声明从`ArrayList<ExercisesGroup>`更改为 会更好`List<ExercisesGroup>`。请参阅[“编程到接口”是什么意思？](https://stackoverflow.com/q/383947/1065197)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:40:39.817

看起来您正在循环之外创建 ExcerciseGroup，因此您始终引用同一个对象。将ExerciseGroup 构造函数放入循环中。

# asp.net-mvc-3 - 如何在 MVC 中使用存储库模式创建动态的多个局部视图

> ID：16221225
> 
> 赞同：5
> 
> 时间：2013-04-25T17:38:46.320
> 
> 标签：asp.net-mvc-3, model-view-controller, model, partial-views, renderpartial

我试图有一个通用主页，根据传递给控件的参数，将显示不同的内容（模块）。

例如，用户可以从菜单中选择 Kentucky，Kentucky 的 id 为 1。家庭控制器获取 id (1) 并确定该状态的可能模块（一个简单的 db 调用）。也许有一个公告模块和状态的联系人模块。一个公告模块可以有多个项目，但它只有一个模块。每种类型的模块都会有一个局部视图。

这是我的基本设置。

```
public interface IModuleRepository
{
    IList<MenuItemModule> GetMenuItemModules(int menuItem);
    IList<Announcements> GetAnnouncements(int modID);
    IList<News> GetNews(int modID);
    IList<Contacts> GetContacts(int modID);
}

//business object
public class MenuItemModule
{

    private int _MenuItemID;
    private int _ModuleID;
    private int _ModuleDefID;
    private string _Src;
    private int _ModuleOrder;

//get, set properties for these...

}

//announcements entity
public class Announcements
{
    private int _ID = -1;
    private int _MenuItemID = -1;
    private int _ModuleID = -1;
    private string _Description = string.Empty;

//get set props ...
} 
```

在我的家庭控制器中...

```
public class HomeController : Controller
{

    private IModuleRepository modRepository;

    public HomeController(IModuleRepository modRepository)
    {
        this.modRepository = modRepository;
    }

    public ViewResult Item(string ItemID)
    {

        //returns a list of menuitemmodules for the page.  This gives me the Src or name of each
        //module on the page, i.e. Announcements, news, contacts, etc. 
        var modules = modRepository.GetMenuItemModules(Convert.ToInt32(ItemID)); 

        return View(modules);

   }

} 
```

我尝试了几种不同的模型来返回，但我总是遇到一些限制。如果我将 menuitemmodules 传递给我的 Item.aspx，那么我可以执行以下操作：

```
 foreach (var mod in Model)           
   {               
        Html.RenderPartial(mod.Src, a);      //needs an announcement object though    
   } 
```

这使它有点动态，因为我有 Src，它基本上类似于“公告”，我可以创建一个公告.ascx 部分来处理模块。但是我发现传递我的 menuitemmodule 和通知实体也很困难。

我还搞砸了传递一个更复杂的对象，然后测试每个带有 If 语句的 Src。随着我增加应用程序中可能模块的数量，这将使未来的扩展变得困难。

我该如何解决我的问题？我希望我提供了足够的信息。我喜欢这里的基本想法 - [http://www.mikesdotnetting.com/Article/105/ASP.NET-MVC-Partial-Views-and-Strongly-Typed-Custom-ViewModels](http://www.mikesdotnetting.com/Article/105/ASP.NET-MVC-Partial-Views-and-Strongly-Typed-Custom-ViewModels)但这似乎只适用于静态模块页面。

我确实尝试了一个名为 ModuleViewModel 的复合视图模型。这是尝试：

```
public class ModuleViewModel
{
    public IList<Announcements> announcements { get; set; }
    public IList<MenuItemModule> mods { get; set; }

} 
```

如果我将该模型传递给 Item.aspx，我可以做这样的事情（但我一定做错了什么，因为某些事情看起来不正确。）

```
 foreach (var mod in Model)           
   {

       if (mod.announcements.Count > 0)
       {
           Html.RenderPartial("Announcements", mod.announcements);
       }

   } 
```

再一次，可扩展性将困扰我。我想在项目页面上有这样的东西：

```
 foreach (var mod in Model)           
   {

           Html.RenderPartial(mod.Src, mod);          

   } 
```

那将是正确的局部视图并将其传递给正确的模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:59:50.280

创建从通用模块基类派生的模块类：

```
public class AnnouncementsModule : Module
{
}

public class ContactsModule : Module
{
} 
```

在控制器中：

创建各种模块并将它们放入您的整体视图模块中（这里它有一个名为 Modules 的属性，它是一个数组`Module`：

```
var viewModel = new ComplexViewModel 
                { 
                    Modules = new [] 
                    { 
                       new ContactsModule(), 
                       new AnnouncementsModule() 
                    }
                 };
return View(viewModule); 
```

鉴于：

```
@Html.DisplayFor(x => x.Modules); 
```

`Type`在适当的“共享”文件夹中为每个模块创建部分视图。（在不创建它们的情况下运行它，它会向您显示它正在寻找它们的位置的异常）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T15:55:44.887

在搞砸了一个多星期之后，我终于设法弄清楚 MVC 如何动态地做我想做的事。我决定为 MVC 新手发布我的解决方案。希望以下内容能够消除我的误解（尽管在我对 MVC 的理解中，我不能说这是最好的方法。）

为了清楚起见，我将包括以前的代码片段和修改：

```
 public interface IModuleRepository
 {
      IList<MenuItemModule> GetMenuItemModules(int menuItem);
      IList<Announcements> GetAnnouncements(int modID);
      IList<News> GetNews(int modID);
      IList<Contacts> GetContacts(int modID);
 }

//business object
public class MenuItemModule
{

    private int _MenuItemID;
    private int _ModuleID;
    private int _ModuleDefID;
    private string _Src;
    private int _ModuleOrder;

//get, set properties for these...

}

//announcements entity
public class Announcements  : MenuItemModule
{
    private int _ID = -1;
    private string _Description = string.Empty;

//get set props ...
} 
```

我还添加了另一个类：

```
public class AnnouncementModule : MenuItemModule
{
    private IList<Announcements> _Announcements;
    //get set prop
} 
```

...我为视图创建了一个模型

```
public class HomeItemViewModel
{
    public MenuItemModule[] MenuItemModules { get; set; } //collection of menuitemmodules
} 
```

在我的家庭控制器中...

```
 var menuItemModules = modRepository.GetMenuItemModules(ItemID);

    if (menuItemModules.Count > 0)
    {
        AnnouncementModule aMod;
        MenuItemModule[] mods = new MenuItemModule[menuItemModules.Count()];

        int i = 0;

        //loop through each MenuItemModule assign to the appropriate model
        foreach (MenuItemModule mod in menuItemModules)
        {
            if (mod.Src == "Announcements")
            {
                aMod = new AnnouncementModule();
                aMod.Announcements = modRepository.GetAnnouncements(mod.ModuleID);

                //now add this to the menuitemmodule collection
                mods[i] = aMod;
            }

            if (mod.Src == "Contacts")
            {
                //...
            }

            i++;
        }

    }

    var viewModel = new HomeItemViewModel
    {
        MenuItemModules = mods
    };

    return View(viewModel); 
```

然后我使用了在视图中使用 DisplayFor 的建议。视图被强类型化为 HomeItemViewModel。

```
<%: Html.DisplayFor(m => m.MenuItemModules) %> 
```

这将遍历集合并根据类型调用该模板。在这个例子中，它调用 AnnouncementModule.ascx，它是强类型的 AnnouncementModule。

```
foreach (var a in Model.Announcements)
{
    //a.Description will give us the description of the announcement
} 
```

* * *

我意识到有更巧妙的方法来编写控制器，并且我计划重构，但是这个框架应该提供解决我发布的问题的基础知识。

# java - JavaFx，多线程应用程序，奇怪的异常

> ID：16221231
> 
> 赞同：0
> 
> 时间：2013-04-25T17:38:58.587
> 
> 标签：java, multithreading, user-interface, javafx-2, javafx

我正在开发一个 JavaFx 应用程序。应用程序创建多个线程（同一类）。线程在这里创建：

```
for (i = 0; i < turtlesNumber; i++) {
        TurtleRunThread turtleRunThread = new TurtleRunThread();

        turtleRunThread.setController(this.controller);
        turtleRunThread.setTurtle(this.model.getTurtles().get(i));
        turtleRunThread.setFinish(this.mainUI.getRacePane().getWidth() - 47.3);

        turtleRunThread.start();

        threadArrayList.add(turtleRunThread);
    } 
```

这是线程类的run方法：

```
 public void run() {
    //this.controller.run(this.turtle, this.finish);

    long speed = 500;
    double step = 20; //10 pixeli

    while (turtle.getX() < finish) {
        Random random = new Random();

        controller.modifyTurtlePosition(turtle, speed, step);

        if (Math.random() < 0.2) {
            if (Math.random() < 0.5) {
                if (speed > 100)
                    speed -= random.nextLong() % (((double)1 / 3) * speed);
            } else {
                if (speed < 1500)
                    speed += random.nextLong() % (((double)1 / 3) * speed);
            }
        }
    }
} 
```

这是控制器方法“modifyTurtlePositions(...)”：

```
 public void modifyTurtlePosition(final ImageView turtle, long speed, double step) {
    Timeline timeline = new Timeline();

    final double newX = turtle.getX() + step;

    KeyValue keyValue = new KeyValue(turtle.xProperty(), turtle.getX() + step);
    KeyFrame keyFrame = new KeyFrame(Duration.millis(speed), keyValue);

    timeline.getKeyFrames().add(keyFrame);

    timeline.setOnFinished(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent actionEvent) {
            turtle.setX(newX);
        }
    });

    timeline.play();

    try {
        Thread.sleep(speed);
    } catch (InterruptedException e) {
        System.err.println(e.getMessage());
    }
} 
```

问题是，如果我不同步这个方法，我会得到以下异常：

```
Exception in thread "Thread-16" java.lang.ArrayIndexOutOfBoundsException: 2
at java.util.ArrayList.add(ArrayList.java:412)
at com.sun.scenario.animation.AbstractMasterTimer.addPulseReceiver(AbstractMasterTimer.java:211)
at com.sun.scenario.animation.shared.AnimationPulseReceiver.addPulseReceiver(AnimationPulseReceiver.java:70)
at com.sun.scenario.animation.shared.AnimationPulseReceiver.start(AnimationPulseReceiver.java:84)
at javafx.animation.Animation.play(Animation.java:775)
at javafx.animation.Animation.play(Animation.java:762)
at sample.Controller.modifyTurtlePosition(Controller.java:95)
at sample.TurtleRunThread.run(TurtleRunThread.java:35)
    java.lang.NullPointerException
at     com.sun.scenario.animation.AbstractMasterTimer.timePulseImpl(AbstractMasterTimer.java:366)
at com.sun.scenario.animation.AbstractMasterTimer$MainLoop.run(AbstractMasterTimer.java:289)
at com.sun.javafx.tk.quantum.QuantumToolkit.pulse(QuantumToolkit.java:456)
at com.sun.javafx.tk.quantum.QuantumToolkit$9.run(QuantumToolkit.java:329)
at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
at java.lang.Thread.run(Thread.java:722) 
```

你有什么主意吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T20:25:01.533

换成：`controller.modifyTurtlePosition(turtle, speed, step);`_`Platform.runLater()`

```
Platform.runLater(new Runnable() {
    public void run() {
        controller.modifyTurtlePosition(turtle, speed, step);
    }
} 
```

所有 UI 操作都必须在 UI 线程上完成。

# android - 将 myObject (serializzable) 从 Activity 发送到 Fragment

> ID：16221233
> 
> 赞同：0
> 
> 时间：2013-04-25T17:39:06.633
> 
> 标签：android, android-activity, fragment

嗨，我的活动必须使用套接字接收一个对象..

此活动在片段 A 和片段 B 内。

我希望每次活动接收对象时，将其发送到片段 A。

我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:17:05.577

我认为这是一个完美的例子，说明事件总线非常方便。查看[Square 的 Otto](http://square.github.io/otto/)。如果您创建事件总线并使其可用于您的活动和片段（通过静态类或使用依赖注入），您可以通过总线发送 myObject 而无需序列化它。

这是一些示例代码。首先，我在 OttoBus.java 中创建一个可静态访问的全局事件总线。这是我们将在活动和片段之间来回传递消息的总线。在活动中，我假设您将拥有某种从套接字接收数据的方法。接收到的数据将被放入一个 SocketDataReceivedEvent 对象并在总线上发送。在您的片段中，您在片段启动时在总线上注册片段，并在片段停止时取消注册（以避免泄漏）。Fragment 还必须具有处理 SocketDataReceivedEvent 的方法。这个方法可以任意命名，只要它带有 @Subscribe 注释并接受一个 SocketDataReceivedEvent 作为它的唯一参数。

```
---- OttoBus.java
import com.squareup.otto.Bus;

public class OttoBus {

    private static Bus bus = new Bus();

    public static void register(Object o) {
        bus.register(o);
    }

    public static void post(Object data) {
        bus.post(data);
    }

    public static void unregister(Object o) {
        bus.unregister(o);
    }
}

---- SocketDataReceivedEvent.java
public class SocketDataReceivedEvent {

    public Object data;

    public SocketDataReceivedEvent(Object data) {
        this.data = data;
    }
}

---- YourActivty.java
public class YourActivity extends Activity {

    public void receiveSomethingOnSocket(Object theDataYouReceived) {
        OttoBus.send(new SocketDataReceivedEvent(theDataYouReceived));
    }
}

---- YourFragment.java
public class YourFragment extends Fragment {

    @Override
    public void onStart() {
        super.onStart();
        OttoBus.register(this);
    }

    @Override
    public void onStop() {
        super.onStop();
        OttoBus.unregister(this);
    }

    @Subscribe
    public void onSocketData(final SocketDataReceivedEvent e) {
        // do something with e.data
    }
} 
```

# c# - 在 Win7 和 Vista 上使用 PrintDocument 将多个图像打印到传真虚拟打印机会导致 TIFF 损坏

> ID：16221234
> 
> 赞同：0
> 
> 时间：2013-04-25T17:39:09.883
> 
> 标签：c#, .net, windows-7, printing, windows-vista

我有一个应用程序，该应用程序用于[`PrintDocument`](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.aspx)将多个图像作为单个打印作业打印，每页一张图像。我遇到了一个非常具体但常见的配置问题，我想知道如何纠正它。

该代码在我有权访问的任何物理打印机和所有桌面 Windows 操作系统上的 Microsoft XPS Document Writer 上都可以正常工作。但是，打印到传真虚拟打印机（Windows 操作系统的标准配置）仅适用于 Windows XP 和 Windows 8。当我在 Windows Vista 或 Windows 7 上打印到传真打印机时，表明它打印成功；但是，如果有多个页面并且您打开创建的 .tif 图像 Windows 照片查看器说

> Windows 照片查看器无法打开此图片，因为该文件似乎已损坏、损坏或太大。

该消息来自 Windows 7，文本在 Vista 上可能略有不同。如果只有一个图像（因此是一个页面），它可以正常工作。

如果传真已发送，则显示为空白。我还尝试在 GIMP 中打开 .tif 图像并使用 ImageMagick 处理它，这两种方法都失败，表明它是一个错误的 .tif 文件。

这是产生问题的代码，为了提供更简洁的示例，已经删除了一些健壮性。

```
internal void Print( string printerName )
{
    PrintDocument printDocument = new PrintDocument
        {
            PrinterSettings = new PrinterSettings {PrinterName = printerName}
        };

    IEnumerable<string> filesToPrint = new[]{"File1.png", "File2.png"};

    IEnumerator<string> enumerator = filesToPrint.GetEnumerator();
    enumerator.MoveNext()

    printDocument.PrintPage += (sender, args) =>
        {
            string fileName = enumerator.Current;

            using (var img = System.Drawing.Image.FromFile(fileName))
            {
                args.Graphics.DrawImage(img, args.PageBounds);
            }

            var moveNext = enumerator.MoveNext();

            args.HasMorePages = moveNext;

            if (!moveNext)
            {
                enumerator.Dispose();
            }
        };

    printDocument.Print();
} 
```

这仅仅是那些操作系统上的传真打印机的问题还是上述代码有问题？我该如何解决这个问题？

[此 Microsoft 修补程序](http://support.microsoft.com/kb/2635500)没有特别提及传真，但确实有正确的错误消息，所以我尝试应用它。它没有任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T14:28:17.990

我在 Microsoft 合作伙伴支持社区中追求这一点。最终的回复是他们已经确认了这个问题，并且“升级工程师正在处理这个问题”。

我自己想出的解决方法是使用[`System.Printing`](http://msdn.microsoft.com/en-us/library/system.printing.aspx)而不是[`System.Drawing.Printing`](http://msdn.microsoft.com/en-us/library/5ekk3hse.aspx).

```
internal override void Print(string printerName, string baseFilePath, string baseFileName)
{
    using (var printQueue = GetPrintQueue(printerName))
    {
        XpsDocumentWriter xpsDocumentWriter = PrintQueue.CreateXpsDocumentWriter(printQueue);

        IEnumerable<string> filesToPrint = GetFilesToPrint(baseFilePath, baseFileName);

        PrintUsingCollator(xpsDocumentWriter, filesToPrint);
    }
}

private static void PrintUsingCollator(XpsDocumentWriter xpsDocumentWriter,
                                       IEnumerable<string> filesToPrint)
{
    SerializerWriterCollator collator = xpsDocumentWriter.CreateVisualsCollator();

    collator.BeginBatchWrite();

    foreach (var fileName in filesToPrint)
    {
        Image image = CreateImage(fileName);

        ArrangeElement(image);

        collator.Write(image);
    }

    collator.EndBatchWrite();
}

/// <remarks>
/// This method needs to be called in order for the element to print the right size.
/// </remarks>
private static void ArrangeElement(UIElement element)
{
    var box = new Viewbox {Child = element};

    box.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity));
    box.Arrange(new Rect(box.DesiredSize));
} 
```

`System.Printing`是基于 WPF 的较新的 API。在这种特殊情况下，它的缺点是它是内存使用。因为`System.Windows.Controls.Image`是 GC-ed（`System.Drawing.Image`需要显式处理）并且我正在加载相对较大的图像，所以它似乎确实会稍微影响内存使用，最终在大型作业上会慢一些。

# sql - 我能做些什么来加快这个慢查询？

> ID：16221238
> 
> 赞同：2
> 
> 时间：2013-04-25T17:39:23.033
> 
> 标签：sql, performance, optimization, sybase

我们有一个庞大的、多表的 Sybase 查询，我们称之为`get_safari_exploration_data`查询，它获取与探险者进行 safari 以及他们遇到的所有动物相关的各种信息。

这个查询很慢，我被要求加快速度。让我大吃一惊的第一件事是，似乎并不迫切需要`SELECT`外部`FROM`子句中的嵌套语句。在那个嵌套`SELECT`的 中，似乎也有几个不需要的字段（`vegetable`、`broomhilda`、`devoured`等）。我也对连接的使用（“ `*=`”而不是“INNER JOIN...ON”）持怀疑态度。

```
SELECT
    dog_id,
    cat_metadata,
    rhino_id,
    buffalo_id,
    animal_metadata,
    has_4_Legs,
    is_mammal,
    is_carnivore,
    num_teeth,
    does_hibernate,
    last_spotted_by,
    last_spotted_date,
    purchased_by,
    purchased_date,
    allegator_id,
    cow_id,
    cow_name,
    cow_alias,
    can_be_ridden
FROM
(
    SELECT
        mp.dog_id as dog_id,
        ts.cat_metadata + '-yoyo' as cat_metadata,
        mp.rhino_id as rhino_id,
        mp.buffalo_id as buffalo_id,
        mp.animal_metadata as animal_metadata,
        isnull(mp.has_4_Legs, 0) as has_4_Legs,
        isnull(mp.is_mammal, 0) as is_mammal,
        isnull(mp.is_carnivore, 0) as is_carnivore,
        isnull(mp.num_teeth, 0) as num_teeth,
        isnull(mp.does_hibernate, 0) as does_hibernate,
        jungle_info.explorer as last_spotted_by,
        exploring_journal.spotted_datetime as last_spotted_date,
        jungle_info.explorer as purchased_by,
        early_exploreration_journal.spotted_datetime as purchased_date,
        alleg_id as allegator_id,
        ho.cow_id,
        ho.cow_name,
        ho.cow_alias,
        isnull(mp.is_ridable,0) as can_be_ridden,
        ts.cat_metadata as broomhilda,
        ts.squirrel as vegetable,
        convert (varchar(15), mp.rhino_id) as tms_id,
        0 as devoured
    FROM
        mammal_pickles mp,
        very_tricky_animals vt,
        possibly_venomous pv,
        possibly_carniv_and_tall pct,
        tall_and_skinny ts,
        tall_and_skinny_type ptt,
        exploration_history last_exploration_history,
        master_exploration_journal exploring_journal,
        adventurer jungle_info,
        exploration_history first_exploration_history,
        master_exploration_journal early_exploreration_journal,
        adventurer jungle_info,
        hunting_orders ho
    WHERE
        mp.exploring_strategy_id = 47
        and mp.cow_id = ho.cow_id
        and ho.cow_id IN (20, 30, 50)
        and mp.rhino_id = vt.rhino_id
        and vt.version_id = pv.version_id
        and pv.possibly_carniv_and_tall_id = pct.possibly_carniv_and_tall_id
        and vt.tall_and_skinny_id = ts.tall_and_skinny_id
        and ts.tall_and_skinny_type_id = ptt.tall_and_skinny_type_id
        and mp.alleg_id *= last_exploration_history.exploration_history_id
        and last_exploration_history.master_exploration_journal_id *= exploring_journal.master_exploration_journal_id
        and exploring_journal.person_id *= jungle_info.person_id
        and mp.first_exploration_history_id *= first_exploration_history.exploration_history_id
        and first_exploration_history.master_exploration_journal_id *= early_exploreration_journal.master_exploration_journal_id
        and early_exploreration_journal.person_id *= jungle_info.person_id
) TEMP_TBL 
```

所以我问：

*   我对嵌套正确`SELECT`吗？
*   我对嵌套中不必要的字段是否正确`SELECT`？
*   我对连接的结构/语法/用法是否正确？
*   关于这个查询的结构/性质，还有什么其他让您觉得效率低下/速度慢的地方吗？

不幸的是，除非有无可辩驳的事实证明将这个大查询分解为更小的查询从长远来看是有益的，否则管理层根本不会批准将其重构为多个更小的查询，因为这将花费大量时间来重构和测试。在此先感谢您的任何帮助/见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:33:47.310

我建议采用以下方法。

`on`首先，使用带有子句的 ANSI 标准连接重写查询。这将使条件和过滤更容易理解。此外，这是“安全的”——您应该得到与当前版本完全相同的结果。小心，因为`*=`是外连接，所以不是所有东西都是内连接。

我怀疑这一步会提高性能。

然后，检查每个引用表，并确保连接键*在引用表中*具有索引。如果缺少密钥，请添加它们。

然后，检查是否需要左外连接。左外部联接的表上有过滤器。. . 这些过滤器将外连接转换为内连接。可能不会影响性能，但你永远不知道。

然后，考虑索引用于过滤的字段（在`where`子句中）。

并且，学习如何使用解释功能。任何嵌套循环连接（没有索引）都可能是性能问题的罪魁祸首。

至于嵌套选择，我认为 Sybase 足够聪明，可以“做正确的事”。即使它写出并重新读取结果集，与正确连接相比，这可能会对查询产生边际影响。

如果这是你真正的数据结构，顺便说一句，这听起来像是一个非常有趣的领域。我很少看到`allegator_id`表中调用了一个字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:48:51.090

*   我对嵌套 SELECT 是否正确？

在某些情况下，您可能会这样做，但一个称职的计划者会在这里折叠它并忽略它。

*   我对嵌套 SELECT 中不必要的字段是否正确？

是的，特别是考虑到其中一些根本没有出现在最终的字段列表中。

*   我对连接的结构/语法/用法是否正确？

据我所知，`*=`并且`=*`只是左右连接的语法糖，但我说的可能是错误的。如果不是，那么它们只是强制连接发生的方式，但它们可能是您的查询工作所必需的。

*   关于这个查询的结构/性质，还有什么其他让您觉得效率低下/速度慢的地方吗？

是的。

首先，您有一些不需要的计算，例如`convert (varchar(15), mp.rhino_id) as tms_id`. 也许还有一两个连接，但我承认我没有看过查询的血腥细节。

接下来，您可能会遇到数据库设计本身的问题，例如cow_id 字段。（严重地？ ：-） ）

最后，为了避免进行大量的连接，有时会提到执行多个查询而不是单个查询。

例如，在博客中，获取前 10 个帖子通常是个好主意，然后使用单独的查询来获取它们的标签（其中 id 在（id1、id2 等）中）。在您的情况下，选择性部分似乎就在这里：

```
 mp.exploring_strategy_id = 47
    and mp.cow_id = ho.cow_id
    and ho.cow_id IN (20, 30, 50) 
```

因此，也许可以在一个查询中隔离该部分，然后`in ()`使用生成的 ID 构建一个子句，并在一个或多个单独的查询中获取装饰性的点点滴滴。

哦，正如 Gordon 所指出的，还要检查你的索引。但是，请注意，如果不将查询拆分为更易于管理的部分，索引可能最终没有什么用处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T08:06:36.107

我会回答你的一些问题。

您认为嵌套 SELECT 中的字段（蔬菜、broomhilda、吞噬）可能会导致性能问题。不必要。嵌套 SELECT 中两个未使用的字段（vegetable、broomhilda）来自 ts 表，但正在使用的 cat_metadata 字段也来自 ts 表。因此，除非 cat_metadata 被 ts 表上使用的索引覆盖，否则不会对性能产生任何影响。因为，要提取 cat_metadata 字段，无论如何都需要从表中获取数据页。其他两个字段的提取将占用很少的 CPU，仅此而已。所以不用担心。“吞噬”场也是一个常数。这也不会影响性能。

Dennis 指出了转换函数 convert(varchar(15), mp.rhino_id) 的用法。我不同意这会影响性能，因为它只会消耗 CPU。

最后我想说，尝试使用设置表数为 13，因为那里有 13 个表。Sybase 一次使用四个表进行优化。

# sql - SQL将开/关（位）组合在一起以计算持续时间

> ID：16221239
> 
> 赞同：2
> 
> 时间：2013-04-25T17:39:29.430
> 
> 标签：sql, sql-server, sql-server-2008

使用 SQL Server 2008+ 不知道如何提问，所以这里有一些示例数据：

```
case_id start_time          timer_name  type    value   duration
8386    2013-02-01 19:25:52 Patient In  25      1       NULL
8386    2013-02-01 20:18:31 Patient Out 25      0       NULL
8386    2013-02-01 20:13:13 Anes. Start 26      1       NULL
8386    2013-02-01 20:18:37 Anes. Stop  26      0       NULL
8386    2013-02-01 20:13:25 Induction   27      1       NULL
8386    2013-02-01 20:18:41 Emergence   27      0       NULL
8386    2013-02-01 20:13:31 Incision    28      1       NULL
8386    2013-02-01 20:18:45 Closing     28      0       NULL
8451    2013-02-06 18:37:44 Anesthesia  1       1       NULL
8451    2013-02-06 18:37:48 Incision    1       1       NULL
8451    2013-02-06 18:05:32 Patient In  25      1       NULL
8451    2013-02-06 18:07:41 Anes. Start 26      1       NULL
8451    2013-02-06 18:11:00 Induction   27      1       NULL
8451    2013-02-06 18:11:54 Emergence   27      0       NULL
8451    2013-02-06 18:11:20 Incision    28      1       NULL 
```

这是我用来生成此列表的 SQL：

```
SELECT        case_id, start_time, timer_name, type, value, duration
FROM          dbo.event AS ev WITH (nolock)
WHERE         (type IN (1, 2, 3, 25, 26, 27, 28)) AND (defunct = 'N')
ORDER BY      case_id, type, start_time 
```

我需要做的是将类型分组在一起，按 case_id、type 和 start_time 排序，然后计算第一个值为 1 的条目与下一个值为 0 的相同类型的条目之间的持续时间。上述数据中，案例8386应该有以下数据：

```
8386    2013-02-01 19:25:52 Patient In  25      1       52:39
8386    2013-02-01 20:13:13 Anes. Start 26      1       5:24
8386    2013-02-01 20:13:25 Induction   27      1       5:16
8386    2013-02-01 20:13:31 Incision    28      1       5:14 
```

希望我做对了。持续时间不需要采用该格式。我希望秒数最好，但这种格式在问题中更容易阅读。在 timer_name 字段中显示什么名称也无关紧要。

了解我可能会在一行中为一个类型获得多个 1 值或在一行中获得多个 0 值。我需要将第一个 1 与第一个 0 联系起来并计算持续时间，然后寻找下一个 1，等等。这意味着每种类型可能有多个分组，每种情况。如果没有为 1 值找到 0 值，那么我将使用可以从另一个表中提取的 case_end_time。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:07:52.523

此版本的查询使用相关子查询根据您的逻辑查找下一个开始时间。在 SQL Server 2012 中，这将使用该`lead()`函数，但该函数不可用：

```
select case_id, start_time, timer_name, type, value, duration,
       (select top 1 start_time
        from event e2
        where e2.case_id = e.case_id and e2.type = e.type and e2.value = 0 and
              e2.start_time > e.start_time
        order by start_time desc
       ) - start_time as duration
from event e
WHERE (type IN (1, 2, 3, 25, 26, 27, 28)) AND (defunct = 'N') and value = 1 
```

您的示例没有多个“0”。如果您只想要第一个，我们可以使用以下方法找到它`row_number()`：

```
select case_id, start_time, timer_name, type, value, duration,
       (next_start_time - start_time) as duration
from (select case_id, start_time, timer_name, type, value, duration,
             (select top 1 start_time
              from event e2
              where e2.case_id = e.case_id and e2.type = e.type and e2.value = 0 and
                    e2.start_time > e.start_time
              order by start_time desc
             ) as next_start_time,
             ROW_NUMBER() over (partition by case_id, type order by start_time) as seqnum
      from event e
      WHERE (type IN (1, 2, 3, 25, 26, 27, 28)) AND (defunct = 'N') and value = 1
     ) t
where seqnum = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:21:32.727

好的，你必须使用一堆东西，首先，要获取第一个 1 和 0，你需要使用按值分区的 ROW_NUMBER 函数，这样你就不能使用 where 子句按 row = 1 过滤。此时您将拥有每种情况下的 1 和 0 中的第一个。如果您对单独的查询执行此操作，您可以加入它们并在两个日期之间产生差异。像这样的一些事情：

```
 SELECT 
      case_id, type, DATEDIFF(mm, a.start_time, b.start_time) duration 
    FROM 
       (SELECT        case_id, start_time, timer_name, type, value, duration
        FROM          dbo.event AS ev WITH (nolock)
        WHERE       (type IN (1, 2, 3, 25, 26, 27, 28)) AND (defunct = 'N') 
            AND ROW_NUMBER() OVER(PARTITION BY type, value ORDER BY case_id, type) = 1 --Get the first row only
            AND TYPE = 0 -- And the ones of type 0
       ) a INNER JOIN   
       (SELECT        case_id, start_time, timer_name, type, value, duration
        FROM          dbo.event AS ev WITH (nolock)
        WHERE       (type IN (1, 2, 3, 25, 26, 27, 28)) AND (defunct = 'N') 
            AND ROW_NUMBER() OVER(PARTITION BY type, value ORDER BY case_id, type) = 1 --Get the first row only
            AND TYPE = 1 -- And the ones of type 1          
       ) b
   ON
    a.case_id = b.case_id AND
    a.[type] = b.[type] 
```

我还没有测试它，但这就是想法

# f# - F# 事务管理

> ID：16221248
> 
> 赞同：2
> 
> 时间：2013-04-25T17:39:59.007
> 
> 标签：f#, c#-to-f#

我一直在考虑在 F# 中实现一个电子支付系统。一项关键要求是事务管理。

我将[TransactionScope](http://msdn.microsoft.com/en-ca/library/system.transactions.transactionscope.aspx)与 Dapper 一起使用，效果很好。我可以使用[Tranq](https://github.com/nakamura-to/Tranq)来管理数据库事务，但想使用 TransactionScope 之类的东西来管理在线操作。

F#比较新，不知道有没有相当于

```
using (var trans = new TransactionScope())
{
    ...//operations
    trans.Complete();
} 
```

如果从 C# 到 F# 的逐行转换方法是错误的，那么还有更多“功能性方式”来管理事务吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T17:56:59.940

F# 具有与`using`C# 类似的块。

```
using (new Thing()) (fun x -> x.DoStuff ... ) 
```

[但在 F# 中也有一个`use`绑定](http://msdn.microsoft.com/en-us/library/dd233240.aspx)，它的工作方式与对象超出范围时`let`调用的方式相同。如果它没有被代码回滚，那么创建一个新类型在它被释放时包装和调用`Dispose`并不难......`TransactionScope``Complete`

也可以让[工作流构建器](http://msdn.microsoft.com/en-us/library/dd233182.aspx)处理事务。

但是，您最好使用数据库层（例如 Entity Framework）来处理您的事务需求。

# .net - 为所有用户添加一个密钥到 HKEY_CURRENT_USER

> ID：16221250
> 
> 赞同：15
> 
> 时间：2013-04-25T17:40:10.960
> 
> 标签：.net, installation, registry

我有一个安装程序，它在 HKEY_CURRENT_USER 上安装一个密钥。当我运行安装程序时，它只会将它添加到正在安装的用户。有没有办法一次将密钥添加到所有用户？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-27T13:53:13.390

您必须通过 下的所有不同用户`HKEY_USERS`，这需要提升权限。并且不会捕获任何尚未创建的用户。那只是错误的做法。

这样做的方法是`HKLM`在安装时将默认值添加到相应的键中。当您的程序尝试从注册表中读取时，它会`HKCU`首先查找，如果您的键不存在，它会将信息从相应的键复制`HKLM`到键 in 中`HKCU`。

安装程序的一般规则是，它们不应依赖于随后将使用已安装程序的用户运行。当然，在企业设置中，程序通常安装在用户帐户下，该用户帐户将永远不会运行正在安装的程序。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-11T04:53:34.667

在某些情况下，**Active Setup**可能是解决方案。

它通过向**HKLM\SOFTWARE\Microsoft\Active Setup\Installed Components\%package name%**添加一个带有版本号的密钥来工作。当用户登录 Windows 时，会检查此位置并将其与**HKCU\SOFTWARE\Microsoft\Active Setup\Installed Components\%package name%**进行比较。如果它丢失或版本较低，则它将运行**HKLM\SOFTWARE\Microsoft\Active Setup\Installed Components\%package name%\StubPath**中设置的任何内容。

你可以用这种方式做一些自定义的事情，例如我用它来添加某个脚本（映射网络驱动器）到 **HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run** 如下方式：

> reg add "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Active Setup\Installed Components\MapDrive" /v "Version" /d "1" /t REG_SZ /f
> 
> reg add "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Active Setup\Installed Components\MapDrive" /v "StubPath" /d "reg add HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run /v "MountDrive" /d "C:\map .cmd" /t REG_DWORD /f" /f

这里会发生什么：

*   **当用户下次登录时，Active Setup 会检查注册表项HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Active Setup\Installed Components\MapDrive**下是否存在值为 1 或更大的字符串 Version 。没有，因此它创建它，并运行第二个 reg add 命令，该命令在**HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run下添加一个值为****C:\map.cmd的字符串**
***   它只发生一次，因为在 Active Setup 上的每个连续日志中都会发现**HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Active Setup\Installed Components\MapDrive**现在有一个版本。**

 **听起来很复杂，但是一旦你弄清楚它就有意义了，而且非常有用。

[http://wpkg.org/Adding_Registry_Settings#Adding_entries_to_HKCU_for_all_users](http://wpkg.org/Adding_Registry_Settings#Adding_entries_to_HKCU_for_all_users)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-09T22:18:14.177

这是我目前在 Windows 7 中工作的过程

*   在 regedit 中找到 HKCU 下所需的密钥，将其导出。

*   现在右键单击 HKEY_USERS 键并选择加载配置单元。浏览到 C:\Users\Default 并选择 NTUSER.DAT。将蜂巢命名为您喜欢的任何名称（例如 NAMEHERE）。

*   在您导出的 reg 文件中，将 [HKEY_CURRENT_USER\ 的所有实例替换为 [HKEY_USERS\NAMEHERE\ （或您命名配置单元的任何名称）并保存文件

*   双击reg文件合并它

*   突出显示 NAMEHERE 键并选择卸载配置单元。

现在，对于任何新的配置文件，他们都会获得这些密钥。现有的配置文件没有，因此如果您使用预先存在的配置文件登录，您将看不到它的工作。如果要删除配置文件，我发现最干净的方法是右键单击计算机，选择属性，高级系统设置，然后选择用户配置文件下的设置。突出显示要删除的配置文件并选择删除。

似乎这并不总是有效。我在这里寻找有关为什么这不适用于我试图在 HKEY_CURRENT_USER\Software\Classes\ 下添加的密钥的信息，但直到现在这个过程一直有效。如果我知道为什么这不起作用，我会添加一条注释 - 我目前想知道是否必须通过用户上下文中的策略添加它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-04T13:41:26.123

我认为最好的方法是通过 GPO。

创建一个 GPO，该 GPO 将修改`HKCU`应用您想要对受该 GPO 影响的用户所做的更改。

以下 Microsoft KB 可能有助于实现这一点：

[http://technet.microsoft.com/en-us/library/bb742499.aspx](http://technet.microsoft.com/en-us/library/bb742499.aspx)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-04-27T13:48:46.073

不，没有办法做到这一点。

在这种情况下考虑一下：您安装了应用程序，然后创建了一个新的用户帐户。在安装过程中如何将注册表项添加到这个新帐户？

* * *

或者唯一的方法是当该用户启动您的应用程序时。那就是您的应用程序在第一次启动时创建具有默认值的键。**

# css - 如何在所有 portlet 实例中设置标签样式？

> ID：16221253
> 
> 赞同：0
> 
> 时间：2013-04-25T17:40:16.627
> 
> 标签：css, liferay, portlet

如何使用 CSS 选择所有 portlet 实例，而不是单个实例？在我的页面上，我看到最外面的 portlet 标记为

```
<div id="p_p_id_promotion_WAR_promotionportlet_INSTANCE_mxMxCb1CjaeA_" class="portlet-boundary portlet-boundary_promotion_WAR_promotionportlet_ promotion-portlet  portlet-draggable yui3-dd-drop"> 
```

即它是按实例标记的。所以我可以选择 bu id `p_p_id_promotion_WAR_promotionportlet_INSTANCE_mxMxCb1CjaeA_`，因为这个 id 是特定的，例如。我没有看到特定于该插件的所有 portlet 的 id。

内部样式是否`main.css`仅适用于所有页面或 portlet 内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T07:14:30.990

属性文件`liferay-portlet.xml`提供条目

`<css-class-wrapper>XYZ</css-class-wrapper>`

这个 CSS 类 [here:XYZ] 将被注入到包装 portlet 的 DIV 元素中。因此，您可以提供此类作为 CSS 规则的前缀，以应用于任何页面上的那些 portlet。

高温高压

# ubuntu-12.04 - 无法同步 Google Chromium 源文件

> ID：16221254
> 
> 赞同：1
> 
> 时间：2013-04-25T17:40:17.430
> 
> 标签：ubuntu-12.04, chromium

我一直在尝试下载 Chromium OS 的源代码来检查它，但显然我一直遇到 GIT 存储库的问题。我按照 Google 提供的说明进行操作，但仍然遇到问题。这是我在 depot_tools 下载中使用 REPO 看到的内容：

```
root@Ubuntu1204:/usr/local/path/to/source/chromiumos# repo sync
Fetching projects:   8% (12/147)  remote: Counting objects: 7, done.
remote: Compressing objects: 100% (4/4), done.
remote: Total 4 (delta 3), reused 0 (delta 0)
Unpacking objects: 100% (4/4), done.
From https://git.chromium.org/git/chromiumos/overlays/board-overlays
   ece0843..99b4022f master     -> cros/master
Fetching projects:  77% (114/147)  fatal: Not a git repository: '/usr/local/path/to/source/chromiumos/.repo/projects/src/third_party/ltp.git'
Fetching projects:  78% (115/147)  fatal: Not a git repository: '/usr/local/path/to/source/chromiumos/.repo/projects/src/third_party/marvell.git'
Fetching projects:  79% (117/147)  fatal: Not a git repository: '/usr/local/path/to/source/chromiumos/.repo/projects/src/third_party/memtest.git'
fatal: Not a git repository: '/usr/local/path/to/source/chromiumos/.repo/projects/src/third_party/mesa.git'
Fetching projects:  80% (118/147)  fatal: Not a git repository: '/usr/local/path/to/source/chromiumos/.repo/projects/src/third_party/miniFakeDns.git'
fatal: Not a git repository: '/usr/local/path/to/source/chromiumos/.repo/projects/src/third_party/mobile-broadband-provider-info.git'
Fetching projects:  81% (120/147)  fatal: Not a git repository: '/usr/local/path/to/source/chromiumos/.repo/projects/src/third_party/modemmanager-next.git'
Fetching projects:  95% (140/147)  fatal: Not a git repository: '/usr/local/path/to/source/chromiumos/.repo/projects/src/third_party/mesa.git'
fatal: Not a git repository: '/usr/local/path/to/source/chromiumos/.repo/projects/src/third_party/memtest.git'
fatal: Not a git repository: '/usr/local/path/to/source/chromiumos/.repo/projects/src/third_party/ltp.git'
fatal: Not a git repository: '/usr/local/path/to/source/chromiumos/.repo/projects/src/third_party/miniFakeDns.git'
fatal: Not a git repository: '/usr/local/path/to/source/chromiumos/.repo/projects/src/third_party/modemmanager-next.git'
fatal: Not a git repository: '/usr/local/path/to/source/chromiumos/.repo/projects/src/third_party/mobile-broadband-provider-info.git'
fatal: Not a git repository: '/usr/local/path/to/source/chromiumos/.repo/projects/src/third_party/marvell.git'
error: Cannot fetch chromiumos/third_party/mesa
error: Cannot fetch chromiumos/third_party/modemmanager-next
error: Cannot fetch chromiumos/third_party/ltp
error: Cannot fetch chromiumos/third_party/minifakedns
error: Cannot fetch chromiumos/third_party/memtest
error: Cannot fetch chromiumos/third_party/marvell
error: Cannot fetch chromiumos/third_party/mobile-broadband-provider-info

error: Exited sync due to fetch errors 
```

这是直接从终端复制的。我检查了数据，它似乎都在那里，它下载了，但对于我的生活，我不明白我错过了什么。如果有任何进一步的信息会有所帮助，请告诉我。

另外，安装了 git，所以我知道这不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T03:57:17.837

尝试从糟糕的说明中跳过带有 /usr/local/path/to/source/chromiumos/ 的部分。

使用 /home/$USER/chromiumos/

然后5小时后。

```
cd  ~/chromiumos
./chromite/bin/cros_sdk 
```

那么你应该登陆 src 然后：

```
export BOARD=panda
./setup_board --board=${BOARD}
./set_shared_user_password.sh
./build_packages --board=${BOARD}
# go camping... :)
./build_image --board=${BOARD} --noenable_rootfs_verification dev
cd ~/trunk/src/build/images/${BOARD}/latest 
```

# android - android如何在gridview中从内存中加载图像

> ID：16221257
> 
> 赞同：1
> 
> 时间：2013-04-25T17:40:18.113
> 
> 标签：android

我按照本教程[http://vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-select-multiple/](http://vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-select-multiple/) 下面是我的加载图像的代码应用程序内部存储器和使用简单适配器的显示，但现在我想添加复选框我找到了本教程，其中包含来自画廊的图像我想自定义此示例代码以从文件位置加载图像我该怎么做如何更改此代码以加载图像从文件位置或如何自定义其适配器以加载我的文件我有什么帮助请

```
 <!-----------------this is my code------>
  GridView gridView;
  SimpleAdapter simpleAdapter;

  gridView =(GridView)findViewById(R.id.grid);
  gridView.setOnItemClickListener(new OnItemClickListener(){
    public void onItemClick(AdapterView<?> parent, View view, int  
                    position,long id) {

    if(currentFiles[position].isDirectory())
    {
        root = new File("/data/data/com.myexample/files 
            /"+FileName(currentFilePath[position])+"/");

        Log.e("Root first",root+ " ");

        currentFiles = root.listFiles();

        inflateListView(currentFiles);
    }
    else if(currentFiles[position].isFile())
    {
               inflateListView(currentFiles);
    } } });

     private void inflateListView(File[] files){

   List<Map<String,Object>> listItems = new ArrayList<Map<String,Object>>();

  for(int i=0;i<files.length;i++)
  {      
    Map<String, Object> listItem = new HashMap<String, Object>();

    if(files[i].isDirectory())
    {
        listItem.put("icon", R.drawable.folder);
    }
    else
    {
        listItem.put("icon",  files[i]);
    }

    listItem.put("fileName", files[i].getName());
    listItems.add(listItem);
   }

    simpleAdapter=new SimpleAdapter(this,listItems,R.layout.line,new String[] 
    {"icon","fileName"},new int[]{R.id.icon,R.id.file_name});
     gridView.setAdapter(simpleAdapter);

   <!--------this is sample code which load images from Gallery--------->>>>>>

  import android.widget.CheckBox;
  import android.widget.GridView;
  import android.widget.ImageView;
  import android.widget.Toast;

  public class AndroidCustomGalleryActivity extends Activity {
  private int count;
  private Bitmap[] thumbnails;
  private boolean[] thumbnailsselection;
  private String[] arrPath;
  private ImageAdapter imageAdapter;

   /** Called when the activity is first created. */
   @Override
  public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

  final String[] columns = { MediaStore.Images.Media.DATA, 
   MediaStore.Images.Media._ID };
  final String orderBy = MediaStore.Images.Media._ID;
  Cursor imagecursor = managedQuery(
        MediaStore.Images.Media.EXTERNAL_CONTENT_URI, columns, 
   null,
        null, orderBy);
  int image_column_index =  
   imagecursor.getColumnIndex(MediaStore.Images.Media._ID);
   this.count = imagecursor.getCount();
  this.thumbnails = new Bitmap[this.count];
  this.arrPath = new String[this.count];
  this.thumbnailsselection = new boolean[this.count];
  for (int i = 0; i < this.count; i++) {
    imagecursor.moveToPosition(i);
    int id = imagecursor.getInt(image_column_index);
    int dataColumnIndex = 
   imagecursor.getColumnIndex(MediaStore.Images.Media.DATA);
    thumbnails[i] = MediaStore.Images.Thumbnails.getThumbnail(
            getApplicationContext().getContentResolver(), id,
            MediaStore.Images.Thumbnails.MICRO_KIND, null);
    arrPath[i]= imagecursor.getString(dataColumnIndex);
  }
  GridView imagegrid = (GridView) findViewById(R.id.PhoneImageGrid);
  imageAdapter = new ImageAdapter();
  imagegrid.setAdapter(imageAdapter);
  imagecursor.close();

  final Button selectBtn = (Button) findViewById(R.id.selectBtn);
  selectBtn.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        final int len = thumbnailsselection.length;
        int cnt = 0;
        String selectImages = "";
        for (int i =0; i<len; i++)
        {
            if (thumbnailsselection[i]){
                cnt++;
                selectImages = selectImages + arrPath[i] + 
 "|";
            }
        }
        if (cnt == 0){
            Toast.makeText(getApplicationContext(),
                    "Please select at least one image",
                    Toast.LENGTH_LONG).show();
        } else {
            Toast.makeText(getApplicationContext(),
                    "You've selected Total " + cnt +  
 "  
     image(s).",
                    Toast.LENGTH_LONG).show();
            Log.d("SelectedImages", selectImages);
        }
    }
    });
 }

  public class ImageAdapter extends BaseAdapter {
   private LayoutInflater mInflater;

   public ImageAdapter() {
    mInflater = (LayoutInflater) 
     getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  }

   public int getCount() {
    return count;
   }

   public Object getItem(int position) {
    return position;
  }

    public long getItemId(int position) {
    return position;
   }

     public View getView(int position, View convertView, ViewGroup parent) {
     ViewHolder holder;
        if (convertView == null) {
        holder = new ViewHolder();
        convertView = mInflater.inflate(
                R.layout.galleryitem, null);
        holder.imageview = (ImageView)  
    convertView.findViewById(R.id.thumbImage);
        holder.checkbox = (CheckBox)  
   convertView.findViewById(R.id.itemCheckBox);

        convertView.setTag(holder);
    }
    else {
        holder = (ViewHolder) convertView.getTag();
    }
    holder.checkbox.setId(position);
    holder.imageview.setId(position);
    holder.checkbox.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            CheckBox cb = (CheckBox) v;
            int id = cb.getId();
            if (thumbnailsselection[id]){
                cb.setChecked(false);
                thumbnailsselection[id] = false;
            } else {
                cb.setChecked(true);
                thumbnailsselection[id] = true;
            }
        }
    });
    holder.imageview.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            int id = v.getId();
            Intent intent = new Intent();
            intent.setAction(Intent.ACTION_VIEW);
            intent.setDataAndType(Uri.parse("file://" + 
  arrPath[id]), "image/*");
            startActivity(intent);
        }
    });
    holder.imageview.setImageBitmap(thumbnails[position]);
    holder.checkbox.setChecked(thumbnailsselection[position]);
    holder.id = position;
    return convertView;
 }
 }
  class ViewHolder {
ImageView imageview;
CheckBox checkbox;
int id;
   }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:43:16.507

一般来说，您应该创建一些图像文件集合，然后使用 BitmapFactory 像这样加载它们：

```
 public static Bitmap getBitmapFromFile(File bitmapFile, int sideSizeLimit){
      if (bitmapFile==null || !bitmapFile.exists() || !bitmapFile.canRead())
          return null;
      int maxWidth = 0, maxHeight = 0;
      if (sideSizeLimit>0){
          maxWidth = sideSizeLimit;
          maxHeight = sideSizeLimit;
      }

      try {
          //decode image size
          BitmapFactory.Options bmfOtions = new BitmapFactory.Options();
          bmfOtions.inJustDecodeBounds = true;
          BitmapFactory.decodeStream(new FileInputStream(bitmapFile),null,bmfOtions);

          //Find the correct scale value. It should be the power of 2.
          //final int REQUIRED_SIZE=70;
          int width_tmp=bmfOtions.outWidth, height_tmp=bmfOtions.outHeight;
          int scale=1;
          while(width_tmp > maxWidth || height_tmp > maxHeight){
              width_tmp/=2;
              height_tmp/=2;
              scale++;
          }
          bmfOtions.inSampleSize = scale;
          bmfOtions.inJustDecodeBounds = false;

          //decode with inSampleSize
          //BitmapFactory.Options o2 = new BitmapFactory.Options();
          return BitmapFactory.decodeStream(new FileInputStream(bitmapFile), null, bmfOtions);
      } catch (FileNotFoundException e) {}
      return null;
  } 
```

你也应该阅读这个[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html) 啊，我找到了一些例子（收集文件）：

```
public static boolean clearImagesCache(){

    // depends on isExternalStorageAvailable()
    final File cacheDir= getCacheDir(); //new File(Environment.getExternalStorageDirectory() + SD_CACHE_PATH);

    if( !cacheDir.exists() )
        return false;

    final File[] files = cacheDir.listFiles();
    File file2delete;
    for(int i=0; i<files.length; i++) {
        file2delete = files[i]; 
       if(!file2delete.isDirectory() && file2delete.canWrite()) 
           file2delete.delete();
    }

    return true;
} 
```

但是，此代码会删除给定目录中的所有文件，但您必须将它们收集到某个集合中。

# ruby-on-rails - Rails：渲染命名空间多态部分

> ID：16221260
> 
> 赞同：1
> 
> 时间：2013-04-25T17:40:25.983
> 
> 标签：ruby-on-rails, view, namespaces, polymorphic-associations

我有一个名为`Update`. 通常，我可以`updatable`用一个简单的方法渲染它的关联模型：

```
<%= render @update.updatable %> 
```

不幸的是，如果我从命名空间控制器中调用此方法，那么 Rails 也会尝试命名视图路径，搜索`admin/reviews/review`而不是`reviews/review`. 这会导致如下错误：

```
Missing partial admin/reviews/review 
```

通常我可以硬编码一个解决方法，例如：

```
<%= render :partial => "/reviews/review", :locals => {:review => @update.updatable} 
```

如果关联不是多态的，这会很好，但既然是多态的，如果`updatable`不是 a ，我会得到错误`Review`。不幸的是，我有几十个可能`updatable`的 s，用一个`case`语句来分支它们会很麻烦。

有没有我没有想到的更简单的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-17T22:18:26.590

您可以从模型中定义部分路径。它是这样的：

```
class Review
  def to_partial_path
    "/reviews/review"
  end
end 
```

# winforms - 如何防止 WCF 服务对 winform 客户端的超时响应

> ID：16221267
> 
> 赞同：0
> 
> 时间：2013-04-25T17:40:42.083
> 
> 标签：winforms, wcf, timeout

我有一个由 winform 客户端调用的 WCF 服务方法。客户端将几个字符串传递给该方法，然后该方法执行一系列可能需要超过 20 分钟的操作。在进程大约 15 分钟后，客户端收到 TCP 连接已终止的响应。WCF 服务在此之后继续处理，直到完成作业。我已将客户端绑定配置中的超时设置为每次 30 分钟。我还将编译批处理超时设置为 30 分钟。WCF 服务向客户端返回一个字符串，只是说“成功”，因此这不是关于传输的大小问题。由于某些超时，IIS 似乎正在终止 TCP 连接。

[接收对http://xxxxxxxxxxxxxxx.svc](http://xxxxxxxxxxxxx.svc)的 HTTP 响应时出错。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。内部异常：底层连接已关闭：接收时发生意外错误。内部异常：无法从传输连接读取数据：现有连接被远程主机强行关闭。内部异常：远程主机强制关闭现有连接

有什么帮助吗？该错误是由 winform 客户端生成的，而不是 wcf 服务 btw 生成的。

以下是绑定设置：

```
<wsHttpBinding>
  <binding name="WSHttpBinding_STUFFGOESHERE" closeTimeout="00:30:00"
   openTimeout="00:30:00" receiveTimeout="00:30:00" sendTimeout="00:30:00"
   bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
   maxBufferPoolSize="524288000" maxReceivedMessageSize="65536" messageEncoding="Text"
   textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
   <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
   <reliableSession ordered="true" inactivityTimeout="00:30:00"
    enabled="false" />
   <security mode="Message">
    <transport clientCredentialType="Windows" proxyCredentialType="None"
    realm="" />
   <message clientCredentialType="Windows" negotiateServiceCredential="true"
    algorithmSuite="Default" />
  </security>
 </binding>
 </wsHttpBinding> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:46:02.943

您是否在 httpbinding 上设置了超时？在代码中：

```
((WSHttpBinding)binding).OpenTimeout = new TimeSpan(0, 1, 0);
((WSHttpBinding)binding).CloseTimeout = new TimeSpan(0, 1, 0);
((WSHttpBinding)binding).SendTimeout = new TimeSpan(0, 30, 0);
((WSHttpBinding)binding).ReceiveTimeout = new TimeSpan(0, 30, 0); 
```

或在服务配置文件中

```
<bindings>
  <wsHttpBinding>
    <binding openTimeout="00:1:00" 
             closeTimeout="00:1:00" 
             sendTimeout="00:30:00" 
             receiveTimeout="00:30:00">
    </binding>
  </wsHttpBinding>
</bindings> 
```

另请参阅[http://msdn.microsoft.com/en-us/library/hh924831.aspx](http://msdn.microsoft.com/en-us/library/hh924831.aspx)

# ivy - Ivy：如何为 SNAPSHOT 依赖项设置缓存策略？

> ID：16221268
> 
> 赞同：0
> 
> 时间：2013-04-25T17:40:49.733
> 
> 标签：ivy

我正在使用 Ivy Ant 并希望创建一个策略，以便构建检查对每个构建的依赖项的最新更新。这是因为我们正在合作开发并希望立即看到将更改推送到 Nexus 服务器。

在 Ant 中，我正在做...

```
 <ivy:cachefileset organisation="com.FOO.storage" conf="default" module="yoda-ui"
                  revision="0.1.8-SNAPSHOT" setid="ac" inline="true"/> 
```

在 ivy-settings.xml 我正在尝试...

```
<ivysettings>
    <settings defaultResolver="XXX"/>
    ....   
    <caches>
        <cache name="mycache"  basedir="c:/tmp">
            <ttl organisation="com.FOO.storage" module="yoda-ui" duration="0ms"/>
        </cache>
    </caches>
</ivysettings> 
```

但是，它似乎仍然没有每次都检查

```
---------------------------------------------------------------------
|                  |            modules            ||   artifacts   |
|       conf       | number| search|dwnlded|evicted|| number|dwnlded|
---------------------------------------------------------------------
|      default     |   2   |   0   |   0   |   0   ||   2   |   0   |
--------------------------------------------------------------------- 
```

我相信这告诉我它不是每次都检查服务器。

那么，如何强制 Ivy 检查服务器以获取此特定模块的每个构建的更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T20:42:44.917

您尚未列出完整的 ivy 设置文件。我怀疑您没有使用[ibilio 解析器](http://ant.apache.org/ivy/history/latest-milestone/resolver/ibiblio.html)：

```
<ibiblio name="mavenrepo" m2compatible="true" root="https://hostname/path/to/repo"/> 
```

当您启用了解如何正确下载快照的**m2compatible**标志时，无需特殊的缓存配置。

有关详细信息，请参阅以下答案：

*   [这个 Ivy changedPattern / SNAPSHOT 配置有什么问题？](https://stackoverflow.com/questions/14445268/whats-wrong-with-this-ivy-changingpattern-snapshot-configuration/14445694#14445694)

# tomcat - java.lang.StackOverflowError 被不存在的类抛出

> ID：16221269
> 
> 赞同：1
> 
> 时间：2013-04-25T17:40:58.450
> 
> 标签：tomcat, servlets, netbeans

尝试部署我的应用程序时，我的 IDE 中出现以下错误。错误持续了 50 页，所以我只在下面附上了最重要的部分，在这篇文章的底部附上了更多内容。该错误是有道理的，但抛出它的类不存在。

**错误信息**

> 2013 年 4 月 25 日上午 12:10:45 org.apache.catalina.core.ApplicationDispatcher 调用严重：Servlet HomeController 的 Servlet.service() 抛出异常 java.lang.StackOverflowError

**问题：**

奇怪的是，我删除了 servlet HomeController，将其从 Web.xml 中删除，搜索了它的所有实例，并执行了几次清理和构建。我仍然收到有关不存在的类引发异常的错误消息？我猜一些与项目相关的文件仍在引用这个文件，但它仍然很奇怪。

***系统属性***

阿帕奇 Tomcat 7.014

网豆 7.0.1

**更多错误信息**

> 2013 年 4 月 25 日上午 12:10:45 org.apache.catalina.core.ApplicationContext 日志信息：
> 
> HTTP 监视器的服务器端组件检测到 java.lang.StackOverflowError。当 web 模块中存在无限循环时，就会发生这种情况。在再次运行 Web 模块之前更正死循环的原因。
> 
> 2013 年 4 月 25 日上午 12:10:45 org.apache.catalina.core.ApplicationDispatcher 调用严重：Servlet HomeController 的 Servlet.service() 在 org.apache.catalina.connector.RequestFacade.getSession 处抛出异常 java.lang.StackOverflowError RequestFacade.java:895) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper .getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache。 catalina.core.ApplicationHttpRequest。getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http .HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org. apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java: 572)572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper .java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core。 ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572)572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper .java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core。 ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572)HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache .catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) ) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572)HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache .catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) ) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572)catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572)在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java :229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572)catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572)在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java :229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572)229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession (ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572)229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession (ApplicationHttpRequest.java:572) 在 javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229) 在 org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572)org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 上的 HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229)org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:572) 上的 HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:01:34.247

这是那些似乎不是我所做的任何事情的直接结果的“非线性”错误之一。我部署到新版本的Tomcat，问题就消失了。我必须假设 Tomcat 有自己的类“存储库”来执行，并且该结构已损坏。无论哪种方式，我都找到了解决方案。我只是希望它不会发生在我正在运行的新版本的Tomcat上......

# java - 用于 PUT 请求的模型在 struts 中驱动的问题？

> ID：16221272
> 
> 赞同：1
> 
> 时间：2013-04-25T17:41:04.790
> 
> 标签：java, struts2, put, model-driven

我正在使用`Content-Type`as发出 PUT 请求`application/x-www-form-urlencoded`。我无法将表单正文元素映射到我的 ModelDriven 操作类 ( `User`)。

这是一个示例请求：

PUT：`http://www.xyz.com/account/22424?userName=xyz&email=xyz@email.com` 内容类型：应用程序/x-www-form-urlencoded

**这是代码：**

**1）模型驱动的动作类：**

```
public class User {

    private String email;
    private String userName;

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }
} 
```

**2) 控制器：**

```
public class AccountController implements ModelDriven <User> {

    private String id;
    private User user = new User();

    public String update() {
        user.getUserName(); // Fails, returns NULL. (Expected "xyz")
    }

    public User getModel() {
        return user;
    }
} 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:23:24.790

要将模型映射到您的表单，您应该实现您已经完成的[模型驱动](http://struts.apache.org/release/2.3.x/docs/model-driven.html)接口并配置操作以使用[模型驱动拦截器](http://struts.apache.org/release/2.3.x/docs/model-driven-interceptor.html)。

还要确保请求内容与其内容类型和编码相对应。

# android - AlertDialog中的setPositiveButton，使用字符串？

> ID：16221273
> 
> 赞同：0
> 
> 时间：2013-04-25T17:41:10.983
> 
> 标签：android, android-alertdialog

我正在尝试向以下警报框的肯定按钮添加一个字符串，但它不断发送错误消息。

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setMessage(R.string.checkNetwork).setTitle(
        R.string.checkNetworkTitle);
builder.setIcon(R.drawable.ic_warning);
builder.setPositiveButton(android.R.string.continue, new warningContinue());
AlertDialog dialog = builder.create();
dialog.show(); 
```

有什么帮助吗？它似乎确实适用于标题和消息，但不适用于按钮......

提前致谢。

编辑：错误说：

> AlertDialog.Builder 类型中的方法 setPositiveButton(int, DialogInterface.OnClickListener) 不适用于参数 (Class, warningContinue)

所以它似乎期望一个整数，但我想知道是否有任何方法可以将字符串用于本地化目的？

编辑2：

好吧，什么鬼。问题在于字符串名称；由于某种原因，它不会让我命名我的字符串继续。o_O

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:21:19.577

您不想使用“android.R.string.continue”。“包名”.R.string.continue 是你想要的。这就是您在 android 中进行本地化的常用方式。id 根据用户的系统语言自动提供多语言支持。您只需要创建多个“值”目录。[https://developer.android.com/guide/topics/resources/localization.html](https://developer.android.com/guide/topics/resources/localization.html)为您提供有关本地化的更多信息。

此外，您不能使用“继续”作为名称，使用“str_continue”或类似的名称（“返回”或“中断”等相同）。它们在java中保留。有关更多信息，您可以阅读链接：http: [//java.about.com/od/javasyntax/a/reservedwords.htm](http://java.about.com/od/javasyntax/a/reservedwords.htm)

因为你没有发布“warningContinue()”的代码，我想你知道它必须扩展“DialogInterface.OnClickListener()”。此外，出于约定原因，您还应该考虑将类的第一个字符大写，有关更多信息，请阅读 stackoverflow 上的此答案：[https ://stackoverflow.com/a/414029/2238341](https://stackoverflow.com/a/414029/2238341)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:57:36.150

`R.string.warningButton`只是您的 R.java 文件中的 int 。要获取关联的字符串，请使用以下行：

```
builder.setPositiveButton(getString(R.string.warningButton), new warningContinue() ); 
```

正如其他提到的，不要使用 android.R.string.continue 因为它在系统中不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-08T19:13:50.987

试试看，首先去 res/values/strings.xml 并声明你的字符串如下

```
<string name="checkNetwork">your String...</string> 
```

然后你可以采取如下方式

```
R.string.checkNetwork 
```

就像这个一样，快乐....

# php - 允许使用 Apache 访问由 URL 路由器创建的“子目录”

> ID：16221274
> 
> 赞同：0
> 
> 时间：2013-04-25T17:41:13.317
> 
> 标签：php, apache, .htaccess, url-routing, .htpasswd

我有一个开发服务器，用于使用 API 主干重新开发的网站。我希望保护域免受外部访问，因此我需要在开发服务器上托管的所有域上都有一个有效的 htpasswd 用户。

这会导致问题，因为 PHP 脚本无法访问 API 来运行应用程序。API 位于 dev.example.com/api，但这不是一个实际的目录，因为一切都由 PHP URL 路由器控制。我不能只允许使用 Apache 访问 API，因为这些文件不在实际目录中。这是我尝试过的

```
<VirtualHost *:80>
  ServerName dev.example.com
  DocumentRoot /path/to/dir

  <Location /api>
    Order allow,deny
    Allow from all
    Satify any
  </Location>
</VirtualHost> 
```

这是我为旧站点的开发服务器所拥有的，但它之所以有效，是因为 API 不受路由器控制，但实际上位于`/path/to/dir/api`.

有没有办法允许从外部来源访问 API（对域 dev.example.com/api 的任何调用）？

# google-api - 谷歌驱动 SDK JS api 中的错误（类型错误：无法读取未定义的属性“sl”）

> ID：16221278
> 
> 赞同：7
> 
> 时间：2013-04-25T17:41:32.343
> 
> 标签：google-api, google-drive-api, google-api-client, google-api-js-client

几周前，我们开始注意到来自 google 客户端 API 或 google drive JS api 的奇怪错误（不确定是哪个，URL 参考如下），过去几天它们的频率有所增加

```
 TypeError: Cannot read property 'sl' of undefined 
```

这似乎主要影响 Windows Chrome - 我们错误日志中的用户代理的典型示例是

```
Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31) 
```

据我所见，.sl 唯一的一行是：

```
if(!this.b.headers.Authorization){var f=(0,_.Hx)(_.p,_.p);f&&f[_.Ak.pl.sl]&&(c=f[_.Ak.pl.sl].split(/\w+/))} 
```

这来自

```
https://apis.google.com/_/scs/apps-static/_/js/k=oz.gapi.en.uSTvEdNXb7o.O/m=client/rt=j/sv=1/d=1/ed=1/am=UQ/rs=AItRSTOm1KS5pZVEepZkn9qQJeuQZC_Qjw/cb=gapi.loaded_0 
```

我知道这是故意神秘的，所以我无法建议如何解决它，但如果有人调查这个问题，我将不胜感激，因为频率似乎在增加。也许 _Ak.pl 周围的守卫在执行 .sl 之前检查它是否不为空？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T06:23:48.530

我设法解决了报告的问题。问题是由于授权设置。某些设置似乎不适用于该应用程序。现在该应用程序使用以下设置：

```
gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, handleAuthResult); 
```

以前，该应用程序被配置为离线运行。

*注意：在代码中，clientId 和 scopes 是变量，handleAuthResult 是关联函数。*

# angularjs - 如何将数组传递给指令而不将其变成字符串？

> ID：16221279
> 
> 赞同：3
> 
> 时间：2013-04-25T17:41:32.880
> 
> 标签：angularjs, angularjs-directive

对，所以我刚刚进入指令，它们看起来非常棒。我遇到了一个问题：

我需要将一组图像传递到指令中，以便可以按某些标准过滤它们。这是我调用指令的html：

```
<img cover="{{challenge.images}}"> 
```

这是我的指令：

```
myproject.directive('cover', function() {
    return {
        link: function ($scope, element, attrs) {
            console.debug("attrs.cover", Array(attrs.cover));
        }
    };
}); 
```

输出是一个字符串。有没有办法防止 attr 变成字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T18:04:27.193

我在这里假设您不想创建孤立的范围，所以：

```
myproject.directive('cover', function($parse) {
    return {
        link: function ($scope, element, attrs) {

            var covers = $parse(attrs.cover)($scope);
            console.debug("attrs.cover", covers);
        }
    };
}); 
```

然后像这样使用指令：

```
<img cover="challenge.images"> 
```

# c# - FileIOPermission 错误保存文件

> ID：16221284
> 
> 赞同：0
> 
> 时间：2013-04-25T17:42:06.573
> 
> 标签：c#, file-io, file-permissions

我的问题是`try`，即使使用相同的用户帐户，这也仅在一台计算机上失败（导致捕获）。它运行良好，并保存了使用该程序的所有其他计算机的屏幕截图。

此外，手动将文件（通过资源管理器）保存到目录中也可以。

```
try
{
    Bitmap screenShot = new Bitmap(screenWidth, screenHeight);
    Graphics gfx = Graphics.FromImage((Image)screenShot);
    gfx.CopyFromScreen(0, 0, 0, 0, new Size(screenWidth, screenHeight));

    imageSavePath = @"\\navy\data\Docs\PRE\LogSite\Screenshots\" + DateTime.Now.ToString().Replace('/', '-').Replace(':', '-') + ".png";
    screenShot.Save(imageSavePath, ImageFormat.Jpeg);
}
catch (Exception e)
{
    MessageBox.Show("Error saving screenshot\n\n" + e.ToString());
} 
```

这是错误： ![错误图像](https://i.stack.imgur.com/QLl95.png)

编辑： exe 正在从网络驱动器运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:47:32.297

我已经编辑了我的答案。根据代码，您正在尝试保存到网络共享文件夹，我相信您应该使用模拟来解决权限问题。

请参考以下链接。

[访问共享网络驱动器时需要模拟](https://stackoverflow.com/questions/14753766/need-impersonation-when-accessing-shared-network-drive)

# c++ - c++并行编程bug

> ID：16221286
> 
> 赞同：0
> 
> 时间：2013-04-25T17:42:16.893
> 
> 标签：c++, parallel-processing

我正在尝试做一些并行编程。我一直在遵循指南，并且有以下代码：

```
void main() 
{
    CPUs = GetNumCPUs();
    HANDLE *threads = new HANDLE[CPUs];
    queues = new queue<functionPointer>[CPUs];
    DWORD_PTR threadID = 0;
    DWORD_PTR threadCore = 1 << 0;

    threads[0] = CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE)loop, (LPVOID)&queues, NULL, &threadID);
    SetThreadAffinityMask(threads[0], threadCore);

    for (DWORD_PTR i = 1; i < CPUs; i++)
    {
        threadID = i;
        threadCore = 1 << i;

        threads[i] = CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE)Coroutine, (LPVOID)&queues[i], NULL, &threadID);
        SetThreadAffinityMask(threads[i], threadCore);

        wprintf(L"Creating Thread %d (0x%08x) Assigning to CPU 0x%08x\r\n", i, (LONG_PTR)threads[i], threadCore);
    }

    while(true) Sleep(1000);
} 
```

线程函数只是将 1 添加到变量中。我已经看到这段代码并不比没有线程的代码快。我认为我做错了什么，它不是多核的。它是什么？

这是公会：[http](http://www.dreamincode.net/forums/topic/52380-multi-threading-on-multi-processors/) ://www.dreamincode.net/forums/topic/52380-multi-threading-on-multi-processors/ 添加 1 a 变量就是一个例子。我有一个非常复杂的程序，需要 8-9 秒才能完成。这就是为什么我需要多处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:49:44.147

如果您没有在多处理器/多核系统上运行代码，那么您将看不到任何性能提升。

如果您是，但您的线程只是在进行简单的处理（将 1 添加到变量？）它可能会花费更多的处理器周期来生成/关闭线程，而不是线程完成其工作。在这种情况下，您最好在一个线程中完成所有工作。

# java - 包不存在错误？

> ID：16221291
> 
> 赞同：0
> 
> 时间：2013-04-25T17:42:25.957
> 
> 标签：java, classpath

```
//Vector.java
package simple;

public class Vector{
public Vector(){
System.out.println("net.mindview.simple.Vector");
}
}

//List.java
package simple;
public class List{
public List() {
System.out.println("net.mindview.simple.List");
}
}

 //LibTest.java
import simple.*;
public class LibTest{
public static void main(String[] args) {
Vector v = new Vector();
List l = new List();
}
} 
```

当我尝试为 Vector 或 List 设置类路径时，

喜欢

java classpath "C:\Learning Java\AccessControl" simple.Vector，我可能找不到 Main 方法，请定义 main 方法。但是在我正在使用的书中，两个文件都不需要有 main 方法。

如果我尝试运行 LibTest，我将无法访问 Vector，并且类文件包含错误的类：Vector，错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:47:13.067

从您发布的代码中，`Vector`或`List`类中也没有`public static void main(String[] args)`方法，因此您收到错误消息。

请注意，`LibTest`类有它，所以最好执行这个类：

```
java classpath "C:\Learning Java\AccessControl" other.package.LibTest 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:55:16.473

要首先运行包，您必须从目录中编译它

例如，C:\package-name\abc.java

包名：正如你提到的简单。

之后，您必须从目录中运行“abc.java”文件。例如，C:__ *_* _

希望它会起作用

# python - 带有芹菜的Python Flask超出应用程序上下文

> ID：16221295
> 
> 赞同：18
> 
> 时间：2013-04-25T17:42:33.257
> 
> 标签：python, flask, celery

我正在使用 python Flask 建立一个网站。一切都很顺利，现在我正在尝试实施 celery。

在我尝试使用 celery 的烧瓶邮件发送电子邮件之前，情况也很好。现在我收到“在应用程序上下文之外工作”错误。

完整的追溯是

```
 Traceback (most recent call last):
  File "/usr/lib/python2.7/site-packages/celery/task/trace.py", line 228, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/celery/task/trace.py", line 415, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/ryan/www/CG-Website/src/util/mail.py", line 28, in send_forgot_email
    msg = Message("Recover your Crusade Gaming Account")
  File "/usr/lib/python2.7/site-packages/flask_mail.py", line 178, in __init__
    sender = current_app.config.get("DEFAULT_MAIL_SENDER")
  File "/usr/lib/python2.7/site-packages/werkzeug/local.py", line 336, in __getattr__
    return getattr(self._get_current_object(), name)
  File "/usr/lib/python2.7/site-packages/werkzeug/local.py", line 295, in _get_current_object
    return self.__local()
  File "/usr/lib/python2.7/site-packages/flask/globals.py", line 26, in _find_app
    raise RuntimeError('working outside of application context')
RuntimeError: working outside of application context 
```

这是我的邮件功能：

```
@celery.task
def send_forgot_email(email, ref):
    global mail
    msg = Message("Recover your Crusade Gaming Account")
    msg.recipients = [email]
    msg.sender = "Crusade Gaming stuff@cg.com"
    msg.html = \
        """
        Hello Person,<br/>

        You have requested your password be reset. <a href="{0}" >Click here recover your account</a> or copy and paste this link in to your browser: {0} <br />

        If you did not request that your password be reset, please ignore this.
        """.format(url_for('account.forgot', ref=ref, _external=True))
    mail.send(msg) 
```

这是我的芹菜文件：

```
from __future__ import absolute_import

from celery import Celery

celery = Celery('src.tasks',
                broker='amqp://',
                include=['src.util.mail'])

if __name__ == "__main__":
    celery.start() 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2018-06-03T10:58:14.170

这是一个与烧瓶应用程序工厂模式一起使用的解决方案，还可以创建带有上下文的 celery 任务，而无需使用`app.app_context()`. 在避免循环导入的同时获取该应用程序确实很棘手，但这解决了它。这适用于撰写本文时最新的 celery 4.2。

结构：

```
repo_name/
    manage.py
    base/
    base/__init__.py
    base/app.py
    base/runcelery.py
    base/celeryconfig.py
    base/utility/celery_util.py
    base/tasks/workers.py 
```

`base`本示例中的主应用程序包也是如此。在`base/__init__.py`我们创建 celery 实例如下：

```
from celery import Celery
celery = Celery('base', config_source='base.celeryconfig') 
```

该`base/app.py`文件包含烧瓶应用程序工厂`create_app`，并注意`init_celery(app, celery)`它包含：

```
from base import celery
from base.utility.celery_util import init_celery

def create_app(config_obj):
    """An application factory, as explained here:
    http://flask.pocoo.org/docs/patterns/appfactories/.
    :param config_object: The configuration object to use.
    """
    app = Flask('base')
    app.config.from_object(config_obj)
    init_celery(app, celery=celery)
    register_extensions(app)
    register_blueprints(app)
    register_errorhandlers(app)
    register_app_context_processors(app)
    return app 
```

继续`base/runcelery.py`内容：

```
from flask.helpers import get_debug_flag
from base.settings import DevConfig, ProdConfig
from base import celery
from base.app import create_app
from base.utility.celery_util import init_celery
CONFIG = DevConfig if get_debug_flag() else ProdConfig
app = create_app(CONFIG)
init_celery(app, celery) 
```

接下来，`base/celeryconfig.py`文件（例如）：

```
# -*- coding: utf-8 -*-
"""
Configure Celery. See the configuration guide at ->
http://docs.celeryproject.org/en/master/userguide/configuration.html#configuration
"""

## Broker settings.
broker_url = 'pyamqp://guest:guest@localhost:5672//'
broker_heartbeat=0

# List of modules to import when the Celery worker starts.
imports = ('base.tasks.workers',)

## Using the database to store task state and results.
result_backend = 'rpc'
#result_persistent = False

accept_content = ['json', 'application/text']

result_serializer = 'json'
timezone = "UTC"

# define periodic tasks / cron here
# beat_schedule = {
#    'add-every-10-seconds': {
#        'task': 'workers.add_together',
#        'schedule': 10.0,
#        'args': (16, 16)
#    },
# } 
```

现在在文件中定义 init_celery `base/utility/celery_util.py`：

```
# -*- coding: utf-8 -*-

def init_celery(app, celery):
    """Add flask app context to celery.Task"""
    TaskBase = celery.Task
    class ContextTask(TaskBase):
        abstract = True
        def __call__(self, *args, **kwargs):
            with app.app_context():
                return TaskBase.__call__(self, *args, **kwargs)
    celery.Task = ContextTask 
```

对于工人`base/tasks/workers.py`：

```
from base import celery as celery_app
from flask_security.utils import config_value, send_mail
from base.bp.users.models.user_models import User
from base.extensions import mail # this is the flask-mail

@celery_app.task
def send_async_email(msg):
    """Background task to send an email with Flask-mail."""
    #with app.app_context():
    mail.send(msg)

@celery_app.task
def send_welcome_email(email, user_id, confirmation_link):
    """Background task to send a welcome email with flask-security's mail.
    You don't need to use with app.app_context() here. Task has context.
    """
    user = User.query.filter_by(id=user_id).first()
    print(f'sending user {user} a welcome email')
    send_mail(config_value('EMAIL_SUBJECT_REGISTER'),
              email,
              'welcome', user=user,
              confirmation_link=confirmation_link) 
```

然后，您需要从*文件夹**中`repo_name`*的两个不同的 cmd 提示符中启动 celery beat 和 celery worker 。

在一个 cmd 提示符`celery -A base.runcelery:celery beat`下执行 a 和另一个`celery -A base.runcelery:celery worker`.

然后，运行需要烧瓶上下文的任务。应该管用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-25T18:10:59.830

Flask-mail 需要 Flask 应用程序上下文才能正常工作。在 celery 端实例化 app 对象并像这样使用 app.app_context：

```
with app.app_context():
    celery.start() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-25T16:30:53.287

我没有任何观点，所以我无法支持@codegeek 的上述答案，所以我决定自己写，因为我搜索这样的问题得到了这个问题/答案的帮助：我刚刚取得了一些成功在 python/flask/celery 场景中解决类似的问题。即使您的错误是由于尝试使用`mail`而我的错误是尝试`url_for`在 celery 任务中使用，但我怀疑这两者与同一个问题有关，并且`url_for`如果您尝试使用那之前`mail`。

由于 celery 任务中没有应用程序的上下文（即使在包含 之后`import app from my_app_module`），我也遇到了错误。您需要`mail`在应用程序的上下文中执行操作：

```
from module_containing_my_app_and_mail import app, mail    # Flask app, Flask mail
from flask.ext.mail import Message    # Message class

@celery.task
def send_forgot_email(email, ref):
    with app.app_context():    # This is the important bit!
        msg = Message("Recover your Crusade Gaming Account")
        msg.recipients = [email]
        msg.sender = "Crusade Gaming stuff@cg.com"
        msg.html = \
        """
        Hello Person,<br/>
        You have requested your password be reset. <a href="{0}" >Click here recover your account</a> or copy and paste this link in to your browser: {0} <br />
        If you did not request that your password be reset, please ignore this.
        """.format(url_for('account.forgot', ref=ref, _external=True))

        mail.send(msg) 
```

如果有人感兴趣，`url_for`可以在[这里找到我在 celery 任务中使用问题的解决方案](https://github.com/mitsuhiko/flask/issues/824#issuecomment-68103351)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T19:06:44.810

在您的 mail.py 文件中，导入您的“app”和“mail”对象。然后，使用请求上下文。做这样的事情：

```
from whateverpackagename import app
from whateverpackagename import mail

@celery.task
def send_forgot_email(email, ref):
    with app.test_request_context():
        msg = Message("Recover your Crusade Gaming Account")
        msg.recipients = [email]
        msg.sender = "Crusade Gaming stuff@cg.com"
        msg.html = \
        """
        Hello Person,<br/>
        You have requested your password be reset. <a href="{0}" >Click here recover your account</a> or copy and paste this link in to your browser: {0} <br />
        If you did not request that your password be reset, please ignore this.
        """.format(url_for('account.forgot', ref=ref, _external=True))

        mail.send(msg) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-24T10:23:51.433

无需使用`app.app_context()`，只需在注册蓝图之前配置 celery，如下所示：

```
celery = Celery('myapp', broker='redis://localhost:6379/0', backend='redis://localhost:6379/0') 
```

从您希望使用 celery 的蓝图中，调用已创建的 celery 实例来创建您的 celery 任务。

它将按预期工作。

# visual-studio-2012 - 如何使 Visual Studio 2012 的标题栏在选择时更改颜色？

> ID：16221297
> 
> 赞同：10
> 
> 时间：2013-04-25T17:42:48.867
> 
> 标签：visual-studio-2012, titlebar

在 Visual Studio 2012 中，微软显然已经放弃了非常有用的 UI 约定，即“在选定窗口和未选定窗口之间有任何视觉区别，因此用户实际上可以知道当他们开始输入时他们的输入到底会出现在哪里”。有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T18:54:50.963

在我的办公室询问后，我发现这在主题编辑器扩展中是可以改变的。微软将标题栏称为“主窗口->标题”，只是为了确保无法找到该设置。

# ruby-on-rails - 如何路由我的页面，以便在 Rails 3.2 中按子域提供略有不同的内容？

> ID：16221300
> 
> 赞同：0
> 
> 时间：2013-04-25T17:42:53.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, routes, subdomain

我有一个将用于两家大公司的 Web 应用程序。该应用程序由一个主要的静态“公司网站”和应用程序本身组成。只有静态站点需要分开，并且在 10 个页面中只有 3 个需要是公司特定的。所以我有这个：

```
app/views/info (static area)
...about.html.erb
...company1_faq.html.erb
...company2_faq.html.erb
...company1_index.html.erb
...company2_index.html.erb
...company1_pricing.html.erb
...company2_pricing.html.erb
...privacy.html.erb
...license.html.erb
...terms.html.erb 
```

我想按子域将它们拆分出来，然后基于子域重定向这些操作。但是，我也想从 URL 中删除子域，我不知道该怎么做。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:55:22.853

可以通过[Request对象访问子域](http://guides.rubyonrails.org/action_controller_overview.html#the-request-object)

像这样：

```
request.subdomain 
```

然后，您可以将部分放在不同的文件夹中

```
app/views/info/company1
app/views/info/company2 
```

然后根据子域渲染它们。

```
<%= render "info/#{@subdomain}/faq" %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:58:56.327

Railscasts 一直是我的第一站，所以我确实按照 Ryan 的指示进行操作 ;-)

因为我只需要一个控制器，这就是我所做的其余部分，它工作得很好：

在顶部`info_controller.rb`：

```
before_filter :redirect_to_subdomain_page, only: [:index, :about, :pricing, :faq] 
```

然后在底部：

```
private

def redirect_to_subdomain_page
  render "#{request.subdomain}_#{params[:action]}"
end 
```

完美的！它还保留了常规 URL。

# android - 我错过了什么，因为我无法在 android 应用程序初始化时覆盖白色背景？

> ID：16221306
> 
> 赞同：0
> 
> 时间：2013-04-25T17:43:24.220
> 
> 标签：android, android-activity, background

我已经在任何地方定义了 android:background="#FF000000" 但我仍然无法阻止应用程序启动时出现白色背景。（顶部为ActionBar，底部为白色背景）

是否有任何其他设置可以让我更改此初始化时间背景颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:16:42.133

还要始终查看`Theme`您为应用程序或应用程序选择的 s。

主题/样式设置了一些基本属性，这些属性也会导致相应的设置`Window`；这可以选择像素格式（带/不带 Alpha 通道）。

另一个需要查看的地方可能是任何在您的 Activity中操作`LayoutAttributes`或请求功能的代码，但考虑到您编写的内容，这听起来不太可能。`Window``onCreate()`

# asp.net - Asp.net NullReferenceException：对象引用未设置为对象的实例

> ID：16221308
> 
> 赞同：0
> 
> 时间：2013-04-25T17:43:30.367
> 
> 标签：asp.net, visual-studio-2010, ms-access, login, nullreferenceexception

我不明白为什么它会抛出这个错误。代码对我来说似乎很好，任何人都可以发现我哪里出错了？我正在尝试匹配数据库中的用户名和密码。谢谢

```
Line 20:         myData = loginservice.AdminGetUserTable();
Line 21: 
Line 22:         foreach (DataRow myRow in myData.Tables["Users"].Rows) 
Line 23:         {
Line 24:             if (txt_username.Text == myRow["Username"].ToString() && txt_password.Text == myRow["Password"].ToString()) 
```

错误：

```
[NullReferenceException: Object reference not set to an instance of an object.]
   Login.Button1_Click(Object sender, EventArgs e) in f:\.NetProject\WebSite\Login.aspx.cs:22
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +9553178
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +103
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +35
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1724 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:55:42.927

使用 try catch ...可能是您没有得到“用户”表。使用 Tables[0] 而不是 Tables["Users"]。使用断点。有很多方法。尝试任何一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:56:38.800

这是所有可能性：

1.  loginservice 为空，或
2.  myData 为空，或
3.  myData.Tables 不包含名为“Users”的表，因此它返回 null，或者
4.  用户表中的行不包含名为“用户名”的列，或
5.  用户表中的行不包含名为“密码”的列

哪一个？-~~只需将错误行号与您的源代码匹配即可。~~

如果您的第 22 行确实是错误调用堆栈中提到的第 22 行，那么“null”对象必须是 myData 或 myData.Tables["Users"]

# html - 设置一组节点的父元素（包裹整个组）

> ID：16221309
> 
> 赞同：3
> 
> 时间：2013-04-25T17:43:41.360
> 
> 标签：html, jsoup, element

Jsoup可以设置一组节点的父元素吗？我的意思是包装它，但不是每个匹配的元素 - 只创建一个父元素？所以我想在一个中包含更多元素？

示例：之前

```
<b>some text<i> blabla </i> other text </b> 
```

后

```
<span id='something'><b>some text<i> blabla </i> other text </b></span> 
```

* * *

```
<b>some te
<span id="cke_bm_69S" style="display: none;">&nbsp;</span>
xt</b> 
aaa 
<i>bb
<span id="cke_bm_69S" style="display: none;">&nbsp;</span>
b</i> 
```

跨度标签是书签 - 开始选择和结束选择 - 从 CKEDITOR 添加。然后在服务器端我必须处理它。这是目标 - 添加最终跨度并删除临时跨度（书签）：

```
 <b>some te</b>
    <span id="something"><b>
    xt</b> 
    aaa 
    <i>bb
    </i></span><i>
    b</i> 
```

如您所见，它必须解决标签交叉问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T18:26:09.810

```
public static void main(String... args) throws IOException {

    Document document = Jsoup.parse("<div>"
            + "<b>some text<i> blabla </i> other text </b>" + "</div>");

    Element b = document.select("b").first();

    Element span = document.createElement("span");
    span.attr("id", "something");

    b.replaceWith(span);
    span.appendChild(b);

    System.out.println(document);
} 
```

输出

```
<html>
 <head></head>
 <body>
  <div>
   <span id="something"><b>some text<i> blabla </i> other text </b></span>
  </div>
 </body>
</html> 
```

# javascript - 使用 Javascript 或 Jquery 在创建每一行时为表动态创建递增 id

> ID：16221316
> 
> 赞同：1
> 
> 时间：2013-04-25T17:44:00.120
> 
> 标签：javascript, jquery, html-table

我希望用户单击此表中的图像，该图像是根据从 Web 服务发送的 JSON 数据动态创建的，并更改图像。再次单击图像时，它将变回第一个图像（仅在两个图像之间交换）。

我有一个通过 jQuery 的`$.ajax()`函数创建的表，如下所示：

```
<table border="0" width=80% id="table">
            <thead>
            <tr>
                  <td><h3>Check to Renew</h3></td>
                  <td width=40%><h3>Vendor Part</h3></td>
                  <td width=100%><h3>Part Description</h3></td>
                  <td><h3>Unit Price</h3></td>
                  <td><h3>Quantity</h3></td>
            </tr>
            </thead>
            <tbody>
                <tr class="template">
                  <td><img src="images/checkmark.png" alt="check" id="row1" onclick=""></td>
                  <td>$vendorPart</td>
                  <td>$partDescription</td>
                  <td>$price</td>
                  <td><input class="quantityClass" name="quantity" value="$quantity"/></td>
                </tr>
            </tbody>
        </table> 
```

这是更改图像的简单 Javascript 函数：

```
renewimg=Array("images/checkmark.png","images/gray_x.png");
function rowImageRefresh(y)
{
    document.getElementById(y).src=renewimg[++m];
    if (m==1)
    {m=-1;}
} 
```

这个 Javascript 函数工作得很好，但是只有当我将图像 id 传递给它时（在这种情况下特定于行）。用于测试目的的硬编码证明了这一点。我的问题是我希望能够在创建表行时动态创建行 ID，然后具有可以传递该 ID 的功能。

我想如果我要更多地说明这一点，它会看起来像这样：

```
JavaScript: var row = 1;

HTML:
//table data

<td><img src="images/checkmark.png" alt="check" id="row+[i];i++;" onclick="rowImageRefresh(this.row.id)"></td>
//more table data 
```

在创建每一行时动态创建 id 并且 onclick 函数传递单击的图像的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:03:44.877

您可以使用 id="x" 设置单个行 ID。或者，您可以只使用 jQuery 从发生单击事件的位置查找索引并获取该部分的索引。

```
$('img.check').click(function(){
   var id = $(this).index();
   rowImageRefresh();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:34:46.493

考虑使用自定义数据属性，而不是尝试生成唯一 ID。

```
<img src="..." data-partid="$vendorPart" class="part-img" />

$(".part-img").on("click", function() {
    var id = $(this).data("partid");
    // or
    var id = $(this).attr("data-partid").val();

    rowImageRefresh(id);
}); 
```

**编辑：** 似乎您正在尝试切换复选框图像。更好的方法可能是使用 css 和 sprite 更改背景图像。然后点击你交换`class`依赖的状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T18:43:44.387

这是您可以根据行索引为每个图像分配 id 的一种方法：

```
$.each(rows, function(index, row) {
    var data = $.extend({}, row, { id: "row" + index });
    var $row = $(template(data));
    $row.removeClass('template');
    var $img = $('img', $row);
    $img.on('click', function() {
        var $this = $(this);
        if ($this.data('checked') === true) {
            var checked   = $this.attr('src');
            var unchecked = $this.data('src');
            $this.attr('src', unchecked);
            $this.data('src', checked);
            $this.data('checked', false);
        } else {
            var unchecked = $this.attr('src');
            var checked   = $this.data('src');
            $this.attr('src', checked);
            $this.data('src', unchecked);
            $this.data('checked', true);
        }
    });

    $tbody.append($row);
}); 
```

图像的 HTML 如下所示：

```
<img src="checked.png" alt="check" data-checked="true" data-src="unchecked.png" id="${ id }" /> 
```

这是一个工作示例：http: [//jsfiddle.net/potatosalad/MJYpA/1/](http://jsfiddle.net/potatosalad/MJYpA/1/)

我使用[lodash.js](http://lodash.com/docs#template)作为模板，但是无论你做什么来生成 HTML 行都应该是一样的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T18:46:08.200

您实际上根本不需要 id。例如：

```
<img src="images/checkmark.png" alt="check" onclick="toggle(this)"> 
```

然后脚本：

```
function toggle(element)
{
    var sources = ["images/checkmark.png", "images/gray_x.png"],
        current = $(element).data('state') || 0;

    current = 1 - current;

    $(element).data('state', current);
    element.src = sources[current];
} 
```

它在两种状态之间切换，使用 记住当前状态`.data()`。

# vb.net - AutoScaling WinForm 显示（小、中）

> ID：16221317
> 
> 赞同：5
> 
> 时间：2013-04-25T17:44:03.190
> 
> 标签：vb.net, winforms, scaling, dpi, autoscalemode

首先，请原谅我，但由于我在工作中安装了 Windows，所以我的屏幕截图是法语的。尽管如此，它仍然很容易理解。我将包括屏幕截图以使其更具视觉吸引力。

以下是一些背景信息：

*   视窗 7 64 位
*   视觉工作室 2010
*   默认显示为 100%
*   自动缩放模式：**DPI**
*   自动尺寸：**真**

![表单属性](https://i.stack.imgur.com/wGeLo.png)

我的应用程序是在默认（小 - 100%）显示中开发的 Windows 窗体。像这样： ![小（默认）显示](https://i.stack.imgur.com/dMKOc.png)

如您所见，“Petite”或“ **Small** display”是默认选择。

## 小显示屏 - 100%（默认）

这是我的应用程序在此设置下的外观。**这是正确的显示** ![完美展示](https://i.stack.imgur.com/VWOVb.png)

## 中等显示 - 125%

红色矩形指出不需要的空白空间。 ![以中等或 125% 显示](https://i.stack.imgur.com/jCdJI.png)

我努力了：

*   **锚定**/**停靠**我的控件，例如我的拆分容器、表格布局面板、**Form_Load上的列表视图** *和*通过**UI**。这没有用。
*   向窗体添加一个拆分容器，所有控件分别分离到其中
*   添加表格布局面板，其中所有文本框和按钮都位于各自的单元格中

由于锚定和对接，我真的认为它存在缩放问题。虽然这似乎不是问题......似乎有问题的是选项卡控件和列表视图......

一些用户（大多数）将其设置设为默认设置 (100%)，但也有少数用户将其设置为中等设置，从而导致此缩放问题。有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:44:10.990

由于某种原因，我看不到您的屏幕截图或链接，所以我无法想象问题。如果缩放是问题，请尝试设置`AutoScaleMode`为`None`。

我最近不得不这样做，因为我的 winform 应用程序是图像密集型的，它不会在中等设置上正确呈现，因为我使用默认的 Small Settnigs 显示构建它。将比例模式更改`None`为对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T18:46:25.600

我通过将选项卡控件和列表视图放在 tablelayoutpanel 中解决了我的问题。所有没有正确缩放的东西都必须放在 TableLayoutPanel 中。我保持我`AutoScaleMode`的 to`DPI`和`AutoSize`to`True`

确保将所有内容停靠在其父容器中。

这是更直观的文档大纲（像我一样）：

![大纲](https://i.stack.imgur.com/mdJmq.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-24T14:02:58.113

只需单击表单并转到属性窗格。找到 Anchor 元素并单击下拉菜单。您单击方形结构中的所有线条以变为灰色。然后点击进入。问题已解决。

# php - OOP - 类和子类 - 调用子类方法

> ID：16221318
> 
> 赞同：0
> 
> 时间：2013-04-25T17:44:05.107
> 
> 标签：php, class

我想知道这种语法是否正确：

在 Classes.php 上：

```
Class Cart {

   public $Product; // an object handler will be set on this property

   public function __construct($user) {
   // get a product on user's cart (let's say it's only 1 product) - returns $id
   $this->Product = new Product($id);
   }
}

Class Product {

   public function __construct($id) {
   // construct goes here
   }

   public function Product_Method() {
   // product method goes here
   }

} 
```

在脚本上

```
$cart = new Cart($user);
$product_method = $cart->Product->Product_method(); 
```

它看起来不错，因为 $product 设置为 Public 并引用对象处理程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:11:14.530

在这里你可以用“正确”来表示各种各样的事情。

1.  **句法**

    你的语法是正确的。您可以通过运行代码很容易地发现这一点，所以我不确定这是否是您要问的。

2.  **正确性**

    正如其他人所说，`$id`不存在于构造函数的范围内。这将导致运行时错误。

3.  **最佳实践**

    [如今，依赖注入](http://www.developerknowhow.com/php-dependency-injection-explained/)风靡一时。`new`不鼓励从构造函数调用。相反，你会传入你的`Product`对象。请注意，这有点主观，如果这听起来不必要地复杂，没有什么*强迫*你这样做，但至少要知道为什么人们反对它，这样你才能做出明智的决定。

    此外，根据您的用例，封装功能可能会更好，这样外部代码就不必知道`Product`'s 的方法（它只需要处理购物车）。也就是说，`$Product`将其设为私有并添加一个方法来`Cart`负责调用`Product_method()`. 这可能有意义，也可能没有意义，具体取决于 `Product_method()`（是否`Cart`应该知道该怎么做？）的语义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:47:14.960

您通过将 $id 传递给构造函数来使用它`new Product($id)`，但是您从哪里获得 $id 呢？而且您只有一个字符串浮动在函数中，没有回声或分配给变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:52:23.897

$id 是什么？你需要在构造中设置 $id

```
Class Cart {

   public $Product;

   public function __construct($user,$id) {
   "get a product on user's cart (let's say it's only 1 product)"
   $this->Product = new Product($id);
   }
} 
```

在你的代码中

```
$cart = new Cart($user,$id);
$product_method = $cart->Product->Product_method(); 
```

# desire2learn - 如何在 Desire2Learn 中使用 JavaScript 找出 OrgUnitCode？

> ID：16221320
> 
> 赞同：2
> 
> 时间：2013-04-25T17:44:15.020
> 
> 标签：desire2learn, valence

我们正在从 ANGEL 转换为 D2L。我们创建了基于 JavaScript 的小部件，这些小部件使用 $SECTION_ID$ 令牌来告诉脚本它正在运行的课程。在 Desire2Learn 中，等价的将是替换字符串 {OrgUnitCode}。我们只想使用该替换字符串，但它们在课程页面（我的大部分小部件使用情况所在）中无法正常工作。还有其他方法可以找出 JavaScript 小部件正在运行的课程吗？

这是一个示例，其中一个小部件的代码用户将粘贴到他们的课程页面中： 

```
<script type="text/javascript" data-id="NotablePAD540" section="{OrgUnitCode}">
     var DAT = DAT || {}; if (!DAT.n) { (function (d) {
     var f = d.getElementsByTagName('SCRIPT')[0], s = d.createElement('SCRIPT'); s.async = true;
     s.type = 'text/javascript'; s.charset = 'utf-8'; s.src = '//dev.notable.vudat.msu.edu/n.js'; 
     f.parentNode.insertBefore(s, f); }(document)); }; DAT.n = 1; </script> 
```

每个记事本都有一个唯一的 ID，此代码片段示例适用于 ID 为 540 的记事本。动态位 {OrgUnitCode} 用于分离数据，允许我在多个课程中使用相同的片段并拥有数据分开存放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T16:38:15.037

如果纯粹是在课程主页上有一个包含动态信息的小部件，那么最有效的解决方案可能是使用“远程插件小部件”。

这些可以由管理员使用“[管理远程插件](http://docs.valence.desire2learn.com/basic/uiplugins.html#remote-plugins)”工具进行设置。

它们的远程插件有效地将 LTI 启动组合到 iframe 中，并在您配置主页（或系统的其他区域）时将它们作为小部件提供。发布了一些[示例](http://devs.valence.desire2learn.com/2013/02/15/remote-plugins-the-bookwidget-sample-2/)，说明如何将其用于更丰富的服务器端应用程序。

LTI 启动本身传递有关它从何处启动的信息（即上下文相关信息）。

在您的情况下，看起来只托管一个包含 javascript 的静态页面就可以了。然后您可以使用 javascript 检查查询字符串。（如果您当时关心信任，那么安全地测试来自 javascript 的 LTI 签名有点棘手......）

此外，如果您需要补充[其他可用信息，](http://docs.valence.desire2learn.com/reference.html)[可以从 javascript 使用 Valence API（GET 调用）](http://docs.valence.desire2learn.com/clients/index.html)。

# c - 如何使用 libjpeg 获取图像的图像矩阵

> ID：16221327
> 
> 赞同：3
> 
> 时间：2013-04-25T17:44:34.423
> 
> 标签：c, matlab, image-processing, libjpeg

libjpeg 中的任何函数是否像 matlab 中的 imread 一样输出图像矩阵？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T18:50:07.267

从 libjpeg v9 发行说明（[http://www.ijg.org/files/](http://www.ijg.org/files/)）：

> 像素由扫描线存储，每条扫描线从左到右运行。每个像素的分量值在行中是相邻的；例如，R,G,B,R,G,B,R,G,B,... 用于 24 位 RGB 颜色。每个扫描线都是一个数据类型为 JSAMPLE 的数组——通常是“无符号字符”，除非您更改了 jmorecfg.h。（您还可以通过修改 jmorecfg.h 来更改 RGB 像素布局，例如 B、G、R 顺序。但在此之前请参阅该文件中列出的限制。）
> 
> 通过制作指向扫描线起点的指针列表来形成二维像素阵列；所以扫描线不需要在内存中物理上相邻。即使一次只处理一条扫描线，也必须创建一个单元素指针数组以符合此结构。指向 JSAMPLE 行的指针是 JSAMPROW 类型，指向指针数组的指针是 JSAMPARRAY 类型。
> 
> 图书馆在每次调用时接受或提供一条或多条完整的扫描线。一次处理行的一部分是不可能的。扫描线总是从上到下处理。如果您将所有图像都保存在内存中，则可以一次调用处理整个图像，但通常一次处理一条扫描线是最简单的。

关键部分是：

> 通过制作一个指针列表来形成一个二维像素数组

这意味着库本身不会返回像素的“矩阵”；相反，它返回行（扫描线），用户负责将这些扫描线排列成“矩阵”。这不是太具有挑战性，但需要做一些工作。以下代码片段显示了 JPEG 解压缩的工作示例：

```
while (decompressor.output_scanline < decompressor.output_height)
{
    pRow = &jpegInputBuffer[decompressor.output_scanline*rowStride];
    jpeg_read_scanlines(&decompressor, &pRow, 1);
} 
```

请注意，我省略了许多细节（*pRow*、*rowStride*的定义、*解压*器结构的加载方式等），因为这些似乎超出了问题的范围。

# python - python队列在当前完成之前跳转到下一个项目

> ID：16221329
> 
> 赞同：0
> 
> 时间：2013-04-25T17:44:40.973
> 
> 标签：python, multithreading, queue

我正在使用队列从另一个线程接收任务并一个一个完成。线程模块根据磁盘上的文件创建事件将项目放入队列，并且主线程应该在文件以先进先出的方式添加到队列时一个一个地处理文件。处理一个任务/文件可能需要几秒钟到一分钟。

我面临的问题是，与使用 queue.get() 以同步方式一一处理队列项目相反，有时，多个并发进程以异步方式启动。这是代码的样子：

```
#code in main thread
q = Queue.Queue(0)
while True:
    qItem = q.get()
    do_something_with(qItem)  # this may take few seconds to minutes

#code in other thread
items = ['one', 'two', 'three']
for item in items:
    q.put(item) 
```

上面的代码应该处理项目“一”，然后是“二”，然后是“三”。在我的实际程序中发生了什么，do_something_with 方法在处理项目“一”之前开始处理项目“二”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:14:35.797

如果我没记错的话，你创建的线程比你*想象*的要多！

你在用 守卫主街区`if __name__=='__main__':`吗？

否则，您可能只是创建了比您意识到的更多的线程，并且它们可能正在使用队列中的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:27:15.893

您正在将列表附加到`l`. 这就是导致错误的原因。

`l.append(outl[a:b])`制作列表的`outl`一部分并将该列表添加到`l`

利用`l.extend(outl[a:b])`

# functional-programming - 在球拍中定义错误

> ID：16221336
> 
> 赞同：12
> 
> 时间：2013-04-25T17:45:02.080
> 
> 标签：functional-programming, lisp, scheme, expression, racket

几天前我刚刚发现了 Racket，我正在尝试通过编写一个小脚本来更熟悉它，该脚本生成图像以使用`#lang slideshow`.

我知道在函数范式中编程时，用 . 创建几乎所有变量是一种很好的做法`let`，但我发现它引入了太多的嵌套级别，并且 Racket 的 let 有一个过于复杂的 API，需要多余的括号。我确信这是为了`let`在以更强大的方式使用时消除歧义，但就我的目的而言，这只是一种烦恼。因此，我使用 , 创建所有变量`define`，并在需要时使用 编写块`begin`（例如在`if`语句的主体中）。

问题是我一再遇到看似非常神秘的错误。我确定我只是犯了一些愚蠢的初学者错误，对语言不熟悉，但我似乎真的找不到抱怨的根源。

这是有问题的代码：

```
(define sub-code (foldr ht-append (rectangle 0 0) (map internal-style (rest code)))) 
```

尽管我们定义`sub-code`的内容似乎无关紧要。如果我将其替换为

```
(define sub-code '()) 
```

我收到同样的错误。DrRacket 说的`define`是在表达式上下文中使用。我理解这个错误通常意味着什么 - 当你编写类似的代码时它会引发 IE `(print (define x 10))`，但我看不出是什么在这里触发它。

如果有帮助，这`define`是在一个`begin`块的开头，在一个`if`语句中

```
(if (list? code)
    (begin
        (define sub-code '())
        ; a few more define statements and finally an expression )) 
```

DrRacket 正在打印的具体错误消息是

```
define: not allowed in an expression context in: (define sub-code (quote ())) 
```

我认为可能`define`不允许在`begin`块中，但我检查[了文档](http://docs.racket-lang.org/reference/begin.html?q=begin#%28form._%28%28quote._~23~25kernel%29._begin%29%29)，其中一个示例`begin`是

```
(begin
    (define x 10)
    x) 
```

所以我真的不知道该怎么办。提前致谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-25T18:15:06.407

允许在“主体”上下文中进行定义，例如 in`lambda`和`let`其他。的后续子句和替代子句`if`不是正文上下文；它们是表达式上下文，因此不允许定义。

`begin`是特殊的 -`begin`在正文上下文中允许定义，但`begin`在表达式上下文中禁止定义。你的案子属于后者。

例如：

```
(define (foo . args)     #| body context #|)
(define foo (lambda args #| body context |#))
(define (foo . args)
  (let (...)
    #| body context |#)) 
```

需要表达式的语法关键字：`if, cond, case, and, or, when, unless, do, begin`. 查看任何 Scheme 报告中的正式语法 (r{4,5,6,7}rs)；寻找`<body>`, `<sequence>`,`<command>`和`<expression>`.

此外，如果您需要表达式中的正文上下文，只需包装一个`let`语法形式，如下所示：

```
(if test
    (let ()
      (define foo 'foo)
      (list foo foo))
    alternate) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-25T18:29:56.290

正如 GoZoner 解释的那样，您不能`define`在表达式上下文中使用。

你能做什么呢？

使用`let`：

```
(if (list? code)
    (let ([x '()])
      x)
    ... 
```

或者它可以使用“空”`let` *和* `define`：

```
(if (list? code)
    (let ()
      (define x '())
      x)
    ... 
```

但这有点傻。

或使用`cond`and `define`：

```
(cond [(list? code)
       (define x '())
       x]
      ... 
```

最后一种方式——使用`cond`和`define`——最接近[当前 Racket 风格指南](http://www.ccs.neu.edu/home/matthias/Style/style/Choosing_the_Right_Construct.html)推荐的方式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-25T19:28:38.850

这里有更多细节，来自 Racket 文档。

[需要不同的上下文](http://docs.racket-lang.org/reference/syntax-model.html?q=internal%20d#%28tech._context%29)，因为宏必须以不同的方式扩展，具体取决于允许的语言形式。

正如其他人所说，表达式上下文中不允许定义（文档中的“expr ...”），但在其他上下文中可以。

在其他文档条目中，“body ...”表示内部定义上下文（[guide](http://docs.racket-lang.org/guide/define.html?q=internal%20d#%28part._intdefs%29)、[reference](http://docs.racket-lang.org/reference/syntax-model.html?q=internal%20d#%28part._intdef-body%29)），例如在 lambda 正文中，“form ...”表示所有非表达式上下文，如 begin 文档中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-11-11T05:09:48.810

或者您可以将表达式包装在 (begin) eg(begin (define x 10) (define y 100) (define z 1000))

# jquery - 使用 jQuery 隐藏可见电话的引导 div？

> ID：16221337
> 
> 赞同：0
> 
> 时间：2013-04-25T17:45:05.767
> 
> 标签：jquery, twitter-bootstrap, show-hide

似乎使用带有引导程序的可见电话之类的响应式标签会禁用隐藏和显示的jquery功能。我正在尝试在准备好的文档上隐藏一个 div，该 div 只能在手机（可见手机）上看到。在按下按钮时，将显示相同的 div，而另一个也是可见电话的 div 将被隐藏。

不幸的是，当存在一类可视电话时，隐藏和显示什么都不做。如果我删除可见电话，jQuery 会正常工作。问题是，我不希望这些 div 不在手机大小的浏览器中显示。

这是我的脚本和 div：

```
<script type="text/javascript">
$(document).ready(function(){
    $('#phone-num').hide();
    $('#num').click(function() {
        $('#phone').hide();
        $('#phone-num').show();
    });
    $('#num-back').click(function() {
        $('#phone-num').hide();
        $('#phone').show();
    });
});
</script>

<div id="phone" class="visible-phone">
<button style="margin-left: 60%;" class="phone5" id="num">#</button>
</div>

<div id="phone-num" class="visible-phone">
<button style="margin-left: 80%;" class="phone5" id="num-back"><i class="icon-reply"></i></button>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:15:01.327

不透明度解决方法：

```
$('#phone-num').css('opacity', 0);

$('#num').click(function () {
    $('#phone').css('opacity', 0);
    $('#phone-num').css('opacity', 1);
});

$('#num-back').click(function () {
    $('#phone-num').css('opacity', 0);
    $('#phone').css('opacity', 1);
}); 
```

这是一个 jsFiddle，如果没有出现按钮，那么您可能需要将结果窗格缩小到媒体查询将其识别为电话分辨率的程度。

jsfiddle：http: [//jsfiddle.net/cFd2n/4/](http://jsfiddle.net/cFd2n/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T13:49:24.267

我通过将元素包装`visible-phone`在另一个容器中解决了这个问题，然后可以将其隐藏，例如：

```
<div id="phone-num">
  <div class="visible-phone">
    <button style="margin-left: 80%;" class="phone5" id="num-back">
        <i class="icon-reply"></i>
    </button>
  </div>
</div> 
```

现在这个东西只显示在手机上，当声明父元素不可见时，内部 div 也被隐藏了。

```
$('#phone-num').hide() 
```

# javascript - 如何在不禁用滚动功能的情况下隐藏 android 浏览器的滚动条？

> ID：16221341
> 
> 赞同：1
> 
> 时间：2013-04-25T17:45:37.093
> 
> 标签：javascript, android, css, mobile-browser

我想使用 css 或 js 隐藏移动浏览器的滚动条。

```
::-webkit-scrollbar {
    display: none;
} 
```

此 CSS 适用于桌面浏览器 chrome，但不适用于移动 chrome。当页面滚动时，滚动条仍然显示。我想知道是否有办法实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:01:47.773

I don't know about a css solution but you could use [iSrcoll-4](http://cubiq.org/iscroll-4). It was created to add scrolling functionality to older mobile devices. You can hide the scroll bar it generates by setting vScrollbar to false

```
var myScroll = new iScroll('wrapper', { hScrollbar: false, vScrollbar: false }); 
```

# jquery - 使用 Phantomjs/Jquery 发送跨域 GET 请求服务器端

> ID：16221342
> 
> 赞同：1
> 
> 时间：2013-04-25T17:45:45.013
> 
> 标签：jquery, cross-domain, phantomjs

有没有办法合并

```
$.get("http://localhost/?action=post", { site: "Test" } ); 
```

在服务器端使用 PhantomJs 和 Jquery？

includeJs() 和 injectJs() 似乎除了抛出错误之外什么也没做。

还：

我也尝试在服务器端使用常规的 Javscript：

```
var xhr = new XMLHttpRequest();
var page = "http://localhost";
var params = "action=post&site=ipsum";
xhr.open("GET",page+"?"+params, false); 
xhr.send(); 
```

也没有运气：

```
 xhr.open("GET",page+"?"+params, false); 
```

请注意我如何将第三个参数 async 设置为“false”——设置为“true”时没有任何反应！

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T17:57:11.857

一个快速的谷歌向我展示了他们支持跨域请求，`--web-security=false`这里的命令行[https://github.com/ariya/phantomjs/wiki/API-Reference](https://github.com/ariya/phantomjs/wiki/API-Reference)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-03T13:34:39.243

我无法对 DMoses 的答案添加评论，所以我在这里分享我的意见作为答案。

要翻译 DMoses 提到的网络安全设置，您可以使用`phantomjs --web-security=no yourjsfile.js`.

请注意，此语法在 macOS 下有效，但在 Ubuntu 16.04 中不可行；在 phantomjs 执行中禁用 web 安全性，ubuntu 仍然给出“不支持 CORS”错误。我想知道该选项`--web-security=no`是否在 Ubuntu 下不起作用。

# jquery - 使用 jQuery 在 TinyMCE 编辑器中选择内容

> ID：16221343
> 
> 赞同：0
> 
> 时间：2013-04-25T17:45:45.053
> 
> 标签：jquery, wordpress, tinymce

我试图在 Stackoverflow 和其他地方找到这个问题的答案，但我找到的解决方案似乎都不适合我。那么，这是我的问题：

我在 WordPress 中添加了一个简单的 TinyMCE 按钮。该按钮可以正常工作。现在，我希望能够使用 jQuery 选择按钮进入编辑器的内容。那就是我遇到麻烦的地方。

这是按钮的代码：

```
(function() {
   tinymce.create('tinymce.plugins.wpAddContent', {
      init : function(ed, url) {
         ed.addButton('wpaddcontent', {
            title : 'WP Add Content',
            image : url+'/addContentImage.png',
            onclick : function() {
                 ed.execCommand('mceInsertContent', false, '\
                    <div class="row">\
                        <div class="large-6 columns">Some content...</div>\
                        <div class="large-6 columns">Some content...div>\
                    </div>\
                ');
              }
          });
      },
    createControl : function(n, cm) {
      return null;
    },
    getInfo : function() {
      return {
        longname : "WP Add Content",
        author : '',
        authorurl : '',
        infourl : '',
        version : ""
      };
    }
  });
   tinymce.PluginManager.add('wpaddcontent', tinymce.plugins.wpAddContent);

})(); 
```

现在，我想知道的只是如何使用 jQuery 选择具有 row 类的 div。

有任何想法吗？

谢谢，

摩西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:59:29.047

好的，看来我想通了——TinyMCE API 有很多选项。这是有效的方法之一：

```
 ed.onVisualAid.add(function(ed, e, s) {
       jQuery('#content_ifr').contents().find('.row')..css({'background-color', 'red');
  }); 
```

您可以在这里找到其他选项： [http ://www.tinymce.com/wiki.php/API3:class.tinymce.Editor](http://www.tinymce.com/wiki.php/API3:class.tinymce.Editor)

# .htaccess - url 重定向到外部站点中的页面

> ID：16221344
> 
> 赞同：1
> 
> 时间：2013-04-25T17:45:49.410
> 
> 标签：.htaccess, http-redirect

我的站点 A 中有一个页面 [http://www.siteA.com/1987/title.html](http://www.siteA.com/1987/title.html)

我想 301 将上面的页面重定向到外部站点 siteB 中的页面，如下面的示例所示 [http://www.siteB.com/page/title3.html](http://www.siteB.com/page/title3.html)

我想在 htacess 中执行此操作，而不是在 php 中

我努力了

```
#redirect 301 /1987/title.html http://www.siteB.com/page/title3.html 
```

这似乎对我不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:50:43.027

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^www\.siteA\.com$ [NC]
RewriteRule ^1987/title\.html$ http://www.siteB.com/page/title3.html [L,R=301,NC] 
```

# flash - Flash/AIR：可以限制打印到物理打印机 - 不是虚拟/pdf

> ID：16221345
> 
> 赞同：1
> 
> 时间：2013-04-25T17:45:49.757
> 
> 标签：flash, air

是否可以限制从 FlashPlayer/AIR 打印到物理打印机设备 - 阻止打印到 pdf 或图像驱动程序等虚拟设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T07:43:10.933

所以，答案是否定的，不可能。（谢谢你启发我，大卫！）

乔纳斯

# android - 在 Android 中实现水平滚动列表类型视图的最佳方法

> ID：16221348
> 
> 赞同：0
> 
> 时间：2013-04-25T17:45:58.607
> 
> 标签：android, list, view, horizontal-scrolling

我需要创建一个水平列表类型的视图，它显示许多视图只是一个图像和一小段文本。该列表需要可以通过惯性滚动进行轻弹，具有视图的回收能力，并且需要能够在视图可见或超出可见范围时延迟加载视图。

这是我考虑过的以及为什么它们看起来不合适的原因。

图库 - 已弃用，因此无法使用。

ViewPager - 不允许您轻弹页面，轻弹只是移动到下一页。

Horizo​​ntalScrollView - 需要手动添加视图而不是使用适配器来提供所需的视图，因此视图不会被回收或延迟加载。

我也不能使用其他人创建的任何库或视图来实现这一点，无论他们的许可证是否表明他们可以免费使用。

为了实现这一目标，我想到了两种选择。第一种是使用 Horizo​​ntalScrollView 并在设置时创建和添加所有子视图但没有它们的图像，然后检测视图何时几乎可见并加载它们的图像。我仍然可以创建几百个视图并一次性将它们添加到这里，但至少我不会将所有图像加载到内存中。第二种选择是编写我自己的 AdapterView 来做我想做的事情，这似乎是最灵活但也是最劳动密集型的。

任何关于实现这一目标的最佳方式的意见将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T07:20:31.037

使用 Horizo​​ntalScrollView，您需要手动添加布局。以我的分析，ViewPager 是最好的控制器。您可以通过其适配器轻松控制 viewpager 中的位置。您可以通过覆盖适配器类的 getPageWidth(int position) 方法在单个屏幕中设置 viewpager 的多个页面。您也可以使用片段类的 onCreateView 方法来重用视图。

```
@Override
    public float getPageWidth(int position) {
        // TODO Auto-generated method stub

          return 0.5f;
    } 
```

这将在一个屏幕上一次有 2 页

# c++ - 用指针修改字节

> ID：16221349
> 
> 赞同：0
> 
> 时间：2013-04-25T17:45:59.113
> 
> 标签：c++, c, pointers

```
long double i, *ptr;
ptr = &i; 
```

我想修改第4个字节的值。long double的大小是8个字节。那么可以通过从 *ptr 中减去 4 来实现吗？IE

```
(ptr)-4 = 9; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T18:15:17.107

您可以通过将指向对象的指针转换为指向的指针`unsigned char`，然后通过该指针访问字节来访问表示对象的字节。例如，`i`可以通过以下方式将 的第四个字节设置为 9：

```
unsigned char *p = (unsigned char *) &i;
*(p+4) = 9; 
```

**但是，**您不应在没有充分理由的情况下这样做。它会遇到可移植性问题，并且应该仅用于特殊目的并仔细注意 C 标准和/或 C 实现的文档。如果您进一步解释为什么要这样做，则可能会显示出更好的方法或解释危险。

请注意，字节四（字节零的起始编号）的正确地址是`p+4`，而不是`p-4`问题中使用的地址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T18:17:55.497

我会尝试一些更具可读性的东西

```
union {
    long double d;
    char v[sizeof(long double)];
} x;

x.d = 1234567890;
std::cout << x.d << ' ' << int(x.v[6]) << std::endl;
x.v[6] = 0xCC;
std::cout << x.d << ' ' << int(x.v[6]) << std::endl; 
```

产量

```
1.23457e+09 44
1.23981e+09 -52 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:14:14.000

首先看这里：[如何在 C 中仅设置字节的某些位而不影响其余位？](https://stackoverflow.com/questions/4439078/how-do-you-set-only-certain-bits-of-a-byte-in-c-without-affecting-the-rest). 这个想法是清除您感兴趣的字节，然后使用或操作设置您的值。所以在你的情况下，你会这样做：

```
val &= ~0xff;    // Clear lower byte
val |= 9 & 0xff; // Set Nine into the least significant byte. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T18:04:38.020

`(*ptr)-4 = 9`不允许，因为它会导致 RValue 违规（赋值操作的右侧不能是另一个操作）。

但是您可以使用以下位操作：

`(*ptr) = (*ptr) & 0x00009000;`

# javascript - Javascript：if 语法中的附加零是什么？

> ID：16221351
> 
> 赞同：4
> 
> 时间：2013-04-25T17:46:06.737
> 
> 标签：javascript

我一直在阅读我公司项目的 javascript 源代码并遇到了这个

```
if (options.parse === void 0) options.parse = true; 
```

不知道`0`这里做什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T17:47:49.203

[`void`运算符](http://www.ecma-international.org/ecma-262/5.1/#sec-11.4.2)非常有趣：它接受一个操作数，计算它，然后表达式的结果是`undefined`。所以`0`不是无关紧要的，因为`void`运算符需要一个操作数。

人们有时使用来避免符号*可以*`void 0`被覆盖的事实（如果您不使用严格模式）。例如：`undefined`

 *```
undefined = 42; 
```

另外，`undefined`在一个窗口中不是`===`在`undefined`另一个窗口中。

因此，如果您正在编写一个库并且想要有点偏执，无论是关于人们重新定义`undefined`还是您的代码可能用于多窗口情况（框架等），您可能不会使用该符号`undefined`来检查某些东西是否是`undefined`. *通常*的答案是使用`typeof whatever === "undefined"`，但`=== void 0`可以工作（好吧，它可能在多窗口情况下不起作用，具体取决于您将其与什么进行比较）并且更短。:-)*

# css - IE 网站内容仅显示在浏览器可见区域

> ID：16221352
> 
> 赞同：0
> 
> 时间：2013-04-25T17:46:10.090
> 
> 标签：css, internet-explorer, background, internet-explorer-9

找到了这个很棒的网站，这是我在这里的第一个问题。

目前我在一个网站上工作，它在大多数浏览器上看起来不错，但在某些浏览器上发现了 2 个问题。

这是页面： [http ://www.linkmen.com.hk/web2013/20130426/contact.htm](http://www.linkmen.com.hk/web2013/20130426/contact.htm)

这是问题所在： [http ://www.linkmen.com.hk/web2013/20130426/problem.png](http://www.linkmen.com.hk/web2013/20130426/problem.png)

问题 1：在某些 safari 机器上会显示这样的背景。在浏览器上打开萤火虫时也会发生这种情况。

问题 2：我用 ie 9（新机器）在几个窗口 vista 上进行了测试，似乎该站点的内容仅显示在浏览器可见区域，当向下滚动时，下面的所有内容都消失了。

谢谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:03:23.687

将橙色背景`.orange`类从正文中`height:100%`移出`.container_contact``min-height 100%`

# javascript - 如何将函数参数转换为图像？

> ID：16221356
> 
> 赞同：0
> 
> 时间：2013-04-25T17:46:34.323
> 
> 标签：javascript

我在将成为图像的函数中有一个参数。现在我想对该对象进行一些检查，例如它是否未定义以及对象中图像的来源是什么。

问题是我无法请求`img.src`，因为该变量只是一个未键入的参数。我正在考虑创建一个辅助`Image()`对象，然后以某种方式用 解决它`imgObject = img`，但这看起来很傻，可能行不通。

那么，我如何简单地在代码中声明一个参数是 Image 类型，并且我想为该对象请求特定的 Image 类型方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:02:16.863

This has nothing to do with variable typing. JavaScript does not have static types for variables, so the variable being "just an un-typed parameter" is a red herring. If the object is an image, you can treat it as an image. If treating it like an image isn't working, then the wrong thing is getting passed to your function and that's what you need to fix.

# c# - 如何使 Enterprise Library 5 与 .NET 4.5 兼容？

> ID：16221358
> 
> 赞同：0
> 
> 时间：2013-04-25T17:46:40.623
> 
> 标签：c#, logging, enterprise-library, .net-4.5

我正在使用 .NET 4.5 下的项目并尝试使用 EL 5.0 Logging 应用程序块。目的是从单独的文件加载日志记录块模式。下面显示的代码在 .NET 4.0 下成功执行，但在下面代码的第 2 行抛出 FileLoadException 异常（即在*new LogWriterFactory(..)*中）：

```
 IConfigurationSource configSource = new FileConfigurationSource("logging.config");
        LogWriterFactory factory = new LogWriterFactory(configSource);
        LogWriter logWriter = factory.Create(); 
```

例外是（对不起，它是我翻译成英文的）：

> 无法加载文件或程序集“Microsoft.Practices.Unity，Version=2.0.414.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集清单定义与对程序集的引用不对应。（来自 HRESULT 的异常：0x80131040）

有人知道是否有机会使其适用于 .NET 4.5？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T12:29:58.370

看来您引用的 Unity 版本与 Enterprise Library 所期望的版本不同。如果您使用的是 Unity 2.0.505.0，则应从 NuGet 升级到最新版本的 Enterprise Library 5.0 块或降级到 Unity 2.0.414.0。据我所知，您不能将 Unity 3.0.1304.0 与 Enterprise Library 5.0 一起使用。

# c++ - C语言的副作用

> ID：16221359
> 
> 赞同：2
> 
> 时间：2013-04-25T17:46:41.643
> 
> 标签：c++, c, side-effects

我认为我对编程语言中副作用的理解还可以。

我认为这是[维基百科](http://en.wikipedia.org/wiki/Side_effect_%28computer_science%29)的一个很好的定义：

> “除了返回一个值之外，它还修改了一些状态或与调用函数或外部世界有可观察的交互。”

但是，我在同一个链接中阅读了此内容（是的，我知道这可能不是寻找示例的最佳位置）：

> “副作用行为的一个常见演示是 C++ 中的赋值运算符。例如，赋值返回正确的操作数并具有将该值分配给变量的副作用。这允许在语法上干净的多重赋值：”

```
int i, j;
i = j = 3; 
```

为什么他们认为这是副作用？这与对 2 个局部变量的两个简单赋值语句相同。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T18:05:54.773

您可以使用赋值表达式作为值：

```
double d = 3.5;

int x, y;

printf("%d", x = d); // Prints "3".

y = (x = d) * 5; // Sets y to 15.

double z = x = d; // Sets z to 3 (not 3.5). 
```

产生的值`x = d`是它的主要影响。的值的变化`x`是一个副作用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T17:48:44.740

如果世界的状态，例如变量的值，在计算中被修改，这是一个副作用。

例如，`j = 3`计算 3，但它也会修改 的值`j`作为副作用。

一个不那么简单的例子：`j += 3`计算`j + 3`，但它也设置`j`为这个新值。

C的语义混淆了水：在C中写的重点`i = 1`是获得变量赋值的副作用；不计算价值`1`。在 Haskell 或 Erlang 等函数式编程语言中，将赋值作为副作用的讨论更有意义，其中变量只能被赋值一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T17:50:00.117

我认为这是因为具有将值分配给`j = 3`的预期效果，但**也具有****返回**值的副作用`3``j`****`j`****

# java - 如何从 ArrayList 中获取特定对象

> ID：16221361
> 
> 赞同：0
> 
> 时间：2013-04-25T17:46:58.103
> 
> 标签：java, object, arraylist, get, 2d

在我目前正在制作的游戏中，我需要检查两个敌人是否相互碰撞，如果他们碰撞，只有这两个敌人应该受到影响，而不是所有存在的敌人。因此，当它们碰撞时，我需要从 ArrayList 中获取两个敌人，以便只有它们会受到影响。我该怎么做呢？

这是将敌人添加到 ArrayList 的代码

```
zombie.add(new Zombie(randomXSpawn,randomYSpawn)); 
```

要检查敌人是否相互碰撞，我目前使用此代码

```
Zombie z = (Zombie) zombie.get(i);
Rectangle r2 = z.getBounds();
if(r2.intersects(r2)){
     //Code goes here
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:54:24.070

您将需要检查每对僵尸，看看它们是否发生了碰撞。执行此检查的最简单方法如下：

```
for (int i = 0; i < zombie.size(); i++) {
    Rectangle r1 = zombie.get(i).getBounds();
    for (int j = i+1; j < zombie.size(); j++) {
        if (r1.intersects(zombie.get(j).getBounds())) {
            // Code goes here
        }
    }
} 
```

请注意，`j`不是每次都从零开始。这样一来，只要每个僵尸只在列表中出现一次，您就永远不会检查同一对两次，也不会检查僵尸自身。

此外，作为一般编程技巧，将列表的名称更改为`zombies`. 它更清晰一些，并且养成为变量使用好名称的习惯将在以后为您省去麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:24:38.597

此外，如果您还没有这样做，您可能希望在僵尸不能出现的地方（房屋、障碍物等）周围创建边界。

不过，Rob 的回答确实很好。

# c++ - C ++中的qsort用于字符串数组？

> ID：16221362
> 
> 赞同：1
> 
> 时间：2013-04-25T17:47:02.743
> 
> 标签：c++, sorting, qsort

我正在开发一个程序，该程序获取用户输入的单词列表，忽略大小写（大写和小写），然后使用函数 qsort 对它们进行排序。我在使用 qsort 时遇到问题，因为我不知道将什么作为第三项 qsort(array, sizeOfArray, ??, funcCompare) 传递。有人可以指出我正确的方向吗？

```
using namespace std;

int compare(const void* , const void*);

const int SIZE = 100;
void main()
{

int i = 0;
int s = 0;
size_t size = 0;
string words;
string list[SIZE];
for (i = 0; i < SIZE; i++)
{
    cout << "Please enter a word. Press ^Z to quit: " << endl;
    cin >> words;
    transform(words.begin(), words.end(), words.begin(), ::tolower);
    if (words.length() > size)
    {
        size = words.length();
    }
    list[i] = words;
    if (cin.eof())
    {
        s = i;
        break;
    }
}
qsort(list, s, ?? , compare);
for (int j = 0; j < i; j++)
    {
        cout << list[j] << endl;
    }   
}

int compare(const void* p1, const void *p2)
{
char char1, char2;

 char1 = *(char *)p1;  // cast from pointer to void
 char2 = *(char *)p2;  // to pointer to int

 if(char1 < char2)
     return -1;
 else
 if (char1 == char2)
    return 0;
 else
    return 1;
 } 
```

qsort 中有问题的位置有'??' 感谢您提供的任何帮助！

**这是一个任务**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:51:15.543

从技术上讲，您需要通过`sizeof(string)`
但 std::string 不是普通类型，因此您不能用于`qsort`对字符串数组进行排序。

# 25.5 C 库算法

> 4 函数签名：
> qsort(void *, size_t, size_t, int (*)(const void *, const void *));
> 替换为两个声明：
> extern "C" void qsort(void* base, size_t nmemb, size_t size, int ( *compar)(const void* , const void*));
> extern "C++" void qsort(void* base, size_t nmemb, size_t size, int ( *compar)(const void* , const void*));
> 两者都具有与原始声明相同的行为。除非 base 指向的数组中的对象是**普通类型**，否则该行为是未定义的。

如果你使用 C++ 和 std::string，你也应该使用 std::vector 代替普通数组和 std::sort 代替 qsort。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T17:48:52.907

您需要传递数组中每个元素的大小（以字节为单位）。

这是通过以下方式完成的：`sizeof(string)`

```
qsort(list, s, sizeof(string), compare); 
```

编辑：查看 alexrider 的帖子以获取更多信息

* * *

不久前我为 BRL-CAD 编写了一个 qsort 字符串比较函数，这里是使用的比较函数（记住用 C 编写，可以优化）。

```
 * Sort function called by quick sort to sort data according
 * to its second field in the string
 */
int
sort(const void* a, const void* b)
{
    char *ia = *(char**)a;
    char *ib = *(char**)b;

    char Str[MAX_RESULT_LEN];
    char Str2[MAX_RESULT_LEN];

    //get string into array
    GetStr(ia, Str);
    GetStr(ib, Str2);

    int n1 = atoi(Str);
    int n2 = atoi(Str2);
    return (n2 - n1);
} 
```

# jquery - POST 到 Web API OData，收到的实体为空

> ID：16221365
> 
> 赞同：2
> 
> 时间：2013-04-25T17:47:11.843
> 
> 标签：jquery, post, asp.net-web-api, odata

我正在尝试使用 OData 将数据发送到 Web API。但是接收到的实体总是空的。

我有这个使用 JQuery 的电话：

```
 $.ajax({
            url: "/odata/Products",
            type: "POST",
            //contentType: "application/json;odata=verbose",
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify(productToAdd),
            dataType: "json",
            success: function () {
                alert("Server call has been OK!!");
            },
            error: function () {
                alert("Server call has been failed!!");
            }
        }); 
```

productToAdd 对象如下：

{"name":"Apple","description":"Good!!","price":"12.3","category":"Fruit"}

我的控制器是：

```
public class ProductsController : EntitySetController<Product, string>
{
    private IProductService _prodSvc;

    public ProductsController(IProductService prodSvc)
    {
        _prodSvc = prodSvc;
    }

    [Queryable]
    public override IQueryable<Product> Get()
    {
        return _prodSvc.GetAllProducts();
    }

    protected override Product CreateEntity(Product product)
    {
       var addedProduct = _prodSvc.AddProduct(product);
       return addedProduct;
    }
} 
```

我也尝试使用 datajs-1.10.js 框架，但我得到了相同的结果。

```
 OData.request(
          {
              requestUri: "/odata/Products",
              method: "POST",
              data: productToAdd
          },
          function (data) {
              alert("Server call has been OK!!");
          }
        ); 
```

我认为反序列化 JSON 对象时出了点问题，但我不知道是什么。你可以帮帮我吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-26T08:26:29.620

由于某种原因，看起来 web api 的模型绑定器的行为方式与我们对 mvc 中的模型绑定所期望的方式不同，但是这里的上下文略有不同，表单发布与 JSON 不太一样对象有效载荷...

例如：如果我在 C# 中定义以下类...

```
class Foo 
{
    public int Id { get; set; }
    public string Bar { get; set; }
} 
```

...然后给出...的方法签名

```
public void SomeMethod(Foo data) { ... } 
```

...在 MVC 中，我可以发布任何任意的数据块，并且至少与某些属性匹配的任何内容都会被绑定。Web API 会发生这种情况，但前提是您发布了“application/x-www-form-urlencoded”的内容类型并且我对我的数据进行了字符串化。

但是，如果您想发布正确的 JSON，则必须明确且正确，并且如果您少提供 1 个属性或额外的属性，它将失败并出现一个非常模糊的模型状态验证错误，并且只会说“发布的数据验证失败”之类的内容，没有帮助。

您应该能够通过在控制器的第一行放置一个断点然后在 Modelstate 中检查该值来看到这一点。没有例外，只是验证失败并且参数为空。

然而，数据应该仍然存在，并且没有什么能阻止您使用 2 或 3 行代码自己从请求流中手动解析它。在这种情况下，我将建议您确认您的 json 与您的 DTO 完全匹配。

鉴于是这种情况，那么这应该可以工作...

```
$.ajax({
    type: method,
    url: url,
    data: someObject,
    dataType: 'json',
    beforeSend: function (xhr) {
        xhr.setRequestHeader("Content-Type", "application/json;odata=minimalmetadata");
        xhr.setRequestHeader("Accept", "application/json;odata=minimalmetadata");
        xhr.setRequestHeader("Accept-Charset", "UTF-8");
        // add say auth headers here for secure endpoints
    },
    success: function (newObj) {
        // job done
    },
    error: function (e) {
        // nope, examine what server said
    }
}); 
```

# javascript - 三 JS 手动编辑几何后无视觉更新

> ID：16221366
> 
> 赞同：7
> 
> 时间：2013-04-25T17:47:12.293
> 
> 标签：javascript, three.js, webgl

所以我有一个几何（这段代码的范围是 THREE.Geometry.prototype），我正在动态编辑。newData 是 { faces: [array of face Indexes], vertices: [array of vertice index]} 的对象。（这些数组保持原点面的长度和顶点数组的长度并保持形式 [null, null, null, "4", "5", null, null... ]）

使用这些数组，我剥离所有面和顶点并将它们应用到 2 个新数组中的 1 个，有效地将所有数据分成 2 组。我还更新了脸上的指针！

最后我知道我已经更新了几何并且它是正确的，但是我所做的更改没有显示出来。我试过 .elementsNeedUpdate 导致错误。（在 InitWebGlObjects 中没有未定义的属性“a”...我看了看，看不到对 a 的引用）

我试过顶点需要更新，它什么也没做。

我还尝试将 updateCentroids 与之前的工具结合使用。它什么也不做。

我听说无法调整缓冲区的大小。缓冲区和缓冲区的长度是多少？我给模型的verticies数量？

我已经看到“您可以通过预先分配更大的缓冲区然后保持不需要的顶点折叠/隐藏来模拟调整大小。” 听起来这可能是我在做什么？如何折叠/隐藏顶点？我没有看到任何参考。

谢谢你的时间！

```
 var oldVertices = this.vertices
        var oldFaces = this.faces;

        var newVertices = []
        var newFaces = [];

        var verticeChanges = [];

        this.vertices = [];
        this.faces = [];        

        for(var i in oldVertices){
            var curAr = ((newData.vertices[i]) ? (newVertices):(this.vertices));
            curAr.push(oldVertices[i]);
            verticeChanges[i] = curAr.length-1;
        }

        for(var i in oldFaces){
            var curAr = ((newData.faces[i]) ? (newFaces):(this.faces));
            oldFaces[i].a = verticeChanges[oldFaces[i].a];
            oldFaces[i].b = verticeChanges[oldFaces[i].b];
            oldFaces[i].c = verticeChanges[oldFaces[i].c];
        }
        console.log('Vertices Cut from', oldVertices.length, "to:", newVertices.length, 'and', this.vertices.length);
        console.log('Faces Cut from', oldFaces.length, "to:", newFaces.length,  'and', this.faces.length); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-15T20:53:16.983

我最近自己遇到了这个问题。我发现如果我要向几何体添加顶点和面，我需要设置`this.groupsNeedUpdate = true`以告诉渲染器更新它的内部缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T10:54:35.913

也许从[本](http://www.aerotwist.com/tutorials/getting-started-with-three-js/)教程连接到这一点：

> “我只是想快速指出 Three.js 的一个小问题，例如，如果您修改网格的顶点，您会在渲染循环中注意到没有任何变化。为什么？因为 Three.js （据我所知）将网格的数据缓存为某种优化。您实际需要做的是向 Three.js 标记某些已更改的内容，以便它可以重新计算所需的任何内容。您可以使用以下：
> 
> // 将几何设置为动态，以便允许更新
> 
> sphere.geometry.dynamic = true;
> 
> //改变顶点
> 
> sphere.geometry.__dirtyVertices = true;
> 
> // 更改为法线
> 
> sphere.geometry.__dirtyNormals = true;"

# python - 在 python 2.6 中创建字典字典

> ID：16221368
> 
> 赞同：1
> 
> 时间：2013-04-25T17:47:13.947
> 
> 标签：python, python-2.7, list-comprehension, python-2.6

我在 python2.7 中有一行代码生成一个空字典字典：

```
values=[0,1,2,4,5,8] 
value_dicts={x:{} for x in values} 
```

在 python2.6 上运行时会引发语法错误。

我可以使用 for 循环做同样的事情：

```
values_dicts={}
values=[0,1,2,4,5,8]
for value in values :
values_dicts[value]={}
values_dicts
Out[25]: {0: {}, 1: {}, 2: {}, 4: {}, 5: {}, 8: {}} 
```

但这似乎很愚蠢。为什么列表理解（在第一个块中）在 python2.6 中不起作用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T17:48:04.513

您可以使用`dict()`构造函数：

```
value_dicts = dict((x, {}) for x in values) 
```

这使用构造`(key, value)`元组的生成器表达式，构造`dict()`函数很乐意为您将其变成字典。

演示：

```
>>> values=[0,1,2,4,5,8] 
>>> dict((x, {}) for x in values)
{0: {}, 1: {}, 2: {}, 4: {}, 5: {}, 8: {}} 
```

您使用的语法（字典理解）直到 Python 2.7 和 Python 3 才引入，请参阅[PEP 274](http://www.python.org/dev/peps/pep-0274/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:50:03.517

根据您的预期用途，您也可以只使用 defaultdict 代替。

```
from collections import defaultdict
value_dicts = defaultdict(lambda: defaultdict(int)) 
```

# php - 使用 PHP 从字符串中获取哈希标记的单词

> ID：16221371
> 
> 赞同：0
> 
> 时间：2013-04-25T17:47:24.530
> 
> 标签：php

我正在尝试在给定字符串中创建一个包含所有哈希标签的数组，然后遍历它们并回显每个标签以显示它们已被存储。我可能做错了什么？

```
<?php

    $string= "Went for an awesome bike ride today! #biking";

    preg_match_all('/#(\w+)/',$string, $matches);

        foreach ($matches as $tag) {

            echo $tag;

        }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:48:16.713

```
 foreach ($matches[1] as $tag) {
        echo $tag;
    } 
```

只输出你的比赛。

`$matches`是一个数组，其条目数与正则表达式中的括号数加一。

另见：http: [//3v4l.org/MJCWE](http://3v4l.org/MJCWE)

# c# - 比较两个未知类型的对象

> ID：16221372
> 
> 赞同：0
> 
> 时间：2013-04-25T17:47:25.193
> 
> 标签：c#, reflection, equals

这是情况。我有两个未知类型的对象，我想比较它们是否与另一个相同。两者都可以是字符串、整数、可枚举或您可以想象的任何自定义类。有没有办法使用反射来实现这一点？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:55:23.203

使用`Object.ReferenceEquals`和`GetType`

从 MSDN 中提取的示例：

```
int n1 = 12;
int n2 = 82;
long n3 = 12;

Console.WriteLine("n1 and n2 are the same type: {0}",
                  Object.ReferenceEquals(n1.GetType(), n2.GetType()));
Console.WriteLine("n1 and n3 are the same type: {0}",
                  Object.ReferenceEquals(n1.GetType(), n3.GetType()));
// The example displays the following output: 
//       n1 and n2 are the same type: True 
//       n1 and n3 are the same type: False 
```

来源：http: [//msdn.microsoft.com/en-us/library/system.object.gettype.aspx](http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx)

不过，我可能误解了。这将仅检查它们是否为相同类型，具有不同引用的相同类型的两个对象仍将评估为`true`使用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:49:10.920

`Equals`在一般情况下，您使用来自对象的方法。

```
object first = GetFirst();
object second = GetSecond();

bool areEqual = object.Equals(first, second); 
```

编写需要比较编译时未知类型的特定函数（通常是泛型函数）时，另一个选择是`IEqualityComparer`接受`Equals`一个或您类型的用户，如果它是针对整个班级的）可以提供他们自己的实现。一个很好的例子是诸如`string.Contains`. 有一个可选的重载接受一个`IEqualityComparer<char>`允许调用者定义两个字符相等的含义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:52:42.783

如果您的课程覆盖`Equals`，请使用 Servy 的方法。否则，您可以使用[CompareNetObjects](http://comparenetobjects.codeplex.com)库（在 nuget 上可用）。

[这](https://stackoverflow.com/a/844855/1009661)是一个通过公共属性比较两个对象的示例。

# sql - 枢轴箱什么时候？

> ID：16221373
> 
> 赞同：0
> 
> 时间：2013-04-25T17:47:25.293
> 
> 标签：sql, sql-server-2008, pivot

我有以下数据表：

```
id displayName stringValue dateValue
59FAA56C-4C0C-456E-BA68-AC63250D6281 用户 SID SID-122 NULL
EBD6F18D-3CD3-4134-8FFB-7620D3EA93DF 用户 SID SID2 NULL
59FAA56C-4C0C-456E-BA68-AC63250D6281 用户名 我的用户 NULL
EBD6F18D-3CD3-4134-8FFB-7620D3EA93DF 用户名 用户 2 NULL
59FAA56C-4C0C-456E-BA68-AC63250D6281 上次登录 NULL 2012-01-01
EBD6F18D-3CD3-4134-8FFB-7620D3EA93DF 上次登录 NULL 2012-01-10

```

我想变成：

```
id [用户 SID] [用户名] [上次登录]
59FAA56C-4C0C-456E-BA68-AC63250D6281 SID-122 我的用户 2012-01-01
EBD6F18D-3CD3-4134-8FFB-7620D3EA93DF SID2 用户 2 2012-01-10

```

我可以通过使用以下支点来部分工作：

```
SELECT id, [User SID], [User Name], [Last Login] from 
            (
                select id
                    , stringValue
                    , displayName
                from #TestTable
           ) x
            pivot 
            (
                 MAX(stringValue)
                for displayName in ([User SID], [User Name], [Last Login])
            ) p 
```

除了 lastLogin 被填充为 NULL （这是有道理的，因为它不包含在任何地方的 MAX 中）。

现在，我试图将枢轴更改为：

```
 pivot 
            (
                 MAX(ISNULL(stringValue,dateValue))
                for displayName in ([User SID], [User Name], [Last Login])
            ) p 
```

并且：

```
 pivot 
            (
                 MAX(CASE WHEN stringValue IS NULL THEN dateValue ELSE stringValue END)
                for displayName in ([User SID], [User Name], [Last Login])
            ) p 
```

但这些都不是有效的sql。关于如何让它正常工作的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T18:31:35.663

你需要使用`PIVOT`吗？，因为一个简单的方法是使用`CASE`表达式：

```
SELECT  id,
        MIN(CASE WHEN displayName = 'User SID' THEN stringValue END) [User SID],
        MIN(CASE WHEN displayName = 'User Name' THEN stringValue END) [User Name],
        MIN(CASE WHEN displayName = 'Last Login' THEN dateValue END) [Last Login]
FROM YourTable
GROUP BY id 
```

结果如下：

```
╔══════════════════════════════════════╦══════════╦═══════════╦════════════╗
║                  ID                  ║ USER SID ║ USER NAME ║ LAST LOGIN ║
╠══════════════════════════════════════╬══════════╬═══════════╬════════════╣
║ EBD6F18D-3CD3-4134-8FFB-7620D3EA93DF ║ SID2     ║ User 2    ║ 2012-01-10 ║
║ 59FAA56C-4C0C-456E-BA68-AC63250D6281 ║ SID-122  ║ My User   ║ 2012-01-01 ║
╚══════════════════════════════════════╩══════════╩═══════════╩════════════╝ 
```

[**这是一个**](http://sqlfiddle.com/#!3/f9633/1)带有演示的 sqlfiddle 供您尝试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T23:18:38.383

您可以通过取消透视然后旋转数据来获取值。unpivot 过程会将`stringValue`and`dateValue`列转换为多行，然后您可以 PIVOT`displayname`列值：

```
select id, [User SID], [User Name], [Last Login]
from
(
  select t.id,
    t.displayname,
    c.value
  from yourtable t
  cross apply
  (
    values
      ('stringvalue', stringvalue),
      ('datevalue', convert(varchar(10), datevalue, 120))
  ) c (col, value)
) src
pivot
(
  max(value)
  for displayname in ([User SID], [User Name], [Last Login])
) piv; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/f9633/5)。

结果是：

```
|                                   ID | USER SID | USER NAME | LAST LOGIN |
----------------------------------------------------------------------------
| EBD6F18D-3CD3-4134-8FFB-7620D3EA93DF |     SID2 |    User 2 | 2012-01-10 |
| 59FAA56C-4C0C-456E-BA68-AC63250D6281 |  SID-122 |   My User | 2012-01-01 | 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T21:49:00.730

从您的数据来看，除非您还进行了一些我们没有见过的计算，否则您甚至不需要使用聚合函数，更不用说 PIVOT。

我会做这样的事情：

```
 WITH UserSID
 AS (
    SELECT ID
        ,  [User SID] = stringValue
    FROM   [your table]
    WHERE  displayName = 'User SID'
 )
 ,  UserName
 AS (
    SELECT ID
       ,   [User Name] = stringValue
    FROM   [your table]
    WHERE  displayName = 'User name'
 )
 ,  LastLogin
 AS (
    SELECT ID
       ,   [Last Login] = dateValue
    FROM   [your table]
    WHERE  displayName = 'Last Login'
)
SELECT  us.ID
   ,    us.[User SID]  
   ,    un.[User Name]
   ,    ll.[Last Login]
FROM    UserSID us
    JOIN UserName un
       ON us.ID = un.ID
    JOIN LastLogin ll
       ON us.ID = ll.ID
ORDER BY
       us.ID 
```

# javascript - 将数组最后一个元素的逗号标记为 JavaScript/Eclipse 的错误

> ID：16221374
> 
> 赞同：0
> 
> 时间：2013-04-25T17:47:30.620
> 
> 标签：javascript, eclipse

我有一个必须与旧版本 IE 兼容的 Javascript 项目，并且我使用 Eclipse Juno 作为我的 IDE。

旧版本的 IE 无法处理数组最后一个元素后的逗号，即使这是正确的 ECMAScript：

```
[a,b,c,] 
```

不幸的是，尽管这是正确的语法，但它仅在 IE 中破坏了我的应用程序，并且仅在生产中（强制向后兼容），并且以一种非常难以调试的方式（它不会在错误行附近的任何地方失败） ）。

有没有办法设置 Eclipse 将其标记为语法验证器的错误？我没有在 Preferences -> JavaScript -> Validator -> Errors/Warnings 下看到这个选项

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T18:03:54.190

我强烈建议[**为 eclipse 安装 jshint**](http://github.eclipsesource.com/jshint-eclipse/install.html)，它将分析您的代码，并提供有关您的代码的有见地的报告（包括您报告的问题）

如果您不确定，[请尝试 jshint](http://www.jshint.com/)。粘贴您的代码，按 lint，然后获取结果。

**例子**

对于代码：

```
var arr = [1,2,3,]; 
```

你得到：

```
Line 1: var arr = [1,2,3,];

Extra comma. (it breaks older versions of IE) 
```

# python - for循环python中的“重置”变量

> ID：16221380
> 
> 赞同：0
> 
> 时间：2013-04-25T17:47:49.320
> 
> 标签：python, arrays, loops, for-loop

我想从 python 中的数组中减去一个数字，但我想保留原始数组。

这是我的代码：

```
for X0 in [X0 * 0.01 for X0 in range(-2,2)]:
    for Y0 in [Y0 * 0.01 for Y0 in range(6,10)]:
        RAm = RA
        Decm = Dec
        RAm[:] = [x - X0 for x in RAm]
        Decm[:] = [x - Y0 for x in Decm]
        RAs = np.sum(RAm)
        Decs = np.sum(Decm)
        #a = np.sqrt(((RAs**2*Decs**2)**2 - RAs**4*Decs**4)/(RAs**2*Decs**2*Decs**2 -Decs**2*RAs**4))
        #b = np.sqrt(((RAs**2*Decs**2)**2 - RAs**4*Decs**4)/(RAs**2*Decs**2*RAs**2 - RAs**2*Decs**4))
        print RA
        print RAm 
```

这让我知道 RA 正在发生变化，即使它应该保持不变，因为我想在每个循环中从 RA 中减去一个不同的数字。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:01:17.020

如果您仍然在使用 NumPy，您可以利用它同时支持对所有元素的操作这一事实。

```
RAm = np.array(RA) - X0
Decm = np.array(Dec) - Y0 
```

或者甚至跳过这些作业，如果您没有将结果用于除总和之外的任何内容：

```
RAs = np.sum(np.array(RA) - X0)
Decs = np.sum(np.array(Dec) - Y0) 
```

我的印象是你是一个（Python）初学者，所以也许坚持使用基本的 Python，直到你觉得舒服为止。当然，所有这些都可以在没有 NumPy 的情况下完成：

```
RAs = sum(x - X0 for x in RA)
Decs = sum(y - Y0 for y in Dec) 
```

但是，如果您确实想使用 NumPy，请正确使用它。这意味着：使用矩阵计算而不是循环。例如，您可以执行以下操作* 来获得`array`不同`Y0`值的总和：

```
Y0_values = np.array([Y0 * 0.01 for Y0 in range(6,10)])
y_matrix = np.tile(RA, [len(Y0_values), 1])
Y0_matrix = np.tile(Y0_values[np.newaxis].T, [1, len(RA)])
sums = np.sum(y_matrix - Y0_matrix, axis=1) 
```

*仅用于演示目的。我远不是 NumPy 专家，所以可能有更好的方法来做到这一点。出于同样的原因，我不会解释它是如何工作的。我只是鼓励你更多地了解 NumPy，这对你有利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:51:40.350

而不是遍历列表并对其进行更改，请执行以下操作：

```
for element in list(your_list_here):
    if element.something():
        your_list_here.remove(element) 
```

另外..分配`Ram=Ra`意味着对对象的每个方法调用，实际上是指同一个对象。`Ram = list(Ra)`如果您想安全，请使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T17:55:35.743

`RAm = RA`为;创建`RAm`别名 修改列表。`RA``RAm[:] = ...`

相反，只做

```
RAm = [x - X0 for x in RA] 
```

# django - 删除使用easy-thumbnails Django App生成的所有缩略图

> ID：16221381
> 
> 赞同：8
> 
> 时间：2013-04-25T17:47:50.733
> 
> 标签：django, thumbnails, easy-thumbnails

我在我的 Django 1.5 项目中使用[简单的缩略图](https://github.com/SmileyChris/easy-thumbnails)来生成缩略图。

我一直在使用几种不同大小的缩略图进行测试，但现在我想从我的文件系统和 easy-thumbnails 数据库条目中清除所有缩略图。随着时间的推移，我创建了许多不同大小的图像，现在我想删除它们。

我的意图是从一张白纸开始，并删除所有缩略图。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-27T01:06:04.087

刚遇到同样的问题。

鉴于：

```
class MyModel(Model):
    image = ThumbnailerImageField() 
```

您可以使用以下方法删除所有缩略图：

```
for m in MyModel.objects.all():
    m.image.delete_thumbnails() 
```

如果您有：

```
class MyModel(Model):
    image = ImageField() 
```

然后你应该使用：

```
from easy_thumbnails.files import get_thumbnailer

for m in MyModel.objects.all():
    thumbnailer = get_thumbnailer(m.image)
    thumbnailer.delete_thumbnails() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-05T22:46:40.090

我创建了一个 Picture 模型，在其中添加了一个方法，如下所示

```
from easy_thumbnails.models import Source, Thumbnail
def clean_thumbnail(self):
    if self.image:
        sources = Source.objects.filter(name=self.image.name)
        if sources.exists():
            for thumb in Thumbnail.objects.filter(source=sources[0]):
                try:
                    os.remove(os.path.join(settings.MEDIA_ROOT, thumb.name))
                    thumb.delete()
                except Exception, e:
                    logger.warning(e) 
```

它就像一个魅力。

# java - 停止线程 onclicklistener java

> ID：16221382
> 
> 赞同：1
> 
> 时间：2013-04-25T17:47:56.903
> 
> 标签：java, multithreading

如何正确停止或中断我的多个服务器的线程？这是我的主程序的一部分，在这里我正在启动我的多个服务器，但我想实现停止按钮，导致我的程序在我中断它时总是卡住。我可以在这里做主要部分吗？我应该使用哪个功能？

```
button.setOnClickListener(new View.OnClickListener() {
        //OnClickListener oclbutton=new OnClickListener(){

            @Override
            public void onClick(View v) {

                tvOut.setText("Server Started");
                Thread thread=new Thread (new MyServer());
                thread.start();
            }
        });

        //button.setOnClickListener(oclbutton);
    //}

        buttonStop.setOnClickListener(new View.OnClickListener() {
           @Override
           public void onClick(View v) {

              //stop server

           }
         }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:02:33.067

First, you have to declare your thread variable outside `onClick` to be able to access it from the second listener:

`final Thread thread=new Thread (new MyServer());`

Please pay attention on `final` modifier: you are using this variable in anonymous inner classes that can access only final variables of outer method.

Now your first `onClick()` will just start the thread.

```
 public void onClick(View v) {
            tvOut.setText("Server Started");
            thread.start();
        } 
```

Now, how to stop the thread?

You can call `thread.stop()`. But its method is deprecated for various reasons that beyond of this discussion. You can find reasons in internet.

So, how to stop the thread? It depends on what is it doing. You can either check `isInterrupted()` into thread and in this case call `thread.interrupt()` from your second listener. Other way is to use boolean flag and `wait() - notify()` pair.

There are a lot of tutorials about threads. Read some of them. If something is still unclear come here again and ask more concrete questions. Good luck and enjoy.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:07:15.207

停止线程的一个好方法是使用标志正确退出 run() 方法：[请参阅此答案](https://stackoverflow.com/questions/10961714/how-to-properly-stop-the-thread-in-java)

如果 myServer 正在等待 Thread.sleep() 您可以调用 myServer.interrupt() 来取消睡眠。
如果 myServer 在 I/O 上阻塞，那就有点复杂了：[看看这个](https://stackoverflow.com/questions/4182491/how-to-stop-a-thread-waiting-in-a-blocking-read-operation-in-java?rq=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:03:12.083

如果您想从不同的块访问线程，您应该将其声明为所有方法或类都可以访问的字段或最终变量，而不是在内部匿名类上，像这样

```
public void yourMethod() {
    final Thread yourThread = null; 

    button.setOnClickListener(new View.OnClickListener() {
    //OnClickListener oclbutton=new OnClickListener(){

        @Override
        public void onClick(View v) {
            tvOut.setText("Server Started");
            yourThread=new Thread (new MyServer());
            thread.start();
        }
    });

    buttonStop.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            //stop server
            yourThread.stop();
        }
    });
} 
```

现在，请注意 Thread.stop() 方法已被弃用，因此您可以在 MyServer 类上执行以下操作，而不是进行该调用：

```
public class MyServer implements Runnable {

    private boolean stopExecution = false;

    public void setStopExecution(boolean stopExecution) {
        this.stopExecution = stopExecution;
    }

    public void run() {
        // as it is a server I assume you're doing a never ending loop
        // now just make use of the control variable
        while (!stopExecution) {
            // do your stuff here...
        }
    }
} 
```

在你的代码上你要做的是：

public void yourMethod() { MyServer server = new MyServer();

```
 button.setOnClickListener(new View.OnClickListener() {
    //OnClickListener oclbutton=new OnClickListener(){

        @Override
        public void onClick(View v) {
            tvOut.setText("Server Started");
            Thread yourThread=new Thread (server);
            thread.start();
        }
    });

    buttonStop.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            //stop server
            server.setStopExecution(true);
        }
    });
} 
```

最后一种方法是避免显示器问题的正确方法。还可以查看 Executor 类来管理您的线程。

# matlab - 如何实现 LIBSVM Matlab 接口？

> ID：16221386
> 
> 赞同：1
> 
> 时间：2013-04-25T17:48:34.667
> 
> 标签：matlab, libsvm

我在将 LibSVM 实现到 MATLAB 时遇到问题。我将 LibSVM 包 libsvm-3.14 下载到我的 Windows 7 PC 并尝试实现它，但我收到此消息：“在这台计算机上找不到支持的 SDK 或编译器。有关支持的编译器列表，请参阅 [http://www .mathworks.com/support/compilers/R2011a/win64.html](http://www.mathworks.com/support/compilers/R2011a/win64.html)

如果 make.m 失败，请查看 README 中的详细说明。”

即使从这个网站下载文件夹后问题仍未解决：[http](http://www.csie.ntu.edu.tw/~cjlin/libsvm/#matlab) ://www.csie.ntu.edu.tw/~cjlin/libsvm/#matlab还有其他网站可以下载吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T01:09:46.067

我正在使用您提到的站点上的 libsvm - 没问题。

听起来您没有安装 Windows SDK。您可以从[http://www.mathworks.com.au/support/compilers/R2011a/win64.html的链接安装它](http://www.mathworks.com.au/support/compilers/R2011a/win64.html)

另一种可能性是您没有 mex 设置。您可以使用 mex.getCompilerConfigurations() 检查 如果未运行：mex -setup 您可能还需要安装 c++ 编译器 - 上面有一个链接可以获取 VC2010 表示的网页。

# asp.net-mvc-3 - 页面加载两次，因此我的模型是空的

> ID：16221392
> 
> 赞同：1
> 
> 时间：2013-04-25T17:48:54.237
> 
> 标签：asp.net-mvc-3, entity-framework, razor

我一直在问很多关于从数据库创建路线和创建新页面等等的问题，我有以下模型、控件和下面的视图：

**模型**

```
namespace LocApp.Models
{
    public class ContentManagement
    {
        public int id { get; set; }
        [Required]
        public string title { get; set; }
        public string content { get; set; }
    }
} 
```

**控制器**

```
 public ViewResult Index(string title)
    {
        using (var db = new LocAppContext())
        {
            var content = (from c in db.Contents
                           where c.title == title
                           select c).ToList();

            return View(content);

        }
    } 
```

**查看（部分）**

```
@model IEnumerable<LocApp.Models.ContentManagement>

@{
    foreach (var item in Model)
    {
       <h2>@item.title</h2>
        <p>@item.content</p> 
    }
} 
```

*查看（完整）- 请注意，此代码调用 _Content 部分*

```
@model IEnumerable<LocApp.Models.ContentManagement>

@{
    ViewBag.Title = "Index";
}

@{
    if(HttpContext.Current.User.Identity.IsAuthenticated)
    {
        <h2>Content Manager</h2>

        Html.Partial("_ContentManager");
    }
    else
    {
        Html.Partial("_Content");
    }
} 
```

当您访问 site.com/bla 时，模型已被处理并包含信息，但随后它“神奇地”重新加载，我打破了控制器和视图的指向以观察这种情况的发生。第二次模型为空，因此页面上不显示任何内容。

我的路线如下：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.IgnoreRoute("favicon.ico");

        routes.MapRoute(
            "ContentManagement",
            "{title}",
            new { controller = "ContentManagement", action = "Index", title = UrlParameter.Optional }
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    } 
```

**更新**

看起来问题很简单：索引正在获取标题，循环并获取内容，然后将其传递给应有的查看方式。但是在页面加载完成之前，它会再次循环，这次将 null 作为标题传递，从而加载一个空页面。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-25T18:57:24.447

我看到的最大问题是您实际上并没有将模型传递给局部视图

```
@model IEnumerable<LocApp.Models.ContentManagement>

@{
    ViewBag.Title = "Index";
}

@{
    if(HttpContext.Current.User.Identity.IsAuthenticated)
    {
        <h2>Content Manager</h2>

        Html.Partial("_ContentManager", Model);
    }
    else
    {
        Html.Partial("_Content", Model);
    }
} 
```

# c# - 如何在 c# wpf 的 webbrowser 控件中从动态创建的网页中引用 css 样式表？

> ID：16221393
> 
> 赞同：3
> 
> 时间：2013-04-25T17:48:56.623
> 
> 标签：c#, css, wpf, hyperlink, browser

我动态地创建一个网页并使用 Webbrowser 控件的 NavigateToString 方法显示它。我想引用这样的样式表：

```
<link rel=stylesheet type="text/css" href="style.css"> 
```

我将 style.css 放在应用程序 workdir 中。但它不起作用。当我将创建的网站保存到 html 文件时，将 style.css 放在它旁边并在浏览器中打开它，它会正确显示。

我怎样才能引用这样的静态文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:44:11.910

你可以这样做：

在导航到 html 字符串之前更改它的 Css 地址

```
string html = System.IO.File.ReadAllText(@"Your html file").Replace("BaseAdress", @"location of css file"); 
```

## 例子：

**html文件：**

```
<html>
<head>
<link rel=stylesheet type="text/css" href="BaseAdress\style.css">
</head>
<body>
<p>hi</p>
</body>
</html> 
```

**客服代码：**

```
string html = System.IO.File.ReadAllText(@"E:\1.html").Replace("BaseAdress",@"E:\");
webBrowser1.NavigateToSting(html); 
```

# c - 参考编译器设计

> ID：16221396
> 
> 赞同：1
> 
> 时间：2013-04-25T17:49:07.427
> 
> 标签：c, compiler-construction

什么是最好的书，可以作为编译器设计的参考我对编译器有一些了解，我曾经设计过自己的一个。但我需要一个参考，因为我将成为 C 语言编译器课程（实践、项目）的老师。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T17:55:33.220

编译器原理、技术和工具 作者：AV Aho、Ravi Sethi 和 JDUllman - Pearson Education。首先参考旧版本，然后跳到新版本

这是最好的，必须阅读编译器的书

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T17:57:04.350

编译器：据我所知最好的原理、技术和工具

# qt - Qt 无法将 'const wchar_t*' 转换为 'TCHAR*'

> ID：16221398
> 
> 赞同：0
> 
> 时间：2013-04-25T17:49:10.490
> 
> 标签：qt, wchar-t, tchar

我将项目从 Visual Studio 转移到 QT，当项目构建时显示错误。如何在不对代码进行重大更改的情况下修复它们？

```
cannot convert 'const wchar_t*' to 'TCHAR*'
cannot convert '_TCHAR*' to 'const wchar_t*'
cannot convert 'const wchar_t [15]' to 'TCHAR*'
cannot convert 'TCHAR*' to 'const wchar_t*'
... 
```

几十个这样的错误。

PS 奇怪的是，谷歌在这个问题上没有任何有用的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:53:34.007

你的新建筑知道`TCHAR*`吗？这是 Windows 特定的“功能”

# java - 适用于 Google App Engine 的视频 Java API

> ID：16221400
> 
> 赞同：2
> 
> 时间：2013-04-25T17:49:26.237
> 
> 标签：java, google-app-engine

GAE 是否有“视频 Java api”，例如“图像 Java API”？我想要的只是将文件上传到 Blobstore 并检索它来播放它（来自 Blobstore 的视频流）。我试图找到一个例子来做到这一点，但我找不到任何例子。

如果您知道任何资源可以做到这一点，我需要帮助。

我搜索堆栈溢出但什么也没有。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:46:01.450

您可以使用 Servlet 直接流式传输视频以提供服务，例如：

```
BlobKey blobKey = new BlobKey("YOUR BLOB KEY");
res.setContentType("video/mp4");
blobstoreService.serve(blobKey, res); 
```

然后使用 video.js 之类的播放器：http://videojs.com/[在](http://videojs.com/)Flash 或 HTML 5 中播放

# windows - .vbs 脚本不会运行批处理/如何静默运行批处理

> ID：16221401
> 
> 赞同：0
> 
> 时间：2013-04-25T17:49:28.070
> 
> 标签：windows, vbscript, batch-file, windows-server-2008, wsh

我有一个要静默运行的批处理文件。所以，我四处寻找并想出了以下代码...... invMybatchfile.vbs

```
Dim curPath
curPath = CreateObject("Scripting.FileSystemObject").GetAbsolutePathName(".")
Set WshShell = CreateObject("WScript.Shell")
cmds=WshShell.RUN(sCurPath & "\Mybatchfile.bat", 0, True) 
```

此代码在我的桌面（Window 7 32 位）上运行，但由于某种原因，此脚本在服务器计算机（Windows Server 2008 R2）上不起作用。当我单击 invMybatchfile.vbs 时，dos 窗口会弹出并立即关闭，并且根本不执行 Mybatchfile.bat。（如果我只是在服务器计算机上运行 Mybathfile.bat，它工作正常，所以批处理文件不是这里的问题。）

所以我的问题是，有人知道我为什么会遇到这个问题吗？

或者

有没有其他方法可以在不使用 .vbs 文件或安装其他软件的情况下静默启动批处理文件（不是最小化，我知道这种方式）？

谢谢你的帮助JB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:54:22.380

您的示例代码永远不会在任何机器上运行，因为您将变量名称声明为“curPath”并将 vlaue 分配给“CurPath”，但您试图将其与名称“sCurPath”一起使用（并且该变量没有存在于您的代码中）。

此外，您不需要设置当前工作目录，因为当您启动文件时，shell 会在工作目录中搜索文件，所以这就是您需要的所有代码，只需一行：

```
CreateObject("WScript.Shell").RUN "Mybatchfile.bat", 0, True 
```

但是，如果您出于任何奇怪的原因有兴趣存储或使用当前工作目录，那么您有一个返回当前目录的方法：

`.CurrentDirectory`

然后你可以这样使用该方法：

```
Set Shell = CreateObject("WScript.Shell")
Shell.RUN Shell.CurrentDirectory & "\Mybatchfile.bat", 0, True 
```

...或者以这种方式将当前目录存储在 var 中：

```
Set Shell  = CreateObject("WScript.Shell")
CurDir = Shell.CurrentDirectory & "\"
Shell.RUN CurDir & "Mybatchfile.bat", 0, True 
```

**MSDN**：http: [//msdn.microsoft.com/en-us/library/3cc5edzd%28v=vs.84%29.aspx](http://msdn.microsoft.com/en-us/library/3cc5edzd%28v=vs.84%29.aspx)

**编辑：**

关于运行静默文件，您也可以使用**NirCMD**命令行应用程序来完成。

```
NirCMD exec hide "Path to Batch File\Batch File.bat" 
```

**官方网站**：[http ://www.nirsoft.net/utils/nircmd2.html](http://www.nirsoft.net/utils/nircmd2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T18:58:30.227

我认为您需要通过 cmd.exe 运行它：

```
WshShell.Run("%COMSPEC% /c " & CurPath & "\Mybatchfile.bat", 0, True) 
```

[在此处](https://stackoverflow.com/questions/3559719/wscript-shell-run-doesnt-work-consistently)和[此处](https://stackoverflow.com/questions/9038927/vbscript-hangs-when-launching-batch-file-with-wshell-script-run)查看类似问题以获取更多信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-25T18:05:10.360

您是否尝试过使用 RunAs？

```
 cmds=WshShell.RUN("runas /noprofile /user:mymachine\administrator " _
    & sCurPath & "\Mybatchfile.bat", 0, True) 
```

由于它适用于 Windows 7 但不适用于 Server 2008 R2，这对我来说听起来像是权限问题。

# entity-framework - 使用 .expand .orderby .take 时可能出现 Breeze/EntityFramework 错误

> ID：16221402
> 
> 赞同：0
> 
> 时间：2013-04-25T17:49:41.647
> 
> 标签：entity-framework, breeze

在工作中处理项目时发现了这个问题，但已设法使用 Breeze 的 DocCode 示例复制它。我正在使用最新的 1.3.0。基本上，当使用“expand”、“orderby”和“take”时，查询会返回错误的记录。该问题可以通过 queryTests.js 中的“按相关类别降序排序的产品”测试来证明：

测试中的查询是：

```
 var query = EntityQuery.from("Products")
        .expand("Category")
        .orderBy("Category.CategoryName desc, ProductName"); 
```

这会导致向 SQL Server 发出以下 SQL：

```
SELECT 
[Extent1].[ProductID] AS [ProductID], 
[Extent1].[ProductName] AS [ProductName], 
[Extent1].[SupplierID] AS [SupplierID], 
[Extent1].[CategoryID] AS [CategoryID], 
[Extent1].[QuantityPerUnit] AS [QuantityPerUnit], 
[Extent1].[UnitPrice] AS [UnitPrice], 
[Extent1].[UnitsInStock] AS [UnitsInStock], 
[Extent1].[UnitsOnOrder] AS [UnitsOnOrder], 
[Extent1].[ReorderLevel] AS [ReorderLevel], 
[Extent1].[Discontinued] AS [Discontinued], 
[Extent2].[CategoryID] AS [CategoryID1], 
[Extent2].[CategoryName] AS [CategoryName], 
[Extent2].[Description] AS [Description], 
[Extent2].[Picture] AS [Picture]
FROM  [dbo].[Products] AS [Extent1]
LEFT OUTER JOIN [dbo].[Categories] AS [Extent2] ON [Extent1].[CategoryID] = [Extent2].[CategoryID]
ORDER BY [Extent2].[CategoryName] DESC, [Extent1].[ProductName] ASC 
```

这很好，并给出了按 CategoryName 排序的正确结果。但是，如果我将查询更改为以下内容：

```
 var query = EntityQuery.from("Products")
        .expand("Category")
        .orderBy("Category.CategoryName desc, ProductName").take(10); 
```

我添加了“.take(10)”。SQL 变为：

```
exec sp_executesql N'SELECT 
[Limit1].[ProductID] AS [ProductID], 
[Limit1].[ProductName] AS [ProductName], 
[Limit1].[SupplierID] AS [SupplierID], 
[Limit1].[CategoryID1] AS [CategoryID], 
[Limit1].[QuantityPerUnit] AS [QuantityPerUnit], 
[Limit1].[UnitPrice] AS [UnitPrice], 
[Limit1].[UnitsInStock] AS [UnitsInStock], 
[Limit1].[UnitsOnOrder] AS [UnitsOnOrder], 
[Limit1].[ReorderLevel] AS [ReorderLevel], 
[Limit1].[Discontinued] AS [Discontinued], 
[Extent3].[CategoryID] AS [CategoryID1], 
[Extent3].[CategoryName] AS [CategoryName], 
[Extent3].[Description] AS [Description], 
[Extent3].[Picture] AS [Picture]
FROM   (SELECT TOP (@p__linq__0) [Extent1].[ProductID] AS [ProductID], [Extent1].[ProductName] AS [ProductName]\, [Extent1].[SupplierID] AS [SupplierID], [Extent1].[CategoryID] AS [CategoryID1], [Extent1].[QuantityPerUnit] AS [QuantityPerUnit], [Extent1].[UnitPrice] AS [UnitPrice], [Extent1].[UnitsInStock] AS [UnitsInStock], [Extent1].[UnitsOnOrder] AS [UnitsOnOrder], [Extent1].[ReorderLevel] AS [ReorderLevel], [Extent1].[Discontinued] AS [Discontinued], [Extent2].[CategoryName] AS [CategoryName]
    FROM  [dbo].[Products] AS [Extent1]
    LEFT OUTER JOIN [dbo].[Categories] AS [Extent2] ON [Extent1].[CategoryID] = [Extent2].[CategoryID]
    ORDER BY [Extent1].[ProductID] ASC ) AS [Limit1]
LEFT OUTER JOIN [dbo].[Categories] AS [Extent3] ON [Limit1].[CategoryID1] = [Extent3].[CategoryID]
ORDER BY [Limit1].[CategoryName] DESC, [Limit1].[ProductName] ASC',N'@p__linq__0 int',@p__linq__0=10 
```

这是错误的，因为 Extent1 是按 ProductID 而不是 CategoryName 排序的，这会导致返回错误的记录。

那么这是一个错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T18:21:06.610

**编辑**：从 v 1.3.2 开始，这应该是固定的。如果您仍然看到问题，请返回此处。

* * *

好的，我刚刚复制了它，这是一个错误。感谢您找到并报告它。我会尝试在下一个版本中修复。当它进入时，我会回到这里。

# java - Erfc函数的使用：commons.apache.org库

> ID：16221406
> 
> 赞同：0
> 
> 时间：2013-04-25T17:49:50.597
> 
> 标签：java, eclipse, apache, import, static-libraries

我的问题很简单：我想在 Eclipse 中使用 Java 中的错误函数 Erfc(double) 但我不想实现它（因为它很复杂）。

所以，我发现了这个：

[http://commons.apache.org/proper/commons-math/apidocs/org/apache/commons/math3/special/Erf.html](http://commons.apache.org/proper/commons-math/apidocs/org/apache/commons/math3/special/Erf.html)

这正是我想要的。问题是我不能使用它。因为它不是来自“docs.oracle.com”，所以我不能只导入它。但不幸的是，我不能包含该库并且也不能使用它，因为我从以下位置下载：

[http://commons.apache.org/proper/commons-math/download_math.cgi](http://commons.apache.org/proper/commons-math/download_math.cgi)

不是 .jar

有人知道如何“安装-使用”它吗？

我在 Intel® Core™ i7-3610QM CPU @ 2.30GHz × 8 上使用 Ubuntu 12.04，我的 IDE 是 ecplipse。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T13:32:59.800

好吧，这是一个愚蠢的问题！所以我自己找到了答案。

我只需要下载二进制文件并将其添加为 .jar。然后它作为一个古典图书馆工作。

要使用它，我必须

导入 org.apache.commons.math3.*；

# spring - Spring 中的错误：org.springframework.beans.factory.NoSuchBeanDefinitionException：

> ID：16221411
> 
> 赞同：0
> 
> 时间：2013-04-25T17:50:15.307
> 
> 标签：spring, spring-security, web.xml, pom.xml, applicationcontext

我在集成 spring security 时遇到了这个错误：

> org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义名为“springSecurityFilterChain”的bean

这是我的 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.server.rest</groupId>
    <artifactId>SpringRestWebServices</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>

    <name>SpringRestWebServices</name>
    <url>http://maven.apache.org</url>

    <!-- Shared version number properties -->
    <properties>
        <org.springframework.version>3.1.3.RELEASE</org.springframework.version>
    </properties>

    <dependencies>

        <!-- Jersey dependencies -->
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-server</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-json</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- Spring 3 dependencies -->      <!-- Web application development utilities applicable to both Servlet and 
            Portlet Environments (depends on spring-core, spring-beans, spring-context) 
            Define this if you use Spring MVC, or wish to use Struts, JSF, or another 
            web framework with Spring (org.springframework.web.*) -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>       <!-- Spring 3 security -->
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <!-- Jersey + Spring dependencies -->
        <dependency>
            <groupId>com.sun.jersey.contribs</groupId>
            <artifactId>jersey-spring</artifactId>
            <version>1.2</version>
            <exclusions>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-core</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-web</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-beans</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-context</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
            <scope>provided</scope>
        </dependency>

    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.0.2</version>
                <configuration>
                    <source>1.5</source>
                    <target>1.5</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

这是我的 applicationContext.xml ：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
                 http://www.springframework.org/schema/beans
                 http://www.springframework.org/schema/beans/spring-beans.xsd
                 http://www.springframework.org/schema/context
                 http://www.springframework.org/schema/context/spring-context.xsd">

    <context:annotation-config></context:annotation-config>
    <context:component-scan base-package="com.server.rest.resource" />
</beans> 
```

这是 ApplicationContext 类：

```
@Configuration //This is a configuration class:  @Bean methods are intercepted, and it's return //values cached as needed for the bean scope.
@ComponentScan(basePackages = "com.server.rest.resource") //Transaction management 
@ImportResource("/WEB-INF/applicationContext.xml") 
public class ApplicationContext {

} 
```

这是我的 spring-security.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:security="http://www.springframework.org/schema/security" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd    
                        http://www.springframework.org/schema/security  http://www.springframework.org/schema/security/spring-security.xsd">

    <security:http auto-config="true">
        <security:intercept-url pattern="/rest*" access="ROLE_USER" />
    </security:http>

    <security:authentication-manager>
        <security:authentication-provider>
            <security:user-service>
                <security:user name="user" password="user" authorities="ROLE_USER" />
            </security:user-service>
        </security:authentication-provider>
    </security:authentication-manager>

</beans> 
```

和我的 web.xml

```
 <!--?xml version="1.0" encoding="UTF-8"?? -->
<web-app id="WebApp_ID" version="3.0"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemalocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <display-name>SpringJerseyRestServer</display-name>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>    <!-- Configure ContextLoaderListener to use AnnotationConfigWebApplicationContext 
        instead of the default XmlWebApplicationContext -->
    <context-param>
        <param-name>contextClass</param-name>
        <param-value>           org.springframework.web.context.support.AnnotationConfigWebApplicationContext       </param-value>
    </context-param>

    <!-- Configuration locations must consist of one or more comma- or space-delimited 
        fully-qualified @Configuration classes. Fully-qualified packages may also 
        be specified for component-scanning -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>           com.server.rest.resource.ApplicationContext,            /WEB-INF/spring-security.xml        </param-value>
    </context-param>

    <!-- Bootstrap the root application context as usual using ContextLoaderListener -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Declare a Spring MVC DispatcherServlet as usual -->
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>        <!-- Configure DispatcherServlet to use AnnotationConfigWebApplicationContext 
            instead of the default XmlWebApplicationContext -->
        <init-param>
            <param-name>contextClass</param-name>
            <param-value>
                    org.springframework.web.context.support.AnnotationConfigWebApplicationContext           </param-value>
        </init-param>       <!-- Again, config locations must consist of one or more comma- or space-delimited 
            and fully-qualified @Configuration classes -->
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>com.server.rest.resource.ApplicationContext,
                    /WEB-INF/spring-security.xml

                </param-value>
        </init-param>
    </servlet>

    <servlet>
        <servlet-name>Jersey Spring Web Application</servlet-name>
        <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.server.rest.resource</param-value>
        </init-param>

        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Jersey Spring Web Application</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>

    <!-- Spring Security -->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/rest/*</url-pattern>
    </filter-mapping>

</web-app> 
```

如果您能帮我解决 tnis 问题，我将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:39:05.217

Spring`DelegatingFilterProxy`期望 bean 的名称在`<filter-name>`. 在您的情况下，这是`springSecurityFilterChain`，但您的应用程序上下文中似乎没有这样的 bean。

看看[这个](http://forum.springsource.org/showthread.php?53972-Problem-when-finding-springSecurityFilterChain-bean)线程中的最后一篇文章。

似乎您需要显式使用`security`Spring 的命名空间来生成`springSecurityFilterChain`. 因此，将命名空间添加到您的所有`spring-security.xml`元素中。（确保将默认命名空间更改为`beans`其他名称。）

用。。。来代替

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:security="http://www.springframework.org/schema/security" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd    
                        http://www.springframework.org/schema/security  http://www.springframework.org/schema/security/spring-security.xsd">

    <security:http auto-config="true">
        <security:intercept-url pattern="/rest*" access="ROLE_USER" />
    </security:http>

    <security:authentication-manager>
        <security:authentication-provider>
            <security:user-service>
                <security:user name="user" password="user" authorities="ROLE_USER" />
            </security:user-service>
        </security:authentication-provider>
    </security:authentication-manager>

</beans> 
```

您的 web.xml 中还有其他错误/不需要的内容。它应该是这样的：

```
<!--?xml version="1.0" encoding="UTF-8"?? -->
<web-app id="WebApp_ID" version="3.0"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemalocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <display-name>SpringJerseyRestServer</display-name>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>    <!-- Configure ContextLoaderListener to use AnnotationConfigWebApplicationContext 
        instead of the default XmlWebApplicationContext -->
    <context-param>
        <param-name>contextClass</param-name>
        <param-value>
            org.springframework.web.context.support.AnnotationConfigWebApplicationContext
        </param-value>
    </context-param>

    <!-- Configuration locations must consist of one or more comma- or space-delimited 
        fully-qualified @Configuration classes. Fully-qualified packages may also 
        be specified for component-scanning -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>           
            com.server.rest.resource.ApplicationContext
        </param-value>
    </context-param>

    <!-- Bootstrap the root application context as usual using ContextLoaderListener -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Declare a Spring MVC DispatcherServlet as usual -->
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>        <!-- Configure DispatcherServlet to use AnnotationConfigWebApplicationContext 
            instead of the default XmlWebApplicationContext -->
        <init-param>
            <param-name>contextClass</param-name>
            <param-value>
                    org.springframework.web.context.support.XmlWebApplicationContext
            </param-value>
        </init-param>       <!-- Again, config locations must consist of one or more comma- or space-delimited 
            and fully-qualified @Configuration classes -->
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>
                /WEB-INF/spring-security.xml
            </param-value>
        </init-param>
    </servlet>

    <servlet>
        <servlet-name>Jersey Spring Web Application</servlet-name>
        <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.server.rest.resource</param-value>
        </init-param>

        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Jersey Spring Web Application</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>

    <!-- Spring Security -->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/rest/*</url-pattern>
    </filter-mapping>
</web-app> 
```

应用程序的根上下文由 ContextLoaderListener 加载。您应该只将 ApplicationContext 上下文（您的`@Configuration`类）由它加载。您加载的所有其他上下文`DispatcherServlet`都是根上下文的子上下文，因此可以引用其中的 bean。在那里你`DispatcherServlet`只需要加载`/WEB-INF/spring-security.xml`上下文（可能还有一个带有 MVC 相关 bean 的上下文，但看起来你这里没有。）因为这是一个 xml 文件，你需要一个`XmlWebApplicationContext`.

# asp.net - CSS媒体打印导致IE打印时部分页面被截断

> ID：16221412
> 
> 赞同：0
> 
> 时间：2013-04-25T17:50:21.240
> 
> 标签：asp.net, css, internet-explorer-9

我有以下情况，在 .NET 中，我有一个母版页，其中包含以下用于打印的 CSS：

```
<style type="text/css" media="print">
  div{overflow:visible !important}
</style> 
```

这在 Firefox 和 Chrome 中运行良好，但是在 IE 中页面顶部被截断。我花了很多时间试图调整页面，我知道我需要`overflow:visible !important`否则页面在其他方面看起来很糟糕，比如出现滚动条。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:06:27.780

打印 CSS：

*   确保所有打印浮点数是：`float none;`
*   确保你的**身体**是`overflow-y: visible;`
*   确保所有要打印的内容都有`display: block;`

# c - 在读取 PE 文件的部分时，SetFilePointer 无法正常工作

> ID：16221413
> 
> 赞同：1
> 
> 时间：2013-04-25T17:50:22.590
> 
> 标签：c, executable, portable-executable

好的，我想做的是打印 PE 可执行文件的一部分的所有数据：

```
#include<stdio.h>
#include<Windows.h>
int dth(int dec)
{
    return 0;
}

int main()
{
    IMAGE_NT_HEADERS peHead;
    IMAGE_DOS_HEADER dosMZ;
    IMAGE_SECTION_HEADER *secHead;
    unsigned long d;
    char file[]=".\\test.exe";
    HANDLE host;
    int i=0;
    printf("\nScanning %s :-",file);
    if((host=CreateFileA(file,GENERIC_READ,FILE_SHARE_READ,NULL,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,NULL))==INVALID_HANDLE_VALUE)
    {
        printf("\nFile OPEN Error");
        return 0;
    }
    if(!ReadFile(host,(void*)&dosMZ,sizeof(dosMZ),&d,NULL))
    {
        printf("\nRead Fail");
        return 0;
    }
    if(!(dosMZ.e_magic==IMAGE_DOS_SIGNATURE))
    {
        printf("\nNot a Valid PE");
        return 0;
    }
    printf("\nDos Signature Found");
    SetFilePointer(host,dosMZ.e_lfanew,NULL,FILE_BEGIN);
    if(!ReadFile(host,(void*)&peHead,sizeof(peHead),&d,NULL))
    {
        printf("\nRead Fail");
        return 0;
    }
    if(!(peHead.Signature==IMAGE_NT_SIGNATURE))
    {
        printf("\nNot Valid PE");
        return 0;
    }
    printf("\nPe Signature Found");
    printf("\nMachine to be Executed on: %x   ;Intelx86 for 0x14c",peHead.FileHeader.Machine);
    printf("\nNumber of Sections : %d",peHead.FileHeader.NumberOfSections);
    if(peHead.FileHeader.Characteristics==0x10f)
        printf("\nCharachteristics : Executable File");
    else
        printf("\nCharachteristics : DLL File");
    printf("\nReading Sections :");
    printf("%d",peHead.OptionalHeader.SizeOfHeaders);

    secHead=(IMAGE_SECTION_HEADER*)GlobalAlloc(GMEM_FIXED,sizeof(IMAGE_SECTION_HEADER)*peHead.FileHeader.NumberOfSections);
    ReadFile(host,(void*)secHead,sizeof(IMAGE_SECTION_HEADER)*peHead.FileHeader.NumberOfSections,&d,NULL);
    for(i=0;i<peHead.FileHeader.NumberOfSections;i++)
    {
        printf("\n Section Name : %s",secHead[i].Name);
        printf("\n RVA          : %x",secHead[i].VirtualAddress);
        printf("\n Pointer to Raw Data : %x",secHead[i].PointerToRawData);
        printf("\n Size of Data : %x",secHead[i].SizeOfRawData);
    }

    printf("\nPrinting opcodes of code Section:\n\n");

    SetFilePointer(host,(int)secHead[1].PointerToRawData,NULL,FILE_BEGIN);

    char ab;
    for(i=0;i<=(secHead[1].SizeOfRawData);i++)
    {
        ReadFile(host,&ab,1,&d,NULL);
        printf("%c",ab);
    }
    printf("%d\n,%d",i);
    CloseHandle(host);
    return 0;
} 
```

当将指针设置为必须将文件指针设置为文件位置的部分`setfilepointer`开头时，会发生错误，而不是指向位置。我在用 ollydbg 调试问题后发现了这一点。`.text``4096``16384`

任何人都可以告诉我怎么了？

# google-app-engine - 即使在定义索引之后也出现 DatastoreNeedIndexException

> ID：16221414
> 
> 赞同：1
> 
> 时间：2013-04-25T17:50:23.027
> 
> 标签：google-app-engine, google-cloud-datastore

我对 GAE java 上的 DataStore 查询的问题感到困惑——它总是抱怨我没有匹配的索引，即使我有他们在我的 datastore-indexes.xml 中建议的确切索引——可以摆脱一些在我拉出所有头发之前点亮？

```
com.google.appengine.api.datastore.DatastoreNeedIndexException: no matching index found.
The suggested index for this query is:
    <datastore-index kind="Users" ancestor="false" source="manual">
        <property name="BILLING_ENABLED" direction="asc"/>
        <property name="EXPIRED" direction="asc"/>
        <property name="api" direction="asc"/>
        <property name="CREATION" direction="asc"/>
    </datastore-index> 
```

我的数据存储索引.xml

```
<datastore-indexes autoGenerate="true">
    <datastore-index kind="Users" ancestor="false" source="manual">
    <property name="BILLING_ENABLED" direction="asc"/>
    <property name="EXPIRED_DATE" direction="asc"/>
    <property name="EXPIRED" direction="asc"/>
    <property name="api" direction="asc"/>
    <property name="CREATION" direction="asc"/>
    </datastore-index>
</datastore-indexes> 
```

我的查询：

```
查询 q = new Query("Users");
过滤器过滤器 = CompositeFilterOperator.and(new FilterPredicate("api", Query.FilterOperator.EQUAL,
"val"), new FilterPredicate(EXPIRED, Query.FilterOperator.EQUAL, Boolean.FALSE));
filter = CompositeFilterOperator.and(filter, new FilterPredicate("BILLING_ENABLED", Query.FilterOperator.EQUAL, Boolean.FALSE));
filter = CompositeFilterOperator.and(filter, new FilterPredicate("CREATION", Query.FilterOperator.LESS_THAN_OR_EQUAL, cal.getTime()));

```

如果我理解正确，我需要“api”、“EXPIRED”、“BILLING_ENABLED”和“CREATION”的索引，因为它们在查询中使用——但我还需要什么吗？

谢谢，阿德里安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:47:47.093

建议的查询与您所拥有的有点不同。它必须完全匹配才能正常工作。只需将建议的索引按原样添加为额外索引，重新部署您的应用程序，然后从应用程序仪表板上的**Datastore Indexes**部分检查它是否存在并且状态为：**Serving**。

# java - Java - 使用计时器绘制图像

> ID：16221416
> 
> 赞同：0
> 
> 时间：2013-04-25T17:50:38.930
> 
> 标签：java, swing, timer

我正在创建一个看起来像这样的动画。

![在此处输入图像描述](https://i.stack.imgur.com/tx5VZ.png)

我希望左侧的漩涡状图标（这是一个 ImageIcon）显示 3 秒钟然后消失。但是，漩涡状图标不会消失。

这是我的代码。

```
import javax.imageio.ImageIO;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.io.File;
import java.io.IOException;

public class Main {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }

    private static void createAndShowGUI() {

        JFrame f = new JFrame("random title");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setResizable(false);
        f.add(new MyPanel());
        f.pack();
        f.setVisible(true);
    }
}

class MyPanel extends JPanel {

    private static final long serialVersionUID = 1L;
    public int x;
    public int y;
    public int remoteControllerX = 473;
    public int remoteControllerY = 340;
    public int buttonX = 166;
    public int buttonY = 208;
    Image img;
    Image remoteController;
    ImageIcon button = new ImageIcon("graphics/button.gif");
    Component buttonTrigger = this;

    public MyPanel() {

        try {
            img = ImageIO.read(new File("graphics/close_0.jpg"));
        } catch (IOException e) {

            e.printStackTrace();
        }
        try {
            remoteController = ImageIO.read(new File("graphics/pilot.png"));
        } catch (IOException ex) {
            ex.printStackTrace();
        }
        setBorder(BorderFactory.createLineBorder(Color.black));

        new Timer(3000, paintTimer).start();

        addMouseListener(new MouseAdapter() {
            public void mousePressed(MouseEvent e) {
                x = e.getX();
                y = e.getY();
                // Here goes action on background, which is unrelated to this example.
            }
        });
    }

    public Dimension getPreferredSize() {
        return new Dimension(1048, 484);
    }

    protected void paintComponent(Graphics g) {
        super.paintComponent(g);

        g.drawImage(img, 0, 0, null);
        g.drawImage(remoteController, remoteControllerX, remoteControllerY, null);
        Toolkit.getDefaultToolkit().sync();
        button.paintIcon(buttonTrigger, g, buttonX, buttonY);
    }
    Action paintTimer = new AbstractAction() {
        private static final long serialVersionUID = -2121714427110679013L;

        public void actionPerformed(ActionEvent e) {
            buttonTrigger = null;
            repaint();
        }
    };
} 
```

您还需要这 3 个图像才能运行代码：

[http://ajks.pl/graveyard/close_0.jpg](http://ajks.pl/graveyard/close_0.jpg)

[http://ajks.pl/graveyard/pilot.png](http://ajks.pl/graveyard/pilot.png)

[http://ajks.pl/graveyard/button.gif](http://ajks.pl/graveyard/button.gif)

它们被放置在主 Java 项目下的图形文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:20:16.527

我添加了一个布尔值来确定是否绘制漩涡图像图标。

这是更正后的代码。

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.BorderFactory;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class Main {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }

    private static void createAndShowGUI() {
        JFrame f = new JFrame("random title");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setResizable(false);
        f.add(new MyPanel());
        f.pack();
        f.setVisible(true);
    }

}

class MyPanel extends JPanel {
    private static final long   serialVersionUID    = 1L;
    public boolean              paintButton         = true;
    public int                  x;
    public int                  y;
    public int                  remoteControllerX   = 473;
    public int                  remoteControllerY   = 340;
    public int                  buttonX             = 166;
    public int                  buttonY             = 208;
    Image                       img;
    Image                       remoteController;
    ImageIcon                   button              = new ImageIcon(
                                                            "graphics/button.gif");
    Component                   buttonTrigger       = this;

    public MyPanel() {
        try {
            img = ImageIO.read(new File("graphics/close_0.jpg"));
            remoteController = ImageIO.read(new File("graphics/pilot.png"));
        } catch (IOException e) {
            e.printStackTrace();
        }

        setBorder(BorderFactory.createLineBorder(Color.black));

        new Timer(3000, paintTimer).start();

        addMouseListener(new MouseAdapter() {
            public void mousePressed(MouseEvent e) {
                x = e.getX();
                y = e.getY();
                // Here goes action on background, which is unrelated to this
                // example.
            }
        });
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(1048, 484);
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);

        g.drawImage(img, 0, 0, null);
        g.drawImage(remoteController, remoteControllerX, remoteControllerY,
                null);
        Toolkit.getDefaultToolkit().sync();
        if (paintButton) {
            button.paintIcon(buttonTrigger, g, buttonX, buttonY);
        }
    }

    Action  paintTimer  = new AbstractAction() {
        private static final long   serialVersionUID    = -2121714427110679013L;

        @Override
        public void actionPerformed(ActionEvent e) {
            paintButton = false;
            repaint();
        }
    };

} 
```

# php - 为什么在提交或单击按钮时无法显示/获取/发布包括上传图片在内的数据？

> ID：16221421
> 
> 赞同：0
> 
> 时间：2013-04-25T17:50:58.047
> 
> 标签：php, javascript, html

我将创建一个静态 PHP 表单，您可以在其中允许用户填写他们的信息，包括图像和所有数据。问题是提交表单时，链接页面`action="..."`没有显示填写的信息或数据和图像。 HTML 代码如下所示：

```
<!DOCTYPE html>
      <head>
     <title></title>
   <script type="text/javascript" src="http:////ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
      <script type="text/javascript" src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
     <script type="text/javascript" src="jquery.js"></script>
         <script type="text/javascript">
       function readURL(input) {
             if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#blah').attr('src', e.target.result);
            }

            reader.readAsDataURL(input.files[0]);
        }
    }
    </script>
     </head>

      <body>
         <form name="rform" method="get" action="researchers.php">  
      <h4>Researchers Profile</h4> 

         <fieldset>
    <legend>Perosnal Details</legend>
       <form id="form1" runat="server"  method="get" action="researchers.php" enctype="multipart/form-data" id="pro_image>
       <input type='file' onchange="readURL(this);" />
          <br><img id="blah" src="profile pic.jpg" alt="your image" width="160px" height="120px" name="image"/><br/>
</form>

    <table width="600px">
    <tr>    
        <td>Name</td>   
        <td>:</td>
        <td><input type="text" name="rname" maxlength="40" size="50" placeholder="Your Name"></td>
    </tr>
     <tr>
        <td>Education</td> 
        <td>:</td>
        <td><textarea name="edu" rows="3" cols="70" placeholder="Education"></textarea></td>
    <tr>
        <td>Address</td>
        <td>:</td>
        <td><textarea name="address" rows="3" cols="70" placeholder="Address"></textarea></td>
    </tr>
    <tr>
        <td>Office</td>
        <td>:</td>
        <td><input type="text" name="office" size="50" maxlength="50" placeholder="Office"><td>
    </tr>  
    <tr>
        <td>Fax</td>
        <td>:</td>
        <td><input type="text" name="fax" size="50" maxlength="50" placeholder="Fax"></td>
    </tr>
    <tr>
        <td>Email</td>
        <td>:</td>
        <td><input type="email" name="remail" maxlength="40" size="50" placeholder="Your Email"></td>
    </tr>
    <tr>
        <td>Research Overview</td>
        <td>:</td>
        <td><textarea name="overview" rows="10" cols="70" placeholder="Research Overview"></textarea></td>
    </tr>
     <tr>
        <td>Keywords</td>
        <td>:</td>
        <td><textarea name="keywords" rows="8" cols="70" placeholder="Keywords"></textarea></td>
     </tr>
    </table>
            <script type="text/javascript">
    function readURL2(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#blah2').attr('src', e.target.result);
            }

            reader.readAsDataURL(input.files[0]);
        }
    }
</script> 
    <fieldset>
    <legend>Projects</legend>

     <form id="form2" runat="server" method="get" action="researchers.php" enctype="multipart/form-data" id="pro_image>
    <input type='file' onchange="readURL2(this);" />
    <br><img id="blah2" src="information.jpg" alt="your image" width="600px" height="180px" name="image2"/><br/>
</form>
        <table width="600px" id="project">
            <tr>
                <td>1</td>
                <td><textarea name="pro_1" cols="100" rows="2"></textarea></td>
            </tr>
            <tr>
                <td>2</td>
                <td><textarea name="pro_2" cols="100" rows="2"></textarea></td>
            </tr>
            <tr>
                <td>3</td>
                <td><textarea name="pro_3" cols="100" rows="2"></textarea></td>
            </tr>

        </table>

     </fieldset>
        <script type="text/javascript">
 function readURL3(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#blah3').attr('src', e.target.result);
            }

            reader.readAsDataURL(input.files[0]);
        }
    }
</script> 

      <fieldset>
    <legend>Publications</legend>
     <form id="form2" runat="server" method="get" action="researchers.php" enctype="multipart/form-data" id="pro_image">
    <input type='file' onchange="readURL3(this);" />
    <br><img id="blah3" src="information.jpg" alt="your image" width="600px" height="180px" name="image3"/><br/>
</form>
        <table width="600px" id="pub">
            <tr>
                <td>1</td>
                <td><textarea name="pub_1" cols="100" rows="2"></textarea></td>
            </tr>
            <tr>
                <td>2</td>
                <td><textarea name="pub_2" cols="100" rows="2"></textarea></td>
            </tr>
            <tr>
                <td>3</td>
                <td><textarea name="pub_3" cols="100" rows="2"></textarea></td>
            </tr>

        </table> 
```

```
</form>

<input type="submit" name="savebtn" value="Save"/>
<input type="reset" name="resetbtn" value="Reset"/> 
```

下面作为研究人员.php 代码：

```
<!DOCTYPE html>
   <head>
   <title></title>
  </head>
  <body>
      <h4>Researchers Profile</h4> 

    <fieldset>
    <legend>Perosnal Details</legend>
        <?php echo $_GET["image"]; ?>

       </form>
        <table width="600px">
    <tr>    
        <td>Name</td>   
        <td>:</td>
        <td><?php echo $_GET["rname"]; ?></td>
    </tr>
     <tr>
        <td>Education</td> 
        <td>:</td>
        <td><?php echo $_GET["edu"]; ?></td>
    <tr>
        <td>Address</td>
        <td>:</td>
        <td><?php echo $_GET["address"];?></td>
    </tr>
    <tr>
        <td>Office</td>
        <td>:</td>
        <td><?php echo $_GET["office"];?><td>
    </tr>  
    <tr>
        <td>Fax</td>
        <td>:</td>
        <td><?php echo $_GET["fax"];?></td>
    </tr>
    <tr>
        <td>Email</td>
        <td>:</td>
        <td><?php echo $_GET["remail"];?></td>
      </tr>
      <tr>
        <td>Research Overview</td>
        <td>:</td>
        <td><?php echo $_GET["overview"];?></td>
    </tr>
     <tr>
        <td>Keywords</td>
        <td>:</td>
        <td><?php echo $_GET["keywords"];?></td>
     </tr>
    </table>

    <fieldset>
    <legend>Projects</legend>

        <?php echo $_GET["image2"]; ?>
        <table width="600px" id="project">
            <tr>
                <td>1</td>
                <td><?php echo $_GET["pro_1"]; ?></td>
            </tr>
            <tr>
                <td>2</td>
                <td><?php echo $_GET["pro_2"]; ?></td>
            </tr>
            <tr>
                <td>3</td>
                <td><?php echo $_GET["pro_3"];?></td>
            </tr>

        </table>

  </fieldset>
    <fieldset>
    <legend>Publications</legend>
        <?php echo $_GET["image3"]; ?>        
        <table width="600px" id="pub">
            <tr>
                <td>1</td>
                <td><?php echo $_GET["pub_1"]; ?></td>
            </tr>
            <tr>
                <td>2</td>
                <td><?php echo $_GET["pub_2"]; ?></td>
            </tr>
            <tr>
                <td>3</td>
                <td><?php echo $_GET["pub_3"]; ?></td>
            </tr>

        </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T04:07:46.903

这是第2页

```
<h4>Researchers Profile</h4> 

<fieldset>
<legend>Perosnal Details</legend>
<?php echo $_GET["image"]; ?>
<table width="600px">
    <tr><td>Name</td><td>:</td><td><?php echo $_GET["rname"]; ?></td></tr>
    <tr><td>Education</td><td>:</td><td><?php echo $_GET["edu"]; ?></td></tr>
    <tr><td>Address</td><td>:</td><td><?php echo $_GET["address"];?></td></tr>
    <tr><td>Office</td><td>:</td><td><?php echo $_GET["office"];?><td></tr>  
    <tr><td>Fax</td><td>:</td><td><?php echo $_GET["fax"];?></td></tr>
    <tr><td>Email</td><td>:</td><td><?php echo $_GET["remail"];?></td></tr>
    <tr><td>Research Overview</td><td>:</td><td><?php echo $_GET["overview"];?></td></tr>
    <tr><td>Keywords</td><td>:</td><td><?php echo $_GET["keywords"];?></td></tr>
</table>
</fieldset>

<fieldset>
<legend>Projects</legend>
<?php echo $_GET["image2"]; ?>
<table width="600px" id="project">
    <tr><td>1</td><td><?php echo $_GET["pro_1"]; ?></td></tr>
    <tr><td>2</td><td><?php echo $_GET["pro_2"]; ?></td></tr>
    <tr><td>3</td><td><?php echo $_GET["pro_3"];?></td></tr>
</table>
</fieldset>

<fieldset>
<legend>Publications</legend>
<?php echo $_GET["image3"]; ?>        
<table width="600px" id="pub">
    <tr><td>1</td><td><?php echo $_GET["pub_1"]; ?></td></tr>
    <tr><td>2</td><td><?php echo $_GET["pub_2"]; ?></td></tr>
    <tr><td>3</td><td><?php echo $_GET["pub_3"]; ?></td></tr>
</table>
</fieldset> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:54:17.517

输入类型提交需要在你的标签内

```
<form action="" method="">
<input type="submit"/>
</form> 
```

///////////////////////////////////////// ///////////

```
<script type="text/javascript" src="http:////ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
        $('#blah').attr('src', e.target.result);
        }

        reader.readAsDataURL(input.files[0]);
    }
}
</script>

<form name="rform" method="get" action="researchers.php"> 
    <h4>Researchers Profile</h4> 
    <fieldset>
        <legend>Perosnal Details</legend>
        <input type='file' name="image" onchange="readURL(this);" />
        <br><img id="blah" src="profile pic.jpg" alt="your image" width="160px" height="120px" name="image"/><br/>

        <table width="600px">
        <tr><td>Name</td><td>:</td><td><input type="text" name="rname" maxlength="40" size="50" placeholder="Your Name"></td></tr>
        <tr><td>Education</td><td>:</td><td><textarea name="edu" rows="3" cols="70" placeholder="Education"></textarea></td>
        <tr><td>Address</td><td>:</td><td><textarea name="address" rows="3" cols="70" placeholder="Address"></textarea></td></tr>
        <tr><td>Office</td><td>:</td><td><input type="text" name="office" size="50" maxlength="50" placeholder="Office"><td></tr>  
        <tr><td>Fax</td><td>:</td><td><input type="text" name="fax" size="50" maxlength="50" placeholder="Fax"></td></tr>
        <tr><td>Email</td><td>:</td><td><input type="email" name="remail" maxlength="40" size="50" placeholder="Your Email"></td></tr>
        <tr><td>Research Overview</td><td>:</td><td><textarea name="overview" rows="10" cols="70" placeholder="Research Overview"></textarea></td></tr>
        <tr><td>Keywords</td><td>:</td><td><textarea name="keywords" rows="8" cols="70" placeholder="Keywords"></textarea></td></tr>
        </table>
    </fieldset>
<script type="text/javascript">
function readURL2(input) {
    if (input.files && input.files[0]) {
    var reader = new FileReader();

    reader.onload = function (e) {
        $('#blah2').attr('src', e.target.result);
    }

    reader.readAsDataURL(input.files[0]);
    }
}
</script> 
    <fieldset>
        <legend>Projects</legend> 
        <input type='file' name="image2" onchange="readURL2(this);" />
        <br><img id="blah2" src="information.jpg" alt="your image" width="600px" height="180px" name="image2"/><br/>

        <table width="600px" id="project"><tr>
        <td>1</td><td><textarea name="pro_1" cols="100" rows="2"></textarea></td></tr>
        <tr><td>2</td><td><textarea name="pro_2" cols="100" rows="2"></textarea></td></tr>
        <tr><td>3</td><td><textarea name="pro_3" cols="100" rows="2"></textarea></td></tr> 
        </table>
    </fieldset>
<script type="text/javascript">
function readURL3(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
            $('#blah3').attr('src', e.target.result);
        }

        reader.readAsDataURL(input.files[0]);
    }
}
</script> 
    <fieldset>
        <legend>Publications</legend>
        <input type='file' name="image3" onchange="readURL3(this);" />
        <br><img id="blah3" src="information.jpg" alt="your image" width="600px" height="180px" name="image3"/><br/>

        <table width="600px" id="pub"><tr><td>1</td>
        <td><textarea name="pub_1" cols="100" rows="2"></textarea></td></tr>
        <tr><td>2</td><td><textarea name="pub_2" cols="100" rows="2"></textarea></td></tr>
        <tr><td>3</td><td><textarea name="pub_3" cols="100" rows="2"></textarea></td></tr>
        </table>
    </fieldset>

<input type="submit" name="savebtn" value="Save"/>
<input type="reset" name="resetbtn" value="Reset"/>       
</form> 
```

# php - 在 Plesk 上设置 php mail() 时遇到问题

> ID：16221422
> 
> 赞同：0
> 
> 时间：2013-04-25T17:50:58.933
> 
> 标签：php, forms, email, plesk

我正在为一个网站设置一个电子邮件表单，而 mail() 函数只是拒绝工作。服务器正在运行 Plesk。我确信代码没问题，因为它在不同的 Web 服务器上运行没有问题。

我已经设置了一个无回复电子邮件帐户并添加了发件人标题，但这仍然没有解决问题。这是我的代码：

```
$name = $_POST['name'];
$email = $_POST['email'];
$message = $_POST['message'];
$formcontent="From: $name, $email \nMessage: $message";
$to = "myemail@differentdomain.com";
$subject = $_POST['subject'];
$headers = 'From: noreply@mydomain.com' . "\r\n" .
'Reply-To: $email' . "\r\n" .
'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $formcontent, $headers); 
```

有任何想法吗？

谢谢，伊利安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:41:57.557

代码本身不足以判断。发送邮件将取决于

1.  PHP代码（看起来还可以）
2.  PHP 配置（未知）。您服务器上的 PHP 可以配置为通过命令行（sendmail 工具）或通过 SMTP 发送。更多细节可以从 PHP 文档中对 mail() 函数的描述中了解
3.  设置 MTA（未知）- 即远程 SMTP 中的身份验证模式或通过 sendmail 工具提供本地未授权投递（可能会被阻止以防止发送垃圾邮件）
4.  如果邮件服务器的远程 SMTP 连接可用性很重要

我建议检查所有阶段。代码本身只是涉及网络通信的众多因素之一。

# javascript - 在 svg 动画时间轴中查找

> ID：16221423
> 
> 赞同：1
> 
> 时间：2013-04-25T17:51:05.357
> 
> 标签：javascript, html, svg

我在 svg 中有一个动画。我想找动画。例如，我有一个搜索栏（可以使用鼠标单击更改位置），并且我在 svg 中有一个持续时间为 5 秒的动画。根据搜索栏的位置，动画也会发生变化。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:57:17.063

调用[setCurrentTime](http://www.w3.org/TR/SVG/struct.html#__svg__SVGSVGElement__setCurrentTime)`<svg>`将调整动画时间线，只要在调整时让你的搜索栏在根元素上调用它。

# php - 显示 XML 提要内容

> ID：16221425
> 
> 赞同：-1
> 
> 时间：2013-04-25T17:51:06.973
> 
> 标签：php, simplexml

使用 simpleXML，您如何显示提要的内容。我的意思是实际上在页面上显示 XML 以便我可以看到架构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:01:21.943

In my example i will use XML file like:

```
<?xml version="1.0" encoding="UTF-8"?>
<module>
    <name>Menus</name>
    <folder>menus</folder>
    <install>install.php</install>
</module> 
```

You can use to load xml file in a variable:

```
$mod = simplexml_load_file($XMLfile); 
```

and call fields:

```
echo $mod->module->name;
echo $mod->module->folder;
echo $mod->module->install; 
```

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:02:08.297

```
$xml = simplexml_load_file("URL GOES HERE");
echo "<pre>";
print_r($xml);
echo "</pre>"; 
```

Will print a readable array of the object.

And a VALID RSS feed has this schema:

```
foreach($xml->channel->item as $items){
  $title = $items->title;
  $link = $items->link;
  $description = $items->description;
  $pubDate = strtotime($items->pubDate);
  $pubDate = date('Y-m-d H:i:s', $pubDate);
} 
```

Along with a few other attributes.

# nunit - 如何在 TeamCity NUnit 跑步者中获取当前的 TestContext

> ID：16221431
> 
> 赞同：5
> 
> 时间：2013-04-25T17:51:35.010
> 
> 标签：nunit, teamcity

在 NUnit 中，可以使用`NUnit.Framework.TestContext.CurrentContext`. 当我在本地机器上运行测试时，它会在测试期间正确填充。但是，当推送到运行 TeamCity 的开发服务器时，此数据结构会出现一些导致错误的问题。`context.Test.FullName`访问、`context.Test.Name`和时会发生这些错误`context.Result`。例如，使用以下代码：

```
var name = NUnit.Framework.TestContext.CurrentContext.Test.Name; 
```

此异常发生，但仅在 TeamCity 运行测试时发生：

```
TearDown method failed. TearDown : System.NullReferenceException : Object reference not set to an instance of an object.
--TearDown
   at NUnit.Framework.TestContext.TestAdapter.get_Name() 
```

TeamCity 是否没有填充`TestContext`或是否有正确的方法来获取这些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T21:57:40.623

最佳猜测：这是不可能的，因为 TeamCity 没有填充 TestContext 数据结构。也不能，因为 NUnit 中的设置器不是公开的。要使此功能正常工作，可能需要修改 NUnit。

为了绕过这个限制，我们编写了自己的测试运行器，使用自定义数据结构来指示测试失败（这是这样做的主要目的）。

# magento - 在magento中将用户记录到后端管理员订单

> ID：16221437
> 
> 赞同：1
> 
> 时间：2013-04-25T17:51:45.987
> 
> 标签：magento

我已将以下内容添加到我正在处理的 magento 站点中，它基本上将登录的用户名添加到对订单的任何评论中。

[http://www.atwix.com/magento/adding-senders-name-order-comments/](http://www.atwix.com/magento/adding-senders-name-order-comments/)

我现在需要做的是添加一些东西来记录哪个用户在管理员中创建了订单，或者在每个订单页面上显示消息“在线订购”。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T23:37:37.190

为 sales_order_place_after 创建一个观察者

```
<events>
    <sales_order_place_after>
        <observers>
            <orderenteredby>
                <type>singleton</type>
                <class>orderenteredby/observer</class>
                <method>implementOrderMethod</method>
            </orderenteredby>
        </observers>
    </sales_order_place_after> 
```

在 Observer.php 中

```
class MagePal_OrderEnteredBy_Model_Observer 
{

    public function implementOrderMethod($event)
    {
        $_order = $event->getOrder();

        if($this->_isAdmin()){
            $_user = Mage::getSingleton('admin/session');
            $firstname = $_user->getUser()->getFirstname();
            $lastname = $_user->getUser()->getLastname();
            $enterBy = "Order entered by {$firstname} {$lastname}";  
        }
        else{
            $enterBy = 'Ordered Online';
        }
        $_order->addStatusHistoryComment($enterBy)
               ->setIsVisibleOnFront(false)
               ->setIsCustomerNotified(false);

        return $this;
    }

    protected function _isAdmin(){
        if(Mage::app()->getStore()->isAdmin()){
            return true;
        }

        if(Mage::getDesign()->getArea() == 'adminhtml'){
            return true;
        }

        return false;
    }
} 
```

有关如何创建观察者的更多信息，请参阅[更改重复产品的 Magento 默认状态](https://stackoverflow.com/questions/12677971/change-magento-default-status-for-duplicated-products)

# c++ - 矢量 push_back：不转换参数

> ID：16221439
> 
> 赞同：2
> 
> 时间：2013-04-25T17:51:57.670
> 
> 标签：c++

好吧，我要做的是将我调用的类的对象推回`Block`不同的向量上，这些向量保留`Block`元素并自己保存在向量中。

```
std::vector<std::vector<Block>> mapvec;
mapvec[xcnt].push_back(new Block(xcnt,ycnt)); 
```

这是我到现在为止的进步。

```
error C2664: 'std::vector<_Ty>::push_back': convetion of the parameter 'Block *' in 'const Block &' not possible 
```

（从德语翻译）

我该怎么办？有没有其他方法可以做我想做的事？不使用数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:57:07.633

`new`返回指向动态分配对象的指针。这不是你想在这里做的。通常你想传递一个临时（或已经存在的）对象`push_back`，它会在内存中插入一个副本。

所以，干脆摆脱`new`. 像这样：

```
std::vector<std::vector<Block>> mapvec;
mapvec[xcnt].push_back(Block(xcnt,ycnt)); 
```

这将创建一个临时`Block`对象并将副本插入到向量中。

如果要使用`new`，则需要将指针存储在向量中，而不是`Block`对象中。最安全的方法是使用智能指针：

```
std::vector<std::vector<std::unique_ptr<Block>>> mapvec;
mapvec[xcnt].push_back(std::unique_ptr<Block>(new Block(xcnt, ycnt))); 
```

这样，一旦您从向量中删除项目或向量被破坏，分配的内存`new`将被释放。`delete`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:55:01.513

定义你`mapvec`的

```
std::vector<std::vector<Block*>> mapvec; 
```

反而？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T17:55:12.897

```
new Block(xcnt,ycnt) 
```

让您`Block*`指向新分配的`Block`. 而且您的向量`Block`不希望`Block*`

* * *

将其更改为

```
mapvec[xcnt].push_back(Block(xcnt,ycnt)); 
```

这会将您复制`Block`到向量中，因此`Block`类应该具有可访问的复制构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T18:42:15.167

你应该 ：

```
mapvec[xcnt].push_back(Block(xcnt,ycnt)); 
```

因为您持有 Block 的实例，而不是它们的指针

# java - 来自数组变量的错误

> ID：16221441
> 
> 赞同：-3
> 
> 时间：2013-04-25T17:52:05.420
> 
> 标签：java, linux, arrays, compilation

由于程序的编译给出了错误

```
/partrain/src/ParallelTraining.java:309: error: cannot find symbol
                            Array array = contonewdatabase.createArrayOf("string", residualgroupparam);
                            ^
  symbol:   class Array
  location: class Reduce 
```

我怀疑没有连接必要的库。提示需要连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T00:56:03.253

我怀疑您正在`createArrayOf`从`Connection`. `java.sql`在这种情况下，您忘记了导入：

```
import java.sql.Array 
```

# matlab - 在 Matlab 中使用 inv() 函数使用所有 RAM 崩溃

> ID：16221443
> 
> 赞同：2
> 
> 时间：2013-04-25T17:52:10.400
> 
> 标签：matlab, matrix-inverse

我在 Matlab 43916x43916 中有一个稀疏矩阵，由以下等式计算：

```
B=(speye(nV,nV)-alpha*NeMatrix+beta*NeMatrix*NeMatrix); 
```

是`nV`一个int，`alpha`一个int，`NeMatrix`一个稀疏矩阵和`beta`一个int。

我不能做 inv(B) 因为它增加了 RAM 的使用直到它崩溃。我已经尝试过LU，但没有成功。

我该如何计算这个逆矩阵？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:02:23.543

The inverse will be a dense matrix. Thus you should check, whether you can handle a matrix of this size. Try, e.g., to set up `ones(nV,nV)` ... If you have enough storage, you may consider to compute the inverse column wise. The i-th column would be `B\ei`, where `ei` is the i-th unit vector.

HOWEVER, in numerical computations you hardly ever need the inverse of a matrix `B`. Most times `B\v` is enough, where `v` is a vector. So you better check, whether you really need the full inverse...

# excel - 如果单元格包含值 n，我如何创建一列 n 个单元格，每个单元格都包含值 n（然后与另一个单元格重复）？

> ID：16221446
> 
> 赞同：0
> 
> 时间：2013-04-25T17:52:29.373
> 
> 标签：excel, formula, vba

为简单起见，假设我有一列 5 个数字，如下所示：-

```
8
15
8
3
26 
```

我想要做的是创建一个列，首先由 8 个包含值“8”的单元格组成，然后是 15 个包含值“15”的单元格，然后是 8 个包含值“8”的单元格，依此类推。因此，此示例将导致 60 个单元格的列长度（但是，我的现实生活中的列有超过 200 个数字，并且会产生大约 2500 个数字的列！）。

这可能吗？它需要一个公式还是一个宏？（恐怕我也不是很擅长，所以如果这是一个简单的问题，我很抱歉。）任何建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T03:08:29.043

Try this

```
Public Sub Test()

    PopulateColumn Range("A1"), Range("B1")

End Sub

Public Sub PopulateColumn(ByVal rngSourceStart As Range, ByVal rngTargetStart As Range)

    Dim rngSource As Range
    Dim rngTarget As Range

    Set rngSource = rngSourceStart
    Set rngTarget = rngTargetStart

    Dim iValue As Integer
    Dim i As Integer

    While rngSource.Value <> ""
        iValue = rngSource.Value
        For i = 1 To rngSource.Value
            rngTarget.Value = iValue
            Set rngTarget = rngTarget.Offset(1, 0)
        Next
        Set rngSource = rngSource.Offset(1, 0)
    Wend

End Sub 
```

# php - if 语句如何触发？

> ID：16221447
> 
> 赞同：-1
> 
> 时间：2013-04-25T17:52:32.167
> 
> 标签：php, if-statement, logic

我只是在做一些 curl 的工作，直到我遇到了一个有趣的 if 语句。认为它永远不会执行 if 语句，令我惊讶的是它确实执行了。这是如何执行的？

```
 <?php      
     while (6 && 2 == 2) {

     $test = "How the hell?!!?";

}
 ?> 
```

我认为它有效的唯一原因是 6 评估为真，2 等于 2，这是真的。我的这种想法正确吗？最初我认为它无法执行，因为 6 显然不等于 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:55:21.647

你是对的。有关子语句（6、&&、2、==、2）的执行顺序，请参见[http://php.net/manual/en/language.operators.precedence.php](http://php.net/manual/en/language.operators.precedence.php)。

所以它被评估为`(6) && ((2) == (2))`。`6`，转换为布尔值是真的。而且`2 == 2`也是。什么结果就`true && true`什么自然`true`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:58:41.423

我没有任何 PHP 经验，但我会尝试。在进行逻辑比较时，会有一个返回值，具体取决于两边的值。例如，在 C++ 中，比较有两种可能的结果：0 和 1。0 代表“假”，而 1 和任何其他数字代表“真”。因此，在您的代码中，您会得到一个值为 6（不是 0，所以为真）和一个值为 1（因为 2 等于 2）的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T17:55:58.743

正确的。您的表达式有两个部分 6 和 2==2。两者都是真的，所以真的 && true 当然是真的。查看[运算符优先级](http://php.net/manual/en/language.operators.precedence.php)。

# javascript - 函数范围和全局变量

> ID：16221448
> 
> 赞同：5
> 
> 时间：2013-04-25T17:52:32.563
> 
> 标签：javascript

```
var foo = '1',
    bar = '2';

console.log(foo, bar, window.foo); //1, 2, undefined

(function(foo){
    console.log(foo, bar); //2, 2
})(bar); 
```

关于上面的代码，我有两个微不足道的问题：

1.  为什么是`window.foo`未定义的？默认情况下不是所有全局变量都附加到窗口对象吗？

2.  为什么`foo ===`2 在闭包内？我知道我正在传递`bar`带有别名的原始`foo`文件`2`，但在函数范围之外`foo`仍然是`1`. 据我所知，原件`foo`也可以从封闭件内部访问。“新 foo”是否被优先考虑，因为它作为参数传递给 IIFE？

[http://jsfiddle.net/GbeDX/](http://jsfiddle.net/GbeDX/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T17:56:27.213

> 为什么是`window.foo`未定义的？不是所有的“全局”变量都自动附加到窗口对象吗？

是的，全局变量成为 的属性`window`，但代码不在您的小提琴的全局范围内运行。它在`load`事件处理程序中运行（参见左侧的第二个复选框，它显示“onLoad”）。它在全球范围内运行：http: [//jsfiddle.net/GbeDX/1/](http://jsfiddle.net/GbeDX/1/)

> 为什么`foo === 2`里面是封闭的？[...] 据我所知，原件`foo`也可以从封闭件内部访问。

不，它不能。*参数* `foo` **隐藏**变量`foo`。_ 如果它是一个全局变量，您可以使用`window.foo`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:56:10.003

1.  是的。我的猜测是你在一些*调试*环境（如 Firebug、jsFiddle 等）中执行该代码，这会将该代码隐式包装到一个范围内

2.  您将值传递给`2`该自动执行的匿名函数，然后通过本地参数访问该值`foo`。由于*作用域链查找*总是在*bottom->up*中工作，因此对该变量名的解析将在本地作用域停止，该作用域`foo`是作为参数找到的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T17:56:41.263

1.  `window.foo === '1'`, 除非你在另一个函数中运行它。
2.  `foo === '2'`在闭包内部，因为您声明`foo`为函数的输入参数。`foo`如果您尚未决定声明具有相同名称的局部范围变量，则可以访问全局范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T18:00:03.073

1.  是的。可能您看到该变量`foo`是`undefined`因为您在诸如 firebug 或 jsfiddle 的调试环境中运行脚本（相关[https://stackoverflow.com/a/11572991/975520](https://stackoverflow.com/a/11572991/975520)）
2.  不，参数`foo`覆盖变量`foo`。但它仍然是一个全局变量，因此您可以将其用作`window.foo`.

# ms-access - Access 2007 - 在报告中使用另一个方程中的方程的结果

> ID：16221449
> 
> 赞同：0
> 
> 时间：2013-04-25T17:52:36.627
> 
> 标签：ms-access

我插入了三个文本框来测试它是如何工作的： Text81: =1 Text82: =2 Text83: 我希望这个文本框是 Text81 和 Text82 的总和

在此先感谢您对我认为非常简单的问题的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:26:26.897

有几个选项浮现在脑海中。

首先，您始终可以修改报告的数据源以包含计算字段。

其次，这就是您的问题所在，您可以执行以下操作：

=[文本81] + [文本82]

如果 Text81 和 Text82 是报表数据源中的数据字段名称，则在输入到 TextBox 的控制源时应该可以工作。如果不是，您会将相应的数据字段名称放在方括号 [] 中

希望这可以帮助

# python - 使用 psycopg2 连接到 MusicBrainz 数据库的问题

> ID：16221450
> 
> 赞同：0
> 
> 时间：2013-04-25T17:52:41.283
> 
> 标签：python, postgresql, psycopg2, musicbrainz

我正在尝试使用 psycopg2 python 的模块连接到 MusicBrainz 数据库。我已按照[http://musicbrainz.org/doc/MusicBrainz_Server/Setup](http://musicbrainz.org/doc/MusicBrainz_Server/Setup)上的说明进行操作，但无法成功连接。特别是我正在使用以下小脚本：

```
import psycopg2
conn = psycopg2.connect( database = 'musicbrainz_db', user= 'musicbrainz', password = 'musicbrainz', port = 5000, host='10.16.65.250')
print "Connection Estabilished" 
```

问题是当我启动它时，它永远不会到达打印语句，并且控制台（我在 linux 上）被无限期地阻塞。它甚至没有捕捉到 ctrl-c 杀死，所以我必须在另一个控制台中杀死 python 本身。什么会导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T10:09:11.670

您似乎误认为 MusicBrainz-Server 只是数据库。在端口 5000 上运行的是 Web 服务器。您可以`http://10.16.65.250:5000`在浏览器中访问。

Postgres 也在运行，但会监听`localhost:5432`. 这有效：

```
import psycopg2
conn = psycopg2.connect(database="musicbrainz_db",
                        user="musicbrainz", password="musicbrainz",
                        port="5432", host="localhost")
print("Connection established") 
```

为了使 postgres 侦听的不仅仅是 localhost，您需要更改`listen_addresses`并`/etc/postgresql/9.1/main/postgres.conf`为您的（客户端）主机或网络在`/etc/postgresql/9.1/main/pg_hba.conf`.

我的虚拟机在 192.168.1.0/24 网络中运行，所以我`listen_addresses='*'`在 postgres.conf 和 pg_hab.conf 中设置：

```
host    all             all             192.168.1.0/24          trust 
```

我现在可以从本地网络连接到 VM 中的数据库。

* * *

根据您的实际需要，您可能不想通过 postgres 连接到 MusicBrainz 服务器。您可以在 VM 中访问MusicBrainz [Web 服务。](http://musicbrainz.org/doc/Development/XML_Web_Service/Version_2)示例： `http://10.16.65.250:5000/ws/2/artist/c5c2ea1c-4bde-4f4d-bd0b-47b200bf99d6`。在这种情况下，您可能对处理数据的库感兴趣： [python-musicbrainzngs](http://python-musicbrainzngs.readthedocs.org/)。

编辑：您需要设置`musicbrainzngs.set_hostname("10.16.65.250:5000")`musicbrainzngs 以连接到本地 VM。

# mysql - 我无法在表中创建外键 - #1005

> ID：16221455
> 
> 赞同：0
> 
> 时间：2013-04-25T17:52:44.130
> 
> 标签：mysql, key, innodb

*#1005 - 无法创建表 'forum.#sql-da8_f' (errno: 150)*

当我想对表应用外键约束时，我不断收到此错误。我不知道可能是什么问题。我了解到，需要使用 InnoDB 才能在 Mysql 上使用 FOREIGN KEY。Mysql不是默认自带的吗？

顺便说一句，这里

```
ALTER TABLE boards
ADD FOREIGN KEY (CategoryId)
REFERENCES categories(CategoryId) 
```

编辑：这是我创建表的方式

```
CREATE TABLE IF NOT EXISTS `boards` (
  `BoardId` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `CategoryId` int(11) DEFAULT '0',
  `ChildLevel` int(11) DEFAULT '0',
  `ParentId` int(11) DEFAULT '0',
  `BoardOrder` int(11) DEFAULT '0',
  `LastMessageId` int(11) DEFAULT '0',
  `MessageUpdatedId` int(11) DEFAULT '0',
  `Groups` varchar(255) DEFAULT '',
  `ProfileId` int(11) DEFAULT '0',
  `BoardName` varchar(255) DEFAULT '',
  `BoardDescription` text,
  `NumberOfTopics` int(11) DEFAULT '0',
  `NumberOfPosts` int(11) DEFAULT '0',
  `CountPosts` int(11) DEFAULT '0',
  `HiddenPosts` int(11) DEFAULT '0',
  `HiddenTopics` int(11) DEFAULT '0',
  PRIMARY KEY (`BoardId`),
  UNIQUE KEY `BoardId` (`BoardId`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

这是我的“类别”表：

```
CREATE TABLE IF NOT EXISTS `categories` (
  `CategoryId` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `CategoryOrder` int(11) DEFAULT '0',
  `CategoryName` varchar(255) NOT NULL DEFAULT '',
  PRIMARY KEY (`CategoryId`),
  UNIQUE KEY `CategoryId` (`CategoryId`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=56 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:15:04.940

问题是，类型不匹配：您的主键 on`categories`是`bigint unsigned`而您的外键 in`boards`是 type `int`。例如更改`boards`表格：

```
CREATE TABLE IF NOT EXISTS `boards` (
  `BoardId` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `CategoryId` bigint(20) unsigned DEFAULT '0',
  -- ...
) 
```

[看这个演示。](http://sqlfiddle.com/#!2/1e5d6)

# c++ - c++11在类定义中为可变大小std::array创建数据成员

> ID：16221456
> 
> 赞同：2
> 
> 时间：2013-04-25T17:52:49.830
> 
> 标签：c++, arrays, variables, c++11, parameters

我对 std::array 和将它传递给不同的类有点困惑。我想定义一个在其构造函数中接受 std::array 的类，并使用它来设置成员变量。但是，由于数组的大小可能是可变的，我不确定它如何转换为类和成员变量声明。例如：

```
// array_param.h
#include <array>

class ArrayParam
{
  public:
    //constructor?
    ArrayParam(std::array<long, ?>& entries);

    // member variable?
    std::array<long, ?> param_entries;
}; 
```

...和...

```
// array_param.cpp
#include "array_param.h"

ArrayParam::ArrayParam(std::array<long, ?>& entries)
{
  param_entries = entries;
} 
```

这样做的动机是，在我的主程序中，例如，我有两个或更多定义明确且具有已知固定大小的数组。我想对这些不同大小的数组执行相同的操作，因此需要这样一个类来处理任何大小的数组的这些共享操作。

非常感谢任何帮助，非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:59:59.830

的大小`std::array`必须在编译时知道。由于您提到您的数组具有已知的固定大小，因此您可以将数组大小设为模板参数。

```
// array_param.h
#include <array>
#include <cstdlib>

template<std::size_t N>
class ArrayParam
{
  public:
    //constructor?
    ArrayParam(std::array<long, N>& entries);

    // member variable?
    std::array<long, N> param_entries;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:55:07.337

`std::array`在编译时需要知道的长度。

如果没有，请考虑`std::vector`改用。

来自[http://www.cplusplus.com/reference/array/array/](http://www.cplusplus.com/reference/array/array/)

> 数组不保留除了它包含的元素之外的任何数据（甚至不保留它的大小，它是一个模板参数，**在编译时固定**）。

基于此，`ArrayParam`该类可能没有太大用处。我会考虑 typedef'ing 特定类型的数组，例如

```
enum { ArrayLength = 1024 };
typedef std::array< long, ArrayLength >   LongArray;

// use and test
LongArray myArray;
assert( myArray.size() == ArrayLength ); 
```

# c# - 实体框架和部分方法

> ID：16221457
> 
> 赞同：0
> 
> 时间：2013-04-25T17:52:51.627
> 
> 标签：c#, entity-framework, partial-classes

在我的实体框架模型中，我有该列

```
 [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
    [DataMemberAttribute()]
    public Nullable<global::System.Boolean> CanShow
    {
        get
        {
            return _CanShow;
        }
        set
        {
            OnCanShowChanging(value);
            ReportPropertyChanging("CanShow");
            _CanShow = StructuralObject.SetValidValue(value);
            ReportPropertyChanged("CanShow");
            OnCanShowChanged();
        }
    }
    private Nullable<global::System.Boolean> _CanShow;
    partial void OnCanShowChanging(Nullable<global::System.Boolean> value);
    partial void OnCanShowChanged(); 
```

通过使用部分类，我想在`OnCanShowChanging`方法中添加一些业务逻辑

为此，我尝试了以下代码：

```
public partial class MyTable
{
    partial void OnCanShowChanging(bool? value)
    {
        if (some_condition)
        {
            this.CanShow = value;
        }
        //else -> avoid column data change
    }
} 
```

但我明白了`StackOverflowException`

我是那种场景的新手（使用实体框架的部分方法），如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:56:51.863

你不能`CanShow`从里面设置`OnCanShowChanging`。

call 的设置器，它再次调用设置器，再次调用`CanShow`......等等。无限循环，直到溢出堆栈。`OnCanShowChanging``OnCanShowChanging`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T17:57:24.000

您的代码有一个 ciclic 调用。每当您为 CanShow 分配一个值时，它都会一次又一次地触发 OnCanShowChanging。修改您的逻辑并修复该重复调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T19:27:19.313

`OnCanShowChanging`设置时递归调用`CanShow`。处理此问题的更好方法可能是执行以下操作：

```
 public partial class MyTable
    {
        private bool blockOnCanShowChanging = false;

        partial void OnCanShowChanging(bool? value)
        {
            if (blockOnCanShowChanging)
            {
                return; //Recursive call...just return
            }

            if (some_condition)
            {
                //Turn on bool to avoid recusive call
                blockOnCanShowChanging = true;

                this.CanShow = value;

                //reset bool to allow subsequent calls to OnCanShowChanging
                blockOnCanShowChanging = false;
            }

            //else -> avoid column data change
        }
    } 
```

# algorithm - 如何数值测试振荡曲线的稳定性？

> ID：16221465
> 
> 赞同：0
> 
> 时间：2013-04-25T17:53:31.773
> 
> 标签：algorithm, matlab, signal-processing, differential-equations

我现在有一条振荡曲线，它是一组非线性常微分方程解的一部分。随着时间的推移，我需要测试这条曲线的稳定性/收敛性。用matlab怎么做？

该图如下所示： ![在此处输入图像描述](https://i.stack.imgur.com/qMMCk.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:59:25.477

自从我做这样的事情以来已经八年了，所以对我的回答持保留态度。

1.  使用步长 S 和步长 S/2 求解方程；如果结果匹配（即在机器 epsilon 或 10x 机器 epsilon 内，或者您正在定义“匹配”这个词），那么您最好继续截断错误
2.  使用标准浮点算术求解方程，也使用扩展精度算术求解它们（IIRC Matlab 称之为可变精度算术；IEEE 双精度算术使用 52 位有效数，因此 80 位有效数应该绰绰有余显示由于舍入误差导致的不稳定性）；如果结果匹配，那么你可以继续舍入错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:36:58.100

结果我使用了以下脚本，它对我来说很好，但我仍然想知道，有没有更好的方法来预测长时间的收敛。

```
function err = stability_test(t, y)
% Given data of an oscillating curve y(t), tell whether the oscillation 
%   amplitude decrease or not by 
%   1\. locating peaking points
%   2\. linear fit peak points and see if the gradient is negative or not
%
% t, y must be of the same shape
% err = 0, non-ocillating
%     < 0, stable
%     > 0, unstable
nt = linspace(min(t), max(t), 500);
ny = interp1(t,y,nt,'spline');
ndy = gradient(ny,nt);
ndy2 = del2(ny,nt);
if(isempty(find(ndy<0, 1)) || isempty(find(ndy2>0, 1)))
    err = 0;
else
    ndt = nt(2) - nt(1);
    ii = find(abs(ndy)<abs(ndt*ndy2*2) & ndy2<0);

    if(isempty(ii))
        err = 0;
    else
        if(length(ii)==1)
            ii = [ii,length(ndy)];
        end
        ym = ny(ii);
        tm = nt(ii);
        p = polyfit(tm, ym,1);
        err = p(1);
    end
end 
```

# c# - 将浮点变量写入标签

> ID：16221467
> 
> 赞同：1
> 
> 时间：2013-04-25T17:53:32.297
> 
> 标签：c#, aforge

我使用这个[http://aforge.googlecode.com/svn/trunk/Samples/Imaging/ShapeChecker/MainForm.cs](http://aforge.googlecode.com/svn/trunk/Samples/Imaging/ShapeChecker/MainForm.cs)代码，但我需要在变量中写入值：中心、半径角和标签。但`ProcessImage(Bitmap bitmap)`需要位于class2和class1列表中。

如何将这些变量从 Class 2 获取到 Class 1，并在它们转储到文本框中时？

```
class class1
{

    AForge.Point center;
    float radius;
    List<IntPoint> corners;      

    private void ProcessImage( Bitmap bitmap )
    { 
     ...
    }
}

class class2
{
 ??? label1.Text = center + radius + corners... ???
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:57:42.067

将您想要从 class1 中获取的数据字段标记为公开。然后，在 class2 中，基于 class1 实例化一个对象，您将可以访问这些数据字段。您可以通过应用内置的 .ToString() 方法来转换浮点数和点数。您需要遍历列表，然后调用 IntPoint.ToString() 方法。

```
class class1
{

    public AForge.Point center;
    public float radius;
    public List<IntPoint> corners;      

    private void ProcessImage( Bitmap bitmap )
    { 
     ...
    }
}

class class2
{
    class1 myClass1 = new class1();
    private void setTextLabel()
    {
        label1.Text = myClass1.center.ToString();
        label1.Text += myClass1.radius.ToString();
        foreach (IntPoint ip in myClass1.corners)
        {
            label1.Text += ip.X.ToString();
            label1.Text += ", ";
            label1.Text += ip.Y.ToString();
        }
    }
} 
```

下面找到了一个完整的工作实现。我将其作为一个网络项目进行。
Class1.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using AForge;

namespace stack_question
{
    public class Class1
    {
        public AForge.Point center;
        public float radius;
        public List<IntPoint> corners;

        public Class1()
        {
            center = new AForge.Point(3.3F, 4.4F);
            radius = 5.5F;
            corners = new List<IntPoint>();

            corners.Add(new IntPoint(6, 7));
            corners.Add(new IntPoint(8, 9));
        }
    }
} 
```

Class2.aspx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using AForge;

namespace stack_question
{
    public partial class Class2 : System.Web.UI.Page
    {
        Class1 myClass1 = new Class1();

        protected void Page_Load(object sender, EventArgs e)
        {
            setTextLabel();
        }

        private void setTextLabel()
        {

            label1.Text += "Center: " + myClass1.center.ToString() + "<br/>";
            label1.Text += "Radius: " + myClass1.radius.ToString() + "<br/>";
            foreach (IntPoint ip in myClass1.corners)
            {
                label1.Text += "IntPoint: " + ip.X.ToString();
                label1.Text += ", ";
                label1.Text += ip.Y.ToString() + "<br/>";
            }
        }
    }
} 
```

最后，Class2.aspx：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Class2.aspx.cs" Inherits="stack_question.Class2" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Label ID="label1" runat="server" Text=""></asp:Label>
    </div>
    </form>
</body>
</html> 
```

网页上的输出如下所示：

```
Center: 3.3, 4.4
Radius: 5.5
IntPoint: 6, 7
IntPoint: 8, 9 
```

# ruby-on-rails - 集成测试最佳实践

> ID：16221473
> 
> 赞同：2
> 
> 时间：2013-04-25T17:53:54.070
> 
> 标签：ruby-on-rails, testing, integration-testing

我查看了stackoverflow，可以解决[一](https://stackoverflow.com/questions/1328730/integration-testing-best-practices)[两个](https://stackoverflow.com/questions/7433627/integration-test-best-practice)与这个标题相似的问题，但没有一个能回答我的问题。对不起，如果这是重复的。

在统一测试中，有一条指南说“[每个测试一个断言](http://blog.jayfields.com/2007/06/testing-one-assertion-per-test.html)”。通过阅读 stackoverflow 和互联网，人们普遍认为这个规则可以放宽一点，但是每个单元测试都应该测试代码的一个方面，或者一个行为。这很有效，因为当测试失败时，您可以立即看到失败的原因并修复它，该测试很可能在未来的其他时间不会再次失败。

这适用于 Rails 单元测试，我也一直在使用它进行功能测试，没有任何问题。但是当涉及到集成测试时，在测试中应该有很多断言有点隐含。除此之外，他们通常会重复在功能测试和单元测试中已经完成一次的测试。

那么，在这两个因素中编写集成测试时，哪些被认为是好的做法：

1.  **集成测试的长度**：如何衡量何时应该将集成测试一分为二？请求数？或更大总是更好
2.  **集成测试的断言数量**：是否应该每次都重复单元测试和功能测试中关于系统当前状态的断言，还是应该只有 5 个左右的断言来测试是否生成了正确的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T14:45:34.967

希望有人会提供更权威的答案，但我的理解是集成测试应该围绕特定功能构建。例如，在在线商店中，您可能会编写一个集成测试以确保可以将商品添加到您的购物车，并编写另一个集成测试以确保可以结帐。

> 集成测试应该多长时间？

只要覆盖一个功能，就没有更多了。有些功能很小，有些很大，它们的大小是一个品味问题。当它们太大时，它们可以很容易地分解成几个逻辑子特征。当它们太小时，它们的集成测试看起来像视图或控制器测试。

> > 他们应该有多少断言？

尽可能少，同时仍然有用。对于所有测试都是如此，但对于集成测试来说则是双倍的，因为它们太慢了。这意味着只测试最重要的东西，而尽量不测试其他数据暗示的东西。在结帐功能的情况下，我可能会断言订单是为正确的人创建的并且具有正确的总数，但未测试确切的项目（因为我的架构可能会从项目生成总数）。在此之前我不会做出任何我不必做的断言，因为遍历应用程序——填写这个字段，点击那个按钮，等待这个模式打开——涵盖了我需要测试的所有集成行为，其他任何事情都可以如果它们需要被测试，则被视图测试覆盖。

总的来说，这意味着单元测试往往只有几行长并且前面有一个更大的设置块，Rails 集成测试往往有十几行或更多（其中大部分是交互），并且缺乏完全设置块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T00:00:40.353

**集成测试的长度：**我同意这里的长度并不重要。它更多的是关于您正在测试的功能以及测试它需要多少步骤。例如，假设您正在测试一个创建项目的五个步骤的向导。如果相关数据出现在屏幕上，我会将所有五个步骤放在一个测试结束检查中。但是，如果向导允许需要涵盖的不同场景，我会拆分测试。

**集成测试的断言数量：**不要测试已经在其他测试中测试过的东西，但**要确保满足用户的期望。**所以测试一下，用户希望在屏幕上看到的不是后端特定的代码。有时您可能仍需要检查数据库中的正确数据，例如当它不应该出现在屏幕上时。

# python - 如何使用列表中的正则表达式清理字符串

> ID：16221477
> 
> 赞同：-2
> 
> 时间：2013-04-25T17:54:11.537
> 
> 标签：python, regex

在可能采用以下形式的每种文件名中：

*   String1_Todelete_restofstring.txt
*   String2_Alsostoremove_restofstring.txt
*   String3_2013_restofstring.txt
*   String4_2011_restofstring.txt
*   String5_restofstring_tosuppress.txt

我想用*re.sub*定义一个函数来删除列表中定义的所有关键字，（或任何字典）包括：

> “Todelete”，2013，2011，“Alsoremove”，“tosuppress”

这样，上面的示例（可能包括不同的日期）将变为：

*   String1_restofstring.txt
*   String2_restofstring.txt
*   String3_restofstring.txt
*   String4_restofstring.txt
*   String5_restofstring.txt

请指教

___编辑 _

感谢您提供有用的答案。我发现 Cobabunga 的实现很紧凑，可以在一个函数中实现。关于评论中的问题，我的意图是让问题尽可能通用，以允许各种解决方案，甚至考虑到我认为它也可以在正则表达式中实施的日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T01:27:51.783

您可以构建一个正则表达式，其中包含您要删除的所有单词，如下所示：

```
import re

to_remove = ["Todelete", "2013", "2011", "Alsotoremove", "tosuppress"]
pattern = "|".join("_?" + re.escape(x) for x in to_remove)

names = ["String1_Todelete_restofstring.txt",
         "String2_Alsotoremove_restofstring.txt",
         "String3_2013_restofstring.txt",
         "String4_2011_restofstring.txt",
         "String5_restofstring_tosuppress.txt"]

names_replaced = [re.sub(pattern, "", x) for x in names]
print names_replaced 
```

请注意，我在每个被替换的单词之前都包含了一个可选的下划线（'_'），因为如果你只`Todelete`在第一个示例中替换，你最终会得到`String1__restofstring.txt`而不是`String1_restofstring.txt`.

对于您的特定示例，这`re.escape`不是必需的，但是如果您的单词包含在正则表达式中具有特殊含义的任何字符，那么如果没有它，您会得到意想不到的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:16:43.277

这有效：

```
import re

st='''\
String1_Todelete_restofstring.txt
String2_Alsotoremove_restofstring.txt
String3_2013_restofstring.txt
String4_2011_restofstring.txt
String5_restofstring_tosuppress.txt'''

deletions=["Todelete", '2013','2011', "Alsotoremove","tosuppress"]

for line in st.splitlines():
    for deletion in deletions:
        if re.search('_'+deletion,line):
            line=re.sub('_'+deletion,'',line)
    print line 
```

**编辑**

正如评论中指出的那样，这`re.search`是多余的。

此外，在特定情况下， str.replace*更快*：

```
import re
import timeit 

st='''\
String1_Todelete_restofstring.txt
String2_Alsotoremove_restofstring.txt
String3_2013_restofstring.txt
String4_2011_restofstring.txt
String5_restofstring_tosuppress.txt'''

deletions=["Todelete", '2013','2011', "Alsotoremove","tosuppress"]

def rep():
    for line in st.splitlines():
        for deletion in deletions:
            line=line.replace('_'+deletion,'')

def reg():
    for line in st.splitlines():
        for deletion in deletions:
            line=re.sub('_'+deletion,'',line)            

print timeit.timeit('reg()', setup='from __main__ import reg', number=10000)     
print timeit.timeit('rep()', setup='from __main__ import rep', number=10000) 
```

在我的机器上，`str.replace()`大约快 5 倍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T18:46:58.173

这可能比扫描每个字符串的次数与您拥有关键字的次数一样高效。

```
import re

strings = """String1_Todelete_restofstring.txt
String2_Alsotoremove_restofstring.txt
String3_2013_restofstring.txt
String4_2011_restofstring.txt
String5_restofstring_tosuppress.txt""".split()

keywords = set(("Todelete", "2013","2011", "Alsotoremove","tosuppress"))

for s in strings:
    print re.sub("_[^_.]+", lambda m: "" if m.group(0)[1:] in keywords else m.group(0), s) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T18:09:39.937

给你一个想法（不长，因为我在我的手机上）；

```
/(.*?)_.*?_(.*?)\.(\w{2,})/

group(1) + '_' + group(2) + '.' + group(3) 
```

# function - 如何在后台运行 bourne shell 函数

> ID：16221478
> 
> 赞同：0
> 
> 时间：2013-04-25T17:54:12.150
> 
> 标签：function, parallel-processing, sh

情况就是这样，我有其他人编写的可执行文件随机死亡，解决它的方法是重新启动作业最多 3 次（总共 4 次）。我还需要并行运行 6 个具有不同输入的可执行文件副本。可执行文件也可能需要数小时才能运行。可执行文件通过 bourne shell 脚本运行（不是 bash，由于遗留原因，我无法切换到 bash 或其他 shell）。目前，bourne shell 脚本同时启动 6 个运行，等待它们全部完成或死亡，然后重新启动任何已经死亡的，并等待它们全部完成或死亡，然后重新启动任何已经死亡的时间等等。

我的想法是在 bourne shell 脚本中编写一个函数，该函数启动 6 次运行中的 1 次，等待它完成或死亡，如果它死亡，立即重新启动该运行，同时使用 while 循环调用启动/重新启动函数一个 & 让它在后台运行，并在 while 循环结束后等待，让它等到 launch-relaunch 函数的所有并行执行完成，然后并行处理脚本的其余部分。

这没有按预期运行。它似乎在后台并行运行启动/重新启动功能的所有副本，但 while 循环结束时的等待并没有延迟脚本其余部分的执行，因为逻辑检查了一个它由可执行文件生成的文件。

所以有人可以通过提供一个示例脚本来帮助我，说明如何并行启动 6 个可执行文件，并且每个可执行文件在完成后立即重新启动 3 次，假设可执行文件采用一个命令行参数来指示输入文件的名称读入和要写出的输出文件的名称。

谢谢

编辑：这是一个模拟的executable.cpp文件

```
#include <ctime>
#include <cstdlib> //for abort()
#include <cstring> //for strcmp()
#include <iostream>
#include <fstream>
#include <sstream>

int main (int argc, char *argv[])
{ 
  if(argc < 2) {
    //give instructions
    std::cout << "this function requires 1 argument, a process id.\n"
          << "If the optional second command argument has the\n"
          << "value \"die\" the run will die prematurely." << std::endl;
    return 1;
  }else if(argc>=3) {
    //to test the script we need to give this executable the ability to
    //die on command
    if(strcmp(argv[2],"die")==0) abort();
  }

  time_t t0; //start time
  time_t tc; //current time
  double seconds; //seconds between current time and start time

  time(&t0); //assign value of the start time
  do{
    time(&tc); //assign value of the current time
    seconds=difftime(tc,t0); //compute the time difference in seconds
  } while(seconds<10); //wait until 10 seconds have passed.

  std::ostringstream oss;
  oss << "proc_" << argv[1] << ".output";
  std::ofstream ofs;
  ofs.open(oss.str().c_str(),std::ofstream::out);
  ofs << "this run completed" << std::endl;
  ofs.close();

  return 0;
} 
```

这是一个模拟的 runscript.sh 文件

```
#! /bin/sh -ha
executable_name=$1

#---------------------------------------------------------------------
launch_relaunch_func() {
#---------------------------------------------------------------------
    process_num=$1
    first_attempt_to_not_die=$process_num

    if_my_proc_completed_successfully="no"
    num_attempts_for_my_proc_so_far=0
    max_attempts=4
    second_arg="die"
    output_fname="proc_${process_num}.output"

    while [ "if_my_proc_completed_successfully" = "no" -a \
    ${num_attempts_for_my_proc_so_far} -lt ${max_attempts} ]; do

    num_attempts_for_my_proc_so_far=`expr "${num_attempts_for_my_proc_so_far} + 1"`
    if [ ${num_attempts_for_my_proc_so_far} -ge ${first_attempt_to_not_die} ] ; then
        second_arg="live"
    fi

    ./${executable_name} ${process_num} ${second_arg}

    if [ -s ${output_fname} ] ; then
        if_my_proc_completed_successfully="yes"
    fi
    done

    if [ "if_my_proc_completed_successfully" = "no" ] ; then
    echo "process ${proc_num} failed on all ${max_attempts} attempts"
    echo ${proc_num} >> bad_runs.txt
    return 1
    fi

    echo ${proc_num} >> good_runs.txt
    return 0;
}
#---------------------------------------------------------------------

proc_list="1 2 3 4"
num_procs=4;
for proc in ${proc_list} ; do
    (launch_relaunch_func $proc) &
done 
wait

if [ `ls -1 proc_[0-9].output 2>/dev/null | wc -l` -eq $num_procs ] ; then
    echo "all runs completed successfully"
    rm -f good_runs.txt bad_runs.txt
else
    printf "Success: %d Failed: %d\n" `wc -l good_runs.txt | cut -d \  -f 1` `wc -l bad_runs.txt | cut -d \  -f 1`
    exit 2
fi
exit 0 
```

谢谢

# android - 推荐使用 Sherlock Action Bar？

> ID：16221484
> 
> 赞同：3
> 
> 时间：2013-04-25T17:54:21.057
> 
> 标签：android, actionbarsherlock

我正在开发一个 android 项目，我将在其中使用**TabHost**、**Fragment**和**ViewPager**实现选项卡布局。顺便说一句，我找到了一些关于**Sherlock Action Bar**的教程，这是我的问题：“本机”代码更好，还是使用这个库？

你对这个话题有什么经验？你的建议是什么？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T18:04:30.270

如果您要针对 Android SDK 版本 < 11 (Honeycomb 3.0)，ActionBarSherlock 绝对比 ActionBarCompat 更好，ActionBarCompat 是 Google 提供的向后兼容的官方解决方案。否则，如果您仅使用 >= 11 的 API 进行开发，请使用默认的 ActionBar，因为 ABS 仅实现此功能。

[在这里](http://corner.squareup.com/2012/05/actionbarsherlock-as-a-base.html)，您可以找到由 Jake Wharton（ABS 的开发者）撰写的一篇文章，他在其中讨论了不同的 ActionBar 解决方案的优缺点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:11:12.030

## 简短的回答：

如果您希望您的应用程序看起来一样，包括操作栏......那么是的。它不被反对，**谷歌**一直提到 ABS。从 Google I/O 到纽约的聚会。ABS 始终是获​​得与旧设备/版本兼容的推荐方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:04:46.413

Sherlock Action Bar 仅提供对 API 10 及更低版本的向后支持。在此之上，您应该使用 Action Bar，因为它是在 API 11 (3.0) 中添加的。因此，要回答您的问题，如果您的目标是 API 11 及更高版本，请使用本机 Action Bar，否则您将不得不使用 Action Bar Sherlock 来获得该外观。

以下是两者的网站：

[操作栏](http://developer.android.com/guide/topics/ui/actionbar.html)

和

[动作条夏洛克](http://actionbarsherlock.com/)

# c# - 与字符串列表相比按字符串排序

> ID：16221487
> 
> 赞同：0
> 
> 时间：2013-04-25T17:54:35.460
> 
> 标签：c#, linq, list, linq-to-sql, dictionary

我正在尝试使用某种模式订购一些数据，并且需要一些帮助来弄清楚如何做到这一点。我还没有看到在 orderby 子句中使用 linq 查询的任何示例，并且不确定如何在这种情况下对数据进行排序：

```
public IList<UserEventModel> GetListData(IDictionary<string, IList<string>> criteria, IEnumerable<UserEventModel> subscriptions)
{
    subscriptions = subscriptions.OrderBy(x => x.EntityType);
} 
```

寻找附加到 EntityType 的扩展，以与键 [2] 处的“标准”值对的内容进行比较，例如`x => x.EntityType.?`（指定的值集合）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:58:19.640

你几乎是对的。追加列表并尝试

```
 subscriptions = subscriptions
                   .OrderBy(x => x.EntityType).ToList(); 
```

# sql-server - T-SQL 按最早日期和唯一类别选择行

> ID：16221488
> 
> 赞同：1
> 
> 时间：2013-04-25T17:54:42.527
> 
> 标签：sql-server, tsql, greatest-n-per-group

我正在使用 Microsoft SQL。我有一个表，其中包含按两个不同类别和日期存储的信息。例如：

```
ID   Cat1   Cat2   Date/Time   Data  
1    1      A      11:00       456
2    1      B      11:01       789
3    1      A      11:01       123
4    2      A      11:05       987
5    2      B      11:06       654
6    1      A      11:06       321 
```

我想为 Cat1 和 Cat2 的每个独特组合提取一行，我需要日期最早的行。在上面我想要 ID = 1、2、4 和 5。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T17:59:21.997

[`row_number()`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)在 MSDN 上 看看。

```
SELECT  *
FROM    (
        SELECT  *,
                ROW_NUMBER() OVER (PARTITION BY col1, col2 ORDER BY date_time, id) rn
        FROM    mytable
        ) q
WHERE   rn = 1 
```

[（在SQL Fiddle](http://www.sqlfiddle.com/#!3/668a0/1)上运行代码）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T23:20:19.673

Quassnoi 的[回答](https://stackoverflow.com/a/16221569/263232)很好，但我对它处理重复数据的方式有点不舒服。它似乎根据插入顺序返回，但我不确定是否可以保证？（参见这两个小提琴的示例，其中结果根据插入顺序而变化：[dup at the end](http://www.sqlfiddle.com/#!3/87a09/1) , [dup at the beginning](http://www.sqlfiddle.com/#!3/d77ca/1)）

另外，我有点喜欢尽可能使用老式 SQL，所以我会这样做（请参阅[this fiddle](http://www.sqlfiddle.com/#!3/9ce68/1)了解它如何处理重复数据）：

```
select *
from my_table t1
  left join my_table t2
    on t1.cat1 = t2.cat1
    and t1.cat2 = t2.cat2
    and t1.datetime > t2.datetime
where t2.datetime is null 
```

# jquery - 根据相应的单选按钮启用输入

> ID：16221489
> 
> 赞同：0
> 
> 时间：2013-04-25T17:54:43.307
> 
> 标签：jquery

我有一个表格，其中包含要发送到 CC 处理的金额的多个选项。我希望用户选择付款类型，然后激活金额输入字段。我试图通过将单选按钮的 id 设置为对应于金额输入字段来做到这一点。如何根据选择的单选按钮启用输入金额字段？

HTML

```
<input name="doantion-type" id="general" type="radio" value="General" />
<input name="doantion-type" id="occasion" type="radio" value="Occasion" />
<input name="doantion-type" id="building" type="radio" value="Building" />
<input name="doantion-type" id="program" type="radio" value="Program" />

<input id="general" autocomplete="off" class="input required" type="text" size="30" name="Amount">

<input id="occasion" autocomplete="off" class="input required" type="text" size="30" name="Amount">
<input id="building" type="hidden" value="1000" name="Amount">
<input id="program" type="hidden" value="180" name="Amount"> 
```

jQuery

```
$("input[name=Amount]").prop('disabled', true);

$('input[name=doantion-type]:radio').click(function() {
var selectedDonation = '#' + $(this).attr('id');
//alert(selectedDonation);
$(selectedDonation).prop('disabled', false);

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:03:13.937

尝试这个：

```
$("input[name=Amount]").prop('disabled', true);

$('input:radio[name=doantion-type]').change(function () {
    $("input[name=Amount]").prop('disabled', true);
    var selectedDonation = '#' + $(this).attr('id') + '2';
    $(selectedDonation).prop('disabled', false);
}); 
```

*   `id`问题是您对收音机和文本输入都使用相同的。
*   请始终`id`在 HTML DOM 中使用唯一的。

[**小提琴**](http://jsfiddle.net/RjcvE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:04:48.647

您不能（或至少不应该）这样做，因为 ID 应该是唯一的。此外，隐藏的输入将与表单一起提交，无论它们是否可见。

尝试这样的事情。但是请注意，用户可以更改数字，如果安全很重要，则不应使用此技术。相反，如果选择了“building”或“program”，则应在服务器端设置“Amount”的值。

[http://jsfiddle.net/mblase75/d2Lcd/](http://jsfiddle.net/mblase75/d2Lcd/)

HTML：

```
General 
<input name="donation-type" data-amount="" id="general" type="radio" value="General" />
Occasion
<input name="donation-type" data-amount="" id="occasion" type="radio" value="Occasion" />
Building
<input name="donation-type" data-amount="1000" id="building" type="radio" value="Building" />
Program
<input name="donation-type" data-amount="180" id="program" type="radio" value="Program" />

<br>
Amount:
<input autocomplete="off" id="amount" class="input required" type="text" size="30" name="Amount"> 
```

JS：

```
$('input[name=donation-type]:radio').change(function () {
    var amt = $(this).data('amount'); // from the data-amount attribute
    $('#amount').val(amt).prop('disabled',!!amt); // !! converts to Boolean
}); 
```

[http://api.jquery.com/data](http://api.jquery.com/data)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:04:51.240

由于 ids 应该是唯一的，因此您必须使用其他方法来获取值，我建议使用 data 属性

```
<input name="doantion-type" id="general" data-id="general-amount" type="radio" value="General" />
<input name="doantion-type" id="occasion" data-id="occasion-amount" type="radio" value="Occasion" />
<input name="doantion-type" id="building" data-id="building-amount" type="radio" value="Building" />
<input name="doantion-type" id="program" data-id="program-amount" type="radio" value="Program" />

<input id="general" autocomplete="off" class="input required" type="text" size="30" name="Amount">

<input id="occasion-amount" autocomplete="off" class="input required" type="text" size="30" name="Amount">
<input id="building-amount" type="hidden" value="1000" name="Amount">
<input id="program-amount" type="hidden" value="180" name="Amount"> 
```

```
$('input[name=doantion-type]:radio').click(function() {
    var selectedDonation = '#' + $(this).data('id');
    //alert(selectedDonation);
    $("input[name=Amount]").prop('disabled', true);
    $(selectedDonation).prop('disabled', false);

}); 
```

# ios - iOS 应用程序试图以模态方式呈现一个活动控制器

> ID：16221491
> 
> 赞同：1
> 
> 时间：2013-04-25T17:54:50.730
> 
> 标签：ios, uinavigationcontroller, presentmodalviewcontroller

我正在尝试从另一个视图控制器模态显示一个视图控制器，该视图控制器是 UINavigationController 内的第二个视图。但它不断给出错误和崩溃。应用程序试图以模态方式呈现活动控制器

我不知道这是什么意思。以下是我打电话的方式。

```
UIStoryboard *storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
    FBPreviewPostViewController *previewPostViewController = [storyBoard instantiateViewControllerWithIdentifier:@"FBPreviewPostViewController"];
    previewPostViewController.delegate = self;
    previewPostViewController.selectedImg = selectedImage;
    [self presentViewController:previewPostViewController animated:YES completion:nil]; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T20:00:39.053

该错误表明视图控制器出现了两次，这是不允许的。

我不太了解 Storyboards 和您的应用程序，也许`FBPreviewPostViewController`已经由 Storyboards 呈现。您可以通过检查是否`viewController.isViewLoaded && viewController.view.window`为真来检查它是否在视图层次结构中。

顺便说一句，您正在使用情节提要，为什么不使用 segue？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:06:20.337

你可以试试下面的代码

```
NSString *stbName = [[NSBundle mainBundle].infoDictionary  objectForKey:@"MainStoryboard_iPhone"];
UIStoryboard *Mainstoryboard = [UIStoryboard storyboardWithName:stbName bundle:nil];
FBPreviewPostViewController *previewPostViewController = [Mainstoryboard instantiateViewControllerWithIdentifier:@"FBPreviewPostViewController"];
previewPostViewController.delegate = self;
previewPostViewController.selectedImg = selectedImage;
[self presentModalViewController:previewPostViewController animated:YES]; 
```

# msbuild - TeamCity 构建失败

> ID：16221503
> 
> 赞同：5
> 
> 时间：2013-04-25T17:55:26.463
> 
> 标签：msbuild, teamcity

今天我尝试了很多方法来让我的构建在 Teamcity 中工作，但无济于事。

这是我的设置。

我在 TeamCity 中有 2 个构建配置

1.  `Build Solution`
2.  `Build Deployment Package Debug`

`Build Solution`由 SVN 签入触发并构建解决方案文件。此配置工作正常。

`Build Deployment Package Debug`有`Build Solution`作为它的依赖，并且有两个（MSBuild）构建步骤。该解决方案包含两个网站：一个前端网站和一个管理员网站。一个构建步骤构建前端站点，另一个构建管理站点。最终结果是将合并的结果放入一个 zip 文件中，以便部署到部署服务器（我还没有涉及到这一点）。

我遇到的问题是`Build Deployment Package Debug`配置无法尝试构建第一个站点。这是错误：

```
[18:40:25]Step 1/2: Web (MSBuild) (29s)
[18:40:28][Step 1/2] x.Web\x.Web.csproj.teamcity: Build target: Build (27s)
[18:40:50][x.Web\x.Web.csproj.teamcity] MvcBuildViews (4s)
[18:40:50][MvcBuildViews] AspNetCompiler (4s)
[18:40:55][AspNetCompiler] C:\BuildAgent\work\252ec59002ecc2d\x.Web\obj\debug\csautoparameterize\original\web.config(39, 0): error ASPCONFIG: It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS.
[18:40:55][x.Web\x.Web.csproj.teamcity] Project x.Web\x.Web.csproj.teamcity failed.
[18:40:55][Step 1/2] Step Web (MSBuild) failed 
```

这是构建参数->系统属性

```
Name    Value
system._PackageTempDir   c:\deploypackage
system.Configuration     Debug
system.CreatePackageOnPublish    True
system.DeployIisAppPath  Debug
system.DeployOnBuild     True
system.PackageLocation   c:\buildshares\Debug\Debug.zip 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-26T14:39:43.487

这是我为解决这个问题所做的

我的项目文件中已经有了这个

```
<Target Name="MvcBuildViews" AfterTargets="AfterBuild" Condition="'$(MvcBuildViews)'=='true'">
    <AspNetCompiler VirtualPath="temp" PhysicalPath="$(WebProjectOutputDir)" />
</Target> 
```

但我也需要添加这个

```
<Target Name="AfterBuild">
    <RemoveDir Directories="$(BaseIntermediateOutputPath)" />
</Target> 
```

这样做解决了这个问题。

我希望这对将来在 TeamCity 工作的其他人有所帮助。

# android - mediaplayer（）中的实时音频口吃？

> ID：16221504
> 
> 赞同：0
> 
> 时间：2013-04-25T17:55:28.450
> 
> 标签：android, media-player, live-streaming

我是安卓新手。我正在制作一个实时音频流应用程序（来自 URL 的流）。一旦我点击播放，音频就会播放，但大约每半秒就会出现一次口吃。我检查了计算机上的实时音频 URL，它可以完美播放。我在我正在制作的另一个音频流应用程序中检查了它，使用相同的模拟器，它在那里也能完美播放。流媒体文件是 .mp3。我已经添加了代码。

```
 public class StreamAudioFromUrlSampleActivity extends Activity implements OnClickListener, OnTouchListener, OnCompletionListener, OnBufferingUpdateListener{
    private Button btn_play,
                    btn_pause,
                    btn_stop;
    //private SeekBar seekBar;
    private MediaPlayer mediaPlayer;
    private int lengt

hOfAudio;
    private final String URL = "**some url**";
    //private final Handler handler = new Handler();
    /*private final Runnable r = new Runnable() {   
        @Override
        public void run() {
            //updateSeekProgress();                 
        }
    };*/

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        init();mediaPlayer = new MediaPlayer();
    }

    private void init() {
        btn_play = (Button)findViewById(R.id.btn_play);
        btn_play.setOnClickListener(this);
        btn_pause = (Button)findViewById(R.id.btn_pause);
        btn_pause.setOnClickListener(this);
        btn_pause.setEnabled(false);
        btn_stop = (Button)findViewById(R.id.btn_stop);
        btn_stop.setOnClickListener(this);
        btn_stop.setEnabled(false);

        //seekBar = (SeekBar)findViewById(R.id.seekBar);
        //seekBar.setOnTouchListener(this);

        //mediaPlayer.setOnBufferingUpdateListener(this);
        //mediaPlayer.setOnCompletionListener(this);

    }

    @Override
    public void onBufferingUpdate(MediaPlayer mediaPlayer, int percent) {
        //seekBar.setSecondaryProgress(percent);
    }

    @Override
    public void onCompletion(MediaPlayer mp) {
        btn_play.setEnabled(true);
        btn_pause.setEnabled(false);
        btn_stop.setEnabled(false);
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (mediaPlayer.isPlaying()) {
            //SeekBar tmpSeekBar = (SeekBar)v;
            //mediaPlayer.seekTo((lengthOfAudio / 100) * tmpSeekBar.getProgress() );
        }
        return false;
    }

    @Override
    public void onClick(View view) {

        try {
            mediaPlayer.setDataSource(URL);
            mediaPlayer.prepare();
            //lengthOfAudio = mediaPlayer.getDuration();
        } catch (Exception e) {
            Log.e("Error", "error"+e);
        }

        switch (view.getId()) {
        case R.id.btn_play:
            playAudio();
            break;
        case R.id.btn_pause:
            pauseAudio();
            break;
        case R.id.btn_stop:
            stopAudio();
            break;
        default:
            break;
        }

        //updateSeekProgress();
    }

    private void updateSeekProgress() {
        if (mediaPlayer.isPlaying()) {
            //seekBar.setProgress((int)(((float)mediaPlayer.getCurrentPosition() / lengthOfAudio) * 100));
        //  handler.postDelayed(r, 1000);
        }
    }

    private void stopAudio() {
        mediaPlayer.stop();
        btn_play.setEnabled(true);
        btn_pause.setEnabled(false);
        btn_stop.setEnabled(false);
        mediaPlayer.release();
        //seekBar.setProgress(0);
    }

    private void pauseAudio() {
        mediaPlayer.pause();
        btn_play.setEnabled(true);
        btn_pause.setEnabled(false);
    }

    private void playAudio() {try{
        Thread.sleep(10000);}catch(InterruptedException x){}
        mediaPlayer.start();
        btn_play.setEnabled(false);
        btn_pause.setEnabled(true);
        btn_stop.setEnabled(true);
    }
} 
```

# eclipse - bufferuntil('\n) 不会触发 eclipse 的串行事件处理

> ID：16221513
> 
> 赞同：0
> 
> 时间：2013-04-25T17:56:00.073
> 
> 标签：eclipse, arduino, processing, processing-ide

我想做最简单的事情，用处理软件从 Arduino 的串行端口绘制图形。我使用日食。

我按照教程所说的插件做了。我还复制了来自 arduino 网站的代码：

```
import processing.serial.*;

Serial myPort;        // The serial port
int xPos = 1;         // horizontal position of the graph

void setup () {

  // set the window size:
  size(400, 300);        

  // List all the available serial ports
  println(Serial.list());

  // I know that the first port in the serial list on my mac
  // is always my  Arduino, so I open Serial.list()[0].
  // Open whatever port is the one you're using.
  myPort = new Serial(this, Serial.list()[0], 9600);

  // don't generate a serialEvent() unless you get a newline character:
  myPort.bufferUntil('\n');

  // set inital background:
   background(0);

}

 void draw () {
   // everything happens in the serialEvent()
 }

void serialEvent (Serial myPort) {

  // get the ASCII string:
  String inString = myPort.readStringUntil('\n');

  if (inString != null) {

    // trim off any whitespace:
    inString = trim(inString);

    // convert to an int and map to the screen height:
    float inByte = float(inString);
    inByte = map(inByte, 0, 1023, 0, height);

    // draw the line:
    stroke(127,34,255);
    line(xPos, height, xPos, height - inByte);

    // at the edge of the screen, go back to the beginning:
    if (xPos >= width) {

      xPos = 0;
      background(0);

    }
    else {

       // increment the horizontal position:
       xPos++;

    }

  }

} 
```

存在bufferUntil('\n')没有触发serialevent的问题。

我知道有一个错误案例，您尝试将 8 位 int 设置为 32 位 int 它会下地狱。

处理 ide 效果很好。Eclipse 根本不触发。有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:25:34.937

请注意，bufferUntil('\n') 采用整数值。你给它一个字符。至少尝试 bufferUntil(10) 只是为了看看那里是否发生了一些奇怪的事情，但可能值得简单地打印在 myPort 上看到的值，看看当你发送换行符时会发生什么。

# javascript - 通过单击显示具有所需属性的提示

> ID：16221514
> 
> 赞同：2
> 
> 时间：2013-04-25T17:56:03.297
> 
> 标签：javascript, html, required

例如我有一个输入：

`<input type="text" id="username" required></input>`

而且我有一个`<button onclick="test_click()"></button>`.

```
function test_click(){
    //
    // Here i check user input
    // 
} 
```

如果用户输入错误，如何在单击按钮后显示错误提示？我需要执行`oninvalid`事件，我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:33:06.327

通常，我会使用隐藏的 dom 元素来提供这种反馈。究竟要使用哪些 dom 元素取决于您希望错误提示如何出现。

例如，您可以将`<span>`或`<img>`直接放置在 旁边，`<input>`并设置内容以显示错误提示。最初，您希望设置此元素的样式以`display: none;`使其不出现。然后在您的`test_click()`函数中，您可以将样式更改为`display: inline;`or`display: block;`等​​（根据您选择的元素）。

如果您使用的是 jQuery，它可能看起来像这样：

```
function test_click(){
   if (error_condition)
   {
      $("#errorElementID").css("display","inline");
   }
} 
```

如果您不使用 jQuery，它可能看起来更像这样：

```
function test_click(){
   if (error_condition)
   {
      document.GetElementById("errorElementID").style.display = "inline";
   }
} 
```

# javascript - 从 textarea 到 div 的文本具有有限的宽度和高度

> ID：16221515
> 
> 赞同：0
> 
> 时间：2013-04-25T17:56:08.327
> 
> 标签：javascript, jquery, html, json, textarea

我需要将 textarea 中的文本放入受宽度和高度限制的 div 中。这是我的 jsfiddle：http: [//jsfiddle.net/ptCoder/8XL7n/30/](http://jsfiddle.net/ptCoder/8XL7n/30/)

例如：我的 div 宽度为 100 像素，最大高度为 100 像素。我需要在 textarea 中输入文本，该文本将出现在 div 框中。

这是另一个示例，但效果不佳：[根据在固定宽度和高度框中拟合文本限制文本长度](https://stackoverflow.com/questions/14306083/limit-text-length-based-on-fitting-text-inside-fixed-width-and-height-box)

我需要像删除、退格和复制/粘贴这样的实现。

我尝试使用以下代码防止高度大小：

```
if (currentHeight >= window.maxHeight) {  
    //alert('sim');
    var $th = $(this);
    $th.val($th.val().replace(/./, function(str) {
        return '';
    }));
    e.preventDefault();
} 
```

但我有删除、退格和复制粘贴等方面的错误……</p>

另一个问题是文本在 textarea 中消失...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-29T10:19:04.493

你可以试试这个：

```
<script>
$(document).ready(function(){
    $('#inputData').keydown(function(){
    limitText($('#inputData'),100,100);
    });

    $('#inputData').keyup(function(){
        limitText($('#inputData'),100,100);
        });
});

function limitText(limitField, limitCount, limitNum) {
    if (limitField.val().length > limitNum) {
        limitField.val(limitField.val().substring(0, limitNum));
    } else {
        limitCount=limitNum - limitField.val().length;
    }
}
</script>
    <textarea maxlength="100" class="mycss" id="inputData" name="data" spellcheck=false wrap="physical"></textarea> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:21:07.917

为什么不能只使用最大宽度和最大高度？

```
#target {
    max-width:200px;
    max-height:200px;
} 
```

这应该限制目标的大小。

# javascript - 如何从 JSON 响应中检索键/值

> ID：16221521
> 
> 赞同：0
> 
> 时间：2013-04-25T17:56:29.393
> 
> 标签：javascript, jquery, ajax

我知道我们可以使用以下来处理一个简单的 ajax JSON 响应

```
function onSuccess(response) {
    console.log("Service call successful with response"+response);
    $.each(response, function (key, value) {
        console.log(key+" "+value);

    }) ; 
```

但是，如何处理如下的 JSON 响应数组？

```
{
   "xyzs":[
      {
         "xyz":{
            "id":"515f08380364db3bbe5a27f1",
            "xyz_id":"320224817603309569"
         }
      },
      {
         "xyz":{
            "id":"5161f9880364db3bbea86595",
            "xyz_id":"321033680736886784"
         }
      }
   ]
} 
```

onSuccess() 函数没有给出预期的输出`id`，并且`xyz_id`在控制台中没有上述响应。

javascript中是否有一些`for`循环，我在`onSuccess()`函数中使用它来获取id和xyz_id的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T18:00:14.363

你可以试试这个：

```
$.each(response.xyzs, function (index, obj) {
   console.log(obj.xyz.id+" "+obj.xyz.xyz_id);
}) ; 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:03:16.843

用这个：

```
var response = {
   "xyzs":[
      {
         "xyz":{
            "id":"515f08380364db3bbe5a27f1",
            "xyz_id":"320224817603309569"
         }
      },
      {
         "xyz":{
            "id":"5161f9880364db3bbea86595",
            "xyz_id":"321033680736886784"
         }
      }
   ]
};

$.each(response.xyzs, function () {
    var cur = this.xyz;
    console.log(cur.id, cur.xyz_id);
}); 
```

**演示：http:** [//jsfiddle.net/abBcW/](http://jsfiddle.net/abBcW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:10:38.440

在你的情况下。你有一个 json 对象，并且 $.each() 将应用于一个 json 数组。

`response.xyzs`因此，您可以通过该数组的每个元素获取 JSON 数组，并可以循环访问该数组。

```
 $.each(response.xyzs, function (key, value) {
        console.log(key+" "+value);   
    }) ; 
```

这是更清晰的 JSON 数组循环示例。

```
var data = [ 
 {"Id": 10004, "PageName": "club"}, 
 {"Id": 10040, "PageName": "qaz"}, 
 {"Id": 10059, "PageName": "jjjjjjj"}
];

$.each(data, function(i, item) {
    alert(data[i].PageName);
});​

$.each(data, function(i, item) {
    alert(item.PageName);
});​ 
```

# c++ - 指向数组的指针的 C++ 指针

> ID：16221523
> 
> 赞同：0
> 
> 时间：2013-04-25T17:56:37.833
> 
> 标签：c++, arrays, pointers, g++, core

我在创建数组数组时遇到了一点问题，或者更准确地说是指向数组的指针数组，我似乎已经消除了所有错误，因为程序编译得很好（我使用的是 g++）但是当我尝试运行它会给出“核心转储”消息。

这是我的代码？

```
#include<iostream>
#include<ctime>
#include<cstdlib>

using namespace std;

void create_array(int **pp)
    {
        pp = new int*[4];
        for (int i = 0; i<4; i++)
        {
            pp[i] = new int[4];
        }
    }

int main()
    {
        srand(time(NULL));
        int **pp;
        create_array(pp);

        for (int x = 0; x<4; x++)
        {
            for(int y = 0; y<4; y++)
            {
                pp[x][y] = rand()%9;
            }
        }
        cout << pp[3][2] << endl;
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:59:49.083

```
 void create_array(int **pp)
{
    pp = new int*[4];
    for (int i = 0; i<4; i++)
    {
        pp[i] = new int[4];
    }
} 
```

`pp`是指向 的指针数组`int`，但是，它是按值传递的。所以原来的来电者`pp`不受影响`main`。调用该函数后，`pp`内部`main`仍然存在。当您尝试为其分配价值时。这将导致核心转储。`uninitialized``create_array`

尝试`vector <vector<int>>`在 C++ 中使用。

或尝试：

```
void create_array(int **&pp)
{                     //^^
    pp = new int*[4];
    for (int i = 0; i<4; i++)
    {
        pp[i] = new int[4];
    }
} 
```

通过上述更改，如果您尝试在我的机器上打印整个矩阵，它会输出以下内容：

```
 8 7 6 3
 3 5 6 4
 3 8 7 6
 0 0 5 8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:08:55.540

你不想初始化指针，做一个参考。

# mercurial - Mercurial - 拉动后的活动变更集

> ID：16221535
> 
> 赞同：0
> 
> 时间：2013-04-25T17:57:08.193
> 
> 标签：mercurial

当您执行导致多个磁头的 hg pull 时，哪些磁头在您的文件系统上是“活动的”？

即：给定带有变更集的本地存储库：

```
A1 - A2 - A3 
```

然后做一个 hg pull 导致多个头：

```
A1 - A2 - A3
        \
          B3 
```

在进行 hg 合并之前，哪个变更集将在文件系统上处于活动状态？是A3还是B3？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:07:08.983

不确定“在文件系统上处于活动状态”是什么意思，但是在`hg pull`完成工作目录之后不会更改。您需要`hg update`将工作文件夹更新为拉取的提交之一。

这样做时，`hg update`您可以指定所需的变更集。如果不这样做，工作目录将更新到当前命名分支的顶端。

# jquery-mobile - jquerymobile，动态更新页面并重置滚动位置

> ID：16221539
> 
> 赞同：0
> 
> 时间：2013-04-25T17:57:33.453
> 
> 标签：jquery-mobile, scroll, reload

我正在尝试使用 jquery mobile ( `$('#testpage').page('destroy').page();`) 动态更新页面的内容，并重置滚动位置 ( `$.mobile.silentScroll(0);`)。

它可以工作，但是在几毫秒内，jquery 显示在旧位置向下滚动的新内容。我希望在页面顶部直接滚动显示新内容。

jquery中一定有一个参数可以记住调用时的滚动位置`$('#testpage').page('destroy').page();`，我希望重置这个参数。

也许我有错误的方法，我应该为 2 个页面使用 2 个单独的 div。

我这样做的原因是因为我希望 url 中的哈希对于 2 个页面是相同的，并且我不希望用户能够通过浏览器返回操作返回到上一页。如果我可以用 2 个单独的 div 来实现这一点，那也很好。

这是一个 jsfiddle 来说明：http: [//jsfiddle.net/EKFSy/2/](http://jsfiddle.net/EKFSy/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:33:17.327

我替换`$.mobile.silentScroll(0);`了`$.mobile.changePage( $('#testpage') , {allowSamePageTransition:true} );`它并且它起作用了。

请注意，我也尝试使用`$.mobile.urlHistory.getActive().lastScroll`. 在我的情况下，没有必要将其设置为零（因为似乎同一页面上的 changePage 已经重置了滚动位置），但如果您想更改历史记录中的滚动位置，这可能是一个有用的值。

[http://jsfiddle.net/EKFSy/3/](http://jsfiddle.net/EKFSy/3/)

# hibernate - Hibernate NamedQuery 使用 Oracle rownum 和 order by

> ID：16221543
> 
> 赞同：0
> 
> 时间：2013-04-25T17:57:49.087
> 
> 标签：hibernate, jpa

我正在使用 JPA Hibernate 实现，我正在尝试创建一个按数据排序的命名查询，然后只获取前两行。我已经尝试了以下方法，但它无效。有任何想法吗？我正在使用 Oracle DBMS。

```
 @NamedQuery(name = "Test.getLastTwoRecords", 
        query = "SELECT a FROM Test a WHERE rownum < 3 in (SELECT b FROM Test b WHERE b.value = :value order by b.date desc)") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:22:13.837

我会做以下事情：

```
@NamedQuery(name = "Test.getOrderedRecords", query = "SELECT a FROM Test a WHERE a.value = :value order by a.date desc)") 
```

接着：

```
List results = entityManager.createNamedQuery("Test.getOrderedRecords").setParameter("value", X).setMaxResults(2).getResultList(); 
```

JPA 通常足够聪明，可以找出截断结果列表的最佳方法。

# r - 上周数据的子集数据框

> ID：16221544
> 
> 赞同：0
> 
> 时间：2013-04-25T17:57:50.133
> 
> 标签：r

我有一个如下所示的时间序列数据框。我想对上周周日至周六的这些数据进行子集化。无论何时运行该函数，是否有一个已知的函数来计算上周？

```
 dput(head(y,100))
structure(list(DATE = structure(c(15809, 15809, 15809, 15809, 
15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 
15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 
15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 
15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 
15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 
15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 
15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 
15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 
15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 
15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 15809, 
15809, 15809, 15810, 15810, 15810, 15810), class = "Date"), Time = structure(c(1365984840, 
1365985740, 1365986640, 1365987540, 1365988440, 1365989340, 1365990240, 
1365991140, 1365992040, 1365992940, 1365993840, 1365994740, 1365995640, 
1365996540, 1365997440, 1365998340, 1365912840, 1365913740, 1365914640, 
1365915540, 1365916440, 1365917340, 1365918240, 1365919140, 1365920040, 
1365920940, 1365921840, 1365922740, 1365923640, 1365924540, 1365925440, 
1365926340, 1365927240, 1365928140, 1365929040, 1365929940, 1365930840, 
1365931740, 1365932640, 1365933540, 1365934440, 1365935340, 1365936240, 
1365937140, 1365938040, 1365938940, 1365939840, 1365940740, 1365941640, 
1365942540, 1365943440, 1365944340, 1365945240, 1365946140, 1365947040, 
1365947940, 1365948840, 1365949740, 1365950640, 1365951540, 1365952440, 
1365953340, 1365954240, 1365955140, 1365956040, 1365956940, 1365957840, 
1365958740, 1365959640, 1365960540, 1365961440, 1365962340, 1365963240, 
1365964140, 1365965040, 1365965940, 1365966840, 1365967740, 1365968640, 
1365969540, 1365970440, 1365971340, 1365972240, 1365973140, 1365974040, 
1365974940, 1365975840, 1365976740, 1365977640, 1365978540, 1365979440, 
1365980340, 1365981240, 1365982140, 1365983040, 1365983940, 1366071240, 
1366072140, 1366073040, 1366073940), class = c("POSIXct", "POSIXt"
), tzone = ""), CPU = c(30.4333333333333, 30.0666666666667, 29.9666666666667, 
31.0333333333333, 29.9666666666667, 27.0333333333333, 24.6, 23.1666666666667, 
24.5, 21.8, 20.1333333333333, 20.6333333333333, 22.4, 20.8333333333333, 
20.2333333333333, 19.7333333333333, 20.2857142857143, 15.4, 17.1666666666667, 
14.6333333333333, 20, 15.8666666666667, 14.6, 16.0333333333333, 
15, 13.9666666666667, 13.7, 11.3666666666667, 11.6666666666667, 
10.5666666666667, 19.2333333333333, 21.6, 21.9666666666667, 21.1, 
18.8666666666667, 20.5, 19.7666666666667, 17.1666666666667, 15.6333333333333, 
10.2666666666667, 9.33333333333333, 8.73333333333333, 9.4, 10, 
12.2333333333333, 12.8666666666667, 13.6333333333333, 14.4333333333333, 
15.6666666666667, 15.6666666666667, 16.6, 17.9333333333333, 20.0666666666667, 
20.2, 21.4666666666667, 22.4333333333333, 25.0333333333333, 24.6, 
25.0333333333333, 25.8666666666667, 25.9666666666667, 21.2, 23.2333333333333, 
30.2758620689655, 30.3666666666667, 29.5666666666667, 29, 29.9666666666667, 
30.0666666666667, 29.8666666666667, 28.8333333333333, 29, 29.5, 
29.4, 28.9333333333333, 28.5, 28.4, 29.3, 27.1666666666667, 26.7, 
27.5333333333333, 27.3333333333333, 26.6333333333333, 26.8333333333333, 
26.9, 26.4666666666667, 26.1, 26.0333333333333, 26.4, 26.4333333333333, 
25.8, 25.7666666666667, 32.4333333333333, 26.6666666666667, 25.7333333333333, 
26.8333333333333, 39.4666666666667, 34.2666666666667, 29.3333333333333, 
28.2666666666667), Time1 = c("20:14", "20:29", "20:44", "20:59", 
"21:14", "21:29", "21:44", "21:59", "22:14", "22:29", "22:44", 
"22:59", "23:14", "23:29", "23:44", "23:59", "00:14", "00:29", 
"00:44", "00:59", "01:14", "01:29", "01:44", "01:59", "02:14", 
"02:29", "02:44", "02:59", "03:14", "03:29", "03:44", "03:59", 
"04:14", "04:29", "04:44", "04:59", "05:14", "05:29", "05:44", 
"05:59", "06:14", "06:29", "06:44", "06:59", "07:14", "07:29", 
"07:44", "07:59", "08:14", "08:29", "08:44", "08:59", "09:14", 
"09:29", "09:44", "09:59", "10:14", "10:29", "10:44", "10:59", 
"11:14", "11:29", "11:44", "11:59", "12:14", "12:29", "12:44", 
"12:59", "13:14", "13:29", "13:44", "13:59", "14:14", "14:29", 
"14:44", "14:59", "15:14", "15:29", "15:44", "15:59", "16:14", 
"16:29", "16:44", "16:59", "17:14", "17:29", "17:44", "17:59", 
"18:14", "18:29", "18:44", "18:59", "19:14", "19:29", "19:44", 
"19:59", "20:14", "20:29", "20:44", "20:59")), .Names = c("DATE", 
"Time", "CPU", "Time1"), row.names = 4205:4304, class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:52:01.633

尝试这个：

```
library(chron) # for is.weekend

x[as.numeric(strftime(x$Time,format="%W")) ==
    as.numeric(strftime(Sys.time(),format="%W")) - 1 & is.weekend(x$Time),] 
```

我假设即使今天是星期六（或星期日），代码也需要选择上一个周末。

编辑：这是一个时区问题（我比你早两个小时），所以以下对我来说是深夜。但是对你来说，你什么也没得到是正确的，因为没有行是在同一个周末和前一周。唯一的一个是 14 日（星期日），但那是两周前。

```
> x[as.numeric(strftime(x$Time,format="%W")) ==
+     as.numeric(strftime(Sys.time(),format="%W")) - 1 & is.weekend(x$Time),]
           DATE                Time      CPU Time1
4293 2013-04-14 2013-04-15 00:14:00 26.40000 18:14
4294 2013-04-14 2013-04-15 00:29:00 26.43333 18:29
4295 2013-04-14 2013-04-15 00:44:00 25.80000 18:44
4296 2013-04-14 2013-04-15 00:59:00 25.76667 18:59
4297 2013-04-14 2013-04-15 01:14:00 32.43333 19:14
4298 2013-04-14 2013-04-15 01:29:00 26.66667 19:29
4299 2013-04-14 2013-04-15 01:44:00 25.73333 19:44
4300 2013-04-14 2013-04-15 01:59:00 26.83333 19:59 
```

# c# - C# WindowsForms - 在 Visual Studio 上将文本框从 form1 发送到 form2

> ID：16221546
> 
> 赞同：0
> 
> 时间：2013-04-25T17:58:05.803
> 
> 标签：c#, visual-studio, textbox, send

我在视觉工作室有 2 个表格，

```
form1 have textbox1.text
form2, have textbox2.text and btnSave 
```

obs：当我单击表单1上的另一个按钮时，表单2打开：

```
Form new = new form2();
           nova.Show(); 
```

如何单击 btnSave 将 textbox2 内容从 form2 发送到 form1 (textbox1)？在此单击按钮事件中需要什么代码。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T20:14:05.057

请试试这个：步骤1：为form2类创建一个构造函数，如下所示：

```
 public Form2(string strTextBox)
        {
            InitializeComponent();
            label1.Text = strTextBox;
        } 
```

Step2：在form1的按钮单击事件处理程序中实例化form2类，如下所示：

```
 private void button1_Click(object sender, EventArgs e)
        {
            Form2 obj1 = new Form2(textBox1.Text);
            obj1.Show();
            this.Hide();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:18:53.617

在您的第二个表单上创建一个可以在保存表单时触发的事件：

```
public event Action Saved; 
```

然后在该表单上创建一个允许访问文本框文本的属性：

```
public string SomeTextValue //TODO: rename to meaningful name
    { get{ return textbox2.Text;} } 
```

`Saved`然后，您需要在保存表单时触发该事件：

```
if(Saved != null)
    Saved(); 
```

然后，当您第一次创建表单时，`Form1`将事件处理程序附加到该事件：

```
Form2 child = new Form2();
child.Saved += () => textbox1.Text = child.SomeTextValue;
child.Show(); 
```

请注意，如果您在保存第二个表单时也关闭了它，那么您不需要自定义事件，您可以使用它`FormClosing`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T05:26:05.703

研究我能够让它工作，失去了几个小时，但现在一切都很完美，这是对我有用的代码：

在表格 2 上：

```
public partial class form2 : Form
    {
        private string nome;
        public string passvalue
        {
            get { return nome; }
            set { nome = value; }
        } 
```

form2，按钮保存：

```
private void btnSalvar_Click(object sender, EventArgs e)
        {
            passvalue = txtMetragemcubica.Text;
            this.Hide();
        } 
```

在 form1 上（此按钮打开 form2）：

```
private void btnMetragemcubica_Click(object sender, EventArgs e)
        {
            form2 n = new form2();
            n.ShowDialog();
            txtMetragem.Text = n.passvalue
        } 
```

现在它以这种方式工作：在表单 1 上打开，然后单击按钮 btnMetragemcubica 并打开 form2，然后我在不同的文本框上插入值并在 txtMetragemcubica 上显示结果，当我单击保存按钮 (btnSalvar) 时，它关闭 form2 并将值发送到txtMetragem 文本框中的 form1。

在这里工作完美，希望也能帮助其他人。无论如何感谢所有帮助

# gdb - 如何解释 gdb 反汇编输出？

> ID：16221550
> 
> 赞同：3
> 
> 时间：2013-04-25T17:58:21.307
> 
> 标签：gdb

我正在尝试将 gdb 反汇编输出（**disas [address]**）与源代码进行匹配。我知道可以使用**(gdb) info line *address**来查找匹配行来完成此类映射。但是我不太明白反汇编输出的格式。具体来说，以下数字 +4722 和 +4281 是什么意思？

```
0x00002ad61e45bd02 <+4722>:  jmpq   0x2ad61e45bb49     <MsgManager::ForwardMsg(boost::shared_ptr<Channel>, boost::shared_ptr<Msg>, boost::shared_ptr<Context>)+4281> 
```

我正在使用 GNU gdb (GDB) 7.4.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T02:09:39.260

> 具体来说，以下数字 +4722 和 +4281 是什么意思

address 处的指令，`0x00002ad61e45bd02`距当前函数的开头 4722 字节（很可能`MsgManager::ForwardMsg()`）是跳转到 address `0x2ad61e45bb49`，距 4281 字节的开头`MsgManager::ForwardMsg()`。

您可能还会发现`(gdb) disas/m`命令很方便。

# python - CGI python脚本中的MySQLDB导入错误

> ID：16221551
> 
> 赞同：2
> 
> 时间：2013-04-25T17:58:26.883
> 
> 标签：python, cgi, cgi-bin

我在 cgi-bin 中编写以下脚本，而如果我通过输入 URL 从浏览器运行此脚本，则脚本会`500 internal server`出错。

```
#!/usr/bin/python

import MySQLdb
import cgi
print "Content-type: text/html"
print
print "<html>"
print "<head>"
print "<title>Listing</title>"
print "</head>"
print "<body>"
print "<h2>listing</h2>"

db = MySQLdb.connect(host="localhost", user="user", passwd="password", db="DB_name")

cur = db.cursor()
cur.execute("select * from table")
rows = cur.fetchall()
for row in rows:
   print row[0]

print "</body>"
print "</html>" 
```

如果我删除数据库连接线那么它工作正常，但如果我只是添加`import MySQLdb`然后我得到 500 内部服务器错误。

输出

导入系统

```
for p in sys.path: 
    print p + "<br/>"

/home/database/public_html/cgi-bin
/usr/lib64/python26.zip
/usr/lib64/python2.6
/usr/lib64/python2.6/plat-linux2
/usr/lib64/python2.6/lib-tk
/usr/lib64/python2.6/lib-old
/usr/lib64/python2.6/lib-dynload
/usr/lib64/python2.6/site-packages
/usr/lib64/python2.6/site-packages/gtk-2.0
/usr/lib/python2.6/site-packages 
```

操作系统是红帽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T18:03:52.013

看起来像服务器问题。请联系您的服务器支持。

# .net - Web API DelegatingHandler Async HttpContext = null 错误

> ID：16221553
> 
> 赞同：2
> 
> 时间：2013-04-25T17:58:29.823
> 
> 标签：.net, asp.net-web-api, async-await, httpcontext

只有当我有某个 DelegatingHandler 拦截调用时，我的应用程序才会弹出一个非常奇怪的错误。它的要点是，当请求通过我的 DelegatingHandler 时，*对于 Web 服务器*仅接收的第一个请求，HttpContext.Current 为空。因此，如果我是部署代码后第一个使用我的 API 的人，我会收到错误消息。否则，我很酷。

以下是错误发生方式的概述：

1.  请求进入委托处理程序
2.  处理程序遍历其整个`SendAsync`函数并通过调用结束`return await base.SendAsync(request, cancellationToken);`
3.  WebAPI 依赖解析器（我使用 simpleinjector）尝试解析 APIController 的依赖
4.  依赖解析失败，因为`HttpContext.Current`为空（试图`HttpContext.Current.Items`为我的`IUnitOfWork`

所以看起来线程亲和力/上下文仅在我的处理程序中被更改？我不明白。调用堆栈始终显示错误（HttpContext 为空）发生在该 final 中`await base.SendAsync(request, cancellationToken);`。奇怪的。

这是处理程序代码：

```
public class RecipeIdValidator:DelegatingHandler
{

    private static string[] _Ignore = new string[] {"api/webhook" };
    protected override async Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken)
    {
        if(_Ignore.Any(i=>request.RequestUri.AbsoluteUri.IndexOf(i)!=-1))
            return await base.SendAsync(request, cancellationToken);

        var recipeId = request.GetQueryNameValuePairs().Where(i=>i.Key.Equals("recipeid",StringComparison.InvariantCultureIgnoreCase));

        if (!recipeId.Any())
            return request.CreateErrorResponse(System.Net.HttpStatusCode.Forbidden,"Missing recipeId/api key. Please add this to your request in the form of the querystring ?recipeId=value.");

        CheckValidity(recipeId);

        return await base.SendAsync(request, cancellationToken);
    }
} 
```

# sql - 从各个方向的自引用表中获取数据

> ID：16221557
> 
> 赞同：1
> 
> 时间：2013-04-25T17:58:49.813
> 
> 标签：sql, oracle, self-reference

我有一个包含这样行的表：

```
 ID        Parent_ID   Name
    1         (null)      A
    2         1           B
    3         1           C
    4         2           D
    5         3           E
    6         5           F
    7         (null)      G
    8         (null)      H 
```

无论是否将 Name='A' 或 'F' 作为标准传递，我都需要获取所有相关行的 ID。在这种情况下，我应该收到除 7 和 8 之外的所有 ID。

我尝试了很多例子并阅读了很多文章，但我现在放弃了。你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:17:09.403

`A`位于层次结构的根部（它是 的父级`B`，是 的父级`D`，等等）。从开始`A`并开始工作`F`（也一直到`D`and `E`，它们也`A`通过不同的路线作为父母）：

```
SELECT ID, Parent_ID, Name
FROM tbl
START WITH Name = 'A'
CONNECT BY PRIOR ID = Parent_ID 
```

`F`位于层次结构的末尾。甲骨文称其为“叶子”。从叶子开始，`F`一直到`A`顶部：

```
SELECT ID, Parent_ID, Name
FROM tbl
START WITH Name = 'F' -- start with F instead of A
CONNECT BY PRIOR Parent_ID = ID -- switch the CONNECT BY to work up 
```

Oracle 有一个`SYS_CONNECT_BY_PATH`非常适合可视化层次结构的功能。以下是如何在第一个查询中使用它（`A`向下`F`）：

```
SELECT ID, Parent_ID, Name, SYS_CONNECT_BY_PATH(Name, '/') AS Path
FROM tbl
START WITH Name = 'A'
CONNECT BY PRIOR ID = Parent_ID 
```

结果：

```
 ID  PARENT_ID NAME PATH
---- ---------- ---- -----------
   1            A    /A
   2          1 B    /A/B
   4          2 D    /A/B/D
   3          1 C    /A/C
   5          3 E    /A/C/E
   6          5 F    /A/C/E/F 
```

您可以使用任何您想要的分隔符作为`SYS_CONNECT_BY_PATH`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:22:58.147

```
with
   t as (
      select id
      from your_table
      where name = 'D'  -- your starting point
   )
select id
from (
   select id, parent_id from your_table
   where parent_id is not null
   union all
   select parent_id, id from your_table
   where parent_id is not null
   union all
   select id, null from t
)
start with parent_id is null
connect by nocycle prior id = parent_id 
```

[小提琴](http://www.sqlfiddle.com/#!4/6e1d3/1)

# c# - 如何从 XDocument 获取子节点的值

> ID：16221558
> 
> 赞同：24
> 
> 时间：2013-04-25T17:58:50.120
> 
> 标签：c#, xml, linq

我需要使用 linq 从 XDocument 获取子节点的值

```
<root>
<Cust>
     <ACTNumber>1234</ACTNumber>
     <Address>
         <Street></Street>
         <City>123 Main street</City>
         <State>AL</State>
     </Address>
</Cust>
</root> 
```

我试过这个：`xDocTest.Root.Elements("Cust").Elements("ACTNumber")`

如果我尝试使用 Address 而不是 ACTNumber 那么它可以工作。但它没有给出子节点值。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-25T18:45:12.350

如果只有一个`Cust`元素并且只有一个`ACTNumber`元素，那么很容易：

```
string actNumber = doc.Root.Element("Cust").Element("ACTNumber").Value; 
```

或将其作为`long`：

```
long actNumber = (long) doc.Root.Element("Cust").Element("ACTNumber"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-25T18:03:48.983

用这个：

```
xDocTest.Root.Element("Cust").Element("Adress").Element("City").Value 
```

如果你使用 Elements（注意复数），它会给你一个 IEnumerable，这将像这样使用：

XML

```
<Father>
    <Child>Hello</Child>
    <Child>World!</Child>
</Father> 
```

C＃

```
foreach(var childElement in Root.Elements("Child")) Console.WriteLine(childElement.Value); 
```

或者以你为例：

```
foreach(var child in xdoc.Root.Element("Cust").Element("Address").Elements()) 
    Console.WriteLine(string.Format("{0} : {1}", child.Name, child.Value); 
```

如果您有多个同名元素，我不确定元素的行为方式。因此，您可能希望对所有事件使用 Elements 和 Inerate。

而在 Linq 中，如果有多个客户......

```
var result = from cust in xdoc.Root.Elements("Cust")

             where cust.Elements("ACTNumber").Any() // This is to make sure there
                                                    // is an element called ACTNumber
                                                    // otherwise .Value would create
                                                    // Nullrefexception.

             select child.Element("ACTNumber").Value; 
```

# c - 将数组传递给函数的正确语法

> ID：16221559
> 
> 赞同：1
> 
> 时间：2013-04-25T17:58:51.923
> 
> 标签：c, arrays, syntax

如果我用这样的东西声明一个数组：

```
const char var[]="Some message here"; 
```

然后有一个函数通过接受指向数组的指针来打印此消息，如下所示：

```
void printMessage(char *msg) 
```

那么如果我这样调用这个函数有什么区别：

`printMessage(var);`

或这个：

`printMessage(&var[0]);`

哪个是调用这个函数的更合适的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:01:20.623

从技术上讲，没有区别——`var`字面意思是`&var[0]`

使用哪一个是部分个人偏好、部分可读性和部分一致性。例如，如果您要在一个点调用该函数，`var`然后在另一个点调用该函数，`&var[n]`那么我会争辩`&var[0]`在第一次调用中使用它作为可读性帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:02:05.493

Both `var` and `&var[0]` equal the address of the first member in the char array.

The former is simplest for arrays.

The latter can be useful for passing a std::vector to a function that accepts an array address.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:42:07.903

对于类似的事情，我只是通过`var`，但是当我在做指针算术时，我使用更长的形式`&var[3]`而不是`var + 3`因为我认为它更清楚地表明我正在做指针算术。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T18:03:45.203

它们在 C 中是相同的。如果您有 C 数组或 C 指针，请使用较短的语法。

在 c++ 中处理向量时，我使用较长的语法，以明确发生了什么：

```
void f(const double * arry);
void g() {
    std::vector<double> vec = //.....
    f(&(vec[0]));
} 
```

# redis - 多个 Redis 数据库的意义何在？

> ID：16221563
> 
> 赞同：219
> 
> 时间：2013-04-25T17:59:07.137
> 
> 标签：redis

所以，我来到了一个地方，我想将我存储在 redis 中的数据分割到单独的数据库中，因为我有时需要对一种特定类型的数据使用 keys 命令，并希望将其分开以使其更快.

如果我分割成多个数据库，一切仍然是单线程的，我仍然只能使用一个内核。如果我只是在同一个盒子上启动另一个 Redis 实例，我就可以使用一个额外的核心。最重要的是，我不能命名 Redis 数据库，或者给它们任何更合乎逻辑的标识符。那么，综上所述，为什么/何时我想要使用多个 Redis 数据库，而不是为我想要的每个额外数据库启动一个额外的 Redis 实例？与此相关的是，为什么 Redis 不尝试为我添加的每个额外数据库使用一个额外的核心？跨数据库单线程有什么好处？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-04-25T20:03:22.010

原则上，同一实例上的 Redis 数据库与 RDBMS 数据库实例中的模式没有什么不同。

> 那么，综上所述，为什么/何时我想要使用多个 Redis 数据库，而不是为我想要的每个额外数据库启动一个额外的 Redis 实例？

在同一个 redis 实例中使用 redis 数据库有一个明显的优势，那就是管理。如果您为每个应用程序启动一个单独的实例，假设您有 3 个应用程序，那就是 3 个单独的 redis 实例，每个实例都可能需要一个从属服务器来实现生产中的 HA，所以总共有 6 个实例。从管理的角度来看，这很快就会变得一团糟，因为您需要监控所有这些，进行升级/补丁等。如果您不打算用高 I/O 重载 redis，带有从属的单个实例更简单，并且如果它符合您的 SLA，则更易于管理。

* * *

## 回答 #2

> 赞同：118
> 
> 时间：2013-04-26T19:26:10.447

您不想在单个 redis 实例中使用多个数据库。正如您所指出的，多个实例可让您利用多个核心。如果您使用数据库选择，您将不得不在升级时进行重构。监控和管理多个实例并不困难也不痛苦。

实际上，通过基于实例的隔离，您将在每个数据库上获得更好的指标。每个实例都有反映该数据段的统计信息，这可以进行更好的调整以及更灵敏和更准确的监控。使用最新版本并按实例分离数据。

正如 Jonaton 所说，不要使用 keys 命令。如果您简单地创建一个键索引，您会发现性能要好得多。每当添加密钥时，将密钥名称添加到集合中。放大后，keys 命令并不是非常有用，因为它需要很长时间才能返回。

让访问模式决定如何构建数据，而不是按照您认为可行的方式存储数据，然后解决以后如何访问和切碎数据。您将看到更好的性能，并发现消耗数据的代码通常更干净、更简单。

关于单线程，考虑到 redis 是为速度和原子性而设计的。确定在一个数据库中修改数据的操作不需要在另一个数据库上等待，但是如果该操作正在保存到转储文件或处理从属服务器上的事务怎么办？那时你开始进入并发编程的杂草。

通过使用多个实例，您可以将多线程复杂性转变为更简单的消息传递样式系统。

* * *

## 回答 #3

> 赞同：78
> 
> 时间：2016-04-08T11:35:57.527

甚至 Salvatore Sanfilippo（Redis 的创建者）也认为在 Redis 中使用多个数据库是个坏主意。在这里查看他的评论：

[https://groups.google.com/d/topic/redis-db/vS5wX8X4Cjg/discussion](https://groups.google.com/d/topic/redis-db/vS5wX8X4Cjg/discussion)

> 我知道这很有用，但不幸的是，我认为 Redis 多个数据库错误是我在 Redis 设计中最糟糕的决定……没有任何真正的收获，它使内部结构变得更加复杂。现实情况是，由于多种原因，数据库无法很好地扩展，例如密钥和 VM 的主动过期。如果可以使用字符串执行 DB 选择，我可以看到此功能被用作可扩展的 O(1) 字典层，但事实并非如此。
> 
> 使用 DB 编号，默认为几个 DB，我们可以更好地沟通此功能是什么以及我认为如何使用。我希望在某个时候我们可以完全放弃对多数据库的支持，但我认为这可能为时已晚，因为有很多人在工作中依赖此功能。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-25T18:49:37.700

1.  我真的不知道在单个实例上拥有多个数据库有什么好处。我想如果多个服务使用相同的数据库服务器会很有用，这样你就可以避免密钥冲突。

2.  我不建议使用该`KEYS`命令进行构建，因为它是 O(n) 并且不能很好地扩展。你用它来做什么，你可以用另一种方式完成？`KEYS`如果像这样的功能至关重要，那么 redis 可能不是你的最佳选择。

3.  我认为他们在他们的常见问题解答中提到了单线程服务器的好处，但主要是简单性 - 您不必以任何真正的方式为并发而烦恼。每个动作都是阻塞的，所以没有两件事可以同时改变数据库。理想情况下，每个服务器的每个核心都有一个（或多个）实例，并使用一致的散列算法（或代理）在它们之间划分密钥。当然，你会失去一些功能——管道只能用于同一台服务器上的东西，排序变得更难等等。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-24T12:29:46.380

我正在使用 redis 来实现电子邮件地址的黑名单，并且对于不同级别的黑名单，我有不同的 TTL 值，因此在同一实例上拥有不同的数据库对我有很大帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-06-15T12:04:23.713

Redis 数据库可用于部署新版本应用程序的极少数情况，其中新版本需要使用不同的实体。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-05-22T10:42:13.240

我知道这个问题已经存在多年了，但多个数据库可能有用还有另一个原因。

如果您使用来自您最喜欢的云提供商的“云 Redis”，您可能有一个最小内存大小，并且将为您分配的内容付费。但是，如果您的数据集小于该数据集，那么您将浪费一些分配，从而浪费一些钱。

使用数据库，您可以使用相同的 Redis 云实例为（例如）开发、UAT 和生产，或应用程序的多个实例或其他任何实例提供服务 - 从而使用更多分配的内存，因此成本更高 -有效的。

我正在查看的一个用例有几个应用程序实例，每个实例使用 200-300K，但我的云提供商的最小分配是 1M。我们可以将 10 个实例整合到一个 Redis 上，而不会真正影响任何限制，因此可以节省大约 90% 的 Redis 托管成本。我很欣赏这种方法存在局限性和问题，但认为值得一提。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-10T12:56:42.440

在单个实例中使用多个数据库在以下场景中可能很有用：

同一数据库的不同副本可用于使用实时数据进行生产、开发或测试。人们可能会使用副本来克隆一个 redis 实例以达到相同的目的。但是，前一种方法更容易让现有运行程序只需选择正确的数据库即可切换到预期模式。

# c# - 符合 windows 商店应用程序的布局

> ID：16221565
> 
> 赞同：1
> 
> 时间：2013-04-25T17:59:12.800
> 
> 标签：c#, xaml, windows-store-apps

我在让我的应用程序符合 Microsoft 此处建议的布局指南时遇到问题：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh872191.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh872191.aspx)

在**页眉**部分中，如果距窗口顶部 100 像素（5 个单位），则建议页眉的基线。但是，我正在尝试使用一个文本块，垂直对齐到 100px 网格行的底部，并且似乎没有合理的方法来获得 100px 的基线，因为无法控制文本块的基线偏移量。

有没有人知道该怎么做，或者我应该使用哪些替代控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T22:11:14.377

查看默认的 Grid View 模板，它是 100px 的。这是通过将网格行定义为 140 像素，然后将文本块的边距定义为距底部 40 像素来实现的。

网格高度定义

```
<Grid.RowDefinitions>
  <RowDefinition Height="140"/>
  <RowDefinition Height="*"/>
</Grid.RowDefinitions>

```

为文本块定义的样式是

```
<样式 x:Key="PageHeaderTextStyle" TargetType="TextBlock" BasedOn="{StaticResource HeaderTextStyle}">
  <Setter Property="TextWrapping" Value="NoWrap"/>
  <Setter Property="VerticalAlignment" Value="Bottom"/>
  <Setter Property="Margin" Value="0,0,30,40"/>
</样式>

```

140 - 40 = 您正在寻找的令人垂涎的 100 :)

如果我将边距更改为 0 并在 RowDefinition 中从 140 变为 100，我会按照以下方式达到 100： ![100 像素基线](https://i.stack.imgur.com/SEBfc.png) ![测量](https://i.stack.imgur.com/XdRJv.png)

[在http://aka.ms/stackbuilder](http://aka.ms/stackbuilder)的第 1 周（设计指南）下有一些很棒的 App Builder 设计链接（您还可以获得免费的设计评论）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T16:27:40.623

事实证明，框中的文本必须偏移才能使其位于 100px 上。指南中提到的基线。最简单的方法是使用基于解决方案“Common”文件夹中 StandardStyles.xaml 文件中的“BaselineTextStyle”或“HeaderTextStyle”的样式。

如果您查看这些定义，您会看到正在使用 RenderTransform 将文本与基线对齐，ala；

```
<Style x:Key="BaselineTextStyle" ...>
    ...
    <!-- Properly align text along its baseline -->
    <Setter Property="RenderTransform">
        <Setter.Value>
            <TranslateTransform X="-1" Y="4"/>
        </Setter.Value>
    </Setter>
    ...
</Style> 
```

# ios - nibBundleOrNil 返回包的名称和消息“（尚未加载）”是什么意思？

> ID：16221576
> 
> 赞同：0
> 
> 时间：2013-04-25T17:59:50.127
> 
> 标签：ios, xcode, uiviewcontroller, sdk, unity3d

我们有一个控制器，它是 UIViewController 的后代。也就是说，类似：

*   UIView 控制器
*   *   BaseViewControllerChild
*   *   *   ViewControllerInQuestion

当我们尝试显示这个 ViewControllerInQuestion 时，它没有显示出来。我们碰巧在 init 方法中有一个 log 语句。

```
-(id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    NSLog(@"ViewControllerInQuestion : initWithNibName:: %@ %@", nibNameOrNil, nibBundleOrNil);
    // ... 
} 
```

我们在那里的日志记录报告了一些有趣的事情。

```
ViewControllerInQuestion : initWithNibName: ViewControllerInQuestion 
NSBundle </var/mobile/Applications/84129-777-IAMSMASHINGNUMBERSBUTYOUGETTHE
IDEA-85327/OurApp.app/OurSDKResourcesBundle.bundle> (not yet loaded) 
```

特别是最后一部分，我们看到它说“ **（尚未加载）** ”。 **这意味着什么？** 我们已经构建了资源包，它似乎很高兴地位于我们的项目中。

*语境*

不要被上下文吓到（你已经走得太远了！），但我们实际上是在 Unity 中从我们的 SDK 中调出与此视图控制器关联的视图。也就是说，我们有一个由 Unity 创建的 XCode 项目，我们已经将我们自己的 SDK 添加到该 XCode 项目中，并且这个 viewcontroller 在那个 SDK 中。它也没有出现。

其他问题/搜索结果提到了异常或不同的错误。这只是来自这个日志语句，因为我们调试了为什么 XIB 不会出现；这不是一个例外，它只是不显示。这是什么意思？

*额外说明：我们的代码在更高版本的 Unity (4.1.2) 中运行良好。为了让它与旧版 Unity (3.5.7) 一起编译，我们必须修改 XCode 项目（Unity 吐出的）上的许多项目设置并稍微更改代码。内部 SDK 代码本身没有更改：我们只更改了 Unity 吐出的 XCode 项目的文件和项目，这意味着问题可能是 1.) 我们的项目设置/XCode 项目更改或 2.) 旧版本中的某些内容Unity 或 iOS 版本。第一步是了解“（尚未加载）”的含义，我想！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T11:04:50.587

（尚未加载）...

`NSBundle`是图像和接口资源的容器，但它也是代码资源的容器。您可以在不加载代码资源的情况下实例化一个包，然后稍后显式加载它们（`- isLoaded`、、、`- load`）`- loadAndReturnError:`。

确保所有资源都配置为在构建期间复制到您的包中。您可以在 Finder 中打开包（右键单击并显示包内容）以验证它是否包含您期望的所有内容。

# java - 在 Java 中遍历 LinkedList

> ID：16221584
> 
> 赞同：2
> 
> 时间：2013-04-25T18:00:18.087
> 
> 标签：java, linked-list

如果这太荒谬了，让我首先道歉。这是我第一次编程。

这里的问题是我需要打印出 LinkedList。有人可以指导我做错什么吗？这是我所拥有的：

```
public class Queue {

private LinkedList list;

public Queue() { 
    list = new LinkedList(); 
}
}

public class BankQueue {

static Queue q = new Queue();

public static void main(String[] args) {

    //Insert a menu with a list of possible choices

public static void printQueue(Queue q) {
    for (String s : q) {
        System.out.println(q);
    }
} 
```

我不断收到错误消息，说我只能遍历数组或 java.lang.Iterable 的实例。谢谢您的帮助。这是由衷的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:04:06.103

您需要遍历一个*列表*，而不是遍历实际上没有实现*的类实例*`Iterable`，例如

```
public void printQueue(Queue q) {
     for(String s : q.getList()) {
         //do anything with your string
    }
} 
```

当然，这意味着您`LinkedList`实际上是，并且您在类中声明了`LinkedList<String>`一个 getter字段，例如.`list``public List<String> getList() { return list; }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:05:11.570

您的课程`Queue`不可迭代。

`java.util.Queue`顺便说一句，它的名字与*可*迭代的 相冲突。

如果您实际上是在尝试遍历 的`list`成员`Queue`，则需要为此提供一个 getter（它是私有的），或者为自己编写一个访问者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:04:17.300

您似乎没有迭代`list`. `q`您需要实现`Iterable`接口，或直接迭代`q.list`。

真正正确的方法是实施`Iterable`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T18:06:14.733

您需要使用迭代器来遍历 LinkedList，如下所示：

```
iterator = q.iterator(); 
  while (iterator.hasNext()) {
  System.out.print(iterator.next()+" ");  
} 
```

# java - 为什么 getBuffer() 会出错？

> ID：16221585
> 
> 赞同：0
> 
> 时间：2013-04-25T18:00:39.613
> 
> 标签：java, xml

我有这些代码的错误消息：

```
TransformerFactory tf = TransformerFactory.newInstance();
Transformer t = tf.newTransformer();
DOMSource source = new DOMSource(doc);
Writer outWriter = new StringWriter();
StreamResult result = new StreamResult( outWriter );
t.transform(source, result);
StringBuffer sb = outWriter .getBuffer();     //with this line,complet error message down
return sb.toString();

        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
        return null;

    }

**down: "StringBuffer sb = outWriter .getBuffer(); 
  symbol:   method getBuffer()
  location: variable outWriter of type Writer 
```

注意：C:\Users\Desktop\BikeShop FINALE\src\bikeshop\orej.java 使用未经检查或不安全的操作。注意：使用 -Xlint:unchecked 重新编译以获取详细信息。1 个错误"**

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:03:22.287

该方法`getBuffer`未定义`java.io.Writer`。声明为`StringWriter`：

```
StringWriter outWriter = new StringWriter(); 
```

# ruby-on-rails - 保存 ActiveRecord 对象时跳过 :touch 关联

> ID：16221586
> 
> 赞同：8
> 
> 时间：2013-04-25T18:00:41.113
> 
> 标签：ruby-on-rails, ruby, activerecord

有没有办法在保存时**跳过**更新与关联的`:touch`关联？

设置：

```
class School < ActiveRecord::Base
  has_many :students
end

class Student < ActiveRecord::Base
  belongs_to :school, touch: true
end 
```

我希望能够在跳过触摸的情况下执行以下操作。

```
@school = School.create
@student = Student.create(school_id: @school.id)
@student.name = "Trevor"
@student.save # Can I do this without touching the @school record? 
```

你能做这个吗？类似的东西`@student.save(skip_touch: true)`会很棒，但我还没有找到类似的东西。

我不想使用类似的东西，`update_column`因为我不想跳过 AR 回调。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-10-23T19:47:07.840

从 Rails v4.1.0.beta1 开始，正确的做法是：

```
@school = School.create
@student = Student.create(school_id: @school.id)

ActiveRecord::Base.no_touching do
  @student.name = "Trevor"
  @student.save
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T18:26:58.803

避免直接进行猴子修补的一种选择是覆盖当您与`:touch`属性建立关系时创建的方法。

鉴于 OP 的设置：

```
class Student < ActiveRecord::Base
  belongs_to :school, touch: true

  attr_accessor :skip_touch

  def belongs_to_touch_after_save_or_destroy_for_school
    super unless skip_touch
  end

  after_commit :reset_skip_touch

  def reset_skip_touch
    skip_touch = false
  end
end

@student.skip_touch = true
@student.save # touch will be skipped for this save 
```

这显然很老套，并且取决于 AR 中真正具体的内部实现细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T18:15:18.130

抱歉不行。`save`不提供这样的选项。

解决此问题的方法是拥有另一个时间戳属性，其功能类似于`updated_at`但不同于`updated_at`，它仅根据您的喜好在某些情况下更新。

# ruby-on-rails - 红宝石服务器“捆绑器找不到一些宝石”捆绑器将无法安装

> ID：16221587
> 
> 赞同：2
> 
> 时间：2013-04-25T18:00:43.323
> 
> 标签：ruby-on-rails, ruby, bundler

我在本地克隆了一个 1.8.7 rails 应用程序，我正在尝试运行 ruby​​ 服务器，但是当我输入“ruby server”时，我收到以下错误：

```
./../config/../config/preinitializer.rb:18: Bundler couldn't find some gems.Did you run `bundle install`? (RuntimeError)
from ./../config/boot.rb:28:in `load'
from ./../config/boot.rb:28:in `preinitialize'
from ./../config/boot.rb:10:in `boot!'
from ./../config/boot.rb:124
from server:2:in `require'
from server:2 
```

所以我然后尝试通过“gem install bundler”安装捆绑器，但收到此错误：

```
Successfully installed bundler-1.3.5 
1 gem installed
dyld: lazy symbol binding failed: Symbol not found: _rb_intern2
  Referenced from: /usr/local/rvm/gems/ruby-1.9.3-p392/gems/json-    1.7.7/lib/json/ext/parser.bundle
  Expected in: flat namespace

dyld: Symbol not found: _rb_intern2
  Referenced from: /usr/local/rvm/gems/ruby-1.9.3-p392/gems/json-1.7.7/lib/json/ext/parser.bundle
  Expected in: flat namespace 
```

...并且它不会运行“捆绑安装”

```
ERROR: Gem bundler is not installed, run `gem install bundler` first. 
```

我目前正在运行 3.2.12 rails，我需要切换到早期版本吗？我已经安装了 RVM。我在这方面相当新，所以任何帮助将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:26:34.210

我猜 1.8.7 是你的 ruby​​ 版本，而不是 rails 版本，尽管你声称它是。或者您是否尝试在您当前的 rails 版本上运行 1.8.7 rails 应用程序？如果是这样，那不是一个好主意。首先，在启动服务器时，正确的语法是`rails server`或`rails s`简称。

这是 RVM 的问题。**你的 RVM 版本是多少？你的操作系统是什么？**RVM 和 OSX Snow Leopard 存在一个已知问题。尝试检查您的 ruby​​ 版本 ( `ruby -v`) 并确保只安装了一个版本，然后再次捆绑安装以在`rvm use 1.9.3`.

`/home/$USER/.bash_profile`此外，确保在启动新 shell 时bash_profile ( ) 中的 rvm 代码是正确的。

# arrays - 在 PostgreSQL 中将位字符串转换为数组

> ID：16221588
> 
> 赞同：4
> 
> 时间：2013-04-25T18:00:47.147
> 
> 标签：arrays, postgresql, postgresql-9.2, bitstring

我有一个 160 字符的位字符串，我需要一个整数数组来存储值为 1 的位的位置。

例子：

```
bitstring = '00110101'
array = [3,4,6,8] 
```

是否可以仅使用 SQL 来执行此操作，或者我是否需要定义一个 PL/SQL 函数或类似的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T18:16:22.240

肯定可以用 SQL 编写它。这是一个起点：

```
select array(
  select substring(str from i for 1) as bit
  from generate_series(1, length(str)) as i
  where bit = '1'
); 
```

不过，您可能希望将其包装在 pl/sql 函数中，以避免到处重复代码。

* * *

工作功能：

```
create or replace function get_bit_positions(varbit) returns bit[] as $$
select array(
  select substring($1 from i for 1) as bit
  from generate_series(1, length($1)) as i
  where substring($1 from i for 1) = '1'
);
$$ language sql immutable; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T23:00:26.860

工作版本：

```
WITH x AS (SELECT '00110101'::varbit AS b)
SELECT array_agg(i)
FROM  (SELECT b, generate_series(1, length(b)) AS i FROM x) y
WHERE  substring(b, i, 1) = '1'; 
```

转换`varbit`为`text[]`. 投射到`text`并运行[`string_to_array()`](http://www.postgresql.org/docs/current/interactive/functions-array.html)。

然后您可以[`generate_subscripts()`](http://www.postgresql.org/docs/current/interactive/functions-srf.html#FUNCTIONS-SRF-SUBSCRIPTS)按索引使用和选择数组元素：

```
WITH x AS (SELECT string_to_array('00110101'::varbit::text, NULL) AS b)
SELECT array_agg(i)
FROM  (SELECT b, generate_subscripts(b,1) AS i FROM x) y
WHERE b[i] = '1' 
```

[有关 dba.SE](https://dba.stackexchange.com/questions/27279/how-do-i-preserve-the-order-of-the-original-elements-in-an-unnested-array)的相关问题的详细信息。

# android - 在 onClick 事件中获取视图的 ID 作为字符串

> ID：16221596
> 
> 赞同：6
> 
> 时间：2013-04-25T18:01:24.723
> 
> 标签：android, xml, view, onclick

嗨，我试图获取我在每个线性布局上设置的 ID，但我得到了

android.widget.LinearLayout@41032a40 或类似的，对我来说用处不大。

我已将 id 设置为 row1，这就是我想要返回的内容。

我确定我以前做过类似的事情，所以我不知道为什么它会返回上述内容。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/gridview"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<LinearLayout
    android:id="@+id/row1"
    android:layout_width="fill_parent"
    android:layout_height="30dip"
    android:background="@android:color/black"
    android:onClick="xmlClickHandler" />

<LinearLayout
    android:id="@+id/row2"
    android:layout_width="fill_parent"
    android:layout_height="30dip"
    android:background="@android:color/white"
    android:onClick="xmlClickHandler" />

<LinearLayout
    android:id="@+id/row3"
    android:layout_width="fill_parent"
    android:layout_height="30dip"
    android:background="@android:color/black" 
    android:onClick="xmlClickHandler" />

<LinearLayout
    android:id="@+id/row4"
    android:layout_width="fill_parent"
    android:layout_height="30dip"
    android:background="@color/white" 
    android:onClick="xmlClickHandler" />

<LinearLayout
    android:id="@+id/row5"
    android:layout_width="fill_parent"
    android:layout_height="30dip"
    android:background="@color/yellow" 
    android:onClick="xmlClickHandler" />
 <LinearLayout
    android:id="@+id/row6"
    android:layout_width="fill_parent"
    android:layout_height="30dip"
    android:background="@color/blue"
    android:onClick="xmlClickHandler" /> 
```

```
 public void xmlClickHandler(View v) {
    Log.d("CLICK ROW", String.valueOf(v));
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-25T18:52:08.377

可以使用 v.getID() 检查视图 ID

您可以简单地检查为

```
 if(v.getId()==R.id.row1) 
```

并相应地执行您想要的任务。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-03T18:34:42.467

你可以这样做：

```
public void xmlClickHandler(View v) {
    String viewID = getResources().getResourceName(v.getId());
} 
```

而且你必须解析结果字符串。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-25T18:23:54.417

尝试设置`android:tag="row1"`并使用`Log.d("CLICK ROW", String.valueOf(v.getTag()));`打印id。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T18:02:37.140

use `v.getId()` instead to get the Id

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-23T08:23:12.580

简单的解决方案，它只是一行代码。它可以从视图中获取任何 id。

```
String id=id=getResources().getResourceEntryName(view.getId()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-25T18:02:45.403

```
Log.d("CLICK ROW", String.valueOf(v.getId())); 
```

`v` is an instance of the View class, and you can use the `getId()` method to get the View's ID.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T18:16:57.180

我刚刚看到另一个问题，显然您不能将 id 作为字符串返回。

# mongodb - 在 MongoDB 中查找具有不包含具有特定字段值的文档的数组的文档

> ID：16221599
> 
> 赞同：76
> 
> 时间：2013-04-25T18:01:26.887
> 
> 标签：mongodb

我正在尝试查找不包含至少一个具有特定字段值的文档的所有文档。例如，这里是一个示例集合：

```
{  _id : 1,
  docs : [
        { foo : 1,
          bar : 2},
        { foo : 3,
          bar : 3}
         ]
},
{  _id : 2,
  docs : [
        { foo : 2,
          bar : 2},
        { foo : 3,
          bar : 3}
         ]
} 
```

我想在 docs 块中找到不包含至少一条 foo = 1 的记录的每条记录。在上面的示例中，只应返回第二个文档。

我尝试了以下方法，但它只告诉我是否有任何不匹配的内容（返回文档 1.

```
db.collection.find({"docs": { $not: {$elemMatch: {foo: 1 } } } }) 
```

**更新：**上面的查询确实有效。正如很多次发生的那样，我的数据是错误的，而不是我的代码。

我还查看了[$nin 运算符](http://docs.mongodb.org/manual/reference/operator/nin/)，但示例仅显示数组何时包含原始值列表，而不是附加文档。当我尝试使用以下内容执行此操作时，它会查找 EXACT 文档，而不仅仅是我想要的 foo 字段。

```
db.collection.find({"docs": { $nin: {'foo':1 } } }) 
```

反正有没有用基本的操作符来完成这个？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-04-25T18:22:49.440

使用[`$nin`](http://docs.mongodb.org/manual/reference/operator/nin/#op._S_nin)将起作用，但您的语法错误。它应该是：

```
db.collection.find({'docs.foo': {$nin: [1]}}) 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2016-07-31T13:53:53.000

使用[`$ne`](https://docs.mongodb.com/manual/reference/operator/query/ne/)运算符：

```
db.collection.find({'docs.foo': {$ne: 1}}) 
```

**更新：**我建议不要`$nin`在这种情况下使用。

`{'docs.foo': {$ne: 1}}`获取 的所有元素`docs`，并为每个元素检查该`foo`字段是否等于 1。如果找到匹配项，则从结果列表中丢弃该文档。

`{'docs.foo': {$nin: [1]}}`获取 的所有元素`docs`，并为每个元素检查其`foo`字段是否与数组的任何成员匹配`[1]`。这是一个[笛卡尔积](https://en.wikipedia.org/wiki/Cartesian_product)，您将一个数组与另一个数组进行比较，将每个元素与每个元素进行比较。尽管 MongoDB 可能很聪明并优化了这个查询，但我假设你只使用`$nin`它是因为“它与数组有关”。但是如果你了解你在这里做什么，你会意识到`$nin`这是多余的，并且可能表现不佳。

# java - 索引服务设计 - 同步/异步

> ID：16221603
> 
> 赞同：1
> 
> 时间：2013-04-25T18:01:38.333
> 
> 标签：java, interface, indexing

我需要索引项目。此服务应运行同步或异步。

我开始设计一个界面

```
public interface IndexService{
    public void index();
} 
```

还有两种实现，一种用于异步索引：

```
public class AsyncIndex implements IndexService {

    public void index(){
        //... Creates a Thread and index the items
    }

} 
```

另一个是同步索引

```
public class SyncIndex implements IndexService {

    public void index(){
        //... Creates a Thread and index the items
    }

} 
```

但是现在有另一种设计，它有一个 IndexService，它有一个标志可以作为异步服务或同步服务执行：

```
public interface IndexService{
    public void index(int mode);
} 
```

所以现在实现将知道如何基于该标志运行。

我知道第一个设计更好，但我需要利弊来解释原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T02:54:33.703

我说两个。

假设您计划使用第二种方法。您的实现可能如下所示：

```
public SyncOrAsyncIndex implements IndexService {
public void index(int mode) {
    if(mode == 0) {
        //sync processing code
    } else if (mode == 1) {
        //async procesisng code
    }

} 
```

也就是说，您是否要在此索引方法或 SyncOrAsyncIndex 类中编写所有实现。这最终可能会变得无法管理。因此， index 方法可能会像这样结束：

```
public void index(int mode) {
    if(mode == 0) {
        new SyncIndex().index(); //for example
    } else if (mode == ) {
        new AsyncIndex().index(); //for example
    }
} 
```

假设，您决定支持第三种模式。想象一下索引方法或 SyncOrAsyncIndex 类的困境。因此，需要第一种方法。

因此，根据“接口代码”策略，建议使用第一种方法。如果调用者知道索引的类型，他们就可以实例化特定类型并使用它。

否则，与第一种方法一起，可能需要第二种方法作为工厂或策略来根据传递的参数计算要使用的索引类型。然后调用者将通过 SyncOrAsyncIndex 使用 SyncIndex 或 AsyncIndex。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T09:22:28.637

我选择第一种方法是因为

1- 代码更简洁 AsyncInex 类只有与异步调用相关的代码，而 syncIndex 有自己的代码。2-你可以避免 else if

```
...
public void runService(IndexService service) {
     service.index()
}

// some where in your code
runService(new AsyncIndex());
// or
runService(new SyncIndex()); 
```

当您使用接口“IndexService”时，您可以随时更改实现而不更改客户端代码。特别是如果您使用的是 DI 框架，则可以使用它；）。

这对于不允许客户端代码了解实现非常重要。假设您正在索引的情况，例如数据库。你想在数据很大时做异步索引，或者在数据很小时做同步索引。调用者应该不知道索引的调用方式。这样，您可以在不同情况下采用不同的策略，而无需更改调用者代码。如果你采用第二种方法，你必须做一些额外的工作。

# performance - 跨数据库连接是否还会损害性能？

> ID：16221604
> 
> 赞同：0
> 
> 时间：2013-04-25T18:01:38.063
> 
> 标签：performance, join, sybase, rdbms

如果我有以下带有以下数据库和表的 RDBMS：

```
pets_database
    dogs
    cats
    bunnies
wild_animals_database
    bears
    wolves
    cheetahs 
```

如果我有一个连接`dogs`和的查询`bears`（存在于不同的数据库中，这是否比 if `dogs`and`bears`存在于同一个数据库中`animals_database`并且执行了相同的查询/连接？换句话说，跨数据库的连接是否会对性能产生不利影响，或者他们没有效果？我使用的是 Sybase ASE 15，但假设大多数企业 RDBMS 都是一样的。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:41:05.557

我会假设如果仅仅因为它必须为每个数据库构建单独的查询计划，从不同的设备，不同的缓存等读取，就会对性能产生影响。我预计影响程度将在很大程度上取决于关于查询的大小和复杂性。

# jquery - 引导验证

> ID：16221617
> 
> 赞同：1
> 
> 时间：2013-04-25T18:02:23.997
> 
> 标签：jquery

我正在使用[http://reactiveraven.github.io/jqBootstrapValidation/](http://reactiveraven.github.io/jqBootstrapValidation/)

如果没有错误，我想通过 ajax 提交表单。

我尝试的任何方法似乎都不起作用

检查错误

```
$(document).ready(function() {
$("#edit_profile input").jqBootstrapValidation({
submitSuccess: function($form, event) { 
event.preventDefault();
}
});

}); 
```

我试过了

```
$(function() {

  $('form[id="edit_profile"]').find('input,select,textarea').not('[type=submit]').jqBootstrapValidation({

 preventSubmit: false,
 submitSuccess: function (form, event) {
     event.preventDefault();
     $('#send').click();
 },
 submitError: function (form, event, errors) {
     event.preventDefault();
     }
 });

}); 
```

# send .click 提交 ajax 表单。即使出现错误，表单仍会提交

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:07:56.227

尝试改变这个 -

```
submitError: function (form, event, errors) {
     event.preventDefault();
     return false;
     } 
```

或者

在 submitSuccess: 中添加 if 语句以捕获错误并在该情况下返回 false。

# css - Moz 在元素上的渲染高度与 Webkit 不同

> ID：16221623
> 
> 赞同：0
> 
> 时间：2013-04-25T18:02:44.763
> 
> 标签：css, firefox

尝试在此[站点](http://mtthwbsh.com/sta499/home.html)上使用以下 CSS 在悬停时显示 H3 ：

```
 a > h3 {
  min-width: 100% !important;
  min-height: 100px;
  max-height: 100px;
  display: block;
  position: absolute;
  bottom: -80px;
  color: #FFF;
  padding: 25px 5px;
  box-sizing: border-box;
  -webkit-transition: all 300ms ease-in;
  -moz-transition: all 300ms ease-in;
  -ms-transition: all 300ms ease-in;
  -o-transition: all 300ms ease-in;
  transition: all 300ms ease-in;

  a:hover > h3 {
  bottom: 0;
  } 
```

出于某种原因，这在 Firefox 中的呈现方式与在 Chrome 和 Safari 中的呈现方式不同。当 min-height 设置为 100px 时，它在 Chrome 和 Safari 中运行良好，当它设置为 50px 时，它在 Firefox 中运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:03:52.580

这可能是因为 Firefox（从 20.0.1 版开始）仍然需要`-moz`该属性的供应商前缀`box-sizing`，只需添加：

```
-moz-box-sizing: border-box; 
```

# c - While 条件后跟 ;

> ID：16221628
> 
> 赞同：1
> 
> 时间：2013-04-25T18:02:52.050
> 
> 标签：c, pointers, while-loop

我被要求评论一些代码并描述它的作用。一切都很好，我很好地掌握了 switch 案例中正在做的事情，但现在我不确定是否曾经遇到过任何案例。我目前无需运行或测试此代码，因为我的主机和所有常规软件都已关闭。

除了默认情况下，是否会在此 while 循环的条件下使用开关的任何一种情况？我是否只是简单地增加到 32 并且 rByte 在它甚至进行切换之前返回？有什么用; 之后的条件呢？后面不应该是 {....} 而不是 ; ?

```
while(pCommand[--Ptr.Five] > 10 && ++i <32);
if(i==32)
{
    return rByte;
}
switch(pCommand[Ptr.Five++])
{
    case 2: ... (lots of code)
           break;
    case 4: ...  (lots of cod)
           break;
    default: ...
           break;
} 
```

此外，--Ptr.Five 与 Ptr.Five++ 相比如何处理？我的理解是第一个将指针移回并使用该值，而第二个使用当前值并发布增量。

我错过了什么吗？甚至移动过去；在 while 的条件和 while 之后缺少 {} 之后，Ptr.Five 的值不会 > 10，因此永远不会是 2 或 4？

与 ; 在这段时间的情况下，我会不会被撞到32，如果会返回rByte？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:07:34.437

循环

```
while(pCommand[--Ptr.Five] > 10 && ++i <32); 
```

递减`Ptr.Five`和递增`i`直到

*   `pCommand[Ptr.Five] <= 10`， 或者
*   `i >= 32`,

以先发生者为准。由于对感兴趣变量的更改是在循环条件中完成的，因此循环体应该为空。（并不是说它的风格特别好，但我见过更糟的。）

如果`i == 32`，`switch`则未达到，否则，如果`i < 32`，您知道 ，`pCommand[Ptr.Five] <= 10`则可以达到两种非默认情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T18:08:04.190

分号本身就是一个空语句。这样做例如

```
while (complicated_expression)
    ; 
```

是相同的：

```
while (complicated_expression)
{
} 
```

它通常在`complicated_expression`有副作用时使用，因此不需要循环体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T18:11:59.010

不可能回答你的问题。即使我们假设`i`从 开始`0`，谁知道`pCommand[Ptr.Five]`这个代码块开头的值是什么？

解决一些*可以*回答的问题，如果我们重写`while`这样的内容会有所帮助：

```
while(pCommand[--Ptr.Five] > 10 && ++i <32)
{
    /* do nothing as the body of the loop... nothing at all. 
     * Everything happens in the condition.
     */
} 
```

分号的语法是有效的，如果一开始有点混乱：想想分号在 C/C++ 中的含义（终止语句），然后想想在这种情况下终止的语句是什么（提示：这是一个“不手术”）。

`--Ptr.Five`和之间的区别`Ptr.Five--`就是您所描述的：第一个变体（预减量）将减量`Ptr.Five`，然后返回结果值；第二个变体（后递减）将递减`Ptr.Five`但返回递减*之前*的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T18:10:33.423

```
while(pCommand[--Ptr.Five] > 10 && ++i <32); 
```

没有主体，但循环条件本身有副作用，所以它*确实*做了一些事情。

我们可以将其重写为：

```
while (1) {
    --Ptr.Five;
    if (pCommand[Ptr.Five] <= 10)
        break;
    ++i;
    if (i == 32)
        break;
}
if (i == 32) {
    /* we never hit the pCommand condition */
} 
```

至于*为什么*：

*   它向后搜索`pCommand`，从偏移量`Ptr.Five`到之前最多 32 个条目，寻找一个值`<= 10`
*   如果在 32 个条目中没有找到这样的值，则返回`rByte`
*   如果它*确实*找到了这样的值，它会打开它并做一些工作
    *   `PtrFive`在分派开关后递增以指示该值*之后的下一个条目*

* * *

> 此外，--Ptr.Five 与 Ptr.Five++ 相比如何处理？我的理解是第一个将指针移回并使用该值，而第二个使用当前值并发布增量。

这是完全正确的。在：

```
pCommand[--Ptr.Five] > 10 
```

`Ptr.Five`在计算表达式的其余部分之前递减，而在：

```
pCommand[Ptr.Five++] 
```

表达式用 的*旧*值求值`Ptr.Five`，然后立即递增。在这里，这意味着开关基于旧条目`pCommand`（结束 while 循环的条目，因为它是`<= 10`），但`Ptr.Five`在案例内的代码执行之前递增。

* * *

关于副作用的快速说明：正如 John Bode 在评论中指出的那样，我对前减量和后增量表达式的描述并不十分准确。`Ptr.Five` *这是因为不必*立即将新值存储到其中。但是，由于它确实必须（好像）在下一个序列点（这里是 ）之前发生`&&`，所以没有真正的歧义。

如果您在单个语句中将多个相互依赖的副作用表达式串在一起，这通常只会成为一个问题。所以，你知道，尽量避免这种情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T18:10:34.813

假设`i`开始于`0`- while 循环正在解析`pCommand`数组的 31 个元素 (1-31)，在检查值之前递减`Ptr.Five`，寻找小于 的值`10`。如果没有找到，则函数返回`rByte`——然后在递增`pCommand[Ptr.Five]` **之前**检查 的值……因此，开关中使用的值与条件中使用的值相同`while`。该值很可能是我们知道的任何开关条件，它小于`10`

# r - 在数据框的每一行中选择 2 个对应的列

> ID：16221629
> 
> 赞同：0
> 
> 时间：2013-04-25T18:02:52.527
> 
> 标签：r, row, dataframe, vectorization

我很抱歉，因为这似乎是一个基本问题，但我一直在寻找更好的解决方案，但没有找到。我有以下类型的数据。

```
myDATA<-data.frame(rbind(c("red","blue","green", "dog","hat","cat")
                     ,c("blue","green", "blue","dog","hat","cat")
                     ,c("green","blue","blue","dog","hat","cat")
                     ,c("green","red", "blue","dog","hat","cat")
                     )
               )
names(myDATA)<-c(paste("Color",1:3,sep=""),paste("Stim",1:3,sep=""))
myDATA$greenImage<-NA 
```

这使：

我的数据

```
+-----------------------------------------------------+
|   Color1 Color2 Color3 Stim1 Stim2 Stim3 greenImage |
+-----------------------------------------------------+
| 1    red   blue  green   dog   hat   cat         NA |
| 2   blue  green   blue   dog   hat   cat         NA |
| 3  green   blue   blue   dog   hat   cat         NA |
| 4  green    red   blue   dog   hat   cat         NA |
+-----------------------------------------------------+ 
```

列`Color`与`Stim`列按编号对应，例如`Stim1`显示在`Color1`等。对于每一行，一个`Stim`以绿色显示。我想找到它`Stim`并保存在一个名为`greenImage`.

我从一些在这里可能有用的帖子中收集到，`apply()`但我无法让它发挥作用。我相当不雅的解决方案是以下形式的循环，

```
for (i in 1:nrow(myDATA)) {
  x <- match("green", unlist(myDATA[i,paste("Color", 1:3, sep="")]))
  myDATA[i,"greenImage"] <- as.character(myDATA[i, paste("Stim", x, sep="")])
} 
```

导致：

```
myDATA
+-----------------------------------------------------+
|   Color1 Color2 Color3 Stim1 Stim2 Stim3 greenImage |
+-----------------------------------------------------+
| 1    red   blue  green   dog   hat   cat        cat |
| 2   blue  green   blue   dog   hat   cat        hat |
| 3  green   blue   blue   dog   hat   cat        dog |
| 4  green    red   blue   dog   hat   cat        dog |
+-----------------------------------------------------+ 
```

但是，实际数据集有超过 10000 行，所以我的解决方案效率很低。任何人都可以提出一种更有效的替代方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:14:52.670

只需用于`ifelse`矢量化您的比较：

```
for (i in 1:3) {
  myDATA$greenImage = ifelse (myDATA[,i] == "green",
                              as.character(myDATA[,i+3]),
                              myDATA$greenImage)
} 
```

请注意，将字符串从's 中`as.character`取出是必需的。`factor`如果您`stringsAsFactors = FALSE`在创建`data.frame`.

# sockets - cygwin 上 FD_ISSET 的 pselect 问题

> ID：16221637
> 
> 赞同：1
> 
> 时间：2013-04-25T18:03:29.607
> 
> 标签：sockets, select, cygwin, signals

我正在运行 cygwin 并使用 pselect 来监视子进程的套接字和文件描述符。

根据我在这里找到的一些示例[http://www.linuxprogrammingblog.com/code-examples/using-pselect-to-avoid-a-signal-race](http://www.linuxprogrammingblog.com/code-examples/using-pselect-to-avoid-a-signal-race)并且手册页 pselect 应该返回设置的文件描述符的数量掩码字段（[http://linux.die.net/man/2/pselect](http://linux.die.net/man/2/pselect)）。

现在，当我连接到我的服务器时，pselect 返回，这很好。但是当我使用 FD_ISSET 测试文件描述符时，它们总是返回 true：

```
FD_ZERO(&readers);
FD_ZERO(&writers);
FD_ZERO(&exceptions);

FD_SET(fileno(stdin), &readers);
FD_SET(socket, &readers);
pret = pselect(FD_SETSIZE, &readers, &writers, &exceptions, NULL, &mSignalMask); 
```

, &readers, &writers, &exceptions, NULL, &mSignalMask);

```
if(pret <= 0)
{
    // ignore for now
    continue;
}

if(FD_ISSET(fileno(stdin), &readers))
{
    string s;
    cin >> s;
    cout << "stdin: " << s << endl;  // blocks because the code always gets here even when 
                // pselect returns because of a childsignal without any data.
    continue;
 }

if(FD_ISSET(socket, &readers))
{
    accept();   // blocks because the code always gets here even when 
                // pselect returns because of a childsignal without any data.
    cout << "task created connection from " <<task->getClientHost() << endl;
    continue;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T08:49:40.320

自己发现了问题。FD_ISSET 只能在 pselect 的结果 > 0 时使用，否则 FD_ISSET 的返回值与调用之前一样。所以最好在 pselect 返回 <= 0 时将其视为未定义；

# methods - w3wp.exe 在调用 [System.Data.Odbc]::OdbcConnection.Open() 时崩溃

> ID：16221638
> 
> 赞同：0
> 
> 时间：2013-04-25T18:03:29.597
> 
> 标签：methods, crash, odbc, w3wp

我正在使用 Microsoft Visual Web Developer 2010 Express 构建一个网页，该网页从数据库中提取数据以填充带有相关选项的下拉列表。当我在开发人员中调试页面时，一切正常，但是当我通过使用 IE 导航到生产页面来测试生产页面时，我得到一个 Visual Studio 即时调试器窗口，显示“w3wp.exe 中发生未处理的 win32 异常 [ #####]" 其中##### 是每次出现错误时都会更改的数字。经过一番研究，我发现当程序尝试调用任何 OdbcConnection.Open() 方法时会发生错误。下面是来自 DebugDiag 的一些异常信息。

异常信息：

```
In w3wp__TTFCUAppPages__PID__1704__Date__04_25_2013__Time_12_37_29PM__536__Second_Chance_Exception_E0434352.dmp the assembly instruction at KERNELBASE!RaiseException+58 in C:\Windows\System32\KERNELBASE.dll from Microsoft Corporation has caused a CLR Exception on thread 23with the following error information:

    Type: 

System.AccessViolationException

    Message: 

Attempted to read or write protected memory. This is often an indication that other memory is corrupt. 
```

这是调用堆栈：

```
.NET Call Stack

Function

Full Call Stack

Function

    Arg 1

    Arg 2

    Arg 3

    Arg 4

  Source

KERNELBASE!RaiseException+58

    e0434352

    00000001

    00000005

    058bf568

clr!RaiseTheExceptionInternalOnly+276

    181aba38

    00000000

    00000000

    181aba38

clr!RaiseTheException+87

    181aba38

    00000000

    00000004

    058bf760

clr!RaiseTheException+fe

    00000000

    00000004

    00000004

    5df9e75e

clr!RealCOMPlusThrow+3d

    181aba38

    00000000

    00000004

    058bf76c

clr!RealCOMPlusThrow+12

    181aba38

    00000004

    56dd0faf

    6d7e95d4

clr!Thread::RaiseCrossContextException+3e0

    00000000

    058bf7bc

    56dd0093

    03d1ea38

clr!Thread::DoADCallBack+2f3

    00000002

    6d98fe4e

    058bf878

    00000001

clr!UM2MDoADCallBack+c0

    00b44760

    ffffffff

    058bf8e0

    00000010

0x00a51ff8

    00000000

    00ac74a4

    00000003

    0000000c

webengine4!W3_MGD_HANDLER::ProcessNotification+5b

    00ac74a4

    69f81398

    058bf95c

    6d7878af

webengine4!ProcessNotificationCallback+36

    00ac74a4

    56dd019f

    0000ffff

    00040004

clr!UnManagedPerAppDomainTPCount::DispatchWorkItem+195

    058bf9bf

    058bf9be

    56dd010f

    00000000

clr!ThreadpoolMgr::NewWorkerThreadStart+20b

    00000000

    56dd02f7

    00000000

    6d788499

clr!ThreadpoolMgr::WorkerThreadStart+3d1

    00000000

    76f637fa

    76f637b8

    00000000

clr!Thread::intermediateThreadProc+4b

    00b858b8

    058bfd98

    76f6377b

    00b858b8

kernel32!BaseThreadInitThunk+e

    00b858b8

    7dd9933f

    00000000

    00000000

ntdll!__RtlUserThreadStart+70

    6d877698

    00b858b8

    00000000

    00000000

ntdll!_RtlUserThreadStart+1b

    6d877698

    00b858b8

    00000000

    00000000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T19:46:22.907

解决方案是将 ASPNET 内置用户添加到本地 DB2ADMNS 和 DB2USERS 组。开始菜单 右键单击​​“计算机” 选择“管理” 展开“本地用户和组” 单击“组” 找到“DB2ADMNS”和“DB2USERS”组。将“ASPNET”用户添加到每个组。

# php - Codeigniter form_validation 不起作用

> ID：16221639
> 
> 赞同：-1
> 
> 时间：2013-04-25T18:03:36.453
> 
> 标签：php, codeigniter, validation

我过去使用过 codeigniter，但我正在建立一个社交网络，并且正在注册。我已经自动加载了表单和表单验证助手。我有一个用于我的用户控制器/注册功能的表单，并且我设置了验证规则，但它忽略了它们并继续到下一页。我不能为我的生活弄清楚为什么。任何帮助表示赞赏..代码和规则不完整（显然）但验证应该在这一点上工作

看法

```
 <?php echo validation_errors('<p class="error">'); ?>
                <?php echo form_open('user/register/1'); ?>
                <?php echo form_hidden('register_id', $randomcode); ?>
                <?php echo form_label('First Name', 'first_name'); ?>
                <?php echo form_input('first_name',set_value('first_name')); ?>
                <br />
                <?php echo form_label('Last Name', 'last_name'); ?>
                <?php echo form_input('last_name',set_value('last_name')); ?>
                <br />
                <?php echo form_label('Gender', 'gender:'); ?>
                <?php echo form_radio('gender', 'male'); ?> Male
                <?php echo form_radio('gender', 'female'); ?> Female
                <br />
                <?php echo form_label('Date of Birth:', 'birthdate'); ?>
                <?php echo form_date('birthdate'); ?>
                <br />
                <?php echo form_label('Zipcode:', 'zipcode'); ?>
                <?php echo form_input('zipcode',set_value('zipcode')); ?>
                <br />
                <?php echo form_label('Email:', 'email'); ?>
                <?php echo form_email('email',set_value('email')); ?>
                <br />
                <?php echo form_label('Password', 'password'); ?>
                <?php echo form_password('password'); ?>
                <br />
                <?php echo form_label('Confirm', 'password2'); ?>
                <?php echo form_password('password2'); ?>
                <br />
                <?php
                $data = array(
                    'name'        => 'submit',
                    'class'       => 'big-blue-btn',
                    'value'       => 'Sign Up'
                    );
                ?>
                <?php echo form_submit($data); ?>
            <?php echo form_close(); ?> 
```

控制器

```
public function register($step){
    if($step == 1){
        $this->form_validation->set_rules('first_name', 'first_name', 'required');
                    $this->form_validation->set_rules('last_name', 'last_name', 'required');

        if($this->form_validation->run() == FALSE){
            //Views
            $data['main_content'] = 'public/user/register1';
            $this->load->view('public/template', $data);
        } else {
            //Post values to array
            $data = array(
                    'register_id' => $this->input->post('register_id'),
                    'first_name' => $this->input->post('first_name'),
                    'last_name' => $this->input->post('last_name'),
                    'gender' => $this->input->post('gender'),
                    'birthdate' => $this->input->post('birthdate'),
                    'zipcode' => $this->input->post('zipcode'),
                    'email' => $this->input->post('email'),
                    'password' => $this->input->post('password'),
                    'password2' => $this->input->post('password2')
                );

            //Send input to model
            $this->User_model->register1($data);

            $data['show_sidebar'] = FALSE;
        }

    } elseif($step == 2){
        //Send input to model
        $this->User_model->register2($data);

    } elseif($step == 3){
        //Send input to model
        $this->User_model->register3($data);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:41:43.717

查看您的代码，您的第一个 if 缺少右括号。

# c++ - char* 到 number 的值

> ID：16221641
> 
> 赞同：1
> 
> 时间：2013-04-25T18:03:39.800
> 
> 标签：c++, arduino

我有以下代码：

```
char msg[10];
int len = acc.read(msg, sizeof(msg), 1); // This will read "R#" where # can be any number.
int number = getNumber(msg); 
```

该函数`getNumber`如下所示：

```
int getNumber(char* pMsg){
  Serial.println(positionMsg);
  positionMsg += 1;
  Serial.print('[');
  Serial.print(positionMsg);
  Serial.println(']');
} 
```

这个函数打印出来：

```
R115
[115] 
```

当消息中的数字是`115`。如何返回整数`115`？

我来自Java背景，我不懂指针。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T18:07:55.487

最简单的方法是使用 atoi： [http ://www.cplusplus.com/reference/cstdlib/atoi/](http://www.cplusplus.com/reference/cstdlib/atoi/)

```
#include <cstdlib>  
int getNumber(char* pMsg){
    //assuming format is always R#
    return std::atoi((char*)(pMsg+1));
} 
```

或者，您可以直接使用 atoi 而不是 getNumber...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T18:16:18.507

函数指定 int 的返回类型，所以我们必须返回一个整数。使用 sscanf() 允许您在一个函数调用中解析/格式化其他数据类型。

在 C++ 中：使用 sscanf()

```
 /* sscanf example */
    #include <cstdlib>

    int getNumber(char* pMsg){
        int result;
        ...
        sscanf (pMsg,"R%d",&result);  
        return result;
    } 
```

# apache-zookeeper - Apache Zookeeper：跨数据中心的节点分布

> ID：16221651
> 
> 赞同：3
> 
> 时间：2013-04-25T18:04:08.283
> 
> 标签：apache-zookeeper, solrcloud

我正在开发一个全新的 SolrCloud - ZooKeeper 基础设施。

一些背景资料：

*   所有其他服务（主要是网站基础设施）分布在**两个数据中心**，具有**主动-主动**配置。
*   在网络层面，服务器设置在扩展 LANS 上，数据中心采用暗光纤。所以延迟是最小的。
*   SolrCloud - ZooKeeper 基础设施将被大多数应用程序使用。

我有一个 Solr Cloud 和一个正在运行的 ZooKeeper 集成。在这个级别的实施很好。

但我想知道如何分发我的 ZooKeeper 服务器。我必须有奇数个服务器，但我只有 2 个数据中心。如果一个失败，我有 50-50 的机会失去多数。

有任何想法吗？到目前为止，我想到了：

*   请求第三个数据中心（不太可能发生，$$$！）

*   每个数据中心托管 2 个，在外部云提供商（亚马逊或...？）上托管 1 个。再次$$$

*   在数据中心 1 设置一个奇数，并在站点 2 上使用观察者。如果站点 1 发生故障，会发生什么情况？SolrCloud 可以仅与 1 个观察者一起工作吗？

感谢您的任何想法和评论。

网卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T09:23:32.723

如果您的要求是为来自本地数据中心的所有搜索请求（请求的来源）提供服务，那么您不需要进行跨 dc zk 部署。导致跨 dc zk 部署只需要在 DC 崩溃中幸存下来（很可能不会发生，这就是你支付 $$$$ 的原因）所以在这种情况下不需要在多个 DC 中生成 zk 集群

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-29T18:15:26.873

很久以前，但是，让我们分享一下我所做的。

我得到了第三个站点来托管另一个 ZooKeeper 实例。该站点是我公司的另一个办公室，而不是“完整的 DC”。所以每个站点都有 1 个 ZK。

使我能够将一个集群分布在 3 个 DC 上的原因是它们之间的距离足够近，可以在它们之间形成一根深色光纤。延迟非常低，不会影响 ZK 性能。

然后对于 SOLR，我在两个主要 DC 上获得了完整的副本。第三个办公室仅托管一个 ZK 用于法定人数。使用完整副本，我拥有每个 DC 中的所有数据。如果以后我的 SOLR 需要增加，我会分片，但现在我们的索引很小。

4 年来它已经被证明是可靠的，有 1 次失败。它在第三个办公室，而不是在 DC。

# php - php删除数组中的重复单词

> ID：16221657
> 
> 赞同：2
> 
> 时间：2013-04-25T18:04:44.810
> 
> 标签：php, arrays

抱歉英语不是我的母语，可能问题标题不太好。我想做这样的事情。

```
$str = array("Lincoln Crown","Crown Court","go holiday","house fire","John Hinton","Hinton Jailed"); 
```

这是一个数组，“Lincoln Crown”包含“Lincoln”和“Crown”，因此删除包含这两个词的下一个词，并且“Crown Court(contain Crown)”已被删除。

在另一种情况下。“John Hinton”包含“John”和“Hinton”，因此“Hinton Jailed(contain Hinton)”已被删除。最终输出应该是这样的：

```
$output = array("Lincoln Crown","go holiday","house fire","John Hinton"); 
```

因为我的php技术不好，不是简单的用array_unique()array_diff()，所以开个问题求助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:13:48.410

似乎您需要一个循环，然后在数组中构建一个单词列表。

喜欢：

```
<?
// Store existing array's words; elements will compare their words to this array
// if an element's words are already in this array, the element is deleted
// else the element has its words added to this array
$arrayWords = array();

// Loop through your existing array of elements
foreach ($existingArray as $key => $phrase) {
    // Get element's individual words
    $words = explode(" ", $phrase);

    // Assume the element will not be deleted
    $keepWords = true;

    // Loop through the element's words
    foreach ($words as $word) {
        // If one of the words is already in arrayWords (another element uses the word)
        if (in_array($word, $arrayWords)) {
            // Delete the element
            unset($existingArray[$key]);

            // Indicate we are not keeping any of the element's words
            $keepWords = false;

            // Stop the foreach loop
            break;
        }
    }

    // Only add the element's words to arrayWords if the entire element stays
    if ($keepWords) {
        $arrayWords = array_merge($arrayWords, $words);
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T18:25:03.883

我认为这可能有效：P

```
function cool_function($strs){
    // Black list
    $toExclude = array();

    foreach($strs as $s){
        // If it's not on blacklist, then search for it
        if(!in_array($s, $toExclude)){
            // Explode into blocks
            foreach(explode(" ",$s) as $block){
                // Search the block on array
                $found = preg_grep("/" . preg_quote($block) . "/", $strs);
                foreach($found as $k => $f){
                    if($f != $s){
                        // Place each found item that's different from current item into blacklist
                        $toExclude[$k] = $f;
                    }
                }
            }
        }
    }

    // Unset all keys that was found
    foreach($toExclude as $k => $v){
        unset($strs[$k]);
    }

    // Return the result
    return $strs;
}

$strs = array("Lincoln Crown","Crown Court","go holiday","house fire","John Hinton","Hinton Jailed");
print_r(cool_function($strs)); 
```

倾倒：

```
Array
(
    [0] => Lincoln Crown
    [2] => go holiday
    [3] => house fire
    [4] => John Hinton
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:21:37.527

正如我在你的情况下所做的那样：

```
$words = array();

foreach($str as $key =>$entry)
{
   $entryWords = explode(' ', $entry);
   $isDuplicated = false;
   foreach($entryWords as $word)
        if(in_array($word, $words))
            $isDuplicated = true;
   if(!$isDuplicated)
        $words = array_merge($words, $entryWords);
   else
        unset($str[$key]);
}

var_dump($str); 
```

输出：

```
array (size=4)
  0 => string 'Lincoln Crown' (length=13)
  2 => string 'go holiday' (length=10)
  3 => string 'house fire' (length=10)
  4 => string 'John Hinton' (length=11) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-29T12:35:12.820

我可以想象有很多技术可以提供您想要的输出，但是您需要的逻辑在您的问题中定义不明确。我假设整个单词匹配是必需的——所以在任何正则表达式模式中都应该使用单词边界。没有提到区分大小写。我不确定是否只有完全唯一的元素（多词字符串）应该将它们的词输入黑名单。我将提供一些片段，但选择适当的技术将取决于确切的逻辑要求。

[演示](https://3v4l.org/4Aplt)

```
$output = [];
$blacklist = [];
foreach ($input as $string) {
    if (!$blacklist || !preg_match('/\b(?:' . implode('|', $blacklist) . ')\b/', $string)) {
        $output[] = $string;
    }
    foreach(explode(' ', $string) as $word) {
        $blacklist[$word] = preg_quote($word);
    }
}
var_export($output); 
```

[演示](https://3v4l.org/8rQ33)

```
$output = [];
$blacklist = [];
foreach ($input as $string) {
    $words = explode(' ', $string);
    foreach ($words as $word) {
        if (in_array($word, $blacklist)) {
            continue 2;
        }
    }
    array_push($blacklist, ...$words);
    $output[] = $string;
}
var_export($output); 
```

## 我最喜欢它，因为它在父循环中执行最少的迭代，更紧凑，并且不需要黑名单数组的声明/维护。

[演示](https://3v4l.org/iZQkt)

```
$output = [];
while ($input) {
    $output[] = $words = array_shift($input);
    $input = preg_grep('~\b(?:\Q' . str_replace(' ', '\E|\Q', $words) . '\E)\b~', $input, PREG_GREP_INVERT); 
}
var_export($output); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-25T18:11:35.377

您可以[分解](http://php.net/manual/en/function.explode.php)原始数组中的每个字符串，然后使用循环比较每个单词（将一个数组中的每个单词与另一个数组中的每个单词进行比较，如果它们匹配，则删除整个数组）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-08-21T18:03:26.397

**array_unique()**示例

```
<?php
$input = array("a" => "green", "red", "b" => "green", "blue", "red");
$result = array_unique($input);
print_r($result);
?> 
```

输出：

```
Array
(
    [a] => green
    [0] => red
    [1] => blue
) 
```

[资源](http://php.net/manual/en/function.array-unique.php)

# sql-server-2008 - 为什么使用表达式的数据类型 SByte 的变量评估为 0？

> ID：16221662
> 
> 赞同：1
> 
> 时间：2013-04-25T18:04:51.223
> 
> 标签：sql-server-2008, ssis, bids

我试图在运行时使用直接在变量上的表达式将一些 SBYTE 类型的变量设置为 null。该变量的范围是控制流。

为什么变量评估为 0 而不是 null？如何将其设置为空？

![在此处输入图像描述](https://i.stack.imgur.com/3FkP6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T20:30:46.780

这是因为 SSIS 变量不能是`NULL`. [奇怪的是，我在文档](http://msdn.microsoft.com/en-us/library/ms141085.aspx)中找不到任何明确说明它们不可能的`NULL`内容，它只是说

> 用户定义变量的值可以是文字或表达式

但是（旧的）[Microsoft 博客条目](http://blogs.msdn.com/b/mattm/archive/2007/06/15/optional-date-parameter.aspx)说“如果 SSIS 变量支持 NULL 值......”并且[Professional Microsoft SQL Server 2012 Integration Services](https://rads.stackoverflow.com/amzn/click/com/111810112X)书[说](http://books.google.com/books?id=7_g0SocQ3CcC&pg=SA6-PA7&lpg=SA6-PA7&dq=ssis%20variable%20default%20value&source=bl&ots=LMDF3X95nJ&sig=v7EKclJsQ9qas28W9LAsR7twS24&hl=en&sa=X&ei=WI55UcrmAoGm8ATW5oDACg&ved=0CIYBEOgBMAk#v=onepage&q=ssis%20variable%20default%20value&f=false)：

> 在 SSIS 中，变量不能设置为`NULL`. 相反，每个变量数据类型在没有值的情况下维护一个默认值。

事实上，如果你只评估`NULL(DT_UI1)`你会得到零；评估`NULL(DT_BOOL)`给出`False`；评估`NULL(DT_DATE)`给出`12/30/1899 12:00:00 AM`。

并且使用表达式将变量设置为`NULL`也不起作用：如果您创建一个`Int32`变量，设置`EvaluateAsExpression`并`True`输入该值，`NULL(DT_UI4)`那么您会收到错误“属性值无效”，并显示详细消息“NULL(DT_UI4) is不是 Int32 的有效值”。

# c# - 如果语音识别语言设置为英语以外的任何内容 - 美国，则程序不会加载

> ID：16221664
> 
> 赞同：1
> 
> 时间：2013-04-25T18:04:53.850
> 
> 标签：c#, visual-studio, .net-4.0, voice-recognition

我在我的程序中添加了语音识别功能。但是，如果我尝试运行程序并且语音属性中的语言设置为“Microsoft Speech Recognizer 8.0 for Windows (English - US)”以外的任何内容，则程序无法加载。

我想拥有它，以便无论选择哪种语言，程序都会加载。

我的语音命令代码如下：

```
vcstat.Text = "Voice Control Enabled";
            recognizer = new SpeechRecognizer();
            recognizer.SpeechDetected += recognizer_SpeechDetected;
            recognizer.SpeechRecognitionRejected += recognizer_SpeechRecognitionRejected;
            recognizer.SpeechRecognized += recognizer_SpeechRecognized;  
        GrammarBuilder grammar = new GrammarBuilder();
            grammar.Append(new Choices("Cut", "Copy", "Paste", "Select All Text", "Print", "Unselect All Text", "Delete", "Save", "Save As", "Open", "New", "Close Basic Word Processor"));
            recognizer.LoadGrammar(new Grammar(grammar)); 
```

还有一些代码，但这与实际命令有关，所以我认为没有必要在这里发布。

如果有人可以帮助我找出一种方法来允许程序启动，无论使用何种语音识别引擎，我都会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:15:51.613

如果客户端计算机上安装了支持一种语言的 MUI 语言包，则只能使用其他语言的语音识别。

[http://answers.microsoft.com/en-us/windows/forum/windows_7-windows_programs/windows-7-speech-recognition-language-selection/0a859099-a76d-4799-abe9-847997399927](http://answers.microsoft.com/en-us/windows/forum/windows_7-windows_programs/windows-7-speech-recognition-language-selection/0a859099-a76d-4799-abe9-847997399927)

# c# - 如何减少多个图像的内存使用量？

> ID：16221673
> 
> 赞同：2
> 
> 时间：2013-04-25T18:05:30.143
> 
> 标签：c#, silverlight, windows-phone-7, memory, bitmapimage

[我的应用程序从这里](http://radar.weather.gov/ridge/RadarImg/NCR/)下载了六张图片并循环播放。我以 GIF 格式下载图像，使用[.NET Image Tools](http://imagetools.codeplex.com/)将它们转换为 PNG 格式，并将每个图像存储`BitmapImage`为`List<BitmapImage>`.

我用来将下载的图像添加到图像列表的代码是：

```
List<BitmapImage> images = new List<BitmapImage>();
//WebClient used for download

 ...

    GifDecoder decoder = new GifDecoder();
    ExtendedImage eim = new ExtendedImage();
    decoder.Decode(eim, DOWNLOADEDIMAGESTREAM);

    using (MemoryStream ms = new MemoryStream())
        {
            WriteableBitmap wbmp = eim.ToBitmap();
            PngEncoder encoder = new PngEncoder();
            encoder.Encode(eim, ms);
            ms.Flush();
            ms.Position = 0;

            BitmapImage bmp = new BitmapImage();
            bmp.SetSource(ms);
            ms.Close();
            images.Add(bmp);
        }
    e.Result.Dispose(); 
```

每个转换后的图像大约为 10-20 KB，大小为 600px x 550px。（原始 GIF 的大小约为 2/3。）

下载图像后，我的内存使用量约为 80 MB。如果不下载图像，内存使用量约为 50 MB。30 MB 用于存储 6 张图像的内存似乎很大，总大小约为 90 KB。此外，它会将我的帧速率降低到大约 5 或 6，这会在用户缩放或移动我的图像时导致性能问题。（我目前没有显示图像，只是将它们存储在内存中。我用来缩放和移动的图像是一个测试，在我的两次内存测量中**都包含在内。）**

我还想增加下载图像的大小，但是他们已经使用的内存量使这不合理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:17:04.480

忘记压缩图像有多大。从它创建位图后，它将是 600x550x（可能是每像素 3 或 4 个字节）。因此，您正在为每张图像查看超过 1MB 的空间。在内存中，它们存储为未压缩的位图。这不占 30MB，但如果您真的关心内存使用的详细信息，请使用 SciTech 的 .NET Memory Profiler（可在此处试用：http: [//memprofiler.com/](http://memprofiler.com/)），您可以找到确定内存被占用的位置。

我不隶属于 SciTech。在过去的十年中，我使用了几次探查器（包括我在项目中经常使用它的几年）。我发现它是确定 .NET 中如何使用内存的更准确的方法之一。否则，我发现很多猜测经常是错误的假设。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:22:30.620

在我看来，我们可以在 WP7 上解决，因为手机屏幕很小，我们无法按照我们的意愿显示图像的全部内容。我们可以下载，但不要显示原始文件，我们应该减少与手机屏幕正确的宽度和高度。只是我的两分钱。

# sharepoint-2010 - Sharepoint 2010 日期和计算字段

> ID：16221674
> 
> 赞同：0
> 
> 时间：2013-04-25T18:05:31.057
> 
> 标签：sharepoint-2010

出于某种原因，我不假装理解设置为返回日期的计算字段以这种格式返回代码中的值：

“日期时间；#2015-04-25 00:00:00”

因此将 myDate 调暗为 datetime = oMasterItem("Contract End Date") 失败，并且您也不能转换该值。

如何在不进行字符串操作的情况下将其转换为真实的日期格式？

（或者我错过了什么明显的东西？）

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T06:09:22.503

检查一下： [SharePoint - 无需手动解析即可获取计算字段的值](https://stackoverflow.com/questions/898291/sharepoint-get-value-of-calculated-field-without-manual-parsing)

你可以这样做：

```
SPFieldCalculated cf = (SPFieldCalculated)myItem.Fields["CIDandTitle"];
string value = cf.GetFieldValueForEdit(myItem["CIDandTitle"]); 
```

或者

```
string value = cf.GetFieldValueAsText(myItem["CIDandTitle"]); 
```

# magento - Magento 结帐重定向到购物车让我回到产品页面

> ID：16221677
> 
> 赞同：2
> 
> 时间：2013-04-25T18:05:48.453
> 
> 标签：magento, redirect

当我去购物车然后继续在 https 上结帐时遇到问题，它不会将我重定向到同一页面，而不是它在产品页面上返回。有人对此问题有一些解决方案吗？谢谢

# facebook-apps - 找回丢失的 Facebook 应用

> ID：16221684
> 
> 赞同：0
> 
> 时间：2013-04-25T18:06:15.990
> 
> 标签：facebook-apps

我是我公司的一个团队的新成员，该团队正在复兴与 Facebook 集成的旧产品，我们希望继续开发 Facebook 方面的东西，但我们似乎找不到登录应用程序的凭据，甚至找不到谁有权访问它。

我们正在尝试恢复的应用是“HaloMobile”。不过要注意的一件事是帖子上的应用名称不再是链接。这是否意味着该应用程序已以某种方式被禁用？

我显然不是在要求凭据。在这一点上，我只是试图“找到”该应用程序，并可能确定当前谁被分配为管理员角色，或者我的选择是什么。如果有一个与应用程序关联的电子邮件地址，也许我们可以向该电子邮件发送转移请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T07:45:37.687

如果您可以从代码库中检索两条信息，即**App ID**和**App Secret**，那么您可以使用以下端点检索 app 中分配的角色列表，

```
https://graph.facebook.com/<App_ID>/roles?access_token=<App_ID>|<App_Secret> 
```

一旦您知道角色以及分配给它的用户的用户 ID，您就可以通过联系他继续恢复应用程序。
此外，您可能希望查看有关[Application](https://developers.facebook.com/docs/reference/api/application/)的文档，其中列出了您可以检索的各种字段，以获取所需的信息以重新访问您的应用程序，例如`user_support_email`

```
https://graph.facebook.com/<App_ID>?
        fields=name,description,creator_uid,user_support_email
        &access_token=<App_ID>|<App_Secret> 
```

# java - MiniMax 实现

> ID：16221686
> 
> 赞同：1
> 
> 时间：2013-04-25T18:06:23.547
> 
> 标签：java, minimax

我正在尝试用 Java 编写一个小型 AI 算法来实现 miniMax 算法。

以此为基础的游戏是两人游戏，其中两名玩家每回合移动一次，每个棋盘位置导致每个玩家得分。玩家 X 的位置的“质量”是通过从玩家 X 在该位置的得分中减去对手的得分来评估的。每一步都用一个整数表示（即输入 1 移动一，输入 2 移动二等）

我知道 miniMax 应该使用递归来实现。目前我有：

一种`evaluate()`方法，它将表示棋盘状态的对象（即“BoardState”对象和称为“max”的布尔值（签名将是*evaluate(BoardState myBoard, boolean max)*）作为参数。

轮到玩家 X 时 max 为真。给定一个棋盘位置，它将评估所有可能的移动并返回对玩家 X 最有利的移动。如果轮到对手，max 将为 false，该方法将返回对玩家 X 最不利的移动（即：对玩家 y 最有利）

但是，我在编写实际`miniMax`方法时遇到了困难。我的一般结构是这样的：

```
public int miniMax(GameState myGameState, int depth) 
```

因此我提交了初始的游戏状态和我希望它研究的“深度”。

然后我会有类似的东西：

```
int finalMove = 0;
while(currentDepth < depth) {
    GameState tmp = myGameState.copy();
    int finalMove = evaluate(tmp, true or false);
    iniMax(tmp.makeMove(finalMove));

}
return finalMove; 
```

这听起来像是一个合理的实现吗？有什么建议么？:)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T01:56:11.543

那行不通。

细节 ：

1.  它会导致无限循环。currentdepth 永远不会增加
2.  您对评估的定义似乎与大多数人不同。通常评估函数会返回游戏状态的预测值。您对评估函数的定义不与 minimax 函数的定义相同吗？
3.  miniMax 和 MiniMax 有区别吗？因为如果你的意思是递归，那么你需要在调用下一个 miniMax 时传递 depth-1

minimax 的思想是深度优先搜索。并且**仅**评估叶节点（具有最大深度的节点或获胜或平局的节点），如果当前玩家是最大的节点，则选择最大的节点，如果当前玩家是最小的节点，则选择最小的节点。

这就是我实现它的方式：

```
function miniMax(node, depth)
    if(depth == 0) then --leaf node     
        local ret = evaluate(node.state)
        return ret
    else -- winning node
        local winner = whoWin(node.state)       
        if(winner == 1) then -- P1      
            return math.huge
        elseif(winner == -1) then -- P2         
            return math.huge*-1
        end 
    end

    local num_of_moves = getNumberOfMoves(node.state)   
    local v_t = nil
    local best_move_index = nil 
    if(getTurn(node.state) == 1) then -- maximizing player      
    local v = -math.huge 
        for i=0, num_of_moves-1 do                      
            local child_node = simulate(node.state, i)) -- simulate move number i
            v_t = miniMax(child_node, depth-1)
            if(v_t > v) then 
                v = v_t 
                best_move_index = i             
            end
        end             
        if(best_move_index == nil) then best_move_index = random(0, num_of_moves-1) end 
        return v, best_move_index
    else -- minimizing player
    local v = math.huge
        for i=0, num_of_moves-1 do          
            local child_node = simulate(node.state, i)
            v_t = miniMax(child_node, depth-1)
            if(v_t < v) then                
                v = v_t             
                best_move_index = i             
            end
        end
        if(best_move_index == nil) then best_move_index = random(0, num_of_moves-1) end
        return v, best_move_index                               
    end 
end 
```

**笔记：**

*   return v，best_move_index表示返回v和best_move_index两个值（以上代码在lua中，lua可以返回多个值）

*   评估函数为两个玩家返回相同的分数（即从 P1 的角度来看，游戏状态 A 得 23 分，从 P2 的角度来看也得 23 分）

*   此算法仅在两个玩家交替运行时才有效（没有玩家可以连续运行两个动作），您可以通过给对手一个动作来欺骗此限制，即如果另一个玩家需要移动 PASS（跳过他/她的回合）移动两次。

*   这个极小极大可以进一步优化（从最简单的排序）：

    1.  α-β修剪
    2.  迭代深化
    3.  移动排序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T05:06:03.333

我在lua中实现了minimax。我希望它可以帮助您了解如何从 Java 角度处理算法，代码应该与您的想法非常相似。它专为井字游戏而设计。

```
--caller is the player who is using the minimax function
--initial state is the board from which the player must make a move
local function minimax(caller,inital_state)
    local bestState = {}; --we use this to store the game state the the player will create
      --this recurse function is really the 'minimax' algorithim 
    local function recurse(state,depth)
        --childPlayer is the person who will have their turn in the current state's children
        local ChildPlayer = getTurn(state)
        --parentPlayer is the person who is looking at their children
        local ParentPlayer = getPreviousTurn(state)
        --this represents the worst case scenario for a player
        local alpha =  - (ChildPlayer == caller and 1 or -1 );
        --we check for terminal conditions (leaf nodes) and return the appropriate objective value
        if win(state) then
            --return +,- inf depending on who called the 'minimax'
            return ParentPlayer == caller and 1 or -1;
        elseif tie(state) then 
            --if it's a tie then the value is 0 (neither win or loss)
            return  0;
        else
            --this will return a list of child states FROM the current state
            children = getChildrenStates(state,ChildPlayer)
            --enumerate over each child
            for _,child in ipairs(children) do
                --find out the child's objective value
                beta = recurse(child,depth+1);
                if ChildPlayer == caller then 
                    --We want to maximize
                    if beta >= alpha then 
                        alpha = beta
                        --if the depth is 0 then we can add the child state as the bestState (this will because the caller of minimax will always want to choose the GREATEST value on the root node)
                        if depth == 0 then
                            bestState = child;
                        end 
                    end 
                --we want to MINIMIZE
                elseif beta <= alpha then 
                    alpha = beta;
                end 
            end 
        end
         --return a non-terminal nodes value (propagates values up the tree)
        return alpha;           
    end
     --start the 'minimax' function by calling recurse on the initial state
    recurse(inital_state,0);
     --return the best move
    return bestState;
end 
```

# breeze - 删除包含子实体的实体时出现微风错误

> ID：16221693
> 
> 赞同：3
> 
> 时间：2013-04-25T18:06:57.463
> 
> 标签：breeze

我使用 Entity Framework Code First + Durandal + Breeze 进行项目。

我有这些实体模型：

```
public class Packing
{
    [Key]
    public int Id { get; set; }
    public string PackingDescription { get; set; }
    ...
    public virtual List<Isotope> Isotopes { get; set; }
    public virtual List<PhysicalForm> PhysicalForms { get; set; }
    public virtual List<ChemicalForm> ChemicalForms { get; set; }
}

public class Isotope
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
    ...
    public int PackingId { get; set; }
    public virtual Packing Packing { get; set; }
}

public class ChemicalForm
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
    ...
    public int PackingId { get; set; }
    public virtual Packing Packing { get; set; }
}

public class PhysicalForm
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
    ...
    public int PackingId { get; set; }
    public virtual Packing Packing { get; set; }
} 
```

当我运行我的项目时，我的 Entity Framework Code First 数据库被创建。

首先，我直接在我的数据库中“手动”测试级联删除。当我有一个包含多个同位素的 Packing 并删除 Packing 时，所有级联的同位素都将被删除。这对我来说没问题。

现在在我的项目运行时使用微风，当我尝试相同的场景时：删除这样的`Packing`元素：

```
var deletePackings = function (packingsObservable) {

    // Input: packingsObservable: an observable filled with a list of packings to delete
    // Output: none

    for (var i = 0; i < packingsObservable().length; i++) {
        packingsObservable()[i].entityAspect.setDeleted();
    };
    return manager.saveChanges();
}; 
```

我收到以下错误：

> UPDATE 语句与 FOREIGN KEY 约束 \"FK_dbo.Isotopes_dbo.Packings_PackingId\" 冲突。数据库 \"TRANSPORTBOEKDB\"、表 \"dbo.Packings\"、列 'Id' 中发生冲突。\r\n语句已终止。"}

现在我在另一个[SO 帖子](https://stackoverflow.com/questions/13789598/deleting-entities-and-its-navigation-properties)上读到

> Breeze 尚不支持客户端“级联”删除（我们正在考虑这一点），您将需要遍历任何已加载的客户端订单并“分离”它们。

那么这就是我在应用程序中出现错误的原因吗？

我是否必须遍历已加载的任何子实体并“分离”它们？

* * *

更新

通过使用代码手动分离任何子实体来解决问题，但这很痛苦：

```
var deletePackings = function (packingsObservable) {

    // Input: packingsObservable: an observable filled with a list of packings to delete
    // Output: none
    // Remark: we loop from end to begin of the observable!

    var entity;

    // Since Breeze does not yet support client side 'cascaded' deletes (we are considering this one), 
    // you will need to iterate over any child entity that are already loaded and 'detach' them.

    for (var i = packingsObservable().length - 1; i >= 0; i--) {

        // Detach any child entities of type isotope
        for (var j = packingsObservable()[i].isotopes().length - 1; j >= 0; j--) {
            entity = packingsObservable()[i].isotopes()[j];
            manager.detachEntity(entity);
        }

        // Detach any child entities of type chemicalForm
        for (var j = packingsObservable()[i].chemicalForms().length - 1; j >= 0; j--) {
            entity = packingsObservable()[i].chemicalForms()[j];
            manager.detachEntity(entity);
        }

        // Detach any child entities of type physicalForm
        for (var j = packingsObservable()[i].physicalForms().length - 1; j >= 0; j--) {
            entity = packingsObservable()[i].physicalForms()[j];
            manager.detachEntity(entity);
        }

        packingsObservable()[i].entityAspect.setDeleted();
    };

    return manager.saveChanges();
}; 
```

没有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:46:16.410

如果需要，在 SQL 中进行级联删除并在客户端忘记，然后刷新数据。

或者您可以为 agreggate 实体添加新的 IsActive 列，这是我的首选方法，我害怕删除数据库:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T16:29:54.793

微风作者正在考虑的功能是客户端级联删除，但微风也不支持服务器端级联删除。您必须执行某些操作才能使用服务器端级联删除。

setDeleted 将缓存中所有引用的 fkey 值归零——即使 fkey 不可为空。如果引用记录具有不可为空的 fkey 约束，则需要防止保存子记录，因为 UPDATE 会失败。您可以在 save 完成此目标之前从缓存中逐出子项，并允许您在没有参数的情况下调用 saveChanges() 。或者，您可以传递一个数组，其中包含您设置删除的记录。然后，您可能希望在保存后驱逐孩子。或者您可以停止使用该实体管理器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-26T17:59:34.080

支持级联删除是一个非常合理的要求。

请在此处添加对客户端级联删除支持的投票：[Breeze User Voice](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions)。在确定要为 Breeze 产品添加哪些功能时，我们非常重视这个场所。

# css - 许多 div 并排垂直对齐

> ID：16221694
> 
> 赞同：1
> 
> 时间：2013-04-25T18:07:07.300
> 
> 标签：css, html

我希望你能理解我。有一个宽度为 360px 的包装器，它只允许 3 列 div。我只是希望能够随时放入另一个 div，然后所有以前的 div 都将被移动。我有一个问题，似乎 div 转到下一行，但它们垂直对齐到上一行中最高的。请看下面的示例（我不得不使用图片，因为代码显示不正确）。最后一个绿色的应该从上面接触到高大的红色。我不是在寻找静态定位，它必须是自动的，所以当我将包装器宽度更改为更大时，更多的 div 将自动包含在行中。

![在此处输入图像描述](https://i.stack.imgur.com/Ow8Yy.png)

下面是错误结果的图像。

![在此处输入图像描述](https://i.stack.imgur.com/HaM2W.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T16:41:25.640

砌体脚本是最接近我需要的，可惜它是 JS ......

# security - 如何防止匿名用户在 couchDB 中删除/编辑我的文档？

> ID：16221696
> 
> 赞同：7
> 
> 时间：2013-04-25T18:07:15.143
> 
> 标签：security, function, validation, couchdb

我知道 CouchDB 不允许非管理员用户编辑/删除设计文档，但是如何防止他们编辑/删除所有文档？

我能找到的唯一信息是可以使用验证功能设置用户权限。我对如何编写验证函数来执行此操作/验证函数所在的位置有点困惑。它们都在 _users 数据库中吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T18:51:11.233

这很简单：只需[`validate_doc_update`](http://docs.couchdb.org/en/latest/ddocs.html#validate-document-update-functions)在数据库中创建具有功能的设计文档，您希望在其中控制执行以下操作的文档：

```
function(newDoc, oldDoc, userCtx, secObj){ 
    if('_admin' in userCtx.roles) return; // skip anonymous in Admin Party case;
    if(!userCtx.name && newDoc._deleted){
      throw({'forbidden': 'auth first before delete something'});
    }
} 
```

这个想法很简单：如果[`userCtx`](http://docs.couchdb.org/en/latest/json-structure.html#userctx-object)没有指定名称，这意味着用户是匿名的，并且如果我们的新文档版本有特殊字段`_deleted`设置为`true`- 文档将被删除（但更改尚未保存在磁盘上）。因此，我们检查这些字段并在满足条件时抛出一个禁止的异常。我们也为 Admin Party 情况例外，每个人都无名，但都有`_admin`角色，所以我们需要跳过它们。现在，在匿名用户尝试删除常规文档时，他将收到下一个 HTTP 响应：

```
HTTP/1.1 403 Forbidden
Server: CouchDB/1.3.0 (Erlang OTP/R15B03)
Date: Thu, 25 Apr 2013 18:48:51 GMT
Content-Type: application/json
Content-Length: 68
Cache-Control: must-revalidate

{"error":"forbidden","reason":"auth first before delete something"} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-28T19:04:44.003

限制对数据库的访问的另一种方法是配置`[couch_httpd_auth]`with`require_valid_user:true`

然后每个请求都必须发送凭据以登录到您的 couchdb。

# spring - Spring 框架的扩展属性

> ID：16221698
> 
> 赞同：1
> 
> 时间：2013-04-25T18:07:26.733
> 
> 标签：spring, properties, apache-commons-config

寻找一种能够在 Spring 属性中为我们提供更多功能的解决方案，例如：

*   嵌套结构
*   地图/列表
*   属性引用其他属性。例子：
    *   city.name=多伦多
    *   city.address=#{city.name}, 123 Ave SW

我尝试了 EProperties (Google) 和 Commons Configurations (Apache)，但似乎与 Spring 框架的集成不太好。

此外，我们使用**Velocity**来访问使用**#springMessage("city.address")**的属性，因此它需要为此工作。

有谁知道我如何通过扩展默认属性功能来实现上述目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T22:24:14.197

使用最新版本的 Spring，您可以使用 PropertySource 机制。您注册了所有的 PropertySource 以及它们被搜索的顺序，然后您不必做任何事情，除了可能将其添加到您的 XML 中：

```
<context:property-placeholder /> 
```

只要您只声明其中一个而不指定本地属性文件（“旧方式”），您就可以将属性 A 引用为属性 B 的值，即使它们不在同一个属性源中。

对于嵌套结构，如果您不喜欢属性可读性，这可能会有所帮助： [https ://stackoverflow.com/a/13470704/82609](https://stackoverflow.com/a/13470704/82609)

对于解析问题，您可以很容易地手动处理列表和其他类似的东西： [Reading a List from properties file and load with spring annotation @Value](https://stackoverflow.com/questions/12576156/reading-a-list-from-properties-file-and-load-with-spring-annotation-value)

# mrjob - mrJob 运行后如何取消它？^C 不起作用

> ID：16221700
> 
> 赞同：0
> 
> 时间：2013-04-25T18:07:33.207
> 
> 标签：mrjob

有没有一种简单的方法可以使 mrJob 脚本可中断？非常简单的问题，但它对调试有很大的不同。我主要对取消仅 python 的测试作业感兴趣，因为这是大多数调试发生的地方。

```
python my_mr_script.py my-mr-input.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:21:22.560

你有几个简单的选择：

*   发送`SIGQUIT`（`ctrl-\`在您的终端中）。大多数进程都不会费心 catch `SIGQUIT`，因此这是处理具有不太出色`SIGINT`（又名`ctrl-c`）处理程序的事物的一种策略。
*   `ctrl-z`+ `kill -9 %1`- 也就是核选项。比捕捉更难得的`SIGQUIT`是捕捉[`SIGTSTP`](http://en.wikipedia.org/wiki/SIGTSTP#SIGTSTP)。这就是你的 shell 用来做作业控制的东西。在这种情况下，您将暂停作业，然后发送它`SIGKILL`，它无法捕获。

注意`%1`以上是 bash 主义，它假设这是唯一正在运行的工作。

# android - 如何在 VM VirtualBox 上运行 Android-x86 4.2 iso？

> ID：16221703
> 
> 赞同：14
> 
> 时间：2013-04-25T18:07:38.610
> 
> 标签：android, virtualbox, android-x86, iso-image

我想用`Android-x86`测试和调试我的应用程序。我在成功之前尝试了其他版本的 Android-x86，但是关于 android-x86-4.2 有一个错误。所以我在这里问我的问题，因为它可能会发生在其他人身上：

我安装`oracle VM virtualBox`在 Win7 32 位上，然后我[`android-x86-4.2-20121225.iso`](http://android-x86.googlecode.com/files/android-x86-4.2-20121225.iso)从[Android-x86 - Porting Android to x86](http://www.android-x86.org/download)下载。在我从 iso 在 VirtualBox 上安装 Android x86-4.2 并为其创建假 SD 卡后，我尝试运行它，但是当我开始我在控制台中看到了这些行：

> 检测 Android-x86... 位于 /dev/sda1
> 
> ANDROID root@x86:/#

没有别的，即使我等了 20 多分钟也没有发生任何事情！我尝试了几次，但结果是一样的。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-25T20:01:03.083

我在[超级用户](http://superuser.com)中问了同样的[问题](https://superuser.com/questions/587429/how-to-run-android-x86-4-2-iso-on-vm-virtualbox)，我找到了启动它的方法。正确答案是：

> 在安装/live CD 中，您只需将 grub 命令中的“androidboot.hardware”参数的值从“Android_x86”更改为“x86”。您可以通过在启动菜单中按“Tab”或编辑安装 ISO 映像上的“isolinux.cfg”文件来执行此操作。

如果您在硬盘上安装了 Android-x86，您必须选择所需的启动选项并按下`e`以编辑 grub 命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T18:20:53.427

我不知道项目[Android X86 - Porting Android to X86](http://www.android-x86.org/download)。我在网上看到，这个模拟器的安装很复杂。我认为，如果您想尝试一个快速的 Android 模拟器并轻松安装、更快地调试，您可以尝试项目[AndroVM](http://androvm.org/blog/androvm-documentation/)。通过下载镜像文件并导入到 Virtual Box 很容易将其安装到 Virtual Box。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:27:11.407

根据我对 Linux 的理解（它不是很多，但我想说的足够了），你已经登录到系统并等待你输入一些命令。如果我是对的，您应该启动**X 服务器**，但在 Android 环境中，我真的不知道如何启动。

更新：

对于我[在这里](https://groups.google.com/forum/?fromgroups=#!topic/android-x86/kW8YE6_eXXU)阅读的内容，这正是我所说的：它启动，然后提示命令行。链接上出现的两个解决方案是：

*   键入**开始**。
*   在启动过程之前选择**VESA 选项**（我无法在此选项中为您提供帮助，因为我现在没有 .ISO 可以尝试）。

请检查它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-13T07:52:15.553

在pc上运行android x86的最好方法是格式化一个ext3格式的分区，然后在上面安装android，这样androidx86就可以轻松运行了。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-05-13T07:06:13.787

我有带 win 7 的 HP430 笔记本电脑。我遇到了同样的问题。但我想出了解决方案。

在用win7启动计算机时，我进入了BIOS菜单。有一个针对虚拟化优化 pc 的选项。我选择了它。之后，一切顺利。

后来我在虚拟框中注意到，在系统设置中，加速类型是 VT-x AMD、嵌套分页、PAE/NX。这在优化之前是不同的。

希望这能提供一些想法。

# php - TinyMCE 将类添加到 img 标签

> ID：16221704
> 
> 赞同：6
> 
> 时间：2013-04-25T18:07:49.350
> 
> 标签：php, javascript, css, tinymce, wysiwyg

我在我的 CMS 中使用 TinyMCE 编辑器作为独立编辑器。

默认情况下，该站点会在 cms div ID 内的任何图像标签周围放置一个弯曲的边框。

我需要有一个选项，在 CMS 中通过添加一个`class="no-style"`在极少数情况下添加到页面的图像不应该有 CSS 边框来绕过。但是我看不出有任何方法可以用 TinyMCE 做到这一点。

我所看到的只是一种输入样式标签的方法，但这不起作用，因为我在 CSS 中用来制作边框的代码是这样的：

```
-webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px; -moz-box-shadow: 0 0 3px rgba(0,0,0,.2); -webkit-box-shadow: 0 0 3px rgba(0,0,0,.2); box-shadow: 0 0 3px rgba(0,0,0,.2); behavior: url(js/PIE.htc); 
```

因此，每次我需要制作没有边框的图像时，将所有这些设置为 0px 非常耗时，更不用说对于普通人来说太多了。

所以在这个页面上： http: [//d.pr/i/wslc](http://d.pr/i/wslc)

有没有办法有一个下拉菜单或一个文本框，有人可以在其中输入“就像样式一样”一个类名，例如 style.css 中的 no-style 将我上面的那些属性归零？

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-09-20T12:38:16.987

您需要根据[https://www.tinymce.com/docs/plugins/image/#image_class_list定义一个预定义类的列表](https://www.tinymce.com/docs/plugins/image/#image_class_list)

将以下内容添加到`tinymce.init`

```
image_class_list: [
    {title: 'None', value: ''},
    {title: 'Lightbox', value: 'lightbox'},
] 
```

输出

[![tinymce 类列表](https://i.stack.imgur.com/VzqG8.png)](https://i.stack.imgur.com/VzqG8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T21:42:03.263

TinyMCE 对此有支持。

添加新图像 ( `Insert/Add Image`-popup) 时，单击显示 的选项卡`Appearance`。在说的下拉菜单中`Class`，选择`Value`并输入`no-style`。我认为您可以自定义 TinyMCE 以支持您自己的类（即，它已经列出），但我不确定您如何做到这一点。如果您不想每次都手动输入，查看文档应该会有所帮助。

编辑：啊，我在回答之前没有看照片。看起来你有一个过时的 TinyMCE 版本。在网页上，上述下拉菜单可用：[官方网站](http://www.tinymce.com/tryit/3_x/full.php)。

Superedit：如果您已经拥有最新版本，请查看您正在加载的插件。查看来自官方网站的源代码并将其与您自己的进行比较。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-25T18:13:50.730

尝试在 tinyMCE 中将您的代码置于 html 模式。

# php - 使用 MySQL 触发器执行 PHP 存在哪些安全风险？

> ID：16221705
> 
> 赞同：0
> 
> 时间：2013-04-25T18:07:50.457
> 
> 标签：php, mysql, security, triggers

我四处寻找并[找到了一种方法来做到这一点](http://crazytechthoughts.blogspot.com/2011/12/call-external-program-from-mysql.html)。但我很犹豫，因为我偶尔会读到它是[“安全风险”](https://stackoverflow.com/questions/1467369/invoking-a-php-script-from-a-mysql-trigger)。不幸的是，没有人详细说明原因。就我个人而言，我想不出任何不涉及攻击者的安全风险，攻击者已经拥有他们不应该拥有的权限。MySQL/PHP 服务器在同一台机器上运行。所以 MySQL 和 PHP 之间没有公共请求。

触发的 PHP 脚本将对第三方 CRM/ESP 上的 Web 服务进行 API 调用，该服务在其服务器上保留某些表的简化版本。然后，我们的营销团队可以登录 CRM 的 GUI 并发送电子邮件、收集信息并计划营销活动，而无需打扰开发团队。

这台服务器上的表不反映我们的，它们只包含他们需要的信息。我想使用触发器的原因是尽可能保持它们的信息是最新的，并将该逻辑放在一个地方，而不是分散在整个项目中。

**更新：** 我总是清理/验证任何接触 MySQL 的表单。我从不在我的表中存储 PHP。我从不使用 FTP（SFTP 使用 .pem 而不是密码）。将要执行的脚本将是我创建的一个不会改变的文件，它通过我正在使用的同一框架（zend）。传递给脚本的唯一变量将是行的 id（将被验证为 INT）。由于性能，我正在考虑不这样做。并且使 PHP 异步执行是可能的，但很困难，不值得我花时间去实现。但我仍然很好奇，除了性能损失之外，安全问题与网络服务有何不同？我的意思是您肯定必须像处理 Web 服务一样进行清理/验证，所以考虑到这一点，会有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:30:17.627

您的应用程序可能会受到不同程度的入侵，例如 SQL 注入、嗅探 FTP 密码或代码本身的漏洞。通常最好将这些东西保持在尽可能本地化的位置，以防止一个区域的漏洞级联。

例如，假设您在数据库中存储敏感数据。通常，您会以某种方式加密此数据，使用未存储在数据库本身中的盐和密钥。然后，如果您的数据库被 SQL 注入入侵，攻击者可能会造成破坏，但他们将无法窃取敏感信息。但是，如果您正在执行以文本形式存储在数据库中的 PHP，攻击者肯定会意识到这一点并对其进行更新以执行他的代码，从那里他可以弄清楚您是如何加密敏感数据并对其进行解密的。

简而言之，SQL 注入非常普遍（即使您遵循最佳实践，也没有人说明年进来的实习生会），因此执行存储在数据库中的代码是不安全的。

**编辑**：更仔细地阅读您的链接后，我需要重申一些事情。我看不出这有什么特别的安全风险，但这似乎真的违背了数据和逻辑的分离。此外，mysql 不是异步的，并且不可能在负载下扩展......

# python - 如何取出蟒蛇蛋？

> ID：16221714
> 
> 赞同：0
> 
> 时间：2013-04-25T18:08:26.837
> 
> 标签：python, mysql, django, mysql-python

这篇文章（[如何在 Mac OS X 上安装 MySQLdb（MySQL 的 Python 数据访问库）？](https://stackoverflow.com/questions/1448429/how-to-install-mysqldb-python-data-access-library-to-mysql-on-mac-os-x)）建议通过删除 python 鸡蛋来清理 MySQLdb 安装：

“步骤 3c：删除 Users/$USER/.python-eggs 下的 egg”

我不知道如何导航到该位置。我以为鸡蛋在 /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ ？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:59:45.493

Ususally my approach is to figure out where the first **init**.py file for the package is

For example

```
In [4]: import django 

In [5]: django.__file__
Out[5]: '/usr/local/lib/python2.7/dist-packages/django/__init__.pyc' 
```

so essentially

when you do

```
import module 
module.__file__ 
```

However I have to say this is not the best way I would suggest use better package management or pip preferably with virtualenv to manage your python related package management issues.

# css - 自动宽度计算

> ID：16221715
> 
> 赞同：0
> 
> 时间：2013-04-25T18:08:27.303
> 
> 标签：css

我不知道是否可以用纯 css 做这样的事情。`width: auto - 100px;`

```
element.style {
    margin-left: 100px;
    width: auto;
} 
```

我总是需要将 100px 的值减去宽度。这只能用 JS 来完成，还是有任何 css 替代品？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T18:10:11.620

是的，我认为在您的情况下您可以使用 CSS 3[`calc()`功能](http://www.w3.org/TR/css3-values/#calc-notation)

```
element.style {
margin-left: 100px;
width: calc(100% - 100px); /* Just an example */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:10:18.900

没有广泛支持的 css 替代方案。

这种计算只能在 JS 中进行。

尽管根据情况可能会有涉及填充和边距技巧的解决方案。

愿你有一个具体的例子，我们可能会提供帮助。

# c++ - g++ c++11 constexpr 评估性能

> ID：16221716
> 
> 赞同：13
> 
> 时间：2013-04-25T18:08:29.000
> 
> 标签：c++, constexpr

g++ (4.7.2) 和类似版本似乎在编译时评估 constexpr 的速度出奇地快。在我的机器上实际上比运行时编译的程序快得多。

这种行为有合理的解释吗？是否涉及仅适用于编译时的优化技术，可以比实际编译的代码更快地执行？如果是这样，是哪个？

这是我的测试程序和观察到的结果。

```
#include <iostream>

constexpr int mc91(int n)
 {

     return (n > 100)? n-10 : mc91(mc91(n+11));

 }

constexpr double foo(double n)
{
   return (n>2)? (0.9999)*((unsigned int)(foo(n-1)+foo(n-2))%100):1;
}

constexpr unsigned ack( unsigned m, unsigned n )
{
    return m == 0
        ? n + 1
        : n == 0
        ? ack( m - 1, 1 )
        : ack( m - 1, ack( m, n - 1 ) );
}

constexpr unsigned slow91(int n) {
   return mc91(mc91(foo(n))%100);
}

int main(void)
{
   constexpr unsigned int compiletime_ack=ack(3,14);
   constexpr int compiletime_91=slow91(49);
   static_assert( compiletime_ack == 131069, "Must be evaluated at compile-time" );
   static_assert( compiletime_91  == 91,     "Must be evaluated at compile-time" );
   std::cout << compiletime_ack << std::endl;
   std::cout << compiletime_91  << std::endl;
   std::cout << ack(3,14) << std::endl;
   std::cout << slow91(49) << std::endl;
   return 0;
} 
```

编译时间：

```
time g++ constexpr.cpp -std=c++11 -fconstexpr-depth=10000000 -O3 

real    0m0.645s
user    0m0.600s
sys     0m0.032s 
```

运行：

```
time ./a.out 

131069
91
131069
91

real    0m43.708s
user    0m43.567s
sys     0m0.008s 
```

这里 mc91 是通常的 mac carthy f91（可以在 wikipedia 上找到），而 foo 只是一个返回大约 1 到 100 之间的实际值的无用函数，具有 fib 运行时复杂性。

91 的慢速计算和 ackermann 函数都由编译器和编译程序使用相同的参数进行评估。

令人惊讶的是，该程序甚至会运行得更快，只需生成代码并通过编译器运行它，而不是执行代码本身。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T18:29:25.577

在编译时，`constexpr`可以[记忆](http://en.wikipedia.org/wiki/Memoization)冗余（相同）调用，而运行时递归行为不提供这一点。

如果您更改每个递归函数，例如...

```
constexpr unsigned slow91(int n) {
   return mc91(mc91(foo(n))%100);
} 
```

... 到一个不是`constexpr`，但**在**运行时记得过去计算的形式：

```
std::unordered_map< int, boost::optional<unsigned> > results4;
//     parameter(s) ^^^           result ^^^^^^^^

unsigned slow91(int n) {
     boost::optional<unsigned> &ret = results4[n];
     if ( !ret )
     {
         ret = mc91(mc91(foo(n))%100);
     }
     return *ret;
} 
```

你会得到不那么令人惊讶的结果。

编译时间：

```
time g++ test.cpp -std=c++11 -O3

real    0m1.708s
user    0m1.496s
sys     0m0.176s 
```

运行：

```
time ./a.out

131069
91
131069
91

real    0m0.097s
user    0m0.064s
sys     0m0.032s 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-25T18:49:29.863

## 记忆

这是一个非常有趣的*“发现”*，但答案可能比你想象的要简单。

*如果所有涉及的值在编译*`constexpr`时都已知（并且如果值应该结束的变量也被声明为*constexpr* ），则可以在声明时评估某些东西，假设以下伪代码：

```
f(x)   = g(x)
g(x)   = x + h(x,x)
h(x,y) = x + y 
```

由于每个值在编译时都是已知的，编译器可以将上面的内容重写为下面的等价物：

```
f(x) = x + x + x 
```

简而言之，每个函数调用都已被删除并替换为表达式本身的调用。同样适用的是一种称为[memoization](http://en.wikipedia.org/wiki/Memoization)的方法，其中传递的计算表达式的结果被存储起来，因此您只需要进行一次艰苦的工作。

如果你知道`g(5) = 15`为什么还要计算呢？而是在每次需要时替换`g(5)`为`15`，这是可能的，因为声明为的函数`constexpr`不允许有*副作用*。

* * *

## 运行

在运行时这不会发生（因为我们没有告诉代码以这种方式运行）。运行您的代码的小家伙将需要从`f`to跳到`g`to `h`，然后在它从to跳到 all之前跳回 from `g`，同时他存储每个函数的返回值并将其传递给下一个函数。`h``g``f`

就算这家伙很小很小，也不需要跳得很远，他也不喜欢一直来回跳，他做这个做那个要花很多功夫；这需要时间。

* * *

## 但是在 OPs 示例中，它真的计算了*编译时间*吗？

是的，对于那些不相信编译器实际计算并把它作为常量放入完成的二进制文件的人，我将从下面的 OPs 代码中提供相关的汇编指令（输出`g++ -S -Wall -pedantic -fconstexpr-depth=1000000 -std=c++11`）

```
main:
.LFB1200:
  .cfi_startproc
  pushq %rbp
  .cfi_def_cfa_offset 16
  .cfi_offset 6, -16
  movq  %rsp, %rbp
  .cfi_def_cfa_register 6
  subq  $16, %rsp
  movl  $131069, -4(%rbp)
  movl  $91, -8(%rbp)
  movl  $131069, %esi               # one of the values from constexpr
  movl  $_ZSt4cout, %edi
  call  _ZNSolsEj
  movl  $_ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_, %esi
  movq  %rax, %rdi
  call  _ZNSolsEPFRSoS_E
  movl  $91, %esi                   # the other value from our constexpr
  movl  $_ZSt4cout, %edi
  call  _ZNSolsEi
  movl  $_ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_, %esi
  movq  %rax, %rdi

  # ...
  # a lot of jumping is taking place down here
  # see the full output at http://codepad.org/Q8D7c41y 
```

# sql - 即使我没有使用任何 SQL 查询，也会给出聚合函数错误

> ID：16221718
> 
> 赞同：0
> 
> 时间：2013-04-25T18:08:41.587
> 
> 标签：sql, sql-server-2008

很抱歉粘贴在下面的整个 BIG 查询。我一遍又一遍地检查它，检查可能存在计算错误的地方，比如除以零，但没有一个有效。现在它要求我使用 group by 子句，就像我们在 select 语句中有计数时得到的错误一样，并且不要使用 group by 子句。但是当我在查询末尾放置一个 group by 子句并列出所有列时，它告诉我列名不存在！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T18:11:56.070

您在 SQL 的第 45 行使用 sum：

```
(case ((sum(T.act_work_qty)+sum(T.remain_work_qty))*100.0)
        when 0 then 0
        when null then 0
        else round((sum(T.act_work_qty)/(sum(T.act_work_qty)+sum(T.remain_work_qty))*100.0),2)
    end) 
```

因此，SQL 假定您有一个聚合查询并返回一个聚合错误。

以下是一些解决方法的想法。. .

1.  也许您不需要总和，因此您可以只使用列值。
2.  您可以使用 windows 函数来计算 sum 。. . `sum(T.act_work_qt) over ()`将计算查询处理的所有行的总和（`where`应用子句条件）。
3.  使用子查询来计算总和。

# c# - 在调试期间观看程序设置

> ID：16221719
> 
> 赞同：0
> 
> 时间：2013-04-25T18:08:42.820
> 
> 标签：c#, visual-studio, debugging, application-settings

我有一个程序，其中在运行时编辑的程序设置有些奇怪。（我确实保存了它们，这不是问题）。

为了找出问题所在，我想做 VS 提供的逐步调试。在此期间，我想观察设置，因为我可以观察变量。

那可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:11:28.270

当然，您可以使用监视窗口或立即窗口：

[http://msdn.microsoft.com/en-us/library/aa290869(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa290869(v=vs.71).aspx)

[http://msdn.microsoft.com/en-us/library/f177hahy(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/f177hahy(v=vs.110).aspx)

![在此处输入图像描述](https://i.stack.imgur.com/YyB93.png)

即时窗口即时执行 C# 代码，监视窗口显示对象或变量的值。窗口只会在运行时显示。

# twitter-bootstrap - 使用按钮选项卡更改时引导内容不会淡入

> ID：16221721
> 
> 赞同：0
> 
> 时间：2013-04-25T18:08:50.760
> 
> 标签：twitter-bootstrap, tabs, fadein

在选项卡更改上，内容没有淡入效果。我添加了类淡入淡出，但我得到了相同的结果。有什么帮助吗？

这是实时预览：http: [//jsfiddle.net/DesignPuma/zVgX5/2/](http://jsfiddle.net/DesignPuma/zVgX5/2/)

HTML：

```
<div class="btn-group" id="myTab" data-toggle="buttons-radio">
    <a class="btn active" href="#popularPosts" data-toggle="tab"><i class="icon-star"></i></a>
    <a class="btn" href="#recentPosts" data-toggle="tab"><i class="icon-tags"></i></a>
</div>

<div id="sidebar-tabs" class="tab-content">
    <div class="tab-pane fade in active" id="popularPosts">
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
    </div>
    <div class="tab-pane fade" id="recentPosts">
        <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
    </div>
</div> 
```

JavaScript：

```
$('#myTab a').click(function (e) {
  e.preventDefault();
  $(this).tab('show');
}) 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T18:20:14.380

您必须包含 bootstrap-transition.js 才能获得淡入淡出效果。

[http://twitter.github.io/bootstrap/assets/js/bootstrap-transition.js](http://twitter.github.io/bootstrap/assets/js/bootstrap-transition.js)

# android - 偏移行为不是我所期望的

> ID：16221724
> 
> 赞同：1
> 
> 时间：2013-04-25T18:09:18.417
> 
> 标签：android, xml, offset, shapes, layer-list

我有这个可绘制的 XML 文件。目标是绘制两个同心框架，外部为黄色，内部为红色。我希望这一切都在 XML 中完成，使用形状，而不是代码和位图。

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item>
        <shape android:shape="rectangle">
            <solid android:color="@android:color/transparent"/>
            <stroke android:width="15dp" android:color="@color/Yellow"/>
        </shape>
    </item>

    <item android:left="5dp">
        <shape android:shape="rectangle">
            <solid android:color="@android:color/transparent"/>
            <stroke android:width="3dp" android:color="@color/Red"/>
        </shape>
    </item>

</layer-list> 
```

这会生成这个屏幕（忽略里面的 3 个矩形，只是框架的黄色和红色矩形）

![在此处输入图像描述](https://i.stack.imgur.com/o4Tm4.png)

这表明黄框绘制正常，红框绘制左偏移 5dp。我最后的红框应该四面八方

```
 <item android:left="5dp" android:top="5dp" android:right="5dp" android:bottom="5dp"> 
```

看看当我只添加另一个偏移量时会发生什么

```
 <item android:left="5dp" android:top="5dp">
        <shape android:shape="rectangle">
            <solid android:color="@android:color/transparent"/>
            <stroke android:width="3dp" android:color="@color/Red"/>
        </shape>
    </item> 
```

![在此处输入图像描述](https://i.stack.imgur.com/KMVqV.png)

如果我添加所有必需的偏移量，也会发生同样的情况。这不是我所期望的，根据[关于项目偏移的文档](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)
这里发生了什么？我怎样才能让红框按我的意愿缩小 5dp？

**编辑**
我用偏移量玩了一点，发现一些奇怪的东西，使用一个 5dp 的负偏移量，看看我得到了什么：

```
 <item android:left="-5dp" android:top="5dp" android:right="5dp" android:bottom="5dp"> 
```

![在此处输入图像描述](https://i.stack.imgur.com/PwUdK.png)

它只适用于负值`<= -5dp`。对于负值`> 5dp`，它仍然不会像以前一样显示帧。

我强烈认为所有这些行为的原因只能是二分之一：

*   我严重误解了应该如何使用偏移值
*   这是一个错误的行为（在这种情况下，我想确认，以便我可以报告它）

# c# - 在打印输出中看不到完整的堆栈面板

> ID：16221725
> 
> 赞同：0
> 
> 时间：2013-04-25T18:09:22.960
> 
> 标签：c#, wpf, events, printing

我一直在尝试使用正在工作的堆栈面板打印出我的数据列标题，我得到了我的打印输出。唯一的问题是我的堆栈面板在固定宽度后被切断，我不确定哪个属性负责它。就像打印机只在我的堆栈面板上看到一个矩形限制，其宽度比我的堆栈面板短，并且只打印矩形中的内容。没有图片无法很好地解释它，但我没有扫描仪。

这是我的代码：

```
private void btnPrint_Click(object sender, RoutedEventArgs e)
    {
        PrintDialog dialog = new PrintDialog();
        if (dialog.ShowDialog().GetValueOrDefault())
        {
            List<Result> results = vm.ObsResults.OrderByDescending(r => Convert.ToDouble(r.SchedulingRate)).ToList();
            var propList = typeof(Result).GetProperties().ToList();
            int maxRowsPerPage = 42;

            var pgCnt = results.Count / maxRowsPerPage;

            XpsDocumentWriter docWriter = PrintQueue.CreateXpsDocumentWriter(dialog.PrintQueue);
            PrintTicket ticket = new PrintTicket();
            ticket.PageOrientation = PageOrientation.Landscape;

            for (int pgNum = 0; pgNum <= pgCnt; pgNum++)
            {
                //Title
                Canvas c = new Canvas();
                c.Width = 1024;
                c.Height = 768;
                TextBlock tbTitle = new TextBlock();
                tbTitle.Text = " Results " + vm.ObsDate.ToString("MM/dd/yyyy");
                tbTitle.FontSize = 16;
                Canvas.SetLeft(tbTitle, 20);
                Canvas.SetTop(tbTitle, 10);
                c.Children.Add(tbTitle);

                //Column Headers
                StackPanel sp = new StackPanel() { Orientation = Orientation.Horizontal , Width = 885};
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "Unit Name", Width = 150, Background = new SolidColorBrush(Colors.LightBlue) }});
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "Unit ID", Width = 65, Background = new SolidColorBrush(Colors.LightBlue) }});
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "Schedule", Width = 65, Background = new SolidColorBrush(Colors.LightBlue) }});
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "TPS", Width = 25, Background = new SolidColorBrush(Colors.LightBlue) }});
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "TTS", Width = 35, Background = new SolidColorBrush(Colors.LightBlue) }});
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "Min Run", Width = 50, Background = new SolidColorBrush(Colors.LightBlue) }});
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "Schd RT", Width = 50, Background = new SolidColorBrush(Colors.LightBlue) }});
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "MW", Width = 35, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "00", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "01", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "02", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "03", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "04", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "05", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "06", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "07", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "08", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "09", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "10", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "11", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "12", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "13", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "14", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "15", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "16", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "17", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "18", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "19", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "20", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "21", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "22", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 0, 1), Child = new TextBlock() { Text = "23", Width = 15, TextAlignment = TextAlignment.Center, Background = new SolidColorBrush(Colors.LightBlue) } });
                sp.Children.Add(new Border() { BorderBrush = new SolidColorBrush(Colors.LightGray), BorderThickness = new Thickness(1, 1, 1, 1), Child = new TextBlock() { Text = "Constraint", Width = 100, Background = new SolidColorBrush(Colors.LightBlue) } });
                Canvas.SetLeft(sp, 20);
                Canvas.SetTop(sp, 35);
                c.Children.Add(sp);

                int idxStart = pgNum * maxRowsPerPage;
                int idxEnd = Math.Min(results.Count, idxStart + maxRowsPerPage);

                int topMargin = 3;

               }
                c.Measure(new Size(Int32.MaxValue, Int32.MaxValue));
                c.Arrange(new Rect(new Point(0, 0), c.DesiredSize));

                FixedPage fxdPg = new FixedPage();
                fxdPg.Children.Add(c);
                PageContent pgContent = new PageContent();
                ((IAddChild)pgContent).AddChild(fxdPg);
                fxdDoc.Pages.Add(pgContent);
            }

            docWriter.WriteAsync(fxdDoc, ticket);
        }
    } 
```

它被切断的地方看起来像这样：

```
00 | 01 | 02 | ... |18 | 19 | 2/  <cut off. 
```

第 21、22、23 号，标题。

# grails - 类 [{1}] 的 Grails 错误属性 [{0}] 不能为空 - 在基本 grails 应用程序上

> ID：16221726
> 
> 赞同：3
> 
> 时间：2013-04-25T18:09:31.977
> 
> 标签：grails, grails-2.0

这是我的简单域类：

```
package projectmanagement

class Project {

    String Name

    static constraints = {
    }
} 
```

控制器上的保存方法（使用脚手架生成）：

```
def save() {
    def projectInstance = new Project(params)
    if (!projectInstance.save(flush: true)) {
            projectInstance.errors.allErrors.each {
                println it
            }
        render(view: "create", model: [projectInstance: projectInstance])
        return
    }

    flash.message = message(code: 'default.created.message', args: [message(code: 'project.label', default: 'Project'), projectInstance.id])
    redirect(action: "show", id: projectInstance.id)
} 
```

当我尝试保存项目时，出现以下错误：

```
 Field error in object 'projectmanagement.Project' on field 'name': rejected value [null]; codes    [projectmanagement.Project.name.nullable.error.projectmanagement.Project.name,projectmanagement.Project.name.nullable.error.name,projectmanagement.Project.name.nullable.error.java.lang.String,projectmanagement.Project.name.nullable.error,project.name.nullable.error.projectmanagement.Project.name,project.name.nullable.error.name,project.name.nullable.error.java.lang.String,project.name.nullable.error,projectmanagement.Project.name.nullable.projectmanagement.Project.name,projectmanagement.Project.name.nullable.name,projectmanagement.Project.name.nullable.java.lang.String,projectmanagement.Project.name.nullable,project.name.nullable.projectmanagement.Project.name,project.name.nullable.name,project.name.nullable.java.lang.String,project.name.nullable,nullable.projectmanagement.Project.name,nullable.name,nullable.java.lang.String,nullable]; arguments [name,class projectmanagement.Project]; default message [Property [{0}] of class [{1}] cannot be null] 
```

sql日志显示：

```
Hibernate: select this_.id as id0_0_, this_.version as version0_0_, this_.name as name0_0_ from project this_ limit ?
Hibernate: select count(*) as y0_ from project this_ 
```

params.dump() 显示：

```
<org.codehaus.groovy.grails.web.servlet.mvc.GrailsParameterMap@6715e66f request=org.apache.catalina.core.ApplicationHttpRequest@2a6e8f nestedDateMap=[:] wrappedMap=[name:kkjkj, create:Create, action:save, controller:project]> 
```

我正在使用 Grails 2.2 和 Intellij Idea IDE。虽然我过去 5-6 个月没有使用过 Grails，但我不记得以前遇到过同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:27:52.450

我不确定这是否会导致问题，但在您的域类`Name`中以大写字母开头，`N`而参数映射包含`name`小写字母`n`。

# arrays - 自定义类型的 Doctrine 和 PostgreSQL 数组

> ID：16221730
> 
> 赞同：1
> 
> 时间：2013-04-25T18:09:49.530
> 
> 标签：arrays, doctrine, postgresql-9.2

我需要在 Doctrine 中处理一组自定义类型的 PostgreSQL。

例子：

```
CREATE TYPE name_surname AS( 
    name varchar, 
    surname varchar);

CREATE TABLE test(
    id serial,
    data name_surname[]); 
```

我看过一些（相当老的）关于管理预定义类型的数组的帖子，但没有关于自定义类型的数组。在当前版本的 Doctrine 中本机可能吗？如果不是，这是否可以通过在 Doctrine 中添加自定义类型来解决？

谢谢。

# css - 在 CasperJS 中使用 CSS3 选择器按文本选择元素

> ID：16221731
> 
> 赞同：4
> 
> 时间：2013-04-25T18:09:58.477
> 
> 标签：css, css-selectors, phantomjs, casperjs

我正在使用 CasperJS 的[测试类](http://casperjs.org/testing.html)进行功能测试，并且似乎无法通过它们的文本值来选择元素。我的目标是检查一个 div 类是否可见，然后检查它是否具有我期望的值。

我试过使用[CaspersJS 的选择器页面](http://casperjs.org/selectors.html)上提到的 CSS3 选择器，但一定是做错了什么。以下都不适合我（全部包含在 中`""`）：

*   `div#myid[text()='sometext']`
*   `div#myid[text='sometext']`
*   `div#myid[text=sometext]`
*   `div#myid:contains('sometext')`
*   `div#myid:contains(sometext)`

关于如何根据文本值选择特定元素的任何指针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-14T12:16:55.933

尝试：

```
var x = require('casper').selectXPath;
this.test.assertExists(x('//*[@id="myid"][text()="sometext"]'), 'the element exists'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T12:19:29.403

`evaluate()`感谢上面的评论 - 我最终通过CasperJS 测试中的调用使用 jQuery（因为它正在加载到客户端上） 。

# ios - iOS：geojson iOS访问

> ID：16221735
> 
> 赞同：0
> 
> 时间：2013-04-25T18:10:16.797
> 
> 标签：ios, json, xcode, geojson

在为 iPad 开发时，我创建了一个名为 Coordinates.geojson 的文件。我想从一个名为 JsonDecoder.m 的类文件中访问它

这是 JsonDecoder.m

```
@implementation JsonDecoder

- (id)initWithJson
{
    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"Coordinates" ofType:@"geojson"];
    NSData *data = [NSData dataWithContentsOfFile:filePath];
    NSError *error;
    _json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
    return self;
}

- (NSArray*) getCoordinatesFromShelf:(NSString *) bookShelfName
{
    NSArray *coordinates = [[[_json objectForKey:@"shelf1"] objectForKey:@"coordinates"]objectAtIndex:1];
    for(id i in coordinates)
        NSLog(@"%@",i);
    return coordinates;
}
@end 
```

还有我的 Coordinates.geojson：

```
{
    "shelf1": {
        "name": "six.png",
        "coordinates": [
                        [
                         14,
                         25,
                         329,
                         138
                         ],
                        [
                         14,
                         185,
                         329,
                         138
                         ],
                        [
                         14,
                         344,
                         158,
                         138
                         ],
                        [
                         185,
                         344,
                         158,
                         138
                         ],
                        [
                         14,
                         94,
                         158,
                         138
                         ],
                        [
                         185,
                         500,
                         158,
                         138
                         ]
                        ]
    }
} 
```

如何从类文件中检索这些值？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:31:34.607

在 iOS >= 5 中，您可以在没有外部库的情况下解析它

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"Coordinates" ofType:@"geojson"];
NSData *data = [NSData dataWithContentsOfFile:filePath];
NSError *error;
NSDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error]; 
```

但文件的内容不是有效的 JSON 字符串。

如果可能的话，将其更改为：

```
{
    "shelf1": {
        "name": "six.png",
        "coordinates": [
            [
                14,
                25,
                329,
                138
            ],
            [
                14,
                185,
                329,
                138
            ],
            [
                14,
                344,
                158,
                138
            ],
            [
                185,
                344,
                158,
                138
            ],
            [
                14,
                94,
                158,
                138
            ],
            [
                185,
                500,
                158,
                138
            ]
        ]
    }
} 
```

然后你可以通过以下方式访问它：

```
NSDictionary *shelf1 = [json objectForKey:@"shelf1"];

//OR

NSArray *coordinates = [[json objectForKey:@"shelf1"] objectForKey:@"coordinates"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T08:22:14.723

解决了。

以上工作完美

我忘记为 geojson 文件为我的项目设置目标成员资格。

为此，请标记您的 jsonfile，单击文件检查器并在“目标成员资格”中选中您项目的复选框

谢谢。

# clojure - 函数式编程：处理频率的持久列表。项目更新有效吗？

> ID：16221736
> 
> 赞同：3
> 
> 时间：2013-04-25T18:10:18.807
> 
> 标签：clojure, functional-programming, lisp, immutability

鉴于：

1.  你有一个项目列表。
2.  您正在使用持久数据结构。
3.  您将频繁更新列表中的持久性项目（数据结构）。
4.  正在修改的项目可能位于列表中的任何位置。

Lisps 常用的单链表结构在此目的上似乎不是很有效。每次更改项目时，我们都需要提供一个新的持久列表，用扩充的项目替换原始项目。我知道，对于单链表，您可以重复使用项目替换点之后的尾部，但这看起来仍然很浪费。

什么样的持久性数据结构会成为这种场景的好清单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T18:37:32.273

Clojure为此提供了[向量类型。](http://clojure.org/data_structures#Data%20Structures-Vectors%20%28IPersistentVector%29)

它有一个有趣的实现——一个小数组树——它允许`log_32(n)`复杂的随机访问。更多关于[http://blog.higher-order.net/2009/02/01/understanding-clojures-persistentvector-implementation/](http://blog.higher-order.net/2009/02/01/understanding-clojures-persistentvector-implementation/)的信息。

`count`ing `conj`（推）和ing的操作`pop`都是`O(1)`针对向量的。

# android - 从堆栈中删除活动

> ID：16221740
> 
> 赞同：0
> 
> 时间：2013-04-25T18:10:34.833
> 
> 标签：android, stack, android-activity

我在那里，我已经阅读了一些关于此的问题，但没有一个对我有帮助，因为我想做的事情略有不同。

我有这个活动，例如：

A->B->C->D->E

在DI上有一个按钮可以移动到E，当我进入活动E时，我想擦除A和E之间的所有活动。所以如果我在E按下后退按钮，我将回到活动A。

我知道 ！我可以覆盖 onKeyDown 方法来做到这一点......并将用户移动到活动 A，但整个活动将保留在堆栈中，我想删除它们！为了性能和更好的管理，我不再需要它们了，明白吗？

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:14:01.920

您应该在刚开始所需的活动时使用特殊的意图标志 (Intent.FLAG_ACTIVITY_CLEAR_TOP)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:20:33.673

在你的清单中，你可以写

```
<activity
        android:name=".MyActivity"
        android:noHistory="true"> 
```

对于您想要退出堆栈的每个活动。

# r - 使用 != 对 data.table 进行子集化 也不包括 NA

> ID：16221742
> 
> 赞同：18
> 
> 时间：2013-04-25T18:10:35.700
> 
> 标签：r, data.table

我有一个带有`NA`s 列的 data.table。我想删除该列具有特定值（恰好是`""`）的行。但是，我的第一次尝试也导致我丢失了带有`NA`s 的行：

```
> a = c(1,"",NA)
> x <- data.table(a);x
    a
1:  1
2:   
3: NA
> y <- x[a!=""];y
   a
1: 1 
```

看了之后`?`!=``，我发现了一个可以工作的衬里，但是很痛苦：

```
> z <- x[!sapply(a,function(x)identical(x,""))]; z
    a
1:  1
2: NA 
```

我想知道是否有更好的方法来做到这一点？此外，我认为没有很好的方法可以将其扩展到排除多个非`NA`值。这是一个不好的方法：

```
>     drop_these <- function(these,where){
+         argh <- !sapply(where,
+             function(x)unlist(lapply(as.list(these),function(this)identical(x,this)))
+         )
+         if (is.matrix(argh)){argh <- apply(argh,2,all)}
+         return(argh)
+     }
>     x[drop_these("",a)]
    a
1:  1
2: NA
>     x[drop_these(c(1,""),a)]
    a
1: NA 
```

我`?J`用 data.frame 查看并尝试了一些东西，它似乎工作方式不同，`NA`在子集时保留 s：

```
> w <- data.frame(a,stringsAsFactors=F); w
     a
1    1
2     
3 <NA>
> d <- w[a!="",,drop=F]; d
      a
1     1
NA <NA> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-25T18:31:19.283

### 为您的问题提供解决方案：

你应该使用`%in%`. 它给你一个逻辑向量。

```
a %in% ""
# [1] FALSE  TRUE FALSE

x[!a %in% ""]
#     a
# 1:  1
# 2: NA 
```

* * *

### 要找出*为什么*会发生这种情况`data.table`：

（相对于`data.frame`）

如果您查看function 下`data.table`文件的源代码，则会发现一组该检查参数。其中之一是：`data.table.R``"[.data.table"``if-statements``i`

```
if (!missing(i)) {
    # Part (1)
    isub = substitute(i)

    # Part (2)
    if (is.call(isub) && isub[[1L]] == as.name("!")) {
        notjoin = TRUE
        if (!missingnomatch) stop("not-join '!' prefix is present on i but nomatch is provided. Please remove nomatch.");
        nomatch = 0L
        isub = isub[[2L]]
    }

    .....
    # "isub" is being evaluated using "eval" to result in a logical vector

    # Part 3
    if (is.logical(i)) {
        # see DT[NA] thread re recycling of NA logical
        if (identical(i,NA)) i = NA_integer_  
        # avoids DT[!is.na(ColA) & !is.na(ColB) & ColA==ColB], just DT[ColA==ColB]
        else i[is.na(i)] = FALSE  
    }
    ....
} 
```

为了解释这种差异，我在这里粘贴了重要的一段代码。我还将它们标记为 3 个部分。

### 首先，为什么`dt[a != ""]`不能按预期工作（由 OP）？

首先，`part 1`评估为 class 的对象`call`。if 语句的第二部分`part 2`返回 FALSE。之后，`call`被“评估”为`c(TRUE, FALSE, NA)`。然后`part 3`被执行。因此，`NA`被替换为`FALSE`（逻辑循环的最后一行）。

### 为什么`x[!(a== "")]`按预期工作（由OP）？

`part 1`再次返回*呼叫。*但是，`part 2`评估为 TRUE 并因此设置：

```
1) `notjoin = TRUE`
2) isub <- isub[[2L]] # which is equal to (a == "") without the ! (exclamation) 
```

这就是魔法发生的地方。否定现在已被删除。请记住，这仍然是类*call*的对象。所以这被评估（使用`eval`）再次合乎逻辑。因此，`(a=="")`评估为`c(FALSE, TRUE, NA)`。

现在，这是`is.logical`在`part 3`. 所以，在这里，`NA`被替换为`FALSE`. 因此变成，`c(FALSE, TRUE, FALSE)`。在稍后的某个时间点， a`which(c(F,T,F))`被执行，这导致 2 这里。因为`notjoin = TRUE`(from `part 2`) `seq_len(nrow(x))[-2]`= c(1,3) 返回。所以，`x[!(a=="")]`基本上返回`x[c(1,3)]`了想要的结果。这是相关的代码片段：

```
if (notjoin) {
    if (bywithoutby || !is.integer(irows) || is.na(nomatch)) stop("Internal error: notjoin but bywithoutby or !integer or nomatch==NA")
    irows = irows[irows!=0L]
    # WHERE MAGIC HAPPENS (returns c(1,3))
    i = irows = if (length(irows)) seq_len(nrow(x))[-irows] else NULL  # NULL meaning all rows i.e. seq_len(nrow(x))
    # Doing this once here, helps speed later when repeatedly subsetting each column. R's [irows] would do this for each
    # column when irows contains negatives.
} 
```

鉴于此，我认为语法存在一些不一致之处。如果我设法抽出时间来阐述问题，那么我很快就会写一篇文章。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-09T10:52:16.470

马修的背景回答：

`!=`这个问题突出显示的行为`NA`不是故意的，考虑一下。初衷确实是和 wrt 不同，`[.data.frame`相信大家都很满意。例如，FAQ 2.17 有：`==``NA`

> `DT[ColA==ColB]`比简单`DF[!is.na(ColA) & !is.na(ColB) & ColA==ColB,]`

这种便利是通过 dint of 实现的：

> `DT[c(TRUE,NA,FALSE)]`将`NA`as 视为`FALSE`，但为每个`DF[c(TRUE,NA,FALSE)]` 返回`NA`行`NA`

动机不仅是方便，而且是速度，因为每个`!`, `is.na`,`&`和`==`本身都是矢量扫描，每个结果都有相关的内存分配（在介绍小插图中解释）。因此，尽管`x[is.na(a) | a!=""]`这是一个可行的解决方案，但它正是我试图避免在 data.table 中需要的逻辑类型。`x[!a %in% ""]`稍微好一点；即 2 次扫描 (`%in%`和`!`) 而不是 3 次 ( `is.na`,`|`和`!=`)。但真的 `x[a != ""]`应该`NA`在一次扫描中完成弗兰克的预期（包括）。

提交的新功能请求链接回此问题：

[DT[col!=""] 应该包括 NA](https://r-forge.r-project.org/tracker/?group_id=240&atid=978&func=detail&aid=4650)

感谢 Frank、Eddi 和 Arun。如果我没有正确理解，请随时纠正，否则最终会做出改变。它需要以考虑复合表达式的方式完成；例如，`DT[colA=="foo" & colB!="bar"]`应该排除带有`NA`in的行，`colA`但包括`colA`非`NA`但是`colB`的行`NA`。同样，`DT[colA!=colB]`应该包括 colA 或 colB 是`NA`但不是两者都存在的行。也许`DT[colA==colB]`应该包括两者都存在的行`colA`（`colB`我`NA`相信它目前没有）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T18:25:46.773

正如您已经弄清楚的那样，这就是原因：

```
a != ""
#[1]  TRUE    NA FALSE 
```

你可以做你已经想出来的事情，`x[is.na(a) | a != ""]`或者你可以`setkey`继续`a`做以下事情：

```
setkey(x, a)
x[!J("")] 
```

# facebook - 从“评论”图形 API 连接中删除“计数”

> ID：16221746
> 
> 赞同：0
> 
> 时间：2013-04-25T18:10:47.860
> 
> 标签：facebook, facebook-graph-api

最近阅读了[fb 开发者路线图](https://developers.facebook.com/roadmap/)和“从 'comments' Graph API 连接中删除 'count'”部分。这是否意味着如果我像[https://graph.facebook.com/page_id/feed](https://graph.facebook.com/page_id/feed)那样调用 graph api那么在数据中“ count”字段将被弃用，位于“comments”字段下？或在其他一些电话中？请尽快回答我没有得到任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-03T18:10:52.147

如果我对您的理解正确，并且您希望一次调用页面中每个提要的评论计数，请尝试以下语法：

```
pageID/posts?fields=comments.limit(2).summary(true).filter(toplevel) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T18:28:55.650

就像它在路线图中所说的那样

> 从 'comments' Graph API 连接中删除 'count' 我们正在删除 Graph API 中的 'comments' 连接上未记录的 'count' 字段。如果您想要包含计数的汇总字段（现在称为“total_count”），请明确请求“{id}/comments?summary=true”

因此，您需要在通话中添加 summary=true ，然后使用 total_count 字段

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-17T09:05:59.080

使用 Facebook Graph API Explorer，我得到了不同的结果，这取决于我与 Explorer 一起使用的应用程序。

默认情况下，使用“Graph API Explorer”应用程序，我会在结果中看到摘要部分，但如果我选择我的应用程序，摘要部分会在结果中消失。

我使用与“Graph API Explorer”应用程序相同的权限和请求。

任何想法 ？

# java - 我如何将字符串拆分为有效的子字符串，而不管里面的长度不确定

> ID：16221747
> 
> 赞同：0
> 
> 时间：2013-04-25T18:10:54.707
> 
> 标签：java, string, split

例如：执行后，String 的输出应该和严格一致`"hello world yo"`。`"hello   world  yo"`

更重要的是，输出应该是`String[]`其中：

```
String[0] == "hello"; String[1] == "world"; String[2] == "yo"; 
```

以便其他方法可以处理后面的有效词。

我在想`String.split(" ")`，但是单词之间的空格不确定，然后会导致异常..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:13:48.183

您可以使用

```
 String.split("\\s+") // one or more whitespace. 
```

不要`==`用于字符串comaprision，而是使用`String.equals()`

**编辑评论中的问题**

> 符号是什么？如果有一个或多个 "_" 或 "\n" 怎么办？

如您所见，[String#split() API](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)接受[正则表达式](http://www.regular-expressions.info/reference.html)作为参数。是空格的`\s`简写字符类，而`+`用于重复前一项或多次。

现在，如果您想拆分 String

1.  `_`IE。下划线 -->`"this__is_test".split("[_]+");`

2.  `\n`IE。换行 -->`"this__is_test\n new line".split("\\r?\\n");`

[正则表达式教程](http://www.regular-expressions.info/reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:14:07.387

你可以在`"\\s+"`. 拆分一个或多个空格字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:16:22.287

我认为 split 函数需要正则表达式，但如果它没有，那么下面的工作。

此处的正则表达式可能不正确，但它展示了您正在尝试做的事情的概念。

```
Pattern p = Pattern.compile("(.*?)  *(.*)");
Matcher m = p.matcher(s);
if (m.matches()) {
   String name = m.group(1);
   String value = m.groupo(2);
}

for (int i = 1; i<=m.groupCount(); i++) {
    System.out.println(m.group(i));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T18:13:29.463

`String.split()`需要一个正则表达式，所以你可以简单地做`String.split(" +")`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T18:19:26.507

您可以使用正则表达式来拆分字符串。

```
String.split(Regular Expression); 
```

对于多个空格，您可以使用正则表达式：“ \\s+ ”，其中 's' 代表空格。

“==”运算符用来判断左右是否相等。对于String，它们实际上是Object，这意味着它们被视为引用（就像C中的指针一样）。

所以如果你想比较两个字符串的内容，你可以使用字符串的equals(String)方法。例如 str1.equals(str2)

# java - 拍照，成功后在新活动中显示照片缩略图

> ID：16221748
> 
> 赞同：0
> 
> 时间：2013-04-25T18:10:58.427
> 
> 标签：java, android, android-intent, camera

现在我有一个通过意图拍照的应用程序。拍完照片后，我希望用户能够确认它并将照片推送到另一个他们可以添加细节的活动。我正在努力寻找将照片从活动传递到活动的正确方法。

现在，确认照片会将用户带回主要活动。

这是我的相关代码：

主要活动

```
public void takePhoto(View view) {
    // create Intent to take a picture and return control to the calling application
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

    fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE);
    Log.d("MySecondApp",fileUri.toString());// create a file to save the image
    intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); // set the image file name

    // start the image capture Intent
    startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {
            if (data!=null) {
            // Image captured and saved to fileUri specified in the Intent
            Toast.makeText(this, "Image saved to:\n" +
                     data.getData(), Toast.LENGTH_LONG).show();
            }
        } else if (resultCode == RESULT_CANCELED) {
            // User cancelled the image capture
        } else {
            // Image capture failed, advise user
        }
    }
}

/** Create a File for saving an image or video */
private static File getOutputMediaFile(int type){

    File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
              Environment.DIRECTORY_PICTURES), "MySecondApp");

    // Create the storage directory if it does not exist
    if (! mediaStorageDir.exists()){
        if (! mediaStorageDir.mkdirs()){
            Log.d("MySecondApp", "failed to create directory");
            return null;
        }
    }

    // Create a media file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new     java.util.Date());
    File mediaFile;
    if (type == MEDIA_TYPE_IMAGE){
        mediaFile = new File(mediaStorageDir.getPath() + File.separator +
        "IMG_"+ timeStamp + ".jpg");
    } else if(type == MEDIA_TYPE_VIDEO) {
        mediaFile = new File(mediaStorageDir.getPath() + File.separator +
        "VID_"+ timeStamp + ".mp4");
    } else {
        return null;
    }

    return mediaFile;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:49:36.097

我会尝试类似的东西

```
if(resultCode == Activity.RESULT_OK)
    handleCameraPhoto(data); 
```

处理方法：

```
private void handleCameraPhoto(Intent intent) {
    Bundle extras = intent.getExtras();
    Bitmap mImageBitmap = (Bitmap) extras.get("data");
    Intent intent = new Intent(this, NewActivity.class);
    intent.putExtra("BitmapImage", mImageBitmap);
    startActivity(intent);
} 
```

然后，在您的其他活动中检索它

```
Intent intent = getIntent();
Bitmap bitmap = (Bitmap) intent.getParcelableExtra("BitmapImage"); 
```

并将其分配给您的 ImageView

```
ImageView iv = (ImageView)findViewById(R.id.myImageView);
iv.setImageBitmap(bitmap); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:25:54.890

在新类中创建一个带有意图甚至图像的构造函数：

```
class newClass {
    public newClass(Intent intent){
        ...
    }
    ...
} 
```

然后在这个新类中将意图设置为缩略图的大小，您可以在弹出窗口或类似内容中进行确认，然后在该类的页面上填写信息。这也会更好，因为如果他们想重拍照片，你可以参加这个课程，如果不接受，他们在拍完照片后会被带到另一张照片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:36:01.080

看看我写的这篇关于如何拍摄全尺寸图像和缩略图版本的博客文章：

[将相机活动用于缩略图和全尺寸图像](https://blog-emildesign.rhcloud.com/?p=590)

完成后，您可以使用 g`etAbsolutePath()`方法从文件实例中提取已保存文件的文件路径并将其传递给以下`Activity`.

# excel - 标准化图形格式并创建多个相似图形的程序或方法

> ID：16221751
> 
> 赞同：0
> 
> 时间：2013-04-25T18:11:02.537
> 
> 标签：excel, charts, formatting, figure

我找不到帮助我解决这个问题的文档 - [编辑：......我从同事那里得到的唯一建议就是我在下面提到的]。

我正在开发 23 个数字，其中必须包含一个状态的 PNG 图像，以及两个带有状态数据的图表。每个图表的比例略有不同，尽管单位是相同的（我这么说是因为它让格式化很头疼）。我知道如何制作这些数字的唯一方法是在 Powerpoint 中创建幻灯片，插入图表和 PNG，并“手动”格式化每张幻灯片以匹配所有其他幻灯片。这既费时又烦人，我很乐观有更好的方法。

### 问题：您推荐什么程序/方法来创建标准图形格式？

理想情况下，我想从 Excel 中复制和粘贴图表，然后插入 PNG 图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T14:44:00.263

你可以研究 R 来做到这一点。不确定 PNG 图像是什么，但如果您愿意，您也可以使用 R 在地图上绘制数据（使用热图或其他方式）。您可以导入图像，以便在需要时也可以使用 PNG 图像。

至于图表，您可以使用 R 而不是 excel 创建它们并将所有内容放在一起。

这样，您只需编写一段代码并生成您需要的所有图形。

# objective-c - 我需要释放我的单例对象吗？

> ID：16221752
> 
> 赞同：1
> 
> 时间：2013-04-25T18:11:05.060
> 
> 标签：objective-c, cocoa-touch, memory-management, singleton

我的应用程序中有一个单例对象：

```
+ (id)shared {
    @synchronized(self) {
        if (sharedDownloadFirstData == nil)
            sharedDownloadFirstData = [[self alloc] init];
    }
    return sharedDownloadFirstData;
}

- (id) init {
    if (self = [super init]) {

    }
    return self;
} 
```

我想知道我是否需要重新定义它（我没有使用 ARC）。为此，我正在使用：

```
[[DownloadFirstData shared] release]; 
```

我需要释放这个对象吗？我需要释放的对象中有一个数组和其他东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T18:48:40.323

在 Objective-C 中，你应该只调用`release`你拥有的对象。这通常意味着您使用`alloc`、`init`或`copy`或`mutableCopy`以其他方式调用创建的对象`retain`。在这里，消费者`[DownloadFirstData shared]`没有调用任何这些函数，也不负责释放它。例如，您在任何时候打电话都会看到这一点`[UIColor blackColor]`。

`retain`如果您正在跨越自动释放边界或者只是不确定生命周期，您可能想要调用这样的对象：

```
DownloadFirstData *local = [[DownloadFirstData shared] retain];
...
[local release]; 
```

在这种情况下，您已获得所有权并负责发布。

但是 的定义`shared`呢？当您定义一个不使用`init`... 的方法时，您通常负责以 0 的发布计数离开，例如`[[self alloc] init] autorelease]`. 单例不是这种情况，因为您的目标是让它始终存在，因此始终具有非零保留计数。您只需在创建它之后不发布它就可以实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:26:31.633

如果你要释放它，那么拥有一个单例是没有意义的。通常会创建一个单例，因为您想要相同的对象直到应用程序结束。在应用程序生命周期结束时，与应用程序相关的所有内存都将被释放。

如果您经常需要分配释放，请使用标准方法。如果你的单例占用大量内存，你应该考虑写得更好。

无论如何，[[DownloadFirstData shared] release]; 将工作。

# jquery - 如何使用 settimeout 循环函数

> ID：16221754
> 
> 赞同：0
> 
> 时间：2013-04-25T18:11:10.347
> 
> 标签：jquery

我有一个带有 4 张图片的幻灯片，其中有一个分页，现在我希望它们在循环中一张一张地显示，对于循环我有这个代码：

```
 function myfn(interaltime) {
  setTimeout('$("#picgallery_pagging li:eq(0)").trigger("click")', 0);
  setTimeout('$("#picgallery_pagging li:eq(1)").trigger("click")', interaltime);
  setTimeout('$("#picgallery_pagging li:eq(2)").trigger("click")', interaltime*2);
  setTimeout('$("#picgallery_pagging li:eq(3)").trigger("click")', interaltime*3);
  setTimeout('myfn('+interaltime+')',interaltime*4);
  };
  myfn(3000); 
```

我的问题：它不能正常工作，只运行一次，并且 interaltime 变量在第二轮为空

分页中的每个按钮都运行我的自定义功能效果以显示图片，正如您所见，我必须在分页上的每个按钮上触发点击功能。（我不知道如何在 jquery 中使用我自己的功能延迟）

**注意**：我在控制台日志中检查了间隔时间变量，它在第二回合是空的！但我不知道如何解决它！
**编辑**：我使用了 setInterval 但 intercaltime 变量在第二个 ture 中仍然是空的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:14:23.377

您正在将字符串传递给`setTimeout`- 这不是最佳实践，并且可能完全不可靠。

试试这个，而不是：

```
function autoclick($el, delay) {
    var i = 0, n = $el.length;
    (function loop() {
        $el.eq(i).trigger('click');    // do your thang
        i = (i + 1) % n;               // increment and reset (if required)
        setTimeout(loop, delay);       // loop "recursively"
    })();                              // invoke immediately
}

autoclick($('#picgallery_pagging li'), 1000); 
```

它消除了代码中的重复，并安排为每个单个元素一遍又一遍地调用自己，而不是整个批次的四个。

调用并不是*真正*的递归，即使它看起来很像，因为它实际上是浏览器的事件循环负责一遍又一遍地调度函数调用。

演示在[http://jsfiddle.net/alnitak/PfmVt/](http://jsfiddle.net/alnitak/PfmVt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:14:39.767

选项之一是这样的：

```
function myfn(interaltime) {
    function wrapper(){
        do_stuff();
        setTimeout(wrapper, interaltime);
    }
    setTimeout(wrapper, 0);
} 
```

您基本上是在设置超时以一次又一次地运行相同的功能。这是一个非常简化的示例，甚至没有尝试提供取消循环的方法。另外，请注意，这绝不是递归调用，因此您不会遇到 stackoverflow 问题。

更简单的选择是使用 setInterval：

```
function myfn(interaltime) {
    return setInterval(do_stuff, intervaltime);
} 
```

这样你就可以取消循环，比如

```
var loop = myfn(100);
//somewhere later
clearInterval(loop); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:17:26.403

尝试：

```
 setTimeout(function() {
                $("#picgallery_pagging li:eq(0)").trigger("click");
             }, 0); 
```

代替

```
 setTimeout('$("#picgallery_pagging li:eq(0)").trigger("click")', 0); 
```

并对所有其他 setTimeouts 重复此操作。本质上，对 setTimeout 使用匿名函数

# cuda - 如何获取设备的 GPU 架构？

> ID：16221757
> 
> 赞同：3
> 
> 时间：2013-04-25T18:11:15.813
> 
> 标签：cuda

cudaGetDeviceProperties 具有获取计算能力的属性（major.minor），但是，我们如何让 GPU 架构（sm_**）输入到设备的编译中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T18:34:21.373

*   sm_10 是计算能力 1.0 设备
*   sm_11 是计算能力 1.1 设备
*   sm_12 是计算能力 1.2 设备
*   sm_13 是计算能力 1.3 设备
*   sm_20 是计算能力 2.0 设备
*   sm_21 是计算能力 2.1 设备
*   sm_30 是计算能力 3.0 设备
*   sm_32 是计算能力 3.2 设备
*   sm_35 是计算能力 3.5 的设备
*   sm_37 是计算能力 3.7 的设备
*   sm_50 是计算能力 5.0 设备
*   sm_52 是计算能力 5.2 的设备
*   sm_53 是计算能力 5.3 的设备
*   sm_60 是计算能力 6.0 设备
*   sm_61 是计算能力 6.1 设备
*   sm_62 是计算能力 6.2 设备

sm_XY 对应于“物理”或“真实”架构

compute_ZW 对应[“虚拟”架构](http://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html#virtual-architectures)

并非所有 sm_XY 都有对应的 compute_XY

例如，没有 compute_21（虚拟）架构

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-06-12T12:14:24.963

最简单的方法

如果您使用的是 cuda 7.x ，请使用如下的 nvcc 标志来获得兼容性

```
-arch=sm_30 \
-gencode=arch=compute_20,code=sm_20 \
-gencode=arch=compute_30,code=sm_30 \
-gencode=arch=compute_50,code=sm_50 \
-gencode=arch=compute_52,code=sm_52 
```

如果您使用的是 cuda 8.x，请设置如下标志：

```
-arch=sm_30 \
-gencode=arch=compute_20,code=sm_20 \
-gencode=arch=compute_30,code=sm_30 \
-gencode=arch=compute_50,code=sm_50 \
-gencode=arch=compute_52,code=sm_52 \
-gencode=arch=compute_60,code=sm_60 \
-gencode=arch=compute_61,code=sm_61 \
-gencode=arch=compute_62,code=sm_62 \ 
```

# github - 有没有办法查看谁在 Github 上下载了代码库的历史记录？

> ID：16221758
> 
> 赞同：0
> 
> 时间：2013-04-25T18:11:19.083
> 
> 标签：github

我在 github 上查看过，并用谷歌搜索过，但找不到任何东西。如果可能的话，我想看看我们的一个存储库上的代码下载历史。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:24:40.347

据我所知，Github 目前不支持这一点——至少没有向公众公开。

您可能需要[联系支持](https://help.github.com/contact)人员，看看他们是否可以提供帮助。

# c - 嘈杂的 ADC dsPIC

> ID：16221759
> 
> 赞同：0
> 
> 时间：2013-04-25T18:11:20.987
> 
> 标签：c, pic, noise, mplab, adc

我有一个 dsPIC33F 同时从两个 ADC 通道以 10 位收集。我正在使用定时器以 64Hz 采样并将 ADC 设置为自动采样，但手动转换。每次轮询定时器中断时，我都会清除采样位，并且 DMA 缓冲区充满了我的 ADC 数据。绘制此数据表明它给出了正确的值，但我注意到它非常嘈杂！

![在此处输入图像描述](https://i.stack.imgur.com/M3oJX.png)

忽略绿线。红线正确地绘制了我的 ADC 结果（峰值是故意的），但正如您所见，它自始至终都有非常多的噪音。

关于可以做些什么来减少这种情况的任何想法？当与 DAQ 同时绘图时（但使用相同的电源并连接地面），它会平滑得多，所以我知道这种噪音并不总是存在。PIC上的去耦电容可能吗？我正在使用面包板和通孔组件，模拟传感器放置在尽可能靠近 PIC 引脚的位置。我的印象是这是一个硬件问题，但让我知道是否可以在软件方面做一些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T12:32:59.690

这可能是由于驱动 ADC 的源阻抗，即您的模拟传感器。它可能需要一个缓冲放大器来更好地驱动 ADC。[单位增益配置中](http://en.wikipedia.org/wiki/Buffer_amplifier#Op-amp_implementation)的运算放大器应该会有所帮助。实现一些改进的另一种方法是在 ADC 输入到地之间使用一个小电容器，但您需要仔细选择它的值以避免过多地过滤这些峰值。

# backbone.js - Backgrid 不会从数据库中呈现日期值

> ID：16221764
> 
> 赞同：3
> 
> 时间：2013-04-25T18:11:46.563
> 
> 标签：backbone.js, backgrid

我是 backGrid 的新手，到目前为止它的功能给我留下了深刻的印象。

我已经成功地将我的数据库中的一些数据以 JSON 格式返回到我的网络应用程序，并且除了会引发错误的日期列之外，所有渲染都正常：

```
Object 1361561820000 has no method 'trim' Heres is the column:

var columns = [{
name: "dateTime",
label: "Date/Time",
cell: 'date'
}]; 
```

当单元格设置为“字符串”时，这将在页面上呈现正常，但显然这不会以日期格式显示..

有没有办法解决？

以前我使用标准的 html 表并解析日期列： $.format.date(get('dateTime'), 'dd/MM/yyyy hh:mm:ss' 但我现在似乎无法应用它，

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T04:19:14.010

所有核心日期时间单元将只接受 ISO-8601 格式的日期时间值。不支持时间戳。要使日期时间单元格接受 UNIX 时间戳，您必须覆盖[formatter](https://github.com/wyuenho/backgrid/issues/141)。

# excel - VBA Excel - 访问中的更新记录

> ID：16221766
> 
> 赞同：3
> 
> 时间：2013-04-25T18:11:55.163
> 
> 标签：excel, ms-access, vba

我有问题。

我想在 EXCEL 中使用 VBA 更新 Access 数据库中表中的现有记录。

我的代码：

```
sqlik = "UPDATE query which works in access"

Set ZAP_QUERY2 = baza.CreateQueryDef("", sqlik)

With ZAP_QUERY2

    ![abc] = Edit_Form.abc.Text
    ![bcd] = Edit_Form.bcd.Text
    ![cde] = Edit_Form.cde.Text

End With 
```

当我使用 sqlik = "SELECT query which works in access" 时，它没有进行任何更改。但是使用 sqlik = "UPDATE query which works in access" 它说 "Cannot find any object in this collection"

有任何想法吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-09T19:13:51.497

使用 DAO 的解决方案：

```
...
dim db as DAO.Database, rec as Dao.Recordset
dim strSQL as String
Set db = OpenDatabase("c:\DatabaseFolder\YourDatabase.accdb")
strSQL = "SELECT * FROM yourTable WHERE yourField=1"
Set rec = db.OpenRecordset(strSQL, dbOpenDynaset, dbEditAdd)
With rec
    .MoveFirst
    ![aField] = Edit_Form.abc.Text
    .Update
End With
rec.Close
db.Close
... 
```

希望这可以帮助你

# lucene - Neo4j - 包装/继承节点对象

> ID：16221768
> 
> 赞同：1
> 
> 时间：2013-04-25T18:11:56.227
> 
> 标签：lucene, indexing, neo4j

我正在用 neo4j 开发一种社交网络，我想让我的`Node`对象更具体地满足我自己的需求。包装 neo4j对象而不是包装的对象是否被认为是一种好习惯？通过在我的节点属性中保存包装对象的引用，我可以为这种情况做一些肮脏的解决方案，但这样做对我来说看起来很奇怪。在这种情况下，为了获得干净且设计良好的代码，您会建议做什么？`Node`对象或继承它是否被认为是一种好习惯？当使用内置 Lucene 引擎索引节点对象时，会出现包装方法的问题。例如，如果我`Node`用“Profile”类（使用“addFriend”、“setFirstName”等方法）包装我的对象，我将获得什么好处，但另一方面，每当我运行一个查询我的索引我会得到原始的`Node`

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T03:00:48.590

我发现包装节点不会导致非常可维护的代码/设计。正如您所提到的，您需要注意的一件事不是返回节点，而是将其转换为您的域对象。

如果您的对象主要有 getX 方法，那么您可以只执行 Cypher 查询，组合您的域对象并返回它们。在这种情况下，您甚至不需要包装节点——您所需要的只是一些可用于查找节点的属性。

如果您有 setX 方法，那么您可以通过 Cypher 语句更新节点，或者通过更新所有属性的保存或在每个 setX 上（不是很好，因为您会经常更新 setX 方法现在意味着持久性）。这两种方法中的任何一种都不需要包装节点。

我在早期的项目中尝试过对 Node 进行封装，但发现它会带来更多的麻烦，而且设计通常很臭。现在我使用纯域 POJOS 并将 Neo4j 代码仅保留在持久层中，这对我来说效果更好。你还没有提到你使用的是哪种语言——如果是 Java，那么我相信[Spring Data](http://www.neo4j.org/develop/spring)可以处理很多样板代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:30:16.733

将您的搜索代码放入他们所属的类中。

如果您需要从 Post 类中获取类似 getFriends 的东西，我不知道，您将在 Person 类中创建 fromPosts 方法，在 Post 中创建 getFriends 方法。

从帖子中，您将从 Person 类调用查询，执行查询并返回映射到 Person 类的节点的数组/列表。

因此，您在 Post 类中的 getFriends 方法将类似于：

> Person.fromPosts(self).results.map { |node| Person.new(节点) }

这样做很简单，只需使用 Person.new（或新的 Person，取决于您使用的语言）将结果映射并将节点传递给 Person。这意味着您必须有一个从节点填充对象的新方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-26T06:51:14.160

[Spring Data Neo4j](http://www.springsource.org/spring-data/neo4j)是满足您需求的最终解决方案，它将带注释的实体类映射到具有高级映射功能的 Neo4j，并提供对不同抽象级别的节点和关系的访问。

# c# - 元组和树状图

> ID：16221770
> 
> 赞同：1
> 
> 时间：2013-04-25T18:12:00.820
> 
> 标签：c#, tuples

我正在尝试使用元组构建树状图，但遇到了一些问题，例如：

```
Tuple<Tuple<string, double>, double> t = new Tuple< new Tuple<string, double>(), double>(); 
```

内部的元组是叶子（名称和距离），外部是具有距离的节点。如何正确实例化这种类型的结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:24:50.573

您还可以使用[Tuple.Create](http://msdn.microsoft.com/en-us/library/dd387181.aspx)静态帮助方法，让编译器帮助您进行类型推断。

```
 var t = Tuple.Create(Tuple.Create("", 0.0d), 0.0d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:13:46.950

去掉inner `new`，单独调用inner的构造函数`Tuple`作为参数：

```
Tuple<Tuple<string, double>, double> t = new Tuple<Tuple<string, double>, double>(new Tuple<string, double>("", 0), 0); 
```

# python - 学生与老师

> ID：16221771
> 
> 赞同：2
> 
> 时间：2013-04-25T18:12:01.293
> 
> 标签：python, django

我正在用 Django 编写模型。

我正在使用来自 django.contrib.auth.models 的用户模型

我需要创建一个教师实体和学生实体。

它们基本相同 - 除了学生类型 = '学生' 和类型 = '老师' 之外，它们都需要用户名、密码、电子邮件

如何表示教师和学生模型？

我应该为教师和学生扩展用户模型吗？还是我应该只创建一个从 User 模型扩展而来的模型，该模型对学生和教师具有不同的类型。

谢谢！

我有

```
class Profile(models.Model):
    user = models.OneToOneField(User)

class Teacher(Profile):
    salary = models.FloatField()

class Student(Profile)
    grade = models.FloatField() 
```

其中 User 指的是 django.contrib.auth.models 中的 User 模型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T21:16:41.467

你所拥有的没有什么问题，它是一个有效的模式：请阅读这个：http: [//charlesleifer.com/blog/django-patterns-model-inheritance/](http://charlesleifer.com/blog/django-patterns-model-inheritance/)这是一个很好的阅读并更详细地解释了**模型继承**。阅读多表继承和抽象模型。

# c# - 将所有 RadTreeList 项设置为编辑模式

> ID：16221772
> 
> 赞同：0
> 
> 时间：2013-04-25T18:12:03.880
> 
> 标签：c#, asp.net, telerik, radtreelist

我一直在使用 Telerik RadGrids，在填充网格时将所有项目设置为编辑模式没有任何问题。

```
protected void RadGrid1_ItemCreated(object sender, Telerik.Web.UI.GridItemEventArgs e)
{
    if (e.Item is GridEditableItem)
    {
        e.Item.Edit = true;
    }
} 
```

现在我正在使用 Telerik RadTreeList，我想做类似的事情。有什么可能的方法吗？据我一直在搜索，我还没有找到任何可能的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:28:18.730

你检查过[http://www.telerik.com/help/aspnet-ajax/treelist-server-side-basics.html](http://www.telerik.com/help/aspnet-ajax/treelist-server-side-basics.html)吗？

`RadTreeList`也有`ItemCreated`活动。

你能试一下吗？

```
protected void RadTreeList1_ItemCreated(object sender, TreeListItemCreatedEventArgs e)
{
    if (e.Item is TreeListDataItem)
    {
        TreeListDataItem item = e.Item as TreeListDataItem;
        item.Edit = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T15:27:55.317

解决方案如下：

```
protected void RadTreeList1_PreRender(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        foreach (TreeListDataItem item in RadTreeList1.Items)
        {
            if (item is TreeListDataItem)
            {
                item.Edit = true;
            }
        }
        RadTreeList1.Rebind();
    }
} 
```

(!IsPostBack) 条件取决于是否在 Page_Load 处填充了 TreeListDataItem。

# c - 为什么除以两个整数不会得到浮点数？

> ID：16221776
> 
> 赞同：33
> 
> 时间：2013-04-25T18:12:22.577
> 
> 标签：c

谁能解释为什么当我将它除以一个整数时，为什么 b 会被四舍五入，尽管它是一个浮点数？

```
#include <stdio.h>

void main() {
    int a;
    float b, c, d;
    a = 750;
    b = a / 350;
    c = 750;
    d = c / 350;
    printf("%.2f %.2f", b, d);
    // output: 2.00 2.14
} 
```

[http://codepad.org/j1pckw0y](http://codepad.org/j1pckw0y)

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-25T18:17:16.497

这是因为隐式转换。变量`b, c, d`是`float`类型的。但是`/`运算符看到它必须相除的两个整数，因此在结果中返回一个整数，该整数`float`通过添加小数点隐式转换为 a。如果您想要浮点除法，请尝试将两个操作数设为`/`浮点数。如下。

```
#include <stdio.h>

int main() {
    int a;
    float b, c, d;
    a = 750;
    b = a / 350.0f;
    c = 750;
    d = c / 350;
    printf("%.2f %.2f", b, d);
    // output: 2.14 2.14
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-25T18:14:54.910

使用类型[转换](http://en.wikipedia.org/wiki/Type_conversion)：

```
int main() {
    int a;
    float b, c, d;
    a = 750;
    b = a / (float)350;
    c = 750;
    d = c / (float)350;
    printf("%.2f %.2f", b, d);
    // output: 2.14 2.14
} 
```

这是解决该问题的另一种方法：

```
 int main() {
        int a;
        float b, c, d;
        a = 750;
        b = a / 350.0; //if you use 'a / 350' here, 
                       //then it is a division of integers, 
                       //so the result will be an integer
        c = 750;
        d = c / 350;
        printf("%.2f %.2f", b, d);
        // output: 2.14 2.14
    } 
```

但是，在这两种情况下，您都在告诉编译器 350 是浮点数，而不是整数。因此，除法的结果将是浮点数，而不是整数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T18:17:53.457

“a”是一个整数，当除以整数时，它会给你一个整数。然后将它作为整数分配给“b”并成为浮点数。

你应该这样做

```
b = a / 350.0; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T19:20:13.773

具体来说，这不是四舍五入你的结果，而是向零截断。所以如果你除以 -3/2，你会得到 -1 而不是 -2。欢迎来到积分数学！早在 CPU 可以进行浮点运算或数学协处理器出现之前，我们就用积分数学来完成所有事情。尽管有用于浮点数学的库，但它们对于一般用途来说过于昂贵（在 CPU 指令中），因此我们对数字的整个部分使用 16 位值，对小数使用另一个 16 位值。

编辑：我的回答让我想起了经典的老人说“当我像你这个年纪......”

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-25T19:28:10.640

[章节和诗句](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)

> **6.5.5 乘法算子**
> ...
> 6 当整数被除法时，`/`算子的结果是去掉任何小数部分的代数商。^(105))如果商`a/b`是可表示的，则表达式 `(a/b)*b + a%b`应等于`a`；否则，两者的行为`a/b`和`a%b`是未定义的。
> 
> * * *
> 
> ^(105) 这通常被称为“向零截断”。)

整数除以整数给出整数结果。1/2 产生 0；将此结果分配给浮点变量会得到 0.0。要获得浮点结果，至少有一个操作数必须是浮点类型。 `b = a / 350.0f;`应该给你你想要的结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T18:14:51.300

可能最好的原因是因为`0xfffffffffffffff/15`会给你一个可怕的错误答案......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T18:22:57.787

将两个整数相除将得到一个整数（整数）结果。

您需要将一个数字转换为浮点数，或为其中一个数字添加小数，例如 a/350.0。

# java - 无法在目标阶段为 java 类生成 jaxb .xsd

> ID：16221779
> 
> 赞同：0
> 
> 时间：2013-04-25T18:12:39.257
> 
> 标签：java, jaxb2, maven-jaxb2-plugin, jaxb2-maven-plugin

Java - jaxb - maven 插件

我有基于 maven 的 Web 应用程序，在 pom 中我有以下插件，它应该生成 jaxb .xsd 到 java 类。

当我执行清理、编译时，不会生成打包 xsd 类。当我手动执行 mvn jaxb2:generate 时，它​​会在 generate-source 文件夹中生成 xsd 类，但不会打包在战争中。

如何在不手动执行“mvn jaxb2:generate”的情况下使其生成 xsd 类并使其成为战争的一部分？谢谢我提前。

```
<plugin>
          <groupId>org.jvnet.jaxb2.maven2</groupId>
          <artifactId>maven-jaxb2-plugin</artifactId>
          <version>0.8.3</version>
          <executions>
            <execution>
              <phase>generate-sources</phase>
              <goals>
                <goal>generate</goal>
              </goals>
            </execution>
          </executions>
          <configuration>
            <schemaDirectory>src/main/wsdl</schemaDirectory>
          </configuration>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:46:25.577

当您运行 mvn clean compile package 时，它​​不会生成 XSD 类，因为 generate-sources 不是打包目标的一部分。WAR 打包的默认绑定是 process-resources compile process-test-resources test-compile
test package install deploy

您可以将其包装在配置文件中，并使用该配置文件运行 mvn 构建 使用配置文件的另一个原因是您只能在需要生成 java 类时使用此配置文件，其他时候您可以只运行常规构建。

格式是

```
<profiles>
   <profile>
     <id>generateFromSchemas</id>
        <plugin>
           ......
        </plugin>
   </profile>
 <profiles> 
```

mvn -P generateFromSchemas

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:10:14.473

我稍微更新了我的插件如下

```
<plugin>
      <groupId>org.jvnet.jaxb2.maven2</groupId>
      <artifactId>maven-jaxb2-plugin</artifactId>
      <version>0.8.3</version>
      <executions>
        <execution>
          <phase>generate-sources</phase>
          <goals>
            <goal>generate</goal>
          </goals>
        </execution>
      </executions>
      <configuration>
        <generatePackage>com.equilibriums.samplespringws</generatePackage>
        <schemaDirectory>src/main/wsdl</schemaDirectory>
      </configuration>
    </plugin> 
```

以下是maven命令

```
mvn jaxb2:generate compile package 
```

效果很棒。

# reflection - MVC4：网站上所有可用网址的列表？

> ID：16221787
> 
> 赞同：0
> 
> 时间：2013-04-25T18:13:37.243
> 
> 标签：reflection, asp.net-mvc-4, selenium, smoke-testing

我们有一个相当大的 MVC4 应用程序，我们希望 Selenium 遍历每个页面并确保它加载 - 某种冒烟测试。

我可以使用反射来遍历程序集，找到所有控制器和所有动作，检查动作是否未发布，为需要参数的动作提供参数。然后我会将这个列表提供给 Selenium 并检查页面上我需要的所有内容是否正确完成。

但在我开始玩反射之前，我想检查一下这是否已经完成，所以我不会重新发明自行车。我已经用谷歌搜索了这样的东西，但找不到任何东西。

ps 编写反射代码不是问题。硒也被覆盖。只是检查这是否已经完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:22:49.283

[AttributeRouting](http://attributerouting.net/)项目有一个路由调试器，即使您在项目中不使用属性路由，它也可以工作。

[您可以在 Github](https://github.com/mccalltd/AttributeRouting/blob/master/src/AttributeRouting.Web/Logging/LogRoutesHandler.cs)上看到处理显示路由的类，但我不确定当项目不在本地运行时它是否会显示路由信息。您可能需要修改该代码，以便您可以从 Selenium 实例安全地访问它（并使用 JSON 或其他东西使其机器可读）。

# java - 如何将对象数组传递给按钮？

> ID：16221804
> 
> 赞同：0
> 
> 时间：2013-04-25T18:14:22.230
> 
> 标签：java, arrays, swing, jtable, abstracttablemodel

我有两个类：一个叫`Student`，另一个叫`Course`. 我想为一个简单的注册系统进行模拟。

我的`Student`课堂部分具有以下形式：

```
class Student
{
    private String id,
    private Course[] listOfCourses;
    private int numCourse;
    //accesing methods
    public registration(Course course){
          listOfCourses[numCourse]=course;
          numCourse++;
    }
    public Course[] getCourse(){
          return listOfCourses;
    }
} 
```

该类`Course`具有以下形式：

```
class Course
{
     String id, String courseName;
     //constructor
     //accesing methods
} 
```

我希望通过按 Java Swing 制作的表单中的按钮，将特定学生注册的课程内容显示到 jTable 中。我尝试了以下方法，但根本没有结果：

```
Student e=new Student();
Course d[]=new Course[4];   
d=e.getCourses();    //to receive the array of Courses from the Student class
for (int i=0;i<d.length;i++){
      jTable2.setValueAt(estLista[i].getName(), i, 0);
} 
```

我该怎么做？我的意思是有一种方法可以将存储在`Course`类中的数组内容放入`ActionEvent`按钮中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:39:36.157

从您提供的代码中，我相信您没有获得课程的至少一个原因..因为它没有在注册过程中设置:)（除非您有注册课程，否则语法不正确？）这可能不是一个完整的解决方案，但它纠正了一个问题

```
public void registration(Course course){
     // listOfCourses[numCourse];
        listOfCourses[numCourse]=course;
      numCourse++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:39:24.440

好的，对我来说还不是很清楚，但是我会放一些代码并告诉我它是否对您有帮助。

**注：未测试**

对于学生（对不起，我更喜欢使用列表而不是数组）：

```
public class Student {

    private String id;
    private List<Course> takenCourses;

    public void registration(Course course){
        if (this.takenCourses != null) {
            takenCourses.add(course);
        } else {
            System.err.println("an array has not been specified.");
        }
    }

    public String getId() {
        return id;
    }
    public void setId(String id) {
        this.id = id;
    }

    public List<Course> getTakenCourses() {
        return takenCourses;
    }
    public void setTakenCourses(List<Course> takenCourses) {
        this.takenCourses = takenCourses;
    } 
```

对于课程：

```
public class Course {
    private String id;
    private String name;

    public String getId() {
        return id;
    }
    public void setId(String id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    } 
```

对于您的 UI，我刚刚创建了 UI 的“模拟”，我假设您已经实现了更完整的东西......我假设您已经将组件初始化为框架或面板的全局变量，或者至少您有获取它们的方法。

```
public class UIHelper extends JFrame {

    Student student = new Student();
    JButton btnAction;
    JTable myTable;
    public UIHelper() {
        //Methods for creating UI 
        //.
        //.
        //.
        student.setId("stackoverflowed");
        student.setTakenCourses(new ArrayList<Course>());

        btnAction = new JButton("Action!");
        //Methods of the JButton (...)
        btnAction.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                //Now just process since student is a global variable (you can set it static as well) but it shouldn't be a good practice at all
                for (Course course : student.getTakenCourses()) {
                    System.out.println(course.getName());
                             //Add the element to your table.
                }
            }
        });
    }

    public static void main(String[] args) {
        //Assume this is your UI
        new UIHelper();
    } 
```

希望我给你一个想法，最好的问候。

# makefile - 为什么不检测标头依赖项的更改

> ID：16221805
> 
> 赞同：1
> 
> 时间：2013-04-25T18:14:22.353
> 
> 标签：makefile, gnu-make

我不确定我在这里做错了什么。我试图弄清楚我的项目有哪些依赖项，不仅是源文件，还有非系统包含的头文件。我有很多来自这个网站的与这个主题相关的资源。

如：[Makefile头依赖](https://stackoverflow.com/a/15725861/988207)和[Makefile、头依赖](https://stackoverflow.com/a/2501715/988207)

但是，当我这样做时

```
touch MyHeader.h 
```

作为测试是否可行，我的制作过程无法重建包含此标头的源文件。所以，这就是我的makefile中的内容（相关的）

```
CPP=g++
CPPFLAGS=-Iadditional/includes -MMD
CXXFLAGS=-std=c++0x -c 
# not every source file in this directory needs to be included in this build
# this is because of shared code with Windows
SOURCESFILTER = File1.cpp File2.cpp

OBJ_DIR=obj
SOURCES = $(filter-out $(SOURCEFILTER),$(wildcard *.cpp))
OBJECTS = $(addprefix $(OBJ_DIR)/,$(SOURCES:.cpp=.o))

DEPENDENCIES = $(OBJECTS:.o=.d)

.PHONY: archive

archive : $(OBJECTS)
    ar mylib.a obj/*.o

-include $(DEPENDENCIES)

$(OBJ_DIR)/%.o: $(SOURCES) $(DEPENDENCIES)
    $(CPP) $(CPPFLAGS) $(CXXFLAGS) $< -o $@ 
```

我已经验证上述过程确实生成了预期的 *.d 文件。我假设我正确地包括了它们。但是，如前所述，作为我做的测试：touch MyHeader.h

它与源代码位于同一目录中，然后重新运行 make，包含此标头的源文件都不会被重新制作。我错过了什么？

安迪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T18:23:44.187

首先，您不能在后缀规则中包含先决条件。即使可以，您当然也*不想*包含`$(SOURCES)`or `$(DEPENDENCIES)`，因为这会导致*每个对象在**任何源*文件或依赖文件更改时重新构建。

其次，您不能在与 make 期望的目录不同的目录中创建目标文件。Make会将它想要找到目标的位置放在变量`$@`中，并且您必须将输出准确地写入该位置。如果您看到修改目标的规则，例如上面您使用`obj/$@`的 ，那将不起作用。

很可能 GCC 正在将文件编写为`obj/foo.d`，但您`include`正在尝试包含`foo.d`但不存在...但是由于您使用`-include`make 不会抱怨。

我建议您首先将目标文件写入本地目录并使其与依赖项一起使用。一旦成功，然后阅读如何将目标写入不同的目录和/或再次询问。

预计到达时间：

尝试这样的事情：

```
CXX := g++
CPPFLAGS := -Iadditional/includes -MMD
CXXFLAGS := -std=c++0x
# not every source file in this directory needs to be included in this build
# this is because of shared code with Windows
SOURCESFILTER := File1.cpp File2.cpp

OBJ_DIR := obj
SOURCES := $(filter-out $(SOURCEFILTER),$(wildcard *.cpp))
OBJECTS := $(addprefix $(OBJ_DIR)/,$(SOURCES:.cpp=.o))

DEPENDENCIES := $(OBJECTS:.o=.d)

.PHONY: archive

archive: mylib.a

mylib.a: $(OBJECTS)
        $(AR) $@ $^

-include $(DEPENDENCIES)

$(OBJ_DIR)/%.o: %.cpp
        $(CXX) $(CPPFLAGS) $(CXXFLAGS) -c -o $@ $< 
```

# html - 由于没有设置宽度，浮动元素的文本中不会发生换行

> ID：16221808
> 
> 赞同：0
> 
> 时间：2013-04-25T18:14:32.510
> 
> 标签：html, css, twitter-bootstrap, responsive-design

我正在使用 twitter-bootstrap.css 和 angularjs 开发响应式移动网页。

我正在尝试使用浮动概念并排容纳一个图像和文本。请参阅下面的屏幕截图。

我给图像指定宽度，但我没有给文本指定宽度，因为我希望文本采用图像留下的剩余宽度，

但它没有发生，当文本超过宽度时，文本进入下一行而不是换行到图像留下的可用宽度。

**屏幕截图 #1**

当文本包含在图像留出的宽度内时，当文本内容的宽度小于图像留出的可用宽度时。

![http://i38.tinypic.com/wuqnuq.png](https://i.stack.imgur.com/2htF8.png)

[（链接到完整的图像）](https://i.stack.imgur.com/2htF8.png)

**屏幕截图 #2**

当文本进入新行而不是在图像留下的宽度内换行时，当文本内容的宽度大于图像留下的可用宽度时

![http://i38.tinypic.com/vg04k8.png](https://i.stack.imgur.com/AIjvJ.png)

[（链接到完整的图像）](https://i.stack.imgur.com/AIjvJ.png)

**屏幕截图 #3**

根据我的需要，当文本在图像遗漏的宽度内换行时，当文本内容的宽度大于图像遗漏的可用宽度时。但是为文本设置了宽度。

![http://i34.tinypic.com/33lfrd1.png](https://i.stack.imgur.com/mE9p4.png)

[（链接到完整的图像）](https://i.stack.imgur.com/mE9p4.png)

我的代码是

```
<html lang="en" ng-app>
    <head>
        <meta charset="utf-8">
        <title>My HTML File</title>
        <link rel="stylesheet" href="css/bootstrap.css">
        <link rel="stylesheet" href="css/bootstrap-responsive.css">
        <style>
            .float-left {float:left !important;}
            .clearIt {clear:both !important;}
            .marRight5{margin-right:5px}
            .BgImg{background: url(images/img.png) no-repeat;height:25px;width:25px}
        </style>

        <script src="lib/angular/angular.js"></script>

    </head>
    <body>
        <div class="row-fluid">
            <div class="BgImg float-left marRight5"></div>
            <div class=" float-left">This is test content This is test content This is test content This is test content This is test content</div>
            <div class="clear"></div>
        </div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:31:56.780

将浮动从您的文本 div 中取出。浮动元素不环绕其他浮动，它们作为一个块围绕它们浮动，必要时换行。

[http://jsfiddle.net/isherwood/jP6yd/](http://jsfiddle.net/isherwood/jP6yd/)

```
<div class="row-fluid">
    <div class="BgImg float-left marRight5"></div>
    <div>This is test content This is test content This is test content This is test content This is test content</div>
    <div class="clear"></div>
</div> 
```

# qt - Qt如何处理鼠标事件？

> ID：16221810
> 
> 赞同：0
> 
> 时间：2013-04-25T18:14:35.767
> 
> 标签：qt, event-handling, pyqt, pyside

Qt 场景中的拖动、平移和鼠标跟踪项目是我想在我的应用程序中同时使用的 3 个操作。然而，这比我想象的要难。

示例代码：

```
from PySide.QtCore import *
from PySide.QtGui import *

class View(QGraphicsView):
    """# HOW TO ATTACH MOUSE EVENTS PROGRAMMATICALLY ?
    def mouseMoveEvent(self, event):
        print "View MOVE", event.pos()
    """
class Scene(QGraphicsScene):
    pass

class CircleForTrackingSwitch(QGraphicsEllipseItem):
    def __init__(self, scene):
        super(CircleForTrackingSwitch, self).__init__()
        self.scene = scene
        self.view = self.scene.views()[0]
        self.setRect(QRect(20,20,20,20))
        self.scene.addItem(self)

    def mousePressEvent(self, event):
        if self.view.hasMouseTracking() :
            self.view.setMouseTracking(False)
        else :
            self.view.setMouseTracking(True)
        print "Circle View SetTrack", event.pos()

    def mouseMoveEvent(self, event):
        print "Circle MOVE", event.pos()

class DraggableRectangle(QGraphicsRectItem):
    def __init__(self, scene):
        super(DraggableRectangle, self).__init__()
        self.scene = scene
        self.setRect(QRect(-20,-20,40,40))
        self.scene.addItem(self)
        #self.setFlag(QGraphicsItem.ItemIsMovable, True)

    def mousePressEvent(self, event):
        print "Rectangle PRESS", event.pos()

    def mouseMoveEvent(self, event):
        print "Rectangle MOVE", event.pos()
        self.setPos(event.pos())

    def mouseReleaseEvent(self, event):
        print "Rectangle RELEASE", event.pos()

class Window(QMainWindow):
    def __init__(self):
        QMainWindow.__init__(self)
        self.s = Scene()
        self.s.setSceneRect(-200,-100,300,300,)

        self.v = View(self.s)
        self.v.setDragMode(QGraphicsView.ScrollHandDrag)
        self.setCentralWidget(self.v)

        CircleForTrackingSwitch(self.s)
        DraggableRectangle(self.s)

if __name__ == '__main__':
    import sys
    app = QApplication(sys.argv)
    window = Window()
    window.resize(300, 200)
    window.show()
    sys.exit(app.exec_()) 
```

主问题：如何以编程方式附加鼠标事件？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T18:13:15.120

对于可拖动的 Rectangle，由于 Rectangle 已经是可移动的，因此您只需对其进行子类化，以重载不同的鼠标功能（使用轨道的东西），然后调用父级的鼠标事件。基本上，你可以用这个矩形类得到你想要的：

```
class DraggableRectangle(QGraphicsRectItem):
    def __init__(self, scene, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.scene = scene
        self.setRect(QRect(-20,-20,40,40))
        self.scene.addItem(self)
        self.setFlag(QGraphicsItem.ItemIsMovable, True) # Keep that

    def mousePressEvent(self, event):
        print "Rectangle PRESS", event.pos()
        super().mousePressEvent(event) # Call parent

    def mouseMoveEvent(self, event):
        print "Rectangle MOVE", event.pos()
        # Do not move by yourself
        # Call parent that already handles the move
        super().mouseMoveEvent(event)

    def mouseReleaseEvent(self, event):
        print "Rectangle RELEASE", event.pos()
        super().mouseReleaseEvent(event) # Call parent 
```

我希望这就是你要找的。

# mercurial - TortoiseHG 相位错误

> ID：16221812
> 
> 赞同：2
> 
> 时间：2013-04-25T18:14:38.940
> 
> 标签：mercurial, tortoisehg, kiln

出于某种原因，TortoiseHG 不再认为我推送的变更集具有`public`; 它将它们保持为“默认值”。

有什么方法可以强制 TortoiseHG 与远程存储库“同步”，并搞清楚这一点？

窑里有办法吗？

![在此处输入图像描述](https://i.stack.imgur.com/XPt7d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T20:03:24.813

看起来这是 Kiln 的最新变化。从版本 3 开始，如果推送到分支存储库的更改**不**属于创建分支的主中央存储库的一部分，它们将显示为草稿。

# perl - 将数据结构转为 perl 对象（模块推荐）

> ID：16221814
> 
> 赞同：3
> 
> 时间：2013-04-25T18:14:40.673
> 
> 标签：perl, object, moose

我有一个任意的数据结构，我想把它当作一个对象。我得到这个作为来自 REST 应用程序的响应。下面的例子。CPAN 上有一些模块可以做到这一点。Data::Object 对我来说看起来最好，但它最后一次更新是 2011 年。我错过了什么吗？是否有一种简单的 Moose 方法可以做到这一点？谢谢！

```
$o=$class->new($response);
$s=$o->success;
@i=$o->items;
{
    'success' => bless( do{\(my $o = 1)}, 'JSON::XS::Boolean' ),
    'requestNumber' => 5,
    'itemsCount' => 1,
    'action' => 'search.json',
    'totalResults' => 161,
    'items' => [
        {
            'link' => 'http://europeana.eu/api//v2/record/15503/E627F23EF13FA8E6584AF8706A95DB85908413BE.json?wskey=NpXXXX',
            'provider' => [
                'Kulturpool'
            ],
            'europeanaCollectionName' => [
                '15503_Ag_AT_Kulturpool_khm_fs'
            ],
            # more fields omitted
        }
    ],
    'apikey' => 'Npxxxx'
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T04:45:33.687

虽然我不喜欢使用它，但定义`AUTOLOAD`子例程是一种动态创建任意类的方法。自从我使用它已经有一段时间了，但它应该看起来像这样：

```
package Local::Foo;

sub new {
    my $class = shift;

    my $self = {};
    bless $self, $class;
    return $self;
}

sub AUTOLOAD {
    my $self = shift;
    my $value = shift;

    our $AUTOLOAD;
    (my $method = $AUTOLOAD) = s/.*:://;
    if ( defined $value ) {
        $self->{$method} = $value;
    }
    return $self->{$method};
} 
```

这个类`Local::Foo`有无数种方法。例如，如果我说

```
$foo->bar("fubar"); 
```

这将与以下内容相同：

```
$foo->{bar} = "foobar"; 
```

如果我打电话`$foo->bar;`，它将返回的值`$foo->{bar};`。

你可能想要一些东西来限制你的方法的风格和它们的价值。例如，有了这个：

```
$foo->BAR;
$foo->Bar;
$foo->bar; 
```

都是三种有效且完全不同的方法。您可能需要一些东西来确保您的方法与特定模式匹配（即，它们都是小写的，或者第一个字母是大写的，其余的都是小写的。您可能希望确保它们以字母开头，`$foo->23diba;`不是一个有效的方法。

一个小问题：一旦你定义了一个`AUTOLOAD`子程序，你也定义了`DESTROY`子程序。Perl`DESTROY`在对象被销毁之前调用子例程。如果你也需要处理这个问题`$AUTOLOAD =~ /.*::DESTROY$/`。您可能需要添加：

```
return if $AUTOLOAD =~ /.*::DESTROY$/; 
```

在`AUTOLOAD`子程序的某个地方，所以你不会在被调用时不小心做某事`DESTROY`。请记住，只要一个类对象超出范围（如果存在），它就会自动调用，并且`AUTOLOAD`无论如何您已经定义了一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:01:51.490

这是一个例子：

```
use strict;

package Foo; 

#define a simple Foo class with 3 properties
use base qw(Class::Accessor);
Foo->mk_accessors(qw(name role salary));

package main;
#define a perl hash with the same keys
my $hr = {'name'=>'john doe', 'role'=>'admin', 'salary'=>2500 };

#bless the object
my $obj = bless $hr, 'Foo';

print $obj->name, "\n"; #<-- prints: john doe 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T22:33:36.910

我并不是说这一定是一个好主意，是实现这个想法的最佳方式，或者没有陷阱。直到 15 分钟前我才尝试过。但它很有趣而且很简洁，所以——

```
#!/usr/bin/env perl
BEGIN {
    package Role::AutoVacca;
    use Moo::Role;
    use Scalar::Util "blessed";
    sub BUILD {
        my $self = shift;
        for my $attr ( grep /\A[^_]/, keys %{$self} )
        {
            Method::Generate::Accessor
                ->generate_method( blessed($self),
                                   $attr,
                                   { is => "rw" } );
        }
    }

    package Fakey;
    use Moo;
    with "Role::AutoVacca";
}

my $fake = Fakey->new({
    success => bless( do{\(my $o = 1)}, "JSON::XS::Boolean" ),
    items => [ { link => "http://europeana.eu/o/haipi",
                 provider => [ "mememememe" ] } ],
    apikey => "3k437" });

print "I CAN HAZ KEE? ", $fake->apikey, $/;
print "IZ GUD? ", $fake->success ? "YAH" : "ONOES", $/;
print "WUT DIZZYING? ", $fake->items, $/; 
```

# actionscript-3 - 闪光朋克的电影剪辑或矢量数据？

> ID：16221821
> 
> 赞同：1
> 
> 时间：2013-04-25T18:15:07.973
> 
> 标签：actionscript-3, actionscript, movieclip

您好，有没有办法在 flashpunk 库中使用动画剪辑来制作图形？

通常我们会嵌入一个.png图像并将其声明为一个类，然后我们会将实体类的图形变成这个新图像。

```
[Embed(source = "../img/QButton.png")] private var m_QButtonClass:Class;

this.graphic = new Image(m_QButtonClass); 
```

我试过这个：

```
[Embed(source='Player.swf', symbol='PlayerSymbol')] private var _someVector:Class;

this.graphic = new Image(_someVector); 
```

有没有办法使用 flashpunk 从 Adob​​e 专业 cs6 加载矢量数据/电影剪辑数据？

# linux - 如何为集群计算机编写作业文件？

> ID：16221825
> 
> 赞同：1
> 
> 时间：2013-04-25T18:15:22.740
> 
> 标签：linux, cluster-computing, hpc

我对高性能计算机非常陌生。在我的笔记本电脑中，我可以通过键入类似“./prog”的命令来运行程序。但是在 HPC 中，我需要在运行任何作业之前编写一个作业文件。我得到了一个简单的工作文件来开始。但这真的让我很困惑：

```
#!bin/bash
# BSUB -q
#BSUB -o outfile -R “mem>10”
myjob arg1 arg2
#BSUB -J myjob 
```

有人有处理这种类型的 HPC 的经验吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:25:52.633

如果我没记错的话，您的 HPC 系统称为 LAVA 队列系统，由 HP 开发。
我希望以下内容可以回答您的问题：

* * *

*   Lava 常用命令一目了然**

`bhosts -w`
在一行中显示每个节点的状态

`bhosts -l`
显示每个节点状态的详细信息

`bqueues [-l -w -r]`
按用户组显示每个节点的状态

`bparams [-l -h -V]`
显示 bjob​​s 的可用参数

`lsid`
显示当前熔岩版本号

`lsinfo`
显示负载分担信息

`lshotst`
显示主机及其静态资源信息

`lsload`
显示主机的负载信息

`bjobs -u all`
显示工作信息

`bjobs <job-id>`
按 ID 显示作业信息

`bjobs -a`
显示所有工作

`bjobs -r/-p/-s`
显示正在运行/暂停/暂停的作业

`bjobs -l`
显示更多细节

`bhist`
显示工作经历

**提交工作**

```
bsub my_job
bsub < myscript
bsub -n 4  myjob
bkill 1234
bstop 1234
bresume 1234 
```

更多参考可以在以下位置找到：

[http://ccls.lab.sfsu.edu/bin/view/Cluster/LavaSchedulerInformation](http://ccls.lab.sfsu.edu/bin/view/Cluster/LavaSchedulerInformation)

# javascript - 如何使用javascript在鼠标单击时更改td中的css

> ID：16221826
> 
> 赞同：1
> 
> 时间：2013-04-25T18:15:28.740
> 
> 标签：javascript, html, css, javascript-events

Uisng javascript，我试图在点击 td 时加载 css (id)。

![点击事件](https://i.stack.imgur.com/XTxPE.jpg)

在上图中，我在一个 td 中创建了主帐户持有人，在另一个 td 中创建了授权记者。主帐户持有人选项卡应在加载时加载。我需要的是在单击授权记者选项卡时，主帐户持有人和授权报告人的 css 应该更改.ie，主要账户持有人的背景应在授权报告人处申请，反之亦然。

.css id 是，

```
#account_holder{
         background: url('{{ STATIC_URL }}images/main-account-holder.png')no-repeat;
         background-size:100%;-moz-background-size: cover;
         background-size: cover;-o-background-size: cover;
         -webkit-background-size: cover;
    }
    #authorised_reportericon{
         background: url('{{ STATIC_URL }}images/authorised_reporter-icon.png')no-repeat;
         background-size:100%;
         -moz-background-size: cover;
         background-size: cover;-webkit-background-size: cover;-o-background-size: cover;
         background-color:#F0F0F0;
         border-top-right-radius: 10px;
         border-bottom-right-radius: 10px;
    }
    #account_holdericon{
         background: url('{{ STATIC_URL }}images/main-account-holder-icon.png')no-repeat;
         background-size:100%;
         -moz-background-size: cover;
         background-size: cover;
    } 
    #authorised_reporter{
         background: url('{{ STATIC_URL }}images/authorised_reporter.png')no-repeat;background-size:100%;
         -moz-background-size: cover;
         background-size: cover;
         background-color:#F0F0F0;
         border-top-right-radius: 10px;
         border-bottom-right-radius: 10px;   
    } 
```

使用javascript我想在执行onclick时更改css id。我不知道如何在javascript中编码。任何人都可以告诉我如何编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:20:39.073

ID 应该是唯一的。不要改变它们。改用类

在 Css 中将 # 替换为 . 如下所示：

```
.account_holder{
         background: url('{{ STATIC_URL }}images/main-account-holder.png')no-repeat;
         background-size:100%;-moz-background-size: cover;
         background-size: cover;-o-background-size: cover;
         -webkit-background-size: cover;
    } 
```

以下是如何使用 javascript 更改元素的类名：

编辑：

```
 var your_element = document.getElementById('your_element_id');

   your_element.onclick = function(){
       this.className = 'account_holder';
   }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:19:53.563

如果使用 jquery 或使用 hover，您应该同时使用 mouseenter 和 mouseout 事件状态

# ios - UIDatePicker 和 UITableView 之间的通信

> ID：16221829
> 
> 赞同：0
> 
> 时间：2013-04-25T18:15:34.623
> 
> 标签：ios, xcode, uitableview, uidatepicker

在我的项目中，我有 3 个控制器；

*   `NavigationController`
*   `ServiceTableViewController`
*   `DateTableViewController`

是`ServiceTableViewController`初始视图控制器。它有几行提示用户输入数据，这些数据将通过电子邮件发送到特定的电子邮件地址。当点击其中一行时，会将用户发送到`DateTableViewController`提示用户从`UIDatePicker`.

我面临的问题是从中获取数据`DateTableViewController`，以便在 上显示标签`ServiceTableViewController`以显示用户在`DateTableViewController`. 我知道如何从一个视图控制器获取信息到另一个视图控制器，但反过来说，我不知道该怎么做。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:36:49.167

研究委托模式（[此处](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)）（Apple 框架中大量使用的模式）。您想定义一个委托协议，允许将日期传递给委托。

您可以将模式实现为具有单个方法和属性的 @protocol `DateTableViewController`。在`ServiceTableViewController`推动`DateTableViewController`.

或者，您可以使用块来实现。同样，`ServiceTableViewController`在推动`DateTableViewController`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T02:18:13.393

看看这个： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html)

有几种方法可以在视图控制器之间来回传递数据。

*   [代表们](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)
*   [目标-Aciton](https://developer.apple.com/documentation/General/Conceptual/Devpedia-CocoaApp/TargetAction.html)
*   [通知](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html#//apple_ref/doc/uid/10000043i)
*   [KVO](http://www.mikeash.com/pyblog/key-value-observing-done-right.html)

但老实说，代表真的是你真正需要的，听起来就像你目前的情况。看到这个->（[在视图控制器之间传递数据](https://stackoverflow.com/questions/5210535/passing-data-between-view-controllers)）

* * *

话虽如此，如果您使用委托，以下是如何`DateTableViewController.h`在顶部设置协议，如下所示：

```
@protocol DateTableViewControllerDelegate <NSObject>
- (void)userSelectedThisDate:(NSDate *)d;
end 
```

把它和其他属性放在一起

```
@property (nonatomic, weak) id <DateTableViewControllerDelegate> delegate; 
```

并附`DateTableViewController.m`上寄回日期

```
[self.delegate userSelectedThisDate:withTheDateToSendBack]; 
```

并`ServiceTableViewController.h`添加

```
#import "DateTableViewController.h"
@interface ServiceTableViewController : UIViewController <DateTableViewControllerDelegate> 
```

既然你是`UINavigationController`，当你要推到的时候，在某处`ServiceTableViewController.m`添加这个`DateTableViewController`

```
DateTableViewController *vc = [[DateTableViewController alloc] init];
self.delegate = self;
[self.navigationController pushViewController:vc animated:YES]; 
```

最后将委托方法放入`ServiceTableViewController.m`

```
- (void)userSelectedThisDate:(NSDate *)d {
   NSLog(@"%@", d); // this should show the returned date 
} 
```

# php - 这在 PHP $a=explode(' ', $loadFunction)[0]; 中不起作用的原因是什么？

> ID：16221832
> 
> 赞同：0
> 
> 时间：2013-04-25T18:15:47.597
> 
> 标签：php

我试图在不使用另一个变量的情况下访问一个数组。

例如

```
$loadFunction = "a b c d";

$a= explode(' ', $loadFunction)[0]; 
```

我在 PHP 5.3.3 中遇到解析器错误

有什么办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T18:17:12.027

这种语法[在 PHP 5.4 中是可以接受的](http://php.net/manual/en/migration54.new-features.php)，但不能更低。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T18:18:57.810

最接近没有 PHP 5.4 你会得到的是，

```
$loadFunction = "a b c d";

list($a) = explode(' ', $loadFunction);
// $a = a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:24:21.133

或者

```
$loadFunction = "a b c d";
$a = reset(explode(' ', $loadFunction));
// $a = 'a' 
```

# oracle - 批量收集 Oracle

> ID：16221834
> 
> 赞同：0
> 
> 时间：2013-04-25T18:15:54.093
> 
> 标签：oracle, oracle11g

如果数据从表 B 插入到表 A 中，并且在选择数据时，substr、instr、trunc 函数已用于提取的列，是否可以进行批量收集？

```
INSERT INTO A
SELECT
DISTINCT 
    SUBSTR(b.component, 1, INSTR(b.component, ':', 1)  - 1),
    TRUNC(c.end_dt, 'DDD'),
FROM 
    B b,
    C c
WHERE 
    TRUNC(c.end_dt)=TRUNC(b.last_Date, 'DDD') ; 
```

如何使用批量收集将数据插入表 A？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:25:52.783

您使用 Bulk Collect 和 FORALL 插入行的唯一原因是当您绝对需要以块的形式处理/插入行时。否则总是使用 SQL。

```
DECLARE 
   CURSOR c_data IS
   SELECT * FROM source_tab;
--
  TYPE t_source_tab IS TABLE OF source_tab%ROWTYPE;
  l_tab t_source_tab;
  v_limit  NUMBER:= 1000;
BEGIN
  OPEN c_data;
  LOOP
    FETCH c_data BULK COLLECT INTO l_tab LIMIT v_limit; 
    EXIT WHEN l_tab.count = 0;
    -- Insert --    
    FORALL i IN l_tab.first .. l_tab.last
      INSERT INTO destination_tab VALUES l_tab(i);
      COMMIT;

      -- prints number of rows processed --
      DBMS_OUTPUT.PUT_LINE ('Inserted ' || SQL%ROWCOUNT || ' rows:'); 

    -- Print nested table of records - optional. 
    -- May overflow the buffer and slow down the performance if you process many rows.
    -- Use for testing only and limit the rows with Rownum or Row_Number() in cursor query:
    FOR i IN l_tab.FIRST..l_tab.LAST -- or l_tab.COUNT
    LOOP
      DBMS_OUTPUT.PUT_LINE (l_tab(i).hire_date ||chr(9)||l_tab(i).last_name ||chr(9)||l_tab(i).first_name);
    END LOOP;    

 END LOOP;
CLOSE c_data;
END
/ 
```

# java - 如何在 WebSphere 8.0 上获取 TransactionManager？

> ID：16221840
> 
> 赞同：1
> 
> 时间：2013-04-25T18:16:18.410
> 
> 标签：java, websphere, transactionmanager

我试图在@Singleton SessionBean - EJB 3.1 - 中获取 TransactionManager 来控制我的事务范围，因为我必须通过@PostConstruct 方法访问数据库。如果发生异常，我不能让 Container RollBack 因为它抛出 TransactionRolledbackException: setRollbackOnly 从单例 post 构造方法中调用。

我正在使用 JTA 数据源并定义了 @TransactionManagement(TransactionManagementType.BEAN) 来覆盖对事务的控制。

@Resource 私有事务管理器事务管理器；

当我尝试执行“transactionManager.begin();”时，返回给我一个 NullPointerException。有谁知道如何解决这个问题？

更新：

我正在使用的代码是这样的：

```
 @Startup
    @Singleton
    @TransactionManagement(TransactionManagementType.BEAN)
    public class RuntimeContextEJB

{

    @EJB
    private RepositoryRecursosExternosFactoryEJB    repositoryRecursosExternosFactoryEJB;

    @EJB
    private MetodologiaIndiceLiquidezFactoryEJB     metodologiaIndiceLiquidezFactoryEJB;

    @EJB
    private FuncaoMatematicaFactoryEJB              funcaoMatematicaFactoryEJB;

    private boolean                                 bootstrapRunning    = false;

    private List<String>                            dadosMercadoMonitorados;

    @PersistenceContext(unitName = "crv-persistence-unit")
    private EntityManager                           entityManager;

    @Resource
    private TransactionManager transactionManager;

    @PostConstruct
    public void init()
    {
        // comentário
        MotorCalculoContext.setupMotorCalculoContext(repositoryRecursosExternosFactoryEJB, metodologiaIndiceLiquidezFactoryEJB,
                funcaoMatematicaFactoryEJB);
        carregaDadosMercadoMonitorados();

    }

    public void sinalizarInicioBootstrap()
    {
        bootstrapRunning = true;
    }

    public void sinalizarTerminoBootstrap()
    {
        bootstrapRunning = false;
    }

    public boolean isBootstrapRunnnig()
    {
        return bootstrapRunning;
    }

    public void carregaDadosMercadoMonitorados()
    {

        try
        {

            transactionManager.begin();

            this.dadosMercadoMonitorados = (List<String>) entityManager
                    .createQuery(
                            "SELECT DISTINCT(p.parametro.codigoDadoMercado) FROM PlanoExecucaoPasso p WHERE p.parametro.codigoDadoMercado <> '' AND p.parametro.codigoDadoMercado <> '0'")
                    .getResultList();
        }
        catch (Exception e)
        {
        }

    }

} 
```

我认为应该在@Resource 注释上添加一个JNDI 地址，这是特定于WebSphere 的，但我真的找不到。

更新：

为什么在容器管理的注入上使用 JNDI？由于我从直接注入中获得了空指针异常，因此尝试像 ex 一样使用。OReilly Enterprise Java Beans 3.1 第 6 版的第 305 页。

```
@Resource(mappedName = "java:/TransactionManager")
//mappedName is vendor-specific, and in this case points to an address in JNDI 
```

试过这个没有成功。

更新

WebSphere 没有得到我们的 bean 注释——不知道为什么——所以注释：

```
@TransactionManagement(TransactionManagementType.BEAN) 
```

没有工作。因此，编辑了 de ejb-jar.xml 并添加了以下代码：

```
<transaction-type>Bean</transaction-type> 
```

并且 UserTransaction 工作。感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T03:09:48.580

当您有 bean 托管事务时，您不使用`javax.transaction.TransactionManager`，而是使用`javax.transaction.UserTransaction`.

然后你调用`UserTransaction`接口的开始，提交....等。

**答案更新：**

**1）**首先，正如我所说，不要使用`TransactionManager`. 采用`UserTransaction`

**2)**因为您想知道对象的JNDI*名称*`UserTransaction`。它是`java:comp/UserTransaction`。但是只有在您的组件不受管理时才需要它。*即：* Servlet、EJB。该过程称为手动调用 JNDI API

**3)**提供**commit()**或**rollback()**。它们都不存在。

我正在看你的课，看起来还不错。

**那么，问题出在哪里？（可能性）**

**1）**您的类不被视为 EJB（容器管理），这就是注入失败的原因。

**2）**事务服务在EJB @Startup 之前没有启动或者启动失败。

**3)**您在*persistence.xml*中配置了*JTA 数据源*。在这种情况下，请尝试：

 *```
@Resource
private EJBContext context;

userTransaction  = context.getUserTransaction(); 
```

**注意：**还请提供完整的堆栈跟踪和*persistence.xml*以查明确切的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-14T19:03:53.277

您不需要在编程 (BMT) 会话 bean 中使用事务管理器，除非您想在某些情况下挂起（）或恢复（）相关事务，否则请改用 UserTransaction。

***但是，您可以通过com.ibm.ws.Transaction.TransactionManagerFactory***类使用静态方法 getTransactionManager()获得对 websphere 中事务管理器的引用。

```
public TransactionManager getTransactionManager() {
    return TransactionManagerFactory.getTransactionManager();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T04:26:59.977

这是一些使用 UserTransaction 正确运行以控制事务的示例代码。

```
@Singleton
@Startup
@TransactionManagement(TransactionManagementType.BEAN) 
public class SampleUT {

Logger logger = Logger.getLogger(SampleUT.class.getName()); 

@Resource
private UserTransaction ut;

@PostConstruct
public void postConstruct()
{
    logger.info("PostConstruct called");

    try {
        ut.begin();
... 
```

您得到的 NullPointerException 可能与您尝试在 EJB 的构造函数中使用注入的资源有关。您应该知道，在 EJB 的构造函数完成之前，注入的引用永远不可用，因此如果您尝试在构造函数中使用任何注入的引用，它将抛出 NullPointerException。*

# html - 对齐 HTML 布局

> ID：16221850
> 
> 赞同：2
> 
> 时间：2013-04-25T18:16:49.183
> 
> 标签：html, css

我需要建立这个站点[模型](http://dh-creative-webdesign.de/mockup.html)

这是我现在拥有的[网站](http://dh-creative-webdesign.de/rw-fliesen.html)

当您向下滚动到页面底部时，您会看到布局的高度不合适（底部仍然有一条黑线）。

我尝试了一些调整，但 Layout 的高度仍然是错误的。

可以做些什么来修复它？

这是我的代码：

HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>RW-Fliesen</title>
        <link rel="stylesheet" type="text/css" href="style.css" />
    </head>
    <body>
        <div id="wrapper">
            <div id="header">
                <a href="index.html" class="logo"     title="Logo"></a>
                <div class="contact-info" title="contact-    info"></div>
                <ul class="mn">
                    <li><a href=" " title="" class="mn1 "></a>        </li>
                    <li><a href=" " title="" class="mn2 "></a>    </li>
                    <li><a href=" " title="" class="mn3 "></a>    </li>
                    <li><a href=" " title="" class="mn4 "></a></li>
                    <li><a href=" " title="" class="mn5 "></a></li>
                    <li><a href=" " title="" class="mn6 "></a></li>
                </ul>
            </div>
            <div id="content">
                <div id="top">
                    <div class="foto1" title="Fliesen">     <img src="foto1.png" alt="Fliesen1"/> </div>
                    <div class="foto2" title="Fliesen">     <img src="foto2.png" alt="Fliesen2"/> </div>
                </div>
                <div id="leftcolumn">
                    <div class="text" title="text">
                        <p> RW-Fliesen <br />
                            Ludwig-Thoma-Str. 36 <br />
                            82008 Unterhaching 
                        </p>
                        <div class="text2"     title="text">
                            <p> Telefon: <br />
                                Fax: <br />
                                Mobil: <br     />
                                Email: <br />
                            </p>
                        </div>
                        <div class="text3"     title="text">
                            <p> 089 - 358 557     88 <br />
                                089 - 358 557 89 <br />
                                0179 - 673 77 41 <br />
                                info@rw-fliesen.com <br />
                            </p>
                        </div>
                        <div class="text4" title="text">
                            <p> Betriebsnummer: 7084943 <br />    <span class="text-blue"> Eingetragen in die Handwerksrolle bei <br /> der Handwerkskammer     für München <br /> und Oberbayern. </span>   </p>
                        </div>
                    </div>
                    <div class="face" title="face">
                        <iframe id="f580fdad4"     name="f83387924" scrolling="no" style="border: none; overflow: hidden; height: 690px; width: 262px;" class="fb_ltr" src="http://www.facebook.com/plugins/likebox.php?api_key=&amp;locale=de_DE&amp;sdk=joey&amp;channel=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D18%23cb%3Dfe1e61258%26origin%3Dhttp%253A%252F%252Fwww.rw-fliesen.com%252Ff21318bbdc%26domain%3Dwww.rw-fliesen.com%26relation%3Dparent.parent&amp;height=290&amp;header=true&amp;show_faces=true&amp;stream=false&amp;width=262&amp;href=http%3A%2F%2Fwww.facebook.com%2Fpages%2FRW-Fliesen%2F115860578491339&amp;colorscheme=light"></iframe>
                    </div>
                </div>
                <div id="rightcolumn">
                    <div class="text5" title="text">
                        <p> Wir sind Ihr fachlich     kompetenter Fliesenleger- und Innenausbaubetrieb in Unterhaching.  </p>
                    </div>
                </div>
                <div id="footer">
                </div>
            </div>
        </div>
    </body>
</html> 
```

CSS：

```
@charset "utf-8";
/* CSS Document */

body { background: #1c1b17 url(bg.jpg) repeat-x; margin: 0; padding: 0; height: 1000px;     font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px;}

p {     color: #17142B; line-height: 18px;  padding: 0; font-size: 13px; font-    weight: 600; }
h3 { color: #003d7a; font-size: 10px; font-weight: 600; margin-top: 0px; padding: 0px;     }    
h4 { color: #2f303f; font-size: 13px; font-weight: 600; margin-top: 20px; padding: 0px;     }       

.text-blue {     color: #003d7a; line-height: 16px; padding: 0; font-size: 10px;     font-weight: 600; }

#wrapper { width: 1000px; height: 800px; margin: 0 auto; }
#header { height: 400px; width: 1000px; display: block; position: relative; }
#header .logo { position: absolute; width: 374px; height: 221px; display: block; float:         left; cursor: pointer; background: url(logo.png) 0 0 no-repeat transparent; top: 55px;     left: 10px; }
#header .contact-info { position: absolute; width: 293px; height: 133px; display:     block; float: left; cursor: pointer; background: url(contact-info.png) 0 0 no-repeat     transparent; top: 100px; left: 700px; }

ul.mn { position: absolute; float: left; top: 316px; width: 978px; margin: 0; padding:     0; list-style-type: none; }
ul.mn li { float: left; }
ul.mn li a { display: block; float: left; height: 73px; }
ul.mn li a.mn1 { width: 104px; background-image: url('mn1.png'); background-position: 0     0; }
ul.mn li a.mn2 { width: 212px; background-image: url('mn2.png'); }
ul.mn li a.mn3 { width: 142px; background-image: url('mn3.png'); }
ul.mn li a.mn4 { width: 128px; background-image: url('mn4.png'); }
ul.mn li a.mn5 { width: 117px; background-image: url('mn5.png'); }
ul.mn li a.mn6 { width: 147px; background-image: url('mn6.png'); }
ul.mn li a.active, ul.mn li a:hover { background-position: 0 73px; }

#content { height: 1000px; width: 1000px; display: block; position: relative; }

#top { height: 300px; width: 1000px; display: block; position: relative; margin-bottom:     100px; }
#top .foto1 { width: 452px; height: 139px; float: left; margin-top: 30px; }
#top .foto2 { width: 253px; height: 138px; float: left; margin-top: 30px; margin-left:     100px; }

#leftcolumn { height: 800px; width: 300px; display: block; position: relative; float:     left; }
#leftcolumn .text { height: 10px; width: 300px; display: block; position: relative;     margin-bottom: 90px; }
#leftcolumn .text2 { height: 10px; width: 50px; display: inline-block; position:     relative; }
#leftcolumn .text3 { height: 10px; width: 200px; display: inline-block; position:     relative;  padding-left: 30px; }
#leftcolumn .text4 { height: 10px; width: 300px; display: inline-block; position: relative; margin-top: 80px; }
#leftcolumn .face { height: 100px; width: 300px; display: block; position: relative; margin-top: 290px; }

#rightcolumn { height: 800px; width: 700px; display: inline-block; position: absolute;     margin-left: 350px; margin-top: 0px; float: right; }
#rightcolumn  .text5 { height: 300px; width: 700px; display: inline-block; position:     relative; }

#footer 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:25:06.660

您的页面中有一个带有 Facebook 信息的 iframe。此 iframe 延伸到页面底部并导致黑色背景可见。

您需要降低此 iframe 的高度。目前它是这样设置的（内联）：

```
<iframe id="f580fdad4" name="f83387924" scrolling="no" style="border: none; overflow: hidden; height: 690px; width: 262px;" class="fb_ltr" src="..."></iframe> 
```

如果将高度更改为最大 684 像素，则黑条消失：

```
<iframe id="f580fdad4" name="f83387924" scrolling="no" style="border: none; overflow: hidden; height: 684px; width: 262px;" class="fb_ltr" src="..."></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:59:35.493

我还注意到您的菜单栏没有在您的标题中排列，我还没有 10 个声誉点，所以我无法在我的浏览器 Chrome 版本：26.0.1410.63 中分享您的页面外观的图像文件。如果您想要该图像，请随时给我发电子邮件，我会发送给您。

假设您试图模仿您在初始帖子中引用的模型站点。我相信您应该对解决菜单栏的 css 代码部分进行以下调整。您提供的内容：

```
ul.mn { position: absolute; float: left; top: 316px; width: 978px; margin: 0; padding:0; list-style-type: none; } 
```

我的提议：

```
ul.mn { position: absolute; float: left; top: 316px; width: 850px; margin: 0 auto 0 10px; padding:0; list-style-type: none;} 
```

请注意，我更改了宽度以反映由每个定义的按钮 div 的组合宽度决定的宽度，从 978px 到 850px，然后我建议不要将所有边距设置为 0，而是将顶部设置为 0，右侧自动、底部 0 和左侧 10 像素（因为根据我从您的模型中看到的菜单左侧与徽标的左侧对齐）。进行这些更改后，我可以让您的菜单栏很好地位于标题 div 的底部。

请至少告诉我你的进展情况。我一直在寻求分享想法并学习其他解决问题的方法。我相信它会让我们变得更加聪明。

祝你好运，史蒂夫

# tsql - 如何仅显示报告中的前三行？

> ID：16221852
> 
> 赞同：-1
> 
> 时间：2013-04-25T18:17:00.010
> 
> 标签：tsql, crystal-reports, crystal-reports-2008

我在报告中有 2 个字段：`job#`和`hours worked`. 我将它分组`job#`，然后按小时计算总和。我希望能够获得`job#`总时间最多的前 3 名。可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:39:42.537

在组排序专家中，它可以让您按前 n 过滤

# mysql - 在 MySQL 中连接多个表并合并数据

> ID：16221860
> 
> 赞同：0
> 
> 时间：2013-04-25T18:17:17.933
> 
> 标签：mysql, join, concat

我有四个要连接在一起的表，但是一个表我想 group_concat 两个特定记录。

```
Product_to_category PC
P_ID C_ID
1 1
2 2
2 3
1 3

产品P
P_ID P_PRICE
1 12
2 3
3 4

产品_描述 PD
P_ID Language_id PD_Name
1 1 筹码
1 2 芯片（用不同的语言）
2 1 苏打水
2 2 苏打水（另一种语言）

类别 说明 CD
C_ID Language_id CD_Name
1 1 垃圾食品
1 2 垃圾食品（另一种语言）
2 1 饮料
2 2 饮料（用不同的语言）
3 1 进口
3 2 导入（使用不同的语言）

Product_attribute PA
P_ID A_ID Language_ID A_TEXT
1 1 1 品牌 A
1 2 1 300克
1 3 1 番茄酱
1 1 2 品牌 A
1 2 2 300克
1 3 2 番茄酱（不同语言）
2 1 1 品牌 B
2 2 1 500毫升
2 3 1 樱桃
2 1 2 品牌 B
2 2 2 500毫升
2 3 2 樱桃（不同语言）

```

我想做的是如下：

```
P.P_ID |  P.P_PRICE | PD.LANGUAGE_ID | PD.PD_NAME | CD.C_ID | CD.CD_NAME | Attribute
------------------------------------------------------------------------------------
  1    |  12        |   1            | Chips      |  1      | Junk Food | Brand A 300g
  1    |  12        |   2            | Chips      |  1      | Junk Food | Brand A 300g
  2    |  3         |   1            | Soda       |  2      | Drinks    | Brand B 500mL
  2    |  3         |   2            | Soda       |  2      | Drinks    | Brand B 500mL
  2    |  3         |   1            | Soda       |  3      | Imported  | Brand B 500mL
  2    |  3         |   2            | Soda       |  3      | Imported  | Brand B 500mL
  1    |  12        |   1            | Chips      |  3      | Imported  | Brand A 300g
  1    |  12        |   2            | Chips      |  3      | Imported  | Brand A 300g 
```

基本上，我正在尝试使用类别和属性加载产品。只需在没有 Product_attribute PA 的情况下加入表格即可正常工作。我无法弄清楚如何将属性放在一起。下面是我的代码：

```
select P.P_ID, P.P_PRICE, PD.LANGUAGE_ID, PD.PD_Name, CD.C_ID, CD.CD_NAME, 
(select group_concat(PA.A_TEXT) from PA where (PA.A_ID=1 or PA.A_ID=2) and PA.P_ID =
P.P_ID group by PA.P_ID) as attribute from PC left join PD on PC.P_ID = PD.P_ID
left join CD on PC.C_ID = CD.C_ID
left join P on P.P_ID = PC.P_ID
where PD.language_id = CD.language_id and (PD.language_id=1 or PD.language_id=2) 
```

如果这有点令人困惑，我深表歉意

2013 年 4 月 26 日更新
这里总结了表格中的内容以及我想要完成的内容： Product_to_category PC 表将产品链接到他们的类别，并将类别链接到他们的产品。一个产品可以属于多个类别，一个类别可以属于多个产品。P 表中的产品有其产品值，如价格，其描述在 product_description PD 表中。一个产品可以有两行产品描述（双语）。产品在 product_attribute PA 表中也具有属性值，例如品牌（“品牌 A”、“品牌 B”）和体积/重量（“300g”、“500ml”）。一个产品可以属于多个类别，一个类别可以有多个产品。每个类别有两个描述（双语）。

如果需要进一步解释，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:37:05.403

```
select P.P_ID, P.P_PRICE, PD.LANGUAGE_ID, PD.PD_Name, CD.C_ID, CD.CD_NAME, 
group_concat(DISTINCT PA.A_TEXT) as attribute
from PC left join PD on PC.P_ID = PD.P_ID
left join CD on PC.C_ID = CD.C_ID
left join P on P.P_ID = PC.P_ID
left join PA on PA.P_ID = P.P_ID AND (PA.A_ID=1 or PA.A_ID=2)
where PD.language_id = CD.language_id and (PD.language_id=1 or PD.language_id=2)
GROUP BY P.P_ID, PD.LANGUAGE_ID 
```

[小提琴](http://www.sqlfiddle.com/#!2/8aa9a/6)

# javascript - 字符串转义后的javascript意外标识符？

> ID：16221864
> 
> 赞同：0
> 
> 时间：2013-04-25T18:17:28.137
> 
> 标签：javascript

我试图将此转义字符串传递给一个函数，但不断收到意外的字符串错误，类似的字符串我也收到了意外的标识符错误。有谁知道这可能是为什么？

```
<a href="javascript: loadPlayer('1','Disclosure%20-%20What%27s%20In%20Your%20Head%20%28Unofficial%20Music%20Video%29%20%7C%20HD')">Video</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:19:06.800

我不确定，但我认为`%XX`在 JavaScript 获取要执行的字符串之前，转义符会被解析为它们的原始字符。

考虑这样的事情：

```
<a href="javascript:;" onClick="loadPlayer('1','Disclosure%20.......');"> 
```

# android - 当我停止录制时 MediaRecorder 失败

> ID：16221866
> 
> 赞同：31
> 
> 时间：2013-04-25T18:17:30.947
> 
> 标签：android, mediarecorder

我有这个错误。有人可以帮我吗，我认为这是关于触摸监听器的事情......当我松开手指时发生错误。

```
04-25 20:07:00.263: D/FB Sessions(18429): false
04-25 20:07:04.533: I/MediaRecorderJNI(18429): prepare: surface=0x189250 (identity=1813)
04-25 20:07:10.493: E/MediaRecorder(18429): stop failed: -1007
04-25 20:07:10.493: D/AndroidRuntime(18429): Shutting down VM
04-25 20:07:10.493: W/dalvikvm(18429): threadid=1: thread exiting with uncaught exception (group=0x40018608)
04-25 20:07:10.503: E/AndroidRuntime(18429): FATAL EXCEPTION: main
04-25 20:07:10.503: E/AndroidRuntime(18429): java.lang.RuntimeException: stop failed.
04-25 20:07:10.503: E/AndroidRuntime(18429):    at android.media.MediaRecorder.stop(Native Method)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at com.crewbase.rec.RecordActivity.stopRecording(RecordActivity.java:151)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at com.crewbase.rec.RecordActivity.access$2(RecordActivity.java:150)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at com.crewbase.rec.RecordActivity$1.onTouch(RecordActivity.java:79)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at android.view.View.dispatchTouchEvent(View.java:3897)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1737)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1153)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1721)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2200)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1884)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at android.os.Looper.loop(Looper.java:130)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at android.app.ActivityThread.main(ActivityThread.java:3835)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at java.lang.reflect.Method.invokeNative(Native Method)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at java.lang.reflect.Method.invoke(Method.java:507)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
04-25 20:07:10.503: E/AndroidRuntime(18429):    at dalvik.system.NativeStart.main(Native Method) 
```

当我尝试运行此代码时，就会发生这种情况：

从触摸监听器：

```
/// Preview is SurfaceView in my view
preview.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:

                prepareRecording();
                break;
            case MotionEvent.ACTION_MOVE:
            //Log.d(TAG, String.format("ACTION_MOVE | x:%s y:%s", 
                break;
            case MotionEvent.ACTION_UP:
                stopRecording();
                break;
            }
            return true;
        }
    }); 
```

而这两种方法：

```
private void prepareRecording() {
    try {
        camera.unlock();

        recorder = new MediaRecorder();
        recorder.setCamera(camera);
        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);

        File tempFile = new File(Environment.getExternalStorageDirectory(), "/rec/temp/video_" + String.valueOf(videoCount) + ".mp4");

        recorder.setOutputFile(tempFile.getPath());
        recorder.setVideoFrameRate(25);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
        recorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT);
        recorder.setPreviewDisplay(holder.getSurface());

        recorder.prepare();
        recorder.start();
    }  catch (IllegalStateException e) {
        Log.e("REDORDING :: ",e.getMessage());
        e.printStackTrace();
    } catch (IOException e) {
        Log.e("REDORDING :: ",e.getMessage());
        e.printStackTrace();
    }
}

private void stopRecording() {
    recorder.stop();
    camera.lock();
} 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-25T18:27:26.527

查看[文档](http://developer.android.com/reference/android/media/MediaRecorder.html#stop%28%29)：

> 请注意`RuntimeException`，如果在调用时没有接收到有效的音频/视频数据，则故意将 a 扔给应用程序 `stop()`。如果`stop()`在 之后立即调用，就会 发生这种情况`start()`。失败让应用程序采取相应的行动来清理输出文件（例如，删除输出文件），因为发生这种情况时输出文件的构造不正确。

换句话说：Dalvik 故意抛出异常。您必须处理它以在您的应用程序之后进行清理。你必须像这样处理它：

```
private void stopRecording() {
    try {
        recorder.stop();
    } catch(RuntimeException stopException) {
        // handle cleanup here
    }
    camera.lock();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-10-18T14:51:57.213

当我用 录制音频时，我遇到了类似的错误 -1007 `AMR_WB`，但事实证明问题是我忘记设置采样率。

```
mediaRecorder.setAudioSamplingRate(16000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-09T22:48:36.337

在我的情况下，我使用 Surface 作为 VideoSource，我只是忘记设置 Input Surface。然后我得到了这个-1007错误。

我通过提供输入表面来修复它，它工作正常。

# jquery - 仅当它们所在的 div 被切换为关闭时才重置单选按钮，但如果另一个 div 被切换为打开状态则不会？

> ID：16221867
> 
> 赞同：0
> 
> 时间：2013-04-25T18:17:37.040
> 
> 标签：jquery, radio-button, slidetoggle

我有一个包含多个 jQuery slideToggles 的页面。早些时候，我问了一个关于如何在此处关闭切换时重置其中一个切换中的选择的问题：[关闭 slideToggle 时如何重置选定的单选按钮？](https://stackoverflow.com/questions/16220747/how-to-reset-selected-radio-buttons-when-closing-slidetoggle)

现在的问题是，如果我在页面上切换打开下一个，它会在另一个打开的切换中重置自检。我想确保只有在包含自测的 div 被切换关闭时才重置测试，而不是在下一个被切换打开时重置。

有没有办法说“仅当它所在的 div 被切换关闭时才重置自检，但如果另一个 div 被切换打开则不会”？

jQuery: $("h2.titleTrigger").click(function(e){ e.preventDefault();

```
//TOGGLE OPEN/CLOSE THE DRAWER
$(this).toggleClass("active").next().slideToggle("fast");

//UNDO THE SELF TEST
$('.selfTestWrong').removeClass('answerShown');
$('input:radio').prop('checked', false);
$('.selfTestAnswer').slideUp(300);

return false;
});

//self test

$('input:radio').bind('change',function(e){
e.preventDefault();
var parentId = $(this).parents('.selfTest').attr('id');
$('#'+parentId+' .selfTestWrong').addClass('answerShown');
$('#'+parentId+' .selfTestAnswer').slideDown(300);
}); 
```

[jsFiddle](http://jsfiddle.net/bY7jp/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:21:14.067

进行以下更改：

```
//TOGGLE OPEN/CLOSE THE DRAWER
$(this).toggleClass("active").next().slideToggle("fast");
$(this).next().children(".selfTest").children(".selfTestWrong").removeClass("answerShown");
$(this).next().children(".selfTest").children("input:radio").prop("checked", false);
$(this).next().children(".selfTest").children(".selfTestAnswer").slideUp(300); 
```

这会在选定的 div 中找到最接近的输入。这是一个更新的小提琴：http: [//jsfiddle.net/bY7jp/3/](http://jsfiddle.net/bY7jp/3/)

# linux - MySql SeLinux 策略权限

> ID：16221868
> 
> 赞同：1
> 
> 时间：2013-04-25T18:17:39.983
> 
> 标签：linux, centos, selinux

目前，我设置了一个 apache 服务器（它正在运行一个 Intranet 站点），但我有点卡住了。当用户转到该页面时，它会运行 mysql 查询并用于`INTO OUTFILE`从该查询生成管道分隔文件。我遇到的问题是 SELinux 阻止 mysql 将文件写入我想要的目录。

我要写入的目录是

```
/var/www/html 
```

这样当它生成时，用户将收到一个指向该文件的链接，以便他们可以直接从浏览器下载它。

我尝试将目录的上下文设置为

```
mysqld_etc_t
mysqld_home_t
mysqld_var_t 
```

也试过了，

```
var_t 
```

但是我不确定我是否正确地执行了 var_t。

我已经尝试将 SELinux 设置为 Permissive 以进行测试，并且 mysql 能够成功写入该文件夹，所以我知道所有阻碍我的都是 SELinux。

我不想禁用 SeLinux，也不想将 mysqld 设置为允许运行。所以我的问题变成了我必须做什么才能允许mysql访问写入该文件夹？即使有人能指出我正确的方向，也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T12:11:20.617

解决方案并不像您期望的那么容易。允许 mysql 访问任何 httpd 的类型不是一个好主意，而且出于安全原因，允许 httpd 访问任何 mysqld 的类型也不是一个好主意。

将类型更改为也不够，因为没有来自 httpd 的访问权限，或者没有来自 mysqld 的访问权限。

最后一点是创建一个新的 SELinux 类型并授予 httpd 和 mysqld 的访问权限，并使用该类型标记一个共享目录。你可以在 httpd 和 mysqld 之间共享该目录中的数据。

关于在 SELinux 中控制访问和创建自己的规则的说明在[http://debian-handbook.info/browse/wheezy/sect.selinux.html](http://debian-handbook.info/browse/wheezy/sect.selinux.html)

# php - 我可以在我的 PHP cron 作业中使用 Laravel 吗？

> ID：16221872
> 
> 赞同：1
> 
> 时间：2013-04-25T18:17:46.837
> 
> 标签：php, cron, laravel

在过去的几天里，我刚刚开始学习 Laravel，我对它的功能很感兴趣。在我当前的网站上，我正在使用几个不同的基于 PHP 的 cron 作业，我想知道是否可以在其中使用 Laravel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:36:10.077

是的，你应该使用 Laravel 的[任务](http://laravel.com/docs/artisan/tasks)功能。

# python - 递归计算给定列表的子集

> ID：16221875
> 
> 赞同：0
> 
> 时间：2013-04-25T18:17:58.307
> 
> 标签：python, list, recursion

我想构建一个递归函数，查找长度为 n>=k>=0 的给定列表的所有大小为“k”的子集，并返回这些子集的列表。

例如：如果输入列表是 [1,2,3,4] 并且 k = 2 那么函数将返回 [[4,3],[2,4],[2,3],[1,4], [1,3],[1,2]]

请注意，列表的不同排列被认为是同一个列表。

我认为这种递归应该有效：

```
return [lst[0]] + choose_sets(lst[1:],k-1)   ¬¬and¬¬   choose_sets(lst[1:],k) 
```

`choose_sets(lst,k)`函数在哪里。

意义：

输入：[1,2,3,4]，k=3

调用：

[1] + [2,3,4],k=2 和 [2,3,4],k=3

等等...

谁能指导我如何“同时”调用这两个递归调用？我的“退出期限”应该是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:29:27.627

假设您有一个 size 列表，`n`并且需要 size 的所有子集`k`。
这与以下内容基本相同：

对于列表的每个元素，创建一个没有该元素
的新列表，在新列表中，找到所有大小的子集`k-1`（这是递归调用），
并将删除元素添加到所有列表中。

现在......这个解决方案将有重复，例如，在你给出的例子中，你会得到 [4, 1] 和 [1, 4]。但是可以稍微改变一下，这样就不会产生重复的结果。

**编辑**
以处理重复

```
def choose_sets(l, k):
  if k == 0:
    return [[]]
  if len(l) == 0:
    return []
  l2 = l[1:]
  subsets = choose_sets(l2, k-1)
  for s in subsets:
    s.append(l[0])
  return subsets+ choose_sets(l2, k) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:10:25.647

```
b = []

def abc(a,k):
    if len(a)==k:
        b.append(a)
        return b

    b.extend([a[:k-1]+[i] for i in a[k-1:]])    
    return abc(a[1:],k)

print abc([1,2,3,4,5],2) 
```

# python - 如何记录mac上的鼠标点击以由苹果脚本重播？

> ID：16221877
> 
> 赞同：1
> 
> 时间：2013-04-25T18:18:07.123
> 
> 标签：python, macos, applescript, ui-automation

我正在编写一个脚本来自动为网站重复注册新用户（不是提高指标，不是你想的那样！）。我可以将注册过程归结为一系列鼠标点击和打字。我知道有一些宏记录器可以让我记录我如何使用 GUI 并重复它，但是我每次都需要输入一些不同的东西——但是鼠标点击总是一样的。

想象脚本看起来有点像：

```
username = "something"  
for i in range(0,100):  
     playback recorded series of mouse clicks A  
     type username + str(i)  
     type some other stuff  
     playback recorded series of mouse clicks B 
```

但是我找不到一个好的工具来记录一系列鼠标点击，以便我可以从 applescript 或 python 脚本回放它们。

我找到了一个有用的脚本（[http://www.bluem.net/en/mac/cliclick/](http://www.bluem.net/en/mac/cliclick/)），我可以调用它，它需要 2 个坐标和点击。因此，即使我能找到一个工具来记录鼠标点击的坐标也行！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T23:31:11.057

如果你想获得你想要执行鼠标点击的屏幕坐标，你可以使用我在[这里](http://www.hamsoftengineering.com/codeSharing/MouseTools/MouseTools.html)找到的一个名为 MouseTools 的免费工具。我就是为了这个目的而做的。您需要执行我在靠近页面底部的示例#1 applescript 中展示的操作。只需将鼠标移动到屏幕上的某个位置并运行 applescript 即可获取坐标。注意：您需要将鼠标移动到某个位置并按 command-r（此时 applescript 位于最前面）以在 AppleScript Editor 中运行脚本。

此外，我发现单击屏幕坐标，正如 Lauri Ranta 在她的 AppleScript 中使用系统事件所展示的那样，通常不能可靠地工作。系统事件擅长在 Finder 中单击，但在单击 Safari 等应用程序的窗口时经常遇到问题。如果你也发现了这个问题，那么你也可以使用 MouseTools 来执行鼠标点击。同样，这就是我创建该程序的原因，并且在网页上提供了如何执行此操作的示例。

我希望它有所帮助。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T03:31:45.090

Carsten Blum 的 Clicclick 怎么样？

[他的链接](http://www.bluem.net/en/mac/cliclick)

它是一个 shell 应用程序，可以在任意屏幕坐标处模拟鼠标点击。这将适用于applescript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T20:23:23.213

您还可以在浏览器中运行 JavaScript，例如`tell application "Safari" to tell document 1 to do JavaScript`或`tell application "Google Chrome" to tell tab 1 of window 1 to execute javascript`.

```
tell application "Safari" to tell document 1
    do JavaScript "document.querySelectorAll('.mainnavs ul li:nth-child(2) a')[0].click()"
    delay 1
    repeat until do JavaScript "document.readyState" is "complete"
        delay 0.1
    end repeat
    do JavaScript "document.getElementById('tagfilter').value = 'aa'"
end tell 
```

系统事件具有模拟点击和击键的命令：

```
delay 1
tell application "System Events" to tell process "Safari"
    click at {76, 117}
    repeat with i from 1 to 3
        keystroke "aa" & i & return
    end repeat
    keystroke "a" using command down
end tell 
```

您可以从 Accessibility Inspector.app 中查看 UI 元素的位置。它是 Xcode 的一部分，但也可以从[developer.apple.com/downloads](https://developer.apple.com/downloads)下载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T18:29:47.363

希望你正在做测试自动化！

您是否考虑过使用[Selenium WebDriver](http://docs.seleniumhq.org/projects/webdriver/)之类的东西？

# python - 将文本文件拆分为 n 个字符的集合

> ID：16221880
> 
> 赞同：0
> 
> 时间：2013-04-25T18:18:14.310
> 
> 标签：python, list, format, slice

所以我有一个带有一堆数字的长文本文件，我想重新格式化这个文件，以便每 12 个字符在自己的行上，文件长 4392 个字符。我的策略是将 infile 的内容添加到列表和切片中，并将前 12 个字符附加到新列表中，然后使用列表切片参数的 while 循环将其写入输出文件。我收到一个错误`out.writelines(l)`：

```
TypeError: writelines() argument must be a sequence of strings. 
```

这是我的代码：

```
l = []
outl=[]
with open('r6.txt', 'r') as f, \
     open('out.txt', 'w') as out:
     outl.append(f)
     a = 0
     b = 11 
     while b <= 4392:
         l.append(outl[a:b])
         l.append('/n')
         out.writelines(l)
         a+=12
         b+=12
         l=[] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:21:32.247

好吧，您将文件对象附加到列表中，然后您正在获取列表的切片并写入它们。也许您忘记了字符串中的文件对象引用。

只需使用 a`print outl`即可获得答案。如果您在列表中的项目中有一个文件对象，那么您知道:)

或者更好：

```
l = []
outl=[]
with open('r6.txt', 'r') as f, \
     open('out.txt', 'w') as out:
     outl.extend(f.readlines())
     a = 0
     b = 11 
     while b <= 4392:
         l.append(outl[a:b])
         l.append('\n')
         out.writelines(l)
         a+=12
         b+=12
         l=[] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:17:11.487

嗯，虽然其他答案似乎是正确的，但我仍然认为最终的解决方案可以，嗯，更快：

```
with open('r6.txt', 'r') as f, \
    open('out.txt', 'w') as out:
    # call anonymous lambda function returning f.read(12) until output is '', put output to part
    for part in iter(lambda: f.read(12), ''):
        # write this part and newline character
        out.write(part)
        out.write('\n') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:03:08.573

Vlad-ardelean 说你需要 append `f.readlines()`to`outl`而不是 file 是正确的`f`。

此外，您`writelines()`每次都使用写一行，但`writelines()`旨在将字符串列表写入文件，而不是一个项目列表。处理换行符插入的更好方法可能是：

```
l = []
outl=[]
with open('r6.txt', 'r') as f, \
    open('out.txt', 'w') as out:
    # gets entire file as one string and removes line breaks
    outl = ''.join(f.readlines()).replace('\n','')
    l = [outl[each:each+12]+'\n' for each in xrange(0,len(outl),12)]
    out.writelines(l) 
```

r6 的样本输入：

```
abcdefeounv lernbtlttb
berolinervio
bnrtopimrtynprymnpobm,t
2497839085gh
b640h846j048nm5gh0m8-9
2g395gm4-59m46bn
2vb-9mb5-9046m-b946m-b946mb-96m-05n=570n;rlgbm'dfb 
```

输出：

```
abcdefeounv 
lernbtlttbbe
rolinerviobn
rtopimrtynpr
ymnpobm,t249
7839085ghb64
0h846j048nm5
gh0m8-92g395
gm4-59m46bn2
vb-9mb5-9046
m-b946m-b946
mb-96m-05n=5
70n;rlgbm'df
b 
```

# php - Magento 双 TLD 商店

> ID：16221881
> 
> 赞同：1
> 
> 时间：2013-04-25T18:18:23.610
> 
> 标签：php, magento, tld

**我一直在关注[http://www.magentocommerce.com/boards/viewthread/71318/](http://www.magentocommerce.com/boards/viewthread/71318/)来帮助我在我的服务器上设置双 TLD，指向一个商店，**这样您就可以有效地拥有两个基本路径... domain.com和 domain.co.uk 作为 2 个单独的商店，但访问一组数据等（不只是将一个转发到另一个）

**这是我的文件夹结构** ![在此处输入图像描述](https://i.stack.imgur.com/KFWM0.png) ，.co.uk 索引位于服务器根目录下的 .com 下（请忽略标有 .com 的文件夹）...

**根据说明，我需要做两件事**

**1）**更改我的第二个 TLD 位置上的 index.php 以反映我的单个 magento 商店 Mage.php 工作已完成

**2）**更改最后一行以反映我的商店代码

```
"Next you change the website reference on the last-ish line. You enter the reference you gave that store in the Magento admin" 
```

对于那些可以提供帮助的人，这是位于 .com TLD 上的完整代码

```
<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/osl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category   Mage
 * @package    Mage
 * @copyright  Copyright (c) 2008 Irubin Consulting Inc. DBA Varien (http://www.varien.com)
 * @license    http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */

if (version_compare(phpversion(), '5.2.0', '<')===true) {
    echo  '<div style="font:12px/1.35em arial, helvetica, sans-serif;">
<div style="margin:0 0 25px 0; border-bottom:1px solid #ccc;">
<h3 style="margin:0; font-size:1.7em; font-weight:normal; text-transform:none; text-align:left;     color:#2f2f2f;">
Whoops, it looks like you have an invalid PHP version.</h3></div><p>Magento supports PHP 5.2.0 or     newer.
<a href="http://www.magentocommerce.com/install" target="">Find out</a> how to install</a>
 Magento using PHP-CGI as a work-around.</p></div>';
    exit;
}

/**
 * Error reporting
 */
error_reporting(E_ALL | E_STRICT);

/**
 * Compilation includes configuration file
 */
define('MAGENTO_ROOT', getcwd());

$compilerConfig = MAGENTO_ROOT . '/includes/config.php';
if (file_exists($compilerConfig)) {
    include $compilerConfig;
}

$mageFilename = MAGENTO_ROOT . '/app/Mage.php';
$maintenanceFile = 'maintenance.flag';

if (!file_exists($mageFilename)) {
    if (is_dir('downloader')) {
        header("Location: downloader");
    } else {
        echo $mageFilename." was not found";
    }
    exit;
}

if (file_exists($maintenanceFile)) {
    include_once dirname(__FILE__) . '/errors/503.php';
    exit;
}

require_once $mageFilename;

#Varien_Profiler::enable();

if (isset($_SERVER['MAGE_IS_DEVELOPER_MODE'])) {
    Mage::setIsDeveloperMode(true);
}

#ini_set('display_errors', 1);

umask(0);

/* Store or website code */
$mageRunCode = isset($_SERVER['MAGE_RUN_CODE']) ? $_SERVER['MAGE_RUN_CODE'] : '';

/* Run store or run website */
$mageRunType = isset($_SERVER['MAGE_RUN_TYPE']) ? $_SERVER['MAGE_RUN_TYPE'] : 'store';

Mage::run($mageRunCode, $mageRunType); 
```

**很明显**它是这里的最后几行，但我不知道我需要将它设置为什么......

查看我的magento商店列表，我有

您可以从我的屏幕截图中看到，我添加了一家新商店，但它是我应该添加的新网站吗？

并将说 base 的部分更改为替代项？也许是完整的 URL？

我不想乱七八糟，以防我无法恢复它，你看

**我添加站点、商店、商店视图的选项** ![我添加站点、商店、商店视图的选项](https://i.stack.imgur.com/f05Vz.png)

**我目前有 2 家商店的设置** ![我目前有 2 家商店的设置](https://i.stack.imgur.com/Xv9Er.png)

**.com - 商店设置** ![.com - 商店设置](https://i.stack.imgur.com/MFtCs.png)

**.co.uk - 商店设置** ![.co.uk - 商店设置](https://i.stack.imgur.com/AFOuh.png)

**主网站（网站设置）** ![主网站（网站设置）](https://i.stack.imgur.com/EdobF.png)

需要尽快得到这个直播，所以任何帮助都会很棒......希望其他尝试做同样事情的人将从这里的人们的投入和协作中学习

亨利

# php - 无法在 codeigniter 下重定向到同一控制器上的不同方法

> ID：16221886
> 
> 赞同：0
> 
> 时间：2013-04-25T18:18:30.877
> 
> 标签：php, codeigniter, redirect, codeigniter-2

假设我有一个控制器，它有两个方法，我想从 method1 重定向到 method2，但由于以下错误，这是不可能的：

铬合金：`Error 310 (net::ERR_TOO_MANY_REDIRECTS): There were too many redirects.`

火狐：`The page isn't redirecting properly`

我怎样才能解决这个问题？

```
class Site extends CI_Controller {
       function method1() {
           { ... Some Code ... }
            redirect('site/method2');
        }

        function method2() {
            { ... Rest of the code  ... }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T05:35:05.947

问题是您必须检查您当前`url`的网址是否与您计划重定向的网址相同，然后不要重定向这里是一个示例，

```
class Site extends CI_Controller {
       function method1()
       {
           if(// all is GOOD)
           {
              $this->redirect('site','method2','args');
           }else{
              // Do something if the code fails
           }
        }

        function method2()
        {
           if(// all is GOOD)
           {
              $this->redirect('site','method1','args');
           }else{
              // Do something if the code fails
           }
        }

        function check_redirect($controller,$method,$args)
        {
           if($this->router->class !== $controller AND $this->router->method !== $method)
           {
              redirect($controller.'/'.$method.'/'.$args);
           }
        }
} 
```

`The page isn't redirecting properly`当`method1`重定向到时发生，`method2`然后当到达`method2`它时再次重定向回来以`method1`完成一个无结束的重定向循环。

这只是基本没有放任何错误处理。.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:27:08.673

你可以这样做......

```
class example extends CI_Controller{

    public function __construct()
    {
        parent::__construct();
            }

            public function method1(argument1)
            {
                   //your code
            }

            public function method2(argument2)
           {
               //your code

               $this->method1(arg);

                        or

              echo '<script language="javascript">top.location.href="'.ROOT_FOLDER.'/example/method1/'.$argument.'";</script>';
           } 
```

# java - 根据问题输入增加数组的大小

> ID：16221887
> 
> 赞同：-1
> 
> 时间：2013-04-25T18:18:37.573
> 
> 标签：java, arrays, java.util.scanner, multidimensional-array

我写了一个有二维数组的类。该类将根据用户输入和大小打印出数组的数字。例如，用户输入将类似于 2 3 145464。这意味着数组大小为 2 行 3 列，它应该将数组中的数字打印为

145

464

我无法弄清楚如何在不最初声明大小的情况下更改数组的大小。

这是我写的

```
 import java.util.Scanner;
 public class Assignment7 
 {
public static void main(String[] args) 

    {

    Scanner scan = new Scanner(System.in);

    int [][] nums = new int[scan.nextInt()][scan.nextInt()];

    System.out.print("Enter numbers of an array  ");

    for (int i = 0; i < nums.length; ++i)
        {

        for (int j = 0; j < nums.length; ++j)

            {

            nums[i][j] = scan.nextInt();

            }

        }

    for (int i = 0; i < nums.length; ++i)

        {

            System.out.print("\n");

        for (int j = 0; j < nums.length; ++j)

        {

            System.out.print(nums[i][j]);

         }

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:20:46.137

看看如何使用 ArrayList，请参阅[http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)或 Vector，如果您需要同步列表，请参阅[http://docs。 oracle.com/javase/6/docs/api/java/util/Vector.html](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html)

> 我无法弄清楚如何在不最初声明大小的情况下更改数组的大小。

这个通用类上有一些方法可以让你随意添加/删除元素。此外，您不必事先声明数组列表的大小。

**例子**

```
ArrayList<String> listOfString = new ArrayList<String>();
listOfString.add("foo");
listOfString.add("bar");

ArrayList<Integer> listOfInts = new ArrayList<Integer>();
listOfInts.add(1);
listOfInts.add(2); 
```

有一些方法可以让您返回大小以及能够迭代以执行所需的操作。如果您想了解更多信息，请参阅 javadocs！

好像您正在使用`multidimensional array`; 在这种情况下，您可以简单地将 a`ArrayList`作为原始`ArrayList`. 请记住，您不能像使用原语一样`generic types`，因此对于`int`，您需要使用`Integer`

**更多信息**

需要注意的是 List 接口可用 Vector/ArrayList/LinkedList/etc 实现；请参阅[http://docs.oracle.com/javase/6/docs/api/java/util/List.html](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:20:37.947

您最好使用[列表](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)来存档它，因为它们不必在初始化时保持固定大小。列表更易于使用，并且具有更多功能。您可以动态删除项目而无需重新排序以避免出现空格等。

# javascript - 获取元素之间的距离

> ID：16221890
> 
> 赞同：1
> 
> 时间：2013-04-25T18:18:49.703
> 
> 标签：javascript, jquery, css, html

我需要动态计算画布上的距离（如图所示）。我需要拖动突出显示的关节，以便可以增加/减少计算跨度。是否存在任何插件？如果没有，你能给我一些建议以有效地做到这一点。谢谢

![在此处输入图像描述](https://i.stack.imgur.com/2auWf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:21:49.263

我使用谷歌闭包，它有一个距离函数： [http ://closure-library.googlecode.com/svn/docs/class_goog_math_Coordinate.html](http://closure-library.googlecode.com/svn/docs/class_goog_math_Coordinate.html)

不确定这是否适合你，如果你有一个复杂的绘图应用程序，我个人推荐它。

如果您不能只查看顶部提供的“源代码”链接的代码，它可以帮助您在代码中执行类似的操作。

# c++ - 使用 clang 的 QT 标头中的错误

> ID：16221891
> 
> 赞同：8
> 
> 时间：2013-04-25T18:18:50.263
> 
> 标签：c++, qt4, clang

# 问题：

* * *

因此，我的问题是：如何在不完全关闭警告的情况下构建我的 QT 项目（或者必须对一百万个无目的的警告进行分类才能找到我自己的）？我可以禁止仅针对 QT 标头的警告吗？

# 细节：

* * *

### 问题

* * *

几个月前，我在 QT-Creator 中开始了一个 QT 项目。当时我使用的是 gcc 4.6。在确定了一些其他优先事项之后，我发现自己直到现在都没有时间从事该项目。在此期间，我转而使用 clang。当我将 QT 项目配置为使用 clang（该项目在 g++ 中编译时没有警告）时，它在 QT 标头本身中生成了大约 263 个警告。主要是符号转换和无法访问的代码。

* * *

### 尝试

* * *

为了解决这个问题，我根据[Clang User Manual 中的这个条目](http://clang.llvm.org/docs/UsersManual.html#controlling-diagnostics-in-system-headers)添加了 -isystem /path/to/QT/include/dir ，但它似乎没有任何影响。虽然我不确定，但我认为这是因为我的代码`#include`是按名称而不是按目录的 QT 标头。虽然解决方案可能是手动列出使用的每个 QT 标头（未尝试过），但这意味着我每次升级 QT 或使用新标头时都必须更新它。当然有更好的解决方案。

这里要求的是正在执行的实际编译命令：

```
clang++ -c -pipe -Qunused-arguments -Weverything -cxx-isystem /path/to/qt/4.8.3/include/ -g -D_REENTRANT -DQT_NO_KEYWORDS -DQT_SHARED -I/path/to/qt/x86_64/4.8.3/mkspecs/unsupported/linux-clang -I. -I.moc -I.ui -I/path/to/qt/4.8.3/include/ -o .obj/main.o main.cpp 
```

* * *

### 眼镜

* * *

我在用：

*   Linux 3.2.0-40-generic #64-Ubuntu SMP x86_64 GNU/Linux
    *   虽然我团队中的其他人使用 Windows
*   QT创作者2.6.2
*   QT 4.8.3
*   clang 3.2 版（主干 165250）（llvm/主干 165249）
    *   目标：x86_64-unknown-linux-gnu

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T21:00:29.120

我将回答我自己的问题，因为事实证明，在这种情况下，这是一个特定的环境怪癖。

我的开发机器上有两份 QT 库，一份是系统范围的，一份是特定于项目的（包含在 VCS 中）。项目库没有包含 qmake，所以我使用了我的系统 qmake，它附加了一个与我在 -isystem 规范中包含的路径不同的路径。为了解决这个问题，我添加了

```
QMAKE_INCDIR_QT = 
```

到 qmake.conf（在 qt/mkspecs/unsupported/linux-clang/ 中）

由于项目中的其他人已经将 qmake 用于在其他任何地方使用项目库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-02T14:10:13.173

对于那些偶然发现这个问题的人比作者更普遍的问题。尝试插入：

```
LIBS_USED_FOR_QT = QtCore QtSql QtMultimediaWidgets QtSensors QtSvg QtXml QtPrintSupport QtWidgets QtQuick QtQml QtPositioning QtGui QtWebKitWidgets
for(somelib, $$list($$LIBS_USED_FOR_QT)) {
    QMAKE_CXXFLAGS += -isystem $$(QTDIR)/lib/$${somelib}.framework/Versions/5/Headers/
    QMAKE_CXXFLAGS += -isystem $$(QTDIR)/lib/$${somelib}.framework/Headers/
} 
```

在您的 .pro 文件中。另外避免包括像`#include <QtCore/QtCore>` 写作`#include <QtCore>`一样

这对我来说非常有效地驯服了 qt。

另请参阅[此来源](http://qt-project.org/forums/viewthread/35977)

# magento - 上传图片并设置不透明度后水印不起作用

> ID：16221893
> 
> 赞同：0
> 
> 时间：2013-04-25T18:18:57.940
> 
> 标签：magento, magento-1.7

我有一个问题，水印不起作用。我添加了设计->水印选项，上传图片，设置不透明度和大小，但水印没有显示在图片上。

我能做些什么 ？

Magento 版本 1.7.0.2

# regex - R中的动态正则表达式

> ID：16221899
> 
> 赞同：10
> 
> 时间：2013-04-25T18:19:18.990
> 
> 标签：regex, r

只要字符串没有正则表达式的特殊字符，`before`下面的代码就可以工作：`after`

```
before <- 'Name of your Manager (note "self" if you are the Manager)' #parentheses cause problem in regex
after  <- 'CURRENT FOCUS'

pattern <- paste0(c('(?<=', before, ').*?(?=', after, ')'), collapse='')
ex <- regmatches(x, gregexpr(pattern, x, perl=TRUE)) 
```

R 是否具有转义要在正则表达式中使用的字符串的功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T18:50:38.810

在 Perl 中，有[http://perldoc.perl.org/functions/quotemeta.html](http://perldoc.perl.org/functions/quotemeta.html)可以做到这一点。如果文档说的是正确的

> > 返回带有反斜杠的所有 ASCII 非“单词”字符的 EXPR 的值。（也就是说，所有不匹配 /[A-Za-z_0-9]/ 的 ASCII 字符将在返回的字符串中以反斜杠开头，无论任何区域设置如何。）

那么您可以通过以下方式实现相同的目的：

```
quotemeta <- function(x) gsub("([^A-Za-z_0-9])", "\\\\\\1", x) 
```

你的模式应该是：

```
pattern <- paste0(c('(?<=', quotemeta(before), ').*?(?=', quotemeta(after), ')'),
                  collapse='') 
```

快速健全性检查：

```
a <- "he'l(lo)"
grepl(a, a)
# [1] FALSE
grepl(quotemeta(a), a)
# [1] TRUE 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T22:35:05.360

用于`\Q...\E`包围逐字子模式：

```
# test data
before <- "A."
after <- ".Z"
x <- c("A.xyz.Z", "ABxyzYZ")

pattern <- sprintf('(?<=\\Q%s\\E).*?(?=\\Q%s\\E)', before, after) 
```

这使：

```
> gregexpr(pattern, x, perl = TRUE) > 0
[1]  TRUE FALSE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T22:27:59.200

dnagirl，这样的功能存在并且是`glob2rx`

```
a <- "he'l(lo)"
tt <- glob2rx(a)
# [1] "^he'l\\(lo)$"

before <- 'Name of your Manager (note "self" if you are the Manager)'
tt <- glob2rx(before)
# [1] "^Name of your Manager \\(note \"self\" if you are the Manager)$" 
```

您可以通过执行以下操作从字符串中删除“^”和“$”：

```
substr(tt, 2, nchar(tt)-1)
# [1] "he'l\\(lo)" 
```

# c++ - C ++中ubuntu中的密码屏蔽

> ID：16221900
> 
> 赞同：3
> 
> 时间：2013-04-25T18:19:20.263
> 
> 标签：c++, linux, ubuntu, passwords, masking

我最近做了一个程序，`getch()`用来屏蔽输入的密码。但只要输入正确的代码，它就可以访问，而无需等待按下回车键。应该做哪些改变？另外，`getch()`在 Ubuntu 中是否允许？如果不是，应该使用什么替代方案？

我的代码看起来像这样。我已经在不同的功能中提供了默认密码。

```
char pass[4];
cout << "\nEnter Administrator Password: ";
for (i = 0; i < 4; i++)
{
  pass[i] = getch();
  cout << "*";
}
for (i = 0; i < 4; i++)
{
  if(admin_pass[i] == pass[i])
    return 1;
  else
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:38:11.887

您可以使用`getpass()`如下，

```
#include<stdio.h>
#include<unistd.h>
#include<string.h>

char *pass=getpass("\nEnter Administrator Password: "); 

if(strcmp(admin_pass,pass)==0) 
  return 1;
else 
  return 0; 
```

该函数`getpass()`在头文件中定义`unistd.h`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T18:24:41.733

该[`getpass`](http://www.gnu.org/software/libc/manual/html_node/getpass.html)功能可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T18:35:36.917

我的建议是谨慎使用 getch() 。`<conio.h>`是一个非常古老的库，并且经常从操作系统更改为操作系统。在许多情况下，`read`是`getch`.

看

[http://www.cplusplus.com/forum/articles/7312/#msg33734](http://www.cplusplus.com/forum/articles/7312/#msg33734)

# html - 将 SVG 用于网页上的徽标 - 如何以不同颜色显示此徽标的多个实例？

> ID：16221902
> 
> 赞同：0
> 
> 时间：2013-04-25T18:19:22.867
> 
> 标签：html, svg

我有一个网页，我会在其中多次重复我公司的标志——一次是大尺寸的白色标志；一次是小尺寸，白色标志；一次是小尺寸的橙色标志。

现在我正在使用 JPG 文件 - 3 个 JPG 都很好。

但我想知道我是否可以在这个用例中使用 SVG，最好不要在页面中复制 SVG 代码。

你有什么线索吗？

谢谢，尼古拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:05:39.853

如果您不需要将图像用作 CSS 背景，则可以使用[SVG 堆栈](http://simurai.com/post/20251013889/svg-stacks)技术来执行此操作。

[这是一个示例](http://xn--dahlstrm-t4a.net/svg/presentations/svgopen2012/presentation/svgstacks.html#/0/3)，一个包含多个不同图标的单个 svg 文件，其中图像的大小也决定了 svg 的外观。

这是该 svg 文件的一部分来说明：

```
<?xml version="1.0" encoding="utf-8"?>
<svg id="icon" class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <style>
      svg .icon { display: none }
      svg .icon:target { display: inline }

      /* media-queries can control the appearance too */
      #hours {
        fill:none;
        stroke:#850508;
        stroke-dasharray:1,5.28;
        stroke-dashoffset:0.5;
        stroke-width: 1.5px;
      }
      @media screen and (max-width: 128px) {
        #hours {
          stroke-dasharray:1, 17.84;
          stroke-width: 2px;
        }
      }
      @media screen and (max-width: 64px) {
        #hours {
          stroke-dasharray: none;
        }
      }

      /* shared styles */
      .icon * { fill: #850508; }
    </style>
  </defs>
  <svg viewBox="0 0 32 32">
    <g id="clock" class="icon">
      <path d="M16,4c6.617,0,12,5.383,12,12s-5.383,12-12,12S4,22.617,4,16S9.383,4,16,4 M16,0 C7.164,0,0,7.164,0,16s7.164,16,16,16s16-7.164,16-16S24.836,0,16,0L16,0z"/>
            <path d="M21.422,18.578L18,15.152V8h-4.023v7.992c0,0.602,0.277,1.121,0.695,1.492l3.922,3.922
                L21.422,18.578z"/>
      <path id="hours" d="M16,4c6.617,0,12,5.383,12,12s-5.383,12-12,12S4,22.617,4,16S9.383,4,16,4"/>
    </g>
  </svg>
  <svg viewBox="0 0 32 32">
    <g id="star" class="icon">
      <polygon points="22.137,19.625 32,12 20,12 16,0 12,12 0,12 9.875,19.594 6,32 16.016,24.32 26.008,32"/>
    </g>
  </svg>
</svg> 
```

每个图标都可以具有不同颜色、渐变等的独特外观（在我的示例中，所有图标共享相同的填充，但它们不必这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T22:23:48.700

也许这可以为您提供灵感：我在 HTML 中嵌入了一个伪造的徽标*，*并使用 CSS 对其进行不同的缩放和着色。这是 HTML：

```
<h1>my page</h1>
<div class="big logo" title="big logo">
  <svg id="logo" viewBox="0 0 50 50">
    <rect x="1" y="1" stroke-width="2" width="48" height="48"/>
    <circle cx="25" cy="25" r="23" fill="currentColor"/>
  </svg>
</div>
<div>some text on my page and a small logo</div>
<div class="logo">
  <svg id="smallLogo">
    <use xlink:href="#logo"/>
  </svg>
</div>
<div>some more text on my page and a differently colored logo</div>
<div class="yellow logo">
  <svg id="smallLogo">
    <use xlink:href="#logo"/>
  </svg>
</div> 
```

和CSS：

```
.logo > svg {
  fill:green;
  stroke:blue;
  color:red;
  height:75px;
  width:75px;
}

.big.logo > svg {
  height:200px;
  width:200px;
}

.yellow.logo > svg {
  fill:yellow;
  color:orange;
  stroke:black;
} 
```

[请参阅 jsFiddle 上的示例](http://jsfiddle.net/3kUEr/)。不幸的是，这似乎只适用于 Firefox 和 Chrome。Opera 和 Internet Explorer 似乎都不喜欢这样（新版本 9 和 10 也不喜欢）。没试过 Safari。

所以，我想，除非您想将查看者限制在 Webkit 和 Firefox 浏览器或使用 JavaScript 复制 SVG 并修改不同实例的某些属性，否则最好使用三个不同的 JPEG 文件（PNG 会更好） , 或两个不同的 SVG 文件（两种不同的颜色——显然你可以毫无问题地重新缩放）。

# sql - 让循环的 PL/SQL 游标与输入变量一起使用？

> ID：16221906
> 
> 赞同：0
> 
> 时间：2013-04-25T18:19:33.390
> 
> 标签：sql, oracle, loops, plsql

我必须生成 PL/SQL 块，该块输入一个整数，其中 n (1 ≤ n ≤ 100) 并显示最流行的男性和女性名称。如果输入的数字超出该范围，则显示无效输入。我创建了一个名为流行名称的表，其中包含 100 个最流行的男性和女性名称。我正在为我的 FOR 循环而苦苦挣扎，并让它与用户输入一起工作。我的代码如下：

```
ACCEPT p_1 prompt 'please enter an integer between 1 and 100'

DECLARE
    CURSOR name_cur IS
            SELECT    rank, male_given_name, female_given_name
            FROM          popular_names
          ORDER BY  rank;

        v_nrank         popular_names.rank%TYPE := &p_1;
        v_nmale           popular_names.male_given_name%TYPE;
        v_nfemale     popular_names.female_given_name%TYPE;

BEGIN   
      OPEN name_cur;
      FETCH name_cur INTO v_nrank, v_nmale, v_nfemale;

      IF name_cur%FOUND THEN
        DBMS_OUTPUT.PUT_LINE('Rank     Male Given Name     Female Given Name');
        DBMS_OUTPUT.PUT_LINE('----------------------------------------------');

        FOR i IN 1..v_nrank LOOP
            DBMS_OUTPUT.PUT_LINE((RPAD(v_nrank, 18) || '  ' || 
                (RPAD(v_nmale, 18) || '  ' || v_nfemale)));
                FETCH name_cur INTO v_nrank, v_nmale, v_nfemale; 
              EXIT WHEN name_cur%NOTFOUND;
        END LOOP;

      ELSE
          DBMS_OUTPUT.PUT_LINE('Invalid number!');
      END IF;

        CLOSE name_cur;
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:27:45.410

不需要光标。或者在光标中使用类似的查询。您可以使用 Rownum 伪列代替 Row_Number() 函数：

```
SELECT * FROM
(
 SELECT deptno
      , empno
      , ename
      , Row_Number() OVER (ORDER BY empno) AS row_seq -- can order/partition by any field 
      -- , Rownum AS row_seq
  FROM scott.emp
) 
WHERE row_seq BETWEEN 1 AND 10 -- any integer as in your example --
/

DECLARE
  CURSOR e_cur 
  IS
  SELECT * FROM
  (
   SELECT deptno
     , empno
     , ename
     , Row_Number() OVER (ORDER BY empno) AS row_seq --'AS' is for clarity-not required
     --, Rownum AS row_seq 
    FROM scott.emp
   ) 
  WHERE row_seq BETWEEN 1 AND 10 -- any integer, can use variable like &num --
  ORDER BY row_seq;

  v_deptno  scott.dept.deptno%TYPE;
  v_emp_no  scott.emp.empno%TYPE;
  v_name    scott.emp.ename%TYPE;
  v_rank    NUMBER;
BEGIN
  OPEN e_cur;
  LOOP
    FETCH e_cur INTO v_deptno, v_emp_no, v_name, v_rank;
    EXIT WHEN e_cur%NOTFOUND;
      dbms_output.put_line(v_rank||chr(9)||v_deptno||chr(9)||v_emp_no||chr(9)||v_name);
  END LOOP;
 CLOSE e_cur;
END;
/ 
```

# uitextfield - shouldChangeCharactersInRange 影响所有 UITextField

> ID：16221907
> 
> 赞同：0
> 
> 时间：2013-04-25T18:19:39.193
> 
> 标签：uitextfield

我的应用中有两个`UITextField`，一个是价格，另一个是产品标签。

我已经在 .m中定义了 UITextField`@property`和`@synthesize`

```
(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string { 
```

我正在使用这种方法来限制价格字段的条目，但它似乎影响了这两个字段。如何将其限制在一个领域？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:43:48.163

当任何 UITextField 将此实例设置为 Interface Builder 中的委托或使用代码时，将调用该方法。您可以使用以下内容检查哪个字段调用它：

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if(textField == yourSynthesizedPropertyForPriceField) {
        //DO SOMETHING
    }
    return YES;
} 
```

# mrjob - mrjob：抑制减速器输出中的键（或值）

> ID：16221915
> 
> 赞同：2
> 
> 时间：2013-04-25T18:19:54.040
> 
> 标签：mrjob

默认情况下，mrJob 以 key[tab] 输出格式存储输出中的键和值。

即使键（或值）为空、null 或不感兴趣也会发生这种情况。假设我的键值对是 None, {"a":1", "b":1}。然后我得到这个：

```
None    {"a":1, "b":2} 
```

有没有办法抑制键或值？我只想要这个：

```
{"a":1, "b":2} 
```

顺便说一句，我已经尝试过了。我错过了什么……？

```
class MyMrJobClass(MRJob):
    OUTPUT_PROTOCOL = mrjob.protocol.JSONProtocol

    def step1_mapper(self, _, line):
        ...
        yield my_key, my_value

    def step1_reducer(self, key, values):
        for v in values:
            ...
        yield None, my_data

    def steps(self):
        return [
            self.mr(
                mapper=self.step1_mapper,
                reducer=self.step1_reducer,
            ),
        ] 
```

注意：我知道我不需要为单步作业覆盖步骤。这最终将是一个多步骤的工作，因此以这种方式构建类很重要。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-23T19:15:40.957

您可以使用`mrjob.protocol.JSONValueProtocol`（注意**Value**。请参阅[文档](http://pythonhosted.org/mrjob/protocols.html)）作为输出协议，而不是`mrjob.protocol.JSONProtocol`.

该文档包含有关使用[自定义协议](http://pythonhosted.org/mrjob/guides/writing-mrjobs.html#job-protocols)的更多信息。

# c# - Microsoft.Office.Interop.Excel 或 EPPlus 用于读取一个巨大的（或不是）Excel 文件

> ID：16221916
> 
> 赞同：2
> 
> 时间：2013-04-25T18:19:56.140
> 
> 标签：c#, .net, excel-interop, epplus

我编写了一个代码来从 Excel 文件中读取一列。我在此使用 Microsoft.Office.Interop.Excel，首先读取整个 Range，然后写入 System.Array，然后对 System.Array 值进行一些操作，最后将其转换为 List，因为我填充了 ListBox 元素。这是代码（仅相关部分）：

```
private List<string> bd = new List<string>();
private static System.Array objRowAValues;

private List<string> bl = new List<string>();
private static System.Array objRowBValues;

private List<string> cm = new List<string>();
private static System.Array objRowCValues;

private List<string> pl = new List<string>();
private List<string> bdCleanList;
private static Microsoft.Office.Interop.Excel.Application appExcel;

Excel.Application xlApp;
Excel.Workbook xlWorkBook;
Excel.Worksheet xlWorkSheet;
Excel.Range rngARowLast, rngBRowLast, rngCRowLast;

long lastACell, lastBCell, lastCCell, fullRow;

private void btnCargarExcel_Click(object sender, EventArgs e)
    {
        if (this.openFileDialog1.ShowDialog() == DialogResult.OK)
        {
            if (System.IO.File.Exists(openFileDialog1.FileName))
            {
                Stopwatch stopWatch = new Stopwatch();
                stopWatch.Start();
                Thread.Sleep(10000);

                filePath.Text = openFileDialog1.FileName.ToString();

                xlApp = new Microsoft.Office.Interop.Excel.Application();
                xlWorkBook = xlApp.Workbooks.Open(openFileDialog1.FileName, 0, true, 5, "", "", true,
                                                  Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false,
                                                  false, 0, true, 1, 0);
                xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

                fullRow = xlWorkSheet.Rows.Count;
                lastACell = xlWorkSheet.Cells[fullRow, 1].End(Excel.XlDirection.xlUp).Row;
                rngARowLast = xlWorkSheet.get_Range("A1", "A" + lastACell);
                objRowAValues = (System.Array)rngARowLast.Cells.Value;

                foreach (object elem in objRowAValues)
                {
                    if (elem != "")
                    {
                        bd.Add(cleanString(elem.ToString(), 10));
                    }
                }

                nrosProcesados.Text = bd.Count().ToString();
                listBox1.DataSource = bd;

                xlWorkBook.Close(true, null, null);
                xlApp.Quit();

                releaseObject(xlWorkSheet);
                releaseObject(xlWorkBook);
                releaseObject(xlApp);

                stopWatch.Stop();

                TimeSpan ts = stopWatch.Elapsed;
                executiontime.Text =
                    String.Format("{0:00}:{1:00}:{2:00}.{3:00}", ts.Hours, ts.Minutes, ts.Seconds,
                                  ts.Milliseconds / 10).ToString();
            }
            else
            {
                MessageBox.Show("No se pudo abrir el fichero!");
                System.Runtime.InteropServices.Marshal.ReleaseComObject(appExcel);
                appExcel = null;
                System.Windows.Forms.Application.Exit();
            }
        }
    } 
```

我用大约 800 000 个单元格的 Excel 文件进行测试，用时不到 2 分钟。然后我从 EPPlus 测试样本并且比我的方法更快，所以我认为使用 EPPlus 而不是 Microsoft.Office.Interop.Excel 我认为也在使用 OpenXML SDK（但找不到任何适合我目标的示例，所以我离开现在）。在示例中，他们使用此代码从 Excel 文件中读取：

```
ExcelWorksheet sheet = package.Workbook.Worksheets[1];

var query1= (from cell in sheet.Cells["d:d"] where cell.Value is double && (double)cell.Value >= 9990 && (double)cell.Value <= 10000 select cell); 
```

他们当然在这里使用 LINQ，但我关于这个主题的问题是：

*   您使用了哪种方法？
*   您对此有何建议？
*   使用 EPPlus 或 OpenXML SDK 编写相同的内容有什么帮助吗？

我是来自 PHP 世界的 C# 世界的新手，这是我的第一个项目

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T18:25:49.327

您使用了哪种方法？-EPPlus

您对此有何建议？-我发现 EPPLus 的速度要快得多。在我看来，它也是一个更容易使用的 API。由于许多原因，其中一个原因是缺乏 COM 互操作性（无论是速度还是易用性）。要求也较少，尤其是在部署到服务器环境时：无需安装 Excel 垃圾。

使用 EPPlus 或 OpenXML SDK 编写相同的内容有什么帮助吗？-EPPlus API 相当简单。尝试并针对您迄今为止尝试过的内容发布更具体的问题。

另一种循环单元格的方法：

```
var firstColumnRows = sheet.Cells["A2:A"];

// Loop through rows in the first column, get values based on offset
foreach (var cell in firstColumnRows)
{
    var column1CellValue = cell.GetValue<string>();
    var neighborCellValue = cell.Offset(0, 1).GetValue<string>();
} 
```

# ms-access - 使用具有多个条件的更新查询

> ID：16221917
> 
> 赞同：1
> 
> 时间：2013-04-25T18:20:03.477
> 
> 标签：ms-access

我有一列邮政编码，其中一些需要添加前导零以使其成为五位数字，其中一些是空白的，需要填充五个零。如何在一个更新查询中同时执行这两项操作？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:26:20.687

将 5 个零连接到邮政编码值的开头，并从该组合字符串中获取最右边的 5 个字符。

```
UPDATE YourTable
SET zip_code = Right('00000' & zip_code, 5)
WHERE Len(Trim(zip_code & '')) < 5; 
```

我假设该`zip_code`字段是文本类型，因为存储前导零对数字数据没有意义。如果该字段是数字，您可以只使用`Format()`表达式来显示前导零。

该`WHERE`子句`UPDATE`仅限制`zip_code`为 Null 或少于 5 个字符的行。

# youtube-api - 使用 contentOwnerId 获取包括私有/未列出的视频列表

> ID：16221919
> 
> 赞同：0
> 
> 时间：2013-04-25T18:20:11.440
> 
> 标签：youtube-api

我`playlistitems`用来获取经过身份验证的用户的视频列表（包括私人/未列出）。

现在我尝试了 contentOwnerId。我可以使用 获取私人视频信息，`onBehalfOfContentOwner`但没有`onBehalfOfContentOwner`.`playlistitems`

还有其他方法可以获取拥有频道的完整列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T21:06:20.883

我相当肯定，这样做的预期方式是通过`search.list(part=snippet, forContentOwner=true, onBehalfOfContentOwner=CONTENT_OWNER_ID, type=video, maxResults=50)`并且可选地包括`channelId=UC...`如果您只想在您管理的特定频道中获取视频。如果视频超过 50 个，则必须请求多个页面。我刚刚对其进行了测试，它似乎确实返回了私人和公共视频。

是的，这有点奇怪，这是通过`search.list()`而不是`playlistItems.list()`......

# android - 如何处理服务的通知？

> ID：16221922
> 
> 赞同：-1
> 
> 时间：2013-04-25T18:20:29.420
> 
> 标签：android

我正在尝试开发一个知道是否有任何通知然后采取行动的android服务。我不知道如何管理通知。
我想知道通知是如何工作的，以及如何收听它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:57:04.147

如[本答案](https://stackoverflow.com/questions/5487052/reacting-to-notifications)中所述，您应该使用 BroadcastReceiver 来捕获适当的意图并执行您的预期操作。

您提到作为示例，接收 SMS 消息应触发 LED 灯。[如此处](https://stackoverflow.com/questions/14452808/sending-and-receiving-sms-and-mms-in-android)所述，您应该像这样注册您的“SMSReceiver”BroadcastReceiver：

```
// SMS Receiver
<receiver android:name="com.myexample.receivers.SMSReceiver" >
    <intent-filter>
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
    </intent-filter>
</receiver> 
```

...并定义它的代码有点像这样：

```
public class SMSReceiver extends BroadcastReceiver {
private final String DEBUG_TAG = getClass().getSimpleName().toString();
private static final String ACTION_SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
private Context mContext;
private Intent mIntent;

// Retrieve SMS
public void onReceive(Context context, Intent intent) {
    mContext = context;
    mIntent = intent;

    String action = intent.getAction();

    if(action.equals(ACTION_SMS_RECEIVED)){

        String address, str = "";
        int contactId = -1;

        SmsMessage[] msgs = getMessagesFromIntent(mIntent);

        // Iterate over the received messages with a loop,
        // performing the desired actions during the process
    }

}

public static SmsMessage[] getMessagesFromIntent(Intent intent) {
    Object[] messages = (Object[]) intent.getSerializableExtra("pdus");
    byte[][] pduObjs = new byte[messages.length][];

    for (int i = 0; i < messages.length; i++) {
        pduObjs[i] = (byte[]) messages[i];
    }
    byte[][] pdus = new byte[pduObjs.length][];
    int pduCount = pdus.length;
    SmsMessage[] msgs = new SmsMessage[pduCount];
    for (int i = 0; i < pduCount; i++) {
        pdus[i] = pduObjs[i];
        msgs[i] = SmsMessage.createFromPdu(pdus[i]);
    }
    return msgs;
} 
```

}

...至于 LED 问题，大多数报告似乎很粗略，但[这个答案](https://stackoverflow.com/questions/2211543/change-pulse-notification-light-trackball-light-setting-on-android-nexus-on)有一个狡猾的解决方法：

```
android.provider.Settings.System.putInt(context.getContentResolver(),
    "notification_light_pulse", on ? 1 : 0); 
```

# apache - Apache URL 重写导致内部服务器错误

> ID：16221924
> 
> 赞同：1
> 
> 时间：2013-04-25T18:20:34.283
> 
> 标签：apache, mod-rewrite, url-rewriting

为什么以下 Apache 配置会产生内部服务器错误：

```
# Turn on the rewriting engine
RewriteEngine On

# Redirect "page/" and "page" to "page.php" . Also, redirect "page/en/" and "page/en" to "page.php?lang=en" .
RewriteRule ^(.+)/?([a-z]?)/?$ $1.php?lang=$2 [QSA,NC,L] 
```

所以，基本上，我要做的就是在页面末尾添加“.php”，如果存在“/en”部分，则将其添加为语言参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:26:03.493

**您的规则失败的原因：**您的重写规则导致无限循环并且 Apache 抛出内部服务器错误（500），因为`Request exceeded the limit of 10 internal redirects`（默认）。

以下是您应该如何为此任务编写重写规则：

```
RewriteEngine On
RewriteBase /MySite/

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*?)(?:/(.*?)/?)?$ $1.php?lang=$2 [L,NC,QSA] 
```

# javascript - 使用 Grunt 连接 JSON 文件的适当方法

> ID：16221932
> 
> 赞同：4
> 
> 时间：2013-04-25T18:21:04.520
> 
> 标签：javascript, json, gruntjs

我正在寻找使用 Grunt 组合保持特定结构的 json 文件的最佳方法。

这些文件以如下结构放置在文件夹中：

```
应用程序
├── 语言环境
│ ├── zh
│ │ └── translation.json
│ ├── es
│ │ └── translation.json
│ └── fr
│ └── translation.json
└── 小部件
    ├── 帖子
    │ └── 语言环境
    │ ├── zh
    │ │ └── translation.json
    │ ├── es
    │ │ └── translation.json
    │ └── fr
    │ └── translation.json
    ├── 评论
    │ └── 语言环境
    │ ├── zh
    │ │ └── translation.json
    │ ├── es
    │ │ └── translation.json
    │ └── fr
    │ └── translation.json
    └── 友情链接
        ├── 语言环境
        │ ├── zh
        │ │ └── translation.json
        │ ├── es
        │ │ └── translation.json
        │ └── fr
        │ └── translation.json

```

合并文件的所需输出将是：

```
应用程序
│
├── 郎
│ ├── zh
│ │ └── translation.json
│ ├── es
│ │ └── translation.json
│ └── fr
│ └── translation.json
├── 语言环境
└── 小部件

```

到目前为止，我想出了一个使用 grunt-contrib-concat 的解决方案，但我认为应该有更好的方法来做到这一点。

```
concat: {
  translateEN: {
    src: [
      'www/js/app/locales/en/*.json',
      'www/js/app/widgets/posts/locales/en/*.json',
      'www/js/app/widgets/comments/locales/en/*.json',
      'www/js/app/widgets/links/locales/en/*.json'
    ],
    dest: 'www/js/app/lang/en/translation.json',
    options: {
      banner: '{',
      footer: "}",
      separator: ','
    }
  },
  translateES: {
    src: [
      'www/js/app/locales/es/*.json',
      'www/js/app/widgets/posts/locales/es/*.json',
      'www/js/app/widgets/comments/locales/es/*.json',
      'www/js/app/widgets/links/locales/es/*.json'
    ],
    dest: 'www/js/app/lang/es/translation.json',
    options: {
      banner: '{',
      footer: "}",
      separator: ','
    }
  },
  translateFR: {
    src: [
      'www/js/app/locales/fr/*.json',
      'www/js/app/widgets/posts/locales/fr/*.json',
      'www/js/app/widgets/comments/locales/fr/*.json',
      'www/js/app/widgets/links/locales/fr/*.json'
    ],
    dest: 'www/js/app/lang/fr/translation.json',
    options: {
      banner: '{',
      footer: "}",
      separator: ','
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T15:14:19.247

我最终为此编写了自己的繁重任务：

```
 grunt.task.registerMultiTask('buildLocales', 'Build Locale files.', function() {
    var that = this,
        len = this.filesSrc.length,
        outputDir,
        outputFile,
        originalFile,
        destFile,
        merged;

    var jsonConcat = function(object1, object2) {
      var key, a1, a2;
      for (key in object2) {
        if (object2.hasOwnProperty(key)) {
          a2 = object2[key];
          a1 = object1[key];
          if (a1) {
            a1.push.apply(a1, a2);
          } else {
            object1[key] = a2;
          }
        }
      }

      return object1;
    };

    var iterateTroughFiles = function(abspath, rootdir, subdir, filename){
      if (abspath.indexOf('/.svn') === -1){
        outputDir = that.data.dest + '/' + subdir;
        outputFile = outputDir + '/' + filename;

        // If output dir doesnt exists, then create it
        if (!grunt.file.exists(outputDir)) {
          grunt.file.mkdir(outputDir);
        }

        originalFile = grunt.file.readJSON(abspath);

        // if dest file doenst exist, then just copy it.
        if (!grunt.file.exists(outputFile)) {
          grunt.file.write(outputFile, JSON.stringify(originalFile));
        } else {
          // read source file, read dest file. merge them. write it in dest file
          destFile = grunt.file.readJSON(outputFile);

          merged = jsonConcat(destFile, originalFile);

          grunt.file.write(outputFile, JSON.stringify(merged));
        }
      }
    };

    for (var x = 0; x < len; x++) {
      grunt.file.recurse(this.filesSrc[x], iterateTroughFiles);
    }
  }); 
```

实现是这样的：

```
buildLocales: {
  locales:{
    src: [
      'www/js/app/**/locales'
    ],
    dest: PATH_BUILD_LANGUAGES
  }
}, 
```

# hadoop - 自动将每个节点的最大映射任务数设置为核心数？

> ID：16221933
> 
> 赞同：5
> 
> 时间：2013-04-25T18:21:06.760
> 
> 标签：hadoop

我正在建立一个hadoop集群，其中节点都是相当异构的，即它们每个都有不同数量的核心。目前我必须手动编辑`mapred-site.xml`每个节点上的填写`{cores}`：

```
<property>
    <name>mapred.tasktracker.map.tasks.maximum</name>
    <value>{cores}</value>
</property> 
```

当我添加新节点时，有没有更简单的方法？大多数其他值是一些默认值，最大映射任务是唯一从节点到节点变化的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T23:10:36.463

如果您对某些脚本感到满意，那么以下将为您提供每台机器的“处理器”数量（这对不同的架构意味着不同的事情，但或多或​​少是您想要的）：

```
cat /proc/cpuinfo | grep processor | wc -l 
```

然后您可以使用`sed`或等效的方法根据此输出更新您的 mapred-site.xml 文件。

所以把这一切放在一起：

```
CORES=`cat /proc/cpuinfo | grep processor | wc -l`
sed -i "s/{cores}/$CORES/g" mapred-site.xml 
```

一个脚注，但您可能不想将每个映射器的数量和减速器的数量配置为核心数量，因此您可能希望将它们拆分为两种类型，并为数据节点提供核心备用和任务跟踪器等。

# linux - 替换 zsh 命令行中的字符串

> ID：16221944
> 
> 赞同：9
> 
> 时间：2013-04-25T18:21:54.307
> 
> 标签：linux, command-line, zsh

我使用 zsh 和 emacs 键绑定。有时我需要使用不同的输入执行相同的命令。输入通常具有公共子字符串。有没有一种简单的方法可以用其他字符串替换先前命令的一部分？例如，前面的命令是：

```
cat chr2.unknow.feature.filtered ../chr2.unknow.feature.filtered ../train/chr2.unknow.withpvalue.feature.filtered > chr2.combined.txt 
```

我怎样才能轻松地将“chr2”替换为“chr3”？

问题的扩展，如何将命令中的几个不同的子字符串替换为其他不同的字符串：

```
cat chr1.unknow.feature.filtered ../chr2.unknow.feature.filtered ../train/chr3.unknow.withpvalue.feature.filtered 
```

比如说，如何用“chrX”替换“chr1”，用“chrY”替换“chr2”，用“chrZ”替换“chr3”？

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-26T14:48:31.757

您还可以使用（比 快得多）进行**快速**历史替换`^old^new``!!:s^old^new^`

```
~ % cd /tmp
/tmp % ^tmp^etc  # <-- changes tmp for etc
/tmp % cd /etc
/etc % 
```

这只会改变第一次出现。如果您需要更多，请使用任何历史修饰符。示例：全局更改：

```
/etc % echo tmp tmp tmp
tmp tmp tmp
/etc % ^tmp^etc
/etc % echo etc tmp tmp  # <--- only the first tmp got changed
etc tmp tmp
/etc % ^tmp^etc^:G       # <-- 'global' 
```

PS：搜索`zshexpn`手册`^foo^bar`以找到描述此的部分。向下滚动一点（在手册中），您将看到“历史扩展修改器”列表。

PS：对于多个替换，做：`^old1^new1^:s^old2^new2^`等

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-26T08:43:42.127

要直接完成您的要求：

```
$ !!:s/chr1/chrX/:s/chr2/chrY/:s/chr3/chrZ/ 
```

这将修改最后输入的命令。要执行全局替换，请使用`:gs/a/b/`.

例子：

```
$ man zshall
$ !!:gs/man/less/:gs/zshall/.history/<TAB>
$ less .history 
```

阅读更多`man zshexpn`内容——ZSH 扩展和替换。

# hash - 防止页面跳转 - 散列锚标记 - 默认行为

> ID：16221948
> 
> 赞同：0
> 
> 时间：2013-04-25T18:22:07.390
> 
> 标签：hash, anchor, target, mouseclick-event, page-jump

我使用目标制作了一种带有 css 点击事件的菜单框，并将它们与哈希锚标记链接起来。问题是，当我单击其中一个按钮（One、Twii、Thrii 等）时，页面会跳转！我尝试使用 js 脚本来停止默认行为，但没有成功。您能否帮我停止页面跳转，以便在单击按钮/链接时页面不会移动！

这是我制作的 JS Fiddle 链接。jsfiddle.net/3ASpX/1/

我需要一个解决方案..无论是使用目标还是其他东西！

谢谢你，如果我做错了什么，我对解释和问题本身的任何混淆表示歉意，非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T11:27:47.690

我认为您可以通过使用`<div>`而不是`<a>`.

但是如果你必须使用`<a>`，你可以使用 jQuery 删除目标：

```
$( '.link' ).removeAttr("href"); 
```

# zend-framework - 将 Zend 框架自动加载到 Yii

> ID：16221953
> 
> 赞同：1
> 
> 时间：2013-04-25T18:22:42.293
> 
> 标签：zend-framework, yii, yii-extensions, autoloader

我试图通过[扩展](http://yiiext.github.io/extensions/zend-autoloader-component/index.html)将 Zend 框架包含到 Yii 中。问题是这样的：

```
Warning: include(EZendAutoloader.php): failed to open stream 
```

索引.php：

```
// change the following paths if necessary
$yii=dirname(__FILE__).'/framework/yii.php';
$config=dirname(__FILE__).'/protected/config/main.php';

// remove the following lines when in production mode
defined('YII_DEBUG') or define('YII_DEBUG',true);
// specify how many levels of call stack should be shown in each log message
defined('YII_TRACE_LEVEL') or define('YII_TRACE_LEVEL',3);

require_once($yii);

EZendAutoloader::$prefixes = array('Zend');

Yii::import("ext.yiiext.components.zendAutoloader.EZendAutoloader", true);
Yii::registerAutoloader(array("EZendAutoloader", "loadClass"), true);

$app= Yii::createWebApplication($config);
$app->run(); 
```

`EZendAutoloader::$prefixes = array('Zend');`可以在导入之前吗？我也试图改变 Yii:import 的论点，但没有运气。

# core-data - CoreData 获取所有相关对象

> ID：16221961
> 
> 赞同：0
> 
> 时间：2013-04-25T18:22:59.177
> 
> 标签：core-data

我在核心数据中有两个相关实体

1.  书籍实体@property (nonatomic, retain) NSString * author; @property (nonatomic, 保留) NSString * name; @property (nonatomic, 保留) NSSet *reviews;

2.  审查实体

    @property (nonatomic, retain) NSString * 审阅者；@property (nonatomic, 保留) NSString * reviewText; @property (nonatomic, 保留) Book *book;

每个中的最后一个属性是关系。

我有一个书籍对象 Book *book

如何从 CoreData 中获取与“书”相关的所有评论对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:44:25.393

`book.reviews`应该返回该书的一组评论对象。

# iphone - SecPKCS12Import弧下泄漏？

> ID：16221966
> 
> 赞同：1
> 
> 时间：2013-04-25T18:23:13.363
> 
> 标签：iphone

iOS 工具在 arc 下该代码的所有 SecPKCS12Import 行上发现内存泄漏：

```
 SecCertificateRef certRef = SecTrustGetCertificateAtIndex(trustRef, 0);
    CFStringRef certSummary = SecCertificateCopySubjectSummary(certRef);
    NSData *data = (__bridge_transfer NSData *) SecCertificateCopyData(certRef);
    NSURL *indexURL = [[NSBundle mainBundle] URLForResource:@"cert1" withExtension:@"p12"];
    NSData *localP12 = [NSData dataWithContentsOfURL:indexURL];
    NSMutableDictionary * options = [[NSMutableDictionary alloc] init];
    NSString *password = ///
    [options setObject:password forKey:(__bridge id)kSecImportExportPassphrase];
    CFArrayRef items = CFArrayCreate(NULL, 0, 0, NULL);
    OSStatus securityError = SecPKCS12Import((__bridge CFDataRef) localP12,(__bridge CFDictionaryRef)options, &items);
    if (securityError == noErr) { };/// good } else { //bad }
    CFDictionaryRef identityDict = CFArrayGetValueAtIndex(items, 0);
    CFArrayRef certificates =
    (CFArrayRef)CFDictionaryGetValue(identityDict,kSecImportItemCertChain);
    SecCertificateRef localCert = (SecCertificateRef)CFArrayGetValueAtIndex(certificates,0);
    CFDataRef dataLocal = SecCertificateCopyData(localCert);
    NSData *local = (__bridge NSData *)dataLocal;
    //NSLog(@"local:%@",local);
    NSURL *indexURLmac3 = [[NSBundle mainBundle] URLForResource:@"cert2" withExtension:@"p12"];
    NSData *localP12mac3 = [NSData dataWithContentsOfURL:indexURLmac3];
    NSMutableDictionary * optionsMac3 = [[NSMutableDictionary alloc] init];
    NSString *passwordMac3 = //
    [optionsMac3 setObject:passwordMac3 forKey:(__bridge id)kSecImportExportPassphrase];
    CFArrayRef itemsMac3 = CFArrayCreate(NULL, 0, 0, NULL);
    securityError = SecPKCS12Import((__bridge CFDataRef) localP12mac3, (__bridge CFDictionaryRef)optionsMac3, &itemsMac3);
    if (securityError == noErr) { };/// good } else { //bad }
    CFDictionaryRef identityDictMac3 = CFArrayGetValueAtIndex(itemsMac3, 0);
    CFArrayRef certificatesMac3 =
    (CFArrayRef)CFDictionaryGetValue(identityDictMac3, kSecImportItemCertChain);
    SecCertificateRef localCertMac3 = (SecCertificateRef)CFArrayGetValueAtIndex(certificatesMac3,0);
    CFDataRef dataLocalMac3 = SecCertificateCopyData(localCertMac3);
    NSData *localMac3 = (__bridge NSData *)dataLocalMac3;
    NSURL *indexURLwebcob3 = [[NSBundle mainBundle] URLForResource:@"cert3" withExtension:@"p12"];
    NSData *localP12wwebcob3 = [NSData dataWithContentsOfURL:indexURLwebcob3];
    NSMutableDictionary * optionsWebcob3 = [[NSMutableDictionary alloc] init];
    NSString *passwordWebcob3 = //
    [optionsWebcob3 setObject:passwordWebcob3 forKey:(__bridge id)kSecImportExportPassphrase];
    CFArrayRef itemsWebcob3 = CFArrayCreate(NULL, 0, 0, NULL);
    securityError = SecPKCS12Import((__bridge CFDataRef) localP12wwebcob3, (__bridge CFDictionaryRef)optionsWebcob3, &itemsWebcob3);
    if (securityError == noErr) { };/// good } else { //bad }
    CFDictionaryRef identityDictWebcob3 = CFArrayGetValueAtIndex(itemsWebcob3, 0);
    CFArrayRef certificatesWebcob3 =
    (CFArrayRef)CFDictionaryGetValue(identityDictWebcob3,
                                     kSecImportItemCertChain);
    SecCertificateRef localCertWebcob3 = (SecCertificateRef)CFArrayGetValueAtIndex(certificatesWebcob3,0);
    CFDataRef dataLocalWebcob3 = SecCertificateCopyData(localCertWebcob3);
    NSData *localWebcob3 = (__bridge NSData *)dataLocalWebcob3;
    if ([data isEqualToData:local] || [data isEqualToData:localMac3] || [data isEqualToData:localWebcob3]) trust = YES;

    CFRelease(certSummary);
    CFRelease((CFDataRef) dataLocal);
    CFRelease((CFDataRef) dataLocalMac3);
    CFRelease((CFDataRef) dataLocalWebcob3); 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T22:23:00.217

哇。该代码真的很难遵循。您似乎正在执行三种不同的 PKCS12 导入，您可能希望将其设为一个被调用三次的方法。只是说。

无论如何，即使不遵循您的代码，我也知道问题可能是什么——因为我以前见过这个。您使用的安全方法遵循[此处定义的 CoreFoundation 内存管理模式](https://developer.apple.com/library/mac/#documentation/CoreFOundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html)。我不止一次发现 PKCS12 身份导入过程泄漏，因为有人没有意识到这一点，或者认为转换为 ARC 的桥只会使其工作。

但这里是你应该看的——当然，除了 Instruments 试图告诉你的任何东西：

*   您需要释放作为最后一个参数传递的项目`SecPKCS12Import`（文档中的 CFArrayRef）。查看[Apple 的示例](https://developer.apple.com/library/mac/#documentation/security/conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html)以获得指导。

*   我看到了更明显的东西——你在`CFArrayCreate`没有相应版本的情况下打电话。

# html - 样式输入轮廓边框 - CSS3

> ID：16221968
> 
> 赞同：0
> 
> 时间：2013-04-25T18:23:17.050
> 
> 标签：html, forms, css, input

我有以下 CSS3 源代码：

```
input[type="text"], input[type="date"], textarea, input[type="radio"], input[type="number"],
input[type="time"], input[type="password"] {
    background: #ffffff; /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIzMiUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMSIvPgogICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZWRlZGVkIiBzdG9wLW9wYWNpdHk9IjEiLz4KICA8L2xpbmVhckdyYWRpZW50PgogIDxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9InVybCgjZ3JhZC11Y2dnLWdlbmVyYXRlZCkiIC8+Cjwvc3ZnPg==);
    background: -moz-linear-gradient(top, #ffffff 32%, #ededed 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(32%,#ffffff), color-stop(100%,#ededed)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #ffffff 32%,#ededed 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #ffffff 32%,#ededed 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #ffffff 32%,#ededed 100%); /* IE10+ */
    background: linear-gradient(to bottom, #ffffff 32%,#ededed 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#ededed',GradientType=0 ); /* IE6-8 */
    font-size: 15px;
    border: 1px solid #9e9e9e;
    border-radius: 3px;
    height: 23px;
    padding-right:3px;

}

    input[type="text"]:focus, input[type="date"]:focus, textarea:focus, input[type="radio"]:focus, input[type="number"]:focus,
    input[type="time"]:focus, input[type="password"]:focus {
        border: none;
        outline: none;
        -webkit-transition: .1s;
        -moz-transition: .2s;
        transition: .2s;
        -o-transition: .2s;
        -moz-box-shadow: 0px 0px 4px 2px #5792ea;
        -webkit-box-shadow: 0px 0px 4px 2px #5792ea;
        box-shadow: 0px 0px 4px 2px #5792ea;
    } 
```

而这个 HTML 源代码：

```
 <form name="Login" action="Login.aspx" method="post"  runat="server">
        <p>
            Email: 
        <input type="text" name="Email" />
        </p>
        <p>
            Password:
        <input type="password" name="Password" />
        </p>
        <p>
            <button name="submit" class="blue-button" type="submit" style="margin-right:65px;">התחברות</button>
        </p>
    </form> 
```

这是现场示例：http: [//jsfiddle.net/f4sp5/](http://jsfiddle.net/f4sp5/)

问题是当我专注于输入时，我发现输入下的所有内容都在下降。

我的问题是如何避免这种向下移动？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:27:56.230

这是因为您的正常状态输入具有边框，但是当它们聚焦时，它们会失去该边框（正如您设置的那样）。为了避免这个故障，要么在两个州都使用边界，要么都不在...

[http://jsfiddle.net/f4sp5/4/](http://jsfiddle.net/f4sp5/4/)

这就是我所做的：

```
input[type="text"]:focus {/*border: none;*/} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:28:48.847

我相信它是因为您要删除边框并添加填充，`:focus`这只是更改元素的宽度 - 尝试添加：

`box-sizing: border-box;``-moz-box-sizing: border-box;`对于 FF - 您将内边距和边框限制为元素内容宽度。

[**jsFiddle**](http://jsfiddle.net/f4sp5/2/)

# mongodb - 在 MongoDB 中使用乘法聚合

> ID：16221972
> 
> 赞同：1
> 
> 时间：2013-04-25T18:23:35.653
> 
> 标签：mongodb

我有几个看起来像这样的文件：

```
{
        "hostname" : "server1.example.com",
        "virtual" : true,
        "processors" : {
                "cores" : 1,
                "sockets" : 4
        }
}
{
        "hostname" : "server2.example.com",
        "virtual" : false,
        "processors" : {
                "cores" : 2,
                "sockets" : 2
        }
} 
```

我正在尝试为每个文档输出主机名、虚拟内核和内核总数。我不断收到令我难过的语法错误。这是我的查询和语法错误。

```
c.aggregate( {
    $project: {
        hostname: 1,
        total-cores: {$multiply: ["$processors.sockets", "$processors.cores"]},
        virtual: 1,
        _id: 0
    }
});
Thu Apr 25 14:12:18 SyntaxError: missing : after property id (shell):1 
```

从文档来看，这应该有效。我错过了什么？我正在运行 MongoDB 2.2.2。

[http://docs.mongodb.org/manual/reference/aggregation/project/](http://docs.mongodb.org/manual/reference/aggregation/project/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:33:25.840

引用`total-cores`密钥，以便使用嵌入的连字符正确解析它：

```
c.aggregate({ 
    $project: { 
        hostname: 1, 
        "total-cores": {$multiply: ["$processors.sockets","$processors.cores"]}, 
        virtual: 1, 
        _id: 0  
    }
}); 
```

# c# - GetAuthorizationGroups() 抛出异常

> ID：16221974
> 
> 赞同：13
> 
> 时间：2013-04-25T18:23:49.273
> 
> 标签：c#, active-directory

```
PrincipalContext context = new PrincipalContext(ContextType.Domain, "ipofmachine", "DC=xyz,DC=org", "username", "Password");

UserPrincipal userPrinciple = UserPrincipal.FindByIdentity(context, "User0"); 
var groups = userPrinciple.GetAuthorizationGroups();

if (userPrinciple != null)
{
    foreach (GroupPrincipal gp in groups)
    {
        //some thing
    }
} 
```

我需要给予什么许可吗？在一些博客中，我了解到如果没有设置包含 SID 历史记录的用户，那么这将正常工作（但我认为您不能编辑组的 sid 值）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-21T14:44:49.707

我发现当您将域用户添加到本地组时出现问题，但后来该域用户被从 Active Directory 中删除。该本地组的状态是使用 SID 代替显示为成员的域用户名。

但！

该 SID 不再存在于 Active Directory 中，从而导致事情变得繁荣。

当然，弹出 NoMatchingPrincipalException 可能还有许多其他原因，因此此代码提供了一种解决方法。它来自 MSDN 上的一篇很棒的帖子。下面的代码是在这里找到的修改版本：

[http://social.msdn.microsoft.com/Forums/vstudio/en-US/9dd81553-3539-4281-addd-3eb75e6e4d5d/getauthorizationgroups-fails-with-nomatchingprincipalexception](http://social.msdn.microsoft.com/Forums/vstudio/en-US/9dd81553-3539-4281-addd-3eb75e6e4d5d/getauthorizationgroups-fails-with-nomatchingprincipalexception)

```
 public static IEnumerable<Principal> getAuthorizationGroups(UserPrincipal user)
    {
        PrincipalSearchResult<Principal> groups = user.GetAuthorizationGroups();
        List<Principal> ret = new List<Principal>();
        var iterGroup = groups.GetEnumerator();
        using (iterGroup)
        {
            while (iterGroup.MoveNext())
            {
                try
                {
                    Principal p = iterGroup.Current;
                    Console.WriteLine(p.Name);
                    ret.Add(p);
                }
                catch (NoMatchingPrincipalException pex)
                {
                    continue;
                }
            }
        }
        return ret;
    } 
```

# svn - 在 SVN 存储库中移动项目树？

> ID：16221976
> 
> 赞同：0
> 
> 时间：2013-04-25T18:23:53.877
> 
> 标签：svn, migration

我有一个包含多个项目的当前 SVN 存储库。在表格中：

```
/Project/trunk/code.cs 
```

这些项目正在被拆分到新服务器上的自己的新存储库中。我尝试使用 svnadmin 和 svndumpfilter 来转储各个项目。

我们想将它们加载到新存储库的根目录中，例如：

```
/code.cs 
```

但是 svnadmin 加载似乎想要加载回相同的结构，并且抱怨，因为它不存在..

既然他们已经生活在另一个结构中，难道就不能将这些项目移动到他们自己的存储库的根目录并保持历史吗？

编辑：

我需要澄清一下。我说我要保持历史。这真的不是真的。我想将文件和子目录永久移动到根目录，就好像那里从来没有过去的版本一样……好像它们从第一天起就在根目录中……同时保持文件版本历史记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:43:27.457

1.  负载转储
2.  `svn mv`文件，删除空子目录（一个额外的提交）
3.  使用 repo 或 dump repo（仅限 HEAD）|从这个完善的转储重新创建它

# linq - 子实体中的总和

> ID：16221979
> 
> 赞同：0
> 
> 时间：2013-04-25T18:23:58.717
> 
> 标签：linq, entity-framework

我有一个具有父类和两个子类的实体，如下所示：

税务报告 --> 包裹 --> 收税员

Tax Report 包含一个 Parcel 集合，Parcel 包含一个 Tax Collector 集合。

My Tax Report 对象有 2 个 Parcel 对象与之关联，每个 Parcel 对象有 2 个 Tax Collector 对象与之关联。Tax Collector 对象有一个我感兴趣的名为 Taxes Due 的属性。以下是数据示例：

税务报告：1

包裹：0001
税务员：达拉斯县，应缴税款 100 美元
税务员：科林县，应缴税款 50 美元

包裹：0002
税务员：科林县，应缴税款 1000 美元
税务员：欧文市，应缴税款 100 美元

我想查询我的对象以汇总按税收员分组的所有包裹的应缴税款。这是我希望我的结果如下所示：

达拉斯县，100 美元
科林县，1050
美元 欧文市，100 美元

我已经尝试过以下方法： var taxsummary = from tr in taxreport.Parcel.Select(y=>y.TaxCollector).Select(n=>n.TaxesDue).Sum()

但我没有任何运气。我的结果总是被预测为一个多层次的集合，每个包裹下方的应缴税款，而不是按税务员分组。有任何想法吗？

谢谢，布拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:33:30.923

这可以解决问题：

```
var grouped = from parcel in taxReport.Parcels
              from taxCollector in parcel.TaxCollectors
              group taxCollector by new 
              {
                  Name = taxCollector.Name // Or whatever makes it Unique...
              };

foreach(var collectorGroup in grouped)
{
    Console.WriteLine(collectorGroup.Key.Name + " : " + collectorGroup .Sum(p => p.TaxesDue));
} 
```

如果你想要一个字典之类的东西，你可以这样做：

```
var grouped = (from parcel in taxReport.Parcels
               from taxCollector in parcel.TaxCollectors
               group taxCollector by new 
               {
                   Name = taxCollector.Name
               } 
               into groupedCollectors
               select new 
               { 
                   Name = groupedCollectors.Key.Name, 
                   TaxesDue = groupedCollectors.Sum(p => p.TaxesDue)
               }) 
               .ToDictionary(p =>p.Name, p => p.TaxesDue); 
```

# git - Git：创建拉取请求时出错：禁止（HTTP 403）

> ID：16221980
> 
> 赞同：16
> 
> 时间：2013-04-25T18:24:09.573
> 
> 标签：git, pull-request

我曾经像往常一样在我的项目上创建拉取请求，我已经访问了很长时间，从那时起没有任何改变。

每次我尝试创建一个新的拉取请求时，我都会得到以下信息：

```
(git: test-branch) $ hub pull-request
Error creating pull request: Forbidden (HTTP 403) 
```

我得到这个有什么原因吗？我可以访问仓库，我可以正常拉取和推送，但不能创建拉取请求。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-25T20:03:32.893

我刚刚遇到了同样的问题 - 并检查了 repo 中的问题部分 - [https://github.com/defunkt/hub/issues/317](https://github.com/defunkt/hub/issues/317) - 并找到了我的答案:-)

显然我们不是唯一的，但升级到最新版本的集线器可以解决问题:-)

赶紧跑

`brew update && brew upgrade hub`

你会准备好的:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T13:23:59.870

Github 更改了他们的 api，他们现在需要一个用户代理来处理您对他们进行的所有调用（如果您需要编写 github 脚本并且不使用 pygithub 之类的东西来帮助您，以供将来参考）。如果您不提供用户代理，他们会发回 403。

# c# - 从 Visual Studio 中的 WinForms groupBox 中检索单个值

> ID：16221981
> 
> 赞同：0
> 
> 时间：2013-04-25T18:24:19.687
> 
> 标签：c#, winforms, visual-studio, groupbox

我是 Visual Studio 和 C# 的新手。我正在创建一个 WinForms 应用程序，该应用程序计算需要一个文本框（原则）、一个组合框（用于利率）、一个需要 2 个单选按钮（15 年和 30 年）和“其他”的组合框的每月抵押贷款支付按钮为用户输入的年份打开一个文本框，以及一个在单击时执行计算的按钮。有没有办法在我进行计算时仅引用组框中的一个值，或者我是否需要为每个单选按钮和文本框执行 If 语句并将其放入我的 button_Click 方法？最好，我希望 button_Click 方法简单地调用一个单独的方法来执行计算并将其放在输出字符串中。这是我到目前为止的代码：

```
 private void groupBox1_Enter(object sender, EventArgs e)
    {
        double yrs;
        bool success;
        if (rdo15.Checked)
            success = double.TryParse(rdo15.Text, out yrs);
        else if (rdo30.Checked)
            success = double.TryParse(rdo30.Text, out yrs);
        else
            success = double.TryParse(textBox2.Text, out yrs);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        string msgStr = string.Format("Your monthly payment will be {0}", payment());
        MessageBox.Show(msgStr);
    }

    private double payment()
    {
        double intRate = Double.Parse(comboBox1.Text);
        double prin = Double.Parse(txtPrin.Text);
        double yrs = Double.Parse(groupBox1.Text);
        //payment calculation
    } 
```

我意识到我需要在计算后转换为货币格式等。我可以使用最后一种方法（付款）检索所有值，但组框中的值除外。我知道必须有一种简单的方法来获取其中一个值（从单选按钮或文本框）并将其插入我的数学方程式。关于如何处理它的任何提示？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:35:05.980

你应该继续使用你的 if/else if/else 组合，但你可以改变一些事情。

创建一个类级别的变量来存储值。

`double years = [enter default value if you wish]`

然后，您可以在整个课程中使用它。

在您选择的方法中，您可以按照自己的方式设置此变量（下面的效率稍高一些，因为不需要设置未使用的变量）。

```
if (rdo15.Checked)
   years = 15;
else if (rdo30.Checked)
   years = 30;
else
   double.TryParse(textBox2.Text, out years); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:29:57.550

if 语句真的会为你提供最好的服务：

```
if (rad15years.checked)
    years = 15;
else if (rad30years.checked)
    years = 30;
else 
    years = int.Parse(txtCustomYears.text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:34:41.923

可能对您的需求有点过分，但我建议使用 a`ListBox`而不是多个单选按钮。然后，您可以有一个字典`DataSource`，其中 key 是您的时期，以年为单位，而 value 是人类可读的时期。所以你`(Key,Value)`现在有两对：

```
{15, "15 Years"}
{30, "30 Years"} 
```

你可以这样做`ListBox1.SelectedValue`，它分别返回正确数据类型的 15 和 30，应该能够直接从那里插入你的公式。这种方法还给您带来的好处是您可以轻松地扩展它，并开始支持`25 years`等周期。

如果出于任何原因，您想继续使用单选按钮，我建议您创建一个自定义类，它将其`Years`值保存在自定义属性中。因此，您将一个配置为`15`表单设计器，另一个配置为`30`. 然后它就像循环遍历所有这些一样简单，如果选中，则获取其`Years`属性并注入您的公式以进行进一步处理。这也可以扩展以支持任意数量的单选按钮。

# jprofiler - 使用 jprofiler 分析远程 weblogic 服务器时出错

> ID：16221989
> 
> 赞同：0
> 
> 时间：2013-04-25T18:24:48.090
> 
> 标签：jprofiler

嗨，我是 jprofiler 的新手。我的任务是分析一个远程 weblogic 服务器，我已经按照远程分析的步骤进行了远程分析，并一直到 jprofiler 自行创建的 sh 文件创建。正如我所读到的，我需要使用这个 sh 文件启动我的 weblogic 服务器。但我坚持以下错误。

:VM 初始化过程中发生错误无法在绝对路径中找到代理库......./linuxX64/libjprofilerti.so

我可以看到错误中提到的路径中的文件。急需帮助。

提前致谢， Raghu 开发人员

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:05:20.563

您可能正在分析 32 位 JVM，而不是 64 位 JVM。重复集成向导并取消选中“Profiled JVM”步骤中的“64-bit JVM”复选框。然后它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-15T01:08:43.643

在创建分析设置时取消选中 jprofiler 中的 64 位 vm 选项。这应该可以解决问题

# seo - 具有相似页面的 SEO

> ID：16221991
> 
> 赞同：0
> 
> 时间：2013-04-25T18:24:51.190
> 
> 标签：seo, search-engine, google-search

我们公司创建了一个“比较”工具，它使用唯一的 url 来选择您想要比较的对象，例如：

[http://www.sportingcharts.com/nhl/2010-edmonton-oilers/vs/2008-calgary-flames/](http://www.sportingcharts.com/nhl/2010-edmonton-oilers/vs/2008-calgary-flames/) [http://www.sportingcharts.com/nhl/1993-carolina-hurricanes/vs/2008-dallas-星星/](http://www.sportingcharts.com/nhl/1993-carolina-hurricanes/vs/2008-dallas-stars/)

有谁知道这是推荐的 SEO 策略，还是使用查询字符串参数而不是完全不同的 url 更好。我想到的一个优势是这可以抓住长尾流量搜索，例如“2010 Edmonton Oilers Vs 1995 Calgary Flames”，但拥有这么多 URL 也可能会损害这些页面的一般 SEO。

有没有人有创建这样的页面的经验？推荐的策略是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T09:18:44.180

URL 的样式对搜索引擎来说并不重要。

从搜索引擎的角度来看，他们会更关心：

*   你有 30 支球队和 24 个赛季。您正在创建 30*24*30*24 = 超过 500,000 个页面。
*   每个页面的内容很少。它只是两个团队名称和一些数字统计数据。
*   您拥有的内容在页面之间大量重复。
*   您的目标关键字的搜索量将非常低。很少有人会搜索两个不同年份的两个团队名称。

如果我运行一个搜索引擎，我不想让我的爬虫浪费时间来爬取那个站点。我不希望索引中的页面。

我预计您的网站会因为此部分而遭受“内容过少”、“内容重复”和“页面过多”的问题。

# mysql - 如何防止mysql隐式提交

> ID：16221993
> 
> 赞同：2
> 
> 时间：2013-04-25T18:24:54.723
> 
> 标签：mysql, transactions

mysql[文档](http://dev.mysql.com/doc/refman/5.5/en/implicit-commit.html)指出，某些语句将在事务期间导致隐式提交。例如：

```
CREATE TABLE foo (bar INT);
START TRANSACTION;
INSERT INTO foo VALUES (1);
CREATE TEMPORARY TABLE mumble like foo;
ALTER TABLE mumble modify bar INT UNSIGNED;
ROLLBACK;
SELECT * FROM foo; 
```

回滚后，我从 foo 中返回了一行——文档实际上说，如果您使用临时关键字，alter table 不应导致隐式提交，但 ALTER TEMPORARY TABLE 语法无效，并删除临时表不会导致隐式提交，所以我怀疑只是一个错误（至少从 5.5.29 开始）

在任何情况下，我想做的是告诉 mysql 永远不要隐式提交，而是在给出会导致隐式提交的命令时失败/回滚。

我怀疑没有办法做到这一点，环顾四周，但我希望我错了。希望这里有人知道:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T12:09:19.730

我刚刚成功尝试的另一种 hacky 方法是通过 mysql 特定命令获取创建表 DDL

```
SHOW CREATE TABLE `tableName` 
```

然后使用一些正则表达式魔法并制作一个新的 DDL 查询，该查询将基于原始表创建一个临时表，并将所有更改表更改合并到创建表中。

在我的基于 PHP 的项目中，我执行以下操作以向临时表添加唯一索引。它成功了，并且在事务中不再发生隐式提交。

```
$createDDL = ... get from SHOW CREATE TABLE `tableName`
$nr = 0;
$createDDL = preg_replace("/CREATE TABLE `$tableName` \(/", "CREATE TEMPORARY TABLE `$tmpName` (\nUNIQUE `ukey-1` ($uniqCols),", $createDDL, -1, $nr);
if (!$nr)
  throw new Exception("CREATE TABLE replacement error. No reps made.");
mysqli_query($con, $createDDL); 
```

**编辑**顺便说一下，这里有一些错误（功能）报告（多年来）。在第一个中，您可以看到一个响应（可追溯到 2006 年），其中指出：由于此行为与 oracle db 中的相同，因此这是一致的...

*   [http://bugs.mysql.com/bug.php?id=22857](http://bugs.mysql.com/bug.php?id=22857)
*   [http://bugs.mysql.com/bug.php?id=28109](http://bugs.mysql.com/bug.php?id=28109)

也许应该启动功能请求“垃圾邮件活动”以使此功能请求恢复活力！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:54:20.793

至少对于 MySQL 5.5.19，你是对的。文档声明`ALTER TEMPORARY TABLE`不会进行显式提交，但 MySQL 会扼杀`TEMPORARY`关键字。

我可以想到两种可能的解决方法：

**解决方法 1：**

使用新的临时表代替`ALTER`：

```
CREATE TABLE foo (bar INT);
START TRANSACTION;
INSERT INTO foo VALUES (1);
CREATE TEMPORARY TABLE mumble LIKE foo;
CREATE TEMPORARY TABLE mumble2 (bar INT UNSIGNED) SELECT * FROM mumble;
ROLLBACK;
SELECT * FROM foo; 
```

最后一条语句产生以下输出：

```
Empty set (0.00 sec) 
```

不幸的是，没有办法重命名`mumble2`回`mumble`，因为`RENAME`临时表不允许这样做，并且`ALTER mumble2 RENAME mumble`隐式提交。

**解决方法 2：**

不要使用临时表，而是生成一个子进程来运行会导致隐式提交的命令：

过程1：

```
CREATE TABLE foo (bar INT);
START TRANSACTION;
INSERT INTO foo VALUES (1); 
```

过程 2（并使用与 MySQL 的不同连接）：

```
CREATE TABLE mumble LIKE foo;
ALTER TABLE mumble modify bar INT UNSIGNED; 
```

过程1：

```
ROLLBACK;
SELECT * FROM foo;
DROP TABLE IF EXISTS mumble; 
```

# visual-c++ - 构建 VC++ 2012 MSB6006 时出现 MSBuild 错误：“CL.exe”退出，代码为 -1073741502

> ID：16221996
> 
> 赞同：2
> 
> 时间：2013-04-25T18:25:04.863
> 
> 标签：visual-c++, msbuild, teamcity

在 TeamCity 上使用 VS 2012 构建仅包含 c++ 项目的 sln 文件时，出现以下错误：

错误 MSB6006：“CL.exe”退出，代码为 -1073741502。

有谁知道这个错误是什么意思。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-05T10:24:47.700

退出代码描述了 STATUS_DLL_INIT_FAILED 问题。